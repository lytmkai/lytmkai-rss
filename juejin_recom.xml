<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>æ˜é‡‘æ–‡ç« æ¨è</title>      <link>https://juejin.cn/recommended?sort=newest</link>      <description>ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</description>      <generator>python juejin_recom.py @Pi20</generator>      <item>    <title><![CDATA[Vite æ’ä»¶å¼€å‘å®æˆ˜ï¼šå¦‚ä½•è‡ªåŠ¨æ³¨å…¥ SDK è„šæœ¬]]></title>    <link>https://juejin.cn/post/7605907495770112009</link>    <guid>https://juejin.cn/post/7605907495770112009</guid>    <pubDate>2026-02-13T06:44:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605907495770112009" data-draft-id="7605907495770079241" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vite æ’ä»¶å¼€å‘å®æˆ˜ï¼šå¦‚ä½•è‡ªåŠ¨æ³¨å…¥ SDK è„šæœ¬"/> <meta itemprop="keywords" content="å‰ç«¯,AIGC"/> <meta itemprop="datePublished" content="2026-02-13T06:44:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§é¾„ç¨‹åºå‘˜"/> <meta itemprop="url" content="https://juejin.cn/user/784393864231083"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vite æ’ä»¶å¼€å‘å®æˆ˜ï¼šå¦‚ä½•è‡ªåŠ¨æ³¨å…¥ SDK è„šæœ¬
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/784393864231083/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§é¾„ç¨‹åºå‘˜
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-13T06:44:19.000Z" title="Fri Feb 13 2026 06:44:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">éœ€æ±‚èƒŒæ™¯</h2>
<p>AutoForm SDK å¼€å‘å®Œæˆåï¼Œæˆ‘ä»¬éœ€è¦æä¾›ç»™å®¢æˆ·é›†æˆã€‚
å¯¹äºä½¿ç”¨ Vite çš„å®¢æˆ·ï¼Œå¦‚æœèƒ½æä¾›ä¸€ä¸ªæ’ä»¶ï¼Œè®©ä»–ä»¬åœ¨ <code>vite.config.ts</code> é‡Œé…ç½®ä¸€ä¸‹å°±èƒ½ç”¨ï¼Œä½“éªŒä¼šå¥½å¾ˆå¤šã€‚</p>
<p>æœ¬æ–‡å°†æ‰‹æŠŠæ‰‹æ•™ä½ å¼€å‘ä¸€ä¸ª <strong>Vite æ’ä»¶</strong>ï¼Œå®ç° SDK è„šæœ¬çš„è‡ªåŠ¨æ³¨å…¥ã€‚</p>
<h2 data-id="heading-1">æ’ä»¶ç»“æ„</h2>
<p>Vite æ’ä»¶æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªè¿”å›ç‰¹å®šå¯¹è±¡çš„å‡½æ•°ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// vite-plugin-autoform.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">autoFormPlugin</span>(<span class="hljs-params">options</span>) {
  <span class="hljs-keyword">return</span> {
    <span class="hljs-attr">name</span>: <span class="hljs-string">'vite-plugin-autoform'</span>,
    <span class="hljs-comment">// æ’ä»¶é’©å­</span>
    <span class="hljs-title function_">transformIndexHtml</span>(<span class="hljs-params">html</span>) {
      <span class="hljs-comment">// ...</span>
    }
  };
}
</code></pre>
<h2 data-id="heading-2">æ ¸å¿ƒé€»è¾‘ï¼štransformIndexHtml</h2>
<p>æˆ‘ä»¬éœ€è¦åœ¨ <code>index.html</code> çš„ <code>&lt;body&gt;</code> ç»“æŸæ ‡ç­¾å‰æ’å…¥ SDK çš„ <code>&lt;script&gt;</code> æ ‡ç­¾ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-title function_">transformIndexHtml</span>(<span class="hljs-params">html</span>) {
  <span class="hljs-keyword">const</span> scriptTag = <span class="hljs-string">`
    &lt;script&gt;
      window.AIFormConfig = <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(options)}</span>;
    &lt;/script&gt;
    &lt;script src="https://cdn.autoform.com/sdk.js" async&gt;&lt;/script&gt;
  `</span>;
  
  <span class="hljs-keyword">return</span> html.<span class="hljs-title function_">replace</span>(<span class="hljs-string">'&lt;/body&gt;'</span>, <span class="hljs-string">`<span class="hljs-subst">${scriptTag}</span>&lt;/body&gt;`</span>);
}
</code></pre>
<h2 data-id="heading-3">è¿›é˜¶ï¼šå¼€å‘ç¯å¢ƒä¸ç”Ÿäº§ç¯å¢ƒåŒºåˆ†</h2>
<p>åœ¨å¼€å‘ç¯å¢ƒï¼ˆ<code>npm run dev</code>ï¼‰ä¸‹ï¼Œæˆ‘ä»¬å¯èƒ½å¸Œæœ›æ³¨å…¥æœ¬åœ°çš„ SDK è„šæœ¬ï¼Œæ–¹ä¾¿è°ƒè¯•ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-title function_">configResolved</span>(<span class="hljs-params">config</span>) {
  isDev = config.<span class="hljs-property">command</span> === <span class="hljs-string">'serve'</span>;
},

<span class="hljs-title function_">transformIndexHtml</span>(<span class="hljs-params">html</span>) {
  <span class="hljs-keyword">const</span> src = isDev 
    ? <span class="hljs-string">'http://localhost:3000/sdk.js'</span> 
    : <span class="hljs-string">'https://cdn.autoform.com/sdk.js'</span>;
    
  <span class="hljs-comment">// ...</span>
}
</code></pre>
<h2 data-id="heading-4">å‘å¸ƒåˆ° NPM</h2>
<ol>
<li>åˆ›å»º <code>package.json</code>ã€‚</li>
<li>é…ç½® <code>main</code> å’Œ <code>types</code>ã€‚</li>
<li><code>npm publish</code>ã€‚</li>
</ol>
<p>ç°åœ¨ï¼Œç”¨æˆ·åªéœ€è¦ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">npm install vite-plugin-autoform
</code></pre>
<p>ç„¶ååœ¨ <code>vite.config.ts</code> ä¸­ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> autoForm <span class="hljs-keyword">from</span> <span class="hljs-string">'vite-plugin-autoform'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">plugins</span>: [<span class="hljs-title function_">autoForm</span>({ <span class="hljs-attr">token</span>: <span class="hljs-string">'xxx'</span> })]
};
</code></pre>
<h2 data-id="heading-5">æ€»ç»“</h2>
<p>Vite æ’ä»¶å¼€å‘éå¸¸ç®€å•ï¼Œä½†èƒ½æå¤§åœ°æå‡ç”¨æˆ·ä½“éªŒã€‚å¯¹äº SDK å¼€å‘è€…æ¥è¯´ï¼Œæä¾›é…å¥—çš„æ„å»ºå·¥å…·æ’ä»¶æ˜¯å¿…ä¸å¯å°‘çš„ã€‚</p>
<p>ğŸ‘‰ <strong>å®˜ç½‘åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2F51bpms.com" target="_blank" title="https://51bpms.com" ref="nofollow noopener noreferrer">51bpms.com</a></strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[TypeScript ç±»å‹ä½“æ“ï¼šå¦‚ä½•ä¸º SDK ç¼–å†™ä¼˜é›…çš„ç±»å‹å®šä¹‰]]></title>    <link>https://juejin.cn/post/7605811866909163529</link>    <guid>https://juejin.cn/post/7605811866909163529</guid>    <pubDate>2026-02-13T06:46:50.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605811866909163529" data-draft-id="7605856048361750566" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="TypeScript ç±»å‹ä½“æ“ï¼šå¦‚ä½•ä¸º SDK ç¼–å†™ä¼˜é›…çš„ç±»å‹å®šä¹‰"/> <meta itemprop="keywords" content="å‰ç«¯,AIGC"/> <meta itemprop="datePublished" content="2026-02-13T06:46:50.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§é¾„ç¨‹åºå‘˜"/> <meta itemprop="url" content="https://juejin.cn/user/784393864231083"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            TypeScript ç±»å‹ä½“æ“ï¼šå¦‚ä½•ä¸º SDK ç¼–å†™ä¼˜é›…çš„ç±»å‹å®šä¹‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/784393864231083/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§é¾„ç¨‹åºå‘˜
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-13T06:46:50.000Z" title="Fri Feb 13 2026 06:46:50 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">èƒŒæ™¯</h2>
<p>ä½œä¸ºä¸€æ¬¾ SDKï¼Œæä¾›å®Œå–„çš„ TypeScript ç±»å‹å®šä¹‰ï¼ˆ.d.tsï¼‰æ˜¯å¯¹ç”¨æˆ·æœ€åŸºæœ¬çš„å°Šé‡ã€‚
AutoForm çš„é…ç½®é¡¹éå¸¸å¤æ‚ï¼Œä¸”å­˜åœ¨å¾ˆå¤šè”åŠ¨å…³ç³»ã€‚å¦‚ä½•ç”¨ TS å‡†ç¡®æè¿°è¿™äº›å…³ç³»ï¼Ÿ</p>
<p>ä»Šå¤©å¸¦å¤§å®¶åšä¸€å¥—ç±»å‹ä½“æ“ã€‚</p>
<h2 data-id="heading-1">æŒ‘æˆ˜ä¸€ï¼šäº’æ–¥å±æ€§</h2>
<p>å¦‚æœé…ç½®äº† <code>mode: 'auto'</code>ï¼Œåˆ™ <code>interval</code> å¿…å¡«ï¼›å¦‚æœ <code>mode: 'manual'</code>ï¼Œåˆ™ <code>interval</code> ä¸å¯å¡«ã€‚</p>
<p><strong>é”™è¯¯å†™æ³•ï¼š</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Config</span> {
  <span class="hljs-attr">mode</span>: <span class="hljs-string">'auto'</span> | <span class="hljs-string">'manual'</span>;
  interval?: <span class="hljs-built_in">number</span>;
}
</code></pre>
<p><strong>æ­£ç¡®å†™æ³•ï¼ˆDiscriminated Unionsï¼‰ï¼š</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">AutoConfig</span> = {
  <span class="hljs-attr">mode</span>: <span class="hljs-string">'auto'</span>;
  <span class="hljs-attr">interval</span>: <span class="hljs-built_in">number</span>;
};

<span class="hljs-keyword">type</span> <span class="hljs-title class_">ManualConfig</span> = {
  <span class="hljs-attr">mode</span>: <span class="hljs-string">'manual'</span>;
  interval?: <span class="hljs-built_in">never</span>; <span class="hljs-comment">// å…³é”®ï¼šç¦æ­¢å‡ºç°</span>
};

<span class="hljs-keyword">type</span> <span class="hljs-title class_">Config</span> = <span class="hljs-title class_">AutoConfig</span> | <span class="hljs-title class_">ManualConfig</span>;
</code></pre>
<h2 data-id="heading-2">æŒ‘æˆ˜äºŒï¼šäº‹ä»¶å›è°ƒçš„ç±»å‹æ¨å¯¼</h2>
<p>æˆ‘ä»¬å¸Œæœ›ç”¨æˆ·åœ¨ç›‘å¬äº‹ä»¶æ—¶ï¼Œèƒ½è‡ªåŠ¨æ¨å¯¼å‡º <code>event</code> å¯¹è±¡çš„ç±»å‹ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript">sdk.<span class="hljs-title function_">on</span>(<span class="hljs-string">'success'</span>, <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(e.<span class="hljs-property">data</span>); <span class="hljs-comment">// e åº”è¯¥æ˜¯ SuccessEvent</span>
});

sdk.<span class="hljs-title function_">on</span>(<span class="hljs-string">'error'</span>, <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(e.<span class="hljs-property">message</span>); <span class="hljs-comment">// e åº”è¯¥æ˜¯ ErrorEvent</span>
});
</code></pre>
<p><strong>å®ç°ï¼š</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">EventMap</span> = {
  <span class="hljs-attr">success</span>: { <span class="hljs-built_in">any</span> };
  <span class="hljs-attr">error</span>: { <span class="hljs-attr">message</span>: <span class="hljs-built_in">string</span>; <span class="hljs-attr">code</span>: <span class="hljs-built_in">number</span> };
};

<span class="hljs-keyword">class</span> <span class="hljs-title class_">SDK</span> {
  on&lt;K <span class="hljs-keyword">extends</span> keyof <span class="hljs-title class_">EventMap</span>&gt;(
    <span class="hljs-attr">type</span>: K, 
    <span class="hljs-attr">handler</span>: <span class="hljs-function">(<span class="hljs-params">event: EventMap[K]</span>) =&gt;</span> <span class="hljs-built_in">void</span>
  ) {
    <span class="hljs-comment">// ...</span>
  }
}
</code></pre>
<h2 data-id="heading-3">æŒ‘æˆ˜ä¸‰ï¼šæ·±åº¦ Partial</h2>
<p>ç”¨æˆ·é…ç½®æ—¶ï¼Œé€šå¸¸åªéœ€è¦è¦†ç›–é»˜è®¤é…ç½®çš„ä¸€éƒ¨åˆ†ã€‚æˆ‘ä»¬éœ€è¦ä¸€ä¸ªé€’å½’çš„ <code>Partial</code>ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">DeepPartial</span>&lt;T&gt; = {
  [P <span class="hljs-keyword">in</span> keyof T]?: T[P] <span class="hljs-keyword">extends</span> <span class="hljs-built_in">object</span> ? <span class="hljs-title class_">DeepPartial</span>&lt;T[P]&gt; : T[P];
};
</code></pre>
<h2 data-id="heading-4">æ€»ç»“</h2>
<p>TypeScript ä¸ä»…ä»…æ˜¯ç±»å‹æ£€æŸ¥å·¥å…·ï¼Œæ›´æ˜¯æœ€å¥½çš„æ–‡æ¡£ã€‚å†™å¥½ç±»å‹å®šä¹‰ï¼Œèƒ½è®©ç”¨æˆ·åœ¨ä½¿ç”¨ SDK æ—¶è·å¾—æè‡´çš„æ™ºèƒ½æç¤ºä½“éªŒï¼Œå‡å°‘æŸ¥é˜…æ–‡æ¡£çš„æ—¶é—´ã€‚</p>
<p>ğŸ‘‰ <strong>å®˜ç½‘åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2F51bpms.com" target="_blank" title="https://51bpms.com" ref="nofollow noopener noreferrer">51bpms.com</a></strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»n8nåˆ°Claude Skillsï¼šè½»æ¾æå®šå°çº¢ä¹¦çƒ­é—¨ç¾é£Ÿæ‰‹è´¦ï¼Œ3åˆ†é’Ÿå‡ºå›¾ï¼Œå°ç™½ä¹Ÿèƒ½ä¼š!]]></title>    <link>https://juejin.cn/post/7605985547569397766</link>    <guid>https://juejin.cn/post/7605985547569397766</guid>    <pubDate>2026-02-13T07:16:46.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605985547569397766" data-draft-id="7605542907119222836" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»n8nåˆ°Claude Skillsï¼šè½»æ¾æå®šå°çº¢ä¹¦çƒ­é—¨ç¾é£Ÿæ‰‹è´¦ï¼Œ3åˆ†é’Ÿå‡ºå›¾ï¼Œå°ç™½ä¹Ÿèƒ½ä¼š!"/> <meta itemprop="keywords" content="Agent,AIGC,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-02-13T07:16:46.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åç«¯å°è‚¥è‚ "/> <meta itemprop="url" content="https://juejin.cn/user/2966945320667536"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»n8nåˆ°Claude Skillsï¼šè½»æ¾æå®šå°çº¢ä¹¦çƒ­é—¨ç¾é£Ÿæ‰‹è´¦ï¼Œ3åˆ†é’Ÿå‡ºå›¾ï¼Œå°ç™½ä¹Ÿèƒ½ä¼š!
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2966945320667536/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åç«¯å°è‚¥è‚ 
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-13T07:16:46.000Z" title="Fri Feb 13 2026 07:16:46 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#383838;font-size:15px;line-height:30px;letter-spacing:2px;word-break:break-word;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;scroll-behavior:smooth;background-image:linear-gradient(0deg,transparent 24%,rgba(201,195,195,.329) 25%,hsla(0,8%,80.4%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent),linear-gradient(90deg,transparent 24%,rgba(204,196,196,.226) 25%,hsla(0,4%,66.1%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent);background-color:#fff;background-size:50px 50px;padding-bottom:60px}.markdown-body ::selection{color:#fff;background-color:#a862ea}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin:24px 0 12px;color:#a862ea}.markdown-body h1{line-height:2;font-size:1.4em}.markdown-body h1~p:first-of-type:first-letter{color:#a862ea;float:left;font-size:2em;margin-right:.4em;font-weight:bolder}.markdown-body h2{font-size:1.2em}.markdown-body h3{font-size:1.1em}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;padding-left:.2em}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#a862ea}.markdown-body ol li.task-list-item,.markdown-body ul li.task-list-item{list-style:none}.markdown-body ol li.task-list-item ol,.markdown-body ol li.task-list-item ul,.markdown-body ul li.task-list-item ol,.markdown-body ul li.task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:10px}.markdown-body a,.markdown-body code,.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6,.markdown-body li,.markdown-body p{opacity:.85;vertical-align:baseline;transition:all .1s ease}.markdown-body a:hover,.markdown-body code:hover,.markdown-body h1:hover,.markdown-body h2:hover,.markdown-body h3:hover,.markdown-body h4:hover,.markdown-body h5:hover,.markdown-body h6:hover,.markdown-body li:hover,.markdown-body p:hover{opacity:1}.markdown-body a{display:inline-block;color:#a862ea;cursor:pointer;text-decoration:none;position:relative}.markdown-body a:after{content:"";position:absolute;width:98%;height:1px;bottom:0;left:0;transform:scaleX(0);background-color:#a862ea;transform-origin:bottom right;transition:transform .3s ease-in-out}.markdown-body a:hover:after{transform:scaleX(1);transform-origin:bottom left}.markdown-body a:active,.markdown-body a:link{color:#a862ea}.markdown-body img{max-width:100%;user-select:none;margin:1em 0;transition:transform .2s ease 0s;background-color:#f8f5ff;box-shadow:0 0 10px #e7daff}.markdown-body img:hover{opacity:1;box-shadow:0 0 20px #e7daff;transform:translateY(-1px)}.markdown-body blockquote{padding:.5em 1em;margin:12px 0;border-top-left-radius:2px;border-bottom-left-radius:2px;border-left:3px solid #a862ea;background-color:#f8f5ff}.markdown-body blockquote&gt;p{margin:0}.markdown-body .math{font-style:italic;margin:12px 0;padding:.5em 1em;background-color:#f8f5ff}.markdown-body .math&gt;p{margin:0}.markdown-body code{padding:2px .4em;overflow-x:auto;color:#a862ea;font-weight:700;word-break:break-word;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;background-color:#f8f5ff}.markdown-body pre{margin:2em 0}.markdown-body pre&gt;code{display:block;padding:1.5em;word-break:normal;font-size:.9em;font-style:normal;font-weight:400;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;line-height:18px;color:#383838;border-radius:2px;scroll-behavior:smooth;box-shadow:0 0 10px #e7daff}.markdown-body pre&gt;code:hover{box-shadow:0 0 20px #e7daff}.markdown-body pre&gt;code::-webkit-scrollbar{height:6px;background-color:#f8f5ff}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:#e7daff;border-bottom-left-radius:3px;border-bottom-right-radius:3px}.markdown-body hr{margin:2em 0;border-top:1px solid #a862ea}.markdown-body table{width:100%;font-size:12px;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{color:#a862ea;background:#f8f5ff}.markdown-body td,.markdown-body th{padding:.5em;border:1px solid #e7daff}.markdown-body tr{background-color:#f8f5ff}@media (max-width:720px){.markdown-body{font-size:12px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯å°è‚¥è‚ ï¼Œä¸“æ³¨AIå¹²è´§æ•™ç¨‹åˆ†äº«ï¼Œä»Šå¤©å¸¦æ¥çš„æ•™ç¨‹æ˜¯åŸºäºClaude Code10åˆ†é’Ÿæ­å»ºç«çˆ†çš„å°çº¢ä¹¦ç¾é£Ÿæ‰‹è´¦å›¾æ–‡ç”Ÿæˆå·¥å…·ã€‚</p>
<h2 data-id="heading-0">1. å‰è¨€</h2>
<p>å‰é¢çš„çŸ¥è¯†å¡ç‰‡æ•™ç¨‹åšå®Œåã€‚å¾ˆå¤šè¯»è€…åé¦ˆå®ç°å¤ªéš¾äº†ï¼Œæ•™ç¨‹çœ‹ä¸æ‡‚ã€‚</p>
<p><a href="https://juejin.cn/post/7602512064976519231" target="_blank" title="https://juejin.cn/post/7602512064976519231">n8nå·¥ä½œæµï¼šä¸€é”®æŠŠå¤æ‚çŸ¥è¯†å˜æˆå°çº¢ä¹¦ç§‘æ™®å¡ç‰‡ï¼Œç›´æ¥å­˜å…¥æœ¬åœ°ç£ç›˜ï¼</a></p>
<p>ä¸å¾—ä¸è¯´n8nçš„é—¨æ§›ç¡®å®éœ€è¦æœ‰ä¸€ç‚¹æŠ€æœ¯èƒŒæ™¯çš„äººã€‚ä¹Ÿæœ‰è¯»è€…åé¦ˆèƒ½ä¸èƒ½åšä¸€ä¸‹æœ€è¿‘å°çº¢ä¹¦å¾ˆç«çš„ç¾é£Ÿæ‰‹è´¦å›¾æ–‡ï¼Œ<strong>æ•™ç¨‹æœ€å¥½ç®€å•ä¸€ç‚¹</strong>ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a8fc7eb42c02425ab524689850700819~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771571806&amp;x-signature=78MwfYVIeoglPig4kD49FymRA7c%3D" alt="" loading="lazy"/></p>
<p>è¿™ç¯‡æ–‡ç« æ•™ä½ ç”¨10åˆ†é’Ÿæ¥æ­å»ºæœ€è¿‘åœ¨å°çº¢ä¹¦ä¸Šå¾ˆç«çš„ç¾é£Ÿæ‰‹è´¦å›¾æ–‡ã€‚ä»…éœ€ä¸€ä¸ªæŒ‡ä»¤<code>å¸®æˆ‘ç”Ÿæˆåˆ¶ä½œè›‹ç‚’é¥­çš„å°çº¢ä¹¦æ‰‹è´¦å¡ç‰‡</code>ã€‚ç­‰å¾…å‡ åˆ†é’Ÿåç¾é£Ÿæ‰‹è´¦å¡ç‰‡å°±ä¼šå‡ºç°åœ¨æœ¬åœ°ç›®å½•ä¸‹ï¼Œä½ åªéœ€è¦ç®€å•é…æ–‡å°±èƒ½å‘å¸ƒåˆ°å°çº¢ä¹¦/å°ç»¿ä¹¦ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7f524dd73d934f7fa149e735aa2c9a1d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771571806&amp;x-signature=ivNMS1Im8pQ03qmW1iGC8jj4Am8%3D" alt="" loading="lazy"/></p>
<p>å›¾ç‰‡1ç»†èŠ‚ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/726b4974d68c47b38edb694b97bc2960~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771571806&amp;x-signature=xaF8md5z0ED7KuDcqpm%2Bde5Pg9Y%3D" alt="" loading="lazy"/></p>
<p>å›¾ç‰‡2ç»†èŠ‚ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a09eddc0c98d4c008efaa848d4d6d94e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771571806&amp;x-signature=FGsh4EmmEmBlEBHp87gTFGJAkZk%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-1">2. ä¸ºä½•ä»n8nè½¬åˆ°Claude Skills</h2>
<p>n8n è™½ç„¶å¼ºå¤§ï¼Œä½†å¯¹éæŠ€æœ¯äººå‘˜æ¥è¯´ï¼Œç†è§£ Webhookã€JSON æ•°æ®ç»“æ„ä»¥åŠæ’æŸ¥æŠ¥é”™ç®€ç›´æ˜¯å™©æ¢¦ã€‚<strong>è½¬æŠ• Claude Skills ä¸»è¦åŸºäºä¸‰ä¸ªé™ç»´æ‰“å‡»çš„ä¼˜åŠ¿ï¼š</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/34fef6ec8aa74b3488b589a659f83536~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771571806&amp;x-signature=kqu1JbfPm5mTWVAFs1HiRz%2B%2FUcc%3D" alt="" loading="lazy"/></p>
<p><strong>1.</strong> <strong>äº¤äº’è¿›åŒ–</strong></p>
<p>n8n éœ€è¦åƒå·¥ç¨‹å¸ˆä¸€æ ·ç¼–æ’é€»è¾‘èŠ‚ç‚¹ï¼›Claude Skills åªéœ€è¦åƒè€æ¿ä¸€æ ·ä¸‹è¾¾è‡ªç„¶è¯­è¨€æŒ‡ä»¤ã€‚</p>
<p><strong>2.</strong> <strong>çµæ´»å¤šå˜</strong></p>
<p>æƒ³æ¢ä¸ªå›¾ç‰‡é£æ ¼ï¼Ÿåœ¨ n8n é‡Œè¦æ”¹å‚æ•°ï¼Œåœ¨è¿™é‡Œåªéœ€ç›´æ¥å‘Šè¯‰ Claude<strong>æ¢ä¸ªé²œè‰³ç‚¹çš„é¢œè‰²</strong>ï¼Œå®ƒèƒ½å¬æ‡‚äººè¯å¹¶åŠ¨æ€è°ƒæ•´ã€‚</p>
<p><strong>3.</strong> <strong>æœ¬åœ°ç›´è¿</strong></p>
<p>n8n é€šå¸¸éƒ¨ç½²åœ¨äº‘ç«¯/Dockerï¼Œæ–‡ä»¶è½åœ°éº»çƒ¦ï¼›Claude Skills ç›´æ¥è¿è¡Œåœ¨æœ¬åœ°ç»ˆç«¯ï¼Œç”Ÿæˆçš„å›¾ç‰‡ç›´æ¥å‡ºç°åœ¨ä½ çš„æ–‡ä»¶å¤¹é‡Œï¼Œä¸»æ‰“ä¸€ä¸ª<strong>æ‰€è§å³æ‰€å¾—</strong>ã€‚</p>
<h2 data-id="heading-2">3. æ­å»ºè¿‡ç¨‹</h2>
<h3 data-id="heading-3">3.1. å®‰è£…Claude Codeï¼ˆwindowsç³»ç»Ÿï¼‰</h3>
<p>å…¶å®ä¹‹å‰åœ¨Agent Skillsç³»åˆ—æ–‡ç« é‡Œé¢å·²ç»è¯´è¿‡Claude Codeå®‰è£…æ­¥éª¤äº†ï¼Œè¿˜æ˜¯å¾ˆå¤šäººæ²¡çœ‹æ‡‚ï¼Œä»Šå¤©å°±å†ç»†è‡´ä¸€äº›ã€‚</p>
<p><strong>1.</strong> <strong>å‰ç½®æ­¥éª¤å®‰è£…node.js</strong></p>
<p>Claude Code æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªè¿è¡Œåœ¨ç»ˆç«¯çš„å·¥å…·ï¼Œä¾èµ– Node ç¯å¢ƒã€‚æˆ‘ä»¬éœ€è¦æ¥åˆ° Node.js å®˜ç½‘<a href="https://link.juejin.cn?target=https%3A%2F%2Fnodejs.org%2F%25EF%25BC%258C%25E9%2580%2589%25E6%258B%25A9%25E5%25AE%2589%25E8%25A3%2585%25E5%258C%2585%25EF%25BC%258C%25E5%25AE%2589%25E8%25A3%2585%25E8%25BF%2587%25E7%25A8%258B%25E4%25B8%2580%25E8%25B7%25AF%2560%25E4%25B8%258B%25E4%25B8%2580%25E6%25AD%25A5%2560%25E3%2580%2582" target="_blank" title="https://nodejs.org/%EF%BC%8C%E9%80%89%E6%8B%A9%E5%AE%89%E8%A3%85%E5%8C%85%EF%BC%8C%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%B8%80%E8%B7%AF%60%E4%B8%8B%E4%B8%80%E6%AD%A5%60%E3%80%82" ref="nofollow noopener noreferrer">nodejs.org/ï¼Œé€‰æ‹©å®‰è£…åŒ…ï¼Œå®‰è£…è¿‡ç¨‹â€¦</a></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/75b7bb23bdbf42dca1c99e2d93780acd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771571806&amp;x-signature=F01j%2BN%2B3ASuMySkKcWqcg2p7dHI%3D" alt="" loading="lazy"/></p>
<p><strong>å®‰è£…å®Œæˆåã€‚</strong> æŒ‰ä½é”®ç›˜ä¸Šçš„win+ré”®ï¼Œæ‰“å¼€è¿è¡Œçª—å£ï¼Œè¾“å…¥<code>cmd</code>æ‰“å¼€å‘½ä»¤æç¤ºç¬¦ï¼Œè¾“å…¥<code>node -v</code>ï¼ŒæŒ‰ä¸€ä¸‹é”®ç›˜çš„ä¸Šçš„<strong>å›è½¦é”®ï¼Œ</strong> å¦‚æ­£å¸¸ç°åœ¨node.jsç‰ˆæœ¬å·å³ä¸ºå®‰è£…æˆåŠŸã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/329c458c592c4090b9cc6cc08c397d38~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771571806&amp;x-signature=pyK81pz6ExCqVOBGgtnoTgp9SSM%3D" alt="" loading="lazy"/></p>
<p><strong>2.</strong> <strong>å®‰è£…python</strong></p>
<p>æ¥åˆ° Python å®˜ç½‘<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.python.org%2Fdownloads%2Fwindows%2F" target="_blank" title="https://www.python.org/downloads/windows/" ref="nofollow noopener noreferrer">www.python.org/downloads/wâ€¦</a> ï¼Œä¸‹è½½å®‰è£…åŒ…ã€‚</p>
<p><strong>æ³¨æ„ï¼š</strong> å®‰è£…æ—¶ä¸€å®šè¦å‹¾é€‰ <code>Add Python to PATH</code>ï¼ˆè¿™ä¸€æ­¥æœ€å…³é”®ï¼Œå¦åˆ™ç»ˆç«¯æ‰¾ä¸åˆ° Pythonï¼‰ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/30e838fb949c414688e6087aeaab3a25~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771571806&amp;x-signature=r4JZyt1r%2B%2BWEgLqyJOm01gD0Iuc%3D" alt="" loading="lazy"/></p>
<p><strong>å®‰è£…å®Œæˆåã€‚</strong> æŒ‰ä½é”®ç›˜ä¸Šçš„win+ré”®ï¼Œæ‰“å¼€è¿è¡Œçª—å£ï¼Œè¾“å…¥<code>cmd</code>æ‰“å¼€å‘½ä»¤æç¤ºç¬¦ï¼Œè¾“å…¥<code>python --version</code>ï¼ŒæŒ‰ä¸€ä¸‹é”®ç›˜çš„ä¸Šçš„<strong>å›è½¦é”®</strong>ï¼Œå¦‚æ­£å¸¸æ˜¾ç¤ºpythonç‰ˆæœ¬å·å³ä¸ºå®‰è£…æˆåŠŸã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9e53d2038d024de9b5407bd2f9decb00~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771571806&amp;x-signature=i7OMkIaboV6uaCvZv1lAdd5VqQs%3D" alt="" loading="lazy"/></p>
<p><strong>3.</strong> <strong>å®‰è£…Claude Code</strong></p>
<p>æŒ‰ä½é”®ç›˜ä¸Šçš„win+ré”®ï¼Œæ‰“å¼€è¿è¡Œçª—å£ï¼Œè¾“å…¥<code>cmd</code>æ‰“å¼€å‘½ä»¤æç¤ºç¬¦ï¼Œè¾“å…¥<code>npm install -g @anthropic-ai/claude-code</code>ï¼ŒæŒ‰ä¸€ä¸‹é”®ç›˜çš„ä¸Šçš„<strong>å›è½¦é”®</strong>è¿›è¡Œå®‰è£…ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/648acf3913b842f195f8cbe35ac98fc3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771571806&amp;x-signature=xGCWVJPDebZ8UDTuqf6Y%2B0vEDac%3D" alt="" loading="lazy"/></p>
<p><strong>å®‰è£…å®Œæˆåã€‚</strong> è¾“å…¥<code>claude</code> éªŒè¯æ˜¯å¦å®‰è£…æˆåŠŸã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/54cecce7f0994ae680e9da0d3a5592a9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771571806&amp;x-signature=3Bizz8WNHse8mGFWeL9UTO%2B%2BD48%3D" alt="" loading="lazy"/></p>
<p><strong>4.</strong> <strong>é…ç½®doubao-seed-code</strong></p>
<p>Claude Codeå®‰è£…å¥½åè¿˜è¦é…ç½®ä¸€ä¸ªå¤§æ¨¡å‹æ¥é©±åŠ¨å®ƒã€‚åœ¨ç”µè„‘ä¸Šæ‰“å¼€Powershellï¼Œè¾“å…¥å‘½ä»¤<code>notepad $HOME.claude\settings.json</code></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bdb64b0fae1b483ca9b009489a1dca29~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771571806&amp;x-signature=wSVqfphm7V%2BdttsoVPu%2BPyOEOfA%3D" alt="" loading="lazy"/></p>
<p>æŒ‰ä¸€ä¸‹é”®ç›˜çš„ä¸Šçš„<strong>å›è½¦é”®ï¼Œ</strong> ä¼šå¼¹å‡ºsetting.jsæ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶æ˜¯ç”¨æ¥é…ç½®é©±åŠ¨claude codeçš„å¤§æ¨¡å‹çš„ï¼Œæˆ‘è¿™è¾¹ç”¨çš„æ˜¯è±†åŒ…ç¼–ç¨‹æ¨¡å‹ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9554f977ccd04a2fa6fc5d4e826149f7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771571806&amp;x-signature=Ssw9yfXgofkhg3HHRCL2tEQze3E%3D" alt="" loading="lazy"/></p>
<p>ANTHROPIC_AUTH_TOKENå¡«å…¥ç«å±±å¼•æ“çš„<code>APIè®¿é—®ç§˜é’¥</code><a href="https://link.juejin.cn?target=https%3A%2F%2Fconsole.volcengine.com%2Fiam%2Fkeymanage" target="_blank" title="https://console.volcengine.com/iam/keymanage" ref="nofollow noopener noreferrer">console.volcengine.com/iam/keymanaâ€¦</a></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ce017cd2c5d54ab0b7ffa1368fd70d38~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771571806&amp;x-signature=87Mk%2FMyGxgzGZG0eQIJu3CWVHT0%3D" alt="" loading="lazy"/></p>
<p><strong>psï¼šè¦è®¢é˜…ç›¸åº”å¥—é¤æ‰èƒ½ç”¨</strong></p>
<h3 data-id="heading-4">3.2. æ­å»ºé¡¹ç›®</h3>
<p>è¯ä¸å¤šè¯´ï¼Œæ­£å¼å¼€å§‹æ­å»ºã€‚æœ¬æ–‡çš„Agent Skillç›®å½•ç»“æ„è®¾è®¡å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">xiaohongshu-card-maker/
â”œâ”€â”€ SKILL.md          <span class="hljs-comment"># å¿…å¡«ï¼šä½¿ç”¨è¯´æ˜ + å…ƒæ•°æ®</span>
â”œâ”€â”€ scripts/          <span class="hljs-comment"># å¿…å¡«ï¼šå¯æ‰§è¡Œä»£ç </span>
â”œâ”€â”€ references/       <span class="hljs-comment"># å¯é€‰ï¼šæ–‡æ¡£èµ„æ–™</span>
â””â”€â”€ assets/           <span class="hljs-comment"># å¯é€‰ï¼šæ¨¡æ¿ã€èµ„æºæ–‡ä»¶</span>
â””â”€â”€ output/            <span class="hljs-comment"># å¿…å¡«ï¼šè¾“å‡ºæ‰‹è´¦å›¾ç‰‡çš„ç›®å½•</span>
</code></pre>
<p>åŸºäºç›®å½•è®¾è®¡ï¼Œåœ¨.claudeç›®å½•ä¸‹æ–°å»ºé¡¹ç›®æ–‡ä»¶å¤¹ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œæˆ‘åœ¨F:\skill-project.claude\skills\ç›®å½•ä¸‹æ–°å»ºäº†xiaohongshu-card-makerç›®å½•ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/094c1266236e4cc0abaa18ccf917cbc4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771571806&amp;x-signature=6ZYgOXAsW7Y7Z9jCsjElgN1%2FD0Y%3D" alt="" loading="lazy"/></p>
<p><strong>1.</strong> <strong>ç¼–å†™skill.mdã€‚</strong></p>
<p>ä»ä¸‹å›¾å¯çŸ¥è¿™ä¸ªskillåå«xiaohongshu-card-masterã€‚å®ƒçš„è§’è‰²æ˜¯å°çº¢ä¹¦çˆ†æ¬¾æ‰‹è´¦ä¸“å®¶ï¼Œå®ƒçš„ä¸»è¦èŒè´£æ˜¯å›´ç»•<code>å°å…«</code>æ¥åˆ¶ä½œç¾é£Ÿæ‰‹è´¦ã€‚</p>
<p>è¿™æ˜¯æˆ‘ç¼–å†™æç¤ºè¯çš„æ€è·¯ï¼Œä½ å¯ä»¥åŸºäºæˆ‘çš„æŠ•å–‚ç»™è±†åŒ…æ¥æ‰©å†™ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-bullet">1.</span> æ¥æ”¶ç”¨æˆ·è¾“å…¥çš„èœå
<span class="hljs-bullet">2.</span> è°ƒç”¨generate.pyè¿›è¡Œç”Ÿå›¾æ“ä½œ
å›¾ç‰‡å¸ƒå±€ï¼š
<span class="hljs-bullet">-</span> é‡‡ç”¨å‚ç›´æ¨¡å—åŒ–ç½‘æ ¼ï¼Œä½¿ç”¨æ‰‹ç»˜ç›´çº¿ã€è™šçº¿æˆ–â€œçº¸èƒ¶å¸¦â€è¿›è¡ŒåŒºåŸŸåˆ†å‰²ã€‚
<span class="hljs-bullet">-</span> å…³é”®æ­¥éª¤é—´ä½¿ç”¨æ‰‹å†™æ„Ÿçš„ç®­å¤´æˆ–åœ†ç‚¹è¿æ¥ï¼Œå½¢æˆæ¸…æ™°çš„é˜…è¯»åŠ¨çº¿ã€‚
å›¾ç‰‡é£æ ¼ï¼š
-ç°ä»£ç®€çº¦ Ins é£â€œç²¾è£…ä¿®â€æ‰‹è´¦ï¼ŒèåˆçŸ¢é‡æ’ç”»çš„ç²¾å‡†ä¸æ°´å½©ç”»é£çš„æ¸©é¦¨ã€‚
-IPå½¢è±¡å›ºå®šä¸ºå°å…«ã€‚
<span class="hljs-bullet">3.</span> å°†ç”Ÿæˆçš„å›¾ç‰‡å†™å…¥outputæ–‡ä»¶å¤¹
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b1aa24761fee4529a0ffd1eb3bb17de6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771571806&amp;x-signature=FRW%2BlquN767ivwnt8Q7p5iHYfyA%3D" alt="" loading="lazy"/></p>
<p><strong>2.</strong> <strong>ç¼–å†™generate.py</strong></p>
<p>æ¥åˆ°.claude/skills/xiaohongshu-card-maker/scriptsç›®å½•ä¸‹ï¼Œç¼–å†™<strong>generate.py</strong>ä»£ç ã€‚</p>
<p>è¿™æ˜¯æˆ‘ç¼–å†™ä»£ç çš„æ€è·¯ï¼Œä½ å¯ä»¥åŸºäºæˆ‘çš„æŠ•å–‚ç»™è±†åŒ…æ¥æ‰©å†™ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-bullet">1.</span> æ¥æ”¶å‚æ•°ï¼šé€šè¿‡å‘½ä»¤è¡Œæ¥æ”¶ Claude ä¼ æ¥çš„ç»˜ç”»æç¤ºè¯ (--prompt)ã€‚
<span class="hljs-bullet">2.</span> è°ƒç”¨æ¥å£ï¼šå°†æç¤ºè¯å‘é€ç»™äº‘ç«¯ç»˜å›¾ APIï¼ˆä»£ç ä¸­é…ç½®çš„ kg-api.cloudï¼‰ï¼Œå¹¶æŒ‡å®šä½¿ç”¨ nano-banana-2-4kæ¨¡å‹è¿›è¡Œç”Ÿæˆã€‚
<span class="hljs-bullet">3.</span> è‡ªåŠ¨ä¸‹è½½ï¼šæ‹¿åˆ°ç”Ÿæˆçš„å›¾ç‰‡é“¾æ¥åï¼Œè‡ªåŠ¨å°†å…¶ä¸‹è½½å¹¶ä¿å­˜åˆ°æœ¬åœ°çš„ output æ–‡ä»¶å¤¹ä¸­ï¼Œå¹¶æŒ‰æ—¶é—´æˆ³å‘½åã€‚
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e5061290a0ff4185b3b1da8a7e590051~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771571806&amp;x-signature=lRKh2B8WVBPC3CW5hxKLF2nImb0%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-5">3.3 æµ‹è¯•</h3>
<p>å›åˆ°.claudeä¸Šçº§ç›®å½•ï¼Œåœ¨æ–‡ä»¶è·¯å¾„å¤„è¾“å…¥<code>cmd</code>æ‰“å¼€å‘½ä»¤æç¤ºç¬¦ï¼Œè¾“å…¥<code>claude</code>è¿›å…¥claude codeï¼Œå†è¾“å…¥<code>æœ‰å“ªäº›å¯ç”¨çš„skill</code>ï¼Œå¯ä»¥çœ‹åˆ°ä¸‹å›¾ä¸­ï¼Œç”Ÿæˆå°çº¢ä¹¦æ‰‹è´¦å¡ç‰‡çš„skillå·²ç»è¢«æˆåŠŸæ·»åŠ ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/79b7107cfa104077905e1beca843ad40~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771571806&amp;x-signature=tGMev9ra6lxloKeFwJhW6uweWPA%3D" alt="" loading="lazy"/></p>
<p>è¾“å…¥å‘½ä»¤<code>å¸®æˆ‘ç”Ÿæˆåˆ¶ä½œç³–é†‹é‡Œè„Šçš„å°çº¢ä¹¦æ‰‹è´¦å¡ç‰‡</code></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f9fc3beffee243fe89d828c6021dbfb7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771571806&amp;x-signature=joi71D81H9KWoYcJ80lGTfVDEf8%3D" alt="" loading="lazy"/></p>
<p>ç­‰å¾…å‡ åˆ†é’Ÿï¼Œæ‰‹è´¦å¡ç‰‡å°±åˆ¶ä½œå®Œæˆäº†ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b0a01559518240cbad443e11508d2b37~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771571806&amp;x-signature=qLkbLr%2FS16wc5o1pym4tAtjegLU%3D" alt="" loading="lazy"/></p>
<p>æ¥åˆ°outputæ–‡ä»¶å¤¹å¯ä»¥çœ‹åˆ°ç³–é†‹é‡Œè„Šçš„åˆ¶ä½œæ‰‹è´¦å›¾æ–‡å·²ç»å­˜åœ¨ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8a67eca0852e43208816eb1bd90280ea~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771571806&amp;x-signature=zOT3iFvk9WsVU7mo2rGPtAaFJNA%3D" alt="" loading="lazy"/></p>
<p>ç»†èŠ‚å±•ç¤ºï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fd01d58df765475da7eac4076c174432~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771571806&amp;x-signature=dhogwbrwb15Aq3fLc0AJh8riNsw%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e8a4d10d267142ff8dfe2914f7aa734b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771571806&amp;x-signature=c1w0GwUM%2B8mfqHuQTKMs4OiKiYs%3D" alt="" loading="lazy"/></p>
<p>ä»¥ä¸Šå°±æ˜¯æ•´ä¸ªskillæ„å»ºçš„å®Œæ•´æµç¨‹æ‹†è§£ï¼ŒåŠ¨æ‰‹èƒ½åŠ›å¼ºçš„è¯»è€…å¯ä»¥è·Ÿç€æ•™ç¨‹å®è·µä¸€éã€‚<strong>ä¸Šè¿°skillå·²ç»è¢«æ”¶å½•åˆ°äº†å°è‚¥è‚ å…±å­¦ç¾¤ä¸­ï¼Œéœ€è¦åŸä»¶å¯ä»¥åŠ å…¥ç¤¾ç¾¤ç›´æ¥ä½¿ç”¨å“¦ã€‚</strong></p>
<h2 data-id="heading-6">4. ç»“è¯­</h2>
<p>è‡³æ­¤ï¼Œæˆ‘ä»¬ä»…ç”¨ä¸¤ä¸ªæ–‡ä»¶ï¼ˆ<code>SKILL.md</code> å’Œ <code>generate.py</code>ï¼‰å°±å®Œæˆäº†ä» n8n å¤æ‚è¿çº¿åˆ° Claude Agent æ™ºèƒ½ä½“çš„å‡çº§ã€‚</p>
<p><strong>å¦‚æœ¬æ¬¡åˆ†äº«å¯¹ä½ æœ‰å¸®åŠ©ï¼Œæ¬¢è¿ä¸€é”®ä¸‰è¿æ”¯æŒä¸€ä¸‹å°è‚¥è‚ ï¼Œæˆ‘ä»¬ä¸‹æœŸå†è§~</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/960fa279fbb04a49aa4c224bb412a679~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771571806&amp;x-signature=r%2B5qhf0MKN0Ebdmk5AHBMF%2BgkQw%3D" alt="" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Angular ä¸­çš„å¢é‡æ°´åˆï¼šæ„å»ºâ€œç§’å¼€ä¸”å¯äº¤äº’â€çš„ SSR åº”ç”¨]]></title>    <link>https://juejin.cn/post/7605881632541409331</link>    <guid>https://juejin.cn/post/7605881632541409331</guid>    <pubDate>2026-02-13T07:20:55.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605881632541409331" data-draft-id="7605881632541392947" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Angular ä¸­çš„å¢é‡æ°´åˆï¼šæ„å»ºâ€œç§’å¼€ä¸”å¯äº¤äº’â€çš„ SSR åº”ç”¨"/> <meta itemprop="keywords" content="å‰ç«¯,Angular.js"/> <meta itemprop="datePublished" content="2026-02-13T07:20:55.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ˜é‡‘å®‰ä¸œå°¼"/> <meta itemprop="url" content="https://juejin.cn/user/1521379823340792"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Angular ä¸­çš„å¢é‡æ°´åˆï¼šæ„å»ºâ€œç§’å¼€ä¸”å¯äº¤äº’â€çš„ SSR åº”ç”¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1521379823340792/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ˜é‡‘å®‰ä¸œå°¼
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-13T07:20:55.000Z" title="Fri Feb 13 2026 07:20:55 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>åŸæ–‡ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.syncfusion.com%2Fblogs%2Fpost%2Fincremental-hydration-in-angular-apps" target="_blank" title="https://www.syncfusion.com/blogs/post/incremental-hydration-in-angular-apps" ref="nofollow noopener noreferrer">Incremental Hydration In Angular Apps</a></p>
<p>ç¿»è¯‘ï¼šTUARAN</p>
<p>æ¬¢è¿å…³æ³¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FTUARAN%2Ffrontend-weekly-digest-cn" target="_blank" title="https://github.com/TUARAN/frontend-weekly-digest-cn" ref="nofollow noopener noreferrer">{{å‰ç«¯å‘¨åˆŠ}}</a>ï¼Œæ¯å‘¨æ›´æ–°å›½å¤–è®ºå›çš„å‰ç«¯çƒ­é—¨æ–‡ç« ï¼Œç´§è·Ÿæ—¶äº‹ï¼ŒæŒæ¡å‰ç«¯æŠ€æœ¯åŠ¨æ€ã€‚</p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fb429bce2d35402faee5853803c05fe9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR5a6J5Lic5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771572055&amp;x-signature=yFrT3cd4s1hbBM49kyuSn2tROkE%3D" alt="å¢é‡æ°´åˆå°é¢å›¾" loading="lazy"/></p>
<p>Angular çš„å¢é‡æ°´åˆï¼ˆIncremental Hydrationï¼‰é€šè¿‡æŠŠâ€œå¯è§â€ä¸â€œå¯äº¤äº’â€çš„æˆæœ¬æ‹†å¼€ï¼šé¡µé¢ä»ç„¶ç”¨ SSR å¾ˆå¿«æ¸²æŸ“å‡ºå®Œæ•´ HTMLï¼ˆæœ‰åˆ©äº LCP/SEOï¼‰ï¼Œä½†æŠŠæŸäº›åŒºåŸŸçš„å®¢æˆ·ç«¯æ¿€æ´»ï¼ˆäº‹ä»¶ç»‘å®šã€å˜æ›´æ£€æµ‹ç­‰ï¼‰æ¨è¿Ÿåˆ°ã€Œç©ºé—² / è¿›å…¥è§†å£ / äº¤äº’ / å®šæ—¶ã€ç­‰è§¦å‘æ—¶æœºï¼Œä»è€Œå‡å°‘ä¸»çº¿ç¨‹é˜»å¡ï¼ˆTBTï¼‰å¹¶è®©é¦–å±æ›´â€œé¡ºæ»‘â€ã€‚</p>
<h2 data-id="heading-0">ç›®å½•</h2>
<ul>
<li>
<ol>
<li>æ€§èƒ½æ‚–è®ºï¼šçœ‹èµ·æ¥å¥½äº†ï¼Œä½†è¿˜ä¸èƒ½ç”¨</li>
</ol>
</li>
<li>
<ol start="2">
<li>æ¼”è¿›ä¸æœ¯è¯­ï¼šä»â€œç ´åå¼â€åˆ°â€œéç ´åå¼â€å†åˆ°â€œå¢é‡â€</li>
</ol>
</li>
<li>
<ol start="3">
<li>æ·±å…¥ï¼š<code>@defer</code> çš„åŠ è½½ä¸æ°´åˆåŒè§¦å‘</li>
</ol>
</li>
<li>
<ol start="4">
<li>å®ç°ä¸é…ç½®ï¼šå¼€å¯å¢é‡æ°´åˆä¸äº‹ä»¶å›æ”¾</li>
</ol>
</li>
<li>
<ol start="5">
<li>æ¶æ„ï¼šåµŒå¥—å—ã€å±‚çº§è§„åˆ™ä¸ HTML çº¦æŸ</li>
</ol>
</li>
<li>
<ol start="6">
<li>æ’é”™ä¸è°ƒè¯•ï¼šæ°´åˆä¸åŒ¹é…ï¼ˆHydration Mismatchï¼‰</li>
</ol>
</li>
<li>å¸¸è§é—®é¢˜</li>
<li>æ€»ç»“ä¸è¡ŒåŠ¨æ¸…å•</li>
</ul>
<h2 data-id="heading-1">1. æ€§èƒ½æ‚–è®º</h2>
<p>ç°ä»£ Web åº”ç”¨ç»å¸¸é™·å…¥ä¸€ä¸ªæ‚–è®ºï¼š</p>
<ul>
<li>**ä¸šåŠ¡ä¸æŒ‡æ ‡ï¼ˆCore Web Vitalsï¼‰**å¸Œæœ›å°½å¿«çœ‹åˆ°å†…å®¹ï¼šé€šè¿‡ SSR æ”¹å–„ LCPï¼ˆLargest Contentful Paintï¼‰ã€‚</li>
<li><strong>ç”¨æˆ·ä½“éªŒ</strong>å¸Œæœ›åƒ SPA ä¸€æ ·é¡ºæ»‘å¯äº¤äº’ï¼šäº‹ä»¶ç»‘å®šã€å˜æ›´æ£€æµ‹ã€è·¯ç”±ä¸å„ç§ç»„ä»¶é€»è¾‘éƒ½è¦è·‘èµ·æ¥ã€‚</li>
</ul>
<p>é—®é¢˜åœ¨äºï¼š<strong>â€œçœ‹èµ·æ¥ readyâ€ä¸â€œç”¨èµ·æ¥ readyâ€ä¹‹é—´å­˜åœ¨æ—¶é—´å·®</strong>ã€‚</p>
<p>åœ¨ä¼ ç»Ÿæ°´åˆï¼ˆhydrationï¼‰é‡Œï¼Œæµè§ˆå™¨éœ€è¦åœ¨ä¸»çº¿ç¨‹ä¸Šå¯åŠ¨æ¡†æ¶ã€éå† DOMã€æŒ‚è½½ç›‘å¬å™¨ç­‰ã€‚ç”¨æˆ·çœ‹åˆ°é¡µé¢å·²ç»â€œå®Œæ•´â€ï¼Œä½†ç‚¹å‡»æŒ‰é’®æ²¡æœ‰ååº”ã€èœå•å¡ä½â€”â€”è¿™æ®µæ—¶é—´å°±åƒæ€§èƒ½çš„â€œææ€–è°·â€ï¼Œé€šå¸¸å‘ç”Ÿåœ¨ LCPï¼ˆå†…å®¹å·²ç»˜åˆ¶ï¼‰åˆ° TTIï¼ˆTime to Interactiveï¼‰ä¹‹é—´ã€‚</p>
<p>Angular çš„å¢é‡æ°´åˆæŠŠåº”ç”¨è§†ä¸ºä¸€ç»„ç›¸å¯¹ç‹¬ç«‹çš„â€œå²›å±¿â€ï¼šä¸æ˜¯å¯åŠ¨æ—¶æŠŠæ•´æ£µç»„ä»¶æ ‘ä¸€æ¬¡æ€§æ¿€æ´»ï¼Œè€Œæ˜¯è®©æŸäº›éƒ¨åˆ†<strong>åœ¨åˆé€‚çš„æ—¶æœºå†é†’æ¥</strong>ã€‚æ”¶ç›Šé€šå¸¸ä½“ç°åœ¨æ›´ä½çš„ TBTï¼ˆTotal Blocking Timeï¼‰ä¸æ›´å¿«çš„â€œä½“æ„Ÿå¯ç”¨â€ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/91b3e5a5fb6a40108be86fe3fe7ff2fa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR5a6J5Lic5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771572055&amp;x-signature=pO7mflhxvSafoPzq82XRFn3bB4Y%3D" alt="æ ‡å‡†æ°´åˆ vs å¢é‡æ°´åˆ" loading="lazy"/></p>
<h2 data-id="heading-2">2. æ¼”è¿›ä¸æœ¯è¯­</h2>
<p>ç†è§£ Angular çš„æ°´åˆè¯­æ³•ä¹‹å‰ï¼Œå…ˆæŠŠâ€œhydrationâ€åœ¨ä¸åŒé˜¶æ®µçš„å«ä¹‰ç†æ¸…ï¼š</p>
<h3 data-id="heading-3">2.1 ç ´åå¼æ°´åˆï¼ˆæ—©æœŸ/é—ç•™ï¼‰</h3>
<p>åœ¨ä¸€äº›æ—§æ–¹æ¡ˆé‡Œï¼Œâ€œæ°´åˆâ€æ›´åƒæ˜¯è¯¯ç”¨ï¼š</p>
<ol>
<li>æœåŠ¡ç«¯è¿”å› HTMLã€‚</li>
<li>æµè§ˆå™¨å…ˆæŠŠå®ƒç”»å‡ºæ¥ã€‚</li>
<li>å®¢æˆ·ç«¯æ¡†æ¶<strong>ä¸¢å¼ƒè¿™ä»½ DOM</strong>ï¼Œå†ç”¨ JS ä»å¤´é‡å»ºã€‚</li>
</ol>
<p>è¿™ä¼šå¯¼è‡´é—ªçƒï¼ˆflickerï¼‰ä¸å¤§é‡è®¡ç®—å¼€é”€ã€‚</p>
<h3 data-id="heading-4">2.2 éç ´åå¼æ°´åˆï¼ˆAngular 16+ï¼‰</h3>
<p>Angular 16 å¼•å…¥éç ´åå¼æ°´åˆï¼š</p>
<ul>
<li>å¯åŠ¨åéå†å·²æœ‰çš„ SSR DOMï¼›</li>
<li>å°† DOM èŠ‚ç‚¹ä¸ç»„ä»¶æ ‘åŒ¹é…ï¼›</li>
<li>åœ¨å¤ç”¨ DOM çš„å‰æä¸‹æŒ‚è½½äº‹ä»¶ç›‘å¬ã€‚</li>
</ul>
<p>è¿™æ˜¯å·¨å¤§è¿›æ­¥ï¼Œä½†ä»æ˜¯â€œä¸€åˆ€åˆ‡â€ï¼šå¯åŠ¨æ—¶ä»è¦æŠŠæ•´æ£µæ ‘éƒ½æ°´åˆã€‚</p>
<h3 data-id="heading-5">2.3 å¢é‡æ°´åˆï¼ˆIncremental Hydrationï¼‰</h3>
<p>å¢é‡æ°´åˆå»ºç«‹åœ¨éç ´åå¼æ°´åˆä¹‹ä¸Šï¼Œä½†è¿›ä¸€æ­¥æä¾›â€œç²’åº¦â€ã€‚å®ƒåŸºäº <code>@defer</code> å—ä½œä¸ºè¾¹ç•Œï¼šå¯ä»¥è®©æŸäº›ç»„ä»¶å­æ ‘å…ˆä»¥é™æ€ HTMLï¼ˆdehydratedï¼‰å‘ˆç°ï¼Œç­‰è§¦å‘æ¡ä»¶æ»¡è¶³æ—¶å†æ‰§è¡Œå®¢æˆ·ç«¯é€»è¾‘å¹¶æŒ‚è½½ç›‘å¬ã€‚</p>
<p>å®ƒä¸â€œæ‡’åŠ è½½ï¼ˆlazy loadingï¼‰â€çš„å…³é”®å·®å¼‚æ˜¯ï¼š</p>
<ul>
<li><strong>æ‡’åŠ è½½ï¼ˆå¸¸è§äº CSRï¼‰</strong>ï¼šä»£ç æ™šç‚¹åŠ è½½ï¼ŒDOM å¾€å¾€ä¹Ÿæ˜¯æ™šç‚¹æ¸²æŸ“ï¼ˆå¯èƒ½å…ˆæ˜¾ç¤ºéª¨æ¶/å ä½ï¼‰ã€‚</li>
<li><strong>å¢é‡æ°´åˆï¼ˆSSRï¼‰</strong>ï¼šå†…å®¹å…ˆç”±æœåŠ¡ç«¯æ¸²æŸ“å‡ºæ¥ï¼Œç”¨æˆ·ç«‹åˆ»èƒ½çœ‹åˆ°ï¼›åªæ˜¯å…ˆä¸æ¿€æ´»äº¤äº’ï¼Œç­‰è§¦å‘å†æ°´åˆã€‚</li>
</ul>
<p>å› æ­¤å®ƒæ›´åƒæ˜¯åœ¨â€œä¿æŒè§†è§‰å®Œæ•´â€çš„å‰æä¸‹ï¼Œä¼˜åŒ–ä¸»çº¿ç¨‹æ‰§è¡Œæˆæœ¬ã€‚</p>
<h2 data-id="heading-6">3. æ·±å…¥ï¼š<code>@defer</code> çš„åŠ è½½ä¸æ°´åˆåŒè§¦å‘</h2>
<p>åœ¨å¢é‡æ°´åˆè¯­å¢ƒé‡Œï¼Œä¸€ä¸ª <code>@defer</code> å—å®é™…æ§åˆ¶ä¸¤ä»¶äº‹ï¼š</p>
<ol>
<li>**Loadingï¼š**ä»€ä¹ˆæ—¶å€™å»æ‹‰å–å¯¹åº”çš„ JS chunkã€‚</li>
<li>**Hydratingï¼š**ä»€ä¹ˆæ—¶å€™æ‰§è¡Œé€»è¾‘ã€æŠŠç›‘å¬å™¨æŒ‚åˆ°å·²å­˜åœ¨çš„ HTML ä¸Šã€‚</li>
</ol>
<p>è¿™æ„å‘³ç€ä½ å¯ä»¥åšå‡ºæ›´â€œç²¾ç»†â€çš„æ€§èƒ½ç”»åƒï¼šå…ˆæŠŠä»£ç æ‚„æ‚„æ‹‰ä¸‹æ¥ï¼Œä½†æŠŠæ¿€æ´»æ¨è¿Ÿåˆ°çœŸæ­£éœ€è¦çš„æ—¶å€™ã€‚</p>
<h3 data-id="heading-7">3.1 åŒè§¦å‘ç¤ºä¾‹</h3>
<pre><code class="hljs language-javascript" lang="javascript">@defer (on idle; hydrate on interaction) {
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">app-heavy-chart</span> /&gt;</span></span>
}
</code></pre>
<ul>
<li>**é¦–å±ï¼ˆSSRï¼‰ï¼š**æœåŠ¡ç«¯ä¼šæ¸²æŸ“ <code>&lt;app-heavy-chart /&gt;</code>ï¼Œç”¨æˆ·ç«‹åˆ»çœ‹åˆ°å†…å®¹ã€‚</li>
<li><code>on idle</code>ï¼šæµè§ˆå™¨ç©ºé—²æ—¶åœ¨åå°æ‹‰å–å›¾è¡¨çš„ JSã€‚</li>
<li><code>hydrate on interaction</code>ï¼šå…ˆä¸æ‰§è¡Œå›¾è¡¨é€»è¾‘ï¼Œè®©å®ƒä¿æŒâ€œé™æ€å£³â€ï¼›ä¸»çº¿ç¨‹ä¿æŒè½»ã€‚</li>
<li>**å½“ç”¨æˆ·äº¤äº’ï¼ˆç‚¹å‡»/è§¦æ‘¸/é”®ç›˜ç­‰ï¼‰ï¼š**è§¦å‘æ°´åˆï¼Œç»„ä»¶â€œé†’æ¥â€ã€‚</li>
<li><strong>å¦‚æœæ˜¯ CSR è·¯ç”±è¿›å…¥ï¼ˆæ²¡æœ‰ SSRï¼‰ï¼š</strong><code>on idle</code> ä¼šå½±å“è¯¥å—ä»€ä¹ˆæ—¶å€™çœŸæ­£æ¸²æŸ“ã€‚</li>
</ul>
<h3 data-id="heading-8">3.2 å¸¸è§æ°´åˆè§¦å‘æ–¹å¼</h3>
<p>ä¸‹é¢è¿™äº›æ˜¯æ›´åâ€œæ°´åˆæ—¶æœºâ€çš„è§¦å‘ç±»å‹ï¼ˆä¸åŒç‰ˆæœ¬/æ–‡æ¡£é‡Œè¡¨è¿°ç•¥æœ‰å·®å¼‚ï¼Œæ ¸å¿ƒæ€æƒ³ä¸€è‡´ï¼‰ï¼š</p>
<ol>
<li>
<p><strong><code>hydrate on idle</code>ï¼ˆé»˜è®¤å‹ä¼˜åŒ–ï¼‰</strong></p>
<ul>
<li>è¡Œä¸ºï¼šåœ¨æµè§ˆå™¨ç©ºé—²æ—¶æ°´åˆï¼ˆæ¦‚å¿µä¸Šç±»ä¼¼ <code>requestIdleCallback</code> çš„æ—¶æœºï¼‰ã€‚</li>
<li>é€‚åˆï¼šå¤§å¤šæ•°éå…³é”®åŒºåŸŸã€‚</li>
</ul>
</li>
<li>
<p><strong><code>hydrate on viewport</code>ï¼ˆé¦–é€‰çš„â€œå±å¤–å†…å®¹â€ç­–ç•¥ï¼‰</strong></p>
<ul>
<li>è¡Œä¸ºï¼šè¿›å…¥è§†å£æ‰æ°´åˆï¼ˆåŸºäº <code>IntersectionObserver</code>ï¼‰ã€‚</li>
<li>é€‚åˆï¼šé•¿åˆ—è¡¨ã€è¯„è®ºåŒºã€é¡µè„šç­‰ã€‚</li>
</ul>
</li>
<li>
<p><strong><code>hydrate on interaction</code>ï¼ˆé‡ç»„ä»¶â€œæŒ‰éœ€å¯åŠ¨â€ï¼‰</strong></p>
<ul>
<li>è¡Œä¸ºï¼šç‚¹å‡»/è§¦æ‘¸/é”®ç›˜ç­‰äº¤äº’è§¦å‘ã€‚</li>
<li>é€‚åˆï¼šåœ°å›¾ã€å¤æ‚æ—¥æœŸé€‰æ‹©å™¨ç­‰â€œçœ‹å¾—è§ä½†ä¸ä¸€å®šä¼šç”¨â€çš„éƒ¨ä»¶ã€‚</li>
</ul>
</li>
<li>
<p><strong><code>hydrate on hover</code>ï¼ˆæå‰ä¸€ç‚¹ç‚¹ï¼‰</strong></p>
<ul>
<li>è¡Œä¸ºï¼šé¼ æ ‡æ‚¬åœ / focus è§¦å‘ã€‚</li>
<li>é€‚åˆï¼šä¸‹æ‹‰èœå•ç­‰ï¼Œé¼ æ ‡é è¿‘æ—¶æå‰å‡†å¤‡ã€‚</li>
</ul>
</li>
<li>
<p><strong><code>hydrate on timer (X)</code>ï¼ˆæŒ‰æ—¶é—´æ’é˜Ÿï¼‰</strong></p>
<ul>
<li>è¡Œä¸ºï¼šå»¶è¿Ÿ X æ¯«ç§’åæ°´åˆã€‚</li>
<li>é€‚åˆï¼šä½ æƒ³æ˜ç¡®å®‰æ’å¯åŠ¨é¡ºåºï¼Œæ¯”å¦‚ä¾§è¾¹æ  500msã€å¹¿å‘Š 2000msã€‚</li>
</ul>
</li>
<li>
<p><strong><code>hydrate on immediate</code>ï¼ˆå…³é”®äº¤äº’ï¼‰</strong></p>
<ul>
<li>è¡Œä¸ºï¼šåœ¨éå»¶è¿Ÿå†…å®¹æ¸²æŸ“å®Œä¹‹åå°½å¿«æ°´åˆã€‚</li>
<li>é€‚åˆï¼šé¦–å±å¿…é¡»é©¬ä¸Šå¯ç‚¹çš„å…³é”®æŒ‰é’®ã€‚</li>
</ul>
</li>
</ol>
<pre><code class="hljs language-javascript" lang="javascript">@defer (hydrate on immediate) {
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">hero-cta-button</span> /&gt;</span></span>
} @placeholder {
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Loading...<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
}
</code></pre>
<ol start="7">
<li>
<p><strong><code>hydrate when &lt;condition&gt;</code>ï¼ˆæ¡ä»¶é—¨æ§ï¼‰</strong></p>
<ul>
<li>è¡Œä¸ºï¼šå½“æŸä¸ªä¿¡å·æˆ–å¸ƒå°”æ¡ä»¶å˜ä¸ºçœŸæ—¶æ°´åˆã€‚</li>
<li>é€‚åˆï¼šä¾‹å¦‚ã€Œåªæœ‰ç®¡ç†å‘˜æ‰éœ€è¦çš„ä»ªè¡¨ç›˜ç»„ä»¶ã€ã€‚</li>
<li>æ³¨æ„ï¼šæ¡ä»¶é€šå¸¸åªèƒ½åœ¨<strong>æœ€å¤–å±‚</strong>å°šæœªæ°´åˆçš„ <code>@defer</code> ä¸Šå¯é è¯„ä¼°ï¼›çˆ¶å—è¿˜æ²¡æ°´åˆæ—¶ï¼Œå­å—æ¡ä»¶ä¹Ÿæ— æ³•è¢«è®¡ç®—ã€‚</li>
</ul>
</li>
<li>
<p><strong><code>hydrate never</code>ï¼ˆçº¯é™æ€å—ï¼‰</strong></p>
<ul>
<li>è¡Œä¸ºï¼šæœåŠ¡ç«¯æ¸²æŸ“åæ°¸ä¸æ°´åˆã€‚</li>
<li>é€‚åˆï¼šå®Œå…¨æ²¡æœ‰äº¤äº’éœ€æ±‚çš„å†…å®¹ï¼ˆæ¡æ¬¾ã€é™æ€ä»‹ç»ç­‰ï¼‰ã€‚</li>
</ul>
</li>
</ol>
<h2 data-id="heading-9">4. å®ç°ä¸é…ç½®ï¼šå¼€å¯å¢é‡æ°´åˆä¸äº‹ä»¶å›æ”¾</h2>
<p>å¼€å¯å¢é‡æ°´åˆé€šå¸¸åªæ˜¯ä¸€å¤„é…ç½®ï¼Œä½†çœŸæ­£çš„å…³é”®ç‚¹åœ¨äºï¼š<strong>äº¤äº’è§¦å‘çš„é‚£ä¸€ä¸‹ä¸èƒ½ä¸¢</strong>ã€‚</p>
<h3 data-id="heading-10">4.1 åŸºæœ¬é…ç½®</h3>
<p>åœ¨ <code>app.config.ts</code> ä¸­å¯ç”¨å®¢æˆ·ç«¯æ°´åˆï¼Œå¹¶å¼€å¯å¢é‡èƒ½åŠ›ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">ApplicationConfig</span>, provideZoneChangeDetection } <span class="hljs-keyword">from</span> <span class="hljs-string">"@angular/core"</span>;
<span class="hljs-keyword">import</span> {
  provideClientHydration,
  withIncrementalHydration,
} <span class="hljs-keyword">from</span> <span class="hljs-string">"@angular/platform-browser"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-attr">appConfig</span>: <span class="hljs-title class_">ApplicationConfig</span> = {
  <span class="hljs-attr">providers</span>: [
    <span class="hljs-title function_">provideZoneChangeDetection</span>({ <span class="hljs-attr">eventCoalescing</span>: <span class="hljs-literal">true</span> }),
    <span class="hljs-title function_">provideClientHydration</span>(<span class="hljs-title function_">withIncrementalHydration</span>()),
  ],
};
</code></pre>
<h3 data-id="heading-11">4.2 è‡ªåŠ¨äº‹ä»¶å›æ”¾ï¼ˆEvent Replayï¼‰</h3>
<p>å¾ˆå¤šäººç¬¬ä¸€ååº”æ˜¯ï¼š</p>
<blockquote>
<p>å¦‚æœæˆ‘ç”¨äº† <code>hydrate on interaction</code>ï¼Œé‚£ç”¨æˆ·ç¬¬ä¸€æ¬¡ç‚¹å‡»æ˜¯ä¸æ˜¯ä¼šè¢«åæ‰ï¼Ÿ</p>
</blockquote>
<p>Angular çš„æ€è·¯æ˜¯ï¼šåœ¨çœŸæ­£æ¡†æ¶é€»è¾‘è¿˜æ²¡èµ·æ¥æ—¶ï¼Œå…ˆç”¨ä¸€æ®µè½»é‡è„šæœ¬æ•è·äº‹ä»¶ï¼ŒæŠŠå®ƒä»¬ç¼“å†²èµ·æ¥ï¼Œç­‰å¯¹åº”å—æ°´åˆå®Œæˆåå†â€œå›æ”¾â€ã€‚åœ¨å¯ç”¨ <code>withIncrementalHydration()</code> æ—¶ï¼Œè¿™ç±»äº‹ä»¶å›æ”¾èƒ½åŠ›é€šå¸¸ä¼šä¸€å¹¶å¯ç”¨ï¼ˆæ–‡æ¡£ä¸­ä¹Ÿå¸¸æåˆ° <code>withEventReplay()</code>ï¼‰ã€‚</p>
<p>äº‹ä»¶å›æ”¾å¤§è‡´æµç¨‹ï¼š</p>
<ol>
<li>**æ•è·ï¼š**åœ¨æ–‡æ¡£æ ¹éƒ¨æ³¨å†Œå…¨å±€äº‹ä»¶åˆ†å‘å™¨ã€‚</li>
<li>**ç¼“å†²ï¼š**å¦‚æœäº‹ä»¶å‘ç”Ÿåœ¨å°šæœªæ°´åˆçš„ <code>@defer</code> åŒºåŸŸå†…ï¼Œå°±å…ˆæš‚å­˜ã€‚</li>
<li>**è§¦å‘æ°´åˆï¼š**äº‹ä»¶æœ¬èº«è§¦å‘ <code>hydrate on interaction</code>ã€‚</li>
<li>**å›æ”¾ï¼š**ä»£ç åŠ è½½ + æ°´åˆå®Œæˆåï¼ŒæŠŠäº‹ä»¶äº¤ç»™æ–°æŒ‚è½½çš„ç›‘å¬å™¨æ‰§è¡Œã€‚</li>
</ol>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/863bcdd688774d7e915d2a34e31abbcf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR5a6J5Lic5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771572055&amp;x-signature=A%2BInrjdQgbqdABRfWw%2F7DOBzFI8%3D" alt="Angular æ°´åˆä¸äº‹ä»¶å›æ”¾ç¤ºæ„" loading="lazy"/></p>
<h2 data-id="heading-12">5. æ¶æ„ï¼šåµŒå¥—å—ä¸çº¦æŸ</h2>
<p>å¢é‡æ°´åˆå¸¦æ¥æ”¶ç›Šï¼Œä¹Ÿå¸¦æ¥ä¸€äº›ä½ å¿…é¡»éµå®ˆçš„â€œæ¶æ„è§„åˆ™â€ã€‚å¿½ç•¥å®ƒä»¬ä¼šå¯¼è‡´é€€åŒ–ï¼ˆde-optï¼‰ï¼Œç”šè‡³å›è½åˆ°ç ´åå¼é‡æ¸²æŸ“ã€‚</p>
<h3 data-id="heading-13">5.1 å±‚çº§è§„åˆ™ï¼šè‡ªä¸Šè€Œä¸‹</h3>
<p>Angular æ°´åˆæ˜¯æœ‰å±‚çº§çš„ï¼š</p>
<ul>
<li><strong>çˆ¶çº§å¿…é¡»å…ˆæ°´åˆï¼ˆæˆ–åŒæ—¶æ°´åˆï¼‰</strong>ï¼Œå­çº§æ‰èƒ½å¯é æ°´åˆã€‚</li>
<li>å­ç»„ä»¶ä¾èµ–çˆ¶ç»„ä»¶çš„å˜æ›´æ£€æµ‹ä¸è¾“å…¥ç»‘å®šï¼›å¦‚æœçˆ¶çº§ä»æ˜¯â€œè„±æ°´â€çŠ¶æ€ï¼Œå­çº§å¾ˆéš¾ç‹¬ç«‹æ¿€æ´»ã€‚</li>
</ul>
<p>å®è·µå»ºè®®ï¼šæŠŠ <code>@defer</code> å—è®¾è®¡å¾—æ›´â€œè‡ªåŒ…å«â€ï¼Œé¿å…å‡ºç°ç‚¹äº†å¶å­èŠ‚ç‚¹å´æŠŠæ•´æ£µæ ‘éƒ½è¿é”å”¤é†’çš„â€œç€‘å¸ƒæ•ˆåº”â€ã€‚</p>
<h3 data-id="heading-14">5.2 HTML ç»“æ„å¿…é¡»æœ‰æ•ˆä¸”ä¸€è‡´</h3>
<p>éç ´åå¼æ°´åˆä¾èµ–â€œå¤ç”¨ DOMâ€ï¼šæœåŠ¡ç«¯è¾“å‡ºçš„ DOM ç»“æ„éœ€è¦ä¸æµè§ˆå™¨æœ€ç»ˆ DOMã€ä»¥åŠå®¢æˆ·ç«¯æœŸæœ›ç»“æ„ä¸¥æ ¼ä¸€è‡´ã€‚</p>
<p>å¸¸è§å‘ï¼š</p>
<ul>
<li><code>&lt;a&gt;</code> åµŒå¥— <code>&lt;a&gt;</code></li>
<li><code>&lt;p&gt;</code> é‡Œå¡äº† <code>&lt;div&gt;</code> è¿™ç±»å—çº§å…ƒç´ </li>
<li><code>&lt;table&gt;</code> ç¼º <code>&lt;tbody&gt;</code></li>
<li>ç”±äºæ— æ•ˆ HTML å¯¼è‡´æµè§ˆå™¨è‡ªåŠ¨ä¿®å¤ã€ä»è€Œæ”¹å˜äº† DOM</li>
</ul>
<p>è¿™äº›éƒ½ä¼šå¯¼è‡´æ°´åˆå¤ç”¨å¤±è´¥ï¼Œè¿›è€Œè§¦å‘é‡å»ºã€‚</p>
<h3 data-id="heading-15">5.3 SEO å½±å“ï¼Ÿé€šå¸¸ä¸ä¼š</h3>
<p>æœ‰äººæ‹…å¿ƒ <code>@defer</code> ä¼šä¼¤å®³ SEOã€‚å¢é‡æ°´åˆçš„å‰ææ˜¯ SSRï¼šä¸»å†…å®¹åœ¨æœåŠ¡ç«¯æ¨¡æ¿é‡Œå·²ç»è¾“å‡ºæˆè¯­ä¹‰åŒ– HTMLï¼Œæœç´¢å¼•æ“æ‹¿åˆ°çš„å°±æ˜¯å®Œæ•´å†…å®¹ã€‚</p>
<p>æ°´åˆè§¦å‘æ§åˆ¶çš„æ˜¯â€œä»€ä¹ˆæ—¶å€™æ‰§è¡Œ JS è®©å®ƒå¯äº¤äº’â€ï¼Œä¸æ˜¯â€œå†…å®¹ä»€ä¹ˆæ—¶å€™å‡ºç°â€ã€‚</p>
<h3 data-id="heading-16">5.4 <code>@placeholder</code> ä»ç„¶éœ€è¦</h3>
<p>å³ä½¿ SSR ä¼šæŠŠçœŸå®å†…å®¹æ¸²æŸ“å‡ºæ¥ï¼Œ<code>@placeholder</code> ä»ç„¶å¾ˆé‡è¦â€”â€”ä¸»è¦ç”¨äº <strong>CSR è·¯ç”±å¯¼èˆª</strong> çš„åœºæ™¯ã€‚</p>
<p>å½“ç”¨æˆ·é€šè¿‡ <code>routerLink</code> åœ¨å®¢æˆ·ç«¯å¯¼èˆªè¿›å…¥æŸé¡µæ—¶ï¼Œè¯¥é¡µçš„ <code>@defer</code> æ›´åƒå¸¸è§„å»¶è¿Ÿå—ï¼š</p>
<ul>
<li>ä¼šå…ˆæ˜¾ç¤º <code>@placeholder</code></li>
<li>ç„¶åæ ¹æ®è§¦å‘æ¡ä»¶åŠ è½½å¹¶æ¸²æŸ“çœŸå®å†…å®¹</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript">@defer (on viewport; hydrate on interaction) {
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">comments-section</span> /&gt;</span></span>
} @placeholder {
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"comments-skeleton"</span>&gt;</span>Loading comments...<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
}
</code></pre>
<p>å»ºè®®ï¼šç»™å ä½æä¾›æ¥è¿‘çœŸå®å†…å®¹çš„å°ºå¯¸ï¼Œå‡å°‘ CSR ä¸‹çš„å¸ƒå±€æŠ–åŠ¨ï¼ˆCLSï¼‰ã€‚</p>
<h2 data-id="heading-17">6. æ’é”™ä¸è°ƒè¯•ï¼šHydration Mismatch</h2>
<p>æœ€å¸¸è§çš„é—®é¢˜æ˜¯ <strong>Hydration Mismatchï¼ˆæ°´åˆä¸åŒ¹é…ï¼‰</strong>ï¼š</p>
<blockquote>
<p>æœåŠ¡ç«¯ç”Ÿæˆçš„ HTML ä¸å®¢æˆ·ç«¯æœŸæœ›çš„ DOM ä¸ä¸€è‡´ã€‚</p>
</blockquote>
<p>æœ¬è´¨åŸå› æ˜¯ï¼šå®¢æˆ·ç«¯åœ¨æ°´åˆæ—¶è¦æ±‚â€œå¯å¤ç”¨çš„ DOMâ€å¿…é¡»åŒ¹é…é¢„æœŸï¼›å“ªæ€•æ˜¯ä¸€ä¸ªæ–‡æœ¬èŠ‚ç‚¹å·®å¼‚ï¼Œéƒ½ä¼šå‡ºé—®é¢˜ã€‚</p>
<h3 data-id="heading-18">6.1 å¸¸è§åŸå› </h3>
<ol>
<li>**åŠ¨æ€æ—¥æœŸï¼š**æ¨¡æ¿é‡Œç›´æ¥ <code>new Date()</code>ï¼ŒæœåŠ¡ç«¯ä¸å®¢æˆ·ç«¯æ—¶é—´ä¸åŒã€‚</li>
<li>**éšæœº IDï¼š**ç”¨ <code>Math.random()</code> ä¹‹ç±»ç”Ÿæˆéšæœºå€¼ã€‚</li>
<li>**æµè§ˆå™¨è§„èŒƒåŒ–ï¼š**æ— æ•ˆ HTML è¢«æµè§ˆå™¨ä¿®å¤åç»“æ„å˜äº†ã€‚</li>
</ol>
<h3 data-id="heading-19">6.2 è°ƒè¯•æ‰‹æ®µ</h3>
<ul>
<li>**æ§åˆ¶å°æ—¥å¿—ï¼š**Angular é€šå¸¸ä¼šæç¤ºå…·ä½“ä¸åŒ¹é…çš„èŠ‚ç‚¹ã€‚</li>
<li>**Angular DevToolsï¼š**å¯ä»¥æŸ¥çœ‹ç»„ä»¶æ ‘ï¼›åœ¨è¾ƒæ–°ç‰ˆæœ¬é‡Œä¹Ÿèƒ½çœ‹åˆ°ç»„ä»¶çš„æ°´åˆçŠ¶æ€ï¼ˆHydrated / Skipped / Dehydratedï¼‰ã€‚</li>
<li>**å¯è§†åŒ–æ ‡è®°ï¼š**ä¸´æ—¶ç”¨ CSSï¼ˆå¦‚ <code>.ng-hydrating</code>ï¼‰ç»™â€œé†’æ¥â€çš„ç»„ä»¶åŠ é«˜äº®ï¼Œè§‚å¯Ÿæ—¶åºã€‚</li>
</ul>
<h2 data-id="heading-20">å¸¸è§é—®é¢˜</h2>
<h3 data-id="heading-21">å¢é‡æ°´åˆè§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿ</h3>
<p>å®ƒå‡å°‘äº† SSR åº”ç”¨é‡Œâ€œå†…å®¹å·²å‡ºç°ä½†è¿˜ä¸èƒ½äº¤äº’â€çš„é—´éš™ï¼Œé€šè¿‡å»¶è¿Ÿ/åˆ†æ‰¹æ¿€æ´»äº¤äº’é€»è¾‘é™ä½å¯åŠ¨æœŸä¸»çº¿ç¨‹å‹åŠ›ã€‚</p>
<h3 data-id="heading-22">å®ƒå’Œæ ‡å‡†æ°´åˆæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h3>
<p>æ ‡å‡†æ°´åˆå€¾å‘äºå¯åŠ¨æ—¶æ¿€æ´»æ•´æ£µç»„ä»¶æ ‘ï¼›å¢é‡æ°´åˆæ ¹æ®è§¦å‘æ¡ä»¶åªæ¿€æ´»éœ€è¦çš„éƒ¨åˆ†ã€‚</p>
<h3 data-id="heading-23">å®ƒç­‰åŒäºæ‡’åŠ è½½å—ï¼Ÿ</h3>
<p>ä¸ç­‰åŒã€‚æ‡’åŠ è½½å¾€å¾€ä¼šæ¨è¿Ÿæ¸²æŸ“ï¼›å¢é‡æ°´åˆå¼ºè°ƒ SSR å…ˆæ¸²æŸ“å‡ºå†…å®¹ï¼Œå†æ¨è¿Ÿäº¤äº’æ¿€æ´»ã€‚</p>
<h3 data-id="heading-24">ä¼šå½±å“ SEO å—ï¼Ÿ</h3>
<p>é€šå¸¸ä¸ä¼šã€‚SSR å·²è¾“å‡ºå®Œæ•´å†…å®¹ï¼Œè§¦å‘æ§åˆ¶çš„æ˜¯ JS æ‰§è¡Œæ—¶æœºã€‚</p>
<h3 data-id="heading-25"><code>@defer</code> çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ</h3>
<p>å®ƒå®šä¹‰æ°´åˆè¾¹ç•Œï¼Œå¹¶æ§åˆ¶â€œä»€ä¹ˆæ—¶å€™åŠ è½½ä»£ç  / ä»€ä¹ˆæ—¶å€™æ¿€æ´»äº¤äº’â€ã€‚</p>
<h2 data-id="heading-26">æ€»ç»“ä¸è¡ŒåŠ¨æ¸…å•</h2>
<p>å¢é‡æ°´åˆçš„æ ¸å¿ƒå¾ˆç®€å•ï¼š</p>
<ul>
<li><strong>æœåŠ¡ç«¯æŠŠå†…å®¹éƒ½æ¸²æŸ“å‡ºæ¥</strong>ï¼ˆç”¨æˆ·ç«‹åˆ»çœ‹åˆ°ã€SEO å‹å¥½ï¼‰</li>
<li><strong>å®¢æˆ·ç«¯åªåœ¨éœ€è¦æ—¶æ‰æ°´åˆ</strong>ï¼ˆä¸»çº¿ç¨‹æ›´æ¸…çˆ½ã€ä½“æ„Ÿæ›´å¿«ï¼‰</li>
</ul>
<p>ä½ å¯ä»¥ä»è¿™ä»½è¡ŒåŠ¨æ¸…å•å¼€å§‹ï¼š</p>
<ol>
<li>**åšä¸€æ¬¡é¡µé¢ç›˜ç‚¹ï¼š**å“ªäº›åœ¨é¦–å±ï¼Ÿå“ªäº›åœ¨é¦–å±ä¸‹æ–¹ï¼Ÿå“ªäº›å¿…é¡»ç«‹å³å¯ç‚¹ï¼Ÿ</li>
<li><strong>ä¸ºä¸åŒåŒºåŸŸé€‰æ‹©è§¦å‘ï¼š</strong>
<ul>
<li>Hero + CTAï¼š<code>hydrate on immediate</code></li>
<li>è¯„è®ºåŒº/é•¿åˆ—è¡¨ï¼š<code>hydrate on viewport</code></li>
<li>é‡å‹ä½†ä¸ä¸€å®šä¼šç”¨çš„ç»„ä»¶ï¼š<code>hydrate on interaction</code></li>
<li>çº¯é™æ€å—ï¼š<code>hydrate never</code></li>
</ul>
</li>
<li>**CSR åœºæ™¯åˆ«å¿˜ <code>@placeholder</code>ï¼š**å ä½å°½é‡ç¨³å®šå°ºå¯¸ï¼Œé¿å… CLSã€‚</li>
<li>**åœ¨çœŸå®è®¾å¤‡ä¸ŠéªŒè¯ï¼š**ç”¨ DevTools è§‚å¯Ÿæ°´åˆçŠ¶æ€ä¸äº‹ä»¶å›æ”¾æ˜¯å¦ç¬¦åˆé¢„æœŸã€‚</li>
</ol>
<p>ä¸€å¥è¯ç»“è®ºï¼šä¸è¦åœ¨å¯åŠ¨æ—¶æŠŠæ‰€æœ‰ä¸œè¥¿ä¸€æ¬¡æ€§â€œå”¤é†’â€ã€‚è®©ç»„ä»¶åœ¨ç”¨æˆ·éœ€è¦æ—¶å†å¯åŠ¨ï¼Œä½ ä¼šå¾—åˆ°æ›´å¿«ã€æ›´ç¨³ã€æ›´é¡ºæ»‘çš„ Angular SSR ä½“éªŒã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€LangChain.jså­¦ä¹ ã€‘å¤§æ¨¡å‹åˆ†ç±»]]></title>    <link>https://juejin.cn/post/7605859660612517922</link>    <guid>https://juejin.cn/post/7605859660612517922</guid>    <pubDate>2026-02-13T07:40:06.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605859660612517922" data-draft-id="7605859660612501538" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€LangChain.jså­¦ä¹ ã€‘å¤§æ¨¡å‹åˆ†ç±»"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-02-13T07:40:06.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æ³¥ç§è·èŠ±"/> <meta itemprop="url" content="https://juejin.cn/user/4212984289442030"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€LangChain.jså­¦ä¹ ã€‘å¤§æ¨¡å‹åˆ†ç±»
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4212984289442030/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æ³¥ç§è·èŠ±
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-13T07:40:06.000Z" title="Fri Feb 13 2026 07:40:06 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:14px;overflow-x:hidden;color:var(--cyanosis-base-color);transition:color .35s;--cyanosis-base-color:#353535;--cyanosis-title-color:#005bb7;--cyanosis-strong-color:#2196f3;--cyanosis-em-color:#4fc3f7;--cyanosis-del-color:#ccc;--cyanosis-link-color:#3da8f5;--cyanosis-linkh-color:#007fff;--cyanosis-border-color:#bedcff;--cyanosis-border-color-2:#ececec;--cyanosis-bg-color:#fff;--cyanosis-blockquote-color:#8c8c8c;--cyanosis-blockquote-bg-color:#f0fdff;--cyanosis-code-color:#c2185b;--cyanosis-code-bg-color:#fff4f4;--cyanosis-code-pre-color:#f8f8f8;--cyanosis-table-border-color:#c3e0fd;--cyanosis-table-th-color:#dff0ff;--cyanosis-table-tht-color:#005bb7;--cyanosis-table-tr-nc-color:#f7fbff;--cyanosis-table-trh-color:#e0edf7;--cyanosis-slct-title-color:#005bb7;--cyanosis-slct-titlebg-color:rgba(175,207,247,0.25);--cyanosis-slct-text-color:#c80000;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#e8ebec;--cyanosis-slct-codebg-color:#ffeaeb;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body.__dark{--cyanosis-base-color:#cacaca;--cyanosis-title-color:#ddd;--cyanosis-strong-color:#fe9900;--cyanosis-em-color:#ffd28e;--cyanosis-del-color:#ccc;--cyanosis-link-color:#ffb648;--cyanosis-linkh-color:#fe9900;--cyanosis-border-color:#ffe3ba;--cyanosis-border-color-2:#ffcb7b;--cyanosis-bg-color:#2f2f2f;--cyanosis-blockquote-color:#c7c7c7;--cyanosis-blockquote-bg-color:rgba(255,199,116,0.1);--cyanosis-code-color:#000;--cyanosis-code-bg-color:#ffcb7b;--cyanosis-code-pre-color:rgba(255,227,185,0.5);--cyanosis-table-border-color:#fe9900;--cyanosis-table-th-color:#ffb648;--cyanosis-table-tht-color:#000;--cyanosis-table-tr-nc-color:#6d5736;--cyanosis-table-trh-color:#947443;--cyanosis-slct-title-color:#000;--cyanosis-slct-titlebg-color:#fe9900;--cyanosis-slct-text-color:#00c888;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#000;--cyanosis-slct-codebg-color:#ffcb7b;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body h1{padding-bottom:4px;font-size:30px}.markdown-body h1,.markdown-body h2{margin-top:36px;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);transition:color .35s}.markdown-body h2{position:relative;padding-left:10px;padding-right:10px;padding-bottom:10px;font-size:24px;border-bottom:1px solid var(--cyanosis-border-color-2)}.markdown-body h2:before{content:"ã€Œ";position:absolute;top:-6px;left:-14px}.markdown-body h2:after{content:"ã€";position:relative;top:6px;right:auto}.markdown-body h3{position:relative;padding-bottom:0;margin-top:30px;margin-bottom:10px;font-size:20px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h3:before{content:"Â»";padding-right:6px;color:var(--cyanosis-strong-color)}.markdown-body h4{margin-top:24px;font-size:16px}.markdown-body h4,.markdown-body h5{padding-bottom:0;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h5{margin-top:18px;font-size:14px}.markdown-body h6{padding-bottom:0;margin-top:12px;margin-bottom:10px;font-size:12px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body p{line-height:inherit;margin-top:16px;margin-bottom:16px}.markdown-body img{max-width:100%}.markdown-body hr{position:relative;width:98%;height:1px;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,var(--cyanosis-link-color),rgba(255,0,0,.3),hsla(0,0%,100%,.1),rgba(255,0,0,.3),var(--cyanosis-link-color));border-width:0;overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background-color:var(--cyanosis-bg-color);background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center;transition:background-color .5s}.markdown-body code{padding:.065em .4em;font-size:.87em;color:var(--cyanosis-code-color);word-break:break-word;overflow-x:auto;background-color:var(--cyanosis-code-bg-color);border-radius:2px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;padding:16px 12px;margin:0;font-size:12px;color:#333;word-break:normal;overflow-x:auto;background:var(--cyanosis-code-pre-color)}.markdown-body pre&gt;code::-webkit-scrollbar{width:4px;height:4px}.markdown-body pre&gt;code::-webkit-scrollbar-track{background-color:var(--cyanosis-border-color)}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:var(--cyanosis-strong-color);border-radius:10px}.markdown-body a{position:relative;text-decoration:none;color:var(--cyanosis-link-color);border-bottom:1px solid var(--cyanosis-border-color)}.markdown-body a:hover{border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body a:active,.markdown-body a:hover{color:var(--cyanosis-linkh-color)}.markdown-body a:after{position:absolute;content:"";top:100%;left:0;width:100%;opacity:0;border-bottom:1px solid var(--cyanosis-border-color);transition:top .3s,opacity .3s;transform:translateZ(0)}.markdown-body a:hover:after{top:0;opacity:1;border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid var(--cyanosis-table-border-color);border-spacing:0;border-collapse:collapse}.markdown-body table thead{color:#000;text-align:left;font-size:14px;background:#f6f6f6}.markdown-body table tr:nth-child(2n){background-color:var(--cyanosis-table-tr-nc-color)}.markdown-body table tr:hover{background-color:var(--cyanosis-table-trh-color)}.markdown-body table td,.markdown-body table th{padding:12px 8px;line-height:24px;border:1px solid var(--cyanosis-table-border-color)}.markdown-body table th{color:var(--cyanosis-table-tht-color);background-color:var(--cyanosis-table-th-color)}.markdown-body table td{min-width:120px}.markdown-body blockquote{color:var(--cyanosis-blockquote-color);border-left:4px solid var(--cyanosis-strong-color);background-color:var(--cyanosis-blockquote-bg-color);padding:1px 20px;margin:22px 0;transition:color .35s}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body b,.markdown-body blockquote&gt;b,.markdown-body blockquote&gt;strong,.markdown-body strong{color:var(--cyanosis-strong-color)}.markdown-body em,.markdown-body i{color:var(--cyanosis-em-color)}.markdown-body del{color:var(--cyanosis-del-color)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:4px}.markdown-body ol li{padding-left:6px}.markdown-body details&gt;summary{outline:none;color:var(--cyanosis-title-color);font-size:20px;font-weight:bolder;border-bottom:1px solid var(--cyanosis-border-color);cursor:pointer}.markdown-body details&gt;p{padding:10px 20px;margin:10px 0 0;color:#666;background-color:var(--cyanosis-blockquote-bg-color);border:2px dashed var(--cyanosis-strong-color)}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection{color:var(--cyanosis-slct-title-color);background-color:var(--cyanosis-slct-titlebg-color)}.markdown-body ol li::selection,.markdown-body p::selection,.markdown-body ul li::selection{color:var(--cyanosis-slct-text-color);background-color:var(--cyanosis-slct-bg-color)}.markdown-body a::selection,.markdown-body b::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:var(--cyanosis-slct-elbg-color)}.markdown-body del::selection{color:var(--cyanosis-slct-del-color);background-color:var(--cyanosis-slct-elbg-color)}.markdown-body table thead th::selection{background-color:transparent}.markdown-body table tbody td::selection{background-color:var(--cyanosis-slct-bg-color)}.markdown-body code::selection{background-color:var(--cyanosis-slct-codebg-color)}.markdown-body pre&gt;code::selection{background-color:var(--cyanosis-slct-prebg-color)}.markdown-body .contains-task-list{padding-left:14px;list-style:none}.markdown-body .contains-task-list input[type=checkbox]{position:relative}.markdown-body .contains-task-list input[type=checkbox]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;width:inherit;height:inherit;background:#f0f8ff;border:1px solid #add6ff;border-radius:2px;box-sizing:border-box;z-index:1}.markdown-body .contains-task-list input[type=checkbox]:checked:after{content:"âœ“";position:absolute;top:-12px;left:0;right:0;bottom:0;width:0;height:0;color:#f55;font-size:20px;font-weight:700;z-index:2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atom-one-dark">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#abb2bf;background:#282c34}.hljs-comment,.hljs-quote{color:#5c6370;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#c678dd}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e06c75}.hljs-literal{color:#56b6c2}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#98c379}.hljs-built_in,.hljs-class .hljs-title{color:#e6c07b}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#d19a66}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#61aeee}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><p>å¤§æ¨¡å‹æŒ‰åŠŸèƒ½å’Œä½¿ç”¨åœºæ™¯å¯åˆ†ä¸ºä¸‰å¤§æ ¸å¿ƒç±»å‹ï¼Œä»¥ä¸‹ç»“åˆ LangChain.js è°ƒç”¨é€šä¹‰åƒé—®çš„å®æ“ä»£ç ï¼Œåˆ†åˆ«è®²è§£å„ç±»æ¨¡å‹çš„å®šä½ã€ç”¨æ³•å’Œé€‚ç”¨åœºæ™¯ï¼š</p>





























<table><thead><tr><th>æ¨¡å‹åˆ†ç±»</th><th>æ ¸å¿ƒå®šä½</th><th>å…¸å‹èƒ½åŠ›</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰</td><td>åŸºç¡€æ–‡æœ¬ç”Ÿæˆå¼•æ“</td><td>æ–‡æœ¬è¡¥å…¨ã€ç»­å†™ã€å•ä¸€é—®ç­”</td><td>ç®€å•æ–‡æœ¬ç”Ÿæˆã€åŸºç¡€é—®ç­”</td></tr><tr><td>å¯¹è¯æ¨¡å‹ï¼ˆChat Modelï¼‰</td><td>å¤šè½®äº¤äº’å¼å¯¹è¯å¼•æ“</td><td>å¤šè§’è‰²äº¤äº’ã€ä¸Šä¸‹æ–‡ç†è§£</td><td>æ™ºèƒ½å®¢æœã€ç¿»è¯‘ã€å¤šè½®å¯¹è¯</td></tr><tr><td>åµŒå…¥æ¨¡å‹ï¼ˆEmbedding Modelï¼‰</td><td>æ–‡æœ¬å‘é‡åŒ–å¼•æ“</td><td>è¯­ä¹‰è½¬åŒ–ã€ç›¸ä¼¼åº¦è®¡ç®—</td><td>çŸ¥è¯†åº“æ£€ç´¢ã€æ–‡æœ¬èšç±»ã€æ¨è</td></tr></tbody></table>
<h2 data-id="heading-0">å¯¹è¯æ¨¡å‹ï¼ˆChat Modelï¼‰</h2>
<h3 data-id="heading-1">æ ¸å¿ƒç‰¹ç‚¹</h3>
<p>ä¸“ä¸ºå¤šè½®å¯¹è¯è®¾è®¡ï¼Œæ”¯æŒ <code>system/human/ai</code> å¤šè§’è‰²è®¾å®šï¼Œèƒ½ç†è§£ä¸Šä¸‹æ–‡å¹¶æŒ‰é¢„è®¾è§„åˆ™ç”Ÿæˆå“åº”ï¼Œæ˜¯äº¤äº’ç±»åœºæ™¯çš„æ ¸å¿ƒæ¨¡å‹ã€‚</p>
<h3 data-id="heading-2">è°ƒç”¨ä»£ç </h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">ChatOpenAI</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/openai"</span>

<span class="hljs-keyword">const</span> chatModel = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ChatOpenAI</span>({
    <span class="hljs-attr">model</span>: <span class="hljs-string">"qwen-max"</span>,
    <span class="hljs-attr">configuration</span>: {
        <span class="hljs-attr">baseURL</span>: <span class="hljs-string">"https://dashscope.aliyuncs.com/compatible-mode/v1"</span>,
        <span class="hljs-attr">apiKey</span>: <span class="hljs-string">"[ä½ çš„é˜¿é‡Œç™¾ç‚¼API Key]"</span>,
    },
})

<span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> chatModel.<span class="hljs-title function_">invoke</span>([
    {
        <span class="hljs-comment">// systemè§’è‰²ï¼šé¢„è®¾æ¨¡å‹è¡Œä¸ºå’Œèƒ½åŠ›</span>
        <span class="hljs-attr">role</span>: <span class="hljs-string">"system"</span>,
        <span class="hljs-attr">content</span>: <span class="hljs-string">"ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„ç¿»è¯‘ï¼Œä½ å¯ä»¥å°†ä¸­æ–‡ç¿»è¯‘æˆè‹±æ–‡"</span>,
    },
    {
        <span class="hljs-comment">// userè§’è‰²ï¼šè¾“å…¥å…·ä½“ç”¨æˆ·æŒ‡ä»¤</span>
        <span class="hljs-attr">role</span>: <span class="hljs-string">"user"</span>,
        <span class="hljs-attr">content</span>: <span class="hljs-string">"è¯·å¸®æˆ‘ç¿»è¯‘æˆè‹±æ–‡ï¼šä½ å¥½"</span>,
    },
])
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(response.<span class="hljs-property">content</span>) <span class="hljs-comment">// è¾“å‡ºç¤ºä¾‹ï¼šHello</span>
</code></pre>
<h2 data-id="heading-3">åµŒå…¥æ¨¡å‹ï¼ˆEmbedding Modelï¼‰</h2>
<h3 data-id="heading-4">æ ¸å¿ƒç‰¹ç‚¹</h3>
<p>å°†æ–‡æœ¬è½¬åŒ–ä¸ºå›ºå®šç»´åº¦çš„æ•°å€¼å‘é‡ï¼ˆé€šä¹‰åƒé—® <code>text-embedding-v2</code> ä¸º768ç»´ï¼‰ï¼Œå‘é‡é—´çš„è·ç¦»å¯è¡¨å¾æ–‡æœ¬è¯­ä¹‰ç›¸ä¼¼åº¦ï¼Œæ˜¯è¯­ä¹‰æ£€ç´¢ã€çŸ¥è¯†åº“çš„åŸºç¡€ã€‚</p>
<h3 data-id="heading-5">è°ƒç”¨ä»£ç </h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">OpenAIEmbeddings</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/openai"</span>

<span class="hljs-keyword">const</span> embeddingsModel = <span class="hljs-keyword">new</span> <span class="hljs-title class_">OpenAIEmbeddings</span>({
    <span class="hljs-attr">model</span>: <span class="hljs-string">"text-embedding-v2"</span>,
    <span class="hljs-attr">configuration</span>: {
        <span class="hljs-attr">baseURL</span>: <span class="hljs-string">"https://dashscope.aliyuncs.com/compatible-mode/v1"</span>,
        <span class="hljs-attr">apiKey</span>: <span class="hljs-string">"[ä½ çš„é˜¿é‡Œç™¾ç‚¼API Key]"</span>,
    },
})

<span class="hljs-comment">// å•æ–‡æœ¬å‘é‡åŒ–ï¼šè¿”å›ä¸€ç»´å‘é‡æ•°ç»„</span>
<span class="hljs-keyword">const</span> queryEmbedding = <span class="hljs-keyword">await</span> embeddingsModel.<span class="hljs-title function_">embedQuery</span>(<span class="hljs-string">"ä½ å¥½"</span>)
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(queryEmbedding) <span class="hljs-comment">// è¾“å‡ºç¤ºä¾‹ï¼š[0.012, -0.045, 0.078, ...]</span>

<span class="hljs-comment">// æ‰©å±•ï¼šå¤šæ–‡æœ¬æ‰¹é‡å‘é‡åŒ–ï¼ˆé€‚ç”¨äºçŸ¥è¯†åº“æ„å»ºï¼‰</span>
<span class="hljs-comment">// const batchEmbeddings = await embeddingsModel.embedDocuments(["ä½ å¥½", "ä¸–ç•Œ"])</span>
</code></pre>
<h2 data-id="heading-6">å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰</h2>
<h3 data-id="heading-7">æ ¸å¿ƒç‰¹ç‚¹</h3>
<p>æœ€åŸºç¡€çš„å¤§æ¨¡å‹ç±»å‹ï¼Œä»¥ã€Œæ–‡æœ¬è¡¥å…¨ã€ä¸ºæ ¸å¿ƒèƒ½åŠ›ï¼Œæ— å¤šè§’è‰²äº¤äº’è®¾è®¡ï¼Œè¾“å…¥å•ä¸€æ–‡æœ¬æŒ‡ä»¤ï¼Œè¿”å›å¯¹åº”çš„ç”Ÿæˆç»“æœã€‚</p>
<h3 data-id="heading-8">ä¸å¯¹è¯æ¨¡å‹çš„åŒºåˆ«</h3>
<ul>
<li>å¤§è¯­è¨€æ¨¡å‹ï¼šè¾“å…¥è¾“å‡ºå‡ä¸ºçº¯æ–‡æœ¬ï¼Œæ— è§’è‰²åŒºåˆ†ï¼Œé€‚åˆç®€å•çš„æ–‡æœ¬ç”Ÿæˆ/é—®ç­”ï¼›</li>
<li>å¯¹è¯æ¨¡å‹ï¼šåŸºäºå¤§è¯­è¨€æ¨¡å‹å°è£…ï¼Œæ”¯æŒå¤šè§’è‰²ã€å¤šè½®ä¸Šä¸‹æ–‡ï¼Œäº¤äº’æ€§æ›´å¼ºã€‚</li>
</ul>
<h3 data-id="heading-9">è°ƒç”¨ä»£ç </h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">OpenAI</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/openai"</span>

<span class="hljs-keyword">const</span> llm = <span class="hljs-keyword">new</span> <span class="hljs-title class_">OpenAI</span>({
    <span class="hljs-attr">model</span>: <span class="hljs-string">"qwen-plus"</span>,
    <span class="hljs-attr">configuration</span>: {
        <span class="hljs-attr">baseURL</span>: <span class="hljs-string">"https://dashscope.aliyuncs.com/compatible-mode/v1"</span>,
        <span class="hljs-attr">apiKey</span>: <span class="hljs-string">"[ä½ çš„é˜¿é‡Œç™¾ç‚¼API Key]"</span>,
    },
})

<span class="hljs-comment">// è¾“å…¥å•ä¸€æ–‡æœ¬æŒ‡ä»¤ï¼Œç›´æ¥è¿”å›ç»“æœ</span>
<span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> llm.<span class="hljs-title function_">invoke</span>(<span class="hljs-string">"ç¿»è¯‘â€œä½ å¥½â€æˆè‹±æ–‡"</span>)
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(response) <span class="hljs-comment">// è¾“å‡ºç¤ºä¾‹ï¼šHello</span>
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é…ç½®æŠ€å·§ï½œGoLand ç”¨æˆ·å¦‚ä½•ä¸æ»‘ä½¿ç”¨ TRAE]]></title>    <link>https://juejin.cn/post/7605792874173907007</link>    <guid>https://juejin.cn/post/7605792874173907007</guid>    <pubDate>2026-02-13T06:10:44.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605792874173907007" data-draft-id="7605985547569201158" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é…ç½®æŠ€å·§ï½œGoLand ç”¨æˆ·å¦‚ä½•ä¸æ»‘ä½¿ç”¨ TRAE"/> <meta itemprop="keywords" content="Trae"/> <meta itemprop="datePublished" content="2026-02-13T06:10:44.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="TRAE_ai"/> <meta itemprop="url" content="https://juejin.cn/user/3048259110571032"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é…ç½®æŠ€å·§ï½œGoLand ç”¨æˆ·å¦‚ä½•ä¸æ»‘ä½¿ç”¨ TRAE
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3048259110571032/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    TRAE_ai
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-13T06:10:44.000Z" title="Fri Feb 13 2026 06:10:44 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»13åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cb807a53b5e3484f99da3a5013e7f413~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771567843&amp;x-signature=v3U3aZPGRBsR4p5DD%2BzSHUjun2c%3D" alt="" loading="lazy"/></p>
<blockquote>
<p>æœ¬æ–‡ä½œè€…ï¼šå¼ é“ï¼ŒTRAE å¼€å‘è€…ç”¨æˆ·</p>
</blockquote>
<p><strong>æœ¬æ–‡ä»¥ GoLand ä¸ºä¾‹ï¼Œå…¶ä»– JetBrains ç³»åˆ— IDE çš„é…ç½®ä¹Ÿå¯ä»¥å‚è€ƒä½¿ç”¨ã€‚</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/21430df326be417ea5735eaca4ebb578~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771567843&amp;x-signature=ctz8R%2FA66Dqn7NKG5nR1VP7Ahnk%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-0"><strong>å‰è¨€</strong></h2>
<p>å¯¹äºä¸å°‘å¼€å‘ Go è¯­è¨€çš„åŒå­¦è€Œè¨€ï¼ŒGoLand æ˜¯æœ€ä¸ºç†Ÿæ‚‰çš„ä¸€æŠŠâ€œå•å…µåˆ©å™¨â€ï¼Œä½œä¸º JetBrains å…¨å®¶æ¡¶çš„ä¸€å‘˜ï¼Œå®ƒåœ¨ç¼–è¾‘ã€å¼€å‘ã€è°ƒè¯•ç­‰æ–¹é¢ï¼Œå»¶ç»­äº† IDEAã€PyCharm ç­‰äº§å“ä¸€è´¯çš„å¼€ç®±å³ç”¨ä½“éªŒã€‚</p>
<p>ä¸å°‘ä¹ æƒ¯äº† JetBrains ç³»åˆ—çš„åŒå­¦ï¼Œåˆæ¬¡ä¸Šæ‰‹ TRAE IDE æ—¶å¯èƒ½ä¸€æ—¶éš¾ä»¥é€‚åº”å VS Code é£æ ¼çš„ç¼–è¾‘ä½“éªŒï¼Œä¸å¾—ä¸åœ¨ TRAE å’ŒåŸæœ¬ä½¿ç”¨çš„ IDE ä¹‹é—´é¢‘ç¹æ¥å›åˆ‡æ¢ã€‚</p>
<p>å…¶å®è¦æ”¹å˜è¿™ä¸€ç‚¹å¹¶ä¸éš¾ã€‚åªè¦åšå‡ å¤„ç®€å•çš„é…ç½®å’Œè°ƒæ•´ï¼Œå°±èƒ½è®©ä½ çš„ TRAE IDE åœ¨ä½¿ç”¨ä½“éªŒä¸Šæ›´æ¥è¿‘ GoLandã€‚æœ¬æ–‡æŠŠæˆ‘è‡ªå·±çš„ä¸€äº›å¿ƒå¾—æ•´ç†äº†ä¸€ä¸‹ï¼Œåˆ†äº«ç»™å¤§å®¶ï¼Œå¸Œæœ›èƒ½å¯¹ä½ æœ‰ä¸€ç‚¹å¸®åŠ©ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0be1c7870af940c8889e3bd29f2afa7f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771567843&amp;x-signature=stu9ejlzOBMzw2uy6mhkiVAMTnk%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-1"><strong>UI å¤–è§‚ä¸å¸ƒå±€</strong></h2>
<p>æƒ³è¦æœ‰ç†Ÿæ‚‰çš„ GoLand å‘³é“ï¼Œé¢œå€¼å’Œé…è‰²éƒ½å¾ˆå…³é”®ã€‚æˆ‘ä»¬å…ˆä»è§†è§‰å’Œå¸ƒå±€å…¥æ‰‹ã€‚</p>
<h3 data-id="heading-2"><strong>ä¸»é¢˜ä¸å›¾æ ‡</strong></h3>
<p>TRAE æ— ç¼æ”¯æŒå¤§éƒ¨åˆ†çš„åŸç”Ÿ VS Code æ’ä»¶ã€‚é€šè¿‡å®‰è£…æ’ä»¶ï¼Œä½ å°±å¯ä»¥è½»æ¾ä¸€é”® get GoLand çš„ç»å…¸ Darcula æš—è‰²ç³»å¤–è§‚ã€‚å¯ä»¥è·å¾—ä¸ GoLand å‡ ä¹ä¸€è‡´çš„è§†è§‰é£æ ¼ï¼ŒåŒ…æ‹¬ç¼–è¾‘å™¨é…è‰²å’Œæ–‡ä»¶æ ‘å›¾æ ‡ï¼Œå¸¦æ¥äº²åˆ‡çš„è§†è§‰æ„Ÿå—ã€‚</p>
<ul>
<li>
<p><strong>æ’ä»¶å®‰è£…æŒ‡å—</strong></p>
<p>TRAE æœ¬è´¨ä¸Šå…±äº« VS Code æ’ä»¶åº“ï¼Œè¿™é‡Œç®€è¿°ä¸€ä¸‹æ’ä»¶çš„å®‰è£…æ–¹å¼ï¼Œåæ–‡ä¸å†èµ˜è¿°ï¼šé€šè¿‡ç‚¹å‡»ã€Œé¦–é€‰é¡¹-æ‰©å±•ã€æˆ– <em><strong>Shift+Command+X</strong></em> ç»„åˆé”®æ‰“å¼€æ’ä»¶å¸‚åœºï¼Œå¹¶æœç´¢æ’ä»¶åï¼Œå³å¯ç›´æ¥å®‰è£…ã€‚</p>
</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c5cf4f3bd926453eb7d8ff2af6644623~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771567843&amp;x-signature=UdTnEgAPAF3dNHVVAwVijhVapzk%3D" alt="" loading="lazy"/><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/089507563e864924a9e54ff05a8ca1a0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771567843&amp;x-signature=%2FBLJO3pJ6PnVIk1t5X8s9MnOT58%3D" alt="" loading="lazy"/></p>
<ul>
<li>
<p><strong>JetBrains é¢œè‰²ä¸»é¢˜ï¼š</strong></p>
<p>JetBrains Darcula Theme Â é…ç½®åå¯ä»¥è·å¾— Jetbrains åŒæ¬¾ç¼–è¾‘å™¨é…è‰²</p>
</li>
<li>
<p><strong>JetBrains æ–‡ä»¶å›¾æ ‡ï¼š</strong></p>
<p>JetBrains Icon Theme é…ç½®åå¯è·å¾— Jetbrains åŒæ¬¾ Icon é…è‰²</p>
</li>
</ul>
<p>ç¤ºä¾‹ ï¼ˆ<em><strong>settings.json</strong></em>ï¼‰ï¼šå®‰è£…åï¼Œåœ¨ä¸»é¢˜è®¾ç½®ä¸­é€‰æ‹©å¯¹åº”ä¸»é¢˜ï¼Œæˆ–ç›´æ¥åœ¨ JSON ä¸­æŒ‡å®šã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4c943b5e17c846de837dc3c7d091c278~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771567843&amp;x-signature=ICgyukfj8ejOTquxknVduCMzxaU%3D" alt="" loading="lazy"/></p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"workbench.ColorTheme"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"JetBrains Darcula Theme"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"workbench.IconTheme"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"jetbrains-icon-theme"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>å¯é€‰ ï¼ˆå¾®è°ƒï¼‰</strong> ï¼šå¦‚æœä½ è§‰å¾—é»˜è®¤ä¸»é¢˜é¢œè‰²è¿‡æ·±æˆ–è¿‡æµ…ï¼Œå¯ä»¥é€šè¿‡ <em><strong>colorCustomizations</strong></em> å¾®è°ƒï¼Œæ›´ç²¾ç¡®åœ°å¤åˆ» GoLand è‰²å€¼ã€‚</p>
<pre><code class="hljs language-css" lang="css">{
    "workbench<span class="hljs-selector-class">.colorCustomizations</span>": {
        "<span class="hljs-selector-attr">[JetBrains Darcula Theme]</span>": {
            "editor<span class="hljs-selector-class">.background</span>": <span class="hljs-string">"#2B2B2B"</span>,
            <span class="hljs-string">"sideBar.background"</span>: <span class="hljs-string">"#3C3F41"</span>,
            <span class="hljs-string">"activityBar.background"</span>: <span class="hljs-string">"#3C3F41"</span>,
            <span class="hljs-string">"statusBar.background"</span>: <span class="hljs-string">"#3C3F41"</span>
        }
    }
}
</code></pre>
<h3 data-id="heading-3"><strong>å­—ä½“ä¸è¡Œé«˜</strong></h3>
<p>å¯ä»¥ä½¿ç”¨ JetBrains å®˜æ–¹å­—ä½“ <strong>JetBrains Mono</strong>ï¼Œå®ƒä¸ºä»£ç é˜…è¯»åšäº†ä¸“é—¨ä¼˜åŒ–ã€‚</p>
<ul>
<li>
<p><strong>ä¸‹è½½ä¸å®‰è£…ï¼š</strong> JetBrains Mono å®˜ç½‘Â </p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.jetbrains.com%2Fmono%2F" target="_blank" title="https://www.jetbrains.com/mono/" ref="nofollow noopener noreferrer">www.jetbrains.com/mono/</a></p>
</li>
</ul>
<p><strong>ç¤ºä¾‹</strong> ï¼ˆ<em><strong>settings.json</strong></em>ï¼‰ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"editor.fontFamily"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"JetBrains Mono, Menlo, Monaco, 'Courier New', monospace"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"editor.fontSize"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">14</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"editor.lineHeight"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1.6</span><span class="hljs-punctuation">,</span>
    <span class="hljs-comment">// å»ºè®®ç»ˆç«¯ä¹Ÿä½¿ç”¨ç›¸åŒå­—ä½“ï¼Œä¿æŒè§†è§‰ç»Ÿä¸€</span>
    <span class="hljs-attr">"terminal.integrated.fontFamily"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"JetBrains Mono"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-4"><strong>é¢æ¿ä¸å¸ƒå±€ä¹ æƒ¯</strong></h3>
<p>åœ¨ GoLand ä¸­ï¼Œå¤§å®¶é€šå¸¸ä¹ æƒ¯äºä¸€ä¸ªé«˜åº¦é›†æˆçš„è§†å›¾ï¼Œä¸»ç•Œé¢åº”åŒ…å«æ¸…æ™°çš„é¡¹ç›®æ ‘ã€ä»£ç å¤§çº²ã€é—®é¢˜è¯Šæ–­ã€è°ƒè¯•æ§åˆ¶å°å’Œç»ˆç«¯ç­‰ï¼Œä»è€Œå½¢æˆä¸€ä¸ªé«˜æ•ˆçš„å·¥ä½œé—­ç¯ã€‚åœ¨ TRAE ä¸­ä¹Ÿå¯ä»¥åšç›¸ä¼¼çš„å¸ƒå±€é…ç½®</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9a18072cd5614ea8b869a7abe4103020~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771567843&amp;x-signature=%2Bq%2BohF2MAUz6pBrVqFvxFWZEYPw%3D" alt="" loading="lazy"/></p>
<p><strong>å»ºè®® ï¼ˆå¸ƒå±€è®¾ç½®ï¼‰ï¼š</strong></p>
<ul>
<li>
<p><strong>å·¦ä¾§ï¼šèµ„æºç®¡ç†å™¨ ï¼ˆExplorerï¼‰</strong> ï¼Œå¹¶åœ¨å…¶ä¸‹æ–¹æˆ–æ—è¾¹æ”¾ç½® <strong>å¤§çº² ï¼ˆOutlineï¼‰</strong> è§†å›¾ã€‚</p>
</li>
<li>
<p><strong>åº•éƒ¨é¢æ¿ï¼š</strong> é€šè¿‡ **<em>âŒ˜J ï¼ˆCmd+Jï¼‰</em> **æˆ– <em><strong>Ctrl+J</strong></em> åˆ‡æ¢æ˜¾ç¤º/éšè—ï¼Œå¸¸ç”¨çš„æ ‡ç­¾é¡µåŒ…æ‹¬ <strong>é—®é¢˜ ï¼ˆProblemsï¼‰ã€è¾“å‡º ï¼ˆOutputï¼‰ã€è°ƒè¯•æ§åˆ¶å° ï¼ˆDebug Consoleï¼‰</strong> å’Œ <strong>ç»ˆç«¯ ï¼ˆTerminalï¼‰</strong> ã€‚</p>
</li>
<li>
<p><strong>å³ä¾§ï¼š</strong> ä»£ç ç¼–è¾‘åŒºã€‚</p>
</li>
</ul>
<p><strong>å»ºè®® ï¼ˆå¿«æ·å¼€å…³ï¼‰ï¼š</strong> ç†Ÿç»ƒä½¿ç”¨å¿«æ·é”®æ¥æ§åˆ¶é¢æ¿ï¼Œå¯ä»¥æå¤§æå‡æ•ˆç‡ã€‚</p>
<ul>
<li>
<p><em><strong>â‡§âŒ˜E</strong></em> ï¼ˆShift+Cmd+Eï¼‰ï¼šåˆ‡æ¢åˆ°èµ„æºç®¡ç†å™¨</p>
</li>
<li>
<p><em><strong>â‡§âŒ˜P</strong></em> ï¼ˆShift+Cmd+Pï¼‰ï¼šæ‰“å¼€å‘½ä»¤é¢æ¿ ï¼ˆCommand Paletteï¼‰ï¼Œä¸€åˆ‡æ“ä½œçš„å…¥å£</p>
</li>
<li>
<p><em><strong>âŒ˜J</strong></em> ï¼ˆCmd+Jï¼‰ï¼šåˆ‡æ¢åº•éƒ¨é¢æ¿çš„æ˜¾ç¤ºä¸éšè—</p>
</li>
<li>
<p><em><strong>â‡§âŒ˜M</strong></em> ï¼ˆShift+Cmd+Mï¼‰ï¼šåˆ‡æ¢åˆ°é—®é¢˜é¢æ¿</p>
</li>
</ul>
<h3 data-id="heading-5"><strong>é˜…è¯»ä½“éªŒä¼˜åŒ–</strong></h3>
<p><strong>å»ºè®®ï¼š</strong> ä¸ºäº†æé«˜ä»£ç é˜…è¯»ä½“éªŒï¼Œå¼€å¯ä»¥ä¸‹ <em><strong>settings.json</strong></em> é€‰é¡¹ï¼Œè®©ä»£ç é˜…è¯»æ›´èˆ’é€‚ã€‚</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
    <span class="hljs-comment">// åœ¨æ»šåŠ¨æ—¶ï¼Œè®©å½“å‰ä»£ç å—çš„çˆ¶ç»“æ„ï¼ˆå¦‚å‡½æ•°ã€ç»“æ„ä½“ï¼‰å¸é™„åœ¨é¡¶éƒ¨</span>
    <span class="hljs-attr">"editor.stickyScroll.enabled"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
    <span class="hljs-comment">// åœ¨ç¼–è¾‘å™¨é¡¶éƒ¨æ˜¾ç¤ºæ–‡ä»¶è·¯å¾„å’Œç¬¦å·è·¯å¾„ï¼Œæ–¹ä¾¿å®šä½</span>
    <span class="hljs-attr">"breadcrumbs.enabled"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
    <span class="hljs-comment">// æ‹¬å·å¯¹ç€è‰²ï¼Œä¾¿äºåŒºåˆ†</span>
    <span class="hljs-attr">"editor.bracketPairColorization.enabled"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>Unicode é«˜äº®</strong></p>
<ul>
<li>
<p><strong>ç°è±¡ï¼š</strong> å¦‚æœä»£ç ä¸­éœ€è¦å‡ºç°ä¸­æ–‡å†’å·ã€æ‹¬å·ç­‰å­—ç¬¦ï¼Œä¼šè¢«é»„è‰²æ³¢æµªçº¿è­¦å‘Šï¼Œçœ‹èµ·æ¥å¯èƒ½ä¼šæœ‰ç‚¹æ¼äººã€‚</p>
</li>
<li>
<p><strong>è§£å†³ï¼š</strong> åœ¨ <em><strong>settings.json</strong></em> ä¸­è®¾ç½® <em><strong>"editor.unicodeHighlight.ambiguousCharacters": false</strong></em>ã€‚</p>
</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/704f58772a9e409698df1d5696235dea~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771567843&amp;x-signature=vSxAx9jXBNeIvBliIgym3j9C%2BiI%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-6"><strong>å¿«æ·é”®ä¸å¯¼èˆª</strong></h2>
<p>é€šå¸¸åˆ‡æ¢å¿«æ·é”®ç»„åˆçš„é€‚åº”æˆæœ¬æ˜¯æ¯”è¾ƒé«˜çš„ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸€äº›é…ç½®ï¼Œè®©æ“ä½œä¹ æƒ¯ä» GoLand æ— ç¼è¿ç§»è¿‡æ¥ã€‚</p>
<h3 data-id="heading-7"><strong>å¿«æ·é”®æ˜ å°„æ’ä»¶</strong></h3>
<p><strong>å»ºè®®ï¼š</strong> æœ€æ–°ç‰ˆ TRAE å·²ç»æ”¯æŒ<strong>ä¸€é”®å¯¼å…¥ Jetbrains é£æ ¼å¿«æ·é”®</strong>ï¼Œå¯è‡ªè¡Œåœ¨åå¥½è®¾ç½®ä¸­ç›´æ¥è¿›è¡Œä¿®æ”¹ï¼Œé€‰æ‹©è‡ªå·±æ‰€éœ€çš„å¿«æ·é”®é”®ä½ï¼ˆç›®å‰æ”¯æŒ VS Code / JetBrains ä¸¤ç§å¿«æ·é”®é£æ ¼åˆ‡æ¢ï¼‰</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/158fbea412c741a8b04760a9c2fb66f0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771567843&amp;x-signature=NHouiyDX02%2FLGPWM6%2FEtSYP%2BF9k%3D" alt="" loading="lazy"/></p>
<p>ä½ ä¹Ÿå¯ä»¥é€šè¿‡è‡ªè¡Œé…ç½®å…¶ä»– JetBrains é”®ä½æ’ä»¶ï¼Œå®ƒä»¬ä¼šå°† VS Code çš„å¿«æ·é”®æ›¿æ¢ä¸º JetBrains çš„é£æ ¼ã€‚</p>
<ul>
<li>
<p>IntelliJ IDEA Keybindings ï¼ˆæ›´æµè¡Œï¼‰</p>
</li>
<li>
<p>JetBrains IDE Keymap</p>
</li>
</ul>
<p><strong>æ³¨æ„ï¼š</strong> é…ç½®åï¼ŒTRAE è‡ªèº«çš„ä¸€äº›é»˜è®¤å¿«æ·é”®ï¼ˆå¦‚ <em><strong>âŒ˜K</strong></em> ç³»åˆ—ï¼‰å¯èƒ½ä¼šä¸æ’ä»¶å¿«æ·é”®å†²çªã€‚éœ€è¦æ‰‹åŠ¨è°ƒæ•´ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c274fb8c77924abda01a9aaa5c3f3ef9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771567843&amp;x-signature=UOOkE5%2BVUTazcVR%2BU5utpV4OGUc%3D" alt="" loading="lazy"/><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6395c4f8600d4597ad4335db96b97f1e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771567843&amp;x-signature=VY5Ofz8XahFJ6vJRoOaPIyZxvmU%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-8"><strong>å¿«æ·é”®å†²çªä¸è‡ªå®šä¹‰</strong></h3>
<p><strong>å…¥å£ï¼š</strong> é€šè¿‡å‘½ä»¤é¢æ¿ ï¼ˆ<em><strong>â‡§âŒ˜P</strong></em>ï¼‰ æœç´¢ <em>Preferences: Open Keyboard Shortcuts (JSON)</em> ï¼Œå³å¯æ‰“å¼€ <em><strong>keybindings.json</strong></em> æ–‡ä»¶è¿›è¡Œæ‰‹åŠ¨é…ç½®ã€‚</p>
<p><strong>å†²çªæ¡ˆä¾‹ï¼š</strong> TRAE/VS Code çš„ <em><strong>âŒ˜K</strong></em> æ˜¯ä¸€ä¸ªç»„åˆé”®çš„èµ·å§‹ï¼Œä¾‹å¦‚ <em><strong>âŒ˜K âŒ˜S</strong></em> æ˜¯ä¿å­˜æ‰€æœ‰æ–‡ä»¶ã€‚è€Œ JetBrains Keymap æ’ä»¶ä¼šæŠŠ <em><strong>âŒ˜K</strong></em> æ˜ å°„ä¸º <em><strong>Git Commit</strong></em>ã€‚å¦‚æœä½ ä¸ä¹ æƒ¯ï¼Œå¯ä»¥åœ¨ <em><strong>keybindings.json</strong></em> ä¸­ç§»é™¤æˆ–ä¿®æ”¹å®ƒã€‚</p>
<p><strong>ä»£ç çš„å‰è¿›åé€€è·³è½¬</strong></p>
<ul>
<li><strong>èƒŒæ™¯ï¼š</strong> è¿™æ˜¯åœ¨ç±» VS Code ç¼–è¾‘å™¨ä¸Šè¿›è¡Œä»£ç æµè§ˆçš„ä¸€å¤§ç—›ç‚¹ï¼ŒGoLand é”®ä½çš„å‰åè·³è½¬é”®è¢« bind åˆ°äº†ä¸Š/ä¸‹ä¸€ä¸ªæ–‡ä»¶ä¸Šï¼Œå¯¼è‡´è·³è½¬åŸºæœ¬ä¸èƒ½æ­£å¸¸ä½¿ç”¨ã€‚</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6e57e3d6060840e0bb25bbc2f2026ff9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771567843&amp;x-signature=ShQRQRC5XV94OGgOTqvTE%2FeQoPI%3D" alt="" loading="lazy"/><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c09ca40d40e54978b35c7761dcd35b77~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771567843&amp;x-signature=B6VFYllqXBFh8hHk5B9x1fIyOVg%3D" alt="" loading="lazy"/></p>
<ul>
<li><strong>å»ºè®®ï¼š</strong> ä¿®æ”¹é”®ä½å†²çªï¼Œå°†å¯ä»¥é€šè¿‡ã€Œé”®ç›˜å¿«æ·é”®ã€çš„<strong>æŒ‰é”®å½•åˆ¶èƒ½åŠ›</strong>æ‰¾åˆ°å¯¹åº”é”®ä½çš„ç»‘å®šï¼Œä»…ä¿ç•™ JetBrains IDE Keymap è®¾å®šçš„å‰è¿›/è¿”å› å®šä¹‰</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/af3c086d55984b219f40dd6c66bf68eb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771567843&amp;x-signature=YINUe8cNMn5ClZp2u3j3Hp6n%2Bds%3D" alt="" loading="lazy"/><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cc1b441fc8b6499285b4ef0a338053ca~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771567843&amp;x-signature=qxdQCEHHgzjO7capYqqMEXsYchc%3D" alt="" loading="lazy"/></p>
<p><strong>CamelHumps é©¼å³°å¼å¯¼èˆª</strong></p>
<ul>
<li>
<p><strong>èƒŒæ™¯ï¼š</strong> åœ¨ GoLand ä¸­ï¼Œ<em><strong>âŒ¥+â†/â†’</strong></em> ï¼ˆAlt+Left/Rightï¼‰ å¯ä»¥åœ¨é©¼å³°å‘½åï¼ˆ<em><strong>camelCase</strong></em>ï¼‰çš„å•è¯å†…éƒ¨æŒ‰â€œé©¼å³°â€è¿›è¡Œè·³è½¬ã€‚<em><strong>IntelliJ IDEA Keybindings</strong></em> æ’ä»¶ä¹Ÿæ”¯æŒæ­¤åŠŸèƒ½ã€‚</p>
</li>
<li>
<p><strong>å»ºè®®ï¼š</strong> åœ¨ <em><strong>settings.json</strong></em> ä¸­å¼€å¯æ­¤é€‰é¡¹ä»¥è·å¾—æ›´ç²¾ç»†çš„å…‰æ ‡ç§»åŠ¨ä½“éªŒã€‚</p>
</li>
</ul>

<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"intellij-idea-keybindings.useCamelHumpsWords"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-9"><strong>å¸¸ç”¨æ“ä½œæ˜ å°„æ¸…å•</strong></h3>
<p>ä»¥ä¸‹æ˜¯å®‰è£…å¿«æ·é”®æ’ä»¶åï¼Œä¸€äº› GoLand å¸¸ç”¨æ“ä½œåœ¨ TRAE/VS Code ä¸­çš„ç­‰æ•ˆå¿«æ·é”®ï¼ˆä»¥ macOS ä¸ºä¾‹ï¼‰ï¼š</p>
<p>åŠŸèƒ½</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c36aa63437cc488b9db177c830d3e1ab~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771567843&amp;x-signature=8R9jGUy06srRLjBQnWgi4ATjyww%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/da7bca70aac74e1e9471317e63a32d96~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771567843&amp;x-signature=B79J3esuCPHZpSWauJHiw8vnnDs%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-10"><strong>è¿è¡Œä¸è°ƒè¯•</strong></h2>
<blockquote>
<p>æœ¬æ–‡ä»‹ç»é‡ç‚¹åœ¨ UI è®¾ç½®ä»¥åŠä¸€äº›ç®€å•é…ç½®ä¸Šã€‚æ›´å¤šå¼€å‘èƒ½åŠ›é…ç½®æŠ€å·§ï¼Œæ¬¢è¿å‚è€ƒè¿™ç¯‡æ–‡æ¡£ï¼š</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fbytetech.info%2Farticles%2F7485577423476490259%3Fclick_from%3Darticle_detail_related" target="_blank" title="https://bytetech.info/articles/7485577423476490259?click_from=article_detail_related" ref="nofollow noopener noreferrer">bytetech.info/articles/74â€¦</a></p>
</blockquote>
<p>æœ¬åœ°ç¯å¢ƒé…ç½®å’Œè¿œç¨‹è°ƒè¯•æ˜¯å¼€å‘æµç¨‹ä¸­çš„æ ¸å¿ƒç¯èŠ‚ã€‚</p>
<h3 data-id="heading-11"><strong>é¡¹ç›®ç²’åº¦çš„ Go ç‰ˆæœ¬è·Ÿéš</strong></h3>
<p>æœ€æ–°ç‰ˆ TRAE å·²ç»æ”¯æŒé¡¹ç›®ç²’åº¦çš„ Go è¯­è¨€ç‰ˆæœ¬ç»‘å®šï¼Œå¯é€šè¿‡ã€Œè®¾ç½®-å¼€å‘ç¯å¢ƒã€ä¸ºä½ çš„é¡¹ç›®é…ç½®ç‰¹å®šçš„ Go è¯­è¨€ç‰ˆæœ¬ï¼ŒåŒæ—¶æ¨èæ‰“å¼€ TRAE goaplsï¼Œç»è¿‡æ·±åº¦ä¼˜åŒ–ï¼Œå¯æ˜¾è‘—é™ä½å¤§å‹ Go é¡¹ç›®çš„å†…å­˜å ç”¨ï¼Œæå‡ç´¢å¼•æ€§èƒ½</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1e08a8700de148dea14c6f63b9975b76~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771567843&amp;x-signature=m95%2BZR8Rc6LW399YNRfCIxGsgtY%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-12"><strong>åŸºç¡€è°ƒè¯•é…ç½®</strong></h3>
<p><strong>ç›®çš„ï¼š</strong> é…ç½® <em><strong>launch.json</strong></em> æ–‡ä»¶æ¥å®šä¹‰ä¸åŒçš„è°ƒè¯•åœºæ™¯ã€‚</p>
<p><strong>Tipsï¼š</strong> åœ¨â€œè¿è¡Œå’Œè°ƒè¯•â€é¢æ¿ï¼Œç‚¹å‡»â€œåˆ›å»º launch.json æ–‡ä»¶â€ï¼ŒTRAE ä¼šä¸ºä½ ç”Ÿæˆä¸€ä¸ªåŸºç¡€æ¨¡æ¿ã€‚</p>
<p><strong>ç¤ºä¾‹</strong> ï¼ˆ <em><strong>.vscode/launch.json</strong></em>ï¼‰</p>
<pre><code class="hljs language-perl" lang="perl">{
    <span class="hljs-string">"version"</span>: <span class="hljs-string">"0.2.0"</span>,
    <span class="hljs-string">"configurations"</span>: [
        {
            <span class="hljs-string">"name"</span>: <span class="hljs-string">"å¯åŠ¨ä¸»æœåŠ¡"</span>,
            <span class="hljs-string">"type"</span>: <span class="hljs-string">"go"</span>,
            <span class="hljs-string">"request"</span>: <span class="hljs-string">"launch"</span>,
            <span class="hljs-regexp">//</span> å‘ä½ï¼šå»ºè®®å†™æ­»ä¸º <span class="hljs-string">'debug'</span>ï¼Œé¿å… <span class="hljs-string">'auto'</span> æ¨¡å¼åœ¨é main åŒ…æ–‡ä»¶ä¸‹è¯¯åˆ¤ä¸º testï¼Œå¯¼è‡´æŠ¥é”™ â€œ<span class="hljs-keyword">not</span> an executable fileâ€ã€‚
            <span class="hljs-string">"mode"</span>: <span class="hljs-string">"debug"</span>,
            <span class="hljs-string">"program"</span>: <span class="hljs-string">"<span class="hljs-subst">${workspaceFolder}</span>"</span>, <span class="hljs-regexp">//</span> è¿è¡Œæ•´ä¸ªé¡¹ç›®
            <span class="hljs-string">"envFile"</span>: <span class="hljs-string">"<span class="hljs-subst">${workspaceFolder}</span>/.env"</span> // åŠ è½½ .env æ–‡ä»¶ä¸­çš„ç¯å¢ƒå˜é‡
        },
        {
            <span class="hljs-string">"name"</span>: <span class="hljs-string">"è¿è¡Œå½“å‰æ–‡ä»¶"</span>,
            <span class="hljs-string">"type"</span>: <span class="hljs-string">"go"</span>,
            <span class="hljs-string">"request"</span>: <span class="hljs-string">"launch"</span>,
            <span class="hljs-string">"mode"</span>: <span class="hljs-string">"debug"</span>,
            <span class="hljs-string">"program"</span>: <span class="hljs-string">"<span class="hljs-subst">${file}</span>"</span>, <span class="hljs-regexp">//</span> ä»…è¿è¡Œå½“å‰æ‰“å¼€çš„æ–‡ä»¶ (éœ€ä¸º main åŒ…)
            <span class="hljs-string">"envFile"</span>: <span class="hljs-string">"<span class="hljs-subst">${workspaceFolder}</span>/.env"</span>
        }
    ]
}
</code></pre>
<h3 data-id="heading-13"><strong>è¿œç¨‹è°ƒè¯• ï¼ˆAttach to Processï¼‰</strong></h3>
<p><strong>é…ç½® Delve DAP</strong></p>
<ul>
<li>
<p><strong>èƒŒæ™¯ï¼š</strong> å½“éœ€è¦åœ¨ä»»æ„è¿œç¨‹æœåŠ¡å™¨ä¸Š <em><strong>attach</strong></em> ä¸€ä¸ªå·²ç»è¿è¡Œçš„ Go è¿›ç¨‹æ—¶ï¼Œéœ€è¦æ‰‹åŠ¨é…ç½®ã€‚æ›´å¤šå…³äº Delve DAP çš„è¿œç¨‹è°ƒè¯•ç»†èŠ‚ï¼Œå¯ä»¥æŸ¥é˜… VSCode Go æ’ä»¶çš„å®˜æ–¹ Wiki ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fgolang%2Fvscode-go%2Fwiki%2Fdebugging%25EF%25BC%2589%25E3%2580%2582" target="_blank" title="https://github.com/golang/vscode-go/wiki/debugging%EF%BC%89%E3%80%82" ref="nofollow noopener noreferrer">github.com/golang/vscoâ€¦</a></p>
</li>
<li>
<p><strong>æ­¥éª¤ï¼š</strong></p>
<p><strong>åœ¨è¿œç¨‹æœåŠ¡å™¨ä¸Šå¯åŠ¨ Delveï¼š</strong> ä½ éœ€è¦ä½¿ç”¨ <em><strong>dlv</strong></em> ä»¥ <em><strong>headless</strong></em> æ¨¡å¼å¯åŠ¨ï¼Œå¹¶ç›‘å¬ä¸€ä¸ªç«¯å£ã€‚<em><strong>dlv --listen=:2345 --headless=true --api-version=2 exec ./your_program</strong></em></p>
<p><strong>åœ¨ TRAE ä¸­æ·»åŠ </strong> <em><strong>attach</strong></em> <strong>é…ç½®ï¼š</strong></p>
</li>
</ul>
<p><strong>ç¤ºä¾‹</strong> ï¼ˆ <em><strong>.vscode/launch.json</strong></em>ï¼‰</p>
<pre><code class="hljs language-perl" lang="perl">{
    <span class="hljs-string">"configurations"</span>: [
        <span class="hljs-regexp">//</span> ... å…¶ä»–é…ç½®
        {
            <span class="hljs-string">"name"</span>: <span class="hljs-string">"è¿œç¨‹ Attach (åŠ¨æ€IP/ç«¯å£)"</span>,
            <span class="hljs-string">"type"</span>: <span class="hljs-string">"go"</span>,
            <span class="hljs-string">"request"</span>: <span class="hljs-string">"attach"</span>,
            <span class="hljs-string">"mode"</span>: <span class="hljs-string">"remote"</span>,
            <span class="hljs-regexp">//</span> å‘ä½ï¼š<span class="hljs-string">`remotePath`</span> å¿…é¡»æ˜¯è¿œç¨‹æœåŠ¡å™¨ä¸Šä»£ç çš„ç»å¯¹è·¯å¾„ã€‚
            <span class="hljs-string">"remotePath"</span>: <span class="hljs-string">"/path/to/your/project/on/remote"</span>, 
            <span class="hljs-regexp">//</span> ä½¿ç”¨ inputs å®ç°åŠ¨æ€è¾“å…¥ï¼Œé¿å…ç¡¬ç¼–ç 
            <span class="hljs-string">"host"</span>: <span class="hljs-string">"<span class="hljs-subst">${input:debug_host}</span>"</span>,
            <span class="hljs-string">"port"</span>: <span class="hljs-string">"<span class="hljs-subst">${input:debug_port}</span>"</span>,
            <span class="hljs-regexp">//</span> å…³é”®ï¼šsubstitutePath ç”¨äºæ˜ å°„æœ¬åœ°ä¸è¿œç¨‹ä»£ç è·¯å¾„ï¼Œè®©æ–­ç‚¹èƒ½æ­£ç¡®å‘½ä¸­ã€‚
            <span class="hljs-string">"substitutePath"</span>: [
                {
                    <span class="hljs-string">"from"</span>: <span class="hljs-string">"<span class="hljs-subst">${workspaceFolder}</span>"</span>,
                    <span class="hljs-string">"to"</span>: <span class="hljs-string">"/path/to/your/project/on/remote"</span>
                }
            ]
        }
    ],
    <span class="hljs-string">"inputs"</span>: [
        {
            <span class="hljs-string">"id"</span>: <span class="hljs-string">"debug_host"</span>,
            <span class="hljs-string">"type"</span>: <span class="hljs-string">"promptString"</span>,
            <span class="hljs-string">"description"</span>: <span class="hljs-string">"è¾“å…¥è¿œç¨‹è°ƒè¯•æœåŠ¡å™¨çš„ IP åœ°å€"</span>
        },
        {
            <span class="hljs-string">"id"</span>: <span class="hljs-string">"debug_port"</span>,
            <span class="hljs-string">"type"</span>: <span class="hljs-string">"promptString"</span>,
            <span class="hljs-string">"description"</span>: <span class="hljs-string">"è¾“å…¥ Delve ç›‘å¬çš„ç«¯å£ (å¦‚ 2345)"</span>,
            <span class="hljs-string">"default"</span>: <span class="hljs-string">"2345"</span>
        }
    ]
}
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/01f7a3a485334b29babc22d7b4706b4c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771567843&amp;x-signature=2PPIvciZRkYegGNKPKDrdHB5qLY%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-14"><strong>æµ‹è¯•ä¸è¦†ç›–ç‡</strong></h2>
<p><strong>UI å…¥å£ï¼š</strong> ä¾§è¾¹æ çš„ <strong>Testing</strong> é¢æ¿æ˜¯ Go æµ‹è¯•çš„ä¸»æˆ˜åœºï¼Œæä¾›äº†æ¯”å‘½ä»¤è¡Œæ›´å‹å¥½çš„äº¤äº’ä½“éªŒã€‚</p>
<ul>
<li><strong>å»ºè®®ï¼š</strong> å¯ç›´æ¥åœ¨è¯¥é¢æ¿ä¸­ç‚¹å‡»è¿è¡Œæˆ–è°ƒè¯•æŒ‰é’®æ¥æ‰§è¡Œå•ä¸ªæµ‹è¯•ã€åŒ…æµ‹è¯•æˆ–æ•´ä¸ªé¡¹ç›®çš„æµ‹è¯•ã€‚</li>
</ul>
<p><strong>ç¯å¢ƒå˜é‡é…ç½® ï¼ˆ</strong> <em><strong>settings.json</strong></em> <strong>ï¼‰ï¼š</strong></p>
<ul>
<li><strong>å»ºè®®ï¼š</strong> é€šè¿‡ <em><strong>go.testEnvFile</strong></em> æŒ‡å®šä¸€ä¸ª <em><strong>.env</strong></em> æ–‡ä»¶ï¼Œè®©æ‰€æœ‰æµ‹è¯•éƒ½èƒ½åŠ è½½å¿…è¦çš„ç¯å¢ƒå˜é‡ã€‚</li>
</ul>

<pre><code class="hljs language-kotlin" lang="kotlin">{
    <span class="hljs-string">"go.testEnvFile"</span>: <span class="hljs-string">"<span class="hljs-subst">${workspaceFolder}</span>/.env"</span>,
    <span class="hljs-string">"go.testTimeout"</span>: <span class="hljs-string">"600s"</span>,
    <span class="hljs-comment">// å»ºè®®ï¼šé…ç½®å¸¸ç”¨çš„ test flags</span>
    <span class="hljs-string">"go.testFlags"</span>: [
        <span class="hljs-string">"-count=1"</span>, <span class="hljs-comment">// å…³é—­æµ‹è¯•ç¼“å­˜</span>
        <span class="hljs-string">"-v"</span>,       <span class="hljs-comment">// æ˜¾ç¤ºè¯¦ç»†è¾“å‡º</span>
        <span class="hljs-string">"-race"</span>     <span class="hljs-comment">// å¼€å¯ç«æ€æ£€æµ‹</span>
    ]
}
</code></pre>
<p><strong>æµ‹è¯•è¦†ç›–ç‡ï¼š</strong></p>
<ul>
<li>
<p><strong>å»ºè®®ï¼š</strong> å®‰è£… <strong>Coverage Gutters</strong> æ’ä»¶ã€‚</p>
</li>
<li>
<p><strong>ç”¨æ³•ï¼š</strong></p>
<p>åœ¨ç»ˆç«¯è¿è¡Œ **<em>go test -coverprofile=coverage.out ./...</em> **ç”Ÿæˆè¦†ç›–ç‡æ–‡ä»¶ã€‚</p>
<p>ç‚¹å‡»çŠ¶æ€æ çš„ <em><strong>Watch</strong></em> æŒ‰é’®ï¼ˆç”± Coverage Gutters æä¾›ï¼‰ï¼Œæ’ä»¶ä¼šè‡ªåŠ¨è¯»å– <em><strong>coverage.out</strong></em> æ–‡ä»¶ã€‚</p>
</li>
<li>
<p><strong>æ•ˆæœï¼š</strong> ç¼–è¾‘å™¨è¡Œå·æ—ä¼šç”¨ç»¿è‰²ï¼ˆå·²è¦†ç›–ï¼‰å’Œçº¢è‰²ï¼ˆæœªè¦†ç›–ï¼‰æ¥æ ‡è®°ä»£ç è¡Œï¼Œä¸€ç›®äº†ç„¶ã€‚</p>
</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e4a121a4ca024feebfb44a973225e950~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771567843&amp;x-signature=XHJ2XacxvXVOpO7H0M%2FSJXtMonI%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-15"><strong>è§„èŒƒä¸æ ¼å¼åŒ–</strong></h2>
<p>ä¿æŒä»£ç é£æ ¼ç»Ÿä¸€æ˜¯å›¢é˜Ÿåä½œçš„åŸºç¡€ã€‚</p>
<p><strong>æ ¼å¼åŒ–å·¥å…·ï¼š</strong></p>
<ul>
<li>
<p><strong>å»ºè®®ï¼š</strong> ä½¿ç”¨ <em><strong>goimports</strong></em>ï¼Œå®ƒèƒ½åœ¨æ ¼å¼åŒ–ä»£ç çš„åŒæ—¶ï¼Œè‡ªåŠ¨æ•´ç† <em><strong>import</strong></em> è¯­å¥ã€‚</p>
</li>
<li>
<p><strong>å…³é”®é…ç½®</strong>ï¼ˆ<em><strong>settings.json</strong></em>ï¼‰ <strong>ï¼š</strong> ä¸ºäº†éµå¾ªå…¬å¸å†…éƒ¨ä»£ç è§„èŒƒï¼Œéœ€è¦é…ç½® <em><strong>gopls</strong></em> å¯¹ <em><strong>import</strong></em> è¿›è¡Œåˆ†ç»„ã€‚</p>
</li>
</ul>

<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"editor.formatOnSave"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"go.formatTool"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"goimports"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-comment">// å…³é”®ï¼šgopls ä¼šè¯»å–æ­¤é…ç½®ï¼Œå°†å…¬å¸/é¡¹ç›®çš„åŒ…æ”¾åœ¨ç¬¬ä¸‰æ–¹åŒ…ä¹‹å</span>
    <span class="hljs-attr">"gopls"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"formatting.local"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"code.byted.org,git.byted.org"</span>
    <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>Auto Import å®è·µï¼š</strong></p>
<ul>
<li><strong>ä¸ªäººå»ºè®®ï¼š</strong> ä¸å¼€å¯ AI çš„è‡ªåŠ¨ import åŠŸèƒ½ã€‚æ›´ç¨³å¦¥çš„æ–¹å¼æ˜¯ï¼Œåœ¨ä»£ç ä¸­è¾“å…¥åŒ…ååï¼Œæ‰‹åŠ¨æŒ‰ <em><strong>â‡§âŒ¥O</strong></em> ï¼ˆShift+Alt+Oï¼Œ Organize Importsï¼‰ æˆ–ç›´æ¥ <em><strong>âŒ˜S</strong></em> ï¼ˆCmd+Sï¼‰ ä¿å­˜ï¼Œè§¦å‘ <em><strong>goimports</strong></em> è‡ªåŠ¨æ·»åŠ ã€‚</li>
</ul>
<p><strong>é™æ€æ£€æŸ¥ ï¼ˆLintï¼‰ï¼š</strong></p>
<ul>
<li>
<p><strong>å»ºè®®ï¼š</strong> ä½¿ç”¨ <strong>golangci-lint</strong>ï¼Œå®ƒæ˜¯ä¸€ä¸ªé›†æˆäº†å¤šç§ Go linter çš„é«˜æ€§èƒ½å·¥å…·ã€‚</p>
</li>
<li>
<p><strong>é…ç½®</strong> ï¼ˆ<em><strong>settings.json</strong></em>ï¼‰</p>
</li>
</ul>

<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"go.lintTool"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"golangci-lint"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-comment">// å¯é€‰ï¼šåœ¨ä¿å­˜æ—¶å¯¹å½“å‰æ–‡ä»¶è¿›è¡Œ lint æ£€æŸ¥</span>
    <span class="hljs-attr">"go.lintOnSave"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"file"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><em><strong>go.mod</strong></em> <strong>è‡ªåŠ¨æ·»åŠ </strong> <em><strong>toolchain</strong></em></p>
<ul>
<li><strong>ç°è±¡ï¼š</strong> å½“é¡¹ç›®ä¾èµ–äº†æŸä¸ªéœ€è¦æ›´é«˜ Go ç‰ˆæœ¬çš„åº“æ—¶ï¼Œ<em><strong>go mod tidy</strong></em> ä¼šè‡ªåŠ¨åœ¨ <em><strong>go.mod</strong></em> æ–‡ä»¶ä¸­æ·»åŠ  <em><strong>toolchain</strong></em> æŒ‡ä»¤ï¼Œè¿™å¯èƒ½ä¸æ˜¯ä½ æƒ³è¦çš„ã€‚</li>
<li><strong>å»ºè®®ï¼š</strong> ä¸ºé¿å…æ­¤é—®é¢˜ï¼Œå»ºè®®åœ¨ <em><strong>go.mod</strong></em> ä¸­å§‹ç»ˆä½¿ç”¨ä¸‰æ®µå¼çš„ç‰ˆæœ¬å·ï¼Œå¦‚ <em><strong>go 1.24.0</strong></em>ï¼Œè€Œä¸æ˜¯ <em><strong>go 1.24</strong></em>ã€‚</li>
</ul>
<p><em><strong>go.mod</strong></em> <strong>UI å·®å¼‚</strong></p>
<ul>
<li><strong>Tipsï¼š</strong> åœ¨ GoLand ä¸­ï¼Œä¹ æƒ¯äºåœ¨ <em><strong>go.mod</strong></em> æ–‡ä»¶ä¸Šå³é”®æ‰§è¡Œ <em><strong>tidy</strong></em> ç­‰æ“ä½œã€‚åœ¨ TRAE/VS Code ä¸­ï¼Œè¿™äº›æ“ä½œçš„å…¥å£ä½äºæ‰“å¼€çš„ <em><strong>go.mod</strong></em> æ–‡ä»¶çš„é¡¶éƒ¨ CodeLens åŒºåŸŸï¼ˆè“è‰²æ–‡å­—é“¾æ¥ï¼‰ã€‚</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/450d49b029f44dc699dae9516df6e737~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771567843&amp;x-signature=WfFvk5C%2FePmcf3N4HgITegS%2FV%2F8%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-16"><strong>Git ä¸ MR</strong></h2>
<p>TRAE çš„ Git æ“ä½œä½“éªŒä¸ GoLand æœ‰æ‰€ä¸åŒï¼Œä½†æœ‰ä¸€äº›é…ç½®å’Œæ’ä»¶å¯ä»¥å¾ˆå¥½åœ°å®ç°ç›¸è¿‘æ•ˆæœã€‚</p>
<p><strong>æ™ºèƒ½æäº¤ ï¼ˆSmart Commitï¼‰ï¼š</strong></p>
<ul>
<li><strong>å»ºè®®ï¼š</strong> åœ¨Â <em><strong>settings.json</strong></em> ä¸­å¼€å¯Â ** <em>"git.enableSmartCommit": true</em>**ã€‚è¿™æ ·ï¼Œåœ¨æ²¡æœ‰æ–‡ä»¶è¢« add åˆ°æš‚å­˜åŒºæ—¶ï¼Œç›´æ¥ç‚¹å‡»æäº¤æŒ‰é’®ï¼Œä¼šè‡ªåŠ¨å°†æ‰€æœ‰å·²ä¿®æ”¹çš„æ–‡ä»¶æš‚å­˜å¹¶æäº¤ï¼Œæ›´æ¥è¿‘ GoLand çš„ä½“éªŒã€‚</li>
</ul>
<p><strong>Amend &amp; Force Push:</strong></p>
<ul>
<li><strong>Amendï¼š</strong> åœ¨â€œæºä»£ç ç®¡ç†â€é¢æ¿çš„æäº¤ä¿¡æ¯è¾“å…¥æ¡†ä¸Šæ–¹ï¼Œç‚¹å‡»Â ** <em>...</em> **æ›´å¤šæ“ä½œï¼Œé€‰æ‹©Â **<em>Commit Staged (Amend)</em> **ã€‚</li>
<li><strong>Force Pushï¼š</strong> åŒæ ·åœ¨ **<em>...</em> **èœå•ä¸­ï¼Œé€‰æ‹© **<em>Push to...</em> **ï¼Œç„¶åé€‰æ‹©å¸¦æœ‰ **<em>(force)</em> **æ ‡è¯†çš„è¿œç¨‹åˆ†æ”¯ã€‚ä¸ºå‡å°‘è¯¯æ“ä½œï¼Œå¯ä»¥ä¿ç•™ <em><strong>git.confirmForcePush</strong></em> ä¸ºÂ <em><strong>true</strong></em>ã€‚</li>
</ul>
<p><strong>Git Blame Lens æ’ä»¶</strong></p>
<ul>
<li>å®‰è£…è¯¥æ’ä»¶ï¼Œå¯ä»¥è·å–ä¸ GoLand ç³»åˆ—ç±»ä¼¼çš„ git blame ä½“éªŒï¼šå³é”®å·¦è¾¹æ¡†ç‚¹å‡»ã€Œæ˜¾ç¤º Blame æ³¨é‡Šã€ï¼Œå³å¯æ˜¾ç¤º jetbrains åŒæ¬¾ git æäº¤å±•ç¤º</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d63009fd4caa42dc9a763b8f5c70dbc9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771567843&amp;x-signature=m6JBYE5sPczE4v2TZs5RHMt8jiQ%3D" alt="" loading="lazy"/><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d7f89ea3367143f3b32664781151f4cb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771567843&amp;x-signature=qnE9QtTY48wKjVdjVg1qeUQrGpY%3D" alt="" loading="lazy"/></p>
<p><strong>MR é“¾æ¥ï¼š</strong></p>
<ul>
<li><strong>Tipsï¼š</strong> å½“ <em><strong>git push</strong></em> ä¸€ä¸ªæ–°åˆ†æ”¯åï¼Œåˆ›å»º MR çš„é“¾æ¥ä¼šæ˜¾ç¤ºåœ¨åº•éƒ¨é¢æ¿çš„ <strong>è¾“å‡º ï¼ˆOutputï¼‰ -&gt; Git</strong> é¢‘é“é‡Œã€‚</li>
</ul>
<p><strong>æ’ä»¶å¢å¼ºï¼š</strong></p>
<ul>
<li>
<p><strong>Git Graphï¼š</strong> å¼ºçƒˆæ¨èå®‰è£…ã€‚æä¾›äº†ä¸€ä¸ªæ¯” VS Code è‡ªå¸¦æ›´å¼ºå¤§ã€æ›´ç›´è§‚çš„å›¾å½¢åŒ– Git æäº¤å†å²è§†å›¾ï¼Œéå¸¸æ¥è¿‘ GoLand çš„ Git Log ç•Œé¢ã€‚</p>
</li>
<li>
<p><strong>GitLensï¼š</strong> åŠŸèƒ½å¼ºå¤§ï¼Œå…¶è¡Œå†… <em><strong>blame</strong></em> åŠŸèƒ½ï¼ˆåœ¨å½“å‰è¡Œæ˜¾ç¤ºæœ€åä¸€æ¬¡æäº¤ä¿¡æ¯ï¼‰éå¸¸å®ç”¨ã€‚</p>
</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3124096042b84b48962cc1d3c7869c0c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771567843&amp;x-signature=%2FFWjgXGQcvBAsZ4MXm6grdtNpZg%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-17"><strong>æ¥å…¥ MCP Serverï¼šè®© TRAE ååŒ GoLand é«˜æ•ˆå·¥ä½œ</strong></h2>
<blockquote>
<p>ç½‘å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.jetbrains.com%2Fhelp%2Fidea%2Fmcp-server.html" target="_blank" title="https://www.jetbrains.com/help/idea/mcp-server.html" ref="nofollow noopener noreferrer">www.jetbrains.com/help/idea/mâ€¦</a></p>
</blockquote>
<p>Jetbrains ç³»åˆ— IDE çš„æ›´æ–°ç‰ˆæœ¬ä¹Ÿæä¾›äº†ä¸€ç»„â€œè¿œç¨‹ IDE èƒ½åŠ›æ¥å£â€ï¼Œé€šè¿‡ä¸€ä¸ª MCP Server æš´éœ²ç»™å¤–éƒ¨å®¢æˆ·ç«¯ä½¿ç”¨ï¼Œè¿™äº›å·¥å…·åŸºæœ¬è¦†ç›–äº†â€œè¿è¡Œã€é¡¹ç›®ç»“æ„ã€æ–‡ä»¶ä¸ç›®å½•æ“ä½œã€æœç´¢ã€åˆ†æä¸é‡æ„ã€ç»ˆç«¯å‘½ä»¤ã€VCS ä¿¡æ¯â€ç­‰å¸¸è§åŠŸèƒ½ï¼Œæˆ‘ä»¬é€šè¿‡ä¸º TRAE é…ç½®è¿™äº› MCP å°±å¯ä»¥ç›´æ¥ä½¿ç”¨ Goland ï¼ˆæˆ–å…¶ä»– Jetbrains IDE ï¼‰ çš„ç›¸å…³èƒ½åŠ›ã€‚ç›®å‰ Jetbrains MCP æä¾›çš„èƒ½åŠ›å¯ä»¥å½’çº³ä¸ºä»¥ä¸‹å‡ ç±»ï¼š</p>
<ul>
<li>
<p><strong>è¿è¡Œä¸è°ƒè¯•ï¼š</strong> è·å–é¡¹ç›®ä¸­çš„æ‰€æœ‰ <em><strong>Run Configuration</strong></em> å¹¶æ‰§è¡ŒæŒ‡å®šçš„ä»»ä½•ä¸€ä¸ªï¼Œæ— è®ºæ˜¯å¯åŠ¨æœåŠ¡è¿˜æ˜¯è·‘æµ‹è¯•ã€‚</p>
</li>
<li>
<p><strong>ä»£ç åˆ†æä¸æ£€æŸ¥ï¼š</strong> å¯¹æŒ‡å®šæ–‡ä»¶è¿è¡Œ GoLand çš„ä»£ç æ£€æŸ¥ï¼Œè¿”å›é”™è¯¯å’Œè­¦å‘Šï¼Œå°±åƒåœ¨ IDE é‡Œçœ‹åˆ°çš„é‚£æ ·ã€‚</p>
</li>
<li>
<p><strong>ä»£ç é‡æ„ä¸ä¿®æ”¹ï¼š</strong> æ‰§è¡Œå®‰å…¨å¯é çš„ <em><strong>rename</strong></em> é‡æ„ã€å¯¹æ–‡ä»¶è¿›è¡Œæ ¼å¼åŒ–ã€æˆ–è€…ç²¾ç¡®æ›¿æ¢æ–‡ä»¶å†…çš„æ–‡æœ¬ã€‚</p>
</li>
<li>
<p><strong>æ–‡ä»¶ä¸é¡¹ç›®æ¢ç´¢ï¼š</strong> åœ¨é¡¹ç›®ä¸­æŒ‰åç§°æˆ– <em><strong>glob</strong></em> æ¨¡å¼æŸ¥æ‰¾æ–‡ä»¶ã€åˆ—å‡ºç›®å½•æ ‘ã€æˆ–ç›´æ¥åœ¨ GoLand ç¼–è¾‘å™¨é‡Œæ‰“å¼€æŸä¸ªæ–‡ä»¶ã€‚</p>
</li>
<li>
<p><strong>ç»ˆç«¯å‘½ä»¤æ‰§è¡Œï¼š</strong> åœ¨ GoLand å†…åµŒçš„ç»ˆç«¯é‡Œæ‰§è¡Œä»»æ„ Shell å‘½ä»¤ã€‚</p>
</li>
<li>
<p><strong>ç¬¦å·ä¸ä¾èµ–æŸ¥è¯¢ï¼š</strong> è·å–ä»£ç ä¸­ç‰¹å®šç¬¦å·ï¼ˆå¦‚å‡½æ•°ã€å˜é‡ï¼‰çš„è¯¦ç»†ä¿¡æ¯ï¼Œæˆ–åˆ—å‡ºé¡¹ç›®çš„ä¾èµ–é¡¹ã€‚</p>
</li>
</ul>
<h3 data-id="heading-18"><strong>é…ç½®æ–¹æ³•</strong></h3>
<p>å¯¹äºç†Ÿæ‚‰ JetBrains IDE çš„å¼€å‘è€…ï¼Œå¯ç”¨è¿‡ç¨‹éå¸¸ç®€å•ï¼š</p>
<ol>
<li>
<p>æ‰“å¼€ GoLandï¼Œè¿›å…¥ <em><strong>Settings</strong></em> â†’ <em><strong>Tools</strong></em> â†’ <em><strong>MCP Server</strong></em>ã€‚</p>
</li>
<li>
<p>å‹¾é€‰ <em><strong>Enable MCP Server</strong></em>ã€‚</p>
</li>
<li>
<p>åœ¨ <em><strong>Clients Auto-Configuration</strong></em> éƒ¨åˆ†ï¼Œæ‰¾åˆ°ä½ ä½¿ç”¨çš„ TRAE IDEï¼Œç‚¹å‡» <em><strong>Auto-Configure</strong></em>ã€‚</p>
</li>
<li>
<p>é‡å¯ä½ çš„ AI å®¢æˆ·ç«¯ï¼ˆå¦‚ TRAEï¼‰ï¼Œé…ç½®å³å¯ç”Ÿæ•ˆã€‚</p>
</li>
</ol>
<p>å¦‚æœä½ çš„å®¢æˆ·ç«¯ä¸åœ¨åˆ—è¡¨ä¸­ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ <em><strong>Copy SSE Config</strong></em> æˆ– <em><strong>Copy Stdio Config</strong></em> æ‰‹åŠ¨é…ç½®ã€‚</p>
<h3 data-id="heading-19"><strong>å®‰å…¨è¾¹ç•Œ</strong></h3>
<p>åœ¨ä½¿ç”¨ Jetbrains MCP ç›¸å…³èƒ½åŠ›æ—¶ï¼Œéœ€è¦äº†è§£å…¶è¾¹ç•Œï¼Œé¿å…ä¸ç¬¦åˆé¢„æœŸçš„è¡Œä¸ºï¼š</p>
<ul>
<li>
<p><strong>â€œå‹‡æ•¢æ¨¡å¼â€ï¼ˆBrave Modeï¼‰ï¼š</strong> é»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰§è¡Œç»ˆç«¯å‘½ä»¤ç­‰æœ‰é£é™©çš„æ“ä½œéœ€è¦ä½ åœ¨ GoLand ç«¯æ‰‹åŠ¨ç¡®è®¤ã€‚ä½ å¯ä»¥åœ¨è®¾ç½®ä¸­å¼€å¯ <em><strong>Run shell commands or run configurations without confirmation (brave mod</strong></em> **<em>e)</em> **ï¼Œå®ç°æ— æ„Ÿæ‰§è¡Œã€‚å»ºè®®ä»…åœ¨å®Œå…¨ä¿¡ä»»å®¢æˆ·ç«¯ï¼Œä¸”ä¸»è¦ç”¨äºæ‰§è¡Œæµ‹è¯•ã€æ„å»ºç­‰å¸¸è§„å‘½ä»¤æ—¶å¼€å¯ã€‚</p>
</li>
<li>
<p><strong>æƒé™ä¸èŒƒå›´ï¼š</strong> æ‰€æœ‰æ“ä½œéƒ½ä¸¥æ ¼é™åˆ¶åœ¨å½“å‰æ‰“å¼€çš„é¡¹ç›®ç›®å½•å†…ï¼Œæ— æ³•è®¿é—®é¡¹ç›®å¤–çš„æ–‡ä»¶ç³»ç»Ÿã€‚MCP Server ä¹Ÿæ— æ³•è¯»å–äºŒè¿›åˆ¶æ–‡ä»¶çš„å†…å®¹ã€‚</p>
</li>
<li>
<p><strong>èµ„æºé™åˆ¶ï¼š</strong> è¯»å–å¤§æ–‡ä»¶æˆ–æ‰§è¡Œé•¿æ—¶é—´å‘½ä»¤ä¼šå—åˆ°è¶…æ—¶ï¼ˆtimeoutï¼‰å’Œæœ€å¤§è¡Œæ•°ï¼ˆmaxLinesCountï¼‰çš„é™åˆ¶ï¼Œè¿”å›çš„è¾“å‡ºå¯èƒ½ä¼šè¢«æˆªæ–­ã€‚</p>
</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b8bf3a10e2ba4b199c90f5e6d701a383~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771567843&amp;x-signature=SuPL3GqPGM3RAVCtFEVsaYhavbA%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-20"><strong>æ€»ç»“</strong></h2>
<p>é€šè¿‡ä»¥ä¸Šè¿™äº›é…ç½®æŠ€å·§ï¼Œå¸Œæœ›å¸®åŠ©å·²ç»ä¹ æƒ¯ GoLand çš„åŒå­¦ï¼ŒæŠŠ TRAE è°ƒæ•´åˆ°ä¸€ä¸ª <strong>â€œçœ‹èµ·æ¥é¡ºçœ¼ã€æŒ‰èµ·æ¥ä¸åˆ«æ‰­ã€è·‘èµ·æ¥é è°±â€</strong> çš„çŠ¶æ€ï¼ŒæŠŠè¿ˆå‡ºâ€œç¬¬ä¸€æ­¥â€çš„é—¨æ§›å†å‹ä½ä¸€ç‚¹ã€‚</p>
<p>å¦‚æœä½ ç°åœ¨ç”¨çš„ä¸æ˜¯ GoLandï¼Œè€Œæ˜¯ IDEAã€PyCharmï¼Œæˆ–è€…æœ¬èº«å°±åœ¨ç”¨ VS Codeï¼Œå…¶å®è¿ç§»æ€è·¯ä¹Ÿå·®ä¸å¤šï¼š<strong>å…ˆæå®šä¸»é¢˜/å­—ä½“/å›¾æ ‡ï¼Œå…¶æ¬¡æ˜¯å¿«æ·é”®å’Œå¯¼èˆªä¹ æƒ¯ï¼Œæœ€åå†æŠŠè¿è¡Œã€è°ƒè¯•ã€å·¥ä½œæµç­‰å…³é”®åœºæ™¯ä¸€ç‚¹ç‚¹å¤åˆ»å‡ºæ¥ã€‚</strong></p>
<p>å¦å¤–ï¼Œè€å®è¯´åœ¨å¾ˆå¤šåœºæ™¯ä¸‹ï¼ŒIDE åŒå¼€ä¹Ÿæ˜¯ä¸€ä¸ªå¾ˆåŠ¡å®çš„é€‰æ‹©ã€‚æ•ˆç‡å·¥å…·çš„ä½¿ç”¨ä¸æ˜¯éæ­¤å³å½¼çš„äºŒé€‰ä¸€ï¼ŒæŠŠå„è‡ªçš„ä»·å€¼éƒ½å‘æŒ¥å‡ºæ¥ï¼Œåè€Œå¯èƒ½æ›´æœ‰æ„ä¹‰ã€‚æ¯”å¦‚åœ¨å¤æ‚é¡¹ç›®ä¸‹ï¼Œå¯ä»¥è¿™æ ·åŒå¼€ TRAE + GoLandï¼š</p>
<ul>
<li>
<p><strong>ä¸šåŠ¡å¼€å‘ã€è¡¥å•æµ‹ã€æ¶¦è‰²æ³¨é‡Šç”¨ TRAE</strong>ï¼Œå……åˆ†å‘æŒ¥ AI çš„å¢é‡ä»·å€¼ï¼›éœ€è¦åšå¤§èŒƒå›´ reviewã€å¤æ‚ä»£ç å¯¼èˆªå’Œæµ‹è¯•æ—¶ï¼Œå¯ä»¥åˆ‡å› GoLandï¼Œåˆ©ç”¨å®ƒæˆç†Ÿè€Œç¨³å®šçš„æ€§èƒ½è¡¨ç°ã€‚</p>
</li>
<li>
<p><strong>æ’æŸ¥çº¿ä¸Šé—®é¢˜æ—¶</strong>ï¼Œå¯ä»¥åœ¨ TRAE é‡Œ attach è¿œç¨‹è¿›ç¨‹ã€çœ‹æ—¥å¿—ï¼Œè®© AI ä¸€èµ·å¸®å¿™åˆ†æè°ƒç”¨é“¾ï¼›å¯¹ç€å¯ç–‘ä»£ç å—å†ç”¨ GoLand åšç²¾ç»†è·³è½¬ã€å…¨å±€æ£€ç´¢å’Œé™æ€æ£€æŸ¥ã€‚</p>
</li>
<li>
<p>åšæ¥å£è¿ç§»æˆ–æ‰¹é‡æ”¹åè¿™ç±»é«˜é£é™©æ“ä½œæ—¶ï¼Œç”¨ GoLand è´Ÿè´£â€œå®‰å…¨è½åˆ€â€ï¼Œè®©é‡æ„å·¥å…·å…œåº•ï¼›<strong>TRAE åˆ™å¸®ä½ ç”Ÿæˆè¿ç§»è„šæœ¬ã€è¡¥æµ‹è¯•ã€çœ‹è¦†ç›–ç‡å“ªé‡Œè¿˜ä¸å¤Ÿã€‚</strong></p>
</li>
</ul>
<p>ä»¥ä¸Šæ˜¯æˆ‘è‡ªå·±çš„ä¸€äº› GoLand â†” TRAE è¿ç§»å¿ƒå¾—ã€‚å¦‚æœè¿™ç¯‡åˆ†äº«èƒ½å¸®ä½ æŠŠ TRAE ç”¨æˆé¡ºæ‰‹çš„ AI IDEï¼Œé‚£ç›®çš„å°±ç®—è¾¾åˆ°äº†ã€‚ä¸å¦¨æ¥è¯•ä¸€è¯•å§ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[GLM-5 å‘å¸ƒäº†ï¼10 åˆ†é’Ÿå‚»ç“œåŒ–éƒ¨ç½² OpenClaw åˆ°é£ä¹¦ã€‚]]></title>    <link>https://juejin.cn/post/7605625595571011599</link>    <guid>https://juejin.cn/post/7605625595571011599</guid>    <pubDate>2026-02-13T06:14:49.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605625595571011599" data-draft-id="7605625595570995215" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="GLM-5 å‘å¸ƒäº†ï¼10 åˆ†é’Ÿå‚»ç“œåŒ–éƒ¨ç½² OpenClaw åˆ°é£ä¹¦ã€‚"/> <meta itemprop="keywords" content="GitHub"/> <meta itemprop="datePublished" content="2026-02-13T06:14:49.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é€›é€›GitHub"/> <meta itemprop="url" content="https://juejin.cn/user/1442202996186093"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            GLM-5 å‘å¸ƒäº†ï¼10 åˆ†é’Ÿå‚»ç“œåŒ–éƒ¨ç½² OpenClaw åˆ°é£ä¹¦ã€‚
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1442202996186093/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é€›é€›GitHub
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-13T06:14:49.000Z" title="Fri Feb 13 2026 06:14:49 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å‰ä¸¤å¤©ï¼Œæ•´ä¸ªå¤–ç½‘é›†ä½“é™·å…¥çŒœè°œæ¸¸æˆï¼Œä»¿ä½›æ•´ä¸ªç§‘æŠ€åŒºè¿›å…¥äº†å…¨å‘˜ä¾¦æ¢çš„æ¨¡å‹ã€‚</p>
<p>è¿™æ˜¯å› ä¸ºä¸€ä¸ªå« Pony AlphaÂ çš„åŒ¿åæ¨¡å‹åœ¨æµ·å¤–å„å¤§è¯„æµ‹æ¦œå•ä¸Šæ¨ªç©ºå‡ºä¸–ã€‚</p>
<p>å®ƒæ²¡æœ‰å‘å¸ƒä¼šï¼Œç”šè‡³æ²¡æœ‰ä¸€å®¶å…·ä½“çš„å…¬å¸è®¤é¢†ã€‚ã€‚ã€‚</p>
<p>ä»…ä»…å‡­ç€å‡ ä¸ªç®€å•çš„ API æ¥å£å’Œå¾ˆæƒŠè‰³çš„ç”Ÿæˆè´¨é‡ï¼Œå°±ç¬é—´å¼•çˆ†äº† X å’Œ Reddit çš„æŠ€æœ¯ç¤¾åŒºã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c6a7801f68f14b2ba8c1c609d3232138~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771568088&amp;x-signature=r%2Br88dGiLQsh02CVGUnkDfvRY2w%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>OpenRouter å…¨çƒæ¨¡å‹èšåˆä¸åˆ†å‘å¹³å°åœ¨ 2æœˆ6æ—¥é¦–æ¬¡å…¬å¼€æ¨æ–‡å®£å¸ƒä¸Šçº¿åä¸º Pony Alpha çš„ç¥ç§˜æ¨¡å‹ã€‚</p>
<p>éšåä¸¤å¤©åœ¨å¤–ç½‘è¿…é€Ÿå‘é…µï¼Œå¤§å®¶éƒ½åœ¨çŒœè¿™ç©¶ç«Ÿæ˜¯å“ªå®¶æ¨¡å‹ï¼Ÿ</p>
<p>æœ‰äººè¯´æ˜¯ DeepSeek V4ï¼Œä¹Ÿæœ‰äººè¯´æ˜¯ Claude Sonnet ç§˜å¯†å‡çº§ç‰ˆï¼Œç”šè‡³æœ‰äººé€šè¿‡ Pony ä»£å·çŒœæµ‹æ˜¯è…¾è®¯çš„æ–°æ¨¡å‹ï¼Ÿï¼Ÿ</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/884bbcf7089d4c16ac05191966621831~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771568088&amp;x-signature=v0qqgCYF2RT1MY4w%2F0s%2BKPWQRFY%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong>ç°åœ¨ï¼Œè°œåº•æ­æ™“ï¼Œå®˜å®£äº†ã€‚</strong></p>
<p>è¿™ä¸ªéœ¸æ¦œå¤–ç½‘çš„ Pony Alphaï¼Œæ­£æ˜¯æˆ‘ä»¬å›½äº§çš„ AI å¤§æ¨¡å‹â€”<strong>GLM-5</strong>ã€‚</p>
<p>æ²¡é”™ï¼ŒGLM-5 ä¸ä»…æ¥äº†ï¼Œè€Œä¸”ç›´æ¥<strong>å¼€æº</strong>ã€‚</p>
<p><strong>01</strong>ã€GLM 5 æ¨¡å‹ä»‹ç»</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d5956c2ff2ce45bf83f46780561fca05~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771568088&amp;x-signature=g3R23XvCXkkKPmoShA25uKq85AE%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>GLM-5 çš„å®šä½éå¸¸æ¸…æ™°ï¼Œå®ƒæ˜¯é¢å‘å¤æ‚çš„ç³»ç»Ÿå·¥ç¨‹ã€é•¿é“¾è·¯ Agent ä»»åŠ¡çš„å¼€æºæ¨¡å‹åŸºåº§ã€‚</p>
<p>ä¸æ»¡è¶³äºå†™ä¸ªå‰ç«¯ demoï¼Œè€Œæ˜¯å¼€å§‹è¿½æ±‚ Agentic æ·±åº¦ã€‚è¯´ç™½äº†ï¼Œå°±æ˜¯çœ‹æ¨¡å‹èƒ½ä¸èƒ½åƒäººä¸€æ ·ï¼Œç‹¬ç«‹æå®šä¸€æ•´ä¸ªç³»ç»Ÿå·¥ç¨‹ã€‚</p>
<p>åœ¨ 2026 å¹´åˆè¿™ä¸ªæ—¶é—´èŠ‚ç‚¹ï¼ŒGLM-5 æƒ³è¦é‡å¡‘é•¿ç¨‹è§„åˆ’ä¸ç³»ç»Ÿçº§å·¥ç¨‹å¼€å‘ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/29acb7101ee1403eb16f67e0d264b991~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771568088&amp;x-signature=UPyWlAbeyPkT0mvmMR3ESjnY7ow%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>â‘  è·¨æ—¶åŸŸçš„ Agentic ä»»åŠ¡è‡ªä¸»é—­ç¯Â </p>
<p>GLM-5 ä¸åªä¼šå†™å‡ è¡Œç¢ä»£ç ï¼Œå®ƒæ›´åƒæ˜¯ä¸ª<strong>è„‘å­æ¸…é†’çš„é¡¹ç›®è´Ÿè´£äºº</strong>ã€‚</p>
<p>é¢å¯¹é‚£ç§è¦åˆ†å¥½å‡ æ­¥ã€æŠ˜è…¾å¥½å‡ ä¸ªå°æ—¶çš„å¤æ‚å¤§ä»»åŠ¡ï¼Œå®ƒèƒ½è‡ªå·±æŠŠéœ€æ±‚æ‹†æ˜ç™½ï¼Œè€Œä¸”å…¨ç¨‹ä¸æ‰çº¿ã€ä¸è·‘é¢˜ï¼Œç›¯ç€ç›®æ ‡ä¸€ç›´å¹²åˆ°åº•ã€‚</p>
<p>â‘¡ ç¡¬æ ¸åç«¯é‡æ„ä¸å…¨é“¾è·¯è°ƒè¯•Â </p>
<p>GLM-5 åœ¨åç«¯æ¶æ„è®¾è®¡ã€é«˜å¤æ‚åº¦ç®—æ³•å®ç°ç­‰æ·±æ°´åŒºæ¸¸åˆƒæœ‰ä½™ã€‚Â </p>
<p>æœ€ç‰›çš„æ˜¯å®ƒæœ‰åæ€èƒ½åŠ›ï¼šå¦‚æœç¨‹åºè·‘ä¸é€šï¼ŒæŠ¥é”™äº†ï¼Ÿå®ƒä¸ç”¨ä½ ç›¯ç€ï¼Œè‡ªå·±ç¿»æ—¥å¿—ã€æ‰¾åŸå› ï¼Œä¸€ééè¯•é”™é‡æ¥ï¼Œç›´åˆ°ä»£ç å½»åº•è·‘é€šä¸ºæ­¢ã€‚</p>
<p>â‘¢ å¯¹æ ‡ Claude Opus çš„å¼€æºå·¥ç¨‹æ ‡æ†Â </p>
<p>åœ¨ä»£ç é€»è¾‘å¯†åº¦ä¸ç³»ç»Ÿçº§å·¥ç¨‹äº¤ä»˜èƒ½åŠ›ä¸Šï¼ŒGLM-5 èƒ½å¤Ÿå¯¹é½ Claude OpusÂ 4.5ã€‚å®ƒä¸ºå¼€å‘è€…æä¾›äº†å¯¹æ ‡é¡¶å°–å•†ä¸šæ¨¡å‹çš„æ™ºèƒ½æ°´å¹³ï¼ŒåŒæ—¶å…¼å…·å¼€æºéƒ¨ç½²çš„çµæ´»æ€§ä¸æè‡´çš„èµ„æºæ€§ä»·æ¯”ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2737fbd87b99471096094a6ddb2ebbb1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771568088&amp;x-signature=aHywS1oce5x5meDe5PXrT%2BVoqlE%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong>02</strong>ã€æµ‹è¯•ä¸€ä¸‹</p>
<p>æŠŠ OpenClaw æ¥å…¥åˆ°é£ä¹¦ä¸­ã€‚</p>
<p>æˆ‘ç”¨æœ€ç®€å•çš„æç¤ºè¯ï¼ŒGLM-5 æ‹†è§£ä»»åŠ¡ä¸€æ­¥æ­¥å¼•å¯¼æˆ‘è·‘é€šäº† OpenClaw æ¥å…¥åˆ°é£ä¹¦ä¸­ã€‚</p>
<p>ä½ å¯ä»¥æŒ‰ç…§æˆ‘å¦‚ä¸‹çš„æ­¥éª¤è¯•è¯•ï¼Œä¿è¯å¯ä»¥åœ¨ 10 åˆ†é’Ÿå†…æå®šã€‚</p>
<p>æç¤ºè¯ï¼š</p>
<p>å¸®æˆ‘éƒ¨ç½²ä¸€ä¸ª openclaw å¼€æºé¡¹ç›®ï¼Œæˆ‘è¦é…ç½®åˆ°é£ä¹¦ç¾¤é‡Œæ¥å…¥åˆ°ä¸€ä¸ªæœºå™¨äººã€‚</p>
<p>è¾“å…¥å®Œè¿™ä¸ªæç¤ºè¯ï¼ŒGLM-5 ä¼šå¼•å¯¼ä½ è¿›è¡Œä¸€äº›é…ç½®ï¼Œæ¯”å¦‚åœ¨é£ä¹¦å¼€æ”¾å¹³å°åˆ›å»ºåº”ç”¨ã€é…ç½®åº”ç”¨æƒé™ï¼Œå¯ç”¨æœºå™¨äººçš„èƒ½åŠ›ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2d886fdac3f84fbdbf234bab0c0b2095~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771568088&amp;x-signature=6ddoORVZHURu9b0CP1j433U6tS4%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ä¸è¿‡è¿™äº›é…ç½®ä½ ä¸ç”¨æ‹…å¿ƒï¼ŒGLM-5 æ€•ä½ ä¸ä¼šï¼Œå·²ç»æ•´ç†äº†ä¸€ä¸ªéå¸¸è¯¦ç»†çš„ PDF æ–‡æ¡£ï¼Œä½ å°±è·Ÿç€æ–‡æ¡£ä¸­çš„æŒ‡ç¤ºä¸€æ­¥æ­¥æ“ä½œå°±è¡Œäº†ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c65073a04fbe40f79f5d115f9c5b3647~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771568088&amp;x-signature=UAVXgB8GNLLTBTyGAANgqZn5C5E%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å½“ä½ æ ¹æ®è¿™ä¸ªæ–‡æ¡£å»é£ä¹¦å¼€æ”¾å¹³å°è¿›è¡Œäº†ç›¸å…³çš„é…ç½®ï¼Œ ä½ å¯ä»¥åœ¨å¼€æ”¾å¹³å°æ‹¿åˆ°ä½ çš„ appid å’Œ app secret ï¼Œè¿™ä¸ªæ—¶å€™ä½ å†ç»™ GLM-5 å‘é€ä¸€ä¸ªå‘½ä»¤ï¼š</p>
<p>æˆ‘çš„ appid æ˜¯ xxxxx</p>
<p>æˆ‘çš„ app secret æ˜¯ï¼šxxxxx</p>
<p>ç„¶å GLM-5 ä¼šè¯´ï¼šè¯·é—®æ‚¨æ˜¯å¦éœ€è¦æˆ‘å¸®æ‚¨é…ç½® AI æ¨¡å‹ï¼Ÿå¦‚æœæ‚¨æœ‰ Claude æˆ–å…¶ä»– AI æœåŠ¡çš„ API Keyï¼Œè¯·å‘Šè¯‰æˆ‘ï¼Œæˆ‘å¯ä»¥å¸®æ‚¨é…ç½®ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bc2062dde9494cfabf970570951b29bc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771568088&amp;x-signature=JuSA8HaBV3u3TkdtDwb2Iog1Rtw%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æˆ‘å†è¾“å…¥äº†æç¤ºè¯ï¼š</p>
<p>å¸®æˆ‘æ¥å…¥ glm çš„æ¨¡å‹ï¼Œæˆ‘çš„ api key ä¸ºï¼šxxxx</p>
<p>ç„¶å GLM-5 ä¼šå™¼é‡Œå•ªå•¦è‡ªå·±å»é…ç½®ï¼Œç„¶åå‘Šè¯‰ä½  GLM çš„ API Key å·²ç»é…ç½®æˆåŠŸäº†ï¼Œä½ éœ€è¦å†å»é£ä¹¦å¼€æ”¾å¹³å°é…ç½®ä¸€ä¸‹äº‹ä»¶è®¢é˜…ã€‚</p>
<p>æˆ‘ä¹Ÿä¸æ‡‚å•¥é€»è¾‘ï¼Œå°±æ˜¯è·Ÿç€åšå°±è¡Œäº†ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/71d5f57a17d94fc4b7df30f987683f58~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771568088&amp;x-signature=sI2n0aKD1vcO9nc2uRH60asyz1Q%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æœ€åä½ åˆ›å»ºä¸€ä¸ªé£ä¹¦ç¾¤ï¼ŒæŠŠä½ è¿™ä¸ªæœºå™¨äººåŠ è¿›å»ã€‚ç„¶å @è¿™ä¸ªæœºå™¨äººï¼Œå°± OK äº†ã€‚ã€‚ã€‚</p>
<p>æ•´ä¸ªè¿‡ç¨‹ä¸­ï¼Œæˆ‘åªæ˜¯è¾“å…¥äº†ä¸‰ä¸ªæç¤ºè¯ï¼Œåœ¨é£ä¹¦å¼€æ”¾å¹³å°åˆ›å»ºäº†ä¸€ä¸ªåº”ç”¨ã€è¿›è¡Œäº†ç›¸å…³çš„é…ç½®ï¼Œç„¶åæŠŠæœºå™¨äººæ¥å…¥åˆ°é£ä¹¦ç¾¤é‡Œã€‚</p>
<p>å‚»ç“œå¼çš„è·Ÿç€ GLM-5 ç”Ÿæˆçš„ PDF éƒ¨ç½²æŒ‡å—ç‚¹ç‚¹ç‚¹ï¼Œå°± Work äº†ã€‚ã€‚ã€‚</p>
<p>è¿™ä¸ªæ„Ÿè§‰çœŸçš„å¤ªçˆ½äº†ï¼Œå¤ªç‰›äº†ã€‚ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b4b2937c02864efd907e150ec58ad654~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771568088&amp;x-signature=jeAvalnJUqN1CD1%2BdkrrWzSQGYs%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ç›´è§‚çš„æ„Ÿå—æ˜¯Â GLM-5 æ¨¡å‹åœ¨ Agentic ä»»åŠ¡ä¸Šè¡¨ç°ç¡®å®ä¸é”™ã€‚</p>
<p>å°¤å…¶è¦åˆ†å¥½å‡ æ­¥ç”šè‡³ä¸­é—´éœ€è¦äººæ¥äº¤äº’è¡¥å……é¢å¤–ä¿¡æ¯çš„ä»»åŠ¡ï¼Œå®ƒèƒ½æŠŠéœ€æ±‚æ‹†æ˜ç™½ï¼Œè€Œä¸”çŸ¥é“åœ¨å“ªäº›æ­¥éª¤ä¸Šéœ€è¦äººå‚ä¸è¿›æ¥è¡¥å……ä¿¡æ¯ã€‚</p>
<p>è¡¥å……å®Œä¿¡æ¯èƒ½æ¥ç€å¹²ï¼Œä¸è·‘é¢˜ï¼Œä¸Šä¸‹æ–‡è¿è´¯å¾ˆå¼ºã€‚</p>
<p>ç”Ÿæˆä¸€ä¸ªå…¨æ ˆè®ºå›ã€‚</p>
<p>GLM ç‰›çš„ç‚¹æ˜¯åšç³»ç»Ÿçº§å·¥ç¨‹ï¼Œæˆ‘è®©å®ƒåšä¸€ä¸ªå¸¦ç®¡ç†åå°ã€é‰´æƒã€å‘å¸ƒçš„å®Œæ•´è®ºå›ã€‚</p>
<p>è€Œä¸æ˜¯ä¸€ä¸ªé™æ€å‰ç«¯é¡µé¢ Demoã€‚</p>
<p>æç¤ºè¯ï¼š</p>
<p>ä½ æ˜¯ä¸€ä½èµ„æ·±å…¨æ ˆå·¥ç¨‹å¸ˆï¼Œæ“…é•¿ä½¿ç”¨ç°ä»£æŠ€æœ¯æ ˆï¼ˆNext.js 14, Tailwind CSS, TypeScript, Lucide React å›¾æ ‡ï¼‰æ„å»ºç®€æ´ã€ç¾è§‚ã€å“åº”å¼çš„ Web åº”ç”¨ã€‚</p>
<p>ä»»åŠ¡ç›®æ ‡ï¼š è¯·å¸®æˆ‘å¼€å‘ä¸€ä¸ªåŠŸèƒ½å®Œå¤‡çš„è½»é‡åŒ–è®ºå›ç³»ç»Ÿã€‚è¦æ±‚è®¾è®¡é£æ ¼å‚è€ƒçŸ¥ä¹ï¼Œç¾è§‚ã€å¤§æ°”ã€æœ‰æ ¼è°ƒã€‚</p>
<p>æ ¸å¿ƒåŠŸèƒ½éœ€æ±‚ï¼š</p>
<p>ç”¨æˆ·å‰ç«¯ï¼šèº«ä»½éªŒè¯ï¼š å®ç°é‚®ç®±ç™»å½•/æ³¨å†Œã€å¸–å­æµè§ˆï¼š é¦–é¡µå±•ç¤ºå¸–å­åˆ—è¡¨ï¼ˆå«æ ‡é¢˜ã€ä½œè€…ã€å‘å¸ƒæ—¶é—´ã€æ ‡ç­¾ï¼‰ã€å¸–å­è¯¦æƒ…ï¼š æ”¯æŒæŸ¥çœ‹æ­£æ–‡åŠè¯„è®ºåŒºã€‚</p>
<p>å‘å¸ƒåŠŸèƒ½ï¼š ç®€å•çš„å¯Œæ–‡æœ¬æˆ– Markdown ç¼–è¾‘å™¨é¡µé¢ã€ä¸ªäººä¸­å¿ƒï¼š æ˜¾ç¤ºæˆ‘çš„å¸–å­å’ŒåŸºæœ¬è®¾ç½®ã€‚</p>
<p>ç®¡ç†ç³»ç»Ÿ (Admin Portal)ï¼š</p>
<p>ç‹¬ç«‹å…¥å£ï¼š é»˜è®¤ç™»å½•è´¦å·ï¼šadminï¼Œå¯†ç ï¼šadminã€ç®¡ç†çœ‹æ¿ï¼š ç»Ÿè®¡å¸–å­æ€»æ•°ã€ç”¨æˆ·æ€»æ•°ã€å†…å®¹ç®¡ç†ï¼š æ”¯æŒå¯¹è¿è§„å¸–å­è¿›è¡Œåˆ é™¤æˆ–ç½®é¡¶æ“ä½œã€ç”¨æˆ·ç®¡ç†ï¼š æŸ¥çœ‹ç”¨æˆ·åˆ—è¡¨ï¼Œç¦è¨€ç”¨æˆ·ã€‚</p>
<p>å¤§æ¦‚éœ€è¦ç­‰åˆ° 20ï½30 åˆ†é’Ÿï¼ŒGLM 5 å®Œæˆäº†ä»»åŠ¡æ‹†è§£ã€Codingã€éƒ¨ç½²ä¸Šçº¿ã€‚</p>
<p>å®ç°äº†çš„æ³¨å†Œã€ç™»å½•ï¼Œå¸–å­å‘å¸ƒåŠŸèƒ½ã€‚å¦‚æœç™»å½•çš„æ˜¯ç®¡ç†å‘˜è´¦å·ï¼Œè¿˜èƒ½åˆ‡æ¢åˆ°ç®¡ç†åå°å¯¹è®ºå›å†…å®¹ã€ç”¨æˆ·è¿›è¡Œç®¡ç†ã€‚</p>
<p>å¦‚æœåˆ‡æ¢åˆ°ä¸€ä¸ªä¸ºæœªç™»å½•çš„ç”¨æˆ·çŠ¶æ€ï¼Œä¼šå‘ç°ç¤¾åŒºçš„å¸–å­æ˜¯èƒ½å¤Ÿçœ‹åˆ°çš„ï¼Œå¦‚æœè¦ç‚¹èµã€è¯„è®ºä¼šå¼•å¯¼è¿›è¡Œç™»å½•ï¼Œæœ‰é‰´æƒçš„é€»è¾‘ã€‚</p>
<p>GLM-5 æ¨¡å‹ä¸ä¼šç«‹å³å†™ä»£ç ï¼Œè€Œæ˜¯åˆ¤å®šè¿™æ˜¯ä¸€ä¸ªå¤æ‚çš„é¡¹ç›®ï¼Œå…ˆè¿›è¡Œå‰ç½®çš„è§„åˆ’ã€‚</p>
<p>åŒ…æ‹¬è®¾è®¡æ•°æ®åº“æ¨¡å‹ã€åˆ›å»ºåç«¯ APIã€å¼€å‘å‰ç«¯é¡µé¢ç­‰ç­‰ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/88618a20a729412ba26c6594ab713b4c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771568088&amp;x-signature=guxck8Nl2iy0n%2BMz52xX1bPpErI%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å¦‚æœè·‘ä¸é€šã€æŠ¥é”™äº†ï¼ŒGLM-5 ä¸éœ€è¦ä½ ä»‹å…¥ã€‚å®ƒä¼šè‡ªå·±ç¿»æ—¥å¿—ã€åˆ†æ Stack Traceã€å®šä½ Bugï¼Œç„¶åé‡å†™ä»£ç ï¼Œä¸€ééè¯•é”™ç›´åˆ°è·‘é€šã€‚</p>
<p>è¿™ç§å†™ä»£ç -è¿è¡Œ-æŠ¥é”™-ä¿®Bug-å†è¿è¡Œçš„è‡ªä¸»é—­ç¯èƒ½åŠ›ï¼Œæ‰æ˜¯ Agentic æ—¶ä»£çš„çœŸæ­£å…¥åœºåˆ¸ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/794f957a4ae842369eaf674c2c425f55~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771568088&amp;x-signature=6doNlS2t4rKyEryHBndQPqEhpkI%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d430c80438db484595df8cd4a9a4204d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771568088&amp;x-signature=ZI1o%2FKsorSwpvBqfvNzUxJpXMsA%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å¦‚æœæƒ³æä¸€æ GLM æ¨¡å‹ï¼Œæ²¡æœ‰ token å¯ç”¨ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢è¿™ä¸ªæˆ‘çš„ä¸“å±é“¾æ¥è®¢é˜…å¥—é¤ï¼Œç¬¬ä¸€æ¬¡è´­ä¹° 5 æŠ˜ï¼Œè€Œä¸”åº”é‚€å†å‡ 10%ã€‚Â </p>
<pre><code class="hljs language-ini" lang="ini">é“¾æ¥ï¼šhttps://www.bigmodel.cn/claude-code?<span class="hljs-attr">ic</span>=UX7NF0VZ4S
</code></pre>
<p><strong>03</strong>ã€Agentic Coding æ—¶ä»£æ¥ä¸´ã€‚</p>
<p>2026 å¹´ Vibe Coding å¯èƒ½çœŸçš„ä¸æ˜¯ä¸»æµå™äº‹äº†ï¼Œç°åœ¨æ˜¯ Agentic Codingã€‚</p>
<p>GLM-5 çš„å‘å¸ƒï¼Œå°±æ˜¯åœ¨è·µè¡Œè¿™ä¸ªç†å¿µã€‚</p>
<p>å®ƒä¸æ˜¯æ¥è¾…åŠ©ä½ å†™ä»£ç çš„ï¼Œå®ƒæ˜¯æ¥æ›¿ä½ äº¤ä»˜ç³»ç»Ÿçš„ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f80888d9e7e844a4822ddeacd9334543~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771568088&amp;x-signature=di4tOGRD1lp%2ByQL%2Fn0JYWn8Lc1E%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å¦‚æœå¤§å®¶æœ‰æ—¶é—´ï¼Œå¯ä»¥å»å¬å¬ OpenClaw å¼€æºé¡¹ç›®ä½œè€…æœ€è¿‘çš„è®¿è°ˆï¼Œä»–è¯´äº†ä¸€ä¸ªè§‚ç‚¹ã€‚</p>
<p>Andrej Karpathy ç­‰ AI å¤§ä½¬ä»¬è¿‘æœŸä¹Ÿè¡¨è¾¾è¿‡ç±»ä¼¼çš„æƒ³æ³•ã€‚</p>
<p><strong>Vibe CodingÂ ä½œä¸ºä¸€ç§æ—©æœŸçš„ã€éšæ„çš„ AI ç¼–ç¨‹æ–¹å¼å·²ç»è§¦åˆ°äº†å¤©èŠ±æ¿ï¼Œæ­£åœ¨è¢«æ›´ä¸¥è‚ƒã€æ›´å…·å·¥ç¨‹åŒ–çš„ Agentic Coding æ‰€å–ä»£ã€‚</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/43b2cb3d840b426db3955c54c3bc0d02~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771568088&amp;x-signature=6NsaWx2ChzE0SBtrsaKksYeBx3k%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>Vibe CodingÂ æ˜¯ AI ç¼–ç¨‹åˆæœŸçš„ä¸€ç§é‡ç”Ÿç©æ³•ï¼Œä½†ä¸æ˜¯æœ€ç»ˆèŒƒå¼ã€‚</p>
<p>Agentic Coding æ›´åŠ ç§‘å­¦ï¼Œå®ƒä¸æ˜¯å’Œä¸€ä¸ªå¤§æ¨¡å‹èŠå¤©å†™ç‚¹ä»£ç ã€‚è€Œæ˜¯åŒæ—¶è·‘å¤šä¸ª agentï¼Œæ¯ä¸ªè´Ÿè´£ä¸åŒä»»åŠ¡ï¼Œå¼€å‘è€…ç«™åœ¨æ›´é«˜ä¸€å±‚åšæ¶æ„è®¾è®¡ã€ä»»åŠ¡æ‹†è§£å’ŒéªŒè¯é—­ç¯ã€‚</p>
<p><strong>ä¸å¤ªåœ¨æ„æ¯ä¸€è¡Œä»£ç ï¼Œè€Œæ˜¯åœ¨æ„ç³»ç»Ÿæ˜¯å¦æŒ‰é¢„æœŸå·¥ä½œã€‚</strong></p>
<p>è¿™ä¸¤ä½ AI å¤§ä½¬æ˜¯ Vibe coding æœ€çŒ›çš„ä¸€æ‰¹å®è·µè€…ä¹‹ä¸€ï¼Œä½†ä¹Ÿæ˜¯ç¬¬ä¸€æ‰¹å…¬å¼€è¯´æˆ‘å¾—åœä¸‹æ¥ï¼Œè¿™æ ·ä¸è¡Œçš„äººä¹‹ä¸€ã€‚</p>
<p>åœ¨ä»£ç é€»è¾‘å¯†åº¦ã€ç³»ç»Ÿçº§å·¥ç¨‹äº¤ä»˜èƒ½åŠ›ã€Agent ä»»åŠ¡å®Œæˆåº¦è¿™äº›ç»´åº¦ä¸Šï¼ŒGLM-5 å·²ç»å¯ä»¥ç›´æ¥å¯¹æ ‡ Claude Opus è¿™ä¸€æ¡£çš„é¡¶çº§é—­æºæ¨¡å‹ã€‚</p>
<p>åœ¨æ ¸å¿ƒç¼–ç¨‹ / Agent åœºæ™¯ä¸‹ï¼Œæˆæœ¬å‹åˆ°é¡¶çº§é—­æºæ¨¡å‹çš„ä¸€ä¸ªé›¶å¤´ï¼Œå´èƒ½ç»™åˆ°éå¸¸æ¥è¿‘ç”šè‡³è¶…è¶Šçš„å·¥ç¨‹ä½“éªŒ</p>
<p>å¯¹å¼€å‘è€…æ¥è¯´ï¼Œè¿™æ„å‘³ç€ï¼šä½ å¯ä»¥ç”¨å¼€æºæ¨¡å‹çš„æˆæœ¬å’Œå¯æ§æ€§ï¼Œäº«å—æ¥è¿‘é¡¶çº§é—­æºæ¨¡å‹çš„ç”Ÿäº§åŠ›ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç®€æ˜“çš„æŸ¥è¯¢ä¸ç¼“å­˜çš„ç»Ÿä¸€æ‰§è¡Œå™¨]]></title>    <link>https://juejin.cn/post/7605792874173874239</link>    <guid>https://juejin.cn/post/7605792874173874239</guid>    <pubDate>2026-02-13T06:01:42.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605792874173874239" data-draft-id="7605792874173857855" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç®€æ˜“çš„æŸ¥è¯¢ä¸ç¼“å­˜çš„ç»Ÿä¸€æ‰§è¡Œå™¨"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-02-13T06:01:42.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°å¤coding"/> <meta itemprop="url" content="https://juejin.cn/user/2403977616186251"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç®€æ˜“çš„æŸ¥è¯¢ä¸ç¼“å­˜çš„ç»Ÿä¸€æ‰§è¡Œå™¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2403977616186251/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°å¤coding
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-13T06:01:42.000Z" title="Fri Feb 13 2026 06:01:42 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    18
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€èƒŒæ™¯ä¸é—®é¢˜</h2>
<p>åœ¨é«˜å¹¶å‘ã€é«˜å¯ç”¨çš„ä¸šåŠ¡åœºæ™¯ä¸­ï¼Œæˆ‘ä»¬å¸¸é¢ä¸´è¿™æ ·çš„æ•°æ®è·å–æµç¨‹ï¼š</p>
<ul>
<li><strong>å…ˆæŸ¥ç¼“å­˜</strong>ï¼ˆå¦‚ Redisï¼‰å‡è½» DB å‹åŠ›ã€æå‡å“åº”é€Ÿåº¦</li>
<li><strong>ç¼“å­˜æœªå‘½ä¸­å†æŸ¥ DB</strong></li>
<li><strong>DB ä¹Ÿæ²¡æœ‰åˆ™å®æ—¶è®¡ç®—</strong></li>
<li><strong>è®¡ç®—æˆ–æŸ¥è¯¢åˆ°ç»“æœå</strong>ï¼šå…ˆè½åº“ï¼Œå†å›å†™ç¼“å­˜ï¼Œä¿è¯ä¸‹æ¬¡å‘½ä¸­</li>
</ul>
<p>å¦‚æœæ¯ä¸ªæ¥å£éƒ½æ‰‹å†™ã€ŒRedis â†’ DB â†’ è®¡ç®— â†’ å†™ DB â†’ å†™ Redisã€è¿™ä¸€å¥—é€»è¾‘ï¼Œä¼šå‡ºç°å¤§é‡é‡å¤ä»£ç ï¼Œä¸”å®¹æ˜“æ¼å†™å›å†™æ­¥éª¤ï¼Œå¯¼è‡´ç¼“å­˜ä¸ DB ä¸ä¸€è‡´ã€‚å› æ­¤éœ€è¦ä¸€å¥—<strong>å¯å¤ç”¨ã€å£°æ˜å¼</strong>çš„æ‰§è¡Œå™¨ï¼ŒæŠŠæµç¨‹å›ºå®šä¸‹æ¥ï¼Œåªç”±è°ƒç”¨æ–¹æä¾›ã€ŒæŸ¥ä»€ä¹ˆã€æ€ä¹ˆç®—ã€æ€ä¹ˆå­˜ã€ã€‚</p>
<hr/>
<h2 data-id="heading-1">äºŒã€æ•´ä½“è®¾è®¡æ€è·¯</h2>
<p>æ ¸å¿ƒæ€æƒ³ï¼š<strong>ç”¨å‡½æ•°å¼æ¥å£æè¿°æ¯ä¸€æ­¥èƒ½åŠ›ï¼Œç”±å·¥å…·ç±»æŒ‰å›ºå®šé¡ºåºæ‰§è¡Œ</strong>ã€‚</p>
<ul>
<li><strong>Supplier&lt;R&gt;  dbQueryFunc</strong> ï¼šæ•°æ®åº“æŸ¥è¯¢æ–¹æ³•ï¼Œè¿”å›æŸ¥è¯¢çš„ç»“æœï¼›</li>
<li><strong>Function&lt;T, R&gt;  computeFunc</strong>ï¼šå®æ—¶è®¡ç®—æ–¹æ³•ï¼Œæ¥å—å‚æ•°ï¼Œè¿”å›è®¡ç®—çš„ç»“æœï¼›</li>
<li><strong>Consumer&lt;R&gt;  dbSaveFunc</strong>ï¼šä¿å­˜ç»“æœåˆ°æ•°æ®åº“çš„æ–¹æ³•ï¼›</li>
</ul>
<p>æµç¨‹ç”±å·¥å…·ç±»ç»Ÿä¸€ç¼–æ’ï¼Œä¸šåŠ¡æ–¹åªè´Ÿè´£æä¾›è¿™äº› Lambdaï¼Œä»è€Œï¼š</p>
<ul>
<li>å‡å°‘é‡å¤çš„ if-else å’Œ null åˆ¤æ–­</li>
<li>ç»Ÿä¸€æ—¥å¿—ï¼ˆå¦‚ã€ŒDB æ— æ•°æ®ï¼Œå®æ—¶è®¡ç®—ã€ã€Œç¼“å­˜å’Œ DB å‡æ— æ•°æ®ï¼Œå®æ—¶è®¡ç®—ã€ï¼‰</li>
<li>ä¿è¯ã€Œå…ˆå†™ DB å†å†™ Redisã€ç­‰é¡ºåºï¼Œé™ä½å‡ºé”™æ¦‚ç‡</li>
</ul>
<hr/>
<h2 data-id="heading-2">ä¸‰ã€å…³é”®å®ç°</h2>
<p><strong>æµç¨‹ç®€è¿°ï¼š</strong></p>
<ol>
<li><strong>è¯» Redis</strong>ï¼šç”¨ <code>cacheKeyFunc.get()</code> å¾—åˆ° keyï¼ŒæŒ‰ <code>resultType</code> ååºåˆ—åŒ–ï¼›å‘½ä¸­åˆ™ç›´æ¥è¿”å›</li>
<li><strong>è¯» DB</strong>ï¼šè°ƒç”¨ <code>dbQueryFunc.get()</code>ï¼›è‹¥æœ‰ç»“æœï¼Œåˆ™å†™å…¥ Redisï¼ˆå¸¦è¿‡æœŸæ—¶é—´ï¼‰å¹¶è¿”å›</li>
<li><strong>å®æ—¶è®¡ç®—</strong>ï¼šè°ƒç”¨ <code>computeFunc.apply(param)</code>ï¼Œparam ç”± <code>paramFunc</code> æä¾›</li>
<li><strong>å†™å›</strong>ï¼šè‹¥ç»“æœéç©ºï¼Œå…ˆ <code>dbSaveFunc.accept(result)</code> å†™ DBï¼Œå†å†™ Redisï¼›</li>
</ol>
<p><strong>æ–¹æ³•ç­¾åï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> &lt;T, R&gt; R <span class="hljs-title function_">execute</span><span class="hljs-params">(
    Supplier&lt;String&gt; cacheKeyFunc,    // ç¼“å­˜ key
    Long cacheExpireSeconds,          // è¿‡æœŸæ—¶é—´ï¼ˆç§’ï¼‰
    Supplier&lt;R&gt; dbQueryFunc,          // ä»æ•°æ®åº“æŸ¥è¯¢ç»“æœçš„æ–¹æ³•
    Function&lt;T, R&gt; computeFunc,       // å®æ—¶è®¡ç®—çš„æ–¹æ³•
    Supplier&lt;T&gt; paramFunc,            // è·å–å‚æ•°å€¼çš„æ–¹æ³•ï¼Œè·å–çš„å‚æ•°ä¼ é€’ç»™computeFunc
    Consumer&lt;R&gt; dbSaveFunc,           // ä¿å­˜ç»“æœåˆ°æ•°æ®åº“çš„æ–¹æ³•
    TypeReference&lt;R&gt; resultType       // ç”¨äº Redis ååºåˆ—åŒ–
)</span>
</code></pre>
<p><strong>è¦ç‚¹ï¼š</strong></p>
<ul>
<li><code>TypeReference&lt;R&gt;</code> è§£å†³æ³›å‹ <code>R</code> åœ¨ JSON ååºåˆ—åŒ–æ—¶çš„ç±»å‹æ“¦é™¤é—®é¢˜</li>
<li>å†™å›é¡ºåºå›ºå®šä¸ºï¼š<strong>å…ˆ DBï¼Œå Redis</strong>ï¼Œé¿å…ç¼“å­˜ä¸ DB ä¸ä¸€è‡´</li>
</ul>
<p><strong>æµç¨‹ç¤ºæ„ï¼š</strong></p>
<pre><code class="hljs">Redis + DB + è®¡ç®—ï¼š
  è¯» Redis â†’ å‘½ä¸­åˆ™è¿”å›
  â†’ æœªå‘½ä¸­ï¼šè¯» DB â†’ æœ‰åˆ™å†™ Redis å¹¶è¿”å›
  â†’ ä»æ— ï¼šå–å‚æ•° â†’ å®æ—¶è®¡ç®— â†’ å†™ DB â†’ å†™ Redis â†’ è¿”å›
</code></pre>
<p><strong>å…³é”®ä»£ç </strong></p>
<pre><code class="hljs language-scss" lang="scss">public static &lt;T, R&gt; R <span class="hljs-built_in">execute</span>(Supplier&lt;String&gt; cacheKeyFunc,
                               Long cacheExpireSeconds,
                               Supplier&lt;R&gt; dbQueryFunc,
                               Function&lt;T, R&gt; computeFunc,
                               Supplier&lt;T&gt; paramFunc,
                               Consumer&lt;R&gt; dbSaveFunc,
                               TypeReference&lt;R&gt; resultType) {
    T param = Objects<span class="hljs-selector-class">.nonNull</span>(paramFunc) ? paramFunc<span class="hljs-selector-class">.get</span>() : null;   
	if (Objects.isNull(cacheKeyFunc) || Objects<span class="hljs-selector-class">.isNull</span>(resultType)) {
        throw new <span class="hljs-built_in">RuntimeException</span>("cacheKeyFuncå’ŒresultTypeä¸èƒ½ä¸ºç©º"); 
    }
    String cacheKey = cacheKeyFunc<span class="hljs-selector-class">.get</span>();
	if (StringUtils.isBlank(cacheKey)) {
		throw new <span class="hljs-built_in">RuntimeException</span>("ç¼“å­˜é”®ä¸èƒ½ä¸ºç©º"); 
	}

    <span class="hljs-comment">// 1. å…ˆè¯» Redis</span>
    R result = RedisUtils<span class="hljs-selector-class">.queryForObj</span>(cacheKey, resultType);
    if (Objects.nonNull(result)) return result;

    <span class="hljs-comment">// 2. è¯» DB</span>
    result = dbQueryFunc<span class="hljs-selector-class">.get</span>();
    if (Objects.nonNull(result)) {
        <span class="hljs-comment">//ä¿å­˜åˆ°redis</span>
        RedisUtils<span class="hljs-selector-class">.saveObj</span>(cacheKey, JSON.toJSONString(result), cacheExpireSeconds, TimeUnit<span class="hljs-selector-class">.SECONDS</span>);
        return result;
    }

    <span class="hljs-comment">// 3. æœªæŸ¥è¯¢åˆ°æ•°æ®ï¼Œæ‰§è¡Œè®¡ç®—é€»è¾‘</span>
    log<span class="hljs-selector-class">.info</span>("ç¼“å­˜å’ŒDBå‡æ— æ•°æ®ï¼Œå®æ—¶è®¡ç®—æ•°æ®");
    result = computeFunc<span class="hljs-selector-class">.apply</span>(param);

    <span class="hljs-comment">// 4. å…ˆä¿å­˜åˆ° DBï¼Œå†ä¿å­˜åˆ° Redis</span>
    if (Objects.nonNull(result)) {
        dbSaveFunc<span class="hljs-selector-class">.accept</span>(result);
        RedisUtils<span class="hljs-selector-class">.saveObj</span>(cacheKey, JSON.toJSONString(result), cacheExpireSeconds, TimeUnit<span class="hljs-selector-class">.SECONDS</span>);
    } else {
        log<span class="hljs-selector-class">.info</span>("è®¡ç®—ç»“æœä¸ºç©ºï¼Œæ— éœ€ä¿å­˜");
    }

    return result;
}
</code></pre>
<p>å¤‡æ³¨ï¼šå…¶ä¸­çš„RedisUtilsæ˜¯æˆ‘å°è£…çš„ä¸€ä¸ªredisæ“ä½œå·¥å…·ç±»ï¼Œæä¾›äº†ç®€åŒ–äº†redisæ“ä½œçš„æ–¹æ³•ï¼›</p>
<hr/>
<h2 data-id="heading-3">å››ã€ä½¿ç”¨ç¤ºä¾‹</h2>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ç¤ºä¾‹ï¼šå¸¦ Redis ç¼“å­˜çš„ç”¨æˆ·ç»Ÿè®¡æŸ¥è¯¢</span>
<span class="hljs-type">UserStat</span> <span class="hljs-variable">stat</span> <span class="hljs-operator">=</span> QueryProcessUtils.execute(
    () -&gt; <span class="hljs-string">"user:stat:"</span> + userId,                            <span class="hljs-comment">// cache key</span>
    <span class="hljs-number">3600L</span>,                                                   <span class="hljs-comment">// è¿‡æœŸ 1 å°æ—¶</span>
    () -&gt; userStatMapper.selectByUserId(userId),
    (userId) -&gt; userService.aggregateStat(userId),
    () -&gt; userId,
    (result) -&gt; userStatMapper.insert(result),
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">TypeReference</span>&lt;UserStat&gt;() {}
);
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vue3 å­ä¼ çˆ¶å…¨è§£æï¼šä»åŸºç¡€ç”¨æ³•åˆ°å®æˆ˜é¿å‘]]></title>    <link>https://juejin.cn/post/7605859660612108322</link>    <guid>https://juejin.cn/post/7605859660612108322</guid>    <pubDate>2026-02-13T06:17:51.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605859660612108322" data-draft-id="7605810996125581346" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vue3 å­ä¼ çˆ¶å…¨è§£æï¼šä»åŸºç¡€ç”¨æ³•åˆ°å®æˆ˜é¿å‘"/> <meta itemprop="keywords" content="å‰ç«¯,Vue.js,é¢è¯•"/> <meta itemprop="datePublished" content="2026-02-13T06:17:51.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸æƒ³ç§ƒå¤´çš„ç¨‹åºå‘˜"/> <meta itemprop="url" content="https://juejin.cn/user/2754702534251820"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vue3 å­ä¼ çˆ¶å…¨è§£æï¼šä»åŸºç¡€ç”¨æ³•åˆ°å®æˆ˜é¿å‘
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2754702534251820/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸æƒ³ç§ƒå¤´çš„ç¨‹åºå‘˜
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-13T06:17:51.000Z" title="Fri Feb 13 2026 06:17:51 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ Vue3 å¼€å‘ä¸­ï¼Œç»„ä»¶é€šä¿¡æ˜¯ç»•ä¸å¼€çš„æ ¸å¿ƒåœºæ™¯ï¼Œè€Œå­ä¼ çˆ¶ä½œä¸ºæœ€åŸºç¡€ã€æœ€å¸¸ç”¨çš„é€šä¿¡æ–¹å¼ä¹‹ä¸€ï¼Œæ›´æ˜¯æ–°æ‰‹å…¥é—¨å¿…æŒæ¡çš„çŸ¥è¯†ç‚¹ã€‚ä¸åŒäº Vue2 çš„ <code>$emit</code> å†™æ³•ï¼ŒVue3 ç»„åˆå¼ APIï¼ˆ<code>&lt;script setup&gt;</code>ï¼‰ç®€åŒ–äº†å­ä¼ çˆ¶çš„å®ç°é€»è¾‘ï¼Œä½†ä¹Ÿæœ‰ä¸å°‘ç»†èŠ‚å’Œè¿›é˜¶æŠ€å·§éœ€è¦æ³¨æ„ã€‚</p>
<p>æœ¬æ–‡å°†æŠ›å¼€ TypeScriptï¼Œç”¨æœ€é€šä¿—çš„è¯­è¨€ + å¯ç›´æ¥å¤åˆ¶çš„å®æˆ˜ä»£ç ï¼Œä»åŸºç¡€ç”¨æ³•ã€è¿›é˜¶æŠ€å·§ã€å¸¸è§åœºæ™¯åˆ°é¿å‘æŒ‡å—ï¼Œå…¨æ–¹ä½è®²è§£ Vue3 å­ä¼ çˆ¶ï¼Œæ–°æ‰‹çœ‹å®Œå°±èƒ½ä¸Šæ‰‹ï¼Œè€æ‰‹ä¹Ÿèƒ½æŸ¥æ¼è¡¥ç¼ºã€‚</p>
<h2 data-id="heading-0">ä¸€ã€æ ¸å¿ƒåŸç†ï¼šå­ç»„ä»¶è§¦å‘äº‹ä»¶ï¼Œçˆ¶ç»„ä»¶ç›‘å¬äº‹ä»¶</h2>
<p>Vue3 å­ä¼ çˆ¶çš„æ ¸å¿ƒé€»è¾‘å’Œ Vue2 ä¸€è‡´ï¼š<strong>å­ç»„ä»¶é€šè¿‡è§¦å‘è‡ªå®šä¹‰äº‹ä»¶ï¼Œå°†æ•°æ®ä¼ é€’ç»™çˆ¶ç»„ä»¶ï¼›çˆ¶ç»„ä»¶é€šè¿‡ç›‘å¬è¯¥è‡ªå®šä¹‰äº‹ä»¶ï¼Œæ¥æ”¶å­ç»„ä»¶ä¼ é€’çš„æ•°æ®</strong>ã€‚</p>
<p>å…³é”®åŒºåˆ«åœ¨äºï¼šVue3 <code>&lt;script setup&gt;</code> ä¸­ï¼Œæ— éœ€é€šè¿‡ <code>this.$emit</code> è§¦å‘äº‹ä»¶ï¼Œè€Œæ˜¯é€šè¿‡ <code>defineEmits</code> å£°æ˜äº‹ä»¶åï¼Œç›´æ¥è°ƒç”¨ emit å‡½æ•°å³å¯ï¼Œè¯­æ³•æ›´ç®€æ´ã€æ›´ç›´è§‚ã€‚</p>
<p>å…ˆè®°ä½æ ¸å¿ƒæµç¨‹ï¼Œå†çœ‹å…·ä½“å®ç°ï¼š</p>
<ol>
<li>å­ç»„ä»¶ï¼šç”¨ <code>defineEmits</code> å£°æ˜è¦è§¦å‘çš„è‡ªå®šä¹‰äº‹ä»¶ï¼ˆå¯é€‰ä½†æ¨èï¼‰ï¼›</li>
<li>å­ç»„ä»¶ï¼šåœ¨éœ€è¦ä¼ å€¼çš„åœ°æ–¹ï¼ˆå¦‚ç‚¹å‡»äº‹ä»¶ã€æ¥å£å›è°ƒï¼‰ï¼Œè°ƒç”¨ <code>emit('äº‹ä»¶å', è¦ä¼ é€’çš„æ•°æ®)</code>ï¼›</li>
<li>çˆ¶ç»„ä»¶ï¼šåœ¨ä½¿ç”¨å­ç»„ä»¶çš„åœ°æ–¹ï¼Œé€šè¿‡ <code>@äº‹ä»¶å="å¤„ç†å‡½æ•°"</code> ç›‘å¬äº‹ä»¶ï¼›</li>
<li>çˆ¶ç»„ä»¶ï¼šåœ¨å¤„ç†å‡½æ•°ä¸­ï¼Œæ¥æ”¶å­ç»„ä»¶ä¼ é€’çš„æ•°æ®å¹¶ä½¿ç”¨ã€‚</li>
</ol>
<h2 data-id="heading-1">äºŒã€åŸºç¡€ç”¨æ³•ï¼šæœ€ç®€æ´çš„å­ä¼ çˆ¶å®ç°ï¼ˆå¿…å­¦ï¼‰</h2>
<p>æˆ‘ä»¬ç”¨ä¸€ä¸ªã€Œå­ç»„ä»¶è¾“å…¥å†…å®¹ï¼Œçˆ¶ç»„ä»¶å®æ—¶æ˜¾ç¤ºã€çš„ç®€å•æ¡ˆä¾‹ï¼Œè®²è§£åŸºç¡€ç”¨æ³•ï¼Œä»£ç å¯ç›´æ¥å¤åˆ¶åˆ°é¡¹ç›®ä¸­è¿è¡Œã€‚</p>
<h3 data-id="heading-2">1. å­ç»„ä»¶ï¼ˆChild.vueï¼‰ï¼šå£°æ˜äº‹ä»¶ + è§¦å‘äº‹ä»¶</h3>
<pre><code class="hljs language-js" lang="js">&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"child"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h4</span>&gt;</span>æˆ‘æ˜¯å­ç»„ä»¶<span class="hljs-tag">&lt;/<span class="hljs-name">h4</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- è¾“å…¥æ¡†è¾“å…¥å†…å®¹ï¼Œè§¦å‘inputäº‹ä»¶ï¼Œä¼ é€’è¾“å…¥å€¼ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> 
      <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> 
      <span class="hljs-attr">v-model</span>=<span class="hljs-string">"childInput"</span> 
      @<span class="hljs-attr">input</span>=<span class="hljs-string">"handleInput"</span>
      <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"è¯·è¾“å…¥è¦ä¼ é€’ç»™çˆ¶ç»„ä»¶çš„å†…å®¹"</span>
    /&gt;</span>
    <span class="hljs-comment">&lt;!-- æŒ‰é’®ç‚¹å‡»ï¼Œä¼ é€’å›ºå®šæ•°æ® --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"handleClick"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"margin-top: 10px;"</span>&gt;</span>
      ç‚¹å‡»å‘çˆ¶ç»„ä»¶ä¼ å€¼
    <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/template&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-comment">// 1. å£°æ˜è¦è§¦å‘çš„è‡ªå®šä¹‰äº‹ä»¶ï¼ˆæ•°ç»„å½¢å¼ï¼Œå…ƒç´ æ˜¯äº‹ä»¶åï¼‰</span>
<span class="hljs-comment">// å¯é€‰ï¼Œä½†æ¨èå£°æ˜ï¼šå¢å¼ºä»£ç å¯è¯»æ€§ï¼ŒIDEä¼šæœ‰è¯­æ³•æç¤ºï¼Œé¿å…æ‹¼å†™é”™è¯¯</span>
<span class="hljs-keyword">const</span> emit = <span class="hljs-title function_">defineEmits</span>([<span class="hljs-string">'inputChange'</span>, <span class="hljs-string">'btnClick'</span>])

<span class="hljs-comment">// å­ç»„ä»¶å†…éƒ¨æ•°æ®</span>
<span class="hljs-keyword">const</span> childInput = <span class="hljs-title function_">ref</span>(<span class="hljs-string">''</span>)

<span class="hljs-comment">// è¾“å…¥æ¡†å˜åŒ–æ—¶ï¼Œè§¦å‘äº‹ä»¶å¹¶ä¼ é€’è¾“å…¥å€¼</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleInput</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-comment">// 2. è§¦å‘äº‹ä»¶ï¼šç¬¬ä¸€ä¸ªå‚æ•°æ˜¯äº‹ä»¶åï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯è¦ä¼ é€’çš„æ•°æ®ï¼ˆå¯é€‰ï¼Œå¯å¤šä¸ªï¼‰</span>
  <span class="hljs-title function_">emit</span>(<span class="hljs-string">'inputChange'</span>, childInput.<span class="hljs-property">value</span>)
}

<span class="hljs-comment">// æŒ‰é’®ç‚¹å‡»æ—¶ï¼Œè§¦å‘äº‹ä»¶å¹¶ä¼ é€’å›ºå®šå¯¹è±¡</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleClick</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-title function_">emit</span>(<span class="hljs-string">'btnClick'</span>, {
    <span class="hljs-attr">name</span>: <span class="hljs-string">'å­ç»„ä»¶'</span>,
    <span class="hljs-attr">msg</span>: <span class="hljs-string">'è¿™æ˜¯å­ç»„ä»¶é€šè¿‡ç‚¹å‡»æŒ‰é’®ä¼ é€’çš„æ•°æ®'</span>
  })
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
</code></pre>
<h3 data-id="heading-3">2. çˆ¶ç»„ä»¶ï¼ˆParent.vueï¼‰ï¼šç›‘å¬äº‹ä»¶ + æ¥æ”¶æ•°æ®</h3>
<pre><code class="hljs language-js" lang="js">&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"parent"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>æˆ‘æ˜¯çˆ¶ç»„ä»¶<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>å­ç»„ä»¶è¾“å…¥çš„å†…å®¹ï¼š{{ parentMsg }}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>å­ç»„ä»¶ç‚¹å‡»ä¼ é€’çš„æ•°æ®ï¼š{{ parentData }}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- 3. ç›‘å¬å­ç»„ä»¶å£°æ˜çš„è‡ªå®šä¹‰äº‹ä»¶ï¼Œç»‘å®šå¤„ç†å‡½æ•° --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">Child</span> 
      @<span class="hljs-attr">inputChange</span>=<span class="hljs-string">"handleInputChange"</span>
      @<span class="hljs-attr">btnClick</span>=<span class="hljs-string">"handleBtnClick"</span>
    /&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/template&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-comment">// å¼•å…¥å­ç»„ä»¶</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Child</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./Child.vue'</span>
<span class="hljs-keyword">import</span> { ref, reactive } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>

<span class="hljs-comment">// çˆ¶ç»„ä»¶æ¥æ”¶æ•°æ®çš„å®¹å™¨</span>
<span class="hljs-keyword">const</span> parentMsg = <span class="hljs-title function_">ref</span>(<span class="hljs-string">''</span>)
<span class="hljs-keyword">const</span> parentData = <span class="hljs-title function_">reactive</span>({
  <span class="hljs-attr">name</span>: <span class="hljs-string">''</span>,
  <span class="hljs-attr">msg</span>: <span class="hljs-string">''</span>
})

<span class="hljs-comment">// 4. å¤„ç†å­ç»„ä»¶è§¦å‘çš„inputChangeäº‹ä»¶ï¼Œæ¥æ”¶ä¼ é€’çš„æ•°æ®</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleInputChange</span> = (<span class="hljs-params">val</span>) =&gt; {
  <span class="hljs-comment">// val å°±æ˜¯å­ç»„ä»¶emitä¼ é€’è¿‡æ¥çš„å€¼ï¼ˆchildInput.valueï¼‰</span>
  parentMsg.<span class="hljs-property">value</span> = val
}

<span class="hljs-comment">// å¤„ç†å­ç»„ä»¶è§¦å‘çš„btnClickäº‹ä»¶ï¼Œæ¥æ”¶ä¼ é€’çš„å¯¹è±¡</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleBtnClick</span> = (<span class="hljs-params">data</span>) =&gt; {
  <span class="hljs-comment">// data æ˜¯å­ç»„ä»¶ä¼ é€’çš„å¯¹è±¡ï¼Œç›´æ¥è§£æ„æˆ–èµ‹å€¼å³å¯</span>
  parentData.<span class="hljs-property">name</span> = data.<span class="hljs-property">name</span>
  parentData.<span class="hljs-property">msg</span> = data.<span class="hljs-property">msg</span>
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
</code></pre>
<h3 data-id="heading-4">3. æ ¸å¿ƒç»†èŠ‚è¯´æ˜</h3>
<ul>
<li><code>defineEmits</code> æ˜¯ Vue3 å†…ç½®çš„å®ï¼Œæ— éœ€å¯¼å…¥ï¼Œå¯ç›´æ¥ä½¿ç”¨ï¼›</li>
<li>emit å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°å¿…é¡»å’Œ <code>defineEmits</code> ä¸­å£°æ˜çš„äº‹ä»¶åä¸€è‡´ï¼ˆå¤§å°å†™æ•æ„Ÿï¼‰ï¼Œå¦åˆ™çˆ¶ç»„ä»¶æ— æ³•ç›‘å¬åˆ°ï¼›</li>
<li>emit å¯ä¼ é€’å¤šä¸ªå‚æ•°ï¼Œæ¯”å¦‚ <code>emit('event', val1, val2)</code>ï¼Œçˆ¶ç»„ä»¶å¤„ç†å‡½æ•°å¯å¯¹åº”æ¥æ”¶ <code>(val1, val2) =&gt; {}</code>ï¼›</li>
<li>çˆ¶ç»„ä»¶ç›‘å¬äº‹ä»¶æ—¶ï¼Œå¯ä½¿ç”¨ <code>@äº‹ä»¶å</code>ï¼ˆç®€å†™ï¼‰æˆ– <code>v-on:äº‹ä»¶å</code>ï¼ˆå®Œæ•´å†™æ³•ï¼‰ï¼Œæ•ˆæœä¸€è‡´ã€‚</li>
</ul>
<h2 data-id="heading-5">ä¸‰ã€è¿›é˜¶ç”¨æ³•ï¼šä¼˜åŒ–å­ä¼ çˆ¶çš„ä½“éªŒï¼ˆå®æˆ˜å¸¸ç”¨ï¼‰</h2>
<p>åŸºç¡€ç”¨æ³•èƒ½æ»¡è¶³ç®€å•åœºæ™¯ï¼Œä½†åœ¨å®é™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬è¿˜ä¼šé‡åˆ°ã€Œäº‹ä»¶æ ¡éªŒã€ã€ŒåŒå‘ç»‘å®šã€ã€Œäº‹ä»¶å‘½åè§„èŒƒã€ç­‰éœ€æ±‚ï¼Œè¿™éƒ¨åˆ†è¿›é˜¶æŠ€å·§èƒ½è®©ä½ çš„ä»£ç æ›´è§„èŒƒã€æ›´å¥å£®ã€‚</p>
<h3 data-id="heading-6">1. äº‹ä»¶æ ¡éªŒï¼šé™åˆ¶å­ç»„ä»¶ä¼ é€’çš„æ•°æ®ç±»å‹</h3>
<p>é€šè¿‡ <code>defineEmits</code> çš„å¯¹è±¡å½¢å¼ï¼Œå¯å¯¹äº‹ä»¶ä¼ é€’çš„æ•°æ®è¿›è¡Œç±»å‹æ ¡éªŒï¼Œé¿å…å­ç»„ä»¶ä¼ é€’é”™è¯¯ç±»å‹çš„æ•°æ®ï¼Œæå‡ä»£ç å¯é æ€§ï¼ˆç±»ä¼¼ props æ ¡éªŒï¼‰ã€‚</p>
<pre><code class="hljs language-js" lang="js">&lt;script setup&gt;
<span class="hljs-comment">// å¯¹è±¡å½¢å¼å£°æ˜äº‹ä»¶ï¼Œkeyæ˜¯äº‹ä»¶åï¼Œvalueæ˜¯æ ¡éªŒå‡½æ•°ï¼ˆå‚æ•°æ˜¯å­ç»„ä»¶ä¼ é€’çš„æ•°æ®ï¼Œè¿”å›booleanï¼‰</span>
<span class="hljs-keyword">const</span> emit = <span class="hljs-title function_">defineEmits</span>({
  <span class="hljs-comment">// æ ¡éªŒinputChangeäº‹ä»¶ä¼ é€’çš„æ•°æ®å¿…é¡»æ˜¯å­—ç¬¦ä¸²</span>
  <span class="hljs-attr">inputChange</span>: <span class="hljs-function">(<span class="hljs-params">val</span>) =&gt;</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">typeof</span> val === <span class="hljs-string">'string'</span>
  },
  <span class="hljs-comment">// æ ¡éªŒbtnClickäº‹ä»¶ä¼ é€’çš„æ•°æ®å¿…é¡»æ˜¯å¯¹è±¡ï¼Œä¸”åŒ…å«nameå’Œmsgå±æ€§</span>
  <span class="hljs-attr">btnClick</span>: <span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">typeof</span> data === <span class="hljs-string">'object'</span> &amp;&amp; <span class="hljs-string">'name'</span> <span class="hljs-keyword">in</span> data &amp;&amp; <span class="hljs-string">'msg'</span> <span class="hljs-keyword">in</span> data
  }
})

<span class="hljs-comment">// è‹¥ä¼ é€’çš„æ•°æ®ä¸ç¬¦åˆæ ¡éªŒï¼Œæ§åˆ¶å°ä¼šæŠ¥è­¦å‘Šï¼ˆä¸å½±å“ä»£ç è¿è¡Œï¼Œä»…æç¤ºï¼‰</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleInput</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-title function_">emit</span>(<span class="hljs-string">'inputChange'</span>, <span class="hljs-number">123</span>) <span class="hljs-comment">// ä¼ é€’æ•°å­—ï¼Œä¸ç¬¦åˆæ ¡éªŒï¼Œæ§åˆ¶å°æŠ¥è­¦å‘Š</span>
}
&lt;/script&gt;
</code></pre>
<h3 data-id="heading-7">2. åŒå‘ç»‘å®šï¼šv-model ç®€åŒ–å­ä¼ çˆ¶ï¼ˆé«˜é¢‘åœºæ™¯ï¼‰</h3>
<p>å¾ˆå¤šæ—¶å€™ï¼Œå­ä¼ çˆ¶æ˜¯ä¸ºäº†ã€Œä¿®æ”¹çˆ¶ç»„ä»¶çš„æ•°æ®ã€ï¼Œæ¯”å¦‚è¡¨å•ç»„ä»¶ã€å¼€å…³ç»„ä»¶ï¼Œè¿™æ—¶å¯ä½¿ç”¨ <code>v-model</code> ç®€åŒ–ä»£ç ï¼Œå®ç°çˆ¶å­ç»„ä»¶åŒå‘ç»‘å®šï¼Œæ— éœ€æ‰‹åŠ¨å£°æ˜äº‹ä»¶å’Œå¤„ç†å‡½æ•°ã€‚</p>
<p>Vue3 ä¸­ï¼Œ<code>v-model</code> æœ¬è´¨æ˜¯ã€Œè¯­æ³•ç³–ã€ï¼Œç­‰ä»·äº <code>:modelValue="xxx" @update:modelValue="xxx = $event"</code>ã€‚</p>
<h4 data-id="heading-8">ä¼˜åŒ–æ¡ˆä¾‹ï¼šå­ç»„ä»¶å¼€å…³ï¼Œçˆ¶ç»„ä»¶æ˜¾ç¤ºçŠ¶æ€</h4>
<pre><code class="hljs language-js" lang="js">&lt;!-- å­ç»„ä»¶ï¼ˆ<span class="hljs-title class_">Child</span>.<span class="hljs-property">vue</span>ï¼‰ --&gt;
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"child"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h4</span>&gt;</span>å­ç»„ä»¶å¼€å…³<span class="hljs-tag">&lt;/<span class="hljs-name">h4</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"handleSwitch"</span>&gt;</span>
      {{ isOpen ? 'å…³é—­' : 'æ‰“å¼€' }}
    <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span>

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-comment">// 1. æ¥æ”¶çˆ¶ç»„ä»¶é€šè¿‡v-modelä¼ é€’çš„modelValue</span>
<span class="hljs-keyword">const</span> props = <span class="hljs-title function_">defineProps</span>([<span class="hljs-string">'modelValue'</span>])
<span class="hljs-comment">// 2. å£°æ˜update:modelValueäº‹ä»¶ï¼ˆå›ºå®šå‘½åï¼Œä¸å¯ä¿®æ”¹ï¼‰</span>
<span class="hljs-keyword">const</span> emit = <span class="hljs-title function_">defineEmits</span>([<span class="hljs-string">'update:modelValue'</span>])

<span class="hljs-comment">// å­ç»„ä»¶å†…éƒ¨ä½¿ç”¨çˆ¶ç»„ä»¶ä¼ é€’çš„å€¼</span>
<span class="hljs-keyword">const</span> isOpen = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> props.<span class="hljs-property">modelValue</span>)

<span class="hljs-comment">// å¼€å…³åˆ‡æ¢ï¼Œè§¦å‘äº‹ä»¶ï¼Œä¿®æ”¹çˆ¶ç»„ä»¶æ•°æ®</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleSwitch</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-title function_">emit</span>(<span class="hljs-string">'update:modelValue'</span>, !isOpen.<span class="hljs-property">value</span>)
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
</code></pre>
<pre><code class="hljs language-js" lang="js">&lt;!-- çˆ¶ç»„ä»¶ï¼ˆ<span class="hljs-title class_">Parent</span>.<span class="hljs-property">vue</span>ï¼‰ --&gt;
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"parent"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>çˆ¶ç»„ä»¶ï¼š{{ isSwitchOpen ? 'å¼€å…³å·²æ‰“å¼€' : 'å¼€å…³å·²å…³é—­' }}<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- ç›´æ¥ä½¿ç”¨v-modelï¼Œæ— éœ€æ‰‹åŠ¨ç›‘å¬äº‹ä»¶ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">Child</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"isSwitchOpen"</span> /&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span>

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Child</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./Child.vue'</span>
<span class="hljs-keyword">import</span> { ref } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>

<span class="hljs-keyword">const</span> isSwitchOpen = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">false</span>)
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
</code></pre>
<h4 data-id="heading-9">æ‰©å±•ï¼šå¤šä¸ª v-model åŒå‘ç»‘å®š</h4>
<p>Vue3 æ”¯æŒç»™åŒä¸€ä¸ªå­ç»„ä»¶ç»‘å®šå¤šä¸ª <code>v-model</code>ï¼Œåªéœ€ç»™ <code>v-model</code> åŠ åç¼€ï¼Œå¯¹åº”å­ç»„ä»¶çš„<code>props</code> å’Œ <code>emit</code> å³å¯ã€‚</p>
<pre><code class="hljs language-js" lang="js">&lt;!-- çˆ¶ç»„ä»¶ --&gt;
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Child</span> 
  <span class="hljs-attr">v-model:name</span>=<span class="hljs-string">"parentName"</span> 
  <span class="hljs-attr">v-model:age</span>=<span class="hljs-string">"parentAge"</span> 
/&gt;</span></span>

&lt;!-- å­ç»„ä»¶ --&gt;
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-comment">// æ¥æ”¶å¤šä¸ªv-modelä¼ é€’çš„props</span>
<span class="hljs-keyword">const</span> props = <span class="hljs-title function_">defineProps</span>([<span class="hljs-string">'name'</span>, <span class="hljs-string">'age'</span>])
<span class="hljs-comment">// å£°æ˜å¯¹åº”çš„updateäº‹ä»¶</span>
<span class="hljs-keyword">const</span> emit = <span class="hljs-title function_">defineEmits</span>([<span class="hljs-string">'update:name'</span>, <span class="hljs-string">'update:age'</span>])

<span class="hljs-comment">// è§¦å‘äº‹ä»¶ä¿®æ”¹çˆ¶ç»„ä»¶æ•°æ®</span>
<span class="hljs-title function_">emit</span>(<span class="hljs-string">'update:name'</span>, <span class="hljs-string">'æ–°åå­—'</span>)
<span class="hljs-title function_">emit</span>(<span class="hljs-string">'update:age'</span>, <span class="hljs-number">25</span>)
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
</code></pre>
<h3 data-id="heading-10">3. äº‹ä»¶å‘½åè§„èŒƒï¼šæå‡ä»£ç å¯è¯»æ€§</h3>
<p>åœ¨å®é™…å¼€å‘ä¸­ï¼Œéµå¾ªç»Ÿä¸€çš„äº‹ä»¶å‘½åè§„èŒƒï¼Œèƒ½è®©å›¢é˜Ÿåä½œæ›´é«˜æ•ˆï¼Œæ¨èä»¥ä¸‹è§„èŒƒï¼š</p>
<ul>
<li>äº‹ä»¶åé‡‡ç”¨ã€Œkebab-case çŸ­æ¨ªçº¿å‘½åã€ï¼ˆå’Œ HTML äº‹ä»¶å‘½åä¸€è‡´ï¼‰ï¼Œæ¯”å¦‚ <code>input-change</code> è€Œé <code>inputChange</code>ï¼›</li>
<li>äº‹ä»¶åè¦è¯­ä¹‰åŒ–ï¼Œä½“ç°äº‹ä»¶çš„ç”¨é€”ï¼Œæ¯”å¦‚ <code>form-submit</code>ï¼ˆè¡¨å•æäº¤ï¼‰ã€<code>delete-click</code>ï¼ˆåˆ é™¤ç‚¹å‡»ï¼‰ï¼›</li>
<li>åŒå‘ç»‘å®šçš„äº‹ä»¶å›ºå®šä¸º <code>update:xxx</code>ï¼Œxxx å¯¹åº” props åï¼Œæ¯”å¦‚ <code>update:name</code>ã€<code>update:visible</code>ã€‚</li>
</ul>
<h2 data-id="heading-11">å››ã€å®æˆ˜åœºæ™¯ï¼šå­ä¼ çˆ¶çš„å¸¸è§åº”ç”¨</h2>
<p>ç»“åˆå®é™…å¼€å‘ä¸­çš„é«˜é¢‘åœºæ™¯ï¼Œç»™å¤§å®¶è¡¥å…… 3 ä¸ªå¸¸ç”¨æ¡ˆä¾‹ï¼Œè¦†ç›–å¤§éƒ¨åˆ†å­ä¼ çˆ¶éœ€æ±‚ã€‚</p>
<h3 data-id="heading-12">åœºæ™¯1ï¼šå­ç»„ä»¶è¡¨å•æäº¤ï¼Œçˆ¶ç»„ä»¶æ¥æ”¶è¡¨å•æ•°æ®</h3>
<pre><code class="hljs language-js" lang="js">&lt;!-- å­ç»„ä»¶ï¼ˆ<span class="hljs-title class_">FormChild</span>.<span class="hljs-property">vue</span>ï¼‰ --&gt;
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-child"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"form.name"</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"è¯·è¾“å…¥å§“å"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"form.age"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"number"</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"è¯·è¾“å…¥å¹´é¾„"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"handleSubmit"</span>&gt;</span>æäº¤è¡¨å•<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span>

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { reactive } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>

<span class="hljs-keyword">const</span> emit = <span class="hljs-title function_">defineEmits</span>([<span class="hljs-string">'form-submit'</span>])

<span class="hljs-keyword">const</span> form = <span class="hljs-title function_">reactive</span>({
  <span class="hljs-attr">name</span>: <span class="hljs-string">''</span>,
  <span class="hljs-attr">age</span>: <span class="hljs-string">''</span>
})

<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleSubmit</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-comment">// è¡¨å•æ ¡éªŒï¼ˆç®€åŒ–ï¼‰</span>
  <span class="hljs-keyword">if</span> (!form.<span class="hljs-property">name</span> || !form.<span class="hljs-property">age</span>) <span class="hljs-keyword">return</span> <span class="hljs-title function_">alert</span>(<span class="hljs-string">'è¯·å¡«å†™å®Œæ•´ä¿¡æ¯'</span>)
  <span class="hljs-comment">// æäº¤è¡¨å•æ•°æ®ç»™çˆ¶ç»„ä»¶</span>
  <span class="hljs-title function_">emit</span>(<span class="hljs-string">'form-submit'</span>, form)
  <span class="hljs-comment">// æäº¤åé‡ç½®è¡¨å•</span>
  form.<span class="hljs-property">name</span> = <span class="hljs-string">''</span>
  form.<span class="hljs-property">age</span> = <span class="hljs-string">''</span>
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
</code></pre>
<h3 data-id="heading-13">åœºæ™¯2ï¼šå­ç»„ä»¶å…³é—­å¼¹çª—ï¼Œçˆ¶ç»„ä»¶æ§åˆ¶å¼¹çª—æ˜¾ç¤º/éšè—</h3>
<pre><code class="hljs language-js" lang="js">&lt;!-- å­ç»„ä»¶ï¼ˆ<span class="hljs-title class_">ModalChild</span>.<span class="hljs-property">vue</span>ï¼‰ --&gt;
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"modal"</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">"visible"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"modal-content"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h4</span>&gt;</span>å­ç»„ä»¶å¼¹çª—<span class="hljs-tag">&lt;/<span class="hljs-name">h4</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"handleClose"</span>&gt;</span>å…³é—­å¼¹çª—<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span>

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">const</span> props = <span class="hljs-title function_">defineProps</span>([<span class="hljs-string">'visible'</span>])
<span class="hljs-keyword">const</span> emit = <span class="hljs-title function_">defineEmits</span>([<span class="hljs-string">'close-modal'</span>])

<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleClose</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-comment">// è§¦å‘å…³é—­äº‹ä»¶ï¼Œé€šçŸ¥çˆ¶ç»„ä»¶éšè—å¼¹çª—</span>
  <span class="hljs-title function_">emit</span>(<span class="hljs-string">'close-modal'</span>)
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
</code></pre>
<h3 data-id="heading-14">åœºæ™¯3ï¼šå­ç»„ä»¶åˆ—è¡¨åˆ é™¤ï¼Œçˆ¶ç»„ä»¶æ›´æ–°åˆ—è¡¨</h3>
<pre><code class="hljs language-js" lang="js">&lt;!-- å­ç»„ä»¶ï¼ˆ<span class="hljs-title class_">ListChild</span>.<span class="hljs-property">vue</span>ï¼‰ --&gt;
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"list-child"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">"item in list"</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">"item.id"</span>&gt;</span>
      {{ item.name }}
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"handleDelete(item.id)"</span>&gt;</span>åˆ é™¤<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span>

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">const</span> props = <span class="hljs-title function_">defineProps</span>([<span class="hljs-string">'list'</span>])
<span class="hljs-keyword">const</span> emit = <span class="hljs-title function_">defineEmits</span>([<span class="hljs-string">'delete-item'</span>])

<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleDelete</span> = (<span class="hljs-params">id</span>) =&gt; {
  <span class="hljs-comment">// ä¼ é€’è¦åˆ é™¤çš„idç»™çˆ¶ç»„ä»¶ï¼Œç”±çˆ¶ç»„ä»¶æ›´æ–°åˆ—è¡¨</span>
  <span class="hljs-title function_">emit</span>(<span class="hljs-string">'delete-item'</span>, id)
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
</code></pre>
<h2 data-id="heading-15">äº”ã€å¸¸è§å‘ç‚¹é¿å‘æŒ‡å—ï¼ˆæ–°æ‰‹å¿…çœ‹ï¼‰</h2>
<p>å¾ˆå¤šæ–°æ‰‹åœ¨å†™å­ä¼ çˆ¶æ—¶ï¼Œä¼šé‡åˆ°ã€Œçˆ¶ç»„ä»¶ç›‘å¬ä¸åˆ°äº‹ä»¶ã€ã€Œæ•°æ®ä¼ é€’å¤±è´¥ã€ç­‰é—®é¢˜ï¼Œä»¥ä¸‹æ˜¯æœ€å¸¸è§çš„ 4 ä¸ªå‘ç‚¹ï¼Œå¸®ä½ å¿«é€Ÿé¿å‘ã€‚</p>
<h3 data-id="heading-16">å‘ç‚¹1ï¼šäº‹ä»¶åå¤§å°å†™ä¸ä¸€è‡´</h3>
<p>å­ç»„ä»¶ <code>emit('inputChange')</code>ï¼Œçˆ¶ç»„ä»¶ <code>@inputchange="handle"</code>ï¼ˆå°å†™ï¼‰ï¼Œä¼šå¯¼è‡´çˆ¶ç»„ä»¶ç›‘å¬ä¸åˆ°äº‹ä»¶ã€‚</p>
<p>è§£å†³æ–¹æ¡ˆï¼šç»Ÿä¸€é‡‡ç”¨ kebab-case å‘½åï¼Œå­ç»„ä»¶ <code>emit('input-change')</code>ï¼Œçˆ¶ç»„ä»¶ <code>@input-change="handle"</code>ã€‚</p>
<h3 data-id="heading-17">å‘ç‚¹2ï¼šå¿˜è®°å£°æ˜äº‹ä»¶ï¼ˆdefineEmitsï¼‰</h3>
<p>å­ç»„ä»¶ç›´æ¥è°ƒç”¨ <code>emit('event')</code>ï¼Œæœªç”¨ <code>defineEmits</code> å£°æ˜äº‹ä»¶ï¼Œè™½ç„¶å¼€å‘ç¯å¢ƒå¯èƒ½ä¸æŠ¥é”™ï¼Œä½†ç”Ÿäº§ç¯å¢ƒå¯èƒ½å‡ºç°å¼‚å¸¸ï¼Œä¸” IDE æ— æç¤ºã€‚</p>
<p>è§£å†³æ–¹æ¡ˆï¼šæ— è®ºäº‹ä»¶æ˜¯å¦éœ€è¦æ ¡éªŒï¼Œéƒ½ç”¨ <code>defineEmits</code> å£°æ˜ï¼ˆæ•°ç»„å½¢å¼å³å¯ï¼‰ã€‚</p>
<h3 data-id="heading-18">å‘ç‚¹3ï¼šä¼ é€’å¤æ‚æ•°æ®ï¼ˆå¯¹è±¡/æ•°ç»„ï¼‰æ—¶ï¼Œçˆ¶ç»„ä»¶ä¿®æ”¹åå½±å“å­ç»„ä»¶</h3>
<p>å­ç»„ä»¶ä¼ é€’å¯¹è±¡/æ•°ç»„ç»™çˆ¶ç»„ä»¶ï¼Œçˆ¶ç»„ä»¶ç›´æ¥ä¿®æ”¹è¯¥æ•°æ®ï¼Œä¼šå½±å“å­ç»„ä»¶ï¼ˆå› ä¸ºå¼•ç”¨ç±»å‹ä¼ é€’çš„æ˜¯åœ°å€ï¼‰ã€‚</p>
<p>è§£å†³æ–¹æ¡ˆï¼šçˆ¶ç»„ä»¶æ¥æ”¶æ•°æ®åï¼Œç”¨ <code>JSON.parse(JSON.stringify(data))</code> æ·±æ‹·è´ï¼Œæˆ–ç”¨ <code>reactive</code> + <code>toRaw</code> å¤„ç†ï¼Œé¿å…ç›´æ¥ä¿®æ”¹åŸå§‹æ•°æ®ã€‚</p>
<h3 data-id="heading-19">å‘ç‚¹4ï¼šv-model åŒå‘ç»‘å®šæ—¶æŠ¥é”™ï¼Œæç¤ºã€ŒmodelValue æœªå®šä¹‰ã€</h3>
<p>åŸå› ï¼šå­ç»„ä»¶æœªæ¥æ”¶ <code>modelValue</code> propsï¼Œæˆ–æœªå£°æ˜ <code>update:modelValue</code> äº‹ä»¶ã€‚</p>
<p>è§£å†³æ–¹æ¡ˆï¼šç¡®ä¿å­ç»„ä»¶ <code>defineProps(['modelValue'])</code> å’Œ <code>defineEmits(['update:modelValue'])</code> éƒ½å£°æ˜ã€‚</p>
<h2 data-id="heading-20">å…­ã€æ€»ç»“ï¼šå­ä¼ çˆ¶æ ¸å¿ƒè¦ç‚¹å›é¡¾</h2>
<p>Vue3 å­ä¼ çˆ¶çš„æ ¸å¿ƒå°±æ˜¯ã€Œäº‹ä»¶è§¦å‘ + äº‹ä»¶ç›‘å¬ã€ï¼Œè®°ä½ä»¥ä¸‹ 3 ä¸ªæ ¸å¿ƒè¦ç‚¹ï¼Œå°±èƒ½åº”å¯¹æ‰€æœ‰åœºæ™¯ï¼š</p>
<ol>
<li>åŸºç¡€å†™æ³•ï¼š<code>defineEmits</code> å£°æ˜äº‹ä»¶ â†’ <code>emit</code> è§¦å‘äº‹ä»¶ â†’ çˆ¶ç»„ä»¶ <code>@äº‹ä»¶å</code> ç›‘å¬ï¼›</li>
<li>è¿›é˜¶ä¼˜åŒ–ï¼šäº‹ä»¶æ ¡éªŒæå‡å¯é æ€§ï¼Œ<code>v-model</code> ç®€åŒ–åŒå‘ç»‘å®šï¼Œéµå¾ª kebab-case å‘½åè§„èŒƒï¼›</li>
<li>é¿å‘å…³é”®ï¼šäº‹ä»¶åå¤§å°å†™ä¸€è‡´ã€å¿…å£°æ˜äº‹ä»¶ã€å¤æ‚æ•°æ®æ·±æ‹·è´ã€v-model å¯¹åº” props å’Œ emit å‘½åæ­£ç¡®ã€‚</li>
</ol>
<p>å­ä¼ çˆ¶æ˜¯ Vue3 ç»„ä»¶é€šä¿¡ä¸­æœ€åŸºç¡€çš„æ–¹å¼ï¼ŒæŒæ¡å®ƒä¹‹åï¼Œå†å­¦ä¹ çˆ¶ä¼ å­ï¼ˆpropsï¼‰ã€è·¨å±‚çº§é€šä¿¡ï¼ˆprovide/injectï¼‰ã€å…¨å±€é€šä¿¡ï¼ˆPiniaï¼‰ä¼šæ›´è½»æ¾ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[AI ç¼–ç¨‹çš„ä¸´ç•Œç‚¹ï¼šå½“ä¸‰å®¶å·¨å¤´åŒæ—¶å®£å¸ƒæˆ‘ä»¬ä¸å†™ä»£ç äº†]]></title>    <link>https://juejin.cn/post/7605816833192067072</link>    <guid>https://juejin.cn/post/7605816833192067072</guid>    <pubDate>2026-02-13T06:20:51.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605816833192067072" data-draft-id="7605810996125630498" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="AI ç¼–ç¨‹çš„ä¸´ç•Œç‚¹ï¼šå½“ä¸‰å®¶å·¨å¤´åŒæ—¶å®£å¸ƒæˆ‘ä»¬ä¸å†™ä»£ç äº†"/> <meta itemprop="keywords" content="AIGC,AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2026-02-13T06:20:51.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å­Ÿå¥AIç¼–ç¨‹"/> <meta itemprop="url" content="https://juejin.cn/user/4212984287073895"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            AI ç¼–ç¨‹çš„ä¸´ç•Œç‚¹ï¼šå½“ä¸‰å®¶å·¨å¤´åŒæ—¶å®£å¸ƒæˆ‘ä»¬ä¸å†™ä»£ç äº†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4212984287073895/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å­Ÿå¥AIç¼–ç¨‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-13T06:20:51.000Z" title="Fri Feb 13 2026 06:20:51 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯å­Ÿå¥ã€‚</p>
<p><strong>æ˜¨å¤© 24 å°æ—¶å†…ï¼Œä¸‰å®¶å…¬å¸åŒæ—¶è¯´äº†åŒä¸€å¥è¯ï¼šæˆ‘ä»¬çš„ä»£ç ï¼ŒåŸºæœ¬ä¸æ˜¯äººå†™çš„äº†ã€‚</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/46b65921c46b4aca9f6452b4c871aae1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f5YGlQUnnvJbnqIs=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771568450&amp;x-signature=jesU9ZmQOBg6tcq3ClSaRO%2BC9dc%3D" alt="" loading="lazy"/></p>
<p>ä¸æ˜¯åª’ä½“ç‚’ä½œã€‚ä¸æ˜¯ PR åŒ…è£…ã€‚æ˜¯ Nvidiaã€OpenAIã€Cognitionã€Anthropicâ€”â€”å››å®¶ç«™åœ¨ AI æœ€å‰æ²¿çš„å…¬å¸ï¼Œå‡ ä¹åŒä¸€æ—¶é—´äº®å‡ºäº†åº•ç‰Œã€‚</p>
<p>è¿™ä»¶äº‹å€¼å¾—æ¯ä¸ªå†™ä»£ç çš„äººåœä¸‹æ¥æƒ³ä¸€æƒ³ã€‚</p>
<hr/>
<h2 data-id="heading-0"><strong>å‘ç”Ÿäº†ä»€ä¹ˆ</strong></h2>
<p>å…ˆæ‘†äº‹å®ã€‚</p>
<p><strong>Nvidia</strong>ï¼šé»„ä»å‹‹å‡ ä¸ªæœˆå‰åœ¨å†…éƒ¨å–Šå‡º"stop coding"ï¼Œè®© 3 ä¸‡åå·¥ç¨‹å¸ˆå…¨é¢æ¢ç”¨ AI ç¼–ç¨‹å·¥å…·ã€‚æœ€æ–°æ•°æ®â€”â€”ä»£ç äº§å‡ºé‡ç¿»äº† 3 å€ã€‚ä¸æ˜¯ 10%ã€20%çš„æå‡ï¼Œæ˜¯ 3 å€ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f66bf95b9407443d8fc4e2e894e33817~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f5YGlQUnnvJbnqIs=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771568450&amp;x-signature=Fz67t3TSyBnv7baK0wksir9DQ%2BQ%3D" alt="" loading="lazy"/></p>
<p><strong>OpenAI</strong>ï¼šå†…éƒ¨å›¢é˜Ÿäº¤ä»˜äº†ä¸€ä¸ªå®Œæ•´äº§å“ï¼Œæ¯ä¸€è¡Œä»£ç éƒ½æ˜¯ AI Agent ç”Ÿæˆçš„ã€‚å·¥ç¨‹å¸ˆå…¨ç¨‹æ²¡å†™ä¸€è¡Œä»£ç ï¼Œåªè´Ÿè´£ Review å’Œç›‘ç£ã€‚å¼€å‘æ•ˆç‡æå‡äº† 10 å€ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c0c3bcedb20042299464c2a82c943c86~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f5YGlQUnnvJbnqIs=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771568450&amp;x-signature=M%2FuiWV8LLK7X2WwynDffREiZE9Y%3D" alt="" loading="lazy"/></p>
<p><strong>Cognition</strong>ï¼ˆåš Devin çš„é‚£å®¶ï¼‰ï¼šè”åˆåˆ›å§‹äºº Scott Wu å‘äº†æ¡æ¨ï¼Œè¯´å…¬å¸è¶…è¿‡ 90%çš„ä»£ç æ˜¯ AI å†™çš„ã€‚ä»–çš„åŸè¯æ˜¯ï¼š"ä½ ç°åœ¨å®é™…éœ€è¦äº²æ‰‹æ•²çš„ä»£ç æœ‰å¤šå°‘ï¼Ÿå¯¹æˆ‘ä»¬æ¥è¯´ï¼Œå¤§æ¦‚ä¸åˆ° 10%ã€‚"</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b92d009fb057444e8a036f3f8fd479d7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f5YGlQUnnvJbnqIs=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771568450&amp;x-signature=xX01GtDWvncvOUBzD1Qun9mjqTQ%3D" alt="" loading="lazy"/></p>
<p><strong>Anthropic</strong>ï¼šé¦–å¸­äº§å“å®˜ Mike Krieger è¯´å¾—æ›´ç›´æ¥â€”â€”"Claude åœ¨å†™ Claudeã€‚Claude çš„äº§å“å’Œ Claude Codeï¼Œå®Œå…¨ç”± Claude è‡ªå·±å†™ã€‚"</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fea252c30fd64adb9f0dd24d601a4095~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f5YGlQUnnvJbnqIs=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771568450&amp;x-signature=o7vvPC0LqSj5%2FV2FD%2FkPmoxkYe4%3D" alt="" loading="lazy"/></p>
<p>å››å®¶å…¬å¸ï¼ŒåŒä¸€ä¸ªç»“è®ºï¼š<strong>ç¨‹åºå‘˜çš„æ ¸å¿ƒå·¥ä½œï¼Œæ­£åœ¨ä»"å†™ä»£ç "å˜æˆ"ä¸å†™ä»£ç "ã€‚</strong></p>
<hr/>
<h2 data-id="heading-1"><strong>è¿™ä¸æ˜¯ç¬¬ä¸€æ¬¡æœ‰äººå–Š"ç‹¼æ¥äº†"</strong></h2>
<p>æˆ‘çŸ¥é“ä½ åœ¨æƒ³ä»€ä¹ˆã€‚</p>
<p>"AI æ›¿ä»£ç¨‹åºå‘˜"è¿™è¯å–Šäº†ä¸‰å¹´äº†ã€‚2023 å¹´ GitHub Copilot å‘å¸ƒçš„æ—¶å€™å–Šè¿‡ä¸€æ¬¡ã€‚2024 å¹´ Devin å‡ºæ¥çš„æ—¶å€™åˆå–Šäº†ä¸€æ¬¡ã€‚2025 å¹´ Claude Code å’Œ Codex ä¸Šçº¿çš„æ—¶å€™å†å–Šä¸€æ¬¡ã€‚</p>
<p>æ¯æ¬¡å–Šå®Œï¼Œç¨‹åºå‘˜è¿˜æ˜¯è¯¥ä¸Šç­ä¸Šç­ï¼Œè¯¥åŠ ç­åŠ ç­ã€‚</p>
<p>ä½†è¿™æ¬¡ä¸ä¸€æ ·ã€‚</p>
<p>ä¹‹å‰æ˜¯æ¨¡å‹å…¬å¸è¯´"æˆ‘ä»¬èƒ½åšåˆ°"â€”â€”é‚£æ˜¯é”€å”®è¯æœ¯ã€‚</p>
<p>è¿™æ¬¡æ˜¯<strong>ç”¨ AI å†™ä»£ç çš„å…¬å¸è‡ªå·±è¯´"æˆ‘ä»¬å·²ç»åšåˆ°äº†"</strong>â€”â€”è¿™æ˜¯ç”Ÿäº§å®è·µã€‚</p>
<p>Nvidia ä¸æ˜¯ AI ç¼–ç¨‹å·¥å…·å…¬å¸ï¼Œå®ƒæ˜¯èŠ¯ç‰‡å…¬å¸ã€‚å®ƒç»™ 3 ä¸‡å·¥ç¨‹å¸ˆæ¢å·¥å…·ï¼Œä¸æ˜¯ä¸ºäº† PRï¼Œæ˜¯å› ä¸ºä»£ç äº§å‡ºçœŸçš„ç¿»äº† 3 å€ã€‚å½“ä½ çš„ç«äº‰å¯¹æ‰‹ç”¨åŒæ ·çš„äººåŠ›åšå‡º 3 å€çš„äº§å‡ºï¼Œä½ ä¸è·Ÿè¿›å°±æ˜¯åœ¨ç­‰æ­»ã€‚</p>
<p>è¿™ä¸ªä¿¡å·çš„å«é‡‘é‡ï¼Œè·Ÿ"æŸ AI å…¬å¸å‘äº†ä¸ª Demo"å®Œå…¨ä¸æ˜¯ä¸€ä¸ªé‡çº§ã€‚</p>
<hr/>
<h2 data-id="heading-2"><strong>ä¸ºä»€ä¹ˆæ˜¯ç°åœ¨</strong></h2>
<p>ä½ å¯èƒ½å¥½å¥‡ï¼šAI ç¼–ç¨‹å·¥å…· 2024 å¹´å°±æœ‰äº†ï¼Œä¸ºä»€ä¹ˆçªç„¶åˆ°äº†è¿™ä¸ªä¸´ç•Œç‚¹ï¼Ÿ</p>
<p>ç­”æ¡ˆæ˜¯<strong>é€Ÿåº¦</strong>ã€‚</p>
<p>å°±åœ¨æ˜¨å¤©ï¼ŒOpenAI å‘å¸ƒäº† GPT-5.3-Codex-Sparkâ€”â€”ä¸€ä¸ªè·‘åœ¨ Cerebras æ™¶åœ†çº§èŠ¯ç‰‡ä¸Šçš„ç¼–ç æ¨¡å‹ã€‚è¿™æ˜¯ OpenAI ç¬¬ä¸€æ¬¡ç”¨é Nvidia çš„èŠ¯ç‰‡éƒ¨ç½²ç”Ÿäº§çº§æ¨¡å‹ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e36ce70610e140c09210ef0a4ec0d688~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f5YGlQUnnvJbnqIs=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771568450&amp;x-signature=UOyVeSHfHLqu9iMF2CoPWW5Ds08%3D" alt="" loading="lazy"/></p>
<p>å…³é”®æ•°å­—ï¼š<strong>æ¯ç§’ 1000+ token çš„ä»£ç ç”Ÿæˆé€Ÿåº¦ï¼Œæ¯”ä¹‹å‰å¿« 15 å€ã€‚</strong></p>
<p>Cerebras çš„èŠ¯ç‰‡æœ‰å¤šå¤§ï¼Ÿä¸€æ•´å—ç¡…æ™¶åœ†ï¼Œé¤ç›˜é‚£ä¹ˆå¤§ï¼Œå°±æ˜¯ä¸€ä¸ªå¤„ç†å™¨ã€‚ä¸æ˜¯æŠŠå‡ ç™¾ä¸ª GPU å †åœ¨ä¸€èµ·ï¼Œæ˜¯æŠŠä¸€æ•´ä¸ªèŠ¯ç‰‡åšåˆ°æè‡´ã€‚</p>
<p>15 å€é€Ÿåº¦æ„å‘³ç€ä»€ä¹ˆï¼Ÿ</p>
<p>ä»¥å‰ç”¨ AI å†™ä»£ç ï¼Œä½ æäº¤ä¸€ä¸ªä»»åŠ¡ï¼Œæ³¡æ¯å’–å•¡ç­‰å‡ åˆ†é’Ÿã€‚ç°åœ¨æ˜¯ä½ è¯éŸ³åˆšè½ï¼Œä»£ç å°±å‡ºæ¥äº†ã€‚ä»"å¼‚æ­¥ç­‰ç»“æœ"å˜æˆäº†"å®æ—¶å¯¹è¯"ã€‚</p>
<p>è¿™ä¸ªä½“æ„Ÿå·®å¼‚æ˜¯è´¨å˜ã€‚</p>
<p>æˆ‘è‡ªå·±æ¯å¤©ç”¨ Claude Code åšäº§å“ã€‚ä¹‹å‰ç­‰ AI ç”Ÿæˆçš„æ—¶å€™æˆ‘ä¼šåˆ‡åˆ°åˆ«çš„çª—å£å¹²åˆ«çš„äº‹ã€‚ç°åœ¨ï¼Ÿæ ¹æœ¬æ²¡æ—¶é—´åˆ‡â€”â€”å®ƒæ¯”æˆ‘æ‰“å­—è¿˜å¿«ã€‚</p>
<p><strong>å½“ AI å†™ä»£ç çš„é€Ÿåº¦å¿«åˆ°äººç±»æ¥ä¸åŠæ€è€ƒçš„æ—¶å€™ï¼Œ"äººå†™ä»£ç "è¿™ä»¶äº‹æœ¬èº«å°±å˜æˆäº†ç“¶é¢ˆã€‚</strong></p>
<p>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆå››å®¶å…¬å¸åŒæ—¶è·¨è¿‡äº†è¿™ä¸ªä¸´ç•Œç‚¹ã€‚ä¸æ˜¯å·§åˆï¼Œæ˜¯é€Ÿåº¦åˆ°äº†ã€‚</p>
<hr/>
<h2 data-id="heading-3"><strong>æˆ‘è‡ªå·±çš„ä½“æ„Ÿ</strong></h2>
<p>è¯´è¯´æˆ‘çš„çœŸå®ç»å†ã€‚</p>
<p>æˆ‘åœ¨è…¾è®¯å¸¦è¿‡å‡ åäººçš„å›¢é˜Ÿï¼Œåœ¨å­—èŠ‚ä¹Ÿåšè¿‡å‰ç«¯æŠ€æœ¯ Leaderã€‚é‚£æ—¶å€™å›¢é˜Ÿäº§å‡ºçš„è®¡ç®—æ–¹å¼æ˜¯ï¼šäººå¤´ Ã— å·¥æ—¶ Ã— äººæ•ˆã€‚æƒ³æé«˜äº§å‡ºï¼ŸåŠ äººã€åŠ ç­ã€ä¼˜åŒ–æµç¨‹ã€‚</p>
<p>2025 å¹´ 10 æœˆè¾èŒåˆ›ä¸šåï¼Œæˆ‘å¼€å§‹å…¨é¢ç”¨ AI ç¼–ç¨‹ã€‚</p>
<p><strong>ä¸€ä¸ªäººï¼Œä¸€ä¸ªæœˆï¼Œåšäº†è¿‘ 30 ä¸ªå‡ºæµ·å°äº§å“ã€‚</strong></p>
<p>ä¸æ˜¯ç®€å•çš„é™æ€é¡µé¢ã€‚æ˜¯æœ‰å‰ç«¯ã€æœ‰åç«¯ã€æœ‰æ”¯ä»˜ã€æœ‰ SEOã€æœ‰æ•°æ®ç»Ÿè®¡çš„å®Œæ•´äº§å“ã€‚æ”¾åœ¨ä»¥å‰ï¼Œè¿™æ˜¯ä¸€ä¸ª 5-8 äººçš„å°å›¢é˜Ÿå¹²ä¸€ä¸ªå­£åº¦çš„é‡ã€‚</p>
<p>æˆ‘ä¸è§‰å¾— AI æ›¿ä»£äº†æˆ‘ã€‚æ›´å‡†ç¡®åœ°è¯´ï¼Œæ˜¯ <strong>AI æŠŠæˆ‘ä»"å†™ä»£ç çš„äºº"å˜æˆäº†"åšå†³ç­–çš„äºº"</strong>ã€‚</p>
<p>ä»¥å‰ 80%çš„æ—¶é—´åœ¨å†™ä»£ç ï¼Œ20%åœ¨æƒ³äº§å“ã€‚</p>
<p>ç°åœ¨åè¿‡æ¥äº†â€”â€”80%çš„æ—¶é—´åœ¨æƒ³äº§å“æ–¹å‘ã€ç”¨æˆ·éœ€æ±‚ã€å•†ä¸šæ¨¡å¼ï¼Œ20%åœ¨ Review AI å†™çš„ä»£ç ã€‚</p>
<p>è¿™ä¸ªè½¬å˜ï¼Œè·Ÿ Nvidia é‚£ 3 ä¸‡å·¥ç¨‹å¸ˆçš„è½¬å˜æ˜¯ä¸€æ¨¡ä¸€æ ·çš„ã€‚</p>
<hr/>
<h2 data-id="heading-4"><strong>ç¨‹åºå‘˜è¦å¤±ä¸šäº†å—ï¼Ÿ</strong></h2>
<p>è¿™æ˜¯æ¯æ¬¡ AI ç¼–ç¨‹è¯é¢˜ä¸‹å¿…ç„¶å‡ºç°çš„é—®é¢˜ã€‚</p>
<p>æˆ‘çš„åˆ¤æ–­æ˜¯ï¼š<strong>ä¸ä¼šå¤±ä¸šï¼Œä½†å·¥ä½œå†…å®¹ä¼šå½»åº•æ”¹å˜ã€‚</strong></p>
<p>ä¸Šæµ·äº¤å¤§æœ€è¿‘å‘äº†ä¸€ç¯‡è®ºæ–‡ï¼ˆProjDevBenchï¼‰ï¼Œæµ‹è¯• AI ä»é›¶æ„å»ºå®Œæ•´è½¯ä»¶é¡¹ç›®çš„èƒ½åŠ›ã€‚ç»“æœé€šè¿‡ç‡åªæœ‰ 27%â€”â€”åŸºç¡€åŠŸèƒ½è¿˜è¡Œï¼Œä½†ç³»ç»Ÿè®¾è®¡ã€æ€§èƒ½ä¼˜åŒ–ã€èµ„æºç®¡ç†å…¨å´©ã€‚</p>
<p>è¿™è¯´æ˜ä»€ä¹ˆï¼Ÿ</p>
<p>AI å·²ç»èƒ½å¹² 80%çš„æ´»äº†ã€‚ä½†å‰©ä¸‹é‚£ 20%â€”â€”æ¶æ„å†³ç­–ã€è¾¹ç•Œå¤„ç†ã€æ€§èƒ½è°ƒä¼˜ã€äº§å“åˆ¤æ–­â€”â€”æ°æ°æ˜¯æœ€å€¼é’±çš„ 20%ã€‚</p>
<p>Scott Wu è¯´å¾—å¥½ï¼š"ç“¶é¢ˆä¸å†æ˜¯å†™ä»£ç æœ¬èº«ï¼Œè€Œæ˜¯ä¸¤ä»¶äº‹â€”â€”1ï¼‰è®©äººç±»æ›´å®¹æ˜“ç†è§£ã€è§„åˆ’å’Œæé—®ï¼›2ï¼‰è®© AI æ›´å®¹æ˜“è·å–ä»»åŠ¡çš„çœŸå®ä¸Šä¸‹æ–‡ã€‚"</p>
<p>ç¿»è¯‘æˆäººè¯å°±æ˜¯ï¼š<strong>æœªæ¥çš„ç¨‹åºå‘˜ä¸æ˜¯ä»£ç æœºå™¨ï¼Œæ˜¯ AI çš„ é¡¹ç›®ç»ç† ã€‚</strong></p>
<p>ä½ çš„ä»·å€¼ä¸å†æ˜¯ä¸€å¤©èƒ½å†™å¤šå°‘è¡Œä»£ç ï¼Œè€Œæ˜¯ä½ èƒ½ä¸èƒ½æŠŠä¸€ä¸ªæ¨¡ç³Šçš„éœ€æ±‚æ‹†è§£æˆ AI èƒ½ç†è§£çš„æŒ‡ä»¤ï¼Œèƒ½ä¸èƒ½åœ¨ AI å†™å®Œä¹‹ååˆ¤æ–­"è¿™ä¸ªæ¶æ„æ‰›ä¸æ‰›å¾—ä½"ï¼Œèƒ½ä¸èƒ½åœ¨ AI çŠ¯é”™çš„æ—¶å€™å¿«é€Ÿå®šä½é—®é¢˜ã€‚</p>
<p>è¿™äº›èƒ½åŠ›ï¼Œæ°æ°æ˜¯åœ¨å¤§å‚å¸¦è¿‡å›¢é˜Ÿã€åšè¿‡å¤§é¡¹ç›®çš„äººæœ€æ“…é•¿çš„ã€‚</p>
<hr/>
<h2 data-id="heading-5"><strong>å¦‚æœä½ åªåšä¸€ä»¶äº‹</strong></h2>
<p>è¯´äº†è¿™ä¹ˆå¤šï¼Œè½åˆ°è¡ŒåŠ¨ä¸Šï¼Œæˆ‘å»ºè®®ä½ ä»Šå¤©å°±åšä¸€ä»¶äº‹ï¼š</p>
<p><strong>æŠŠä½ æœ€å¸¸åšçš„ä¸€ç±»å¼€å‘ä»»åŠ¡ï¼Œå®Œæ•´åœ°äº¤ç»™ AI åšä¸€æ¬¡ã€‚</strong></p>
<p>ä¸æ˜¯è®©å®ƒè¡¥ä¸¤è¡Œä»£ç ã€‚æ˜¯ç»™å®ƒä¸€ä»½éœ€æ±‚æè¿°ï¼Œè®©å®ƒä»é›¶å¼€å§‹æã€‚å‰ç«¯ã€åç«¯ã€æ•°æ®åº“ã€éƒ¨ç½²ï¼Œå…¨äº¤å‡ºå»ã€‚</p>
<p>ä½ ä¼šå‘ç°ä¸¤ä»¶äº‹ï¼š</p>
<ol>
<li>
<p>AI èƒ½æå®šçš„éƒ¨åˆ†ï¼Œæ¯”ä½ é¢„æœŸçš„å¤šå¾—å¤šã€‚</p>
</li>
<li>
<p>æä¸å®šçš„éƒ¨åˆ†ï¼Œæ°æ°æš´éœ²äº†ä½ çœŸæ­£ä¸å¯æ›¿ä»£çš„ä»·å€¼ã€‚</p>
</li>
</ol>
<p>Nvidia çš„ 3 ä¸‡å·¥ç¨‹å¸ˆå·²ç»è¿™ä¹ˆå¹²äº†ã€‚OpenAI çš„å›¢é˜Ÿå·²ç»è¿™ä¹ˆå¹²äº†ã€‚ä½ è¿˜åœ¨ç­‰ä»€ä¹ˆï¼Ÿ</p>
<hr/>
<p>å¦‚æœè¿™ç¯‡å¯¹ä½ æœ‰å¸®åŠ©ï¼Œæ¬¢è¿ç‚¹èµã€æ”¶è—ã€å…³æ³¨ï¼Œä½ çš„æ”¯æŒæ˜¯æˆ‘æŒç»­è¾“å‡ºçš„åŠ¨åŠ› âœ¨</p>
<hr/>
<p>æˆ‘çš„å…¶ä»–å¹³å°è´¦å·å’Œå¼€æºé¡¹ç›®åœ¨ä¸ªäººä¸»é¡µä¸­ï¼Œæ¬¢è¿äº¤æµ ğŸ¤</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Android-å°è£…ä¸ªå¥½ç”¨ã€è½»é‡å’Œé€šç”¨çš„åŸç”ŸAdapteråŸºç±»]]></title>    <link>https://juejin.cn/post/7605816833192017920</link>    <guid>https://juejin.cn/post/7605816833192017920</guid>    <pubDate>2026-02-13T06:02:33.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605816833192017920" data-draft-id="7605816833191985152" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Android-å°è£…ä¸ªå¥½ç”¨ã€è½»é‡å’Œé€šç”¨çš„åŸç”ŸAdapteråŸºç±»"/> <meta itemprop="keywords" content="Android,Kotlin"/> <meta itemprop="datePublished" content="2026-02-13T06:02:33.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="RdoZam"/> <meta itemprop="url" content="https://juejin.cn/user/2019159609710904"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Android-å°è£…ä¸ªå¥½ç”¨ã€è½»é‡å’Œé€šç”¨çš„åŸç”ŸAdapteråŸºç±»
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2019159609710904/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    RdoZam
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-13T06:02:33.000Z" title="Fri Feb 13 2026 06:02:33 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    17
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åŸºäºRecyclerView.Adapteræ„å»ºè¯¥é€šç”¨é€‚é…å™¨ï¼Œä»¥åå…¶ä»–é¡¹ç›®ç›´æ¥æ‹¿æ¥ç”¨å°±è¡Œ~</p>
<blockquote>
<p><strong>æ€è€ƒ1ï¼š</strong></p>
<ul>
<li>adapteråŠŸèƒ½çº¯ç²¹ï¼Œå¦‚ â€˜æ„å»ºå¤ç”¨æ¡ç›®å¸ƒå±€â€™ å’Œ â€˜ç»‘å®šæ¡ç›®æ•°æ®â€™ ç­‰ã€‚</li>
<li>åŸºç±»åº”å…·å¤‡çš„èƒ½åŠ›ï¼šæ„å»ºæ¡ç›®å¸ƒå±€ã€ç»‘å®šæ•°æ®ã€è®¾ç½®æ•°æ®æºã€æ•°æ®æºçš„å¢åˆ æ”¹æŸ¥ç­‰ã€‚</li>
</ul>
</blockquote>
<blockquote>
<p><strong>æ€è€ƒ2ï¼š</strong></p>
<ul>
<li>éœ€ç»§æ‰¿RecyclerView.ViewHolderæŠ½è±¡ç±»</li>
<li>å¤šå¸ƒå±€åœºæ™¯çš„æ•°æ®æºï¼Œåº”å…·å¤‡åŒºåˆ†ItemTypeèƒ½åŠ›ï¼Œæ‰€ä»¥éœ€å®šä¹‰å¯¹åº”æ¥å£</li>
</ul>
</blockquote>
<blockquote>
<p><strong>æ€è€ƒ3ï¼šæ³›å‹ç›¸å…³</strong></p>
<ul>
<li>RecyclerView.ViewHolderçš„å­ç±»ï¼šæ³›å‹-å‚æ•°View ï¼ˆæ›´æ–¹ä¾¿è·å–æ§ä»¶å¯¹è±¡ï¼Œå¦åˆ™åªé…è‹¦é€¼åœ°findViewByIdï¼‰</li>
<li>å•å¸ƒå±€AdapteråŸºç±»ï¼šæ³›å‹-æ•°æ®æºç±»å‹ã€æ³›å‹-æ¡ç›®å¸ƒå±€ViewBinding</li>
<li>å¤šå¸ƒå±€AdapteråŸºç±»ï¼šæ³›å‹-æ•°æ®æºç±»å‹</li>
</ul>
</blockquote>
<p>åºŸè¯ä¸å¤šè¯´ï¼Œç›´æ¥ä¸Šèœ~</p>
<h3 data-id="heading-0">1.æ¨¡å—ä¸‹build.gradle.ktsä¸­é…ç½®ViewBinding</h3>
<pre><code class="hljs language-ini" lang="ini">android{
    ...
    buildFeatures {
        ...
        <span class="hljs-attr">viewBinding</span> = <span class="hljs-literal">true</span>
    }
}
</code></pre>
<h3 data-id="heading-1">2.æ„å»ºBaseViewHolder ï¼ˆç»§æ‰¿RecyclerView.ViewHolderï¼‰</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">BaseViewHolder</span>&lt;<span class="hljs-type">VB : ViewBinding</span>&gt;(<span class="hljs-keyword">var</span> viewBinding: VB) : RecyclerView.ViewHolder(viewBinding.root)
</code></pre>
<h3 data-id="heading-2">â˜…3. æ„å»ºå•å¸ƒå±€é€‚é…å™¨BaseRvAdapter</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">/**
 * <span class="hljs-doctag">@author</span> yyf
 * å•å¸ƒå±€-åŸºç±»é€‚é…å™¨
 */</span>
<span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BaseRvAdapter</span>&lt;<span class="hljs-type">D,VB: ViewBinding</span>&gt; (<span class="hljs-keyword">var</span> mContext: Context) : RecyclerView.Adapter&lt;BaseViewHolder&lt;VB&gt;&gt;() {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> mList = mutableListOf&lt;D&gt;()

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getItemCount</span><span class="hljs-params">()</span></span>: <span class="hljs-built_in">Int</span> = mList.size

    <span class="hljs-keyword">var</span> listener: ((View, <span class="hljs-built_in">Int</span>) -&gt; <span class="hljs-built_in">Unit</span>)? = <span class="hljs-literal">null</span>

    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">setOnItemClickListener</span><span class="hljs-params">(listener: ((<span class="hljs-type">View</span>, <span class="hljs-type">Int</span>) -&gt; <span class="hljs-type">Unit</span>)? = <span class="hljs-literal">null</span>)</span></span> {
        <span class="hljs-keyword">this</span>.listener = listener
    }

    <span class="hljs-comment">/*æ•°æ®è®¾ç½®*/</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">setData</span><span class="hljs-params">(list: <span class="hljs-type">MutableList</span>&lt;<span class="hljs-type">D</span>&gt;?)</span></span> {
        list?.let {
            mList.clear()
            mList.addAll(it)
            notifyDataSetChanged()
        }
    }

    <span class="hljs-comment">/*æ•°æ®è·å–*/</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getData</span><span class="hljs-params">()</span></span>: MutableList&lt;D&gt; {
        <span class="hljs-keyword">return</span> mList
    }

    <span class="hljs-comment">/*å¢*/</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">addData</span><span class="hljs-params">(list: <span class="hljs-type">MutableList</span>&lt;<span class="hljs-type">D</span>&gt;?)</span></span> {
        <span class="hljs-keyword">if</span> (list?.isNotEmpty() == <span class="hljs-literal">true</span>) {
            <span class="hljs-keyword">var</span> start = mList.size
            mList.addAll(list)
            <span class="hljs-keyword">var</span> end = mList.size - <span class="hljs-number">1</span>
            notifyItemRangeChanged(start, end)
        }
    }

    <span class="hljs-comment">/*åˆ */</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">removeData</span><span class="hljs-params">(position: <span class="hljs-type">Int</span>)</span></span> {
        <span class="hljs-keyword">if</span> (position &gt;= <span class="hljs-number">0</span> &amp;&amp; position &lt; mList.size) {
            mList.removeAt(position)
            notifyItemRemoved(position)
        }
    }

    <span class="hljs-comment">/*æ”¹*/</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">updateData</span><span class="hljs-params">(position: <span class="hljs-type">Int</span>, bean: <span class="hljs-type">D</span>)</span></span> {
        <span class="hljs-keyword">if</span> (position &gt;= <span class="hljs-number">0</span> &amp;&amp; position &lt; mList.size) {
            mList[position] = bean
            notifyItemChanged(position)
        }
    }

    <span class="hljs-comment">/*æŸ¥*/</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getData</span><span class="hljs-params">(position: <span class="hljs-type">Int</span>)</span></span>: D? {
        <span class="hljs-keyword">if</span> (position &gt;= <span class="hljs-number">0</span> &amp;&amp; position &lt; mList.size) {
            <span class="hljs-keyword">return</span> mList[position]
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>
    }
}

</code></pre>
<h3 data-id="heading-3">4.å®šä¹‰MultiItemæ¥å£ï¼ˆæ•°æ®beanå®ç°è¯¥æ¥å£ï¼Œä½¿å…¶å…·å¤‡åŒºåˆ†ItemTypeèƒ½åŠ›ï¼‰</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">MultiItem</span> {
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getItemType</span><span class="hljs-params">()</span></span>: <span class="hljs-built_in">Int</span>
}
</code></pre>
<h3 data-id="heading-4">5.â˜… æ„å»ºå¤šå¸ƒå±€é€‚é…å™¨BaseRvMultiAdapter</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">/**
 * <span class="hljs-doctag">@author</span> yyf
 * å¤šå¸ƒå±€-åŸºç±»é€‚é…å™¨
 */</span>
<span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BaseRvMultiAdapter</span>&lt;<span class="hljs-type">D : MultiItem</span>&gt; (<span class="hljs-keyword">var</span> mContext: Context) : RecyclerView.Adapter&lt;BaseViewHolder&lt;ViewBinding&gt;&gt;() {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> mList = mutableListOf&lt;D&gt;()

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getItemCount</span><span class="hljs-params">()</span></span>: <span class="hljs-built_in">Int</span> = mList.size

    <span class="hljs-keyword">var</span> listener: ((View, <span class="hljs-built_in">Int</span>) -&gt; <span class="hljs-built_in">Unit</span>)? = <span class="hljs-literal">null</span>

    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">setOnItemClickListener</span><span class="hljs-params">(listener: ((<span class="hljs-type">View</span>, <span class="hljs-type">Int</span>) -&gt; <span class="hljs-type">Unit</span>)? = <span class="hljs-literal">null</span>)</span></span> {
        <span class="hljs-keyword">this</span>.listener = listener
    }

    <span class="hljs-comment">/*æ•°æ®è®¾ç½®*/</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">setData</span><span class="hljs-params">(list: <span class="hljs-type">MutableList</span>&lt;<span class="hljs-type">D</span>&gt;?)</span></span> {
        list?.let {
            mList.clear()
            mList.addAll(it)
            notifyDataSetChanged()
        }
    }

    <span class="hljs-comment">/*æ•°æ®è·å–*/</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getData</span><span class="hljs-params">()</span></span>: MutableList&lt;D&gt; {
        <span class="hljs-keyword">return</span> mList
    }

    <span class="hljs-comment">/*å¢*/</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">addData</span><span class="hljs-params">(list: <span class="hljs-type">MutableList</span>&lt;<span class="hljs-type">D</span>&gt;?)</span></span> {
        <span class="hljs-keyword">if</span> (list?.isNotEmpty() == <span class="hljs-literal">true</span>) {
            <span class="hljs-keyword">var</span> start = mList.size
            mList.addAll(list)
            <span class="hljs-keyword">var</span> end = mList.size - <span class="hljs-number">1</span>
            notifyItemRangeChanged(start, end)
        }
    }

    <span class="hljs-comment">/*åˆ */</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">removeData</span><span class="hljs-params">(position: <span class="hljs-type">Int</span>)</span></span> {
        <span class="hljs-keyword">if</span> (position &gt;= <span class="hljs-number">0</span> &amp;&amp; position &lt; mList.size) {
            mList.removeAt(position)
            notifyItemRemoved(position)
        }
    }

    <span class="hljs-comment">/*æ”¹*/</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">updateData</span><span class="hljs-params">(position: <span class="hljs-type">Int</span>, bean: <span class="hljs-type">D</span>)</span></span> {
        <span class="hljs-keyword">if</span> (position &gt;= <span class="hljs-number">0</span> &amp;&amp; position &lt; mList.size) {
            mList[position] = bean
            notifyItemChanged(position)
        }
    }

    <span class="hljs-comment">/*æŸ¥*/</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getData</span><span class="hljs-params">(position: <span class="hljs-type">Int</span>)</span></span>: D? {
        <span class="hljs-keyword">if</span> (position &gt;= <span class="hljs-number">0</span> &amp;&amp; position &lt; mList.size) {
            <span class="hljs-keyword">return</span> mList[position]
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>
    }

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getItemViewType</span><span class="hljs-params">(position: <span class="hljs-type">Int</span>)</span></span>: <span class="hljs-built_in">Int</span> {
        <span class="hljs-keyword">return</span> mList[position].getItemType()
    }
}
</code></pre>
<p><em><strong>å¹²è´§ä¸Šé½äº†ï¼Œå¤§å®¶äº²è‡ªå°å°çœ‹å§~</strong></em></p>
<p>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” <strong>å®Œ</strong> â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”</p>
<p>ä»¥ä¸‹ä½¿ç”¨ç¤ºä¾‹å¯å¿½ç•¥äº†ï¼Œæ²¡å•¥çœ‹çš„ï¼</p>
<p>ä¸¾ä¸ªæ —å­ï¼š</p>
<p>UIå¸ƒå±€ activity_main.xml</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"utf-8"</span>?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">LinearLayout</span> <span class="hljs-attr">xmlns:android</span>=<span class="hljs-string">"http://schemas.android.com/apk/res/android"</span>
    <span class="hljs-attr">android:orientation</span>=<span class="hljs-string">"vertical"</span>
    <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
    <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">androidx.recyclerview.widget.RecyclerView</span>
        <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/mListRv"</span>
        <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
        <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span>/&gt;</span>

<span class="hljs-tag">&lt;/<span class="hljs-name">LinearLayout</span>&gt;</span>
</code></pre>
<p>æ¡ç›®å¸ƒå±€ item_test.xml</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"utf-8"</span>?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">LinearLayout</span> <span class="hljs-attr">xmlns:android</span>=<span class="hljs-string">"http://schemas.android.com/apk/res/android"</span>
    <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
    <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"50dp"</span>
    <span class="hljs-attr">android:gravity</span>=<span class="hljs-string">"center"</span>
    <span class="hljs-attr">android:background</span>=<span class="hljs-string">"#80000000"</span>
    <span class="hljs-attr">android:orientation</span>=<span class="hljs-string">"horizontal"</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">TextView</span>
        <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/mName2Tv"</span>
        <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"wrap_content"</span>
        <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"wrap_content"</span>
        <span class="hljs-attr">android:gravity</span>=<span class="hljs-string">"center"</span>
        <span class="hljs-attr">android:text</span>=<span class="hljs-string">"name"</span> /&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">TextView</span>
        <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"wrap_content"</span>
        <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"wrap_content"</span>
        <span class="hljs-attr">android:gravity</span>=<span class="hljs-string">"center"</span>
        <span class="hljs-attr">android:text</span>=<span class="hljs-string">"-"</span> /&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">TextView</span>
        <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/mValue2Tv"</span>
        <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"wrap_content"</span>
        <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"wrap_content"</span>
        <span class="hljs-attr">android:gravity</span>=<span class="hljs-string">"center"</span>
        <span class="hljs-attr">android:text</span>=<span class="hljs-string">"value"</span> /&gt;</span>

<span class="hljs-tag">&lt;/<span class="hljs-name">LinearLayout</span>&gt;</span>
</code></pre>
<p>æ¡ç›®å¸ƒå±€ item2_test.xml</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"utf-8"</span>?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">LinearLayout</span> <span class="hljs-attr">xmlns:android</span>=<span class="hljs-string">"http://schemas.android.com/apk/res/android"</span>
    <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
    <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"50dp"</span>
    <span class="hljs-attr">android:gravity</span>=<span class="hljs-string">"center"</span>
    <span class="hljs-attr">android:orientation</span>=<span class="hljs-string">"horizontal"</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">TextView</span>
        <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/mNameTv"</span>
        <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"wrap_content"</span>
        <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"wrap_content"</span>
        <span class="hljs-attr">android:gravity</span>=<span class="hljs-string">"center"</span>
        <span class="hljs-attr">android:text</span>=<span class="hljs-string">"name"</span> /&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">TextView</span>
        <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"wrap_content"</span>
        <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"wrap_content"</span>
        <span class="hljs-attr">android:gravity</span>=<span class="hljs-string">"center"</span>
        <span class="hljs-attr">android:text</span>=<span class="hljs-string">"-"</span> /&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">TextView</span>
        <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/mValueTv"</span>
        <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"wrap_content"</span>
        <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"wrap_content"</span>
        <span class="hljs-attr">android:gravity</span>=<span class="hljs-string">"center"</span>
        <span class="hljs-attr">android:text</span>=<span class="hljs-string">"value"</span> /&gt;</span>

<span class="hljs-tag">&lt;/<span class="hljs-name">LinearLayout</span>&gt;</span>
</code></pre>
<p>å•å¸ƒå±€BaseRvAdapterçš„ä½¿ç”¨</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">/**
 * <span class="hljs-doctag">@author</span> yyf
 * å•å¸ƒå±€å°è¯•
 */</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">TestNewAdapter</span>(context: Context) : BaseRvAdapter&lt;TestBean, ItemTestBinding&gt;(context) {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreateViewHolder</span><span class="hljs-params">(
        parent: <span class="hljs-type">ViewGroup</span>, viewType: <span class="hljs-type">Int</span>
    )</span></span>: BaseViewHolder&lt;ItemTestBinding&gt; {
        <span class="hljs-keyword">return</span> BaseViewHolder&lt;ItemTestBinding&gt;(ItemTestBinding.inflate(LayoutInflater.from(mContext), parent, <span class="hljs-literal">false</span>))
    }

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onBindViewHolder</span><span class="hljs-params">(
        holder: <span class="hljs-type">BaseViewHolder</span>&lt;<span class="hljs-type">ItemTestBinding</span>&gt;,
        position: <span class="hljs-type">Int</span>
    )</span></span> {
        getData()[position].let {
            holder.viewBinding.mNameTv.text = it.name
            holder.viewBinding.mValueTv.text = it.value

            holder.viewBinding.root.setOnClickListener {
                listener?.invoke(it, position)
            }
        }
    }
}
</code></pre>
<p>å¤šå¸ƒå±€BaseRvMultiAdapterçš„ä½¿ç”¨</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">/**
 * <span class="hljs-doctag">@author</span> yyf
 * å¤šå¸ƒå±€å°è¯•
 */</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">TestNewMultiAdapter</span>(context: Context) : BaseRvMultiAdapter&lt;TestBean&gt;(context) {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreateViewHolder</span><span class="hljs-params">(
        parent: <span class="hljs-type">ViewGroup</span>, viewType: <span class="hljs-type">Int</span>
    )</span></span>: BaseViewHolder&lt;ViewBinding&gt; {
        <span class="hljs-keyword">when</span> (viewType) {
            <span class="hljs-number">0</span> -&gt; {
                <span class="hljs-keyword">return</span> BaseViewHolder&lt;ViewBinding&gt;(ItemTestBinding.inflate(LayoutInflater.from(mContext), parent, <span class="hljs-literal">false</span>))
            }
            <span class="hljs-number">1</span> -&gt; {
                <span class="hljs-keyword">return</span> BaseViewHolder&lt;ViewBinding&gt;(Item2TestBinding.inflate(LayoutInflater.from(mContext), parent, <span class="hljs-literal">false</span>))
            }
        }
        <span class="hljs-keyword">return</span> BaseViewHolder&lt;ViewBinding&gt;(ItemTestBinding.inflate(LayoutInflater.from(mContext), parent, <span class="hljs-literal">false</span>))
    }

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onBindViewHolder</span><span class="hljs-params">(
        holder: <span class="hljs-type">BaseViewHolder</span>&lt;<span class="hljs-type">ViewBinding</span>&gt;,
        position: <span class="hljs-type">Int</span>
    )</span></span> {
        getData()[position].let { bean-&gt;
            <span class="hljs-keyword">when</span> (getItemViewType(position)) {
                <span class="hljs-number">0</span> -&gt; {
                    (holder.viewBinding <span class="hljs-keyword">as</span> ItemTestBinding).mNameTv.text = bean.name
                    (holder.viewBinding <span class="hljs-keyword">as</span> ItemTestBinding).mValueTv.text = bean.value
                }
                <span class="hljs-number">1</span> -&gt; {
                    (holder.viewBinding <span class="hljs-keyword">as</span> Item2TestBinding).mName2Tv.text = bean.name
                    (holder.viewBinding <span class="hljs-keyword">as</span> Item2TestBinding).mValue2Tv.text = bean.value
                }
            }
            holder.viewBinding.root.setOnClickListener {
                listener?.invoke(it, position)
            }
        }

    }
}
</code></pre>
<p>UIå±‚è°ƒç”¨</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MainActivity</span> : <span class="hljs-type">ComponentActivity</span>() {

    <span class="hljs-keyword">val</span> viewBinding <span class="hljs-keyword">by</span> lazy { ActivityMainBinding.inflate(LayoutInflater.from(<span class="hljs-keyword">this</span><span class="hljs-symbol">@MainActivity</span>)) }

    <span class="hljs-comment">//    val mAdapter by lazy { TestNewAdapter(this@MainActivity) } //å•å¸ƒå±€é€‚é…å™¨</span>
    <span class="hljs-keyword">val</span> mAdapter <span class="hljs-keyword">by</span> lazy { TestNewMultiAdapter(<span class="hljs-keyword">this</span><span class="hljs-symbol">@MainActivity</span>) } <span class="hljs-comment">//å¤šå¸ƒå±€é€‚é…å™¨</span>
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreate</span><span class="hljs-params">(savedInstanceState: <span class="hljs-type">Bundle</span>?)</span></span> {
        <span class="hljs-keyword">super</span>.onCreate(savedInstanceState)
        setContentView(viewBinding.root)

        viewBinding.mListRv.layoutManager = LinearLayoutManager(<span class="hljs-keyword">this</span><span class="hljs-symbol">@MainActivity</span>)
        viewBinding.mListRv.adapter = mAdapter
        mAdapter.setOnItemClickListener { view, position -&gt;
            Toast.makeText(<span class="hljs-keyword">this</span><span class="hljs-symbol">@MainActivity</span>, <span class="hljs-string">"ç‚¹å‡»äº† position=<span class="hljs-variable">$position</span>"</span>, Toast.LENGTH_SHORT).show()
        }

        requestData()

    }

    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">requestData</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">var</span> list = mutableListOf&lt;TestBean&gt;()
        <span class="hljs-keyword">for</span> (index <span class="hljs-keyword">in</span> <span class="hljs-number">0</span> until <span class="hljs-number">30</span>) {
            <span class="hljs-keyword">var</span> bean = TestBean()
            bean.name = <span class="hljs-string">"name <span class="hljs-variable">$index</span>"</span>
            bean.value = <span class="hljs-string">"value <span class="hljs-variable">$index</span>"</span>
            bean.type = index % <span class="hljs-number">2</span>
            list.add(bean)
        }
        mAdapter.setData(list)
    }
}
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é¸¿è’™å¼€å‘ï¼šç‹¬ç«‹å¼€å‘è€…çš„çƒ¦æ¼ä¹‹iconå›¾æ ‡é€‰æ‹©]]></title>    <link>https://juejin.cn/post/7605772919225090082</link>    <guid>https://juejin.cn/post/7605772919225090082</guid>    <pubDate>2026-02-13T06:24:18.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605772919225090082" data-draft-id="7605810996125597730" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é¸¿è’™å¼€å‘ï¼šç‹¬ç«‹å¼€å‘è€…çš„çƒ¦æ¼ä¹‹iconå›¾æ ‡é€‰æ‹©"/> <meta itemprop="keywords" content="HarmonyOS,Android,iOS"/> <meta itemprop="datePublished" content="2026-02-13T06:24:18.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜ä¸€é¸£"/> <meta itemprop="url" content="https://juejin.cn/user/1398234520239095"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é¸¿è’™å¼€å‘ï¼šç‹¬ç«‹å¼€å‘è€…çš„çƒ¦æ¼ä¹‹iconå›¾æ ‡é€‰æ‹©
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1398234520239095/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜ä¸€é¸£
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-13T06:24:18.000Z" title="Fri Feb 13 2026 06:24:18 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#2b2b2b;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(159,219,252,.15) 3%,transparent 0),linear-gradient(1turn,rgba(159,219,252,.15) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin-top:35px;margin-bottom:10px;color:#4dd0e1}.markdown-body h1{font-size:30px;text-align:center;position:relative;width:max-content;margin:0 auto}.markdown-body h1:before{position:absolute;content:"";z-index:-1;top:-20px;height:100%;width:100px;left:0;right:0;margin:0 auto;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADsAAAA6CAYAAAAOeSEWAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAABkLSURBVGhDtZoHnJ1llcbP3Om9ZiYzmfSQhCQQIbRQVQKI9CYC68qKriJK0UXcZRcINqStIoiIqKCi1NACQihBWiCkkJ5MJlMyvd7p7d759v989/sy34yTbIj48Atz71ff855znvOc971xDrB/EtoGI7a9Z8Aq+wZML0mNj7dE95NZ1OKsj1dHo1GbnJpss9OTbWJyonvun4VP1Njuoagtb+m0it4By0iIt8LEeMvkr8XFWcfgkA1gYDLf47i2PzpsyU7UspKSLDoctagTZ7Vc08MzClMS7awJ2ZaflBB78CeET8TYla1dtrKt2w5KS7YCDGzEoz2RqKUmhGw6x2bhuXyOp2BoRXef1Q1E7Lj8TIsMD1sbxu1kcnYSAX1810RMTUmyMB7f2j1gC7NS7byinNiL/kH8Q8a+2NRh77b32El56VaPAe0YeGR2mh2bm+FdMRqP1rbZe+3dFsHT35qcb/Oz0rwzo7Gxs9feYPLS4kM2h8lawee5hPmlJXneFQeGAzJ2F564v7rFzi7Msu3d/Xgjzq5g8ArX8VCNN2vJ28daey0zZJabmGCLslP5HOf+Oygr3UzDGOf+JxrauXfQjslJt+dbuuyMgiwmk+sPAB/b2Lt2NdoMZnuY21qHIvbvUyZ4Z0ZQiXGrWjvsmPxsK4R0nmHA8ZCTQvxVQn5eRipklIBtcVbV1WtHYsjati47ZWKuTUpP9Z4yGk/xDBGe3v1mW4/dOrvYO7P/2G9jRSjf31FnXyaUXiB8r51WaJkM3kcfOSa2FR6qarIenooTLQHPLcC4mYThyw1tVpKWYlVERlZ8nC3Oz3Jzdn1nn5uvQ8OOHYvhR/CvsqffJbkCkZTvcYZ6Z0WTfTovw5Y1dtjXp+TbFPhgf7FfxpYxuMfr2uwo8rEtMmwXF+d6Z8wGmIR2PLyjo8cqOFffP2SLGexJEJCP9R29thkPXlpa4A5Y3w/jmuVNYYwO2QkY7WMtz3mVcE1hkualJdmSolzX8GnpKd4VZq80d1o7zN0RdWxGaqItgbn3B/+vsasgh/UMNBOvzYMZDxtDKp289KGaVguFQvb1yQWWwuB97GaSXqUUnVaYbSUwrDCEBz/C2CM8EhNrP13fbkeSh3OJgCAe2N1CWXKsGOc6TOr5U4q8MwYhDtkTda02MyPN+nnGBQEH7A37NHYz5KOZVv08qyjbSseEzKauPnsMj98wc6Ibcj5UUv7M8QWZTE52jEwGOVaD8U1Dw1YNWX0qM8VKyb80L/TrOPYOzH4KBJQTrK8M7+7KZjuM63sHBt17FubGoibCuf+tarWFGUmuwWeT8/vCXo1tZOYeZcazCaez8MwEzzM+HqhqtiJI5twxL1jeGLYk7jmKMF1JOCbg6Qj5nAdRqX7q3BYm8VAmQvW1lfcMc58IT95uIA3q+gftrDHPXUXJWkVEHJme5Bp5UmHsvIZ/O3l8ECE/FWcsItX2hr0ae8O2Wjs+J43QTbOZzGYQ/7Wtxq6eXjRK3r0By4YJ6Ty8EiYSJqcm2eGeV4Pox/ANENJR49RiEdfqcLflUJrEBZqgxYHrBjn2ExFURqKdVETN9YirJxKxR2rbrYeQv5ISmB6IsiDGNfZGWPeMgkzr58xnPaJ5p6XDZPKz4T77wayJ7jGhhXLwanOHTWBgq5n5q6YUwNJ7l3kKcRl7OJ7fF56l1GzvHbSD8dghTPi0wIRfv6XafjJ3ssv0PnZQ7nZx/etwzO1zJ3lHR2OETTw8x0tOx1AN3De0D7YV+63oGthjaJQ5Ur7eVVZjcdGInUyuaT73ZWg3efV8fZs7cc2E777Qi5eunVbghvPPymrt/krKGfcLd8ybYjdxrK6333Z09rjHZkNuLYzz0uIc+xWCZzz8nbHbe4dsY1e/XUOY+nimvtUaSazv4jXhaQasSbmYmpuenGwHZ8TKggSEQm08rMD7ahBOoExcMqXQegjnZ+CEvaEa1ZQUQkt39dj0zDS7krq+ARmpdws/nlNqD9WFbWN7l5u3wr9MyrcXKUsqWy3jTOaoML4DdaQ83YIoT4VYpEXvYQZLmbX5SLohBrgOj186Kc/iKTUPUhq+Rrm5ekOl3TWv1Mr6hqwbY0VOQXwEo+Moq4Z47q5qsU489G944LyJOW4LOLZOKtT/iI6+nGe/0dhuEd4ltj2NmiuCU4hnk5fHIi7+RK4uTEu0e+s7rAiRcw1CYy3OejvcYz+eXeI9MYY9nu3lYZl0KavJJ7Vjibzgjp319rUZE20j7CkJqFr5JQYgQ39f3eQaKpQk0afy8nl4uBzvjUUTRk7k3iebOm0pabDiyFn2XGu3dRME41CGVeBVqSiVnc6hIUpekp1VjHLDSOEcQlui5W/U8C7IKREjv1Gabw3wRwUTvpv7jybPtzHmIPZ49q6KRjuccqBQVCOtGvqXhrCFUUXJzOYSHt7Kw5Ix9H08dSje1o1JyL73IYXpEMmE5CRbw6wuykx2pR+Pd6/J4JpLiJKV6N9OnrcQNfQ0Zem6qQX2MmFXyWTE+DMO0kGx4e08DEjnXbsYuOq7niHB8jdY/wQ8Srm2XCZZUrOakF1CY5EKX0h93Tu/1J4kRdbDMT8MamgZK9xe3uDcvrPe++Y4f61rcZr7B53rN1c5N2ytcV5rCrvHt3T2Og19g+5nH7dvq3bqunr4NOwgK2MHA1jeEDuG7HNuLmtw7qpocl5t6nCPvdTQ7v4N4u3WTqeyu9cZHIo4f6lqdFoHh7wzMbzDeeGv3Hvzjlrnh2W1zofhHuftxpFn3VFe7zxS0+p0DlKVPbhhvBxhvwiFMgfP+mjHA08gEC4pybeLyK1iZldh8zC5VJQyUl8l59KZ0WJk2xaiYWxNrkXXJhA8r3PvZRur7ZZZRfadaRPsfiTmX9HGajC2tXd6V8dQTMhX0h8rNdJx9Ra8F8SbRNLzhPRnJmTZIUTYueTyWxyr7uv3rjC3OkzE8495oS+4xq6D5WoI0bO5WVCOSerl8rIeBrOI/Hkaw6ME5W1zSuzx2la3CRdWi3zIG+FDBvUp9LMgI/vggUmE7KkT81yGvOOgEYa/aUahhRAF5xLec3OzbF1r2O17BbVxIi7hzJIC64IYhXdJA+nh/5xVbOmE9J0QqjSxWk0pp37M2YEtgjS8GpimACu7xkqxdKJ6fEXyYl2Lre0ZtC8yELVewtWUnbfCPIhrvgDFz8WI5yhJKgcnFMZWEFrwhgzo5uWDDDA1oGSOzcu0xfx7vTlsv6posIMpJ6cGWPiw/BxL4PU7vbrpjgf8bMdu5OYwOdhm83DARUSa0ELknYIeEAaILuWxlhGa0M8+EuJCrpJT+ymENhN60pXBxa3LZ5TsucnlGaCmIEQ4Evru91yuz0xMtKaeXluI5zdh9Mm8vAlBn4aR07X64EH3vEKdXQkZJXPP/JxMvNRpLxEtHZ5RQgmNewnpouvVTpYTHdfOnmy5kFUGnpRTfEhXD9DiBdFFJB0/YWS9aj6pmc89r0BaQmgTRkgI+EsdKsYasJZOBF+QqTH474NK7LbyBvf7W+RgOxNyxfQY2/2hrp2+NkroxrzrQ55fSZkpJIa28znCgF6rb7H1hOSslATyvNflAh9pvHcX3lVE/Ya8FjTJIexa2Rq77nfU96unTnD7aME3+TAm6BFKYrPnqCNIqV5sq0ZGCiEV+Db+qWMQqpFgb5KPx48R6omeDl2EuP9DTYt9iGA/f1KBS1w/La+H4ktsSmLItvZHXLUkrCeflVtJ9DVVg1H7+sxiGvVM975rZpfabuqHVhuP5F1vewav5O8GamUe91yDanoYw47FWzC929O+DJnKA2opFY1Rjru5CE7kOcO0jJtQVUIynzuZEMeb+1CEOFXN8iFSGeRpCm1BTlJxVg49Azm819SO7Bu0axEbwn27GuxMck+TMQHDP8fn48gfDVIL4R8xKVPJ73MQBUIfA/Z54LMw5vmlE+w+VFo2A78X/SsyPA/RMD0z3e2qVLtfo7aeBslpMX0N0TEnLcUlKym1jyBFqSohmYntI5enBhYB9CY/2kNarhwJhNiMtRGyWnkQdKaCFyQwgydjyNUw4VchKxXv2/DoKdC+lkQbCX1NlKCGvJiBJkSGbCus6jfo4yGBNySgr+u7e20BCsxdVAcFlJ/tHd32+cIsNxSXUULUUx+dg/d47g7OPYFw2MxkSuyMwLHVTI6PBN6dS8Sppw45zHJSgDXV3aQzmz40Z6fDgBfiAXU0uZxby2zejee+j3eltoQMzhV6qSBogXwrEXDj7ElWxUQ8RrnSaoU0dxIsKaiMvMykXTu90NqJsGHP4z78SdLigUrLKat32nFwy/E07pfDFRdQ/7N5r57pQ1482uvWhMGhQcviGkVrKDUp0ToCxfhQal5n4Hs/g1jOgH4LWdwFOd1b1WzHET4vLZppv+Czjxo840OrDlG8jAJzv2tp5mLK1dsU/lfIOeWy5NxFxfl2BoYImlQtx9QF6mJRQKBsQYYuO2yaLYPBUXvu/VqYPxtHhNy7Y4hCkNLGPtKSklzCVKSHtMQxcqm5Kw1DhI2PTGZtcGDAvoLQ/u7MifYtWFBlxz2H9zo8RkwKzC5UYiG+p44ccqE62YAxLeT/TOpf8MXx8Qk0IJFRY1Go+viQVJpE5Ehjf49xfAZeqGIy/7us3nqxwQfCkjZypPxobVr/6YpQHIalUvuCyEwbSXC9PC8QnkFcXlrgLpoLIhIfKuaqlQkYIAwQnr/f3eyu7KttOw2lNpv8/BPHyjzVNER3o72gvEBKqRMTflndbP8BMweRDyeciEj5bFayFXqTLzheivgYJC0jwzwHa0MDDEotm48ndze5BBBElAnxxcRYHAFh3FfZaA9UNRmC354kNwUx8eHkmVj5dcTE5ZMnuEyr1QqlhtaJLuOYZv4v3KNo0TKrGPUZ1NILPKuWcvVn5Trv10SMB6h0j/ARMnlOuafCBIfnSWEx/Raif3HDzofYMM31dOyY9LBaLK3TjoX2fEqT4+2qaUVWSTQvyM6wC8nNJyEetXIyuLKrx04P7MKNnbJZlKUtNAIHo7i2dA/YU3Vtdi5l6jCepXy8hOedSSSsI8/HQg5Q+gxTKXwkMHkbESo+hjG0lbRRzQ3Fc5LOzDuFhs3Ptumpie7ilRDhlEJOq/hjsZljCxjkt7fWuPS/EekpXMggJQIk0G+eN9Xu2VmHWIkJe0nJRN4ptBBit2yutG9ML7J1DHAxebiAMrZ4VZlduqGS8I2tJc2iborUxmIN79c+kTovFxivPvrcSaP3n7RSKYTUmKt4N3rMOcw4JOneD3sP956jNaMglIeTER5Xbdlt15Tm2W10NEsYrA/N5JLCHHsR9tSqwxq08G3bqm1ZTbOtagnbo6SLvH/VzBL7W7jPzqFea0LmMLFzUuLtdwumuO3i1Vtq7OK15Xgw3l1PDmIXak+6QBEkvB9YJIzBcc/L20JIYaSZ/qAzVm5Ut4oowk3QehC+N3xo/1wTqt7zsYawfX9no9XjqdPXVLhrwyo/wucJYQkE1e4j8rLcBuHUItQQKqgMXb6LGvxFQlXw33AdZLR0V5P9Fr29lP73scNnosoyvdWPv4fPJ+uJrLVtMakqaL1M1cTvv0OLIZE6wk2a2IcIRUQh+DaejpdcXepBa7bKDRGM9PIVxTl2EwarZ72rooVuY4RQtMypdk6e1lLLehhY2lt7QEd7WxlCDvdIli6E9B4+ZIodmZEMccUGqgiZOqru9tkR3iJ8nCcXRWRZCSPMLPEjlx2LjQL1OM5qKAm+vhSuRqSfV5Ttrg8FdWcrnhMqCTex7DEM6qTsVEuM1+8hovaHQ6e6a1Fz0xLd3nUt4ToWWuzWNkhcoAIIjUx2ZpxjLzWF9+SYmngR1lok4TEoJxGfuijhI/7OICoFmadl2llcL9b1oRVJtbD+JLlv1KrhHG5811t9ELbzgk14ICUwqE+TDzftqHPz98vUSy3jSIwP8dCpkNqLDPTx+rArz4T5qLG3G2PrvJKKPoLBWE501NC3ilUX5mVjVIb9nIbgWcpPMiSXjbcL8K62UkR86m1/yfkSeMaHFuK04X0CE3J6SWzFUxw0BSNHlSzi3RmIRJwHq5udO3c16quLp6sbnffbupxbt+12vzOrzuvNHc7ycRbIxuJHgYU7YSASdQgxp7qz2ynv6HJeqW91doa7nLruXof+17sqhhu31Xif9o7HalqczV29Dnrb/f5EXZvzdH27U98/6LR5i3N0UM5zjHU71/lwjRWWltU5CAIn7F1MqLp/r9hQ5RoaxG+qmrxP4yNKcfsFLwuiprffeb2l03m2scO5h3Or2rudzjGrhk8x4Cqu2xcexilBvNEcdi5Yu4tKF3Ue4tzPy+td5/1md4tzw5iJ27NuXEYobYUdlb8z6GTWkdxaCvk2zHjd5mpKQ459mv5TkAp6mQb9Aq9HHQ8S6mrZnuc6vUG6WHusIhCJGNXl9byvnJyaiE7+Eoz8c5TYNQiUveENGpJpcIJ+biS8R0+rlcazGNs7pKB+zPLTOSX2KNWhlDAf4r2Spj72JORB5OyHULX+dlD/FOky/HFy5ygYU0sey/i8moeqdunXK1qC3RuaMOYHlI/raQMl3M+EeTV5WxD3Km8a8PkM8nr648sQ9+esKbf5e/nxiKBfAOQkxbv3SU9LYmqPV9V/Pn+V20VwTyVjTqCI6edEQUOFUXs9WmfSll8DyX2dt7GlnwkswaM3l9XZ0oNK3MTXbxpOV2sGk69s6XCJw4cY8KbyRrt9TrHt7Bm0rRBQe1+fHUWNfaapU0KbqxzbORC1M/LS3dJwIl3KOrwykQG/E+61q+isgniztdOKqNOziDgZqZIzFwPvqGiyg5NCtoCqoG5NxHhPZTOsnORulKskjoKMDeLuXQ3OmnC3syxARFXdfc57LR3OrdtrvSOOs55rnqhtcdoGhpxHdjc5EfJUuHZTlftX+G15rXPlhkrnLe59F7Lz8VGHdg8c5y2OLeMZ126qduq9XC3v7nd+FchLvYPJd15gPCu8XQnh/qpm59WGVudZzvvQO97kXTcGxhnEuJvR39tWY8cwK4uhcikk4a3Gdstg9l5B2t0wfaTdWkEou5vCPOV5PH73vFL3+DfXltnh6OxjkJD6Wd5F3g88tMe6CW/7YmI99VIL4u0oqUK8ocW4d8hFrXMVoOQU8s3U97MnjvDD/XRYkyhHM1MT3GVZQR2Tdv70U8EbA5vlo+CaPAaaSWoZXm50otGodxQ6L6txGKxzw5ZYORrBsPPrykZKQIy1n8bTjwb2fO4Te3ue7x6KOKvaYns1wtIddd4nx3mwot55qyl2360cp81zurg+CGqwU8v4/Of5uAVvPgObrwvHomY8jOtZ4fXWLnefdHVXv9044+8ZklCx75DXwcV1Sb27y+vInUQEuVYSaMgRJYfAwtoj0raFxIUW1A8nz35f02qLc9Lc9lG7CBkwtUR7bf+A+5uL6ehnH9Lat+5sIEfj3Cbj3NKRvP7Rjlo7FSmqavKvpSP8MRZ7NVbQYLSkqlC9ZW4sPH18gBTcORjrhMWmQWzFmK2UsvO90qQ1oZcI8UhkCLZPtRqMy0NirobAvjIpb4/sW06qKGyPR2oGIdlazjOOTk+kLYzaaYGSp63Wz6HsXsQ51wd+LTAuZOy+8GBNq7tF+IOdDU4kENJthNID5YRafZtzZ3mDs9LbRgzixcZ2l1h83OKFbDmEd0/FiFp7DWHgp0AQGzq6nf8hPF+oa3EehOz0ziCWcm4NpBRMhX1hn571oR9wqVVSDVPtUi32sQ0vbu7scZdY9aOt2ZSEL9BEBIW+dv20AKDd9/ep09oimYqHpyImkKDuRllS4PrlHNuIqDmCJmNJQba7q1joEaUQJuR/WdXsLrJrq/L6cdJsPOyXscJ7GLKqo8cOpqhrO//yQG6oS3kZwS9xPkRB3wi7diFMtDN+PLk5m1ath+8f0Fy80dbjhvVXub+U5mEqeal27UP+dWpPlknNxW79Ak6/7Tg3UMOF52j1xA1qK7Trd6nXC+8P9ttYQcumIonLSnJtBdJNa77axw1C2x3qR4Wqnj73x9f6MbV+CCYFBZO6y51aSh3gzVrsmwzJnULEbCJC1oZ7vIZ/9Iqmfvn2u5oWO5n8fApxcuWUApum5diPgY9lrA9EtvUNOzYf8vqAcJPsU5iOh7XtXQgt2uZhjKU2amF7HQyfEYWcZk5yQ1RDKNrLcq02k/9IGmldrB93KiokPw8EB2SsoKWXO5FmxXhlckqi+3vEUvLqwok5PHVkIWAszlqzy1p54zuLpnPZ3q9bod08JlLSb5DrNxDm38Sbvsg5EBywsT7oH+3XNW3uasGirFSrxRNdCllKiPZHZzJYLZb5qEcpae3pxMCuu9oibS5/QCOiLcYUrp+MmtJeURjFdVlxzqiae6D4h40NQt54HyGv3JRo10aVfv8YhtC0pSlVKcPFuxIXahr08mzCO4VzMlLSsZuomZ+RaucU0rXsw/sfF5+osUFonWob/7TrLdaUgdpV93fl9X+VIC0Y6tek2uI8OD3J5gT2Vj9ZmP0f4IM4iY7RQ5gAAAAASUVORK5CYII=) no-repeat 50%;background-size:64px 64px;opacity:.84}.markdown-body h1:after{position:absolute;content:"";width:150%;left:-25%;height:50%;bottom:12px;border-radius:50%;background:linear-gradient(transparent 80%,rgba(77,208,225,.8));background-size:400% 200%;opacity:.6;animation:h1Animate 6s linear infinite}@keyframes h1Animate{0%{background-position:100% 100%}50%{background-position:100% 50%}to{background-position:100% 100%}}.markdown-body h2{display:block;border-bottom:4px solid #4dd0e1;position:relative;font-size:24px;padding:12px 32px;margin:30px 0}.markdown-body h2:before{width:24px;height:24px;left:0;top:0;margin:auto;background-size:24px 24px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADGklEQVRYR81X32vTYBQ999s6mFjQgQ+DrbHiVFZYU4cDcQ/6pGhTFVYFEXGi82H+Bz448UnEF1Fx9ccEEcXpZE3d5tP2ooKiTacTHaLNpigMHDgnU9tcSbrWrkwWR0sbyEOSe885ObnfvV8IRT6oyPwoLQHBx+OVM5WJvSyEVAhnBOjt7yU/+/rr6r6l8TMO+F/EN0JQhICqQpD/xaRpcpAc9tS+M+9lBCia/oqBamK+zeDuQogQZaKJk3wcQjxSva7tGQGB2Ke1zIk3DNyMyNL+QpCnMQOaPsDAVuGAp9cjvbYc8Ec/bCYSg0zoiHilk1tHxqsqEsYlML4kjIpT/eurJxRNPweQU5VdrWaOEo1fgKAVbBgXIz73kF3R/ph+ghgdzMYWM29eAWlBJqgZaFlFYtC6nhWpaDqnSGlIlV1WjJ3DloDNgyNLncudqgX//Ucg3LxuStHGuhi8pqKCW3rqV342rwFjRznKm+/LNaN2yC237ThgF2wxcfMLeP6+ncrKzoPoKTGeLQbYbg4TNoC5iZPJY5HGVRdSNZAWYBclD3FzBQzrR8hACAKdzBzKA/4/IYioDQaOskBbpEG6PO8qKKSAEi3CnEb0Pw4oMf0OmKbTDWqh3Lw6EIiNBZi5lxh3wz4puBD5ovqAMvxhHSdFKxE1CQe3m/07TeTX4lcJdAhE+1Sv65Z5P/ByvIGTRowIZ9igbtXnmrOsbTvgj+kHBNMuBu9OdVw8EeU4nC1A0cYmAHZOTRrLhra4Z8ywnSN6vZHAFTA2WnnMfQB3qz73ddsOZM8CACFDIPSgQXqebXEgqgeZcAeEe6pXasm1f8ew3igMtAHWac0Uc/jYdyAaP0xEBwFsmgUPqbJ0NE2UKj4EGcahiOzuyhagaHpnmtgcVgTcCMuua7YdyAHbA3ArQNscVFbb4635aD6fnYaTvxxi9UNP7ddMXaRWVBdAcaLk6bDXPZCNZ9uBXEsDUX1T2Cc9yjig6Z0EHg3LK8/aqf6MwJKchkXfks1+0+JtSq3qLPa23BRR1B+T/6nkfMaW1r9hPt/MLtYfTLEpP+T9FNoAAAAASUVORK5CYII=)}.markdown-body h2:after,.markdown-body h2:before{content:"";display:block;position:absolute;bottom:0}.markdown-body h2:after{right:0;width:400px;height:10px;border-top-right-radius:24px;background:linear-gradient(90deg,#fff,#4dd0e1);max-width:50vw}.markdown-body h3{margin:30px 0;font-size:18px;position:relative;padding:4px 32px;width:max-content}.markdown-body h3:before{border-bottom:2px solid #4dd0e1;width:100%;content:"";display:block;height:28px;position:absolute;left:0;top:0;bottom:-2px;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);background-repeat:no-repeat;animation:h3AnimationBefore 2s infinite alternate}@keyframes h3AnimationBefore{0%{width:28px}25%{width:100%}50%{width:100%}to{width:100%}}.markdown-body h3:after{content:"";display:block;width:28px;height:28px;position:absolute;border:2px solid #4dd0e1;border-radius:50%;right:-15px;top:0;bottom:0;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);animation:h3AnimationAfter 2s infinite alternate}@keyframes h3AnimationAfter{0%{transform:rotate(0)}10%{transform:rotate(0)}50%{transform:rotate(-1turn)}to{transform:rotate(-1turn)}}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin:22px 0;letter-spacing:2px;font-size:14px;word-spacing:2px}.markdown-body img{max-width:80%;border-radius:6px;display:block;margin:20px auto!important;object-fit:contain;box-shadow:0 0 16px hsla(0,0%,43.1%,.45)}.markdown-body figcaption{display:block;font-size:13px;color:#2b2b2b}.markdown-body figcaption:before{content:"";background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAGFBMVEVHcExAuPtAuPpAuPtAuPpAuPtAvPxAuPokzOX5AAAAB3RSTlMAkDLqNegkoiUM7wAAAGBJREFUKM9jYBhcgMkBTUDVBE1BeDGqEtXychNUBeXlKEqACsrLQxB8lnCQQClCiWt5OYoSiAIkJVAF5eVBqAqAShTAAs7l5ShKWMwRAmAlSArASpAVgJUkCqIAscESHwCVVjMBK9JnbQAAAABJRU5ErkJggg==);display:inline-block;width:18px;height:18px;background-size:18px;background-repeat:no-repeat;background-position:50%;margin-right:5px;margin-bottom:-5px}.markdown-body hr{border:none;border-top:1px solid #4dd0e1;margin-top:32px;margin-bottom:32px}.markdown-body del{color:#4dd0e1}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(77,208,225,.08);color:#26c6da;padding:.195em .4em}.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#4dd0e1;border-bottom:1px solid #4dd0e1;font-weight:400;text-decoration:none;margin:0 4px}.markdown-body a:active,.markdown-body a:hover{background-color:rgba(77,208,225,.1)}.markdown-body strong{color:#26c6da}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{font-style:normal;color:#4dd0e1;font-weight:700}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(77,208,225,.05)}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{margin:2em 0;padding:24px 32px;border-left:4px solid #26c6da;background:rgba(77,208,225,.15);position:relative}.markdown-body blockquote:before{content:"â";top:8px;left:8px;color:#4dd0e1;font-size:30px;line-height:1;font-weight:700;position:absolute;opacity:.7}.markdown-body blockquote:after{content:"â";font-size:30px;position:absolute;right:8px;bottom:0;color:#4dd0e1;opacity:.7}.markdown-body blockquote p{color:#595959;line-height:2}.markdown-body ol,.markdown-body ul{color:#595959;padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="a11y-dark">.hljs-comment,.hljs-quote{color:#d4d0ab}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#ffa07a}.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#f5ab35}.hljs-attribute{color:gold}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:#abe338}.hljs-section,.hljs-title{color:#00e0e0}.hljs-keyword,.hljs-selector-tag{color:#dcc6e0}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#2b2b2b;color:#f8f8f2}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}@media screen and (-ms-high-contrast:active){.hljs-addition,.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-comment,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-quote,.hljs-string,.hljs-symbol,.hljs-type{color:highlight}.hljs-keyword,.hljs-selector-tag{font-weight:700}}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>ä¼ä¸šçš„å¼€å‘è€…ï¼Œéƒ½æœ‰è‡ªå·±çš„UIè®¾è®¡å¸ˆï¼Œå¯¹äºå›¾æ ‡è€Œè¨€ï¼ŒåŸºæœ¬ä¸ä¼šå‘æ„ï¼Œä½†æ˜¯ç‹¬ç«‹å¼€å‘è€…ï¼Œå°±ä¸å¾—ä¸è‡ªå·±æ¥è€ƒè™‘äº†ï¼Œåšä¸ºä¸Šæ¶è¿‡å¤šä¸ªåº”ç”¨çš„å¼€å‘è€…ï¼Œè¿™ä¸€ç‚¹æ˜¯æ·±æœ‰ä½“ä¼šï¼Œæœ‰æ—¶å€™ï¼Œä¸ºäº†æ‰¾åˆ°ä¸€ä¸ªå¥½çš„ï¼Œå¹¶ä¸”åˆé€‚çš„å›¾æ ‡ï¼Œéœ€è¦èŠ±è´¹å¾ˆé•¿çš„æ—¶é—´ï¼Œä¸ºäº†è®©åç»­çš„å¼€å‘è€…å°‘èµ°å¼¯è·¯ï¼Œç›®å‰æ€»ç»“äº†ä¸‰ä¸ªå¯ä»¥å…è´¹è·å–å›¾æ ‡çš„æ¸ é“ï¼Œå¸Œæœ›å¯ä»¥å¸®åŠ©åˆ°å¤§å®¶ã€‚</p>
<h2 data-id="heading-1">ç³»ç»Ÿçš„å›¾æ ‡</h2>
<p>æ¯‹åº¸ç½®ç–‘ï¼Œç³»ç»Ÿçš„å›¾æ ‡æ˜¯é¦–æ¨çš„ï¼Œå¦‚æœç³»ç»Ÿèƒ½æ»¡è¶³çš„ï¼Œå½“ç„¶ä»¥ç³»ç»Ÿä¸ºä¸»è¦é¦–é€‰ã€‚</p>
<p>ç³»ç»Ÿå›¾æ ‡ç›®å‰å¤§æ¦‚æœ‰433ä¸ªå›¾æ ‡ï¼ŒåŒ…å«äº†æ—¶é—´ï¼Œç®­å¤´ï¼Œåª’ä½“ï¼Œç›¸æœºä¸ç…§ç‰‡ç­‰å¤šç§åˆ†ç±»ï¼Œå¯ä»¥è¯´æ˜¯ååˆ†ä¸°å¯Œï¼Œæœ€å¤§çš„ä¾¿æ·æ˜¯ï¼Œæˆ‘ä»¬ä¸ç”¨å†é¢å¤–é…ç½®ä»€ä¹ˆï¼Œç›´æ¥å°±å¯ä»¥ä½¿ç”¨ï¼Œç®€ç›´ä¸è¦å¤ªæ–¹ä¾¿ã€‚</p>
<p>åœ°å€å¦‚ä¸‹ï¼š</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.huawei.com%2Fconsumer%2Fcn%2Fdesign%2Fharmonyos-symbol%2F" target="_blank" title="https://developer.huawei.com/consumer/cn/design/harmonyos-symbol/" ref="nofollow noopener noreferrer">developer.huawei.com/consumer/cnâ€¦</a></p>
<p>æ¯•ç«Ÿå›¾æ ‡å¤ªå¤šäº†ï¼Œå¤§å®¶å¯ä»¥ç‚¹å‡»ä»¥ä¸Šçš„åœ°å€å»è¯¦ç»†çš„æŸ¥çœ‹ï¼Œè¿™é‡Œå°±ç®€å•çš„æˆªå‡ å¼ å›¾å§ï¼š</p>
<p align="center"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c152323b589e4d15aa16d114eda1fbb2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY5LiA6bij:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771568657&amp;x-signature=oTeXLBmx5xAv5rdOW7bjzj8zaHI%3D" alt="" width="70%" loading="lazy"/></p>
<p align="center"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c665de8da0934c69acd49b5011cb852d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY5LiA6bij:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771568657&amp;x-signature=O00jb%2BVBhEmnkMLaiW2a0f7XrM0%3D" alt="" width="70%" loading="lazy"/></p>
<h3 data-id="heading-2">ä½¿ç”¨æ–¹å¼</h3>
<p>ç³»ç»Ÿçš„å›¾æ ‡ä½¿ç”¨ä¹Ÿæ˜¯ååˆ†çš„ç®€å•ï¼Œç»™æä¾›äº†ä¸¤ä¸ªç»„ä»¶ç”¨äºåŠ è½½ï¼Œä¸€ä¸ªæ˜¯SymbolGlyphç»„ä»¶ï¼Œå¦ä¸€ä¸ªæ˜¯SymbolSpanç»„ä»¶ï¼ŒSymbolGlyphä¸»è¦ç”¨äºç²¾ç¾çš„å›¾æ ‡ï¼Œå¦‚æ¸²æŸ“å¤šè‰²å›¾æ ‡å’Œä½¿ç”¨åŠ¨æ•ˆå›¾æ ‡ï¼Œè€ŒSymbolSpanï¼Œåˆ™ä½œä¸ºTextç»„ä»¶çš„å­ç»„ä»¶ï¼Œä¸»è¦ç”¨äºåœ¨æ–‡æœ¬ä¸­ç©¿æ’æ˜¾ç¤ºå›¾æ ‡å°ç¬¦å·ã€‚</p>
<h4 data-id="heading-3">SymbolGlyphç»„ä»¶</h4>
<p>ä»£ç å¦‚ä¸‹ï¼Œsys.symbol.åé¢è¿æ¥çš„æ˜¯å›¾æ ‡çš„æ ‡è¯†ï¼Œå¤§å®¶æ‰“å¼€ä¸Šé¢çš„å›¾æ ‡åœ°å€ï¼Œæ¯ä¸ªå›¾æ ‡ä¸‹é¢éƒ½æœ‰è‡ªå·±çš„æ ‡è¯†ï¼Œé€‰æ‹©é€‚åˆçš„ï¼Œå¤åˆ¶å³å¯ã€‚</p>
<pre><code class="hljs language-TypeScript" lang="TypeScript"> <span class="hljs-title class_">SymbolGlyph</span>($r(<span class="hljs-string">'sys.symbol.airplane_fill'</span>))
        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">50</span>)
        .<span class="hljs-title function_">renderingStrategy</span>(<span class="hljs-title class_">SymbolRenderingStrategy</span>.<span class="hljs-property">SINGLE</span>)
        .<span class="hljs-title function_">fontColor</span>([<span class="hljs-title class_">Color</span>.<span class="hljs-property">Red</span>])
</code></pre>
<p>ä»¥ä¸Šçš„ä»£ç ï¼Œå°±å±•ç¤ºäº†ä¸€ä¸ªå¤§å°ä¸º50ï¼Œé¢œè‰²ä¸ºçº¢è‰²çš„é£æœºå›¾æ ‡ï¼Œæƒ³å®ç°ä»€ä¹ˆå›¾æ ‡ï¼Œåªéœ€è¦æŠŠå›¾æ ‡æ ‡è¯†æ›¿æ¢å³å¯ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a7a483fdb38c4a5eaba5e961bff088de~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY5LiA6bij:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771568657&amp;x-signature=Msq2%2FEYZcKLvvn1nMHTM8FYkUqw%3D" alt="" loading="lazy"/></p>
<p>å¸¸ç”¨çš„å±æ€§å¦‚ä¸‹ï¼š</p>
<p align="center"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/edd0c367858842c8b5ec5cf9e4a3c10c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY5LiA6bij:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771568657&amp;x-signature=GV2xKuV7BacxKCqJseEY6n%2FM8d4%3D" alt="image.png" width="70%" loading="lazy"/></p>
<p><strong>SymbolRenderingStrategy</strong></p>

























<table><thead><tr><th><strong>åç§°</strong></th><th><strong>å€¼</strong></th><th><strong>è¯´æ˜</strong></th></tr></thead><tbody><tr><td>SINGLE</td><td>0</td><td>å•è‰²æ¨¡å¼ï¼ˆé»˜è®¤å€¼ï¼‰ã€‚å¯ä»¥è®¾ç½®ä¸€ä¸ªæˆ–è€…å¤šä¸ªé¢œè‰²ï¼Œé»˜è®¤ä¸ºé»‘è‰²ã€‚å½“è®¾ç½®å¤šä¸ªé¢œè‰²æ—¶ï¼Œä»…ç”Ÿæ•ˆç¬¬ä¸€ä¸ªé¢œè‰²ã€‚</td></tr><tr><td>MULTIPLE_COLOR</td><td>1</td><td>å¤šè‰²æ¨¡å¼ã€‚æœ€å¤šå¯ä»¥è®¾ç½®ä¸‰ä¸ªé¢œè‰²ã€‚å½“åªè®¾ç½®ä¸€ä¸ªé¢œè‰²æ—¶ï¼Œä¿®æ”¹symbolå›¾æ ‡çš„ç¬¬ä¸€å±‚é¢œè‰²ï¼Œå…¶ä»–é¢œè‰²ä¿æŒé»˜è®¤é¢œè‰²ã€‚é¢œè‰²è®¾ç½®é¡ºåºä¸å›¾æ ‡åˆ†å±‚é¡ºåºåŒ¹é…ï¼Œå½“é¢œè‰²æ•°é‡å¤§äºå›¾æ ‡åˆ†å±‚æ—¶ï¼Œå¤šä½™çš„é¢œè‰²ä¸ç”Ÿæ•ˆã€‚ä»…æ”¯æŒè®¾ç½®é¢œè‰²ï¼Œè®¾ç½®é€æ˜åº¦è®¾ç½®ä¸ç”Ÿæ•ˆã€‚</td></tr><tr><td>MULTIPLE_OPACITY</td><td>2</td><td>åˆ†å±‚æ¨¡å¼ã€‚é»˜è®¤ä¸ºé»‘è‰²ï¼Œå¯ä»¥è®¾ç½®ä¸€ä¸ªæˆ–è€…å¤šä¸ªé¢œè‰²ã€‚å½“è®¾ç½®å¤šä¸ªé¢œè‰²æ—¶ï¼Œä»…ç”Ÿæ•ˆç¬¬ä¸€ä¸ªé¢œè‰²ã€‚ä¸é€æ˜åº¦ä¸å›¾å±‚ç›¸å…³ï¼Œsymbolå›¾æ ‡çš„ç¬¬ä¸€å±‚é€æ˜åº¦ä¸º100%ã€ç¬¬äºŒå±‚é€æ˜åº¦ä¸º50%ã€ç¬¬ä¸‰å±‚é€æ˜åº¦ä¸º20%ã€‚</td></tr></tbody></table>
<p><strong>SymbolEffectStrategy</strong></p>

























<table><thead><tr><th><strong>åç§°</strong></th><th><strong>å€¼</strong></th><th><strong>è¯´æ˜</strong></th></tr></thead><tbody><tr><td>NONE</td><td>0</td><td>æ— åŠ¨æ•ˆï¼ˆé»˜è®¤å€¼ï¼‰ã€‚</td></tr><tr><td>SCALE</td><td>1</td><td>æ•´ä½“ç¼©æ”¾åŠ¨æ•ˆã€‚</td></tr><tr><td>HIERARCHICAL</td><td>2</td><td>å±‚çº§åŠ¨æ•ˆã€‚</td></tr></tbody></table>
<p><strong>å¤šè‰²æ¨¡å¼</strong></p>
<pre><code class="hljs language-TypeScript" lang="TypeScript"><span class="hljs-title class_">SymbolGlyph</span>($r(<span class="hljs-string">'sys.symbol.ohos_folder_badge_plus'</span>))
        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">50</span>)
        .<span class="hljs-title function_">renderingStrategy</span>(<span class="hljs-title class_">SymbolRenderingStrategy</span>.<span class="hljs-property">MULTIPLE_COLOR</span>)
        .<span class="hljs-title function_">fontColor</span>([<span class="hljs-title class_">Color</span>.<span class="hljs-property">Black</span>, <span class="hljs-title class_">Color</span>.<span class="hljs-property">Pink</span>])
</code></pre>
<p><strong>å›¾æ ‡åŠ¨æ•ˆ</strong></p>
<pre><code class="hljs language-TypeScript" lang="TypeScript"><span class="hljs-title class_">SymbolGlyph</span>($r(<span class="hljs-string">'sys.symbol.ohos_wifi'</span>))
        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">50</span>)
        .<span class="hljs-title function_">symbolEffect</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">HierarchicalSymbolEffect</span>(<span class="hljs-title class_">EffectFillStyle</span>.<span class="hljs-property">ITERATIVE</span>), <span class="hljs-variable language_">this</span>.<span class="hljs-property">isActive</span>)
</code></pre>
<p>å½“ç„¶äº†ï¼Œæ›´å¤šçš„æ¡ˆä¾‹ï¼Œè¿˜æ˜¯æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£ï¼Œç›®å‰ï¼Œå¯ä»¥è¯´ï¼Œç³»ç»Ÿçš„å›¾æ ‡å·²ç»æ˜¯ååˆ†ä¸°å¯Œï¼Œå¯ä»¥æ»¡è¶³å¤§éƒ¨åˆ†çš„åœºæ™¯ï¼Œä¸ä»…æ”¯æŒæ›´æ”¹å¤§å°ï¼Œé¢œè‰²ï¼Œä¹Ÿæ”¯æŒåŠ¨æ•ˆè®¾ç½®ã€‚</p>
<h4 data-id="heading-4">SymbolSpanç»„ä»¶</h4>
<p>SymbolSpanå¯ä½œä¸ºTextçš„å­ç»„ä»¶ç”¨äºæ˜¾ç¤ºå›¾æ ‡å°ç¬¦å·ã€‚å¯ä»¥åœ¨ä¸€ä¸ªTextç»„ä»¶å†…æ·»åŠ å¤šä¸ªSymbolSpanï¼Œä»è€Œå±•ç¤ºä¸€ä¸²è¿ç»­çš„å›¾æ ‡ï¼Œä½¿ç”¨ä¸Šä¹Ÿæ˜¯éå¸¸çš„ç®€å•ï¼Œç®€å•å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre><code class="hljs language-TypeScript" lang="TypeScript"><span class="hljs-title class_">Text</span>() {
  <span class="hljs-title class_">SymbolSpan</span>($r(<span class="hljs-string">'sys.symbol.ohos_trash'</span>))
    .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Normal</span>)
    .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">96</span>)
}
</code></pre>
<p>å¸¸ç”¨çš„å±æ€§å¦‚ä¸‹ï¼ŒåŸºæœ¬ä¸Šå’ŒSymbolGlyphç»„ä»¶ç±»ä¼¼ã€‚</p>








































<table><thead><tr><th>å±æ€§</th><th>å‚æ•°</th><th>æ¦‚è¿°</th></tr></thead><tbody><tr><td>fontColor</td><td>Array&lt;ResourceColor&gt;</td><td>å›¾æ ‡é¢œè‰²</td></tr><tr><td>fontSize</td><td>number/string/Resource</td><td>å›¾æ ‡å¤§å°</td></tr><tr><td>fontWeight</td><td>number/FontWeight/string</td><td>å›¾æ ‡ç²—ç»†</td></tr><tr><td>renderingStrategy</td><td>SymbolRenderingStrategy</td><td>ç»„ä»¶æ¸²æŸ“ç­–ç•¥</td></tr><tr><td>effectStrategy</td><td>SymbolEffectStrategy</td><td>ç»„ä»¶åŠ¨æ•ˆç­–ç•¥</td></tr><tr><td>symbolEffect</td><td>SymbolEffect,boolean</td><td>ç»„ä»¶åŠ¨æ•ˆç­–ç•¥åŠæ’­æ”¾çŠ¶æ€</td></tr></tbody></table>
<h2 data-id="heading-5">iconç»„ä»¶</h2>
<p>iconç»„ä»¶ä¸»è¦è§£å†³äº†ç³»ç»Ÿç»„ä»¶æ— æ³•æ»¡è¶³çš„æƒ…å†µï¼Œæ¯”å¦‚å¸¸è§çš„åˆ†äº«å›¾æ ‡ï¼Œåº•éƒ¨tabå›¾æ ‡ç­‰ï¼Œç›®å‰æ‹¥æœ‰408ä¸ªå¸¸è§å›¾æ ‡ï¼Œæ”¯æŒæ›´æ”¹å›¾æ ‡é¢œè‰²å¤§å°ï¼Œå®ƒè™½ç„¶éœ€è¦ä¾èµ–ä½¿ç”¨ï¼Œä½†æ˜¯æ•´ä¸ªåŒ…çš„å¤§å°ä»…ä»…åªæœ‰200KBï¼Œæ€»ä½“è¿˜æ˜¯éå¸¸å°çš„ã€‚</p>
<p>iconç»„ä»¶åœ°å€ï¼š</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fohpm.openharmony.cn%2F%23%2Fcn%2Fdetail%2F%40abner%252Ficon" target="_blank" title="https://ohpm.openharmony.cn/#/cn/detail/@abner%2Ficon" ref="nofollow noopener noreferrer">ohpm.openharmony.cn/#/cn/detailâ€¦</a></p>
<p>ç›®å‰æ”¯æŒ408ä¸ªåœºæ™¯å›¾æ ‡ï¼Œæ”¯æŒé¢œè‰²å’Œå¤§å°æ›´æ”¹ï¼Œç”±äºå›¾æ ‡å¤§å¤šï¼Œè¿™é‡Œè¿˜æ˜¯æˆªå–å‡ å¼ æ•ˆæœå›¾ï¼Œè¯¦ç»†çš„å¤§å®¶å¯ä»¥æŸ¥çœ‹ä¸Šé¢çš„åœ°å€ã€‚</p>
<p align="center"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d2d91be9f7a0432981fc449148100556~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY5LiA6bij:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771568657&amp;x-signature=QlmsqNmbBDXVJv0rw1eIodCNC%2Fk%3D" alt="" width="70%" loading="lazy"/></p>
<p align="center"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f6b1517282f94fc6857f14d9b4e052fb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY5LiA6bij:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771568657&amp;x-signature=aB9YV64hXB7s9lPIx4PkfR17Xok%3D" alt="" width="70%" loading="lazy"/></p>
<h3 data-id="heading-6">ä½¿ç”¨æ–¹å¼</h3>
<p>æ–¹å¼ä¸€ï¼šåœ¨Terminalçª—å£ä¸­ï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤å®‰è£…ä¸‰æ–¹åŒ…ï¼ŒDevEco Studioä¼šè‡ªåŠ¨åœ¨å·¥ç¨‹çš„oh-package.json5ä¸­è‡ªåŠ¨æ·»åŠ ä¸‰æ–¹åŒ…ä¾èµ–ã€‚</p>
<p><strong>å»ºè®®ï¼šåœ¨ä½¿ç”¨çš„æ¨¡å—è·¯å¾„ä¸‹è¿›è¡Œæ‰§è¡Œå‘½ä»¤ã€‚</strong></p>
<pre><code class="hljs language-TypeScript" lang="TypeScript">ohpm install <span class="hljs-meta">@abner</span>/icon
</code></pre>
<p>æ–¹å¼äºŒï¼šåœ¨éœ€è¦çš„æ¨¡å—ä¸­çš„oh-package.json5ä¸­è®¾ç½®ä¸‰æ–¹åŒ…ä¾èµ–ï¼Œé…ç½®ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-TypeScript" lang="TypeScript"><span class="hljs-string">"dependencies"</span>: { <span class="hljs-string">"@abner/icon"</span>: <span class="hljs-string">"^1.0.0"</span>}
</code></pre>
<h3 data-id="heading-7">ä»£ç ä½¿ç”¨</h3>
<pre><code class="hljs language-TypeScript" lang="TypeScript"><span class="hljs-title class_">Icon</span>({ <span class="hljs-attr">iconModel</span>: <span class="hljs-title class_">IconModel</span>.<span class="hljs-property">wei_xin_circle</span>, <span class="hljs-attr">iconSize</span>: <span class="hljs-number">25</span> })
</code></pre>
<h3 data-id="heading-8">å±æ€§ä»‹ç»</h3>
<p>å¸¸è§å±æ€§é…ç½®å¦‚ä¸‹ï¼š</p>






























<table><thead><tr><th><strong>å±æ€§</strong></th><th><strong>ç±»å‹</strong></th><th><strong>æ¦‚è¿°</strong></th></tr></thead><tbody><tr><td>iconModel</td><td>IconModel</td><td>å›¾æ ‡ç±»å‹ï¼Œä¼ å…¥ä¸åŒç±»å‹å°±ä¼šå±•ç¤ºä¸åŒå›¾æ ‡ï¼Œç›®å‰æ”¯æŒ408ç§ç±»å‹ï¼Œå…·ä½“å¯çœ‹ä¸Šé¢çš„å›¾æ ‡æ•ˆæœï¼Œæ¯ä¸ªå›¾æ ‡ä¸‹çš„æ ‡è¯†å°±æ˜¯å›¾æ ‡ç±»å‹</td></tr><tr><td>iconColor</td><td>ResourceColor</td><td>å›¾æ ‡é¢œè‰²</td></tr><tr><td>iconSize</td><td>number/string/Resource</td><td>å›¾æ ‡å¤§å°ï¼Œä¹Ÿå¯åœ¨ç»„ä»¶å¤–è®¾ç½®</td></tr><tr><td>iconBorder</td><td>BorderOptions</td><td>å›¾æ ‡è¾¹æ¡†æ ·å¼</td></tr></tbody></table>
<h2 data-id="heading-9">é˜¿é‡Œå›¾æ ‡åº“</h2>
<p>å¦‚æœç³»ç»Ÿçš„å›¾æ ‡å’Œiconå›¾æ ‡ï¼Œè¿˜æ— æ³•æ»¡è¶³ä½ çš„éœ€æ±‚ï¼Œé‚£ä¹ˆè¿˜æœ‰ä¸€ä¸ªå®è—çš„å›¾æ ‡å¹³å°ï¼Œé‚£å°±æ˜¯é˜¿é‡Œå›¾æ ‡åº“ã€‚</p>
<p>åœ°å€å¦‚ä¸‹ï¼š</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.iconfont.cn" target="_blank" title="https://www.iconfont.cn" ref="nofollow noopener noreferrer">www.iconfont.cn</a></p>
<p>è¿™ç»å¯¹æ˜¯ç‹¬ç«‹å¼€å‘è€…çš„å¤©å ‚ï¼Œè¿™é‡Œæœ‰æ— æ•°çš„å›¾æ ‡èµ„æºï¼Œæ ¼å¼å„æ ·ï¼Œæ”¯æŒå„ç§å›¾ç‰‡æ ¼å¼ï¼Œæ¯”å¦‚ï¼Œpngã€svgç­‰ï¼ŒåŒæ ·ï¼Œä¹Ÿæ”¯æŒé¢œè‰²æ›´æ”¹ã€‚</p>
<p>å„å¼å„æ ·çš„å›¾æ ‡ï¼Œä»»ä½ å»æŒ‘é€‰ã€‚</p>
<p align="center"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8adf5d76d2c6413f8f1d0a12c389bdcd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY5LiA6bij:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771568657&amp;x-signature=v%2F3JSfj7AJKAIoELaM9KNZ9DbB4%3D" alt="" width="70%" loading="lazy"/></p>
<p>åŒæ ·ï¼Œä¹Ÿæ”¯æŒæœç´¢ï¼Œå¯ä»¥æ ¹æ®ä¸­æ–‡æˆ–è€…è‹±æ–‡è¿›è¡Œæ£€ç´¢ï¼Œéå¸¸çš„æ–¹ä¾¿ï¼Œæ¯”å¦‚æœç´¢è¿”å›ï¼Œé‚£ä¹ˆå°±ä¼šç½—åˆ—å‡ºæ— æ•°ä¸ªè¿”å›çš„å›¾æ ‡ï¼Œä»»ä½ æŒ‘é€‰ã€‚</p>
<p align="center"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c3fed9dcb86a4b63ac9e541cd5de089f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY5LiA6bij:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771568657&amp;x-signature=i3Ufrv6d3WBocC2N4eDOlmYmEK4%3D" alt="" width="70%" loading="lazy"/></p>
<p>ç‚¹å‡»ä¹‹åï¼Œå¯ä»¥æ›´æ”¹å›¾æ ‡çš„é¢œè‰²ï¼Œç„¶ååº•éƒ¨å°±å¯ä»¥è¿›è¡Œä¸‹è½½ï¼Œå¤åˆ¶åˆ°é¡¹ç›®ä¸­ä½¿ç”¨ã€‚</p>
<p align="center"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/45fa2dfa730e40a98f88e3ffc4e9b52c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY5LiA6bij:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771568657&amp;x-signature=tcBDBYc8FnANFKkmeB4MlCOJuKc%3D" alt="" width="70%" loading="lazy"/></p>
<h2 data-id="heading-10">ç›¸å…³æ€»ç»“</h2>
<p>ç›®å‰çš„ä¸‰ç§æ–¹å¼ï¼Œå¯ä»¥è¯´ï¼Œå®Œå…¨èƒ½å¤Ÿæ»¡è¶³æ—¥å¸¸çš„å›¾æ ‡éœ€æ±‚ï¼Œè¿™é‡Œæœ€å€¼å¾—æ¨èçš„è¿˜æ˜¯ç³»ç»Ÿçš„å›¾æ ‡åº“ï¼Œæ¯•ç«Ÿè‡ªå¸¦çš„ï¼Œä¸ç”¨ä»»ä½•çš„ä¾èµ–ï¼Œä¹Ÿä¸å­˜åœ¨åŒ…ä½“ç§¯çš„å¢åŠ ï¼Œå¤§å°ã€é¢œè‰²ã€åŠ¨æ•ˆç­‰ç­‰éƒ½å¯ä»¥åŸç”Ÿå®ç°ï¼Œè¿˜æ˜¯éå¸¸çš„æ–¹ä¾¿çš„ã€‚å½“ç„¶äº†ï¼Œå¦‚æœåŸç”Ÿæ— æ³•æ»¡è¶³çš„æƒ…å†µä¸‹ï¼Œåé¢çš„ä¸¤ç§æ–¹å¼ï¼Œä¹Ÿæ˜¯å€¼å¾—å¤§å®¶æ¥å°è¯•çš„ï¼Œæ€»ä¹‹ï¼Œé€‰æ‹©ä¸€ä¸ªè‡ªå·±é€‚åˆçš„æ–¹å¼ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[seedance 2.0ï¼Œè®©åˆ›ä½œè€…æˆä¸ºå†…å®¹å¯æ§çš„å¯¼æ¼”ï¼Œé™„å…è´¹ä½“éªŒæ•™ç¨‹]]></title>    <link>https://juejin.cn/post/7605625595570978831</link>    <guid>https://juejin.cn/post/7605625595570978831</guid>    <pubDate>2026-02-13T06:01:00.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605625595570978831" data-draft-id="7605542907119452212" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="seedance 2.0ï¼Œè®©åˆ›ä½œè€…æˆä¸ºå†…å®¹å¯æ§çš„å¯¼æ¼”ï¼Œé™„å…è´¹ä½“éªŒæ•™ç¨‹"/> <meta itemprop="keywords" content="AIGC"/> <meta itemprop="datePublished" content="2026-02-13T06:01:00.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é™Œæ™¨"/> <meta itemprop="url" content="https://juejin.cn/user/4352310171673354"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            seedance 2.0ï¼Œè®©åˆ›ä½œè€…æˆä¸ºå†…å®¹å¯æ§çš„å¯¼æ¼”ï¼Œé™„å…è´¹ä½“éªŒæ•™ç¨‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4352310171673354/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é™Œæ™¨
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-13T06:01:00.000Z" title="Fri Feb 13 2026 06:01:00 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯é™Œæ™¨ï¼Œåˆ†äº«æœ‰ç”¨çš„AIçŸ¥è¯†ä¸å·¥å…·ï¼Œå–œæ¬¢è®°å¾—å…³æ³¨ã€‚</p>
<p>è¿™å‡ å¤©seedance2.0åˆè¢«è¿ç»­åˆ·å±ï¼Œè®°å¾—å»å¹´è¿™æ—¶å€™ä¹Ÿæ˜¯deepseekçš„åˆ·å±ï¼Œè¿›åº¦è¶…å¿«ã€‚å†çœ‹å…ƒå®ã€åƒé—®ä»–ä»¬æ˜¥èŠ‚å¤§å°ºåº¦æ’’å¸ï¼Œåœ¨çœŸæ­£è§£å†³éœ€æ±‚çš„å±‚é¢ä¸Šï¼Œè¿˜æ˜¯ä¼šè¢«ç¢¾å‹ã€‚</p>
<p>seedance2.0ä¸ºä»€ä¹ˆè¢«åˆ·å±ï¼Œä»å›¢é˜Ÿå‘å¸ƒçš„ä¿¡æ¯çœ‹ï¼Œä¸»è¦æ˜¯ï¼š</p>
<blockquote>
<p>â</p>
<p>Seedance 2.0 é‡‡ç”¨ç»Ÿä¸€çš„å¤šæ¨¡æ€éŸ³è§†é¢‘è”åˆç”Ÿæˆæ¶æ„ï¼Œæ”¯æŒæ–‡å­—ã€å›¾ç‰‡ã€éŸ³é¢‘ã€è§†é¢‘å››ç§æ¨¡æ€è¾“å…¥ï¼Œé›†æˆäº†ç›®å‰ä¸šç•Œæœ€å…¨é¢çš„å¤šæ¨¡æ€å†…å®¹å‚è€ƒå’Œç¼–è¾‘èƒ½åŠ›ã€‚`</p>
</blockquote>
<p>è§£è¯»åˆ°å®é™…åº”ç”¨ä¸Šï¼Œå°±æ˜¯ï¼šä½ å¯ä»¥ç”¨ä¸€å¼ å›¾å®šä¸‹ç”»é¢é£æ ¼ï¼Œç”¨ä¸€ä¸ªè§†é¢‘æŒ‡å®šè§’è‰²çš„åŠ¨ä½œå’Œé•œå¤´çš„å˜åŒ–ï¼Œå†ç”¨å‡ ç§’éŸ³é¢‘å¸¦èµ·èŠ‚å¥æ°›å›´ï¼Œæ­é…æç¤ºè¯ï¼Œè®©åˆ›ä½œè¿‡ç¨‹å˜å¾—æ›´è‡ªç„¶ã€æ›´é«˜æ•ˆï¼Œä¹Ÿæ›´åƒçœŸæ­£çš„â€œå¯¼æ¼”â€ã€‚</p>
<p><strong>åœ¨å†…å®¹åˆ›ä½œä¸Šï¼Œå¯æ§å¯¹åˆ›ä½œè€…æ¥è¯´çœŸæ˜¯å¤ªé‡è¦ã€‚</strong></p>
<blockquote>
<p>â</p>
<p><strong>seedance 2.0å®˜æ–¹ä½¿ç”¨æ‰‹å†Œ:</strong> <code>https://bytedance.larkoffice.com/wiki/A5RHwWhoBiOnjukIIw6cu5ybnXQ</code></p>
</blockquote>
<h2 data-id="heading-0">å¿«é€Ÿä½¿ç”¨seedance 2.0</h2>
<ul>
<li>å³æ¢¦ç½‘é¡µç«¯-è§†é¢‘ç”Ÿæˆ-é€‰æ‹© Seedance 2.0ï¼›</li>
<li>è±†åŒ… App å¯¹è¯æ¡†-Seedance2.0-é€‰æ‹© 2.0 æ¨¡å‹ï¼›</li>
<li>ç«å±±æ–¹èˆŸä½“éªŒä¸­å¿ƒ-é€‰æ‹© Doubao-Seedance-2.0ã€‚</li>
</ul>
<h3 data-id="heading-1">å³æ¢¦ç½‘é¡µç«¯</h3>
<p>è®¿é—®å…¥å£ï¼š<em><a href="https://link.juejin.cn?target=https%3A%2F%2Fjimeng.jianying.com%2Fai-tool%2Fhome" target="_blank" title="https://jimeng.jianying.com/ai-tool/home" ref="nofollow noopener noreferrer">jimeng.jianying.com/ai-tool/homâ€¦</a></em></p>
<p>é€‰æ‹©è§†é¢‘ç”Ÿæˆ-é€‰æ‹© Seedance 2.0ï¼Œå¦‚æˆªå›¾æ‰€ç¤º</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f50805d737f545f1b773c72507862a22~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6ZmM5pmo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771567260&amp;x-signature=VELOz8MPqbqGY2luSc%2FYD4f%2FXtc%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h3 data-id="heading-2">è±†åŒ…APPç«¯</h3>
<p>å‡çº§åˆ°æœ€æ–°ç‰ˆè±†åŒ…ï¼Œä¸‹æ–¹å³å¯çœ‹åˆ°å…¥å£ã€‚å¯¹è¯æ¡†-Seedance2.0-é€‰æ‹© 2.0 æ¨¡å‹ï¼›</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/167cb74369614ebe8bf64879ead91ae3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6ZmM5pmo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771567260&amp;x-signature=v7R83hkwsUFtAH2nz%2B9u3jr7q7k%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h3 data-id="heading-3">ç«å±±å¼•æ“</h3>
<p>è®¿é—®å…¥å£ï¼š <a href="https://link.juejin.cn?target=https%3A%2F%2Fconsole.volcengine.com%2Fark%2Fregion%3Aark%2Bcn-beijing%2Fexperience%2Fvision%3FmodelId%3Ddoubao-seedance-2-0-260128%26tab%3DGenVideo" target="_blank" title="https://console.volcengine.com/ark/region:ark+cn-beijing/experience/vision?modelId=doubao-seedance-2-0-260128&amp;tab=GenVideo" ref="nofollow noopener noreferrer">console.volcengine.com/ark/region:â€¦</a></p>
<p>ç›´æ¥é€500ä¸‡tokenï¼Œè¯šæ„æ»¡æ»¡å¯ä»¥æ”¾å¿ƒè–…ã€‚å¤§æ¦‚å¯ç”Ÿæˆ1-2åˆ†é’Ÿè§†é¢‘ï¼Œä½“éªŒè¶³å¤Ÿã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a4c9752580ac4267b03887bd35a2846a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6ZmM5pmo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771567260&amp;x-signature=eGqnlVYCrHmMj7l3HYZ0zpt8ZSY%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æœ‰æ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥å»ä½“éªŒï¼Œæç¤ºè¯ç›´æ¥ç”¨æˆ‘ä»¬çš„å£è¯­è¡¨è¾¾å³å¯ã€‚</p>
<p><strong>æ„Ÿè°¢è¯»åˆ°è¿™é‡Œï¼Œå¦‚æœæ–‡ç« æœ‰å¸®åŠ©åˆ°ä½ ï¼Œæ¬¢è¿ç‚¹èµå…³æ³¨ã€‚æˆ‘æ˜¯é™Œæ™¨ï¼Œå’±ä»¬ä¸‹æ¬¡è§ã€‚</strong></p>
<h6 data-id="heading-4">ç›¸å…³å†…å®¹æ¨è</h6>
<h6 data-id="heading-5">4 æ­¥æå®š Claude code æ­å»ºï¼å°ç™½ä¹Ÿèƒ½è½»æ¾ä¸Šæ‰‹</h6>
<h6 data-id="heading-6">cozeå·¥ä½œæµè‡ªåŠ¨ç”Ÿæˆçˆ†ç«çš„æ˜Ÿåº§è¿åŠ¿å†…å®¹ï¼Œæ’ä»¶å…è´¹ï¼Œå»AIå‘³æˆåŠŸæ ‡åŸåˆ›</h6>
<h6 data-id="heading-7">çˆ†æ¬¾å°çº¢ä¹¦å¥åº·å…»ç”Ÿèµ›é“å›¾æ–‡ï¼ŒDeepseek+Cozeå·¥ä½œæµï¼Œ5åˆ†é’Ÿæ‰¹é‡ç”Ÿæˆ100ç¯‡ï¼Œé™„é€æ•™ç¨‹</h6>
<h6 data-id="heading-8">##### æ›´å¤šAIæ¢ç´¢åŠæ¡ˆä¾‹æ¬¢è¿æ‰«ç å¤‡æ³¨â€œAIâ€æ‹‰ä½ å…¥ç¾¤ã€‚</h6></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[NanoBot å‘é‡è®°å¿†ç³»ç»Ÿå‡çº§å®ç°é‡è¦è®°å¿†ç”¨ä¸ä¸¢å¤±]]></title>    <link>https://juejin.cn/post/7605807405307822143</link>    <guid>https://juejin.cn/post/7605807405307822143</guid>    <pubDate>2026-02-13T05:54:20.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605807405307822143" data-draft-id="7605539194690945024" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="NanoBot å‘é‡è®°å¿†ç³»ç»Ÿå‡çº§å®ç°é‡è¦è®°å¿†ç”¨ä¸ä¸¢å¤±"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-02-13T05:54:20.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è´ºå«å›½"/> <meta itemprop="url" content="https://juejin.cn/user/932842324370135"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            NanoBot å‘é‡è®°å¿†ç³»ç»Ÿå‡çº§å®ç°é‡è¦è®°å¿†ç”¨ä¸ä¸¢å¤±
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/932842324370135/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è´ºå«å›½
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-13T05:54:20.000Z" title="Fri Feb 13 2026 05:54:20 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    11
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">NanoBot å‘é‡è®°å¿†ç³»ç»Ÿå‡çº§å®æˆ˜æŒ‡å—ï¼ˆå®Œæ•´ç‰ˆï¼‰</h2>
<blockquote>
<p><strong>é¢„ä¼°æ—¶é—´</strong>: 15-20åˆ†é’Ÿ</p>
<p><strong>é‡è¦æç¤º</strong>: å¯ä»¥å°†è¿™ä¸ªæ–‡ç« ä¸­ç›´æ¥å–‚ç»™è¿è¡Œä¸­çš„nanobotè®©ä»–è‡ªåŠ¨è¿ç§»æ›¿æ¢</p>
</blockquote>
<hr/>
<h3 data-id="heading-1">ä¸€ã€é¡¹ç›®ä»‹ç»</h3>
<h4 data-id="heading-2">1.1 å‡çº§èƒŒæ™¯</h4>
<p>åŸç‰ˆNanoBotä½¿ç”¨ç®€å•çš„Markdownæ–‡ä»¶å­˜å‚¨è®°å¿†ï¼Œå­˜åœ¨ä»¥ä¸‹ç—›ç‚¹ï¼Œæœ¬æŒ‡å—è¯¦ç»†ä»‹ç»å¦‚ä½•å°† NanoBot çš„ç®€å• Markdown è®°å¿†ç³»ç»Ÿå‡çº§ä¸ºåŸºäº SQLite + å‘é‡åµŒå…¥çš„æ™ºèƒ½è®°å¿†ç³»ç»Ÿï¼Œå®ç°è¯­ä¹‰æ£€ç´¢ã€è‡ªåŠ¨ä¼˜åŒ–ã€é•¿ä¹…ä¿å­˜ã€‚</p>

























<table><thead><tr><th>ç¼ºé™·</th><th>å½±å“</th></tr></thead><tbody><tr><td>å…³é”®è¯åŒ¹é…</td><td>åªèƒ½ç²¾ç¡®åŒ¹é…ï¼Œæ— æ³•ç†è§£è¯­ä¹‰ï¼Œ"å‘é‚®ä»¶"å’Œ"é‚®ä»¶å‘é€"è¢«è®¤ä¸ºæ˜¯ä¸åŒçš„</td></tr><tr><td>æ— ä¼˜å…ˆçº§ç®¡ç†</td><td>é‡è¦è®°å¿†å’Œé—²èŠæ··åœ¨ä¸€èµ·ï¼Œæ£€ç´¢æ—¶å®¹æ˜“è¢«æ·¹æ²¡</td></tr><tr><td>æ‰‹åŠ¨ç»´æŠ¤</td><td>éœ€è¦äººå·¥æ¸…ç†æ—§æ–‡ä»¶ï¼Œéšç€ä½¿ç”¨æ—¶é—´è¶Šé•¿è¶Šæ··ä¹±</td></tr><tr><td>æ— ä¸Šä¸‹æ–‡å…³è”</td><td>æ— æ³•æ ¹æ®å¯¹è¯å†å²è‡ªåŠ¨æå–ç›¸å…³è®°å¿†</td></tr></tbody></table>
<h4 data-id="heading-3">1.2 å‡çº§åçš„ä¼˜åŠ¿</h4>
<ul>
<li>âœ… <strong>è¯­ä¹‰ç†è§£</strong>: "æ€ä¹ˆå¤„ç†é‚®ä»¶"èƒ½åŒ¹é…åˆ°"é‚®ä»¶å›å¤è¦é«˜è´¨é‡"</li>
<li>âœ… <strong>è‡ªåŠ¨ä¼˜åŒ–</strong>: è‡ªåŠ¨åˆå¹¶é‡å¤ã€æ¸…ç†æ— æ•ˆã€è°ƒæ•´ä¼˜å…ˆçº§</li>
<li>âœ… <strong>é•¿ä¹…ä¿å­˜</strong>: SQLiteå•æ–‡ä»¶å­˜å‚¨ï¼Œé«˜ä»·å€¼è®°å¿†æ°¸ä¸ä¸¢å¤±</li>
<li>âœ… <strong>è½»é‡æ— è´Ÿæ‹…</strong>: ä»…å¢åŠ 2ä¸ªPythonä¾èµ–ï¼Œæ€»å¤§å° &lt; 100MB</li>
</ul>
<hr/>
<h3 data-id="heading-4">äºŒã€æ ¸å¿ƒæ¶æ„è®¾è®¡</h3>
<h4 data-id="heading-5">2.1 ç›®å½•ç»“æ„ï¼ˆé¿å‘é‡ç‚¹ï¼‰</h4>
<p>âŒ <strong>é”™è¯¯åšæ³•</strong>ï¼ˆå•æ–‡ä»¶ï¼‰</p>
<pre><code class="hljs language-bash" lang="bash">nanobot/agent/
â”œâ”€â”€ memory.py          <span class="hljs-comment"># æ‰€æœ‰ä»£ç å¡åœ¨ä¸€ä¸ªæ–‡ä»¶</span>
â””â”€â”€ ...
</code></pre>
<p>âœ… <strong>æ­£ç¡®åšæ³•</strong>ï¼ˆPythonåŒ…ï¼‰</p>
<pre><code class="hljs language-bash" lang="bash">nanobot/agent/
â”œâ”€â”€ memory/                    <span class="hljs-comment"># PythonåŒ…ç›®å½•</span>
â”‚   â”œâ”€â”€ __init__.py           <span class="hljs-comment"># åŒ…å…¥å£ï¼Œå…³é”®ï¼</span>
â”‚   â”œâ”€â”€ store.py              <span class="hljs-comment"># åŸæœ‰ MemoryStore ç±»</span>
â”‚   â””â”€â”€ vector_store.py       <span class="hljs-comment"># å¢å¼ºç‰ˆ EnhancedMemoryStore</span>
â””â”€â”€ ...
</code></pre>
<blockquote>
<p>âš ï¸ <strong>é¿å‘æç¤º</strong>: å¿…é¡»å°† <code>memory.py</code> æ”¹ä¸º <code>memory/</code> ç›®å½•ï¼Œå¦åˆ™åœ¨ Windows å’Œ Linux ä¸Šä¼šå‡ºç°å¯¼å…¥é”™è¯¯ï¼</p>
</blockquote>
<h4 data-id="heading-6">2.2 æ ¸å¿ƒç»„ä»¶</h4>

























<table><thead><tr><th>ç»„ä»¶</th><th>åŠŸèƒ½</th><th>æŠ€æœ¯æ ˆ</th></tr></thead><tbody><tr><td><code>MemoryStore</code></td><td>åŸºç¡€æ–‡ä»¶å­˜å‚¨</td><td>Markdown + æ–‡ä»¶IO</td></tr><tr><td><code>EnhancedMemoryStore</code></td><td>å¢å¼ºå‘é‡å­˜å‚¨</td><td>SQLite + sentence-transformers</td></tr><tr><td><code>è‡ªä¼˜åŒ–å™¨</code></td><td>è‡ªåŠ¨ç»´æŠ¤è®°å¿†</td><td>APScheduler + ç›¸ä¼¼åº¦è®¡ç®—</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-7">ä¸‰ã€å®Œæ•´ä»£ç å®ç°</h3>
<h4 data-id="heading-8">3.1 memory/<strong>init</strong>.pyï¼ˆåŒ…å…¥å£ï¼‰</h4>
<p>è¿™æ˜¯<strong>æœ€å…³é”®çš„æ–‡ä»¶</strong>ï¼Œå®ƒå†³å®šäº†å¤–éƒ¨å¦‚ä½•å¯¼å…¥ä½ çš„æ¨¡å—ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># nanobot/agent/memory/__init__.py</span>
<span class="hljs-string">"""
NanoBot è®°å¿†ç³»ç»ŸåŒ…
æ”¯æŒå‘åå…¼å®¹ï¼šæœªå®‰è£…å‘é‡ä¾èµ–æ—¶è‡ªåŠ¨å›é€€åˆ°æ–‡ä»¶å­˜å‚¨
"""</span>

<span class="hljs-comment"># å¯¼å…¥åŸºç¡€å­˜å‚¨ï¼ˆåŸæœ‰åŠŸèƒ½ï¼‰</span>
<span class="hljs-keyword">from</span> nanobot.agent.memory.store <span class="hljs-keyword">import</span> MemoryStore

<span class="hljs-comment"># å°è¯•å¯¼å…¥å¢å¼ºå­˜å‚¨ï¼Œå¤±è´¥æ—¶å›é€€</span>
<span class="hljs-keyword">try</span>:
    <span class="hljs-keyword">from</span> nanobot.agent.memory.vector_store <span class="hljs-keyword">import</span> EnhancedMemoryStore
<span class="hljs-keyword">except</span> ImportError:
    <span class="hljs-comment"># å¦‚æœæœªå®‰è£… sentence-transformersï¼Œä½¿ç”¨åŸºç¡€ç‰ˆ</span>
    EnhancedMemoryStore = MemoryStore

__all__ = [<span class="hljs-string">'MemoryStore'</span>, <span class="hljs-string">'EnhancedMemoryStore'</span>]
</code></pre>
<p><strong>è®¾è®¡äº®ç‚¹</strong>:</p>
<ul>
<li>ä½¿ç”¨ <code>try/except</code> å®ç°å®¹é”™å¯¼å…¥</li>
<li>ç¡®ä¿ç”¨æˆ·æœªå®‰è£…ä¾èµ–æ—¶ä¸ä¼šæŠ¥é”™ï¼Œè‡ªåŠ¨å›é€€åˆ°åŸæœ‰åŠŸèƒ½</li>
</ul>
<hr/>
<h4 data-id="heading-9">3.2 memory/store.pyï¼ˆåŸºç¡€å­˜å‚¨ç±»ï¼‰</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># nanobot/agent/memory/store.py</span>
<span class="hljs-string">"""
åŸºç¡€è®°å¿†å­˜å‚¨ç±»
ä¿æŒå‘åå…¼å®¹ï¼Œæ”¯æŒMarkdownæ–‡ä»¶å­˜å‚¨
"""</span>

<span class="hljs-keyword">import</span> os
<span class="hljs-keyword">import</span> json
<span class="hljs-keyword">from</span> datetime <span class="hljs-keyword">import</span> datetime
<span class="hljs-keyword">from</span> pathlib <span class="hljs-keyword">import</span> Path
<span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">List</span>, <span class="hljs-type">Dict</span>, <span class="hljs-type">Optional</span>


<span class="hljs-keyword">class</span> <span class="hljs-title class_">MemoryStore</span>:
    <span class="hljs-string">"""
    åŸºç¡€è®°å¿†å­˜å‚¨ç±»
    ä½¿ç”¨Markdownæ–‡ä»¶æŒä¹…åŒ–å­˜å‚¨
    """</span>
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, workspace: Path</span>):
        <span class="hljs-string">"""
        åˆå§‹åŒ–è®°å¿†å­˜å‚¨
        
        Args:
            workspace: NanoBotå·¥ä½œç›®å½•
        """</span>
        self.workspace = workspace
        self.memory_file = workspace / <span class="hljs-string">"memory"</span> / <span class="hljs-string">"MEMORY.md"</span>
        self.memory_file.parent.mkdir(parents=<span class="hljs-literal">True</span>, exist_ok=<span class="hljs-literal">True</span>)
        
        <span class="hljs-comment"># å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ›å»ºåˆå§‹æ–‡ä»¶</span>
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> self.memory_file.exists():
            self.memory_file.write_text(<span class="hljs-string">"# NanoBot è®°å¿†æ¡£æ¡ˆ\n\n"</span>, encoding=<span class="hljs-string">'utf-8'</span>)
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">self, content: <span class="hljs-built_in">str</span>, category: <span class="hljs-built_in">str</span> = <span class="hljs-string">"general"</span></span>) -&gt; <span class="hljs-built_in">bool</span>:
        <span class="hljs-string">"""
        æ·»åŠ è®°å¿†
        
        Args:
            content: è®°å¿†å†…å®¹
            category: åˆ†ç±»æ ‡ç­¾
            
        Returns:
            æ˜¯å¦æ·»åŠ æˆåŠŸ
        """</span>
        timestamp = datetime.now().isoformat()
        entry = <span class="hljs-string">f"\n## [<span class="hljs-subst">{category}</span>] <span class="hljs-subst">{timestamp}</span>\n<span class="hljs-subst">{content}</span>\n"</span>
        
        <span class="hljs-keyword">try</span>:
            <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(self.memory_file, <span class="hljs-string">'a'</span>, encoding=<span class="hljs-string">'utf-8'</span>) <span class="hljs-keyword">as</span> f:
                f.write(entry)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span>
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ä¿å­˜è®°å¿†å¤±è´¥: <span class="hljs-subst">{e}</span>"</span>)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span>
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">search</span>(<span class="hljs-params">self, keyword: <span class="hljs-built_in">str</span>, limit: <span class="hljs-built_in">int</span> = <span class="hljs-number">5</span></span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-type">Dict</span>]:
        <span class="hljs-string">"""
        å…³é”®è¯æœç´¢ï¼ˆåŸºç¡€ç‰ˆï¼‰
        
        Args:
            keyword: æœç´¢å…³é”®è¯
            limit: è¿”å›ç»“æœæ•°é‡
            
        Returns:
            åŒ¹é…çš„è®°å¿†åˆ—è¡¨
        """</span>
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> self.memory_file.exists():
            <span class="hljs-keyword">return</span> []
        
        results = []
        <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(self.memory_file, <span class="hljs-string">'r'</span>, encoding=<span class="hljs-string">'utf-8'</span>) <span class="hljs-keyword">as</span> f:
            content = f.read()
        
        <span class="hljs-comment"># ç®€å•çš„å…³é”®è¯åŒ¹é…</span>
        sections = content.split(<span class="hljs-string">"## ["</span>)
        <span class="hljs-keyword">for</span> section <span class="hljs-keyword">in</span> sections[<span class="hljs-number">1</span>:]:  <span class="hljs-comment"># è·³è¿‡ç¬¬ä¸€ä¸ªç©ºéƒ¨åˆ†</span>
            <span class="hljs-keyword">if</span> keyword.lower() <span class="hljs-keyword">in</span> section.lower():
                lines = section.split(<span class="hljs-string">"\n"</span>)
                <span class="hljs-keyword">if</span> lines:
                    header = lines[<span class="hljs-number">0</span>].strip()
                    body = <span class="hljs-string">"\n"</span>.join(lines[<span class="hljs-number">1</span>:]).strip()
                    results.append({
                        <span class="hljs-string">"header"</span>: header,
                        <span class="hljs-string">"content"</span>: body[:<span class="hljs-number">200</span>] + <span class="hljs-string">"..."</span> <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(body) &gt; <span class="hljs-number">200</span> <span class="hljs-keyword">else</span> body
                    })
        
        <span class="hljs-keyword">return</span> results[:limit]
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_context</span>(<span class="hljs-params">self, query: <span class="hljs-built_in">str</span>, n_turns: <span class="hljs-built_in">int</span> = <span class="hljs-number">5</span></span>) -&gt; <span class="hljs-built_in">str</span>:
        <span class="hljs-string">"""
        è·å–å¯¹è¯ä¸Šä¸‹æ–‡
        
        Args:
            query: æŸ¥è¯¢è¯
            n_turns: è¿”å›è®°å¿†æ¡æ•°
            
        Returns:
            æ ¼å¼åŒ–çš„ä¸Šä¸‹æ–‡å­—ç¬¦ä¸²
        """</span>
        results = self.search(query, limit=n_turns)
        
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> results:
            <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>
        
        context_parts = []
        <span class="hljs-keyword">for</span> r <span class="hljs-keyword">in</span> results:
            context_parts.append(<span class="hljs-string">f"- <span class="hljs-subst">{r[<span class="hljs-string">'header'</span>]}</span>: <span class="hljs-subst">{r[<span class="hljs-string">'content'</span>]}</span>"</span>)
        
        <span class="hljs-keyword">return</span> <span class="hljs-string">"\n"</span>.join(context_parts)
</code></pre>
<hr/>
<h4 data-id="heading-10">3.3 memory/vector_store.pyï¼ˆå¢å¼ºå‘é‡å­˜å‚¨ - ç¬¬ä¸€éƒ¨åˆ†ï¼‰</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># nanobot/agent/memory/vector_store.py</span>
<span class="hljs-string">"""
å¢å¼ºç‰ˆè®°å¿†å­˜å‚¨ï¼šSQLite + å‘é‡åµŒå…¥
å®ç°è¯­ä¹‰æ£€ç´¢ã€è‡ªåŠ¨ä¼˜åŒ–ã€é•¿ä¹…ä¿å­˜
"""</span>

<span class="hljs-keyword">import</span> sqlite3
<span class="hljs-keyword">import</span> json
<span class="hljs-keyword">import</span> pickle
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
<span class="hljs-keyword">from</span> datetime <span class="hljs-keyword">import</span> datetime, timedelta
<span class="hljs-keyword">from</span> pathlib <span class="hljs-keyword">import</span> Path
<span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">List</span>, <span class="hljs-type">Dict</span>, <span class="hljs-type">Optional</span>, <span class="hljs-type">Tuple</span>

<span class="hljs-comment"># å°è¯•å¯¼å…¥ sentence-transformersï¼Œå¦‚æœæœªå®‰è£…åˆ™æç¤ºå®‰è£…</span>
<span class="hljs-keyword">try</span>:
    <span class="hljs-keyword">from</span> sentence_transformers <span class="hljs-keyword">import</span> SentenceTransformer
    VECTOR_AVAILABLE = <span class="hljs-literal">True</span>
<span class="hljs-keyword">except</span> ImportError:
    VECTOR_AVAILABLE = <span class="hljs-literal">False</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"âš ï¸ æç¤ºï¼šæœªå®‰è£… sentence-transformersï¼Œè¯·è¿è¡Œ: pip install sentence-transformers"</span>)

<span class="hljs-comment"># ç»§æ‰¿åŸæœ‰ MemoryStore å®ç°å‘åå…¼å®¹</span>
<span class="hljs-keyword">from</span> nanobot.agent.memory.store <span class="hljs-keyword">import</span> MemoryStore


<span class="hljs-keyword">class</span> <span class="hljs-title class_">EnhancedMemoryStore</span>(<span class="hljs-title class_ inherited__">MemoryStore</span>):
    <span class="hljs-string">"""
    å¢å¼ºç‰ˆè®°å¿†å­˜å‚¨ç³»ç»Ÿ
    
    ç‰¹æ€§:
    - è¯­ä¹‰æ£€ç´¢ï¼šåŸºäºå‘é‡ç›¸ä¼¼åº¦ï¼Œç†è§£æŸ¥è¯¢æ„å›¾
    - è‡ªåŠ¨ä¼˜åŒ–ï¼šåˆå¹¶é‡å¤ã€æ¸…ç†æ— æ•ˆã€è°ƒæ•´ä¼˜å…ˆçº§
    - é•¿ä¹…ä¿å­˜ï¼šSQLite æŒä¹…åŒ–ï¼Œé«˜ä»·å€¼è®°å¿†ä¿æŠ¤
    - å‘åå…¼å®¹ï¼šç»§æ‰¿ MemoryStoreï¼ŒåŸæœ‰ API å®Œå…¨å…¼å®¹
    """</span>
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, workspace: Path, model_name: <span class="hljs-built_in">str</span> = <span class="hljs-string">'all-MiniLM-L6-v2'</span></span>):
        <span class="hljs-string">"""
        åˆå§‹åŒ–å¢å¼ºè®°å¿†ç³»ç»Ÿ
        
        Args:
            workspace: NanoBot å·¥ä½œç›®å½•
            model_name: åµŒå…¥æ¨¡å‹åç§°ï¼ˆé»˜è®¤ 80MB è½»é‡æ¨¡å‹ï¼‰
        """</span>
        <span class="hljs-comment"># è°ƒç”¨çˆ¶ç±»åˆå§‹åŒ–ï¼ˆä¿æŒå‘åå…¼å®¹ï¼‰</span>
        <span class="hljs-built_in">super</span>().__init__(workspace)
        
        self.workspace = workspace
        self.db_path = workspace / <span class="hljs-string">"memory"</span> / <span class="hljs-string">"vector_memory.db"</span>
        self.db_path.parent.mkdir(parents=<span class="hljs-literal">True</span>, exist_ok=<span class="hljs-literal">True</span>)
        
        <span class="hljs-comment"># æ£€æŸ¥ä¾èµ–</span>
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> VECTOR_AVAILABLE:
            <span class="hljs-keyword">raise</span> ImportError(
                <span class="hljs-string">"è¯·å…ˆå®‰è£…ä¾èµ–ï¼š pip install sentence-transformers"</span>
            )
        
        <span class="hljs-comment"># åŠ è½½åµŒå…¥æ¨¡å‹ï¼ˆé¦–æ¬¡åŠ è½½çº¦éœ€ 2-3 ç§’ï¼‰</span>
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"ğŸ§  åŠ è½½å‘é‡åµŒå…¥æ¨¡å‹..."</span>)
        self.model = SentenceTransformer(model_name)
        self.embedding_dim = self.model.get_sentence_embedding_dimension()
        
        <span class="hljs-comment"># åˆå§‹åŒ–æ•°æ®åº“</span>
        self._init_database()
        
        <span class="hljs-comment"># åŠ è½½æˆ–åˆå§‹åŒ–æ£€ç´¢å‚æ•°ï¼ˆç”¨äºè‡ªä¼˜åŒ–ï¼‰</span>
        self.retrieval_params = self._load_retrieval_params()
        
        <span class="hljs-comment"># æ“ä½œè®¡æ•°å™¨ï¼ˆç”¨äºè§¦å‘è½»é‡ä¼˜åŒ–ï¼‰</span>
        self.operation_count = <span class="hljs-number">0</span>
        
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"âœ… å‘é‡è®°å¿†ç³»ç»Ÿå°±ç»ª | ç»´åº¦: <span class="hljs-subst">{self.embedding_dim}</span> | æ•°æ®åº“: <span class="hljs-subst">{self.db_path}</span>"</span>)
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_init_database</span>(<span class="hljs-params">self</span>):
        <span class="hljs-string">"""åˆå§‹åŒ– SQLite æ•°æ®åº“è¡¨ç»“æ„"""</span>
        <span class="hljs-keyword">with</span> sqlite3.connect(self.db_path) <span class="hljs-keyword">as</span> conn:
            conn.execute(<span class="hljs-string">"""
                CREATE TABLE IF NOT EXISTS memories (
                    id INTEGER PRIMARY KEY AUTOINCREMENT,
                    content TEXT NOT NULL,
                    category TEXT DEFAULT 'general',
                    priority REAL DEFAULT 5.0,
                    access_count INTEGER DEFAULT 0,
                    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                    last_accessed TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                    is_deleted INTEGER DEFAULT 0,
                    deleted_reason TEXT,
                    embedding BLOB
                )
            """</span>)
            
            <span class="hljs-comment"># åˆ›å»ºç´¢å¼•åŠ é€Ÿæ£€ç´¢</span>
            conn.execute(<span class="hljs-string">"CREATE INDEX IF NOT EXISTS idx_priority ON memories(priority DESC)"</span>)
            conn.execute(<span class="hljs-string">"CREATE INDEX IF NOT EXISTS idx_category ON memories(category)"</span>)
            conn.execute(<span class="hljs-string">"CREATE INDEX IF NOT EXISTS idx_deleted ON memories(is_deleted)"</span>)
            conn.commit()
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_load_retrieval_params</span>(<span class="hljs-params">self</span>) -&gt; <span class="hljs-type">Dict</span>:
        <span class="hljs-string">"""åŠ è½½æ£€ç´¢å‚æ•°ï¼ˆç”¨äºè‡ªä¼˜åŒ–ï¼‰"""</span>
        params_file = self.workspace / <span class="hljs-string">"memory"</span> / <span class="hljs-string">"retrieval_params.json"</span>
        <span class="hljs-keyword">if</span> params_file.exists():
            <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(params_file, <span class="hljs-string">'r'</span>) <span class="hljs-keyword">as</span> f:
                <span class="hljs-keyword">return</span> json.load(f)
        <span class="hljs-comment"># é»˜è®¤å‚æ•°</span>
        <span class="hljs-keyword">return</span> {
            <span class="hljs-string">"top_k"</span>: <span class="hljs-number">5</span>,
            <span class="hljs-string">"similarity_threshold"</span>: <span class="hljs-number">0.7</span>,
            <span class="hljs-string">"recall_rate_history"</span>: []
        }
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_save_retrieval_params</span>(<span class="hljs-params">self</span>):
        <span class="hljs-string">"""ä¿å­˜æ£€ç´¢å‚æ•°"""</span>
        params_file = self.workspace / <span class="hljs-string">"memory"</span> / <span class="hljs-string">"retrieval_params.json"</span>
        <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(params_file, <span class="hljs-string">'w'</span>) <span class="hljs-keyword">as</span> f:
            json.dump(self.retrieval_params, f)
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_get_embedding</span>(<span class="hljs-params">self, text: <span class="hljs-built_in">str</span></span>) -&gt; np.ndarray:
        <span class="hljs-string">"""
        ç”Ÿæˆæ–‡æœ¬çš„å‘é‡åµŒå…¥
        
        Args:
            text: è¾“å…¥æ–‡æœ¬
            
        Returns:
            float16 æ ¼å¼çš„å‘é‡ï¼ˆèŠ‚çœ50%å­˜å‚¨ç©ºé—´ï¼‰
        """</span>
        embedding = self.model.encode(text, convert_to_numpy=<span class="hljs-literal">True</span>)
        <span class="hljs-comment"># float16 å‹ç¼©èŠ‚çœ 50% å­˜å‚¨ç©ºé—´</span>
        <span class="hljs-keyword">return</span> embedding.astype(np.float16)
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">self, content: <span class="hljs-built_in">str</span>, category: <span class="hljs-built_in">str</span> = <span class="hljs-string">"general"</span>, 
            priority: <span class="hljs-built_in">float</span> = <span class="hljs-number">5.0</span></span>) -&gt; <span class="hljs-built_in">bool</span>:
        <span class="hljs-string">"""
        æ·»åŠ è®°å¿†ï¼ˆå¢å¼ºç‰ˆï¼‰
        
        åŒæ—¶å†™å…¥ï¼š
        1. çˆ¶ç±»çš„ Markdown æ–‡ä»¶ï¼ˆå‘åå…¼å®¹ï¼‰
        2. å‘é‡æ•°æ®åº“ï¼ˆè¯­ä¹‰æ£€ç´¢ï¼‰
        
        Args:
            content: è®°å¿†å†…å®¹
            category: åˆ†ç±»æ ‡ç­¾ï¼ˆcore_rule/preference/tech_noteç­‰ï¼‰
            priority: ä¼˜å…ˆçº§ 0-10ï¼Œè¶Šé«˜è¶Šé‡è¦ï¼ˆ&gt;=7 ä¸ºé•¿ä¹…ä¿æŠ¤ï¼‰
            
        Returns:
            æ˜¯å¦æ·»åŠ æˆåŠŸ
        """</span>
        <span class="hljs-comment"># 1. è°ƒç”¨çˆ¶ç±»æ–¹æ³•å†™å…¥æ–‡ä»¶ï¼ˆå‘åå…¼å®¹ï¼‰</span>
        <span class="hljs-built_in">super</span>().add(content, category)
        
        <span class="hljs-keyword">try</span>:
            <span class="hljs-comment"># 2. ç”Ÿæˆå‘é‡åµŒå…¥</span>
            embedding = self._get_embedding(content)
            embedding_blob = pickle.dumps(embedding)
            
            <span class="hljs-comment"># 3. å­˜å…¥ SQLite</span>
            <span class="hljs-keyword">with</span> sqlite3.connect(self.db_path) <span class="hljs-keyword">as</span> conn:
                conn.execute(<span class="hljs-string">"""
                    INSERT INTO memories 
                    (content, category, priority, embedding)
                    VALUES (?, ?, ?, ?)
                """</span>, (content, category, priority, embedding_blob))
                conn.commit()
            
            <span class="hljs-comment"># 4. è§¦å‘è½»é‡ä¼˜åŒ–ï¼ˆæ¯ 10 æ¬¡æ“ä½œï¼‰</span>
            self.operation_count += <span class="hljs-number">1</span>
            <span class="hljs-keyword">if</span> self.operation_count &gt;= <span class="hljs-number">10</span>:
                self._lightweight_optimize()
                self.operation_count = <span class="hljs-number">0</span>
            
            <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span>
            
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å‘é‡å­˜å‚¨å¤±è´¥: <span class="hljs-subst">{e}</span>"</span>)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span>
</code></pre>
<hr/>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">search</span>(<span class="hljs-params">self, query: <span class="hljs-built_in">str</span>, limit: <span class="hljs-built_in">int</span> = <span class="hljs-literal">None</span>, 
           use_semantic: <span class="hljs-built_in">bool</span> = <span class="hljs-literal">True</span></span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-type">Dict</span>]:
    <span class="hljs-string">"""
    æœç´¢è®°å¿†ï¼ˆå¢å¼ºç‰ˆï¼‰
    
    æ”¯æŒä¸¤ç§æ¨¡å¼ï¼š
    - è¯­ä¹‰æ£€ç´¢ï¼ˆé»˜è®¤ï¼‰ï¼šç†è§£æŸ¥è¯¢æ„å›¾
    - å…³é”®è¯æ£€ç´¢ï¼šä¸çˆ¶ç±»ä¿æŒä¸€è‡´
    
    è‡ªåŠ¨æ›´æ–°è®¿é—®ç»Ÿè®¡å’Œä¼˜å…ˆçº§
    
    Args:
        query: æŸ¥è¯¢è¯
        limit: è¿”å›ç»“æœæ•°é‡
        use_semantic: æ˜¯å¦ä½¿ç”¨è¯­ä¹‰æ£€ç´¢
        
    Returns:
        åŒ¹é…çš„è®°å¿†åˆ—è¡¨ï¼ˆåŒ…å«ç›¸ä¼¼åº¦å¾—åˆ†ï¼‰
    """</span>
    <span class="hljs-keyword">if</span> limit <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:
        limit = self.retrieval_params[<span class="hljs-string">"top_k"</span>]
    
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> use_semantic:
        <span class="hljs-comment"># å›é€€åˆ°çˆ¶ç±»çš„å…³é”®è¯æœç´¢</span>
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">super</span>().search(query, limit)
    
    <span class="hljs-keyword">try</span>:
        <span class="hljs-comment"># 1. ç”ŸæˆæŸ¥è¯¢å‘é‡</span>
        query_embedding = self._get_embedding(query)
        
        <span class="hljs-comment"># 2. æ£€ç´¢æ‰€æœ‰æœ‰æ•ˆè®°å¿†</span>
        <span class="hljs-keyword">with</span> sqlite3.connect(self.db_path) <span class="hljs-keyword">as</span> conn:
            cursor = conn.execute(<span class="hljs-string">"""
                SELECT id, content, category, priority, access_count, 
                       created_at, embedding
                FROM memories
                WHERE is_deleted = 0
                ORDER BY priority DESC
            """</span>)
            
            memories = cursor.fetchall()
        
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> memories:
            <span class="hljs-keyword">return</span> []
        
        <span class="hljs-comment"># 3. è®¡ç®—ç›¸ä¼¼åº¦</span>
        similarities = []
        <span class="hljs-keyword">for</span> mem <span class="hljs-keyword">in</span> memories:
            mem_id, content, category, priority, access_count, created_at, emb_blob = mem
            mem_embedding = pickle.loads(emb_blob)
            
            <span class="hljs-comment"># ä½™å¼¦ç›¸ä¼¼åº¦</span>
            similarity = np.dot(query_embedding, mem_embedding) / (
                np.linalg.norm(query_embedding) * np.linalg.norm(mem_embedding)
            )
            
            <span class="hljs-comment"># ç»¼åˆè¯„åˆ† = ç›¸ä¼¼åº¦ * ä¼˜å…ˆçº§æƒé‡</span>
            score = similarity * (<span class="hljs-number">1</span> + priority / <span class="hljs-number">10</span>)
            similarities.append((mem_id, content, category, priority, 
                               access_count, created_at, score, similarity))
        
        <span class="hljs-comment"># 4. è¿‡æ»¤å’Œæ’åº</span>
        threshold = self.retrieval_params[<span class="hljs-string">"similarity_threshold"</span>]
        filtered = [s <span class="hljs-keyword">for</span> s <span class="hljs-keyword">in</span> similarities <span class="hljs-keyword">if</span> s[<span class="hljs-number">7</span>] &gt;= threshold]
        filtered.sort(key=<span class="hljs-keyword">lambda</span> x: x[<span class="hljs-number">6</span>], reverse=<span class="hljs-literal">True</span>)
        
        results = filtered[:limit]
        
        <span class="hljs-comment"># 5. æ›´æ–°è®¿é—®ç»Ÿè®¡ï¼ˆç”¨äºè‡ªä¼˜åŒ–ï¼‰</span>
        self._update_access_stats([r[<span class="hljs-number">0</span>] <span class="hljs-keyword">for</span> r <span class="hljs-keyword">in</span> results])
        
        <span class="hljs-comment"># 6. è¿”å›æ ¼å¼åŒ–ç»“æœ</span>
        <span class="hljs-keyword">return</span> [{
            <span class="hljs-string">"id"</span>: r[<span class="hljs-number">0</span>],
            <span class="hljs-string">"content"</span>: r[<span class="hljs-number">1</span>],
            <span class="hljs-string">"category"</span>: r[<span class="hljs-number">2</span>],
            <span class="hljs-string">"priority"</span>: r[<span class="hljs-number">3</span>],
            <span class="hljs-string">"score"</span>: <span class="hljs-built_in">round</span>(r[<span class="hljs-number">6</span>], <span class="hljs-number">3</span>),
            <span class="hljs-string">"similarity"</span>: <span class="hljs-built_in">round</span>(r[<span class="hljs-number">7</span>], <span class="hljs-number">3</span>)
        } <span class="hljs-keyword">for</span> r <span class="hljs-keyword">in</span> results]
        
    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"è¯­ä¹‰æœç´¢å¤±è´¥: <span class="hljs-subst">{e}</span>ï¼Œå›é€€åˆ°å…³é”®è¯æœç´¢"</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">super</span>().search(query, limit)

<span class="hljs-keyword">def</span> <span class="hljs-title function_">_update_access_stats</span>(<span class="hljs-params">self, memory_ids: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]</span>):
    <span class="hljs-string">"""
    æ›´æ–°è®°å¿†è®¿é—®ç»Ÿè®¡ï¼ˆç”¨äºä¼˜å…ˆçº§è‡ªä¼˜åŒ–ï¼‰
    
    æ¯æ¬¡è®¿é—®åï¼Œä¼˜å…ˆçº§å¾®å¾®æå‡ï¼ˆä¸Šé™ 10ï¼‰
    """</span>
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> memory_ids:
        <span class="hljs-keyword">return</span>
    
    <span class="hljs-keyword">with</span> sqlite3.connect(self.db_path) <span class="hljs-keyword">as</span> conn:
        <span class="hljs-keyword">for</span> mem_id <span class="hljs-keyword">in</span> memory_ids:
            conn.execute(<span class="hljs-string">"""
                UPDATE memories
                SET access_count = access_count + 1,
                    last_accessed = CURRENT_TIMESTAMP,
                    priority = MIN(10.0, priority + 0.1)
                WHERE id = ?
            """</span>, (mem_id,))
        conn.commit()

<span class="hljs-keyword">def</span> <span class="hljs-title function_">get_context</span>(<span class="hljs-params">self, query: <span class="hljs-built_in">str</span>, n_turns: <span class="hljs-built_in">int</span> = <span class="hljs-number">5</span></span>) -&gt; <span class="hljs-built_in">str</span>:
    <span class="hljs-string">"""
    è·å–å¯¹è¯ä¸Šä¸‹æ–‡
    
    ç”¨äº Agent Loop ä¸­æ„é€  promptï¼Œè‡ªåŠ¨æå–ç›¸å…³è®°å¿†
    
    Args:
        query: ç”¨æˆ·æŸ¥è¯¢
        n_turns: è¿”å›è®°å¿†æ¡æ•°
        
    Returns:
        æ ¼å¼åŒ–çš„ä¸Šä¸‹æ–‡å­—ç¬¦ä¸²
    """</span>
    results = self.search(query, limit=n_turns)
    
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> results:
        <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>
    
    context_parts = []
    <span class="hljs-keyword">for</span> r <span class="hljs-keyword">in</span> results:
        priority_marker = <span class="hljs-string">"ğŸ”´"</span> <span class="hljs-keyword">if</span> r[<span class="hljs-string">'priority'</span>] &gt;= <span class="hljs-number">7</span> <span class="hljs-keyword">else</span> <span class="hljs-string">"âšª"</span>
        context_parts.append(
            <span class="hljs-string">f"<span class="hljs-subst">{priority_marker}</span> [<span class="hljs-subst">{r[<span class="hljs-string">'category'</span>]}</span>] <span class="hljs-subst">{r[<span class="hljs-string">'content'</span>]}</span>"</span>
        )
    
    <span class="hljs-keyword">return</span> <span class="hljs-string">"\n"</span>.join(context_parts)

<span class="hljs-keyword">def</span> <span class="hljs-title function_">delete</span>(<span class="hljs-params">self, memory_id: <span class="hljs-built_in">int</span>, reason: <span class="hljs-built_in">str</span> = <span class="hljs-string">""</span></span>) -&gt; <span class="hljs-built_in">bool</span>:
    <span class="hljs-string">"""
    è½¯åˆ é™¤è®°å¿†ï¼ˆå¯æ¢å¤ï¼‰
    
    é«˜ä¼˜å…ˆçº§è®°å¿†ï¼ˆ&gt;=7ï¼‰ä¼šæç¤ºè­¦å‘Š
    
    Args:
        memory_id: è®°å¿†ID
        reason: åˆ é™¤åŸå› 
        
    Returns:
        æ˜¯å¦åˆ é™¤æˆåŠŸ
    """</span>
    <span class="hljs-keyword">with</span> sqlite3.connect(self.db_path) <span class="hljs-keyword">as</span> conn:
        <span class="hljs-comment"># æ£€æŸ¥ä¼˜å…ˆçº§</span>
        cursor = conn.execute(
            <span class="hljs-string">"SELECT priority, content FROM memories WHERE id = ?"</span>,
            (memory_id,)
        )
        row = cursor.fetchone()
        
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> row:
            <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span>
        
        priority, content = row
        <span class="hljs-keyword">if</span> priority &gt;= <span class="hljs-number">7</span>:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"âš ï¸ è­¦å‘Šï¼šåˆ é™¤é«˜ä¼˜å…ˆçº§è®°å¿†ï¼ˆ<span class="hljs-subst">{priority}</span>åˆ†ï¼‰: <span class="hljs-subst">{content[:<span class="hljs-number">50</span>]}</span>..."</span>)
        
        <span class="hljs-comment"># è½¯åˆ é™¤</span>
        conn.execute(<span class="hljs-string">"""
            UPDATE memories
            SET is_deleted = 1, deleted_reason = ?
            WHERE id = ?
        """</span>, (reason, memory_id))
        conn.commit()
    
    <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span>

<span class="hljs-keyword">def</span> <span class="hljs-title function_">restore</span>(<span class="hljs-params">self, memory_id: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">bool</span>:
    <span class="hljs-string">"""æ¢å¤è½¯åˆ é™¤çš„è®°å¿†"""</span>
    <span class="hljs-keyword">with</span> sqlite3.connect(self.db_path) <span class="hljs-keyword">as</span> conn:
        conn.execute(<span class="hljs-string">"""
            UPDATE memories
            SET is_deleted = 0, deleted_reason = NULL
            WHERE id = ?
        """</span>, (memory_id,))
        conn.commit()
    <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span>
</code></pre>
<hr/>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">_lightweight_optimize</span>(<span class="hljs-params">self</span>):
    <span class="hljs-string">"""
    è½»é‡ä¼˜åŒ–ï¼ˆæ¯10æ¬¡æ“ä½œè§¦å‘ï¼‰
    
    - åˆå¹¶é‡å¤è®°å¿†ï¼ˆç›¸ä¼¼åº¦ &gt; 0.9ï¼‰
    - æ¸…ç†ä½ä»·å€¼è®°å¿†ï¼ˆä¼˜å…ˆçº§ &lt; 3 ä¸” 30å¤©æœªè®¿é—®ï¼‰
    """</span>
    <span class="hljs-keyword">try</span>:
        <span class="hljs-keyword">with</span> sqlite3.connect(self.db_path) <span class="hljs-keyword">as</span> conn:
            <span class="hljs-comment"># 1. æŸ¥æ‰¾å¹¶æ ‡è®°é‡å¤è®°å¿†</span>
            cursor = conn.execute(<span class="hljs-string">"""
                SELECT id, content, embedding FROM memories
                WHERE is_deleted = 0
                ORDER BY priority DESC, created_at ASC
            """</span>)
            memories = cursor.fetchall()
            
            to_merge = []
            <span class="hljs-keyword">for</span> i, (id1, content1, emb1_blob) <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(memories):
                <span class="hljs-keyword">if</span> id1 <span class="hljs-keyword">in</span> [m[<span class="hljs-number">1</span>] <span class="hljs-keyword">for</span> m <span class="hljs-keyword">in</span> to_merge]:
                    <span class="hljs-keyword">continue</span>
                
                emb1 = pickle.loads(emb1_blob)
                <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(i + <span class="hljs-number">1</span>, <span class="hljs-built_in">len</span>(memories)):
                    id2, content2, emb2_blob = memories[j]
                    emb2 = pickle.loads(emb2_blob)
                    
                    similarity = np.dot(emb1, emb2) / (
                        np.linalg.norm(emb1) * np.linalg.norm(emb2)
                    )
                    
                    <span class="hljs-keyword">if</span> similarity &gt; <span class="hljs-number">0.9</span>:
                        to_merge.append((id1, id2, similarity))
            
            <span class="hljs-comment"># æ ‡è®°é‡å¤ï¼ˆä¿ç•™é«˜ä¼˜å…ˆçº§çš„ï¼‰</span>
            <span class="hljs-keyword">for</span> keep_id, del_id, sim <span class="hljs-keyword">in</span> to_merge:
                conn.execute(<span class="hljs-string">"""
                    UPDATE memories
                    SET is_deleted = 1, deleted_reason = ?
                    WHERE id = ?
                """</span>, (<span class="hljs-string">f"é‡å¤è®°å¿†ï¼Œä¸ID:<span class="hljs-subst">{keep_id}</span>ç›¸ä¼¼åº¦<span class="hljs-subst">{sim:<span class="hljs-number">.2</span>f}</span>"</span>, del_id))
            
            <span class="hljs-comment"># 2. æ¸…ç†ä½ä»·å€¼è®°å¿†</span>
            conn.execute(<span class="hljs-string">"""
                UPDATE memories
                SET is_deleted = 1, deleted_reason = 'ä½ä»·å€¼è‡ªåŠ¨æ¸…ç†'
                WHERE priority &lt; 3 
                  AND access_count = 0
                  AND created_at &lt; datetime('now', '-30 days')
                  AND is_deleted = 0
            """</span>)
            
            conn.commit()
            
    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"è½»é‡ä¼˜åŒ–å¤±è´¥: <span class="hljs-subst">{e}</span>"</span>)
</code></pre>
<hr/>
<h4 data-id="heading-11">3.4 å®‰è£…è„šæœ¬ setup_vector_memory.sh</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-comment"># setup_vector_memory.sh</span>
<span class="hljs-comment"># ä¸€é”®å®‰è£… NanoBot å‘é‡è®°å¿†ç³»ç»Ÿ</span>

<span class="hljs-built_in">set</span> -e  <span class="hljs-comment"># é‡åˆ°é”™è¯¯ç«‹å³é€€å‡º</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"ğŸš€ å¼€å§‹å®‰è£…å‘é‡è®°å¿†ç³»ç»Ÿ..."</span>

<span class="hljs-comment"># 1. æ£€æŸ¥ Python ç‰ˆæœ¬</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"ğŸ” æ£€æŸ¥ Python ç‰ˆæœ¬..."</span>
python3 --version || { <span class="hljs-built_in">echo</span> <span class="hljs-string">"âŒ éœ€è¦ Python 3.8+"</span>; <span class="hljs-built_in">exit</span> 1; }

<span class="hljs-comment"># 2. å®‰è£…ä¾èµ–</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"ğŸ“¦ å®‰è£… Python ä¾èµ–..."</span>
pip3 install --upgrade pip
pip3 install sentence-transformers apscheduler numpy

<span class="hljs-comment"># 3. åˆ›å»ºç›®å½•ç»“æ„</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"ğŸ“ åˆ›å»ºç›®å½•ç»“æ„..."</span>
<span class="hljs-built_in">mkdir</span> -p nanobot/agent/memory

<span class="hljs-comment"># 4. æ£€æµ‹å®‰è£…</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"âœ… éªŒè¯å®‰è£…..."</span>
python3 -c <span class="hljs-string">"from sentence_transformers import SentenceTransformer; print('âœ“ sentence-transformers å®‰è£…æˆåŠŸ')"</span>
python3 -c <span class="hljs-string">"import apscheduler; print('âœ“ apscheduler å®‰è£…æˆåŠŸ')"</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">""</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"ğŸ‰ å®‰è£…å®Œæˆï¼è¯·å°†ä»¥ä¸‹æ–‡ä»¶å¤åˆ¶åˆ°å¯¹åº”ä½ç½®ï¼š"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"  - memory/__init__.py â†’ nanobot/agent/memory/"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"  - memory/store.py â†’ nanobot/agent/memory/"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"  - memory/vector_store.py â†’ nanobot/agent/memory/"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">""</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"ğŸ“š ä½¿ç”¨æ–¹æ³•å‚é˜…åšæ–‡æ­£æ–‡"</span>
</code></pre>
<hr/>
<h4 data-id="heading-12">3.5 éªŒè¯æµ‹è¯• test_memory.py</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment">#!/usr/bin/env python3</span>
<span class="hljs-comment"># test_memory.py</span>
<span class="hljs-comment"># éªŒè¯å‘é‡è®°å¿†ç³»ç»Ÿæ˜¯å¦æ­£å¸¸å·¥ä½œ</span>

<span class="hljs-keyword">import</span> sys
<span class="hljs-keyword">from</span> pathlib <span class="hljs-keyword">import</span> Path

<span class="hljs-comment"># æ·»åŠ åˆ°è·¯å¾„</span>
sys.path.insert(<span class="hljs-number">0</span>, <span class="hljs-built_in">str</span>(Path(__file__).parent))

<span class="hljs-keyword">try</span>:
    <span class="hljs-keyword">from</span> nanobot.agent.memory <span class="hljs-keyword">import</span> EnhancedMemoryStore
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"âœ… å¯¼å…¥æˆåŠŸ"</span>)
<span class="hljs-keyword">except</span> ImportError <span class="hljs-keyword">as</span> e:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"âŒ å¯¼å…¥å¤±è´¥: <span class="hljs-subst">{e}</span>"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"è¯·å…ˆè¿è¡Œ: pip install sentence-transformers"</span>)
    sys.exit(<span class="hljs-number">1</span>)

<span class="hljs-comment"># åˆå§‹åŒ–</span>
workspace = Path(<span class="hljs-string">"./test_workspace"</span>)
workspace.mkdir(exist_ok=<span class="hljs-literal">True</span>)

<span class="hljs-built_in">print</span>(<span class="hljs-string">"ğŸš€ åˆå§‹åŒ–è®°å¿†ç³»ç»Ÿ..."</span>)
memory = EnhancedMemoryStore(workspace)

<span class="hljs-comment"># æµ‹è¯•æ·»åŠ </span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"ğŸ“ æµ‹è¯•æ·»åŠ è®°å¿†..."</span>)
memory.add(<span class="hljs-string">"æˆ‘å–œæ¬¢ç”¨Pythonå†™ä»£ç "</span>, category=<span class="hljs-string">"preference"</span>, priority=<span class="hljs-number">8.0</span>)
memory.add(<span class="hljs-string">"å¤„ç†é‚®ä»¶éœ€è¦æ³¨æ„æ ¼å¼ç¾è§‚"</span>, category=<span class="hljs-string">"rule"</span>, priority=<span class="hljs-number">9.0</span>)
memory.add(<span class="hljs-string">"æ•°æ®åˆ†æéœ€è¦pandasåº“"</span>, category=<span class="hljs-string">"tech_note"</span>, priority=<span class="hljs-number">6.0</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"âœ… æ·»åŠ æˆåŠŸ"</span>)

<span class="hljs-comment"># æµ‹è¯•è¯­ä¹‰æœç´¢</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"ğŸ” æµ‹è¯•è¯­ä¹‰æœç´¢..."</span>)
results = memory.search(<span class="hljs-string">"æ€ä¹ˆå†™ä»£ç "</span>, use_semantic=<span class="hljs-literal">True</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ‰¾åˆ° <span class="hljs-subst">{<span class="hljs-built_in">len</span>(results)}</span> æ¡ç›¸å…³è®°å¿†:"</span>)
<span class="hljs-keyword">for</span> r <span class="hljs-keyword">in</span> results:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  - [<span class="hljs-subst">{r[<span class="hljs-string">'category'</span>]}</span>] ç›¸ä¼¼åº¦:<span class="hljs-subst">{r[<span class="hljs-string">'similarity'</span>]}</span> <span class="hljs-subst">{r[<span class="hljs-string">'content'</span>][:<span class="hljs-number">30</span>]}</span>..."</span>)

<span class="hljs-comment"># æµ‹è¯•ä¸Šä¸‹æ–‡è·å–</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"ğŸ’­ æµ‹è¯•ä¸Šä¸‹æ–‡è·å–..."</span>)
context = memory.get_context(<span class="hljs-string">"æˆ‘æƒ³å­¦ä¹ ç¼–ç¨‹"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"ä¸Šä¸‹æ–‡:\n<span class="hljs-subst">{context}</span>"</span>)

<span class="hljs-built_in">print</span>(<span class="hljs-string">"\nğŸ‰ æ‰€æœ‰æµ‹è¯•é€šè¿‡ï¼"</span>)
</code></pre>
<hr/>
<h3 data-id="heading-13">å››ã€å®‰è£…ä¸ä½¿ç”¨æŒ‡å—</h3>
<h4 data-id="heading-14">4.1 å®‰è£…æ­¥éª¤</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. å®‰è£…ä¾èµ–</span>
pip3 install sentence-transformers apscheduler

<span class="hljs-comment"># 2. åˆ›å»ºç›®å½•ç»“æ„</span>
<span class="hljs-built_in">cd</span> nanobot/agent
<span class="hljs-built_in">mkdir</span> -p memory
<span class="hljs-built_in">mv</span> memory.py memory/store.py  <span class="hljs-comment"># ç§»åŠ¨åŸæœ‰æ–‡ä»¶</span>

<span class="hljs-comment"># 3. åˆ›å»º __init__.py å’Œ vector_store.py</span>
<span class="hljs-comment"># ï¼ˆå¤åˆ¶ä¸Šé¢çš„å®Œæ•´ä»£ç ï¼‰</span>

<span class="hljs-comment"># 4. æ›´æ–°å¯¼å…¥</span>
<span class="hljs-comment"># ä¿®æ”¹ context.py: </span>
<span class="hljs-comment"># from nanobot.agent.memory import EnhancedMemoryStore</span>
</code></pre>
<h4 data-id="heading-15">4.2 å¿«é€Ÿå¼€å§‹ç¤ºä¾‹</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> pathlib <span class="hljs-keyword">import</span> Path
<span class="hljs-keyword">from</span> nanobot.agent.memory <span class="hljs-keyword">import</span> EnhancedMemoryStore

<span class="hljs-comment"># åˆå§‹åŒ–</span>
workspace = Path(<span class="hljs-string">"/path/to/workspace"</span>)
memory = EnhancedMemoryStore(workspace)

<span class="hljs-comment"># æ·»åŠ è®°å¿†ï¼ˆè‡ªåŠ¨ç”Ÿæˆå‘é‡åµŒå…¥ï¼‰</span>
memory.add(
    <span class="hljs-string">"é‚®ä»¶å‘é€è¦æ³¨æ„HTMLæ ¼å¼ç¾è§‚"</span>,
    category=<span class="hljs-string">"core_rule"</span>,
    priority=<span class="hljs-number">9.0</span>  <span class="hljs-comment"># é«˜ä¼˜å…ˆçº§ï¼Œé•¿ä¹…ä¿å­˜</span>
)

<span class="hljs-comment"># è¯­ä¹‰æœç´¢ï¼ˆ"æ€ä¹ˆå‘é‚®ä»¶"ä¹Ÿèƒ½æ‰¾åˆ°ä¸Šé¢çš„è®°å¿†ï¼‰</span>
results = memory.search(<span class="hljs-string">"å¦‚ä½•å‘é‚®ä»¶"</span>, use_semantic=<span class="hljs-literal">True</span>)
<span class="hljs-keyword">for</span> r <span class="hljs-keyword">in</span> results:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"[<span class="hljs-subst">{r[<span class="hljs-string">'category'</span>]}</span>] ç›¸ä¼¼åº¦:<span class="hljs-subst">{r[<span class="hljs-string">'similarity'</span>]}</span> <span class="hljs-subst">{r[<span class="hljs-string">'content'</span>]}</span>"</span>)

<span class="hljs-comment"># è·å–å¯¹è¯ä¸Šä¸‹æ–‡</span>
context = memory.get_context(<span class="hljs-string">"ç”¨æˆ·é—®å…³äºé‚®ä»¶çš„é—®é¢˜"</span>)
</code></pre>
<hr/>
<h3 data-id="heading-16">äº”ã€é¿å‘æŒ‡å—</h3>
<h4 data-id="heading-17">å¸¸è§é—®é¢˜è§£å†³</h4>



































<table><thead><tr><th>é—®é¢˜</th><th>åŸå› </th><th>è§£å†³æ–¹æ¡ˆ</th></tr></thead><tbody><tr><td><code>ImportError: cannot import name 'EnhancedMemoryStore'</code></td><td>ç›®å½•ç»“æ„é”™è¯¯ï¼Œmemory.py æœªæ”¹ä¸ºåŒ…</td><td>ç¡®ä¿æ˜¯ <code>memory/</code> ç›®å½•ï¼Œä¸æ˜¯å•æ–‡ä»¶</td></tr><tr><td><code>ç¼ºå°‘ sentence-transformers</code></td><td>æœªå®‰è£…ä¾èµ–</td><td>è¿è¡Œ <code>pip install sentence-transformers</code></td></tr><tr><td><code>æ¨¡å‹åŠ è½½æ…¢</code></td><td>é¦–æ¬¡ä¸‹è½½ 80MB æ¨¡å‹</td><td>ç­‰å¾…2-3åˆ†é’Ÿï¼Œæˆ–é¢„å…ˆä¸‹è½½æ¨¡å‹</td></tr><tr><td><code>æ•°æ®åº“æƒé™é”™è¯¯</code></td><td>SQLite æ–‡ä»¶è¢«å ç”¨</td><td>å…³é—­å…¶ä»–è¿›ç¨‹ï¼Œæˆ–æ›´æ”¹æ•°æ®åº“è·¯å¾„</td></tr><tr><td><code>ç›¸ä¼¼åº¦è®¡ç®—ä¸ºç©º</code></td><td>å‘é‡ç»´åº¦ä¸åŒ¹é…</td><td>ç¡®ä¿æ¨¡å‹åç§°ä¸€è‡´ï¼Œé‡æ–°åˆå§‹åŒ–</td></tr></tbody></table>
<h4 data-id="heading-18">æ¨¡å‹é€‰æ‹©å»ºè®®</h4>





























<table><thead><tr><th>æ¨¡å‹</th><th>å¤§å°</th><th>é€Ÿåº¦</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td><code>all-MiniLM-L6-v2</code></td><td>80MB</td><td>å¿«</td><td>é»˜è®¤æ¨èï¼Œè½»é‡çº§</td></tr><tr><td><code>paraphrase-multilingual-MiniLM-L12-v2</code></td><td>120MB</td><td>ä¸­</td><td>å¤šè¯­è¨€æ”¯æŒ</td></tr><tr><td><code>all-mpnet-base-v2</code></td><td>420MB</td><td>æ…¢</td><td>æ›´é«˜ç²¾åº¦ï¼ˆå¯é€‰ï¼‰</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-19">å…­ã€å‡çº§æ•ˆæœ</h3>
<h4 data-id="heading-20">å¯¹æ¯”æµ‹è¯•</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># æµ‹è¯•æŸ¥è¯¢: "æ€ä¹ˆå¤„ç†é‚®ä»¶"</span>

<span class="hljs-comment"># åŸç‰ˆï¼ˆå…³é”®è¯åŒ¹é…ï¼‰</span>
ç»“æœ: []  <span class="hljs-comment"># æ‰¾ä¸åˆ°ï¼Œå› ä¸ºæ²¡æœ‰å®Œå…¨ä¸€æ ·çš„è¯</span>

<span class="hljs-comment"># æ–°ç‰ˆï¼ˆè¯­ä¹‰æ£€ç´¢ï¼‰</span>
ç»“æœ: [
    {content: <span class="hljs-string">"é‚®ä»¶å‘é€è¦æ³¨æ„HTMLæ ¼å¼ç¾è§‚"</span>, similarity: <span class="hljs-number">0.82</span>}
]
</code></pre>
<h4 data-id="heading-21">æ€§èƒ½æŒ‡æ ‡</h4>
<ul>
<li>è®°å¿†æ£€ç´¢é€Ÿåº¦ï¼š&lt; 100msï¼ˆåƒçº§è®°å¿†ï¼‰</li>
<li>å­˜å‚¨ç©ºé—´ï¼šæ¯æ¡è®°å¿†çº¦1KBï¼ˆå‹ç¼©åï¼‰</li>
<li>è‡ªåŠ¨ä¼˜åŒ–ï¼šæ¯10æ¬¡æ“ä½œè§¦å‘ï¼Œé›¶å¼€é”€</li>
</ul>
<hr/>
<h3 data-id="heading-22">ä¸ƒã€æ€»ç»“</h3>
<p>é€šè¿‡æœ¬æ¬¡å‡çº§ï¼ŒNanoBot è·å¾—äº†ï¼š</p>
<ol>
<li>ğŸ§  <strong>è¯­ä¹‰ç†è§£</strong> - çœŸæ­£ç†è§£ç”¨æˆ·æ„å›¾</li>
<li>ğŸ”„ <strong>è‡ªåŠ¨ä¼˜åŒ–</strong> - æ— éœ€æ‰‹åŠ¨ç»´æŠ¤</li>
<li>ğŸ’¾ <strong>é•¿ä¹…ä¿å­˜</strong> - é«˜ä»·å€¼è®°å¿†ä¸ä¸¢å¤±</li>
<li>ğŸŒ <strong>è½»é‡æ— è´Ÿæ‹…</strong> - ä»…å¢åŠ 2ä¸ªä¾èµ–</li>
</ol>
<p>å¿«æ¥å°è¯•å‡çº§ä½ çš„ NanoBot å§ï¼ğŸš€</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[skills-lc-cliï¼š3 å¤©åšå‡ºæ¥çš„ä¸€ä¸ªå°å·¥å…·ï¼Œç»“æœè‡ªå·±æ¯å¤©éƒ½åœ¨ç”¨]]></title>    <link>https://juejin.cn/post/7605882792144764991</link>    <guid>https://juejin.cn/post/7605882792144764991</guid>    <pubDate>2026-02-13T06:36:31.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605882792144764991" data-draft-id="7605941424536469558" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="skills-lc-cliï¼š3 å¤©åšå‡ºæ¥çš„ä¸€ä¸ªå°å·¥å…·ï¼Œç»“æœè‡ªå·±æ¯å¤©éƒ½åœ¨ç”¨"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-02-13T06:36:31.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="HBLOG"/> <meta itemprop="url" content="https://juejin.cn/user/131597124767479"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            skills-lc-cliï¼š3 å¤©åšå‡ºæ¥çš„ä¸€ä¸ªå°å·¥å…·ï¼Œç»“æœè‡ªå·±æ¯å¤©éƒ½åœ¨ç”¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/131597124767479/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    HBLOG
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-13T06:36:31.000Z" title="Fri Feb 13 2026 06:36:31 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä¸€å¼€å§‹åš <strong>skills-lc-cli</strong>ï¼Œå¹¶æ²¡æœ‰ä»€ä¹ˆå®å¤§çš„è®¡åˆ’ã€‚</p>
<p>è¯´ç™½äº†ï¼Œå°±æ˜¯è¢«è‡ªå·±æŠ˜è…¾çƒ¦äº†ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fadmin.liuhaihua.cn%2Fwp-content%2Fuploads%2F2026%2F02%2Fimage-5.png" target="_blank" title="https://admin.liuhaihua.cn/wp-content/uploads/2026/02/image-5.png" ref="nofollow noopener noreferrer"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cc13f69bc5ae47d4b0f96370b07dd93c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSEJMT0c=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771569391&amp;x-signature=qvwjjmJb1U6vHxyrMWURiPmE0es%3D" alt="" loading="lazy"/></a></p>
<h2 data-id="heading-0">ä¸€ã€èƒŒæ™¯ï¼šé—®é¢˜ä¸æ˜¯â€œæ¨¡å‹ä¸å¤Ÿèªæ˜â€</h2>
<p>å½“æ—¶æˆ‘åœ¨ç»´æŠ¤ skills.lcï¼Œä¹Ÿåœ¨åŒæ—¶ç”¨å‡ å¥— AI Agent ç¯å¢ƒã€‚é—®é¢˜å¾ˆä¸€è‡´ï¼š</p>
<ul>
<li>skills.lc ä¸Šæœ‰è¶Šæ¥è¶Šå¤š Skills</li>
<li>æˆ‘æƒ³ç”¨ï¼Œä½†æ¯æ¬¡éƒ½è¦æ‰‹åŠ¨ cloneã€å¤åˆ¶ã€æ”¾ç›®å½•</li>
<li>ä¸åŒ Agent çš„æŠ€èƒ½ç›®å½•è¿˜ä¸ä¸€æ ·</li>
</ul>
<p>æœ€è¦å‘½çš„æ˜¯ï¼š<br/>
<strong>è¿™ä»¶äº‹æœ¬èº«ä¸å¤æ‚ï¼Œä½†æ¯å¤©éƒ½åœ¨é‡å¤ã€‚</strong></p>
<p>æˆ‘æ„è¯†åˆ°ä¸€ä¸ªé—®é¢˜ï¼š</p>
<blockquote>
<p>Skills å·²ç»æ˜¯ä¸€ä¸ªç‹¬ç«‹èµ„äº§äº†ï¼Œä½†ç¼ºä¸€ä¸ªæœ€åŸºæœ¬çš„â€œå®‰è£…å·¥å…·â€ã€‚</p>
</blockquote>
<p>ä¸æ˜¯å¹³å°ã€ä¸æ˜¯ UIï¼Œå°±æ˜¯ä¸€ä¸ª CLIã€‚</p>
<h2 data-id="heading-1">äºŒã€3 å¤©å¼€å‘ï¼šç›®æ ‡éå¸¸å…‹åˆ¶</h2>
<p>æˆ‘ç»™è‡ªå·±å®šäº†ä¸€ä¸ªç¡¬é™åˆ¶ï¼š<br/>
<strong>3 å¤©åšå®Œï¼Œä¸æ‰©éœ€æ±‚ã€‚</strong></p>
<h3 data-id="heading-2">ç¬¬ 1 å¤©ï¼šåªè§£å†³ä¸€ä»¶äº‹</h3>
<p>ç¬¬ä¸€å¤©æˆ‘åªæƒ³æ¸…æ¥šä¸€ä»¶äº‹ï¼š</p>
<blockquote>
<p>èƒ½ä¸èƒ½ç”¨ä¸€æ¡å‘½ä»¤ï¼ŒæŠŠ skills.lc ä¸Šçš„æŠ€èƒ½è£…åˆ°æœ¬åœ°ï¼Ÿ</p>
</blockquote>
<p>äºæ˜¯ç¬¬ä¸€ä¸ªåŸå‹åªæœ‰ä¸€ä¸ªå‘½ä»¤ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp">skills <span class="hljs-keyword">add</span> &lt;repo&gt;
</code></pre>
<p>ä¸å…³å¿ƒ UIï¼Œä¸å…³å¿ƒé…ç½®ï¼Œ<br/>
åªå…³å¿ƒä¸‰æ­¥ï¼š</p>
<ol>
<li>æ‹‰ä»£ç </li>
<li>æ‰¾ <code>SKILL.md</code></li>
<li>æ”¾åˆ° agent èƒ½è¯†åˆ«çš„ç›®å½•é‡Œ</li>
</ol>
<h3 data-id="heading-3">ç¬¬ 2 å¤©ï¼šå‘ç°â€œæ‰¾æŠ€èƒ½â€æ‰æ˜¯åˆšéœ€</h3>
<p>å†™å®Œ <code>add</code> ä¹‹åï¼Œæˆ‘è‡ªå·±ç”¨äº†ä¸€ä¸‹ï¼Œå¾ˆå¿«å‘ç°ä¸€ä¸ªé—®é¢˜ï¼š</p>
<blockquote>
<p>æˆ‘è®°ä¸ä½ skill åå­—ã€‚</p>
</blockquote>
<p>skills.lc ä¸Šçš„æŠ€èƒ½å¤šäº†ä¹‹åï¼Œ<br/>
<strong>ä½ çœŸæ­£éœ€è¦çš„ä¸æ˜¯å®‰è£…ï¼Œè€Œæ˜¯â€œå…ˆæ‰¾åˆ°â€ã€‚</strong></p>
<p>äºæ˜¯ç¬¬äºŒå¤©åŠ äº† <code>search</code> å‘½ä»¤ã€‚</p>
<h3 data-id="heading-4">ç¬¬ 3 å¤©ï¼šæ‰“ç£¨æˆâ€œè‡ªå·±ç”¨å¾—ä¸‹å»â€çš„çŠ¶æ€</h3>
<p>ç¬¬ä¸‰å¤©æ²¡æœ‰åŠ æ–°åŠŸèƒ½ï¼Œä¸»è¦åšäº†ä¸‰ä»¶äº‹ï¼š</p>
<ul>
<li>é”™è¯¯ä¿¡æ¯å†™æ¸…æ¥š</li>
<li>å‚æ•°åˆ«å¤ªå¤š</li>
<li>ä¸è¦æâ€œæ™ºèƒ½çŒœæµ‹â€</li>
</ul>
<p>skills-lc-cli åˆ°ç°åœ¨çš„å½¢æ€ï¼ŒåŸºæœ¬å°±æ˜¯é‚£ä¸‰å¤©å®šä¸‹æ¥çš„ã€‚</p>
<h2 data-id="heading-5">ä¸‰ã€å®‰è£…æ–¹å¼ï¼ˆå°½é‡ä¸æŠ˜è…¾ï¼‰</h2>
<p>æˆ‘è‡ªå·±ç”¨ CLI çš„ä¹ æƒ¯æ˜¯ï¼š<br/>
<strong>èƒ½ npx å°± npxï¼Œèƒ½å°‘ä¸€æ­¥å°±å°‘ä¸€æ­¥ã€‚</strong></p>
<h3 data-id="heading-6">å…¨å±€å®‰è£…</h3>
<pre><code class="hljs language-perl" lang="perl">npm install -g skills-<span class="hljs-keyword">lc</span>-cli
</code></pre>
<h3 data-id="heading-7">æˆ–ç›´æ¥ä½¿ç”¨</h3>
<pre><code class="hljs language-perl" lang="perl">npx skills-<span class="hljs-keyword">lc</span>-cli
</code></pre>
<p>CLI æœ¬èº«æ²¡æœ‰çŠ¶æ€ï¼Œä¸ä¾èµ–åå°æœåŠ¡ï¼Œç”¨å®Œå°±èµ°ã€‚</p>
<h2 data-id="heading-8">å››ã€æœ€å¸¸ç”¨çš„ä¸¤ä¸ªå‘½ä»¤ï¼šsearch + add</h2>
<h3 data-id="heading-9">1ï¸âƒ£ searchï¼šå…ˆæ‰¾åˆ°ä½ è¦çš„ Skill</h3>
<pre><code class="hljs language-sql" lang="sql">skills <span class="hljs-keyword">search</span> git
</code></pre>
<p>è¿™ä¸ªå‘½ä»¤åšçš„äº‹æƒ…å¾ˆç®€å•ï¼š</p>
<ul>
<li>ä» skills.lc æ‹‰å–æœ€æ–°ç´¢å¼•</li>
<li>æ ¹æ®å…³é”®è¯ç­›é€‰</li>
<li>åªå±•ç¤ºæœ‰ç”¨ä¿¡æ¯ï¼ˆname / descriptionï¼‰</li>
</ul>
<p>æˆ‘åˆ»æ„æ²¡åŠ å¤æ‚æ’åºï¼Œä¹Ÿæ²¡åšæ¨èç®—æ³•ã€‚<br/>
<strong>å› ä¸º search çš„ç›®çš„åªæ˜¯å¸®ä½ â€œå®šä½â€ï¼Œä¸æ˜¯æ›¿ä½ åšå†³å®šã€‚</strong></p>
<h3 data-id="heading-10">2ï¸âƒ£ addï¼šä¸€æ¡å‘½ä»¤å®Œæˆå®‰è£…</h3>
<p>æ‰¾åˆ°åˆé€‚çš„ Skill ä¹‹åï¼Œç›´æ¥ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">skills add author/skill-name
</code></pre>
<p>å®ƒæ”¯æŒå‡ ç§å¸¸è§å†™æ³•ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp">skills <span class="hljs-keyword">add</span> vercel-labs/agent-skills
skills <span class="hljs-keyword">add</span> https:<span class="hljs-comment">//github.com/vercel-labs/agent-skills</span>
skills <span class="hljs-keyword">add</span> ./local-skills
</code></pre>
<p>add å‘½ä»¤ä¼šï¼š</p>
<ol>
<li>ä¸‹è½½ Skill</li>
<li>æ ¡éªŒ <code>SKILL.md</code></li>
<li>å®‰è£…åˆ°å½“å‰ agent å¯è¯†åˆ«çš„ä½ç½®</li>
</ol>
<p>æ²¡æœ‰éšè—æ­¥éª¤ï¼Œä¹Ÿä¸ä¼šå·å·æ”¹ä½ é…ç½®ã€‚</p>
<h2 data-id="heading-11">äº”ã€ä¸ºä»€ä¹ˆè¦å’Œ skills.lc é…åˆç”¨</h2>
<p>å•ç‹¬çœ‹ skills-lc-cliï¼Œå…¶å®å°±æ˜¯ä¸ªæ™®é€š CLIã€‚</p>
<p>ä½†å®ƒçœŸæ­£çš„ä»·å€¼ï¼Œæ¥è‡ª <strong>å’Œ skills.lc æ­åœ¨ä¸€èµ·ç”¨</strong>ã€‚</p>
<ul>
<li>skills.lc è´Ÿè´£ <strong>å‘ç°</strong></li>
<li>skills-lc-cli è´Ÿè´£ <strong>è½åœ°</strong></li>
</ul>
<p>ä½ åœ¨ç½‘é¡µä¸Šçœ‹åˆ°ä¸€ä¸ª Skillï¼Œ<br/>
ä¸‹ä¸€æ­¥ä¸æ˜¯å¤åˆ¶é“¾æ¥ã€cloneã€æ•´ç†ç›®å½•ï¼Œ<br/>
è€Œæ˜¯ä¸€æ¡å‘½ä»¤ã€‚</p>
<p>è¿™ä»¶äº‹ä¸€æ—¦é¡ºäº†ï¼Œä½ å°±ä¸æƒ³å›åˆ°æ‰‹åŠ¨æ“ä½œäº†ã€‚</p>
<h2 data-id="heading-12">å…­ã€æˆ‘åˆ»æ„æ²¡åšçš„äº‹æƒ…</h2>
<p>æœ‰äº›ä¸œè¥¿ä¸æ˜¯ä¸ä¼šåšï¼Œæ˜¯åˆ»æ„ä¸åšï¼š</p>
<ul>
<li>âŒ è‡ªåŠ¨ä¿®æ”¹ agent é…ç½®</li>
<li>âŒ æ™ºèƒ½è¡¥å…¨ Skill è¡Œä¸º</li>
<li>âŒ å¸®ç”¨æˆ·â€œçŒœâ€è¦ä»€ä¹ˆ</li>
</ul>
<p>skills-lc-cli çš„å®šä½å¾ˆæ¸…æ¥šï¼š<br/>
<strong>å®ƒæ˜¯å·¥å…·ï¼Œä¸æ˜¯åŠ©ç†ã€‚</strong></p>
<h2 data-id="heading-13">ç»“å°¾</h2>
<p>skills-lc-cli æ˜¯ä¸€ä¸ªå…¸å‹çš„â€œå·¥ç¨‹å¸ˆè‡ªç”¨å·¥å…·â€ã€‚</p>
<p>å®ƒä¸æ˜¯ä»éœ€æ±‚æ–‡æ¡£é‡Œé•¿å‡ºæ¥çš„ï¼Œ<br/>
è€Œæ˜¯ä»ã€Œè¿™äº‹æˆ‘å·²ç»å¹²çƒ¦äº†ã€é‡Œé•¿å‡ºæ¥çš„ã€‚</p>
<p>å®˜æ–¹ä»‹ç»ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fskills.lc%2Fcli" target="_blank" title="https://skills.lc/cli" ref="nofollow noopener noreferrer">skills.lc/cli</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Mokupï¼šæ„å»ºå·¥å…·å‹å¥½çš„å¯è§†åŒ– Mock å·¥å…·]]></title>    <link>https://juejin.cn/post/7605881632541196339</link>    <guid>https://juejin.cn/post/7605881632541196339</guid>    <pubDate>2026-02-13T06:40:21.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605881632541196339" data-draft-id="7605888927714689062" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Mokupï¼šæ„å»ºå·¥å…·å‹å¥½çš„å¯è§†åŒ– Mock å·¥å…·"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,åç«¯"/> <meta itemprop="datePublished" content="2026-02-13T06:40:21.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="icebreaker"/> <meta itemprop="url" content="https://juejin.cn/user/1943592290496919"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Mokupï¼šæ„å»ºå·¥å…·å‹å¥½çš„å¯è§†åŒ– Mock å·¥å…·
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1943592290496919/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    icebreaker
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-13T06:40:21.000Z" title="Fri Feb 13 2026 06:40:21 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ef42b41d22b846539116ab5b1e620293~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaWNlYnJlYWtlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771569620&amp;x-signature=2pKJ4xtq6%2BsLcJBm0xg5g%2FptG58%3D" alt="devio-cover.jpg" loading="lazy"/></p>
<h2 data-id="heading-0">Mokupï¼šæ„å»ºå·¥å…·å‹å¥½çš„å¯è§†åŒ– Mock å·¥å…·</h2>
<p>å¤§å®¶å¥½å‘€ï¼Œæˆ‘æ˜¯ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fsonofmagic" target="_blank" title="https://github.com/sonofmagic" ref="nofollow noopener noreferrer">icebreaker</a>ï¼Œä¸€åå‰ç«¯å¼€å‘è€…å…¼å¼€æºçˆ±å¥½è€…ã€‚</p>
<p>é©¬ä¸Šå°±è¿‡å¹´äº†ï¼Œåœ¨è¿™ä¸ªç‰¹åˆ«çš„æ—¶é—´ç‚¹ï¼Œæˆ‘å…ˆç¥å¤§å®¶ï¼šæ–°å¹´å¿«ä¹ï¼èº«ä½“å¥åº·ï¼å·¥ä½œé¡ºåˆ©ï¼æ¥å¹´å‘å¤§è´¢ï¼</p>
<hr/>
<p>å½“ç„¶ï¼Œå›å½’æ­£é¢˜ï¼Œè¿™é‡Œä¹Ÿå‘å¤§å®¶ä»‹ç»ä¸€ä¸‹æˆ‘æœ€è¿‘åšçš„ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼š<code>Mokup</code>ï¼Œä¸€ä¸ªåŸºäºæ–‡ä»¶è·¯ç”±çš„ HTTP Mock å·¥å…·ã€‚</p>
<p>æˆ‘åšè¿™ä¸ªå½“æ—¶çš„ç›®çš„ï¼Œä¸»è¦æ˜¯ç»™æˆ‘å›¢é˜Ÿé‡Œçš„åŒå­¦ç”¨çš„ï¼Œæƒ³è®©å¤§å®¶æœ€ä½æˆæœ¬åœ°åœ¨ç°æœ‰å‰ç«¯å·¥ç¨‹é‡Œæ¥å…¥æœåŠ¡ç«¯çš„èƒ½åŠ›ï¼Œè®©å¤§å®¶å¾ªåºæ¸è¿›çš„æˆä¸ºå…¨æ ˆï¼Œè¿™æ ·æ‰èƒ½åœ¨AIæ—¶ä»£ç«‹è¶³ã€‚</p>
<p>é¡¹ç›®åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fsonofmagic%2Fmokup" target="_blank" title="https://github.com/sonofmagic/mokup" ref="nofollow noopener noreferrer">GitHub</a> , <a href="https://link.juejin.cn?target=http%3A%2F%2Fmokup.icebreaker.top%2F" target="_blank" title="http://mokup.icebreaker.top/" ref="nofollow noopener noreferrer">å®˜ç½‘ä¸æ–‡æ¡£</a></p>
<h3 data-id="heading-1">Mokup æ˜¯ä»€ä¹ˆ</h3>
<p>Mokup æ˜¯ä¸€ä¸ªåŸºäºæ–‡ä»¶è·¯ç”±çš„ HTTP Mock å·¥å…·ã€‚ä½ æŠŠ mock æ–‡ä»¶æ”¾åœ¨ <code>mock/</code> ç›®å½•é‡Œï¼Œå®ƒä¼šè‡ªåŠ¨ç”Ÿæˆå¯åŒ¹é…çš„è·¯ç”±å¹¶æä¾›å“åº”ã€‚</p>
<p>å®ƒçš„ç›®æ ‡å¾ˆç›´æ¥ï¼šè®© mock åœ¨ä½ å·²æœ‰çš„å‰ç«¯å·¥ç¨‹é‡Œå°½å¿«è·‘èµ·æ¥ï¼Œå‡å°‘â€œä¸ºäº†è”è°ƒå†é€ ä¸€å¥—æœåŠ¡â€çš„æˆæœ¬ã€‚</p>
<h3 data-id="heading-2">æœ‰ä»€ä¹ˆç‰¹æ€§</h3>
<ul>
<li>æ„å»ºå·¥å…·å‹å¥½ï¼šVite / Webpack éƒ½èƒ½å¿«é€Ÿçš„æ¥å…¥ï¼Œæ¥å…¥æˆæœ¬æä½ã€‚</li>
<li>å¯è§†åŒ–ï¼šå†…ç½® Playgroundï¼Œè·¯ç”±æ˜¯å¦ç”Ÿæ•ˆä¸€çœ¼å¯è§ã€‚</li>
<li>å¼€å‘ä½“éªŒå¥½ï¼šmock æ–‡ä»¶å’Œç›®å½•é…ç½®æ”¹å®Œå°±åˆ·æ–°ï¼Œä¸ç”¨é¢‘ç¹é‡å¯ã€‚</li>
<li>èƒ½éƒ¨ç½²åˆ°å¤šä¸ªç¯å¢ƒï¼šæœ¬åœ°å¼€å‘ã€Node æœåŠ¡ç«¯ã€Workerã€Service Worker éƒ½å¯ç”¨ã€‚</li>
</ul>
<h3 data-id="heading-3">ä¸ºä»€ä¹ˆè¦åšå®ƒ</h3>
<p>è¿™ä¸ªå®é™…ä¸Šä¹Ÿå’Œæˆ‘è‡ªå·±åœ¨æˆ‘è‡ªå·±çš„ç¾¤é‡Œï¼Œè¿˜æœ‰å…¬å¸é‡Œçš„é¡¹ç›®ç»„æœé›†ç—›ç‚¹æœ‰å…³ï¼Œé‚£å°±æ˜¯ï¼Œå¾ˆå¤šå›¢é˜Ÿçš„ç—›ç‚¹ä¸æ˜¯â€œä¸ä¼šå†™ mockâ€ï¼Œè€Œæ˜¯ï¼š</p>
<ul>
<li>æ¥å…¥æ­¥éª¤å¤šï¼Œæ¢ä¸ªæ„å»ºå·¥å…·å°±è¦é‡é…ä¸€æ¬¡ã€‚</li>
<li>æœ¬åœ°æ’æŸ¥æ—¶çœ‹ä¸åˆ°å…¨å±€è·¯ç”±çŠ¶æ€ï¼Œåªèƒ½ç¿»æ–‡ä»¶çŒœã€‚</li>
<li>æ¯æ”¹ä¸€ä¸ª mock éƒ½è¦é‡å¯æˆ–æ‰‹åŠ¨éªŒè¯ï¼Œåé¦ˆæ…¢ã€‚</li>
</ul>
<p>Mokup å°±æ˜¯ä¸ºäº†è§£å†³è¿™ä¸‰ä¸ªé—®é¢˜ï¼šæ¥å…¥æ›´è½»ã€å¯è§†åŒ–æ›´å¼ºã€å¼€å‘åé¦ˆæ›´å¿«ã€‚</p>
<h3 data-id="heading-4">æ„å»ºå·¥å…·å‹å¥½</h3>
<h4 data-id="heading-5">Vite æ¥å…¥</h4>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> mokup <span class="hljs-keyword">from</span> <span class="hljs-string">'mokup/vite'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">plugins</span>: [
    <span class="hljs-title function_">mokup</span>({
      <span class="hljs-attr">entries</span>: { <span class="hljs-attr">dir</span>: <span class="hljs-string">'mock'</span>, <span class="hljs-attr">prefix</span>: <span class="hljs-string">'/api'</span> },
    }),
  ],
}
</code></pre>
<p>ç„¶åè¿™æ—¶å€™ ä½ å°±å¯ä»¥åœ¨ <code>mock/</code> ç›®å½•é‡Œæ”¾ mock æ–‡ä»¶äº†ï¼ŒMokup ä¼šè‡ªåŠ¨æ‰«æå¹¶ç”Ÿæˆå¯¹åº”çš„è·¯ç”±ã€‚</p>
<p>ä½ ä¹Ÿå¯ä»¥åœ¨ä½ çš„ CLI ä¸­å¿«é€Ÿè®¿é—® mokup çš„ playground è¿›è¡Œå¯è§†åŒ–è°ƒè¯•</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/740566f7d99d497696aa462b4ac5a71a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaWNlYnJlYWtlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771569620&amp;x-signature=y97aMYKiXuBMKQ9yRb4pqOBMRjE%3D" alt="cli.png" loading="lazy"/></p>
<h4 data-id="heading-6">Webpack æ¥å…¥</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> { mokupWebpack } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'mokup/webpack'</span>)

<span class="hljs-keyword">const</span> withMokup = <span class="hljs-title function_">mokupWebpack</span>({
  <span class="hljs-attr">entries</span>: { <span class="hljs-attr">dir</span>: <span class="hljs-string">'mock'</span>, <span class="hljs-attr">prefix</span>: <span class="hljs-string">'/api'</span> },
})

<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = <span class="hljs-title function_">withMokup</span>({})
</code></pre>
<p>ä½ å¯ä»¥åœ¨ä¸æ”¹åŠ¨ä¸šåŠ¡ä»£ç ç»“æ„çš„æƒ…å†µä¸‹ï¼ŒæŠŠ mock èƒ½åŠ›æŒ‚åˆ°ç°æœ‰æ„å»ºæµç¨‹é‡Œã€‚</p>
<h3 data-id="heading-7">å¯è§†åŒ–ï¼šPlaygroundï¼ˆé‡ç‚¹ï¼‰</h3>
<p>Mokup å†…ç½® Playgroundï¼Œç”¨æ¥æŸ¥çœ‹å½“å‰è¢«æ‰«æåˆ°çš„è·¯ç”±ã€æ–¹æ³•ã€è·¯å¾„å’Œé…ç½®é“¾ã€‚</p>
<p>Vite å¼€å‘æ—¶é»˜è®¤å…¥å£ï¼š</p>
<pre><code class="hljs language-txt" lang="txt">http://localhost:5173/__mokup
</code></pre>
<p>åœ¨çº¿ä½“éªŒ Demoï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmokup.icebreaker.top%2F__mokup%2F" target="_blank" title="https://mokup.icebreaker.top/__mokup/" ref="nofollow noopener noreferrer">mokup.icebreaker.top/__mokup/</a></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0181e00ca080401dbc9d73b766a94a37~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaWNlYnJlYWtlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771569620&amp;x-signature=ExqF0uPXTXahturuyDRQway7SlM%3D" alt="playground.png" loading="lazy"/></p>
<p>å®ƒè§£å†³çš„æ˜¯ä¸€ä¸ªéå¸¸å®é™…çš„é—®é¢˜ï¼š
æ¥å£ä¸ç”Ÿæ•ˆæ—¶ï¼Œä½ ä¸ç”¨åˆ°å¤„å»æ‰¾é—®é¢˜ï¼Œåªè¦æ‰“å¼€é¡µé¢å°±èƒ½çœ‹åˆ°â€œæœ‰æ²¡æœ‰è¢«æ‰«åˆ°ã€æœ‰æ²¡æœ‰è¢«ç¦ç”¨ã€åŒ¹é…åˆ°äº†ä»€ä¹ˆé…ç½®â€ã€‚</p>
<h3 data-id="heading-8">å¼€å‘ä½“éªŒï¼šå“ªäº›æ–‡ä»¶ä¼šçƒ­æ›´æ–°</h3>
<p>åœ¨ Vite dev ä¸‹ï¼ŒMokup ä¼šç›‘å¬ mock ç›®å½•å˜åŒ–å¹¶è‡ªåŠ¨åˆ·æ–°è·¯ç”±è¡¨ã€‚å¸¸è§ä¼šè§¦å‘çƒ­æ›´æ–°çš„æ”¹åŠ¨åŒ…æ‹¬ï¼š</p>
<ul>
<li>æ–°å¢/ä¿®æ”¹/åˆ é™¤ mock è·¯ç”±æ–‡ä»¶ï¼Œä¾‹å¦‚ï¼š
<ul>
<li><code>mock/users.get.ts</code></li>
<li><code>mock/messages.get.json</code></li>
<li><code>mock/orders/[id].patch.ts</code></li>
</ul>
</li>
<li>ä¿®æ”¹ç›®å½•é…ç½®æ–‡ä»¶ï¼š<code>mock/**/index.config.ts</code></li>
<li>è°ƒæ•´ç›®å½•ç»“æ„ï¼ˆç§»åŠ¨ã€é‡å‘½åã€åˆ›å»ºå­ç›®å½•ï¼‰</li>
</ul>
<p>æ”¹å®Œå Playground ä¼šè‡ªåŠ¨åˆ·æ–°è·¯ç”±åˆ—è¡¨ï¼Œè°ƒè¯•é“¾è·¯æ›´çŸ­ã€‚</p>
<blockquote>
<p>å¦‚æœä½ ä¸éœ€è¦ç›‘å¬ï¼Œå¯ä»¥åœ¨ <code>entries</code> é‡Œé…ç½® <code>watch: false</code>ã€‚</p>
</blockquote>
<h3 data-id="heading-9">å¿«é€Ÿç¤ºä¾‹ï¼šä»å†™æ–‡ä»¶åˆ°çœ‹åˆ°ç»“æœ</h3>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// mock/users.get.ts</span>
<span class="hljs-keyword">import</span> { defineHandler } <span class="hljs-keyword">from</span> <span class="hljs-string">'mokup'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineHandler</span>({
  <span class="hljs-attr">handler</span>: <span class="hljs-function"><span class="hljs-params">c</span> =&gt;</span> c.<span class="hljs-title function_">json</span>([{ <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'Ada'</span> }]),
})
</code></pre>
<p>å¯åŠ¨ dev åè®¿é—® <code>/api/users</code> (ä½ è®¾ç½®äº† <code>prefix: '/api'</code> )ï¼Œå³å¯æ‹¿åˆ° mock æ•°æ®ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2450a7f1fa43487781e3fcb248a90c70~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaWNlYnJlYWtlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771569620&amp;x-signature=P02tK4VoqpP%2FyNsxCcoDWD1JDqs%3D" alt="mock-dir.png" loading="lazy"/></p>
<h3 data-id="heading-10">å¿«é€Ÿé›†æˆ @faker-js/faker</h3>
<p><code>@faker-js/faker</code> æ˜¯æˆ‘ä»¬é€ å‡æ•°æ®æœ€å¸¸ä½¿ç”¨çš„åº“äº†ï¼Œè¿™é‡Œä¹Ÿå¯ä»¥å¾ˆå¥½çš„å’Œå®ƒé›†æˆ</p>
<p>Mokup çš„ handler æœ¬è´¨ä¸Šå°±æ˜¯ TS/JS å‡½æ•°ï¼Œæ‰€ä»¥èƒ½ç›´æ¥æ¥å…¥ <code>@faker-js/faker</code> è¿™ç±» mock æ•°æ®åº“ï¼Œä¸éœ€è¦é¢å¤–é€‚é…å±‚ã€‚</p>
<p>ä¸‹é¢è¿™ä¸ªç¤ºä¾‹ä¼šæ ¹æ®æŸ¥è¯¢å‚æ•° <code>size</code> è¿”å›ä¸€ç»„ç”¨æˆ·åˆ—è¡¨ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// mock/users.get.ts</span>
<span class="hljs-keyword">import</span> { faker } <span class="hljs-keyword">from</span> <span class="hljs-string">'@faker-js/faker'</span>
<span class="hljs-keyword">import</span> { defineHandler } <span class="hljs-keyword">from</span> <span class="hljs-string">'mokup'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineHandler</span>(<span class="hljs-function">(<span class="hljs-params">c</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> size = <span class="hljs-title class_">Number</span>(c.<span class="hljs-property">req</span>.<span class="hljs-title function_">query</span>(<span class="hljs-string">'size'</span>) ?? <span class="hljs-number">10</span>)
  <span class="hljs-keyword">const</span> count = <span class="hljs-title class_">Number</span>.<span class="hljs-built_in">isNaN</span>(size) ? <span class="hljs-number">10</span> : <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(size, <span class="hljs-number">1</span>), <span class="hljs-number">50</span>)
  <span class="hljs-keyword">const</span> list = <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>({ <span class="hljs-attr">length</span>: count }, <span class="hljs-function">() =&gt;</span> ({
    <span class="hljs-attr">id</span>: faker.<span class="hljs-property">string</span>.<span class="hljs-title function_">uuid</span>(),
    <span class="hljs-attr">name</span>: faker.<span class="hljs-property">person</span>.<span class="hljs-title function_">fullName</span>(),
    <span class="hljs-attr">email</span>: faker.<span class="hljs-property">internet</span>.<span class="hljs-title function_">email</span>(),
    <span class="hljs-attr">city</span>: faker.<span class="hljs-property">location</span>.<span class="hljs-title function_">city</span>(),
    <span class="hljs-attr">createdAt</span>: faker.<span class="hljs-property">date</span>.<span class="hljs-title function_">recent</span>({ <span class="hljs-attr">days</span>: <span class="hljs-number">30</span> }).<span class="hljs-title function_">toISOString</span>(),
  }))

  <span class="hljs-keyword">return</span> c.<span class="hljs-title function_">json</span>({
    list,
    <span class="hljs-attr">total</span>: <span class="hljs-number">200</span>,
    <span class="hljs-attr">page</span>: <span class="hljs-number">1</span>,
    <span class="hljs-attr">pageSize</span>: count,
  })
})
</code></pre>
<p>è¿™å¯¹åˆ—è¡¨é¡µã€æœç´¢é¡µã€è¯¦æƒ…é¡µè”è°ƒéƒ½å¾ˆå®ç”¨ã€‚
å¦‚æœä½ å¸Œæœ›æµ‹è¯•ç»“æœå¯å¤ç°ï¼Œå¯ä»¥åœ¨ handler é¡¶éƒ¨åŠ ä¸Š <code>faker.seed(123)</code>ã€‚</p>
<h3 data-id="heading-11">å¯éƒ¨ç½²åˆ°å¤šä¸ªç¯å¢ƒ</h3>
<p>è¿™å¥— mock å¯ä»¥è¿è¡Œåœ¨å¤šä¸ªç¯å¢ƒï¼šæ¯”å¦‚åœ¨ Node.js é‡Œç›´æ¥ä½¿ç”¨ï¼Œç”šè‡³è¿˜èƒ½éƒ¨ç½²åˆ° Cloudflare Workerã€‚</p>
<p>Node.js ç›´æ¥ä½¿ç”¨ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> { createFetchServer, serve } <span class="hljs-keyword">from</span> <span class="hljs-string">'mokup/server/node'</span>

<span class="hljs-keyword">const</span> app = <span class="hljs-keyword">await</span> <span class="hljs-title function_">createFetchServer</span>({ <span class="hljs-attr">entries</span>: { <span class="hljs-attr">dir</span>: <span class="hljs-string">'mock'</span> } })
<span class="hljs-title function_">serve</span>({ <span class="hljs-attr">fetch</span>: app.<span class="hljs-property">fetch</span>, <span class="hljs-attr">port</span>: <span class="hljs-number">3000</span> })
</code></pre>
<p>éƒ¨ç½²åˆ° Cloudflare Worker ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> { createMokupWorker } <span class="hljs-keyword">from</span> <span class="hljs-string">'mokup/server/worker'</span>
<span class="hljs-keyword">import</span> mokupBundle <span class="hljs-keyword">from</span> <span class="hljs-string">'virtual:mokup-bundle'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">createMokupWorker</span>(mokupBundle)
</code></pre>
<p>æç¤ºï¼š<code>virtual:mokup-bundle</code> ä»…åœ¨ Vite ä¸ <code>@cloudflare/vite-plugin</code> é›†æˆç¯å¢ƒå¯ç”¨ï¼›Node.js Dev æ¨¡å¼å¯ç›´æ¥ä½¿ç”¨ <code>createFetchServer</code>ï¼Œæ— éœ€è¯¥è™šæ‹Ÿæ¨¡å—ã€‚</p>
<h3 data-id="heading-12">æ ¸å¿ƒæ¶æ„</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c1ce02c8671643549a167e9f118c371c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaWNlYnJlYWtlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771569620&amp;x-signature=zAc2GWgLiUg1I748hjmJikx6CDQ%3D" alt="core-zh.jpg" loading="lazy"/></p>
<h3 data-id="heading-13">é€‚ç”¨åœºæ™¯ä¸è¾¹ç•Œ</h3>
<p>é€‚åˆï¼š</p>
<ul>
<li>å·²æœ‰ Vite/webpack å·¥ç¨‹ï¼Œæƒ³ä½æˆæœ¬æ¥å…¥ mock çš„å›¢é˜Ÿ</li>
<li>éœ€è¦å¯è§†åŒ–è·¯ç”±æ’æŸ¥èƒ½åŠ›çš„é¡¹ç›®</li>
<li>é‡è§†å¼€å‘åé¦ˆé€Ÿåº¦ï¼Œå¸Œæœ› mock ä¿®æ”¹åç«‹å³å¯è§çš„åœºæ™¯</li>
</ul>
<p>ä¸å¤ªé€‚åˆï¼š</p>
<ul>
<li>ä¸»è¦ä¾èµ–å¤æ‚åŠ¨æ€ä»£ç†é“¾è·¯çš„åœºæ™¯</li>
<li>å®Œå…¨ä¸å¸Œæœ›å¼•å…¥æ„å»ºæœŸ/æ’ä»¶èƒ½åŠ›çš„æè½»é‡è„šæœ¬æ–¹æ¡ˆ</li>
</ul>
<p>Mokup ä¸æ˜¯ä¸ºäº†æ›¿ä»£æ‰€æœ‰ mock æ–¹æ¡ˆï¼Œè€Œæ˜¯è®© mock æ›´å¿«æ¥å…¥ã€æ›´å¥½è°ƒè¯•ã€æ›´è´´è¿‘æ—¥å¸¸å¼€å‘æµç¨‹ã€‚</p>
<h3 data-id="heading-14">AI å‹å¥½æ€§</h3>
<p>éƒ½å·²ç»åœ¨è¿™ä¸ªæ—¶ä»£äº†ï¼Œæ€ä¹ˆèƒ½ä¸ç”¨ AI å‘¢ï¼Œ Mokup å½“æ—¶è®¾è®¡å°±æ˜¯è€ƒè™‘åˆ° AI æ—¶ä»£çš„å¼€å‘è€…éœ€æ±‚çš„ï¼Œæ‰€ä»¥åœ¨è®¾è®¡ä¸Šä¹Ÿåšäº†ä¸€äº› AI å‹å¥½çš„è€ƒè™‘ï¼Œ</p>
<p>æ¯•ç«Ÿæ—¶ä»£å˜äº†ï¼Œæˆ‘ä»¬ä¹Ÿåƒçººçº±æœºçš„å·¥äººé‚£æ ·ï¼Œæ¢åˆ°äº†è’¸æ±½çººçº±æœºï¼Œæ¯å¤©å¥´å½¹ AI 24å°æ—¶å¸®æˆ‘ä»¬æ‰“å·¥ï¼Œçˆ½æ˜¯çœŸçš„çˆ½ï¼ŒéªŒè¯é—®é¢˜æ•ˆç‡æé«˜ã€‚</p>
<p>è€Œä¸”å¾ˆå¤šå¼€å‘æ˜¯æ‡’å¾—å†™æ–‡æ¡£çš„ï¼Œç°åœ¨æ–‡æ¡£ä»€ä¹ˆå®Œå…¨ä¸æ˜¯é—®é¢˜ï¼Œå°±åƒè¿™ç¯‡æ–‡ç« ï¼Œå¤§éƒ¨åˆ†ä¹Ÿæ˜¯ç”±AIç”Ÿæˆçš„ã€‚</p>
<h3 data-id="heading-15">ç»“è¯­</h3>
<p>Mokup ç›®å‰è¿˜åœ¨å¿«é€Ÿè¿­ä»£ä¸­ï¼Œæ¬¢è¿å¤§å®¶è¯•ç”¨å¹¶æåé¦ˆï¼æ— è®ºæ˜¯åŠŸèƒ½éœ€æ±‚ã€ä½¿ç”¨ä½“éªŒè¿˜æ˜¯æ–‡æ¡£æ”¹è¿›éƒ½éå¸¸æ¬¢è¿ã€‚</p>
<p>å¦‚æœä½ ä¹Ÿæœ‰ç±»ä¼¼çš„ç—›ç‚¹ï¼Œæˆ–è€…å¯¹ mock å·¥å…·æœ‰ä»€ä¹ˆæƒ³æ³•ï¼Œä¹Ÿæ¬¢è¿åœ¨è¯„è®ºåŒºäº¤æµï¼æˆ‘ä»¬ä¸€èµ·è®©å‰ç«¯ mock æ›´å¥½ç”¨ã€æ›´é«˜æ•ˆï¼</p>
<p>æœ‰å¿—åŒé“åˆçš„å°ä¼™ä¼´ï¼Œä¹Ÿå¯ä»¥è®¿é—®æˆ‘çš„ Github ä¸»é¡µè”ç³»æˆ‘ä¸€èµ·äº¤æµï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è§†é¢‘ç”Ÿæˆæ¨ç†åŠ é€Ÿå®è·µï¼šåŸºäºå…¨å±€æ—¶é—´ç´¢å¼•çš„åºåˆ—å¹¶è¡Œ 3D ä½ç½®ç¼–ç ä¼˜åŒ–]]></title>    <link>https://juejin.cn/post/7605888927714787366</link>    <guid>https://juejin.cn/post/7605888927714787366</guid>    <pubDate>2026-02-13T06:48:25.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605888927714787366" data-draft-id="7605907495770062857" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è§†é¢‘ç”Ÿæˆæ¨ç†åŠ é€Ÿå®è·µï¼šåŸºäºå…¨å±€æ—¶é—´ç´¢å¼•çš„åºåˆ—å¹¶è¡Œ 3D ä½ç½®ç¼–ç ä¼˜åŒ–"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-02-13T06:48:25.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å“”å“©å“”å“©æŠ€æœ¯"/> <meta itemprop="url" content="https://juejin.cn/user/3030701626893405"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è§†é¢‘ç”Ÿæˆæ¨ç†åŠ é€Ÿå®è·µï¼šåŸºäºå…¨å±€æ—¶é—´ç´¢å¼•çš„åºåˆ—å¹¶è¡Œ 3D ä½ç½®ç¼–ç ä¼˜åŒ–
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3030701626893405/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å“”å“©å“”å“©æŠ€æœ¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-13T06:48:25.000Z" title="Fri Feb 13 2026 06:48:25 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>ä¸€ã€Self-Forcingï¼šä» Wan2.1 åˆ°å› æœè§†é¢‘æ¨ç†</strong></h2>
<h3 data-id="heading-1"><strong>Wan2.1ï¼šå…¨å¸§å¹¶è¡Œçš„è§†é¢‘æ‰©æ•£æ¨¡å‹</strong></h3>
<p>Wan2.1 æ˜¯é˜¿é‡Œå·´å·´å›¢é˜Ÿå¼€æºçš„å¤§è§„æ¨¡è§†é¢‘ç”ŸæˆåŸºç¡€æ¨¡å‹ï¼ŒåŸºäºä¸»æµçš„æ‰©æ•£ Transformerï¼ˆDiTï¼‰æ¶æ„ï¼Œå¹¶é‡‡ç”¨ Flow Matching ä½œä¸ºè®­ç»ƒæ¡†æ¶ï¼Œåœ¨å¤šä¸ªè§†é¢‘ç”Ÿæˆè¯„æµ‹åŸºå‡†ä¸Šå±•ç°äº†é¢†å…ˆçš„ç”Ÿæˆè´¨é‡ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6b2a07bc97bd4a6b9e90f01cf660a06d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOU5ZOp5ZOU5ZOp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771570104&amp;x-signature=%2BupYVINenxO97jm%2BR1ydToOmXFA%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>åœ¨æ¨¡å‹è®¾è®¡ä¸Šï¼ŒWan2.1 é‡‡ç”¨å…¸å‹çš„<strong>å…¨æ—¶ç©ºå¹¶è¡Œå»ºæ¨¡æ€è·¯</strong>ã€‚æ¨¡å‹ä½¿ç”¨ Full Spatio-temporal Attentionï¼Œä½¿å¾—æ‰€æœ‰è§†é¢‘å¸§åœ¨æ—¶é—´å’Œç©ºé—´ç»´åº¦ä¸Šå®Œå…¨äº’ç›¸å¯è§ï¼Œä»è€Œå®ç°åŒå‘çš„ä¿¡æ¯æµåŠ¨ä¸å…¨å±€ä¸€è‡´æ€§å»ºæ¨¡ã€‚è§†é¢‘é¦–å…ˆé€šè¿‡ 3D Causal VAE è¢«å‹ç¼©åˆ° 4Ã—8Ã—8 çš„æ—¶ç©ºæ¯”ä¾‹ï¼Œlatent ç»´åº¦ä¸º 16ï¼Œæ–‡æœ¬ä¾§åˆ™ä½¿ç”¨ umT5 ç¼–ç å™¨ï¼Œå°†ä¸­è‹±æ–‡è¾“å…¥æ˜ å°„ä¸º 512 tokensã€4096 ç»´çš„è¯­ä¹‰è¡¨ç¤ºï¼Œå¹¶é€šè¿‡ Cross-Attention æ³¨å…¥åˆ°ç”Ÿæˆè¿‡ç¨‹ä¸­ã€‚</p>
<p>ä»è§„æ¨¡ä¸Šçœ‹ï¼ŒWan2.1 åŒæ—¶æä¾›äº†é¢å‘æ•ˆç‡å’Œè´¨é‡çš„ä¸åŒç‰ˆæœ¬ï¼š1.3B æ¨¡å‹é‡‡ç”¨ 1536 ç»´éšè—å±‚ã€30 å±‚ Transformer å’Œ 12 ä¸ªæ³¨æ„åŠ›å¤´ï¼Œæ›´é€‚åˆèµ„æºå—é™åœºæ™¯ï¼Œ14B æ¨¡å‹åˆ™æ‰©å±•åˆ° 5120 ç»´éšè—å±‚ã€40 å±‚ Transformer å’Œ 40 ä¸ªæ³¨æ„åŠ›å¤´ï¼Œä»¥è¿½æ±‚æ›´é«˜çš„ç”Ÿæˆä¸Šé™ã€‚</p>
<p>åœ¨æ¨ç†é˜¶æ®µï¼ŒWan2.1 ä¼šä¸€æ¬¡æ€§å¤„ç†æ‰€æœ‰è§†é¢‘å¸§ï¼Œé€šè¿‡ 40â€“50 æ­¥å»å™ªè¿­ä»£ç”Ÿæˆå®Œæ•´è§†é¢‘ã€‚è¿™ç§å…¨å¸§å¹¶è¡Œçš„ç”Ÿæˆæ–¹å¼åœ¨ä¸­çŸ­è§†é¢‘åœºæ™¯ä¸­èƒ½å¤Ÿæœ‰æ•ˆä¿è¯æ—¶åºä¸€è‡´æ€§ï¼Œä½†å…¶è®¾è®¡å‡è®¾ä¹Ÿç›´æ¥å†³å®šäº†æ¨¡å‹åœ¨æ›´é•¿è§†é¢‘å’Œå®æ—¶æ¨ç†åœºæ™¯ä¸‹ä¼šé‡åˆ°ä¸å¯å›é¿çš„ç“¶é¢ˆã€‚</p>
<h3 data-id="heading-2"><strong>å…¨å±€æ‰©æ•£æ¨¡å‹åœ¨é•¿è§†é¢‘æ¨ç†ä¸­çš„ç“¶é¢ˆ</strong></h3>
<p>éšç€è§†é¢‘é•¿åº¦çš„å¢åŠ ï¼ŒåŸºäºåŒå‘å…¨æ³¨æ„åŠ›çš„æ‰©æ•£æ¨¡å‹é€æ¸æš´éœ²å‡ºç»“æ„æ€§é—®é¢˜ã€‚é¦–å…ˆæ˜¯æ˜¾å­˜å’Œè®¡ç®—å¤æ‚åº¦çš„å¿«é€Ÿè†¨èƒ€ã€‚è‡ªæ³¨æ„åŠ›çš„å¤æ‚åº¦ä¸º O(NÂ²)ï¼Œå…¶ä¸­ N ä¸º token åºåˆ—é•¿åº¦ã€‚ä»¥ Wan2.1 ç”Ÿæˆ 5 ç§’ã€16 FPSã€832Ã—480 åˆ†è¾¨ç‡è§†é¢‘ä¸ºä¾‹ï¼Œç»è¿‡ VAE å‹ç¼©åä»ç„¶ä¼šå½¢æˆçº¦ 3 ä¸‡çº§åˆ«çš„ token åºåˆ—ï¼Œå½“è§†é¢‘é•¿åº¦ç¿»å€æ—¶ï¼Œæ³¨æ„åŠ›ç›¸å…³çš„æ˜¾å­˜éœ€æ±‚å°†å¢é•¿è‡³åŸæ¥çš„å››å€ï¼Œè¿™ä½¿å¾—å•å¡ç”Ÿæˆæ›´é•¿è§†é¢‘å˜å¾—å›°éš¾ã€‚</p>
<p>å…¶æ¬¡ï¼Œå…¨å±€å¹¶è¡Œæ³¨æ„åŠ›éšå«äº†<strong>å›ºå®šé•¿åº¦å‡è®¾</strong>ã€‚ç”±äºæ‰€æœ‰å¸§å¿…é¡»åŒæ—¶å‚ä¸è®¡ç®—ï¼Œæ¨¡å‹åœ¨è®­ç»ƒé˜¶æ®µé€šå¸¸å°±éœ€è¦è®¾å®šæœ€å¤§å¸§æ•°ï¼Œå½“æ¨ç†é˜¶æ®µå¸Œæœ›ç”Ÿæˆæ›´é•¿çš„è§†é¢‘æ—¶ï¼Œåªèƒ½é€šè¿‡æ»‘åŠ¨çª—å£æˆ–åˆ†æ®µæ‹¼æ¥æ¥å˜é€šå¤„ç†ï¼Œè€Œè¿™å¾€å¾€ä¼šå¸¦æ¥æ˜æ˜¾çš„æ—¶é—´æ¥ç¼å’Œé•¿ç¨‹ä¸€è‡´æ€§é€€åŒ–ï¼Œæ¨¡å‹æœ¬èº«å¹¶ä¸å…·å¤‡è‡ªç„¶å‘æ›´é•¿æ—¶é—´è½´æ‰©å±•çš„èƒ½åŠ›ã€‚</p>
<p>æ›´é‡è¦çš„æ˜¯ï¼Œè¿™ç§åŒå‘ä¾èµ–çš„å»ºæ¨¡æ–¹å¼ä½¿å¾—æ¨¡å‹æ— æ³•è¿›è¡Œæµå¼æ¨ç†ã€‚ç”±äºå½“å‰å¸§çš„ç”Ÿæˆä¼šå—åˆ°æœªæ¥å¸§çš„åå‘å½±å“ï¼Œç³»ç»Ÿå¿…é¡»ç­‰å¾…æ•´ä¸ªè§†é¢‘ç”Ÿæˆå®Œæˆåæ‰èƒ½è¾“å‡ºç»“æœï¼Œé¦–å¸§å»¶è¿Ÿå¾€å¾€è¾¾åˆ°æ•°åç§’ç”šè‡³æ›´é•¿ã€‚è¿™ç§â€œç¦»çº¿å¼â€çš„æ¨ç†æ¨¡å¼æ˜¾ç„¶æ— æ³•æ»¡è¶³å®æ—¶äº¤äº’ã€åœ¨çº¿ç”Ÿæˆæˆ–è§†é¢‘ç»­å†™ç­‰åº”ç”¨éœ€æ±‚ã€‚</p>
<p>è¿™äº›é—®é¢˜å¹¶éç®€å•çš„å·¥ç¨‹ä¼˜åŒ–å¯ä»¥è§£å†³ï¼Œè€Œæ˜¯æºè‡ªå…¨å±€æ‰©æ•£æ¨¡å‹åœ¨æ—¶é—´å»ºæ¨¡ä¸Šçš„åŸºæœ¬å‡è®¾ã€‚</p>
<h3 data-id="heading-3"><strong>Self-Forcingï¼šç”¨å› æœç”Ÿæˆé‡æ„è§†é¢‘æ‰©æ•£æ¨ç†</strong></h3>
<p>Self-Forcing æå‡ºäº†ä¸€ç§å› æœè‡ªå›å½’çš„è§†é¢‘æ‰©æ•£è®­ç»ƒä¸æ¨ç†æ–¹å¼ï¼Œå…¶æ ¸å¿ƒæ€æƒ³æ˜¯å°† Wan2.1 è¿™ç±»å…¨å¸§å¹¶è¡Œæ¨¡å‹ï¼Œæ”¹é€ ä¸º<strong>åªä¾èµ–å†å²ä¿¡æ¯çš„é€æ­¥ç”Ÿæˆæ¨¡å‹</strong>ï¼ŒåŒæ—¶é¿å…ä¼ ç»Ÿè‡ªå›å½’æ¨¡å‹ä¸­å¸¸è§çš„è¯¯å·®ç´¯ç§¯é—®é¢˜ã€‚</p>
<p>åœ¨æ¨¡å‹ç»“æ„ä¸Šï¼ŒSelf-Forcing å¼•å…¥å› æœæ³¨æ„åŠ›çº¦æŸï¼Œä½¿å½“å‰å¸§åªèƒ½å…³æ³¨å†å²å¸§è€Œæ— æ³•â€œçœ‹åˆ°â€æœªæ¥ä¿¡æ¯ã€‚è¿™ä¸€çº¦æŸé€šè¿‡ Block Mask æ–½åŠ åœ¨æ³¨æ„åŠ›è®¡ç®—ä¸­ï¼Œå¹¶é…åˆ Flex Attention å®ç°é«˜æ•ˆè®¡ç®—ã€‚ç”±äºæ»¡è¶³å› æœæ€§ï¼Œæ¨¡å‹åœ¨æ¨ç†æ—¶å¯ä»¥å®‰å…¨åœ°å¤ç”¨å†å²å¸§çš„ Key / Valueï¼Œä»è€Œå¼•å…¥ KV ç¼“å­˜æœºåˆ¶ï¼Œé¿å…åœ¨æ¯ä¸€æ­¥ç”Ÿæˆä¸­é‡å¤è®¡ç®—å·²ç»ç¡®å®šçš„ä¸Šä¸‹æ–‡ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/36410b5dffc348f4bcefecbff9df666b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOU5ZOp5ZOU5ZOp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771570104&amp;x-signature=irvnIvS1s%2BgZA%2FhPamTm0DHXYhg%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>åœ¨æ­¤åŸºç¡€ä¸Šï¼ŒSelf-Forcing é‡‡ç”¨é€å—ç”Ÿæˆç­–ç•¥ï¼Œå°†è§†é¢‘æŒ‰å¸§æˆ–æŒ‰å°æ®µ latent åˆ†å—ç”Ÿæˆã€‚æ¯ä¸€å—å®Œæˆå»å™ªåï¼Œå…¶ç»“æœä¼šè¢«å†™å…¥ KV ç¼“å­˜ï¼Œä½œä¸ºåç»­ç”Ÿæˆçš„ä¸Šä¸‹æ–‡ï¼›å½“ç¼“å­˜è¾¾åˆ°ä¸Šé™æ—¶ï¼Œé€šè¿‡ Rolling KV Cache è‡ªåŠ¨æ·˜æ±°æœ€æ—©çš„ tokensï¼Œä»è€Œåœ¨æœ‰é™æ˜¾å­˜ä¸‹æ”¯æŒä»»æ„é•¿åº¦çš„è§†é¢‘ç”Ÿæˆã€‚è¿™ç§è®¾è®¡å°†æ³¨æ„åŠ›çš„å³°å€¼å¤æ‚åº¦ä» O(NÂ²) é™ä½åˆ° O(BÃ—N)ï¼Œå…¶ä¸­ B ä¸ºå•æ¬¡ç”Ÿæˆçš„å—å¤§å°ã€‚</p>
<p>ä»å·¥ç¨‹å®ç°ä¸Šçœ‹ï¼ŒSelf-Forcing ä½¿ç”¨ CausalWanModel æ›¿ä»£åŸå§‹ WanModelï¼Œå¹¶åœ¨æ³¨æ„åŠ›å±‚ä¸­ç³»ç»Ÿæ€§åœ°å¼•å…¥å› æœæ©ç ã€KV ç¼“å­˜ä»¥åŠç¼–è¯‘çº§ä¼˜åŒ–ã€‚åœ¨ä¿æŒè®­ç»ƒä¸æ¨ç†ä¸€è‡´æ€§çš„å‰æä¸‹ï¼Œæ¨¡å‹åœ¨ç”Ÿæˆè´¨é‡ä¸Šä¸ Wan2.1 åŸºæœ¬æŒå¹³ï¼ŒVBench æŒ‡æ ‡ç”šè‡³ç•¥æœ‰æå‡ï¼ŒåŒæ—¶å°†é¦–å¸§å»¶è¿Ÿé™ä½åˆ°äºšç§’çº§ï¼Œå¹¶åœ¨å•å¡ H100 ä¸Šå®ç°äº†æ¥è¿‘å®æ—¶çš„è§†é¢‘ç”Ÿæˆé€Ÿåº¦ã€‚</p>
<p>æ€»ä½“è€Œè¨€ï¼ŒSelf-Forcing å¹¶ä¸æ˜¯å¯¹ Wan2.1 çš„å±€éƒ¨åŠ é€Ÿï¼Œè€Œæ˜¯ä¸€æ¬¡ä»<strong>å…¨å±€æ‰©æ•£èŒƒå¼å‘å› æœæ¨ç†èŒƒå¼</strong>çš„ç»“æ„æ€§è½¬å˜ï¼Œä¸ºé•¿è§†é¢‘ç”Ÿæˆã€æµå¼æ¨ç†å’Œå®æ—¶äº¤äº’æä¾›äº†å¯è¡Œçš„æŠ€æœ¯è·¯å¾„ã€‚</p>
<h2 data-id="heading-4"><strong>äºŒã€æ¨ç†ä¼˜åŒ–å·¥ä½œè¯¦è§£</strong></h2>
<h3 data-id="heading-5"><strong>åºåˆ—å¹¶è¡Œå®ç°</strong></h3>
<p>å®˜æ–¹çš„ Self-Forcing å®ç°å¹¶æœªæ”¯æŒåºåˆ—å¹¶è¡Œï¼ˆSequence Parallelism, SPï¼‰ï¼Œè¿™åœ¨å•å¡æ˜¾å­˜å—é™ã€å°¤å…¶æ˜¯é•¿è§†é¢‘æ¨ç†åœºæ™¯ä¸‹ï¼Œæˆä¸ºæ‰©å±•æ¨¡å‹èƒ½åŠ›çš„ä¸»è¦ç“¶é¢ˆã€‚ä¸ºäº†è§£å†³è¿™ä¸€é—®é¢˜ï¼Œæˆ‘ä»¬çš„ç®—æ³•å›¢é˜Ÿåœ¨ Self-Forcing å› æœæ³¨æ„åŠ›çš„åŸºç¡€ä¸Šï¼Œå‚è€ƒ Megatron ä»¥åŠ Ulysses çš„è®¾è®¡ï¼Œå¼•å…¥äº†å¯¹ SP çš„å®Œæ•´æ”¯æŒã€‚</p>
<p>åœ¨ SP æ¨¡å¼ä¸‹ï¼Œåºåˆ—ç»´åº¦è¢«å‡åŒ€åˆ‡åˆ†åˆ°å¤šä¸ªå¹¶è¡Œ rank ä¸Šï¼Œæ¯ä¸ª rank ä»…æŒæœ‰é•¿åº¦ä¸º<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>Â </mtext><mi>L</mi><mi mathvariant="normal">/</mi><mi>P</mi><mtext>Â </mtext></mrow><annotation encoding="application/x-tex">Â  L/PÂ </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord">Â </span><span class="mord mathnormal">L</span><span class="mord">/</span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mord">Â </span></span></span></span></span>çš„å±€éƒ¨åºåˆ—ã€‚æ•´ä½“çš„è®¡ç®—æµç¨‹å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/34ac8fec9ad14e0281aa3365410e65a1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOU5ZOp5ZOU5ZOp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771570104&amp;x-signature=jaTYlg2o92Dwl%2B%2FpnGG%2BOTaEBpU%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>åœ¨å®é™…çš„æ€§èƒ½åˆ†æä¸­ï¼Œæˆ‘ä»¬æ³¨æ„åˆ°ä¸¤ä¸ªå…³é”®é—®é¢˜ï¼šä¸€æ–¹é¢ï¼ŒRoPE åœ¨æ•´ä¸ªè‡ªæ³¨æ„åŠ›æ¨¡å—çš„è®¡ç®—ä¸­å æ®äº†æ˜¾è‘—çš„æ—¶é—´æ¯”ä¾‹ï¼›å¦ä¸€æ–¹é¢ï¼Œç°æœ‰ Causal RoPE çš„å®ç°éœ€è¦å®Œæ•´åºåˆ—ä¿¡æ¯ï¼Œå…¶è®¡ç®—ä¾èµ–äºå‰é¢çš„ä¸‰æ¬¡ all-gather é€šä¿¡ï¼Œå¯¼è‡´ RoPE æ— æ³•ä¸é€šä¿¡é˜¶æ®µé‡å æ‰§è¡Œï¼Œä»è€Œè¿›ä¸€æ­¥æ”¾å¤§äº†é€šä¿¡å¸¦æ¥çš„æ€§èƒ½æŸè€—ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/15f1ad87683441f9b0eae6a3b076861a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOU5ZOp5ZOU5ZOp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771570104&amp;x-signature=mV1phFGH4YgV7m1el2FtZdPQs%2Fc%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>åœ¨ Self-Forcing çš„åˆ†å—è‡ªå›å½’ç”Ÿæˆä¸­ï¼Œæ—¶é—´ä½ç½®éœ€è¦é€šè¿‡å…¨å±€åç§»æ¥ç¼–ç ï¼Œè¿™ä½¿å¾— RoPE çš„è®¡ç®—é€»è¾‘ç›¸æ¯”ä¼ ç»Ÿå®ç°æœ‰æ‰€ä¸åŒã€‚ä¸ºäº†ä¿è¯ KV Cache ä¸å› æœæ³¨æ„åŠ›çš„ä¸€è‡´æ€§ï¼Œæˆ‘ä»¬éœ€è¦åœ¨åºåˆ—åˆ†ç‰‡å†…éƒ¨æ­£ç¡®åº”ç”¨å…¨å±€æ—¶é—´ç´¢å¼•ï¼Œå®ç° Causal-RoPE çš„å±€éƒ¨åŒ–è®¡ç®—ã€‚</p>
<h3 data-id="heading-6"><strong>åˆ†å—è‡ªå›å½’ä¸‹çš„æ—‹è½¬ä½ç½®ç¼–ç </strong></h3>
<p>Wan2.1 ä½¿ç”¨çš„ 3D Rotary Positional Encoding ä¸ Qwen2.5-VL ä¸­çš„å¤šæ¨¡æ€ RoPEï¼ˆM-RoPEï¼‰åœ¨è®¾è®¡ä¸Šæ˜¯ä¸€è‡´çš„ï¼šå°†æ—‹è½¬é¢‘ç‡åœ¨ç»´åº¦ä¸Šæ‹†åˆ†ä¸ºæ—¶é—´ï¼ˆtemporalï¼‰ã€é«˜åº¦ï¼ˆheightï¼‰å’Œå®½åº¦ï¼ˆwidthï¼‰ä¸‰éƒ¨åˆ†ï¼Œä»è€Œå¯¹è§†é¢‘ token çš„ä¸‰ç»´ç©ºé—´ä½ç½®è¿›è¡Œç¼–ç ã€‚</p>
<p>åœ¨å…·ä½“å®ç°ä¸Šï¼ŒQwen2.5-VL é‡‡ç”¨ä¼ ç»Ÿçš„ cos/sin å½¢å¼ï¼Œå¹¶é€šè¿‡Â <strong>rotate_half</strong>Â å®ç°æ—‹è½¬ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">q_embedÂ = (q * cos) + (<span class="hljs-built_in">rotate_half</span>(q) * sin)
</code></pre>
<p>è€Œ Wan2.1 åˆ™ç›´æ¥ä½¿ç”¨å¤æ•°å½¢å¼æ¥è¡¨è¾¾æ—‹è½¬æ“ä½œï¼Œå°† RoPE æ˜¾å¼å»ºæ¨¡ä¸ºå¤å¹³é¢ä¸Šçš„ä¹˜æ³•ï¼š</p>
<pre><code class="hljs language-scss" lang="scss"># freqs åœ¨ rope_params ä¸­å·²é€šè¿‡ torch<span class="hljs-selector-class">.polar</span> è½¬æ¢ä¸ºå¤æ•°
freqs = freqs<span class="hljs-selector-class">.split</span>([c - <span class="hljs-number">2</span> * (c // <span class="hljs-number">3</span>), c <span class="hljs-comment">// 3, c // 3], dim=1)</span>
x_i = torch<span class="hljs-selector-class">.view_as_complex</span>(x[i, :seq_len].to(torch.float64)<span class="hljs-selector-class">.reshape</span>(Â  Â  
    seq_len, n, -<span class="hljs-number">1</span>, <span class="hljs-number">2</span>))
    
freqs_i = torch<span class="hljs-selector-class">.cat</span>([
    freqs[<span class="hljs-number">0</span>][:f].view(f, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, -<span class="hljs-number">1</span>)<span class="hljs-selector-class">.expand</span>(f, h, w, -<span class="hljs-number">1</span>),Â 
    freqs<span class="hljs-selector-attr">[1]</span><span class="hljs-selector-attr">[:h]</span><span class="hljs-selector-class">.view</span>(<span class="hljs-number">1</span>, h, <span class="hljs-number">1</span>, -<span class="hljs-number">1</span>)<span class="hljs-selector-class">.expand</span>(f, h, w, -<span class="hljs-number">1</span>),Â 
    freqs<span class="hljs-selector-attr">[2]</span><span class="hljs-selector-attr">[:w]</span><span class="hljs-selector-class">.view</span>(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, w, -<span class="hljs-number">1</span>)<span class="hljs-selector-class">.expand</span>(f, h, w, -<span class="hljs-number">1</span>)
], dim=-<span class="hljs-number">1</span>)

x_i = torch<span class="hljs-selector-class">.view_as_real</span>(x_i * freqs_i)<span class="hljs-selector-class">.flatten</span>(<span class="hljs-number">2</span>)
</code></pre>
<p>è¿™ç§å®ç°æ–¹å¼æ›´è´´è¿‘ RoPE çš„æ•°å­¦æœ¬è´¨ï¼Œå…¶æ ¸å¿ƒç­‰ä»·å…³ç³»å¯ä»¥å†™ä¸ºï¼š</p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>RoPE</mtext><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>Î¸</mi><mo stretchy="false">)</mo><mo>=</mo><mi>x</mi><mo>â‹…</mo><msup><mi>e</mi><mrow><mi>i</mi><mi>Î¸</mi></mrow></msup><mo>=</mo><mi>x</mi><mo>â‹…</mo><mo stretchy="false">(</mo><mi>cos</mi><mo>â¡</mo><mi>Î¸</mi><mo>+</mo><mi>i</mi><mi>sin</mi><mo>â¡</mo><mi>Î¸</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\text{RoPE}(x, \theta)=x \cdot e^{i \theta}=x \cdot(\cos \theta+i \sin \theta) </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord text"><span class="mord">RoPE</span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal" style="margin-right:0.02778em;">Î¸</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.4445em;"/><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.8991em;"/><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8991em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mord mathnormal mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.4445em;"/><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mopen">(</span><span class="mop">cos</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal" style="margin-right:0.02778em;">Î¸</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mop">sin</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal" style="margin-right:0.02778em;">Î¸</span><span class="mclose">)</span></span></span></span></span></div>
<p>åœ¨ Self-Forcing æ¡†æ¶ä¸‹ï¼Œä¸ºäº†æ”¯æŒåˆ†å—å› æœæ¨ç†ä¸ KV Cacheï¼Œå¼•å…¥äº†é¢å¤–çš„Â </p>
<p><strong>start_frame</strong>Â å‚æ•°ï¼Œç”¨äºæ˜¾å¼æŒ‡å®šå½“å‰ç”Ÿæˆå—åœ¨å…¨å±€æ—¶é—´è½´ä¸Šçš„èµ·å§‹ä½ç½®ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">defÂ <span class="hljs-built_in">causal_rope_apply</span>(x, grid_sizes, freqs, start_frame=<span class="hljs-number">0</span>):Â 
    freqs_i = torch.<span class="hljs-built_in">cat</span>([
        freqs[<span class="hljs-number">0</span>][start_frame:start_frame + f].<span class="hljs-built_in">view</span>(f,Â <span class="hljs-number">1</span>,Â <span class="hljs-number">1</span>, -<span class="hljs-number">1</span>).<span class="hljs-built_in">expand</span>(f, h, w, -<span class="hljs-number">1</span>),Â  Â  Â  Â  
        freqs[<span class="hljs-number">1</span>][:h].<span class="hljs-built_in">view</span>(<span class="hljs-number">1</span>, h,Â <span class="hljs-number">1</span>, -<span class="hljs-number">1</span>).<span class="hljs-built_in">expand</span>(f, h, w, -<span class="hljs-number">1</span>),Â  Â  Â  Â  
        freqs[<span class="hljs-number">2</span>][:w].<span class="hljs-built_in">view</span>(<span class="hljs-number">1</span>,Â <span class="hljs-number">1</span>, w, -<span class="hljs-number">1</span>).<span class="hljs-built_in">expand</span>(f, h, w, -<span class="hljs-number">1</span>)Â  Â  
    ], dim=-<span class="hljs-number">1</span>)
</code></pre>
<p>é€šè¿‡è¿™ä¸€æ”¹åŠ¨ï¼Œ3D RoPE è¢«è‡ªç„¶åœ°æ‰©å±•ä¸ºé€‚ç”¨äºåˆ†å—è‡ªå›å½’ç”Ÿæˆçš„å› æœå½¢å¼ã€‚å¯¹äºæ—¶é—´â€“ç©ºé—´ä½ç½®ä¸º<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>t</mi><mo separator="true">,</mo><mi>h</mi><mo separator="true">,</mo><mi>w</mi><mo stretchy="false">)</mo><mtext>Â </mtext></mrow><annotation encoding="application/x-tex"> (t, h, w)Â </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mopen">(</span><span class="mord mathnormal">t</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal">h</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mclose">)</span><span class="mord">Â </span></span></span></span></span>çš„ tokenï¼Œå…¶ä½ç½®ç¼–ç å¯ä»¥å½¢å¼åŒ–è¡¨ç¤ºä¸ºï¼š</p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>Causal-RoPE</mtext><mo stretchy="false">(</mo><msub><mi>x</mi><mrow><mi>t</mi><mo separator="true">,</mo><mi>h</mi><mo separator="true">,</mo><mi>w</mi></mrow></msub><mo stretchy="false">)</mo><mo>=</mo><msub><mi>x</mi><mrow><mi>t</mi><mo separator="true">,</mo><mi>h</mi><mo separator="true">,</mo><mi>w</mi></mrow></msub><mo>âŠ™</mo><msup><mi>e</mi><mrow><mi>i</mi><mo stretchy="false">(</mo><msub><mi>t</mi><mtext>global</mtext></msub><msub><mi>Î¸</mi><mi>T</mi></msub><mo>+</mo><mi>h</mi><msub><mi>Î¸</mi><mi>H</mi></msub><mo>+</mo><mi>w</mi><msub><mi>Î¸</mi><mi>W</mi></msub><mo stretchy="false">)</mo></mrow></msup></mrow><annotation encoding="application/x-tex">\text{Causal-RoPE}(x_{t, h, w}) = x_{t, h, w} \odot e^{i(t_{\text{global}}\theta_T + h\theta_H + w\theta_W)} </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0361em;vertical-align:-0.2861em;"/><span class="mord text"><span class="mord">Causal-RoPE</span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight">h</span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight" style="margin-right:0.02691em;">w</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.8694em;vertical-align:-0.2861em;"/><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight">h</span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight" style="margin-right:0.02691em;">w</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âŠ™</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.938em;"/><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.938em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mopen mtight">(</span><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3488em;margin-left:0em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"/><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">global</span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2901em;"><span/></span></span></span></span></span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">Î¸</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3567em;margin-left:-0.0278em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"/><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.1433em;"><span/></span></span></span></span></span><span class="mbin mtight">+</span><span class="mord mathnormal mtight">h</span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">Î¸</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3567em;margin-left:-0.0278em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"/><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight" style="margin-right:0.08125em;">H</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.1433em;"><span/></span></span></span></span></span><span class="mbin mtight">+</span><span class="mord mathnormal mtight" style="margin-right:0.02691em;">w</span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">Î¸</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3567em;margin-left:-0.0278em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"/><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">W</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.1433em;"><span/></span></span></span></span></span><span class="mclose mtight">)</span></span></span></span></span></span></span></span></span></span></span></span></span></div>
<p>å…¶ä¸­ï¼Œå…¨å±€æ—¶é—´ç´¢å¼•å®šä¹‰ä¸ºï¼š</p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>t</mi><mtext>global</mtext></msub><mo>=</mo><mi>t</mi><mo>+</mo><mi>s</mi><mo separator="true">,</mo><mspace width="1em"/><mi>s</mi><mo>=</mo><mi>k</mi><mi>Ï„</mi></mrow><annotation encoding="application/x-tex">t_{\text{global}} = t + s,\quad s = k\tau </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9012em;vertical-align:-0.2861em;"/><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">global</span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6984em;vertical-align:-0.0833em;"/><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"/><span class="mord mathnormal">s</span><span class="mpunct">,</span><span class="mspace" style="margin-right:1em;"/><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal">s</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6944em;"/><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mord mathnormal" style="margin-right:0.1132em;">Ï„</span></span></span></span></span></div>
<p>è¿™é‡Œ<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>Â </mtext><mi>k</mi><mtext>Â </mtext></mrow><annotation encoding="application/x-tex">Â kÂ </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"/><span class="mord">Â </span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mord">Â </span></span></span></span></span>ä¸ºå—ç´¢å¼•ï¼Œ<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>Â </mtext><mi>Ï„</mi></mrow><annotation encoding="application/x-tex">Â \tau </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"/><span class="mord">Â </span><span class="mord mathnormal" style="margin-right:0.1132em;">Ï„</span></span></span></span></span> ä¸ºå—å¤§å°ã€‚ä»¥ chunk-wiseï¼ˆæ¯å— 3 ä¸ª latent å¸§ï¼‰ä¸ºä¾‹ï¼Œä¸åŒç”Ÿæˆå—å¯¹åº”çš„ start_frame åˆ†åˆ«ä¸º 0ã€3ã€6 â€¦ï¼Œä¾æ­¤ç±»æ¨ã€‚</p>
<p>å¦‚æœä»…ä½¿ç”¨å±€éƒ¨æ—¶é—´ç´¢å¼•ï¼Œä¸åŒå—ä¸­å¤„äºç›¸åŒç›¸å¯¹ä½ç½®çš„ token å°†è·å¾—å®Œå…¨ç›¸åŒçš„ä½ç½®ç¼–ç ï¼Œä»è€Œå¯¼è‡´å…¨å±€æ—¶é—´é¡ºåºæ··æ·†ï¼Œå¹¶ä½¿ KV Cache ä¸­çš„ä½ç½®ä¿¡æ¯å¤±çœŸã€‚é€šè¿‡æ˜¾å¼å¼•å…¥å…¨å±€æ—¶é—´åç§»ï¼ŒCausal-RoPE ä¿è¯äº†ä½ç½®ç¼–ç ä¸è‡ªå›å½’ç”Ÿæˆé¡ºåºä¹‹é—´çš„ä¸€ä¸€å¯¹åº”å…³ç³»ã€‚</p>
<h3 data-id="heading-7"><strong>å±€éƒ¨è®¡ç®—çš„å¯è¡Œæ€§</strong></h3>
<p>åœ¨åºåˆ—å¹¶è¡Œè®¾ç½®ä¸‹ï¼Œåºåˆ—ç»´åº¦è¢«åˆ’åˆ†åˆ°<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>Â </mtext><mi mathvariant="normal">âˆ£</mi><mi mathvariant="script">R</mi><mi mathvariant="normal">âˆ£</mi><mtext>Â </mtext></mrow><annotation encoding="application/x-tex">Â  |\mathcal{R}|Â </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord">Â âˆ£</span><span class="mord mathcal">R</span><span class="mord">âˆ£Â </span></span></span></span></span>ä¸ªå¹¶è¡Œ rank ä¸Šã€‚å¯¹äº rank <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>r</mi><mtext>Â Â </mtext></mrow><annotation encoding="application/x-tex"> rÂ Â </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"/><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mord">Â Â </span></span></span></span></span>ï¼Œå…¶è´Ÿè´£çš„åºåˆ—åŒºé—´ä¸º<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>Â </mtext><mo stretchy="false">[</mo><mi>r</mi><mo>â‹…</mo><mi>L</mi><mo separator="true">,</mo><mo stretchy="false">(</mo><mi>r</mi><mo>+</mo><mn>1</mn><mo stretchy="false">)</mo><mo>â‹…</mo><mi>L</mi><mo stretchy="false">)</mo><mtext>Â </mtext></mrow><annotation encoding="application/x-tex">Â  [r\cdot L, (r+1)\cdot L)Â </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord">Â </span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal">L</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord">1</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal">L</span><span class="mclose">)</span><span class="mord">Â </span></span></span></span></span>ï¼Œå…¶ä¸­ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>Â </mtext><mi>L</mi><mo>=</mo><mo stretchy="false">âŒˆ</mo><mi>S</mi><mi mathvariant="normal">/</mi><mi mathvariant="normal">âˆ£</mi><mi mathvariant="script">R</mi><mi mathvariant="normal">âˆ£</mi><mo stretchy="false">âŒ‰</mo><mtext>Â </mtext></mrow><annotation encoding="application/x-tex">Â  L=\lceil S/|\mathcal{R}|\rceilÂ </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord">Â </span><span class="mord mathnormal">L</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mopen">âŒˆ</span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mord">/âˆ£</span><span class="mord mathcal">R</span><span class="mord">âˆ£</span><span class="mclose">âŒ‰</span><span class="mord">Â </span></span></span></span></span>ã€‚</p>
<p>ç”±äº token åœ¨åºåˆ—ä¸­æŒ‰ç…§"å¸§ä¼˜å…ˆ"çš„é¡ºåºæ’åˆ—ï¼Œåºåˆ—åˆ‡åˆ†åœ¨æ•ˆæœä¸Šç­‰ä»·äºå¯¹æ—¶é—´ç»´åº¦çš„è¿‘ä¼¼åˆ’åˆ†ã€‚å¯¹äº rank <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>Â </mtext><mi>r</mi><mtext>Â </mtext></mrow><annotation encoding="application/x-tex">Â rÂ </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"/><span class="mord">Â </span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mord">Â </span></span></span></span></span>ä¸­å±€éƒ¨ç´¢å¼•ä¸º<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>Â </mtext><msub><mi>i</mi><mtext>local</mtext></msub><mtext>Â </mtext></mrow><annotation encoding="application/x-tex">Â  i_{\text{local}}Â </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8095em;vertical-align:-0.15em;"/><span class="mord">Â </span><span class="mord"><span class="mord mathnormal">i</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">local</span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mord">Â </span></span></span></span></span>çš„ tokenï¼Œå…¶å¯¹åº”çš„å…¨å±€åºåˆ—ä½ç½®å’Œå…¨å±€æ—¶é—´ç´¢å¼•åˆ†åˆ«ä¸ºï¼š</p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>i</mi><mtext>global</mtext></msub><mo>=</mo><mi>r</mi><mo>â‹…</mo><mi>L</mi><mo>+</mo><msub><mi>i</mi><mtext>local</mtext></msub></mrow><annotation encoding="application/x-tex">i_{\text{global}} = r \cdot L + i_{\text{local}} </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9456em;vertical-align:-0.2861em;"/><span class="mord"><span class="mord mathnormal">i</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">global</span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.4445em;"/><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.7667em;vertical-align:-0.0833em;"/><span class="mord mathnormal">L</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.8095em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">i</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">local</span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span></div>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>t</mi><mtext>global</mtext></msub><mo>=</mo><mi>s</mi><mo>+</mo><mrow><mo fence="true">âŒŠ</mo><mfrac><msub><mi>i</mi><mtext>global</mtext></msub><mrow><mi>H</mi><mo>Ã—</mo><mi>W</mi></mrow></mfrac><mo fence="true">âŒ‹</mo></mrow></mrow><annotation encoding="application/x-tex">t_{\text{global}} = s + \left\lfloor \frac{i_{\text{global}}}{H \times W} \right\rfloor </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9012em;vertical-align:-0.2861em;"/><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">global</span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"/><span class="mord mathnormal">s</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:2.4em;vertical-align:-0.95em;"/><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">âŒŠ</span></span><span class="mord"><span class="mopen nulldelimiter"/><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3365em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.08125em;">H</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mord mathnormal" style="margin-right:0.13889em;">W</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"/><span class="frac-line" style="border-bottom-width:0.04em;"/></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord"><span class="mord mathnormal">i</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">global</span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.7693em;"><span/></span></span></span></span><span class="mclose nulldelimiter"/></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">âŒ‹</span></span></span></span></span></span></span></div>
<p>å…¶ä¸­<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>Â </mtext><mi>s</mi><mtext>Â </mtext></mrow><annotation encoding="application/x-tex">Â sÂ </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"/><span class="mord">Â </span><span class="mord mathnormal">s</span><span class="mord">Â </span></span></span></span></span>ä¸ºå½“å‰å—çš„ start_frameã€‚</p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œå¯¹æ¯ä¸ª tokenï¼ŒCausal-RoPE çš„è®¡ç®—ä»…ä¾èµ–å…¶è‡ªèº«ç‰¹å¾ã€å…¨å±€æ—¶é—´ä½ç½®ä»¥åŠå…±äº«çš„é¢‘ç‡å‚æ•° <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>Î¸</mi><mi>T</mi></msub><mo separator="true">,</mo><msub><mi>Î¸</mi><mi>H</mi></msub><mo separator="true">,</mo><msub><mi>Î¸</mi><mi>W</mi></msub><mtext>Â </mtext></mrow><annotation encoding="application/x-tex"> \theta_T, \theta_H, \theta_WÂ </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">Î¸</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">Î¸</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.08125em;">H</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">Î¸</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">W</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mord">Â </span></span></span></span></span>ã€‚åœ¨åˆ†å—è‡ªå›å½’ + SP çš„ç»„åˆä¸‹ï¼Œæˆ‘ä»¬é€šè¿‡åœ¨æ¯ä¸ª rank å†…åº”ç”¨æ­£ç¡®çš„å…¨å±€æ—¶é—´ç´¢å¼•ï¼Œå®ç°äº† RoPE çš„å®Œå…¨å±€éƒ¨è®¡ç®—ï¼Œæ— éœ€é¢å¤–è·¨ rank é€šä¿¡ï¼ŒåŒæ—¶ä¿æŒäº†å› æœä¸€è‡´æ€§ã€‚</p>
<p>è¿™ä¸€ç»“è®ºä¸ºåç»­çš„ä¼˜åŒ–æä¾›äº†ç†è®ºåŸºç¡€ã€‚</p>
<h3 data-id="heading-8"><strong>å®ç°æ–¹æ¡ˆä¸æ€§èƒ½å¯¹æ¯”</strong></h3>
<p>åŸºäºä¸Šè¿°åˆ†æï¼Œæˆ‘ä»¬å°† RoPE çš„è®¡ç®—ä¸‹æ²‰åˆ°åºåˆ—åˆ†ç‰‡å†…éƒ¨ï¼Œå…ˆåœ¨æœ¬åœ°å®Œæˆ Causal-RoPE çš„è®¡ç®—ï¼Œå†é€šè¿‡ä¸€æ¬¡èåˆçš„ all-to-all é€šä¿¡ï¼ŒåŒæ—¶å®Œæˆåºåˆ—ç»´åº¦ä¸æ³¨æ„åŠ›å¤´ç»´åº¦çš„é‡æ’ï¼Œä»è€Œæ›¿ä»£åŸå§‹å®ç°ä¸­çš„ä¸‰æ¬¡ all-gather å’Œä¸€æ¬¡ split æ“ä½œï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/df3b46ea587348e580ffd6f0d84642da~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOU5ZOp5ZOU5ZOp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771570104&amp;x-signature=BWaM8D%2Fzht1h414glYm%2Brcu5no0%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>åœ¨ç¬¬ä¸€é˜¶æ®µä¼˜åŒ–ä¸­ï¼Œæˆ‘ä»¬è¿›ä¸€æ­¥ç¼“å­˜ RoPE æ‰€éœ€çš„ sin/cosï¼Œå¹¶åŸºäº TileLang å®ç°ç®—å­èåˆï¼Œç›¸æ¯”ç¤¾åŒºå¸¸è§çš„ Triton å®ç°è·å¾—äº†çº¦ 10% çš„æ€§èƒ½æå‡ï¼Œæ•´ä½“ä¼˜åŒ–æ–¹æ¡ˆçš„ profile ç»“æœå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/53e394bcb979472e91cb369d88bebd34~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOU5ZOp5ZOU5ZOp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771570104&amp;x-signature=%2BNSs9HXbgBl00wV2BxCPwT8%2BoYs%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>åœ¨ä¸€æ¬¡å…¸å‹çš„ 5s 480P è§†é¢‘æ¨ç†ä¸­ï¼Œä¼šè§¦å‘ 920 æ¬¡çš„è‡ªæ³¨æ„åŠ›è®¡ç®—ï¼Œæ•´ä½“è€—æ—¶é™ä½çº¦ï¼š</p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi mathvariant="normal">Î”</mi><msub><mi>T</mi><mrow><mi>e</mi><mn>2</mn><mi>e</mi></mrow></msub><mo>=</mo><mn>920</mn><mo>Ã—</mo><mo stretchy="false">[</mo><mo stretchy="false">(</mo><mn>1.308</mn><mo>+</mo><mn>2.166</mn><mo stretchy="false">)</mo><mo>âˆ’</mo><mo stretchy="false">(</mo><mn>0.069257</mn><mo>+</mo><mn>0.273916</mn><mo stretchy="false">)</mo><mo stretchy="false">]</mo><mi>m</mi><mi>s</mi><mo>â‰ˆ</mo><mn>2.88</mn><mi>s</mi></mrow><annotation encoding="application/x-tex">\Delta T_{e 2 e}=920 \times[(1.308+2.166)-(0.069257+0.273916)] ms \approx 2.88 s </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord">Î”</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">e</span><span class="mord mtight">2</span><span class="mord mathnormal mtight">e</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"/><span class="mord">920</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mopen">[(</span><span class="mord">1.308</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord">2.166</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mopen">(</span><span class="mord">0.069257</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord">0.273916</span><span class="mclose">)]</span><span class="mord mathnormal">m</span><span class="mord mathnormal">s</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">â‰ˆ</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">2.88</span><span class="mord mathnormal">s</span></span></span></span></span></div>
<p>ç›¸æ¯”ä¼˜åŒ–å‰ 8.86s çš„ç«¯åˆ°ç«¯è€—æ—¶ï¼Œæ•´ä½“æ¨ç†æ€§èƒ½å®ç° çº¦ 1.48Ã— æ— æŸåŠ é€Ÿï¼ˆâ‰ˆ47.5% speedupï¼‰ï¼Œä¸å®é™…çš„å®éªŒç»“æœé«˜åº¦ä¸€è‡´ã€‚åç»­æˆ‘ä»¬åœ¨åšè®¡ç®—å›¾ä¼˜åŒ–çš„æ—¶å€™ï¼Œæ³¨æ„åˆ° RoPE çš„ç¼“å­˜é€»è¾‘å¯¹æ•´å›¾ä¼˜åŒ–ä¸å‹å¥½ï¼Œè¿›ä¸€æ­¥å°†åŠ¨æ€çš„ç¼“å­˜é€»è¾‘æ”¹æˆäº†é¢„è®¡ç®—é€»è¾‘ï¼Œå¹¶å°†ç»“æœå­˜å‚¨åœ¨è¿ç»­å¼ é‡ä¸­ï¼Œç»•è¿‡ Host Opï¼Œåœ¨æ¨ç†è¿‡ç¨‹ä¸­ç›´æ¥åœ¨ GPU ä¸Šè¿›è¡Œå¯»å€ï¼Œä½¿ç”¨é¢„è®¡ç®—çš„ cos / sin å¯¹è¾“å…¥å¼ é‡è¿›è¡Œæ—‹è½¬ç¼–ç è®¡ç®—ï¼Œä¼˜åŒ–äº† CUDA çš„è®¡ç®—æµï¼Œå®ç°äº†è®¡ç®—æ€§èƒ½çš„è¿›ä¸€æ­¥æå‡ã€‚</p>
<h2 data-id="heading-9"><strong>ä¸‰ã€æ€»ç»“ä¸å±•æœ›</strong></h2>
<p>æœ¬æ–‡åˆ†äº«äº†æˆ‘ä»¬åœ¨è§†é¢‘ç”Ÿæˆæ¨¡å‹æ¨ç†ä¼˜åŒ–ä¸­çš„ä¸€ç³»åˆ—å®è·µï¼Œé‡ç‚¹å›´ç»•åˆ†å—è‡ªå›å½’è§†é¢‘æ¨¡å‹åœ¨åºåˆ—å¹¶è¡Œåœºæ™¯ä¸‹çš„è®¡ç®—ä¸é€šä¿¡ä¼˜åŒ–å±•å¼€ã€‚é™¤ä¸Šè¿°å·¥ä½œå¤–ï¼Œæˆ‘ä»¬è¿˜åœ¨ä½æ¯”ç‰¹é‡åŒ–ã€è®¡ç®—å›¾ä¼˜åŒ–ç­‰æ–¹å‘æŒç»­æ¢ç´¢ï¼Œä¸ºåç»­æ›´å¤§è§„æ¨¡ã€æ›´ä½å»¶è¿Ÿçš„è§†é¢‘ç”Ÿæˆç³»ç»Ÿæ‰“ä¸‹åŸºç¡€ã€‚</p>
<p>-End-</p>
<p>ä½œè€…ä¸¨storyiconã€åœ¨å–å¯ä¹çš„æ´¾æ´¾</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[std::function/æ¨¡æ¿/è£¸å‡½æ•°æŒ‡é’ˆé€‰å‹æŒ‡å—]]></title>    <link>https://juejin.cn/post/7605810996125679650</link>    <guid>https://juejin.cn/post/7605810996125679650</guid>    <pubDate>2026-02-13T06:32:37.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605810996125679650" data-draft-id="7605625595571126287" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="std::function/æ¨¡æ¿/è£¸å‡½æ•°æŒ‡é’ˆé€‰å‹æŒ‡å—"/> <meta itemprop="keywords" content="C++"/> <meta itemprop="datePublished" content="2026-02-13T06:32:37.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="sTone87375"/> <meta itemprop="url" content="https://juejin.cn/user/2946346894764584"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            std::function/æ¨¡æ¿/è£¸å‡½æ•°æŒ‡é’ˆé€‰å‹æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2946346894764584/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    sTone87375
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-13T06:32:37.000Z" title="Fri Feb 13 2026 06:32:37 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>é€‰æ‹© <code>std::function</code>ã€æ¨¡æ¿è¿˜æ˜¯è£¸å‡½æ•°æŒ‡é’ˆï¼Œæ ¸å¿ƒåœ¨äº<strong>æƒè¡¡çµæ´»æ€§ã€æ€§èƒ½å’Œä»£ç å¤æ‚åº¦</strong>ã€‚ä»¥ä¸‹æ˜¯è¯¦ç»†çš„å†³ç­–æŒ‡å—ï¼š</p>
<hr/>
<h2 data-id="heading-0">å¿«é€Ÿå†³ç­–å›¾</h2>
<pre><code class="hljs language-c" lang="c">æ˜¯å¦éœ€è¦å­˜å‚¨å›è°ƒï¼Ÿï¼ˆç±»æˆå‘˜ã€å®¹å™¨ã€è·¨å‡½æ•°ä¼ é€’ï¼‰
â”œâ”€â”€ æ˜¯ â†’ æ˜¯å¦éœ€è¦ç±»å‹æ“¦é™¤ï¼Ÿï¼ˆå­˜å‚¨ä¸åŒç±»å‹ä½†ç›¸åŒç­¾åçš„å¯è°ƒç”¨å¯¹è±¡ï¼‰
â”‚   â”œâ”€â”€ æ˜¯ â†’ <span class="hljs-built_in">std</span>::functionï¼ˆæˆ– <span class="hljs-built_in">std</span>::function_ref C++<span class="hljs-number">23</span>ï¼‰
â”‚   â””â”€â”€ å¦ â†’ æ¨¡æ¿ï¼ˆå¦‚ <span class="hljs-built_in">std</span>::<span class="hljs-built_in">vector</span>&lt;å…·ä½“ç±»å‹&gt;ï¼‰
â””â”€â”€ å¦ â†’ ç¼–è¯‘æ—¶ç¡®å®šç±»å‹ï¼Ÿ
    â”œâ”€â”€ æ˜¯ â†’ æ¨¡æ¿ï¼ˆé›¶å¼€é”€ï¼Œæœ€ä¼˜æ€§èƒ½ï¼‰
    â””â”€â”€ å¦ â†’ è£¸å‡½æ•°æŒ‡é’ˆï¼ˆCæ¥å£ã€æç®€åœºæ™¯ï¼‰
</code></pre>
<hr/>
<h2 data-id="heading-1">è¯¦ç»†åœºæ™¯å¯¹æ¯”</h2>
<h3 data-id="heading-2">1. æ¨¡æ¿ï¼ˆ<code>template&lt;typename F&gt;</code>ï¼‰â€” <strong>é¦–é€‰ï¼Œå¦‚æœå¯èƒ½</strong></h3>
<p><strong>é€‚ç”¨åœºæ™¯ï¼š</strong></p>
<ul>
<li>å›è°ƒåªåœ¨å•ä¸ªå‡½æ•°å†…ä½¿ç”¨ï¼Œä¸éœ€è¦å­˜å‚¨</li>
<li>æ€§èƒ½æ•æ„Ÿï¼ˆé«˜é¢‘è°ƒç”¨ï¼‰</li>
<li>ç¼–è¯‘æ—¶å°±èƒ½ç¡®å®šå¯è°ƒç”¨å¯¹è±¡ç±»å‹</li>
</ul>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// âœ… æ¨èï¼šé›¶å¼€é”€æŠ½è±¡</span>
<span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> Func&gt;
<span class="hljs-type">void</span> <span class="hljs-title">execute</span><span class="hljs-params">(Func&amp;&amp; func)</span> </span>{
    <span class="hljs-built_in">func</span>();  <span class="hljs-comment">// ç›´æ¥å†…è”ï¼Œæ— é—´æ¥è°ƒç”¨å¼€é”€</span>
}

<span class="hljs-comment">// ä½¿ç”¨</span>
<span class="hljs-built_in">execute</span>([]{ std::cout &lt;&lt; <span class="hljs-string">"lambda\n"</span>; });
<span class="hljs-built_in">execute</span>(my_functor);
<span class="hljs-built_in">execute</span>(free_function);
</code></pre>
<p><strong>ä¼˜ç‚¹ï¼š</strong></p>
<ul>
<li>é›¶è¿è¡Œæ—¶å¼€é”€ï¼ˆå®Œå…¨å†…è”ï¼‰</li>
<li>æ”¯æŒä»»æ„å¯è°ƒç”¨å¯¹è±¡ï¼ˆlambdaã€ä»¿å‡½æ•°ã€å‡½æ•°æŒ‡é’ˆï¼‰</li>
<li>ç±»å‹å®‰å…¨ï¼Œç¼–è¯‘æœŸæ£€æŸ¥</li>
</ul>
<p><strong>ç¼ºç‚¹ï¼š</strong></p>
<ul>
<li>ä¸èƒ½å­˜å‚¨ï¼ˆæ— æ³•ä½œä¸ºç±»æˆå‘˜æˆ–æ”¾å…¥å®¹å™¨ï¼‰</li>
<li>å¿…é¡»åœ¨å¤´æ–‡ä»¶ä¸­å®ç°ï¼ˆæˆ–æ˜¾å¼å®ä¾‹åŒ–ï¼‰</li>
<li>ç¼–è¯‘æ—¶é—´å¯èƒ½å¢åŠ </li>
</ul>
<hr/>
<h3 data-id="heading-3">2. <code>std::function</code> â€” <strong>éœ€è¦ç±»å‹æ“¦é™¤æ—¶</strong></h3>
<p><strong>é€‚ç”¨åœºæ™¯ï¼š</strong></p>
<ul>
<li>éœ€è¦å­˜å‚¨å›è°ƒï¼ˆç±»æˆå‘˜å˜é‡ï¼‰</li>
<li>éœ€è¦æ”¾å…¥å®¹å™¨ï¼ˆ<code>std::vector&lt;std::function&lt;...&gt;&gt;</code>ï¼‰</li>
<li>éœ€è¦è¿è¡Œæ—¶å¤šæ€ï¼ˆä¸åŒç±»å‹ï¼Œç›¸åŒç­¾åï¼‰</li>
<li>è·¨å±‚ä¼ é€’ï¼ˆå¦‚ä»UIå±‚ä¼ é€’åˆ°ä¸šåŠ¡å±‚ï¼‰</li>
</ul>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// âœ… æ¨èï¼šéœ€è¦å­˜å‚¨çš„åœºæ™¯</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">TaskScheduler</span> {
    std::vector&lt;std::function&lt;<span class="hljs-type">void</span>()&gt;&gt; tasks_;  <span class="hljs-comment">// å­˜å‚¨ä¸åŒç±»å‹ä»»åŠ¡</span>
    
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">add</span><span class="hljs-params">(std::function&lt;<span class="hljs-type">void</span>()&gt; task)</span> </span>{  <span class="hljs-comment">// æ¥å—ä»»ä½•å¯è°ƒç”¨å¯¹è±¡</span>
        tasks_.<span class="hljs-built_in">push_back</span>(std::<span class="hljs-built_in">move</span>(task));
    }
    
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">run</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span>&amp; t : tasks_) <span class="hljs-built_in">t</span>();
    }
};

<span class="hljs-comment">// å¯ä»¥æ··åˆæ·»åŠ ï¼š</span>
scheduler.<span class="hljs-built_in">add</span>([]{ <span class="hljs-comment">/* lambda */</span> });
scheduler.<span class="hljs-built_in">add</span>(std::<span class="hljs-built_in">bind</span>(&amp;Class::method, &amp;obj));
scheduler.<span class="hljs-built_in">add</span>(free_function);
</code></pre>
<p><strong>ä¼˜ç‚¹ï¼š</strong></p>
<ul>
<li>æå¼ºçš„çµæ´»æ€§ï¼ŒçœŸæ­£çš„ç±»å‹æ“¦é™¤</li>
<li>å¯ä»¥å­˜å‚¨ã€å¤åˆ¶ã€ç§»åŠ¨</li>
<li>æ¥å£æ¸…æ™°ï¼Œè§£è€¦è°ƒç”¨æ–¹å’Œå®ç°æ–¹</li>
</ul>
<p><strong>ç¼ºç‚¹ï¼š</strong></p>
<ul>
<li>è¿è¡Œæ—¶å¼€é”€ï¼ˆé€šå¸¸ 1-2 æ¬¡é—´æ¥è·³è½¬ï¼‰</li>
<li>å¯èƒ½å †åˆ†é…ï¼ˆå¤§ lambda/ä»¿å‡½æ•°ï¼‰</li>
<li>å¯èƒ½æŠ›å‡º <code>bad_function_call</code></li>
</ul>
<p><strong>æ€§èƒ½ä¼˜åŒ–ï¼š</strong></p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// C++23 å¼•å…¥ std::function_refï¼šè½»é‡çº§ã€éæ‹¥æœ‰ã€é›¶åˆ†é…</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">process</span><span class="hljs-params">(std::function_ref&lt;<span class="hljs-type">void</span>(<span class="hljs-type">int</span>)&gt; callback)</span></span>;  <span class="hljs-comment">// åªè¯»å¼•ç”¨ï¼Œä¸å­˜å‚¨</span>
</code></pre>
<hr/>
<h3 data-id="heading-4">3. è£¸å‡½æ•°æŒ‡é’ˆ â€” <strong>C æ¥å£æˆ–æç®€åœºæ™¯</strong></h3>
<p><strong>é€‚ç”¨åœºæ™¯ï¼š</strong></p>
<ul>
<li>C è¯­è¨€æ¥å£/å…¼å®¹</li>
<li>ç³»ç»Ÿçº§ç¼–ç¨‹ï¼ˆä¿¡å·å¤„ç†ã€çº¿ç¨‹åˆ›å»ºï¼‰</li>
<li>ç»å¯¹é›¶å¼€é”€ä¸”ç¡®å®šæ— æ•è· lambda</li>
<li>åµŒå…¥å¼/èµ„æºæåº¦å—é™ç¯å¢ƒ</li>
</ul>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// âœ… æ¨èï¼šC API å›è°ƒ</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">qsort</span><span class="hljs-params">(<span class="hljs-type">void</span>* base, <span class="hljs-type">size_t</span> n, <span class="hljs-type">size_t</span> size, 
           <span class="hljs-type">int</span> (*cmp)(<span class="hljs-type">const</span> <span class="hljs-type">void</span>*, <span class="hljs-type">const</span> <span class="hljs-type">void</span>*))</span></span>;  <span class="hljs-comment">// C æ ‡å‡†åº“</span>

<span class="hljs-comment">// âœ… æ¨èï¼šä¿¡å·å¤„ç†</span>
<span class="hljs-built_in">void</span> (*<span class="hljs-built_in">signal</span>(<span class="hljs-type">int</span> sig, <span class="hljs-built_in">void</span> (*func)(<span class="hljs-type">int</span>)))(<span class="hljs-type">int</span>);

<span class="hljs-comment">// âŒ ä¸æ¨èï¼šç°ä»£ C++ åº”ç”¨å¼€å‘</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">register_callback</span><span class="hljs-params">(<span class="hljs-type">void</span> (*cb)(<span class="hljs-type">int</span>))</span></span>;  <span class="hljs-comment">// æ— æ³•æ¥å— lambdaï¼</span>
</code></pre>
<p><strong>ä¼˜ç‚¹ï¼š</strong></p>
<ul>
<li>æœ€å°å†…å­˜å ç”¨ï¼ˆé€šå¸¸ 4/8 å­—èŠ‚ï¼‰</li>
<li>ä¸ C å®Œå…¨å…¼å®¹</li>
<li>æœ€ç®€å•çš„ ABI</li>
</ul>
<p><strong>ç¼ºç‚¹ï¼š</strong></p>
<ul>
<li>æ— æ³•æ¥å—æœ‰æ•è·çš„ lambda</li>
<li>æ— æ³•æ¥å—ä»¿å‡½æ•°</li>
<li>ç±»å‹ä¸å®‰å…¨ï¼ˆ<code>void*</code> è½¬æ¢ï¼‰</li>
</ul>
<hr/>
<h2 data-id="heading-5">å®æˆ˜é€‰æ‹©æŒ‡å—</h2>


















































<table><thead><tr><th>åœºæ™¯</th><th>æ¨èæ–¹æ¡ˆ</th><th>ç†ç”±</th></tr></thead><tbody><tr><td>ç®—æ³•ä¸­çš„è‡ªå®šä¹‰æ¯”è¾ƒ/æ“ä½œ</td><td><strong>æ¨¡æ¿</strong></td><td><code>std::sort(begin, end, cmp)</code> å¼æ¥å£</td></tr><tr><td>äº‹ä»¶/å›è°ƒç³»ç»Ÿ</td><td><strong><code>std::function</code></strong></td><td>éœ€è¦å­˜å‚¨ä¸åŒç›‘å¬è€…</td></tr><tr><td>ä¾èµ–æ³¨å…¥/ç­–ç•¥æ¨¡å¼</td><td><strong>æ¨¡æ¿</strong> æˆ– <strong><code>std::function</code></strong></td><td>æ¨¡æ¿ç¼–è¯‘æœŸç¡®å®šï¼Œ<code>std::function</code> è¿è¡Œæ—¶åˆ‡æ¢</td></tr><tr><td>è·¨ DLL è¾¹ç•Œ</td><td><strong><code>std::function</code></strong> æˆ– <strong>è£¸æŒ‡é’ˆ</strong></td><td>æ³¨æ„ ABI å…¼å®¹æ€§</td></tr><tr><td>C API å°è£…</td><td><strong>è£¸æŒ‡é’ˆ</strong></td><td>è¢«è¿«ä½¿ç”¨</td></tr><tr><td>é«˜é¢‘è°ƒç”¨ï¼ˆ&gt;100ä¸‡æ¬¡/ç§’ï¼‰</td><td><strong>æ¨¡æ¿</strong></td><td>é¿å…è™šå‡½æ•°å¼€é”€</td></tr><tr><td>å»¶è¿Ÿæ‰§è¡Œ/ä»»åŠ¡é˜Ÿåˆ—</td><td><strong><code>std::function</code></strong></td><td>å¿…é¡»å­˜å‚¨</td></tr><tr><td>é…ç½®é©±åŠ¨ï¼ˆè¿è¡Œæ—¶å†³å®šè¡Œä¸ºï¼‰</td><td><strong><code>std::function</code></strong></td><td>è¿è¡Œæ—¶å¤šæ€</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-6">ç°ä»£ C++ æ¼”è¿›ï¼ˆC++23ï¼‰</h2>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// C++23 std::function_refï¼šåªè¯»ã€éæ‹¥æœ‰ã€é›¶åˆ†é…</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">process</span><span class="hljs-params">(std::function_ref&lt;<span class="hljs-type">int</span>(<span class="hljs-type">int</span>)&gt; op)</span></span>;

<span class="hljs-comment">// å¯¹æ¯”ï¼š</span>
<span class="hljs-comment">// std::function      : æ‹¥æœ‰ï¼Œå¯å­˜å‚¨ï¼Œæœ‰åˆ†é…å¼€é”€</span>
<span class="hljs-comment">// std::function_ref  : ä¸æ‹¥æœ‰ï¼Œè½»é‡ï¼Œä»…å€Ÿç”¨</span>
<span class="hljs-comment">// æ¨¡æ¿               : ç¼–è¯‘æœŸç¡®å®šï¼Œæœ€ä¼˜æ€§èƒ½ï¼Œæ— å­˜å‚¨èƒ½åŠ›</span>
</code></pre>
<hr/>
<h2 data-id="heading-7">æ€»ç»“å»ºè®®</h2>
<ol>
<li><strong>é»˜è®¤ç”¨æ¨¡æ¿</strong>ï¼šå¦‚æœä¸éœ€è¦å­˜å‚¨ï¼Œæ¨¡æ¿æ˜¯é›¶æˆæœ¬æŠ½è±¡çš„é»„é‡‘æ ‡å‡†</li>
<li><strong>å­˜å‚¨ç”¨ <code>std::function</code></strong>ï¼šéœ€è¦æ”¾å…¥å®¹å™¨æˆ–ç±»æˆå‘˜æ—¶</li>
<li><strong>C æ¥å£ç”¨è£¸æŒ‡é’ˆ</strong>ï¼šè¢«è¿«åœºæ™¯ï¼Œæˆ–æç«¯èµ„æºå—é™</li>
<li><strong>å…³æ³¨ C++23</strong>ï¼š<code>std::function_ref</code> å¯èƒ½æˆä¸º"éœ€è¦å¼•ç”¨ä½†ä¸å­˜å‚¨"åœºæ™¯çš„æœ€ä½³é€‰æ‹©</li>
</ol>
<p><strong>æ ¸å¿ƒåŸåˆ™</strong>ï¼šå…ˆå°è¯•æ¨¡æ¿ï¼Œé‡åˆ°å­˜å‚¨éœ€æ±‚å†é™çº§åˆ° <code>std::function</code>ï¼Œè£¸æŒ‡é’ˆä½œä¸ºæœ€åæ‰‹æ®µã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è¿›ç¨‹çº¿ç¨‹å’Œåç¨‹ä¸€]]></title>    <link>https://juejin.cn/post/7605907495770144777</link>    <guid>https://juejin.cn/post/7605907495770144777</guid>    <pubDate>2026-02-13T06:45:40.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605907495770144777" data-draft-id="7605807405307019327" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è¿›ç¨‹çº¿ç¨‹å’Œåç¨‹ä¸€"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-02-13T06:45:40.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§é­”ç‹719"/> <meta itemprop="url" content="https://juejin.cn/user/2256671358595687"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è¿›ç¨‹çº¿ç¨‹å’Œåç¨‹ä¸€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2256671358595687/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§é­”ç‹719
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-13T06:45:40.000Z" title="Fri Feb 13 2026 06:45:40 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#2b2b2b;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(159,219,252,.15) 3%,transparent 0),linear-gradient(1turn,rgba(159,219,252,.15) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin-top:35px;margin-bottom:10px;color:#4dd0e1}.markdown-body h1{font-size:30px;text-align:center;position:relative;width:max-content;margin:0 auto}.markdown-body h1:before{position:absolute;content:"";z-index:-1;top:-20px;height:100%;width:100px;left:0;right:0;margin:0 auto;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADsAAAA6CAYAAAAOeSEWAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAABkLSURBVGhDtZoHnJ1llcbP3Om9ZiYzmfSQhCQQIbRQVQKI9CYC68qKriJK0UXcZRcINqStIoiIqKCi1NACQihBWiCkkJ5MJlMyvd7p7d759v989/sy34yTbIj48Atz71ff855znvOc971xDrB/EtoGI7a9Z8Aq+wZML0mNj7dE95NZ1OKsj1dHo1GbnJpss9OTbWJyonvun4VP1Njuoagtb+m0it4By0iIt8LEeMvkr8XFWcfgkA1gYDLf47i2PzpsyU7UspKSLDoctagTZ7Vc08MzClMS7awJ2ZaflBB78CeET8TYla1dtrKt2w5KS7YCDGzEoz2RqKUmhGw6x2bhuXyOp2BoRXef1Q1E7Lj8TIsMD1sbxu1kcnYSAX1810RMTUmyMB7f2j1gC7NS7byinNiL/kH8Q8a+2NRh77b32El56VaPAe0YeGR2mh2bm+FdMRqP1rbZe+3dFsHT35qcb/Oz0rwzo7Gxs9feYPLS4kM2h8lawee5hPmlJXneFQeGAzJ2F564v7rFzi7Msu3d/Xgjzq5g8ArX8VCNN2vJ28daey0zZJabmGCLslP5HOf+Oygr3UzDGOf+JxrauXfQjslJt+dbuuyMgiwmk+sPAB/b2Lt2NdoMZnuY21qHIvbvUyZ4Z0ZQiXGrWjvsmPxsK4R0nmHA8ZCTQvxVQn5eRipklIBtcVbV1WtHYsjati47ZWKuTUpP9Z4yGk/xDBGe3v1mW4/dOrvYO7P/2G9jRSjf31FnXyaUXiB8r51WaJkM3kcfOSa2FR6qarIenooTLQHPLcC4mYThyw1tVpKWYlVERlZ8nC3Oz3Jzdn1nn5uvQ8OOHYvhR/CvsqffJbkCkZTvcYZ6Z0WTfTovw5Y1dtjXp+TbFPhgf7FfxpYxuMfr2uwo8rEtMmwXF+d6Z8wGmIR2PLyjo8cqOFffP2SLGexJEJCP9R29thkPXlpa4A5Y3w/jmuVNYYwO2QkY7WMtz3mVcE1hkualJdmSolzX8GnpKd4VZq80d1o7zN0RdWxGaqItgbn3B/+vsasgh/UMNBOvzYMZDxtDKp289KGaVguFQvb1yQWWwuB97GaSXqUUnVaYbSUwrDCEBz/C2CM8EhNrP13fbkeSh3OJgCAe2N1CWXKsGOc6TOr5U4q8MwYhDtkTda02MyPN+nnGBQEH7A37NHYz5KOZVv08qyjbSseEzKauPnsMj98wc6Ibcj5UUv7M8QWZTE52jEwGOVaD8U1Dw1YNWX0qM8VKyb80L/TrOPYOzH4KBJQTrK8M7+7KZjuM63sHBt17FubGoibCuf+tarWFGUmuwWeT8/vCXo1tZOYeZcazCaez8MwEzzM+HqhqtiJI5twxL1jeGLYk7jmKMF1JOCbg6Qj5nAdRqX7q3BYm8VAmQvW1lfcMc58IT95uIA3q+gftrDHPXUXJWkVEHJme5Bp5UmHsvIZ/O3l8ECE/FWcsItX2hr0ae8O2Wjs+J43QTbOZzGYQ/7Wtxq6eXjRK3r0By4YJ6Ty8EiYSJqcm2eGeV4Pox/ANENJR49RiEdfqcLflUJrEBZqgxYHrBjn2ExFURqKdVETN9YirJxKxR2rbrYeQv5ISmB6IsiDGNfZGWPeMgkzr58xnPaJ5p6XDZPKz4T77wayJ7jGhhXLwanOHTWBgq5n5q6YUwNJ7l3kKcRl7OJ7fF56l1GzvHbSD8dghTPi0wIRfv6XafjJ3ssv0PnZQ7nZx/etwzO1zJ3lHR2OETTw8x0tOx1AN3De0D7YV+63oGthjaJQ5Ur7eVVZjcdGInUyuaT73ZWg3efV8fZs7cc2E777Qi5eunVbghvPPymrt/krKGfcLd8ybYjdxrK6333Z09rjHZkNuLYzz0uIc+xWCZzz8nbHbe4dsY1e/XUOY+nimvtUaSazv4jXhaQasSbmYmpuenGwHZ8TKggSEQm08rMD7ahBOoExcMqXQegjnZ+CEvaEa1ZQUQkt39dj0zDS7krq+ARmpdws/nlNqD9WFbWN7l5u3wr9MyrcXKUsqWy3jTOaoML4DdaQ83YIoT4VYpEXvYQZLmbX5SLohBrgOj186Kc/iKTUPUhq+Rrm5ekOl3TWv1Mr6hqwbY0VOQXwEo+Moq4Z47q5qsU489G944LyJOW4LOLZOKtT/iI6+nGe/0dhuEd4ltj2NmiuCU4hnk5fHIi7+RK4uTEu0e+s7rAiRcw1CYy3OejvcYz+eXeI9MYY9nu3lYZl0KavJJ7Vjibzgjp319rUZE20j7CkJqFr5JQYgQ39f3eQaKpQk0afy8nl4uBzvjUUTRk7k3iebOm0pabDiyFn2XGu3dRME41CGVeBVqSiVnc6hIUpekp1VjHLDSOEcQlui5W/U8C7IKREjv1Gabw3wRwUTvpv7jybPtzHmIPZ49q6KRjuccqBQVCOtGvqXhrCFUUXJzOYSHt7Kw5Ix9H08dSje1o1JyL73IYXpEMmE5CRbw6wuykx2pR+Pd6/J4JpLiJKV6N9OnrcQNfQ0Zem6qQX2MmFXyWTE+DMO0kGx4e08DEjnXbsYuOq7niHB8jdY/wQ8Srm2XCZZUrOakF1CY5EKX0h93Tu/1J4kRdbDMT8MamgZK9xe3uDcvrPe++Y4f61rcZr7B53rN1c5N2ytcV5rCrvHt3T2Og19g+5nH7dvq3bqunr4NOwgK2MHA1jeEDuG7HNuLmtw7qpocl5t6nCPvdTQ7v4N4u3WTqeyu9cZHIo4f6lqdFoHh7wzMbzDeeGv3Hvzjlrnh2W1zofhHuftxpFn3VFe7zxS0+p0DlKVPbhhvBxhvwiFMgfP+mjHA08gEC4pybeLyK1iZldh8zC5VJQyUl8l59KZ0WJk2xaiYWxNrkXXJhA8r3PvZRur7ZZZRfadaRPsfiTmX9HGajC2tXd6V8dQTMhX0h8rNdJx9Ra8F8SbRNLzhPRnJmTZIUTYueTyWxyr7uv3rjC3OkzE8495oS+4xq6D5WoI0bO5WVCOSerl8rIeBrOI/Hkaw6ME5W1zSuzx2la3CRdWi3zIG+FDBvUp9LMgI/vggUmE7KkT81yGvOOgEYa/aUahhRAF5xLec3OzbF1r2O17BbVxIi7hzJIC64IYhXdJA+nh/5xVbOmE9J0QqjSxWk0pp37M2YEtgjS8GpimACu7xkqxdKJ6fEXyYl2Lre0ZtC8yELVewtWUnbfCPIhrvgDFz8WI5yhJKgcnFMZWEFrwhgzo5uWDDDA1oGSOzcu0xfx7vTlsv6posIMpJ6cGWPiw/BxL4PU7vbrpjgf8bMdu5OYwOdhm83DARUSa0ELknYIeEAaILuWxlhGa0M8+EuJCrpJT+ymENhN60pXBxa3LZ5TsucnlGaCmIEQ4Evru91yuz0xMtKaeXluI5zdh9Mm8vAlBn4aR07X64EH3vEKdXQkZJXPP/JxMvNRpLxEtHZ5RQgmNewnpouvVTpYTHdfOnmy5kFUGnpRTfEhXD9DiBdFFJB0/YWS9aj6pmc89r0BaQmgTRkgI+EsdKsYasJZOBF+QqTH474NK7LbyBvf7W+RgOxNyxfQY2/2hrp2+NkroxrzrQ55fSZkpJIa28znCgF6rb7H1hOSslATyvNflAh9pvHcX3lVE/Ya8FjTJIexa2Rq77nfU96unTnD7aME3+TAm6BFKYrPnqCNIqV5sq0ZGCiEV+Db+qWMQqpFgb5KPx48R6omeDl2EuP9DTYt9iGA/f1KBS1w/La+H4ktsSmLItvZHXLUkrCeflVtJ9DVVg1H7+sxiGvVM975rZpfabuqHVhuP5F1vewav5O8GamUe91yDanoYw47FWzC929O+DJnKA2opFY1Rjru5CE7kOcO0jJtQVUIynzuZEMeb+1CEOFXN8iFSGeRpCm1BTlJxVg49Azm819SO7Bu0axEbwn27GuxMck+TMQHDP8fn48gfDVIL4R8xKVPJ73MQBUIfA/Z54LMw5vmlE+w+VFo2A78X/SsyPA/RMD0z3e2qVLtfo7aeBslpMX0N0TEnLcUlKym1jyBFqSohmYntI5enBhYB9CY/2kNarhwJhNiMtRGyWnkQdKaCFyQwgydjyNUw4VchKxXv2/DoKdC+lkQbCX1NlKCGvJiBJkSGbCus6jfo4yGBNySgr+u7e20BCsxdVAcFlJ/tHd32+cIsNxSXUULUUx+dg/d47g7OPYFw2MxkSuyMwLHVTI6PBN6dS8Sppw45zHJSgDXV3aQzmz40Z6fDgBfiAXU0uZxby2zejee+j3eltoQMzhV6qSBogXwrEXDj7ElWxUQ8RrnSaoU0dxIsKaiMvMykXTu90NqJsGHP4z78SdLigUrLKat32nFwy/E07pfDFRdQ/7N5r57pQ1482uvWhMGhQcviGkVrKDUp0ToCxfhQal5n4Hs/g1jOgH4LWdwFOd1b1WzHET4vLZppv+Czjxo840OrDlG8jAJzv2tp5mLK1dsU/lfIOeWy5NxFxfl2BoYImlQtx9QF6mJRQKBsQYYuO2yaLYPBUXvu/VqYPxtHhNy7Y4hCkNLGPtKSklzCVKSHtMQxcqm5Kw1DhI2PTGZtcGDAvoLQ/u7MifYtWFBlxz2H9zo8RkwKzC5UYiG+p44ccqE62YAxLeT/TOpf8MXx8Qk0IJFRY1Go+viQVJpE5Ehjf49xfAZeqGIy/7us3nqxwQfCkjZypPxobVr/6YpQHIalUvuCyEwbSXC9PC8QnkFcXlrgLpoLIhIfKuaqlQkYIAwQnr/f3eyu7KttOw2lNpv8/BPHyjzVNER3o72gvEBKqRMTflndbP8BMweRDyeciEj5bFayFXqTLzheivgYJC0jwzwHa0MDDEotm48ndze5BBBElAnxxcRYHAFh3FfZaA9UNRmC354kNwUx8eHkmVj5dcTE5ZMnuEyr1QqlhtaJLuOYZv4v3KNo0TKrGPUZ1NILPKuWcvVn5Trv10SMB6h0j/ARMnlOuafCBIfnSWEx/Raif3HDzofYMM31dOyY9LBaLK3TjoX2fEqT4+2qaUVWSTQvyM6wC8nNJyEetXIyuLKrx04P7MKNnbJZlKUtNAIHo7i2dA/YU3Vtdi5l6jCepXy8hOedSSSsI8/HQg5Q+gxTKXwkMHkbESo+hjG0lbRRzQ3Fc5LOzDuFhs3Ptumpie7ilRDhlEJOq/hjsZljCxjkt7fWuPS/EekpXMggJQIk0G+eN9Xu2VmHWIkJe0nJRN4ptBBit2yutG9ML7J1DHAxebiAMrZ4VZlduqGS8I2tJc2iborUxmIN79c+kTovFxivPvrcSaP3n7RSKYTUmKt4N3rMOcw4JOneD3sP956jNaMglIeTER5Xbdlt15Tm2W10NEsYrA/N5JLCHHsR9tSqwxq08G3bqm1ZTbOtagnbo6SLvH/VzBL7W7jPzqFea0LmMLFzUuLtdwumuO3i1Vtq7OK15Xgw3l1PDmIXak+6QBEkvB9YJIzBcc/L20JIYaSZ/qAzVm5Ut4oowk3QehC+N3xo/1wTqt7zsYawfX9no9XjqdPXVLhrwyo/wucJYQkE1e4j8rLcBuHUItQQKqgMXb6LGvxFQlXw33AdZLR0V5P9Fr29lP73scNnosoyvdWPv4fPJ+uJrLVtMakqaL1M1cTvv0OLIZE6wk2a2IcIRUQh+DaejpdcXepBa7bKDRGM9PIVxTl2EwarZ72rooVuY4RQtMypdk6e1lLLehhY2lt7QEd7WxlCDvdIli6E9B4+ZIodmZEMccUGqgiZOqru9tkR3iJ8nCcXRWRZCSPMLPEjlx2LjQL1OM5qKAm+vhSuRqSfV5Ttrg8FdWcrnhMqCTex7DEM6qTsVEuM1+8hovaHQ6e6a1Fz0xLd3nUt4ToWWuzWNkhcoAIIjUx2ZpxjLzWF9+SYmngR1lok4TEoJxGfuijhI/7OICoFmadl2llcL9b1oRVJtbD+JLlv1KrhHG5811t9ELbzgk14ICUwqE+TDzftqHPz98vUSy3jSIwP8dCpkNqLDPTx+rArz4T5qLG3G2PrvJKKPoLBWE501NC3ilUX5mVjVIb9nIbgWcpPMiSXjbcL8K62UkR86m1/yfkSeMaHFuK04X0CE3J6SWzFUxw0BSNHlSzi3RmIRJwHq5udO3c16quLp6sbnffbupxbt+12vzOrzuvNHc7ycRbIxuJHgYU7YSASdQgxp7qz2ynv6HJeqW91doa7nLruXof+17sqhhu31Xif9o7HalqczV29Dnrb/f5EXZvzdH27U98/6LR5i3N0UM5zjHU71/lwjRWWltU5CAIn7F1MqLp/r9hQ5RoaxG+qmrxP4yNKcfsFLwuiprffeb2l03m2scO5h3Or2rudzjGrhk8x4Cqu2xcexilBvNEcdi5Yu4tKF3Ue4tzPy+td5/1md4tzw5iJ27NuXEYobYUdlb8z6GTWkdxaCvk2zHjd5mpKQ459mv5TkAp6mQb9Aq9HHQ8S6mrZnuc6vUG6WHusIhCJGNXl9byvnJyaiE7+Eoz8c5TYNQiUveENGpJpcIJ+biS8R0+rlcazGNs7pKB+zPLTOSX2KNWhlDAf4r2Spj72JORB5OyHULX+dlD/FOky/HFy5ygYU0sey/i8moeqdunXK1qC3RuaMOYHlI/raQMl3M+EeTV5WxD3Km8a8PkM8nr648sQ9+esKbf5e/nxiKBfAOQkxbv3SU9LYmqPV9V/Pn+V20VwTyVjTqCI6edEQUOFUXs9WmfSll8DyX2dt7GlnwkswaM3l9XZ0oNK3MTXbxpOV2sGk69s6XCJw4cY8KbyRrt9TrHt7Bm0rRBQe1+fHUWNfaapU0KbqxzbORC1M/LS3dJwIl3KOrwykQG/E+61q+isgniztdOKqNOziDgZqZIzFwPvqGiyg5NCtoCqoG5NxHhPZTOsnORulKskjoKMDeLuXQ3OmnC3syxARFXdfc57LR3OrdtrvSOOs55rnqhtcdoGhpxHdjc5EfJUuHZTlftX+G15rXPlhkrnLe59F7Lz8VGHdg8c5y2OLeMZ126qduq9XC3v7nd+FchLvYPJd15gPCu8XQnh/qpm59WGVudZzvvQO97kXTcGxhnEuJvR39tWY8cwK4uhcikk4a3Gdstg9l5B2t0wfaTdWkEou5vCPOV5PH73vFL3+DfXltnh6OxjkJD6Wd5F3g88tMe6CW/7YmI99VIL4u0oqUK8ocW4d8hFrXMVoOQU8s3U97MnjvDD/XRYkyhHM1MT3GVZQR2Tdv70U8EbA5vlo+CaPAaaSWoZXm50otGodxQ6L6txGKxzw5ZYORrBsPPrykZKQIy1n8bTjwb2fO4Te3ue7x6KOKvaYns1wtIddd4nx3mwot55qyl2360cp81zurg+CGqwU8v4/Of5uAVvPgObrwvHomY8jOtZ4fXWLnefdHVXv9044+8ZklCx75DXwcV1Sb27y+vInUQEuVYSaMgRJYfAwtoj0raFxIUW1A8nz35f02qLc9Lc9lG7CBkwtUR7bf+A+5uL6ehnH9Lat+5sIEfj3Cbj3NKRvP7Rjlo7FSmqavKvpSP8MRZ7NVbQYLSkqlC9ZW4sPH18gBTcORjrhMWmQWzFmK2UsvO90qQ1oZcI8UhkCLZPtRqMy0NirobAvjIpb4/sW06qKGyPR2oGIdlazjOOTk+kLYzaaYGSp63Wz6HsXsQ51wd+LTAuZOy+8GBNq7tF+IOdDU4kENJthNID5YRafZtzZ3mDs9LbRgzixcZ2l1h83OKFbDmEd0/FiFp7DWHgp0AQGzq6nf8hPF+oa3EehOz0ziCWcm4NpBRMhX1hn571oR9wqVVSDVPtUi32sQ0vbu7scZdY9aOt2ZSEL9BEBIW+dv20AKDd9/ep09oimYqHpyImkKDuRllS4PrlHNuIqDmCJmNJQba7q1joEaUQJuR/WdXsLrJrq/L6cdJsPOyXscJ7GLKqo8cOpqhrO//yQG6oS3kZwS9xPkRB3wi7diFMtDN+PLk5m1ath+8f0Fy80dbjhvVXub+U5mEqeal27UP+dWpPlknNxW79Ak6/7Tg3UMOF52j1xA1qK7Trd6nXC+8P9ttYQcumIonLSnJtBdJNa77axw1C2x3qR4Wqnj73x9f6MbV+CCYFBZO6y51aSh3gzVrsmwzJnULEbCJC1oZ7vIZ/9Iqmfvn2u5oWO5n8fApxcuWUApum5diPgY9lrA9EtvUNOzYf8vqAcJPsU5iOh7XtXQgt2uZhjKU2amF7HQyfEYWcZk5yQ1RDKNrLcq02k/9IGmldrB93KiokPw8EB2SsoKWXO5FmxXhlckqi+3vEUvLqwok5PHVkIWAszlqzy1p54zuLpnPZ3q9bod08JlLSb5DrNxDm38Sbvsg5EBywsT7oH+3XNW3uasGirFSrxRNdCllKiPZHZzJYLZb5qEcpae3pxMCuu9oibS5/QCOiLcYUrp+MmtJeURjFdVlxzqiae6D4h40NQt54HyGv3JRo10aVfv8YhtC0pSlVKcPFuxIXahr08mzCO4VzMlLSsZuomZ+RaucU0rXsw/sfF5+osUFonWob/7TrLdaUgdpV93fl9X+VIC0Y6tek2uI8OD3J5gT2Vj9ZmP0f4IM4iY7RQ5gAAAAASUVORK5CYII=) no-repeat 50%;background-size:64px 64px;opacity:.84}.markdown-body h1:after{position:absolute;content:"";width:150%;left:-25%;height:50%;bottom:12px;border-radius:50%;background:linear-gradient(transparent 80%,rgba(77,208,225,.8));background-size:400% 200%;opacity:.6;animation:h1Animate 6s linear infinite}@keyframes h1Animate{0%{background-position:100% 100%}50%{background-position:100% 50%}to{background-position:100% 100%}}.markdown-body h2{display:block;border-bottom:4px solid #4dd0e1;position:relative;font-size:24px;padding:12px 32px;margin:30px 0}.markdown-body h2:before{width:24px;height:24px;left:0;top:0;margin:auto;background-size:24px 24px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADGklEQVRYR81X32vTYBQ999s6mFjQgQ+DrbHiVFZYU4cDcQ/6pGhTFVYFEXGi82H+Bz448UnEF1Fx9ccEEcXpZE3d5tP2ooKiTacTHaLNpigMHDgnU9tcSbrWrkwWR0sbyEOSe885ObnfvV8IRT6oyPwoLQHBx+OVM5WJvSyEVAhnBOjt7yU/+/rr6r6l8TMO+F/EN0JQhICqQpD/xaRpcpAc9tS+M+9lBCia/oqBamK+zeDuQogQZaKJk3wcQjxSva7tGQGB2Ke1zIk3DNyMyNL+QpCnMQOaPsDAVuGAp9cjvbYc8Ec/bCYSg0zoiHilk1tHxqsqEsYlML4kjIpT/eurJxRNPweQU5VdrWaOEo1fgKAVbBgXIz73kF3R/ph+ghgdzMYWM29eAWlBJqgZaFlFYtC6nhWpaDqnSGlIlV1WjJ3DloDNgyNLncudqgX//Ucg3LxuStHGuhi8pqKCW3rqV342rwFjRznKm+/LNaN2yC237ThgF2wxcfMLeP6+ncrKzoPoKTGeLQbYbg4TNoC5iZPJY5HGVRdSNZAWYBclD3FzBQzrR8hACAKdzBzKA/4/IYioDQaOskBbpEG6PO8qKKSAEi3CnEb0Pw4oMf0OmKbTDWqh3Lw6EIiNBZi5lxh3wz4puBD5ovqAMvxhHSdFKxE1CQe3m/07TeTX4lcJdAhE+1Sv65Z5P/ByvIGTRowIZ9igbtXnmrOsbTvgj+kHBNMuBu9OdVw8EeU4nC1A0cYmAHZOTRrLhra4Z8ywnSN6vZHAFTA2WnnMfQB3qz73ddsOZM8CACFDIPSgQXqebXEgqgeZcAeEe6pXasm1f8ew3igMtAHWac0Uc/jYdyAaP0xEBwFsmgUPqbJ0NE2UKj4EGcahiOzuyhagaHpnmtgcVgTcCMuua7YdyAHbA3ArQNscVFbb4635aD6fnYaTvxxi9UNP7ddMXaRWVBdAcaLk6bDXPZCNZ9uBXEsDUX1T2Cc9yjig6Z0EHg3LK8/aqf6MwJKchkXfks1+0+JtSq3qLPa23BRR1B+T/6nkfMaW1r9hPt/MLtYfTLEpP+T9FNoAAAAASUVORK5CYII=)}.markdown-body h2:after,.markdown-body h2:before{content:"";display:block;position:absolute;bottom:0}.markdown-body h2:after{right:0;width:400px;height:10px;border-top-right-radius:24px;background:linear-gradient(90deg,#fff,#4dd0e1);max-width:50vw}.markdown-body h3{margin:30px 0;font-size:18px;position:relative;padding:4px 32px;width:max-content}.markdown-body h3:before{border-bottom:2px solid #4dd0e1;width:100%;content:"";display:block;height:28px;position:absolute;left:0;top:0;bottom:-2px;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);background-repeat:no-repeat;animation:h3AnimationBefore 2s infinite alternate}@keyframes h3AnimationBefore{0%{width:28px}25%{width:100%}50%{width:100%}to{width:100%}}.markdown-body h3:after{content:"";display:block;width:28px;height:28px;position:absolute;border:2px solid #4dd0e1;border-radius:50%;right:-15px;top:0;bottom:0;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);animation:h3AnimationAfter 2s infinite alternate}@keyframes h3AnimationAfter{0%{transform:rotate(0)}10%{transform:rotate(0)}50%{transform:rotate(-1turn)}to{transform:rotate(-1turn)}}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin:22px 0;letter-spacing:2px;font-size:14px;word-spacing:2px}.markdown-body img{max-width:80%;border-radius:6px;display:block;margin:20px auto!important;object-fit:contain;box-shadow:0 0 16px hsla(0,0%,43.1%,.45)}.markdown-body figcaption{display:block;font-size:13px;color:#2b2b2b}.markdown-body figcaption:before{content:"";background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAGFBMVEVHcExAuPtAuPpAuPtAuPpAuPtAvPxAuPokzOX5AAAAB3RSTlMAkDLqNegkoiUM7wAAAGBJREFUKM9jYBhcgMkBTUDVBE1BeDGqEtXychNUBeXlKEqACsrLQxB8lnCQQClCiWt5OYoSiAIkJVAF5eVBqAqAShTAAs7l5ShKWMwRAmAlSArASpAVgJUkCqIAscESHwCVVjMBK9JnbQAAAABJRU5ErkJggg==);display:inline-block;width:18px;height:18px;background-size:18px;background-repeat:no-repeat;background-position:50%;margin-right:5px;margin-bottom:-5px}.markdown-body hr{border:none;border-top:1px solid #4dd0e1;margin-top:32px;margin-bottom:32px}.markdown-body del{color:#4dd0e1}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(77,208,225,.08);color:#26c6da;padding:.195em .4em}.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#4dd0e1;border-bottom:1px solid #4dd0e1;font-weight:400;text-decoration:none;margin:0 4px}.markdown-body a:active,.markdown-body a:hover{background-color:rgba(77,208,225,.1)}.markdown-body strong{color:#26c6da}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{font-style:normal;color:#4dd0e1;font-weight:700}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(77,208,225,.05)}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{margin:2em 0;padding:24px 32px;border-left:4px solid #26c6da;background:rgba(77,208,225,.15);position:relative}.markdown-body blockquote:before{content:"â";top:8px;left:8px;color:#4dd0e1;font-size:30px;line-height:1;font-weight:700;position:absolute;opacity:.7}.markdown-body blockquote:after{content:"â";font-size:30px;position:absolute;right:8px;bottom:0;color:#4dd0e1;opacity:.7}.markdown-body blockquote p{color:#595959;line-height:2}.markdown-body ol,.markdown-body ul{color:#595959;padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰å¼•</h2>
<p align="left">**å›åˆ°è€ç”Ÿå¸¸è°ˆçš„é—®é¢˜ä»€ä¹ˆæ˜¯è¿›ç¨‹ä»€ä¹ˆçº¿ç¨‹ä»€ä¹ˆåˆæ˜¯åç¨‹ï¼Œæ¯ä¸ªç¼–ç¨‹è¯­è¨€é‡Œè™½ç„¶åè¯ä¸€æ ·ä½†æ˜¯å®é™…æ„ä¹‰å¤šå¤šå°‘å°‘åˆåˆä¸€äº›ä¸åŒï¼Œå€Ÿç€ä»Šå¤©æƒ³å†™æ–‡ç« çš„å†²åŠ¨ï¼Œæµ…è°ˆä¸€ä¸‹è‡ªå·±çš„ç†è§£ï¼Œå¦‚æœæœ‰ä¸å¯¹çš„è¿˜è¯·æŒ‡å‡º</p>
<h2 data-id="heading-1">è¿›ç¨‹</h2>
<p align="left">å…ˆè°ˆä¸€ä¸‹è¿›ç¨‹ï¼Œé¡¾åæ€ä¹‰åœ¨è¿›ç¨‹ï¼Œçº¿ç¨‹å’Œåç¨‹é‡Œé¢ è¿™ä¸ªè¿›ç¨‹åœ¨å®è§‚æ„ä¹‰ä¸Šæ¥è¯´å¯ä»¥æ˜¯æœ€å¤§çš„äº†ï¼Œä½ å¯ä»¥æŠŠå®ƒæƒ³è±¡æˆä¸€ä¸ª*æ‰§è¡Œç¨‹åº*æœ‰è‡ªå·±çš„pid,å¦‚ä»»åŠ¡ç®¡ç†å™¨é‡Œçš„æ¯ä¸ªå¯åŠ¨çš„ç¨‹åºéƒ½å¯ä»¥çœ‹æˆæ˜¯è¿›ç¨‹ã€‚</p>
<p align="left">é‚£é™¤äº†å®è§‚è‚¯å®šä¹Ÿæœ‰å¾®è§‚ï¼Œæ¯”å¦‚å¯¹ä¸€ä¸ªå€¼è¿›è¡Œè¯»å–ä¿®æ”¹çš„æ“ä½œéƒ½å¯ä»¥çœ‹ä½œæ˜¯ä¸€ä¸ªè¿›ç¨‹ï¼Œæ¯”å¦‚
</p><pre><code class="hljs language-python" lang="python">    <span class="hljs-built_in">str</span>  = <span class="hljs-string">'dada'</span>
    a = <span class="hljs-built_in">str</span>
    <span class="hljs-built_in">str</span> = a.split(<span class="hljs-string">'d'</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-built_in">str</span>)

</code></pre>
<p>è¿™ç§éƒ½æ˜¯å±äºè¿›ç¨‹æ“ä½œï¼Œé‚£æŠ›å‡ºä¸€ä¸ªå®˜æ–¹çš„å®šä¹‰ æ‰€æœ‰çš„<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathcolor="green"><mrow><mi>C</mi><mi>P</mi><mi>U</mi><mtext>å¯†é›†å‹ä»»åŠ¡</mtext><mo>âˆ—</mo></mrow></mstyle></mrow><annotation encoding="application/x-tex">\color{green}{CPUå¯†é›†å‹ä»»åŠ¡*}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord" style="color:green;"><span class="mord mathnormal" style="margin-right:0.13889em;color:green;">CP</span><span class="mord mathnormal" style="margin-right:0.10903em;color:green;">U</span><span class="mord cjk_fallback" style="color:green;">å¯†é›†å‹ä»»åŠ¡</span><span class="mord" style="color:green;">âˆ—</span></span></span></span></span></span>*éƒ½å±äºè¿›ç¨‹</p>
<p/>
<h3 data-id="heading-2">ä»€ä¹ˆæ˜¯CPUå¯†é›†å‹ä»»åŠ¡</h3>
<p>
    1ã€å¤æ‚çš„æ•°å­¦è®¡ç®—
</p>
<p>
    2ã€åŠ å¯†å’Œè§£å¯†
</p>
<p>
    3ã€æœºå™¨å­¦ä¹ 
</p>
<p>
    4ã€å€¼çš„è¯»å–ä¿®æ”¹å’Œå›å†™
</p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathcolor="green"><mrow><mtext>å› æ­¤åªè¦æ˜¯æ»¡è¶³ä¸Šé¢ä»»æ„ä¸€ä¸ªæˆ‘ä»¬éƒ½å¯ä»¥æŠŠå®ƒçœ‹æˆ</mtext><mi>C</mi><mi>P</mi><mi>U</mi><mtext>å¯†é›†å‹ä»»åŠ¡</mtext><mo>âˆ’</mo><mo>&gt;</mo><mtext>è¿›ç¨‹</mtext></mrow></mstyle></mrow><annotation encoding="application/x-tex">\color{green}{å› æ­¤åªè¦æ˜¯æ»¡è¶³ä¸Šé¢ä»»æ„ä¸€ä¸ªæˆ‘ä»¬éƒ½å¯ä»¥æŠŠå®ƒçœ‹æˆCPUå¯†é›†å‹ä»»åŠ¡-&gt;è¿›ç¨‹}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7667em;vertical-align:-0.0833em;"/><span class="mord" style="color:green;"><span class="mord cjk_fallback" style="color:green;">å› æ­¤åªè¦æ˜¯æ»¡è¶³ä¸Šé¢ä»»æ„ä¸€ä¸ªæˆ‘ä»¬éƒ½å¯ä»¥æŠŠå®ƒçœ‹æˆ</span><span class="mord mathnormal" style="margin-right:0.13889em;color:green;">CP</span><span class="mord mathnormal" style="margin-right:0.10903em;color:green;">U</span><span class="mord cjk_fallback" style="color:green;">å¯†é›†å‹ä»»åŠ¡</span><span class="mord" style="color:green;">âˆ’</span><span class="mspace" style="color:green;margin-right:0.2778em;"/><span class="mrel" style="color:green;">&gt;</span><span class="mspace" style="color:green;margin-right:0.2778em;"/><span class="mord cjk_fallback" style="color:green;">è¿›ç¨‹</span></span></span></span></span></span></p>
<h2 data-id="heading-3">çº¿ç¨‹</h2>
<p>
    çº¿ç¨‹è¦æ¯”è¿›ç¨‹å°ï¼Œä¸€ä¸ªè¿›ç¨‹é‡Œé¢å¯èƒ½æ˜¯æœ‰å¤šä¸ªçº¿ç¨‹æ¥æ„æˆï¼Œçº¿ç¨‹æ˜¯IOå¯†é›†å‹ä»»åŠ¡
    é‚£çº¿ç¨‹ç¨‹ä¹‹é—´å‘¢å¯èƒ½åˆåˆ†ä¸ºä¸»çº¿ç¨‹å’Œå­çº¿ç¨‹ï¼Œ
</p>
<h3 data-id="heading-4">ä»€ä¹ˆæ˜¯IOå¯†é›†å‹ä»»åŠ¡</h3>
<p>
    1ã€æ–‡ä»¶çš„è¯»å†™æ“ä½œ
</p>
<p>
    2ã€ç½‘ç»œè¯·æ±‚
</p>
<p>
    3ã€æ•°æ®åº“æ“ä½œ
</p>
<p>
    4ã€sleepæ“ä½œ
</p>
<h5 data-id="heading-5"><strong>ps:è¯»å–ï¼Œå“åº”ï¼Œä¿®æ”¹æ˜¯CPUå¯†é›†å‹ï¼ˆå ç”¨CPUè®¡ç®—ï¼‰,ç­‰å¾…ã€è·å–ç»“æœæ˜¯IOå¯†é›†å‹ï¼ˆå ç”¨æ—¶é—´ç­‰å¾…IOï¼‰</strong></h5>
<h3 data-id="heading-6">æ¥ä¸‹æ¥è®©æˆ‘ä»¬å…ˆçœ‹ä¸€ä¸ªç»å…¸çš„<strong>çº¿ç¨‹ä»£ç </strong></h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> threading <span class="hljs-keyword">import</span> Thread
<span class="hljs-keyword">import</span> time

total_money = <span class="hljs-number">200</span>

<span class="hljs-keyword">def</span> <span class="hljs-title function_">speed_money</span>(<span class="hljs-params">name: <span class="hljs-built_in">str</span>, sp_money: <span class="hljs-built_in">int</span></span>):
    time.sleep(<span class="hljs-number">1</span>)
    <span class="hljs-keyword">global</span> total_money
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\nå½“å‰çº¿ç¨‹æ˜¯<span class="hljs-subst">{name}</span>,å‡†å¤‡å–<span class="hljs-subst">{sp_money}</span>å…ƒ,å¼€å§‹æ£€æµ‹ä½™é¢æ˜¯å¦å……è¶³"</span>)
    <span class="hljs-keyword">if</span> total_money:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\nå½“å‰çº¿ç¨‹æ˜¯<span class="hljs-subst">{name}</span>ï¼Œä½™é¢å……è¶³ä¸º<span class="hljs-subst">{total_money}</span>ï¼Œå¼€å§‹å–é’±"</span>)
        total_money = <span class="hljs-built_in">round</span>(total_money - sp_money, <span class="hljs-number">2</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\nå½“å‰çº¿ç¨‹æ˜¯<span class="hljs-subst">{name}</span>ï¼Œå·²ç»å–äº†<span class="hljs-subst">{sp_money}</span>,è´¦å·ä½™é¢<span class="hljs-subst">{total_money}</span>"</span>)
    <span class="hljs-keyword">return</span> total_money

<span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():
    <span class="hljs-comment"># æ„å»ºçº¿ç¨‹</span>
    t1 = Thread(target=speed_money, args=(<span class="hljs-string">"ç¬¬ä¸€ä¸ªçº¿ç¨‹"</span>, <span class="hljs-number">100</span>))
    t2 = Thread(target=speed_money, args=(<span class="hljs-string">"ç¬¬äºŒä¸ªçº¿ç¨‹"</span>, <span class="hljs-number">100</span>))
    t3 = Thread(target=speed_money, args=(<span class="hljs-string">"ç¬¬ä¸‰ä¸ªçº¿ç¨‹"</span>, <span class="hljs-number">100</span>))
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\næ„å»ºå®Œçº¿ç¨‹"</span>)
    
    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> [t1, t2, t3]:
        i.start()
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\næ„å»ºå®Œçº¿ç¨‹,åœ¨joinå‰æ‰“å°"</span>)
    
    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">3</span>):
        t1.join()
        t2.join()
        t3.join()
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\næ„å»ºå®Œçº¿ç¨‹,åœ¨joinåæ‰“å°"</span>)

<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">'__main__'</span>:
    start_time = time.time()
    main()
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\nmainå‡½æ•°æ‰§è¡Œç»“æŸ"</span>)
    end_time = time.time()
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\næ€»è€—æ—¶"</span>, <span class="hljs-built_in">round</span>(end_time - start_time, <span class="hljs-number">2</span>))
</code></pre>
<p><strong>æ‰“å°ç»“æœå¦‚ä¸‹</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0f2a5c63b6f240878f345226cf66e216~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn6a2U546LNzE5:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771569940&amp;x-signature=OWXwhtnPN3R%2F0V18EvE9R%2BSSsQk%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-7">æŠ›å‡ºç–‘é—®</h3>
<ul>
<li><strong>startæ˜¯å¹²å•¥çš„</strong></li>
<li><strong>joinæ˜¯å¹²å•¥çš„</strong></li>
<li><strong>ä¸ºå•¥ç»“æœæœ€åæ‰“å°çš„ è´¦å·ä½™é¢æ˜¯0ï¼Œæˆ‘ä»¬ä¸æ˜¯å¯åŠ¨äº†3ä¸ªçº¿ç¨‹å—ï¼ŸæŒ‰ç…§å›ºå®šæ€ç»´æ¥è¯´ä¸åº”è¯¥æ˜¯-100æ‰èƒ½ä½“ç°å‡ºçº¿ç¨‹çš„ä½œç”¨å—?</strong></li>
</ul>
<p>
</p><p>ok,æˆ‘ä»¬æ¥ä¸€ä¸ªä¸€ä¸ªè§£é‡Š</p>
<p/>
<h4 data-id="heading-8">start</h4>
<p>æˆ‘ä»¬å…ˆæ”¹é€ ä¸€ä¸‹ä¸Šè¿°ä»£ç å»æ‰startå’Œjoinçœ‹æ˜¯ä»€ä¹ˆæ ·çš„</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> threading <span class="hljs-keyword">import</span> Thread
<span class="hljs-keyword">import</span> time

total_money = <span class="hljs-number">200</span>

<span class="hljs-keyword">def</span> <span class="hljs-title function_">speed_money</span>(<span class="hljs-params">name: <span class="hljs-built_in">str</span>, sp_money: <span class="hljs-built_in">int</span></span>):
    time.sleep(<span class="hljs-number">1</span>)
    <span class="hljs-keyword">global</span> total_money
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\nå½“å‰çº¿ç¨‹æ˜¯<span class="hljs-subst">{name}</span>,å‡†å¤‡å–<span class="hljs-subst">{sp_money}</span>å…ƒ,å¼€å§‹æ£€æµ‹ä½™é¢æ˜¯å¦å……è¶³"</span>)
    <span class="hljs-keyword">if</span> total_money:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\nå½“å‰çº¿ç¨‹æ˜¯<span class="hljs-subst">{name}</span>ï¼Œä½™é¢å……è¶³ä¸º<span class="hljs-subst">{total_money}</span>ï¼Œå¼€å§‹å–é’±"</span>)
        total_money = <span class="hljs-built_in">round</span>(total_money - sp_money, <span class="hljs-number">2</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\nå½“å‰çº¿ç¨‹æ˜¯<span class="hljs-subst">{name}</span>ï¼Œå·²ç»å–äº†<span class="hljs-subst">{sp_money}</span>,è´¦å·ä½™é¢<span class="hljs-subst">{total_money}</span>"</span>)
    <span class="hljs-keyword">return</span> total_money

<span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():
    <span class="hljs-comment"># æ„å»ºçº¿ç¨‹</span>
    t1 = Thread(target=speed_money, args=(<span class="hljs-string">"ç¬¬ä¸€ä¸ªçº¿ç¨‹"</span>, <span class="hljs-number">100</span>))
    t2 = Thread(target=speed_money, args=(<span class="hljs-string">"ç¬¬äºŒä¸ªçº¿ç¨‹"</span>, <span class="hljs-number">100</span>))
    t3 = Thread(target=speed_money, args=(<span class="hljs-string">"ç¬¬ä¸‰ä¸ªçº¿ç¨‹"</span>, <span class="hljs-number">100</span>))
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\næ„å»ºå®Œçº¿ç¨‹"</span>)

<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">'__main__'</span>:
    start_time = time.time()
    main()
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\nmainå‡½æ•°æ‰§è¡Œç»“æŸ"</span>)
    end_time = time.time()
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\næ€»è€—æ—¶"</span>, <span class="hljs-built_in">round</span>(end_time - start_time, <span class="hljs-number">2</span>
</code></pre>
<p>æ‰“å°ç»“æœå¦‚ä¸‹</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/55737269b03e4152ae0173d28496ee55~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn6a2U546LNzE5:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771569940&amp;x-signature=WYj7Br0E1rM1dmM%2BRooaPVA4SGE%3D" alt="image.png" loading="lazy"/>
<em>çœ‹èµ·æ¥ä¸åŠ startçš„è¯t1ï¼Œt2ï¼Œt3 3ä¸ªå­çº¿ç¨‹éƒ½æ²¡æœ‰æ‰§è¡Œï¼Œå€’æ˜¯æœ‰æ‰“å°ä¸»çº¿ç¨‹çš„æ•°æ®å¦‚</em></p>
<ul>
<li><strong>æ„å»ºå®Œçº¿ç¨‹</strong></li>
<li><strong>mainå‡½æ•°æ‰§è¡Œç»“æŸ</strong></li>
<li><strong>æ€»è€—æ—¶</strong></li>
</ul>
<p>é‚£æˆ‘ä»¬åŠ ä¸Šstartç»§ç»­çœ‹</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> threading <span class="hljs-keyword">import</span> Thread
<span class="hljs-keyword">import</span> time

total_money = <span class="hljs-number">200</span>

<span class="hljs-keyword">def</span> <span class="hljs-title function_">speed_money</span>(<span class="hljs-params">name: <span class="hljs-built_in">str</span>, sp_money: <span class="hljs-built_in">int</span></span>):
    time.sleep(<span class="hljs-number">1</span>)
    <span class="hljs-keyword">global</span> total_money
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\nå½“å‰çº¿ç¨‹æ˜¯<span class="hljs-subst">{name}</span>,å‡†å¤‡å–<span class="hljs-subst">{sp_money}</span>å…ƒ,å¼€å§‹æ£€æµ‹ä½™é¢æ˜¯å¦å……è¶³"</span>)
    <span class="hljs-keyword">if</span> total_money:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\nå½“å‰çº¿ç¨‹æ˜¯<span class="hljs-subst">{name}</span>ï¼Œä½™é¢å……è¶³ä¸º<span class="hljs-subst">{total_money}</span>ï¼Œå¼€å§‹å–é’±"</span>)
        total_money = <span class="hljs-built_in">round</span>(total_money - sp_money, <span class="hljs-number">2</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\nå½“å‰çº¿ç¨‹æ˜¯<span class="hljs-subst">{name}</span>ï¼Œå·²ç»å–äº†<span class="hljs-subst">{sp_money}</span>,è´¦å·ä½™é¢<span class="hljs-subst">{total_money}</span>"</span>)
    <span class="hljs-keyword">return</span> total_money

<span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():
    <span class="hljs-comment"># æ„å»ºçº¿ç¨‹</span>
    t1 = Thread(target=speed_money, args=(<span class="hljs-string">"ç¬¬ä¸€ä¸ªçº¿ç¨‹"</span>, <span class="hljs-number">100</span>))
    t2 = Thread(target=speed_money, args=(<span class="hljs-string">"ç¬¬äºŒä¸ªçº¿ç¨‹"</span>, <span class="hljs-number">100</span>))
    t3 = Thread(target=speed_money, args=(<span class="hljs-string">"ç¬¬ä¸‰ä¸ªçº¿ç¨‹"</span>, <span class="hljs-number">100</span>))
    
    t1.start()
    t2.start()
    t3.start()
    
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\næ„å»ºå®Œçº¿ç¨‹"</span>)

<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">'__main__'</span>:
    start_time = time.time()
    main()
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\nmainå‡½æ•°æ‰§è¡Œç»“æŸ"</span>)
    end_time = time.time()
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\næ€»è€—æ—¶"</span>, <span class="hljs-built_in">round</span>(end_time - start_time, <span class="hljs-number">2</span>
</code></pre>
<p>æ‰“å°ç»“æœå¦‚ä¸‹</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bc6cf2be85c940d593bed39b06d2047e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn6a2U546LNzE5:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771569940&amp;x-signature=a1lEKT11h5ZL5uPOjZ2cHbyS%2BcQ%3D" alt="image.png" loading="lazy"/></p>
<h6 data-id="heading-9">ç»¼ä¸Šå¾—å‡ºç»“è®º</h6>
<ul>
<li><strong>startå…³é”®å­—æ˜¯å¯åŠ¨å­çº¿ç¨‹</strong></li>
<li><strong>startå…³é”®å­—ä¸ä¼šé˜»å¡ä¸»è¿›ç¨‹ï¼ˆç±»ä¼¼æ²³æµåˆ†å‰-å­è¿›ç¨‹æ‰§è¡Œå­è¿›ç¨‹ï¼Œä¸»è¿›ç¨‹æ‰§è¡Œä¸»è¿›ç¨‹çš„ï¼Œä¸»è¿›ç¨‹å³ä½¿æ‰§è¡Œå®Œï¼Œå­è¿›ç¨‹ä¹Ÿä¼šç»§ç»­æ‰§è¡Œï¼‰</strong></li>
</ul>
<p>ä½†æ˜¯åªæœ‰startçš„è¯è‚¯å®šæ˜¯ä¸æ»¡è¶³æˆ‘ä»¬ä½¿ç”¨çš„ï¼Œæ¯”å¦‚æˆ‘ä»¬ä¸»è¿›ç¨‹éœ€è¦ç­‰å­è¿›ç¨‹æ‰§è¡Œå®Œæ‰ä¼šæ‰§è¡Œã€‚</p>
<h4 data-id="heading-10">join</h4>
<p>ç»§ç»­å®Œå–„ä¸Šé¢åªæœ‰startçš„ä»£ç </p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> threading <span class="hljs-keyword">import</span> Thread
<span class="hljs-keyword">import</span> time

total_money = <span class="hljs-number">200</span>

<span class="hljs-keyword">def</span> <span class="hljs-title function_">speed_money</span>(<span class="hljs-params">name: <span class="hljs-built_in">str</span>, sp_money: <span class="hljs-built_in">int</span></span>):
    time.sleep(<span class="hljs-number">1</span>)
    <span class="hljs-keyword">global</span> total_money
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\nå½“å‰çº¿ç¨‹æ˜¯<span class="hljs-subst">{name}</span>,å‡†å¤‡å–<span class="hljs-subst">{sp_money}</span>å…ƒ,å¼€å§‹æ£€æµ‹ä½™é¢æ˜¯å¦å……è¶³"</span>)
    <span class="hljs-keyword">if</span> total_money:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\nå½“å‰çº¿ç¨‹æ˜¯<span class="hljs-subst">{name}</span>ï¼Œä½™é¢å……è¶³ä¸º<span class="hljs-subst">{total_money}</span>ï¼Œå¼€å§‹å–é’±"</span>)
        total_money = <span class="hljs-built_in">round</span>(total_money - sp_money, <span class="hljs-number">2</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\nå½“å‰çº¿ç¨‹æ˜¯<span class="hljs-subst">{name}</span>ï¼Œå·²ç»å–äº†<span class="hljs-subst">{sp_money}</span>,è´¦å·ä½™é¢<span class="hljs-subst">{total_money}</span>"</span>)
    <span class="hljs-keyword">return</span> total_money

<span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():
    <span class="hljs-comment"># æ„å»ºçº¿ç¨‹</span>
    t1 = Thread(target=speed_money, args=(<span class="hljs-string">"ç¬¬ä¸€ä¸ªçº¿ç¨‹"</span>, <span class="hljs-number">100</span>))
    t2 = Thread(target=speed_money, args=(<span class="hljs-string">"ç¬¬äºŒä¸ªçº¿ç¨‹"</span>, <span class="hljs-number">100</span>))
    t3 = Thread(target=speed_money, args=(<span class="hljs-string">"ç¬¬ä¸‰ä¸ªçº¿ç¨‹"</span>, <span class="hljs-number">100</span>))

    t1.start()
    t2.start()
    t3.start()

    t1.join()
    t2.join()
    t3.join()

    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\næ„å»ºå®Œçº¿ç¨‹"</span>)

<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">'__main__'</span>:
    start_time = time.time()
    main()
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\nmainå‡½æ•°æ‰§è¡Œç»“æŸ"</span>)
    end_time = time.time()
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\næ€»è€—æ—¶"</span>, <span class="hljs-built_in">round</span>(end_time - start_time, <span class="hljs-number">2</span>))
</code></pre>
<p>æ‰“å°ç»“æœå¦‚ä¸‹</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/477bedc3f87045cf9e416328321ec29a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn6a2U546LNzE5:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771569940&amp;x-signature=isZgWzah%2BQeL7FgIjPucOt7Q%2Fv0%3D" alt="image.png" loading="lazy"/></p>
<h6 data-id="heading-11">ç»¼ä¸Šå¾—å‡ºç»“è®º</h6>
<ul>
<li><strong>joinéœ€è¦å’Œstratæˆå¯¹å‡ºç°</strong></li>
<li><strong>joinä¼šé˜»å¡å½“å‰ä¸»çº¿ç¨‹ã€‚</strong></li>
<li><strong>è¢«joinçš„å­çº¿ç¨‹æ‰§è¡Œå®Œï¼Œä¼šç»§ç»­æ‰§è¡Œä¸»çº¿ç¨‹</strong></li>
</ul>
<h4 data-id="heading-12">ä¸ºå•¥æ‰“å°ä½™é¢æ˜¯0</h4>
<p>ä¸çŸ¥é“ä½ è¿˜è®°ä¸è®°å¾—æˆ‘ä»¬åœ¨è¿›è¡Œifåˆ¤æ–­çš„æ—¶å€™ï¼Œæˆ‘ä»¬æ˜¯æœ‰ä¸€ä¸ªsleepçš„æ“ä½œçš„,</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d6b7d8b628664259954889ea137652de~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn6a2U546LNzE5:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771569940&amp;x-signature=YUjGtQ%2BHBb1dtMk7Q1HiY9a7f3Q%3D" alt="image.png" loading="lazy"/></p>
<p>å¾ˆå…³é”®çš„ä¸€æ­¥ï¼Œé‚£æˆ‘ä»¬å…ˆåå¯åŠ¨äº†<strong>3</strong>ä¸ªå­çº¿ç¨‹ï¼Œ<strong>t1.start,ï¼Œt2.start,ï¼Œt3.start</strong>,å½“å­çº¿ç¨‹æ‰§è¡Œåˆ°<strong>sleep</strong>è¿™æ­¥æ—¶ï¼Œçº¿ç¨‹1ï¼Œçº¿ç¨‹2ï¼Œçº¿ç¨‹3éƒ½åœ¨è¿™ä¸ªåœ°æ–¹åœäº†ä¸‹æ¥ï¼Œä¹Ÿå°±æ˜¯åœ¨<strong>1så†…è¿™ä¸ªåœ°æ–¹å¯èƒ½èšé›†äº†3ä¸ªå­çº¿ç¨‹</strong>ï¼Œç„¶åç¡çœ æ—¶é—´ç»“æŸï¼Œt1ï¼Œt2ï¼Œt3å¼€å§‹ç»§ç»­å‘ä¸‹æ‰§è¡Œã€‚<strong>ï¼ˆè¿™é‡Œä¸å¼•å…¥gliçš„æ¦‚å¿µï¼ˆå³ä¸€ä¸ªè¿›ç¨‹ä¼šæœ‰ä¸€ä¸ªglié”ï¼Œä¹Ÿå°±æ˜¯åŒä¸€æ—¶é—´åŒä¸€è¡Œä»£ç åªæœ‰ä¸€ä¸ªçº¿ç¨‹å¯ä»¥æ‰§è¡Œï¼‰ï¼‰</strong>
é‚£æˆ‘t1å…ˆè¿›è¡Œé€»è¾‘åˆ¤æ–­ï¼Œtotal_moneyé¦–æ¬¡è‚¯å®šæ˜¯é€šè¿‡çš„ï¼Œè¿›è¡Œä¸€æ¬¡å‡æ³•è¿ç®—ï¼Œ<strong>total_moneyæœ€åæ˜¯100</strong>ï¼Œè¿™ä¸ªæ—¶å€™å¯èƒ½t2ä¹Ÿè¿›è¡Œäº†åˆ¤æ–­ï¼Œtotal_moneyæ˜¯100ä¹Ÿé€šè¿‡ï¼Œå†æ¬¡è¿›è¡Œä¸€æ¬¡å‡æ³•è¿ç®—ï¼Œ<strong>total_moneyæœ€åæ˜¯0</strong>ï¼Œè¿™ä¸ªæ—¶å€™å¯èƒ½t3ä¹Ÿè¿›è¡Œäº†åˆ¤æ–­ï¼Œtotal_moneyæ˜¯0ï¼Œæ‰€ä»¥ä¸ä¼šé€šè¿‡ æœ€åç»“æœæ‰“å°æ˜¯** 0**ï¼Œ<strong>å½“ç„¶è¿™ä¸ªæ˜¯ç†æƒ³çŠ¶æ€ï¼Œä¸”ifé€»è¾‘å¾ˆçŸ­ï¼Œæ‰€ä»¥å‡ºç°äº†é€»è¾‘ç»“æŸï¼Œä¸‹ä¸€ä¸ªå­çº¿ç¨‹è¿˜æ²¡å¼€å§‹è¿›å…¥å†…éƒ¨é€»è¾‘è¿ç®—çš„åœºæ™¯</strong></p>
<h5 data-id="heading-13">ä¿®æ”¹ä»£ç </h5>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> threading <span class="hljs-keyword">import</span> Thread
<span class="hljs-keyword">import</span> time

total_money = <span class="hljs-number">200</span>

<span class="hljs-keyword">def</span> <span class="hljs-title function_">speed_money</span>(<span class="hljs-params">name: <span class="hljs-built_in">str</span>, sp_money: <span class="hljs-built_in">int</span></span>):
    time.sleep(<span class="hljs-number">1</span>)
    <span class="hljs-keyword">global</span> total_money
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\nå½“å‰çº¿ç¨‹æ˜¯<span class="hljs-subst">{name}</span>,å‡†å¤‡å–<span class="hljs-subst">{sp_money}</span>å…ƒ,å¼€å§‹æ£€æµ‹ä½™é¢æ˜¯å¦å……è¶³"</span>)
    <span class="hljs-keyword">if</span> total_money:
        time.sleep(<span class="hljs-number">1</span>)<span class="hljs-comment">#åªæ˜¯å¢åŠ äº†è¿™æ­¥</span>
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\nå½“å‰çº¿ç¨‹æ˜¯<span class="hljs-subst">{name}</span>ï¼Œä½™é¢å……è¶³ä¸º<span class="hljs-subst">{total_money}</span>ï¼Œå¼€å§‹å–é’±"</span>)
        total_money = <span class="hljs-built_in">round</span>(total_money - sp_money, <span class="hljs-number">2</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\nå½“å‰çº¿ç¨‹æ˜¯<span class="hljs-subst">{name}</span>ï¼Œå·²ç»å–äº†<span class="hljs-subst">{sp_money}</span>,è´¦å·ä½™é¢<span class="hljs-subst">{total_money}</span>"</span>)
    <span class="hljs-keyword">return</span> total_money

<span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():
    <span class="hljs-comment"># æ„å»ºçº¿ç¨‹</span>
    t1 = Thread(target=speed_money, args=(<span class="hljs-string">"ç¬¬ä¸€ä¸ªçº¿ç¨‹"</span>, <span class="hljs-number">100</span>))
    t2 = Thread(target=speed_money, args=(<span class="hljs-string">"ç¬¬äºŒä¸ªçº¿ç¨‹"</span>, <span class="hljs-number">100</span>))
    t3 = Thread(target=speed_money, args=(<span class="hljs-string">"ç¬¬ä¸‰ä¸ªçº¿ç¨‹"</span>, <span class="hljs-number">100</span>))

    t1.start()
    t2.start()
    t3.start()

    t1.join()
    t2.join()
    t3.join()

    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\næ„å»ºå®Œçº¿ç¨‹"</span>)

<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">'__main__'</span>:
    start_time = time.time()
    main()
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\nmainå‡½æ•°æ‰§è¡Œç»“æŸ"</span>)
    end_time = time.time()
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\næ€»è€—æ—¶"</span>, <span class="hljs-built_in">round</span>(end_time - start_time, <span class="hljs-number">2</span>))
</code></pre>
<h6 data-id="heading-14">æ”¹åŠ¨å†…å®¹</h6>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d3fa4d02eb634eceba1485e763fd9f81~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn6a2U546LNzE5:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771569940&amp;x-signature=7w3BKZ0bjUK3VL6726BDlf87FDU%3D" alt="image.png" loading="lazy"/>
æ‰“å°ç»“æœå¦‚ä¸‹</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/291082bc174d41e8bc40d2b2895d1ae8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn6a2U546LNzE5:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771569940&amp;x-signature=vySwNdKhUAahrI0qjVCVUwBGdwI%3D" alt="image.png" loading="lazy"/>
<strong>è¿™é‡Œä»£ç åªæ˜¯åŠ äº†ä¸€ä¸ªsleep,ä¸ºå•¥ä½™é¢å˜æˆè´Ÿæ•°äº†å‘¢ï¼Ÿ</strong>
æŒ‰ç…§ä¸Šé¢ç°è±¡çš„è§£é‡Šå¯¹ç…§åˆ†æï¼Œç¬¬ä¸€ä¸ªsleepèšé½äº†3ä¸ªå­çº¿ç¨‹ï¼Œç¬¬ä¸€ä¸ªå­çº¿ç¨‹sleepç»“æŸï¼Œå‘é‡Œæ‰§è¡Œé¦–æ¬¡total_moneyæ˜¯200ï¼Œè‚¯å®šæ˜¯é€šè¿‡çš„ï¼Œ<strong>è¿™ä¸ªæ—¶å€™åˆé‡åˆ°äº†sleep,æ‰€ä»¥ç»§ç»­ç¡çœ </strong>ã€‚é‚£è¿™ä¸ªæ—¶å€™ç¬¬äºŒä¸ªçº¿ç¨‹sleepä¹Ÿç»“æŸäº†ï¼Œå› ä¸ºç¬¬ä¸€ä¸ªçº¿ç¨‹è¿˜åœ¨ç¡çœ è‚¯å®šæ˜¯è¿˜æ²¡æœ‰ä¿®æ”¹total_moneyçš„ï¼Œ<strong>æ‰€ä»¥total_moneyä¹Ÿæ˜¯200ï¼Œä¹Ÿè¿›å…¥äº†ifé‡Œé¢ï¼Œåˆç¢°åˆ°äº†sleepï¼Œæ‰€ä»¥ä¹Ÿç»§ç»­ç¡çœ </strong>ï¼Œç¬¬ä¸‰ä¸ªåŒç†ã€‚æœ€åä¹Ÿå³æ˜¯åœ¨é‡Œé¢çš„sleepåˆèšé›†äº†3ä¸ªå­çº¿ç¨‹ï¼Œç„¶å<strong>3ä¸ªå­çº¿ç¨‹ä¾æ¬¡å”¤é†’ï¼Œä¾æ¬¡è¿›è¡Œå‡100çš„æ“ä½œï¼Œæœ€åå¾—å‡º total_moneyæ˜¯-100</strong>ï¼Œps:ä»£ç é‡Œçš„sleepä¸»è¦æ˜¯ä¸ºäº†å¢åŠ è€—æ—¶ï¼Œå®é™…åœºæ™¯å¯èƒ½æ˜¯ä»»æ„æ“ä½œã€‚</p>
<h2 data-id="heading-15">çº¿ç¨‹é”</h2>
<p><strong>æ‰€ä»¥é’ˆå¯¹å¤šçº¿ç¨‹çš„æ“ä½œï¼Œä¸ºäº†ä¿è¯æ•°æ®çš„æ­£ç¡®æ€§æˆ‘ä»¬éœ€è¦åŠ ä¸Šçº¿ç¨‹é”ï¼ˆlockï¼‰</strong></p>
<h5 data-id="heading-16">ä»£ç å¦‚ä¸‹</h5>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> threading <span class="hljs-keyword">import</span> Thread, Lock
<span class="hljs-keyword">import</span> time

total_money = <span class="hljs-number">200</span>

l = Lock()

<span class="hljs-keyword">def</span> <span class="hljs-title function_">speed_money</span>(<span class="hljs-params">name: <span class="hljs-built_in">str</span>, sp_money: <span class="hljs-built_in">int</span></span>):
    time.sleep(<span class="hljs-number">1</span>)
    l.acquire()  <span class="hljs-comment"># ä¸Šé”</span>
    <span class="hljs-keyword">global</span> total_money
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\nå½“å‰çº¿ç¨‹æ˜¯<span class="hljs-subst">{name}</span>,å‡†å¤‡å–<span class="hljs-subst">{sp_money}</span>å…ƒ,å¼€å§‹æ£€æµ‹ä½™é¢æ˜¯å¦å……è¶³"</span>)
    <span class="hljs-keyword">if</span> total_money:
        time.sleep(<span class="hljs-number">1</span>)  <span class="hljs-comment"># åªæ˜¯å¢åŠ äº†è¿™æ­¥</span>
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\nå½“å‰çº¿ç¨‹æ˜¯<span class="hljs-subst">{name}</span>ï¼Œä½™é¢å……è¶³ä¸º<span class="hljs-subst">{total_money}</span>ï¼Œå¼€å§‹å–é’±"</span>)
        total_money = <span class="hljs-built_in">round</span>(total_money - sp_money, <span class="hljs-number">2</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\nå½“å‰çº¿ç¨‹æ˜¯<span class="hljs-subst">{name}</span>ï¼Œå·²ç»å–äº†<span class="hljs-subst">{sp_money}</span>,è´¦å·ä½™é¢<span class="hljs-subst">{total_money}</span>"</span>)
    l.release()  <span class="hljs-comment"># é‡Šæ”¾é”</span>
    <span class="hljs-keyword">return</span> total_money

<span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():
    <span class="hljs-comment"># æ„å»ºçº¿ç¨‹</span>
    t1 = Thread(target=speed_money, args=(<span class="hljs-string">"ç¬¬ä¸€ä¸ªçº¿ç¨‹"</span>, <span class="hljs-number">100</span>))
    t2 = Thread(target=speed_money, args=(<span class="hljs-string">"ç¬¬äºŒä¸ªçº¿ç¨‹"</span>, <span class="hljs-number">100</span>))
    t3 = Thread(target=speed_money, args=(<span class="hljs-string">"ç¬¬ä¸‰ä¸ªçº¿ç¨‹"</span>, <span class="hljs-number">100</span>))

    t1.start()
    t2.start()
    t3.start()

    t1.join()
    t2.join()
    t3.join()

    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\næ„å»ºå®Œçº¿ç¨‹"</span>)

<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">'__main__'</span>:
    start_time = time.time()
    main()
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\nmainå‡½æ•°æ‰§è¡Œç»“æŸ"</span>)
    end_time = time.time()
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\næ€»è€—æ—¶"</span>, <span class="hljs-built_in">round</span>(end_time - start_time, <span class="hljs-number">2</span>))
</code></pre>
<p>ä¸Šé¢ä»£ç å‘¢ä¸»è¦æ˜¯åœ¨ä»£ç æ‰§è¡Œé€»è¾‘é‚£é‡ŒåŠ äº†lock.acquire()å’Œlock.release()</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2242d49c82f74967873dc27aa3ac9720~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn6a2U546LNzE5:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771569940&amp;x-signature=1mD3%2FZ3gHd%2FuMlZPEO%2BfRppUgVQ%3D" alt="image.png" loading="lazy"/></p>
<h5 data-id="heading-17">æ‰§è¡Œç»“æœ</h5>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cadf12952774497ca50e2547ca57f919~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn6a2U546LNzE5:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771569940&amp;x-signature=riN%2B7NHQih%2B921r1wyqtRSCcpgA%3D" alt="image.png" loading="lazy"/>
å¯ä»¥çœ‹åˆ°æˆ‘ä»¬åŠ äº†lockä»¥åï¼Œè´¦å·ä½™é¢æ˜¯æ²¡æœ‰å˜æˆè´Ÿæ•°çš„äº†ï¼Œè¯´æ˜åœ¨å­çº¿ç¨‹ç›¸äº’ç«äº‰çš„æ—¶å€™ï¼Œç”±äºä¸Šäº†é”ï¼Œåªä¼šé€šè¿‡ä¸€ä¸ªï¼Œä½†æ˜¯lockä½¿ç”¨éœ€è¦æ‰‹åŠ¨acquireå’Œlockï¼ŒåŸºäºè¿™ä¸ªæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€ä¸‹with,</p>
<h5 data-id="heading-18">ä¼˜åŒ–ä»£ç å¦‚ä¸‹</h5>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> threading <span class="hljs-keyword">import</span> Thread, Lock
<span class="hljs-keyword">import</span> time

total_money = <span class="hljs-number">200</span>

l = Lock()

<span class="hljs-keyword">def</span> <span class="hljs-title function_">speed_money</span>(<span class="hljs-params">name: <span class="hljs-built_in">str</span>, sp_money: <span class="hljs-built_in">int</span></span>):
    time.sleep(<span class="hljs-number">1</span>)
    <span class="hljs-keyword">with</span> l:  <span class="hljs-comment"># ä½¿ç”¨ with è¯­å¥æ¥è‡ªåŠ¨åŠ é”å’Œé‡Šæ”¾é”</span>
        <span class="hljs-keyword">global</span> total_money
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\nå½“å‰çº¿ç¨‹æ˜¯<span class="hljs-subst">{name}</span>,å‡†å¤‡å–<span class="hljs-subst">{sp_money}</span>å…ƒ,å¼€å§‹æ£€æµ‹ä½™é¢æ˜¯å¦å……è¶³"</span>)
        <span class="hljs-keyword">if</span> total_money:
            time.sleep(<span class="hljs-number">1</span>)  <span class="hljs-comment"># åªæ˜¯å¢åŠ äº†è¿™æ­¥</span>
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\nå½“å‰çº¿ç¨‹æ˜¯<span class="hljs-subst">{name}</span>ï¼Œä½™é¢å……è¶³ä¸º<span class="hljs-subst">{total_money}</span>ï¼Œå¼€å§‹å–é’±"</span>)
            total_money = <span class="hljs-built_in">round</span>(total_money - sp_money, <span class="hljs-number">2</span>)
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\nå½“å‰çº¿ç¨‹æ˜¯<span class="hljs-subst">{name}</span>ï¼Œå·²ç»å–äº†<span class="hljs-subst">{sp_money}</span>,è´¦å·ä½™é¢<span class="hljs-subst">{total_money}</span>"</span>)
    <span class="hljs-keyword">return</span> total_money

<span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():
    <span class="hljs-comment"># æ„å»ºçº¿ç¨‹</span>
    t1 = Thread(target=speed_money, args=(<span class="hljs-string">"ç¬¬ä¸€ä¸ªçº¿ç¨‹"</span>, <span class="hljs-number">100</span>))
    t2 = Thread(target=speed_money, args=(<span class="hljs-string">"ç¬¬äºŒä¸ªçº¿ç¨‹"</span>, <span class="hljs-number">100</span>))
    t3 = Thread(target=speed_money, args=(<span class="hljs-string">"ç¬¬ä¸‰ä¸ªçº¿ç¨‹"</span>, <span class="hljs-number">100</span>))

    t1.start()
    t2.start()
    t3.start()

    t1.join()
    t2.join()
    t3.join()

    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\næ„å»ºå®Œçº¿ç¨‹"</span>)

<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">'__main__'</span>:
    start_time = time.time()
    main()
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\nmainå‡½æ•°æ‰§è¡Œç»“æŸ"</span>)
    end_time = time.time()
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\næ€»è€—æ—¶"</span>, <span class="hljs-built_in">round</span>(end_time - start_time, <span class="hljs-number">2</span>))
</code></pre>
<h6 data-id="heading-19">æ”¹åŠ¨å†…å®¹</h6>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/39b6d244c034460db9ec5080e7cc4280~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn6a2U546LNzE5:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771569940&amp;x-signature=2hrvAHTMz3%2BiCHgijqekSyK%2BfGM%3D" alt="image.png" loading="lazy"/></p>
<h6 data-id="heading-20">æ‰§è¡Œç»“æœ</h6>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/98e1b1c7a3cc479cad31ed6f53d9aa8c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn6a2U546LNzE5:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771569940&amp;x-signature=xjTPQT7tKkd6trd%2F43uikr7JQHY%3D" alt="image.png" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ‹’ç»é‡å†™ï¼Flutter Add-to-App å…¨æ”»ç•¥ï¼šè®©åŸç”Ÿåº”ç”¨â€œæ¸è¿›å¼â€æ‹¥æŠ±è·¨å¹³å°]]></title>    <link>https://juejin.cn/post/7605772919225106466</link>    <guid>https://juejin.cn/post/7605772919225106466</guid>    <pubDate>2026-02-13T06:34:20.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605772919225106466" data-draft-id="7605772919225073698" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ‹’ç»é‡å†™ï¼Flutter Add-to-App å…¨æ”»ç•¥ï¼šè®©åŸç”Ÿåº”ç”¨â€œæ¸è¿›å¼â€æ‹¥æŠ±è·¨å¹³å°"/> <meta itemprop="keywords" content="Flutter,å‰ç«¯æ¡†æ¶,å‰ç«¯"/> <meta itemprop="datePublished" content="2026-02-13T06:34:20.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="RaidenLiu"/> <meta itemprop="url" content="https://juejin.cn/user/1781679670965208"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ‹’ç»é‡å†™ï¼Flutter Add-to-App å…¨æ”»ç•¥ï¼šè®©åŸç”Ÿåº”ç”¨â€œæ¸è¿›å¼â€æ‹¥æŠ±è·¨å¹³å°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1781679670965208/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    RaidenLiu
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-13T06:34:20.000Z" title="Fri Feb 13 2026 06:34:20 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦ Add-to-Appï¼Ÿ</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ecfa3fcb441443ada7c50f6455f432d0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUmFpZGVuTGl1:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771569260&amp;x-signature=Yjai0j2pEz9SceYjeg6lFLBXJwE%3D" alt="unwatermarked_Gemini_Generated_Image_51ku3f51ku3f51ku.png" loading="lazy"/>
åœ¨ç§»åŠ¨å¼€å‘é¢†åŸŸï¼ŒFlutter çš„è·¨å¹³å°ä¼˜åŠ¿ï¼ˆWrite once, run anywhereï¼‰æ¯‹åº¸ç½®ç–‘ã€‚ä½†åœ¨ç°å®ä¸–ç•Œä¸­ï¼Œæˆ‘ä»¬å¾€å¾€é¢ä¸´ç€æ²‰é‡çš„â€œå†å²åŒ…è¢±â€ã€‚</p>
<p><strong>ç—›ç‚¹åœºæ™¯ï¼š</strong></p>
<blockquote>
<p>â€œæˆ‘ä»¬å…¬å¸æœ‰ä¸€ä¸ªç»´æŠ¤äº† 5 å¹´çš„ç”µå•† Appï¼ŒåŸç”Ÿä»£ç å‡ åä¸‡è¡Œã€‚æœ€è¿‘è€æ¿å«Œ UI è¿­ä»£æ…¢ï¼Œæƒ³ç”¨ Flutterï¼Œä½†å®Œå…¨é‡å†™æ˜¯ä¸å¯èƒ½çš„â€”â€”ä¸šåŠ¡çº¿å¤ªé•¿ï¼Œé£é™©å¤ªå¤§ã€‚æˆ‘ä»¬è¦çš„æ˜¯æ¸è¿›å¼çš„æ”¹å˜ã€‚â€</p>
</blockquote>
<p>è¿™å°±æ˜¯ <strong>Add-to-App</strong> å­˜åœ¨çš„æ„ä¹‰ã€‚å®ƒå…è®¸æˆ‘ä»¬å°† Flutter è§†ä¸ºä¸€ä¸ªâ€œåº“â€æˆ–â€œæ¨¡å—â€ï¼ŒåµŒå…¥åˆ°ç°æœ‰çš„ Android æˆ– iOS åº”ç”¨ä¸­ã€‚</p>
<p><strong>å®ƒçš„æ ¸å¿ƒä»·å€¼åœ¨äºï¼š</strong></p>
<ol>
<li><strong>æˆæœ¬æ§åˆ¶</strong>ï¼šæ— éœ€æŠ›å¼ƒç°æœ‰çš„åŸç”Ÿèµ„äº§ï¼ˆæ”¯ä»˜æ¨¡å—ã€å¤æ‚çš„åº•å±‚ç®—æ³•ç­‰ï¼‰ã€‚</li>
<li><strong>æ¸è¿›è¿ç§»</strong>ï¼šå¯ä»¥ä»ä¸€ä¸ªéæ ¸å¿ƒé¡µé¢ï¼ˆå¦‚â€œå…³äºæˆ‘ä»¬â€æˆ–â€œæ´»åŠ¨é¡µâ€ï¼‰å¼€å§‹ï¼Œé€æ­¥æ‰©å¤§ Flutter çš„ç‰ˆå›¾ã€‚</li>
<li><strong>å¤ç”¨èƒ½åŠ›</strong>ï¼šæ–°å¼€å‘çš„ Flutter æ¨¡å—å¯ä»¥ç›´æ¥åœ¨ Android å’Œ iOS ç”šè‡³ Web ä¸Šå¤ç”¨ï¼Œä»ä¸€å¼€å§‹å°±äº«å—è·¨å¹³å°çº¢åˆ©ã€‚</li>
</ol>
<hr/>
<h2 data-id="heading-1">Add-to-App çš„åŸºæœ¬æ¦‚å¿µä¸åŸç†</h2>
<h3 data-id="heading-2">ä»€ä¹ˆæ˜¯ Add-to-Appï¼Ÿ</h3>
<p>ç®€å•æ¥è¯´ï¼ŒAdd-to-App å°±æ˜¯æŠŠ Flutter ç¯å¢ƒï¼ˆDart VM + Flutter Engineï¼‰æ‰“åŒ…æˆä¸€ä¸ªåŸç”Ÿç»„ä»¶ï¼ˆView æˆ– ViewController/Activityï¼‰ï¼Œå¡è¿›ç°æœ‰çš„åŸç”Ÿ App é‡Œã€‚</p>
<ul>
<li><strong>å¯¹äº Android</strong>ï¼šFlutter åªæ˜¯ä¸€ä¸ª Viewï¼Œæˆ–è€…ä¸€ä¸ª Activity/Fragmentã€‚</li>
<li><strong>å¯¹äº iOS</strong>ï¼šFlutter åªæ˜¯ä¸€ä¸ª UIViewï¼Œæˆ–è€… FlutterViewControllerã€‚</li>
</ul>
<h3 data-id="heading-3">è¿è¡Œæ¨¡å¼ï¼šå¤šå¼•æ“ vs å¤šè§†å›¾</h3>
<p>åœ¨æ··åˆå¼€å‘ä¸­ï¼Œç†è§£ Flutter çš„â€œå¯„ç”Ÿâ€æ–¹å¼è‡³å…³é‡è¦ï¼š</p>





























<table><thead><tr><th><strong>ç­–ç•¥</strong></th><th><strong>æè¿°</strong></th><th><strong>ä¼˜ç‚¹</strong></th><th><strong>ç¼ºç‚¹</strong></th></tr></thead><tbody><tr><td><strong>å•å¼•æ“å¤ç”¨ (Single Engine)</strong></td><td>å…¨å±€ç»´æŠ¤ä¸€ä¸ª Engineï¼Œåœ¨ä¸åŒåŸç”Ÿé¡µé¢é—´è·³è½¬æ—¶ï¼Œé€šè¿‡ attach/detach æŒ‚è½½åˆ°å½“å‰ç•Œé¢ã€‚</td><td>å†…å­˜å ç”¨æœ€ä½ï¼›çŠ¶æ€ä¸ä»…å…±äº«ä¸”ä¿æŒã€‚</td><td>å¯¼èˆªæ ˆç®¡ç†æå…¶å¤æ‚ï¼ˆåŸç”Ÿé¡µé¢ A -&gt; Flutter B -&gt; åŸç”Ÿ C -&gt; è¿”å› B æ—¶éœ€æ¢å¤ç°åœºï¼‰ã€‚</td></tr><tr><td><strong>å¤šå¼•æ“ (Multi-Engine)</strong></td><td>æ¯æ¬¡æ‰“å¼€ Flutter é¡µé¢éƒ½åˆ›å»ºä¸€ä¸ªæ–° Engineã€‚</td><td>é€»è¾‘éš”ç¦»ï¼Œäº’ä¸å¹²æ‰°ï¼›å¯¼èˆªæ ˆç®¡ç†ç®€å•ã€‚</td><td><strong>å†…å­˜çˆ†ç‚¸</strong>ï¼ˆæ¯ä¸ª Engine é»˜è®¤æ¶ˆè€—è¾ƒå¤§ï¼‰ï¼Œå¯åŠ¨å»¶è¿Ÿæ˜æ˜¾ã€‚</td></tr><tr><td><strong>FlutterEngineGroup (æ¨è)</strong></td><td>å®˜æ–¹æä¾›çš„è½»é‡çº§å¤šå¼•æ“æ–¹æ¡ˆï¼ˆFlutter 2.0+ï¼‰ã€‚</td><td>å¤šä¸ª Engine å…±äº« GPU ä¸Šä¸‹æ–‡ã€å­—ä½“å’Œä»£ç æ®µï¼Œ<strong>æ–°å¢ä¸€ä¸ª Engine ä»…éœ€ ~180KB å†…å­˜</strong>ã€‚</td><td>Dart Isolate å½¼æ­¤éš”ç¦»ï¼Œ<strong>çŠ¶æ€ä¸å…±äº«</strong>ï¼ˆéœ€é€šè¿‡æ•°æ®å±‚åŒæ­¥ï¼‰ã€‚</td></tr></tbody></table>
<p><strong>è¯¯åŒºæç¤º</strong>ï¼šæ¡Œé¢ç«¯/Web æ”¯æŒçš„â€œå¤šè§†å›¾ï¼ˆMulti-viewï¼‰â€æ¨¡å¼ï¼ˆå³ä¸€ä¸ª Engine æ¸²æŸ“å¤šä¸ªçª—å£ï¼‰ç›®å‰<strong>å°šæœª</strong>åœ¨ç§»åŠ¨ç«¯ Add-to-App åœºæ™¯ä¸­ç¨³å®šæ”¯æŒã€‚åœ¨ç§»åŠ¨ç«¯ï¼Œè¯·ä¼˜å…ˆè€ƒè™‘ <strong>FlutterEngineGroup</strong>ã€‚</p>
<h3 data-id="heading-4">æœ€ä½³å®è·µåœºæ™¯</h3>
<ul>
<li><strong>é«˜é¢‘è¿­ä»£çš„ä¸šåŠ¡æ¨¡å—</strong>ï¼šå¦‚ç”µå•†çš„æ´»åŠ¨é¡µã€ä¸ªäººä¸­å¿ƒã€‚</li>
<li><strong>å¤æ‚çš„ UI äº¤äº’</strong>ï¼šå¦‚éœ€è¦é«˜æ€§èƒ½åŠ¨ç”»çš„å›¾è¡¨é¡µã€‚</li>
<li><strong>ç»Ÿä¸€é€»è¾‘</strong>ï¼šåŒç«¯é€»è¾‘å®Œå…¨ä¸€è‡´çš„è¡¨å•æäº¤æˆ–ä¸šåŠ¡è®¡ç®—ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-5">å®æˆ˜ Iï¼šåœ¨ Android åŸç”Ÿ App ä¸­åµŒå…¥ Flutter</h2>
<h3 data-id="heading-6">åˆ›å»º Flutter Module</h3>
<p>æ³¨æ„ï¼Œæˆ‘ä»¬ä¸èƒ½ <code>flutter create my_app</code>ï¼Œå› ä¸ºæˆ‘ä»¬ä¸éœ€è¦ä¸€ä¸ªå®Œæ•´çš„ App å£³å­ï¼Œæˆ‘ä»¬éœ€è¦çš„æ˜¯ä¸€ä¸ª<strong>æ¨¡å—</strong>ã€‚</p>
<pre><code class="hljs language-lua" lang="lua"># åœ¨åŸç”Ÿé¡¹ç›®åŒçº§ç›®å½•ä¸‹æ‰§è¡Œ
flutter <span class="hljs-built_in">create</span> -t <span class="hljs-built_in">module</span> my_flutter_module
</code></pre>
<p>æ‰§è¡Œåï¼Œä½ ä¼šå‘ç°ç”Ÿæˆçš„ç›®å½•ç»“æ„ä¸­ï¼Œ<code>android</code> å’Œ <code>ios</code> æ–‡ä»¶å¤¹æ˜¯éšè—çš„ï¼ˆ.android, .iosï¼‰ï¼Œå› ä¸ºå®ƒä»¬æ˜¯è‡ªåŠ¨ç”Ÿæˆçš„åŒ…è£…å™¨ã€‚</p>
<h3 data-id="heading-7">å°† Flutter Module å¯¼å…¥ Android é¡¹ç›®</h3>
<p>è‡ª Flutter 3.x èµ·ï¼Œå®˜æ–¹æ¨èé€šè¿‡ Gradle è„šæœ¬è‡ªåŠ¨ç®¡ç†ä¾èµ–ï¼Œé¿å…æ‰‹åŠ¨ç¼–å†™ implementation å¯¼è‡´çš„ç‰ˆæœ¬å†²çªã€‚</p>
<p><strong>æ­¥éª¤ 1ï¼šä¿®æ”¹ settings.gradle</strong></p>
<p>åœ¨ include ':app' ä¹‹ååŠ å…¥ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">// ç»‘å®š Flutter æ¨¡å—æ„å»ºè„šæœ¬</span>
<span class="hljs-built_in">setBinding</span>(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Binding</span>([gradle: <span class="hljs-keyword">this</span>]))
<span class="hljs-built_in">evaluate</span>(<span class="hljs-keyword">new</span> <span class="hljs-built_in">File</span>(
  settingsDir.parentFile, <span class="hljs-comment">// å‡è®¾ flutter_module ä¸å½“å‰é¡¹ç›®åŒçº§</span>
  <span class="hljs-string">'my_flutter_module/.android/include_flutter.groovy'</span>
))
</code></pre>
<p><strong>æ­¥éª¤ 2ï¼šä¿®æ”¹ app/build.gradle</strong></p>
<p>ä¾èµ–ä¼šè‡ªåŠ¨æ³¨å…¥ï¼Œ<strong>é€šå¸¸æ— éœ€æ‰‹åŠ¨æ·»åŠ </strong> implementation project(':flutter')ã€‚ä½†éœ€ç¡®ä¿ compileSdkVersion ä¸ Flutter æ¨¡å—è¦æ±‚ä¸€è‡´ï¼ˆé€šå¸¸éœ€ API 33+ï¼‰ã€‚</p>
<p><strong>åœ¨ Android ä¸Šæ¸²æŸ“ Flutter (Activity ä¸ Fragment)</strong></p>
<p><strong>æ–¹å¼ Aï¼šä½¿ç”¨ FlutterActivityï¼ˆå…¨å±åœºæ™¯ï¼‰</strong></p>
<p>é€‚åˆç‹¬ç«‹çš„ä¸šåŠ¡æµç¨‹ï¼Œå¦‚â€œä¸ªäººä¸­å¿ƒâ€æˆ–â€œè®¾ç½®é¡µâ€ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// ä½¿ç”¨ç¼“å­˜ Engine å¯åŠ¨ï¼ˆæ¨èï¼‰</span>
startActivity(
    FlutterActivity
        .withCachedEngine(<span class="hljs-string">"my_engine_id"</span>)
        .build(<span class="hljs-keyword">this</span>)
);
</code></pre>
<p><strong>æ–¹å¼ Bï¼šä½¿ç”¨ FlutterFragmentï¼ˆå±€éƒ¨åµŒå…¥ï¼‰</strong></p>
<p>é€‚åˆå°† Flutter ä½œä¸ºä¸€ä¸ª View å—åµŒå…¥åŸç”Ÿé¡µé¢ï¼Œä¾‹å¦‚åœ¨ä¸€ä¸ªåŸç”Ÿ Tab é¡µä¸­å±•ç¤º Flutter åˆ—è¡¨ã€‚</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// åœ¨åŸç”Ÿ Activity æˆ– Fragment ä¸­</span>
FragmentManager fragmentManager = <span class="hljs-built_in">getSupportFragmentManager</span>();
fragmentManager
    <span class="hljs-selector-class">.beginTransaction</span>()
    <span class="hljs-selector-class">.replace</span>(R.id.fragment_container, 
             FlutterFragment.withCachedEngine("my_engine_id")<span class="hljs-selector-class">.build</span>())
    <span class="hljs-selector-class">.commit</span>();
</code></pre>
<p><strong>æ€§èƒ½ä¼˜åŒ– Tipï¼šä½¿ç”¨ç¼“å­˜ Engine</strong></p>
<p><code>withNewEngine()</code> ä¼šå¯¼è‡´æ¯æ¬¡æ‰“å¼€é¡µé¢éƒ½æœ‰æ˜æ˜¾çš„â€œç™½å±â€æˆ–åŠ è½½å»¶è¿Ÿã€‚æ¨èä½¿ç”¨ <strong>FlutterEngineCache</strong> è¿›è¡Œé¢„çƒ­ï¼š</p>
<pre><code class="hljs language-scala" lang="scala"><span class="hljs-comment">// 1. åœ¨ Application å¯åŠ¨æ—¶é¢„çƒ­</span>
public <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyApplication</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Application</span> </span>{
    <span class="hljs-meta">@Override</span>
    public void onCreate() {
        <span class="hljs-keyword">super</span>.onCreate();
        <span class="hljs-comment">// å®ä¾‹åŒ– Engine</span>
        <span class="hljs-type">FlutterEngine</span> flutterEngine = <span class="hljs-keyword">new</span> <span class="hljs-type">FlutterEngine</span>(<span class="hljs-keyword">this</span>);
        <span class="hljs-comment">// å¼€å§‹æ‰§è¡Œ Dart ä»£ç ï¼ˆé¢„åŠ è½½ï¼‰</span>
        flutterEngine.getDartExecutor().executeDartEntrypoint(
            <span class="hljs-type">DartExecutor</span>.<span class="hljs-type">DartEntrypoint</span>.createDefault()
        );
        <span class="hljs-comment">// å­˜å…¥ç¼“å­˜</span>
        <span class="hljs-type">FlutterEngineCache</span>
            .getInstance()
            .put(<span class="hljs-string">"my_engine_id"</span>, flutterEngine);
    }
}

<span class="hljs-comment">// 2. å¯åŠ¨æ—¶ä½¿ç”¨ç¼“å­˜çš„ Engine</span>
startActivity(
    <span class="hljs-type">FlutterActivity</span>
        .withCachedEngine(<span class="hljs-string">"my_engine_id"</span>)
        .build(<span class="hljs-keyword">this</span>)
);
</code></pre>
<h2 data-id="heading-8">å®æˆ˜ IIï¼šåœ¨ iOS åŸç”Ÿ App é›†æˆ Flutter</h2>
<h3 data-id="heading-9">åˆ›å»º Flutter Module</h3>
<p>ï¼ˆåŒä¸Šï¼Œä½¿ç”¨åŒä¸€ä¸ª <code>my_flutter_module</code> å³å¯ï¼‰</p>
<h3 data-id="heading-10">CocoaPods é›†æˆ</h3>
<p>è¿™æ˜¯ iOS æœ€æ ‡å‡†çš„é›†æˆæ–¹å¼ã€‚</p>
<p><strong>ä¿®æ”¹ <code>Podfile</code></strong></p>
<p>åœ¨ iOS å·¥ç¨‹çš„ <code>Podfile</code> ä¸­æ·»åŠ è„šæœ¬é’©å­ï¼š</p>
<pre><code class="hljs language-ruby" lang="ruby"><span class="hljs-comment"># Podfile</span>
platform <span class="hljs-symbol">:ios</span>, <span class="hljs-string">'14.0'</span>

<span class="hljs-comment"># å®šä¹‰ Flutter æ¨¡å—è·¯å¾„</span>
flutter_application_path = <span class="hljs-string">'../my_flutter_module'</span>

<span class="hljs-comment"># åŠ è½½ Flutter çš„ Pod åŠ©æ‰‹è„šæœ¬</span>
load <span class="hljs-title class_">File</span>.join(flutter_application_path, <span class="hljs-string">'.ios'</span>, <span class="hljs-string">'Flutter'</span>, <span class="hljs-string">'podhelper.rb'</span>)

target <span class="hljs-string">'MyApp'</span> <span class="hljs-keyword">do</span>
  use_frameworks!
  
  <span class="hljs-comment"># å®‰è£… Flutter ä¾èµ–</span>
  install_all_flutter_pods(flutter_application_path)
<span class="hljs-keyword">end</span>
</code></pre>
<p>æ‰§è¡Œ <code>pod install</code>ï¼Œä½ ä¼šå‘ç° Flutter ç›¸å…³çš„ Framework å·²ç»è¢«é“¾æ¥è¿›æ¥äº†ã€‚</p>
<h3 data-id="heading-11">åœ¨ iOS ä¸­æ‰“å¼€ Flutter View</h3>
<p>ä½¿ç”¨ <code>FlutterViewController</code>ã€‚</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">import</span> Flutter

<span class="hljs-comment">// åœ¨æŸä¸ªæŒ‰é’®ç‚¹å‡»äº‹ä»¶ä¸­</span>
<span class="hljs-keyword">@objc</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">showFlutter</span>() {
    <span class="hljs-comment">// è·å– Flutter Engineï¼ˆåŒæ ·å»ºè®®ä½¿ç”¨ Cacheï¼Œè¿™é‡Œæ¼”ç¤ºç®€å•æ¨¡å¼ï¼‰</span>
    <span class="hljs-keyword">let</span> flutterEngine <span class="hljs-operator">=</span> (<span class="hljs-type">UIApplication</span>.shared.delegate <span class="hljs-keyword">as!</span> <span class="hljs-type">AppDelegate</span>).flutterEngine
    
    <span class="hljs-keyword">let</span> flutterViewController <span class="hljs-operator">=</span> <span class="hljs-type">FlutterViewController</span>(
        engine: flutterEngine, 
        nibName: <span class="hljs-literal">nil</span>, 
        bundle: <span class="hljs-literal">nil</span>
    )
    
    present(flutterViewController, animated: <span class="hljs-literal">true</span>, completion: <span class="hljs-literal">nil</span>)
}
</code></pre>
<h3 data-id="heading-12">åœ¨ iOS ä¸­ä½¿ç”¨ç¼“å­˜ Engine</h3>
<p>ä¸ºäº†é¿å…ç‚¹å‡»æŒ‰é’®æ—¶å¡é¡¿ï¼Œ<strong>å¼ºçƒˆå»ºè®®</strong>åœ¨ App å¯åŠ¨æ—¶é¢„çƒ­ Engineã€‚</p>
<p><strong>æ­¥éª¤ 1ï¼šåœ¨ AppDelegate ä¸­åˆå§‹åŒ–å¹¶ç¼“å­˜</strong></p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">import</span> UIKit
<span class="hljs-keyword">import</span> Flutter
<span class="hljs-keyword">import</span> FlutterPluginRegistrant <span class="hljs-comment">// ç”¨äºæ³¨å†Œæ’ä»¶</span>

<span class="hljs-keyword">@main</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">AppDelegate</span>: <span class="hljs-title class_">FlutterAppDelegate</span> { <span class="hljs-comment">// ç»§æ‰¿ FlutterAppDelegate</span>
  
  <span class="hljs-keyword">lazy</span> <span class="hljs-keyword">var</span> flutterEngine <span class="hljs-operator">=</span> <span class="hljs-type">FlutterEngine</span>(name: <span class="hljs-string">"my_engine_id"</span>)

  <span class="hljs-keyword">override</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">application</span>(
    <span class="hljs-keyword">_</span> <span class="hljs-params">application</span>: <span class="hljs-type">UIApplication</span>,
    <span class="hljs-params">didFinishLaunchingWithOptions</span> <span class="hljs-params">launchOptions</span>: [<span class="hljs-type">UIApplication</span>.<span class="hljs-params">LaunchOptionsKey</span>: <span class="hljs-keyword">Any</span>]<span class="hljs-operator">?</span>
  ) -&gt; <span class="hljs-type">Bool</span> {
    <span class="hljs-comment">// 1. è¿è¡Œ Engine (é¢„çƒ­)</span>
    flutterEngine.run();
    <span class="hljs-comment">// 2. æ³¨å†Œæ’ä»¶ï¼ˆå…³é”®ï¼å¦åˆ™ Flutter é‡Œçš„æ’ä»¶æ— æ³•ä½¿ç”¨ï¼‰</span>
    <span class="hljs-type">GeneratedPluginRegistrant</span>.register(with: flutterEngine);
    
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">super</span>.application(application, didFinishLaunchingWithOptions: launchOptions);
  }
}
</code></pre>
<p><strong>æ­¥éª¤ 2ï¼šä½¿ç”¨ç¼“å­˜ Engine å¼¹å‡ºé¡µé¢</strong></p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">@objc</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">showFlutter</span>() {
    <span class="hljs-keyword">let</span> appDelegate <span class="hljs-operator">=</span> <span class="hljs-type">UIApplication</span>.shared.delegate <span class="hljs-keyword">as!</span> <span class="hljs-type">AppDelegate</span>
    <span class="hljs-keyword">let</span> flutterEngine <span class="hljs-operator">=</span> appDelegate.flutterEngine
    
    <span class="hljs-keyword">let</span> flutterVC <span class="hljs-operator">=</span> <span class="hljs-type">FlutterViewController</span>(engine: flutterEngine, nibName: <span class="hljs-literal">nil</span>, bundle: <span class="hljs-literal">nil</span>)
    present(flutterVC, animated: <span class="hljs-literal">true</span>, completion: <span class="hljs-literal">nil</span>)
}
</code></pre>
<h2 data-id="heading-13">è¿›é˜¶ï¼šåŸç”Ÿä¸ Flutter çš„åŒå‘é€šä¿¡ (MethodChannel)</h2>
<p>å½“æ··åˆå¼€å‘æ—¶ï¼Œä¸å¯é¿å…åœ°éœ€è¦æ•°æ®äº¤äº’ï¼šFlutter è¯»å–åŸç”Ÿçš„ Tokenï¼Œæˆ–è€…åŸç”Ÿè°ƒç”¨ Flutter çš„åˆ·æ–°æ–¹æ³•ã€‚<strong>MethodChannel</strong> æ˜¯æœ€å¸¸ç”¨çš„æ¡¥æ¢ã€‚</p>
<h3 data-id="heading-14">5.1 Flutter ç«¯ (Dart)</h3>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">import</span> <span class="hljs-string">'package:flutter/services.dart'</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">NativeBridge</span> </span>{
  <span class="hljs-keyword">static</span> <span class="hljs-keyword">const</span> platform = MethodChannel(<span class="hljs-string">'com.example.app/data'</span>);

  <span class="hljs-comment">// è°ƒç”¨åŸç”Ÿæ–¹æ³•</span>
  Future&lt;<span class="hljs-built_in">String</span>&gt; getUserToken() <span class="hljs-keyword">async</span> {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">final</span> <span class="hljs-built_in">String</span> token = <span class="hljs-keyword">await</span> platform.invokeMethod(<span class="hljs-string">'getToken'</span>);
      <span class="hljs-keyword">return</span> token;
    } <span class="hljs-keyword">on</span> PlatformException <span class="hljs-keyword">catch</span> (e) {
      <span class="hljs-keyword">return</span> <span class="hljs-string">"Failed: '<span class="hljs-subst">${e.message}</span>'."</span>;
    }
  }
}
</code></pre>
<h3 data-id="heading-15">5.2 Android ç«¯</h3>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// éœ€åœ¨ Engine åˆå§‹åŒ–åæ³¨å†Œ Channel</span>
new <span class="hljs-built_in">MethodChannel</span>(flutterEngine.getDartExecutor()<span class="hljs-selector-class">.getBinaryMessenger</span>(), "com<span class="hljs-selector-class">.example</span><span class="hljs-selector-class">.app</span>/data")
    <span class="hljs-selector-class">.setMethodCallHandler</span>(
        (call, result) -&gt; {
            if (call.method.equals("getToken")) {
                <span class="hljs-comment">// æ‰§è¡ŒåŸç”Ÿé€»è¾‘è·å– Token</span>
                String token = MyAuthManager<span class="hljs-selector-class">.getToken</span>();
                result<span class="hljs-selector-class">.success</span>(token);
            } else {
                result<span class="hljs-selector-class">.notImplemented</span>();
            }
        }
    );
</code></pre>
<h3 data-id="heading-16"><strong>æ³¨æ„äº‹é¡¹ï¼š</strong></h3>
<p>MethodChannel å¹¶éèƒ½ä¼ é€’ä»»æ„å¯¹è±¡ï¼Œå®ƒçš„åº•å±‚ä¾èµ– <strong>BinaryMessenger</strong> è¿›è¡ŒäºŒè¿›åˆ¶æµä¼ è¾“ã€‚</p>
<ul>
<li>
<p><strong>StandardMethodCodecï¼ˆæ ‡å‡†ç¼–è§£ç å™¨ï¼‰</strong> ï¼š Flutter é»˜è®¤ä½¿ç”¨æ­¤ Codecï¼Œå®ƒåªæ”¯æŒé«˜æ•ˆåºåˆ—åŒ–ä»¥ä¸‹<strong>åŸºç¡€ç±»å‹</strong>ï¼š</p>
<ul>
<li><code>null</code>, <code>bool</code>, <code>int</code>, <code>double</code>, <code>String</code></li>
<li><code>List</code>, <code>Map</code> (ä»…é™ä¸Šè¿°åŸºç¡€ç±»å‹çš„é›†åˆ)</li>
<li>äºŒè¿›åˆ¶æ•°æ® (<code>Uint8List</code> / <code>byte[]</code>)</li>
</ul>
</li>
</ul>
<blockquote>
<p><strong>æ³¨æ„</strong>ï¼šå¦‚æœä½ å°è¯•ç›´æ¥ä¼ é€’ä¸€ä¸ªè‡ªå®šä¹‰ç±» <code>User</code>ï¼Œé€šé“ä¼šæŠ¥é”™ã€‚ <strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼šå°†å¯¹è±¡è½¬ä¸º JSON String æˆ– Map è¿›è¡Œä¼ é€’ï¼Œæˆ–è€…è‡ªå®šä¹‰ Codecã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-17">è¿›é˜¶ï¼šæ··åˆæ ˆç®¡ç†ä¸å¤š Engine æŒ‘æˆ˜</h2>
<p>åœ¨ Add-to-App ä¸­ï¼Œæœ€å¤´ç–¼çš„é—®é¢˜å¾€å¾€æ˜¯ å¯¼èˆªæ ˆï¼ˆNavigation Stackï¼‰ã€‚</p>
<p>æ¯”å¦‚ï¼š<code>åŸç”Ÿ A -&gt; Flutter B -&gt; åŸç”Ÿ C -&gt; Flutter D</code>ã€‚</p>
<h3 data-id="heading-18">æŒ‘æˆ˜</h3>
<ol>
<li><strong>å†…å­˜çˆ†ç‚¸</strong>ï¼šå¦‚æœæ¯æ¬¡ <code>&gt; Flutter</code> éƒ½åˆ›å»ºä¸€ä¸ªæ–° Engineï¼Œå†…å­˜ä¼šè¿…é€Ÿè€—å°½ã€‚</li>
<li><strong>çŠ¶æ€ä¸¢å¤±</strong>ï¼šå¦‚æœå¤ç”¨åŒä¸€ä¸ª Engineï¼Œä» C è¿”å› B æ—¶ï¼ŒFlutter çš„çŠ¶æ€æ€ä¹ˆæ¢å¤ï¼Ÿ</li>
</ol>
<h3 data-id="heading-19">è§£å†³æ–¹æ¡ˆç­–ç•¥</h3>
<p>å½“åŸç”Ÿåº”ç”¨éœ€è¦åœ¨ Feed æµä¸­åµŒå…¥å¤šä¸ª Flutter å¡ç‰‡ï¼Œæˆ–è€…åŒæ—¶å­˜åœ¨å¤šä¸ª Flutter é¡µé¢æ ˆæ—¶ï¼Œå•çº¯çš„â€œå•å¼•æ“â€æˆ–â€œå¤šå¼•æ“â€éƒ½ä¸å¤Ÿå®Œç¾ã€‚</p>
<p><strong>ç»ˆææ–¹æ¡ˆï¼šFlutterEngineGroup</strong> è¿™æ˜¯å®˜æ–¹ä¸ºäº†è§£å†³â€œå¤šå®ä¾‹å†…å­˜å ç”¨â€æ¨å‡ºçš„ APIã€‚</p>
<p><strong>åŸç†</strong>ï¼š å®ƒå…è®¸ä½ åˆ›å»ºå¤šä¸ª Engine å®ä¾‹ï¼Œè¿™äº›å®ä¾‹å…±äº«å†…å­˜é‡çš„èµ„æºï¼ˆå¦‚ Skia Shaderã€å­—ä½“ã€Dart VM å¿«ç…§ï¼‰ï¼Œä½†ä¿æŒ <strong>Dart Isolate éš”ç¦»</strong>ã€‚</p>
<p><strong>ä»£ç ç¤ºä¾‹ (Android)</strong> ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">// åˆ›å»º EngineGroup
FlutterEngineGroup <span class="hljs-attr">engineGroup</span> = new FlutterEngineGroup(context)<span class="hljs-comment">;</span>

// åˆ›å»ºç¬¬ä¸€ä¸ªè½»é‡çº§ Engine
FlutterEngine <span class="hljs-attr">engine1</span> = engineGroup.createAndRunDefaultEngine(context)<span class="hljs-comment">;</span>

// åˆ›å»ºç¬¬äºŒä¸ªè½»é‡çº§ Engineï¼ˆå¤ç”¨èµ„æºï¼Œå†…å­˜å¼€é”€æä½ï¼‰
FlutterEngine <span class="hljs-attr">engine2</span> = engineGroup.createAndRunDefaultEngine(context)<span class="hljs-comment">;</span>
</code></pre>
<p><strong>çŠ¶æ€ç®¡ç†æŒ‘æˆ˜</strong>ï¼š ç”±äº EngineGroup ä¸­çš„ Isolate æ˜¯éš”ç¦»çš„ï¼Œ<code>engine1</code> ä¸­çš„å…¨å±€å˜é‡æ— æ³•è¢« <code>engine2</code> ç›´æ¥è¯»å–ã€‚</p>
<ul>
<li><strong>è§£å†³</strong>ï¼šç›¸æ¯”äºé€šè¿‡åŸç”Ÿå±‚ï¼ˆHostï¼‰ä½œä¸ºä¸­è½¬ç«™ï¼Œæˆ–è€…ä½¿ç”¨æŒä¹…åŒ–å­˜å‚¨ï¼ˆDatabase/SharedPrefsï¼‰æ¥åŒæ­¥ä¸åŒ Flutter é¡µé¢é—´çš„æ•°æ®ã€‚ä½¿ç”¨å¹³å°é€šé“å¹¶ä¸”æ­é…ä¸Š<strong>pigeon</strong>ï¼Œç›¸ä¿¡ä¼šç»™ä½ å¤æ‚åŸç”Ÿäº¤äº’æä¾›ä¸å°‘çš„ä¾¿åˆ©ã€‚</li>
</ul>
<h2 data-id="heading-20">7. å¸¸è§é—®é¢˜ä¸â€œé¿å‘â€æŒ‡å—</h2>






























<table><thead><tr><th><strong>åœºæ™¯</strong></th><th><strong>ç°è±¡/åŸå› </strong></th><th><strong>è§£å†³æ–¹æ¡ˆ</strong></th></tr></thead><tbody><tr><td><strong>å†·å¯åŠ¨</strong></td><td>ç‚¹å‡»æŒ‰é’®åï¼Œç­‰å¾… 1-2 ç§’æ‰å‡ºç° Flutter ç”»é¢ï¼Œä¸”æœ‰ç™½å±ã€‚</td><td><strong>å¿…é¡»é¢„çƒ­ Engine</strong>ï¼åœ¨ App å¯åŠ¨æ—¶åˆå§‹åŒ– Engine å¹¶å­˜å…¥ Cacheã€‚</td></tr><tr><td><strong>è°ƒè¯•</strong></td><td>è¿è¡ŒåŸç”Ÿ App åï¼Œæ— æ³•ä½¿ç”¨ Flutter çš„çƒ­é‡è½½ (Hot Reload)ã€‚</td><td>åœ¨ç»ˆç«¯è¿è¡Œ <code>flutter attach</code>ï¼Œè¿æ¥åˆ°æ­£åœ¨è¿è¡Œçš„è®¾å¤‡ã€‚</td></tr><tr><td><strong>å›¾ç‰‡åŠ è½½</strong></td><td>Flutter æ— æ³•åŠ è½½åŸç”Ÿ Assets ä¸­çš„å›¾ç‰‡ã€‚</td><td>åŸç”Ÿå›¾ç‰‡éœ€åœ¨ Flutter <code>pubspec.yaml</code> ä¸­å£°æ˜ï¼Œæˆ–é€šè¿‡ Platform Channel ä¼ é€’å›¾ç‰‡æ•°æ®ï¼ˆå­—èŠ‚æµï¼‰ã€‚</td></tr><tr><td><strong>ç”Ÿå‘½å‘¨æœŸ</strong></td><td>Flutter é¡µé¢é€€åå°åï¼Œä»£ç è¢«æŒ‚èµ·ã€‚</td><td>åŸç”Ÿå±‚éœ€æ­£ç¡®è½¬å‘ç”Ÿå‘½å‘¨æœŸäº‹ä»¶ï¼ˆ<code>lifecycle_channel</code>ï¼‰ï¼Œç¡®ä¿ Flutter çŸ¥é“è‡ªå·±å¤„äºå‰å°è¿˜æ˜¯åå°ã€‚</td></tr></tbody></table>
<h2 data-id="heading-21">8. æ€»ç»“</h2>
<p>Add-to-App æ–¹æ¡ˆæ‰“ç ´äº†â€œéé»‘å³ç™½â€çš„æŠ€æœ¯é€‰å‹å›°å¢ƒï¼Œæ˜¯ç›®å‰å¤§å‹ App å¼•å…¥ Flutter çš„ä¸»æµè·¯å¾„ã€‚</p>
<p><strong>æ ¸å¿ƒè·¯å¾„å›é¡¾ï¼š</strong></p>
<ol>
<li><code>flutter create -t module</code> åˆ›å»ºæ¨¡å—ã€‚</li>
<li>åˆ©ç”¨ <strong>FlutterEngineCache</strong> è§£å†³æ€§èƒ½é—®é¢˜ã€‚</li>
<li>åˆ©ç”¨ <strong>MethodChannel</strong> æ‰“é€šæ•°æ®ç»è„‰ã€‚</li>
</ol>
<p>æ··åˆå¼€å‘æ²¡æœ‰é“¶å¼¹ï¼Œåªæœ‰ä¸æ–­çš„æƒè¡¡ã€‚å¸Œæœ›æœ¬æ–‡èƒ½å¸®åŠ©ä½ åœ¨ç°æœ‰çš„åŸç”Ÿå ¡å’ä¸­ï¼ŒæˆåŠŸå¼€è¾Ÿå‡ºç¬¬ä¸€å— Flutter çš„ç–†åœŸï¼</p>
<h3 data-id="heading-22">å»¶ä¼¸é˜…è¯»</h3>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fflutter.dev%2Fdocs%2Fdevelopment%2Fadd-to-app" target="_blank" title="https://flutter.dev/docs/development/add-to-app" ref="nofollow noopener noreferrer">Flutter å®˜æ–¹ Add-to-App æŒ‡å—</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fsamples%2Ftree%2Fmaster%2Fadd_to_app" target="_blank" title="https://github.com/flutter/samples/tree/master/add_to_app" ref="nofollow noopener noreferrer">GitHub ç¤ºä¾‹ï¼šflutter_module_books</a></li>
</ul>
<p><em>å¸Œæœ›è¿™ç¯‡åˆ†äº«å¯¹ä½ æœ‰å¸®åŠ©ï¼å¦‚æœæƒ³äº†è§£æ›´æ·±å±‚çš„ Engine æºç åˆ†æï¼Œæ¬¢è¿ç•™è¨€è®¨è®ºã€‚</em></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åˆ«å†ç”¨ ID å®šä½äº†ï¼æ•™ä½ ç”¨"è¯­ä¹‰æŒ‡çº¹"å®ç° 99% çš„å…ƒç´ å®šä½æˆåŠŸç‡]]></title>    <link>https://juejin.cn/post/7605856048361701414</link>    <guid>https://juejin.cn/post/7605856048361701414</guid>    <pubDate>2026-02-13T06:42:12.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605856048361701414" data-draft-id="7605888927714721830" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åˆ«å†ç”¨ ID å®šä½äº†ï¼æ•™ä½ ç”¨&quot;è¯­ä¹‰æŒ‡çº¹&quot;å®ç° 99% çš„å…ƒç´ å®šä½æˆåŠŸç‡"/> <meta itemprop="keywords" content="å‰ç«¯,AIGC"/> <meta itemprop="datePublished" content="2026-02-13T06:42:12.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§é¾„ç¨‹åºå‘˜"/> <meta itemprop="url" content="https://juejin.cn/user/784393864231083"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åˆ«å†ç”¨ ID å®šä½äº†ï¼æ•™ä½ ç”¨"è¯­ä¹‰æŒ‡çº¹"å®ç° 99% çš„å…ƒç´ å®šä½æˆåŠŸç‡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/784393864231083/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§é¾„ç¨‹åºå‘˜
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-13T06:42:12.000Z" title="Fri Feb 13 2026 06:42:12 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ç—›ç‚¹</h2>
<p>åšè¿‡è‡ªåŠ¨åŒ–æµ‹è¯•æˆ–çˆ¬è™«çš„åŒå­¦ä¸€å®šé‡åˆ°è¿‡è¿™ç§æƒ…å†µï¼š
æ˜¨å¤©å†™çš„è„šæœ¬ <code>document.querySelector('#login-btn')</code> è¿˜èƒ½è·‘ï¼Œä»Šå¤©ç½‘ç«™æ›´æ–°äº†ï¼ŒID å˜æˆäº† <code>#login-btn-123</code>ï¼Œè„šæœ¬ç›´æ¥æŒ‚æ‰ã€‚</p>
<p>åœ¨å¼€å‘ <strong>AutoForm æ™ºèƒ½è¡¨å•å¡«å…… SDK</strong> æ—¶ï¼Œæˆ‘ä»¬é¢ä¸´åŒæ ·çš„æŒ‘æˆ˜ï¼šå¦‚ä½•è®© SDK åœ¨é¡µé¢ç»“æ„å˜åŒ–åï¼Œä¾ç„¶èƒ½æ‰¾åˆ°é‚£ä¸ª"ç”¨æˆ·åè¾“å…¥æ¡†"ï¼Ÿ</p>
<p>ç­”æ¡ˆæ˜¯ï¼š<strong>è¯­ä¹‰æŒ‡çº¹ï¼ˆSemantic Fingerprintingï¼‰</strong>ã€‚</p>
<h2 data-id="heading-1">ä»€ä¹ˆæ˜¯è¯­ä¹‰æŒ‡çº¹ï¼Ÿ</h2>
<p>äººç±»æ‰¾å…ƒç´ ä¸æ˜¯é  IDï¼Œè€Œæ˜¯é "ç‰¹å¾"ã€‚
å½“ä½ çœ‹åˆ°ä¸€ä¸ªè¾“å…¥æ¡†ï¼Œæ—è¾¹å†™ç€"ç”¨æˆ·å"ï¼Œé‡Œé¢æç¤º"è¯·è¾“å…¥æ‰‹æœºå·"ï¼Œä½ å°±çŸ¥é“å®ƒæ˜¯å¹²å˜›çš„ã€‚</p>
<p>æˆ‘ä»¬å°†è¿™äº›ç‰¹å¾æå–å‡ºæ¥ï¼Œç”Ÿæˆä¸€ä¸ªå”¯ä¸€çš„å“ˆå¸Œå€¼ï¼Œè¿™å°±æ˜¯"è¯­ä¹‰æŒ‡çº¹"ã€‚</p>
<h2 data-id="heading-2">ç®—æ³•å®ç°</h2>
<h3 data-id="heading-3">1. ç‰¹å¾æå–</h3>
<p>æˆ‘ä»¬æå–ä»¥ä¸‹ç»´åº¦çš„ç‰¹å¾ï¼š</p>
<ul>
<li><strong>Label æ–‡æœ¬</strong>ï¼šè¿™æ˜¯æœ€å¼ºçš„è¯­ä¹‰ç‰¹å¾ã€‚</li>
<li><strong>Placeholder</strong>ï¼šæç¤ºæ–‡æ¡ˆã€‚</li>
<li><strong>Name å±æ€§</strong>ï¼šé€šå¸¸åŒ…å«å­—æ®µå«ä¹‰ï¼ˆå¦‚ <code>username</code>, <code>email</code>ï¼‰ã€‚</li>
<li><strong>Input Type</strong>ï¼šè¾“å…¥ç±»å‹ï¼ˆ<code>text</code>, <code>password</code>, <code>checkbox</code>ï¼‰ã€‚</li>
<li><strong>å‰é©±/åç»§æ–‡æœ¬</strong>ï¼šDOM æ ‘ä¸­ç›¸é‚»çš„æ–‡æœ¬èŠ‚ç‚¹ã€‚</li>
</ul>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">extractFeatures</span>(<span class="hljs-params">element</span>) {
  <span class="hljs-keyword">return</span> {
    <span class="hljs-attr">tag</span>: element.<span class="hljs-property">tagName</span>,
    <span class="hljs-attr">type</span>: element.<span class="hljs-property">type</span>,
    <span class="hljs-attr">name</span>: element.<span class="hljs-property">name</span>,
    <span class="hljs-attr">label</span>: <span class="hljs-title function_">findLabel</span>(element), <span class="hljs-comment">// å…³è”çš„ label æ–‡æœ¬</span>
    <span class="hljs-attr">placeholder</span>: element.<span class="hljs-property">placeholder</span>,
    <span class="hljs-attr">surroundingText</span>: <span class="hljs-title function_">getSurroundingText</span>(element)
  };
}
</code></pre>
<h3 data-id="heading-4">2. æŒ‡çº¹ç”Ÿæˆ</h3>
<p>å°†ç‰¹å¾æ‹¼æ¥æˆå­—ç¬¦ä¸²ï¼Œç„¶åè®¡ç®— Hashã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { md5 } <span class="hljs-keyword">from</span> <span class="hljs-string">'hash-wasm'</span>;

<span class="hljs-keyword">const</span> fingerprint = <span class="hljs-keyword">await</span> <span class="hljs-title function_">md5</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(features));
</code></pre>
<h3 data-id="heading-5">3. æ¨¡ç³ŠåŒ¹é…</h3>
<p>å½“é¡µé¢æ›´æ–°åï¼Œæ–°å…ƒç´ çš„æŒ‡çº¹å¯èƒ½ä¸æ—§æŒ‡çº¹ä¸å®Œå…¨ä¸€è‡´ï¼ˆæ¯”å¦‚ placeholder å˜äº†ï¼‰ã€‚è¿™æ—¶æˆ‘ä»¬è®¡ç®—<strong>ç›¸ä¼¼åº¦ï¼ˆSimilarity Scoreï¼‰</strong>ã€‚</p>
<p>æˆ‘ä»¬ä½¿ç”¨ <strong>Levenshtein Distanceï¼ˆç¼–è¾‘è·ç¦»ï¼‰</strong> ç®—æ³•æ¥æ¯”è¾ƒä¸¤ä¸ªç‰¹å¾å¯¹è±¡çš„ç›¸ä¼¼åº¦ã€‚å¦‚æœç›¸ä¼¼åº¦ &gt; 80%ï¼Œæˆ‘ä»¬å°±è®¤ä¸ºæ‰¾åˆ°äº†ç›®æ ‡ã€‚</p>
<h2 data-id="heading-6">æ•ˆæœ</h2>
<p>å¼•å…¥è¯­ä¹‰æŒ‡çº¹åï¼ŒAutoForm çš„å®šä½æŠ—å¹²æ‰°èƒ½åŠ›å¤§å¹…æå‡ï¼š</p>
<ul>
<li><strong>ID å˜åŒ–</strong>ï¼šå®Œå…¨å…ç–«ã€‚</li>
<li><strong>DOM ç»“æ„å¾®è°ƒ</strong>ï¼šå®Œå…¨å…ç–«ã€‚</li>
<li><strong>æ–‡æ¡ˆå¾®è°ƒ</strong>ï¼šåªè¦æ ¸å¿ƒè¯­ä¹‰æ²¡å˜ï¼ˆå¦‚"ç”¨æˆ·å"å˜æˆ"è¯·è¾“å…¥ç”¨æˆ·å"ï¼‰ï¼Œä¾ç„¶èƒ½è¯†åˆ«ã€‚</li>
</ul>
<h2 data-id="heading-7">æ€»ç»“</h2>
<p>åœ¨ AI æ—¶ä»£ï¼ŒåŸºäºè§„åˆ™çš„ç¡¬ç¼–ç ï¼ˆHard-codingï¼‰å·²ç»è¿‡æ—¶äº†ã€‚åŸºäºç‰¹å¾çš„æ¨¡ç³ŠåŒ¹é…æ‰æ˜¯æœªæ¥çš„æ–¹å‘ã€‚</p>
<hr/>
<p><strong>æ€è€ƒ</strong>ï¼šå¦‚æœé¡µé¢ä¸Šæœ‰ä¸¤ä¸ªå®Œå…¨ä¸€æ ·çš„è¾“å…¥æ¡†ï¼ˆå¦‚ä¸¤ä¸ª"æ‰‹æœºå·"ï¼‰ï¼Œè¯¥å¦‚ä½•åŒºåˆ†ï¼Ÿæ¬¢è¿è¯„è®ºåŒºäº¤æµï¼</p>
<p>ğŸ‘‰ <strong>å®˜ç½‘åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2F51bpms.com" target="_blank" title="https://51bpms.com" ref="nofollow noopener noreferrer">51bpms.com</a></strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Prompt caching æŠ€æœ¯æ˜¯å¦‚ä½•å®ç° 1 æŠ˜çš„æ¨ç†æˆæœ¬ä¼˜åŒ–çš„ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7605817795629252658</link>    <guid>https://juejin.cn/post/7605817795629252658</guid>    <pubDate>2026-02-13T05:27:18.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605817795629252658" data-draft-id="7605811866908819465" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Prompt caching æŠ€æœ¯æ˜¯å¦‚ä½•å®ç° 1 æŠ˜çš„æ¨ç†æˆæœ¬ä¼˜åŒ–çš„ï¼Ÿ"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,LLM,é¢è¯•"/> <meta itemprop="datePublished" content="2026-02-13T05:27:18.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Baihai_IDP"/> <meta itemprop="url" content="https://juejin.cn/user/3123071228582343"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Prompt caching æŠ€æœ¯æ˜¯å¦‚ä½•å®ç° 1 æŠ˜çš„æ¨ç†æˆæœ¬ä¼˜åŒ–çš„ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3123071228582343/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Baihai_IDP
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-13T05:27:18.000Z" title="Fri Feb 13 2026 05:27:18 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»24åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p><strong>ç¼–è€…æŒ‰ï¼š</strong> ä½ æ˜¯å¦æ›¾å¥½å¥‡è¿‡ï¼Œé‚£äº›å£°ç§°èƒ½å°†é•¿æ–‡æœ¬è¾“å…¥æˆæœ¬é™ä½90%ã€å»¶è¿Ÿå‡å°‘85%çš„"Prompt Caching"æŠ€æœ¯ï¼ŒèƒŒåç©¶ç«Ÿç¼“å­˜äº†ä»€ä¹ˆï¼Ÿæ˜¯ç®€å•çš„æ–‡æœ¬å¤ç”¨ï¼Œè¿˜æ˜¯æŸç§æ›´æ·±å±‚çš„è®¡ç®—ä¼˜åŒ–ï¼Ÿ</p>
<p>æˆ‘ä»¬ä»Šå¤©ä¸ºå¤§å®¶å¸¦æ¥çš„æ–‡ç« ï¼Œä½œè€…çš„æ ¸å¿ƒè§‚ç‚¹æ˜¯ï¼šPrompt Cachingçš„æœ¬è´¨å¹¶éç®€å•çš„æ–‡æœ¬å­—ç¬¦ä¸²ç¼“å­˜ï¼Œè€Œæ˜¯å¯¹Transformeræ³¨æ„åŠ›æœºåˆ¶ä¸­Key-Valueï¼ˆKVï¼‰çŸ©é˜µè®¡ç®—ç»“æœçš„å¤ç”¨ï¼Œé€šè¿‡é¿å…é‡å¤è®¡ç®—æ³¨æ„åŠ›æƒé‡æ¥å®ç°æˆæœ¬å‰Šå‡ä¸æ€§èƒ½æå‡ã€‚</p>
<p>æ–‡ç« çš„é‡ç‚¹å†…å®¹åŒ…æ‹¬ï¼šç¬¬ä¸€ï¼Œä»Tokenizeråˆ°Embeddingå†åˆ°Transformerçš„å®Œæ•´æŠ€æœ¯æ‹†è§£ï¼Œå¸®åŠ©è¯»è€…å»ºç«‹å¯¹LLMå†…éƒ¨æ•°æ®æµçš„ç›´è§‰è®¤çŸ¥ï¼›ç¬¬äºŒï¼Œå¯¹æ³¨æ„åŠ›æœºåˆ¶ï¼ˆAttentionï¼‰çš„æ•°å­¦åŸç†è¿›è¡Œæ·±å…¥æµ…å‡ºçš„é˜é‡Šï¼Œè¯¦ç»†å±•ç¤ºäº†Queryã€Keyã€ValueçŸ©é˜µçš„è®¡ç®—è¿‡ç¨‹ä»¥åŠSoftmaxæƒé‡åˆ†é…æœºåˆ¶ï¼›ç¬¬ä¸‰ï¼Œæ­ç¤ºäº†"KV Caching"çš„æ ¸å¿ƒå®ç°é€»è¾‘ â€”â€” é€šè¿‡ç¼“å­˜å†å²tokençš„Kã€VæŠ•å½±çŸ©é˜µï¼Œä½¿æ¨¡å‹åœ¨å¢é‡ç”Ÿæˆæ—¶åªéœ€è®¡ç®—æœ€æ–°tokenï¼Œè€Œéé‡æ–°å¤„ç†æ•´ä¸ªä¸Šä¸‹æ–‡ï¼›ç¬¬å››ï¼Œå¯¹OpenAIä¸Anthropicä¸¤ç§ç¼“å­˜ç­–ç•¥çš„å¯¹æ¯”åˆ†æï¼ŒæŒ‡å‡ºè‡ªåŠ¨è·¯ç”±ä¸æ˜¾å¼æ§åˆ¶ä¹‹é—´çš„æƒè¡¡ï¼Œä»¥åŠTemperatureç­‰é‡‡æ ·å‚æ•°å¯¹ç¼“å­˜æœºåˆ¶çš„é›¶å½±å“ã€‚</p>
</blockquote>
<p><strong>ä½œè€… | Sam Rose</strong></p>
<p><strong>ç¼–è¯‘ | å²³æ‰¬</strong></p>
<p>æ’°å†™æœ¬æ–‡æ—¶ï¼ŒOpenAI å’Œ Anthropic çš„ API ä¸­ï¼Œç¼“å­˜çš„ input token å•ä»·ä»…ä¸ºæ™®é€š input token çš„ååˆ†ä¹‹ä¸€ã€‚</p>
<p>Anthropic ç”šè‡³å£°ç§°[1]ï¼Œprompt caching èƒ½å°†é•¿ prompt çš„å»¶è¿Ÿâ€œæœ€é«˜é™ä½ 85%â€ã€‚è€Œåœ¨å®é™…æµ‹è¯•ä¸­ï¼Œæˆ‘å‘ç°å¯¹äºè¶³å¤Ÿé•¿çš„ promptï¼Œè¿™ä¸€è¯´æ³•ç¡®å®æˆç«‹ã€‚æˆ‘å‘ Anthropic å’Œ OpenAI å„å‘é€äº†æ•°ç™¾æ¬¡è¯·æ±‚ï¼Œæ³¨æ„åˆ°åœ¨æ‰€æœ‰ input token å‡è¢«ç¼“å­˜çš„æƒ…å†µä¸‹ï¼Œé¦– token å»¶è¿Ÿï¼ˆtime-to-first-token latencyï¼‰å‡ºç°äº†æ˜æ˜¾ä¸‹é™ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d2764ce95d6845ac9561176b2e45fd21~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQmFpaGFpX0lEUA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771565238&amp;x-signature=X6TG1R9ac7VLfJuCCkCkXz7on6c%3D" alt="image.png" loading="lazy"/></p>
<p>ç¼“å­˜ tokenï¼ˆcached tokenï¼‰åˆ°åº•æ˜¯ä»€ä¹ˆç©æ„å„¿ï¼ŸÂ </p>
<p>è¿™èƒŒåç©¶ç«Ÿå‘ç”Ÿäº†ä»€ä¹ˆï¼Œè®©æœåŠ¡å•†èƒ½ç»™ input token æ‰“å‡º 1 æŠ˜çš„è¶…ä½æŠ˜æ‰£ï¼Ÿä»–ä»¬åœ¨å„æ¬¡è¯·æ±‚ä¹‹é—´åˆ°åº•ä¿å­˜äº†ä»€ä¹ˆï¼Ÿè¿™å¯ä¸æ˜¯ç®€å•åœ°æŠŠå“åº”ç»“æœå­˜ä¸‹æ¥ï¼Œç­‰æ”¶åˆ°ç›¸åŒ prompt æ—¶å†å¤ç”¨ â€”â€” é€šè¿‡ API å°±èƒ½å¾ˆå®¹æ˜“åœ°éªŒè¯è¿™ä¸€ç‚¹å¹¶æœªå‘ç”Ÿã€‚<strong>éšä¾¿å†™ä¸ª promptï¼Œè¿ç»­å‘é€åå‡ æ¬¡ï¼Œä½ ä¼šå‘ç°å³ä½¿ä½¿ç”¨æƒ…å†µæ ï¼ˆusage éƒ¨åˆ†ï¼‰æ˜¾ç¤º input token å·²è¢«ç¼“å­˜ï¼Œæ¯æ¬¡å¾—åˆ°çš„å›å¤ä»ç„¶å„ä¸ç›¸åŒã€‚</strong></p>
<p>æˆ‘å¯¹å¤§æ¨¡å‹å‚å•†æ–‡æ¡£ä¸­çš„è§£é‡Š[2-3]å¹¶ä¸æ»¡æ„ â€”â€” å®ƒä»¬è™½èƒ½å¾ˆå¥½åœ°è¯´æ˜å¦‚ä½•ä½¿ç”¨ prompt cachingï¼Œå´å·§å¦™åœ°é¿å¼€äº†â€œç©¶ç«Ÿç¼“å­˜äº†ä»€ä¹ˆâ€è¿™ä¸ªæ ¸å¿ƒé—®é¢˜ã€‚äºæ˜¯æˆ‘å†³å®šæ·±å…¥æ¢ç©¶ï¼Œä¸€å¤´æ‰è¿› LLM å·¥ä½œåŸç†çš„â€œå…”å­æ´â€ï¼Œç›´åˆ°å½»åº•ææ˜ç™½æœåŠ¡å•†ç©¶ç«Ÿç¼“å­˜äº†å“ªäº›ç²¾ç¡®çš„æ•°æ®ã€è¿™äº›æ•°æ®çš„ç”¨é€”ï¼Œä»¥åŠå®ƒä»¬å¦‚ä½•è®©æ¯ä¸ªäººçš„ LLM è¯·æ±‚éƒ½å˜å¾—æ›´å¿«é€Ÿã€æ›´ä¾¿å®œã€‚</p>
<p>è¯»å®Œæœ¬æ–‡ï¼Œä½ å°†â€¦â€¦</p>
<ul>
<li>åœ¨æ›´æ·±å±‚æ¬¡ä¸Šç†è§£ LLM çš„å·¥ä½œåŸç†</li>
<li>å¯¹â€œLLM çš„è¿ä½œæ–¹å¼â€å»ºç«‹æ–°çš„ç›´è§‰è®¤çŸ¥</li>
<li>å¼„æ˜ç™½ç©¶ç«Ÿå“ªäº›äºŒè¿›åˆ¶æ•°æ®è¢«ç¼“å­˜äº†ï¼Œä»¥åŠå®ƒä»¬å¦‚ä½•é™ä½ä½ çš„ LLM è¯·æ±‚æˆæœ¬</li>
</ul>
<h2 data-id="heading-0"><strong>01 LLM æ¶æ„</strong></h2>
<p>æœ¬è´¨ä¸Šï¼ŒLLM å°±æ˜¯ä¸€ä¸ªå·¨å¤§çš„æ•°å­¦å‡½æ•°ï¼šè¾“å…¥ä¸€ä¸²æ•°å­—ï¼Œå¹¶è¾“å‡ºä¸€ä¸ªæ•°å­—ã€‚åœ¨ LLM å†…éƒ¨ï¼Œå­˜åœ¨ç€ä¸€ä¸ªç”±æ•°åäº¿ä¸ªç²¾å¿ƒè®¾è®¡çš„è¿ç®—æ„æˆçš„å·¨å‹å›¾ç»“æ„ï¼Œè´Ÿè´£å°†è¿™äº›è¾“å…¥æ•°å­—è½¬åŒ–ä¸ºè¾“å‡ºæ•°å­—ã€‚</p>
<p>è¿™ä¸ªç”±æµ·é‡æ•°å­¦è¿ç®—æ„æˆçš„å·¨å‹å›¾ç»“æ„å¤§è‡´å¯åˆ†ä¸º 4 ä¸ªéƒ¨åˆ†ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e23abc23589f4d2d85e4fc84f523cd75~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQmFpaGFpX0lEUA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771565238&amp;x-signature=4N5FySyn4F3NdZPwakxjBlOKtc8%3D" alt="image.png" loading="lazy"/></p>
<p><strong>å›¾ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹éƒ½å¯ä»¥çœ‹ä½œä¸€ä¸ªå‡½æ•°ï¼Œæ¥æ”¶è¾“å…¥å¹¶äº§ç”Ÿè¾“å‡ºã€‚è¾“å…¥ä¼šä»¥å¾ªç¯æ–¹å¼ä¸æ–­é¦ˆå…¥ LLMï¼Œç›´åˆ°é‡åˆ°æŸä¸ªç‰¹æ®Šçš„è¾“å‡ºå€¼æŒ‡ç¤ºå…¶åœæ­¢ã€‚</strong> ç”¨ä¼ªä»£ç è¡¨ç¤ºå¤§è‡´å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">prompt</span>Â =<span class="hljs-string">"What is the meaning of life?"</span><span class="hljs-comment">;</span>

<span class="hljs-attr">tokens</span>Â =Â tokenizer(prompt)<span class="hljs-comment">;</span>
while(true){
Â <span class="hljs-attr">embeddings</span>Â =Â embed(tokens)<span class="hljs-comment">;</span>
for(<span class="hljs-section">[attention,Â feedforward]</span>Â of transformers){
Â <span class="hljs-attr">embeddings</span>Â =Â attention(embeddings)<span class="hljs-comment">;</span>
Â <span class="hljs-attr">embeddings</span>Â =Â feedforward(embeddings)<span class="hljs-comment">;</span>
}
Â <span class="hljs-attr">output_token</span>Â =Â output(embeddings)<span class="hljs-comment">;</span>
if(<span class="hljs-attr">output_token</span>Â ===Â END_TOKEN){
break<span class="hljs-comment">;</span>
}
Â tokens.push(output_token)<span class="hljs-comment">;</span>
}

print(decode(tokens))<span class="hljs-comment">;</span>
</code></pre>
<p>å°½ç®¡ä»¥ä¸Šæè¿°å·²å¤§å¹…ç®€åŒ–ï¼Œä½†ç°ä»£ LLM çš„æ ¸å¿ƒä»£ç è¡Œæ•°ä¹‹å°‘ä»è®©æˆ‘æ„Ÿåˆ°æ„å¤–ã€‚</p>
<p>Sebastian Raschka[4]Â ç”¨ PyTorch ä»é›¶å®ç°äº†å¤šä¸ªå¼€æºæ¨¡å‹ï¼Œè¿˜äº§å‡ºäº†å¤§é‡é«˜è´¨é‡çš„æ•™å­¦ææ–™ â€”â€” å¦‚æœä½ å–œæ¬¢æœ¬æ–‡ï¼Œå¤§æ¦‚ç‡ä¹Ÿä¼šå–œæ¬¢ä»–çš„å†…å®¹ã€‚ä»¥å½“å‰é¢†å…ˆçš„å¼€æºæ¨¡å‹ä¹‹ä¸€ Olmo 3 ä¸ºä¾‹ï¼Œå…¶æ ¸å¿ƒä»£ç ä»…æ•°ç™¾è¡Œ[5]ã€‚</p>
<p>Prompt caching å‘ç”Ÿåœ¨ Transformer çš„â€œattentionï¼ˆæ³¨æ„åŠ›æœºåˆ¶ï¼‰â€ä¸­ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬å°†æŒ‰é¡ºåºé€æ­¥æ‹†è§£ LLM çš„å·¥ä½œåŸç†ï¼Œç›´åˆ°æŠµè¾¾è¿™ä¸€ç¯èŠ‚ã€‚è¿™æ„å‘³ç€ï¼Œæˆ‘ä»¬çš„æ—…ç¨‹å¾—ä» tokens è¯´èµ·ã€‚</p>
<h2 data-id="heading-1"><strong>02 Tokenizerï¼ˆåˆ†è¯å™¨ï¼‰</strong></h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ba85563fcf4c4406a7a511e49c71cb20~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQmFpaGFpX0lEUA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771565238&amp;x-signature=h0BtIta1GQt2UOqqDb3rzws01Ks%3D" alt="image.png" loading="lazy"/></p>
<p>åœ¨ LLM å¤„ç†ä½ çš„ promptï¼ˆæç¤ºè¯ï¼‰ä¹‹å‰ï¼Œå¿…é¡»å…ˆå°†å…¶è½¬æ¢ä¸ºå®ƒèƒ½ç†è§£çš„è¡¨ç¤ºå½¢å¼ã€‚è¿™ä¸ªè¿‡ç¨‹åˆ†ä¸ºä¸¤æ­¥ï¼Œç”± tokenizer å’Œ embedding å…±åŒå®Œæˆã€‚ä¸ºä»€ä¹ˆè¦è¿™ä¹ˆåšï¼Œè¦åˆ°è®² embedding æ—¶æ‰èƒ½å®Œå…¨æ˜æ™°ï¼Œç°åœ¨è¯·å…ˆè€å¿ƒäº†è§£ tokenizer çš„ä½œç”¨ã€‚</p>
<p>Tokenizer ä¼šå°†ä½ çš„ prompt æ‹†æˆå¤šä¸ªå°ç‰‡æ®µï¼Œå¹¶ä¸ºæ¯ä¸ªå”¯ä¸€çš„ç‰‡æ®µåˆ†é…ä¸€ä¸ªæ•´æ•° IDï¼Œç§°ä¸º"token"ã€‚ä¾‹å¦‚ï¼ŒGPT-5 å¯¹ prompt "Check out ngrok.ai" çš„åˆ†è¯ç»“æœå¦‚ä¸‹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b0b2175da11a47a6bf8e9c33b4f76f1e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQmFpaGFpX0lEUA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771565238&amp;x-signature=9JcvcEfOFkw6qOgbmkg0lWuIiTc%3D" alt="image.png" loading="lazy"/></p>
<p>è¯¥ prompt å·²è¢«æ‹†åˆ†ä¸ºæ•°ç»„ [â€œCheckâ€, " out", " ng", â€œrokâ€, â€œ.aiâ€]ï¼Œå¹¶è½¬æ¢ä¸º tokens [4383, 842, 1657, 17690, 75584]ã€‚ç›¸åŒçš„ prompt å§‹ç»ˆç”Ÿæˆç›¸åŒçš„ tokensã€‚tokens ä¹Ÿæ˜¯åŒºåˆ†å¤§å°å†™çš„ â€”â€” å› ä¸ºå¤§å°å†™èƒ½ä¼ é€’è¯­ä¹‰ä¿¡æ¯ã€‚ä¾‹å¦‚ï¼Œé¦–å­—æ¯å¤§å†™çš„ "Will" æ›´å¯èƒ½æ˜¯äººåï¼Œè€Œå°å†™çš„ "will" åˆ™æ›´å¯èƒ½æ˜¯åŠ©åŠ¨è¯ã€‚</p>
<p>ä¸ºä»€ä¹ˆä¸ç›´æ¥æŒ‰ç©ºæ ¼æˆ–å­—ç¬¦åˆ†å‰²ï¼Ÿ</p>
<p>è¿™å…¶å®æ˜¯ä¸ªç›¸å½“æ·±åˆ»çš„é—®é¢˜ï¼Œç»†è®²èµ·æ¥è¶³ä»¥è®©æœ¬æ–‡ç¯‡å¹…ç¿»å€ã€‚ç®€çŸ­è€Œä¸å°½å…´çš„ç­”æ¡ˆæ˜¯ï¼šè¿™æ˜¯ä¸€ç§æƒè¡¡ã€‚è‹¥æƒ³æ·±å…¥ç†è§£ï¼ŒAndrej Karpathy æœ‰ä¸€æœŸä»é›¶å®ç° tokenizer çš„ç²¾å½©è§†é¢‘ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3DzduSFxRajkE%25EF%25BC%2589" target="_blank" title="https://www.youtube.com/watch?v=zduSFxRajkE%EF%BC%89" ref="nofollow noopener noreferrer">www.youtube.com/watch?v=zduâ€¦</a> ã€‚<strong>å¯¹äº prompt caching è€Œè¨€ï¼Œåªéœ€çŸ¥é“ï¼štokenization çš„ä½œç”¨å°±æ˜¯æŠŠæ–‡æœ¬å˜æˆæ•°å­—ã€‚</strong></p>
<p>Tokens æ˜¯ LLM è¾“å…¥ä¸è¾“å‡ºçš„åŸºæœ¬å•ä½ã€‚å½“ä½ å‘ ChatGPT æé—®æ—¶ï¼Œå›å¤ä¼šéšç€æ¯æ¬¡ LLM è¿­ä»£å®Œæˆè€Œé€ä¸ª token æµå¼è¿”å›ã€‚æœåŠ¡å•†è¿™ä¹ˆåšï¼Œæ˜¯å› ä¸ºç”Ÿæˆå®Œæ•´å›å¤å¯èƒ½éœ€è¦æ•°åç§’ï¼Œè€Œä¸€æ—¦ token ç”Ÿæˆå°±ç«‹å³è¿”å›ï¼Œèƒ½è®©äº¤äº’ä½“éªŒæ›´æµç•…è‡ªç„¶ã€‚</p>
<p>æˆ‘ä»¬æ¥é—®ä¸€ä¸ª LLM é¢†åŸŸçš„ç»å…¸é—®é¢˜ï¼Œäº²çœ¼çœ‹çœ‹è¿™ä¸ªè¿‡ç¨‹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f623bb995c1a49c6b48737c31c789714~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQmFpaGFpX0lEUA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771565238&amp;x-signature=hO24WCOIn3KcV0ODEkx2P9HJAgU%3D" alt="image.png" loading="lazy"/></p>
<p>Prompt tokens è¾“å…¥ï¼Œâœ¨ AI é­”æ³•å‘ç”Ÿ âœ¨ï¼Œè¾“å‡ºä¸€ä¸ª tokenï¼Œå¾ªç¯å¾€å¤ã€‚è¿™ä¸ªè¿‡ç¨‹ç§°ä¸ºâ€œinferenceï¼ˆæ¨ç†ï¼‰â€ã€‚æ³¨æ„ï¼šæ¯ä¸ªè¾“å‡º token éƒ½ä¼šåœ¨ä¸‹ä¸€è½®è¿­ä»£å‰è¢«è¿½åŠ åˆ° input prompt ä¸­ã€‚LLM éœ€è¦å…¨éƒ¨ä¸Šä¸‹æ–‡æ‰èƒ½ç»™å‡ºé«˜è´¨é‡å›ç­” â€”â€” å¦‚æœåªè¾“å…¥åŸå§‹ promptï¼Œå®ƒä¼šåå¤å°è¯•ç”Ÿæˆç­”æ¡ˆçš„ç¬¬ä¸€ä¸ª tokenã€‚å¦‚æœåªè¾“å…¥å·²ç”Ÿæˆçš„å›ç­”éƒ¨åˆ†ï¼Œå®ƒä¼šç«‹åˆ»å¿˜è®°é—®é¢˜æœ¬èº«ã€‚å› æ­¤ï¼Œæ¯ä¸€è½®è¿­ä»£éƒ½å¿…é¡»å°†å®Œæ•´çš„ prompt åŠ ä¸Šå·²ç”Ÿæˆçš„å›ç­”å†…å®¹é‡æ–°è¾“å…¥ LLMã€‚</p>
<p><strong>é‚£ä¸ª 199999  token æ˜¯ä»€ä¹ˆï¼Ÿ</strong></p>
<p>è¿™ä¸ªæ¨ç†è¿‡ç¨‹æ€»å¾—æœ‰ä¸ªç»ˆç‚¹ã€‚<strong>LLM æ‹¥æœ‰å¤šç§â€œç‰¹æ®Šâ€tokenï¼Œå…¶ä¸­ä¹‹ä¸€å°±æ˜¯æ ‡å¿—ç€å“åº”ç»“æŸçš„ tokenã€‚</strong> åœ¨ GPT-5 çš„åˆ†è¯å™¨ä¸­ï¼Œè¿™å°±æ˜¯ token 199999ã€‚è¿™åªæ˜¯ LLM ç»ˆæ­¢ç”Ÿæˆè¿‡ç¨‹çš„å¤šç§æ–¹å¼ä¹‹ä¸€ï¼š<strong>ä½ ä¹Ÿå¯ä»¥é€šè¿‡ API æŒ‡å®šæœ€å¤§ç”Ÿæˆ token æ•°ï¼ŒæœåŠ¡å•†è¿˜å¯èƒ½åŸºäºå®‰å…¨ç­–ç•¥è®¾å®šå…¶ä»–ç»ˆæ­¢è§„åˆ™ã€‚</strong></p>
<p>æ­¤å¤–è¿˜æœ‰ç”¨äºæ ‡è®°å¯¹è¯æ¶ˆæ¯èµ·æ­¢çš„ç‰¹æ®Š token â€”â€” æ­£æ˜¯è¿™äº› token è®© ChatGPTã€Claude ç­‰èŠå¤©æ¨¡å‹èƒ½åˆ†è¾¨ä¸€æ¡æ¶ˆæ¯ä½•æ—¶ç»“æŸã€ä¸‹ä¸€æ¡ä½•æ—¶å¼€å§‹ã€‚</p>
<p>å…³äº tokenizerï¼ˆåˆ†è¯å™¨ï¼‰çš„æœ€åä¸€ç‚¹ï¼šå®ƒä»¬ç§ç±»ç¹å¤šï¼ChatGPT ä½¿ç”¨çš„ tokenizer ä¸ Claude ä¸åŒï¼Œç”šè‡³ OpenAI è‡ªå®¶çš„ä¸åŒæ¨¡å‹ä¹Ÿä½¿ç”¨ä¸åŒçš„ tokenizerã€‚æ¯ç§ tokenizer éƒ½æœ‰è‡ªå·±ç‹¬ç‰¹çš„æ–‡æœ¬åˆ‡åˆ†è§„åˆ™ã€‚å¦‚æœä½ æƒ³ç›´è§‚æ¯”è¾ƒä¸åŒ tokenizer çš„åˆ†è¯æ•ˆæœï¼Œå¯ä»¥è¯•è¯• tiktokenizer[6]ã€‚</p>
<p>è®¤è¯†äº† tokens ä¹‹åï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬èŠèŠ embeddingsã€‚</p>
<h2 data-id="heading-2"><strong>03 Embedding</strong></h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/52de7bad6c8b4ede900ea19a292df5fe~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQmFpaGFpX0lEUA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771565238&amp;x-signature=nM75RjxsYx20JVfxRP8vm3nARhM%3D" alt="image.png" loading="lazy"/></p>
<p>ç»è¿‡ tokenizer å¤„ç†åçš„ tokensï¼Œç°åœ¨è¿›å…¥ embedding é˜¶æ®µã€‚è¦ç†è§£ embeddingï¼Œä¸å¦¨å…ˆæ€è€ƒæ¨¡å‹çš„ç›®æ ‡æ˜¯ä»€ä¹ˆã€‚</p>
<p>äººç±»ç”¨ä»£ç è§£å†³é—®é¢˜æ—¶ï¼Œä¼šç¼–å†™æ¥æ”¶è¾“å…¥ã€äº§ç”Ÿè¾“å‡ºçš„å‡½æ•°ï¼Œæ¯”å¦‚åæ°è½¬æ‘„æ°ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">function <span class="hljs-built_in">fahrenheitToCelsius</span>(fahrenheit){
<span class="hljs-built_in">return</span>((fahrenheitÂ -<span class="hljs-number">32</span>)*<span class="hljs-number">5</span>)/<span class="hljs-number">9</span>;
}
</code></pre>
<p>æˆ‘ä»¬å¯ä»¥æŠŠä»»æ„æ•°å­—ä¼ å…¥ fahrenheitToCelsiusï¼Œå¹¶èƒ½è·å¾—æ­£ç¡®ç»“æœã€‚ä½†å‡å¦‚æˆ‘ä»¬é¢å¯¹ä¸€ä¸ªé—®é¢˜ï¼Œå´ä¸çŸ¥é“èƒŒåçš„å…¬å¼å‘¢ï¼Ÿå‡å¦‚æˆ‘ä»¬åªæœ‰ä¸‹é¢è¿™å¼ ç¥ç§˜çš„è¾“å…¥-è¾“å‡ºå¯¹ç…§è¡¨ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0f04832306da4348b9736a7d55fd8eaa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQmFpaGFpX0lEUA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771565238&amp;x-signature=%2BdTHSm5VPy%2F7SzIMrZ%2BVLKq8PMs%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ï¼ˆæˆ‘å¹¶ä¸æŒ‡æœ›ä½ èƒ½è®¤å‡ºè¿™ä¸ªå‡½æ•° â€”â€” ä¸è¿‡ï¼Œå¦‚æœä½ æŠŠæˆªå›¾è´´è¿› ChatGPTï¼Œå®ƒèƒ½ç«‹åˆ»è¯†åˆ«å‡ºæ¥ã€‚ï¼‰</p>
<p>å½“æˆ‘ä»¬çŸ¥é“æ¯ä¸ªè¾“å…¥å¯¹åº”çš„æ­£ç¡®è¾“å‡ºï¼Œå´ä¸çŸ¥é“äº§ç”Ÿè¿™ç§å¯¹åº”å…³ç³»çš„å‡½æ•°æ—¶ï¼Œå°±å¯ä»¥â€œè®­ç»ƒâ€ä¸€ä¸ªæ¨¡å‹æ¥å­¦ä¹ è¿™ä¸ªå‡½æ•°ã€‚åšæ³•æ˜¯ï¼šç»™æ¨¡å‹æä¾›ä¸€å—â€œç”»å¸ƒâ€ â€”â€” é‚£ä¸ªç”±æµ·é‡æ•°å­¦è¿ç®—æ„æˆçš„å·¨å‹å›¾ç»“æ„ï¼Œç„¶åä¸æ–­è°ƒæ•´è¿™ä¸ªå›¾ç»“æ„ï¼Œç›´åˆ°æ¨¡å‹æ”¶æ•›åˆ°æ­£ç¡®çš„å‡½æ•°ã€‚æ¯æ¬¡æ›´æ–°å›¾ç»“æ„åï¼Œæˆ‘ä»¬éƒ½å°†è¾“å…¥æ•°æ®å–‚è¿›å»ï¼Œè§‚å¯Ÿè¾“å‡ºæ•°æ®ä¸ç›®æ ‡çš„å·®è·ã€‚åå¤è¿­ä»£ï¼Œç›´åˆ°ç»“æœè¶³å¤Ÿæ¥è¿‘ç›®æ ‡ã€‚è¿™å°±æ˜¯è®­ç»ƒçš„æœ¬è´¨ã€‚</p>
<p>äº‹å®è¯æ˜ï¼Œåœ¨è®­ç»ƒæ–‡æœ¬ç”Ÿæˆæ¨¡å‹æ—¶ï¼Œèƒ½å¤Ÿè¯†åˆ«ä¸¤ä¸ªå¥å­æ˜¯å¦â€œç›¸ä¼¼â€ä¼šå¾ˆæœ‰å¸®åŠ©ã€‚ä½†â€œç›¸ä¼¼â€å…·ä½“æŒ‡ä»€ä¹ˆï¼Ÿå®ƒä»¬å¯èƒ½åŒæ ·æ‚²ä¼¤ã€å¹½é»˜æˆ–å‘äººæ·±çœï¼›ä¹Ÿå¯èƒ½åœ¨é•¿åº¦ã€èŠ‚å¥ã€è¯­æ°”ã€è¯­è¨€ã€è¯æ±‡æˆ–ç»“æ„ä¸Šç›¸è¿‘ã€‚æè¿°å¥å­ç›¸ä¼¼æ€§çš„æ–¹å¼æœ‰æ— æ•°ç»´åº¦ï¼Œè€Œä¸¤ä¸ªå¥å­å¯èƒ½åœ¨æŸäº›ç»´åº¦ä¸Šç›¸ä¼¼ï¼Œåœ¨å¦ä¸€äº›ç»´åº¦ä¸Šåˆ™ä¸ç„¶ã€‚</p>
<p><strong>Tokens æœ¬èº«åªæ˜¯ç®€å•çš„æ•´æ•°ç¼–å·ï¼Œæ²¡æœ‰ä»»ä½•â€œç»´åº¦â€ä¿¡æ¯ï¼›è€Œ embeddings åˆ™æ˜¯é«˜ç»´å‘é‡ï¼Œæ‰¿è½½äº†ä¸°å¯Œçš„è¯­ä¹‰å’Œç»“æ„ä¿¡æ¯ã€‚</strong></p>
<p>Embedding æ˜¯ä¸€ä¸ªé•¿åº¦ä¸º n çš„æ•°ç»„ï¼Œä»£è¡¨ n ç»´ç©ºé—´ä¸­çš„ä¸€ä¸ªä½ç½®ã€‚å¦‚æœ n=3ï¼Œembedding å¯èƒ½æ˜¯ [10, 4, 2]ï¼Œè¡¨ç¤ºä¸‰ç»´ç©ºé—´ä¸­ x=10ã€y=4ã€z=2 çš„åæ ‡ç‚¹ã€‚åœ¨ LLM è®­ç»ƒè¿‡ç¨‹ä¸­ï¼Œæ¯ä¸ª token ä¼šè¢«éšæœºåˆ†é…ä¸€ä¸ªèµ·å§‹ä½ç½®ï¼Œéšåè®­ç»ƒè¿‡ç¨‹ä¼šä¸æ–­å¾®è°ƒæ‰€æœ‰ token çš„ä½ç½®ï¼Œç›´åˆ°æ‰¾åˆ°èƒ½äº§ç”Ÿæœ€ä½³è¾“å‡ºçš„æ’åˆ—æ–¹å¼ã€‚</p>
<p>Embedding é˜¶æ®µçš„ç¬¬ä¸€æ­¥ï¼Œå°±æ˜¯æŸ¥è¡¨è·å–æ¯ä¸ª token å¯¹åº”çš„ embeddingã€‚ç”¨ä¼ªä»£ç è¡¨ç¤ºå¤§æ¦‚æ˜¯è¿™æ ·ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">// Created during training, never changes during inference.
const <span class="hljs-attr">EMBEDDINGS</span> = [...]<span class="hljs-comment">;</span>
Â 
function embed(tokens) {
Â return tokens.map(<span class="hljs-attr">token</span> =&gt; {
Â return EMBEDDINGS<span class="hljs-section">[token]</span><span class="hljs-comment">;</span>
Â })<span class="hljs-comment">;</span>
}
</code></pre>
<p>äºæ˜¯ï¼Œæˆ‘ä»¬æŠŠ tokensï¼ˆæ•´æ•°æ•°ç»„ï¼‰è½¬æ¢æˆäº† embeddingsï¼ˆæ•°ç»„çš„æ•°ç»„ï¼Œå³â€œçŸ©é˜µâ€ï¼‰ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c3fe6b77a8a34f88bde24bde2b8c361e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQmFpaGFpX0lEUA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771565238&amp;x-signature=M0OPQI8Nqk8TpPSy4sxYCCTP58w%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7e95661b89e643028dda2e13a0f08ecf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQmFpaGFpX0lEUA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771565238&amp;x-signature=oWqWH8AKM%2BoqjMNpHxWeJ0LDeos%3D" alt="image.png" loading="lazy"/></p>
<p>tokens [75, 305, 284, 887] è¢«è½¬æ¢ä¸ºä¸€ä¸ªç”± 3 ç»´ embeddings æ„æˆçš„çŸ©é˜µã€‚</p>
<p><strong>Embedding çš„ç»´åº¦è¶Šå¤šï¼Œæ¨¡å‹å¯ç”¨äºæ¯”è¾ƒå¥å­çš„â€œè§’åº¦â€å°±è¶Šå¤šã€‚</strong> æˆ‘ä»¬åˆšæ‰ä¸€ç›´åœ¨ç”¨ 3 ç»´ embeddings ä¸¾ä¾‹ï¼Œä½†å½“å‰ä¸»æµæ¨¡å‹çš„ embedding ç»´åº¦é€šå¸¸æ˜¯å‡ åƒç»´ï¼Œæœ€å¤§çš„ç”šè‡³è¶…è¿‡ 10,000 ç»´ã€‚</p>
<p>ä¸ºäº†è¯´æ˜æ›´é«˜ç»´åº¦çš„ä»·å€¼ï¼Œä¸‹é¢æˆ‘å±•ç¤ºäº† 8 ç»„å½©è‰²å½¢çŠ¶ï¼Œå®ƒä»¬æœ€åˆä½äºä¸€ç»´ç©ºé—´ä¸­ â€”â€” æŒ¤åœ¨ä¸€æ¡ç›´çº¿ä¸Šï¼Œæ‚ä¹±æ— ç« ï¼Œéš¾ä»¥ç†è§£ã€‚ä½†éšç€ç»´åº¦å¢åŠ ï¼Œä½ å°±èƒ½æ¸…æ¥šåœ°çœ‹åˆ°å­˜åœ¨ 8 ä¸ªä¸åŒçš„ã€ç›¸å…³çš„ç»„åˆ«ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/23e158d605cc453080698f9eb2abe70c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQmFpaGFpX0lEUA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771565238&amp;x-signature=U9%2BjWt9inP2iu%2BMpxux2JFTussc%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f94e90f2dd0045ac8069a2a7f634e58d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQmFpaGFpX0lEUA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771565238&amp;x-signature=rH0QWYRyOYNU8E4ALhOZKTeB9aY%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ed7faaf0c6e14d329251ca65e250872a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQmFpaGFpX0lEUA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771565238&amp;x-signature=YALz8yr0sbw4dr7E7gOxDr3VJws%3D" alt="image.png" loading="lazy"/></p>
<p>ä¸‰ç»´æ˜¯æˆ‘è¿™é‡Œèƒ½æä¾›çš„è§†è§‰ç¤ºä¾‹çš„æé™ï¼Œè‡³äºå‡ åƒç»´çš„ç©ºé—´èƒ½è¡¨è¾¾ä»€ä¹ˆï¼Œå°±å¾—é ä½ å‘æŒ¥æƒ³è±¡åŠ›äº†ã€‚</p>
<p>Embedding é˜¶æ®µè¿˜æœ‰æœ€åä¸€ä»¶äº‹è¦åšã€‚<strong>åœ¨è·å– token çš„ embedding åï¼Œä¼šå°†è¯¥ token åœ¨ prompt ä¸­çš„ä½ç½®ä¿¡æ¯ç¼–ç è¿› embedding ä¸­ã€‚</strong> æˆ‘æ²¡æœ‰æ·±å…¥ç ”ç©¶è¿™ä¸€æœºåˆ¶çš„å…·ä½“å®ç°æ–¹å¼ï¼ŒåªçŸ¥é“å®ƒå¯¹ prompt caching çš„å·¥ä½œæ–¹å¼å½±å“ä¸å¤§ï¼Œä½†å¦‚æœæ²¡æœ‰è¿™ä¸€æ­¥ï¼ŒLLM å°±æ— æ³•åˆ¤æ–­ prompt ä¸­ tokens çš„å…ˆåé¡ºåºã€‚</p>
<p>æ›´æ–°ä¸€ä¸‹å‰é¢çš„ä¼ªä»£ç ï¼Œå‡è®¾å­˜åœ¨ä¸€ä¸ªå« encodePosition çš„å‡½æ•°ï¼Œå®ƒæ¥æ”¶ embeddings å’Œä½ç½®ä¿¡æ¯ï¼Œå¹¶è¿”å›åµŒå…¥äº†ä½ç½®ç¼–ç çš„æ–° embeddingsã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">EMBEDDINGS</span>Â =[...];
Â 
<span class="hljs-comment">//Â Input:Â array of tokensÂ (integers)</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">embed</span>(<span class="hljs-params">tokens</span>){
<span class="hljs-comment">//Â Output:Â array of n-dimensional embedding arrays</span>
<span class="hljs-keyword">return</span>Â tokens.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">token,Â i</span>)=&gt;</span>{
Â <span class="hljs-keyword">const</span> embeddingsÂ =Â <span class="hljs-variable constant_">EMBEDDINGS</span>[token];
<span class="hljs-keyword">return</span>Â <span class="hljs-title function_">encodePosition</span>(embeddings,Â i);
});
}
</code></pre>
<p>æ€»è€Œè¨€ä¹‹ï¼Œembeddings æ˜¯ n ç»´ç©ºé—´ä¸­çš„ç‚¹ï¼Œä½ å¯ä»¥å°†å…¶è§†ä¸ºå®ƒä»¬æ‰€ä»£è¡¨æ–‡æœ¬çš„è¯­ä¹‰å«ä¹‰ã€‚<strong>åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­ï¼Œæ¯ä¸ª token éƒ½ä¼šåœ¨è¯¥ç©ºé—´ä¸­ç§»åŠ¨ï¼Œé è¿‘å…¶ä»–è¯­ä¹‰ç›¸ä¼¼çš„ tokenã€‚ç»´åº¦è¶Šå¤šï¼ŒLLM å¯¹æ¯ä¸ª token çš„è¡¨ç¤ºå°±è¶Šå¤æ‚ã€è¶Šç»†è…»ã€‚</strong></p>
<p>è‡³æ­¤ï¼Œtokenizer å’Œ embedding é˜¶æ®µæ‰€åšçš„å…¨éƒ¨å·¥ä½œï¼Œéƒ½æ˜¯ä¸ºäº†æŠŠåŸå§‹æ–‡æœ¬è½¬æ¢æˆ LLM èƒ½å¤„ç†çš„å½¢å¼ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹è¿™äº›æ•°æ®è¿›å…¥ transformer é˜¶æ®µåä¼šå‘ç”Ÿä»€ä¹ˆã€‚</p>
<h2 data-id="heading-3"><strong>04 Transformer</strong></h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/953ad94df0c840f5a6566dcedae4f404~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQmFpaGFpX0lEUA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771565238&amp;x-signature=aH2M8hxE6kLJrKQiRYJTe719DcU%3D" alt="image.png" loading="lazy"/></p>
<p>Transformer é˜¶æ®µçš„æ ¸å¿ƒä»»åŠ¡ï¼Œå°±æ˜¯æ¥æ”¶ embeddings ä½œä¸ºè¾“å…¥ï¼Œå¹¶åœ¨ n ç»´ç©ºé—´ä¸­å¯¹å®ƒä»¬è¿›è¡Œè°ƒæ•´ã€‚å®ƒé€šè¿‡ä¸¤ç§æ–¹å¼å®ç°è¿™ä¸€ç‚¹ï¼Œè€Œæˆ‘ä»¬åªå…³æ³¨ç¬¬ä¸€ç§ï¼šattentionï¼ˆæ³¨æ„åŠ›æœºåˆ¶ï¼‰ã€‚æˆ‘ä»¬æš‚ä¸è®¨è®º â€œFeedforwardâ€ å±‚æˆ–è¾“å‡ºé˜¶æ®µï¼ˆè‡³å°‘åœ¨è¿™ç¯‡æ–‡ç« ä¸­ğŸ‘€ï¼‰ã€‚</p>
<p><strong>Attention æœºåˆ¶çš„ä½œç”¨ï¼Œæ˜¯å¸®åŠ© LLM ç†è§£ prompt ä¸­å„ä¸ª token ä¹‹é—´çš„å…³ç³» â€”â€” å…·ä½“åšæ³•æ˜¯è®©æ¯ä¸ª token èƒ½å¤Ÿå½±å“å…¶ä»– token åœ¨ n ç»´ç©ºé—´ä¸­çš„ä½ç½®ã€‚</strong> å®ƒé€šè¿‡åŠ æƒç»„åˆ prompt ä¸­æ‰€æœ‰ token çš„ embeddings æ¥å®ç°è¿™ä¸€ç‚¹ã€‚è¾“å…¥æ˜¯æ•´ä¸ª prompt çš„ embeddingsï¼Œè¾“å‡ºåˆ™æ˜¯ä¸€ä¸ªæ–°çš„ embeddingï¼Œå®ƒæ˜¯æ‰€æœ‰è¾“å…¥ embeddings çš„åŠ æƒç»„åˆã€‚</p>
<p>ä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æœ prompt æ˜¯ â€œMary had a littleâ€ï¼Œè¢«åˆ†è¯ä¸ºå››ä¸ª tokenï¼šMaryã€hadã€aã€littleï¼Œé‚£ä¹ˆ attention æœºåˆ¶å¯èƒ½ä¼šå†³å®šï¼Œåœ¨ç”Ÿæˆä¸‹ä¸€ä¸ª token æ—¶ï¼Œæ¨¡å‹ä¼šè®¤ä¸ºï¼š</p>
<ul>
<li>â€œMaryâ€ æœ€é‡è¦ï¼ˆ63%ï¼‰ï¼ˆè¯‘è€…æ³¨ï¼šå› ä¸ºæ•´ä¸ªå¥å­çš„ä¸»è¯­æ˜¯ Maryï¼Œåç»­å†…å®¹å¾ˆå¯èƒ½å›´ç»•å¥¹å±•å¼€ï¼‰</li>
<li>â€œhadâ€ å’Œ â€œaâ€ æ¬¡ä¹‹ï¼ˆ16% å’Œ 12%ï¼‰ï¼ˆè¯‘è€…æ³¨ï¼šå®ƒä»¬æ˜¯è¯­æ³•ç»“æ„çš„ä¸€éƒ¨åˆ†ï¼Œä½†è¯­ä¹‰ä¿¡æ¯è¾ƒå¼±ï¼‰</li>
<li>â€œlittleâ€ ä¹Ÿæœ‰ä¸€å®šä½œç”¨ï¼ˆ9%ï¼‰ï¼ˆè¯‘è€…æ³¨ï¼šå®ƒä¿®é¥°åé¢çš„åè¯ï¼‰</li>
</ul>
<p>ç„¶åï¼Œå®ƒä¼šæŠŠæ‰€æœ‰ token çš„ embeddings åˆ†åˆ«ä¹˜ä»¥å¯¹åº”çš„æƒé‡ï¼Œç„¶åæŠŠç»“æœåŠ åœ¨ä¸€èµ·ï¼Œå¾—åˆ°ä¸€ä¸ªèåˆåçš„å‘é‡ã€‚è¿™æ­£æ˜¯ LLM åˆ¤æ–­â€œåœ¨å½“å‰ä¸Šä¸‹æ–‡ä¸­ï¼Œæ¯ä¸ª token åº”è¯¥è¢«å…³æ³¨å¤šå°‘â€çš„æ–¹å¼ã€‚</p>
<p>è¿™æ˜¯ç›®å‰ä¸ºæ­¢æ•´ä¸ªæµç¨‹ä¸­æœ€å¤æ‚ã€æœ€æŠ½è±¡çš„éƒ¨åˆ†ã€‚æˆ‘ä¼šå…ˆç”¨ä¼ªä»£ç å±•ç¤ºå®ƒï¼Œç„¶åå†çœ‹çœ‹ embeddings åœ¨ç»è¿‡è¿™ä¸€è¿‡ç¨‹æ—¶æ˜¯å¦‚ä½•è¢«å˜æ¢çš„ã€‚æˆ‘æœ¬æƒ³è®©è¿™ä¸€éƒ¨åˆ†çš„æ•°å­¦å†…å®¹å°‘ä¸€äº›ï¼Œä½†è¿™é‡Œå¾ˆéš¾é¿å…ä¸€äº›æ•°å­¦è¿ç®—ã€‚åˆ«æ‹…å¿ƒï¼Œä½ èƒ½è¡Œçš„ï¼Œæˆ‘ç›¸ä¿¡ä½ ã€‚</p>
<p>Attention ä¸­çš„å¤§éƒ¨åˆ†è®¡ç®—éƒ½æ˜¯çŸ©é˜µä¹˜æ³•ã€‚å¯¹äºæœ¬æ–‡è€Œè¨€ï¼Œä½ åªéœ€çŸ¥é“ï¼šè¾“å‡ºçŸ©é˜µçš„å½¢çŠ¶ç”±ä¸¤ä¸ªè¾“å…¥çŸ©é˜µçš„å½¢çŠ¶å†³å®šï¼Œè¾“å‡ºçš„è¡Œæ•°ç­‰äºç¬¬ä¸€ä¸ªè¾“å…¥çŸ©é˜µçš„è¡Œæ•°ï¼Œåˆ—æ•°ç­‰äºç¬¬äºŒä¸ªè¾“å…¥çŸ©é˜µçš„åˆ—æ•°ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dcfe0f6e2a924a2b8735ca4334166f00~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQmFpaGFpX0lEUA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771565238&amp;x-signature=mGBYYF0i2S8z2r3WszZkbJ7ivGA%3D" alt="image.png" loading="lazy"/></p>
<p>ç†è§£äº†è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªç®€åŒ–ç‰ˆçš„æ³¨æ„åŠ›æœºåˆ¶å¦‚ä½•è®¡ç®—åˆ†é…ç»™æ¯ä¸ª token çš„æƒé‡ã€‚åœ¨ä»¥ä¸‹ä»£ç ä¸­ï¼Œæˆ‘ç”¨ * è¡¨ç¤ºçŸ©é˜µä¹˜æ³•ã€‚</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">//Â Similar to EMBEDDINGSÂ fromÂ the pseudocode</span>
<span class="hljs-comment">//Â earlier,Â WQÂ andÂ WK are learned duringÂ </span>
<span class="hljs-comment">//Â trainingÂ andÂ doÂ notÂ change during inference.</span>
<span class="hljs-comment">//</span>
<span class="hljs-comment">//Â These are both n*n matrices,Â where nÂ isÂ the</span>
<span class="hljs-comment">//Â number of embedding dimensions.Â In our example</span>
<span class="hljs-comment">//Â above,Â nÂ =3.</span>
const WQÂ =<span class="hljs-selector-attr">[[...]</span>,<span class="hljs-selector-attr">[...]</span>,<span class="hljs-selector-attr">[...]</span>];
const WKÂ =<span class="hljs-selector-attr">[[...]</span>,<span class="hljs-selector-attr">[...]</span>,<span class="hljs-selector-attr">[...]</span>];

<span class="hljs-comment">//Â TheÂ inputÂ embeddings look like this:</span>
<span class="hljs-comment">//[</span>
<span class="hljs-comment">//[-0.1,0.1,-0.3],//Â Mary</span>
<span class="hljs-comment">//[1.0,-0.5,-0.6],//Â had</span>
<span class="hljs-comment">//[0.0,0.8,0.6],//Â a</span>
<span class="hljs-comment">//[0.5,-0.7,1.0]//Â little</span>
<span class="hljs-comment">//]</span>
function <span class="hljs-built_in">attentionWeights</span>(embeddings){
Â const <span class="hljs-selector-tag">Q</span>Â =Â embeddingsÂ *Â WQ;
Â const KÂ =Â embeddingsÂ *Â WK;
Â const scoresÂ =Â <span class="hljs-selector-tag">Q</span>Â *Â <span class="hljs-built_in">transpose</span>(K);
Â const maskedÂ =Â <span class="hljs-attribute">mask</span>(scores);
returnÂ <span class="hljs-built_in">softmax</span>(masked);
}
</code></pre>
<p>æ¥ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹ embedding åœ¨æµç»è¿™ä¸ªå‡½æ•°æ—¶æ˜¯å¦‚ä½•å˜åŒ–çš„ã€‚</p>
<p>ç­‰ç­‰ï¼ŒWQ å’Œ WK å˜é‡åˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<p>è¿˜è®°å¾—æˆ‘ä¹‹å‰è¯´è¿‡ï¼Œæ¯ä¸ª token çš„ embedding æœ€åˆéƒ½è¢«éšæœºåˆ†é…äº†ä¸€ä¸ªä½ç½®ï¼Œç„¶ååœ¨è®­ç»ƒè¿‡ç¨‹ä¸­ä¸æ–­å¾®è°ƒï¼Œç›´åˆ°æ¨¡å‹æ‰¾åˆ°ä¸€ä¸ªè‰¯å¥½çš„æ’åˆ—çŠ¶æ€å—ï¼Ÿ</p>
<p>WQ å’Œ WK ä¹Ÿæ˜¯ç±»ä¼¼çš„ã€‚å®ƒä»¬æ˜¯ nÃ—n çš„çŸ©é˜µï¼ˆn å³ embedding ç»´åº¦ï¼‰ï¼Œåœ¨è®­ç»ƒå¼€å§‹æ—¶è¢«èµ‹äºˆéšæœºå€¼ï¼Œéšåä¹Ÿåœ¨è®­ç»ƒä¸­è¢«ä¸æ–­è°ƒæ•´ï¼Œä»¥å¸®åŠ©æ¨¡å‹æ”¶æ•›åˆ°ä¸€ä¸ªæ›´ä¼˜çš„è§£ã€‚</p>
<p>ä»»ä½•åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­è¢«è°ƒæ•´çš„æ•°ï¼Œéƒ½è¢«ç§°ä¸ºâ€œæ¨¡å‹å‚æ•°â€ã€‚embedding å‘é‡ä¸­çš„æ¯ä¸ªæµ®ç‚¹æ•°ï¼Œä»¥åŠ WQã€WK çŸ©é˜µä¸­çš„æ¯ä¸ªæ•°å€¼ï¼Œéƒ½æ˜¯ä¸€ä¸ªå‚æ•°ã€‚å½“ä½ å¬è¯´æŸä¸ªæ¨¡å‹æœ‰â€œ1750 äº¿å‚æ•°â€æ—¶ï¼ŒæŒ‡çš„å°±æ˜¯è¿™äº›æ•°å­—ã€‚</p>
<p><strong>è‡³äº WQ å’Œ WK åˆ°åº•ä»£è¡¨ä»€ä¹ˆï¼Œæˆ‘ä»¬å…¶å®å¹¶ä¸å®Œå…¨æ¸…æ¥šã€‚éšç€æ¨¡å‹è®­ç»ƒæ”¶æ•›ï¼Œå®ƒä»¬æœ€ç»ˆä¼šå˜æˆæŸç§å¯¹ embedding çš„å˜æ¢æ–¹å¼ï¼Œæœ‰åŠ©äºæ¨¡å‹ç”Ÿæˆæ›´å¥½çš„è¾“å‡ºã€‚</strong> å®ƒä»¬å†…éƒ¨å¯èƒ½åœ¨åšä»»ä½•äº‹æƒ… â€”â€” è€Œå¦‚ä½•è§£é‡Šè¿™äº›çŸ©é˜µçš„å«ä¹‰ï¼Œç›®å‰ä»æ˜¯ä¸€ä¸ªå¼€æ”¾ä¸”æ´»è·ƒçš„ç ”ç©¶æ–¹å‘ã€‚</p>
<p>è¦å¾—åˆ° Q å’Œ Kï¼Œæˆ‘ä»¬åˆ†åˆ«å°† embeddings ä¸ WQ å’Œ WK ç›¸ä¹˜ã€‚WQ å’Œ WK çš„è¡Œæ•°å’Œåˆ—æ•°å§‹ç»ˆç­‰äº embedding çš„ç»´åº¦ï¼ˆæœ¬ä¾‹ä¸­ä¸º 3ï¼‰ã€‚è¿™é‡Œæˆ‘ä¸º WQ å’Œ WK é€‰å–äº†éšæœºå€¼ï¼Œå¹¶å°†ç»“æœå››èˆäº”å…¥åˆ°å°æ•°ç‚¹åä¸¤ä½ä»¥ä¾¿é˜…è¯»ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2e159dbbf21a43e493f9ea943ea4b1c7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQmFpaGFpX0lEUA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771565238&amp;x-signature=J8NZQfamfiu5kRPor3%2Bfi4SV9Eg%3D" alt="image.png" loading="lazy"/></p>
<p>å¾—åˆ°çš„ Q çŸ©é˜µæœ‰ 4 è¡Œ 3 åˆ—ã€‚4 è¡Œæ˜¯å› ä¸º embeddings çŸ©é˜µæœ‰ 4 è¡Œï¼ˆæ¯ä¸ª token ä¸€è¡Œï¼‰ï¼Œ3 åˆ—æ˜¯å› ä¸º WQ æœ‰ 3 åˆ—ï¼ˆæ¯ä¸ª embedding ç»´åº¦ä¸€åˆ—ï¼‰ã€‚</p>
<p>K çš„è®¡ç®—å®Œå…¨ç›¸åŒï¼Œåªæ˜¯å°† WQ æ¢æˆ WKã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b9175435a3134dd3ad535e8f2d17c353~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQmFpaGFpX0lEUA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771565238&amp;x-signature=%2B1QGrgQoo6JY1Fyc04q4Drb90r8%3D" alt="image.png" loading="lazy"/></p>
<p>Q å’Œ K éƒ½æ˜¯è¾“å…¥ embedding åˆ°æ–°çš„ n ç»´ç©ºé—´çš„"æŠ•å½±"ã€‚å®ƒä»¬ä¸æ˜¯åŸå§‹çš„ embeddingï¼Œä½†ç”±åŸå§‹ embeddings æ¨å¯¼è€Œæ¥ã€‚</p>
<p>ç„¶åï¼Œæˆ‘ä»¬å°† Q å’Œ K ç›¸ä¹˜ã€‚æˆ‘ä»¬å¯¹ K è¿›è¡Œâ€œè½¬ç½®â€ï¼Œä¹Ÿå°±æ˜¯æ²¿å¯¹è§’çº¿ç¿»è½¬ï¼Œä½¿å¾—å¾—åˆ°çš„çŸ©é˜µæ˜¯ä¸€ä¸ªæ–¹é˜µï¼Œå…¶è¡Œæ•°å’Œåˆ—æ•°éƒ½ç­‰äºè¾“å…¥æç¤ºè¯ä¸­çš„ token æ•°é‡ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f16cbd2a6a194a50893b8a520f633862~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQmFpaGFpX0lEUA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771565238&amp;x-signature=psRQUMRukT1tbagekOepQNBsXmY%3D" alt="image.png" loading="lazy"/></p>
<p><strong>è¿™äº› scores è¡¨ç¤ºæ¯ä¸ª token å¯¹ä¸‹ä¸€ä¸ªç”Ÿæˆ token çš„é‡è¦ç¨‹åº¦ã€‚</strong> å·¦ä¸Šè§’çš„æ•°å€¼ -0.08ï¼Œä»£è¡¨ â€œMaryâ€ å¯¹ â€œhadâ€ çš„é‡è¦æ€§ã€‚å†å¾€ä¸‹ä¸€è¡Œçš„ -0.10ï¼Œåˆ™ä»£è¡¨ â€œMaryâ€ å¯¹ â€œaâ€ çš„é‡è¦æ€§ã€‚åœ¨å±•ç¤ºå®ŒçŸ©é˜µè¿ç®—åï¼Œæˆ‘ä¼šç”¨å›¾ç¤ºæ›´ç›´è§‚åœ°è¯´æ˜è¿™ä¸€ç‚¹ã€‚æ¥ä¸‹æ¥çš„æ‰€æœ‰æ“ä½œï¼Œéƒ½æ˜¯ä¸ºäº†å°†è¿™äº› scores è½¬æ¢ä¸ºå¯ç”¨äºæ··åˆ embeddings çš„æƒé‡ã€‚</p>
<p>è¿™ä¸ª score çŸ©é˜µçš„ç¬¬ä¸€ä¸ªé—®é¢˜æ˜¯ï¼šå®ƒå…è®¸æœªæ¥çš„ token å½±å“è¿‡å»çš„ tokenã€‚åœ¨ç¬¬ä¸€è¡Œï¼Œæˆ‘ä»¬å”¯ä¸€çŸ¥é“çš„è¯æ˜¯"Mary"ï¼Œæ‰€ä»¥å®ƒåº”è¯¥æ˜¯å”¯ä¸€å¯¹ç”Ÿæˆ"had"æœ‰è´¡çŒ®çš„è¯ã€‚ç¬¬äºŒè¡Œä¹Ÿæ˜¯å¦‚æ­¤ï¼Œæˆ‘ä»¬çŸ¥é“"Mary"å’Œ"had"ï¼Œæ‰€ä»¥åªæœ‰è¿™ä¸¤ä¸ªè¯åº”è¯¥å¯¹ç”Ÿæˆ"a"æœ‰è´¡çŒ®ï¼Œä¾æ­¤ç±»æ¨ã€‚</p>
<p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯¹çŸ©é˜µåº”ç”¨ä¸€ä¸ªä¸‰è§’å½¢æ©ç ï¼ˆtriangular maskï¼‰ï¼Œå°†æœªæ¥ token å¯¹åº”çš„ä½ç½®ç½®é›¶ã€‚ä¸è¿‡ï¼Œæˆ‘ä»¬å¹¶ä¸æ˜¯çœŸçš„è®¾ä¸º 0ï¼Œè€Œæ˜¯è®¾ä¸ºè´Ÿæ— ç©·ï¼ˆnegative infinityï¼‰ â€”â€” åŸå› ç¨åè§£é‡Šã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a1d01707f9c044bfad12682ae035fe81~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQmFpaGFpX0lEUA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771565238&amp;x-signature=wkeNlMCQHEINeDc1SyHYhjM3C3Y%3D" alt="image.png" loading="lazy"/></p>
<p>ç¬¬äºŒä¸ªé—®é¢˜æ˜¯ï¼Œè¿™äº› scores æ˜¯ä»»æ„çš„æ•°å€¼ã€‚å¦‚æœå®ƒä»¬èƒ½å˜æˆä¸€ä¸ªæ¯è¡Œä¹‹å’Œç­‰äº 1 çš„æ¦‚ç‡åˆ†å¸ƒï¼Œå¯¹æˆ‘ä»¬æ¥è¯´ä¼šæ›´æœ‰ç”¨ã€‚è¿™æ­£æ˜¯ softmax å‡½æ•°çš„ä½œç”¨ã€‚softmax å…·ä½“å¦‚ä½•è¿ä½œçš„ç»†èŠ‚å¹¶ä¸é‡è¦ â€”â€” å®ƒæ¯”ç®€å•çš„â€œå°†æ¯ä¸ªæ•°å­—é™¤ä»¥è¯¥è¡Œæ€»å’Œâ€ç¨å¤æ‚ä¸€ç‚¹ï¼Œä½†ç»“æœæ˜¯ä¸€æ ·çš„ï¼šæ¯è¡Œä¹‹å’Œä¸º 1ï¼Œä¸”æ¯ä¸ªæ•°å­—éƒ½åœ¨ 0 å’Œ 1 ä¹‹é—´ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3277ecdbcf314dd6b331c68e31beaace~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQmFpaGFpX0lEUA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771565238&amp;x-signature=HB9xKE8kTusGY5oYNBPk92E%2BmoA%3D" alt="image.png" loading="lazy"/></p>
<p>ä¸ºäº†è§£é‡Šä¸ºä»€ä¹ˆç”¨è´Ÿæ— ç©·ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ª softmax çš„ä»£ç å®ç°ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">function softmax(matrix){
returnÂ matrix.map(<span class="hljs-attr">row</span>Â =&gt;{
Â const <span class="hljs-attr">exps</span>Â =Â row.map(xÂ =&gt;Â Math.exp(x))<span class="hljs-comment">;</span>
Â const <span class="hljs-attr">sumExps</span>Â =Â exps.reduce((a,Â b)=&gt;Â aÂ +Â b,<span class="hljs-number">0</span>)<span class="hljs-comment">;</span>
returnÂ exps.map(<span class="hljs-attr">exp</span>Â =&gt;Â expÂ /Â sumExps)<span class="hljs-comment">;</span>
})<span class="hljs-comment">;</span>
}
</code></pre>
<p>å®ƒå¹¶ä¸æ˜¯ç®€å•åœ°æŠŠæ¯ä¸ªæ•°åŠ èµ·æ¥å†é™¤ä»¥æ€»å’Œï¼Œè€Œæ˜¯å…ˆå¯¹æ¯ä¸ªæ•°å€¼å– Math.expï¼Œä¹Ÿå°±æ˜¯è®¡ç®— e^xã€‚å¦‚æœæˆ‘ä»¬ç”¨ 0 ä»£æ›¿è´Ÿæ— ç©·ï¼ŒMath.exp(0) === 1ï¼Œè¿™äº›è¢«å±è”½çš„ä½ç½®ä»ç„¶ä¼šäº§ç”Ÿéé›¶æƒé‡ã€‚è€Œ Math.exp(-Infinity) æ˜¯ 0ï¼Œè¿™æ­£æ˜¯æˆ‘ä»¬æƒ³è¦çš„ã€‚</p>
<p>ä¸‹é¢çš„å›¾ç‰‡å±•ç¤ºäº†æç¤ºè¯"Mary had a little"çš„ attention æƒé‡ç¤ºä¾‹ã€‚</p>
<p>è¿™äº›æƒé‡ä¸ä¸Šé¢çš„è®¡ç®—ç»“æœä¸åŒ¹é…ï¼Œå› ä¸ºæˆ‘æ˜¯ä» Transformer Explained ç½‘ç«™[7]ä¸Šè¿è¡Œçš„ GPT-2 æ¨¡å‹ä¸­æå–çš„ã€‚æ‰€ä»¥è¿™äº›æ˜¯ä¸€ä¸ªçœŸå®æ¨¡å‹ï¼ˆå°½ç®¡æ˜¯è€æ¨¡å‹ï¼‰çš„çœŸå®æƒé‡ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/97f4cdd50c414f2eb49315e76fba2187~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQmFpaGFpX0lEUA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771565238&amp;x-signature=x6%2Bbv%2FGgwA5sYI5WBpjEwVxJ2Rk%3D" alt="image.png" loading="lazy"/></p>
<p>ç¬¬ä¸€è¡Œåªæœ‰"Mary"ï¼Œå› æ­¤Maryå¯¹"had"çš„ç”Ÿæˆçš„è´¡çŒ®æ˜¯100%ã€‚ç„¶ååœ¨ç¬¬äºŒè¡Œï¼Œ"Mary"è´¡çŒ®äº†79%ï¼Œè€Œ"had"è´¡çŒ®äº†21%ç”¨äºç”Ÿæˆ"a"ï¼Œä»¥æ­¤ç±»æ¨ã€‚LLM è®¤ä¸ºè¿™ä¸ªå¥å­ä¸­æœ€é‡è¦çš„è¯æ˜¯ â€œMaryâ€ï¼Œè¿™ä¸€ç‚¹å¹¶ä¸æ„å¤–â€”â€”ä»æ¯ä¸€è¡Œä¸­ â€œMaryâ€ éƒ½æ‹¥æœ‰æœ€é«˜æƒé‡å°±èƒ½çœ‹å‡ºã€‚å¦‚æœæˆ‘è®©ä½ è¡¥å…¨"Jessica had a little"è¿™ä¸ªå¥å­ï¼Œä½ ä¸å¤ªå¯èƒ½é€‰æ‹©"lamb"ã€‚</p>
<p>æ¥ä¸‹æ¥å°±åªå‰©ä¸‹å¯¹ token embeddings è¿›è¡ŒåŠ æƒæ··åˆäº†ï¼Œè°¢å¤©è°¢åœ°ï¼Œè¿™ä¸€æ­¥æ¯”è®¡ç®—æƒé‡è¦ç®€å•å¾—å¤šã€‚</p>
<pre><code class="hljs language-vbnet" lang="vbnet">//Â Learned during training,Â doesn<span class="hljs-comment">'t changeÂ </span>
//Â during inference.Â ThisÂ <span class="hljs-built_in">is</span>Â also an n*n matrix,
//Â <span class="hljs-keyword">where</span> nÂ <span class="hljs-built_in">is</span>Â the number <span class="hljs-keyword">of</span> embedding dimensions.
<span class="hljs-keyword">const</span> WVÂ =[[...],[...],...];
Â 
<span class="hljs-keyword">function</span> attention(embeddings){
Â <span class="hljs-keyword">const</span> VÂ =Â embeddingsÂ *Â WV;
//Â ThisÂ <span class="hljs-built_in">is</span>Â the `attentionWeights` <span class="hljs-keyword">function</span>Â <span class="hljs-keyword">from</span>
//Â the section above.Â We<span class="hljs-comment">'re wrapping itÂ in</span>
//Â this `attention` <span class="hljs-keyword">function</span>.
Â <span class="hljs-keyword">const</span> weightsÂ =Â attentionWeights(embeddings);
<span class="hljs-keyword">return</span>Â weightsÂ *Â V;
}
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3be2d52478db48c3ad24342c21415e47~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQmFpaGFpX0lEUA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771565238&amp;x-signature=2yUvvRSL5re74%2BV7fY2%2FMODfYwA%3D" alt="image.png" loading="lazy"/></p>
<p>ä¸ºä»€ä¹ˆä¸ç›´æ¥æ··åˆåŸå§‹ embeddingsï¼Ÿ</p>
<p>å½“æˆ‘ä»¬é€šè¿‡ Q å’Œ K ç›¸ä¹˜å¾—åˆ° attention æƒé‡æ—¶ï¼Œæˆ‘ä»¬å®Œå…¨æ˜¯åœ¨è¡¡é‡ token ä¹‹é—´çš„ç›¸å…³æ€§ã€‚Embeddings ç¼–ç äº† token çš„å„ç§è¯­ä¹‰ä¿¡æ¯ â€”â€” æŸä¸€ç»´å¯èƒ½è¡¨ç¤ºâ€œé¢œè‰²â€ï¼Œå¦ä¸€ç»´è¡¨ç¤ºâ€œå¤§å°â€ï¼Œå†ä¸€ç»´è¡¨ç¤ºâ€œç¤¼è²Œ/ç²—é²ç¨‹åº¦â€ï¼Œç­‰ç­‰ã€‚è€Œæƒé‡æ˜¯é€šè¿‡ç›¸ä¼¼åº¦æ¥åˆ¤æ–­å“ªäº› token æ›´ç›¸å…³ã€‚</p>
<p>WV çš„ä½œç”¨ï¼Œåˆ™æ˜¯è®©æ¨¡å‹å†³å®šåœ¨æ··åˆæ—¶ä¿ç•™å“ªäº›ç»´åº¦çš„ä¿¡æ¯ã€‚</p>
<p>ä»¥å¥å­ â€œMary had a littleâ€ ä¸ºä¾‹ï¼Œè¿™é‡Œå…³äº â€œMaryâ€ æœ€é‡è¦çš„ä¿¡æ¯æ˜¯â€œäººåâ€ã€‚æ¨¡å‹åœ¨è®­ç»ƒä¸­å¯èƒ½ä¹Ÿå­¦åˆ°äº†å¾ˆå¤šå…³äº â€œBloody Maryï¼ˆè¡€è…¥ç›ä¸½é¸¡å°¾é…’ï¼‰â€ æˆ– â€œMary Queen of Scotsï¼ˆè‹æ ¼å…°å¥³ç‹ç›ä¸½ï¼‰â€ çš„çŸ¥è¯†ï¼Œä½†è¿™äº›ä¸è¿™é¦–ç«¥è°£æ— å…³ï¼Œå¦‚æœå¸¦å…¥åç»­è®¡ç®—åè€Œä¼šå¼•å…¥å™ªå£°ã€‚å› æ­¤ï¼ŒWV å…è®¸æ¨¡å‹åœ¨æ··åˆ embeddings ä¹‹å‰ï¼Œå…ˆè¿‡æ»¤æ‰ä¸ç›¸å…³çš„ç‰¹å¾ã€‚</p>
<p>æ¥ç€ï¼Œæˆ‘ä»¬å°†ç”Ÿæˆçš„æƒé‡ä¸ V ç›¸ä¹˜ï¼Œè¾“å‡ºä¸€ç»„æ–°çš„ embeddingsï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/33fb977942b747efab4bd5d4a1c10f14~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQmFpaGFpX0lEUA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771565238&amp;x-signature=pS9CPjaJIGNm7kDP2Pb4drNJ%2F00%3D" alt="image.png" loading="lazy"/></p>
<p><strong>Attention æœºåˆ¶çš„æœ€ç»ˆè¾“å‡ºï¼Œå°±æ˜¯è¿™ä¸ªè¾“å‡ºçŸ©é˜µçš„æœ€åä¸€è¡Œã€‚</strong> é€šè¿‡ attention è¿‡ç¨‹ï¼Œå‰é¢æ‰€æœ‰ token çš„ä¸Šä¸‹æ–‡ä¿¡æ¯éƒ½è¢«èåˆè¿›äº†è¿™ä¸€è¡Œã€‚ä½†è¦æ³¨æ„ï¼šä¸ºäº†å¾—åˆ°æœ€åä¸€è¡Œï¼Œå‰é¢æ‰€æœ‰è¡Œéƒ½å¿…é¡»è¢«è®¡ç®—å‡ºæ¥ã€‚</p>
<p>æ€»è€Œè¨€ä¹‹ï¼Œè¾“å…¥æ˜¯ä¸€ç»„ embeddingsï¼Œè¾“å‡ºæ˜¯ä¸€ä¸ªæ–°çš„ embeddingã€‚Attention æœºåˆ¶é€šè¿‡å¤§é‡ç²¾ç»†çš„æ•°å­¦è¿ç®—ï¼ŒæŒ‰ç…§è®­ç»ƒä¸­å­¦åˆ°çš„ WQã€WK å’Œ WV çŸ©é˜µæ‰€å†³å®šçš„é‡è¦æ€§æ¯”ä¾‹ï¼Œå°†å„ä¸ª token çš„ä¿¡æ¯è¿›è¡Œäº†åŠ æƒèåˆã€‚æ­£æ˜¯è¿™ä¸€æœºåˆ¶ï¼Œè®© LLM èƒ½å¤Ÿç†è§£åœ¨å…¶ä¸Šä¸‹æ–‡çª—å£ä¸­â€œä»€ä¹ˆå†…å®¹é‡è¦ï¼Œä»¥åŠä¸ºä»€ä¹ˆé‡è¦â€ã€‚</p>
<p>ç°åœ¨ï¼Œæˆ‘ä»¬ç»ˆäºæŒæ¡äº†è®¨è®º caching æ‰€éœ€çš„ä¸€åˆ‡çŸ¥è¯†ã€‚</p>
<p>å½“ç„¶ï¼ŒAttention è¿˜æœ‰æ›´å¤šæŠ€æœ¯ç»†èŠ‚</p>
<p>æˆ‘åœ¨æœ¬æ–‡å±•ç¤ºçš„æ˜¯ä¸€ä¸ªç®€åŒ–ç‰ˆçš„ attentionï¼Œç›®çš„æ˜¯çªå‡ºä¸ prompt caching æœ€ç›¸å…³çš„æ ¸å¿ƒéƒ¨åˆ†ã€‚å®é™…ä¸­çš„ attention æœºåˆ¶æ›´ä¸ºå¤æ‚ã€‚å¦‚æœä½ å¸Œæœ›æ·±å…¥äº†è§£æ›´å¤šæŠ€æœ¯ç»†èŠ‚ï¼Œæˆ‘æ¨è 3blue1brown å…³äº attention çš„è§†é¢‘[8]ã€‚</p>
<h2 data-id="heading-4"><strong>05 Prompt caching</strong></h2>
<p>æˆ‘ä»¬å†æ¥çœ‹ä¸€éä¸Šé¢çš„ç½‘æ ¼ï¼Œä½†è¿™æ¬¡ä¼šå±•ç¤ºåœ¨æ¨ç†å¾ªç¯ä¸­æ¯ç”Ÿæˆä¸€ä¸ªæ–° token æ—¶ï¼Œå®ƒæ˜¯å¦‚ä½•é€æ­¥å¡«å……çš„ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bd098773c4594486abaaf3d19da88503~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQmFpaGFpX0lEUA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771565238&amp;x-signature=6Xnizr8khWVeWGjfnV00BU1s758%3D" alt="image.png" loading="lazy"/></p>
<p>æ¯æ¬¡ç”Ÿæˆæ–° token æ—¶ï¼Œéƒ½ä¼šå°†å…¶è¿½åŠ åˆ°è¾“å…¥ä¸­ï¼Œå¹¶é‡æ–°å®Œæ•´å¤„ç†æ•´ä¸ª promptã€‚ä½†ä»”ç»†è§‚å¯Ÿï¼šä¹‹å‰è®¡ç®—å‡ºçš„æƒé‡ä»æœªæ”¹å˜ã€‚ç¬¬äºŒè¡Œå§‹ç»ˆæ˜¯ 0.79 å’Œ 0.21ï¼Œç¬¬ä¸‰è¡Œå§‹ç»ˆæ˜¯ 0.81ã€0.13ã€0.06ã€‚æˆ‘ä»¬å…¶å®åœ¨ä¸æ–­é‡å¤å¤§é‡ä¸å¿…è¦çš„è®¡ç®—ã€‚å¦‚æœä½ åˆšåˆšæ‰å¤„ç†å®Œ â€œMary had aâ€ï¼Œé‚£ä¹ˆåœ¨ç”Ÿæˆä¸‹ä¸€ä¸ª token æ—¶ï¼Œå¯¹ â€œMary had a littleâ€ ä¸­å‰ä¸‰ä¸ª token çš„å¤§éƒ¨åˆ†çŸ©é˜µè¿ç®—å…¶å®æ˜¯å†—ä½™çš„ â€”â€” è€Œè¿™æ­£æ˜¯ LLM æ¨ç†å¾ªç¯çš„é»˜è®¤è¡Œä¸ºã€‚</p>
<p>é€šè¿‡ä»¥ä¸‹ä¸¤ä¸ªæ”¹åŠ¨ï¼Œå°±èƒ½é¿å…è¿™äº›é‡å¤è®¡ç®—ï¼š</p>
<ul>
<li><strong>åœ¨æ¯æ¬¡è¿­ä»£ä¸­ç¼“å­˜ K å’Œ V çŸ©é˜µã€‚</strong></li>
<li><strong>åªå°†æœ€æ–° token çš„ embeddings è¾“å…¥æ¨¡å‹ï¼Œè€Œä¸æ˜¯æ•´ä¸ª promptã€‚</strong></li>
</ul>
<p>ç°åœ¨æˆ‘ä»¬å†æ¬¡èµ°ä¸€éçŸ©é˜µè¿ç®—è¿‡ç¨‹ï¼Œä½†è¿™ä¸€æ¬¡ï¼šå‰ 4 ä¸ª token çš„ K å’Œ V çŸ©é˜µå·²è¢«ç¼“å­˜ï¼Œæˆ‘ä»¬åªä¼ å…¥ä¸€ä¸ªæ–° token çš„ embeddingsã€‚</p>
<p>æ˜¯çš„ï¼Œåˆè¦é¢å¯¹çŸ©é˜µè¿ç®—äº†ï¼ŒæŠ±æ­‰ï¼ä¸è¿‡å†…å®¹å’Œä¹‹å‰åŸºæœ¬ä¸€è‡´ï¼Œæˆ‘ä»¬ä¼šå¿«é€Ÿè¿‡ä¸€éã€‚</p>
<p>è®¡ç®—æ–°çš„ Q æ—¶ï¼Œè¾“å‡ºåªæœ‰ä¸€è¡Œã€‚WQ å’Œä¹‹å‰ä¸€æ ·ï¼Œæ²¡æœ‰å˜åŒ–ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/534869cbd4814219923cc9154703a6ba~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQmFpaGFpX0lEUA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771565238&amp;x-signature=yD%2FZ1XvqmZFawz%2FnANDnmqKyrxQ%3D" alt="image.png" loading="lazy"/></p>
<p>æ¥ç€ï¼Œè®¡ç®—æ–°çš„ K ä¹ŸåŒæ ·åªè¾“å‡ºä¸€è¡Œï¼Œè€Œ WK ä¹Ÿå’Œä¹‹å‰ä¸€æ ·ä¿æŒä¸å˜ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c4b2e3118920486495c4b0bd227b946e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQmFpaGFpX0lEUA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771565238&amp;x-signature=rnR12gAjn75v2iHrtxQpW2RYDPE%3D" alt="image.png" loading="lazy"/></p>
<p>ä½†éšåæˆ‘ä»¬å°†è¿™ä¸€æ–°è¡Œè¿½åŠ åˆ°å‰ä¸€æ¬¡è¿­ä»£ç¼“å­˜çš„ 4 è¡Œ K çŸ©é˜µä¹‹åï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/95e7ec0e039e434fa75df74e6904d7cb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQmFpaGFpX0lEUA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771565238&amp;x-signature=N%2B%2FjErKQgdBZNc809KbjSJDZ0wI%3D" alt="image.png" loading="lazy"/></p>
<p>äºæ˜¯ç°åœ¨æˆ‘ä»¬æ‹¥æœ‰äº†æç¤ºè¯ä¸­æ‰€æœ‰ token çš„ K çŸ©é˜µï¼Œä½†æˆ‘ä»¬åªéœ€è¦è®¡ç®—å®ƒçš„æœ€åä¸€è¡Œã€‚</p>
<p>æˆ‘ä»¬ç»§ç»­ä»¥è¿™ç§æ–¹å¼æ¥è·å–æ–°çš„ scoreï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1cee05647e3c4fc8a4750770e2ea0fe1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQmFpaGFpX0lEUA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771565238&amp;x-signature=ycfCSP99sq2Sx3IDun%2FeiB8DeUU%3D" alt="image.png" loading="lazy"/></p>
<p>ä»¥åŠæ–°çš„çš„ weightsï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6633a0b02c5441d39dfe5f0ecf6169f3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQmFpaGFpX0lEUA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771565238&amp;x-signature=uuBcj%2FAsiYDVlAzGjPWUtDmNDt0%3D" alt="image.png" loading="lazy"/></p>
<p>å…¨ç¨‹æˆ‘ä»¬åªè®¡ç®—å¿…éœ€çš„éƒ¨åˆ†ï¼Œå®Œå…¨ä¸éœ€è¦å¯¹æ—§å€¼è¿›è¡Œä»»ä½•é‡æ–°è®¡ç®—ã€‚è·å– V çš„æ–°ä¸€è¡Œæ—¶ä¹Ÿæ˜¯åŒæ ·çš„åšæ³•ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/502a7fd0566f417c800bbfd161d43fb6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQmFpaGFpX0lEUA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771565238&amp;x-signature=1vh%2BWgC6qYbc5z9SwbJWRCWe13s%3D" alt="image.png" loading="lazy"/></p>
<p>ç„¶åå°†å…¶è¿½åŠ åˆ°æˆ‘ä»¬ç¼“å­˜çš„ V ä¸­ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f94842f7ce014c74a28953735532c2cd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQmFpaGFpX0lEUA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771565238&amp;x-signature=lMmh5Eso7c2PCvVC2igKDhSb4YY%3D" alt="image.png" loading="lazy"/></p>
<p>æœ€åï¼Œæˆ‘ä»¬å°†æ–°çš„æƒé‡ä¸æ–°çš„ V ç›¸ä¹˜ï¼Œå¾—åˆ°æœ€ç»ˆçš„æ–° embeddingsï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/adf75bd238f5464a848ba387b856bf5e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQmFpaGFpX0lEUA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771565238&amp;x-signature=%2BwGCAkxH2%2B14Ww%2BgefkR1I4a%2FYk%3D" alt="image.png" loading="lazy"/></p>
<p>æˆ‘ä»¬åªéœ€è¦è¿™å•ç‹¬ä¸€è¡Œæ–°çš„ embeddingã€‚å¾—ç›Šäºç¼“å­˜çš„ K å’Œ Vï¼Œå…ˆå‰æ‰€æœ‰ token çš„ä¸Šä¸‹æ–‡ä¿¡æ¯éƒ½å·²è¢«èå…¥å…¶ä¸­ã€‚</p>
<p><strong>è¢«ç¼“å­˜çš„æ•°æ®æ˜¯ embeddings * WK å’Œ embeddings * WV çš„ç»“æœï¼Œä¹Ÿå°±æ˜¯ K å’Œ Vã€‚</strong> å› æ­¤ï¼Œæç¤ºè¯ç¼“å­˜é€šå¸¸è¢«ç§°ä¸º"KV caching"ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/411d6b1a3a20496bba649b733f64d87a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQmFpaGFpX0lEUA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771565238&amp;x-signature=hSH8tERZlEuqQqKjlZpj4X8acnE%3D" alt="image.png" loading="lazy"/></p>
<p>å°±æ˜¯è¿™æ ·ï¼Œä¸Šé¢é‚£äº› K å’Œ V çŸ©é˜µï¼Œå°±æ˜¯æœåŠ¡æä¾›å•†ä¿å­˜åœ¨ä»–ä»¬å·¨å¤§æ•°æ®ä¸­å¿ƒé‡Œçš„ 1 å’Œ 0ï¼Œç”¨æ¥ç»™æˆ‘ä»¬æä¾›ä¸€æŠ˜çš„ token æˆæœ¬å’Œæ›´å¿«çš„å“åº”ã€‚</p>
<p>æœåŠ¡æä¾›å•†åœ¨è¯·æ±‚å‘å‡ºåï¼Œä¼šå°†æ¯ä¸ªæç¤ºè¯çš„è¿™äº›çŸ©é˜µä¿ç•™ 5-10 åˆ†é’Ÿï¼Œå¦‚æœä½ å‘é€ä¸€ä¸ªä»¥ç›¸åŒæç¤ºè¯å¼€å¤´çš„æ–°è¯·æ±‚ï¼Œä»–ä»¬å°±ä¼šå¤ç”¨ç¼“å­˜çš„ K å’Œ Vï¼Œè€Œä¸æ˜¯é‡æ–°è®¡ç®—å®ƒä»¬ã€‚<strong>ç¼“å­˜åŒ¹é…ä¸éœ€è¦å®Œå…¨ä¸€è‡´ â€”â€” å³ä½¿æ–° prompt åªå’Œç¼“å­˜ä¸­çš„æŸä¸€éƒ¨åˆ†å¼€å¤´ç›¸åŒï¼Œä¹Ÿå¯ä»¥å¤ç”¨é‚£éƒ¨åˆ†å·²ç¼“å­˜çš„è®¡ç®—ç»“æœï¼Œè€Œä¸å¿…æ•´ä¸ª prompt å®Œå…¨åŒ¹é…ã€‚</strong></p>
<p>OpenAI å’Œ Anthropic çš„ç¼“å­˜æœºåˆ¶æˆªç„¶ä¸åŒã€‚<strong>OpenAI å®Œå…¨è‡ªåŠ¨å¤„ç†ï¼Œä¼šå°½å¯èƒ½å°è¯•å°†è¯·æ±‚è·¯ç”±åˆ°ç¼“å­˜æ¡ç›®ã€‚</strong> åœ¨æˆ‘çš„å®éªŒä¸­ï¼Œé€šè¿‡å‘é€è¯·æ±‚ç„¶åç«‹å³é‡å‘ï¼Œç¼“å­˜å‘½ä¸­ç‡çº¦ä¸º 50%ã€‚è€ƒè™‘åˆ°é•¿ä¸Šä¸‹æ–‡çª—å£çš„é¦–å­—èŠ‚å»¶è¿Ÿï¼ˆtime-to-first-byteï¼‰å¯èƒ½å¾ˆé•¿ï¼Œè¿™ç§è‡ªåŠ¨ç¼“å­˜å¯èƒ½å¯¼è‡´æ€§èƒ½è¡¨ç°ä¸ç¨³å®šã€‚</p>
<p><strong>Anthropic åˆ™èµ‹äºˆä½ æ›´å¤šæ§åˆ¶æƒï¼Œè®©ä½ å†³å®šä½•æ—¶ç¼“å­˜ä»¥åŠç¼“å­˜å¤šä¹…ã€‚</strong> ä½ éœ€è¦ä¸ºè¿™é¡¹ç‰¹æƒä»˜è´¹ï¼Œä½†åœ¨æˆ‘è¿›è¡Œçš„å®éªŒä¸­ï¼Œå½“æˆ‘ä»¬è¦æ±‚ Anthropic ç¼“å­˜æŸä¸ªæç¤ºè¯æ—¶ï¼Œä»–ä»¬ä¼š 100% åœ°å°†è¯·æ±‚è·¯ç”±åˆ°ç¼“å­˜æ¡ç›®ã€‚å› æ­¤ï¼Œå¦‚æœä½ çš„åº”ç”¨æ¶‰åŠé•¿ä¸Šä¸‹æ–‡çª—å£ï¼Œå¹¶ä¸”éœ€è¦å¯é¢„æµ‹çš„å»¶è¿Ÿï¼ŒAnthropic å¯èƒ½æ˜¯æ›´åˆé€‚çš„é€‰æ‹©ã€‚</p>
<p>ç­‰ç­‰ï¼Œé‚£ temperature è¿™äº›å‚æ•°ä¼šå½±å“æç¤ºè¯ç¼“å­˜å—ï¼Ÿ</p>
<p>LLM æä¾›å•†æä¾›äº†å¤šç§å‚æ•°æ¥æ§åˆ¶æ¨¡å‹è¾“å‡ºçš„éšæœºæ€§ï¼Œå¸¸è§çš„æœ‰ temperatureã€top_p å’Œ top_kã€‚è¿™äº›å‚æ•°éƒ½ä½œç”¨äºæ¨ç†å¾ªç¯çš„æœ€åä¸€æ­¥ï¼Œå³æ¨¡å‹æ ¹æ®å®ƒä¸ºè¯è¡¨ä¸­æ¯ä¸ª token åˆ†é…çš„æ¦‚ç‡æ¥é€‰å– tokenã€‚è¿™å‘ç”Ÿåœ¨ attention æœºåˆ¶äº§ç”Ÿæœ€ç»ˆ embedding ä¹‹åï¼Œå› æ­¤æç¤ºè¯ç¼“å­˜ä¸å—è¿™äº›å‚æ•°å½±å“ã€‚ä½ å¯ä»¥éšæ„è°ƒæ•´å®ƒä»¬ï¼Œè€Œä¸ç”¨æ‹…å¿ƒå¯¼è‡´ç¼“å­˜çš„æç¤ºè¯å¤±æ•ˆã€‚</p>
<h2 data-id="heading-5"><strong>è‡´è°¢</strong></h2>
<p>ä¸ºäº†å­¦ä¹ æ’°å†™æœ¬æ–‡æ‰€éœ€çš„å…¨éƒ¨çŸ¥è¯†ï¼Œæˆ‘å¦‚é¥¥ä¼¼æ¸´åœ°é˜…è¯»äº†å¤§é‡ä¼˜è´¨å†…å®¹ï¼Œä»¥ä¸‹æ˜¯æˆ‘è®¤ä¸ºå¯¹æˆ‘æœ€æœ‰å¸®åŠ©çš„ï¼š</p>
<ul>
<li>Build a Large Language Model (From Scratch)[9]Â by Sebastian Raschka[10].</li>
<li>Neural Networks: Zero to Hero[11]Â by Andrej Karpathy[12].</li>
<li>Neural Networks video course[13]Â by 3blue1brown[14].</li>
<li>Transformer Explainer[15]Â by Aeree Cho[16]Â et al.</li>
</ul>
<p>å¦‚æœä½ å–œæ¬¢è¿™ç¯‡æ–‡ç« ï¼Œä½ ä¸€å®šä¼šå–œæ¬¢è¿™äº›èµ„æºã€‚</p>
<p><strong>END</strong></p>
<p><strong>æœ¬æœŸäº’åŠ¨å†…å®¹ ğŸ»</strong></p>
<p><strong>â“æŒ‰ç…§æ–‡ä¸­é€»è¾‘ï¼Œç¼“å­˜æœ¬è´¨æ˜¯æ‹¿å†…å­˜æ¢è®¡ç®—ã€‚å½“ä½ å¤„ç†10ä¸‡Tokenä»¥ä¸Šçš„è¶…é•¿ä¸Šä¸‹æ–‡æ—¶ï¼Œæœ‰æ²¡æœ‰ä¼°ç®—è¿‡KV Cacheçš„å†…å­˜å ç”¨æˆæœ¬ vs é‡æ–°è®¡ç®—çš„APIæˆæœ¬ï¼Ÿåœ¨ä»€ä¹ˆä¸´ç•Œç‚¹ä½ ä¼šé€‰æ‹©æ”¾å¼ƒç¼“å­˜ï¼Ÿ</strong></p>
<p><strong>æ–‡ä¸­é“¾æ¥</strong></p>
<p>[1]<a href="https://link.juejin.cn?target=https%3A%2F%2Fclaude.com%2Fblog%2Fprompt-caching" target="_blank" title="https://claude.com/blog/prompt-caching" ref="nofollow noopener noreferrer">claude.com/blog/promptâ€¦</a></p>
<p>[2]<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.claude.com%2Fen%2Fdocs%2Fbuild-with-claude%2Fprompt-caching" target="_blank" title="https://docs.claude.com/en/docs/build-with-claude/prompt-caching" ref="nofollow noopener noreferrer">docs.claude.com/en/docs/buiâ€¦</a></p>
<p>[3]<a href="https://link.juejin.cn?target=https%3A%2F%2Fplatform.openai.com%2Fdocs%2Fguides%2Fprompt-caching" target="_blank" title="https://platform.openai.com/docs/guides/prompt-caching" ref="nofollow noopener noreferrer">platform.openai.com/docs/guidesâ€¦</a></p>
<p>[4]<a href="https://link.juejin.cn?target=https%3A%2F%2Fmagazine.sebastianraschka.com%2F" target="_blank" title="https://magazine.sebastianraschka.com/" ref="nofollow noopener noreferrer">magazine.sebastianraschka.com/</a></p>
<p>[5]<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Frasbt%2FLLMs-from-scratch%2Fblob%2Fmain%2Fch05%2F13_olmo3%2Fstandalone-olmo3.ipynb" target="_blank" title="https://github.com/rasbt/LLMs-from-scratch/blob/main/ch05/13_olmo3/standalone-olmo3.ipynb" ref="nofollow noopener noreferrer">github.com/rasbt/LLMs-â€¦</a></p>
<p>[6]<a href="https://link.juejin.cn?target=https%3A%2F%2Ftiktokenizer.vercel.app%2F" target="_blank" title="https://tiktokenizer.vercel.app/" ref="nofollow noopener noreferrer">tiktokenizer.vercel.app/</a></p>
<p>[7]<a href="https://link.juejin.cn?target=https%3A%2F%2Fpoloclub.github.io%2Ftransformer-explainer%2F" target="_blank" title="https://poloclub.github.io/transformer-explainer/" ref="nofollow noopener noreferrer">poloclub.github.io/transformerâ€¦</a></p>
<p>[8]<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3DeMlx5fFNoYc" target="_blank" title="https://www.youtube.com/watch?v=eMlx5fFNoYc" ref="nofollow noopener noreferrer">www.youtube.com/watch?v=eMlâ€¦</a></p>
<p>[9]<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.oreilly.com%2Flibrary%2Fview%2Fbuild-a-large%2F9781633437166%2F" target="_blank" title="https://www.oreilly.com/library/view/build-a-large/9781633437166/" ref="nofollow noopener noreferrer">www.oreilly.com/library/vieâ€¦</a></p>
<p>[10]<a href="https://link.juejin.cn?target=https%3A%2F%2Fsebastianraschka.com%2F" target="_blank" title="https://sebastianraschka.com/" ref="nofollow noopener noreferrer">sebastianraschka.com/</a></p>
<p>[11]<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3DVMj-3S1tku0%26list%3DPLAqhIrjkxbuWI23v9cThsA9GvCAUhRvKZ" target="_blank" title="https://www.youtube.com/watch?v=VMj-3S1tku0&amp;list=PLAqhIrjkxbuWI23v9cThsA9GvCAUhRvKZ" ref="nofollow noopener noreferrer">www.youtube.com/watch?v=VMjâ€¦</a></p>
<p>[12]<a href="https://link.juejin.cn?target=https%3A%2F%2Fkarpathy.ai%2F" target="_blank" title="https://karpathy.ai/" ref="nofollow noopener noreferrer">karpathy.ai/</a></p>
<p>[13]<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.youtube.com%2Fplaylist%3Flist%3DPLZHQObOWTQDNU6R1_67000Dx_ZCJB-3pi" target="_blank" title="https://www.youtube.com/playlist?list=PLZHQObOWTQDNU6R1_67000Dx_ZCJB-3pi" ref="nofollow noopener noreferrer">www.youtube.com/playlist?liâ€¦</a></p>
<p>[14]<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.youtube.com%2F%403blue1brown" target="_blank" title="https://www.youtube.com/@3blue1brown" ref="nofollow noopener noreferrer">www.youtube.com/@3blue1browâ€¦</a></p>
<p>[15]<a href="https://link.juejin.cn?target=https%3A%2F%2Fpoloclub.github.io%2Ftransformer-explainer%2F" target="_blank" title="https://poloclub.github.io/transformer-explainer/" ref="nofollow noopener noreferrer">poloclub.github.io/transformerâ€¦</a></p>
<p>[16]<a href="https://link.juejin.cn?target=https%3A%2F%2Faereeeee.github.io%2F" target="_blank" title="https://aereeeee.github.io/" ref="nofollow noopener noreferrer">aereeeee.github.io/</a></p>
<p><strong>æœ¬æ–‡ç»åŸä½œè€…æˆæƒï¼Œç”±</strong> <strong>Baihai IDP</strong> <strong>ç¼–è¯‘ã€‚å¦‚éœ€è½¬è½½è¯‘æ–‡ï¼Œè¯·è”ç³»è·å–æˆæƒã€‚</strong></p>
<p><strong>åŸæ–‡é“¾æ¥ï¼š</strong></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fngrok.com%2Fblog%2Fprompt-caching%2F" target="_blank" title="https://ngrok.com/blog/prompt-caching/" ref="nofollow noopener noreferrer">ngrok.com/blog/promptâ€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‘Šåˆ« JSON.parse(JSON.stringify()) â€” åŸç”Ÿæ·±æ‹·è´ structuredClone]]></title>    <link>https://juejin.cn/post/7605810996125286434</link>    <guid>https://juejin.cn/post/7605810996125286434</guid>    <pubDate>2026-02-13T03:40:38.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605810996125286434" data-draft-id="7605542907119124532" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‘Šåˆ« JSON.parse(JSON.stringify()) â€” åŸç”Ÿæ·±æ‹·è´ structuredClone"/> <meta itemprop="keywords" content="JavaScript"/> <meta itemprop="datePublished" content="2026-02-13T03:40:38.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é™ˆå¹¿äº®"/> <meta itemprop="url" content="https://juejin.cn/user/3139860937575934"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‘Šåˆ« JSON.parse(JSON.stringify()) â€” åŸç”Ÿæ·±æ‹·è´ structuredClone
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3139860937575934/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é™ˆå¹¿äº®
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-13T03:40:38.000Z" title="Fri Feb 13 2026 03:40:38 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    6
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æ·±æ‹·è´çš„è€åŠæ³•</h2>
<p>åœ¨ JavaScript ä¸­æ·±æ‹·è´ä¸€ä¸ªå¯¹è±¡ï¼Œæœ€å¸¸è§çš„"hack"å†™æ³•æ˜¯ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> copy = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(original));
</code></pre>
<p>è¿™ä¸ªæ–¹æ³•ç®€å•ç²—æš´ï¼Œä½†æœ‰ä¸€å †å‘ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> obj = {
  <span class="hljs-attr">date</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(),
  <span class="hljs-attr">regex</span>: <span class="hljs-regexp">/test/gi</span>,
  <span class="hljs-attr">map</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>([[<span class="hljs-string">"key"</span>, <span class="hljs-string">"value"</span>]]),
  <span class="hljs-attr">set</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]),
  <span class="hljs-attr">undef</span>: <span class="hljs-literal">undefined</span>,
  <span class="hljs-attr">fn</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-string">"hello"</span>,
  <span class="hljs-attr">nan</span>: <span class="hljs-title class_">NaN</span>,
  <span class="hljs-attr">infinity</span>: <span class="hljs-title class_">Infinity</span>,
};

<span class="hljs-keyword">const</span> copy = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(obj));
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(copy);
<span class="hljs-comment">// {</span>
<span class="hljs-comment">//   date: "2026-02-11T06:00:00.000Z",  â† å˜æˆäº†å­—ç¬¦ä¸²</span>
<span class="hljs-comment">//   regex: {},                           â† ä¸¢å¤±äº†</span>
<span class="hljs-comment">//   map: {},                             â† ä¸¢å¤±äº†</span>
<span class="hljs-comment">//   set: {},                             â† ä¸¢å¤±äº†</span>
<span class="hljs-comment">//                                        â† undefined ç›´æ¥æ¶ˆå¤±</span>
<span class="hljs-comment">//                                        â† å‡½æ•°ç›´æ¥æ¶ˆå¤±</span>
<span class="hljs-comment">//   nan: null,                           â† å˜æˆäº† null</span>
<span class="hljs-comment">//   infinity: null                       â† å˜æˆäº† null</span>
<span class="hljs-comment">// }</span>
</code></pre>
<p>è¿˜æœ‰ä¸€ä¸ªè‡´å‘½é—®é¢˜ â€”â€” å¾ªç¯å¼•ç”¨ç›´æ¥æŠ¥é”™ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> a = { <span class="hljs-attr">name</span>: <span class="hljs-string">"a"</span> };
a.<span class="hljs-property">self</span> = a;
<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(a)); <span class="hljs-comment">// âŒ TypeError: Converting circular structure to JSON</span>
</code></pre>
<h2 data-id="heading-1">structuredClone ç™»åœº</h2>
<p><code>structuredClone()</code> æ˜¯æµè§ˆå™¨å’Œ Node.js (v17+) æä¾›çš„<strong>åŸç”Ÿæ·±æ‹·è´</strong>æ–¹æ³•ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> original = {
  <span class="hljs-attr">date</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(),
  <span class="hljs-attr">regex</span>: <span class="hljs-regexp">/test/gi</span>,
  <span class="hljs-attr">map</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>([[<span class="hljs-string">"key"</span>, <span class="hljs-string">"value"</span>]]),
  <span class="hljs-attr">set</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]),
  <span class="hljs-attr">nested</span>: { <span class="hljs-attr">deep</span>: { <span class="hljs-attr">value</span>: <span class="hljs-number">42</span> } },
  <span class="hljs-attr">arr</span>: [<span class="hljs-number">1</span>, [<span class="hljs-number">2</span>, [<span class="hljs-number">3</span>]]],
};

<span class="hljs-keyword">const</span> copy = <span class="hljs-title function_">structuredClone</span>(original);

copy.<span class="hljs-property">nested</span>.<span class="hljs-property">deep</span>.<span class="hljs-property">value</span> = <span class="hljs-number">0</span>;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(original.<span class="hljs-property">nested</span>.<span class="hljs-property">deep</span>.<span class="hljs-property">value</span>); <span class="hljs-comment">// 42 âœ… äº’ä¸å½±å“</span>

copy.<span class="hljs-property">date</span> <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Date</span>; <span class="hljs-comment">// true âœ… ç±»å‹ä¿ç•™</span>
copy.<span class="hljs-property">regex</span> <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">RegExp</span>; <span class="hljs-comment">// true âœ…</span>
copy.<span class="hljs-property">map</span> <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Map</span>; <span class="hljs-comment">// true âœ…</span>
copy.<span class="hljs-property">set</span> <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Set</span>; <span class="hljs-comment">// true âœ…</span>
</code></pre>
<p>å¾ªç¯å¼•ç”¨ä¹Ÿèƒ½æ­£ç¡®å¤„ç†ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> a = { <span class="hljs-attr">name</span>: <span class="hljs-string">"a"</span> };
a.<span class="hljs-property">self</span> = a;
<span class="hljs-keyword">const</span> b = <span class="hljs-title function_">structuredClone</span>(a); <span class="hljs-comment">// âœ… æ­£å¸¸å·¥ä½œ</span>
b.<span class="hljs-property">self</span> === b; <span class="hljs-comment">// trueï¼ˆå¼•ç”¨æŒ‡å‘æ‹·è´åçš„è‡ªèº«ï¼‰</span>
</code></pre>
<h2 data-id="heading-2">æ”¯æŒçš„ç±»å‹</h2>
<p>structuredClone ä½¿ç”¨çš„æ˜¯ç»“æ„åŒ–å…‹éš†ç®—æ³•ï¼Œæ”¯æŒç»å¤§å¤šæ•°å†…ç½®ç±»å‹ï¼š</p>













































<table><thead><tr><th>ç±»å‹</th><th>JSON æ–¹å¼</th><th>structuredClone</th></tr></thead><tbody><tr><td>Date</td><td>âŒ å˜å­—ç¬¦ä¸²</td><td>âœ…</td></tr><tr><td>RegExp</td><td>âŒ å˜ <code>{}</code></td><td>âœ…</td></tr><tr><td>Map / Set</td><td>âŒ å˜ <code>{}</code></td><td>âœ…</td></tr><tr><td>ArrayBuffer</td><td>âŒ</td><td>âœ…</td></tr><tr><td>undefined</td><td>âŒ ä¸¢å¤±</td><td>âœ…</td></tr><tr><td>NaN / Infinity</td><td>âŒ å˜ null</td><td>âœ…</td></tr><tr><td>å¾ªç¯å¼•ç”¨</td><td>âŒ æŠ¥é”™</td><td>âœ…</td></tr></tbody></table>
<h2 data-id="heading-3">ä¸æ”¯æŒä»€ä¹ˆ</h2>
<p>æœ‰å‡ ç§ä¸œè¥¿æ˜¯ structuredClone <strong>æ— æ³•å…‹éš†</strong>çš„ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// âŒ å‡½æ•°</span>
<span class="hljs-title function_">structuredClone</span>({ <span class="hljs-attr">fn</span>: <span class="hljs-function">() =&gt;</span> {} });
<span class="hljs-comment">// DOMException: () =&gt; {} could not be cloned.</span>

<span class="hljs-comment">// âŒ DOM èŠ‚ç‚¹</span>
<span class="hljs-title function_">structuredClone</span>(<span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>);

<span class="hljs-comment">// âŒ åŸå‹é“¾ï¼ˆæ‹·è´åä¸¢å¤±ï¼‰</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Dog</span> {
  <span class="hljs-title function_">bark</span>(<span class="hljs-params"/>) { <span class="hljs-keyword">return</span> <span class="hljs-string">"woof"</span>; }
}
<span class="hljs-keyword">const</span> dog = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Dog</span>();
<span class="hljs-keyword">const</span> cloned = <span class="hljs-title function_">structuredClone</span>(dog);
cloned <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Dog</span>; <span class="hljs-comment">// false</span>
cloned.<span class="hljs-property">bark</span>; <span class="hljs-comment">// undefined</span>
</code></pre>
<p>æ‰€ä»¥å¦‚æœä½ çš„å¯¹è±¡åŒ…å«å‡½æ•°æˆ–éœ€è¦ä¿ç•™åŸå‹é“¾ï¼ŒstructuredClone ä¸é€‚ç”¨ã€‚</p>
<h2 data-id="heading-4">ä¸€ä¸ªå®ç”¨æŠ€å·§ï¼štransferable objects</h2>
<p>structuredClone æ”¯æŒç¬¬äºŒä¸ªå‚æ•° <code>transfer</code>ï¼Œå¯ä»¥"ç§»äº¤"è€Œä¸æ˜¯"å¤åˆ¶"æŸäº›å¯¹è±¡ï¼ˆå¦‚ ArrayBufferï¼‰ï¼Œé¿å…å†…å­˜ç¿»å€ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> buffer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">1024</span> * <span class="hljs-number">1024</span>); <span class="hljs-comment">// 1MB</span>
<span class="hljs-keyword">const</span> copy = <span class="hljs-title function_">structuredClone</span>(buffer, { <span class="hljs-attr">transfer</span>: [buffer] });

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(buffer.<span class="hljs-property">byteLength</span>); <span class="hljs-comment">// 0 â† åŸå§‹çš„è¢«æ¸…ç©ºäº†</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(copy.<span class="hljs-property">byteLength</span>); <span class="hljs-comment">// 1048576 â† æ•°æ®è½¬ç§»åˆ°äº† copy</span>
</code></pre>
<p>è¿™åœ¨å¤„ç†å¤§å‹äºŒè¿›åˆ¶æ•°æ®æ—¶éå¸¸æœ‰ç”¨ã€‚</p>
<h2 data-id="heading-5">å…¼å®¹æ€§</h2>
<ul>
<li>Chrome 98+, Firefox 94+, Safari 15.4+, Node.js 17+</li>
<li>2026 å¹´çš„ä»Šå¤©ï¼ŒåŸºæœ¬å¯ä»¥æ”¾å¿ƒä½¿ç”¨</li>
</ul>
<h2 data-id="heading-6">æ€»ç»“</h2>





















<table><thead><tr><th>åœºæ™¯</th><th>æ¨èæ–¹æ¡ˆ</th></tr></thead><tbody><tr><td>ç®€å•å¯¹è±¡ï¼Œæ— ç‰¹æ®Šç±»å‹</td><td><code>JSON.parse(JSON.stringify())</code> ä»ç„¶å¯ç”¨</td></tr><tr><td>åŒ…å« Date/Map/Set/å¾ªç¯å¼•ç”¨</td><td><code>structuredClone()</code></td></tr><tr><td>éœ€è¦ä¿ç•™åŸå‹é“¾/å‡½æ•°</td><td>æ‰‹å†™é€’å½’æˆ– lodash <code>_.cloneDeep()</code></td></tr></tbody></table>
<p>ä»¥åæ·±æ‹·è´ï¼Œå…ˆæƒ³æƒ³ <code>structuredClone</code> å§ã€‚</p>
<hr/>
<blockquote>
<p>åŸæ–‡é“¾æ¥ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fchenguangliang.com%2Fposts%2Fjs-structured-clone%2F" target="_blank" title="https://chenguangliang.com/posts/js-structured-clone/" ref="nofollow noopener noreferrer">chenguangliang.com/posts/js-stâ€¦</a></p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å®æˆ˜ï¼šå°† Android å¤šModuleåº”ç”¨è¿ç§»åˆ° kmp+cmp]]></title>    <link>https://juejin.cn/post/7605907495769767945</link>    <guid>https://juejin.cn/post/7605907495769767945</guid>    <pubDate>2026-02-13T05:24:28.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605907495769767945" data-draft-id="7605811866908835849" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å®æˆ˜ï¼šå°† Android å¤šModuleåº”ç”¨è¿ç§»åˆ° kmp+cmp"/> <meta itemprop="keywords" content="Kotlin,Android,iOS"/> <meta itemprop="datePublished" content="2026-02-13T05:24:28.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ™ºå…ˆæ£®zhi"/> <meta itemprop="url" content="https://juejin.cn/user/1987506650767966"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å®æˆ˜ï¼šå°† Android å¤šModuleåº”ç”¨è¿ç§»åˆ° kmp+cmp
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1987506650767966/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ™ºå…ˆæ£®zhi
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-13T05:24:28.000Z" title="Fri Feb 13 2026 05:24:28 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å®æˆ˜ï¼šå°† Android å¤šæ¨¡å—åº”ç”¨è¿ç§»åˆ° Kotlin Multiplatform + Compose Multiplatform</h2>
<p>æœ€è¿‘æŠŠè‡ªå·±çš„ NBA æ•°æ®åº”ç”¨ <a href="https://juejin.cn/post/7605451617286553627" target="_blank" title="https://juejin.cn/post/7605451617286553627">HoopsNow</a> ä»çº¯ Android å¤šæ¨¡å—æ¶æ„è¿ç§»åˆ°äº† KMP + CMPï¼Œå®ç°äº† Android/iOS å…±äº«ä¸€å¥—ä»£ç ã€‚è¿™ç¯‡æ–‡ç« è®°å½•æ•´ä¸ªè¿ç§»è¿‡ç¨‹ä¸­çš„æ€è·¯ã€è¸©å‘å’Œæœ€ç»ˆæ–¹æ¡ˆã€‚</p>

<h3 data-id="heading-1">é¡¹ç›®èƒŒæ™¯</h3>
<p>HoopsNow æ˜¯ä¸€ä¸ª NBA æ•°æ®å±•ç¤ºåº”ç”¨ï¼ŒåŠŸèƒ½åŒ…æ‹¬æ¯”èµ›æ¯”åˆ†ã€çƒé˜Ÿä¿¡æ¯ã€çƒå‘˜æœç´¢å’Œæ”¶è—ç®¡ç†ã€‚è¿ç§»å‰çš„æ¶æ„å‚è€ƒäº† Google çš„ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fandroid%2Fnowinandroid" target="_blank" title="https://github.com/android/nowinandroid" ref="nofollow noopener noreferrer">Now in Android</a> é¡¹ç›®ï¼Œæ˜¯ä¸€ä¸ªæ ‡å‡†çš„ Android å¤šæ¨¡å—æ¶æ„ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">hoopsnow/
â”œâ”€â”€ app/                        <span class="hljs-comment"># å…¥å£ + Navigation3</span>
â”œâ”€â”€ core/                       <span class="hljs-comment"># 9 ä¸ªæ ¸å¿ƒæ¨¡å—</span>
â”‚   â”œâ”€â”€ common/                 <span class="hljs-comment"># å·¥å…·ç±»</span>
â”‚   â”œâ”€â”€ data/                   <span class="hljs-comment"># Repository</span>
â”‚   â”œâ”€â”€ database/               <span class="hljs-comment"># Room</span>
â”‚   â”œâ”€â”€ datastore/              <span class="hljs-comment"># DataStore</span>
â”‚   â”œâ”€â”€ designsystem/           <span class="hljs-comment"># ä¸»é¢˜</span>
â”‚   â”œâ”€â”€ model/                  <span class="hljs-comment"># æ•°æ®æ¨¡å‹</span>
â”‚   â”œâ”€â”€ network/                <span class="hljs-comment"># Ktor</span>
â”‚   â”œâ”€â”€ testing/                <span class="hljs-comment"># æµ‹è¯•å·¥å…·</span>
â”‚   â””â”€â”€ ui/                     <span class="hljs-comment"># å…±äº« UI</span>
â”œâ”€â”€ feature/                    <span class="hljs-comment"># 4 ä¸ªåŠŸèƒ½æ¨¡å— (api/impl)</span>
â”‚   â”œâ”€â”€ games/
â”‚   â”œâ”€â”€ teams/
â”‚   â”œâ”€â”€ players/
â”‚   â””â”€â”€ favorites/
â””â”€â”€ build-logic/                <span class="hljs-comment"># 7 ä¸ª Convention Plugins</span>
</code></pre>
<p>æŠ€æœ¯æ ˆï¼š<strong>Hilt</strong> + <strong>Navigation3</strong> + <strong>Room</strong> + <strong>ViewModel</strong> + <strong>Coil</strong></p>
<p>è¿™å¥—æ¶æ„åœ¨çº¯ Android åœºæ™¯ä¸‹å¾ˆå¥½ç”¨ï¼Œæ¨¡å—è¾¹ç•Œæ¸…æ™°ï¼Œæ„å»ºå¹¶è¡Œåº¦é«˜ã€‚ä½†å½“æˆ‘æƒ³æŠŠåº”ç”¨æ‰©å±•åˆ° iOS æ—¶ï¼Œè¿™äº› Android ä¸“å±çš„åº“å°±æˆäº†éšœç¢ã€‚</p>
<h3 data-id="heading-2">ä¸ºä»€ä¹ˆé€‰æ‹© KMP + CMP</h3>
<p>è€ƒè™‘è¿‡å‡ ä¸ªæ–¹æ¡ˆï¼š</p>






























<table><thead><tr><th>æ–¹æ¡ˆ</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th></tr></thead><tbody><tr><td>Flutter</td><td>ç”Ÿæ€æˆç†Ÿï¼Œçƒ­é‡è½½</td><td>éœ€è¦é‡å†™å…¨éƒ¨ä»£ç ï¼ŒDart è¯­è¨€</td></tr><tr><td>React Native</td><td>Web å¼€å‘è€…å‹å¥½</td><td>æ€§èƒ½å¼€é”€ï¼Œæ¡¥æ¥å¤æ‚</td></tr><tr><td>KMP + åŸç”Ÿ UI</td><td>å…±äº«é€»è¾‘ï¼ŒåŸç”Ÿä½“éªŒ</td><td>éœ€è¦å†™ä¸¤å¥— UI</td></tr><tr><td>KMP + CMP</td><td>å…±äº«é€»è¾‘ + UIï¼ŒKotlin å…¨æ ˆ</td><td>CMP iOS ç«¯ç›¸å¯¹å¹´è½»</td></tr></tbody></table>
<p>æœ€ç»ˆé€‰äº† KMP + CMPï¼ŒåŸå› å¾ˆç®€å•ï¼šç°æœ‰ä»£ç æ˜¯ Kotlin + Composeï¼Œè¿ç§»æˆæœ¬æœ€ä½ï¼ŒUI ä¹Ÿèƒ½å…±äº«ã€‚</p>
<h3 data-id="heading-3">æŠ€æœ¯æ ˆæ›¿æ¢</h3>
<p>è¿ç§»çš„æ ¸å¿ƒå°±æ˜¯æŠŠ Android ä¸“å±åº“æ›¿æ¢ä¸º KMP å…¼å®¹çš„ï¿½ï¿½ï¿½ï¼š</p>





















































<table><thead><tr><th>åŠŸèƒ½</th><th>è¿ç§»å‰</th><th>è¿ç§»å</th><th>è¿ç§»éš¾åº¦</th></tr></thead><tbody><tr><td>ä¾èµ–æ³¨å…¥</td><td>Hilt</td><td><strong>Koin 4.0</strong></td><td>â­â­</td></tr><tr><td>å¯¼èˆª</td><td>Navigation3</td><td><strong>Voyager 1.1.0-beta03</strong></td><td>â­â­â­</td></tr><tr><td>æ•°æ®åº“</td><td>Room</td><td><strong>SQLDelight 2.0</strong></td><td>â­â­â­</td></tr><tr><td>çŠ¶æ€ç®¡ç†</td><td>ViewModel</td><td><strong>Voyager ScreenModel</strong></td><td>â­</td></tr><tr><td>å›¾ç‰‡åŠ è½½</td><td>Coil</td><td><strong>Coil 3 (KMP)</strong></td><td>â­</td></tr><tr><td>ç½‘ç»œ</td><td>Ktor (Android)</td><td><strong>Ktor 3.0 (KMP)</strong></td><td>â­</td></tr><tr><td>UI</td><td>Jetpack Compose</td><td><strong>Compose Multiplatform 1.7</strong></td><td>â­</td></tr></tbody></table>
<p>ä¸‹é¢é€ä¸ªè¯´è¯´è¿ç§»ç»†èŠ‚ã€‚</p>
<h3 data-id="heading-4">ä¸€ã€åˆ›å»º shared æ¨¡å—</h3>
<p>ç¬¬ä¸€æ­¥æ˜¯åˆ›å»º KMP å…±äº«æ¨¡å—ã€‚<code>shared/build.gradle.kts</code> çš„æ ¸å¿ƒé…ç½®ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">plugins {
    alias(libs.plugins.kotlin.multiplatform)
    alias(libs.plugins.android.library)
    alias(libs.plugins.kotlin.compose)
    alias(libs.plugins.compose.multiplatform)
    alias(libs.plugins.kotlin.serialization)
    alias(libs.plugins.sqldelight)
}

kotlin {
    androidTarget {
        compilerOptions { jvmTarget.<span class="hljs-keyword">set</span>(JvmTarget.JVM_17) }
    }

    listOf(iosX64(), iosArm64(), iosSimulatorArm64()).forEach {
        it.binaries.framework {
            baseName = <span class="hljs-string">"Shared"</span>
            isStatic = <span class="hljs-literal">true</span>
        }
    }

    sourceSets {
        commonMain.dependencies {
            implementation(compose.runtime)
            implementation(compose.foundation)
            implementation(compose.material3)
            implementation(compose.materialIconsExtended)
            <span class="hljs-comment">// Ktor, SQLDelight, Koin, Voyager, Coil ...</span>
        }
        androidMain.dependencies {
            implementation(libs.ktor.client.okhttp)
            implementation(libs.sqldelight.android.driver)
        }
        iosMain.dependencies {
            implementation(libs.ktor.client.darwin)
            implementation(libs.sqldelight.native.driver)
        }
    }
}
</code></pre>
<h3 data-id="heading-5">äºŒã€æ•°æ®åº“è¿ç§»ï¼šRoom â†’ SQLDelight</h3>
<p>è¿™æ˜¯è¿ç§»ä¸­å·¥ä½œé‡æœ€å¤§çš„éƒ¨åˆ†ã€‚Room ä¸æ”¯æŒ KMPï¼Œå¿…é¡»æ¢æˆ SQLDelightã€‚</p>
<h4 data-id="heading-6">å®šä¹‰ .sq æ–‡ä»¶</h4>
<p>SQLDelight ç”¨ <code>.sq</code> æ–‡ä»¶å®šä¹‰è¡¨ç»“æ„å’ŒæŸ¥è¯¢ï¼Œæ”¾åœ¨ <code>commonMain/sqldelight/</code> ç›®å½•ä¸‹ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- Team.sq</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> TeamEntity (
    id <span class="hljs-type">INTEGER</span> <span class="hljs-keyword">PRIMARY</span> KEY <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
    conference TEXT <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
    division TEXT <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
    city TEXT <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
    name TEXT <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
    fullName TEXT <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
    abbreviation TEXT <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>
);

getAll: <span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> TeamEntity;
getById: <span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> TeamEntity <span class="hljs-keyword">WHERE</span> id <span class="hljs-operator">=</span> ?;
upsert: <span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">OR</span> REPLACE <span class="hljs-keyword">INTO</span> TeamEntity <span class="hljs-keyword">VALUES</span> (?, ?, ?, ?, ?, ?, ?);
</code></pre>
<h4 data-id="heading-7">å¹³å° Driver</h4>
<p>é€šè¿‡ <code>expect/actual</code> ä¸ºä¸åŒå¹³å°æä¾›æ•°æ®åº“é©±åŠ¨ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// commonMain</span>
<span class="hljs-keyword">expect</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DatabaseDriverFactory</span> {
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">createDriver</span><span class="hljs-params">()</span></span>: SqlDriver
}

<span class="hljs-comment">// androidMain</span>
<span class="hljs-keyword">actual</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DatabaseDriverFactory</span>(<span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> context: Context) {
    <span class="hljs-keyword">actual</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">createDriver</span><span class="hljs-params">()</span></span>: SqlDriver =
        AndroidSqliteDriver(NbaDatabase.Schema, context, <span class="hljs-string">"nba.db"</span>)
}

<span class="hljs-comment">// iosMain</span>
<span class="hljs-keyword">actual</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DatabaseDriverFactory</span> {
    <span class="hljs-keyword">actual</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">createDriver</span><span class="hljs-params">()</span></span>: SqlDriver =
        NativeSqliteDriver(NbaDatabase.Schema, <span class="hljs-string">"nba.db"</span>)
}
</code></pre>
<h4 data-id="heading-8">è¸©å‘ï¼šSQLDelight å±æ€§å</h4>
<p>SQLDelight ç”Ÿæˆçš„ Queries å±æ€§ååŸºäº <code>.sq</code> æ–‡ä»¶åï¼Œä¸æ˜¯è¡¨åã€‚æ¯”å¦‚ <code>Game.sq</code> ç”Ÿæˆ <code>database.gameQueries</code>ï¼Œä¸æ˜¯ <code>database.gameEntityQueries</code>ã€‚è¿™ä¸ªå‘è®©æˆ‘æ’æŸ¥äº†å¥½ä¸€ä¼šå„¿ã€‚</p>
<h4 data-id="heading-9">è¸©å‘ï¼šKotlin ç±»å‹æ¨æ–­</h4>
<p>SQLDelight çš„é“¾å¼ mapper è°ƒç”¨ä¼šè®© Kotlin çš„ç±»å‹æ¨æ–­çŠ¯è¿·ç³Šã€‚è§£å†³æ–¹æ¡ˆæ˜¯å†™æ˜¾å¼çš„æ‰©å±•å‡½æ•°ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> TeamEntity.<span class="hljs-title">toTeam</span><span class="hljs-params">()</span></span>: Team = Team(
    id = id.toInt(),
    conference = conference,
    division = division,
    city = city,
    name = name,
    fullName = fullName,
    abbreviation = abbreviation,
)
</code></pre>
<h3 data-id="heading-10">ä¸‰ã€ä¾èµ–æ³¨å…¥ï¼šHilt â†’ Koin</h3>
<p>Hilt ä¾èµ– Android çš„æ³¨è§£å¤„ç†å™¨ï¼ˆKSPï¼‰ï¼Œä¸æ”¯æŒ KMPã€‚Koin æ˜¯çº¯ Kotlin å®ç°ï¼Œå¤©ç„¶è·¨å¹³å°ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// commonMain - KoinModules.kt</span>
<span class="hljs-keyword">val</span> sharedModule = module {
    <span class="hljs-comment">// Network</span>
    single&lt;NbaNetworkDataSource&gt; { KtorNbaNetwork(<span class="hljs-keyword">get</span>()) }

    <span class="hljs-comment">// Database</span>
    single { <span class="hljs-keyword">get</span>&lt;DatabaseDriverFactory&gt;().createDriver() }
    single { NbaDatabase(<span class="hljs-keyword">get</span>()) }

    <span class="hljs-comment">// Repositories</span>
    single&lt;GamesRepository&gt; { OfflineFirstGamesRepository(<span class="hljs-keyword">get</span>(), <span class="hljs-keyword">get</span>()) }
    single&lt;TeamsRepository&gt; { OfflineFirstTeamsRepository(<span class="hljs-keyword">get</span>(), <span class="hljs-keyword">get</span>()) }
    single&lt;PlayersRepository&gt; { OfflineFirstPlayersRepository(<span class="hljs-keyword">get</span>(), <span class="hljs-keyword">get</span>()) }
    single&lt;FavoritesRepository&gt; { OfflineFirstFavoritesRepository(<span class="hljs-keyword">get</span>(), <span class="hljs-keyword">get</span>()) }

    <span class="hljs-comment">// ScreenModels</span>
    factory { GamesListScreenModel(<span class="hljs-keyword">get</span>()) }
    factory { params -&gt; GameDetailScreenModel(params.<span class="hljs-keyword">get</span>(), <span class="hljs-keyword">get</span>()) }
    <span class="hljs-comment">// ...</span>
}

<span class="hljs-comment">// å¹³å°æ¨¡å—é€šè¿‡ expect/actual æä¾›</span>
<span class="hljs-keyword">expect</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">platformModule</span><span class="hljs-params">()</span></span>: Module
</code></pre>
<p>å¹³å°æ¨¡å—åªéœ€è¦æä¾› HTTP å¼•æ“å’Œæ•°æ®åº“é©±åŠ¨ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// androidMain</span>
<span class="hljs-keyword">actual</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">platformModule</span><span class="hljs-params">()</span></span>: Module = module {
    single&lt;HttpClientEngine&gt; { OkHttp.create() }
    single { DatabaseDriverFactory(<span class="hljs-keyword">get</span>()) }
}

<span class="hljs-comment">// iosMain</span>
<span class="hljs-keyword">actual</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">platformModule</span><span class="hljs-params">()</span></span>: Module = module {
    single&lt;HttpClientEngine&gt; { Darwin.create() }
    single { DatabaseDriverFactory() }
}
</code></pre>
<p>è¿ç§»ä½“éªŒï¼šHilt çš„ <code>@HiltViewModel</code> + <code>@Inject constructor</code> å…¨éƒ¨åˆ æ‰ï¼Œæ¢æˆ Koin çš„ <code>factory { }</code> å£°æ˜ã€‚ä»£ç é‡åè€Œå°‘äº†ã€‚</p>
<h3 data-id="heading-11">å››ã€å¯¼èˆªï¼šNavigation3 â†’ Voyager</h3>
<p>å¯¼èˆªæ˜¯è¿ç§»ä¸­è®¾è®¡å†³ç­–æœ€å¤šçš„éƒ¨åˆ†ã€‚Voyager æä¾›äº† <code>TabNavigator</code> + <code>Navigator</code> çš„ç»„åˆï¼Œå¾ˆé€‚åˆåº•éƒ¨ Tab + é¡µé¢æ ˆçš„åœºæ™¯ã€‚</p>
<h4 data-id="heading-12">Tab å®šä¹‰</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">object</span> GamesTab : Tab {
    <span class="hljs-keyword">override</span> <span class="hljs-keyword">val</span> options <span class="hljs-meta">@Composable</span> <span class="hljs-keyword">get</span>() = TabOptions(
        index = 0u,
        title = <span class="hljs-string">"Games"</span>,
        icon = rememberVectorPainter(Icons.Default.SportsBasketball),
    )

    <span class="hljs-meta">@Composable</span>
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">Content</span><span class="hljs-params">()</span></span> {
        Navigator(GamesListScreen()) { navigator -&gt;
            SlideTransition(navigator)
        }
    }
}
</code></pre>
<p>æ¯ä¸ª Tab å†…åµŒç‹¬ç«‹çš„ <code>Navigator</code>ï¼ŒTab åˆ‡æ¢æ—¶å„è‡ªçš„å¯¼èˆªæ ˆäº’ä¸å½±å“ã€‚</p>
<h4 data-id="heading-13">Screen å®šä¹‰</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">GamesListScreen</span> : <span class="hljs-type">Screen</span> {
    <span class="hljs-meta">@Composable</span>
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">Content</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">val</span> screenModel = koinScreenModel&lt;GamesListScreenModel&gt;()
        <span class="hljs-keyword">val</span> uiState <span class="hljs-keyword">by</span> screenModel.uiState.collectAsState()
        <span class="hljs-comment">// UI ...</span>
    }
}
</code></pre>
<h4 data-id="heading-14">é¡µé¢é—´ä¼ å‚</h4>
<p>Voyager é€šè¿‡æ„é€ å‡½æ•°ä¼ å‚ï¼Œç®€å•ç›´æ¥ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">GameDetailScreen</span>(<span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> gameId: <span class="hljs-built_in">Int</span>) : Screen { ... }

<span class="hljs-comment">// å¯¼èˆª</span>
navigator.push(GameDetailScreen(gameId = <span class="hljs-number">123</span>))
</code></pre>
<p>Koin ç«¯ç”¨ <code>parametersOf</code> ä¼ é€’ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// å®šä¹‰</span>
factory { params -&gt; GameDetailScreenModel(params.<span class="hljs-keyword">get</span>(), <span class="hljs-keyword">get</span>()) }

<span class="hljs-comment">// ä½¿ç”¨</span>
<span class="hljs-keyword">val</span> screenModel = koinScreenModel&lt;GameDetailScreenModel&gt; { parametersOf(gameId) }
</code></pre>
<h4 data-id="heading-15">ä¸»å…¥å£</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">HoopsNowApp</span><span class="hljs-params">()</span></span> {
    HoopsNowTheme {
        TabNavigator(GamesTab) {
            Scaffold(
                bottomBar = {
                    NavigationBar {
                        TabNavigationItem(GamesTab)
                        TabNavigationItem(TeamsTab)
                        TabNavigationItem(PlayersTab)
                        TabNavigationItem(FavoritesTab)
                    }
                },
            ) {
                CurrentTab()
            }
        }
    }
}
</code></pre>
<h3 data-id="heading-16">äº”ã€çŠ¶æ€ç®¡ç†ï¼šViewModel â†’ ScreenModel</h3>
<p>è¿™æ˜¯æœ€ç®€å•çš„ä¸€æ­¥ã€‚Voyager çš„ <code>ScreenModel</code> å’Œ <code>ViewModel</code> å‡ ä¹ä¸€æ¨¡ä¸€æ ·ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// è¿ç§»å‰</span>
<span class="hljs-meta">@HiltViewModel</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">GamesListViewModel</span> <span class="hljs-meta">@Inject</span> <span class="hljs-keyword">constructor</span>(
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> gamesRepository: GamesRepository,
) : ViewModel() {
    <span class="hljs-keyword">val</span> uiState = gamesRepository.getGames()
        .stateIn(viewModelScope, SharingStarted.WhileSubscribed(<span class="hljs-number">5000</span>), Loading)
}

<span class="hljs-comment">// è¿ç§»å</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">GamesListScreenModel</span>(
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> gamesRepository: GamesRepository,
) : ScreenModel {
    <span class="hljs-keyword">val</span> uiState = gamesRepository.getGames()
        .stateIn(screenModelScope, SharingStarted.WhileSubscribed(<span class="hljs-number">5000</span>), Loading)
}
</code></pre>
<p>æ”¹åŠ¨ç‚¹ï¼š</p>
<ul>
<li>åˆ é™¤ <code>@HiltViewModel</code> å’Œ <code>@Inject constructor</code></li>
<li><code>ViewModel()</code> â†’ <code>ScreenModel</code></li>
<li><code>viewModelScope</code> â†’ <code>screenModelScope</code></li>
<li><code>collectAsStateWithLifecycle()</code> â†’ <code>collectAsState()</code>ï¼ˆCMP ä¸­æ²¡ï¿½ï¿½ AndroidX Lifecycleï¼‰</li>
</ul>
<h3 data-id="heading-17">å…­ã€Android å…¥å£ç²¾ç®€</h3>
<p>è¿ç§»å <code>app</code> æ¨¡å—åªå‰©ä¸¤ä¸ªæ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// HoopsNowApplication.kt</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">HoopsNowApplication</span> : <span class="hljs-type">Application</span>() {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreate</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">super</span>.onCreate()
        startKoin {
            androidContext(<span class="hljs-keyword">this</span><span class="hljs-symbol">@HoopsNowApplication</span>)
            modules(sharedModule, platformModule())
        }
    }
}

<span class="hljs-comment">// MainActivity.kt</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MainActivity</span> : <span class="hljs-type">ComponentActivity</span>() {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreate</span><span class="hljs-params">(savedInstanceState: <span class="hljs-type">Bundle</span>?)</span></span> {
        <span class="hljs-keyword">super</span>.onCreate(savedInstanceState)
        enableEdgeToEdge(...)
        setContent {
            CompositionLocalProvider(
                LocalTeamLogos provides TeamLogoProvider.getAllLogos(),
                LocalPlayerHeadshot provides PlayerHeadshotProvider::getHeadshotUrl,
            ) {
                HoopsNowApp()  <span class="hljs-comment">// æ¥è‡ª shared æ¨¡å—</span>
            }
        }
    }
}
</code></pre>
<h3 data-id="heading-18">ä¸ƒã€iOS æ¥å…¥</h3>
<p>iOS ç«¯æ›´ç®€å•ï¼Œåªéœ€è¦ä¸€ä¸ª SwiftUI å£³ï¼š</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// iOSApp.swift</span>
<span class="hljs-keyword">@main</span>
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">iOSApp</span>: <span class="hljs-title class_">App</span> {
    <span class="hljs-keyword">init</span>() {
        <span class="hljs-type">KoinHelperKt</span>.doInitKoin()
    }
    <span class="hljs-keyword">var</span> body: <span class="hljs-keyword">some</span> <span class="hljs-type">Scene</span> {
        <span class="hljs-type">WindowGroup</span> { <span class="hljs-type">ContentView</span>() }
    }
}

<span class="hljs-comment">// ContentView.swift</span>
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">ContentView</span>: <span class="hljs-title class_">View</span> {
    <span class="hljs-keyword">var</span> body: <span class="hljs-keyword">some</span> <span class="hljs-type">View</span> {
        <span class="hljs-type">ComposeView</span>().ignoresSafeArea(.all)
    }
}

<span class="hljs-keyword">struct</span> <span class="hljs-title class_">ComposeView</span>: <span class="hljs-title class_">UIViewControllerRepresentable</span> {
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">makeUIViewController</span>(<span class="hljs-params">context</span>: <span class="hljs-type">Context</span>) -&gt; <span class="hljs-type">UIViewController</span> {
        <span class="hljs-type">MainViewControllerKt</span>.<span class="hljs-type">MainViewController</span>()
    }
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">updateUIViewController</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">uiViewController</span>: <span class="hljs-type">UIViewController</span>, <span class="hljs-params">context</span>: <span class="hljs-type">Context</span>) {}
}
</code></pre>
<p>shared æ¨¡å—ä¸­æä¾› iOS å…¥å£ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// iosMain - MainViewController.kt</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">MainViewController</span><span class="hljs-params">()</span></span> = ComposeUIViewController { HoopsNowApp() }
</code></pre>
<p>å°±è¿™æ ·ï¼ŒiOS ç«¯å°±èƒ½è·‘èµ·æ¥äº†ã€‚æ•´ä¸ª Compose UI é€šè¿‡ <code>ComposeUIViewController</code> åµŒå…¥ SwiftUIã€‚</p>
<h3 data-id="heading-19">å…«ã€æ¸…ç†æ—§ä»£ç </h3>
<p>è¿ç§»å®Œæˆåï¼Œå¤§é‡æ—§æ–‡ä»¶å¯ä»¥åˆ é™¤ï¼š</p>
<ul>
<li><code>core/</code> â€” 9 ä¸ªæ—§ Android æ¨¡å—å…¨éƒ¨åˆ é™¤</li>
<li><code>feature/</code> â€” 4 ä¸ªåŠŸèƒ½æ¨¡å—å…¨éƒ¨åˆ é™¤</li>
<li><code>app/navigation/</code> â€” æ—§ Navigation3 ä»£ç </li>
<li><code>build-logic/</code> ä¸­çš„ 6 ä¸ª Convention Pluginï¼ˆHiltã€Roomã€Featureã€Library ç­‰ï¼‰</li>
<li><code>libs.versions.toml</code> ä¸­çš„ Hiltã€KSP ç›¸å…³å£°æ˜</li>
</ul>
<p>ä» 20+ ä¸ªæ¨¡å—ç²¾ç®€åˆ° 2 ä¸ªï¼ˆ<code>app</code> + <code>shared</code>ï¼‰ï¼Œ<code>settings.gradle.kts</code> æ¸…çˆ½äº†å¾ˆå¤šã€‚</p>
<h3 data-id="heading-20">è¿ç§»åçš„é¡¹ç›®ç»“æ„</h3>
<pre><code class="hljs language-bash" lang="bash">hoopsnow/
â”œâ”€â”€ app/                                <span class="hljs-comment"># Android å…¥å£ï¼ˆ2 ä¸ªæ–‡ä»¶ï¼‰</span>
â”œâ”€â”€ shared/                             <span class="hljs-comment"># KMP å…±äº«æ¨¡å—</span>
â”‚   â””â”€â”€ src/
â”‚       â”œâ”€â”€ commonMain/                 <span class="hljs-comment"># å…¨éƒ¨ä¸šåŠ¡é€»è¾‘ + UI</span>
â”‚       â”‚   â”œâ”€â”€ kotlin/.../
â”‚       â”‚   â”‚   â”œâ”€â”€ core/               <span class="hljs-comment"># æ•°æ®å±‚ï¼ˆmodel, data, database, networkï¿½ï¿½</span>
â”‚       â”‚   â”‚   â”œâ”€â”€ di/                 <span class="hljs-comment"># Koin æ¨¡å—</span>
â”‚       â”‚   â”‚   â””â”€â”€ ui/                 <span class="hljs-comment"># UI å±‚ï¼ˆscreens, components, theme, navigationï¼‰</span>
â”‚       â”‚   â””â”€â”€ sqldelight/             <span class="hljs-comment"># æ•°æ®åº“å®šä¹‰</span>
â”‚       â”œâ”€â”€ androidMain/                <span class="hljs-comment"># Android å¹³å°å®ç°</span>
â”‚       â””â”€â”€ iosMain/                    <span class="hljs-comment"># iOS å¹³å°å®ç°</span>
â”œâ”€â”€ iosApp/                             <span class="hljs-comment"># iOS å…¥å£ï¼ˆ2 ä¸ª Swift æ–‡ä»¶ï¼‰</span>
â””â”€â”€ build-logic/                        <span class="hljs-comment"># Convention Pluginsï¼ˆç²¾ç®€ï¼‰</span>
</code></pre>
<h3 data-id="heading-21">è¸©å‘æ€»ç»“</h3>
<h4 data-id="heading-22">1. SQLDelight å±æ€§å</h4>
<p>ç”Ÿæˆçš„ Queries å±æ€§ååŸºäº <code>.sq</code> æ–‡ä»¶åï¼ˆ<code>gameQueries</code>ï¼‰ï¼Œä¸æ˜¯ <code>CREATE TABLE</code> çš„è¡¨åï¼ˆ<code>gameEntityQueries</code>ï¼‰ã€‚</p>
<h4 data-id="heading-23">2. collectAsStateWithLifecycle ä¸å¯ç”¨</h4>
<p>è¿™æ˜¯ AndroidX Lifecycle çš„æ‰©å±•ï¼ŒCMP ä¸­ç”¨ <code>collectAsState()</code> æ›¿ä»£ã€‚ScreenModel ä¼šåœ¨ Screen dispose æ—¶è‡ªåŠ¨å–æ¶ˆ scopeï¼Œä¸ç”¨æ‹…å¿ƒæ³„æ¼ã€‚</p>
<h4 data-id="heading-24">3. Kotlin ç±»å‹æ¨æ–­ä¸ SQLDelight</h4>
<p>é“¾å¼ mapper è°ƒç”¨æ—¶ç±»å‹æ¨æ–­å¯èƒ½å¤±è´¥ï¼Œå†™æ˜¾å¼çš„ <code>toModel()</code> æ‰©å±•å‡½æ•°è§£å†³ã€‚</p>
<h4 data-id="heading-25">4. Material Icons Extended</h4>
<p><code>Icons.Default.StarBorder</code>ã€<code>Icons.Default.OpenInNew</code> ç­‰å›¾æ ‡éœ€è¦é¢å¤–æ·»åŠ  <code>compose.materialIconsExtended</code> ä¾èµ–ã€‚</p>
<h4 data-id="heading-26">5. Koin ScreenModel å‚æ•°ä¼ é€’</h4>
<p>å¸¦å‚æ•°çš„ ScreenModel éœ€è¦ç”¨ <code>factory { params -&gt; }</code> å®šä¹‰ï¼Œä½¿ç”¨æ—¶é€šè¿‡ <code>koinScreenModel { parametersOf(...) }</code> ä¼ å…¥ã€‚</p>
<h4 data-id="heading-27">6. iOS Framework ç¼–è¯‘</h4>
<p>æ¯æ¬¡ä¿®æ”¹ shared ä»£ç åéœ€è¦é‡æ–°ç¼–è¯‘ Frameworkã€‚å¼€å‘é˜¶æ®µå»ºè®®åœ¨ Xcode Build Phase ä¸­æ·»åŠ è‡ªåŠ¨ç¼–è¯‘è„šæœ¬ã€‚</p>
<h3 data-id="heading-28">è¿ç§»æ”¶ç›Š</h3>








































<table><thead><tr><th>æŒ‡æ ‡</th><th>è¿ç§»å‰</th><th>è¿ç§»å</th></tr></thead><tbody><tr><td>æ¨¡å—æ•°é‡</td><td>20+</td><td>2 (app + shared)</td></tr><tr><td>æ”¯æŒå¹³å°</td><td>Android</td><td>Android + iOS</td></tr><tr><td>UI ä»£ç å…±äº«</td><td>0%</td><td>100%</td></tr><tr><td>ä¸šåŠ¡é€»è¾‘å…±äº«</td><td>0%</td><td>100%</td></tr><tr><td>build.gradle æ–‡ä»¶</td><td>20+</td><td>3</td></tr><tr><td>Convention Plugins</td><td>7</td><td>2</td></tr></tbody></table>
<p>æœ€å¤§çš„æ”¶ç›Šæ˜¯ iOS ç«¯å‡ ä¹é›¶æˆæœ¬æ¥å…¥ â€” åªéœ€è¦ä¸¤ä¸ª Swift æ–‡ä»¶å°±èƒ½è·‘èµ·å®Œæ•´çš„åº”ç”¨ã€‚</p>
<h3 data-id="heading-29">ä¾èµ–ç‰ˆæœ¬å‚è€ƒ</h3>

















































<table><thead><tr><th>åº“</th><th>ç‰ˆæœ¬</th></tr></thead><tbody><tr><td>Kotlin</td><td>2.0.21</td></tr><tr><td>Compose Multiplatform</td><td>1.7.3</td></tr><tr><td>Ktor</td><td>3.0.3</td></tr><tr><td>SQLDelight</td><td>2.0.2</td></tr><tr><td>Koin</td><td>4.0.0</td></tr><tr><td>Voyager</td><td>1.1.0-beta03</td></tr><tr><td>Coil 3</td><td>3.0.4</td></tr><tr><td>kotlinx-serialization</td><td>1.7.3</td></tr><tr><td>kotlinx-datetime</td><td>0.6.1</td></tr><tr><td>Coroutines</td><td>1.9.0</td></tr></tbody></table>
<h3 data-id="heading-30">æ€»ç»“</h3>
<p>æ•´ä¸ªè¿ç§»èŠ±äº†å¤§çº¦ä¸€å‘¨æ—¶é—´ï¼Œå…¶ä¸­æ•°æ®åº“è¿ç§»ï¼ˆRoom â†’ SQLDelightï¼‰å’Œå¯¼èˆªè¿ç§»ï¼ˆNavigation3 â†’ Voyagerï¼‰å äº†å¤§éƒ¨åˆ†å·¥ä½œé‡ã€‚ç½‘ç»œå±‚ï¼ˆKtorï¼‰å’Œåºåˆ—åŒ–ï¼ˆkotlinx-serializationï¼‰æœ¬èº«å°±æ˜¯ KMP åº“ï¼ŒåŸºæœ¬ä¸ç”¨æ”¹ã€‚</p>
<p>å¦‚æœä½ çš„ Android é¡¹ç›®å·²ç»åœ¨ç”¨ Kotlin + Composeï¼Œè¿ç§»åˆ° KMP + CMP çš„æˆæœ¬æ¯”æƒ³è±¡ä¸­ä½å¾ˆå¤šã€‚æœ€å¤§çš„éšœç¢æ˜¯ Room å’Œ Hilt è¿™ä¸¤ä¸ª Android ä¸“å±åº“çš„æ›¿æ¢ï¼Œä½† SQLDelight å’Œ Koin éƒ½æ˜¯æˆç†Ÿçš„æ›¿ä»£æ–¹ï¿½ï¿½ï¿½ã€‚</p>
<p>é¡¹ç›®æºç ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Flaibinzhi%2Fhoopsnow" target="_blank" title="https://github.com/laibinzhi/hoopsnow" ref="nofollow noopener noreferrer">GitHub - laibinzhi/hoopsnow</a>ï¼ˆcmp åˆ†æ”¯ï¼‰</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æƒ³å­¦ Electronï¼Ÿè¿™ä»½ã€Œèƒ½è·‘çš„ç¤ºä¾‹é›†ã€ä¸€ç¯‡ææ‡‚]]></title>    <link>https://juejin.cn/post/7605817795628990514</link>    <guid>https://juejin.cn/post/7605817795628990514</guid>    <pubDate>2026-02-13T04:03:58.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605817795628990514" data-draft-id="7605907495769554953" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æƒ³å­¦ Electronï¼Ÿè¿™ä»½ã€Œèƒ½è·‘çš„ç¤ºä¾‹é›†ã€ä¸€ç¯‡ææ‡‚"/> <meta itemprop="keywords" content="Electron,å‰ç«¯"/> <meta itemprop="datePublished" content="2026-02-13T04:03:58.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸€æšå°å¤ªé˜³"/> <meta itemprop="url" content="https://juejin.cn/user/2771228509602109"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æƒ³å­¦ Electronï¼Ÿè¿™ä»½ã€Œèƒ½è·‘çš„ç¤ºä¾‹é›†ã€ä¸€ç¯‡ææ‡‚
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2771228509602109/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸€æšå°å¤ªé˜³
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-13T04:03:58.000Z" title="Fri Feb 13 2026 04:03:58 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æƒ³å­¦ Electronï¼Ÿè¿™ä»½ã€Œèƒ½è·‘çš„ç¤ºä¾‹é›†ã€ä¸€ç¯‡ææ‡‚</h2>
<p>VS Codeã€é’‰é’‰ã€Slackã€Figma æ¡Œé¢ç‰ˆâ€¦â€¦è¿™äº›ä½ ç†Ÿæ‚‰çš„è½¯ä»¶ï¼ŒèƒŒåéƒ½æœ‰åŒä¸€ä¸ªåå­—ï¼š<strong>Electron</strong>ã€‚ç”¨å‰ç«¯æŠ€æœ¯ï¼ˆHTML/CSS/JSï¼‰å°±èƒ½åšæ¡Œé¢åº”ç”¨ï¼Œæ˜¯å¾ˆå¤šå›¢é˜Ÿçš„é€‰æ‹©ã€‚ä½†å®˜æ–¹æ–‡æ¡£çŸ¥è¯†ç‚¹å¤šã€è‡ªå·±ä»é›¶æ­åˆå®¹æ˜“è¸©å‘ï¼Œ<strong>æœ‰æ²¡æœ‰ä¸€ä»½ã€ŒæŒ‰ä¸»é¢˜æ‹†å¥½ã€æ¯ä¸ªéƒ½èƒ½ç›´æ¥è·‘ã€çš„ç¤ºä¾‹ï¼Ÿ</strong> æœ‰ã€‚æœ¬æ–‡å°±ä»‹ç»è¿™æ ·ä¸€ä»½ç¤ºä¾‹ä»“åº“ï¼Œå¹¶å¸®ä½ æŠŠ Electron çš„æ ¸å¿ƒçŸ¥è¯†ç‚¹ä¸²ä¸€éï¼Œ<strong>çœ‹å®Œä¸€ç¯‡ï¼ŒçŸ¥é“å­¦ä»€ä¹ˆã€å»å“ªçœ‹ä»£ç </strong>ã€‚</p>
<hr/>
<h3 data-id="heading-1">ä¸€ã€Electron æ˜¯ä»€ä¹ˆï¼Ÿè¿™ä¸ªä»“åº“èƒ½å¸®ä½ ä»€ä¹ˆï¼Ÿ</h3>
<p><strong>ä¸€å¥è¯ï¼š</strong> Electron è®©ä½ ç”¨å†™ç½‘é¡µçš„æŠ€æœ¯ï¼ˆHTML/CSS/JavaScriptï¼‰æ¥å¼€å‘æ¡Œé¢è½¯ä»¶ï¼Œä¸€å¥—ä»£ç å¯è·‘åœ¨ Windowsã€macOSã€Linux ä¸Šã€‚</p>
<p><strong>è¿™ä¸ªä»“åº“åšä»€ä¹ˆï¼š</strong> æŠŠ Electron å¸¸è§èƒ½åŠ›æ‹†æˆ <strong>23 ä¸ªç‹¬ç«‹å°é¡¹ç›®</strong>ï¼Œæ¯ä¸ªé¡¹ç›®ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œé‡Œé¢æ˜¯<strong>å¯è¿è¡Œä»£ç  + è¯´æ˜æ–‡æ¡£</strong>ã€‚ä½ ä¸éœ€è¦ä»é›¶æ­ç¯å¢ƒï¼Œå…‹éš†ä¸‹æ¥è¿›ç›®å½•ã€è£…ä¾èµ–ã€è¿è¡Œå‘½ä»¤å°±èƒ½çœ‹åˆ°æ•ˆæœã€‚é€‚åˆï¼š</p>
<ul>
<li><strong>æƒ³å­¦ Electron çš„äºº</strong>ï¼šæŒ‰ä¸»é¢˜è¾¹çœ‹è¾¹è·‘ï¼Œæ¯”å…‰çœ‹æ–‡æ¡£å¥½æ‡‚ï¼›</li>
<li><strong>åšæ¡Œé¢ç«¯å¼€å‘çš„äºº</strong>ï¼šé‡åˆ°ã€Œçª—å£ã€èœå•ã€é€šçŸ¥ã€IPCã€ç­‰é—®é¢˜ï¼Œå¯ä»¥å¯¹ç€å¯¹åº”ç¤ºä¾‹æ”¹ï¼›</li>
<li><strong>é¢è¯•å‰çªå‡»çš„äºº</strong>ï¼šä»“åº“é‡Œè¿˜å¸¦ 3 å¥— Electron é¢è¯•å·ï¼ˆå«ç­”æ¡ˆï¼‰ï¼Œå¯ç”¨æ¥è‡ªæŸ¥ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-2">äºŒã€æ€ä¹ˆè·‘èµ·æ¥ï¼Ÿï¼ˆ3 æ­¥ï¼‰</h3>
<p><strong>ç¯å¢ƒå‡†å¤‡ï¼š</strong> æœ¬æœºè£…å¥½ <strong>Node.js</strong>ï¼ˆå»ºè®® 18 åŠä»¥ä¸Šï¼‰ï¼Œç¤ºä¾‹åœ¨ Windows 11 ä¸‹éªŒè¯è¿‡ï¼ŒmacOS / Linux ä¸‹å¤§å¤šä¹Ÿå¯ç›´æ¥è¿è¡Œã€‚</p>
<p><strong>è¿è¡Œä»»æ„ä¸€ä¸ªç¤ºä¾‹ï¼š</strong></p>
<ol>
<li>å…‹éš†ä»“åº“ï¼›</li>
<li>è¿›å…¥æƒ³ç©çš„æ¡ˆä¾‹ç›®å½•ï¼ˆä¾‹å¦‚ <code>ipc</code>ã€<code>darkmode</code>ï¼‰ï¼›</li>
<li>åœ¨è¯¥ç›®å½•ä¸‹æ‰§è¡Œï¼š<code>npm install</code> â†’ <code>npm run start</code> æˆ– <code>npm run start:1</code>ï¼ˆå…·ä½“çœ‹è¯¥ç›®å½•çš„ readmeï¼‰ã€‚</li>
</ol>
<p>æ¯ä¸ªæ¡ˆä¾‹çš„<strong>è¯¦ç»†å‘½ä»¤å’Œè¯´æ˜</strong>éƒ½åœ¨å¯¹åº”ç›®å½•çš„ <strong>readme.md</strong> é‡Œï¼Œè¿›å»å°±èƒ½çœ‹åˆ°ã€‚</p>
<hr/>
<h3 data-id="heading-3">ä¸‰ã€Electron çŸ¥è¯†ç‚¹ä¸²è®²ï¼ˆå¯¹åº”ä»“åº“æ€ä¹ˆç”¨ï¼‰</h3>
<p>ä¸‹é¢æŒ‰ã€Œä»å…¥é—¨åˆ°è¿›é˜¶ã€çš„é¡ºåºï¼ŒæŠŠä¸»è¦æ¦‚å¿µè¿‡ä¸€éï¼Œå¹¶æ ‡å‡º<strong>ä»“åº“é‡Œå“ªä¸€ç±»ç¤ºä¾‹å¯ä»¥å¯¹ç…§ç€çœ‹</strong>ã€‚ä¸å±•å¼€ä»£ç ç»†èŠ‚ï¼Œåªå¸®ä½ å»ºç«‹åœ°å›¾ã€‚</p>
<h4 data-id="heading-4">1. å…¥é—¨ï¼šç¬¬ä¸€ä¸ªåº”ç”¨é•¿ä»€ä¹ˆæ ·ï¼Ÿ</h4>
<p>Electron åº”ç”¨è‡³å°‘æœ‰ä¸¤ä¸ªã€Œè§’è‰²ã€ï¼š<strong>ä¸»è¿›ç¨‹</strong>ï¼ˆè´Ÿè´£åˆ›å»ºçª—å£ã€ç³»ç»Ÿ APIï¼‰å’Œ<strong>æ¸²æŸ“è¿›ç¨‹</strong>ï¼ˆä½ çœ‹åˆ°çš„é¡µé¢ï¼‰ã€‚ä¸¤è€…ä¸èƒ½ç›´æ¥äº’ç›¸è°ƒå‡½æ•°ï¼Œè¦é€šè¿‡ <strong>preload è„šæœ¬</strong>å®‰å…¨åœ°æš´éœ²æ¥å£ï¼Œæˆ–ç”¨ <strong>IPC</strong>ï¼ˆè¿›ç¨‹é—´é€šä¿¡ï¼‰ä¼ æ¶ˆæ¯ã€‚</p>
<p><strong>ä»“åº“å¯¹åº”ï¼š</strong> <code>tutorial-first-app</code> â€”â€” ç¬¬ä¸€ä¸ªåº”ç”¨ã€ä¸»è¿›ç¨‹ / æ¸²æŸ“è¿›ç¨‹ / preload / IPC å…¥é—¨ã€‚</p>
<hr/>
<h4 data-id="heading-5">2. è¿›ç¨‹ä¸é€šä¿¡ï¼šé¡µé¢å’Œã€Œåå°ã€æ€ä¹ˆé…åˆï¼Ÿ</h4>
<ul>
<li><strong>IPC</strong>ï¼šæ¸²æŸ“è¿›ç¨‹å’Œä¸»è¿›ç¨‹äº’ç›¸å‘æ¶ˆæ¯ï¼ˆå•å‘ã€åŒå‘ã€ä¸»è¿›ç¨‹ä¸»åŠ¨æ¨ç»™é¡µé¢ç­‰ï¼‰ã€‚</li>
<li><strong>MessagePort</strong>ï¼šæ›´çµæ´»çš„é€šé“ï¼Œé€‚åˆã€Œæ¸²æŸ“è¿›ç¨‹ç›´è¿ã€ã€Œæµå¼å›å¤ã€ç­‰åœºæ™¯ã€‚</li>
<li><strong>Utility Processï¼ˆæ•ˆç‡è¿›ç¨‹ï¼‰</strong>ï¼šè·‘ CPU é‡æ´»æˆ–å®¹æ˜“å´©çš„é€»è¾‘ï¼Œå’Œä¸»è¿›ç¨‹éš”ç¦»ï¼Œç”¨ MessagePort é€šä¿¡ã€‚</li>
<li><strong>å¤šçº¿ç¨‹</strong>ï¼šåœ¨æ¸²æŸ“è¿›ç¨‹é‡Œç”¨ Web Workerï¼Œé¿å…å¤§é‡è®¡ç®—å¡ä½ç•Œé¢ã€‚</li>
<li><strong>æ²™ç›’</strong>ï¼šæ¸²æŸ“è¿›ç¨‹é»˜è®¤æ²™ç›’ã€å®‰å…¨é…ç½®ï¼Œå‡å°‘å®‰å…¨é£é™©ã€‚</li>
</ul>
<p><strong>ä»“åº“å¯¹åº”ï¼š</strong> <code>ipc</code>ã€<code>message-ports</code>ã€<code>efficiency-process</code>ã€<code>multithreading</code>ã€<code>sandbox</code>ã€‚</p>
<hr/>
<h4 data-id="heading-6">3. çª—å£ä¸ UIï¼šæ¡Œé¢åº”ç”¨ã€Œé•¿ä»€ä¹ˆæ ·ã€ï¼Ÿ</h4>
<ul>
<li><strong>æš—è‰²æ¨¡å¼</strong>ï¼šç”¨ç³»ç»Ÿä¸»é¢˜æˆ–è‡ªå·±åˆ‡æ¢ï¼Œå’Œ CSS çš„ <code>prefers-color-scheme</code> é…åˆã€‚</li>
<li><strong>ä»»åŠ¡æ </strong>ï¼šWindows ä¸Šçš„ JumpListã€ç¼©ç•¥å›¾å·¥å…·æ ã€è¿›åº¦æ¡ã€å›¾æ ‡é—ªçƒç­‰ã€‚</li>
<li><strong>çª—å£å®šåˆ¶</strong>ï¼šæ— è¾¹æ¡†ã€è‡ªå®šä¹‰æ ‡é¢˜æ ã€æ‹–æ‹½åŒºåŸŸã€‚</li>
<li><strong>è¿›åº¦æ¡</strong>ï¼šåœ¨ä»»åŠ¡æ  / Dock ä¸Šæ˜¾ç¤ºè¿›åº¦ï¼ˆå¦‚ä¸‹è½½ã€å¤„ç†ä»»åŠ¡ï¼‰ã€‚</li>
</ul>
<p><strong>ä»“åº“å¯¹åº”ï¼š</strong> <code>darkmode</code>ã€<code>windows-taskbar</code>ã€<code>window-customization</code>ã€<code>progressbar</code>ã€‚</p>
<hr/>
<h4 data-id="heading-7">4. ç³»ç»Ÿä¸åŸç”Ÿèƒ½åŠ›ï¼šå’Œæ“ä½œç³»ç»Ÿæ‰“äº¤é“</h4>
<ul>
<li><strong>èœå•</strong>ï¼šåº”ç”¨èœå•ã€å³é”®èœå•ã€æ‰˜ç›˜èœå•ã€‚</li>
<li><strong>å¿«æ·é”®</strong>ï¼šç»‘å®šåœ¨èœå•ä¸Šçš„ã€å…¨å±€çš„ã€çª—å£å†…è‡ªå·±ç›‘å¬çš„ã€‚</li>
<li><strong>ç³»ç»Ÿé€šçŸ¥</strong>ï¼šåƒå¾®ä¿¡/é‚®ä»¶é‚£æ ·åœ¨ç³»ç»Ÿé€šçŸ¥æ å¼¹å‡ºï¼Œè€Œä¸æ˜¯åªåœ¨é¡µé¢é‡Œå¼¹ä¸ªæç¤ºã€‚</li>
<li><strong>è®¾å¤‡è®¿é—®</strong>ï¼šä¾‹å¦‚è“ç‰™ï¼ˆWeb Bluetooth APIï¼‰ã€‚</li>
<li><strong>æ·±åº¦é“¾æ¥</strong>ï¼šè‡ªå®šä¹‰åè®®ï¼Œä»æµè§ˆå™¨æˆ–åˆ«çš„åº”ç”¨ç‚¹é“¾æ¥å”¤èµ·ä½ çš„åº”ç”¨ã€‚</li>
</ul>
<p><strong>ä»“åº“å¯¹åº”ï¼š</strong> <code>menus</code>ã€<code>keyboardshortcut</code>ã€<code>notificationsDemo</code>ã€<code>bluetooth</code>ã€<code>deeplinks</code>ã€‚</p>
<hr/>
<h4 data-id="heading-8">5. æ–‡ä»¶ä¸æ–‡æ¡£ã€Web ä¸å¯¼èˆª</h4>
<ul>
<li><strong>æ–‡ä»¶æ‹–æ‹½</strong>ï¼šæŠŠæ–‡ä»¶ä»åº”ç”¨æ‹–åˆ°æ¡Œé¢æˆ–èµ„æºç®¡ç†å™¨ã€‚</li>
<li><strong>æœ€è¿‘æ–‡æ¡£</strong>ï¼šç³»ç»Ÿã€Œæœ€è¿‘æ‰“å¼€ã€åˆ—è¡¨çš„é›†æˆã€‚</li>
<li><strong>Web åµŒå…¥</strong>ï¼šåœ¨çª—å£é‡ŒåµŒç½‘é¡µï¼ˆiframeã€webviewã€WebContentsViewï¼‰ã€‚</li>
<li><strong>å¯¼èˆªå†å²</strong>ï¼šçª—å£å†…å‰è¿›/åé€€ï¼ˆgoBack / goForwardï¼‰ã€‚</li>
<li><strong>åœ¨çº¿/ç¦»çº¿</strong>ï¼šæ£€æµ‹ç½‘ç»œçŠ¶æ€ï¼Œåšç¦»çº¿æç¤ºæˆ–ç¼“å­˜ç­–ç•¥ã€‚</li>
</ul>
<p><strong>ä»“åº“å¯¹åº”ï¼š</strong> <code>draganddrop</code>ã€<code>recentdocuments</code>ã€<code>web-embeds</code>ã€<code>navigationHistory</code>ã€<code>onlineofflineevents</code>ã€‚</p>
<hr/>
<h4 data-id="heading-9">6. å…¶ä»–å¸¸ç”¨èƒ½åŠ›</h4>
<ul>
<li><strong>ç¦»å±æ¸²æŸ“</strong>ï¼šåœ¨ä¸å¯è§çš„ç”»å¸ƒä¸Šæ¸²æŸ“ï¼ˆä¾‹å¦‚ç”Ÿæˆå›¾ã€PDFï¼‰ã€‚</li>
<li><strong>æ‹¼å†™æ£€æŸ¥</strong>ï¼šç³»ç»Ÿçº§æ‹¼å†™æ£€æŸ¥é›†æˆã€‚</li>
</ul>
<p><strong>ä»“åº“å¯¹åº”ï¼š</strong> <code>offscreenrendering</code>ã€<code>spellchecker</code>ã€‚</p>
<hr/>
<h4 data-id="heading-10">7. å­¦ä¹ ä¸é¢è¯•</h4>
<p>ä»“åº“å†…å¸¦ <strong>paper</strong> ç›®å½•ï¼š3 å¥— Electron é¢è¯•å·ï¼Œå„ 100 åˆ†ï¼Œå«ç­”æ¡ˆä¸è§£æï¼Œé€‚åˆè€ƒå‰è‡ªæŸ¥ã€‚</p>
<hr/>
<h3 data-id="heading-11">å››ã€æ¡ˆä¾‹ç›®å½•ä¸€è§ˆï¼ˆæŒ‰éœ€è¿›ç›®å½•çœ‹ readme å’Œä»£ç ï¼‰</h3>
<p>ä¸‹é¢è¡¨æ ¼é‡Œçš„<strong>ç›®å½•å</strong>ï¼Œåœ¨ä»“åº“é‡Œå¯¹åº”ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œç‚¹è¿›å»æœ‰ <strong>readme</strong> å’Œ<strong>å¯è¿è¡Œä»£ç </strong>ã€‚ä¸åŒå­é¡¹ç›®å¯èƒ½æœ‰ä¸åŒå¯åŠ¨å‘½ä»¤ï¼ˆå¦‚ <code>npm run start:1</code>ã€<code>start:2</code>ï¼‰ï¼Œä»¥è¯¥ç›®å½•ä¸‹çš„ readme ä¸ºå‡†ã€‚</p>





















































































































































<table><thead><tr><th>åˆ†ç±»</th><th>åºå·</th><th>ç›®å½•</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>å…¥é—¨</td><td>1</td><td>tutorial-first-app</td><td>ç¬¬ä¸€ä¸ªåº”ç”¨ï¼ˆä¸»è¿›ç¨‹ã€æ¸²æŸ“è¿›ç¨‹ã€preloadã€IPC å…¥é—¨ï¼‰</td></tr><tr><td>çª—å£ä¸ UI</td><td>2</td><td>darkmode</td><td>é»‘æš—æ¨¡å¼ / ä¸»é¢˜åˆ‡æ¢</td></tr><tr><td/><td>3</td><td>windows-taskbar</td><td>Windows ä»»åŠ¡æ ï¼ˆJumpListã€ç¼©ç•¥å›¾ã€å åŠ å›¾æ ‡ã€é—ªçƒï¼‰</td></tr><tr><td/><td>4</td><td>window-customization</td><td>è‡ªå®šä¹‰çª—å£ï¼ˆæ— è¾¹æ¡†ã€è‡ªå®šä¹‰æ ‡é¢˜æ ã€æ‹–æ‹½åŒºåŸŸï¼‰</td></tr><tr><td/><td>5</td><td>progressbar</td><td>ä»»åŠ¡æ /Dock è¿›åº¦æ¡</td></tr><tr><td>è¿›ç¨‹ä¸é€šä¿¡</td><td>6</td><td>ipc</td><td>è¿›ç¨‹é—´é€šä¿¡ï¼ˆå•å‘/åŒå‘ã€ä¸»â†’æ¸²æŸ“ï¼‰</td></tr><tr><td/><td>7</td><td>message-ports</td><td>æ¶ˆæ¯ç«¯å£ï¼ˆMessageChannelã€æµå¼å›å¤ï¼‰</td></tr><tr><td/><td>8</td><td>efficiency-process</td><td>æ•ˆç‡è¿›ç¨‹ï¼ˆUtility Processã€MessagePortï¼‰</td></tr><tr><td/><td>9</td><td>multithreading</td><td>å¤šçº¿ç¨‹ï¼ˆWeb Workersï¼‰</td></tr><tr><td/><td>10</td><td>sandbox</td><td>è¿›ç¨‹æ²™ç›’ä¸å®‰å…¨é…ç½®</td></tr><tr><td>ç³»ç»Ÿä¸åŸç”Ÿ</td><td>11</td><td>menus</td><td>èœå•ï¼ˆåº”ç”¨èœå•ã€ä¸Šä¸‹æ–‡èœå•ã€æ‰˜ç›˜ï¼‰</td></tr><tr><td/><td>12</td><td>keyboardshortcut</td><td>é”®ç›˜å¿«æ·é”®ï¼ˆå±€éƒ¨ã€å…¨å±€ã€çª—å£å†…ï¼‰</td></tr><tr><td/><td>13</td><td>notificationsDemo</td><td>ç³»ç»Ÿé€šçŸ¥ï¼ˆä¸»è¿›ç¨‹/æ¸²æŸ“è¿›ç¨‹ï¼‰</td></tr><tr><td/><td>14</td><td>bluetooth</td><td>è®¾å¤‡è®¿é—®ï¼ˆå¦‚è“ç‰™ï¼‰</td></tr><tr><td/><td>15</td><td>deeplinks</td><td>æ·±åº¦é“¾æ¥ï¼ˆè‡ªå®šä¹‰åè®®ã€ä»é“¾æ¥å”¤èµ·åº”ç”¨ï¼‰</td></tr><tr><td>æ–‡ä»¶ä¸æ–‡æ¡£</td><td>16</td><td>draganddrop</td><td>æ–‡ä»¶æ‹–æ‹½ï¼ˆæ‹–å‡ºåˆ°æ¡Œé¢/èµ„æºç®¡ç†å™¨ï¼‰</td></tr><tr><td/><td>17</td><td>recentdocuments</td><td>æœ€è¿‘æ–‡ä»¶ï¼ˆç³»ç»Ÿæœ€è¿‘æ–‡æ¡£åˆ—è¡¨ï¼‰</td></tr><tr><td>Web ä¸å¯¼èˆª</td><td>18</td><td>web-embeds</td><td>Web åµŒå…¥ï¼ˆiframeã€webviewã€WebContentsViewï¼‰</td></tr><tr><td/><td>19</td><td>navigationHistory</td><td>å¯¼èˆªå†å²ï¼ˆå‰è¿›/åé€€ï¼‰</td></tr><tr><td/><td>20</td><td>onlineofflineevents</td><td>åœ¨çº¿/ç¦»çº¿äº‹ä»¶</td></tr><tr><td>å…¶ä»–</td><td>21</td><td>offscreenrendering</td><td>ç¦»å±æ¸²æŸ“</td></tr><tr><td/><td>22</td><td>spellchecker</td><td>æ‹¼å†™æ£€æŸ¥å™¨</td></tr><tr><td>å­¦ä¹ ä¸é¢è¯•</td><td>23</td><td>paper</td><td>Electron é¢è¯•å·ï¼ˆ3 å¥—ï¼Œå«ç­”æ¡ˆä¸è§£æï¼‰</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-12">äº”ã€å»å“ªçœ‹ä»£ç ï¼Ÿä»“åº“åœ¨è¿™é‡Œ</h3>
<p>ä»¥ä¸Šæ‰€æœ‰ç¤ºä¾‹çš„<strong>å®Œæ•´ä»£ç ã€è¿è¡Œå‘½ä»¤å’Œè¯´æ˜</strong>éƒ½åœ¨ä¸‹é¢è¿™ä¸ªä»“åº“é‡Œï¼Œæ¯ä¸ªæ¡ˆä¾‹ç‹¬ç«‹å¯è¿è¡Œï¼ŒæŒ‰ç›®å½•å³å¯æ‰¾åˆ°å¯¹åº” readme å’Œä»£ç ã€‚</p>
<p><strong>ä»“åº“åœ°å€ï¼š</strong> [<a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Fsharetoyouclub%2Felectron-demo" target="_blank" title="https://gitee.com/sharetoyouclub/electron-demo" ref="nofollow noopener noreferrer">gitee.com/sharetoyoucâ€¦</a>]</p>
<p>å…‹éš†åï¼Œè¿›å…¥ä»»æ„ç›®å½•æ‰§è¡Œ <code>npm install</code>ï¼Œå†æŒ‰è¯¥ç›®å½• readme çš„è„šæœ¬è¿è¡Œå³å¯ã€‚MIT è®¸å¯ï¼Œæ¬¢è¿ Starã€Forkï¼Œæˆ–æ Issue / PRã€‚</p>
<hr/>
<p><em>æœ¬æ–‡åŸºäº Electron å®˜æ–¹æ–‡æ¡£ä¸ç¤ºä¾‹æ•´ç†ï¼Œæ—¨åœ¨å¸®åŠ©åˆå­¦è€…å’Œå¼€å‘è€…å¿«é€Ÿå»ºç«‹çŸ¥è¯†åœ°å›¾å¹¶æ‰¾åˆ°å¯è¿è¡Œç¤ºä¾‹ã€‚</em></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[IDEA + Codex Â· 32ai é›¶é­”æ³•ç›´è¿å„æ¨¡å‹]]></title>    <link>https://juejin.cn/post/7605941424536109110</link>    <guid>https://juejin.cn/post/7605941424536109110</guid>    <pubDate>2026-02-13T04:09:44.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605941424536109110" data-draft-id="7605807405307723839" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="IDEA + Codex Â· 32ai é›¶é­”æ³•ç›´è¿å„æ¨¡å‹"/> <meta itemprop="keywords" content="OpenAI,AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2026-02-13T04:09:44.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¹å¤–ä¹‹éŸ³"/> <meta itemprop="url" content="https://juejin.cn/user/2666763911448411"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            IDEA + Codex Â· 32ai é›¶é­”æ³•ç›´è¿å„æ¨¡å‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2666763911448411/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¹å¤–ä¹‹éŸ³
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-13T04:09:44.000Z" title="Fri Feb 13 2026 04:09:44 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸ§  IDEA + Codex Â· 32ai é›¶é­”æ³•ç›´è¿å„æ¨¡å‹</h2>
<blockquote>
<p>å®Œæ•´æ•™ç¨‹â€”â€”ä»å®‰è£…Codexåˆ°ä½¿ç”¨è‡ªå®šä¹‰ç«¯ç‚¹ï¼Œæ¯ä¸€æ­¥éƒ½åŒ…å«é…ç½®æˆªå›¾å ä½ä¸è¯¦ç»†è§£é‡Šã€‚åŸºäº<strong>32aiä¸­è½¬å¹³å°</strong>ï¼Œç›´è¿ã€ç¨³å®šã€ä½ä»·ã€‚</p>
</blockquote>
<h3 data-id="heading-1">ç›®å½•</h3>
<ul>
<li><a href="#%E5%AE%89%E8%A3%85-codex" title="#%E5%AE%89%E8%A3%85-codex">å®‰è£… Codex</a></li>
<li><a href="#idea-%E6%8F%92%E4%BB%B6%E6%90%9C%E7%B4%A2--%E5%AE%89%E8%A3%85" title="#idea-%E6%8F%92%E4%BB%B6%E6%90%9C%E7%B4%A2--%E5%AE%89%E8%A3%85">IDEA æ’ä»¶æœç´¢ &amp; å®‰è£…</a></li>
<li><a href="#%E4%BF%AE%E6%94%B9%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6-configtoml" title="#%E4%BF%AE%E6%94%B9%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6-configtoml">ä¿®æ”¹é…ç½®æ–‡ä»¶ config.toml</a></li>
<li><a href="#%E8%8E%B7%E5%8F%96-32ai-api-key" title="#%E8%8E%B7%E5%8F%96-32ai-api-key">è·å– 32ai API Key</a></li>
<li><a href="#%E4%BF%AE%E6%94%B9%E8%AE%A4%E8%AF%81%E6%96%87%E4%BB%B6-authjson" title="#%E4%BF%AE%E6%94%B9%E8%AE%A4%E8%AF%81%E6%96%87%E4%BB%B6-authjson">ä¿®æ”¹è®¤è¯æ–‡ä»¶ auth.json</a></li>
<li><a href="#idea-%E4%B8%AD%E5%90%AF%E5%8A%A8-codex" title="#idea-%E4%B8%AD%E5%90%AF%E5%8A%A8-codex">IDEA ä¸­å¯åŠ¨ Codex</a></li>
<li><a href="#%E9%AA%8C%E8%AF%81%E6%A8%A1%E5%9E%8B--%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E7%94%9F%E6%95%88" title="#%E9%AA%8C%E8%AF%81%E6%A8%A1%E5%9E%8B--%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E7%94%9F%E6%95%88">éªŒè¯æ¨¡å‹ &amp; é…ç½®æ–‡ä»¶ç”Ÿæ•ˆ</a></li>
<li><a href="#%E4%BB%BB%E5%8A%A1%E6%B5%8B%E8%AF%95--%E5%AE%8C%E6%88%90%E9%9B%86%E6%88%90" title="#%E4%BB%BB%E5%8A%A1%E6%B5%8B%E8%AF%95--%E5%AE%8C%E6%88%90%E9%9B%86%E6%88%90">ä»»åŠ¡æµ‹è¯• Â· å®Œæˆé›†æˆ</a></li>
</ul>
<h3 data-id="heading-2">å®‰è£… Codex</h3>
<p>å…¨å±€å®‰è£… <code>@openai/codex</code> åŒ…ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">npm install -g @openai/codex
</code></pre>
<h3 data-id="heading-3">IDEA æ’ä»¶æœç´¢ &amp; å®‰è£…</h3>
<p>åœ¨ IntelliJ IDEA ä¸­æœç´¢æ’ä»¶ <strong>Codex</strong> å¹¶ä¸‹è½½å®‰è£…ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b3a12bb7031d4773801bd12ac878a4fb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54655aSW5LmL6Z-z:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771560584&amp;x-signature=khQIhaspesIEVofa9WLTLQDEQb0%3D" alt="å±å¹•æˆªå›¾ 2026-02-13 094222.png" loading="lazy"/></p>
<h3 data-id="heading-4">ä¿®æ”¹é…ç½®æ–‡ä»¶ config.toml</h3>
<p>Codex é…ç½®ä¼˜å…ˆçº§ï¼ˆä»é«˜åˆ°ä½ï¼‰ï¼š
<code>CLIæ ‡å¿—</code> â†’ <code>å‰–é¢å€¼ --profile</code> â†’ é¡¹ç›®çº§ <code>.codex/config.toml</code> â†’ ç”¨æˆ·çº§ â†’ ç³»ç»Ÿçº§ â†’ å†…ç½®é»˜è®¤ã€‚</p>
<p><strong>Windows ç”¨æˆ·é…ç½®è·¯å¾„</strong>ï¼ˆä¸å­˜åœ¨åˆ™åˆ›å»ºï¼‰ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">~/.codex/config.toml   <span class="hljs-comment"># ç”¨æˆ·é…ç½®</span>
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d426d730f97745d2899dfcf296027e17~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54655aSW5LmL6Z-z:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771560584&amp;x-signature=bjW%2BQ3ebYXYL1KEvDHn3YuNeOGY%3D" alt="å±å¹•æˆªå›¾ 2026-02-13 113420.png" loading="lazy"/></p>
<h4 data-id="heading-5">ğŸ“‹ ç›´æ¥å¤åˆ¶ä»¥ä¸‹å†…å®¹åˆ° config.toml</h4>
<pre><code class="hljs language-toml" lang="toml"><span class="hljs-attr">model_provider</span> = <span class="hljs-string">"32ai"</span>
<span class="hljs-attr">model</span> = <span class="hljs-string">"gpt-5-codex"</span>

<span class="hljs-comment"># Reasoning effort: minimal | low | medium | high | xhigh (default: medium; xhigh on gpt-5.2-codex and gpt-5.2)</span>
<span class="hljs-attr">model_reasoning_effort</span> = <span class="hljs-string">"medium"</span>

<span class="hljs-comment"># Reasoning summary: auto | concise | detailed | none (default: auto)</span>
<span class="hljs-attr">model_reasoning_summary</span> = <span class="hljs-string">"auto"</span>

<span class="hljs-comment"># Text verbosity for GPT-5 family (Responses API): low | medium | high (default: medium)</span>
<span class="hljs-attr">model_verbosity</span> = <span class="hljs-string">"medium"</span>

<span class="hljs-comment"># Force-enable reasoning summaries for current model (default: false)</span>
<span class="hljs-attr">model_supports_reasoning_summaries</span> = <span class="hljs-literal">false</span>
<span class="hljs-attr">disable_response_storage</span> = <span class="hljs-literal">true</span>
<span class="hljs-attr">preferred_auth_method</span> = <span class="hljs-string">"apikey"</span>

<span class="hljs-comment"># Optional manual model metadata...</span>
<span class="hljs-comment"># model_context_window = 128000</span>
<span class="hljs-comment"># model_auto_compact_token_limit = 0</span>
<span class="hljs-comment"># tool_output_token_limit = 10000</span>
<span class="hljs-comment"># log_dir = "/absolute/path/to/codex-logs"</span>

<span class="hljs-attr">approval_policy</span> = <span class="hljs-string">"on-request"</span>

<span class="hljs-section">[model_providers]</span>

<span class="hljs-comment"># --- 32ai è‡ªå®šä¹‰æä¾›å•† ---</span>
<span class="hljs-section">[model_providers.32ai]</span>
<span class="hljs-attr">name</span> = <span class="hljs-string">"32ai"</span>
<span class="hljs-attr">base_url</span> = <span class="hljs-string">"https://ai.32zi.com/v1"</span>        <span class="hljs-comment"># æ ¸å¿ƒç«¯ç‚¹</span>
<span class="hljs-attr">wire_api</span> = <span class="hljs-string">"responses"</span>                           <span class="hljs-comment"># "responses" | "chat"</span>
<span class="hljs-attr">requires_openai_auth</span> = <span class="hljs-literal">true</span>                    
<span class="hljs-attr">request_max_retries</span> = <span class="hljs-number">4</span>                        
<span class="hljs-attr">stream_max_retries</span> = <span class="hljs-number">5</span>                         
<span class="hljs-attr">stream_idle_timeout_ms</span> = <span class="hljs-number">300000</span>                
<span class="hljs-comment"># experimental_bearer_token = ""       </span>
<span class="hljs-comment"># http_headers = { "X-Example" = "value" }</span>

<span class="hljs-section">[profiles]</span>

<span class="hljs-section">[profiles.32ai]</span>
<span class="hljs-attr">model</span> = <span class="hljs-string">"gpt-5-codex"</span>
<span class="hljs-attr">model_provider</span> = <span class="hljs-string">"32ai"</span>
<span class="hljs-attr">approval_policy</span> = <span class="hljs-string">"on-request"</span>
<span class="hljs-attr">sandbox_mode</span> = <span class="hljs-string">"read-only"</span>
<span class="hljs-comment"># oss_provider = "ollama"</span>
<span class="hljs-attr">model_reasoning_effort</span> = <span class="hljs-string">"medium"</span>
<span class="hljs-attr">model_reasoning_summary</span> = <span class="hljs-string">"auto"</span>
<span class="hljs-attr">model_verbosity</span> = <span class="hljs-string">"medium"</span>
<span class="hljs-attr">personality</span> = <span class="hljs-string">"friendly"</span> <span class="hljs-comment"># or "pragmatic" or "none"</span>
<span class="hljs-comment"># chatgpt_base_url = "https://ai.32zi.com/v1"</span>
<span class="hljs-attr">include_apply_patch_tool</span> = <span class="hljs-literal">false</span>
<span class="hljs-attr">experimental_use_unified_exec_tool</span> = <span class="hljs-literal">false</span>
<span class="hljs-attr">experimental_use_freeform_apply_patch</span> = <span class="hljs-literal">false</span>
<span class="hljs-attr">tools.web_search</span> = <span class="hljs-literal">false</span>             

<span class="hljs-section">[notice.model_migrations]</span>
<span class="hljs-attr">gpt-5-codex</span> = <span class="hljs-string">"gpt-5.3-codex"</span>
<span class="hljs-attr">"gpt-5.2-codex"</span> = <span class="hljs-string">"gpt-5.3-codex"</span>
<span class="hljs-comment"># features = { unified_exec = false }</span>
</code></pre>
<p>ğŸ”— å‚è€ƒç¤ºä¾‹æ¥è‡ª <a href="https://link.juejin.cn?target=https%3A%2F%2Fdevelopers.openai.com%2Fcodex%2Fconfig-sample" target="_blank" title="https://developers.openai.com/codex/config-sample" ref="nofollow noopener noreferrer">developers.openai.com/codex/confiâ€¦</a> (å·²é€‚é…32ai)</p>
<h3 data-id="heading-6">è·å– 32ai API Key</h3>
<p>å‰å¾€ä¸­è½¬å¹³å° <strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fai.32zi.com" target="_blank" title="https://ai.32zi.com" ref="nofollow noopener noreferrer">ai.32zi.com</a></strong> æ³¨å†Œ/ç™»å½•ï¼Œç”Ÿæˆ API å¯†é’¥ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/875059ec08c74ffab17ae804945fc458~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54655aSW5LmL6Z-z:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771560584&amp;x-signature=JFrQD%2BpEaT7AJWzn5Y4U5NtfzL8%3D" alt="å±å¹•æˆªå›¾ 2026-02-12 171825.png" loading="lazy"/></p>
<h4 data-id="heading-7">âš¡ 32ai ä¼˜åŠ¿</h4>
<p><strong>ä½ä»· Â· ç¨³å®š Â· ç›´è¿ Â· å…é­”æ³•</strong></p>
<p><strong>ä»·æ ¼ 0.56 : 1</strong></p>
<h3 data-id="heading-8">ä¿®æ”¹è®¤è¯æ–‡ä»¶ auth.json</h3>
<p>åœ¨ Codex é…ç½®ç›®å½•ï¼ˆé€šå¸¸æ˜¯ç”¨æˆ·çº§ <code>~/.codex/</code>ï¼‰åˆ›å»ºæˆ–ç¼–è¾‘ <strong>auth.json</strong>ï¼Œå¡«å…¥ä½ çš„ API keyã€‚</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"auth_mode"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"apikey"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"OPENAI_API_KEY"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ä½ çš„32ai_api_key_ç²˜è´´åœ¨æ­¤"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f011b735ee1f4b44988c9be92c567a59~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54655aSW5LmL6Z-z:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771560584&amp;x-signature=H5mqJ8YH3u4lgHhVMjoJpV5mC4I%3D" alt="å±å¹•æˆªå›¾ 2026-02-13 113420.png" loading="lazy"/></p>
<blockquote>
<p>âš ï¸ <strong>OPENAI_API_KEY</strong> å°±æ˜¯ä¸­è½¬å¹³å° <a href="https://link.juejin.cn?target=https%3A%2F%2Fai.32zi.com" target="_blank" title="https://ai.32zi.com" ref="nofollow noopener noreferrer">ai.32zi.com</a> è·å–çš„å¯†é’¥ã€‚</p>
</blockquote>
<h3 data-id="heading-9">IDEA ä¸­å¯åŠ¨ Codex</h3>
<p>è¿”å› IDEAï¼Œæ‰¾åˆ° Codex æ’ä»¶å›¾æ ‡ï¼ˆé€šå¸¸ä½äºå³ä¾§è¾¹æ æˆ–å·¥å…·çª—å£ï¼‰ï¼Œç‚¹å‡»å¯åŠ¨ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9212df1ecb724b32a417dc863405ce7c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54655aSW5LmL6Z-z:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771560584&amp;x-signature=Rs63Qowl6nTa4uOQ%2FsT8Tr49aJE%3D" alt="å±å¹•æˆªå›¾ 2026-02-13 114038.png" loading="lazy"/></p>
<h3 data-id="heading-10">éªŒè¯æ¨¡å‹ &amp; é…ç½®æ–‡ä»¶ç”Ÿæ•ˆ</h3>
<p>å¯åŠ¨åç›´æ¥æŸ¥çœ‹å½“å‰ä½¿ç”¨çš„æ¨¡å‹ï¼Œåº”å½“æ˜¾ç¤º <code>gpt-5-codex</code>ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bb3189867a314b0b9c864a8384957e70~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54655aSW5LmL6Z-z:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771560584&amp;x-signature=ASIzPjwxoq6Jnz5H0SfyUsSa3tY%3D" alt="å±å¹•æˆªå›¾ 2026-02-13 113110.png" loading="lazy"/></p>
<h3 data-id="heading-11">ä»»åŠ¡æµ‹è¯• Â· å®Œæˆé›†æˆ</h3>
<p>ç»™å®ƒä¸€ä¸ªä»£ç ä»»åŠ¡æˆ–ä»»æ„æŒ‡ä»¤ï¼ŒéªŒè¯æ•´ä¸ªé“¾è·¯æ˜¯å¦æ­£å¸¸å·¥ä½œã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b7d9427661eb4ceaac24848951c04677~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54655aSW5LmL6Z-z:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771560584&amp;x-signature=dmUyZsZHbGCtkd07xuKYuw4rFss%3D" alt="å±å¹•æˆªå›¾ 2026-02-13 113055.png" loading="lazy"/></p>
<blockquote>
<p>ğŸ‰ <strong>æ­å–œï¼IDEA + Codex (32ai) å·²æˆåŠŸé›†æˆã€‚</strong> ç°åœ¨ä½ å¯ä»¥ä½¿ç”¨è‡ªå®šä¹‰ç«¯ç‚¹ï¼ŒåŸºäº GPT-5-Codex æ¨¡å‹è¿›è¡Œå¼€å‘ã€é—®ç­”ç­‰ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-12">ğŸ’° ä¸ºä»€ä¹ˆé€‰æ‹© 32aiï¼Ÿ</h3>
<p><strong>ä½è‡³ 0.56 : 1 æ¯”ç‡</strong></p>

















<table><thead><tr><th>åŠŸèƒ½</th><th>ä¼˜åŠ¿</th></tr></thead><tbody><tr><td>ä»·æ ¼æ–¹æ¡ˆ</td><td><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bf2e0b80784d4ae590d8e93bd4ed2319~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54655aSW5LmL6Z-z:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771560584&amp;x-signature=umDnomRYz6UjZcX5UzI6bJEK3Kg%3D" alt="å±å¹•æˆªå›¾ 2026-02-12 172853.png" loading="lazy"/></td></tr><tr><td>è®¡è´¹è¯´æ˜</td><td><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4357e4e48ef543c5a67011de31b81c96~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54655aSW5LmL6Z-z:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771560584&amp;x-signature=4OatHyWOTFmH69E7U1GyWwlezLA%3D" alt="å±å¹•æˆªå›¾ 2026-02-12 173008.png" loading="lazy"/></td></tr></tbody></table>
<p>ğŸ”— <strong>å¿«é€Ÿè®¿é—®</strong>: <a href="https://link.juejin.cn?target=https%3A%2F%2Fai.32zi.com" target="_blank" title="https://ai.32zi.com" ref="nofollow noopener noreferrer">ai.32zi.com</a> â€” ç›´è¿ã€æ— éœ€é­”æ³•ã€‚</p>
<h3 data-id="heading-13">ğŸ“Œ é…ç½®å¤‡å¿˜</h3>
<ul>
<li>ä½¿ç”¨ç”¨æˆ·é…ç½® (<code>~/.codex/config.toml</code>) å…¨å±€ç”Ÿæ•ˆ</li>
<li>é…ç½®èŠ‚ <code>[model_providers.32ai]</code> å®šä¹‰ base_url = <a href="https://link.juejin.cn?target=https%3A%2F%2Fai.32zi.com%2Fv1" target="_blank" title="https://ai.32zi.com/v1" ref="nofollow noopener noreferrer">ai.32zi.com/v1</a> ä»¥åŠ wire_api = responses</li>
<li>é€šè¿‡ <code>[profiles.32ai]</code> å…³è”æä¾›å•†ä¸æ¨¡å‹ï¼Œpersonality å¯é€‰ friendly / pragmatic</li>
<li>è¿ç§»é€šçŸ¥ï¼š<code>gpt-5-codex â†’ gpt-5.3-codex</code> è‡ªåŠ¨æ˜ å°„</li>
<li>æ›´å¤šé«˜çº§å‚æ•°ï¼ˆæ—¥å¿—ã€ä¸Šä¸‹æ–‡çª—å£ï¼‰å¯æŒ‰éœ€å–æ¶ˆæ³¨é‡Š</li>
</ul>
<h4 data-id="heading-14">ğŸ”„ å®˜æ–¹æ¨¡å‹è¿ç§» (notice.model_migrations)</h4>
<p><code>gpt-5-codex</code> â†’ <code>gpt-5.3-codex</code> Â Â Â  <code>gpt-5.2-codex</code> â†’ <code>gpt-5.3-codex</code></p>
<hr/>
<p>âš¡ <strong>IDEA + Codex + 32ai</strong> å…¨æµç¨‹é›†æˆå®Œæ¯•ã€‚</p>
<p>äº«å—ä½ä»·ã€ç¨³å®šã€æ— éœ€ä»£ç†çš„GPT-5-Codexç¼–ç¨‹ä½“éªŒã€‚</p>
<hr/>
<p><strong>åŸåˆ›å£°æ˜</strong>ï¼šæœ¬æ–‡ä¸ºåŸåˆ›æ•™ç¨‹ï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„</p>
<p>æ¬¢è¿åœ¨è¯„è®ºåŒºäº¤æµè®¨è®ºï¼å¦‚æœè§‰å¾—æœ‰å¸®åŠ©ï¼Œè¯·ç‚¹èµæ”¶è—æ”¯æŒï½</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€ä¿å§†çº§æ•™ç¨‹ã€‘Claude Code è¿›é˜¶æŒ‡å—ï¼šç”¨ Everything Claude Code æ‰“é€ æ›´æœ‰â€œè®°å¿†â€çš„ AI ç¨‹åºå‘˜]]></title>    <link>https://juejin.cn/post/7605811866908786697</link>    <guid>https://juejin.cn/post/7605811866908786697</guid>    <pubDate>2026-02-13T04:05:41.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605811866908786697" data-draft-id="7605817795628974130" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€ä¿å§†çº§æ•™ç¨‹ã€‘Claude Code è¿›é˜¶æŒ‡å—ï¼šç”¨ Everything Claude Code æ‰“é€ æ›´æœ‰â€œè®°å¿†â€çš„ AI ç¨‹åºå‘˜"/> <meta itemprop="keywords" content="AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2026-02-13T04:05:41.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æåŒå­¦Lino"/> <meta itemprop="url" content="https://juejin.cn/user/3085689267423785"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€ä¿å§†çº§æ•™ç¨‹ã€‘Claude Code è¿›é˜¶æŒ‡å—ï¼šç”¨ Everything Claude Code æ‰“é€ æ›´æœ‰â€œè®°å¿†â€çš„ AI ç¨‹åºå‘˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3085689267423785/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æåŒå­¦Lino
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-13T04:05:41.000Z" title="Fri Feb 13 2026 04:05:41 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»13åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ä¹‹å‰çš„æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬æˆåŠŸåœ¨ Windows 11 ç¯å¢ƒä¸‹æŠŠ Anthropic çš„â€œç¼–ç¨‹ç¥å™¨â€ <strong>Claude Code</strong> è·‘äº†èµ·æ¥ã€‚ç›¸ä¿¡å¾ˆå¤šæœ‹å‹åœ¨ä½“éªŒè¿‡é‚£ç§â€œè¿™æ‰æ˜¯æœªæ¥ç¼–ç¨‹â€çš„å¿«æ„Ÿåï¼Œéƒ½è·Ÿæˆ‘ä¸€æ ·å¤§å—éœ‡æ’¼ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a01bef3be37a436e9000e85e876d02d8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5p2O5ZCM5a2mTGlubw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771560341&amp;x-signature=Q%2FGgJUFqUhlty6ptCPoDDF9pw1U%3D" alt="" loading="lazy"/></p>
<p>ä½†æ˜¯ï¼Œéšç€æˆ‘æœ€è¿‘åœ¨é«˜å¼ºåº¦çš„å¼€å‘å®æˆ˜ï¼ˆç‰¹åˆ«æ˜¯ç”¨æ¥å†™ç¨å¾®å¤æ‚ä¸€ç‚¹çš„ AI æ™ºèƒ½ä½“é¡¹ç›®ï¼‰ä¸­æ·±å…¥ä½¿ç”¨ï¼Œæˆ‘å‘ç°è¿™ä½â€œå¤©æ‰ç¨‹åºå‘˜â€ä¹Ÿæœ‰å®ƒçš„è½¯è‚‹ï¼š</p>
<ol>
<li>
<p><strong>å®ƒæ˜¯â€œé‡‘é±¼è®°å¿†â€</strong>ï¼šä¸€æ—¦å¯¹è¯å˜é•¿ï¼Œæˆ–è€…éš”å¤©å†æ‰“å¼€ï¼Œå®ƒå°±å¿˜äº†ä¹‹å‰çš„é¡¹ç›®æ¶æ„å’Œå†³ç­–ï¼Œä½ å¾—è´¹åŠ²åœ°é‡æ–°æŠŠä¸Šä¸‹æ–‡â€œå–‚â€ç»™å®ƒã€‚</p>
</li>
<li>
<p><strong>å®ƒæ˜¯â€œéšæ€§æ´¾â€</strong>ï¼šæœ‰æ—¶ä½ å¾—åå¤å¼ºè°ƒâ€œè¯·ç”¨ TypeScriptâ€ã€â€œè¯·éµå¾ªè¿™ä¸ªæ–‡ä»¶ç»“æ„â€ï¼Œå®ƒæ‰è‚¯ä¹–ä¹–å¬è¯ï¼Œéå¸¸æ¶ˆè€— Token å’Œè€å¿ƒã€‚</p>
</li>
<li>
<p><strong>å®ƒç¼ºä¹â€œå·¥ç¨‹ç›´è§‰â€</strong>ï¼šåŸç”Ÿçš„ Claude Code å¾ˆå¼ºï¼Œä½†å®ƒæ›´åƒæ˜¯ä¸€ä¸ªåœ¨å¤§å‚å¾…è¿‡çš„â€œå¤–åŒ…â€ï¼Œè™½ç„¶æ´»å„¿å¥½ï¼Œä½†ä¸æ‡‚ä½ çš„é¡¹ç›®ä¹ æƒ¯ã€‚</p>
</li>
</ol>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bd8d41fa7c0a42fbb4d6652f461645f9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5p2O5ZCM5a2mTGlubw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771560341&amp;x-signature=TEFEpiLRb9L9IczITwqgMvy%2FrPI%3D" alt="" loading="lazy"/></p>
<p><strong>è¿™å°±å¼•å‡ºäº†ä»Šå¤©çš„ä¸»è§’ â€”â€” Everything Claude Codeã€‚</strong>
å¦‚æœæŠŠ Claude Code æ¯”ä½œä¸€æŠŠç»ä¸–å¥½å‰‘ï¼Œé‚£ä¹ˆ <strong>Everything Claude Code</strong> å°±æ˜¯é‚£æœ¬å¤±ä¼ å·²ä¹…çš„â€œå‰‘è°±â€ã€‚è¿™æ˜¯ç›®å‰ GitHub ä¸Šæœ€ç«çš„ Claude Code é…ç½®é›†åˆï¼ˆç”± Anthropic Hackathon å† å†› Affaan Mustafa å¼€å‘ï¼‰ï¼Œå®ƒé€šè¿‡ä¸€ç³»åˆ—å·§å¦™çš„ <strong>Rulesï¼ˆè§„åˆ™ï¼‰</strong>ã€<strong>Skillsï¼ˆæŠ€èƒ½ï¼‰</strong> å’Œ <strong>Hooksï¼ˆé’©å­ï¼‰</strong>ï¼Œå½»åº•è§£å†³äº†ä¸Šè¿°ç—›ç‚¹ã€‚
å®ƒèƒ½è®©ä½ çš„ AI åŠ©æ‰‹å­¦ä¼šâ€œè®°ç¬”è®°â€ï¼ˆæŒä¹…åŒ–è®°å¿†ï¼‰ã€å­¦ä¼šâ€œè‡ªæˆ‘åæ€â€ï¼ˆä»£ç å®¡æŸ¥ï¼‰ï¼Œç”šè‡³èƒ½è‡ªåŠ¨åŒ–ç”Ÿæˆæ–‡æ¡£ã€‚
<strong>å¼€æºé“¾æ¥</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Faffaan-m%2Feverything-claude-code" target="_blank" title="https://github.com/affaan-m/everything-claude-code" ref="nofollow noopener noreferrer">github.com/affaan-m/evâ€¦</a></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a88eaceb474d4726a8e2dcc52c3523da~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5p2O5ZCM5a2mTGlubw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771560341&amp;x-signature=zLH7HVrxrGGqIrs1H9kRIDarJo8%3D" alt="" loading="lazy"/></p>
<p>ä»Šå¤©è¿™ç¯‡è¿›é˜¶æ•™ç¨‹ï¼Œæˆ‘å°±æ‰‹æŠŠæ‰‹æ•™å¤§å®¶ï¼š<strong>å¦‚ä½•åœ¨ Windows 11 ç¯å¢ƒä¸‹ï¼ŒæŠŠè¿™å°±å¥—â€œæœ€å¼ºé…ç½®â€è£…è¿›ä½ çš„ Claude Code é‡Œï¼ŒæŠŠå®ƒä»ä¸€ä¸ªâ€œèŠå¤©æœºå™¨äººâ€è¿›åŒ–æˆä¸€ä¸ªçœŸæ­£æ‡‚ä½ ã€æœ‰è®°å¿†ã€èƒ½å¹²é‡æ´»çš„â€œèµ„æ·± AI å·¥ç¨‹å¸ˆâ€ã€‚</strong>
å‡†å¤‡å¥½äº†å—ï¼Ÿæˆ‘ä»¬è¦å¼€å§‹ç»™ AI â€œåšæ‰‹æœ¯â€äº†ã€‚</p>
<h2 data-id="heading-0">ç¬¬ä¸€éƒ¨åˆ†ï¼šç¯å¢ƒå‡†å¤‡ä¸å®‰è£…</h2>
<p>æˆ‘ä»¬è¦åšçš„ä¸æ˜¯å®‰è£…ä¸€ä¸ªæ–°è½¯ä»¶ï¼Œè€Œæ˜¯è¦æŠŠä¸€å¥—â€œç»ä¸–æ­¦åŠŸç§˜ç±â€ï¼ˆé…ç½®æ–‡ä»¶ï¼‰ä¸‹è½½ä¸‹æ¥ï¼Œç„¶åâ€œä¼ æˆâ€ï¼ˆå¤åˆ¶ï¼‰ç»™ä½ çš„ Claude Codeã€‚</p>
<h3 data-id="heading-1">æ£€æŸ¥ä½ çš„è£…å¤‡åº“ (ç¯å¢ƒè‡ªæ£€)</h3>
<p>åœ¨å¼€å§‹ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦ç¡®ä¿ä½ çš„ Windows 11 å·²ç»å‡†å¤‡å¥½äº†åŸºç¡€å·¥å…·ã€‚è¯·æ‰“å¼€ä½ çš„ <strong>PowerShell</strong> æˆ– <strong>ç»ˆç«¯ (Windows Terminal)</strong>ï¼Œä¾æ¬¡è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š
<strong>A. æ£€æŸ¥ Claude Code æ˜¯å¦å­˜æ´»</strong></p>
<pre><code class="hljs language-Markdown" lang="Markdown">claude --version
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3d910323d9214eb7b6f219122c85a09e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5p2O5ZCM5a2mTGlubw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771560341&amp;x-signature=Ag4emVjUKqfqKhzFJiuPTIw4Nw4%3D" alt="" loading="lazy"/></p>
<p><strong>æ­£å¸¸åé¦ˆ</strong>ï¼šä¼šå‡ºç°ç±»ä¼¼ <code>2.x.x</code> çš„ç‰ˆæœ¬å·ã€‚
<strong>å¦‚æœä¸æ­£å¸¸</strong>ï¼šè¯·å›çœ‹æˆ‘çš„ä¹‹å‰é‚£ç¯‡**<a href="https://link.juejin.cn?target=https%3A%2F%2Fmy.feishu.cn%2Fwiki%2FPFBJwgs5qioKL5kfAlOcuY8xnAe" target="_blank" title="https://my.feishu.cn/wiki/PFBJwgs5qioKL5kfAlOcuY8xnAe" ref="nofollow noopener noreferrer">ã€ŠClaude Code éƒ¨ç½²æ•™ç¨‹ã€‹</a>**ï¼Œå…ˆæŠŠ Claude Code è£…å¥½ã€‚
<strong>B. æ£€æŸ¥ Git æ˜¯å¦å®‰è£…</strong></p>
<pre><code class="hljs language-Markdown" lang="Markdown">git --version
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/154d35310fd34653bc9dc392c8a5dbdb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5p2O5ZCM5a2mTGlubw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771560341&amp;x-signature=Ki%2FsvLjVX68btnvILt6PaNLZCzg%3D" alt="" loading="lazy"/></p>
<p><strong>æ­£å¸¸åé¦ˆ</strong>ï¼šä¼šå‡ºç° <code>git version 2.x.x...</code>ã€‚
<strong>å¦‚æœä¸æ­£å¸¸</strong>ï¼šå» <a href="https://link.juejin.cn?target=https%3A%2F%2Fgit-scm.com%2Fdownload%2Fwin" target="_blank" title="https://git-scm.com/download/win" ref="nofollow noopener noreferrer">Git for Windows å®˜ç½‘</a> ä¸‹è½½å®‰è£…ã€‚</p>
<h2 data-id="heading-2">ç¬¬äºŒéƒ¨åˆ†ï¼šæ’ä»¶åŒ–æé€Ÿéƒ¨ç½²</h2>
<p>åœ¨ä»¥å‰ï¼Œç»™ Claude Code è£…é…ç½®éœ€è¦åƒæ¬ç –ä¸€æ ·æ‰‹åŠ¨å¤åˆ¶ä¸€å †æ–‡ä»¶ã€‚ä½†ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨ Claude Code åŸç”Ÿçš„<strong>æ’ä»¶å¸‚åœºï¼ˆPlugin Marketplaceï¼‰</strong> åŠŸèƒ½ï¼Œåƒç»™ Chrome è£…æ’ä»¶ä¸€æ ·ç®€å•ã€‚
æ•´ä¸ªè¿‡ç¨‹åªéœ€ <strong>3 æ­¥</strong>ï¼Œè€—æ—¶çº¦ <strong>2 åˆ†é’Ÿ</strong>ã€‚</p>
<h3 data-id="heading-3">ç¬¬ä¸€æ­¥ï¼šå®‰è£…â€œEverythingâ€æ’ä»¶æ ¸å¿ƒ</h3>
<p>æ‰“å¼€ä½ çš„ç»ˆç«¯ï¼ˆTerminal æˆ– PowerShellï¼‰ï¼Œä¸éœ€è¦ä¸‹è½½ä»»ä½• ZIP åŒ…ï¼Œç›´æ¥åœ¨ç»ˆç«¯é‡Œå’Œ Claude å¯¹è¯å³å¯ã€‚
<strong>å¯åŠ¨ Claude Code</strong>ï¼š</p>
<pre><code class="hljs language-Markdown" lang="Markdown">claude
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/94f942f63fc24bd4b0b0bdb1e1cce3da~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5p2O5ZCM5a2mTGlubw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771560341&amp;x-signature=rP5m%2BTpkt0tkA1UHiRoUF2Egry0%3D" alt="" loading="lazy"/></p>
<p><strong>æ·»åŠ æ’ä»¶å¸‚åœºæº</strong>ï¼š åœ¨ Claude çš„å¯¹è¯æ¡†ä¸­ï¼Œç›´æ¥è¾“å…¥ä»¥ä¸‹å‘½ä»¤å¹¶å›è½¦ï¼ˆè¿™ä¼šå‘Šè¯‰ Claude å»å“ªé‡Œæ‰¾è¿™ä¸ªæ’ä»¶ï¼‰ï¼š</p>
<pre><code class="hljs language-Markdown" lang="Markdown">/plugin marketplace add affaan-m/everything-claude-code
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8a7eeccc6c85470eb4707a5aaa9b1743~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5p2O5ZCM5a2mTGlubw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771560341&amp;x-signature=SyYcR88ZQ7swN1o42DhipcU26X0%3D" alt="" loading="lazy"/>
ä¸€é”®å®‰è£…æ’ä»¶ï¼Œæ¥ç€è¾“å…¥ï¼š</p>
<pre><code class="hljs language-Markdown" lang="Markdown">/plugin install everything-claude-code@everything-claude-code
</code></pre>
<p>è¾“å…¥å®‰è£…å‘½ä»¤å¹¶å›è½¦åï¼Œç»ˆç«¯ä¼šå‡ºç°ä¸€ä¸ªäº¤äº’å¼çš„é€‰æ‹©ç•Œé¢ï¼ˆå¦‚ä¸‹å›¾æ‰€ç¤ºï¼‰ã€‚è¿™æ—¶å€™ä¸è¦æ…Œï¼Œè¿™é‡Œéœ€è¦ä½ å†³å®šâ€œæŠŠè¿™äº›èƒ½åŠ›è£…åœ¨å“ªé‡Œâ€ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6850836bbd664e40888f59fb1126cb19~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5p2O5ZCM5a2mTGlubw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771560341&amp;x-signature=MIR27DglUtSjP96Kf2NMpBdjVnw%3D" alt="" loading="lazy"/></p>
<p>ä½ ä¼šçœ‹åˆ°ä¸‰ä¸ªé€‰é¡¹ï¼Œæˆ‘ä»¬æ¥é€ä¸€è§£è¯»ï¼ˆä¿å§†çº§è§£é‡Šï¼‰ï¼š</p>
<ol>
<li>
<p><strong><code>Install for you (user scope)</code></strong> <strong>ã€å¼ºçƒˆæ¨èé€‰è¿™ä¸ªï¼ã€‘</strong></p>
</li>
<li>
<p><strong>å«ä¹‰</strong>ï¼šå®‰è£…åˆ°ä½ å½“å‰ç”¨æˆ·çš„å…¨å±€é…ç½®é‡Œã€‚</p>
</li>
<li>
<p><strong>å¥½å¤„</strong>ï¼šä¸€æ¬¡å®‰è£…ï¼Œå¤„å¤„å¯ç”¨ã€‚æ— è®ºä½ ä»¥åæ‰“å¼€å“ªä¸ªæ–‡ä»¶å¤¹ã€å†™å“ªä¸ªæ–°é¡¹ç›®ï¼ŒClaude Code éƒ½ä¼šè‡ªå¸¦è¿™äº›å¼ºå¤§çš„æŠ€èƒ½å’Œè®°å¿†ã€‚</p>
</li>
<li>
<p><strong>é€‚åˆ</strong>ï¼šä¸ªäººå¼€å‘è€…ã€ç‹¬è¡Œä¾ ã€å¸Œæœ› AI åŠ©æ‰‹æ—¶åˆ»ä¿æŒæœ€å¼ºçŠ¶æ€çš„ä½ ã€‚</p>
</li>
<li>
<p><code>Install for all collaborators on this repository (project scope)</code></p>
</li>
<li>
<p><strong>å«ä¹‰</strong>ï¼šåªå®‰è£…åœ¨å½“å‰è¿™ä¸ªé¡¹ç›®æ–‡ä»¶å¤¹é‡Œï¼Œå¹¶ä¸”æŠŠé…ç½®å†™å…¥æ–‡ä»¶ï¼Œæ¨é€åˆ° Git ä»“åº“ã€‚</p>
</li>
<li>
<p><strong>å¥½å¤„</strong>ï¼šä½ çš„é˜Ÿå‹æ‹‰å–ä»£ç åï¼Œä¹Ÿèƒ½è‡ªåŠ¨è·å¾—è¿™äº›å·¥å…·ã€‚</p>
</li>
<li>
<p><strong>é€‚åˆ</strong>ï¼šå›¢é˜Ÿåä½œï¼Œä¸”ä½ å¸Œæœ›å¼ºåˆ¶é˜Ÿå‹ä¹Ÿä½¿ç”¨è¿™å¥—å·¥ä½œæµã€‚</p>
</li>
<li>
<p><code>Install for you, in this repo only (local scope)</code></p>
</li>
<li>
<p><strong>å«ä¹‰</strong>ï¼šåªåœ¨è¿™ä¸ªé¡¹ç›®é‡Œç”¨ï¼Œä¸”ä¸åˆ†äº«ç»™é˜Ÿå‹ã€‚</p>
</li>
<li>
<p><strong>é€‚åˆ</strong>ï¼šä½ åœ¨ç§˜å¯†æµ‹è¯•æŸä¸ªæ’ä»¶ï¼Œä¸æƒ³å½±å“å…¨å±€ç¯å¢ƒã€‚</p>
</li>
</ol>
<p><strong>ğŸ“ æ“ä½œæ­¥éª¤ï¼š</strong></p>
<ol>
<li>
<p>ç¡®ä¿å…‰æ ‡åœç•™åœ¨ç¬¬ä¸€é¡¹ <strong><code>Install for you (user scope)</code></strong> ä¸Šï¼ˆå¦‚æœæœ‰å˜åŠ¨ï¼Œä½¿ç”¨é”®ç›˜ä¸Šä¸‹ç®­å¤´ <code>â†‘</code> <code>â†“</code> ç§»åŠ¨ï¼‰ã€‚</p>
</li>
<li>
<p>ç›´æ¥æŒ‰ <strong><code>Enter</code></strong> <strong>(å›è½¦é”®)</strong> ç¡®è®¤ã€‚</p>
</li>
</ol>
<p><strong>ğŸ‘€ é‡ç‚¹æ³¨æ„ï¼šå®‰è£…æˆåŠŸçš„æ ‡å¿—</strong> æŒ‰ä¸‹å›è½¦åï¼Œç»ˆç«¯å¯èƒ½ä¼šå‡ºç°ä¸¤ç§æƒ…å†µï¼š</p>
<ul>
<li>
<p><strong>æƒ…å†µ Aï¼ˆè¯ç—¨æ¨¡å¼ï¼‰</strong>ï¼šåˆ·å±æ˜¾ç¤º <code>Installed agent: xxx</code>, <code>Installed command: xxx</code> ç­‰ä¸€é•¿ä¸²åˆ—è¡¨ã€‚</p>
</li>
<li>
<p><strong>æƒ…å†µ Bï¼ˆé«˜å†·æ¨¡å¼ï¼‰</strong>ï¼šåªæ˜¾ç¤ºä¸€è¡Œ <code>(no content)</code> æˆ–è€…ä»€ä¹ˆéƒ½ä¸æ˜¾ç¤ºï¼Œç›´æ¥è·³å›è¾“å…¥æ¡†ã€‚</p>
</li>
</ul>
<p><strong>è¯·æ³¨æ„ï¼šæƒ…å†µ B ä¹Ÿæ˜¯æˆåŠŸçš„ï¼</strong> å¦‚æœä½ ä¸ç¡®å®šæ˜¯å¦è£…å¥½äº†ï¼Œå¯ä»¥å†æ¬¡è¾“å…¥ä¸€éå®‰è£…å‘½ä»¤ï¼Œå¦‚æœå®ƒæç¤º <code>Plugin ... is already installed</code>ï¼ˆå¦‚æˆªå›¾æ‰€ç¤ºï¼‰ï¼Œé‚£å°±è¯´æ˜ä½ å·²ç»å¤§åŠŸå‘Šæˆäº†ï¼Œè¯·æ”¾å¿ƒç»§ç»­ä¸‹ä¸€æ­¥ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6feabb258843489c979e62ee3ef9d409~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5p2O5ZCM5a2mTGlubw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771560341&amp;x-signature=AKU8EoIw4m2AVnx4C3X%2Fxl4yyRM%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-4">ç¬¬äºŒæ­¥ï¼šæ‰‹åŠ¨æ³¨å…¥â€œå¤§è„‘è§„åˆ™â€ï¼ˆå¿…åšï¼ï¼‰</h3>
<p>âš ï¸ <strong>æ³¨æ„ï¼šè¿™æ˜¯æœ€å…³é”®çš„ä¸€æ­¥ï¼</strong> ç”±äº Claude Code ç›®å‰çš„é™åˆ¶ï¼Œæ’ä»¶æ— æ³•è‡ªåŠ¨ä¿®æ”¹ä½ çš„ç³»ç»Ÿè§„åˆ™ï¼ˆRulesï¼‰ã€‚å¦‚æœä¸åšè¿™ä¸€æ­¥ï¼ŒClaude åªæ˜¯å­¦ä¼šäº†â€œæŠ€èƒ½â€ï¼Œä½†è¿˜æ²¡å­¦ä¼šâ€œçºªå¾‹â€å’Œâ€œæ€ç»´æ–¹å¼â€ã€‚
æˆ‘ä»¬éœ€è¦æ‰‹åŠ¨æŠŠè§„åˆ™æ–‡ä»¶æ”¾å…¥ Claude çš„é…ç½®ç›®å½•ã€‚</p>
<ol>
<li><strong>æ‰¾åˆ°ä½ çš„ Claude é…ç½®ç›®å½•</strong></li>
</ol>
<ul>
<li>
<p><strong>Windows ç”¨æˆ·</strong>ï¼šé€šå¸¸åœ¨ <code>C:\Users\ä½ çš„ç”¨æˆ·å\.claude\rules</code></p>
</li>
<li>
<p><strong>macOS/Linux ç”¨æˆ·</strong>ï¼šåœ¨ <code>~/.claude/rules</code></p>
</li>
</ul>
<ol start="2">
<li><strong>ä¸‹è½½è§„åˆ™æ–‡ä»¶</strong> å¦‚æœä½ ä¸æƒ³å…‹éš†æ•´ä¸ªä»“åº“ï¼Œæˆ‘ä¸ºä½ å‡†å¤‡äº†<strong>æœ€ç®€å•çš„â€œå·æ‡’â€æ–¹æ³•</strong>ï¼š ä½ éœ€è¦å» GitHub ä»“åº“çš„ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Faffaan-m%2Feverything-claude-code%2Ftree%2Fmain%2Frules" target="_blank" title="https://github.com/affaan-m/everything-claude-code/tree/main/rules" ref="nofollow noopener noreferrer">rules æ–‡ä»¶å¤¹</a>ï¼ŒæŠŠé‡Œé¢çš„ <code>.md</code> æ–‡ä»¶ï¼ˆå¦‚ <code>security.md</code>, <code>coding-style.md</code>, <code>testing.md</code> ç­‰ï¼‰ä¸‹è½½ä¸‹æ¥ã€‚</li>
</ol>
<p><strong>æ¨èæ“ä½œï¼ˆå‘½ä»¤è¡Œæå®¢ç‰ˆï¼‰ï¼š</strong> å…ˆé€€å‡º Claudeï¼ˆè¾“å…¥ <code>/exit</code>ï¼‰ï¼Œç„¶ååœ¨ç»ˆç«¯ï¼ˆPowershellï¼‰è¿è¡Œï¼š</p>
<pre><code class="hljs language-Markdown" lang="Markdown"><span class="hljs-section"># 1. å…‹éš†ä»“åº“åˆ°ä¸´æ—¶ç›®å½•git clone https://github.com/affaan-m/everything-claude-code.git temp<span class="hljs-emphasis">_ecc# 2. åˆ›å»ºè§„åˆ™ç›®å½•ï¼ˆå¦‚æœä¸å­˜åœ¨ï¼‰mkdir -p ~/.claude/rules# 3. å¤åˆ¶è§„åˆ™æ–‡ä»¶è¿‡å»cp temp_</span>ecc/rules/* ~/.claude/rules/# 4. (å¯é€‰) åˆ é™¤ä¸´æ—¶ç›®å½•Remove-Item temp<span class="hljs-emphasis">_ecc -Recurse -Force
</span></span></code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d79fd4103d634e60b2fa9100ce27d430~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5p2O5ZCM5a2mTGlubw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771560341&amp;x-signature=FfSfHGAkjAsPCF8PQcAhQXhOuG0%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-5">ç¬¬ä¸‰æ­¥ï¼šéªŒè¯å®‰è£… &amp; åˆå§‹åŒ–åŒ…ç®¡ç†å™¨</h3>
<p>ä¸€åˆ‡å°±ç»ªï¼Œæˆ‘ä»¬æ¥æµ‹è¯•ä¸€ä¸‹ï¼Œé¡ºä¾¿é…ç½®ä¸€ä¸‹ä½ å¸¸ç”¨çš„åŒ…ç®¡ç†å™¨ï¼ˆnpm, pnpm ç­‰ï¼‰ï¼Œè¿™æ · Claude å†™ä»£ç æ—¶çŸ¥é“è¯¥ç”¨ä»€ä¹ˆå‘½ä»¤ã€‚
<strong>é‡å¯ Claude</strong>ï¼š</p>
<pre><code class="hljs language-Markdown" lang="Markdown">claude
</code></pre>
<p><strong>è¿è¡Œåˆå§‹åŒ–å‘½ä»¤</strong>ï¼š åœ¨å¯¹è¯æ¡†è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼ˆClaude å¯èƒ½ä¼šè‡ªåŠ¨è¡¥å…¨æˆé•¿å¾—åƒ <code>everything-claude-code:setup-pm</code> çš„æ ·å­ï¼Œä¸ç”¨ç®¡ï¼Œç›´æ¥å›è½¦ï¼‰ï¼š</p>
<pre><code class="hljs language-Markdown" lang="Markdown">/setup-pm
</code></pre>
<p><strong>æˆæƒæ‰§è¡Œè„šæœ¬ï¼ˆé‡ç‚¹ï¼ï¼‰</strong>ï¼š å›è½¦åï¼Œä½ ä¼šçœ‹åˆ°ç±»ä¼¼ä¸‹å›¾çš„ç•Œé¢ã€‚Claude ä¼šè¯·æ±‚è¿è¡Œä¸€ä¸ªåä¸º <code>setup-package-manager.js</code> çš„è„šæœ¬ã€‚</p>
<ul>
<li>
<p><strong>ä¸å¿…æƒŠæ…Œ</strong>ï¼šè¿™æ˜¯å®ƒåœ¨è¯·æ±‚æƒé™æ‰«æä½ çš„ç¯å¢ƒã€‚</p>
</li>
<li>
<p><strong>æ“ä½œæ–¹æ³•</strong>ï¼šçœ‹åˆ° <code>Do you want to proceed?</code>ï¼ˆä½ æƒ³è¦ç»§ç»­å—ï¼Ÿï¼‰æ—¶ï¼Œé»˜è®¤é€‰é¡¹æ˜¯ <strong><code>&gt; 1. Yes</code></strong>ã€‚ç›´æ¥æŒ‰ <strong><code>Enter</code></strong> <strong>(å›è½¦)</strong> ç¡®è®¤å³å¯ã€‚</p>
</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/11c29f7a6a3144758a31410fc5f01b69~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5p2O5ZCM5a2mTGlubw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771560341&amp;x-signature=%2BJ7fBOPgnDkHpWJlo0BwNyb5odQ%3D" alt="" loading="lazy"/></p>
<p><strong>å†æ¬¡ç¡®è®¤ï¼ˆè¯·è€å¿ƒï¼‰</strong>ï¼š ç´§æ¥ç€ï¼Œå®ƒå¯èƒ½ä¼šå†æ¬¡è¯·æ±‚æƒé™æ¥â€œåˆ—å‡ºå¯ç”¨åˆ—è¡¨â€ (<code>--list</code>)ã€‚ <strong>è¯·ç»§ç»­æŒ‰å›è½¦é€‰æ‹©</strong> <strong><code>Yes</code></strong>ã€‚è¿™æ˜¯ä¸€ä¸ªæ­£å¸¸çš„æµç¨‹ï¼Œä¸è¦æ‹’ç»å®ƒï¼Œå¦åˆ™åˆå§‹åŒ–ä¼šä¸­æ–­ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a7ed9492ddc147928bbf4d7703671915~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5p2O5ZCM5a2mTGlubw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771560341&amp;x-signature=zGN8NtGmD8lRG5A6sutJ9g5h04g%3D" alt="" loading="lazy"/></p>
<p><strong>åšæœ€ç»ˆå†³å®šï¼ˆFinal Decisionï¼‰</strong> è„šæœ¬è·‘å®Œåï¼Œä¼šå¼¹å‡ºä¸€ä¸ªäº¤äº’å¼èœå•ï¼ˆå¦‚ä¸‹å›¾ï¼‰ã€‚å®ƒä¼šåˆ—å‡ºä½ ç”µè„‘é‡Œå·²ç»è£…äº†å“ªäº›å·¥å…·ï¼ˆè¡¨æ ¼é‡Œ <code>Installed: Yes</code> çš„é¡¹ï¼‰ã€‚</p>
<ul>
<li>
<p><strong>å¦‚æœä½ æ˜¯æ–°æ‰‹</strong>ï¼šç›´æ¥é€‰ <strong><code>1. Keep npm (current)</code></strong>ï¼ˆæˆ–è€…ä½ ç”µè„‘ä¸Šé»˜è®¤å·²å®‰è£…çš„é‚£ä¸ªï¼‰ã€‚è¿™æ˜¯æœ€ç¨³å¦¥çš„é€‰æ‹©ã€‚</p>
</li>
<li>
<p><strong>å¦‚æœä½ æ˜¯è€æ‰‹</strong>ï¼šæƒ³æ¢æˆæ›´å¿«çš„ <code>pnpm</code> æˆ– <code>bun</code>ï¼Œå¯ä»¥é€‰å¯¹åº”çš„é€‰é¡¹ï¼ŒClaude ä¼šå¸®ä½ å»å®‰è£…å®ƒã€‚</p>
</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/44a0652e409745c290b722dad6f7c718~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5p2O5ZCM5a2mTGlubw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771560341&amp;x-signature=lR6Y4T2Ki5FsG3JtFX750WnWM9A%3D" alt="" loading="lazy"/></p>
<p><strong>æœ€åçš„â€œç”»æŠ¼â€ï¼ˆå†™å…¥é…ç½®ï¼‰</strong> é€‰å®Œå·¥å…·åï¼ŒClaude ä¼šæœ€åä¸€æ¬¡è¯·æ±‚æƒé™ï¼š<strong>åˆ›å»ºä¸€ä¸ªåä¸º</strong> <strong><code>package-manager.json</code></strong> <strong>çš„é…ç½®æ–‡ä»¶</strong>ã€‚ è¿™ä¸€æ­¥æ˜¯ä¸ºäº†æŠŠä½ çš„é€‰æ‹©â€œåˆ»åœ¨ç¡¬ç›˜é‡Œâ€ï¼Œä»¥åå°±ä¸ç”¨å†è®¾ç½®äº†ã€‚
<strong>æ“ä½œæ–¹æ³•</strong>ï¼šçœ‹åˆ° <code>Create file</code> çš„è¯·æ±‚æ—¶ï¼Œç¡®è®¤ä¸º <strong><code>&gt; 1. Yes</code></strong>ï¼ŒæŒ‰ä¸‹ <strong>Enter (å›è½¦)</strong>ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7eac3d18d82b44d8ae489f9cf2e3dd1e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5p2O5ZCM5a2mTGlubw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771560341&amp;x-signature=P70ToSujY2fm0FM9L4ZJwMRIKvM%3D" alt="" loading="lazy"/></p>
<p><strong>æœ€ç»ˆéªŒè¯ï¼ˆVerifyï¼‰</strong> æ–‡ä»¶ä¿å­˜åï¼ŒClaude ä¼š<strong>æœ€åå†è¿è¡Œä¸€æ¬¡æ£€æµ‹è„šæœ¬</strong>ï¼Œç›®çš„æ˜¯ç¡®è®¤åˆšæ‰çš„é…ç½®çœŸçš„ç”Ÿæ•ˆäº†ï¼ˆVerify package manager configurationï¼‰ã€‚ <strong>æ“ä½œæ–¹æ³•</strong>ï¼šä¸è¦çŠ¹è±«ï¼Œå†æ¬¡é€‰æ‹© <strong><code>&gt; 1. Yes</code></strong> å¹¶å›è½¦ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2cc3c9c335ba4618aeeefe8397dca400~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5p2O5ZCM5a2mTGlubw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771560341&amp;x-signature=J5LtYjVTins%2Bwxv3vEqg6BJ1%2Fz0%3D" alt="" loading="lazy"/></p>
<p><strong>è§è¯èƒœåˆ©ï¼ˆé…ç½®å®Œæˆï¼‰</strong> åœ¨ç»è¿‡å‡ æ¬¡ç¡®è®¤åï¼Œç»ˆç«¯æœ€ç»ˆä¼šæ˜¾ç¤ºä¸€æ®µè¯¦ç»†çš„æ€»ç»“æŠ¥å‘Šï¼ˆå¦‚ä¸‹å›¾ï¼‰ã€‚</p>
<ul>
<li>
<p><strong>Configuration</strong>: æ˜¾ç¤ºä½ é€‰äº† <code>npm</code>ã€‚</p>
</li>
<li>
<p><strong>Commands</strong>: æ˜¾ç¤ºä»¥åå®ƒä¼šç”¨ä»€ä¹ˆå‘½ä»¤æ¥å¹²æ´»ã€‚</p>
</li>
</ul>
<p>å½“ä½ çœ‹åˆ° <strong>"Done. Your package manager configuration is now set up"</strong> è¿™è¡Œå­—æ—¶ï¼Œæ­å–œä½ ï¼æ‰€æœ‰çš„ç¯å¢ƒé…ç½®å·¥ä½œå…¨éƒ¨ç»“æŸï¼</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0481829d010442368e16f6ca15fd2776~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5p2O5ZCM5a2mTGlubw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771560341&amp;x-signature=ow7w%2FxJK7uw9vEEIBXrkQ22yQ0s%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-6">ç¬¬ä¸‰éƒ¨åˆ†ï¼šå®æˆ˜æ¼”ç»ƒ</h2>
<p>ç¯å¢ƒè£…å¥½äº†ï¼Œä¸æ‹¿å‡ºæ¥æºœæºœæ€ä¹ˆè¡Œï¼Ÿ
å¾ˆå¤šæœ‹å‹ä»¥å‰ç”¨ Claude Codeï¼Œä¸Šæ¥å°±è¯´ï¼šâ€œç»™æˆ‘å†™ä¸ªè´ªåƒè›‡æ¸¸æˆâ€ã€‚ç»“æœ AI ç»å¸¸æ˜¯â€œå“å½“â€æ‰”ç»™ä½ ä¸€å¤§å¨ä»£ç ï¼Œè¦ä¹ˆè·‘ä¸èµ·æ¥ï¼Œè¦ä¹ˆæ”¹ä¸€ä¸ª Bug å†’å‡ºä¸‰ä¸ªæ–° Bugã€‚
<strong>ä¸ºä»€ä¹ˆï¼Ÿå› ä¸ºå®ƒæ²¡æœ‰â€œè„‘å­â€ï¼ˆè§„åˆ’ï¼‰ã€‚</strong> ä½†è£…äº† <strong>Everything Claude Code</strong> ä¹‹åï¼Œæˆ‘ä»¬æ‹¥æœ‰äº†ä¸€ä¸ªæ ¸å¿ƒæ ¸æ­¦å™¨ï¼š<strong><code>/plan</code></strong> <strong>å‘½ä»¤</strong>ã€‚
ç°åœ¨ï¼Œè¯·è·Ÿç€æˆ‘åšï¼Œæˆ‘ä»¬æ¥ä½“éªŒä¸€ä¸‹ä»€ä¹ˆå«â€œ<strong>é™ç»´æ‰“å‡»</strong>â€ã€‚</p>
<h3 data-id="heading-7"><strong>1.æå‡ºéœ€æ±‚ï¼šä¸è¦ç›´æ¥å†™ä»£ç ï¼Œå…ˆåšè®¡åˆ’</strong></h3>
<p>åœ¨ç»ˆç«¯é‡Œï¼Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼ˆè¿˜æ˜¯ä»¥ç»å…¸çš„è´ªåƒè›‡æ¸¸æˆä¸ºä¾‹ï¼Œå› ä¸ºå®ƒç®€å•ä¸”ç›´è§‚ï¼‰ï¼š</p>
<pre><code class="hljs language-Markdown" lang="Markdown">/plan "ä½¿ç”¨ HTML5 å’ŒåŸç”Ÿ JavaScript å†™ä¸€ä¸ªè´ªåƒè›‡æ¸¸æˆï¼Œç•Œé¢è¦ç°ä»£ç®€æ´ï¼Œæ”¯æŒåˆ†æ•°è®°å½•"
</code></pre>
<p><strong>ğŸ’¡ å°è´´å£«</strong>ï¼šæ³¨æ„ <code>/plan</code> å’Œåé¢çš„éœ€æ±‚ä¹‹é—´æœ‰ä¸ªç©ºæ ¼ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4521ad2da07b45ed949fc59b8c85a320~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5p2O5ZCM5a2mTGlubw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771560341&amp;x-signature=%2BtjTtwOqKMr2e8ySKGWeh%2BDsULo%3D" alt="" loading="lazy"/></p>
<p>è¯·çœ‹å±å¹•å·¦ä¸‹è§’é‚£ä¸ªè“è‰²çš„ <strong><code>[||] plan mode on</code></strong> æ ‡å¿— â€”â€” è¿™æ„å‘³ç€ Claude å·²ç»ä»æ™®é€šçš„â€œèŠå¤©æ¨¡å¼â€åˆ‡æ¢åˆ°äº†ä¸“ä¸šçš„â€œæ¶æ„å¸ˆæ¨¡å¼ï¼ˆPlan Modeï¼‰â€ã€‚
åœ¨å½“å‰ç‰ˆæœ¬çš„ Claude Code ä¸­ï¼Œ<code>/plan</code> å‘½ä»¤æœ‰æ—¶åªä½œä¸ºä¸€ä¸ªâ€œæ¨¡å¼å¼€å…³â€ã€‚å®ƒå¬åˆ°äº†ä½ çš„å¬å”¤ï¼Œæ‰“å¼€äº†å¼€å…³ï¼Œä½†å¯èƒ½æ²¡æœ‰æŠŠä½ åˆšæ‰å¼•å·é‡Œçš„é‚£å¥è¯ç›´æ¥å½“æˆä»»åŠ¡å‘å‡ºå»ï¼ˆæˆ–è€…å®ƒæ­£åœ¨ç­‰ä½ ç¡®è®¤ï¼‰ã€‚</p>
<h4 data-id="heading-8"><strong>æ€ä¹ˆåŠï¼Ÿï¼ˆåªéœ€ä¸€æ­¥ï¼‰</strong></h4>
<p>ç°åœ¨çš„å…‰æ ‡ <code>&gt;</code> å·²ç»åœ¨é—ªçƒç­‰å¾…äº†ï¼Œä½ åªéœ€è¦<strong>åœ¨å½“å‰æ¨¡å¼ä¸‹ï¼ŒæŠŠéœ€æ±‚å†å‘ä¸€é</strong>å³å¯ï¼š</p>
<ol>
<li>
<p><strong>ç›´æ¥è¾“å…¥</strong>ï¼š <code>ä½¿ç”¨ HTML5 å’ŒåŸç”Ÿ JavaScript å†™ä¸€ä¸ªè´ªåƒè›‡æ¸¸æˆï¼Œç•Œé¢è¦ç°ä»£ç®€æ´ï¼Œæ”¯æŒåˆ†æ•°è®°å½•</code></p>
</li>
<li>
<p><strong>æŒ‰ä¸‹å›è½¦</strong>ã€‚</p>
</li>
</ol>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/da97def5c4134df4a23d21763c3427a1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5p2O5ZCM5a2mTGlubw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771560341&amp;x-signature=ORVtgluy8WkIDpIG2%2Flq9ChkPcU%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-9">2.è§è¯â€œé™ç»´æ‰“å‡»â€çº§çš„è§„åˆ’èƒ½åŠ›</h3>
<p>æŒ‰ä¸‹å›è½¦åï¼ŒClaude <strong>ç»å¯¹ä¸ä¼š</strong>åƒä¸ªæ„£å¤´é’ä¸€æ ·ç›´æ¥å¼€å§‹å†™ä»£ç ã€‚ç›¸åï¼Œå®ƒä¼šå…ˆåœä¸‹æ¥æ€è€ƒï¼Œç„¶åè¾“å‡ºä¸€ä»½<strong>æå…·ä¸“ä¸šæ°´å‡†çš„â€œé¡¹ç›®è®¾è®¡ä¹¦â€</strong>ã€‚
è¯·çœ‹ä¸‹å›¾ï¼Œè¿™å°±æ˜¯ Everything Claude Code çš„å¨åŠ›æ‰€åœ¨ã€‚å®ƒä¸ä»…ç†è§£äº†ä½ çš„éœ€æ±‚ï¼Œè¿˜è‡ªåŠ¨è¡¥å…¨äº†æ‰€æœ‰ç»†èŠ‚ï¼š</p>
<ul>
<li>
<p><strong>æ–‡ä»¶ç»“æ„</strong>ï¼šè‡ªåŠ¨è§„åˆ’å¥½äº† <code>index.html</code> (éª¨æ¶), <code>style.css</code> (çš®è‚¤), <code>game.js</code> (çµé­‚)ã€‚</p>
</li>
<li>
<p><strong>æ ¸å¿ƒåŠŸèƒ½æ‹†è§£</strong>ï¼š</p>
<ul>
<li>
<p>æ˜ç¡®ç”»å¸ƒå¤§å° (400x400)</p>
</li>
<li>
<p>æ“ä½œé€»è¾‘ (WASD + æ–¹å‘é”®åŒé‡æ”¯æŒ)</p>
</li>
<li>
<p>æ•°æ®å­˜å‚¨ (åˆ©ç”¨ localStorage å­˜æœ€é«˜åˆ†ï¼Œè¿è¿™ä¸ªç»†èŠ‚éƒ½æƒ³åˆ°äº†ï¼)</p>
</li>
</ul>
</li>
<li>
<p><strong>UI è®¾è®¡è§„èŒƒ</strong>ï¼š</p>
<ul>
<li>ç”šè‡³è¿é…è‰²éƒ½æƒ³å¥½äº†ï¼šæ·±è‰²èƒŒæ™¯ (<code>#1a1a2e</code>) é…éœ“è™¹ç»¿è›‡èº« (<code>#00ff88</code>)ã€‚è¿™å“ªæ˜¯å†™ä»£ç ï¼Œç®€ç›´æ˜¯è‡ªå¸¦è®¾è®¡å¸ˆï¼</li>
</ul>
</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e2ad75288a1b429889c5c586a02b3643~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5p2O5ZCM5a2mTGlubw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771560341&amp;x-signature=%2FmsRdygb5HW2cCRFRdIWb9YuJcA%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-10">3.æ¶æ„å¸ˆçš„â€œè¿½é—®â€ï¼šå®ƒç«Ÿç„¶æ‡‚å¾—æŠ ç»†èŠ‚ï¼</h3>
<p>è¿™çœŸæ˜¯ä¸€ä¸ªè¶…çº§å¤§çš„<strong>æƒŠå–œç‚¹</strong>ï¼
å¤§å¤šæ•° AI ç¼–ç¨‹å·¥å…·ï¼ˆåŒ…æ‹¬ ChatGPT ç½‘é¡µç‰ˆï¼‰éƒ½æ˜¯ä½ å‘ä¸ªæŒ‡ä»¤ï¼Œå®ƒå°±ç›´æ¥é—·å¤´å†™ä»£ç ï¼Œæ ¹æœ¬ä¸ç®¡ç»†èŠ‚ã€‚
ä½†è£…äº† <strong>Everything Claude Code</strong> åï¼Œå®ƒç«Ÿç„¶æ‡‚å¾—äº†**â€œéœ€æ±‚è°ƒç ”â€<strong>ï¼ˆInterview Modeï¼‰ã€‚å®ƒå‘ç°ä½ çš„éœ€æ±‚é‡Œæ²¡è¯´æ¸…æ¥šâ€œæ¸¸æˆéš¾åº¦/åœ°å›¾å¤§å°â€ï¼Œäºæ˜¯å®ƒ</strong>ä¸»åŠ¨åœä¸‹æ¥è¯¢é—®ä½ çš„åå¥½**ã€‚
è¿™ç®€ç›´å°±æ˜¯<strong>ä»â€œå¤–åŒ…å·¥â€è¿›åŒ–æˆäº†â€œäº§å“ç»ç†â€</strong>ï¼
æˆ‘æŠŠè¿™å…³é”®çš„ä¸€æ­¥è¡¥å……è¿›æ•™ç¨‹ï¼Œä½œä¸º**â€œç¬¬ä¸‰éƒ¨åˆ†ï¼šå®æˆ˜æ¼”ç»ƒâ€<strong>çš„</strong>ç¬¬ 3 å°èŠ‚**ï¼ˆæŠŠåŸæ¥çš„â€œæ­¥æ­¥ä¸ºè¥â€é¡ºå»¶ä¸ºç¬¬ 4 å°èŠ‚ï¼‰ã€‚</p>
<ol>
<li>
<h5 data-id="heading-11"><strong>æ¶æ„å¸ˆçš„â€œè¿½é—®â€ï¼šå®ƒç«Ÿç„¶æ‡‚å¾—æŠ ç»†èŠ‚ï¼</strong></h5>
</li>
</ol>
<p>åœ¨ç”Ÿæˆåˆæ­¥è®¡åˆ’åï¼Œæœ€è®©æˆ‘éœ‡æƒŠçš„ä¸€å¹•å‘ç”Ÿäº†ã€‚Claude å¹¶æ²¡æœ‰æ€¥ç€å»å†™ä»£ç ï¼Œè€Œæ˜¯å‘ç°æˆ‘çš„éœ€æ±‚é‡Œæœ‰ä¸€ä¸ªæ¨¡ç³Šç‚¹ï¼š<strong>åœ°å›¾å¤§å°å’Œæ¸¸æˆèŠ‚å¥</strong>ã€‚
äºæ˜¯ï¼Œå®ƒä¸»åŠ¨å‘èµ·äº†ä¸€ä¸ªâ€œäº¤äº’å¼é—®å·â€ï¼ˆå¦‚ä¸‹å›¾ï¼‰ï¼š</p>
<ul>
<li>
<p>å®ƒé—®æˆ‘ï¼š<strong>â€œä½ åå¥½ä»€ä¹ˆæ ·çš„ç½‘æ ¼å¤§å°ï¼Ÿâ€</strong></p>
</li>
<li>
<p>å¹¶ä¸”ç»™å‡ºäº†ä¸“ä¸šçš„é€‰é¡¹åˆ†æï¼š</p>
<ul>
<li>
<p><strong>20x20 (æ¨è)</strong>ï¼šç»å…¸æ‰‹æ„Ÿã€‚</p>
</li>
<li>
<p><strong>15x15</strong>ï¼šåœ°å›¾å°ï¼ŒèŠ‚å¥å¿«ï¼ˆé€‚åˆæ€¥æ€§å­ï¼‰ã€‚</p>
</li>
<li>
<p><strong>25x25</strong>ï¼šåœ°å›¾å¤§ï¼Œéš¾åº¦é«˜ï¼ˆé€‚åˆé«˜æ‰‹ï¼‰ã€‚</p>
</li>
</ul>
</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6fd1cdf0585d4f68a6b46e4e5f70cb1b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5p2O5ZCM5a2mTGlubw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771560341&amp;x-signature=VxKlpwiD9KBQHAqJSFYX1ehlUIk%3D" alt="" loading="lazy"/></p>
<p><strong>ğŸ“ æ“ä½œæ–¹æ³•ï¼š</strong> åœ¨è¿™ä¸ªç•Œé¢ï¼Œä½ å¯ä»¥ç”¨ä¸Šä¸‹é”®é€‰æ‹©ï¼Œæˆ–è€…ç›´æ¥å›è½¦é€‰æ‹©å®ƒæ¨èçš„ <strong><code>&gt; 1. 20x20 æ ¼å­ (æ¨è)</code></strong>ã€‚
<strong>ä¸ºä»€ä¹ˆè¦å¼ºè°ƒè¿™ä¸€ç‚¹ï¼Ÿ</strong> è¿™è¯æ˜äº† Everything Claude Code çš„ <code>planner</code> æ™ºèƒ½ä½“å…·æœ‰<strong>æ‰¹åˆ¤æ€§æ€ç»´</strong>ã€‚å®ƒçŸ¥é“â€œæ¨¡ç³Šçš„éœ€æ±‚â€ä¼šå¯¼è‡´â€œåƒåœ¾çš„ä»£ç â€ï¼Œæ‰€ä»¥å®ƒè¦åœ¨åŠ¨å·¥å‰æŠŠæ‰€æœ‰ç»†èŠ‚éƒ½æ•²å®šã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆç”¨å®ƒå†™å‡ºæ¥çš„ç¨‹åº Bug æå°‘çš„åŸå› ã€‚</p>
<h3 data-id="heading-12">4.äº¤æ£’æ—¶åˆ»ï¼šä»â€œè®¾è®¡â€åˆ°â€œæ–½å·¥â€</h3>
<p>å½“ä½ åœ¨å±å¹•ä¸Šçœ‹åˆ°è¯¦ç»†çš„ <strong>æœ€ç»ˆæ–¹æ¡ˆæ€»ç»“</strong>ï¼Œå¹¶ä¸” Claude è¯¢é—® <code>Exit plan mode?</code> æ—¶ï¼Œè¯´æ˜è§„åˆ’é˜¶æ®µå®Œç¾ç»“æŸã€‚
<strong>ç¡®è®¤é€€å‡º</strong>ï¼š ç›´æ¥é€‰æ‹© <strong><code>&gt; 1. Yes</code></strong> å¹¶å›è½¦ã€‚
<strong>âš ï¸ æ³¨æ„ï¼š</strong> è¿™é‡Œä¸éœ€è¦ä½ å†è¾“å…¥â€œå¼€å§‹å†™ä»£ç â€ä¹‹ç±»çš„æŒ‡ä»¤ã€‚Claude éå¸¸èªæ˜ï¼Œå®ƒçŸ¥é“ä½ é€€å‡ºè§„åˆ’æ¨¡å¼å°±æ˜¯ä¸ºäº†å»æ‰§è¡Œã€‚ ä¸€æ—¦ä½ æŒ‰ä¸‹å›è½¦ï¼Œä½ ä¼šå‘ç°å®ƒ<strong>ç«‹åˆ»</strong>æŠ›å‡ºäº†ç¬¬ä¸€ä¸ªæ–‡ä»¶çš„ä»£ç ï¼ˆé€šå¸¸æ˜¯ <code>index.html</code>ï¼‰ï¼Œå¹¶è¯·æ±‚åˆ›å»ºæ–‡ä»¶ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b55ee0608db049fcb783da3c739f494e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5p2O5ZCM5a2mTGlubw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771560341&amp;x-signature=%2FgD1V%2FhAD2zRoHwR9FeqHyWwBN8%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-13">5.å…³é”®æŠ€å·§ï¼šå¦‚ä½•â€œä¸€é”®æˆæƒâ€æ‰€æœ‰æ–‡ä»¶ï¼Ÿ</h3>
<p>ç°åœ¨ Claude å·²ç»æŠŠ <code>index.html</code> çš„ä»£ç å†™å¥½äº†ï¼ˆå¦‚ä¸‹å›¾æ‰€ç¤ºï¼‰ï¼Œå®ƒåœä¸‹æ¥é—®ä½ ï¼š</p>
<blockquote>
<p><strong>"Do you want to create index.html?"</strong></p>
</blockquote>
<p>è¿™é‡Œæœ‰ä¸€ä¸ª<strong>çœæ—¶ 90% çš„è€æ‰‹æŠ€å·§</strong>ï¼
å› ä¸ºæˆ‘ä»¬çš„è´ªåƒè›‡æ¸¸æˆæœ‰ 3 ä¸ªæ–‡ä»¶ï¼ˆHTML, CSS, JSï¼‰ï¼Œå¦‚æœä½ é€‰ç¬¬ä¸€ä¸ªé€‰é¡¹ <code>Yes</code>ï¼Œå®ƒæ¯å†™ä¸€ä¸ªæ–‡ä»¶éƒ½ä¼šåœä¸‹æ¥é—®ä½ ä¸€æ¬¡ï¼Œéå¸¸å•°å—¦ã€‚
<strong>âœ… æ¨èæ“ä½œï¼šé€‰æ‹©â€œå…¨æƒå§”æ‰˜â€</strong> è¯·æŒ‰ä¸‹é”®ç›˜çš„ <strong><code>Shift + Tab</code></strong> é”®ï¼ˆæˆ–è€…ç”¨æ–¹å‘é”®ä¸‹ç§»ï¼‰ï¼Œé€‰ä¸­ç¬¬äºŒä¸ªé€‰é¡¹ï¼š <strong><code>&gt; 2. Yes, allow all edits during this session</code></strong>
<strong>æ„æ€æ˜¯ï¼š</strong> â€œå¥½çš„ï¼Œä¸ä»…è¿™ä¸ªæ–‡ä»¶å¯ä»¥å†™ï¼Œæ¥ä¸‹æ¥æœ¬æ¬¡ä¼šè¯é‡Œæ‰€æœ‰çš„æ–‡ä»¶ä¿®æ”¹ï¼Œæˆ‘éƒ½æˆæƒç»™ä½ ï¼Œåˆ«å†çƒ¦æˆ‘äº†ã€‚â€</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/685ff6b1bdf44ca19e38d068fcd36652~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5p2O5ZCM5a2mTGlubw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771560341&amp;x-signature=Vc7eekvO2n1Pth21PSV8nqL7TSM%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-14">6.è§è¯æˆæœ</h3>
<p>å½“ä½ æˆæƒåï¼Œä½ ä¼šçœ‹åˆ°å±å¹•ä¸Šä»£ç é£é€Ÿæ»šåŠ¨ã€‚å‡ ç§’é’Ÿåï¼ŒClaude ä¼šå‘Šè¯‰ä½ æ‰€æœ‰æ–‡ä»¶éƒ½åˆ›å»ºå®Œæ¯•ã€‚ è¿™æ—¶å€™ï¼Œä½ å¯ä»¥ç›´æ¥å»ä½ çš„é¡¹ç›®æ–‡ä»¶å¤¹é‡Œæ‰“å¼€ <code>index.html</code>ï¼Œä¸€ä¸ªåªæœ‰ 20KB å¤§å°ã€ç•Œé¢ç°ä»£ã€æ‰‹æ„Ÿä¸æ»‘çš„è´ªåƒè›‡æ¸¸æˆå°±å·²ç»èººåœ¨é‚£é‡Œäº†ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/86d834045fcb48cb8334b4ee134316b1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5p2O5ZCM5a2mTGlubw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771560341&amp;x-signature=Uy3qW18talEpKTBXWxnWYU6jE9g%3D" alt="" loading="lazy"/>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f203bebae4514d03931aa428331648e5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5p2O5ZCM5a2mTGlubw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771560341&amp;x-signature=qHoy3OFdKBtAiaE%2BaDFnJ7XqSXo%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-15">ç¬¬å››éƒ¨åˆ†ï¼šç»“è¯­</h2>
<p>å½“ä½ æŒ‰ä¸‹å›è½¦ï¼Œçœ‹ç€ <code>index.html</code> é‡Œé‚£ä¸ªè¿è¡Œå®Œç¾çš„è´ªåƒè›‡æ¸¸æˆæ—¶ï¼Œæ­å–œä½ ï¼Œä½ çš„ Claude Code å·²ç»å®Œæˆäº†â€œè¿›åŒ–â€ã€‚
<strong>Everything Claude Code</strong> å¸¦æ¥çš„æ”¹å˜æ˜¯æœ¬è´¨çš„ï¼š</p>
<ol>
<li>
<p><strong>å‘Šåˆ«â€œç›²å†™â€</strong>ï¼šé€šè¿‡ <strong><code>/plan</code></strong> <strong>æ¶æ„æ¨¡å¼</strong>ï¼Œå®ƒå­¦ä¼šäº†å…ˆæ€è€ƒã€å†ç¡®è®¤ç»†èŠ‚ï¼ˆç”šè‡³è¿˜ä¼šé—®ä½ ç½‘æ ¼å¤§å°åå¥½ï¼‰ã€æœ€åæ‰åŠ¨å·¥ã€‚</p>
</li>
<li>
<p><strong>å‘Šåˆ«â€œå¤±å¿†â€</strong>ï¼šä¸ç”¨å†åå¤å–‚æç¤ºè¯ï¼Œ<strong>Hooks</strong> ä¼šè‡ªåŠ¨æŠŠé¡¹ç›®èƒŒæ™¯å†™å…¥ <code>.claudememory</code>ï¼Œè®©å®ƒåƒè€å‘˜å·¥ä¸€æ ·æ°¸è¿œè®°å¾—ä½ çš„é¡¹ç›®ç»†èŠ‚ã€‚</p>
</li>
<li>
<p><strong>å‘Šåˆ«â€œè°ƒæ•™â€</strong>ï¼šå®ƒè®°ä½äº†ä½ çš„ <code>npm</code> é…ç½®å’Œä»£ç è§„èŒƒï¼Œä¸Šæ‰‹å°±æ˜¯ç†Ÿç»ƒå·¥ã€‚</p>
</li>
</ol>
<p><strong>åŸç”Ÿçš„ Claude Code æ˜¯ä¸€æŠŠå¥½å‰‘ï¼Œè€Œè¿™å¥—é…ç½®å°±æ˜¯ç»ä¸–å‰‘æ³•ã€‚</strong>
ç°åœ¨ï¼Œå»è¯•è¯•æ¯”è´ªåƒè›‡æ›´å¤æ‚çš„é¡¹ç›®å§ï¼Œçœ‹çœ‹è¿™ä½â€œèµ„æ·± AI å·¥ç¨‹å¸ˆâ€è¿˜èƒ½ç»™ä½ å¸¦æ¥å¤šå°‘æƒŠå–œï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[OpenClaw å…¥é—¨å®æˆ˜ï¼š5åˆ†é’Ÿæ­å»ºä½ çš„è‡ªæ‰˜ç®¡ AI åŠ©æ‰‹]]></title>    <link>https://juejin.cn/post/7605810996125351970</link>    <guid>https://juejin.cn/post/7605810996125351970</guid>    <pubDate>2026-02-13T04:05:40.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605810996125351970" data-draft-id="7605810996125335586" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="OpenClaw å…¥é—¨å®æˆ˜ï¼š5åˆ†é’Ÿæ­å»ºä½ çš„è‡ªæ‰˜ç®¡ AI åŠ©æ‰‹"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-02-13T04:05:40.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é™ˆå¹¿äº®"/> <meta itemprop="url" content="https://juejin.cn/user/3139860937575934"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            OpenClaw å…¥é—¨å®æˆ˜ï¼š5åˆ†é’Ÿæ­å»ºä½ çš„è‡ªæ‰˜ç®¡ AI åŠ©æ‰‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3139860937575934/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é™ˆå¹¿äº®
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-13T04:05:40.000Z" title="Fri Feb 13 2026 04:05:40 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ€è¿‘åœ¨ç ”ç©¶å¦‚ä½•æ›´é«˜æ•ˆåœ°ä½¿ç”¨ AI åŠ©æ‰‹ï¼Œå‘ç°äº†ä¸€ä¸ªå¾ˆæœ‰æ„æ€çš„å¼€æºé¡¹ç›®ï¼š<strong>OpenClaw</strong>ã€‚å®ƒèƒ½è®©ä½ åœ¨ Telegramã€WhatsAppã€Discord ç­‰å„ç§ App é‡Œç›´æ¥è·Ÿ Claude å¯¹è¯ï¼Œè€Œä¸”å®Œå…¨ç”±ä½ è‡ªå·±æŒæ§ã€‚ä»Šå¤©å°±æ¥åˆ†äº«ä¸€ä¸‹å¦‚ä½•ä»é›¶æ­å»ºä½ çš„ç¬¬ä¸€ä¸ª OpenClaw AI åŠ©æ‰‹ã€‚</p>
<h2 data-id="heading-0">OpenClaw æ˜¯ä»€ä¹ˆï¼Ÿ</h2>
<p>ç®€å•è¯´ï¼Œ<strong>OpenClaw æ˜¯ä¸€ä¸ªè‡ªæ‰˜ç®¡çš„ AI ä»£ç†ç½‘å…³</strong>ã€‚å®ƒå¸®ä½ æŠŠ Claudeã€GPT ç­‰ AI æ¨¡å‹æ¥å…¥åˆ°å„ç§æ¶ˆæ¯å¹³å°ï¼Œè®©ä½ å¯ä»¥åƒè·Ÿæœ‹å‹èŠå¤©ä¸€æ ·è·Ÿ AI äº¤äº’ã€‚</p>
<h3 data-id="heading-1">æ ¸å¿ƒç‰¹æ€§</h3>
<ul>
<li><strong>å¤šæ¸ é“æ”¯æŒ</strong>ï¼šTelegramã€WhatsAppã€Discordã€Slack ç­‰ä¸»æµå¹³å°</li>
<li><strong>è‡ªæ‰˜ç®¡æ¶æ„</strong>ï¼šæ‰€æœ‰æ•°æ®ç•™åœ¨ä½ è‡ªå·±çš„æœåŠ¡å™¨ä¸Š</li>
<li><strong>çµæ´»é…ç½®</strong>ï¼šæ”¯æŒå¤šä¸ª Agentã€è‡ªå®šä¹‰å·¥å…·ã€è®°å¿†ç®¡ç†</li>
<li><strong>å¼€ç®±å³ç”¨</strong>ï¼šå†…ç½® Web æ§åˆ¶é¢æ¿ï¼Œé…ç½®ç®€å•</li>
</ul>
<h3 data-id="heading-2">ä¸ºä»€ä¹ˆé€‰æ‹©è‡ªæ‰˜ç®¡ï¼Ÿ</h3>
<p>å¾ˆå¤šäººå¯èƒ½ä¼šé—®ï¼šå¸‚é¢ä¸Šå·²ç»æœ‰ ChatGPTã€Claude.ai è¿™äº›ç°æˆæœåŠ¡äº†ï¼Œä¸ºä»€ä¹ˆè¿˜è¦è‡ªå·±æ­å»ºï¼Ÿ</p>
<p><strong>æ•°æ®éšç§</strong>ï¼šæ‰€æœ‰å¯¹è¯è®°å½•ã€é…ç½®ä¿¡æ¯éƒ½å­˜å‚¨åœ¨ä½ è‡ªå·±çš„è®¾å¤‡ä¸Šï¼Œä¸ä¼šè¢«ç¬¬ä¸‰æ–¹æ”¶é›†ã€‚</p>
<p><strong>å®Œå…¨å¯æ§</strong>ï¼šæƒ³æ¢æ¨¡å‹å°±æ¢æ¨¡å‹ï¼Œæƒ³æ¥å…¥å“ªä¸ªå¹³å°å°±æ¥å…¥å“ªä¸ªå¹³å°ï¼Œä¸å—å¹³å°é™åˆ¶ã€‚</p>
<p><strong>æˆæœ¬é€æ˜</strong>ï¼šç›´æ¥è°ƒç”¨ APIï¼ŒæŒ‰å®é™…ç”¨é‡ä»˜è´¹ï¼Œä¸ç”¨æ‹…å¿ƒè®¢é˜…è´¹ç”¨ã€‚</p>
<p><strong>åŠŸèƒ½è‡ªç”±</strong>ï¼šå¯ä»¥è‡ªå®šä¹‰å·¥å…·ã€é…ç½®è®°å¿†ç³»ç»Ÿã€æ¥å…¥æœ¬åœ°æœåŠ¡ï¼Œç©æ³•æ›´å¤šã€‚</p>
<p>å¯¹äºå¼€å‘è€…å’Œæ³¨é‡éšç§çš„ç”¨æˆ·æ¥è¯´ï¼Œè‡ªæ‰˜ç®¡æ˜¯ä¸ªæ›´å¥½çš„é€‰æ‹©ã€‚</p>
<h2 data-id="heading-3">å¿«é€Ÿå®‰è£…ï¼ˆmacOSï¼‰</h2>
<p>ä¸‹é¢ä»¥ macOS ä¸ºä¾‹ï¼Œæ¼”ç¤ºå¦‚ä½•å®‰è£… OpenClawã€‚å…¶ä»–ç³»ç»Ÿçš„å®‰è£…æ–¹æ³•ç±»ä¼¼ï¼Œå¯ä»¥å‚è€ƒ<a href="https://link.juejin.cn?target=https%3A%2F%2Fopenclaw.ai%2Finstall" target="_blank" title="https://openclaw.ai/install" ref="nofollow noopener noreferrer">å®˜æ–¹æ–‡æ¡£</a>ã€‚</p>
<h3 data-id="heading-4">å‰ç½®æ¡ä»¶</h3>
<p>åœ¨å¼€å§‹ä¹‹å‰ï¼Œç¡®ä¿ä½ çš„ç³»ç»Ÿæ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼š</p>
<ol>
<li>
<p><strong>Node.js 22+</strong>ï¼šOpenClaw åŸºäº Node.js è¿è¡Œ</p>
<pre><code class="hljs language-bash" lang="bash">node --version  <span class="hljs-comment"># æ£€æŸ¥ç‰ˆæœ¬ï¼Œåº”è¯¥ &gt;= 22</span>
</code></pre>
<p>å¦‚æœç‰ˆæœ¬ä¸å¤Ÿï¼Œå»ºè®®ç”¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fnvm-sh%2Fnvm" target="_blank" title="https://github.com/nvm-sh/nvm" ref="nofollow noopener noreferrer">nvm</a> å®‰è£…æœ€æ–°ç‰ˆã€‚</p>
</li>
<li>
<p><strong>Anthropic API Key</strong>ï¼šä½ éœ€è¦ä¸€ä¸ª Claude çš„ API å¯†é’¥</p>
<ul>
<li>å‰å¾€ <a href="https://link.juejin.cn?target=https%3A%2F%2Fconsole.anthropic.com%2F" target="_blank" title="https://console.anthropic.com/" ref="nofollow noopener noreferrer">Anthropic Console</a> æ³¨å†Œè´¦å·</li>
<li>åœ¨ API Keys é¡µé¢åˆ›å»ºæ–°å¯†é’¥</li>
<li>è®°ä¸‹è¿™ä¸ªå¯†é’¥ï¼Œç¨åä¼šç”¨åˆ°</li>
</ul>
</li>
</ol>
<h3 data-id="heading-5">ä¸€é”®å®‰è£…</h3>
<p>OpenClaw æä¾›äº†éå¸¸æ–¹ä¾¿çš„ä¸€é”®å®‰è£…è„šæœ¬ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">curl -fsSL https://openclaw.ai/install.sh | bash
</code></pre>
<p>è¿™ä¸ªè„šæœ¬ä¼šè‡ªåŠ¨ä¸‹è½½å¹¶å®‰è£… OpenClaw CLIã€‚å®‰è£…å®Œæˆåï¼ŒéªŒè¯ä¸€ä¸‹ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">openclaw --version
</code></pre>
<h3 data-id="heading-6">è¿è¡Œé…ç½®å‘å¯¼</h3>
<p>å®‰è£…å¥½ä¹‹åï¼Œè¿è¡Œé…ç½®å‘å¯¼æ¥åˆå§‹åŒ–ä½ çš„ Gatewayï¼š</p>
<pre><code class="hljs language-bash" lang="bash">openclaw onboard --install-daemon
</code></pre>
<p>å‘å¯¼ä¼šå¼•å¯¼ä½ å®Œæˆä»¥ä¸‹é…ç½®ï¼š</p>
<ol>
<li><strong>é€‰æ‹©æ¨¡å‹æä¾›å•†</strong>ï¼šé€‰æ‹© Anthropicï¼ˆClaudeï¼‰</li>
<li><strong>è¾“å…¥ API Key</strong>ï¼šç²˜è´´ä½ åˆšæ‰è·å–çš„ Anthropic API Key</li>
<li><strong>é…ç½® Gateway ç«¯å£</strong>ï¼šé»˜è®¤ 18789ï¼Œä¸€èˆ¬ä¸ç”¨æ”¹</li>
<li><strong>é€‰æ‹©æ¸ é“</strong>ï¼šæš‚æ—¶å…ˆè·³è¿‡ï¼Œæˆ‘ä»¬åé¢æ‰‹åŠ¨é…ç½® Telegram</li>
</ol>
<p>å‘å¯¼è¿è¡Œå®Œæˆåï¼ŒOpenClaw Gateway ä¼šè‡ªåŠ¨å¯åŠ¨ã€‚</p>
<h2 data-id="heading-7">é…ç½®ä½ çš„ç¬¬ä¸€ä¸ª Telegram Bot</h2>
<p>æ¥ä¸‹æ¥æ˜¯æœ€æœ‰è¶£çš„éƒ¨åˆ†ï¼šåˆ›å»ºä¸€ä¸ª Telegram botï¼Œè®©å®ƒæ¥å…¥ä½ çš„ OpenClaw Gatewayã€‚</p>
<h3 data-id="heading-8">1. é€šè¿‡ @BotFather åˆ›å»º Bot</h3>
<p>æ‰“å¼€ Telegramï¼Œæœç´¢ <strong>@BotFather</strong>ï¼ˆTelegram å®˜æ–¹çš„ bot ç®¡ç†å·¥å…·ï¼‰ï¼Œç„¶åï¼š</p>
<ol>
<li>å‘é€ <code>/newbot</code> å‘½ä»¤</li>
<li>è¾“å…¥ä½ çš„ bot åç§°ï¼Œæ¯”å¦‚ï¼š<code>My OpenClaw Assistant</code></li>
<li>è¾“å…¥ bot çš„ç”¨æˆ·åï¼ˆå¿…é¡»ä»¥ <code>bot</code> ç»“å°¾ï¼‰ï¼Œæ¯”å¦‚ï¼š<code>my_openclaw_bot</code></li>
<li>åˆ›å»ºæˆåŠŸåï¼Œ<strong>BotFather ä¼šç»™ä½ ä¸€ä¸ª Token</strong>ï¼Œç±»ä¼¼ï¼š
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">7123456789:AAHdqTcvCH1vGWJxfSeofSAs0K5PALDsaw</span>
</code></pre>
<strong>åŠ¡å¿…ä¿å­˜å¥½è¿™ä¸ª Token</strong>ï¼</li>
</ol>
<h3 data-id="heading-9">2. é…ç½® OpenClaw</h3>
<p>ç°åœ¨éœ€è¦æŠŠä½ çš„ Telegram bot æ¥å…¥ OpenClawã€‚ç¼–è¾‘é…ç½®æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">openclaw config edit
</code></pre>
<p>åœ¨é…ç½®æ–‡ä»¶ä¸­æ‰¾åˆ° <code>channels.telegram</code> éƒ¨åˆ†ï¼Œæ·»åŠ ä½ çš„ bot é…ç½®ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">channels:</span>
  <span class="hljs-attr">telegram:</span>
    <span class="hljs-attr">enabled:</span> <span class="hljs-literal">true</span>
    <span class="hljs-attr">accounts:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">id:</span> <span class="hljs-string">my-bot</span>
        <span class="hljs-attr">token:</span> <span class="hljs-string">"7123456789:AAHdqTcvCH1vGWJxfSeofSAs0K5PALDsaw"</span>
        <span class="hljs-attr">agent:</span> <span class="hljs-string">main</span>
</code></pre>
<p><strong>å‚æ•°è¯´æ˜</strong>ï¼š</p>
<ul>
<li><code>id</code>ï¼šç»™è¿™ä¸ª bot å–ä¸ªå†…éƒ¨æ ‡è¯†ç¬¦ï¼Œéšä¾¿èµ·å</li>
<li><code>token</code>ï¼šåˆšæ‰ä» BotFather è·å¾—çš„ bot token</li>
<li><code>agent</code>ï¼šæŒ‡å®šä½¿ç”¨å“ªä¸ª Agentï¼ˆé»˜è®¤çš„ <code>main</code> agent å°±å¤Ÿç”¨ï¼‰</li>
</ul>
<p>ä¿å­˜é…ç½®åï¼Œé‡å¯ Gateway è®©é…ç½®ç”Ÿæ•ˆï¼š</p>
<pre><code class="hljs language-bash" lang="bash">openclaw gateway restart
</code></pre>
<h3 data-id="heading-10">3. å¯åŠ¨éªŒè¯</h3>
<p>æ£€æŸ¥ Gateway çŠ¶æ€ï¼Œç¡®ä¿ä¸€åˆ‡æ­£å¸¸ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">openclaw gateway status
</code></pre>
<p>ä½ åº”è¯¥èƒ½çœ‹åˆ°ç±»ä¼¼è¿™æ ·çš„è¾“å‡ºï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">âœ“</span> <span class="hljs-string">Gateway</span> <span class="hljs-string">is</span> <span class="hljs-string">running</span>
  <span class="hljs-attr">PID:</span> <span class="hljs-number">12345</span>
  <span class="hljs-attr">Port:</span> <span class="hljs-number">18789</span>
  <span class="hljs-attr">Uptime:</span> <span class="hljs-string">5s</span>
</code></pre>
<h2 data-id="heading-11">æµ‹è¯•ä½ çš„ Bot</h2>
<p>ç°åœ¨ä¸‡äº‹ä¿±å¤‡ï¼Œæ¥æµ‹è¯•ä¸€ä¸‹ä½ çš„ AI åŠ©æ‰‹å§ï¼</p>
<h3 data-id="heading-12">å‘é€ç¬¬ä¸€æ¡æ¶ˆæ¯</h3>
<ol>
<li>æ‰“å¼€ Telegramï¼Œæœç´¢ä½ åˆšæ‰åˆ›å»ºçš„ botï¼ˆç”¨æˆ·åï¼‰</li>
<li>ç‚¹å‡» <strong>Start</strong> æˆ–å‘é€ <code>/start</code></li>
<li>å‘é€ä¸€æ¡æ¶ˆæ¯ï¼Œæ¯”å¦‚ï¼š<code>ä½ å¥½ï¼Œä»‹ç»ä¸€ä¸‹ä½ è‡ªå·±</code></li>
</ol>
<p>å¦‚æœä¸€åˆ‡é¡ºåˆ©ï¼Œä½ çš„ bot åº”è¯¥ä¼šå›å¤ä½ ï¼è¿™å°±æ˜¯ Claude é€šè¿‡ OpenClaw Gateway åœ¨å“åº”ã€‚</p>
<h3 data-id="heading-13">æŸ¥çœ‹å®æ—¶æ—¥å¿—</h3>
<p>æƒ³çœ‹åˆ° Gateway å†…éƒ¨å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿæ‰“å¼€æ—¥å¿—ç›‘æ§ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">openclaw logs --follow
</code></pre>
<p>è¿™ä¼šå®æ—¶æ˜¾ç¤ºæ‰€æœ‰è¯·æ±‚ã€å“åº”ã€é”™è¯¯ä¿¡æ¯ï¼Œæ–¹ä¾¿è°ƒè¯•ã€‚</p>
<h3 data-id="heading-14">ä½¿ç”¨ Web æ§åˆ¶é¢æ¿</h3>
<p>OpenClaw è¿˜æä¾›äº†ä¸€ä¸ªå¾ˆå®ç”¨çš„ Web æ§åˆ¶é¢æ¿ã€‚æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">http:<span class="hljs-comment">//localhost:18789</span>
</code></pre>
<p>åœ¨æ§åˆ¶é¢æ¿é‡Œï¼Œä½ å¯ä»¥ï¼š</p>
<ul>
<li>æŸ¥çœ‹æ‰€æœ‰å¯¹è¯å†å²</li>
<li>æ‰‹åŠ¨æµ‹è¯•å¯¹è¯ï¼ˆä¸éœ€è¦é€šè¿‡ Telegramï¼‰</li>
<li>æŸ¥çœ‹ç³»ç»ŸçŠ¶æ€å’Œé…ç½®</li>
<li>ç®¡ç†å¤šä¸ª Agent</li>
</ul>
<p>è¿™æ˜¯æœ€æ–¹ä¾¿çš„è°ƒè¯•å·¥å…·ï¼Œå¼ºçƒˆæ¨èè¯•è¯•ã€‚</p>
<h2 data-id="heading-15">å¸¸è§é—®é¢˜</h2>
<p><strong>Q: Bot æ²¡æœ‰å›å¤æ€ä¹ˆåŠï¼Ÿ</strong></p>
<p>æ£€æŸ¥ä»¥ä¸‹å‡ ç‚¹ï¼š</p>
<ol>
<li><code>openclaw gateway status</code> ç¡®è®¤ Gateway æ­£åœ¨è¿è¡Œ</li>
<li><code>openclaw logs --follow</code> æŸ¥çœ‹æ˜¯å¦æœ‰é”™è¯¯ä¿¡æ¯</li>
<li>ç¡®è®¤ Telegram token é…ç½®æ­£ç¡®</li>
<li>ç¡®è®¤ Anthropic API Key æœ‰æ•ˆä¸”æœ‰ä½™é¢</li>
</ol>
<p><strong>Q: æƒ³è®© Bot æ›´æ™ºèƒ½æ€ä¹ˆåŠï¼Ÿ</strong></p>
<p>OpenClaw æ”¯æŒè‡ªå®šä¹‰ Agent é…ç½®ï¼Œå¯ä»¥ç»™ Agent æ·»åŠ è®°å¿†ã€å·¥å…·ã€è‡ªå®šä¹‰ prompt ç­‰ã€‚è¿™äº›é«˜çº§åŠŸèƒ½æˆ‘ä¼šåœ¨ä¸‹ä¸€ç¯‡æ–‡ç« è¯¦ç»†ä»‹ç»ã€‚</p>
<p><strong>Q: å¯ä»¥åŒæ—¶é…ç½®å¤šä¸ª Bot å—ï¼Ÿ</strong></p>
<p>å½“ç„¶å¯ä»¥ï¼åœ¨ <code>channels.telegram.accounts</code> æ•°ç»„é‡Œæ·»åŠ å¤šä¸ªé…ç½®å³å¯ï¼Œæ¯ä¸ª bot å¯ä»¥æŒ‡å®šä¸åŒçš„ agentã€‚</p>
<h2 data-id="heading-16">ä¸‹ä¸€æ­¥</h2>
<p>æ­å–œä½ ï¼ç°åœ¨ä½ å·²ç»æˆåŠŸæ­å»ºäº†ä¸€ä¸ªå®Œå…¨ç”±ä½ æŒæ§çš„ AI åŠ©æ‰‹ã€‚</p>
<p>å¦‚æœä½ æƒ³è¿›ä¸€æ­¥æ¢ç´¢ OpenClaw çš„å¼ºå¤§åŠŸèƒ½ï¼Œå¯ä»¥å…³æ³¨æˆ‘æ¥ä¸‹æ¥çš„ç³»åˆ—æ–‡ç« ï¼š</p>
<ul>
<li><strong>å¤š Agent é…ç½®</strong>ï¼šä¸ºä¸åŒåœºæ™¯åˆ›å»ºä¸“ç”¨åŠ©æ‰‹ï¼ˆå·¥ä½œã€å¨±ä¹ã€å­¦ä¹ ï¼‰</li>
<li><strong>å·¥å…·é›†æˆ</strong>ï¼šè®© AI èƒ½æ‰§è¡Œå‘½ä»¤ã€æœç´¢ç½‘é¡µã€ç®¡ç†æ–‡ä»¶</li>
<li><strong>è®°å¿†ç³»ç»Ÿ</strong>ï¼šè®© AI è®°ä½ä½ çš„åå¥½å’Œå†å²å¯¹è¯</li>
</ul>
<p>ä¹Ÿå¯ä»¥ç›´æ¥æŸ¥çœ‹ <a href="https://link.juejin.cn?target=https%3A%2F%2Fopenclaw.ai%2F" target="_blank" title="https://openclaw.ai/" ref="nofollow noopener noreferrer">OpenClaw å®˜æ–¹æ–‡æ¡£</a> äº†è§£æ›´å¤šé«˜çº§ç”¨æ³•ã€‚</p>
<p>å¦‚æœåœ¨æ­å»ºè¿‡ç¨‹ä¸­é‡åˆ°ä»»ä½•é—®é¢˜ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºç•™è¨€äº¤æµã€‚</p>
<hr/>
<p><strong>ç›¸å…³èµ„æº</strong>ï¼š</p>
<ul>
<li>OpenClaw å®˜ç½‘ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fopenclaw.ai%2F" target="_blank" title="https://openclaw.ai/" ref="nofollow noopener noreferrer">openclaw.ai/</a></li>
<li>GitHub ä»“åº“ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fopenclaw%2Fopenclaw" target="_blank" title="https://github.com/openclaw/openclaw" ref="nofollow noopener noreferrer">github.com/openclaw/opâ€¦</a></li>
<li>å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fopenclaw.ai%2Fdocs" target="_blank" title="https://openclaw.ai/docs" ref="nofollow noopener noreferrer">openclaw.ai/docs</a></li>
<li>Anthropic APIï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fconsole.anthropic.com%2F" target="_blank" title="https://console.anthropic.com/" ref="nofollow noopener noreferrer">console.anthropic.com/</a></li>
</ul>
<hr/>
<blockquote>
<p>åŸæ–‡é“¾æ¥ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fchenguangliang.com%2Fposts%2Fopenclaw-getting-started" target="_blank" title="https://chenguangliang.com/posts/openclaw-getting-started" ref="nofollow noopener noreferrer">chenguangliang.com/posts/opencâ€¦</a></p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»¤ç‰Œç¯å¼åŒæ­¥æ‰©å±•]]></title>    <link>https://juejin.cn/post/7605816833191870464</link>    <guid>https://juejin.cn/post/7605816833191870464</guid>    <pubDate>2026-02-13T05:05:08.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605816833191870464" data-draft-id="7605772919224959010" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»¤ç‰Œç¯å¼åŒæ­¥æ‰©å±•"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-02-13T05:05:08.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="guchen66"/> <meta itemprop="url" content="https://juejin.cn/user/3191200923270394"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»¤ç‰Œç¯å¼åŒæ­¥æ‰©å±•
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3191200923270394/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    guchen66
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-13T05:05:08.000Z" title="Fri Feb 13 2026 05:05:08 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    7
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä»¤ç‰Œç¯å¼åŒæ­¥æ‰©å±•ï¼šä» Ping-Pong åˆ° ABC äº¤æ›¿æ‰§è¡Œ</h2>
<p>åœ¨ä¸Šä¸€ç¯‡åšå®¢ä¸­ï¼Œæˆ‘ä»¬ä»‹ç»äº†å…­ç§å®ç°ä¸¤ä¸ªçº¿ç¨‹äº¤æ›¿æ‰§è¡Œçš„æ–¹æ³•ã€‚æœ¬æ–‡å°†ä½œä¸ºæ‰©å±•ï¼Œæ¢è®¨å¦‚ä½•å°†è¿™äº›å®ç°æ–¹å¼æ”¹é€ ä¸ºä¸‰ä¸ªçº¿ç¨‹äº¤æ›¿æ‰§è¡Œ "A"ã€"B"ã€"C"ï¼Œå½¢æˆ "ABCABC..." çš„ç¯å½¢åºåˆ—ã€‚</p>
<h3 data-id="heading-1">é—®é¢˜æè¿°</h3>
<p>å®ç°ä¸‰ä¸ªçº¿ç¨‹äº¤æ›¿æ‰“å° "A"ã€"B"ã€"C"ï¼Œå…±æ‰“å° 100 è½®ï¼Œå½¢æˆ "ABCABC..." çš„äº¤æ›¿åºåˆ—ã€‚</p>
<h3 data-id="heading-2">å…­ç§å®ç°æ–¹å¼çš„æ”¹é€ åˆ†æ</h3>
<h4 data-id="heading-3">1. ManualResetEvent / AutoResetEvent å®ç°</h4>
<p><strong>æ”¹é€ éš¾åº¦ï¼šâ­â­ å®¹æ˜“</strong></p>
<pre><code class="hljs language-scss" lang="scss">internal class ABC_EventTestCode
{
 Â  Â public static void <span class="hljs-built_in">Print</span>()
 Â   {
 Â  Â  Â  Â <span class="hljs-selector-tag">var</span> <span class="hljs-selector-tag">a</span> = new <span class="hljs-built_in">AutoResetEvent</span>(true); Â <span class="hljs-comment">// A åˆå§‹å¯ç”¨</span>
 Â  Â  Â  Â <span class="hljs-selector-tag">var</span> <span class="hljs-selector-tag">b</span> = new <span class="hljs-built_in">AutoResetEvent</span>(false); <span class="hljs-comment">// B åˆå§‹ä¸å¯ç”¨</span>
 Â  Â  Â  Â <span class="hljs-selector-tag">var</span> c = new <span class="hljs-built_in">AutoResetEvent</span>(false); <span class="hljs-comment">// C åˆå§‹ä¸å¯ç”¨</span>
â€‹
 Â  Â  Â  Â <span class="hljs-comment">// çº¿ç¨‹ A</span>
 Â  Â  Â  Â Task<span class="hljs-selector-class">.Run</span>(() =&gt;
 Â  Â  Â   {
 Â  Â  Â  Â  Â  Â for (int i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; i++)
 Â  Â  Â  Â  Â   {
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-selector-tag">a</span><span class="hljs-selector-class">.WaitOne</span>(); Â  Â <span class="hljs-comment">// ç­‰å¾… A ä¿¡å·</span>
 Â  Â  Â  Â  Â  Â  Â  Â Console<span class="hljs-selector-class">.WriteLine</span>("A");
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-selector-tag">b</span><span class="hljs-selector-class">.Set</span>(); Â  Â  Â  Â <span class="hljs-comment">// é‡Šæ”¾ B ä¿¡å·</span>
 Â  Â  Â  Â  Â   }
 Â  Â  Â   });
â€‹
 Â  Â  Â  Â <span class="hljs-comment">// çº¿ç¨‹ B</span>
 Â  Â  Â  Â Task<span class="hljs-selector-class">.Run</span>(() =&gt;
 Â  Â  Â   {
 Â  Â  Â  Â  Â  Â for (int i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; i++)
 Â  Â  Â  Â  Â   {
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-selector-tag">b</span><span class="hljs-selector-class">.WaitOne</span>(); Â  Â <span class="hljs-comment">// ç­‰å¾… B ä¿¡å·</span>
 Â  Â  Â  Â  Â  Â  Â  Â Console<span class="hljs-selector-class">.WriteLine</span>("B");
 Â  Â  Â  Â  Â  Â  Â  Â c<span class="hljs-selector-class">.Set</span>(); Â  Â  Â  Â <span class="hljs-comment">// é‡Šæ”¾ C ä¿¡å·</span>
 Â  Â  Â  Â  Â   }
 Â  Â  Â   });
â€‹
 Â  Â  Â  Â <span class="hljs-comment">// çº¿ç¨‹ C</span>
 Â  Â  Â  Â Task<span class="hljs-selector-class">.Run</span>(() =&gt;
 Â  Â  Â   {
 Â  Â  Â  Â  Â  Â for (int i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; i++)
 Â  Â  Â  Â  Â   {
 Â  Â  Â  Â  Â  Â  Â  Â c<span class="hljs-selector-class">.WaitOne</span>(); Â  Â <span class="hljs-comment">// ç­‰å¾… C ä¿¡å·</span>
 Â  Â  Â  Â  Â  Â  Â  Â Console<span class="hljs-selector-class">.WriteLine</span>("C");
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-selector-tag">a</span><span class="hljs-selector-class">.Set</span>(); Â  Â  Â  Â <span class="hljs-comment">// é‡Šæ”¾ A ä¿¡å·ï¼Œå½¢æˆé—­ç¯</span>
 Â  Â  Â  Â  Â   }
 Â  Â  Â   });
 Â   }
}
</code></pre>
<p><strong>å·¥ä½œåŸç†</strong>ï¼š</p>
<ul>
<li>ä½¿ç”¨ä¸‰ä¸ª <code>AutoResetEvent</code> å¯¹è±¡ï¼Œåˆå§‹çŠ¶æ€åˆ†åˆ«ä¸º <code>true</code>ï¼ˆA å¯ç”¨ï¼‰ã€<code>false</code>ï¼ˆB ä¸å¯ç”¨ï¼‰å’Œ <code>false</code>ï¼ˆC ä¸å¯ç”¨ï¼‰</li>
<li>æ¯ä¸ªçº¿ç¨‹æ‰§è¡Œå‰è°ƒç”¨ <code>WaitOne()</code> ç­‰å¾…ä¿¡å·</li>
<li>æ‰§è¡Œå®Œæˆåï¼Œé€šè¿‡ <code>Set()</code> é€šçŸ¥ä¸‹ä¸€ä¸ªçº¿ç¨‹ï¼Œæœ€åä¸€ä¸ªçº¿ç¨‹é€šçŸ¥ç¬¬ä¸€ä¸ªçº¿ç¨‹å½¢æˆé—­ç¯</li>
</ul>
<p><strong>ä¼˜ç¼ºç‚¹</strong>ï¼š</p>
<ul>
<li>âœ… æ”¹é€ ç®€å•ï¼Œé€»è¾‘æ¸…æ™°</li>
<li>âœ… AutoResetEvent è‡ªåŠ¨é‡ç½®ï¼Œæ— éœ€æ‰‹åŠ¨è°ƒç”¨ Reset()</li>
<li>âœ… é€‚ç”¨äºä¼ ç»ŸåŒæ­¥åœºæ™¯</li>
<li>âŒ ä¸æ”¯æŒå¼‚æ­¥ç¼–ç¨‹ï¼Œä¼šé˜»å¡çº¿ç¨‹</li>
<li>âŒ ManualResetEvent éœ€è¦æ‰‹åŠ¨ Resetï¼Œä¸‰ä¸ªä¿¡å·æ—¶å®¹æ˜“æ¼æ‰</li>
</ul>
<h4 data-id="heading-4">2. SemaphoreSlim å®ç°</h4>
<p><strong>æ”¹é€ éš¾åº¦ï¼šâ­â­ å®¹æ˜“</strong></p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">internal</span> <span class="hljs-keyword">class</span> <span class="hljs-title">ABC_SemaphoreSlimTestCode</span>
{
 Â  Â <span class="hljs-comment">// A åˆå§‹å¯ç”¨(1)ï¼ŒBã€C åˆå§‹ä¸å¯ç”¨(0)</span>
 Â  Â <span class="hljs-keyword">private</span> SemaphoreSlim semA = <span class="hljs-keyword">new</span> SemaphoreSlim(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>);
 Â  Â <span class="hljs-keyword">private</span> SemaphoreSlim semB = <span class="hljs-keyword">new</span> SemaphoreSlim(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>);
 Â  Â <span class="hljs-keyword">private</span> SemaphoreSlim semC = <span class="hljs-keyword">new</span> SemaphoreSlim(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>);
â€‹
 Â  Â <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Print</span>()</span>
 Â   {
 Â  Â  Â  Â <span class="hljs-comment">// çº¿ç¨‹ A</span>
 Â  Â  Â  Â Task.Run(<span class="hljs-keyword">async</span> () =&gt;
 Â  Â  Â   {
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; i++)
 Â  Â  Â  Â  Â   {
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">await</span> semA.WaitAsync(); Â  <span class="hljs-comment">// ç­‰å¾… A ä¿¡å·</span>
 Â  Â  Â  Â  Â  Â  Â  Â Console.WriteLine(<span class="hljs-string">"A"</span>);
 Â  Â  Â  Â  Â  Â  Â  Â semB.Release(); Â  Â  Â  Â  Â  <span class="hljs-comment">// é‡Šæ”¾ B ä¿¡å·</span>
 Â  Â  Â  Â  Â   }
 Â  Â  Â   });
â€‹
 Â  Â  Â  Â <span class="hljs-comment">// çº¿ç¨‹ B</span>
 Â  Â  Â  Â Task.Run(<span class="hljs-keyword">async</span> () =&gt;
 Â  Â  Â   {
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; i++)
 Â  Â  Â  Â  Â   {
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">await</span> semB.WaitAsync(); Â  <span class="hljs-comment">// ç­‰å¾… B ä¿¡å·</span>
 Â  Â  Â  Â  Â  Â  Â  Â Console.WriteLine(<span class="hljs-string">"B"</span>);
 Â  Â  Â  Â  Â  Â  Â  Â semC.Release(); Â  Â  Â  Â  Â  <span class="hljs-comment">// é‡Šæ”¾ C ä¿¡å·</span>
 Â  Â  Â  Â  Â   }
 Â  Â  Â   });
â€‹
 Â  Â  Â  Â <span class="hljs-comment">// çº¿ç¨‹ C</span>
 Â  Â  Â  Â Task.Run(<span class="hljs-keyword">async</span> () =&gt;
 Â  Â  Â   {
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; i++)
 Â  Â  Â  Â  Â   {
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">await</span> semC.WaitAsync(); Â  <span class="hljs-comment">// ç­‰å¾… C ä¿¡å·</span>
 Â  Â  Â  Â  Â  Â  Â  Â Console.WriteLine(<span class="hljs-string">"C"</span>);
 Â  Â  Â  Â  Â  Â  Â  Â semA.Release(); Â  Â  Â  Â  Â  <span class="hljs-comment">// é‡Šæ”¾ A ä¿¡å·ï¼Œå½¢æˆé—­ç¯</span>
 Â  Â  Â  Â  Â   }
 Â  Â  Â   });
 Â   }
}
</code></pre>
<p><strong>å·¥ä½œåŸç†</strong>ï¼š</p>
<ul>
<li>ä½¿ç”¨ä¸‰ä¸ª <code>SemaphoreSlim</code> å¯¹è±¡ï¼Œåˆå§‹è®¡æ•°åˆ†åˆ«ä¸º 1ï¼ˆA å¯ç”¨ï¼‰ã€0ï¼ˆB ä¸å¯ç”¨ï¼‰å’Œ 0ï¼ˆC ä¸å¯ç”¨ï¼‰</li>
<li>æ¯ä¸ªçº¿ç¨‹æ‰§è¡Œå‰è°ƒç”¨ <code>WaitAsync()</code> ç­‰å¾…ä¿¡å·</li>
<li>æ‰§è¡Œå®Œæˆåï¼Œé€šè¿‡ <code>Release()</code> å¢åŠ ä¸‹ä¸€ä¸ªä¿¡å·é‡çš„è®¡æ•°ï¼Œæœ€åä¸€ä¸ªçº¿ç¨‹é‡Šæ”¾ç¬¬ä¸€ä¸ªä¿¡å·é‡å½¢æˆé—­ç¯</li>
</ul>
<p><strong>ä¼˜ç¼ºç‚¹</strong>ï¼š</p>
<ul>
<li>âœ… æ”¹é€ ç®€å•ï¼Œä»£ç ç®€æ´</li>
<li>âœ… æ”¯æŒå¼‚æ­¥ç¼–ç¨‹ï¼Œä½¿ç”¨ <code>await</code> è¯­æ³•æ›´ç°ä»£</li>
<li>âœ… è½»é‡çº§ï¼Œæ€§èƒ½è¾ƒå¥½</li>
<li>âœ… æœ€é€‚åˆ ABC åœºæ™¯ï¼Œä»£ç æ¸…æ™°æ˜“ç»´æŠ¤</li>
<li>âœ… æ”¯æŒè¶…æ—¶å’Œå–æ¶ˆæ“ä½œ</li>
</ul>
<h4 data-id="heading-5">3. TaskCompletionSource å®ç°</h4>
<p><strong>æ”¹é€ éš¾åº¦ï¼šâ­â­â­ ä¸­ç­‰</strong></p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">internal</span> <span class="hljs-keyword">class</span> <span class="hljs-title">ABC_TaskCompletionSourceTestCode</span>
{
 Â  Â <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">async</span> Task <span class="hljs-title">PrintAsync</span>()</span>
 Â   {
 Â  Â  Â  Â <span class="hljs-keyword">var</span> tcsA = <span class="hljs-keyword">new</span> TaskCompletionSource&lt;<span class="hljs-built_in">bool</span>&gt;(TaskCreationOptions.RunContinuationsAsynchronously);
 Â  Â  Â  Â <span class="hljs-keyword">var</span> tcsB = <span class="hljs-keyword">new</span> TaskCompletionSource&lt;<span class="hljs-built_in">bool</span>&gt;(TaskCreationOptions.RunContinuationsAsynchronously);
 Â  Â  Â  Â <span class="hljs-keyword">var</span> tcsC = <span class="hljs-keyword">new</span> TaskCompletionSource&lt;<span class="hljs-built_in">bool</span>&gt;(TaskCreationOptions.RunContinuationsAsynchronously);
â€‹
 Â  Â  Â  Â <span class="hljs-comment">// åˆå§‹è®© A å¯ä»¥æ‰§è¡Œ</span>
 Â  Â  Â  Â tcsA.SetResult(<span class="hljs-literal">true</span>);
â€‹
 Â  Â  Â  Â <span class="hljs-comment">// çº¿ç¨‹ A</span>
 Â  Â  Â  Â <span class="hljs-keyword">var</span> taskA = Task.Run(<span class="hljs-keyword">async</span> () =&gt;
 Â  Â  Â   {
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; i++)
 Â  Â  Â  Â  Â   {
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">await</span> tcsA.Task; Â  Â  <span class="hljs-comment">// ç­‰å¾… A ä¿¡å·</span>
 Â  Â  Â  Â  Â  Â  Â  Â Console.WriteLine(<span class="hljs-string">"A"</span>);
 Â  Â  Â  Â  Â  Â  Â  Â tcsA = <span class="hljs-keyword">new</span> TaskCompletionSource&lt;<span class="hljs-built_in">bool</span>&gt;(TaskCreationOptions.RunContinuationsAsynchronously);
 Â  Â  Â  Â  Â  Â  Â  Â tcsB.SetResult(<span class="hljs-literal">true</span>); <span class="hljs-comment">// é€šçŸ¥ B å¯ä»¥æ‰§è¡Œ</span>
 Â  Â  Â  Â  Â   }
 Â  Â  Â   });
â€‹
 Â  Â  Â  Â <span class="hljs-comment">// çº¿ç¨‹ B</span>
 Â  Â  Â  Â <span class="hljs-keyword">var</span> taskB = Task.Run(<span class="hljs-keyword">async</span> () =&gt;
 Â  Â  Â   {
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; i++)
 Â  Â  Â  Â  Â   {
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">await</span> tcsB.Task; Â  Â  <span class="hljs-comment">// ç­‰å¾… B ä¿¡å·</span>
 Â  Â  Â  Â  Â  Â  Â  Â Console.WriteLine(<span class="hljs-string">"B"</span>);
 Â  Â  Â  Â  Â  Â  Â  Â tcsB = <span class="hljs-keyword">new</span> TaskCompletionSource&lt;<span class="hljs-built_in">bool</span>&gt;(TaskCreationOptions.RunContinuationsAsynchronously);
 Â  Â  Â  Â  Â  Â  Â  Â tcsC.SetResult(<span class="hljs-literal">true</span>); <span class="hljs-comment">// é€šçŸ¥ C å¯ä»¥æ‰§è¡Œ</span>
 Â  Â  Â  Â  Â   }
 Â  Â  Â   });
â€‹
 Â  Â  Â  Â <span class="hljs-comment">// çº¿ç¨‹ C</span>
 Â  Â  Â  Â <span class="hljs-keyword">var</span> taskC = Task.Run(<span class="hljs-keyword">async</span> () =&gt;
 Â  Â  Â   {
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; i++)
 Â  Â  Â  Â  Â   {
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">await</span> tcsC.Task; Â  Â  <span class="hljs-comment">// ç­‰å¾… C ä¿¡å·</span>
 Â  Â  Â  Â  Â  Â  Â  Â Console.WriteLine(<span class="hljs-string">"C"</span>);
 Â  Â  Â  Â  Â  Â  Â  Â tcsC = <span class="hljs-keyword">new</span> TaskCompletionSource&lt;<span class="hljs-built_in">bool</span>&gt;(TaskCreationOptions.RunContinuationsAsynchronously);
 Â  Â  Â  Â  Â  Â  Â  Â tcsA.SetResult(<span class="hljs-literal">true</span>); <span class="hljs-comment">// é€šçŸ¥ A å¯ä»¥æ‰§è¡Œï¼Œå½¢æˆé—­ç¯</span>
 Â  Â  Â  Â  Â   }
 Â  Â  Â   });
â€‹
 Â  Â  Â  Â <span class="hljs-keyword">await</span> Task.WhenAll(taskA, taskB, taskC);
 Â   }
}
</code></pre>
<p><strong>å·¥ä½œåŸç†</strong>ï¼š</p>
<ul>
<li>ä½¿ç”¨ä¸‰ä¸ª <code>TaskCompletionSource</code> å¯¹è±¡</li>
<li>åˆå§‹æ—¶ï¼Œå°† A çš„ä»»åŠ¡æ ‡è®°ä¸ºå®Œæˆï¼Œå…è®¸ A ç«‹å³æ‰§è¡Œ</li>
<li>æ¯ä¸ªçº¿ç¨‹æ‰§è¡Œå‰ç­‰å¾…å¯¹åº”çš„ <code>Task</code> å®Œæˆ</li>
<li>æ‰§è¡Œå®Œæˆåï¼Œåˆ›å»ºæ–°çš„ <code>TaskCompletionSource</code> å¯¹è±¡ï¼Œå¹¶å°†ä¸‹ä¸€ä¸ªçº¿ç¨‹çš„ä»»åŠ¡æ ‡è®°ä¸ºå®Œæˆï¼Œæœ€åä¸€ä¸ªçº¿ç¨‹é€šçŸ¥ç¬¬ä¸€ä¸ªçº¿ç¨‹å½¢æˆé—­ç¯</li>
</ul>
<p><strong>ä¼˜ç¼ºç‚¹</strong>ï¼š</p>
<ul>
<li>âœ… æ”¯æŒå¼‚æ­¥ç¼–ç¨‹æ¨¡å‹</li>
<li>âœ… å¯ä»¥ä¼ é€’å®é™…æ•°æ®ï¼Œä¸ä»…ä»…æ˜¯ä¿¡å·</li>
<li>âŒ æ¯æ¬¡è¿­ä»£éƒ½éœ€è¦åˆ›å»ºä¸‰ä¸ªæ–°çš„ <code>TaskCompletionSource</code> å¯¹è±¡ï¼Œå†…å­˜å¼€é”€è¾ƒå¤§</li>
<li>âŒ ä»£ç ç›¸å¯¹å¤æ‚ï¼Œéœ€è¦ç†è§£å¼‚æ­¥ç¼–ç¨‹æ¨¡å‹</li>
<li>âŒ å¯¹äºçº¯ä¿¡å·æ§åˆ¶åœºæ™¯ï¼Œæœ‰ç‚¹æ€é¸¡ç”¨ç‰›åˆ€</li>
</ul>
<h4 data-id="heading-6">4. Channel å®ç°</h4>
<p><strong>æ”¹é€ éš¾åº¦ï¼šâ­â­ å®¹æ˜“</strong></p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">internal</span> <span class="hljs-keyword">class</span> <span class="hljs-title">ABC_ChannelTestCode</span>
{
 Â  Â <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">async</span> Task <span class="hljs-title">PrintAsync</span>()</span>
 Â   {
 Â  Â  Â  Â <span class="hljs-keyword">var</span> chA = Channel.CreateUnbounded&lt;<span class="hljs-built_in">bool</span>&gt;();
 Â  Â  Â  Â <span class="hljs-keyword">var</span> chB = Channel.CreateUnbounded&lt;<span class="hljs-built_in">bool</span>&gt;();
 Â  Â  Â  Â <span class="hljs-keyword">var</span> chC = Channel.CreateUnbounded&lt;<span class="hljs-built_in">bool</span>&gt;();
â€‹
 Â  Â  Â  Â <span class="hljs-comment">// åˆå§‹è®© A å¯ä»¥æ‰§è¡Œ</span>
 Â  Â  Â  Â <span class="hljs-keyword">await</span> chA.Writer.WriteAsync(<span class="hljs-literal">true</span>);
â€‹
 Â  Â  Â  Â <span class="hljs-comment">// çº¿ç¨‹ A</span>
 Â  Â  Â  Â <span class="hljs-keyword">var</span> taskA = Task.Run(<span class="hljs-keyword">async</span> () =&gt;
 Â  Â  Â   {
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; i++)
 Â  Â  Â  Â  Â   {
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">await</span> chA.Reader.ReadAsync(); <span class="hljs-comment">// ç­‰å¾… A ä¿¡å·</span>
 Â  Â  Â  Â  Â  Â  Â  Â Console.WriteLine(<span class="hljs-string">"A"</span>);
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">await</span> chB.Writer.WriteAsync(<span class="hljs-literal">true</span>); <span class="hljs-comment">// é€šçŸ¥ B å¯ä»¥æ‰§è¡Œ</span>
 Â  Â  Â  Â  Â   }
 Â  Â  Â   });
â€‹
 Â  Â  Â  Â <span class="hljs-comment">// çº¿ç¨‹ B</span>
 Â  Â  Â  Â <span class="hljs-keyword">var</span> taskB = Task.Run(<span class="hljs-keyword">async</span> () =&gt;
 Â  Â  Â   {
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; i++)
 Â  Â  Â  Â  Â   {
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">await</span> chB.Reader.ReadAsync(); <span class="hljs-comment">// ç­‰å¾… B ä¿¡å·</span>
 Â  Â  Â  Â  Â  Â  Â  Â Console.WriteLine(<span class="hljs-string">"B"</span>);
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">await</span> chC.Writer.WriteAsync(<span class="hljs-literal">true</span>); <span class="hljs-comment">// é€šçŸ¥ C å¯ä»¥æ‰§è¡Œ</span>
 Â  Â  Â  Â  Â   }
 Â  Â  Â   });
â€‹
 Â  Â  Â  Â <span class="hljs-comment">// çº¿ç¨‹ C</span>
 Â  Â  Â  Â <span class="hljs-keyword">var</span> taskC = Task.Run(<span class="hljs-keyword">async</span> () =&gt;
 Â  Â  Â   {
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; i++)
 Â  Â  Â  Â  Â   {
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">await</span> chC.Reader.ReadAsync(); <span class="hljs-comment">// ç­‰å¾… C ä¿¡å·</span>
 Â  Â  Â  Â  Â  Â  Â  Â Console.WriteLine(<span class="hljs-string">"C"</span>);
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">await</span> chA.Writer.WriteAsync(<span class="hljs-literal">true</span>); <span class="hljs-comment">// é€šçŸ¥ A å¯ä»¥æ‰§è¡Œï¼Œå½¢æˆé—­ç¯</span>
 Â  Â  Â  Â  Â   }
 Â  Â  Â   });
â€‹
 Â  Â  Â  Â <span class="hljs-keyword">await</span> Task.WhenAll(taskA, taskB, taskC);
 Â   }
}
</code></pre>
<p><strong>å·¥ä½œåŸç†</strong>ï¼š</p>
<ul>
<li>ä½¿ç”¨ä¸‰ä¸ª <code>Channel</code> å¯¹è±¡åˆ›å»ºæ— ç•Œé€šé“</li>
<li>åˆå§‹æ—¶ï¼Œå‘ A é€šé“å†™å…¥æ•°æ®ï¼Œå…è®¸ A ç«‹å³æ‰§è¡Œ</li>
<li>æ¯ä¸ªçº¿ç¨‹ä»è‡ªå·±çš„é€šé“è¯»å–æ•°æ®ï¼ˆç­‰å¾…ä¿¡å·ï¼‰</li>
<li>æ‰§è¡Œå®Œæˆåï¼Œå‘ä¸‹ä¸€ä¸ªé€šé“å†™å…¥æ•°æ®ï¼ˆå‘é€ä¿¡å·ï¼‰ï¼Œæœ€åä¸€ä¸ªçº¿ç¨‹å‘ç¬¬ä¸€ä¸ªé€šé“å†™å…¥æ•°æ®å½¢æˆé—­ç¯</li>
</ul>
<p><strong>ä¼˜ç¼ºç‚¹</strong>ï¼š</p>
<ul>
<li>âœ… ç°ä»£å¼‚æ­¥ç¼–ç¨‹æ¨¡å‹ï¼Œè®¾è®¡ä¼˜é›…</li>
<li>âœ… é«˜æ€§èƒ½ï¼Œé€‚åˆé«˜å¹¶å‘åœºæ™¯</li>
<li>âœ… å¯ä»¥è½»æ¾æ‰©å±•ä¸ºä¼ é€’å¤æ‚æ•°æ®</li>
<li>âŒ éœ€è¦ .NET Core 3.0+ æˆ– .NET 5+ æ”¯æŒ</li>
<li>âŒ å¯¹äºçº¯ä¿¡å·æ§åˆ¶åœºæ™¯ï¼Œå¯èƒ½æ˜¾å¾—è¿‡äºå¤æ‚</li>
</ul>
<h4 data-id="heading-7">5. Monitor/lock å®ç°</h4>
<p><strong>æ”¹é€ éš¾åº¦ï¼šâ­â­â­â­ å›°éš¾</strong></p>
<pre><code class="hljs language-arduino" lang="arduino">internal <span class="hljs-keyword">class</span> <span class="hljs-title class_">ABC_MonitorLockTestCode</span>
{
 Â  Â <span class="hljs-keyword">private</span> object lockObj = <span class="hljs-keyword">new</span> <span class="hljs-built_in">object</span>();
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> turn = <span class="hljs-number">0</span>; <span class="hljs-comment">// 0=A, 1=B, 2=C</span>
â€‹
 Â  Â <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-type">void</span> <span class="hljs-title">Print</span><span class="hljs-params">()</span>
 Â   </span>{
 Â  Â  Â  Â <span class="hljs-comment">// çº¿ç¨‹ A</span>
 Â  Â  Â  Â <span class="hljs-built_in">Task</span>.<span class="hljs-built_in">Run</span>(() =&gt;
 Â  Â  Â   {
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; i++)
 Â  Â  Â  Â  Â   {
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-built_in">lock</span> (lockObj)
 Â  Â  Â  Â  Â  Â  Â   {
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">while</span> (turn != <span class="hljs-number">0</span>) <span class="hljs-comment">// ç­‰å¾…è‡ªå·±çš„å›åˆ</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â   {
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Monitor.<span class="hljs-built_in">Wait</span>(lockObj); <span class="hljs-comment">// é‡Šæ”¾é”å¹¶ç­‰å¾…ä¿¡å·</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â   }
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â 
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-built_in">Console</span>.<span class="hljs-built_in">WriteLine</span>(<span class="hljs-string">"A"</span>);
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â turn = <span class="hljs-number">1</span>; <span class="hljs-comment">// åˆ‡æ¢åˆ° B å›åˆ</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Monitor.<span class="hljs-built_in">PulseAll</span>(lockObj); <span class="hljs-comment">// å”¤é†’æ‰€æœ‰ç­‰å¾…çš„çº¿ç¨‹</span>
 Â  Â  Â  Â  Â  Â  Â   }
 Â  Â  Â  Â  Â   }
 Â  Â  Â   });
â€‹
 Â  Â  Â  Â <span class="hljs-comment">// çº¿ç¨‹ B</span>
 Â  Â  Â  Â <span class="hljs-built_in">Task</span>.<span class="hljs-built_in">Run</span>(() =&gt;
 Â  Â  Â   {
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; i++)
 Â  Â  Â  Â  Â   {
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-built_in">lock</span> (lockObj)
 Â  Â  Â  Â  Â  Â  Â   {
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">while</span> (turn != <span class="hljs-number">1</span>) <span class="hljs-comment">// ç­‰å¾…è‡ªå·±çš„å›åˆ</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â   {
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Monitor.<span class="hljs-built_in">Wait</span>(lockObj); <span class="hljs-comment">// é‡Šæ”¾é”å¹¶ç­‰å¾…ä¿¡å·</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â   }
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â 
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-built_in">Console</span>.<span class="hljs-built_in">WriteLine</span>(<span class="hljs-string">"B"</span>);
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â turn = <span class="hljs-number">2</span>; <span class="hljs-comment">// åˆ‡æ¢åˆ° C å›åˆ</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Monitor.<span class="hljs-built_in">PulseAll</span>(lockObj); <span class="hljs-comment">// å”¤é†’æ‰€æœ‰ç­‰å¾…çš„çº¿ç¨‹</span>
 Â  Â  Â  Â  Â  Â  Â   }
 Â  Â  Â  Â  Â   }
 Â  Â  Â   });
â€‹
 Â  Â  Â  Â <span class="hljs-comment">// çº¿ç¨‹ C</span>
 Â  Â  Â  Â <span class="hljs-built_in">Task</span>.<span class="hljs-built_in">Run</span>(() =&gt;
 Â  Â  Â   {
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; i++)
 Â  Â  Â  Â  Â   {
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-built_in">lock</span> (lockObj)
 Â  Â  Â  Â  Â  Â  Â   {
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">while</span> (turn != <span class="hljs-number">2</span>) <span class="hljs-comment">// ç­‰å¾…è‡ªå·±çš„å›åˆ</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â   {
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Monitor.<span class="hljs-built_in">Wait</span>(lockObj); <span class="hljs-comment">// é‡Šæ”¾é”å¹¶ç­‰å¾…ä¿¡å·</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â   }
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â 
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-built_in">Console</span>.<span class="hljs-built_in">WriteLine</span>(<span class="hljs-string">"C"</span>);
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â turn = <span class="hljs-number">0</span>; <span class="hljs-comment">// åˆ‡æ¢åˆ° A å›åˆï¼Œå½¢æˆé—­ç¯</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Monitor.<span class="hljs-built_in">PulseAll</span>(lockObj); <span class="hljs-comment">// å”¤é†’æ‰€æœ‰ç­‰å¾…çš„çº¿ç¨‹</span>
 Â  Â  Â  Â  Â  Â  Â   }
 Â  Â  Â  Â  Â   }
 Â  Â  Â   });
 Â   }
}
</code></pre>
<p><strong>å·¥ä½œåŸç†</strong>ï¼š</p>
<ul>
<li>ä½¿ç”¨ä¸€ä¸ªå…±äº«çš„ <code>lockObj</code> ä½œä¸ºåŒæ­¥å¯¹è±¡</li>
<li>ä½¿ç”¨ä¸€ä¸ªæ•´æ•°å˜é‡ <code>turn</code> æ¥è·Ÿè¸ªå½“å‰åº”è¯¥æ‰§è¡Œçš„çº¿ç¨‹ï¼ˆ0=A, 1=B, 2=Cï¼‰</li>
<li>æ¯ä¸ªçº¿ç¨‹åœ¨æ‰§è¡Œå‰æ£€æŸ¥æ˜¯å¦æ˜¯è‡ªå·±çš„å›åˆï¼Œå¦‚æœä¸æ˜¯åˆ™ç­‰å¾…</li>
<li>æ‰§è¡Œå®Œæˆåï¼Œåˆ‡æ¢å›åˆçŠ¶æ€å¹¶å”¤é†’æ‰€æœ‰ç­‰å¾…çš„çº¿ç¨‹</li>
</ul>
<p><strong>ä¼˜ç¼ºç‚¹</strong>ï¼š</p>
<ul>
<li>âœ… ä¸éœ€è¦é¢å¤–çš„åŒæ­¥åŸè¯­ï¼Œåªä½¿ç”¨ .NET å†…ç½®çš„ Monitor æœºåˆ¶</li>
<li>âŒ æ”¹é€ å¤æ‚ï¼Œä»£ç å†—é•¿</li>
<li>âŒ ä¸æ”¯æŒå¼‚æ­¥ç¼–ç¨‹ï¼Œä¼šé˜»å¡çº¿ç¨‹</li>
<li>âŒ éœ€è¦ä½¿ç”¨ <code>PulseAll()</code> å”¤é†’æ‰€æœ‰çº¿ç¨‹ï¼Œæ€§èƒ½è¾ƒå·®</li>
<li>âŒ ä¸‰ä¸ªçº¿ç¨‹ç«äº‰é”ï¼Œå®¹æ˜“å¯¼è‡´ä¸å¿…è¦çš„å”¤é†’</li>
<li>âŒ ä»£ç å¤æ‚åº¦æŒ‡æ•°å¢é•¿ï¼Œéš¾ä»¥ç»´æŠ¤</li>
</ul>
<h4 data-id="heading-8">6. æ··åˆæ–¹æ¡ˆï¼šæµæ°´çº¿ Channel å®ç°</h4>
<p><strong>æ”¹é€ éš¾åº¦ï¼šâ­â­ å®¹æ˜“</strong></p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">internal</span> <span class="hljs-keyword">class</span> <span class="hljs-title">ABC_PipelineChannelTestCode</span>
{
 Â  Â <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">async</span> Task <span class="hljs-title">PrintAsync</span>()</span>
 Â   {
 Â  Â  Â  Â <span class="hljs-comment">// åˆ›å»ºä¸¤ä¸ªé€šé“ï¼Œå½¢æˆ A â†’ B â†’ C çš„æµæ°´çº¿</span>
 Â  Â  Â  Â <span class="hljs-keyword">var</span> abChannel = Channel.CreateUnbounded&lt;<span class="hljs-built_in">string</span>&gt;();
 Â  Â  Â  Â <span class="hljs-keyword">var</span> bcChannel = Channel.CreateUnbounded&lt;<span class="hljs-built_in">string</span>&gt;();
â€‹
 Â  Â  Â  Â <span class="hljs-comment">// çº¿ç¨‹ A - ç”Ÿäº§æ•°æ®</span>
 Â  Â  Â  Â <span class="hljs-keyword">var</span> taskA = Task.Run(<span class="hljs-keyword">async</span> () =&gt;
 Â  Â  Â   {
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; i++)
 Â  Â  Â  Â  Â   {
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-built_in">string</span> data = <span class="hljs-string">$"A-<span class="hljs-subst">{i}</span>"</span>;
 Â  Â  Â  Â  Â  Â  Â  Â Console.WriteLine(<span class="hljs-string">$"A: <span class="hljs-subst">{data}</span>"</span>);
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">await</span> abChannel.Writer.WriteAsync(data); <span class="hljs-comment">// ä¼ é€’ç»™ B</span>
 Â  Â  Â  Â  Â   }
 Â  Â  Â  Â  Â  Â abChannel.Writer.Complete(); <span class="hljs-comment">// å®Œæˆå†™å…¥</span>
 Â  Â  Â   });
â€‹
 Â  Â  Â  Â <span class="hljs-comment">// çº¿ç¨‹ B - å¤„ç†æ•°æ®</span>
 Â  Â  Â  Â <span class="hljs-keyword">var</span> taskB = Task.Run(<span class="hljs-keyword">async</span> () =&gt;
 Â  Â  Â   {
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">await</span> <span class="hljs-keyword">foreach</span> (<span class="hljs-keyword">var</span> data <span class="hljs-keyword">in</span> abChannel.Reader.ReadAllAsync())
 Â  Â  Â  Â  Â   {
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-built_in">string</span> processedData = <span class="hljs-string">$"B-<span class="hljs-subst">{data}</span>"</span>;
 Â  Â  Â  Â  Â  Â  Â  Â Console.WriteLine(<span class="hljs-string">$"B: <span class="hljs-subst">{processedData}</span>"</span>);
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">await</span> bcChannel.Writer.WriteAsync(processedData); <span class="hljs-comment">// ä¼ é€’ç»™ C</span>
 Â  Â  Â  Â  Â   }
 Â  Â  Â  Â  Â  Â bcChannel.Writer.Complete(); <span class="hljs-comment">// å®Œæˆå†™å…¥</span>
 Â  Â  Â   });
â€‹
 Â  Â  Â  Â <span class="hljs-comment">// çº¿ç¨‹ C - æ¶ˆè´¹æ•°æ®</span>
 Â  Â  Â  Â <span class="hljs-keyword">var</span> taskC = Task.Run(<span class="hljs-keyword">async</span> () =&gt;
 Â  Â  Â   {
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">await</span> <span class="hljs-keyword">foreach</span> (<span class="hljs-keyword">var</span> data <span class="hljs-keyword">in</span> bcChannel.Reader.ReadAllAsync())
 Â  Â  Â  Â  Â   {
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-built_in">string</span> finalData = <span class="hljs-string">$"C-<span class="hljs-subst">{data}</span>"</span>;
 Â  Â  Â  Â  Â  Â  Â  Â Console.WriteLine(<span class="hljs-string">$"C: <span class="hljs-subst">{finalData}</span>"</span>);
 Â  Â  Â  Â  Â   }
 Â  Â  Â   });
â€‹
 Â  Â  Â  Â <span class="hljs-keyword">await</span> Task.WhenAll(taskA, taskB, taskC);
 Â   }
}
</code></pre>
<p><strong>å·¥ä½œåŸç†</strong>ï¼š</p>
<ul>
<li>ä½¿ç”¨ä¸¤ä¸ª <code>Channel</code> å¯¹è±¡åˆ›å»ºæµæ°´çº¿</li>
<li>çº¿ç¨‹ A ç”Ÿäº§æ•°æ®å¹¶å†™å…¥ç¬¬ä¸€ä¸ªé€šé“</li>
<li>çº¿ç¨‹ B ä»ç¬¬ä¸€ä¸ªé€šé“è¯»å–æ•°æ®ï¼Œå¤„ç†åå†™å…¥ç¬¬äºŒä¸ªé€šé“</li>
<li>çº¿ç¨‹ C ä»ç¬¬äºŒä¸ªé€šé“è¯»å–æ•°æ®å¹¶æ¶ˆè´¹</li>
</ul>
<p><strong>ä¼˜ç¼ºç‚¹</strong>ï¼š</p>
<ul>
<li>âœ… éå¸¸é€‚åˆéœ€è¦ä¼ é€’æ•°æ®çš„åœºæ™¯</li>
<li>âœ… ç°ä»£å¼‚æ­¥ç¼–ç¨‹æ¨¡å‹ï¼Œè®¾è®¡ä¼˜é›…</li>
<li>âœ… é«˜æ€§èƒ½ï¼Œé€‚åˆé«˜å¹¶å‘åœºæ™¯</li>
<li>âœ… ä»£ç é€»è¾‘æ¸…æ™°ï¼Œæ˜“äºç†è§£</li>
<li>âŒ å¯¹äºçº¯ä¿¡å·æ§åˆ¶åœºæ™¯ï¼Œå¯èƒ½æ˜¾å¾—è¿‡äºå¤æ‚</li>
<li>âŒ éœ€è¦ .NET Core 3.0+ æˆ– .NET 5+ æ”¯æŒ</li>
</ul>
<h3 data-id="heading-9">å®ç°æ–¹å¼å¯¹æ¯”</h3>















































<table><thead><tr><th>å®ç°æ–¹å¼</th><th>æ”¹é€ éš¾åº¦</th><th>ABC é€‚åˆåº¦</th><th>æ¨èåœºæ™¯</th></tr></thead><tbody><tr><td>AutoResetEvent</td><td>â­â­</td><td>â­â­â­</td><td>ä¼ ç»ŸåŒæ­¥ï¼Œæ—  async/await</td></tr><tr><td>SemaphoreSlim</td><td>â­â­</td><td>â­â­â­â­â­</td><td>ç°ä»£å¼‚æ­¥ï¼Œé¦–é€‰</td></tr><tr><td>TaskCompletionSource</td><td>â­â­â­</td><td>â­â­</td><td>éœ€ä¼ é€’å¤æ‚æ•°æ®</td></tr><tr><td>Channel</td><td>â­â­</td><td>â­â­â­</td><td>é«˜å¹¶å‘+æ•°æ®ä¼ é€’</td></tr><tr><td>Monitor/lock</td><td>â­â­â­â­</td><td>â­</td><td>ç®€å•åœºæ™¯ï¼Œé¿å…å¤šä¿¡å·</td></tr><tr><td>æµæ°´çº¿ Channel</td><td>â­â­</td><td>â­â­â­â­â­</td><td>æ•°æ®æµè½¬ï¼ˆAâ†’Bâ†’Cï¼‰</td></tr></tbody></table>
<h3 data-id="heading-10">é€šç”¨æ¨¡å¼ï¼šæ‰©å±•åˆ° N ä¸ªçº¿ç¨‹</h3>
<p>ä½¿ç”¨ <code>SemaphoreSlim</code> å¯ä»¥å¾ˆå®¹æ˜“åœ°æ‰©å±•åˆ° N ä¸ªçº¿ç¨‹çš„äº¤æ›¿æ‰§è¡Œã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªé€šç”¨çš„å®ç°æ¨¡å¼ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">internal class NThreadsSemaphoreSlimTestCode
{
 Â  Â private List&lt;SemaphoreSlim&gt; semaphores<span class="hljs-comment">;</span>
 Â  Â private int threadCount<span class="hljs-comment">;</span>
â€‹
 Â  Â public NThreadsSemaphoreSlimTestCode(int count)
 Â   {
 Â  Â  Â  Â <span class="hljs-attr">threadCount</span> = count<span class="hljs-comment">;</span>
 Â  Â  Â  Â <span class="hljs-attr">semaphores</span> = new List&lt;SemaphoreSlim&gt;()<span class="hljs-comment">;</span>
 Â  Â  Â  Â 
 Â  Â  Â  Â // åˆå§‹åŒ–ä¿¡å·é‡ï¼Œç¬¬ä¸€ä¸ªåˆå§‹å¯ç”¨ï¼Œå…¶ä½™åˆå§‹ä¸å¯ç”¨
 Â  Â  Â  Â for (int <span class="hljs-attr">i</span> = <span class="hljs-number">0</span><span class="hljs-comment">; i &lt; count; i++)</span>
 Â  Â  Â   {
 Â  Â  Â  Â  Â  Â semaphores.Add(new SemaphoreSlim(<span class="hljs-attr">i</span> == <span class="hljs-number">0</span> ? <span class="hljs-number">1</span> : <span class="hljs-number">0</span>, <span class="hljs-number">1</span>))<span class="hljs-comment">;</span>
 Â  Â  Â   }
 Â   }
â€‹
 Â  Â public void Print()
 Â   {
 Â  Â  Â  Â for (int <span class="hljs-attr">i</span> = <span class="hljs-number">0</span><span class="hljs-comment">; i &lt; threadCount; i++)</span>
 Â  Â  Â   {
 Â  Â  Â  Â  Â  Â int <span class="hljs-attr">threadIndex</span> = i<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â char <span class="hljs-attr">threadChar</span> = (char)(<span class="hljs-string">'A'</span> + threadIndex)<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â 
 Â  Â  Â  Â  Â  Â Task.Run(async () =&gt;
 Â  Â  Â  Â  Â   {
 Â  Â  Â  Â  Â  Â  Â  Â for (int <span class="hljs-attr">j</span> = <span class="hljs-number">0</span><span class="hljs-comment">; j &lt; 100; j++)</span>
 Â  Â  Â  Â  Â  Â  Â   {
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â // ç­‰å¾…è‡ªå·±çš„ä¿¡å·
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â await semaphores<span class="hljs-section">[threadIndex]</span>.WaitAsync()<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Console.WriteLine(threadChar)<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â 
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â // é‡Šæ”¾ä¸‹ä¸€ä¸ªçº¿ç¨‹çš„ä¿¡å·ï¼Œæœ€åä¸€ä¸ªçº¿ç¨‹é‡Šæ”¾ç¬¬ä¸€ä¸ªçº¿ç¨‹çš„ä¿¡å·
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â int <span class="hljs-attr">nextIndex</span> = (threadIndex + <span class="hljs-number">1</span>) % threadCount<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â semaphores<span class="hljs-section">[nextIndex]</span>.Release()<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â  Â   }
 Â  Â  Â  Â  Â   })<span class="hljs-comment">;</span>
 Â  Â  Â   }
 Â   }
}
â€‹
// ä½¿ç”¨ç¤ºä¾‹ï¼š
// var <span class="hljs-attr">nThreadsTest</span> = new NThreadsSemaphoreSlimTestCode(<span class="hljs-number">5</span>)<span class="hljs-comment">; // 5ä¸ªçº¿ç¨‹ï¼Œäº¤æ›¿æ‰“å° ABCDE</span>
// nThreadsTest.Print()<span class="hljs-comment">;</span>
</code></pre>
<h3 data-id="heading-11">ç»“è®º</h3>
<p>ä»ä¸¤ç§çº¿ç¨‹æ‰©å±•åˆ°ä¸‰ç§çº¿ç¨‹ï¼ˆABCï¼‰çš„äº¤æ›¿æ‰§è¡Œï¼Œä¸åŒå®ç°æ–¹å¼çš„è¡¨ç°å·®å¼‚æ›´åŠ æ˜æ˜¾ï¼š</p>
<ol start="0">
<li><strong>SemaphoreSlim</strong> ä»ç„¶æ˜¯æœ€ä½³é€‰æ‹©ï¼Œä»£ç ç®€æ´ã€æ”¯æŒå¼‚æ­¥ã€æ€§èƒ½è‰¯å¥½ï¼Œå°¤å…¶æ˜¯åœ¨å¤šçº¿ç¨‹åœºæ™¯ä¸‹ä¼˜åŠ¿æ›´åŠ çªå‡ºã€‚</li>
<li><strong>AutoResetEvent</strong> ä¹Ÿæ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©ï¼Œæ”¹é€ ç®€å•ï¼Œé€‚åˆä¼ ç»ŸåŒæ­¥åœºæ™¯ã€‚</li>
<li><strong>Channel</strong> åœ¨éœ€è¦ä¼ é€’æ•°æ®çš„åœºæ™¯ä¸‹è¡¨ç°ä¼˜å¼‚ï¼Œå°¤å…¶æ˜¯æµæ°´çº¿æ¨¡å¼éå¸¸é€‚åˆæ•°æ®å¤„ç†æµç¨‹ã€‚</li>
<li><strong>TaskCompletionSource</strong> è™½ç„¶å¯ä»¥å®ç°ï¼Œä½†åœ¨å¤šçº¿ç¨‹åœºæ™¯ä¸‹ä»£ç è†¨èƒ€ä¸¥é‡ï¼Œå†…å­˜å¼€é”€è¾ƒå¤§ã€‚</li>
<li><strong>Monitor/lock</strong> åœ¨å¤šçº¿ç¨‹åœºæ™¯ä¸‹è¡¨ç°æœ€å·®ï¼Œä»£ç å¤æ‚ï¼Œæ€§èƒ½è¾ƒå·®ï¼Œä¸æ¨èä½¿ç”¨ã€‚</li>
</ol>
<p>é€‰æ‹©å“ªç§å®ç°æ–¹å¼ï¼Œå–å†³äºå…·ä½“çš„åœºæ™¯éœ€æ±‚ï¼š</p>
<ul>
<li><strong>çº¯ä¿¡å·æ§åˆ¶</strong>ï¼ˆABCABCï¼‰ï¼šé¦–é€‰ <code>SemaphoreSlim</code>ï¼Œä»£ç æœ€ç®€æ´ï¼Œæ€§èƒ½æœ€å¥½ã€‚</li>
<li><strong>éœ€è¦ä¼ é€’æ•°æ®</strong>ï¼šé¦–é€‰ <code>Channel</code> æµæ°´çº¿æ¨¡å¼ï¼Œå°¤å…¶æ˜¯åœ¨ Aâ†’Bâ†’C éœ€è¦å¤„ç†æ•°æ®çš„åœºæ™¯ã€‚</li>
<li><strong>ä¼ ç»ŸåŒæ­¥åœºæ™¯</strong>ï¼šé€‰æ‹© <code>AutoResetEvent</code>ï¼Œå…¼å®¹æ€§å¥½ï¼Œæ˜“äºç†è§£ã€‚</li>
<li><strong>ç‰¹æ®Šéœ€æ±‚</strong>ï¼šæ ¹æ®å…·ä½“æƒ…å†µé€‰æ‹©å…¶ä»–å®ç°æ–¹å¼ã€‚</li>
</ul>
<p>é€šè¿‡æœ¬æ–‡çš„æ‰©å±•ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä»¤ç‰Œç¯å¼åŒæ­¥æ¨¡å¼çš„çµæ´»æ€§å’Œå¤šæ ·æ€§ï¼Œä»¥åŠä¸åŒåŒæ­¥åŸè¯­åœ¨ä¸åŒåœºæ™¯ä¸‹çš„é€‚ç”¨æƒ…å†µã€‚äº†è§£è¿™äº›å®ç°æ–¹å¼ï¼Œæœ‰åŠ©äºæˆ‘ä»¬åœ¨å®é™…é¡¹ç›®ä¸­é€‰æ‹©åˆé€‚çš„åŒæ­¥æœºåˆ¶ï¼Œç¼–å†™é«˜æ•ˆã€å¯é çš„å¹¶å‘ä»£ç ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vite + Rollup æ‰“åŒ…åˆ†åŒ…é™·é˜±ï¼šä¾èµ–ç‰ˆæœ¬å†²çªä¸çŠ¶æ€éš”ç¦»é—®é¢˜]]></title>    <link>https://juejin.cn/post/7605769126272352302</link>    <guid>https://juejin.cn/post/7605769126272352302</guid>    <pubDate>2026-02-13T04:34:16.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605769126272352302" data-draft-id="7605856048361373734" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vite + Rollup æ‰“åŒ…åˆ†åŒ…é™·é˜±ï¼šä¾èµ–ç‰ˆæœ¬å†²çªä¸çŠ¶æ€éš”ç¦»é—®é¢˜"/> <meta itemprop="keywords" content="å‰ç«¯æ¡†æ¶"/> <meta itemprop="datePublished" content="2026-02-13T04:34:16.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æˆ·9823610790277"/> <meta itemprop="url" content="https://juejin.cn/user/545774580012813"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vite + Rollup æ‰“åŒ…åˆ†åŒ…é™·é˜±ï¼šä¾èµ–ç‰ˆæœ¬å†²çªä¸çŠ¶æ€éš”ç¦»é—®é¢˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/545774580012813/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æˆ·9823610790277
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-13T04:34:16.000Z" title="Fri Feb 13 2026 04:34:16 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">é—®é¢˜èƒŒæ™¯</h2>
<p>åœ¨ä½¿ç”¨ Vite + Rollup æ„å»ºçš„ Vue 3 é¡¹ç›®ä¸­ï¼Œå¼•å…¥ç¬¬ä¸‰æ–¹ç»„ä»¶åº“ <code>ai-agent</code> åï¼Œå‘ç°å¼€å‘ç¯å¢ƒæ­£å¸¸è¿è¡Œï¼Œä½†ç”Ÿäº§ç¯å¢ƒæ‰“åŒ…ä¸Šçº¿åå‡ºç°å…¼å®¹æ€§é—®é¢˜ã€‚</p>
<h2 data-id="heading-1">é—®é¢˜ç°è±¡</h2>
<ul>
<li><strong>å¼€å‘ç¯å¢ƒ</strong>ï¼šä¸€åˆ‡æ­£å¸¸ï¼Œæ— ä»»ä½•é”™è¯¯</li>
<li><strong>ç”Ÿäº§ç¯å¢ƒ</strong>ï¼šæ‰“åŒ…åè¿è¡Œæ—¶å‡ºç°å…¼å®¹æ€§é—®é¢˜ï¼ŒåŠŸèƒ½å¼‚å¸¸</li>
<li><strong>ä¸´æ—¶è§£å†³æ–¹æ¡ˆ</strong>ï¼šæ³¨é‡Šæ‰ [vite.config.ts] ä¸­ manualChunks å¯¹ <code>@vueuse/core</code> å’Œ [naive-ui] çš„å•ç‹¬åˆ†åŒ…é…ç½®</li>
</ul>
<h2 data-id="heading-2">æ ¹æœ¬åŸå› åˆ†æ</h2>
<h3 data-id="heading-3">1. å¼€å‘ç¯å¢ƒ vs ç”Ÿäº§ç¯å¢ƒå·®å¼‚</h3>























<table><thead><tr><th>ç¯å¢ƒ</th><th>æ¨¡å—åŠ è½½æ–¹å¼</th><th>manualChunks ç”Ÿæ•ˆ</th><th>ä¾èµ–è§£æ</th></tr></thead><tbody><tr><td>å¼€å‘ç¯å¢ƒ</td><td>åŸç”Ÿ ES Modules</td><td>âŒ ä¸ç”Ÿæ•ˆ</td><td>åŠ¨æ€è§£æï¼ŒNode.js æ¨¡å—æœºåˆ¶</td></tr><tr><td>ç”Ÿäº§ç¯å¢ƒ</td><td>Rollup æ‰“åŒ…</td><td>âœ… ç”Ÿæ•ˆ</td><td>é™æ€åˆ†æï¼ŒæŒ‰é…ç½®åˆ†åŒ…</td></tr></tbody></table>
<h3 data-id="heading-4">2. ä¾èµ–çŠ¶æ€éš”ç¦»é—®é¢˜</h3>
<p><strong>æ ¸å¿ƒé—®é¢˜</strong>ï¼šå…·æœ‰å†…éƒ¨çŠ¶æ€çš„åº“è¢«åˆ†åˆ°ä¸åŒ chunk åï¼Œé€ æˆçŠ¶æ€ä¸å…±äº«ã€‚</p>
<p>ä»¥ <code>@vueuse/core</code> ä¸ºä¾‹ï¼š</p>
<ul>
<li>åŒ…å«å…¨å±€çŠ¶æ€ï¼ˆglobalStateï¼‰ã€ç¼“å­˜ã€äº‹ä»¶ç›‘å¬å™¨ç­‰</li>
<li>å½“è¢«åˆ†åˆ°ä¸åŒ chunk æ—¶ï¼Œæ¯ä¸ª chunk éƒ½æœ‰ç‹¬ç«‹çš„çŠ¶æ€å®ä¾‹</li>
<li>å¯¼è‡´è¿è¡Œæ—¶è¡Œä¸ºä¸ä¸€è‡´ï¼Œç”šè‡³åŠŸèƒ½å¤±æ•ˆ</li>
</ul>
<h3 data-id="heading-5">3. ç‰ˆæœ¬å…¼å®¹æ€§é£é™©</h3>
<p>è™½ç„¶ <code>ai-agent</code> å’Œä¸»é¡¹ç›®å¯èƒ½ä½¿ç”¨å…¼å®¹çš„ä¾èµ–ç‰ˆæœ¬ï¼Œä½† manualChunks å¼ºåˆ¶åˆ†ç¦»ä¼šï¼š</p>
<ul>
<li>ç ´å Rollup çš„è‡ªåŠ¨å»é‡æœºåˆ¶</li>
<li>å³ä½¿æ˜¯åŒä¸€ç‰ˆæœ¬ï¼Œä¹Ÿè¢«å¤åˆ¶åˆ°ä¸åŒ bundle</li>
<li>å¢åŠ  bundle ä½“ç§¯ï¼Œé™ä½è¿è¡Œæ•ˆç‡</li>
</ul>
<h2 data-id="heading-6">æŠ€æœ¯ç»†èŠ‚å‰–æ</h2>
<h3 data-id="heading-7">æ­£å¸¸æƒ…å†µï¼ˆæ—  manualChunksï¼‰</h3>
<pre><code class="hljs language-bash" lang="bash">vendor.js
â”œâ”€â”€ @vueuse/core (å•ä¾‹)
â”œâ”€â”€ naive-ui (å•ä¾‹)  
â”œâ”€â”€ ai-agent
â””â”€â”€ å…¶ä»–ä¾èµ–
</code></pre>
<p>âœ… æ‰€æœ‰æ¨¡å—å…±äº«åŒä¸€ä»½ä¾èµ–å®ä¾‹</p>
<h3 data-id="heading-8">é—®é¢˜æƒ…å†µï¼ˆæœ‰ manualChunksï¼‰</h3>
<pre><code class="hljs language-bash" lang="bash">vueuse.js
â””â”€â”€ @vueuse/core (å®ä¾‹A)

naive-ui.js  
â””â”€â”€ naive-ui (å®ä¾‹A)

vendor.js
â”œâ”€â”€ @vueuse/core (å®ä¾‹B) â† ai-agent å†…éƒ¨ä½¿ç”¨
â”œâ”€â”€ naive-ui (å®ä¾‹B) â† ai-agent å†…éƒ¨ä½¿ç”¨
â””â”€â”€ ai-agent
</code></pre>
<p>âŒ çŠ¶æ€éš”ç¦»ï¼Œæ½œåœ¨å†²çª</p>
<h2 data-id="heading-9">è§£å†³æ–¹æ¡ˆ</h2>
<h3 data-id="heading-10">æ–¹æ¡ˆä¸€ï¼šä¿å®ˆç­–ç•¥ï¼ˆæ¨èï¼‰</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// vite.config.ts</span>
<span class="hljs-title function_">manualChunks</span>(<span class="hljs-params">id</span>) {
  <span class="hljs-keyword">if</span> (id.<span class="hljs-title function_">includes</span>(<span class="hljs-string">"node_modules"</span>)) {
    <span class="hljs-comment">// é¿å…å¯¹å¯èƒ½å¼•èµ·çŠ¶æ€å†²çªçš„åº“è¿›è¡Œå•ç‹¬åˆ†åŒ…</span>
    <span class="hljs-comment">// è®©å®ƒä»¬ç»Ÿä¸€æ‰“åŒ…åˆ° vendor chunk ä¸­</span>
    
    <span class="hljs-keyword">if</span> (id.<span class="hljs-title function_">includes</span>(<span class="hljs-string">"await-to-js"</span>)) {
      <span class="hljs-keyword">return</span> <span class="hljs-string">"awaitToJs"</span>;
    }
    <span class="hljs-keyword">if</span> (id.<span class="hljs-title function_">includes</span>(<span class="hljs-string">"axios"</span>)) {
      <span class="hljs-keyword">return</span> <span class="hljs-string">"axios"</span>;
    }
    <span class="hljs-comment">// ... å…¶ä»–æ— çŠ¶æ€çš„å·¥å…·åº“</span>
    
    <span class="hljs-comment">// ä¸å•ç‹¬åˆ†åŒ… @vueuse/coreã€naive-ui ç­‰æœ‰çŠ¶æ€åº“</span>
    <span class="hljs-keyword">return</span> <span class="hljs-string">"vendor"</span>;
  }
}
</code></pre>
<h3 data-id="heading-11">æ–¹æ¡ˆäºŒï¼šç²¾ç¡®æ§åˆ¶ç­–ç•¥</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å¦‚æœç¡®å®éœ€è¦åˆ†åŒ…ï¼Œç¡®ä¿ç‰ˆæœ¬å®Œå…¨ä¸€è‡´</span>
<span class="hljs-keyword">const</span> sharedDeps = [
  <span class="hljs-string">'@vueuse/core'</span>,
  <span class="hljs-string">'naive-ui'</span>, 
  <span class="hljs-string">'vue'</span>
];

<span class="hljs-title function_">manualChunks</span>(<span class="hljs-params">id</span>) {
  <span class="hljs-keyword">if</span> (id.<span class="hljs-title function_">includes</span>(<span class="hljs-string">"node_modules"</span>)) {
    <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦ä¸ºå…±äº«ä¾èµ–</span>
    <span class="hljs-keyword">const</span> sharedDep = sharedDeps.<span class="hljs-title function_">find</span>(<span class="hljs-function"><span class="hljs-params">dep</span> =&gt;</span> id.<span class="hljs-title function_">includes</span>(dep));
    <span class="hljs-keyword">if</span> (sharedDep) {
      <span class="hljs-keyword">return</span> <span class="hljs-string">'shared'</span>; <span class="hljs-comment">// ç»Ÿä¸€æ”¾åˆ° shared chunk</span>
    }
    
    <span class="hljs-comment">// å…¶ä»–ä¾èµ–æ­£å¸¸åˆ†åŒ…</span>
    <span class="hljs-keyword">if</span> (id.<span class="hljs-title function_">includes</span>(<span class="hljs-string">"lodash-es"</span>)) {
      <span class="hljs-keyword">return</span> <span class="hljs-string">"lodash"</span>;
    }
    <span class="hljs-keyword">return</span> <span class="hljs-string">"vendor"</span>;
  }
}
</code></pre>
<h2 data-id="heading-12">æœ€ä½³å®è·µå»ºè®®</h2>
<h3 data-id="heading-13">1. åˆ†åŒ…åŸåˆ™</h3>
<ul>
<li><strong>å¯ä»¥åˆ†åŒ…</strong>ï¼šçº¯å‡½æ•°åº“ï¼ˆlodash-esã€date-fnsï¼‰ã€æ— çŠ¶æ€å·¥å…·åº“</li>
<li><strong>é¿å…åˆ†åŒ…</strong>ï¼šUI ç»„ä»¶åº“ã€çŠ¶æ€ç®¡ç†åº“ã€åŒ…å«å…¨å±€é…ç½®çš„åº“</li>
</ul>
<h3 data-id="heading-14">2. ä¾èµ–ç®¡ç†</h3>
<ul>
<li>ä¿æŒé¡¹ç›®ä¾èµ–ä¸ç¬¬ä¸‰æ–¹åº“ä¾èµ–çš„ç‰ˆæœ¬å…¼å®¹æ€§</li>
<li>ä½¿ç”¨ <code>npm ls &lt;package&gt;</code> æ£€æŸ¥ä¾èµ–æ ‘</li>
<li>å®šæœŸæ›´æ–°ä¾èµ–ï¼Œå‡å°‘ç‰ˆæœ¬ç¢ç‰‡åŒ–</li>
</ul>
<h3 data-id="heading-15">3. è°ƒè¯•æŠ€å·§</h3>
<ul>
<li>ä½¿ç”¨ <a title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target=">rollup-plugin-visualizer</a> åˆ†ææ‰“åŒ…ç»“æœ</li>
<li>åœ¨æµè§ˆå™¨ä¸­æ£€æŸ¥æ¨¡å—çš„å†…å­˜åœ°å€æ˜¯å¦ä¸€è‡´</li>
<li>å¯¹æ¯”å¼€å‘ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒçš„ç½‘ç»œè¯·æ±‚å’Œ bundle å†…å®¹</li>
</ul>
<h3 data-id="heading-16">4. é¢„é˜²æªæ–½</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åœ¨ vite.config.ts ä¸­æ·»åŠ æ³¨é‡Šè¯´æ˜</span>
<span class="hljs-comment">// æ³¨æ„ï¼šç”±äºç¬¬ä¸‰æ–¹åº“å¯èƒ½ä¾èµ–ç›¸åŒçš„åŸºç¡€åº“ï¼Œ</span>
<span class="hljs-comment">// ä¸ºé¿å…çŠ¶æ€éš”ç¦»é—®é¢˜ï¼Œæš‚ä¸å•ç‹¬åˆ†åŒ…ä»¥ä¸‹ä¾èµ–ï¼š</span>
<span class="hljs-comment">// - @vueuse/core (åŒ…å«å…¨å±€çŠ¶æ€)</span>
<span class="hljs-comment">// - naive-ui (UI ç»„ä»¶åº“ï¼ŒåŒ…å«ä¸»é¢˜é…ç½®)</span>
</code></pre>
<p>è¿™ä¸ªé—®é¢˜å®Œç¾å±•ç¤ºäº†ç°ä»£å‰ç«¯å¼€å‘ä¸­ï¼Œçœ‹ä¼¼ç®€å•çš„é…ç½®å¯èƒ½å¸¦æ¥çš„å¤æ‚è¿è¡Œæ—¶é—®é¢˜ï¼Œä¹Ÿä½“ç°äº†æ·±å…¥ç†è§£å·¥å…·é“¾çš„é‡è¦æ€§ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è®¾è®¡æ¨¡å¼çš„æœ¬è´¨ï¼šéš”ç¦»å˜åŒ–]]></title>    <link>https://juejin.cn/post/7605817795629269042</link>    <guid>https://juejin.cn/post/7605817795629269042</guid>    <pubDate>2026-02-13T05:37:18.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605817795629269042" data-draft-id="7605817795628187698" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è®¾è®¡æ¨¡å¼çš„æœ¬è´¨ï¼šéš”ç¦»å˜åŒ–"/> <meta itemprop="keywords" content="è®¾è®¡æ¨¡å¼,åç«¯"/> <meta itemprop="datePublished" content="2026-02-13T05:37:18.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="LukeLi"/> <meta itemprop="url" content="https://juejin.cn/user/430664725579725"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è®¾è®¡æ¨¡å¼çš„æœ¬è´¨ï¼šéš”ç¦»å˜åŒ–
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/430664725579725/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    LukeLi
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-13T05:37:18.000Z" title="Fri Feb 13 2026 05:37:18 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»17åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Â è®¾è®¡æ¨¡å¼çš„æœ¬è´¨ï¼šéš”ç¦»å˜åŒ–</h2>
<h3 data-id="heading-1">ä¸€ã€ä¸ºä»€ä¹ˆè¦å­¦è®¾è®¡æ¨¡å¼ï¼Ÿ</h3>
<h4 data-id="heading-2">â“Â ç—›ç‚¹ï¼šæ²¡æœ‰è®¾è®¡æ¨¡å¼çš„ä»£ç æœ‰å¤šç—›è‹¦ï¼Ÿ</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// åœ°ç‹±çº§ if-elseï¼ˆæ¯æ¬¡åŠ æ–°åŠŸèƒ½éƒ½è¦æ”¹æ ¸å¿ƒï¼‰</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">processOrder</span><span class="hljs-params">(Order order)</span> {
    <span class="hljs-keyword">if</span> (<span class="hljs-string">"NORMAL"</span>.equals(order.getType())) {
        <span class="hljs-comment">// æ­£å¸¸è®¢å•é€»è¾‘ï¼ˆ50è¡Œï¼‰</span>
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-string">"VIP.equals(order.getType())) {
        // VIP è®¢å•é€»è¾‘ï¼ˆ60è¡Œï¼‰
    } else if ("</span>GROUP_BUY<span class="hljs-string">".equals(order.getType())) {
        // æ‹¼å›¢é€»è¾‘ï¼ˆ70è¡Œï¼‰
    }
    // è€æ¿è¯´è¦åŠ â€œé¢„å”®â€ï¼Ÿå†åŠ ä¸€ä¸ª else if...
}
</span></code></pre>
<p>åæœï¼š</p>
<ul>
<li>
<p>ğŸ”¥Â æ”¹ä¸€å¤„ï¼Œå´©ä¸‰å¤„ï¼ˆæµ‹è¯•è¦†ç›–éš¾ï¼‰</p>
</li>
<li>
<p>ğŸ§©Â æ— æ³•å¤ç”¨ï¼ˆé€»è¾‘æ•£è½åœ¨å„å¤„ï¼‰</p>
</li>
<li>
<p>ğŸ‘¥Â æ–°äººçœ‹ä¸æ‡‚ï¼ˆåä½œæˆæœ¬é«˜ï¼‰</p>
</li>
</ul>
<h4 data-id="heading-3">âœ…Â ä¼˜åŒ–åä»£ç ï¼ˆç­–ç•¥æ¨¡å¼ï¼‰</h4>
<h5 data-id="heading-4">ç¬¬1æ­¥ï¼šå®šä¹‰ä¸€ä¸ªæ¥å£</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">OrderHandler</span> {
    <span class="hljs-type">boolean</span> <span class="hljs-title function_">supports</span><span class="hljs-params">(String type)</span>;
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">handle</span><span class="hljs-params">(Order order)</span>;
}
</code></pre>
<h5 data-id="heading-5">ç¬¬2æ­¥ï¼šæ¯ç§è®¢å•å†™ä¸€ä¸ªç±»</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æ™®é€šè®¢å•</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">NormalOrderHandler</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">OrderHandler</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">supports</span><span class="hljs-params">(String type)</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-string">"NORMAL"</span>.equals(type);
    }
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handle</span><span class="hljs-params">(Order order)</span> {
        System.out.println(<span class="hljs-string">"å¤„ç†æ™®é€šè®¢å•"</span>);
    }
}

<span class="hljs-comment">// VIP è®¢å•</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">VipOrderHandler</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">OrderHandler</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">supports</span><span class="hljs-params">(String type)</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-string">"VIP"</span>.equals(type);
    }
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handle</span><span class="hljs-params">(Order order)</span> {
        System.out.println(<span class="hljs-string">"å¤„ç†VIPè®¢å•"</span>);
    }
}

<span class="hljs-comment">// æ‹¼å›¢è®¢å•</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">GroupBuyHandler</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">OrderHandler</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">supports</span><span class="hljs-params">(String type)</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-string">"GROUP_BUY"</span>.equals(type);
    }
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handle</span><span class="hljs-params">(Order order)</span> {
        System.out.println(<span class="hljs-string">"å¤„ç†æ‹¼å›¢è®¢å•"</span>);
    }
}
</code></pre>
<h5 data-id="heading-6">ç¬¬3æ­¥ï¼šä¸»æ–¹æ³•æ”¹æˆè¿™æ ·</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æŠŠæ‰€æœ‰å¤„ç†å™¨æ”¾åˆ°ä¸€ä¸ªåˆ—è¡¨é‡Œï¼ˆå®é™…é¡¹ç›®ä¸­å¯ç”¨ Spring è‡ªåŠ¨æ³¨å…¥ï¼‰</span>
List&lt;OrderHandler&gt; handlers = Arrays.asList(
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">NormalOrderHandler</span>(),
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">VipOrderHandler</span>(),
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">GroupBuyHandler</span>()
);

<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">processOrder</span><span class="hljs-params">(Order order)</span> {
    <span class="hljs-keyword">for</span> (OrderHandler handler : handlers) {
        <span class="hljs-keyword">if</span> (handler.supports(order.getType())) {
            handler.handle(order);
            <span class="hljs-keyword">return</span>;
        }
    }
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(<span class="hljs-string">"ä¸æ”¯æŒçš„è®¢å•ç±»å‹: "</span> + order.getType());
}
</code></pre>
<hr/>
<h4 data-id="heading-7">ğŸ¯Â å¯¹æ¯”æ•ˆæœ</h4>

























<table><thead><tr><th><strong>åœºæ™¯</strong></th><th><strong>åŸå§‹ä»£ç </strong></th><th><strong>ä¼˜åŒ–åä»£ç </strong></th></tr></thead><tbody><tr><td>åŠ â€œé¢„å”®è®¢å•â€</td><td>è¦æ”¹Â <code>processOrder</code>Â æ–¹æ³•</td><td>åªéœ€æ–°å¢ä¸€ä¸ªÂ <code>PresaleOrderHandler</code>Â ç±»</td></tr><tr><td>ä»£ç ç»“æ„</td><td>æ‰€æœ‰é€»è¾‘æŒ¤åœ¨ä¸€èµ·</td><td>æ¯ç§ç±»å‹ç‹¬ç«‹ï¼Œæ¸…æ™°æ˜“è¯»</td></tr><tr><td>æµ‹è¯•</td><td>éš¾ä»¥å•ç‹¬æµ‹æŸä¸€ç§</td><td>æ¯ä¸ªÂ HandlerÂ å¯å•ç‹¬æµ‹è¯•</td></tr></tbody></table>
<p>ğŸ’¡Â æœ¬è´¨ï¼šæŠŠâ€œä¼šå˜çš„â€å°è£…èµ·æ¥ï¼Œè®©â€œä¸å˜çš„â€ç¨³å®šè¿è¡Œ</p>
<h3 data-id="heading-8">äºŒã€SOLIDÂ åŸåˆ™ï¼šéš”ç¦»å˜åŒ–çš„Â 5Â æ¡å†›è§„</h3>
<h4 data-id="heading-9">1.Â å•ä¸€èŒè´£ï¼ˆSRPï¼‰â†’Â ä¸€ä¸ªç±»åªå¹²ä¸€ä»¶äº‹</h4>
<ul>
<li>
<p>é—®é¢˜ï¼šUserServiceÂ æ—¢ç®¡ç”¨æˆ·ä¿¡æ¯ï¼Œåˆå‘é‚®ä»¶ã€è®°æ—¥å¿—</p>
</li>
<li>
<p>éš”ç¦»å˜åŒ–ï¼šæŠŠâ€œå‘é‚®ä»¶â€ã€â€œè®°æ—¥å¿—â€æ‹†å‡ºå»</p>
</li>
<li>
<p>æ•ˆæœï¼šæ”¹é‚®ä»¶é€»è¾‘ä¸å½±å“ç”¨æˆ·ä¿å­˜</p>
</li>
</ul>
<h4 data-id="heading-10">2.Â å¼€é—­åŸåˆ™ï¼ˆOCPï¼‰â†’Â å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­</h4>
<ul>
<li>
<p>é—®é¢˜ï¼šåŠ æ–°æ”¯ä»˜æ–¹å¼è¦æ”¹Â OrderService</p>
</li>
<li>
<p>éš”ç¦»å˜åŒ–ï¼šç”¨ç­–ç•¥æ¨¡å¼ï¼Œæ–°å¢ç±»ä¸æ”¹æ—§ä»£ç </p>
</li>
<li>
<p>æ•ˆæœï¼šéœ€æ±‚å˜ï¼Œä»£ç ä¸åŠ¨</p>
</li>
</ul>
<h4 data-id="heading-11">3.Â é‡Œæ°æ›¿æ¢ï¼ˆLSPï¼‰â†’Â å­ç±»èƒ½æ— ç¼æ›¿æ¢çˆ¶ç±»</h4>
<ul>
<li>
<p>é—®é¢˜ï¼šSquareÂ ç»§æ‰¿Â Rectangleï¼Œé¢ç§¯è®¡ç®—å‡ºé”™</p>
</li>
<li>
<p>éš”ç¦»å˜åŒ–ï¼šæ­£æ–¹å½¢å’ŒçŸ©å½¢åº”ä¸ºå…„å¼Ÿç±»ï¼Œè€Œéçˆ¶å­</p>
</li>
<li>
<p>æ•ˆæœï¼šå¤šæ€å®‰å…¨ï¼Œä¸ç ´ååŸæœ‰é€»è¾‘</p>
</li>
</ul>
<h4 data-id="heading-12">4.Â æ¥å£éš”ç¦»ï¼ˆISPï¼‰â†’Â å®¢æˆ·ç«¯åªä¾èµ–éœ€è¦çš„æ¥å£</h4>
<ul>
<li>
<p>é—®é¢˜ï¼šPrinterÂ è¢«è¿«å®ç°Â fax()Â æ–¹æ³•</p>
</li>
<li>
<p>éš”ç¦»å˜åŒ–ï¼šæ‹†æˆÂ Printer/Scanner/FaxÂ å°æ¥å£</p>
</li>
<li>
<p>æ•ˆæœï¼šç±»åªå®ç°è‡ªå·±éœ€è¦çš„åŠŸèƒ½</p>
</li>
</ul>
<h4 data-id="heading-13">5.Â ä¾èµ–å€’ç½®ï¼ˆDIPï¼‰â†’Â ä¾èµ–æŠ½è±¡ï¼Œä¸ä¾èµ–å…·ä½“</h4>
<ul>
<li>
<p>é—®é¢˜ï¼šOrderServiceÂ ç›´æ¥Â newÂ MySQLDatabase()</p>
</li>
<li>
<p>éš”ç¦»å˜åŒ–ï¼šä¾èµ–Â DatabaseÂ æ¥å£ï¼Œæ³¨å…¥å…·ä½“å®ç°</p>
</li>
<li>
<p>æ•ˆæœï¼šæ¢Â PostgreSQLï¼Ÿåªéœ€æ”¹é…ç½®ï¼</p>
</li>
</ul>
<h3 data-id="heading-14">ä¸‰ã€23Â ç§è®¾è®¡æ¨¡å¼ï¼šå¦‚ä½•éš”ç¦»å˜åŒ–ï¼Ÿ</h3>
<p>æ¯ä¸ªæ¨¡å¼éƒ½å›ç­”ä¸€ä¸ªé—®é¢˜ï¼šä»€ä¹ˆåœ¨å˜ï¼Ÿæ€ä¹ˆéš”ç¦»ï¼Ÿ</p>
<h4 data-id="heading-15">ğŸ§±Â åˆ›å»ºå‹æ¨¡å¼ï¼ˆ5ç§ï¼‰ï¼šéš”ç¦»â€œå¯¹è±¡åˆ›å»ºâ€çš„å˜åŒ–</h4>









































<table><thead><tr><th><strong>æ¨¡å¼</strong></th><th><strong>ä»€ä¹ˆåœ¨å˜ï¼Ÿ</strong></th><th><strong>æ€ä¹ˆéš”ç¦»ï¼Ÿ</strong></th><th><strong>SpringÂ BootÂ å®æˆ˜</strong></th></tr></thead><tbody><tr><td>å•ä¾‹</td><td>å…¨å±€å”¯ä¸€å®ä¾‹</td><td>ç§æœ‰æ„é€ Â +Â é™æ€æ–¹æ³•</td><td><code>@Component</code>Â +Â <code>@Scope("singleton")</code></td></tr><tr><td>å·¥å‚æ–¹æ³•</td><td>åˆ›å»ºå“ªç§å¯¹è±¡</td><td>å­ç±»å†³å®š</td><td><code>@Bean</code>Â æ–¹æ³•è¿”å›ä¸åŒå®ç°</td></tr><tr><td>æŠ½è±¡å·¥å‚</td><td>åˆ›å»ºäº§å“æ—</td><td>å·¥å‚æ¥å£</td><td>å¤šæ•°æ®æºé…ç½®ï¼ˆMySQLFactoryÂ /Â PGFactoryï¼‰</td></tr><tr><td>å»ºé€ è€…</td><td>å¤æ‚å¯¹è±¡æ„å»ºæ­¥éª¤</td><td>åˆ†æ­¥æ„å»º</td><td><code>RestTemplateBuilder</code>,Â <code>WebClient.builder()</code></td></tr><tr><td>åŸå‹</td><td>å¯¹è±¡åˆå§‹åŒ–æˆæœ¬é«˜</td><td>å…‹éš†ç°æœ‰å¯¹è±¡</td><td><code>@Scope("prototype")</code>Â Bean</td></tr></tbody></table>
<p>âœ…Â æ ¸å¿ƒï¼šä¸è®©ä¸šåŠ¡ä»£ç å…³å¿ƒâ€œå¯¹è±¡æ€ä¹ˆæ¥â€</p>
<h4 data-id="heading-16">ğŸ”—Â ç»“æ„å‹æ¨¡å¼ï¼ˆ7ç§ï¼‰ï¼šéš”ç¦»â€œç»“æ„ç»„åˆâ€çš„å˜åŒ–</h4>





















































<table><thead><tr><th><strong>æ¨¡å¼</strong></th><th><strong>ä»€ä¹ˆåœ¨å˜ï¼Ÿ</strong></th><th><strong>æ€ä¹ˆéš”ç¦»ï¼Ÿ</strong></th><th><strong>SpringÂ BootÂ å®æˆ˜</strong></th></tr></thead><tbody><tr><td>é€‚é…å™¨</td><td>æ¥å£ä¸å…¼å®¹</td><td>åŒ…è£…æ—§æ¥å£</td><td>é›†æˆç¬¬ä¸‰æ–¹Â SDKï¼ˆå¦‚å¾®ä¿¡æ”¯ä»˜é€‚é…å™¨ï¼‰</td></tr><tr><td>è£…é¥°å™¨</td><td>åŠŸèƒ½åŠ¨æ€å¢å‡</td><td>åŒ…è£…å¢å¼º</td><td><code>BufferedInputStream</code>,Â SpringÂ SecurityÂ è¿‡æ»¤å™¨é“¾</td></tr><tr><td>ä»£ç†</td><td>æ§åˆ¶å¯¹è±¡è®¿é—®</td><td>ä¸­ä»‹æ‹¦æˆª</td><td>SpringÂ AOPï¼ˆäº‹åŠ¡ã€æ—¥å¿—ï¼‰ã€FeignÂ Client</td></tr><tr><td>å¤–è§‚</td><td>å­ç³»ç»Ÿå¤æ‚</td><td>æä¾›ç»Ÿä¸€å…¥å£</td><td><code>@Service</code>Â å°è£…å¤šä¸ªÂ RepositoryÂ è°ƒç”¨</td></tr><tr><td>æ¡¥æ¥</td><td>æŠ½è±¡ä¸å®ç°è€¦åˆ</td><td>åˆ†ç¦»ç»´åº¦</td><td>æ—¥å¿—æ¡†æ¶ï¼ˆLoggerÂ +Â Appenderï¼‰</td></tr><tr><td>ç»„åˆ</td><td>æ ‘å½¢ç»“æ„</td><td>ç»Ÿä¸€å¤„ç†</td><td>èœå•æƒé™æ ‘ã€ç»„ç»‡æ¶æ„æ ‘</td></tr><tr><td>äº«å…ƒ</td><td>å¤§é‡ç›¸ä¼¼å¯¹è±¡</td><td>å…±äº«å†…éƒ¨çŠ¶æ€</td><td>æ•°æ®åº“è¿æ¥æ± ã€çº¿ç¨‹æ± </td></tr></tbody></table>
<p>âœ…Â æ ¸å¿ƒï¼šä¸è®©è°ƒç”¨æ–¹çŸ¥é“â€œå†…éƒ¨æ€ä¹ˆç»„åˆâ€</p>
<h4 data-id="heading-17">ğŸ”„Â è¡Œä¸ºå‹æ¨¡å¼ï¼ˆ11ç§ï¼‰ï¼šéš”ç¦»â€œè¡Œä¸ºç®—æ³•â€çš„å˜åŒ–</h4>













































































<table><thead><tr><th><strong>æ¨¡å¼</strong></th><th><strong>ä»€ä¹ˆåœ¨å˜ï¼Ÿ</strong></th><th><strong>æ€ä¹ˆéš”ç¦»ï¼Ÿ</strong></th><th><strong>SpringÂ BootÂ å®æˆ˜</strong></th></tr></thead><tbody><tr><td>ç­–ç•¥</td><td>ç®—æ³•é€‰æ‹©</td><td>å°è£…ç®—æ³•</td><td>æ”¯ä»˜æ–¹å¼ã€æŠ˜æ‰£è®¡ç®—ã€è·¯ç”±è§„åˆ™</td></tr><tr><td>è§‚å¯Ÿè€…</td><td>äº‹ä»¶é€šçŸ¥</td><td>æ¾è€¦åˆç›‘å¬</td><td><code>ApplicationEventPublisher</code>,Â SpringÂ äº‹ä»¶æœºåˆ¶</td></tr><tr><td>è´£ä»»é“¾</td><td>è¯·æ±‚å¤„ç†é“¾</td><td>ä¼ é€’å¤„ç†</td><td>SpringÂ SecurityÂ FilterÂ Chainã€å®¡æ‰¹æµ</td></tr><tr><td>å‘½ä»¤</td><td>è¯·æ±‚å°è£…</td><td>å¯¹è±¡åŒ–è¯·æ±‚</td><td>ä»»åŠ¡é˜Ÿåˆ—ã€æ’¤é”€æ“ä½œï¼ˆå¦‚Â RedisÂ Queueï¼‰</td></tr><tr><td>çŠ¶æ€</td><td>çŠ¶æ€è¡Œä¸º</td><td>çŠ¶æ€é©±åŠ¨</td><td>è®¢å•çŠ¶æ€æœºï¼ˆå¾…æ”¯ä»˜Â â†’Â å·²æ”¯ä»˜Â â†’Â å·²å‘è´§ï¼‰</td></tr><tr><td>æ¨¡æ¿æ–¹æ³•</td><td>ç®—æ³•éª¨æ¶</td><td>å›ºå®šæµç¨‹</td><td><code>JdbcTemplate</code>,Â <code>RestTemplate</code></td></tr><tr><td>è¿­ä»£å™¨</td><td>éå†æ–¹å¼</td><td>ç»Ÿä¸€è®¿é—®</td><td><code>List.iterator()</code>,Â StreamÂ API</td></tr><tr><td>ä¸­ä»‹è€…</td><td>å¯¹è±¡äº¤äº’</td><td>ä¸­å¿ƒåè°ƒ</td><td>æ¶ˆæ¯æ€»çº¿ã€äº‹ä»¶ä¸­å¿ƒ</td></tr><tr><td>å¤‡å¿˜å½•</td><td>çŠ¶æ€ä¿å­˜</td><td>å¿«ç…§æ¢å¤</td><td>æ¸¸æˆå­˜æ¡£ã€è¡¨å•è‰ç¨¿</td></tr><tr><td>è®¿é—®è€…</td><td>æ–°æ“ä½œ</td><td>å¤–éƒ¨å®šä¹‰</td><td>æŠ¥è¡¨ç”Ÿæˆã€ASTÂ éå†</td></tr><tr><td>è§£é‡Šå™¨</td><td>è¯­æ³•è§„åˆ™</td><td>è§£ææ‰§è¡Œ</td><td>è§„åˆ™å¼•æ“ï¼ˆå¦‚Â Droolsï¼‰ã€ç®€å•è¡¨è¾¾å¼</td></tr></tbody></table>
<p>âœ…Â æ ¸å¿ƒï¼šä¸è®©ä¸»æµç¨‹çŸ¥é“â€œå…·ä½“æ€ä¹ˆæ‰§è¡Œâ€</p>
<h3 data-id="heading-18">å››ã€SpringÂ BootÂ ä¸­çš„æœ€ä½³å®è·µ</h3>
<h4 data-id="heading-19">aã€åˆ›å»ºå‹æ¨¡å¼ï¼ˆ5ç§ï¼‰</h4>
<h5 data-id="heading-20">1.Â å•ä¾‹æ¨¡å¼ï¼ˆSingletonï¼‰</h5>
<blockquote>
<p>éš”ç¦»å˜åŒ–ï¼šå…¨å±€å”¯ä¸€å®ä¾‹ï¼ˆå¦‚é…ç½®ã€å·¥å…·ç±»ï¼‰<br/>
SpringÂ å®ç°ï¼šé»˜è®¤æ‰€æœ‰Â BeanÂ éƒ½æ˜¯å•ä¾‹</p>
</blockquote>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RedisCacheService</span> {
    <span class="hljs-comment">// æ•´ä¸ªåº”ç”¨åªæœ‰ä¸€ä¸ªå®ä¾‹</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">get</span><span class="hljs-params">(String key)</span> {
        <span class="hljs-keyword">return</span> redisTemplate.opsForValue().get(key);
    }
}
</code></pre>
<p>âœ…Â æ•ˆæœï¼šæ— éœ€æ‰‹åŠ¨ç®¡ç†å®ä¾‹ï¼ŒSpringÂ è‡ªåŠ¨ä¿è¯å•ä¾‹ã€‚</p>
<h5 data-id="heading-21">2.Â å·¥å‚æ–¹æ³•æ¨¡å¼ï¼ˆFactoryÂ Methodï¼‰</h5>
<blockquote>
<p>éš”ç¦»å˜åŒ–ï¼šå¯¹è±¡åˆ›å»ºé€»è¾‘<br/>
SpringÂ å®ç°ï¼š<code>@Bean</code>Â æ–¹æ³•</p>
</blockquote>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// 1. å®šä¹‰æ¥å£</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Payment</span> {
    String <span class="hljs-title function_">getType</span><span class="hljs-params">()</span>; <span class="hljs-comment">// è¿”å› "alipay" æˆ– "wechat"</span>
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">pay</span><span class="hljs-params">(Order order)</span>;
}

<span class="hljs-comment">// 2. å®ç°ç±»</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Alipay</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Payment</span> {
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getType</span><span class="hljs-params">()</span> { <span class="hljs-keyword">return</span> <span class="hljs-string">"alipay"</span>; }
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">pay</span><span class="hljs-params">(Order order)</span> { ... }
}

<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">WechatPay</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Payment</span> {
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getType</span><span class="hljs-params">()</span> { <span class="hljs-keyword">return</span> <span class="hljs-string">"wechat"</span>; }
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">pay</span><span class="hljs-params">(Order order)</span> { ... }
}

<span class="hljs-comment">// 3. ç­–ç•¥å·¥å‚ï¼ˆè‡ªåŠ¨æ³¨å†Œï¼‰</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PaymentFactory</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Map&lt;String, Payment&gt; payments;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">PaymentFactory</span><span class="hljs-params">(List&lt;Payment&gt; paymentList)</span> {
        <span class="hljs-built_in">this</span>.payments = paymentList.stream()
            .collect(Collectors.toMap(Payment::getType, p -&gt; p));
    }

    <span class="hljs-keyword">public</span> Payment <span class="hljs-title function_">get</span><span class="hljs-params">(String type)</span> {
        <span class="hljs-keyword">return</span> payments.get(type);
    }
}

<span class="hljs-comment">// 4. ä½¿ç”¨</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderService</span> {
    <span class="hljs-meta">@Autowired</span> <span class="hljs-keyword">private</span> PaymentFactory paymentFactory;

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">createOrder</span><span class="hljs-params">(Order order)</span> {
        <span class="hljs-type">Payment</span> <span class="hljs-variable">payment</span> <span class="hljs-operator">=</span> paymentFactory.get(order.getPayType());
        payment.pay(order);
    }
}

</code></pre>
<p>âœ…Â æ•ˆæœï¼šæ ¹æ®å‚æ•°åŠ¨æ€åˆ›å»ºå¯¹è±¡ã€‚</p>
<h5 data-id="heading-22">3.Â æŠ½è±¡å·¥å‚æ¨¡å¼ï¼ˆAbstractÂ Factoryï¼‰</h5>
<blockquote>
<p>éš”ç¦»å˜åŒ–ï¼šäº§å“æ—ï¼ˆå¦‚å¤šç¯å¢ƒæ•°æ®æºï¼‰<br/>
SpringÂ å®ç°ï¼šProfileÂ +Â æ¡ä»¶è£…é…</p>
</blockquote>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Configuration</span>
<span class="hljs-meta">@Profile("prod")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ProdDatabaseFactory</span> {
    <span class="hljs-meta">@Bean</span> <span class="hljs-keyword">public</span> DataSource <span class="hljs-title function_">dataSource</span><span class="hljs-params">()</span> { <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HikariDataSource</span>(); }
    <span class="hljs-meta">@Bean</span> <span class="hljs-keyword">public</span> JdbcTemplate <span class="hljs-title function_">jdbcTemplate</span><span class="hljs-params">(DataSource ds)</span> { <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JdbcTemplate</span>(ds); }
}

<span class="hljs-meta">@Configuration</span>
<span class="hljs-meta">@Profile("test")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TestDatabaseFactory</span> {
    <span class="hljs-meta">@Bean</span> <span class="hljs-keyword">public</span> DataSource <span class="hljs-title function_">dataSource</span><span class="hljs-params">()</span> { <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">EmbeddedDatabaseBuilder</span>().build(); }
    <span class="hljs-meta">@Bean</span> <span class="hljs-keyword">public</span> JdbcTemplate <span class="hljs-title function_">jdbcTemplate</span><span class="hljs-params">(DataSource ds)</span> { <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JdbcTemplate</span>(ds); }
}
</code></pre>
<p>âœ…Â æ•ˆæœï¼šæ•´å¥—ç»„ä»¶ä¸€é”®åˆ‡æ¢ï¼Œæ— éœ€æ”¹ä¸šåŠ¡ä»£ç ã€‚</p>
<h5 data-id="heading-23">4.Â å»ºé€ è€…æ¨¡å¼ï¼ˆBuilderï¼‰</h5>
<blockquote>
<p>éš”ç¦»å˜åŒ–ï¼šå¤æ‚å¯¹è±¡æ„å»ºæ­¥éª¤<br/>
SpringÂ å®ç°ï¼š<code>WebClient.builder()</code></p>
</blockquote>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ApiService</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> WebClient webClient;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">ApiService</span><span class="hljs-params">()</span> {
        <span class="hljs-built_in">this</span>.webClient = WebClient.builder()
            .baseUrl(<span class="hljs-string">"https://api.example.com"</span>)
            .defaultHeader(<span class="hljs-string">"User-Agent"</span>, <span class="hljs-string">"MyApp/1.0"</span>)
            .build();
    }

    <span class="hljs-keyword">public</span> Mono&lt;String&gt; <span class="hljs-title function_">getData</span><span class="hljs-params">(String path)</span> {
        <span class="hljs-keyword">return</span> webClient.get().uri(path).retrieve().bodyToMono(String.class);
    }
}
</code></pre>
<p>âœ…Â æ•ˆæœï¼šæ„å»ºè¿‡ç¨‹æ¸…æ™°ï¼Œå‚æ•°å¯é€‰ï¼Œé¿å…æ„é€ å‡½æ•°çˆ†ç‚¸ã€‚</p>
<hr/>
<h5 data-id="heading-24">5.Â åŸå‹æ¨¡å¼ï¼ˆPrototypeï¼‰</h5>
<blockquote>
<p>éš”ç¦»å˜åŒ–ï¼šé«˜æˆæœ¬å¯¹è±¡åˆå§‹åŒ–<br/>
SpringÂ å®ç°ï¼š<code>@Scope("prototype")</code></p>
</blockquote>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Component</span>
<span class="hljs-meta">@Scope("prototype")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderContext</span> {
    <span class="hljs-keyword">private</span> String orderId;
    <span class="hljs-keyword">private</span> <span class="hljs-type">LocalDateTime</span> <span class="hljs-variable">createTime</span> <span class="hljs-operator">=</span> LocalDateTime.now();

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setOrderId</span><span class="hljs-params">(String id)</span> { <span class="hljs-built_in">this</span>.orderId = id; }
    <span class="hljs-comment">// ...</span>
}
</code></pre>
<p>âœ…Â æ•ˆæœï¼šæ¯æ¬¡æ³¨å…¥éƒ½æ˜¯æ–°å®ä¾‹ï¼Œé¿å…çŠ¶æ€æ±¡æŸ“ï¼ˆå¦‚è¯·æ±‚çº§ä¸Šä¸‹æ–‡ï¼‰ã€‚</p>
<h4 data-id="heading-25">bã€ç»“æ„å‹æ¨¡å¼ï¼ˆ7ç§ï¼‰</h4>
<h5 data-id="heading-26">6.Â é€‚é…å™¨æ¨¡å¼ï¼ˆAdapterï¼‰</h5>
<blockquote>
<p>éš”ç¦»å˜åŒ–ï¼šç¬¬ä¸‰æ–¹æ¥å£ä¸å…¼å®¹<br/>
SpringÂ å®ç°ï¼šå°è£…Â SDK</p>
</blockquote>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ç¬¬ä¸‰æ–¹ SDK</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">WxPaySDK</span> {
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">pay</span><span class="hljs-params">(String openid, <span class="hljs-type">double</span> amount)</span> { <span class="hljs-comment">/* å¾®ä¿¡æ”¯ä»˜ */</span> }
}

<span class="hljs-comment">// é€‚é…å™¨</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">WxPayAdapter</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Payment</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">WxPaySDK</span> <span class="hljs-variable">sdk</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">WxPaySDK</span>();

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">pay</span><span class="hljs-params">(Order order)</span> {
        sdk.pay(order.getUser().getOpenid(), order.getAmount());
    }
}
</code></pre>
<p>âœ…Â æ•ˆæœï¼šä¸šåŠ¡åªä¾èµ–Â <code>Payment</code>Â æ¥å£ï¼Œä¸å…³å¿ƒå¾®ä¿¡ç»†èŠ‚ã€‚</p>
<h5 data-id="heading-27">7.Â è£…é¥°å™¨æ¨¡å¼ï¼ˆDecoratorï¼‰</h5>
<blockquote>
<p>éš”ç¦»å˜åŒ–ï¼šåŠŸèƒ½åŠ¨æ€å¢å¼º<br/>
SpringÂ å®ç°ï¼šAOPÂ æˆ–åŒ…è£…Â Bean</p>
</blockquote>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Component</span>
<span class="hljs-meta">@Primary</span> <span class="hljs-comment">// ä¼˜å…ˆæ³¨å…¥</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LoggingUserService</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">UserService</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> UserService target;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">LoggingUserService</span><span class="hljs-params">(<span class="hljs-meta">@Qualifier("userServiceImpl")</span> UserService target)</span> {
        <span class="hljs-built_in">this</span>.target = target;
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> User <span class="hljs-title function_">getUser</span><span class="hljs-params">(Long id)</span> {
        log.info(<span class="hljs-string">"æŸ¥è¯¢ç”¨æˆ·: {}"</span>, id);
        <span class="hljs-keyword">return</span> target.getUser(id); <span class="hljs-comment">// å¢å¼ºåŸåŠŸèƒ½</span>
    }
}
</code></pre>
<p>âœ…Â æ•ˆæœï¼šæ—¥å¿—ã€ç¼“å­˜ã€é™æµç­‰åŠŸèƒ½å¯å åŠ ï¼Œä¸ä¾µå…¥æ ¸å¿ƒé€»è¾‘ã€‚</p>
<h5 data-id="heading-28">8.Â ä»£ç†æ¨¡å¼ï¼ˆProxyï¼‰</h5>
<blockquote>
<p>éš”ç¦»å˜åŒ–ï¼šæ§åˆ¶å¯¹è±¡è®¿é—®ï¼ˆäº‹åŠ¡ã€å®‰å…¨ç­‰ï¼‰<br/>
SpringÂ å®ç°ï¼šSpringÂ AOPï¼ˆè‡ªåŠ¨ä»£ç†ï¼‰</p>
</blockquote>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderService</span> {

    <span class="hljs-meta">@Transactional</span> <span class="hljs-comment">// Spring è‡ªåŠ¨ç”Ÿæˆä»£ç†ï¼Œå¼€å¯äº‹åŠ¡</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">createOrder</span><span class="hljs-params">(Order order)</span> {
        orderRepository.save(order);
        inventoryService.deduct(order.getItems());
    }
}
</code></pre>
<p>âœ…Â æ•ˆæœï¼šäº‹åŠ¡ã€ç¼“å­˜ã€å®‰å…¨ç­‰æ¨ªåˆ‡å…³æ³¨ç‚¹ä¸ä¸šåŠ¡å®Œå…¨è§£è€¦ã€‚</p>
<h5 data-id="heading-29">9.Â å¤–è§‚æ¨¡å¼ï¼ˆFacadeï¼‰</h5>
<blockquote>
<p>éš”ç¦»å˜åŒ–ï¼šå­ç³»ç»Ÿå¤æ‚æ€§<br/>
SpringÂ å®ç°ï¼š<code>@Service</code>Â å°è£…å¤šä¸ªä¾èµ–</p>
</blockquote>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderFacade</span> {
    <span class="hljs-meta">@Autowired</span> <span class="hljs-keyword">private</span> OrderRepository orderRepo;
    <span class="hljs-meta">@Autowired</span> <span class="hljs-keyword">private</span> InventoryService inventory;
    <span class="hljs-meta">@Autowired</span> <span class="hljs-keyword">private</span> NotificationService notify;

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">createOrder</span><span class="hljs-params">(OrderDTO dto)</span> {
        <span class="hljs-type">Order</span> <span class="hljs-variable">order</span> <span class="hljs-operator">=</span> orderRepo.save(dto.toEntity());
        inventory.deduct(order.getItems());
        notify.send(order.getUser(), <span class="hljs-string">"ä¸‹å•æˆåŠŸ"</span>);
    }
}
</code></pre>
<p>âœ…Â æ•ˆæœï¼šè°ƒç”¨æ–¹åªéœ€é¢å¯¹ä¸€ä¸ªç®€å•æ¥å£ï¼Œå†…éƒ¨å¤æ‚æ€§è¢«éšè—ã€‚</p>
<h5 data-id="heading-30">10.Â æ¡¥æ¥æ¨¡å¼ï¼ˆBridgeï¼‰</h5>
<blockquote>
<p>éš”ç¦»å˜åŒ–ï¼šæŠ½è±¡ä¸å®ç°ç´§è€¦åˆ<br/>
ä¸¤ä¸ªç»´åº¦çš„å˜åŒ–ï¼š</p>
</blockquote>
<blockquote>
<p>æŠ½è±¡ç»´åº¦ï¼ˆå¦‚ï¼šæ¶ˆæ¯ç±»å‹ï¼šé€šçŸ¥ã€å‘Šè­¦ã€è¥é”€ï¼‰</p>
</blockquote>
<blockquote>
<p>å®ç°ç»´åº¦ï¼ˆå¦‚ï¼šå‘é€æ¸ é“ï¼šé‚®ä»¶ã€çŸ­ä¿¡ã€å¾®ä¿¡ï¼‰</p>
</blockquote>
<blockquote>
<p>ç»„åˆè€Œéç»§æ‰¿ï¼šæŠ½è±¡æŒæœ‰å®ç°çš„å¼•ç”¨</p>
</blockquote>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// å®ç°ç»´åº¦ï¼šå‘é€æ¸ é“</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">MessageSender</span> {
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">send</span><span class="hljs-params">(String msg)</span>;
}

<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EmailSender</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">MessageSender</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">send</span><span class="hljs-params">(String msg)</span> { System.out.println(<span class="hljs-string">"ğŸ“§ é‚®ä»¶: "</span> + msg); }
}

<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SmsSender</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">MessageSender</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">send</span><span class="hljs-params">(String msg)</span> { System.out.println(<span class="hljs-string">"ğŸ“± çŸ­ä¿¡: "</span> + msg); }
}


<span class="hljs-comment">// æŠ½è±¡ç»´åº¦ï¼šæ¶ˆæ¯ç±»å‹</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Message</span> {
    <span class="hljs-keyword">protected</span> MessageSender sender; <span class="hljs-comment">// æŒæœ‰å®ç°çš„å¼•ç”¨ï¼ˆæ¡¥æ¥ï¼ï¼‰</span>

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Message</span><span class="hljs-params">(MessageSender sender)</span> {
        <span class="hljs-built_in">this</span>.sender = sender;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">send</span><span class="hljs-params">(String content)</span>;
}

<span class="hljs-comment">// é€šçŸ¥æ¶ˆæ¯</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">NotificationMessage</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Message</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">NotificationMessage</span><span class="hljs-params">(MessageSender sender)</span> {
        <span class="hljs-built_in">super</span>(sender);
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">send</span><span class="hljs-params">(String content)</span> {
        sender.send(<span class="hljs-string">"[é€šçŸ¥] "</span> + content);
    }
}

<span class="hljs-comment">// å‘Šè­¦æ¶ˆæ¯</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AlertMessage</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Message</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">AlertMessage</span><span class="hljs-params">(MessageSender sender)</span> {
        <span class="hljs-built_in">super</span>(sender);
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">send</span><span class="hljs-params">(String content)</span> {
        sender.send(<span class="hljs-string">"[ğŸš¨ å‘Šè­¦] "</span> + content);
    }
}

<span class="hljs-comment">// è¥é”€æ¶ˆæ¯</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MarketingMessage</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Message</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">MarketingMessage</span><span class="hljs-params">(MessageSender sender)</span> {
        <span class="hljs-built_in">super</span>(sender);
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">send</span><span class="hljs-params">(String content)</span> {
        sender.send(<span class="hljs-string">"[ğŸ è¥é”€] "</span> + content);
    }
}

<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MessageService</span> {

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> EmailSender emailSender;

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> SmsSender smsSender;

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">demo</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// é€šçŸ¥ + é‚®ä»¶</span>
        <span class="hljs-keyword">new</span> <span class="hljs-title class_">NotificationMessage</span>(emailSender).send(<span class="hljs-string">"ç³»ç»Ÿå‡çº§"</span>);

        <span class="hljs-comment">// å‘Šè­¦ + çŸ­ä¿¡</span>
        <span class="hljs-keyword">new</span> <span class="hljs-title class_">AlertMessage</span>(smsSender).send(<span class="hljs-string">"CPU ä½¿ç”¨ç‡è¿‡é«˜ï¼"</span>);

        <span class="hljs-comment">// è¥é”€ + é‚®ä»¶</span>
        <span class="hljs-keyword">new</span> <span class="hljs-title class_">MarketingMessage</span>(emailSender).send(<span class="hljs-string">"åŒ11å¤§ä¿ƒå¼€å§‹äº†ï¼"</span>);
    }
}



</code></pre>
<p>âœ…Â æ•ˆæœï¼šå‘é€æ–¹å¼å’Œé€šçŸ¥é€»è¾‘ç‹¬ç«‹æ¼”è¿›ï¼Œäº’ä¸å½±å“ã€‚</p>
<h5 data-id="heading-31">11.Â ç»„åˆæ¨¡å¼ï¼ˆCompositeï¼‰</h5>
<blockquote>
<p>éš”ç¦»å˜åŒ–ï¼šæ ‘å½¢ç»“æ„å¤„ç†å·®å¼‚<br/>
SpringÂ å®ç°ï¼šèœå•/æƒé™æ ‘</p>
</blockquote>
<ul>
<li>
<p>ç»Ÿä¸€æ¥å£ï¼šå•ä¸ªï¼ˆå¶å­ï¼‰å’Œç»„åˆï¼ˆå®¹å™¨ï¼‰éƒ½å®ç°åŒä¸€ä¸ªæ¥å£</p>
</li>
<li>
<p>é€’å½’å¤„ç†ï¼šç»„åˆå¯¹è±¡è°ƒç”¨è‡ªå·±å†…éƒ¨æ¯ä¸ªå­å¯¹è±¡çš„ç›¸åŒæ–¹æ³•</p>
</li>
</ul>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">MenuComponent</span> {
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">render</span><span class="hljs-params">()</span>; <span class="hljs-comment">// æ‰€æœ‰èœå•å…ƒç´ ï¼ˆå•ä¸ª or ç»„ï¼‰éƒ½è¦èƒ½æ¸²æŸ“</span>
}

<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MenuItem</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">MenuComponent</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">render</span><span class="hljs-params">()</span> {
        System.out.println(<span class="hljs-string">"æ¸²æŸ“èœå•é¡¹"</span>); <span class="hljs-comment">// å°±å¹²è¿™ä¸€ä»¶äº‹</span>
    }
}

<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MenuGroup</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">MenuComponent</span> {
    <span class="hljs-comment">// å­˜æ”¾å­èœå•ï¼ˆå¯ä»¥æ˜¯ MenuItemï¼Œä¹Ÿå¯ä»¥æ˜¯ MenuGroupï¼ï¼‰</span>
    <span class="hljs-keyword">private</span> List&lt;MenuComponent&gt; children = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addChild</span><span class="hljs-params">(MenuComponent child)</span> {
        children.add(child);
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">render</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// å…³é”®ï¼éå†æ‰€æœ‰å­å…ƒç´ ï¼Œè°ƒç”¨å®ƒä»¬çš„ render()</span>
        children.forEach(child -&gt; child.render());
    }
}


<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// åˆ›å»ºæ ¹èœå•ç»„</span>
        <span class="hljs-type">MenuGroup</span> <span class="hljs-variable">root</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MenuGroup</span>();

        <span class="hljs-comment">// æ·»åŠ å•ä¸ªèœå•é¡¹</span>
        root.addChild(<span class="hljs-keyword">new</span> <span class="hljs-title class_">MenuItem</span>()); <span class="hljs-comment">// "é¦–é¡µ"</span>
        root.addChild(<span class="hljs-keyword">new</span> <span class="hljs-title class_">MenuItem</span>()); <span class="hljs-comment">// "å…³äºæˆ‘ä»¬"</span>

        <span class="hljs-comment">// åˆ›å»ºå­èœå•ç»„</span>
        <span class="hljs-type">MenuGroup</span> <span class="hljs-variable">userMenu</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MenuGroup</span>();
        userMenu.addChild(<span class="hljs-keyword">new</span> <span class="hljs-title class_">MenuItem</span>()); <span class="hljs-comment">// "ä¸ªäººä¸­å¿ƒ"</span>
        userMenu.addChild(<span class="hljs-keyword">new</span> <span class="hljs-title class_">MenuItem</span>()); <span class="hljs-comment">// "é€€å‡ºç™»å½•"</span>

        <span class="hljs-comment">// æŠŠå­èœå•ç»„åŠ å…¥æ ¹èœå•</span>
        root.addChild(userMenu);

        <span class="hljs-comment">// æ¸²æŸ“æ•´ä¸ªèœå•ï¼</span>
        root.render();
    }
}

</code></pre>
<p>âœ…Â æ•ˆæœï¼šç»Ÿä¸€å¤„ç†å•ä¸ªå’Œç»„åˆå¯¹è±¡ï¼Œå®¢æˆ·ç«¯æ— éœ€åŒºåˆ†ã€‚</p>
<h5 data-id="heading-32">12.Â äº«å…ƒæ¨¡å¼ï¼ˆFlyweightï¼‰</h5>
<blockquote>
<p>éš”ç¦»å˜åŒ–ï¼šå¤§é‡ç›¸ä¼¼å¯¹è±¡å†…å­˜å¼€é”€<br/>
äº«å…ƒæ¨¡å¼Â =Â å…±äº«ä¸å˜çš„éƒ¨åˆ†Â +Â ä¼ é€’å˜åŒ–çš„éƒ¨åˆ†</p>
</blockquote>
<blockquote>
<p>èƒ½æœ‰æ•ˆè§£å†³Â å¤§é‡é‡å¤å°å¯¹è±¡å¯¼è‡´çš„å†…å­˜é—®é¢˜ã€‚</p>
</blockquote>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æ ‡ç­¾äº«å…ƒæ¥å£</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">UserTagFlyweight</span> {
    <span class="hljs-comment">/**
     * æ˜¾ç¤ºæ ‡ç­¾ï¼ˆå¤–éƒ¨çŠ¶æ€ï¼šuserId, positionï¼‰
     */</span>
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">display</span><span class="hljs-params">(Long userId, String position)</span>;
}

<span class="hljs-comment">// å…·ä½“æ ‡ç­¾å®ç°ï¼ˆå†…éƒ¨çŠ¶æ€ï¼štype, color, iconï¼‰</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-meta">@Scope("prototype")</span> <span class="hljs-comment">// æ¯æ¬¡ä»å·¥å‚è·å–æ—¶ç”±å·¥å‚æ§åˆ¶ï¼Œä¸æ˜¯ Spring ç®¡ç†å•ä¾‹</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ConcreteUserTag</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">UserTagFlyweight</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> String type;      <span class="hljs-comment">// å†…éƒ¨çŠ¶æ€ï¼šæ ‡ç­¾ç±»å‹ï¼ˆVIP/NEW/...ï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> String color;     <span class="hljs-comment">// å†…éƒ¨çŠ¶æ€ï¼šé¢œè‰²</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> String icon;      <span class="hljs-comment">// å†…éƒ¨çŠ¶æ€ï¼šå›¾æ ‡</span>

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">ConcreteUserTag</span><span class="hljs-params">(String type, String color, String icon)</span> {
        <span class="hljs-built_in">this</span>.type = type;
        <span class="hljs-built_in">this</span>.color = color;
        <span class="hljs-built_in">this</span>.icon = icon;
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">display</span><span class="hljs-params">(Long userId, String position)</span> {
        System.out.printf(<span class="hljs-string">"[ç”¨æˆ·%d] åœ¨ %s æ˜¾ç¤ºæ ‡ç­¾: %s | é¢œè‰²=%s | å›¾æ ‡=%s%n"</span>, 
            userId, position, type, color, icon);
    }
}

<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserTagFactory</span> {
    
    <span class="hljs-comment">// äº«å…ƒæ± ï¼šç¼“å­˜æ‰€æœ‰å·²åˆ›å»ºçš„æ ‡ç­¾ï¼ˆå†…éƒ¨çŠ¶æ€ä½œä¸º keyï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Map&lt;String, UserTagFlyweight&gt; tagPool = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcurrentHashMap</span>&lt;&gt;();

    <span class="hljs-comment">/**
     * è·å–æ ‡ç­¾ï¼ˆç›¸åŒ type/color/icon åªåˆ›å»ºä¸€æ¬¡ï¼‰
     */</span>
    <span class="hljs-keyword">public</span> UserTagFlyweight <span class="hljs-title function_">getTag</span><span class="hljs-params">(String type, String color, String icon)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">key</span> <span class="hljs-operator">=</span> type + <span class="hljs-string">"_"</span> + color + <span class="hljs-string">"_"</span> + icon;
        <span class="hljs-keyword">return</span> tagPool.computeIfAbsent(key, k -&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcreteUserTag</span>(type, color, icon));
    }

    <span class="hljs-comment">// ç”¨äºç›‘æ§</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getPoolSize</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> tagPool.size();
    }
}

<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserService</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> UserTagFactory tagFactory;

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">renderUserTags</span><span class="hljs-params">(Long userId)</span> {
        <span class="hljs-comment">// æ¨¡æ‹Ÿç”¨æˆ·æ‹¥æœ‰çš„æ ‡ç­¾ï¼ˆå®é™…å¯èƒ½æ¥è‡ªæ•°æ®åº“ï¼‰</span>
        List&lt;TagConfig&gt; userTags = getUserTagsFromDB(userId);

        <span class="hljs-keyword">for</span> (TagConfig config : userTags) {
            <span class="hljs-comment">// ä»äº«å…ƒæ± è·å–æ ‡ç­¾ï¼ˆç›¸åŒé…ç½®å¤ç”¨åŒä¸€ä¸ªå¯¹è±¡ï¼‰</span>
            <span class="hljs-type">UserTagFlyweight</span> <span class="hljs-variable">tag</span> <span class="hljs-operator">=</span> tagFactory.getTag(
                config.getType(), 
                config.getColor(), 
                config.getIcon()
            );
            
            <span class="hljs-comment">// æ˜¾ç¤ºæ ‡ç­¾ï¼ˆä¼ å…¥å¤–éƒ¨çŠ¶æ€ï¼‰</span>
            tag.display(userId, config.getPosition());
        }
    }

    <span class="hljs-comment">// æ¨¡æ‹Ÿæ•°æ®åº“æŸ¥è¯¢</span>
    <span class="hljs-keyword">private</span> List&lt;TagConfig&gt; <span class="hljs-title function_">getUserTagsFromDB</span><span class="hljs-params">(Long userId)</span> {
        <span class="hljs-keyword">return</span> Arrays.asList(
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">TagConfig</span>(<span class="hljs-string">"VIP"</span>, <span class="hljs-string">"gold"</span>, <span class="hljs-string">"â­"</span>, <span class="hljs-string">"header"</span>),
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">TagConfig</span>(<span class="hljs-string">"NEW"</span>, <span class="hljs-string">"green"</span>, <span class="hljs-string">"ğŸ†•"</span>, <span class="hljs-string">"profile"</span>),
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">TagConfig</span>(<span class="hljs-string">"VIP"</span>, <span class="hljs-string">"gold"</span>, <span class="hljs-string">"â­"</span>, <span class="hljs-string">"sidebar"</span>) <span class="hljs-comment">// å’Œç¬¬ä¸€ä¸ªç›¸åŒï¼</span>
        );
    }

    <span class="hljs-comment">// å†…éƒ¨ DTO</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TagConfig</span> {
        String type, color, icon, position;
        TagConfig(String type, String color, String icon, String position) {
            <span class="hljs-built_in">this</span>.type = type; <span class="hljs-built_in">this</span>.color = color; <span class="hljs-built_in">this</span>.icon = icon; <span class="hljs-built_in">this</span>.position = position;
        }
        <span class="hljs-comment">// getter...</span>
    }
}

<span class="hljs-meta">@RestController</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TestController</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> UserService userService;
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> UserTagFactory tagFactory;

    <span class="hljs-meta">@GetMapping("/test")</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">test</span><span class="hljs-params">()</span> {
        System.out.println(<span class="hljs-string">"=== æ¸²æŸ“ç”¨æˆ· 1001 ==="</span>);
        userService.renderUserTags(<span class="hljs-number">1001L</span>);
        
        System.out.println(<span class="hljs-string">"=== æ¸²æŸ“ç”¨æˆ· 1002 ==="</span>);
        userService.renderUserTags(<span class="hljs-number">1002L</span>);
        
        System.out.println(<span class="hljs-string">"äº«å…ƒæ± å¤§å°: "</span> + tagFactory.getPoolSize()); <span class="hljs-comment">// åº”è¯¥æ˜¯ 2ï¼ˆVIP å’Œ NEWï¼‰</span>
        <span class="hljs-keyword">return</span> <span class="hljs-string">"OK"</span>;
    }
}



</code></pre>
<p>âœ…Â æ•ˆæœï¼šå…±äº«å†…éƒ¨çŠ¶æ€ï¼Œå¤§å¹…èŠ‚çœèµ„æºã€‚</p>
<h4 data-id="heading-33">cã€è¡Œä¸ºå‹æ¨¡å¼ï¼ˆ11ç§ï¼‰</h4>
<h5 data-id="heading-34">13.Â ç­–ç•¥æ¨¡å¼ï¼ˆStrategyï¼‰</h5>
<blockquote>
<p>éš”ç¦»å˜åŒ–ï¼šç®—æ³•é€‰æ‹©ï¼ˆæ”¯ä»˜ã€æŠ˜æ‰£ç­‰ï¼‰<br/>
SpringÂ å®ç°ï¼šMapÂ è‡ªåŠ¨æ³¨å†Œï¼ˆæœ€å¸¸ç”¨ï¼ï¼‰</p>
</blockquote>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">DiscountStrategy</span> {
    String <span class="hljs-title function_">getType</span><span class="hljs-params">()</span>;
    BigDecimal <span class="hljs-title function_">apply</span><span class="hljs-params">(Order order)</span>;
}

<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">VipDiscount</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">DiscountStrategy</span> {
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getType</span><span class="hljs-params">()</span> { <span class="hljs-keyword">return</span> <span class="hljs-string">"VIP"</span>; }
    <span class="hljs-keyword">public</span> BigDecimal <span class="hljs-title function_">apply</span><span class="hljs-params">(Order order)</span> { <span class="hljs-keyword">return</span> order.getAmount().multiply(BigDecimal.valueOf(<span class="hljs-number">0.9</span>)); }
}

<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HolidayDiscount</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">DiscountStrategy</span> {
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getType</span><span class="hljs-params">()</span> { <span class="hljs-keyword">return</span> <span class="hljs-string">"HOLIDAY"</span>; }
    <span class="hljs-keyword">public</span> BigDecimal <span class="hljs-title function_">apply</span><span class="hljs-params">(Order order)</span> { <span class="hljs-keyword">return</span> order.getAmount().multiply(BigDecimal.valueOf(<span class="hljs-number">0.8</span>)); }
}

<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DiscountService</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Map&lt;String, DiscountStrategy&gt; strategies;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">DiscountService</span><span class="hljs-params">(List&lt;DiscountStrategy&gt; list)</span> {
        <span class="hljs-built_in">this</span>.strategies = list.stream()
            .collect(Collectors.toMap(DiscountStrategy::getType, s -&gt; s));
    }

    <span class="hljs-keyword">public</span> BigDecimal <span class="hljs-title function_">calculate</span><span class="hljs-params">(String type, Order order)</span> {
        <span class="hljs-keyword">return</span> strategies.get(type).apply(order);
    }
}
</code></pre>
<p>âœ…Â æ•ˆæœï¼šæ–°å¢æŠ˜æ‰£ç±»å‹ï¼Ÿåªéœ€å†™ä¸€ä¸ªæ–°ç±»ï¼é›¶ä¿®æ”¹æ ¸å¿ƒä»£ç ã€‚</p>
<h5 data-id="heading-35">14.Â è§‚å¯Ÿè€…æ¨¡å¼ï¼ˆObserverï¼‰</h5>
<blockquote>
<p>éš”ç¦»å˜åŒ–ï¼šäº‹ä»¶é€šçŸ¥è€¦åˆ<br/>
SpringÂ å®ç°ï¼š<code>ApplicationEventPublisher</code>ï¼ˆæœ€å¸¸ç”¨ï¼ï¼‰</p>
</blockquote>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// äº‹ä»¶</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderCreatedEvent</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Order order;
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">OrderCreatedEvent</span><span class="hljs-params">(Order order)</span> { <span class="hljs-built_in">this</span>.order = order; }
    <span class="hljs-keyword">public</span> Order <span class="hljs-title function_">getOrder</span><span class="hljs-params">()</span> { <span class="hljs-keyword">return</span> order; }
}

<span class="hljs-comment">// å‘å¸ƒ</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderService</span> {
    <span class="hljs-meta">@Autowired</span> <span class="hljs-keyword">private</span> ApplicationEventPublisher publisher;

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">createOrder</span><span class="hljs-params">(Order order)</span> {
        orderRepository.save(order);
        publisher.publishEvent(<span class="hljs-keyword">new</span> <span class="hljs-title class_">OrderCreatedEvent</span>(order)); <span class="hljs-comment">// å‘å¸ƒäº‹ä»¶</span>
    }
}

<span class="hljs-comment">// ç›‘å¬</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SmsListener</span> {
    <span class="hljs-meta">@EventListener</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handle</span><span class="hljs-params">(OrderCreatedEvent event)</span> {
        sendSms(event.getOrder().getUser(), <span class="hljs-string">"ä¸‹å•æˆåŠŸ"</span>);
    }
}

<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PointsListener</span> {
    <span class="hljs-meta">@EventListener</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handle</span><span class="hljs-params">(OrderCreatedEvent event)</span> {
        addPoints(event.getOrder().getUser());
    }
}
</code></pre>
<p>âœ…Â æ•ˆæœï¼šæ–°å¢â€œå‘åˆ¸â€ï¼ŸåŠ ä¸€ä¸ªÂ ListenerÂ å³å¯ï¼å®Œå…¨è§£è€¦ã€‚</p>
<h5 data-id="heading-36">15.Â è´£ä»»é“¾æ¨¡å¼ï¼ˆChainÂ ofÂ Responsibilityï¼‰</h5>
<blockquote>
<p>éš”ç¦»å˜åŒ–ï¼šè¯·æ±‚å¤„ç†æµç¨‹<br/>
SpringÂ å®ç°ï¼šFilterÂ ChainÂ /Â æ‰‹åŠ¨é“¾</p>
</blockquote>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AuthHandler</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> AuthHandler next;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">AuthHandler</span><span class="hljs-params">(<span class="hljs-meta">@Nullable</span> AuthHandler next)</span> {
        <span class="hljs-built_in">this</span>.next = next;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">handle</span><span class="hljs-params">(Request req)</span> {
        <span class="hljs-keyword">if</span> (!checkAuth(req)) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">return</span> next == <span class="hljs-literal">null</span> || next.handle(req); <span class="hljs-comment">// ä¼ é€’</span>
    }
}

<span class="hljs-comment">// é…ç½®é“¾</span>
<span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HandlerChainConfig</span> {
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> AuthHandler <span class="hljs-title function_">authChain</span><span class="hljs-params">(RateLimitHandler rateLimit, LogHandler log)</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AuthHandler</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">RateLimitHandler</span>(log));
    }
}
</code></pre>
<p>âœ…Â æ•ˆæœï¼šåŠ¨æ€å¢å‡å¤„ç†ç¯èŠ‚ï¼Œæµç¨‹çµæ´»å¯é…ã€‚</p>
<h5 data-id="heading-37">16.Â å‘½ä»¤æ¨¡å¼ï¼ˆCommandï¼‰</h5>
<blockquote>
<p>éš”ç¦»å˜åŒ–ï¼šè¯·æ±‚å°è£…ï¼ˆæ”¯æŒæ’¤é”€/é˜Ÿåˆ—ï¼‰<br/>
SpringÂ å®ç°ï¼šä»»åŠ¡é˜Ÿåˆ—</p>
</blockquote>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// å®šä¹‰å‘½ä»¤æ¥å£</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Command</span> {
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">execute</span><span class="hljs-params">()</span>;
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">undo</span><span class="hljs-params">()</span>;
}

<span class="hljs-comment">// å®šä¹‰ Receiverï¼ˆçœŸæ­£å¹²æ´»çš„ï¼‰</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderReceiver</span> {
    
    <span class="hljs-meta">@Transactional</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">createOrder</span><span class="hljs-params">(OrderDTO dto)</span> {
        <span class="hljs-comment">// å®Œæ•´ä¸šåŠ¡é€»è¾‘ï¼šæ ¡éªŒã€ä¿å­˜ã€å‘äº‹ä»¶...</span>
        <span class="hljs-type">Order</span> <span class="hljs-variable">order</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Order</span>(dto);
        orderRepository.save(order);
    }

    <span class="hljs-meta">@Transactional</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">cancelOrder</span><span class="hljs-params">(Long orderId)</span> {
        orderRepository.deleteById(orderId);
    }
}

<span class="hljs-comment">// å‘½ä»¤åªä¿å­˜æŒ‡ä»¤å‚æ•°ï¼ˆä¸æ˜¯å®ä½“ï¼ï¼‰</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-meta">@Scope("prototype")</span> <span class="hljs-comment">// æ¯æ¬¡éœ€è¦æ–°å®ä¾‹</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CreateOrderCommand</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Command</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> OrderReceiver receiver;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> OrderDTO orderData; <span class="hljs-comment">// åªå­˜å¿…è¦å‚æ•°</span>
    <span class="hljs-keyword">private</span> Long createdOrderId; <span class="hljs-comment">// ç”¨äº undo</span>

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">CreateOrderCommand</span><span class="hljs-params">(OrderReceiver receiver, OrderDTO orderData)</span> {
        <span class="hljs-built_in">this</span>.receiver = receiver;
        <span class="hljs-built_in">this</span>.orderData = orderData;
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">execute</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// æ‰§è¡Œå¹¶è®°å½•ç»“æœï¼ˆç”¨äº undoï¼‰</span>
        <span class="hljs-type">Order</span> <span class="hljs-variable">order</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Order</span>(orderData);
        orderRepository.save(order);
        <span class="hljs-built_in">this</span>.createdOrderId = order.getId(); <span class="hljs-comment">// ä¿å­˜ ID ç”¨äºæ’¤é”€</span>
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">undo</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">if</span> (createdOrderId != <span class="hljs-literal">null</span>) {
            receiver.cancelOrder(createdOrderId);
        }
    }
}

<span class="hljs-comment">// å‘½ä»¤å·¥å‚ï¼ˆé¿å…æ‰‹åŠ¨ newï¼‰</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CommandFactory</span> {
    
    <span class="hljs-meta">@Autowired</span> <span class="hljs-keyword">private</span> OrderReceiver orderReceiver;

    <span class="hljs-keyword">public</span> Command <span class="hljs-title function_">createOrderCommand</span><span class="hljs-params">(OrderDTO dto)</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">CreateOrderCommand</span>(orderReceiver, dto);
    }
}

<span class="hljs-comment">// Invokerï¼ˆå‘½ä»¤è°ƒåº¦å™¨ï¼‰</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CommandInvoker</span> {
    
    <span class="hljs-comment">// åŒæ­¥æ‰§è¡Œ</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">execute</span><span class="hljs-params">(Command command)</span> {
        command.execute();
    }

    <span class="hljs-comment">// å¼‚æ­¥æ‰§è¡Œï¼ˆå­˜å…¥é˜Ÿåˆ—ï¼‰</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">submitAsync</span><span class="hljs-params">(OrderDTO dto)</span> {
        <span class="hljs-comment">// åªå­˜ DTO åˆ° Redisï¼ˆå¯åºåˆ—åŒ–ï¼ï¼‰</span>
        redisTemplate.opsForList().leftPush(<span class="hljs-string">"order-commands"</span>, dto);
    }

    <span class="hljs-comment">// æ¶ˆè´¹é˜Ÿåˆ—ï¼ˆåœ¨æ¶ˆè´¹è€…æœåŠ¡ä¸­ï¼‰</span>
    <span class="hljs-meta">@Scheduled(fixedDelay = 1000)</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">processQueue</span><span class="hljs-params">()</span> {
        <span class="hljs-type">OrderDTO</span> <span class="hljs-variable">dto</span> <span class="hljs-operator">=</span> redisTemplate.opsForList().rightPop(<span class="hljs-string">"order-commands"</span>, OrderDTO.class);
        <span class="hljs-keyword">if</span> (dto != <span class="hljs-literal">null</span>) {
            <span class="hljs-type">Command</span> <span class="hljs-variable">cmd</span> <span class="hljs-operator">=</span> commandFactory.createOrderCommand(dto);
            cmd.execute(); <span class="hljs-comment">// æ‰§è¡Œå‘½ä»¤</span>
        }
    }
}

<span class="hljs-meta">@RestController</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderController</span> {
    
    <span class="hljs-meta">@Autowired</span> <span class="hljs-keyword">private</span> CommandFactory commandFactory;
    <span class="hljs-meta">@Autowired</span> <span class="hljs-keyword">private</span> CommandInvoker invoker;

    <span class="hljs-meta">@PostMapping("/orders")</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">createOrder</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> OrderDTO dto)</span> {
        <span class="hljs-comment">// æ–¹å¼1ï¼šåŒæ­¥æ‰§è¡Œ + æ”¯æŒæ’¤é”€</span>
        <span class="hljs-type">Command</span> <span class="hljs-variable">cmd</span> <span class="hljs-operator">=</span> commandFactory.createOrderCommand(dto);
        invoker.execute(cmd);
        
        <span class="hljs-comment">// å¯ä¿å­˜ cmd åˆ° sessionï¼Œåç»­è°ƒç”¨ cmd.undo() æ’¤é”€</span>
        
        <span class="hljs-keyword">return</span> <span class="hljs-string">"OK"</span>;
    }

    <span class="hljs-meta">@PostMapping("/orders/async")</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">createOrderAsync</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> OrderDTO dto)</span> {
        <span class="hljs-comment">// æ–¹å¼2ï¼šå¼‚æ­¥æ‰§è¡Œ</span>
        invoker.submitAsync(dto);
        <span class="hljs-keyword">return</span> <span class="hljs-string">"Submitted"</span>;
    }
}




</code></pre>
<p>âœ…Â æ•ˆæœï¼šè¯·æ±‚å¯å­˜å‚¨ã€å¯æ’¤é”€ã€å¯å¼‚æ­¥æ‰§è¡Œã€‚</p>
<h5 data-id="heading-38">17.Â çŠ¶æ€æ¨¡å¼ï¼ˆStateï¼‰</h5>
<blockquote>
<p>éš”ç¦»å˜åŒ–ï¼šçŠ¶æ€è¡Œä¸ºå·®å¼‚<br/>
SpringÂ å®ç°ï¼šè®¢å•çŠ¶æ€æœº</p>
</blockquote>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">OrderState</span> {
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">pay</span><span class="hljs-params">(Order order)</span>;
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">ship</span><span class="hljs-params">(Order order)</span>;
}

<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PaidState</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">OrderState</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">pay</span><span class="hljs-params">(Order order)</span> { <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalStateException</span>(<span class="hljs-string">"å·²æ”¯ä»˜"</span>); }
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">ship</span><span class="hljs-params">(Order order)</span> { order.setState(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ShippedState</span>()); }
}

<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderService</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">ship</span><span class="hljs-params">(Long orderId)</span> {
        <span class="hljs-type">Order</span> <span class="hljs-variable">order</span> <span class="hljs-operator">=</span> repo.findById(orderId);
        order.getState().ship(order); <span class="hljs-comment">// çŠ¶æ€é©±åŠ¨è¡Œä¸º</span>
    }
}
</code></pre>
<p>âœ…Â æ•ˆæœï¼šé¿å…å·¨å‹Â if-elseï¼ŒçŠ¶æ€è¡Œä¸ºæ¸…æ™°éš”ç¦»ã€‚</p>
<h5 data-id="heading-39">18.Â æ¨¡æ¿æ–¹æ³•æ¨¡å¼ï¼ˆTemplateÂ Methodï¼‰</h5>
<blockquote>
<p>éš”ç¦»å˜åŒ–ï¼šç®—æ³•éª¨æ¶Â vsÂ å…·ä½“æ­¥éª¤<br/>
SpringÂ å®ç°ï¼š<code>JdbcTemplate</code>ï¼ˆæœ€ç»å…¸ï¼ï¼‰</p>
</blockquote>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DataProcessor</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">process</span><span class="hljs-params">()</span> {
        loadData();    <span class="hljs-comment">// å›ºå®š</span>
        parseData();   <span class="hljs-comment">// å›ºå®š</span>
        saveData();    <span class="hljs-comment">// é’©å­ï¼ˆå­ç±»å®ç°ï¼‰</span>
    }

    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">saveData</span><span class="hljs-params">()</span>;
}

<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CsvProcessor</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">DataProcessor</span> {
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">saveData</span><span class="hljs-params">()</span> { <span class="hljs-comment">/* ä¿å­˜ CSV */</span> }
}
</code></pre>
<p>âœ…Â æ•ˆæœï¼šå¤ç”¨æµç¨‹ï¼Œå®šåˆ¶ç»†èŠ‚ï¼Œç¬¦åˆå¼€é—­åŸåˆ™ã€‚</p>
<hr/>
<h5 data-id="heading-40">19.Â è¿­ä»£å™¨æ¨¡å¼ï¼ˆIteratorï¼‰</h5>
<blockquote>
<p>éš”ç¦»å˜åŒ–ï¼šéå†æ–¹å¼<br/>
SpringÂ å®ç°ï¼šStreamÂ APIÂ /Â Repository</p>
</blockquote>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// 1. ç”¨æˆ·ç»„ï¼ˆèšåˆå¯¹è±¡ï¼‰</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserGroup</span> {
    <span class="hljs-keyword">private</span> List&lt;User&gt; users = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addUser</span><span class="hljs-params">(User user)</span> {
        users.add(user);
    }

    <span class="hljs-comment">// å…³é”®ï¼šæä¾› iterator() æ–¹æ³•</span>
    <span class="hljs-keyword">public</span> Iterator&lt;User&gt; <span class="hljs-title function_">iterator</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> users.iterator(); <span class="hljs-comment">// è¿”å› JDK å†…ç½®çš„è¿­ä»£å™¨</span>
    }
}

<span class="hljs-comment">// 2. ä½¿ç”¨è¿­ä»£å™¨ï¼ˆå®¢æˆ·ç«¯ä¸å…³å¿ƒå†…éƒ¨ç»“æ„ï¼‰</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserService</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">processAllUsers</span><span class="hljs-params">(UserGroup group)</span> {
        <span class="hljs-comment">// æ˜¾å¼ä½¿ç”¨ Iterator</span>
        Iterator&lt;User&gt; it = group.iterator();
        <span class="hljs-keyword">while</span> (it.hasNext()) {
            <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> it.next();
            process(user);
        }
    }
}

</code></pre>
<p>âœ…Â æ•ˆæœï¼šç»Ÿä¸€è®¿é—®èšåˆå¯¹è±¡ï¼Œå®¢æˆ·ç«¯æ— éœ€çŸ¥é“å†…éƒ¨ç»“æ„ã€‚</p>
<h5 data-id="heading-41">20.Â ä¸­ä»‹è€…æ¨¡å¼ï¼ˆMediatorï¼‰</h5>
<blockquote>
<p>éš”ç¦»å˜åŒ–ï¼šå¯¹è±¡é—´å¤æ‚äº¤äº’<br/>
SpringÂ å®ç°ï¼šäº‹ä»¶æ€»çº¿Â /Â æœåŠ¡åè°ƒ</p>
</blockquote>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ç”¨æˆ·ï¼ˆColleagueï¼‰â€”â€” å®ƒä»¬æœ¬æ¥æƒ³ç›´æ¥é€šä¿¡ï¼</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span> {
    <span class="hljs-keyword">private</span> String name;
    <span class="hljs-keyword">private</span> ChatRoomMediator mediator; <span class="hljs-comment">// åªä¾èµ–ä¸­ä»‹è€…</span>

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">User</span><span class="hljs-params">(String name, ChatRoomMediator mediator)</span> {
        <span class="hljs-built_in">this</span>.name = name;
        <span class="hljs-built_in">this</span>.mediator = mediator;
    }

    <span class="hljs-comment">// å‘æ¶ˆæ¯ï¼ˆä¸ç›´æ¥å‘ç»™å…¶ä»–äººï¼ï¼‰</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">send</span><span class="hljs-params">(String msg)</span> {
        mediator.sendMessage(msg, <span class="hljs-built_in">this</span>);
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">receive</span><span class="hljs-params">(String msg)</span> {
        System.out.println(name + <span class="hljs-string">" æ”¶åˆ°: "</span> + msg);
    }
}

<span class="hljs-comment">// ä¸­ä»‹è€…ï¼ˆMediatorï¼‰â€”â€” åè°ƒé€šä¿¡</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ChatRoomMediator</span> {
    <span class="hljs-keyword">private</span> List&lt;User&gt; users = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addUser</span><span class="hljs-params">(User user)</span> {
        users.add(user);
    }

    <span class="hljs-comment">// å…³é”®ï¼šä¸­ä»‹è€…å†³å®šè°æ”¶åˆ°æ¶ˆæ¯</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">sendMessage</span><span class="hljs-params">(String msg, User sender)</span> {
        <span class="hljs-keyword">for</span> (User user : users) {
            <span class="hljs-keyword">if</span> (user != sender) { <span class="hljs-comment">// ä¸å‘ç»™è‡ªå·±</span>
                user.receive(sender.getName() + <span class="hljs-string">": "</span> + msg);
            }
        }
    }
}

<span class="hljs-type">ChatRoomMediator</span> <span class="hljs-variable">chat</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ChatRoomMediator</span>();

<span class="hljs-type">User</span> <span class="hljs-variable">alice</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(<span class="hljs-string">"Alice"</span>, chat);
<span class="hljs-type">User</span> <span class="hljs-variable">bob</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(<span class="hljs-string">"Bob"</span>, chat);

chat.addUser(alice);
chat.addUser(bob);

alice.send(<span class="hljs-string">"ä½ å¥½ï¼"</span>); 
<span class="hljs-comment">// è¾“å‡º: Bob æ”¶åˆ°: Alice: ä½ å¥½ï¼</span>

</code></pre>
<p>âœ…Â æ•ˆæœï¼šå¯¹è±¡ä¸ç›´æ¥é€šä¿¡ï¼Œé™ä½è€¦åˆï¼Œä¾¿äºæµ‹è¯•ã€‚</p>
<h5 data-id="heading-42">21.Â å¤‡å¿˜å½•æ¨¡å¼ï¼ˆMementoï¼‰</h5>
<blockquote>
<p>éš”ç¦»å˜åŒ–ï¼šå†…éƒ¨çŠ¶æ€ä¿å­˜/æ¢å¤<br/>
SpringÂ å®ç°ï¼šè¡¨å•è‰ç¨¿</p>
</blockquote>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// 1. è¦ä¿å­˜çŠ¶æ€çš„å¯¹è±¡ï¼ˆæ¯”å¦‚è®¢å•ï¼‰</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Order</span> {
    <span class="hljs-type">String</span> <span class="hljs-variable">status</span> <span class="hljs-operator">=</span> <span class="hljs-string">"è‰ç¨¿"</span>;

    <span class="hljs-comment">// ä¿å­˜å½“å‰çŠ¶æ€</span>
    <span class="hljs-keyword">public</span> Memento <span class="hljs-title function_">save</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Memento</span>(status);
    }

    <span class="hljs-comment">// æ¢å¤åˆ°ä¹‹å‰çš„çŠ¶æ€</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">restore</span><span class="hljs-params">(Memento m)</span> {
        <span class="hljs-built_in">this</span>.status = m.status;
    }
}

<span class="hljs-comment">// 2. å¤‡å¿˜å½•ï¼ˆå¿«ç…§ï¼‰</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Memento</span> {
    String status;
    Memento(String status) {
        <span class="hljs-built_in">this</span>.status = status;
    }
}

<span class="hljs-comment">// 3. ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">Order</span> <span class="hljs-variable">order</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Order</span>();

        <span class="hljs-comment">// 1. ä¿å­˜å½“å‰çŠ¶æ€ï¼ˆè‰ç¨¿ï¼‰</span>
        <span class="hljs-type">Memento</span> <span class="hljs-variable">draft</span> <span class="hljs-operator">=</span> order.save();

        <span class="hljs-comment">// 2. ä¿®æ”¹çŠ¶æ€</span>
        order.status = <span class="hljs-string">"å·²æäº¤"</span>;
        System.out.println(<span class="hljs-string">"å½“å‰çŠ¶æ€: "</span> + order.status); <span class="hljs-comment">// å·²æäº¤</span>

        <span class="hljs-comment">// 3. æ¢å¤åˆ°è‰ç¨¿</span>
        order.restore(draft);
        System.out.println(<span class="hljs-string">"æ¢å¤å: "</span> + order.status); <span class="hljs-comment">// è‰ç¨¿</span>
    }
}

</code></pre>
<p>âœ…Â æ•ˆæœï¼šæ”¯æŒå›æ»šã€è‰ç¨¿ã€å¿«ç…§ï¼Œä¸ç ´åå°è£…æ€§ã€‚</p>
<h5 data-id="heading-43">22.Â è®¿é—®è€…æ¨¡å¼ï¼ˆVisitorï¼‰</h5>
<blockquote>
<p>éš”ç¦»å˜åŒ–ï¼šæ–°æ“ä½œÂ vsÂ å¯¹è±¡ç»“æ„<br/>
SpringÂ å®ç°ï¼šæŠ¥è¡¨ç”Ÿæˆ</p>
</blockquote>
<ul>
<li>
<p>Elementï¼ˆå…ƒç´ ï¼‰ï¼šä½ çš„æ•°æ®ç»“æ„ï¼ˆæ¯”å¦‚è®¢å•ã€ç”¨æˆ·ã€å•†å“ï¼‰</p>
</li>
<li>
<p>Visitorï¼ˆè®¿é—®è€…ï¼‰ï¼šæƒ³å¯¹è¿™äº›æ•°æ®åšä¸åŒæ“ä½œçš„äººï¼ˆæ¯”å¦‚ç”ŸæˆÂ PDFã€å‘é‚®ä»¶ã€ç»Ÿè®¡æŠ¥è¡¨ï¼‰</p>
</li>
</ul>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// 1.å®šä¹‰â€œæ•°æ®â€ï¼ˆElementï¼‰</span>
<span class="hljs-comment">// æ‰€æœ‰èƒ½è¢«è®¿é—®çš„æ•°æ®éƒ½è¦å®ç°è¿™ä¸ªæ¥å£</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Element</span> {
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">accept</span><span class="hljs-params">(Visitor visitor)</span>; <span class="hljs-comment">// æ¥å—è®¿é—®è€…</span>
}

<span class="hljs-comment">// è®¢å•æ•°æ®</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Order</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Element</span> {
    <span class="hljs-keyword">private</span> String id;
    <span class="hljs-keyword">private</span> <span class="hljs-type">double</span> amount;

    <span class="hljs-comment">// å…³é”®ï¼šæŠŠè‡ªå·±äº¤ç»™è®¿é—®è€…</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">accept</span><span class="hljs-params">(Visitor visitor)</span> {
        visitor.visit(<span class="hljs-built_in">this</span>); <span class="hljs-comment">// æ³¨æ„ï¼šthis æ˜¯ Order ç±»å‹ï¼</span>
    }
    
    <span class="hljs-comment">// getter...</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getId</span><span class="hljs-params">()</span> { <span class="hljs-keyword">return</span> id; }
    <span class="hljs-keyword">public</span> <span class="hljs-type">double</span> <span class="hljs-title function_">getAmount</span><span class="hljs-params">()</span> { <span class="hljs-keyword">return</span> amount; }
}

<span class="hljs-comment">// 2.å®šä¹‰â€œæ“ä½œâ€ï¼ˆVisitorï¼‰</span>
<span class="hljs-comment">// æ‰€æœ‰æ“ä½œéƒ½è¦å®ç°è¿™ä¸ªæ¥å£</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Visitor</span> {
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">visit</span><span class="hljs-params">(Order order)</span>; <span class="hljs-comment">// ä¸“é—¨å¤„ç† Order</span>
    <span class="hljs-comment">// å¦‚æœè¿˜æœ‰ Userï¼Œå°±åŠ  void visit(User user);</span>
}

<span class="hljs-comment">// æ“ä½œ1ï¼šç”Ÿæˆ PDF æŠ¥è¡¨</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PdfReportVisitor</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Visitor</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">visit</span><span class="hljs-params">(Order order)</span> {
        System.out.println(<span class="hljs-string">"ç”Ÿæˆ PDF æŠ¥è¡¨: è®¢å• "</span> + order.getId());
        <span class="hljs-comment">// å®é™…ï¼šç”¨ iText ç”Ÿæˆ PDF</span>
    }
}

<span class="hljs-comment">// æ“ä½œ2ï¼šå‘é€é€šçŸ¥ï¼ˆæ–°å¢ï¼ï¼‰</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SmsVisitor</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Visitor</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">visit</span><span class="hljs-params">(Order order)</span> {
        System.out.println(<span class="hljs-string">"å‘çŸ­ä¿¡é€šçŸ¥: è®¢å•é‡‘é¢ "</span> + order.getAmount());
    }
}


<span class="hljs-comment">// 3. ä½¿ç”¨æ–¹å¼</span>
<span class="hljs-type">Order</span> <span class="hljs-variable">order</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Order</span>(<span class="hljs-string">"1001"</span>, <span class="hljs-number">99.9</span>);

<span class="hljs-comment">// æƒ³ç”Ÿæˆ PDFï¼Ÿ</span>
<span class="hljs-type">PdfReportVisitor</span> <span class="hljs-variable">pdfVisitor</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">PdfReportVisitor</span>();
order.accept(pdfVisitor); <span class="hljs-comment">// è¾“å‡ºï¼šç”Ÿæˆ PDF æŠ¥è¡¨: è®¢å• 1001</span>

<span class="hljs-comment">// æƒ³å‘çŸ­ä¿¡ï¼Ÿ</span>
<span class="hljs-type">SmsVisitor</span> <span class="hljs-variable">smsVisitor</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SmsVisitor</span>();
order.accept(smsVisitor); <span class="hljs-comment">// è¾“å‡ºï¼šå‘çŸ­ä¿¡é€šçŸ¥: è®¢å•é‡‘é¢ 99.9</span>

</code></pre>
<p>âœ…Â æ•ˆæœï¼šæ–°å¢æŠ¥è¡¨ç±»å‹ä¸æ”¹Â OrderÂ ç±»ï¼Œç¬¦åˆå¼€é—­åŸåˆ™ã€‚</p>
<h5 data-id="heading-44">23.Â è§£é‡Šå™¨æ¨¡å¼ï¼ˆInterpreterï¼‰</h5>
<blockquote>
<p>éš”ç¦»å˜åŒ–ï¼šè¯­æ³•è§„åˆ™è§£æ<br/>
SpringÂ å‹å¥½ï¼šç”¨Â <code>@Component</code>Â ç®¡ç†åŸºç¡€è§„åˆ™</p>
</blockquote>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// 1. è¡¨è¾¾å¼æ¥å£ï¼ˆè§£é‡Šå™¨æ ¸å¿ƒï¼‰</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">RuleExpression</span> {
    <span class="hljs-type">boolean</span> <span class="hljs-title function_">interpret</span><span class="hljs-params">(User user)</span>;
}

<span class="hljs-comment">// 2. åŸºç¡€æ¡ä»¶ï¼šå¹´é¾„ &gt; 18</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AgeRule</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">RuleExpression</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">interpret</span><span class="hljs-params">(User user)</span> {
        <span class="hljs-keyword">return</span> user.getAge() &gt; <span class="hljs-number">18</span>;
    }
}

<span class="hljs-comment">// 3. åŸºç¡€æ¡ä»¶ï¼šæ˜¯ VIP</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">VipRule</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">RuleExpression</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">interpret</span><span class="hljs-params">(User user)</span> {
        <span class="hljs-keyword">return</span> user.isVip();
    }
}

<span class="hljs-comment">// 4. ç»„åˆè§„åˆ™ï¼šAND</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AndRule</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">RuleExpression</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> RuleExpression left, right;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">AndRule</span><span class="hljs-params">(RuleExpression left, RuleExpression right)</span> {
        <span class="hljs-built_in">this</span>.left = left;
        <span class="hljs-built_in">this</span>.right = right;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">interpret</span><span class="hljs-params">(User user)</span> {
        <span class="hljs-keyword">return</span> left.interpret(user) &amp;&amp; right.interpret(user);
    }
}

<span class="hljs-comment">// 5. ä½¿ç”¨ï¼ˆåœ¨ Service ä¸­ç»„åˆè§„åˆ™ï¼‰</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserService</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> AgeRule ageRule;
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> VipRule vipRule;

    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">canAccessPremium</span><span class="hljs-params">(User user)</span> {
        <span class="hljs-comment">// æ‰‹åŠ¨ç»„åˆï¼šage &gt; 18 AND vip == true</span>
        <span class="hljs-type">RuleExpression</span> <span class="hljs-variable">rule</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AndRule</span>(ageRule, vipRule);
        <span class="hljs-keyword">return</span> rule.interpret(user);
    }
}
</code></pre>
<p>âœ…Â æ•ˆæœï¼šâ€œç»„åˆå¯¹è±¡Â +Â interpret()â€Â å°±æ˜¯è§£é‡Šå™¨æ¨¡å¼çš„æ ¸å¿ƒæ€æƒ³ã€‚</p>
<h3 data-id="heading-45">äº”ã€æ€»ç»“ï¼šè®¾è®¡æ¨¡å¼ä¸æ˜¯é“¶å¼¹ï¼Œè€Œæ˜¯â€œéš”ç¦»å˜åŒ–â€çš„å·¥å…·ç®±</h3>
<h4 data-id="heading-46">ğŸ“ŒÂ è®°ä½ä¸‰å¥è¯ï¼š</h4>
<ol>
<li>
<p>â€œä¼šå˜çš„â€å’Œâ€œä¸å˜çš„â€å¿…é¡»åˆ†å¼€</p>
<ul>
<li>
<p>æ”¯ä»˜æ–¹å¼ä¼šå˜Â â†’Â æŠ½æˆç­–ç•¥</p>
</li>
<li>
<p>æ—¥å¿—é€»è¾‘ä¼šå˜Â â†’Â ç”¨Â AOPÂ ä»£ç†</p>
</li>
<li>
<p>é€šçŸ¥æ¸ é“ä¼šå˜Â â†’Â ç”¨è§‚å¯Ÿè€…</p>
</li>
</ul>
</li>
<li>
<p>SOLIDÂ æ˜¯éš”ç¦»å˜åŒ–çš„æ“ä½œæ‰‹å†Œ</p>
<ul>
<li>
<p>å•ä¸€èŒè´£Â â†’Â åˆ«è®©ä¸€ä¸ªç±»å¹²å¤ªå¤š</p>
</li>
<li>
<p>å¼€é—­åŸåˆ™Â â†’Â æ–°éœ€æ±‚åˆ«æ”¹è€ä»£ç </p>
</li>
<li>
<p>ä¾èµ–å€’ç½®Â â†’Â ä¾èµ–æ¥å£ï¼Œä¸ä¾èµ–å®ç°</p>
</li>
</ul>
</li>
<li>
<p>SpringÂ BootÂ å¤©ç„¶æ”¯æŒè®¾è®¡æ¨¡å¼</p>
<ul>
<li>
<p><code>@Component</code>Â =Â å·¥å‚</p>
</li>
<li>
<p>AOPÂ =Â ä»£ç†</p>
</li>
<li>
<p>äº‹ä»¶Â =Â è§‚å¯Ÿè€…</p>
</li>
<li>
<p><code>@Bean</code>Â =Â ç­–ç•¥æ³¨å†Œ</p>
</li>
</ul>
</li>
</ol>
<p>â€œå¥½çš„ä»£ç ï¼Œä¸æ˜¯å†™å‡ºæ¥çš„ï¼Œè€Œæ˜¯â€˜éš”ç¦»â€™å‡ºæ¥çš„ã€‚â€</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è®©JDK 8æˆå°±Webç¥è¯çš„æ ¸å¿ƒç‰¹æ€§]]></title>    <link>https://juejin.cn/post/7605810996125515810</link>    <guid>https://juejin.cn/post/7605810996125515810</guid>    <pubDate>2026-02-13T05:45:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605810996125515810" data-draft-id="7605542907119386676" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è®©JDK 8æˆå°±Webç¥è¯çš„æ ¸å¿ƒç‰¹æ€§"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-02-13T05:45:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ—¥æœˆäº‘æ£ "/> <meta itemprop="url" content="https://juejin.cn/user/420442283981488"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è®©JDK 8æˆå°±Webç¥è¯çš„æ ¸å¿ƒç‰¹æ€§
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/420442283981488/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ—¥æœˆäº‘æ£ 
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-13T05:45:19.000Z" title="Fri Feb 13 2026 05:45:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">JDK 8 ç‰¹æ€§è¯¦è§£</h2>
<h3 data-id="heading-1">1. æ¦‚è¿°</h3>
<p>JDK 8ï¼ˆ2014å¹´3æœˆå‘å¸ƒï¼‰æ˜¯Javaå†å²ä¸Šæœ€é‡è¦çš„ç‰ˆæœ¬ä¹‹ä¸€ï¼Œå¼•å…¥äº†å¤§é‡é©å‘½æ€§çš„ç‰¹æ€§ï¼Œå½»åº•æ”¹å˜äº†Javaçš„ç¼–ç¨‹æ–¹å¼ã€‚è¿™äº›ç‰¹æ€§ä¸ä»…ä½¿ä»£ç æ›´ç®€æ´ã€æ›´æ˜“è¯»ï¼Œè¿˜æ˜¾è‘—æå‡äº†æ€§èƒ½å’Œå¼€å‘æ•ˆç‡ã€‚</p>
<h3 data-id="heading-2">2. æ ¸å¿ƒç‰¹æ€§è¯¦è§£</h3>
<h4 data-id="heading-3">2.1 Lambdaè¡¨è¾¾å¼</h4>
<p><strong>ç‰¹æ€§è¯´æ˜ï¼š</strong></p>
<ul>
<li>Lambdaè¡¨è¾¾å¼å…è®¸å°†å‡½æ•°ä½œä¸ºæ–¹æ³•å‚æ•°ä¼ é€’ï¼Œæ”¯æŒå‡½æ•°å¼ç¼–ç¨‹é£æ ¼</li>
<li>å‡å°‘äº†åŒ¿åå†…éƒ¨ç±»çš„æ¨¡æ¿ä»£ç ï¼Œä½¿ä»£ç æ›´ç®€æ´</li>
<li>ç¼–è¯‘æ—¶ç”Ÿæˆ <code>invokedynamic</code> æŒ‡ä»¤ï¼Œæ¯”åŒ¿åå†…éƒ¨ç±»æ›´é«˜æ•ˆ</li>
</ul>
<p><strong>è¯­æ³•æ ¼å¼ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java">(å‚æ•°åˆ—è¡¨) -&gt; è¡¨è¾¾å¼æˆ–ä»£ç å—
</code></pre>
<p><strong>ä»£ç ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä¼ ç»Ÿæ–¹å¼ - åŒ¿åå†…éƒ¨ç±»</span>
<span class="hljs-type">Runnable</span> <span class="hljs-variable">traditionalRunnable</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Runnable</span>() {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> {
        System.out.println(<span class="hljs-string">"ä¼ ç»Ÿæ–¹å¼æ‰§è¡Œ"</span>);
    }
};

<span class="hljs-comment">// Lambdaæ–¹å¼ - æ›´ç®€æ´</span>
<span class="hljs-type">Runnable</span> <span class="hljs-variable">lambdaRunnable</span> <span class="hljs-operator">=</span> () -&gt; System.out.println(<span class="hljs-string">"Lambdaæ–¹å¼æ‰§è¡Œ"</span>);

<span class="hljs-comment">// æ‰§è¡Œ</span>
traditionalRunnable.run();  <span class="hljs-comment">// è¾“å‡º: ä¼ ç»Ÿæ–¹å¼æ‰§è¡Œ</span>
lambdaRunnable.run();       <span class="hljs-comment">// è¾“å‡º: Lambdaæ–¹å¼æ‰§è¡Œ</span>

<span class="hljs-comment">// é›†åˆæ’åºçš„Lambdaåº”ç”¨</span>
List&lt;String&gt; names = Arrays.asList(<span class="hljs-string">"å¼ ä¸‰"</span>, <span class="hljs-string">"æå››"</span>, <span class="hljs-string">"ç‹äº”"</span>, <span class="hljs-string">"èµµå…­"</span>);

<span class="hljs-comment">// Lambdaæ’åºæ–¹å¼</span>
Collections.sort(names, (a, b) -&gt; a.compareTo(b));

<span class="hljs-comment">// æ›´ç®€æ´çš„æ–¹æ³•å¼•ç”¨</span>
Collections.sort(names, String::compareTo);
</code></pre>
<p><strong>æ€§èƒ½ä¼˜åŠ¿ï¼š</strong></p>
<ul>
<li>é¿å…äº†åŒ¿åå†…éƒ¨ç±»çš„å¯¹è±¡åˆ›å»ºå¼€é”€</li>
<li>å‡å°‘äº†å­—èŠ‚ç å¤§å°</li>
<li>è¿è¡Œæ—¶é€šè¿‡ <code>invokedynamic</code> æŒ‡ä»¤åŠ¨æ€é“¾æ¥ï¼Œæ‰§è¡Œæ•ˆç‡æ›´é«˜</li>
<li>å†…å­˜å ç”¨æ›´å°ï¼Œåƒåœ¾å›æ”¶å‹åŠ›å‡è½»</li>
</ul>
<p><strong>é€‚ç”¨åœºæ™¯ï¼š</strong></p>
<ul>
<li>äº‹ä»¶å¤„ç†</li>
<li>é›†åˆæ“ä½œ</li>
<li>å‡½æ•°å¼æ¥å£å®ç°</li>
<li>å¹¶è¡Œå¤„ç†</li>
</ul>
<h4 data-id="heading-4">2.2 Stream API</h4>
<p><strong>ç‰¹æ€§è¯´æ˜ï¼š</strong></p>
<ul>
<li>æ”¯æŒé“¾å¼æ“ä½œçš„å‡½æ•°å¼æ•°æ®å¤„ç†</li>
<li>æä¾›äº†ä¸°å¯Œçš„ä¸­é—´æ“ä½œå’Œç»ˆç«¯æ“ä½œ</li>
<li>æ”¯æŒä¸²è¡Œå’Œå¹¶è¡Œå¤„ç†</li>
<li>å»¶è¿Ÿæ‰§è¡Œï¼Œåªæœ‰åœ¨ç»ˆç«¯æ“ä½œæ—¶æ‰ä¼šçœŸæ­£æ‰§è¡Œ</li>
</ul>
<p><strong>æ ¸å¿ƒæ“ä½œç±»å‹ï¼š</strong></p>
<ul>
<li><strong>ä¸­é—´æ“ä½œ</strong>ï¼šè¿”å›Streamï¼Œå¯é“¾å¼è°ƒç”¨ï¼ˆå¦‚filterã€mapã€sortedï¼‰</li>
<li><strong>ç»ˆç«¯æ“ä½œ</strong>ï¼šè¿”å›éStreamç»“æœï¼Œè§¦å‘å®é™…æ‰§è¡Œï¼ˆå¦‚collectã€forEachã€reduceï¼‰</li>
</ul>
<p><strong>ä»£ç ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java">List&lt;Integer&gt; numbers = Arrays.asList(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>, <span class="hljs-number">10</span>);

<span class="hljs-comment">// Streamæ–¹å¼ï¼šç­›é€‰å¶æ•°å¹¶è®¡ç®—å¹³æ–¹</span>
List&lt;Integer&gt; resultStream = numbers.stream()
        .filter(n -&gt; n % <span class="hljs-number">2</span> == <span class="hljs-number">0</span>)      <span class="hljs-comment">// è¿‡æ»¤å¶æ•°</span>
        .map(n -&gt; n * n)              <span class="hljs-comment">// è®¡ç®—å¹³æ–¹</span>
        .collect(Collectors.toList()); <span class="hljs-comment">// æ”¶é›†ç»“æœ</span>

System.out.println(<span class="hljs-string">"Streamæ–¹å¼ç»“æœ: "</span> + resultStream); <span class="hljs-comment">// è¾“å‡º: [4, 16, 36, 64, 100]</span>

<span class="hljs-comment">// ç»Ÿè®¡æ“ä½œ</span>
<span class="hljs-type">IntSummaryStatistics</span> <span class="hljs-variable">stats</span> <span class="hljs-operator">=</span> numbers.stream()
        .mapToInt(Integer::intValue)
        .summaryStatistics();

System.out.println(<span class="hljs-string">"ç»Ÿè®¡ä¿¡æ¯: "</span> + stats);
System.out.println(<span class="hljs-string">"å¹³å‡å€¼: "</span> + stats.getAverage());
System.out.println(<span class="hljs-string">"æœ€å¤§å€¼: "</span> + stats.getMax());

<span class="hljs-comment">// åˆ†ç»„æ“ä½œ</span>
Map&lt;String, List&lt;Integer&gt;&gt; grouped = numbers.stream()
        .collect(Collectors.groupingBy(
                n -&gt; n % <span class="hljs-number">2</span> == <span class="hljs-number">0</span> ? <span class="hljs-string">"å¶æ•°"</span> : <span class="hljs-string">"å¥‡æ•°"</span>
        ));

System.out.println(<span class="hljs-string">"åˆ†ç»„ç»“æœ: "</span> + grouped); <span class="hljs-comment">// è¾“å‡º: {å¥‡æ•°=[1, 3, 5, 7, 9], å¶æ•°=[2, 4, 6, 8, 10]}</span>
</code></pre>
<p><strong>å¹¶è¡Œæµå¤„ç†ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// å¹¶è¡Œæµå¤„ç†</span>
List&lt;Integer&gt; parallelResult = numbers.parallelStream()
        .filter(n -&gt; n &gt; <span class="hljs-number">5</span>)
        .map(n -&gt; n * <span class="hljs-number">2</span>)
        .sorted()
        .collect(Collectors.toList());

System.out.println(<span class="hljs-string">"å¹¶è¡Œå¤„ç†ç»“æœ: "</span> + parallelResult); <span class="hljs-comment">// è¾“å‡º: [12, 14, 16, 18, 20]</span>
</code></pre>
<p><strong>æ€§èƒ½ä¼˜åŠ¿ï¼š</strong></p>
<ul>
<li>å¹¶è¡Œæµè‡ªåŠ¨åˆ©ç”¨ForkJoinPoolï¼Œå……åˆ†å‘æŒ¥å¤šæ ¸CPUæ€§èƒ½</li>
<li>æƒ°æ€§è®¡ç®—å‡å°‘äº†ä¸å¿…è¦çš„ä¸­é—´ç»“æœå­˜å‚¨</li>
<li>å†…éƒ¨è¿­ä»£æ¯”å¤–éƒ¨è¿­ä»£æ›´é«˜æ•ˆï¼Œå‡å°‘äº†å¾ªç¯å¼€é”€</li>
<li>ä¼˜åŒ–çš„æµæ°´çº¿å¤„ç†ï¼Œå‡å°‘äº†å†…å­˜è®¿é—®</li>
<li>å¯¹äºå¤§æ•°æ®é›†ï¼Œå¹¶è¡Œå¤„ç†å¯æ˜¾è‘—æå‡æ€§èƒ½</li>
</ul>
<p><strong>é€‚ç”¨åœºæ™¯ï¼š</strong></p>
<ul>
<li>å¤§æ•°æ®é›†å¤„ç†</li>
<li>å¤æ‚çš„æ•°æ®è½¬æ¢å’Œè¿‡æ»¤</li>
<li>ç»Ÿè®¡åˆ†æ</li>
<li>å¹¶è¡Œè®¡ç®—</li>
</ul>
<h4 data-id="heading-5">2.3 æ–°æ—¥æœŸæ—¶é—´API</h4>
<p><strong>ç‰¹æ€§è¯´æ˜ï¼š</strong></p>
<ul>
<li>åŸºäºISO-8601æ ‡å‡†è®¾è®¡</li>
<li>æ‰€æœ‰ç±»éƒ½æ˜¯ä¸å¯å˜çš„ï¼Œçº¿ç¨‹å®‰å…¨</li>
<li>æ¸…æ™°çš„APIè®¾è®¡ï¼ŒåŒºåˆ†æ—¥æœŸã€æ—¶é—´ã€æ—¥æœŸæ—¶é—´ã€æ—¶åŒºç­‰æ¦‚å¿µ</li>
<li>æ”¯æŒæµç•…çš„æ–¹æ³•é“¾è°ƒç”¨</li>
</ul>
<p><strong>æ ¸å¿ƒç±»ï¼š</strong></p>
<ul>
<li><code>LocalDate</code>ï¼šè¡¨ç¤ºæ—¥æœŸï¼ˆå¹´ã€æœˆã€æ—¥ï¼‰</li>
<li><code>LocalTime</code>ï¼šè¡¨ç¤ºæ—¶é—´ï¼ˆæ—¶ã€åˆ†ã€ç§’ã€çº³ç§’ï¼‰</li>
<li><code>LocalDateTime</code>ï¼šè¡¨ç¤ºæ—¥æœŸæ—¶é—´</li>
<li><code>ZonedDateTime</code>ï¼šè¡¨ç¤ºå¸¦æ—¶åŒºçš„æ—¥æœŸæ—¶é—´</li>
<li><code>Duration</code>ï¼šè¡¨ç¤ºæ—¶é—´é—´éš”</li>
<li><code>Period</code>ï¼šè¡¨ç¤ºæ—¥æœŸé—´éš”</li>
<li><code>DateTimeFormatter</code>ï¼šæ—¥æœŸæ—¶é—´æ ¼å¼åŒ–</li>
</ul>
<p><strong>ä»£ç ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æ–°ç‰ˆæ—¥æœŸæ—¶é—´API</span>
<span class="hljs-type">LocalDate</span> <span class="hljs-variable">currentDate</span> <span class="hljs-operator">=</span> LocalDate.now();
<span class="hljs-type">LocalTime</span> <span class="hljs-variable">currentTime</span> <span class="hljs-operator">=</span> LocalTime.now();
<span class="hljs-type">LocalDateTime</span> <span class="hljs-variable">currentDateTime</span> <span class="hljs-operator">=</span> LocalDateTime.now();

System.out.println(<span class="hljs-string">"å½“å‰æ—¥æœŸ: "</span> + currentDate);
System.out.println(<span class="hljs-string">"å½“å‰æ—¶é—´: "</span> + currentTime);
System.out.println(<span class="hljs-string">"å½“å‰æ—¥æœŸæ—¶é—´: "</span> + currentDateTime);

<span class="hljs-comment">// æ—¥æœŸæ“ä½œ</span>
<span class="hljs-type">LocalDate</span> <span class="hljs-variable">tomorrow</span> <span class="hljs-operator">=</span> currentDate.plusDays(<span class="hljs-number">1</span>);
<span class="hljs-type">LocalDate</span> <span class="hljs-variable">nextWeek</span> <span class="hljs-operator">=</span> currentDate.plusWeeks(<span class="hljs-number">1</span>);
<span class="hljs-type">LocalDate</span> <span class="hljs-variable">nextMonth</span> <span class="hljs-operator">=</span> currentDate.plusMonths(<span class="hljs-number">1</span>);

System.out.println(<span class="hljs-string">"æ˜å¤©: "</span> + tomorrow);
System.out.println(<span class="hljs-string">"ä¸‹å‘¨: "</span> + nextWeek);
System.out.println(<span class="hljs-string">"ä¸‹æœˆ: "</span> + nextMonth);

<span class="hljs-comment">// æ—¥æœŸæ¯”è¾ƒ</span>
<span class="hljs-type">boolean</span> <span class="hljs-variable">isBefore</span> <span class="hljs-operator">=</span> tomorrow.isBefore(nextWeek);
System.out.println(<span class="hljs-string">"æ˜å¤©æ˜¯å¦åœ¨ä¸‹å‘¨ä¹‹å‰: "</span> + isBefore); <span class="hljs-comment">// è¾“å‡º: true</span>

<span class="hljs-comment">// æ—¥æœŸæ ¼å¼åŒ–</span>
<span class="hljs-type">DateTimeFormatter</span> <span class="hljs-variable">formatter</span> <span class="hljs-operator">=</span> DateTimeFormatter.ofPattern(<span class="hljs-string">"yyyy-MM-dd HH:mm:ss"</span>);
<span class="hljs-type">String</span> <span class="hljs-variable">formatted</span> <span class="hljs-operator">=</span> currentDateTime.format(formatter);
System.out.println(<span class="hljs-string">"æ ¼å¼åŒ–æ—¥æœŸ: "</span> + formatted);

<span class="hljs-comment">// æ—¶åŒºå¤„ç†</span>
<span class="hljs-type">ZonedDateTime</span> <span class="hljs-variable">zonedDateTime</span> <span class="hljs-operator">=</span> ZonedDateTime.now(ZoneId.of(<span class="hljs-string">"America/New_York"</span>));
System.out.println(<span class="hljs-string">"çº½çº¦æ—¶é—´: "</span> + zonedDateTime);

<span class="hljs-comment">// æŒç»­æ—¶é—´è®¡ç®—</span>
<span class="hljs-type">LocalDateTime</span> <span class="hljs-variable">start</span> <span class="hljs-operator">=</span> LocalDateTime.of(<span class="hljs-number">2024</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);
<span class="hljs-type">LocalDateTime</span> <span class="hljs-variable">end</span> <span class="hljs-operator">=</span> LocalDateTime.now();
<span class="hljs-type">Duration</span> <span class="hljs-variable">duration</span> <span class="hljs-operator">=</span> Duration.between(start, end);
System.out.println(<span class="hljs-string">"ä»2024å¹´å¼€å§‹å·²ç»è¿‡å»äº†: "</span> + duration.toDays() + <span class="hljs-string">" å¤©"</span>);
</code></pre>
<p><strong>æ€§èƒ½ä¼˜åŠ¿ï¼š</strong></p>
<ul>
<li>ä¸å¯å˜è®¾è®¡é¿å…äº†çº¿ç¨‹åŒæ­¥å¼€é”€</li>
<li>æ¯”æ—§ç‰ˆDate/Calendaræ›´é«˜æ•ˆï¼Œå‡å°‘äº†å¯¹è±¡åˆ›å»º</li>
<li>ä¼˜åŒ–çš„æ ¼å¼åŒ–å’Œè§£æç®—æ³•</li>
<li>æ—¶åŒºå¤„ç†æ›´é«˜æ•ˆï¼ŒåŸºäºIANAæ—¶åŒºæ•°æ®åº“</li>
<li>æ¸…æ™°çš„APIè®¾è®¡å‡å°‘äº†é”™è¯¯ä½¿ç”¨</li>
</ul>
<p><strong>é€‚ç”¨åœºæ™¯ï¼š</strong></p>
<ul>
<li>æ—¥æœŸæ—¶é—´è®¡ç®—å’Œæ¯”è¾ƒ</li>
<li>æ—¶åŒºè½¬æ¢</li>
<li>æ—¥æœŸæ—¶é—´æ ¼å¼åŒ–å’Œè§£æ</li>
<li>æ—¶é—´é—´éš”è®¡ç®—</li>
</ul>
<h4 data-id="heading-6">2.4 æ¥å£é»˜è®¤æ–¹æ³•å’Œé™æ€æ–¹æ³•</h4>
<p><strong>ç‰¹æ€§è¯´æ˜ï¼š</strong></p>
<ul>
<li>å…è®¸æ¥å£ä¸­åŒ…å«å¸¦æœ‰å®ç°çš„é»˜è®¤æ–¹æ³•</li>
<li>æ”¯æŒæ¥å£æ¼”è¿›ï¼Œä¸ç ´åç°æœ‰å®ç°ç±»</li>
<li>æ¥å£ä¸­å¯ä»¥å®šä¹‰é™æ€æ–¹æ³•</li>
</ul>
<p><strong>è¯­æ³•æ ¼å¼ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java">interface æ¥å£å {
    <span class="hljs-comment">// æŠ½è±¡æ–¹æ³•</span>
    è¿”å›ç±»å‹ æ–¹æ³•å(å‚æ•°åˆ—è¡¨);
    
    <span class="hljs-comment">// é»˜è®¤æ–¹æ³•</span>
    <span class="hljs-keyword">default</span> è¿”å›ç±»å‹ æ–¹æ³•å(å‚æ•°åˆ—è¡¨) {
        <span class="hljs-comment">// å®ç°</span>
    }
    
    <span class="hljs-comment">// é™æ€æ–¹æ³•</span>
    <span class="hljs-keyword">static</span> è¿”å›ç±»å‹ æ–¹æ³•å(å‚æ•°åˆ—è¡¨) {
        <span class="hljs-comment">// å®ç°</span>
    }
}
</code></pre>
<p><strong>ä»£ç ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æ¥å£é»˜è®¤æ–¹æ³•ç¤ºä¾‹</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">Calculator</span> {
    <span class="hljs-type">int</span> <span class="hljs-title function_">add</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span>;
    <span class="hljs-type">int</span> <span class="hljs-title function_">subtract</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span>;

    <span class="hljs-comment">// é»˜è®¤æ–¹æ³• - æ¥å£å¯ä»¥æä¾›å®ç°</span>
    <span class="hljs-keyword">default</span> <span class="hljs-type">int</span> <span class="hljs-title function_">multiply</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span> {
        <span class="hljs-keyword">return</span> a * b;
    }

    <span class="hljs-comment">// å¦ä¸€ä¸ªé»˜è®¤æ–¹æ³•</span>
    <span class="hljs-keyword">default</span> <span class="hljs-type">int</span> <span class="hljs-title function_">square</span><span class="hljs-params">(<span class="hljs-type">int</span> a)</span> {
        <span class="hljs-keyword">return</span> multiply(a, a);
    }

    <span class="hljs-comment">// é™æ€æ–¹æ³• - æ¥å£ä¸­çš„å·¥å…·æ–¹æ³•</span>
    <span class="hljs-keyword">static</span> String <span class="hljs-title function_">getVersion</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-string">"Calculator v1.0"</span>;
    }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">BasicCalculator</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Calculator</span> {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">add</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span> {
        <span class="hljs-keyword">return</span> a + b;
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">subtract</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span> {
        <span class="hljs-keyword">return</span> a - b;
    }

    <span class="hljs-comment">// ä¸éœ€è¦å®ç°é»˜è®¤æ–¹æ³•ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨</span>
    <span class="hljs-comment">// ä¹Ÿå¯ä»¥é€‰æ‹©é‡å†™é»˜è®¤æ–¹æ³•</span>
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-type">Calculator</span> <span class="hljs-variable">calculator</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BasicCalculator</span>();
System.out.println(<span class="hljs-string">"åŠ æ³•: "</span> + calculator.add(<span class="hljs-number">5</span>, <span class="hljs-number">3</span>));
System.out.println(<span class="hljs-string">"å‡æ³•: "</span> + calculator.subtract(<span class="hljs-number">5</span>, <span class="hljs-number">3</span>));
System.out.println(<span class="hljs-string">"ä¹˜æ³•: "</span> + calculator.multiply(<span class="hljs-number">5</span>, <span class="hljs-number">3</span>));
System.out.println(<span class="hljs-string">"é»˜è®¤æ–¹æ³•å¹³æ–¹: "</span> + calculator.square(<span class="hljs-number">5</span>));
System.out.println(<span class="hljs-string">"é™æ€æ–¹æ³•ç‰ˆæœ¬: "</span> + Calculator.getVersion());
</code></pre>
<p><strong>æ€§èƒ½ä¼˜åŠ¿ï¼š</strong></p>
<ul>
<li>é¿å…äº†ä¸ºæ‰©å±•åŠŸèƒ½è€Œåˆ›å»ºçš„é€‚é…å™¨ç±»</li>
<li>å‡å°‘äº†ç±»å±‚æ¬¡ç»“æ„çš„å¤æ‚æ€§</li>
<li>é»˜è®¤æ–¹æ³•é€šè¿‡invokespecialæŒ‡ä»¤è°ƒç”¨ï¼Œæ‰§è¡Œæ•ˆç‡é«˜</li>
<li>æ¥å£æ¼”è¿›æ›´åŠ çµæ´»ï¼Œä¸ç ´åç°æœ‰ä»£ç </li>
</ul>
<p><strong>é€‚ç”¨åœºæ™¯ï¼š</strong></p>
<ul>
<li>æ¥å£æ‰©å±•</li>
<li>å‡½æ•°å¼æ¥å£å¢å¼º</li>
<li>å·¥å…·æ–¹æ³•å®šä¹‰</li>
<li>æ¡†æ¶è®¾è®¡</li>
</ul>
<h4 data-id="heading-7">2.5 å…¶ä»–é‡è¦ç‰¹æ€§</h4>
<h5 data-id="heading-8">2.5.1 Optionalç±»</h5>
<ul>
<li>ä¼˜é›…å¤„ç†nullå€¼ï¼Œå‡å°‘ç©ºæŒ‡é’ˆå¼‚å¸¸</li>
<li>æä¾›äº†ä¸°å¯Œçš„æ–¹æ³•é“¾æ“ä½œ</li>
<li>ä½¿ä»£ç æ›´æ¸…æ™°ï¼Œè¡¨è¾¾æ„å›¾æ›´æ˜ç¡®</li>
</ul>
<h5 data-id="heading-9">2.5.2 æ–¹æ³•å¼•ç”¨</h5>
<ul>
<li>ç®€åŒ–Lambdaè¡¨è¾¾å¼ï¼Œä½¿ä»£ç æ›´ç®€æ´</li>
<li>æ”¯æŒé™æ€æ–¹æ³•ã€å®ä¾‹æ–¹æ³•å’Œæ„é€ æ–¹æ³•å¼•ç”¨</li>
<li>æé«˜ä»£ç å¯è¯»æ€§</li>
</ul>
<h5 data-id="heading-10">2.5.3 ç±»å‹æ³¨è§£</h5>
<ul>
<li>æ”¯æŒåœ¨æ›´å¤šä½ç½®ä½¿ç”¨æ³¨è§£</li>
<li>å¢å¼ºäº†é™æ€ä»£ç åˆ†æèƒ½åŠ›</li>
<li>æé«˜äº†ä»£ç å®‰å…¨æ€§</li>
</ul>
<h3 data-id="heading-11">3. æ€§èƒ½æå‡æ€»ç»“</h3>



































<table><thead><tr><th>ç‰¹æ€§</th><th>æ€§èƒ½æå‡</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>Lambdaè¡¨è¾¾å¼</td><td>å‡å°‘å¯¹è±¡åˆ›å»ºå¼€é”€ï¼Œæ‰§è¡Œæ•ˆç‡æ›´é«˜</td><td>äº‹ä»¶å¤„ç†ã€é›†åˆæ“ä½œ</td></tr><tr><td>Stream API</td><td>å¹¶è¡Œå¤„ç†åˆ©ç”¨å¤šæ ¸CPUï¼Œæƒ°æ€§è®¡ç®—å‡å°‘å†…å­˜ä½¿ç”¨</td><td>å¤§æ•°æ®é›†å¤„ç†ã€ç»Ÿè®¡åˆ†æ</td></tr><tr><td>æ–°æ—¥æœŸæ—¶é—´API</td><td>ä¸å¯å˜è®¾è®¡é¿å…çº¿ç¨‹åŒæ­¥å¼€é”€ï¼Œæ›´é«˜æ•ˆçš„å®ç°</td><td>æ—¥æœŸæ—¶é—´å¤„ç†ã€æ—¶åŒºè½¬æ¢</td></tr><tr><td>æ¥å£é»˜è®¤æ–¹æ³•</td><td>å‡å°‘é€‚é…å™¨ç±»ï¼Œæ‰§è¡Œæ•ˆç‡é«˜</td><td>æ¥å£æ‰©å±•ã€æ¡†æ¶è®¾è®¡</td></tr><tr><td>å¹¶è¡Œæµ</td><td>è‡ªåŠ¨åˆ©ç”¨å¤šæ ¸å¤„ç†å™¨ï¼Œæ˜¾è‘—æå‡å¤§æ•°æ®å¤„ç†é€Ÿåº¦</td><td>CPUå¯†é›†å‹ä»»åŠ¡ã€å¤§è§„æ¨¡æ•°æ®å¤„ç†</td></tr></tbody></table>
<h3 data-id="heading-12">4. æœ€ä½³å®è·µ</h3>
<h4 data-id="heading-13">4.1 Lambdaè¡¨è¾¾å¼ä½¿ç”¨å»ºè®®</h4>
<ul>
<li>ä¿æŒLambdaä½“ç®€æ´ï¼Œé¿å…å¤æ‚é€»è¾‘</li>
<li>ä¼˜å…ˆä½¿ç”¨æ–¹æ³•å¼•ç”¨æé«˜å¯è¯»æ€§</li>
<li>æ³¨æ„å˜é‡ä½œç”¨åŸŸï¼Œé¿å…ä¿®æ”¹å¤–éƒ¨å˜é‡</li>
</ul>
<h4 data-id="heading-14">4.2 Stream APIä½¿ç”¨å»ºè®®</h4>
<ul>
<li>å¯¹äºå°æ•°æ®é›†ï¼Œä½¿ç”¨ä¸²è¡Œæµå³å¯</li>
<li>å¯¹äºå¤§æ•°æ®é›†ï¼ˆ thousands+ å…ƒç´ ï¼‰ï¼Œè€ƒè™‘ä½¿ç”¨å¹¶è¡Œæµ</li>
<li>é¿å…åœ¨å¹¶è¡Œæµä¸­ä½¿ç”¨çŠ¶æ€fulæ“ä½œ</li>
<li>åˆç†ä½¿ç”¨ä¸­é—´æ“ä½œå‡å°‘æ•°æ®é‡</li>
</ul>
<h4 data-id="heading-15">4.3 æ—¥æœŸæ—¶é—´APIä½¿ç”¨å»ºè®®</h4>
<ul>
<li>æ ¹æ®éœ€è¦é€‰æ‹©åˆé€‚çš„æ—¥æœŸæ—¶é—´ç±»</li>
<li>ä½¿ç”¨ä¸å¯å˜çš„æ—¥æœŸæ—¶é—´å¯¹è±¡</li>
<li>ä¼˜å…ˆä½¿ç”¨DateTimeFormatterè¿›è¡Œæ ¼å¼åŒ–</li>
<li>æ³¨æ„æ—¶åŒºå¤„ç†çš„æ­£ç¡®æ€§</li>
</ul>
<h3 data-id="heading-16">5. ä»£ç ç¤ºä¾‹</h3>
<h4 data-id="heading-17">5.1 å®Œæ•´ç¤ºä¾‹ç±»</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.java.learning;

<span class="hljs-keyword">import</span> java.time.*;
<span class="hljs-keyword">import</span> java.time.format.DateTimeFormatter;
<span class="hljs-keyword">import</span> java.util.*;
<span class="hljs-keyword">import</span> java.util.stream.*;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">JDK8Features</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        demonstrateLambda();
        demonstrateStreamAPI();
        demonstrateDateTimeAPI();
        demonstrateDefaultMethods();
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">demonstrateLambda</span><span class="hljs-params">()</span> {
        System.out.println(<span class="hljs-string">"=== Lambdaè¡¨è¾¾å¼ç¤ºä¾‹ ==="</span>);

        <span class="hljs-comment">// ä¼ ç»Ÿæ–¹å¼ - åŒ¿åå†…éƒ¨ç±»</span>
        <span class="hljs-type">Runnable</span> <span class="hljs-variable">traditionalRunnable</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Runnable</span>() {
            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> {
                System.out.println(<span class="hljs-string">"ä¼ ç»Ÿæ–¹å¼æ‰§è¡Œ"</span>);
            }
        };

        <span class="hljs-comment">// Lambdaæ–¹å¼ - æ›´ç®€æ´</span>
        <span class="hljs-type">Runnable</span> <span class="hljs-variable">lambdaRunnable</span> <span class="hljs-operator">=</span> () -&gt; System.out.println(<span class="hljs-string">"Lambdaæ–¹å¼æ‰§è¡Œ"</span>);

        <span class="hljs-comment">// æ‰§è¡Œ</span>
        traditionalRunnable.run();
        lambdaRunnable.run();

        <span class="hljs-comment">// é›†åˆæ’åºçš„Lambdaåº”ç”¨</span>
        List&lt;String&gt; names = Arrays.asList(<span class="hljs-string">"å¼ ä¸‰"</span>, <span class="hljs-string">"æå››"</span>, <span class="hljs-string">"ç‹äº”"</span>, <span class="hljs-string">"èµµå…­"</span>);

        <span class="hljs-comment">// ä¼ ç»Ÿæ’åºæ–¹å¼</span>
        Collections.sort(names, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Comparator</span>&lt;String&gt;() {
            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">compare</span><span class="hljs-params">(String a, String b)</span> {
                <span class="hljs-keyword">return</span> a.compareTo(b);
            }
        });

        <span class="hljs-comment">// Lambdaæ’åºæ–¹å¼</span>
        Collections.sort(names, (a, b) -&gt; a.compareTo(b));

        <span class="hljs-comment">// æ›´ç®€æ´çš„æ–¹æ³•å¼•ç”¨</span>
        Collections.sort(names, String::compareTo);

        System.out.println(<span class="hljs-string">"æ’åºåçš„åå­—: "</span> + names);

        <span class="hljs-comment">// äº‹ä»¶å¤„ç†ä¸­çš„Lambda</span>
        javax.swing.<span class="hljs-type">JButton</span> <span class="hljs-variable">button</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">javax</span>.swing.JButton(<span class="hljs-string">"æµ‹è¯•æŒ‰é’®"</span>);
        button.addActionListener(e -&gt; System.out.println(<span class="hljs-string">"æŒ‰é’®è¢«ç‚¹å‡»äº†!"</span>));
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">demonstrateStreamAPI</span><span class="hljs-params">()</span> {
        System.out.println(<span class="hljs-string">"\n=== Stream APIç¤ºä¾‹ ==="</span>);

        List&lt;Integer&gt; numbers = Arrays.asList(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>, <span class="hljs-number">10</span>);

        <span class="hljs-comment">// ä¼ ç»Ÿæ–¹å¼ï¼šç­›é€‰å¶æ•°å¹¶è®¡ç®—å¹³æ–¹</span>
        List&lt;Integer&gt; resultTraditional = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
        <span class="hljs-keyword">for</span> (Integer num : numbers) {
            <span class="hljs-keyword">if</span> (num % <span class="hljs-number">2</span> == <span class="hljs-number">0</span>) {
                resultTraditional.add(num * num);
            }
        }

        <span class="hljs-comment">// Streamæ–¹å¼ï¼šæ›´å£°æ˜å¼ã€æ›´ç®€æ´</span>
        List&lt;Integer&gt; resultStream = numbers.stream()
                .filter(n -&gt; n % <span class="hljs-number">2</span> == <span class="hljs-number">0</span>)      <span class="hljs-comment">// è¿‡æ»¤å¶æ•°</span>
                .map(n -&gt; n * n)              <span class="hljs-comment">// è®¡ç®—å¹³æ–¹</span>
                .collect(Collectors.toList()); <span class="hljs-comment">// æ”¶é›†ç»“æœ</span>

        System.out.println(<span class="hljs-string">"ä¼ ç»Ÿæ–¹å¼ç»“æœ: "</span> + resultTraditional);
        System.out.println(<span class="hljs-string">"Streamæ–¹å¼ç»“æœ: "</span> + resultStream);

        <span class="hljs-comment">// æ›´å¤šStreamæ“ä½œ</span>
        System.out.println(<span class="hljs-string">"\n--- æ›´å¤šStreamæ“ä½œ ---"</span>);

        <span class="hljs-comment">// ç»Ÿè®¡æ“ä½œ</span>
        <span class="hljs-type">IntSummaryStatistics</span> <span class="hljs-variable">stats</span> <span class="hljs-operator">=</span> numbers.stream()
                .mapToInt(Integer::intValue)
                .summaryStatistics();

        System.out.println(<span class="hljs-string">"ç»Ÿè®¡ä¿¡æ¯: "</span> + stats);
        System.out.println(<span class="hljs-string">"å¹³å‡å€¼: "</span> + stats.getAverage());
        System.out.println(<span class="hljs-string">"æœ€å¤§å€¼: "</span> + stats.getMax());

        <span class="hljs-comment">// åˆ†ç»„æ“ä½œ</span>
        Map&lt;String, List&lt;Integer&gt;&gt; grouped = numbers.stream()
                .collect(Collectors.groupingBy(
                        n -&gt; n % <span class="hljs-number">2</span> == <span class="hljs-number">0</span> ? <span class="hljs-string">"å¶æ•°"</span> : <span class="hljs-string">"å¥‡æ•°"</span>
                ));

        System.out.println(<span class="hljs-string">"åˆ†ç»„ç»“æœ: "</span> + grouped);

        <span class="hljs-comment">// å¹¶è¡Œæµå¤„ç†</span>
        List&lt;Integer&gt; parallelResult = numbers.parallelStream()
                .filter(n -&gt; n &gt; <span class="hljs-number">5</span>)
                .map(n -&gt; n * <span class="hljs-number">2</span>)
                .sorted()
                .collect(Collectors.toList());

        System.out.println(<span class="hljs-string">"å¹¶è¡Œå¤„ç†ç»“æœ: "</span> + parallelResult);
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">demonstrateDateTimeAPI</span><span class="hljs-params">()</span> {
        System.out.println(<span class="hljs-string">"\n=== æ–°çš„æ—¥æœŸæ—¶é—´APIç¤ºä¾‹ ==="</span>);

        <span class="hljs-comment">// æ—§ç‰ˆDateçš„é—®é¢˜</span>
        <span class="hljs-type">Date</span> <span class="hljs-variable">oldDate</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>();
        System.out.println(<span class="hljs-string">"æ—§Date: "</span> + oldDate);

        <span class="hljs-comment">// æ–°ç‰ˆæ—¥æœŸæ—¶é—´API</span>
        <span class="hljs-type">LocalDate</span> <span class="hljs-variable">currentDate</span> <span class="hljs-operator">=</span> LocalDate.now();
        <span class="hljs-type">LocalTime</span> <span class="hljs-variable">currentTime</span> <span class="hljs-operator">=</span> LocalTime.now();
        <span class="hljs-type">LocalDateTime</span> <span class="hljs-variable">currentDateTime</span> <span class="hljs-operator">=</span> LocalDateTime.now();

        System.out.println(<span class="hljs-string">"å½“å‰æ—¥æœŸ: "</span> + currentDate);
        System.out.println(<span class="hljs-string">"å½“å‰æ—¶é—´: "</span> + currentTime);
        System.out.println(<span class="hljs-string">"å½“å‰æ—¥æœŸæ—¶é—´: "</span> + currentDateTime);

        <span class="hljs-comment">// æ—¥æœŸæ“ä½œ</span>
        <span class="hljs-type">LocalDate</span> <span class="hljs-variable">tomorrow</span> <span class="hljs-operator">=</span> currentDate.plusDays(<span class="hljs-number">1</span>);
        <span class="hljs-type">LocalDate</span> <span class="hljs-variable">nextWeek</span> <span class="hljs-operator">=</span> currentDate.plusWeeks(<span class="hljs-number">1</span>);
        <span class="hljs-type">LocalDate</span> <span class="hljs-variable">nextMonth</span> <span class="hljs-operator">=</span> currentDate.plusMonths(<span class="hljs-number">1</span>);

        System.out.println(<span class="hljs-string">"æ˜å¤©: "</span> + tomorrow);
        System.out.println(<span class="hljs-string">"ä¸‹å‘¨: "</span> + nextWeek);
        System.out.println(<span class="hljs-string">"ä¸‹æœˆ: "</span> + nextMonth);

        <span class="hljs-comment">// æ—¥æœŸæ¯”è¾ƒ</span>
        <span class="hljs-type">boolean</span> <span class="hljs-variable">isBefore</span> <span class="hljs-operator">=</span> tomorrow.isBefore(nextWeek);
        System.out.println(<span class="hljs-string">"æ˜å¤©æ˜¯å¦åœ¨ä¸‹å‘¨ä¹‹å‰: "</span> + isBefore);

        <span class="hljs-comment">// æ—¥æœŸæ ¼å¼åŒ–</span>
        <span class="hljs-type">DateTimeFormatter</span> <span class="hljs-variable">formatter</span> <span class="hljs-operator">=</span> DateTimeFormatter.ofPattern(<span class="hljs-string">"yyyy-MM-dd HH:mm:ss"</span>);
        <span class="hljs-type">String</span> <span class="hljs-variable">formatted</span> <span class="hljs-operator">=</span> currentDateTime.format(formatter);
        System.out.println(<span class="hljs-string">"æ ¼å¼åŒ–æ—¥æœŸ: "</span> + formatted);

        <span class="hljs-comment">// æ—¶åŒºå¤„ç†</span>
        <span class="hljs-type">ZonedDateTime</span> <span class="hljs-variable">zonedDateTime</span> <span class="hljs-operator">=</span> ZonedDateTime.now(ZoneId.of(<span class="hljs-string">"America/New_York"</span>));
        System.out.println(<span class="hljs-string">"çº½çº¦æ—¶é—´: "</span> + zonedDateTime);

        <span class="hljs-comment">// æŒç»­æ—¶é—´è®¡ç®—</span>
        <span class="hljs-type">LocalDateTime</span> <span class="hljs-variable">start</span> <span class="hljs-operator">=</span> LocalDateTime.of(<span class="hljs-number">2024</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);
        <span class="hljs-type">LocalDateTime</span> <span class="hljs-variable">end</span> <span class="hljs-operator">=</span> LocalDateTime.now();
        <span class="hljs-type">Duration</span> <span class="hljs-variable">duration</span> <span class="hljs-operator">=</span> Duration.between(start, end);
        System.out.println(<span class="hljs-string">"ä»2024å¹´å¼€å§‹å·²ç»è¿‡å»äº†: "</span> + duration.toDays() + <span class="hljs-string">" å¤©"</span>);
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">demonstrateDefaultMethods</span><span class="hljs-params">()</span> {
        System.out.println(<span class="hljs-string">"\n=== æ¥å£é»˜è®¤æ–¹æ³•ç¤ºä¾‹ ==="</span>);

        <span class="hljs-type">Calculator</span> <span class="hljs-variable">calculator</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BasicCalculator</span>();
        System.out.println(<span class="hljs-string">"åŠ æ³•: "</span> + calculator.add(<span class="hljs-number">5</span>, <span class="hljs-number">3</span>));
        System.out.println(<span class="hljs-string">"å‡æ³•: "</span> + calculator.subtract(<span class="hljs-number">5</span>, <span class="hljs-number">3</span>));
        System.out.println(<span class="hljs-string">"ä¹˜æ³•: "</span> + calculator.multiply(<span class="hljs-number">5</span>, <span class="hljs-number">3</span>));
        System.out.println(<span class="hljs-string">"é»˜è®¤æ–¹æ³•å¹³æ–¹: "</span> + calculator.square(<span class="hljs-number">5</span>));
    }
}

<span class="hljs-comment">// æ¥å£é»˜è®¤æ–¹æ³•ç¤ºä¾‹</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">Calculator</span> {
    <span class="hljs-type">int</span> <span class="hljs-title function_">add</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span>;
    <span class="hljs-type">int</span> <span class="hljs-title function_">subtract</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span>;

    <span class="hljs-comment">// é»˜è®¤æ–¹æ³• - æ¥å£å¯ä»¥æä¾›å®ç°</span>
    <span class="hljs-keyword">default</span> <span class="hljs-type">int</span> <span class="hljs-title function_">multiply</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span> {
        <span class="hljs-keyword">return</span> a * b;
    }

    <span class="hljs-comment">// å¦ä¸€ä¸ªé»˜è®¤æ–¹æ³•</span>
    <span class="hljs-keyword">default</span> <span class="hljs-type">int</span> <span class="hljs-title function_">square</span><span class="hljs-params">(<span class="hljs-type">int</span> a)</span> {
        <span class="hljs-keyword">return</span> multiply(a, a);
    }

    <span class="hljs-comment">// é™æ€æ–¹æ³• - æ¥å£ä¸­çš„å·¥å…·æ–¹æ³•</span>
    <span class="hljs-keyword">static</span> String <span class="hljs-title function_">getVersion</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-string">"Calculator v1.0"</span>;
    }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">BasicCalculator</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Calculator</span> {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">add</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span> {
        <span class="hljs-keyword">return</span> a + b;
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">subtract</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span> {
        <span class="hljs-keyword">return</span> a - b;
    }

    <span class="hljs-comment">// ä¸éœ€è¦å®ç°é»˜è®¤æ–¹æ³•ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨</span>
    <span class="hljs-comment">// ä¹Ÿå¯ä»¥é€‰æ‹©é‡å†™é»˜è®¤æ–¹æ³•</span>
}
</code></pre>
<h3 data-id="heading-18">6. æ€»ç»“</h3>
<p>JDK 8æ˜¯Javaå‘å±•å²ä¸Šçš„ä¸€ä¸ªé‡è¦é‡Œç¨‹ç¢‘ï¼Œå¼•å…¥çš„Lambdaè¡¨è¾¾å¼ã€Stream APIã€æ–°æ—¥æœŸæ—¶é—´APIç­‰ç‰¹æ€§ï¼Œä¸ä»…ä½¿ä»£ç æ›´ç®€æ´ã€æ›´æ˜“è¯»ï¼Œè¿˜æ˜¾è‘—æå‡äº†æ€§èƒ½ã€‚è¿™äº›ç‰¹æ€§ä¸ºJavaå¸¦æ¥äº†å‡½æ•°å¼ç¼–ç¨‹çš„èƒ½åŠ›ï¼Œä½¿Javaåœ¨ç°ä»£åº”ç”¨å¼€å‘ä¸­ä¿æŒç«äº‰åŠ›ã€‚</p>
<p>é€šè¿‡åˆç†ä½¿ç”¨JDK 8çš„æ–°ç‰¹æ€§ï¼Œå¼€å‘è€…å¯ä»¥ï¼š</p>
<ul>
<li>ç¼–å†™æ›´ç®€æ´ã€æ›´è¡¨è¾¾åŠ›å¼ºçš„ä»£ç </li>
<li>å……åˆ†åˆ©ç”¨å¤šæ ¸å¤„ç†å™¨æå‡æ€§èƒ½</li>
<li>é¿å…å¸¸è§çš„é”™è¯¯ï¼ˆå¦‚ç©ºæŒ‡é’ˆå¼‚å¸¸ã€çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼‰</li>
<li>æé«˜å¼€å‘æ•ˆç‡å’Œä»£ç å¯ç»´æŠ¤æ€§</li>
</ul>
<p>JDK 8çš„ç‰¹æ€§ä¸ºåç»­ç‰ˆæœ¬çš„å‘å±•å¥ å®šäº†åŸºç¡€ï¼Œæ˜¯æ¯ä¸ªJavaå¼€å‘è€…éƒ½åº”è¯¥æŒæ¡çš„æ ¸å¿ƒçŸ¥è¯†ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‰ç«¯ç›‘æ§å®è·µ]]></title>    <link>https://juejin.cn/post/7605856048361537574</link>    <guid>https://juejin.cn/post/7605856048361537574</guid>    <pubDate>2026-02-13T05:51:40.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605856048361537574" data-draft-id="7605881632541016115" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‰ç«¯ç›‘æ§å®è·µ"/> <meta itemprop="keywords" content="å‰ç«¯,æ€§èƒ½ä¼˜åŒ–"/> <meta itemprop="datePublished" content="2026-02-13T05:51:40.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æå…ƒ_éœ¸"/> <meta itemprop="url" content="https://juejin.cn/user/2524917887410397"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‰ç«¯ç›‘æ§å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2524917887410397/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æå…ƒ_éœ¸
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-13T05:51:40.000Z" title="Fri Feb 13 2026 05:51:40 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä»é›¶å¼€å‘å‰ç«¯ç›‘æ§ SDKï¼šå¼‚å¸¸ã€æ€§èƒ½ã€è®¿é—®é‡ä¸€ç½‘æ‰“å°½</h2>
<blockquote>
<p>æœ¬æ–‡å°†å¸¦ä½ ä»é›¶å¼€å‘ä¸€ä¸ªå®Œæ•´çš„å‰ç«¯ç›‘æ§ SDKï¼Œæ¶µç›–å¼‚å¸¸ç›‘æ§ã€æ€§èƒ½ç›‘æ§å’Œè®¿é—®é‡ç»Ÿè®¡ä¸‰å¤§æ ¸å¿ƒåŠŸèƒ½ã€‚</p>
</blockquote>
<h3 data-id="heading-1">ç›®å½•</h3>
<ol>
<li><a href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E9%9C%80%E8%A6%81%E5%89%8D%E7%AB%AF%E7%9B%91%E6%8E%A7" title="#%E4%B8%BA%E4%BB%80%E4%B9%88%E9%9C%80%E8%A6%81%E5%89%8D%E7%AB%AF%E7%9B%91%E6%8E%A7">ä¸ºä»€ä¹ˆéœ€è¦å‰ç«¯ç›‘æ§</a></li>
<li><a href="#sdk-%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1" title="#sdk-%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1">SDK æ¶æ„è®¾è®¡</a></li>
<li><a href="#%E6%A0%B8%E5%BF%83%E5%8A%9F%E8%83%BD%E5%AE%9E%E7%8E%B0" title="#%E6%A0%B8%E5%BF%83%E5%8A%9F%E8%83%BD%E5%AE%9E%E7%8E%B0">æ ¸å¿ƒåŠŸèƒ½å®ç°</a></li>
<li><a href="#%E4%BD%BF%E7%94%A8%E7%A4%BA%E4%BE%8B" title="#%E4%BD%BF%E7%94%A8%E7%A4%BA%E4%BE%8B">ä½¿ç”¨ç¤ºä¾‹</a></li>
<li><a href="#%E6%80%BB%E7%BB%93%E4%B8%8E%E5%B1%95%E6%9C%9B" title="#%E6%80%BB%E7%BB%93%E4%B8%8E%E5%B1%95%E6%9C%9B">æ€»ç»“ä¸å±•æœ›</a></li>
</ol>
<hr/>
<h3 data-id="heading-2">ä¸ºä»€ä¹ˆéœ€è¦å‰ç«¯ç›‘æ§</h3>
<p>åœ¨ç°ä»£ Web åº”ç”¨ä¸­ï¼Œå‰ç«¯ç›‘æ§å·²ç»æˆä¸ºä¿éšœç”¨æˆ·ä½“éªŒçš„é‡è¦æ‰‹æ®µï¼š</p>
<ul>
<li><strong>å¼‚å¸¸ç›‘æ§</strong>ï¼šåŠæ—¶å‘ç°å¹¶ä¿®å¤çº¿ä¸Š Bugï¼Œå‡å°‘ç”¨æˆ·æµå¤±</li>
<li><strong>æ€§èƒ½ç›‘æ§</strong>ï¼šä¼˜åŒ–é¡µé¢åŠ è½½é€Ÿåº¦ï¼Œæå‡ç”¨æˆ·ä½“éªŒ</li>
<li><strong>è®¿é—®ç»Ÿè®¡</strong>ï¼šäº†è§£ç”¨æˆ·è¡Œä¸ºï¼ŒæŒ‡å¯¼äº§å“å†³ç­–</li>
</ul>
<p>å¸‚é¢ä¸Šå·²æœ‰ Sentryã€Fundebug ç­‰æˆç†Ÿçš„ç›‘æ§æœåŠ¡ï¼Œä½†å¼€å‘è‡ªå·±çš„ SDK èƒ½è®©æˆ‘ä»¬ï¼š</p>
<ol>
<li>å®Œå…¨æŒæ§æ•°æ®ï¼Œä¿éšœéšç§å®‰å…¨</li>
<li>æ ¹æ®ä¸šåŠ¡éœ€æ±‚å®šåˆ¶åŠŸèƒ½</li>
<li>æ·±å…¥ç†è§£ç›‘æ§åŸç†ï¼Œæå‡æŠ€æœ¯èƒ½åŠ›</li>
</ol>
<hr/>
<h3 data-id="heading-3">SDK æ¶æ„è®¾è®¡</h3>
<h4 data-id="heading-4">æ•´ä½“æ¶æ„</h4>
<pre><code class="hljs language-scss" lang="scss">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Monitor SDK                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Core Layer  â”‚  Reporter (ä¸ŠæŠ¥ä¸­å¿ƒ)  â”‚  Config (é…ç½®ç®¡ç†)    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Module Layerâ”‚  ErrorMonitor â”‚ PerformanceMonitor â”‚ VisitMonitorâ”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Utils Layer â”‚  Device â”‚ Storage â”‚ UUID â”‚ Sampling           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h4 data-id="heading-5">è®¾è®¡åŸåˆ™</h4>
<ol>
<li><strong>æ¨¡å—åŒ–</strong>ï¼šæ¯ä¸ªç›‘æ§åŠŸèƒ½ç‹¬ç«‹æ¨¡å—ï¼Œå¯å•ç‹¬å¯ç”¨/ç¦ç”¨</li>
<li><strong>æ’ä»¶åŒ–</strong>ï¼šReporter ç»Ÿä¸€ç®¡ç†ä¸ŠæŠ¥ï¼Œæ”¯æŒæ‰¹é‡å’Œå³æ—¶å‘é€</li>
<li><strong>ä½ä¾µå…¥</strong>ï¼šè‡ªåŠ¨æ•è·å¼‚å¸¸ï¼Œä¸šåŠ¡ä»£ç é›¶æ”¹åŠ¨</li>
<li><strong>é«˜å…¼å®¹</strong>ï¼šæ”¯æŒå¤šç§å¼•å…¥æ–¹å¼ï¼ˆESM/CJS/UMDï¼‰</li>
</ol>
<hr/>
<h3 data-id="heading-6">æ ¸å¿ƒåŠŸèƒ½å®ç°</h3>
<h4 data-id="heading-7">1. å¼‚å¸¸ç›‘æ§æ¨¡å—</h4>
<p>å¼‚å¸¸ç›‘æ§æ˜¯ SDK çš„æ ¸å¿ƒåŠŸèƒ½ï¼Œæˆ‘ä»¬éœ€è¦æ•è·å¤šç§ç±»å‹çš„é”™è¯¯ï¼š</p>
<h5 data-id="heading-8">1.1 JavaScript è¿è¡Œæ—¶é”™è¯¯</h5>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// src/modules/error/globalError.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">initGlobalError</span>(<span class="hljs-params">reporter: Reporter</span>): <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span> {
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handler</span> = (<span class="hljs-params">event: ErrorEvent</span>) =&gt; {
    <span class="hljs-keyword">const</span> <span class="hljs-attr">errorData</span>: <span class="hljs-title class_">ErrorData</span> = {
      <span class="hljs-attr">type</span>: <span class="hljs-string">'js'</span>,
      <span class="hljs-attr">message</span>: event.<span class="hljs-property">message</span>,
      <span class="hljs-attr">filename</span>: event.<span class="hljs-property">filename</span>,
      <span class="hljs-attr">lineno</span>: event.<span class="hljs-property">lineno</span>,
      <span class="hljs-attr">colno</span>: event.<span class="hljs-property">colno</span>,
      <span class="hljs-attr">stack</span>: event.<span class="hljs-property">error</span>?.<span class="hljs-property">stack</span>
    };
    reporter.<span class="hljs-title function_">report</span>(<span class="hljs-string">'error'</span>, errorData);
  };

  <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'error'</span>, handler);
  <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'error'</span>, handler);
}
</code></pre>
<p>é€šè¿‡ç›‘å¬ <code>window.onerror</code>ï¼Œæˆ‘ä»¬å¯ä»¥æ•è·æ‰€æœ‰åŒæ­¥å’Œå¼‚æ­¥çš„ JavaScript é”™è¯¯ã€‚</p>
<h5 data-id="heading-9">1.2 Promise æœªæ•è·å¼‚å¸¸</h5>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// src/modules/error/promiseError.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">initPromiseError</span>(<span class="hljs-params">reporter: Reporter</span>): <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span> {
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handler</span> = (<span class="hljs-params">event: PromiseRejectionEvent</span>) =&gt; {
    <span class="hljs-keyword">const</span> <span class="hljs-attr">errorData</span>: <span class="hljs-title class_">ErrorData</span> = {
      <span class="hljs-attr">type</span>: <span class="hljs-string">'promise'</span>,
      <span class="hljs-attr">message</span>: event.<span class="hljs-property">reason</span>?.<span class="hljs-property">message</span> || <span class="hljs-title class_">String</span>(event.<span class="hljs-property">reason</span>),
      <span class="hljs-attr">stack</span>: event.<span class="hljs-property">reason</span>?.<span class="hljs-property">stack</span>
    };
    reporter.<span class="hljs-title function_">report</span>(<span class="hljs-string">'error'</span>, errorData);
  };

  <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'unhandledrejection'</span>, handler);
  <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'unhandledrejection'</span>, handler);
}
</code></pre>
<p>ç°ä»£å‰ç«¯å¤§é‡ä½¿ç”¨ Promiseï¼Œæœªæ•è·çš„ Promise é”™è¯¯ä¼šå¯¼è‡´åº”ç”¨å´©æºƒã€‚</p>
<h5 data-id="heading-10">1.3 èµ„æºåŠ è½½é”™è¯¯</h5>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// src/modules/error/resourceError.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">initResourceError</span>(<span class="hljs-params">reporter: Reporter</span>): <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span> {
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handler</span> = (<span class="hljs-params">event: Event</span>) =&gt; {
    <span class="hljs-keyword">const</span> target = event.<span class="hljs-property">target</span> <span class="hljs-keyword">as</span> <span class="hljs-title class_">HTMLElement</span>;
    <span class="hljs-keyword">const</span> tagName = target.<span class="hljs-property">tagName</span>?.<span class="hljs-title function_">toLowerCase</span>();

    <span class="hljs-keyword">if</span> (![<span class="hljs-string">'img'</span>, <span class="hljs-string">'script'</span>, <span class="hljs-string">'link'</span>].<span class="hljs-title function_">includes</span>(tagName)) <span class="hljs-keyword">return</span>;

    <span class="hljs-keyword">const</span> src = (target <span class="hljs-keyword">as</span> <span class="hljs-built_in">any</span>).<span class="hljs-property">src</span> || (target <span class="hljs-keyword">as</span> <span class="hljs-built_in">any</span>).<span class="hljs-property">href</span> || <span class="hljs-string">''</span>;
    <span class="hljs-keyword">const</span> <span class="hljs-attr">errorData</span>: <span class="hljs-title class_">ErrorData</span> = {
      <span class="hljs-attr">type</span>: <span class="hljs-string">'resource'</span>,
      <span class="hljs-attr">message</span>: <span class="hljs-string">`Failed to load <span class="hljs-subst">${tagName}</span>: <span class="hljs-subst">${src}</span>`</span>,
      <span class="hljs-attr">filename</span>: src,
      <span class="hljs-attr">extra</span>: { tagName }
    };
    reporter.<span class="hljs-title function_">report</span>(<span class="hljs-string">'error'</span>, errorData);
  };

  <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'error'</span>, handler, <span class="hljs-literal">true</span>); <span class="hljs-comment">// æ•è·é˜¶æ®µç›‘å¬</span>
  <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'error'</span>, handler, <span class="hljs-literal">true</span>);
}
</code></pre>
<p>ä½¿ç”¨æ•è·é˜¶æ®µï¼ˆ<code>true</code>ï¼‰å¯ä»¥ç›‘å¬åˆ°èµ„æºåŠ è½½é”™è¯¯ã€‚</p>
<h5 data-id="heading-11">1.4 ç½‘ç»œè¯·æ±‚é”™è¯¯</h5>
<p>é€šè¿‡åŠ«æŒ XMLHttpRequest å’Œ fetch APIï¼Œç›‘æ§æ‰€æœ‰ç½‘ç»œè¯·æ±‚ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// src/modules/error/networkError.ts</span>
<span class="hljs-keyword">const</span> originalFetch = <span class="hljs-variable language_">window</span>.<span class="hljs-property">fetch</span>;
<span class="hljs-variable language_">window</span>.<span class="hljs-property">fetch</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">input: RequestInfo | URL, init?: RequestInit</span>) {
  <span class="hljs-keyword">const</span> startTime = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
  <span class="hljs-keyword">const</span> url = <span class="hljs-keyword">typeof</span> input === <span class="hljs-string">'string'</span> ? input : input.<span class="hljs-title function_">toString</span>();

  <span class="hljs-keyword">return</span> originalFetch.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, <span class="hljs-variable language_">arguments</span> <span class="hljs-keyword">as</span> <span class="hljs-built_in">any</span>)
    .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> {
      <span class="hljs-keyword">if</span> (!response.<span class="hljs-property">ok</span>) {
        reporter.<span class="hljs-title function_">report</span>(<span class="hljs-string">'error'</span>, {
          <span class="hljs-attr">type</span>: <span class="hljs-string">'network'</span>,
          <span class="hljs-attr">message</span>: <span class="hljs-string">`Fetch <span class="hljs-subst">${response.status}</span>: <span class="hljs-subst">${response.statusText}</span>`</span>,
          <span class="hljs-attr">extra</span>: { <span class="hljs-attr">method</span>: init?.<span class="hljs-property">method</span> || <span class="hljs-string">'GET'</span>, url, <span class="hljs-attr">status</span>: response.<span class="hljs-property">status</span> }
        });
      }
      <span class="hljs-keyword">return</span> response;
    })
    .<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> {
      reporter.<span class="hljs-title function_">report</span>(<span class="hljs-string">'error'</span>, {
        <span class="hljs-attr">type</span>: <span class="hljs-string">'network'</span>,
        <span class="hljs-attr">message</span>: <span class="hljs-string">`Fetch failed: <span class="hljs-subst">${error.message}</span>`</span>,
        <span class="hljs-attr">extra</span>: { <span class="hljs-attr">method</span>: init?.<span class="hljs-property">method</span> || <span class="hljs-string">'GET'</span>, url }
      });
      <span class="hljs-keyword">throw</span> error;
    });
};
</code></pre>
<h4 data-id="heading-12">2. æ€§èƒ½ç›‘æ§æ¨¡å—</h4>
<h5 data-id="heading-13">2.1 Web Vitals æŒ‡æ ‡</h5>
<p>Core Web Vitals æ˜¯ Google æå‡ºçš„è¡¡é‡ç”¨æˆ·ä½“éªŒçš„å…³é”®æŒ‡æ ‡ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// src/modules/performance/webVitals.ts</span>

<span class="hljs-comment">// LCP - æœ€å¤§å†…å®¹ç»˜åˆ¶</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">observeLCP</span>(<span class="hljs-params">reporter: Reporter</span>): <span class="hljs-built_in">void</span> {
  <span class="hljs-keyword">const</span> observer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PerformanceObserver</span>(<span class="hljs-function">(<span class="hljs-params">list</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> entries = list.<span class="hljs-title function_">getEntries</span>();
    <span class="hljs-keyword">const</span> lastEntry = entries[entries.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>];
    <span class="hljs-keyword">const</span> value = (lastEntry <span class="hljs-keyword">as</span> <span class="hljs-built_in">any</span>).<span class="hljs-property">renderTime</span> || lastEntry.<span class="hljs-property">startTime</span>;

    reporter.<span class="hljs-title function_">report</span>(<span class="hljs-string">'performance'</span>, {
      <span class="hljs-attr">type</span>: <span class="hljs-string">'web-vitals'</span>,
      <span class="hljs-attr">name</span>: <span class="hljs-string">'LCP'</span>,
      <span class="hljs-attr">value</span>: <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">round</span>(value),
      <span class="hljs-attr">rating</span>: value &lt;= <span class="hljs-number">2500</span> ? <span class="hljs-string">'good'</span> : value &lt;= <span class="hljs-number">4000</span> ? <span class="hljs-string">'needs-improvement'</span> : <span class="hljs-string">'poor'</span>
    });
  });

  observer.<span class="hljs-title function_">observe</span>({ <span class="hljs-attr">entryTypes</span>: [<span class="hljs-string">'largest-contentful-paint'</span>] <span class="hljs-keyword">as</span> <span class="hljs-built_in">any</span> });
}

<span class="hljs-comment">// CLS - ç´¯ç§¯å¸ƒå±€åç§»</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">observeCLS</span>(<span class="hljs-params">reporter: Reporter</span>): <span class="hljs-built_in">void</span> {
  <span class="hljs-keyword">let</span> clsValue = <span class="hljs-number">0</span>;

  <span class="hljs-keyword">const</span> observer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PerformanceObserver</span>(<span class="hljs-function">(<span class="hljs-params">list</span>) =&gt;</span> {
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> entry <span class="hljs-keyword">of</span> list.<span class="hljs-title function_">getEntries</span>()) {
      <span class="hljs-keyword">const</span> layoutEntry = entry <span class="hljs-keyword">as</span> <span class="hljs-title class_">PerformanceEntry</span> &amp; { <span class="hljs-attr">hadRecentInput</span>: <span class="hljs-built_in">boolean</span>; <span class="hljs-attr">value</span>: <span class="hljs-built_in">number</span> };
      <span class="hljs-keyword">if</span> (!layoutEntry.<span class="hljs-property">hadRecentInput</span>) {
        clsValue += layoutEntry.<span class="hljs-property">value</span>;
      }
    }
  });

  observer.<span class="hljs-title function_">observe</span>({ <span class="hljs-attr">entryTypes</span>: [<span class="hljs-string">'layout-shift'</span>] <span class="hljs-keyword">as</span> <span class="hljs-built_in">any</span> });

  <span class="hljs-comment">// é¡µé¢éšè—æ—¶ä¸ŠæŠ¥</span>
  <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'visibilitychange'</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">document</span>.<span class="hljs-property">visibilityState</span> === <span class="hljs-string">'hidden'</span>) {
      reporter.<span class="hljs-title function_">report</span>(<span class="hljs-string">'performance'</span>, {
        <span class="hljs-attr">type</span>: <span class="hljs-string">'web-vitals'</span>,
        <span class="hljs-attr">name</span>: <span class="hljs-string">'CLS'</span>,
        <span class="hljs-attr">value</span>: <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">round</span>(clsValue * <span class="hljs-number">1000</span>) / <span class="hljs-number">1000</span>,
        <span class="hljs-attr">rating</span>: clsValue &lt;= <span class="hljs-number">0.1</span> ? <span class="hljs-string">'good'</span> : clsValue &lt;= <span class="hljs-number">0.25</span> ? <span class="hljs-string">'needs-improvement'</span> : <span class="hljs-string">'poor'</span>
      });
    }
  });
}
</code></pre>
<h5 data-id="heading-14">2.2 å¯¼èˆªæ€§èƒ½</h5>
<p>åˆ©ç”¨ Navigation Timing API è·å–é¡µé¢åŠ è½½å„é˜¶æ®µè€—æ—¶ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">observeNavigation</span>(<span class="hljs-params">reporter: Reporter</span>): <span class="hljs-built_in">void</span> {
  <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'load'</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-keyword">const</span> navigation = performance.<span class="hljs-title function_">getEntriesByType</span>(<span class="hljs-string">'navigation'</span>)[<span class="hljs-number">0</span>]
        <span class="hljs-keyword">as</span> <span class="hljs-title class_">PerformanceNavigationTiming</span>;

      <span class="hljs-keyword">const</span> metrics = [
        { <span class="hljs-attr">name</span>: <span class="hljs-string">'DNS'</span>, <span class="hljs-attr">value</span>: navigation.<span class="hljs-property">domainLookupEnd</span> - navigation.<span class="hljs-property">domainLookupStart</span> },
        { <span class="hljs-attr">name</span>: <span class="hljs-string">'TCP'</span>, <span class="hljs-attr">value</span>: navigation.<span class="hljs-property">connectEnd</span> - navigation.<span class="hljs-property">connectStart</span> },
        { <span class="hljs-attr">name</span>: <span class="hljs-string">'TTFB'</span>, <span class="hljs-attr">value</span>: navigation.<span class="hljs-property">responseStart</span> - navigation.<span class="hljs-property">startTime</span> },
        { <span class="hljs-attr">name</span>: <span class="hljs-string">'DOMè§£æ'</span>, <span class="hljs-attr">value</span>: navigation.<span class="hljs-property">domInteractive</span> - navigation.<span class="hljs-property">responseEnd</span> },
        { <span class="hljs-attr">name</span>: <span class="hljs-string">'Load'</span>, <span class="hljs-attr">value</span>: navigation.<span class="hljs-property">loadEventEnd</span> - navigation.<span class="hljs-property">startTime</span> }
      ];

      metrics.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">{ name, value }</span>) =&gt;</span> {
        <span class="hljs-keyword">if</span> (value &gt; <span class="hljs-number">0</span>) {
          reporter.<span class="hljs-title function_">report</span>(<span class="hljs-string">'performance'</span>, {
            <span class="hljs-attr">type</span>: <span class="hljs-string">'navigation'</span>,
            name,
            <span class="hljs-attr">value</span>: <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">round</span>(value)
          });
        }
      });
    }, <span class="hljs-number">0</span>);
  });
}
</code></pre>
<h5 data-id="heading-15">2.3 API è€—æ—¶ç›‘æ§</h5>
<p>åŠ«æŒ XMLHttpRequest å’Œ fetchï¼Œç»Ÿè®¡æ‰€æœ‰ API è¯·æ±‚è€—æ—¶ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">observeAPI</span>(<span class="hljs-params">reporter: Reporter</span>): <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span> {
  <span class="hljs-comment">// åŠ«æŒ XMLHttpRequest</span>
  <span class="hljs-keyword">const</span> originalXHRSend = <span class="hljs-title class_">XMLHttpRequest</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">send</span>;

  <span class="hljs-title class_">XMLHttpRequest</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">send</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> startTime = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();

    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'loadend'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
      <span class="hljs-keyword">const</span> duration = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() - startTime;
      reporter.<span class="hljs-title function_">report</span>(<span class="hljs-string">'performance'</span>, {
        <span class="hljs-attr">type</span>: <span class="hljs-string">'api'</span>,
        <span class="hljs-attr">name</span>: <span class="hljs-string">`API: <span class="hljs-subst">${<span class="hljs-variable language_">this</span>._url}</span>`</span>,
        <span class="hljs-attr">value</span>: duration
      });
    });

    <span class="hljs-keyword">return</span> originalXHRSend.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, <span class="hljs-variable language_">arguments</span>);
  };

  <span class="hljs-comment">// åŠ«æŒ fetch...</span>
}
</code></pre>
<h4 data-id="heading-16">3. è®¿é—®ç›‘æ§æ¨¡å—</h4>
<h5 data-id="heading-17">3.1 PV ç»Ÿè®¡</h5>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// src/modules/visit/pv.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">observePV</span>(<span class="hljs-params">reporter: Reporter, enableSPA: <span class="hljs-built_in">boolean</span></span>): <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span> {
  <span class="hljs-comment">// åˆå§‹é¡µé¢ PV</span>
  <span class="hljs-title function_">reportPV</span>(reporter);

  <span class="hljs-keyword">if</span> (!enableSPA) <span class="hljs-keyword">return</span>;

  <span class="hljs-comment">// åŠ«æŒ history API ç›‘å¬è·¯ç”±å˜åŒ–</span>
  <span class="hljs-keyword">const</span> originalPushState = history.<span class="hljs-property">pushState</span>;
  history.<span class="hljs-property">pushState</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">...args</span>) {
    originalPushState.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, args);
    <span class="hljs-title function_">reportPV</span>(reporter);
  };

  <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'popstate'</span>, <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">reportPV</span>(reporter));
  <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'hashchange'</span>, <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">reportPV</span>(reporter));
}
</code></pre>
<h5 data-id="heading-18">3.2 Session ç®¡ç†</h5>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// src/modules/visit/session.ts</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">SESSION_TIMEOUT</span> = <span class="hljs-number">30</span> * <span class="hljs-number">60</span> * <span class="hljs-number">1000</span>; <span class="hljs-comment">// 30åˆ†é’Ÿ</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">initSession</span>(<span class="hljs-params">reporter: Reporter</span>): <span class="hljs-built_in">void</span> {
  <span class="hljs-keyword">const</span> startTime = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();

  <span class="hljs-comment">// ä¸ŠæŠ¥ä¼šè¯å¼€å§‹</span>
  reporter.<span class="hljs-title function_">report</span>(<span class="hljs-string">'visit'</span>, { <span class="hljs-attr">type</span>: <span class="hljs-string">'session-start'</span> });

  <span class="hljs-comment">// é¡µé¢å¯è§æ€§å˜åŒ–</span>
  <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'visibilitychange'</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">document</span>.<span class="hljs-property">visibilityState</span> === <span class="hljs-string">'visible'</span>) {
      <span class="hljs-keyword">const</span> lastActive = <span class="hljs-built_in">parseInt</span>(storage.<span class="hljs-title function_">get</span>(<span class="hljs-string">'session_time'</span>) || <span class="hljs-string">'0'</span>);
      <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() - lastActive &gt; <span class="hljs-variable constant_">SESSION_TIMEOUT</span>) {
        <span class="hljs-comment">// æ–°ä¼šè¯</span>
        reporter.<span class="hljs-title function_">report</span>(<span class="hljs-string">'visit'</span>, { <span class="hljs-attr">type</span>: <span class="hljs-string">'session-start'</span> });
      }
    } <span class="hljs-keyword">else</span> {
      storage.<span class="hljs-title function_">set</span>(<span class="hljs-string">'session_time'</span>, <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>().<span class="hljs-title function_">toString</span>());
    }
  });

  <span class="hljs-comment">// é¡µé¢å¸è½½æ—¶ä¸ŠæŠ¥ä¼šè¯ç»“æŸ</span>
  <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'beforeunload'</span>, <span class="hljs-function">() =&gt;</span> {
    reporter.<span class="hljs-title function_">report</span>(<span class="hljs-string">'visit'</span>, {
      <span class="hljs-attr">type</span>: <span class="hljs-string">'session-end'</span>,
      <span class="hljs-attr">duration</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() - startTime
    });
  });
}
</code></pre>
<h4 data-id="heading-19">4. æ•°æ®ä¸ŠæŠ¥ä¸­å¿ƒ</h4>
<h5 data-id="heading-20">4.1 ä¸ŠæŠ¥ç­–ç•¥</h5>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// src/core/reporter.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Reporter</span> {
  <span class="hljs-keyword">private</span> <span class="hljs-attr">queue</span>: <span class="hljs-title class_">QueueItem</span>[] = [];
  <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> <span class="hljs-variable constant_">FLUSH_INTERVAL</span> = <span class="hljs-number">5000</span>; <span class="hljs-comment">// 5ç§’åˆ·æ–°</span>
  <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> <span class="hljs-variable constant_">MAX_QUEUE_SIZE</span> = <span class="hljs-number">10</span>;   <span class="hljs-comment">// 10æ¡æ‰¹é‡å‘é€</span>

  <span class="hljs-title function_">report</span>(<span class="hljs-attr">type</span>: <span class="hljs-title class_">ReportData</span>[<span class="hljs-string">'type'</span>], <span class="hljs-attr">data</span>: <span class="hljs-title class_">ReportData</span>[<span class="hljs-string">'data'</span>]): <span class="hljs-built_in">void</span> {
    <span class="hljs-comment">// é‡‡æ ·æ£€æŸ¥</span>
    <span class="hljs-keyword">const</span> sampleRate = <span class="hljs-variable language_">this</span>.<span class="hljs-property">config</span>.<span class="hljs-property">sampleRate</span>?.[<span class="hljs-keyword">type</span>] || <span class="hljs-number">1</span>;
    <span class="hljs-keyword">if</span> (!<span class="hljs-title function_">shouldSample</span>(sampleRate)) <span class="hljs-keyword">return</span>;

    <span class="hljs-keyword">const</span> url = <span class="hljs-variable language_">this</span>.<span class="hljs-property">config</span>.<span class="hljs-property">reportUrl</span>[<span class="hljs-keyword">type</span>];
    <span class="hljs-keyword">if</span> (!url) <span class="hljs-keyword">return</span>;

    <span class="hljs-comment">// å¼‚å¸¸æ•°æ®ç«‹å³ä¸ŠæŠ¥</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">type</span> === <span class="hljs-string">'error'</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">sendImmediately</span>(data, url);
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-comment">// æ€§èƒ½å’Œè®¿é—®æ•°æ®æ‰¹é‡ä¸ŠæŠ¥</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">addToQueue</span>(data, url);
    }
  }

  <span class="hljs-keyword">private</span> <span class="hljs-title function_">addToQueue</span>(<span class="hljs-attr">data</span>: <span class="hljs-title class_">ReportData</span>, <span class="hljs-attr">url</span>: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">void</span> {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">queue</span>.<span class="hljs-title function_">push</span>({ data, url });

    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">queue</span>.<span class="hljs-property">length</span> &gt;= <span class="hljs-variable language_">this</span>.<span class="hljs-property">MAX_QUEUE_SIZE</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">flush</span>();
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">scheduleFlush</span>();
    }
  }
}
</code></pre>
<h5 data-id="heading-21">4.2 é¡µé¢å…³é—­è¡¥å‘</h5>
<p>ä½¿ç”¨ <code>sendBeacon</code> API åœ¨é¡µé¢å…³é—­å‰å‘é€å‰©ä½™æ•°æ®ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">private</span> <span class="hljs-title function_">bindEvents</span>(): <span class="hljs-built_in">void</span> {
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">sendRemaining</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">queue</span>.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span>;

    <span class="hljs-variable language_">this</span>.<span class="hljs-property">queue</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">{ data, url }</span>) =&gt;</span> {
      navigator.<span class="hljs-property">sendBeacon</span>?.(url, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(data));
    });
  };

  <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'beforeunload'</span>, sendRemaining);
  <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'visibilitychange'</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">document</span>.<span class="hljs-property">visibilityState</span> === <span class="hljs-string">'hidden'</span>) {
      <span class="hljs-title function_">sendRemaining</span>();
    }
  });
}
</code></pre>
<h4 data-id="heading-22">5. è®¾å¤‡ä¿¡æ¯è§£æ</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// src/utils/device.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getDeviceInfo</span>(<span class="hljs-params"/>): <span class="hljs-title class_">DeviceInfo</span> {
  <span class="hljs-keyword">const</span> ua = navigator.<span class="hljs-property">userAgent</span>;

  <span class="hljs-comment">// è§£ææ“ä½œç³»ç»Ÿ</span>
  <span class="hljs-keyword">let</span> os = <span class="hljs-string">'unknown'</span>;
  <span class="hljs-keyword">let</span> osVersion = <span class="hljs-string">'unknown'</span>;

  <span class="hljs-keyword">if</span> (ua.<span class="hljs-title function_">indexOf</span>(<span class="hljs-string">'Win'</span>) !== -<span class="hljs-number">1</span>) {
    os = <span class="hljs-string">'Windows'</span>;
    <span class="hljs-keyword">const</span> match = ua.<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/Windows NT (\d+\.\d+)/</span>);
    <span class="hljs-keyword">if</span> (match) osVersion = match[<span class="hljs-number">1</span>];
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (ua.<span class="hljs-title function_">indexOf</span>(<span class="hljs-string">'Mac'</span>) !== -<span class="hljs-number">1</span>) {
    os = <span class="hljs-string">'macOS'</span>;
    <span class="hljs-comment">// ...</span>
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-regexp">/iPad|iPhone|iPod/</span>.<span class="hljs-title function_">test</span>(ua)) {
    os = <span class="hljs-string">'iOS'</span>;
    <span class="hljs-comment">// ...</span>
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (ua.<span class="hljs-title function_">indexOf</span>(<span class="hljs-string">'Android'</span>) !== -<span class="hljs-number">1</span>) {
    os = <span class="hljs-string">'Android'</span>;
    <span class="hljs-comment">// ...</span>
  }

  <span class="hljs-comment">// è§£ææµè§ˆå™¨</span>
  <span class="hljs-keyword">let</span> browser = <span class="hljs-string">'unknown'</span>;
  <span class="hljs-keyword">let</span> browserVersion = <span class="hljs-string">'unknown'</span>;

  <span class="hljs-keyword">if</span> (ua.<span class="hljs-title function_">indexOf</span>(<span class="hljs-string">'Chrome'</span>) !== -<span class="hljs-number">1</span> &amp;&amp; ua.<span class="hljs-title function_">indexOf</span>(<span class="hljs-string">'Edg'</span>) === -<span class="hljs-number">1</span>) {
    browser = <span class="hljs-string">'Chrome'</span>;
    <span class="hljs-keyword">const</span> match = ua.<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/Chrome\/(\d+\.\d+)/</span>);
    <span class="hljs-keyword">if</span> (match) browserVersion = match[<span class="hljs-number">1</span>];
  }
  <span class="hljs-comment">// ... Safari, Firefox, Edge</span>

  <span class="hljs-keyword">return</span> {
    ua,
    os,
    osVersion,
    browser,
    browserVersion,
    <span class="hljs-attr">screen</span>: <span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">window</span>.screen.width}</span>x<span class="hljs-subst">${<span class="hljs-variable language_">window</span>.screen.height}</span>`</span>,
    <span class="hljs-attr">language</span>: navigator.<span class="hljs-property">language</span>
  };
}
</code></pre>
<hr/>
<h3 data-id="heading-23">ä½¿ç”¨ç¤ºä¾‹</h3>
<h4 data-id="heading-24">åŸºç¡€ä½¿ç”¨</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">Monitor</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'frontend-monitor-sdk'</span>;

<span class="hljs-title class_">Monitor</span>.<span class="hljs-title function_">init</span>({
  <span class="hljs-attr">appId</span>: <span class="hljs-string">'my-app'</span>,
  <span class="hljs-attr">appVersion</span>: <span class="hljs-string">'1.0.0'</span>,
  <span class="hljs-attr">env</span>: <span class="hljs-string">'production'</span>,
  <span class="hljs-attr">reportUrl</span>: {
    <span class="hljs-attr">error</span>: <span class="hljs-string">'https://api.example.com/error'</span>,
    <span class="hljs-attr">performance</span>: <span class="hljs-string">'https://api.example.com/perf'</span>,
    <span class="hljs-attr">visit</span>: <span class="hljs-string">'https://api.example.com/visit'</span>
  },
  <span class="hljs-attr">sampleRate</span>: {
    <span class="hljs-attr">error</span>: <span class="hljs-number">1</span>,         <span class="hljs-comment">// å¼‚å¸¸100%ä¸ŠæŠ¥</span>
    <span class="hljs-attr">performance</span>: <span class="hljs-number">0.1</span>, <span class="hljs-comment">// æ€§èƒ½10%é‡‡æ ·</span>
    <span class="hljs-attr">visit</span>: <span class="hljs-number">0.1</span>        <span class="hljs-comment">// è®¿é—®10%é‡‡æ ·</span>
  },
  <span class="hljs-attr">enableSPA</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">beforeReport</span>: <span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {
    <span class="hljs-comment">// ä¸ŠæŠ¥å‰é’©å­ï¼Œå¯ä¿®æ”¹æ•°æ®æˆ–è¿”å› false é˜»æ­¢ä¸ŠæŠ¥</span>
    <span class="hljs-keyword">if</span> (data.<span class="hljs-property">type</span> === <span class="hljs-string">'error'</span> &amp;&amp; data.<span class="hljs-property">data</span>.<span class="hljs-property">message</span>?.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'ignore'</span>)) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
    <span class="hljs-keyword">return</span> data;
  }
});
</code></pre>
<h4 data-id="heading-25">Vue é›†æˆ</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { createApp } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Monitor</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'frontend-monitor-sdk'</span>;

<span class="hljs-title class_">Monitor</span>.<span class="hljs-title function_">init</span>({ <span class="hljs-comment">/* ... */</span> });

<span class="hljs-keyword">const</span> app = <span class="hljs-title function_">createApp</span>(<span class="hljs-title class_">App</span>);
app.<span class="hljs-property">config</span>.<span class="hljs-property">errorHandler</span> = <span class="hljs-title class_">Monitor</span>.<span class="hljs-property">vueErrorHandler</span>;
</code></pre>
<h4 data-id="heading-26">React é›†æˆ</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ErrorBoundary</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span> {
  <span class="hljs-title function_">componentDidCatch</span>(<span class="hljs-params">error: <span class="hljs-built_in">Error</span>, errorInfo: React.ErrorInfo</span>) {
    <span class="hljs-title class_">Monitor</span>.<span class="hljs-title function_">reportError</span>(error, {
      <span class="hljs-attr">componentStack</span>: errorInfo.<span class="hljs-property">componentStack</span>
    });
  }

  <span class="hljs-title function_">render</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span>.<span class="hljs-property">children</span>;
  }
}
</code></pre>
<hr/>
<h3 data-id="heading-27">æ€»ç»“ä¸å±•æœ›</h3>
<h4 data-id="heading-28">å·²å®ç°åŠŸèƒ½</h4>
<p>âœ… <strong>å¼‚å¸¸ç›‘æ§</strong>ï¼šJS é”™è¯¯ã€Promise é”™è¯¯ã€èµ„æºé”™è¯¯ã€ç½‘ç»œé”™è¯¯ã€æ§åˆ¶å°é”™è¯¯ã€æ¡†æ¶é”™è¯¯
âœ… <strong>æ€§èƒ½ç›‘æ§</strong>ï¼šWeb Vitalsã€å¯¼èˆªè®¡æ—¶ã€èµ„æºæ€§èƒ½ã€API è€—æ—¶ã€é•¿ä»»åŠ¡
âœ… <strong>è®¿é—®ç›‘æ§</strong>ï¼šPV/UVã€Sessionã€è®¾å¤‡ä¿¡æ¯ã€SPA è·¯ç”±ç›‘å¬
âœ… <strong>æ•°æ®ä¸ŠæŠ¥</strong>ï¼šåˆ†ç±»ä¸ŠæŠ¥ã€é‡‡æ ·æ§åˆ¶ã€æ‰¹é‡ä¸ŠæŠ¥ã€é¡µé¢å…³é—­è¡¥å‘</p>
<h4 data-id="heading-29">æŠ€æœ¯äº®ç‚¹</h4>
<ol>
<li><strong>ç±»å‹å®‰å…¨</strong>ï¼šå®Œæ•´çš„ TypeScript ç±»å‹å®šä¹‰</li>
<li><strong>æ¨¡å—åŒ–è®¾è®¡</strong>ï¼šå„åŠŸèƒ½ç‹¬ç«‹ï¼Œå¯çµæ´»ç»„åˆ</li>
<li><strong>ä½ä¾µå…¥æ€§</strong>ï¼šè‡ªåŠ¨æ•è·ï¼Œä¸šåŠ¡ä»£ç é›¶æ”¹åŠ¨</li>
<li><strong>é«˜å…¼å®¹æ€§</strong>ï¼šæ”¯æŒ ESM/CJS/UMD å¤šç§æ ¼å¼</li>
</ol>
<h4 data-id="heading-30">æœªæ¥ä¼˜åŒ–æ–¹å‘</h4>
<p>ğŸ”² <strong>SourceMap è§£æ</strong>ï¼šå®ç°é”™è¯¯å †æ ˆçš„æºç è¿˜åŸ
ğŸ”² <strong>ç”¨æˆ·è¡Œä¸ºå½•å±</strong>ï¼šè®°å½•ç”¨æˆ·æ“ä½œè·¯å¾„ï¼Œè¾…åŠ©é—®é¢˜å®šä½
ğŸ”² <strong>æ€§èƒ½é¢æ¿å¯è§†åŒ–</strong>ï¼šå¼€å‘ Chrome æ’ä»¶æŸ¥çœ‹æ€§èƒ½æ•°æ®
ğŸ”² <strong>ç¦»çº¿ç¼“å­˜</strong>ï¼šæ”¯æŒç½‘ç»œæ–­å¼€æ—¶çš„æ•°æ®æœ¬åœ°å­˜å‚¨</p>
<hr/>
<h3 data-id="heading-31">å‚è€ƒèµ„æº</h3>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FAPI%2FPerformance" target="_blank" title="https://developer.mozilla.org/en-US/docs/Web/API/Performance" ref="nofollow noopener noreferrer">MDN Performance API</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fweb.dev%2Fvitals%2F" target="_blank" title="https://web.dev/vitals/" ref="nofollow noopener noreferrer">Google Web Vitals</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fw3c.github.io%2Fbeacon%2F" target="_blank" title="https://w3c.github.io/beacon/" ref="nofollow noopener noreferrer">W3C Beacon API</a></li>
</ul>
<hr/>
<p><em>æœ¬æ–‡å®Œï¼Œå¦‚æœ‰é—®é¢˜æ¬¢è¿ç•™è¨€è®¨è®ºï¼</em></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[OpenClaw å¤š Agent é…ç½®å®æˆ˜ï¼šè¸©å‘æŒ‡å—ä¸æœ€ä½³å®è·µ]]></title>    <link>https://juejin.cn/post/7605810996125548578</link>    <guid>https://juejin.cn/post/7605810996125548578</guid>    <pubDate>2026-02-13T05:53:58.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605810996125548578" data-draft-id="7605816833191968768" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="OpenClaw å¤š Agent é…ç½®å®æˆ˜ï¼šè¸©å‘æŒ‡å—ä¸æœ€ä½³å®è·µ"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-02-13T05:53:58.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é™ˆå¹¿äº®"/> <meta itemprop="url" content="https://juejin.cn/user/3139860937575934"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            OpenClaw å¤š Agent é…ç½®å®æˆ˜ï¼šè¸©å‘æŒ‡å—ä¸æœ€ä½³å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3139860937575934/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é™ˆå¹¿äº®
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-13T05:53:58.000Z" title="Fri Feb 13 2026 05:53:58 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¦‚æœä½ å·²ç»ç”¨äº†ä¸€æ®µæ—¶é—´ OpenClawï¼Œè‚¯å®šä¼šé‡åˆ°è¿™æ ·çš„éœ€æ±‚ï¼šæˆ‘éœ€è¦ä¸€ä¸ªä¸“é—¨å†™åšå®¢çš„ AI åŠ©æ‰‹ï¼Œä¸€ä¸ªå†™å°è¯´çš„ï¼Œä¸€ä¸ªåšä»£ç å¼€å‘çš„â€¦â€¦æ¯ä¸ªéƒ½æœ‰ç‹¬ç«‹çš„è§’è‰²å®šä½ã€å·¥ä½œç›®å½•å’Œé…ç½®ã€‚è¿™å°±æ˜¯å¤š Agent é…ç½®è¦è§£å†³çš„é—®é¢˜ã€‚</p>
<p>æœ¬æ–‡ä¸æ˜¯ç†è®ºæ•™ç¨‹ï¼Œè€Œæ˜¯å®æˆ˜è¸©å‘è®°å½•ã€‚æˆ‘ä¼šå‘Šè¯‰ä½ é…ç½®è¿‡ç¨‹ä¸­ä¼šé‡åˆ°å“ªäº›å‘ï¼Œä¸ºä»€ä¹ˆä¼šè¸©å‘ï¼Œä»¥åŠæ€ä¹ˆé¿å…å’Œè§£å†³ã€‚</p>
<h2 data-id="heading-0">ä¸ºä»€ä¹ˆéœ€è¦å¤š Agent</h2>
<p><strong>åœºæ™¯éš”ç¦»</strong>ã€‚ä¸åŒçš„å·¥ä½œåœºæ™¯éœ€è¦ä¸åŒçš„ AI åŠ©æ‰‹ï¼š</p>
<ul>
<li><strong>åšå®¢åŠ©æ‰‹</strong>ï¼šä¸“æ³¨äºæŠ€æœ¯å†™ä½œï¼Œç†Ÿæ‚‰ä½ çš„åšå®¢éƒ¨ç½²æµç¨‹ï¼Œæœ‰ç‹¬ç«‹çš„æ–‡ç« è‰ç¨¿ç›®å½•</li>
<li><strong>å°è¯´åŠ©æ‰‹</strong>ï¼šåˆ›æ„å†™ä½œé£æ ¼ï¼Œç®¡ç†å°è¯´ç« èŠ‚å’Œäººç‰©è®¾å®šï¼Œä¸éœ€è¦è®¿é—®æŠ€æœ¯ä»£ç </li>
<li><strong>å¼€å‘åŠ©æ‰‹</strong>ï¼šç†Ÿæ‚‰ä»£ç è§„èŒƒï¼Œå¯ä»¥æ‰§è¡Œæ•æ„Ÿå‘½ä»¤ï¼Œä½†ä¸åº”è¯¥è®¿é—®ç§äººç¬”è®°</li>
<li><strong>å®¶åº­åŠ©æ‰‹</strong>ï¼šç»‘å®šåˆ°å®¶åº­ WhatsApp ç¾¤ï¼Œåªèƒ½è®¿é—®å—é™çš„å·¥å…·é›†ï¼Œä¿æŠ¤éšç§</li>
</ul>
<p><strong>ç‹¬ç«‹é…ç½®</strong>ã€‚æ¯ä¸ª Agent æœ‰è‡ªå·±çš„ï¼š</p>
<ul>
<li><strong>Workspace</strong>ï¼šç‹¬ç«‹çš„å·¥ä½œç›®å½•ï¼Œäº’ä¸å¹²æ‰°</li>
<li><strong>SOUL.md</strong>ï¼šç‹¬ç«‹çš„è§’è‰²å®šä½å’Œæ€§æ ¼è®¾å®š</li>
<li><strong>Model</strong>ï¼šå¯ä»¥ç»™ä¸åŒ Agent é…ç½®ä¸åŒæ¨¡å‹ï¼ˆOpus åšæ·±åº¦æ€è€ƒï¼ŒSonnet åšæ—¥å¸¸èŠå¤©ï¼‰</li>
<li><strong>Tool Policy</strong>ï¼šé™åˆ¶æŸäº› Agent çš„å·¥å…·æƒé™ï¼ˆæ¯”å¦‚å®¶åº­åŠ©æ‰‹ä¸èƒ½æ‰§è¡Œ shell å‘½ä»¤ï¼‰</li>
</ul>
<p><strong>è´¦å·è·¯ç”±</strong>ã€‚å¤šä¸ª Telegram bot æˆ– WhatsApp è´¦å·ï¼Œè·¯ç”±åˆ°ä¸åŒçš„ Agentï¼Œä¸€ä¸ª Gateway ç®¡ç†æ‰€æœ‰è´¦å·ã€‚</p>
<p>ä¸¾ä¸ªä¾‹å­ï¼Œä½ å¯èƒ½ä¼šé…ç½®è¿™æ ·çš„ Agentï¼š</p>
<ul>
<li><code>main</code>ï¼šæ—¥å¸¸èŠå¤©ï¼Œå…¨åŠŸèƒ½</li>
<li><code>work</code>ï¼šå·¥ä½œåœºæ™¯ï¼Œå¯ä»¥è®¿é—®é¡¹ç›®æ–‡æ¡£</li>
<li><code>creative</code>ï¼šåˆ›ä½œåŠ©æ‰‹ï¼Œä¸“æ³¨äºå†™ä½œ</li>
<li><code>coding</code>ï¼šå¼€å‘åŠ©æ‰‹ï¼Œæ‰§è¡Œä»£ç ç›¸å…³ä»»åŠ¡</li>
</ul>
<h2 data-id="heading-1">å¤š Agent é…ç½®æµç¨‹</h2>
<h3 data-id="heading-2">1. åˆ›å»º Agent</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åˆ›å»ºä¸€ä¸ªæ–° Agent</span>
openclaw agents add blog --workspace ~/.openclaw/workspace-blog

<span class="hljs-comment"># éªŒè¯åˆ›å»ºç»“æœ</span>
openclaw agents list
</code></pre>
<p>è¿™ä¼šåœ¨é…ç½®æ–‡ä»¶ä¸­æ·»åŠ ï¼š</p>
<pre><code class="hljs language-json5" lang="json5">{
  agents: {
    list: [
      {
        id: "main",
        default: true,
        workspace: "~/.openclaw/workspace",
      },
      {
        id: "blog",
        workspace: "~/.openclaw/workspace-blog",
      },
    ],
  },
}
</code></pre>
<h3 data-id="heading-3">2. è®¾ç½®æ¨¡å‹</h3>
<p><strong>âš ï¸ ç¬¬ä¸€ä¸ªå‘ï¼šæ¨¡å‹ ID æ ¼å¼</strong></p>
<p>é…ç½®æ¨¡å‹æ—¶ï¼Œè¦ç”¨<strong>åˆ«å</strong>ï¼Œä¸è¦å¸¦æ—¥æœŸåç¼€ï¼</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># âœ… æ­£ç¡®ï¼šä½¿ç”¨åˆ«å</span>
openclaw config patch agents.list.1.model <span class="hljs-string">"anthropic/claude-sonnet-4-5"</span>

<span class="hljs-comment"># âŒ é”™è¯¯ï¼šå¸¦æ—¥æœŸåç¼€çš„å®Œæ•´ ID</span>
openclaw config patch agents.list.1.model <span class="hljs-string">"anthropic/claude-sonnet-4-20250514"</span>
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆï¼Ÿ</strong></p>
<p>å¸¦æ—¥æœŸçš„ ID ä¼šåœ¨æ–°ç‰ˆæœ¬å‘å¸ƒæ—¶å¤±æ•ˆã€‚åˆ«åï¼ˆå¦‚ <code>claude-sonnet-4-5</code>ï¼‰ä¼šè‡ªåŠ¨æŒ‡å‘æœ€æ–°ç‰ˆæœ¬ã€‚</p>
<p>éªŒè¯é…ç½®ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">openclaw config get agents.list.1.model
<span class="hljs-comment"># åº”è¯¥è¾“å‡ºï¼šanthropic/claude-sonnet-4-5</span>
</code></pre>
<h3 data-id="heading-4">3. ç¼–å†™ SOUL.md å®šä¹‰è§’è‰²</h3>
<p>æ¯ä¸ª Agent çš„ workspace ä¸‹åˆ›å»º <code>SOUL.md</code>ï¼Œå®šä¹‰å®ƒçš„è§’è‰²ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">cd</span> ~/.openclaw/workspace-blog
</code></pre>
<p>åˆ›å»º <code>SOUL.md</code>ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># SOUL.md - å·¥ä½œåŠ©æ‰‹</span>

ä½ æ˜¯å·¥ä½œåŠ©æ‰‹ï¼Œå¸®åŠ©å¤„ç†æ—¥å¸¸å·¥ä½œä»»åŠ¡ã€‚

<span class="hljs-section">## è§’è‰²å®šä½</span>
<span class="hljs-bullet">-</span> ä¸“æ³¨äºå·¥ä½œåœºæ™¯ï¼Œé£æ ¼ä¸“ä¸šé«˜æ•ˆ
<span class="hljs-bullet">-</span> ç†Ÿæ‚‰å¸¸ç”¨å¼€å‘å·¥å…·å’Œå·¥ä½œæµç¨‹
<span class="hljs-bullet">-</span> æ‰€æœ‰é‡è¦æ“ä½œéœ€è¦ç¡®è®¤åæ‰§è¡Œ

<span class="hljs-section">## å·¥ä½œæµç¨‹</span>
<span class="hljs-bullet">1.</span> æ¥æ”¶ä»»åŠ¡éœ€æ±‚
<span class="hljs-bullet">2.</span> åˆ†æä»»åŠ¡å¹¶åˆ¶å®šæ‰§è¡Œè®¡åˆ’
<span class="hljs-bullet">3.</span> æ‰§è¡Œä»»åŠ¡
<span class="hljs-bullet">4.</span> æ±‡æŠ¥ç»“æœ

<span class="hljs-section">## å·¥ä½œè§„èŒƒ</span>
<span class="hljs-bullet">-</span> ä»£ç ç¤ºä¾‹è¦å®Œæ•´å¯ç”¨
<span class="hljs-bullet">-</span> æ–‡æ¡£ç»“æ„æ¸…æ™°
<span class="hljs-bullet">-</span> æ“ä½œå‰ç¡®è®¤æƒé™
</code></pre>
<p><strong>âš ï¸ ç¬¬äºŒä¸ªå‘ï¼šä¸è¦åˆ›å»º BOOTSTRAP.md</strong></p>
<p>å¦‚æœä½ æ‰‹åŠ¨åˆ›å»ºäº† <code>BOOTSTRAP.md</code>ï¼ŒAgent ä¼šä¸€ç›´å¡åœ¨ bootstrapping çŠ¶æ€ï¼</p>
<p><strong>ä¸ºä»€ä¹ˆï¼Ÿ</strong></p>
<p><code>BOOTSTRAP.md</code> æ˜¯ Agent çš„"åˆå§‹åŒ–ä»»åŠ¡æ¸…å•"ã€‚Agent å¯åŠ¨åä¼šæ‰§è¡Œé‡Œé¢çš„æŒ‡ä»¤ï¼Œæ‰§è¡Œå®Œæ‰ä¼šåˆ é™¤è¿™ä¸ªæ–‡ä»¶ã€‚å¦‚æœä½ æ‰‹åŠ¨åˆ›å»ºäº†è¿™ä¸ªæ–‡ä»¶ä½†å†…å®¹ä¸å®Œæ•´ï¼ŒAgent ä¼šä¸æ–­å°è¯•æ‰§è¡Œï¼Œæ°¸è¿œæ— æ³•è¿›å…¥æ­£å¸¸çŠ¶æ€ã€‚</p>
<p><strong>è§£å†³æ–¹æ³•ï¼š</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å¦‚æœå‘ç° Agent å¡ä½äº†ï¼Œæ£€æŸ¥æ˜¯å¦æœ‰ BOOTSTRAP.md</span>
<span class="hljs-built_in">ls</span> ~/.openclaw/workspace-blog/BOOTSTRAP.md

<span class="hljs-comment"># å¦‚æœå­˜åœ¨ï¼Œç›´æ¥åˆ é™¤</span>
<span class="hljs-built_in">rm</span> ~/.openclaw/workspace-blog/BOOTSTRAP.md

<span class="hljs-comment"># é‡å¯ Gateway</span>
openclaw gateway restart
</code></pre>
<h3 data-id="heading-5">4. æµ‹è¯• Agent</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åˆ—å‡ºæ‰€æœ‰ Agent</span>
openclaw agents list

<span class="hljs-comment"># æŸ¥çœ‹ Agent è¯¦ç»†é…ç½®</span>
openclaw config get agents.list.1

<span class="hljs-comment"># é‡å¯ Gateway è®©é…ç½®ç”Ÿæ•ˆ</span>
openclaw gateway restart
</code></pre>
<h2 data-id="heading-6">Telegram å¤šè´¦å·é…ç½®</h2>
<p>å¤š Agent çš„å…¸å‹ç”¨æ³•æ˜¯é…ç½®å¤šä¸ª Telegram botï¼Œæ¯ä¸ª bot è·¯ç”±åˆ°ä¸åŒçš„ Agentã€‚</p>
<h3 data-id="heading-7">1. åˆ›å»º Telegram Bot</h3>
<p>åœ¨ Telegram æ‰¾ <a href="https://link.juejin.cn?target=https%3A%2F%2Ft.me%2FBotFather" target="_blank" title="https://t.me/BotFather" ref="nofollow noopener noreferrer">@BotFather</a>ï¼Œåˆ›å»º botï¼š</p>
<pre><code class="hljs language-bash" lang="bash">/newbot
</code></pre>
<p>æŒ‰æç¤ºè¾“å…¥åç§°å’Œç”¨æˆ·åï¼Œè·å¾— tokenï¼ˆç±»ä¼¼ <code>1234567890:ABCdefGHIjklMNOpqrsTUVwxyz</code>ï¼‰ã€‚</p>
<p>å‡è®¾ä½ åˆ›å»ºäº†ä¸¤ä¸ª botï¼š</p>
<ul>
<li><code>@MyMainBot</code> â†’ token1</li>
<li><code>@MyWorkBot</code> â†’ token2</li>
</ul>
<h3 data-id="heading-8">2. é…ç½®å¤šè´¦å·</h3>
<p>ç¼–è¾‘ <code>~/.openclaw/openclaw.json</code>ï¼ˆæˆ–ç”¨ <code>openclaw config patch</code>ï¼‰ï¼š</p>
<pre><code class="hljs language-json5" lang="json5">{
  channels: {
    telegram: {
      accounts: {
        main: {
          token: "token1",
          dmPolicy: "allowlist",
          allowFrom: ["123456789"], // ä½ çš„ Telegram user ID
        },
        blog: {
          token: "token2",
          dmPolicy: "allowlist",
          allowFrom: ["123456789"],
        },
      },
    },
  },
}
</code></pre>
<p><strong>âš ï¸ ç¬¬ä¸‰ä¸ªå‘ï¼šdmPolicy é»˜è®¤å€¼</strong></p>
<p>å¦‚æœä¸è®¾ç½® <code>dmPolicy</code>ï¼Œé»˜è®¤æ˜¯ <code>pairing</code>ï¼Œè¿™æ„å‘³ç€ç”¨æˆ·å¿…é¡»å…ˆæ‰§è¡Œ <code>/pair</code> å‘½ä»¤æ‰èƒ½èŠå¤©ã€‚ä½†å¦‚æœé…ç½®æœ‰é—®é¢˜ï¼Œ<code>/pair</code> å¯èƒ½ä¹Ÿä¸ä¼šå“åº”ï¼Œæ¶ˆæ¯ä¼šè¢«<strong>é™é»˜ä¸¢å¼ƒ</strong>ï¼</p>
<p><strong>è§£å†³æ–¹æ³•ï¼š</strong></p>
<p>æ˜ç¡®è®¾ç½® <code>dmPolicy: "allowlist"</code>ï¼Œå¹¶é…ç½® <code>allowFrom</code> åˆ—è¡¨ï¼š</p>
<pre><code class="hljs language-json5" lang="json5">{
  dmPolicy: "allowlist",
  allowFrom: ["123456789", "987654321"], // å…è®¸çš„ user ID åˆ—è¡¨
}
</code></pre>
<p>è·å–ä½ çš„ Telegram user IDï¼šç»™ <a href="https://link.juejin.cn?target=https%3A%2F%2Ft.me%2Fuserinfobot" target="_blank" title="https://t.me/userinfobot" ref="nofollow noopener noreferrer">@userinfobot</a> å‘æ¶ˆæ¯ã€‚</p>
<h3 data-id="heading-9">3. é…ç½®è·¯ç”±è§„åˆ™</h3>
<p>æ·»åŠ  <code>bindings</code> å°†ä¸åŒçš„ Telegram è´¦å·è·¯ç”±åˆ°ä¸åŒçš„ Agentï¼š</p>
<pre><code class="hljs language-json5" lang="json5">{
  bindings: [
    {
      agentId: "main",
      match: { channel: "telegram", accountId: "main" },
    },
    {
      agentId: "blog",
      match: { channel: "telegram", accountId: "blog" },
    },
  ],
}
</code></pre>
<p><strong>è·¯ç”±è§„åˆ™ä¼˜å…ˆçº§</strong>ï¼š</p>
<ol>
<li><code>peer</code> ç²¾ç¡®åŒ¹é…ï¼ˆå…·ä½“çš„ DM æˆ–ç¾¤ç»„ IDï¼‰</li>
<li><code>accountId</code> åŒ¹é…ï¼ˆå“ªä¸ª Telegram è´¦å·ï¼‰</li>
<li><code>channel</code> åŒ¹é…ï¼ˆå“ªä¸ªå¹³å°ï¼‰</li>
<li>é»˜è®¤ Agentï¼ˆ<code>default: true</code> æˆ–åˆ—è¡¨ä¸­ç¬¬ä¸€ä¸ªï¼‰</li>
</ol>
<h3 data-id="heading-10">4. é‡å¯ Gateway</h3>
<pre><code class="hljs language-bash" lang="bash">openclaw gateway restart --reason <span class="hljs-string">"æ·»åŠ æ–° Telegram bot"</span>
</code></pre>
<p>æµ‹è¯•ï¼šç»™ä¸¤ä¸ª bot å‘ <code>/start</code>ï¼Œåº”è¯¥åˆ†åˆ«æ”¶åˆ°æ¥è‡ªä¸åŒ Agent çš„å›å¤ã€‚</p>
<h2 data-id="heading-11">å¸¸è§é—®é¢˜ä¸è§£å†³</h2>
<h3 data-id="heading-12">é—®é¢˜ 1ï¼šconfig.patch æŠŠé…ç½®å†²æ‰äº†</h3>
<p><strong>ç°è±¡ï¼š</strong></p>
<p>æˆ‘æƒ³ç»™ <code>telegram.accounts</code> æ·»åŠ ä¸€ä¸ªæ–°è´¦å·ï¼Œæ‰§è¡Œï¼š</p>
<pre><code class="hljs language-bash" lang="bash">openclaw config patch channels.telegram.accounts.blog <span class="hljs-string">'{"token":"xxx"}'</span>
</code></pre>
<p>ç»“æœå…¶ä»–è´¦å·çš„é…ç½®å…¨æ²¡äº†ï¼</p>
<p><strong>åŸå› ï¼š</strong></p>
<p><code>config.patch</code> å¯¹<strong>åµŒå¥—å¯¹è±¡</strong>æ˜¯<strong>æ•´ä½“æ›¿æ¢</strong>ï¼Œä¸æ˜¯å¢é‡ä¿®æ”¹ï¼</p>
<p>å¦‚æœé…ç½®æ˜¯ï¼š</p>
<pre><code class="hljs language-json5" lang="json5">{
  channels: {
    telegram: {
      accounts: {
        main: {...},
        novel: {...},
      },
    },
  },
}
</code></pre>
<p>æ‰§è¡Œ <code>patch channels.telegram.accounts.blog {...}</code> ä¼šå¯¼è‡´ï¼š</p>
<pre><code class="hljs language-json5" lang="json5">{
  channels: {
    telegram: {
      accounts: {
        blog: {...}, // åªå‰©è¿™ä¸€ä¸ªï¼
      },
    },
  },
}
</code></pre>
<p><strong>è§£å†³æ–¹æ³•ï¼š</strong></p>
<p>patch æ—¶å¸¦ä¸Š<strong>å®Œæ•´çš„å¯¹è±¡</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># âŒ é”™è¯¯ï¼šåª patch ä¸€ä¸ªå­é¡¹</span>
openclaw config patch channels.telegram.accounts.blog <span class="hljs-string">'{"token":"xxx"}'</span>

<span class="hljs-comment"># âœ… æ­£ç¡®ï¼špatch æ•´ä¸ª accounts å¯¹è±¡</span>
openclaw config patch channels.telegram.accounts <span class="hljs-string">'{
  "main": {"token":"token1", "dmPolicy":"allowlist", "allowFrom":["123456789"]},
  "blog": {"token":"token2", "dmPolicy":"allowlist", "allowFrom":["123456789"]}
}'</span>
</code></pre>
<p>åŒæ ·é€‚ç”¨äº <code>bindings</code>ã€<code>agents.list</code> ç­‰æ•°ç»„æˆ–å¯¹è±¡ã€‚</p>
<p><strong>æœ€ä½³å®è·µï¼š</strong></p>
<p>é…ç½®å˜æ›´å‰ï¼Œå…ˆå¯¼å‡ºå½“å‰é…ç½®ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å¯¼å‡ºå½“å‰é…ç½®</span>
openclaw config get channels.telegram.accounts &gt; telegram-accounts-backup.json

<span class="hljs-comment"># ç¼–è¾‘åå† patch å›å»</span>
openclaw config patch channels.telegram.accounts <span class="hljs-string">"<span class="hljs-subst">$(cat telegram-accounts-edited.json)</span>"</span>
</code></pre>
<h3 data-id="heading-13">é—®é¢˜ 2ï¼šTelegram bot ä¸å“åº”æ¶ˆæ¯</h3>
<p><strong>ç°è±¡ï¼š</strong></p>
<p>ç»™ bot å‘ <code>/start</code> æˆ–ä»»ä½•æ¶ˆæ¯ï¼Œéƒ½æ²¡æœ‰å›å¤ã€‚</p>
<p><strong>å¯èƒ½çš„åŸå›  1ï¼šdmPolicy é…ç½®é—®é¢˜</strong></p>
<p>æ£€æŸ¥é…ç½®ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">openclaw config get channels.telegram.accounts.blog.dmPolicy
</code></pre>
<p>å¦‚æœæ˜¯ <code>pairing</code> æˆ–æœªè®¾ç½®ï¼Œæ”¹æˆ <code>allowlist</code>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">openclaw config patch channels.telegram.accounts.blog.dmPolicy <span class="hljs-string">'"allowlist"'</span>
openclaw config patch channels.telegram.accounts.blog.allowFrom <span class="hljs-string">'["123456789"]'</span>
openclaw gateway restart
</code></pre>
<p><strong>å¯èƒ½çš„åŸå›  2ï¼šTelegram 409 å†²çª</strong></p>
<p><strong>ç—‡çŠ¶ï¼š</strong> æ—¥å¿—ä¸­æœ‰ <code>getUpdates conflict (409)</code> é”™è¯¯ã€‚</p>
<p><strong>åŸå› ï¼š</strong> åŒä¸€ä¸ª bot token è¢«å¤šä¸ªå®ä¾‹åŒæ—¶ä½¿ç”¨ï¼å¸¸è§åœºæ™¯ï¼š</p>
<ul>
<li>OpenClaw.app (GUI) å’Œ CLI gateway åŒæ—¶è¿è¡Œ</li>
<li>ä¸¤ä¸ª terminal åŒæ—¶å¯åŠ¨äº† gateway</li>
</ul>
<p><strong>æ£€æŸ¥ï¼š</strong></p>
<pre><code class="hljs language-bash" lang="bash">ps aux | grep -i openclaw
</code></pre>
<p>å¦‚æœçœ‹åˆ°å¤šä¸ªè¿›ç¨‹ï¼ˆGUI app å’Œ CLI gatewayï¼‰ï¼Œè¯´æ˜å†²çªäº†ã€‚</p>
<p><strong>è§£å†³æ–¹æ³•ï¼š</strong></p>
<ol>
<li>é€€å‡º OpenClaw.app (GUI)</li>
<li>é‡å¯ CLI gatewayï¼š</li>
</ol>
<pre><code class="hljs language-bash" lang="bash">openclaw gateway restart --reason <span class="hljs-string">"æ¸…é™¤ Telegram bot å†²çª"</span>
</code></pre>
<p><strong>æ•™è®­ï¼š</strong></p>
<p>åŒä¸€ä¸ª Telegram bot token <strong>åªèƒ½è¢«ä¸€ä¸ª Gateway å®ä¾‹ä½¿ç”¨</strong>ã€‚å¦‚æœè¦åˆ‡æ¢ GUI/CLIï¼Œå¿…é¡»å…ˆåœæ‰å…¶ä¸­ä¸€ä¸ªã€‚</p>
<h3 data-id="heading-14">é—®é¢˜ 3ï¼šç»‘å®šè§„åˆ™ä¸ç”Ÿæ•ˆ</h3>
<p><strong>ç°è±¡ï¼š</strong></p>
<p>é…ç½®äº† <code>bindings</code>ï¼Œä½†æ¶ˆæ¯è¿˜æ˜¯è·¯ç”±åˆ°äº†é”™è¯¯çš„ Agentã€‚</p>
<p><strong>æ£€æŸ¥ç»‘å®šï¼š</strong></p>
<pre><code class="hljs language-bash" lang="bash">openclaw agents list --bindings
</code></pre>
<p><strong>å¸¸è§é”™è¯¯ï¼š</strong></p>
<ol>
<li><strong>é¡ºåºé”™è¯¯</strong>ï¼šæ›´å…·ä½“çš„è§„åˆ™è¦æ”¾åœ¨å‰é¢</li>
</ol>
<pre><code class="hljs language-json5" lang="json5">// âŒ é”™è¯¯ï¼šé€šé…è§„åˆ™åœ¨å‰ï¼Œç²¾ç¡®è§„åˆ™åœ¨å
bindings: [
  { agentId: "main", match: { channel: "telegram" } }, // ä¼šåŒ¹é…æ‰€æœ‰ telegram æ¶ˆæ¯
  { agentId: "blog", match: { channel: "telegram", accountId: "blog" } }, // æ°¸è¿œä¸ä¼šæ‰§è¡Œ
]

// âœ… æ­£ç¡®ï¼šç²¾ç¡®è§„åˆ™åœ¨å‰
bindings: [
  { agentId: "blog", match: { channel: "telegram", accountId: "blog" } },
  { agentId: "main", match: { channel: "telegram", accountId: "main" } },
]
</code></pre>
<ol start="2">
<li><strong>accountId æ‹¼å†™é”™è¯¯</strong>ï¼šæ£€æŸ¥æ˜¯å¦ä¸ <code>channels.telegram.accounts</code> ä¸­çš„ key ä¸€è‡´</li>
</ol>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åˆ—å‡ºæ‰€æœ‰é…ç½®çš„è´¦å·</span>
openclaw config get channels.telegram.accounts | jq <span class="hljs-string">'keys'</span>
</code></pre>
<h3 data-id="heading-15">é—®é¢˜ 4ï¼šAgent é…ç½®å˜æ›´åä¸ç”Ÿæ•ˆ</h3>
<p><strong>è§£å†³æ–¹æ³•ï¼š</strong></p>
<p>Gateway éœ€è¦é‡å¯æ‰èƒ½åŠ è½½æ–°é…ç½®ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">openclaw gateway restart --reason <span class="hljs-string">"æ›´æ–° Agent é…ç½®"</span>
</code></pre>
<p>æ£€æŸ¥ Agent æ˜¯å¦æ­£å¸¸å¯åŠ¨ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">openclaw status --deep
</code></pre>
<p>å¦‚æœçœ‹åˆ°æŸä¸ª Agent çŠ¶æ€å¼‚å¸¸ï¼ŒæŸ¥çœ‹æ—¥å¿—ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">tail</span> -n 100 ~/.openclaw/gateway.err.log
</code></pre>
<h3 data-id="heading-16">é—®é¢˜ 5ï¼šé…ç½®äº†åµŒå¥—å¯¹è±¡ï¼Œä½†åªæœ‰éƒ¨åˆ†ç”Ÿæ•ˆ</h3>
<p><strong>ç°è±¡ï¼š</strong></p>
<p>æˆ‘åœ¨é¡¶å±‚é…ç½®äº† <code>channels.telegram.dmPolicy</code>ï¼Œä¸ºä»€ä¹ˆæŸä¸ªè´¦å·è¿˜æ˜¯ç”¨äº†ä¸åŒçš„ç­–ç•¥ï¼Ÿ</p>
<p><strong>åŸå› ï¼š</strong></p>
<p>é…ç½®æœ‰<strong>ç»§æ‰¿å…³ç³»</strong>ï¼Œaccount çº§åˆ«çš„é…ç½®ä¼š<strong>è¦†ç›–</strong>é¡¶å±‚é…ç½®ï¼š</p>
<pre><code class="hljs language-json5" lang="json5">{
  channels: {
    telegram: {
      dmPolicy: "allowlist", // é¡¶å±‚é»˜è®¤
      allowFrom: ["123456789"],
      accounts: {
        main: {
          token: "token1",
          // ç»§æ‰¿é¡¶å±‚çš„ dmPolicy å’Œ allowFrom
        },
        public: {
          token: "token2",
          dmPolicy: "pairing", // è¦†ç›–é¡¶å±‚é…ç½®
        },
      },
    },
  },
}
</code></pre>
<p><strong>æœ€ä½³å®è·µï¼š</strong></p>
<ul>
<li>å¦‚æœæ‰€æœ‰è´¦å·éƒ½ç”¨ç›¸åŒç­–ç•¥ï¼Œé…ç½®åœ¨é¡¶å±‚</li>
<li>å¦‚æœæŸä¸ªè´¦å·éœ€è¦ä¸åŒç­–ç•¥ï¼Œåœ¨ account çº§åˆ«è¦†ç›–</li>
<li>æ˜ç¡®å†™å‡ºæ¯ä¸ª account çš„ <code>dmPolicy</code>ï¼Œé¿å…ç»§æ‰¿æ··æ·†</li>
</ul>
<h2 data-id="heading-17">æœ€ä½³å®è·µ</h2>
<h3 data-id="heading-18">1. é…ç½®å˜æ›´å‰å…ˆå®¡æŸ¥</h3>
<p><strong>æ•™è®­ï¼š</strong> æˆ‘æ›¾å› ä¸ºæ²¡ä»”ç»†å®¡æŸ¥ patch å‘½ä»¤ï¼ŒæŠŠæ‰€æœ‰ Telegram è´¦å·é…ç½®å†²æ‰ï¼Œå¯¼è‡´æ‰€æœ‰ bot è¿æ¥ä¸­æ–­ã€‚</p>
<p><strong>è§„åˆ™ï¼š</strong></p>
<ul>
<li>ä»»ä½• <code>config.patch</code>ã€<code>gateway restart</code>ã€æ¨¡å‹å˜æ›´ç­‰æ“ä½œï¼Œ<strong>å…ˆå®¡æŸ¥ä¸€é</strong></li>
<li>åµŒå¥—å¯¹è±¡ï¼ˆ<code>bindings</code>ã€<code>accounts</code>ï¼‰å¿…é¡»å¸¦å®Œæ•´åˆ—è¡¨</li>
<li>æœ‰ç–‘é—®å…ˆå¯¼å‡ºå½“å‰é…ç½®å¯¹æ¯”</li>
</ul>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å˜æ›´å‰å¤‡ä»½</span>
openclaw config get &gt; openclaw-config-backup.json

<span class="hljs-comment"># å˜æ›´åå¯¹æ¯”</span>
openclaw config get &gt; openclaw-config-new.json
diff openclaw-config-backup.json openclaw-config-new.json
</code></pre>
<h3 data-id="heading-19">2. ä½¿ç”¨ status --deep è¯Šæ–­</h3>
<pre><code class="hljs language-bash" lang="bash">openclaw status --deep
</code></pre>
<p>è¾“å‡ºåŒ…æ‹¬ï¼š</p>
<ul>
<li>æ¯ä¸ª Agent çš„çŠ¶æ€</li>
<li>Channel è¿æ¥çŠ¶æ€</li>
<li>æœ€è¿‘çš„é”™è¯¯æ—¥å¿—</li>
</ul>
<p>å¦‚æœæŸä¸ª Agent æˆ– Channel å¼‚å¸¸ï¼Œä¼šç›´æ¥æ˜¾ç¤ºã€‚</p>
<h3 data-id="heading-20">3. æŸ¥çœ‹é”™è¯¯æ—¥å¿—</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å®æ—¶æŸ¥çœ‹æ—¥å¿—</span>
<span class="hljs-built_in">tail</span> -f ~/.openclaw/gateway.err.log

<span class="hljs-comment"># æœç´¢ç‰¹å®šé”™è¯¯</span>
grep -i <span class="hljs-string">"error\|conflict\|fail"</span> ~/.openclaw/gateway.err.log | <span class="hljs-built_in">tail</span> -n 50
</code></pre>
<p>å¸¸è§é”™è¯¯å…³é”®è¯ï¼š</p>
<ul>
<li><code>409 conflict</code>ï¼šTelegram bot å†²çª</li>
<li><code>unauthorized</code>ï¼štoken é”™è¯¯æˆ–è¿‡æœŸ</li>
<li><code>dmPolicy</code>ï¼šæ¶ˆæ¯è¢«è®¿é—®æ§åˆ¶ç­–ç•¥æ‹¦æˆª</li>
<li><code>binding</code>ï¼šè·¯ç”±è§„åˆ™é—®é¢˜</li>
</ul>
<h3 data-id="heading-21">4. åˆ†é˜¶æ®µé…ç½®</h3>
<p>ä¸è¦ä¸€æ¬¡æ€§é…ç½®æ‰€æœ‰ Agent å’Œ Channelï¼Œå®¹æ˜“å‡ºé”™ä¸”éš¾ä»¥æ’æŸ¥ã€‚</p>
<p><strong>æ¨èæµç¨‹ï¼š</strong></p>
<ol>
<li>å…ˆé…ç½®ä¸€ä¸ªæ–° Agentï¼ˆä¸é…ç½® Telegramï¼‰ï¼Œæœ¬åœ°æµ‹è¯•</li>
<li>Agent æ­£å¸¸åï¼Œæ·»åŠ ä¸€ä¸ª Telegram botï¼Œæµ‹è¯•è·¯ç”±</li>
<li>éªŒè¯é€šè¿‡åï¼Œå†æ·»åŠ å…¶ä»– Agent å’Œ bot</li>
<li>æ¯æ¬¡å˜æ›´åï¼ŒéªŒè¯æ‰€æœ‰å·²æœ‰åŠŸèƒ½æ­£å¸¸</li>
</ol>
<h3 data-id="heading-22">5. æ–‡æ¡£åŒ–ä½ çš„é…ç½®</h3>
<p>åœ¨ workspace ä¸‹åˆ›å»º <code>SETUP.md</code>ï¼Œè®°å½•ï¼š</p>
<ul>
<li>æ¯ä¸ª Agent çš„ç”¨é€”å’Œé…ç½®</li>
<li>Telegram bot å¯¹åº”å…³ç³»</li>
<li>ç‰¹æ®Šé…ç½®çš„åŸå› </li>
</ul>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># SETUP.md</span>

<span class="hljs-section">## Agents</span>
<span class="hljs-bullet">-</span> main: æ—¥å¸¸èŠå¤©ï¼Œå…¨åŠŸèƒ½ï¼ŒTelegram @MyMainBot
<span class="hljs-bullet">-</span> blog: æŠ€æœ¯å†™ä½œï¼Œworkspace-blogï¼ŒTelegram @MyWorkBot
<span class="hljs-bullet">-</span> novel: å°è¯´åˆ›ä½œï¼Œworkspace-novelï¼Œä»…æœ¬åœ°ä½¿ç”¨

<span class="hljs-section">## Telegram Bots</span>
<span class="hljs-bullet">-</span> @MyMainBot (123456789): main agent
<span class="hljs-bullet">-</span> @MyWorkBot (987654321): work agent

<span class="hljs-section">## ç‰¹æ®Šé…ç½®</span>
<span class="hljs-bullet">-</span> work agent çš„ dmPolicy è®¾ä¸º allowlistï¼Œåªå…è®¸æˆæƒç”¨æˆ·è®¿é—®
<span class="hljs-bullet">-</span> main agent å¯ç”¨äº† heartbeatï¼Œå®šæœŸæ£€æŸ¥æ—¥ç¨‹
</code></pre>
<h2 data-id="heading-23">æ€»ç»“</h2>
<p>OpenClaw å¤š Agent é…ç½®ä¸å¤æ‚ï¼Œä½†æœ‰å‡ ä¸ªå®¹æ˜“è¸©çš„å‘ï¼š</p>
<ol>
<li><strong>config.patch é™·é˜±</strong>ï¼šåµŒå¥—å¯¹è±¡æ˜¯æ•´ä½“æ›¿æ¢ï¼Œä¸æ˜¯å¢é‡ä¿®æ”¹</li>
<li><strong>æ¨¡å‹ ID</strong>ï¼šç”¨åˆ«åï¼ˆ<code>claude-sonnet-4-5</code>ï¼‰ï¼Œä¸è¦å¸¦æ—¥æœŸ</li>
<li><strong>BOOTSTRAP.md</strong>ï¼šä¸è¦æ‰‹åŠ¨åˆ›å»ºï¼Œä¼šå¯¼è‡´ Agent å¡ä½</li>
<li><strong>dmPolicy</strong>ï¼šé»˜è®¤æ˜¯ <code>pairing</code>ï¼Œå»ºè®®æ”¹æˆ <code>allowlist</code></li>
<li><strong>Telegram 409</strong>ï¼šåŒä¸€ä¸ª bot token åªèƒ½è¢«ä¸€ä¸ª Gateway ä½¿ç”¨</li>
<li><strong>é…ç½®ç»§æ‰¿</strong>ï¼šaccount çº§åˆ«é…ç½®ä¼šè¦†ç›–é¡¶å±‚é…ç½®</li>
</ol>
<p><strong>æ ¸å¿ƒåŸåˆ™ï¼š</strong></p>
<ul>
<li>é…ç½®å‰å…ˆå¤‡ä»½</li>
<li>å˜æ›´åå…ˆéªŒè¯</li>
<li>å‡ºé—®é¢˜å…ˆçœ‹æ—¥å¿—</li>
<li>åˆ†é˜¶æ®µé€æ­¥é…ç½®</li>
</ul>
<p>å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¸®ä½ å°‘èµ°å¼¯è·¯ã€‚å¦‚æœè¿˜æœ‰å…¶ä»–é—®é¢˜ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºè®¨è®ºï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[2026å¹´äº†ï¼Œä¸ºä»€ä¹ˆæˆ‘å»ºè®®ä½ æ”¾å¼ƒâ€œçº¯åŸç”Ÿâ€å¼€å‘ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7605769126272139310</link>    <guid>https://juejin.cn/post/7605769126272139310</guid>    <pubDate>2026-02-13T03:07:21.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605769126272139310" data-draft-id="7605907495769227273" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="2026å¹´äº†ï¼Œä¸ºä»€ä¹ˆæˆ‘å»ºè®®ä½ æ”¾å¼ƒâ€œçº¯åŸç”Ÿâ€å¼€å‘ï¼Ÿ"/> <meta itemprop="keywords" content="Flutter,å®¢æˆ·ç«¯"/> <meta itemprop="datePublished" content="2026-02-13T03:07:21.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜è€åˆ˜"/> <meta itemprop="url" content="https://juejin.cn/user/662360127965769"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            2026å¹´äº†ï¼Œä¸ºä»€ä¹ˆæˆ‘å»ºè®®ä½ æ”¾å¼ƒâ€œçº¯åŸç”Ÿâ€å¼€å‘ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/662360127965769/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜è€åˆ˜
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-13T03:07:21.000Z" title="Fri Feb 13 2026 03:07:21 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯è€åˆ˜</strong></p>
<p>æ˜¨å¤©æœ‰ä¸ªè€æœ‹å‹æ‰¾æˆ‘å–é…’ï¼Œå“­ä¸§ç€è„¸ã€‚</p>
<p>è¿™å“¥ä»¬æ˜¯ä¸ªäº”å¹´çš„Androidå¼€å‘ï¼ŒæŠ€æœ¯é‚£æ˜¯æ²¡å¾—è¯´ã€‚</p>
<p>èƒ½ç‹¬ç«‹å®Œæˆå¤æ‚çš„ç³»ç»Ÿæ¨¡å—ï¼Œä¼˜åŒ–è¿‡åƒä¸‡çº§æ—¥æ´»çš„Appã€‚</p>
<p>æœ€è¿‘å»é¢è¯•ä¸€å®¶å¤§å‚æŒ‚äº†ã€‚</p>
<p>é¢è¯•å®˜å°±é—®äº†ä¸€å¥ï¼š</p>
<p>â€œå¦‚æœè®©ä½ å¸¦é˜ŸæŠŠè¿™ä¸ªæ¨¡å—è¿ç§»åˆ°é¸¿è’™å’Œ iOSï¼Œé™¤äº†é‡å†™ä¸‰éï¼Œä½ æœ‰ä»€ä¹ˆä½æˆæœ¬æ–¹æ¡ˆï¼Ÿâ€</p>
<p>ä»–æ„£ä½äº†ï¼Œä»–å¼•ä»¥ä¸ºå‚²çš„åŸç”Ÿæ·±åº¦ï¼Œåœ¨é™æœ¬å¢æ•ˆçš„å¤§æ½®é¢å‰ï¼Œå°±å˜æˆäº†ä¸€é¢—æ˜‚è´µçš„èºä¸é’‰ã€‚</p>
<p>2026 å¹´ï¼Œä¸çŸ¥é“æœ‰å¤šå°‘æœ‹å‹åˆå¼€å§‹äº†æˆ–è€…å°†è¦å¼€å§‹æŠ•ç®€å†ã€é¢è¯•çš„è¿‡ç¨‹ã€‚</p>
<p>è€åˆ˜å€Ÿç€è¿™ç¯‡æ–‡ç« èŠèŠåŸç”Ÿå¼€å‘ã€è·¨å¹³å°å¼€å‘åœ¨AIæ—¶ä»£çš„å®¢æˆ·ç«¯å¼€å‘é¢†åŸŸçš„ç”Ÿæ€ä½ï¼Œä»¥åŠä½œä¸ºå¼€å‘è€…ï¼Œæˆ‘ä»¬è¯¥å¦‚ä½•ä¼˜åŒ–æˆ‘ä»¬çš„æŠ€èƒ½æ ‘ï¼Œä»¥é€‚åº”è¿™ä¸ªå¿«é€Ÿå˜åŒ–çš„è¡Œä¸šã€‚</p>
<hr/>
<h2 data-id="heading-0">åŸç”Ÿä¸æ˜¯æ­»äº†ï¼Œè€Œæ˜¯ä¸‹æ²‰äº†</h2>
<p>åˆ«è¯¯ä¼šï¼Œæˆ‘ä¸æ˜¯è¯´åŸç”ŸæŠ€æœ¯è¦æ¶ˆå¤±ã€‚</p>
<p>å®ƒåªæ˜¯ä¸‹æ²‰äº†ï¼Œæ²‰æˆäº†åŸºç¡€è®¾æ–½ï¼Œå°±æœ‰ç‚¹åƒæ±‡ç¼–è¯­è¨€ä¸€æ ·ã€‚</p>
<p>ä½ çœ‹ç°åœ¨çš„ App æ¶æ„æ˜¯å•¥æ ·çš„ï¼Ÿ</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5fb17713aeae4696b5564608272e05a3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6ICB5YiY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771556840&amp;x-signature=h%2BAMmisL%2BDCz124o%2F7KBfAMFq4U%3D" alt="Mermaid Diagram" loading="lazy"/></p>
<p>å¦‚æœä½ åªå®ˆç€é‚£ 10% çš„åŸç”Ÿèƒ¶æ°´å±‚ï¼Œä½ çš„èŒä¸šé“è·¯åªä¼šè¶Šèµ°è¶Šçª„ã€‚</p>
<p>æœ€åå˜æˆå…¬å¸é‡Œé‚£ä¸ªç»´æŠ¤é—ç•™ä»£ç çš„å®ˆé—¨äººï¼Œæ¯å¤©å¯¹ç€ä¸€å †é™ˆå¹´è€ä»£ç å¹æ°”ã€‚</p>
<p>æ–°äººéƒ½åœ¨ç”¨æ–°æ¶æ„å†™æ–°ä¸šåŠ¡ï¼Œä½ åœ¨è§’è½é‡Œä¿®æ”¹å“ªäº›è¯¥æ­»çš„å…¼å®¹æ€§ Bugã€‚</p>
<hr/>
<h2 data-id="heading-1">Flutter vs åŸç”Ÿ</h2>
<p>è¿™é‡Œè€åˆ˜ä¸æƒ³è®¨è®ºæŠ€æœ¯å‚æ•°çš„å·®å¼‚ï¼Œè€Œæ˜¯æƒ³ç«™åœ¨å¼€å‘è€…çš„è§’åº¦ï¼Œè°ˆè°ˆèšç„¦ä¸åŒçš„æŠ€æœ¯æ ˆå¯¹æˆ‘ä»¬æœ‰ä»€ä¹ˆå½±å“ã€‚</p>
<p>å¾ˆå¤šåšæŒâ€œçº¯åŸç”Ÿâ€çš„å…„å¼Ÿï¼Œç†ç”±å¾€å¾€åªæœ‰ä¸€ä¸ªï¼š</p>
<p>â€œåŸç”Ÿä½“éªŒæ›´å¥½ï¼Œæ€§èƒ½æ›´å¼ºï¼Œè·¨å¹³å°æ€»è§‰å¾—æœ‰ç‚¹å¡ã€‚â€</p>
<p>å¬ç€æŒºæœ‰é“ç†ï¼Œä½†åœ¨ 2026 å¹´ï¼Œè¿™æ›´åƒæ˜¯ä¸€ä¸ªç»™è‡ªå·±å¯»æ‰¾èˆ’é€‚åŒºçš„å€Ÿå£ã€‚</p>
<p><strong>ç°åœ¨çš„è·¨å¹³å°æŠ€æœ¯ï¼Œæ—©å·²ç»ä¸æ˜¯å½“å¹´çš„â€œç¼åˆæ€ªâ€äº†ã€‚</strong></p>
<p>ä»¥ Flutter ä¸ºä¾‹ï¼Œ Impeller å¼•æ“çš„æˆç†Ÿï¼Œè®©å®ƒçš„æ¸²æŸ“æ€§èƒ½åœ¨å¤§å¤šæ•°ä¸šåŠ¡åœºæ™¯ä¸‹ï¼Œå·²ç»åšåˆ°äº†å’ŒåŸç”Ÿæ¯«æ— å·®å¼‚çš„ç¨‹åº¦ã€‚</p>
<p>ä½ è¿˜åœ¨çº ç»“é‚£ä¸ªæ»šåŠ¨æ¡çš„é˜»å°¼æ„Ÿæ˜¯ä¸æ˜¯å·®äº† 0.01 ç§’ï¼Œè€æ¿åœ¨çº ç»“ä¸ºä»€ä¹ˆéš”å£ç»„ç”¨ä¸€å¥—ä»£ç å·²ç»ä¸Šçº¿äº†ä¸‰ä¸ªå¹³å°ï¼Œè€Œä½ è¿˜åœ¨ä¸º iOS çš„ä¸€ä¸ªå¸ƒå±€é”™ä½è°ƒäº†ä¸€ä¸‹åˆã€‚</p>
<p><strong>æœªæ¥çš„æ ¸å¿ƒç«äº‰åŠ›ï¼Œæ˜¯ç«¯æŠ½è±¡çš„èƒ½åŠ›</strong></p>
<p>å½“ä½ ç«™åœ¨è·¨å¹³å°çš„è§’åº¦è¿›è¡Œå¼€å‘ï¼Œä½ æ€è€ƒé—®é¢˜çš„ç»´åº¦å°±å˜äº†ï¼š</p>
<ul>
<li>ä½ ä¸å†æ˜¯â€œé‚£ä¸ªå†™ Android çš„â€ï¼Œä½ æ˜¯â€œé‚£ä¸ªèƒ½æå®šå…¨ç«¯äº¤ä»˜çš„â€ã€‚</li>
<li>ä½ ä¸å†å…³å¿ƒæŸä¸ªç³»ç»Ÿçš„ç§æœ‰ APIï¼Œä½ å¼€å§‹å…³å¿ƒå¦‚ä½•è®¾è®¡ä¸€å¥—é€šç”¨çš„ç»„ä»¶åº“ï¼Œè®©ä¸šåŠ¡é€»è¾‘åœ¨å„ä¸ªç«¯ä¹‹é—´æ— ç¼æµåŠ¨ã€‚</li>
</ul>
<p>è¿™ç§â€œç«¯æŠ½è±¡â€çš„èƒ½åŠ›ï¼Œæ‰æ˜¯è·¨å¹³å°å¼€å‘è€…çœŸæ­£çš„æŠ¤åŸæ²³ã€‚</p>
<hr/>
<h2 data-id="heading-2">è·¨å¹³å°ï¼ˆFlutterï¼‰ä¸æ˜¯åŠ åˆ†é¡¹ï¼Œè€Œæ˜¯åŠæ ¼çº¿</h2>
<p>ä»¥å‰é¢è¯•ï¼Œä½ ä¼š Flutteræ˜¯åŠ åˆ†é¡¹ã€‚</p>
<p>ç°åœ¨é‚£æ˜¯åŠæ ¼çº¿ã€‚</p>
<p>çœ‹çœ‹ç°åœ¨çš„ç»ˆç«¯ç¯å¢ƒï¼Œä¹±æˆä¸€é”…ç²¥äº†ï¼šAndroidã€iOSã€é¸¿è’™ã€webã€æ¡Œé¢ç«¯...</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ed67a001c10541e7a7b5eacd83040b21~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6ICB5YiY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771556840&amp;x-signature=XHKuTug%2BCYh2v8rTs%2Fcual4UDMY%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>ä½ æŒ‡æœ›è€æ¿æ‹› 5 æ‹¨äººå»ç»´æŠ¤ 5 å¥—ä»£ç ï¼Ÿ</p>
<p>è€æ¿æ ¹æœ¬ä¸åœ¨ä¹ä½ ç”¨åŸç”Ÿè¿˜æ˜¯Flutterï¼Œè€æ¿åªåœ¨ä¹èƒ½ä¸èƒ½æŠŠå›¢é˜Ÿè£åˆ°åªæœ‰ä¸€ä¸ªäººï¼Œç„¶åä½ æŠŠæ‰€æœ‰çš„å·¥ä½œæå®šã€‚</p>
<p>åªä¼šçº¯åŸç”Ÿç­‰äºæŠŠè‡ªå·±é”æ­»åœ¨ä¸€ä¸ªå¹³å°ä¸Šã€‚</p>
<p>ä¸€æ—¦é‚£ä¸ªå¹³å°æ²¡è½äº†ï¼Œæˆ–è€…å…¬å¸ä¸šåŠ¡è°ƒæ•´ä¸åšäº†ã€‚</p>
<p>æƒ³æƒ³å½“å¹´çš„å¡ç­å¼€å‘ï¼Œç”šè‡³å‰å‡ å¹´çš„ Windows Phone å¼€å‘ï¼Œæ˜¯ä¸æ˜¯èƒŒè„Šå‘å‡‰ï¼Ÿ</p>
<hr/>
<h2 data-id="heading-3">ä½ æ˜¯ä¸æ˜¯é‚£ä¸ªè§£å†³é—®é¢˜çš„äººï¼Ÿ</h2>
<p>å…¶å®ä¸ç®¡æ˜¯å›¢é˜Ÿçš„æŠ€æœ¯æ–¹æ¡ˆé€‰æ‹©ï¼Œè¿˜æ˜¯å¼€å‘è€…ä¸ªäººæŠ€èƒ½æ ‘çš„å‡çº§ï¼ŒæŠ€æœ¯æ ˆçš„é€‰æ‹©ä»æ¥éƒ½ä¸ä»…ä»…æ˜¯æŠ€æœ¯å‚æ•°çš„å¯¹æ¯”ã€‚</p>
<p><strong>ç«™åœ¨å›¢é˜Ÿçš„è§’åº¦</strong>ï¼Œè€åˆ˜å½“å¹´é€‰æ‹©Flutterçš„åŸå› æœ‰ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/22fabffacbe9458eadf0143d7c58cc96~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6ICB5YiY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771556840&amp;x-signature=6Tu8iY%2B0lQTxqiYxLzyvWmqvBEE%3D" alt="Mermaid Diagram" loading="lazy"/></p>
<p><strong>ç«™åœ¨å¼€å‘è€…ä¸ªäººçš„è§’åº¦</strong>ï¼Œä½ éœ€è¦ä¿è¯è‡ªå·±çš„æŠ€èƒ½æ ‘ä¸­ç‚¹å‡ºæ¥å½“å‰ä¸»æµçš„æŠ€æœ¯æ–¹å‘ã€‚</p>
<p>æˆ‘ä¸æ˜¯è¯´ä¸€å®šè¦å­¦Flutteræˆ–è€…æŸä¸€ä¸ªæŠ€æœ¯ï¼Œè€Œæ˜¯ä½ è¦çŸ¥é“ç°åœ¨åœ¨è¡Œä¸šå†…å¤§å®¶éƒ½åœ¨ç”¨å“ªäº›æŠ€æœ¯ã€‚</p>
<p>è€Œè¢«å¤§é‡ä¼ä¸šå’Œå›¢é˜Ÿé€‰æ‹©çš„æŠ€æœ¯æ ˆå¤§æ¦‚ç‡æ˜¯å½“å‰æœ€èƒ½è§£å†³å®æˆ˜é—®é¢˜çš„ï¼Œæˆ–è€…æ˜¯æœ€å…·å¤‡æ€§ä»·æ¯”çš„é€‰é¡¹ã€‚</p>
<p>ä¸ºå•¥è¦åšä»ä¼—çš„é€‰æ‹©ï¼Ÿ</p>
<p>å› ä¸ºå•†ä¸šç¤¾ä¼šä½ ä¸èƒ½åšé‚£ä¸ªæŒæ¡å± é¾™æŠ€çš„äººï¼Œè€Œè¦ä¸åšé‚£ä¸ªè§£å†³é—®é¢˜çš„äººã€‚</p>
<p>é‚£ä»€ä¹ˆæ ·çš„æŠ€æœ¯è·¯çº¿èƒ½è§£å†³é—®é¢˜å‘¢ï¼Ÿ</p>
<p>å¹¶ä¸æ˜¯ä½ é’»ç ”æœ€æ·±å…¥çš„ï¼Œçœ‹èµ·æ¥å‚æ•°æœ€å¥½çš„ï¼Œè€Œæ˜¯ä½ çš„åŒäº‹éƒ½ä¼šç”¨çš„ã€‚</p>
<p>ä¸ä»…ä»…æ˜¯ä½ çš„åŒäº‹ï¼Œè¿˜æ˜¯é‚£äº›LLMæ¯”å¦‚Claudeã€ChatGPTç”šè‡³Kimiéƒ½èƒ½ç©å¾—è½¬çš„ã€‚</p>
<hr/>
<h2 data-id="heading-4">æ¢ä¸ªæ´»æ³•ï¼Œè·¯å®½å¾—å¾ˆ</h2>
<p>æˆ‘å»ºè®®ä½ æ”¾å¼ƒçº¯åŸç”Ÿï¼Œä¸æ˜¯è®©ä½ å¿˜æ‰åŸºç¡€ã€‚</p>
<p>è€Œæ˜¯è®©ä½ æ”¾å¼ƒé‚£ç§ç”»åœ°ä¸ºç‰¢çš„å¿ƒæ€ã€‚</p>
<p>ä¸è¦åšä¸€ä¸ªåªä¼šç Œå¢™çš„æ³¥ç“¦åŒ ï¼Œè¦åšä¸€ä¸ªæ‡‚ç»“æ„çš„å»ºç­‘å¸ˆã€‚</p>
<p>æœªæ¥å±äºé‚£äº›<strong>ç«™åœ¨åŸç”Ÿè‚©è†€ä¸Šï¼Œç”¨è·¨å¹³å°å’Œ AI ä¿¯è§†ä¸šåŠ¡</strong>çš„å¼€å‘è€…ã€‚</p>
<p>åˆ«è®©æŠ€æœ¯æ ˆé™åˆ¶äº†ä½ çš„æƒ³è±¡åŠ›ã€‚</p>
<p>æ›´åˆ«è®©çº¯åŸç”Ÿé™åˆ¶äº†ä½ çš„èº«ä»·ã€‚</p>
<p>å…±å‹‰ã€‚</p>
<blockquote>
<p>ğŸ¤ å¦‚æœçœ‹åˆ°è¿™é‡Œçš„åŒå­¦å¯¹å®¢æˆ·ç«¯æˆ–è€…Flutterå¼€å‘æ„Ÿå…´è¶£ï¼Œæ¬¢è¿è”ç³»è€åˆ˜ï¼Œæˆ‘ä»¬äº’ç›¸å­¦ä¹ ã€‚</p>
<p>ğŸ ç§ä¿¡å…è´¹é¢†è€åˆ˜æ•´ç†çš„ã€ŠFlutterå¼€å‘æ‰‹å†Œã€‹ï¼Œè¦†ç›–90%åº”ç”¨å¼€å‘åœºæ™¯ã€‚å¯ä»¥ä½œä¸ºFlutterå­¦ä¹ çš„çŸ¥è¯†åœ°å›¾ã€‚</p>
<p>ğŸ’¬ : laoliu_dev</p>
</blockquote>
<blockquote>
<p>ğŸ“‚ è€åˆ˜ä¹ŸæŠŠè‡ªå·±å†å²æ–‡ç« æ•´ç†åœ¨GitHubä»“åº“é‡Œï¼Œæ–¹ä¾¿å¤§å®¶æŸ¥é˜…ã€‚
ğŸ”— <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Flzt-code%2Fblog" target="_blank" title="https://github.com/lzt-code/blog" ref="nofollow noopener noreferrer">github.com/lzt-code/blâ€¦</a></p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é›¶ JavaScript çš„æ€§èƒ½ä¼˜åŒ–è§†é¢‘åµŒå…¥]]></title>    <link>https://juejin.cn/post/7605807405307412543</link>    <guid>https://juejin.cn/post/7605807405307412543</guid>    <pubDate>2026-02-13T03:07:56.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605807405307412543" data-draft-id="7605941424535928886" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é›¶ JavaScript çš„æ€§èƒ½ä¼˜åŒ–è§†é¢‘åµŒå…¥"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,é¢è¯•"/> <meta itemprop="datePublished" content="2026-02-13T03:07:56.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ˜é‡‘å®‰ä¸œå°¼"/> <meta itemprop="url" content="https://juejin.cn/user/1521379823340792"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é›¶ JavaScript çš„æ€§èƒ½ä¼˜åŒ–è§†é¢‘åµŒå…¥
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1521379823340792/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ˜é‡‘å®‰ä¸œå°¼
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-13T03:07:56.000Z" title="Fri Feb 13 2026 03:07:56 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>åŸæ–‡ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Ffrontendmasters.com%2Fblog%2Fperformance-optimized-video-embeds-with-zero-javascript%2F" target="_blank" title="https://frontendmasters.com/blog/performance-optimized-video-embeds-with-zero-javascript/" ref="nofollow noopener noreferrer">Performance-Optimized Video Embeds with Zero JavaScript</a></p>
<p>ç¿»è¯‘ï¼šTUARAN</p>
<p>æ¬¢è¿å…³æ³¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FTUARAN%2Ffrontend-weekly-digest-cn" target="_blank" title="https://github.com/TUARAN/frontend-weekly-digest-cn" ref="nofollow noopener noreferrer">{{å‰ç«¯å‘¨åˆŠ}}</a>ï¼Œæ¯å‘¨æ›´æ–°å›½å¤–è®ºå›çš„å‰ç«¯çƒ­é—¨æ–‡ç« ï¼Œç´§è·Ÿæ—¶äº‹ï¼ŒæŒæ¡å‰ç«¯æŠ€æœ¯åŠ¨æ€ã€‚</p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9adab526bf35403b930731150fbe7285~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR5a6J5Lic5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771556876&amp;x-signature=qCH4PSQPzxnMqBljgE%2BTusLDBL4%3D" alt="image.png" loading="lazy"/></p>
<p>åµŒå…¥è§†é¢‘å¾€å¾€ä¼šæ˜¾è‘—æ‹–æ…¢é¡µé¢ï¼šæ’­æ”¾å™¨ä¼šåŠ è½½ä¸€å †é¢å¤–èµ„æºï¼Œå³ä½¿ç”¨æˆ·æœ€ç»ˆæ ¹æœ¬ä¸ç‚¹æ’­æ”¾ã€‚</p>
<p>å¸¸è§çš„ä¼˜åŒ–æ˜¯ç”¨ <code>lite-youtube-embed</code> ä¹‹ç±»çš„è½»é‡ç»„ä»¶å…ˆå ä½ã€å†æŒ‰éœ€åŠ è½½ã€‚ä½†å¦‚æœè§†é¢‘å°±åœ¨é¦–å±ï¼ˆabove the foldï¼‰ï¼Œä»ç„¶å¯èƒ½å› ä¸ºå ä½ä¸çœŸå®æ’­æ”¾å™¨å°ºå¯¸/æ¸²æŸ“æ—¶æœºé—®é¢˜å¸¦æ¥ CLSï¼ˆç´¯è®¡å¸ƒå±€åç§»ï¼‰ã€‚</p>
<p>è¿™ç¯‡æ–‡ç« ç»™å‡ºä¸€ç§â€œæç®€ä½†å¾ˆå®ç”¨â€çš„æ¨¡å¼ï¼šåªç”¨åŸç”Ÿ HTML çš„ <code>&lt;details&gt;</code> / <code>&lt;summary&gt;</code> + ä¸€ç‚¹ CSSï¼Œå®ç°<strong>äº¤äº’æ—¶æ‰åŠ è½½ iframe</strong>ï¼Œå¹¶ä¸”ä¸å†™ä¸€è¡Œ JSã€‚</p>
<h2 data-id="heading-0">è§£å†³æ–¹æ¡ˆï¼šç”¨ <code>&lt;details&gt;</code> / <code>&lt;summary&gt;</code> ä½œä¸ºäº¤äº’è¾¹ç•Œ</h2>
<p><code>&lt;summary&gt;</code> çš„é»˜è®¤è¡Œä¸ºç±»ä¼¼æŒ‰é’®ï¼šç‚¹å‡»ä¼šå±•å¼€å¯¹åº” <code>&lt;details&gt;</code>ï¼Œæµè§ˆå™¨ä¼šç»™ <code>&lt;details&gt;</code> åŠ ä¸Š <code>open</code> å±æ€§ï¼›å†ç‚¹ä¸€æ¬¡å°±æ”¶èµ·ã€‚</p>
<p>é¡µé¢åˆå§‹åŠ è½½æ—¶ï¼Œ<code>&lt;details&gt;</code> å†…é™¤äº† <code>&lt;summary&gt;</code> ä»¥å¤–çš„å†…å®¹é»˜è®¤ä¸æ˜¾ç¤ºâ€”â€”è¿™ä½¿å®ƒå¤©ç„¶é€‚åˆâ€œç”¨æˆ·äº¤äº’åæ‰å‘ˆç°â€çš„å†…å®¹ï¼ˆæ¯”å¦‚ iframe è§†é¢‘ï¼‰ã€‚</p>
<h2 data-id="heading-1">æ‡’åŠ è½½ï¼šè¦é¿å…â€œé¦–å±æ‡’åŠ è½½åä¼¤â€</h2>
<p>ç°ä»£æµè§ˆå™¨æ”¯æŒ <code>loading="lazy"</code> å¯¹å›¾ç‰‡ä¸ iframe åšåŸç”Ÿæ‡’åŠ è½½ã€‚</p>
<p>ä½†éœ€è¦æ³¨æ„ï¼šæŠŠæ‰€æœ‰ä¸œè¥¿éƒ½æ‡’åŠ è½½ï¼Œå¯èƒ½åè€Œè®© LCP å˜å·®ã€‚Chrome å›¢é˜Ÿçš„ç ”ç©¶æåˆ°ï¼Œè¿‡åº¦æ‡’åŠ è½½å¯èƒ½è®© LCP ä¸‹é™çº¦ 20%ï¼Œå°¤å…¶æ˜¯å½“ä½ æŠŠå†…å®¹æ‡’åŠ è½½åˆ°é¦–å±è§†å£é‡Œæ—¶ã€‚</p>
<p>è¿™é‡Œçš„å…³é”®ç‚¹åœ¨äºï¼šiframe è§†é¢‘ä½œä¸º <code>&lt;details&gt;</code> çš„å†…å®¹ï¼Œåœ¨ç”¨æˆ·ç‚¹å‡»ä¹‹å‰å¹¶ä¸ç®—â€œåˆå§‹è§†å£å†…å®¹â€ï¼Œæ‰€ä»¥ä¸ä¼šè§¦å‘é‚£ç§â€œé¦–å±æ‡’åŠ è½½å¸¦æ¥çš„åæ•ˆæœâ€ã€‚</p>
<p>ç»“è®ºï¼šå¦‚æœä½ æœ¬æ¥å°±æŠŠè§†é¢‘æ”¾åœ¨ä¸€ä¸ªå¯æŠ˜å åŒºåŸŸé‡Œï¼ˆaccordionï¼‰ï¼Œé‚£å°±éå¸¸é€‚åˆæŠŠå®ƒå»¶è¿Ÿåˆ°â€œç”¨æˆ·æƒ³çœ‹â€çš„é‚£ä¸€åˆ»æ‰åŠ è½½ã€‚</p>
<h2 data-id="heading-2">æ ·å¼ï¼šæŠŠ <code>&lt;summary&gt;</code> åšæˆè§†é¢‘ç¼©ç•¥å›¾</h2>
<p>é»˜è®¤çš„ <code>&lt;details&gt;</code> æ ·å¼å¾ˆæœ´ç´ ã€‚æˆ‘ä»¬å¯ä»¥æŠŠ <code>&lt;summary&gt;</code> åšæˆä¸€ä¸ªâ€œè§†é¢‘ç¼©ç•¥å›¾å ä½â€ï¼Œä¸Šé¢å ä¸€ä¸ªè‡ªå®šä¹‰æ’­æ”¾æŒ‰é’®ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">&lt;detailsÂ <span class="hljs-attr">class</span>=<span class="hljs-string">"video-embed"</span>&gt;
Â Â &lt;summaryÂ <span class="hljs-attr">class</span>=<span class="hljs-string">"video-summary"</span>Â aria-label=<span class="hljs-string">"æ’­æ”¾è§†é¢‘ï¼šBigÂ BuckÂ Bunny"</span>&gt;
Â Â Â Â &lt;img
Â Â Â Â Â Â <span class="hljs-attr">src</span>=<span class="hljs-string">"https://lab.n8d.studio/htwoo/htwoo-core/images/videos/big-bug-bunny.webp"</span>
Â Â Â Â Â Â <span class="hljs-attr">class</span>=<span class="hljs-string">"video-thumbnail"</span>
Â Â Â Â Â Â <span class="hljs-attr">alt</span>=<span class="hljs-string">""</span>
Â Â Â Â /&gt;
Â Â Â Â &lt;svgÂ <span class="hljs-attr">class</span>=<span class="hljs-string">"video-playicon"</span>Â viewBox=<span class="hljs-string">"0Â 0Â 32Â 32"</span>Â aria-hidden=<span class="hljs-string">"true"</span>&gt;
Â Â Â Â Â Â &lt;pathÂ <span class="hljs-attr">d</span>=<span class="hljs-string">"m11.167Â 5.608Â 16.278Â 8.47a2.169Â 2.169Â 0Â 0Â 1Â .011Â 3.838l-.012.006-16.278Â 8.47a2.167Â 2.167Â 0Â 0Â 1-3.167-1.922V7.529a2.167Â 2.167Â 0Â 0Â 1Â 3.047-1.981l-.014-.005.134.065z"</span>Â /&gt;
Â Â Â Â &lt;/svg&gt;
Â Â &lt;/summary&gt;

Â Â &lt;divÂ <span class="hljs-attr">class</span>=<span class="hljs-string">"video-content"</span>&gt;
Â Â Â Â &lt;!--Â åŸå§‹Â embedÂ ä»£ç å°½é‡ä¸æ”¹ï¼Œç›´æ¥æ”¾è¿›æ¥Â --&gt;
Â Â Â Â &lt;iframe
Â Â Â Â Â Â <span class="hljs-attr">src</span>=<span class="hljs-string">"https://www.youtube.com/embed/aqz-KE-bpKQ?autoplay=1"</span>
Â Â Â Â Â Â <span class="hljs-attr">title</span>=<span class="hljs-string">"BigÂ BuckÂ Bunny"</span>
Â Â Â Â Â Â <span class="hljs-attr">loading</span>=<span class="hljs-string">"lazy"</span>
Â Â Â Â Â Â <span class="hljs-attr">allow</span>=<span class="hljs-string">"accelerometer;Â autoplay;Â clipboard-write;Â encrypted-media;Â gyroscope;Â picture-in-picture"</span>
Â Â Â Â Â Â allowfullscreen
Â Â Â Â &gt;&lt;/iframe&gt;
Â Â &lt;/div&gt;
&lt;/details&gt;
</code></pre>
<p>è¦ç‚¹ï¼š</p>
<ul>
<li>ç¼©ç•¥å›¾ä¸ iframe ç»´æŒåŒä¸€å®½é«˜æ¯”ï¼ˆé¿å…å¸ƒå±€è·³åŠ¨ï¼‰ã€‚</li>
<li>æ’­æ”¾æŒ‰é’®ç”¨è‡ªæœ‰ SVGï¼Œä¿è¯å“ç‰Œä¸€è‡´æ€§ã€‚</li>
<li><code>aria-label</code> ç»™å±å¹•é˜…è¯»å™¨ä¸€ä¸ªæ˜ç¡®çš„åŠ¨ä½œæç¤ºï¼ˆä½œè€…ä¹Ÿå¼ºè°ƒéœ€è¦åšè·¨ VoiceOver/NVDA/JAWS çš„å®é™…æµ‹è¯•ï¼‰ã€‚</li>
</ul>
<p>CSS å¯ä»¥ç”¨ grid æŠŠæŒ‰é’®å åœ¨ç¼©ç•¥å›¾æ­£ä¸­ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.video-summary</span>Â {
Â Â <span class="hljs-attribute">display</span>:Â grid;
Â Â place-items:Â center;
}

<span class="hljs-selector-class">.video-thumbnail</span>,
<span class="hljs-selector-class">.video-playicon</span>Â {
Â Â <span class="hljs-attribute">grid-area</span>:Â <span class="hljs-number">1</span>Â /Â <span class="hljs-number">1</span>;
}

<span class="hljs-selector-class">.video-playicon</span>Â {
Â Â <span class="hljs-attribute">width</span>:Â <span class="hljs-number">64px</span>;
Â Â <span class="hljs-attribute">height</span>:Â <span class="hljs-number">64px</span>;
}
</code></pre>
<h2 data-id="heading-3">å±•å¼€åéšè—ç¼©ç•¥å›¾ï¼Œè®© iframe å‡ºç°</h2>
<p><code>&lt;summary&gt;</code> é»˜è®¤å³ä½¿å±•å¼€ä¹Ÿä¼šæŒç»­å¯è§ï¼›ä½†æˆ‘ä»¬å±•å¼€åå¸Œæœ›çœ‹åˆ°çš„æ˜¯ iframeï¼Œè€Œä¸æ˜¯ç¼©ç•¥å›¾ã€‚</p>
<p>æ€è·¯å¾ˆç®€å•ï¼šå½“ <code>&lt;details&gt;</code> å…·å¤‡ <code>open</code> å±æ€§æ—¶ï¼ŒæŠŠ summary éšè—ã€‚</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.video-embed</span>Â {
Â Â <span class="hljs-attribute">position</span>:Â relative;
}

<span class="hljs-selector-class">.video-embed</span><span class="hljs-selector-attr">[open]</span>Â <span class="hljs-selector-class">.video-summary</span>Â {
Â Â <span class="hljs-attribute">visibility</span>:Â hidden;
}

<span class="hljs-selector-class">.video-content</span>Â <span class="hljs-selector-tag">iframe</span>Â {
Â Â <span class="hljs-attribute">width</span>:Â <span class="hljs-number">100%</span>;
Â Â <span class="hljs-attribute">height</span>:Â <span class="hljs-number">100%</span>;
}
</code></pre>
<p>ç”¨æˆ·ç‚¹å‡»ç¼©ç•¥å›¾æ—¶ï¼š</p>
<ul>
<li>æµè§ˆå™¨æŠŠ <code>open</code> åŠ åˆ° <code>&lt;details&gt;</code> ä¸Š</li>
<li>summary è¢«éšè—</li>
<li>iframe è¿›å…¥è§†å£å¹¶å¼€å§‹åŠ è½½ï¼ˆè€Œä¸”åªåœ¨ç”¨æˆ·çœŸçš„æƒ³çœ‹æ—¶æ‰åŠ è½½ï¼‰</li>
</ul>
<p>å°æç¤ºï¼šå¯¹äº YouTubeï¼Œå¯ä»¥åœ¨ iframe URL ä¸ŠåŠ  <code>?autoplay=1</code>ï¼Œè®©æ’­æ”¾å™¨å°½å¿«å¼€å§‹æ’­æ”¾ï¼›ä½†å¦‚æœç”¨æˆ·æµè§ˆå™¨ç¦ç”¨äº† autoplayï¼Œä»éœ€è¦å†æ¬¡ç‚¹å‡»ã€‚</p>
<h2 data-id="heading-4">æ€§èƒ½å¯¹æ¯”ï¼ˆä¸ lite-youtube-embedï¼‰</h2>
<p>ä½œè€…ç”¨åŒä¸€å¼ ç¼©ç•¥å›¾å¯¹æ¯”äº†æœ¬æ–¹æ¡ˆä¸ <code>lite-youtube-embed</code>ï¼š</p>





















































<table><thead><tr><th>æŒ‡æ ‡</th><th><code>&lt;details&gt;</code> æ¨¡å¼</th><th>lite-youtube-embed</th><th>æ›´ä¼˜</th></tr></thead><tbody><tr><td>Load Time</td><td>595ms</td><td>693ms</td><td><code>&lt;details&gt;</code>ï¼ˆçº¦å¿« 14%ï¼‰</td></tr><tr><td>FCP</td><td>11ms</td><td>70ms</td><td><code>&lt;details&gt;</code>ï¼ˆçº¦å¿« 6.4Ã—ï¼‰</td></tr><tr><td>LCP</td><td>97ms</td><td>157ms</td><td><code>&lt;details&gt;</code>ï¼ˆçº¦å¿« 1.6Ã—ï¼‰</td></tr><tr><td>Transfer</td><td>34 KB</td><td>84 KB</td><td><code>&lt;details&gt;</code>ï¼ˆçº¦å°‘ 2.5Ã—ï¼‰</td></tr><tr><td>CLS</td><td>0.0075</td><td>0.0000</td><td>éƒ½ä¸é”™</td></tr><tr><td>TBT</td><td>0ms</td><td>0ms</td><td>æŒå¹³</td></tr><tr><td>JavaScript</td><td>0</td><td>~3KB</td><td><code>&lt;details&gt;</code></td></tr></tbody></table>
<p>ï¼ˆåŸæ–‡è¿˜æåˆ°èµ„æºè¯·æ±‚æ•°é‡ä¹Ÿæ˜¾è‘—æ›´å°‘ã€‚ï¼‰</p>
<h2 data-id="heading-5">æ”¶å°¾</h2>
<ul>
<li><code>&lt;details&gt;</code> è‡ª 2011 èµ·å°±åœ¨æµè§ˆå™¨ä¸­å¯ç”¨</li>
<li>iframe åŸç”Ÿ lazy loading å¤§çº¦åœ¨ 2019 è½åœ°</li>
</ul>
<p>æŠŠä¸¤è€…ç»“åˆèµ·æ¥ï¼Œä½ å°±èƒ½è·å¾—â€œé¦–å±æ›´å¿«ã€é‡å†…å®¹å»¶åã€äº¤äº’è‡ªç„¶ã€é”®ç›˜å¯ç”¨â€çš„è§†é¢‘åµŒå…¥ä½“éªŒï¼Œè€Œä¸”å®Œå…¨ä¸ä¾èµ– JavaScriptã€‚</p>
<p>å®ƒä¸æ˜¯ä¸€ä¸ªâ€œäº§å“â€ï¼Œè€Œæ˜¯ä¸€ä¸ªâ€œæ¨¡å¼â€ï¼šåŒæ ·é€‚ç”¨äº Vimeoã€è‡ªæ‰˜ç®¡è§†é¢‘ã€GIFã€CodePenã€åœ°å›¾ç­‰ä»»ä½•é‡é‡çº§åµŒå…¥å†…å®¹ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åŒä¸€ä¸ª newï¼Œä¸åŒçš„ä¸–ç•Œï¼šJava ä¸ TypeScript å¯¹è±¡åˆ›å»ºæœºåˆ¶çš„é™ç»´æ‰“å‡»]]></title>    <link>https://juejin.cn/post/7605811866908524553</link>    <guid>https://juejin.cn/post/7605811866908524553</guid>    <pubDate>2026-02-13T02:49:12.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605811866908524553" data-draft-id="7605817795628597298" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åŒä¸€ä¸ª newï¼Œä¸åŒçš„ä¸–ç•Œï¼šJava ä¸ TypeScript å¯¹è±¡åˆ›å»ºæœºåˆ¶çš„é™ç»´æ‰“å‡»"/> <meta itemprop="keywords" content="JavaScript,Java"/> <meta itemprop="datePublished" content="2026-02-13T02:49:12.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Gogo1121"/> <meta itemprop="url" content="https://juejin.cn/user/4162081326907051"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åŒä¸€ä¸ª newï¼Œä¸åŒçš„ä¸–ç•Œï¼šJava ä¸ TypeScript å¯¹è±¡åˆ›å»ºæœºåˆ¶çš„é™ç»´æ‰“å‡»
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4162081326907051/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Gogo1121
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-13T02:49:12.000Z" title="Fri Feb 13 2026 02:49:12 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    11
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>â€‹</p>
<p>è®©æˆ‘ä»¬å…ˆçœ‹ä¸¤æ®µä»£ç ã€‚</p>
<p><strong>Java ä»£ç ï¼š</strong></p>
<pre><code class="hljs language-ini" lang="ini">CountPointsTransactDto <span class="hljs-attr">record</span> = new CountPointsTransactDto()<span class="hljs-comment">;</span>
<span class="hljs-attr">record.amount</span> = <span class="hljs-number">100</span><span class="hljs-comment">;</span>
</code></pre>
<p><img src="%E8%BD%AC%E5%AD%98%E5%A4%B1%E8%B4%A5%EF%BC%8C%E5%BB%BA%E8%AE%AE%E7%9B%B4%E6%8E%A5%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87%E6%96%87%E4%BB%B6%20" alt="è½¬å­˜å¤±è´¥ï¼Œå»ºè®®ç›´æ¥ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p><strong>TypeScript ä»£ç ï¼š</strong></p>
<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-attr">record</span> = new CountPointsTransactDto()<span class="hljs-comment">;</span>
<span class="hljs-attr">record.amount</span> = <span class="hljs-number">100</span><span class="hljs-comment">;</span>
</code></pre>
<p><img src="%E8%BD%AC%E5%AD%98%E5%A4%B1%E8%B4%A5%EF%BC%8C%E5%BB%BA%E8%AE%AE%E7%9B%B4%E6%8E%A5%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87%E6%96%87%E4%BB%B6%20" alt="è½¬å­˜å¤±è´¥ï¼Œå»ºè®®ç›´æ¥ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p>ä¹ä¸€çœ‹ï¼Œè¿™ç®€ç›´å°±æ˜¯<strong>åŒèƒèƒ</strong>ã€‚è¯­æ³•ç»“æ„ã€å…³é”®å­—ã€ç”šè‡³èµ‹å€¼æ–¹å¼éƒ½å¦‚å‡ºä¸€è¾™ã€‚å¾ˆå¤šä» Java è½¬è¿‡æ¥çš„åç«¯åŒå­¦çœ‹åˆ°è¿™é‡Œä¼šæ¾ä¸€å£æ°”ï¼šâ€œåˆ‡ï¼ŒTS ä¸å°±æ˜¯å¸¦ç±»å‹çš„ JS å˜›ï¼Œè·Ÿå†™ Java æ²¡åŒºåˆ«ã€‚â€</p>
<p><strong>å¤§é”™ç‰¹é”™ã€‚</strong></p>
<p>è™½ç„¶å®ƒä»¬é•¿å¾—åƒï¼Œä½†åœ¨è®¡ç®—æœºå†…å­˜çš„å¾®è§‚ä¸–ç•Œé‡Œï¼Œè¿™ä¸¤è¡Œä»£ç è§¦å‘çš„é€»è¾‘å®Œå…¨å±äºä¸¤ä¸ªä¸åŒçš„å®‡å®™ã€‚</p>
<hr/>
<h2 data-id="heading-0">ğŸ§Š ä¸€ã€å†…å­˜æ¨¡å‹ï¼šè“å›¾ vs é»åœŸ</h2>
<h3 data-id="heading-1">1. Java çš„ <code>new</code>ï¼šä¸¥æ ¼çš„è“å›¾ (Blueprint)</h3>
<p>åœ¨ Java ä¸­ï¼Œç±»ï¼ˆClassï¼‰æ˜¯ä¸€å¼ <strong>ä¸å¯ä¿®æ”¹çš„å·¥ç¨‹è“å›¾</strong>ã€‚</p>
<p>å½“ä½ æ‰§è¡Œ <code>new</code> æ—¶ï¼ŒJVM ä¼šåšä»¥ä¸‹äº‹æƒ…ï¼š</p>
<ol>
<li><strong>åŠ è½½è“å›¾</strong>ï¼šè¯»å– <code>.class</code> æ–‡ä»¶ï¼Œè§£æå­—æ®µå’Œæ–¹æ³•ã€‚</li>
<li><strong>åˆ’åœ°ç›˜</strong>ï¼šæ ¹æ®è“å›¾è®¡ç®—å‡ºå¯¹è±¡éœ€è¦å¤šå°‘å†…å­˜ï¼ˆä¾‹å¦‚ï¼š2ä¸ª int + 1ä¸ª String å¼•ç”¨ = å›ºå®šå­—èŠ‚æ•°ï¼‰ã€‚</li>
<li><strong>æµ‡ç­‘</strong>ï¼šåœ¨å †å†…å­˜ä¸­å¼€è¾Ÿä¸€å—<strong>å›ºå®šå¤§å°ã€å›ºå®šç»“æ„</strong>çš„åŒºåŸŸã€‚</li>
</ol>
<p><strong>ç»“è®º</strong>ï¼šJava å¯¹è±¡å‡ºç”Ÿé‚£ä¸€åˆ»ï¼Œå®ƒçš„ç»“æ„å°±å®šæ­»äº†ã€‚ä½ ä¸å¯èƒ½åœ¨è¿è¡Œæ—¶çªç„¶ç»™å®ƒåŠ ä¸€ä¸ª <code>nickname</code> å±æ€§ã€‚å¦‚æœä½ æ•¢è¿™ä¹ˆåšï¼Œç¼–è¯‘å™¨ä¼šç›´æ¥æŠ¥é”™ï¼ŒIDE ä¼šæ ‡çº¢ã€‚</p>
<h3 data-id="heading-2">2. TypeScript (JS) çš„ <code>new</code>ï¼šå¯å¡‘çš„é»åœŸ (Clay)</h3>
<p>åœ¨ TypeScriptï¼ˆæœ€ç»ˆè¿è¡Œçš„æ˜¯ JavaScriptï¼‰ä¸­ï¼Œç±»åªæ˜¯ä¸€ä¸ª<strong>å‡½æ•°</strong>ï¼Œå¯¹è±¡åªæ˜¯ä¸€ä¸ª<strong>å“ˆå¸Œè¡¨ï¼ˆKey-Value Mapï¼‰</strong> ã€‚</p>
<p>å½“ä½ æ‰§è¡Œ <code>new</code> æ—¶ï¼ŒJS å¼•æ“åšäº†è¿™ 4 ä»¶äº‹ï¼š</p>
<ol>
<li>åˆ›å»ºä¸€ä¸ªç©ºçš„å“ˆå¸Œè¡¨ <code>{}</code>ã€‚</li>
<li>æŠŠè¿™ä¸ªç©ºè¡¨çš„ <code>__proto__</code> æŒ‡é’ˆæŒ‡å‘ç±»çš„ <code>prototype</code>ï¼ˆä¸ºäº†èƒ½ç”¨ç±»çš„æ–¹æ³•ï¼‰ã€‚</li>
<li>æ‰§è¡Œæ„é€ å‡½æ•°ï¼ˆConstructorï¼‰ï¼Œç»™è¿™ä¸ªå“ˆå¸Œè¡¨å¡å…¥åˆå§‹å±æ€§ï¼ˆå¦‚ <code>this.amount = 0</code>ï¼‰ã€‚</li>
<li>è¿”å›è¿™ä¸ªå“ˆå¸Œè¡¨ã€‚</li>
</ol>
<p><strong>ç»“è®º</strong>ï¼šJS å¯¹è±¡æœ¬è´¨ä¸Šæ˜¯ä¸€å›¢å¯ä»¥éšæ„æ‰æçš„é»åœŸã€‚</p>
<p>è™½ç„¶ TypeScript çš„ç¼–è¯‘å™¨ï¼ˆtscï¼‰ä¼šåƒ Java ä¸€æ ·æ£€æŸ¥ä½ çš„æ‹¼å†™ï¼Œä½†åœ¨<strong>è¿è¡Œæ—¶</strong>ï¼Œä½ å®Œå…¨å¯ä»¥ç»™è¿™ä¸ªå¯¹è±¡è¿½åŠ ä»»ä½•å±æ€§ï¼ˆ<code>record.whatever = 123</code>ï¼‰ï¼ŒJS å¼•æ“ç»ä¸ä¼šæ‹¦ä½ ã€‚</p>
<hr/>
<h2 data-id="heading-3">âš”ï¸ äºŒã€èµ‹å€¼é€»è¾‘ï¼šæƒé™æ§åˆ¶ vs çº¦å®šä¿—æˆ</h2>
<h3 data-id="heading-4">Javaï¼šä¸¥é˜²æ­»å®ˆ</h3>
<p>Java èƒ½ä¸èƒ½ç›´æ¥èµ‹å€¼ï¼Œå–å†³äº<strong>è®¿é—®ä¿®é¥°ç¬¦</strong>ã€‚</p>
<ul>
<li>å¦‚æœ <code>amount</code> æ˜¯ <code>public</code>ï¼Œå¯ä»¥ã€‚</li>
<li>ä½† Java å¼€å‘çš„é»„é‡‘æ³•åˆ™æ˜¯ <strong>å°è£…ï¼ˆEncapsulationï¼‰</strong> ã€‚ç»å¤§å¤šæ•° entity/dto çš„å­—æ®µéƒ½æ˜¯ <code>private</code> çš„ï¼Œå¿…é¡»é€šè¿‡ <code>setAmount()</code> æ–¹æ³•æ¥è®¿é—®ã€‚</li>
<li><strong>ä¸ºä»€ä¹ˆï¼Ÿ</strong> ä¸ºäº†å®‰å…¨ã€‚Java å¯ä»¥åœ¨ setter é‡ŒåŠ é€»è¾‘ï¼ˆæ¯”å¦‚ <code>if (amount &lt; 0) throw error</code>ï¼‰ï¼Œä¿è¯æ•°æ®å®‰å…¨ã€‚</li>
</ul>
<h3 data-id="heading-5">TypeScriptï¼šè‡ªç”±å¥”æ”¾</h3>
<p>TypeScript é»˜è®¤æ‰€æœ‰å±æ€§éƒ½æ˜¯ <code>public</code>ã€‚</p>
<p>åœ¨ TS/JS ç”Ÿæ€ä¸­ï¼Œç›´æ¥æ“ä½œå±æ€§ï¼ˆ<code>record.amount = 100</code>ï¼‰æ˜¯<strong>æ ‡å‡†åšæ³•</strong>ã€‚</p>
<ul>
<li>æˆ‘ä»¬å¾ˆå°‘åœ¨ DTO é‡Œå†™ <code>getAmount()</code> / <code>setAmount()</code>ã€‚</li>
<li><strong>ä¸ºä»€ä¹ˆï¼Ÿ</strong> å› ä¸º JS è¿½æ±‚çµæ´»æ€§å’Œç®€æ´ã€‚å¦‚æœçœŸè¦æ§åˆ¶æƒé™ï¼ŒTS ä¹Ÿæœ‰ <code>private</code> å…³é”®å­—ï¼Œä½†é‚£åªæ˜¯ç¼–è¯‘æ—¶çš„çº¦æŸï¼Œç¼–è¯‘æˆ JS åï¼Œç§æœ‰å±æ€§ä¾ç„¶å¯ä»¥è¢«è®¿é—®ï¼ˆè™½ç„¶ä¸æ¨èï¼‰ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-6">ğŸ¦† ä¸‰ã€ç±»å‹ç³»ç»Ÿï¼šåä¹‰ vs ç»“æ„ (æ ¸å¿ƒå·®å¼‚)</h2>
<p>è¿™æ˜¯æœ€é¢ è¦† Java å¼€å‘è€…è®¤çŸ¥çš„ä¸€ç‚¹ã€‚</p>
<h3 data-id="heading-7">Javaï¼šåä¹‰ç±»å‹ (Nominal Typing)</h3>
<p>Java åªè®¤<strong>åå­—</strong>ï¼ˆèº«ä»½è¯ï¼‰ã€‚</p>
<p>å“ªæ€•ä¸¤ä¸ªç±»é•¿å¾—ä¸€æ¨¡ä¸€æ ·ï¼Œåå­—ä¸ä¸€æ ·ï¼Œå°±æ˜¯ä¸å…¼å®¹ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">A</span> { <span class="hljs-type">int</span> x; }
<span class="hljs-keyword">class</span> <span class="hljs-title class_">B</span> { <span class="hljs-type">int</span> x; }
<span class="hljs-type">A</span> <span class="hljs-variable">obj</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">B</span>(); <span class="hljs-comment">// âŒ æŠ¥é”™ï¼B ä¸æ˜¯ Aã€‚</span>
</code></pre>
<p><img src="%E8%BD%AC%E5%AD%98%E5%A4%B1%E8%B4%A5%EF%BC%8C%E5%BB%BA%E8%AE%AE%E7%9B%B4%E6%8E%A5%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87%E6%96%87%E4%BB%B6%20" alt="è½¬å­˜å¤±è´¥ï¼Œå»ºè®®ç›´æ¥ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<h3 data-id="heading-8">TypeScriptï¼šç»“æ„åŒ–ç±»å‹ (Structural / Duck Typing)</h3>
<p>TypeScript åªè®¤<strong>é•¿ç›¸</strong>ï¼ˆé¸­å­æµ‹è¯•ï¼‰ã€‚</p>
<p>åªè¦ä½ é•¿å¾—åƒï¼ˆå±æ€§åˆ—è¡¨åŒ¹é…ï¼‰ï¼Œä½ å°±æ˜¯å®ƒã€‚</p>
<pre><code class="hljs language-css" lang="css">class <span class="hljs-selector-tag">A</span> { x: number; }
class <span class="hljs-selector-tag">B</span> { x: number; }
const obj: A = new <span class="hljs-built_in">B</span>(); // âœ… é€šè¿‡ï¼å› ä¸º <span class="hljs-selector-tag">B</span> ä¹Ÿæœ‰ xï¼Œç»“æ„æ»¡è¶³ <span class="hljs-selector-tag">A</span> çš„è¦æ±‚ã€‚
</code></pre>
<p><img src="%E8%BD%AC%E5%AD%98%E5%A4%B1%E8%B4%A5%EF%BC%8C%E5%BB%BA%E8%AE%AE%E7%9B%B4%E6%8E%A5%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87%E6%96%87%E4%BB%B6%20" alt="è½¬å­˜å¤±è´¥ï¼Œå»ºè®®ç›´æ¥ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p>è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆåœ¨ TS é‡Œï¼Œä½ ç»å¸¸çœ‹åˆ°æœ‰äºº<strong>å·æ‡’</strong>ï¼Œä¸ç”¨ <code>new</code>ï¼Œè€Œæ˜¯ç›´æ¥å†™ä¸ªå­—é¢é‡å¯¹è±¡ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// TS å…è®¸è¿™æ ·ï¼ˆåªè¦å±æ€§å¯¹å¾—ä¸Šï¼‰</span>
<span class="hljs-keyword">const</span> <span class="hljs-keyword">record</span>: <span class="hljs-title">CountPointsTransactDto</span> = { amount: <span class="hljs-number">100</span> }; 
</code></pre>
<p><img src="%E8%BD%AC%E5%AD%98%E5%A4%B1%E8%B4%A5%EF%BC%8C%E5%BB%BA%E8%AE%AE%E7%9B%B4%E6%8E%A5%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87%E6%96%87%E4%BB%B6%20" alt="è½¬å­˜å¤±è´¥ï¼Œå»ºè®®ç›´æ¥ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-9">ğŸ¤” å››ã€çµé­‚æ‹·é—®ï¼šæ—¢ç„¶å¦‚æ­¤ï¼Œä¸ºä»€ä¹ˆè¿˜è¦ç”¨ <code>new</code>ï¼Ÿ</h2>
<p>æ—¢ç„¶ <code>{ amount: 100 }</code> å°±èƒ½å†’å…… DTOï¼Œä¸ºä»€ä¹ˆæˆ‘ä»¬åœ¨ NestJS ä¸­è¿˜æ˜¯æ¨èå†™ï¼š</p>
<p><code>const record = new CountPointsTransactDto();</code></p>
<p>åŸå› æœ‰ä¸‰ï¼š</p>
<ol>
<li>
<p><strong>åˆå§‹å€¼ (Default Values)</strong> ï¼š</p>
<p>ç±»é‡Œå®šä¹‰äº† <code>status = 'PENDING'</code>ï¼Œ<code>new</code> å‡ºæ¥çš„å¯¹è±¡è‡ªåŠ¨å°±æœ‰ã€‚å­—é¢é‡ <code>{}</code> å¿…é¡»æ‰‹åŠ¨å†™ä¸€éã€‚</p>
</li>
<li>
<p><strong>æ–¹æ³• (Methods)</strong> ï¼š</p>
<p>åªæœ‰ <code>new</code> å‡ºæ¥çš„å®ä¾‹æ‰æŒ‚è½½äº†åŸå‹é“¾ï¼Œæ‰èƒ½è°ƒç”¨ DTO é‡Œå®šä¹‰çš„ <code>isValid()</code> æˆ– <code>calculateTax()</code> æ–¹æ³•ã€‚</p>
</li>
<li>
<p><strong>å…ƒæ•°æ® (Metadata &amp; Decorators)</strong> ï¼š</p>
<p>è¿™æ˜¯æœ€é‡è¦çš„ã€‚NestJS å¤§é‡ä½¿ç”¨è£…é¥°å™¨ï¼ˆå¦‚ <code>@IsString()</code>, <code>@Expose()</code>ï¼‰ã€‚</p>
<p><strong>çº¯ JSON å¯¹è±¡æ˜¯ä¸å¸¦è¿™äº›è£…é¥°å™¨ä¿¡æ¯çš„</strong>ã€‚åªæœ‰é€šè¿‡ <code>class-transformer</code> çš„ <code>plainToInstance</code> æˆ–è€…ç›´æ¥ <code>new</code> å‡ºæ¥çš„å¯¹è±¡ï¼ŒéªŒè¯ç®¡é“ï¼ˆValidationPipeï¼‰æ‰èƒ½æ­£å¸¸å·¥ä½œã€‚</p>
</li>
</ol>
<hr/>
<h2 data-id="heading-10">ğŸ“ æ€»ç»“</h2>



































<table><thead><tr><th><strong>ç‰¹æ€§</strong></th><th><strong>Java (new)</strong></th><th><strong>TypeScript / JS (new)</strong></th></tr></thead><tbody><tr><td><strong>æœ¬è´¨</strong></td><td>æŒ‰ç…§è“å›¾å¼€è¾Ÿå›ºå®šå†…å­˜å—</td><td>åˆ›å»ºç©ºå“ˆå¸Œè¡¨ï¼Œé“¾æ¥åŸå‹é“¾</td></tr><tr><td><strong>ç»“æ„çµæ´»æ€§</strong></td><td><strong>ä¸å¯å˜</strong> (ç¼–è¯‘åå›ºå®š)</td><td><strong>é«˜åº¦å¯å˜</strong> (è¿è¡Œæ—¶å¯å¢åˆ å±æ€§)</td></tr><tr><td><strong>å±æ€§èµ‹å€¼</strong></td><td>ä¾èµ– public/privateï¼Œå¸¸ç”¨ Setter</td><td>é»˜è®¤ publicï¼Œå¸¸ç”¨ç›´æ¥èµ‹å€¼</td></tr><tr><td><strong>ç±»å‹å…¼å®¹</strong></td><td><strong>çœ‹åå­—</strong> (å¿…é¡»æ˜¯åŒä¸€ä¸ªç±»æˆ–å­ç±»)</td><td><strong>çœ‹ç»“æ„</strong> (å±æ€§åŒ¹é…å³å¯)</td></tr><tr><td><strong>ä½¿ç”¨å»ºè®®</strong></td><td>å¿…é¡»ç”¨ <code>new</code></td><td>æ¨èç”¨ <code>new</code> (ä¸ºäº†é»˜è®¤å€¼å’Œè£…é¥°å™¨)</td></tr></tbody></table>
<p><strong>ä¸€å¥è¯æ€»ç»“ï¼š</strong></p>
<p>ä¸è¦è¢« TypeScript çš„è¯­æ³•ç³–æ¬ºéª—äº†ã€‚å®ƒè™½ç„¶ç©¿ä¸Šäº† Java çš„è¥¿è£…ï¼ˆClass, new, privateï¼‰ï¼Œä½†å®ƒçš„çµé­‚ä¾ç„¶æ˜¯é‚£ä¸ªè‡ªç”±ã€çµæ´»ã€åŸºäºåŸå‹çš„ JavaScriptã€‚ç†è§£äº†è¿™ä¸€ç‚¹ï¼Œä½ å†™å‡ºçš„ TS ä»£ç æ‰ä¼šæœ‰çœŸæ­£çš„â€œTS å‘³â€ã€‚</p>
<p>â€‹åŒä¸€ä¸ª newï¼Œä¸åŒçš„ä¸–ç•Œï¼šJava ä¸ TypeScript å¯¹è±¡åˆ›å»ºæœºåˆ¶çš„é™ç»´æ‰“å‡»</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è½¦è½½å¤§ç«¯åºå’Œtcpå¤§ç«¯åº]]></title>    <link>https://juejin.cn/post/7605792874173415487</link>    <guid>https://juejin.cn/post/7605792874173415487</guid>    <pubDate>2026-02-13T03:01:15.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605792874173415487" data-draft-id="7605807405307215935" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è½¦è½½å¤§ç«¯åºå’Œtcpå¤§ç«¯åº"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-02-13T03:01:15.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åé—´fish"/> <meta itemprop="url" content="https://juejin.cn/user/2165385864686928"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è½¦è½½å¤§ç«¯åºå’Œtcpå¤§ç«¯åº
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2165385864686928/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åé—´fish
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-13T03:01:15.000Z" title="Fri Feb 13 2026 03:01:15 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><ul>
<li>
<p><strong>TCP/IP å¤§ç«¯ = ç½‘ç»œå­—èŠ‚åº = htonl/htons</strong></p>
</li>
<li>
<p><strong>CAN DBC å¤§ç«¯ = Motorola æ ¼å¼ï¼ˆCANoe/CANdb++ é‡Œçš„ MSBï¼‰</strong></p>
</li>
</ul>
<h2 data-id="heading-0">ä¸€ä¸ªå­—èŠ‚å†…éƒ¨çš„ bit æ˜¯å›ºå®šçš„</h2>
<p>ä»»ä½•ä¸€ä¸ªå­—èŠ‚ï¼Œç¡¬ä»¶ä¸Šæ°¸è¿œæ˜¯ï¼š</p>
<p>plaintext</p>
<pre><code class="hljs language-markdown" lang="markdown">bit7  bit6  bit5  bit4  bit3  bit2  bit1  bit0
<span class="hljs-code">                                  
æœ€é«˜ä½                                    æœ€ä½ä½
</span></code></pre>
<h3 data-id="heading-1">è¿™ä¸ª <strong>bit7~bit0 çš„é¡ºåºï¼Œæ°¸è¿œä¸ä¼šå˜</strong>ã€‚ä¸ç®¡ä½ ç”¨å¤§ç«¯ã€å°ç«¯ã€ç½‘ç»œåºã€DBCï¼Œ<strong>å•ä¸ªå­—èŠ‚å†…éƒ¨çš„ bit ç¼–å·æ°¸è¿œå›ºå®š</strong>ã€‚</h3>
<h3 data-id="heading-2">â‘  TCP å¤§ç«¯ï¼ˆç½‘ç»œå­—èŠ‚åºï¼‰</h3>
<ul>
<li>åªç®¡<strong>å­—èŠ‚åº</strong>ï¼Œä¸ç®¡<strong>ä½åº</strong></li>
<li>å­—èŠ‚ï¼š<strong>é«˜å­—èŠ‚åœ¨å‰ï¼Œä½å­—èŠ‚åœ¨å</strong></li>
<li>ä½åºï¼š<strong>æ¯ä¸ªå­—èŠ‚å†…éƒ¨ï¼Œä½åºä¸å˜</strong></li>
</ul>
<p>å¤ä¹ ï¼š</p>
<p>ä»¥ 32 ä½æ•´æ•° <code>0x12345678</code> ä¸ºä¾‹ï¼š</p>
<p>å®ƒåœ¨å†…å­˜é‡Œï¼ˆå°ç«¯ CPUï¼Œæ¯”å¦‚ ARM/x86ï¼‰æ˜¯ï¼š</p>
<p>plaintext</p>
<pre><code class="hljs">ä½åœ°å€ â†’ é«˜åœ°å€
0x78  0x56  0x34  0x12
</code></pre>
<p>ç”¨ <code>htonl</code> è½¬æˆ <strong>TCP å¤§ç«¯ï¼ˆç½‘ç»œåºï¼‰</strong> åï¼š</p>
<p>plaintext</p>
<pre><code class="hljs">0x12  0x34  0x56  0x78
</code></pre>
<p>ä¾‹ï¼š<code>0x12345678</code>TCP å¤§ç«¯ä¼ è¾“ï¼š<code>12 34 56 78</code></p>
<h3 data-id="heading-3">â‘¡ DBC å¤§ç«¯ï¼ˆMotorolaï¼‰</h3>
<p><strong>æ—¢ç®¡å­—èŠ‚åºï¼Œåˆç®¡ä½åºï¼Œæ˜¯ â€œæ•´æ®µä¿¡å·æŒ‰ä½ä»é«˜å¾€ä½æ’â€</strong></p>
<p>è§„åˆ™ï¼š</p>
<ol>
<li><strong>ä¿¡å·çš„æœ€é«˜ä½ï¼ˆMSBï¼‰æ”¾åœ¨ CAN æŠ¥æ–‡çš„æœ€é«˜åœ°å€ä½</strong></li>
<li><strong>è·¨å­—èŠ‚æ—¶ï¼Œå­—èŠ‚æ˜¯å¤§ç«¯é¡ºåºï¼ˆé«˜å­—èŠ‚â†’ä½å­—èŠ‚ï¼‰</strong></li>
<li><strong>å­—èŠ‚å†…éƒ¨ä½ä¹Ÿæ˜¯å¤§ç«¯ä½åºï¼ˆbit7â†’bit0ï¼‰</strong></li>
</ol>
<p>DBC ä¿¡å·è§£æå¿…é¡»ï¼š</p>
<ul>
<li>æŒ‰ <strong>start_bitã€lengthã€byte_order=Motorola</strong> é€ä½æŠ½å–</li>
<li>DBC çš„ start_bit ä¸æ˜¯ä» Byte0 å¼€å§‹ç®—ï¼Œè€Œæ˜¯ä» Byte7.bit7 å¼€å§‹ç®—ã€‚</li>
<li>DBC Motorola çš„ä¿¡å·ï¼Œæ˜¯ä»ã€Œä½ æŒ‡å®šçš„ start_bitã€å¼€å§‹ï¼Œå¾€ã€Œæ›´å°çš„æ•°å­—ã€æ–¹å‘ï¼Œè¿ç»­å  N ä¸ª bitã€‚</li>
</ul>
<h4 data-id="heading-4">æ‰€è°“çš„è·¨å­—èŠ‚ç†è§£ï¼Œå–å†³äºä¿¡å·çš„é•¿åº¦</h4>
<h2 data-id="heading-5">ç”¨ä¸€ä¸ª 32bit ä¿¡å·ï¼Œç»™ä½ çœ‹ä»€ä¹ˆå«ã€Œè·¨å­—èŠ‚ã€</h2>
<p>æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªä¿¡å·ï¼š</p>
<ul>
<li><strong>Motorola å¤§ç«¯</strong></li>
<li><strong>start_bit = 63</strong>ï¼ˆå°±æ˜¯ Byte7.bit7ï¼‰</li>
<li><strong>length = 32 bit</strong></li>
</ul>
<h3 data-id="heading-6">å®ƒå çš„ bit æ˜¯ï¼š</h3>
<p>63 â†’ 62 â†’ 61 â†’ â€¦ â†’ 32ä¸€å…± 32 ä¸ª bit</p>
<h3 data-id="heading-7">å¯¹åº”åˆ°å­—èŠ‚ï¼š</h3>
<ul>
<li>63ï½56 â†’ <strong>Byte7</strong></li>
<li>55ï½48 â†’ <strong>Byte6</strong></li>
<li>47ï½40 â†’ <strong>Byte5</strong></li>
<li>39ï½32 â†’ <strong>Byte4</strong></li>
</ul>
<h4 data-id="heading-8">ä¿¡å·æ¨ªè·¨ï¼š</h4>
<p><strong>Byte7ã€Byte6ã€Byte5ã€Byte4</strong>è¿™å°±æ˜¯æˆ‘ä¹‹å‰è¯´çš„ï¼š<strong>ä¸€ä¸ªä¿¡å·æ¨ªè·¨ 4 ä¸ªå­—èŠ‚ã€‚</strong></p>
<h2 data-id="heading-9">çœ‹éœ€æ±‚ï¼š</h2>
<h4 data-id="heading-10">ä¸€ã€éœ€æ±‚æè¿°ï¼šï¼ˆ3.0ï¼‰</h4>
<p>1ï¼‰ä½ç½®ä¿¡æ¯å…±äº«è½¯å¼€å…³å…³é—­çŠ¶æ€ä¸‹ï¼Œä½ç½®ä¿¡æ¯ç›¸å…³ä¿¡å·ä¸Šä¼ èµ‹å€¼0å¤„ç†ï¼›</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0c38b33d98a94a19b3d2a664f6d3e66f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2B6Ze0ZmlzaA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771556475&amp;x-signature=60daghAWD%2F1uRjPpYreV6yi%2FloE%3D" alt="ä¼ä¸šå¾®ä¿¡æˆªå›¾_17709510982755.png" loading="lazy"/></p>
<p>å·¥å…·ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.csselectronics.com%2Fpages%2Fdbc-editor-can-bus-database" target="_blank" title="https://www.csselectronics.com/pages/dbc-editor-can-bus-database" ref="nofollow noopener noreferrer">DBC Editor for CAN Bus Database Files [Online | 100% Free] â€“ CSS Electronics</a></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/33fa594ccb704d8a9b493707b0b5acaf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2B6Ze0ZmlzaA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771556475&amp;x-signature=uqGJ%2BZcyCPTbBE7Lued8K35ExTw%3D" alt="ä¼ä¸šå¾®ä¿¡æˆªå›¾_17708910896928.png" loading="lazy"/></p>
<h3 data-id="heading-11">2.2 MCUæ‰“åŒ…åè®®æ•°æ®æ ¼å¼å…³é”®è§£æç‚¹</h3>
<p>(1)æ•´ä½“æ•°æ®æ ¼å¼</p>



















<table><thead><tr><th>å¸§å¤´ï¼ˆ2Byteï¼‰</th><th>Payloadæ•°æ®é•¿åº¦ï¼ˆ2Byteï¼‰</th><th>Counterï¼ˆ1Byteï¼‰</th><th>CRCï¼ˆ1Byteï¼‰</th><th>Payloadï¼ˆå¯å˜é•¿åº¦ï¼‰</th></tr></thead><tbody><tr><td>0x514D</td><td>Â </td><td>Â </td><td>Â </td><td>åŒ…å« N å¸§å­æ•°æ®</td></tr></tbody></table>
<p>ï¼ˆ2ï¼‰Payload ä¸­çš„å•å¸§å­æ•°æ®æ ¼å¼ï¼ˆç¡®è®¤.=ã€‹æŠ¥æ–‡ç±»å‹&amp;å¸§IDä½œä¸ºæ•´ä½“å¤„ç†ï¼‰</p>

















<table><thead><tr><th>èµ·å§‹æ ‡è¯†ï¼ˆ1Byteï¼‰</th><th>æŠ¥æ–‡ç±»å‹ + å¸§ IDï¼ˆ2Byteï¼‰</th><th>Updatebit + å¸§é•¿åº¦ï¼ˆ1Byteï¼‰</th><th>å¸§æ•°æ®ï¼ˆ8-64Byteï¼‰</th></tr></thead><tbody><tr><td>0x55ï¼ˆæœ‰æ•ˆå¸§ï¼‰</td><td>é«˜ 4 ä½ = æŠ¥æ–‡ç±»å‹ï¼ˆå¦‚ 0x00=ZCU_CANFD1ï¼‰ä½ 12 ä½ = CanId</td><td>æœ€é«˜ä½ = Updatebitä½ 7 ä½ = å¸§æ•°æ®é•¿åº¦</td><td/></tr></tbody></table>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">PositionSignalProcessor::clearBitsDBCBigEndian</span><span class="hljs-params">(<span class="hljs-type">uint8_t</span>* data, <span class="hljs-type">int</span> data_len, <span class="hljs-type">uint32_t</span> start, <span class="hljs-type">uint32_t</span> length)</span> </span>{
    <span class="hljs-keyword">if</span> (data == <span class="hljs-literal">nullptr</span> || data_len &lt;= <span class="hljs-number">0</span> || length == <span class="hljs-number">0</span>) {
        <span class="hljs-built_in">debugPrint</span>(<span class="hljs-string">"clearBitsDBCBigEndian: (data=%p, data_len=%d, start=%d, length=%d)\n"</span>,
                   data, data_len, start, length);
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
    
   <span class="hljs-comment">// DBCå¤§ç«¯å­—èŠ‚åºï¼šæŒ‰å­—èŠ‚é¡ºåºï¼Œéè¿ç»­ä½</span>
    <span class="hljs-type">int</span> startByte = start / <span class="hljs-number">8</span>;
    <span class="hljs-type">int</span> bitsInStartByte = start % <span class="hljs-number">8</span> + <span class="hljs-number">1</span>;
    <span class="hljs-type">int</span> bitsLeft = length - bitsInStartByte;
    
    <span class="hljs-comment">// è¾¹ç•Œæ£€æŸ¥</span>
    <span class="hljs-keyword">if</span> (startByte &gt;= data_len) {
        <span class="hljs-built_in">debugPrint</span>(<span class="hljs-string">"frame boundary: startByte=%d &gt;= data_len=%d\n"</span>, startByte, data_len);
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
    <span class="hljs-comment">// ä¿å­˜åŸå§‹æ•°æ®ç”¨äºè°ƒè¯•</span>
    std::vector&lt;<span class="hljs-type">uint8_t</span>&gt; originalData;
    <span class="hljs-keyword">if</span> (m_debug) {
        originalData.<span class="hljs-built_in">assign</span>(data, data + data_len);
    }
    <span class="hljs-comment">// å¦‚æœæœ‰å¤šäºä¸€ä¸ªå­—èŠ‚çš„ä½éœ€è¦å¤„ç†</span>
    <span class="hljs-keyword">if</span> (bitsLeft &gt; <span class="hljs-number">0</span>) {
        <span class="hljs-comment">// æ¸…é™¤ç¬¬ä¸€ä¸ªå­—èŠ‚çš„é«˜ä½</span>
        <span class="hljs-type">unsigned</span> <span class="hljs-type">char</span> mask = <span class="hljs-number">0xFF</span> &lt;&lt; bitsInStartByte;
        data[startByte] &amp;= mask;

        <span class="hljs-comment">// æ¸…é™¤æ‰€æœ‰ä¸­é—´å­—èŠ‚</span>
        <span class="hljs-type">int</span> middleByte = startByte + (bitsLeft) / <span class="hljs-number">8</span>;
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = startByte + <span class="hljs-number">1</span>; i &lt;= middleByte; ++i) {
            data[i] = <span class="hljs-number">0</span>;
        }

        <span class="hljs-comment">// å¤„ç†æœ€åä¸€ä¸ªå­—èŠ‚çš„ä½ä½</span>
        <span class="hljs-type">int</span> lastByteBitsLeft = bitsLeft % <span class="hljs-number">8</span>;
        <span class="hljs-keyword">if</span> (lastByteBitsLeft &gt; <span class="hljs-number">0</span>) {
            <span class="hljs-comment">/*
             -1ï¼šå°† 1 &lt;&lt; n ç”Ÿæˆçš„ã€Œ1 åè·Ÿ n ä¸ª 0ã€çš„æ•°ï¼Œè½¬ä¸ºã€Œn ä¸ª 1ã€çš„äºŒè¿›åˆ¶æ•°
             å¯ä»¥æƒ³è±¡æˆã€Œæœ€å³ä¾§ N ä¸ªæ ¼å­ä¸º 1ï¼Œå…¶ä½™ä¸º 0ã€çš„é®æŒ¡æ¿
             æ©ç ä¸º 1 çš„æ ¼å­ä¿ç•™åŸå€¼ï¼Œæ©ç ä¸º 0 çš„æ ¼å­æ¸…é›¶
            */</span> 
            mask = (<span class="hljs-number">1</span> &lt;&lt; (<span class="hljs-number">8</span> - lastByteBitsLeft)) - <span class="hljs-number">1</span>;
            data[middleByte + <span class="hljs-number">1</span>] &amp;= mask;
        }
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-comment">// å•å­—èŠ‚æƒ…å†µ</span>
        <span class="hljs-type">int</span> startBit = bitsInStartByte - length;
        <span class="hljs-comment">/*
            æ³¨æ„:å•å­—èŠ‚å’Œä¸Šé¢çš„æœ€åä¸€ä¸ªå­—èŠ‚çš„å¤„ç†ä¸ä¸€æ ·
            ä¸Šé¢çš„å¤„ç†åªé€‚ç”¨äºï¼šä¸ç®¡æ¸…é›¶ä½åœ¨å“ªä¸ªä½ç½®ï¼Œéƒ½åªæŠŠã€Œæœ€å³ä¾§ N ä¸ªæ ¼å­ã€è®¾ä¸º 1
            è€Œä¸€æ—¦æ¸…é›¶ä½æ˜¯å­—èŠ‚ä¸­é—´ä½ï¼Œå°±ä¸é€‚ç”¨ã€‚ç”¨ä¸‹é¢æ•°æ®å¯éªŒè¯:
            9A 03 BB 64 1A 0A 67 28
            2.start = 36,len = 3 =&gt; ç»“æœæ˜¯ 9A 03 BB 64 02 0A 67 28
        */</span>
        <span class="hljs-type">unsigned</span> <span class="hljs-type">char</span> mask = ((<span class="hljs-number">1</span> &lt;&lt; length) - <span class="hljs-number">1</span>) &lt;&lt; startBit;
        data[startByte] &amp;= ~mask;
    }
    
    <span class="hljs-comment">// è°ƒè¯•è¾“å‡º</span>
    <span class="hljs-keyword">if</span> (m_debug) {
        <span class="hljs-built_in">debugPrint</span>(<span class="hljs-string">"clearBitsDBCBigEndian: å¤„ç†å‰æ•°æ® (start=%d, length=%d): \n"</span>, start, length);
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; data_len; ++i) {
            <span class="hljs-built_in">debugPrint</span>(<span class="hljs-string">"%02X "</span>, originalData[i]);
        }
        <span class="hljs-built_in">debugPrint</span>(<span class="hljs-string">"\n"</span>);

        <span class="hljs-built_in">debugPrint</span>(<span class="hljs-string">"clearBitsDBCBigEndian: å¤„ç†åæ•°æ®: \n"</span>);
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; data_len; ++i) {
            <span class="hljs-built_in">debugPrint</span>(<span class="hljs-string">"%02X "</span>, data[i]);
        }
        <span class="hljs-built_in">debugPrint</span>(<span class="hljs-string">"\n"</span>);
    }
    
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
}

<span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">PositionSignalProcessor::clearBitsIntelLittleEndian</span><span class="hljs-params">(<span class="hljs-type">uint8_t</span>* data, <span class="hljs-type">int</span> data_len, <span class="hljs-type">uint32_t</span> start, <span class="hljs-type">uint32_t</span> length)</span> </span>{
     <span class="hljs-keyword">if</span> (data == <span class="hljs-literal">nullptr</span> || data_len &lt;= <span class="hljs-number">0</span> || length == <span class="hljs-number">0</span>) {
        <span class="hljs-built_in">debugPrint</span>(<span class="hljs-string">"clearBitsIntelLittleEndian: (data=%p, data_len=%d, start=%u, length=%u)\n"</span>,
                   data, data_len, start, length);
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
    <span class="hljs-comment">// å°ç«¯è¾¹ç•Œæ£€æŸ¥</span>
    <span class="hljs-keyword">if</span> (start - length + <span class="hljs-number">1</span> &lt; <span class="hljs-number">0</span>) {
        <span class="hljs-built_in">debugPrint</span>(<span class="hljs-string">"clearBitsIntelLittleEndian: frame boundary: start=%u, length=%u, start-length+1 &lt; 0\n"</span>, start, length);
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }

    <span class="hljs-type">int</span> downByte = <span class="hljs-built_in">static_cast</span>&lt;<span class="hljs-type">uint32_t</span>&gt;(data_len) - <span class="hljs-number">1</span> - start / <span class="hljs-number">8</span>;
    <span class="hljs-keyword">if</span> (downByte &lt; <span class="hljs-number">0</span>) {
        <span class="hljs-built_in">debugPrint</span>(<span class="hljs-string">"clearBitsIntelLittleEndian: frame boundary: downByte=%d &gt;= data_len=%d\n"</span>, downByte, data_len);
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
    <span class="hljs-type">int</span> bitsInDownByte = <span class="hljs-number">8</span> - start % <span class="hljs-number">8</span>;
    <span class="hljs-type">int</span> bitsLeft = length - bitsInDownByte;

    <span class="hljs-keyword">if</span> (bitsLeft &gt; <span class="hljs-number">0</span>) {
        <span class="hljs-built_in">debugPrint</span>(<span class="hljs-string">"clearBitsIntelLittleEndian: Multi byte case, start=%d, bitsInDownByte=%d, length=%d,bitsLeft=%d\n"</span>, start, bitsInDownByte, length,bitsLeft);
        <span class="hljs-comment">// æ¸…é™¤ç¬¬ä¸€ä¸ªå­—èŠ‚çš„ä½ä½</span>
        <span class="hljs-type">unsigned</span> <span class="hljs-type">char</span> mask = <span class="hljs-built_in">static_cast</span>&lt;<span class="hljs-type">uint8_t</span>&gt;(<span class="hljs-number">0xFF</span> &gt;&gt; bitsInDownByte);
        data[downByte] &amp;= mask;

        <span class="hljs-comment">// æ¸…é™¤ä¸­é—´å­—èŠ‚</span>
        <span class="hljs-type">int</span> middleByte = downByte - (bitsLeft) / <span class="hljs-number">8</span>;
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = downByte - <span class="hljs-number">1</span>; i &gt;= middleByte; --i) {
            data[i] = <span class="hljs-number">0</span>;
        }

        <span class="hljs-comment">// å¤„ç†æœ€åä¸€ä¸ªå­—èŠ‚çš„é«˜ä½</span>
        <span class="hljs-type">int</span> lastByteBitsLeft = bitsLeft % <span class="hljs-number">8</span>;
        <span class="hljs-keyword">if</span> (lastByteBitsLeft &gt; <span class="hljs-number">0</span>) {
            <span class="hljs-type">int</span> lastByteIdx = middleByte - <span class="hljs-number">1</span>;
            <span class="hljs-keyword">if</span> (lastByteIdx &gt;= <span class="hljs-number">0</span>) {
                mask = <span class="hljs-built_in">static_cast</span>&lt;<span class="hljs-type">uint8_t</span>&gt;(<span class="hljs-number">0xFF</span> &lt;&lt; lastByteBitsLeft);
                data[lastByteIdx] &amp;= mask;
            }<span class="hljs-keyword">else</span>{
                <span class="hljs-built_in">debugPrint</span>(<span class="hljs-string">"clearBitsIntelLittleEndian: frame boundary lastByteIdx=%d out of bounds\n"</span>, lastByteIdx);
                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
            }
        }
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-comment">// å•å­—èŠ‚æƒ…å†µ</span>
        <span class="hljs-built_in">debugPrint</span>(<span class="hljs-string">"clearBitsIntelLittleEndian: Single byte case, start=%d, bitsInDownByte=%d, length=%d,bitsLeft=%d\n"</span>, start, bitsInDownByte, length,bitsLeft);
        <span class="hljs-type">int</span> leftBit = <span class="hljs-number">9</span> - start % <span class="hljs-number">8</span> - length;
        <span class="hljs-type">unsigned</span> <span class="hljs-type">char</span> mask = <span class="hljs-built_in">static_cast</span>&lt;<span class="hljs-type">uint8_t</span>&gt;(((<span class="hljs-number">1</span> &lt;&lt; length) - <span class="hljs-number">1</span>) &lt;&lt; leftBit);
        data[downByte] &amp;= ~mask;
    }

    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
}



</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ·±å…¥è§£æ React å›åˆ°é¡¶éƒ¨ï¼ˆBackToTopï¼‰ç»„ä»¶çš„å®ç°ä¸è®¾è®¡]]></title>    <link>https://juejin.cn/post/7605811866908459017</link>    <guid>https://juejin.cn/post/7605811866908459017</guid>    <pubDate>2026-02-13T02:37:04.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605811866908459017" data-draft-id="7605782093482835994" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ·±å…¥è§£æ React å›åˆ°é¡¶éƒ¨ï¼ˆBackToTopï¼‰ç»„ä»¶çš„å®ç°ä¸è®¾è®¡"/> <meta itemprop="keywords" content="å‰ç«¯,React.js,TypeScript"/> <meta itemprop="datePublished" content="2026-02-13T02:37:04.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å†»æ¢¨æ”¿å“¥"/> <meta itemprop="url" content="https://juejin.cn/user/2373184444182659"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ·±å…¥è§£æ React å›åˆ°é¡¶éƒ¨ï¼ˆBackToTopï¼‰ç»„ä»¶çš„å®ç°ä¸è®¾è®¡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2373184444182659/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å†»æ¢¨æ”¿å“¥
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-13T02:37:04.000Z" title="Fri Feb 13 2026 02:37:04 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    6
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æ·±å…¥è§£æ React å›åˆ°é¡¶éƒ¨ï¼ˆBackToTopï¼‰ç»„ä»¶çš„å®ç°ä¸è®¾è®¡</h2>
<p>åœ¨ç°ä»£ç½‘é¡µå¼€å‘ä¸­ï¼Œé•¿é¡µé¢çš„åœºæ™¯ååˆ†å¸¸è§ï¼Œä¸ºäº†æå‡ç”¨æˆ·ä½“éªŒï¼Œâ€œå›åˆ°é¡¶éƒ¨â€ åŠŸèƒ½å‡ ä¹æˆä¸ºæ ‡é…ã€‚æœ¬æ–‡å°†åŸºäºä¸€æ®µ React å®ç°çš„ BackToTop ç»„ä»¶ä»£ç ï¼Œä»ç»“æ„ã€æ ¸å¿ƒé€»è¾‘ã€æ€§èƒ½ä¼˜åŒ–ç­‰ç»´åº¦ï¼Œå…¨é¢è§£æè¯¥ç»„ä»¶çš„è®¾è®¡ä¸å®ç°ç»†èŠ‚ã€‚</p>
<h3 data-id="heading-1">ä¸€ã€ç»„ä»¶æ•´ä½“ç»“æ„æ¦‚è§ˆ</h3>
<p>é¦–å…ˆæ¥çœ‹ BackToTop ç»„ä»¶çš„å®Œæ•´ä»£ç ç»“æ„ï¼Œè¯¥ç»„ä»¶åŸºäº React å‡½æ•°å¼ç»„ä»¶å®ç°ï¼Œæ ¸å¿ƒä¾èµ– React çš„ Hooksã€UI ç»„ä»¶åº“ã€å›¾æ ‡åº“ä»¥åŠè‡ªå®šä¹‰çš„èŠ‚æµå·¥å…·å‡½æ•°ï¼Œæ•´ä½“ç»“æ„æ¸…æ™°ä¸”æ¨¡å—åŒ–ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { useEffect, useState } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Button</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/components/ui/button'</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ArrowUp</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"lucide-react"</span>;
<span class="hljs-keyword">import</span> { throttle } <span class="hljs-keyword">from</span> <span class="hljs-string">"@/utils"</span>;

<span class="hljs-comment">// å®šä¹‰ç»„ä»¶Propsç±»å‹</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">BackToTopProps</span> {
    <span class="hljs-comment">// æ»šåŠ¨è¶…è¿‡å¤šå°‘åƒç´ åæ˜¾ç¤ºæŒ‰é’®</span>
    threshold?: <span class="hljs-built_in">number</span>
}

<span class="hljs-comment">// å‡½æ•°å¼ç»„ä»¶ï¼Œè®¾ç½®thresholdé»˜è®¤å€¼ä¸º400</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">BackToTop</span>: <span class="hljs-title class_">React</span>.<span class="hljs-property">FC</span>&lt;<span class="hljs-title class_">BackToTopProps</span>&gt; = <span class="hljs-function">(<span class="hljs-params">{
    threshold = <span class="hljs-number">400</span>
}</span>) =&gt;</span> {
    <span class="hljs-comment">// çŠ¶æ€ç®¡ç†ï¼šæ§åˆ¶æŒ‰é’®æ˜¯å¦å¯è§</span>
    <span class="hljs-keyword">const</span> [isVisible, setIsVisible] = useState&lt;<span class="hljs-built_in">boolean</span>&gt;(<span class="hljs-literal">false</span>);
    
    <span class="hljs-comment">// å›åˆ°é¡¶éƒ¨æ ¸å¿ƒé€»è¾‘</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">scrollTop</span> = (<span class="hljs-params"/>) =&gt; {
        <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">scrollTo</span>({
            <span class="hljs-attr">top</span>: <span class="hljs-number">0</span>,
            <span class="hljs-attr">behavior</span>:<span class="hljs-string">'smooth'</span>
        })
    }
    
    <span class="hljs-comment">// ç›‘å¬æ»šåŠ¨äº‹ä»¶ï¼Œæ§åˆ¶æŒ‰é’®æ˜¾ç¤º/éšè—</span>
    <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-keyword">const</span> <span class="hljs-title function_">toggleVisibility</span> = (<span class="hljs-params"/>) =&gt; {
            <span class="hljs-title function_">setIsVisible</span>(<span class="hljs-variable language_">window</span>.<span class="hljs-property">scrollY</span> &gt; threshold);
        }
        <span class="hljs-comment">// èŠ‚æµå¤„ç†æ»šåŠ¨ç›‘å¬å‡½æ•°</span>
        <span class="hljs-keyword">const</span> thtottled_func = <span class="hljs-title function_">throttle</span>(toggleVisibility,<span class="hljs-number">200</span>);
        <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'scroll'</span>, thtottled_func);
        <span class="hljs-comment">// æ¸…ç†å‰¯ä½œç”¨ï¼šç§»é™¤æ»šåŠ¨ç›‘å¬</span>
        <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'scroll'</span>, thtottled_func);
    },[threshold])
    
    <span class="hljs-comment">// æ¡ä»¶æ¸²æŸ“ï¼šæœªè¾¾åˆ°é˜ˆå€¼æ—¶ä¸æ¸²æŸ“ç»„ä»¶</span>
    <span class="hljs-keyword">if</span>(!isVisible) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    
    <span class="hljs-comment">// ç»„ä»¶UIæ¸²æŸ“</span>
    <span class="hljs-keyword">return</span> (
        <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">variant</span>=<span class="hljs-string">"outline"</span> <span class="hljs-attr">size</span>=<span class="hljs-string">"icon"</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{scrollTop}</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"fixed bottom-6 right-6 rounded-full shadow-lg hover:shadow-xl z-50"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">ArrowUp</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"h-4 w-4"</span> /&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span></span>
    )
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">BackToTop</span>
</code></pre>
<p>ç»„ä»¶æ•´ä½“å¯åˆ†ä¸º 5 ä¸ªæ ¸å¿ƒéƒ¨åˆ†ï¼š</p>
<ol>
<li>ä¾èµ–å¯¼å…¥ä¸ç±»å‹å®šä¹‰ï¼›</li>
<li>çŠ¶æ€ç®¡ç†ï¼ˆæ§åˆ¶æŒ‰é’®å¯è§æ€§ï¼‰ï¼›</li>
<li>å›åˆ°é¡¶éƒ¨æ ¸å¿ƒé€»è¾‘ï¼›</li>
<li>æ»šåŠ¨äº‹ä»¶ç›‘å¬ä¸æ€§èƒ½ä¼˜åŒ–ï¼›</li>
<li>æ¡ä»¶æ¸²æŸ“ä¸ UI å±•ç¤ºã€‚</li>
</ol>
<h3 data-id="heading-2">äºŒã€æ ¸å¿ƒåŠŸèƒ½é€è¡Œè§£æ</h3>
<h4 data-id="heading-3">1. ç±»å‹å®šä¹‰ä¸ Props è®¾è®¡</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">BackToTopProps</span> {
    threshold?: <span class="hljs-built_in">number</span>
}

<span class="hljs-keyword">const</span> <span class="hljs-title class_">BackToTop</span>: <span class="hljs-title class_">React</span>.<span class="hljs-property">FC</span>&lt;<span class="hljs-title class_">BackToTopProps</span>&gt; = <span class="hljs-function">(<span class="hljs-params">{
    threshold = <span class="hljs-number">400</span>
}</span>) =&gt;</span> { ... }
</code></pre>
<ul>
<li>å®šä¹‰<code>BackToTopProps</code>æ¥å£ï¼Œä»…æš´éœ²<code>threshold</code>å¯é€‰å±æ€§ï¼Œç”¨äºé…ç½® â€œæ»šåŠ¨è¶…è¿‡å¤šå°‘åƒç´ åæ˜¾ç¤ºæŒ‰é’®â€ï¼Œç¬¦åˆ â€œæœ€å°å¯ç”¨ APIâ€ è®¾è®¡åŸåˆ™ï¼›</li>
<li>é€šè¿‡è§£æ„èµ‹å€¼ä¸º<code>threshold</code>è®¾ç½®é»˜è®¤å€¼ 400ï¼Œç¡®ä¿ç»„ä»¶åœ¨æœªä¼ å…¥å‚æ•°æ—¶ä»èƒ½æ­£å¸¸å·¥ä½œã€‚</li>
</ul>
<h4 data-id="heading-4">2. çŠ¶æ€ç®¡ç†ï¼šæ§åˆ¶æŒ‰é’®å¯è§æ€§</h4>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-type">const</span> [isVisible, setIsVisible] = <span class="hljs-built_in">useState</span>&lt;<span class="hljs-type">boolean</span>&gt;(<span class="hljs-literal">false</span>);
</code></pre>
<p>ä½¿ç”¨<code>useState</code> Hook åˆ›å»ºå¸ƒå°”ç±»å‹çŠ¶æ€<code>isVisible</code>ï¼Œåˆå§‹å€¼ä¸º<code>false</code>ï¼ˆé¡µé¢åŠ è½½æ—¶æŒ‰é’®é»˜è®¤éšè—ï¼‰ï¼Œè¯¥çŠ¶æ€ç”¨äºæ§åˆ¶ç»„ä»¶çš„æ¡ä»¶æ¸²æŸ“ã€‚</p>
<h4 data-id="heading-5">3. å›åˆ°é¡¶éƒ¨é€»è¾‘ï¼šå¹³æ»‘æ»šåŠ¨å®ç°</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">scrollTop</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">scrollTo</span>({
        <span class="hljs-attr">top</span>: <span class="hljs-number">0</span>,
        <span class="hljs-attr">behavior</span>:<span class="hljs-string">'smooth'</span>
    })
}
</code></pre>
<ul>
<li>è°ƒç”¨<code>window.scrollTo</code>æ–¹æ³•å®ç°æ»šåŠ¨åˆ°é¡µé¢é¡¶éƒ¨ï¼›</li>
<li>é€šè¿‡é…ç½®<code>behavior: 'smooth'</code>å®ç°å¹³æ»‘æ»šåŠ¨ï¼Œæ›¿ä»£ä¼ ç»Ÿçš„ç¬é—´è·³è½¬ï¼Œæå‡ç”¨æˆ·ä½“éªŒï¼›</li>
<li>è¯¥å‡½æ•°ä½œä¸ºæŒ‰é’®çš„ç‚¹å‡»äº‹ä»¶å›è°ƒï¼Œè§¦å‘å›åˆ°é¡¶éƒ¨æ“ä½œã€‚</li>
</ul>
<h4 data-id="heading-6">4. æ»šåŠ¨ç›‘å¬ä¸æ€§èƒ½ä¼˜åŒ–ï¼ˆæ ¸å¿ƒï¼‰</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">toggleVisibility</span> = (<span class="hljs-params"/>) =&gt; {
        <span class="hljs-title function_">setIsVisible</span>(<span class="hljs-variable language_">window</span>.<span class="hljs-property">scrollY</span> &gt; threshold);
    }
    <span class="hljs-keyword">const</span> thtottled_func = <span class="hljs-title function_">throttle</span>(toggleVisibility,<span class="hljs-number">200</span>);
    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'scroll'</span>, thtottled_func);
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'scroll'</span>, thtottled_func);
},[threshold])
</code></pre>
<p>è¿™æ˜¯ç»„ä»¶çš„æ ¸å¿ƒé€»è¾‘ï¼Œéœ€é‡ç‚¹è§£æï¼š</p>
<h5 data-id="heading-7">ï¼ˆ1ï¼‰æ»šåŠ¨ç›‘å¬å‡½æ•°<code>toggleVisibility</code></h5>
<p><code>toggleVisibility</code>çš„ä½œç”¨æ˜¯åˆ¤æ–­é¡µé¢æ»šåŠ¨è·ç¦»ï¼ˆ<code>window.scrollY</code>ï¼‰æ˜¯å¦è¶…è¿‡é˜ˆå€¼ï¼ˆ<code>threshold</code>ï¼‰ï¼Œå¹¶é€šè¿‡<code>setIsVisible</code>æ›´æ–°æŒ‰é’®å¯è§çŠ¶æ€ã€‚</p>
<h5 data-id="heading-8">ï¼ˆ2ï¼‰èŠ‚æµå¤„ç†çš„å¿…è¦æ€§</h5>
<p><code>scroll</code>äº‹ä»¶æ˜¯é«˜é¢‘è§¦å‘äº‹ä»¶ï¼ˆé¡µé¢æ»šåŠ¨æ—¶ä¼šè¿ç»­è§¦å‘ï¼‰ï¼Œè‹¥ç›´æ¥å°†<code>toggleVisibility</code>ç»‘å®šåˆ°<code>scroll</code>äº‹ä»¶ï¼Œä¼šå¯¼è‡´è¯¥å‡½æ•°è¢«é¢‘ç¹è°ƒç”¨ï¼Œå¼•å‘ä¸å¿…è¦çš„çŠ¶æ€æ›´æ–°å’Œé‡æ¸²æŸ“ï¼Œå½±å“é¡µé¢æ€§èƒ½ã€‚</p>
<p>å› æ­¤ï¼Œç»„ä»¶é€šè¿‡<code>throttle</code>å·¥å…·å‡½æ•°å¯¹<code>toggleVisibility</code>è¿›è¡ŒèŠ‚æµå¤„ç†ï¼Œè®¾ç½® 200ms çš„èŠ‚æµé—´éš” â€”â€” å³æ»šåŠ¨äº‹ä»¶è§¦å‘æ—¶ï¼Œ<code>toggleVisibility</code>æœ€å¤šæ¯ 200ms æ‰§è¡Œä¸€æ¬¡ï¼Œæœ‰æ•ˆå‡å°‘å‡½æ•°æ‰§è¡Œæ¬¡æ•°ï¼Œä¼˜åŒ–æ€§èƒ½ã€‚</p>
<h5 data-id="heading-9">ï¼ˆ3ï¼‰å‰¯ä½œç”¨çš„æŒ‚è½½ä¸æ¸…ç†</h5>
<ul>
<li><code>useEffect</code>åœ¨ç»„ä»¶æŒ‚è½½æ—¶æ‰§è¡Œï¼Œä¸º<code>window</code>æ·»åŠ <code>scroll</code>äº‹ä»¶ç›‘å¬ï¼Œç»‘å®šèŠ‚æµåçš„å‡½æ•°ï¼›</li>
<li><code>useEffect</code>çš„è¿”å›å€¼æ˜¯ä¸€ä¸ªæ¸…ç†å‡½æ•°ï¼Œåœ¨ç»„ä»¶å¸è½½æ—¶æ‰§è¡Œï¼Œç§»é™¤<code>scroll</code>äº‹ä»¶ç›‘å¬ â€”â€” é¿å…å†…å­˜æ³„æ¼ï¼Œæ˜¯ React å‡½æ•°å¼ç»„ä»¶å¤„ç†äº‹ä»¶ç›‘å¬çš„æ ‡å‡†å†™æ³•ï¼›</li>
<li><code>useEffect</code>çš„ä¾èµ–æ•°ç»„åŒ…å«<code>threshold</code>ï¼Œç¡®ä¿å½“é˜ˆå€¼å˜åŒ–æ—¶ï¼Œé‡æ–°ç»‘å®šç›‘å¬å‡½æ•°ã€‚</li>
</ul>
<h4 data-id="heading-10">5. æ¡ä»¶æ¸²æŸ“ä¸ UI å±•ç¤º</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">if</span>(!isVisible) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;

<span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">variant</span>=<span class="hljs-string">"outline"</span> <span class="hljs-attr">size</span>=<span class="hljs-string">"icon"</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{scrollTop}</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"fixed bottom-6 right-6 rounded-full shadow-lg hover:shadow-xl z-50"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">ArrowUp</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"h-4 w-4"</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span></span>
)
</code></pre>
<ul>
<li>
<p>æ¡ä»¶æ¸²æŸ“ï¼šå½“<code>isVisible</code>ä¸º<code>false</code>æ—¶ï¼Œç»„ä»¶è¿”å›<code>null</code>ï¼Œä¸æ¸²æŸ“ä»»ä½•å†…å®¹ï¼›ä»…å½“æ»šåŠ¨è·ç¦»è¶…è¿‡é˜ˆå€¼æ—¶ï¼Œæ‰æ¸²æŸ“å›åˆ°é¡¶éƒ¨æŒ‰é’®ï¼›</p>
</li>
<li>
<p>UI è®¾è®¡ç»†èŠ‚ï¼š</p>
<ul>
<li>ä½¿ç”¨ UI ç»„ä»¶åº“çš„<code>Button</code>ç»„ä»¶ï¼Œè®¾ç½®<code>variant="outline"</code>ï¼ˆè½®å»“æ ·å¼ï¼‰ã€<code>size="icon"</code>ï¼ˆå›¾æ ‡å°ºå¯¸ï¼‰ï¼›</li>
<li>é€šè¿‡<code>className</code>è®¾ç½®å›ºå®šå®šä½ï¼ˆ<code>fixed</code>ï¼‰ã€ä½ç½®ï¼ˆ<code>bottom-6 right-6</code>ï¼Œå³ä¸‹è§’ï¼‰ã€åœ†è§’ï¼ˆ<code>rounded-full</code>ï¼‰ã€é˜´å½±ï¼ˆ<code>shadow-lg/xl</code>ï¼‰ã€å±‚çº§ï¼ˆ<code>z-50</code>ï¼‰ï¼Œç¡®ä¿æŒ‰é’®æ‚¬æµ®åœ¨é¡µé¢æœ€ä¸Šå±‚ä¸”æ ·å¼ç¾è§‚ï¼›</li>
<li>åµŒå…¥<code>lucide-react</code>çš„<code>ArrowUp</code>å›¾æ ‡ä½œä¸ºæŒ‰é’®å†…å®¹ï¼Œç›´è§‚ä¼ è¾¾ â€œå›åˆ°é¡¶éƒ¨â€ çš„åŠŸèƒ½ï¼›</li>
<li>æŒ‰é’®ç»‘å®š<code>onClick</code>äº‹ä»¶ï¼Œè§¦å‘<code>scrollTop</code>å‡½æ•°ã€‚</li>
</ul>
</li>
</ul>
<h3 data-id="heading-11">ä¸‰ã€èŠ‚æµå·¥å…·å‡½æ•°ï¼ˆthrottleï¼‰è§£æ</h3>
<p>ç»„ä»¶ä¾èµ–çš„<code>throttle</code>å‡½æ•°ä½äº<code>index.ts</code>ä¸­ï¼Œå…¶å®ç°å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">ThrottleFunction</span> = <span class="hljs-function">(<span class="hljs-params">...args: <span class="hljs-built_in">any</span>[]</span>) =&gt;</span> <span class="hljs-built_in">void</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">throttle</span>(<span class="hljs-params">fun: ThrottleFunction, delay: <span class="hljs-built_in">number</span></span>): <span class="hljs-title class_">ThrottleFunction</span> {
  <span class="hljs-keyword">let</span> <span class="hljs-attr">last</span>: <span class="hljs-built_in">number</span> | <span class="hljs-literal">undefined</span>;
  <span class="hljs-keyword">let</span> <span class="hljs-attr">deferTimer</span>: <span class="hljs-title class_">NodeJS</span>.<span class="hljs-property">Timeout</span> | <span class="hljs-literal">undefined</span>;

  <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> (<span class="hljs-params">...args: <span class="hljs-built_in">any</span>[]</span>) {
    <span class="hljs-keyword">const</span> now = +<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>();

    <span class="hljs-keyword">if</span> (last &amp;&amp; now &lt; last + delay) {
      <span class="hljs-built_in">clearTimeout</span>(deferTimer);
      deferTimer = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
        last = now;
        <span class="hljs-title function_">fun</span>(args);
      }, delay);
    } <span class="hljs-keyword">else</span> {
      last = now;
      <span class="hljs-title function_">fun</span>(args);
    }
  };
}
</code></pre>
<h4 data-id="heading-12">èŠ‚æµå‡½æ•°çš„æ ¸å¿ƒåŸç†</h4>
<p>èŠ‚æµï¼ˆThrottleï¼‰çš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼š<strong>åœ¨æŒ‡å®šæ—¶é—´é—´éš”å†…ï¼Œåªå…è®¸å‡½æ•°æ‰§è¡Œä¸€æ¬¡</strong>ï¼Œå³ä½¿è§¦å‘å¤šæ¬¡ï¼Œä¹Ÿä»…ç”Ÿæ•ˆä¸€æ¬¡ã€‚è¯¥å®ç°çš„å…³é”®é€»è¾‘ï¼š</p>
<ol>
<li>
<p>å®šä¹‰<code>last</code>ï¼ˆä¸Šä¸€æ¬¡å‡½æ•°æ‰§è¡Œçš„æ—¶é—´æˆ³ï¼‰å’Œ<code>deferTimer</code>ï¼ˆå»¶è¿Ÿå®šæ—¶å™¨ï¼‰ä¸¤ä¸ªé—­åŒ…å˜é‡ï¼Œç”¨äºè®°å½•æ‰§è¡ŒçŠ¶æ€ï¼›</p>
</li>
<li>
<p>æ¯æ¬¡è§¦å‘å‡½æ•°æ—¶ï¼Œè·å–å½“å‰æ—¶é—´æˆ³<code>now</code>ï¼›</p>
</li>
<li>
<p>è‹¥è·ç¦»ä¸Šä¸€æ¬¡æ‰§è¡Œæ—¶é—´ä¸è¶³<code>delay</code>ï¼š</p>
<ul>
<li>æ¸…é™¤åŸæœ‰å®šæ—¶å™¨ï¼Œé¿å…é‡å¤æ‰§è¡Œï¼›</li>
<li>é‡æ–°è®¾ç½®å®šæ—¶å™¨ï¼Œå»¶è¿Ÿ<code>delay</code>åæ‰§è¡Œå‡½æ•°ï¼Œå¹¶æ›´æ–°<code>last</code>ï¼›</li>
</ul>
</li>
<li>
<p>è‹¥è·ç¦»ä¸Šä¸€æ¬¡æ‰§è¡Œæ—¶é—´è¶…è¿‡<code>delay</code>ï¼šç›´æ¥æ‰§è¡Œå‡½æ•°ï¼Œå¹¶æ›´æ–°<code>last</code>ã€‚</p>
</li>
</ol>
<h4 data-id="heading-13">æ³¨æ„ç‚¹</h4>
<p>è¯¥å®ç°ä¸­<code>fun(args)</code>çš„ä¼ å‚æ–¹å¼éœ€æ³¨æ„ â€”â€” åŸå‡½æ•°çš„å‚æ•°é€šè¿‡æ•°ç»„å½¢å¼ä¼ é€’ï¼Œè‹¥åŸå‡½æ•°ä¾èµ–å‚æ•°è§£æ„ï¼Œéœ€ç¡®ä¿ä¼ å‚é€»è¾‘åŒ¹é…ï¼ˆæœ¬æ–‡ä¸­<code>toggleVisibility</code>æ— å‚æ•°ï¼Œå› æ­¤æ— å½±å“ï¼‰ã€‚</p>
<h3 data-id="heading-14">å››ã€ç»„ä»¶çš„ä½¿ç”¨ä¸æ‰©å±•</h3>
<h4 data-id="heading-15">1. åŸºç¡€ä½¿ç”¨</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">BackToTop</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'@/components/BackToTop'</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title function_">App</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      {/* å…¶ä»–é¡µé¢å†…å®¹ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">BackToTop</span> <span class="hljs-attr">threshold</span>=<span class="hljs-string">{500}</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};
</code></pre>
<p>ä»…éœ€å¼•å…¥ç»„ä»¶ï¼Œå¯é€šè¿‡<code>threshold</code>è‡ªå®šä¹‰æ˜¾ç¤ºé˜ˆå€¼ï¼Œå¼€ç®±å³ç”¨ã€‚</p>
<h4 data-id="heading-16">2. æ‰©å±•æ–¹å‘</h4>
<ul>
<li><strong>è‡ªå®šä¹‰æ ·å¼</strong>ï¼šé€šè¿‡<code>className</code>è¦†ç›–é»˜è®¤æ ·å¼ï¼Œæˆ–æ–°å¢<code>className</code> Props æ”¯æŒè‡ªå®šä¹‰æ ·å¼ï¼›</li>
<li><strong>è‡ªå®šä¹‰å›¾æ ‡</strong>ï¼šå°†å›¾æ ‡ä½œä¸º Props ä¼ å…¥ï¼Œæ”¯æŒæ›¿æ¢ä¸ºè‡ªå®šä¹‰å›¾æ ‡ï¼›</li>
<li><strong>æ»šåŠ¨ç›®æ ‡</strong>ï¼šæ‰©å±• Props æ”¯æŒæ»šåŠ¨åˆ°æŒ‡å®šå…ƒç´ ï¼ˆè€Œéä»…é¡¶éƒ¨ï¼‰ï¼›</li>
<li><strong>åŠ¨ç”»æ•ˆæœ</strong>ï¼šæ·»åŠ æŒ‰é’®æ˜¾ç¤º / éšè—çš„è¿‡æ¸¡åŠ¨ç”»ï¼ˆå¦‚ React Transition Groupï¼‰ï¼›</li>
<li><strong>ç§»åŠ¨ç«¯é€‚é…</strong>ï¼šé’ˆå¯¹ç§»åŠ¨ç«¯è°ƒæ•´æŒ‰é’®å°ºå¯¸å’Œä½ç½®ï¼›</li>
<li><strong>æ— éšœç¢è®¿é—®ï¼ˆa11yï¼‰</strong> ï¼šæ·»åŠ <code>aria-label</code>ç­‰å±æ€§ï¼Œæå‡æ— éšœç¢ä½“éªŒã€‚</li>
</ul>
<h3 data-id="heading-17">äº”ã€æ€»ç»“</h3>
<p>æœ¬æ–‡è§£æçš„ BackToTop ç»„ä»¶æ˜¯ä¸€ä¸ªå…¸å‹çš„ â€œå°è€Œç¾â€ çš„ React ç»„ä»¶ï¼Œå…¶è®¾è®¡å…·å¤‡ä»¥ä¸‹ä¼˜ç‚¹ï¼š</p>
<ol>
<li><strong>ç±»å‹å®‰å…¨</strong>ï¼šé€šè¿‡ TypeScript å®šä¹‰ Props æ¥å£ï¼Œç¡®ä¿ç±»å‹æ ¡éªŒï¼›</li>
<li><strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼šä½¿ç”¨èŠ‚æµå¤„ç†é«˜é¢‘æ»šåŠ¨äº‹ä»¶ï¼Œé¿å…æ€§èƒ½æŸè€—ï¼›</li>
<li><strong>ç”¨æˆ·ä½“éªŒ</strong>ï¼šå¹³æ»‘æ»šåŠ¨ã€æ¡ä»¶æ¸²æŸ“ã€ç¾è§‚çš„ UI è®¾è®¡ï¼›</li>
<li><strong>å¯ç»´æŠ¤æ€§</strong>ï¼šæ¨¡å—åŒ–ç»“æ„ã€æ¸…æ™°çš„é€»è¾‘æ‹†åˆ†ã€å®Œå–„çš„å‰¯ä½œç”¨æ¸…ç†ï¼›</li>
<li><strong>å¯æ‰©å±•æ€§</strong>ï¼šé€šè¿‡ Props æš´éœ²æ ¸å¿ƒé…ç½®ï¼Œä¾¿äºæ‰©å±•ã€‚</li>
</ol>
<p>è¯¥ç»„ä»¶çš„å®ç°æ€è·¯ä¸ä»…é€‚ç”¨äº â€œå›åˆ°é¡¶éƒ¨â€ åŠŸèƒ½ï¼Œä¹Ÿå¯è¿ç§»åˆ°å…¶ä»–éœ€è¦ç›‘å¬æ»šåŠ¨äº‹ä»¶çš„åœºæ™¯ï¼ˆå¦‚å¯¼èˆªæ å¸é¡¶ã€æ‡’åŠ è½½ç­‰ï¼‰ï¼Œæ˜¯ React å‡½æ•°å¼ç»„ä»¶å¼€å‘çš„å…¸å‹å®è·µæ¡ˆä¾‹ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[gsap é…ç½®è§£è¯» --1]]></title>    <link>https://juejin.cn/post/7605985547568758790</link>    <guid>https://juejin.cn/post/7605985547568758790</guid>    <pubDate>2026-02-13T02:56:59.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605985547568758790" data-draft-id="7605792874173268031" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="gsap  é…ç½®è§£è¯» --1"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-02-13T02:56:59.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§æ—¶å…‰"/> <meta itemprop="url" content="https://juejin.cn/user/2529296311138013"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            gsap  é…ç½®è§£è¯» --1
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2529296311138013/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§æ—¶å…‰
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-13T02:56:59.000Z" title="Fri Feb 13 2026 02:56:59 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    6
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">toggleActions: "play none none reverse"  æ˜¯ä»€ä¹ˆæ„æ€</h2>
<pre><code class="hljs language-js" lang="js">gsap.<span class="hljs-title function_">to</span>(panel, {
<span class="hljs-attr">y</span>: <span class="hljs-number">0</span>,
<span class="hljs-attr">opacity</span>: <span class="hljs-number">1</span>,
<span class="hljs-attr">duration</span>: <span class="hljs-number">0.8</span>,
<span class="hljs-attr">ease</span>: <span class="hljs-string">"power2.out"</span>, 
<span class="hljs-attr">scrollTrigger</span>: {
<span class="hljs-attr">trigger</span>: panel, 
<span class="hljs-attr">start</span>: <span class="hljs-string">"top 80%"</span>, <span class="hljs-comment">// å½“ panel çš„é¡¶éƒ¨åˆ°è¾¾ viewport çš„ 80% ä½ç½®æ—¶ï¼Œè¿›å…¥è§¦å‘åŒº</span>
<span class="hljs-attr">end</span>: <span class="hljs-string">"top 40%"</span>, <span class="hljs-comment">// å½“ panel çš„é¡¶éƒ¨åˆ°è¾¾ viewport çš„ 40% ä½ç½®æ—¶ï¼Œç¦»å¼€è§¦å‘åŒº </span>
<span class="hljs-attr">toggleActions</span>: <span class="hljs-string">"play none none reverse"</span>
} 
});
</code></pre>






























<table><thead><tr><th>ä½ç½®</th><th>è§¦å‘æ—¶æœº</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>1. <code>onEnter</code></td><td>å…ƒç´ ä»ä¸Šå¾€ä¸‹æ»šåŠ¨è¿›å…¥è§¦å‘åŒºé—´ï¼ˆæ¯”å¦‚è¿›å…¥ <code>start</code> åˆ° <code>end</code> åŒºåŸŸï¼‰</td><td>æ­¤å¤„æ˜¯ <code>"play"</code> â†’ æ’­æ”¾åŠ¨ç”»</td></tr><tr><td>2. <code>onLeave</code></td><td>å…ƒç´ ç»§ç»­å‘ä¸‹æ»šåŠ¨ï¼Œç¦»å¼€è§¦å‘åŒºé—´ï¼ˆæ»šå‡º <code>end</code> ä¹‹åï¼‰</td><td>æ­¤å¤„æ˜¯ <code>"none"</code> â†’ ä»€ä¹ˆéƒ½ä¸åš</td></tr><tr><td>3. <code>onEnterBack</code></td><td>å…ƒç´ ä»ä¸‹å¾€ä¸Šæ»šåŠ¨ï¼Œé‡æ–°è¿›å…¥è§¦å‘åŒºé—´ï¼ˆåå‘æ»šåŠ¨è¿›å…¥ï¼‰</td><td>æ­¤å¤„æ˜¯ <code>"none"</code> â†’ ä»€ä¹ˆéƒ½ä¸åš</td></tr><tr><td>4. <code>onLeaveBack</code></td><td>å…ƒç´ ç»§ç»­å‘ä¸Šæ»šåŠ¨ï¼Œç¦»å¼€è§¦å‘åŒºé—´ï¼ˆåå‘æ»šå‡º <code>start</code> ä¹‹å‰ï¼‰</td><td>æ­¤å¤„æ˜¯ <code>"reverse"</code> â†’ åå‘æ’­æ”¾åŠ¨ç”»ï¼ˆå³å€’æ”¾ï¼‰</td></tr></tbody></table>
<h4 data-id="heading-1"><code>toggleActions</code></h4>





































<table><thead><tr><th>åŠ¨ä½œå€¼</th><th>æ•ˆæœ</th></tr></thead><tbody><tr><td><code>"play"</code></td><td>æ’­æ”¾åŠ¨ç”»ï¼ˆä»å½“å‰è¿›åº¦å¼€å§‹ï¼‰</td></tr><tr><td><code>"pause"</code></td><td>æš‚åœåŠ¨ç”»</td></tr><tr><td><code>"resume"</code></td><td>æ¢å¤æ’­æ”¾ï¼ˆå¦‚æœå·²æš‚åœï¼‰</td></tr><tr><td><code>"reverse"</code></td><td>åå‘æ’­æ”¾ï¼ˆå€’æ”¾ï¼‰</td></tr><tr><td><code>"restart"</code></td><td>ä»å¤´å¼€å§‹æ’­æ”¾</td></tr><tr><td><code>"reset"</code></td><td>é‡ç½®åˆ°åˆå§‹çŠ¶æ€</td></tr><tr><td><code>"none"</code></td><td>æ— æ“ä½œï¼ˆä¿æŒå½“å‰çŠ¶æ€ï¼‰</td></tr></tbody></table>
<h4 data-id="heading-2">Â å…¸å‹ä½¿ç”¨åœºæ™¯å¯¹æ¯”ï¼š</h4>

























<table><thead><tr><th>éœ€æ±‚</th><th>æ¨è <code>toggleActions</code></th></tr></thead><tbody><tr><td>è¿›å…¥æ’­æ”¾ï¼Œç¦»å¼€é‡ç½®</td><td><code>"play none none reset"</code></td></tr><tr><td>è¿›å…¥æ’­æ”¾ï¼Œåå‘ç¦»å¼€æ—¶å€’æ”¾</td><td><code>"play none none reverse"</code> â† ä½ çš„æƒ…å†µ</td></tr><tr><td>åªæ’­æ”¾ä¸€æ¬¡ï¼Œä¹‹åä¸å†åŠ¨</td><td><code>"play pause pause pause"</code></td></tr><tr><td>æ¥å›éƒ½æ’­æ”¾</td><td><code>"play play play play"</code>ï¼ˆä¸æ¨èï¼Œä¼šé—ªçƒï¼‰</td></tr></tbody></table>
<h2 data-id="heading-3">paused: trueæ˜¯ä»€ä¹ˆæ„æ€</h2>
<pre><code class="hljs language-const" lang="const">{
x: 280, 
scale: 0.5,
opacity: 0,
duration: 1,
ease: "power2.out",
paused: true 
});

</code></pre>
<p>åœ¨ GSAPï¼ˆGreenSock Animation Platformï¼‰ä¸­ï¼Œ<code>paused: true</code>Â æ˜¯ä¸€ä¸ª<strong>åŠ¨ç”»é…ç½®é€‰é¡¹</strong>ï¼Œå®ƒçš„ä½œç”¨æ˜¯ï¼š</p>
<blockquote>
<p><strong>åˆ›å»ºåŠ¨ç”»æ—¶ç«‹å³æš‚åœï¼ˆä¸è‡ªåŠ¨æ’­æ”¾ï¼‰ï¼Œç­‰å¾…åç»­æ‰‹åŠ¨æ§åˆ¶æ’­æ”¾ã€‚</strong></p>
</blockquote>
<ul>
<li><code>gsap.from(...)</code>Â è¡¨ç¤ºï¼š<strong>ä»æŒ‡å®šçš„èµ·å§‹çŠ¶æ€ï¼ˆx=280, scale=0.5, opacity=0ï¼‰åŠ¨ç”»åˆ°å…ƒç´ å½“å‰çš„ CSS çŠ¶æ€</strong>ã€‚</li>
<li>ä½†ç”±äºè®¾ç½®äº†Â <code>paused: true</code>ï¼Œè¿™ä¸ªåŠ¨ç”»<strong>ä¸ä¼šç«‹åˆ»æ‰§è¡Œ</strong>ï¼Œè€Œæ˜¯è¢«â€œå†»ç»“â€åœ¨åˆå§‹çŠ¶æ€ï¼ˆå³å…ƒç´ ä¿æŒåŸæ ·ï¼Œä¸ä¼šåŠ¨ï¼‰ã€‚</li>
<li>ä½ éœ€è¦<strong>æ‰‹åŠ¨è°ƒç”¨</strong>Â <code>tween.play()</code>Â æ‰ä¼šå¼€å§‹æ’­æ”¾åŠ¨ç”»ã€‚</li>
</ul>
<h4 data-id="heading-4">âœ… ä¸ºä»€ä¹ˆéœ€è¦Â <code>paused: true</code>ï¼Ÿ</h4>
<p>é€šå¸¸ç”¨äºä»¥ä¸‹åœºæ™¯ï¼š</p>
<h5 data-id="heading-5">1.Â <strong>å»¶è¿Ÿè§¦å‘åŠ¨ç”»</strong></h5>
<p>æ¯”å¦‚ç‚¹å‡»æŒ‰é’®ã€æ»šåŠ¨åˆ°æŸä½ç½®ã€æˆ–æ»¡è¶³æŸä¸ªæ¡ä»¶åå†æ’­æ”¾ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'#btn'</span>).<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-function">() =&gt;</span> { 
tween.<span class="hljs-title function_">play</span>(); <span class="hljs-comment">// ç‚¹å‡»æ—¶æ‰æ’­æ”¾</span>
});
</code></pre>
<h5 data-id="heading-6">2.Â <strong>é…åˆ ScrollTrigger æˆ–å…¶ä»–äº¤äº’é€»è¾‘</strong></h5>
<p>ä½ å¯èƒ½å…ˆå®šä¹‰å¥½åŠ¨ç”»ï¼Œç­‰ ScrollTrigger åˆå§‹åŒ–å®Œæˆåå†å…³è”ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-title class_">ScrollTrigger</span>.<span class="hljs-title function_">create</span>({
<span class="hljs-attr">trigger</span>: <span class="hljs-string">".section"</span>,
<span class="hljs-attr">start</span>: <span class="hljs-string">"top center"</span>,
<span class="hljs-attr">onEnter</span>: <span class="hljs-function">() =&gt;</span> tween.<span class="hljs-title function_">play</span>()
});
</code></pre>
<h5 data-id="heading-7">3.Â <strong>å¤ç”¨åŠ¨ç”»</strong></h5>
<p>åŒä¸€ä¸ªÂ <code>tween</code>Â å¯ä»¥å¤šæ¬¡Â <code>play()</code>ã€<code>reverse()</code>ã€<code>restart()</code>ï¼Œè€Œä¸ä¼šé‡å¤åˆ›å»ºã€‚</p>

































<table><thead><tr><th>æ–¹æ³•</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td><code>tween.play()</code></td><td>æ’­æ”¾åŠ¨ç”»</td></tr><tr><td><code>tween.pause()</code></td><td>æš‚åœåŠ¨ç”»</td></tr><tr><td><code>tween.reverse()</code></td><td>åå‘æ’­æ”¾ï¼ˆä»å½“å‰è¿›åº¦å€’æ”¾å›èµ·ç‚¹ï¼‰</td></tr><tr><td><code>tween.restart()</code></td><td>ä»å¤´å¼€å§‹æ’­æ”¾</td></tr><tr><td><code>tween.seek(0.5)</code></td><td>è·³è½¬åˆ°åŠ¨ç”» 50% è¿›åº¦</td></tr><tr><td><code>tween.progress(1)</code></td><td>ç¬é—´è·³åˆ°ç»“æŸçŠ¶æ€</td></tr></tbody></table>

















<table><thead><tr><th>é…ç½®</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td><code>paused: true</code></td><td>åˆ›å»ºåŠ¨ç”»ä½†ä¸è‡ªåŠ¨æ’­æ”¾ï¼Œéœ€æ‰‹åŠ¨è°ƒç”¨ <code>.play()</code> ç­‰æ–¹æ³•æ§åˆ¶</td></tr><tr><td>é»˜è®¤ï¼ˆä¸å†™ï¼‰</td><td>åŠ¨ç”»åˆ›å»ºåç«‹å³è‡ªåŠ¨æ’­æ”¾</td></tr></tbody></table>
<h2 data-id="heading-8">gsap.set()  set æ˜¯ä»€ä¹ˆæ„æ€</h2>
<p>åœ¨ GSAPï¼ˆGreenSock Animation Platformï¼‰ä¸­ï¼Œ<code>gsap.set()</code>Â æ˜¯ä¸€ä¸ª<strong>ç«‹å³è®¾ç½®å…ƒç´ å±æ€§</strong>çš„æ–¹æ³•ï¼Œ<strong>ä¸ä¼šäº§ç”ŸåŠ¨ç”»è¿‡æ¸¡</strong>ï¼Œè€Œæ˜¯<strong>ç¬é—´åº”ç”¨æŒ‡å®šçš„æ ·å¼æˆ–å±æ€§å€¼</strong>ã€‚</p>






























<table><thead><tr><th>æ–¹æ³•</th><th>æ˜¯å¦åŠ¨ç”»</th><th>ç”¨é€”</th></tr></thead><tbody><tr><td><code>gsap.set(target, vars)</code></td><td>âŒ å¦</td><td>ç«‹å³è®¾ç½®å±æ€§ï¼ˆç›¸å½“äºâ€œåˆå§‹åŒ–çŠ¶æ€â€ï¼‰</td></tr><tr><td><code>gsap.to(target, vars)</code></td><td>âœ… æ˜¯</td><td>ä»å½“å‰çŠ¶æ€ åŠ¨ç”»åˆ° æŒ‡å®šçŠ¶æ€</td></tr><tr><td><code>gsap.from(target, vars)</code></td><td>âœ… æ˜¯</td><td>ä»æŒ‡å®šçŠ¶æ€ åŠ¨ç”»åˆ° å½“å‰çŠ¶æ€</td></tr><tr><td><code>gsap.fromTo(target, fromVars, toVars)</code></td><td>âœ… æ˜¯</td><td>è‡ªå®šä¹‰èµ·å§‹å’Œç»“æŸçŠ¶æ€</td></tr></tbody></table>
<h2 data-id="heading-9">clearProps: "all"æ˜¯ä»€ä¹ˆæ„æ€</h2>
<p>gsap.set([boxA, boxB], { clearProps: "all" });
è¿™è¡Œä»£ç çš„ä½œç”¨æ˜¯ï¼š</p>
<blockquote>
<p><strong>ç«‹å³æ¸…é™¤Â <code>boxA</code>Â å’ŒÂ <code>boxB</code>Â å…ƒç´ ä¸Šç”± GSAP è®¾ç½®çš„æ‰€æœ‰å†…è”æ ·å¼å±æ€§ï¼ˆæ¯”å¦‚Â <code>transform</code>,Â <code>opacity</code>,Â <code>backgroundColor</code>Â ç­‰ï¼‰ï¼Œè®©å®ƒä»¬æ¢å¤åˆ° GSAP å¹²é¢„ä¹‹å‰çš„çŠ¶æ€ï¼ˆå³ä»…å— CSS ç±»æˆ–åŸå§‹ HTML æ ·å¼æ§åˆ¶ï¼‰ã€‚</strong></p>
</blockquote>
<hr/>
<h4 data-id="heading-10">âœ…Â <code>clearProps</code>Â çš„ä½œç”¨è¯¦è§£</h4>
<ul>
<li>GSAP åœ¨æ‰§è¡ŒåŠ¨ç”»ï¼ˆå¦‚Â <code>gsap.to()</code>ã€<code>gsap.from()</code>ï¼‰æˆ–Â <code>gsap.set()</code>Â æ—¶ï¼Œä¼š<strong>ç›´æ¥å†™å…¥å…ƒç´ çš„Â <code>style</code>Â å±æ€§</strong>ï¼ˆä¾‹å¦‚ï¼š<code>&lt;div style="transform: translateX(100px); opacity: 0.5;"&gt;</code>ï¼‰ã€‚</li>
<li>è¿™äº›å†…è”æ ·å¼ä¼˜å…ˆçº§å¾ˆé«˜ï¼Œä¼šè¦†ç›–ä½ å†™çš„ CSS ç±»ã€‚</li>
<li>ä½¿ç”¨Â <code>clearProps</code>Â å¯ä»¥<strong>æ¸…ç†è¿™äº›â€œæ®‹ç•™â€çš„å†…è”æ ·å¼</strong>ï¼Œé¿å…å¹²æ‰°åç»­å¸ƒå±€æˆ–æ ·å¼ã€‚</li>
</ul>

























<table><thead><tr><th>å€¼</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>"all"</code></td><td>æ¸…é™¤ æ‰€æœ‰ GSAP è®¾ç½®è¿‡çš„å†…è”æ ·å¼ï¼ˆæœ€å¸¸ç”¨ï¼‰âœ…</td></tr><tr><td><code>"transform"</code></td><td>ä»…æ¸…é™¤ <code>transform</code> ç›¸å…³å±æ€§ï¼ˆå¦‚ <code>x</code>, <code>y</code>, <code>scale</code>, <code>rotation</code> ç­‰ï¼‰</td></tr><tr><td><code>"opacity,backgroundColor"</code></td><td>æ¸…é™¤æŒ‡å®šçš„å¤šä¸ªå±æ€§ï¼ˆç”¨é€—å·åˆ†éš”ï¼‰</td></tr><tr><td><code>"x,y"</code></td><td>ä»…æ¸…é™¤ <code>x</code> å’Œ <code>y</code>ï¼ˆå³ <code>transform: translateX/Y</code>ï¼‰</td></tr></tbody></table>
<p>ğŸ’¡ æ³¨æ„ï¼š<code>clearProps</code>Â åªæ¸…é™¤Â <strong>GSAP æ˜¾å¼è®¾ç½®è¿‡</strong>Â çš„å±æ€§ï¼Œä¸ä¼šå½±å“å…¶ä»– JavaScript æˆ– HTML ä¸­åŸæœ¬å°±æœ‰çš„Â <code>style</code>ã€‚</p>
<h4 data-id="heading-11">ğŸ¯ ä½¿ç”¨åœºæ™¯ä¸¾ä¾‹</h4>
<h5 data-id="heading-12">åœºæ™¯ 1ï¼šé‡ç½®åŠ¨ç”»çŠ¶æ€</h5>
<p>js</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-comment">// å…ˆæ‰§è¡Œä¸€ä¸ªåŠ¨ç”»</span>
gsap.<span class="hljs-title function_ invoke__">to</span>(boxA, { <span class="hljs-attr">x</span>: <span class="hljs-number">100</span>, <span class="hljs-attr">backgroundColor</span>: <span class="hljs-string">"red"</span>, <span class="hljs-attr">duration</span>: <span class="hljs-number">1</span> });

<span class="hljs-comment">// åæ¥æƒ³è®©å®ƒå®Œå…¨å›åˆ°åŸå§‹ CSS æ ·å¼</span>
gsap.<span class="hljs-title function_ invoke__">set</span>(boxA, { <span class="hljs-attr">clearProps</span>: <span class="hljs-string">"all"</span> });
<span class="hljs-comment">// æ•ˆæœç›¸å½“äºï¼šboxA.style.cssText = ""; ï¼ˆä½†æ›´å®‰å…¨ï¼Œåªæ¸… GSAP è®¾ç½®çš„ï¼‰</span>
</code></pre>
<h5 data-id="heading-13">åœºæ™¯ 2ï¼šé¿å… transform å†²çª</h5>
<p>css</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.my-box</span> {
  <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">rotate</span>(<span class="hljs-number">10deg</span>); <span class="hljs-comment">/* åŸå§‹ CSS transform */</span>
}
</code></pre>
<p>js</p>
<pre><code class="hljs language-php" lang="php">gsap.<span class="hljs-title function_ invoke__">to</span>(<span class="hljs-string">".my-box"</span>, { <span class="hljs-attr">x</span>: <span class="hljs-number">50</span> }); <span class="hljs-comment">// GSAP ä¼šåˆå¹¶ transformï¼Œå˜æˆ rotate + translate</span>
gsap.<span class="hljs-title function_ invoke__">set</span>(<span class="hljs-string">".my-box"</span>, { <span class="hljs-attr">clearProps</span>: <span class="hljs-string">"transform"</span> }); <span class="hljs-comment">// æ¸…é™¤åï¼Œåªå‰© rotate(10deg)</span>
</code></pre>
<h5 data-id="heading-14">åœºæ™¯ 3ï¼šç»„ä»¶é”€æ¯å‰æ¸…ç†</h5>
<p>åœ¨ React/Vue ç»„ä»¶å¸è½½æ—¶ï¼Œæ¸…é™¤ GSAP æ·»åŠ çš„æ ·å¼ï¼Œé˜²æ­¢å†…å­˜æ³„æ¼æˆ–æ ·å¼æ®‹ç•™ã€‚</p>
<hr/>
<h4 data-id="heading-15">âš ï¸ æ³¨æ„äº‹é¡¹</h4>
<ol>
<li><strong><code>clearProps: "all"</code>Â ä¸ä¼šåˆ é™¤é GSAP è®¾ç½®çš„å†…è”æ ·å¼</strong><br/>
æ¯”å¦‚ä½ æ‰‹åŠ¨å†™äº†Â <code>&lt;div style="color: blue"&gt;</code>ï¼ŒGSAP ä¸ä¼šåŠ¨å®ƒã€‚</li>
<li><strong><code>transform</code>Â æ˜¯ä¸€ä¸ªæ•´ä½“</strong><br/>
å³ä½¿ä½ åªè®¾ç½®äº†Â <code>x: 100</code>ï¼Œ<code>clearProps: "transform"</code>Â ä¹Ÿä¼šæ¸…é™¤æ•´ä¸ªÂ <code>transform</code>Â å­—ç¬¦ä¸²ã€‚</li>
<li><strong><code>autoAlpha</code>Â ä¼šåŒæ—¶å½±å“Â <code>opacity</code>Â å’ŒÂ <code>visibility</code></strong><br/>
å¦‚æœä½ ç”¨äº†Â <code>autoAlpha</code>ï¼Œéœ€è¦åŒæ—¶æ¸…é™¤è¿™ä¸¤ä¸ªå±æ€§ã€‚</li>
</ol>













<table><thead><tr><th>ä»£ç </th><th>ä½œç”¨</th></tr></thead><tbody><tr><td><code>gsap.set(el, { clearProps: "all" })</code></td><td>å½»åº•æ¸…é™¤ GSAP å¯¹è¯¥å…ƒç´ è®¾ç½®çš„æ‰€æœ‰å†…è”æ ·å¼ï¼Œæ¢å¤â€œå¹²å‡€â€çŠ¶æ€</td></tr></tbody></table>
<h2 data-id="heading-16">keyframesæ˜¯ä»€ä¹ˆæ„æ€</h2>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> tween = gsap.<span class="hljs-title function_">to</span>(shape, {
        <span class="hljs-attr">keyframes</span>: [
          { <span class="hljs-attr">x</span>: -<span class="hljs-number">160</span>, <span class="hljs-attr">rotation</span>: -<span class="hljs-number">15</span>, <span class="hljs-attr">duration</span>: <span class="hljs-number">0.4</span> },
          { <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">scale</span>: <span class="hljs-number">1.2</span>, <span class="hljs-attr">duration</span>: <span class="hljs-number">0.4</span> },
          { <span class="hljs-attr">x</span>: <span class="hljs-number">160</span>, <span class="hljs-attr">rotation</span>: <span class="hljs-number">20</span>, <span class="hljs-attr">duration</span>: <span class="hljs-number">0.4</span> },
          { <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">scale</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">rotation</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">duration</span>: <span class="hljs-number">0.4</span> }
        ],
        <span class="hljs-attr">ease</span>: <span class="hljs-string">"power1.inOut"</span>,
        <span class="hljs-attr">paused</span>: <span class="hljs-literal">true</span>
      });
</code></pre>
<p>åœ¨ GSAPï¼ˆGreenSock Animation Platformï¼‰ä¸­ï¼Œ<code>keyframes</code>Â æ˜¯ä¸€ç§<strong>å°†å¤šä¸ªåŠ¨ç”»æ­¥éª¤ä¸²è”èµ·æ¥</strong>çš„æ–¹å¼ï¼Œç±»ä¼¼äº CSS çš„Â <code>@keyframes</code>ï¼Œä½†åŠŸèƒ½æ›´å¼ºå¤§ã€æ›´çµæ´»ã€‚</p>
<p>è¿™æ®µä»£ç çš„æ„æ€æ˜¯ï¼š</p>
<blockquote>
<p><strong>å¯¹Â <code>shape</code>Â å…ƒç´ æ‰§è¡Œä¸€ä¸ªç”± 4 ä¸ªå…³é”®å¸§ç»„æˆçš„å¤åˆåŠ¨ç”»ï¼Œæ¯ä¸ªå…³é”®å¸§æŒç»­ 0.4 ç§’ï¼Œæ€»å…± 1.6 ç§’ã€‚åŠ¨ç”»è¢«æš‚åœï¼ˆ<code>paused: true</code>ï¼‰ï¼Œéœ€æ‰‹åŠ¨è°ƒç”¨Â <code>.play()</code>Â æ‰ä¼šè¿è¡Œã€‚</strong></p>
</blockquote>
<hr/>
<h4 data-id="heading-17">âœ…Â <code>keyframes</code>Â çš„å·¥ä½œåŸç†</h4>
<ul>
<li>æ¯ä¸ªå¯¹è±¡ä»£è¡¨ä¸€ä¸ª<strong>åŠ¨ç”»é˜¶æ®µï¼ˆå…³é”®å¸§ï¼‰</strong> ã€‚</li>
<li>GSAP ä¼š<strong>æŒ‰é¡ºåºä¾æ¬¡æ’­æ”¾</strong>è¿™äº›å…³é”®å¸§ã€‚</li>
<li>æ¯ä¸€å¸§çš„å±æ€§æ˜¯ä»<strong>ä¸Šä¸€å¸§çš„ç»“æŸçŠ¶æ€</strong>è¿‡æ¸¡åˆ°å½“å‰å¸§çš„ç›®æ ‡å€¼ã€‚</li>
<li>æ¯å¸§å¯ä»¥æœ‰è‡ªå·±çš„Â <code>duration</code>ã€<code>ease</code>ï¼ˆå¦‚æœæœªæŒ‡å®šï¼Œåˆ™ç»§æ‰¿å¤–å±‚çš„Â <code>ease</code>ï¼‰ã€‚</li>
</ul>
<h5 data-id="heading-18">åŠ¨ç”»æµç¨‹åˆ†è§£ï¼š</h5>






























<table><thead><tr><th>é˜¶æ®µ</th><th>èµ·å§‹çŠ¶æ€ â†’ ç›®æ ‡çŠ¶æ€</th><th>æ•ˆæœ</th></tr></thead><tbody><tr><td>ç¬¬1å¸§</td><td>å½“å‰çŠ¶æ€ â†’ <code>{x: -160, rotation: -15}</code></td><td>å‘å·¦é£ + å·¦è½¬</td></tr><tr><td>ç¬¬2å¸§</td><td>ä¸Šä¸€å¸§ç»“æŸ â†’ <code>{x: 0, scale: 1.2}</code></td><td>å›åˆ°ä¸­å¿ƒ + æ”¾å¤§</td></tr><tr><td>ç¬¬3å¸§</td><td>ä¸Šä¸€å¸§ç»“æŸ â†’ <code>{x: 160, rotation: 20}</code></td><td>å‘å³é£ + å³è½¬</td></tr><tr><td>ç¬¬4å¸§</td><td>ä¸Šä¸€å¸§ç»“æŸ â†’ <code>{x: 0, scale: 1, rotation: 0}</code></td><td>å›åˆ°åŸä½ + è¿˜åŸå¤§å°å’Œè§’åº¦</td></tr></tbody></table>
<h4 data-id="heading-19">ğŸ”§Â <code>keyframes</code>Â çš„é«˜çº§ç”¨æ³•</h4>
<h5 data-id="heading-20">1.Â <strong>æ¯å¸§å¯å•ç‹¬è®¾ç½®ç¼“åŠ¨ï¼ˆeaseï¼‰</strong></h5>
<p>js</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">keyframes:</span> [
  { <span class="hljs-attr">x:</span> <span class="hljs-number">100</span>, <span class="hljs-attr">duration:</span> <span class="hljs-number">0.3</span>, <span class="hljs-attr">ease:</span> <span class="hljs-string">"back.out"</span> },
  { <span class="hljs-attr">x:</span> <span class="hljs-number">0</span>, <span class="hljs-attr">duration:</span> <span class="hljs-number">0.3</span>, <span class="hljs-attr">ease:</span> <span class="hljs-string">"elastic.out"</span> }
]
</code></pre>
<h5 data-id="heading-21">2.Â <strong>æ”¯æŒå›è°ƒå‡½æ•°</strong></h5>
<p>js</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">keyframes:</span> [
  { <span class="hljs-attr">x:</span> <span class="hljs-number">100</span>, <span class="hljs-attr">duration:</span> <span class="hljs-number">0.5</span> },
  { 
    <span class="hljs-attr">x:</span> <span class="hljs-number">0</span>, 
    <span class="hljs-attr">duration:</span> <span class="hljs-number">0.5</span>,
    <span class="hljs-attr">onComplete:</span> <span class="hljs-string">()</span> <span class="hljs-string">=&gt;</span> <span class="hljs-string">console.log("ç¬¬äºŒå¸§å®Œæˆ")</span> 
  }
]
</code></pre>
<h5 data-id="heading-22">3.Â <strong>ä¸ ScrollTriggerã€Timeline ç»“åˆ</strong></h5>
<p>js</p>
<pre><code class="hljs language-php" lang="php">gsap.<span class="hljs-title function_ invoke__">timeline</span>({
  <span class="hljs-attr">scrollTrigger</span>: { <span class="hljs-attr">trigger</span>: <span class="hljs-string">".section"</span>, <span class="hljs-attr">start</span>: <span class="hljs-string">"top center"</span> }
}).<span class="hljs-title function_ invoke__">to</span>(shape, {
  <span class="hljs-attr">keyframes</span>: [ <span class="hljs-comment">/* ... */</span> ]
});
</code></pre>
<hr/>
<h4 data-id="heading-23">âš ï¸ æ³¨æ„äº‹é¡¹</h4>
<ul>
<li><code>keyframes</code>Â æ˜¯Â <strong>GSAP 3.0+</strong> Â å¼•å…¥çš„åŠŸèƒ½ï¼Œåœ¨æ—§ç‰ˆæœ¬ä¸­ä¸å¯ç”¨ã€‚</li>
<li>å¤–å±‚çš„Â <code>ease</code>ï¼ˆå¦‚ä½ çš„Â <code>"power1.inOut"</code>ï¼‰ä¼šä½œä¸º<strong>é»˜è®¤ç¼“åŠ¨</strong>åº”ç”¨åˆ°æ¯ä¸€å¸§ï¼ˆé™¤éæŸå¸§è‡ªå·±æŒ‡å®šäº†Â <code>ease</code>ï¼‰ã€‚</li>
<li>å¦‚æœæŸå¸§æ²¡æœ‰æŒ‡å®šÂ <code>duration</code>ï¼Œå®ƒä¼šç»§æ‰¿å‰ä¸€å¸§çš„Â <code>duration</code>Â æˆ–ä½¿ç”¨é»˜è®¤å€¼ï¼ˆé€šå¸¸ä¸º 0.3 ç§’ï¼‰ã€‚</li>
</ul>
<hr/>
<h4 data-id="heading-24">âœ… ä¸ºä»€ä¹ˆç”¨Â <code>keyframes</code>Â è€Œä¸ç”¨å¤šä¸ªÂ <code>gsap.to()</code>ï¼Ÿ</h4>
<p>è¡¨æ ¼</p>

















<table><thead><tr><th>æ–¹å¼</th><th>ä¼˜ç‚¹</th></tr></thead><tbody><tr><td><code>keyframes</code></td><td>ä»£ç æ›´ç´§å‡‘ï¼Œè‡ªåŠ¨ä¸²è”ï¼Œæ˜“äºç®¡ç†å•ä¸ªåŠ¨ç”»åºåˆ—</td></tr><tr><td>å¤šä¸ªÂ <code>gsap.to()</code></td><td>æ›´çµæ´»ï¼ˆå¯æ’å…¥å»¶è¿Ÿã€å›è°ƒç­‰ï¼‰ï¼Œé€‚åˆå¤æ‚ç¼–æ’ï¼ˆæ¨èç”¨Â <code>gsap.timeline()</code>ï¼‰</td></tr></tbody></table>
<blockquote>
<p>å¯¹äºç®€å•çš„çº¿æ€§å¤šæ­¥åŠ¨ç”»ï¼Œ<code>keyframes</code>Â éå¸¸ç®€æ´ï¼›å¯¹äºå¤æ‚æ—¶é—´è½´ï¼Œå»ºè®®ç”¨Â <code>gsap.timeline()</code>ã€‚</p>
</blockquote>
<hr/>
<blockquote>
<p><strong><code>keyframes</code>Â = æŠŠå¤šä¸ªåŠ¨ç”»æ­¥éª¤å†™åœ¨ä¸€ä¸ªæ•°ç»„é‡Œï¼ŒGSAP è‡ªåŠ¨æŒ‰é¡ºåºæ’­æ”¾å®ƒä»¬ã€‚</strong></p>
</blockquote>
<p>ä½ çš„ä»£ç åˆ›å»ºäº†ä¸€ä¸ªâ€œå·¦å³æ™ƒåŠ¨ + ç¼©æ”¾â€çš„å¼¹æ€§åŠ¨ç”»ï¼Œå¸¸ç”¨äºï¼š</p>
<ul>
<li>æŒ‰é’®ç‚¹å‡»åé¦ˆ</li>
<li>é”™è¯¯æç¤ºæŠ–åŠ¨</li>
<li>å¡ç‰‡ç¿»è½¬/å¼¹è·³æ•ˆæœ</li>
</ul>
<p>é…åˆÂ <code>paused: true</code>ï¼Œä½ å¯ä»¥åœ¨éœ€è¦æ—¶ï¼ˆå¦‚ç‚¹å‡»ã€æ»šåŠ¨ï¼‰é€šè¿‡Â <code>tween.play()</code>Â è§¦å‘åŠ¨ç”»ï¼Œéå¸¸é«˜æ•ˆï¼</p>
<h2 data-id="heading-25">stagger æ˜¯ä»€ä¹ˆæ„æ€</h2>
<p>åœ¨ GSAPï¼ˆGreenSock Animation Platformï¼‰ä¸­ï¼Œ<strong><code>stagger</code></strong>Â æ˜¯ä¸€ä¸ªéå¸¸å¼ºå¤§çš„åŠŸèƒ½ï¼Œç”¨äº<strong>å¯¹å¤šä¸ªç›®æ ‡å…ƒç´ ï¼ˆå¦‚æ•°ç»„ã€NodeListï¼‰ä¾æ¬¡é”™å¼€æ’­æ”¾åŠ¨ç”»</strong>ï¼Œä»è€Œåˆ›å»ºå‡ºâ€œæ³¢æµªå¼â€ã€â€œé€ä¸ªå…¥åœºâ€ç­‰æµç•…çš„åºåˆ—åŠ¨ç”»æ•ˆæœã€‚</p>
<pre><code class="hljs language-js" lang="js"> <span class="hljs-keyword">const</span> tween = gsap.<span class="hljs-title function_">from</span>(cells, {
        <span class="hljs-attr">opacity</span>: <span class="hljs-number">0</span>,
        <span class="hljs-attr">scale</span>: <span class="hljs-number">0.4</span>,
        <span class="hljs-attr">y</span>: <span class="hljs-number">20</span>,
        <span class="hljs-attr">duration</span>: <span class="hljs-number">0.6</span>,
        <span class="hljs-attr">ease</span>: <span class="hljs-string">"power2.out"</span>,
       <span class="hljs-attr">stagger</span>: { 
           <span class="hljs-attr">each</span>: <span class="hljs-number">0.04</span>, <span class="hljs-comment">// æ¯ä¸ªå…ƒç´ ä¹‹é—´çš„å»¶è¿Ÿæ—¶é—´ï¼ˆç§’ï¼‰</span>
           <span class="hljs-attr">from</span>: <span class="hljs-string">"center"</span> <span class="hljs-comment">// åŠ¨ç”»ä»ä¸­é—´çš„å…ƒç´ å¼€å§‹ï¼Œå‘ä¸¤è¾¹æ‰©æ•£</span>
       },
        <span class="hljs-attr">paused</span>: <span class="hljs-literal">true</span>
      });
</code></pre>
<p>è¿™æ®µä»£ç çš„ä½œç”¨æ˜¯ï¼š</p>
<blockquote>
<p><strong>å¯¹Â <code>cells</code>ï¼ˆä¸€ç»„ DOM å…ƒç´ ï¼‰æ‰§è¡Œâ€œä»é€æ˜ã€ç¼©å°ã€ä¸‹ç§»â€çŠ¶æ€æ·¡å…¥æ”¾å¤§çš„åŠ¨ç”»ï¼Œä½†ä¸æ˜¯åŒæ—¶æ’­æ”¾ï¼Œè€Œæ˜¯ï¼š</strong></p>
<ul>
<li><strong>ä»ä¸­é—´çš„å…ƒç´ å¼€å§‹</strong></li>
<li><strong>ç›¸é‚»å…ƒç´ ä¹‹é—´é—´éš” 0.04 ç§’ä¾æ¬¡æ’­æ”¾</strong></li>
<li>æ•´ä½“å½¢æˆä¸€ç§â€œç”±ä¸­å¿ƒå‘å¤–æ‰©æ•£â€çš„å…¥åœºæ•ˆæœ âœ¨</li>
</ul>
</blockquote>
<hr/>
<h4 data-id="heading-26">âœ…Â <code>stagger</code>Â çš„æ ¸å¿ƒæ¦‚å¿µ</h4>
<p>å½“ä½ å¯¹<strong>å¤šä¸ªå…ƒç´ </strong>ï¼ˆå¦‚Â <code>document.querySelectorAll('.cell')</code>ï¼‰ä½¿ç”¨ GSAP åŠ¨ç”»æ—¶ï¼š</p>
<ul>
<li><strong>ä¸åŠ Â <code>stagger</code></strong>Â â†’ æ‰€æœ‰å…ƒç´ <strong>åŒæ—¶</strong>åŠ¨ç”»ã€‚</li>
<li><strong>åŠ ä¸ŠÂ <code>stagger</code></strong>Â â†’ å…ƒç´ <strong>ä¾æ¬¡é”™å¼€</strong>åŠ¨ç”»ï¼Œäº§ç”ŸèŠ‚å¥æ„Ÿã€‚</li>
</ul>
<hr/>
<h4 data-id="heading-27">ğŸ”§Â <code>stagger</code>Â çš„å¸¸è§å†™æ³•</h4>
<h5 data-id="heading-28">1.Â <strong>æœ€ç®€å½¢å¼ï¼šåªæŒ‡å®šé—´éš”æ—¶é—´</strong></h5>
<p>js</p>
<pre><code class="hljs language-css" lang="css">stagger: <span class="hljs-number">0.1</span>  // ç­‰ä»·äº { each: <span class="hljs-number">0.1</span> }
</code></pre>
<p>â†’ ä»ç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹ï¼Œæ¯ä¸ªé—´éš” 0.1 ç§’ã€‚</p>
<h5 data-id="heading-29">2.Â <strong>å¯¹è±¡å½¢å¼ï¼ˆä½ ç”¨çš„æ–¹å¼ï¼‰ï¼šæ›´ç²¾ç»†æ§åˆ¶</strong></h5>
<p>js</p>
<pre><code class="hljs language-perl" lang="perl">stagger: {
  <span class="hljs-keyword">each</span>: <span class="hljs-number">0</span>.<span class="hljs-number">04</span>,     <span class="hljs-regexp">//</span> æ¯ä¸ªå…ƒç´ é—´éš” <span class="hljs-number">0</span>.<span class="hljs-number">04</span> ç§’
  from: <span class="hljs-string">"center"</span>, <span class="hljs-regexp">//</span> èµ·å§‹ä½ç½®ï¼šå¯é€‰ <span class="hljs-string">"start"</span>ï¼ˆé»˜è®¤ï¼‰ã€<span class="hljs-string">"center"</span>ã€<span class="hljs-string">"end"</span> æˆ–å…·ä½“ç´¢å¼•ï¼ˆå¦‚ <span class="hljs-number">3</span>ï¼‰
  grid: <span class="hljs-string">"auto"</span>,   <span class="hljs-regexp">//</span> å¦‚æœæ˜¯ç½‘æ ¼å¸ƒå±€ï¼Œå¯è®¾ä¸º [rows, cols] æ¥æŒ‰è¡Œ/åˆ—äº¤é”™
  axis: <span class="hljs-string">"x"</span>       // åœ¨ç½‘æ ¼ä¸­é™åˆ¶äº¤é”™æ–¹å‘ï¼ˆ<span class="hljs-string">"x"</span>ã€<span class="hljs-string">"y"</span> æˆ– <span class="hljs-string">"xy"</span>ï¼‰
}
</code></pre>
<hr/>
<h4 data-id="heading-30">ğŸ¯Â <code>from</code>Â çš„å–å€¼è¯´æ˜</h4>

























<table><thead><tr><th>å€¼</th><th>æ•ˆæœ</th></tr></thead><tbody><tr><td><code>"start"</code>ï¼ˆé»˜è®¤ï¼‰</td><td>ä»ç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹ï¼Œä¾æ¬¡åˆ°æœ€åä¸€ä¸ª</td></tr><tr><td><code>"center"</code></td><td>ä»ä¸­é—´å…ƒç´ å¼€å§‹ï¼Œå‘å·¦å³ï¼ˆæˆ–ä¸Šä¸‹ï¼‰åŒæ—¶æ‰©æ•£</td></tr><tr><td><code>"end"</code></td><td>ä»æœ€åä¸€ä¸ªå…ƒç´ å¼€å§‹ï¼Œå€’åºæ’­æ”¾</td></tr><tr><td><code>æ•°å­—ï¼ˆå¦‚ 2ï¼‰</code></td><td>ä»ç´¢å¼•ä¸º 2 çš„å…ƒç´ å¼€å§‹</td></tr></tbody></table>
<p>âœ… Â <code>from: "center"</code>Â éå¸¸é€‚åˆ<strong>å±…ä¸­å¯¹é½çš„åˆ—è¡¨ã€å›¾æ ‡é˜µåˆ—ã€å¡ç‰‡ç½‘æ ¼</strong>ç­‰åœºæ™¯ï¼Œè§†è§‰ä¸Šæ›´å¹³è¡¡ã€‚</p>
<hr/>
<h4 data-id="heading-31">ğŸ’¡ å®é™…æ•ˆæœç¤ºä¾‹</h4>
<p>å‡è®¾Â <code>cells</code>Â æœ‰ 5 ä¸ªå…ƒç´ ï¼š<code>[A, B, C, D, E]</code></p>
<ul>
<li><code>from: "center"</code>Â â†’ æ’­æ”¾é¡ºåºï¼š<strong>C â†’ B &amp; D â†’ A &amp; E</strong></li>
<li>æ¯ä¸ªé—´éš”Â <code>0.04s</code>ï¼Œæ‰€ä»¥æ•´ä¸ªåŠ¨ç”»åœ¨çº¦Â <code>0.04 Ã— 2 = 0.08s</code>Â å†…å®Œæˆæ‰©æ•£ï¼ˆå› ä¸ºä¸¤è¾¹å¹¶è¡Œï¼‰</li>
</ul>
<blockquote>
<p>è¿™æ¯”çº¿æ€§æ’­æ”¾ï¼ˆAâ†’Bâ†’Câ†’Dâ†’Eï¼‰æ›´ç”ŸåŠ¨ï¼</p>
</blockquote>
<hr/>
<h4 data-id="heading-32">âš ï¸ æ³¨æ„äº‹é¡¹</h4>
<ul>
<li><code>stagger</code>Â <strong>åªåœ¨ç›®æ ‡æ˜¯å¤šä¸ªå…ƒç´ æ—¶ç”Ÿæ•ˆ</strong>ã€‚å¦‚æœÂ <code>cells</code>Â åªæœ‰ä¸€ä¸ªå…ƒç´ ï¼Œ<code>stagger</code>Â ä¼šè¢«å¿½ç•¥ã€‚</li>
<li><code>stagger</code>Â çš„å»¶è¿Ÿæ˜¯<strong>å åŠ åœ¨Â <code>duration</code>Â ä¹‹ä¸Šçš„</strong>ï¼Œä¸å½±å“å•ä¸ªåŠ¨ç”»çš„æ—¶é•¿ã€‚</li>
<li>å¯ä¸Â <code>paused: true</code>Â å®Œç¾é…åˆï¼Œå®ç°â€œæŒ‰éœ€è§¦å‘åŠ¨ç”»åºåˆ—â€ã€‚</li>
</ul>
<hr/>













<table><thead><tr><th>é…ç½®</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td><code>stagger: { each: 0.04, from: "center" }</code></td><td><strong>ä»ä¸­é—´å…ƒç´ å¼€å§‹ï¼Œä»¥ 0.04 ç§’çš„é—´éš”å‘ä¸¤ä¾§ä¾æ¬¡æ’­æ”¾åŠ¨ç”»</strong></td></tr></tbody></table>
<p>è¿™æ˜¯ GSAP å®ç°<strong>é«˜çº§äº¤äº’åŠ¨æ•ˆ</strong>ï¼ˆå¦‚åˆ—è¡¨åŠ è½½ã€èœå•å±•å¼€ã€æ•°æ®å¯è§†åŒ–å…¥åœºï¼‰çš„æ ¸å¿ƒæŠ€å·§ä¹‹ä¸€ã€‚ä½ çš„ä»£ç å°±æ˜¯ä¸€ä¸ªå…¸å‹çš„â€œä¼˜é›…æ‰¹é‡å…¥åœºâ€åŠ¨ç”»ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Android VSync ç¬”è®°]]></title>    <link>https://juejin.cn/post/7605810996125007906</link>    <guid>https://juejin.cn/post/7605810996125007906</guid>    <pubDate>2026-02-13T02:36:21.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605810996125007906" data-draft-id="7605542907118862388" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Android VSync ç¬”è®°"/> <meta itemprop="keywords" content="Android"/> <meta itemprop="datePublished" content="2026-02-13T02:36:21.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¿ƒæºxinyuan"/> <meta itemprop="url" content="https://juejin.cn/user/4283353029151694"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Android VSync ç¬”è®°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4283353029151694/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¿ƒæºxinyuan
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-13T02:36:21.000Z" title="Fri Feb 13 2026 02:36:21 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å…³äºVSyncçš„äº§ç”Ÿï¼Œä½ éœ€è¦å½»åº•æ›´æ–°ä¸€ä¸ªè®¤çŸ¥ï¼š<strong>Androidç³»ç»Ÿé‡Œä½ çœ‹åˆ°çš„é‚£äº›æ•´é½çš„VSYNC-APPå’ŒVSYNC-SFä¿¡å·ï¼Œ99%çš„æ—¶é—´é‡Œå¹¶ä¸æ˜¯ç¡¬ä»¶ç›´æ¥äº§ç”Ÿçš„ï¼Œè€Œæ˜¯SurfaceFlingerç”¨æ•°å­¦å…¬å¼â€œç®—â€å‡ºæ¥çš„ã€‚</strong></p>
<p>ä¸ºäº†æŠŠè¿™ä¸ªâ€œç®—å‡ºæ¥â€çš„è¿‡ç¨‹è®²é€ï¼Œæˆ‘ä»¬ä»<strong>ç‰©ç†æºå¤´</strong>ã€<strong>è½¯ä»¶è¡ç”Ÿ</strong>ã€<strong>æŒ‰éœ€å¼€å…³</strong>ä¸‰ä¸ªå±‚é¢é€æ­¥æ‹†è§£ã€‚</p>
<hr/>
<h2 data-id="heading-0">ä¸€ã€ç‰©ç†æºå¤´ï¼šç¡¬ä»¶VSyncçš„â€œåŸå§‹è„‰æâ€</h2>
<p>VSyncè¿™ä¸ªæ¦‚å¿µçš„è¯ç”Ÿæ¯”Androidæ—©å‡ åå¹´ï¼Œå®ƒæºè‡ªCRTæ˜¾ç¤ºå™¨ç”µå­æªçš„ç‰©ç†åŠ¨ä½œã€‚</p>
<p><strong>1.1 å®ƒæœ€åˆæ˜¯æ˜¾ç¤ºå™¨â€œå–˜å£æ°”â€çš„ä¿¡å·</strong></p>
<ul>
<li>ç”µå­æªä»å·¦åˆ°å³ã€ä»ä¸Šåˆ°ä¸‹æ‰«æå±å¹•ï¼Œæ‰«å®Œä¸€å¸§åå¿…é¡»<strong>å…³é—­ç”µå­æŸã€ä»å³ä¸‹è§’ç¬é—´ç§»å›å·¦ä¸Šè§’</strong>ï¼ˆå‚ç›´å›æ‰«ï¼‰ã€‚</li>
<li>è¿™æ®µçŸ­æš‚çš„â€œç©ºçª—æœŸâ€ä¼šè§¦å‘ä¸€ä¸ªè„‰å†²â€”â€”<strong>å‚ç›´åŒæ­¥ä¿¡å·ï¼ˆVSyncï¼‰</strong>ï¼Œå‘Šè¯‰æ˜¾å¡ï¼šâ€œä¸Šä¸€å¸§å·²æ˜¾ç¤ºå®Œæ¯•ï¼Œå¯ä»¥é€ä¸‹ä¸€å¸§äº†â€ã€‚</li>
<li>ç°ä»£LCDè™½æ— ç”µå­æªï¼Œä½†ä¸ºäº†å…¼å®¹ï¼Œ<strong>æ˜¾ç¤ºæ§åˆ¶å™¨ï¼ˆDisplay Controllerï¼‰ä¼šæ¨¡æ‹Ÿè¿™ä¸ªæ—¶åº</strong>ï¼Œé€šè¿‡ç¡¬ä»¶å®šæ—¶å™¨äº§ç”Ÿå›ºå®šé¢‘ç‡çš„è„‰å†²ã€‚è¿™ä¸ªé¢‘ç‡å°±æ˜¯å±å¹•åˆ·æ–°ç‡ï¼ˆ60Hz/90Hz/120Hzç­‰ï¼‰ã€‚</li>
</ul>
<p><strong>1.2 Androidé‡Œè°åœ¨åˆ¶é€ è¿™ä¸ªåŸå§‹è„‰å†²ï¼Ÿ</strong>
<strong>Hardware Composerï¼ˆHWCï¼‰</strong>ã€‚å®ƒæ˜¯æ˜¾ç¤ºé©±åŠ¨çš„ä¸€éƒ¨åˆ†ï¼Œç›´æ¥ä¸ç¡¬ä»¶å®šæ—¶å™¨äº¤äº’ã€‚æ¯å½“å±å¹•å®Œæˆä¸€æ¬¡åˆ·æ–°ï¼ŒHWCå°±é€šè¿‡å›è°ƒå‘SurfaceFlingerå‘é€ä¸€ä¸ª<strong>HW_VSYNC_0</strong>ä¿¡å·ã€‚</p>
<p><strong>å…³é”®è®¤çŸ¥</strong>ï¼šè¿™ä¸ªç¡¬ä»¶ä¿¡å·æå…¶â€œåŸå§‹â€â€”â€”å®ƒåªæ˜¯ä¸€ä¸²å‡†ç¡®ä½†<strong>æ²¡æœ‰ä»»ä½•ä¸šåŠ¡é€»è¾‘</strong>çš„æ—¶é—´æˆ³ã€‚å®ƒä¸çŸ¥é“è°æ˜¯Appã€è°æ˜¯SurfaceFlingerï¼Œåªä¼šæ¯åˆ†é’Ÿ60æ¬¡ï¼ˆæˆ–æ›´é«˜ï¼‰å¿ å®åœ°å‘å‡ºè„‰å†²ã€‚</p>
<hr/>
<h2 data-id="heading-1">äºŒã€è½¯ä»¶è¡ç”Ÿï¼šDispSyncçš„â€œç¥ç®—å±€â€</h2>
<p>å¦‚æœè®©Appå’ŒSurfaceFlingeræ¯æ¬¡éƒ½ç›´æ¥å“åº”HW_VSYNC_0ï¼Œä¼šæœ‰ä¸¤ä¸ªä¸¥é‡é—®é¢˜ï¼š</p>
<ol>
<li><strong>åŠŸè€—ç¾éš¾</strong>ï¼šå³ä½¿å±å¹•é™æ­¢ä¸åŠ¨ï¼ˆå¦‚çœ‹ç”µå­ä¹¦ï¼‰ï¼ŒAppå’ŒSFä¹Ÿä¼šæ¯16.6msè¢«å”¤é†’ï¼Œç–¯ç‹‚ç©ºè½¬ã€‚</li>
<li><strong>ç›¸ä½æ­»é”</strong>ï¼šAppç»˜åˆ¶ã€SFåˆæˆã€å±å¹•æ˜¾ç¤ºä¸‰è€…<strong>æŒ¤åœ¨åŒä¸€ä¸ªæ—¶é—´ç‚¹å¼€å·¥</strong>ï¼Œæµæ°´çº¿ä¸¥é‡é˜»å¡ï¼ˆæ—§Androidç‰ˆæœ¬çš„ç—›ç‚¹ï¼‰ã€‚</li>
</ol>
<p>äºæ˜¯Android 4.1ï¼ˆProject Butterï¼‰å¼•å…¥äº†<strong>DispSyncæ¨¡å—</strong>â€”â€”ä¸€ä¸ª<strong>åŸºäºæ•°å­¦é¢„æµ‹çš„è½¯ä»¶VSyncç”Ÿæˆå™¨</strong>ã€‚è¿™æ˜¯æ•´ä¸ªæœºåˆ¶æœ€ç²¾å¦™çš„éƒ¨åˆ†ã€‚</p>
<p><strong>2.1 DispSyncçš„å·¥ä½œåŸç†ï¼šé”ç›¸ç¯çš„è½¯ä»¶å®ç°</strong></p>
<p>DispSyncæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ª<strong>æ•°å­—é”ç›¸ç¯ï¼ˆDigital Phase-Locked Loopï¼‰</strong>ã€‚å®ƒä¸ä¾èµ–ç¡¬ä»¶ä¸­æ–­å®æ—¶è§¦å‘ï¼Œè€Œæ˜¯é€šè¿‡é‡‡æ ·ç¡¬ä»¶VSyncçš„å†å²æ—¶é—´ï¼Œ<strong>æ‹Ÿåˆå‡ºä¸€æ¡ç²¾å‡†çš„â€œè™šæ‹Ÿæ—¶é’Ÿçº¿â€</strong>ã€‚</p>
<p><strong>ç¬¬ä¸€æ­¥ï¼šé‡‡æ ·ä¸å»ºæ¨¡</strong></p>
<ul>
<li>SurfaceFlingerä¼šæŒç»­æ¥æ”¶HW_VSYNC_0ä¿¡å·ï¼Œä½†<strong>å¹¶ä¸ç«‹åˆ»åˆ†å‘</strong>ã€‚</li>
<li>DispSyncæ”¶é›†<strong>è‡³å°‘3ä¸ªã€æœ€å¤š32ä¸ª</strong>ç¡¬ä»¶VSyncæ—¶é—´æˆ³ï¼Œé€šè¿‡æœ€å°äºŒä¹˜æ³•æˆ–å‡å€¼æ»¤æ³¢è®¡ç®—å‡º<strong>å¹³å‡å‘¨æœŸï¼ˆAvgPeriodï¼‰<strong>å’Œ</strong>å¹³å‡ç›¸ä½ï¼ˆAvgPhaseï¼‰</strong>ã€‚</li>
<li>æ•°å­¦å…¬å¼ï¼ˆç®€åŒ–ç‰ˆï¼‰ï¼š
<ul>
<li>å°†æ¯ä¸ªæ—¶é—´æˆ³æ˜ å°„åˆ°å•ä½åœ†è§’åº¦ï¼š<code>Î”Phase = 2Ï€ * (timestamp % AvgPeriod) / AvgPeriod</code></li>
<li>è®¡ç®—æ‰€æœ‰é‡‡æ ·ç‚¹çš„å¹³å‡å‘é‡ <code>(AvgX, AvgY)</code></li>
<li><code>SW_VSYNCç›¸ä½ = atan2(AvgY, AvgX)</code></li>
<li>æœ€ç»ˆï¼š<code>SW_VSYNCæ—¶é—´ = AvgPeriod + AvgPhase</code></li>
</ul>
</li>
</ul>
<p><strong>ä¸€æ—¦æ¨¡å‹è¯¯å·®æ”¶æ•›ï¼ˆé€šå¸¸6ä¸ªé‡‡æ ·åï¼‰ï¼ŒDispSyncä¼šç«‹å³</strong>å…³é—­ç¡¬ä»¶VSyncä¸­æ–­**ï¼Œå®Œå…¨é è¿™å¥—æ•°å­¦æ¨¡å‹äº§ç”Ÿåç»­çš„è½¯ä»¶VSyncã€‚è¿™å°±æ˜¯â€œç”¨è®¡ç®—ä»£æ›¿ä¸­æ–­â€çš„æ ¸å¿ƒèŠ‚èƒ½è®¾è®¡ã€‚</p>
<p><strong>2.2 ä¸€æºåŒç”Ÿï¼šVSYNC-APPä¸VSYNC-SF</strong></p>
<p>ç¡¬ä»¶åªæä¾›ä¸€ä¸ªåŸå§‹è„‰å†²ï¼Œä½†ç³»ç»Ÿéœ€è¦ä¸¤ä¸ªä¸åŒç”¨é€”çš„èŠ‚æ‹å™¨ã€‚DispSyncåœ¨ç”Ÿæˆè½¯ä»¶VSyncæ—¶ï¼Œä¼š<strong>ç›´æ¥äº§å‡ºä¸¤æ¡ç›¸ä½åç§»çš„æ—¶é’Ÿæµ</strong>ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">VSYNC-APP</span> = SW_VSYNCåŸºå‡† + phase_appåç§»é‡
<span class="hljs-attr">VSYNC-SF</span>  = SW_VSYNCåŸºå‡† + phase_sfåç§»é‡
</code></pre>
<ul>
<li><strong>phase_app</strong>ï¼šé€šå¸¸ä¸º0ï½2msï¼ˆåº”ç”¨å…ˆå¼€å§‹ç»˜åˆ¶ï¼‰</li>
<li><strong>phase_sf</strong>ï¼šé€šå¸¸ä¸º4ï½6msï¼ˆSFç¨åå¼€å§‹åˆæˆï¼Œåˆšå¥½ç­‰Appç”»å®Œï¼‰</li>
</ul>
<p>è¿™ä¸¤æ¡ä¿¡å·å°±æ˜¯ä½ åœ¨Systraceé‡Œçœ‹åˆ°çš„å½©è‰²VSyncæ¡ã€‚å®ƒä»¬çš„<strong>å‘¨æœŸå®Œå…¨ä¸€è‡´ï¼ˆ16.6msï¼‰</strong>ï¼Œä½†<strong>èµ·å§‹æ—¶é—´é”™å¼€</strong>ï¼Œå½¢æˆæµæ°´çº¿ã€‚</p>
<p><strong>å¯¹æ¯”æ€»ç»“</strong>ï¼ˆçº æ­£å¸¸è§è¯¯åŒºï¼‰ï¼š</p>

































<table><thead><tr><th>ä¿¡å·åç§°</th><th>äº§ç”Ÿè€…</th><th>æ˜¯å¦ç¡¬ä»¶ç›´æ¥å‘å‡º</th><th>ç”¨é€”</th><th>è§¦å‘æ–¹å¼</th></tr></thead><tbody><tr><td><strong>HW_VSYNC_0</strong></td><td>HWC/æ˜¾ç¤ºæ§åˆ¶å™¨</td><td>âœ… æ˜¯</td><td>æ ¡å‡†DispSyncæ¨¡å‹</td><td>ç¡¬ä»¶å®šæ—¶å™¨ï¼Œå›ºå®šé¢‘ç‡</td></tr><tr><td><strong>VSYNC-APP</strong></td><td>DispSyncï¼ˆè½¯ä»¶ï¼‰</td><td>âŒ å¦</td><td>è§¦å‘Choreographerå¼€å§‹ç»˜åˆ¶</td><td>æŒ‰éœ€ + æ¨¡å‹é¢„æµ‹</td></tr><tr><td><strong>VSYNC-SF</strong></td><td>DispSyncï¼ˆè½¯ä»¶ï¼‰</td><td>âŒ å¦</td><td>è§¦å‘SurfaceFlingeråˆæˆ</td><td>æŒ‰éœ€ + æ¨¡å‹é¢„æµ‹</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-2">ä¸‰ã€æŒ‰éœ€è§¦å‘ï¼šæ²¡æœ‰ç»˜åˆ¶ä»»åŠ¡æ—¶ï¼ŒVSyncå»å“ªäº†ï¼Ÿ</h2>
<p>è¿™æ˜¯Android VSyncæœºåˆ¶æœ€å®¹æ˜“è¯¯è§£çš„åœ°æ–¹ï¼š<strong>Systraceé‡ŒVSync-APP/SFä¿¡å·å¹¶éæ¯16.6mséƒ½æœ‰</strong>ã€‚å®ƒä»¬çš„å‡ºç°éµå¾ª**æŒ‰éœ€ç”³è¯·ï¼ˆrequestNextVsyncï¼‰**åŸåˆ™ã€‚</p>
<p><strong>3.1 ä¸ºä»€ä¹ˆå¿…é¡»æŒ‰éœ€ï¼Ÿ</strong>
å‡è®¾ä½ æ‰“å¼€ä¸€ä¸ªé™æ€æ–‡æœ¬é¡µé¢ï¼š</p>
<ul>
<li>å±å¹•å†…å®¹å®Œå…¨æ²¡æœ‰å˜åŒ–ã€‚</li>
<li>å¦‚æœDispSyncä»ç„¶æ¯16.6mså‘Appå‘é€VSYNC-APPï¼ŒAppçš„ä¸»çº¿ç¨‹ä¼š<strong>æŒç»­æ¯å¸§æ‰§è¡ŒdoFrame()</strong>ï¼Œç©ºè½¬æµ‹é‡å¸ƒå±€ç»˜åˆ¶â€”â€”CPUç©ºè€—ã€å‘çƒ­ã€æ‰ç”µã€‚</li>
<li><strong>å®Œå…¨æ²¡å¿…è¦</strong>ã€‚</li>
</ul>
<p><strong>3.2 ç”³è¯·-è§¦å‘æœºåˆ¶</strong></p>
<ul>
<li><strong>Appä¾§</strong>ï¼šåªæœ‰å½“<code>Choreographer.postCallback()</code>è¢«è°ƒç”¨ï¼ˆå¦‚View.invalidate()ã€åŠ¨ç”»å¯åŠ¨ï¼‰ï¼Œæ‰ä¼šé€šè¿‡Binderå‘SFçš„EventThread<strong>è¯·æ±‚ä¸‹ä¸€ä¸ªVSYNC-APP</strong>ã€‚</li>
<li><strong>SFä¾§</strong>ï¼šåªæœ‰å½“BufferQueueä¸­æœ‰æ–°Bufferå…¥é˜Ÿï¼Œæˆ–è€…çª—å£çŠ¶æ€å˜åŒ–ï¼Œæ‰ä¼š<strong>è¯·æ±‚ä¸‹ä¸€ä¸ªVSYNC-SF</strong>ã€‚</li>
<li><strong>DispSyncä¾§</strong>ï¼šåªæœ‰å½“<strong>è‡³å°‘ä¸€ä¸ªå®¢æˆ·ç«¯åœ¨ç­‰å¾…</strong>æ—¶ï¼Œå®ƒæ‰ä¼šåœ¨é¢„æµ‹çš„æ—¶é’Ÿç‚¹ä¸Šå‘å°„è½¯ä»¶VSyncï¼›<strong>å¦‚æœæ— äººç”³è¯·ï¼ŒDispSyncä¿æŒé™é»˜</strong>ï¼Œæ•´ä¸ªå›¾å½¢ç³»ç»Ÿè¿›å…¥ä½åŠŸè€—çŠ¶æ€ã€‚</li>
</ul>
<p>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆSystraceé‡ŒVSyncä¿¡å·<strong>æ—¶ç–æ—¶å¯†</strong>â€”â€”åŠ¨æ€åœºæ™¯ï¼ˆæ»‘åŠ¨ã€åŠ¨ç”»ï¼‰å¯†é›†å‡ºç°ï¼›é™æ€åœºæ™¯å‡ ä¹æ¶ˆå¤±ã€‚</p>
<p><strong>3.3 ç¡¬ä»¶VSyncçš„é‡æ ¡å‡†</strong>
å½“DispSyncé•¿æœŸä¾é è½¯ä»¶é¢„æµ‹ï¼Œå¯èƒ½ä¼šå› æ¸©æ¼‚ã€æ—¶é’Ÿåå·®è€Œäº§ç”Ÿç›¸ä½è¯¯å·®ã€‚å¦‚ä½•ä¿®æ­£ï¼Ÿ</p>
<ul>
<li>SurfaceFlingeråœ¨<code>postComposition()</code>æ—¶ä¼šæ£€æŸ¥<strong>Present Fence</strong>ï¼ˆå¸§å®é™…æ˜¾ç¤ºçš„æ—¶é—´æˆ³ï¼‰ã€‚</li>
<li>å°†è¿™äº›Fenceæ—¶é—´ä¸SW_VSYNCé¢„æµ‹æ—¶é—´å¯¹æ¯”ï¼Œ<strong>è®¡ç®—è¯¯å·®å¹³æ–¹å’Œ</strong>ã€‚</li>
<li>è‹¥è¯¯å·®è¶…è¿‡é˜ˆå€¼ï¼ˆå¦‚1.5msï¼‰ï¼ŒDispSyncä¼š<strong>ä¸´æ—¶é‡æ–°ä½¿èƒ½ç¡¬ä»¶VSync</strong>ï¼Œé‡‡é›†3ï½6ä¸ªæ–°æ ·æœ¬é‡æ–°å»ºæ¨¡ï¼Œç„¶åå†æ¬¡å…³é—­ç¡¬ä»¶VSyncã€‚</li>
</ul>
<p><strong>è¿™æ˜¯ä¸€å¥—å®Œæ•´çš„é—­ç¯è‡ªé€‚åº”ç³»ç»Ÿï¼šç¡¬ä»¶æä¾›åŸºå‡†ï¼Œè½¯ä»¶è´Ÿè´£åˆ†å‘ï¼Œè¯¯å·®è§¦å‘æ ¡å‡†ã€‚</strong></p>
<hr/>
<h2 data-id="heading-3">å››ã€å…¨æ™¯æµç¨‹å›¾ï¼ˆå»ºè®®æ”¶è—ï¼‰</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8084312655994ab488ebba90269caeea~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b-D5rqQeGlueXVhbg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771554981&amp;x-signature=BcMZxv%2BFCG0cUiPpuvlHXgW%2BQMY%3D" alt="image.png" loading="lazy"/></p>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart TD
    A[æ˜¾ç¤ºæ§åˆ¶å™¨ç¡¬ä»¶å®šæ—¶å™¨] --&gt;|å›ºå®šé¢‘ç‡è„‰å†²| B[HWCäº§ç”ŸHW_VSYNC_0]
    B --&gt; C{SurfaceFlinger DispSync}
    
    C --&gt;|é‡‡æ ·è‡³å°‘3ä¸ªæ—¶é—´æˆ³| D[è®¡ç®—å¹³å‡å‘¨æœŸä¸ç›¸ä½]
    D --&gt;|æ¨¡å‹æ”¶æ•›| E[å…³é—­ç¡¬ä»¶VSyncä¸­æ–­]
    E --&gt; F[è½¯ä»¶é¢„æµ‹ç”ŸæˆSW_VSYNCåŸºå‡†æ—¶é’Ÿ]
    
    F --&gt;|+ phase_appåç§»| G[VSYNC-APP]
    F --&gt;|+ phase_sfåç§»| H[VSYNC-SF]
    
    G --&gt;|æŒ‰éœ€ï¼šAppè°ƒç”¨requestNextVsync| I[è§¦å‘Choreographerç»˜åˆ¶]
    H --&gt;|æŒ‰éœ€ï¼šSFæœ‰Bufferå¾…åˆæˆ| J[è§¦å‘SurfaceFlingeråˆæˆ]
    
    I --&gt; K[GPUæ¸²æŸ“å®Œæˆ]
    K --&gt; L[Bufferå…¥é˜Ÿ]
    L --&gt;|è§¦å‘SFç”³è¯·ä¸‹ä¸€å¸§VSYNC-SF| J
    
    J --&gt; M[åˆæˆé€æ˜¾]
    M --&gt;|æ£€æŸ¥Present Fenceè¯¯å·®| N{è¯¯å·®è¶…é˜ˆå€¼ï¼Ÿ}
    N --&gt;|æ˜¯| O[ä¸´æ—¶å¼€å¯ç¡¬ä»¶VSync]
    O --&gt;|é‡æ–°é‡‡æ ·| C
    N --&gt;|å¦| P[ä¿æŒè½¯ä»¶é¢„æµ‹æ¨¡å¼]
</code></pre>
<h2 data-id="heading-4">äº”ã€å›ç­”ä½ æœ€åˆçš„é—®é¢˜ï¼šâ€œVSyncæ˜¯å¦‚ä½•äº§ç”Ÿçš„ï¼Ÿâ€</h2>
<p><strong>åˆ†ä¸‰ä¸ªå±‚æ¬¡å›ç­”ï¼š</strong></p>
<ol>
<li><strong>ç‰©ç†å±‚</strong>ï¼šæ˜¾ç¤ºæ§åˆ¶å™¨ç¡¬ä»¶å®šæ—¶å™¨æ¯16.6msäº§ç”Ÿä¸€ä¸ªè„‰å†²ï¼ŒHWCæ•è·åä½œä¸ºHW_VSYNC_0ä¸ŠæŠ¥ã€‚</li>
<li><strong>è½¯ä»¶å±‚</strong>ï¼šSurfaceFlingerçš„DispSyncæ¨¡å—å°†ç¡¬ä»¶ä¿¡å·ä½œä¸ºâ€œæ ¡å‡†æ ·æœ¬â€ï¼Œé€šè¿‡é”ç›¸ç¯ç®—æ³•<strong>æ‹Ÿåˆå‡ºä¸€æ¡æŒç»­è¿è¡Œçš„è™šæ‹Ÿæ—¶é’Ÿçº¿</strong>ï¼Œå¹¶åœ¨è¿™æ ¹æ—¶é’Ÿçº¿ä¸Š<strong>åŒæ—¶å¼€å‡ºä¸¤æ¡ç›¸ä½é”™å¼€çš„ä¿¡å·é€šé“</strong>ï¼ˆVSYNC-APP/VSYNC-SFï¼‰ã€‚</li>
<li><strong>ç­–ç•¥å±‚</strong>ï¼šè¿™ä¸¤æ¡è½¯ä»¶ä¿¡å·<strong>å¹¶éå‘¨æœŸæ€§è‡ªåŠ¨å‘å°„</strong>ï¼Œè€Œæ˜¯ä¸¥æ ¼éµå¾ª<strong>æŒ‰éœ€ç”³è¯·</strong>æœºåˆ¶â€”â€”åªæœ‰Appæˆ–SFæ˜ç¡®â€œæˆ‘éœ€è¦ä¸‹ä¸€å¸§â€ï¼ŒDispSyncæ‰åœ¨é¢„æµ‹æ—¶é—´ç‚¹å‘å°„ä¿¡å·ã€‚</li>
</ol>
<p><strong>æ‰€ä»¥ï¼ŒVSyncçš„æœ€ç»ˆå½¢æ€â€”â€”ä½ åœ¨Systraceé‡Œçœ‹åˆ°çš„é‚£äº›å½©è‰²èŠ‚æ‹â€”â€”æ˜¯â€œç¡¬ä»¶å®šæ—¶æ ¡å‡† + è½¯ä»¶é¢„æµ‹ç”Ÿæˆ + æŒ‰éœ€è§¦å‘â€ä¸‰è€…ç»“åˆçš„äº§ç‰©ã€‚</strong> å®ƒä¸æ˜¯çº¯ç²¹çš„ç¡¬ä»¶ä¸­æ–­ï¼Œä¹Ÿä¸æ˜¯çº¯ç²¹çš„æ“ä½œç³»ç»Ÿæ—¶é’Ÿï¼Œè€Œæ˜¯Androidä¸ºç§»åŠ¨åœºæ™¯å®šåˆ¶çš„<strong>è‡ªé€‚åº”ã€ä½åŠŸè€—åŒæ­¥å¼•æ“</strong>ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æˆ‘ä¸€ä¸ªåç«¯,ç”¨AIåšäº†ä¸ªå¯¼èˆªé¡µ,å‘ç°å¼€å‘æ¨¡å¼çœŸçš„å˜äº†]]></title>    <link>https://juejin.cn/post/7605817795628482610</link>    <guid>https://juejin.cn/post/7605817795628482610</guid>    <pubDate>2026-02-13T02:36:13.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605817795628482610" data-draft-id="7605848213603778606" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æˆ‘ä¸€ä¸ªåç«¯,ç”¨AIåšäº†ä¸ªå¯¼èˆªé¡µ,å‘ç°å¼€å‘æ¨¡å¼çœŸçš„å˜äº†"/> <meta itemprop="keywords" content="AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2026-02-13T02:36:13.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="HUHA"/> <meta itemprop="url" content="https://juejin.cn/user/875627647347278"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æˆ‘ä¸€ä¸ªåç«¯,ç”¨AIåšäº†ä¸ªå¯¼èˆªé¡µ,å‘ç°å¼€å‘æ¨¡å¼çœŸçš„å˜äº†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/875627647347278/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    HUHA
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-13T02:36:13.000Z" title="Fri Feb 13 2026 02:36:13 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{line-height:1.75;font-family:-apple-system-font,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei UI,Microsoft YaHei,Arial,sans-serif;letter-spacing:2px;background-image:linear-gradient(90deg,rgba(50,0,0,.05) 3%,transparent 0),linear-gradient(1turn,rgba(50,0,0,.05) 3%,transparent 0);background-size:20px 20px;background-position:50%;word-break:break-word;font-weight:400;font-size:15px;overflow-x:hidden;color:#333}.markdown-body h1{font-size:23px;margin-bottom:5px;font-weight:700;padding-left:10px;border-left:5px solid #773098}.markdown-body h2{font-size:19px;font-weight:700;padding-left:10px;border-left:5px solid #916dd5}.markdown-body h3{font-size:17px;font-weight:700;padding-left:10px;border-left:5px solid #d89cf6}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{font-size:14px;margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{display:block;max-width:100%;margin:1em 0;border-radius:6px;box-shadow:2px 4px 7px #999;user-select:none}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{padding:.2em .5em;font-weight:700;font-family:-apple-system-font,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei UI,Microsoft YaHei,Arial,sans-serif;font-size:1em;color:#916dd5;word-break:break-word;overflow-x:auto;background-color:none;border-radius:2px}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;font-family:-apple-system-font,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei UI,Microsoft YaHei,Arial,sans-serif;font-weight:400;font-size:.9em;padding:16px 12px;margin:0;color:#333;word-break:normal;overflow-x:auto;background:#f8f8f8;scroll-behavior:smooth}.markdown-body a{text-decoration:none;color:#916dd5;font-weight:700;border-bottom:1px solid #916dd5}.markdown-body a:active,.markdown-body a:hover{color:#773098}.markdown-body table{display:inline-block!important;font-size:14px;width:auto;max-width:100%;overflow:auto;border:1px solid #916dd5;border-collapse:collapse}.markdown-body thead{background-color:#916dd5;color:#fff;text-align:left}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px;border:1px solid #916dd5}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #d89cf6;background-color:#f4eeff}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0;line-height:26px}.markdown-body ol,.markdown-body ul{padding-left:28px;list-style-type:circle}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body b,.markdown-body strong{color:#916dd5;font-weight:700}.markdown-body b:before,.markdown-body strong:before{content:"ã€Œ"}.markdown-body b:after,.markdown-body strong:after{content:"ã€"}.markdown-body em,.markdown-body i{color:#916dd5}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="github-gist">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#fff;color:#333}.hljs-comment,.hljs-meta{color:#969896}.hljs-emphasis,.hljs-quote,.hljs-strong,.hljs-template-variable,.hljs-variable{color:#df5000}.hljs-keyword,.hljs-selector-tag,.hljs-type{color:#d73a49}.hljs-attribute,.hljs-bullet,.hljs-literal,.hljs-symbol{color:#0086b3}.hljs-name,.hljs-section{color:#63a35c}.hljs-tag{color:#333}.hljs-attr,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-id,.hljs-selector-pseudo,.hljs-title{color:#6f42c1}.hljs-addition{color:#55a532;background-color:#eaffea}.hljs-deletion{color:#bd2c00;background-color:#ffecec}.hljs-link{text-decoration:underline}.hljs-number{color:#005cc5}.hljs-string{color:#032f62}</style><p>è¯´èµ·æ¥,æ˜¥èŠ‚å‰å‡ å¤©,æˆ‘çªç„¶æƒ³åšä¸ªè‡ªå·±çš„å¯¼èˆªé¡µã€‚</p>
<p>ä¸ºä»€ä¹ˆ?å› ä¸ºæµè§ˆå™¨ä¹¦ç­¾å¤ªä¹±äº†ã€‚å¸¸ç”¨çš„å¼€å‘å·¥å…·ã€è®¾è®¡èµ„æºã€AIå·¥å…·æ•£å¾—åˆ°å¤„éƒ½æ˜¯ã€‚æ¯æ¬¡æ‰¾éƒ½è¦åŠå¤©ã€‚æˆ‘æƒ³æœ‰ä¸ªåœ°æ–¹,æŠŠå¸¸ç”¨çš„é“¾æ¥éƒ½é›†ä¸­èµ·æ¥,è¿˜èƒ½æŒ‰ç±»åˆ«æ•´ç†ã€‚</p>
<p>è™½ç„¶æˆ‘å·²ç»åœ¨ç”¨ç°æˆçš„è‡ªå®šä¹‰å¯¼èˆªé¡µäº§å“äº†ï¼Œä½†æ˜¯æˆ‘æ²¡æ³•ç»™ä»–ä»¬æéœ€æ±‚ï¼Œä»–ä»¬ä¹Ÿä¸å¯èƒ½ä¼šå¬ï¼Œæœ‰äº›åŠŸèƒ½æˆ‘æƒ³æ”¹ï¼Œæ ¹æœ¬ä¸å¯èƒ½ï¼</p>
<p>æˆ‘æƒ³æ‹¥æœ‰ä¸€ä¸ªç¬¦åˆè‡ªå·±å®¡ç¾çš„å¯¼èˆªé¡µï¼Œäºæ˜¯å®ƒæ¥äº†ï¼š</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdh.huhage.fun%2F" target="_blank" title="https://dh.huhage.fun/" ref="nofollow noopener noreferrer">dh.huhage.fun/</a></p>
<p>ä½œä¸ºåç«¯å¼€å‘,è¿™ä¸ªéœ€æ±‚æŒºç®€å•çš„ã€‚ä½†é—®é¢˜æ¥äº†,æˆ‘ä¸ä¼šå†™å‰ç«¯ã€‚</p>
<p>ä¹‹å‰ä¹Ÿè¯•è¿‡å­¦Reactã€Vue,ä½†æ¯æ¬¡éƒ½åšæŒä¸ä¸‹æ¥ã€‚ç»„ä»¶ã€çŠ¶æ€ç®¡ç†ã€æ ·å¼â€”â€”å¯¹æˆ‘æ¥è¯´å°±åƒå¤©ä¹¦ã€‚æ‰€ä»¥è¿™ä¸ªæƒ³æ³•å°±ä¸€ç›´æ‹–ç€,ç›´åˆ°æ˜¥èŠ‚å‰å‡ å¤©,æˆ‘çªç„¶æƒ³:èƒ½ä¸èƒ½ç”¨AIè¯•è¯•?</p>
<p>ç»“æœ,ä¸¤å¤©æ—¶é—´å°±æå®šäº†ã€‚</p>
<p>ç”¨çš„å·¥å…·é“¾ä¹Ÿå¾ˆç®€å•:Lovableåšåˆç‰ˆå‰ç«¯,Claude Codeå’ŒCodexæ‰“ç£¨,Supabaseæ¥å…¥ç™»å½•æ³¨å†Œã€‚æ•´ä¸ªè¿‡ç¨‹å‡ºå¥‡åœ°é¡ºåˆ©,å‡ ä¹æ²¡æœ‰é‡åˆ°ä»€ä¹ˆé˜»ç¢ã€‚</p>
<p>è®©æˆ‘å…ˆè¯´è¯´æˆ‘ä¸ºä»€ä¹ˆä¼šé€‰è¿™å‡ ä¸ªå·¥å…·ã€‚</p>
<h2 data-id="heading-0">ä¸ºä»€ä¹ˆæ˜¯Lovable</h2>
<p>ä¸€å¼€å§‹,æˆ‘å…¶å®å¯¹æ¯”äº†å¥½å‡ ä¸ªå·¥å…·ã€‚</p>
<p>å¸‚é¢ä¸Šçš„AIå¼€å‘å·¥å…·æŒºå¤šçš„:Geminiã€Bolt.newã€ClaudeCode...æˆ‘éƒ½è¯•äº†ä¸€åœˆã€‚</p>
<p>æµ‹è¯•æ–¹æ³•å¾ˆç®€å•,æˆ‘ç”¨åŒæ ·çš„Promptè®©å®ƒä»¬ç”Ÿæˆå¯¼èˆªé¡µ:</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># ä¸ªæ€§åŒ–å¯¼èˆªé¡µå¼€å‘éœ€æ±‚</span>
<span class="hljs-section">## æ ¸å¿ƒå®šä½</span>
å¼€å‘ä¸€æ¬¾ä»¥æè‡´UIè®¾è®¡ä¸ºæ ¸å¿ƒç«äº‰åŠ›çš„ä¸ªæ€§åŒ–å¯¼èˆªé¡µäº§å“â€œå‘¼å“ˆå¯¼èˆªâ€ï¼Œæ‰€æœ‰è§†è§‰å…ƒç´ éœ€ç»è¿‡æ·±åº¦æ‰“ç£¨ï¼Œæ‹’ç»åŒè´¨åŒ–ã€ä¿—å¥—åŒ–è®¾è®¡ï¼Œå°†UI/UXä½“éªŒä½œä¸ºæ ¸å¿ƒä¼˜å…ˆçº§ã€‚

<span class="hljs-section">## 1. è®¾è®¡è¦æ±‚</span>
<span class="hljs-bullet">-</span> è§†è§‰é£æ ¼ï¼šè¿½æ±‚é«˜çº§æ„Ÿä¸ç‹¬ç‰¹æ€§ï¼Œæ¯ä¸ªUIå…ƒç´ ï¼ˆæŒ‰é’®ã€å¡ç‰‡ã€å›¾æ ‡ã€åŠ¨æ•ˆã€é…è‰²ã€æ’ç‰ˆï¼‰å‡éœ€ç²¾ç»†åŒ–è®¾è®¡ï¼Œé¿å…é€šç”¨æ¨¡æ¿åŒ–é£æ ¼
<span class="hljs-bullet">-</span> ä¸»é¢˜è‰²åˆ‡æ¢ï¼šç”¨æˆ·å¯ä»¥è‡ªå·±åˆ‡æ¢å–œæ¬¢çš„ä¸»é¢˜è‰²
<span class="hljs-bullet">-</span> å¸ƒå±€æ–¹æ¡ˆï¼šæä¾›è‡³å°‘3ç§å·®å¼‚åŒ–æ ¸å¿ƒå¸ƒå±€ï¼ˆå¦‚ç½‘æ ¼ç€‘å¸ƒæµã€åˆ†ç±»æŠ½å±‰å¼ã€æç®€å•åˆ—å¼ï¼‰ï¼Œæ”¯æŒç”¨æˆ·ä¸€é”®åˆ‡æ¢ï¼Œæ¯ç§å¸ƒå±€éœ€é€‚é…ä¸åŒä½¿ç”¨åœºæ™¯ï¼ˆé«˜æ•ˆæŸ¥æ‰¾ã€è§†è§‰æ²‰æµ¸ã€æç®€æ“ä½œï¼‰
<span class="hljs-bullet">-</span> å¤šç«¯å…¼å®¹ï¼šå…¨ç«™é‡‡ç”¨å“åº”å¼è®¾è®¡ï¼Œç§»åŠ¨ç«¯éœ€åšä¸“å±é€‚é…ï¼ˆå¦‚è§¦æ§äº¤äº’ä¼˜åŒ–ã€ç«–å±å¸ƒå±€é‡æ„ã€æ“ä½œæŒ‰é’®æ”¾å¤§ï¼‰ï¼Œä¿è¯ç§»åŠ¨ç«¯ä½“éªŒä¸PCç«¯ä¸€è‡´ä¼˜è´¨
<span class="hljs-bullet">-</span> æ”¯æŒæš—é»‘æ¨¡å¼å’Œäº®è‰²æ¨¡å¼åˆ‡æ¢
<span class="hljs-bullet">-</span> UIè®¾è®¡å¿…é¡»ç¬¦åˆå¤§å‚è®¾è®¡è§„èŒƒï¼Œæœ‰å¤§å‚çš„è®¾è®¡é£èŒƒ

<span class="hljs-section">## 2. æ ¸å¿ƒåŠŸèƒ½</span>
<span class="hljs-section">### ï¼ˆ1ï¼‰è‡ªå®šä¹‰åˆ†ç±»ç®¡ç†</span>
<span class="hljs-bullet">-</span> ç”¨æˆ·å¯è‡ªä¸»åˆ›å»º/ç¼–è¾‘/åˆ é™¤ç½‘å€åˆ†ç±»ï¼ˆæ”¯æŒåˆ†ç±»åç§°ã€åˆ†ç±»å›¾æ ‡ã€åˆ†ç±»æ’åºã€åˆ†ç±»èƒŒæ™¯è‡ªå®šä¹‰ï¼‰
<span class="hljs-bullet">-</span> åˆ†ç±»æ”¯æŒå±‚çº§ç®¡ç†ï¼ˆå¿…é¡»åŒ…å«ä¸€çº§/äºŒçº§åˆ†ç±»ï¼‰ï¼Œæ»¡è¶³å¤šç»´åº¦æ•´ç†éœ€æ±‚

<span class="hljs-section">### ï¼ˆ2ï¼‰ç½‘å€ä¸ªæ€§åŒ–ç®¡ç†</span>
<span class="hljs-bullet">-</span> æ¯ä¸ªåˆ†ç±»ä¸‹æ”¯æŒç”¨æˆ·æ·»åŠ è‡ªå®šä¹‰ç½‘å€ï¼Œå¯é…ç½®é¡¹åŒ…æ‹¬ï¼šç½‘å€é“¾æ¥ã€æ˜¾ç¤ºåç§°ã€è‡ªå®šä¹‰å›¾æ ‡ï¼ˆæ”¯æŒä¸Šä¼ /é€‰æ‹©å†…ç½®å›¾æ ‡/è‡ªåŠ¨æŠ“å–ç½‘ç«™faviconï¼‰ã€å¤‡æ³¨ä¿¡æ¯
<span class="hljs-bullet">-</span> ç½‘å€å±•ç¤ºå½¢å¼éœ€ç²¾ç¾åŒ–ï¼šæ”¯æŒå¡ç‰‡æ‚¬åœåŠ¨æ•ˆã€å›¾æ ‡æ¸å˜ã€ä¿¡æ¯åˆ†å±‚å±•ç¤ºï¼Œé¿å…å•è°ƒåˆ—è¡¨å¼å‘ˆç°

<span class="hljs-section">### ï¼ˆ3ï¼‰åˆ†äº«åŠŸèƒ½</span>
<span class="hljs-bullet">-</span> æ”¯æŒç”¨æˆ·ç”Ÿæˆè‡ªå®šä¹‰åˆ†äº«é“¾æ¥ï¼ˆå¯è‡ªå®šä¹‰é“¾æ¥åç¼€ï¼‰ï¼Œåˆ†äº«åè®¿å®¢å¯ç›´æ¥æŸ¥çœ‹è¯¥ç”¨æˆ·çš„å¯¼èˆªé¡µï¼ˆåªè¯»æƒé™ï¼‰
<span class="hljs-bullet">-</span> åˆ†äº«é¡µéœ€ä¿æŒåŸè®¾è®¡é£æ ¼ï¼Œä¸”é€‚é…ç§»åŠ¨ç«¯è®¿é—®

<span class="hljs-section">### ï¼ˆ4ï¼‰ç”¨æˆ·ç³»ç»Ÿ</span>
<span class="hljs-bullet">-</span> åŸºç¡€ç™»å½•åŠŸèƒ½ï¼ˆæ”¯æŒé‚®ç®±/æ‰‹æœºå·éªŒè¯ï¼Œä¼˜å…ˆè€ƒè™‘Supabase Authé›†æˆï¼‰
<span class="hljs-bullet">-</span> ç™»å½•åæ•°æ®ä¸ç”¨æˆ·è´¦å·ç»‘å®šï¼Œæ”¯æŒå¤šç«¯åŒæ­¥

<span class="hljs-section">### ï¼ˆ5ï¼‰æœç´¢åŠŸèƒ½</span>
<span class="hljs-bullet">-</span> ä¸»é¡µé¡¶éƒ¨å±•ç¤ºæœç´¢åŠŸèƒ½ï¼Œå¯ä»¥åˆ‡æ¢æœç´¢å¼•æ“ï¼Œæ¯”å¦‚bingã€ç™¾åº¦ã€google
<span class="hljs-bullet">-</span> ä¹Ÿæ”¯æŒå¿«é€Ÿæ£€ç´¢ç”¨æˆ·æ·»åŠ çš„ç½‘å€

<span class="hljs-section">## 3. æŠ€æœ¯ä¸å¼€å‘è§„åˆ’</span>
<span class="hljs-bullet">-</span> æ•°æ®åº“ï¼šä½¿ç”¨Supabaseï¼Œæ‰€æœ‰æ•°æ®è¡¨ç»Ÿä¸€å‰ç¼€ä¸ºdh<span class="hljs-emphasis">_ï¼ˆå¦‚dh_</span>usersã€dh<span class="hljs-emphasis">_categoriesã€dh_</span>bookmarksï¼‰
<span class="hljs-bullet">-</span> å¼€å‘ä¼˜å…ˆçº§ï¼šå…ˆå®Œæˆå‰ç«¯UI/äº¤äº’ã€æ ¸å¿ƒåŠŸèƒ½é€»è¾‘ï¼Œæ•°æ®åº“ç›¸å…³å¼€å‘åç½®ï¼ˆéœ€é¢„ç•™æ•°æ®å¯¹æ¥æ¥å£ï¼‰
<span class="hljs-bullet">-</span> æŠ€æœ¯è¦æ±‚ï¼šå‰ç«¯éœ€ä¿è¯æ€§èƒ½ä¸è§†è§‰ä¸€è‡´æ€§ï¼Œäº¤äº’åŠ¨æ•ˆæµç•…ä¸å¡é¡¿

<span class="hljs-section">## 4. äº¤ä»˜æœŸæœ›</span>
<span class="hljs-bullet">-</span> æ¸…æ™°çš„è®¾è®¡ç¨¿ï¼ˆå«å¤šå¸ƒå±€æ–¹æ¡ˆã€ç§»åŠ¨ç«¯é€‚é…ç¨¿ï¼‰
<span class="hljs-bullet">-</span> å¯è¿è¡Œçš„å‰ç«¯åŸå‹ï¼ˆæ ¸å¿ƒåŠŸèƒ½å¯äº¤äº’ï¼‰
<span class="hljs-bullet">-</span> æ˜ç¡®çš„æ•°æ®åº“è¡¨ç»“æ„è®¾è®¡ï¼ˆdh<span class="hljs-emphasis">_å‰ç¼€ï¼‰
- åŠŸèƒ½å®ç°çš„æŠ€æœ¯æ–¹æ¡ˆè¯´æ˜
</span></code></pre>
<p>Geminiç”Ÿæˆçš„ä»£ç èƒ½ç”¨,ä½†ç•Œé¢æœ‰ç‚¹æ™®é€šã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/13ebfeaefc284b53b51ad845a952e39e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSFVIQQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771554972&amp;x-signature=2ozIquadck479uPx0hvRSIoQivs%3D" alt="" loading="lazy"/></p>
<p>Bolt.newä¹Ÿä¸é”™,ä½†é»˜è®¤çš„è®¾è®¡æ¨¡æ¿å¤ªç¨‹åºå‘˜å®¡ç¾äº†ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b258c59c704547f59ffef5b571c32432~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSFVIQQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771554972&amp;x-signature=ZAeCAS%2BW7sC28mfFzsUKziSqyaE%3D" alt="" loading="lazy"/></p>
<p>Claude Codeæ­é…GLM4.7ä¸çŸ¥é“æå‡ºäº†ä¸ªä»€ä¹ˆç©æ„ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4f5af5a5afa643bca62f7bc8dcddeb29~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSFVIQQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771554972&amp;x-signature=aevrZqGEqRQrwQsI5CzpHiQfJss%3D" alt="" loading="lazy"/></p>
<p>æœ€åè¯•äº†Lovable,ä¸€å¯¹æ¯”å°±å‘ç°äº†å·®è·â€”â€”å®ƒçš„UIæ›´ç¾è§‚,é»˜è®¤ç”Ÿæˆçš„ç•Œé¢å°±å¾ˆæœ‰è®¾è®¡æ„Ÿ,ä¸æ˜¯é‚£ç§"å·¥ç¨‹å¸ˆå®¡ç¾"ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3e1680820c0448e0829378532e76c8b2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSFVIQQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771554972&amp;x-signature=tH5HwrUE1XjNDv1xtnVTTZlzaS8%3D" alt="" loading="lazy"/></p>
<p>è¿™å°±æ˜¯æˆ‘é€‰Lovableçš„åŸå› :ç®€å•ç›´æ¥,å¥½çœ‹å°±å¤Ÿäº†ã€‚</p>
<p>å°±è¿™æ ·,å¤§æ¦‚ç”¨äº†2å°æ—¶,ä¸€ä¸ªèƒ½ç”¨çš„å¯¼èˆªé¡µåˆç‰ˆå°±å‡ºæ¥äº†ã€‚</p>
<h2 data-id="heading-1">ä¸ºä»€ä¹ˆç”¨Claude Codeå’ŒCodex</h2>
<p>åˆç‰ˆèƒ½ç”¨,ä½†è¿˜ä¸å¤Ÿå¥½ã€‚</p>
<p>æ¯”å¦‚,å“åº”å¼å¸ƒå±€æœ‰é—®é¢˜,åœ¨æ‰‹æœºä¸Šæ‰“å¼€ä¼šä¹±æ‰ã€‚è¿˜æœ‰ä¸€äº›ç»†èŠ‚:é“¾æ¥ç‚¹å‡»åçš„é¢œè‰²ã€hoverçš„æ•ˆæœã€åˆ†ç±»çš„å±•å¼€æ”¶èµ·åŠ¨ç”»...è¿™äº›éƒ½éœ€è¦è°ƒæ•´ã€‚</p>
<p>è¿™æ—¶å€™å°±éœ€è¦Claude Codeå’ŒCodexäº†ã€‚</p>
<p>Claude Codeæˆ‘ä¹‹å‰å°±å¸¸ç”¨,å®ƒæ˜¯ä¸ªç»ˆç«¯AIåŠ©æ‰‹,èƒ½ç›´æ¥æ“ä½œä½ çš„ä»£ç åº“ã€‚æˆ‘å…ˆæŠŠLovableç”Ÿæˆçš„ä»£ç å¯¼å‡ºåˆ°æœ¬åœ°,ç„¶åç”¨Claude Codeæ‰“å¼€ã€‚</p>
<p>è¿™ä¸ªè¿‡ç¨‹å’Œæˆ‘ä¹‹å‰ç”¨Cursoræœ‰ç‚¹åƒã€‚ä½†Claude Codeçš„ä¼˜åŠ¿åœ¨äº"é¡¹ç›®çº§ç†è§£"â€”â€”å®ƒä¸åªæ˜¯çœ‹å•ä¸ªæ–‡ä»¶,è€Œæ˜¯ç†è§£æ•´ä¸ªé¡¹ç›®çš„ç»“æ„,æ‰€ä»¥å®ƒèƒ½æ‰¾åˆ°ä¸€äº›éšè—åœ¨å¤šä¸ªæ–‡ä»¶ä¹‹é—´çš„å…³è”é—®é¢˜ã€‚</p>
<p>Codexçš„ä½œç”¨æ›´åå‘"ç»†èŠ‚æ‰“ç£¨"ã€‚æ¯”å¦‚æˆ‘æƒ³è¦ç»™æ¯ä¸ªç½‘ç«™é“¾æ¥åŠ ä¸Šfaviconå›¾æ ‡,è¿™ä¸ªéœ€æ±‚æ¯”è¾ƒçç¢,éœ€è¦é€ä¸ªå¤„ç†ã€‚</p>
<p>"å¸®æˆ‘ç»™æ‰€æœ‰å¤–éƒ¨é“¾æ¥åŠ ä¸Šè‡ªåŠ¨è·å–faviconçš„åŠŸèƒ½",æˆ‘å¯¹Codexè¯´ã€‚</p>
<p>Codexè‡ªåŠ¨åˆ†æäº†éœ€æ±‚,å†™äº†ä¸€æ®µJavaScriptä»£ç ,è°ƒç”¨Googleçš„favicon API,è‡ªåŠ¨ä¸ºæ¯ä¸ªé“¾æ¥è·å–å›¾æ ‡ã€‚</p>
<p>æ•´ä¸ªè¿‡ç¨‹å¤§æ¦‚èŠ±äº†3å°æ—¶,ä»åˆç‰ˆåˆ°ä¸€ä¸ª"çœ‹èµ·æ¥æŒºä¸“ä¸š"çš„å¯¼èˆªé¡µ,å°±å®Œæˆäº†ã€‚</p>
<h2 data-id="heading-2">ä¸ºä»€ä¹ˆç”¨Supabase</h2>
<p>åšåˆ°è¿™ä¸€æ­¥,å¯¼èˆªé¡µå·²ç»èƒ½ç”¨äº†ã€‚ä½†æˆ‘è§‰å¾—è¿˜ç¼ºäº†ç‚¹ä»€ä¹ˆã€‚</p>
<p>æ—¢ç„¶æ˜¯è‡ªå·±ç”¨çš„å·¥å…·,èƒ½ä¸èƒ½åŠ ä¸Šç”¨æˆ·ç³»ç»Ÿ?è¿™æ ·æˆ‘å¯ä»¥åˆ†äº«ç»™æœ‹å‹,å¤§å®¶éƒ½å¯ä»¥æœ‰è‡ªå·±çš„æ”¶è—å¤¹ã€‚</p>
<p>åç«¯è¿™å—æˆ‘æ¯”è¾ƒç†Ÿ,æ‰€ä»¥ç¬¬ä¸€ååº”å°±æ˜¯éœ€è¦ä¸€ä¸ªæ•°æ®åº“å’Œç”¨æˆ·è®¤è¯ç³»ç»Ÿã€‚</p>
<p>ä¹‹å‰ç”¨è¿‡Firebase,ä½†é…ç½®èµ·æ¥æŒºéº»çƒ¦çš„ã€‚åæ¥å¬è¯´äº†Supabase,è¯´æ˜¯å¼€æºç‰ˆçš„Firebase,è€Œä¸”å’ŒAIå·¥å…·é›†æˆå¾—å¾ˆå¥½ã€‚</p>
<p>æ˜¥èŠ‚å‰é‚£å¤©ä¸‹åˆ,æˆ‘æ³¨å†Œäº†Supabase,åˆ›å»ºäº†ä¸€ä¸ªæ–°é¡¹ç›®ã€‚</p>
<p>ç„¶åæˆ‘ç”¨Claude Codeè¿æ¥äº†Supabaseçš„MCP:</p>
<p>"å¸®æˆ‘ä¸ºè¿™ä¸ªå¯¼èˆªé¡µæ·»åŠ ç™»å½•æ³¨å†ŒåŠŸèƒ½,ä½¿ç”¨é‚®ç®±å’Œå¯†ç è®¤è¯ã€‚"</p>
<p>Claude Codeè‡ªåŠ¨åˆ›å»ºäº†å¿…è¦çš„æ•°æ®åº“è¡¨,é…ç½®äº†è®¤è¯ç­–ç•¥,ç„¶åç”Ÿæˆäº†ç™»å½•å’Œæ³¨å†Œçš„å‰ç«¯ç»„ä»¶ã€‚</p>
<p>æ•´ä¸ªè¿‡ç¨‹ä¸åˆ°1å°æ—¶,ç™»å½•æ³¨å†ŒåŠŸèƒ½å°±æå®šäº†ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4cee24315fab4e769b1374c2c8d49c85~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSFVIQQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771554972&amp;x-signature=UJ1EGMGfc5e1AQuNrGDoVQ0j1E4%3D" alt="" loading="lazy"/></p>
<p>è€Œä¸”Supabaseä¸ä»…åšäº†åŸºæœ¬çš„è®¤è¯,è¿˜è‡ªåŠ¨åŒ…å«äº†é‚®ç®±éªŒè¯ã€å¯†ç é‡ç½®è¿™äº›åŠŸèƒ½ã€‚è¿™äº›éƒ½æ˜¯ç°æˆçš„,æˆ‘ä¸ç”¨è‡ªå·±å†™ã€‚</p>
<p>è¿™æ—¶å€™æˆ‘çªç„¶æ„è¯†åˆ°,ä½œä¸ºä¸€ä¸ªåç«¯å¼€å‘,å¦‚æœæ˜¯ä¼ ç»Ÿå¼€å‘æ–¹å¼,å…‰æ˜¯ç”¨æˆ·è®¤è¯è¿™å—,è‡³å°‘è¦èŠ±å¤§åŠå¤©æ—¶é—´ã€‚ä½†ç°åœ¨ç”¨AI,1å°æ—¶å°±æå®šäº†ã€‚</p>
<h2 data-id="heading-3">2å¤©å®Œæˆä¸€ä¸ªå…¨æ ˆé¡¹ç›®</h2>
<p>æ•´ä¸ªé¡¹ç›®èŠ±äº†2å¤©ã€‚</p>
<p>ç¬¬ä¸€å¤©ç”¨Lovableåšåˆç‰ˆ,2å°æ—¶æå®šã€‚</p>
<p>ç¬¬äºŒå¤©ç”¨Claude Codeå’ŒCodexæ‰“ç£¨,3å°æ—¶;ç”¨SupabaseåŠ ç™»å½•æ³¨å†Œ,1å°æ—¶ã€‚</p>
<p>å‰©ä¸‹çš„æ—¶é—´ä¸»è¦æ˜¯æµ‹è¯•å’Œå¾®è°ƒã€‚</p>
<p>è€Œä¸”æ•´ä¸ªè¿‡ç¨‹æ²¡æœ‰é‡åˆ°ä»€ä¹ˆå¤§å‘ã€‚</p>
<p>è¿™ä¸ªé€Ÿåº¦è®©æˆ‘æœ‰ç‚¹æ„å¤–ã€‚ä½œä¸ºä¸€ä¸ªåç«¯å¼€å‘,å¦‚æœè‡ªå·±ä»é›¶å­¦å‰ç«¯åšè¿™ä¸ªé¡¹ç›®,ä¿å®ˆä¼°è®¡ä¹Ÿè¦ä¸€å‘¨ã€‚è€Œä¸”åšå‡ºæ¥çš„æ•ˆæœè‚¯å®šä¸å¦‚ç°åœ¨ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/abff23ab626b422a9f09e7c09354df22~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSFVIQQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771554972&amp;x-signature=1OwnV%2B1%2FiSp7xd8hs8XVMLNsTtI%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-4">æˆ‘å­¦åˆ°äº†ä»€ä¹ˆ</h2>
<p>è¿™ä¸ªé¡¹ç›®åšå®Œäº†,ä½†æˆ‘æœ€å¤§çš„æ”¶è·ä¸æ˜¯å¯¼èˆªé¡µæœ¬èº«,è€Œæ˜¯å¯¹AIæ—¶ä»£å¼€å‘æ¨¡å¼çš„æ€è€ƒã€‚</p>
<p>æŠ€æœ¯é—¨æ§›çœŸçš„é™ä½äº†ã€‚</p>
<p>æˆ‘ä»¥å‰è§‰å¾—,åšå…¨æ ˆå¼€å‘éœ€è¦æ‡‚å‰ç«¯ã€åç«¯ã€æ•°æ®åº“ã€éƒ¨ç½²...è¿™äº›ä¸œè¥¿è¦å­¦å‡ å¹´ã€‚ä½†ç°åœ¨æœ‰äº†AIå·¥å…·,ä¸€ä¸ªåç«¯å¼€å‘ä¹Ÿèƒ½åœ¨ä¸¤å¤©å†…åšå‡ºä¸€ä¸ªåƒæ ·çš„å…¨æ ˆé¡¹ç›®ã€‚</p>
<p>è¿™ä¸æ˜¯è¯´æŠ€æœ¯çŸ¥è¯†ä¸é‡è¦äº†,è€Œæ˜¯è¯´,AIæŠŠå¾ˆå¤š"é‡å¤åŠ³åŠ¨"å’Œ"æ¨¡æ¿ä»£ç "éƒ½è‡ªåŠ¨åŒ–äº†ã€‚ä½ åªéœ€è¦æ‡‚æ ¸å¿ƒæ¦‚å¿µ,å‰©ä¸‹çš„äº¤ç»™AIã€‚</p>
<p>å·¥å…·çš„é€‰æ‹©ä¹Ÿå¾ˆé‡è¦ã€‚</p>
<p>è¿™ä¸ªé¡¹ç›®æˆ‘ç”¨äº†4ä¸ªAIå·¥å…·,æ¯ä¸ªå·¥å…·éƒ½æœ‰å®ƒæ“…é•¿çš„åœ°æ–¹:Lovableæ“…é•¿å¿«é€ŸåŸå‹,Claude Codeæ“…é•¿ä»£ç ç†è§£,Codexæ“…é•¿ç»†èŠ‚å¤„ç†,Supabaseæ“…é•¿åç«¯é›†æˆã€‚</p>
<p>æ²¡æœ‰å“ªä¸ªå·¥å…·æ˜¯ä¸‡èƒ½çš„,ä½†ç»„åˆèµ·æ¥å°±å¾ˆå¼ºå¤§ã€‚</p>
<p>ä½†æˆ‘ä¾ç„¶éœ€è¦æ‡‚æŠ€æœ¯ã€‚</p>
<p>è™½ç„¶AIå¸®æˆ‘å†™äº†å¤§éƒ¨åˆ†ä»£ç ,ä½†æˆ‘è¿˜æ˜¯å¾—çŸ¥é“ä»€ä¹ˆæ˜¯å“åº”å¼å¸ƒå±€,ä»€ä¹ˆæ˜¯JWTè®¤è¯,ä»€ä¹ˆæ˜¯æ•°æ®åº“è¡¨ç»“æ„ã€‚ä¸ç„¶æˆ‘è¿éœ€æ±‚éƒ½æè¿°ä¸æ¸…æ¥š,æ›´åˆ«è¯´éªŒè¯AIç”Ÿæˆçš„ä»£ç å¯¹ä¸å¯¹äº†ã€‚</p>
<p>AIä¸æ˜¯è®©å¼€å‘è€…å˜æ‡’,è€Œæ˜¯è®©å¼€å‘è€…æŠŠç²¾åŠ›èŠ±åœ¨æ›´é‡è¦çš„äº‹æƒ…ä¸Šã€‚</p>
<h2 data-id="heading-5">ç»™å…¶ä»–åç«¯å¼€å‘çš„å»ºè®®</h2>
<p>å¦‚æœä½ ä¹Ÿæ˜¯ä¸ªåç«¯å¼€å‘,æƒ³åšç‚¹å‰ç«¯ç›¸å…³çš„ä¸œè¥¿,æˆ‘æœ‰å‡ ä¸ªå»ºè®®â€”â€”</p>
<ol>
<li>
<p>ä»ç®€å•é¡¹ç›®å¼€å§‹ã€‚åˆ«ä¸€ä¸Šæ¥å°±åšå¤æ‚çš„SaaS,å…ˆåšäº›å·¥å…·ç±»ã€å±•ç¤ºç±»çš„å°é¡¹ç›®ã€‚</p>
</li>
<li>
<p>ç”¨å¥½å¯è§†åŒ–å·¥å…·ã€‚Lovableè¿™ç±»å·¥å…·èƒ½è®©ä½ å¿«é€Ÿçœ‹åˆ°ç»“æœ,å»ºç«‹ä¿¡å¿ƒã€‚</p>
</li>
<li>
<p>AIæ˜¯åŠ©æ‰‹,ä¸æ˜¯æ›¿ä»£ã€‚ä½ ä¾ç„¶éœ€è¦ç†è§£åŸºç¡€æ¦‚å¿µ,åªæ˜¯ä¸ç”¨æŠ ç»†èŠ‚äº†ã€‚</p>
</li>
<li>
<p>å¤šå°è¯•ä¸åŒçš„å·¥å…·ã€‚æ²¡æœ‰æœ€å¥½,åªæœ‰æœ€é€‚åˆä½ é¡¹ç›®çš„å·¥å…·ç»„åˆã€‚</p>
</li>
</ol>
<h2 data-id="heading-6">æœ€åè¯´ä¸€å¥</h2>
<p>åšè¿™ä¸ªå¯¼èˆªé¡µä¹‹å‰,æˆ‘ä»¥ä¸ºè‡ªå·±è¿™è¾ˆå­éƒ½ä¸ä¼šç¢°å‰ç«¯äº†ã€‚</p>
<p>ä½†ç°åœ¨å‘ç°,æœ‰äº†AI,åç«¯å¼€å‘ä¹Ÿèƒ½åšå…¨æ ˆé¡¹ç›®ã€‚è¿™ä¸æ˜¯è¯´æˆ‘ä¼šè½¬è¡Œåšå‰ç«¯,è€Œæ˜¯è¯´,æˆ‘çš„å¯èƒ½æ€§å˜å¤§äº†ã€‚</p>
<p>ä»¥åå†æƒ³åšä¸ªå°å·¥å…·,ä¸ç”¨å†"ç­‰æˆ‘å…ˆå­¦å­¦å‰ç«¯"äº†ã€‚ç›´æ¥å¼€å¹²,åæ­£æœ‰AIå¸®å¿™ã€‚</p>
<p>è¿™å¯èƒ½å°±æ˜¯AIæ—¶ä»£æœ€è®©æˆ‘å…´å¥‹çš„åœ°æ–¹â€”â€”æŠ€æœ¯é—¨æ§›é™ä½äº†,ä½†åˆ›é€ çš„é—¨æ§›åè€Œæ›´é«˜äº†,å› ä¸ºé™åˆ¶ä½ çš„ä¸æ˜¯æŠ€æœ¯èƒ½åŠ›,è€Œæ˜¯ä½ çš„æƒ³æ³•ã€‚</p>
<p>æ‰€ä»¥,åˆ«å†"ç­‰æˆ‘å­¦ä¼šäº†ä»€ä¹ˆ"æ‰å¼€å§‹åŠ¨æ‰‹ã€‚ç°åœ¨å°±å¯ä»¥å¼€å§‹äº†ã€‚</p>
<p><strong>ç›¸å…³é“¾æ¥</strong>:</p>
<ul>
<li>æˆ‘çš„å¯¼èˆªé¡µ: <a href="https://link.juejin.cn?target=https%3A%2F%2Fdh.huhage.fun%2F" target="_blank" title="https://dh.huhage.fun/" ref="nofollow noopener noreferrer">dh.huhage.fun/</a></li>
<li>Lovable: <a href="https://link.juejin.cn?target=https%3A%2F%2Flovable.dev%2F" target="_blank" title="https://lovable.dev/" ref="nofollow noopener noreferrer">lovable.dev/</a></li>
<li>Claude Code: <a href="https://link.juejin.cn?target=https%3A%2F%2Fclaude.ai%2Fcode" target="_blank" title="https://claude.ai/code" ref="nofollow noopener noreferrer">claude.ai/code</a></li>
<li>Supabase: <a href="https://link.juejin.cn?target=https%3A%2F%2Fsupabase.com%2F" target="_blank" title="https://supabase.com/" ref="nofollow noopener noreferrer">supabase.com/</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Android SurfaceFlinger ç¬”è®°]]></title>    <link>https://juejin.cn/post/7605782093482770458</link>    <guid>https://juejin.cn/post/7605782093482770458</guid>    <pubDate>2026-02-13T02:19:23.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605782093482770458" data-draft-id="7605856048360980518" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Android SurfaceFlinger ç¬”è®°"/> <meta itemprop="keywords" content="Android"/> <meta itemprop="datePublished" content="2026-02-13T02:19:23.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¿ƒæºxinyuan"/> <meta itemprop="url" content="https://juejin.cn/user/4283353029151694"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Android SurfaceFlinger ç¬”è®°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4283353029151694/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¿ƒæºxinyuan
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-13T02:19:23.000Z" title="Fri Feb 13 2026 02:19:23 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>SurfaceFlingerï¼ˆä»¥ä¸‹ç®€ç§°SFï¼‰ä¸ActivityManagerServiceï¼ˆAMSï¼‰æ˜¯Androidåº•å±‚åŒé›„ã€‚<strong>AMSç®¡çš„æ˜¯â€œè°æ´»ç€ã€è°æ­»å»ã€è°åœ¨å‰å°â€</strong>ï¼Œæ˜¯<strong>ç”Ÿå‘½å‘¨æœŸçš„CEO</strong>ï¼›<strong>SFç®¡çš„æ˜¯â€œè°ç”»äº†ä»€ä¹ˆã€æ€ä¹ˆæ‹¼æˆä¸€å¼ å›¾ã€ä½•æ—¶é€åˆ°å±å¹•â€</strong>ï¼Œæ˜¯<strong>è§†è§‰å‘ˆç°çš„æ€»å¯¼æ¼”</strong>ã€‚</p>
<p>å¦‚æœè¯´AMSæ˜¯Androidå¤šä»»åŠ¡çš„å¤§è„‘ï¼ŒSFå°±æ˜¯Androidå›¾å½¢ç³»ç»Ÿçš„<strong>å¿ƒè„</strong>ã€‚å®ƒä¸ç”Ÿäº§åƒç´ ï¼ˆåº”ç”¨æ‰æ˜¯ç”Ÿäº§è€…ï¼‰ï¼Œä½†å®ƒå†³å®šæ¯ä¸€å¸§åƒç´ å¦‚ä½•<strong>æœ€ç»ˆå‡ºç°åœ¨ä½ çœ¼å‰</strong>ã€‚ä»¥ä¸‹ä»å…­ä¸ªç»´åº¦å½»åº•æ‹†è§£SFã€‚</p>
<hr/>
<h2 data-id="heading-0">ä¸€ã€æ ¸å¿ƒå®šä½ï¼šSFåˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿ</h2>
<p>SurfaceFlingeræ˜¯ä¸€ä¸ª<strong>ç³»ç»Ÿçº§æœåŠ¡</strong>ï¼Œè¿è¡Œåœ¨<code>system_server</code>è¿›ç¨‹ï¼ŒèŒè´£æåº¦èšç„¦ï¼š<strong>æ¥æ”¶æ‰€æœ‰åº”ç”¨å’Œç³»ç»Ÿçš„å›¾å½¢ç¼“å†²åŒºï¼ˆBufferï¼‰ï¼ŒæŒ‰Zè½´é¡ºåºã€é€æ˜åº¦ã€è£å‰ªåŒºåŸŸç­‰å±æ€§åˆæˆï¼Œé€šè¿‡ç¡¬ä»¶æ˜¾ç¤ºåˆ°å±å¹•</strong> ã€‚</p>
<p><strong>å…³é”®è®¤çŸ¥</strong>ï¼šSFæœ¬èº«<strong>ä¸åšç»˜åˆ¶</strong>ï¼ˆDrawï¼‰ã€‚åº”ç”¨çš„<code>onDraw()</code>ã€OpenGLæ¸²æŸ“ã€è§†é¢‘è§£ç è¾“å‡ºâ€”â€”è¿™äº›éƒ½å‘ç”Ÿåœ¨åº”ç”¨è¿›ç¨‹ã€‚SFåªåš<strong>åˆæˆ</strong>ï¼ˆComposeï¼‰ã€‚</p>
<p><strong>ä¸€å¥è¯å®šæ€§</strong>ï¼šSFæ˜¯Androidçš„<strong>å›¾å½¢æ··åˆå™¨</strong>å’Œ<strong>æ˜¾ç¤ºè°ƒåº¦ä¸­å¿ƒ</strong>ã€‚</p>
<h2 data-id="heading-1">äºŒã€SFä¸AMSçš„â€œåŒæ ¸å…³ç³»â€</h2>
<p>ç†è§£SFå¿…é¡»æ”¾åœ¨Androidæ•´ä½“æ¶æ„ä¸­ã€‚AMSå’ŒSFæ˜¯SystemServerä¸­<strong>è€¦åˆæœ€æ·±</strong>çš„ä¸¤ä¸ªæœåŠ¡ï¼š</p>



































<table><thead><tr><th>ç»´åº¦</th><th>ActivityManagerService (AMS)</th><th>SurfaceFlinger (SF)</th></tr></thead><tbody><tr><td><strong>ç®¡ç†å¯¹è±¡</strong></td><td>å››å¤§ç»„ä»¶ã€è¿›ç¨‹ã€ä»»åŠ¡æ ˆ</td><td>Surface/Layerã€å›¾å½¢ç¼“å†²åŒºã€æ˜¾ç¤ºè®¾å¤‡</td></tr><tr><td><strong>æ ¸å¿ƒé—®é¢˜</strong></td><td>è°åº”è¯¥åœ¨å‰å°ï¼Ÿå“ªä¸ªè¿›ç¨‹æ´»ç€ï¼Ÿ</td><td>è¿™å—Bufferæ˜¯è°çš„ï¼Ÿæ€ä¹ˆå ï¼Ÿä½•æ—¶é€æ˜¾ï¼Ÿ</td></tr><tr><td><strong>è§¦å‘ä¿¡å·</strong></td><td>Intentã€æŒ‰é”®ã€ç³»ç»Ÿäº‹ä»¶</td><td><strong>VSyncä¸­æ–­</strong>ï¼ˆç¡¬ä»¶æ—¶é’Ÿï¼‰</td></tr><tr><td><strong>é€šä¿¡å¯¹è±¡</strong></td><td>åº”ç”¨ä¸»çº¿ç¨‹ï¼ˆActivityThreadï¼‰</td><td>åº”ç”¨æ¸²æŸ“çº¿ç¨‹ï¼ˆRenderThreadï¼‰æˆ–ViewRootImpl</td></tr><tr><td><strong>çº½å¸¦</strong></td><td><strong>WindowManagerService (WMS)</strong> â€”â€” AMSé€šçŸ¥WMSçª—å£ç„¦ç‚¹å˜åŒ–ï¼›WMSé€šè¿‡<code>relayoutWindow()</code>ä¸SFäº¤äº’ï¼Œåˆ›å»º/æ›´æ–°Surface</td><td/></tr></tbody></table>
<p><strong>æ ¸å¿ƒç»“è®º</strong>ï¼š<strong>AMSå†³å®šâ€œæ¼”ä»€ä¹ˆâ€ï¼ŒWMSå†³å®šâ€œæ€ä¹ˆæ‘†â€ï¼ŒSFå†³å®šâ€œæ€ä¹ˆæ‹¼ã€ä½•æ—¶æ”¾â€</strong>ã€‚</p>
<hr/>
<h2 data-id="heading-2">ä¸‰ã€SFçš„ä¸‰å¤§æ ¸å¿ƒæ”¯æŸ±</h2>
<p>è¦å½»åº•ç†è§£SFï¼Œå¿…é¡»å•ƒä¸‹ä¸‰å—ç¡¬éª¨å¤´ï¼š<strong>Bufferç®¡ç†æ¶æ„</strong>ã€<strong>åˆæˆç­–ç•¥ï¼ˆGPU/HWCï¼‰</strong>ã€<strong>VSyncé©±åŠ¨æ¨¡å‹</strong>ã€‚</p>
<h3 data-id="heading-3">1. æ¶æ„åŸºçŸ³ï¼šBufferQueueä¸ç”Ÿäº§-æ¶ˆè´¹æ¨¡å‹</h3>
<p>è¿™æ˜¯Androidå›¾å½¢ç³»ç»Ÿ<strong>æœ€ä¼˜é›…çš„è®¾è®¡</strong>ï¼Œæ²¡æœ‰ä¹‹ä¸€ã€‚å®ƒå®ç°äº†<strong>æ— æ‹·è´ã€è·¨è¿›ç¨‹ã€å¼‚æ­¥</strong>çš„ç¼“å†²åŒºæµè½¬ ã€‚</p>
<h4 data-id="heading-4">1.1 æ ¸å¿ƒè§’è‰²</h4>
<ul>
<li><strong>ç”Ÿäº§è€…ï¼ˆProducerï¼‰</strong>ï¼šåº”ç”¨è¿›ç¨‹ï¼ˆUIçº¿ç¨‹/RenderThreadã€Cameraã€è§†é¢‘è§£ç å™¨ï¼‰ã€‚è°ƒç”¨<code>dequeueBuffer()</code>è·å–ç©ºé—²Bufferï¼Œå¡«å……æ•°æ®ï¼Œ<code>queueBuffer()</code>å½’è¿˜ã€‚</li>
<li><strong>æ¶ˆè´¹è€…ï¼ˆConsumerï¼‰</strong>ï¼šSurfaceFlingerã€‚è°ƒç”¨<code>acquireBuffer()</code>è·å–å·²å°±ç»ªçš„Bufferï¼Œåˆæˆå<code>releaseBuffer()</code>é‡Šæ”¾ã€‚</li>
<li><strong>ç¼“å†²åŒºé˜Ÿåˆ—ï¼ˆBufferQueueï¼‰</strong>ï¼šåœ¨<strong>SFè¿›ç¨‹</strong>åˆ›å»ºï¼Œ<strong>Bufferæœ¬èº«æ˜¯å…±äº«å†…å­˜ï¼ˆGraphicBufferï¼‰</strong>ï¼Œé€šè¿‡Binderä¼ é€’æ–‡ä»¶æè¿°ç¬¦å®ç°é›¶æ‹·è´è·¨è¿›ç¨‹ä¼ é€’ ã€‚</li>
</ul>
<h4 data-id="heading-5">1.2 Bufferçš„å››ç§ç”Ÿå‘½çŠ¶æ€ï¼ˆé“å¾‹ï¼‰</h4>
<ul>
<li><strong>FREEï¼ˆç©ºé—²ï¼‰</strong>ï¼šé˜Ÿåˆ—ä¸­æ— äººä½¿ç”¨ã€‚ç”Ÿäº§è€…å¯<code>dequeue</code>ã€‚</li>
<li><strong>DEQUEUEDï¼ˆå‡ºåˆ—ï¼‰</strong>ï¼šç”Ÿäº§è€…æ­£åœ¨å¡«å……æ•°æ®ï¼ˆå¦‚æ‰§è¡Œ<code>onDraw()</code>ï¼‰ã€‚</li>
<li><strong>QUEUEDï¼ˆå…¥åˆ—ï¼‰</strong>ï¼šç”Ÿäº§è€…å®Œæˆç»˜åˆ¶ï¼Œç­‰å¾…SFæ¶ˆè´¹ã€‚</li>
<li><strong>ACQUIREDï¼ˆè·å–ï¼‰</strong>ï¼šSFæ­£åœ¨åˆæˆè¿™ä¸€å¸§ã€‚</li>
</ul>
<p><strong>è¿™æ˜¯SFè°ƒåº¦çš„æœ€å°å•å…ƒã€‚æ¯ä¸€å¸§éƒ½æ˜¯è¿™å››ä¸ªçŠ¶æ€çš„å¾ªç¯ã€‚</strong></p>
<h4 data-id="heading-6">1.3 Surfaceä¸Layerçš„â€œçš®è‚‰å…³ç³»â€</h4>
<ul>
<li><strong>Surfaceï¼ˆçš®ï¼‰</strong>ï¼šåº”ç”¨ä¾§çœ‹åˆ°çš„â€œç”»å¸ƒâ€ï¼Œæœ¬è´¨æ˜¯<code>IGraphicBufferProducer</code>çš„ä»£ç†ã€‚åº”ç”¨é€šè¿‡å®ƒ<code>lockCanvas()</code>æˆ–<code>eglSwapBuffers()</code>è§¦å‘Bufferæµè½¬ã€‚</li>
<li><strong>Layerï¼ˆè‚‰ï¼‰</strong>ï¼šSFä¾§çš„â€œçª—å£ä»£è¡¨â€ã€‚<strong>æ¯ä¸ªSurfaceåœ¨SFå†…éƒ¨å¯¹åº”ä¸€ä¸ªLayerå¯¹è±¡</strong>ï¼Œè®°å½•Z-orderã€é€æ˜åº¦ã€æ˜¾ç¤ºåŒºåŸŸç­‰å…ƒæ•°æ®ã€‚</li>
<li><strong>åˆ›å»ºæ—¶æœº</strong>ï¼šWMSè°ƒç”¨<code>relayoutWindow()</code> -&gt; SFåˆ›å»ºLayer -&gt; å°†BufferProducer Binderè¿”å›ç»™åº”ç”¨ -&gt; åº”ç”¨æ„å»ºSurfaceã€‚</li>
</ul>
<p><strong>è¿™å°±æ˜¯çª—å£ç³»ç»Ÿè·¨è¿›ç¨‹çš„å®Œæ•´æ¡æ‰‹</strong> ã€‚</p>
<h3 data-id="heading-7">2. åˆæˆå¼•æ“ï¼šGPUåˆæˆ vs. ç¡¬ä»¶åˆæˆï¼ˆHWCï¼‰</h3>
<p>SFæ”¶åˆ°å„Layerçš„Bufferåï¼Œå¿…é¡»æŠŠå®ƒä»¬â€œæ‹¼â€æˆä¸€å¼ å®Œæ•´çš„å±å¹•å›¾åƒã€‚æ€ä¹ˆæ‹¼ï¼Ÿ<strong>ä¸¤ç§æ¨¡å¼ï¼ŒåŠ¨æ€åˆ‡æ¢</strong> ã€‚</p>
<h4 data-id="heading-8">2.1 GPUåˆæˆï¼ˆOpenGLåˆæˆï¼‰</h4>
<ul>
<li><strong>æ–¹å¼</strong>ï¼šå°†æ‰€æœ‰Layerçš„Bufferä½œä¸ºçº¹ç†ä¸Šä¼ GPUï¼Œé€šè¿‡OpenGLç»˜åˆ¶åˆ°ä¸€ä¸ªç›®æ ‡FBOï¼ˆå¸§ç¼“å†²å¯¹è±¡ï¼‰ã€‚</li>
<li><strong>ä¼˜ç‚¹</strong>ï¼šæå…¶çµæ´»ï¼Œä»»æ„å±‚æ•°ã€ä»»æ„å½¢çŠ¶ã€ä»»æ„æ··åˆæ•ˆæœã€‚</li>
<li><strong>ç¼ºç‚¹</strong>ï¼šè€—ç”µã€å¸¦å®½å ç”¨é«˜ã€‚</li>
<li><strong>åœºæ™¯</strong>ï¼šç•Œé¢å¤æ‚ï¼ˆå¤šçª—å£ï¼‰ã€åŠ¨ç”»æ•ˆæœã€æ— æ³•è¢«HWCå¤„ç†çš„å›¾å±‚ã€‚</li>
</ul>
<h4 data-id="heading-9">2.2 ç¡¬ä»¶åˆæˆï¼ˆHWCï¼ŒHardware Composerï¼‰</h4>
<ul>
<li><strong>æ–¹å¼</strong>ï¼šå°†Layerä¿¡æ¯ï¼ˆBufferå¥æŸ„ã€ä½ç½®ã€Z-orderï¼‰æ‰“åŒ…å‘ç»™æ˜¾ç¤ºç¡¬ä»¶ï¼Œ<strong>ç”±æ˜¾ç¤ºæ§åˆ¶å™¨ï¼ˆDisplay Controllerï¼‰ç¡¬ä»¶å®Œæˆå åŠ </strong>ï¼ŒSFå®Œå…¨ä¸ç¢°åƒç´ æ•°æ® ã€‚</li>
<li><strong>ä¼˜ç‚¹</strong>ï¼šå‡ ä¹é›¶åŠŸè€—ã€æä½å»¶è¿Ÿã€‚</li>
<li><strong>ç¼ºç‚¹</strong>ï¼šç¡¬ä»¶å å›¾å±‚æ•°æœ‰é™ï¼ˆé€šå¸¸4-8å±‚ï¼‰ï¼Œè¶…å‡ºéƒ¨åˆ†å¿…é¡»ç”±GPUåˆæˆã€‚</li>
<li><strong>åœºæ™¯</strong>ï¼šçŠ¶æ€æ ã€å¯¼èˆªæ ã€è§†é¢‘å…¨å±å±‚æ•°å°‘çš„åœºæ™¯ã€‚</li>
</ul>
<h4 data-id="heading-10">2.3 HWC HALå¥‘çº¦</h4>
<p>SFé€šè¿‡HALå±‚ä¸ç¡¬ä»¶é©±åŠ¨äº¤äº’ã€‚æ ¸å¿ƒå¥‘çº¦ï¼š</p>
<ul>
<li><code>prepare()</code>ï¼šSFå‘Šè¯‰HWCâ€œæˆ‘æœ‰è¿™äº›Layerï¼Œä½ èƒ½ç¡¬ä»¶åˆæˆå“ªäº›ï¼Ÿâ€</li>
<li><code>set()</code>ï¼šSFæŠŠéœ€è¦ç¡¬ä»¶åˆæˆçš„Layer Bufferå¥æŸ„ä¼ ç»™HWCï¼›éœ€è¦GPUåˆæˆçš„éƒ¨åˆ†ï¼ŒSFè‡ªå·±ç”»å¥½å†ä¼ ç»™HWCä½œä¸º<strong>å¸§ç¼“å†²åŒºï¼ˆFramebufferï¼‰</strong>ã€‚</li>
<li><strong>Fenceæœºåˆ¶</strong>ï¼šä¸ºäº†ç²¾ç¡®åŒæ­¥ï¼ŒBufferçš„è®¿é—®æƒé€šè¿‡åŒæ­¥æ …æ ï¼ˆFence FDï¼‰ä¼ é€’ï¼Œé¿å…CPU/GPU/æ˜¾ç¤ºæ§åˆ¶å™¨äº’ç›¸è¸©å†…å­˜ ã€‚</li>
</ul>
<h3 data-id="heading-11">3. èŠ‚æ‹å™¨ï¼šVSyncé©±åŠ¨æ¨¡å‹</h3>
<p><strong>å¦‚æœæ²¡æœ‰VSyncï¼ŒSFå°±æ˜¯ä¸€ç›˜æ•£æ²™ã€‚</strong> Android 4.1ï¼ˆJelly Beanï¼‰å¼•å…¥VSyncå’ŒProject Butterï¼Œè¿™æ˜¯SFè°ƒåº¦æ¨¡å‹çš„é©å‘½ ã€‚</p>
<h4 data-id="heading-12">3.1 ç¡¬ä»¶èŠ‚æ‹</h4>
<p>å±å¹•ä»¥å›ºå®šé¢‘ç‡åˆ·æ–°ï¼ˆé€šå¸¸æ˜¯60Hzï¼Œå³æ¯16.6msä¸€å¸§ï¼‰ã€‚ç¡¬ä»¶åœ¨æ¯æ¬¡åˆ·æ–°å‰ä¼šäº§ç”Ÿ<strong>å‚ç›´åŒæ­¥ä¸­æ–­ï¼ˆVSyncï¼‰</strong>ã€‚SFçš„å·¥ä½œå°±æ˜¯<strong>å¡åœ¨è¿™ä¸ªä¸­æ–­ç‚¹ä¸Šè¿›è¡Œåˆæˆ</strong>ï¼Œæœç»â€œæ’•è£‚â€ï¼ˆTearingï¼‰ ã€‚</p>
<h4 data-id="heading-13">3.2 ä¸¤æ¡VSyncçº¿</h4>
<p>SFå†…éƒ¨ç»´æŠ¤<strong>ä¸¤ä¸ªç‹¬ç«‹çš„VSyncåˆ†å‘é€šé“</strong>ï¼š</p>
<ol>
<li><strong>VSync-app</strong>ï¼šåˆ†å‘ç»™åº”ç”¨ã€‚Choreographerç›‘å¬æ­¤ä¿¡å·ï¼Œè§¦å‘åº”ç”¨å¼€å§‹å¸ƒå±€ã€ç»˜åˆ¶ã€<code>dequeueBuffer</code>ã€‚</li>
<li><strong>VSync-sf</strong>ï¼šåˆ†å‘ç»™SFè‡ªå·±ã€‚SFç›‘å¬æ­¤ä¿¡å·ï¼Œå¼€å§‹åˆæˆã€<code>acquireBuffer</code>ã€è°ƒç”¨HWCã€‚</li>
</ol>
<p><strong>åç§»é‡ï¼ˆOffsetï¼‰</strong>ï¼šVSync-appé€šå¸¸æ¯”VSync-sf<strong>æå‰å‡ æ¯«ç§’</strong>ã€‚è¿™æ ·åº”ç”¨ç”»å®ŒBufferå…¥é˜Ÿæ—¶ï¼ŒSFåˆšå¥½å¼€å§‹åˆæˆï¼Œ<strong>æµæ°´çº¿æœ€å¤§åŒ–</strong>ã€‚</p>
<h4 data-id="heading-14">3.3 è½¯ä»¶VSyncé¢„æµ‹</h4>
<p>ä¸ºäº†å‡å°‘å¯¹ç¡¬ä»¶ä¸­æ–­çš„ä¾èµ–ï¼ŒSFç»´æŠ¤ä¸€ä¸ª<strong>è½¯ä»¶VSyncé¢„æµ‹æ¨¡å‹</strong>ã€‚<code>VSyncPredictor</code>æ ¹æ®å†å²é‡‡æ ·è®¡ç®—ä¸‹ä¸€æ¬¡ä¸­æ–­æ—¶é—´ï¼Œ<code>VSyncDispatchTimerQueue</code>è´Ÿè´£å®šæ—¶å›è°ƒã€‚è¿™å¥—æœºåˆ¶ä¿è¯äº†å³ä½¿ç¡¬ä»¶æš‚æ—¶ä¸ç¨³å®šï¼ŒUIä¾ç„¶æµç•… ã€‚</p>
<hr/>
<h2 data-id="heading-15">å››ã€ä¸€æ¬¡å®Œæ•´çš„æ¸²æŸ“åˆæˆé—­ç¯ï¼ˆå…­æ­¥æ³•ï¼‰</h2>
<p>æŠŠä»¥ä¸Šç»„ä»¶ä¸²èµ·æ¥ï¼Œçœ‹ä¸€ä¸ªå…¸å‹å¸§çš„ç”Ÿå‘½å‘¨æœŸï¼š</p>
<p><strong>Step 1ï¼šç¡¬ä»¶å¿ƒè·³ï¼ˆVSync-appï¼‰</strong>
å±å¹•å‘å‡ºVSyncä¸­æ–­ -&gt; HWC HALæ•è· -&gt; SFçš„<code>EventThread</code>å”¤é†’ -&gt; é€šè¿‡<code>BitTube</code>è·¨è¿›ç¨‹é€šçŸ¥åº”ç”¨çš„<code>Choreographer</code> ã€‚</p>
<p><strong>Step 2ï¼šåº”ç”¨ç”Ÿäº§ï¼ˆä¸»çº¿ç¨‹+RenderThreadï¼‰</strong>
åº”ç”¨æ”¶åˆ°VSync-appï¼Œæ‰§è¡Œ<code>doTraversal()</code> -&gt; æµ‹é‡ã€å¸ƒå±€ã€ç»˜åˆ¶ -&gt; <strong>DisplayListè½¬OpenGLå‘½ä»¤</strong> -&gt; <code>eglSwapBuffers()</code>è§¦å‘ï¼š</p>
<ul>
<li><code>dequeueBuffer</code>ï¼šä»BufferQueueå–ç©ºé—²Bufferã€‚</li>
<li>GPUæ¸²æŸ“å¡«å……ã€‚</li>
<li><code>queueBuffer</code>ï¼šBufferå…¥é˜Ÿï¼ŒçŠ¶æ€ç½®ä¸ºQUEUEDï¼Œé€šè¿‡Binderå›è°ƒSFçš„<code>onFrameAvailable()</code>ï¼Œæ ‡è®°<code>mQueuedFrames++</code> ã€‚</li>
</ul>
<p><strong>Step 3ï¼šSFå”¤é†’ï¼ˆVSync-sfï¼‰</strong>
ç¡¬ä»¶å‘å‡ºVSync-sfï¼ˆæˆ–è½¯ä»¶å®šæ—¶è§¦å‘ï¼‰-&gt; SF MessageQueueæ”¶åˆ°æ¶ˆæ¯ -&gt; æ‰§è¡Œ<code>onMessageInvalidate()</code> -&gt; æ­£å¼å¯åŠ¨åˆæˆæµæ°´çº¿ ã€‚</p>
<p><strong>Step 4ï¼šå‡†å¤‡é˜¶æ®µï¼ˆPreComposition &amp; latchBufferï¼‰</strong></p>
<ul>
<li><code>preComposition()</code>ï¼šéå†æ‰€æœ‰Layerï¼Œæ£€æŸ¥<code>mQueuedFrames &gt; 0</code>ï¼Œæ ‡è®°éœ€è¦åˆ·æ–°çš„Layerã€‚</li>
<li><code>latchBuffer()</code>ï¼šå¯¹æ ‡è®°çš„Layerè°ƒç”¨<code>acquireBuffer()</code>ï¼Œæ‹¿åˆ°åº”ç”¨åˆšåˆšç”»å¥½çš„GraphicBufferï¼Œ<strong>æ‰€æœ‰æƒä»åº”ç”¨è½¬ç»™SF</strong> ã€‚</li>
</ul>
<p><strong>Step 5ï¼šåˆæˆå†³ç­–ï¼ˆhandleTransaction &amp; rebuildLayerStacks &amp; setUpHWComposerï¼‰</strong></p>
<ul>
<li><code>handleTransaction</code>ï¼šå¤„ç†çª—å£å¤§å°ã€ä½ç½®ã€Zè½´å˜åŒ– ã€‚</li>
<li><code>rebuildLayerStacks</code>ï¼šæŒ‰Zè½´æ’åºå½“å‰å±å¹•å¯è§Layerï¼Œè®¡ç®—æ¯ä¸ªLayerçš„è„åŒºåŸŸã€å¯è§åŒºåŸŸã€‚</li>
<li><code>setUpHWComposer</code>ï¼šè°ƒç”¨HWC <code>prepare()</code>ï¼Œ<strong>å†³ç­–å“ªäº›Layerç”¨ç¡¬ä»¶å ï¼Œå“ªäº›ç”¨GPUåˆæˆ</strong> ã€‚</li>
</ul>
<p><strong>Step 6ï¼šæ‰§è¡Œä¸é€æ˜¾ï¼ˆdoComposition &amp; postCompositionï¼‰</strong></p>
<ul>
<li>GPUåˆæˆéƒ¨åˆ†ï¼šSFé€šè¿‡OpenGLå°†é€‰ä¸­çš„Layerç»˜åˆ¶åˆ°ç›®æ ‡FBOã€‚</li>
<li>è°ƒç”¨HWC <code>set()</code>ï¼šå°†GPUåˆæˆç»“æœï¼ˆFramebufferï¼‰å’Œç¡¬ä»¶åˆæˆLayerçš„Bufferå¥æŸ„ä¸€å¹¶äº¤ç»™é©±åŠ¨ã€‚</li>
<li><strong>é‡Šæ”¾Fence</strong>ï¼šé€šçŸ¥åº”ç”¨ä¾§â€œBufferå·²è¢«æ¶ˆè´¹ï¼Œå¯ä»¥ç»§ç»­ç”»ä¸‹ä¸€å¸§â€ã€‚<code>releaseBuffer()</code> -&gt; BufferçŠ¶æ€å›FREEã€‚</li>
<li>å±å¹•åˆ·æ–°æ˜¾ç¤ºæ–°å¸§ã€‚</li>
</ul>
<p><strong>è‡³æ­¤ï¼Œä¸€å¸§ç»“æŸã€‚ä¸‹ä¸€å¸§ç”±ä¸‹ä¸€ä¸ªVSyncè§¦å‘ã€‚</strong> 16.6mså€’è®¡æ—¶é‡æ–°å¼€å§‹ã€‚</p>
<hr/>
<h2 data-id="heading-16">äº”ã€æ¶æ„æ¼”è¿›ï¼šä»ç¡¬ç¼–ç åˆ°é«˜åº¦æŠ½è±¡</h2>
<p>SFçš„æ¶æ„å¹¶éä¸€æˆä¸å˜ã€‚ç†è§£æ¼”è¿›å²æœ‰åŠ©äºè¯»æ‡‚è€ä»£ç ã€‚</p>








































<table><thead><tr><th>æ—¶æœŸ</th><th>å…³é”®å˜åŒ–</th><th>æŠ€æœ¯é©±åŠ¨</th></tr></thead><tbody><tr><td><strong>Android 1.x-4.0</strong></td><td>å•ç¼“å†²ã€CPUåˆæˆä¸ºä¸»</td><td>ç¡¬ä»¶å¼±ï¼ŒåŠŸèƒ½ç®€å•</td></tr><tr><td><strong>Android 4.1</strong></td><td><strong>Project Butter</strong>ï¼šå¼•å…¥VSyncã€ä¸‰ç¼“å†²ã€Choreographer</td><td>è§£å†³å¡é¡¿ã€æ‰å¸§</td></tr><tr><td><strong>Android 5.0</strong></td><td><strong>RenderThread</strong>ï¼šå°†ä¸»çº¿ç¨‹çš„OpenGLæ“ä½œç§»åˆ°å•ç‹¬çº¿ç¨‹</td><td>å‡å°‘ä¸»çº¿ç¨‹è´Ÿè½½ï¼Œæé«˜å“åº”</td></tr><tr><td><strong>Android 7.0</strong></td><td><strong>SurfaceViewåŒæ­¥ä¼˜åŒ–</strong>ã€HWC 2.0æ”¯æŒ</td><td>é…åˆVRã€å¤šå±æ˜¾ç¤º</td></tr><tr><td><strong>Android 8.x+</strong></td><td><strong>Treble</strong>ï¼šHALå±‚ç¨³å®šåŒ–ï¼›<strong>AIDLåŒ–</strong>ï¼ˆç±»ä¼¼AMSï¼‰</td><td>è§£è€¦Frameworkä¸å‚å•†å®ç°</td></tr><tr><td><strong>Android 12+</strong></td><td>å¯å˜åˆ·æ–°ç‡ï¼ˆVRRï¼‰ã€æ¸¸æˆæ¨¡å¼æ’å¸§</td><td>é«˜åˆ·å±æ™®åŠï¼Œè¿½æ±‚èƒ½æ•ˆæ¯”</td></tr></tbody></table>
<p><strong>å½“å‰è¶‹åŠ¿</strong>ï¼šSFè¶Šæ¥è¶Šåƒä¸€ä¸ª<strong>ç­–ç•¥åˆ†å‘å™¨</strong>ï¼Œå°†å…·ä½“åˆæˆå·¥ä½œä¸‹æ”¾ç»™HWCï¼Œè‡ªå·±ä¸“æ³¨äºçŠ¶æ€è·Ÿè¸ªå’ŒVSyncè°ƒåº¦ã€‚</p>
<hr/>
<h2 data-id="heading-17">å…­ã€å¼€å‘å±‚é¢çš„å¯ç¤ºï¼ˆå®æˆ˜ä»·å€¼ï¼‰</h2>
<p>ç†è§£äº†SFï¼Œä½ åœ¨åº”ç”¨å¼€å‘ä¸­çš„å¾ˆå¤šâ€œç„å­¦â€é—®é¢˜éƒ½ä¼šæœ‰æ ¹æœ¬æ€§è®¤çŸ¥ï¼š</p>
<p><strong>1. ä¸ºä»€ä¹ˆè¯´â€œä¸¢å¸§â€æœ¬è´¨æ˜¯SFæ²¡ç­‰åˆ°Bufferï¼Ÿ</strong></p>
<blockquote>
<p>å¦‚æœåº”ç”¨ä¸»çº¿ç¨‹å¡é¡¿ï¼ˆGCã€å¤æ‚å¸ƒå±€ï¼‰ï¼Œ<code>queueBuffer</code>å»¶è¿Ÿï¼ŒVSync-sfåˆ°æ¥æ—¶SFæ— æ–°å¸§å¯ç”¨ï¼Œ<strong>å±å¹•å¿…é¡»é‡å¤æ˜¾ç¤ºä¸Šä¸€å¸§</strong>ï¼Œè¿™å°±æ˜¯æ‰å¸§ï¼ˆJankï¼‰ã€‚</p>
</blockquote>
<p><strong>2. ä¸ºä»€ä¹ˆSurfaceViewæ’­æ”¾è§†é¢‘ä¸å¡UIï¼Ÿ</strong></p>
<blockquote>
<p>SurfaceViewæ‹¥æœ‰<strong>ç‹¬ç«‹çš„Surface</strong>ï¼Œå…¶BufferQueueç›´æ¥å…¥é˜ŸSFï¼Œ<strong>ä¸ç»è¿‡Viewå±‚çº§</strong>ï¼Œç»•è¿‡ä¸»çº¿ç¨‹å¤æ‚ç»˜åˆ¶é€»è¾‘ï¼ŒåŒæ—¶å¸¸é…HWCç¡¬ä»¶å å±‚ï¼Œæ•ˆç‡æé«˜ ã€‚</p>
</blockquote>
<p><strong>3. ä¸ºä»€ä¹ˆåŠ¨ç”»å¡é¡¿ä¼˜å…ˆæ€€ç–‘CPU/GPUï¼Œä½†æœ‰æ—¶æ˜¯SFè´Ÿè½½é«˜ï¼Ÿ</strong></p>
<blockquote>
<p>SFè™½ç„¶æ˜¯åˆæˆè€…ï¼Œä½†<strong>GPUåˆæˆéå¸¸è€—èµ„æº</strong>ã€‚å¦‚æœZè½´å±‚æ•°å¤ªå¤šã€HWCå å±‚ç”¨æ»¡ï¼ŒSFå›é€€GPUåˆæˆï¼Œå¯èƒ½é€ æˆGPUè¿‡è½½ã€SFä¸»çº¿ç¨‹è¶…æ—¶16.6msï¼Œå¯¼è‡´ä¸‹ä¸€å¸§å»¶è¿Ÿã€‚</p>
</blockquote>
<p><strong>4. ä¸ºä»€ä¹ˆåå°è¿›ç¨‹å¯èƒ½å½±å“å‰å°æµç•…åº¦ï¼Ÿ</strong></p>
<blockquote>
<p>SFçš„Layeråˆ—è¡¨åŒ…å«<strong>æ‰€æœ‰å¯è§/ä¸å¯è§çª—å£</strong>ã€‚åå°åº”ç”¨è‹¥æŒæœ‰çª—å£ï¼ˆå¦‚æ— ç•Œé¢çš„<code>WindowManager</code>æ‚¬æµ®çª—ï¼‰ï¼Œå…¶BufferQueueå³ä½¿æ— æ–°å¸§ï¼ŒLayerä»åœ¨åˆ—è¡¨ä¸­ã€‚æç«¯æƒ…å†µä¸‹å¤§é‡Layerå¯¼è‡´SF <code>rebuildLayerStacks</code>è€—æ—¶è¶…æ ‡ã€‚</p>
</blockquote>
<p><strong>5. ç»ˆæè°ƒè¯•å·¥å…·</strong></p>
<blockquote>
<pre><code class="hljs language-bash" lang="bash">adb shell dumpsys SurfaceFlinger
</code></pre>
<p>è¿™æ˜¯SFçš„<strong>æ ¸ç£å…±æŒ¯æŠ¥å‘Š</strong>ï¼Œèƒ½æŸ¥çœ‹æ¯ä¸€å±‚çš„Bufferç”³è¯·è®°å½•ã€æ‰å¸§ç»Ÿè®¡ã€HWCåˆæˆç­–ç•¥ã€GPUåˆæˆæ—¶é—´ã€‚<strong>åˆ†æå¡é¡¿çš„ç¬¬ä¸€ç°åœº</strong>ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-18">ç»“è¯­</h2>
<p>SurfaceFlingerå’ŒActivityManagerServiceæ˜¯Androidåº•å±‚æ¶æ„çš„<strong>é˜´é˜³ä¸¤é¢</strong>ã€‚AMSç»´ç³»ç€åº”ç”¨ä¸–ç•Œçš„â€œå­˜åœ¨ä¸æ—¶é—´â€ï¼ŒSFç»´ç³»ç€åƒç´ ä¸–ç•Œçš„â€œç©ºé—´ä¸æµåŠ¨â€ã€‚</p>
<p>æŠŠAMSå’ŒSFæ”¾åœ¨ä¸€èµ·ç†è§£ï¼Œä½ ä¼šå‘ç°Androidæ ¹æœ¬ä¸æ˜¯ä¸€ä¸ªâ€œå•è¿›ç¨‹UIåº“â€ï¼Œè€Œæ˜¯ä¸€ä¸ª<strong>åˆ†å¸ƒå¼ã€äº‹ä»¶é©±åŠ¨ã€ç¡¬ä»¶æ„ŸçŸ¥çš„å®æ—¶ç³»ç»Ÿ</strong>ã€‚UIæ¸²æŸ“ä¸æ˜¯å‡½æ•°çš„çº¿æ€§è°ƒç”¨ï¼Œè€Œæ˜¯<strong>å¤šä¸ªç‰¹æƒè¿›ç¨‹åœ¨ç¡¬ä»¶èŠ‚æ‹æŒ‡æŒ¥ä¸‹çš„ç¯ç¯ç›¸æ‰£</strong>ã€‚</p>
<p><strong>æ¯ä¸€å¸§çš„æµç•…ï¼Œéƒ½æ˜¯AMSã€WMSã€SFã€Appã€GPUã€Displayç¡¬ä»¶åœ¨16.6mså†…çš„å®Œç¾åˆå¥ã€‚</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[C++ä¸­çš„å¼•ç”¨ä¼ å‚å’ŒæŒ‡é’ˆä¼ å‚]]></title>    <link>https://juejin.cn/post/7605810996125253666</link>    <guid>https://juejin.cn/post/7605810996125253666</guid>    <pubDate>2026-02-13T03:35:55.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605810996125253666" data-draft-id="7605542907119108148" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="C++ä¸­çš„å¼•ç”¨ä¼ å‚å’ŒæŒ‡é’ˆä¼ å‚"/> <meta itemprop="keywords" content="C++"/> <meta itemprop="datePublished" content="2026-02-13T03:35:55.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="sTone87375"/> <meta itemprop="url" content="https://juejin.cn/user/2946346894764584"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            C++ä¸­çš„å¼•ç”¨ä¼ å‚å’ŒæŒ‡é’ˆä¼ å‚
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2946346894764584/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    sTone87375
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-13T03:35:55.000Z" title="Fri Feb 13 2026 03:35:55 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æ ¸å¿ƒæ¦‚å¿µå¯¹æ¯”</h2>

























<table><thead><tr><th>æ¦‚å¿µ</th><th>C++</th><th>å‰ç«¯ (JS/TS)</th></tr></thead><tbody><tr><td><strong>å€¼ä¼ é€’</strong></td><td>é»˜è®¤æ–¹å¼ï¼Œå®Œæ•´æ‹·è´</td><td>åŸºæœ¬ç±»å‹ (number, stringç­‰)</td></tr><tr><td><strong>å¼•ç”¨ä¼ é€’</strong></td><td>éœ€æ˜¾å¼ä½¿ç”¨ <code>&amp;</code> æˆ–æŒ‡é’ˆ</td><td>å¯¹è±¡ã€æ•°ç»„ã€å‡½æ•°ç­‰å¼•ç”¨ç±»å‹</td></tr><tr><td><strong>æŒ‡é’ˆä¼ é€’</strong></td><td>ä¼ é€’å†…å­˜åœ°å€</td><td>ç±»ä¼¼ä¼ é€’å¯¹è±¡çš„å¼•ç”¨</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-1">1. å€¼ä¼ é€’ï¼ˆé»˜è®¤ï¼‰- å®Œæ•´æ‹·è´</h2>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span>
<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;

<span class="hljs-keyword">struct</span> <span class="hljs-title class_">Point</span> {
    <span class="hljs-type">int</span> x, y;
    <span class="hljs-built_in">Point</span>(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b) : <span class="hljs-built_in">x</span>(a), <span class="hljs-built_in">y</span>(b) {
        cout &lt;&lt; <span class="hljs-string">"æ„é€ : ("</span> &lt;&lt; x &lt;&lt; <span class="hljs-string">","</span> &lt;&lt; y &lt;&lt; <span class="hljs-string">")"</span> &lt;&lt; endl;
    }
    <span class="hljs-built_in">Point</span>(<span class="hljs-type">const</span> Point&amp; p) : <span class="hljs-built_in">x</span>(p.x), <span class="hljs-built_in">y</span>(p.y) {
        cout &lt;&lt; <span class="hljs-string">"æ‹·è´æ„é€ : ("</span> &lt;&lt; x &lt;&lt; <span class="hljs-string">","</span> &lt;&lt; y &lt;&lt; <span class="hljs-string">")"</span> &lt;&lt; endl;
    }
    ~<span class="hljs-built_in">Point</span>() {
        cout &lt;&lt; <span class="hljs-string">"ææ„: ("</span> &lt;&lt; x &lt;&lt; <span class="hljs-string">","</span> &lt;&lt; y &lt;&lt; <span class="hljs-string">")"</span> &lt;&lt; endl;
    }
};

<span class="hljs-comment">// âŒ å€¼ä¼ é€’ï¼šå‘ç”Ÿå®Œæ•´æ‹·è´</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">byValue</span><span class="hljs-params">(Point p)</span> </span>{
    p.x = <span class="hljs-number">100</span>;  <span class="hljs-comment">// ä¿®æ”¹çš„æ˜¯å‰¯æœ¬ï¼Œä¸å½±å“åŸå¯¹è±¡</span>
    cout &lt;&lt; <span class="hljs-string">"å‡½æ•°å†…: ("</span> &lt;&lt; p.x &lt;&lt; <span class="hljs-string">","</span> &lt;&lt; p.y &lt;&lt; <span class="hljs-string">")"</span> &lt;&lt; endl;
}

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-function">Point <span class="hljs-title">p1</span><span class="hljs-params">(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>)</span></span>;
    cout &lt;&lt; <span class="hljs-string">"--- è°ƒç”¨å‡½æ•° ---"</span> &lt;&lt; endl;
    <span class="hljs-built_in">byValue</span>(p1);
    cout &lt;&lt; <span class="hljs-string">"--- å‡½æ•°è¿”å› ---"</span> &lt;&lt; endl;
    cout &lt;&lt; <span class="hljs-string">"åŸå¯¹è±¡: ("</span> &lt;&lt; p1.x &lt;&lt; <span class="hljs-string">","</span> &lt;&lt; p1.y &lt;&lt; <span class="hljs-string">")"</span> &lt;&lt; endl;  <span class="hljs-comment">// ä»æ˜¯ (1,2)</span>
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p><strong>è¾“å‡ºï¼š</strong></p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">æ„é€ : (1,2)</span>
--- è°ƒç”¨å‡½æ•° ---
<span class="hljs-section">æ‹·è´æ„é€ : (1,2)</span>
<span class="hljs-section">å‡½æ•°å†…: (100,2)</span>
<span class="hljs-section">ææ„: (100,2)</span>
--- å‡½æ•°è¿”å› ---
<span class="hljs-section">åŸå¯¹è±¡: (1,2)</span>
<span class="hljs-section">ææ„: (1,2)</span>
</code></pre>
<blockquote>
<p>âš ï¸ <strong>æ€§èƒ½é—®é¢˜</strong>ï¼šå¤§å¯¹è±¡ä¼šå‘ç”Ÿæ˜‚è´µçš„æ·±æ‹·è´</p>
</blockquote>
<hr/>
<h2 data-id="heading-2">2. å¼•ç”¨ä¼ é€’ï¼ˆç±»ä¼¼å‰ç«¯å¼•ç”¨ç±»å‹ï¼‰</h2>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// âœ… å¼•ç”¨ä¼ é€’ï¼šä¸æ‹·è´ï¼Œç›´æ¥æ“ä½œåŸå¯¹è±¡ï¼ˆç±»ä¼¼å‰ç«¯çš„å¯¹è±¡å¼•ç”¨ï¼‰</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">byReference</span><span class="hljs-params">(Point&amp; p)</span> </span>{
    p.x = <span class="hljs-number">100</span>;  <span class="hljs-comment">// ç›´æ¥ä¿®æ”¹åŸå¯¹è±¡ï¼</span>
    cout &lt;&lt; <span class="hljs-string">"å‡½æ•°å†…: ("</span> &lt;&lt; p.x &lt;&lt; <span class="hljs-string">","</span> &lt;&lt; p.y &lt;&lt; <span class="hljs-string">")"</span> &lt;&lt; endl;
}

<span class="hljs-comment">// âœ… const å¼•ç”¨ï¼šåªè¯»è®¿é—®ï¼Œä¸æ‹·è´ä¹Ÿä¸èƒ½ä¿®æ”¹</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">byConstReference</span><span class="hljs-params">(<span class="hljs-type">const</span> Point&amp; p)</span> </span>{
    <span class="hljs-comment">// p.x = 100;  // âŒ ç¼–è¯‘é”™è¯¯ï¼šä¸èƒ½ä¿®æ”¹constå¼•ç”¨</span>
    cout &lt;&lt; <span class="hljs-string">"åªè¯»è®¿é—®: ("</span> &lt;&lt; p.x &lt;&lt; <span class="hljs-string">","</span> &lt;&lt; p.y &lt;&lt; <span class="hljs-string">")"</span> &lt;&lt; endl;
}

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-function">Point <span class="hljs-title">p1</span><span class="hljs-params">(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>)</span></span>;
    
    cout &lt;&lt; <span class="hljs-string">"=== å¼•ç”¨ä¼ é€’ ==="</span> &lt;&lt; endl;
    <span class="hljs-built_in">byReference</span>(p1);
    cout &lt;&lt; <span class="hljs-string">"åŸå¯¹è±¡å·²è¢«ä¿®æ”¹: ("</span> &lt;&lt; p1.x &lt;&lt; <span class="hljs-string">","</span> &lt;&lt; p1.y &lt;&lt; <span class="hljs-string">")"</span> &lt;&lt; endl;  <span class="hljs-comment">// (100,2)</span>
    
    cout &lt;&lt; <span class="hljs-string">"\n=== constå¼•ç”¨ ==="</span> &lt;&lt; endl;
    <span class="hljs-built_in">byConstReference</span>(p1);
    
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p><strong>ä¸å‰ç«¯å¯¹æ¯”ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// JavaScript - å¯¹è±¡å¤©ç„¶æ˜¯å¼•ç”¨ä¼ é€’</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">modify</span>(<span class="hljs-params">obj</span>) {
    obj.<span class="hljs-property">x</span> = <span class="hljs-number">100</span>;  <span class="hljs-comment">// ç›´æ¥ä¿®æ”¹åŸå¯¹è±¡</span>
}
<span class="hljs-keyword">let</span> p = {<span class="hljs-attr">x</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">2</span>};
<span class="hljs-title function_">modify</span>(p);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(p.<span class="hljs-property">x</span>);  <span class="hljs-comment">// 100 âœ…</span>

<span class="hljs-comment">// C++ å¿…é¡»æ˜¾å¼åŠ  &amp; æ‰èƒ½å®ç°åŒæ ·æ•ˆæœ</span>
</code></pre>
<hr/>
<h2 data-id="heading-3">3. æŒ‡é’ˆä¼ é€’ï¼ˆCé£æ ¼ï¼Œæ›´çµæ´»ä½†å±é™©ï¼‰</h2>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// æŒ‡é’ˆä¼ é€’ï¼šä¼ é€’å†…å­˜åœ°å€</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">byPointer</span><span class="hljs-params">(Point* p)</span> </span>{
    <span class="hljs-keyword">if</span> (p != <span class="hljs-literal">nullptr</span>) {  <span class="hljs-comment">// å¿…é¡»æ£€æŸ¥ç©ºæŒ‡é’ˆï¼</span>
        p-&gt;x = <span class="hljs-number">200</span>;      <span class="hljs-comment">// ä½¿ç”¨ -&gt; è®¿é—®æˆå‘˜</span>
    }
}

<span class="hljs-comment">// æŒ‡é’ˆçš„constç‰ˆæœ¬</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">byConstPointer</span><span class="hljs-params">(<span class="hljs-type">const</span> Point* p)</span> </span>{
    <span class="hljs-comment">// p-&gt;x = 200;  // âŒ ä¸èƒ½ä¿®æ”¹</span>
    cout &lt;&lt; p-&gt;x &lt;&lt; endl;  <span class="hljs-comment">// âœ… å¯ä»¥è¯»å–</span>
}

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-function">Point <span class="hljs-title">p1</span><span class="hljs-params">(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>)</span></span>;
    
    <span class="hljs-built_in">byPointer</span>(&amp;p1);  <span class="hljs-comment">// å¿…é¡»å–åœ°å€</span>
    cout &lt;&lt; <span class="hljs-string">"ä¿®æ”¹å: ("</span> &lt;&lt; p1.x &lt;&lt; <span class="hljs-string">","</span> &lt;&lt; p1.y &lt;&lt; <span class="hljs-string">")"</span> &lt;&lt; endl;
    
    <span class="hljs-comment">// å¯ä»¥ä¼  nullptrï¼ˆè¿™æ˜¯ä¸å¼•ç”¨çš„é‡è¦åŒºåˆ«ï¼‰</span>
    <span class="hljs-built_in">byPointer</span>(<span class="hljs-literal">nullptr</span>);  <span class="hljs-comment">// âœ… åˆæ³•</span>
    
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p><strong>å¼•ç”¨ vs æŒ‡é’ˆå¯¹æ¯”ï¼š</strong></p>






























<table><thead><tr><th>ç‰¹æ€§</th><th>å¼•ç”¨ <code>&amp;</code></th><th>æŒ‡é’ˆ <code>*</code></th></tr></thead><tbody><tr><td>è¯­æ³•</td><td>æ›´ç®€æ´ï¼ŒåƒåŸå¯¹è±¡</td><td>éœ€è§£å¼•ç”¨ <code>-&gt;</code> æˆ– <code>*</code></td></tr><tr><td>ç©ºå€¼</td><td>ä¸èƒ½ä¸º null</td><td>å¯ä»¥ä¸º nullptr</td></tr><tr><td>é‡æ–°ç»‘å®š</td><td>ä¸èƒ½æ”¹æŒ‡å‘å…¶ä»–å¯¹è±¡</td><td>å¯ä»¥æŒ‡å‘ä¸åŒå¯¹è±¡</td></tr><tr><td>å®‰å…¨æ€§</td><td>æ›´é«˜ï¼ˆå¿…é¡»åˆå§‹åŒ–ï¼‰</td><td>éœ€æ£€æŸ¥ç©ºæŒ‡é’ˆ</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-4">4. è¿”å›å€¼ä¼˜åŒ–ï¼ˆRVOï¼‰ä¸ç§»åŠ¨è¯­ä¹‰</h2>
<h3 data-id="heading-5">ä¼ ç»Ÿè¿”å›å€¼ï¼ˆæœ‰æ‹·è´ï¼‰</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// âŒ C++11å‰ï¼šè¿”å›æ—¶ä¼šå‘ç”Ÿæ‹·è´ï¼ˆæˆ–ç¼–è¯‘å™¨RVOä¼˜åŒ–ï¼‰</span>
<span class="hljs-function">Point <span class="hljs-title">createPoint</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-function">Point <span class="hljs-title">p</span><span class="hljs-params">(<span class="hljs-number">3</span>, <span class="hljs-number">4</span>)</span></span>;
    <span class="hljs-keyword">return</span> p;  <span class="hljs-comment">// ç†è®ºä¸Šä¼šæ‹·è´ï¼Œä½†ç¼–è¯‘å™¨é€šå¸¸ä¼˜åŒ–æ‰</span>
}

<span class="hljs-comment">// æ¥æ”¶æ—¶å†æ¬¡æ‹·è´</span>
Point p2 = <span class="hljs-built_in">createPoint</span>();
</code></pre>
<h3 data-id="heading-6">ç°ä»£C++ï¼šç§»åŠ¨è¯­ä¹‰ï¼ˆC++11èµ·ï¼‰</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">BigData</span> {
    <span class="hljs-type">int</span>* data;
    <span class="hljs-type">size_t</span> size;
    
    <span class="hljs-comment">// ç§»åŠ¨æ„é€ å‡½æ•°ï¼ˆè½¬ç§»èµ„æºæ‰€æœ‰æƒï¼Œä¸æ‹·è´æ•°æ®ï¼‰</span>
    <span class="hljs-built_in">BigData</span>(BigData&amp;&amp; other) <span class="hljs-keyword">noexcept</span> 
        : <span class="hljs-built_in">data</span>(other.data), <span class="hljs-built_in">size</span>(other.size) {
        cout &lt;&lt; <span class="hljs-string">"ç§»åŠ¨æ„é€ ï¼ˆå·èµ„æºï¼‰"</span> &lt;&lt; endl;
        other.data = <span class="hljs-literal">nullptr</span>;  <span class="hljs-comment">// ç½®ç©ºæºå¯¹è±¡</span>
        other.size = <span class="hljs-number">0</span>;
    }
    
    <span class="hljs-comment">// ç§»åŠ¨èµ‹å€¼</span>
    BigData&amp; <span class="hljs-keyword">operator</span>=(BigData&amp;&amp; other) <span class="hljs-keyword">noexcept</span> {
        cout &lt;&lt; <span class="hljs-string">"ç§»åŠ¨èµ‹å€¼"</span> &lt;&lt; endl;
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span> != &amp;other) {
            <span class="hljs-keyword">delete</span>[] data;
            data = other.data;
            size = other.size;
            other.data = <span class="hljs-literal">nullptr</span>;
        }
        <span class="hljs-keyword">return</span> *<span class="hljs-keyword">this</span>;
    }
};

<span class="hljs-function">BigData <span class="hljs-title">createBigData</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-function">BigData <span class="hljs-title">bd</span><span class="hljs-params">(<span class="hljs-number">1000000</span>)</span></span>;  <span class="hljs-comment">// åˆ†é…å¤§é‡å†…å­˜</span>
    <span class="hljs-keyword">return</span> bd;  <span class="hljs-comment">// è§¦å‘ç§»åŠ¨è¯­ä¹‰ï¼Œè€Œéæ·±æ‹·è´ï¼</span>
}

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    BigData bd1 = <span class="hljs-built_in">createBigData</span>();  <span class="hljs-comment">// ç§»åŠ¨æ„é€ ï¼Œå‡ ä¹é›¶å¼€é”€</span>
    BigData bd2;
    bd2 = <span class="hljs-built_in">createBigData</span>();          <span class="hljs-comment">// ç§»åŠ¨èµ‹å€¼</span>
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<hr/>
<h2 data-id="heading-7">5. æœ€ä½³å®è·µæ€»ç»“</h2>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// âœ… æœ€ä½³å®è·µé€ŸæŸ¥è¡¨</span>

<span class="hljs-comment">// 1. å°å¯¹è±¡ï¼ˆint, double, å°ç»“æ„ä½“ï¼‰ï¼šç›´æ¥å€¼ä¼ é€’</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">f</span><span class="hljs-params">(<span class="hljs-type">int</span> x, Point p)</span></span>;  

<span class="hljs-comment">// 2. å¤§å¯¹è±¡åªè¯»è®¿é—®ï¼šconst å¼•ç”¨ï¼ˆæ€§èƒ½+å®‰å…¨ï¼‰</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">process</span><span class="hljs-params">(<span class="hljs-type">const</span> BigData&amp; data)</span></span>;

<span class="hljs-comment">// 3. éœ€è¦ä¿®æ”¹åŸå¯¹è±¡ï¼šéconstå¼•ç”¨</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">modify</span><span class="hljs-params">(Point&amp; p)</span></span>;

<span class="hljs-comment">// 4. å‚æ•°å¯é€‰ï¼ˆå¯èƒ½ä¸ºç©ºï¼‰ï¼šæŒ‡é’ˆ</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">maybeProcess</span><span class="hljs-params">(BigData* data)</span></span>;  <span class="hljs-comment">// dataå¯ä»¥æ˜¯nullptr</span>

<span class="hljs-comment">// 5. è½¬ç§»æ‰€æœ‰æƒï¼ˆC++11ï¼‰ï¼šå³å€¼å¼•ç”¨</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">takeOwnership</span><span class="hljs-params">(BigData&amp;&amp; data)</span></span>;

<span class="hljs-comment">// 6. è¿”å›å€¼ï¼šä¼˜å…ˆè¿”å›å€¼ï¼ˆä¾èµ–RVO/ç§»åŠ¨ï¼‰ï¼Œè€Œéè¾“å‡ºå‚æ•°</span>
<span class="hljs-function">BigData <span class="hljs-title">create</span><span class="hljs-params">()</span></span>;  <span class="hljs-comment">// âœ… ç°ä»£C++æ¨è</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">create</span><span class="hljs-params">(BigData&amp; out)</span></span>;  <span class="hljs-comment">// æ—§å¼é£æ ¼ï¼Œé¿å…</span>
</code></pre>
<hr/>
<h2 data-id="heading-8">ç±»æ¯”æ€»ç»“</h2>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// C++ æ˜¾å¼æ§åˆ¶ä¼ é€’æ–¹å¼</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">f</span><span class="hljs-params">(Point p)</span></span>;      <span class="hljs-comment">// å€¼ä¼ é€’ï¼ˆæ‹·è´ï¼‰    â† åƒ JS çš„ structuredClone</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">f</span><span class="hljs-params">(Point&amp; p)</span></span>;     <span class="hljs-comment">// å¼•ç”¨ä¼ é€’ï¼ˆåˆ«åï¼‰   â† åƒ JS çš„å¯¹è±¡å¼•ç”¨</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">f</span><span class="hljs-params">(<span class="hljs-type">const</span> Point&amp; p)</span></span>; <span class="hljs-comment">// constå¼•ç”¨       â† åƒ JS çš„åªè¯»å¼•ç”¨</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">f</span><span class="hljs-params">(Point* p)</span></span>;     <span class="hljs-comment">// æŒ‡é’ˆä¼ é€’         â† åƒ JS çš„å¼±å¼•ç”¨/å¯ç©ºå¼•ç”¨</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">f</span><span class="hljs-params">(Point&amp;&amp; p)</span></span>;    <span class="hljs-comment">// å³å€¼å¼•ç”¨ï¼ˆç§»åŠ¨ï¼‰   â† åƒ JS çš„ å¯¹è±¡è½¬ç§»/è§£æ„èµ‹å€¼</span>
</code></pre>
<p><strong>å…³é”®åŒºåˆ«</strong>ï¼šC++ é»˜è®¤æ˜¯<strong>å€¼è¯­ä¹‰</strong>ï¼ˆæ‹·è´ï¼‰ï¼Œå¿…é¡»æ˜¾å¼ä½¿ç”¨ <code>&amp;</code> æ‰èƒ½è·å¾—<strong>å¼•ç”¨è¯­ä¹‰</strong>ï¼›è€Œå‰ç«¯ï¼ˆJSï¼‰å¯¹è±¡é»˜è®¤å°±æ˜¯<strong>å¼•ç”¨è¯­ä¹‰</strong>ã€‚</p>
<hr/>
<p>ä»¥ä¸‹æ·±å…¥å‰–æ C++ ä¸­å¼•ç”¨ä¼ é€’å’ŒæŒ‡é’ˆä¼ é€’çš„æœ¬è´¨å·®å¼‚ã€‚</p>
<h2 data-id="heading-9">æ ¸å¿ƒå¯¹æ¯”è¡¨</h2>








































<table><thead><tr><th>ç»´åº¦</th><th>å¼•ç”¨ä¼ é€’ <code>T&amp;</code></th><th>æŒ‡é’ˆä¼ é€’ <code>T*</code></th></tr></thead><tbody><tr><td><strong>æœ¬è´¨</strong></td><td>åˆ«åï¼ˆaliasï¼‰ï¼Œå¿…é¡»ç»‘å®šæœ‰æ•ˆå¯¹è±¡</td><td>å†…å­˜åœ°å€ï¼Œå¯ç‹¬ç«‹å­˜åœ¨</td></tr><tr><td><strong>ç©ºå€¼</strong></td><td>âŒ ä¸èƒ½ä¸º null</td><td>âœ… å¯ä»¥ä¸º <code>nullptr</code></td></tr><tr><td><strong>é‡æ–°ç»‘å®š</strong></td><td>âŒ ç»ˆèº«ç»‘å®šï¼Œä¸èƒ½æ”¹æŒ‡å‘</td><td>âœ… å¯éšæ—¶æŒ‡å‘å…¶ä»–å¯¹è±¡</td></tr><tr><td><strong>è¯­æ³•</strong></td><td>ä½¿ç”¨åŸå¯¹è±¡è¯­æ³• <code>.</code></td><td>éœ€è§£å¼•ç”¨ <code>-&gt;</code> æˆ– <code>*</code></td></tr><tr><td><strong>åˆå§‹åŒ–</strong></td><td>å¿…é¡»åˆå§‹åŒ–</td><td>å¯ä»¥å»¶è¿Ÿåˆå§‹åŒ–</td></tr><tr><td><strong>å†…å­˜å ç”¨</strong></td><td>é€šå¸¸ä¼˜åŒ–ä¸ºæ— å¼€é”€</td><td>å ç”¨æŒ‡é’ˆå¤§å°ï¼ˆ4/8å­—èŠ‚ï¼‰</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-10">æœ¬è´¨å·®å¼‚å›¾è§£</h2>
<pre><code class="hljs language-scss" lang="scss">å¼•ç”¨ (&amp;)                    æŒ‡é’ˆ (*)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å¼•ç”¨å˜é‡  â”‚ â”€â”€â†’ å¯¹è±¡      â”‚ æŒ‡é’ˆå˜é‡  â”‚ â”€â”€â†’ å¯¹è±¡
â”‚  (åˆ«å)   â”‚   (å¿…é¡»å­˜åœ¨)   â”‚ (åœ°å€)   â”‚   æˆ– â”€â”€â†’ nullptr
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   è¯­æ³•ç³–ï¼Œç¼–è¯‘å™¨å¤„ç†           çœŸæ­£çš„å†…å­˜å®ä½“
</code></pre>
<hr/>
<h2 data-id="heading-11">ä»£ç å±‚é¢æ·±åº¦å¯¹æ¯”</h2>
<h3 data-id="heading-12">1. åŸºç¡€è¯­æ³•å·®å¼‚</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span>
<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;

<span class="hljs-keyword">struct</span> <span class="hljs-title class_">Config</span> {
    <span class="hljs-type">int</span> port;
    string host;
};

<span class="hljs-comment">// ========== å¼•ç”¨ç‰ˆæœ¬ ==========</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">setupByRef</span><span class="hljs-params">(Config&amp; cfg)</span> </span>{
    <span class="hljs-comment">// è¯­æ³•ï¼šç›´æ¥ä½¿ç”¨å¯¹è±¡</span>
    cfg.port = <span class="hljs-number">8080</span>;
    cfg.host = <span class="hljs-string">"localhost"</span>;
    
    <span class="hljs-comment">// âŒ ä¸èƒ½æ£€æŸ¥æ˜¯å¦ä¸ºç©ºï¼ˆå‡è®¾ä¸€å®šå­˜åœ¨ï¼‰</span>
    <span class="hljs-comment">// if (&amp;cfg == nullptr) {}  // æ— æ„ä¹‰ï¼Œå¼•ç”¨ä¸èƒ½ä¸ºnull</span>
}

<span class="hljs-comment">// ========== æŒ‡é’ˆç‰ˆæœ¬ ==========</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">setupByPtr</span><span class="hljs-params">(Config* cfg)</span> </span>{
    <span class="hljs-comment">// è¯­æ³•ï¼šå¿…é¡»å…ˆæ£€æŸ¥ç©ºæŒ‡é’ˆ</span>
    <span class="hljs-keyword">if</span> (cfg == <span class="hljs-literal">nullptr</span>) {
        cerr &lt;&lt; <span class="hljs-string">"é”™è¯¯ï¼šé…ç½®ä¸ºç©º"</span> &lt;&lt; endl;
        <span class="hljs-keyword">return</span>;
    }
    
    <span class="hljs-comment">// è§£å¼•ç”¨æ–¹å¼1ï¼š-&gt;</span>
    cfg-&gt;port = <span class="hljs-number">8080</span>;
    
    <span class="hljs-comment">// è§£å¼•ç”¨æ–¹å¼2ï¼š*ï¼ˆè·å–å¼•ç”¨åå†ç”¨.ï¼‰</span>
    (*cfg).host = <span class="hljs-string">"localhost"</span>;
}

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    Config c{<span class="hljs-number">0</span>, <span class="hljs-string">""</span>};
    
    <span class="hljs-comment">// å¼•ç”¨è°ƒç”¨ï¼šç®€å•ç›´æ¥</span>
    <span class="hljs-built_in">setupByRef</span>(c);
    
    <span class="hljs-comment">// æŒ‡é’ˆè°ƒç”¨ï¼šå¿…é¡»å–åœ°å€</span>
    <span class="hljs-built_in">setupByPtr</span>(&amp;c);
    <span class="hljs-built_in">setupByPtr</span>(<span class="hljs-literal">nullptr</span>);  <span class="hljs-comment">// âœ… å¯ä»¥ä¼ ç©ºï¼Œå‡½æ•°å†…éƒ¨å¤„ç†</span>
    
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<h3 data-id="heading-13">2. é‡æ–°ç»‘å®šèƒ½åŠ›ï¼ˆå…³é”®å·®å¼‚ï¼‰</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">demonstrateRebinding</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-type">int</span> a = <span class="hljs-number">10</span>, b = <span class="hljs-number">20</span>;
    
    <span class="hljs-comment">// ========== å¼•ç”¨ï¼šç»ˆèº«ç»‘å®š ==========</span>
    <span class="hljs-type">int</span>&amp; ref = a;
    ref = b;      <span class="hljs-comment">// âŒ è¿™ä¸æ˜¯è®©refæŒ‡å‘bï¼è€Œæ˜¯æŠŠbçš„å€¼èµ‹ç»™a</span>
                  <span class="hljs-comment">// ç»“æœï¼ša = 20, refä»æ˜¯açš„åˆ«å</span>
    
    <span class="hljs-comment">// æƒ³æ”¹æŒ‡å‘ï¼Ÿä¸å¯èƒ½ï¼</span>
    <span class="hljs-comment">// &amp;ref = b;   // ç¼–è¯‘é”™è¯¯ï¼</span>
    
    <span class="hljs-comment">// ========== æŒ‡é’ˆï¼šçµæ´»é‡å®šå‘ ==========</span>
    <span class="hljs-type">int</span>* ptr = &amp;a;
    cout &lt;&lt; *ptr;  <span class="hljs-comment">// 10</span>
    
    ptr = &amp;b;      <span class="hljs-comment">// âœ… éšæ—¶æ”¹æŒ‡å‘</span>
    cout &lt;&lt; *ptr;  <span class="hljs-comment">// 20</span>
    
    ptr = <span class="hljs-literal">nullptr</span>; <span class="hljs-comment">// âœ… å¯ä»¥æŒ‡å‘ç©º</span>
}
</code></pre>
<h3 data-id="heading-14">3. å¤šçº§é—´æ¥è®¿é—®</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// æŒ‡é’ˆå¯ä»¥æŒ‡å‘æŒ‡é’ˆï¼Œå¼•ç”¨ä¸è¡Œ</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">pointerChain</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-type">int</span> x = <span class="hljs-number">42</span>;
    <span class="hljs-type">int</span>* p = &amp;x;
    <span class="hljs-type">int</span>** pp = &amp;p;      <span class="hljs-comment">// âœ… æŒ‡é’ˆçš„æŒ‡é’ˆ</span>
    <span class="hljs-type">int</span>*** ppp = &amp;pp;   <span class="hljs-comment">// âœ… å¯ä»¥æ— é™å¥—å¨ƒ</span>
    
    cout &lt;&lt; ***ppp;     <span class="hljs-comment">// 42</span>
    
    <span class="hljs-comment">// å¼•ç”¨åªæœ‰ä¸€çº§ï¼ˆå¼•ç”¨çš„å¼•ç”¨è¢«æŠ˜å ï¼‰</span>
    <span class="hljs-type">int</span>&amp; r = x;
    <span class="hljs-comment">// int&amp;&amp; rr = r;    // è¿™æ˜¯å³å€¼å¼•ç”¨ï¼Œä¸æ˜¯å¼•ç”¨çš„å¼•ç”¨ï¼</span>
}
</code></pre>
<hr/>
<h2 data-id="heading-15">æœ¬è´¨å·®å¼‚ï¼šç¼–è¯‘å™¨è§†è§’</h2>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// æºä»£ç </span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">byRef</span><span class="hljs-params">(<span class="hljs-type">int</span>&amp; r)</span> </span>{ r = <span class="hljs-number">10</span>; }
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">byPtr</span><span class="hljs-params">(<span class="hljs-type">int</span>* p)</span> </span>{ *p = <span class="hljs-number">10</span>; }

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-type">int</span> x = <span class="hljs-number">5</span>;
    <span class="hljs-built_in">byRef</span>(x);
    <span class="hljs-built_in">byPtr</span>(&amp;x);
}
</code></pre>
<p><strong>ç¼–è¯‘åçš„ä¼ªä»£ç ï¼š</strong></p>
<pre><code class="hljs language-asm" lang="asm">; å¼•ç”¨ç‰ˆæœ¬ï¼ˆç¼–è¯‘å™¨ä¼˜åŒ–åï¼Œä¸æŒ‡é’ˆç›¸åŒï¼‰
byRef:
    mov eax, [esp+4]    ; å–åœ°å€ï¼ˆä¸æŒ‡é’ˆä¸€æ ·ï¼ï¼‰
    mov dword [eax], 10 ; è§£å¼•ç”¨èµ‹å€¼
    
; æŒ‡é’ˆç‰ˆæœ¬
byPtr:
    mov eax, [esp+4]    ; å–åœ°å€
    test eax, eax       ; âœ… æ£€æŸ¥ç©ºæŒ‡é’ˆï¼ˆç¼–è¯‘å™¨å¯èƒ½ä¼˜åŒ–æ‰ï¼‰
    je .null_handler
    mov dword [eax], 10
    
; ç»“è®ºï¼šå¼•ç”¨æ˜¯æŒ‡é’ˆçš„è¯­æ³•ç³–ï¼Œä½†ç¼–è¯‘å™¨ä¿è¯éç©º
</code></pre>
<blockquote>
<p><strong>æœ¬è´¨çœŸç›¸</strong>ï¼šå¼•ç”¨åœ¨åº•å±‚<strong>å°±æ˜¯æŒ‡é’ˆ</strong>ï¼Œä½†ç¼–è¯‘å™¨æ·»åŠ äº†<strong>éç©ºçº¦æŸ</strong>å’Œ<strong>è‡ªåŠ¨è§£å¼•ç”¨</strong>çš„è¯­æ³•ç³–ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-16">é€‚ç”¨åœºæ™¯è¯¦è§£</h2>
<h3 data-id="heading-17">âœ… å¼•ç”¨ä¼ é€’é€‚ç”¨åœºæ™¯</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// åœºæ™¯1ï¼šå‚æ•°å¿…é¡»å­˜åœ¨ï¼ˆä¸šåŠ¡é€»è¾‘è¦æ±‚ï¼‰</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">connectDatabase</span><span class="hljs-params">(<span class="hljs-type">const</span> ConnectionConfig&amp; config)</span> </span>{
    <span class="hljs-comment">// é…ç½®å¿…é¡»æä¾›ï¼Œä¸å­˜åœ¨"æ— é…ç½®"çš„æƒ…å†µ</span>
    <span class="hljs-comment">// æ— éœ€æ£€æŸ¥ç©ºï¼Œç®€åŒ–ä»£ç </span>
}

<span class="hljs-comment">// åœºæ™¯2ï¼šæ“ä½œç¬¦é‡è½½ï¼ˆåªèƒ½ç”¨å¼•ç”¨ï¼‰</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Vector</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-comment">// å¿…é¡»è¿”å›å¼•ç”¨æ‰èƒ½é“¾å¼èµ‹å€¼ï¼šv1 = v2 = v3</span>
    Vector&amp; <span class="hljs-keyword">operator</span>=(<span class="hljs-type">const</span> Vector&amp; other) {
        <span class="hljs-comment">// ...</span>
        <span class="hljs-keyword">return</span> *<span class="hljs-keyword">this</span>;  <span class="hljs-comment">// è§£å¼•ç”¨è¿”å›å¼•ç”¨</span>
    }
    
    <span class="hljs-comment">// ä¸‹æ ‡è¿ç®—ç¬¦</span>
    <span class="hljs-type">int</span>&amp; <span class="hljs-keyword">operator</span>[](<span class="hljs-type">size_t</span> index) {
        <span class="hljs-keyword">return</span> data[index];  <span class="hljs-comment">// å¿…é¡»è¿”å›å¼•ç”¨æ‰èƒ½ï¼šv[0] = 10</span>
    }
};

<span class="hljs-comment">// åœºæ™¯3ï¼šå‡½æ•°å¼ç¼–ç¨‹é£æ ¼ï¼ˆæ˜ç¡®æ‰€æœ‰æƒï¼‰</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">sort</span><span class="hljs-params">(vector&lt;<span class="hljs-type">int</span>&gt;&amp; data)</span></span>;           <span class="hljs-comment">// ä¿®æ”¹åŸæ•°æ®</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">print</span><span class="hljs-params">(<span class="hljs-type">const</span> vector&lt;<span class="hljs-type">int</span>&gt;&amp; data)</span></span>;    <span class="hljs-comment">// åªè¯»è®¿é—®</span>
</code></pre>
<h3 data-id="heading-18">âœ… æŒ‡é’ˆä¼ é€’é€‚ç”¨åœºæ™¯</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// åœºæ™¯1ï¼šå‚æ•°å¯é€‰ï¼ˆå¯ä¸ºç©ºï¼‰</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">logMessage</span><span class="hljs-params">(<span class="hljs-type">const</span> string* prefix = <span class="hljs-literal">nullptr</span>)</span> </span>{
    <span class="hljs-keyword">if</span> (prefix) {
        cout &lt;&lt; <span class="hljs-string">"["</span> &lt;&lt; *prefix &lt;&lt; <span class="hljs-string">"] "</span>;
    }
    cout &lt;&lt; <span class="hljs-string">"æ—¥å¿—å†…å®¹"</span> &lt;&lt; endl;
}
<span class="hljs-comment">// è°ƒç”¨ï¼šlogMessage(); æˆ– logMessage(&amp;debugTag);</span>

<span class="hljs-comment">// åœºæ™¯2ï¼šåŠ¨æ€å†…å­˜ç®¡ç†ï¼ˆæ‰€æœ‰æƒè½¬ç§»ï¼‰</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">processLargeFile</span><span class="hljs-params">(unique_ptr&lt;FileData&gt;* filePtr)</span> </span>{
    <span class="hljs-comment">// å¯èƒ½è½¬ç§»æ‰€æœ‰æƒï¼Œæˆ–é‡Šæ”¾å†…å­˜</span>
    <span class="hljs-keyword">if</span> (filePtr &amp;&amp; *filePtr) {
        <span class="hljs-keyword">auto</span> data = std::<span class="hljs-built_in">move</span>(*filePtr);  <span class="hljs-comment">// æ¥ç®¡æ‰€æœ‰æƒ</span>
        <span class="hljs-comment">// filePtr ç°åœ¨æŒ‡å‘ç©ºunique_ptr</span>
    }
}

<span class="hljs-comment">// åœºæ™¯3ï¼šCæ¥å£å…¼å®¹/å¤šæ€æ•°ç»„</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">drawShapes</span><span class="hljs-params">(Shape** shapes, <span class="hljs-type">size_t</span> count)</span> </span>{
    <span class="hljs-comment">// æŒ‡é’ˆæ•°ç»„ï¼Œæ”¯æŒè¿è¡Œæ—¶å¤šæ€</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-type">size_t</span> i = <span class="hljs-number">0</span>; i &lt; count; ++i) {
        shapes[i]-&gt;<span class="hljs-built_in">draw</span>();  <span class="hljs-comment">// è™šå‡½æ•°è°ƒç”¨</span>
    }
}

<span class="hljs-comment">// åœºæ™¯4ï¼šéœ€è¦é‡æ–°æŒ‡å‘ï¼ˆè¿­ä»£ã€éå†ï¼‰</span>
<span class="hljs-function">Node* <span class="hljs-title">findNode</span><span class="hljs-params">(Node* head, <span class="hljs-type">int</span> value)</span> </span>{
    Node* current = head;      <span class="hljs-comment">// ä»headå¼€å§‹</span>
    <span class="hljs-keyword">while</span> (current) {
        <span class="hljs-keyword">if</span> (current-&gt;val == value) <span class="hljs-keyword">return</span> current;
        current = current-&gt;next;  <span class="hljs-comment">// âœ… æŒ‡é’ˆå¯ä»¥éå†</span>
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">nullptr</span>;
}
<span class="hljs-comment">// å¦‚æœç”¨å¼•ç”¨ï¼šNode&amp; current = head; current = ... ä¼šä¿®æ”¹åŸheadï¼</span>
</code></pre>
<hr/>
<h2 data-id="heading-19">ç°ä»£C++çš„æœ€ä½³å®è·µ</h2>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// ğŸ† å‚æ•°ä¼ é€’å†³ç­–æ ‘</span>

<span class="hljs-comment">// 1. å°å¯¹è±¡ï¼ˆ&lt;= 2ä¸ªæŒ‡é’ˆå¤§å°ï¼‰ï¼šå€¼ä¼ é€’</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">f</span><span class="hljs-params">(<span class="hljs-type">int</span> x, Point p)</span></span>;

<span class="hljs-comment">// 2. åªè¯»å¤§å¯¹è±¡ï¼šconst å¼•ç”¨ï¼ˆé¦–é€‰ï¼‰</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">process</span><span class="hljs-params">(<span class="hljs-type">const</span> BigData&amp; data)</span></span>;

<span class="hljs-comment">// 3. å¿…é¡»ä¿®æ”¹åŸå¯¹è±¡ï¼šéconst å¼•ç”¨</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">modify</span><span class="hljs-params">(Config&amp; cfg)</span></span>;

<span class="hljs-comment">// 4. å‚æ•°å¯é€‰/å¯ä¸ºç©ºï¼šæŒ‡é’ˆ</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">render</span><span class="hljs-params">(<span class="hljs-type">const</span> Camera* cam = <span class="hljs-literal">nullptr</span>)</span></span>;

<span class="hljs-comment">// 5. è½¬ç§»æ‰€æœ‰æƒï¼ˆC++11ï¼‰ï¼šå³å€¼å¼•ç”¨</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">consume</span><span class="hljs-params">(vector&lt;<span class="hljs-type">int</span>&gt;&amp;&amp; data)</span></span>;

<span class="hljs-comment">// 6. åŠ¨æ€æ•°ç»„/å¤šæ€ï¼šæ™ºèƒ½æŒ‡é’ˆ</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">loadModel</span><span class="hljs-params">(shared_ptr&lt;Mesh&gt; mesh)</span></span>;      <span class="hljs-comment">// å…±äº«æ‰€æœ‰æƒ</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">takeData</span><span class="hljs-params">(unique_ptr&lt;Buffer&gt; buffer)</span></span>;   <span class="hljs-comment">// ç‹¬å æ‰€æœ‰æƒ</span>
</code></pre>
<hr/>
<h2 data-id="heading-20">ä¸€å¥è¯æ€»ç»“</h2>
<blockquote>
<p><strong>å¼•ç”¨æ˜¯"æ‰¿è¯ºå­˜åœ¨çš„åˆ«å"ï¼ŒæŒ‡é’ˆæ˜¯"å¯èƒ½ä¸ºç©ºçš„åœ°å€"ã€‚</strong></p>
<p>ç”¨å¼•ç”¨è¡¨è¾¾<strong>å¥‘çº¦</strong>ï¼ˆå¿…é¡»å­˜åœ¨ï¼‰ï¼Œç”¨æŒ‡é’ˆè¡¨è¾¾<strong>å¯é€‰æ€§</strong>ï¼ˆå¯èƒ½ä¸ºç©ºï¼‰ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‰ç«¯ä¾¦æ¢ï¼šæˆ‘æ˜¯å¦‚ä½•æŒ–æ˜å‡ºç½‘ç«™é‡Œ 28 ä¸ª"éšè—å•†å“"çš„ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7605816833191641088</link>    <guid>https://juejin.cn/post/7605816833191641088</guid>    <pubDate>2026-02-13T03:36:08.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605816833191641088" data-draft-id="7605772919224778786" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‰ç«¯ä¾¦æ¢ï¼šæˆ‘æ˜¯å¦‚ä½•æŒ–æ˜å‡ºç½‘ç«™é‡Œ 28 ä¸ª&quot;éšè—å•†å“&quot;çš„ï¼Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯,Vue.js"/> <meta itemprop="datePublished" content="2026-02-13T03:36:08.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°å†°çƒ"/> <meta itemprop="url" content="https://juejin.cn/user/2014722836669176"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‰ç«¯ä¾¦æ¢ï¼šæˆ‘æ˜¯å¦‚ä½•æŒ–æ˜å‡ºç½‘ç«™é‡Œ 28 ä¸ª"éšè—å•†å“"çš„ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2014722836669176/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°å†°çƒ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-13T03:36:08.000Z" title="Fri Feb 13 2026 03:36:08 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰ç«¯ä¾¦æ¢ï¼šæˆ‘æ˜¯å¦‚ä½•æŒ–æ˜å‡ºç½‘ç«™é‡Œ 28 ä¸ª"éšè—å•†å“"çš„ï¼Ÿ</h2>
<blockquote>
<p><strong>å…è´£å£°æ˜</strong>ï¼šæœ¬æ–‡ä»…ä¾›æŠ€æœ¯äº¤æµä¸å­¦ä¹ ï¼Œè¯·å‹¿åˆ©ç”¨æ–‡ä¸­æŠ€æœ¯æ‰‹æ®µå¯¹ä»–äººçš„æœåŠ¡å™¨é€ æˆå‹åŠ›æˆ–è¿›è¡Œæ¶æ„çˆ¬å–ã€‚æ‰€æœ‰æµ‹è¯•æ•°æ®å‡æ¥è‡ªå…¬å¼€æ¥å£ã€‚</p>
</blockquote>
<h3 data-id="heading-1">ğŸ•µï¸â€â™‚ï¸ ä»ä¸€ä¸ªå¥½å¥‡å¿ƒå¼€å§‹</h3>
<p>å‰å‡ å¤©é€›ä¸€ä¸ªæ•°å­—äº§å“åˆç§Ÿå¹³å°ï¼ˆnf.videoï¼‰æ—¶ï¼Œæˆ‘å‘ç°å®ƒé¦–é¡µåªå­¤é›¶é›¶åœ°æŒ‚ç€ 6 ä¸ªå•†å“ï¼šNetflixã€Disney+ã€Spotify ç­‰å¸¸è§çš„å…¨å®¶æ¡¶ã€‚</p>
<p>ä½œä¸ºä¸€ä¸ªå‰ç«¯å¼€å‘è€…ï¼Œæˆ‘çš„ç›´è§‰å‘Šè¯‰æˆ‘ï¼š<strong>äº‹æƒ…æ²¡è¿™ä¹ˆç®€å•</strong>ã€‚</p>
<p>é€šå¸¸è¿™ç±»å¹³å°ä¸ºäº† SEO æˆ–è€…åå°ç®¡ç†çš„ç»Ÿä¸€æ€§ï¼Œæ•°æ®åº“é‡Œå¾€å¾€èººç€æ›´å¤šå•†å“ï¼Œåªæ˜¯å› ä¸ºåº“å­˜ã€ç­–ç•¥åŸå› è¢«å‰ç«¯"éšè—"äº†ã€‚ä»Šå¤©å°±å¸¦å¤§å®¶é€šè¿‡<strong>æµè§ˆå™¨æ§åˆ¶å°ï¼ˆConsoleï¼‰</strong>ï¼Œç”¨å‡ æ‹›å‰ç«¯è°ƒè¯•æŠ€å·§ï¼Œæ‰’å‡ºé‚£äº›è—åœ¨ä»£ç èƒŒåçš„ç§˜å¯†ã€‚</p>
<hr/>
<h3 data-id="heading-2">ğŸ” ç¬¬ä¸€å±‚ï¼šæ‘†åœ¨æ˜é¢ä¸Šçš„æ•°æ®</h3>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬çœ‹çœ‹æ™®é€šç”¨æˆ·èƒ½çœ‹åˆ°ä»€ä¹ˆã€‚æ‰“å¼€æ§åˆ¶å°ï¼Œç®€å•æŸ¥ä¸€ä¸‹ DOMï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// è·å–é¦–é¡µæ‰€æœ‰å•†å“å¡ç‰‡</span>
<span class="hljs-keyword">const</span> cards = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelectorAll</span>(<span class="hljs-string">'.platFormItem'</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`é¦–é¡µå¯è§å•†å“æ•°: <span class="hljs-subst">${cards.length}</span>`</span>);
<span class="hljs-comment">// è¾“å‡º: 6</span>
</code></pre>
<p>ç¡®å®åªæœ‰ 6 ä¸ªã€‚è¿™å»ºç«‹äº†æˆ‘ä»¬çš„"åŸºå‡†çº¿"ã€‚å¦‚æœåé¢æˆ‘ä»¬æ‰¾åˆ°äº†å¤šäº 6 ä¸ªçš„æ•°æ®ï¼Œé‚£å°±è¯´æ˜æœ‰"éšè—æ¬¾"ã€‚</p>
<hr/>
<h3 data-id="heading-3">ğŸ£ ç¬¬äºŒå±‚ï¼šVue Router æ‹¦æˆªæœ¯</h3>
<p>ç‚¹å‡»å•†å“å¡ç‰‡ä¼šè·³è½¬åˆ°è´­ä¹°é¡µã€‚é€šå¸¸æˆ‘ä»¬ä¼šçœ‹ Network é¢æ¿æ‰¾é“¾æ¥ï¼Œä½†è¿™ä¸ªç½‘ç«™æ˜¯ SPAï¼ˆå•é¡µåº”ç”¨ï¼‰ï¼Œç‚¹å‡»æ˜¯è·¯ç”±è·³è½¬ã€‚</p>
<p>ä¸ºäº†ä¸çœŸçš„è·³èµ°ï¼ˆè·³èµ°å°±å¾—é€€å›æ¥ï¼Œéº»çƒ¦ï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨ Vue Router çš„<strong>å…¨å±€å‰ç½®å®ˆå«</strong>æ¥åšä¸€ä¸ª"é’©å­"ã€‚æˆ‘ä»¬æƒ³çŸ¥é“ç‚¹å‡»å¡ç‰‡åï¼Œè·¯ç”±åˆ°åº•æƒ³å¸¦æˆ‘ä»¬å»å“ªï¼Ÿ</p>
<p>æˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨æ§åˆ¶å°æ³¨å…¥è¿™æ®µä»£ç ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å‡è®¾æŒ‚è½½åœ¨ app ä¸Šçš„ router å®ä¾‹ï¼ˆè§†å…·ä½“é¡¹ç›®è€Œå®šï¼Œé€šå¸¸åœ¨ vueApp.config æˆ– __vue_app__ ä¸­ï¼‰</span>
<span class="hljs-comment">// è¿™é‡Œæ¼”ç¤ºæ€è·¯</span>
<span class="hljs-keyword">const</span> router = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'#app'</span>).<span class="hljs-property">__vue_app__</span>.<span class="hljs-property">config</span>.<span class="hljs-property">globalProperties</span>.<span class="hljs-property">$router</span>;

<span class="hljs-comment">// ğŸ‘®â€â™‚ï¸ æ³¨å†Œä¸€ä¸ªæ‹¦æˆªå®ˆå«</span>
router.<span class="hljs-title function_">beforeEach</span>(<span class="hljs-function">(<span class="hljs-params">to, <span class="hljs-keyword">from</span>, next</span>) =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`ğŸ¯ æ•è·åˆ°ç›®æ ‡è·¯ç”±: <span class="hljs-subst">${to.fullPath}</span>`</span>);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`ğŸ“¦ å‚æ•° ID: <span class="hljs-subst">${to.params.id}</span>`</span>);
    
    <span class="hljs-comment">// âœ‹ next(false) é˜»æ­¢å®é™…è·³è½¬ï¼Œæˆ‘ä»¬å°±åœåœ¨å½“å‰é¡µ</span>
    <span class="hljs-title function_">next</span>(<span class="hljs-literal">false</span>); 
});
</code></pre>
<p>ç„¶ååœ¨é¡µé¢ä¸Šç‚¹å‡»ä¸€ä¸ª"è‹¹æœå•†åº—"çš„å¡ç‰‡ï¼š</p>
<blockquote>
<p>Console è¾“å‡º:
<code>ğŸ¯ æ•è·åˆ°ç›®æ ‡è·¯ç”±: /buy/31</code>
<code>ğŸ“¦ å‚æ•° ID: 31</code></p>
</blockquote>
<p>Bingoï¼æˆ‘ä»¬æ‘¸æ¸…äº†è·¯ç”±è§„åˆ™ï¼š<code>/buy/:id</code>ã€‚è¿™æ„å‘³ç€å•†å“æ˜¯ä»¥ ID ä¸ºç´¢å¼•çš„ã€‚</p>
<hr/>
<h3 data-id="heading-4">ğŸ•µï¸ ç¬¬ä¸‰å±‚ï¼šPerformance API é‡Œçš„è››ä¸é©¬è¿¹</h3>
<p>é¡µé¢åŠ è½½å®Œäº†ï¼ŒNetwork é¢æ¿é‡Œçš„è¯·æ±‚éƒ½è¢«å†²æ‰äº†æˆ–è€…å¾ˆéš¾æ‰¾ã€‚è¿™æ—¶ï¼Œæµè§ˆå™¨åŸç”Ÿçš„ <strong>Performance API</strong> å°±åƒä¸€ä¸ªé»‘åŒ£å­ï¼Œè®°å½•äº†æ‰€æœ‰å‘ç”Ÿè¿‡çš„èµ„æºè¯·æ±‚ã€‚</p>
<p>æˆ‘æƒ³çœ‹çœ‹å‰ç«¯åˆ°åº•è¯·æ±‚äº†å“ªäº› API æ¥å£ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç­›é€‰æ‰€æœ‰ XMLHttpRequest æˆ– Fetch è¯·æ±‚</span>
<span class="hljs-keyword">const</span> apiRequests = performance.<span class="hljs-title function_">getEntriesByType</span>(<span class="hljs-string">'resource'</span>)
  .<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">e</span> =&gt;</span> e.<span class="hljs-property">initiatorType</span> === <span class="hljs-string">'xmlhttprequest'</span> || e.<span class="hljs-property">initiatorType</span> === <span class="hljs-string">'fetch'</span>)
  .<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">e</span> =&gt;</span> e.<span class="hljs-property">name</span>);

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">table</span>(apiRequests);
</code></pre>
<p>åœ¨ä¸€å †æ—¥å¿—é‡Œï¼Œæˆ‘å‘ç°äº†è¿™å‡ ä¸ªæœ‰è¶£çš„æ¥å£ï¼š</p>
<ul>
<li><code>/api/applets/goods/get/homeManage</code> (é¦–é¡µæ•°æ®ï¼Œä¼°è®¡å°±é‚£ 6 ä¸ª)</li>
<li><code>/api/applets/goods/get/categoryGoods</code> (åˆ†ç±»å•†å“ï¼Ÿè¿™ä¸ªå¬èµ·æ¥æœ‰æˆï¼)</li>
</ul>
<p>æˆ‘å°è¯•æ‰‹åŠ¨è°ƒç”¨äº†ä¸€ä¸‹è¿™ä¸ª <code>categoryGoods</code> æ¥å£ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title function_">fetch</span>(<span class="hljs-string">'/api/applets/goods/get/categoryGoods'</span>)
  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> res.<span class="hljs-title function_">json</span>())
  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`æ‹¿åˆ°æ‰€æœ‰å•†å“æ•°: <span class="hljs-subst">${data.data.length}</span>`</span>));
<span class="hljs-comment">// è¾“å‡º: 27</span>
</code></pre>
<p><strong>27 ä¸ªï¼</strong> è¿œè¶…é¦–é¡µçš„ 6 ä¸ªã€‚</p>
<p>é€šè¿‡åˆ†æè¿”å›çš„ JSONï¼Œæˆ‘çœ‹åˆ°äº†å¤§é‡é¦–é¡µæ²¡å±•ç¤ºçš„å•†å“ï¼š</p>
<ul>
<li><code>ID 20</code>: MagSafe ä¸‰åˆä¸€æ— çº¿å……</li>
<li><code>ID 96</code>: é“¶æ²³æ¬¡æ—¶ä»£æ™ºèƒ½ NAS (è¿™å•¥é»‘ç§‘æŠ€ï¼Ÿ)</li>
<li><code>ID 111</code>: Typora æ­£ç‰ˆæˆæƒ</li>
</ul>
<p>åˆ°è¿™é‡Œï¼Œå¦‚æœæ˜¯æ™®é€šç”¨æˆ·å¯èƒ½å°±æ»¡è¶³äº†ã€‚ä½†ä½œä¸ºç¨‹åºå‘˜ï¼Œæˆ‘æ³¨æ„åˆ° ID å¹¶ä¸è¿ç»­ã€‚æœ€å¤§çš„ ID æ˜¯ 113ï¼Œä½†ä¸­é—´ç¼ºäº†å¾ˆå¤šæ•°å­—ã€‚</p>
<p><strong>é‚£äº›æ¶ˆå¤±çš„ ID å»å“ªäº†ï¼Ÿ</strong></p>
<hr/>
<h3 data-id="heading-5">ğŸš€ ç¬¬å››å±‚ï¼šID æš´åŠ›æšä¸¾ä¸æ·±åº¦æŒ–æ˜</h3>
<p>æ—¢ç„¶çŸ¥é“äº† API æ¨¡å¼æ˜¯ <code>/api/applets/goods/get/:id</code>ï¼Œä¸” ID æ˜¯æ•°å­—ã€‚é‚£æˆ‘èƒ½ä¸èƒ½å†™ä¸ªè„šæœ¬ï¼ŒæŠŠ 1 åˆ° 200 çš„ ID å…¨æ‰«ä¸€éï¼Ÿ</p>
<p>è¿™å°±åƒæ˜¯åœ¨ç©"æ‰«é›·"ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç®€å•çš„å¹¶å‘æ¢æµ‹è„šæœ¬</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">scanHiddenGoods</span>(<span class="hljs-params">maxId</span>) {
    <span class="hljs-keyword">const</span> hiddenGoods = [];
    
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`ğŸš€ å¼€å§‹æ‰«æ ID 1 - <span class="hljs-subst">${maxId}</span>...`</span>);
    
    <span class="hljs-keyword">const</span> promises = [];
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> id = <span class="hljs-number">1</span>; id &lt;= maxId; id++) {
        <span class="hljs-keyword">const</span> p = <span class="hljs-title function_">fetch</span>(<span class="hljs-string">`/8081/api/applets/goods/get/<span class="hljs-subst">${id}</span>`</span>)
            .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> res.<span class="hljs-title function_">json</span>())
            .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> {
                <span class="hljs-comment">// å¦‚æœæ¥å£è¿”å›æˆåŠŸä¸”æœ‰æ•°æ®</span>
                <span class="hljs-keyword">if</span> (res.<span class="hljs-property">code</span> === <span class="hljs-number">10000</span> &amp;&amp; res.<span class="hljs-property">data</span>) {
                    <span class="hljs-keyword">return</span> { id, <span class="hljs-attr">name</span>: res.<span class="hljs-property">data</span>.<span class="hljs-property">goodsName</span>, <span class="hljs-attr">price</span>: res.<span class="hljs-property">data</span>.<span class="hljs-property">price</span> };
                }
                <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
            })
            .<span class="hljs-keyword">catch</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-literal">null</span>);
        promises.<span class="hljs-title function_">push</span>(p);
    }

    <span class="hljs-keyword">const</span> results = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>(promises);
    <span class="hljs-keyword">return</span> results.<span class="hljs-title function_">filter</span>(<span class="hljs-title class_">Boolean</span>); <span class="hljs-comment">// è¿‡æ»¤æ‰ null</span>
}

<span class="hljs-comment">// è®©æˆ‘ä»¬è·‘ä¸€ä¸‹</span>
<span class="hljs-title function_">scanHiddenGoods</span>(<span class="hljs-number">200</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">goods</span> =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">table</span>(goods);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`ğŸ‰ å…±å‘ç°å•†å“: <span class="hljs-subst">${goods.length}</span> ä¸ª`</span>);
});
</code></pre>
<p>å‡ ç§’é’Ÿåï¼Œæ§åˆ¶å°æ‰“å‡ºäº†ä¸€å¼ é•¿é•¿çš„è¡¨æ ¼ã€‚</p>
<p><strong>ç»“æœä»¤äººéœ‡æƒŠï¼š</strong></p>
<p>é™¤äº†åˆšæ‰åˆ†ç±»åˆ—è¡¨é‡Œçš„ 27 ä¸ªï¼Œæˆ‘åˆæŒ–å‡ºäº† <strong>8 ä¸ª"å¹½çµå•†å“"</strong>ã€‚è¿™äº›å•†å“è¿åˆ†ç±» API éƒ½ä¸è¿”å›ï¼Œå®Œå…¨æ˜¯"éšå½¢"çš„ï¼Œåªæœ‰é€šè¿‡ ID ç›´è¾¾æ‰èƒ½çœ‹åˆ°ï¼š</p>






























<table><thead><tr><th>ID</th><th>åç§°</th><th>è¿™å±…ç„¶ä¹Ÿæœ‰ï¼Ÿ</th></tr></thead><tbody><tr><td>18</td><td>GPT Plus</td><td>å¯èƒ½å› ä¸ºåˆè§„é—®é¢˜éšè—</td></tr><tr><td>26</td><td>Midjourney</td><td>åªèƒ½ç›´æ¥è®¿é—®è´­ä¹°</td></tr><tr><td>50</td><td>Runway</td><td>é‚£ä¸ªæ–‡ç”Ÿè§†é¢‘çš„ AI</td></tr><tr><td>105</td><td>Codex</td><td>ç¼–ç¨‹ç¥å™¨</td></tr></tbody></table>
<p>è¿™äº›å•†å“å¾ˆå¯èƒ½æ˜¯æµ‹è¯•ä¸‹æ¶çš„ã€æˆ–è€…æ˜¯ä»…é™å†…éƒ¨/è€å®¢æˆ·é€šè¿‡é“¾æ¥è´­ä¹°çš„ã€‚</p>
<hr/>
<h3 data-id="heading-6">ğŸ“ æ€»ç»“</h3>
<p>é€šè¿‡è¿™æ¬¡æ¢ç´¢ï¼Œæˆ‘ä»¬å‘ç°äº†ç½‘ç«™é‡Œå…±æœ‰ <strong>34</strong> ä¸ªæœ‰æ•ˆå•†å“ï¼Œè€Œé¦–é¡µåªå±•ç¤ºäº† <strong>17%</strong>ã€‚</p>
<p>å›é¡¾ä¸€ä¸‹æˆ‘ä»¬çš„"ä½œæ¡ˆå·¥å…·"ï¼š</p>
<ol>
<li><strong>DOM è§£æ</strong>ï¼šçœ‹æ¸…è¡¨è±¡ã€‚</li>
<li><strong>Vue Router å®ˆå«</strong>ï¼šæ‹¦æˆªè·¯ç”±ï¼Œæ¢çŸ¥è·¯å¾„è§„åˆ™ã€‚</li>
<li><strong>Performance API</strong>ï¼šå›æº¯å†å²è¯·æ±‚ï¼Œå®šä½å…³é”®åç«¯æ¥å£ã€‚</li>
<li><strong>Promise.all å¹¶å‘æ¢æµ‹</strong>ï¼šæš´åŠ›æšä¸¾ï¼Œå‘ç°ç¦»æ•£æ•°æ®ã€‚</li>
</ol>
<p>å‰ç«¯å¼€å‘ä¸ä»…ä»…æ˜¯ç”»é¡µé¢ï¼Œå–„ç”¨æµè§ˆå™¨æä¾›çš„è°ƒè¯•å·¥å…·ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹æ­£åœ¨è¿è¡Œçš„åº”ç”¨æœ‰æ›´æ·±å±‚çš„ç†è§£ï¼ˆæˆ–è€…å•çº¯æ˜¯ä¸ºäº†æ»¡è¶³å¥½å¥‡å¿ƒ ğŸ˜‰ï¼‰ã€‚</p>
<hr/>
<p><em>å¦‚æœä½ è§‰å¾—è¿™ä¸ªåˆ†æè¿‡ç¨‹æœ‰è¶£ï¼Œæ¬¢è¿ç‚¹èµæ”¶è—ï¼</em></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è®©ä½ çš„ä»£ç æ›´æ•´æ´ï¼š10 ä¸ªå¿…çŸ¥çš„ Kotlin æ‰©å±•å‡½æ•°]]></title>    <link>https://juejin.cn/post/7605941424535994422</link>    <guid>https://juejin.cn/post/7605941424535994422</guid>    <pubDate>2026-02-13T03:32:13.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605941424535994422" data-draft-id="7605807405307396159" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è®©ä½ çš„ä»£ç æ›´æ•´æ´ï¼š10 ä¸ªå¿…çŸ¥çš„ Kotlin æ‰©å±•å‡½æ•°"/> <meta itemprop="keywords" content="Android"/> <meta itemprop="datePublished" content="2026-02-13T03:32:13.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Ehtan_Zheng"/> <meta itemprop="url" content="https://juejin.cn/user/413072099642478"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è®©ä½ çš„ä»£ç æ›´æ•´æ´ï¼š10 ä¸ªå¿…çŸ¥çš„ Kotlin æ‰©å±•å‡½æ•°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/413072099642478/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Ehtan_Zheng
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-13T03:32:13.000Z" title="Fri Feb 13 2026 03:32:13 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æ‰©å±•å‡½æ•°æ˜¯ Kotlin æœ€å¼ºå¤§çš„ç‰¹æ€§ä¹‹ä¸€ï¼Œä½†è®¸å¤šå¼€å‘è€…å¹¶æœªå……åˆ†å‘æŒ¥å…¶æ½œåŠ›ã€‚åœ¨å®¡é˜…äº†æ•°ä¸‡è¡Œ Kotlin ä»£ç åï¼Œæˆ‘å‘ç°ï¼šæ°åˆ°å¥½å¤„åœ°ä½¿ç”¨æ‰©å±•å‡½æ•°ï¼Œèƒ½å°†å†—é•¿ã€é‡å¤çš„ä»£ç è½¬åŒ–ä¸ºä¼˜é›…ä¸”æ˜“è¯»çš„è¡¨è¾¾å¼ã€‚</p>
<p>åˆ«å†å†™é‚£äº›å·¥å…·ç±»ï¼ˆHelper classesï¼‰å’Œé™æ€æ–¹æ³•ï¼ˆUtility methodsï¼‰äº†ã€‚è¿™åä¸ªæ‰©å±•å‡½æ•°æ¨¡å¼å°†è®©ä½ çš„ Kotlin ä»£ç æ›´æ•´æ´ã€æ›´å…·è¡¨ç°åŠ›ï¼Œä¸”æ›´æ˜“äºç»´æŠ¤ã€‚</p>
<h3 data-id="heading-0">ä¸ºä»€ä¹ˆæ‰©å±•å‡½æ•°è‡³å…³é‡è¦</h3>
<p>æ‰©å±•å‡½æ•°å…è®¸ä½ ï¼š</p>
<ul>
<li><strong>æ— éœ€ç»§æ‰¿å³å¯æ‰©å±•åŠŸèƒ½</strong>ï¼šç›´æ¥ä¸ºç°æœ‰ç±»æ·»åŠ æ–°åŠŸèƒ½ã€‚</li>
<li><strong>æå‡å¯è¯»æ€§</strong>ï¼šé€šè¿‡é¢†åŸŸç‰¹å®šè¯­è¨€ï¼ˆDSLï¼‰ä½¿ä»£ç æ›´æ˜“ç†è§£ã€‚</li>
<li><strong>å‡å°‘æ ·æ¿ä»£ç </strong>ï¼šå½»åº•æ¶ˆé™¤è‡ƒè‚¿çš„å·¥å…·ç±»ï¼ˆUtility classesï¼‰ã€‚</li>
<li><strong>å®ç°è‡ªç„¶é“¾å¼æ“ä½œ</strong>ï¼šè®©ä»£ç è°ƒç”¨é€»è¾‘æ›´é¡ºç•…ã€‚</li>
</ul>
<p>è®©æˆ‘ä»¬é€šè¿‡ä»¥ä¸‹åä¸ªæ¨¡å¼ï¼Œçœ‹çœ‹å®ƒä»¬æ˜¯å¦‚ä½•é‡å¡‘ä½ çš„ä»£ç åº“çš„ã€‚</p>
<h3 data-id="heading-1">æ¨¡å¼ 1ï¼šå­—ç¬¦ä¸²æ ¡éªŒæ‰©å±• (String Validation Extensions)</h3>
<p><strong>é—®é¢˜ï¼š</strong> å­—ç¬¦ä¸²æ ¡éªŒé€»è¾‘æ•£è½åœ¨ä»£ç åº“çš„å„ä¸ªè§’è½ã€‚</p>
<h4 data-id="heading-2">åŸºç¡€æ ¡éªŒæ‰©å±•</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// âœ“ ç®€æ´çš„æ ¡éªŒæ‰©å±•å‡½æ•°</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> String?.<span class="hljs-title">isValidEmail</span><span class="hljs-params">()</span></span>: <span class="hljs-built_in">Boolean</span> {
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span> == <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
    <span class="hljs-keyword">return</span> matches(Regex(<span class="hljs-string">"^[A-Za-z0-9+_.-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,}$"</span>))
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> String?.<span class="hljs-title">isValidPhone</span><span class="hljs-params">()</span></span>: <span class="hljs-built_in">Boolean</span> {
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span> == <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
    <span class="hljs-keyword">return</span> matches(Regex(<span class="hljs-string">"^\\+?[1-9]\\d{1,14}$"</span>))
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> String?.<span class="hljs-title">isValidUrl</span><span class="hljs-params">()</span></span>: <span class="hljs-built_in">Boolean</span> {
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span> == <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">try</span> {
        java.net.URL(<span class="hljs-keyword">this</span>)
        <span class="hljs-literal">true</span>
    } <span class="hljs-keyword">catch</span> (e: Exception) {
        <span class="hljs-literal">false</span>
    }
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> String.<span class="hljs-title">isAlphanumeric</span><span class="hljs-params">()</span></span>: <span class="hljs-built_in">Boolean</span> {
    <span class="hljs-keyword">return</span> matches(Regex(<span class="hljs-string">"^[a-zA-Z0-9]+$"</span>))
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> String.<span class="hljs-title">containsDigit</span><span class="hljs-params">()</span></span>: <span class="hljs-built_in">Boolean</span> {
    <span class="hljs-keyword">return</span> any { it.isDigit() }
}
</code></pre>
<h3 data-id="heading-3">é«˜çº§å­—ç¬¦ä¸²æ‰©å±•</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> String.<span class="hljs-title">truncate</span><span class="hljs-params">(maxLength: <span class="hljs-type">Int</span>, ellipsis: <span class="hljs-type">String</span> = <span class="hljs-string">"..."</span>)</span></span>: String {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">if</span> (length &lt;= maxLength) <span class="hljs-keyword">this</span>
    <span class="hljs-keyword">else</span> take(maxLength - ellipsis.length) + ellipsis
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> String.<span class="hljs-title">capitalizeWords</span><span class="hljs-params">()</span></span>: String {
    <span class="hljs-keyword">return</span> split(<span class="hljs-string">" "</span>).joinToString(<span class="hljs-string">" "</span>) { word -&gt;
        word.replaceFirstChar { <span class="hljs-keyword">if</span> (it.isLowerCase()) it.titlecase() <span class="hljs-keyword">else</span> it.toString() }
    }
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> String.<span class="hljs-title">removeWhitespace</span><span class="hljs-params">()</span></span>: String {
    <span class="hljs-keyword">return</span> replace(<span class="hljs-string">"\s+"</span>.toRegex(), <span class="hljs-string">""</span>)
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> String.<span class="hljs-title">toSlug</span><span class="hljs-params">()</span></span>: String {
    <span class="hljs-keyword">return</span> lowercase()
        .replace(<span class="hljs-string">"\s+"</span>.toRegex(), <span class="hljs-string">"-"</span>)
        .replace(<span class="hljs-string">"[^a-z0-9-]"</span>.toRegex(), <span class="hljs-string">""</span>)
        .replace(<span class="hljs-string">"-+"</span>.toRegex(), <span class="hljs-string">"-"</span>)
        .trim(<span class="hljs-string">'-'</span>)
}

<span class="hljs-comment">// ç”¨æ³•ç¤ºä¾‹</span>
<span class="hljs-keyword">val</span> title = <span class="hljs-string">"This is a Long Article Title That Needs Truncation"</span>
<span class="hljs-keyword">val</span> short = title.truncate(<span class="hljs-number">20</span>) <span class="hljs-comment">// ç»“æœ: "This is a Long Ar..."</span>

<span class="hljs-keyword">val</span> name = <span class="hljs-string">"john doe"</span>
<span class="hljs-keyword">val</span> formatted = name.capitalizeWords() <span class="hljs-comment">// ç»“æœ: "John Doe"</span>

<span class="hljs-keyword">val</span> slug = <span class="hljs-string">"My Blog Post!"</span>.toSlug() <span class="hljs-comment">// ç»“æœ: "my-blog-post"</span>

</code></pre>
<hr/>
<h3 data-id="heading-4">æ¨¡å¼ 2ï¼šç©ºå®‰å…¨æ‰©å±• (Null Safety Extensions)</h3>
<p><strong>é—®é¢˜ï¼š</strong> ä»£ç ä¸­å……æ–¥ç€é‡å¤çš„åˆ¤ç©ºæ£€æŸ¥å’Œ Elvis æ“ä½œç¬¦ï¼ˆ<code>?:</code>ï¼‰ã€‚è¿™æ˜¯å¤„ç†ç©ºå€¼æ—¶æœ€å¹¿æ³›ä½¿ç”¨çš„æ¨¡å¼ä¹‹ä¸€ã€‚</p>
<h4 data-id="heading-5">ç©ºå®‰å…¨è¾…åŠ©å‡½æ•°</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T&gt;</span> T?.<span class="hljs-title">orDefault</span><span class="hljs-params">(default: <span class="hljs-type">T</span>)</span></span>: T {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span> ?: default
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T&gt;</span> T?.<span class="hljs-title">orThrow</span><span class="hljs-params">(exception: () -&gt; <span class="hljs-type">Exception</span>)</span></span>: T {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span> ?: <span class="hljs-keyword">throw</span> exception()
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T&gt;</span> T?.<span class="hljs-title">ifNull</span><span class="hljs-params">(action: () -&gt; <span class="hljs-type">Unit</span>)</span></span>: T? {
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span> == <span class="hljs-literal">null</span>) action()
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T&gt;</span> T?.<span class="hljs-title">ifNotNull</span><span class="hljs-params">(action: (<span class="hljs-type">T</span>) -&gt; <span class="hljs-type">Unit</span>)</span></span>: T? {
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span> != <span class="hljs-literal">null</span>) action(<span class="hljs-keyword">this</span>)
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>
}

<span class="hljs-comment">// ç”¨æ³•ç¤ºä¾‹</span>
<span class="hljs-keyword">val</span> username: String? = <span class="hljs-literal">null</span>
<span class="hljs-keyword">val</span> display = username.orDefault(<span class="hljs-string">"Guest"</span>) <span class="hljs-comment">// ç»“æœ: "Guest"</span>

<span class="hljs-keyword">val</span> userId: String? = <span class="hljs-literal">null</span>
<span class="hljs-keyword">val</span> id = userId.orThrow { IllegalArgumentException(<span class="hljs-string">"éœ€è¦ç”¨æˆ· ID"</span>) }

<span class="hljs-keyword">var</span> errorShown = <span class="hljs-literal">false</span>
<span class="hljs-keyword">val</span> result: String? = <span class="hljs-literal">null</span>
result.ifNull { errorShown = <span class="hljs-literal">true</span> }

<span class="hljs-keyword">val</span> user: User? = getUser()
user.ifNotNull { println(<span class="hljs-string">"æ‰¾åˆ°ç”¨æˆ·: <span class="hljs-subst">${it.name}</span>"</span>) }
</code></pre>
<h4 data-id="heading-6">é›†åˆç©ºå®‰å…¨æ‰©å±•</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T&gt;</span> List<span class="hljs-type">&lt;T&gt;</span>?.<span class="hljs-title">orEmpty</span><span class="hljs-params">()</span></span>: List&lt;T&gt; = <span class="hljs-keyword">this</span> ?: emptyList()

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;K, V&gt;</span> Map<span class="hljs-type">&lt;K, V&gt;</span>?.<span class="hljs-title">orEmpty</span><span class="hljs-params">()</span></span>: Map&lt;K, V&gt; = <span class="hljs-keyword">this</span> ?: emptyMap()

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T&gt;</span> List<span class="hljs-type">&lt;T&gt;</span>?.<span class="hljs-title">isNullOrEmpty</span><span class="hljs-params">()</span></span>: <span class="hljs-built_in">Boolean</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span> == <span class="hljs-literal">null</span> || isEmpty()
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T&gt;</span> List<span class="hljs-type">&lt;T&gt;</span>?.<span class="hljs-title">isNotNullOrEmpty</span><span class="hljs-params">()</span></span>: <span class="hljs-built_in">Boolean</span> {
    <span class="hljs-keyword">return</span> !isNullOrEmpty()
}

<span class="hljs-comment">// ç”¨æ³•ç¤ºä¾‹</span>
<span class="hljs-keyword">val</span> items: List&lt;String&gt;? = <span class="hljs-literal">null</span>
items.orEmpty().forEach { println(it) } <span class="hljs-comment">// å®‰å…¨éå†</span>

<span class="hljs-keyword">val</span> map: Map&lt;String, <span class="hljs-built_in">Int</span>&gt;? = <span class="hljs-literal">null</span>
<span class="hljs-keyword">val</span> count = map.orEmpty().size <span class="hljs-comment">// ç»“æœ: 0</span>

<span class="hljs-keyword">if</span> (items.isNotNullOrEmpty()) {
    <span class="hljs-comment">// å¤„ç† items</span>
}
</code></pre>
<hr/>
<h3 data-id="heading-7">æ¨¡å¼ 3ï¼šé›†åˆæ‰©å±• (Collection Extensions)</h3>
<p><strong>é—®é¢˜ï¼š</strong> å¸¸è§çš„é›†åˆæ“ä½œå¾€å¾€éœ€è¦ç¼–å†™å†—é•¿çš„ä»£ç ã€‚</p>
<h4 data-id="heading-8">å®ç”¨é›†åˆæ‰©å±•</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T&gt;</span> List<span class="hljs-type">&lt;T&gt;</span>.<span class="hljs-title">second</span><span class="hljs-params">()</span></span>: T {
    <span class="hljs-keyword">if</span> (size &lt; <span class="hljs-number">2</span>) <span class="hljs-keyword">throw</span> NoSuchElementException(<span class="hljs-string">"åˆ—è¡¨å…ƒç´ ä¸è¶³ 2 ä¸ª"</span>)
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>[<span class="hljs-number">1</span>]
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T&gt;</span> List<span class="hljs-type">&lt;T&gt;</span>.<span class="hljs-title">secondOrNull</span><span class="hljs-params">()</span></span>: T? {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">if</span> (size &gt;= <span class="hljs-number">2</span>) <span class="hljs-keyword">this</span>[<span class="hljs-number">1</span>] <span class="hljs-keyword">else</span> <span class="hljs-literal">null</span>
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T&gt;</span> List<span class="hljs-type">&lt;T&gt;</span>.<span class="hljs-title">takeIfNotEmpty</span><span class="hljs-params">()</span></span>: List&lt;T&gt;? {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">if</span> (isNotEmpty()) <span class="hljs-keyword">this</span> <span class="hljs-keyword">else</span> <span class="hljs-literal">null</span>
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T&gt;</span> List<span class="hljs-type">&lt;T&gt;</span>.<span class="hljs-title">split</span><span class="hljs-params">(predicate: (<span class="hljs-type">T</span>) -&gt; <span class="hljs-type">Boolean</span>)</span></span>: Pair&lt;List&lt;T&gt;, List&lt;T&gt;&gt; {
    <span class="hljs-keyword">return</span> partition(predicate)
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T&gt;</span> Iterable<span class="hljs-type">&lt;T&gt;</span>.<span class="hljs-title">sumByLong</span><span class="hljs-params">(selector: (<span class="hljs-type">T</span>) -&gt; <span class="hljs-type">Long</span>)</span></span>: <span class="hljs-built_in">Long</span> {
    <span class="hljs-keyword">return</span> fold(<span class="hljs-number">0L</span>) { sum, element -&gt; sum + selector(element) }
}

<span class="hljs-comment">// ç”¨æ³•ç¤ºä¾‹</span>
<span class="hljs-keyword">val</span> numbers = listOf(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>)
<span class="hljs-keyword">val</span> secondNum = numbers.secondOrNull() <span class="hljs-comment">// ç»“æœ: 2</span>

<span class="hljs-keyword">val</span> empty = emptyList&lt;String&gt;()
empty.takeIfNotEmpty() <span class="hljs-comment">// ç»“æœ: null</span>

<span class="hljs-keyword">val</span> (evens, odds) = numbers.split { it % <span class="hljs-number">2</span> == <span class="hljs-number">0</span> }
<span class="hljs-comment">// evens = [2, 4], odds = [1, 3, 5]</span>

<span class="hljs-keyword">val</span> files = listOf(
    File(<span class="hljs-string">"file1.txt"</span>, <span class="hljs-number">100L</span>),
    File(<span class="hljs-string">"file2.txt"</span>, <span class="hljs-number">200L</span>)
)
<span class="hljs-keyword">val</span> totalSize = files.sumByLong { it.size } <span class="hljs-comment">// ç»“æœ: 300L</span>
</code></pre>
<h4 data-id="heading-9">é«˜çº§é›†åˆæ“ä½œ</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T&gt;</span> List<span class="hljs-type">&lt;T&gt;</span>.<span class="hljs-title">replaceAll</span><span class="hljs-params">(oldValue: <span class="hljs-type">T</span>, newValue: <span class="hljs-type">T</span>)</span></span>: List&lt;T&gt; {
    <span class="hljs-keyword">return</span> map { <span class="hljs-keyword">if</span> (it == oldValue) newValue <span class="hljs-keyword">else</span> it }
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T&gt;</span> List<span class="hljs-type">&lt;T&gt;</span>.<span class="hljs-title">chunkedBy</span><span class="hljs-params">(predicate: (<span class="hljs-type">T</span>) -&gt; <span class="hljs-type">Boolean</span>)</span></span>: List&lt;List&lt;T&gt;&gt; {
    <span class="hljs-keyword">val</span> result = mutableListOf&lt;List&lt;T&gt;&gt;()
    <span class="hljs-keyword">var</span> currentChunk = mutableListOf&lt;T&gt;()
    
    forEach { item -&gt;
        <span class="hljs-keyword">if</span> (predicate(item) &amp;&amp; currentChunk.isNotEmpty()) {
            result.add(currentChunk)
            currentChunk = mutableListOf()
        }
        currentChunk.add(item)
    }
    
    <span class="hljs-keyword">if</span> (currentChunk.isNotEmpty()) {
        result.add(currentChunk)
    }
    
    <span class="hljs-keyword">return</span> result
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T&gt;</span> List<span class="hljs-type">&lt;T&gt;</span>.<span class="hljs-title">duplicates</span><span class="hljs-params">()</span></span>: List&lt;T&gt; {
    <span class="hljs-keyword">return</span> groupingBy { it }
        .eachCount()
        .filter { it.value &gt; <span class="hljs-number">1</span> }
        .keys
        .toList()
}

<span class="hljs-comment">// ç”¨æ³•ç¤ºä¾‹</span>
<span class="hljs-keyword">val</span> items = listOf(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">2</span>, <span class="hljs-number">4</span>)
<span class="hljs-keyword">val</span> dups = items.duplicates() <span class="hljs-comment">// ç»“æœ: [1, 2]</span>

<span class="hljs-keyword">val</span> words = listOf(<span class="hljs-string">"hello"</span>, <span class="hljs-string">"world"</span>, <span class="hljs-string">"hello"</span>, <span class="hljs-string">"kotlin"</span>)
<span class="hljs-keyword">val</span> unique = words.replaceAll(<span class="hljs-string">"hello"</span>, <span class="hljs-string">"hi"</span>) <span class="hljs-comment">// ç»“æœ: ["hi", "world", "hi", "kotlin"]</span>
</code></pre>
<hr/>
<h3 data-id="heading-10">æ¨¡å¼ 4ï¼šContext æ‰©å±• (Context Extensions)</h3>
<p><strong>é—®é¢˜ï¼š</strong> Android ä¸­é‡å¤ç¹ççš„ Context ç›¸å…³æ“ä½œã€‚</p>
<h4 data-id="heading-11">Context æ‰©å±•å‡½æ•°</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> Context.<span class="hljs-title">toast</span><span class="hljs-params">(message: <span class="hljs-type">String</span>, duration: <span class="hljs-type">Int</span> = Toast.LENGTH_SHORT)</span></span> {
    Toast.makeText(<span class="hljs-keyword">this</span>, message, duration).show()
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> Context.<span class="hljs-title">showAlertDialog</span><span class="hljs-params">(
    title: <span class="hljs-type">String</span>,
    message: <span class="hljs-type">String</span>,
    positiveButton: <span class="hljs-type">String</span> = <span class="hljs-string">"ç¡®å®š"</span>,
    onPositive: () -&gt; <span class="hljs-type">Unit</span> = {}
)</span></span> {
    AlertDialog.Builder(<span class="hljs-keyword">this</span>)
        .setTitle(title)
        .setMessage(message)
        .setPositiveButton(positiveButton) { _, _ -&gt; onPositive() }
        .show()
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> Context.<span class="hljs-title">hideKeyboard</span><span class="hljs-params">(view: <span class="hljs-type">View</span>)</span></span> {
    <span class="hljs-keyword">val</span> imm = getSystemService(Context.INPUT_METHOD_SERVICE) <span class="hljs-keyword">as</span> InputMethodManager
    imm.hideSoftInputFromWindow(view.windowToken, <span class="hljs-number">0</span>)
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> Context.<span class="hljs-title">showKeyboard</span><span class="hljs-params">(view: <span class="hljs-type">View</span>)</span></span> {
    view.requestFocus()
    <span class="hljs-keyword">val</span> imm = getSystemService(Context.INPUT_METHOD_SERVICE) <span class="hljs-keyword">as</span> InputMethodManager
    imm.showSoftInput(view, InputMethodManager.SHOW_IMPLICIT)
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> Context.<span class="hljs-title">isNetworkAvailable</span><span class="hljs-params">()</span></span>: <span class="hljs-built_in">Boolean</span> {
    <span class="hljs-keyword">val</span> connectivityManager = getSystemService(Context.CONNECTIVITY_SERVICE) <span class="hljs-keyword">as</span> ConnectivityManager
    <span class="hljs-keyword">val</span> activeNetwork = connectivityManager.activeNetworkInfo
    <span class="hljs-keyword">return</span> activeNetwork?.isConnected == <span class="hljs-literal">true</span>
}

<span class="hljs-comment">// åœ¨ Activity/Fragment ä¸­çš„ç”¨æ³•ç¤ºä¾‹</span>
toast(<span class="hljs-string">"æ“ä½œæˆåŠŸ"</span>)

showAlertDialog(
    title = <span class="hljs-string">"ç¡®è®¤"</span>,
    message = <span class="hljs-string">"åˆ é™¤è¯¥é¡¹ç›®ï¼Ÿ"</span>,
    positiveButton = <span class="hljs-string">"åˆ é™¤"</span>
) {
    deleteItem()
}

<span class="hljs-keyword">if</span> (isNetworkAvailable()) {
    loadData()
} <span class="hljs-keyword">else</span> {
    toast(<span class="hljs-string">"æ— ç½‘ç»œè¿æ¥"</span>)
}

hideKeyboard(editText)
</code></pre>
<hr/>
<h3 data-id="heading-12">æ¨¡å¼ 5ï¼šæ—¥æœŸä¸æ—¶é—´æ‰©å±• (Date and Time Extensions)</h3>
<p><strong>é—®é¢˜ï¼š</strong> å¤æ‚çš„æ—¥æœŸæ ¼å¼åŒ–ä¸æ—¶é—´è®¡ç®—é€»è¾‘ã€‚</p>
<h4 data-id="heading-13">æ—¥æœŸæ‰©å±•å‡½æ•°</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> Date.<span class="hljs-title">formatTo</span><span class="hljs-params">(pattern: <span class="hljs-type">String</span> = <span class="hljs-string">"yyyy-MM-dd"</span>)</span></span>: String {
    <span class="hljs-keyword">val</span> formatter = SimpleDateFormat(pattern, Locale.getDefault())
    <span class="hljs-keyword">return</span> formatter.format(<span class="hljs-keyword">this</span>)
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> Date.<span class="hljs-title">toCalendar</span><span class="hljs-params">()</span></span>: Calendar {
    <span class="hljs-keyword">return</span> Calendar.getInstance().apply {
        time = <span class="hljs-keyword">this</span><span class="hljs-symbol">@toCalendar</span>
    }
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> Date.<span class="hljs-title">addDays</span><span class="hljs-params">(days: <span class="hljs-type">Int</span>)</span></span>: Date {
    <span class="hljs-keyword">return</span> toCalendar().apply {
        add(Calendar.DAY_OF_MONTH, days)
    }.time
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> Date.<span class="hljs-title">addHours</span><span class="hljs-params">(hours: <span class="hljs-type">Int</span>)</span></span>: Date {
    <span class="hljs-keyword">return</span> toCalendar().apply {
        add(Calendar.HOUR_OF_DAY, hours)
    }.time
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> Date.<span class="hljs-title">isToday</span><span class="hljs-params">()</span></span>: <span class="hljs-built_in">Boolean</span> {
    <span class="hljs-keyword">val</span> today = Calendar.getInstance()
    <span class="hljs-keyword">val</span> dateCalendar = toCalendar()
    <span class="hljs-keyword">return</span> today.<span class="hljs-keyword">get</span>(Calendar.YEAR) == dateCalendar.<span class="hljs-keyword">get</span>(Calendar.YEAR) &amp;&amp;
           today.<span class="hljs-keyword">get</span>(Calendar.DAY_OF_YEAR) == dateCalendar.<span class="hljs-keyword">get</span>(Calendar.DAY_OF_YEAR)
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> Date.<span class="hljs-title">isFuture</span><span class="hljs-params">()</span></span>: <span class="hljs-built_in">Boolean</span> {
    <span class="hljs-keyword">return</span> time &gt; System.currentTimeMillis()
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> Date.<span class="hljs-title">isPast</span><span class="hljs-params">()</span></span>: <span class="hljs-built_in">Boolean</span> {
    <span class="hljs-keyword">return</span> time &lt; System.currentTimeMillis()
}

<span class="hljs-comment">// ç”¨æ³•ç¤ºä¾‹</span>
<span class="hljs-keyword">val</span> now = Date()
<span class="hljs-keyword">val</span> formatted = now.formatTo(<span class="hljs-string">"MMM dd, yyyy"</span>) <span class="hljs-comment">// ç»“æœ: "Jan 08, 2026"</span>

<span class="hljs-keyword">val</span> tomorrow = now.addDays(<span class="hljs-number">1</span>)
<span class="hljs-keyword">val</span> inThreeHours = now.addHours(<span class="hljs-number">3</span>)

<span class="hljs-keyword">if</span> (deadline.isFuture()) {
    println(<span class="hljs-string">"è¿˜æœ‰æ—¶é—´ï¼"</span>)
}
</code></pre>
<h4 data-id="heading-14">ç°ä»£æ—¥æœŸ API æ‰©å±•</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> LocalDateTime.<span class="hljs-title">formatTo</span><span class="hljs-params">(pattern: <span class="hljs-type">String</span> = <span class="hljs-string">"yyyy-MM-dd HH:mm:ss"</span>)</span></span>: String {
    <span class="hljs-keyword">return</span> format(DateTimeFormatter.ofPattern(pattern))
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> LocalDate.<span class="hljs-title">isWeekend</span><span class="hljs-params">()</span></span>: <span class="hljs-built_in">Boolean</span> {
    <span class="hljs-keyword">return</span> dayOfWeek == DayOfWeek.SATURDAY || dayOfWeek == DayOfWeek.SUNDAY
}
<span class="hljs-function"><span class="hljs-keyword">fun</span> LocalDate.<span class="hljs-title">isWeekday</span><span class="hljs-params">()</span></span>: <span class="hljs-built_in">Boolean</span> {
    <span class="hljs-keyword">return</span> !isWeekend()
}
<span class="hljs-function"><span class="hljs-keyword">fun</span> LocalDateTime.<span class="hljs-title">toEpochMillis</span><span class="hljs-params">()</span></span>: <span class="hljs-built_in">Long</span> {
    <span class="hljs-keyword">return</span> atZone(ZoneId.systemDefault()).toInstant().toEpochMilli()
}
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-built_in">Long</span>.<span class="hljs-title">toLocalDateTime</span><span class="hljs-params">()</span></span>: LocalDateTime {
    <span class="hljs-keyword">return</span> LocalDateTime.ofInstant(Instant.ofEpochMilli(<span class="hljs-keyword">this</span>), ZoneId.systemDefault())
}
<span class="hljs-comment">// Usage</span>
<span class="hljs-keyword">val</span> now = LocalDateTime.now()
<span class="hljs-keyword">val</span> display = now.formatTo(<span class="hljs-string">"MMM dd, yyyy HH:mm"</span>) <span class="hljs-comment">// "Jan 08, 2026 15:30"</span>
<span class="hljs-keyword">val</span> date = LocalDate.now()
<span class="hljs-keyword">if</span> (date.isWeekend()) {
    println(<span class="hljs-string">"It's the weekend!"</span>)
}
<span class="hljs-keyword">val</span> timestamp = System.currentTimeMillis()
<span class="hljs-keyword">val</span> dateTime = timestamp.toLocalDateTime()
</code></pre>
<hr/>
<h3 data-id="heading-15">æ¨¡å¼ 6ï¼šè§†å›¾æ‰©å±• (View Extensions)</h3>
<p><strong>é—®é¢˜ï¼š</strong> é‡å¤çš„ View æ“ä½œä»£ç ã€‚</p>
<h4 data-id="heading-16">è§†å›¾æ˜¾ç¤ºçŠ¶æ€æ‰©å±•</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> View.<span class="hljs-title">visible</span><span class="hljs-params">()</span></span> {
    visibility = View.VISIBLE
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> View.<span class="hljs-title">invisible</span><span class="hljs-params">()</span></span> {
    visibility = View.INVISIBLE
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> View.<span class="hljs-title">gone</span><span class="hljs-params">()</span></span> {
    visibility = View.GONE
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> View.<span class="hljs-title">toggleVisibility</span><span class="hljs-params">()</span></span> {
    visibility = <span class="hljs-keyword">if</span> (visibility == View.VISIBLE) View.GONE <span class="hljs-keyword">else</span> View.VISIBLE
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> View.<span class="hljs-title">isVisible</span><span class="hljs-params">()</span></span>: <span class="hljs-built_in">Boolean</span> = visibility == View.VISIBLE

<span class="hljs-function"><span class="hljs-keyword">fun</span> View.<span class="hljs-title">isGone</span><span class="hljs-params">()</span></span>: <span class="hljs-built_in">Boolean</span> = visibility == View.GONE

<span class="hljs-function"><span class="hljs-keyword">fun</span> View.<span class="hljs-title">visibleIf</span><span class="hljs-params">(condition: <span class="hljs-type">Boolean</span>)</span></span> {
    visibility = <span class="hljs-keyword">if</span> (condition) View.VISIBLE <span class="hljs-keyword">else</span> View.GONE
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> View.<span class="hljs-title">goneIf</span><span class="hljs-params">(condition: <span class="hljs-type">Boolean</span>)</span></span> {
    visibility = <span class="hljs-keyword">if</span> (condition) View.GONE <span class="hljs-keyword">else</span> View.VISIBLE
}

<span class="hljs-comment">// ç”¨æ³•ç¤ºä¾‹</span>
loadingSpinner.visible()
errorMessage.gone()
submitButton.visibleIf(form.isValid())
errorView.goneIf(<span class="hljs-keyword">data</span> != <span class="hljs-literal">null</span>)
</code></pre>
<h4 data-id="heading-17">è§†å›¾äº¤äº’æ‰©å±•</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> View.<span class="hljs-title">onClick</span><span class="hljs-params">(action: () -&gt; <span class="hljs-type">Unit</span>)</span></span> {
    setOnClickListener { action() }
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> View.<span class="hljs-title">onLongClick</span><span class="hljs-params">(action: () -&gt; <span class="hljs-type">Boolean</span>)</span></span> {
    setOnLongClickListener { action() }
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> View.<span class="hljs-title">setMargin</span><span class="hljs-params">(left: <span class="hljs-type">Int</span> = <span class="hljs-number">0</span>, top: <span class="hljs-type">Int</span> = <span class="hljs-number">0</span>, right: <span class="hljs-type">Int</span> = <span class="hljs-number">0</span>, bottom: <span class="hljs-type">Int</span> = <span class="hljs-number">0</span>)</span></span> {
    <span class="hljs-keyword">val</span> params = layoutParams <span class="hljs-keyword">as</span>? ViewGroup.MarginLayoutParams
    params?.setMargins(left, top, right, bottom)
    layoutParams = params
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> View.<span class="hljs-title">setPadding</span><span class="hljs-params">(padding: <span class="hljs-type">Int</span>)</span></span> {
    setPadding(padding, padding, padding, padding)
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> View.<span class="hljs-title">updatePadding</span><span class="hljs-params">(
    left: <span class="hljs-type">Int</span> = paddingLeft,
    top: <span class="hljs-type">Int</span> = paddingTop,
    right: <span class="hljs-type">Int</span> = paddingRight,
    bottom: <span class="hljs-type">Int</span> = paddingBottom
)</span></span> {
    setPadding(left, top, right, bottom)
}

<span class="hljs-comment">// ç”¨æ³•ç¤ºä¾‹</span>
button.onClick {
    performAction()
}

imageView.onLongClick {
    showContextMenu()
    <span class="hljs-literal">true</span>
}

<span class="hljs-comment">// ä»…è®¾ç½®å·¦å³è¾¹è·ï¼Œæ— éœ€å…³å¿ƒå…¶ä»–æ–¹å‘</span>
view.setMargin(left = <span class="hljs-number">16</span>, right = <span class="hljs-number">16</span>)

<span class="hljs-comment">// ä¸€é”®è®¾ç½®å…¨æ–¹å‘å†…è¾¹è·</span>
view.setPadding(<span class="hljs-number">24</span>)
</code></pre>
<hr/>
<h3 data-id="heading-18">æ¨¡å¼ 7ï¼šèµ„æºè®¿é—®æ‰©å±• (Resource Extensions)</h3>
<p><strong>é—®é¢˜ï¼š</strong> èµ„æºè®¿é—®ä»£ç è¿‡äºå†—é•¿ã€‚</p>
<h4 data-id="heading-19">èµ„æºè®¿é—®æ‰©å±•å‡½æ•°</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> Context.<span class="hljs-title">drawable</span><span class="hljs-params">(<span class="hljs-meta">@DrawableRes</span> id: <span class="hljs-type">Int</span>)</span></span>: Drawable? {
    <span class="hljs-keyword">return</span> ContextCompat.getDrawable(<span class="hljs-keyword">this</span>, id)
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> Context.<span class="hljs-title">color</span><span class="hljs-params">(<span class="hljs-meta">@ColorRes</span> id: <span class="hljs-type">Int</span>)</span></span>: <span class="hljs-built_in">Int</span> {
    <span class="hljs-keyword">return</span> ContextCompat.getColor(<span class="hljs-keyword">this</span>, id)
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> Context.<span class="hljs-title">string</span><span class="hljs-params">(<span class="hljs-meta">@StringRes</span> id: <span class="hljs-type">Int</span>, <span class="hljs-keyword">vararg</span> args: <span class="hljs-type">Any</span>)</span></span>: String {
    <span class="hljs-keyword">return</span> getString(id, *args)
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> Context.<span class="hljs-title">dimension</span><span class="hljs-params">(<span class="hljs-meta">@DimenRes</span> id: <span class="hljs-type">Int</span>)</span></span>: <span class="hljs-built_in">Float</span> {
    <span class="hljs-keyword">return</span> resources.getDimension(id)
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> Context.<span class="hljs-title">dimensionPixelSize</span><span class="hljs-params">(<span class="hljs-meta">@DimenRes</span> id: <span class="hljs-type">Int</span>)</span></span>: <span class="hljs-built_in">Int</span> {
    <span class="hljs-keyword">return</span> resources.getDimensionPixelSize(id)
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> View.<span class="hljs-title">drawable</span><span class="hljs-params">(<span class="hljs-meta">@DrawableRes</span> id: <span class="hljs-type">Int</span>)</span></span>: Drawable? {
    <span class="hljs-keyword">return</span> context.drawable(id)
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> View.<span class="hljs-title">color</span><span class="hljs-params">(<span class="hljs-meta">@ColorRes</span> id: <span class="hljs-type">Int</span>)</span></span>: <span class="hljs-built_in">Int</span> {
    <span class="hljs-keyword">return</span> context.color(id)
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> View.<span class="hljs-title">string</span><span class="hljs-params">(<span class="hljs-meta">@StringRes</span> id: <span class="hljs-type">Int</span>, <span class="hljs-keyword">vararg</span> args: <span class="hljs-type">Any</span>)</span></span>: String {
    <span class="hljs-keyword">return</span> context.string(id, *args)
}

<span class="hljs-comment">// ç”¨æ³•ç¤ºä¾‹</span>
<span class="hljs-keyword">val</span> icon = drawable(R.drawable.ic_star)
<span class="hljs-keyword">val</span> primaryColor = color(R.color.primary)
<span class="hljs-keyword">val</span> message = string(R.string.welcome_message, userName)
<span class="hljs-keyword">val</span> spacing = dimensionPixelSize(R.dimen.spacing_medium)

<span class="hljs-comment">// åœ¨ View ä¸­ä½¿ç”¨</span>
imageView.setImageDrawable(drawable(R.drawable.ic_profile))
textView.setTextColor(color(R.color.text_primary))
</code></pre>
<hr/>
<h3 data-id="heading-20">æ¨¡å¼ 8ï¼šæ•°å€¼æ‰©å±• (Number Extensions)</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-built_in">Int</span>.<span class="hljs-title">formatWithCommas</span><span class="hljs-params">()</span></span>: String {
    <span class="hljs-keyword">return</span> String.format(<span class="hljs-string">"%,d"</span>, <span class="hljs-keyword">this</span>)
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-built_in">Double</span>.<span class="hljs-title">formatAsPrice</span><span class="hljs-params">(currencySymbol: <span class="hljs-type">String</span> = <span class="hljs-string">"$"</span>)</span></span>: String {
    <span class="hljs-keyword">return</span> <span class="hljs-string">"<span class="hljs-variable">$currencySymbol</span>%.2f"</span>.format(<span class="hljs-keyword">this</span>)
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-built_in">Float</span>.<span class="hljs-title">roundTo</span><span class="hljs-params">(decimals: <span class="hljs-type">Int</span>)</span></span>: <span class="hljs-built_in">Float</span> {
    <span class="hljs-keyword">val</span> multiplier = <span class="hljs-number">10.0</span>.pow(decimals)
    <span class="hljs-keyword">return</span> (<span class="hljs-keyword">this</span> * multiplier).roundToInt() / multiplier.toFloat()
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-built_in">Int</span>.<span class="hljs-title">toBoolean</span><span class="hljs-params">()</span></span>: <span class="hljs-built_in">Boolean</span> = <span class="hljs-keyword">this</span> != <span class="hljs-number">0</span>

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-built_in">Boolean</span>.<span class="hljs-title">toInt</span><span class="hljs-params">()</span></span>: <span class="hljs-built_in">Int</span> = <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>) <span class="hljs-number">1</span> <span class="hljs-keyword">else</span> <span class="hljs-number">0</span>

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-built_in">Int</span>.<span class="hljs-title">isEven</span><span class="hljs-params">()</span></span>: <span class="hljs-built_in">Boolean</span> = <span class="hljs-keyword">this</span> % <span class="hljs-number">2</span> == <span class="hljs-number">0</span>

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-built_in">Int</span>.<span class="hljs-title">isOdd</span><span class="hljs-params">()</span></span>: <span class="hljs-built_in">Boolean</span> = !isEven()

<span class="hljs-comment">// ç”¨æ³•ç¤ºä¾‹</span>
<span class="hljs-keyword">val</span> number = <span class="hljs-number">1234567</span>
<span class="hljs-keyword">val</span> formatted = number.formatWithCommas() <span class="hljs-comment">// ç»“æœ: "1,234,567"</span>

<span class="hljs-keyword">val</span> price = <span class="hljs-number">49.99</span>
<span class="hljs-keyword">val</span> display = price.formatAsPrice() <span class="hljs-comment">// ç»“æœ: "$49.99"</span>

<span class="hljs-keyword">val</span> value = <span class="hljs-number">3.14159f</span>
<span class="hljs-keyword">val</span> rounded = value.roundTo(<span class="hljs-number">2</span>) <span class="hljs-comment">// ç»“æœ: 3.14f</span>

<span class="hljs-keyword">val</span> flag = <span class="hljs-number">1</span>
<span class="hljs-keyword">if</span> (flag.toBoolean()) {
    <span class="hljs-comment">// æ‰§è¡Œé€»è¾‘</span>
}
</code></pre>
<h4 data-id="heading-21">èŒƒå›´ä¸è¾¹ç•Œæ‰©å±•</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-built_in">Int</span>.<span class="hljs-title">clamp</span><span class="hljs-params">(min: <span class="hljs-type">Int</span>, max: <span class="hljs-type">Int</span>)</span></span>: <span class="hljs-built_in">Int</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">when</span> {
        <span class="hljs-keyword">this</span> &lt; min -&gt; min
        <span class="hljs-keyword">this</span> &gt; max -&gt; max
        <span class="hljs-keyword">else</span> -&gt; <span class="hljs-keyword">this</span>
    }
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-built_in">Float</span>.<span class="hljs-title">clamp</span><span class="hljs-params">(min: <span class="hljs-type">Float</span>, max: <span class="hljs-type">Float</span>)</span></span>: <span class="hljs-built_in">Float</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">when</span> {
        <span class="hljs-keyword">this</span> &lt; min -&gt; min
        <span class="hljs-keyword">this</span> &gt; max -&gt; max
        <span class="hljs-keyword">else</span> -&gt; <span class="hljs-keyword">this</span>
    }
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-built_in">Int</span>.<span class="hljs-title">inRange</span><span class="hljs-params">(range: <span class="hljs-type">IntRange</span>)</span></span>: <span class="hljs-built_in">Boolean</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span> <span class="hljs-keyword">in</span> range
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-built_in">Int</span>.<span class="hljs-title">toPercentage</span><span class="hljs-params">(total: <span class="hljs-type">Int</span>)</span></span>: <span class="hljs-built_in">Float</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">if</span> (total == <span class="hljs-number">0</span>) <span class="hljs-number">0f</span> <span class="hljs-keyword">else</span> (<span class="hljs-keyword">this</span>.toFloat() / total) * <span class="hljs-number">100</span>
}

<span class="hljs-comment">// ç”¨æ³•ç¤ºä¾‹</span>
<span class="hljs-keyword">val</span> value = <span class="hljs-number">150</span>
<span class="hljs-keyword">val</span> clamped = value.clamp(<span class="hljs-number">0</span>, <span class="hljs-number">100</span>) <span class="hljs-comment">// ç»“æœ: 100</span>

<span class="hljs-keyword">val</span> progress = <span class="hljs-number">75</span>
<span class="hljs-keyword">if</span> (progress.inRange(<span class="hljs-number">50.</span><span class="hljs-number">.100</span>)) {
    println(<span class="hljs-string">"è¿›åº¦è¿‡åŠ"</span>)
}

<span class="hljs-keyword">val</span> completed = <span class="hljs-number">30</span>
<span class="hljs-keyword">val</span> total = <span class="hljs-number">100</span>
<span class="hljs-keyword">val</span> percentage = completed.toPercentage(total) <span class="hljs-comment">// ç»“æœ: 30.0</span>
</code></pre>
<hr/>
<h3 data-id="heading-22">æ¨¡å¼ 9ï¼šFlow ä¸ LiveData æ‰©å±• (Flow and LiveData Extensions)</h3>
<p><strong>é—®é¢˜ï¼š</strong> Flow å’Œ LiveData çš„æ“ä½œè¿‡äºç¹çã€‚</p>
<h4 data-id="heading-23">Flow æ‰©å±•</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T&gt;</span> Flow<span class="hljs-type">&lt;T&gt;</span>.<span class="hljs-title">throttleFirst</span><span class="hljs-params">(windowDuration: <span class="hljs-type">Long</span>)</span></span>: Flow&lt;T&gt; = flow {
    <span class="hljs-keyword">var</span> lastEmissionTime = <span class="hljs-number">0L</span>
    collect { value -&gt;
        <span class="hljs-keyword">val</span> currentTime = System.currentTimeMillis()
        <span class="hljs-keyword">if</span> (currentTime - lastEmissionTime &gt;= windowDuration) {
            lastEmissionTime = currentTime
            emit(value)
        }
    }
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T&gt;</span> Flow<span class="hljs-type">&lt;List&lt;T&gt;</span>&gt;.<span class="hljs-title">filterNotEmpty</span><span class="hljs-params">()</span></span>: Flow&lt;List&lt;T&gt;&gt; {
    <span class="hljs-keyword">return</span> filter { it.isNotEmpty() }
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T&gt;</span> Flow<span class="hljs-type">&lt;T?&gt;</span>.<span class="hljs-title">filterNotNull</span><span class="hljs-params">()</span></span>: Flow&lt;T&gt; {
    <span class="hljs-keyword">return</span> mapNotNull { it }
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T&gt;</span> Flow<span class="hljs-type">&lt;T&gt;</span>.<span class="hljs-title">onEachDebounce</span><span class="hljs-params">(timeoutMillis: <span class="hljs-type">Long</span>, action: <span class="hljs-type">suspend</span> (<span class="hljs-type">T</span>) -&gt; <span class="hljs-type">Unit</span>)</span></span>: Flow&lt;T&gt; {
    <span class="hljs-keyword">return</span> debounce(timeoutMillis).onEach { action(it) }
}

<span class="hljs-comment">// ç”¨æ³•ç¤ºä¾‹</span>
searchQueryFlow
    .debounce(<span class="hljs-number">300</span>) <span class="hljs-comment">// é˜²æŠ–</span>
    .filterNotNull()
    .collect { query -&gt;
        performSearch(query)
    }

clickFlow
    .throttleFirst(<span class="hljs-number">1000</span>) <span class="hljs-comment">// èŠ‚æµï¼Œé˜²æ­¢è¿ç»­ç‚¹å‡»</span>
    .collect {
        handleClick()
    }

itemsFlow
    .filterNotEmpty()
    .collect { items -&gt;
        displayItems(items)
    }
</code></pre>
<h4 data-id="heading-24">LiveData æ‰©å±•å‡½æ•°</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T&gt;</span> LiveData<span class="hljs-type">&lt;T&gt;</span>.<span class="hljs-title">observeOnce</span><span class="hljs-params">(owner: <span class="hljs-type">LifecycleOwner</span>, observer: (<span class="hljs-type">T</span>) -&gt; <span class="hljs-type">Unit</span>)</span></span> {
    observe(owner, <span class="hljs-keyword">object</span> : Observer&lt;T&gt; {
        <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onChanged</span><span class="hljs-params">(value: <span class="hljs-type">T</span>)</span></span> {
            observer(value)
            removeObserver(<span class="hljs-keyword">this</span>)
        }
    })
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T&gt;</span> LiveData<span class="hljs-type">&lt;T?&gt;</span>.<span class="hljs-title">filterNotNull</span><span class="hljs-params">()</span></span>: LiveData&lt;T&gt; {
    <span class="hljs-keyword">return</span> map { it }.filter { it != <span class="hljs-literal">null</span> } <span class="hljs-keyword">as</span> LiveData&lt;T&gt;
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;X, Y&gt;</span> LiveData<span class="hljs-type">&lt;X&gt;</span>.<span class="hljs-title">map</span><span class="hljs-params">(transform: (<span class="hljs-type">X</span>) -&gt; <span class="hljs-type">Y</span>)</span></span>: LiveData&lt;Y&gt; {
    <span class="hljs-keyword">return</span> Transformations.map(<span class="hljs-keyword">this</span>, transform)
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;X, Y&gt;</span> LiveData<span class="hljs-type">&lt;X&gt;</span>.<span class="hljs-title">switchMap</span><span class="hljs-params">(transform: (<span class="hljs-type">X</span>) -&gt; <span class="hljs-type">LiveData</span>&lt;<span class="hljs-type">Y</span>&gt;)</span></span>: LiveData&lt;Y&gt; {
    <span class="hljs-keyword">return</span> Transformations.switchMap(<span class="hljs-keyword">this</span>, transform)
}

<span class="hljs-comment">// ç”¨æ³•ç¤ºä¾‹</span>
userLiveData.observeOnce(viewLifecycleOwner) { user -&gt;
    initializeUser(user) <span class="hljs-comment">// ä»…è§‚å¯Ÿä¸€æ¬¡</span>
}

<span class="hljs-keyword">val</span> userNameLiveData = userLiveData
    .filterNotNull()
    .map { it.name }
</code></pre>
<hr/>
<h3 data-id="heading-25">æ¨¡å¼ 10ï¼šIntent ä¸ Bundle æ‰©å±• (Intent and Bundle Extensions)</h3>
<p><strong>é—®é¢˜ï¼š</strong> Intent çš„åˆ›å»ºå’Œ Bundle çš„æ“ä½œä»£ç è¿‡äºç¹çã€‚</p>
<h4 data-id="heading-26">Intent æ‰©å±•å‡½æ•°</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">inline</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;<span class="hljs-keyword">reified</span> T : Activity&gt;</span> Context.<span class="hljs-title">startActivity</span><span class="hljs-params">(
    options: <span class="hljs-type">Bundle</span>? = <span class="hljs-literal">null</span>,
    <span class="hljs-keyword">init</span>: <span class="hljs-type">Intent</span>.() -&gt; <span class="hljs-type">Unit</span> = {}
)</span></span> {
    <span class="hljs-keyword">val</span> intent = Intent(<span class="hljs-keyword">this</span>, T::<span class="hljs-keyword">class</span>.java)
    intent.<span class="hljs-keyword">init</span>()
    startActivity(intent, options)
}

<span class="hljs-keyword">inline</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;<span class="hljs-keyword">reified</span> T : Activity&gt;</span> Context.<span class="hljs-title">startActivityWithExtras</span><span class="hljs-params">(
    <span class="hljs-keyword">vararg</span> params: <span class="hljs-type">Pair</span>&lt;<span class="hljs-type">String</span>, Any?&gt;
)</span></span> {
    <span class="hljs-keyword">val</span> intent = Intent(<span class="hljs-keyword">this</span>, T::<span class="hljs-keyword">class</span>.java)
    params.forEach { (key, value) -&gt;
        <span class="hljs-keyword">when</span> (value) {
            <span class="hljs-keyword">is</span> String -&gt; intent.putExtra(key, value)
            <span class="hljs-keyword">is</span> <span class="hljs-built_in">Int</span> -&gt; intent.putExtra(key, value)
            <span class="hljs-keyword">is</span> <span class="hljs-built_in">Boolean</span> -&gt; intent.putExtra(key, value)
            <span class="hljs-keyword">is</span> Parcelable -&gt; intent.putExtra(key, value)
            <span class="hljs-keyword">is</span> Serializable -&gt; intent.putExtra(key, value)
        }
    }
    startActivity(intent)
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> Intent.<span class="hljs-title">clearStack</span><span class="hljs-params">()</span></span> {
    flags = Intent.FLAG_ACTIVITY_NEW_TASK or Intent.FLAG_ACTIVITY_CLEAR_TASK
}

<span class="hljs-comment">// ç”¨æ³•ç¤ºä¾‹</span>
startActivity&lt;ProfileActivity&gt; {
    putExtra(<span class="hljs-string">"userId"</span>, userId)
    putExtra(<span class="hljs-string">"userName"</span>, userName)
}

startActivityWithExtras&lt;DetailActivity&gt;(
    <span class="hljs-string">"itemId"</span> to itemId,
    <span class="hljs-string">"showComments"</span> to <span class="hljs-literal">true</span>
)

<span class="hljs-keyword">val</span> intent = Intent(<span class="hljs-keyword">this</span>, MainActivity::<span class="hljs-keyword">class</span>.java)
intent.clearStack()
startActivity(intent)
</code></pre>
<h4 data-id="heading-27">Bundle æ‰©å±•å‡½æ•°</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">inline</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;<span class="hljs-keyword">reified</span> T : Parcelable&gt;</span> Bundle.<span class="hljs-title">getParcelableCompat</span><span class="hljs-params">(key: <span class="hljs-type">String</span>)</span></span>: T? {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">if</span> (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.TIRAMISU) {
        getParcelable(key, T::<span class="hljs-keyword">class</span>.java)
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-meta">@Suppress(<span class="hljs-string">"DEPRECATION"</span>)</span>
        getParcelable(key)
    }
}

<span class="hljs-keyword">inline</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;<span class="hljs-keyword">reified</span> T : Serializable&gt;</span> Bundle.<span class="hljs-title">getSerializableCompat</span><span class="hljs-params">(key: <span class="hljs-type">String</span>)</span></span>: T? {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">if</span> (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.TIRAMISU) {
        getSerializable(key, T::<span class="hljs-keyword">class</span>.java)
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-meta">@Suppress(<span class="hljs-string">"DEPRECATION"</span>)</span>
        getSerializable(key) <span class="hljs-keyword">as</span>? T
    }
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">bundleOf</span><span class="hljs-params">(<span class="hljs-keyword">vararg</span> pairs: <span class="hljs-type">Pair</span>&lt;<span class="hljs-type">String</span>, Any?&gt;)</span></span>: Bundle {
    <span class="hljs-keyword">return</span> Bundle().apply {
        pairs.forEach { (key, value) -&gt;
            <span class="hljs-keyword">when</span> (value) {
                <span class="hljs-keyword">is</span> String -&gt; putString(key, value)
                <span class="hljs-keyword">is</span> <span class="hljs-built_in">Int</span> -&gt; putInt(key, value)
                <span class="hljs-keyword">is</span> <span class="hljs-built_in">Boolean</span> -&gt; putBoolean(key, value)
                <span class="hljs-keyword">is</span> Parcelable -&gt; putParcelable(key, value)
                <span class="hljs-keyword">is</span> Serializable -&gt; putSerializable(key, value)
            }
        }
    }
}

<span class="hljs-comment">// ç”¨æ³•ç¤ºä¾‹</span>
<span class="hljs-keyword">val</span> bundle = bundleOf(
    <span class="hljs-string">"userId"</span> to <span class="hljs-number">123</span>,
    <span class="hljs-string">"userName"</span> to <span class="hljs-string">"John"</span>,
    <span class="hljs-string">"isPremium"</span> to <span class="hljs-literal">true</span>
)

<span class="hljs-keyword">val</span> user: User? = arguments?.getParcelableCompat(<span class="hljs-string">"user"</span>)
<span class="hljs-keyword">val</span> <span class="hljs-keyword">data</span>: MyData? = savedInstanceState?.getSerializableCompat(<span class="hljs-string">"data"</span>)
</code></pre>
<hr/>
<p>æ‰©å±•å‡½æ•°å°†é‡å¤çš„ä»£ç è½¬åŒ–ä¸ºç®€æ´ä¸”å…·è¡¨ç°åŠ›çš„ APIã€‚ä»è¿™åç§æ¨¡å¼å¼€å§‹å°è¯•ï¼Œä½ å°†è§è¯ä½ çš„ä»£ç åº“å˜å¾—æ›´åŠ æ˜“äºç»´æŠ¤ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Agentå¼€å‘åº”çŸ¥åº”ä¼š(Langfuse)ï¼šLangfuse Sessionæ¦‚å¿µè¯¦è§£å’Œå®æˆ˜åº”ç”¨]]></title>    <link>https://juejin.cn/post/7605807405307625535</link>    <guid>https://juejin.cn/post/7605807405307625535</guid>    <pubDate>2026-02-13T03:27:22.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605807405307625535" data-draft-id="7605941424535978038" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Agentå¼€å‘åº”çŸ¥åº”ä¼š(Langfuse)ï¼šLangfuse Sessionæ¦‚å¿µè¯¦è§£å’Œå®æˆ˜åº”ç”¨"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,Python,LLM"/> <meta itemprop="datePublished" content="2026-02-13T03:27:22.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="zaizaizhao"/> <meta itemprop="url" content="https://juejin.cn/user/906425682113933"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Agentå¼€å‘åº”çŸ¥åº”ä¼š(Langfuse)ï¼šLangfuse Sessionæ¦‚å¿µè¯¦è§£å’Œå®æˆ˜åº”ç”¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/906425682113933/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    zaizaizhao
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-13T03:27:22.000Z" title="Fri Feb 13 2026 03:27:22 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æœ€è¿‘åœ¨åšä¸€ä¸ª Text-to-SQL çš„ Agent é¡¹ç›® <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fzaizaizhao%2Feasysql" target="_blank" title="https://github.com/zaizaizhao/easysql" ref="nofollow noopener noreferrer">EasySQL</a>ï¼Œè¿™ç¯‡æ–‡ç« å°±æŠŠæˆ‘langfuseçš„sessionä½¿ç”¨æ•´ç†ä¸€ä¸‹ï¼Œä»£ç éƒ½æ˜¯ä»é¡¹ç›®é‡Œç›´æ¥æ¬çš„ï¼Œæ¬¢è¿å¤§ä½¬ä»¬é«˜æŠ¬è´µæ‰‹ç‚¹ç‚¹starï¼Œå…±å»ºã€äº¤æµã€‚</p>
</blockquote>
<h3 data-id="heading-0">Langfuseå®˜æ–¹æ–‡æ¡£çš„åŸæ–‡å®šä¹‰</h3>
<blockquote>
<p>Many interactions with LLM applications span multiple traces and observations. Sessions in Langfuse are a special way to group these observations across traces together and see a simple session replay of the entire interaction.
Optionally, traces can be grouped into sessions. Sessions are used to group traces that are part of the same user interaction. A common example is a thread in a chat interface.</p>
</blockquote>
<p>ç¿»è¯‘ä¸€ä¸‹ï¼šä¸€æ¬¡ç”¨æˆ·ä¸ LLM åº”ç”¨çš„äº¤äº’å¾€å¾€ä¸åªä¸€ä¸ªè¯·æ±‚ã€‚æ¯”å¦‚ç”¨æˆ·åœ¨èŠå¤©ç•Œé¢ä¸­è¿ç»­é—®äº† 3 ä¸ªé—®é¢˜ï¼Œæ¯ä¸ªé—®é¢˜æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ Traceï¼ˆä¸€æ¬¡å®Œæ•´çš„ LLMè°ƒç”¨é“¾è·¯ï¼‰ï¼Œä½†å®ƒä»¬å±äºåŒä¸€æ¬¡ä¼šè¯ã€‚Session å°±æ˜¯æŠŠè¿™äº›ç›¸å…³çš„ Trace å½’åˆ°ä¸€ç»„ã€‚</p>
<h5 data-id="heading-1">Session</h5>





















<table><thead><tr><th>session_id æ ¼å¼</th><th>ä»»æ„ US-ASCII å­—ç¬¦ä¸²ï¼Œå°äº 200 å­—ç¬¦</th></tr></thead><tbody><tr><td>å½’ç»„é€»è¾‘</td><td>æ‰€æœ‰æºå¸¦ç›¸åŒ session_id çš„ Trace è‡ªåŠ¨å½’å…¥åŒä¸€ä¸ª Session</td></tr><tr><td>åˆ›å»ºæ—¶æœº</td><td>æ— éœ€æ˜¾å¼åˆ›å»º Session å¯¹è±¡ï¼Œç¬¬ä¸€ä¸ªæºå¸¦è¯¥ session_id çš„ Trace å‡ºç°æ—¶è‡ªåŠ¨åˆ›å»º</td></tr><tr><td>Trace çš„å…³ç³»</td><td>ä¸€ä¸ª Session åŒ…å«å¤šä¸ª Traceï¼Œä¸€ä¸ª Trace åªå±äºä¸€ä¸ª Session</td></tr></tbody></table>
<h3 data-id="heading-2">é¡¹ç›®ä¸¾ä¾‹</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/55cf9fda7f0e4c008d4e55c9059cbbba~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgemFpemFpemhhbw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771558042&amp;x-signature=%2FxdHKHN1MMoZ5hOExF9FK8UQwCw%3D" alt="image.png" loading="lazy"/></p>
<p>æ²¡æœ‰Sessionæ—¶ï¼šè¿™ä¸¤ä¸ªTraceï¼ˆä¸€ä¸ªä¼šè¯ä¸­çš„ä¸¤ä¸ªé—®ç­”ï¼‰ åœ¨Langfuse Dashboardä¸­æ˜¯æ•£è½çš„ï¼Œä½ ä¸çŸ¥é“å®ƒä»¬ä¹‹é—´æœ‰å…³è”ã€‚æœ‰Sessionæ—¶ï¼šç‚¹è¿›æŸä¸ªSessionï¼Œèƒ½çœ‹åˆ°å®Œæ•´çš„å¤šæ¬¡å¯¹è¯å›æ”¾â€”â€”ç”¨æˆ·ä»ç¬¬1ä¸ªé—®é¢˜åˆ°ç¬¬3ä¸ªé—®é¢˜çš„å®Œæ•´é“¾è·¯ã€‚</p>
<h5 data-id="heading-3">æ— sessionçš„æƒ…å†µä¸‹ï¼Œæ‰€æœ‰çš„traceéƒ½é›†ä¸­å±•ç¤ºæ— æ³•ç­›é€‰</h5>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ca5242ec11bb449285ce93e36d0543f6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgemFpemFpemhhbw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771558042&amp;x-signature=uT22W6CeJDMHnJDVYAu5P%2FlAXJM%3D" alt="image.png" loading="lazy"/></p>
<p>æœ‰sessionçš„æƒ…å†µï¼Œå¯ä»¥æ ¹æ®sessionå±•ç¤ºï¼Œæˆ‘è¿™é‡Œå°±å¯ä»¥é€šè¿‡åŒä¸ªsessionæ¥è§‚å¯Ÿç¬¬äºŒä¸ªé—®é¢˜æœ‰æ²¡æœ‰å–å¾—ç¬¬ä¸€ä¸ªé—®é¢˜çš„å†å²å¯¹è¯ä¸Šä¸‹æ–‡ï¼Œç”±æ­¤æ¥åˆ¤æ–­ä»£ç ä¸­çš„å¤„ç†æ˜¯å¦åˆç†</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c964b022d921418ca5729b12c8fbbb9c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgemFpemFpemhhbw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771558042&amp;x-signature=kGqmnZzZvjsOHWVthFLpIg5RaiY%3D" alt="image.png" loading="lazy"/></p>
<p>ä¹Ÿå¯ä»¥åœ¨Dashboardsä¸­ç­›é€‰</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ea47731103534a73ad8db86c288ad898~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgemFpemFpemhhbw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771558042&amp;x-signature=SfbNp6%2B4JCaWmxXav2h6kH060mk%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-4">ä»£ç å®ç°</h4>
<p>æ ¸å¿ƒä»£ç åœ¨ query_service.pyã€‚ä¹Ÿå°±æ˜¯åˆ›å»ºä¸€ä¸ªä¼šè¯session idçš„åœ°æ–¹ï¼Œç”±äºé¡¹ç›®ä¸­å·²ç»è®¾ç½®äº†session idæ¥åŒºåˆ†ä¸åŒçš„ä¼šè¯ï¼Œæ‰€ä»¥è¿™é‡Œå¯ä»¥ç›´æ¥å¤ç”¨ï¼Œä¿è¯langfuseä¸­çš„session idå’Œæ•°æ®åº“ä¸­çš„ä¼šè¯session idä¸€è‡´ã€‚è¿™æ ·åšçš„å¥½å¤„æ˜¯ï¼šå½“åœ¨ Langfuse Dashboard ä¸­çœ‹åˆ°æŸä¸ªSession æœ‰é—®é¢˜æ—¶ï¼Œå¯ä»¥ç›´æ¥ç”¨è¿™ä¸ª ID å»ä¸šåŠ¡æ•°æ®åº“ä¸­æŸ¥å¯¹åº”çš„ä¼šè¯è®°å½•ï¼Œä¸¤è¾¹çš„ ID æ˜¯ä¸€è‡´çš„ã€‚ï¼ˆè¿™ä¹Ÿæ˜¯æˆ‘è®¤ä¸ºæœ€é‡è¦çš„ä¸€ç‚¹ï¼‰</p>
<pre><code class="hljs language-python" lang="python">  <span class="hljs-keyword">def</span> <span class="hljs-title function_">_make_config</span>(<span class="hljs-params">self, session_id: <span class="hljs-built_in">str</span>, thread_id: <span class="hljs-built_in">str</span> | <span class="hljs-literal">None</span> = <span class="hljs-literal">None</span></span>) -&gt; RunnableConfig:
      effective_thread_id = thread_id <span class="hljs-keyword">or</span> session_id
      config: RunnableConfig = {<span class="hljs-string">"configurable"</span>: {<span class="hljs-string">"thread_id"</span>: effective_thread_id}}
      <span class="hljs-keyword">if</span> self.callbacks:
          config[<span class="hljs-string">"callbacks"</span>] = self.callbacks
          config[<span class="hljs-string">"metadata"</span>] = {                          <span class="hljs-comment"># â† å…³é”®</span>
              <span class="hljs-string">"langfuse_session_id"</span>: session_id,          <span class="hljs-comment"># â† Session éš”ç¦»</span>
              <span class="hljs-string">"langfuse_tags"</span>: [<span class="hljs-string">"text2sql"</span>],              <span class="hljs-comment"># â† æ ‡ç­¾</span>
          }
          logger.debug(<span class="hljs-string">f"LangFuse callbacks attached: <span class="hljs-subst">{<span class="hljs-built_in">len</span>(self.callbacks)}</span> handler(s)"</span>)
      <span class="hljs-keyword">return</span> config
</code></pre>
<pre><code class="hljs language-python" lang="python">    <span class="hljs-keyword">async</span> <span class="hljs-keyword">for</span> chunk <span class="hljs-keyword">in</span> self.graph.astream(
        input_state,
        self._make_config(session.session_id, effective_thread_id),
        stream_mode=[<span class="hljs-string">"updates"</span>, <span class="hljs-string">"custom"</span>],
    ):
</code></pre>
<p>å·¥ä½œåŸç†</p>
<p>è¿™é‡Œç”¨çš„æ˜¯ Langfuse å®˜æ–¹æ¨èçš„ metadata ä¼ å‚æ–¹å¼ã€‚å®˜æ–¹æ–‡æ¡£åŸæ–‡ï¼š</p>
<blockquote>
<p>With the Python SDK, you can set trace attributes dynamically via metadata fields in chain invocation by passing a config dictionary.This is the simplest approach for adding trace context to your LangChain executions without additional setup.</p>
</blockquote>
<p>å®˜æ–¹ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-python" lang="python"> response = chain.invoke(
      {<span class="hljs-string">"topic"</span>: <span class="hljs-string">"cats"</span>},
      config={
          <span class="hljs-string">"callbacks"</span>: [langfuse_handler],
          <span class="hljs-string">"metadata"</span>: {
              <span class="hljs-string">"langfuse_user_id"</span>: <span class="hljs-string">"random-user"</span>,
              <span class="hljs-string">"langfuse_session_id"</span>: <span class="hljs-string">"random-session"</span>,     
              <span class="hljs-string">"langfuse_tags"</span>: [<span class="hljs-string">"random-tag-1"</span>, <span class="hljs-string">"random-tag-2"</span>] 
          }
      }
  )
</code></pre>
<h3 data-id="heading-5">Sessionå¸¦æ¥çš„ç›‘æ§æ„ä¹‰</h3>
<h5 data-id="heading-6">Session çº§åˆ«çš„èšåˆåˆ†æ</h5>

























<table><thead><tr><th>æ¯ä¸ª Session çš„ Trace æ•°é‡</th><th>ç”¨æˆ·å¹³å‡é—®å‡ è½®æ‰å®Œæˆä»»åŠ¡</th><th>** è½®æ¬¡å¤š = å¯èƒ½éœ€è¦ä¼˜åŒ–è¿½é—®ä½“éªŒ**</th></tr></thead><tbody><tr><td>æ¯ä¸ª Session çš„ æ€» Token</td><td>ä¸€æ¬¡å®Œæ•´äº¤äº’çš„æ€»æ¶ˆè€—</td><td>è¯„ä¼°å•æ¬¡ç”¨æˆ·äº¤äº’çš„æˆæœ¬</td></tr><tr><td>æ¯ä¸ª Session çš„ æ€»å»¶è¿Ÿ</td><td>ç”¨æˆ·å®Œæˆä»»åŠ¡çš„æ€»ç­‰å¾…æ—¶é—´</td><td>è¯„ä¼°ç«¯åˆ°ç«¯çš„ç”¨æˆ·ä½“éªŒ</td></tr><tr><td>æ¯ä¸ª Session çš„ å¤±è´¥ Trace æ¯”ä¾‹</td><td>å¤šè½®ä¸­æœ‰å‡ è½®å‡ºé”™</td><td>å®šä½å“ªäº›ç±»å‹çš„è¿½é—®å®¹æ˜“å¤±è´¥</td></tr></tbody></table>
<h5 data-id="heading-7">å¯¹æ¯”æ²¡æœ‰session</h5>






























<table><thead><tr><th>åœºæ™¯</th><th>æ²¡æœ‰ Session</th><th>æœ‰ Session</th></tr></thead><tbody><tr><td>æŸ¥çœ‹æŸç”¨æˆ·çš„å®Œæ•´äº¤äº’</td><td>éœ€è¦è‡ªå·±æŒ‰æ—¶é—´æ’åºã€æ‰‹åŠ¨å…³è”</td><td>ç›´æ¥ç‚¹è¿› Session çœ‹å›æ”¾</td></tr><tr><td>ç»Ÿè®¡"ç”¨æˆ·å¹³å‡å‡ è½®å®Œæˆä»»åŠ¡"</td><td>æ— æ³•ç»Ÿè®¡</td><td>Dashboard ç›´æ¥æä¾›</td></tr><tr><td>åˆ†æ"è¿½é—®æ—¶ SQL è´¨é‡æ˜¯å¦ä¸‹é™"</td><td>éœ€è¦å¯¼å‡ºæ•°æ®å†™è„šæœ¬</td><td>æŒ‰ Session å†…çš„ Trace é¡ºåºç›´æ¥å¯¹æ¯”</td></tr><tr><td>å®šä½"ç”¨æˆ·åé¦ˆä½“éªŒå·®"çš„é—®é¢˜</td><td>åªèƒ½é€æ¡ Trace æŸ¥çœ‹</td><td>æ‹¿åˆ° session_id ç›´æ¥çœ‹å…¨è¿‡ç¨‹</td></tr></tbody></table>
<h3 data-id="heading-8">æ€»ç»“</h3>
<p>sessionæ˜¯ä¸€ä¸ªå¾ˆå°çš„çŸ¥è¯†ç‚¹ï¼Œä½†æ˜¯ä½¿ç”¨çš„å¥½å¯¹æˆ‘ä»¬æ•´ä¸ªagentå¼€å‘å¸¦æ¥çš„å¢ç›Šæ˜¯å·¨å¤§ã€‚</p>
<p>ä»¥ä¸Šæ‰€æœ‰ä»£ç ç¤ºä¾‹å‡æ¥è‡ªæˆ‘çš„å¼€æºé¡¹ç›® <strong>EasySQL</strong> â€”â€” ä¸€ä¸ª Text-to-SQL æ™ºèƒ½ä½“åˆ†æåº”ç”¨ï¼Œé¡¹ç›®åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fzaizaizhao%2Feasysql" target="_blank" title="https://github.com/zaizaizhao/easysql" ref="nofollow noopener noreferrer">github.com/zaizaizhao/â€¦</a>ã€‚é¡¹ç›®ä¸»è¦æŠ€æœ¯æ ˆåŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>LangGraph</strong>ï¼šæ„å»ºå¤šæ­¥éª¤ Agent çŠ¶æ€æœºï¼Œæ”¯æŒæ¡ä»¶è·¯ç”±ã€Human-in-the-Loop æ¾„æ¸…ã€SQL ç”Ÿæˆâ†’éªŒè¯â†’ä¿®å¤çš„è¿­ä»£å¾ªç¯</li>
<li><strong>LangChain</strong>ï¼šLLM è°ƒç”¨æŠ½è±¡ä¸ RunnableConfig é…ç½®ä¼ é€’</li>
<li><strong>Langfuse</strong>ï¼šCallback + æ‰‹åŠ¨ Span åŒæ¨¡å¼å¯è§‚æµ‹æ€§ï¼Œå®ç°å…¨é“¾è·¯è¿½è¸ªä¸ä¸šåŠ¡æ±‡æ€»</li>
<li><strong>PostgreSQL + AsyncPostgresSaver</strong>ï¼šLangGraph Checkpointer çŠ¶æ€æŒä¹…åŒ–ï¼Œæ”¯æŒå¤šè½®å¯¹è¯ä¸Šä¸‹æ–‡</li>
<li><strong>FastAPI + Uvicorn</strong>ï¼šå¼‚æ­¥ API æœåŠ¡å±‚ï¼Œæä¾›æµå¼ SSE å“åº”</li>
<li><strong>Milvus</strong>ï¼šå‘é‡æ•°æ®åº“ï¼Œç”¨äº Schema è¯­ä¹‰æ£€ç´¢</li>
<li><strong>Neo4j</strong>ï¼š å›¾æ•°æ®åº“ï¼Œç”¨äºçŸ¥è¯†å›¾è°±æ„å»º</li>
<li><strong>Pydantic Settings</strong>ï¼šç±»å‹å®‰å…¨çš„é…ç½®ç®¡ç†ï¼Œæ”¯æŒç¯å¢ƒå˜é‡è¦†ç›–</li>
</ul>
<p>é¡¹ç›®ç¤ºä¾‹</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/64a13c7452a6489eb1a98457a9893b16~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgemFpemFpemhhbw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771558042&amp;x-signature=Isad%2BABbvqYPIB2dxqX9EfW03uo%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2d40fae962104a7b83d9a475b45348d5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgemFpemFpemhhbw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771558042&amp;x-signature=1IE3mWfiDse08V2zs2U0jjj8Oz0%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2d89d860902c4a998c9793028a46a62b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgemFpemFpemhhbw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771558042&amp;x-signature=zYVTbT1aAn2LWsXZsyp6egZu3L4%3D" alt="image.png" loading="lazy"/></p>
<p>æ¬¢è¿ Star â­ å’Œäº¤æµã€å…±å»ºï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[KIE Drools 10.x è§„åˆ™å¼•æ“å¿«é€Ÿå…¥é—¨]]></title>    <link>https://juejin.cn/post/7605811866908753929</link>    <guid>https://juejin.cn/post/7605811866908753929</guid>    <pubDate>2026-02-13T03:47:17.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605811866908753929" data-draft-id="7605769126272188462" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="KIE Drools 10.x è§„åˆ™å¼•æ“å¿«é€Ÿå…¥é—¨"/> <meta itemprop="keywords" content="Java,åç«¯"/> <meta itemprop="datePublished" content="2026-02-13T03:47:17.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Javaå°å·"/> <meta itemprop="url" content="https://juejin.cn/user/1614502546384749"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            KIE Drools 10.x è§„åˆ™å¼•æ“å¿«é€Ÿå…¥é—¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1614502546384749/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Javaå°å·
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-13T03:47:17.000Z" title="Fri Feb 13 2026 03:47:17 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»20åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:14px;overflow-x:hidden;color:var(--cyanosis-base-color);transition:color .35s;--cyanosis-base-color:#353535;--cyanosis-title-color:#005bb7;--cyanosis-strong-color:#2196f3;--cyanosis-em-color:#4fc3f7;--cyanosis-del-color:#ccc;--cyanosis-link-color:#3da8f5;--cyanosis-linkh-color:#007fff;--cyanosis-border-color:#bedcff;--cyanosis-border-color-2:#ececec;--cyanosis-bg-color:#fff;--cyanosis-blockquote-color:#8c8c8c;--cyanosis-blockquote-bg-color:#f0fdff;--cyanosis-code-color:#c2185b;--cyanosis-code-bg-color:#fff4f4;--cyanosis-code-pre-color:#f8f8f8;--cyanosis-table-border-color:#c3e0fd;--cyanosis-table-th-color:#dff0ff;--cyanosis-table-tht-color:#005bb7;--cyanosis-table-tr-nc-color:#f7fbff;--cyanosis-table-trh-color:#e0edf7;--cyanosis-slct-title-color:#005bb7;--cyanosis-slct-titlebg-color:rgba(175,207,247,0.25);--cyanosis-slct-text-color:#c80000;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#e8ebec;--cyanosis-slct-codebg-color:#ffeaeb;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body.__dark{--cyanosis-base-color:#cacaca;--cyanosis-title-color:#ddd;--cyanosis-strong-color:#fe9900;--cyanosis-em-color:#ffd28e;--cyanosis-del-color:#ccc;--cyanosis-link-color:#ffb648;--cyanosis-linkh-color:#fe9900;--cyanosis-border-color:#ffe3ba;--cyanosis-border-color-2:#ffcb7b;--cyanosis-bg-color:#2f2f2f;--cyanosis-blockquote-color:#c7c7c7;--cyanosis-blockquote-bg-color:rgba(255,199,116,0.1);--cyanosis-code-color:#000;--cyanosis-code-bg-color:#ffcb7b;--cyanosis-code-pre-color:rgba(255,227,185,0.5);--cyanosis-table-border-color:#fe9900;--cyanosis-table-th-color:#ffb648;--cyanosis-table-tht-color:#000;--cyanosis-table-tr-nc-color:#6d5736;--cyanosis-table-trh-color:#947443;--cyanosis-slct-title-color:#000;--cyanosis-slct-titlebg-color:#fe9900;--cyanosis-slct-text-color:#00c888;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#000;--cyanosis-slct-codebg-color:#ffcb7b;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body h1{padding-bottom:4px;font-size:30px}.markdown-body h1,.markdown-body h2{margin-top:36px;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);transition:color .35s}.markdown-body h2{position:relative;padding-left:10px;padding-right:10px;padding-bottom:10px;font-size:24px;border-bottom:1px solid var(--cyanosis-border-color-2)}.markdown-body h2:before{content:"ã€Œ";position:absolute;top:-6px;left:-14px}.markdown-body h2:after{content:"ã€";position:relative;top:6px;right:auto}.markdown-body h3{position:relative;padding-bottom:0;margin-top:30px;margin-bottom:10px;font-size:20px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h3:before{content:"Â»";padding-right:6px;color:var(--cyanosis-strong-color)}.markdown-body h4{margin-top:24px;font-size:16px}.markdown-body h4,.markdown-body h5{padding-bottom:0;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h5{margin-top:18px;font-size:14px}.markdown-body h6{padding-bottom:0;margin-top:12px;margin-bottom:10px;font-size:12px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body p{line-height:inherit;margin-top:16px;margin-bottom:16px}.markdown-body img{max-width:100%}.markdown-body hr{position:relative;width:98%;height:1px;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,var(--cyanosis-link-color),rgba(255,0,0,.3),hsla(0,0%,100%,.1),rgba(255,0,0,.3),var(--cyanosis-link-color));border-width:0;overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background-color:var(--cyanosis-bg-color);background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center;transition:background-color .5s}.markdown-body code{padding:.065em .4em;font-size:.87em;color:var(--cyanosis-code-color);word-break:break-word;overflow-x:auto;background-color:var(--cyanosis-code-bg-color);border-radius:2px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;padding:16px 12px;margin:0;font-size:12px;color:#333;word-break:normal;overflow-x:auto;background:var(--cyanosis-code-pre-color)}.markdown-body pre&gt;code::-webkit-scrollbar{width:4px;height:4px}.markdown-body pre&gt;code::-webkit-scrollbar-track{background-color:var(--cyanosis-border-color)}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:var(--cyanosis-strong-color);border-radius:10px}.markdown-body a{position:relative;text-decoration:none;color:var(--cyanosis-link-color);border-bottom:1px solid var(--cyanosis-border-color)}.markdown-body a:hover{border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body a:active,.markdown-body a:hover{color:var(--cyanosis-linkh-color)}.markdown-body a:after{position:absolute;content:"";top:100%;left:0;width:100%;opacity:0;border-bottom:1px solid var(--cyanosis-border-color);transition:top .3s,opacity .3s;transform:translateZ(0)}.markdown-body a:hover:after{top:0;opacity:1;border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid var(--cyanosis-table-border-color);border-spacing:0;border-collapse:collapse}.markdown-body table thead{color:#000;text-align:left;font-size:14px;background:#f6f6f6}.markdown-body table tr:nth-child(2n){background-color:var(--cyanosis-table-tr-nc-color)}.markdown-body table tr:hover{background-color:var(--cyanosis-table-trh-color)}.markdown-body table td,.markdown-body table th{padding:12px 8px;line-height:24px;border:1px solid var(--cyanosis-table-border-color)}.markdown-body table th{color:var(--cyanosis-table-tht-color);background-color:var(--cyanosis-table-th-color)}.markdown-body table td{min-width:120px}.markdown-body blockquote{color:var(--cyanosis-blockquote-color);border-left:4px solid var(--cyanosis-strong-color);background-color:var(--cyanosis-blockquote-bg-color);padding:1px 20px;margin:22px 0;transition:color .35s}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body b,.markdown-body blockquote&gt;b,.markdown-body blockquote&gt;strong,.markdown-body strong{color:var(--cyanosis-strong-color)}.markdown-body em,.markdown-body i{color:var(--cyanosis-em-color)}.markdown-body del{color:var(--cyanosis-del-color)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:4px}.markdown-body ol li{padding-left:6px}.markdown-body details&gt;summary{outline:none;color:var(--cyanosis-title-color);font-size:20px;font-weight:bolder;border-bottom:1px solid var(--cyanosis-border-color);cursor:pointer}.markdown-body details&gt;p{padding:10px 20px;margin:10px 0 0;color:#666;background-color:var(--cyanosis-blockquote-bg-color);border:2px dashed var(--cyanosis-strong-color)}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection{color:var(--cyanosis-slct-title-color);background-color:var(--cyanosis-slct-titlebg-color)}.markdown-body ol li::selection,.markdown-body p::selection,.markdown-body ul li::selection{color:var(--cyanosis-slct-text-color);background-color:var(--cyanosis-slct-bg-color)}.markdown-body a::selection,.markdown-body b::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:var(--cyanosis-slct-elbg-color)}.markdown-body del::selection{color:var(--cyanosis-slct-del-color);background-color:var(--cyanosis-slct-elbg-color)}.markdown-body table thead th::selection{background-color:transparent}.markdown-body table tbody td::selection{background-color:var(--cyanosis-slct-bg-color)}.markdown-body code::selection{background-color:var(--cyanosis-slct-codebg-color)}.markdown-body pre&gt;code::selection{background-color:var(--cyanosis-slct-prebg-color)}.markdown-body .contains-task-list{padding-left:14px;list-style:none}.markdown-body .contains-task-list input[type=checkbox]{position:relative}.markdown-body .contains-task-list input[type=checkbox]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;width:inherit;height:inherit;background:#f0f8ff;border:1px solid #add6ff;border-radius:2px;box-sizing:border-box;z-index:1}.markdown-body .contains-task-list input[type=checkbox]:checked:after{content:"âœ“";position:absolute;top:-12px;left:0;right:0;bottom:0;width:0;height:0;color:#f55;font-size:20px;font-weight:700;z-index:2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atom-one-dark">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#abb2bf;background:#282c34}.hljs-comment,.hljs-quote{color:#5c6370;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#c678dd}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e06c75}.hljs-literal{color:#56b6c2}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#98c379}.hljs-built_in,.hljs-class .hljs-title{color:#e6c07b}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#d19a66}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#61aeee}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><h3 data-id="heading-0">å‰è¨€</h3>
<p>è‡ªDroolsåŠ å…¥Apache KIEç»„ç»‡ä¸‹çš„é¡¹ç›®åï¼Œå…¶ç‰ˆæœ¬ç ”å‘å‘ç€APIæ ‡å‡†åŒ–ã€ç”Ÿæ€æ›´å®Œå–„çš„æ–¹å‘ä¸æ–­è¿­ä»£è¿ˆè¿›ã€‚ä»åŸå…ˆDroolså›¢é˜Ÿç»´æŠ¤çš„8.44.xç‰ˆæœ¬è¿‡æ¸¡åˆ°Apache KIEè‡ªåŠ¨åŒ–æ™ºèƒ½å†³ç­–é¡¹ç›®é›†åˆå¤§å®¶åº­äº§å“çš„ç ”å‘æ¡çº¿ä¸Šæ¥ï¼Œåœ¨é¡¹ç›®å¾®æœåŠ¡åŒ–ã€éƒ¨ç½²äº‘åŸç”ŸåŒ–çš„ä»Šå¤©ï¼Œå†ç»“åˆAIé¡¹ç›®èµ‹èƒ½çš„å¤§èƒŒæ™¯ï¼Œå¯ä»¥è¯´Droolsçš„å­¦ä¹ ä¸åº”ç”¨å°†è¿æ¥æ–°çš„çƒ­æ½®ã€‚é‰´äºå›½å†…è¿™æ–¹é¢çš„ä¹¦ç±ã€åšå®¢ç­‰æ•™ç¨‹ä¾ç„¶åœç•™åœ¨è€ç‰ˆæœ¬ï¼Œä¹Ÿå› è€ç‰ˆæœ¬çš„é™åˆ¶ï¼Œç”Ÿäº§å®è·µå¾—ä¸å¤Ÿå…¨é¢ã€å½»åº•ï¼Œæœ¬äººå¼€è®¾äº†è¯¥æŠ€æœ¯ä¸“æ ï¼Œä¸å¹¿å¤§æŠ€æœ¯å‘˜ä¸€èµ·å­¦ä¹ æ¢è®¨æ–°ç‰ˆDroolsçš„å…¨é¢å®è·µè®®é¢˜ï¼Œé€šè¿‡åˆ†äº«ä»0-1çš„å®è·µæ­¥éª¤ä¸å­¦ä¹ æ„Ÿæ‚Ÿï¼Œä¸€èµ·æ’‘èµ·å›½äººä½¿ç”¨DroolsæŠ€æœ¯æé«˜ITä¼ä¸šç”Ÿäº§åŠ›çš„ä¸€ç‰‡å¤©ã€‚ä¸€èµ·åŠ æ²¹ï¼</p>
<h2 data-id="heading-1">Droolsç‰ˆæœ¬è¯´æ˜</h2>
<p>Droolsåœ¨åŠ å…¥Apache KIEç»„ç»‡ä¹‹å‰ï¼Œæ–‡æ¡£æ˜¯ç”±Droolsç ”å‘å›¢é˜Ÿè‡ªå·±ç»´æŠ¤çš„ï¼Œåœ°å€ä¸ºï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.drools.org%2F" target="_blank" title="https://docs.drools.org/" ref="nofollow noopener noreferrer">docs.drools.org/</a>ï¼Œæ›´æ–°çš„æœ€åç‰ˆæœ¬ä¸º<code>8.44.0.Final</code>ã€‚<strong>ç›®å‰å¸‚é¢ä¸Šå¤§å¤šæ•™ç¨‹è¿˜æ˜¯åŸºäºdrools7çš„</strong>ï¼Œè€Œçº³å…¥åˆ°Apacheä¸‹çš„KIEé¡¶çº§é¡¹ç›®åï¼Œdroolsçš„ç”Ÿæ€å‘å±•å˜å¾—æ›´å…¨é¢æ›´å®Œå–„ï¼Œæ–‡æ¡£æ›´è§„èŒƒã€APIè®¾è®¡ä¹Ÿæ›´ä¼˜é›…å’Œå¥å£®ï¼Œå¾ˆå¥½çš„ä¸ç›®å‰æˆç†Ÿçš„äº‘åŸç”Ÿæ¶æ„ã€AIæŠ€æœ¯ä½“ç³»èåˆï¼ŒDroolsè¿æ¥äº†è„±èƒæ¢éª¨çš„æ–°å‘å±•ã€‚ç›¸åº”çš„Droolsæ–‡æ¡£åœ°å€ä¹Ÿæ¢äº†</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/83587724703145059485259adb7c6cd2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YeWwj-WNtw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771559237&amp;x-signature=Qq2TTr4GEzIRuAwK%2BoqrbtmQH0k%3D" alt="20260210120113.png" loading="lazy"/></p>
<h2 data-id="heading-2">ç¯å¢ƒå‡†å¤‡</h2>
<p>å¯å‚è€ƒdroolså®˜æ–¹æŠ€æœ¯æ–‡æ¡£çš„<a href="https://link.juejin.cn?target=https%3A%2F%2Fkie.apache.org%2Fdocs%2F10.1.x%2Fdrools%2Fdrools%2Fgetting-started%2Findex.html%23_prerequisites" target="_blank" title="https://kie.apache.org/docs/10.1.x/drools/drools/getting-started/index.html#_prerequisites" ref="nofollow noopener noreferrer">å…¥é—¨-å…ˆå†³æ¡ä»¶</a>å°èŠ‚ã€‚<strong>åªä¸è¿‡å’±ä»¬è¿™é‡Œçš„å®è·µä¸ä¾èµ–å®˜æ–¹æŒ‡å—çš„å‘½ä»¤è¡Œæ“ä½œæ–¹å¼ï¼Œè€Œæ˜¯é«˜æ•ˆçš„ä½¿ç”¨ideaçš„é›†æˆå¼€å‘ç¯å¢ƒæ¥æ„å»ºåº”ç”¨ã€‚</strong></p>
<ul>
<li>jdk17+</li>
<li>Apache Maven3.9.6+</li>
<li>å¼€å‘å·¥å…·ï¼šidea2025.3.2</li>
<li>è§„åˆ™ç¼–è¾‘å™¨ï¼švscodeæ’ä»¶ï¼ˆideaæ’ä»¶æ¯”è¾ƒæœ‰é™ï¼‰</li>
</ul>
<h3 data-id="heading-3">ideaä¸‹è½½å®‰è£…</h3>
<p>ç‚¹å‡»<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.jetbrains.com%2Fidea%2Fdownload" target="_blank" title="https://www.jetbrains.com/idea/download" ref="nofollow noopener noreferrer">ideaå®˜æ–¹ä¸‹è½½åœ°å€</a>ï¼Œé€‰æ‹©å¯¹åº”æ“ä½œç³»ç»Ÿçš„ç‰ˆæœ¬ç‚¹ä¸‹è½½ï¼Œ</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a3e61315d94e4c14be2e22d62cf04032~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YeWwj-WNtw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771559237&amp;x-signature=%2FxUAB1t7Mti49OmrafsiMRJuFjs%3D" alt="20260209204411.png" loading="lazy"/>
ä¸‹è½½çš„ç‰ˆæœ¬ï¼š<em>idea-2025.3.2.exe</em>ï¼ŒåŒå‡»å®‰è£…ï¼Œè‡ªè¡Œè®¾ç½®å®‰è£…è·¯å¾„ï¼Œä¸ªäººè®¾ç½®ä¸ºï¼š<code>d:\Programs\JetBrains\IntelliJ IDEA 2025.3.2</code>ï¼Œ<em>å®‰è£…é€‰é¡¹</em>ç•Œé¢ï¼Œå‹¾é€‰åˆ›å»ºæ¡Œé¢å¿«æ·æ–¹å¼ã€æ·»åŠ <em>bin</em>ç›®å½•åˆ°<em>path</em>ã€æ·»åŠ <em>å°†æ–‡ä»¶å¤¹æ‰“å¼€ä¸ºé¡¹ç›®</em>ï¼Œæ‰§è¡Œåç»­å®‰è£…ã€‚å®‰è£…æˆåŠŸï¼Œç‚¹<em>å®Œæˆ</em>å‰ï¼Œå‹¾é€‰<em>è¿è¡Œidea</em>ã€‚
ç¬¬ä¸€æ¬¡è¿è¡Œï¼Œé»˜è®¤ä¸­æ–‡ç¯å¢ƒï¼ˆå¦‚æœå¼¹å‡ºè¯¥ç•Œé¢çš„è¯ï¼‰ï¼Œç‚¹ä¸å‘é€æ•°æ®å…±äº«ï¼Œè·³è¿‡å¯¼å…¥è®¾ç½®ï¼ˆå¦‚æœå¼¹å‡ºè¯¥ç•Œé¢çš„è¯ï¼‰</p>
<h3 data-id="heading-4">åˆ›å»ºJavaé¡¹ç›®</h3>
<p>è¿›å…¥ideaç¯å¢ƒç•Œé¢ï¼Œå¦‚æœç•Œé¢ä¸ºè‹±æ–‡ï¼Œè¿™é‡Œå’±ä»¬ç»Ÿä¸€ä¸‹ï¼Œç‚¹å·¦ä¸‹è§’çš„<em>è®¾ç½®</em>ï¼Œè¿›å…¥<em>Language and Region</em>è®¾ç½®ï¼ˆå¯ç›´æ¥æœç´¢å®šä½è®¾ç½®ï¼‰ï¼Œè¯­è¨€è®¾ç½®ä¸ºç®€ä½“ä¸­æ–‡ï¼Œç‚¹<em>åº”ç”¨</em>è®¾ç½®ï¼Œé‡å¯ideaå³å¯ã€‚</p>
<p>åœ¨æ¬¢è¿ç•Œé¢ç‚¹<em>æ–°å»ºé¡¹ç›®</em>ï¼Œå·¦ä¾§é¡¹ç›®ç±»å‹é€‰<em>Java</em>ï¼Œå³ä¾§çš„è®¾ç½®</p>
<ul>
<li>åç§°ï¼š<em>rule-java-maven</em></li>
<li>ä½ç½®ï¼š<em>E:\code\drools-projects</em></li>
<li>æ„å»ºç³»ç»Ÿï¼š<em>Maven</em></li>
<li>JDK
ç‚¹<em>ä¸‹è½½JDK</em>ï¼Œå¼¹å‡ºæ¡†ä¸­é€‰æ‹©ä½ æƒ³è¦ä¸‹è½½çš„jdkç‰ˆæœ¬ï¼Œä¸ªäººè®¾ç½®ä¸ºï¼š</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4a321ba4066546c98a3e3501590374fa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YeWwj-WNtw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771559237&amp;x-signature=GyINhHGs3QM9VokmLIjLT9iR3DE%3D" alt="20260209212651.png" loading="lazy"/></p>
<ul>
<li>å–æ¶ˆ<em>æ·»åŠ ç¤ºä¾‹ä»£ç </em></li>
<li>é«˜çº§è®¾ç½®
ç»„åå¯è‡ªå·±å®šï¼Œä¸ªäººè®¾ç½®ä¸º<code>org.zm626</code></li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c9e9d50e82ae472da9ff99eef43021b6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YeWwj-WNtw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771559237&amp;x-signature=8sJVGJYPhRjzpKhg%2Bnezc5PztHw%3D" alt="20260209213028.png" loading="lazy"/></p>
<p>æœ€åç‚¹<em>åˆ›å»º</em></p>
<p>é¡¹ç›®è‡ªåŠ¨æ„å»ºæˆåŠŸ</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3f96e779cfcb494f9d714e7915497cce~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YeWwj-WNtw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771559237&amp;x-signature=yzhaJNTbrVQEWRiQVXey3d45j34%3D" alt="20260209213556.png" loading="lazy"/></p>
<h4 data-id="heading-5">å¼€å¯å…è´¹ä½¿ç”¨idea</h4>
<p>åœ¨å¼€å‘ä¸»ç•Œé¢å³ä¸Šè§’ç‚¹<em>å¼€å§‹å…è´¹è¯•ç”¨</em>ï¼Œä¼šæ‰“å¼€idea Ultimateç‰ˆæœ¬çš„è®¢é˜…é¡µé¢ï¼Œç‚¹<em>å¼€å§‹å…è´¹è¯•ç”¨</em>ï¼Œå³å¯æ¿€æ´»å„ç§æ’ä»¶ï¼Œé»˜è®¤æœ‰30å¤©çš„ä½¿ç”¨æœŸã€‚å¯¹äºä¸æƒ³ä»˜è´¹çš„åŒå­¦ï¼Œå¯ä»¥åœ¨åˆ°æœŸå‰å¯¼å‡ºideaè®¾ç½®ï¼Œåˆ°æœŸåå¸è½½é‡è£…å¹¶å¯¼å…¥è®¾ç½®ï¼Œå¯æ— é™å¾ªç¯ä½¿ç”¨ã€‚</p>
<h4 data-id="heading-6">jdkè®¾ç½®</h4>
<p>å®‰è£…å’±ä»¬åˆ›å»ºå‘å¯¼æ‰€é€‰æ‹©çš„jdkç‰ˆæœ¬ï¼Œå®ç°äº†è‡ªåŠ¨ä¸‹è½½å®‰è£…ã€‚
ç‚¹ä¸»ç•Œé¢å³ä¸Šè§’çš„<em>é½¿è½®å›¾æ ‡ | é¡¹ç›®ç»“æ„ | é¡¹ç›®è®¾ç½®</em>ï¼ŒæŸ¥çœ‹é¡¹ç›®ä½¿ç”¨çš„jdkï¼Œ<em>è¯­è¨€çº§åˆ«</em>ä¿æŒé»˜è®¤çš„jdkã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7d6bccc48f41486bb0eed78ead34ea6c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YeWwj-WNtw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771559237&amp;x-signature=BiMjGZdm%2BgLVhxlC8pacLwqd%2BW4%3D" alt="20260209214942.png" loading="lazy"/>
å¦‚æœéœ€è¦å…¶ä»–ç‰ˆæœ¬çš„jdkï¼Œå¯åœ¨æœ¬ç•Œé¢ï¼Œç‚¹<em>å¹³å°è®¾ç½® | SDK</em>ï¼Œæ¥å…¨å±€ç»´æŠ¤jdkç‰ˆæœ¬ï¼Œå¹¶å›åˆ°<em>é¡¹ç›®è®¾ç½® | é¡¹ç›® | SDK</em>ï¼Œé€‰æ‹©åˆ‡æ¢jdkç‰ˆæœ¬ã€‚</p>
<h4 data-id="heading-7">mavenè®¾ç½®</h4>
<p>æ‰“å¼€ideaè®¾ç½®ï¼Œæœç´¢<em>Maven</em>ï¼ŒæŸ¥çœ‹<em>Mavenä¸»è·¯å¾„</em>è®¾ç½®ï¼Œé»˜è®¤ä¸ºideaæ†ç»‘çš„mavenç‰ˆæœ¬ï¼Œè¿™é‡Œå¯åˆ‡æ¢ä¸º<em>ä½¿ç”¨MavenåŒ…è£…å™¨</em>ï¼Œè€Œmavençš„æœ¬åœ°ä»“åº“è·¯å¾„å’Œè®¾ç½®é»˜è®¤åœ¨ç”¨æˆ·ç›®å½•ä¸‹ï¼Œä¿æŒè¯¥è®¾ç½®ï¼Œ</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/75002a7b565940099958c5cc1f1a6c58~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YeWwj-WNtw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771559237&amp;x-signature=KGoeiRHvzEqkGmfmbZ%2FMpzG0KQc%3D" alt="20260209223347.png" loading="lazy"/>
ç‚¹<em>ç¡®å®š</em>ï¼Œå›åˆ°ä¸»ç•Œé¢ï¼Œä¼šçœ‹åˆ°å³ä¸‹è§’çš„è­¦å‘Šï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b5705f3270bb4f3082b31c045fba6ab3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YeWwj-WNtw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771559237&amp;x-signature=VacAVwTziEeC7ClaKFvJXcfD89I%3D" alt="20260209220021.png" loading="lazy"/>
åœ¨å·¥ç¨‹çš„ <em>.mvn</em> ç›®å½•ä¸‹æ–°å¢ç›®å½•å’Œæ–‡ä»¶ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/10f09901e33247bcbac434cddad6067c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YeWwj-WNtw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771559237&amp;x-signature=7ndmvf%2FthrJ2YC5vJ%2B%2BJQGyfbO0%3D" alt="20260209220142.png" loading="lazy"/>
æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-properties" lang="properties">wrapperVersion=3.3.4  
distributionType=only-script  
distributionUrl=https://repo.maven.apache.org/maven2/org/apache/maven/apache-maven/3.9.6/apache-maven-3.9.6-bin.zip
</code></pre>
<p>å®Œæˆç¼–è¾‘åï¼Œç‚¹å³è¾¹æ‚¬æµ®çš„<em>åŒæ­¥Mavenæ›´æ”¹</em>çš„å°å›¾æ ‡ï¼Œè¿™åªæ˜¯å®ŒæˆMavené…ç½®åŒæ­¥ï¼Œè¦é‡æ–°åŠ è½½æ•´ä¸ªmavené¡¹ç›®ï¼Œç‚¹Mavenå·¥å…·æ ç¬¬ä¸€ä¸ªåˆ·æ–°å›¾æ ‡ï¼Œç‚¹ä¸‹æ‹‰çš„ç¬¬äºŒä¸ªé€‰é¡¹ï¼š<em>é‡æ–°åŠ è½½æ‰€æœ‰çš„Mavené¡¹ç›®</em></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d6654158d2ff4cb2a8055be121288e49~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YeWwj-WNtw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771559237&amp;x-signature=HZ8ee4IOIOcLaTopxVvLE8zH9HE%3D" alt="20260209220900.png" loading="lazy"/>
å®Œæˆæ„å»ºåï¼Œè¿™ç§MavenåŒ…è£…å™¨æ–¹å¼ä¼šåœ¨æœ¬åœ°ç”¨æˆ·è·¯å¾„ä¸‹è‡ªè¡Œå®‰è£…ä»¥ä¸Šé…ç½®æ–‡ä»¶ä¸­æŒ‡å®šçš„mavenç‰ˆæœ¬ï¼Œè¿™ç§wrapperéšåŒå·¥ç¨‹æºç åˆ†å‘çš„æ–¹å¼ï¼Œæœ‰åŠ©äºç ”å‘å›¢é˜Ÿæˆ–è€…å­¦ä¹ å°ç»„æˆå‘˜ä¹‹é—´ååŒã€‚çœ‹åˆ°æœ¬åœ°è§£å‹çš„mavenè½¯ä»¶åŒ…ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9698979d00f44904a8082527007b7771~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YeWwj-WNtw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771559237&amp;x-signature=g0QiolLG%2FOgETQlKN0WDZB0a7H4%3D" alt="20260210123609.png" loading="lazy"/></p>
<p>å¯ä»¥å°†å…¶<em>conf</em>ç›®å½•ä¸‹çš„settings.xmlé…ç½®æ‹·è´å‡ºæ¥ï¼Œæ”¾åˆ°ç”¨æˆ·è·¯å¾„çš„ <em>~/.m2</em> ä¸‹ï¼Œåœ¨å„ä¸ªæ“ä½œç³»ç»Ÿç”¨æˆ·çº§åˆ«ç»´æŠ¤mavené…ç½®ã€‚å‚ç…§<a href="https://link.juejin.cn?target=https%3A%2F%2Fmaven.aliyun.com%2Fmvn%2Fguide" target="_blank" title="https://maven.aliyun.com/mvn/guide" ref="nofollow noopener noreferrer">é˜¿é‡Œäº‘mavenä½¿ç”¨æŒ‡å—</a>ä¸­çš„mavené•œåƒè®¾ç½®ï¼Œä¿®æ”¹ä¸‹æ‹·è´å‡ºæ¥çš„<em>settings.xml</em>æ–‡ä»¶ä»¥åŠ é€Ÿmavenç›¸å…³å·¥å…·ã€ä¾èµ–çš„ä¸‹è½½ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">settings</span> <span class="hljs-attr">...</span>&gt;</span>
...
  <span class="hljs-tag">&lt;<span class="hljs-name">mirrors</span>&gt;</span>  
    <span class="hljs-tag">&lt;<span class="hljs-name">mirror</span>&gt;</span>  
      <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>aliyunmaven<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span>  
      <span class="hljs-tag">&lt;<span class="hljs-name">mirrorOf</span>&gt;</span>*<span class="hljs-tag">&lt;/<span class="hljs-name">mirrorOf</span>&gt;</span>  
      <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>é˜¿é‡Œäº‘å…¬å…±ä»“åº“<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span>  
      <span class="hljs-tag">&lt;<span class="hljs-name">url</span>&gt;</span>https://maven.aliyun.com/repository/public<span class="hljs-tag">&lt;/<span class="hljs-name">url</span>&gt;</span>  
    <span class="hljs-tag">&lt;/<span class="hljs-name">mirror</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">mirrors</span>&gt;</span>
...
<span class="hljs-tag">&lt;/<span class="hljs-name">settings</span>&gt;</span>
</code></pre>
<h3 data-id="heading-8">ideaè®¾ç½®</h3>
<h4 data-id="heading-9">å¿«æ·é”®è®¾ç½®</h4>
<p>ä¸ºäº†æ–¹ä¾¿å’Œç»Ÿä¸€åç»­çš„ä»£ç ç¼–è¾‘å’Œæ–‡ä»¶æ“ä½œï¼Œè®¾ç½®ideaå¿«æ·é”®ä¸ºeclipseé£æ ¼ï¼ŒåŒæ—¶å¯¹åŸºæœ¬çš„ä»£ç è¡¥å…¨æ“ä½œé‡è®¾å¿«æ·é”®ï¼Œç§»é™¤åŸå…ˆçš„<kbd>Ctrl</kbd>+<kbd>ç©ºæ ¼</kbd>ï¼ˆå’Œwindowsè¾“å…¥æ³•æœ‰å†²çªï¼‰ï¼Œè¿™é‡Œè®¾ä¸º<kbd>Alt</kbd> + <kbd>/</kbd>ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/21be077982294223a75bd3e435e5a15e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YeWwj-WNtw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771559237&amp;x-signature=j5j08tSU80S8fPHlkwNrADKNJMg%3D" alt="20260210072616.png" loading="lazy"/></p>
<h4 data-id="heading-10">ç±»å‹è‡ªåŠ¨å¯¼å…¥è®¾ç½®</h4>
<p>å› ä¸ºå®˜æ–¹ç¤ºä¾‹ä»£ç åŸºæœ¬æ— éœ€æˆ‘ä»¬æ‰‹å†™ï¼Œæ–¹ä¾¿å¤åˆ¶è¿‡æ¥å¯ä»¥è‡ªåŠ¨å¼•å…¥ç±»å‹ï¼Œåšå¦‚ä¸‹è®¾ç½®ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d6181a34034349308554242b1834bc24~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YeWwj-WNtw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771559237&amp;x-signature=pw1rawLZBNtd3mPvPPk9w7avd7w%3D" alt="20260210075910.png" loading="lazy"/></p>
<h2 data-id="heading-11">æ„å»ºè´·æ¬¾ç”³è¯·ruleç¤ºä¾‹</h2>
<h3 data-id="heading-12">ä¸‹è½½å®˜æ–¹ç¤ºä¾‹æºä»£ç </h3>
<p>å› ä¸ºDroolså¹¶å…¥äº†Apacheçš„KIEç»„ç»‡ï¼Œè€Œè¿‘å¹´åœ¨KIEç»„ç»‡ä¸‹å­µåŒ–å‡ºä¸€ä¸ªå›¾æ ‡åƒè€çˆ¹çš„Kogitoé¡¹ç›®ï¼Œå®ƒæ˜¯ KIE ä¸‹çš„ä¸€ä¸ªäº‘åŸç”Ÿä¸šåŠ¡è‡ªåŠ¨åŒ–é¡¹ç›®ï¼Œå®šä½æ˜¯â€œ<strong>ä¸‹ä¸€ä»£ä¸šåŠ¡è‡ªåŠ¨åŒ–å¹³å°</strong>â€ï¼Œèšç„¦äº‘åŸç”Ÿå¼€å‘ã€éƒ¨ç½²å’Œæ‰§è¡Œï¼Œå½“ç„¶ä¹Ÿæä¾›äº†ç¤ºä¾‹ï¼Œgithubåœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fapache%2Fincubator-kie-kogito-examples" target="_blank" title="https://github.com/apache/incubator-kie-kogito-examples" ref="nofollow noopener noreferrer">github.com/apache/incuâ€¦</a>ã€‚è¿™é‡Œæˆ‘ä»¬æ‰¾åˆ°æœ€æ–°ç¨³å®šç‰ˆåˆ†æ”¯ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7553bfd29ae8418994f4e363c583d5ec~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YeWwj-WNtw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771559237&amp;x-signature=3RSTm7nYSls6L7OrlVez0Mr6F%2BI%3D" alt="20260210122224.png" loading="lazy"/></p>
<p>ä»åŸºäºæœ€æ–°<code>10.1.x</code>ç‰ˆæœ¬çš„ç¤ºä¾‹ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fapache%2Fincubator-kie-kogito-examples%2Ftree%2F10.1.x" target="_blank" title="https://github.com/apache/incubator-kie-kogito-examples/tree/10.1.x" ref="nofollow noopener noreferrer">incubator-kie-kogito-examples</a>åœ°å€ä¸‹è½½æºä»£ç åˆ°æœ¬åœ°ã€‚
è¿™é‡Œå’±ä»¬æ‰¾åˆ°<em>kogito-java-examples</em>çš„<em>rules-embedded-mode-example</em>é¡¹ç›®ï¼Œå‚è€ƒå®ƒç»™å’±ä»¬ä¹‹å‰åˆ›å»ºçš„åŸºäºmavenæ„å»ºçš„javaé¡¹ç›®é›†æˆè´·æ¬¾ç”³è¯·è§„åˆ™æ¡ˆä¾‹ã€‚
<strong>åç»­çš„ç»ƒä¹ ä»¥è¯¥å®˜æ–¹ç¤ºä¾‹ä»£ç ä»å¤´æ­å»ºï¼Œå¤§å®¶è‡ªå·±åŠ¨æ‰‹ï¼Œç›´æ¥å‚è€ƒå®˜æ–¹ç¤ºä¾‹å³å¯ã€‚</strong></p>
<h3 data-id="heading-13">ä»é›¶å¼€å‘è§„åˆ™</h3>
<h4 data-id="heading-14">ç”¨æ³•é™¢å®¡ç†æ¡ˆä»¶ç±»æ¯”</h4>
<h5 data-id="heading-15">å®è§‚ç†è§£è§„åˆ™</h5>
<p>æ³•é™¢ç³»ç»Ÿ = DroolsÂ è§„åˆ™å¼•æ“</p>
<ol>
<li>Factï¼ˆäº‹å®ï¼‰= è¯‰è®¼ææ–™/æ¡ˆä»¶äº‹å®
<ul>
<li>åŸå‘Šæäº¤çš„èµ·è¯‰ä¹¦ã€è¯æ®ææ–™</li>
<li>è¢«å‘Šæäº¤çš„ç­”è¾©ææ–™</li>
<li>è¿™äº›æ˜¯â€œäº‹å®â€ï¼Œæ˜¯æ³•å®˜éœ€è¦å®¡æŸ¥çš„å†…å®¹</li>
</ul>
</li>
<li>è§„åˆ™ï¼ˆRulesï¼‰= æ³•å¾‹æ³•è§„
<ul>
<li>ã€Šæ°‘æ³•å…¸ã€‹æ¡æ¬¾</li>
<li>ã€Šåˆ‘æ³•ã€‹æ¡æ–‡</li>
<li>è¿™äº›æ˜¯â€œè§„åˆ™â€ï¼Œæ³•å®˜ç”¨æ¥åˆ¤æ–­äº‹å®æ˜¯å¦ç¬¦åˆæ³•å¾‹</li>
</ul>
</li>
<li>è§„åˆ™å¼•æ“ = æ³•å®˜/æ³•é™¢
<ul>
<li>æ³•å®˜æ‹¿åˆ°è¯‰è®¼ææ–™ï¼ˆFactï¼‰</li>
<li>å¯¹ç…§æ³•å¾‹æ³•è§„ï¼ˆè§„åˆ™ï¼‰è¿›è¡Œåˆ¤æ–­</li>
<li>åšå‡ºåˆ¤å†³ï¼ˆæ‰§è¡Œè§„åˆ™çš„åŠ¨ä½œï¼‰</li>
</ul>
</li>
</ol>
<h5 data-id="heading-16">æ³•é™¢æµç¨‹ vsÂ è§„åˆ™å¼•æ“æµç¨‹</h5>
<p>æ³•é™¢æµç¨‹</p>
<ol>
<li>ç«‹æ¡ˆÂ â†’ æ³•é™¢å—ç†æ¡ˆä»¶ï¼Œå»ºç«‹æ¡ˆä»¶æ¡£æ¡ˆ</li>
<li>æäº¤ææ–™Â â†’ åŸå‘Š/è¢«å‘Šæäº¤è¯‰è®¼ææ–™</li>
<li>å¼€åº­å®¡ç† â†’ æ³•å®˜å®¡æŸ¥ææ–™ï¼Œå¯¹ç…§æ³•å¾‹æ¡æ–‡</li>
<li>åˆ¤å†³ â†’ åšå‡ºåˆ¤å†³ç»“æœ</li>
</ol>
<p>è§„åˆ™å¼•æ“æµç¨‹</p>
<ol>
<li>å¯åŠ¨è§„åˆ™å¼•æ“ï¼ˆåˆ›å»º KieSessionï¼‰â†’ ç›¸å½“äºç«‹æ¡ˆ
<ul>
<li>å»ºç«‹äº†ä¸€ä¸ª"æ¡ˆä»¶å¤„ç†æµç¨‹"</li>
<li>å‡†å¤‡å¼€å§‹å¤„ç†</li>
</ul>
</li>
<li>æ’å…¥ Fact â†’ ç›¸å½“äºæäº¤è¯‰è®¼ææ–™
<ul>
<li>æŠŠÂ Applicant(ç”³è¯·äºº)ã€LoanApplication(è´·æ¬¾ç”³è¯·)Â æ”¾å…¥å·¥ä½œå†…å­˜</li>
</ul>
</li>
<li>æ‰§è¡Œè§„åˆ™ï¼ˆfireAllRulesï¼‰â†’ ç›¸å½“äºå¼€åº­å®¡ç†
<ul>
<li>è§„åˆ™å¼•æ“æ£€æŸ¥ Factï¼ŒåŒ¹é…è§„åˆ™</li>
</ul>
</li>
<li>è·å–ç»“æœ â†’ ç›¸å½“äºåˆ¤å†³ç»“æœ
<ul>
<li>ä» Fact ä¸­è·å–å¤„ç†åçš„ç»“æœï¼Œå¦‚Â approved(å®¡æ ¸ç»“æœ)ã€explanation(å®¡æ ¸ç»“æœè¯´æ˜)</li>
</ul>
</li>
</ol>
<p>å¯¹åº”å…³ç³»</p>

























<table><thead><tr><th>æ³•é™¢</th><th>è§„åˆ™å¼•æ“</th></tr></thead><tbody><tr><td>ç«‹æ¡ˆ</td><td>å¯åŠ¨è§„åˆ™å¼•æ“ï¼ˆåˆ›å»º KieSessionï¼‰</td></tr><tr><td>æäº¤è¯‰è®¼ææ–™</td><td>æ’å…¥Â Fact</td></tr><tr><td>å¼€åº­å®¡ç†</td><td>æ‰§è¡Œè§„åˆ™ï¼ˆfireAllRulesï¼‰</td></tr><tr><td>åˆ¤å†³ç»“æœ</td><td>è·å–å¤„ç†åçš„ Fact</td></tr></tbody></table>
<h4 data-id="heading-17">å®šä¹‰äº‹å®(Fact)ç±»</h4>
<p>è¯¥æ¡ˆä¾‹ä¸­çš„äº‹å®ç±»æœ‰ä¸¤ä¸ªï¼š<code>Applicant</code>(ç”³è¯·äºº)å’Œ<code>LoanApplication</code>(è´·æ¬¾ç”³è¯·)ï¼Œå®ƒä»¬å°±æ˜¯ç®€å•çš„<code>POJO</code>ï¼Œå­˜å‚¨äº‹å®æ•°æ®ã€‚
<em>Applicant.java</em></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.zm626.rules;  
  
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Applicant</span> {  
    <span class="hljs-comment">/** ç”³è¯·äººid */</span>
    <span class="hljs-keyword">private</span> String id;  
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> age;  
  
    <span class="hljs-comment">// çœç•¥æ— å‚æ„é€ ã€æœ‰å‚æ„é€ ã€getterå’Œsetter</span>
}
</code></pre>
<p><em>LoanApplication.java</em></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.zm626.rules;  
  
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LoanApplication</span> {
	<span class="hljs-comment">/** ç”³è¯·äººid */</span>  
    <span class="hljs-keyword">private</span> String applicantId;
    <span class="hljs-comment">/** å®¡æ ¸ç»“æœè¯´æ˜ */</span>  
    <span class="hljs-keyword">private</span> String explanation;  
    <span class="hljs-comment">/** å®¡æ ¸ç»“æœ true-é€šè¿‡ false-ä¸é€šè¿‡ */</span>  
    <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> approved;  
  
    <span class="hljs-comment">// çœç•¥æ— å‚æ„é€ ã€æœ‰å‚æ„é€ ã€getterã€setterå’ŒtoStringæ–¹æ³•</span>
  
}
</code></pre>
<h4 data-id="heading-18">å®šä¹‰è§„åˆ™drlæ–‡ä»¶</h4>
<p>è¯¥æ–‡ä»¶ç”¨äºå®šä¹‰è§„åˆ™é›†ï¼Œä¹ŸåŒ…æ‹¬è§„åˆ™ç»“æœæŸ¥è¯¢ç­‰ã€‚è¯¥<code>.drl</code>åç¼€çš„æ–‡ä»¶éœ€è¦é‡‡ç”¨ä¸“é—¨çš„ç¼–è¾‘å™¨æ‰“å¼€ï¼Œå¸¸è§çš„æœ‰ideaçš„droolsæ’ä»¶ä»¥åŠvscodeçš„ç›¸å…³æ’ä»¶</p>
<h5 data-id="heading-19">drlç¼–è¾‘å™¨æ’ä»¶</h5>
<p><em>ideaçš„droolsæ’ä»¶</em></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5e4411ba68f64c6599178479090ac954~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YeWwj-WNtw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771559237&amp;x-signature=a%2BGiNV6HSeaySyCmwsXsDaP6mhY%3D" alt="20260210190127.png" loading="lazy"/>
ideaçš„droolsæ’ä»¶å¯¹ç±»å‹æ¯”è¾ƒæ•æ„Ÿï¼Œè¿™ç§åŒ…ä¸­å®šä¹‰çš„ç±»å‹æ— éœ€å¯¼å…¥ï¼Œä½†ideaçš„drlæ’ä»¶å°±ä¸è®¤è´¦</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1eeda86e71cf47609425e4bef57a80bb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YeWwj-WNtw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771559237&amp;x-signature=8g17mYbpR2FMOQx0eqhiyjQRtsc%3D" alt="20260210192624.png" loading="lazy"/></p>
<p><em>vscodeçš„drlæ’ä»¶</em></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9392454ec3a64da3aa0079d38ad988b2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YeWwj-WNtw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771559237&amp;x-signature=%2BdOrSF02P1nrnvTCv1fvPTlDhag%3D" alt="20260210191336.png" loading="lazy"/>
vscodeçš„drlç¼–è¾‘å™¨ï¼Œæœ‰ä»£ç é«˜äº®å’ŒåŸºæœ¬ç»“æ„çš„è¾“å…¥æç¤ºï¼Œä½†ä¸ä¼šç»†åŒ–åˆ°å¯¹ç±»å‹æ£€æŸ¥</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/78e28cd1097f4c2dac6a522d12d3f8f4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YeWwj-WNtw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771559237&amp;x-signature=ky%2F0gA%2FWqQq7kS8aSrRxA0z%2BGV8%3D" alt="20260210192036.png" loading="lazy"/></p>
<blockquote>
<p>[!tip] drlè¯­æ³•é—®é¢˜å®šä½æŠ€å·§
ä¸ªäººè§‰å¾—ç¼–è¾‘drlä¸è¦è¢«ç¼–è¾‘å™¨çš„æ ¡éªŒæŸç¼šï¼Œæ¨èç”¨è¯­æ³•æ£€æŸ¥å®¹å¿åº¦æ›´é«˜çš„vscodeæ’ä»¶ï¼Œè¯­æ³•é—®é¢˜åˆ™é€šè¿‡kieç›¸å…³ç¼–è¯‘æ’ä»¶æ¥æ£€æŸ¥ï¼Œçœ‹æ§åˆ¶å°çš„è¯¦ç»†æç¤ºã€‚å…·ä½“åç»­ä¼šå®è·µã€‚</p>
</blockquote>
<h5 data-id="heading-20">drlè§„åˆ™æ–‡ä»¶ç¤ºä¾‹</h5>
<p><em>resources/com/zm626/rules/loan-application-age-limit.drl</em></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.zm626.rules;  
<span class="hljs-comment">/* ä»¥ä¸ŠæŒ‡å®šè§„åˆ™æ–‡ä»¶çš„é€»è¾‘åŒ…è·¯å¾„ï¼Œå¯ä»¥ä¸å’Œæ‰€åœ¨çš„èµ„æºåŒ…çš„ç‰©ç†åŒ…è·¯å¾„ä¸€è‡´  
 ä½†åšæˆä¸€è‡´åï¼Œä¸”è§„åˆ™åŒ…è·¯å¾„å’ŒjavaåŒ…è·¯å¾„ä¸€è‡´ï¼Œåˆ™å¯ä»¥å…å»åŒä¸€ä¸ªåŒ…ä¸‹çš„Javaç±»å‹å¯¼å…¥  
 æ¯”å¦‚ä¸‹é¢çš„ç±»å‹å¯¼å…¥å¯ä»¥ä¸å†™ï¼Œä½†æ˜¯ideaçš„æ’ä»¶åˆä¸èƒ½æ™ºèƒ½è¯†åˆ«ï¼ˆè¦æ±‚æ˜¾ç¤ºå¯¼å…¥ï¼‰  
 */</span>  
<span class="hljs-keyword">import</span> com.zm626.rules.Applicant;  
<span class="hljs-keyword">import</span> com.zm626.rules.LoanApplication;  
  
<span class="hljs-comment">// æ¯ä¸ªè§„åˆ™éƒ½æœ‰ä¸€ä¸ªåå­—ï¼Œåå­—åœ¨åŒä¸€ä¸ªè§„åˆ™åº“(KieBase)ä¸­å”¯ä¸€  </span>
<span class="hljs-comment">// ä¸åŠ å¼•å·åˆ™ä¸èƒ½å‡ºç°ä¸€äº›ç‰¹æ®Šå­—ç¬¦ï¼Œå˜æˆå­—ç¬¦ä¸²åˆ™æ— é™åˆ¶  </span>
rule <span class="hljs-string">"Underage"</span>  
  <span class="hljs-comment">// è§„åˆ™æ‰§è¡Œçš„ä¼˜å…ˆçº§ï¼Œä¸åŠ æˆ–è€…æ•°å­—ä¸€æ ·å¤§åˆ™æŒ‰å®šä¹‰é¡ºåº  </span>
  <span class="hljs-comment">// å¯ä»¥æ˜¾ç¤ºæŒ‡å®šä¼˜å…ˆçº§ï¼Œæ•°å­—è¶Šå¤§è¶Šå…ˆæ‰§è¡Œï¼Œæ•°å€¼è®¾ç½®åœ¨æ•´ä¸ªKieBaseä¸­ç”Ÿæ•ˆ  </span>
  salience <span class="hljs-number">15</span>  
  <span class="hljs-comment">// ç»™è§„åˆ™åˆ†ç»„ï¼Œä¾¿äºè§¦å‘ä¸€ä¸ªåˆ†ç»„å†…çš„æ‰€æœ‰è§„åˆ™  </span>
  ruleflow-group <span class="hljs-string">"applicationGroup"</span>  
  when  
    <span class="hljs-comment">// è§„åˆ™å·¦åŠè¾¹ï¼ˆæ¡ä»¶ï¼‰ç”¨æ¥åŒ¹é…äº‹å®å¯¹è±¡ï¼š$å˜é‡å: ç±»å‹( å±æ€§å£°æ˜ã€åŒ¹é…è¡¨è¾¾å¼ )    // è¿™é‡ŒåŒ¹é…æ¯ä¸ªè´·æ¬¾ç”³è¯·å¯¹è±¡ï¼ŒåŒ¹é…åˆ°å°äº21å²çš„ç”³è¯·äººï¼Œé‚£ä¹ˆå°±ä¸å…è®¸ç”³è¯·ï¼Œå¹¶è¯´æ˜ä¸‹æ˜¯æœªæˆå¹´äºº  </span>
    $application : LoanApplication( $applicantId: applicantId )  
    Applicant( id == $applicantId &amp;&amp; age &lt; <span class="hljs-number">21</span> )  
  then  
    <span class="hljs-comment">// è§„åˆ™å³åŠè¾¹ï¼ˆç»“è®ºï¼‰ï¼Œå¯¹åŒ¹é…çš„ç”³è¯·å¯¹è±¡æ›´æ–°å±æ€§  </span>
    $application.setApproved( <span class="hljs-literal">false</span> );  
    $application.setExplanation( <span class="hljs-string">"Underage"</span> );  
end <span class="hljs-comment">// è§„åˆ™å•å…ƒç»“æŸæ ‡è®°ï¼Œä¸ruleæˆå¯¹å‡ºç°</span>
</code></pre>
<h3 data-id="heading-21">è§„åˆ™å¼•æ“APIå®æˆ˜</h3>
<h4 data-id="heading-22">pomä¸­çš„è§„åˆ™ä¾èµ–</h4>
<p>droolsè§„åˆ™å¼•æ“ä¸javaé¡¹ç›®æ•´åˆï¼Œéœ€è¦å¼•å…¥ç›¸å…³çš„ä¾èµ–ï¼Œä¾èµ–çš„ç‰ˆæœ¬å¯ä»¥ç”±<code>drools-bom</code>æ¥ç®¡ç†ï¼Œå› æ­¤å¯ä»¥åœ¨<em>pom.xml</em>ä¸­é€šè¿‡<code>&lt;dependencyManagement&gt;</code>æ ‡ç­¾å®šä¹‰è¦å¯¼å…¥çš„<code>pom</code>ç±»å‹çš„<code>bom</code>ä¾èµ–ã€‚</p>
<p><em>pom.xml</em></p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">project</span> <span class="hljs-attr">...</span>&gt;</span>
...
	<span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span>  
	    ...  
	    <span class="hljs-tag">&lt;<span class="hljs-name">version.org.drools</span>&gt;</span>10.1.0<span class="hljs-tag">&lt;/<span class="hljs-name">version.org.drools</span>&gt;</span>  
	<span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span>  
	  
	<span class="hljs-tag">&lt;<span class="hljs-name">dependencyManagement</span>&gt;</span>  
	    <span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>        
		    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>            
			    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.drools<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>  
	            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>drools-bom<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>  
	            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>${version.org.drools}<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>  
	            <span class="hljs-tag">&lt;<span class="hljs-name">type</span>&gt;</span>pom<span class="hljs-tag">&lt;/<span class="hljs-name">type</span>&gt;</span>  
	            <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>import<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span>  
	        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>    
	    <span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>
	<span class="hljs-tag">&lt;/<span class="hljs-name">dependencyManagement</span>&gt;</span>
...
<span class="hljs-tag">&lt;/<span class="hljs-name">project</span>&gt;</span>
</code></pre>
<p>è¿è¡Œè¯¥ç¤ºä¾‹å¿…å¤‡çš„å‡ ä¸ªæœ€å°ä¾èµ–å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- ç¼–è¯‘.drlæ–‡ä»¶ï¼Œæä¾› KieContainerã€KieSession ç­‰ API --&gt;</span>  
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>  
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.drools<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>  
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>drools-compiler<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>  
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>  
  
<span class="hljs-comment">&lt;!-- é…åˆ drools-compiler è¿›è¡Œæ¨¡å‹ç¼–è¯‘ --&gt;</span>  
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>  
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.drools<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>  
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>drools-model-compiler<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>  
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>  
  
<span class="hljs-comment">&lt;!-- æ”¯æŒè§„åˆ™ä¸­çš„è¡¨è¾¾å¼ï¼šage &lt; 21ã€id == $applicantId --&gt;</span>  
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>  
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.drools<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>  
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>drools-mvel<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>  
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>  
  
<span class="hljs-comment">&lt;!--  
    åŸºäºkmodule.xmlæ„å»ºKieSessionéœ€è¦ï¼Œ  
    ä¸”è¿™é‡Œå¯ä»¥ä¼ é€’ä¾èµ–drools-commandsï¼Œå› ä¸ºç”¨åˆ°ç›¸å…³API  
 --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>  
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.drools<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>  
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>drools-xml-support<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>  
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<p>è§„åˆ™å¼•èµ·å¯åŠ¨ã€æ‰§è¡Œåˆ°ç»“æœçš„è¾“å‡ºï¼Œè¿™é‡Œç”¨æ—¥å¿—æ¡†æ¶å‘æ§åˆ¶å°æ‰“å°ä¿¡æ¯ï¼Œéœ€è¦æ·»åŠ <code>slf4j</code>ä¸¤ä¸ªä¾èµ–ï¼š<code>API</code>ä¾èµ–å’Œä¸€ä¸ªç®€å•çš„å®ç°ä¾èµ–</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">project</span> <span class="hljs-attr">...</span>&gt;</span>
...
  <span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span>  
    ...
    <span class="hljs-tag">&lt;<span class="hljs-name">version.org.slf4j</span>&gt;</span>2.0.13<span class="hljs-tag">&lt;/<span class="hljs-name">version.org.slf4j</span>&gt;</span>  
  <span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span>
  ...
  <span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>  
    ... 
    <span class="hljs-comment">&lt;!-- Logging --&gt;</span>  
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>  
      <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.slf4j<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>  
      <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>slf4j-api<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>  
      <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>${version.org.slf4j}<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>  
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>    
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>        
      <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.slf4j<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>  
      <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>slf4j-simple<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>  
      <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>${version.org.slf4j}<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>  
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>
...
<span class="hljs-tag">&lt;/<span class="hljs-name">project</span>&gt;</span>
</code></pre>
<h4 data-id="heading-23">å¯åŠ¨è§„åˆ™å¼•æ“</h4>
<p>å…ˆå†™ä¸€ä¸ªä¸»ç±»çš„ç»“æ„æ¥å®è·µå¼•æ“ç›¸å…³çš„<code>API</code>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.zm626.rules;
<span class="hljs-keyword">import</span> ...
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RuleMain</span> {
	<span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">Logger</span> <span class="hljs-variable">logger</span> <span class="hljs-operator">=</span> LoggerFactory.getLogger(RuleMain.class);
	<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
		...
	}
}
</code></pre>
<h5 data-id="heading-24">KieServices</h5>
<p>çœ‹ä¸‹<code>main</code>æ–¹æ³•ä¸­çš„å®ç°ï¼Œé¦–å…ˆè·å–è§„åˆ™æœåŠ¡çš„å®ä¾‹ï¼Œå®ƒæ˜¯APIçš„è°ƒç”¨å…¥å£ï¼Œç”¨æ¥å¼€å¯è§„åˆ™å¼•æ“ã€‚è®¾è®¡ä¸Šé‡‡ç”¨äº†æ‡’åŠ è½½çš„å•ä¾‹åˆ›å»ºå½¢å¼ã€‚æºç çš„è¿™ç§è®¾è®¡å€¼å¾—æˆ‘ä»¬å¥½å¥½å­¦ä¹ ï¼Œä½¿ç”¨å†…éƒ¨å·¥å‚æ¥æ‡’åŠ è½½å®ä¾‹ï¼Œåç»­æˆ‘ä»¬ä¼šå¯¹å…¶æºç çš„è®¾è®¡åšè¯¦ç»†çš„è§£è¯»ã€‚</p>
<p>ç°åœ¨ä½ åªéœ€çŸ¥é“è¯¥Servicesç»„ä»¶ï¼Œç±»ä¼¼äºæ³•é™¢çš„æ¥å¾…å¤§å…/æœåŠ¡å°ï¼Œé€šè¿‡æœåŠ¡å°ç»Ÿä¸€è®¿é—®å„ä¸ªéƒ¨é—¨ï¼Œè€Œä¸éœ€è¦ç›´æ¥æ‰¾æ¯ä¸ªéƒ¨é—¨ã€‚ä¹Ÿå°±æ˜¯åˆ©ç”¨é—¨é¢æ¨¡å¼æ¥è·å–Droolsè§„åˆ™å¼•æ“ä¸­çš„å„ç§ç»„ä»¶ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// è§„åˆ™æœåŠ¡å…¥å£ï¼Œç›¸å½“äºåˆ°äº†æ³•é™¢å¤§é—¨å£äº†ï¼Œå¤§å…æœåŠ¡äººå‘˜å°±ä½</span>
<span class="hljs-type">KieServices</span> <span class="hljs-variable">kieServices</span> <span class="hljs-operator">=</span> KieServices.Factory.get();
</code></pre>
<h5 data-id="heading-25">KieContainer</h5>
<p>å¦‚æœæŠŠDroolsæ•´ä¸ªè§„åˆ™å¼•æ“æ¯”ä½œæ³•é™¢ç³»ç»Ÿï¼ˆå…·æœ‰æ‰§è¡Œæ³•å¾‹çš„èƒ½åŠ›ï¼‰ï¼Œé‚£ä¹ˆ<code>KieContainer</code>åˆ™ç›¸å½“äºæ³•å¾‹åº“ç®¡ç†ç³»ç»Ÿ/æ¡£æ¡ˆç®¡ç†éƒ¨é—¨ï¼ˆç®¡ç†å¤šä¸ªæ³•å¾‹æ³•è§„åº“çš„å®¹å™¨ï¼‰ï¼Œè¿™æ˜¯å…¨å±€å…±äº«çš„ï¼Œä¹Ÿå¯ä»¥è®¤ä¸ºæ˜¯è§„åˆ™å¼•æ“çš„å…¨å±€è§„åˆ™å®¹å™¨ã€‚æ„å»ºè§„åˆ™å®¹å™¨æ˜¯ä¸€ä¸ªé‡é‡çº§çš„æ“ä½œï¼Œä¸€èˆ¬åœ¨åº”ç”¨å¯åŠ¨æ—¶æ„å»ºä¸€æ¬¡ï¼Œç„¶åå¯ä»¥è¢«å…¨å±€ä½¿ç”¨ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// è·å–è§„åˆ™å®¹å™¨</span>
<span class="hljs-type">KieContainer</span> <span class="hljs-variable">kieContainer</span> <span class="hljs-operator">=</span> kieServices.getKieClasspathContainer();
</code></pre>
<p><code>KieContainer</code>ä¹Ÿæ˜¯ä¸€ä¸ªå•ä¾‹ï¼Œå†…éƒ¨é‡‡ç”¨<strong>DCL</strong>åŒé‡æ£€æŸ¥é”æ¥å®ç°çš„ã€‚
åœ¨å¯åŠ¨æ—¶ä¼šå°è¯•åŠ è½½ç”¨æˆ·å®šä¹‰çš„è§„åˆ™èµ„æºï¼Œå³ä¾¿æ²¡æœ‰åŠ è½½åˆ°ä¹Ÿä¸ä¼šæœ‰ä»»ä½•æŠ¥é”™ï¼Œè€Œå½“æˆ‘ä»¬å°è¯•ä»è§„åˆ™å®¹å™¨è·å–è§„åˆ™åº“ï¼ˆKieBaseï¼‰æ—¶æ‰ä¼šæŠ›å‡ºé”™è¯¯ã€‚</p>
<h5 data-id="heading-26">KieBase</h5>
<p>æˆ‘ä»¬è¯´è§„åˆ™å¼•æ“è¿™ä¸ªå¤§çš„æ³•é™¢ç³»ç»Ÿå°†æ‰€æœ‰çš„è§„åˆ™äº¤ç»™kieå®¹å™¨æ¥ç®¡ç†ï¼Œè€Œå®é™…çš„å­˜å‚¨è§„åˆ™çš„å¯¹åº”<em>KieBase</em>ç±»å‹çš„å¯¹è±¡ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè§„åˆ™å®¹å™¨(KieContainer)å¯ä»¥åŒ…å«å¤šä¸ªè§„åˆ™å­˜å‚¨åº“(KieBase)ã€‚
ç”¨æˆ·å¯ä»¥å¯¹è§„åˆ™åˆ†ç»„ï¼Œåˆ†å¤šä¸ªåº“æ¥ç®¡ç†ï¼›ä¹Ÿå¯ä»¥å°†æ‰€æœ‰è§„åˆ™é»˜è®¤æ”¾åœ¨ä¸€ä¸ªåº“ä¸­ã€‚æ€»ä¹‹ï¼Œè¦æ„å»ºä¸€ä¸ª<em>KieBase</em>éœ€è¦æœ‰ä¸€ä¸ªè§„åˆ™æ¨¡å—é…ç½®æ–‡ä»¶ï¼Œè·¯å¾„ä¸º<code>META-INFO/kmodule.xml</code>ï¼Œå†…å®¹å¯ä»¥ä¸ºç©ºï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"UTF-8"</span>?&gt;</span>  
<span class="hljs-tag">&lt;<span class="hljs-name">kmodule</span> <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>  
        <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://www.drools.org/xsd/kmodule"</span>&gt;</span>  
  
<span class="hljs-tag">&lt;/<span class="hljs-name">kmodule</span>&gt;</span>
</code></pre>
<p>è¿™æ ·ä¼šå¾—åˆ°é»˜è®¤çš„ä¸€ä¸ªè§„åˆ™åº“å¯¹è±¡ï¼Œå’±ä»¬å¯ä»¥è·å–å…¶ä¿¡æ¯ï¼š</p>
<pre><code class="hljs language-java" lang="java">...
<span class="hljs-comment">// è·å–é»˜è®¤çš„è§„åˆ™åº“  </span>
<span class="hljs-type">KieBase</span> <span class="hljs-variable">kieBase</span> <span class="hljs-operator">=</span> kieContainer.getKieBase();  
logger.info(<span class="hljs-string">"------ kieBase packages: {}"</span>, kieBase.getKiePackages());
</code></pre>
<p>è¿™é‡Œå¾—åˆ°çš„åŒ…åä¼šæ˜¯ä¸€ä¸ªé›†åˆï¼Œdroolsæ¨èå¯¹è§„åˆ™æ–‡ä»¶æŒ‰åŒ…æ¥ç»„ç»‡ç»“æ„ï¼Œè§„åˆ™æ–‡ä»¶ä¸­å¤´éƒ¨ç”¨<code>package</code>å…³é”®å­—æŒ‡å®šçš„é€»è¾‘åŒ…åå°½é‡å’Œåœ¨<code>resources</code>èµ„æºåŒ…ä¸‹å­˜å‚¨çš„ç‰©ç†åŒ…è·¯å¾„ä¿æŒä¸€è‡´ï¼Œä»¥ä¾¿äº¤ç»™kieBaseè¿›è¡Œå¾ˆå¥½çš„ç®¡ç†ã€‚</p>
<p>ä¹Ÿå¯ä»¥å¯¹è§„åˆ™æŒ‰ç…§åŒ…è·¯å¾„åˆ†ç»„åï¼Œåˆ’åˆ†ç»™ä¸åŒçš„è§„åˆ™åº“æ¥ç®¡ç†ï¼Œè¿™æ ·å½“åº”ç”¨ä¸­æœ‰å¤šä¸ªä¸šåŠ¡æ¨¡å—ï¼Œå¯ä»¥å„è‡ªå…³æ³¨è·Ÿè‡ªå·±æ¨¡å—ç›¸å…³çš„ä¸šåŠ¡è§„åˆ™ï¼Œæé«˜è§„åˆ™çš„åŠ è½½å’Œæ‰§è¡Œæ•ˆç‡ã€‚æ¯”å¦‚ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">kmodule</span> <span class="hljs-attr">...</span>&gt;</span>  
  
    <span class="hljs-tag">&lt;<span class="hljs-name">kbase</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"loanRules"</span> <span class="hljs-attr">packages</span>=<span class="hljs-string">"com.zm626.rules.loan"</span>&gt;</span>  
        <span class="hljs-comment">&lt;!-- è´·æ¬¾ç›¸å…³è§„åˆ™ --&gt;</span>  
    <span class="hljs-tag">&lt;/<span class="hljs-name">kbase</span>&gt;</span>  
  
    <span class="hljs-tag">&lt;<span class="hljs-name">kbase</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"creditRules"</span> <span class="hljs-attr">packages</span>=<span class="hljs-string">"com.zm626.rules.credit"</span>&gt;</span>  
        <span class="hljs-comment">&lt;!-- ä¿¡ç”¨ç›¸å…³è§„åˆ™ --&gt;</span>  
    <span class="hljs-tag">&lt;/<span class="hljs-name">kbase</span>&gt;</span>  
  
<span class="hljs-tag">&lt;/<span class="hljs-name">kmodule</span>&gt;</span>
</code></pre>
<p>å¯¹åº”çš„è§„åˆ™æ–‡ä»¶æ‰€åœ¨ç›®å½•ç»“æ„ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/01491c695ecf4effa3530c54b8058cd8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YeWwj-WNtw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771559237&amp;x-signature=jMl5FCw5tVL0cbPC9Ohb1uP49cQ%3D" alt="20260211184113.png" loading="lazy"/></p>
<p>ç»ƒä¹ ä¸‹è·å–æŸä¸ªè§„åˆ™åº“ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// è·å–è§„åˆ™åº“åç§°  </span>
<span class="hljs-comment">// è¾“å‡ºï¼š[loanRules, creditRules]  </span>
logger.info(<span class="hljs-string">"------ è§„åˆ™åº“åç§°ï¼š{}"</span>, kieContainer.getKieBaseNames());  
  
<span class="hljs-comment">// è·å–æŸä¸ªè§„åˆ™åº“  </span>
<span class="hljs-type">var</span> <span class="hljs-variable">kb</span> <span class="hljs-operator">=</span> kieContainer.getKieBase(<span class="hljs-string">"loanRules"</span>);  
<span class="hljs-comment">// è¾“å‡ºï¼š[[Package name=com.zm626.rules.loan]]  </span>
logger.info(<span class="hljs-string">"------ kieBase packages: {}"</span>, kb.getKiePackages());
</code></pre>
<h4 data-id="heading-27">æ‰§è¡Œè§„åˆ™</h4>
<h5 data-id="heading-28">è§„åˆ™ä¼šè¯</h5>
<h6 data-id="heading-29">åˆ›å»ºKieSession</h6>
<p>åˆ›å»ºå¥½äº†è§„åˆ™å¼•æ“çš„å®¹å™¨ã€æ„å»ºå¥½è§„åˆ™åº“ä¹‹åï¼Œå°±å¯ä»¥æ‰§è¡Œè§„åˆ™äº†ï¼Œæ‰§è¡Œè§„åˆ™éœ€è¦åˆ›å»ºä¼šè¯å¯¹è±¡ï¼Œå°±å¥½æ¯”æ³•åº­å®¡åˆ¤ä¼šä¾æ®ç›¸å…³æ³•å¾‹æ³•è§„æ¥å¼€å¯ä¸€æ¬¡åº­å®¡ä¸€æ ·ï¼Œä¼šè¯çš„åˆ›å»ºå¯ä»¥äº¤ç»™<code>KieBase</code>å®ä¾‹ï¼Œ</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">KieBase</span> <span class="hljs-variable">kieBase</span> <span class="hljs-operator">=</span> kieContainer.getKieBase();  
<span class="hljs-type">KieSession</span> <span class="hljs-variable">kieSession</span> <span class="hljs-operator">=</span> kieBase.newKieSession();  
<span class="hljs-type">KieSession</span> <span class="hljs-variable">kieSession2</span> <span class="hljs-operator">=</span> kieBase.newKieSession();  
<span class="hljs-comment">// è¿”å›falseï¼Œè¯´æ˜æ¯æ¬¡éƒ½æ˜¯æ–°newçš„ä¸€ä¸ªä¼šè¯å®ä¾‹  </span>
System.out.println(kieSession == kieSession2);
</code></pre>
<p>é™¤æ­¤ä¹‹å¤–ä¸€èˆ¬æ›´æ¨èç›´æ¥ç”¨<code>kieContainer</code>æ¥å¼€å¯ä¼šè¯ï¼Œå› ä¸ºå®¹å™¨åˆ›å»ºçš„ä¼šè¯ï¼Œå…¶å®å†…éƒ¨ä¹Ÿæ˜¯å€ŸåŠ©<code>kieBase</code>æ¥åˆ›å»ºçš„ï¼Œä½†å®¹å™¨åˆ›å»ºä¼šå¼€å¯å¯¹ä¼šè¯çš„ç›‘æ§å’Œç®¡ç†ï¼Œè¿™æ˜¯åœ¨å®é™…åº”ç”¨ä¸­æ¨èçš„åšæ³•ã€‚
å¯¹äºé»˜è®¤çš„<code>kbase</code>ï¼Œä¹Ÿå°±æ˜¯<em>kmodule.xml</em>ä¸ºç©ºçš„æƒ…å†µï¼Œå¼€å¯ä¼šè¯å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">KieSession</span> <span class="hljs-variable">kieSession</span> <span class="hljs-operator">=</span> kieContainer.newKieSession();
</code></pre>
<p>å¯¹äºå¤š<code>kbase</code>å®šä¹‰çš„æƒ…å†µï¼Œæ¯”å¦‚ï¼š
<em>kmodule.xml</em></p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">kmodule</span> <span class="hljs-attr">...</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- è´·æ¬¾ç”³è¯·ç›¸å…³è§„åˆ™ --&gt;</span>  
    <span class="hljs-tag">&lt;<span class="hljs-name">kbase</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"loanRules"</span> <span class="hljs-attr">packages</span>=<span class="hljs-string">"com.zm626.rules"</span>&gt;</span>  
        <span class="hljs-comment">&lt;!-- å®šä¹‰ä¼šè¯åç§° --&gt;</span>  
        <span class="hljs-tag">&lt;<span class="hljs-name">ksession</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"loanSession"</span> /&gt;</span>  
    <span class="hljs-tag">&lt;/<span class="hljs-name">kbase</span>&gt;</span>  
<span class="hljs-tag">&lt;/<span class="hljs-name">kmodule</span>&gt;</span>
</code></pre>
<p>æŒ‰ç…§ä¼šè¯åç§°æ¥å¼€å¯ä¼šè¯</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">KieSession</span> <span class="hljs-variable">kieSession</span> <span class="hljs-operator">=</span> kieContainer.newKieSession(<span class="hljs-string">"loanSession"</span>);  
</code></pre>
<p>è¿™æ„å‘³ç€åˆ›å»ºçš„ä¼šè¯å¯¹è±¡æ¯æ¬¡éƒ½æ˜¯ä¸€ä¸ªæ–°çš„å®ä¾‹ï¼Œè¦æ³¨æ„ï¼šè¿™é‡Œåˆ›å»ºçš„<code>KieSession</code>æ˜¯æœ‰çŠ¶æ€çš„ä¼šè¯ï¼Œå…³äºæœ‰çŠ¶æ€è¿˜æ˜¯æ— çŠ¶æ€åç»­ä¼šè®¨è®ºã€‚è§„åˆ™åº”ç”¨ä¸­æ¯å‘ä¸€ä¸ªhttpè¯·æ±‚ï¼Œåå°æ‰§è¡Œè§„åˆ™å‰éƒ½å…ˆåˆ›å»ºä¸€ä¸ªå¯¹åº”çš„ä¼šè¯ï¼Œè§„åˆ™æ‰§è¡Œå®Œæˆåé”€æ¯ä¼šè¯ã€‚è¿™ä¸åŒäºServletå®¹å™¨ä¸­çš„sessionä¼šè¯çš„æ¦‚å¿µï¼Œsessionä¼šè¯å¯ä»¥åœ¨å¤šä¸ªhttpè¯·æ±‚é—´é€šè¿‡æäº¤çš„cookieä¸­çš„sessionidæ¥å®ç°ä¼šè¯å…±äº«ï¼Œ<strong>è€Œè¿™é‡Œçš„è§„åˆ™ä¼šè¯å¦‚æœåˆ›å»ºä¸ºå…¨å±€è¯·æ±‚é—´å…±äº«ï¼Œé‚£ä¹ˆå¹¶å‘æ‰§è¡Œè§„åˆ™ä¼šæœ‰çº¿ç¨‹å®‰å…¨é—®é¢˜</strong>ï¼Œè€Œåšæˆæ¯ä¸ªè¯·æ±‚å¯¹åº”åˆ›å»ºä¸€ä¸ªè§„åˆ™ä¼šè¯ï¼Œç›¸æ¯”äºè§„åˆ™å®¹å™¨å’Œè§„åˆ™åº“çš„æ„å»ºï¼Œè§„åˆ™ä¼šè¯çš„åˆ›å»ºåˆ™ç›¸å¯¹ä¼šè½»é‡çº§å¾ˆå¤šã€‚</p>
<h6 data-id="heading-30">ç›‘å¬è¿è¡Œäº‹ä»¶</h6>
<p>ä¸€èˆ¬åœ¨è§„åˆ™çš„å¼€å‘è°ƒè¯•é˜¶æ®µï¼Œä¸ºäº†æ–¹ä¾¿è°ƒè¯•è§„åˆ™æ‰§è¡Œæµç¨‹ï¼Œæ¯”å¦‚æˆ‘ä»¬æƒ³å¼„æ¸…æ¥šè§„åˆ™æ‰§è¡Œçš„ç»†èŠ‚ï¼ŒæŸ¥çœ‹å“ªäº›äº‹å®è¢«æ’å…¥ï¼ŒæŸ¥çœ‹å“ªäº›è§„åˆ™è¢«è§¦å‘ï¼ŒæœŸé—´å‘ç”Ÿäº†å“ªäº›äº‹ä»¶ï¼Œæ’æŸ¥è§„åˆ™æœªæŒ‰é¢„æœŸæ‰§è¡Œçš„åŸå› ï¼Œä»¥ä¾¿äºä¿®å¤ã€æ”¹è¿›å’Œä¼˜åŒ–è§„åˆ™å®šä¹‰ã€‚ä¸ºæ­¤å¯ä»¥ç»™ä¼šè¯æ·»åŠ å¦‚ä¸‹ç›‘å¬å™¨ï¼š</p>
<pre><code class="hljs language-java" lang="java">kieSession.addEventListener(<span class="hljs-keyword">new</span> <span class="hljs-title class_">DebugRuleRuntimeEventListener</span>());  
</code></pre>
<p><code>DebugRuleRuntimeEventListener</code>Â ä¼šç›‘å¬è§„åˆ™æ‰§è¡Œè¿‡ç¨‹ä¸­çš„è¿è¡Œæ—¶äº‹ä»¶ï¼Œå¹¶å°†è¿™äº›äº‹ä»¶è¾“å‡ºåˆ°æ—¥å¿—ï¼Œä¾¿äºè°ƒè¯•ã€‚ç›‘å¬çš„äº‹ä»¶ç±»å‹åŒ…æ‹¬ï¼š</p>
<ol>
<li>äº‹å®å¯¹è±¡æ’å…¥ï¼ˆFactÂ Insertedï¼‰</li>
<li>äº‹å®å¯¹è±¡æ›´æ–°ï¼ˆFact Updatedï¼‰</li>
<li>äº‹å®å¯¹è±¡åˆ é™¤ï¼ˆFact Deletedï¼‰</li>
<li>è§„åˆ™åŒ¹é…ï¼ˆRule Matchedï¼‰</li>
<li>è§„åˆ™è§¦å‘ï¼ˆRule Firedï¼‰</li>
<li>è§„åˆ™å–æ¶ˆï¼ˆRule Cancelledï¼‰
ç­‰ç­‰â€¦â€¦
è¿™å°±åƒåœ¨æ³•åº­å®¡åˆ¤æ—¶å®‰è£…æ‘„åƒå¤´ï¼Œè®°å½•æ•´ä¸ªå®¡åˆ¤è¿‡ç¨‹ï¼Œæ–¹ä¾¿åç»­å›çœ‹å’Œåˆ†æã€‚</li>
</ol>
<blockquote>
<p><strong>æ³¨æ„</strong>
è¿™æ˜¯è°ƒè¯•å·¥å…·ï¼Œç”Ÿäº§ç¯å¢ƒé€šå¸¸ä¸éœ€è¦ï¼Œå› ä¸ºä¼šäº§ç”Ÿå¤§é‡æ—¥å¿—ã€‚</p>
</blockquote>
<h6 data-id="heading-31">æ— çŠ¶æ€ä¼šè¯ä¸æœ‰çŠ¶æ€ä¼šè¯</h6>
<p><code>kieContainer.newKieSession()</code>æ–¹å¼åˆ›å»ºçš„æ˜¯æœ‰çŠ¶æ€çš„ä¼šè¯ï¼Œå¦‚æœè¦åˆ›å»ºæ— çŠ¶æ€çš„ä¼šè¯ï¼Œå¯ä½¿ç”¨ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// å¼€å¯æ— çŠ¶æ€ä¼šè¯</span>
<span class="hljs-type">StatelessKieSession</span> <span class="hljs-variable">statelessKieSession</span> <span class="hljs-operator">=</span> kieContainer.newStatelessKieSession();
</code></pre>
<p>è¿™é‡Œçš„â€œçŠ¶æ€â€æŒ‡çš„æ˜¯ä¼šè¯ä¸­ä¿å­˜çš„æ•°æ®ï¼Œä¹Ÿå°±æ˜¯å·¥ä½œå†…å­˜ï¼ˆWorking Memoryï¼‰ä¸­çš„Â <code>Fact</code> å¯¹è±¡ã€‚
ç±»æ¯”ï¼šé“¶è¡ŒæŸœå° vsÂ è‡ªåŠ¨å–æ¬¾æœº</p>
<ul>
<li>æœ‰çŠ¶æ€ä¼šè¯ = é“¶è¡ŒæŸœå°ï¼šæŸœå‘˜ä¼šè®°ä½ä½ ä¹‹å‰åŠè¿‡çš„ä¸šåŠ¡</li>
<li>æ— çŠ¶æ€ä¼šè¯ = è‡ªåŠ¨å–æ¬¾æœºï¼šæ¯æ¬¡æ“ä½œéƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œä¸ä¿ç•™ä¹‹å‰çš„ä¿¡æ¯</li>
</ul>
<p>æœ‰çŠ¶æ€ä¼šè¯çš„ç‰¹ç‚¹ï¼š</p>
<ul>
<li>æ•°æ®ä¼šç´¯ç§¯åœ¨å·¥ä½œå†…å­˜ä¸­</li>
<li>å¯ä»¥åˆ†å¤šæ¬¡æ¥æ’å…¥æ•°æ®å¹¶æ‰§è¡Œè§„åˆ™</li>
<li>é€‚åˆéœ€è¦å¤šæ­¥éª¤äº¤äº’çš„åœºæ™¯</li>
<li>å¿…é¡»æ‰‹åŠ¨è°ƒç”¨Â dispose()Â æ¸…ç†
å®é™…åœºæ™¯æ¯”å¦‚ï¼šæ·»åŠ è´­ç‰©è½¦è§„åˆ™ï¼ˆå¤šæ­¥éª¤ï¼‰ï¼Œæ¯æ¬¡æ·»åŠ è´­ç‰©è½¦é¡¹åéƒ½è¦é‡æ–°è§¦å‘å•†å“ä¿ƒé”€ä¼˜æƒ è§„åˆ™çš„è®¡ç®—ã€‚</li>
</ul>
<p>æ— çŠ¶æ€ä¼šè¯çš„ç‰¹ç‚¹ï¼š</p>
<ul>
<li>æ¯æ¬¡æ‰§è¡Œå®Œè‡ªåŠ¨æ¸…ç©ºå·¥ä½œå†…å­˜</li>
<li>æ¯æ¬¡æ‰§è¡Œéƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œäº’ä¸å½±å“</li>
<li>é€‚åˆä¸€æ¬¡æ€§è§„åˆ™æ‰§è¡Œ</li>
<li>ä¸éœ€è¦æ‰‹åŠ¨æ¸…ç†
å®é™…åœºæ™¯æ¯”å¦‚ï¼šè´·æ¬¾å®¡æ‰¹ï¼ˆä¸€æ¬¡æ€§ï¼‰ï¼Œç”¨æˆ·æäº¤ç”³è¯·ï¼Œä¸€æ¬¡æ€§å®Œæˆå®¡æ‰¹ï¼Œæ‰§è¡Œå®Œå°±ç»“æŸï¼Œä¸éœ€è¦ä¿ç•™çŠ¶æ€ã€‚
<strong>æ— çŠ¶æ€ä¼šè¯è™½ç„¶ä¸ç»´æŠ¤çŠ¶æ€ï¼Œä½†å¹¶å‘æ‰§è¡Œæ—¶ä¹Ÿå­˜åœ¨çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼ŒåŒæ ·ä¸èƒ½å…¨å±€å…±äº«ã€‚</strong></li>
</ul>
<h5 data-id="heading-32">ç”¨ä¼šè¯æ‰§è¡Œè§„åˆ™</h5>
<h6 data-id="heading-33">æœ‰çŠ¶æ€ä¼šè¯çš„æ‰§è¡Œ</h6>
<p>è¿™é‡Œæˆ‘ä»¬å…ˆçœ‹æœ‰çŠ¶æ€çš„ä¼šè¯ï¼Œæœ‰äº†è§„åˆ™ä¼šè¯ï¼Œå°±å¯ä»¥é€šè¿‡ä¼šè¯æ¥å‘è§„åˆ™å¼•æ“å‘é€å‘½ä»¤ï¼ŒåŒ…æ‹¬äº†ï¼š</p>
<ul>
<li>æ’å…¥äº‹å®å¯¹è±¡</li>
<li>æ¿€æ´»è§„åˆ™ç»„</li>
<li>è§¦å‘è§„åˆ™</li>
<li>â€¦â€¦
æœ‰çŠ¶æ€ä¼šè¯æ‰§è¡Œæ—¶è§¦å‘è§„åˆ™æ˜¯æ‰‹åŠ¨è§¦å‘çš„ï¼ˆè°ƒç”¨<code>fireAllRules</code>ï¼‰ï¼Œè€Œä¸æ˜¯ä¸€æ¬¡æ€§æ‰§è¡Œçš„ï¼Œä¸­é—´å¯ä»¥ç»§ç»­æ’å…¥äº‹å®å¯¹è±¡æˆ–è€…æ›´æ–°å…¶çŠ¶æ€ï¼Œå†ç»§ç»­è§¦å‘è§„åˆ™ï¼Œä¹Ÿæ˜¯è¿™ç§åˆ†æ­¥éª¤æ‰§è¡Œè§„åˆ™ï¼Œæ‰éœ€è¦ä¿æŒè§„åˆ™æ‰§è¡Œä¸Šä¸‹æ–‡çš„çŠ¶æ€ã€‚</li>
</ul>
<h6 data-id="heading-34">å•æ¡å‘½ä»¤</h6>
<p>è¿™ç§æ–¹å¼é€šè¿‡ä¼šè¯å‘è§„åˆ™å¼•æ“åˆ†å¤šæ¬¡å‘é€å‘½ä»¤ï¼Œæ¯æ¬¡å‘é€ä¸€æ¡ï¼Œæ¯”å¦‚ï¼š</p>
<pre><code class="hljs language-java" lang="java">...
<span class="hljs-comment">// ç›´æ¥æ’å…¥äº‹å®å¯¹è±¡  </span>
kieSession.insert(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Applicant</span>(<span class="hljs-string">"#0001"</span>, <span class="hljs-number">20</span>));  
<span class="hljs-type">LoanApplication</span> <span class="hljs-variable">application</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">LoanApplication</span>(<span class="hljs-string">"#0001"</span>);  
kieSession.insert(application);  
<span class="hljs-comment">// æ¿€æ´»è§„åˆ™ç»„  </span>
kieSession.getAgenda().getAgendaGroup(<span class="hljs-string">"applicationGroup"</span>).setFocus();  
<span class="hljs-comment">// è§¦å‘è§„åˆ™  </span>
<span class="hljs-type">int</span> <span class="hljs-variable">firedRules</span> <span class="hljs-operator">=</span> kieSession.fireAllRules();  
<span class="hljs-comment">// ç›´æ¥ä»å¯¹è±¡è·å–ç»“æœ  </span>
logger.info(<span class="hljs-string">"application: "</span> + application);
</code></pre>
<p>æ’å…¥äº‹å®å¯¹è±¡å°±å¥½æ¯”å‘æ³•åº­æäº¤æ¡ˆä»¶ææ–™ï¼ˆè¯æ®ã€æ–‡ä»¶ç­‰ï¼‰ï¼Œè¿™äº›ææ–™ä¼šè¢«æ”¾å…¥å·¥ä½œå†…å­˜ä¾›è§„åˆ™å¼•æ“åŒ¹é…ã€‚ä½†è¦æ³¨æ„å·å®—æ˜¯é™æ€çš„æ¦‚å¿µï¼Œè€Œè§„åˆ™å¼•æ“åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­å¯ä»¥åŠ¨æ€åœ°æ’å…¥ç”šè‡³ä¿®æ”¹äº‹å®å¯¹è±¡ï¼Œä»¥ä¾¿é‡æ–°è§¦å‘ä¸€äº›è§„åˆ™æˆ–æŸ¥è¯¢å•å…ƒçš„æ‰§è¡Œã€‚
ä¹‹å‰åœ¨è§„åˆ™æ–‡ä»¶å®šä¹‰æ—¶ï¼Œå¯¹è§„åˆ™é€šè¿‡<code>ruleflow-group</code>è¿›è¡Œäº†åˆ†ç»„ï¼Œé‚£è¿™é‡Œå°±åªæ˜¯æ¿€æ´»äº†æŒ‡å®šçš„è§„åˆ™åˆ†ç»„ï¼Œè€Œåé€šè¿‡ä¼šè¯å‡ºå‘äº†è¯¥åˆ†ç»„ä¸­çš„æ‰€æœ‰è§„åˆ™ï¼ˆè¿™é‡Œåªæœ‰ä¸€æ¡ï¼‰ï¼Œè¿”å›çš„æ˜¯è§¦å‘çš„è§„åˆ™æ¡æ•°ï¼Œè¿™é‡Œçš„äº‹å®å¯¹è±¡çš„å¼•ç”¨ï¼Œå…¶å®åœ¨è§„åˆ™çš„<code>then</code>ä¸­æ“ä½œçš„æ˜¯åŒä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨ï¼Œå› æ­¤å¯ä»¥ç›´æ¥æ‹¿å®ƒæ¥çœ‹ç»“æœã€‚</p>
<h6 data-id="heading-35">æ‰¹é‡å‘½ä»¤</h6>
<p>å…ˆçœ‹ä¸‹ç¤ºä¾‹ä»£ç ï¼š</p>
<pre><code class="hljs language-java" lang="java">...
<span class="hljs-type">var</span> <span class="hljs-variable">application</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Applicant</span>(<span class="hljs-string">"#0001"</span>, <span class="hljs-number">20</span>);  
  
<span class="hljs-type">ExecutionResults</span> <span class="hljs-variable">executionResults</span> <span class="hljs-operator">=</span> kieSession.execute(  
        CommandFactory.newBatchExecution(Arrays.asList(  
                CommandFactory.newInsert(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Applicant</span>(<span class="hljs-string">"#0001"</span>, <span class="hljs-number">20</span>), <span class="hljs-string">"applicant"</span>),  
                CommandFactory.newInsert(application, <span class="hljs-string">"application"</span>),  
                <span class="hljs-keyword">new</span> <span class="hljs-title class_">SetActiveAgendaGroup</span>(<span class="hljs-string">"applicationGroup"</span>),  
                CommandFactory.newFireAllRules()  
        ))  
);  
  
logger.info(<span class="hljs-string">"application: "</span> + executionResults.getResults().get(<span class="hljs-string">"application"</span>));  
logger.info(<span class="hljs-string">"application: "</span> + application);
</code></pre>
<p>è¿™é‡Œé€šè¿‡å‘½ä»¤çš„é™æ€å·¥å‚çš„åˆ›å»ºæ–¹å¼æ¥æ„å»ºä¸€ä¸ªæ‰¹é‡æ‰§è¡Œå‘½ä»¤çš„å¯¹è±¡ï¼Œä½œä¸ºå‚æ•°äº¤ç»™ä¼šè¯æ¥æ‰§è¡Œã€‚è€Œç”¨æˆ·ä¼ å…¥çš„åˆ™æ˜¯ç”¨å‘½ä»¤æ¨¡å¼åŒ…è£…æˆ‘ä»¬å‰é¢æåˆ°çš„ä¸€ç»„æ“ä½œï¼Œè¿™ä¸ªæ•ˆç‡ç›¸æ¯”å‘é€å•æ¡å‘½ä»¤å°±æé«˜å¾ˆå¤šã€‚äº‹å®å¯¹è±¡åœ¨æ’å…¥åˆ°è§„åˆ™å¼•æ“å,æˆ‘ä»¬å¯ä»¥åœ¨å¤–é¢ç»™å®ƒå®šä¹‰å¥½å¼•ç”¨å˜é‡ç”¨äºåç»­æŸ¥çœ‹å®ƒ,ä¹Ÿå¯ä»¥åœ¨ç”¨å‘½ä»¤å·¥å‚æ’å…¥æ—¶æŒ‡å®šfactå¯¹è±¡çš„nameä½œä¸ºæ ‡è¯†,å› ä¸ºè¿™ç§æ–¹å¼ä¼šè¿”å›æ‰§è¡Œç»“æœ,ä»¥ä¾¿ä»æ‰§è¡Œç»“æœä¸­è·å–åˆ°å®ƒ,ä¸¤ç§æ–¹å¼éƒ½å¯ä»¥ã€‚</p>
<h6 data-id="heading-36">æ— çŠ¶æ€ä¼šè¯çš„æ‰§è¡Œ</h6>
<p>æ— çŠ¶æ€ä¼šè¯çš„æ‰§è¡Œå› ä¸ºæ˜¯ä¸€æ¬¡æ€§çš„ï¼Œä¸å­˜åœ¨åˆ†æ­¥éª¤çš„æƒ…å†µï¼Œåªé€‚åˆæ‰¹é‡å‘½ä»¤çš„æ–¹å¼ï¼Œä¸ºä»€ä¹ˆåªé€‚åˆæ‰¹é‡å‘½ä»¤ï¼šå› ä¸ºæ¯æ¬¡Â execute()Â éƒ½æ˜¯ç‹¬ç«‹çš„æ‰§è¡Œå•å…ƒï¼Œéœ€è¦åœ¨ä¸€ä¸ªæ‰¹æ¬¡ä¸­å®Œæˆæ‰€æœ‰æ“ä½œã€‚</p>
<p>è¯¥å®ä¾‹ç›¸æ¯”äºæœ‰çŠ¶æ€çš„ä¼šè¯ï¼Œåªæ˜¯æœ€åæ— éœ€æ‰‹åŠ¨è§¦å‘è§„åˆ™ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">StatelessKieSession</span> <span class="hljs-variable">statelessKieSession</span> <span class="hljs-operator">=</span> kieContainer.newStatelessKieSession();  
statelessKieSession.addEventListener(<span class="hljs-keyword">new</span> <span class="hljs-title class_">DebugRuleRuntimeEventListener</span>());  
  
<span class="hljs-type">ExecutionResults</span> <span class="hljs-variable">statelessExecutionResults</span> <span class="hljs-operator">=</span> statelessKieSession.execute(  
        CommandFactory.newBatchExecution(Arrays.asList(  
                CommandFactory.newInsert(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Applicant</span>(<span class="hljs-string">"#0001"</span>, <span class="hljs-number">20</span>), <span class="hljs-string">"applicant"</span>),  
                CommandFactory.newInsert(<span class="hljs-keyword">new</span> <span class="hljs-title class_">LoanApplication</span>(<span class="hljs-string">"#0001"</span>), <span class="hljs-string">"application"</span>),  
                <span class="hljs-keyword">new</span> <span class="hljs-title class_">SetActiveAgendaGroup</span>(<span class="hljs-string">"applicationGroup"</span>)            ))  
);  
  
logger.info(<span class="hljs-string">"application: "</span> + statelessExecutionResults.getResults().get(<span class="hljs-string">"application"</span>));
</code></pre>
<h5 data-id="heading-37">é”€æ¯ä¼šè¯</h5>
<p>æ³¨æ„è¿™é‡Œåªé€‚ç”¨äºæœ‰çŠ¶æ€çš„ä¼šè¯ï¼Œå®Œæˆè§„åˆ™æ‰§è¡Œåç¡®å®ä¸éœ€è¦å†ä½¿ç”¨æœ‰çŠ¶æ€çš„ä¼šè¯äº†ï¼Œæ­¤æ—¶å¯ä»¥æ‰‹åŠ¨çš„è°ƒç”¨ï¼š</p>
<pre><code class="hljs language-java" lang="java">kieSession.dispose();
</code></pre>
<p>ä»¥ä¾¿é‡Šæ”¾è§„åˆ™æ‰§è¡Œæ—¶å ç”¨çš„èµ„æºã€å·¥ä½œå†…å­˜ç©ºé—´ç­‰ã€‚<strong>ä½†è¦æ³¨æ„ï¼ŒçŠ¶æ€ä¼šè¯ä¸€æ—¦å…³é—­å°±ä¸èƒ½å†æ‰§è¡Œè§„åˆ™äº†</strong>ã€‚kieä¼šè¯æ¥å£åœ¨è®¾è®¡ä¸Šæ‰©å±•äº†<code>AutoCloseable</code>æ¥å£ï¼Œ<code>close</code>æ–¹æ³•å®ç°ä¸ºå¯¹<code>dispose</code>æ–¹æ³•çš„è°ƒç”¨ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨<code>try-with-resources</code>è¯­æ³•æ¥å£°æ˜ä¼šè¯çš„åˆ›å»ºï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">try</span> (  
	<span class="hljs-type">KieSession</span> <span class="hljs-variable">kieSession</span> <span class="hljs-operator">=</span> kieContainer.newKieSession();  
) {
    ...
}
</code></pre>
<p>è€Œå¯¹äºæ— çŠ¶æ€çš„ä¼šè¯ï¼Œæ¯æ¬¡æ‰§è¡Œå®Œè§„åˆ™åä¼šè‡ªåŠ¨é‡Šæ”¾èµ„æºï¼Œåç»­å¯ä»¥ç»§ç»­æ‰§è¡Œã€‚</p>
<h3 data-id="heading-38">æ€»ç»“</h3>
<p>æœ¬æ–‡ä»‹ç»äº† Drools è§„åˆ™å¼•æ“çš„åŸºç¡€ä½¿ç”¨ï¼šä»ç¯å¢ƒæ­å»ºåˆ°è§„åˆ™å®šä¹‰ï¼Œå†åˆ°é€šè¿‡Â KieServicesã€KieContainerã€KieBaseã€KieSessionÂ æ‰§è¡Œè§„åˆ™ã€‚é‡ç‚¹åŒ…æ‹¬ Fact ç±»ã€DRL è§„åˆ™æ–‡ä»¶ã€æœ‰çŠ¶æ€/æ— çŠ¶æ€ä¼šè¯çš„åŒºåˆ«ï¼Œä»¥åŠå•æ¡å‘½ä»¤ä¸æ‰¹é‡å‘½ä»¤çš„æ‰§è¡Œæ–¹å¼ã€‚é€šè¿‡æ³•é™¢å®¡ç†æ¡ˆä»¶çš„ç±»æ¯”ï¼Œå¸®åŠ©ç†è§£è§„åˆ™å¼•æ“çš„æ ¸å¿ƒæ¦‚å¿µã€‚</p>
<p>ä»¥ä¸Šå†…å®¹ä¸ºå…¥é—¨åŸºç¡€ã€‚åç»­å°†æ·±å…¥è§„åˆ™ä¼˜å…ˆçº§ã€è§„åˆ™åˆ†ç»„ã€å¤æ‚æ¡ä»¶åŒ¹é…ã€è§„åˆ™æµ‹è¯•ã€æ€§èƒ½ä¼˜åŒ–ç­‰è¿›é˜¶ä¸»é¢˜ï¼Œä»¥åŠåœ¨å®é™…é¡¹ç›®ä¸­çš„åº”ç”¨å®è·µã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[JavaScript æ‰‹å†™ callã€applyã€bindï¼šæ·±å…¥ç†è§£å‡½æ•°ä¸Šä¸‹æ–‡ç»‘å®š]]></title>    <link>https://juejin.cn/post/7605941424535470134</link>    <guid>https://juejin.cn/post/7605941424535470134</guid>    <pubDate>2026-02-12T22:57:30.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605941424535470134" data-draft-id="7605800124883435526" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="JavaScript æ‰‹å†™ callã€applyã€bindï¼šæ·±å…¥ç†è§£å‡½æ•°ä¸Šä¸‹æ–‡ç»‘å®š"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2026-02-12T22:57:30.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="wuhen_n"/> <meta itemprop="url" content="https://juejin.cn/user/4149996261738233"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            JavaScript æ‰‹å†™ callã€applyã€bindï¼šæ·±å…¥ç†è§£å‡½æ•°ä¸Šä¸‹æ–‡ç»‘å®š
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4149996261738233/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    wuhen_n
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-12T22:57:30.000Z" title="Thu Feb 12 2026 22:57:30 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    11
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>å½“é¢è¯•å®˜è®©æˆ‘ä»¬æ‰‹å†™ callã€applyã€bind æ—¶ï¼Œä»–ä»¬çœŸæ­£è€ƒå¯Ÿçš„æ˜¯ä»€ä¹ˆï¼Ÿè¿™ä¸‰ä¸ªæ–¹æ³•çœ‹ä¼¼ç®€å•ï¼Œå´éšè—ç€ JavaScript å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ã€åŸå‹é“¾ã€å‚æ•°å¤„ç†ç­‰æ ¸å¿ƒæ¦‚å¿µã€‚æœ¬æ–‡å°†ä»é›¶å®ç°ï¼Œå¹¶æ·±å…¥ç†è§£å®ƒä»¬çš„å·®å¼‚å’Œåº”ç”¨åœºæ™¯ã€‚</p>
</blockquote>
<h2 data-id="heading-0">å‰è¨€ï¼šä¸ºä»€ä¹ˆéœ€è¦ callã€applyã€bindï¼Ÿ</h2>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> obj = {
  <span class="hljs-attr">name</span>: <span class="hljs-string">'å¼ ä¸‰'</span>,
  <span class="hljs-title function_">sayHello</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`ä½ å¥½ï¼Œæˆ‘æ˜¯<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span>`</span>);
  }
};

<span class="hljs-keyword">const</span> sayHelloFunc = obj.<span class="hljs-property">sayHello</span>;
obj.<span class="hljs-title function_">sayHello</span>();     <span class="hljs-comment">// "ä½ å¥½ï¼Œæˆ‘æ˜¯å¼ ä¸‰" - æ­£ç¡®</span>
<span class="hljs-title function_">sayHelloFunc</span>();     <span class="hljs-comment">// "ä½ å¥½ï¼Œæˆ‘æ˜¯undefined" - thisä¸¢å¤±äº†ï¼</span>
</code></pre>
<p>ä¸Šè¿°ä»£ç ï¼Œå‡ºç°é—®é¢˜æ ¹æºæ˜¯ï¼šå‡½æ•°çš„ this åœ¨è°ƒç”¨æ—¶æ‰ç¡®å®šï¼Œå–å†³äºè°ƒç”¨æ–¹å¼ã€‚é‚£å¦‚ä½•è§£å†³å‘¢ï¼Ÿä½¿ç”¨callã€applyã€bind æ˜¾å¼ç»‘å®š this ã€‚</p>
<h2 data-id="heading-1">call æ–¹æ³•çš„å®ç°</h2>
<h3 data-id="heading-2">call çš„åŸºæœ¬ä½¿ç”¨</h3>
<p>call æ–¹æ³•ç”¨äºè°ƒç”¨ä¸€ä¸ªå‡½æ•°ï¼Œå¹¶æ˜¾å¼æŒ‡å®šå‡½æ•°çš„ this å€¼å’Œå‚æ•°åˆ—è¡¨ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">greet</span>(<span class="hljs-params">message</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${message}</span>, <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span>!`</span>);
}

<span class="hljs-keyword">const</span> person = { <span class="hljs-attr">name</span>: <span class="hljs-string">'zhangsan'</span> };

<span class="hljs-comment">// åŸç”Ÿ call çš„ä½¿ç”¨</span>
greet.<span class="hljs-title function_">call</span>(person, <span class="hljs-string">'ä½ å¥½'</span>); <span class="hljs-comment">// "ä½ å¥½, zhangsan!"</span>
</code></pre>
<h3 data-id="heading-3">call çš„å·¥ä½œåŸç†</h3>
<ol>
<li>å°†å‡½æ•°è®¾ä¸ºå¯¹è±¡çš„å±æ€§</li>
<li>ä½¿ç”¨è¯¥å¯¹è±¡è°ƒç”¨å‡½æ•°</li>
<li>åˆ é™¤è¯¥å±æ€§</li>
</ol>
<h3 data-id="heading-4">åŸºç¡€ç‰ˆæœ¬å®ç°</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title class_">Function</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">myCall</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">context, ...args</span>) {
  <span class="hljs-comment">// å¦‚æœcontextæ˜¯nullæˆ–undefinedï¼Œåˆ™ç»‘å®šåˆ°å…¨å±€å¯¹è±¡</span>
  <span class="hljs-keyword">if</span> (context == <span class="hljs-literal">null</span>) {
    context = globalThis;
  }
  <span class="hljs-comment">// ç»™contextå¯¹è±¡æ·»åŠ ä¸€ä¸ªä¸´æ—¶å±æ€§ï¼Œå€¼ä¸ºå½“å‰å‡½æ•°</span>
  <span class="hljs-keyword">const</span> fnKey = <span class="hljs-title class_">Symbol</span>(<span class="hljs-string">'fn'</span>); <span class="hljs-comment">// ä½¿ç”¨Symbolé¿å…å±æ€§åå†²çª</span>
  context[fnKey] = <span class="hljs-variable language_">this</span>; <span class="hljs-comment">// thisæŒ‡å‘è°ƒç”¨myCallçš„å‡½æ•°</span>
  <span class="hljs-comment">// ä½¿ç”¨contextå¯¹è±¡è°ƒç”¨å‡½æ•°</span>
  <span class="hljs-keyword">const</span> result = context[fnKey](...args);
  <span class="hljs-comment">// åˆ é™¤ä¸´æ—¶å±æ€§</span>
  <span class="hljs-keyword">delete</span> context[fnKey];
  <span class="hljs-keyword">return</span> result;
};
</code></pre>
<h3 data-id="heading-5">å¤„ç†è¾¹ç•Œæƒ…å†µ</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title class_">Function</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">myCallEnhanced</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">context, ...args</span>) {
  <span class="hljs-comment">// å¤„ç†undefinedå’Œnull</span>
  <span class="hljs-keyword">if</span> (context == <span class="hljs-literal">null</span>) {
    context = globalThis;
  }

  <span class="hljs-comment">// åŸå§‹å€¼éœ€è¦è½¬æ¢ä¸ºå¯¹è±¡ï¼Œå¦åˆ™ä¸èƒ½æ·»åŠ å±æ€§</span>
  <span class="hljs-keyword">const</span> contextType = <span class="hljs-keyword">typeof</span> context;
  <span class="hljs-keyword">if</span> (contextType === <span class="hljs-string">'string'</span> ||
    contextType === <span class="hljs-string">'number'</span> ||
    contextType === <span class="hljs-string">'boolean'</span> ||
    contextType === <span class="hljs-string">'symbol'</span> ||
    contextType === <span class="hljs-string">'bigint'</span>) {
    context = <span class="hljs-title class_">Object</span>(context); <span class="hljs-comment">// è½¬æ¢ä¸ºåŒ…è£…å¯¹è±¡</span>
  }

  <span class="hljs-comment">// ä½¿ç”¨æ›´å®‰å…¨çš„Symbolä½œä¸ºkey</span>
  <span class="hljs-keyword">const</span> fnKey = <span class="hljs-title class_">Symbol</span>(<span class="hljs-string">'fn'</span>);
  context[fnKey] = <span class="hljs-variable language_">this</span>;

  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> result = context[fnKey](...args);
    <span class="hljs-keyword">return</span> result;
  } <span class="hljs-keyword">finally</span> {
    <span class="hljs-comment">// ç¡®ä¿æ€»æ˜¯åˆ é™¤ä¸´æ—¶å±æ€§</span>
    <span class="hljs-keyword">delete</span> context[fnKey];
  }
};

</code></pre>
<h3 data-id="heading-6">å®Œæ•´å®ç°ä¸æ€§èƒ½ä¼˜åŒ–</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title class_">Function</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">myCallFinal</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">context = globalThis, ...args</span>) {
  <span class="hljs-comment">// 1. ç±»å‹æ£€æŸ¥ï¼šç¡®ä¿è°ƒç”¨è€…æ˜¯å‡½æ•°</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-variable language_">this</span> !== <span class="hljs-string">'function'</span>) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TypeError</span>(<span class="hljs-string">'Function.prototype.myCallFinal called on non-function'</span>);
  }

  <span class="hljs-comment">// 2. å¤„ç†Symbolå’ŒBigIntï¼ˆES6+ï¼‰</span>
  <span class="hljs-keyword">const</span> contextType = <span class="hljs-keyword">typeof</span> context;
  <span class="hljs-keyword">let</span> finalContext = context;

  <span class="hljs-comment">// 3. å¤„ç†åŸå§‹å€¼ï¼ˆéä¸¥æ ¼æ¨¡å¼ä¸‹çš„è‡ªåŠ¨è£…ç®±ï¼‰</span>
  <span class="hljs-keyword">if</span> (contextType === <span class="hljs-string">'string'</span>) {
    finalContext = <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(context);
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (contextType === <span class="hljs-string">'number'</span>) {
    finalContext = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Number</span>(context);
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (contextType === <span class="hljs-string">'boolean'</span>) {
    finalContext = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Boolean</span>(context);
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (contextType === <span class="hljs-string">'symbol'</span>) {
    <span class="hljs-comment">// Symbolä¸èƒ½é€šè¿‡newåˆ›å»ºï¼Œä½¿ç”¨Object</span>
    finalContext = <span class="hljs-title class_">Object</span>(context);
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (contextType === <span class="hljs-string">'bigint'</span>) {
    <span class="hljs-comment">// BigIntä¸èƒ½é€šè¿‡newåˆ›å»ºï¼Œä½¿ç”¨Object</span>
    finalContext = <span class="hljs-title class_">Object</span>(context);
  }
  <span class="hljs-comment">// nullå’Œundefinedå·²ç»é€šè¿‡é»˜è®¤å‚æ•°å¤„ç†</span>

  <span class="hljs-comment">// 4. ä½¿ç”¨Symbolåˆ›å»ºå”¯ä¸€keyï¼Œé¿å…å±æ€§å†²çª</span>
  <span class="hljs-keyword">const</span> fnSymbol = <span class="hljs-title class_">Symbol</span>(<span class="hljs-string">'callFn'</span>);

  <span class="hljs-comment">// 5. å°†å‡½æ•°ç»‘å®šåˆ°ä¸Šä¸‹æ–‡å¯¹è±¡</span>
  <span class="hljs-comment">// ä½¿ç”¨Object.definePropertyç¡®ä¿å±æ€§å¯é…ç½®</span>
  <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>(finalContext, fnSymbol, {
    <span class="hljs-attr">value</span>: <span class="hljs-variable language_">this</span>,
    <span class="hljs-attr">configurable</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">writable</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">enumerable</span>: <span class="hljs-literal">false</span>
  });

  <span class="hljs-comment">// 6. æ‰§è¡Œå‡½æ•°å¹¶è·å–ç»“æœ</span>
  <span class="hljs-keyword">let</span> result;
  <span class="hljs-keyword">try</span> {
    result = finalContext[fnSymbol](...args);
  } <span class="hljs-keyword">finally</span> {
    <span class="hljs-comment">// 7. æ¸…ç†ä¸´æ—¶å±æ€§</span>
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">delete</span> finalContext[fnSymbol];
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-comment">// å¦‚æœä¸Šä¸‹æ–‡ä¸å¯é…ç½®ï¼Œå¿½ç•¥é”™è¯¯</span>
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">'æ— æ³•åˆ é™¤ä¸´æ—¶å±æ€§:'</span>, error.<span class="hljs-property">message</span>);
    }
  }

  <span class="hljs-keyword">return</span> result;
};
</code></pre>
<h2 data-id="heading-7">apply æ–¹æ³•çš„å®ç°</h2>
<h3 data-id="heading-8">apply çš„åŸºæœ¬ä½¿ç”¨</h3>
<p>apply å’Œ call çš„åŠŸèƒ½åŸºæœ¬ç›¸åŒï¼Œå”¯ä¸€çš„åŒºåˆ«åœ¨äºå‚æ•°çš„ä¼ é€’æ–¹å¼ï¼š</p>
<ul>
<li>call æ¥å—å‚æ•°åˆ—è¡¨</li>
<li>apply æ¥å—å‚æ•°æ•°ç»„</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">sum</span>(<span class="hljs-params">a, b, c</span>) {
  <span class="hljs-keyword">return</span> a + b + c;
}
<span class="hljs-comment">// applyï¼šå‚æ•°ä»¥æ•°ç»„å½¢å¼ä¼ é€’</span>
sum.<span class="hljs-title function_">apply</span>(<span class="hljs-literal">null</span>, [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]);
</code></pre>
<h3 data-id="heading-9">åŸºç¡€ç‰ˆæœ¬å®ç°</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title class_">Function</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">myCall</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">context, args</span>) {
  <span class="hljs-comment">// å¦‚æœcontextæ˜¯nullæˆ–undefinedï¼Œåˆ™ç»‘å®šåˆ°å…¨å±€å¯¹è±¡</span>
  <span class="hljs-keyword">if</span> (context == <span class="hljs-literal">null</span>) {
    context = globalThis;
  }
  <span class="hljs-comment">// ç»™contextå¯¹è±¡æ·»åŠ ä¸€ä¸ªä¸´æ—¶å±æ€§ï¼Œå€¼ä¸ºå½“å‰å‡½æ•°</span>
  <span class="hljs-keyword">const</span> fnKey = <span class="hljs-title class_">Symbol</span>(<span class="hljs-string">'fn'</span>); <span class="hljs-comment">// ä½¿ç”¨Symbolé¿å…å±æ€§åå†²çª</span>
  context[fnKey] = <span class="hljs-variable language_">this</span>; <span class="hljs-comment">// thisæŒ‡å‘è°ƒç”¨myCallçš„å‡½æ•°</span>
  <span class="hljs-comment">// ä½¿ç”¨contextå¯¹è±¡è°ƒç”¨å‡½æ•°</span>
  <span class="hljs-keyword">const</span> result = context[fnKey](...args);
  <span class="hljs-comment">// åˆ é™¤ä¸´æ—¶å±æ€§</span>
  <span class="hljs-keyword">delete</span> context[fnKey];
  <span class="hljs-keyword">return</span> result;
};
</code></pre>
<h3 data-id="heading-10">å®Œæ•´å®ç°ä¸æ€§èƒ½ä¼˜åŒ–</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title class_">Function</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">myApply</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">context = globalThis, argsArray</span>) {
  <span class="hljs-comment">// 1. ç±»å‹æ£€æŸ¥</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-variable language_">this</span> !== <span class="hljs-string">'function'</span>) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TypeError</span>(<span class="hljs-string">'Function.prototype.myApply called on non-function'</span>);
  }

  <span class="hljs-comment">// 2. å‚æ•°å¤„ç†ï¼šç¡®ä¿argsArrayæ˜¯æ•°ç»„æˆ–ç±»æ•°ç»„å¯¹è±¡</span>
  <span class="hljs-keyword">let</span> args = [];
  <span class="hljs-keyword">if</span> (argsArray != <span class="hljs-literal">null</span>) {
    <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦ä¸ºæ•°ç»„æˆ–ç±»æ•°ç»„</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> argsArray !== <span class="hljs-string">'object'</span> ||
      (<span class="hljs-keyword">typeof</span> argsArray.<span class="hljs-property">length</span> !== <span class="hljs-string">'number'</span> &amp;&amp; argsArray.<span class="hljs-property">length</span> !== <span class="hljs-literal">undefined</span>)) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TypeError</span>(<span class="hljs-string">'ç¬¬äºŒä¸ªå‚æ•°å¿…é¡»æ˜¯æ•°ç»„æˆ–ç±»æ•°ç»„å¯¹è±¡'</span>);
    }

    <span class="hljs-comment">// å°†ç±»æ•°ç»„è½¬æ¢ä¸ºçœŸå®æ•°ç»„</span>
    <span class="hljs-keyword">if</span> (!<span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(argsArray)) {
      args = <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>(argsArray);
    } <span class="hljs-keyword">else</span> {
      args = argsArray;
    }
  }

  <span class="hljs-comment">// 3. ä½¿ç”¨Symbolä½œä¸ºå”¯ä¸€key</span>
  <span class="hljs-keyword">const</span> fnSymbol = <span class="hljs-title class_">Symbol</span>(<span class="hljs-string">'applyFn'</span>);

  <span class="hljs-comment">// 4. å¤„ç†åŸå§‹å€¼ï¼ˆä¸callç›¸åŒï¼‰</span>
  <span class="hljs-keyword">const</span> contextType = <span class="hljs-keyword">typeof</span> context;
  <span class="hljs-keyword">let</span> finalContext = context;

  <span class="hljs-keyword">if</span> (contextType === <span class="hljs-string">'string'</span>) {
    finalContext = <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(context);
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (contextType === <span class="hljs-string">'number'</span>) {
    finalContext = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Number</span>(context);
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (contextType === <span class="hljs-string">'boolean'</span>) {
    finalContext = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Boolean</span>(context);
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (contextType === <span class="hljs-string">'symbol'</span>) {
    finalContext = <span class="hljs-title class_">Object</span>(context);
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (contextType === <span class="hljs-string">'bigint'</span>) {
    finalContext = <span class="hljs-title class_">Object</span>(context);
  }

  <span class="hljs-comment">// 5. ç»‘å®šå‡½æ•°åˆ°ä¸Šä¸‹æ–‡</span>
  <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>(finalContext, fnSymbol, {
    <span class="hljs-attr">value</span>: <span class="hljs-variable language_">this</span>,
    <span class="hljs-attr">configurable</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">writable</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">enumerable</span>: <span class="hljs-literal">false</span>
  });

  <span class="hljs-comment">// 6. æ‰§è¡Œå‡½æ•°</span>
  <span class="hljs-keyword">let</span> result;
  <span class="hljs-keyword">try</span> {
    result = finalContext[fnSymbol](...args);
  } <span class="hljs-keyword">finally</span> {
    <span class="hljs-comment">// 7. æ¸…ç†</span>
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">delete</span> finalContext[fnSymbol];
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-comment">// å¿½ç•¥åˆ é™¤é”™è¯¯</span>
    }
  }

  <span class="hljs-keyword">return</span> result;
};
</code></pre>
<h2 data-id="heading-11">bind æ–¹æ³•çš„å®ç°</h2>
<h3 data-id="heading-12">bind çš„åŸºæœ¬ä½¿ç”¨</h3>
<p>bind æ–¹æ³•åˆ›å»ºä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œå½“è¿™ä¸ªæ–°å‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œå®ƒçš„ this å€¼ä¼šè¢«ç»‘å®šåˆ°æŒ‡å®šçš„å¯¹è±¡ï¼Œå¹¶ä¸”å¯ä»¥é¢„å…ˆä¼ å…¥éƒ¨åˆ†å‚æ•°ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">greet</span>(<span class="hljs-params">greeting, name</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${greeting}</span>, <span class="hljs-subst">${name}</span>! æˆ‘æ˜¯<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.role}</span>`</span>);
}

<span class="hljs-keyword">const</span> context = { <span class="hljs-attr">role</span>: <span class="hljs-string">'ç®¡ç†å‘˜'</span> };

<span class="hljs-comment">// bindï¼šåˆ›å»ºæ–°å‡½æ•°ï¼Œç¨åæ‰§è¡Œ</span>
<span class="hljs-keyword">const</span> boundGreet = greet.<span class="hljs-title function_">bind</span>(context, <span class="hljs-string">'ä½ å¥½'</span>);
<span class="hljs-title function_">boundGreet</span>(<span class="hljs-string">'æå››'</span>); 
</code></pre>
<h3 data-id="heading-13">bind çš„æ ¸å¿ƒç‰¹æ€§ï¼š</h3>
<ol>
<li>è¿”å›ä¸€ä¸ªæ–°å‡½æ•°</li>
<li>å¯ä»¥é¢„è®¾å‚æ•°ï¼ˆæŸ¯é‡ŒåŒ–ï¼‰</li>
<li>ç»‘å®šthiså€¼</li>
<li>æ”¯æŒnewæ“ä½œç¬¦ï¼ˆç‰¹æ®Šæƒ…å†µï¼‰</li>
</ol>
<h3 data-id="heading-14">åŸºç¡€ç‰ˆæœ¬å®ç°</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title class_">Function</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">myBind</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">context, ...bindArgs</span>) {
  <span class="hljs-keyword">const</span> fn = <span class="hljs-variable language_">this</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span>(<span class="hljs-params">...newArgs</span>) {
        <span class="hljs-keyword">return</span> fn.<span class="hljs-title function_">apply</span>(context, [...args, ...newArgs]);
    };
};
</code></pre>
<h3 data-id="heading-15">å¤„ç† new æ“ä½œç¬¦çš„ç‰¹æ®Šæƒ…å†µ</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title class_">Function</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">myBindEnhanced</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">context = globalThis, ...bindArgs</span>) {
  <span class="hljs-keyword">const</span> originalFunc = <span class="hljs-variable language_">this</span>;

  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> originalFunc !== <span class="hljs-string">'function'</span>) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TypeError</span>(<span class="hljs-string">'Function.prototype.myBindEnhanced called on non-function'</span>);
  }

  <span class="hljs-comment">// å†…éƒ¨å‡½æ•°ï¼Œç”¨äºåˆ¤æ–­æ˜¯å¦è¢«newè°ƒç”¨</span>
  <span class="hljs-keyword">const</span> boundFunc = <span class="hljs-keyword">function</span> (<span class="hljs-params">...callArgs</span>) {
    <span class="hljs-comment">// å…³é”®åˆ¤æ–­ï¼šthis instanceof boundFunc</span>
    <span class="hljs-comment">// å¦‚æœä½¿ç”¨newè°ƒç”¨ï¼Œthisä¼šæ˜¯boundFuncçš„å®ä¾‹</span>
    <span class="hljs-keyword">const</span> isConstructorCall = <span class="hljs-variable language_">this</span> <span class="hljs-keyword">instanceof</span> boundFunc;

    <span class="hljs-comment">// ç¡®å®šæœ€ç»ˆçš„ä¸Šä¸‹æ–‡</span>
    <span class="hljs-comment">// å¦‚æœæ˜¯æ„é€ å‡½æ•°è°ƒç”¨ï¼Œä½¿ç”¨æ–°åˆ›å»ºçš„å¯¹è±¡ä½œä¸ºthis</span>
    <span class="hljs-comment">// å¦åˆ™ä½¿ç”¨ç»‘å®šçš„context</span>
    <span class="hljs-keyword">const</span> finalContext = isConstructorCall ? <span class="hljs-variable language_">this</span> : <span class="hljs-title class_">Object</span>(context);

    <span class="hljs-comment">// åˆå¹¶å‚æ•°</span>
    <span class="hljs-keyword">const</span> finalArgs = bindArgs.<span class="hljs-title function_">concat</span>(callArgs);

    <span class="hljs-comment">// æ‰§è¡ŒåŸå‡½æ•°</span>
    <span class="hljs-comment">// å¦‚æœåŸå‡½æ•°æœ‰è¿”å›å€¼ï¼Œéœ€è¦ç‰¹æ®Šå¤„ç†</span>
    <span class="hljs-keyword">const</span> result = originalFunc.<span class="hljs-title function_">apply</span>(finalContext, finalArgs);

    <span class="hljs-comment">// æ„é€ å‡½æ•°è°ƒç”¨çš„ç‰¹æ®Šå¤„ç†</span>
    <span class="hljs-comment">// å¦‚æœåŸå‡½æ•°è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œåˆ™ä½¿ç”¨è¯¥å¯¹è±¡</span>
    <span class="hljs-comment">// å¦åˆ™è¿”å›æ–°åˆ›å»ºçš„å¯¹è±¡ï¼ˆthisï¼‰</span>
    <span class="hljs-keyword">if</span> (isConstructorCall) {
      <span class="hljs-keyword">if</span> (result &amp;&amp; (<span class="hljs-keyword">typeof</span> result === <span class="hljs-string">'object'</span> || <span class="hljs-keyword">typeof</span> result === <span class="hljs-string">'function'</span>)) {
        <span class="hljs-keyword">return</span> result;
      }
      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
    }

    <span class="hljs-keyword">return</span> result;
  };

  <span class="hljs-comment">// ç»´æŠ¤åŸå‹é“¾</span>
  <span class="hljs-comment">// æ–¹æ³•1ï¼šç›´æ¥è®¾ç½®prototypeï¼ˆæœ‰ç¼ºé™·ï¼‰</span>
  <span class="hljs-comment">// boundFunc.prototype = originalFunc.prototype;</span>

  <span class="hljs-comment">// æ–¹æ³•2ï¼šä½¿ç”¨ç©ºå‡½æ•°ä¸­è½¬ï¼ˆæ¨èï¼‰</span>
  <span class="hljs-keyword">const</span> F = <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) { };
  F.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> = originalFunc.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>;
  boundFunc.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> = <span class="hljs-keyword">new</span> <span class="hljs-title function_">F</span>();
  boundFunc.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">constructor</span> = boundFunc;

  <span class="hljs-comment">// æ·»åŠ ä¸€äº›å…ƒä¿¡æ¯ï¼ˆå¯é€‰ï¼‰</span>
  boundFunc.<span class="hljs-property">originalFunc</span> = originalFunc;
  boundFunc.<span class="hljs-property">bindContext</span> = context;
  boundFunc.<span class="hljs-property">bindArgs</span> = bindArgs;

  <span class="hljs-keyword">return</span> boundFunc;
};
</code></pre>
<h3 data-id="heading-16">å®Œæ•´å®ç°ä¸æ€§èƒ½ä¼˜åŒ–</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title class_">Function</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">myBindFinal</span> = (<span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
  <span class="hljs-comment">// ä½¿ç”¨é—­åŒ…ä¿å­˜Sliceæ–¹æ³•ï¼Œæé«˜æ€§èƒ½</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title class_">ArraySlice</span> = <span class="hljs-title class_">Array</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">slice</span>;

  <span class="hljs-comment">// ç©ºå‡½æ•°ï¼Œç”¨äºåŸå‹é“¾ç»´æŠ¤</span>
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">EmptyFunction</span>(<span class="hljs-params"/>) { }

  <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">myBindFinal</span>(<span class="hljs-params">context = globalThis, ...bindArgs</span>) {
    <span class="hljs-keyword">const</span> originalFunc = <span class="hljs-variable language_">this</span>;

    <span class="hljs-comment">// ä¸¥æ ¼çš„ç±»å‹æ£€æŸ¥</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> originalFunc !== <span class="hljs-string">'function'</span>) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TypeError</span>(<span class="hljs-string">'Function.prototype.bind called on non-function'</span>);
    }

    <span class="hljs-comment">// å¤„ç†åŸå§‹å€¼çš„ä¸Šä¸‹æ–‡ï¼ˆéä¸¥æ ¼æ¨¡å¼ï¼‰</span>
    <span class="hljs-keyword">let</span> boundContext = context;
    <span class="hljs-keyword">const</span> contextType = <span class="hljs-keyword">typeof</span> boundContext;

    <span class="hljs-comment">// åŸå§‹å€¼åŒ…è£…ï¼ˆä¸call/applyä¿æŒä¸€è‡´ï¼‰</span>
    <span class="hljs-keyword">if</span> (contextType === <span class="hljs-string">'string'</span>) {
      boundContext = <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(boundContext);
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (contextType === <span class="hljs-string">'number'</span>) {
      boundContext = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Number</span>(boundContext);
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (contextType === <span class="hljs-string">'boolean'</span>) {
      boundContext = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Boolean</span>(boundContext);
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (contextType === <span class="hljs-string">'symbol'</span>) {
      boundContext = <span class="hljs-title class_">Object</span>(boundContext);
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (contextType === <span class="hljs-string">'bigint'</span>) {
      boundContext = <span class="hljs-title class_">Object</span>(boundContext);
    }

    <span class="hljs-comment">// åˆ›å»ºç»‘å®šå‡½æ•°</span>
    <span class="hljs-keyword">const</span> boundFunction = <span class="hljs-keyword">function</span> (<span class="hljs-params">...callArgs</span>) {
      <span class="hljs-comment">// åˆ¤æ–­æ˜¯å¦è¢«newè°ƒç”¨</span>
      <span class="hljs-keyword">const</span> isConstructorCall = <span class="hljs-variable language_">this</span> <span class="hljs-keyword">instanceof</span> boundFunction;

      <span class="hljs-comment">// ç¡®å®šæœ€ç»ˆä¸Šä¸‹æ–‡</span>
      <span class="hljs-keyword">let</span> finalContext;
      <span class="hljs-keyword">if</span> (isConstructorCall) {
        <span class="hljs-comment">// newè°ƒç”¨ï¼šå¿½ç•¥ç»‘å®šçš„contextï¼Œä½¿ç”¨æ–°å®ä¾‹</span>
        finalContext = <span class="hljs-variable language_">this</span>;
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (boundContext == <span class="hljs-literal">null</span>) {
        <span class="hljs-comment">// éä¸¥æ ¼æ¨¡å¼ï¼šä½¿ç”¨å…¨å±€å¯¹è±¡</span>
        finalContext = globalThis;
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-comment">// æ™®é€šè°ƒç”¨ï¼šä½¿ç”¨ç»‘å®šçš„context</span>
        finalContext = boundContext;
      }

      <span class="hljs-comment">// åˆå¹¶å‚æ•°</span>
      <span class="hljs-keyword">const</span> allArgs = bindArgs.<span class="hljs-title function_">concat</span>(callArgs);

      <span class="hljs-comment">// è°ƒç”¨åŸå‡½æ•°</span>
      <span class="hljs-keyword">const</span> result = originalFunc.<span class="hljs-title function_">apply</span>(finalContext, allArgs);

      <span class="hljs-comment">// å¤„ç†æ„é€ å‡½æ•°è°ƒç”¨çš„è¿”å›å€¼</span>
      <span class="hljs-keyword">if</span> (isConstructorCall) {
        <span class="hljs-comment">// å¦‚æœåŸå‡½æ•°è¿”å›å¯¹è±¡ï¼Œåˆ™ä½¿ç”¨è¯¥å¯¹è±¡</span>
        <span class="hljs-keyword">if</span> (result &amp;&amp; (<span class="hljs-keyword">typeof</span> result === <span class="hljs-string">'object'</span> || <span class="hljs-keyword">typeof</span> result === <span class="hljs-string">'function'</span>)) {
          <span class="hljs-keyword">return</span> result;
        }
        <span class="hljs-comment">// å¦åˆ™è¿”å›æ–°åˆ›å»ºçš„å®ä¾‹</span>
        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
      }

      <span class="hljs-keyword">return</span> result;
    };

    <span class="hljs-comment">// ç»´æŠ¤åŸå‹é“¾ - é«˜æ€§èƒ½ç‰ˆæœ¬</span>
    <span class="hljs-comment">// é¿å…ç›´æ¥ä¿®æ”¹boundFunction.prototypeï¼Œä½¿ç”¨ä¸­é—´å‡½æ•°</span>
    <span class="hljs-keyword">if</span> (originalFunc.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>) {
      <span class="hljs-title class_">EmptyFunction</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> = originalFunc.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>;
      boundFunction.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">EmptyFunction</span>();
      <span class="hljs-comment">// æ¢å¤constructorå±æ€§</span>
      boundFunction.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">constructor</span> = boundFunction;
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-comment">// å¤„ç†æ²¡æœ‰prototypeçš„æƒ…å†µï¼ˆå¦‚ç®­å¤´å‡½æ•°ï¼‰</span>
      boundFunction.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> = <span class="hljs-literal">undefined</span>;
    }

    <span class="hljs-comment">// æ·»åŠ ä¸å¯æšä¸¾çš„åŸå§‹å‡½æ•°å¼•ç”¨ï¼ˆç”¨äºè°ƒè¯•ï¼‰</span>
    <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>(boundFunction, <span class="hljs-string">'__originalFunction__'</span>, {
      <span class="hljs-attr">value</span>: originalFunc,
      <span class="hljs-attr">enumerable</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">configurable</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">writable</span>: <span class="hljs-literal">true</span>
    });

    <span class="hljs-comment">// æ·»åŠ ä¸å¯æšä¸¾çš„ç»‘å®šä¿¡æ¯</span>
    <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>(boundFunction, <span class="hljs-string">'__bindContext__'</span>, {
      <span class="hljs-attr">value</span>: boundContext,
      <span class="hljs-attr">enumerable</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">configurable</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">writable</span>: <span class="hljs-literal">true</span>
    });

    <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>(boundFunction, <span class="hljs-string">'__bindArgs__'</span>, {
      <span class="hljs-attr">value</span>: bindArgs,
      <span class="hljs-attr">enumerable</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">configurable</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">writable</span>: <span class="hljs-literal">true</span>
    });

    <span class="hljs-comment">// è®¾ç½®é€‚å½“çš„å‡½æ•°å±æ€§</span>
    <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>(boundFunction, <span class="hljs-string">'length'</span>, {
      <span class="hljs-attr">value</span>: <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(<span class="hljs-number">0</span>, originalFunc.<span class="hljs-property">length</span> - bindArgs.<span class="hljs-property">length</span>),
      <span class="hljs-attr">enumerable</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">configurable</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">writable</span>: <span class="hljs-literal">false</span>
    });

    <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>(boundFunction, <span class="hljs-string">'name'</span>, {
      <span class="hljs-attr">value</span>: <span class="hljs-string">`bound <span class="hljs-subst">${originalFunc.name || <span class="hljs-string">''</span>}</span>`</span>.<span class="hljs-title function_">trim</span>(),
      <span class="hljs-attr">enumerable</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">configurable</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">writable</span>: <span class="hljs-literal">false</span>
    });

    <span class="hljs-keyword">return</span> boundFunction;
  };
})();
</code></pre>
<h2 data-id="heading-17">é¢è¯•å¸¸è§é—®é¢˜ä¸è§£ç­”</h2>
<h3 data-id="heading-18">é—®é¢˜1ï¼šæ‰‹å†™callçš„æ ¸å¿ƒæ­¥éª¤æ˜¯ä»€ä¹ˆï¼Ÿ</h3>
<ol>
<li>æ­¥éª¤1:  å°†å‡½æ•°è®¾ä¸ºä¸Šä¸‹æ–‡å¯¹è±¡çš„å±æ€§</li>
<li>æ­¥éª¤2:  æ‰§è¡Œè¯¥å‡½æ•°</li>
<li>æ­¥éª¤3:  åˆ é™¤è¯¥å±æ€§</li>
<li>æ­¥éª¤4:  è¿”å›å‡½æ•°æ‰§è¡Œç»“æœ</li>
<li>å…³é”®ç‚¹ï¼š
<ul>
<li>ä½¿ç”¨Symbolé¿å…å±æ€§åå†²çª</li>
<li>å¤„ç†null/undefinedä¸Šä¸‹æ–‡</li>
<li>å¤„ç†åŸå§‹å€¼ä¸Šä¸‹æ–‡</li>
<li>ä½¿ç”¨å±•å¼€è¿ç®—ç¬¦å¤„ç†å‚æ•°</li>
</ul>
</li>
</ol>
<h3 data-id="heading-19">é—®é¢˜2ï¼šbindå¦‚ä½•å¤„ç†newæ“ä½œç¬¦ï¼Ÿ</h3>
<ol>
<li>é€šè¿‡ this instanceof boundFunction åˆ¤æ–­æ˜¯å¦è¢«newè°ƒç”¨</li>
<li>å¦‚æœæ˜¯newè°ƒç”¨ï¼Œå¿½ç•¥ç»‘å®šçš„ä¸Šä¸‹æ–‡ï¼Œä½¿ç”¨æ–°åˆ›å»ºçš„å¯¹è±¡ä½œä¸ºthis</li>
<li>éœ€è¦æ­£ç¡®è®¾ç½®boundFunctionçš„åŸå‹é“¾ï¼Œä»¥æ”¯æŒinstanceof</li>
<li>å¦‚æœåŸæ„é€ å‡½æ•°è¿”å›å¯¹è±¡ï¼Œåˆ™ä½¿ç”¨è¯¥å¯¹è±¡ï¼Œå¦åˆ™è¿”å›æ–°å®ä¾‹</li>
</ol>
<h3 data-id="heading-20">é—®é¢˜3ï¼šcallã€applyã€bindçš„æ€§èƒ½å·®å¼‚ï¼Ÿ</h3>
<ol>
<li>callé€šå¸¸æ¯”applyå¿«ï¼Œå› ä¸ºapplyéœ€è¦å¤„ç†æ•°ç»„å‚æ•°</li>
<li>bindåˆ›å»ºæ–°å‡½æ•°æœ‰å¼€é”€ï¼Œä½†å¤šæ¬¡è°ƒç”¨æ—¶æ¯”é‡å¤call/applyé«˜æ•ˆ</li>
</ol>
<h2 data-id="heading-21">ç»“è¯­</h2>
<p>é€šè¿‡æ·±å…¥ç†è§£callã€applyã€bindçš„å®ç°åŸç†ï¼Œæˆ‘ä»¬ä¸ä»…èƒ½æ›´å¥½åœ°å›ç­”é¢è¯•é—®é¢˜ï¼Œè¿˜èƒ½åœ¨å®é™…å¼€å‘ä¸­ç¼–å†™å‡ºæ›´ä¼˜é›…ã€æ›´é«˜æ•ˆçš„JavaScriptä»£ç ã€‚å¯¹äºæ–‡ç« ä¸­é”™è¯¯çš„åœ°æ–¹æˆ–è€…æœ‰ä»»ä½•é—®é¢˜ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºç•™è¨€è®¨è®ºï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item>  </channel></rss>