<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>æ˜é‡‘æ–‡ç« æ¨è</title>      <link>https://juejin.cn/recommended?sort=newest</link>      <description>ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</description>      <generator>python juejin_recom.py @Pi20</generator>      <item>    <title><![CDATA[æ—®æ—¯cè¯­è¨€ä¸‰ä¸ªä»»åŠ¡]]></title>    <link>https://juejin.cn/post/7589130173837951026</link>    <guid>https://juejin.cn/post/7589130173837951026</guid>    <pubDate>2025-12-29T16:05:37.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589130173837951026" data-draft-id="7587412021709127686" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ—®æ—¯cè¯­è¨€ä¸‰ä¸ªä»»åŠ¡"/> <meta itemprop="keywords" content="C,C++"/> <meta itemprop="datePublished" content="2025-12-29T16:05:37.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å®‡å®™è¶…çº§æ— æ•Œæš´é¾™æˆ˜å£«"/> <meta itemprop="url" content="https://juejin.cn/user/2781133666269578"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ—®æ—¯cè¯­è¨€ä¸‰ä¸ªä»»åŠ¡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2781133666269578/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å®‡å®™è¶…çº§æ— æ•Œæš´é¾™æˆ˜å£«
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T16:05:37.000Z" title="Mon Dec 29 2025 16:05:37 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/02d6f49c4b68490ea4ca3949164e24f1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a6H5a6Z6LaF57qn5peg5pWM5pq06b6Z5oiY5aOr:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767629137&amp;x-signature=Ym9Xx0qSbkabDeGR4P%2FJHqB5pQM%3D" alt="image.png" loading="lazy"/></p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment">#include &lt;stdio.h&gt;</span>

// ä»»åŠ¡1ï¼šè®¡ç®—æ•°ç»„å…ƒç´ å’Œ
int getArrSum(int arr<span class="hljs-section">[]</span>, int len) {
    int <span class="hljs-attr">sum</span> = <span class="hljs-number">0</span><span class="hljs-comment">;</span>
    for (int <span class="hljs-attr">i</span> = <span class="hljs-number">0</span><span class="hljs-comment">; i &lt; len; i++) {</span>
        sum += arr<span class="hljs-section">[i]</span><span class="hljs-comment">;</span>
    }
    return sum<span class="hljs-comment">;</span>
}

// ä»»åŠ¡2ï¼šè·å–æ•°ç»„æœ€å¤§å€¼
int getArrMax(int arr<span class="hljs-section">[]</span>, int len) {
    int <span class="hljs-attr">max</span> = arr[<span class="hljs-number">0</span>]<span class="hljs-comment">;</span>
    for (int <span class="hljs-attr">i</span> = <span class="hljs-number">1</span><span class="hljs-comment">; i &lt; len; i++) {</span>
        if (arr<span class="hljs-section">[i]</span> &gt; max) {
            <span class="hljs-attr">max</span> = arr[i]<span class="hljs-comment">;</span>
        }
    }
    return max<span class="hljs-comment">;</span>
}

// ä»»åŠ¡3ï¼šæŸ¥æ‰¾å…ƒç´ ä¸‹æ ‡
int findArrValue(int arr<span class="hljs-section">[]</span>, int len, int val) {
    for (int <span class="hljs-attr">i</span> = <span class="hljs-number">0</span><span class="hljs-comment">; i &lt; len; i++) {</span>
        if (arr<span class="hljs-section">[i]</span> == val) {
            return i<span class="hljs-comment">;</span>
        }
    }
    return -1<span class="hljs-comment">;</span>
}

// ç¨‹åºå…¥å£mainå‡½æ•°
int main() {
    int arr<span class="hljs-section">[]</span> = {1, 2, 3, 4, 5}<span class="hljs-comment">;</span>
    int <span class="hljs-attr">len</span> = <span class="hljs-number">5</span><span class="hljs-comment">;</span>
    
    // æµ‹è¯•ä»»åŠ¡1
    printf("æ•°ç»„å’Œï¼š%d\n", getArrSum(arr, len))<span class="hljs-comment">;</span>
    // æµ‹è¯•ä»»åŠ¡2
    printf("æ•°ç»„æœ€å¤§å€¼ï¼š%d\n", getArrMax(arr, len))<span class="hljs-comment">;</span>
    // æµ‹è¯•ä»»åŠ¡3
    printf("å…ƒç´ 3çš„ä¸‹æ ‡ï¼š%d\n", findArrValue(arr, len, 3))<span class="hljs-comment">;</span>
    
    return 0<span class="hljs-comment">;</span>
}
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a93fbbb1404b406caaa12a1047dc20a0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a6H5a6Z6LaF57qn5peg5pWM5pq06b6Z5oiY5aOr:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767629137&amp;x-signature=z5KUp2qGpi1Tq7GIHwj66Mf9gPE%3D" alt="image.png" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä½¿ç”¨Amazon Novaæ¨¡å‹å®ç°è‡ªåŠ¨åŒ–è§†é¢‘é«˜å…‰å‰ªè¾‘]]></title>    <link>https://juejin.cn/post/7589104492883394612</link>    <guid>https://juejin.cn/post/7589104492883394612</guid>    <pubDate>2025-12-29T15:13:48.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589104492883394612" data-draft-id="7589107312113254409" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä½¿ç”¨Amazon Novaæ¨¡å‹å®ç°è‡ªåŠ¨åŒ–è§†é¢‘é«˜å…‰å‰ªè¾‘"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-29T15:13:48.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="äºšé©¬é€Šäº‘å¼€å‘è€…"/> <meta itemprop="url" content="https://juejin.cn/user/2850395271209496"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä½¿ç”¨Amazon Novaæ¨¡å‹å®ç°è‡ªåŠ¨åŒ–è§†é¢‘é«˜å…‰å‰ªè¾‘
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2850395271209496/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    äºšé©¬é€Šäº‘å¼€å‘è€…
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T15:13:48.000Z" title="Mon Dec 29 2025 15:13:48 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»36åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ¬æ–¹æ¡ˆæ—¨åœ¨åˆ©ç”¨Amazonè‡ªç ”çš„Novaå¤šæ¨¡æ€ç†è§£ç±»æ¨¡å‹ï¼ˆVisionâ€‘Language Modelï¼Œç®€ç§°VLMï¼‰å’Œå¤šæ¨¡æ€åµŒå…¥æ¨¡å‹ï¼ˆMultimodal Embedding Modelï¼Œç®€ç§°MMEï¼‰ï¼Œå®ç°<strong>è‡ªåŠ¨åŒ–çš„è§†é¢‘é«˜å…‰è¯†åˆ«ä¸å‰ªè¾‘</strong>ã€‚è¾“å…¥è§†é¢‘æ–‡ä»¶ï¼Œé€šè¿‡<strong>å¤šæ¨¡æ€æ¨¡å‹ç†è§£</strong>æˆ–<strong>ç»“åˆè¯­ä¹‰æ‘˜è¦ä¸åµŒå…¥æ£€ç´¢</strong>å®ç°ç´ æå®šä½ï¼Œè¯†åˆ«é«˜å…‰ç‰‡æ®µï¼Œå¹¶åˆæˆå‰ªè¾‘ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fd2908q01vomqb2.cloudfront.net%2F472b07b9fcf2c2451e8781e944bf5f77cd8457c8%2F2025%2F11%2F18%2Fautomated-video-highlight-clipping-using-amazon-nova-model-1.png" target="_blank" title="https://d2908q01vomqb2.cloudfront.net/472b07b9fcf2c2451e8781e944bf5f77cd8457c8/2025/11/18/automated-video-highlight-clipping-using-amazon-nova-model-1.png" ref="nofollow noopener noreferrer"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b192fe40d1bc40878e5d725fe3d46e0d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767626353&amp;x-signature=WSd%2F8zjEfo2ifkAlxQ%2BD9yWtdtA%3D" alt="" loading="lazy"/></a></p>
<blockquote>
<p>ğŸ“¢é™æ—¶æ’æ’­ï¼šæ— éœ€ç®¡ç†åŸºç¡€è®¾æ–½ï¼Œåˆ©ç”¨äºšé©¬é€ŠæŠ€æœ¯ä¸ç”Ÿæ€ï¼Œå¿«é€Ÿé›†æˆä¸éƒ¨ç½²ç”Ÿæˆå¼AIæ¨¡å‹èƒ½åŠ›ã€‚</p>
<p>âœ¨ ç²¾å¿ƒè®¾è®¡ï¼Œæ—¨åœ¨å¼•å¯¼æ‚¨æ·±å…¥æ¢ç´¢Amazon Bedrockçš„æ¨¡å‹é€‰æ‹©ä¸è°ƒç”¨ã€æ¨¡å‹è‡ªåŠ¨åŒ–è¯„ä¼°ä»¥åŠå®‰å…¨å›´æ (Guardrail)ç­‰é‡è¦åŠŸèƒ½ã€‚</p>
<p>â©å¿«å¿«ç‚¹å‡»è¿›å…¥ã€Š<a href="https://link.juejin.cn?target=https%3A%2F%2Fevents.amazoncloud.cn%2Flabs%2Fcloudlab-amazon-bedrock-first-experience%3Fvisitfrom%3D3P_Juejinhead_1223%26sc_medium%3Downed%26sc_campaign%3Dcloudlab%26sc_channel%3D3P_Juejinhead_1223" target="_blank" title="https://events.amazoncloud.cn/labs/cloudlab-amazon-bedrock-first-experience?visitfrom=3P_Juejinhead_1223&amp;sc_medium=owned&amp;sc_campaign=cloudlab&amp;sc_channel=3P_Juejinhead_1223" ref="nofollow noopener noreferrer">å¤šæ¨¡ä¸€ç«™é€š â€”â€” Amazon Bedrock ä¸Šçš„åŸºç¡€æ¨¡å‹åˆä½“éªŒ</a>ã€‹å®éªŒæ„å»ºæ— é™, æ¢ç´¢å¯ç¨‹ï¼</p>
</blockquote>
<p><strong>æ–¹æ¡ˆæ¦‚è§ˆï¼š</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0d0ee68851a94990b06b65ceaed1251c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767626353&amp;x-signature=JlviEzifV%2BMx9YKIO%2BoA6GgUMYQ%3D" alt="image.png" loading="lazy"/></p>
<p><strong>æ–‡ç« æ¦‚è§ˆï¼š</strong></p>
<ul>
<li>æ¨¡å‹ä»‹ç»ï¼šNova å¤šæ¨¡æ€ç†è§£ç±»æ¨¡å‹ï¼ˆVLMï¼‰åŠå¤šæ¨¡æ€åµŒå…¥æ¨¡å‹ï¼ˆMMEï¼‰</li>
<li>è§†é¢‘é«˜å…‰å‰ªè¾‘çš„ä¸»è¦æ–¹æ³•ï¼š</li>
</ul>
<ol>
<li>
<p><strong>çº¯VLM:</strong> ç”¨Nova LLMç›´æ¥è¿›è¡Œè§†é¢‘ç†è§£ï¼Œè¾“å‡ºé«˜å…‰ç‰‡æ®µçš„å¼€å§‹å’Œç»“æŸæ—¶é—´ç‚¹</p>
<ol>
<li>æ–¹æ¡ˆæ¶æ„ä¸æ¡ˆä¾‹ä»£ç </li>
<li>Novaç†è§£ç±»æ¨¡å‹è¾“å‡ºè§†é¢‘ç²¾å‡†æ—¶é—´æˆ³ï¼ˆtimestampï¼‰çš„æç¤ºè¯å·¥ç¨‹æŠ€å·§</li>
<li>æ•ˆæœä¼˜åŒ–ï¼šé€šè¿‡åˆ‡ç‰‡å¢åŠ è¯†åˆ«ç²¾å‡†åº¦</li>
</ol>
</li>
<li>
<p><strong>VLM+MMEï¼ˆvideoï¼‰</strong> ï¼šç»“åˆè¯­ä¹‰æ‘˜è¦ä¸è§†é¢‘åµŒå…¥æ£€ç´¢</p>
<ol>
<li>æ–¹æ¡ˆæ¶æ„ä¸æ¡ˆä¾‹ä»£ç ï¼ˆ<strong>2.1 åŸºç¡€ï¼šé«˜å…‰å‹ç¼©ï¼› 2.2 è·¨è§†é¢‘å†…å®¹é©±åŠ¨çš„é«˜å…‰å‰ªè¾‘ï¼› 2.3 å†å²ç´ æé©±åŠ¨çš„æ¨¡æ¿åŒ–é«˜å…‰ç”Ÿæˆ</strong>ï¼‰</li>
<li>æˆæœ¬ä¸æ•ˆæœä¼˜åŒ–æ€è·¯ï¼šç‰‡æ®µèšç±»ï¼Œåˆç­›ï¼Œå»é‡</li>
<li>é™æœ¬æ–¹æ¡ˆï¼š<strong>2.4 VLM+MMEï¼ˆimageï¼‰</strong> : è§†é¢‘æŠ½å¸§ï¼Œç»“åˆè¯­ä¹‰æ‘˜è¦ä¸æŠ½å¸§åµŒå…¥æ£€ç´¢</li>
</ol>
</li>
</ol>
<ul>
<li>é™„åŠ è€ƒè™‘ï¼šèƒŒæ™¯éŸ³ä¹ï¼Œè½¬åœºåŠ¨ç”»ï¼Œå­—å¹•åŠå…¶ä»–æ•ˆæœè‡ªåŠ¨åŒ–</li>
<li><strong>æ€»ç»“ä¸è®¨è®ºï¼šå®é™…åº”ç”¨åœºæ™¯ï¼Œæ–¹æ¡ˆç‰¹ç‚¹å’Œé€‰å‹æ€è·¯</strong></li>
<li>å¯ç”¨æ€§ä¸å®šä»·</li>
</ul>
<h2 data-id="heading-0">æ¨¡å‹ä»‹ç»</h2>
<p>Amazon Web Servicesï¼ˆAmazonï¼‰æ¨å‡ºçš„ Amazon Nova è‡ªç ”æ¨¡å‹ç³»åˆ—ï¼Œæ˜¯ä¸€ç»„åŸºç¡€æ¨¡å‹ï¼ˆfoundation modelsï¼‰ï¼Œè¦†ç›–æ–‡æœ¬ã€å›¾åƒã€è§†é¢‘ã€è¯­éŸ³å’Œæ™ºèƒ½ä»£ç†ç­‰å¤šæ¨¡æ€è¾“å…¥ä¸è¾“å‡ºï¼Œæ—¨åœ¨ä¸ºä¼ä¸šæ„å»ºç”Ÿæˆå¼ AI åº”ç”¨æä¾›æ€§èƒ½ä¼˜è¶Šã€æˆæœ¬æ›´ä½ã€å¯å®šåˆ¶æ€§æ›´å¼ºçš„é€‰æ‹©ã€‚ç°å·²åœ¨ Amazon Bedrock ä¸Šæä¾›ã€‚æ›´å¤šæ¨¡å‹å…¨ç³»åˆ—ä¿¡æ¯ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Faws.amazon.com%2Fnova%2F" target="_blank" title="https://aws.amazon.com/nova/" ref="nofollow noopener noreferrer">aws.amazon.com/nova/</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fd2908q01vomqb2.cloudfront.net%2F472b07b9fcf2c2451e8781e944bf5f77cd8457c8%2F2025%2F11%2F18%2Fautomated-video-highlight-clipping-using-amazon-nova-model-2.png" target="_blank" title="https://d2908q01vomqb2.cloudfront.net/472b07b9fcf2c2451e8781e944bf5f77cd8457c8/2025/11/18/automated-video-highlight-clipping-using-amazon-nova-model-2.png" ref="nofollow noopener noreferrer"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/175e7a53eae4445dbf53053d5997b01d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767626353&amp;x-signature=i4VN2VIHXYBwIn4pzX2SrXbSAps%3D" alt="" loading="lazy"/></a></p>
<p>æœ¬æ–¹æ¡ˆæ¶‰åŠä¸¤ç±»Novaæ¨¡å‹ï¼šç†è§£ç±»æ¨¡å‹å’Œå¤šæ¨¡æ€åµŒå…¥æ¨¡å‹ã€‚</p>
<h4 data-id="heading-1"><strong>ç†è§£ç±»æ¨¡å‹ï¼ˆNova LLMï¼‰</strong></h4>
<p>Amazon Nova Lite å’Œ Amazon Nova Pro æ˜¯ Amazon Novaç†è§£ç±»æ¨¡å‹ç³»åˆ—ï¼ˆNova Micro/Lite/Pro/Premierï¼‰ä¸­ä¸¤æ¬¾é«˜æ€§ä»·ï¼Œä½å»¶è¿Ÿçš„å¤šæ¨¡æ€æ¨¡å‹ï¼Œæ”¯æŒæ–‡æœ¬ã€å›¾åƒã€è§†é¢‘ç­‰å¤šç§æ ¼å¼ï¼Œå¹¶è¾“å‡ºæ–‡æœ¬å“åº”ã€‚<br/>
Nova Liteï¼šå®šä½ä¸º â€œæä½æˆæœ¬â€ çš„å¤šæ¨¡æ€ç†è§£æ¨¡å‹ï¼Œèƒ½å¤Ÿä»¥æå¿«çš„å“åº”é€Ÿåº¦å¤„ç†å›¾åƒã€è§†é¢‘å’Œæ–‡æœ¬è¾“å…¥ï¼Œç”Ÿæˆæ–‡æœ¬è¾“å‡ºã€‚<br/>
Nova Proï¼šåœ¨ç²¾åº¦ã€é€Ÿåº¦ä¸æˆæœ¬ä¹‹é—´å–å¾—å¹³è¡¡ï¼Œæ˜¯é¢å‘å¹¿æ³›ä»»åŠ¡çš„é«˜èƒ½åŠ›å¤šæ¨¡æ€ç†è§£æ¨¡å‹ã€‚<br/>
äºŒè€…å‡æ”¯æŒ 200 å¤šç§è¯­è¨€ï¼Œå¹¶ä¸”å¯é€šè¿‡ Amazon Bedrock è¿›è¡Œå®šåˆ¶ã€å¾®è°ƒã€ç»“åˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼ˆRAGï¼‰ç­‰ï¼Œé€‚åˆä¼ä¸šçº§åº”ç”¨ã€‚<br/>
åœ¨æœ¬æ–‡æ–¹æ¡ˆä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨Nova LLMçš„è§†é¢‘ç†è§£èƒ½åŠ›ï¼Œè¾“å…¥è§†é¢‘ï¼Œé€šè¿‡æç¤ºè¯å·¥ç¨‹ï¼Œè·å¾—é«˜å…‰ç‰‡æ®µæ—¶é—´ç‚¹çš„è¾“å‡ºã€‚</p>
<h3 data-id="heading-2"><strong>å¤šæ¨¡æ€åµŒå…¥æ¨¡å‹ï¼ˆNova MMEï¼‰</strong></h3>
<p>Amazon Nova å¤šæ¨¡æ€åµŒå…¥æ¨¡å‹ï¼ˆAmazon Nova Multimodal Embeddingsï¼‰æ˜¯ä¸€æ¬¾æœ€å…ˆè¿›çš„å¤šæ¨¡æ€åµŒå…¥æ¨¡å‹ï¼Œæ”¯æŒæ–‡æœ¬ã€æ–‡æ¡£ã€å›¾åƒã€è§†é¢‘å’ŒéŸ³é¢‘çš„ç»Ÿä¸€åµŒå…¥æ¨¡å‹ï¼Œå¯å®ç°é«˜ç²¾åº¦çš„è·¨æ¨¡æ€æ£€ç´¢ã€‚æ¨¡å‹ç»†èŠ‚ä¸ä½¿ç”¨æ–¹æ³•å¯é˜…è¯»<a href="https://link.juejin.cn?target=https%3A%2F%2Faws.amazon.com%2Fcn%2Fblogs%2Fchina%2Famazon-nova-multimodal-embedding-model-practical-guide%2F" target="_blank" title="https://aws.amazon.com/cn/blogs/china/amazon-nova-multimodal-embedding-model-practical-guide/" ref="nofollow noopener noreferrer">åšå®¢</a>ã€‚<br/>
åœ¨æœ¬æ–‡æ–¹æ¡ˆä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨Nova MMEçš„è§†é¢‘åµŒå…¥ç”Ÿæˆèƒ½åŠ›ï¼Œé€šè¿‡è¯­ä¹‰ç›¸ä¼¼åº¦æ£€ç´¢ç‰‡æ®µåµŒå…¥ï¼Œä»¥æ­¤å®šä½é«˜å…‰ç‰‡æ®µã€‚</p>
<h2 data-id="heading-3">é«˜å…‰å‰ªè¾‘æ–¹æ¡ˆ</h2>
<h3 data-id="heading-4"><strong>1. çº¯VLMï¼šå¤šæ¨¡æ€æ¨¡å‹è¯†åˆ«é«˜å…‰</strong></h3>
<p>è¯¥æ–¹æ¡ˆä½œä¸ºè§†é¢‘é«˜å…‰å‰ªè¾‘çš„åŸºç¡€æ–¹æ¡ˆï¼Œä¸»è¦ä½¿ç”¨Nova ç†è§£ç±»æ¨¡å‹ï¼ˆå¦‚ Nova Lite/Proç­‰ç‰ˆæœ¬ï¼‰ï¼Œåˆ©ç”¨å…¶è§†è§‰â€“è¯­è¨€æ¨¡å‹ï¼ˆVLMï¼ŒVision-Language Modelï¼‰èƒ½åŠ›ç›´æ¥å¯¹è§†é¢‘è¾“å…¥è¿›è¡Œç†è§£ï¼Œé€šè¿‡å…¶å†…éƒ¨çš„è§†è§‰ç¼–ç ã€æ—¶åºå»ºæ¨¡ä¸è¯­è¨€ç†è§£èƒ½åŠ›ï¼Œè¾“å‡ºé«˜å…‰ç‰‡æ®µçš„â€œå¼€å§‹æ—¶é—´ç‚¹â€å’Œâ€œç»“æŸæ—¶é—´ç‚¹â€ã€‚</p>
<h4 data-id="heading-5">a. æ–¹æ¡ˆæ¶æ„ä¸æ¡ˆä¾‹ä»£ç </h4>
<p>çº¯VLMæ–¹æ¡ˆçš„æ ¸å¿ƒæ€è·¯æ˜¯ï¼šç›´æ¥è®©Novaæ¨¡å‹è¯»å–æ•´ä¸ªè§†é¢‘ï¼Œç†è§£å…¶å†…å®¹åè¾“å‡ºé«˜å…‰ç‰‡æ®µçš„æ—¶é—´æˆ³ï¼ˆå¼€å§‹æ—¶é—´å’Œç»“æŸæ—¶é—´ï¼‰ï¼Œç„¶åä½¿ç”¨FFmpegç­‰å·¥å…·æŒ‰æ—¶é—´æˆ³åˆ‡åˆ†å¹¶æ‹¼æ¥è§†é¢‘ ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fd2908q01vomqb2.cloudfront.net%2F472b07b9fcf2c2451e8781e944bf5f77cd8457c8%2F2025%2F11%2F18%2Fautomated-video-highlight-clipping-using-amazon-nova-model-3.png" target="_blank" title="https://d2908q01vomqb2.cloudfront.net/472b07b9fcf2c2451e8781e944bf5f77cd8457c8/2025/11/18/automated-video-highlight-clipping-using-amazon-nova-model-3.png" ref="nofollow noopener noreferrer"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/833d8d6c2ddc472fb6fa42449f0a37aa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767626353&amp;x-signature=n1SjTKgDb8EdYpcPnPkDXD8QDyA%3D" alt="" loading="lazy"/></a></p>
<p><strong>åº”ç”¨æ¡ˆä¾‹1ï¼šè¶³çƒæ¯”èµ›é«˜å…‰æå–</strong></p>
<p>ä»¥ä¸€æ®µ1åˆ†é’Ÿçš„è¶³çƒæ¯”èµ›è§†é¢‘ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3D5RE6YNz8wng" target="_blank" title="https://www.youtube.com/watch?v=5RE6YNz8wng" ref="nofollow noopener noreferrer">è§†é¢‘æ¥æº</a>ï¼‰ä¸ºä¾‹ï¼Œæˆ‘ä»¬ä½¿ç”¨Nova Liteæ¨¡å‹è‡ªåŠ¨è¯†åˆ«è¿›çƒç­‰ç²¾å½©æ—¶åˆ»ã€‚åŸå§‹è§†é¢‘åŒ…å«å®Œæ•´çš„æ¯”èµ›ç‰‡æ®µï¼Œå…¶ä¸­ç©¿æ’äº†å¤šä¸ªè¿›çƒç¬é—´ã€ç²¾å½©æ‰‘æ•‘å’Œå…³é”®ä¼ çƒã€‚é€šè¿‡çº¯VLMæ–¹æ¡ˆï¼Œæ¨¡å‹èƒ½å¤Ÿè‡ªåŠ¨å®šä½è¿™äº›é«˜å…‰æ—¶åˆ»å¹¶ç”Ÿæˆæµ“ç¼©ç‰ˆè§†é¢‘ã€‚</p>
<p>ä¸‹å›¾å±•ç¤ºäº†å¤„ç†å‰åçš„å¯¹æ¯”æ•ˆæœã€‚å·¦ä¾§ä¸ºåŸå§‹1åˆ†é’Ÿè§†é¢‘ï¼ŒåŒ…å«äº†å¤§é‡çš„ä¸­åœºä¼ çƒå’Œè·‘ä½ç­‰å¸¸è§„ç”»é¢ï¼›å³ä¾§ä¸ºè‡ªåŠ¨ç”Ÿæˆçš„é«˜å…‰è§†é¢‘ï¼Œç²¾å‡†ä¿ç•™äº†4ä¸ªè¿›çƒç¬é—´ï¼Œæ€»æ—¶é•¿å‹ç¼©è‡³çº¦25ç§’ï¼Œå‹ç¼©æ¯”è¾¾åˆ°60%ã€‚æœ‰æ•ˆæå–äº†è§†é¢‘ä¸­æœ€å…·è§‚èµä»·å€¼çš„ç‰‡æ®µã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/37a0d8219787464cbead28bc76dfd7db~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767626353&amp;x-signature=iWJ9F2ybGvqwCUd0RKjdwxhIJRw%3D" alt="image.png" loading="lazy"/></p>
<p>1min åŸå§‹è§†é¢‘Â  Â  Â  Â </p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2afe4b36a14a4bb9b3c4ec3b80c13db5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767626353&amp;x-signature=B6A0cy1hMjALWgVo9Rfik7bIiQ0%3D" alt="image.png" loading="lazy"/></p>
<p>25sé«˜å…‰è§†é¢‘</p>
<p><strong>è¯†åˆ«å‡†ç¡®åº¦è¯„ä¼°</strong></p>
<p>ä¸ºäº†é‡åŒ–è¯„ä¼°æ¨¡å‹çš„è¡¨ç°ï¼Œæˆ‘ä»¬ä½¿ç”¨IoU (Intersection over Union) æŒ‡æ ‡å°†æ¨¡å‹è¾“å‡ºä¸äººå·¥æ ‡æ³¨çš„Ground Truthè¿›è¡Œå¯¹æ¯”ã€‚IoUè¡¡é‡é¢„æµ‹ç‰‡æ®µä¸çœŸå®ç‰‡æ®µçš„é‡å ç¨‹åº¦ï¼Œå½“IoU &gt; 0.5æ—¶è§†ä¸ºæˆåŠŸåŒ¹é…ã€‚æµ‹è¯•ç»“æœå¦‚ä¸‹ ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b44147efdfa14483b2bd65fd8d77243b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767626353&amp;x-signature=57wQwTehX%2B3ZY4Xxw6jydl8CnVM%3D" alt="image.png" loading="lazy"/></p>
<p>ä»æ•ˆæœæ¥çœ‹ï¼Œæ¨¡å‹å®ç°äº†100%çš„å¬å›ç‡ï¼Œä¸ä»…å‡†ç¡®è¯†åˆ«äº†æ‰€æœ‰è¿›çƒæ—¶åˆ»ï¼Œè¿˜è‡ªåŠ¨è¿‡æ»¤æ‰äº†ä¸­åœºä¼ çƒã€çƒå‘˜è·‘ä½ç­‰éé«˜å…‰å†…å®¹ã€‚ç”Ÿæˆçš„é«˜å…‰è§†é¢‘èŠ‚å¥ç´§å‡‘ï¼Œé€‚åˆåœ¨ç¤¾äº¤åª’ä½“ä¸Šå¿«é€Ÿåˆ†äº«ï¼Œè¿™æ­£æ˜¯è‡ªåŠ¨åŒ–é«˜å…‰å‰ªè¾‘çš„æ ¸å¿ƒä»·å€¼æ‰€åœ¨ã€‚</p>
<p><strong>æ ¸å¿ƒä»£ç å®ç°</strong></p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># Novaæ¨¡å‹åˆ†æè§†é¢‘</span>
<span class="hljs-attr">bedrock</span> = boto3.client(<span class="hljs-string">'bedrock-runtime'</span>, region_name=<span class="hljs-string">'us-east-1'</span>, 
                       <span class="hljs-attr">config</span>=Config(read_timeout=<span class="hljs-number">1800</span>))

<span class="hljs-attr">prompt</span> = <span class="hljs-string">"""You are an expert in football video analysis.
Identify ONLY goal moments from this match video.

**Output Format (JSON only):**
[
    {
        "start_time": "MM:SS",
        "end_time": "MM:SS",
        "description": "Goal description",
        "scene_type": "Goal"
    }
]

**Critical Constraints:**
- All timestamps MUST be within video duration
- Output ONLY valid JSON array
- NO overlapping timestamps"""</span>

<span class="hljs-attr">messages</span> = [{
    <span class="hljs-string">"role"</span>: <span class="hljs-string">"user"</span>,
    <span class="hljs-string">"content"</span>: [
        {<span class="hljs-string">"video"</span>: {<span class="hljs-string">"format"</span>: <span class="hljs-string">"mp4"</span>, <span class="hljs-string">"source"</span>: {<span class="hljs-string">"s3Location"</span>: {<span class="hljs-string">"uri"</span>: s3_uri, <span class="hljs-string">"bucketOwner"</span>: account_id}}}},
        {<span class="hljs-string">"text"</span>: prompt}
    ]
}]

<span class="hljs-attr">response</span> = bedrock.converse(
    <span class="hljs-attr">modelId</span>= &lt;nova-lite-model-id&gt;, <span class="hljs-comment">#å…·ä½“åç§°å¯ä»¥å‚è€ƒï¼šhttps://aws.amazon.com/nova</span>
    <span class="hljs-attr">messages</span>=messages,
    <span class="hljs-attr">inferenceConfig</span>={<span class="hljs-string">"maxTokens"</span>: <span class="hljs-number">65535</span>, <span class="hljs-string">"temperature"</span>: <span class="hljs-number">0.0</span>, <span class="hljs-string">"topP"</span>: <span class="hljs-number">1.0</span>},
    <span class="hljs-attr">additionalModelRequestFields</span>={
        "reasoningConfig": {"type": "enabled", "maxReasoningEffort": "low"}
    }
)

<span class="hljs-attr">output</span> = response[<span class="hljs-string">'output'</span>][<span class="hljs-string">'message'</span>][<span class="hljs-string">'content'</span>][<span class="hljs-number">0</span>][<span class="hljs-string">'text'</span>]
</code></pre>
<p><strong>åº”ç”¨æ¡ˆä¾‹2ï¼šå°ç‹—åŠ¨ç”»é«˜å…‰æå–</strong></p>
<p>ä¸ºäº†éªŒè¯çº¯VLMæ–¹æ¡ˆåœ¨ä¸åŒè§†é¢‘ç±»å‹ä¸Šçš„æ³›åŒ–èƒ½åŠ›ï¼Œæˆ‘ä»¬è¿›ä¸€æ­¥æµ‹è¯•äº†ä¸€æ®µ1åˆ†é’Ÿçš„åŠ¨ç”»è§†é¢‘ã€‚è¿™æ®µè§†é¢‘çš„ç‰¹ç‚¹æ˜¯å¤§éƒ¨åˆ†æ—¶é—´ç”»é¢ç›¸å¯¹é™æ€â€”â€”ä¸€åªæ©™è‰²çš„å°ç‹—åœ¨è“è‰²å¤§é—¨å‰ä¼‘æ¯ï¼Œè€ŒçœŸæ­£çš„é«˜å…‰æ—¶åˆ»é›†ä¸­åœ¨ä¸‰ä¸ªåŠ¨æ€ç‰‡æ®µï¼šä¸€åªé»„è‰²çš„å°ç‹—å‡ºç°æ¡çƒã€å¦ä¸€åªå°ç‹—ä»é—¨å†…æ¢å‡ºã€ä»¥åŠé»„è‰²å°ç‹—è¿½é€çƒçš„åœºæ™¯ã€‚ä¸‹å›¾å±•ç¤ºäº†å¤„ç†æ•ˆæœã€‚å·¦ä¾§ä¸ºåŸå§‹60ç§’è§†é¢‘ï¼Œå³ä¾§ä¸ºè‡ªåŠ¨ç”Ÿæˆçš„17ç§’é«˜å…‰è§†é¢‘ã€‚æ¨¡å‹æˆåŠŸè¯†åˆ«äº†æ‰€æœ‰ä¸‰ä¸ªåŠ¨æ€æ—¶åˆ»ï¼Œå¹¶å‡†ç¡®è¿‡æ»¤æ‰äº†é•¿æ—¶é—´çš„é™æ€ç”»é¢ ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7071cf98b05a48ffb1e6ff1e6034dc16~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767626353&amp;x-signature=ZvmjEKA%2FFCKTFEwKRI1QIHeHfTc%3D" alt="image.png" loading="lazy"/></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fpixabay.com%2Fzh%2Fvideos%2Fai-generated-house-dog-porch-192283%2F" target="_blank" title="https://pixabay.com/zh/videos/ai-generated-house-dog-porch-192283/" ref="nofollow noopener noreferrer">1min åŸå§‹è§†é¢‘Â </a>Â  Â  Â  Â </p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/362d6cbd9d204ec39368b577bb801b88~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767626353&amp;x-signature=ARSGZ%2BqzmmIPJIw0bRP5bnNMTNs%3D" alt="image.png" loading="lazy"/></p>
<p>17sé«˜å…‰è§†é¢‘</p>
<p><strong>è¯†åˆ«å‡†ç¡®åº¦è¯„ä¼°</strong></p>
<p>ä¸ºäº†é‡åŒ–è¯„ä¼°æ¨¡å‹çš„è¡¨ç°ï¼Œæˆ‘ä»¬åŒæ ·ä½¿ç”¨IoU æŒ‡æ ‡å°†æ¨¡å‹è¾“å‡ºä¸äººå·¥æ ‡æ³¨çš„Ground Truthè¿›è¡Œå¯¹æ¯”ï¼Œæµ‹è¯•ç»“æœå¦‚ä¸‹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/29f37c02da6b46219120d1e0f78e7228~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767626353&amp;x-signature=A3%2F4%2ButLaK4AvM6%2B3laNGtEFEvQ%3D" alt="image.png" loading="lazy"/></p>
<p>å¯ä»¥è§‚å¯Ÿåˆ°ï¼Œæ¨¡å‹æˆåŠŸè¯†åˆ«äº†æ‰€æœ‰3ä¸ªçœŸå®é«˜å…‰ç‰‡æ®µï¼Œå¹¶ä¸”æ‰€æœ‰æ—¶é—´æˆ³å‡å‡†ç¡®ä¸”åœ¨æœ‰æ•ˆèŒƒå›´å†…ã€‚ç‰¹åˆ«å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œç¬¬äºŒä¸ªç‰‡æ®µï¼ˆå°ç‹—å¼€é—¨ï¼‰å®ç°äº†å®Œç¾åŒ¹é…ï¼Œè¯´æ˜æ¨¡å‹å¯¹è¿™ç±»æ˜ç¡®çš„åŠ¨ä½œè½¬æŠ˜ç‚¹æœ‰å¾ˆå¼ºçš„è¯†åˆ«èƒ½åŠ›ã€‚å³ä½¿åœ¨ç¬¬ä¸€å’Œç¬¬ä¸‰ä¸ªç‰‡æ®µä¸­å­˜åœ¨1-2ç§’çš„æ—¶é—´åå·®ï¼Œæ—¶é—´é‡å ç‡ä»ç„¶è¾¾åˆ°0.67-0.88çš„é«˜æ°´å¹³ï¼Œè¿™å¯¹äºå®é™…åº”ç”¨å·²ç»å®Œå…¨è¶³å¤Ÿã€‚</p>
<p>ç»¼ä¸Šï¼Œå¯¹æ¯”è¶³çƒæ¯”èµ›å’ŒåŠ¨ç”»è§†é¢‘ä¸¤ä¸ªæ¡ˆä¾‹ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°çº¯VLMæ–¹æ¡ˆå±•ç°å‡ºè‰¯å¥½çš„è·¨åœºæ™¯æ³›åŒ–èƒ½åŠ›ï¼Œæ— è®ºæ˜¯çœŸå®æ‹æ‘„çš„ä½“è‚²èµ›äº‹ï¼Œè¿˜æ˜¯åˆ¶ä½œç²¾è‰¯çš„åŠ¨ç”»å†…å®¹ï¼ŒNova Liteéƒ½èƒ½å‡†ç¡®ç†è§£è§†é¢‘è¯­ä¹‰ï¼Œè¯†åˆ«å‡ºç¬¦åˆâ€åŠ¨ä½œç²¾å½©ã€æˆå‰§æ€§å¼ºã€å™äº‹ä»·å€¼é«˜â€ç­‰æ ‡å‡†çš„é«˜å…‰æ—¶åˆ»ã€‚è¿™ç§æ³›åŒ–èƒ½åŠ›ä½¿å¾—åŒä¸€å¥—æŠ€æœ¯æ–¹æ¡ˆå¯ä»¥åº”ç”¨äºå¤šç§ä¸šåŠ¡åœºæ™¯ï¼Œä»ä½“è‚²ç›´æ’­ã€æ¸¸æˆå½•åƒåˆ°æ•™è‚²è§†é¢‘ã€äº§å“æ¼”ç¤ºç­‰ï¼Œå¤§å¹…é™ä½äº†å¼€å‘å’Œç»´æŠ¤æˆæœ¬ã€‚</p>
<h4 data-id="heading-6">b. ä½¿ç”¨Novaç†è§£ç±»æ¨¡å‹è¾“å‡ºè§†é¢‘ç²¾å‡†timestampçš„æç¤ºè¯å·¥ç¨‹æŠ€å·§</h4>
<p>åœ¨å°†Amazon Novaæ¨¡å‹åº”ç”¨äºè§†é¢‘é«˜å…‰æå–æ—¶ï¼Œæˆ‘ä»¬é¢ä¸´çš„æ ¸å¿ƒæŒ‘æˆ˜æ˜¯å¦‚ä½•è®©æ¨¡å‹å‡†ç¡®è¾“å‡ºç»“æ„åŒ–çš„æ—¶é—´æˆ³æ•°æ®ã€‚åŸºäºå¯¹Nova Liteçš„ç³»ç»Ÿæ€§æµ‹è¯•ï¼Œå‘ç°æ¨¡å‹åœ¨è§†é¢‘æ—¶é—´å®šä½ä»»åŠ¡ä¸­çš„è¡¨ç°é«˜åº¦ä¾èµ–äºpromptçš„è®¾è®¡ç­–ç•¥ï¼ŒåŸºäºå¤§é‡æµ‹è¯•ç»éªŒå’Œè§†é¢‘ç†è§£ä»»åŠ¡çš„æ ‡å‡†promptæ¨¡æ¿ï¼Œå¯ä»¥æ€»ç»“å‡ºä»¥ä¸‹å…³é”®æŠ€å·§ï¼š</p>
<p><strong>é‡‡ç”¨åˆ†æ­¥éª¤çš„ä»»åŠ¡åˆ†è§£ç­–ç•¥ã€‚</strong> å‚è€ƒè§†é¢‘å¯†é›†æè¿°ï¼ˆDense Captioningï¼‰ä»»åŠ¡çš„promptè®¾è®¡ï¼Œå°†å¤æ‚çš„æ—¶é—´æˆ³æå–ä»»åŠ¡åˆ†è§£ä¸ºæ¸…æ™°çš„æ­¥éª¤åºåˆ—ï¼Œå¼•å¯¼æ¨¡å‹å»ºç«‹ç³»ç»ŸåŒ–çš„åˆ†ææµç¨‹ï¼š</p>
<pre><code class="hljs language-sql" lang="sql">### Task:
You <span class="hljs-keyword">are</span> an expert <span class="hljs-keyword">in</span> video content analysis <span class="hljs-keyword">and</span> temporal localization.
 
### Analysis Process (Follow these steps):
Step <span class="hljs-number">1</span>: Watch the entire video <span class="hljs-keyword">and</span> identify <span class="hljs-keyword">all</span> highlight moments
Step <span class="hljs-number">2</span>: <span class="hljs-keyword">For</span> <span class="hljs-keyword">each</span> moment, determine precise <span class="hljs-keyword">start</span> <span class="hljs-keyword">and</span> <span class="hljs-keyword">end</span> timestamps
Step <span class="hljs-number">3</span>: Verify <span class="hljs-keyword">all</span> timestamps <span class="hljs-keyword">are</span> <span class="hljs-keyword">within</span> the video duration
Step <span class="hljs-number">4</span>: Output structured JSON format <span class="hljs-keyword">only</span>
</code></pre>
<p>è¿™ç§ç»“æ„åŒ–æŒ‡å¼•å¸®åŠ©æ¨¡å‹å»ºç«‹â€è§‚å¯Ÿâ†’å®šä½â†’éªŒè¯â†’è¾“å‡ºâ€çš„å·¥ä½œæµç¨‹ï¼Œæ˜¾è‘—å‡å°‘æ—¶é—´æˆ³é”™è¯¯ã€‚</p>
<p>é’ˆå¯¹ç‰¹å®šä»»åŠ¡å®šåˆ¶åˆ†æç»´åº¦ã€‚å‚è€ƒè§†é¢‘æ ‡æ³¨ï¼ˆVideo Taggingï¼‰ä»»åŠ¡çš„promptè®¾è®¡ï¼Œåœ¨é«˜å…‰æå–æ—¶åº”æ˜ç¡®å®šä¹‰åˆ†æçš„å¤šä¸ªç»´åº¦ï¼Œå¸®åŠ©æ¨¡å‹å…¨é¢ç†è§£ä»€ä¹ˆæ˜¯â€é«˜å…‰â€ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-strong">**Analyze from these perspectives:**</span> 
<span class="hljs-bullet">-</span> Visual dynamics: motion intensity, camera movement, visual effects
<span class="hljs-bullet">-</span> Emotional impact: excitement level, dramatic tension
<span class="hljs-bullet">-</span> Technical complexity: skill difficulty, coordination required
<span class="hljs-bullet">-</span> Narrative significance: story turning points, key moments
<span class="hljs-bullet">-</span> Audience appeal: shareability, memorable elements
</code></pre>
<p>æ˜ç¡®å®šä¹‰è¾“å‡ºæ ¼å¼å¹¶æä¾›å…·ä½“ç¤ºä¾‹ã€‚åœ¨è§†é¢‘æ£€ç´¢ï¼ˆVideo Retrievalï¼‰å’Œæ—¶é—´å®šä½ä»»åŠ¡ä¸­ï¼Œæ ‡å‡†åšæ³•æ˜¯æ˜ç¡®æŒ‡å®šæ—¶é—´æˆ³çš„æ ¼å¼è¦æ±‚ã€‚æˆ‘ä»¬å»ºè®®åŒæ—¶æä¾›æ ¼å¼è¯´æ˜å’Œå…·ä½“ç¤ºä¾‹ï¼Œå¯¹äºéœ€è¦æ›´ç»“æ„åŒ–çš„åœºæ™¯ï¼Œä½¿ç”¨JSONæ ¼å¼ï¼š</p>
<pre><code class="hljs language-ruby" lang="ruby">**<span class="hljs-title class_">Output</span> <span class="hljs-title class_">Format</span><span class="hljs-symbol">:**</span>
<span class="hljs-title class_">Generate</span> detailed, time-stamped descriptions of events.
<span class="hljs-title class_">Each</span> event follows the <span class="hljs-symbol">format:</span> <span class="hljs-string">"#START - END seconds# description"</span>

**<span class="hljs-title class_">Example</span><span class="hljs-symbol">:**</span>
<span class="hljs-comment">#0.8 - 11.3 seconds# Athlete performs a high jump over obstacle</span>
<span class="hljs-comment">#32.5 - 50.0 seconds# Crowd celebrates as player scores</span>

**<span class="hljs-title class_">Output</span> <span class="hljs-title class_">Format</span> (<span class="hljs-variable constant_">JSON</span>)<span class="hljs-symbol">:**</span>
[
    {
        <span class="hljs-string">"start_time"</span>: <span class="hljs-string">"MM:SS"</span>,
        <span class="hljs-string">"end_time"</span>: <span class="hljs-string">"MM:SS"</span>,
        <span class="hljs-string">"description"</span>: <span class="hljs-string">"Detailed event description"</span>,
        <span class="hljs-string">"scene_type"</span>: <span class="hljs-string">"Action|Transition|Climax"</span>
    }
]
</code></pre>
<p>å¼ºè°ƒæ—¶é—´è¾¹ç•Œçº¦æŸä»¥é˜²æ­¢å¹»è§‰ã€‚æµ‹è¯•è¡¨æ˜ï¼Œæ¨¡å‹åœ¨é•¿è§†é¢‘ä¸­å®¹æ˜“äº§ç”Ÿè¶…å‡ºå®é™…æ—¶é•¿çš„æ—¶é—´æˆ³ã€‚å¿…é¡»åœ¨promptä¸­æ˜ç¡®è§†é¢‘çš„å®é™…æ—¶é•¿ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-strong">**CRITICAL CONSTRAINTS:**</span>
<span class="hljs-bullet">-</span> Video duration: exactly 3 minutes 26 seconds (00:00 to 03:26)
<span class="hljs-bullet">-</span> All timestamps MUST be within this range
<span class="hljs-bullet">-</span> No events beyond 03:26
<span class="hljs-bullet">-</span> Use MM:SS format consistently
</code></pre>
<p>é€šè¿‡ç³»ç»Ÿæ€§åœ°åº”ç”¨è¿™äº›æç¤ºè¯å·¥ç¨‹æŠ€å·§ï¼Œæˆ‘ä»¬èƒ½å¤Ÿæ˜¾è‘—æå‡Novaæ¨¡å‹åœ¨è§†é¢‘æ—¶é—´æˆ³è¯†åˆ«ä»»åŠ¡ä¸­çš„è¡¨ç°ã€‚åœ¨å®é™…åº”ç”¨ä¸­ï¼Œæˆ‘ä»¬è¿˜å»ºè®®ç»“åˆä»£ç å±‚é¢çš„åå¤„ç†æœºåˆ¶â€”â€”ä¾‹å¦‚éªŒè¯æ—¶é—´æˆ³æ˜¯å¦åœ¨æœ‰æ•ˆèŒƒå›´å†…ã€åˆå¹¶æ—¶é—´ä¸Šç›¸é‚»çš„ç‰‡æ®µç­‰ï¼Œè¿™ç§é€šè¿‡ç»“åˆpromptè®¾è®¡+å·¥ç¨‹åŒ–éªŒè¯çš„ç»„åˆç­–ç•¥èƒ½å¤Ÿæ„å»ºæ›´ç¨³å¥çš„ç”Ÿäº§ç³»ç»Ÿã€‚</p>
<p>é™¤äº†æç¤ºè¯ä¼˜åŒ–ï¼Œå¯¹äºé•¿è§†é¢‘åœºæ™¯ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ä»æ¶æ„å±‚é¢è¿›ä¸€æ­¥æå‡å¤„ç†æ•ˆæœï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°†è¯¦ç»†ä»‹ç»è¿™ä¸€ä¼˜åŒ–æ–¹æ¡ˆã€‚</p>
<h4 data-id="heading-7">c. æ•ˆæœä¼˜åŒ–ï¼šé€šè¿‡åˆ‡ç‰‡å¢åŠ è¯†åˆ«ç²¾å‡†åº¦</h4>
<p>åœ¨å®é™…ç”Ÿäº§ç¯å¢ƒæµ‹è¯•ä¸­ï¼Œæˆ‘ä»¬å‘ç°å¯¹äºé•¿è§†é¢‘åœºæ™¯ï¼Œé‡‡ç”¨è§†é¢‘åˆ‡ç‰‡ç­–ç•¥èƒ½å¤Ÿæ˜¾è‘—æå‡æ—¶é—´æˆ³å®šä½ç²¾åº¦å’Œé«˜å…‰è¯†åˆ«å‡†ç¡®ç‡ã€‚è¯¥ç­–ç•¥çš„æ ¸å¿ƒæ€è·¯æ˜¯å°†é•¿è§†é¢‘æŒ‰å›ºå®šæ—¶é•¿åˆ‡åˆ†æˆå¤šä¸ªç‰‡æ®µï¼Œå¯¹æ¯ä¸ªç‰‡æ®µç‹¬ç«‹è°ƒç”¨Novaæ¨¡å‹è¿›è¡Œå¹¶è¡Œåˆ†æï¼Œç„¶åå°†è¯†åˆ«ç»“æœæ˜ å°„å›åŸè§†é¢‘çš„ç»å¯¹æ—¶é—´è½´ã€‚è¿™ç§æ–¹æ³•ä¸ä»…æ˜¾è‘—æå‡äº†æ—¶é—´æˆ³ç²¾åº¦ï¼Œè¿˜å¸¦æ¥äº†æ„å¤–çš„æ€§èƒ½æ”¶ç›Šâ€”â€”é€šè¿‡å¹¶è¡Œå¤„ç†å¤šä¸ªç‰‡æ®µï¼Œæ•´ä½“å¤„ç†æ—¶é—´åè€Œç¼©çŸ­äº†ã€‚</p>
<p><strong>åº”ç”¨æ¡ˆä¾‹3ï¼šé•¿è§†é¢‘è¶³çƒæ¯”èµ›é«˜å…‰æå–</strong></p>
<p>ä»¥ä¸€æ®µ9åˆ†3ç§’çš„è¶³çƒæ¯”èµ›è§†é¢‘ä¸ºä¾‹ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3D5RE6YNz8wng" target="_blank" title="https://www.youtube.com/watch?v=5RE6YNz8wng" ref="nofollow noopener noreferrer">è§†é¢‘æ¥æº</a>ï¼‰ï¼Œæˆ‘ä»¬å°†å…¶åˆ‡åˆ†ä¸º18ä¸ª30ç§’ç‰‡æ®µå’Œ1ä¸ª3ç§’ç‰‡æ®µï¼Œé€šè¿‡Amazon Nova Liteæ¨¡å‹å¹¶è¡Œå¤„ç†åï¼Œè‡ªåŠ¨ç”Ÿæˆäº†åŒ…å«æ‰€æœ‰è¿›çƒæ—¶åˆ»çš„é«˜å…‰è§†é¢‘ã€‚ä¸‹å›¾å±•ç¤ºäº†åŸå§‹è§†é¢‘ä¸è‡ªåŠ¨ç”Ÿæˆçš„é«˜å…‰è§†é¢‘å¯¹æ¯”ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bc29ecace6aa47fbb2a79d47dbabbba1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767626353&amp;x-signature=OOmDsUQ6vyk0eEUyEkn7kmjOetA%3D" alt="image.png" loading="lazy"/></p>
<p align="center">åˆ‡ç‰‡ç­–ç•¥å¤„ç†æµç¨‹å›¾</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/10189a750f0a4ae6a05a3c14e091c8cc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767626353&amp;x-signature=HrZ2WznrzxzL%2FqcScoe9MSoOSQg%3D" alt="image.png" loading="lazy"/></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3D5RE6YNz8wng" target="_blank" title="https://www.youtube.com/watch?v=5RE6YNz8wng" ref="nofollow noopener noreferrer">9m3s åŸè§†é¢‘</a>Â  Â  Â </p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1a30e549459e4e7581449aca614d05fd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767626353&amp;x-signature=mxUIH0ZjgZjELFTHWioP%2F8%2FQIRo%3D" alt="image.png" loading="lazy"/></p>
<p>1m58s é«˜å…‰è§†é¢‘</p>
<p><strong>æ•ˆæœéªŒè¯</strong></p>
<p>ä¸ºé‡åŒ–è¯„ä¼°åˆ‡ç‰‡ç­–ç•¥çš„æ•ˆæœï¼Œæˆ‘ä»¬ä½¿ç”¨äººå·¥æ ‡æ³¨çš„Ground Truthè¿›è¡Œå¯¹æ¯”æµ‹è¯•ã€‚ç»“æœæ˜¾ç¤ºï¼Œåˆ‡ç‰‡ç­–ç•¥åœ¨æ—¶é—´æˆ³ç²¾åº¦å’Œå¬å›ç‡ä¸¤ä¸ªå…³é”®æŒ‡æ ‡ä¸Šå‡æœ‰æ˜¾è‘—æå‡ï¼š30ç§’åˆ‡ç‰‡ç­–ç•¥æˆåŠŸè¯†åˆ«äº†å…¨éƒ¨4ä¸ªè¿›çƒï¼ˆå¬å›ç‡100%ï¼‰ï¼Œæ—¶é—´æˆ³ç²¾åº¦æå‡è‡³Â±1ç§’ä»¥å†…ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9338560056f0419bb51bdcc40f8a6532~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767626353&amp;x-signature=7bv%2FO%2BMey5jTXrp5FlmhGBbRFHg%3D" alt="image.png" loading="lazy"/></p>
<p>åˆ‡ç‰‡ç­–ç•¥çš„å¦ä¸€ä¸ªä¼˜åŠ¿æ˜¯é€šè¿‡å¹¶è¡Œå¤„ç†æå‡äº†æ•´ä½“å¤„ç†æ•ˆç‡ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè™½ç„¶å¬å›ç‡å¾—åˆ°äº†æ˜¾è‘—æå‡ï¼Œä½†ç”±äºæ¯ä¸ªç‰‡æ®µç‹¬ç«‹åˆ†æï¼Œå¯èƒ½ä¼šäº§ç”Ÿè¾ƒå¤šå†—ä½™æ ‡è®°ï¼ˆæœ¬æ¡ˆä¾‹ä¸­è¾“å‡ºäº†14ä¸ªå€™é€‰ç‰‡æ®µï¼‰ï¼Œå»ºè®®åœ¨åå¤„ç†é˜¶æ®µå¢åŠ å»é‡åŠç­›é€‰é€»è¾‘ä»¥ä¼˜åŒ–æœ€ç»ˆè¾“å‡ºã€‚</p>
<p>æ€»ä½“è€Œè¨€ï¼Œçº¯VLMæ–¹æ¡ˆçš„ä¼˜åŠ¿åœ¨äºæµç¨‹ç®€æ´ã€æ¨¡å—ç²¾ç®€ã€å®ç°è·¯å¾„çŸ­ï¼Œéå¸¸é€‚åˆå¿«é€ŸåŸå‹å¼€å‘å’Œä¸­çŸ­è§†é¢‘åœºæ™¯ã€‚ç„¶è€Œï¼Œå½“é¢å¯¹è¶…é•¿è§†é¢‘ï¼Œè¿™ä¸€æ–¹æ¡ˆå¯¹æ¨¡å‹èƒ½åŠ›å’Œæç¤ºè¯å·¥ç¨‹çš„è¦æ±‚ä¼šæ˜¾è‘—æå‡ã€‚æ­¤å¤–ï¼Œå¯¹äºéœ€è¦ä»æµ·é‡è§†é¢‘ç´ æåº“ä¸­å…¨å±€ç­›é€‰æœ€ä½³ç‰‡æ®µçš„åœºæ™¯ï¼Œçº¯VLMæ–¹æ¡ˆéš¾ä»¥æä¾›è·¨è§†é¢‘çš„è¯­ä¹‰æ£€ç´¢èƒ½åŠ›ã€‚<br/>
åœ¨æ¥ä¸‹æ¥çš„ç« èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†ä»‹ç»ï¼šå½“VLMå¯¹é«˜å…‰ç‰‡æ®µçš„æå–ä¸æ˜¯é‚£ä¹ˆç²¾å‡†æ—¶ï¼Œé€šè¿‡å¼•å…¥å¤šæ¨¡æ€åµŒå…¥æ¨¡å‹ï¼ˆMMEï¼‰åœ¨è¯­ä¹‰ç©ºé—´ä¸Šè¿›è¡Œç›¸ä¼¼åº¦åŒ¹é…ï¼Œä¸ä»…èƒ½æå‡ç³»ç»Ÿçš„å®¹é”™èƒ½åŠ›ï¼Œå¼¥è¡¥VLMåœ¨ç²¾å‡†æ€§æ–¹é¢çš„éƒ¨åˆ†ä¸è¶³ï¼ŒåŒæ—¶ä¹Ÿæä¾›äº†è·¨è§†é¢‘ç‰‡æ®µæ£€ç´¢å®šä½çš„å¯èƒ½æ€§ï¼Œå®ç°æ›´å¼ºå¤§çš„è§†é¢‘é«˜å…‰å‰ªè¾‘èƒ½åŠ›ã€‚</p>
<h3 data-id="heading-8"><strong>2. VLM+MMEï¼šè¯­ä¹‰æ‘˜è¦+åµŒå…¥æ£€ç´¢</strong></h3>
<p>è¯¥æ–¹æ¡ˆç»“åˆäº†ä¸¤ç±»æŠ€æœ¯ï¼šé¦–å…ˆç”± VLMï¼ˆNovaç†è§£ç±»æ¨¡å‹ï¼Œå¦‚Nova Lite/Proï¼‰å¯¹è§†é¢‘æ•´ä½“è¿›è¡Œç†è§£ï¼Œç”Ÿæˆé«˜å…‰è¦ç‚¹æˆ–æè¿°ï¼›å…¶æ¬¡ï¼Œå°†è§†é¢‘åˆ‡ç‰‡ï¼ˆå¦‚æ¯2-3ç§’ä¸€æ®µï¼Œ<em>å…·ä½“åˆ‡ç‰‡æ—¶é•¿æ ¹æ®ä¸šåŠ¡è¦æ±‚å’Œæ£€ç´¢é¢—ç²’åº¦å†³å®š</em>ï¼‰ç”Ÿæˆè§†é¢‘åµŒå…¥å‘é‡ï¼ˆé€šè¿‡å¤šæ¨¡æ€åµŒå…¥æ¨¡å‹ï¼ŒNova MMEï¼‰â€”â€”æ¯ä¸ªç‰‡æ®µå–å¾—è§†è§‰ï¼æ—¶åºç‰¹å¾ä¹‹åå½¢æˆå‘é‡ã€‚ç„¶åç³»ç»Ÿå°†é«˜å…‰æè¿°ï¼ˆæ–‡æœ¬ï¼‰ä½œä¸ºæŸ¥è¯¢ï¼Œä¸è§†é¢‘ç‰‡æ®µçš„åµŒå…¥å‘é‡è¿›è¡Œ<strong>ç›¸ä¼¼åº¦åŒ¹é…</strong>ï¼Œä»è€Œç²¾ç¡®å®šä½é‚£äº›â€œè¯­ä¹‰ä¸Šä¸é«˜å…‰æè¿°æœ€æ¥è¿‘â€çš„ç‰‡æ®µã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/93fe940c72914cd8b4bacfad5b46be01~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767626353&amp;x-signature=qAQERGUZM2HieO8P6kM0sPqydNQ%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-9">a. æ–¹æ¡ˆæ¶æ„</h3>
<p>è¯¥æ–¹æ¡ˆçš„éœ€è¦è§†é¢‘åˆ‡ç‰‡ã€åµŒå…¥ç”Ÿæˆä¸åŒ¹é…æœºåˆ¶ï¼Œ å¯ç”¨äºè·¨è§†é¢‘çš„å‰ªè¾‘éœ€æ±‚ã€‚åŸºäºåµŒå…¥å‘é‡çš„å¯å¤ç”¨æ€§ï¼Œæä¾›ä»å†·å¯åŠ¨ï¼ˆ2.1ï¼Œ 2.2ï¼‰åˆ°åŸºäºç´ æç´¯ç§¯ï¼ˆ2.3ï¼‰çš„æ–¹æ¡ˆè¿›é˜¶è·¯å¾„ã€‚å¦‚æœæˆæœ¬æ•æ„Ÿå¯ä»¥è€ƒè™‘ï¼ˆ2.4ï¼‰å°†è§†é¢‘æŠ½å¸§ï¼Œç”¨å›¾ç‰‡å‘é‡æ£€ç´¢ã€‚</p>
<h4 data-id="heading-10">2.1 åŸºæœ¬æ–¹æ¡ˆï¼šé«˜å…‰å‹ç¼©</h4>
<p>åœ¨ä¸å¼ºè°ƒåŸå§‹è§†é¢‘æƒ…èŠ‚é¡ºåºçš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥é‡‡ç”¨ä¸€ç§<strong>é«˜å…‰å‹ç¼©</strong>çš„æ–¹æ³•ï¼Œå°†è§†é¢‘å†…å®¹æç‚¼ä¸ºç²¾åç‰‡æ®µã€‚å…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š</p>
<ol>
<li>
<p><strong>è§†é¢‘å†…å®¹æ€»ç»“</strong>ï¼šå°†è§†é¢‘è¾“å…¥åˆ°VLMæ¨¡å‹ï¼ˆä¾‹å¦‚äºšé©¬é€Šäº‘ç§‘æŠ€çš„ Nova Lite/Pro æ¨¡å‹ï¼‰ï¼Œç”Ÿæˆå¯¹è§†é¢‘ä¸»è¦å†…å®¹çš„æ‘˜è¦æè¿°ï¼Œå¹¶ä»¥è¦ç‚¹ï¼ˆbullet pointsï¼‰çš„å½¢å¼å‘ˆç°ã€‚è¿™ä¸€æ­¥è®©æ¨¡å‹ä»å…¨å±€ä¸Šç†è§£è§†é¢‘å†…å®¹çš„é‡ç‚¹ã€‚ï¼ˆä¹Ÿå¯ä»¥ä¸æ–¹æ³•<strong>1. çº¯VLMï¼ˆ ç”¨Nova VLMç›´æ¥è¿›è¡Œè§†é¢‘ç†è§£ï¼Œè¾“å‡ºé«˜å…‰ç‰‡æ®µçš„å¼€å§‹å’Œç»“æŸæ—¶é—´ç‚¹ï¼‰æ–¹æ³•</strong>ç»“åˆï¼Œå¯¹VLMç”Ÿæˆçš„é«˜å…‰ç‚¹æŸ¥æ¼è¡¥ç¼ºã€‚ï¼‰</p>
<ol>
<li>ï¼ˆå¯é€‰ï¼‰æ‰“é‡è¦æ€§æ ‡ç­¾ï¼šæ¯æ¡æ‘˜è¦è¦ç‚¹å¯ä»¥é™„åŠ ä¸€ä¸ªä¼˜å…ˆçº§æ ‡ç­¾ï¼ˆå¦‚é‡è¦ç¨‹åº¦1ã€2ã€3ï¼‰ä»¥è¡¨ç¤ºç›¸å¯¹é‡è¦æ€§ï¼ˆè¿™ä¸€æ­¥éœ€è¦åœ¨ system prompt ä¸­æ˜ç¡®é«˜å…‰ç‰‡æ®µçš„åˆ¤å®šæ ‡å‡†ï¼‰ã€‚</li>
</ol>
</li>
<li>
<p><strong>è§†é¢‘åˆ‡ç‰‡ä¸åµŒå…¥</strong>ï¼šå°†è§†é¢‘æŒ‰æ—¶é—´é¡ºåºåˆ†å‰²æˆçŸ­ç‰‡æ®µï¼Œå¦‚<strong>2-3ç§’</strong>ï¼ˆ<em>å…·ä½“åˆ‡ç‰‡æ—¶é•¿æ ¹æ®ä¸šåŠ¡è¦æ±‚å’Œæ£€ç´¢é¢—ç²’åº¦å†³å®š</em>ï¼‰ï¼Œå¹¶å¯¹æ¯ä¸ªç‰‡æ®µç”Ÿæˆå‘é‡åµŒå…¥è¡¨ç¤ºï¼ˆä½¿ç”¨Nova MMEï¼Œå¤šæ¨¡æ€åµŒå…¥æ¨¡å‹ï¼Œæ¯ä¸ªç‰‡æ®µçš„åµŒå…¥å‘é‡éƒ½ä»£è¡¨äº†è¯¥ç‰‡æ®µçš„è¯­ä¹‰å†…å®¹ï¼‰ã€‚</p>
</li>
<li>
<p><strong>è¯­ä¹‰åŒ¹é…é€‰å–é«˜å…‰ç‰‡æ®µ</strong>ï¼šåˆ©ç”¨ç¬¬ä¸€æ­¥ä¸­VLMç”Ÿæˆçš„æ‘˜è¦è¦ç‚¹ä½œä¸ºæŸ¥è¯¢ï¼Œæ ¹æ®è¯­ä¹‰ç›¸ä¼¼åº¦åœ¨åµŒå…¥å‘é‡ç©ºé—´ä¸­æ£€ç´¢æœ€ç›¸å…³çš„å½±ç‰‡ç‰‡æ®µã€‚æ¢è¨€ä¹‹ï¼Œæˆ‘ä»¬åœ¨åµŒå…¥å‘é‡åº“ä¸­æŸ¥æ‰¾ä¸æ¯æ¡æ‘˜è¦è¦ç‚¹è¯­ä¹‰æœ€æ¥è¿‘çš„è‹¥å¹²ç‰‡æ®µã€‚è¿™äº›åŒ¹é…ä¸Šçš„ç‰‡æ®µå³è¢«è§†ä¸ºè§†é¢‘çš„é«˜å…‰ç‰‡æ®µé›†åˆã€‚ç”±äºæ‘˜è¦è¦ç‚¹æ¦‚æ‹¬äº†è§†é¢‘çš„é‡è¦å†…å®¹ï¼Œæ£€ç´¢å‡ºçš„ç‰‡æ®µä¹Ÿå°±å¯¹åº”äº†è§†é¢‘ä¸­æœ€ç²¾å½©æˆ–æœ€é‡è¦çš„ç¬é—´ã€‚</p>
<ol>
<li>ï¼ˆå¯é€‰ï¼‰åˆç­›ï¼šå¦‚é«˜å…‰æè¿°è¿‡å¤šï¼Œå¯ä»¥æ ¹æ®é«˜å…‰ç‚¹çš„ä¼˜å…ˆçº§ç­›é€‰éœ€è¦åŒ¹é…çš„æ–‡å­—ã€‚</li>
<li>ï¼ˆå¯é€‰ï¼‰å»é‡ï¼šè‹¥å‡ºç°å¤šä¸ªè¦ç‚¹åŒ¹é…åˆ°åŒä¸€æ®µè§†é¢‘ï¼ˆå³æŸç‰‡æ®µå¯¹å¤šæ¡è¦ç‚¹éƒ½æœ‰é«˜ç›¸ä¼¼åº¦ï¼‰ï¼Œåˆ™æ ¹æ®è¦ç‚¹çš„ä¼˜å…ˆçº§å†³å®šè¯¥ç‰‡æ®µåº”å½’å±å“ªä¸ªè¦ç‚¹ï¼ˆç¡®ä¿é‡è¦çš„è¦ç‚¹è·å¾—ç‹¬ç‰¹ç‰‡æ®µï¼‰</li>
</ol>
</li>
<li>
<p><strong>é«˜å…‰ç‰‡æ®µå¯¼å‡º</strong>ï¼šå°†é€‰å®šçš„é«˜å…‰ç‰‡æ®µæŒ‰åŸè§†é¢‘ä¸­çš„æ—¶é—´é¡ºåºç»„åˆå¯¼å‡ºï¼Œå½¢æˆä¸€ä¸ªå‹ç¼©ç‰ˆçš„è§†é¢‘ã€‚å¦‚æœä¸å…³æ³¨ç‰‡æ®µé¡ºåºï¼Œä¹Ÿå¯ä»¥æŒ‰ç…§ç›¸ä¼¼åº¦å¾—åˆ†ç­‰æƒé‡æ¥è‡ªç”±ç»„åˆã€‚ä½†é€šå¸¸ç”±äºæ‘˜è¦è¦ç‚¹æºè‡ªåŸå§‹è§†é¢‘é¡ºåºï¼Œæ­¤æ–¹æ³•ä¸‹å¯¼å‡ºçš„é«˜å…‰ç‰‡æ®µå¤©ç„¶ä¿æŒäº†åŸè§†é¢‘çš„å¤§è‡´é¡ºåºã€‚</p>
</li>
</ol>
<p>è¯¥åŸºæœ¬æ–¹æ¡ˆä¸ä¾èµ–ä»»ä½•å¤–éƒ¨ç´ æåº“ï¼Œæµç¨‹ç®€å•ç›´æ¥ã€‚VLMæä¾›è¯­ä¹‰æ‘˜è¦ï¼ŒåµŒå…¥å‘é‡æä¾›ç²¾ç¡®æ£€ç´¢ï¼Œä½¿æ¨¡å‹èƒ½å¤Ÿâ€œç†è§£â€è§†é¢‘å†…å®¹å¹¶æ‰¾åˆ°å¯¹åº”ç‰‡æ®µã€‚æ­¤æ–¹æ³•ä¾èµ–ç¬¬ä¸€æ­¥VLMçš„æ‘˜è¦è´¨é‡å’Œæç¤ºè¯å·¥ç¨‹ï¼Œè‹¥VLMæœªèƒ½æŠ“ä½çœŸæ­£çš„ç²¾å½©ä¹‹å¤„ï¼Œæ£€ç´¢ç»“æœå¯èƒ½æ¬ ä½³ã€‚</p>
<p><strong>æ¡ˆä¾‹ä»£ç </strong></p>
<p>ä½¿ç”¨Amazon Nova Liteè¿›è¡Œè§†é¢‘ç†è§£ä¸é«˜å…‰è¦ç‚¹ç”Ÿæˆï¼ŒAmazon Nova MMEè¿›è¡Œæ–‡æœ¬å’Œè§†é¢‘ç‰‡æ®µçš„åµŒå…¥ç”Ÿæˆï¼Œå¼€æºéŸ³è§†é¢‘å¤„ç†åº“FFmpegè¿›è¡Œè§†é¢‘å¤„ç†ï¼Œè¯¥æµç¨‹çš„æ ¸å¿ƒä»£ç æ¶æ„å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> boto3
<span class="hljs-keyword">import</span> json
<span class="hljs-keyword">import</span> subprocess
<span class="hljs-keyword">import</span> base64
<span class="hljs-keyword">import</span> glob
<span class="hljs-keyword">from</span> sklearn.metrics.pairwise <span class="hljs-keyword">import</span> cosine_similarity

bedrock = boto3.client(<span class="hljs-string">'bedrock-runtime'</span>, region_name=<span class="hljs-string">'us-east-1'</span>)

<span class="hljs-comment"># 1. LLMè§†é¢‘åˆ†æ - Novaæ¨¡å‹ç†è§£è§†é¢‘ç”Ÿæˆé«˜å…‰è¦ç‚¹</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">analyze_video</span>(<span class="hljs-params">video_path</span>):
    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(video_path, <span class="hljs-string">'rb'</span>) <span class="hljs-keyword">as</span> f:
        video_base64 = base64.b64encode(f.read()).decode(<span class="hljs-string">'utf-8'</span>)
    
    response = bedrock.invoke_model(
        modelId=<span class="hljs-string">"us.amazon.nova-lite-v1:0"</span>,
        body=json.dumps({
            <span class="hljs-string">"messages"</span>: [{<span class="hljs-string">"role"</span>: <span class="hljs-string">"user"</span>, <span class="hljs-string">"content"</span>: [
                {<span class="hljs-string">"video"</span>: {<span class="hljs-string">"format"</span>: <span class="hljs-string">"mp4"</span>, <span class="hljs-string">"source"</span>: {<span class="hljs-string">"bytes"</span>: video_base64}}},
                {<span class="hljs-string">"text"</span>: <span class="hljs-string">"""è¯·åˆ†æè¿™ä¸ªè§†é¢‘å¹¶æç‚¼é«˜å…‰è¦ç‚¹ã€‚                       
                            ## é«˜å…‰ç‰‡æ®µåˆ¤å®šæ ‡å‡†ï¼š
                            - åŠ¨ä½œç²¾å½©æˆ–æŠ€å·§æ€§å¼ºçš„æ—¶åˆ»
                            - æƒ…æ„Ÿè¡¨è¾¾ä¸°å¯Œæˆ–æˆå‰§æ€§çš„ç¬é—´  
                            - å…³é”®è½¬æŠ˜ç‚¹æˆ–é‡è¦äº‹ä»¶
                            - è§†è§‰æ•ˆæœçªå‡ºæˆ–æ„å›¾ä¼˜ç¾çš„ç‰‡æ®µ
                            - å…·æœ‰æ•…äº‹æ€§æˆ–å™äº‹ä»·å€¼çš„æ—¶åˆ»
                            
                            ## è¾“å‡ºè¦æ±‚ï¼š
                            è¯·æŒ‰ä»¥ä¸‹æ ¼å¼è¾“å‡ºé«˜å…‰è¦ç‚¹ï¼Œæ¯ä¸ªè¦ç‚¹åŒ…å«ä¼˜å…ˆçº§ï¼ˆ1=æœ€é‡è¦ï¼Œ2=é‡è¦ï¼Œ3=ä¸€èˆ¬ï¼‰ï¼š
                            
                            **è§†é¢‘æ€»ç»“ï¼š**
                            [ç®€è¦æè¿°è§†é¢‘çš„æ•´ä½“å†…å®¹å’Œä¸»é¢˜]
                            
                            **é«˜å…‰è¦ç‚¹åˆ—è¡¨ï¼š**
                            A. [ä¼˜å…ˆçº§1] - [å…·ä½“çš„é«˜å…‰å†…å®¹æè¿°]
                            B. [ä¼˜å…ˆçº§2]  - [å…·ä½“çš„é«˜å…‰å†…å®¹æè¿°]  
                            C. [ä¼˜å…ˆçº§1]  - [å…·ä½“çš„é«˜å…‰å†…å®¹æè¿°]
                            ...
                            
                            è¯·ç¡®ä¿ï¼š
                            1. æŒ‰è§†é¢‘æ—¶é—´é¡ºåºæ’åˆ—è¦ç‚¹
                            2. æ¯ä¸ªè¦ç‚¹éƒ½æœ‰æ˜ç¡®çš„ä¼˜å…ˆçº§æ ‡è®°
                            3. æè¿°å…·ä½“ä¸”ä¾¿äºåç»­åŒ¹é…
                            4. é‡ç‚¹å…³æ³¨çœŸæ­£ç²¾å½©çš„æ—¶åˆ»ï¼Œè€Œéç®€å•æ¦‚æ‹¬"""</span>}
            ]}]
        })
    )
    <span class="hljs-keyword">return</span> json.loads(response[<span class="hljs-string">"body"</span>].read())[<span class="hljs-string">"output"</span>][<span class="hljs-string">"message"</span>][<span class="hljs-string">"content"</span>][<span class="hljs-number">0</span>][<span class="hljs-string">"text"</span>]

<span class="hljs-comment"># 2. è§†é¢‘åˆ‡ç‰‡ - FFmpegæŒ‰å›ºå®šé—´éš”åˆ‡åˆ†è§†é¢‘</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">extract_clips</span>(<span class="hljs-params">video_path, clip_duration=<span class="hljs-number">3</span></span>):
    <span class="hljs-comment"># è·å–è§†é¢‘æ—¶é•¿</span>
    duration = <span class="hljs-built_in">float</span>(subprocess.check_output([<span class="hljs-string">'ffprobe'</span>, <span class="hljs-string">'-v'</span>, <span class="hljs-string">'quiet'</span>, <span class="hljs-string">'-show_entries'</span>, <span class="hljs-string">'format=duration'</span>, <span class="hljs-string">'-of'</span>, <span class="hljs-string">'csv=p=0'</span>, video_path]))
    
    clips = []
    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>, <span class="hljs-built_in">int</span>(duration), clip_duration):
        clip_path = <span class="hljs-string">f"clips/clip_<span class="hljs-subst">{i:04d}</span>_<span class="hljs-subst">{i}</span>s.mp4"</span>
        subprocess.run([<span class="hljs-string">'ffmpeg'</span>, <span class="hljs-string">'-i'</span>, video_path, <span class="hljs-string">'-ss'</span>, <span class="hljs-built_in">str</span>(i), <span class="hljs-string">'-t'</span>, <span class="hljs-built_in">str</span>(clip_duration), 
                       <span class="hljs-string">'-c:v'</span>, <span class="hljs-string">'libx264'</span>, clip_path, <span class="hljs-string">'-y'</span>, <span class="hljs-string">'-loglevel'</span>, <span class="hljs-string">'quiet'</span>])
        clips.append({<span class="hljs-string">'timestamp'</span>: i, <span class="hljs-string">'path'</span>: clip_path})
    <span class="hljs-keyword">return</span> clips

<span class="hljs-comment"># 3. è¯­ä¹‰åŒ¹é… - Nova MMEç”ŸæˆåµŒå…¥åè®¡ç®—è¦ç‚¹ä¸è§†é¢‘ç‰‡æ®µç›¸ä¼¼åº¦</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">get_embedding</span>(<span class="hljs-params">content, content_type=<span class="hljs-string">"text"</span></span>):
    <span class="hljs-keyword">if</span> content_type == <span class="hljs-string">"text"</span>:
        request = {
            <span class="hljs-string">"taskType"</span>: <span class="hljs-string">"SINGLE_EMBEDDING"</span>,
            <span class="hljs-string">"singleEmbeddingParams"</span>: {
                <span class="hljs-string">"embeddingPurpose"</span>: <span class="hljs-string">"GENERIC_INDEX"</span>,
                <span class="hljs-string">"embeddingDimension"</span>: <span class="hljs-number">1024</span>,
                <span class="hljs-string">"text"</span>: {<span class="hljs-string">"truncationMode"</span>: <span class="hljs-string">"END"</span>, <span class="hljs-string">"value"</span>: content}
            }
        }
    <span class="hljs-keyword">else</span>:  <span class="hljs-comment"># video</span>
        <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(content, <span class="hljs-string">'rb'</span>) <span class="hljs-keyword">as</span> f:
            video_base64 = base64.b64encode(f.read()).decode(<span class="hljs-string">'utf-8'</span>)
        request = {
            <span class="hljs-string">"taskType"</span>: <span class="hljs-string">"SINGLE_EMBEDDING"</span>,
            <span class="hljs-string">"singleEmbeddingParams"</span>: {
                <span class="hljs-string">"embeddingPurpose"</span>: <span class="hljs-string">"GENERIC_INDEX"</span>,
                <span class="hljs-string">"embeddingDimension"</span>: <span class="hljs-number">1024</span>,
                <span class="hljs-string">"video"</span>: {
                    <span class="hljs-string">"format"</span>: <span class="hljs-string">"mp4"</span>,
                    <span class="hljs-string">"embeddingMode"</span>: <span class="hljs-string">"AUDIO_VIDEO_COMBINED"</span>,
                    <span class="hljs-string">"source"</span>: {<span class="hljs-string">"bytes"</span>: video_base64}
                }
            }
        }
    
    response = bedrock.invoke_model(modelId=<span class="hljs-string">"amazon.nova-2-multimodal-embeddings-v1:0"</span>, body=json.dumps(request))
    <span class="hljs-keyword">return</span> json.loads(response[<span class="hljs-string">"body"</span>].read())[<span class="hljs-string">"embeddings"</span>][<span class="hljs-number">0</span>][<span class="hljs-string">"embedding"</span>]

<span class="hljs-keyword">def</span> <span class="hljs-title function_">semantic_match</span>(<span class="hljs-params">analysis, clips</span>):
    <span class="hljs-comment"># æå–è¦ç‚¹</span>
    points = [line.strip() <span class="hljs-keyword">for</span> line <span class="hljs-keyword">in</span> analysis.split(<span class="hljs-string">'\n'</span>) <span class="hljs-keyword">if</span> line.strip().startswith((<span class="hljs-string">'A.'</span>, <span class="hljs-string">'B.'</span>, <span class="hljs-string">'C.'</span>))]
    
    selected_clips = []
    <span class="hljs-comment"># ä¸ºæ¯ä¸ªè¦ç‚¹æ‰¾æœ€ä½³åŒ¹é…ç‰‡æ®µ</span>
    <span class="hljs-keyword">for</span> point <span class="hljs-keyword">in</span> points:
        text_emb = get_embedding(point)
        best_clip, best_similarity = <span class="hljs-literal">None</span>, -<span class="hljs-number">1</span>
        
        <span class="hljs-keyword">for</span> clip <span class="hljs-keyword">in</span> clips:
            video_emb = get_embedding(clip[<span class="hljs-string">'path'</span>], <span class="hljs-string">"video"</span>)
            similarity = cosine_similarity([text_emb], [video_emb])[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>]
            
            <span class="hljs-keyword">if</span> similarity &gt; best_similarity:
                best_similarity = similarity
                best_clip = {<span class="hljs-string">'path'</span>: clip[<span class="hljs-string">'path'</span>], <span class="hljs-string">'timestamp'</span>: clip[<span class="hljs-string">'timestamp'</span>], <span class="hljs-string">'similarity'</span>: similarity}
        
        <span class="hljs-keyword">if</span> best_clip <span class="hljs-keyword">and</span> best_similarity &gt; <span class="hljs-number">0.15</span>:
            selected_clips.append(best_clip)
    
    <span class="hljs-comment"># æŒ‰æ—¶é—´é¡ºåºæ’åº</span>
    selected_clips.sort(key=<span class="hljs-keyword">lambda</span> x: x[<span class="hljs-string">'timestamp'</span>])
    <span class="hljs-keyword">return</span> selected_clips

<span class="hljs-comment"># 4. æ‹¼æ¥é«˜å…‰è§†é¢‘ - FFmpegåˆå¹¶é€‰ä¸­ç‰‡æ®µ</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">create_video</span>(<span class="hljs-params">selected_clips, output_path</span>):
    <span class="hljs-comment"># ç”Ÿæˆæ‹¼æ¥åˆ—è¡¨</span>
    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">'concat_list.txt'</span>, <span class="hljs-string">'w'</span>) <span class="hljs-keyword">as</span> f:
        <span class="hljs-keyword">for</span> clip <span class="hljs-keyword">in</span> selected_clips:
            f.write(<span class="hljs-string">f"file '<span class="hljs-subst">{clip[<span class="hljs-string">'path'</span>]}</span>'\n"</span>)
    
    <span class="hljs-comment"># FFmpegæ‹¼æ¥</span>
    subprocess.run([<span class="hljs-string">'ffmpeg'</span>, <span class="hljs-string">'-f'</span>, <span class="hljs-string">'concat'</span>, <span class="hljs-string">'-safe'</span>, <span class="hljs-string">'0'</span>, <span class="hljs-string">'-i'</span>, <span class="hljs-string">'concat_list.txt'</span>, 
                   <span class="hljs-string">'-c'</span>, <span class="hljs-string">'copy'</span>, output_path, <span class="hljs-string">'-y'</span>, <span class="hljs-string">'-loglevel'</span>, <span class="hljs-string">'quiet'</span>])

<span class="hljs-comment"># demoï¼šå®Œæ•´æµç¨‹</span>
analysis = analyze_video(<span class="hljs-string">"sample/action.mp4"</span>)
clips = extract_clips(<span class="hljs-string">"sample/action.mp4"</span>, <span class="hljs-number">3</span>)
selected_clips = semantic_match(analysis, clips)
create_video(selected_clips, <span class="hljs-string">"highlight_video.mp4"</span>)
<span class="hljs-comment"># æµç¨‹: è§†é¢‘â†’Novaç†è§£â†’è§†é¢‘åˆ‡ç‰‡â†’MMEåŒ¹é…â†’æ‹¼æ¥</span>
<span class="hljs-comment"># è¿”å›: highlight_video.mp4</span>
</code></pre>
<p><strong>åº”ç”¨æ¡ˆä¾‹ï¼šå°ç‹—åŠ¨ç”»é«˜å…‰æå–</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b9817b0b608845fc95a51fed14edc4a3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767626353&amp;x-signature=dYiP9OyLvvJqE6RAdo7eUVLdSvg%3D" alt="image.png" loading="lazy"/></p>
<p>1minÂ <a href="https://link.juejin.cn?target=https%3A%2F%2Fpixabay.com%2Fzh%2Fvideos%2Fai-generated-house-dog-porch-192283%2F" target="_blank" title="https://pixabay.com/zh/videos/ai-generated-house-dog-porch-192283/" ref="nofollow noopener noreferrer">åŸå§‹è§†é¢‘</a>Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â </p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ead961aaf6d24c46ae6baeb88cecb376~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767626353&amp;x-signature=eciKhVjFh000h6mt%2BUEyCZoDrYI%3D" alt="image.png" loading="lazy"/></p>
<p>14s é«˜å…‰è§†é¢‘</p>
<p>è¯¥åŠ¨ç”»çš„å¤§éƒ¨åˆ†æ—¶é—´æ˜¯ä¸€åªæ©™è‰²å°ç‹—åœ¨è“è‰²å¤§é—¨å‰ç¡è§‰ï¼Œæœ‰3ä¸ªä¸»è¦çš„é«˜å…‰ç‰‡æ®µï¼š</p>
<ul>
<li>ç¬¬16såˆ°ç¬¬24sï¼šä¸€åªé»„è‰²å°ç‹—å‡ºç°åœ¨ç”»é¢ä¸­æ¡çƒ</li>
<li>ç¬¬26såˆ°ç¬¬32sï¼šä¸€åªå°çš„ç™½è‰²å’Œæ£•è‰²ç›¸é—´çš„å°ç‹—ä»é—¨å†…æ¢å‡º</li>
<li>ç¬¬46såˆ°ç¬¬52sï¼šé»„è‰²å°ç‹—ç»§ç»­å‡ºç°åœ¨ç”»é¢ä¸­è¿½é€çƒ</li>
</ul>
<p>æŒ‰ç…§æ¶æ„è®¾è®¡è¿›è¡Œç¬¬1æ­¥ï¼Œå°†æ•´ä¸ªè§†é¢‘ä½œä¸ºè¾“å…¥ï¼Œä½¿ç”¨VLMè¿›è¡Œè§†é¢‘åˆ†æï¼Œæå–é«˜å…‰è¦ç‚¹ä»¥åŠä¼˜å…ˆçº§ï¼š</p>
<pre><code class="hljs language-less" lang="less">**è§†é¢‘æ€»ç»“ï¼š**
è¿™ä¸ªè§†é¢‘å±•ç¤ºäº†ä¸€åªæ©™è‰²å°ç‹—åœ¨æˆ¿å­é—¨å£çš„é˜¶æ¢¯ä¸Šç¡è§‰ã€‚è§†é¢‘ä¸­çš„åœºæ™¯æ˜¯ä¸€ä¸ªå¸¦æœ‰èŠ±å›­å’Œé‚®ç®±çš„æˆ¿å­ï¼ŒèƒŒæ™¯ä¸­è¿˜æœ‰ä¸€è¾†è‡ªè¡Œè½¦åœåœ¨è·¯è¾¹ã€‚

**é«˜å…‰è¦ç‚¹åˆ—è¡¨ï¼š**
<span class="hljs-selector-tag">A</span>. <span class="hljs-selector-attr">[ä¼˜å…ˆçº§1]</span> <span class="hljs-selector-tag">-</span> <span class="hljs-number">0</span>:<span class="hljs-number">00</span> <span class="hljs-selector-tag">-</span> è§†é¢‘å¼€å§‹æ—¶ï¼Œå±•ç¤ºäº†æˆ¿å­å’Œæ©™è‰²å°ç‹—åœ¨é˜¶æ¢¯ä¸Šç¡è§‰çš„åœºæ™¯ã€‚
<span class="hljs-selector-tag">B</span>. <span class="hljs-selector-attr">[ä¼˜å…ˆçº§2]</span> <span class="hljs-selector-tag">-</span> <span class="hljs-number">0</span>:<span class="hljs-number">19</span> <span class="hljs-selector-tag">-</span> æ©™è‰²å°ç‹—å¼€å§‹ç¿»èº«å¹¶é†’æ¥ã€‚
<span class="hljs-selector-tag">C</span>. <span class="hljs-selector-attr">[ä¼˜å…ˆçº§1]</span> <span class="hljs-selector-tag">-</span> <span class="hljs-number">0</span>:<span class="hljs-number">21</span> <span class="hljs-selector-tag">-</span> é»„è‰²å°ç‹—è¢«ä¸€ä¸ªè“è‰²çš„çƒå¸å¼•ï¼Œå¹¶å¼€å§‹è¿½é€ã€‚
<span class="hljs-selector-tag">D</span>. <span class="hljs-selector-attr">[ä¼˜å…ˆçº§2]</span> <span class="hljs-selector-tag">-</span> <span class="hljs-number">0</span>:<span class="hljs-number">25</span> <span class="hljs-selector-tag">-</span> é»„è‰²å°ç‹—è¿½é€çƒçš„åŠ¨ä½œï¼Œå±•ç¤ºäº†å®ƒçš„æ´»æ³¼å’Œå¥½å¥‡å¿ƒã€‚
<span class="hljs-selector-tag">E</span>. <span class="hljs-selector-attr">[ä¼˜å…ˆçº§3]</span> <span class="hljs-selector-tag">-</span> <span class="hljs-number">0</span>:<span class="hljs-number">30</span> <span class="hljs-selector-tag">-</span> é»„è‰²å°ç‹—è¿½é€çƒçš„è¿‡ç¨‹ä¸­ï¼Œå±•ç¤ºäº†æˆ¿å­çš„ç»†èŠ‚å’ŒèƒŒæ™¯ã€‚
<span class="hljs-selector-tag">F</span>. <span class="hljs-selector-attr">[ä¼˜å…ˆçº§2]</span> <span class="hljs-selector-tag">-</span> <span class="hljs-number">0</span>:<span class="hljs-number">35</span> <span class="hljs-selector-tag">-</span> é»„è‰²å°ç‹—æœ€ç»ˆæ”¾å¼ƒè¿½é€ã€‚
<span class="hljs-selector-tag">G</span>. <span class="hljs-selector-attr">[ä¼˜å…ˆçº§3]</span> <span class="hljs-selector-tag">-</span> <span class="hljs-number">0</span>:<span class="hljs-number">40</span> <span class="hljs-selector-tag">-</span> è§†é¢‘ç»“å°¾ï¼Œå±•ç¤ºäº†æˆ¿å­å’ŒèŠ±å›­çš„å…¨æ™¯ã€‚
</code></pre>
<p>VLM æå–çš„é«˜å…‰è¦ç‚¹åŒ…å«7æ¡ï¼Œæ¯æ¡æœ‰å¯¹åº”ä¼˜å…ˆçº§ä¸æè¿°ï¼Œå¯ä»¥è§‚å¯Ÿåˆ°è§†é¢‘çš„å¤§éƒ¨åˆ†é«˜å…‰æƒ…èŠ‚è¢«æå–å‡ºä¸”æ•…äº‹è¾ƒä¸ºè¿è´¯ã€‚åœ¨è¯­ä¹‰åŒ¹é…é˜¶æ®µï¼ŒNova MMEè¿›è¡Œå¤šæ¨¡æ€åµŒå…¥ç”Ÿæˆï¼Œèƒ½å¤Ÿæ•æ‰åˆ°è§†é¢‘ç‰‡æ®µä¸­çš„æ ¸å¿ƒåŠ¨ä½œå’Œåœºæ™¯ç‰¹å¾ï¼Œè€Œä¸å®Œå…¨ä¾èµ–äºå…·ä½“çš„èº«ä»½è¯†åˆ«ã€‚ä¾‹å¦‚ï¼Œå½“VLMæè¿°ä¸­æåˆ°â€é»„è‰²å°ç‹—è¿½é€çƒâ€æ—¶ï¼Œæ— è®ºæ‰§è¡Œè¿™ä¸ªåŠ¨ä½œçš„æ˜¯æ©™è‰²å°ç‹—è¿˜æ˜¯é»„è‰²å°ç‹—ï¼Œç”±äºâ€è¿½é€çƒâ€è¿™ä¸€åŠ¨ä½œåœ¨åµŒå…¥ç©ºé—´ä¸­äº§ç”Ÿç›¸ä¼¼çš„è¯­ä¹‰è¡¨ç¤ºï¼Œç›¸ä¼¼åº¦è®¡ç®—éƒ½èƒ½å¤ŸåŒ¹é…åˆ°åŒ…å«æ­¤ç±»åŠ¨ä½œçš„è§†é¢‘ç‰‡æ®µï¼Œä»è€Œå®ç°å‡†ç¡®çš„è¯­ä¹‰å…³è”ã€‚è¿™ç§è¯­ä¹‰å±‚é¢çš„åŒ¹é…æœºåˆ¶ä½¿å¾—ç³»ç»Ÿå…·æœ‰ä¸€å®šçš„å®¹é”™èƒ½åŠ›ï¼šå³ä½¿æ–‡æœ¬æè¿°åœ¨ç»†èŠ‚ä¸Šå­˜åœ¨åå·®ï¼Œåªè¦æ ¸å¿ƒçš„åŠ¨ä½œã€åœºæ™¯æˆ–æƒ…æ„Ÿç‰¹å¾ä¿æŒä¸€è‡´ï¼Œç›¸ä¼¼åº¦è®¡ç®—ä»èƒ½æ‰¾åˆ°æ­£ç¡®çš„è§†é¢‘ç‰‡æ®µï¼Œä¿è¯äº†è¯­ä¹‰ä¸Šçš„è¿è´¯æ€§ã€‚æœ€åæ‹¼æ¥æ—¶æ ¹æ®è§†é¢‘ç‰‡æ®µçš„æ—¶é—´é¡ºåºæ‹¼æ¥ä¿è¯äº†æ—¶åºä¸Šçš„è¿è´¯æ€§ã€‚<br/>
æ¥ä¸‹æ¥è¿›è¡Œç¬¬2ï½4æ­¥çš„è§†é¢‘ç‰‡æ®µåˆ‡åˆ†ï¼ˆ2sä¸ºåˆ‡åˆ†é—´éš”ï¼‰ï¼ŒNova MMEåµŒå…¥ç”Ÿæˆä»¥åŠè¯­ä¹‰åŒ¹é…ï¼Œæ¯ä¸ªè¦ç‚¹åŒ¹é…çš„è§†é¢‘ç‰‡æ®µç»“æœå¦‚ä¸‹è¡¨æ‰€ç¤ºï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/964ccb84f999432698ea8dad53419ebc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767626353&amp;x-signature=jPsfH%2B4VlxH1nTy%2B2gxWV2N7PJU%3D" alt="image.png" loading="lazy"/></p>
<p>ä»å®é™…ç»“æœçœ‹ï¼Œå°½ç®¡VLMåœ¨ç‹—çš„å“ç§è¯†åˆ«ä¸Šå­˜åœ¨æ··æ·†ï¼Œä½†æœ€ç»ˆé€‰ä¸­çš„ç‰‡æ®µï¼ˆ20-24ç§’ã€26-32ç§’ã€50-52ç§’ç­‰ï¼‰ä»ç„¶å‡†ç¡®è¦†ç›–äº†é¢„æœŸçš„é«˜å…‰æ—¶æ®µï¼Œè¯æ˜äº†è¿™ç§åŸºäºè¯­ä¹‰åŒ¹é…çš„æ–¹æ³•åœ¨å¤„ç†æè¿°ä¸ç²¾ç¡®é—®é¢˜ä¸Šçš„é²æ£’æ€§ã€‚ç”Ÿæˆçš„é«˜å…‰è§†é¢‘ä¸­åŒ…å«äº†æåˆ°çš„3ä¸ªé«˜å…‰ç‰‡æ®µï¼Œä¸”ç‰‡æ®µä¹‹é—´çš„è¡”æ¥ä¹Ÿè¾ƒä¸ºè‡ªç„¶ã€‚</p>
<h4 data-id="heading-11">2.2 è·¨è§†é¢‘å†…å®¹é©±åŠ¨çš„é«˜å…‰å‰ªè¾‘</h4>
<p>å½“é«˜å…‰å‰ªè¾‘åœºæ™¯æœ‰è¾ƒé«˜çš„è‡ªå®šä¹‰å‰§æœ¬éœ€æ±‚ï¼Œéœ€è¦å¾®è°ƒè§†é¢‘æ‹¼æ¥é¡ºåºï¼Œä»¥åŠéœ€è¦åŸºäºå¤§é‡è§†é¢‘åª’ä½“åº“ä¼˜é€‰ç‰‡æ®µçš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹2.1æ–¹æ¡ˆç”Ÿæˆçš„åµŒå…¥åŸºäºç”¨æˆ·å®šä¹‰çš„å‰§æœ¬æ–‡å­—ï¼ˆå¯é€‰ï¼šå†ç”¨promptå¢å¼ºï¼‰è¿›è¡Œæ£€ç´¢ã€‚</p>
<p>æ¯”å¦‚åœ¨åª’ä½“è¡Œä¸šåœºæ™¯ä¸­ï¼Œå½“å‰ªè¾‘éœ€æ±‚ä¸ä»…ä»…æ˜¯â€œæå–é«˜å…‰â€ï¼Œè€Œæ˜¯è¦æŒ‰ç…§å“ç‰Œæˆ–ç”¨æˆ·å®šä¹‰çš„â€œå‰§æœ¬â€æ¥è¿ˆå‡ºå™äº‹ã€ç»“æ„å’Œé£æ ¼çš„æ­¥ä¼ï¼Œå¹¶ä¸”æ‹¥æœ‰ä¸€ä¸ªåºå¤§çš„ç´ æåº“æ—¶ï¼Œæˆ‘ä»¬ä¾¿å¯ä»¥é‡‡ç”¨â€œç”¨æˆ·è¾“å…¥çš„å‰ªè¾‘éœ€æ±‚ + è·¨è§†é¢‘æ£€ç´¢â€è¿™ä¸€æŠ€æœ¯è·¯å¾„ã€‚å…·ä½“æ¥è¯´ï¼Œç”¨æˆ·é¦–å…ˆè¾“å…¥å…¶å‰ªè¾‘æ„å›¾ï¼Œä¾‹å¦‚â€œå…ˆå±•ç¤ºäº§å“é—®ä¸–ã€å†å±•ç¤ºç”¨æˆ·ä½“éªŒã€æœ€åå±•ç¤ºå“ç‰Œå£å·â€ï¼Œè¿™ä¸€å‰§æœ¬ä¼šè¢«ç³»ç»Ÿè½¬åŒ–ä¸ºä¸€ç³»åˆ—æè¿°æ€§äº‹ä»¶ï¼ˆå¦‚â€œäº§å“äº®ç›¸â€ã€â€œç”¨æˆ·å¾®ç¬‘è¯•ç”¨â€ã€â€œå“ç‰ŒLogoå‡ºç°â€ï¼‰ã€‚æ¥ç€ç³»ç»Ÿå¯¹æ•´ä¸ªç´ æåº“ä¸­çš„æ¯æ¡è§†é¢‘æˆ–ç‰‡æ®µç”ŸæˆåµŒå…¥å‘é‡ï¼Œè¿›è€Œå°†ç”¨æˆ·çš„æ¯ä¸€ä¸ªäº‹ä»¶æè¿°ä½œä¸ºæ£€ç´¢æŸ¥è¯¢ï¼Œä¸åº“ä¸­å„ç‰‡æ®µçš„åµŒå…¥è¿›è¡Œç›¸ä¼¼åº¦åŒ¹é…ã€‚è¿™æ ·ï¼Œç³»ç»Ÿä¸ä»…é™äºä»å•ä¸ªè§†é¢‘é€‰å–é«˜å…‰ï¼Œè€Œæ˜¯å¯ä»¥è·¨è§†é¢‘æ£€ç´¢ï¼šæ¯”å¦‚ï¼Œäº‹ä»¶ï¼‘å¯èƒ½åŒ¹é…ç«Ÿç„¶æ˜¯å“ç‰Œæ‹æ‘„ç‰‡ï¼Œäº‹ä»¶ï¼’å¯èƒ½åŒ¹é…ç›´æ’­ç‰‡æ®µï¼Œäº‹ä»¶ï¼“æ¥è‡ªå®£ä¼ ç‰‡ã€‚æœ€åï¼ŒæŒ‰ç…§ç”¨æˆ·å‰§æœ¬è®¾å®šçš„é¡ºåºï¼Œå°†è¿™äº›åŒ¹é…å‡ºçš„æ¥è‡ªä¸åŒè§†é¢‘çš„ç‰‡æ®µç»„åˆèµ·æ¥ï¼Œå½¢æˆä¸€ä¸ªç»“æ„åŒ–ã€è¿è´¯è€Œå¯Œæœ‰å“ç‰Œé£æ ¼çš„é«˜å…‰å‰ªè¾‘ã€‚</p>
<h4 data-id="heading-12">2.3 å†å²ç´ æé©±åŠ¨çš„æ¨¡æ¿åŒ–é«˜å…‰ç”Ÿæˆ</h4>
<p>è§†é¢‘åµŒå…¥æŠ€æœ¯å±•ç°äº†æé«˜çš„å¯å¤ç”¨æ€§ã€‚æˆ‘ä»¬å¯ä»¥å°†å†å²ä¸Šå·²ç»è¢«å‰ªè¾‘ä¸ºé«˜å…‰çš„ç‰‡æ®µâ€”â€”æˆ–è¢«äººå·¥åˆ¤æ–­ä¸ºâ€œç²¾å½©æ—¶åˆ»â€çš„ç´ æâ€”â€”ç³»ç»Ÿåœ°æ”¶é›†èµ·æ¥ï¼Œå½¢æˆä¸€ä¸ªæ ·æœ¬åº“ã€‚æ ·æœ¬åº“æ­å»ºå¯é€‰æ‹©å¦‚Amazon Opensearch Serviceï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Faws.amazon.com%2Fcn%2Fblogs%2Fchina%2Fopensearch-rag-system-implementation%2F" target="_blank" title="https://aws.amazon.com/cn/blogs/china/opensearch-rag-system-implementation/" ref="nofollow noopener noreferrer">åšå®¢</a>ï¼‰ï¼Œäºšé©¬é€Šäº‘ç§‘æŠ€çš„partnerå‘é‡æ•°æ®åº“å¦‚Zillizï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Faws.amazon.com%2Fmarketplace%2Fpp%2Fprodview-iqbidum7feuio%3Fsr%3D0-1%26ref_%3Dbeagle%26applicationId%3DAWSMPContessa" target="_blank" title="https://aws.amazon.com/marketplace/pp/prodview-iqbidum7feuio?sr=0-1&amp;ref_=beagle&amp;applicationId=AWSMPContessa" ref="nofollow noopener noreferrer">partner marketplace link</a>ï¼‰ã€‚</p>
<p>å¯¹äºåº“ä¸­æ¯ä¸€ä¸ªé«˜å…‰ç‰‡æ®µï¼Œæˆ‘ä»¬ä¸ä»…ä¸ºå…¶ç”ŸæˆåµŒå…¥å‘é‡è¡¨ç¤ºï¼Œè¿˜å¯æŒ‰ç±»åˆ«æˆ–é£æ ¼è¿›è¡Œæ ‡ç­¾ï¼ˆä¾‹å¦‚ â€œä½“è‚²æ¯”èµ›â€â€œæ¸¸æˆç›´æ’­â€â€œæ¼”è®²è®¿è°ˆâ€ ç­‰ï¼‰ï¼Œå¹¶ä¸ºç‰‡æ®µé™„åŠ ä¸°å¯Œçš„å…ƒæ•°æ®ï¼Œå¦‚æ‰€å±è§†é¢‘ç±»åˆ«ã€ç‰‡æ®µç®€ä»‹ã€ç²¾å½©è¯„åˆ†ç­‰ã€‚è¿™ä¸€æœºåˆ¶ä½¿å¾—åç»­çš„æ–°è§†é¢‘å¯ä»¥è·¨è§†é¢‘æ£€ç´¢ï¼šåœ¨é¢å¯¹ä¸€æ¡æ–°æ‹æ‘„è§†é¢‘æ—¶ï¼Œç³»ç»Ÿé¦–å…ˆå¯¹å…¶è¿›è¡Œåˆ†æï¼ˆåŒ…æ‹¬ VLM æ‘˜è¦æˆ–ç²—åˆ†ç±»ï¼‰ï¼Œç„¶åå°†å…¶åˆ‡åˆ†ä¸º2â€“3 ç§’çš„ç‰‡æ®µå¹¶ç”ŸæˆåµŒå…¥å‘é‡ã€‚æ¥ä¸‹æ¥ï¼Œè¿™äº›ç‰‡æ®µå°†ä¸æ ·æœ¬åº“ä¸­å·²æœ‰çš„é«˜å…‰åµŒå…¥è¿›è¡Œç›¸ä¼¼åº¦åŒ¹é…â€”â€”å¦‚æœæŸä¸ªæ–°è§†é¢‘ç‰‡æ®µåœ¨è§†è§‰æˆ–è¯­ä¹‰ä¸Šä¸å†å²é«˜å…‰ç‰‡æ®µé«˜åº¦ç›¸ä¼¼ï¼Œå°±å¯å°†å…¶æ ‡è®°ä¸ºé«˜å…‰å€™é€‰ã€‚åŒæ—¶ï¼Œå¦‚æœæ–°è§†é¢‘æ‰€å±ç±»åˆ«æ˜ç¡®ï¼ˆæ¯”å¦‚ç¯®çƒæ¯”èµ›ï¼‰ï¼Œç³»ç»Ÿè¿˜å¯å‚è€ƒè¯¥ç±»åˆ«è¿‡å»å½¢æˆçš„â€œé«˜å…‰å‰§æœ¬â€â€”â€”ä¾‹å¦‚å…¸å‹è¿›çƒã€æ‰£ç¯®ã€å…³é”®ä¸‰åˆ†ã€ç»æ€è¿™ä¸€é¡ºåºâ€”â€”å¹¶åœ¨æ ·æœ¬åº“é€‰ç‰‡ä¸­ä¼˜å…ˆåŒ¹é…è¿™äº›å…¸å‹äº‹ä»¶ã€‚å°†åŒ¹é…å‡ºçš„ç‰‡æ®µï¼ˆå¯èƒ½æ¥è‡ªä¸åŒåŸè§†é¢‘ï¼‰æŒ‰å‰§æœ¬é¡ºåºç»„åˆæ‹¼æ¥ï¼Œå°±èƒ½ç”Ÿæˆç¬¦åˆè§‚ä¼—é¢„æœŸèŠ‚å¥ã€ç»“æ„è¿è´¯çš„é«˜å…‰æˆç‰‡ã€‚</p>
<p>ä»¥ä¸‹ä¸ºæµç¨‹å›¾ï¼š</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fd2908q01vomqb2.cloudfront.net%2F472b07b9fcf2c2451e8781e944bf5f77cd8457c8%2F2025%2F11%2F18%2Fautomated-video-highlight-clipping-using-amazon-nova-model-14.png" target="_blank" title="https://d2908q01vomqb2.cloudfront.net/472b07b9fcf2c2451e8781e944bf5f77cd8457c8/2025/11/18/automated-video-highlight-clipping-using-amazon-nova-model-14.png" ref="nofollow noopener noreferrer"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6d82e80cdbb64e0e8ce2570d2bb8df0e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767626353&amp;x-signature=X%2BxVwohO0WNm7tqwWAh%2Bg%2FpwG00%3D" alt="" loading="lazy"/></a></p>
<h3 data-id="heading-13">b. VLM+MMEé“¾è·¯ä¼˜åŒ–æ€è·¯</h3>
<p>åœ¨ç³»ç»Ÿè®¾è®¡é˜¶æ®µï¼Œæˆæœ¬è€ƒé‡éå¸¸é‡è¦ã€‚å¦‚ä¸éœ€è¦ä¸ºè§†é¢‘ embedding æ”¯ä»˜æŒä¹…åŒ–å­˜å‚¨è´¹ç”¨ï¼Œä»…éœ€è¦è€ƒè™‘æ¨¡å‹æ¨ç†è´¹ç”¨ï¼ˆå³ Nova æˆ–åµŒå…¥æ¨¡å‹ MME çš„è¿è¡Œè´¹ç”¨ï¼‰ã€‚å¦‚éœ€å‚¨å¤‡å†å²ç´ æåº“â€”â€”éœ€è¦å­˜å‚¨ embeddingï¼Œå› æ­¤è¿˜è¦è€ƒè™‘å­˜å‚¨å’Œæ£€ç´¢æˆæœ¬ã€‚é™¤äº†å­˜å‚¨å¤–ï¼Œè¿˜æœ‰ä¸€äº›<strong>æˆæœ¬ä¼˜åŒ–æ‰‹æ®µ</strong>ï¼Œå¯ä»¥åœ¨æ•´ä¸ªæµç¨‹ä¸­é™ä½è®¡ç®—ï¼å­˜å‚¨ï¼å¸¦å®½ç­‰èµ„æºæ¶ˆè€—ã€‚ä»¥ä¸‹æ˜¯å‡ é¡¹å»ºè®®ï¼š</p>
<p><strong>è§†é¢‘å‹ç¼© + å†è¯†åˆ«</strong><br/>
å¯ä»¥å…ˆå°†åŸå§‹è§†é¢‘åšè½»é‡å‹ç¼©æˆ–é™å¸§å¤„ç†ï¼ˆé™ä½åˆ†è¾¨ç‡ã€é™ä½å¸§ç‡ï¼‰ä»¥å‡å°‘è®¡ç®—ï¼å­˜å‚¨å¼€é”€ã€‚åˆ©ç”¨å‹ç¼©åçš„è§†é¢‘ç”¨VLMè¯†åˆ«å“ªäº›ç‰‡æ®µå¯èƒ½æ˜¯é«˜å…‰ï¼Œç„¶ååœ¨åŸå§‹è§†é¢‘ä¸­æŒ‰ç…§æ’åºç»“æœé€‰å–å¯¹åº”é«˜åˆ†ç‰‡æ®µï¼Œå†æ‹¼æ¥æˆæœ€ç»ˆå‰ªè¾‘ã€‚è¿™æ ·å¯ä»¥é¿å…å¯¹é«˜åˆ†è¾¨ç‡è§†é¢‘VLMç†è§£/MMEåµŒå…¥ã€‚</p>
<p><strong>åˆç­›è¿‡æ»¤ + å†åµŒå…¥</strong><br/>
åœ¨åšç²¾ç»†çš„åµŒå…¥åŒ¹é…ä¹‹å‰ï¼Œå…ˆåšä¸€ä¸ªç²—ç­›é˜¶æ®µä»¥å‡å°‘å¾…å¤„ç†ç‰‡æ®µæ•°é‡ï¼Œä»è€Œé™ä½åç»­åµŒå…¥è®¡ç®—é‡ã€‚ç²—ç­›å¯é€šè¿‡å‡ ç§æ–¹å¼å®ç°ï¼š</p>
<ol>
<li><strong>é  VLM è¾“å‡ºå¤§è‡´ timestamp</strong>ï¼šç»“åˆæ–¹æ³•1ï¼Œè°ƒç”¨ VLM å…ˆå¯¹è§†é¢‘åšå¿«é€Ÿåˆ†æï¼Œè¾“å‡ºå¯èƒ½çš„é«˜å…‰æ—¶é—´æ®µï¼ˆä¾‹å¦‚â€œ00:12â€“00:16â€ã€â€œ04:30â€“04:35â€ï¼‰ï¼Œç„¶ååªå¯¹è¿™äº›å€™é€‰åŒºæ®µåšåˆ‡ç‰‡ + åµŒå…¥åŒ¹é…ã€‚æå‡æ–¹æ³•1çš„ç²¾åº¦ï¼ŒåŒæ—¶æ— éœ€å¯¹å…¨éƒ¨è§†é¢‘åšåµŒå…¥å¤„ç†ã€‚</li>
<li><strong>é å»é‡</strong>ï¼šå¦‚æœè§†é¢‘å­˜åœ¨å¤§é‡â€œå¹³æ·¡â€â€œé‡å¤â€çš„ç‰‡æ®µï¼Œå¯ä»¥å…ˆç”¨å¸§å·®å¼‚è§„åˆ™åšå»é‡ï¼Œåˆ é™¤é‡å¤å†…å®¹ï¼Œå‰©ä½™ç‰‡æ®µå³ä¸ºâ€œäº®ç‚¹å€™é€‰â€ï¼šå¦‚å¸§ä¹‹é—´å˜åŒ–ç‡ã€åœºæ™¯åˆ‡æ¢æ£€æµ‹ã€è§†è§‰å·®å¼‚é˜ˆå€¼åšå¿«é€Ÿè¿‡æ»¤ï¼Œä»…ä¿ç•™â€œå˜åŒ–å¤§â€çš„åŒºæ®µä¾›åç»­å¤„ç†ã€‚</li>
<li><strong>é å‰ç½®é€»è¾‘</strong>ï¼šåˆ©ç”¨å…¶ä»–æ¨¡æ€ï¼ˆå¦‚éŸ³é¢‘ã€è¿åŠ¨æ£€æµ‹ï¼‰åšé¢„ç­›ã€‚æ¯”å¦‚éŸ³é¢‘éŸ³é‡å˜å¤§ã€é¢‘ç‡å˜åŒ–å‰§çƒˆå¯èƒ½å¯¹åº”â€œé«˜æ½®ã€é«˜å…‰â€ç‰‡æ®µï¼ˆå¦‚èµ›è½¦è½°é¸£ã€æ¼”å”±é«˜æ½®ï¼‰ï¼›æˆ–è§†è§‰ä¸­æ£€æµ‹åˆ°å¿«é€Ÿè¿åŠ¨ï¼å‰ªè¾‘å˜åŒ–ä¹Ÿå¯ä½œä¸ºå€™é€‰ã€‚è¿™æ ·å¯å‡å°‘å¯¹è§†è§‰åµŒå…¥çš„éå†ã€‚</li>
</ol>
<p>è¿™ç§â€œç²— â†’ ç²¾â€ä¸¤çº§ç­›é€‰æ–¹å¼èƒ½æ˜¾è‘—é™ä½æ•´ä½“ç³»ç»Ÿè´Ÿè½½ã€‚</p>
<h4 data-id="heading-14">æ•ˆæœä¼˜åŒ–æ€è·¯</h4>
<p><strong>åˆ‡ç‰‡ç²’åº¦ä¸é«˜å…‰æ—¶é•¿å¼¹æ€§</strong><br/>
å®é™…åœºæ™¯ä¸­ï¼Œé«˜å…‰æ—¶é•¿å¹¶ä¸å›ºå®šï¼ˆå¯èƒ½ä¸º 3 ç§’ï¼5 ç§’ï¼15 ç§’ç­‰ï¼‰ï¼Œå› æ­¤åœ¨åˆ‡ç‰‡è®¾è®¡æ—¶éœ€è¦çµæ´»ã€‚ä¸€ä¸ªç®€æ˜å·¥ç¨‹å®ç°æ–¹å¼æ˜¯ï¼š<br/>
<strong>å…ˆç”¨æœ€å°ç»†ç²’åº¦åˆ‡ç‰‡</strong>ï¼ˆä¾‹å¦‚ 1-2 ç§’ï¼‰éå†å…¨è§†é¢‘ã€‚å¯¹äºæ¯ä¸ªé«˜å…‰æè¿°ï¼ˆæ¥è‡ª VLMï¼‰ï¼Œåœ¨åŒ¹é…å‡ºçš„ç‰‡æ®µåŸºç¡€ä¸Šï¼Œå¯<strong>åˆå¹¶ç›¸é‚»åˆ‡ç‰‡</strong>ã€æˆ–è€…æ ¹æ®ä¼˜å…ˆçº§æ‰©å±•æ—¶é—´æ®µï¼Œä»¥å½¢æˆè¾ƒé•¿çš„é«˜å…‰ç‰‡æ®µã€‚åŒ¹é…é€»è¾‘å¯ä¸ºï¼šå¯¹äºæŸä¸€é«˜å…‰æè¿°ï¼Œæ‰¾åˆ°æ‰€æœ‰ç›¸ä¼¼åº¦ â‰¥ é˜ˆå€¼ï¼ˆä¾‹å¦‚ 0.5ï¼‰ çš„ç»†åˆ‡ç‰‡é›†åˆï¼›ç„¶ååˆå¹¶è¿™äº›ç›¸é‚»åˆ‡ç‰‡ï¼ˆæ—¶é—´ä¸Šè¿ç»­æˆ–ç›¸è¿‘ï¼‰ä¸ºä¸€ä¸ªå®Œæ•´é«˜å…‰åŒºé—´ï¼Œå†æŒ‰æ—¶é—´é¡ºåºæ‹¼æ¥ã€‚<br/>
è¿™æ ·æ—¢ä¿è¯äº†ç³»ç»Ÿèƒ½å¤Ÿçµæ´»åº”å¯¹ä¸åŒé•¿åº¦çš„é«˜å…‰ï¼Œåˆé¿å…ç¡¬ç¼–ç â€œé«˜å…‰å¿…ä¸º3 ç§’â€çš„é™åˆ¶ã€‚</p>
<h4 data-id="heading-15"><strong>2.4 VLM+MMEï¼ˆè§†é¢‘æŠ½å¸§-å›¾ç‰‡åµŒå…¥ï¼‰</strong></h4>
<p>æ­¤æ–¹æ¡ˆä¸æ–¹æ¡ˆ 2 çš„æµç¨‹ç±»ä¼¼ï¼Œä½†åŒºåˆ«åœ¨äºâ€œåµŒå…¥å¯¹è±¡â€ä»è§†é¢‘ç‰‡æ®µå˜ä¸ºâ€œæŠ½å¸§å›¾ç‰‡â€ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼šå¯¹è§†é¢‘æŠ½å–å…³é”®å¸§ï¼Œå¯¹è¿™äº›é™æ€å¸§ç”Ÿæˆå›¾ç‰‡åµŒå…¥ï¼›åŒæ—¶ç”± VLM ç”Ÿæˆé«˜å…‰æè¿°æ–‡æœ¬ï¼›ç„¶åå¯¹å›¾ç‰‡åµŒå…¥ä¸æè¿°æ–‡æœ¬åšåŒ¹é…ï¼Œä»è¿™äº›åŒ¹é…ç»“æœæ¨æ–­é«˜å…‰çš„æ—¶é—´ç‚¹ã€‚æŠ€æœ¯ä¸Šè¿™ç§æ–¹æ³•é™ä½äº†å¯¹å®Œæ•´è§†é¢‘åˆ‡ç‰‡å’Œæ—¶åºå»ºæ¨¡çš„ä¾èµ–ï¼Œä½¿å®ç°æ›´è½»é‡ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/74baea9658234d30ac9faea5f02a6033~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767626353&amp;x-signature=aTxuOP0jvXfKUu09jm3DO9Tn3FI%3D" alt="image.png" loading="lazy"/></p>
<p><strong>æ¡ˆä¾‹ä»£ç ï¼š</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> boto3
<span class="hljs-keyword">import</span> json
<span class="hljs-keyword">import</span> subprocess
<span class="hljs-keyword">import</span> base64
<span class="hljs-keyword">from</span> sklearn.metrics.pairwise <span class="hljs-keyword">import</span> cosine_similarity

bedrock = boto3.client(<span class="hljs-string">'bedrock-runtime'</span>, region_name=<span class="hljs-string">'us-east-1'</span>)

<span class="hljs-comment"># 1. VLMè§†é¢‘åˆ†æ</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">analyze_video</span>(<span class="hljs-params">video_path</span>):
    <span class="hljs-comment"># åŒ â€œ2.1 åŸºæœ¬æ–¹æ¡ˆâ€éƒ¨åˆ†æ¡ˆä¾‹ä»£ç </span>
    <span class="hljs-keyword">pass</span>
    
<span class="hljs-comment"># 2. FFmpegæŠ½å¸§ï¼šå°†è§†é¢‘æŠ½å¸§ä¸ºå›¾ç‰‡ç”¨äºåç»­è¯­ä¹‰åŒ¹é…</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">extract_frames</span>(<span class="hljs-params">video_path, interval=<span class="hljs-number">1</span></span>):
    duration = <span class="hljs-built_in">float</span>(subprocess.check_output([<span class="hljs-string">'ffprobe'</span>, <span class="hljs-string">'-v'</span>, <span class="hljs-string">'quiet'</span>, <span class="hljs-string">'-show_entries'</span>, <span class="hljs-string">'format=duration'</span>, <span class="hljs-string">'-of'</span>, <span class="hljs-string">'csv=p=0'</span>, video_path]))
    
    frames = []
    <span class="hljs-keyword">for</span> i, t <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(<span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>, <span class="hljs-built_in">int</span>(duration), interval)):
        frame_path = <span class="hljs-string">f"frame_<span class="hljs-subst">{i:04d}</span>.jpg"</span>
        subprocess.run([<span class="hljs-string">'ffmpeg'</span>, <span class="hljs-string">'-i'</span>, video_path, <span class="hljs-string">'-ss'</span>, <span class="hljs-built_in">str</span>(t), <span class="hljs-string">'-vframes'</span>, <span class="hljs-string">'1'</span>, frame_path, <span class="hljs-string">'-y'</span>, <span class="hljs-string">'-loglevel'</span>, <span class="hljs-string">'quiet'</span>])
        frames.append({<span class="hljs-string">'timestamp'</span>: t, <span class="hljs-string">'path'</span>: frame_path})
    <span class="hljs-keyword">return</span> frames

<span class="hljs-comment"># 3. è¯­ä¹‰åŒ¹é…ï¼šNova MMEç”ŸæˆåµŒå…¥åè®¡ç®—è¦ç‚¹ä¸å›¾ç‰‡ç›¸ä¼¼åº¦</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">get_embedding</span>(<span class="hljs-params">content, content_type=<span class="hljs-string">"text"</span></span>):
    <span class="hljs-comment"># ç”ŸæˆåµŒå…¥</span>
    <span class="hljs-keyword">if</span> content_type == <span class="hljs-string">"text"</span>:
        data = {<span class="hljs-string">"text"</span>: {<span class="hljs-string">"value"</span>: content}}
    <span class="hljs-keyword">else</span>:
        <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(content, <span class="hljs-string">'rb'</span>) <span class="hljs-keyword">as</span> f:
            data = {<span class="hljs-string">"image"</span>: {<span class="hljs-string">"format"</span>: <span class="hljs-string">"jpeg"</span>, <span class="hljs-string">"source"</span>: {<span class="hljs-string">"bytes"</span>: base64.b64encode(f.read()).decode()}}}
    
    response = bedrock.invoke_model(
        modelId=<span class="hljs-string">"amazon.nova-2-multimodal-embeddings-v1:0"</span>,
        body=json.dumps({<span class="hljs-string">"taskType"</span>: <span class="hljs-string">"SINGLE_EMBEDDING"</span>, <span class="hljs-string">"singleEmbeddingParams"</span>: data})
    )
    <span class="hljs-keyword">return</span> json.loads(response[<span class="hljs-string">"body"</span>].read())[<span class="hljs-string">"embeddings"</span>][<span class="hljs-number">0</span>][<span class="hljs-string">"embedding"</span>]

<span class="hljs-keyword">def</span> <span class="hljs-title function_">semantic_match</span>(<span class="hljs-params">analysis, frames</span>):
    <span class="hljs-comment"># æå–è¦ç‚¹</span>
    points = [line.strip() <span class="hljs-keyword">for</span> line <span class="hljs-keyword">in</span> analysis.split(<span class="hljs-string">'\n'</span>) <span class="hljs-keyword">if</span> line.strip().startswith((<span class="hljs-string">'A.'</span>, <span class="hljs-string">'B.'</span>, <span class="hljs-string">'C.'</span>))]
    
    selected_clips = []
    <span class="hljs-comment"># é’ˆå¯¹æ¯ä¸€ä¸ªè¦ç‚¹ï¼ŒåŒ¹é…å¤„Top10æœ€ç›¸å…³çš„å¸§é›†åˆ</span>
    <span class="hljs-keyword">for</span> point <span class="hljs-keyword">in</span> points:
        text_emb = get_embedding(point)
        best_frames = []
        
        <span class="hljs-keyword">for</span> frame <span class="hljs-keyword">in</span> frames:
            img_emb = get_embedding(frame[<span class="hljs-string">'path'</span>], <span class="hljs-string">"image"</span>)
            similarity = cosine_similarity([text_emb], [img_emb])[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>]
            <span class="hljs-keyword">if</span> similarity &gt; <span class="hljs-number">0.1</span>:
                best_frames.append({<span class="hljs-string">'timestamp'</span>: frame[<span class="hljs-string">'timestamp'</span>], <span class="hljs-string">'similarity'</span>: similarity})
        
        best_frames.sort(key=<span class="hljs-keyword">lambda</span> x: x[<span class="hljs-string">'similarity'</span>], reverse=<span class="hljs-literal">True</span>)
        selected_clips.extend(best_frames[:<span class="hljs-number">10</span>])  <span class="hljs-comment"># Top10</span>
    
    <span class="hljs-keyword">return</span> selected_clips

<span class="hljs-comment"># 4. ç”Ÿæˆé«˜å…‰è§†é¢‘</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">create_video</span>(<span class="hljs-params">video_path, clips, output_path</span>):
    clips.sort(key=<span class="hljs-keyword">lambda</span> x: x[<span class="hljs-string">'timestamp'</span>])
    
    <span class="hljs-comment"># æŒ‰ç…§å¸§é›†åˆæå–ç‰‡æ®µ</span>
    temp_clips = []
    <span class="hljs-keyword">for</span> i, clip <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(clips):
        clip_path = <span class="hljs-string">f"clip_<span class="hljs-subst">{i}</span>.mp4"</span>
        subprocess.run([<span class="hljs-string">'ffmpeg'</span>, <span class="hljs-string">'-i'</span>, video_path, <span class="hljs-string">'-ss'</span>, <span class="hljs-built_in">str</span>(clip[<span class="hljs-string">'timestamp'</span>]), <span class="hljs-string">'-t'</span>, <span class="hljs-string">'2'</span>, clip_path, <span class="hljs-string">'-y'</span>, <span class="hljs-string">'-loglevel'</span>, <span class="hljs-string">'quiet'</span>])
        temp_clips.append(clip_path)
    
    <span class="hljs-comment"># æ‹¼æ¥</span>
    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">'list.txt'</span>, <span class="hljs-string">'w'</span>) <span class="hljs-keyword">as</span> f:
        <span class="hljs-keyword">for</span> clip <span class="hljs-keyword">in</span> temp_clips:
            f.write(<span class="hljs-string">f"file '<span class="hljs-subst">{clip}</span>'\n"</span>)
    
    subprocess.run([<span class="hljs-string">'ffmpeg'</span>, <span class="hljs-string">'-f'</span>, <span class="hljs-string">'concat'</span>, <span class="hljs-string">'-safe'</span>, <span class="hljs-string">'0'</span>, <span class="hljs-string">'-i'</span>, <span class="hljs-string">'list.txt'</span>, <span class="hljs-string">'-c'</span>, <span class="hljs-string">'copy'</span>, output_path, <span class="hljs-string">'-y'</span>, <span class="hljs-string">'-loglevel'</span>, <span class="hljs-string">'quiet'</span>])

<span class="hljs-comment"># demoï¼šå®Œæ•´æµç¨‹</span>
analysis = analyze_video(<span class="hljs-string">"input.mp4"</span>)
frames = extract_frames(<span class="hljs-string">"input.mp4"</span>)
clips = semantic_match(analysis, frames)
create_video(<span class="hljs-string">"input.mp4"</span>, clips, <span class="hljs-string">"highlight.mp4"</span>)
<span class="hljs-comment"># æµç¨‹: è§†é¢‘â†’Novaç†è§£â†’è§†é¢‘æŠ½å¸§ä¸ºå›¾ç‰‡â†’MMEåŒ¹é…â†’æ‹¼æ¥</span>
<span class="hljs-comment"># è¿”å›: highlight.mp4</span>
</code></pre>
<p><strong>åº”ç”¨æ¡ˆä¾‹ï¼šå°çŒ«è‰åœ°ç©è€é«˜å…‰æå–</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cb182b8f679945208144aa2c889b0d9d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767626353&amp;x-signature=83MZ5LZ5nqtIa%2FluJ4N6JYhaITc%3D" alt="image.png" loading="lazy"/>
1minÂ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.pexels.com%2Fzh-cn%2Fvideo%2F3116737%2F" target="_blank" title="https://www.pexels.com/zh-cn/video/3116737/" ref="nofollow noopener noreferrer">åŸå§‹è§†é¢‘</a>Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â 
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bcb09dc72eb54ce5805f18e5740d0385~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767626353&amp;x-signature=oCy0gYiV74eWthWxBPCavUGBmaw%3D" alt="image.png" loading="lazy"/>
16s é«˜å…‰è§†é¢‘</p>
<p>è¯¥è§†é¢‘çš„å¤§éƒ¨åˆ†æ—¶é—´æ˜¯å°çŒ«åœ¨è‰åœ°ä¸Šå¼ æœ›ï¼Œä¸»è¦é«˜å…‰ç‰‡æ®µä¸ºï¼š</p>
<ul>
<li>åœ¨ç¬¬21såˆ°ç¬¬28sï¼šå°çŒ«æœ‰å‘å‰æ‰‘çš„åŠ¨ä½œ</li>
<li>ç¬¬37såˆ°ç¬¬43sï¼šå°çŒ«å›åˆ°åŸä½åä¸‹å›å¤´çœ‹å‘é•œå¤´</li>
</ul>
<p>å’Œ2.1 åŸºæœ¬æ–¹æ¡ˆç±»ä¼¼ï¼Œè¿›è¡Œç¬¬1æ­¥å°†æ•´ä¸ªè§†é¢‘ä½œä¸ºè¾“å…¥ï¼Œä½¿ç”¨VLMè¿›è¡Œè§†é¢‘åˆ†æï¼Œæå–é«˜å…‰è¦ç‚¹ä»¥åŠä¼˜å…ˆçº§ï¼š</p>
<pre><code class="hljs language-css" lang="css">**è§†é¢‘æ€»ç»“ï¼š**
è¿™æ®µè§†é¢‘å±•ç¤ºäº†ä¸€åªæ©™è‰²å’Œç™½è‰²ç›¸é—´çš„å°çŒ«åœ¨è‰åœ°ä¸Šçš„æ´»åŠ¨ã€‚ä»å¼€å§‹åˆ°ç»“æŸï¼Œå°çŒ«ä¸€ç›´åœ¨è‰åœ°ä¸Šæ¢ç´¢ã€ç©è€ï¼Œå¹¶æœ€ç»ˆå‘ç°å¹¶å°è¯•åƒä¸€ä¸ªè›‹å£³ã€‚

åŸå§‹é«˜å…‰è¦ç‚¹åˆ—è¡¨ï¼š
<span class="hljs-selector-tag">A</span>. <span class="hljs-selector-attr">[ä¼˜å…ˆçº§1]</span> <span class="hljs-selector-attr">[0:00-0:05]</span> - å°çŒ«åœ¨è‰åœ°ä¸Šåä¸‹ï¼Œè§‚å¯Ÿå‘¨å›´ç¯å¢ƒï¼Œå±•ç¤ºäº†å®ƒçš„å¥½å¥‡å¿ƒå’Œè­¦è§‰æ€§
<span class="hljs-selector-tag">B</span>. <span class="hljs-selector-attr">[ä¼˜å…ˆçº§2]</span> <span class="hljs-selector-attr">[0:23-0:25]</span> - å°çŒ«æŠ¬å¤´çœ‹å‘è¿œå¤„ï¼Œè¡¨ç°å‡ºå¯¹ç¯å¢ƒçš„æ¢ç´¢å’Œå…´è¶£
C. <span class="hljs-selector-attr">[ä¼˜å…ˆçº§1]</span> <span class="hljs-selector-attr">[0:27-0:30]</span> - å°çŒ«å‘ç°åœ°ä¸Šçš„è›‹å£³ï¼Œå¹¶å¼€å§‹å°è¯•åƒæ‰ï¼Œå±•ç¤ºäº†å®ƒçš„é£Ÿæ¬²å’Œæ¢ç´¢è¡Œä¸º
D. <span class="hljs-selector-attr">[ä¼˜å…ˆçº§2]</span> <span class="hljs-selector-attr">[0:33-0:35]</span> - å°çŒ«å°è¯•åƒè›‹å£³æ—¶ï¼Œè¡¨ç°å‡ºä¸€äº›å›°æƒ‘å’Œä¸ç¡®å®šçš„è¡¨æƒ…ï¼Œå¢åŠ äº†è§†é¢‘çš„è¶£å‘³æ€§
E. <span class="hljs-selector-attr">[ä¼˜å…ˆçº§1]</span> <span class="hljs-selector-attr">[0:37-0:40]</span> - å°çŒ«æœ€ç»ˆæˆåŠŸåƒæ‰äº†è›‹å£³ï¼Œå¹¶ç»§ç»­åœ¨è‰åœ°ä¸Šæ´»åŠ¨ï¼Œå±•ç¤ºäº†å®ƒçš„æ»¡è¶³æ„Ÿ
</code></pre>
<p>æ¥ä¸‹æ¥è¿›è¡Œçš„2ï½4æ­¥çš„å¤„ç†ï¼Œä»¥1sä¸ºé—´éš”å¯¹è§†é¢‘è¿›è¡ŒæŠ½å¸§ï¼Œå¯¹é«˜å…‰è¦ç‚¹ä¸æŠ½å¸§åçš„å›¾ç‰‡è¿›è¡ŒåµŒå…¥ç”Ÿæˆä¸è¯­ä¹‰åŒ¹é…ï¼Œæœ€åæ ¹æ®æŠ½å¸§é—´éš”ä¸å¸§èµ·å§‹æ—¶é—´åˆå¹¶è¿ç»­ç‰‡æ®µã€‚æœ€ç»ˆæå–å‡º9ä¸ªè¿ç»­çš„é«˜å…‰ç‰‡æ®µï¼ˆæ€»æ—¶é•¿16ç§’ï¼‰å¦‚ä¸‹è¡¨æ‰€ç¤ºï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cb64ef7f9c4d46d3b751316c8d306c5f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767626353&amp;x-signature=2l%2FMkUO8wt%2BpA%2FpweOml7hz1aBs%3D" alt="image.png" loading="lazy"/></p>
<p>ä»ç»“æœä¸Šçœ‹ï¼Œé«˜å…‰è§†é¢‘çŸ­ç‰‡åŒ…å«äº†åŸè§†é¢‘ä¸­2ä¸ªä¸»è¦é«˜å…‰ç¬é—´ï¼ˆæ‰‘æŠ“åŠ¨ä½œå’Œçœ‹å‘é•œå¤´ï¼‰ï¼ŒåŒæ—¶ä¹Ÿæ•´åˆäº†VLMåˆ†æä¸­å…³äºå°çŒ«â€œé è¿‘ã€ç©å¼„/å’¬ä½è›‹å£³â€çš„é«˜ä¼˜å…ˆçº§åŠ¨ä½œç‰‡æ®µï¼ˆå¯¹åº”ç‰‡æ®µ4ã€5ã€7ã€8ï¼‰ï¼Œè·³è¿‡äº†è¾ƒé•¿çš„é™æ€å¼ æœ›éƒ¨åˆ†åŒæ—¶ä¿æŒäº†ä¸€å®šçš„åŠ¨ä½œè¿è´¯æ€§ã€‚<br/>
æ€»ç»“ï¼šè¯¥æ–¹æ¡ˆä¼˜ç‚¹æ˜¯èµ„æºæ¶ˆè€—æ›´ä½ã€å®ç°é€Ÿåº¦æ›´å¿«ï¼›ä½†ç¼ºç‚¹åœ¨äºæŠ½å¸§å¯èƒ½ä¸¢å¤±åŠ¨ä½œå»¶ç»­æˆ–åŠ¨æ€æ•ˆæœï¼Œå› æ­¤å®šä½ç²¾åº¦å¯èƒ½ç•¥é€Šäºæ–¹æ¡ˆ 2ï¼Œé€‚åˆå¿«é€Ÿè¯•éªŒæˆ–æˆæœ¬/èµ„æºå—é™çš„åœºæ™¯ã€‚</p>
<h2 data-id="heading-16">é™„åŠ è€ƒè™‘ï¼šBGMï¼Œè½¬åœºåŠ¨ç”»ï¼Œå­—å¹•åŠå…¶ä»–è‡ªåŠ¨åŒ–</h2>
<p><strong>èƒŒæ™¯éŸ³ä¹åŒ¹é…</strong>ï¼šé«˜å…‰å‰ªè¾‘å¸¸é…ä»¥æ°å½“çš„èƒŒæ™¯éŸ³ä¹ï¼ˆBGMï¼‰å¢å¼ºè§‚èµæ€§ã€‚æˆ‘ä»¬å¯ä»¥åˆ©ç”¨ä¸Šè¿°æ–‡æœ¬æè¿°å’ŒåµŒå…¥æŠ€æœ¯æ¥è‡ªåŠ¨æŒ‘é€‰BGMã€‚ä¾‹å¦‚ï¼Œå°†é«˜å…‰ç‰‡æ®µçš„<strong>æ–‡å­—æè¿°</strong>ï¼ˆæ¥è‡ªVLMæ€»ç»“çš„é«˜å…‰è¦ç‚¹ï¼‰è¾“å…¥éŸ³ä¹åº“çš„åµŒå…¥æŸ¥è¯¢ï¼Œå¯»æ‰¾è¯­ä¹‰ä¸Šå¥‘åˆçš„éŸ³ä¹ç‰‡æ®µã€‚éŸ³ä¹åº“ä¸­æ¯é¦–èƒŒæ™¯éŸ³ä¹å¯äº‹å…ˆæ ‡æ³¨æƒ…ç»ªã€é£æ ¼æˆ–å«æœ‰æè¿°æ–‡æœ¬ï¼ŒæŒ‰éœ€æ£€ç´¢ã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œå¦‚æœé«˜å…‰æè¿°æåˆ°â€œæ¿€åŠ¨äººå¿ƒçš„ç»æ€æ—¶åˆ»â€ï¼Œç³»ç»Ÿå¯èƒ½é€‰æ‹©ä¸€é¦–èŠ‚å¥ç´§å‡‘ã€æ¿€æ˜‚çš„é…ä¹ä¸ä¹‹å¯¹åº”ã€‚</p>
<p><strong>è§†è§‰è½¬åœºå’Œç‰¹æ•ˆ</strong>ï¼šç”Ÿæˆå‰ªè¾‘æ—¶è¿˜å¯è€ƒè™‘è‡ªåŠ¨æ·»åŠ ä¸€äº›è½¬åœºæ•ˆæœæˆ–å­—å¹•è¯´æ˜ã€‚ä¾‹å¦‚ï¼Œåœ¨ç‰‡æ®µè¡”æ¥å¤„æ’å…¥å¿«é€Ÿæ·¡å…¥æ·¡å‡ºæˆ–åŠ¨æ„Ÿè½¬åœºï¼Œä»¥å¢å¼ºæµç•…åº¦ï¼ˆè¿™é‡Œå¯ä»¥ç”¨å¤§æ¨¡å‹åŸºäºæç¤ºè¯ç›´æ¥ç”Ÿæˆå‰ªè¾‘å‰§æœ¬å’Œè½¬åœºåŠ¨ç”»æ ‡ç­¾ï¼‰ï¼›<strong>å¢åŠ å­—å¹•ï¼š</strong> Â å­—å¹•å¯ç”¨å„æ–¹æ¡ˆç¬¬ä¸€é˜¶æ®µçš„VLMè¾“å‡ºçš„æè¿°å¢åŠ åˆ°å¯¹åº”çš„é«˜å…‰ç‰‡æ®µä¸Šï¼Œæˆ–è¿›ä¸€æ­¥ç”¨LLMä¼˜åŒ–ï¼Œåœ¨å¯¹åº”ç‰‡æ®µä¸‹æ–¹å åŠ å­—å¹•æˆ–æ ‡é¢˜ï¼Œæç¤ºè§‚ä¼—è¿™ä¸ªç‰‡æ®µç²¾å½©ä¹‹å¤„ï¼ˆä¾‹å¦‚â€œæœ€åä¸‰ç§’ç»æ€è¿›çƒï¼â€ï¼‰ã€‚</p>
<p><strong>è¿­ä»£ä¼˜åŒ–</strong>ï¼šåœ¨å®é™…åº”ç”¨ä¸­ï¼Œå¯ä»¥æ ¹æ®ç”¨æˆ·åé¦ˆæˆ–è§‚çœ‹æ•°æ®ï¼Œä¸æ–­ä¼˜åŒ–é«˜å…‰é€‰æ‹©è§„åˆ™å’Œæ•ˆæœå¤„ç†ã€‚ä¾‹å¦‚ç»Ÿè®¡å“ªäº›è‡ªåŠ¨ç”Ÿæˆçš„é«˜å…‰ç‰‡æ®µç•™å­˜ç‡é«˜ï¼Œå“ªç§BGMæ­é…æ›´å—æ¬¢è¿ï¼Œåè¿‡æ¥è°ƒæ•´VLMçš„æç¤ºè¯å’Œç›¸ä¼¼åº¦åŒ¹é…çš„é˜ˆå€¼ï¼Œå½¢æˆ<strong>åé¦ˆå¾ªç¯</strong>ï¼Œé€æ­¥æé«˜é«˜å…‰å‰ªè¾‘çš„è´¨é‡ã€‚</p>
<h2 data-id="heading-17">æ€»ç»“ä¸è®¨è®ºï¼šåº”ç”¨åœºæ™¯ï¼Œæ–¹æ¡ˆç‰¹ç‚¹å’Œé€‰å‹æ€è·¯</h2>
<p>ç»¼ä¸Šæ‰€è¿°ï¼Œæœ¬æ–¹æ¡ˆæå‡ºäº†ä¸€å¥—åˆ©ç”¨AIè¿›è¡Œè§†é¢‘é«˜å…‰å‰ªè¾‘çš„æ€è·¯ï¼šä»åŸºæœ¬çš„çº¯å¤§è¯­è¨€æ¨¡å‹è¯†åˆ«é«˜å…‰èŠ‚ç‚¹ï¼Œåˆ°è¯­ä¹‰æ‘˜è¦+åµŒå…¥æ£€ç´¢å®ç°è·¨ç´ æçš„æ£€ç´¢å’Œå‰ªè¾‘ï¼Œå¹¶æä¾›äº†éšç€ç´ æç§¯ç´¯é€æ­¥æå‡çš„æ€è·¯ã€‚</p>
<h3 data-id="heading-18">VLM ç›´æ¥è¯†åˆ« vs åµŒå…¥æ¨¡å‹æ£€ç´¢ï¼š</h3>
<p>éšç€æ¨¡å‹è§„æ¨¡ä¸å¤šæ¨¡æ€é¢„è®­ç»ƒæŠ€æœ¯çš„å‘å±•ï¼Œç°ä»£ VLM ï¼ˆæ¯”å¦‚æœ¬æ–‡æ¡ˆä¾‹ä¸­ä½¿ç”¨çš„Novaç†è§£ç±»æ¨¡å‹ï¼‰æ“…é•¿åŒæ—¶å¤„ç†è§†è§‰å†…å®¹ã€è¯­ä¹‰ä¿¡æ¯ä¸æ—¶åºç»“æ„ã€‚å®ƒä»¬èƒ½å¤Ÿä»æ•´æ®µè§†é¢‘ä¸­å¿«é€Ÿæå–â€œå“ªäº›æ—¶åˆ»æ˜¯é«˜å…‰â€â€œè¿™äº›é«˜å…‰çš„èµ·æ­¢æ—¶é—´åœ¨å“ªé‡Œâ€ï¼Œå› ä¸ºå®ƒä»¬åœ¨è®­ç»ƒé˜¶æ®µå·²å­¦ä¹ åˆ°â€œåŠ¨ä½œï¼äº‹ä»¶ â†’ å…³é”®å¸§â€ä¸â€œè§†è§‰ï¼‹è¯­è¨€è¯­ä¹‰â€ä¹‹é—´çš„å¯¹åº”å…³ç³»ã€‚åœ¨ç°å®å‰ªè¾‘ä»»åŠ¡ä¸­ï¼Œå¦‚æœè§†é¢‘ç»“æ„ç›¸å¯¹ç®€å•ã€åŠ¨ä½œæ˜æ˜¾ã€è§†è§‰å˜åŒ–çªå‡ºï¼ŒVLM ç›´æ¥è¯†åˆ«çš„è·¯å¾„å¯èƒ½å‡ ä¹ä¸€æ­¥åˆ°ä½ï¼šæ¨¡å‹è¯»å–è§†é¢‘ï¼Œè¯†åˆ«å‡ºâ€œé«˜å…‰åŠ¨ä½œâ€æˆ–â€œç²¾å½©èŠ‚ç‚¹â€ï¼Œå¹¶ç›´æ¥æ ‡å‡ºæ—¶é—´æˆ³ã€‚åœ¨è¿™ç§åœºæ™¯ä¸‹ï¼Œå°‘äº†åˆ‡ç‰‡ã€åˆ†å‰²ã€ç´¢å¼•ã€åŒ¹é…ç­‰ç¯èŠ‚ï¼Œæµç¨‹æ›´çŸ­ã€å“åº”æ›´å¿«ã€‚</p>
<p>é‚£ä¹ˆä¸ºä»€ä¹ˆæˆ‘ä»¬åœ¨è§£å†³æ–¹æ¡ˆé‡Œå¼•å…¥åµŒå…¥æ¨¡å‹ï¼Ÿå…¶ä»·å€¼ä¸»è¦ä½“ç°åœ¨ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼šç¬¬ä¸€ï¼Œåœ¨ç´ æåº“è§„æ¨¡å¤§ã€è·¨è§†é¢‘æ£€ç´¢éœ€æ±‚é«˜çš„åœºæ™¯ï¼ŒåµŒå…¥æ¨¡å‹ä½¿ä½ èƒ½å¤Ÿä¸ºæ¯ä¸ªè§†é¢‘ç‰‡æ®µæˆ–å¸§ç”Ÿæˆå¯ç´¢å¼•çš„å‘é‡ï¼Œä»è€Œæ„å»ºâ€œç´ æåº“å¯å¤ç”¨ï¼‹æ£€ç´¢åŠ é€Ÿâ€çš„ç»“æ„ã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼Œæ— è®ºæœªæ¥ä½ è¦å¤„ç†å¤šå°‘æ¡è§†é¢‘æˆ–å¤šå°‘æ¬¡å‰ªè¾‘ä»»åŠ¡ï¼Œéƒ½å¯ä»¥ä¾èµ–å·²ç”Ÿæˆçš„å‘é‡åº“è¿›è¡Œé«˜æ•ˆæ£€ç´¢ï¼Œè€Œä¸æ˜¯æ¯æ¬¡éƒ½è®© VLM å…¨é¢æ‰«æã€‚ç¬¬äºŒï¼Œå¯¹äºé«˜åº¦å®šåˆ¶åŒ–å‰ªè¾‘éœ€æ±‚ï¼ˆå¦‚å“ç‰Œå‰§æœ¬ã€é£æ ¼ç»Ÿä¸€ã€è·¨è§†é¢‘ç‰‡æ®µæ‹¼æ¥ï¼‰æ¥è¯´ï¼ŒåµŒå…¥æ¨¡å‹æä¾›äº†æ›´å¼ºçš„â€œåŒ¹é…â€èƒ½åŠ›ï¼šä½ å¯ä»¥ç”¨æè¿°æˆ–äº‹ä»¶æç¤ºä½œä¸ºæŸ¥è¯¢ï¼Œåœ¨å‘é‡ç©ºé—´ä¸­æŸ¥æ‰¾ä¸ä¹‹æœ€ç›¸ä¼¼çš„ç‰‡æ®µï¼Œå†ç»„åˆæˆæˆç‰‡ã€‚è¿™ç§æ–¹æ³•æ›´é€‚ç”¨äºâ€œä»å¤§é‡ç´ æä¸­é€‰â€â€œæŒ‰ç…§ç”¨æˆ·å‰§æœ¬æ‹¼æ¥â€è¿™ç±»å¤æ‚ä»»åŠ¡ã€‚</p>
<h4 data-id="heading-19"><strong>ä¸ºæ–¹ä¾¿äº§å“æˆ–æŠ€æœ¯å›¢é˜Ÿå¿«é€Ÿå†³ç­–ï¼Œä¸‹é¢æ˜¯é€‰å‹å»ºè®®ï¼š</strong></h4>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3f9f33c35b0843a2877548a574e34b0f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767626353&amp;x-signature=VGU5UmbjGPe84Gbc5T52%2BqGc4jk%3D" alt="image.png" loading="lazy"/></p>
<p>è‡ªåŠ¨é«˜å…‰å‰ªè¾‘æŠ€æœ¯æ–¹æ¡ˆå¯ç”¨äºåˆ¶é€ ä¸šå¦‚ç›¸æœºäº‘å­˜å‰ªè¾‘ï¼Œ åª’èµ„åœºæ™¯å¦‚æ˜æ˜Ÿé«˜å…‰ï¼Œç”µè§†å‰§æ‘˜è¦ç­‰ã€‚åœ¨æœªæ¥ï¼Œæˆ‘ä»¬æœŸå¾…è¿™ç§è‡ªåŠ¨åŒ–é«˜å…‰å‰ªè¾‘èƒ½å¤Ÿå¤§å¹…å‡å°‘äººå·¥å‰ªè¾‘è€—æ—¶ï¼Œå®ç°â€œä¸€é”®ç”Ÿæˆç²¾å½©ç¬é—´â€ï¼Œä¸ºå†…å®¹åˆ›ä½œè€…å’Œè§‚ä¼—å¸¦æ¥æ›´é«˜æ•ˆçš„ä½“éªŒï¼Œä¸ºäºšé©¬é€Šäº‘ç§‘æŠ€å®¢æˆ·äº§å“å¸¦æ¥åˆ›æ–°å’Œæ•ˆç›Šã€‚</p>
<h2 data-id="heading-20">å¯ç”¨æ€§ä¸å®šä»·</h2>
<p>Amazon Novaç†è§£ç±»æ¨¡å‹å’Œå¤šæ¨¡æ€åµŒå…¥æ¨¡å‹ç°å·²åœ¨Amazon Bedrockä¸Šçº¿ï¼Œå¯ç”¨åŒºåŸŸåŒ…æ‹¬ç¾å›½ä¸œéƒ¨ï¼ˆå¼—å‰å°¼äºšåŒ—éƒ¨ï¼‰çš„äºšé©¬é€Šäº‘ç§‘æŠ€åŒºåŸŸã€‚å¦‚éœ€è¯¦ç»†å®šä»·ä¿¡æ¯ï¼Œè¯·å‚é˜…Amazon Bedrockå®šä»·é¡µé¢ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Faws.amazon.com%2Fbedrock%2Fpricing%2F" target="_blank" title="https://aws.amazon.com/bedrock/pricing/" ref="nofollow noopener noreferrer">Amazon Bedrock pricing page</a>ï¼‰ã€‚</p>
<p>*<em>å‰è¿°ç‰¹å®šäºšé©¬é€Šäº‘ç§‘æŠ€ç”Ÿæˆå¼äººå·¥æ™ºèƒ½ç›¸å…³çš„æœåŠ¡ç›®å‰åœ¨äºšé©¬é€Šäº‘ç§‘æŠ€æµ·å¤–åŒºåŸŸå¯ç”¨ã€‚äºšé©¬é€Šäº‘ç§‘æŠ€ä¸­å›½åŒºåŸŸç›¸å…³äº‘æœåŠ¡ç”±è¥¿äº‘æ•°æ®å’Œå…‰ç¯æ–°ç½‘è¿è¥ï¼Œå…·ä½“ä¿¡æ¯ä»¥ä¸­å›½åŒºåŸŸå®˜ç½‘ä¸ºå‡†ã€‚</em></p>
<p><strong>æœ¬ç¯‡ä½œè€…</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/337c383a2ffd4ca896a811ddbc19f5c9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767626353&amp;x-signature=rlqrvayjVZRqmo1xKaI38qJCvW0%3D" alt="image.png" loading="lazy"/></p>
<blockquote>
<p>æœ¬æœŸæœ€æ–°å®éªŒã€Š<a href="https://link.juejin.cn?target=https%3A%2F%2Fevents.amazoncloud.cn%2Flabs%2Fcloudlab-amazon-bedrock-first-experience%3Fvisitfrom%3D3P_Juejintail_1223%26sc_medium%3Downed%26sc_campaign%3Dcloudlab%26sc_channel%3D3P_Juejintail_1223" target="_blank" title="https://events.amazoncloud.cn/labs/cloudlab-amazon-bedrock-first-experience?visitfrom=3P_Juejintail_1223&amp;sc_medium=owned&amp;sc_campaign=cloudlab&amp;sc_channel=3P_Juejintail_1223" ref="nofollow noopener noreferrer">å¤šæ¨¡ä¸€ç«™é€š â€”â€” Amazon Bedrock ä¸Šçš„åŸºç¡€æ¨¡å‹åˆä½“éªŒ</a>ã€‹</p>
<p>âœ¨ ç²¾å¿ƒè®¾è®¡ï¼Œæ—¨åœ¨å¼•å¯¼æ‚¨æ·±å…¥æ¢ç´¢Amazon Bedrockçš„æ¨¡å‹é€‰æ‹©ä¸è°ƒç”¨ã€æ¨¡å‹è‡ªåŠ¨åŒ–è¯„ä¼°ä»¥åŠå®‰å…¨å›´æ (Guardrail)ç­‰é‡è¦åŠŸèƒ½ã€‚æ— éœ€ç®¡ç†åŸºç¡€è®¾æ–½ï¼Œåˆ©ç”¨äºšé©¬é€ŠæŠ€æœ¯ä¸ç”Ÿæ€ï¼Œå¿«é€Ÿé›†æˆä¸éƒ¨ç½²ç”Ÿæˆå¼AIæ¨¡å‹èƒ½åŠ›ã€‚</p>
<p>â©ï¸[<a href="https://link.juejin.cn?target=https%3A%2F%2Fevents.amazoncloud.cn%2Flabs%2Fcloudlab-amazon-bedrock-first-experience%3Fvisitfrom%3D3P_Juejintail_1223%26sc_medium%3Downed%26sc_campaign%3Dcloudlab%26sc_channel%3D3P_Juejintail_1223" target="_blank" title="https://events.amazoncloud.cn/labs/cloudlab-amazon-bedrock-first-experience?visitfrom=3P_Juejintail_1223&amp;sc_medium=owned&amp;sc_campaign=cloudlab&amp;sc_channel=3P_Juejintail_1223" ref="nofollow noopener noreferrer">ç‚¹å‡»è¿›å…¥å®éªŒ</a>] å³åˆ»å¼€å¯  AI å¼€å‘ä¹‹æ—…</p>
<p>æ„å»ºæ— é™, æ¢ç´¢å¯ç¨‹ï¼</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å®æˆ˜è®°å½•ï¼šä½¿ç”¨ Haskell.nix äº¤å‰ç¼–è¯‘ Haskell é¡¹ç›®è‡³ Windows]]></title>    <link>https://juejin.cn/post/7589110783146672162</link>    <guid>https://juejin.cn/post/7589110783146672162</guid>    <pubDate>2025-12-29T15:19:33.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589110783146672162" data-draft-id="7589110783146655778" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å®æˆ˜è®°å½•ï¼šä½¿ç”¨ Haskell.nix äº¤å‰ç¼–è¯‘ Haskell é¡¹ç›®è‡³ Windows"/> <meta itemprop="keywords" content="Haskell,Windows"/> <meta itemprop="datePublished" content="2025-12-29T15:19:33.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Lupino"/> <meta itemprop="url" content="https://juejin.cn/user/3051900006579256"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å®æˆ˜è®°å½•ï¼šä½¿ç”¨ Haskell.nix äº¤å‰ç¼–è¯‘ Haskell é¡¹ç›®è‡³ Windows
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3051900006579256/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Lupino
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T15:19:33.000Z" title="Mon Dec 29 2025 15:19:33 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ Haskell å¼€å‘ä¸­ï¼Œä½¿ç”¨ Nix è¿›è¡Œæ„å»ºèƒ½å¸¦æ¥æå¤§çš„ä¾¿åˆ©ï¼Œå°¤å…¶æ˜¯æ¶‰åŠè·¨å¹³å°äº¤å‰ç¼–è¯‘æ—¶ã€‚æœ¬æ–‡è®°å½•äº†å°†ä¸€ä¸ªåŸºäº <code>haskell.nix</code> çš„é¡¹ç›®ï¼ˆ<code>haskell-periodic</code>ï¼‰é…ç½®ä¸ºæ”¯æŒ Windows (<code>mingwW64</code>) äº¤å‰ç¼–è¯‘çš„å…¨è¿‡ç¨‹ã€‚</p>
<h2 data-id="heading-0">1. è°ƒæ•´æ„å»ºè„šæœ¬ (<code>Makefile</code>)</h2>
<p>åŸå§‹çš„ <code>Makefile</code> 1 ä¸»è¦æ˜¯é’ˆå¯¹ Linux (musl) ç¯å¢ƒè®¾è®¡çš„ï¼Œç¼ºå°‘å¯¹ Windows å¯æ‰§è¡Œæ–‡ä»¶åç¼€ï¼ˆ<code>.exe</code>ï¼‰å’Œç‰¹å®šå·¥å…·é“¾çš„æ”¯æŒã€‚</p>
<p>ä¸ºäº†æ”¯æŒ Windows äº¤å‰ç¼–è¯‘ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ <code>Makefile</code> ä¸­å¢åŠ å¯¹ <code>mingwW64</code> å¹³å°çš„åˆ†æ”¯åˆ¤æ–­ï¼Œä¸»è¦ä¿®æ”¹ç‚¹å¦‚ä¸‹ï¼š</p>
<ol>
<li><strong>å®šä¹‰ Strip å·¥å…·</strong>ï¼šLinux ä¸‹é€šå¸¸ä½¿ç”¨ standard <code>strip</code>ï¼Œä½†åœ¨äº¤å‰ç¼–è¯‘ Windows ç‰ˆæœ¬æ—¶ï¼Œå¿…é¡»ä½¿ç”¨å¯¹åº”çš„ <code>x86_64-w64-mingw32-strip</code>ã€‚</li>
<li><strong>å¤„ç†æ–‡ä»¶åç¼€</strong>ï¼šWindows å¯æ‰§è¡Œæ–‡ä»¶éœ€è¦ <code>.exe</code> åç¼€ï¼Œè€Œ Linux ä¸éœ€è¦ã€‚</li>
<li><strong>ä¿®æ”¹è¾“å‡ºç›®æ ‡</strong>ï¼šæ„å»ºç›®æ ‡è·¯å¾„éœ€è¦åŠ¨æ€è¿½åŠ è¿™ä¸ªåç¼€ã€‚</li>
</ol>
<p><strong>ä¿®æ”¹åçš„ <code>Makefile</code> ç‰‡æ®µï¼š</strong></p>
<p>Makefile</p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-comment"># ... ä¹‹å‰çš„å®šä¹‰ ...</span>

<span class="hljs-keyword">ifeq</span> (<span class="hljs-variable">$(PLATFORM)</span>,mingwW64)
<span class="hljs-comment"># Windows å¹³å°ç‰¹å®šé…ç½®</span>
STRIP = x86_64-w64-mingw32-strip
COMPILER ?= ghc9122
EXT = .exe
<span class="hljs-keyword">else</span>
<span class="hljs-comment"># ... å…¶ä»–å¹³å°é…ç½® ...</span>
<span class="hljs-keyword">endif</span>

<span class="hljs-comment"># ...</span>

<span class="hljs-comment"># é’ˆå¯¹æ¯ä¸ªç»„ä»¶ï¼Œç¡®ä¿è¾“å‡ºåŒ…å«åç¼€ $(EXT)</span>
<span class="hljs-section">periodic:</span>
	PKG=periodic-client-exe make dist/<span class="hljs-variable">$(PLATFORM)</span>/<span class="hljs-variable">$@</span><span class="hljs-variable">$(EXT)</span>

<span class="hljs-comment"># ... å…¶ä»–ç»„ä»¶ç±»ä¼¼ ...</span>
</code></pre>
<p>é€šè¿‡è¿è¡Œ <code>make PLATFORM=mingwW64</code>ï¼Œæ„å»ºç³»ç»Ÿç°åœ¨å¯ä»¥æ­£ç¡®è¯†åˆ«ç›®æ ‡å¹³å°å¹¶å°è¯•ç”Ÿæˆ <code>.exe</code> æ–‡ä»¶ã€‚</p>
<h2 data-id="heading-1">2. é­é‡é“¾æ¥é”™è¯¯ï¼šUCRT ä¸ MSVCRT å†²çª</h2>
<p>åœ¨è°ƒæ•´å®Œ <code>Makefile</code> å¹¶å°è¯•æ„å»ºåï¼Œæˆ‘ä»¬åœ¨é“¾æ¥é˜¶æ®µï¼ˆLinkingï¼‰é‡åˆ°äº†å¦‚ä¸‹é”™è¯¯ï¼š</p>
<p>Plaintext</p>
<pre><code class="hljs language-vbnet" lang="vbnet">multiple definition <span class="hljs-keyword">of</span> `__getmainargs<span class="hljs-comment">'</span>
multiple definition <span class="hljs-keyword">of</span> `_onexit<span class="hljs-comment">'</span>
multiple definition <span class="hljs-keyword">of</span> `_amsg_exit<span class="hljs-comment">'</span>
...
</code></pre>
<p>é—®é¢˜åˆ†æï¼š</p>
<p>è¿™æ˜¯ä¸€ä¸ªç»å…¸çš„ Windows C è¿è¡Œæ—¶å†²çªé—®é¢˜ã€‚ç°ä»£çš„ GHC å’Œ Nix å·¥å…·é“¾å€¾å‘äºä½¿ç”¨ UCRT (Universal C Runtime)ï¼Œä½†æŸäº›ä¾èµ–æˆ– GHC å†…éƒ¨ç»„ä»¶å¯èƒ½å¼•å…¥äº†æ—§ç‰ˆçš„ MSVCRT (Microsoft Visual C Runtime)ã€‚å½“é“¾æ¥å™¨åŒæ—¶é‡åˆ°è¿™ä¸¤å¥—åº“çš„ç¬¦å·å®šä¹‰æ—¶ï¼Œå°±ä¼šæŠ¥â€œå¤šé‡å®šä¹‰â€é”™è¯¯ã€‚</p>
<h2 data-id="heading-2">3. ä¿®æ­£ Nix é…ç½® (<code>default.nix</code>)</h2>
<p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡ GHC ä¼ é€’å‚æ•°ç»™é“¾æ¥å™¨ï¼Œå‘Šè¯‰å®ƒå…è®¸ç¬¦å·çš„å¤šé‡å®šä¹‰ï¼ˆè®©é“¾æ¥å™¨è‡ªåŠ¨é€‰æ‹©å…¶ä¸­ä¸€ä¸ªï¼‰ã€‚</p>
<p>æˆ‘ä»¬éœ€è¦ä¿®æ”¹ <code>default.nix</code> 2222ï¼Œåˆ©ç”¨ <code>haskell.nix</code> æä¾›çš„æ¨¡å—ç³»ç»Ÿ (<code>modules</code>) æ³¨å…¥ç‰¹å®šçš„ <code>configureFlags</code>ã€‚</p>
<p><strong>ä¿®æ”¹åçš„ <code>default.nix</code> å…³é”®éƒ¨åˆ†ï¼š</strong></p>
<p>Nix</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># ... å¤´éƒ¨å¼•å…¥ä¿æŒä¸å˜ ...</span>

in pkgs.haskell-nix.cabalProject {
    <span class="hljs-comment"># ... src, index-state ç­‰é…ç½® ...</span>
    
    <span class="hljs-attr">modules</span> = [(
       {pkgs, ...}: {
         enableProfiling = enableProfiling<span class="hljs-comment">;</span>

         <span class="hljs-comment"># --- Windows äº¤å‰ç¼–è¯‘ä¿®å¤ ---</span>
         <span class="hljs-comment"># é’ˆå¯¹ Windows å¹³å°ï¼Œæ·»åŠ é“¾æ¥å™¨å‚æ•°ä»¥è§£å†³ UCRT/MSVCRT å†²çª</span>
         packages.periodic-client-exe.configureFlags = pkgs.lib.optionals pkgs.stdenv.hostPlatform.isWindows [
           <span class="hljs-string">"--ghc-option=-optl-Wl,--allow-multiple-definition"</span>
         ]<span class="hljs-comment">;</span>

         <span class="hljs-comment"># å¦‚æœ Server ç«¯ä¹Ÿéœ€è¦åœ¨ Windows æ„å»ºï¼ŒåŒæ ·åº”ç”¨è¯¥ä¿®å¤</span>
         packages.periodic-server.configureFlags = pkgs.lib.optionals pkgs.stdenv.hostPlatform.isMusl [
           <span class="hljs-comment"># ... ä¿ç•™åŸæœ‰çš„ Linux/Musl é“¾æ¥åº“é…ç½® ...</span>
           <span class="hljs-string">"--ghc-option=-optl=-lssl"</span>
           <span class="hljs-comment"># ...</span>
         ] ++ pkgs.lib.optionals pkgs.stdenv.hostPlatform.isWindows [
           <span class="hljs-string">"--ghc-option=-optl-Wl,--allow-multiple-definition"</span>
         ]<span class="hljs-comment">;</span>
      })]<span class="hljs-comment">;</span>
}
</code></pre>
<p>è¿™é‡Œä½¿ç”¨äº† <code>pkgs.lib.optionals pkgs.stdenv.hostPlatform.isWindows</code> æ¥ç¡®ä¿è¿™äº›æ ‡å¿—ä»…åœ¨ç¼–è¯‘ Windows ç‰ˆæœ¬æ—¶ç”Ÿæ•ˆï¼Œä¸ä¼šå½±å“ Linux ç‰ˆæœ¬çš„æ„å»ºã€‚</p>
<h2 data-id="heading-3">4. æœ€ç»ˆç»“æœ</h2>
<p>å®Œæˆä¸Šè¿°ä¿®æ”¹åï¼Œå†æ¬¡æ‰§è¡Œæ„å»ºå‘½ä»¤ï¼š</p>
<p>Bash</p>
<pre><code class="hljs language-ini" lang="ini">make <span class="hljs-attr">PLATFORM</span>=mingwW64
</code></pre>
<p>æ„å»ºè¿‡ç¨‹é¡ºåˆ©é€šè¿‡é“¾æ¥é˜¶æ®µï¼ŒæˆåŠŸåœ¨ <code>dist/mingwW64/</code> ç›®å½•ä¸‹ç”Ÿæˆäº† Windows å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆå¦‚ <code>periodic.exe</code>ï¼‰ã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼Œæˆ‘ä»¬åˆ©ç”¨ Nix å¼ºå¤§çš„äº¤å‰ç¼–è¯‘èƒ½åŠ›ï¼Œåœ¨ä¸ç¦»å¼€ Linux å¼€å‘ç¯å¢ƒçš„æƒ…å†µä¸‹ï¼Œä¼˜é›…åœ°äº¤ä»˜äº† Windows äºŒè¿›åˆ¶æ–‡ä»¶ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Playwrightä½¿ç”¨ä½“éªŒ]]></title>    <link>https://juejin.cn/post/7589155289190973467</link>    <guid>https://juejin.cn/post/7589155289190973467</guid>    <pubDate>2025-12-29T15:29:44.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589155289190973467" data-draft-id="7337186171209220111" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Playwrightä½¿ç”¨ä½“éªŒ"/> <meta itemprop="keywords" content="å‰ç«¯,å•å…ƒæµ‹è¯•"/> <meta itemprop="datePublished" content="2025-12-29T15:29:44.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¸ƒåˆ—ç‘Ÿå†œçš„æ˜Ÿç©º"/> <meta itemprop="url" content="https://juejin.cn/user/976022056218471"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Playwrightä½¿ç”¨ä½“éªŒ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/976022056218471/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¸ƒåˆ—ç‘Ÿå†œçš„æ˜Ÿç©º
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T15:29:44.000Z" title="Mon Dec 29 2025 15:29:44 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Playwright å®‰è£…</h2>
<p>åœ¨é¡¹ç›®ä¸­æ‰§è¡Œ<code>yarn create playwright</code>å³å¯ã€‚è¯¥å‘½ä»¤ä¼šåœ¨package.jsonä¸­æ·»åŠ ä¾èµ–ï¼Œå¹¶ç”Ÿæˆä»¥ä¸‹æ–‡ä»¶å’Œç›®å½•ã€‚</p>
<pre><code class="hljs language-arduino" lang="arduino">playwright.config.ts  
tests/  
    example.spec.ts  
tests-examples/  
    demo-todo-app.spec.ts
</code></pre>
<h2 data-id="heading-1">Playwright é…ç½®</h2>
<p>playwright.config.tsæ˜¯Playwrigthçš„é…ç½®æ–‡ä»¶ï¼Œç”Ÿæˆæ–‡ä»¶åŸºæœ¬ä¸ç”¨æ”¹åŠ¨å³å¯è¿è¡Œã€‚</p>
<pre><code class="hljs language-php" lang="php">import { defineConfig, devices } <span class="hljs-keyword">from</span> <span class="hljs-string">'@playwright/test'</span>;

<span class="hljs-comment">/**
 * Read environment variables from file.
 * https://github.com/motdotla/dotenv
 */</span>
<span class="hljs-comment">// require('dotenv').config();</span>

<span class="hljs-comment">/**
 * See https://playwright.dev/docs/test-configuration.
 */</span>
export <span class="hljs-keyword">default</span> <span class="hljs-title function_ invoke__">defineConfig</span>({
  <span class="hljs-attr">testDir</span>: <span class="hljs-string">'./tests'</span>,
  <span class="hljs-comment">/* Run tests in files in parallel */</span>
  <span class="hljs-attr">fullyParallel</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-comment">/* Fail the build on CI if you accidentally left test.only in the source code. */</span>
  <span class="hljs-attr">forbidOnly</span>: !!process.env.CI,
  <span class="hljs-comment">/* Retry on CI only */</span>
  <span class="hljs-attr">retries</span>: process.env.CI ? <span class="hljs-number">2</span> : <span class="hljs-number">0</span>,
  <span class="hljs-comment">/* Opt out of parallel tests on CI. */</span>
  <span class="hljs-attr">workers</span>: process.env.CI ? <span class="hljs-number">1</span> : undefined,
  <span class="hljs-comment">/* Reporter to use. See https://playwright.dev/docs/test-reporters */</span>
  <span class="hljs-attr">reporter</span>: <span class="hljs-string">'html'</span>,
  <span class="hljs-comment">/* Shared settings for all the projects below. See https://playwright.dev/docs/api/class-testoptions. */</span>
  <span class="hljs-attr">use</span>: {
    <span class="hljs-comment">/* Base URL to use in actions like `await page.goto('/')`. */</span>
    // <span class="hljs-attr">baseURL</span>: <span class="hljs-string">'http://local.test.com:3001'</span>,
    <span class="hljs-comment">/* Collect trace when retrying the failed test. See https://playwright.dev/docs/trace-viewer */</span>
    <span class="hljs-attr">trace</span>: <span class="hljs-string">'on-first-retry'</span>,
  },
  <span class="hljs-comment">/* Configure projects for major browsers */</span>
  <span class="hljs-attr">projects</span>: [
    { <span class="hljs-attr">name</span>: <span class="hljs-string">'setup'</span>, <span class="hljs-attr">testMatch</span>: /.*\.setup\.ts/ },
    {
      <span class="hljs-attr">name</span>: <span class="hljs-string">'chromium'</span>,
      <span class="hljs-attr">use</span>: {
        ...devices[<span class="hljs-string">'Desktop Chrome'</span>],
        <span class="hljs-attr">storageState</span>: <span class="hljs-string">'playwright/.auth/user.json'</span>,
        <span class="hljs-attr">viewport</span>: { <span class="hljs-attr">width</span>: <span class="hljs-number">1920</span>, <span class="hljs-attr">height</span>: <span class="hljs-number">1080</span> },
      },
      <span class="hljs-attr">dependencies</span>: [<span class="hljs-string">'setup'</span>],
    },

    // {
    //   <span class="hljs-attr">name</span>: <span class="hljs-string">'firefox'</span>,
    //   <span class="hljs-attr">use</span>: { ...devices[<span class="hljs-string">'Desktop Firefox'</span>] },
    // },

    // {
    //   <span class="hljs-attr">name</span>: <span class="hljs-string">'webkit'</span>,
    //   <span class="hljs-attr">use</span>: { ...devices[<span class="hljs-string">'Desktop Safari'</span>] },
    // },

    <span class="hljs-comment">/* Test against mobile viewports. */</span>
    // {
    //   <span class="hljs-attr">name</span>: <span class="hljs-string">'Mobile Chrome'</span>,
    //   <span class="hljs-attr">use</span>: { ...devices[<span class="hljs-string">'Pixel 5'</span>] },
    // },
    // {
    //   <span class="hljs-attr">name</span>: <span class="hljs-string">'Mobile Safari'</span>,
    //   <span class="hljs-attr">use</span>: { ...devices[<span class="hljs-string">'iPhone 12'</span>] },
    // },

    <span class="hljs-comment">/* Test against branded browsers. */</span>
    // {
    //   <span class="hljs-attr">name</span>: <span class="hljs-string">'Microsoft Edge'</span>,
    //   <span class="hljs-attr">use</span>: { ...devices[<span class="hljs-string">'Desktop Edge'</span>], <span class="hljs-attr">channel</span>: <span class="hljs-string">'msedge'</span> },
    // },
    // {
    //   <span class="hljs-attr">name</span>: <span class="hljs-string">'Google Chrome'</span>,
    //   <span class="hljs-attr">use</span>: { ...devices[<span class="hljs-string">'Desktop Chrome'</span>], <span class="hljs-attr">channel</span>: <span class="hljs-string">'chrome'</span> },
    // },
  ],
  <span class="hljs-attr">timeout</span>: <span class="hljs-number">5</span> * <span class="hljs-number">60</span> * <span class="hljs-number">1000</span>,
  <span class="hljs-comment">/* Run your local dev server before starting the tests */</span>
  <span class="hljs-attr">webServer</span>: {
    <span class="hljs-attr">command</span>: <span class="hljs-string">'yarn dev'</span>,
    <span class="hljs-attr">url</span>: <span class="hljs-string">'http://local.aaa.com:3001'</span>,
    <span class="hljs-attr">reuseExistingServer</span>: !process.env.CI,
  },
});

</code></pre>
<p>ä¸è¿‡åœ¨å®è·µä¸­ï¼Œæœ‰å‡ é¡¹å»ºè®®ä¿®æ”¹ï¼š</p>
<ol>
<li>
<p>baseURLï¼Œè®¾ç½®åï¼Œä½¿ç”¨ page.gotoä¸éœ€è¦å†æŒ‡å®šå®Œæ•´è·¯å¾„</p>
</li>
<li>
<p>timeoutï¼Œä¸çŸ¥é“æ˜¯å¦æ˜¯ç½‘ç»œåŸå› ï¼ŒPlaywrightæ‰“å¼€ç½‘é¡µæ€»æ˜¯å¾ˆæ…¢ï¼Œæµ‹è¯•ç”¨ä¾‹å¾ˆå®¹æ˜“è·‘è¶…æ—¶ï¼Œæ‰€ä»¥æˆ‘å°†timeoutæ”¹æˆäº†5 * 60 * 1000</p>
</li>
<li>
<p>webServer æœ¬åœ°æµ‹è¯•æ—¶å¼ºçƒˆå»ºè®®å¼€å¯è¯¥åŠŸèƒ½</p>
<pre><code class="hljs language-yaml" lang="yaml">  <span class="hljs-attr">webServer:</span> {
    <span class="hljs-attr">command:</span> <span class="hljs-string">'yarn dev'</span>,
    <span class="hljs-attr">url:</span> <span class="hljs-string">'http://local.test.com:3001'</span>,
    <span class="hljs-attr">reuseExistingServer:</span> <span class="hljs-type">!process.env.CI,</span>
  }<span class="hljs-string">,</span>
</code></pre>
<p>è¿è¡Œæµ‹è¯•æ—¶ï¼ŒPlaywrightå°†å…ˆè¿è¡Œ<code>yarn dev</code>å¯åŠ¨æœåŠ¡ï¼Œå¹¶ç­‰å¾…<a href="https://link.juejin.cn?target=http%3A%2F%2Flocal.test.com%3A3001" target="_blank" title="http://local.test.com:3001" ref="nofollow noopener noreferrer">local.test.com:3001</a> å¯è®¿é—®æ—¶å†å¼€å§‹æµ‹è¯•ã€‚è¿™ä¸ªé…ç½®éå¸¸å¥½ç”¨ï¼Œç›¸å¯¹æ¯”<strong>cypress</strong>å°±éœ€è¦é¢å¤–å®‰è£…<strong>start-server-and-test</strong>ã€‚</p>
</li>
<li>
<p>ç”¨æˆ·ç™»å½•ç›¸å…³ï¼Œè§ä¸‹ä¸€èŠ‚ã€‚</p>
</li>
</ol>
<h2 data-id="heading-2">Playwrightç¼“å­˜ç”¨æˆ·ç™»å½•ä¿¡æ¯</h2>
<p>ä¸€èˆ¬è¿è¡Œæµ‹è¯•å‰éœ€è¦å…ˆè¿›è¡Œç™»å½•ï¼ŒPlaywrightå¯ä»¥ç¼“å­˜ç”¨æˆ·ä¿¡æ¯ï¼Œåœ¨ä¹‹åå¤šæ¬¡æµ‹è¯•ä¸­å¤ç”¨ï¼Œé…ç½®ä¹Ÿå¾ˆç®€å•ã€‚</p>
<h3 data-id="heading-3">åˆ›å»ºauthæ–‡ä»¶å¤¹</h3>
<p>æŒ‰ç…§å®˜ç½‘å»ºè®®ï¼Œç›´æ¥åœ¨é¡¹ç›®ä¸­åˆ›å»ºplaywright.authæ–‡ä»¶å¤¹</p>
<h3 data-id="heading-4">ç¼–å†™ç™»å½•ç¨‹åº</h3>
<p>åœ¨testsç›®å½•ä¸­æ–°å¢auth.setup.ts,å†…å®¹å¯å‚è€ƒå¦‚ä¸‹</p>
<pre><code class="hljs language-csharp" lang="csharp">import { test <span class="hljs-keyword">as</span> setup, expect } <span class="hljs-keyword">from</span> <span class="hljs-string">'@playwright/test'</span>;

<span class="hljs-keyword">const</span> authFile = <span class="hljs-string">'playwright/.auth/user.json'</span>;

setup(<span class="hljs-string">'authenticate'</span>, <span class="hljs-keyword">async</span> ({ page }) =&gt; {
  <span class="hljs-comment">// Perform authentication steps. Replace these actions with your own.</span>
  <span class="hljs-keyword">await</span> page.<span class="hljs-keyword">goto</span>(<span class="hljs-string">'https://xxx.xxx.com/login/'</span>);
  <span class="hljs-keyword">await</span> page.locator(<span class="hljs-string">'#account'</span>).fill(<span class="hljs-string">'xxx'</span>);
  <span class="hljs-keyword">await</span> page.locator(<span class="hljs-string">'#password'</span>).fill(<span class="hljs-string">'xxx'</span>);
  <span class="hljs-keyword">await</span> page.locator(<span class="hljs-string">'button[type=submit]'</span>).click();
  <span class="hljs-comment">// Wait until the page receives the cookies.</span>
  <span class="hljs-comment">//</span>
  <span class="hljs-comment">// Sometimes login flow sets cookies in the process of several redirects.</span>
  <span class="hljs-comment">// Wait for the final URL to ensure that the cookies are actually set.</span>
  <span class="hljs-keyword">await</span> page.waitForURL(<span class="hljs-string">'https://xxx.xxx.com/'</span>);

  <span class="hljs-comment">// Alternatively, you can wait until the page reaches a state where all cookies are set.</span>
  <span class="hljs-keyword">await</span> expect(page.locator(<span class="hljs-string">'#title'</span>)).toBeVisible();

  <span class="hljs-comment">// End of authentication steps.</span>

  <span class="hljs-keyword">await</span> page.context().storageState({ path: authFile });
});
</code></pre>
<p>è¿™æ®µä»£ç å…ˆè®¿é—®ç»Ÿä¸€ç™»å½•åœ°å€ï¼ˆæµ‹è¯•ç½‘é¡µåŸŸåå¯èƒ½å’Œç™»å½•åœ°å€ä¸ä¸€æ ·ï¼‰ï¼Œæ¨¡æ‹Ÿè¾“å…¥ç”¨æˆ·å/å¯†ç ï¼Œç‚¹å‡»æäº¤ã€‚ç™»å½•æˆåŠŸåï¼Œ<code>page.context().storageState({ path: authFile })</code>å°†cookie/storageä¿¡æ¯å­˜å…¥authFileæ–‡ä»¶ã€‚</p>
<h3 data-id="heading-5">ä¿®æ”¹é…ç½®æ–‡ä»¶</h3>
<p>ä¿®æ”¹é…ç½®æ–‡ä»¶ä¸­çš„projectsé…ç½®</p>
<pre><code class="hljs language-css" lang="css">  projects: [
    { name: <span class="hljs-string">'setup'</span>, testMatch: /.*\.setup\.ts/ },
    {
      name: <span class="hljs-string">'chromium'</span>,
      use: {
        ..<span class="hljs-selector-class">.devices</span><span class="hljs-selector-attr">[<span class="hljs-string">'Desktop Chrome'</span>]</span>,
        storageState: <span class="hljs-string">'playwright/.auth/user.json'</span>,
        viewport: { <span class="hljs-attribute">width</span>: <span class="hljs-number">1920</span>, height: <span class="hljs-number">1080</span> },
      },
      dependencies: [<span class="hljs-string">'setup'</span>],
    },
    ...
]
</code></pre>
<h2 data-id="heading-6">Playwright è¿è¡Œ</h2>
<p>ç›´æ¥è¿è¡Œå‘½ä»¤<code>yarn playwright test --ui</code>,ä¼šå‡ºç°ä¸‹é¢å¼¹çª—</p>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4a538aab8026458e8a901e31a302e406~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1257&amp;h=762&amp;s=55570&amp;e=png&amp;b=fcfcfc" alt="image.png" loading="lazy"/></p>
<p>ç‚¹å‡»example.spec.tsæ—è¾¹çš„å¼€å§‹é”®å°±å¯ä»¥è¿è¡Œæµ‹è¯•ç”¨ä¾‹äº†ï¼Œå¯ä»¥çœ‹åˆ°auth.setup.tsä¸­çš„ç™»å½•ç¨‹åºä¹Ÿè¢«è‡ªåŠ¨è¿è¡Œäº†ã€‚
ç‚¹å‡»æ¯ä¸ªç”¨ä¾‹å¯ä»¥æ˜¾ç¤ºæ›´å¤šè¿è¡Œä¿¡æ¯ã€‚</p>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/51d573378b53403b948775464fc29caf~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=316&amp;h=325&amp;s=16355&amp;e=png&amp;b=f6f5f5" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-7">Playwright ç®€å•å°ç»“</h2>
<p>Playwrightä¸Šæ‰‹éå¸¸ç®€å•ï¼Œä½†æ˜¯ui modeæ¯”è¾ƒç®€é™‹ï¼Œä¸é€‚åˆè¾¹æµ‹è¯•è¾¹debugã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[GPT-5.1 å‘å¸ƒï¼šæ›´èªæ˜ï¼Œä¹Ÿæ›´æœ‰æ¸©åº¦çš„ AI]]></title>    <link>https://juejin.cn/post/7589126920286683146</link>    <guid>https://juejin.cn/post/7589126920286683146</guid>    <pubDate>2025-12-29T15:49:20.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589126920286683146" data-draft-id="7589130173837918258" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="GPT-5.1 å‘å¸ƒï¼šæ›´èªæ˜ï¼Œä¹Ÿæ›´æœ‰æ¸©åº¦çš„ AI"/> <meta itemprop="keywords" content="ç®—æ³•,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-29T15:49:20.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="aicoting"/> <meta itemprop="url" content="https://juejin.cn/user/933911964427818"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            GPT-5.1 å‘å¸ƒï¼šæ›´èªæ˜ï¼Œä¹Ÿæ›´æœ‰æ¸©åº¦çš„ AI
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/933911964427818/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    aicoting
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T15:49:20.000Z" title="Mon Dec 29 2025 15:49:20 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æ˜¨å¤©æ·±å¤œï¼ŒOpenAI æ‚„ç„¶ä¸Šçº¿äº† GPT-5.1 ç³»åˆ—æ¨¡å‹ï¼Œå¸¦æ¥äº†ä¸¤ä¸ªå…¨æ–°ç‰ˆæœ¬ï¼š<strong>GPT-5.1 Instant</strong> å’Œ <strong>GPT-5.1 Thinking</strong>ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fe5eca69a1564698999678c73538be36~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYWljb3Rpbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767628159&amp;x-signature=NXmfYR66crDv%2FFxFgx%2BxtrqdKOY%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/daeacd9e1b92466e98a42d5612906977~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYWljb3Rpbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767628159&amp;x-signature=mk5bttlVO8R8LAg%2F%2BvAGMZVy43k%3D" alt="" loading="lazy"/></p>
<p>è¿™æ¬¡æ›´æ–°çœ‹ä¼¼ä½è°ƒï¼Œå´åœ¨æ™ºèƒ½ä¸äº¤äº’ä½“éªŒä¸Šéƒ½è¿ˆå‡ºäº†ä¸€å¤§æ­¥ã€‚</p>
<p>æ‰€æœ‰ç›¸å…³æºç ç¤ºä¾‹ã€æµç¨‹å›¾ã€é¢è¯•å…«è‚¡ã€æ¨¡å‹é…ç½®ä¸çŸ¥è¯†åº“æ„å»ºæŠ€å·§ï¼Œæˆ‘ä¹Ÿå°†æŒç»­æ›´æ–°åœ¨Githubï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Faicoting%2FAIHub" target="_blank" title="https://github.com/aicoting/AIHub" ref="nofollow noopener noreferrer"><strong>AIHub</strong></a>ï¼Œæ¬¢è¿å…³æ³¨æ”¶è—ï¼</p>
<h2 data-id="heading-0">ä¸€ã€GPT-5.1 Instantï¼šæ›´å¿«ã€æ›´èªæ˜ã€æ›´è´´å¿ƒ</h2>
<p>å¦‚æœè¯´ GPT-5 æ˜¯ä¸€ä½ç†æ€§çš„å·¥ç¨‹å¸ˆï¼Œé‚£ä¹ˆ GPT-5.1 Instant å°±åƒæ˜¯é‚£ä½æ—¢æ‡‚é€»è¾‘åˆä¼šèŠå¤©çš„æœ‹å‹ã€‚å®ƒå»¶ç»­äº† GPT-5 çš„é«˜å‡†ç¡®æ€§ï¼ŒåŒæ—¶åœ¨è¯­æ°”ã€ç†è§£åŠ›å’ŒæŒ‡ä»¤æ‰§è¡Œä¸Šéƒ½æœ‰æ˜æ˜¾æå‡ã€‚</p>
<p>æ ¹æ®æ—©æœŸä½“éªŒï¼ŒInstant çš„æœ€å¤§ç‰¹ç‚¹æ˜¯<strong>è‡ªé€‚åº”æ¨ç†</strong>ã€‚ç®€å•æ¥è¯´ï¼Œå®ƒèƒ½æ ¹æ®é—®é¢˜çš„å¤æ‚ç¨‹åº¦å†³å®šè‡ªå·±è¦ä¸è¦<strong>è®¤çœŸæ€è€ƒ</strong>ä¸€ä¸‹â€”â€”å¯¹è½»é‡é—®é¢˜è¿…é€Ÿå›åº”ï¼Œå¯¹å¤æ‚é—®é¢˜è‡ªåŠ¨è¿›å…¥æ·±åº¦æ¨ç†æ¨¡å¼ã€‚è¿™ç§å¹³è¡¡å¸¦æ¥äº†å‰æ‰€æœªæœ‰çš„æµç•…æ„Ÿï¼šæ—¢ä¿ç•™é€Ÿåº¦ï¼Œåˆä¸ç‰ºç‰²è´¨é‡ã€‚</p>
<p>åŒæ—¶ï¼Œå®ƒåœ¨æ•°å­¦ã€ä»£ç å’Œé€»è¾‘é¢˜ä¸Šçš„æ­£ç¡®ç‡ä¹Ÿæ˜¾è‘—æå‡ï¼ŒAIME 2025 ä¸ Codeforces ç­‰æµ‹è¯•çš„è¡¨ç°å°±æ˜¯æ˜è¯ã€‚</p>
<h2 data-id="heading-1">äºŒã€GPT-5.1 Thinkingï¼šæ›´ç¨³ã€æ›´æ‡‚ã€æ›´äººæ€§</h2>
<p>ä¸ Instant ä¾§é‡é€Ÿåº¦ä¸åŒï¼Œ<strong>GPT-5.1 Thinking</strong> æ˜¯ OpenAI é¢å‘å¤æ‚ä»»åŠ¡æ¨å‡ºçš„æ·±æ€å‹æ¨¡å‹ã€‚å®ƒçš„æ›´æ–°é‡ç‚¹åœ¨äºæ¨ç†ç­–ç•¥çš„æ”¹è¿›ï¼š<strong>æ ¹æ®ä»»åŠ¡éš¾åº¦åŠ¨æ€åˆ†é…æ€è€ƒæ—¶é—´</strong>ã€‚</p>
<ul>
<li>é‡åˆ°ç®€å•é—®é¢˜ï¼šè¿…é€Ÿä½œç­”ï¼›</li>
<li>é¢å¯¹å¤æ‚æ¨ç†ï¼šè‡ªåŠ¨å»¶é•¿æ€è€ƒï¼Œè¾“å‡ºæ›´ç³»ç»Ÿçš„ç»“è®ºã€‚</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6f5e983a9f9f4dd09fcec24cb3df31bd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYWljb3Rpbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767628159&amp;x-signature=TGc5cx9Efe8bi9bHWgsjvC3pJjY%3D" alt="" loading="lazy"/></p>
<p>åŒæ—¶ï¼Œå®ƒåœ¨è¡¨è¾¾ä¸Šä¹Ÿæ›´è‡ªç„¶äº†ã€‚è¿‡å»æœ‰æ—¶å›ç­”æŠ€æœ¯é—®é¢˜å®¹æ˜“å¤¹æ‚ç”Ÿåƒ»æœ¯è¯­ï¼Œè€Œ 5.1 Thinking æ›´å€¾å‘äºç”¨<strong>æ¸…æ™°ã€æ˜“æ‡‚ã€å¸¦æ¸©åº¦çš„è¯­è¨€</strong>è§£é‡Šå¤æ‚æ¦‚å¿µã€‚<br/>
æ¯”å¦‚å½“å®ƒè®²è§£æ£’çƒç»Ÿè®¡ä¸­çš„ <em>BABIP</em> å’Œ <em>wRC+</em> æ—¶ï¼Œä¸å†æ˜¯æ™¦æ¶©çš„å…¬å¼å †ç Œï¼Œè€Œæ˜¯åƒåœ¨å’Œä½ èŠå¤©ä¸€æ ·è§£é‡Šå‡»çƒæ•ˆç‡ä¸è¿›æ”»è´¡çŒ®çš„å…³ç³»ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/343b2e985fb4497db1f204a90a3aee08~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYWljb3Rpbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767628159&amp;x-signature=Qs0TJhjC8xAM46p8Egme6w3k3RM%3D" alt="" loading="lazy"/></p>
<p>è¿™è®© GPT-5.1 Thinking æ›´åƒæ˜¯ä¸€ä½çœŸæ­£çš„ AI åŠ©æ‰‹ï¼Œè€Œä¸æ˜¯å†·å†°å†°çš„ç®—æ³•æ¨¡å‹ã€‚</p>
<h2 data-id="heading-2">ä¸‰ã€æ›´æ™ºèƒ½çš„æ¨¡å‹è°ƒåº¦ï¼šAuto æ¨¡å¼å‡çº§</h2>
<p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼ŒGPT-5.1 ç³»åˆ—è¿˜æ”¹è¿›äº† <strong>Auto è·¯ç”±æœºåˆ¶</strong>ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“ä½ ä¸ ChatGPT å¯¹è¯æ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨åˆ¤æ–­æ˜¯è°ƒç”¨ Instant è¿˜æ˜¯ Thinkingï¼Œæ— éœ€æ‰‹åŠ¨åˆ‡æ¢ã€‚<br/>
å¯¹äºæ™®é€šç”¨æˆ·æ¥è¯´ï¼Œè¿™æ„å‘³ç€æ›´è‡ªç„¶çš„ä½“éªŒï¼š</p>
<ul>
<li>èŠå¤©ç±»ä»»åŠ¡ â†’ Instant</li>
<li>æ¨ç†ã€å†™ä½œã€åˆ†æç±»ä»»åŠ¡ â†’ Thinking</li>
</ul>
<p>AI å°†è‡ªå·±å†³å®šè¯¥ç”¨å“ªç§å¤§è„‘æ€è€ƒï¼Œè€Œä½ åªéœ€ä¸“æ³¨äºé—®é¢˜æœ¬èº«ã€‚</p>
<p>GPT-5.1 Instant ä¸ Thinking å·²é¢å‘ Proã€Plusã€Goã€Business ç”¨æˆ·é€æ­¥å¼€æ”¾ï¼Œä¼ä¸šç‰ˆå’Œæ•™è‚²ç‰ˆå¯ä»¥æå‰å¼€å¯æ—©æœŸè®¿é—®ã€‚API ç‰ˆæœ¬ä¹Ÿå³å°†åŒæ­¥ä¸Šçº¿ï¼Œå…¶ä¸­ï¼š</p>
<ul>
<li><code>gpt-5.1-chat-latest</code> å¯¹åº” Instantï¼›</li>
<li><code>gpt-5.1</code> å¯¹åº” Thinkingã€‚</li>
</ul>
<p>åœ¨æ¥ä¸‹æ¥çš„ä¸‰ä¸ªæœˆé‡Œï¼ŒGPT-5 ä¸ GPT-5.1 å°†å¹¶è¡Œæä¾›ï¼Œæ–¹ä¾¿å¼€å‘è€…ä¸ç”¨æˆ·è¿›è¡Œå¯¹æ¯”æµ‹è¯•ã€‚ä¹‹åï¼ŒGPT-5.1 å°†æˆä¸ºé»˜è®¤æ¨¡å‹ã€‚</p>
<p>ä» GPT-3 çš„æƒŠè‰³ç™»åœºï¼Œåˆ° GPT-4 çš„å¤šæ¨¡æ€èƒ½åŠ›ï¼Œå†åˆ°å¦‚ä»Š GPT-5.1 çš„æ€è€ƒå‡çº§ï¼Œæˆ‘ä»¬èƒ½æ˜æ˜¾æ„Ÿå—åˆ°â€”â€”<strong>AI çš„è¿›åŒ–æ­£ä»æ›´å¼ºèµ°å‘æ›´æ‡‚</strong>ã€‚<br/>
å®ƒä¸å†åªæ˜¯å·¥å…·ï¼Œè€Œæ˜¯ä¼šæ„ŸçŸ¥è¯­æ°”ã€ç†è§£è¯­å¢ƒã€ä½“è°…æƒ…ç»ªçš„ä¼™ä¼´ã€‚</p>
<p>Sam Altman åœ¨ç¤¾äº¤å¹³å°ä¸Šè¯´ï¼šè¿™æ˜¯ä¸€æ¬¡ä¸é”™çš„æ¨¡å‹å‡çº§ã€‚<br/>
ä½†å¯¹è®¸å¤šç”¨æˆ·è€Œè¨€ï¼Œè¿™ä¸ä»…ä»…æ˜¯ä¸é”™ï¼Œè€Œæ˜¯è®©äººä¸æœºå™¨å¯¹è¯å†æ¬¡å˜å¾—æ„‰æ‚¦çš„ä¸€æ¬¡è·¨è¶Šã€‚</p>
<p>å…³äºæ·±åº¦å­¦ä¹ å’ŒAIå¤§æ¨¡å‹ç›¸å…³çš„çŸ¥è¯†å’Œå‰æ²¿æŠ€æœ¯æ›´æ–°ï¼Œè¯·å…³æ³¨å…¬ä¼—å· <strong>coting</strong>ï¼</p>
<p><strong>GPTç³»åˆ—æ–‡ç« </strong></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F1927401841815160673" target="_blank" title="https://zhuanlan.zhihu.com/p/1927401841815160673" ref="nofollow noopener noreferrer">GPT1ï¼šé€šç”¨è¯­è¨€ç†è§£æ¨¡å‹çš„å¼€ç«¯</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F1927841343062910920" target="_blank" title="https://zhuanlan.zhihu.com/p/1927841343062910920" ref="nofollow noopener noreferrer">GPT-2ï¼šè®©è¯­è¨€æ¨¡å‹ä¸€ç»Ÿå¤šä»»åŠ¡å­¦ä¹ æ±Ÿæ¹–</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F1927843404387189930" target="_blank" title="https://zhuanlan.zhihu.com/p/1927843404387189930" ref="nofollow noopener noreferrer">GPT-3ï¼šçœŸæ­£æ„ä¹‰ä¸Šçš„å°‘æ ·æœ¬å­¦ä¹ æ¨¡å‹æ¥äº†ï¼</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F1927844194703111701" target="_blank" title="https://zhuanlan.zhihu.com/p/1927844194703111701" ref="nofollow noopener noreferrer">GPTâ€‘3.5ï¼šä»è¯­è¨€æ¨¡å‹è¿ˆå‘å¯¹è¯æ™ºèƒ½çš„è¿‡æ¸¡ä¹‹ä½œ</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F1927844769058497732" target="_blank" title="https://zhuanlan.zhihu.com/p/1927844769058497732" ref="nofollow noopener noreferrer">GPTâ€‘4ï¼šå¤šæ¨¡æ€å¤§è§„æ¨¡æ¨¡å‹ï¼Œå¼€å¯æ›´æ™ºèƒ½æ—¶ä»£</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F1937287790099427783" target="_blank" title="https://zhuanlan.zhihu.com/p/1937287790099427783" ref="nofollow noopener noreferrer">GPT-5ï¼šå¤©å˜äº†å—ï¼Ÿè¿˜æ˜¯é£åœäº†ï¼Ÿ</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ¿€æ´»å‡½æ•°æœ‰ä»€ä¹ˆç”¨ï¼Ÿæœ‰å“ªäº›å¸¸ç”¨çš„æ¿€æ´»å‡½æ•°ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7589126920286699530</link>    <guid>https://juejin.cn/post/7589126920286699530</guid>    <pubDate>2025-12-29T15:50:42.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589126920286699530" data-draft-id="7589092567545151497" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ¿€æ´»å‡½æ•°æœ‰ä»€ä¹ˆç”¨ï¼Ÿæœ‰å“ªäº›å¸¸ç”¨çš„æ¿€æ´»å‡½æ•°ï¼Ÿ"/> <meta itemprop="keywords" content="ç®—æ³•,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-29T15:50:42.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="aicoting"/> <meta itemprop="url" content="https://juejin.cn/user/933911964427818"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ¿€æ´»å‡½æ•°æœ‰ä»€ä¹ˆç”¨ï¼Ÿæœ‰å“ªäº›å¸¸ç”¨çš„æ¿€æ´»å‡½æ•°ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/933911964427818/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    aicoting
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T15:50:42.000Z" title="Mon Dec 29 2025 15:50:42 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨æ·±åº¦å­¦ä¹ ä¸­ï¼Œ<strong>æ¿€æ´»å‡½æ•°</strong>ï¼ˆActivation Functionï¼‰æ˜¯ç¥ç»ç½‘ç»œçš„çµé­‚ã€‚å®ƒä¸ä»…èµ‹äºˆç½‘ç»œéçº¿æ€§èƒ½åŠ›ï¼Œè¿˜å†³å®šäº†è®­ç»ƒçš„ç¨³å®šæ€§å’Œæ¨¡å‹æ€§èƒ½ã€‚é‚£ä¹ˆï¼Œæ¿€æ´»å‡½æ•°åˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆæˆ‘ä»¬éç”¨ä¸å¯ï¼Ÿæœ‰å“ªäº›ç»å…¸å‡½æ•°ï¼Ÿåˆè¯¥å¦‚ä½•é€‰æ‹©ï¼Ÿæœ¬æ–‡å¸¦ä½ å…¨é¢è§£æã€‚</p>
<p>æ‰€æœ‰ç›¸å…³æºç ç¤ºä¾‹ã€æµç¨‹å›¾ã€é¢è¯•å…«è‚¡ã€æ¨¡å‹é…ç½®ä¸çŸ¥è¯†åº“æ„å»ºæŠ€å·§ï¼Œæˆ‘ä¹Ÿå°†æŒç»­æ›´æ–°åœ¨Githubï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Faicoting%2FLLMHub" target="_blank" title="https://github.com/aicoting/LLMHub" ref="nofollow noopener noreferrer"><strong>AIHub</strong></a>ï¼Œæ¬¢è¿å…³æ³¨æ”¶è—ï¼</p>
<p>é˜…è¯»æœ¬æ–‡æ—¶ï¼Œè¯·å¸¦ç€è¿™ä¸‰ä¸ªé—®é¢˜æ€è€ƒï¼š</p>
<ol>
<li><strong>ä»€ä¹ˆæ˜¯æ¿€æ´»å‡½æ•°ï¼Œä¸ºä»€ä¹ˆéœ€è¦æ¿€æ´»å‡½æ•°ï¼Ÿ</strong></li>
<li><strong>ç»å…¸çš„æ¿€æ´»å‡½æ•°æœ‰å“ªäº›ï¼Ÿ</strong></li>
<li><strong>æ€ä¹ˆé€‰æ‹©æ¿€æ´»å‡½æ•°ï¼Ÿ</strong></li>
</ol>
<h2 data-id="heading-0">1. ä»€ä¹ˆæ˜¯æ¿€æ´»å‡½æ•°ï¼Œä¸ºä»€ä¹ˆéœ€è¦æ¿€æ´»å‡½æ•°</h2>
<p>æ¿€æ´»å‡½æ•°çš„æ ¸å¿ƒä½œç”¨å°±æ˜¯<strong>ä¸ºç¥ç»ç½‘ç»œå¼•å…¥éçº¿æ€§</strong>ã€‚</p>
<ul>
<li><strong>ä¸ºä»€ä¹ˆéœ€è¦éçº¿æ€§ï¼Ÿ</strong><br/>
æƒ³è±¡ä¸€ä¸‹ï¼Œå¦‚æœç½‘ç»œé‡Œæ¯ä¸€å±‚éƒ½æ˜¯çº¿æ€§çš„ï¼ˆæ¯”å¦‚ y = Wx + bï¼‰ï¼Œæ— è®ºå †å å¤šå°‘å±‚ï¼Œæœ€ç»ˆç½‘ç»œéƒ½åªæ˜¯ä¸€æ¡çº¿æ€§æ˜ å°„ã€‚æ·±åº¦å †å å°±æ²¡æœ‰æ„ä¹‰äº†ï¼Œç½‘ç»œçš„è¡¨è¾¾èƒ½åŠ›éå¸¸æœ‰é™ã€‚</li>
<li><strong>æ¿€æ´»å‡½æ•°çš„ä½œç”¨</strong><br/>
æ¿€æ´»å‡½æ•°åœ¨æ¯ä¸ªç¥ç»å…ƒè¾“å‡ºå‰è¿›è¡Œéçº¿æ€§å˜æ¢ï¼Œè®©ç½‘ç»œå¯ä»¥æ‹Ÿåˆå¤æ‚çš„å‡½æ•°å…³ç³»ï¼Œä»è€Œè§£å†³åˆ†ç±»ã€å›å½’ç­‰éçº¿æ€§é—®é¢˜ã€‚</li>
</ul>
<p>**ç›´è§‚ç†è§£ä¸€ä¸‹ï¼Œ**æ¿€æ´»å‡½æ•°å°±åƒç¥ç»ç½‘ç»œé‡Œçš„â€œå¼€å…³â€æˆ–â€œæ»¤é•œâ€ï¼Œå®ƒå†³å®šäº†æ¯ä¸ªç¥ç»å…ƒåº”è¯¥å¤šå¤§ç¨‹åº¦åœ°â€œæ¿€æ´»â€ï¼Œä»è€Œä½¿ç½‘ç»œå…·å¤‡å¼ºå¤§çš„è¡¨è¾¾èƒ½åŠ›ã€‚</p>
<h2 data-id="heading-1">2. ç»å…¸çš„æ¿€æ´»å‡½æ•°</h2>
<p>åœ¨æ·±åº¦å­¦ä¹ ä¸­ï¼Œæœ‰å‡ ç±»ç»å…¸æ¿€æ´»å‡½æ•°ï¼Œæ¯ç§éƒ½æœ‰è‡ªå·±çš„ä¼˜ç¼ºç‚¹ï¼š</p>
<h3 data-id="heading-2">1. Sigmoid</h3>
<p>å…¬å¼ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1d0ad9beda4e42119cbd9362f53be253~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYWljb3Rpbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767628241&amp;x-signature=ptnh%2Fhz5vcGj6b5gwL1bUpR8tVs%3D" alt="image" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b8b89d84343e4984bc8a0ab33d824f37~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYWljb3Rpbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767628241&amp;x-signature=1SBHXbOC3b4QtDNuKX82xcfRRko%3D" alt="" loading="lazy"/></p>
<ul>
<li><strong>ä¼˜ç‚¹</strong>ï¼šè¾“å‡ºèŒƒå›´åœ¨ (0,1)ï¼Œå¯ä»¥è¡¨ç¤ºæ¦‚ç‡</li>
<li><strong>ç¼ºç‚¹</strong>ï¼šå®¹æ˜“<strong>é¥±å’Œ</strong>ï¼ˆè¾“å…¥è¿‡å¤§æˆ–è¿‡å°æ—¶æ¢¯åº¦æ¥è¿‘0ï¼Œå¯¼è‡´æ¢¯åº¦æ¶ˆå¤±ï¼‰</li>
<li><strong>åº”ç”¨åœºæ™¯</strong>ï¼šäºŒåˆ†ç±»è¾“å‡ºå±‚</li>
</ul>
<h3 data-id="heading-3">2. Tanhï¼ˆåŒæ›²æ­£åˆ‡ï¼‰</h3>
<p>å…¬å¼ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3ed53d7dbda34d6f80bc3825c16d3734~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYWljb3Rpbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767628241&amp;x-signature=ckzbfplsuAP8aREpi1f%2BZDXz8WM%3D" alt="image" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/29f27f75d26b42c9baf8b99e42646641~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYWljb3Rpbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767628241&amp;x-signature=r44L5jVJcT4zT4w%2BPakx7TBFaYY%3D" alt="" loading="lazy"/></p>
<ul>
<li><strong>ä¼˜ç‚¹</strong>ï¼šè¾“å‡ºåœ¨ (-1,1)ï¼Œæ¯” sigmoid å±…ä¸­ï¼Œå¯¹æ¢¯åº¦æ›´å‹å¥½</li>
<li><strong>ç¼ºç‚¹</strong>ï¼šä»å¯èƒ½æ¢¯åº¦æ¶ˆå¤±</li>
<li><strong>åº”ç”¨åœºæ™¯</strong>ï¼šRNN éšå±‚</li>
</ul>
<h3 data-id="heading-4">3. ReLUï¼ˆRectified Linear Unitï¼‰</h3>
<p>å…¬å¼ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bd97321578954a43abaa83d2970b2b5e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYWljb3Rpbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767628241&amp;x-signature=DfcmHM7MieHQieQT%2BtITR6%2FbiwI%3D" alt="image" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b5c5a59b231741ac86f58f1d4d8ef749~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYWljb3Rpbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767628241&amp;x-signature=uR2LqIyHxTTdLYKTqynwCysQ%2BUE%3D" alt="" loading="lazy"/></p>
<ul>
<li><strong>ä¼˜ç‚¹</strong>ï¼šè®¡ç®—ç®€å•ï¼Œå¯¼æ•°æ’ä¸º1ï¼ˆæ­£åŒºé—´ï¼‰ï¼Œç¼“è§£æ¢¯åº¦æ¶ˆå¤±</li>
<li><strong>ç¼ºç‚¹</strong>ï¼šè´ŸåŒºé—´å¯èƒ½â€œæ­»äº¡â€ï¼Œå³ç¥ç»å…ƒæ°¸è¿œä¸æ¿€æ´»</li>
<li><strong>åº”ç”¨åœºæ™¯</strong>ï¼šéšè—å±‚ä¸»æµæ¿€æ´»å‡½æ•°</li>
</ul>
<h3 data-id="heading-5">4. Leaky ReLU / Parametric ReLUï¼ˆPReLUï¼‰</h3>
<p>å…¬å¼ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2cf02a80f97447a9b3bb7ef09cf50617~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYWljb3Rpbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767628241&amp;x-signature=BHKLqDBd1mqQNgcamQGB5%2BYMadw%3D" alt="image" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a2795d46981e4cafaa7d406d19de9962~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYWljb3Rpbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767628241&amp;x-signature=TmXzd6qcXuHLDFt0%2FORYYTs1a3A%3D" alt="" loading="lazy"/></p>
<ul>
<li><strong>Leaky ReLU</strong>: å¯¹è´ŸåŒºé—´å¼•å…¥ä¸€ä¸ªå°æ–œç‡ï¼Œé¿å…ç¥ç»å…ƒæ­»äº¡</li>
<li><strong>PReLU</strong>: æ–œç‡å¯å­¦ä¹ ï¼Œæ›´çµæ´»</li>
</ul>
<h3 data-id="heading-6">5. Softmax</h3>
<p>å…¬å¼</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1558d457e59947c7be327a98b0e14649~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYWljb3Rpbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767628241&amp;x-signature=L0De9zrzJuOz1sJc9Zm9zVNfKeQ%3D" alt="image" loading="lazy"/></p>
<p>Softmax è¾“å‡ºçš„æ˜¯ä¸€ç»„å½’ä¸€åŒ–çš„æ¦‚ç‡ï¼Œåœ¨å›¾ä¸­ä½¿ç”¨ <strong>æŸ±çŠ¶å›¾ (bar chart)</strong> å±•ç¤ºæ¯ä¸ªè¾“å…¥å…ƒç´ å¯¹åº”çš„æ¦‚ç‡å€¼ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0e9d314536aa448eb3acb2d005a5674f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYWljb3Rpbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767628241&amp;x-signature=wUcSzAEC%2FpsWTlJqivGTZTTbKP0%3D" alt="" loading="lazy"/></p>
<ul>
<li><strong>ä½œç”¨</strong>ï¼šå¤šåˆ†ç±»è¾“å‡ºæ¦‚ç‡åˆ†å¸ƒ</li>
<li><strong>åº”ç”¨åœºæ™¯</strong>ï¼šåˆ†ç±»ä»»åŠ¡è¾“å‡ºå±‚</li>
</ul>
<h3 data-id="heading-7"><strong>6.ELUï¼ˆExponential Linear Unitï¼‰</strong></h3>
<p><strong>å…¬å¼ï¼š</strong><br/>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1dddb8708a8c4143a9049d3062dedaa1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYWljb3Rpbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767628241&amp;x-signature=VqRHblPXIYQF%2FtAiOGkQ53CrZu0%3D" alt="image" loading="lazy"/><br/>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ea26be879fa0480db454f041ce8bae44~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYWljb3Rpbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767628241&amp;x-signature=V37QJPF05tMqeIaufug9VrTZgGg%3D" alt="" loading="lazy"/></p>
<p>**ç‰¹ç‚¹ï¼š**è´ŸåŒºé—´å¹³æ»‘éé›¶ï¼Œé¿å… ReLU æ­»åŒºé—®é¢˜ã€‚<br/>
<strong>ä¼˜ç‚¹ï¼š</strong> è¾“å‡ºå‡å€¼æ›´æ¥è¿‘ 0ï¼Œæ¢¯åº¦æ›´ç¨³å®šã€‚<br/>
<strong>å¸¸ç”¨äºï¼š</strong> æ·±å±‚ CNNã€MLPã€‚</p>
<h3 data-id="heading-8"><strong>7.SELUï¼ˆScaled Exponential Linear Unitï¼‰</strong></h3>
<p><strong>å…¬å¼ï¼š</strong><br/>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/894183225b05434abac399537c4ca560~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYWljb3Rpbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767628241&amp;x-signature=q3e2g4JQOBMzNkq%2FdWO0zBJsQKc%3D" alt="image" loading="lazy"/><br/>
å…¶ä¸­ Î»â‰ˆ1.05ï¼ŒÎ±â‰ˆ1.67ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b93c7811730e4c79a54c74bc282e65e9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYWljb3Rpbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767628241&amp;x-signature=Ssi94y8X7k0IFZAUghM9C%2BPNOH4%3D" alt="" loading="lazy"/><br/>
**ç‰¹ç‚¹ï¼š**åœ¨ç‰¹å®šåˆå§‹åŒ–ä¸‹èƒ½å®ç°è‡ªå½’ä¸€åŒ–ï¼Œä¿æŒæ¿€æ´»å‡å€¼å’Œæ–¹å·®ç¨³å®šã€‚<br/>
<strong>ä¼˜ç‚¹ï¼š</strong> æ— éœ€ BatchNormã€‚<br/>
<strong>å¸¸ç”¨äºï¼š</strong> è‡ªå½’ä¸€åŒ–ç¥ç»ç½‘ç»œï¼ˆSelf-Normalizing NNï¼‰ã€‚</p>
<h3 data-id="heading-9"><strong>8.GELUï¼ˆGaussian Error Linear Unitï¼‰</strong></h3>
<p><strong>å…¬å¼ï¼š</strong><br/>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/171c8445b7c44b16aabd39c6a3e577e6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYWljb3Rpbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767628241&amp;x-signature=YSn8H5DV603sbyp0FOk82szeIQA%3D" alt="image" loading="lazy"/><br/>
å…¶ä¸­ Î¦(x) æ˜¯æ ‡å‡†æ­£æ€åˆ†å¸ƒ CDFã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a7cfcd84e8f443318b65b78eee848724~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYWljb3Rpbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767628241&amp;x-signature=mDFDgkxT40q6xvsPMkdTY8rqGQE%3D" alt="" loading="lazy"/><br/>
**ç‰¹ç‚¹ï¼š**åœ¨ ReLU çš„åŸºç¡€ä¸Šå¼•å…¥æ¦‚ç‡æ€æƒ³ï¼Œè®©æ¿€æ´»ä¸è¾“å…¥å¤§å°å¹³æ»‘ç›¸å…³ã€‚<br/>
<strong>ä¼˜ç‚¹ï¼š</strong> æ›´å¹³æ»‘ã€æ›´ç¨³å®šï¼Œæ•ˆæœæ™®éä¼˜äº ReLUã€‚<br/>
<strong>å¸¸ç”¨äºï¼š</strong> Transformerï¼ˆBERTã€GPTã€ViTï¼‰ã€‚</p>
<h3 data-id="heading-10"><strong>9.SiLUï¼ˆSwishï¼‰</strong></h3>
<p><strong>å…¬å¼ï¼š</strong><br/>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dc2f9c2cfee745448a838e055416be27~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYWljb3Rpbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767628241&amp;x-signature=oVtgGTFdJlB8Ka%2BOL%2FiyZkVp%2BVA%3D" alt="image" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e862f7828d8f4e7d9fa221f72bfefe88~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYWljb3Rpbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767628241&amp;x-signature=5Y2TZoqFQ2qgfHtnuNw3Oq6%2Bu9k%3D" alt="" loading="lazy"/><br/>
**ç‰¹ç‚¹ï¼š**ä¸ GELU ç±»ä¼¼ï¼Œæ˜¯ä¸€ç§å¹³æ»‘ç‰ˆ ReLUã€‚<br/>
<strong>ä¼˜ç‚¹ï¼š</strong> æ¢¯åº¦è¿ç»­ï¼Œä¼˜åŒ–æ›´ç¨³å®šã€‚<br/>
<strong>å¸¸ç”¨äºï¼š</strong> EfficientNetã€Transformerã€‚</p>
<h3 data-id="heading-11"><strong>10.GLUï¼ˆGated Linear Unitï¼‰</strong></h3>
<p>GLU/SwiGLU åœ¨å®é™…ä¸­æ˜¯é—¨æ§å½¢å¼ï¼ˆtwo linear branchesï¼‰ï¼Œæ˜¯å‘é‡ä¸Šçš„é€å…ƒç´ æ“ä½œï¼›ä¸ºäº†åœ¨ä¸€ç»´ä¸Šå¯è§†åŒ–ï¼Œæˆ‘ç”¨ç®€åŒ–çš„æ ‡é‡å½¢å¼æ¥ç”»å›¾ â€”â€” æŠŠä¸¤æ¡åˆ†æ”¯éƒ½ç”¨ç›¸åŒçš„è¾“å…¥å€¼ï¼ˆå³æŠŠ a=x, b=xï¼‰ï¼Œå› æ­¤ GLU(x) = x * sigmoid(x)ï¼ŒSwiGLU(x) = x * SiLU(x)ã€‚è¿™èƒ½ç›´è§‚å±•ç¤ºé—¨æ§æœºåˆ¶çš„å½¢çŠ¶å·®å¼‚ã€‚</p>
<p><strong>å…¬å¼ï¼š</strong><br/>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1f4f780837184b4dae67ec7223e80f47~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYWljb3Rpbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767628241&amp;x-signature=Ny0IJcarFyGnlxBb02FBMNTkZdE%3D" alt="image" loading="lazy"/><br/>
å…¶ä¸­ç¬¬äºŒä¸ªåˆ†æ”¯ä½œä¸ºé—¨æ§ä¿¡å·ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e9a73a37d36f45d08eca136319ab69aa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYWljb3Rpbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767628241&amp;x-signature=8N12hEM6FfHKOU5iC2t2m53LHfE%3D" alt="" loading="lazy"/><br/>
**ç‰¹ç‚¹ï¼š**é€šè¿‡é—¨æ§æœºåˆ¶æ§åˆ¶ä¿¡æ¯æµï¼Œå¢å¼ºéçº¿æ€§è¡¨è¾¾ã€‚<br/>
<strong>ä¼˜ç‚¹ï¼š</strong> é€‚åˆåºåˆ—å»ºæ¨¡ã€æ§åˆ¶æ€§å¼ºã€‚<br/>
<strong>å¸¸ç”¨äºï¼š</strong> Transformer FFNã€è¯­è¨€æ¨¡å‹ã€‚</p>
<h3 data-id="heading-12"><strong>11.SwiGLUï¼ˆSwish-Gated Linear Unitï¼‰</strong></h3>
<p><strong>å…¬å¼ï¼š</strong><br/>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4da9307de6714a66825dcf2de50313b1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYWljb3Rpbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767628241&amp;x-signature=%2BNHr9%2FyNTEeYsfIXAU9O4TqjR%2F0%3D" alt="image" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f6ca723189314d97b673d9712cd76971~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYWljb3Rpbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767628241&amp;x-signature=rYnsghrEX7AWtER3rGX8WMjnMxM%3D" alt="" loading="lazy"/><br/>
**ç‰¹ç‚¹ï¼š**GLU çš„æ”¹è¿›ç‰ˆï¼ŒæŠŠ Sigmoid é—¨æ¢æˆ Swish é—¨ã€‚<br/>
<strong>ä¼˜ç‚¹ï¼š</strong> è¡¨è¾¾åŠ›æ›´å¼ºã€æ¢¯åº¦æ›´å¹³æ»‘ï¼Œæ€§èƒ½ä¼˜äº ReLU/GELUã€‚<br/>
<strong>å¸¸ç”¨äºï¼š</strong> LLaMAã€PaLMã€GPT-NeoX ç­‰ç°ä»£ LLMã€‚</p>
<h2 data-id="heading-13">3. æ€ä¹ˆé€‰æ‹©æ¿€æ´»å‡½æ•°</h2>
<p>é€‰æ‹©æ¿€æ´»å‡½æ•°æ—¶ï¼Œå¯ä»¥æ ¹æ®ä»¥ä¸‹å‡ ä¸ªåŸåˆ™ï¼š</p>
<ol>
<li><strong>éšè—å±‚</strong>
<ul>
<li>ä¼˜å…ˆä½¿ç”¨ ReLU æˆ–å…¶å˜ç§ï¼ˆLeaky ReLU, ELU, PReLUï¼‰</li>
<li>ä¼˜ç‚¹ï¼šè®¡ç®—å¿«ã€ç¼“è§£æ¢¯åº¦æ¶ˆå¤±</li>
</ul>
</li>
<li><strong>è¾“å‡ºå±‚</strong>
<ul>
<li>äºŒåˆ†ç±»ï¼šSigmoid</li>
<li>å¤šåˆ†ç±»ï¼šSoftmax</li>
<li>å›å½’ï¼šçº¿æ€§æˆ–æ— æ¿€æ´»å‡½æ•°</li>
</ul>
</li>
<li><strong>ç½‘ç»œç»“æ„å’Œä»»åŠ¡éœ€æ±‚</strong>
<ul>
<li>RNN ä¸­å¸¸ç”¨ tanh æˆ– ReLU</li>
<li>æ·±å±‚ç½‘ç»œæ¨èä½¿ç”¨æ®‹å·®è¿æ¥ + ReLU</li>
<li>å¦‚æœæ‹…å¿ƒ ReLU æ­»ç¥ç»å…ƒï¼Œå¯å°è¯• Leaky ReLU æˆ– ELU</li>
</ul>
</li>
</ol>
<p><strong>å°æŠ€å·§</strong>ï¼š</p>
<p>å¦‚æœä¸ç¡®å®šç”¨å“ªä¸ªæ¿€æ´»å‡½æ•°ï¼Œéšè—å±‚å¯ä»¥å…ˆç”¨ ReLUï¼Œè¾“å‡ºå±‚æŒ‰ä»»åŠ¡é€‰æ‹©ï¼›è®­ç»ƒä¸­æ³¨æ„æ¢¯åº¦æƒ…å†µï¼Œå¦‚æœæ¢¯åº¦æ¶ˆå¤±æˆ–çˆ†ç‚¸ï¼Œå†è€ƒè™‘æ›¿æ¢æˆ–è°ƒæ•´æ¿€æ´»å‡½æ•°ã€‚</p>
<h2 data-id="heading-14">4. æ€»ç»“</h2>
<p>æ¿€æ´»å‡½æ•°æ˜¯ç¥ç»ç½‘ç»œä¸å¯æˆ–ç¼ºçš„é­”æ³•å¼€å…³ï¼Œè®©ç½‘ç»œèƒ½å¤Ÿæ‹Ÿåˆå¤æ‚çš„éçº¿æ€§å…³ç³»ã€‚</p>
<ul>
<li><strong>æ ¸å¿ƒä½œç”¨</strong>ï¼šå¼•å…¥éçº¿æ€§ï¼Œå¢å¼ºç½‘ç»œè¡¨è¾¾èƒ½åŠ›</li>
<li><strong>ç»å…¸æ¿€æ´»å‡½æ•°</strong>ï¼šSigmoidã€Tanhã€ReLUåŠå˜ç§ã€ELUã€Softmax</li>
<li><strong>é€‰æ‹©ç­–ç•¥</strong>ï¼šéšè—å±‚ç”¨ ReLU æˆ–å˜ç§ï¼Œè¾“å‡ºå±‚æ ¹æ®ä»»åŠ¡é€‰æ‹©ï¼Œç»“åˆç½‘ç»œæ·±åº¦å’Œè®­ç»ƒè¡¨ç°è°ƒæ•´</li>
</ul>
<p>ç†è§£æ¿€æ´»å‡½æ•°çš„æœ¬è´¨å’Œç‰¹ç‚¹ï¼Œæœ‰åŠ©äºè®¾è®¡æ›´ç¨³å®šã€é«˜æ•ˆçš„ç¥ç»ç½‘ç»œã€‚</p>
<p>æœ€åæˆ‘ä»¬æ¥å›ç­”ä¸€ä¸‹æ–‡ç« å¼€å¤´æå‡ºçš„ä¸‰ä¸ªé—®é¢˜ï¼š</p>
<ol>
<li><strong>ä»€ä¹ˆæ˜¯æ¿€æ´»å‡½æ•°ï¼Œä¸ºä»€ä¹ˆéœ€è¦æ¿€æ´»å‡½æ•°ï¼Ÿ</strong><br/>
æ¿€æ´»å‡½æ•°æ˜¯ç¥ç»ç½‘ç»œä¸­å¯¹æ¯ä¸ªç¥ç»å…ƒè¾“å‡ºè¿›è¡Œéçº¿æ€§å˜æ¢çš„å‡½æ•°ï¼Œå®ƒçš„ä½œç”¨æ˜¯èµ‹äºˆç½‘ç»œéçº¿æ€§èƒ½åŠ›ï¼Œä½¿å¾—æ·±å±‚ç½‘ç»œå¯ä»¥æ‹Ÿåˆå¤æ‚çš„å‡½æ•°å…³ç³»ã€‚å¦‚æœæ²¡æœ‰æ¿€æ´»å‡½æ•°ï¼Œæ— è®ºç½‘ç»œæœ‰å¤šå°‘å±‚ï¼Œå…¶è¾“å‡ºéƒ½åªæ˜¯è¾“å…¥çš„çº¿æ€§ç»„åˆï¼Œæ— æ³•å¤„ç†å¤æ‚é—®é¢˜ã€‚</li>
<li><strong>ç»å…¸çš„æ¿€æ´»å‡½æ•°æœ‰å“ªäº›ï¼Ÿ</strong><br/>
ç»å…¸æ¿€æ´»å‡½æ•°åŒ…æ‹¬ Sigmoidã€Tanhã€ReLU åŠå…¶å˜ç§ï¼ˆå¦‚ Leaky ReLUã€PReLUï¼‰ã€ELU å’Œ Softmax ç­‰ã€‚å…¶ä¸­ï¼ŒSigmoid å’Œ Tanh å¸¸ç”¨äºå°å‹ç½‘ç»œæˆ– RNNï¼ŒReLU æ˜¯æ·±å±‚ç½‘ç»œéšè—å±‚çš„ä¸»æµé€‰æ‹©ï¼Œè€Œ Softmax å¸¸ç”¨äºå¤šåˆ†ç±»ä»»åŠ¡çš„è¾“å‡ºå±‚ã€‚</li>
<li><strong>æ€ä¹ˆé€‰æ‹©æ¿€æ´»å‡½æ•°ï¼Ÿ</strong><br/>
é€‰æ‹©æ¿€æ´»å‡½æ•°æ—¶ï¼Œéšè—å±‚é€šå¸¸ä¼˜å…ˆä½¿ç”¨ ReLU æˆ–å…¶å˜ç§ï¼Œå› ä¸ºå®ƒè®¡ç®—ç®€å•ä¸”èƒ½ç¼“è§£æ¢¯åº¦æ¶ˆå¤±ï¼›è¾“å‡ºå±‚åˆ™æ ¹æ®ä»»åŠ¡é€‰æ‹©ï¼Œæ¯”å¦‚äºŒåˆ†ç±»ç”¨ Sigmoidã€å¤šåˆ†ç±»ç”¨ Softmaxã€å›å½’ä»»åŠ¡å¯ç”¨çº¿æ€§æˆ–æ— æ¿€æ´»å‡½æ•°ï¼›åœ¨ç‰¹å®šåœºæ™¯ä¸‹ï¼Œä¹Ÿå¯ä»¥ç»“åˆç½‘ç»œæ·±åº¦å’Œè®­ç»ƒè¡¨ç°çµæ´»è°ƒæ•´ã€‚</li>
</ol>
<p>å…³äºæ·±åº¦å­¦ä¹ å’Œå¤§æ¨¡å‹ç›¸å…³çš„çŸ¥è¯†å’Œå‰æ²¿æŠ€æœ¯æ›´æ–°ï¼Œè¯·å…³æ³¨å…¬ä¼—å·cotingï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ€§èƒ½æå‡ 40 å€ï¼å®æˆ˜ PostgreSQL FDW è§£å†³å¾®æœåŠ¡è·¨åº“æŸ¥è¯¢éš¾é¢˜]]></title>    <link>https://juejin.cn/post/7589074117644976163</link>    <guid>https://juejin.cn/post/7589074117644976163</guid>    <pubDate>2025-12-29T14:03:03.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589074117644976163" data-draft-id="7589093939656769588" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ€§èƒ½æå‡ 40 å€ï¼å®æˆ˜ PostgreSQL FDW   è§£å†³å¾®æœåŠ¡è·¨åº“æŸ¥è¯¢éš¾é¢˜"/> <meta itemprop="keywords" content="æ•°æ®åº“,åç«¯"/> <meta itemprop="datePublished" content="2025-12-29T14:03:03.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¹Ÿæ— é£é›¨ä¹Ÿé›¾æ™´"/> <meta itemprop="url" content="https://juejin.cn/user/2175258804632332"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ€§èƒ½æå‡ 40 å€ï¼å®æˆ˜ PostgreSQL FDW   è§£å†³å¾®æœåŠ¡è·¨åº“æŸ¥è¯¢éš¾é¢˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2175258804632332/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¹Ÿæ— é£é›¨ä¹Ÿé›¾æ™´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T14:03:03.000Z" title="Mon Dec 29 2025 14:03:03 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¾®æœåŠ¡è·¨åº“æŸ¥è¯¢ï¼šä» 24 ç§’ä¼˜åŒ–åˆ° 0.6 ç§’ï¼Œæˆ‘åšäº†ä»€ä¹ˆ</h2>
<p>åšè¿è¥çœ‹æ¿çš„æ—¶å€™é‡åˆ°ä¸ªé—®é¢˜ï¼šéœ€è¦æŠŠç”¨æˆ·å¯¹ AI å›å¤çš„è¯„ä»·ï¼ˆç‚¹èµ/ç‚¹è¸©ï¼‰å’Œç”¨æˆ·åä¸€èµ·å±•ç¤ºå‡ºæ¥ã€‚å¬èµ·æ¥ç®€å•ï¼Œä½†æ•°æ®åˆ†æ•£åœ¨ä¸¤ä¸ªåº“é‡Œâ€”â€”è¯„ä»·æ•°æ®åœ¨ä¸šåŠ¡åº“ï¼Œç”¨æˆ·ååœ¨ç”¨æˆ·åº“ã€‚</p>
<p>ç¬¬ä¸€ååº”æ˜¯ç”¨ Superset çš„è·¨åº“æŸ¥è¯¢åŠŸèƒ½ï¼Œç»“æœæŸ¥ä¸€æ¬¡è¦ 24 ç§’ï¼Œå®Œå…¨æ²¡æ³•ç”¨ã€‚</p>
<p>æŠ˜è…¾äº†ä¸€åœˆï¼Œæ¢æˆ PostgreSQL FDW æ–¹æ¡ˆï¼ŒåŒæ ·çš„æŸ¥è¯¢ 0.6 ç§’å°±å‡ºæ¥äº†ã€‚40 å€çš„æ€§èƒ½å·®è·ã€‚</p>
<p>meta databaseï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8ae71d2ffe8747ef96e83bf243d76cfc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lmf5peg6aOO6Zuo5Lmf6Zu-5pm0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767621783&amp;x-signature=ELrBYaQnVt4pd75mj4Vi%2FjRyAXA%3D" alt="å¾®ä¿¡å›¾ç‰‡_2025-12-29_220005_848_å‰¯æœ¬.png" loading="lazy"/></p>
<p>FDWï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4918af3e786847b09f99cf12946a2e61~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lmf5peg6aOO6Zuo5Lmf6Zu-5pm0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767621783&amp;x-signature=LpglZnjMOgZSCf0OlIuF6RN0MYM%3D" alt="å¾®ä¿¡å›¾ç‰‡_2025-12-29_220201_695.png" loading="lazy"/></p>
<h3 data-id="heading-1">èƒŒæ™¯ï¼šå¾®æœåŠ¡çš„æ•°æ®éš”ç¦»é—®é¢˜</h3>
<p>æˆ‘ä»¬çš„ç³»ç»Ÿæ˜¯å…¸å‹çš„å¾®æœåŠ¡æ¶æ„ï¼Œä¸‰ä¸ªæœåŠ¡å„ç”¨å„çš„æ•°æ®åº“ï¼š</p>
<pre><code class="hljs">innies_biz_dev   â†’ ä¸šåŠ¡æ•°æ®ï¼ˆæ¶ˆæ¯ã€è¯„ä»·ã€çŸ¥è¯†åº“ï¼‰
innies_users_dev â†’ ç”¨æˆ·æ•°æ®ï¼ˆç”¨æˆ·åã€é‚®ç®±ã€æƒé™ï¼‰
innies_loom_dev  â†’ Agent æ‰§è¡Œæ•°æ®
</code></pre>
<p>å¹³æ—¶æœåŠ¡é—´é€šä¿¡èµ° gRPCï¼Œæ•°æ®éš”ç¦»å¾—æŒºå¥½ã€‚ä½†åšè¿è¥çœ‹æ¿çš„æ—¶å€™é—®é¢˜æ¥äº†ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- éœ€æ±‚ï¼šå±•ç¤ºè¯„ä»·è®°å½•ï¼Œå¸¦ä¸Šç”¨æˆ·å</span>
<span class="hljs-keyword">SELECT</span>
    r.rating_type,  <span class="hljs-comment">-- è¯„ä»·ç±»å‹ï¼ˆä¸šåŠ¡åº“ï¼‰</span>
    u.username,     <span class="hljs-comment">-- ç”¨æˆ·åï¼ˆç”¨æˆ·åº“ï¼‰â† è·¨åº“äº†</span>
    m.content       <span class="hljs-comment">-- æ¶ˆæ¯å†…å®¹ï¼ˆä¸šåŠ¡åº“ï¼‰</span>
<span class="hljs-keyword">FROM</span> message_ratings r
<span class="hljs-keyword">JOIN</span> users u <span class="hljs-keyword">ON</span> r.user_id <span class="hljs-operator">=</span> u.id
</code></pre>
<p>ä¸¤ä¸ªåº“é‡Œçš„è¡¨ï¼Œæ²¡æ³•ç›´æ¥ JOINã€‚</p>
<h3 data-id="heading-2">ç¬¬ä¸€æ¬¡å°è¯•ï¼šSuperset Meta Database</h3>
<p>Superset æœ‰ä¸ªå®éªŒæ€§åŠŸèƒ½å« Meta Databaseï¼Œå·ç§°å¯ä»¥è·¨åº“æŸ¥è¯¢ã€‚é…ç½®æŒºç®€å•ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># superset_config.py</span>
FEATURE_FLAGS = {
    <span class="hljs-string">"ENABLE_SUPERSET_META_DB"</span>: <span class="hljs-literal">True</span>,
}
</code></pre>
<p>æ·»åŠ ä¸‰ä¸ªæ•°æ®åº“è¿æ¥ï¼Œå†åŠ ä¸€ä¸ª Meta Databaseï¼ˆURI æ˜¯ <code>superset://</code>ï¼‰ï¼Œå°±å¯ä»¥è¿™æ ·æŸ¥äº†ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span>
<span class="hljs-keyword">FROM</span> "innies_biz_dev.public.message_ratings" r
<span class="hljs-keyword">LEFT</span> <span class="hljs-keyword">JOIN</span> "innies_users_dev.public.users" u <span class="hljs-keyword">ON</span> r.user_id <span class="hljs-operator">=</span> u.id
</code></pre>
<p>è¯­æ³•æœ‰ç‚¹æ€ªï¼Œæ•´ä¸ªè¡¨è·¯å¾„è¦ç”¨åŒå¼•å·åŒ…èµ·æ¥ã€‚ä½†èƒ½è·‘å°±è¡Œï¼Œå¯¹å§ï¼Ÿ</p>
<p>ç»“æœï¼š<strong>24 ç§’</strong>ã€‚</p>
<p>æŸ¥ 13 æ¡æ•°æ®ï¼Œç­‰äº† 24 ç§’ã€‚å¤æ‚ä¸€ç‚¹çš„æŸ¥è¯¢ç›´æ¥è¶…æ—¶ã€‚</p>
<h3 data-id="heading-3">é—®é¢˜åœ¨å“ªï¼Ÿ</h3>
<p>ç”¨ EXPLAIN ANALYZE çœ‹äº†ä¸€ä¸‹æ•°æ®åº“å±‚çš„æ‰§è¡Œæ—¶é—´ï¼š<strong>12 æ¯«ç§’</strong>ã€‚</p>
<p>æ•°æ®åº“åªèŠ±äº† 12msï¼Œä½†æ•´ä¸ªæŸ¥è¯¢è¦ 24 ç§’ã€‚æ—¶é—´éƒ½èŠ±åœ¨å“ªäº†ï¼Ÿ</p>
<p>ç”»ä¸ªå›¾å°±æ˜ç™½äº†ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant S as Superset
    participant B as ä¸šåŠ¡åº“
    participant U as ç”¨æˆ·åº“

    S-&gt;&gt;B: SELECT * FROM message_ratings
    B--&gt;&gt;S: è¿”å›å…¨é‡æ•°æ®
    S-&gt;&gt;B: SELECT * FROM task_messages
    B--&gt;&gt;S: è¿”å›å…¨é‡æ•°æ®
    S-&gt;&gt;U: SELECT * FROM users
    U--&gt;&gt;S: è¿”å›å…¨é‡æ•°æ®
    Note over S: Python å†…å­˜ä¸­åš JOIN
    S--&gt;&gt;S: è¿”å›ç»“æœ
</code></pre>
<p>é—®é¢˜å°±åœ¨è¿™ï¼šå®ƒæŠŠæ‰€æœ‰è¡¨çš„æ•°æ®éƒ½æ‹‰åˆ°åº”ç”¨å±‚ï¼Œå†ç”¨ Python åš JOINã€‚</p>
<ul>
<li>å¤šæ¬¡ç½‘ç»œå¾€è¿”</li>
<li>å…¨é‡æ•°æ®ä¼ è¾“ï¼ˆå³ä½¿ä½ åªè¦ 10 æ¡ç»“æœï¼‰</li>
<li>Python åš JOINï¼ˆæ•ˆç‡è¿œä½äºæ•°æ®åº“å¼•æ“ï¼‰</li>
</ul>
<h3 data-id="heading-4">æ¢æ–¹æ¡ˆï¼šPostgreSQL FDW</h3>
<p>FDWï¼ˆForeign Data Wrapperï¼‰æ˜¯ PostgreSQL çš„å†…ç½®åŠŸèƒ½ï¼Œå¯ä»¥æŠŠè¿œç¨‹æ•°æ®åº“çš„è¡¨æ˜ å°„åˆ°æœ¬åœ°ï¼Œåƒæœ¬åœ°è¡¨ä¸€æ ·æŸ¥ã€‚</p>
<p>å…³é”®åŒºåˆ«ï¼š<strong>JOIN ä¸‹æ²‰åˆ°äº†æ•°æ®åº“å†…æ ¸å±‚</strong>ã€‚</p>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant S as Superset
    participant P as æœ¬åœ° PostgreSQL
    participant R as è¿œç¨‹ç”¨æˆ·åº“

    S-&gt;&gt;P: SELECT ... JOIN fdw_users.users
    Note over P: æŸ¥è¯¢ä¼˜åŒ–å™¨åˆ†ææ‰§è¡Œè®¡åˆ’
    P-&gt;&gt;R: æ‹‰å–éœ€è¦çš„è¡Œï¼ˆWHERE æ¡ä»¶ä¸‹æ¨ï¼‰
    R--&gt;&gt;P: è¿”å›è¿‡æ»¤åçš„æ•°æ®
    Note over P: C å¼•æ“å†…éƒ¨å®Œæˆ JOIN
    P--&gt;&gt;S: è¿”å›ç»“æœ
</code></pre>
<p>è™½ç„¶åœ¨è¿™ç§è·¨åº“åœºæ™¯ä¸‹ï¼ˆæœ¬åœ°è¡¨ JOIN è¿œç¨‹è¡¨ï¼‰ï¼ŒJOIN åŠ¨ä½œä¾ç„¶å‘ç”Ÿåœ¨æœ¬åœ°ï¼Œä½†å®ƒæ¯” Superset å¿«å¾—å¤šçš„åŸå› æ˜¯ï¼š</p>
<ol>
<li><strong>å†…æ ¸çº§æ•ˆç‡</strong>ï¼šC è¯­è¨€å®ç°çš„æ•°æ®åº“å¼•æ“åš JOINï¼Œæ¯” Python åœ¨å†…å­˜é‡Œå¤„ç† Pandas/List å¿«å‡ ä¸ªæ•°é‡çº§ã€‚</li>
<li><strong>æŒ‰éœ€ä¼ è¾“</strong>ï¼šPG ä¼˜åŒ–å™¨å¾ˆèªæ˜ï¼Œä¼šæŠŠ WHERE æ¡ä»¶ä¸‹æ¨åˆ°è¿œç¨‹åº“ï¼Œåªæ‹‰å–éœ€è¦çš„æ•°æ®ï¼Œè€Œä¸æ˜¯å…¨é‡æ‹‰å–ã€‚</li>
<li><strong>åè®®é«˜æ•ˆ</strong>ï¼šæ•°æ®åº“å†…éƒ¨ä¼ è¾“ç”¨çš„æ˜¯äºŒè¿›åˆ¶åè®®ï¼Œæ¯” HTTP/JSON é«˜æ•ˆå¾—å¤šã€‚</li>
</ol>
<h3 data-id="heading-5">é…ç½®è¿‡ç¨‹</h3>
<p>FDW é…ç½®éœ€è¦æ•°æ®åº“ç®¡ç†å‘˜æƒé™ï¼Œåˆ†è¿™ä¹ˆå‡ æ­¥ï¼š</p>
<h4 data-id="heading-6">1. åˆ›å»ºå¤–éƒ¨æœåŠ¡å™¨</h4>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- å‘Šè¯‰ PostgreSQL è¿œç¨‹åº“åœ¨å“ª</span>
<span class="hljs-keyword">CREATE</span> SERVER users_server
<span class="hljs-keyword">FOREIGN</span> DATA WRAPPER postgres_fdw
OPTIONS (
    host <span class="hljs-string">'postgres-cluster.svc.cluster.local'</span>,
    dbname <span class="hljs-string">'innies_users_dev'</span>,
    port <span class="hljs-string">'5432'</span>
);
</code></pre>
<h4 data-id="heading-7">2. åˆ›å»ºç”¨æˆ·æ˜ å°„</h4>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- å‘Šè¯‰ PostgreSQL ç”¨ä»€ä¹ˆå‡­è¯è¿è¿œç¨‹åº“</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">USER</span> MAPPING <span class="hljs-keyword">FOR</span> innies_dev
SERVER users_server
OPTIONS (<span class="hljs-keyword">user</span> <span class="hljs-string">'innies_dev'</span>, password <span class="hljs-string">'xxx'</span>);
</code></pre>
<p>è¿™æ­¥å®¹æ˜“è¸©å‘ã€‚å¦‚æœæŠ¥ <code>user mapping not found</code>ï¼Œè¯´æ˜å½“å‰ç”¨æˆ·æ²¡æœ‰å¯¹åº”çš„æ˜ å°„ã€‚</p>
<h4 data-id="heading-8">3. å¯¼å…¥å¤–éƒ¨è¡¨</h4>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- æŠŠè¿œç¨‹çš„ users è¡¨æ˜ å°„è¿‡æ¥ï¼Œæ”¾åˆ° fdw_users schema</span>
<span class="hljs-keyword">CREATE</span> SCHEMA IF <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span> fdw_users;

IMPORT <span class="hljs-keyword">FOREIGN</span> SCHEMA public
LIMIT <span class="hljs-keyword">TO</span> (users)
<span class="hljs-keyword">FROM</span> SERVER users_server
<span class="hljs-keyword">INTO</span> fdw_users;
</code></pre>
<h4 data-id="heading-9">4. åˆ›å»ºè§†å›¾</h4>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- å°è£… JOIN é€»è¾‘ï¼Œæ–¹ä¾¿ä½¿ç”¨</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">VIEW</span> v_ratings_with_username <span class="hljs-keyword">AS</span>
<span class="hljs-keyword">SELECT</span>
    r.created_at <span class="hljs-keyword">AS</span> è¯„ä»·æ—¶é—´,
    r.rating_type <span class="hljs-keyword">AS</span> è¯„ä»·ç±»å‹,
    u.username <span class="hljs-keyword">AS</span> ç”¨æˆ·å,
    SUBSTR(m.content, <span class="hljs-number">1</span>, <span class="hljs-number">200</span>) <span class="hljs-keyword">AS</span> æ¶ˆæ¯å†…å®¹,
    <span class="hljs-keyword">CASE</span>
        <span class="hljs-keyword">WHEN</span> m.references <span class="hljs-keyword">IS</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>
         <span class="hljs-keyword">AND</span> m.references::text <span class="hljs-operator">!=</span> <span class="hljs-string">'[]'</span>
        <span class="hljs-keyword">THEN</span> <span class="hljs-string">'æ˜¯'</span>
        <span class="hljs-keyword">ELSE</span> <span class="hljs-string">'å¦'</span>
    <span class="hljs-keyword">END</span> <span class="hljs-keyword">AS</span> ä½¿ç”¨çŸ¥è¯†åº“
<span class="hljs-keyword">FROM</span> message_ratings r
<span class="hljs-keyword">LEFT</span> <span class="hljs-keyword">JOIN</span> task_messages m <span class="hljs-keyword">ON</span> r.message_id <span class="hljs-operator">=</span> m.id
<span class="hljs-keyword">LEFT</span> <span class="hljs-keyword">JOIN</span> fdw_users.users u <span class="hljs-keyword">ON</span> r.user_id::uuid <span class="hljs-operator">=</span> u.id
<span class="hljs-keyword">WHERE</span> m.role <span class="hljs-operator">=</span> <span class="hljs-string">'assistant'</span>;
</code></pre>
<p>é…ç½®å®Œæˆåï¼Œåœ¨ Superset é‡Œç›´æ¥æŸ¥è¿™ä¸ªè§†å›¾å°±è¡Œï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> v_ratings_with_username LIMIT <span class="hljs-number">100</span>;
</code></pre>
<h3 data-id="heading-10">ç»“æœå¯¹æ¯”</h3>




















<table><thead><tr><th>æ–¹æ¡ˆ</th><th>æŸ¥è¯¢è€—æ—¶</th><th>æ•°æ®åº“è€—æ—¶</th></tr></thead><tbody><tr><td>Superset Meta DB</td><td>21-24s</td><td>12ms</td></tr><tr><td>PostgreSQL FDW</td><td>0.5-0.8s</td><td>0.5s</td></tr></tbody></table>
<p><strong>40 å€çš„æ€§èƒ½æå‡ã€‚</strong></p>
<h3 data-id="heading-11">è¸©è¿‡çš„å‘</h3>
<h4 data-id="heading-12">1. æƒé™ä¸å¤Ÿ</h4>
<pre><code class="hljs language-lua" lang="lua">permission denied to <span class="hljs-built_in">create</span> extension <span class="hljs-string">"postgres_fdw"</span>
</code></pre>
<p>åˆ›å»º FDW æ‰©å±•éœ€è¦è¶…çº§ç”¨æˆ·æƒé™ï¼Œå¾—è®© DBA å¸®å¿™ã€‚</p>
<h4 data-id="heading-13">2. ç”¨æˆ·æ˜ å°„æ‰¾ä¸åˆ°</h4>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">user</span> mapping <span class="hljs-keyword">not</span> found <span class="hljs-keyword">for</span> <span class="hljs-keyword">user</span> "innies_dev"
</code></pre>
<p>DBA é…å¥½äº† FDWï¼Œä½†åªç»™ <code>postgres</code> ç”¨æˆ·åˆ›å»ºäº†æ˜ å°„ï¼Œæ²¡ç»™åº”ç”¨ç”¨æˆ·åˆ›å»ºã€‚è¡¥ä¸€ä¸ªå°±å¥½ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">USER</span> MAPPING <span class="hljs-keyword">FOR</span> innies_dev
SERVER users_server
OPTIONS (<span class="hljs-keyword">user</span> <span class="hljs-string">'innies_dev'</span>, password <span class="hljs-string">'xxx'</span>);
</code></pre>
<h4 data-id="heading-14">3. è¡¨æ‰¾ä¸åˆ°</h4>
<pre><code class="hljs language-arduino" lang="arduino">relation <span class="hljs-string">"users"</span> does <span class="hljs-keyword">not</span> exist
</code></pre>
<p>å¤–éƒ¨è¡¨è¢«å¯¼å…¥åˆ°äº† <code>fdw_users</code> schemaï¼Œä¸æ˜¯ <code>public</code>ã€‚æŸ¥çš„æ—¶å€™è¦ç”¨ <code>fdw_users.users</code>ã€‚</p>
<h3 data-id="heading-15">ä»€ä¹ˆæ—¶å€™ç”¨å“ªä¸ªæ–¹æ¡ˆ</h3>

























<table><thead><tr><th>åœºæ™¯</th><th>æ¨èæ–¹æ¡ˆ</th></tr></thead><tbody><tr><td>æ•°æ®é‡å°ã€å¶å°”æŸ¥ä¸€æ¬¡</td><td>Superset Meta DB å¤Ÿç”¨</td></tr><tr><td>éœ€è¦ç§’çº§å“åº”</td><td>PostgreSQL FDW</td></tr><tr><td>å¯ä»¥æ¥å—æ•°æ®å»¶è¿Ÿ</td><td>å®šæ—¶åŒæ­¥åˆ°ä¸€ä¸ªåº“</td></tr><tr><td>å¤§è§„æ¨¡æ•°æ®åˆ†æ</td><td>æä¸ªæ•°æ®ä»“åº“ï¼ˆæˆæœ¬é«˜ï¼‰</td></tr></tbody></table>
<h3 data-id="heading-16">æ€»ç»“</h3>
<p>åŒæ ·çš„ JOINï¼Œåœ¨åº”ç”¨å±‚åšå’Œåœ¨æ•°æ®åº“å±‚åšï¼Œæ€§èƒ½å·®è·å¯ä»¥åˆ° 40 å€ã€‚</p>
<p>å¾®æœåŠ¡æ¶æ„çš„æ•°æ®éš”ç¦»æ˜¯å¥½äº‹ï¼Œä½†åšè·¨æœåŠ¡æŠ¥è¡¨çš„æ—¶å€™ç¡®å®éº»çƒ¦ã€‚FDW æ˜¯ä¸ªä¸é”™çš„è§£å†³æ–¹æ¡ˆï¼š</p>
<ul>
<li>é…ç½®ä¸€æ¬¡ï¼Œé•¿æœŸä½¿ç”¨</li>
<li>å®æ—¶æ•°æ®ï¼Œæ— éœ€åŒæ­¥</li>
<li>å¯¹çº¿ä¸Šåº“å½±å“å¾ˆå°</li>
<li>PostgreSQL å†…ç½®åŠŸèƒ½ï¼Œä¸ç”¨é¢å¤–è£…ä¸œè¥¿</li>
</ul>
<p>ä»£ä»·æ˜¯éœ€è¦ DBA æƒé™æ¥é…ç½®ï¼Œä½†è¿™ä¸ªä¸€æ¬¡æ€§æˆæœ¬æ˜¯å€¼å¾—çš„ã€‚</p>
<hr/>
<p>å¦‚æœä½ è§‰å¾—è¿™ç¯‡æ–‡ç« æœ‰å¸®åŠ©ï¼Œæ¬¢è¿å…³æ³¨æˆ‘çš„ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftt-a1i" target="_blank" title="https://github.com/tt-a1i" ref="nofollow noopener noreferrer">GitHub</a>ï¼Œä¸‹é¢æ˜¯æˆ‘çš„ä¸€äº›å¼€æºé¡¹ç›®ï¼š</p>
<p><strong>Claude Code Skills</strong>ï¼ˆæŒ‰éœ€åŠ è½½ï¼Œæ„å›¾è‡ªåŠ¨è¯†åˆ«ï¼Œä¸æµªè´¹ tokenï¼Œ<a href="https://juejin.cn/post/7578714735307735066" target="_blank" title="https://juejin.cn/post/7578714735307735066">ä»‹ç»æ–‡ç« </a>ï¼‰ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftt-a1i%2Fcode-review-skill" target="_blank" title="https://github.com/tt-a1i/code-review-skill" ref="nofollow noopener noreferrer">code-review-skill</a> - ä»£ç å®¡æŸ¥æŠ€èƒ½ï¼Œè¦†ç›– React 19ã€Vue 3ã€TypeScriptã€Rust ç­‰çº¦ 9000 è¡Œè§„åˆ™ï¼ˆ<a href="https://juejin.cn/post/7578709098255908902" target="_blank" title="https://juejin.cn/post/7578709098255908902">è¯¦ç»†ä»‹ç»</a>ï¼‰</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftt-a1i%2F5-whys-skill" target="_blank" title="https://github.com/tt-a1i/5-whys-skill" ref="nofollow noopener noreferrer">5-whys-skill</a> - 5 Whys æ ¹å› åˆ†æï¼Œè¯´"æ‰¾æ ¹å› "è‡ªåŠ¨æ¿€æ´»</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftt-a1i%2Ffirst-principles-skill" target="_blank" title="https://github.com/tt-a1i/first-principles-skill" ref="nofollow noopener noreferrer">first-principles-skill</a> - ç¬¬ä¸€æ€§åŸç†æ€è€ƒï¼Œé€‚åˆæ¶æ„è®¾è®¡å’ŒæŠ€æœ¯é€‰å‹</li>
</ul>
<p><strong>å…¨æ ˆé¡¹ç›®</strong>ï¼ˆé€‚åˆå­¦ä¹ ç°ä»£æŠ€æœ¯æ ˆï¼‰ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftt-a1i%2Fprompt-vault" target="_blank" title="https://github.com/tt-a1i/prompt-vault" ref="nofollow noopener noreferrer">prompt-vault</a> - Prompt ç®¡ç†å™¨ï¼Œç”¨çš„éƒ½æ˜¯æœ€æ–°çš„æŠ€æœ¯æ ˆï¼Œé€‚åˆç”¨æ¥å­¦ä¹ äº†è§£æœ€æ–°çš„å‰ç«¯å…¨æ ˆå¼€å‘èŒƒå¼ï¼šNext.js 15 + React 19 + tRPC 11 + Supabase å…¨æ ˆç¤ºä¾‹ï¼Œclone ä¸‹æ¥é…ä¸ªå…è´¹ Supabase å°±èƒ½è·‘</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftt-a1i%2Fchat_edit" target="_blank" title="https://github.com/tt-a1i/chat_edit" ref="nofollow noopener noreferrer">chat_edit</a> - åŒæ¨¡å¼ AI åº”ç”¨ï¼ˆèŠå¤©+å¯Œæ–‡æœ¬ç¼–è¾‘ï¼‰ï¼ŒVue 3.5 + TypeScript + Vite 5 + Quill 2.0 + IndexedDB</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[HarmonyOSåº”ç”¨å¼€å‘ï¼šå¼¹çª—å°è£…]]></title>    <link>https://juejin.cn/post/7589201772118081542</link>    <guid>https://juejin.cn/post/7589201772118081542</guid>    <pubDate>2025-12-29T14:05:51.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589201772118081542" data-draft-id="7589159665856151571" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="HarmonyOSåº”ç”¨å¼€å‘ï¼šå¼¹çª—å°è£…"/> <meta itemprop="keywords" content="HarmonyOS,Android"/> <meta itemprop="datePublished" content="2025-12-29T14:05:51.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é¹¿äººæˆ›"/> <meta itemprop="url" content="https://juejin.cn/user/4309685005226376"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            HarmonyOSåº”ç”¨å¼€å‘ï¼šå¼¹çª—å°è£…
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4309685005226376/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é¹¿äººæˆ›
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T14:05:51.000Z" title="Mon Dec 29 2025 14:05:51 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">å‰è¨€</h3>
<p>æœ¬ç¤ºä¾‹ä»‹ç»å¦‚ä½•å°è£…å¼¹çª—ï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨è¿™ç§å°è£…åçš„å¼¹çª—</p>
<h3 data-id="heading-1">æ•ˆæœå›¾é¢„è§ˆ</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/466dabaee01c49048c3baef9ed3a8893~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6bm_5Lq65oib:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767621950&amp;x-signature=bbc9l1ef9wj6ofCK21BRD6h5vvU%3D" alt="" loading="lazy"/></p>
<p><strong>ä½¿ç”¨è¯´æ˜</strong></p>
<ol>
<li>è¿›å…¥æ¡ˆä¾‹ï¼Œç‚¹å‡»å³ä¸Šè§’ç­›é€‰æŒ‰é’®ï¼Œé¡¶éƒ¨å¼¹å‡ºç­›é€‰æ¡†ï¼Œç‚¹å‡»ä¸€ç§æ–‡ä»¶ç±»å‹è¿›è¡Œç­›é€‰</li>
<li>ç‚¹å‡»å·¦ä¸Šè§’æ·»åŠ æŒ‰é’®ï¼Œä¸­é—´å¼¹å‡ºæ–°å¢æ–‡ä»¶å¼¹æ¡†ï¼Œè¾“å…¥æ–‡ä»¶åä»¥åŠé€‰æ‹©æ–‡ä»¶ç±»å‹ï¼Œç‚¹å‡»ç¡®å®šæŒ‰é’®æ·»åŠ å®Œæ¯•</li>
<li>é•¿æŒ‰åˆ—è¡¨é¡¹å‡ºç°å¼¹çª—ï¼Œç‚¹å‡»åˆ é™¤æŒ‰é’®ï¼Œä¸­é—´å¼¹å‡ºåˆ é™¤ç¡®è®¤æ¡†ï¼Œç‚¹å‡»ç¡®è®¤æŒ‰é’®åˆ é™¤å®Œæ¯•</li>
<li>é•¿æŒ‰åˆ—è¡¨é¡¹å‡ºç°å¼¹çª—ï¼Œåº•éƒ¨å¼¹å‡ºæ–‡ä»¶è¯¦æƒ…å¼¹æ¡†</li>
</ol>
<h3 data-id="heading-2">å®ç°æ€è·¯</h3>
<ol>
<li>
<p>å®šä¹‰å¼¹çª—çš„çˆ¶å¸ƒå±€builder,æ”¯æŒè‡ªå®šä¹‰å¼¹çª—å†…å®¹ä¼ å…¥ï¼Œè®¾ç½®å¼¹çª—è’™å±‚ã€‚</p>
<p>@Builder
export function DialogBuilder(param: EncapsulateDialogBuilderParam) {
Stack({ alignContent: getAlignment(param.dialogType) }) {
Stack()
.width('100%')
.height('300%')
.backgroundColor(0x33000000)
.onClick(() =&gt; {
if (param.isModalClosedByOverlayClick) {
param.closeDialog!();
}
})
param.builder.builder({ onConfirm: param.onConfirm, closeDialog: param.closeDialog, data: param.data })</p>
<p>}.width('100%')
.height('100%')
}</p>
</li>
<li>
<p>ä½¿ç”¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.huawei.com%2Fconsumer%2Fcn%2Fdoc%2Fharmonyos-references-V13%2Fjs-apis-arkui-uicontext-V13%23opencustomdialog12" target="_blank" title="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/js-apis-arkui-uicontext-V13#opencustomdialog12" ref="nofollow noopener noreferrer">openCustomDialog</a>æ¥å£ï¼Œè¯¥æ¥å£å¯æ”¯æŒä¼ å…¥builderã€‚</p>
<p>public static showCustomDialog(param: DialogParam): void {
if (!DialogUtil.uiContext) {
return;
}
let promptAction = DialogUtil.uiContext.getPromptAction();
let encapsulateParam: EncapsulateDialogBuilderParam = DialogUtil.transformDialogParamToEncapsulateDialogBuilderParam(param);
let compCont = new ComponentContent(DialogUtil.uiContext, wrapBuilder(DialogBuilder), encapsulateParam);
// è®¾ç½®äº†å¼¹çª—idå³å¯å°†å…¶ä¸å¼¹çª—å…³è”èµ·æ¥ï¼Œåç»­å¯å‡­æ®å¼¹çª—idå…³é—­å¼¹çª—
if (param.dialogId) {
DialogUtil.compContMap.set(param.dialogId, compCont);
}
DialogUtil.fillCancelMethod(encapsulateParam, promptAction, compCont, param.dialogId);
DialogUtil.fillConfirmMethod(encapsulateParam, promptAction, compCont, param.dialogId);
compCont.update(encapsulateParam);
let options: promptAction.BaseDialogOptions = DialogUtil.dealSlideToClose(param);
promptAction.openCustomDialog(compCont, options);
}</p>
</li>
<li>
<p>è‡ªå®šä¹‰å…³é—­å¼¹çª—å›è°ƒã€‚</p>
<p>private static fillCancelMethod(param: EncapsulateDialogBuilderParam, promptAction: PromptAction,
compCont: ComponentContent, dialogId: string | undefined) {
let customCancel = param.closeDialog;
let cancelDialog = () =&gt; {
if (customCancel) {
customCancel();
}
if (dialogId) {
DialogUtil.compContMap.delete(dialogId);
}
promptAction.closeCustomDialog(compCont);
// å…³é—­å¼¹æ¡†ä¹‹åé‡Šæ”¾å¯¹åº”çš„ComponentContent
compCont.dispose();
};
param.closeDialog = cancelDialog;
}</p>
</li>
<li>
<p>è‡ªå®šä¹‰å¼¹çª—ç¡®è®¤å›è°ƒã€‚</p>
<p>private static fillConfirmMethod(param: EncapsulateDialogBuilderParam, promptAction: PromptAction,
compCont: ComponentContent, dialogId: string | undefined) {
let confirm = param.onConfirm;
let confirmDialog = (isCloseDialog?: boolean, data?: ESObject) =&gt; {
if (confirm) {
confirm(isCloseDialog, data);
}
if (isCloseDialog) {
if (dialogId) {
DialogUtil.compContMap.delete(dialogId);
}
promptAction.closeCustomDialog(compCont);
compCont.dispose();
}
};
param.onConfirm = confirmDialog;
}</p>
</li>
<li>
<p>è‡ªå®šä¹‰å¼¹çª—å¼¹å‡ºåŠ¨æ•ˆã€‚</p>
<p>/**</p>
<ul>
<li>é¡¶éƒ¨å¼¹å‡ºåŠ¨ç”»</li>
<li>@param duration åŠ¨ç”»æ—¶é—´</li>
<li>@returns
*/
static transitionFromUp(duration: number = 200): TransitionEffect {
return TransitionEffect.asymmetric(
TransitionEffect.OPACITY.animation({ duration: duration }).combine(
TransitionEffect.move(TransitionEdge.TOP).animation({ duration: duration })),
TransitionEffect.OPACITY.animation({ delay: duration, duration: duration }).combine(
TransitionEffect.move(TransitionEdge.TOP).animation({ duration: duration }))
)
}</li>
</ul>
</li>
</ol>
<h3 data-id="heading-3">ä½¿ç”¨æ­¥éª¤</h3>
<ol>
<li>
<p>åˆå§‹åŒ–DialogUtilï¼Œéœ€è°ƒç”¨å…¶initæ–¹æ³•å°†UIContextä¼ å…¥ã€‚</p>
<p>aboutToAppear(): void {
DialogUtil.init(this.getUIContext());
...
}</p>
</li>
<li>
<p>å®šä¹‰å¼¹çª—builderï¼Œè¯¥builderå¿…é¡»æœ‰ä¸”åªæœ‰DialogBuilderParamå‚æ•°ã€‚</p>
<p>@Builder
export function addFileDialogBuilder(param: DialogBuilderParam) {
AddFileComponent({ param: param })
}</p>
</li>
<li>
<p>å®šä¹‰å¼¹çª—å°è£…ç»„ä»¶ï¼Œè¯¥ç»„ä»¶å†…éƒ¨å¿…é¡»æœ‰DialogBuilderParamå‚æ•°ä¸”ä½¿ç”¨@Propæ³¨è§£ã€‚</p>
<p>@Component
export struct AddFileComponent {
@Prop param: DialogBuilderParam;
...
}</p>
</li>
<li>
<p>ä»¥ä¸Šå°±å°è£…å¥½äº†è‡ªå®šä¹‰å¼¹çª—ï¼Œæ¥ä¸‹æ¥ä½¿ç”¨åªéœ€è¦è°ƒç”¨ä¸€ä¸‹showCustomDialogæ–¹æ³•,å°†å¯¹åº”å¼¹çª—å°è£…çš„builderä¼ å…¥ã€‚</p>
<p>showFileInfo(item: FileItem) {
// æ‰“å¼€ç­›é€‰å¼¹çª—
DialogUtil.showCustomDialog({
builder: wrapBuilder(fileInfoDialogBuilder),
dialogType: DialogTypeEnum.BOTTOM,
dialogBuilderParam: {
data: item
}
})
}</p>
</li>
</ol>
<h4 data-id="heading-4">å¦‚æœæ‚¨æƒ³ç³»ç»Ÿæ·±å…¥åœ°å­¦ä¹  HarmonyOS å¼€å‘æˆ–æƒ³è€ƒå–HarmonyOSè®¤è¯è¯ä¹¦ï¼Œæ¬¢è¿åŠ å…¥åä¸ºå¼€å‘è€…å­¦å ‚ï¼š</h4>
<h3 data-id="heading-5">è¯·ç‚¹å‡»â†’ï¼š <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.huawei.com%2Fconsumer%2Fcn%2Ftraining%2FclassDetail%2Fd0d15d9039414a8fad9f99ac4a3f5096%3Ftype%3D1%253Fha_source%253Dhmosclass%26ha_sourceId%3D89000248" target="_blank" title="https://developer.huawei.com/consumer/cn/training/classDetail/d0d15d9039414a8fad9f99ac4a3f5096?type=1%3Fha_source%3Dhmosclass&amp;ha_sourceId=89000248" ref="nofollow noopener noreferrer">HarmonyOSå®˜æ–¹è®¤è¯åŸ¹è®­</a></h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3b7e6a0503ed40b7909b9d58825b4ed4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6bm_5Lq65oib:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767621950&amp;x-signature=wOj5kIfaCYYQjjlfmLGWq%2BtbrjM%3D" alt="" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[HarmonyOSåº”ç”¨å¼€å‘ï¼šç›¸æœºé¢„è§ˆèŠ±å±é—®é¢˜è§£å†³æ¡ˆä¾‹]]></title>    <link>https://juejin.cn/post/7589159665856167955</link>    <guid>https://juejin.cn/post/7589159665856167955</guid>    <pubDate>2025-12-29T14:09:52.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589159665856167955" data-draft-id="7589126217250816041" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="HarmonyOSåº”ç”¨å¼€å‘ï¼šç›¸æœºé¢„è§ˆèŠ±å±é—®é¢˜è§£å†³æ¡ˆä¾‹"/> <meta itemprop="keywords" content="å‰ç«¯,HarmonyOS,Android"/> <meta itemprop="datePublished" content="2025-12-29T14:09:52.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é¹¿äººæˆ›"/> <meta itemprop="url" content="https://juejin.cn/user/4309685005226376"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            HarmonyOSåº”ç”¨å¼€å‘ï¼šç›¸æœºé¢„è§ˆèŠ±å±é—®é¢˜è§£å†³æ¡ˆä¾‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4309685005226376/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é¹¿äººæˆ›
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T14:09:52.000Z" title="Mon Dec 29 2025 14:09:52 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">ä»‹ç»</h3>
<p>æœ¬ç¤ºä¾‹ç”¨äºå¼€å‘è€…åœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.huawei.com%2Fconsumer%2Fcn%2Fdoc%2Fharmonyos-guides-V5%2Fcamera-kit-V5" target="_blank" title="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/camera-kit-V5" ref="nofollow noopener noreferrer">ä½¿ç”¨ç›¸æœºæœåŠ¡</a>æ—¶ï¼Œå¦‚æœä»…ç”¨äºé¢„è§ˆæµå±•ç¤ºï¼Œé€šå¸¸ä½¿ç”¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.huawei.com%2Fconsumer%2Fcn%2Fdoc%2Fharmonyos-references-V5%2Fts-basic-components-xcomponent-V5" target="_blank" title="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-basic-components-xcomponent-V5" ref="nofollow noopener noreferrer">XComponent</a>ç»„ä»¶å®ç°ï¼Œå¦‚æœéœ€è¦è·å–æ¯å¸§å›¾åƒåšäºŒæ¬¡å¤„ç†ï¼ˆä¾‹å¦‚è·å–æ¯å¸§å›¾åƒå®ŒæˆäºŒç»´ç è¯†åˆ«æˆ–äººè„¸è¯†åˆ«åœºæ™¯ï¼‰ï¼Œå¯ä»¥é€šè¿‡<a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.huawei.com%2Fconsumer%2Fcn%2Fdoc%2Fharmonyos-references-V5%2Fjs-apis-image-V5%23imagereceiver9" target="_blank" title="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-image-V5#imagereceiver9" ref="nofollow noopener noreferrer">ImageReceiver</a>ä¸­imageArrivaläº‹ä»¶ç›‘å¬é¢„è§ˆæµæ¯å¸§æ•°æ®ï¼Œè§£æå›¾åƒå†…å®¹ã€‚åœ¨è§£æå›¾åƒå†…å®¹æ—¶ï¼Œå¦‚æœæœªè€ƒè™‘strideï¼Œç›´æ¥é€šè¿‡ä½¿ç”¨width*heightè¯»å–å›¾åƒå†…å®¹å»è§£æå›¾åƒï¼Œä¼šå¯¼è‡´ç›¸æœºé¢„è§ˆå¼‚å¸¸ï¼Œä»è€Œå‡ºç°ç›¸æœºé¢„è§ˆèŠ±å±çš„ç°è±¡ã€‚å½“é¢„è§ˆæµå›¾åƒstrideä¸widthä¸ä¸€è‡´æ—¶ï¼Œéœ€è¦å¯¹strideè¿›è¡Œæ— æ•ˆåƒç´ çš„å»é™¤å¤„ç†ã€‚</p>
<h3 data-id="heading-1">æ•ˆæœå›¾é¢„è§ˆ</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bc827fc537ed4b59845fff6c5ccfa309~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6bm_5Lq65oib:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767622192&amp;x-signature=Fi3n%2BLGiXAl5m2%2BFyYmi%2F2guC7c%3D" alt="" loading="lazy"/></p>
<p><strong>ä½¿ç”¨è¯´æ˜</strong></p>
<ol>
<li>æœ¬æ¡ˆä¾‹ä»…æ”¯æŒçœŸæœºéªŒè¯ï¼Œå› åœ¨æ¡ˆä¾‹é›†åˆä¸­å¯¼è‡´æƒé™å¼¹çª—reasonåªæ”¯æŒä¸€ç§stringã€‚</li>
<li>ç‚¹å‡»è¿›å…¥æ¡ˆä¾‹ï¼Œæˆæƒç»™ç›¸æœºã€‚</li>
<li>ä¸‰ä¸ªæ–¹æ¡ˆæ»‘åŠ¨é¡µé¢ä¸ä¼šå‡ºç°èŠ±å±ã€‚</li>
<li>ç‚¹å‡»ç›¸æœºå³ä¸Šè§’æ–¹æ¡ˆè¯´æ˜ï¼Œå¯å‡ºç°ç›¸å…³æ–¹æ¡ˆçš„å…·ä½“æè¿°ã€‚</li>
</ol>
<h3 data-id="heading-2">å®ç°æ€è·¯</h3>
<p>æœ¬ä¾‹æ¶‰åŠçš„å…³é”®ç‰¹æ€§å’Œå®ç°æ–¹æ¡ˆå¦‚ä¸‹ï¼š</p>
<h4 data-id="heading-3">æ–¹æ¡ˆä¸€</h4>
<ol>
<li>
<p>åº”ç”¨é€šè¿‡image.ImageReceiveræ³¨å†ŒimageArrivalå›¾åƒå›è°ƒæ–¹æ³•ï¼Œè·å–æ¯å¸§å›¾åƒæ•°æ®å®ä¾‹image.Imageï¼Œåº”ç”¨é€šè¿‡å®šä¹‰ä¸€ä¸ªwidthä¸º1920*heightä¸º1080åˆ†è¾¨ç‡çš„é¢„è§ˆæµç›´æ¥åˆ›å»ºpixelMapï¼Œæ­¤æ—¶è·å–åˆ°çš„strideçš„å€¼ä¸º1920ã€‚</p>
<p>onImageArrival(receiver: image.ImageReceiver): void {
receiver.on('imageArrival', () =&gt; {
receiver.readNextImage((err: BusinessError, nextImage: image.Image) =&gt; {
if (err || nextImage === undefined) {
logger.error(TAG, <code>requestPermissionsFromUser call Failed! error: ${err.code}</code>);
return;
}
if (nextImage) {
nextImage.getComponent(image.ComponentType.JPEG, async (_err, component: image.Component) =&gt; {
let width = 1920; // widthä¸ºåº”ç”¨åˆ›å»ºé¢„è§ˆæµåˆ†è¾¨ç‡å¯¹åº”çš„å®½
let height = 1080; // heightä¸ºåº”ç”¨åˆ›å»ºé¢„è§ˆæµåˆ†è¾¨ç‡å¯¹åº”çš„é«˜
let stride = component.rowStride; // é€šè¿‡component.rowStrideè·å–stride
logger.info(TAG, <code>receiver getComponent width:${width} height:${height} stride:${stride}</code>);
// strideå’Œwidthç›¸ç­‰ï¼ŒæŒ‰å®½è¯»å–bufferä¸å½±å“ç»“æœ
if (stride === width) {
let pixelMap = await image.createPixelMap(component.byteBuffer, {
size: { height: height, width: width },
srcPixelFormat: image.PixelMapFormat.NV21,
})
AppStorage.setOrCreate('stridePixel', pixelMap);
} else {
...
}
nextImage.release();
})
}
});
})
}</p>
</li>
<li>
<p>åœ¨åˆå§‹ç›¸æœºæ¨¡å—æ—¶ï¼Œè°ƒç”¨onImageArrival()ï¼Œå°†æœªå¤„ç†çš„widthå’Œheightä½œä¸ºsizeï¼Œåˆ›å»ºPixelMapï¼Œé€šè¿‡åœ¨Imageä¸­ä¼ å…¥è¢«@StorageLinkä¿®é¥°çš„å˜é‡stridePixelè¿›è¡Œæ•°æ®åˆ·æ–°ï¼Œå›¾ç‰‡é€æ˜¾ã€‚</p>
<p>Column() {
Stack() {
if (this.isShowStridePixel) {
Image(this.stridePixel)
.rotate({
z: 0.5,
angle: this.previewRotate
})
.zIndex(0)
}
}
.width(px2vp(this.imageWidth))
.height(px2vp(this.imageHeight))
}
.onVisibleAreaChange([0.0, 1.0], (isVisible: boolean, _currentRation: number) =&gt; {
// åˆ‡æ¢ç»„ä»¶æ—¶æ¸…é™¤ä¸å¯è§çš„é¡µé¢ä¿¡æ¯ï¼Œé‡æ–°è¿›å…¥ç»„ä»¶æ—¶é‡æ–°è¿›å…¥ç›¸æœº
if (isVisible) {
CameraServiceCrop.initCamera(this.cameraDeviceIndex);
} else {
CameraServiceCrop.releaseCamera();
}
})</p>
</li>
<li>
<p>å½“strideå’Œwidthç›¸ç­‰æ—¶ï¼ŒæŒ‰å®½è¯»å–bufferä¸å½±å“ç»“æœã€‚ å½“strideå’Œwidthä¸ç­‰æ—¶ï¼Œå¦‚æœåº”ç”¨æƒ³ä½¿ç”¨byteBufferé¢„è§ˆæµæ•°æ®åˆ›å»ºpixelMapç›´æ¥æ˜¾ç¤ºï¼Œå¯ä»¥æ ¹æ®stride*heightå­—èŠ‚çš„å¤§å°å…ˆåˆ›å»ºpixelMapï¼Œç„¶åè°ƒç”¨PixelMapçš„cropSyncæ–¹æ³•è£å‰ªæ‰å¤šä½™çš„åƒç´ ï¼Œä»è€Œæ­£ç¡®å¤„ç†strideï¼Œè§£å†³é¢„è§ˆæµèŠ±å±é—®é¢˜ã€‚</p>
<p>onImageArrival(receiver: image.ImageReceiver): void {
receiver.on('imageArrival', () =&gt; {
receiver.readNextImage((err: BusinessError, nextImage: image.Image) =&gt; {
if (err || nextImage === undefined) {
logger.error(TAG, <code>requestPermissionsFromUser call Failed! error: ${err.code}</code>);
return;
}
if (nextImage) {
nextImage.getComponent(image.ComponentType.JPEG, async (_err, component: image.Component) =&gt; {
let width = 1920; // widthä¸ºåº”ç”¨åˆ›å»ºé¢„è§ˆæµåˆ†è¾¨ç‡å¯¹åº”çš„å®½
let height = 1080; // heightä¸ºåº”ç”¨åˆ›å»ºé¢„è§ˆæµåˆ†è¾¨ç‡å¯¹åº”çš„é«˜
let stride = component.rowStride; // é€šè¿‡component.rowStrideè·å–stride
logger.info(TAG, <code>receiver getComponent width:${width} height:${height} stride:${stride}</code>);
// strideå’Œwidthç›¸ç­‰ï¼ŒæŒ‰å®½è¯»å–bufferä¸å½±å“ç»“æœ
if (stride === width) {
...
} else {
let pixelMap = await image.createPixelMap(component.byteBuffer, {
// 1.åˆ›å»ºPixelMapæ—¶widthä¼ strideã€‚
size: { height: height, width: stride },
srcPixelFormat: 8,
})
// 2.ç„¶åè°ƒç”¨PixelMapçš„cropSyncæ–¹æ³•è£å‰ªæ‰å¤šä½™çš„åƒç´ ã€‚
pixelMap.cropSync({
size: { width: width, height: height },
x: 0,
y: 0
}) // æ ¹æ®è¾“å…¥çš„å°ºå¯¸è£å‰ªå›¾ç‰‡,ä»(0,0)å¼€å§‹ï¼Œè£å‰ªwidth*heightå­—èŠ‚çš„åŒºåŸŸã€‚
let pixelBefore: PixelMap | undefined = AppStorage.get('stridePixel');
await pixelBefore?.release();
AppStorage.setOrCreate('stridePixel', pixelMap);
}
nextImage.release();
})
}
});
})
}</p>
</li>
</ol>
<h4 data-id="heading-4">æ–¹æ¡ˆäºŒ</h4>
<ol>
<li>
<p>æ–¹æ¡ˆäºŒçš„åˆ›å»ºpixelMapã€å›¾ç‰‡é€æ˜¾å’Œæ–¹æ¡ˆä¸€çš„1ã€2æ­¥éª¤ä¸€æ ·ï¼Œæ­¤å¤„ä¸å†èµ˜è¿°ã€‚</p>
<p>å½“strideå’Œwidthç›¸ç­‰æ—¶ï¼ŒæŒ‰å®½è¯»å–bufferä¸å½±å“ç»“æœã€‚ å½“strideå’Œwidthä¸ç­‰æ—¶ï¼Œå°†ç›¸æœºè¿”å›çš„é¢„è§ˆæµæ•°æ®å³component.byteBufferçš„æ•°æ®å»é™¤strideï¼Œæ‹·è´å¾—åˆ°æ–°çš„dstArræ•°æ®è¿›è¡Œæ•°æ®å¤„ç†ï¼Œå°†å¤„ç†åçš„dstArræ•°ç»„bufferï¼Œé€šè¿‡widthå’Œheightç›´æ¥åˆ›å»ºpixelMap, å¹¶å­˜å‚¨åˆ°å…¨å±€å˜é‡stridePixelä¸­ï¼Œä¼ ç»™Imageé€æ˜¾ï¼Œè§£å†³é¢„è§ˆæµèŠ±å±é—®é¢˜ã€‚</p>
<p>onImageArrival(receiver: image.ImageReceiver): void {
receiver.on('imageArrival', () =&gt; {
receiver.readNextImage((err: BusinessError, nextImage: image.Image) =&gt; {
if (err || nextImage === undefined) {
logger.error(TAG, <code>requestPermissionsFromUser call Failed! error: ${err.code}</code>);
return;
}
if (nextImage) {
nextImage.getComponent(image.ComponentType.JPEG,
async (err, component: image.Component) =&gt; {
let width = 1920; // widthä¸ºåº”ç”¨åˆ›å»ºé¢„è§ˆæµåˆ†è¾¨ç‡å¯¹åº”çš„å®½
let height = 1080; // heightä¸ºåº”ç”¨åˆ›å»ºé¢„è§ˆæµåˆ†è¾¨ç‡å¯¹åº”çš„é«˜
let stride = component.rowStride; // é€šè¿‡component.rowStrideè·å–stride
logger.info(TAG, <code>receiver getComponent width:${width} height:${height} stride:${stride}</code>);
// å½“å›¾ç‰‡çš„widthç­‰äºç›¸æœºé¢„è§ˆæµè¿”å›çš„è¡Œè·¨è·strideï¼Œæ­¤æ—¶æ— éœ€å¤„ç†strideï¼Œé€šè¿‡widthå’Œheightç›´æ¥åˆ›å»ºpixelMap,å¹¶å­˜å‚¨åˆ°å…¨å±€å˜é‡stridePixelä¸­ï¼Œä¼ ç»™Imageé€æ˜¾ã€‚
if (stride === width) {
...
} else {
// å½“å›¾ç‰‡çš„widthä¸ç­‰äºç›¸æœºé¢„è§ˆæµè¿”å›çš„è¡Œè·¨è·strideï¼Œæ­¤æ—¶å°†ç›¸æœºè¿”å›çš„é¢„è§ˆæµæ•°æ®component.byteBufferå»é™¤æ‰strideï¼Œæ‹·è´å¾—åˆ°æ–°çš„dstArræ•°æ®ï¼Œæ•°æ®å¤„ç†åä¼ ç»™å…¶ä»–ä¸æ”¯æŒstrideçš„æ¥å£å¤„ç†ã€‚
const dstBufferSize = width * height * 1.5; // åˆ›å»ºä¸€ä¸ªwidth * height * 1.5çš„dstBufferSizeç©ºé—´ï¼Œæ­¤å¤„ä¸ºNV21æ•°æ®æ ¼å¼ã€‚
const dstArr = new Uint8Array(dstBufferSize); // å­˜æ”¾å»æ‰strideåçš„bufferã€‚
// è¯»å–æ¯è¡Œæ•°æ®ï¼Œç›¸æœºæ”¯æŒçš„profileå®½é«˜å‡ä¸ºå¶æ•°ï¼Œä¸æ¶‰åŠå–æ•´é—®é¢˜ã€‚
for (let j = 0; j &lt; height * 1.5; j++) { // å¾ªç¯dstArrçš„æ¯ä¸€è¡Œæ•°æ®ã€‚
// æ‹·è´component.byteBufferçš„æ¯è¡Œæ•°æ®å‰widthä¸ªå­—èŠ‚åˆ°dstArrä¸­(å»é™¤æ— æ•ˆåƒç´ ï¼Œåˆšå¥½æ¯è¡Œå¾—åˆ°ä¸€ä¸ªwidth<em>heightçš„å…«å­—èŠ‚æ•°ç»„ç©ºé—´)ã€‚
const srcBuf = new Uint8Array(component.byteBuffer, j * stride,
width); // å°†component.byteBufferè¿”å›çš„bufferï¼Œæ¯è¡Œéå†ï¼Œä»é¦–ä½å¼€å§‹ï¼Œæ¯è¡Œæˆªå–å‡ºwidthå­—èŠ‚ã€‚
dstArr.set(srcBuf, j * width); // å°†width</em>heightå¤§å°çš„æ•°æ®å­˜å‚¨åˆ°dstArrä¸­ã€‚
}
let pixelMap = await image.createPixelMap(dstArr.buffer, {
// å°†å¤„ç†åçš„dstArræ•°ç»„bufferï¼Œé€šè¿‡widthå’Œheightç›´æ¥åˆ›å»ºpixelMap,å¹¶å­˜å‚¨åˆ°å…¨å±€å˜é‡stridePixelä¸­ï¼Œä¼ ç»™Imageé€æ˜¾ã€‚
size: { height: height, width: width },
srcPixelFormat: image.PixelMapFormat.NV21,
})
AppStorage.setOrCreate('stridePixel', pixelMap);
}
nextImage.release();
})
}
});
})
}</p>
</li>
</ol>
<h4 data-id="heading-5">æ–¹æ¡ˆä¸‰</h4>
<ol>
<li>
<p>ä½¿ç”¨XComponentæ¸²æŸ“é¢„è§ˆå¯¹è±¡è¾“å‡ºçš„å›¾åƒã€‚</p>
<p>Stack() {
XComponent({
type: XComponentType.SURFACE,
controller: this.xComponentCtl
})
.onLoad(async () =&gt; {
logger.info('onLoad is called');
this.xComponentSurfaceId = this.xComponentCtl.getXComponentSurfaceId(); // è·å–ç»„ä»¶surfaceId
// åˆå§‹åŒ–ç›¸æœºï¼Œç»„ä»¶å®æ—¶æ¸²æŸ“æ¯å¸§é¢„è§ˆæµæ•°æ®
CameraService.initCamera(this.cameraDeviceIndex, this.xComponentSurfaceId);
})
.zIndex(0)</p>
<p>PublishView({ imageWidth: this.imageWidth, imageHeight: this.imageHeight })
.zIndex(1)</p>
<p>}
.onVisibleAreaChange([0.0, 1.0], (isVisible: boolean, _currentRation: number) =&gt; {
if (isVisible) {
CameraService.initCamera(this.cameraDeviceIndex, this.xComponentSurfaceId);
} else {
CameraService.releaseCamera();
}
})</p>
</li>
<li>
<p>åœ¨åˆå§‹ç›¸æœºæ¨¡å—æ—¶ï¼Œä½¿ç”¨getXComponentSurfaceIdè·å–XComponentå¯¹åº”Surfaceçš„IDï¼Œè°ƒç”¨createPreviewOutputåˆ›å»ºé¢„è§ˆè¾“å‡ºå¯¹è±¡ï¼Œå›¾ç‰‡é€æ˜¾ã€‚</p>
<p>async initCamera(cameraDeviceIndex: number, xComponentSurfaceId: string): Promise {
logger.debug(TAG, <code>initCamera cameraDeviceIndex: ${cameraDeviceIndex}</code>);
try {
await this.releaseCamera();
// è·å–ç›¸æœºç®¡ç†å™¨å®ä¾‹
this.cameraManager = this.getCameraManagerFn();
if (this.cameraManager === undefined) {
logger.error(TAG, 'cameraManager is undefined');
return;
}
this.cameras = this.getSupportedCamerasFn(this.cameraManager);
this.curCameraDevice = this.cameras[cameraDeviceIndex];
if (this.curCameraDevice === undefined) {
logger.error(TAG, 'Failed to create the camera input.');
return;
}
// åˆ›å»ºcameraInputè¾“å‡ºå¯¹è±¡
this.cameraInput = this.createCameraInputFn(this.cameraManager, this.curCameraDevice);
if (this.cameraInput === undefined) {
logger.error(TAG, 'Failed to create the camera input.');
return;
}
// æ‰“å¼€ç›¸æœº
let isOpenSuccess = await this.cameraInputOpenFn(this.cameraInput);
if (!isOpenSuccess) {
logger.error(TAG, 'Failed to open the camera.');
return;
}</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// é€‰æ‹©å…·æœ‰ä¸åŒçš„strideå’Œwidth</span>
let previewProfile: camera.Profile = {
  format: camera.CameraFormat.CAMERA_FORMAT_YUV_420_SP,
  size: {
    width: Constants.X_COMPONENT_SURFACE_WIDTH,
    height: Constants.X_COMPONENT_SURFACE_HEIGHT
  }
};
let size: image.Size = {
  width: Constants.X_COMPONENT_SURFACE_WIDTH,
  height: Constants.X_COMPONENT_SURFACE_HEIGHT
}
<span class="hljs-keyword">this</span>.receiver = image.createImageReceiver(size, image.ImageFormat.JPEG, <span class="hljs-number">8</span>);
<span class="hljs-keyword">this</span>.previewOutput = <span class="hljs-keyword">this</span>.createPreviewOutputFn(<span class="hljs-keyword">this</span>.cameraManager, previewProfile, xComponentSurfaceId);
<span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.previewOutput === undefined) {
  logger.error(TAG, <span class="hljs-string">'Failed to create the preview stream.'</span>);
  <span class="hljs-keyword">return</span>;
}
<span class="hljs-comment">// ä¼šè¯æµ</span>
await <span class="hljs-keyword">this</span>.sessionFlowFn(<span class="hljs-keyword">this</span>.cameraManager, <span class="hljs-keyword">this</span>.cameraInput, <span class="hljs-keyword">this</span>.previewOutput);
</code></pre>
<p>} catch (error) {
logger.error(TAG, <code>initCamera fail: ${JSON.stringify(error)}</code>);
}
}</p>
</li>
</ol>
<h4 data-id="heading-6">æ³¨æ„</h4>
<p>æœ¬ç¤ºä¾‹æœªè®¾ç½®æˆå…¨å±çŠ¶æ€ï¼Œå¼€å‘è€…å¯é€šè¿‡è®¾ç½®å®½æˆ–é«˜ä¸º100%ï¼Œå†æ ¹æ®å½“å‰è®¾å¤‡çš„åƒç´ æ¯”è®¾ç½®aspectRatio(å®½/é«˜)ï¼Œä¾‹å¦‚Mate60å¯è®¾ç½®ä¸ºaspectRatio(9/16)ã€‚</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">Stack</span>() {
  if (this.isShowStridePixel) {
    <span class="hljs-built_in">Image</span>(this.stridePixel)
      <span class="hljs-selector-class">.rotate</span>({
        z: <span class="hljs-number">0.5</span>,
        angle: this.previewRotate
      })
      <span class="hljs-selector-class">.zIndex</span>(<span class="hljs-number">0</span>)
  }
}
<span class="hljs-selector-class">.width</span>('<span class="hljs-number">100%</span>')
<span class="hljs-selector-class">.aspectRatio</span>(<span class="hljs-number">9</span>/<span class="hljs-number">16</span>)
</code></pre>
<h4 data-id="heading-7">å¦‚æœæ‚¨æƒ³ç³»ç»Ÿæ·±å…¥åœ°å­¦ä¹  HarmonyOS å¼€å‘æˆ–æƒ³è€ƒå–HarmonyOSè®¤è¯è¯ä¹¦ï¼Œæ¬¢è¿åŠ å…¥åä¸ºå¼€å‘è€…å­¦å ‚ï¼š</h4>
<h3 data-id="heading-8">è¯·ç‚¹å‡»â†’ï¼š <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.huawei.com%2Fconsumer%2Fcn%2Ftraining%2FclassDetail%2Fd0d15d9039414a8fad9f99ac4a3f5096%3Ftype%3D1%253Fha_source%253Dhmosclass%26ha_sourceId%3D89000248" target="_blank" title="https://developer.huawei.com/consumer/cn/training/classDetail/d0d15d9039414a8fad9f99ac4a3f5096?type=1%3Fha_source%3Dhmosclass&amp;ha_sourceId=89000248" ref="nofollow noopener noreferrer">HarmonyOSå®˜æ–¹è®¤è¯åŸ¹è®­</a></h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4d7334235632406a98b7fd0f5c633ef2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6bm_5Lq65oib:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767622192&amp;x-signature=WRHXBvwkT98VRCa1h2npt2nOac4%3D" alt="" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[HarmonyOSåº”ç”¨å¼€å‘ï¼šå¤šé‡ç­›é€‰]]></title>    <link>https://juejin.cn/post/7589159665856200723</link>    <guid>https://juejin.cn/post/7589159665856200723</guid>    <pubDate>2025-12-29T14:13:51.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589159665856200723" data-draft-id="7589126217250832425" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="HarmonyOSåº”ç”¨å¼€å‘ï¼šå¤šé‡ç­›é€‰"/> <meta itemprop="keywords" content="HarmonyOS,Android,ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2025-12-29T14:13:51.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é¹¿äººæˆ›"/> <meta itemprop="url" content="https://juejin.cn/user/4309685005226376"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            HarmonyOSåº”ç”¨å¼€å‘ï¼šå¤šé‡ç­›é€‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4309685005226376/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é¹¿äººæˆ›
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T14:13:51.000Z" title="Mon Dec 29 2025 14:13:51 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">å‰è¨€</h3>
<p>æœ¬ç¤ºä¾‹ä¸»è¦ä»‹ç»å¤šé‡ç­›é€‰åœºæ™¯ï¼Œåˆ©ç”¨æ•°ç»„æ–¹æ³•è¿‡æ»¤æ»¡è¶³æ¡ä»¶çš„æ•°æ®ï¼Œåˆ©ç”¨LazyForEachå®ç°åˆ—è¡¨ä¿¡æ¯çš„æ¸²æŸ“ä»¥åŠåˆ·æ–°ã€‚</p>
<h3 data-id="heading-1">æ•ˆæœå›¾é¢„è§ˆ</h3>
<p><img src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtybbs/753/188/655/0030086000753188655.20250208170657.45072066443077240724526669292193:50001231000000:2800:E671446133558720AB6FB68352808B527C99ACCA7BEC5851B8E80FE36378212B.gif" alt="" loading="lazy"/></p>
<p><strong>ä½¿ç”¨è¯´æ˜</strong></p>
<ol>
<li>ç­‰å¾…åˆ—è¡¨æ•°æ®å…¨éƒ¨åŠ è½½å®Œæˆåï¼Œç‚¹å‡»ç­›é€‰ç±»å‹ï¼Œå±•å¼€ç­›é€‰æ•°æ®ã€‚</li>
<li>é€‰ä¸­æƒ³è¦ç­›é€‰çš„æ•°æ®ï¼Œç‚¹å‡»ç¡®è®¤ï¼Œåˆ—è¡¨åˆ·æ–°ã€‚</li>
<li>å†æ¬¡ç‚¹å¼€ç­›é€‰ç±»å‹ï¼Œä¿ç•™ä¸Šæ¬¡ç­›é€‰çš„å†…å®¹ï¼Œç‚¹å‡»é‡ç½®ç­›é€‰å†…å®¹å¤åŸï¼Œåˆ—è¡¨æ•°æ®æ¢å¤ä¸ºæœªç­›é€‰å‰çš„æ•°æ®ã€‚</li>
</ol>
<h3 data-id="heading-2">å®ç°æ€è·¯</h3>
<p>æœ¬ä¾‹æ¶‰åŠçš„å…³é”®ç‰¹æ€§å’Œå®ç°æ–¹æ¡ˆå¦‚ä¸‹ï¼š</p>
<ol>
<li>
<p>ä½¿ç”¨Gridå®ç°ç­›é€‰æ¡ä»¶å¸ƒå±€ã€‚</p>
<p>Grid() {
ForEach(this.item.options, (options: string, idx: number) =&gt; {
GridItem() {
Text(options)
.textAlign(TextAlign.Center)
.fontSize(16)
.height(40)
.width('100%')
}
...
})
}
.columnsTemplate('1fr 1fr 1fr')
.rowsGap(16)
.columnsGap(16)
.margin({
left: 16,
right: 6,
top: 8,
bottom: 8
})
.layoutDirection(GridDirection.Row)
.constraintSize({
minHeight: '15%',
maxHeight: '15%'// gridä¼šæ’‘æ»¡maxHeightï¼Œå…ˆé™å®šæ­»é«˜åº¦
})</p>
</li>
<li>
<p>ä½¿ç”¨æ•°ç»„æ–¹æ³•å¯¹ç­›é€‰æ•°æ®è¿›è¡Œè¿‡æ»¤ï¼Œå¾—åˆ°ç­›é€‰æ•°æ®ã€‚</p>
<p>GridItem() {
Text(options)
.textAlign(TextAlign.Center)
.fontSize(16)
.height(40)
.width('100%')
}
.onClick(() =&gt; {
if (this.item.selectItem.includes(idx)) {
let index = this.item.selectItem.indexOf(idx);
let listIdx = this.changData.indexOf(options);
// åˆ é™¤å·²å­˜åœ¨çš„ç­›é€‰æ•°æ®çš„indexå€¼
this.item.selectItem.splice(index, 1);
// è¿‡æ»¤å‡ºæ¥æ²¡æœ‰é‡å¤æ•°æ®çš„ç­›é€‰å€¼
this.changData = this.changData.filter(i =&gt; i !== options);
this.selectArr = this.item.selectItem;
// åˆ é™¤å·²é€‰æ‹©çš„æ•°æ®çš„è¡Œæ•°indexæ•°ç»„
this.arrayListData.splice(listIdx, 1);
} else {
// æ·»åŠ ç­›é€‰æ•°æ®çš„indexå€¼
this.item.selectItem.push(idx);
// æ·»åŠ é€‰ä¸­çš„æ•°æ®
this.changData.push(options);
this.selectArr = this.item.selectItem;
// æ·»åŠ é€‰æ‹©çš„æ•°æ®çš„è¡Œæ•°indexæ•°ç»„
this.arrayListData.push(this.listIndex);
}
})</p>
</li>
<li>
<p>å¾—åˆ°ç­›é€‰çš„æ•°æ®åæ ¹æ®ç‚¹å‡»çš„ç­›é€‰æ•°æ®è¡Œæ•°ï¼Œä½¿ç”¨hasè¿›è¡Œifåˆ¤æ–­çœ‹æ˜¯å¦æ»¡è¶³å¤šé‡ç­›é€‰çš„æ¡ä»¶ã€‚</p>
<p>Button('ç¡®è®¤')
.height(40)
.width(150)
.backgroundColor(Color.White)
.fontColor('#333')
.onClick(() =&gt; {
this.isShow = false;
let arrayListData = new Set(this.arrayListData)
if (arrayListData.has(0) &amp;&amp; !arrayListData.has(1)) {
// ä»…é€‰æ‹©åœæ”¾æ—¶é—´
this.siteList.timeMultiFilter(this.changData);
} else if (!arrayListData.has(0) &amp;&amp; arrayListData.has(1)) {
// ä»…é€‰æ‹©å¥—é¤ç±»å‹
this.siteList.typeMultiFilter(this.changData);
} else if (!arrayListData.has(0) &amp;&amp; !arrayListData.has(1) &amp;&amp; arrayListData.has(2)) {
// ä»…é€‰æ‹©å……ç”µ
this.siteList.getInitalList();
} else if (this.changData.length === 0) {
// æœªå¯¹æ•°æ®è¿›è¡Œé€‰æ‹©
this.siteList.getInitalList();
} else {
// å¤šé‡ç­›é€‰
this.siteList.multiFilter(this.changData);
}
if (this.siteList.totalCount() === 0) {
this.siteList.getInitalList();
promptAction.showToast({ message: "æœªæ‰¾åˆ°ç›¸å…³æ•°æ®" });
}
})</p>
</li>
<li>
<p>ä½¿ç”¨filterè¿‡æ»¤å‡ºæ¥ç¬¦åˆæ¡ä»¶çš„æ•°æ®ï¼Œç­›é€‰å‡ºæ¥çš„æ•°ç»„æ„å»ºä¸€ä¸ªæ–°çš„Setï¼Œä½¿ç”¨Setä¸­çš„hasåˆ¤æ–­åˆ—è¡¨ä¸­ç›¸å…³æ•°æ®æ˜¯å¦å­˜åœ¨ã€‚</p>
<p>public multiFilter(changData: Array) {
let siteListString: string | undefined = AppStorage.get('siteList')
if (siteListString) {
let siteListObject: SiteListDataSource | undefined = JSON.parse(siteListString)
if (siteListObject === undefined) {
return
}
this.initialSiteList = siteListObject.dataList
this.dataList = []
this.dataList = this.initialSiteList
// ç­›é€‰æ•°æ®
let changDataSet = new Set(changData)
let dataList: SiteItem[] = this.dataList.filter(item =&gt; {
item.siteBale = item.siteBale.filter(item =&gt; {
if ((item.time &amp;&amp; item.type) &amp;&amp; (changDataSet.has(item.time)) &amp;&amp; (changDataSet.has(item.type))) {
return item
}
return
})
return item.siteBale
})
dataList = dataList.filter(item =&gt; item.siteBale.length !== 0);
this.dataList = [];
this.dataList = dataList;
this.notifyDataReload();
}
}</p>
</li>
<li>
<p>ä½¿ç”¨æ·±æ‹·è´ä¿ç•™åŸæ•°æ®ã€‚</p>
<p>/**</p>
<ul>
<li>è¿”å›åŸæ•°ç»„
*/
public getInitalList() {
let siteListString: string | undefined = AppStorage.get('siteList');
if (siteListString) {
let siteListObject: SiteListDataSource | undefined = JSON.parse(siteListString);
if (siteListObject === undefined) {
return;
}
this.initialSiteList = siteListObject.dataList;
this.dataList = [];
this.dataList = this.initialSiteList;
this.notifyDataReload();
}
}</li>
</ul>
</li>
</ol>
<h4 data-id="heading-3">å¦‚æœæ‚¨æƒ³ç³»ç»Ÿæ·±å…¥åœ°å­¦ä¹  HarmonyOS å¼€å‘æˆ–æƒ³è€ƒå–HarmonyOSè®¤è¯è¯ä¹¦ï¼Œæ¬¢è¿åŠ å…¥åä¸ºå¼€å‘è€…å­¦å ‚ï¼š</h4>
<h3 data-id="heading-4">è¯·ç‚¹å‡»â†’ï¼š <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.huawei.com%2Fconsumer%2Fcn%2Ftraining%2FclassDetail%2Fd0d15d9039414a8fad9f99ac4a3f5096%3Ftype%3D1%253Fha_source%253Dhmosclass%26ha_sourceId%3D89000248" target="_blank" title="https://developer.huawei.com/consumer/cn/training/classDetail/d0d15d9039414a8fad9f99ac4a3f5096?type=1%3Fha_source%3Dhmosclass&amp;ha_sourceId=89000248" ref="nofollow noopener noreferrer">HarmonyOSå®˜æ–¹è®¤è¯åŸ¹è®­</a></h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ca96e9337cad4238838c1d0b17c43d3d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6bm_5Lq65oib:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767622430&amp;x-signature=ZFj%2Fgf574NJle2PNbBNMEy%2FBffI%3D" alt="" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[HarmonyOSåº”ç”¨å¼€å‘ï¼šç½‘ç»œçŠ¶æ€ç›‘å¬]]></title>    <link>https://juejin.cn/post/7589201772118114310</link>    <guid>https://juejin.cn/post/7589201772118114310</guid>    <pubDate>2025-12-29T14:16:51.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589201772118114310" data-draft-id="7589126217250865193" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="HarmonyOSåº”ç”¨å¼€å‘ï¼šç½‘ç»œçŠ¶æ€ç›‘å¬"/> <meta itemprop="keywords" content="HarmonyOS,ç¨‹åºå‘˜,Android"/> <meta itemprop="datePublished" content="2025-12-29T14:16:51.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é¹¿äººæˆ›"/> <meta itemprop="url" content="https://juejin.cn/user/4309685005226376"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            HarmonyOSåº”ç”¨å¼€å‘ï¼šç½‘ç»œçŠ¶æ€ç›‘å¬
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4309685005226376/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é¹¿äººæˆ›
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T14:16:51.000Z" title="Mon Dec 29 2025 14:16:51 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">å‰è¨€</h3>
<p>æœ¬ç¤ºä¾‹ä»‹ç»å¦‚ä½•ä½¿ç”¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.huawei.com%2Fconsumer%2Fcn%2Fdoc%2Fharmonyos-references-V13%2Fjs-apis-net-connection-V13%3FcatalogVersion%3DV13" target="_blank" title="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/js-apis-net-connection-V13?catalogVersion=V13" ref="nofollow noopener noreferrer">@kit.NetworkKit</a>æ¥å£ç›‘å¬æ‰‹æœºç½‘ç»œçŠ¶æ€ï¼Œæ ¹æ®ä¸åŒçš„ç½‘ç»œçŠ¶æ€å¯¹è§†é¢‘è¿›è¡Œæ’­æ”¾ã€æš‚åœå¤„ç†ç­‰æ“ä½œã€‚</p>
<h3 data-id="heading-1">æ•ˆæœé¢„è§ˆå›¾</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0d4ed1a1faba4e1090963262cfa22bcc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6bm_5Lq65oib:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767622611&amp;x-signature=sNS9z4iq0Wj61mWq28UvHh2svt8%3D" alt="" loading="lazy"/></p>
<p><strong>ä½¿ç”¨è¯´æ˜</strong></p>
<ol>
<li>ç¬¬ä¸€æ¬¡æ‰“å¼€åº”ç”¨è¿›å…¥æ¡ˆä¾‹é¡µé¢ï¼Œè§†é¢‘ä¸æ’­æ”¾ã€‚</li>
<li>ç‚¹å‡»è‡ªåŠ¨æ’­æ”¾è®¾ç½®æŒ‰é’®ï¼Œè¿›å…¥è®¾ç½®é¡µé¢ï¼Œå¼€å¯æˆ–è€…å…³é—­3G/4G/5Gè‡ªåŠ¨æ’­æ”¾ã€WI-FIè‡ªåŠ¨æ’­æ”¾ã€‚</li>
<li>å¼€å¯æˆ–è€…å…³é—­æ‰‹æœºçš„èœ‚çªç½‘ç»œæˆ–è€…WI-FIå¼€å…³ï¼ŒæŸ¥çœ‹è§†é¢‘æ˜¯å¦æ ¹æ®è‡ªåŠ¨æ’­æ”¾è®¾ç½®é¡µé¢ä¸­çš„è®¾ç½®æ’­æ”¾æˆ–è€…æš‚åœã€‚</li>
<li>è¿”å›é¦–é¡µç€‘å¸ƒæµæˆ–è€…æ€æ­»åº”ç”¨é‡æ–°è¿›å…¥æ¡ˆä¾‹ï¼ŒæŸ¥çœ‹è§†é¢‘æ˜¯å¦æ ¹æ®è‡ªåŠ¨æ’­æ”¾è®¾ç½®ä¸­çš„è®¾ç½®å’Œæ‰‹æœºç½‘ç»œçŠ¶æ€æ’­æ”¾æˆ–è€…æš‚åœã€‚</li>
</ol>
<h3 data-id="heading-2">å®ç°æ€è·¯</h3>
<ol>
<li>
<p>é¡µé¢å®ç°</p>
<p>1.1 åœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Fharmonyos-cases%2Fcases%2Ftree%2Fmaster%2FCommonAppDevelopment%2Ffeature%2Fnetworkstatusobserver%2Fsrc%2Fmain%2Fets%2Fpages%2FVideoPage.ets" target="_blank" title="https://gitee.com/harmonyos-cases/cases/tree/master/CommonAppDevelopment/feature/networkstatusobserver/src/main/ets/pages/VideoPage.ets" ref="nofollow noopener noreferrer">VideoPage</a>ä¸­æ·»åŠ Videoç»„ä»¶ï¼Œè®¾ç½®åœ¨çº¿è§†é¢‘æ’­æ”¾</p>
<pre><code class="hljs language-kotlin" lang="kotlin">```
Video({
  src: <span class="hljs-string">"https://v.oh4k.com/muhou/2022/07/20220704-RIUq3Z.mp4"</span>,
   controller: <span class="hljs-keyword">this</span>.controller
}).height(<span class="hljs-number">300</span>)
  .width(<span class="hljs-string">'100%'</span>)
  .autoPlay(<span class="hljs-keyword">this</span>.autoPlay())
```
</code></pre>
<p>1.2 åœ¨aboutToAppearæ–¹æ³•ä¸­æ·»åŠ ç½‘ç»œçŠ¶æ€ç›‘å¬ï¼Œå¹¶å¼€å§‹ç›‘å¬WI-FIå’Œèœ‚çªæ•°æ®çš„çŠ¶æ€ã€‚</p>
<pre><code class="hljs language-scss" lang="scss">```
emitter<span class="hljs-selector-class">.on</span>(NetUtils.getInstance()<span class="hljs-selector-class">.getEmitterEvent</span>(), (data: emitter.EventData) =&gt; {
  if (data) {
    this<span class="hljs-selector-class">.netObserver</span>(data);
  } else {
    logger<span class="hljs-selector-class">.info</span>("aboutToAppear emitter on error, data is undefined.");
  }
});
NetUtils<span class="hljs-selector-class">.getInstance</span>()<span class="hljs-selector-class">.startNetObserve</span>(connection.NetBearType.BEARER_CELLULAR, connection.NetBearType.BEARER_WIFI);
```
</code></pre>
<p>1.3 åœ¨netObserveræ–¹æ³•ä¸­ï¼Œæ·»åŠ ä¸åŒç½‘ç»œçŠ¶æ€çš„å¤„ç†ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin">netObserver(<span class="hljs-keyword">data</span>: emitter.EventData) {
...
  let eventName: NetworkEventName = netEventData.eventName ?? -<span class="hljs-number">1</span>;
  switch (eventName) {
    case NetworkEventName.NetAvailable:
      <span class="hljs-keyword">if</span> (netEventData.netType === connection.NetBearType.BEARER_WIFI) {
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.wifiAutoPlay) {
          <span class="hljs-keyword">this</span>.startPlay();
        }
      }
      <span class="hljs-keyword">break</span>;
    case NetworkEventName.NetBlock:
      <span class="hljs-keyword">break</span>;
    case NetworkEventName.NetLost:
      <span class="hljs-keyword">if</span> (netEventData.netType === connection.NetBearType.BEARER_WIFI) {
        <span class="hljs-keyword">this</span>.wifiInterrupt();
      }
      <span class="hljs-keyword">break</span>;
    case NetworkEventName.NetUnavailable:
      <span class="hljs-keyword">if</span> (netEventData.netType === connection.NetBearType.BEARER_WIFI) {
        <span class="hljs-keyword">this</span>.wifiInterrupt();
      }
      <span class="hljs-keyword">break</span>;
    case NetworkEventName.WeakNet:
      <span class="hljs-comment">// å¦‚æœæ˜¯å¼±ç½‘ç¯å¢ƒ</span>
      <span class="hljs-keyword">if</span> (netEventData.status) {
        Prompt.showToast({ message: <span class="hljs-string">"å½“å‰ç½‘ç»œç¯å¢ƒè¾ƒå·®ï¼Œè§†é¢‘æ’­æ”¾å¯èƒ½å‡ºç°å¡é¡¿"</span> });
      }
      <span class="hljs-keyword">break</span>;
    default:
      logger.debug(<span class="hljs-string">"å½“å‰ç½‘ç»œçŠ¶æ€ï¼š"</span> + eventName);
      <span class="hljs-keyword">break</span>;
  }
}
</code></pre>
<p>1.4 åœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Fharmonyos-cases%2Fcases%2Ftree%2Fmaster%2FCommonAppDevelopment%2Ffeature%2Fnetworkstatusobserver%2Fsrc%2Fmain%2Fets%2Fpages%2FSettingPage.ets" target="_blank" title="https://gitee.com/harmonyos-cases/cases/tree/master/CommonAppDevelopment/feature/networkstatusobserver/src/main/ets/pages/SettingPage.ets" ref="nofollow noopener noreferrer">SettingPage</a>ä¸­æ·»åŠ Toggleç»„ä»¶ï¼Œç®¡ç†è‡ªåŠ¨æ’­æ”¾è®¾ç½®ã€‚</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-title function_ invoke__">Toggle</span>({ <span class="hljs-attr">type</span>: ToggleType.Switch, <span class="hljs-attr">isOn</span>: this.cellularAutoPlay })
  .<span class="hljs-title function_ invoke__">selectedColor</span>(<span class="hljs-string">'#007DFF'</span>)
  .<span class="hljs-title function_ invoke__">switchPointColor</span>(<span class="hljs-string">'#FFFFFF'</span>)
  .<span class="hljs-title function_ invoke__">onChange</span>((<span class="hljs-attr">isOn</span>: <span class="hljs-keyword">boolean</span>) =&gt; {
    logger.<span class="hljs-title function_ invoke__">info</span>(<span class="hljs-string">'Component status:'</span> + isOn);
    AppStorage.<span class="hljs-title function_ invoke__">setOrCreate</span>(<span class="hljs-string">'cellular_auto_play'</span>, isOn);
    PersistentStorage.<span class="hljs-title function_ invoke__">persistProp</span>(<span class="hljs-string">'cellular_auto_play'</span>, isOn);
  })
  .<span class="hljs-title function_ invoke__">width</span>(<span class="hljs-string">'10%'</span>)
</code></pre>
</li>
<li>
<p>ç½‘ç»œçŠ¶æ€ç›‘å¬å·¥å…·ç±»<a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Fharmonyos-cases%2Fcases%2Ftree%2Fmaster%2FCommonAppDevelopment%2Ffeature%2Fnetworkstatusobserver%2Fsrc%2Fmain%2Fets%2Futils%2FNetUtils.ets" target="_blank" title="https://gitee.com/harmonyos-cases/cases/tree/master/CommonAppDevelopment/feature/networkstatusobserver/src/main/ets/utils/NetUtils.ets" ref="nofollow noopener noreferrer">NetUtils</a>å®ç°ï¼Œé€šè¿‡<a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.huawei.com%2Fconsumer%2Fcn%2Fdoc%2Fharmonyos-references-V5%2Fjs-apis-net-connection-V5" target="_blank" title="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/js-apis-net-connection-V5" ref="nofollow noopener noreferrer">@kit.NetworkKit</a>æ¥å£ç›‘å¬ç½‘ç»œçŠ¶æ€ï¼Œç„¶åé€šè¿‡emitterå°†ç›‘å¬ç»“æœä¼ é€’ç»™é¡µé¢ã€‚</p>
<p>2.1 å¼€å¯ç½‘ç»œç›‘å¬</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">public</span> <span class="hljs-title function_">startNetObserve</span>(<span class="hljs-params">...netType: connection.NetBearType[]</span>) {
  netType.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params"><span class="hljs-keyword">type</span>: connection.NetBearType</span>) =&gt;</span> {
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">networkObserve</span>(<span class="hljs-keyword">type</span>);
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">type</span> === connection.<span class="hljs-property">NetBearType</span>.<span class="hljs-property">BEARER_WIFI</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">wifiStateObserve</span>();
    }
  })
}
</code></pre>
<p>2.2 å…³é—­ç½‘ç»œç›‘å¬</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">public</span> <span class="hljs-title function_">stopNetObserve</span>(<span class="hljs-params">netType: connection.NetBearType</span>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">connectionMap</span>.<span class="hljs-title function_">get</span>(netType).<span class="hljs-title function_">unregister</span>(<span class="hljs-function">() =&gt;</span> {
    logger.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Success unregisterï¼š"</span> + netType.<span class="hljs-title function_">toString</span>());
  })
}
</code></pre>
<p>2.3 ç½‘ç»œçŠ¶æ€ç›‘å¬</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title function_">networkObserve</span>(<span class="hljs-params">netType: connection.NetBearType</span>) {
  <span class="hljs-keyword">let</span> <span class="hljs-attr">netConnection</span>: connection.<span class="hljs-property">NetConnection</span> = connection.<span class="hljs-title function_">createNetConnection</span>({
    <span class="hljs-attr">netCapabilities</span>: {
      <span class="hljs-attr">bearerTypes</span>: [netType]
    }
  })
  netConnection.<span class="hljs-title function_">register</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {
    <span class="hljs-keyword">let</span> result = <span class="hljs-literal">true</span>;
    <span class="hljs-keyword">if</span> (error) {
      logger.<span class="hljs-title function_">info</span>(<span class="hljs-string">"NetUtils"</span>, <span class="hljs-string">"NetType :"</span> + netType + <span class="hljs-string">", network register failed: "</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(error));
      result = <span class="hljs-literal">false</span>;
    }
    logger.<span class="hljs-title function_">info</span>(<span class="hljs-string">"NetUtils"</span>, <span class="hljs-string">"NetType :"</span> + netType + <span class="hljs-string">", network register succeed"</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">postEvent</span>(<span class="hljs-title class_">NetworkEventName</span>.<span class="hljs-property">NetObserverRegister</span>, result, netType);
  });

  netConnection.<span class="hljs-title function_">on</span>(<span class="hljs-string">'netCapabilitiesChange'</span>, <span class="hljs-function">(<span class="hljs-params">data: connection.NetCapabilityInfo</span>) =&gt;</span> {
    logger.<span class="hljs-title function_">info</span>(<span class="hljs-string">"NetUtils"</span>, <span class="hljs-string">"NetType :"</span> + netType + <span class="hljs-string">", network netCapabilitiesChange: "</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(data));
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">postEvent</span>(<span class="hljs-title class_">NetworkEventName</span>.<span class="hljs-property">NetCapabilitiesChange</span>, data, netType);
  })

  netConnection.<span class="hljs-title function_">on</span>(<span class="hljs-string">"netAvailable"</span>, <span class="hljs-function">(<span class="hljs-params">data: connection.NetHandle</span>) =&gt;</span> {
    logger.<span class="hljs-title function_">info</span>(<span class="hljs-string">"NetUtils"</span>, <span class="hljs-string">"NetType :"</span> + netType + <span class="hljs-string">", network succeeded to get netAvailable: "</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(data));
    <span class="hljs-comment">// æ£€æŸ¥é»˜è®¤æ•°æ®ç½‘ç»œæ˜¯å¦è¢«æ¿€æ´»ï¼Œä½¿ç”¨åŒæ­¥æ–¹å¼è¿”å›æ¥å£ï¼Œå¦‚æœè¢«æ¿€æ´»åˆ™è¿”å›trueï¼Œå¦åˆ™è¿”å›falseã€‚</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">postEvent</span>(<span class="hljs-title class_">NetworkEventName</span>.<span class="hljs-property">NetAvailable</span>, connection.<span class="hljs-title function_">hasDefaultNetSync</span>(), netType);
  });
 
  <span class="hljs-comment">// è®¢é˜…ç½‘ç»œé˜»å¡çŠ¶æ€äº‹ä»¶ï¼Œå½“ç½‘ç»œé˜»å¡æ—¶ï¼Œå¦‚ç½‘ç»œæ€§èƒ½ä¸‹é™ã€æ•°æ®ä¼ è¾“å‡ºç°å»¶è¿Ÿç­‰æƒ…å†µæ—¶ï¼Œä¼šè§¦å‘è¯¥äº‹ä»¶</span>
  netConnection.<span class="hljs-title function_">on</span>(<span class="hljs-string">'netBlockStatusChange'</span>, <span class="hljs-function">(<span class="hljs-params">data: connection.NetBlockStatusInfo</span>) =&gt;</span> {
    logger.<span class="hljs-title function_">info</span>(<span class="hljs-string">"NetUtils"</span>, <span class="hljs-string">"NetType :"</span> + netType + <span class="hljs-string">", network netBlockStatusChange "</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(data));
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">postEvent</span>(<span class="hljs-title class_">NetworkEventName</span>.<span class="hljs-property">NetBlock</span>, data, netType)
  });
 
  netConnection.<span class="hljs-title function_">on</span>(<span class="hljs-string">'netConnectionPropertiesChange'</span>, <span class="hljs-function">(<span class="hljs-params">data: connection.NetConnectionPropertyInfo</span>) =&gt;</span> {
    logger.<span class="hljs-title function_">info</span>(<span class="hljs-string">"NetUtils"</span>, <span class="hljs-string">"NetType :"</span> + netType + <span class="hljs-string">", network netConnectionPropertiesChange "</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(data));
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">postEvent</span>(<span class="hljs-title class_">NetworkEventName</span>.<span class="hljs-property">NetConnectionPropertiesChange</span>, data, netType);
  });

  <span class="hljs-comment">// è®¢é˜…ç½‘ç»œä¸¢å¤±äº‹ä»¶ï¼Œå½“ç½‘ç»œä¸¥é‡ä¸­æ–­æˆ–æ­£å¸¸æ–­å¼€æ—¶è§¦å‘è¯¥äº‹ä»¶</span>
  <span class="hljs-comment">// ç½‘ç»œä¸¢å¤±æ˜¯æŒ‡ç½‘ç»œä¸¥é‡ä¸­æ–­æˆ–æ­£å¸¸æ–­å¼€äº‹ä»¶ï¼Œå½“æ–­å¼€Wi-Fiæ—¶ï¼Œæ˜¯å±äºæ­£å¸¸æ–­å¼€ç½‘ç»œè¿æ¥ï¼Œä¼šè§¦å‘netLostäº‹ä»¶</span>
  netConnection.<span class="hljs-title function_">on</span>(<span class="hljs-string">'netLost'</span>, <span class="hljs-function">(<span class="hljs-params">data: connection.NetHandle</span>) =&gt;</span> {
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">postEvent</span>(<span class="hljs-title class_">NetworkEventName</span>.<span class="hljs-property">NetLost</span>, <span class="hljs-literal">true</span>, netType)
    logger.<span class="hljs-title function_">info</span>(<span class="hljs-string">"NetUtils"</span>, <span class="hljs-string">"NetType :"</span> + netType + <span class="hljs-string">", Succeeded to get netLost: "</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(data));
  });
 
  <span class="hljs-comment">// è®¢é˜…ç½‘ç»œä¸å¯ç”¨äº‹ä»¶ï¼Œå½“ç½‘ç»œä¸å¯ç”¨æ—¶è§¦å‘è¯¥äº‹ä»¶</span>
  <span class="hljs-comment">// ç½‘ç»œä¸å¯ç”¨æ˜¯æŒ‡ç½‘ç»œä¸å¯ç”¨äº‹ä»¶ï¼Œå½“è¿æ¥çš„ç½‘ç»œä¸èƒ½ä½¿ç”¨æ—¶ï¼Œä¼šè§¦å‘netUnavailableäº‹ä»¶ã€‚</span>
  netConnection.<span class="hljs-title function_">on</span>(<span class="hljs-string">'netUnavailable'</span>, <span class="hljs-function">() =&gt;</span> {
    logger.<span class="hljs-title function_">info</span>(<span class="hljs-string">"NetUtils"</span>, <span class="hljs-string">"NetType :"</span> + netType + <span class="hljs-string">", Succeeded to get unavailable net event"</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">postEvent</span>(<span class="hljs-title class_">NetworkEventName</span>.<span class="hljs-property">NetUnavailable</span>, <span class="hljs-literal">true</span>, netType);
  });
 
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">connectionMap</span>.<span class="hljs-title function_">set</span>(netType, netConnection);
}
</code></pre>
<p>2.4 é€šè¿‡emitterå°†ç½‘ç»œç›‘å¬çŠ¶æ€ä¼ é€’ç»™é¡µé¢</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">private</span> postEvent(eventName: NetworkEventName, status: NetworkData, netType?: connection.NetBearType,
  priority?: emitter.EventPriority) {
  <span class="hljs-keyword">this</span>.emitterEvent.priority = priority;
  emitter.emit(<span class="hljs-keyword">this</span>.emitterEvent, {
    <span class="hljs-keyword">data</span>: new NetEventData(eventName, status, netType)
  })
}
</code></pre>
</li>
</ol>
<h4 data-id="heading-3">å¦‚æœæ‚¨æƒ³ç³»ç»Ÿæ·±å…¥åœ°å­¦ä¹  HarmonyOS å¼€å‘æˆ–æƒ³è€ƒå–HarmonyOSè®¤è¯è¯ä¹¦ï¼Œæ¬¢è¿åŠ å…¥åä¸ºå¼€å‘è€…å­¦å ‚ï¼š</h4>
<h3 data-id="heading-4">è¯·ç‚¹å‡»â†’ï¼š <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.huawei.com%2Fconsumer%2Fcn%2Ftraining%2FclassDetail%2Fd0d15d9039414a8fad9f99ac4a3f5096%3Ftype%3D1%253Fha_source%253Dhmosclass%26ha_sourceId%3D89000248" target="_blank" title="https://developer.huawei.com/consumer/cn/training/classDetail/d0d15d9039414a8fad9f99ac4a3f5096?type=1%3Fha_source%3Dhmosclass&amp;ha_sourceId=89000248" ref="nofollow noopener noreferrer">HarmonyOSå®˜æ–¹è®¤è¯åŸ¹è®­</a></h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d54702fb8d074dc2a2b06575780f37d5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6bm_5Lq65oib:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767622611&amp;x-signature=lc7tYLQmSCqI1P8SHK3DES7nsmE%3D" alt="" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[HarmonyOSåº”ç”¨å¼€å‘ï¼šè‡ªå®šä¹‰åœ°å€é€‰æ‹©ç»„ä»¶]]></title>    <link>https://juejin.cn/post/7589082912588841003</link>    <guid>https://juejin.cn/post/7589082912588841003</guid>    <pubDate>2025-12-29T14:20:05.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589082912588841003" data-draft-id="7589099845186797604" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="HarmonyOSåº”ç”¨å¼€å‘ï¼šè‡ªå®šä¹‰åœ°å€é€‰æ‹©ç»„ä»¶"/> <meta itemprop="keywords" content="HarmonyOS,ç¨‹åºå‘˜,Android"/> <meta itemprop="datePublished" content="2025-12-29T14:20:05.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é¹¿äººæˆ›"/> <meta itemprop="url" content="https://juejin.cn/user/4309685005226376"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            HarmonyOSåº”ç”¨å¼€å‘ï¼šè‡ªå®šä¹‰åœ°å€é€‰æ‹©ç»„ä»¶
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4309685005226376/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é¹¿äººæˆ›
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T14:20:05.000Z" title="Mon Dec 29 2025 14:20:05 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">å‰è¨€</h3>
<p>æœ¬ç¤ºä¾‹ä»‹ç»å¦‚ä½•ä½¿ç”¨bindSheetï¼ŒchangeIndexï¼ŒonAreaChangeå®ç°å¸¦åˆ‡æ¢åŠ¨æ•ˆçš„è‡ªå®šä¹‰åœ°å€é€‰æ‹©ç»„ä»¶ã€‚</p>
<h3 data-id="heading-1">æ•ˆæœå›¾é¢„è§ˆ</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/25281b5679ca4dfb8b95975c42c6c242~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6bm_5Lq65oib:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767622805&amp;x-signature=XR327%2B7myHIYxuuYifGQ8IE8hJE%3D" alt="" loading="lazy"/></p>
<p><strong>ä½¿ç”¨è¯´æ˜</strong></p>
<ol>
<li>
<p>è¿›å…¥é¡µé¢ï¼Œç‚¹å‡»åœºæ™¯ä¸€ä¸­â€œæ‰€åœ¨åœ°åŒºâ€ä¸€æ ï¼Œå¯æ‹‰èµ·çœå¸‚åŒºçš„åœ°å€é€‰æ‹©å¼¹çª—ã€‚é€‰æ‹©å®ŒåŒºåï¼Œå¼¹çª—è‡ªåŠ¨å…³é—­ï¼Œâ€œæ‰€åœ¨åœ°åŒºâ€ä¸€æ æ˜¾ç¤ºå½“å‰é€‰æ‹©çš„çœå¸‚åŒºåã€‚</p>
</li>
<li>
<p>è¿›å…¥é¡µé¢ï¼Œç‚¹å‡»åœºæ™¯äºŒä¸­çš„'è·å–åœ°å€ä¿¡æ¯'æŒ‰é’®ï¼Œå¯ä»¥æŸ¥çœ‹çœå¸‚åŒºåå’Œç›¸åº”çš„idã€‚ç‚¹å‡»â€œæ‰€åœ¨åœ°åŒºâ€ä¸€æ ï¼Œåœ¨æ‹‰èµ·çš„åœ°å€é€‰æ‹©å¼¹çª—é‡Œé€‰æ‹©å¦ä¸€ä¸ªçœå¸‚åŒºåï¼Œå†æ¬¡ç‚¹å‡»'è·å–åœ°å€ä¿¡æ¯'æŒ‰é’®ï¼Œä¼šæ˜¾ç¤ºæœ€æ–°é€‰æ‹©çš„çœå¸‚åŒºçš„ä¿¡æ¯ã€‚</p>
</li>
</ol>
<h3 data-id="heading-2">å®ç°æ€è·¯</h3>
<ol>
<li>
<p>ä½¿ç”¨getRawFileContentSyncä»rawfileç›®å½•ä¸‹è¯»å–çœå¸‚åŒºjsonæ–‡ä»¶æ•°æ®ï¼Œä½¿ç”¨util.TextDecoderè¿›è¡Œè§£ç ã€‚</p>
<p>getAddressData(): Array {
// ä»rawfileæœ¬åœ°jsonæ–‡ä»¶ä¸­è·å–æ•°æ®
const value = getContext().resourceManager.getRawFileContentSync(this.jsonFileDir);
// è§£ç ä¸ºutf-8æ ¼å¼
const textDecoder = util.TextDecoder.create('utf-8', { ignoreBOM: true });
const textDecoderResult = textDecoder.decodeToString(new Uint8Array(value.buffer));
const jsonObj: JsonObjType = JSON.parse(textDecoderResult) as JsonObjType;
const modelBuckets: Array = [];
// æ˜ å°„jsonæ•°æ®ä¸ºmodelå¯¹è±¡
const modelObj = jsonObj.addressList;
for (let i = 0; i &lt; modelObj.length; i++) {
const contactTemp = new Province(modelObj[i].code, modelObj[i].name, modelObj[i].children);
// ä»jsonä¸­è¯»å–æ¯ä¸ªçœæ•°æ®å†™å…¥modelBuckets
modelBuckets.push(contactTemp);
}
return modelBuckets;
}</p>
</li>
<li>
<p>ä½¿ç”¨bindSheetç»‘å®šåœ°å€é€‰æ‹©åŠæ¨¡æ€å¼¹çª—é¡µé¢ã€‚</p>
<p>Row() {
// ...
}
.width(<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>r</mi><msup><mo stretchy="false">(</mo><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup><mi>a</mi><mi>p</mi><mi>p</mi><mi mathvariant="normal">.</mi><mi>s</mi><mi>t</mi><mi>r</mi><mi>i</mi><mi>n</mi><mi>g</mi><mi mathvariant="normal">.</mi><mi>c</mi><mi>u</mi><mi>s</mi><mi>t</mi><mi>o</mi><msub><mi>m</mi><mi>a</mi></msub><mi>d</mi><mi>d</mi><mi>r</mi><mi>e</mi><mi>s</mi><msub><mi>s</mi><mi>p</mi></msub><mi>i</mi><mi>c</mi><mi>k</mi><mi>e</mi><msub><mi>r</mi><mi>f</mi></msub><mi>u</mi><mi>l</mi><msub><mi>l</mi><mi>s</mi></msub><mi>i</mi><mi>z</mi><msup><mi>e</mi><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mi mathvariant="normal">.</mi><mi>h</mi><mi>e</mi><mi>i</mi><mi>g</mi><mi>h</mi><mi>t</mi><mo stretchy="false">(</mo></mrow><annotation encoding="application/x-tex">r('app.string.custom_address_picker_full_size'))
.height(</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.038em;vertical-align:-0.2861em;"/><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mopen"><span class="mopen">(</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span><span class="mord mathnormal">a</span><span class="mord mathnormal">pp</span><span class="mord">.</span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mord mathnormal">in</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord">.</span><span class="mord mathnormal">c</span><span class="mord mathnormal">u</span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span><span class="mord mathnormal">o</span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">a</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mord mathnormal">dd</span><span class="mord mathnormal">res</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">p</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span><span class="mord mathnormal">i</span><span class="mord mathnormal">c</span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mord mathnormal">e</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10764em;">f</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span><span class="mord mathnormal">u</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0197em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">s</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mord mathnormal">i</span><span class="mord mathnormal" style="margin-right:0.04398em;">z</span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span><span class="mclose">))</span><span class="mord">.</span><span class="mord mathnormal">h</span><span class="mord mathnormal">e</span><span class="mord mathnormal">i</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal">h</span><span class="mord mathnormal">t</span><span class="mopen">(</span></span></span></span></span>r('app.float.custom_address_picker_size_forty_eight'))
.onClick(() =&gt; {
// æ˜¾ç¤ºåœ°å€é€‰æ‹©åŠæ¨¡æ€å¼¹çª—é¡µé¢
this.isShow = true;
this.currentIndex = AddressType.Province;
})
.bindSheet($$this.isShow, this.addressSelectPage(), {
height: $r('app.string.custom_address_picker_percent_seventy'), // åŠæ¨¡æ€å¼¹çª—é«˜åº¦
showClose: false, // è®¾ç½®ä¸æ˜¾ç¤ºè‡ªå¸¦çš„å…³é—­å›¾æ ‡
dragBar: false,
onDisappear: () =&gt; {
// é€€å‡ºåœ°å€é€‰æ‹©åŠæ¨¡æ€å¼¹çª—é¡µé¢æ—¶ï¼Œé‡ç½®ç›¸å…³å‚æ•°
this.animationDuration = 0;
// å¦‚æœå½“å‰çœå¸‚åŒºæ²¡é€‰å…¨ï¼Œåˆ™æ¸…ç©ºå½“å‰é€‰æ‹©çš„åœ°å€ä¿¡æ¯
if (this.currentSelectInfo.region === '') {
this.currentSelectInfo.provinceId = '';
this.currentSelectInfo.cityId = '';
this.currentSelectInfo.regionId = '';
this.currentSelectInfo.province = '';
this.currentSelectInfo.city = '';
this.currentSelectInfo.region = '';
this.cityList = [];
this.regionList = [];
}
}
})</p>
</li>
<li>
<p>ä½¿ç”¨changeIndexæ§åˆ¶çœå¸‚åŒºåˆ—è¡¨TabContentåˆ‡æ¢ã€‚ä½¿ç”¨ç»„ä»¶åŒºåŸŸå˜åŒ–å›è°ƒonAreaChangeè·å–é€‰æ‹©çš„çœå¸‚åŒºTextç»„ä»¶å®½åº¦ï¼Œå­˜å…¥textInfosæ•°ç»„ï¼Œç”¨äºåç»­è®¡ç®—é€‰æ‹©çœå¸‚åŒºååä¸‹æ–¹ä¸‹æ»‘çº¿åŠ¨ç”»æ°´å¹³åç§»é‡leftMarginã€‚</p>
<p>Text(<code>${params.name === '' ? 'è¯·é€‰æ‹©' : params.name} </code>)
.height(<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>r</mi><msup><mo stretchy="false">(</mo><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup><mi>a</mi><mi>p</mi><mi>p</mi><mi mathvariant="normal">.</mi><mi>s</mi><mi>t</mi><mi>r</mi><mi>i</mi><mi>n</mi><mi>g</mi><mi mathvariant="normal">.</mi><mi>c</mi><mi>u</mi><mi>s</mi><mi>t</mi><mi>o</mi><msub><mi>m</mi><mi>a</mi></msub><mi>d</mi><mi>d</mi><mi>r</mi><mi>e</mi><mi>s</mi><msub><mi>s</mi><mi>p</mi></msub><mi>i</mi><mi>c</mi><mi>k</mi><mi>e</mi><msub><mi>r</mi><mi>f</mi></msub><mi>u</mi><mi>l</mi><msub><mi>l</mi><mi>s</mi></msub><mi>i</mi><mi>z</mi><msup><mi>e</mi><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mi mathvariant="normal">.</mi><mi>f</mi><mi>o</mi><mi>n</mi><mi>t</mi><mi>S</mi><mi>i</mi><mi>z</mi><mi>e</mi><mo stretchy="false">(</mo></mrow><annotation encoding="application/x-tex">r('app.string.custom_address_picker_full_size'))
  .fontSize(</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.038em;vertical-align:-0.2861em;"/><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mopen"><span class="mopen">(</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span><span class="mord mathnormal">a</span><span class="mord mathnormal">pp</span><span class="mord">.</span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mord mathnormal">in</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord">.</span><span class="mord mathnormal">c</span><span class="mord mathnormal">u</span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span><span class="mord mathnormal">o</span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">a</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mord mathnormal">dd</span><span class="mord mathnormal">res</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">p</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span><span class="mord mathnormal">i</span><span class="mord mathnormal">c</span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mord mathnormal">e</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10764em;">f</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span><span class="mord mathnormal">u</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0197em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">s</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mord mathnormal">i</span><span class="mord mathnormal" style="margin-right:0.04398em;">z</span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span><span class="mclose">))</span><span class="mord">.</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mord mathnormal">o</span><span class="mord mathnormal">n</span><span class="mord mathnormal" style="margin-right:0.05764em;">tS</span><span class="mord mathnormal">i</span><span class="mord mathnormal">ze</span><span class="mopen">(</span></span></span></span></span>r('app.float.custom_address_picker_size_sixteen'))
.fontWeight(this.currentIndex === params.index ? Constants.FONT_WEIGHT_FIVE_HUNDRED :
Constants.FONT_WEIGHT_FOUR_HUNDRED)
.fontColor(this.currentIndex === params.index ? <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>r</mi><msup><mo stretchy="false">(</mo><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup><mi>a</mi><mi>p</mi><mi>p</mi><mi mathvariant="normal">.</mi><mi>c</mi><mi>o</mi><mi>l</mi><mi>o</mi><mi>r</mi><mi mathvariant="normal">.</mi><mi>c</mi><mi>u</mi><mi>s</mi><mi>t</mi><mi>o</mi><msub><mi>m</mi><mi>a</mi></msub><mi>d</mi><mi>d</mi><mi>r</mi><mi>e</mi><mi>s</mi><msub><mi>s</mi><mi>p</mi></msub><mi>i</mi><mi>c</mi><mi>k</mi><mi>e</mi><msub><mi>r</mi><mi>f</mi></msub><mi>o</mi><mi>n</mi><msub><mi>t</mi><mi>c</mi></msub><mi>o</mi><mi>l</mi><mi>o</mi><msub><mi>r</mi><mi>b</mi></msub><mi>l</mi><mi>a</mi><mi>c</mi><msup><mi>k</mi><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup><mo stretchy="false">)</mo><mo>:</mo></mrow><annotation encoding="application/x-tex">r('app.color.custom_address_picker_font_color_black') :
  </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.038em;vertical-align:-0.2861em;"/><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mopen"><span class="mopen">(</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span><span class="mord mathnormal">a</span><span class="mord mathnormal">pp</span><span class="mord">.</span><span class="mord mathnormal">co</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal" style="margin-right:0.02778em;">or</span><span class="mord">.</span><span class="mord mathnormal">c</span><span class="mord mathnormal">u</span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span><span class="mord mathnormal">o</span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">a</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mord mathnormal">dd</span><span class="mord mathnormal">res</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">p</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span><span class="mord mathnormal">i</span><span class="mord mathnormal">c</span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mord mathnormal">e</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10764em;">f</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span><span class="mord mathnormal">o</span><span class="mord mathnormal">n</span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">c</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">b</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">a</span><span class="mord mathnormal">c</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">:</span></span></span></span></span>r('app.color.custom_address_picker_font_color_gray'))
.constraintSize({ maxWidth: 'calc(33%)' })
.textOverflow({ overflow: TextOverflow.Ellipsis })
.maxLines(Constants.SIZE_ONE)
.onClick(() =&gt; {
// ä½¿ç”¨changeIndexæ§åˆ¶çœå¸‚åŒºåˆ—è¡¨TabContentåˆ‡æ¢
this.controller.changeIndex(params.index);
})
.id(params.index.toString())
.onAreaChange((oldValue: Area, newValue: Area) =&gt; {
// ä½¿ç”¨ç»„ä»¶åŒºåŸŸå˜åŒ–å›è°ƒonAreaChangeè·å–é€‰æ‹©çš„çœå¸‚åŒºTextç»„ä»¶å®½åº¦ï¼Œå­˜å…¥textInfosæ•°ç»„ï¼Œç”¨äºåç»­è®¡ç®—é€‰æ‹©çœå¸‚åŒºååä¸‹æ–¹ä¸‹æ»‘çº¿åŠ¨ç”»æ°´å¹³åç§»é‡leftMargin
// ç»„ä»¶åŒºåŸŸå˜åŒ–æ—¶è·å–å½“å‰Textçš„å®½åº¦newValue.widthå’Œxè½´ç›¸å¯¹ä½ç½®newValue.position.x
this.textInfos[params.index] = [newValue.position.x as number, newValue.width as number];
if (this.currentIndex === params.index &amp;&amp; params.index === AddressType.Province) {
// è®¡ç®—é€‰æ‹©çš„çœå¸‚åŒºåä¸‹æ–¹çš„ä¸‹æ»‘çº¿åç§»é‡
this.leftMargin = (this.textInfos[this.currentIndex][1] - Constants.DIVIDER_WIDTH) / 2;
}
})</p>
</li>
<li>
<p>åœ¨é€‰æ‹©å®ŒåŒºååï¼Œä½¿ç”¨JSON.parse(JSON.stringify(xxx))æ·±æ‹·è´é€‰æ‹©çš„çœå¸‚åŒºæ•°æ®ï¼Œç”¨äºåç»­æ“ä½œä¸­éœ€è¦åŠ è½½ä¸Šä¸€æ¬¡é€‰æ‹©çš„å®Œæ•´çœå¸‚åŒºæ•°æ®ã€‚</p>
<p>List() {
ForEach(this.regionList, (item: CommonAddressList) =&gt; {
ListItem() {
this.areaNameItem(AddressType.Region, item)
}.onClick(() =&gt; {
// è®°å½•é€‰æ‹©çš„åŒºä¿¡æ¯
this.currentSelectInfo.regionId = item.code;
this.currentSelectInfo.region = item.name;
this.provinceCityRegion =
this.currentSelectInfo.province + this.currentSelectInfo.city + this.currentSelectInfo.region;
// é€‰æ‹©åŒºåï¼Œé€€å‡ºåœ°å€é€‰æ‹©åŠæ¨¡æ€å¼¹çª—é¡µé¢
this.isShow = false;
// å°†å½“å‰é€‰ä¸­çœå¸‚åŒºä¿¡æ¯ä¿å­˜åˆ°lastSelectInfo
this.lastSelectInfo.provinceId = this.currentSelectInfo.provinceId;
this.lastSelectInfo.province = this.currentSelectInfo.province;
this.lastSelectInfo.cityId = this.currentSelectInfo.cityId;
this.lastSelectInfo.city = this.currentSelectInfo.city;
this.lastSelectInfo.regionId = this.currentSelectInfo.regionId;
this.lastSelectInfo.region = this.currentSelectInfo.region;
// TODO çŸ¥è¯†ç‚¹ï¼šåœ¨é€‰æ‹©å®ŒåŒºååï¼Œä½¿ç”¨JSON.parse(JSON.stringify(xxx))æ·±æ‹·è´é€‰æ‹©çš„çœå¸‚åŒºæ•°æ®ï¼Œç”¨äºåç»­æ“ä½œä¸­éœ€è¦åŠ è½½ä¸Šä¸€æ¬¡é€‰æ‹©çš„å®Œæ•´çœå¸‚åŒºæ•°æ®
// æ·±æ‹·è´ä¿å­˜åˆ°ç›¸åº”çš„å˜é‡ä¸­
this.lastCityList = JSON.parse(JSON.stringify(this.cityList));
this.lastRegionList = JSON.parse(JSON.stringify(this.regionList));
this.address = JSON.parse(JSON.stringify(this.lastSelectInfo));
})
}, (item: CommonAddressList) =&gt; JSON.stringify(item))
}</p>
</li>
</ol>
<h2 data-id="heading-3">æ€»ç»“</h2>
<p>æœ¬ç¤ºä¾‹ä¸­å¦‚æœå½“å‰ç‚¹å‡»é€‰æ‹©çš„çœæˆ–è€…å¸‚ä¸ä¹‹å‰é€‰æ‹©ä¸€æ ·ï¼Œåˆ™è·³è¿‡çœã€å¸‚æ•°æ®è·å–ï¼Œç›´æ¥è°ƒç”¨changeIndex(AddressType.City)åˆ‡æ¢åˆ°ä¸‹ä¸€çº§åœ°åŒºåˆ—è¡¨ï¼Œå‡å°‘å†—ä½™æŸ¥è¯¢ä»¥æå‡æ€§èƒ½ã€‚</p>
<h4 data-id="heading-4">å¦‚æœæ‚¨æƒ³ç³»ç»Ÿæ·±å…¥åœ°å­¦ä¹  HarmonyOS å¼€å‘æˆ–æƒ³è€ƒå–HarmonyOSè®¤è¯è¯ä¹¦ï¼Œæ¬¢è¿åŠ å…¥åä¸ºå¼€å‘è€…å­¦å ‚ï¼š</h4>
<h3 data-id="heading-5">è¯·ç‚¹å‡»â†’ï¼š <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.huawei.com%2Fconsumer%2Fcn%2Ftraining%2FclassDetail%2Fd0d15d9039414a8fad9f99ac4a3f5096%3Ftype%3D1%253Fha_source%253Dhmosclass%26ha_sourceId%3D89000248" target="_blank" title="https://developer.huawei.com/consumer/cn/training/classDetail/d0d15d9039414a8fad9f99ac4a3f5096?type=1%3Fha_source%3Dhmosclass&amp;ha_sourceId=89000248" ref="nofollow noopener noreferrer">HarmonyOSå®˜æ–¹è®¤è¯åŸ¹è®­</a></h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f6aab8df1eb046b69f3ba6cb0cd870f1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6bm_5Lq65oib:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767622805&amp;x-signature=X57sWKkODkQ8AEru5hu5Jpclmqs%3D" alt="" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[HarmonyOSåº”ç”¨å¼€å‘ï¼šWebviewæ‹‰èµ·è‡ªå®šä¹‰é”®ç›˜]]></title>    <link>https://juejin.cn/post/7589126217250914345</link>    <guid>https://juejin.cn/post/7589126217250914345</guid>    <pubDate>2025-12-29T14:26:57.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589126217250914345" data-draft-id="7589126217250897961" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="HarmonyOSåº”ç”¨å¼€å‘ï¼šWebviewæ‹‰èµ·è‡ªå®šä¹‰é”®ç›˜"/> <meta itemprop="keywords" content="HarmonyOS,ç¨‹åºå‘˜,Android"/> <meta itemprop="datePublished" content="2025-12-29T14:26:57.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é¹¿äººæˆ›"/> <meta itemprop="url" content="https://juejin.cn/user/4309685005226376"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            HarmonyOSåº”ç”¨å¼€å‘ï¼šWebviewæ‹‰èµ·è‡ªå®šä¹‰é”®ç›˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4309685005226376/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é¹¿äººæˆ›
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T14:26:57.000Z" title="Mon Dec 29 2025 14:26:57 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">åœºæ™¯æè¿°</h3>
<p>åœ¨ç‰¹æ®Šçš„H5åœºæ™¯ä¸‹éœ€è¦åº”ç”¨æ‹‰èµ·è‡ªå®šä¹‰é”®ç›˜è¿›è¡Œè¾“å…¥ã€‚</p>
<p>åœºæ™¯ä¸€ï¼šä½¿ç”¨jsBridgeæ‹‰èµ·è‡ªå®šä¹‰å¼¹çª—å†™è‡ªå®šä¹‰é”®ç›˜ï¼Œå†é€šè¿‡jsBridgeä¼ å‚å®ç°è¾“å…¥ã€‚</p>
<p>åœºæ™¯äºŒï¼šä½¿ç”¨webçš„åŒå±‚æ¸²æŸ“å°†åŸç”ŸtextInputç»„ä»¶æ¸²æŸ“åˆ°é¡µé¢ä¸Šã€‚</p>
<h3 data-id="heading-1">æ–¹æ¡ˆæè¿°</h3>
<p>é€šè¿‡æ³¨å†Œä¸€ä¸ªjsä»£ç†å¯¹è±¡è¢«webçš„registerJavaScriptProxyæ–¹æ³•è°ƒç”¨æ‹‰èµ·CustomDialogï¼Œåœ¨CustomDialogä¸Šæ”¾ç½®ä¸€ä¸ªcustomkeyboardÂ </p>
<p>åœºæ™¯ä¸€ï¼šé€šè¿‡jsBridgeæ‹‰èµ·è‡ªå®šä¹‰å¼¹çª—ï¼Œåœ¨è‡ªå®šä¹‰å¼¹çª—ä¸Šæ”¾ç½®è‡ªå®šä¹‰é”®ç›˜ï¼Œä¾‹å¦‚éœ€è¦è¾“å…¥å¯†ç æ—¶çš„å®‰å…¨é”®ç›˜ã€‚Â </p>
<h4 data-id="heading-2">æ•ˆæœå›¾</h4>
<p><img alt="" src="" loading="lazy"/></p>
<h3 data-id="heading-3">æ–¹æ¡ˆÂ </h3>
<p>é€šè¿‡æ³¨å†Œä¸€ä¸ªjsä»£ç†å¯¹è±¡è¢«webçš„registJavaScriptProxyæ–¹æ³•è°ƒç”¨æ‹‰èµ·CustomDialogï¼Œåœ¨CustomDialogä¸Šæ”¾ç½®ä¸€ä¸ªè‡ªå®šä¹‰é”®ç›˜ç»„ä»¶ï¼Œé€šè¿‡åœ¨H5ä¸Šinputæ ‡ç­¾çš„readonlyå±æ€§å’Œæ³¨å†Œçš„jsæ–¹æ³•changeNumberså®ç°åœ¨åŸç”Ÿç«¯è¾“å…¥æ•°å­—ä¼ åˆ°H5ä¸Šï¼Œä»–ä»¬ä¹‹é—´é€šè¿‡@Linkè£…é¥°å™¨ç»‘å®šçš„å˜é‡è¿›è¡Œä¼ å€¼ï¼Œæ‰€ä»¥ç‚¹å‡»åˆ é™¤è¾“å…¥çš„å†…å®¹ä¹Ÿæ˜¯å¯ä»¥åœ¨H5ä¸Šå®ç°çš„ã€‚Â </p>
<h4 data-id="heading-4">æ ¸å¿ƒä»£ç </h4>
<p>é€šè¿‡javaScriptProxyæ–¹æ³•æ‹‰èµ·è‡ªå®šä¹‰å¼¹çª—ï¼Œåœ¨H5ä¸Šçš„inputæ ‡ç­¾ç»‘å®šä¸€ä¸ªonclickäº‹ä»¶ï¼Œå½“ç‚¹å‡»è¾“å…¥æ¡†åä¼šè°ƒç”¨ä»åŸç”Ÿæ³¨å†Œè¿‡æ¥çš„jsä»£ç†æ–¹æ³•openWindowã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript">&lt;input <span class="hljs-keyword">type</span>=<span class="hljs-string">"text"</span> name=<span class="hljs-string">"number_info"</span> <span class="hljs-keyword">readonly</span> onclick=<span class="hljs-string">"openWindow()"</span> value=<span class="hljs-string">""</span> style=<span class="hljs-string">"width: 500px;height: 100px;font-size:50px;border:1px solid # f00;"</span>&gt;
 
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
 
<span class="hljs-keyword">function</span> <span class="hljs-title function_">openWindow</span>(<span class="hljs-params"/>) {
 
<span class="hljs-keyword">let</span> value = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementsByName</span>(<span class="hljs-string">"number_info"</span>)[<span class="hljs-number">0</span>].<span class="hljs-property">value</span>;
 
<span class="hljs-variable language_">window</span>.<span class="hljs-property">myJsb</span>.<span class="hljs-title function_">openDialog</span>(value)
 
}
 
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
</code></pre>
<p>å½“H5ä¸ŠopenWindowæ–¹æ³•è¢«è°ƒç”¨åä¼šé€šè¿‡jsBridgeè°ƒç”¨ä»¥ä¸‹ä¸¤ä¸ªjsä»£ç†æ–¹æ³•æ‰“å¼€è‡ªå®šä¹‰å¼¹çª—ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin">jsbObject: JsbObject = {
 
openDialog: (value: string) =&gt; {
 
<span class="hljs-keyword">this</span>.showDialog(<span class="hljs-keyword">this</span>, value);
 
}
 
}
 
showDialog(context: <span class="hljs-keyword">object</span>, value: string) {
 
<span class="hljs-comment">// æŠŠè‡ªå®šä¹‰å¼¹çª—è°ƒå‡ºæ¥</span>
 
<span class="hljs-keyword">this</span>.currentData = value;
 
<span class="hljs-keyword">this</span>.dialogController.<span class="hljs-keyword">open</span>()
 
}
 
 
 
Web({ src: <span class="hljs-string">"resource://rawfile/web_test.html"</span>, controller: <span class="hljs-keyword">this</span>.webviewController })
 
.javaScriptAccess(<span class="hljs-literal">true</span>)
 
.javaScriptProxy({
 
name: <span class="hljs-string">"myJsb"</span>,
 
<span class="hljs-keyword">object</span>: <span class="hljs-keyword">this</span>.jsbObject,
 
methodList: [<span class="hljs-string">"openDialog"</span>],
 
controller: <span class="hljs-keyword">this</span>.webviewController
 
}
</code></pre>
<p>å°†è‡ªå®šä¹‰é”®ç›˜æ”¾ç½®åœ¨è‡ªå®šä¹‰å¼¹çª—ä¸Šã€‚</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-keyword">@CustomDialog</span>
 
struct CustomDialogExample {
 
<span class="hljs-keyword">@Link</span> <span class="hljs-attribute">currentData</span>: string
 
<span class="hljs-attribute">dialogControllerTwo</span>: CustomDialogController | null = new CustomDialogController({
 
builder: <span class="hljs-built_in">CustomDialogExample</span>({ currentData: <span class="hljs-variable">$currentData</span> }),
 
alignment: DialogAlignment.Bottom,
 
offset: { dx: <span class="hljs-number">0</span>, dy: -<span class="hljs-number">25</span> }
 
})
 
controller?: CustomDialogController
 
 
 
<span class="hljs-built_in">build</span>() {
 
<span class="hljs-built_in">Column</span>() {
 
<span class="hljs-selector-tag">Button</span>('x')<span class="hljs-selector-class">.onClick</span>(() =&gt; {
 
<span class="hljs-comment">// å…³é—­è‡ªå®šä¹‰é”®ç›˜</span>
 
if (this.controller != undefined) {
 
this<span class="hljs-selector-class">.controller</span><span class="hljs-selector-class">.close</span>()
 
}
 
})
 
<span class="hljs-attribute">Grid</span>() {
 
<span class="hljs-built_in">ForEach</span>([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>, '*', <span class="hljs-number">0</span>, 'åˆ é™¤'], (item: number | string) =&gt; {
 
<span class="hljs-built_in">GridItem</span>() {
 
<span class="hljs-selector-tag">Button</span>(item + "")
 
<span class="hljs-selector-class">.width</span>(<span class="hljs-number">110</span>)<span class="hljs-selector-class">.onClick</span>(() =&gt; {
 
if (item == 'åˆ é™¤') {
 
if (this.currentData.length &gt; <span class="hljs-number">0</span>) {
 
this<span class="hljs-selector-class">.currentData</span> = this<span class="hljs-selector-class">.currentData</span><span class="hljs-selector-class">.substring</span>(<span class="hljs-number">0</span>, this.currentData.length - <span class="hljs-number">1</span>);
 
}
 
} else {
 
this<span class="hljs-selector-class">.currentData</span> += item
 
}
 
})
 
}
 
})
 
}<span class="hljs-selector-class">.maxCount</span>(<span class="hljs-number">3</span>)<span class="hljs-selector-class">.columnsGap</span>(<span class="hljs-number">10</span>)<span class="hljs-selector-class">.rowsGap</span>(<span class="hljs-number">10</span>)<span class="hljs-selector-class">.padding</span>(<span class="hljs-number">5</span>)
 
}<span class="hljs-selector-class">.backgroundColor</span>(Color.Gray)
 
}
 
}
</code></pre>
<p>åœ¨è‡ªå®šä¹‰é”®ç›˜ä¸Šè¾“å…¥å†…å®¹çš„æ—¶å€™ä¼šè°ƒç”¨onChangeInputValueæ–¹æ³•ï¼Œé€šè¿‡é‡Œé¢çš„runJavaScriptè°ƒç”¨H5ä¸Šçš„jsæ–¹æ³•changeNumberä¼ å€¼åˆ°H5çš„è¾“å…¥æ¡†ä¸­ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-title function_">onChangeInputValue</span>(<span class="hljs-params">stateName: <span class="hljs-built_in">string</span></span>){
 
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'this.currentData:'</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentData</span>)
 
<span class="hljs-variable language_">this</span>.<span class="hljs-property">webviewController</span>.<span class="hljs-title function_">runJavaScript</span>(<span class="hljs-string">'changeNumber("'</span>+ <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentData</span> +<span class="hljs-string">'")'</span>)
 
.<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">result</span>) =&gt;</span> {
 
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'result: '</span> + result);
 
})
 
}
 
 
&lt;&lt;input <span class="hljs-keyword">type</span>=<span class="hljs-string">"text"</span> name=<span class="hljs-string">"number_info"</span> <span class="hljs-keyword">readonly</span> onclick=<span class="hljs-string">"openWindow()"</span> value=<span class="hljs-string">""</span> style=<span class="hljs-string">"width: 500px;height: 100px;font-size:50px;border:1px solid # f00;"</span> /&gt;
 
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
 
<span class="hljs-keyword">function</span> <span class="hljs-title function_">changeNumber</span>(<span class="hljs-params">value</span>){
 
<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementsByName</span>(<span class="hljs-string">"number_info"</span>)[<span class="hljs-number">0</span>].<span class="hljs-property">value</span> = value;
 
}
 
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
</code></pre>
<p>**åœºæ™¯äºŒï¼š**<strong>é€šè¿‡åŒå±‚æ¸²æŸ“æ¸²æŸ“ä¸€ä¸ªåŸç”Ÿçš„è‡ªå®šä¹‰é”®ç›˜</strong></p>
<p><strong>æ•ˆæœå›¾</strong></p>
<p><img alt="" src="" loading="lazy"/></p>
<h3 data-id="heading-5">æ–¹æ¡ˆ</h3>
<p>æ•´ä½“å®ç°æ•ˆæœä¸ºï¼šé€šè¿‡webçš„åŒå±‚æ¸²æŸ“åŠŸèƒ½å®ç°å°†åŸç”ŸTextInputç»„ä»¶æ¸²æŸ“åˆ°H5éœ€è¦ä½¿ç”¨è‡ªå®šä¹‰é”®ç›˜çš„é¡µé¢ä¸­ï¼Œè¿™æ ·å°±å¯ä»¥å®ç°åœ¨H5æ‹‰èµ·è‡ªå®šä¹‰é”®ç›˜ï¼Œå¹¶ä¸”ä½¿ç”¨å®ƒçš„å…¨éƒ¨åŠŸèƒ½ã€‚</p>
<h4 data-id="heading-6">æ ¸å¿ƒä»£ç </h4>
<ol>
<li>
<p>åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰é”®ç›˜å¹¶ç»‘å®šåˆ°åŸç”ŸtextInputç»„ä»¶ä¸Šã€‚</p>
<p>@Component</p>
<p>struct ButtonComponent {</p>
<p>controller1: TextInputController = new TextInputController()</p>
<p>@State inputValue: string = ""</p>
<p>// è‡ªå®šä¹‰é”®ç›˜ç»„ä»¶</p>
<p>@Builder</p>
<p>CustomKeyboardBuilder() {</p>
<p>Column() {</p>
<p>Button('x').onClick(() =&gt; {</p>
<p>// å…³é—­è‡ªå®šä¹‰é”®ç›˜</p>
<p>this.controller1.stopEditing()</p>
<p>})</p>
<p>Grid() {</p>
<p>ForEach([1, 2, 3, 4, 5, 6, 7, 8, 9, '*', 0, '# '], (item: number | string) =&gt; {</p>
<p>GridItem() {</p>
<p>Button(item + "")</p>
<p>.width(110).onClick(() =&gt; {</p>
<p>this.inputValue += item</p>
<p>})</p>
<p>}</p>
<p>})</p>
<p>}.maxCount(3).columnsGap(10).rowsGap(10).padding(5)</p>
<p>}.backgroundColor(Color.Pink)</p>
<p>}</p>
<p>@ObjectLink params: Params</p>
<p>@State bkColor: Color = Color.Red</p>
<p>@State outSetValueTwo: number = 40</p>
<p>@State outSetValueOne: number = 40</p>
<p>@State tipsValue: number = 40</p>
<p>controller: web_webview.WebviewController = new web_webview.WebviewController();</p>
<p>build() {</p>
<p>Column() {</p>
<p>TextInput({ controller: this.controller1, text: this.inputValue })// ç»‘å®šè‡ªå®šä¹‰é”®ç›˜</p>
<p>.customKeyboard(this.CustomKeyboardBuilder()).margin(10).border({ width: 1 })</p>
<p>}</p>
<p>.width(this.params.width)</p>
<p>.height(this.params.height)</p>
<p>}</p>
<p>}</p>
</li>
</ol>
<p>å°†åŸç”ŸtextInputç»„ä»¶é€šè¿‡webåŒå±‚æ¸²æŸ“åŠŸèƒ½æ¸²æŸ“åˆ°H5ä¸Šçš„embedæ ‡ç­¾ä¸Šã€‚</p>
<h4 data-id="heading-7">å¦‚æœæ‚¨æƒ³ç³»ç»Ÿæ·±å…¥åœ°å­¦ä¹  HarmonyOS å¼€å‘æˆ–æƒ³è€ƒå–HarmonyOSè®¤è¯è¯ä¹¦ï¼Œæ¬¢è¿åŠ å…¥åä¸ºå¼€å‘è€…å­¦å ‚ï¼š</h4>
<h3 data-id="heading-8">è¯·ç‚¹å‡»â†’ï¼š <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.huawei.com%2Fconsumer%2Fcn%2Ftraining%2FclassDetail%2Fd0d15d9039414a8fad9f99ac4a3f5096%3Ftype%3D1%253Fha_source%253Dhmosclass%26ha_sourceId%3D89000248" target="_blank" title="https://developer.huawei.com/consumer/cn/training/classDetail/d0d15d9039414a8fad9f99ac4a3f5096?type=1%3Fha_source%3Dhmosclass&amp;ha_sourceId=89000248" ref="nofollow noopener noreferrer">HarmonyOSå®˜æ–¹è®¤è¯åŸ¹è®­</a></h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c3e2762caa324b73be4a3ed3d9c74740~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6bm_5Lq65oib:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767623216&amp;x-signature=CxNXEKzzJBXBLoyncdzcJCVwFgI%3D" alt="" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[HarmonyOSåº”ç”¨å¼€å‘ï¼šæ¡Œé¢å¡ç‰‡å®ç°]]></title>    <link>https://juejin.cn/post/7589126217250930729</link>    <guid>https://juejin.cn/post/7589126217250930729</guid>    <pubDate>2025-12-29T14:29:36.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589126217250930729" data-draft-id="7589082912588873771" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="HarmonyOSåº”ç”¨å¼€å‘ï¼šæ¡Œé¢å¡ç‰‡å®ç°"/> <meta itemprop="keywords" content="HarmonyOS,ç¨‹åºå‘˜,Android"/> <meta itemprop="datePublished" content="2025-12-29T14:29:36.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é¹¿äººæˆ›"/> <meta itemprop="url" content="https://juejin.cn/user/4309685005226376"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            HarmonyOSåº”ç”¨å¼€å‘ï¼šæ¡Œé¢å¡ç‰‡å®ç°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4309685005226376/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é¹¿äººæˆ›
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T14:29:36.000Z" title="Mon Dec 29 2025 14:29:36 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">å‰è¨€</h3>
<p>æ¡Œé¢å¡ç‰‡æ˜¯æ¯”è¾ƒå¸¸è§çš„åŠŸèƒ½ï¼Œæœ¬æ¡ˆä¾‹è¯¦ç»†åˆ—ä¸¾äº†å¡ç‰‡å¼€å‘çš„å¤§éƒ¨åˆ†åŠŸèƒ½ï¼Œå¦‚ä½¿ç”¨postCardActionæ¥å£å¿«é€Ÿæ‹‰èµ·å¡ç‰‡æä¾›æ–¹åº”ç”¨çš„æŒ‡å®šUIAbilityï¼Œé€šè¿‡messageäº‹ä»¶åˆ·æ–°å¡ç‰‡å†…å®¹ç­‰ï¼Œä¸ºå¼€å‘è€…æä¾›äº†å¡ç‰‡åŠŸèƒ½çš„å±•ç¤ºã€‚</p>
<h3 data-id="heading-1">æ•ˆæœå›¾é¢„è§ˆ</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3197ee4a1e484043be642cf73fc7ff83~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6bm_5Lq65oib:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767623376&amp;x-signature=T%2F1OT3voKJCBzIlE22EsE23iED4%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-2">ä½¿ç”¨è¯´æ˜</h3>
<ol>
<li>é•¿æŒ‰åº”ç”¨ï¼Œæ·»åŠ å¡ç‰‡åˆ°æ¡Œé¢ã€‚</li>
<li>å¡ç‰‡å†…å¯æ»‘åŠ¨é€‰æ‹©æ¡ˆä¾‹ï¼Œç‚¹å‡»å¯è¿›å…¥æ¡ˆä¾‹è¯¦æƒ…ã€‚</li>
<li>éƒ¨åˆ†æ¡ˆä¾‹æ— è¯¦æƒ…é¡µæ—¶ï¼Œç‚¹å‡»è·³è½¬åˆ°é¦–é¡µç€‘å¸ƒæµã€‚</li>
</ol>
<h3 data-id="heading-3">å®ç°æ€è·¯</h3>
<ol>
<li>æ–°å»ºå¡ç‰‡</li>
<li>é…ç½®formconfig</li>
<li>ç¼–å†™å¡ç‰‡UIä»£ç </li>
<li>è§¦å‘åˆ·æ–°äº‹ä»¶</li>
<li>è§¦å‘ç‚¹å‡»äº‹ä»¶</li>
</ol>
<h3 data-id="heading-4">å®ç°æ­¥éª¤</h3>
<p>æœ¬ä¾‹æ¶‰åŠçš„å…³é”®ç‰¹æ€§å’Œå®ç°æ–¹æ¡ˆå¦‚ä¸‹ï¼š</p>
<ol>
<li>
<p>æ–°å»ºå¡ç‰‡ã€‚å³é”®ç‚¹å‡»entryç›®å½•ï¼Œé€‰æ‹©æ–°å»º-&gt;Service Widget-&gt;Dynamic Widgetï¼Œå…¶ä¸­Dynamic Widgetä¸ºåŠ¨æ€å¡ç‰‡ï¼ŒStatic Widgetä¸ºé™æ€å¡ç‰‡ã€‚æ­¤æ—¶ä¼šç”Ÿæˆå‡ ä¸ªæ–‡ä»¶ï¼šé…ç½®æ–‡ä»¶<code>form_config.json</code>ï¼›å¡ç‰‡Ability<code>EntryFormAbility.ets</code>ï¼›å¡ç‰‡ç»„ä»¶<code>WidgetCard.ets</code>ã€‚</p>
</li>
<li>
<p>æ–°å»ºå¡ç‰‡åï¼Œæ ¹æ®éœ€è¦ï¼ˆå¦‚å¡ç‰‡å¤§å°ï¼Œåˆ·æ–°æ—¶é—´ï¼ŒåŠ¨æ€é™æ€å¡ç‰‡è®¾ç½®ï¼‰é…ç½®<code>form_config.json</code>ã€‚</p>
<p>{
"forms": [
{
"name": "widget", // å¡ç‰‡çš„åç§°ã€‚
"displayName": "<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi><mi>t</mi><mi>r</mi><mi>i</mi><mi>n</mi><mi>g</mi><mo>:</mo><mi>w</mi><mi>i</mi><mi>d</mi><mi>g</mi><mi>e</mi><msub><mi>t</mi><mi>d</mi></msub><mi>i</mi><mi>s</mi><mi>p</mi><mi>l</mi><mi>a</mi><msub><mi>y</mi><mi>n</mi></msub><mi>a</mi><mi>m</mi><mi>e</mi><mi mathvariant="normal">"</mi><mo separator="true">,</mo><mi mathvariant="normal">/</mi><mi mathvariant="normal">/</mi><mtext>å¡ç‰‡çš„æ˜¾ç¤ºåç§°ã€‚</mtext><mi mathvariant="normal">"</mi><mi>d</mi><mi>e</mi><mi>s</mi><mi>c</mi><mi>r</mi><mi>i</mi><mi>p</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mi mathvariant="normal">"</mi><mo>:</mo><mi mathvariant="normal">"</mi></mrow><annotation encoding="application/x-tex">string:widget_display_name", // å¡ç‰‡çš„æ˜¾ç¤ºåç§°ã€‚
      "description": "</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.854em;vertical-align:-0.1944em;"/><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mord mathnormal">in</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mord mathnormal">i</span><span class="mord mathnormal">d</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal">e</span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">d</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mord mathnormal">i</span><span class="mord mathnormal">s</span><span class="mord mathnormal" style="margin-right:0.01968em;">pl</span><span class="mord mathnormal">a</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mord mathnormal">am</span><span class="mord mathnormal">e</span><span class="mord">"</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord">//</span><span class="mord cjk_fallback">å¡ç‰‡çš„æ˜¾ç¤ºåç§°ã€‚</span><span class="mord">"</span><span class="mord mathnormal">d</span><span class="mord mathnormal" style="margin-right:0.02778em;">escr</span><span class="mord mathnormal">i</span><span class="mord mathnormal">pt</span><span class="mord mathnormal">i</span><span class="mord mathnormal">o</span><span class="mord mathnormal">n</span><span class="mord">"</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6944em;"/><span class="mord">"</span></span></span></span></span>string:widget_desc", // å¡ç‰‡çš„æè¿°ã€‚
"src": "./ets/widget/pages/WidgetCard.ets", // å¡ç‰‡å¯¹åº”çš„UIä»£ç çš„å®Œæ•´è·¯å¾„ã€‚
"uiSyntax": "arkts", // å¡ç‰‡çš„ç±»å‹
"window": { // ç”¨äºå®šä¹‰ä¸æ˜¾ç¤ºçª—å£ç›¸å…³çš„é…ç½®ã€‚
"designWidth": 720,
"autoDesignWidth": true
},
"colorMode": "auto", // å¡ç‰‡çš„ä¸»é¢˜æ ·å¼ã€‚
"isDynamic": true, // å¡ç‰‡æ˜¯å¦ä¸ºåŠ¨æ€å¡ç‰‡ã€‚
"isDefault": true, // å¡ç‰‡æ˜¯å¦ä¸ºé»˜è®¤å¡ç‰‡ã€‚
"updateEnabled": true, // å¡ç‰‡æ˜¯å¦æ”¯æŒå‘¨æœŸæ€§åˆ·æ–°ã€‚
"scheduledUpdateTime": "10:30", // å¡ç‰‡çš„å®šç‚¹åˆ·æ–°çš„æ—¶åˆ»ã€‚
"updateDuration": 1, // å¡ç‰‡å®šæ—¶åˆ·æ–°çš„æ›´æ–°å‘¨æœŸï¼Œå•ä½ä¸º30åˆ†é’Ÿï¼Œå–å€¼ä¸ºè‡ªç„¶æ•°ã€‚
"defaultDimension": "6<em>4", // å¡ç‰‡çš„é»˜è®¤å¤–è§‚è§„æ ¼ã€‚
"supportDimensions": [ // å¡ç‰‡æ”¯æŒçš„å¤–è§‚è§„æ ¼ï¼Œå–å€¼èŒƒå›´ã€‚
"6</em>4"
]
}
]
}</p>
</li>
<li>
<p>ç¼–å†™å¡ç‰‡UIä»£ç ã€‚åœ¨ä¸»æ–‡ä»¶<code>WidgetCard.ets</code>ä¸­æ·»åŠ UIç»„ä»¶ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼šArkTSå¡ç‰‡å­˜åœ¨è¾ƒå¤šçº¦æŸï¼ˆå¦‚ä¸æ”¯æŒå¯¼å…¥å…±äº«åŒ…ï¼‰ï¼Œè¾ƒå¤šé€»è¾‘ä¸å¯åœ¨å¡ç‰‡ä¸­ä½¿ç”¨ï¼Œåœ¨ä½¿ç”¨æ—¶éœ€è¦æ ¹æ®æ–‡æ¡£è¿›è¡Œæ“ä½œã€‚</p>
</li>
<li>
<p>ç¼–å†™è·³è½¬äº‹ä»¶ï¼šå½“åº”ç”¨æœªè¢«æ‹‰èµ·æ—¶ï¼Œç‚¹å‡»æŸä¸ªå¡ç‰‡æ—¶è·³è½¬åˆ°å…·ä½“çš„æ¡ˆä¾‹é¡µé¢ã€‚åœ¨<code>EntryAbility.ets</code>ä¸­è¡¥å……é€»è¾‘ï¼šonCreateç”Ÿå‘½å‘¨æœŸå†…è·å–want.parameters.paramsåˆ¤æ–­å¡ç‰‡å†…å®¹çš„è·³è½¬ã€‚</p>
<p>// EntryAbility.ets
export default class EntryAbility extends UIAbility {
onCreate(want: Want, launchParam: AbilityConstant.LaunchParam): void {
// ...
// æ¡Œé¢å¡ç‰‡åˆ¤æ–­è·³è½¬å†…å®¹
if (want?.parameters?.params) {
// want.parameters.params å¯¹åº” postCardAction() ä¸­ params å†…å®¹
let params: Record&lt;string, Object&gt; = JSON.parse(want.parameters.params as string);
this.selectPage = params.targetPage as string;
}
// ...
}
}</p>
</li>
<li>
<p>ç¼–å†™è·³è½¬äº‹ä»¶ï¼šå½“åº”ç”¨åœ¨åå°æ—¶ï¼Œç‚¹å‡»æŸä¸ªå¡ç‰‡æ—¶è·³è½¬åˆ°å…·ä½“çš„æ¡ˆä¾‹é¡µé¢ã€‚å¯ä»onNewWantç”Ÿå‘½å‘¨æœŸè·å–want.parameters.paramsåˆ¤æ–­å¡ç‰‡å†…å®¹çš„è·³è½¬ã€‚</p>
<p>// EntryAbility.ets
export default class EntryAbility extends UIAbility {
// å¦‚æœUIAbilityå·²åœ¨åå°è¿è¡Œï¼Œåœ¨æ”¶åˆ°Routeräº‹ä»¶åä¼šè§¦å‘onNewWantç”Ÿå‘½å‘¨æœŸå›è°ƒ
onNewWant(want: Want, launchParam: AbilityConstant.LaunchParam): void {
if (want?.parameters?.params) {
// want.parameters.params å¯¹åº” postCardAction() ä¸­ params å†…å®¹
let params: Record&lt;string, Object&gt; = JSON.parse(want.parameters.params as string);
this.selectPage = params.targetPage as string;
}
if (this.currentWindowStage !== null) {
//  å­˜åœ¨çª—å£æ—¶ç‚¹å‡»å¡ç‰‡åè¿›è¡Œé¡µé¢è·³è½¬
this.onWindowStageCreate(this.currentWindowStage);
}
}
}</p>
</li>
<li>
<p>å…·ä½“è·³è½¬é€»è¾‘ç¼–å†™ã€‚åœ¨onWindowStageCreateç”Ÿå‘½å‘¨æœŸå†…è¿›è¡Œå…·ä½“çš„è·³è½¬é€»è¾‘ã€‚</p>
<p>// EntryAbility.ets
export default class EntryAbility extends UIAbility {
onWindowStageCreate(windowStage: window.WindowStage): void {
// åˆ¤æ–­æ˜¯å¦å­˜åœ¨çª—å£å¯è¿›è¡Œé¡µé¢è·³è½¬
if (this.currentWindowStage === null) {
this.currentWindowStage = windowStage;
}
//  ç‚¹å‡»å¡ç‰‡åè¿›è¡Œé¡µé¢è·³è½¬
if (this.selectPage) {
this.storage.setOrCreate('formNavigationRouter', this.selectPage);
windowStage.loadContent('pages/EntryView', this.storage, (err, data) =&gt; {
if (err.code) {
logger.error(DOMAIN_NUMBER.toString(), TAG, 'Failed to load the content. Cause: %{public}s', JSON.stringify(err) ?? '');
return;
}
logger.info(DOMAIN_NUMBER.toString(), TAG, 'Succeeded in loading the content. Data: %{public}s', JSON.stringify(data) ?? '');
});
}
// ...
}
}</p>
</li>
<li>
<p>ç¼–å†™è·³è½¬äº‹ä»¶ï¼šåœ¨<code>EntryAbility.ets</code>ç¼–å†™äº‹ä»¶åï¼ŒåŒæ—¶åœ¨æ¥æ”¶æ¡ˆä¾‹å‚æ•°çš„<code>EntryView.ets</code>å†…å¤„ç†é¡µé¢è·³è½¬é€»è¾‘ã€‚é€šè¿‡å’ŒDynamicsRouterå†…çš„æ•°æ®å¯¹æ¯”ï¼Œåˆ¤æ–­é€šè¿‡storageä¼ å…¥çš„é¡µé¢æ˜¯å“ªä¸€ä¸ªï¼Œç„¶åæ‰§è¡ŒpushUriè·³è½¬ã€‚</p>
<p>@Entry(storage)
@Component
struct EntryView {
onPageShow(): void {
// ä»å¡ç‰‡è¿›å…¥é¡µé¢æ—¶åˆ¤æ–­å…·ä½“è·³è½¬é¡µé¢
if (this.formRouter) {
waterFlowData.forEach((item: SceneModuleInfo) =&gt; {
let index = item.appUri.indexOf(this.formRouter);
if (index &gt; -1) {
if (DynamicsRouter.appRouterStack.slice(-1)[0].name !== item.appUri) {
DynamicsRouter.clear();
DynamicsRouter.pushUri(item.appUri);
}
return;
}
})
this.formRouter = '';
}
}
}</p>
</li>
<li>
<p>åˆ¤æ–­å¡ç‰‡å¤§å°ï¼šè·å–å¡ç‰‡è¯¦æƒ…ï¼Œæ ¹æ®å®½é«˜æ¯”è·å–å¡ç‰‡çš„è§„æ ¼ï¼Œä¸åŒè§„æ ¼æ˜¾ç¤ºå†…å®¹ä¸åŒã€‚åœ¨<code>EntryFormAbility.ets</code>ä¸­è¡¥å……ç‚¹å‡»å¡ç‰‡è¿›å…¥æ—¶æŸ¥æ‰¾å¯¹åº”æ¡ˆä¾‹çš„é€»è¾‘ã€‚åœ¨onAddFormç”Ÿå‘½å‘¨æœŸå†…åšå¡ç‰‡ç”Ÿæˆæ—¶ï¼ŒcreateFormBindingDataæ–¹æ³•ä¼ é€’å±æ€§ã€‚</p>
<p>// EntryFormAbility.ets
export default class EntryFormAbility extends FormExtensionAbility {
// å¡ç‰‡å¯¹è±¡é›†åˆ
onAddForm(want: Want): formBindingData.FormBindingData {
let isLongCard: boolean = true;
if ((want.parameters?.[formInfo.FormParam.WIDTH_KEY] as number) /
(want.parameters?.[formInfo.FormParam.HEIGHT_KEY] as number) &gt; 0.666) {
isLongCard = false;
}
// ä½¿ç”¨æ–¹åˆ›å»ºå¡ç‰‡æ—¶è§¦å‘ï¼Œæä¾›æ–¹éœ€è¦è¿”å›å¡ç‰‡æ•°æ®ç»‘å®šç±»
let obj: Record&lt;string, string | boolean&gt; = {
'title': 'titleOnAddForm',
'isLongCard': isLongCard
};
let formData: formBindingData.FormBindingData = formBindingData.createFormBindingData(obj);
return formData;
}
}</p>
</li>
<li>
<p>ç¼–å†™åˆ·æ–°äº‹ä»¶ï¼šå½“å®šæ—¶æ›´æ–°æˆ–å®šç‚¹æ›´æ–°è§¦å‘æ—¶ï¼Œéœ€è¦æ›´æ–°å¡ç‰‡å†…å®¹ã€‚onUpdateFormç”Ÿå‘½å‘¨æœŸå‘ç”Ÿåœ¨å®šæ—¶æ›´æ–°/å®šç‚¹æ›´æ–°/å¡ç‰‡ä½¿ç”¨æ–¹ä¸»åŠ¨è¯·æ±‚æ›´æ–°æ—¶ï¼Œåœ¨æ–¹æ³•å†…å¢åŠ è·å–æ¡ˆä¾‹æ•°æ®çš„åŠŸèƒ½ã€‚</p>
<p>// EntryFormAbility.ets
export default class EntryFormAbility extends FormExtensionAbility {
// ç½‘ç»œè·å–READMEæ•°æ®å¹¶åˆ©ç”¨formProvider.updateFormæ›´æ–°åˆ°å¡ç‰‡
async getData(formId: string) {
let detail: CASES[] = [];
let httpRequest = http.createHttp();
let webData: http.HttpResponse = await httpRequest.request(URL);
if (webData?.responseCode == http.ResponseCode.OK) {
try {
detail = this.formatData(webData.result.toString());
hilog.info(DOMAIN_NUMBER, TAG, '[EntryFormAbility] onFormEvent' + 'webData.result:' + webData.result);</p>
<pre><code class="hljs language-typescript" lang="typescript">        <span class="hljs-keyword">class</span> <span class="hljs-title class_">FormDataClass</span> {
           <span class="hljs-attr">detail</span>: <span class="hljs-variable constant_">CASES</span>[] = detail;
        }

        <span class="hljs-keyword">let</span> formData = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FormDataClass</span>();
        <span class="hljs-keyword">let</span> formInfo = formBindingData.<span class="hljs-title function_">createFormBindingData</span>(formData);
        <span class="hljs-keyword">await</span> formProvider.<span class="hljs-title function_">updateForm</span>(formId, formInfo);
        hilog.<span class="hljs-title function_">info</span>(<span class="hljs-variable constant_">DOMAIN_NUMBER</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">'%{public}s'</span>, <span class="hljs-string">'FormAbility updateForm success.'</span>);
     } <span class="hljs-keyword">catch</span> (error) {
        hilog.<span class="hljs-title function_">error</span>(<span class="hljs-variable constant_">DOMAIN_NUMBER</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">`FormAbility updateForm failed: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(error)}</span>`</span>);
     }
  } <span class="hljs-keyword">else</span> {
     hilog.<span class="hljs-title function_">error</span>(<span class="hljs-variable constant_">DOMAIN_NUMBER</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">`ArkTSCard download task failed`</span>);
     <span class="hljs-keyword">let</span> <span class="hljs-attr">param</span>: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">string</span>&gt; = {
        <span class="hljs-string">'text'</span>: <span class="hljs-string">'åˆ·æ–°å¤±è´¥'</span>
     };
     <span class="hljs-keyword">let</span> <span class="hljs-attr">formInfo</span>: formBindingData.<span class="hljs-property">FormBindingData</span> = formBindingData.<span class="hljs-title function_">createFormBindingData</span>(param);
     formProvider.<span class="hljs-title function_">updateForm</span>(formId, formInfo);
  }
  httpRequest.<span class="hljs-title function_">destroy</span>();
</code></pre>
<p>}</p>
<p>async onUpdateForm(formId: string): Promise {
// è‹¥å¡ç‰‡æ”¯æŒå®šæ—¶æ›´æ–°/å®šç‚¹æ›´æ–°/å¡ç‰‡ä½¿ç”¨æ–¹ä¸»åŠ¨è¯·æ±‚æ›´æ–°åŠŸèƒ½ï¼Œåˆ™æä¾›æ–¹éœ€è¦é‡å†™è¯¥æ–¹æ³•ä»¥æ”¯æŒæ•°æ®æ›´æ–°
hilog.info(DOMAIN_NUMBER, TAG, '[EntryFormAbility] onUpdateForm');
this.getData(formId);
}
}</p>
</li>
<li>
<p>ç¼–å†™åˆ·æ–°äº‹ä»¶ï¼šæ‰‹åŠ¨åˆ·æ–°å†…å®¹æ—¶ï¼Œéœ€è¦æ›´æ–°å¡ç‰‡å†…å®¹ã€‚onFormEventç”Ÿå‘½å‘¨æœŸå‘ç”Ÿåœ¨å¡ç‰‡ä¸»åŠ¨é€šè¿‡postCardActionæ¥å£è§¦å‘messageäº‹ä»¶ã€‚</p>
<p>// EntryFormAbility.ets
export default class EntryFormAbility extends FormExtensionAbility {
// ç½‘ç»œè·å–READMEæ•°æ®å¹¶åˆ©ç”¨formProvider.updateFormæ›´æ–°åˆ°å¡ç‰‡
async getData(formId: string) {
let detail: CASES[] = [];
let httpRequest = http.createHttp();
let webData: http.HttpResponse = await httpRequest.request(URL);
if (webData?.responseCode == http.ResponseCode.OK) {
try {
detail = this.formatData(webData.result.toString());
hilog.info(DOMAIN_NUMBER, TAG, '[EntryFormAbility] onFormEvent' + 'webData.result:' + webData.result);</p>
<pre><code class="hljs language-typescript" lang="typescript">        <span class="hljs-keyword">class</span> <span class="hljs-title class_">FormDataClass</span> {
           <span class="hljs-attr">detail</span>: <span class="hljs-variable constant_">CASES</span>[] = detail;
        }

        <span class="hljs-keyword">let</span> formData = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FormDataClass</span>();
        <span class="hljs-keyword">let</span> formInfo = formBindingData.<span class="hljs-title function_">createFormBindingData</span>(formData);
        <span class="hljs-keyword">await</span> formProvider.<span class="hljs-title function_">updateForm</span>(formId, formInfo);
        hilog.<span class="hljs-title function_">info</span>(<span class="hljs-variable constant_">DOMAIN_NUMBER</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">'%{public}s'</span>, <span class="hljs-string">'FormAbility updateForm success.'</span>);
     } <span class="hljs-keyword">catch</span> (error) {
        hilog.<span class="hljs-title function_">error</span>(<span class="hljs-variable constant_">DOMAIN_NUMBER</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">`FormAbility updateForm failed: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(error)}</span>`</span>);
     }
  } <span class="hljs-keyword">else</span> {
     hilog.<span class="hljs-title function_">error</span>(<span class="hljs-variable constant_">DOMAIN_NUMBER</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">`ArkTSCard download task failed`</span>);
     <span class="hljs-keyword">let</span> <span class="hljs-attr">param</span>: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">string</span>&gt; = {
        <span class="hljs-string">'text'</span>: <span class="hljs-string">'åˆ·æ–°å¤±è´¥'</span>
     };
     <span class="hljs-keyword">let</span> <span class="hljs-attr">formInfo</span>: formBindingData.<span class="hljs-property">FormBindingData</span> = formBindingData.<span class="hljs-title function_">createFormBindingData</span>(param);
     formProvider.<span class="hljs-title function_">updateForm</span>(formId, formInfo);
  }
  httpRequest.<span class="hljs-title function_">destroy</span>();
</code></pre>
<p>}</p>
<p>async onFormEvent(formId: string, message: string): Promise {
this.getData(formId);
}
}</p>
</li>
<li>
<p>ç¼–å†™åˆ·æ–°äº‹ä»¶ï¼šå‚æ•°ä¼ åˆ°å¡ç‰‡ç»„ä»¶å†…ï¼Œç»„ä»¶æ¥æ”¶å‚æ•°ã€‚å¤„ç†<code>WidgetCard.ets</code>å¡ç‰‡å†…é€»è¾‘ã€‚å¡ç‰‡é¡µé¢ä¸­ä½¿ç”¨LocalStoragePropè£…é¥°éœ€è¦åˆ·æ–°çš„å¡ç‰‡æ•°æ®ã€‚</p>
<p>let casesCardInfo = new LocalStorage();
@Entry(casesCardInfo)
@Component
struct Widget_DynamicCard {
@LocalStorageProp('detail') detail: CASES[] = []; // å¡ç‰‡å¯¹è±¡é›†åˆ
private swiperController: SwiperController = new SwiperController();
@LocalStorageProp('isLongCard') isLongCard: boolean = false;</p>
<p>build() {
// ...
}
}</p>
</li>
</ol>
<h4 data-id="heading-5">å¦‚æœæ‚¨æƒ³ç³»ç»Ÿæ·±å…¥åœ°å­¦ä¹  HarmonyOS å¼€å‘æˆ–æƒ³è€ƒå–HarmonyOSè®¤è¯è¯ä¹¦ï¼Œæ¬¢è¿åŠ å…¥åä¸ºå¼€å‘è€…å­¦å ‚ï¼š</h4>
<h3 data-id="heading-6">è¯·ç‚¹å‡»â†’ï¼š <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.huawei.com%2Fconsumer%2Fcn%2Ftraining%2FclassDetail%2Fd0d15d9039414a8fad9f99ac4a3f5096%3Ftype%3D1%253Fha_source%253Dhmosclass%26ha_sourceId%3D89000248" target="_blank" title="https://developer.huawei.com/consumer/cn/training/classDetail/d0d15d9039414a8fad9f99ac4a3f5096?type=1%3Fha_source%3Dhmosclass&amp;ha_sourceId=89000248" ref="nofollow noopener noreferrer">HarmonyOSå®˜æ–¹è®¤è¯åŸ¹è®­</a></h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/160bdf1af84b464d9353063b1ae79913~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6bm_5Lq65oib:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767623376&amp;x-signature=PbTbJnaEcnFGrEKbgb1v%2Fw81Ag4%3D" alt="" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[HarmonyOSåº”ç”¨å¼€å‘ï¼šè§†é¢‘æ‚¬æµ®çª—]]></title>    <link>https://juejin.cn/post/7589159665856249875</link>    <guid>https://juejin.cn/post/7589159665856249875</guid>    <pubDate>2025-12-29T14:32:12.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589159665856249875" data-draft-id="7589126217250947113" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="HarmonyOSåº”ç”¨å¼€å‘ï¼šè§†é¢‘æ‚¬æµ®çª—"/> <meta itemprop="keywords" content="HarmonyOS,ç¨‹åºå‘˜,Android"/> <meta itemprop="datePublished" content="2025-12-29T14:32:12.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é¹¿äººæˆ›"/> <meta itemprop="url" content="https://juejin.cn/user/4309685005226376"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            HarmonyOSåº”ç”¨å¼€å‘ï¼šè§†é¢‘æ‚¬æµ®çª—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4309685005226376/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é¹¿äººæˆ›
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T14:32:12.000Z" title="Mon Dec 29 2025 14:32:12 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">å‰è¨€ï¼š</h3>
<p>æœ¬ç¤ºä¾‹ä¸»è¦ä»‹ç»è§†é¢‘å°çª—å£æ’­æ”¾åœºæ™¯ï¼Œåˆ©ç”¨åª’ä½“çš„AVPlayerå®ç°è§†é¢‘æ’­æ”¾ä»¥åŠç›¸å…³æ“ä½œï¼Œåˆ©ç”¨PiPWindowå¼€å¯æ‚¬æµ®çª—ä»è€Œå®ç°å°çª—å£æ’­æ”¾è§†é¢‘ã€‚</p>
<h3 data-id="heading-1">æ•ˆæœå›¾é¢„è§ˆ</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/faa55123c4534e75ad2dbbdbf6d93d6c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6bm_5Lq65oib:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767623531&amp;x-signature=qomqixm6n%2F3eZ9lrheOj4Sq7C%2Bs%3D" alt="" loading="lazy"/></p>
<p><strong>ä½¿ç”¨è¯´æ˜</strong></p>
<ol>
<li>ç­‰å¾…è§†é¢‘åŠ è½½å®Œæˆï¼Œè§†é¢‘ä¼šè‡ªåŠ¨æ’­æ”¾ã€‚</li>
<li>å°†åº”ç”¨éšè—åˆ°åå°ï¼Œè‡ªåŠ¨æ‹‰èµ·æ‚¬æµ®çª—ç»§ç»­æ’­æ”¾è§†é¢‘ã€‚</li>
<li>ç‚¹å‡»æ‚¬æµ®çª—æ¢å¤å›¾æ ‡ï¼Œæ¢å¤åˆ°åŸå§‹æ’­æ”¾ç•Œé¢ï¼Œè§†é¢‘ç»§ç»­æ­£å¸¸æ’­æ”¾ã€‚</li>
<li>åŸå§‹æ’­æ”¾ç•Œé¢è§†é¢‘æš‚åœä¸ä¼šæ‹‰èµ·æ‚¬æµ®çª—ã€‚</li>
<li>æ‚¬æµ®çª—è§†é¢‘æš‚åœåï¼Œå†ç‚¹å‡»æ¢å¤å›¾æ ‡ï¼ŒåŸå§‹æ’­æ”¾ç•Œé¢è§†é¢‘ç»§ç»­æ’­æ”¾ã€‚</li>
<li>æ‚¬æµ®çª—ç‚¹å‡»å…³é—­ä¹‹åï¼ŒåŸå§‹æ’­æ”¾ç•Œé¢è§†é¢‘æš‚åœã€‚</li>
<li>ç‚¹å‡»åŸè§†é¢‘ç•Œé¢å°çª—å£å›¾æ ‡ï¼Œå¯å¼€å¯æ‚¬æµ®çª—ã€‚</li>
<li>æ‰‹æŒ‡åœ¨åŸè§†é¢‘å·¦ä¾§æ»‘åŠ¨å¯æ”¹å˜è§†é¢‘é¡µé¢çš„äº®åº¦ï¼ˆéœ€çœŸæœºéªŒè¯ï¼‰ã€‚</li>
<li>æ‰‹æŒ‡åœ¨åŸè§†é¢‘å³ä¾§æ»‘åŠ¨å¯æ”¹å˜è§†é¢‘çš„å£°éŸ³ï¼ˆéœ€çœŸæœºéªŒè¯ï¼Œæ³¨ï¼šæœ¬æ¡ˆä¾‹ä½¿ç”¨çš„è§†é¢‘æš‚æ— å£°éŸ³ï¼Œå¼€å‘è€…å¯æ›´æ¢è§†é¢‘èµ„æºéªŒè¯è¯¥åŠŸèƒ½ï¼‰ã€‚</li>
</ol>
<h3 data-id="heading-2">ä¸‹è½½å®‰è£…</h3>
<ol>
<li>
<p>æ¨¡å—oh-package.json5æ–‡ä»¶ä¸­å¼•å…¥ä¾èµ–</p>
<pre><code class="hljs language-perl" lang="perl"><span class="hljs-string">"dependencies"</span>: {
  <span class="hljs-string">"@ohos/compressfile"</span>: <span class="hljs-string">"haråŒ…åœ°å€"</span>
}
</code></pre>
</li>
<li>
<p>etsæ–‡ä»¶importè‡ªå®šä¹‰è§†å›¾å®è§†é¢‘æ‚¬æµ®çª—ç»„ä»¶</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">PipWindowComponent</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos/pipwindow'</span>;
</code></pre>
</li>
</ol>
<h3 data-id="heading-3">å¿«é€Ÿä½¿ç”¨</h3>
<p>æœ¬èŠ‚ä¸»è¦ä»‹ç»äº†å¦‚ä½•å¿«é€Ÿä¸Šæ‰‹ä½¿ç”¨è§†é¢‘æ‚¬æµ®çª—ç»„ä»¶ï¼ŒåŒ…æ‹¬è°ƒèŠ‚è§†é¢‘äº®åº¦å£°éŸ³æ§åˆ¶å™¨ç»„ä»¶ä»¥åŠå¸¸è§è‡ªå®šä¹‰å‚æ•°çš„åˆå§‹åŒ–ã€‚</p>
<ol>
<li>
<p>æ„å»ºç»„ä»¶</p>
<p>åœ¨ä»£ç åˆé€‚çš„ä½ç½®ä½¿ç”¨PipWindowComponentç»„ä»¶å¹¶ä¼ å…¥å¯¹åº”çš„å‚æ•°ï¼Œåç»­å°†ä»‹ç»å¯¹åº”å‚æ•°çš„åˆå§‹åŒ–ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">/**
 * ç”»ä¸­ç”»æ§åˆ¶å¼€å¯ã€æ’­æ”¾ç»„ä»¶
 * player:åˆå§‹åŒ–è§†é¢‘æ’­æ”¾æ§åˆ¶å™¨
 * url:ä¼ å…¥åœ¨çº¿è§†é¢‘èµ„æº
 */</span>
PipWindowComponent({
  player: <span class="hljs-keyword">this</span>.player,
  url: <span class="hljs-keyword">this</span>.url
})
</code></pre>
</li>
<li>
<p>å„å‚æ•°åˆå§‹åŒ–ï¼Œplayerå¯ç›´æ¥å†™PipManager.getInstance().playerï¼Œurlå¿…é¡»ä¸ºåœ¨çº¿mp4è§†é¢‘ã€‚</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-variable">@State</span> <span class="hljs-attribute">player</span>: AVPlayer = PipManager.<span class="hljs-built_in">getInstance</span>().player; <span class="hljs-comment">// åˆå§‹åŒ–è§†é¢‘æ’­æ”¾æ§åˆ¶å™¨</span>
<span class="hljs-variable">@State</span> <span class="hljs-attribute">url</span>: string = <span class="hljs-string">" "</span>; <span class="hljs-comment">// ä¼ å…¥åœ¨çº¿è§†é¢‘èµ„æº</span>
</code></pre>
</li>
</ol>
<h3 data-id="heading-4">å±æ€§(æ¥å£)è¯´æ˜</h3>
<p>PipWindowComponentç»„ä»¶å±æ€§</p>
<p>å±æ€§</p>
<p>ç±»å‹</p>
<p>é‡Šä¹‰</p>
<p>é»˜è®¤å€¼</p>
<p>player</p>
<p>AVPlayer</p>
<p>åˆå§‹åŒ–è§†é¢‘æ’­æ”¾æ§åˆ¶å™¨</p>
<p>-</p>
<p>url</p>
<p>string</p>
<p>ä¼ å…¥åœ¨çº¿è§†é¢‘èµ„æº</p>
<p>-</p>
<h3 data-id="heading-5">å®ç°æ€è·¯</h3>
<p>æœ¬ä¾‹æ¶‰åŠçš„å…³é”®ç‰¹æ€§å’Œå®ç°æ–¹æ¡ˆå¦‚ä¸‹ï¼š</p>
<ol>
<li>
<p>ä½¿ç”¨åª’ä½“çš„AVPlayerå®ç°è§†é¢‘æ’­æ”¾ã€‚</p>
<p>/**</p>
<ul>
<li>åˆå§‹åŒ–AVPlayer</li>
<li>@param url åœ¨çº¿è§†é¢‘è·¯å¾„</li>
<li>@returns è¿”å›å€¼å°†åœ¨çº¿è§†é¢‘è¿›è¡Œç»‘å®š
*/
async init(url: string): Promise {
await this.release();
// åˆ›å»ºavPlayerå®ä¾‹å¯¹è±¡
this.avPlayer = await media.createAVPlayer();
this.isCreate = true;
// åˆ›å»ºçŠ¶æ€æœºå˜åŒ–å›è°ƒå‡½æ•°
await this.setSourceInfo(); // è§†é¢‘ä¿¡æ¯ä¸ŠæŠ¥å‡½æ•°
await this.setStateChangeCallback(); // çŠ¶æ€æœºä¸ŠæŠ¥å›è°ƒå‡½æ•°
this.avPlayer.url = url; // æ’­æ”¾hlsç½‘ç»œç›´æ’­ç æµ
}</li>
</ul>
</li>
<li>
<p>ä½¿ç”¨PiPWindowå¼€å¯æ‚¬æµ®çª—ä»è€Œå®ç°å°çª—å£æ’­æ”¾è§†é¢‘ã€‚</p>
<p>/**</p>
<ul>
<li>åˆ›å»ºç”»ä¸­ç”»æ§åˆ¶å™¨ï¼Œæ³¨å†Œç”Ÿå‘½å‘¨æœŸäº‹ä»¶ä»¥åŠæ§åˆ¶äº‹ä»¶å›è°ƒ</li>
<li>@param ctx ä¸Šä¸‹æ–‡ç¯å¢ƒ
*/
init(ctx: Context) {
if (this.pipController !== null &amp;&amp; this.pipController !== undefined) {
return;
}
// å½“å‰è®¾å¤‡å¦‚è‹¥ä¸æ”¯æŒç”»ä¸­ç”»åˆ™é€€å‡º
if (!PiPWindow.isPiPEnabled()) {
return;
}</li>
</ul>
<p>let config: PiPWindow.PiPConfiguration = {
context: ctx,
// XComponentç»„ä»¶ç»‘å®šåŒä¸€ä¸ª
componentController: this.getXComponentController(),
// ç”»ä¸­ç”»åª’ä½“ç±»å‹æšä¸¾ï¼Œå½“å‰ä½¿ç”¨çš„è§†é¢‘æ’­æ”¾æ¨¡ç‰ˆ
templateType: PiPWindow.PiPTemplateType.VIDEO_PLAY,
};
// é€šè¿‡createæ¥å£åˆ›å»ºç”»ä¸­ç”»æ§åˆ¶å™¨å®ä¾‹
let promise: Promise&lt;PiPWindow.PiPController&gt; = PiPWindow.create(config);
promise.then((controller: PiPWindow.PiPController) =&gt; {
this.pipController = controller;
// é€šè¿‡ç”»ä¸­ç”»æ§åˆ¶å™¨å®ä¾‹çš„setAutoStartEnabledæ¥å£è®¾ç½®æ˜¯å¦éœ€è¦åœ¨åº”ç”¨è¿”å›æ¡Œé¢æ—¶è‡ªåŠ¨å¯åŠ¨ç”»ä¸­ç”»
this.pipController?.setAutoStartEnabled(true);
// é€šè¿‡ç”»ä¸­ç”»æ§åˆ¶å™¨å®ä¾‹çš„on('stateChange')æ¥å£æ³¨å†Œç”Ÿå‘½å‘¨æœŸäº‹ä»¶å›è°ƒ
this.pipController.on('stateChange', (state: PiPWindow.PiPState, reason: string) =&gt; {
this.onStateChange(state, reason);
});
// é€šè¿‡ç”»ä¸­ç”»æ§åˆ¶å™¨å®ä¾‹çš„on('controlEvent')æ¥å£æ³¨å†Œæ§åˆ¶äº‹ä»¶å›è°ƒ
this.pipController.on('controlEvent', (control: PiPWindow.ControlEventParam) =&gt; {
this.onActionEvent(control);
});
}).catch((err: BusinessError) =&gt; {
console.error(<code>Failed to create pip controller. Cause:${err.code}, message:${err.message}</code>);
});
}</p>
</li>
<li>
<p>é€šè¿‡ç»‘å®šåŒä¸€ä¸ªXComponentæ§åˆ¶å™¨ä½¿å¾—è§†é¢‘é¡µé¢å’Œæ‚¬æµ®çª—é¡µé¢è§†é¢‘ä¿æŒç»Ÿä¸€æ’­æ”¾è¿›åº¦ã€‚</p>
<p>XComponent({
type: XComponentType.SURFACE,
controller: PipManager.getInstance().getXComponentController()
})
.onLoad(() =&gt; {
// å°†surfaceIdè®¾ç½®ç»™åª’ä½“æº
PipManager.getInstance()
.getXComponentController()
.onSurfaceCreated(PipManager.getInstance().getXComponentController().getXComponentSurfaceId())
// åˆå§‹åŒ–AVPlayer
PipManager.getInstance().player.init(this.url);
})</p>
</li>
<li>
<p>ä½¿ç”¨@Watchç›‘å¬AVPlayerçš„å‘ç”Ÿå˜åŒ–æ—¶ï¼Œä¼šè§¦å‘onPlayingChangeçš„å›è°ƒæ–¹æ³•ã€‚ç»„ä»¶ä¸­éœ€è¦æ‰‹åŠ¨æ§åˆ¶è§†é¢‘çš„æ’­æ”¾ä¸æš‚åœï¼Œå› ä¸ºè§†é¢‘çš„æ’­æ”¾çŠ¶æ€æ˜¯éœ€è¦æ ¹æ®è§†é¢‘åŠ è½½è¿›åº¦å’Œæ‰‹åŠ¨æ§åˆ¶æ¥æ”¹å˜çš„ï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨@Watchè¿›è¡Œç›‘å¬ã€‚</p>
<p>@ObjectLink @Watch("onPlayingChange") player: AVPlayer</p>
<p>onPlayingChange() {
this.player.isPlaying ? this.player.getPlay() : this.player.getPause();
if (this.player.isPlaying === false) {
PipManager.getInstance().setAutoStart(false)
} else {
PipManager.getInstance().setAutoStart(true)
PipManager.getInstance().updatePiPControlStatus()
}
}</p>
</li>
<li>
<p>æ‚¬æµ®çª—çš„ä»å°çª—å£æ¢å¤åˆ°åŸå§‹æ’­æ”¾ç•Œé¢ä»¥åŠå…³é—­æ‚¬æµ®çª—ï¼Œéœ€è¦é€šè¿‡ç›¸å…³ç”Ÿå‘½å‘¨æœŸæ¥è¿›è¡Œæ§åˆ¶è§†é¢‘çš„æ’­æ”¾çŠ¶æ€ã€‚</p>
<p>// ç›‘å¬ç”»ä¸­ç”»ç”Ÿå‘½å‘¨æœŸ
onStateChange(state: PiPWindow.PiPState, reason: string) {
switch (state) {
// è¡¨ç¤ºç”»ä¸­ç”»å°†è¦å¯åŠ¨
case PiPWindow.PiPState.ABOUT_TO_START:
break;
// è¡¨ç¤ºç”»ä¸­ç”»å·²ç»å¯åŠ¨
case PiPWindow.PiPState.STARTED:
// å¯åŠ¨ç”»ä¸­ç”»
PipManager.getInstance().player.isPiPWindowLoad = true;
break;
// è¡¨ç¤ºç”»ä¸­ç”»å°†è¦åœæ­¢
case PiPWindow.PiPState.ABOUT_TO_STOP:
// ç”»ä¸­ç”»å…³é—­
PipManager.getInstance().player.isPiPWindowLoad = false;
break;
// è¡¨ç¤ºç”»ä¸­ç”»å·²ç»åœæ­¢
case PiPWindow.PiPState.STOPPED:
// ç”»ä¸­ç”»å…³é—­
PipManager.getInstance().player.isPiPWindowLoad = false;
// å°çª—å£ç‚¹å‡»å…³é—­ç”»ä¸­ç”»ï¼Œè§†é¢‘æš‚åœæ’­æ”¾
if (!PipManager.getInstance().player.isPiPWindowRestore) {
PipManager.getInstance().player.isPlaying = false;
}
PipManager.getInstance().player.isPiPWindowRestore = false;
break;
// è¡¨ç¤ºç”»ä¸­ç”»å°†ä»å°çª—æ’­æ”¾æ¢å¤åˆ°åŸå§‹æ’­æ”¾ç•Œé¢
case PiPWindow.PiPState.ABOUT_TO_RESTORE:
// å°çª—å£å¤åŸå…³é—­ç”»ä¸­ç”»
PipManager.getInstance().player.isPiPWindowLoad = false;
// ä»å°çª—å£å¤åŸ
PipManager.getInstance().player.isPiPWindowRestore = true;
if (!PipManager.getInstance().player.isPlaying) {
PipManager.getInstance().player.isPlaying = true;
}
break;
// è¡¨ç¤ºç”»ä¸­ç”»ç”Ÿå‘½å‘¨æœŸæ‰§è¡Œè¿‡ç¨‹å‡ºç°äº†å¼‚å¸¸
case PiPWindow.PiPState.ERROR:
break;
default:
break;
}
}</p>
</li>
<li>
<p>å› ä¸ºå½“æ‚¬æµ®çª—çš„ä»å°çª—å£æ¢å¤åˆ°åŸå§‹æ’­æ”¾ç•Œé¢ä»¥åŠå…³é—­æ‚¬æµ®çª—æ—¶å¯¹è§†é¢‘æ’­æ”¾çŠ¶æ€è¿›è¡Œæ“ä½œï¼Œæ‚¬æµ®çª—çš„æ’­æ”¾å›¾æ ‡å¹¶ä¸ä¼šå®æ—¶æ›´æ–°ï¼Œæ‰€ä»¥æ‰‹åŠ¨è¿›è¡Œæ›´æ–°ã€‚</p>
<p>/**</p>
<ul>
<li>è§†é¢‘æ’­æ”¾é¡µé¢</li>
<li>@param url:è§†é¢‘æºï¼ˆæœ¬æ¡ˆä¾‹ä»…æ”¯æŒä½¿ç”¨åœ¨çº¿è§†é¢‘ï¼‰
*/
XComponentView({
url: this.url
})
.gesture(
// åŒå‡»è§†é¢‘ï¼Œè§†é¢‘æš‚åœ/æ’­æ”¾
GestureGroup(GestureMode.Exclusive,
TapGesture({ count: TAP_GESTURE }).onAction((event?: GestureEvent) =&gt; {
PipManager.getInstance().player.isPlaying = !PipManager.getInstance().player.isPlaying
if (PipManager.getInstance().player.isPlaying === false) {
PipManager.getInstance().setAutoStart(false)
PipManager.getInstance().updatePiPControlStatus()
} else {
PipManager.getInstance().setAutoStart(true)
PipManager.getInstance().updatePiPControlStatus()
}
})
))
// æ›´æ–°ç”»ä¸­ç”»é¢æ¿æ§ä»¶çŠ¶æ€
updatePiPControlStatus() {
let controlType: PiPWindow.PiPControlType = PiPWindow.PiPControlType.VIDEO_PLAY_PAUSE; // è§†é¢‘æ’­æ”¾æ§åˆ¶é¢æ¿ä¸­æ’­æ”¾/æš‚åœæ§ä»¶ã€‚
let status: PiPWindow.PiPControlStatus = PiPWindow.PiPControlStatus.PLAY; // è§†é¢‘æ’­æ”¾æ§åˆ¶é¢æ¿ä¸­æ’­æ”¾/æš‚åœæ§ä»¶ä¸ºæ’­æ”¾çŠ¶æ€ã€‚
this.pipController?.updatePiPControlStatus(controlType, status); // æ›´æ–°æ§åˆ¶é¢æ¿æ§ä»¶åŠŸèƒ½çŠ¶æ€
}</li>
</ul>
</li>
<li>
<p>ä½¿ç”¨onAreaChangeæ¥è·å–åŸè§†é¢‘é¡µé¢çš„æ’­æ”¾åŒºåŸŸå®½é«˜ã€‚</p>
<p>Stack(this.player.isLoading ? { alignContent: Alignment.Center } :
{ alignContent: Alignment.Bottom }) {</p>
<p>/**</p>
<ul>
<li>è§†é¢‘æ’­æ”¾ç»„ä»¶</li>
<li>url:è§†é¢‘æºï¼ˆæœ¬æ¡ˆä¾‹ä»…æ”¯æŒä½¿ç”¨åœ¨çº¿è§†é¢‘ï¼‰
*/
XComponentView({
url: this.url
})
...
}
.onAreaChange((oldVal: Area, newVal: Area) =&gt; {
// è·å–è§†é¢‘æ’­æ”¾åŒºåŸŸçš„å®½é«˜
this.videoAreaWidth = newVal.width as number;
this.videoAreaHeight = newVal.height as number;
})</li>
</ul>
</li>
<li>
<p>ä½¿ç”¨PanGestureæ¥ç¡®å®šæ‰‹æŒ‡æ»‘åŠ¨çš„æ–¹å‘ä»¥åŠç§»åŠ¨çš„è·ç¦»ä»è€Œæ”¹å˜å®æ—¶æ”¹å˜è§†é¢‘çš„äº®åº¦å’Œå£°éŸ³ã€‚</p>
<p>Stack(this.player.isLoading ? { alignContent: Alignment.Center } :
{ alignContent: Alignment.Bottom }) {</p>
<p>/**</p>
<ul>
<li>è§†é¢‘æ’­æ”¾ç»„ä»¶</li>
<li>url:è§†é¢‘æºï¼ˆæœ¬æ¡ˆä¾‹ä»…æ”¯æŒä½¿ç”¨åœ¨çº¿è§†é¢‘ï¼‰
*/
XComponentView({
url: this.url
})
...
}
.gesture(
// åŒå‡»è§†é¢‘ï¼Œè§†é¢‘æš‚åœ/æ’­æ”¾
GestureGroup(GestureMode.Exclusive,
TapGesture({ count: TAP_GESTURE })
.onAction((event?: GestureEvent) =&gt; {
this.player.isPlaying = !this.player.isPlaying;
AppStorage.setOrCreate('pipWindow_isPlaying', this.player.isPlaying);
if (this.player.isPlaying === false) {
PipManager.getInstance().setAutoStart(false);
PipManager.getInstance().updatePiPControlStatus();
} else {
PipManager.getInstance().setAutoStart(true);
PipManager.getInstance().updatePiPControlStatus();
}
}),
PanGesture(this.panOption)
.onActionStart((event: GestureEvent) =&gt; {
this.sysVolumeChange();
this.positionH = event.offsetY;
this.controlShow = true;
})
.onActionUpdate((event: GestureEvent) =&gt; {
this.panOption.setDirection(PanDirection.Vertical);
// æ‰‹æŒ‡åˆæ¬¡æ»‘åŠ¨æ¨ªå‘åæ ‡ä½ç½®
this.fingerPosition = event.fingerList[0].localX;
if (this.positionH === event.offsetY) {
return;
}
// æ‰‹æŒ‡ç§»åŠ¨çš„è·ç¦»
let changeVolume = ((this.positionH - event.offsetY) / this.videoAreaHeight) * HEIGHT_INTEGER;
if (this.fingerPosition &lt; (this.videoAreaWidth / PARTITION)) {
this.onBrightActionUpdate(changeVolume);
// è°ƒèŠ‚è§†é¢‘äº®åº¦
this.mWindow?.setWindowBrightness(this.bright / CONTROLLER_MAX);
} else {
this.onVolumeActionUpdate(changeVolume);
}
this.positionH = event.offsetY;
})
.onActionEnd(() =&gt; {
// å»¶æ—¶éšè—æ§åˆ¶å™¨
setTimeout(() =&gt; {
this.controlShow = false;
}, CONTROLLER_DElAY)
})
))</li>
</ul>
</li>
</ol>
<h4 data-id="heading-6">å¦‚æœæ‚¨æƒ³ç³»ç»Ÿæ·±å…¥åœ°å­¦ä¹  HarmonyOS å¼€å‘æˆ–æƒ³è€ƒå–HarmonyOSè®¤è¯è¯ä¹¦ï¼Œæ¬¢è¿åŠ å…¥åä¸ºå¼€å‘è€…å­¦å ‚ï¼š</h4>
<h3 data-id="heading-7">è¯·ç‚¹å‡»â†’ï¼š <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.huawei.com%2Fconsumer%2Fcn%2Ftraining%2FclassDetail%2Fd0d15d9039414a8fad9f99ac4a3f5096%3Ftype%3D1%253Fha_source%253Dhmosclass%26ha_sourceId%3D89000248" target="_blank" title="https://developer.huawei.com/consumer/cn/training/classDetail/d0d15d9039414a8fad9f99ac4a3f5096?type=1%3Fha_source%3Dhmosclass&amp;ha_sourceId=89000248" ref="nofollow noopener noreferrer">HarmonyOSå®˜æ–¹è®¤è¯åŸ¹è®­</a></h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6ce8fcc243f84647a2963226abfb3c5f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6bm_5Lq65oib:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767623531&amp;x-signature=qViJQl0LopLlJgapc3XNA%2BRXCms%3D" alt="" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[AIå·¥å…·å¦‚ä½•é‡å¡‘æˆ‘çš„å¼€å‘æ—¥å¸¸]]></title>    <link>https://juejin.cn/post/7589126920286535690</link>    <guid>https://juejin.cn/post/7589126920286535690</guid>    <pubDate>2025-12-29T14:34:07.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589126920286535690" data-draft-id="7589126920286437386" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="AIå·¥å…·å¦‚ä½•é‡å¡‘æˆ‘çš„å¼€å‘æ—¥å¸¸ "/> <meta itemprop="keywords" content="å‰ç«¯,äººå·¥æ™ºèƒ½,æ·±åº¦å­¦ä¹ "/> <meta itemprop="datePublished" content="2025-12-29T14:34:07.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="_XU"/> <meta itemprop="url" content="https://juejin.cn/user/3166249063027112"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            AIå·¥å…·å¦‚ä½•é‡å¡‘æˆ‘çš„å¼€å‘æ—¥å¸¸ 
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3166249063027112/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    _XU
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T14:34:07.000Z" title="Mon Dec 29 2025 14:34:07 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{position:relative;word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#333}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:30px;margin-bottom:5px}.markdown-body h2{font-size:24px;display:inline-block;font-weight:700;background:#ef7060;color:#fff;padding:6px 8px 0 0;border-top-right-radius:6px;margin-right:2px;box-shadow:6px 3px 0 0 rgba(239,112,96,.2)}.markdown-body h2:before{content:" ";display:inline-block;width:8px}.markdown-body h2:after{content:" ";position:absolute;display:block;width:calc(100% - 50px);border-bottom:3px solid #ef7060}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #3e3e3e;margin-top:32px;margin-bottom:32px;height:1px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(27,31,35,.05);color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:JetBranins Mono,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px;background-color:#fdfdfd}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#fdfdfd}.markdown-body a{text-decoration:none;font-weight:700;color:#ef7060;border-bottom:1px solid #ef7060}.markdown-body a:active,.markdown-body a:hover{color:#ef2d26}.markdown-body table tr td,.markdown-body table tr th{border:1px solid #ccc;padding:5px 10px}.markdown-body table{display:block!important;width:auto;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{background:#f0f0f0;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#f8f8f8}.markdown-body blockquote{margin-inline-start:0;margin-inline-end:0;border-left:3px solid #ef7060;background:#fff9f9;padding:1px 20px;margin-top:20px}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atom-one-light">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#383a42;background:#fafafa}.hljs-comment,.hljs-quote{color:#a0a1a7;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#a626a4}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e45649}.hljs-literal{color:#0184bb}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#50a14f}.hljs-built_in,.hljs-class .hljs-title{color:#c18401}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#986801}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#4078f2}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><p>2025å¹´ï¼Œè½¬çœ¼é—´åˆè¿‡å»äº†ã€‚ä½œä¸ºä¸€åå¼€å‘è€…ï¼Œè¿™ä¸€å¹´æ¥ï¼Œæˆ‘æœ€æ·±åˆ»çš„ä½“ä¼šå°±æ˜¯å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰å¦‚ChatGPTå’ŒDeepSeekï¼Œå·²ç»ä»â€œæ–°é²œç©å…·â€å½»åº•è½¬å˜ä¸ºæ—¥å¸¸å·¥ä½œçš„æ ¸å¿ƒä¼™ä¼´ã€‚å®ƒä»¬ä¸å†æ˜¯å¶å°”å’¨è¯¢çš„â€œæœç´¢å¼•æ“æ›¿ä»£å“â€ï¼Œè€Œæ˜¯çœŸæ­£èå…¥ä»£ç ç¼–å†™ã€è°ƒè¯•å’Œæ€è€ƒæµç¨‹çš„â€œç¼–ç¨‹æ­æ¡£â€ã€‚
èšç„¦åˆ°ä¸ªä½“å±‚é¢ï¼Œè¿™äº›AIå·¥å…·å¯¹â€œæˆ‘â€çš„å½±å“æ˜¯å·¨å¤§çš„ï¼šå¼€å‘æ•ˆç‡æ˜¾è‘—æå‡ï¼Œä»£ç ç¼–å†™å˜å¾—æ›´æµç•…ã€æ›´å¯Œæœ‰åˆ›æ„ï¼ŒåŒæ—¶ä¹Ÿè®©æˆ‘é‡æ–°å®¡è§†è‡ªå·±çš„ç¼–ç¨‹ä¹ æƒ¯å’ŒæŠ€èƒ½æˆé•¿è·¯å¾„ã€‚ä¸‹é¢ï¼Œæˆ‘ä»ä¸ªäººç»å†å‡ºå‘ï¼Œåˆ†äº«è¿™ä¸€å¹´çš„å˜åŒ–ã€‚</p>
<h2 data-id="heading-0">ChatGPTï¼šä»çµæ„Ÿæ¿€å‘åˆ°é«˜æ•ˆä»£ç ç”Ÿæˆçš„å¾—åŠ›åŠ©æ‰‹</h2>
<p>å¹´åˆæ—¶ï¼Œæˆ‘ä¸»è¦ç”¨ChatGPTæ¥å¤„ç†æ—¥å¸¸ç¼–ç é—®é¢˜ã€‚èµ·åˆåªæ˜¯ç®€å•é—®â€œæ€ä¹ˆå®ç°ä¸€ä¸ªVueå‡½æ•°â€æˆ–â€œä¼˜åŒ–è¿™ä¸ªSQLæŸ¥è¯¢â€ï¼Œä½†æ¸æ¸åœ°ï¼Œå®ƒæˆäº†æˆ‘å¼€å‘æµç¨‹çš„èµ·ç‚¹ã€‚</p>
<p><strong>æ•ˆç‡æå‡çš„æ ¸å¿ƒåœºæ™¯ï¼š</strong> åœ¨ç¼–å†™æ–°åŠŸèƒ½æ—¶ï¼ŒChatGPTå¸®æˆ‘å¿«é€Ÿç”Ÿæˆ boilerplate ä»£ç ã€‚ä¾‹å¦‚ï¼Œæ„å»ºä¸€ä¸ªåç«¯APIæ—¶ï¼Œæˆ‘åªéœ€æè¿°éœ€æ±‚ï¼ˆå¦‚â€œç”¨Node.jså’ŒExpresså®ç°ä¸€ä¸ªå¸¦JWTè®¤è¯çš„ç”¨æˆ·æ³¨å†Œæ¥å£â€ï¼‰ï¼Œå®ƒå°±èƒ½è¾“å‡ºå®Œæ•´ç»“æ„ï¼ŒåŒ…æ‹¬é”™è¯¯å¤„ç†å’Œæœ€ä½³å®è·µã€‚è¿™è®©æˆ‘ä»é‡å¤æ€§å·¥ä½œè§£æ”¾å‡ºæ¥ï¼Œä¸€å¤©èƒ½å¤šå¤„ç†2-3ä¸ªä¸­ç­‰å¤æ‚åº¦ä»»åŠ¡ã€‚ä¸ªäººç»Ÿè®¡ä¸‹æ¥ï¼Œä»Šå¹´æˆ‘çš„ä»£ç æäº¤é¢‘ç‡æ¯”å»å¹´æé«˜äº†çº¦30%ï¼Œå¾ˆå¤§ç¨‹åº¦ä¸Šå½’åŠŸäºæ­¤ã€‚</p>
<p><strong>è°ƒè¯•çš„åŠ é€Ÿå™¨ï¼š</strong> é‡åˆ°bugæ—¶ï¼Œç²˜è´´é”™è¯¯ä¿¡æ¯å’Œç›¸å…³ä»£ç ï¼ŒChatGPTå¾€å¾€èƒ½ç²¾å‡†æŒ‡å‡ºé—®é¢˜ï¼Œç”šè‡³å»ºè®®å¤šç§ä¿®å¤æ–¹æ¡ˆã€‚ç›¸æ¯”ä»¥å‰å…ˆæ‰‹åŠ¨æœç´¢å†å®ç°éªŒè¯ï¼Œç°åœ¨è°ƒè¯•æ—¶é—´ç¼©çŸ­äº†è‡³å°‘ä¸€åŠã€‚æœ‰ä¸€æ¬¡ï¼Œä¸€ä¸ªæ£˜æ‰‹çš„å¼‚æ­¥å¹¶å‘é—®é¢˜å›°æ‰°äº†æˆ‘åŠå¤©ï¼Œç”¨ChatGPTåˆ†æåï¼Œå¾ˆå¿«å°±è§£å†³äº†ã€‚</p>
<p><strong>ä¸ªäººå½±å“ï¼š</strong> å®ƒè®©æˆ‘ç¼–ç æ›´â€œå¦‚é±¼å¾—æ°´â€â€”â€”æ€è·¯å¡å£³æ—¶ï¼Œåƒå’Œä¸€ä½èµ„æ·±åŒäº‹ brainstorm ä¸€æ ·é¡ºç•…ã€‚è´Ÿé¢æ¥è¯´ï¼Œæœ‰æ—¶ç”Ÿæˆçš„ä»£ç éœ€è¦ä»”ç»†å®¡æŸ¥ï¼ˆhallucinationé—®é¢˜è™½å‡å°‘ä½†ä»å­˜åœ¨ï¼‰ï¼Œè¿™åŸ¹å…»äº†æˆ‘æ›´å¼ºçš„ä»£ç å®¡æŸ¥ä¹ æƒ¯ã€‚æ€»ä½“ä¸Šï¼ŒChatGPTè®©æˆ‘ä»â€œæœºæ¢°ç å†œâ€è½¬å‘â€œæ¶æ„æ€è€ƒè€…â€ï¼Œå·¥ä½œæ•ˆç‡æ˜æ˜¾æå‡ã€‚</p>
<h2 data-id="heading-1">DeepSeekï¼šæè‡´æ€§ä»·æ¯”ä¸æœ¬åœ°éƒ¨ç½²çš„ç¡¬æ ¸é€‰æ‹©</h2>
<p>å¹´ä¸­å¼€å§‹ï¼Œæˆ‘é€æ¸æŠŠDeepSeekä½œä¸ºä¸»åŠ›ä»£ç å·¥å…·ï¼Œå®ƒä½¿ç”¨èµ·æ¥å¾ˆæ–¹ä¾¿ä»¥åŠèƒ½å¾ˆå¥½çš„æ§åˆ¶æˆæœ¬ã€‚å®ƒçš„ä»£ç ç”Ÿæˆç²¾åº¦ä¸é€Ÿåº¦åœ¨Vueã€Node.jsç­‰å‰ç«¯ç”Ÿæ€ä¸Šè¡¨ç°ä¸é”™ï¼Œè€Œä¸”å“åº”é€Ÿåº¦ä¹Ÿå¾ˆå¿«ã€‚ å¦‚æœé¡¹ç›®æ¶‰å¯†æ³¨é‡éšç§ï¼ŒDeepSeekå¼€æºæ¨¡å‹å¯ä»¥éƒ¨ç½²åˆ°æœ¬åœ°è¿è¡Œï¼Œä¸ä¸Šä¼ ä»»ä½•æ•æ„Ÿé¡¹ç›®ä»£ç ã€‚</p>
<p><strong>ä¸ªäººå½±å“ï¼š</strong> DeepSeekå¯ä»¥æ»¡è¶³å¤§é‡æ‰¹é‡ç”Ÿæˆæˆ–é‡æ„çš„åœºæ™¯ã€‚å®ƒæŠŠæˆ‘ä»â€œæ‹…å¿ƒè´¹ç”¨â€å’Œâ€œæ‹…å¿ƒéšç§â€çš„ç„¦è™‘ä¸­è§£æ”¾å‡ºæ¥ï¼Œè®©æˆ‘æ›´ä¸“æ³¨äºä¸šåŠ¡æœ¬èº«ã€‚</p>
<h2 data-id="heading-2">æˆ‘çš„å…¸å‹å·¥ä½œæµ</h2>
<p>å®é™…ä½¿ç”¨ä¸­ï¼Œä¸¤è€…æˆ‘å½¢æˆäº†æ¸…æ™°çš„äº’è¡¥ç­–ç•¥ï¼š</p>
<ul>
<li>åˆ›æ„ä¸éœ€æ±‚æ‹†è§£é˜¶æ®µ â†’ ç”¨ChatGPTï¼ˆæ›´æ“…é•¿å‘æ•£æ€ç»´ï¼‰ã€‚</li>
<li>æ ¸å¿ƒä»£ç å®ç°ä¸ä¼˜åŒ–é˜¶æ®µ â†’ åˆ‡åˆ°DeepSeekï¼ˆæ›´å¿«ã€æ›´çœé’±ï¼‰ã€‚</li>
<li>è°ƒè¯•ä¸é‡æ„é˜¶æ®µ â†’ æ ¹æ®ä¸Šä¸‹æ–‡å’Œéšç§éœ€æ±‚çµæ´»åˆ‡æ¢ã€‚</li>
</ul>
<h2 data-id="heading-3">ä¸ªäººä½“ä¼š</h2>
<p>å¤§æ¨¡å‹çš„è¿›æ­¥è®©ä»£ç ç”Ÿæˆä¸å†æ˜¯â€œå¡«ç©ºé¢˜â€ï¼Œè€Œæ˜¯çœŸæ­£æ™ºèƒ½åä½œã€‚
<strong>ç”Ÿäº§åŠ›è·ƒå‡ï¼š</strong> ç»“åˆä½¿ç”¨ChatGPTå’ŒDeepSeekï¼Œæˆ‘çš„æ•´ä½“å¼€å‘æ•ˆç‡å¾—åˆ°äº†å¤§å¹…æå‡ã€‚é‡å¤ä»»åŠ¡å‡ ä¹è‡ªåŠ¨åŒ–ï¼Œç•™å‡ºæ›´å¤šæ—¶é—´ä¸“æ³¨æ ¸å¿ƒé€»è¾‘å’Œåˆ›æ–°ã€‚ <strong>æŠ€èƒ½æ¼”å˜ï¼š</strong> AIå¤„ç†äº†ä½é˜¶å·¥ä½œï¼Œæˆ‘è¢«è¿«æå‡promptå·¥ç¨‹å’Œç³»ç»Ÿè®¾è®¡èƒ½åŠ›ã€‚ä»¥å‰å†™ä»£ç é è®°å¿†ï¼Œç°åœ¨æ›´é â€œé—®å¯¹é—®é¢˜â€ã€‚è¿™è®©æˆ‘æˆé•¿æ›´å¿«ï¼ŒåŒæ—¶ä¹Ÿæ‹…å¿ƒè¿‡åº¦ä¾èµ–ä¼šå¼±åŒ–åŸºç¡€æŠ€èƒ½â€”â€”æ‰€ä»¥æˆ‘åšæŒä¸æ–­æ‰‹åŠ¨å®ç°ä¸€äº›ç®—æ³•ç»ƒä¹ ã€‚</p>
<p>å½“ç„¶ï¼Œä¸æ˜¯ä¸€åˆ‡å®Œç¾ã€‚AIå¶å°”ä¹Ÿä¼šè¾“å‡ºä½è´¨ä»£ç ï¼Œéœ€è¦äººå·¥æŠŠå…³ã€‚ä½†æ€»ä½“ä¸Šï¼Œ2025å¹´çš„AIå·¥å…·è®©æˆ‘è¿™ä¸ªå¼€å‘è€…æ„Ÿå—åˆ°å‰æ‰€æœªæœ‰çš„èµ‹èƒ½ã€‚ å±•æœ›2026ï¼Œéšç€agenticæ¨¡å¼ï¼ˆå¦‚å¤šæ­¥è‡ªä¸»ä»»åŠ¡ï¼‰å’Œæ›´å¥½å·¥å…·é›†æˆï¼Œæˆ‘ç›¸ä¿¡å¼€å‘å°†æ›´è¿›ä¸€æ­¥â€œæ™ºèƒ½åŒ–â€ã€‚ä½œä¸ºå¼€å‘è€…ï¼Œæˆ‘ä»¬ä¸æ˜¯è¢«å–ä»£ï¼Œè€Œæ˜¯è¢«æ”¾å¤§â€”â€”æŠ“ä½è¿™ä¸ªæµªæ½®ï¼Œç»§ç»­æ¸¸åˆƒæœ‰ä½™åœ°åœ¨ä»£ç çš„æµ·æ´‹ä¸­ç•…æ¸¸ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[HarmonyOSåº”ç”¨å¼€å‘ï¼šè‡ªå®šä¹‰åŠ¨æ•ˆtabå®ç°]]></title>    <link>https://juejin.cn/post/7589099845186863140</link>    <guid>https://juejin.cn/post/7589099845186863140</guid>    <pubDate>2025-12-29T14:35:16.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589099845186863140" data-draft-id="7589201772118179846" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="HarmonyOSåº”ç”¨å¼€å‘ï¼šè‡ªå®šä¹‰åŠ¨æ•ˆtabå®ç°"/> <meta itemprop="keywords" content="HarmonyOS,ç¨‹åºå‘˜,Android"/> <meta itemprop="datePublished" content="2025-12-29T14:35:16.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é¹¿äººæˆ›"/> <meta itemprop="url" content="https://juejin.cn/user/4309685005226376"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            HarmonyOSåº”ç”¨å¼€å‘ï¼šè‡ªå®šä¹‰åŠ¨æ•ˆtabå®ç°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4309685005226376/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é¹¿äººæˆ›
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T14:35:16.000Z" title="Mon Dec 29 2025 14:35:16 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">å‰è¨€ï¼š</h3>
<p>æœ¬ç¤ºä¾‹ä»‹ç»ä½¿ç”¨Listã€Textç­‰ç»„ä»¶ï¼Œä»¥åŠanimateToç­‰æ¥å£å®ç°è‡ªå®šä¹‰Tabæ•ˆæœã€‚</p>
<h3 data-id="heading-1">æ•ˆæœé¢„è§ˆå›¾</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0902abaf52b1453ca3b99e5b48e54f7f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6bm_5Lq65oib:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767623716&amp;x-signature=ofjnt6Rur%2BoNoc%2FwDkn1%2FjLbotw%3D" alt="" loading="lazy"/></p>
<p><strong>ä½¿ç”¨è¯´æ˜</strong></p>
<p>1.é€‰ä¸­é¡µç­¾ï¼Œå­—ä½“æ”¾å¤§åŠ ç²—ä¸”åé¢æœ‰èƒŒæ™¯æ¡ï¼Œèµ·åˆ°å¼ºè°ƒä½œç”¨ã€‚</p>
<p>2.æ‰‹åŠ¿è§¦æ‘¸tabå†…å®¹æ»‘åŠ¨ï¼ŒèƒŒæ™¯æ¡è·Ÿéšæ‰‹åŠ¿ä¸€èµ·æ»‘åŠ¨ã€‚æŠ¬æ‰‹æ—¶ï¼Œå½“tabå†…å®¹æ»‘åŠ¨è·ç¦»ä¸è¶³ä¸€åŠæ—¶ï¼Œä¼šè‡ªåŠ¨å›å¼¹ï¼Œè€Œå½“tabå†…å®¹æ»‘åŠ¨è·ç¦»å¤§äºä¸€åŠæ—¶ï¼ŒèƒŒæ™¯æ¡åˆ™ä¼šç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªé¡µç­¾ã€‚å½“èƒŒæ™¯æ¡æ»‘åŠ¨åˆ°ä¸€å®šè·ç¦»åå¼€å§‹æ»‘åŠ¨é¡µç­¾æ¡ï¼Œä½¿èƒŒæ™¯æ¡å§‹ç»ˆèƒ½å¤Ÿä¿æŒåœ¨å¯è§†èŒƒå›´å†…ã€‚</p>
<p>3.ç‚¹å‡»é¡µç­¾ï¼Œå¯ä»¥è¿›è¡Œé¡µç­¾åˆ‡æ¢ã€‚</p>
<p>4.æ»‘åŠ¨é¡µç­¾æ¡ï¼ŒèƒŒæ™¯æ¡ä¹Ÿä¼šéšä¹‹ä¸€èµ·æ»‘åŠ¨ï¼Œç„¶åæ»‘åŠ¨tabå†…å®¹ï¼Œé¡µç­¾æ¡ä¼šæ»‘åŠ¨åˆ°åŸå¤„ï¼Œä½¿èƒŒæ™¯æ¡å¤„äºå¯è§†èŒƒå›´å†…ï¼Œä¹‹åèƒŒæ™¯æ¡å¼€å§‹è·Ÿéšæ‰‹åŠ¿æ»‘åŠ¨ã€‚</p>
<p>5.åŠ¨ç”»æ‰¿æ¥ï¼ŒèƒŒæ™¯æ¡æ»‘åŠ¨è¿‡ç¨‹ä¸­ï¼Œè§¦æ‘¸å±å¹•ï¼ŒèƒŒæ™¯æ¡åŠ¨ç”»åœæ­¢ï¼Œæ¾å¼€æ‰‹åŠ¿ï¼ŒèƒŒæ™¯æ¡ç»§ç»­æ»‘åŠ¨</p>
<h3 data-id="heading-2">ä¸‹è½½å®‰è£…</h3>
<p>1.æ¨¡å—oh-package.json5æ–‡ä»¶ä¸­å¼•å…¥ä¾èµ–</p>
<pre><code class="hljs language-perl" lang="perl"><span class="hljs-string">"dependencies"</span>: {
  <span class="hljs-string">"@ohos-cases/custom_animation_tab"</span>: <span class="hljs-string">"haråŒ…åœ°å€"</span>
}
</code></pre>
<p>2.etsæ–‡ä»¶importè‡ªå®šä¹‰è§†å›¾å®ç°Tabæ•ˆæœç»„ä»¶</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> {<span class="hljs-title class_">CustomAnimationTab</span>} <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos-cases/custom_animation_tab'</span>
</code></pre>
<h3 data-id="heading-3">å¿«é€Ÿä½¿ç”¨</h3>
<p>æœ¬èŠ‚ä¸»è¦ä»‹ç»äº†å¦‚ä½•å¿«é€Ÿä¸Šæ‰‹ä½¿ç”¨è‡ªå®šä¹‰è§†å›¾å®ç°Tabæ•ˆæœç»„ä»¶ï¼ŒåŒ…æ‹¬æ„å»ºTabç»„ä»¶ä»¥åŠå¸¸è§è‡ªå®šä¹‰å‚æ•°çš„åˆå§‹åŒ–ã€‚</p>
<p>1.æ„å»ºTab</p>
<p>åœ¨ä»£ç åˆé€‚çš„ä½ç½®ä½¿ç”¨CustomAnimationTabç»„ä»¶å¹¶ä¼ å…¥å¯¹åº”çš„å‚æ•°ï¼ˆanimationAttributeå¿…é¡»è®¾ç½®ï¼Œå…¶ä½™å‚æ•°å¯ä»¥ä½¿ç”¨é»˜è®¤å€¼ï¼‰ï¼Œåç»­å°†åˆ†åˆ«ä»‹ç»å¯¹åº”å‚æ•°çš„åˆå§‹åŒ–ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">/**
 * æ„å»ºè‡ªå®šä¹‰Tab
 * animationAttribute: åŠ¨æ•ˆå±æ€§
 * tabsInfo: tabæ•°æ®æº
 * indicatorBarAttribute: èƒŒæ™¯æ¡å±æ€§
 * tabBarAttribute: é¡µç­¾æ¡å±æ€§
 * tabController: è‡ªå®šä¹‰åŠ¨æ•ˆtabæ§åˆ¶å™¨
 * scroller: é¡µç­¾æ¡æ»šåŠ¨æ§åˆ¶å™¨
 */</span>
CustomAnimationTab({
  animationAttribute: <span class="hljs-keyword">this</span>.animationAttribute,
  tabsInfo: <span class="hljs-keyword">this</span>.tabsInfo,
  indicatorBarAttribute: <span class="hljs-keyword">this</span>.indicatorBarAttribute,
  tabBarAttribute: <span class="hljs-keyword">this</span>.tabBarAttribute,
  tabController: <span class="hljs-keyword">this</span>.tabController,
  scroller: <span class="hljs-keyword">this</span>.scroller
})
</code></pre>
<p>2.åŠ¨æ•ˆå±æ€§åˆå§‹åŒ–</p>
<p>åŠ¨æ•ˆå±æ€§åŸºç±»ä¸ºAnimationAttributeï¼Œå…¶ä¸­å°è£…äº†tabç»„ä»¶å†…éƒ¨çš„åŠ¨æ•ˆå±æ€§ã€‚æœ¬ç¤ºä¾‹ä¸­æä¾›äº†å¼€å‘è‡ªå®šä¹‰èƒŒæ™¯æ¡é¢œè‰²åŠ¨æ•ˆå±æ€§çš„ä»£ç ã€‚é¦–å…ˆåˆ›å»ºä¸€ä¸ªMyAnimationAttributeç±»ï¼Œå¹¶ç»§æ‰¿AnimationAttributeåŸºç±»ï¼Œå…¶ä¸­æ–°å¢èƒŒæ™¯æ¡é¢œè‰²å±æ€§indicatorBarColorï¼›ä¹‹ååˆ›å»ºMyAnimationAttributeçŠ¶æ€å˜é‡å¯¹è±¡animationAttributeï¼Œå¹¶å°†èƒŒæ™¯æ¡é¢œè‰²å±æ€§ç»‘å®šåˆ°è‡ªå®šä¹‰èƒŒæ™¯æ¡ä¸Šï¼ŒåŒæ—¶ä¸buttonç›¸å…³è”ï¼Œé€šè¿‡ç‚¹å‡»äº‹ä»¶åŠ¨æ€æ›´æ”¹èƒŒæ™¯æ¡é¢œè‰²ã€‚ï¼ˆè¿™é‡Œéœ€è¦æ³¨æ„classå¯¹è±¡å±æ€§çº§æ›´æ–°çš„æ­£ç¡®ä½¿ç”¨ï¼‰</p>
<pre><code class="hljs language-scala" lang="scala"><span class="hljs-comment">// è‡ªå®šä¹‰åŠ¨æ•ˆå±æ€§ï¼Œæ·»åŠ äº†èƒŒæ™¯æ¡é¢œè‰²å˜åŒ–</span>
<span class="hljs-meta">@State</span> animationAttribute: <span class="hljs-type">MyAnimationAttribute</span> = <span class="hljs-keyword">new</span> <span class="hljs-type">MyAnimationAttribute</span>($r(<span class="hljs-string">"app.color.custom_animation_tab_indicator_color"</span>));


<span class="hljs-keyword">export</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyAnimationAttribute</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AnimationAttribute</span> </span>{
  <span class="hljs-comment">// èƒŒæ™¯æ¡é¢œè‰²</span>
  indicatorBarColor: <span class="hljs-type">ResourceColor</span>;

  constructor(indicatorBarColor: <span class="hljs-type">ResourceColor</span>) {
    <span class="hljs-keyword">super</span>();
    <span class="hljs-keyword">this</span>.indicatorBarColor = indicatorBarColor;
  }
}


<span class="hljs-meta">@Builder</span>
indicatorBar($$: <span class="hljs-type">BaseInterface</span>) {
  <span class="hljs-type">Column</span>()
    .height($r(<span class="hljs-string">"app.float.custom_animation_tab_indicator_height"</span>))
    .width($r(<span class="hljs-string">"app.string.custom_animation_tab_one_hundred_percent"</span>))
    <span class="hljs-comment">// ç»‘å®šè‡ªå®šä¹‰åŠ¨æ•ˆå±æ€§</span>
    .backgroundColor(<span class="hljs-keyword">this</span>.animationAttribute.indicatorBarColor)
    .borderRadius($r(<span class="hljs-string">"app.float.custom_animation_tab_indicator_border_radius"</span>))
}

<span class="hljs-comment">// æ›´æ–°è‡ªå®šä¹‰åŠ¨æ•ˆå˜é‡â€”â€”èƒŒæ™¯æ¡é¢œè‰²</span>
<span class="hljs-type">Column</span>() {
  <span class="hljs-type">Button</span>($r(<span class="hljs-string">"app.string.custom_animation_tab_button_text"</span>))
    .height($r(<span class="hljs-string">"app.string.custom_animation_tab_ninety_percent"</span>))
    .<span class="hljs-keyword">type</span>(<span class="hljs-type">ButtonType</span>.<span class="hljs-type">Capsule</span>)
    .onClick(() =&gt; {
      <span class="hljs-keyword">if</span> ((<span class="hljs-keyword">this</span>.animationAttribute.indicatorBarColor as <span class="hljs-type">Resource</span>).id ===
      $r(<span class="hljs-string">"app.color.custom_animation_tab_indicator_color"</span>).id) {
        <span class="hljs-keyword">this</span>.animationAttribute.indicatorBarColor = <span class="hljs-type">Color</span>.<span class="hljs-type">Yellow</span>;
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.animationAttribute.indicatorBarColor === <span class="hljs-type">Color</span>.<span class="hljs-type">Yellow</span>) {
        <span class="hljs-keyword">this</span>.animationAttribute.indicatorBarColor = $r(<span class="hljs-string">"app.color.custom_animation_tab_indicator_color"</span>);
      }
    })
}
.justifyContent(<span class="hljs-type">FlexAlign</span>.<span class="hljs-type">Center</span>)
.height($r(<span class="hljs-string">"app.string.custom_animation_tab_ten_percent"</span>))
.width($r(<span class="hljs-string">"app.string.custom_animation_tab_one_hundred_percent"</span>))
</code></pre>
<p>3.æ•°æ®åˆå§‹åŒ–</p>
<p>æœ¬å°èŠ‚ä¸»è¦ä»‹ç»äº†å¦‚ä½•åˆå§‹åŒ–è‡ªå®šä¹‰Tabæ•°æ®æºã€‚é¦–å…ˆæ„å»ºä¸€ä¸ªTabInfoæ•°ç»„ï¼Œç„¶åå‘å…¶ä¸­ä¼ å…¥å¯¹åº”çš„TabInfoå¯¹è±¡ï¼ŒTabInfoå¯¹è±¡ä¸»è¦éœ€è¦ä¼ å…¥ä¸‰ä¸ªå±æ€§â€”â€”é¡µç­¾æ ‡é¢˜ã€tabé¡µé¢å†…å®¹è§†å›¾ä»¥åŠé¡µç­¾ç»„ä»¶ã€‚ä»¥baseé¡µé¢ä¸ºä¾‹ï¼Œé¦–å…ˆåˆ›å»ºä¸€ä¸ª@Builderå‡½æ•°ï¼Œåœ¨è¯¥å‡½æ•°ä¸­å¡«å…¥structç»„ä»¶ï¼Œåœ¨structç»„ä»¶ä¸­ç¼–å†™å¯¹åº”tabé¡µé¢å†…å®¹è§†å›¾ã€‚ç„¶åï¼Œæ„å»ºå¯¹åº”çš„é¡µç­¾æ ·å¼tabBarï¼Œå…¶ä¸­éœ€è¦æ·»åŠ ä¸€ä¸ªTabBarItemInterfaceç±»å¯¹è±¡ä½œä¸ºå½¢å‚ï¼Œå…¶åŒ…æ‹¬äº†ä¸€äº›å¿…è¦å±æ€§ï¼Œå¯ä»¥è‡ªå®šä¹‰æ ·å¼ä¿®æ”¹ï¼Œæœ¬ç¤ºä¾‹ä¸­ä¸»è¦é€šè¿‡ä½¿ç”¨å½“å‰ç´¢å¼•curIndexä¸é¡µç­¾ç´¢å¼•indexä¹‹é—´çš„æ¯”è¾ƒæ¥åŠ¨æ€æ›´æ”¹é¡µç­¾æ ·å¼ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// tabæ•°æ®</span>
<span class="hljs-attr">tabsInfo</span>: <span class="hljs-title class_">TabInfo</span>[] = [];

<span class="hljs-variable language_">this</span>.<span class="hljs-property">tabsInfo</span> = [
  <span class="hljs-keyword">new</span> <span class="hljs-title class_">TabInfo</span>(<span class="hljs-title class_">CustomAnimationTabConfigure</span>.<span class="hljs-property">DEFAULT_BASE_TAB</span>, <span class="hljs-title function_">wrapBuilder</span>(baseBuilder), <span class="hljs-title function_">wrapBuilder</span>(tabBar)),
  <span class="hljs-keyword">new</span> <span class="hljs-title class_">TabInfo</span>(<span class="hljs-title class_">CustomAnimationTabConfigure</span>.<span class="hljs-property">DEFAULT_UI_TAB</span>, <span class="hljs-title function_">wrapBuilder</span>(uiBuilder), <span class="hljs-title function_">wrapBuilder</span>(tabBar)),
  <span class="hljs-keyword">new</span> <span class="hljs-title class_">TabInfo</span>(<span class="hljs-title class_">CustomAnimationTabConfigure</span>.<span class="hljs-property">DEFAULT_DYEFFECT_TAB</span>, <span class="hljs-title function_">wrapBuilder</span>(dyEffectBuilder), <span class="hljs-title function_">wrapBuilder</span>(tabBar)),
  <span class="hljs-keyword">new</span> <span class="hljs-title class_">TabInfo</span>(<span class="hljs-title class_">CustomAnimationTabConfigure</span>.<span class="hljs-property">DEFAULT_THIRTYPARTY_TAB</span>, <span class="hljs-title function_">wrapBuilder</span>(thirdPartyBuilder), <span class="hljs-title function_">wrapBuilder</span>(tabBar)),
  <span class="hljs-keyword">new</span> <span class="hljs-title class_">TabInfo</span>(<span class="hljs-title class_">CustomAnimationTabConfigure</span>.<span class="hljs-property">DEFAULT_NATIVE_TAB</span>, <span class="hljs-title function_">wrapBuilder</span>(nativeBuilder), <span class="hljs-title function_">wrapBuilder</span>(tabBar)),
  <span class="hljs-keyword">new</span> <span class="hljs-title class_">TabInfo</span>(<span class="hljs-title class_">CustomAnimationTabConfigure</span>.<span class="hljs-property">DEFAULT_OTHER_TAB</span>, <span class="hljs-title function_">wrapBuilder</span>(otherBuilder), <span class="hljs-title function_">wrapBuilder</span>(tabBar))
]
  
<span class="hljs-comment">// baseBuilderé¡µé¢</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">LazyDataSource</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./LazyDataSource'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">SkeletonLayout</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./SkeletonLayout'</span>;

<span class="hljs-meta">@Builder</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">baseBuilder</span>(<span class="hljs-params"/>) {
  <span class="hljs-title class_">BasePage</span>();
}

<span class="hljs-meta">@Component</span>
struct <span class="hljs-title class_">BasePage</span> {
  <span class="hljs-meta">@State</span> <span class="hljs-attr">data</span>: <span class="hljs-title class_">LazyDataSource</span>&lt;<span class="hljs-built_in">string</span>&gt; = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LazyDataSource</span>&lt;<span class="hljs-built_in">string</span>&gt;();

  <span class="hljs-title function_">aboutToAppear</span>(): <span class="hljs-built_in">void</span> {
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; i++) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span>.<span class="hljs-title function_">pushData</span>(<span class="hljs-string">`<span class="hljs-subst">${i}</span>`</span>);
    }
  }

  <span class="hljs-title function_">build</span>(<span class="hljs-params"/>) {
    <span class="hljs-title class_">Column</span>() {
      <span class="hljs-title class_">List</span>() {
        <span class="hljs-title class_">LazyForEach</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span>, <span class="hljs-function">(<span class="hljs-params">data: <span class="hljs-built_in">string</span></span>) =&gt;</span> {
          <span class="hljs-title class_">ListItem</span>() {
            <span class="hljs-title class_">SkeletonLayout</span>({<span class="hljs-attr">isMine</span>: <span class="hljs-literal">false</span>})
          }
        })
      }
      .<span class="hljs-title function_">cachedCount</span>(<span class="hljs-number">1</span>)
      .<span class="hljs-title function_">width</span>(<span class="hljs-string">"100%"</span>)
      .<span class="hljs-title function_">height</span>(<span class="hljs-string">"100%"</span>)
    }
    .<span class="hljs-title function_">width</span>(<span class="hljs-string">"100%"</span>)
    .<span class="hljs-title function_">height</span>(<span class="hljs-string">"100%"</span>)
  }
}

<span class="hljs-comment">// é¡µç­¾æ ·å¼</span>
<span class="hljs-meta">@Builder</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">tabBar</span>(<span class="hljs-params">$$: TabBarItemInterface</span>) {
  <span class="hljs-title class_">Text</span>($$.<span class="hljs-property">title</span>)
    .<span class="hljs-title function_">fontSize</span>($$.<span class="hljs-property">curIndex</span> === $$.<span class="hljs-property">index</span> ? $r(<span class="hljs-string">"app.float.custom_animation_tab_list_select_font_size"</span>) : $r(<span class="hljs-string">"app.float.custom_animation_tab_list_unselect_font_size"</span>))
    .<span class="hljs-title function_">fontColor</span>($r(<span class="hljs-string">"app.color.custom_animation_tab_list_font_color"</span>))
    .<span class="hljs-title function_">fontWeight</span>($$.<span class="hljs-property">curIndex</span> === $$.<span class="hljs-property">index</span> ? <span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Bold</span> : <span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Medium</span>)
    .<span class="hljs-title function_">textAlign</span>(<span class="hljs-title class_">TextAlign</span>.<span class="hljs-property">Center</span>)
}
</code></pre>
<p>4.èƒŒæ™¯æ¡åˆå§‹åŒ–</p>
<p>èƒŒæ™¯æ¡å¯ä»¥é€šè¿‡IndicatorBarAttributeç±»è¿›è¡Œé…ç½®ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å·²æœ‰çš„èƒŒæ™¯æ¡é…ç½®ï¼ˆç›®å‰æ”¯æŒä¸¤ç§: IndicatorBarAttribute.BACKGROUNDBARå’ŒIndicatorBarAttribute.THINSTRIPï¼‰ã€‚æœ¬ç¤ºä¾‹ä¸»è¦ä»‹ç»äº†æ„å»ºIndicatorBarAttributeç±»è¿›è¡ŒèƒŒæ™¯æ¡é…ç½®ï¼Œå…¶ä¸­ä¼ å…¥äº†èƒŒæ™¯æ¡ç»„ä»¶indicatorBar ï¼ŒèƒŒæ™¯æ¡å®½åº¦æ¨¡å¼è®¾ç½®ä¸ºå†…è¾¹è·æ¨¡å¼ï¼Œå·¦å³è¾¹è·è®¾ä¸º20ï¼Œä¸Šä¸‹è¾¹è·è®¾ä¸º10ï¼ŒåŒæ—¶è®¾ç½®èƒŒæ™¯æ¡æœ€å¤§åç§»ä¸ºCustomAnimationTabConfigure.INDICATOR_MAX_LEFTä»¥åŠèƒŒæ™¯æ¡å®½åº¦æ‰©å±•æ¯”ä¾‹ä¸ºCustomAnimationTabConfigure.DEFAULT_INDICATOR_EXPANDã€‚</p>
<pre><code class="hljs language-less" lang="less">indicatorBarAttribute: IndicatorBarAttribute = new IndicatorBarAttribute(this.indicatorBar, SizeMode.<span class="hljs-attribute">Padding, 20, 10,
  CustomAnimationTabConfigure.INDICATOR_MAX_LEFT, CustomAnimationTabConfigure.DEFAULT_INDICATOR_EXPAND);

@Builder
indicatorBar($$</span>: BaseInterface) {
  <span class="hljs-built_in">Column</span>()
    .<span class="hljs-built_in">height</span>($<span class="hljs-built_in">r</span>(<span class="hljs-string">"app.string.custom_animation_tab_one_hundred_percent"</span>))
    .<span class="hljs-built_in">width</span>($<span class="hljs-built_in">r</span>(<span class="hljs-string">"app.string.custom_animation_tab_one_hundred_percent"</span>))
    .<span class="hljs-built_in">backgroundColor</span>(this.animationAttribute.indicatorBarColor)
    .<span class="hljs-built_in">borderRadius</span>($<span class="hljs-built_in">r</span>(<span class="hljs-string">"app.float.custom_animation_tab_indicator_border_radius"</span>))
}
</code></pre>
<p>5.é¡µç­¾æ¡åˆå§‹åŒ–</p>
<p>é¡µç­¾æ¡å±æ€§é€šè¿‡TabBarAttributeç±»è¿›è¡Œé…ç½®ã€‚æœ¬ä¾‹ä¸­ä¸»è¦é…ç½®äº†å„ä¸ªé¡µç­¾çš„å®½åº¦å¤§å°ä»¥åŠé¡µç­¾æ¡é«˜åº¦ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">tabBarAttribute: <span class="hljs-attr">TabBarAttribute</span> = new TabBarAttribute(CustomAnimationTabConfigure.LIST_ITEM_WIDTH, CustomAnimationTabConfigure.TABBAR_HEIGHT)
</code></pre>
<p>6.tabåŠé¡µç­¾æ¡æ§åˆ¶å™¨åˆå§‹åŒ–</p>
<p>è‡ªå®šä¹‰Tabæ§åˆ¶å™¨ä»¥åŠé¡µç­¾æ¡æ§åˆ¶å™¨åˆ†åˆ«é€šè¿‡CustomAnimationTabControllerå’ŒScrolleråˆå§‹åŒ–ï¼Œåˆ†åˆ«ç”¨äºæ§åˆ¶è‡ªå®šä¹‰Tabä¸é¡µç­¾æ¡çš„è¡Œä¸ºã€‚</p>
<pre><code class="hljs language-ini" lang="ini">// tabController
tabController: <span class="hljs-attr">CustomAnimationTabController</span> = new CustomAnimationTabController()<span class="hljs-comment">;</span>
// scroller
scroller: <span class="hljs-attr">Scroller</span> = new Scroller()<span class="hljs-comment">;</span>
</code></pre>
<h3 data-id="heading-4">å±æ€§(æ¥å£)è¯´æ˜</h3>
<p>CustomAnimationTabç»„ä»¶å±æ€§</p>
<p>å±æ€§</p>
<p>ç±»å‹</p>
<p>é‡Šä¹‰</p>
<p>é»˜è®¤å€¼</p>
<p>animationAttribute</p>
<p>AnimationAttribute</p>
<p>å°è£…äº†åŒ…æ‹¬èƒŒæ™¯æ¡é•¿åº¦ã€èƒŒæ™¯æ¡é«˜åº¦ä»¥åŠèƒŒæ™¯æ¡å·¦è¾¹è·åœ¨å†…çš„åŠ¨æ•ˆå±æ€§ï¼Œä½¿ç»„ä»¶å†…éƒ¨å¯¹åº”çš„å±æ€§å¯ä»¥åŠ¨æ€å˜åŒ–</p>
<p>undefined</p>
<p>tabsInfo</p>
<p>TabInfo[]</p>
<p>tabæ•°æ®æº</p>
<p>-</p>
<p>indicatorBarAttribute</p>
<p>IndicatorBarAttribute</p>
<p>èƒŒæ™¯æ¡å±æ€§ç±»ï¼Œé…ç½®èƒŒæ™¯æ¡ç»„ä»¶ï¼Œä»¥åŠèƒŒæ™¯æ¡ç›¸å…³çš„å±æ€§</p>
<p>-</p>
<p>tabBarAttribute</p>
<p>AnimationAttribute</p>
<p>é¡µç­¾æ¡å±æ€§ç±»ï¼Œé…ç½®é¡µç­¾æ¡ç›¸å…³çš„å±æ€§</p>
<p>-</p>
<p>tabController</p>
<p>CustomAnimationController</p>
<p>tabæ§åˆ¶å™¨ï¼Œç”¨äºæ§åˆ¶tabsç»„ä»¶è¿›è¡Œé¡µç­¾åˆ‡æ¢</p>
<p>-</p>
<p>scroller</p>
<p>Scroller</p>
<p>é¡µç­¾æ¡æ§åˆ¶å™¨ï¼Œå¯ä»¥æ§åˆ¶é¡µç­¾æ¡çš„æ»šåŠ¨</p>
<p>-</p>
<p>animationDuration</p>
<p>number</p>
<p>é¡µç­¾åˆ‡æ¢æ—¶é•¿ï¼Œæ§åˆ¶é¡µç­¾åˆ‡æ¢æ—¶èƒŒæ™¯æ¡æ»‘åŠ¨ä»¥åŠtabé¡µé¢ä¹‹é—´åˆ‡æ¢çš„æ—¶é•¿</p>
<p>240ms</p>
<p>startIndex</p>
<p>number</p>
<p>é…ç½®èµ·å§‹çš„é¡µç­¾ç´¢å¼•</p>
<p>0</p>
<p>gestureAnimation</p>
<p>(index: number, targetIndex: number, elementsInfo: [number, number][], ratio: number) =&gt; void</p>
<p>é…ç½®åœ¨tabé¡µé¢ä¸Šæ‰‹åŠ¿æ»‘åŠ¨æ—¶èƒŒæ™¯æ¡çš„è·Ÿæ‰‹åŠ¨æ•ˆ</p>
<p>-</p>
<p>autoAnimation</p>
<p>(index: number, targetIndex: number, elementsInfo: [number, number][], ratio: number) =&gt; void</p>
<p>é…ç½®åœ¨tabé¡µé¢ä¸Šç¦»æ‰‹åèƒŒæ™¯æ¡çš„è‡ªåŠ¨æ»‘åŠ¨åŠ¨æ•ˆ</p>
<p>-</p>
<p>clickAnimation</p>
<p>(index: number, targetIndex: number, indexInfo: Record&lt;string, number&gt;, targetIndexInfo: Record&lt;string, number&gt;, elementsInfo: [number, number][]) =&gt; void</p>
<p>é…ç½®ç‚¹å‡»é¡µç­¾æ—¶èƒŒæ™¯æ¡çš„æ»‘åŠ¨åŠ¨æ•ˆ</p>
<p>-</p>
<p>getScrollInfo</p>
<p>(center: number, width: number) =&gt; [number, number]</p>
<p>è·å–é¡µç­¾å¯¹åº”çš„èƒŒæ™¯æ¡å·¦è¾¹è·ä»¥åŠé¡µç­¾æ¡åç§»ï¼Œé€šè¿‡è¯¥å‡½æ•°å¯ä»¥è‡ªè¡Œé…ç½®é€‰ä¸­å„ä¸ªé¡µç­¾æ—¶èƒŒæ™¯æ¡çš„å·¦è¾¹è·ä»¥åŠé¡µç­¾æ¡çš„åç§»æƒ…å†µ</p>
<p>-</p>
<p>TabInfoç±»å±æ€§</p>
<p>å±æ€§</p>
<p>ç±»å‹</p>
<p>é‡Šä¹‰</p>
<p>é»˜è®¤å€¼</p>
<p>title</p>
<p>string</p>
<p>é¡µç­¾æ ‡é¢˜</p>
<p>-</p>
<p>contentbuilder</p>
<p>WrappedBuilder&lt;[]&gt;</p>
<p>tabé¡µé¢å†…å®¹è§†å›¾</p>
<p>-</p>
<p>barBuilder</p>
<p>WrappedBuilder&lt;[TabBarItemInterface]&gt;</p>
<p>é¡µç­¾ç»„ä»¶ï¼ˆæ²¡æœ‰é…ç½®ï¼Œåˆ™ä½¿ç”¨å†…éƒ¨é»˜è®¤é…ç½®ï¼‰</p>
<p>undefined</p>
<p>IndicatorBarAttributeç±»å±æ€§</p>
<p>å±æ€§</p>
<p>ç±»å‹</p>
<p>é‡Šä¹‰</p>
<p>é»˜è®¤å€¼</p>
<p>indicatorBar</p>
<p>(index: BaseInterface) =&gt; void</p>
<p>è‡ªå®šä¹‰èƒŒæ™¯æ¡ç»„ä»¶</p>
<p>-</p>
<p>sizeMode</p>
<p>SizeMode</p>
<p>èƒŒæ™¯æ¡å®½åº¦æ¨¡å¼</p>
<p>SizeMode.Normal</p>
<p>innerWidth</p>
<p>number</p>
<p>1. å°ºå¯¸æ¨¡å¼ä¸ºæ­£å¸¸æ¨¡å¼ï¼Œè¡¨ç¤ºèƒŒæ™¯æ¡å®½åº¦ï¼Œå€¼ä¸º0æ—¶åˆ™ä¸é¡µç­¾å®½åº¦ä¿æŒä¸€è‡´;<br/>
2. å°ºå¯¸æ¨¡å¼ä¸ºå†…è¾¹è·æ¨¡å¼ï¼Œè¡¨ç¤ºèƒŒæ™¯æ¡ä¸é¡µç­¾é¡¹ä¹‹é—´çš„å·¦å³è¾¹è·</p>
<p>0</p>
<p>innerHeight</p>
<p>number</p>
<p>1. å°ºå¯¸æ¨¡å¼ä¸ºæ­£å¸¸æ¨¡å¼ï¼Œè¡¨ç¤ºèƒŒæ™¯æ¡é«˜åº¦ï¼Œå€¼ä¸º0æ—¶åˆ™ä¸é¡µç­¾é«˜åº¦ä¿æŒä¸€è‡´;<br/>
2. å°ºå¯¸æ¨¡å¼ä¸ºå†…è¾¹è·æ¨¡å¼ï¼Œè¡¨ç¤ºèƒŒæ™¯æ¡ä¸é¡µç­¾é¡¹ä¹‹é—´çš„ä¸Šä¸‹è¾¹è·</p>
<p>0</p>
<p>maxIndicatorBarLeft</p>
<p>number</p>
<p>èƒŒæ™¯æ¡æœ€å¤§åç§»(&lt;0: æ— ä¸Šé™, &gt;=0: innerMaxIndicatorBarLeft)ï¼Œé…ç½®èƒŒæ™¯æ¡æœ€å¤§çš„æ»‘åŠ¨è·ç¦»ï¼Œè¶…è¿‡è¯¥è·ç¦»åé™¤éé¡µç­¾æ¡æ»‘åŠ¨åˆ°äº†åº•éƒ¨ï¼Œå¦åˆ™æ»‘åŠ¨é¡µç­¾æ¡ï¼ŒèƒŒæ™¯æ¡ä¸å†æ»‘åŠ¨</p>
<p>-1</p>
<p>indicatorExpand</p>
<p>number</p>
<p>èƒŒæ™¯æ¡å®½åº¦æ‰©å±•æ¯”ä¾‹ï¼Œé…ç½®èƒŒæ™¯æ¡åœ¨æ»‘åŠ¨è¿‡ç¨‹ä¸­å®½åº¦æ‰©å±•çš„æ¯”ä¾‹</p>
<p>1</p>
<p>barAlign</p>
<p>VerticalAlign</p>
<p>èƒŒæ™¯æ¡å‚ç›´å¸ƒå±€ï¼Œé…ç½®èƒŒæ™¯æ¡ç›¸å¯¹äºé¡µç­¾çš„ä½ç½®</p>
<p>VerticalAlign.Center</p>
<p>TabBarAttributeç±»å±æ€§</p>
<p>å±æ€§</p>
<p>ç±»å‹</p>
<p>é‡Šä¹‰</p>
<p>é»˜è®¤å€¼</p>
<p>barItemWidth</p>
<p>Length</p>
<p>å„ä¸ªé¡µç­¾é¡¹çš„å®½åº¦ï¼ˆæ²¡æœ‰è®¾ç½®ä¸”å°ºå¯¸æ¨¡å¼ä¸ºæ­£å¸¸æ¨¡å¼æ—¶ï¼Œä¸é¡µç­¾åŒå®½ï¼›æ²¡æœ‰è®¾ç½®ä¸”å°ºå¯¸æ¨¡å¼ä¸ºå†…è¾¹è·æ¨¡å¼æ—¶ï¼Œä¸èƒŒæ™¯æ¡åŒå®½ï¼‰</p>
<p>undefined</p>
<p>barHeight</p>
<p>Length</p>
<p>é¡µç­¾æ¡é«˜åº¦ï¼ˆæ²¡æœ‰è®¾ç½®ä¸”å°ºå¯¸æ¨¡å¼ä¸ºæ­£å¸¸æ¨¡å¼æ—¶ï¼Œä¸é¦–ä¸ªé¡µç­¾åŒé«˜ï¼›æ²¡æœ‰è®¾ç½®ä¸”å°ºå¯¸æ¨¡å¼ä¸ºå†…è¾¹è·æ¨¡å¼æ—¶ï¼Œä¸èƒŒæ™¯æ¡åŒé«˜ï¼‰</p>
<p>undefined</p>
<p>scrollable</p>
<p>boolean</p>
<p>æ˜¯å¦å¯ä»¥æ»šåŠ¨é¡µç­¾æ¡(falseåˆ™æ‰€æœ‰é¡µç­¾ç­‰åˆ†å±å¹•å®½åº¦ï¼ŒbarItemWidthå¤±æ•ˆ)</p>
<p>true</p>
<p>barEdgeEffect</p>
<p>EdgeEffect</p>
<p>é¡µç­¾æ¡è¾¹ç¼˜æ»‘åŠ¨æ•ˆæœï¼Œæ”¯æŒå¼¹ç°§æ•ˆæœå’Œé˜´å½±æ•ˆæœ</p>
<p>EdgeEffect.Spring</p>
<p>barVertical</p>
<p>BarPosition</p>
<p>é¡µç­¾æ¡ä½ç½®ï¼Œå¤„äºtabå†…å®¹çš„ä¸Šæ–¹æˆ–ä¸‹æ–¹</p>
<p>BarPosition.Start</p>
<p>barBackgroundColor</p>
<p>ResourceColor</p>
<p>é¡µç­¾æ¡èƒŒæ™¯é¢œè‰²</p>
<p>Color.Transparent</p>
<p>BaseInterfaceå±æ€§</p>
<p>å±æ€§</p>
<p>ç±»å‹</p>
<p>é‡Šä¹‰</p>
<p>é»˜è®¤å€¼</p>
<p>curIndex</p>
<p>number</p>
<p>å½“å‰é€‰ä¸­çš„é¡µç­¾ç´¢å¼•</p>
<p>-</p>
<p>TabBarItemInterfaceå±æ€§</p>
<p>å±æ€§</p>
<p>ç±»å‹</p>
<p>é‡Šä¹‰</p>
<p>é»˜è®¤å€¼</p>
<p>curIndex</p>
<p>number</p>
<p>å½“å‰é€‰ä¸­çš„é¡µç­¾ç´¢å¼•</p>
<p>-</p>
<p>index</p>
<p>number</p>
<p>é¡µç­¾æœ¬èº«ç´¢å¼•</p>
<p>-</p>
<p>title</p>
<p>string</p>
<p>é¡µç­¾æ ‡é¢˜</p>
<p>-</p>
<p>SizeModeå±æ€§</p>
<p>å±æ€§</p>
<p>ç±»å‹</p>
<p>é‡Šä¹‰</p>
<p>é»˜è®¤å€¼</p>
<p>Normal</p>
<p>-</p>
<p>æ ‡å‡†å®½åº¦æ¨¡å¼ï¼ŒèƒŒæ™¯æ¡å°ºå¯¸é€šè¿‡èƒŒæ™¯æ¡å®½é«˜å±æ€§æ˜¾ç¤ºè®¾ç½®</p>
<p>-</p>
<p>Padding</p>
<p>-</p>
<p>å†…è¾¹è·æ¨¡å¼ï¼ŒèƒŒæ™¯æ¡å°ºå¯¸é€šè¿‡é¡µç­¾ä¸Šä¸‹è¾¹è·éšæ€§è®¾ç½®</p>
<p>-</p>
<h3 data-id="heading-5">å®ç°æ€è·¯</h3>
<p>æœ¬æ¡ˆä¾‹çš„åŠŸèƒ½å®ç°ä¸»è¦å¯ä»¥åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼šç¬¬ä¸€ä¸ªæ˜¯ç‚¹å‡»é¡µç­¾çš„åˆ‡æ¢ï¼Œç¬¬äºŒä¸ªæ˜¯æ»‘åŠ¨tabçš„åˆ‡æ¢ã€‚åœ¨åç»­ä¸¤å°èŠ‚å°†å¯¹ä»¥ä¸Šä¸¤ä¸ªéƒ¨åˆ†è¿›è¡Œè¯¦ç»†ä»‹ç»ã€‚ç„¶åï¼Œæˆ‘ä»¬å±•ç¤ºäº†ä¸€äº›é‡è¦çš„å˜é‡ååŠå…¶å«ä¹‰ã€‚</p>
<ul>
<li>maxListOffsetï¼šé¡µç­¾æ¡æœ€å¤§åç§»è·ç¦»</li>
<li>maxIndicatorBarLeftï¼š èƒŒæ™¯æ¡æœ€å¤§åç§»è·ç¦»</li>
<li>AnimationAttribute.leftï¼šèƒŒæ™¯æ¡ä½ç½®</li>
</ul>
<h4 data-id="heading-6">1.æ ¸å¿ƒå‡½æ•°getScrollInfo</h4>
<p>ç”±äºæˆ‘ä»¬å°†é¡µç­¾åŠ¨ç”»æ•ˆæœåˆ†ä¸ºä¸¤ç§ä¸åŒç±»å‹çš„æ»‘åŠ¨ï¼Œå› æ­¤éœ€è¦å®ç°ä¸€ä¸ªå‡½æ•°ä»¥åˆ†åˆ«è·å–æ¯ä¸ªé¡µç­¾å¯¹åº”çš„èƒŒæ™¯æ¡ä½ç½®ä»¥åŠé¡µç­¾æ¡æ»‘åŠ¨åç§»ã€‚</p>
<p>1.1 èƒŒæ™¯æ¡æœ€å¤§æ»‘åŠ¨è·ç¦»ä»¥åŠé¡µç­¾æ¡æœ€å¤§æ»‘åŠ¨è·ç¦»</p>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦äº†è§£ä¸¤ä¸ªæ¦‚å¿µï¼šèƒŒæ™¯æ¡æœ€å¤§æ»‘åŠ¨è·ç¦»ä»¥åŠé¡µç­¾æ¡æœ€å¤§æ»‘åŠ¨è·ç¦»ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p>
<p>ï¼ˆ1ï¼‰èƒŒæ™¯æ¡æœ€å¤§åç§»è·ç¦»ï¼šèƒŒæ™¯æ¡æ»‘åŠ¨åˆ°è¯¥å¤„æ—¶ä¸å†å‘åæ»‘åŠ¨ï¼Œæ­¤æ—¶é¡µç­¾æ¡æ¥ç®¡æ»‘åŠ¨ã€‚</p>
<p>ï¼ˆ2ï¼‰é¡µç­¾æ¡æœ€å¤§åç§»è·ç¦»ï¼šå½“é¡µç­¾æ¡æ¥ç®¡æ»‘åŠ¨ä»¥åï¼Œå½“æ»‘åŠ¨åˆ°æœ«å°¾æ—¶ï¼Œæ— æ³•å‘åæ»‘åŠ¨ï¼Œæ­¤æ—¶èƒŒæ™¯æ¡å†æ¬¡æ¥ç®¡æ»‘åŠ¨ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/15c9b31735ad41a8a2542cbcbf2e1f18~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6bm_5Lq65oib:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767623716&amp;x-signature=2jvHdEkc8264CFo3tqidfzG49Us%3D" alt="" loading="lazy"/></p>
<p>1.2 ä¸‰ä¸ªé˜¶æ®µ</p>
<p>ä»ä¸Šé¢çš„ä¸¤ä¸ªæ¦‚å¿µï¼Œæˆ‘ä»¬å¯ä»¥çœ‹å‡ºæ»‘åŠ¨ä¸»è¦å¯ä»¥åˆ‡åˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µï¼š1ï¼‰èƒŒæ™¯æ¡åˆå§‹æ»‘åŠ¨é˜¶æ®µï¼›2ï¼‰é¡µç­¾æ¡æ»‘åŠ¨é˜¶æ®µï¼›3ï¼‰èƒŒæ™¯æ¡å†æ¬¡æ»‘åŠ¨é˜¶æ®µã€‚</p>
<p>1.3 ä»£ç å®ç°</p>
<p>é€šè¿‡ä»¥ä¸Šä¸¤ä¸ªå°èŠ‚çš„ä»‹ç»ï¼Œæˆ‘ä»¬å¯ä»¥å°è¯•å®ç°ä»£ç ã€‚å…·ä½“ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">/**
 * è·å–é¡µç­¾å¯¹åº”çš„èƒŒæ™¯æ¡ä½ç½®ä»¥åŠé¡µç­¾æ¡åç§»
 * <span class="hljs-doctag">@param</span> <span class="hljs-variable">center</span> - é¡µç­¾ä¸­å¿ƒç‚¹
 * <span class="hljs-doctag">@param</span> <span class="hljs-variable">width</span> - é¡µç­¾æ¡å®½åº¦
 * <span class="hljs-doctag">@returns</span>: [èƒŒæ™¯æ¡å·¦ç«¯ä½ç½®, é¡µç­¾æ¡åç§»]
 */</span>
<span class="hljs-meta">@Param</span> <span class="hljs-attr">getScrollInfo</span>: <span class="hljs-function">(<span class="hljs-params">center: <span class="hljs-built_in">number</span>, width: <span class="hljs-built_in">number</span></span>) =&gt;</span> [<span class="hljs-built_in">number</span>, <span class="hljs-built_in">number</span>] =
  (<span class="hljs-attr">center</span>: <span class="hljs-built_in">number</span>, <span class="hljs-attr">width</span>: <span class="hljs-built_in">number</span>): [<span class="hljs-built_in">number</span>, <span class="hljs-built_in">number</span>] =&gt; {
    <span class="hljs-comment">// è·å–èƒŒæ™¯æ¡ä½ç½®</span>
    <span class="hljs-keyword">let</span> <span class="hljs-attr">indicatorLeft</span>: <span class="hljs-built_in">number</span> = center - <span class="hljs-variable language_">this</span>.<span class="hljs-property">indicatorBarWith</span> / <span class="hljs-number">2</span>;
    <span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> çŸ¥è¯†ç‚¹: å½“èƒŒæ™¯æ¡ä½ç½®å¤§äºé»˜è®¤çš„èƒŒæ™¯æ¡æœ€å¤§ä½ç½®æ—¶ï¼Œé€‰å–èƒŒæ™¯æ¡æœ€å¤§ä½ç½®ä½œä¸ºèƒŒæ™¯æ¡å®é™…ä½ç½®</span>
    <span class="hljs-keyword">let</span> <span class="hljs-attr">finalIndicatorLeft</span>: <span class="hljs-built_in">number</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">maxIndicatorBarLeft</span> &gt;= <span class="hljs-number">0</span> ? <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(indicatorLeft, <span class="hljs-variable language_">this</span>.<span class="hljs-property">maxIndicatorBarLeft</span>) : indicatorLeft;
    <span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> çŸ¥è¯†ç‚¹: èƒŒæ™¯æ¡äº§ç”Ÿçš„å¤šä½™è·ç¦»ä½œä¸ºé¡µç­¾æ¡æ»‘åŠ¨è·ç¦»</span>
    <span class="hljs-keyword">let</span> <span class="hljs-attr">listOffset</span>: <span class="hljs-built_in">number</span> = indicatorLeft - finalIndicatorLeft;
    <span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> çŸ¥è¯†ç‚¹: å½“é¡µç­¾æ¡åç§»å¤§äºé¡µç­¾æ¡å¯åç§»é‡ï¼Œé€‰å–é¡µç­¾æ¡å¯åç§»é‡ä½œä¸ºé¡µç­¾æ¡å®é™…åç§»</span>
    <span class="hljs-keyword">let</span> <span class="hljs-attr">finalListOffset</span>: <span class="hljs-built_in">number</span> = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(listOffset, <span class="hljs-variable language_">this</span>.<span class="hljs-property">maxListOffset</span>);
    <span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> çŸ¥è¯†ç‚¹: é¡µç­¾æ¡å¤šä½™çš„åç§»ä½œä¸ºèƒŒæ™¯æ¡åç»­çš„æ»‘åŠ¨è·ç¦»</span>
    finalIndicatorLeft += listOffset - finalListOffset;
    <span class="hljs-keyword">return</span> [finalIndicatorLeft, finalListOffset];
  };
</code></pre>
<p>å…·ä½“æ€è·¯ï¼šé¦–å…ˆæˆ‘ä»¬å¯ä»¥æ ¹æ®é¡µç­¾çš„ä½ç½®ä¿¡æ¯è·å–å¯¹åº”èƒŒæ™¯æ¡çš„åˆå§‹ä½ç½®ã€‚1ï¼‰ç¬¬ä¸€é˜¶æ®µï¼šèƒŒæ™¯æ¡åˆå§‹ä½ç½®å°±æ˜¯èƒŒæ™¯æ¡çš„å®é™…ä½ç½®ï¼›2ï¼‰ç¬¬äºŒé˜¶æ®µï¼šå½“èƒŒæ™¯æ¡åç§»å¤§äºèƒŒæ™¯æ¡æœ€å¤§åç§»è·ç¦»æ—¶ï¼Œè¿›å…¥ç¬¬äºŒé˜¶æ®µã€‚è¿™æ—¶å€™åç»­å¤šä½™çš„èƒŒæ™¯æ¡åç§»éœ€è¦ä½œä¸ºé¡µç­¾æ¡åç§»ï¼Œä»¥å®ç°é¡µç­¾æ¡ç§»åŠ¨ï¼›3ï¼‰ç¬¬ä¸‰é˜¶æ®µï¼šå½“é¡µç­¾æ¡åç§»å¤§äºé¡µç­¾æ¡æœ€å¤§åç§»é‡æ—¶ï¼Œè¿›å…¥ç¬¬ä¸‰é˜¶æ®µã€‚æ­¤æ—¶å¤šä½™çš„é¡µç­¾æ¡åç§»ä¼šä½œä¸ºèƒŒæ™¯æ¡çš„åç§»ï¼Œä½¿èƒŒæ™¯æ¡ç»§ç»­å‘åæ»‘åŠ¨ã€‚</p>
<h4 data-id="heading-7">2.ç‚¹å‡»é¡µç­¾çš„åˆ‡æ¢</h4>
<ul>
<li>
<p>é¦–å…ˆåœ¨onChangeå›è°ƒä¸­å®ç°å¯¹åº”çš„åŠ¨ç”»æ•ˆæœï¼Œå½“äº‹ä»¶ä¸ºç‚¹å‡»äº‹ä»¶å¹¶ä¸”éœ€è¦è¿›è¡Œé¡µç­¾åˆ‡æ¢æ—¶æ‰è¿›å…¥åˆ°å¯¹åº”çš„åŠ¨ç”»æ•ˆæœå®ç°ï¼Œå…¶ä¸­é¦–å…ˆé€šè¿‡è·å–indexé¡µç­¾çš„ä¸­å¿ƒä½ç½®è®¡ç®—èƒŒæ™¯æ¡ä½ç½®ï¼Œä»¥å®ç°èƒŒæ™¯æ¡ç§»åŠ¨åˆ°å½“å‰é¡µç­¾ä½ç½®ã€‚ç„¶åï¼Œé€šè¿‡elementsInfoæ•°ç»„è·å–indexé¡µç­¾å¯¹åº”çš„é¡µç­¾æ¡åç§»ï¼Œä»è€Œå¯¹é¡µç­¾æ¡è¿›è¡Œæ»‘åŠ¨ã€‚è€ŒèƒŒæ™¯æ¡çš„æ»‘åŠ¨åˆ™é€šè¿‡é¡µç­¾æ¡çš„æ»‘åŠ¨å›è°ƒå‡½æ•°onDidScrollæ¥è¿›è¡Œã€‚</p>
<p>// tab
Swiper(this.swiperController) {
// å¸ƒå±€å®ç°
}
.onChange((index: number) =&gt; {
// ç‚¹å‡»äº‹ä»¶ä¸”å‘ç”Ÿé¡µç­¾åˆ‡æ¢
if (this.listTouchState === 1 &amp;&amp; index !== this.curIndex) {
let indexInfo: Record&lt;string, number&gt; = this.getElementInfo(this.curIndex);
let targetIndexInfo: Record&lt;string, number&gt; = this.getElementInfo(index);
this.clickAnimation(this.curIndex, index, indexInfo, targetIndexInfo, this.elementsInfo);
}
this.curIndex = index;
console.log(<code>curIndex: ${this.curIndex}</code>)
})</p>
<p>clickAnimation: (targetIndex: number, targetIndexInfo: Record&lt;string, number&gt;, elementsInfo: IndicatorAnimationInfo[]) =&gt; void =
(targetIndex: number, targetIndexInfo: Record&lt;string, number&gt;, elementsInfo: IndicatorAnimationInfo[]): void =&gt; {
// æ ¹æ®targetIndexé¡µç­¾å½“å‰ä½ç½®è·å–å¯¹åº”çš„èƒŒæ™¯æ¡ä½ç½®
this.animationAttribute.left = targetIndexInfo.center - this.elementsInfo[targetIndex].width / 2;
this.animationAttribute.indicatorBarWidth = this.elementsInfo[targetIndex].width;
this.animationAttribute.indicatorBarHeight = this.elementsInfo[targetIndex].height;
this.scroller!.scrollTo({xOffset: elementsInfo[targetIndex].offset, yOffset: 0, animation: {duration: this.animationDuration, curve: Curve.Linear}});
};</p>
</li>
<li>
<p>åœ¨é¡µç­¾ç‚¹å‡»äº‹ä»¶ä¸­è§¦å‘é¡µç­¾åˆ‡æ¢äº‹ä»¶ï¼Œåç»­å°±ä¼šè§¦å‘tabçš„onChangeäº‹ä»¶å®ç°åˆ‡æ¢åŠ¨ç”»ã€‚</p>
<p>// é¡µç­¾ç‚¹å‡»äº‹ä»¶
ListItem() {
// å¸ƒå±€å®ç°
}
.onClick(() =&gt; {
this.listTouchState = 1;
this.tabController.changeIndex(index);
})</p>
</li>
</ul>
<h4 data-id="heading-8">2.æ»‘åŠ¨Tabçš„åˆ‡æ¢</h4>
<p>æ»‘åŠ¨é¡µç­¾åˆ‡æ¢ä¸»è¦åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼šä¸€ä¸ªæ˜¯èƒŒæ™¯æ¡çš„æ»‘åŠ¨ï¼Œä¸€ä¸ªæ˜¯é¡µç­¾æ¡çš„æ»‘åŠ¨ã€‚</p>
<p>2.1 æ‰‹åŠ¿è·Ÿè¸ª</p>
<pre><code class="hljs language-ini" lang="ini">Swiper(this.swiperController) {
  // å¸ƒå±€å®ç°
}
.onGestureSwipe((index: number, event: TabsAnimationEvent) =&gt; {
  <span class="hljs-attr">this.listTouchState</span> = <span class="hljs-number">0</span><span class="hljs-comment">;</span>
  let curOffset: <span class="hljs-attr">number</span> = event.current<span class="hljs-literal">Off</span>set<span class="hljs-comment">;</span>
  let targetIndex: <span class="hljs-attr">number</span> = index<span class="hljs-comment">;</span>
  <span class="hljs-attr">this.isReachBorder</span> = <span class="hljs-literal">false</span><span class="hljs-comment">;</span>
  // tabç»„ä»¶åˆ°è¾¾è¾¹ç•Œä½¿èƒŒæ™¯æ¡å’Œé¡µç­¾æ¡è·³è½¬åˆ°ç»ˆç‚¹ä½ç½®
  // TODO: çŸ¥è¯†ç‚¹: è¿™é‡Œä¸èƒ½åˆ¤æ–­åˆ°è¾¹ç•Œç›´æ¥é€€å‡ºï¼Œå› ä¸ºonGestureSwipeæ¯ä¸€å¸§è§¦å‘å›è°ƒï¼Œå½“æ‰‹åŠ¿æ»‘åŠ¨è¾ƒå¿«ï¼Œä¸Šä¸€å¸§èƒŒæ™¯æ¡æ²¡æœ‰åˆ°è¾¾è¾¹ç•Œ
  // TODO(æ¥ä¸Š): çŸ¥è¯†ç‚¹: ä¸‹ä¸€å¸§contentè¶…å‡ºè¾¹ç•Œï¼Œè¿™æ—¶å€™èƒŒæ™¯æ¡æ²¡æœ‰æ›´æ–°ï¼Œé€€å‡ºå°†å¯¼è‡´èƒŒæ™¯æ¡åœæ»åœ¨ä¸Šä¸€å¸§ä½ç½®æ— æ³•æ›´æ–°ã€‚
  if ((<span class="hljs-attr">index</span> === <span class="hljs-number">0</span> &amp;&amp; cur<span class="hljs-literal">Off</span>set &gt; <span class="hljs-number">0</span>) ||
    (<span class="hljs-attr">index</span> === this.innerBarData.length - <span class="hljs-number">1</span> &amp;&amp; cur<span class="hljs-literal">Off</span>set &lt; <span class="hljs-number">0</span>)) {
    <span class="hljs-attr">this.isReachBorder</span> = <span class="hljs-literal">true</span><span class="hljs-comment">;</span>
    <span class="hljs-attr">curOffset</span> = <span class="hljs-number">0</span><span class="hljs-comment">;</span>
  }

  let ratio: <span class="hljs-attr">number</span> = Math.abs(cur<span class="hljs-literal">Off</span>set / this.tabsWidth)<span class="hljs-comment">; // tabæ»‘åŠ¨æ¯”ä¾‹</span>
  if (curOffset &lt; 0) { // tabå³æ»‘
    <span class="hljs-attr">targetIndex</span> = index + <span class="hljs-number">1</span><span class="hljs-comment">;</span>
  } else if (curOffset &gt; 0) { // tabå·¦æ»‘
    <span class="hljs-attr">targetIndex</span> = index - <span class="hljs-number">1</span><span class="hljs-comment">;</span>
  }
  // è·å–èƒŒæ™¯æ¡ä½ç½®åŠé¡µç­¾æ¡åç§»
  // è·å–èƒŒæ™¯æ¡ä½ç½®åŠé¡µç­¾æ¡åç§»
  this.gestureAnimation(index, targetIndex, this.elementsInfo, ratio)<span class="hljs-comment">;</span>
})

/**
 * æ‰‹åŠ¿æ»‘åŠ¨åŠ¨æ•ˆ
 * @param index - èµ·å§‹é¡µç­¾ç´¢å¼•
 * @param targetIndex - ç›®æ ‡é¡µç­¾ç´¢å¼•
 * @param elementsInfo - é¡µç­¾ä¿¡æ¯<span class="hljs-section">[èƒŒæ™¯æ¡å·¦ç«¯ä½ç½®, é¡µç­¾æ¡åç§»]</span>
 * @param ratio - å½“å‰æ‰‹åŠ¿æ»‘åŠ¨æ¯”ä¾‹
 * @returns
 */
gestureAnimation: (index: number, targetIndex: number, elementsInfo: IndicatorAnimationInfo<span class="hljs-section">[]</span>, ratio: number) =&gt; <span class="hljs-attr">void</span> =
  (index: number, targetIndex: number, elementsInfo: IndicatorAnimationInfo<span class="hljs-section">[]</span>, ratio: number): <span class="hljs-attr">void</span> =&gt; {
    <span class="hljs-attr">this.animationAttribute.left</span> = elementsInfo[index].left + (elementsInfo[targetIndex].left - elementsInfo[index].left) * ratio<span class="hljs-comment">;</span>
    this.scroller!.scrollTo({xOffset: elementsInfo<span class="hljs-section">[index]</span>.offset + (elementsInfo<span class="hljs-section">[targetIndex]</span>.offset - elementsInfo<span class="hljs-section">[index]</span>.offset) * ratio, yOffset: 0})<span class="hljs-comment">;</span>
    let indicatorSize: <span class="hljs-section">[number, number]</span> = this.getIndicatorSize(ratio, index, targetIndex)<span class="hljs-comment">;</span>
    <span class="hljs-attr">this.animationAttribute.indicatorBarWidth</span> = indicatorSize[<span class="hljs-number">0</span>]<span class="hljs-comment">;</span>
    <span class="hljs-attr">this.animationAttribute.indicatorBarHeight</span> = indicatorSize[<span class="hljs-number">1</span>]<span class="hljs-comment">;</span>
  }<span class="hljs-comment">;</span>
</code></pre>
<p>å…·ä½“æ€è·¯ï¼š æ‰‹åŠ¿è·Ÿè¸ªæ»‘åŠ¨ä¸»è¦å­˜åœ¨ä¸¤ç§æƒ…å†µï¼š1ï¼‰èƒŒæ™¯æ¡åˆ°è¾¾è¾¹ç•Œï¼›2ï¼‰èƒŒæ™¯æ¡æœªåˆ°è¾¾è¾¹ç•Œã€‚é¦–å…ˆåˆ¤æ–­tabæ˜¯å¦æ»‘åŠ¨åˆ°è¾¹ç•Œï¼Œè‹¥æ»‘åŠ¨åˆ°è¾¹ç•Œï¼Œåˆ™ç›®æ ‡é¡µç­¾ç­‰äºå½“å‰é¡µç­¾ã€‚å¦åˆ™ï¼Œåˆ™æ ¹æ®å½“å‰çš„åç§»æƒ…å†µæ¥åˆ¤æ–­ç›®æ ‡é¡µç­¾ç›¸å¯¹äºå½“å‰é¡µç­¾çš„ä½ç½®ã€‚ç„¶åï¼Œåˆ†åˆ«è·å–å½“å‰é¡µç­¾ä»¥åŠç›®æ ‡é¡µç­¾å¯¹åº”çš„èƒŒæ™¯æ¡ä½ç½®ä»¥åŠé¡µç­¾æ¡åç§»ä½œä¸ºèƒŒæ™¯æ¡å’Œé¡µç­¾æ¡çš„èµ·å§‹çŠ¶æ€å’Œæœ€ç»ˆçŠ¶æ€ã€‚ä¹‹åï¼Œå¯ä»¥é€šè¿‡è®¡ç®—tabæ»‘åŠ¨æ¯”ä¾‹ï¼Œè·å–å½“å‰èƒŒæ™¯æ¡ä½ç½®ä»¥åŠé¡µç­¾æ¡åç§»ï¼Œå…¬å¼å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p><img src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtybbs/753/188/655/0030086000753188655.20241112155448.15165570652993497711761492221015:50001231000000:2800:22461A880326840156127BDF00A3EC7A1E6E8F58EC696730938CEA9FF99BB61B.jpg" alt="" loading="lazy"/></p>
<p>2.2 åŠ¨ç”»æ•ˆæœ</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-title class_">Swiper</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">swiperController</span>) {
  <span class="hljs-comment">// å¸ƒå±€å®ç°</span>
}
.<span class="hljs-title function_">onContentDidScroll</span>(<span class="hljs-function">(<span class="hljs-params">selectedIndex: <span class="hljs-built_in">number</span>, index: <span class="hljs-built_in">number</span>, position: <span class="hljs-built_in">number</span>, mainAxisLength: <span class="hljs-built_in">number</span></span>) =&gt;</span> {
  <span class="hljs-comment">// åŠ¨ç”»å¯åŠ¨ï¼Œé€‰å–å½“å‰indexç´¢å¼•é¡µç­¾çš„å±æ€§æ¥æ‰§è¡ŒèƒŒæ™¯æ¡å’Œé¡µç­¾æ¡æ»‘åŠ¨</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">isAnimationStart</span> &amp;&amp; index === <span class="hljs-variable language_">this</span>.<span class="hljs-property">innerCurrnetIndex</span>) {
    <span class="hljs-comment">// ä½¿ç”¨é€‰ä¸­é¡µç­¾ç›¸å¯¹äºSwiperä¸»è½´èµ·å§‹ä½ç½®çš„ç§»åŠ¨æ¯”ä¾‹åˆ¤æ–­æ»‘åŠ¨çš„ç›®æ ‡é¡µç­¾targetIndexçš„ä½ç½®</span>
    <span class="hljs-keyword">let</span> <span class="hljs-attr">targetIndex</span>: <span class="hljs-built_in">number</span> = position &lt; <span class="hljs-number">0</span> ? index + <span class="hljs-number">1</span> : index - <span class="hljs-number">1</span>;
    <span class="hljs-keyword">if</span> (targetIndex &gt;= <span class="hljs-variable language_">this</span>.<span class="hljs-property">innerBarData</span>.<span class="hljs-property">length</span> || targetIndex &lt; <span class="hljs-number">0</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">`Error: targetIndex exceeds the limit range:
            selectedIndex: <span class="hljs-subst">${selectedIndex}</span>, curIndex: <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.innerCurrnetIndex}</span>, index: <span class="hljs-subst">${index}</span>,
            targetIndex: <span class="hljs-subst">${targetIndex}</span>, position: <span class="hljs-subst">${position}</span>, mainAxisLength: <span class="hljs-subst">${mainAxisLength}</span>`</span>);
      <span class="hljs-keyword">return</span>;
    }
    <span class="hljs-keyword">let</span> <span class="hljs-attr">ratio</span>: <span class="hljs-built_in">number</span> = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">abs</span>(position);
    <span class="hljs-comment">// é€šè¿‡é¡µç­¾æ¯”ä¾‹è®¡ç®—å½“å‰é¡µç­¾æ¡å’ŒèƒŒæ™¯æ¡çš„ä½ç½®</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">autoAnimation</span>(index, targetIndex, <span class="hljs-variable language_">this</span>.<span class="hljs-property">elementsInfo</span>, ratio);
  }
})
.<span class="hljs-title function_">onAnimationStart</span>(<span class="hljs-function">(<span class="hljs-params">index: <span class="hljs-built_in">number</span>, targetIndex: <span class="hljs-built_in">number</span>, event: TabsAnimationEvent</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">isReachBorder</span>) { <span class="hljs-comment">// è‹¥tabåˆ°è¾¾è¾¹ç•Œï¼Œåˆ™ä¸ç»§ç»­æ‰§è¡ŒåŠ¨ç”»</span>
    <span class="hljs-keyword">return</span>;
  }

  <span class="hljs-variable language_">this</span>.<span class="hljs-property">isAnimationStart</span> = <span class="hljs-literal">true</span>;
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">listTouchState</span> = <span class="hljs-number">0</span>;
})
.<span class="hljs-title function_">onAnimationEnd</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">isAnimationStart</span> = <span class="hljs-literal">false</span>;
})

<span class="hljs-comment">/**
 * è‡ªåŠ¨æ»‘åŠ¨åŠ¨æ•ˆ
 * <span class="hljs-doctag">@param</span> <span class="hljs-variable">index</span> - èµ·å§‹é¡µç­¾ç´¢å¼•
 * <span class="hljs-doctag">@param</span> <span class="hljs-variable">targetIndex</span> - ç›®æ ‡é¡µç­¾ç´¢å¼•
 * <span class="hljs-doctag">@param</span> <span class="hljs-variable">elementsInfo</span> - é¡µç­¾åŠ¨æ•ˆä¿¡æ¯[èƒŒæ™¯æ¡å·¦ç«¯ä½ç½®, é¡µç­¾æ¡åç§»]
 * <span class="hljs-doctag">@param</span> <span class="hljs-variable">ratio</span> - å½“å‰tabæ»‘åŠ¨æ¯”ä¾‹
 * <span class="hljs-doctag">@returns</span>
 */</span>
<span class="hljs-attr">autoAnimation</span>: <span class="hljs-function">(<span class="hljs-params">index: <span class="hljs-built_in">number</span>, targetIndex: <span class="hljs-built_in">number</span>, elementsInfo: IndicatorAnimationInfo[], ratio: <span class="hljs-built_in">number</span></span>) =&gt;</span> <span class="hljs-built_in">void</span> =
  (<span class="hljs-attr">index</span>: <span class="hljs-built_in">number</span>, <span class="hljs-attr">targetIndex</span>: <span class="hljs-built_in">number</span>, <span class="hljs-attr">elementsInfo</span>: <span class="hljs-title class_">IndicatorAnimationInfo</span>[], <span class="hljs-attr">ratio</span>: <span class="hljs-built_in">number</span>): <span class="hljs-function"><span class="hljs-params">void</span> =&gt;</span> {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">animationAttribute</span>.<span class="hljs-property">left</span> = elementsInfo[index].<span class="hljs-property">left</span> + (elementsInfo[targetIndex].<span class="hljs-property">left</span> - elementsInfo[index].<span class="hljs-property">left</span>) * ratio;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">scroller</span>!.<span class="hljs-title function_">scrollTo</span>({
      <span class="hljs-attr">xOffset</span>: elementsInfo[index].<span class="hljs-property">offset</span> + (elementsInfo[targetIndex].<span class="hljs-property">offset</span> - elementsInfo[index].<span class="hljs-property">offset</span>) * ratio,
      <span class="hljs-attr">yOffset</span>: <span class="hljs-number">0</span>
    });
    <span class="hljs-keyword">let</span> <span class="hljs-attr">indicatorSize</span>: [<span class="hljs-built_in">number</span>, <span class="hljs-built_in">number</span>] = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getIndicatorSize</span>(ratio, index, targetIndex);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">animationAttribute</span>.<span class="hljs-property">indicatorBarWidth</span> = indicatorSize[<span class="hljs-number">0</span>];
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">animationAttribute</span>.<span class="hljs-property">indicatorBarHeight</span> = indicatorSize[<span class="hljs-number">1</span>];
  };
</code></pre>
<p>å…·ä½“æ€è·¯ï¼šé¦–å…ˆåœ¨åŠ¨ç”»å¼€å§‹æ—¶ï¼Œæˆ‘ä»¬åœ¨onAnimationStartå›è°ƒä¸­åªè¿›è¡ŒåŠ¨ç”»å¼€å§‹çŠ¶æ€çš„æ”¹å˜(i.e. this.isAnimationStart = true)ã€‚ç„¶åï¼Œåœ¨onContentDidScrollå›è°ƒä¸­è¿›è¡Œç»˜åˆ¶åŠ¨ç”»ã€‚å…·ä½“æ¥è¯´ï¼Œåœ¨æ¯ä¸€æ¬¡å›è°ƒonContentDidScrollæ¥å£æ—¶é€šè¿‡èµ·å§‹é¡µç­¾indexã€ç›®æ ‡é¡µç­¾targetIndexä»¥åŠæ»‘åŠ¨æ¯”ä¾‹æ¥åˆ¤æ–­å½“å‰èƒŒæ™¯æ¡ä½ç½®ä»¥åŠé¡µç­¾æ¡çš„åç§»ï¼Œå¦‚å…¬å¼(1)æ‰€ç¤ºã€‚ å› æ­¤ï¼ŒåŠ¨ç”»å‡½æ•°ä¸­æœ€é‡è¦çš„å°±æ˜¯åˆ¤æ–­indexã€targetIndexä»¥åŠæ»‘åŠ¨æ¯”ä¾‹ã€‚ç”±äºé¡µç­¾æ¡çš„æ»‘åŠ¨ç­‰ä»·äºèƒŒæ™¯æ¡æ»‘åŠ¨ï¼Œå› æ­¤æˆ‘ä»¬åªéœ€è¦åˆ¤æ–­èƒŒæ™¯æ¡çš„æ»‘åŠ¨æƒ…å†µå°±å¯ä»¥è¦†ç›–æ‰€æœ‰æƒ…å†µã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œè¿™é‡Œä¸»è¦å­˜åœ¨ä»¥ä¸‹ä¸‰ç§æƒ…å†µçš„åˆ¤æ–­ï¼š1ï¼‰èƒŒæ™¯æ¡æœªå›å¼¹ä¸”æ»‘åŠ¨æ¯”ä¾‹å°äº0.5ï¼›2ï¼‰èƒŒæ™¯æ¡æœªå›å¼¹ä¸”æ»‘åŠ¨æ¯”ä¾‹å¤§äºç­‰äº0.5ï¼›3ï¼‰èƒŒæ™¯æ¡å›å¼¹ã€‚</p>
<ul>
<li>èƒŒæ™¯æ¡æœªå›å¼¹ä¸”æ»‘åŠ¨æ¯”ä¾‹å°äº0.5ã€‚è¿™æ—¶å€™èµ·å§‹é¡µç­¾indexåº”è¯¥ç­‰äºcurIndexï¼Œè€Œç›®æ ‡é¡µç­¾targetIndexåˆ™å¯ä»¥æ ¹æ®æ»‘åŠ¨æ¯”ä¾‹æ­£è´Ÿåˆ¤æ–­index+1(index-1)ã€‚å½“tabä¸æ–­å‘å·¦(å³)æ»‘åŠ¨æ—¶ï¼Œindexé¡µç­¾æ»‘åŠ¨æ¯”ä¾‹ä¸æ–­å¢åŠ ï¼ŒèƒŒæ™¯æ¡ä¹Ÿä¸æ–­å‘å³(å·¦)æ»‘åŠ¨ã€‚ <img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3693165cd984404295011fb4de0ffe27~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6bm_5Lq65oib:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767623716&amp;x-signature=4xHk9CWH7Tar50Zlm05Zj4G4PEg%3D" alt="" loading="lazy"/></li>
<li>èƒŒæ™¯æ¡å›å¼¹ã€‚è¿™æ—¶å€™èµ·å§‹é¡µç­¾åº”è¯¥ç­‰äºcurIndexï¼Œè€Œç›®æ ‡é¡µç­¾targetIndexåˆ™å¯ä»¥æ ¹æ®æ»‘åŠ¨æ¯”ä¾‹æ­£è´Ÿåˆ¤æ–­index+1(index-1)ã€‚å½“tabå›å¼¹æ—¶ï¼Œindexé¡µç­¾æ»‘åŠ¨æ¯”ä¾‹ä¸æ–­å‡å°‘ï¼ŒèƒŒæ™¯æ¡ä¹Ÿä¸æ–­å‘å·¦(å³)æ»‘åŠ¨ï¼Œç›´è‡³å›å¼¹åˆ°åŸä½ç½®ã€‚ <img src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtybbs/753/188/655/0030086000753188655.20241112155556.18668753938282901278375408321859:50001231000000:2800:7048F42A46AF7BA65E56C5ABE532B5457FE4FCB49ED8DF1ED2A078A30E01F14C.jpg" alt="" loading="lazy"/></li>
<li>èƒŒæ™¯æ¡æœªå›å¼¹ä¸”æ»‘åŠ¨æ¯”ä¾‹å¤§äºç­‰äº0.5ã€‚è¿™æ—¶å€™ç›®æ ‡é¡µç­¾åº”è¯¥ç­‰äºcurIndexï¼Œèµ·å§‹é¡µç­¾indexåº”è¯¥åˆ™å¯ä»¥æ ¹æ®æ»‘åŠ¨æ¯”ä¾‹æ­£è´Ÿåˆ¤æ–­targetIndex+1(targetIndex-1)ã€‚ä½†æ˜¯ï¼Œä»”ç»†è§‚å¯Ÿæˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œå…¶å®è¿™ç§æƒ…å†µä¸èƒŒæ™¯æ¡å›å¼¹æƒ…å†µåŸºæœ¬ä¸€è‡´ã€‚å¯ä»¥å°†å…¶çœ‹ä½œæ˜¯é»„è‰²é¡µç­¾å¼€å§‹å‘å·¦æ»‘åŠ¨ï¼Œä¹Ÿå¯ä»¥å°†å…¶çœ‹ä½œæ˜¯ç»¿è‰²é¡µç­¾å¼€å§‹è¿›è¡Œå›å¼¹ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥å°†å…¶è½¬åŒ–ä¸ºç»¿è‰²é¡µç­¾å›å¼¹ï¼Œå¦‚åç»­ç¬¬äºŒå¼ å›¾æ‰€ç¤ºã€‚è¿™æ—¶å€™èµ·å§‹é¡µç­¾åº”è¯¥ç­‰äºcurIndexï¼Œè€Œç›®æ ‡é¡µç­¾targetIndexåˆ™å¯ä»¥æ ¹æ®æ»‘åŠ¨æ¯”ä¾‹æ­£è´Ÿåˆ¤æ–­index+1(index-1)ã€‚å½“indexé¡µç­¾å†…å®¹å›å¼¹æ—¶ï¼Œtabæ»‘åŠ¨æ¯”ä¾‹ä¸æ–­å‡å°‘ï¼ŒèƒŒæ™¯æ¡ä¹Ÿä¸æ–­å‘å³(å·¦)æ»‘åŠ¨ï¼Œç›´è‡³å›å¼¹åˆ°åŸä½ç½®ã€‚ <img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/74b6b5751fb34eed9b495448648ee49c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6bm_5Lq65oib:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767623716&amp;x-signature=fXRxHGZUbA2DDY2lUJOEZiAYKoU%3D" alt="" loading="lazy"/> <img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3fc86ebc4f774132b3f365384c596d6b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6bm_5Lq65oib:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767623716&amp;x-signature=F54KlZY3mB%2BnS%2B5tp7ThVDe9sL4%3D" alt="" loading="lazy"/></li>
</ul>
<h3 data-id="heading-9">æ€»ç»“</h3>
<p>æœ¬ç¤ºä¾‹ä½¿ç”¨äº†<a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.huawei.com%2Fconsumer%2Fcn%2Fdoc%2Fharmonyos-references-V5%2Fts-rendering-control-lazyforeach-V5" target="_blank" title="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-rendering-control-lazyforeach-V5" ref="nofollow noopener noreferrer">LazyForEach</a>è¿›è¡Œæ•°æ®æ‡’åŠ è½½ï¼ŒLazyForEachæ‡’åŠ è½½å¯ä»¥é€šè¿‡è®¾ç½®cachedCountå±æ€§æ¥æŒ‡å®šç¼“å­˜æ•°é‡ï¼ŒåŒæ—¶æ­é…<a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.huawei.com%2Fconsumer%2Fcn%2Fdoc%2Fbest-practices-V5%2Fbpta-component-reuse-V5" target="_blank" title="https://developer.huawei.com/consumer/cn/doc/best-practices-V5/bpta-component-reuse-V5" ref="nofollow noopener noreferrer">ç»„ä»¶å¤ç”¨</a>èƒ½åŠ›ä»¥è¾¾åˆ°æ€§èƒ½æœ€ä¼˜æ•ˆæœã€‚</p>
<h4 data-id="heading-10">å¦‚æœæ‚¨æƒ³ç³»ç»Ÿæ·±å…¥åœ°å­¦ä¹  HarmonyOS å¼€å‘æˆ–æƒ³è€ƒå–HarmonyOSè®¤è¯è¯ä¹¦ï¼Œæ¬¢è¿åŠ å…¥åä¸ºå¼€å‘è€…å­¦å ‚ï¼š</h4>
<h3 data-id="heading-11">è¯·ç‚¹å‡»â†’ï¼š <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.huawei.com%2Fconsumer%2Fcn%2Ftraining%2FclassDetail%2Fd0d15d9039414a8fad9f99ac4a3f5096%3Ftype%3D1%253Fha_source%253Dhmosclass%26ha_sourceId%3D89000248" target="_blank" title="https://developer.huawei.com/consumer/cn/training/classDetail/d0d15d9039414a8fad9f99ac4a3f5096?type=1%3Fha_source%3Dhmosclass&amp;ha_sourceId=89000248" ref="nofollow noopener noreferrer">HarmonyOSå®˜æ–¹è®¤è¯åŸ¹è®­</a></h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/74a7ba13e43043c8b42062f8c1f2df5b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6bm_5Lq65oib:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767623716&amp;x-signature=Rjwce9Q%2FlqrthiP0BhulqN1mazE%3D" alt="" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[HarmonyOSåº”ç”¨å¼€å‘ï¼šçŠ¶æ€æ åŠ¨ç”»å®ç°]]></title>    <link>https://juejin.cn/post/7589172193150386212</link>    <guid>https://juejin.cn/post/7589172193150386212</guid>    <pubDate>2025-12-29T14:38:18.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589172193150386212" data-draft-id="7589172193150369828" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="HarmonyOSåº”ç”¨å¼€å‘ï¼šçŠ¶æ€æ åŠ¨ç”»å®ç°"/> <meta itemprop="keywords" content="HarmonyOS,ç¨‹åºå‘˜,Android"/> <meta itemprop="datePublished" content="2025-12-29T14:38:18.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é¹¿äººæˆ›"/> <meta itemprop="url" content="https://juejin.cn/user/4309685005226376"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            HarmonyOSåº”ç”¨å¼€å‘ï¼šçŠ¶æ€æ åŠ¨ç”»å®ç°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4309685005226376/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é¹¿äººæˆ›
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T14:38:18.000Z" title="Mon Dec 29 2025 14:38:18 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">å‰è¨€</h3>
<p>æœ¬æ¡ˆä¾‹å±•ç¤ºäº†çŠ¶æ€æ çš„åŠ¨æ€äº¤äº’æ•ˆæœã€‚é€šè¿‡ç›‘å¬é¡µé¢æ»šåŠ¨äº‹ä»¶ <code>onDidScroll</code>ï¼Œéšç€é¡µé¢çš„ä¸Šä¸‹æ»šåŠ¨ï¼Œå®ç°çŠ¶æ€æ é¢œè‰²çš„å˜åŒ–ã€‚æœç´¢æ¡†ä¼šåœ¨æ»šåŠ¨æ—¶æµç•…åœ°å±•å¼€æˆ–æ”¶èµ·ï¼Œå¹¶ä¼´æœ‰è‡ªç„¶çš„é€æ˜åº¦è¿‡æ¸¡æ•ˆæœã€‚</p>
<h3 data-id="heading-1">æ•ˆæœå›¾é¢„è§ˆ</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3064042edec1412ea719171e33071a4e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6bm_5Lq65oib:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767623898&amp;x-signature=KyMi6HGBLfyLqFqwm1pqVlnuTjQ%3D" alt="" loading="lazy"/></p>
<p><strong>ä½¿ç”¨è¯´æ˜</strong></p>
<ol>
<li>è¿›å…¥é¡µé¢å¼€å§‹åŠ è½½ï¼ŒåŠ è½½å®Œæˆåæ˜¾ç¤ºæ•´ä¸ªç•Œé¢,ä¸Šä¸‹æ»šåŠ¨é¡µé¢å³å¯ã€‚</li>
</ol>
<h3 data-id="heading-2">å®ç°æ€è·¯</h3>
<ul>
<li>
<p><strong>åˆå§‹åŒ–å’ŒçŠ¶æ€è®¾ç½®</strong><br/>
åœ¨ <code>aboutToAppear()</code> æ–¹æ³•ä¸­ï¼Œåˆå§‹åŒ–äº†çª—å£æ¨¡å‹ <code>windowModel</code>ã€‚å¯ç”¨æ²‰æµ¸å¼ï¼ˆè®¾ç½®å…¨å±æ˜¾ç¤ºå’ŒçŠ¶æ€æ ä¸ºç™½è‰²ï¼‰ï¼Œè·å–çŠ¶æ€æ é«˜åº¦å­˜å‚¨åœ¨ <code>statusBarHeight</code> å˜é‡ä¸­ï¼Œä»é¢„å®šä¹‰çš„æ•°æ®æº <code>LIST_DATA</code> åŠ è½½æ•°æ®åˆ° <code>dataSource</code>ä¸­ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin">aboutToAppear(): void {
  <span class="hljs-comment">// åˆå§‹åŒ–çª—å£ç®¡ç†model</span>
  <span class="hljs-keyword">const</span> windowStage: window.WindowStage | undefined = AppStorage.<span class="hljs-keyword">get</span>(<span class="hljs-string">'windowStage'</span>);
  <span class="hljs-comment">// æ²¡æœ‰windowStageå°†æ— æ³•æ‰§è¡Œä¸‹åˆ—é€»è¾‘</span>
  <span class="hljs-keyword">if</span> (!windowStage) {
    logger.error(TAG, <span class="hljs-string">'windowStage init error!'</span>);
    <span class="hljs-keyword">return</span>;
  }
  <span class="hljs-keyword">this</span>.windowModel.setWindowStage(windowStage);
  <span class="hljs-comment">// è®¾ç½®æ²‰æµ¸æ¨¡å¼åŠçŠ¶æ€æ ç™½è‰²</span>
  <span class="hljs-keyword">this</span>.windowModel.setImmersive();
  <span class="hljs-comment">// è·å–é¡¶éƒ¨çŠ¶æ€æ é«˜åº¦</span>
  <span class="hljs-keyword">this</span>.windowModel.getStatusBarHeight((statusBarHeight) =&gt; {
    logger.info(TAG, <span class="hljs-string">'statusBarHeight is '</span> + statusBarHeight);
    <span class="hljs-keyword">this</span>.statusBarHeight = px2vp(statusBarHeight);
  })
  <span class="hljs-comment">// ç»„è£…æ•°æ®æº</span>
  <span class="hljs-keyword">this</span>.dataSource.pushArrayData(LIST_DATA)
}
</code></pre>
</li>
<li>
<p><strong>ç•Œé¢å¸ƒå±€æ„é€ </strong><br/>
ä½¿ç”¨Stackæ§ä»¶ä½¿çŠ¶æ€æ ä¸åˆ—è¡¨é‡å ï¼Œå¹¶ä¸ºåˆ—è¡¨æ·»åŠ æ»šåŠ¨ç›‘å¬å™¨ï¼Œä»¥æ ¹æ®æ»šåŠ¨ä½ç½®è°ƒæ•´çŠ¶æ€æ å’Œå¯¼èˆªæ çš„é€æ˜åº¦åŠå±•å¼€æ”¶èµ·åŠ¨æ•ˆã€‚</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">Stack</span>({ alignContent: Alignment.Top }) {
  <span class="hljs-built_in">Row</span>() {
    <span class="hljs-comment">// åŠ¨æ€æ˜¾ç¤ºå›é¡¶éƒ¨æˆ–ä½ç½®å¤©æ°”æ§ä»¶</span>
    if (this.isFlow) {
      this<span class="hljs-selector-class">.topUpBuilder</span>()
    } else {
      this<span class="hljs-selector-class">.locationAndWeatherBuilder</span>()
    }
    this<span class="hljs-selector-class">.searchViewBuilder</span>()
    this<span class="hljs-selector-class">.toolViewBuilder</span>()
  }
  <span class="hljs-selector-class">.height</span>(Constants.NAVIGATION_BAR_HEIGHT + this.statusBarHeight)
    <span class="hljs-selector-class">.width</span>(Constants.FULL_PERCENT)
    <span class="hljs-selector-class">.padding</span>({
      top: this.statusBarHeight
    })
    <span class="hljs-selector-class">.zIndex</span>(Constants.Z_INDEX_THREE)

  <span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> çŸ¥è¯†ç‚¹ï¼šçˆ¶ç»„ä»¶çš„é€æ˜åº¦Opacityå½±å“å­ç»„ä»¶ï¼ˆå¦‚çˆ¶ç±»Opacityä¸º0.5ï¼Œè‹¥å­ç»„ä»¶ä¸º0.5æ—¶ï¼Œå­ç»„ä»¶å®é™…Opacity = 0.5*0.5ï¼‰,æ­¤å¤„Rowæ¥æ”¹å˜çŠ¶æ€æ çš„é€æ˜åº¦ä¸å—å½±å“å…¶å®ƒç»„ä»¶é€æ˜åº¦</span>
  <span class="hljs-built_in">Row</span>() {
  }
  <span class="hljs-selector-class">.backgroundColor</span>($r("app.color.status_bar_animation_white"))
    <span class="hljs-selector-class">.opacity</span>(this.navigateBarOpacity)
    <span class="hljs-selector-class">.height</span>(Constants.STATUS_BAR_HEIGHT + this.statusBarHeight)
    <span class="hljs-selector-class">.width</span>(Constants.FULL_PERCENT)
    <span class="hljs-selector-class">.zIndex</span>(Constants.Z_INDEX_TWO)

  <span class="hljs-built_in">List</span>({ scroller: this.scroller }) {
    <span class="hljs-comment">// ...</span>
  }
  <span class="hljs-comment">// éšè—æ»šåŠ¨æ¡</span>
  <span class="hljs-selector-class">.scrollBar</span>(BarState.Off)
    <span class="hljs-comment">// æ¸å˜è“è‰²èƒŒæ™¯è‰²</span>
    <span class="hljs-selector-class">.linearGradient</span>({
      colors: [[Constants.LIST_LINEAR_GRADIENT_START_COLOR, Constants.LIST_LINEAR_GRADIENT_START],
        [Constants.LIST_LINEAR_GRADIENT_END_COLOR, Constants.LIST_LINEAR_GRADIENT_END]]
    })
    <span class="hljs-selector-class">.height</span>(Constants.FULL_PERCENT)
    <span class="hljs-selector-class">.width</span>(Constants.FULL_PERCENT)
}
<span class="hljs-selector-class">.zIndex</span>(Constants.Z_INDEX_ONE)
  <span class="hljs-selector-class">.height</span>(Constants.FULL_PERCENT)
  <span class="hljs-selector-class">.width</span>(Constants.FULL_PERCENT)
    <span class="hljs-comment">// æ‰©å±•è‡³æ‰€æœ‰éå®‰å…¨åŒºåŸŸ</span>
  <span class="hljs-selector-class">.expandSafeArea</span>([SafeAreaType.SYSTEM], [SafeAreaEdge.BOTTOM])
</code></pre>
</li>
<li>
<p><strong>æ»šåŠ¨äº‹ä»¶å¤„ç†</strong><br/>
é€šè¿‡ç›‘å¬é¡µé¢æ»šåŠ¨äº‹ä»¶ <code>onDidScroll</code>ï¼Œæ ¹æ®å½“å‰çš„æ»šåŠ¨åç§»é‡ yOffset è°ƒæ•´çŠ¶æ€æ å’Œå¯¼èˆªæ çš„é€æ˜åº¦ã€‚å¦‚æœæ»šåŠ¨è¶…è¿‡äº†è®¾å®šçš„é˜ˆå€¼ï¼Œåˆ™æ”¹å˜çŠ¶æ€æ çš„é¢œè‰²å’Œå±•å¼€æ”¶èµ·åŠ¨ç”»ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin">.onDidScroll(() =&gt; {
  <span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> çŸ¥è¯†ç‚¹ï¼šé€šè¿‡currentOffsetæ¥è·å–åç§»é‡æ¯”è¾ƒå‡†ç¡®ã€‚</span>
  <span class="hljs-keyword">const</span> yOffset: number = <span class="hljs-keyword">this</span>.scroller.currentOffset().yOffset;
  yOffset &lt;= Constants.MAIN_SCROLLER_OFFSET_Y_ZERO ? <span class="hljs-keyword">this</span>.negativeOffsetY = yOffset :
  Constants.MAIN_SCROLLER_OFFSET_Y_ZERO;
  <span class="hljs-comment">// åˆ¤æ–­å¯¼èˆªæ å’ŒçŠ¶æ€æ èƒŒæ™¯é€æ˜åº¦å˜åŒ–</span>
  yOffset &gt;= Constants.MAIN_SCROLLER_OFFSET_Y_MAX + <span class="hljs-keyword">this</span>.statusBarHeight ?
    <span class="hljs-keyword">this</span>.navigateBarOpacity = Constants.NAVIGATION_BAR_OPACITY_MAX :
    <span class="hljs-keyword">this</span>.navigateBarOpacity = Constants.NAVIGATION_BAR_OPACITY_MIN;
  <span class="hljs-keyword">this</span>.navigateBarOpacity = yOffset / Constants.MAIN_SCROLLER_OFFSET_Y_MAX;
  <span class="hljs-comment">// åˆ¤æ–­å½“å‰çš„å¯¼èˆªæ å’Œå›¾æ ‡é¢œè‰²å˜åŒ–</span>
  yOffset &gt; <span class="hljs-keyword">this</span>.statusBarHeight ?
    <span class="hljs-keyword">this</span>.isWhiteColor = <span class="hljs-literal">false</span> : <span class="hljs-keyword">this</span>.isWhiteColor = <span class="hljs-literal">true</span>;
  <span class="hljs-comment">// åˆ¤æ–­çŠ¶æ€æ å­—ä½“é¢œè‰²å˜åŒ–</span>
  yOffset &gt; <span class="hljs-keyword">this</span>.statusBarHeight ?
  <span class="hljs-keyword">this</span>.windowModel.setSystemBarContentColor(Constants.StatusBarContentBlackColor) :
  <span class="hljs-keyword">this</span>.windowModel.setSystemBarContentColor(Constants.StatusBarContentWhiteColor);
  <span class="hljs-comment">// åˆ¤æ–­å¯¼èˆªæ åŠ¨æ•ˆå˜åŒ–</span>
  yOffset &gt;= <span class="hljs-keyword">this</span>.statusBarHeight + Constants.MAIN_SCROLLER_OFFSET_STATUS_CHANGE ?
    <span class="hljs-keyword">this</span>.isFlow = <span class="hljs-literal">true</span> : <span class="hljs-keyword">this</span>.isFlow = <span class="hljs-literal">false</span>;
})
</code></pre>
</li>
</ul>
<h3 data-id="heading-3">æ€»ç»“</h3>
<p>æœ¬ç¤ºä¾‹ä½¿ç”¨äº†<a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.huawei.com%2Fconsumer%2Fcn%2Fdoc%2Fharmonyos-references-V5%2Fts-rendering-control-lazyforeach-V5" target="_blank" title="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-rendering-control-lazyforeach-V5" ref="nofollow noopener noreferrer">LazyForEach</a>è¿›è¡Œæ•°æ®æ‡’åŠ è½½ï¼ŒLazyForEachæ‡’åŠ è½½å¯ä»¥é€šè¿‡è®¾ç½®cachedCountå±æ€§æ¥æŒ‡å®šç¼“å­˜æ•°é‡ï¼ŒåŒæ—¶æ­é…<a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.huawei.com%2Fconsumer%2Fcn%2Fdoc%2Fbest-practices-V5%2Fbpta-component-reuse-V5" target="_blank" title="https://developer.huawei.com/consumer/cn/doc/best-practices-V5/bpta-component-reuse-V5" ref="nofollow noopener noreferrer">ç»„ä»¶å¤ç”¨</a>èƒ½åŠ›ä»¥è¾¾åˆ°æ€§èƒ½æœ€ä¼˜æ•ˆæœã€‚</p>
<h4 data-id="heading-4">å¦‚æœæ‚¨æƒ³ç³»ç»Ÿæ·±å…¥åœ°å­¦ä¹  HarmonyOS å¼€å‘æˆ–æƒ³è€ƒå–HarmonyOSè®¤è¯è¯ä¹¦ï¼Œæ¬¢è¿åŠ å…¥åä¸ºå¼€å‘è€…å­¦å ‚ï¼š</h4>
<h3 data-id="heading-5">è¯·ç‚¹å‡»â†’ï¼š <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.huawei.com%2Fconsumer%2Fcn%2Ftraining%2FclassDetail%2Fd0d15d9039414a8fad9f99ac4a3f5096%3Ftype%3D1%253Fha_source%253Dhmosclass%26ha_sourceId%3D89000248" target="_blank" title="https://developer.huawei.com/consumer/cn/training/classDetail/d0d15d9039414a8fad9f99ac4a3f5096?type=1%3Fha_source%3Dhmosclass&amp;ha_sourceId=89000248" ref="nofollow noopener noreferrer">HarmonyOSå®˜æ–¹è®¤è¯åŸ¹è®­</a></h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d55a567a43d2464eba118ff249eb75db~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6bm_5Lq65oib:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767623898&amp;x-signature=mUGp%2FgSDfDrDFk2Gj8P10%2B6AnFQ%3D" alt="" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸ¦¾ å¯ä¸ºä¸ä¸å¯ä¸ºï¼šCDP è§†è§’ä¸‹çš„ Browser æ§åˆ¶è¾¹ç•Œ]]></title>    <link>https://juejin.cn/post/7589104492883361844</link>    <guid>https://juejin.cn/post/7589104492883361844</guid>    <pubDate>2025-12-29T14:54:01.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589104492883361844" data-draft-id="7589074117645008931" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸ¦¾ å¯ä¸ºä¸ä¸å¯ä¸ºï¼šCDP è§†è§’ä¸‹çš„ Browser æ§åˆ¶è¾¹ç•Œ"/> <meta itemprop="keywords" content="å‰ç«¯,æµè§ˆå™¨,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-29T14:54:01.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤ä»£çƒƒ"/> <meta itemprop="url" content="https://juejin.cn/user/43636193770071"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸ¦¾ å¯ä¸ºä¸ä¸å¯ä¸ºï¼šCDP è§†è§’ä¸‹çš„ Browser æ§åˆ¶è¾¹ç•Œ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/43636193770071/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤ä»£çƒƒ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T14:54:01.000Z" title="Mon Dec 29 2025 14:54:01 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¦‚æœæˆ‘ä»¬æŠŠäººç±»å¯¹ç”µè„‘çš„æ‰€æœ‰æ“ä½œè®°ä¸ºå…¨é›†ï¼Œé‚£ä¹ˆ Browser, CDP å’Œ puppeteer å¯æ“ä½œçš„é›†åˆèŒƒç•´å¦‚ä¸‹ï¼š</p>
<ul>
<li><strong>Computer</strong>ï¼šæ‰€æœ‰æ“ä½œçš„å…¨é›†</li>
<li><strong>Browser</strong>ï¼šApp å±‚æƒé™ï¼ŒBrowser ä¸ºäº†å®‰å…¨ï¼Œè¿˜é™åˆ¶äº†è®¸å¤šèƒ½åŠ›ï¼Œæ¯”å¦‚è¯´ç›´æ¥æ“ä½œæœ¬åœ°çš„æ–‡ä»¶</li>
<li><strong>CDP</strong>ï¼šä¸“æ³¨äº Debug èƒ½åŠ›ï¼Œæµè§ˆå™¨çš„éè°ƒè¯•ä¿¡æ¯ï¼ˆæ¯”å¦‚è¯´æ”¶è—ç½‘é¡µï¼‰æ˜¯æ²¡æœ‰æƒé™è®¿é—®çš„</li>
<li><strong>puppeteer</strong>ï¼šåŸºäº CDP æ„å»ºï¼Œä½†æ˜¯æœ‰ä¸€éƒ¨åˆ† CDP API å¹¶æ²¡æœ‰ç”¨åˆ°ï¼Œæ‰€ä»¥èƒ½åŠ›å±äº CDP çš„å­é›†</li>
</ul>
<p>åœ¨ Browser-Use åœºæ™¯ï¼Œä¸åŒäº VNC è¿™ç§æ›´ä¸ºé€šç”¨çš„æŠ•å±æ–¹æ¡ˆï¼ŒCDP æ˜¯æœ‰èƒ½åŠ›è¾¹ç•Œçš„ï¼Œæ‰€ä»¥è¯´çŸ¥é“å®ƒæ“…é•¿ä»€ä¹ˆä¸æ“…é•¿ä»€ä¹ˆï¼Œå¯¹äºæ¶æ„çš„æ•´ä½“è®¾è®¡å’Œæœªæ¥æ¼”åŒ–æ–¹å‘æœ‰å¾ˆå¤§çš„æ„ä¹‰ã€‚</p>
<p>ä¸‹é¢ä¸»è¦æ˜¯ä»æµè§ˆå™¨è§’åº¦å‡ºå‘ï¼Œåˆ—å‡º CDP(puppeteer) å¯ä»¥åšåˆ°çš„äº‹æƒ…ï¼Œæ”¯æŒéš¾åº¦åˆ†ç±»å¦‚ä¸‹ï¼š</p>
<ul>
<li><strong>ç›´æ¥æ”¯æŒ</strong>ï¼špptr æœ‰å°è£…å¥½çš„ç°æˆçš„ API</li>
<li><strong>é—´æ¥æ”¯æŒ</strong>ï¼šéœ€è¦ç»„åˆå¤šä¸ª pptr API/CDP API å®ç°ç›¸å…³åŠŸèƒ½</li>
<li><strong>ä¸èƒ½æ”¯æŒ</strong>ï¼šCDP å®Œå…¨åšä¸åˆ°çš„äº‹æƒ…</li>
</ul>
<br/>
<h2 data-id="heading-0">ä¸€ã€æµè§ˆå™¨åŠŸèƒ½</h2>
<p>è¿™éƒ¨åˆ†ä¸»è¦æŒ‡æµè§ˆå™¨çº§åˆ«çš„å…¨å±€åŠŸèƒ½ã€‚åŒ…æ‹¬ tabs ç®¡ç†ï¼Œé¡µé¢å¯¼èˆªç­‰åŠŸèƒ½ã€‚</p>
<h3 data-id="heading-1">Tabs</h3>
<ul>
<li><strong>å¿…è¦æ€§</strong>ï¼šé«˜</li>
<li><strong>æ”¯æŒåº¦</strong>ï¼šé—´æ¥æ”¯æŒ</li>
<li><strong>pptr API</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fpptr.dev%2Fapi%2Fpuppeteer.browser.newpage" target="_blank" title="https://pptr.dev/api/puppeteer.browser.newpage" ref="nofollow noopener noreferrer">Browser.newPage()</a>, <a href="https://link.juejin.cn?target=https%3A%2F%2Fpptr.dev%2Fapi%2Fpuppeteer.browser.pages" target="_blank" title="https://pptr.dev/api/puppeteer.browser.pages" ref="nofollow noopener noreferrer">Browser.pages()</a>, <a href="https://link.juejin.cn?target=https%3A%2F%2Fpptr.dev%2Fapi%2Fpuppeteer.page.bringtofront" target="_blank" title="https://pptr.dev/api/puppeteer.page.bringtofront" ref="nofollow noopener noreferrer">Page.bringToFront()</a>, <a href="https://link.juejin.cn?target=https%3A%2F%2Fpptr.dev%2Fapi%2Fpuppeteer.page.close" target="_blank" title="https://pptr.dev/api/puppeteer.page.close" ref="nofollow noopener noreferrer">Page.close()</a></li>
</ul>
<p>Tabsï¼ˆæ ‡ç­¾é¡µï¼‰æ˜¯éå¸¸é‡è¦çš„ä¸€ä¸ªåŠŸèƒ½ï¼ŒCDP çš„ tabs ç›¸å…³ API èƒ½åŠ›æ¯”è¾ƒå¼±ï¼Œpuppeteer ä¹Ÿæ²¡æœ‰åšç›¸å…³çš„æŠ½è±¡å’Œå°è£…ã€‚è¿™å°±å¯¼è‡´æƒ³å®ç° tab çš„ã€Œæ–°å»º/æ›´æ–°/åˆ‡æ¢/å…³é—­ã€è¿™ 4 ä¸ªåŸºç¡€çš„åŠŸèƒ½éœ€è¦ç»„åˆå¤šä¸ª CDP API é—´æ¥å®ç°ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/988655731ff646f0918fdd525c9b682c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2k5Luj54OD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767624841&amp;x-signature=5d6vUVN6XnKn6kKJyidHA8G5boM%3D" alt="tabs" loading="lazy"/> <br/></p>
<p>è¿˜æœ‰ä¸ªé—®é¢˜å¦‚æœ Tabs è¢«äººæ‹–æ‹½æ”¹å˜äº†æ˜¾ç¤ºé¡ºåºï¼Œè¿™éƒ¨åˆ†æ”¹å˜ CDP æ˜¯æ— æ³•æ„ŸçŸ¥çš„ã€‚æ¯”å¦‚è¯´ä¸Šé¢å›¾çš„ tabs æ˜¯æ‹–æ‹½è¿‡çš„ï¼Œä½†æ˜¯ CDP ç›´æ¥æ‹¿åˆ°çš„é¡ºåºæ˜¯ï¼š<code>å†å²è®°å½•ï¼Œç™¾åº¦ä¸€ä¸‹ï¼Œä½ å°±çŸ¥é“ï¼Œä»Šæ—¥å¤´æ¡</code>ï¼Œä¸è¿‡è¿™ç§é—®é¢˜å¯ä»¥å¿½ç•¥ã€‚</p>
<h3 data-id="heading-2">Navigate</h3>
<ul>
<li><strong>å¿…è¦æ€§</strong>ï¼šé«˜</li>
<li><strong>æ”¯æŒåº¦</strong>ï¼šç›´æ¥æ”¯æŒ</li>
<li><strong>pptr API</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fpptr.dev%2Fapi%2Fpuppeteer.page.goback" target="_blank" title="https://pptr.dev/api/puppeteer.page.goback" ref="nofollow noopener noreferrer">Page.goBack()</a>, <a href="https://link.juejin.cn?target=https%3A%2F%2Fpptr.dev%2Fapi%2Fpuppeteer.page.goforward" target="_blank" title="https://pptr.dev/api/puppeteer.page.goforward" ref="nofollow noopener noreferrer">Page.goForward()</a>, <a href="https://link.juejin.cn?target=https%3A%2F%2Fpptr.dev%2Fapi%2Fpuppeteer.page.reload" target="_blank" title="https://pptr.dev/api/puppeteer.page.reload" ref="nofollow noopener noreferrer">Page.reload()</a>, <a href="https://link.juejin.cn?target=https%3A%2F%2Fpptr.dev%2Fapi%2Fpuppeteer.page.goto" target="_blank" title="https://pptr.dev/api/puppeteer.page.goto" ref="nofollow noopener noreferrer">Page.goto()</a></li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/deee411a2b424a2e9feea9b76f71462e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2k5Luj54OD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767624841&amp;x-signature=0gtaBWhY05NnUfnLn7kbURQkpGI%3D" alt="navigate" loading="lazy"/>
Navigate ä¸»è¦æ˜¯ Tab å†…éƒ¨å¯¼èˆªï¼ŒåŒ…æ‹¬ back/forward/refresh/goto 4 ä¸ªæœ€åŸºç¡€çš„åŠŸèƒ½ã€‚</p>
<p>è¿™éƒ¨åˆ†åŠŸèƒ½ puppeteer åŸºäº CDP çš„ <a href="https://link.juejin.cn?target=https%3A%2F%2Fchromedevtools.github.io%2Fdevtools-protocol%2Ftot%2FPage%2F%23method-getNavigationHistory" target="_blank" title="https://chromedevtools.github.io/devtools-protocol/tot/Page/#method-getNavigationHistory" ref="nofollow noopener noreferrer">Page.getNavigationHistory</a> å’Œ <a href="https://link.juejin.cn?target=https%3A%2F%2Fchromedevtools.github.io%2Fdevtools-protocol%2Ftot%2FPage%2F%23method-navigateToHistoryEntry" target="_blank" title="https://chromedevtools.github.io/devtools-protocol/tot/Page/#method-navigateToHistoryEntry" ref="nofollow noopener noreferrer">Page.navigateToHistoryEntry</a> API åšäº†è‰¯å¥½çš„å°è£…ï¼ŒåŸºæœ¬ä¸Šå¯ä»¥ç›´æ¥æ‹¿æ¥ä½¿ç”¨ã€‚</p>
<p>ä½†å€¼å¾—æ³¨æ„çš„æ˜¯è¾“å…¥æ¡†çš„è”æƒ³è®°å½•æ˜¯æ— æ³•é€šè¿‡ CDP è·å–ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fc74c7bb13b8419a87eb5f108547986c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2k5Luj54OD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767624841&amp;x-signature=xd3azh2%2Bln%2FnTaiJ%2BGSzXl5M6I4%3D" alt="search" loading="lazy"/></p>
<h3 data-id="heading-3">æ‰©å±•ç¨‹åºï¼ˆæµè§ˆå™¨æ’ä»¶ï¼‰</h3>
<ul>
<li><strong>å¿…è¦æ€§</strong>ï¼šä¸­</li>
<li><strong>æ”¯æŒåº¦</strong>ï¼šç›´æ¥æ”¯æŒ</li>
<li><strong>pptr API</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fpptr.dev%2Fguides%2Fchrome-extensions" target="_blank" title="https://pptr.dev/guides/chrome-extensions" ref="nofollow noopener noreferrer">Chrome Extensions</a></li>
</ul>
<p>å¯ä»¥åˆå§‹åŒ– browser çš„æ—¶å€™å°±é€šè¿‡ pptr API ç›´æ¥æ³¨å…¥æ’ä»¶ã€‚æ’ä»¶èƒ½åŠ›è¿˜æ˜¯æ¯”è¾ƒé‡è¦çš„ï¼Œæ¯”å¦‚è¯´ ad-blockï¼Œå¯ä»¥å±è”½ä¸€äº›å¹¿å‘Šçš„ DOMï¼Œè®©ç½‘é¡µæ›´å¹²å‡€ï¼Œæ–¹ä¾¿æ¨¡å‹å»å®šä½ã€‚</p>
<h3 data-id="heading-4">å†…éƒ¨è®¾ç½®é¡µ</h3>
<ul>
<li><strong>å¿…è¦æ€§</strong>ï¼šä¸­</li>
<li><strong>æ”¯æŒåº¦</strong>ï¼šç›´æ¥æ”¯æŒ</li>
<li><strong>pptr API</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fpptr.dev%2Fapi%2Fpuppeteer.page.goto" target="_blank" title="https://pptr.dev/api/puppeteer.page.goto" ref="nofollow noopener noreferrer">Page.goto()</a></li>
</ul>
<p>å†…éƒ¨è®¾ç½®é¡µæˆ‘è¿™é‡Œå®šä¹‰ä¸º <code>chrome://</code> åè®®å¼€å¤´çš„é¡µé¢ï¼Œæ¯”å¦‚è¯´ <code>chrome://history/</code> å°±æ˜¯æµè§ˆå™¨çš„å†å²è®°å½•é¡µã€‚è¿™äº›è®¾ç½®é¡µå…¶å®éƒ½æ˜¯ä»¥ç½‘é¡µä¸ºè½½ä½“çš„ï¼Œæ‰€ä»¥éƒ½èƒ½è¢« CDP æ•è·åˆ°ï¼Œè¿™äº›é¡µé¢æœ‰å¾ˆå¤šï¼Œæ¯”å¦‚è¿˜æœ‰ <code>chrome://downloads/</code> <code>chrome://extensions/</code> ç­‰ã€‚</p>
<p>æ¢å¥è¯è¯´ï¼Œæˆ‘ä»¬åªè¦çŸ¥é“è®¾ç½®é¡µé¢çš„ URI å°±å¯ä»¥ç›´æ¥ navigate è¿‡å»ï¼Œè¿™ä¸ªçœ‹æ•´ä½“çš„è¯‰æ±‚ï¼Œå¯æŒ‰éœ€æ”¯æŒã€‚</p>













<table><thead><tr><th align="center">History Page</th><th align="center">History Page Screenshot</th></tr></thead><tbody><tr><td align="center"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2a8f9d8fb994415584db3acc0f4cecf9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2k5Luj54OD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767624841&amp;x-signature=ox05ZiNt4YU07opPTFlIrb3e0a4%3D" alt="history-page" loading="lazy"/></td><td align="center"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/60a5b438f153456b8cd5dd0d89f11589~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2k5Luj54OD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767624841&amp;x-signature=GR%2BKt2zincUxRZIX3hrIWuUc3qM%3D" alt="history-page-screenshot" loading="lazy"/></td></tr></tbody></table>
<h3 data-id="heading-5">è®¾ç½®èœå•</h3>
<ul>
<li><strong>å¿…è¦æ€§</strong>ï¼šä½</li>
<li><strong>æ”¯æŒåº¦</strong>ï¼šä¸æ”¯æŒ</li>
</ul>
<p>CDP æ— æ³•æ„ŸçŸ¥ï¼Œä½†è¿™ç§äºŒçº§èœå•ä¸‰çº§èœå•å…¥å£ä¹Ÿæ¯”è¾ƒæ·±ï¼Œä¸»åŠ¨æ”¹åŠ¨çš„æƒ…å†µæ¯”è¾ƒå°‘è§ï¼Œè€Œä¸”å…¶å¯¼èˆªåˆ°çš„éƒ½æ˜¯ <code>chrome://</code> åè®®å¼€å¤´çš„å†…ç½®ç½‘é¡µï¼Œæ‹¿åˆ°å¯¹åº”çš„ URI åéƒ½å¯ä»¥ç›´æ¥ navigate è¿‡å»ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bba98d4c2e8040df8c870fb90b7a4c16~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2k5Luj54OD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767624841&amp;x-signature=gKb%2Fn48G1ImxqExTPyt2QJuevf4%3D" alt="list" loading="lazy"/></p>
<h3 data-id="heading-6">å…¶å®ƒ App çº§åŠŸèƒ½</h3>
<ul>
<li><strong>å¿…è¦æ€§</strong>ï¼šä½</li>
<li><strong>æ”¯æŒåº¦</strong>ï¼šä¸æ”¯æŒ</li>
</ul>
<p>é™¤äº†ä¸Šé¢å¸¸è§çš„åŠŸèƒ½ï¼Œè¿˜æœ‰ä¸€äº›è¾ƒä¸ºå†·é—¨ï¼Œæˆ–è€…è¯´ä¸ä¼šå½±å“æµè§ˆç½‘é¡µä¸»æµç¨‹çš„ App çº§åŠŸèƒ½ã€‚æ¯”å¦‚è¯´ï¼š</p>
<ul>
<li>ç™»å½• Google è´¦å·çš„å¼¹çª—</li>
<li>æ ‡ç­¾é¡µåˆ†ç»„</li>
<li>é˜…è¯»æ¨¡å¼/é˜…è¯»æ¸…å•</li>
<li>......</li>
</ul>
<p>è¿™äº›éƒ½æ˜¯æœ‰å¯ä»¥å¢å¼ºæµè§ˆä½“éªŒï¼Œæ²¡æœ‰ä¹Ÿæ²¡å•¥é—®é¢˜çš„åŠŸèƒ½ã€‚åœ¨ AI åœºæ™¯ä¸Šï¼Œæ°¸è¿œæ˜¯è¶Šç®€å•çš„è¶Šå¥å£®ï¼Œæ‰€ä»¥è¿™äº›ç”œå“åŠŸèƒ½ä¹Ÿæ²¡å¿…è¦æ”¯æŒã€‚</p>

























<table><thead><tr><th align="center">ç™»å½•å¼¹çª—</th><th align="center">æ ‡ç­¾é¡µåˆ†ç»„</th></tr></thead><tbody><tr><td align="center"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7b32d9ceef7948689581f8e7b2c7a2e1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2k5Luj54OD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767624841&amp;x-signature=UMBf2NAGcFnbmVwNHGMpN3USDTw%3D" alt="login" loading="lazy"/></td><td align="center"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bd1785be866546b59f3bd5686a3bef0f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2k5Luj54OD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767624841&amp;x-signature=aCdksbhyTp714pc71dlIB0Qq3MY%3D" alt="group" loading="lazy"/></td></tr><tr><td align="center"/><td align="center"/></tr><tr><td align="center"><strong>é˜…è¯»æ¨¡å¼</strong></td><td align="center"><strong>é˜…è¯»æ¸…å•</strong></td></tr><tr><td align="center"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5e94d41dd8be45eeb3ff4c2b435aaf5d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2k5Luj54OD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767624841&amp;x-signature=k87x2fo1vhRSy7%2F0hQFPl1Nc18I%3D" alt="read-mode" loading="lazy"/></td><td align="center"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f80ffea549c94717b0d93b8e84ab16cc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2k5Luj54OD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767624841&amp;x-signature=ik5pvLKhN5%2BLYPpXWHh4Ant1bTk%3D" alt="read-list" loading="lazy"/></td></tr></tbody></table>
<br/>
<h2 data-id="heading-7">äºŒã€å¿«æ·é”®</h2>
<ul>
<li><strong>å¿…è¦æ€§</strong>ï¼šé«˜</li>
<li><strong>æ”¯æŒåº¦</strong>ï¼šé—´æ¥æ”¯æŒ</li>
<li><strong>pptr APIï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fpptr.dev%2Fapi%2Fpuppeteer.keyboard" target="_blank" title="https://pptr.dev/api/puppeteer.keyboard" ref="nofollow noopener noreferrer">Keyboard class</a></li>
</ul>
<p>å¿«æ·é”®æ˜¯ä¸€ä¸ªè¾ƒä¸ºå¤æ‚çš„é—®é¢˜ã€‚</p>
<p>å‡ å¤§æ“ä½œç³»ç»Ÿå‘å±•äº†å‡ åå¹´ï¼Œè™½ç„¶ç”¨çš„éƒ½æ˜¯åŒä¸€æ¬¾é”®ç›˜ï¼Œä½†åœ¨å¿«æ·é”®ä¸ŠåŠ å…¥äº†ä¸€å †è‡ªå·±çš„å°å¿ƒæ€ï¼Œæ‰€ä»¥å„æ“ä½œç³»ç»Ÿçš„å¿«æ·é”®æœ¬èº«å°±æœ‰å¾ˆé«˜çš„å¤æ‚åº¦ï¼›CDP åœºæ™¯ä¸‹çš„å¿«æ·é”®ï¼Œåœ¨ macOS ä¸‹ä¹Ÿéœ€è¦å•ç‹¬çš„é€‚é…ã€‚ä¸‹é¢æˆ‘å°±è¿™ä¸¤ä¸ªæ–¹å‘å±•å¼€è¯´è¯´ã€‚</p>
<h3 data-id="heading-8">è·¨å¹³å°è§’åº¦</h3>
<p>è·¨å¹³å°è§’åº¦çœ‹ï¼ŒWindows å’Œ Linux çš„å¸¸ç”¨å¿«æ·é”®è¿˜æ˜¯æ¯”è¾ƒç»Ÿä¸€çš„ï¼Œä½†æ˜¯ macOS å°±æ¯”è¾ƒç‰¹æ®Šã€‚</p>
<p>é¦–å…ˆæ˜¯å¯¹äºå¤§éƒ¨ä»½å¸¸ç”¨å¿«æ·é”®ï¼ˆå…¨é€‰/å¤åˆ¶/é»è´´ ç­‰ï¼‰ï¼Œåœ¨ Mac ä¸Šä½¿ç”¨çš„è£…é¥°é”®æ˜¯ Commandï¼ˆå³ <code>Meta</code> é”®ï¼‰ï¼Œä½†åœ¨ Windows/Linux ä¸Šä¸º Ctrlï¼ˆå³ <code>Control</code> é”®ï¼‰ã€‚</p>
<p>æ‰€ä»¥å½“ LLM å‘å‡ºä¸€ä¸ªå¿«æ·é”®çš„ action æŒ‡ä»¤æ—¶ï¼Œæ¯”å¦‚è¯´ã€Œå…¨é€‰ã€å¿«æ·é”®ï¼Œåœ¨å·¥ç¨‹è¿™ç«¯éœ€è¦åšä¸€ä¸‹å…œåº•ï¼Œå…ˆåˆ¤æ–­å½“å‰è¿è¡Œç¯å¢ƒçš„å…·ä½“ OSï¼Œç„¶åéœ€è¦æŠŠ action æŒ‡ä»¤åšä¿®æ”¹ä»¥è®©æŒ‡ä»¤æ­£ç¡®çš„æ‰§è¡Œï¼š</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-title function_">hotkey</span>(<span class="hljs-string">"ctrl+A"</span>) --&gt; isMacOS? --- <span class="hljs-literal">true</span> ---&gt; <span class="hljs-title function_">keyboard</span>(<span class="hljs-string">'Meta+KeyA'</span>)
                         â””------- <span class="hljs-literal">false</span> --&gt; <span class="hljs-title function_">keyboard</span>(<span class="hljs-string">'Control+KeyA'</span>)
</code></pre>
<p>é™¤äº†è¿™ç±»å¸¸è§çš„å¿«æ·é”®ï¼Œå…¶å®è¿˜æœ‰å¾ˆå¤šçš„æƒ…å†µéœ€è¦å»é€‚é…ã€‚æ¯”å¦‚è¯´ï¼š</p>
<ul>
<li>æŸ¥çœ‹æµè§ˆå™¨å†å²è®°å½•ï¼šmacOS æ˜¯ <code>Command+Y</code>ï¼ŒLinux å’Œ Windows æ˜¯ <code>Ctrl+H</code></li>
<li>é€€å‡ºæµè§ˆå™¨ï¼šmacOS æ˜¯ <code>Command+Q</code>ï¼ŒLinux å’Œ Windows æ˜¯ <code>Alt+F</code>ï¼Œç„¶åæŒ‰ <code>X</code> é”®</li>
<li>å¯¼èˆªåˆ°ä¸Šä¸ªé¡µé¢ï¼šmacOS æ˜¯ <code>Command+[</code>ï¼ŒLinux å’Œ Windows æ˜¯ <code>Alt+LeftArrow</code></li>
<li>......</li>
</ul>
<br/>
<p>ç›¸å…³çš„å¿«æ·é”®å¯ä»¥å‚è€ƒå®˜æ–¹ç»™çš„è§„èŒƒï¼š</p>

























<table><thead><tr><th align="left">å¹³å°</th><th align="left">æ”¯æŒçš„å¿«æ·é”®</th></tr></thead><tbody><tr><td align="left">macOS</td><td align="left"><a href="https://link.juejin.cn?target=https%3A%2F%2Fsupport.apple.com%2Fzh-cn%2F102650" target="_blank" title="https://support.apple.com/zh-cn/102650" ref="nofollow noopener noreferrer">support.apple.com/zh-cn/10265â€¦</a></td></tr><tr><td align="left">Windows</td><td align="left"><a href="https://link.juejin.cn?target=https%3A%2F%2Fsupport.microsoft.com%2Fen-us%2Fwindows%2Fkeyboard-shortcuts-in-windows-dcc61a57-8ff0-cffe-9796-cb9706c75eec" target="_blank" title="https://support.microsoft.com/en-us/windows/keyboard-shortcuts-in-windows-dcc61a57-8ff0-cffe-9796-cb9706c75eec" ref="nofollow noopener noreferrer">support.microsoft.com/en-us/windoâ€¦</a></td></tr><tr><td align="left">Linux GNOME</td><td align="left"><a href="https://link.juejin.cn?target=https%3A%2F%2Fhelp.gnome.org%2Fusers%2Fgnome-help%2Fstable%2Fshell-keyboard-shortcuts.html.en" target="_blank" title="https://help.gnome.org/users/gnome-help/stable/shell-keyboard-shortcuts.html.en" ref="nofollow noopener noreferrer">help.gnome.org/users/gnomeâ€¦</a></td></tr><tr><td align="left">Chrome</td><td align="left"><a href="https://link.juejin.cn?target=https%3A%2F%2Fsupport.google.com%2Fchrome%2Fanswer%2F157179%3Fhl%3Dzh-Hans%26co%3DGENIE.Platform%253DDesktop" target="_blank" title="https://support.google.com/chrome/answer/157179?hl=zh-Hans&amp;co=GENIE.Platform%3DDesktop" ref="nofollow noopener noreferrer">support.google.com/chrome/answâ€¦</a></td></tr></tbody></table>
<p>è¿™äº›éƒ½å¾ˆç¹çï¼Œé™¤äº†äº¤ç»™ AI æ¥å†™ï¼Œæœ€å¥½çš„æ–¹å¼è¿˜æ˜¯åªæä¾›åŸºç¡€çš„é€‚é…ï¼Œç„¶åé‡åˆ°å•¥ä¿®å•¥ï¼Œè¦ä¸ç„¶å°±æ˜¯ä¸ªæ— åº•æ´ã€‚</p>
<h3 data-id="heading-9">CDP è§’åº¦</h3>
<p>CDP å› ä¸ºæƒé™é—®é¢˜ï¼Œé€šè¿‡å®ƒå‘é€çš„é”®ç›˜æŒ‡ä»¤ï¼Œå¹¶ä¸æ˜¯çœŸæ­£çš„ç³»ç»Ÿé”®ç›˜æŒ‡ä»¤ï¼Œå¯ä»¥ç®€å•ç†è§£ä¸ºä½œç”¨åŸŸé™åˆ¶åœ¨ Chrome å’Œ Page å†…éƒ¨ã€‚è€Œä¸”ï¼Œæˆ‘ä»¬çš„ macOS <strong>åˆå‡ºå¹ºè›¾å­äº†</strong>ã€‚</p>
<p>é¦–å…ˆè¯´æœ€åŸºç¡€çš„ã€Œå…¨é€‰ã€å¿«æ·é”®ã€‚åœ¨ macOS ä¸Šå¦‚æœä½ ç›´æ¥å‘é€ <code>Meta+KeyA</code>ï¼Œä½ ä¼šå‘ç°æ ¹æœ¬ä¸ä¼šæ‰§è¡Œå…¨é€‰æ“ä½œã€‚</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">await</span> page.<span class="hljs-property">keyboard</span>.<span class="hljs-title function_">down</span>(<span class="hljs-string">"Meta"</span>);
<span class="hljs-keyword">await</span> page.<span class="hljs-property">keyboard</span>.<span class="hljs-title function_">down</span>(<span class="hljs-string">"KeyA"</span>);
<span class="hljs-keyword">await</span> page.<span class="hljs-property">keyboard</span>.<span class="hljs-title function_">up</span>(<span class="hljs-string">"KeyA"</span>);
<span class="hljs-keyword">await</span> page.<span class="hljs-property">keyboard</span>.<span class="hljs-title function_">up</span>(<span class="hljs-string">"Meta"</span>); <span class="hljs-comment">// not working in macOS</span>
</code></pre>
<p>å…·ä½“åŸå› æ¯”è¾ƒå¤æ‚ï¼Œå¯ä»¥å‚è€ƒ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fpuppeteer%2Fpuppeteer%2Fissues%2F776" target="_blank" title="https://github.com/puppeteer/puppeteer/issues/776" ref="nofollow noopener noreferrer">#776</a> å’Œ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fpuppeteer%2Fpuppeteer%2Fissues%2F1313" target="_blank" title="https://github.com/puppeteer/puppeteer/issues/1313" ref="nofollow noopener noreferrer">#1313</a>ï¼Œæ ¸å¿ƒåŸå› å¦‚ä¸‹ï¼š</p>
<blockquote>
<p>The first bug here is that we <strong>don't</strong> send nativeKeyCodes, so no real OSX events get made. When sending the nativeKeyCodes, "a" is keyCode 0 and protocol decides not to send a falsey keyCode. After these are fixed, OSX <strong>doesn't</strong> like to perform keyboard shortcuts unless the application has the foreground. And lastly, if Chromium has the foreground, we send the nativeKeyCode, and protocol processes it, the shortcut gets captured by the address bar <strong>instead of</strong> the page.</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fpuppeteer%2Fpuppeteer%2Fissues%2F776%23issuecomment-329589760" target="_blank" title="https://github.com/puppeteer/puppeteer/issues/776#issuecomment-329589760" ref="nofollow noopener noreferrer">github.com/puppeteer/pâ€¦</a></p>
</blockquote>
<p>å¯ä»¥çœ‹åˆ°å›å¤åœ¨ 2017 å¹´ï¼Œå¿« 10 å¹´äº†è¿™ä¸ªé—®é¢˜å…¶å®è¿˜å­˜åœ¨ã€‚</p>
<br/>
<p>ä¸è¿‡å¥½åœ¨å¯¹äºã€Œå…¨é€‰/å¤åˆ¶/ç²˜è´´ã€è¿™äº›å¸¸è§çš„å¿«æ·é”®ï¼ŒCDP æœ‰äº›åˆ«çš„æ›²çº¿æ•‘å›½æ–¹æ¡ˆã€‚CDP å‘é€é”®ç›˜æŒ‡ä»¤çš„ <a href="https://link.juejin.cn?target=https%3A%2F%2Fchromedevtools.github.io%2Fdevtools-protocol%2Ftot%2FInput%2F%23method-dispatchKeyEvent" target="_blank" title="https://chromedevtools.github.io/devtools-protocol/tot/Input/#method-dispatchKeyEvent" ref="nofollow noopener noreferrer">Input.dispatchKeyEvent</a>ï¼Œæœ‰ä¸ªé¢å¤–çš„ commands æŒ‡ä»¤ï¼Œä¸Šé¢æœ‰ä¸€äº›<a href="https://link.juejin.cn?target=https%3A%2F%2Fsource.chromium.org%2Fchromium%2Fchromium%2Fsrc%2F%2B%2Fmain%3Athird_party%2Fblink%2Frenderer%2Fcore%2Fediting%2Fcommands%2Feditor_command_names.h" target="_blank" title="https://source.chromium.org/chromium/chromium/src/+/main:third_party/blink/renderer/core/editing/commands/editor_command_names.h" ref="nofollow noopener noreferrer">ç¼–è¾‘æŒ‡ä»¤</a>å¯ä»¥è§¦å‘ç›¸å…³çš„æ“ä½œï¼Œæ¯”å¦‚è¯´æˆ‘æƒ³æ‰§è¡Œã€Œå…¨é€‰ã€æ“ä½œï¼Œæˆ‘å°±å¯ä»¥è¿™æ ·å†™ï¼š</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">await</span> page.<span class="hljs-property">keyboard</span>.<span class="hljs-title function_">down</span>(<span class="hljs-string">"KeyA"</span>, { <span class="hljs-attr">commands</span>: [<span class="hljs-string">"SelectAll"</span>] });
<span class="hljs-keyword">await</span> page.<span class="hljs-property">keyboard</span>.<span class="hljs-title function_">up</span>(<span class="hljs-string">"KeyA"</span>); <span class="hljs-comment">// working in macOS</span>
</code></pre>
<p>è¿™æ ·ä¸‹é¢è¿™äº›å¸¸è§çš„ç¼–è¾‘ç±»å¿«æ·é”®å°±å¯ä»¥æ”¯æŒäº†ï¼š</p>















































<table><thead><tr><th align="left">æ“ä½œ</th><th align="left">macOS</th><th align="left">Windows/Linux</th><th align="left">CDP commands</th></tr></thead><tbody><tr><td align="left">å¤åˆ¶</td><td align="left">Command + C</td><td align="left">Ctrl + C</td><td align="left">Copy</td></tr><tr><td align="left">ç²˜è´´</td><td align="left">Command + V</td><td align="left">Ctrl + V</td><td align="left">Paste</td></tr><tr><td align="left">å‰ªåˆ‡</td><td align="left">Command + X</td><td align="left">Ctrl + X</td><td align="left">Cut</td></tr><tr><td align="left">æ’¤é”€</td><td align="left">Command + Z</td><td align="left">Ctrl + Z</td><td align="left">Undo</td></tr><tr><td align="left">æ¢å¤</td><td align="left">Shift + Command + Z</td><td align="left">Ctrl + Y</td><td align="left">Redo</td></tr><tr><td align="left">å…¨é€‰</td><td align="left">Command + A</td><td align="left">Ctrl + A</td><td align="left">SelectAll</td></tr></tbody></table>
<p>å¯¹äºä¸€äº›å…¶ä»–çš„æƒé™è¾ƒé«˜çš„å¿«æ·é”®ï¼Œæˆ‘ä»¬å¯ä»¥å¯ä»¥åšå¥½<strong>åŠŸèƒ½æ˜ å°„</strong>ï¼š</p>
<ul>
<li>æŸ¥çœ‹æµè§ˆå™¨å†å²è®°å½•ï¼š<code>Page.goto('chrome://history/')</code></li>
<li>é€€å‡ºæµè§ˆå™¨ï¼š<code>Browser.close()</code></li>
<li>å¯¼èˆªåˆ°ä¸Šä¸ªé¡µé¢ï¼š<code>Page.goBack()</code></li>
<li>......</li>
</ul>
<p>å½“ç„¶è¿™äº›ä¹Ÿæœ€å¥½æŒ‰éœ€æ·»åŠ ï¼Œå…¨é€‚é…æ„ä¹‰ä¸å¤§ã€‚</p>
<h2 data-id="heading-10">ä¸‰ã€ç½‘é¡µåŠŸèƒ½</h2>
<p>ä¸»è¦æŒ‡å¯¹ç½‘é¡µæœ¬èº«çš„åšçš„æ“ä½œï¼Œå½±å“èŒƒå›´ä¸»è¦ä¸ºå½“å‰ç½‘é¡µï¼Œæœ‰æˆªå›¾ï¼Œæ–‡ä»¶ä¸Šä¼ ä¸‹è½½ç­‰åŠŸèƒ½ã€‚</p>
<h3 data-id="heading-11">æˆªå›¾</h3>
<ul>
<li><strong>å¿…è¦æ€§</strong>ï¼šé«˜</li>
<li><strong>æ”¯æŒåº¦</strong>ï¼šç›´æ¥æ”¯æŒ</li>
</ul>
<p>CDP çš„ <a href="https://link.juejin.cn?target=https%3A%2F%2Fchromedevtools.github.io%2Fdevtools-protocol%2Ftot%2FPage%2F%23method-captureScreenshot" target="_blank" title="https://chromedevtools.github.io/devtools-protocol/tot/Page/#method-captureScreenshot" ref="nofollow noopener noreferrer">Page.captureScreenshot</a> API å¯ä»¥ç›´æ¥å¯¹ç½‘é¡µå†…å®¹æœ¬èº«åšæˆªå›¾ã€‚ä½†éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒCDP æˆªå›¾åªèƒ½æˆªåˆ°ç½‘é¡µæœ¬èº«ï¼ˆä¹Ÿå°±æ˜¯<strong>ç»¿æ¡†</strong>å†…çš„å†…å®¹ï¼‰ï¼Œå¤–éƒ¨çš„ Chrome UI æ˜¯æˆªå›¾ä¸åˆ°çš„ã€‚</p>
<p>æ‰€ä»¥è¿™é‡Œéœ€è¦æ ¼å¤–æ³¨æ„ï¼Œéƒ¨åˆ† VLM æ¨¡å‹åœ¨è®­ç»ƒé˜¶æ®µæ˜¯ç”¨çš„å®Œæ•´çš„ Chrome æˆªå›¾ï¼ˆ<strong>çº¢æ¡†</strong>å†…çš„å†…å®¹ï¼‰ï¼Œå¦‚æœæ³›åŒ–èƒ½åŠ›ä¸€èˆ¬ï¼Œç›´æ¥æŠŠ CDP æˆªå›¾ä¼ ç»™ VLMï¼Œå¯èƒ½ä¼šæœ‰ action åæ ‡é”™ä½çš„é—®é¢˜ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/88fd4ee521ac40e4863398ecb2480ae4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2k5Luj54OD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767624841&amp;x-signature=hurB%2F4xWcGnZJPy0ELZDesplZes%3D" alt="screenshot" loading="lazy"/></p>
<h3 data-id="heading-12">åŸºç¡€äº¤äº’</h3>
<ul>
<li><strong>å¿…è¦æ€§</strong>ï¼šé«˜</li>
<li><strong>æ”¯æŒåº¦</strong>ï¼šé—´æ¥æ”¯æŒ</li>
<li><strong>pptr APIï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fpptr.dev%2Fapi%2Fpuppeteer.keyboard" target="_blank" title="https://pptr.dev/api/puppeteer.keyboard" ref="nofollow noopener noreferrer">Keyboard class</a>, <a href="https://link.juejin.cn?target=https%3A%2F%2Fpptr.dev%2Fapi%2Fpuppeteer.mouse" target="_blank" title="https://pptr.dev/api/puppeteer.mouse" ref="nofollow noopener noreferrer">Mouse class</a></li>
</ul>
<p>è¿™é‡Œçš„åŸºç¡€æ“ä½œä¸»è¦æ˜¯æŒ‡ clickï¼Œdragï¼Œkeyboard ç­‰è¡Œä¸ºï¼Œè¿™äº› puppeteer åšå¥½äº†åŸå­æ–¹æ³•ï¼Œå¯ä»¥ç›´æ¥ç»„åˆä½¿ç”¨ã€‚è€Œä¸” pptr ä¹Ÿæä¾›äº†å„ç§ DOM å›è°ƒå»æ‰§è¡Œç›¸å…³çš„ action æ“ä½œï¼Œè¿˜æ˜¯éå¸¸çµæ´»çš„ã€‚è¿™é‡Œæ¨èç›´æ¥çœ‹ pptr çš„æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fpptr.dev%2Fguides%2Fpage-interactions" target="_blank" title="https://pptr.dev/guides/page-interactions" ref="nofollow noopener noreferrer">pptr: Page Interactions</a>ï¼Œè¿˜æ˜¯æè¿°çš„æ¯”è¾ƒæ¸…æ™°çš„ã€‚</p>
<h3 data-id="heading-13">Dialog å¼¹çª—</h3>
<ul>
<li><strong>å¿…è¦æ€§</strong>ï¼šé«˜</li>
<li><strong>æ”¯æŒåº¦</strong>ï¼šé—´æ¥æ”¯æŒ</li>
<li><strong>pptr APIï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fpptr.dev%2Fapi%2Fpuppeteer.dialog" target="_blank" title="https://pptr.dev/api/puppeteer.dialog" ref="nofollow noopener noreferrer">Dialog class</a></li>
</ul>
<p>CDP å¯ä»¥ç›´æ¥æ„ŸçŸ¥åˆ°å¼¹çª—çš„ç›¸å…³äº‹ä»¶ï¼ˆä¾‹å¦‚ <a href="https://link.juejin.cn?target=https%3A%2F%2Fchromedevtools.github.io%2Fdevtools-protocol%2Ftot%2FPage%2F%23event-javascriptDialogOpening" target="_blank" title="https://chromedevtools.github.io/devtools-protocol/tot/Page/#event-javascriptDialogOpening" ref="nofollow noopener noreferrer">Page.javascriptDialogOpening</a>ï¼‰ï¼Œæ‰€ä»¥ä¸‹æ–¹çš„ 4 ç±»å¼¹çª—çš„è§¦å‘éƒ½æ˜¯å¯ä»¥æ„ŸçŸ¥åˆ°çš„ï¼š</p>

























<table><thead><tr><th align="center">Alert</th><th align="center">Confirm</th></tr></thead><tbody><tr><td align="center"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/788f0c6f8b08442b95aaf9fa285d6286~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2k5Luj54OD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767624841&amp;x-signature=8ZVIfpe8gltj%2BNY5LHMSRn01bIk%3D" alt="alert" loading="lazy"/></td><td align="center"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7756ccddb98a4aaaa1f93dd4ad4129b0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2k5Luj54OD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767624841&amp;x-signature=AO%2Bc35UogxxKMwCK%2B2xYLDUaK78%3D" alt="confirm" loading="lazy"/></td></tr><tr><td align="center"/><td align="center"/></tr><tr><td align="center"><strong>Prompt</strong></td><td align="center"><strong>Beforeunload</strong></td></tr><tr><td align="center"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/99683d862e5041b0ac10e3a8c90275fb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2k5Luj54OD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767624841&amp;x-signature=4mL74OUXD0rYmPKLbQvvRdCirOg%3D" alt="dialog" loading="lazy"/></td><td align="center"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1e80538eb60e45bc8c49ed97bcc1ada1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2k5Luj54OD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767624841&amp;x-signature=wYxbcVaBCI5KHPF216B91sP4Gm8%3D" alt="beforeunload" loading="lazy"/></td></tr></tbody></table>
<p>å› ä¸ºå¼¹çª—æ˜¯ä¸€ä¸ªä¼˜å…ˆçº§å¾ˆé«˜çš„æµè§ˆå™¨è¡Œä¸ºï¼Œå®ƒä¸€æ—¦å”¤èµ·åŸºæœ¬ä¼šä¸­æ–­ç½‘é¡µçš„æ‰€æœ‰è¡Œä¸ºï¼ŒJS å¼•æ“ä¹Ÿä¼šæŒ‚èµ·åœæ­¢å“åº”ï¼Œæ‰€ä»¥å¿…é¡»å¾—å“åº”å…³é—­å¼¹çª—æ‰èƒ½æ‰§è¡Œåç»­æµç¨‹ï¼Œç»¼åˆæ¥çœ‹æ˜¯ä¸€ä¸ªéå¸¸é«˜ä¼˜çš„åŠŸèƒ½ã€‚</p>
<h3 data-id="heading-14">å³é”®èœå•</h3>
<ul>
<li><strong>å¿…è¦æ€§</strong>ï¼šä½</li>
<li><strong>æ”¯æŒåº¦</strong>ï¼šé—´æ¥æ”¯æŒ</li>
</ul>
<p>CDP æ— æ³•æ„ŸçŸ¥åˆ°åœ¨é¡µé¢å†…ç‚¹å‡»ã€Œé¼ æ ‡å³é”®ã€åè§¦å‘çš„ <strong>ç³»ç»Ÿèœå•</strong> æœ¬èº«ï¼š</p>

















<table><thead><tr><th align="center">Page</th><th align="center">Image</th><th align="center">Link</th><th align="center">Tab</th></tr></thead><tbody><tr><td align="center"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8e419a8672174c0a94d2b4577120f5c0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2k5Luj54OD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767624841&amp;x-signature=xAlFVAFERBJbhP6W0WRKn1k8xY8%3D" alt="page-right-button" loading="lazy"/></td><td align="center"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/836f1cd5f8c14d10989058b8b9c41e96~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2k5Luj54OD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767624841&amp;x-signature=LAMzm6eVrSH%2FxRQzmcPTzilSGaE%3D" alt="link-right-button" loading="lazy"/></td><td align="center"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9fb1b77f91884b558f3c7f40d6c5f866~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2k5Luj54OD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767624841&amp;x-signature=yQHePd9sQmAdgIxxnDWxCoj4Kvw%3D" alt="17-cdp-do-image-right-button" loading="lazy"/></td><td align="center"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3268737522fa4657b6976a71fbf35ded~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2k5Luj54OD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767624841&amp;x-signature=fPBL4wAjHhMGMJ5P9q%2FiAjmhviY%3D" alt="tab-right-button" loading="lazy"/></td></tr></tbody></table>
<p>ä½†ç³»ç»Ÿå¼¹çª—å†…çš„åŠŸèƒ½åŸºæœ¬å¯ä»¥é€šè¿‡å…¶ä»–æ–¹å¼å®ç°ï¼Œæ¯”å¦‚è¯´ã€Œè¿”å›/å‰è¿›/é‡æ–°åŠ è½½ã€ç­‰åŠŸèƒ½éƒ½å¯ä»¥ç”¨ä¸€äº› Navigate çš„æ–¹æ³•åšå¹³æ›¿ã€‚ä½†å°±ç›®å‰çš„ç”¨æˆ·è¯‰æ±‚çœ‹ï¼Œè¿™éƒ¨åˆ†åŠŸèƒ½çš„å¿…è¦æ€§å¹¶ä¸é«˜ã€‚</p>
<p>å¯¹äºç½‘é¡µå†…<strong>è‡ªå®šä¹‰çš„å³é”®èœå•</strong>ï¼Œå› ä¸ºåŸºæœ¬éƒ½æ˜¯ DOM ç»˜åˆ¶çš„ï¼Œå…¶å®å¯ä»¥é€šè¿‡ç½‘é¡µå†…æˆªå›¾æ„ŸçŸ¥åˆ°çš„ï¼Œä¾‹å¦‚ä¸‹å›¾ä¸­ bilibili æ’­æ”¾å™¨çš„å³é”® DOM èœå•å°±å¯ä»¥è¢« CDP æˆªå›¾æ•è·ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3f732a14834f435b96e550cf16e2aa3c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2k5Luj54OD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767624841&amp;x-signature=aXZ86hvjDKyjFWXRJANyhSOrufo%3D" alt="custom-right-button" loading="lazy"/></p>
<h3 data-id="heading-15">Input é€‰æ‹©å™¨</h3>
<ul>
<li><strong>å¿…è¦æ€§</strong>ï¼šé«˜</li>
<li><strong>æ”¯æŒåº¦</strong>ï¼šé—´æ¥æ”¯æŒ</li>
</ul>
<p>HTML çš„å¤§éƒ¨åˆ†è¡¨å•åŠŸèƒ½éƒ½æ˜¯æ”¯æŒçš„ï¼Œä½†æ˜¯éƒ¨åˆ† Input é€‰æ‹©å™¨ä½¿ç”¨äº†ç³»ç»Ÿæ§ä»¶ï¼ˆä¾‹å¦‚ HTML é»˜è®¤çš„ Select é€‰æ‹©å™¨ï¼Œæ—¥æœŸé€‰é€‰æ‹©å™¨ï¼‰ï¼Œå¯¼è‡´ CDP æˆªå›¾æ— æ³•æ„ŸçŸ¥åˆ°ã€‚</p>
<p>ç›®å‰æµ‹è¯•ä¸‹æ¥æœ‰è¿™äº›é€‰æ‹©å™¨éƒ½æ˜¯æ— æ³•è¢« CDP Screenshot æ‰€æ•è·çš„ï¼š</p>

















<table><thead><tr><th align="center">Select</th><th align="center">Date</th><th align="center">Time</th><th align="center">Color</th></tr></thead><tbody><tr><td align="center"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4e71f11eb98e4813972ee7661cc648e8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2k5Luj54OD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767624841&amp;x-signature=FE%2FA1Zj2QR4eHYgtFUsI3gGFbGE%3D" alt="select" loading="lazy"/></td><td align="center"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b56f0762115c42d2b800bc0d37c178a3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2k5Luj54OD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767624841&amp;x-signature=%2BGFrHh8ho%2B4r%2Bp92FCNXbtu5mJk%3D" alt="date" loading="lazy"/></td><td align="center"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/547b911968d44dab860192e80a30753f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2k5Luj54OD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767624841&amp;x-signature=g5zDue%2B71Yn1LvNDhZKAjcbTGeI%3D" alt="time" loading="lazy"/></td><td align="center"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7724fd3787ee41d1be2321589ecd500f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2k5Luj54OD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767624841&amp;x-signature=qt75nDhNBHa6y8Zi5hKYo3TZrSU%3D" alt="23-cdp-do-link-color" loading="lazy"/></td></tr></tbody></table>
<p>ä½†æ˜¯ä¹Ÿä¸æ˜¯æ²¡æœ‰è¿‚å›çš„åŠæ³•ï¼Œæˆ‘ä»¬å¯ä»¥å°è¯•ä½¿ç”¨ JS ä»£ç æ³¨å…¥æ›¿æ¢æ‰ç°æœ‰çš„ç³»ç»Ÿæ§ä»¶ä¸º DOM æ§ä»¶ï¼Œé—´æ¥çš„å®ç°è¢«æˆªå›¾çš„è¯‰æ±‚ã€‚ä¾‹å¦‚ Select Option Pickerï¼Œæ›¿æ¢åçš„æ•ˆæœå¦‚ä¸‹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/98b5f93c457b4688bf8be8d7b995705a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2k5Luj54OD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767624841&amp;x-signature=%2BadDQ%2BVUgijpfLjPIC5E69K%2BVk4%3D" alt="select-dom" loading="lazy"/></p>
<h3 data-id="heading-16">æ–‡ä»¶ä¸Šä¼ /ä¸‹è½½</h3>
<ul>
<li><strong>å¿…è¦æ€§</strong>ï¼šé«˜</li>
<li><strong>æ”¯æŒåº¦</strong>ï¼šç›´æ¥æ”¯æŒ</li>
<li><strong>pptr APIï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fpptr.dev%2Fapi%2Fpuppeteer.elementhandle.uploadfile" target="_blank" title="https://pptr.dev/api/puppeteer.elementhandle.uploadfile" ref="nofollow noopener noreferrer">ElementHandle.uploadFile()</a>, <a href="https://link.juejin.cn?target=https%3A%2F%2Fpptr.dev%2Fapi%2Fpuppeteer.filechooser" target="_blank" title="https://pptr.dev/api/puppeteer.filechooser" ref="nofollow noopener noreferrer">FileChooser class</a>, <a href="https://link.juejin.cn?target=https%3A%2F%2Fpptr.dev%2Fapi%2Fpuppeteer.downloadbehavior" target="_blank" title="https://pptr.dev/api/puppeteer.downloadbehavior" ref="nofollow noopener noreferrer">DownloadBehavior</a></li>
</ul>
<p>pptr ä¸Šæ‰§è¡Œæ–‡ä»¶çš„é€»è¾‘è¾ƒä¸ºå®Œå–„ï¼Œç»“åˆ uploadFile API å’Œ FileChooser éƒ½å¯ä»¥åšè¾ƒå¥½çš„æ–‡ä»¶ä¸Šä¼ æ”¯æŒã€‚ä½†æ˜¯åœ¨æ–‡ä»¶ä¸‹è½½ä¸Šå¹¶æ²¡æœ‰æä¾›éå¸¸å¥½çš„ APIï¼Œç”¨æˆ·å¯ä»¥æ“ä½œçš„å°±æ˜¯é€šè¿‡ DownloadBehavior å»æŒ‡å®šä¸‹è½½ç­–ç•¥å’Œä¸‹è½½è·¯å¾„ã€‚</p>
<h3 data-id="heading-17">æ‰“å°</h3>
<ul>
<li><strong>å¿…è¦æ€§</strong>ï¼šä¸­</li>
<li><strong>æ”¯æŒåº¦</strong>ï¼šç›´æ¥æ”¯æŒ</li>
<li><strong>pptr API</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fpptr.dev%2Fapi%2Fpuppeteer.page.pdf" target="_blank" title="https://pptr.dev/api/puppeteer.page.pdf" ref="nofollow noopener noreferrer">Page.pdf()</a></li>
</ul>
<p>è¿™ä¸ªä¹Ÿæ˜¯ç°æˆçš„ APIï¼Œç›´æ¥è°ƒç”¨å³å¯ã€‚</p>
<h3 data-id="heading-18">å…¶å®ƒ Page çº§åŠŸèƒ½</h3>
<ul>
<li><strong>å¿…è¦æ€§</strong>ï¼šä½</li>
<li><strong>æ”¯æŒåº¦</strong>ï¼šä¸æ”¯æŒ</li>
</ul>
<p>é™¤äº†ä¸Šè¿°çš„å„ç§é«˜é¢‘åŠŸèƒ½ï¼Œæµè§ˆå™¨è¿˜æœ‰ä¸€äº›ç”œå“çº§å°åŠŸèƒ½ï¼Œä½†ä»ä¸ªäººè§’åº¦å’Œç”¨æˆ·è¯‰æ±‚ä¸Šçœ‹ï¼Œè¿™äº›åŠŸèƒ½åœ¨ Browser-Use åœºæ™¯åŸºæœ¬ä¸Šç”¨ä¸åˆ°ï¼Œè€Œä¸”è¿™äº›åŠŸèƒ½ CDP ä¹ŸåŸºæœ¬ä¸æ”¯æŒï¼Œä½†ä¸ºäº†æœ¬æ–‡çš„å†…å®¹å®Œæ•´æ€§è¿˜æ˜¯åˆ—å‡ºæ¥ï¼š</p>
<ul>
<li>ä¹¦ç­¾</li>
<li>ç¿»è¯‘</li>
<li>æœç´¢</li>
<li>äºŒç»´ç </li>
<li>......</li>
</ul>

























<table><thead><tr><th align="center">ä¹¦ç­¾</th><th align="center">ç¿»è¯‘</th></tr></thead><tbody><tr><td align="center"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/50f80a8fd5f64a3d817ef70d99004a09~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2k5Luj54OD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767624841&amp;x-signature=w71235wGOObHtbYn9OYwwRsQV0Y%3D" alt="mark" loading="lazy"/></td><td align="center"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/411e5b50d7ef426eb7d35d5ee0c11136~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2k5Luj54OD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767624841&amp;x-signature=fGzhjrimq9C831aiOFhdFBvMe3Y%3D" alt="trans" loading="lazy"/></td></tr><tr><td align="center"/><td align="center"/></tr><tr><td align="center"><strong>æœç´¢</strong></td><td align="center"><strong>äºŒç»´ç </strong></td></tr><tr><td align="center"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/48ce16af9d574227a32491591141db67~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2k5Luj54OD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767624841&amp;x-signature=t14wTfYWxSB22OFvAgPHvIq%2BuRw%3D" alt="search" loading="lazy"/></td><td align="center"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d793b1d1016149a7b4c43cbfacd3ed8d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2k5Luj54OD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767624841&amp;x-signature=XtR%2B1nL9oMrW012qxLEDeYH%2Frow%3D" alt="qrcode" loading="lazy"/></td></tr></tbody></table>
<h2 data-id="heading-19">æ€»ç»“</h2>
<p>ç»¼ä¸Šæ‰€è¿°ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ° CDP è¿˜æ˜¯æœ‰æ˜æ˜¾çš„èƒ½åŠ›è¾¹ç•Œï¼Œä½†æ˜¯å·²ç»è¶³å¤Ÿæ”¯æŒ 95% çš„ä¸šåŠ¡åŠŸèƒ½äº†ã€‚æœ€é‡è¦çš„æ˜¯æŠŠç›¸å…³çš„åŠŸèƒ½æ‰“ç£¨å¥½ï¼Œæ‰èƒ½æœ€å¤§ç¨‹åº¦çš„æ”¾å¤§ AI çš„èƒ½åŠ›ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é¸¿è’™ä¸»é¢˜åˆ‡æ¢ï¼šä¸€ä¸ªå¼€å…³æå®šç™½å¤©/é»‘å¤œæ¨¡å¼]]></title>    <link>https://juejin.cn/post/7589074117644812323</link>    <guid>https://juejin.cn/post/7589074117644812323</guid>    <pubDate>2025-12-29T13:05:15.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589074117644812323" data-draft-id="7589063105732460559" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é¸¿è’™ä¸»é¢˜åˆ‡æ¢ï¼šä¸€ä¸ªå¼€å…³æå®šç™½å¤©/é»‘å¤œæ¨¡å¼"/> <meta itemprop="keywords" content="HarmonyOS"/> <meta itemprop="datePublished" content="2025-12-29T13:05:15.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="90åæ™¨ä»”"/> <meta itemprop="url" content="https://juejin.cn/user/2717648476705773"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é¸¿è’™ä¸»é¢˜åˆ‡æ¢ï¼šä¸€ä¸ªå¼€å…³æå®šç™½å¤©/é»‘å¤œæ¨¡å¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2717648476705773/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    90åæ™¨ä»”
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T13:05:15.000Z" title="Mon Dec 29 2025 13:05:15 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æˆ‘å¼ºçƒˆæ¨èä½¿ç”¨<strong>é¸¿è’™åŸç”Ÿèµ„æºé™å®šè¯æ–¹æ¡ˆ</strong>ï¼Œé…åˆä¸€ä¸ªç®€å•çš„å¼€å…³æ§åˆ¶ã€‚è¿™æ˜¯æœ€ä¼˜é›…ã€æœ€é«˜æ•ˆçš„å®ç°æ–¹å¼ã€‚è®©æˆ‘ç”¨ä¸€ä¸ªå®Œæ•´å¯è¿è¡Œçš„ç¤ºä¾‹å‘Šè¯‰ä½ ä¸ºä»€ä¹ˆã€‚</p>
<h2 data-id="heading-0">ä¸€ã€å®Œæ•´å®ç°ï¼šä¸€ä¸ªå¼€å…³æ§åˆ¶ç™½å¤©/é»‘å¤œæ¨¡å¼</h2>
<h3 data-id="heading-1">1.1 é¡¹ç›®ç»“æ„</h3>
<pre><code class="hljs language-bash" lang="bash">project/
â”œâ”€â”€ AppScope/resources/
â”‚   â”œâ”€â”€ base/element/color.json      <span class="hljs-comment"># ç™½å¤©æ¨¡å¼é¢œè‰²</span>
â”‚   â””â”€â”€ dark/element/color.json      <span class="hljs-comment"># å¤œé—´æ¨¡å¼é¢œè‰²</span>
â”œâ”€â”€ entry/src/main/ets/
â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â””â”€â”€ Index.ets               <span class="hljs-comment"># ä¸»é¡µé¢</span>
â”‚   â””â”€â”€ utils/
â”‚       â””â”€â”€ ThemeUtils.ets          <span class="hljs-comment"># ä¸»é¢˜ç®¡ç†å·¥å…·</span>
â””â”€â”€ entry/src/main/resources/
    â”œâ”€â”€ base/media/                 <span class="hljs-comment"># ç™½å¤©æ¨¡å¼å›¾æ ‡</span>
    â””â”€â”€ dark/media/                 <span class="hljs-comment"># å¤œé—´æ¨¡å¼å›¾æ ‡</span>
</code></pre>
<h3 data-id="heading-2">1.2 é¢œè‰²èµ„æºå®šä¹‰</h3>
<p><strong>ç™½å¤©ä¸»é¢˜é¢œè‰²</strong> (<code>base/element/color.json</code>):</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"color"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"app_bg_primary"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"value"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#F8F9FA"</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"app_text_primary"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"value"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#212529"</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"app_card_bg"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"value"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#FFFFFF"</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"app_accent_primary"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"value"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#0D6EFD"</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"app_switch_track_on"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"value"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#34C759"</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"app_switch_track_off"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"value"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#E9ECEF"</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>å¤œé—´ä¸»é¢˜é¢œè‰²</strong> (<code>dark/element/color.json</code>):</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"color"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"app_bg_primary"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"value"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#121212"</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"app_text_primary"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"value"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#E9ECEF"</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"app_card_bg"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"value"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#1E1E1E"</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"app_accent_primary"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"value"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#6EA8FE"</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"app_switch_track_on"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"value"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#30D158"</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"app_switch_track_off"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"value"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#3A3A3C"</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-3">1.3 ä¸»é¢˜ç®¡ç†å·¥å…·</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// utils/ThemeUtils.ets</span>
<span class="hljs-keyword">import</span> common <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.app.ability.common'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Configuration</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.app.ability.Configuration'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Preferences</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.data.preferences'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">ThemeMode</span> {
  <span class="hljs-variable constant_">LIGHT</span> = <span class="hljs-string">'light'</span>,
  <span class="hljs-variable constant_">DARK</span> = <span class="hljs-string">'dark'</span>,
  <span class="hljs-variable constant_">SYSTEM</span> = <span class="hljs-string">'system'</span>
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ThemeUtils</span> {
  <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-attr">instance</span>: <span class="hljs-title class_">ThemeUtils</span>;
  <span class="hljs-keyword">private</span> <span class="hljs-attr">appContext</span>: common.<span class="hljs-property">ApplicationContext</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;
  <span class="hljs-keyword">private</span> <span class="hljs-attr">preferences</span>: <span class="hljs-title class_">Preferences</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;
  <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> <span class="hljs-variable constant_">PREF_NAME</span> = <span class="hljs-string">'app_theme_prefs'</span>;
  <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> <span class="hljs-variable constant_">THEME_KEY</span> = <span class="hljs-string">'current_theme'</span>;
  
  <span class="hljs-comment">// ä¸»é¢˜å˜åŒ–ç›‘å¬å™¨</span>
  <span class="hljs-keyword">private</span> <span class="hljs-attr">listeners</span>: <span class="hljs-title class_">Array</span>&lt;<span class="hljs-function">(<span class="hljs-params">mode: ThemeMode</span>) =&gt;</span> <span class="hljs-built_in">void</span>&gt; = [];
  
  <span class="hljs-comment">// å•ä¾‹æ¨¡å¼</span>
  <span class="hljs-keyword">static</span> <span class="hljs-title function_">getInstance</span>(): <span class="hljs-title class_">ThemeUtils</span> {
    <span class="hljs-keyword">if</span> (!<span class="hljs-title class_">ThemeUtils</span>.<span class="hljs-property">instance</span>) {
      <span class="hljs-title class_">ThemeUtils</span>.<span class="hljs-property">instance</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThemeUtils</span>();
    }
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">ThemeUtils</span>.<span class="hljs-property">instance</span>;
  }
  
  <span class="hljs-comment">// åˆå§‹åŒ–</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">initialize</span>(<span class="hljs-attr">context</span>: common.<span class="hljs-property">Context</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt; {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-comment">// è·å–åº”ç”¨ä¸Šä¸‹æ–‡</span>
      <span class="hljs-keyword">const</span> abilityContext = context <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">appContext</span> = abilityContext.<span class="hljs-property">configuration</span>.<span class="hljs-property">appContext</span>;
      
      <span class="hljs-comment">// åˆå§‹åŒ–Preferenceså­˜å‚¨</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">preferences</span> = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Preferences</span>.<span class="hljs-title function_">getPreferences</span>(context, <span class="hljs-variable language_">this</span>.<span class="hljs-property">PREF_NAME</span>);
      
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ThemeUtils åˆå§‹åŒ–å®Œæˆ'</span>);
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'ThemeUtils åˆå§‹åŒ–å¤±è´¥:'</span>, error);
    }
  }
  
  <span class="hljs-comment">// è·å–å½“å‰ä¸»é¢˜</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">getCurrentTheme</span>(): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">ThemeMode</span>&gt; {
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">preferences</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-title class_">ThemeMode</span>.<span class="hljs-property">SYSTEM</span>;
    }
    
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> theme = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">preferences</span>.<span class="hljs-title function_">get</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">THEME_KEY</span>, <span class="hljs-title class_">ThemeMode</span>.<span class="hljs-property">SYSTEM</span>) <span class="hljs-keyword">as</span> <span class="hljs-built_in">string</span>;
      <span class="hljs-keyword">return</span> theme <span class="hljs-keyword">as</span> <span class="hljs-title class_">ThemeMode</span>;
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è·å–ä¸»é¢˜å¤±è´¥:'</span>, error);
      <span class="hljs-keyword">return</span> <span class="hljs-title class_">ThemeMode</span>.<span class="hljs-property">SYSTEM</span>;
    }
  }
  
  <span class="hljs-comment">// åˆ‡æ¢ä¸»é¢˜</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">toggleTheme</span>(): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt; {
    <span class="hljs-keyword">const</span> current = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getCurrentTheme</span>();
    <span class="hljs-keyword">let</span> <span class="hljs-attr">newTheme</span>: <span class="hljs-title class_">ThemeMode</span>;
    
    <span class="hljs-comment">// ç®€å•åˆ‡æ¢é€»è¾‘ï¼šç™½å¤© â†” å¤œé—´</span>
    <span class="hljs-keyword">if</span> (current === <span class="hljs-title class_">ThemeMode</span>.<span class="hljs-property">LIGHT</span>) {
      newTheme = <span class="hljs-title class_">ThemeMode</span>.<span class="hljs-property">DARK</span>;
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (current === <span class="hljs-title class_">ThemeMode</span>.<span class="hljs-property">DARK</span>) {
      newTheme = <span class="hljs-title class_">ThemeMode</span>.<span class="hljs-property">LIGHT</span>;
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-comment">// å¦‚æœæ˜¯è·Ÿéšç³»ç»Ÿï¼Œé»˜è®¤åˆ‡æ¢åˆ°å¤œé—´</span>
      newTheme = <span class="hljs-title class_">ThemeMode</span>.<span class="hljs-property">DARK</span>;
    }
    
    <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setTheme</span>(newTheme);
  }
  
  <span class="hljs-comment">// è®¾ç½®ä¸»é¢˜</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">setTheme</span>(<span class="hljs-attr">mode</span>: <span class="hljs-title class_">ThemeMode</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt; {
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">appContext</span> || !<span class="hljs-variable language_">this</span>.<span class="hljs-property">preferences</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'ThemeUtils æœªåˆå§‹åŒ–'</span>);
      <span class="hljs-keyword">return</span>;
    }
    
    <span class="hljs-keyword">try</span> {
      <span class="hljs-comment">// ä¿å­˜åˆ°Preferences</span>
      <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">preferences</span>.<span class="hljs-title function_">put</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">THEME_KEY</span>, mode);
      <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">preferences</span>.<span class="hljs-title function_">flush</span>();
      
      <span class="hljs-comment">// åº”ç”¨åˆ°ç³»ç»Ÿ</span>
      <span class="hljs-keyword">let</span> <span class="hljs-attr">colorMode</span>: <span class="hljs-title class_">Configuration</span>.<span class="hljs-property">ColorMode</span>;
      
      <span class="hljs-keyword">switch</span> (mode) {
        <span class="hljs-keyword">case</span> <span class="hljs-title class_">ThemeMode</span>.<span class="hljs-property">LIGHT</span>:
          colorMode = <span class="hljs-title class_">Configuration</span>.<span class="hljs-property">ColorMode</span>.<span class="hljs-property">COLOR_MODE_LIGHT</span>;
          <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> <span class="hljs-title class_">ThemeMode</span>.<span class="hljs-property">DARK</span>:
          colorMode = <span class="hljs-title class_">Configuration</span>.<span class="hljs-property">ColorMode</span>.<span class="hljs-property">COLOR_MODE_DARK</span>;
          <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> <span class="hljs-title class_">ThemeMode</span>.<span class="hljs-property">SYSTEM</span>:
          colorMode = <span class="hljs-title class_">Configuration</span>.<span class="hljs-property">ColorMode</span>.<span class="hljs-property">COLOR_MODE_SYSTEM</span>;
          <span class="hljs-keyword">break</span>;
        <span class="hljs-attr">default</span>:
          colorMode = <span class="hljs-title class_">Configuration</span>.<span class="hljs-property">ColorMode</span>.<span class="hljs-property">COLOR_MODE_LIGHT</span>;
      }
      
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">appContext</span>.<span class="hljs-title function_">setColorMode</span>(colorMode);
      
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`ä¸»é¢˜å·²åˆ‡æ¢ä¸º: <span class="hljs-subst">${mode}</span>`</span>);
      
      <span class="hljs-comment">// é€šçŸ¥æ‰€æœ‰ç›‘å¬å™¨</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">notifyListeners</span>(mode);
      
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è®¾ç½®ä¸»é¢˜å¤±è´¥:'</span>, error);
    }
  }
  
  <span class="hljs-comment">// ç›‘å¬ä¸»é¢˜å˜åŒ–</span>
  <span class="hljs-title function_">addListener</span>(<span class="hljs-attr">callback</span>: <span class="hljs-function">(<span class="hljs-params">mode: ThemeMode</span>) =&gt;</span> <span class="hljs-built_in">void</span>): <span class="hljs-built_in">void</span> {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span>.<span class="hljs-title function_">push</span>(callback);
  }
  
  <span class="hljs-comment">// ç§»é™¤ç›‘å¬å™¨</span>
  <span class="hljs-title function_">removeListener</span>(<span class="hljs-attr">callback</span>: <span class="hljs-function">(<span class="hljs-params">mode: ThemeMode</span>) =&gt;</span> <span class="hljs-built_in">void</span>): <span class="hljs-built_in">void</span> {
    <span class="hljs-keyword">const</span> index = <span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span>.<span class="hljs-title function_">indexOf</span>(callback);
    <span class="hljs-keyword">if</span> (index &gt; -<span class="hljs-number">1</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span>.<span class="hljs-title function_">splice</span>(index, <span class="hljs-number">1</span>);
    }
  }
  
  <span class="hljs-comment">// é€šçŸ¥æ‰€æœ‰ç›‘å¬å™¨</span>
  <span class="hljs-keyword">private</span> <span class="hljs-title function_">notifyListeners</span>(<span class="hljs-attr">mode</span>: <span class="hljs-title class_">ThemeMode</span>): <span class="hljs-built_in">void</span> {
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> listener <span class="hljs-keyword">of</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span>) {
      <span class="hljs-keyword">try</span> {
        <span class="hljs-title function_">listener</span>(mode);
      } <span class="hljs-keyword">catch</span> (error) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'ç›‘å¬å™¨æ‰§è¡Œå¤±è´¥:'</span>, error);
      }
    }
  }
}
</code></pre>
<h3 data-id="heading-4">1.4 ä¸»é¡µé¢å®ç°ï¼ˆåŒ…å«åˆ‡æ¢å¼€å…³ï¼‰</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// pages/Index.ets</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ThemeUtils</span>, <span class="hljs-title class_">ThemeMode</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'../utils/ThemeUtils'</span>;

<span class="hljs-meta">@Entry</span>
<span class="hljs-meta">@Component</span>
struct <span class="hljs-title class_">Index</span> {
  <span class="hljs-meta">@State</span> <span class="hljs-attr">currentTheme</span>: <span class="hljs-title class_">ThemeMode</span> = <span class="hljs-title class_">ThemeMode</span>.<span class="hljs-property">LIGHT</span>;
  <span class="hljs-meta">@State</span> <span class="hljs-attr">isDarkMode</span>: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">false</span>;
  
  <span class="hljs-comment">// åœ¨é¡µé¢æ˜¾ç¤ºæ—¶åˆå§‹åŒ–ä¸»é¢˜</span>
  <span class="hljs-title function_">aboutToAppear</span>(): <span class="hljs-built_in">void</span> {
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">initTheme</span>();
  }
  
  <span class="hljs-comment">// åˆå§‹åŒ–ä¸»é¢˜</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">initTheme</span>(): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt; {
    <span class="hljs-keyword">const</span> themeUtils = <span class="hljs-title class_">ThemeUtils</span>.<span class="hljs-title function_">getInstance</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentTheme</span> = <span class="hljs-keyword">await</span> themeUtils.<span class="hljs-title function_">getCurrentTheme</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">isDarkMode</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentTheme</span> === <span class="hljs-title class_">ThemeMode</span>.<span class="hljs-property">DARK</span>;
    
    <span class="hljs-comment">// ç›‘å¬ä¸»é¢˜å˜åŒ–</span>
    themeUtils.<span class="hljs-title function_">addListener</span>(<span class="hljs-function">(<span class="hljs-params">mode: ThemeMode</span>) =&gt;</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentTheme</span> = mode;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">isDarkMode</span> = mode === <span class="hljs-title class_">ThemeMode</span>.<span class="hljs-property">DARK</span>;
    });
  }
  
  <span class="hljs-comment">// åˆ‡æ¢ä¸»é¢˜</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">toggleTheme</span>(): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt; {
    <span class="hljs-keyword">const</span> themeUtils = <span class="hljs-title class_">ThemeUtils</span>.<span class="hljs-title function_">getInstance</span>();
    <span class="hljs-keyword">await</span> themeUtils.<span class="hljs-title function_">toggleTheme</span>();
  }
  
  <span class="hljs-comment">// è·å–å¼€å…³çŠ¶æ€æ–‡å­—</span>
  <span class="hljs-title function_">getSwitchText</span>(): <span class="hljs-built_in">string</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">isDarkMode</span> ? <span class="hljs-string">'å¤œé—´æ¨¡å¼'</span> : <span class="hljs-string">'ç™½å¤©æ¨¡å¼'</span>;
  }
  
  <span class="hljs-comment">// è·å–æ¨¡å¼å›¾æ ‡</span>
  <span class="hljs-title function_">getModeIcon</span>(): <span class="hljs-title class_">Resource</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">isDarkMode</span> 
      ? $r(<span class="hljs-string">'app.media.icon_moon'</span>)   <span class="hljs-comment">// æœˆäº®å›¾æ ‡ï¼ˆå¤œé—´ï¼‰</span>
      : $r(<span class="hljs-string">'app.media.icon_sun'</span>);   <span class="hljs-comment">// å¤ªé˜³å›¾æ ‡ï¼ˆç™½å¤©ï¼‰</span>
  }
  
  <span class="hljs-comment">// æ„å»ºç•Œé¢</span>
  <span class="hljs-title function_">build</span>(<span class="hljs-params"/>) {
    <span class="hljs-title class_">Column</span>() {
      <span class="hljs-comment">// é¡¶éƒ¨æ ‡é¢˜æ </span>
      <span class="hljs-title class_">Row</span>() {
        <span class="hljs-title class_">Text</span>(<span class="hljs-string">'ä¸»é¢˜è®¾ç½®'</span>)
          .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">24</span>)
          .<span class="hljs-title function_">fontColor</span>($r(<span class="hljs-string">'app.color.app_text_primary'</span>))
          .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Medium</span>)
        
        <span class="hljs-title class_">Blank</span>()
        
        <span class="hljs-title class_">Image</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getModeIcon</span>())
          .<span class="hljs-title function_">width</span>(<span class="hljs-number">24</span>)
          .<span class="hljs-title function_">height</span>(<span class="hljs-number">24</span>)
      }
      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)
      .<span class="hljs-title function_">padding</span>({ <span class="hljs-attr">left</span>: <span class="hljs-number">20</span>, <span class="hljs-attr">right</span>: <span class="hljs-number">20</span>, <span class="hljs-attr">top</span>: <span class="hljs-number">12</span>, <span class="hljs-attr">bottom</span>: <span class="hljs-number">12</span> })
      .<span class="hljs-title function_">backgroundColor</span>($r(<span class="hljs-string">'app.color.app_card_bg'</span>))
      
      <span class="hljs-comment">// ä¸»è¦å†…å®¹åŒºåŸŸ</span>
      <span class="hljs-title class_">Scroll</span>() {
        <span class="hljs-title class_">Column</span>() {
          <span class="hljs-comment">// ä¸»é¢˜åˆ‡æ¢å¡ç‰‡</span>
          <span class="hljs-title class_">Column</span>() {
            <span class="hljs-title class_">Row</span>() {
              <span class="hljs-title class_">Column</span>() {
                <span class="hljs-title class_">Text</span>(<span class="hljs-string">'å¤–è§‚æ¨¡å¼'</span>)
                  .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">18</span>)
                  .<span class="hljs-title function_">fontColor</span>($r(<span class="hljs-string">'app.color.app_text_primary'</span>))
                  .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Medium</span>)
                
                <span class="hljs-title class_">Text</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">isDarkMode</span> ? <span class="hljs-string">'æ·±è‰²ä¸»é¢˜ï¼Œä¿æŠ¤çœ¼ç›'</span> : <span class="hljs-string">'æµ…è‰²ä¸»é¢˜ï¼Œæ¸…æ™°æ˜äº®'</span>)
                  .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">14</span>)
                  .<span class="hljs-title function_">fontColor</span>($r(<span class="hljs-string">'app.color.app_text_primary'</span>))
                  .<span class="hljs-title function_">opacity</span>(<span class="hljs-number">0.6</span>)
                  .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">top</span>: <span class="hljs-number">4</span> })
              }
              .<span class="hljs-title function_">flexGrow</span>(<span class="hljs-number">1</span>)
              
              <span class="hljs-comment">// ä¸»é¢˜åˆ‡æ¢å¼€å…³</span>
              <span class="hljs-title class_">Toggle</span>({ <span class="hljs-attr">type</span>: <span class="hljs-title class_">ToggleType</span>.<span class="hljs-property">Switch</span>, <span class="hljs-attr">isOn</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">isDarkMode</span> })
                .<span class="hljs-title function_">selectedColor</span>($r(<span class="hljs-string">'app.color.app_switch_track_on'</span>))
                .<span class="hljs-title function_">switchPointColor</span>($r(<span class="hljs-string">'app.color.app_card_bg'</span>))
                .<span class="hljs-title function_">onChange</span>(<span class="hljs-function">(<span class="hljs-params">isOn: <span class="hljs-built_in">boolean</span></span>) =&gt;</span> {
                  <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">toggleTheme</span>();
                })
            }
            .<span class="hljs-title function_">padding</span>(<span class="hljs-number">20</span>)
          }
          .<span class="hljs-title function_">backgroundColor</span>($r(<span class="hljs-string">'app.color.app_card_bg'</span>))
          .<span class="hljs-title function_">borderRadius</span>(<span class="hljs-number">12</span>)
          .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">top</span>: <span class="hljs-number">20</span>, <span class="hljs-attr">left</span>: <span class="hljs-number">20</span>, <span class="hljs-attr">right</span>: <span class="hljs-number">20</span> })
          
          <span class="hljs-comment">// ç¤ºä¾‹å†…å®¹åŒºåŸŸ</span>
          <span class="hljs-title class_">Column</span>() {
            <span class="hljs-title class_">Text</span>(<span class="hljs-string">'ç¤ºä¾‹å†…å®¹'</span>)
              .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">20</span>)
              .<span class="hljs-title function_">fontColor</span>($r(<span class="hljs-string">'app.color.app_text_primary'</span>))
              .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Bold</span>)
              .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">bottom</span>: <span class="hljs-number">16</span> })
            
            <span class="hljs-title class_">Text</span>(<span class="hljs-string">'è¿™æ˜¯ä¸€ä¸ªæ–‡æœ¬ç¤ºä¾‹ï¼Œç”¨äºå±•ç¤ºä¸åŒä¸»é¢˜ä¸‹çš„æ˜¾ç¤ºæ•ˆæœã€‚åœ¨ç™½å¤©æ¨¡å¼ä¸‹ï¼Œæ–‡å­—ä¸ºæ·±è‰²ï¼›åœ¨å¤œé—´æ¨¡å¼ä¸‹ï¼Œæ–‡å­—ä¸ºæµ…è‰²ã€‚'</span>)
              .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">16</span>)
              .<span class="hljs-title function_">fontColor</span>($r(<span class="hljs-string">'app.color.app_text_primary'</span>))
              .<span class="hljs-title function_">opacity</span>(<span class="hljs-number">0.8</span>)
              .<span class="hljs-title function_">lineHeight</span>(<span class="hljs-number">24</span>)
            
            <span class="hljs-title class_">Divider</span>()
              .<span class="hljs-title function_">strokeWidth</span>(<span class="hljs-number">1</span>)
              .<span class="hljs-title function_">color</span>($r(<span class="hljs-string">'app.color.app_text_primary'</span>))
              .<span class="hljs-title function_">opacity</span>(<span class="hljs-number">0.1</span>)
              .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">top</span>: <span class="hljs-number">20</span>, <span class="hljs-attr">bottom</span>: <span class="hljs-number">20</span> })
            
            <span class="hljs-title class_">Row</span>() {
              <span class="hljs-title class_">Button</span>(<span class="hljs-string">'ä¸»è¦æŒ‰é’®'</span>)
                .<span class="hljs-title function_">backgroundColor</span>($r(<span class="hljs-string">'app.color.app_accent_primary'</span>))
                .<span class="hljs-title function_">fontColor</span>(<span class="hljs-string">'#FFFFFF'</span>)
                .<span class="hljs-title function_">borderRadius</span>(<span class="hljs-number">8</span>)
                .<span class="hljs-title function_">padding</span>({ <span class="hljs-attr">left</span>: <span class="hljs-number">20</span>, <span class="hljs-attr">right</span>: <span class="hljs-number">20</span> })
              
              <span class="hljs-title class_">Button</span>(<span class="hljs-string">'æ¬¡è¦æŒ‰é’®'</span>)
                .<span class="hljs-title function_">backgroundColor</span>($r(<span class="hljs-string">'app.color.app_card_bg'</span>))
                .<span class="hljs-title function_">fontColor</span>($r(<span class="hljs-string">'app.color.app_text_primary'</span>))
                .<span class="hljs-title function_">border</span>({
                  <span class="hljs-attr">color</span>: $r(<span class="hljs-string">'app.color.app_text_primary'</span>),
                  <span class="hljs-attr">width</span>: <span class="hljs-number">1</span>,
                  <span class="hljs-attr">style</span>: <span class="hljs-title class_">BorderStyle</span>.<span class="hljs-property">Solid</span>
                })
                .<span class="hljs-title function_">borderRadius</span>(<span class="hljs-number">8</span>)
                .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">left</span>: <span class="hljs-number">12</span> })
                .<span class="hljs-title function_">padding</span>({ <span class="hljs-attr">left</span>: <span class="hljs-number">20</span>, <span class="hljs-attr">right</span>: <span class="hljs-number">20</span> })
            }
            .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">top</span>: <span class="hljs-number">16</span> })
          }
          .<span class="hljs-title function_">padding</span>(<span class="hljs-number">24</span>)
          .<span class="hljs-title function_">backgroundColor</span>($r(<span class="hljs-string">'app.color.app_card_bg'</span>))
          .<span class="hljs-title function_">borderRadius</span>(<span class="hljs-number">12</span>)
          .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">top</span>: <span class="hljs-number">20</span>, <span class="hljs-attr">left</span>: <span class="hljs-number">20</span>, <span class="hljs-attr">right</span>: <span class="hljs-number">20</span>, <span class="hljs-attr">bottom</span>: <span class="hljs-number">40</span> })
        }
        .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)
      }
      .<span class="hljs-title function_">flexGrow</span>(<span class="hljs-number">1</span>)
    }
    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)
    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)
    .<span class="hljs-title function_">backgroundColor</span>($r(<span class="hljs-string">'app.color.app_bg_primary'</span>))
  }
}
</code></pre>
<h3 data-id="heading-5">1.5 åœ¨EntryAbilityä¸­åˆå§‹åŒ–</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// entry/src/main/ets/entryability/EntryAbility.ets</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ThemeUtils</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'../utils/ThemeUtils'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">UIAbility</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.app.ability.UIAbility'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EntryAbility</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">UIAbility</span> {
  <span class="hljs-title function_">onCreate</span>(<span class="hljs-params">want, launchParam</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'EntryAbility onCreate'</span>);
    
    <span class="hljs-comment">// åˆå§‹åŒ–ä¸»é¢˜å·¥å…·</span>
    <span class="hljs-title class_">ThemeUtils</span>.<span class="hljs-title function_">getInstance</span>().<span class="hljs-title function_">initialize</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>);
  }
}
</code></pre>
<h2 data-id="heading-6">äºŒã€ä¸ºä»€ä¹ˆè¿™æ˜¯æœ€ä½³æ–¹æ¡ˆï¼Ÿ</h2>
<h3 data-id="heading-7">2.1 ç®€å•ç›´è§‚ï¼Œä¸€è¡Œä»£ç åˆ‡æ¢</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// æ ¸å¿ƒåˆ‡æ¢é€»è¾‘ï¼Œåªéœ€ä¸€è¡Œä»£ç ï¼</span>
<span class="hljs-variable language_">this</span>.<span class="hljs-property">appContext</span>.<span class="hljs-title function_">setColorMode</span>(colorMode);
</code></pre>
<h3 data-id="heading-8">2.2 è‡ªåŠ¨é€‚é…æ‰€æœ‰ç»„ä»¶</h3>
<p>ä¸€æ—¦åˆ‡æ¢ç³»ç»Ÿé¢œè‰²æ¨¡å¼ï¼Œ<strong>æ‰€æœ‰</strong>ä½¿ç”¨èµ„æºå¼•ç”¨çš„ç»„ä»¶éƒ½ä¼šè‡ªåŠ¨æ›´æ–°ï¼š</p>
<ul>
<li>æ–‡æœ¬é¢œè‰²</li>
<li>èƒŒæ™¯é¢œè‰²</li>
<li>è¾¹æ¡†é¢œè‰²</li>
<li>å›¾æ ‡èµ„æº</li>
<li>ç”šè‡³å›¾ç‰‡èµ„æºï¼ˆå¦‚æœæœ‰darkç›®å½•ç‰ˆæœ¬ï¼‰</li>
</ul>
<h3 data-id="heading-9">2.3 é›¶è€¦åˆï¼Œé«˜å†…èš</h3>
<ul>
<li><strong>ä¸šåŠ¡ç»„ä»¶</strong>ï¼šåªå…³å¿ƒ<code>$r('app.color.xxx')</code>ï¼Œä¸å…³å¿ƒå½“å‰ä¸»é¢˜</li>
<li><strong>ä¸»é¢˜ç®¡ç†</strong>ï¼šé›†ä¸­åœ¨<code>ThemeUtils</code>ï¼Œç»Ÿä¸€ç®¡ç†çŠ¶æ€</li>
<li><strong>èµ„æºå®šä¹‰</strong>ï¼šè®¾è®¡å¸ˆå¯ä»¥ç›´æ¥ä¿®æ”¹JSONæ–‡ä»¶</li>
</ul>
<h3 data-id="heading-10">2.4 æŒä¹…åŒ–å­˜å‚¨</h3>
<p>ä½¿ç”¨Preferencesè‡ªåŠ¨ä¿å­˜ç”¨æˆ·é€‰æ‹©ï¼Œä¸‹æ¬¡å¯åŠ¨è‡ªåŠ¨æ¢å¤ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ä¿å­˜ä¸»é¢˜é€‰æ‹©</span>
<span class="hljs-keyword">await</span> preferences.<span class="hljs-title function_">put</span>(<span class="hljs-string">'current_theme'</span>, mode);
<span class="hljs-keyword">await</span> preferences.<span class="hljs-title function_">flush</span>();

<span class="hljs-comment">// è¯»å–ä¸»é¢˜é€‰æ‹©</span>
<span class="hljs-keyword">const</span> theme = <span class="hljs-keyword">await</span> preferences.<span class="hljs-title function_">get</span>(<span class="hljs-string">'current_theme'</span>, <span class="hljs-string">'light'</span>);
</code></pre>
<h2 data-id="heading-11">ä¸‰ã€å¯¹æ¯”å·¥å…·ç±»æ–¹æ¡ˆçš„åŠ£åŠ¿</h2>
<p>å¦‚æœç”¨å·¥å…·ç±»æ–¹æ¡ˆï¼Œä½ éœ€è¦ï¼š</p>
<h3 data-id="heading-12">3.1 ç¹ççš„çŠ¶æ€ç®¡ç†</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// æ¯ä¸ªç»„ä»¶éƒ½éœ€è¦ç›‘å¬ä¸»é¢˜å˜åŒ–</span>
<span class="hljs-meta">@Component</span>
struct <span class="hljs-title class_">MyComponent</span> {
  <span class="hljs-meta">@State</span> <span class="hljs-attr">textColor</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'#000000'</span>;
  
  <span class="hljs-title function_">aboutToAppear</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// ç›‘å¬ä¸»é¢˜å˜åŒ–</span>
    <span class="hljs-title class_">ThemeManager</span>.<span class="hljs-title function_">addListener</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">textColor</span> = <span class="hljs-title class_">ThemeManager</span>.<span class="hljs-title function_">getTextColor</span>();
    });
  }
  
  <span class="hljs-title function_">build</span>(<span class="hljs-params"/>) {
    <span class="hljs-title class_">Text</span>(<span class="hljs-string">'ç¤ºä¾‹'</span>)
      .<span class="hljs-title function_">fontColor</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">textColor</span>)  <span class="hljs-comment">// éœ€è¦çŠ¶æ€å˜é‡</span>
  }
}
</code></pre>
<h3 data-id="heading-13">3.2 æ‰‹åŠ¨æ›´æ–°æ‰€æœ‰ç»„ä»¶</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// åˆ‡æ¢ä¸»é¢˜æ—¶éœ€è¦æ‰‹åŠ¨æ›´æ–°æ‰€æœ‰ç»„ä»¶</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ThemeManager</span> {
  <span class="hljs-keyword">static</span> <span class="hljs-title function_">toggleTheme</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">isDark</span> = !<span class="hljs-variable language_">this</span>.<span class="hljs-property">isDark</span>;
    
    <span class="hljs-comment">// éœ€è¦æ‰‹åŠ¨è§¦å‘æ‰€æœ‰ç»„ä»¶æ›´æ–°</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> component <span class="hljs-keyword">of</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">registeredComponents</span>) {
      component.<span class="hljs-title function_">updateTheme</span>();
    }
  }
}
</code></pre>
<h3 data-id="heading-14">3.3 æ€§èƒ½é—®é¢˜</h3>
<ul>
<li>æ¯æ¬¡åˆ‡æ¢éƒ½è¦é‡æ–°è®¡ç®—æ‰€æœ‰é¢œè‰²</li>
<li>ç»„ä»¶éœ€è¦é¢‘ç¹é‡ç»˜</li>
<li>æ— æ³•åˆ©ç”¨ç³»ç»Ÿçš„ä¼˜åŒ–æœºåˆ¶</li>
</ul>
<h2 data-id="heading-15">å››ã€é«˜çº§åŠŸèƒ½æ‰©å±•</h2>
<h3 data-id="heading-16">4.1 æ·»åŠ è·Ÿéšç³»ç»Ÿé€‰é¡¹</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// åœ¨ThemeUtilsä¸­æ·»åŠ </span>
<span class="hljs-keyword">async</span> <span class="hljs-title function_">setFollowSystem</span>(<span class="hljs-attr">enable</span>: <span class="hljs-built_in">boolean</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt; {
  <span class="hljs-keyword">if</span> (enable) {
    <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setTheme</span>(<span class="hljs-title class_">ThemeMode</span>.<span class="hljs-property">SYSTEM</span>);
    
    <span class="hljs-comment">// ç›‘å¬ç³»ç»Ÿä¸»é¢˜å˜åŒ–</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">appContext</span>.<span class="hljs-title function_">on</span>(<span class="hljs-string">'colorModeChange'</span>, <span class="hljs-function">(<span class="hljs-params">newMode: Configuration.ColorMode</span>) =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç³»ç»Ÿä¸»é¢˜å·²æ”¹å˜:'</span>, newMode);
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">notifyListeners</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">mapSystemMode</span>(newMode));
    });
  }
}

<span class="hljs-keyword">private</span> <span class="hljs-title function_">mapSystemMode</span>(<span class="hljs-attr">mode</span>: <span class="hljs-title class_">Configuration</span>.<span class="hljs-property">ColorMode</span>): <span class="hljs-title class_">ThemeMode</span> {
  <span class="hljs-keyword">switch</span> (mode) {
    <span class="hljs-keyword">case</span> <span class="hljs-title class_">Configuration</span>.<span class="hljs-property">ColorMode</span>.<span class="hljs-property">COLOR_MODE_DARK</span>:
      <span class="hljs-keyword">return</span> <span class="hljs-title class_">ThemeMode</span>.<span class="hljs-property">DARK</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-title class_">Configuration</span>.<span class="hljs-property">ColorMode</span>.<span class="hljs-property">COLOR_MODE_LIGHT</span>:
      <span class="hljs-keyword">return</span> <span class="hljs-title class_">ThemeMode</span>.<span class="hljs-property">LIGHT</span>;
    <span class="hljs-attr">default</span>:
      <span class="hljs-keyword">return</span> <span class="hljs-title class_">ThemeMode</span>.<span class="hljs-property">LIGHT</span>;
  }
}
</code></pre>
<h3 data-id="heading-17">4.2 æ·»åŠ åŠ¨ç”»æ•ˆæœ</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// åœ¨åˆ‡æ¢ä¸»é¢˜æ—¶æ·»åŠ è¿‡æ¸¡åŠ¨ç”»</span>
<span class="hljs-keyword">async</span> <span class="hljs-title function_">toggleThemeWithAnimation</span>(): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt; {
  <span class="hljs-comment">// å…ˆè®¾ç½®åŠé€æ˜</span>
  <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">applyOpacityAnimation</span>();
  
  <span class="hljs-comment">// å»¶è¿Ÿåˆ‡æ¢ä¸»é¢˜</span>
  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-keyword">async</span> () =&gt; {
    <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">toggleTheme</span>();
    
    <span class="hljs-comment">// æ¢å¤ä¸é€æ˜</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">removeOpacityAnimation</span>();
  }, <span class="hljs-number">300</span>);
}
</code></pre>
<h3 data-id="heading-18">4.3 å¤šä¸»é¢˜æ”¯æŒï¼ˆèŠ‚æ—¥ä¸»é¢˜ç­‰ï¼‰</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// æ‰©å±•æ”¯æŒæ›´å¤šä¸»é¢˜</span>
<span class="hljs-keyword">enum</span> <span class="hljs-title class_">ExtendedThemeMode</span> {
  <span class="hljs-variable constant_">LIGHT</span> = <span class="hljs-string">'light'</span>,
  <span class="hljs-variable constant_">DARK</span> = <span class="hljs-string">'dark'</span>,
  <span class="hljs-variable constant_">SYSTEM</span> = <span class="hljs-string">'system'</span>,
  <span class="hljs-variable constant_">FESTIVAL</span> = <span class="hljs-string">'festival'</span>,  <span class="hljs-comment">// èŠ‚æ—¥ä¸»é¢˜</span>
  <span class="hljs-variable constant_">HIGH_CONTRAST</span> = <span class="hljs-string">'high_contrast'</span>  <span class="hljs-comment">// é«˜å¯¹æ¯”åº¦</span>
}

<span class="hljs-comment">// åˆ›å»ºå¯¹åº”çš„èµ„æºç›®å½•</span>
<span class="hljs-comment">// resources/festival/element/color.json</span>
<span class="hljs-comment">// resources/high_contrast/element/color.json</span>
</code></pre>
<h2 data-id="heading-19">äº”ã€å®è·µå»ºè®®</h2>
<h3 data-id="heading-20">5.1 æ–°é¡¹ç›®ï¼šç›´æ¥ä½¿ç”¨èµ„æºé™å®šè¯æ–¹æ¡ˆ</h3>
<ul>
<li>ä»ç¬¬ä¸€å¤©å°±å»ºç«‹<code>base/</code>å’Œ<code>dark/</code>ç›®å½•</li>
<li>æ‰€æœ‰é¢œè‰²ä½¿ç”¨<code>$r('app.color.xxx')</code></li>
<li>ä¸€ä¸ªå¼€å…³æ§åˆ¶å…¨éƒ¨</li>
</ul>
<h3 data-id="heading-21">5.2 è€é¡¹ç›®è¿ç§»ï¼šä¸‰æ­¥èµ°</h3>
<ol>
<li><strong>ç¬¬ä¸€æ­¥</strong>ï¼šåˆ›å»º<code>dark/color.json</code>ï¼Œå¤åˆ¶æ‰€æœ‰é¢œè‰²</li>
<li><strong>ç¬¬äºŒæ­¥</strong>ï¼šé€æ­¥æ›¿æ¢ç¡¬ç¼–ç ä¸ºèµ„æºå¼•ç”¨</li>
<li><strong>ç¬¬ä¸‰æ­¥</strong>ï¼šæ·»åŠ ä¸»é¢˜åˆ‡æ¢å¼€å…³</li>
</ol>
<h3 data-id="heading-22">5.3 è®¾è®¡è§„èŒƒ</h3>
<ol>
<li>ä½¿ç”¨è¯­ä¹‰åŒ–é¢œè‰²åç§°ï¼š<code>primary_text</code>ã€<code>secondary_bg</code></li>
<li>å»ºç«‹é¢œè‰²è®¾è®¡ç³»ç»Ÿæ–‡æ¡£</li>
<li>å®šæœŸåŒæ­¥è®¾è®¡å’Œå¼€å‘çš„é¢œè‰²å€¼</li>
</ol>
<h2 data-id="heading-23">æ€»ç»“</h2>
<p><strong>å¯¹äº"ä¸€ä¸ªå¼€å…³æ§åˆ¶ç™½å¤©/é»‘å¤œæ¨¡å¼"çš„éœ€æ±‚ï¼Œé¸¿è’™çš„èµ„æºé™å®šè¯æ–¹æ¡ˆæ˜¯æœ€ä½³é€‰æ‹©ã€‚</strong></p>
<p>å®ƒæä¾›äº†ï¼š</p>
<ul>
<li>âœ… <strong>ä¸€é”®åˆ‡æ¢</strong>ï¼šä¸€ä¸ªå¼€å…³æ§åˆ¶å…¨å±€</li>
<li>âœ… <strong>è‡ªåŠ¨é€‚é…</strong>ï¼šæ‰€æœ‰ç»„ä»¶è‡ªåŠ¨æ›´æ–°</li>
<li>âœ… <strong>é›¶ä»£ç ä¾µå…¥</strong>ï¼šä¸šåŠ¡ç»„ä»¶æ— éœ€ä¿®æ”¹</li>
<li>âœ… <strong>é«˜æ€§èƒ½</strong>ï¼šç³»ç»Ÿçº§ä¼˜åŒ–</li>
<li>âœ… <strong>æ˜“ç»´æŠ¤</strong>ï¼šé¢œè‰²é›†ä¸­ç®¡ç†</li>
<li>âœ… <strong>å¯æ‰©å±•</strong>ï¼šæ”¯æŒå¤šä¸»é¢˜</li>
</ul>
<p>è€Œå·¥å…·ç±»æ–¹æ¡ˆéœ€è¦ï¼š</p>
<ul>
<li>âŒ æ¯ä¸ªç»„ä»¶ç›‘å¬ä¸»é¢˜å˜åŒ–</li>
<li>âŒ æ‰‹åŠ¨æ›´æ–°æ‰€æœ‰é¢œè‰²</li>
<li>âŒ æ€§èƒ½æŸè€—</li>
<li>âŒ ç»´æŠ¤å›°éš¾</li>
</ul>
<p><strong>é€‰æ‹©èµ„æºé™å®šè¯æ–¹æ¡ˆï¼Œè®©ä½ çš„ä¸»é¢˜åˆ‡æ¢åƒå‘¼å¸ä¸€æ ·è‡ªç„¶ï¼</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[GIS æ•°æ®è½¬æ¢ï¼šä½¿ç”¨ GDAL å°† GeoJSON è½¬æ¢ä¸º Shp æ•°æ®]]></title>    <link>https://juejin.cn/post/7589074117644894243</link>    <guid>https://juejin.cn/post/7589074117644894243</guid>    <pubDate>2025-12-29T13:21:27.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589074117644894243" data-draft-id="7589104492882952244" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="GIS æ•°æ®è½¬æ¢ï¼šä½¿ç”¨ GDAL å°† GeoJSON è½¬æ¢ä¸º Shp æ•°æ®"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-29T13:21:27.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="GISä¹‹è·¯"/> <meta itemprop="url" content="https://juejin.cn/user/4346787284915481"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            GIS æ•°æ®è½¬æ¢ï¼šä½¿ç”¨ GDAL å°† GeoJSON è½¬æ¢ä¸º Shp æ•°æ®
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4346787284915481/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    GISä¹‹è·¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T13:21:27.000Z" title="Mon Dec 29 2025 13:21:27 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<blockquote>
<p>â</p>
<p>GeoJSON ä½œä¸ºä¸€ç§é€šç”¨çš„åœ°ç†æ•°æ®æ ¼å¼ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿åœ°ç”¨äºå…±äº«äº¤æ¢ã€‚åœ¨ GIS å¼€å‘ä¸­ï¼Œç»å¸¸éœ€è¦è¿›è¡Œæ•°æ®çš„è½¬æ¢å¤„ç†ï¼Œå…¶ä¸­å¸¸è§çš„ä¾¿æ˜¯å°† GeoJSON è½¬æ¢ä¸º Shp æ•°æ®è¿›è¡Œå±•ç¤ºã€‚</p>
</blockquote>
<p>åœ¨ä¹‹å‰çš„æ–‡ç« ä¸­è®²äº†å¦‚ä½•ä½¿ç”¨<code>GDAL</code>æˆ–è€…<code>ogr2ogr</code>å·¥å…·å°†<code>txt</code>ä»¥åŠ<code>csv</code>æ–‡æœ¬æ•°æ®è½¬æ¢ä¸º<code>Shp</code>æ ¼å¼ï¼Œæœ¬ç¯‡æ•™ç¨‹åœ¨ä¹‹å‰ä¸€ç³»åˆ—æ–‡ç« çš„åŸºç¡€ä¸Šè®²è§£å¦‚ä½•ä½¿ç”¨<code>GDAL</code>å°†<code>GeoJSON</code>è½¬æ¢ä¸º<code>Shp</code>æ•°æ®ã€‚</p>
<ul>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">GDAL ç®€ä»‹</a></li>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">GDAL ä¸‹è½½å®‰è£…</a></li>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">GDAL å¼€å‘èµ·æ­¥</a></li>
</ul>
<p>å¦‚æœä½ è¿˜æ²¡æœ‰çœ‹è¿‡ï¼Œå»ºè®®ä»ä»¥ä¸Šå†…å®¹å¼€å§‹ã€‚</p>
<h2 data-id="heading-1">1. å¼€å‘ç¯å¢ƒ</h2>
<p>æœ¬æ–‡ä½¿ç”¨å¦‚ä¸‹å¼€å‘ç¯å¢ƒï¼Œä»¥ä¾›å‚è€ƒã€‚</p>
<p>æ—¶é—´ï¼š<code>2025å¹´</code></p>
<p>ç³»ç»Ÿï¼š<code>Windows 11</code></p>
<p>Pythonï¼š<code>3.11.7</code></p>
<p>GDALï¼š<code>3.11.1</code></p>
<h2 data-id="heading-2">2. æ•°æ®å‡†å¤‡</h2>
<p><code>GeoJSON</code>æ˜¯ä¸€ç§ç”¨äºç¼–ç å„ç§åœ°ç†æ•°æ®ç»“æ„çš„æ ¼å¼ï¼Œé‡‡ç”¨<code>JSON</code>æ–¹å¼è¡¨ç¤ºã€‚åœ¨<code>WebGIS</code>å¼€å‘ä¸­ï¼Œè¢«å¹¿æ³›åº”ç”¨äºæ•°æ®ä¼ è¾“å’Œå…±äº«äº¤æ¢ã€‚</p>
<p>æœ‰å…³<code>GeoJSON</code>æ•°æ®çš„è¯¦ç»†ä»‹ç»ï¼Œè¯·å‚è€ƒå¾€æœŸæ–‡ç« ï¼š<strong>GeoJSON æ•°æ®ç®€ä»‹</strong></p>
<p><strong>å¦‚ä¸‹æ˜¯æœ¬æ–‡é€‰å–çš„éƒ¨åˆ†å›½å®¶è¾¹ç•ŒèŒƒå›´çš„GeoJSONæ•°æ®ç»“æ„ï¼š</strong></p>
<pre><code class="hljs language-less" lang="less">{"<span class="hljs-selector-tag">type</span>":"<span class="hljs-selector-tag">FeatureCollection</span>","<span class="hljs-selector-tag">features</span>":<span class="hljs-selector-attr">[{<span class="hljs-string">"type"</span>:<span class="hljs-string">"Feature"</span>,<span class="hljs-string">"id"</span>:<span class="hljs-string">"AFG"</span>,<span class="hljs-string">"properties"</span>:{<span class="hljs-string">"name"</span>:<span class="hljs-string">"Afghanistan"</span>},<span class="hljs-string">"geometry"</span>:{<span class="hljs-string">"type"</span>:<span class="hljs-string">"Polygon"</span>,<span class="hljs-string">"coordinates"</span>:[[[61.210817,35.650072]</span>,<span class="hljs-selector-attr">[62.230651,35.270664]</span>,<span class="hljs-selector-attr">[62.984662,35.404041]</span>,<span class="hljs-selector-attr">[63.193538,35.857166]</span>,<span class="hljs-selector-attr">[63.982896,36.007957]</span>,<span class="hljs-selector-attr">[64.546479,36.312073]</span>,<span class="hljs-selector-attr">[64.746105,37.111818]</span>,<span class="hljs-selector-attr">[65.588948,37.305217]</span>,<span class="hljs-selector-attr">[65.745631,37.661164]</span>,<span class="hljs-selector-attr">[66.217385,37.39379]</span>,<span class="hljs-selector-attr">[66.518607,37.362784]</span>,<span class="hljs-selector-attr">[67.075782,37.356144]</span>,<span class="hljs-selector-attr">[67.83,37.144994]</span>,<span class="hljs-selector-attr">[68.135562,37.023115]</span>,<span class="hljs-selector-attr">[68.859446,37.344336]</span>,<span class="hljs-selector-attr">[69.196273,37.151144]</span>,<span class="hljs-selector-attr">[69.518785,37.608997]</span>,<span class="hljs-selector-attr">[70.116578,37.588223]</span>,<span class="hljs-selector-attr">[70.270574,37.735165]</span>,<span class="hljs-selector-attr">[70.376304,38.138396]</span>,<span class="hljs-selector-attr">[70.806821,38.486282]</span>,<span class="hljs-selector-attr">[71.348131,38.258905]</span>,<span class="hljs-selector-attr">[71.239404,37.953265]</span>,<span class="hljs-selector-attr">[71.541918,37.905774]</span>,<span class="hljs-selector-attr">[71.448693,37.065645]</span>,<span class="hljs-selector-attr">[71.844638,36.738171]</span>,<span class="hljs-selector-attr">[72.193041,36.948288]</span>,<span class="hljs-selector-attr">[72.63689,37.047558]</span>,<span class="hljs-selector-attr">[73.260056,37.495257]</span>,<span class="hljs-selector-attr">[73.948696,37.421566]</span>,<span class="hljs-selector-attr">[74.980002,37.41999]</span>,<span class="hljs-selector-attr">[75.158028,37.133031]</span>,<span class="hljs-selector-attr">[74.575893,37.020841]</span>,<span class="hljs-selector-attr">[74.067552,36.836176]</span>,<span class="hljs-selector-attr">[72.920025,36.720007]</span>,<span class="hljs-selector-attr">[71.846292,36.509942]</span>,<span class="hljs-selector-attr">[71.262348,36.074388]</span>,<span class="hljs-selector-attr">[71.498768,35.650563]</span>,<span class="hljs-selector-attr">[71.613076,35.153203]</span>,<span class="hljs-selector-attr">[71.115019,34.733126]</span>,<span class="hljs-selector-attr">[71.156773,34.348911]</span>,<span class="hljs-selector-attr">[70.881803,33.988856]</span>,<span class="hljs-selector-attr">[69.930543,34.02012]</span>,<span class="hljs-selector-attr">[70.323594,33.358533]</span>,<span class="hljs-selector-attr">[69.687147,33.105499]</span>,<span class="hljs-selector-attr">[69.262522,32.501944]</span>,<span class="hljs-selector-attr">[69.317764,31.901412]</span>,<span class="hljs-selector-attr">[68.926677,31.620189]</span>,<span class="hljs-selector-attr">[68.556932,31.71331]</span>,<span class="hljs-selector-attr">[67.792689,31.58293]</span>,<span class="hljs-selector-attr">[67.683394,31.303154]</span>,<span class="hljs-selector-attr">[66.938891,31.304911]</span>,<span class="hljs-selector-attr">[66.381458,30.738899]</span>,<span class="hljs-selector-attr">[66.346473,29.887943]</span>,<span class="hljs-selector-attr">[65.046862,29.472181]</span>,<span class="hljs-selector-attr">[64.350419,29.560031]</span>,<span class="hljs-selector-attr">[64.148002,29.340819]</span>,<span class="hljs-selector-attr">[63.550261,29.468331]</span>,<span class="hljs-selector-attr">[62.549857,29.318572]</span>,<span class="hljs-selector-attr">[60.874248,29.829239]</span>,<span class="hljs-selector-attr">[61.781222,30.73585]</span>,<span class="hljs-selector-attr">[61.699314,31.379506]</span>,<span class="hljs-selector-attr">[60.941945,31.548075]</span>,<span class="hljs-selector-attr">[60.863655,32.18292]</span>,<span class="hljs-selector-attr">[60.536078,32.981269]</span>,<span class="hljs-selector-attr">[60.9637,33.528832]</span>,<span class="hljs-selector-attr">[60.52843,33.676446]</span>,<span class="hljs-selector-attr">[60.803193,34.404102]</span>,<span class="hljs-selector-attr">[61.210817,35.650072]</span>]]}},
{"<span class="hljs-selector-tag">type</span>":"<span class="hljs-selector-tag">Feature</span>","<span class="hljs-selector-tag">id</span>":"<span class="hljs-selector-tag">AGO</span>","<span class="hljs-selector-tag">properties</span>":{"<span class="hljs-selector-tag">name</span>":"<span class="hljs-selector-tag">Angola</span>"},"<span class="hljs-selector-tag">geometry</span>":{"<span class="hljs-selector-tag">type</span>":"<span class="hljs-selector-tag">MultiPolygon</span>","<span class="hljs-selector-tag">coordinates</span>":<span class="hljs-selector-attr">[[[[16.326528,-5.87747]</span>,<span class="hljs-selector-attr">[16.57318,-6.622645]</span>,<span class="hljs-selector-attr">[16.860191,-7.222298]</span>,<span class="hljs-selector-attr">[17.089996,-7.545689]</span>,<span class="hljs-selector-attr">[17.47297,-8.068551]</span>,<span class="hljs-selector-attr">[18.134222,-7.987678]</span>,<span class="hljs-selector-attr">[18.464176,-7.847014]</span>,<span class="hljs-selector-attr">[19.016752,-7.988246]</span>,<span class="hljs-selector-attr">[19.166613,-7.738184]</span>,<span class="hljs-selector-attr">[19.417502,-7.155429]</span>,<span class="hljs-selector-attr">[20.037723,-7.116361]</span>,<span class="hljs-selector-attr">[20.091622,-6.94309]</span>,<span class="hljs-selector-attr">[20.601823,-6.939318]</span>,<span class="hljs-selector-attr">[20.514748,-7.299606]</span>,<span class="hljs-selector-attr">[21.728111,-7.290872]</span>,<span class="hljs-selector-attr">[21.746456,-7.920085]</span>,<span class="hljs-selector-attr">[21.949131,-8.305901]</span>,<span class="hljs-selector-attr">[21.801801,-8.908707]</span>,<span class="hljs-selector-attr">[21.875182,-9.523708]</span>,<span class="hljs-selector-attr">[22.208753,-9.894796]</span>,<span class="hljs-selector-attr">[22.155268,-11.084801]</span>,<span class="hljs-selector-attr">[22.402798,-10.993075]</span>,<span class="hljs-selector-attr">[22.837345,-11.017622]</span>,<span class="hljs-selector-attr">[23.456791,-10.867863]</span>,<span class="hljs-selector-attr">[23.912215,-10.926826]</span>,<span class="hljs-selector-attr">[24.017894,-11.237298]</span>,<span class="hljs-selector-attr">[23.904154,-11.722282]</span>,<span class="hljs-selector-attr">[24.079905,-12.191297]</span>,<span class="hljs-selector-attr">[23.930922,-12.565848]</span>,<span class="hljs-selector-attr">[24.016137,-12.911046]</span>,<span class="hljs-selector-attr">[21.933886,-12.898437]</span>,<span class="hljs-selector-attr">[21.887843,-16.08031]</span>,<span class="hljs-selector-attr">[22.562478,-16.898451]</span>,<span class="hljs-selector-attr">[23.215048,-17.523116]</span>,<span class="hljs-selector-attr">[21.377176,-17.930636]</span>,<span class="hljs-selector-attr">[18.956187,-17.789095]</span>,<span class="hljs-selector-attr">[18.263309,-17.309951]</span>,<span class="hljs-selector-attr">[14.209707,-17.353101]</span>,<span class="hljs-selector-attr">[14.058501,-17.423381]</span>,<span class="hljs-selector-attr">[13.462362,-16.971212]</span>,<span class="hljs-selector-attr">[12.814081,-16.941343]</span>,<span class="hljs-selector-attr">[12.215461,-17.111668]</span>,<span class="hljs-selector-attr">[11.734199,-17.301889]</span>,<span class="hljs-selector-attr">[11.640096,-16.673142]</span>,<span class="hljs-selector-attr">[11.778537,-15.793816]</span>,<span class="hljs-selector-attr">[12.123581,-14.878316]</span>,<span class="hljs-selector-attr">[12.175619,-14.449144]</span>,<span class="hljs-selector-attr">[12.500095,-13.5477]</span>,<span class="hljs-selector-attr">[12.738479,-13.137906]</span>,<span class="hljs-selector-attr">[13.312914,-12.48363]</span>,<span class="hljs-selector-attr">[13.633721,-12.038645]</span>,<span class="hljs-selector-attr">[13.738728,-11.297863]</span>,<span class="hljs-selector-attr">[13.686379,-10.731076]</span>,<span class="hljs-selector-attr">[13.387328,-10.373578]</span>,<span class="hljs-selector-attr">[13.120988,-9.766897]</span>,<span class="hljs-selector-attr">[12.87537,-9.166934]</span>,<span class="hljs-selector-attr">[12.929061,-8.959091]</span>,<span class="hljs-selector-attr">[13.236433,-8.562629]</span>,<span class="hljs-selector-attr">[12.93304,-7.596539]</span>,<span class="hljs-selector-attr">[12.728298,-6.927122]</span>,<span class="hljs-selector-attr">[12.227347,-6.294448]</span>,<span class="hljs-selector-attr">[12.322432,-6.100092]</span>,<span class="hljs-selector-attr">[12.735171,-5.965682]</span>,<span class="hljs-selector-attr">[13.024869,-5.984389]</span>,<span class="hljs-selector-attr">[13.375597,-5.864241]</span>,<span class="hljs-selector-attr">[16.326528,-5.87747]</span>]],<span class="hljs-selector-attr">[[[12.436688,-5.684304]</span>,<span class="hljs-selector-attr">[12.182337,-5.789931]</span>,<span class="hljs-selector-attr">[11.914963,-5.037987]</span>,<span class="hljs-selector-attr">[12.318608,-4.60623]</span>,<span class="hljs-selector-attr">[12.62076,-4.438023]</span>,<span class="hljs-selector-attr">[12.995517,-4.781103]</span>,<span class="hljs-selector-attr">[12.631612,-4.991271]</span>,<span class="hljs-selector-attr">[12.468004,-5.248362]</span>,<span class="hljs-selector-attr">[12.436688,-5.684304]</span>]]]}},
{"<span class="hljs-selector-tag">type</span>":"<span class="hljs-selector-tag">Feature</span>","<span class="hljs-selector-tag">id</span>":"<span class="hljs-selector-tag">ALB</span>","<span class="hljs-selector-tag">properties</span>":{"<span class="hljs-selector-tag">name</span>":"<span class="hljs-selector-tag">Albania</span>"},"<span class="hljs-selector-tag">geometry</span>":{"<span class="hljs-selector-tag">type</span>":"<span class="hljs-selector-tag">Polygon</span>","<span class="hljs-selector-tag">coordinates</span>":<span class="hljs-selector-attr">[[[20.590247,41.855404]</span>,<span class="hljs-selector-attr">[20.463175,41.515089]</span>,<span class="hljs-selector-attr">[20.605182,41.086226]</span>,<span class="hljs-selector-attr">[21.02004,40.842727]</span>,<span class="hljs-selector-attr">[20.99999,40.580004]</span>,<span class="hljs-selector-attr">[20.674997,40.435]</span>,<span class="hljs-selector-attr">[20.615,40.110007]</span>,<span class="hljs-selector-attr">[20.150016,39.624998]</span>,<span class="hljs-selector-attr">[19.98,39.694993]</span>,<span class="hljs-selector-attr">[19.960002,39.915006]</span>,<span class="hljs-selector-attr">[19.406082,40.250773]</span>,<span class="hljs-selector-attr">[19.319059,40.72723]</span>,<span class="hljs-selector-attr">[19.40355,41.409566]</span>,<span class="hljs-selector-attr">[19.540027,41.719986]</span>,<span class="hljs-selector-attr">[19.371769,41.877548]</span>,<span class="hljs-selector-attr">[19.304486,42.195745]</span>,<span class="hljs-selector-attr">[19.738051,42.688247]</span>,<span class="hljs-selector-attr">[19.801613,42.500093]</span>,<span class="hljs-selector-attr">[20.0707,42.58863]</span>,<span class="hljs-selector-attr">[20.283755,42.32026]</span>,<span class="hljs-selector-attr">[20.52295,42.21787]</span>,<span class="hljs-selector-attr">[20.590247,41.855404]</span>]]}},
{"<span class="hljs-selector-tag">type</span>":"<span class="hljs-selector-tag">Feature</span>","<span class="hljs-selector-tag">id</span>":"<span class="hljs-selector-tag">ARE</span>","<span class="hljs-selector-tag">properties</span>":{"<span class="hljs-selector-tag">name</span>":"<span class="hljs-selector-tag">United</span>Â <span class="hljs-selector-tag">Arab</span>Â <span class="hljs-selector-tag">Emirates</span>"},"<span class="hljs-selector-tag">geometry</span>":{"<span class="hljs-selector-tag">type</span>":"<span class="hljs-selector-tag">Polygon</span>","<span class="hljs-selector-tag">coordinates</span>":<span class="hljs-selector-attr">[[[51.579519,24.245497]</span>,<span class="hljs-selector-attr">[51.757441,24.294073]</span>,<span class="hljs-selector-attr">[51.794389,24.019826]</span>,<span class="hljs-selector-attr">[52.577081,24.177439]</span>,<span class="hljs-selector-attr">[53.404007,24.151317]</span>,<span class="hljs-selector-attr">[54.008001,24.121758]</span>,<span class="hljs-selector-attr">[54.693024,24.797892]</span>,<span class="hljs-selector-attr">[55.439025,25.439145]</span>,<span class="hljs-selector-attr">[56.070821,26.055464]</span>,<span class="hljs-selector-attr">[56.261042,25.714606]</span>,<span class="hljs-selector-attr">[56.396847,24.924732]</span>,<span class="hljs-selector-attr">[55.886233,24.920831]</span>,<span class="hljs-selector-attr">[55.804119,24.269604]</span>,<span class="hljs-selector-attr">[55.981214,24.130543]</span>,<span class="hljs-selector-attr">[55.528632,23.933604]</span>,<span class="hljs-selector-attr">[55.525841,23.524869]</span>,<span class="hljs-selector-attr">[55.234489,23.110993]</span>,<span class="hljs-selector-attr">[55.208341,22.70833]</span>,<span class="hljs-selector-attr">[55.006803,22.496948]</span>,<span class="hljs-selector-attr">[52.000733,23.001154]</span>,<span class="hljs-selector-attr">[51.617708,24.014219]</span>,<span class="hljs-selector-attr">[51.579519,24.245497]</span>]]}},
{"<span class="hljs-selector-tag">type</span>":"<span class="hljs-selector-tag">Feature</span>","<span class="hljs-selector-tag">id</span>":"<span class="hljs-selector-tag">ARG</span>","<span class="hljs-selector-tag">properties</span>":{"<span class="hljs-selector-tag">name</span>":"<span class="hljs-selector-tag">Argentina</span>"},"<span class="hljs-selector-tag">geometry</span>":{"<span class="hljs-selector-tag">type</span>":"<span class="hljs-selector-tag">MultiPolygon</span>","<span class="hljs-selector-tag">coordinates</span>":<span class="hljs-selector-attr">[[[[-65.5,-55.2]</span>,<span class="hljs-selector-attr">[-66.45,-55.25]</span>,<span class="hljs-selector-attr">[-66.95992,-54.89681]</span>,<span class="hljs-selector-attr">[-67.56244,-54.87001]</span>,<span class="hljs-selector-attr">[-68.63335,-54.8695]</span>,<span class="hljs-selector-attr">[-68.63401,-52.63637]</span>,<span class="hljs-selector-attr">[-68.25,-53.1]</span>,<span class="hljs-selector-attr">[-67.75,-53.85]</span>,<span class="hljs-selector-attr">[-66.45,-54.45]</span>,<span class="hljs-selector-attr">[-65.05,-54.7]</span>,<span class="hljs-selector-attr">[-65.5,-55.2]</span>]],<span class="hljs-selector-attr">[[[-64.964892,-22.075862]</span>,<span class="hljs-selector-attr">[-64.377021,-22.798091]</span>,<span class="hljs-selector-attr">[-63.986838,-21.993644]</span>,<span class="hljs-selector-attr">[-62.846468,-22.034985]</span>,<span class="hljs-selector-attr">[-62.685057,-22.249029]</span>,<span class="hljs-selector-attr">[-60.846565,-23.880713]</span>,<span class="hljs-selector-attr">[-60.028966,-24.032796]</span>,<span class="hljs-selector-attr">[-58.807128,-24.771459]</span>,<span class="hljs-selector-attr">[-57.777217,-25.16234]</span>,<span class="hljs-selector-attr">[-57.63366,-25.603657]</span>,<span class="hljs-selector-attr">[-58.618174,-27.123719]</span>,<span class="hljs-selector-attr">[-57.60976,-27.395899]</span>,<span class="hljs-selector-attr">[-56.486702,-27.548499]</span>,<span class="hljs-selector-attr">[-55.695846,-27.387837]</span>,<span class="hljs-selector-attr">[-54.788795,-26.621786]</span>,<span class="hljs-selector-attr">[-54.625291,-25.739255]</span>,<span class="hljs-selector-attr">[-54.13005,-25.547639]</span>,<span class="hljs-selector-attr">[-53.628349,-26.124865]</span>,<span class="hljs-selector-attr">[-53.648735,-26.923473]</span>,<span class="hljs-selector-attr">[-54.490725,-27.474757]</span>,<span class="hljs-selector-attr">[-55.162286,-27.881915]</span>,<span class="hljs-selector-attr">[-56.2909,-28.852761]</span>,<span class="hljs-selector-attr">[-57.625133,-30.216295]</span>,<span class="hljs-selector-attr">[-57.874937,-31.016556]</span>,<span class="hljs-selector-attr">[-58.14244,-32.044504]</span>,<span class="hljs-selector-attr">[-58.132648,-33.040567]</span>,<span class="hljs-selector-attr">[-58.349611,-33.263189]</span>,<span class="hljs-selector-attr">[-58.427074,-33.909454]</span>,<span class="hljs-selector-attr">[-58.495442,-34.43149]</span>,<span class="hljs-selector-attr">[-57.22583,-35.288027]</span>,<span class="hljs-selector-attr">[-57.362359,-35.97739]</span>,<span class="hljs-selector-attr">[-56.737487,-36.413126]</span>,<span class="hljs-selector-attr">[-56.788285,-36.901572]</span>,<span class="hljs-selector-attr">[-57.749157,-38.183871]</span>,<span class="hljs-selector-attr">[-59.231857,-38.72022]</span>,<span class="hljs-selector-attr">[-61.237445,-38.928425]</span>,<span class="hljs-selector-attr">[-62.335957,-38.827707]</span>,<span class="hljs-selector-attr">[-62.125763,-39.424105]</span>,<span class="hljs-selector-attr">[-62.330531,-40.172586]</span>,<span class="hljs-selector-attr">[-62.145994,-40.676897]</span>,<span class="hljs-selector-attr">[-62.745803,-41.028761]</span>,<span class="hljs-selector-attr">[-63.770495,-41.166789]</span>,<span class="hljs-selector-attr">[-64.73209,-40.802677]</span>,<span class="hljs-selector-attr">[-65.118035,-41.064315]</span>,<span class="hljs-selector-attr">[-64.978561,-42.058001]</span>,<span class="hljs-selector-attr">[-64.303408,-42.359016]</span>,<span class="hljs-selector-attr">[-63.755948,-42.043687]</span>,<span class="hljs-selector-attr">[-63.458059,-42.563138]</span>,<span class="hljs-selector-attr">[-64.378804,-42.873558]</span>,<span class="hljs-selector-attr">[-65.181804,-43.495381]</span>,<span class="hljs-selector-attr">[-65.328823,-44.501366]</span>,<span class="hljs-selector-attr">[-65.565269,-45.036786]</span>,<span class="hljs-selector-attr">[-66.509966,-45.039628]</span>,<span class="hljs-selector-attr">[-67.293794,-45.551896]</span>,<span class="hljs-selector-attr">[-67.580546,-46.301773]</span>,<span class="hljs-selector-attr">[-66.597066,-47.033925]</span>,<span class="hljs-selector-attr">[-65.641027,-47.236135]</span>,<span class="hljs-selector-attr">[-65.985088,-48.133289]</span>,<span class="hljs-selector-attr">[-67.166179,-48.697337]</span>,<span class="hljs-selector-attr">[-67.816088,-49.869669]</span>,<span class="hljs-selector-attr">[-68.728745,-50.264218]</span>,<span class="hljs-selector-attr">[-69.138539,-50.73251]</span>,<span class="hljs-selector-attr">[-68.815561,-51.771104]</span>,<span class="hljs-selector-attr">[-68.149995,-52.349983]</span>,<span class="hljs-selector-attr">[-68.571545,-52.299444]</span>,<span class="hljs-selector-attr">[-69.498362,-52.142761]</span>,<span class="hljs-selector-attr">[-71.914804,-52.009022]</span>,<span class="hljs-selector-attr">[-72.329404,-51.425956]</span>,<span class="hljs-selector-attr">[-72.309974,-50.67701]</span>,<span class="hljs-selector-attr">[-72.975747,-50.74145]</span>,<span class="hljs-selector-attr">[-73.328051,-50.378785]</span>,<span class="hljs-selector-attr">[-73.415436,-49.318436]</span>,<span class="hljs-selector-attr">[-72.648247,-48.878618]</span>,<span class="hljs-selector-attr">[-72.331161,-48.244238]</span>,<span class="hljs-selector-attr">[-72.447355,-47.738533]</span>,<span class="hljs-selector-attr">[-71.917258,-46.884838]</span>,<span class="hljs-selector-attr">[-71.552009,-45.560733]</span>,<span class="hljs-selector-attr">[-71.659316,-44.973689]</span>,<span class="hljs-selector-attr">[-71.222779,-44.784243]</span>,<span class="hljs-selector-attr">[-71.329801,-44.407522]</span>,<span class="hljs-selector-attr">[-71.793623,-44.207172]</span>,<span class="hljs-selector-attr">[-71.464056,-43.787611]</span>,<span class="hljs-selector-attr">[-71.915424,-43.408565]</span>,<span class="hljs-selector-attr">[-72.148898,-42.254888]</span>,<span class="hljs-selector-attr">[-71.746804,-42.051386]</span>,<span class="hljs-selector-attr">[-71.915734,-40.832339]</span>,<span class="hljs-selector-attr">[-71.680761,-39.808164]</span>,<span class="hljs-selector-attr">[-71.413517,-38.916022]</span>,<span class="hljs-selector-attr">[-70.814664,-38.552995]</span>,<span class="hljs-selector-attr">[-71.118625,-37.576827]</span>,<span class="hljs-selector-attr">[-71.121881,-36.658124]</span>,<span class="hljs-selector-attr">[-70.364769,-36.005089]</span>,<span class="hljs-selector-attr">[-70.388049,-35.169688]</span>,<span class="hljs-selector-attr">[-69.817309,-34.193571]</span>,<span class="hljs-selector-attr">[-69.814777,-33.273886]</span>,<span class="hljs-selector-attr">[-70.074399,-33.09121]</span>,<span class="hljs-selector-attr">[-70.535069,-31.36501]</span>,<span class="hljs-selector-attr">[-69.919008,-30.336339]</span>,<span class="hljs-selector-attr">[-70.01355,-29.367923]</span>,<span class="hljs-selector-attr">[-69.65613,-28.459141]</span>,<span class="hljs-selector-attr">[-69.001235,-27.521214]</span>,<span class="hljs-selector-attr">[-68.295542,-26.89934]</span>,<span class="hljs-selector-attr">[-68.5948,-26.506909]</span>,<span class="hljs-selector-attr">[-68.386001,-26.185016]</span>,<span class="hljs-selector-attr">[-68.417653,-24.518555]</span>,<span class="hljs-selector-attr">[-67.328443,-24.025303]</span>,<span class="hljs-selector-attr">[-66.985234,-22.986349]</span>,<span class="hljs-selector-attr">[-67.106674,-22.735925]</span>,<span class="hljs-selector-attr">[-66.273339,-21.83231]</span>,<span class="hljs-selector-attr">[-64.964892,-22.075862]</span>]]]}},
{"<span class="hljs-selector-tag">type</span>":"<span class="hljs-selector-tag">Feature</span>","<span class="hljs-selector-tag">id</span>":"<span class="hljs-selector-tag">ARM</span>","<span class="hljs-selector-tag">properties</span>":{"<span class="hljs-selector-tag">name</span>":"<span class="hljs-selector-tag">Armenia</span>"},"<span class="hljs-selector-tag">geometry</span>":{"<span class="hljs-selector-tag">type</span>":"<span class="hljs-selector-tag">Polygon</span>","<span class="hljs-selector-tag">coordinates</span>":<span class="hljs-selector-attr">[[[43.582746,41.092143]</span>,<span class="hljs-selector-attr">[44.97248,41.248129]</span>,<span class="hljs-selector-attr">[45.179496,40.985354]</span>,<span class="hljs-selector-attr">[45.560351,40.81229]</span>,<span class="hljs-selector-attr">[45.359175,40.561504]</span>,<span class="hljs-selector-attr">[45.891907,40.218476]</span>,<span class="hljs-selector-attr">[45.610012,39.899994]</span>,<span class="hljs-selector-attr">[46.034534,39.628021]</span>,<span class="hljs-selector-attr">[46.483499,39.464155]</span>,<span class="hljs-selector-attr">[46.50572,38.770605]</span>,<span class="hljs-selector-attr">[46.143623,38.741201]</span>,<span class="hljs-selector-attr">[45.735379,39.319719]</span>,<span class="hljs-selector-attr">[45.739978,39.473999]</span>,<span class="hljs-selector-attr">[45.298145,39.471751]</span>,<span class="hljs-selector-attr">[45.001987,39.740004]</span>,<span class="hljs-selector-attr">[44.79399,39.713003]</span>,<span class="hljs-selector-attr">[44.400009,40.005]</span>,<span class="hljs-selector-attr">[43.656436,40.253564]</span>,<span class="hljs-selector-attr">[43.752658,40.740201]</span>,<span class="hljs-selector-attr">[43.582746,41.092143]</span>]]}},
{"<span class="hljs-selector-tag">type</span>":"<span class="hljs-selector-tag">Feature</span>","<span class="hljs-selector-tag">id</span>":"<span class="hljs-selector-tag">ATA</span>","<span class="hljs-selector-tag">properties</span>":{"<span class="hljs-selector-tag">name</span>":"<span class="hljs-selector-tag">Antarctica</span>"},"<span class="hljs-selector-tag">geometry</span>":{"<span class="hljs-selector-tag">type</span>":"<span class="hljs-selector-tag">MultiPolygon</span>","<span class="hljs-selector-tag">coordinates</span>":<span class="hljs-selector-attr">[[[[-59.572095,-80.040179]</span>,<span class="hljs-selector-attr">[-59.865849,-80.549657]</span>,<span class="hljs-selector-attr">[-60.159656,-81.000327]</span>,<span class="hljs-selector-attr">[-62.255393,-80.863178]</span>,<span class="hljs-selector-attr">[-64.488125,-80.921934]</span>,<span class="hljs-selector-attr">[-65.741666,-80.588827]</span>,<span class="hljs-selector-attr">[-65.741666,-80.549657]</span>,<span class="hljs-selector-attr">[-66.290031,-80.255773]</span>,<span class="hljs-selector-attr">[-64.037688,-80.294944]</span>,<span class="hljs-selector-attr">[-61.883246,-80.39287]</span>,<span class="hljs-selector-attr">[-61.138976,-79.981371]</span>,<span class="hljs-selector-attr">[-60.610119,-79.628679]</span>,<span class="hljs-selector-attr">[-59.572095,-80.040179]</span>]],<span class="hljs-selector-attr">[[[-159.208184,-79.497059]</span>,<span class="hljs-selector-attr">[-161.127601,-79.634209]</span>,<span class="hljs-selector-attr">[-162.439847,-79.281465]</span>,<span class="hljs-selector-attr">[-163.027408,-78.928774]</span>,<span class="hljs-selector-attr">[-163.066604,-78.869966]</span>,<span class="hljs-selector-attr">[-163.712896,-78.595667]</span>,<span class="hljs-selector-attr">[-163.712896,-78.595667]</span>,<span class="hljs-selector-attr">[-163.105801,-78.223338]</span>,<span class="hljs-selector-attr">[-161.245113,-78.380176]</span>,<span class="hljs-selector-attr">[-160.246208,-78.693645]</span>,<span class="hljs-selector-attr">[-159.482405,-79.046338]</span>,<span class="hljs-selector-attr">[-159.208184,-79.497059]</span>]],<span class="hljs-selector-attr">[[[-45.154758,-78.04707]</span>,<span class="hljs-selector-attr">[-43.920828,-78.478103]</span>,<span class="hljs-selector-attr">[-43.48995,-79.08556]</span>,<span class="hljs-selector-attr">[-43.372438,-79.516645]</span>,<span class="hljs-selector-attr">[-43.333267,-80.026123]</span>,<span class="hljs-selector-attr">[-44.880537,-80.339644]</span>,<span class="hljs-selector-attr">[-46.506174,-80.594357]</span>,<span class="hljs-selector-attr">[-48.386421,-80.829485]</span>,<span class="hljs-selector-attr">[-50.482107,-81.025442]</span>,<span class="hljs-selector-attr">[-52.851988,-80.966685]</span>,<span class="hljs-selector-attr">[-54.164259,-80.633528]</span>,<span class="hljs-selector-attr">[-53.987991,-80.222028]</span>,<span class="hljs-selector-attr">[-51.853134,-79.94773]</span>,<span class="hljs-selector-attr">[-50.991326,-79.614623]</span>,<span class="hljs-selector-attr">[-50.364595,-79.183487]</span>,<span class="hljs-selector-attr">[-49.914131,-78.811209]</span>,<span class="hljs-selector-attr">[-49.306959,-78.458569]</span>,<span class="hljs-selector-attr">[-48.660616,-78.047018]</span>,<span class="hljs-selector-attr">[-48.660616,-78.047019]</span>,<span class="hljs-selector-attr">[-48.151396,-78.04707]</span>,<span class="hljs-selector-attr">[-46.662857,-77.831476]</span>,<span class="hljs-selector-attr">[-45.154758,-78.04707]</span>]],<span class="hljs-selector-attr">[[[-121.211511,-73.50099]</span>,<span class="hljs-selector-attr">[-119.918851,-73.657725]</span>,<span class="hljs-selector-attr">[-118.724143,-73.481353]</span>,<span class="hljs-selector-attr">[-119.292119,-73.834097]</span>,<span class="hljs-selector-attr">[-120.232217,-74.08881]</span>,<span class="hljs-selector-attr">[-121.62283,-74.010468]</span>,<span class="hljs-selector-attr">[-122.621735,-73.657778]</span>,<span class="hljs-selector-attr">[-122.621735,-73.657777]</span>,<span class="hljs-selector-attr">[-122.406245,-73.324619]</span>,<span class="hljs-selector-attr">[-121.211511,-73.50099]</span>]],<span class="hljs-selector-attr">[[[-125.559566,-73.481353]</span>,<span class="hljs-selector-attr">[-124.031882,-73.873268]</span>,<span class="hljs-selector-attr">[-124.619469,-73.834097]</span>,<span class="hljs-selector-attr">[-125.912181,-73.736118]</span>,<span class="hljs-selector-attr">[-127.28313,-73.461769]</span>,<span class="hljs-selector-attr">[-127.28313,-73.461768]</span>,<span class="hljs-selector-attr">[-126.558472,-73.246226]</span>,<span class="hljs-selector-attr">[-125.559566,-73.481353]</span>]],<span class="hljs-selector-attr">[[[-98.98155,-71.933334]</span>,<span class="hljs-selector-attr">[-97.884743,-72.070535]</span>,<span class="hljs-selector-attr">[-96.787937,-71.952971]</span>,<span class="hljs-selector-attr">[-96.20035,-72.521205]</span>,<span class="hljs-selector-attr">[-96.983765,-72.442864]</span>,<span class="hljs-selector-attr">[-98.198083,-72.482035]</span>,<span class="hljs-selector-attr">[-99.432013,-72.442864]</span>,<span class="hljs-selector-attr">[-100.783455,-72.50162]</span>,<span class="hljs-selector-attr">[-101.801868,-72.305663]</span>,<span class="hljs-selector-attr">[-102.330725,-71.894164]</span>,<span class="hljs-selector-attr">[-102.330725,-71.894164]</span>,<span class="hljs-selector-attr">[-101.703967,-71.717792]</span>,<span class="hljs-selector-attr">[-100.430919,-71.854993]</span>,<span class="hljs-selector-attr">[-98.98155,-71.933334]</span>]],<span class="hljs-selector-attr">[[[-68.451346,-70.955823]</span>,<span class="hljs-selector-attr">[-68.333834,-71.406493]</span>,<span class="hljs-selector-attr">[-68.510128,-71.798407]</span>,<span class="hljs-selector-attr">[-68.784297,-72.170736]</span>,<span class="hljs-selector-attr">[-69.959471,-72.307885]</span>,<span class="hljs-selector-attr">[-71.075889,-72.503842]</span>,<span class="hljs-selector-attr">[-72.388134,-72.484257]</span>,<span class="hljs-selector-attr">[-71.8985,-72.092343]</span>,<span class="hljs-selector-attr">[-73.073622,-72.229492]</span>,<span class="hljs-selector-attr">[-74.19004,-72.366693]</span>,<span class="hljs-selector-attr">[-74.953895,-72.072757]</span>,<span class="hljs-selector-attr">[-75.012625,-71.661258]</span>,<span class="hljs-selector-attr">[-73.915819,-71.269345]</span>,<span class="hljs-selector-attr">[-73.915819,-71.269344]</span>,<span class="hljs-selector-attr">[-73.230331,-71.15178]</span>,<span class="hljs-selector-attr">[-72.074717,-71.190951]</span>,<span class="hljs-selector-attr">[-71.780962,-70.681473]</span>,<span class="hljs-selector-attr">[-71.72218,-70.309196]</span>,<span class="hljs-selector-attr">[-71.741791,-69.505782]</span>,<span class="hljs-selector-attr">[-71.173815,-69.035475]</span>,<span class="hljs-selector-attr">[-70.253252,-68.87874]</span>,<span class="hljs-selector-attr">[-69.724447,-69.251017]</span>,<span class="hljs-selector-attr">[-69.489422,-69.623346]</span>,<span class="hljs-selector-attr">[-69.058518,-70.074016]</span>,<span class="hljs-selector-attr">[-68.725541,-70.505153]</span>,<span class="hljs-selector-attr">[-68.451346,-70.955823]</span>]],<span class="hljs-selector-attr">[[[-58.614143,-64.152467]</span>,<span class="hljs-selector-attr">[-59.045073,-64.36801]</span>,<span class="hljs-selector-attr">[-59.789342,-64.211223]</span>,<span class="hljs-selector-attr">[-60.611928,-64.309202]</span>,<span class="hljs-selector-attr">[-61.297416,-64.54433]</span>,<span class="hljs-selector-attr">[-62.0221,-64.799094]</span>,<span class="hljs-selector-attr">[-62.51176,-65.09303]</span>,<span class="hljs-selector-attr">[-62.648858,-65.484942]</span>,<span class="hljs-selector-attr">[-62.590128,-65.857219]</span>,<span class="hljs-selector-attr">[-62.120079,-66.190326]</span>,<span class="hljs-selector-attr">[-62.805567,-66.425505]</span>,<span class="hljs-selector-attr">[-63.74569,-66.503847]</span>,<span class="hljs-selector-attr">[-64.294106,-66.837004]</span>,<span class="hljs-selector-attr">[-64.881693,-67.150474]</span>,<span class="hljs-selector-attr">[-65.508425,-67.58161]</span>,<span class="hljs-selector-attr">[-65.665082,-67.953887]</span>,<span class="hljs-selector-attr">[-65.312545,-68.365335]</span>,<span class="hljs-selector-attr">[-64.783715,-68.678908]</span>,<span class="hljs-selector-attr">[-63.961103,-68.913984]</span>,<span class="hljs-selector-attr">[-63.1973,-69.227556]</span>,<span class="hljs-selector-attr">[-62.785955,-69.619419]</span>,<span class="hljs-selector-attr">[-62.570516,-69.991747]</span>,<span class="hljs-selector-attr">[-62.276736,-70.383661]</span>,<span class="hljs-selector-attr">[-61.806661,-70.716768]</span>,<span class="hljs-selector-attr">[-61.512906,-71.089045]</span>,<span class="hljs-selector-attr">[-61.375809,-72.010074]</span>,<span class="hljs-selector-attr">[-61.081977,-72.382351]</span>,<span class="hljs-selector-attr">[-61.003661,-72.774265]</span>,<span class="hljs-selector-attr">[-60.690269,-73.166179]</span>,<span class="hljs-selector-attr">[-60.827367,-73.695242]</span>,<span class="hljs-selector-attr">[-61.375809,-74.106742]</span>,<span class="hljs-selector-attr">[-61.96337,-74.439848]</span>,<span class="hljs-selector-attr">[-63.295201,-74.576997]</span>,<span class="hljs-selector-attr">[-63.74569,-74.92974]</span>,<span class="hljs-selector-attr">[-64.352836,-75.262847]</span>,<span class="hljs-selector-attr">[-65.860987,-75.635124]</span>,<span class="hljs-selector-attr">[-67.192818,-75.79191]</span>,<span class="hljs-selector-attr">[-68.446282,-76.007452]</span>,<span class="hljs-selector-attr">[-69.797724,-76.222995]</span>,<span class="hljs-selector-attr">[-70.600724,-76.634494]</span>,<span class="hljs-selector-attr">[-72.206776,-76.673665]</span>,<span class="hljs-selector-attr">[-73.969536,-76.634494]</span>,<span class="hljs-selector-attr">[-75.555977,-76.712887]</span>,<span class="hljs-selector-attr">[-77.24037,-76.712887]</span>,<span class="hljs-selector-attr">[-76.926979,-77.104802]</span>,<span class="hljs-selector-attr">[-75.399294,-77.28107]</span>,<span class="hljs-selector-attr">[-74.282876,-77.55542]</span>,<span class="hljs-selector-attr">[-73.656119,-77.908112]</span>,<span class="hljs-selector-attr">[-74.772536,-78.221633]</span>,<span class="hljs-selector-attr">[-76.4961,-78.123654]</span>,<span class="hljs-selector-attr">[-77.925858,-78.378419]</span>,<span class="hljs-selector-attr">[-77.984666,-78.789918]</span>,<span class="hljs-selector-attr">[-78.023785,-79.181833]</span>,<span class="hljs-selector-attr">[-76.848637,-79.514939]</span>,<span class="hljs-selector-attr">[-76.633224,-79.887216]</span>,<span class="hljs-selector-attr">[-75.360097,-80.259545]</span>,<span class="hljs-selector-attr">[-73.244852,-80.416331]</span>,<span class="hljs-selector-attr">[-71.442946,-80.69063]</span>,<span class="hljs-selector-attr">[-70.013163,-81.004151]</span>,<span class="hljs-selector-attr">[-68.191646,-81.317672]</span>,<span class="hljs-selector-attr">[-65.704279,-81.474458]</span>,<span class="hljs-selector-attr">[-63.25603,-81.748757]</span>,<span class="hljs-selector-attr">[-61.552026,-82.042692]</span>,<span class="hljs-selector-attr">[-59.691416,-82.37585]</span>,<span class="hljs-selector-attr">[-58.712121,-82.846106]</span>,<span class="hljs-selector-attr">[-58.222487,-83.218434]</span>,<span class="hljs-selector-attr">[-57.008117,-82.865691]</span>,<span class="hljs-selector-attr">[-55.362894,-82.571755]</span>,<span class="hljs-selector-attr">[-53.619771,-82.258235]</span>,<span class="hljs-selector-attr">[-51.543644,-82.003521]</span>,<span class="hljs-selector-attr">[-49.76135,-81.729171]</span>,<span class="hljs-selector-attr">[-47.273931,-81.709586]</span>,<span class="hljs-selector-attr">[-44.825708,-81.846735]</span>,<span class="hljs-selector-attr">[-42.808363,-82.081915]</span>,<span class="hljs-selector-attr">[-42.16202,-81.65083]</span>,<span class="hljs-selector-attr">[-40.771433,-81.356894]</span>,<span class="hljs-selector-attr">[-38.244818,-81.337309]</span>,<span class="hljs-selector-attr">[-36.26667,-81.121715]</span>,<span class="hljs-selector-attr">[-34.386397,-80.906172]</span>,<span class="hljs-selector-attr">[-32.310296,-80.769023]</span>,<span class="hljs-selector-attr">[-30.097098,-80.592651]</span>,<span class="hljs-selector-attr">[-28.549802,-80.337938]</span>,<span class="hljs-selector-attr">[-29.254901,-79.985195]</span>,<span class="hljs-selector-attr">[-29.685805,-79.632503]</span>,<span class="hljs-selector-attr">[-29.685805,-79.260226]</span>,<span class="hljs-selector-attr">[-31.624808,-79.299397]</span>,<span class="hljs-selector-attr">[-33.681324,-79.456132]</span>,<span class="hljs-selector-attr">[-35.639912,-79.456132]</span>,<span class="hljs-selector-attr">[-35.914107,-79.083855]</span>,<span class="hljs-selector-attr">[-35.77701,-78.339248]</span>,<span class="hljs-selector-attr">[-35.326546,-78.123654]</span>,<span class="hljs-selector-attr">[-33.896763,-77.888526]</span>,<span class="hljs-selector-attr">[-32.212369,-77.65345]</span>,<span class="hljs-selector-attr">[-30.998051,-77.359515]</span>,<span class="hljs-selector-attr">[-29.783732,-77.065579]</span>,<span class="hljs-selector-attr">[-28.882779,-76.673665]</span>,<span class="hljs-selector-attr">[-27.511752,-76.497345]</span>,<span class="hljs-selector-attr">[-26.160336,-76.360144]</span>,<span class="hljs-selector-attr">[-25.474822,-76.281803]</span>,<span class="hljs-selector-attr">[-23.927552,-76.24258]</span>,<span class="hljs-selector-attr">[-22.458598,-76.105431]</span>,<span class="hljs-selector-attr">[-21.224694,-75.909474]</span>,<span class="hljs-selector-attr">[-20.010375,-75.674346]</span>,<span class="hljs-selector-attr">[-18.913543,-75.439218]</span>,<span class="hljs-selector-attr">[-17.522982,-75.125698]</span>,<span class="hljs-selector-attr">[-16.641589,-74.79254]</span>,<span class="hljs-selector-attr">[-15.701491,-74.498604]</span>,<span class="hljs-selector-attr">[-15.40771,-74.106742]</span>,<span class="hljs-selector-attr">[-16.46532,-73.871614]</span>,<span class="hljs-selector-attr">[-16.112784,-73.460114]</span>,<span class="hljs-selector-attr">[-15.446855,-73.146542]</span>,<span class="hljs-selector-attr">[-14.408805,-72.950585]</span>,<span class="hljs-selector-attr">[-13.311973,-72.715457]</span>,<span class="hljs-selector-attr">[-12.293508,-72.401936]</span>,<span class="hljs-selector-attr">[-11.510067,-72.010074]</span>,<span class="hljs-selector-attr">[-11.020433,-71.539767]</span>,<span class="hljs-selector-attr">[-10.295774,-71.265416]</span>,<span class="hljs-selector-attr">[-9.101015,-71.324224]</span>,<span class="hljs-selector-attr">[-8.611381,-71.65733]</span>,<span class="hljs-selector-attr">[-7.416622,-71.696501]</span>,<span class="hljs-selector-attr">[-7.377451,-71.324224]</span>,<span class="hljs-selector-attr">[-6.868232,-70.93231]</span>,<span class="hljs-selector-attr">[-5.790985,-71.030289]</span>,<span class="hljs-selector-attr">[-5.536375,-71.402617]</span>,<span class="hljs-selector-attr">[-4.341667,-71.461373]</span>,<span class="hljs-selector-attr">[-3.048981,-71.285053]</span>,<span class="hljs-selector-attr">[-1.795492,-71.167438]</span>,<span class="hljs-selector-attr">[-0.659489,-71.226246]</span>,<span class="hljs-selector-attr">[-0.228637,-71.637745]</span>,<span class="hljs-selector-attr">[0.868195,-71.304639]</span>,<span class="hljs-selector-attr">[1.886686,-71.128267]</span>,<span class="hljs-selector-attr">[3.022638,-70.991118]</span>,<span class="hljs-selector-attr">[4.139055,-70.853917]</span>,<span class="hljs-selector-attr">[5.157546,-70.618789]</span>,<span class="hljs-selector-attr">[6.273912,-70.462055]</span>,<span class="hljs-selector-attr">[7.13572,-70.246512]</span>,<span class="hljs-selector-attr">[7.742866,-69.893769]</span>,<span class="hljs-selector-attr">[8.48711,-70.148534]</span>,<span class="hljs-selector-attr">[9.525135,-70.011333]</span>,<span class="hljs-selector-attr">[10.249845,-70.48164]</span>,<span class="hljs-selector-attr">[10.817821,-70.834332]</span>,<span class="hljs-selector-attr">[11.953824,-70.638375]</span>,<span class="hljs-selector-attr">[12.404287,-70.246512]</span>,<span class="hljs-selector-attr">[13.422778,-69.972162]</span>,<span class="hljs-selector-attr">[14.734998,-70.030918]</span>,<span class="hljs-selector-attr">[15.126757,-70.403247]</span>,<span class="hljs-selector-attr">[15.949342,-70.030918]</span>,<span class="hljs-selector-attr">[17.026589,-69.913354]</span>,<span class="hljs-selector-attr">[18.201711,-69.874183]</span>,<span class="hljs-selector-attr">[19.259373,-69.893769]</span>,<span class="hljs-selector-attr">[20.375739,-70.011333]</span>,<span class="hljs-selector-attr">[21.452985,-70.07014]</span>,<span class="hljs-selector-attr">[21.923034,-70.403247]</span>,<span class="hljs-selector-attr">[22.569403,-70.697182]</span>,<span class="hljs-selector-attr">[23.666184,-70.520811]</span>,<span class="hljs-selector-attr">[24.841357,-70.48164]</span>,<span class="hljs-selector-attr">[25.977309,-70.48164]</span>,<span class="hljs-selector-attr">[27.093726,-70.462055]</span>,<span class="hljs-selector-attr">[28.09258,-70.324854]</span>,<span class="hljs-selector-attr">[29.150242,-70.20729]</span>,<span class="hljs-selector-attr">[30.031583,-69.93294]</span>,<span class="hljs-selector-attr">[30.971733,-69.75662]</span>,<span class="hljs-selector-attr">[31.990172,-69.658641]</span>,<span class="hljs-selector-attr">[32.754053,-69.384291]</span>,<span class="hljs-selector-attr">[33.302443,-68.835642]</span>,<span class="hljs-selector-attr">[33.870419,-68.502588]</span>,<span class="hljs-selector-attr">[34.908495,-68.659271]</span>,<span class="hljs-selector-attr">[35.300202,-69.012014]</span>,<span class="hljs-selector-attr">[36.16201,-69.247142]</span>,<span class="hljs-selector-attr">[37.200035,-69.168748]</span>,<span class="hljs-selector-attr">[37.905108,-69.52144]</span>,<span class="hljs-selector-attr">[38.649404,-69.776205]</span>,<span class="hljs-selector-attr">[39.667894,-69.541077]</span>,<span class="hljs-selector-attr">[40.020431,-69.109941]</span>,<span class="hljs-selector-attr">[40.921358,-68.933621]</span>,<span class="hljs-selector-attr">[41.959434,-68.600514]</span>,<span class="hljs-selector-attr">[42.938702,-68.463313]</span>,<span class="hljs-selector-attr">[44.113876,-68.267408]</span>,<span class="hljs-selector-attr">[44.897291,-68.051866]</span>,<span class="hljs-selector-attr">[45.719928,-67.816738]</span>,<span class="hljs-selector-attr">[46.503343,-67.601196]</span>,<span class="hljs-selector-attr">[47.44344,-67.718759]</span>,<span class="hljs-selector-attr">[48.344419,-67.366068]</span>,<span class="hljs-selector-attr">[48.990736,-67.091718]</span>,<span class="hljs-selector-attr">[49.930885,-67.111303]</span>,<span class="hljs-selector-attr">[50.753471,-66.876175]</span>,<span class="hljs-selector-attr">[50.949325,-66.523484]</span>,<span class="hljs-selector-attr">[51.791547,-66.249133]</span>,<span class="hljs-selector-attr">[52.614133,-66.053176]</span>,<span class="hljs-selector-attr">[53.613038,-65.89639]</span>,<span class="hljs-selector-attr">[54.53355,-65.818049]</span>,<span class="hljs-selector-attr">[55.414943,-65.876805]</span>,<span class="hljs-selector-attr">[56.355041,-65.974783]</span>,<span class="hljs-selector-attr">[57.158093,-66.249133]</span>,<span class="hljs-selector-attr">[57.255968,-66.680218]</span>,<span class="hljs-selector-attr">[58.137361,-67.013324]</span>,<span class="hljs-selector-attr">[58.744508,-67.287675]</span>,<span class="hljs-selector-attr">[59.939318,-67.405239]</span>,<span class="hljs-selector-attr">[60.605221,-67.679589]</span>,<span class="hljs-selector-attr">[61.427806,-67.953887]</span>,<span class="hljs-selector-attr">[62.387489,-68.012695]</span>,<span class="hljs-selector-attr">[63.19049,-67.816738]</span>,<span class="hljs-selector-attr">[64.052349,-67.405239]</span>,<span class="hljs-selector-attr">[64.992447,-67.620729]</span>,<span class="hljs-selector-attr">[65.971715,-67.738345]</span>,<span class="hljs-selector-attr">[66.911864,-67.855909]</span>,<span class="hljs-selector-attr">[67.891133,-67.934302]</span>,<span class="hljs-selector-attr">[68.890038,-67.934302]</span>,<span class="hljs-selector-attr">[69.712624,-68.972791]</span>,<span class="hljs-selector-attr">[69.673453,-69.227556]</span>,<span class="hljs-selector-attr">[69.555941,-69.678226]</span>,<span class="hljs-selector-attr">[68.596258,-69.93294]</span>,<span class="hljs-selector-attr">[67.81274,-70.305268]</span>,<span class="hljs-selector-attr">[67.949889,-70.697182]</span>,<span class="hljs-selector-attr">[69.066307,-70.677545]</span>,<span class="hljs-selector-attr">[68.929157,-71.069459]</span>,<span class="hljs-selector-attr">[68.419989,-71.441788]</span>,<span class="hljs-selector-attr">[67.949889,-71.853287]</span>,<span class="hljs-selector-attr">[68.71377,-72.166808]</span>,<span class="hljs-selector-attr">[69.869307,-72.264787]</span>,<span class="hljs-selector-attr">[71.024895,-72.088415]</span>,<span class="hljs-selector-attr">[71.573285,-71.696501]</span>,<span class="hljs-selector-attr">[71.906288,-71.324224]</span>,<span class="hljs-selector-attr">[72.454627,-71.010703]</span>,<span class="hljs-selector-attr">[73.08141,-70.716768]</span>,<span class="hljs-selector-attr">[73.33602,-70.364024]</span>,<span class="hljs-selector-attr">[73.864877,-69.874183]</span>,<span class="hljs-selector-attr">[74.491557,-69.776205]</span>,<span class="hljs-selector-attr">[75.62756,-69.737034]</span>,<span class="hljs-selector-attr">[76.626465,-69.619419]</span>,<span class="hljs-selector-attr">[77.644904,-69.462684]</span>,<span class="hljs-selector-attr">[78.134539,-69.07077]</span>,<span class="hljs-selector-attr">[78.428371,-68.698441]</span>,<span class="hljs-selector-attr">[79.113859,-68.326216]</span>,<span class="hljs-selector-attr">[80.093127,-68.071503]</span>,<span class="hljs-selector-attr">[80.93535,-67.875546]</span>,<span class="hljs-selector-attr">[81.483792,-67.542388]</span>,<span class="hljs-selector-attr">[82.051767,-67.366068]</span>,<span class="hljs-selector-attr">[82.776426,-67.209282]</span>,<span class="hljs-selector-attr">[83.775331,-67.30726]</span>,<span class="hljs-selector-attr">[84.676206,-67.209282]</span>,<span class="hljs-selector-attr">[85.655527,-67.091718]</span>,<span class="hljs-selector-attr">[86.752359,-67.150474]</span>,<span class="hljs-selector-attr">[87.477017,-66.876175]</span>,<span class="hljs-selector-attr">[87.986289,-66.209911]</span>,<span class="hljs-selector-attr">[88.358411,-66.484261]</span>,<span class="hljs-selector-attr">[88.828408,-66.954568]</span>,<span class="hljs-selector-attr">[89.67063,-67.150474]</span>,<span class="hljs-selector-attr">[90.630365,-67.228867]</span>,<span class="hljs-selector-attr">[91.5901,-67.111303]</span>,<span class="hljs-selector-attr">[92.608539,-67.189696]</span>,<span class="hljs-selector-attr">[93.548637,-67.209282]</span>,<span class="hljs-selector-attr">[94.17542,-67.111303]</span>,<span class="hljs-selector-attr">[95.017591,-67.170111]</span>,<span class="hljs-selector-attr">[95.781472,-67.385653]</span>,<span class="hljs-selector-attr">[96.682399,-67.248504]</span>,<span class="hljs-selector-attr">[97.759646,-67.248504]</span>,<span class="hljs-selector-attr">[98.68021,-67.111303]</span>,<span class="hljs-selector-attr">[99.718182,-67.248504]</span>,<span class="hljs-selector-attr">[100.384188,-66.915346]</span>,<span class="hljs-selector-attr">[100.893356,-66.58224]</span>,<span class="hljs-selector-attr">[101.578896,-66.30789]</span>,<span class="hljs-selector-attr">[102.832411,-65.563284]</span>,<span class="hljs-selector-attr">[103.478676,-65.700485]</span>,<span class="hljs-selector-attr">[104.242557,-65.974783]</span>,<span class="hljs-selector-attr">[104.90846,-66.327527]</span>,<span class="hljs-selector-attr">[106.181561,-66.934931]</span>,<span class="hljs-selector-attr">[107.160881,-66.954568]</span>,<span class="hljs-selector-attr">[108.081393,-66.954568]</span>,<span class="hljs-selector-attr">[109.15864,-66.837004]</span>,<span class="hljs-selector-attr">[110.235835,-66.699804]</span>,<span class="hljs-selector-attr">[111.058472,-66.425505]</span>,<span class="hljs-selector-attr">[111.74396,-66.13157]</span>,<span class="hljs-selector-attr">[112.860378,-66.092347]</span>,<span class="hljs-selector-attr">[113.604673,-65.876805]</span>,<span class="hljs-selector-attr">[114.388088,-66.072762]</span>,<span class="hljs-selector-attr">[114.897308,-66.386283]</span>,<span class="hljs-selector-attr">[115.602381,-66.699804]</span>,<span class="hljs-selector-attr">[116.699161,-66.660633]</span>,<span class="hljs-selector-attr">[117.384701,-66.915346]</span>,<span class="hljs-selector-attr">[118.57946,-67.170111]</span>,<span class="hljs-selector-attr">[119.832924,-67.268089]</span>,<span class="hljs-selector-attr">[120.871,-67.189696]</span>,<span class="hljs-selector-attr">[121.654415,-66.876175]</span>,<span class="hljs-selector-attr">[122.320369,-66.562654]</span>,<span class="hljs-selector-attr">[123.221296,-66.484261]</span>,<span class="hljs-selector-attr">[124.122274,-66.621462]</span>,<span class="hljs-selector-attr">[125.160247,-66.719389]</span>,<span class="hljs-selector-attr">[126.100396,-66.562654]</span>,<span class="hljs-selector-attr">[127.001427,-66.562654]</span>,<span class="hljs-selector-attr">[127.882768,-66.660633]</span>,<span class="hljs-selector-attr">[128.80328,-66.758611]</span>,<span class="hljs-selector-attr">[129.704259,-66.58224]</span>,<span class="hljs-selector-attr">[130.781454,-66.425505]</span>,<span class="hljs-selector-attr">[131.799945,-66.386283]</span>,<span class="hljs-selector-attr">[132.935896,-66.386283]</span>,<span class="hljs-selector-attr">[133.85646,-66.288304]</span>,<span class="hljs-selector-attr">[134.757387,-66.209963]</span>,<span class="hljs-selector-attr">[135.031582,-65.72007]</span>,<span class="hljs-selector-attr">[135.070753,-65.308571]</span>,<span class="hljs-selector-attr">[135.697485,-65.582869]</span>,<span class="hljs-selector-attr">[135.873805,-66.033591]</span>,<span class="hljs-selector-attr">[136.206705,-66.44509]</span>,<span class="hljs-selector-attr">[136.618049,-66.778197]</span>,<span class="hljs-selector-attr">[137.460271,-66.954568]</span>,<span class="hljs-selector-attr">[138.596223,-66.895761]</span>,<span class="hljs-selector-attr">[139.908442,-66.876175]</span>,<span class="hljs-selector-attr">[140.809421,-66.817367]</span>,<span class="hljs-selector-attr">[142.121692,-66.817367]</span>,<span class="hljs-selector-attr">[143.061842,-66.797782]</span>,<span class="hljs-selector-attr">[144.374061,-66.837004]</span>,<span class="hljs-selector-attr">[145.490427,-66.915346]</span>,<span class="hljs-selector-attr">[146.195552,-67.228867]</span>,<span class="hljs-selector-attr">[145.999699,-67.601196]</span>,<span class="hljs-selector-attr">[146.646067,-67.895131]</span>,<span class="hljs-selector-attr">[147.723263,-68.130259]</span>,<span class="hljs-selector-attr">[148.839629,-68.385024]</span>,<span class="hljs-selector-attr">[150.132314,-68.561292]</span>,<span class="hljs-selector-attr">[151.483705,-68.71813]</span>,<span class="hljs-selector-attr">[152.502247,-68.874813]</span>,<span class="hljs-selector-attr">[153.638199,-68.894502]</span>,<span class="hljs-selector-attr">[154.284567,-68.561292]</span>,<span class="hljs-selector-attr">[155.165857,-68.835642]</span>,<span class="hljs-selector-attr">[155.92979,-69.149215]</span>,<span class="hljs-selector-attr">[156.811132,-69.384291]</span>,<span class="hljs-selector-attr">[158.025528,-69.482269]</span>,<span class="hljs-selector-attr">[159.181013,-69.599833]</span>,<span class="hljs-selector-attr">[159.670699,-69.991747]</span>,<span class="hljs-selector-attr">[160.80665,-70.226875]</span>,<span class="hljs-selector-attr">[161.570479,-70.579618]</span>,<span class="hljs-selector-attr">[162.686897,-70.736353]</span>,<span class="hljs-selector-attr">[163.842434,-70.716768]</span>,<span class="hljs-selector-attr">[164.919681,-70.775524]</span>,<span class="hljs-selector-attr">[166.11444,-70.755938]</span>,<span class="hljs-selector-attr">[167.309095,-70.834332]</span>,<span class="hljs-selector-attr">[168.425616,-70.971481]</span>,<span class="hljs-selector-attr">[169.463589,-71.20666]</span>,<span class="hljs-selector-attr">[170.501665,-71.402617]</span>,<span class="hljs-selector-attr">[171.20679,-71.696501]</span>,<span class="hljs-selector-attr">[171.089227,-72.088415]</span>,<span class="hljs-selector-attr">[170.560422,-72.441159]</span>,<span class="hljs-selector-attr">[170.109958,-72.891829]</span>,<span class="hljs-selector-attr">[169.75737,-73.24452]</span>,<span class="hljs-selector-attr">[169.287321,-73.65602]</span>,<span class="hljs-selector-attr">[167.975101,-73.812806]</span>,<span class="hljs-selector-attr">[167.387489,-74.165498]</span>,<span class="hljs-selector-attr">[166.094803,-74.38104]</span>,<span class="hljs-selector-attr">[165.644391,-74.772954]</span>,<span class="hljs-selector-attr">[164.958851,-75.145283]</span>,<span class="hljs-selector-attr">[164.234193,-75.458804]</span>,<span class="hljs-selector-attr">[163.822797,-75.870303]</span>,<span class="hljs-selector-attr">[163.568239,-76.24258]</span>,<span class="hljs-selector-attr">[163.47026,-76.693302]</span>,<span class="hljs-selector-attr">[163.489897,-77.065579]</span>,<span class="hljs-selector-attr">[164.057873,-77.457442]</span>,<span class="hljs-selector-attr">[164.273363,-77.82977]</span>,<span class="hljs-selector-attr">[164.743464,-78.182514]</span>,<span class="hljs-selector-attr">[166.604126,-78.319611]</span>,<span class="hljs-selector-attr">[166.995781,-78.750748]</span>,<span class="hljs-selector-attr">[165.193876,-78.907483]</span>,<span class="hljs-selector-attr">[163.666217,-79.123025]</span>,<span class="hljs-selector-attr">[161.766385,-79.162248]</span>,<span class="hljs-selector-attr">[160.924162,-79.730482]</span>,<span class="hljs-selector-attr">[160.747894,-80.200737]</span>,<span class="hljs-selector-attr">[160.316964,-80.573066]</span>,<span class="hljs-selector-attr">[159.788211,-80.945395]</span>,<span class="hljs-selector-attr">[161.120016,-81.278501]</span>,<span class="hljs-selector-attr">[161.629287,-81.690001]</span>,<span class="hljs-selector-attr">[162.490992,-82.062278]</span>,<span class="hljs-selector-attr">[163.705336,-82.395435]</span>,<span class="hljs-selector-attr">[165.095949,-82.708956]</span>,<span class="hljs-selector-attr">[166.604126,-83.022477]</span>,<span class="hljs-selector-attr">[168.895665,-83.335998]</span>,<span class="hljs-selector-attr">[169.404782,-83.825891]</span>,<span class="hljs-selector-attr">[172.283934,-84.041433]</span>,<span class="hljs-selector-attr">[172.477049,-84.117914]</span>,<span class="hljs-selector-attr">[173.224083,-84.41371]</span>,<span class="hljs-selector-attr">[175.985672,-84.158997]</span>,<span class="hljs-selector-attr">[178.277212,-84.472518]</span>,<span class="hljs-selector-attr">[180,-84.71338]</span>,<span class="hljs-selector-attr">[-179.942499,-84.721443]</span>,<span class="hljs-selector-attr">[-179.058677,-84.139412]</span>,<span class="hljs-selector-attr">[-177.256772,-84.452933]</span>,<span class="hljs-selector-attr">[-177.140807,-84.417941]</span>,<span class="hljs-selector-attr">[-176.084673,-84.099259]</span>,<span class="hljs-selector-attr">[-175.947235,-84.110449]</span>,<span class="hljs-selector-attr">[-175.829882,-84.117914]</span>,<span class="hljs-selector-attr">[-174.382503,-84.534323]</span>,<span class="hljs-selector-attr">[-173.116559,-84.117914]</span>,<span class="hljs-selector-attr">[-172.889106,-84.061019]</span>,<span class="hljs-selector-attr">[-169.951223,-83.884647]</span>,<span class="hljs-selector-attr">[-168.999989,-84.117914]</span>,<span class="hljs-selector-attr">[-168.530199,-84.23739]</span>,<span class="hljs-selector-attr">[-167.022099,-84.570497]</span>,<span class="hljs-selector-attr">[-164.182144,-84.82521]</span>,<span class="hljs-selector-attr">[-161.929775,-85.138731]</span>,<span class="hljs-selector-attr">[-158.07138,-85.37391]</span>,<span class="hljs-selector-attr">[-155.192253,-85.09956]</span>,<span class="hljs-selector-attr">[-150.942099,-85.295517]</span>,<span class="hljs-selector-attr">[-148.533073,-85.609038]</span>,<span class="hljs-selector-attr">[-145.888918,-85.315102]</span>,<span class="hljs-selector-attr">[-143.107718,-85.040752]</span>,<span class="hljs-selector-attr">[-142.892279,-84.570497]</span>,<span class="hljs-selector-attr">[-146.829068,-84.531274]</span>,<span class="hljs-selector-attr">[-150.060732,-84.296146]</span>,<span class="hljs-selector-attr">[-150.902928,-83.904232]</span>,<span class="hljs-selector-attr">[-153.586201,-83.68869]</span>,<span class="hljs-selector-attr">[-153.409907,-83.23802]</span>,<span class="hljs-selector-attr">[-153.037759,-82.82652]</span>,<span class="hljs-selector-attr">[-152.665637,-82.454192]</span>,<span class="hljs-selector-attr">[-152.861517,-82.042692]</span>,<span class="hljs-selector-attr">[-154.526299,-81.768394]</span>,<span class="hljs-selector-attr">[-155.29018,-81.41565]</span>,<span class="hljs-selector-attr">[-156.83745,-81.102129]</span>,<span class="hljs-selector-attr">[-154.408787,-81.160937]</span>,<span class="hljs-selector-attr">[-152.097662,-81.004151]</span>,<span class="hljs-selector-attr">[-150.648293,-81.337309]</span>,<span class="hljs-selector-attr">[-148.865998,-81.043373]</span>,<span class="hljs-selector-attr">[-147.22075,-80.671045]</span>,<span class="hljs-selector-attr">[-146.417749,-80.337938]</span>,<span class="hljs-selector-attr">[-146.770286,-79.926439]</span>,<span class="hljs-selector-attr">[-148.062947,-79.652089]</span>,<span class="hljs-selector-attr">[-149.531901,-79.358205]</span>,<span class="hljs-selector-attr">[-151.588416,-79.299397]</span>,<span class="hljs-selector-attr">[-153.390322,-79.162248]</span>,<span class="hljs-selector-attr">[-155.329376,-79.064269]</span>,<span class="hljs-selector-attr">[-155.975668,-78.69194]</span>,<span class="hljs-selector-attr">[-157.268302,-78.378419]</span>,<span class="hljs-selector-attr">[-158.051768,-78.025676]</span>,<span class="hljs-selector-attr">[-158.365134,-76.889207]</span>,<span class="hljs-selector-attr">[-157.875474,-76.987238]</span>,<span class="hljs-selector-attr">[-156.974573,-77.300759]</span>,<span class="hljs-selector-attr">[-155.329376,-77.202728]</span>,<span class="hljs-selector-attr">[-153.742832,-77.065579]</span>,<span class="hljs-selector-attr">[-152.920247,-77.496664]</span>,<span class="hljs-selector-attr">[-151.33378,-77.398737]</span>,<span class="hljs-selector-attr">[-150.00195,-77.183143]</span>,<span class="hljs-selector-attr">[-148.748486,-76.908845]</span>,<span class="hljs-selector-attr">[-147.612483,-76.575738]</span>,<span class="hljs-selector-attr">[-146.104409,-76.47776]</span>,<span class="hljs-selector-attr">[-146.143528,-76.105431]</span>,<span class="hljs-selector-attr">[-146.496091,-75.733154]</span>,<span class="hljs-selector-attr">[-146.20231,-75.380411]</span>,<span class="hljs-selector-attr">[-144.909624,-75.204039]</span>,<span class="hljs-selector-attr">[-144.322037,-75.537197]</span>,<span class="hljs-selector-attr">[-142.794353,-75.34124]</span>,<span class="hljs-selector-attr">[-141.638764,-75.086475]</span>,<span class="hljs-selector-attr">[-140.209007,-75.06689]</span>,<span class="hljs-selector-attr">[-138.85759,-74.968911]</span>,<span class="hljs-selector-attr">[-137.5062,-74.733783]</span>,<span class="hljs-selector-attr">[-136.428901,-74.518241]</span>,<span class="hljs-selector-attr">[-135.214583,-74.302699]</span>,<span class="hljs-selector-attr">[-134.431194,-74.361455]</span>,<span class="hljs-selector-attr">[-133.745654,-74.439848]</span>,<span class="hljs-selector-attr">[-132.257168,-74.302699]</span>,<span class="hljs-selector-attr">[-130.925311,-74.479019]</span>,<span class="hljs-selector-attr">[-129.554284,-74.459433]</span>,<span class="hljs-selector-attr">[-128.242038,-74.322284]</span>,<span class="hljs-selector-attr">[-126.890622,-74.420263]</span>,<span class="hljs-selector-attr">[-125.402082,-74.518241]</span>,<span class="hljs-selector-attr">[-124.011496,-74.479019]</span>,<span class="hljs-selector-attr">[-122.562152,-74.498604]</span>,<span class="hljs-selector-attr">[-121.073613,-74.518241]</span>,<span class="hljs-selector-attr">[-119.70256,-74.479019]</span>,<span class="hljs-selector-attr">[-118.684145,-74.185083]</span>,<span class="hljs-selector-attr">[-117.469801,-74.028348]</span>,<span class="hljs-selector-attr">[-116.216312,-74.243891]</span>,<span class="hljs-selector-attr">[-115.021552,-74.067519]</span>,<span class="hljs-selector-attr">[-113.944331,-73.714828]</span>,<span class="hljs-selector-attr">[-113.297988,-74.028348]</span>,<span class="hljs-selector-attr">[-112.945452,-74.38104]</span>,<span class="hljs-selector-attr">[-112.299083,-74.714198]</span>,<span class="hljs-selector-attr">[-111.261059,-74.420263]</span>,<span class="hljs-selector-attr">[-110.066325,-74.79254]</span>,<span class="hljs-selector-attr">[-108.714909,-74.910103]</span>,<span class="hljs-selector-attr">[-107.559346,-75.184454]</span>,<span class="hljs-selector-attr">[-106.149148,-75.125698]</span>,<span class="hljs-selector-attr">[-104.876074,-74.949326]</span>,<span class="hljs-selector-attr">[-103.367949,-74.988497]</span>,<span class="hljs-selector-attr">[-102.016507,-75.125698]</span>,<span class="hljs-selector-attr">[-100.645531,-75.302018]</span>,<span class="hljs-selector-attr">[-100.1167,-74.870933]</span>,<span class="hljs-selector-attr">[-100.763043,-74.537826]</span>,<span class="hljs-selector-attr">[-101.252703,-74.185083]</span>,<span class="hljs-selector-attr">[-102.545337,-74.106742]</span>,<span class="hljs-selector-attr">[-103.113313,-73.734413]</span>,<span class="hljs-selector-attr">[-103.328752,-73.362084]</span>,<span class="hljs-selector-attr">[-103.681289,-72.61753]</span>,<span class="hljs-selector-attr">[-102.917485,-72.754679]</span>,<span class="hljs-selector-attr">[-101.60524,-72.813436]</span>,<span class="hljs-selector-attr">[-100.312528,-72.754679]</span>,<span class="hljs-selector-attr">[-99.13738,-72.911414]</span>,<span class="hljs-selector-attr">[-98.118889,-73.20535]</span>,<span class="hljs-selector-attr">[-97.688037,-73.558041]</span>,<span class="hljs-selector-attr">[-96.336595,-73.616849]</span>,<span class="hljs-selector-attr">[-95.043961,-73.4797]</span>,<span class="hljs-selector-attr">[-93.672907,-73.283743]</span>,<span class="hljs-selector-attr">[-92.439003,-73.166179]</span>,<span class="hljs-selector-attr">[-91.420564,-73.401307]</span>,<span class="hljs-selector-attr">[-90.088733,-73.322914]</span>,<span class="hljs-selector-attr">[-89.226951,-72.558722]</span>,<span class="hljs-selector-attr">[-88.423951,-73.009393]</span>,<span class="hljs-selector-attr">[-87.268337,-73.185764]</span>,<span class="hljs-selector-attr">[-86.014822,-73.087786]</span>,<span class="hljs-selector-attr">[-85.192236,-73.4797]</span>,<span class="hljs-selector-attr">[-83.879991,-73.518871]</span>,<span class="hljs-selector-attr">[-82.665646,-73.636434]</span>,<span class="hljs-selector-attr">[-81.470913,-73.851977]</span>,<span class="hljs-selector-attr">[-80.687447,-73.4797]</span>,<span class="hljs-selector-attr">[-80.295791,-73.126956]</span>,<span class="hljs-selector-attr">[-79.296886,-73.518871]</span>,<span class="hljs-selector-attr">[-77.925858,-73.420892]</span>,<span class="hljs-selector-attr">[-76.907367,-73.636434]</span>,<span class="hljs-selector-attr">[-76.221879,-73.969541]</span>,<span class="hljs-selector-attr">[-74.890049,-73.871614]</span>,<span class="hljs-selector-attr">[-73.852024,-73.65602]</span>,<span class="hljs-selector-attr">[-72.833533,-73.401307]</span>,<span class="hljs-selector-attr">[-71.619215,-73.264157]</span>,<span class="hljs-selector-attr">[-70.209042,-73.146542]</span>,<span class="hljs-selector-attr">[-68.935916,-73.009393]</span>,<span class="hljs-selector-attr">[-67.956622,-72.79385]</span>,<span class="hljs-selector-attr">[-67.369061,-72.480329]</span>,<span class="hljs-selector-attr">[-67.134036,-72.049244]</span>,<span class="hljs-selector-attr">[-67.251548,-71.637745]</span>,<span class="hljs-selector-attr">[-67.56494,-71.245831]</span>,<span class="hljs-selector-attr">[-67.917477,-70.853917]</span>,<span class="hljs-selector-attr">[-68.230843,-70.462055]</span>,<span class="hljs-selector-attr">[-68.485452,-70.109311]</span>,<span class="hljs-selector-attr">[-68.544209,-69.717397]</span>,<span class="hljs-selector-attr">[-68.446282,-69.325535]</span>,<span class="hljs-selector-attr">[-67.976233,-68.953206]</span>,<span class="hljs-selector-attr">[-67.5845,-68.541707]</span>,<span class="hljs-selector-attr">[-67.427843,-68.149844]</span>,<span class="hljs-selector-attr">[-67.62367,-67.718759]</span>,<span class="hljs-selector-attr">[-67.741183,-67.326845]</span>,<span class="hljs-selector-attr">[-67.251548,-66.876175]</span>,<span class="hljs-selector-attr">[-66.703184,-66.58224]</span>,<span class="hljs-selector-attr">[-66.056815,-66.209963]</span>,<span class="hljs-selector-attr">[-65.371327,-65.89639]</span>,<span class="hljs-selector-attr">[-64.568276,-65.602506]</span>,<span class="hljs-selector-attr">[-64.176542,-65.171423]</span>,<span class="hljs-selector-attr">[-63.628152,-64.897073]</span>,<span class="hljs-selector-attr">[-63.001394,-64.642308]</span>,<span class="hljs-selector-attr">[-62.041686,-64.583552]</span>,<span class="hljs-selector-attr">[-61.414928,-64.270031]</span>,<span class="hljs-selector-attr">[-60.709855,-64.074074]</span>,<span class="hljs-selector-attr">[-59.887269,-63.95651]</span>,<span class="hljs-selector-attr">[-59.162585,-63.701745]</span>,<span class="hljs-selector-attr">[-58.594557,-63.388224]</span>,<span class="hljs-selector-attr">[-57.811143,-63.27066]</span>,<span class="hljs-selector-attr">[-57.223582,-63.525425]</span>,<span class="hljs-selector-attr">[-57.59573,-63.858532]</span>,<span class="hljs-selector-attr">[-58.614143,-64.152467]</span>]]]}},
{"<span class="hljs-selector-tag">type</span>":"<span class="hljs-selector-tag">Feature</span>","<span class="hljs-selector-tag">id</span>":"<span class="hljs-selector-tag">ATF</span>","<span class="hljs-selector-tag">properties</span>":{"<span class="hljs-selector-tag">name</span>":"<span class="hljs-selector-tag">French</span>Â <span class="hljs-selector-tag">Southern</span>Â <span class="hljs-selector-tag">and</span>Â <span class="hljs-selector-tag">Antarctic</span>Â <span class="hljs-selector-tag">Lands</span>"},"<span class="hljs-selector-tag">geometry</span>":{"<span class="hljs-selector-tag">type</span>":"<span class="hljs-selector-tag">Polygon</span>","<span class="hljs-selector-tag">coordinates</span>":<span class="hljs-selector-attr">[[[68.935,-48.625]</span>,<span class="hljs-selector-attr">[69.58,-48.94]</span>,<span class="hljs-selector-attr">[70.525,-49.065]</span>,<span class="hljs-selector-attr">[70.56,-49.255]</span>,<span class="hljs-selector-attr">[70.28,-49.71]</span>,<span class="hljs-selector-attr">[68.745,-49.775]</span>,<span class="hljs-selector-attr">[68.72,-49.2425]</span>,<span class="hljs-selector-attr">[68.8675,-48.83]</span>,<span class="hljs-selector-attr">[68.935,-48.625]</span>]]}},
{"<span class="hljs-selector-tag">type</span>":"<span class="hljs-selector-tag">Feature</span>","<span class="hljs-selector-tag">id</span>":"<span class="hljs-selector-tag">AUS</span>","<span class="hljs-selector-tag">properties</span>":{"<span class="hljs-selector-tag">name</span>":"<span class="hljs-selector-tag">Australia</span>"},"<span class="hljs-selector-tag">geometry</span>":{"<span class="hljs-selector-tag">type</span>":"<span class="hljs-selector-tag">MultiPolygon</span>","<span class="hljs-selector-tag">coordinates</span>":<span class="hljs-selector-attr">[[[[145.397978,-40.792549]</span>,<span class="hljs-selector-attr">[146.364121,-41.137695]</span>,<span class="hljs-selector-attr">[146.908584,-41.000546]</span>,<span class="hljs-selector-attr">[147.689259,-40.808258]</span>,<span class="hljs-selector-attr">[148.289068,-40.875438]</span>,<span class="hljs-selector-attr">[148.359865,-42.062445]</span>,<span class="hljs-selector-attr">[148.017301,-42.407024]</span>,<span class="hljs-selector-attr">[147.914052,-43.211522]</span>,<span class="hljs-selector-attr">[147.564564,-42.937689]</span>,<span class="hljs-selector-attr">[146.870343,-43.634597]</span>,<span class="hljs-selector-attr">[146.663327,-43.580854]</span>,<span class="hljs-selector-attr">[146.048378,-43.549745]</span>,<span class="hljs-selector-attr">[145.43193,-42.693776]</span>,<span class="hljs-selector-attr">[145.29509,-42.03361]</span>,<span class="hljs-selector-attr">[144.718071,-41.162552]</span>,<span class="hljs-selector-attr">[144.743755,-40.703975]</span>,<span class="hljs-selector-attr">[145.397978,-40.792549]</span>]],<span class="hljs-selector-attr">[[[143.561811,-13.763656]</span>,<span class="hljs-selector-attr">[143.922099,-14.548311]</span>,<span class="hljs-selector-attr">[144.563714,-14.171176]</span>,<span class="hljs-selector-attr">[144.894908,-14.594458]</span>,<span class="hljs-selector-attr">[145.374724,-14.984976]</span>,<span class="hljs-selector-attr">[145.271991,-15.428205]</span>,<span class="hljs-selector-attr">[145.48526,-16.285672]</span>,<span class="hljs-selector-attr">[145.637033,-16.784918]</span>,<span class="hljs-selector-attr">[145.888904,-16.906926]</span>,<span class="hljs-selector-attr">[146.160309,-17.761655]</span>,<span class="hljs-selector-attr">[146.063674,-18.280073]</span>,<span class="hljs-selector-attr">[146.387478,-18.958274]</span>,<span class="hljs-selector-attr">[147.471082,-19.480723]</span>,<span class="hljs-selector-attr">[148.177602,-19.955939]</span>,<span class="hljs-selector-attr">[148.848414,-20.39121]</span>,<span class="hljs-selector-attr">[148.717465,-20.633469]</span>,<span class="hljs-selector-attr">[149.28942,-21.260511]</span>,<span class="hljs-selector-attr">[149.678337,-22.342512]</span>,<span class="hljs-selector-attr">[150.077382,-22.122784]</span>,<span class="hljs-selector-attr">[150.482939,-22.556142]</span>,<span class="hljs-selector-attr">[150.727265,-22.402405]</span>,<span class="hljs-selector-attr">[150.899554,-23.462237]</span>,<span class="hljs-selector-attr">[151.609175,-24.076256]</span>,<span class="hljs-selector-attr">[152.07354,-24.457887]</span>,<span class="hljs-selector-attr">[152.855197,-25.267501]</span>,<span class="hljs-selector-attr">[153.136162,-26.071173]</span>,<span class="hljs-selector-attr">[153.161949,-26.641319]</span>,<span class="hljs-selector-attr">[153.092909,-27.2603]</span>,<span class="hljs-selector-attr">[153.569469,-28.110067]</span>,<span class="hljs-selector-attr">[153.512108,-28.995077]</span>,<span class="hljs-selector-attr">[153.339095,-29.458202]</span>,<span class="hljs-selector-attr">[153.069241,-30.35024]</span>,<span class="hljs-selector-attr">[153.089602,-30.923642]</span>,<span class="hljs-selector-attr">[152.891578,-31.640446]</span>,<span class="hljs-selector-attr">[152.450002,-32.550003]</span>,<span class="hljs-selector-attr">[151.709117,-33.041342]</span>,<span class="hljs-selector-attr">[151.343972,-33.816023]</span>,<span class="hljs-selector-attr">[151.010555,-34.31036]</span>,<span class="hljs-selector-attr">[150.714139,-35.17346]</span>,<span class="hljs-selector-attr">[150.32822,-35.671879]</span>,<span class="hljs-selector-attr">[150.075212,-36.420206]</span>,<span class="hljs-selector-attr">[149.946124,-37.109052]</span>,<span class="hljs-selector-attr">[149.997284,-37.425261]</span>,<span class="hljs-selector-attr">[149.423882,-37.772681]</span>,<span class="hljs-selector-attr">[148.304622,-37.809061]</span>,<span class="hljs-selector-attr">[147.381733,-38.219217]</span>,<span class="hljs-selector-attr">[146.922123,-38.606532]</span>,<span class="hljs-selector-attr">[146.317922,-39.035757]</span>,<span class="hljs-selector-attr">[145.489652,-38.593768]</span>,<span class="hljs-selector-attr">[144.876976,-38.417448]</span>,<span class="hljs-selector-attr">[145.032212,-37.896188]</span>,<span class="hljs-selector-attr">[144.485682,-38.085324]</span>,<span class="hljs-selector-attr">[143.609974,-38.809465]</span>,<span class="hljs-selector-attr">[142.745427,-38.538268]</span>,<span class="hljs-selector-attr">[142.17833,-38.380034]</span>,<span class="hljs-selector-attr">[141.606582,-38.308514]</span>,<span class="hljs-selector-attr">[140.638579,-38.019333]</span>,<span class="hljs-selector-attr">[139.992158,-37.402936]</span>,<span class="hljs-selector-attr">[139.806588,-36.643603]</span>,<span class="hljs-selector-attr">[139.574148,-36.138362]</span>,<span class="hljs-selector-attr">[139.082808,-35.732754]</span>,<span class="hljs-selector-attr">[138.120748,-35.612296]</span>,<span class="hljs-selector-attr">[138.449462,-35.127261]</span>,<span class="hljs-selector-attr">[138.207564,-34.384723]</span>,<span class="hljs-selector-attr">[137.71917,-35.076825]</span>,<span class="hljs-selector-attr">[136.829406,-35.260535]</span>,<span class="hljs-selector-attr">[137.352371,-34.707339]</span>,<span class="hljs-selector-attr">[137.503886,-34.130268]</span>,<span class="hljs-selector-attr">[137.890116,-33.640479]</span>,<span class="hljs-selector-attr">[137.810328,-32.900007]</span>,<span class="hljs-selector-attr">[136.996837,-33.752771]</span>,<span class="hljs-selector-attr">[136.372069,-34.094766]</span>,<span class="hljs-selector-attr">[135.989043,-34.890118]</span>,<span class="hljs-selector-attr">[135.208213,-34.47867]</span>,<span class="hljs-selector-attr">[135.239218,-33.947953]</span>,<span class="hljs-selector-attr">[134.613417,-33.222778]</span>,<span class="hljs-selector-attr">[134.085904,-32.848072]</span>,<span class="hljs-selector-attr">[134.273903,-32.617234]</span>,<span class="hljs-selector-attr">[132.990777,-32.011224]</span>,<span class="hljs-selector-attr">[132.288081,-31.982647]</span>,<span class="hljs-selector-attr">[131.326331,-31.495803]</span>,<span class="hljs-selector-attr">[129.535794,-31.590423]</span>,<span class="hljs-selector-attr">[128.240938,-31.948489]</span>,<span class="hljs-selector-attr">[127.102867,-32.282267]</span>,<span class="hljs-selector-attr">[126.148714,-32.215966]</span>,<span class="hljs-selector-attr">[125.088623,-32.728751]</span>,<span class="hljs-selector-attr">[124.221648,-32.959487]</span>,<span class="hljs-selector-attr">[124.028947,-33.483847]</span>,<span class="hljs-selector-attr">[123.659667,-33.890179]</span>,<span class="hljs-selector-attr">[122.811036,-33.914467]</span>,<span class="hljs-selector-attr">[122.183064,-34.003402]</span>,<span class="hljs-selector-attr">[121.299191,-33.821036]</span>,<span class="hljs-selector-attr">[120.580268,-33.930177]</span>,<span class="hljs-selector-attr">[119.893695,-33.976065]</span>,<span class="hljs-selector-attr">[119.298899,-34.509366]</span>,<span class="hljs-selector-attr">[119.007341,-34.464149]</span>,<span class="hljs-selector-attr">[118.505718,-34.746819]</span>,<span class="hljs-selector-attr">[118.024972,-35.064733]</span>,<span class="hljs-selector-attr">[117.295507,-35.025459]</span>,<span class="hljs-selector-attr">[116.625109,-35.025097]</span>,<span class="hljs-selector-attr">[115.564347,-34.386428]</span>,<span class="hljs-selector-attr">[115.026809,-34.196517]</span>,<span class="hljs-selector-attr">[115.048616,-33.623425]</span>,<span class="hljs-selector-attr">[115.545123,-33.487258]</span>,<span class="hljs-selector-attr">[115.714674,-33.259572]</span>,<span class="hljs-selector-attr">[115.679379,-32.900369]</span>,<span class="hljs-selector-attr">[115.801645,-32.205062]</span>,<span class="hljs-selector-attr">[115.689611,-31.612437]</span>,<span class="hljs-selector-attr">[115.160909,-30.601594]</span>,<span class="hljs-selector-attr">[114.997043,-30.030725]</span>,<span class="hljs-selector-attr">[115.040038,-29.461095]</span>,<span class="hljs-selector-attr">[114.641974,-28.810231]</span>,<span class="hljs-selector-attr">[114.616498,-28.516399]</span>,<span class="hljs-selector-attr">[114.173579,-28.118077]</span>,<span class="hljs-selector-attr">[114.048884,-27.334765]</span>,<span class="hljs-selector-attr">[113.477498,-26.543134]</span>,<span class="hljs-selector-attr">[113.338953,-26.116545]</span>,<span class="hljs-selector-attr">[113.778358,-26.549025]</span>,<span class="hljs-selector-attr">[113.440962,-25.621278]</span>,<span class="hljs-selector-attr">[113.936901,-25.911235]</span>,<span class="hljs-selector-attr">[114.232852,-26.298446]</span>,<span class="hljs-selector-attr">[114.216161,-25.786281]</span>,<span class="hljs-selector-attr">[113.721255,-24.998939]</span>,<span class="hljs-selector-attr">[113.625344,-24.683971]</span>,<span class="hljs-selector-attr">[113.393523,-24.384764]</span>,<span class="hljs-selector-attr">[113.502044,-23.80635]</span>,<span class="hljs-selector-attr">[113.706993,-23.560215]</span>,<span class="hljs-selector-attr">[113.843418,-23.059987]</span>,<span class="hljs-selector-attr">[113.736552,-22.475475]</span>,<span class="hljs-selector-attr">[114.149756,-21.755881]</span>,<span class="hljs-selector-attr">[114.225307,-22.517488]</span>,<span class="hljs-selector-attr">[114.647762,-21.82952]</span>,<span class="hljs-selector-attr">[115.460167,-21.495173]</span>,<span class="hljs-selector-attr">[115.947373,-21.068688]</span>,<span class="hljs-selector-attr">[116.711615,-20.701682]</span>,<span class="hljs-selector-attr">[117.166316,-20.623599]</span>,<span class="hljs-selector-attr">[117.441545,-20.746899]</span>,<span class="hljs-selector-attr">[118.229559,-20.374208]</span>,<span class="hljs-selector-attr">[118.836085,-20.263311]</span>,<span class="hljs-selector-attr">[118.987807,-20.044203]</span>,<span class="hljs-selector-attr">[119.252494,-19.952942]</span>,<span class="hljs-selector-attr">[119.805225,-19.976506]</span>,<span class="hljs-selector-attr">[120.85622,-19.683708]</span>,<span class="hljs-selector-attr">[121.399856,-19.239756]</span>,<span class="hljs-selector-attr">[121.655138,-18.705318]</span>,<span class="hljs-selector-attr">[122.241665,-18.197649]</span>,<span class="hljs-selector-attr">[122.286624,-17.798603]</span>,<span class="hljs-selector-attr">[122.312772,-17.254967]</span>,<span class="hljs-selector-attr">[123.012574,-16.4052]</span>,<span class="hljs-selector-attr">[123.433789,-17.268558]</span>,<span class="hljs-selector-attr">[123.859345,-17.069035]</span>,<span class="hljs-selector-attr">[123.503242,-16.596506]</span>,<span class="hljs-selector-attr">[123.817073,-16.111316]</span>,<span class="hljs-selector-attr">[124.258287,-16.327944]</span>,<span class="hljs-selector-attr">[124.379726,-15.56706]</span>,<span class="hljs-selector-attr">[124.926153,-15.0751]</span>,<span class="hljs-selector-attr">[125.167275,-14.680396]</span>,<span class="hljs-selector-attr">[125.670087,-14.51007]</span>,<span class="hljs-selector-attr">[125.685796,-14.230656]</span>,<span class="hljs-selector-attr">[126.125149,-14.347341]</span>,<span class="hljs-selector-attr">[126.142823,-14.095987]</span>,<span class="hljs-selector-attr">[126.582589,-13.952791]</span>,<span class="hljs-selector-attr">[127.065867,-13.817968]</span>,<span class="hljs-selector-attr">[127.804633,-14.276906]</span>,<span class="hljs-selector-attr">[128.35969,-14.86917]</span>,<span class="hljs-selector-attr">[128.985543,-14.875991]</span>,<span class="hljs-selector-attr">[129.621473,-14.969784]</span>,<span class="hljs-selector-attr">[129.4096,-14.42067]</span>,<span class="hljs-selector-attr">[129.888641,-13.618703]</span>,<span class="hljs-selector-attr">[130.339466,-13.357376]</span>,<span class="hljs-selector-attr">[130.183506,-13.10752]</span>,<span class="hljs-selector-attr">[130.617795,-12.536392]</span>,<span class="hljs-selector-attr">[131.223495,-12.183649]</span>,<span class="hljs-selector-attr">[131.735091,-12.302453]</span>,<span class="hljs-selector-attr">[132.575298,-12.114041]</span>,<span class="hljs-selector-attr">[132.557212,-11.603012]</span>,<span class="hljs-selector-attr">[131.824698,-11.273782]</span>,<span class="hljs-selector-attr">[132.357224,-11.128519]</span>,<span class="hljs-selector-attr">[133.019561,-11.376411]</span>,<span class="hljs-selector-attr">[133.550846,-11.786515]</span>,<span class="hljs-selector-attr">[134.393068,-12.042365]</span>,<span class="hljs-selector-attr">[134.678632,-11.941183]</span>,<span class="hljs-selector-attr">[135.298491,-12.248606]</span>,<span class="hljs-selector-attr">[135.882693,-11.962267]</span>,<span class="hljs-selector-attr">[136.258381,-12.049342]</span>,<span class="hljs-selector-attr">[136.492475,-11.857209]</span>,<span class="hljs-selector-attr">[136.95162,-12.351959]</span>,<span class="hljs-selector-attr">[136.685125,-12.887223]</span>,<span class="hljs-selector-attr">[136.305407,-13.29123]</span>,<span class="hljs-selector-attr">[135.961758,-13.324509]</span>,<span class="hljs-selector-attr">[136.077617,-13.724278]</span>,<span class="hljs-selector-attr">[135.783836,-14.223989]</span>,<span class="hljs-selector-attr">[135.428664,-14.715432]</span>,<span class="hljs-selector-attr">[135.500184,-14.997741]</span>,<span class="hljs-selector-attr">[136.295175,-15.550265]</span>,<span class="hljs-selector-attr">[137.06536,-15.870762]</span>,<span class="hljs-selector-attr">[137.580471,-16.215082]</span>,<span class="hljs-selector-attr">[138.303217,-16.807604]</span>,<span class="hljs-selector-attr">[138.585164,-16.806622]</span>,<span class="hljs-selector-attr">[139.108543,-17.062679]</span>,<span class="hljs-selector-attr">[139.260575,-17.371601]</span>,<span class="hljs-selector-attr">[140.215245,-17.710805]</span>,<span class="hljs-selector-attr">[140.875463,-17.369069]</span>,<span class="hljs-selector-attr">[141.07111,-16.832047]</span>,<span class="hljs-selector-attr">[141.274095,-16.38887]</span>,<span class="hljs-selector-attr">[141.398222,-15.840532]</span>,<span class="hljs-selector-attr">[141.702183,-15.044921]</span>,<span class="hljs-selector-attr">[141.56338,-14.561333]</span>,<span class="hljs-selector-attr">[141.63552,-14.270395]</span>,<span class="hljs-selector-attr">[141.519869,-13.698078]</span>,<span class="hljs-selector-attr">[141.65092,-12.944688]</span>,<span class="hljs-selector-attr">[141.842691,-12.741548]</span>,<span class="hljs-selector-attr">[141.68699,-12.407614]</span>,<span class="hljs-selector-attr">[141.928629,-11.877466]</span>,<span class="hljs-selector-attr">[142.118488,-11.328042]</span>,<span class="hljs-selector-attr">[142.143706,-11.042737]</span>,<span class="hljs-selector-attr">[142.51526,-10.668186]</span>,<span class="hljs-selector-attr">[142.79731,-11.157355]</span>,<span class="hljs-selector-attr">[142.866763,-11.784707]</span>,<span class="hljs-selector-attr">[143.115947,-11.90563]</span>,<span class="hljs-selector-attr">[143.158632,-12.325656]</span>,<span class="hljs-selector-attr">[143.522124,-12.834358]</span>,<span class="hljs-selector-attr">[143.597158,-13.400422]</span>,<span class="hljs-selector-attr">[143.561811,-13.763656]</span>]]]}},
{"<span class="hljs-selector-tag">type</span>":"<span class="hljs-selector-tag">Feature</span>","<span class="hljs-selector-tag">id</span>":"<span class="hljs-selector-tag">AUT</span>","<span class="hljs-selector-tag">properties</span>":{"<span class="hljs-selector-tag">name</span>":"<span class="hljs-selector-tag">Austria</span>"},"<span class="hljs-selector-tag">geometry</span>":{"<span class="hljs-selector-tag">type</span>":"<span class="hljs-selector-tag">Polygon</span>","<span class="hljs-selector-tag">coordinates</span>":<span class="hljs-selector-attr">[[[16.979667,48.123497]</span>,<span class="hljs-selector-attr">[16.903754,47.714866]</span>,<span class="hljs-selector-attr">[16.340584,47.712902]</span>,<span class="hljs-selector-attr">[16.534268,47.496171]</span>,<span class="hljs-selector-attr">[16.202298,46.852386]</span>,<span class="hljs-selector-attr">[16.011664,46.683611]</span>,<span class="hljs-selector-attr">[15.137092,46.658703]</span>,<span class="hljs-selector-attr">[14.632472,46.431817]</span>,<span class="hljs-selector-attr">[13.806475,46.509306]</span>,<span class="hljs-selector-attr">[12.376485,46.767559]</span>,<span class="hljs-selector-attr">[12.153088,47.115393]</span>,<span class="hljs-selector-attr">[11.164828,46.941579]</span>,<span class="hljs-selector-attr">[11.048556,46.751359]</span>,<span class="hljs-selector-attr">[10.442701,46.893546]</span>,<span class="hljs-selector-attr">[9.932448,46.920728]</span>,<span class="hljs-selector-attr">[9.47997,47.10281]</span>,<span class="hljs-selector-attr">[9.632932,47.347601]</span>,<span class="hljs-selector-attr">[9.594226,47.525058]</span>,<span class="hljs-selector-attr">[9.896068,47.580197]</span>,<span class="hljs-selector-attr">[10.402084,47.302488]</span>,<span class="hljs-selector-attr">[10.544504,47.566399]</span>,<span class="hljs-selector-attr">[11.426414,47.523766]</span>,<span class="hljs-selector-attr">[12.141357,47.703083]</span>,<span class="hljs-selector-attr">[12.62076,47.672388]</span>,<span class="hljs-selector-attr">[12.932627,47.467646]</span>,<span class="hljs-selector-attr">[13.025851,47.637584]</span>,<span class="hljs-selector-attr">[12.884103,48.289146]</span>,<span class="hljs-selector-attr">[13.243357,48.416115]</span>,<span class="hljs-selector-attr">[13.595946,48.877172]</span>,<span class="hljs-selector-attr">[14.338898,48.555305]</span>,<span class="hljs-selector-attr">[14.901447,48.964402]</span>,<span class="hljs-selector-attr">[15.253416,49.039074]</span>,<span class="hljs-selector-attr">[16.029647,48.733899]</span>,<span class="hljs-selector-attr">[16.499283,48.785808]</span>,<span class="hljs-selector-attr">[16.960288,48.596982]</span>,<span class="hljs-selector-attr">[16.879983,48.470013]</span>,<span class="hljs-selector-attr">[16.979667,48.123497]</span>]]}},
{"<span class="hljs-selector-tag">type</span>":"<span class="hljs-selector-tag">Feature</span>","<span class="hljs-selector-tag">id</span>":"<span class="hljs-selector-tag">AZE</span>","<span class="hljs-selector-tag">properties</span>":{"<span class="hljs-selector-tag">name</span>":"<span class="hljs-selector-tag">Azerbaijan</span>"},"<span class="hljs-selector-tag">geometry</span>":{"<span class="hljs-selector-tag">type</span>":"<span class="hljs-selector-tag">MultiPolygon</span>","<span class="hljs-selector-tag">coordinates</span>":<span class="hljs-selector-attr">[[[[45.001987,39.740004]</span>,<span class="hljs-selector-attr">[45.298145,39.471751]</span>,<span class="hljs-selector-attr">[45.739978,39.473999]</span>,<span class="hljs-selector-attr">[45.735379,39.319719]</span>,<span class="hljs-selector-attr">[46.143623,38.741201]</span>,<span class="hljs-selector-attr">[45.457722,38.874139]</span>,<span class="hljs-selector-attr">[44.952688,39.335765]</span>,<span class="hljs-selector-attr">[44.79399,39.713003]</span>,<span class="hljs-selector-attr">[45.001987,39.740004]</span>]],<span class="hljs-selector-attr">[[[47.373315,41.219732]</span>,<span class="hljs-selector-attr">[47.815666,41.151416]</span>,<span class="hljs-selector-attr">[47.987283,41.405819]</span>,<span class="hljs-selector-attr">[48.584353,41.80887]</span>,<span class="hljs-selector-attr">[49.110264,41.282287]</span>,<span class="hljs-selector-attr">[49.618915,40.572924]</span>,<span class="hljs-selector-attr">[50.08483,40.526157]</span>,<span class="hljs-selector-attr">[50.392821,40.256561]</span>,<span class="hljs-selector-attr">[49.569202,40.176101]</span>,<span class="hljs-selector-attr">[49.395259,39.399482]</span>,<span class="hljs-selector-attr">[49.223228,39.049219]</span>,<span class="hljs-selector-attr">[48.856532,38.815486]</span>,<span class="hljs-selector-attr">[48.883249,38.320245]</span>,<span class="hljs-selector-attr">[48.634375,38.270378]</span>,<span class="hljs-selector-attr">[48.010744,38.794015]</span>,<span class="hljs-selector-attr">[48.355529,39.288765]</span>,<span class="hljs-selector-attr">[48.060095,39.582235]</span>,<span class="hljs-selector-attr">[47.685079,39.508364]</span>,<span class="hljs-selector-attr">[46.50572,38.770605]</span>,<span class="hljs-selector-attr">[46.483499,39.464155]</span>,<span class="hljs-selector-attr">[46.034534,39.628021]</span>,<span class="hljs-selector-attr">[45.610012,39.899994]</span>,<span class="hljs-selector-attr">[45.891907,40.218476]</span>,<span class="hljs-selector-attr">[45.359175,40.561504]</span>,<span class="hljs-selector-attr">[45.560351,40.81229]</span>,<span class="hljs-selector-attr">[45.179496,40.985354]</span>,<span class="hljs-selector-attr">[44.97248,41.248129]</span>,<span class="hljs-selector-attr">[45.217426,41.411452]</span>,<span class="hljs-selector-attr">[45.962601,41.123873]</span>,<span class="hljs-selector-attr">[46.501637,41.064445]</span>,<span class="hljs-selector-attr">[46.637908,41.181673]</span>,<span class="hljs-selector-attr">[46.145432,41.722802]</span>,<span class="hljs-selector-attr">[46.404951,41.860675]</span>,<span class="hljs-selector-attr">[46.686071,41.827137]</span>,<span class="hljs-selector-attr">[47.373315,41.219732]</span>]]]}},
{"<span class="hljs-selector-tag">type</span>":"<span class="hljs-selector-tag">Feature</span>","<span class="hljs-selector-tag">id</span>":"<span class="hljs-selector-tag">BDI</span>","<span class="hljs-selector-tag">properties</span>":{"<span class="hljs-selector-tag">name</span>":"<span class="hljs-selector-tag">Burundi</span>"},"<span class="hljs-selector-tag">geometry</span>":{"<span class="hljs-selector-tag">type</span>":"<span class="hljs-selector-tag">Polygon</span>","<span class="hljs-selector-tag">coordinates</span>":<span class="hljs-selector-attr">[[[29.339998,-4.499983]</span>,<span class="hljs-selector-attr">[29.276384,-3.293907]</span>,<span class="hljs-selector-attr">[29.024926,-2.839258]</span>,<span class="hljs-selector-attr">[29.632176,-2.917858]</span>,<span class="hljs-selector-attr">[29.938359,-2.348487]</span>,<span class="hljs-selector-attr">[30.469696,-2.413858]</span>,<span class="hljs-selector-attr">[30.527677,-2.807632]</span>,<span class="hljs-selector-attr">[30.743013,-3.034285]</span>,<span class="hljs-selector-attr">[30.752263,-3.35933]</span>,<span class="hljs-selector-attr">[30.50556,-3.568567]</span>,<span class="hljs-selector-attr">[30.116333,-4.090138]</span>,<span class="hljs-selector-attr">[29.753512,-4.452389]</span>,<span class="hljs-selector-attr">[29.339998,-4.499983]</span>]]}},
{"<span class="hljs-selector-tag">type</span>":"<span class="hljs-selector-tag">Feature</span>","<span class="hljs-selector-tag">id</span>":"<span class="hljs-selector-tag">BEL</span>","<span class="hljs-selector-tag">properties</span>":{"<span class="hljs-selector-tag">name</span>":"<span class="hljs-selector-tag">Belgium</span>"},"<span class="hljs-selector-tag">geometry</span>":{"<span class="hljs-selector-tag">type</span>":"<span class="hljs-selector-tag">Polygon</span>","<span class="hljs-selector-tag">coordinates</span>":<span class="hljs-selector-attr">[[[3.314971,51.345781]</span>,<span class="hljs-selector-attr">[4.047071,51.267259]</span>,<span class="hljs-selector-attr">[4.973991,51.475024]</span>,<span class="hljs-selector-attr">[5.606976,51.037298]</span>,<span class="hljs-selector-attr">[6.156658,50.803721]</span>,<span class="hljs-selector-attr">[6.043073,50.128052]</span>,<span class="hljs-selector-attr">[5.782417,50.090328]</span>,<span class="hljs-selector-attr">[5.674052,49.529484]</span>,<span class="hljs-selector-attr">[4.799222,49.985373]</span>,<span class="hljs-selector-attr">[4.286023,49.907497]</span>,<span class="hljs-selector-attr">[3.588184,50.378992]</span>,<span class="hljs-selector-attr">[3.123252,50.780363]</span>,<span class="hljs-selector-attr">[2.658422,50.796848]</span>,<span class="hljs-selector-attr">[2.513573,51.148506]</span>,<span class="hljs-selector-attr">[3.314971,51.345781]</span>]]}},
{"<span class="hljs-selector-tag">type</span>":"<span class="hljs-selector-tag">Feature</span>","<span class="hljs-selector-tag">id</span>":"<span class="hljs-selector-tag">BEN</span>","<span class="hljs-selector-tag">properties</span>":{"<span class="hljs-selector-tag">name</span>":"<span class="hljs-selector-tag">Benin</span>"},"<span class="hljs-selector-tag">geometry</span>":{"<span class="hljs-selector-tag">type</span>":"<span class="hljs-selector-tag">Polygon</span>","<span class="hljs-selector-tag">coordinates</span>":<span class="hljs-selector-attr">[[[2.691702,6.258817]</span>,<span class="hljs-selector-attr">[1.865241,6.142158]</span>,<span class="hljs-selector-attr">[1.618951,6.832038]</span>,<span class="hljs-selector-attr">[1.664478,9.12859]</span>,<span class="hljs-selector-attr">[1.463043,9.334624]</span>,<span class="hljs-selector-attr">[1.425061,9.825395]</span>,<span class="hljs-selector-attr">[1.077795,10.175607]</span>,<span class="hljs-selector-attr">[0.772336,10.470808]</span>,<span class="hljs-selector-attr">[0.899563,10.997339]</span>,<span class="hljs-selector-attr">[1.24347,11.110511]</span>,<span class="hljs-selector-attr">[1.447178,11.547719]</span>,<span class="hljs-selector-attr">[1.935986,11.64115]</span>,<span class="hljs-selector-attr">[2.154474,11.94015]</span>,<span class="hljs-selector-attr">[2.490164,12.233052]</span>,<span class="hljs-selector-attr">[2.848643,12.235636]</span>,<span class="hljs-selector-attr">[3.61118,11.660167]</span>,<span class="hljs-selector-attr">[3.572216,11.327939]</span>,<span class="hljs-selector-attr">[3.797112,10.734746]</span>,<span class="hljs-selector-attr">[3.60007,10.332186]</span>,<span class="hljs-selector-attr">[3.705438,10.06321]</span>,<span class="hljs-selector-attr">[3.220352,9.444153]</span>,<span class="hljs-selector-attr">[2.912308,9.137608]</span>,<span class="hljs-selector-attr">[2.723793,8.506845]</span>,<span class="hljs-selector-attr">[2.749063,7.870734]</span>,<span class="hljs-selector-attr">[2.691702,6.258817]</span>]]}},
{"<span class="hljs-selector-tag">type</span>":"<span class="hljs-selector-tag">Feature</span>","<span class="hljs-selector-tag">id</span>":"<span class="hljs-selector-tag">BFA</span>","<span class="hljs-selector-tag">properties</span>":{"<span class="hljs-selector-tag">name</span>":"<span class="hljs-selector-tag">Burkina</span>Â <span class="hljs-selector-tag">Faso</span>"},"<span class="hljs-selector-tag">geometry</span>":{"<span class="hljs-selector-tag">type</span>":"<span class="hljs-selector-tag">Polygon</span>","<span class="hljs-selector-tag">coordinates</span>":<span class="hljs-selector-attr">[[[-2.827496,9.642461]</span>,<span class="hljs-selector-attr">[-3.511899,9.900326]</span>,<span class="hljs-selector-attr">[-3.980449,9.862344]</span>,<span class="hljs-selector-attr">[-4.330247,9.610835]</span>,<span class="hljs-selector-attr">[-4.779884,9.821985]</span>,<span class="hljs-selector-attr">[-4.954653,10.152714]</span>,<span class="hljs-selector-attr">[-5.404342,10.370737]</span>,<span class="hljs-selector-attr">[-5.470565,10.95127]</span>,<span class="hljs-selector-attr">[-5.197843,11.375146]</span>,<span class="hljs-selector-attr">[-5.220942,11.713859]</span>,<span class="hljs-selector-attr">[-4.427166,12.542646]</span>,<span class="hljs-selector-attr">[-4.280405,13.228444]</span>,<span class="hljs-selector-attr">[-4.006391,13.472485]</span>,<span class="hljs-selector-attr">[-3.522803,13.337662]</span>,<span class="hljs-selector-attr">[-3.103707,13.541267]</span>,<span class="hljs-selector-attr">[-2.967694,13.79815]</span>,<span class="hljs-selector-attr">[-2.191825,14.246418]</span>,<span class="hljs-selector-attr">[-2.001035,14.559008]</span>,<span class="hljs-selector-attr">[-1.066363,14.973815]</span>,<span class="hljs-selector-attr">[-0.515854,15.116158]</span>,<span class="hljs-selector-attr">[-0.266257,14.924309]</span>,<span class="hljs-selector-attr">[0.374892,14.928908]</span>,<span class="hljs-selector-attr">[0.295646,14.444235]</span>,<span class="hljs-selector-attr">[0.429928,13.988733]</span>,<span class="hljs-selector-attr">[0.993046,13.33575]</span>,<span class="hljs-selector-attr">[1.024103,12.851826]</span>,<span class="hljs-selector-attr">[2.177108,12.625018]</span>,<span class="hljs-selector-attr">[2.154474,11.94015]</span>,<span class="hljs-selector-attr">[1.935986,11.64115]</span>,<span class="hljs-selector-attr">[1.447178,11.547719]</span>,<span class="hljs-selector-attr">[1.24347,11.110511]</span>,<span class="hljs-selector-attr">[0.899563,10.997339]</span>,<span class="hljs-selector-attr">[0.023803,11.018682]</span>,<span class="hljs-selector-attr">[-0.438702,11.098341]</span>,<span class="hljs-selector-attr">[-0.761576,10.93693]</span>,<span class="hljs-selector-attr">[-1.203358,11.009819]</span>,<span class="hljs-selector-attr">[-2.940409,10.96269]</span>,<span class="hljs-selector-attr">[-2.963896,10.395335]</span>,<span class="hljs-selector-attr">[-2.827496,9.642461]</span>]]}},
{"<span class="hljs-selector-tag">type</span>":"<span class="hljs-selector-tag">Feature</span>","<span class="hljs-selector-tag">id</span>":"<span class="hljs-selector-tag">BGD</span>","<span class="hljs-selector-tag">properties</span>":{"<span class="hljs-selector-tag">name</span>":"<span class="hljs-selector-tag">Bangladesh</span>"},"<span class="hljs-selector-tag">geometry</span>":{"<span class="hljs-selector-tag">type</span>":"<span class="hljs-selector-tag">Polygon</span>","<span class="hljs-selector-tag">coordinates</span>":<span class="hljs-selector-attr">[[[92.672721,22.041239]</span>,<span class="hljs-selector-attr">[92.652257,21.324048]</span>,<span class="hljs-selector-attr">[92.303234,21.475485]</span>,<span class="hljs-selector-attr">[92.368554,20.670883]</span>,<span class="hljs-selector-attr">[92.082886,21.192195]</span>,<span class="hljs-selector-attr">[92.025215,21.70157]</span>,<span class="hljs-selector-attr">[91.834891,22.182936]</span>,<span class="hljs-selector-attr">[91.417087,22.765019]</span>,<span class="hljs-selector-attr">[90.496006,22.805017]</span>,<span class="hljs-selector-attr">[90.586957,22.392794]</span>,<span class="hljs-selector-attr">[90.272971,21.836368]</span>,<span class="hljs-selector-attr">[89.847467,22.039146]</span>,<span class="hljs-selector-attr">[89.70205,21.857116]</span>,<span class="hljs-selector-attr">[89.418863,21.966179]</span>,<span class="hljs-selector-attr">[89.031961,22.055708]</span>,<span class="hljs-selector-attr">[88.876312,22.879146]</span>,<span class="hljs-selector-attr">[88.52977,23.631142]</span>,<span class="hljs-selector-attr">[88.69994,24.233715]</span>,<span class="hljs-selector-attr">[88.084422,24.501657]</span>,<span class="hljs-selector-attr">[88.306373,24.866079]</span>,<span class="hljs-selector-attr">[88.931554,25.238692]</span>,<span class="hljs-selector-attr">[88.209789,25.768066]</span>,<span class="hljs-selector-attr">[88.563049,26.446526]</span>,<span class="hljs-selector-attr">[89.355094,26.014407]</span>,<span class="hljs-selector-attr">[89.832481,25.965082]</span>,<span class="hljs-selector-attr">[89.920693,25.26975]</span>,<span class="hljs-selector-attr">[90.872211,25.132601]</span>,<span class="hljs-selector-attr">[91.799596,25.147432]</span>,<span class="hljs-selector-attr">[92.376202,24.976693]</span>,<span class="hljs-selector-attr">[91.915093,24.130414]</span>,<span class="hljs-selector-attr">[91.46773,24.072639]</span>,<span class="hljs-selector-attr">[91.158963,23.503527]</span>,<span class="hljs-selector-attr">[91.706475,22.985264]</span>,<span class="hljs-selector-attr">[91.869928,23.624346]</span>,<span class="hljs-selector-attr">[92.146035,23.627499]</span>,<span class="hljs-selector-attr">[92.672721,22.041239]</span>]]}},
{"<span class="hljs-selector-tag">type</span>":"<span class="hljs-selector-tag">Feature</span>","<span class="hljs-selector-tag">id</span>":"<span class="hljs-selector-tag">BGR</span>","<span class="hljs-selector-tag">properties</span>":{"<span class="hljs-selector-tag">name</span>":"<span class="hljs-selector-tag">Bulgaria</span>"},"<span class="hljs-selector-tag">geometry</span>":{"<span class="hljs-selector-tag">type</span>":"<span class="hljs-selector-tag">Polygon</span>","<span class="hljs-selector-tag">coordinates</span>":<span class="hljs-selector-attr">[[[22.65715,44.234923]</span>,<span class="hljs-selector-attr">[22.944832,43.823785]</span>,<span class="hljs-selector-attr">[23.332302,43.897011]</span>,<span class="hljs-selector-attr">[24.100679,43.741051]</span>,<span class="hljs-selector-attr">[25.569272,43.688445]</span>,<span class="hljs-selector-attr">[26.065159,43.943494]</span>,<span class="hljs-selector-attr">[27.2424,44.175986]</span>,<span class="hljs-selector-attr">[27.970107,43.812468]</span>,<span class="hljs-selector-attr">[28.558081,43.707462]</span>,<span class="hljs-selector-attr">[28.039095,43.293172]</span>,<span class="hljs-selector-attr">[27.673898,42.577892]</span>,<span class="hljs-selector-attr">[27.99672,42.007359]</span>,<span class="hljs-selector-attr">[27.135739,42.141485]</span>,<span class="hljs-selector-attr">[26.117042,41.826905]</span>,<span class="hljs-selector-attr">[26.106138,41.328899]</span>,<span class="hljs-selector-attr">[25.197201,41.234486]</span>,<span class="hljs-selector-attr">[24.492645,41.583896]</span>,<span class="hljs-selector-attr">[23.692074,41.309081]</span>,<span class="hljs-selector-attr">[22.952377,41.337994]</span>,<span class="hljs-selector-attr">[22.881374,41.999297]</span>,<span class="hljs-selector-attr">[22.380526,42.32026]</span>,<span class="hljs-selector-attr">[22.545012,42.461362]</span>,<span class="hljs-selector-attr">[22.436595,42.580321]</span>,<span class="hljs-selector-attr">[22.604801,42.898519]</span>,<span class="hljs-selector-attr">[22.986019,43.211161]</span>,<span class="hljs-selector-attr">[22.500157,43.642814]</span>,<span class="hljs-selector-attr">[22.410446,44.008063]</span>,<span class="hljs-selector-attr">[22.65715,44.234923]</span>]]}},
{"<span class="hljs-selector-tag">type</span>":"<span class="hljs-selector-tag">Feature</span>","<span class="hljs-selector-tag">id</span>":"<span class="hljs-selector-tag">BHS</span>","<span class="hljs-selector-tag">properties</span>":{"<span class="hljs-selector-tag">name</span>":"<span class="hljs-selector-tag">The</span>Â <span class="hljs-selector-tag">Bahamas</span>"},"<span class="hljs-selector-tag">geometry</span>":{"<span class="hljs-selector-tag">type</span>":"<span class="hljs-selector-tag">MultiPolygon</span>","<span class="hljs-selector-tag">coordinates</span>":<span class="hljs-selector-attr">[[[[-77.53466,23.75975]</span>,<span class="hljs-selector-attr">[-77.78,23.71]</span>,<span class="hljs-selector-attr">[-78.03405,24.28615]</span>,<span class="hljs-selector-attr">[-78.40848,24.57564]</span>,<span class="hljs-selector-attr">[-78.19087,25.2103]</span>,<span class="hljs-selector-attr">[-77.89,25.17]</span>,<span class="hljs-selector-attr">[-77.54,24.34]</span>,<span class="hljs-selector-attr">[-77.53466,23.75975]</span>]],<span class="hljs-selector-attr">[[[-77.82,26.58]</span>,<span class="hljs-selector-attr">[-78.91,26.42]</span>,<span class="hljs-selector-attr">[-78.98,26.79]</span>,<span class="hljs-selector-attr">[-78.51,26.87]</span>,<span class="hljs-selector-attr">[-77.85,26.84]</span>,<span class="hljs-selector-attr">[-77.82,26.58]</span>]],<span class="hljs-selector-attr">[[[-77,26.59]</span>,<span class="hljs-selector-attr">[-77.17255,25.87918]</span>,<span class="hljs-selector-attr">[-77.35641,26.00735]</span>,<span class="hljs-selector-attr">[-77.34,26.53]</span>,<span class="hljs-selector-attr">[-77.78802,26.92516]</span>,<span class="hljs-selector-attr">[-77.79,27.04]</span>,<span class="hljs-selector-attr">[-77,26.59]</span>]]]}},
{"<span class="hljs-selector-tag">type</span>":"<span class="hljs-selector-tag">Feature</span>","<span class="hljs-selector-tag">id</span>":"<span class="hljs-selector-tag">BIH</span>","<span class="hljs-selector-tag">properties</span>":{"<span class="hljs-selector-tag">name</span>":"<span class="hljs-selector-tag">Bosnia</span>Â <span class="hljs-selector-tag">and</span>Â <span class="hljs-selector-tag">Herzegovina</span>"},"<span class="hljs-selector-tag">geometry</span>":{"<span class="hljs-selector-tag">type</span>":"<span class="hljs-selector-tag">Polygon</span>","<span class="hljs-selector-tag">coordinates</span>":<span class="hljs-selector-attr">[[[19.005486,44.860234]</span>,<span class="hljs-selector-attr">[19.36803,44.863]</span>,<span class="hljs-selector-attr">[19.11761,44.42307]</span>,<span class="hljs-selector-attr">[19.59976,44.03847]</span>,<span class="hljs-selector-attr">[19.454,43.5681]</span>,<span class="hljs-selector-attr">[19.21852,43.52384]</span>,<span class="hljs-selector-attr">[19.03165,43.43253]</span>,<span class="hljs-selector-attr">[18.70648,43.20011]</span>,<span class="hljs-selector-attr">[18.56,42.65]</span>,<span class="hljs-selector-attr">[17.674922,43.028563]</span>,<span class="hljs-selector-attr">[17.297373,43.446341]</span>,<span class="hljs-selector-attr">[16.916156,43.667722]</span>,<span class="hljs-selector-attr">[16.456443,44.04124]</span>,<span class="hljs-selector-attr">[16.23966,44.351143]</span>,<span class="hljs-selector-attr">[15.750026,44.818712]</span>,<span class="hljs-selector-attr">[15.959367,45.233777]</span>,<span class="hljs-selector-attr">[16.318157,45.004127]</span>,<span class="hljs-selector-attr">[16.534939,45.211608]</span>,<span class="hljs-selector-attr">[17.002146,45.233777]</span>,<span class="hljs-selector-attr">[17.861783,45.06774]</span>,<span class="hljs-selector-attr">[18.553214,45.08159]</span>,<span class="hljs-selector-attr">[19.005486,44.860234]</span>]]}},
{"<span class="hljs-selector-tag">type</span>":"<span class="hljs-selector-tag">Feature</span>","<span class="hljs-selector-tag">id</span>":"<span class="hljs-selector-tag">BLR</span>","<span class="hljs-selector-tag">properties</span>":{"<span class="hljs-selector-tag">name</span>":"<span class="hljs-selector-tag">Belarus</span>"},"<span class="hljs-selector-tag">geometry</span>":{"<span class="hljs-selector-tag">type</span>":"<span class="hljs-selector-tag">Polygon</span>","<span class="hljs-selector-tag">coordinates</span>":<span class="hljs-selector-attr">[[[23.484128,53.912498]</span>,<span class="hljs-selector-attr">[24.450684,53.905702]</span>,<span class="hljs-selector-attr">[25.536354,54.282423]</span>,<span class="hljs-selector-attr">[25.768433,54.846963]</span>,<span class="hljs-selector-attr">[26.588279,55.167176]</span>,<span class="hljs-selector-attr">[26.494331,55.615107]</span>,<span class="hljs-selector-attr">[27.10246,55.783314]</span>,<span class="hljs-selector-attr">[28.176709,56.16913]</span>,<span class="hljs-selector-attr">[29.229513,55.918344]</span>,<span class="hljs-selector-attr">[29.371572,55.670091]</span>,<span class="hljs-selector-attr">[29.896294,55.789463]</span>,<span class="hljs-selector-attr">[30.873909,55.550976]</span>,<span class="hljs-selector-attr">[30.971836,55.081548]</span>,<span class="hljs-selector-attr">[30.757534,54.811771]</span>,<span class="hljs-selector-attr">[31.384472,54.157056]</span>,<span class="hljs-selector-attr">[31.791424,53.974639]</span>,<span class="hljs-selector-attr">[31.731273,53.794029]</span>,<span class="hljs-selector-attr">[32.405599,53.618045]</span>,<span class="hljs-selector-attr">[32.693643,53.351421]</span>,<span class="hljs-selector-attr">[32.304519,53.132726]</span>,<span class="hljs-selector-attr">[31.497644,53.167427]</span>,<span class="hljs-selector-attr">[31.305201,53.073996]</span>,<span class="hljs-selector-attr">[31.540018,52.742052]</span>,<span class="hljs-selector-attr">[31.785998,52.101678]</span>,<span class="hljs-selector-attr">[30.927549,52.042353]</span>,<span class="hljs-selector-attr">[30.619454,51.822806]</span>,<span class="hljs-selector-attr">[30.555117,51.319503]</span>,<span class="hljs-selector-attr">[30.157364,51.416138]</span>,<span class="hljs-selector-attr">[29.254938,51.368234]</span>,<span class="hljs-selector-attr">[28.992835,51.602044]</span>,<span class="hljs-selector-attr">[28.617613,51.427714]</span>,<span class="hljs-selector-attr">[28.241615,51.572227]</span>,<span class="hljs-selector-attr">[27.454066,51.592303]</span>,<span class="hljs-selector-attr">[26.337959,51.832289]</span>,<span class="hljs-selector-attr">[25.327788,51.910656]</span>,<span class="hljs-selector-attr">[24.553106,51.888461]</span>,<span class="hljs-selector-attr">[24.005078,51.617444]</span>,<span class="hljs-selector-attr">[23.527071,51.578454]</span>,<span class="hljs-selector-attr">[23.508002,52.023647]</span>,<span class="hljs-selector-attr">[23.199494,52.486977]</span>,<span class="hljs-selector-attr">[23.799199,52.691099]</span>,<span class="hljs-selector-attr">[23.804935,53.089731]</span>,<span class="hljs-selector-attr">[23.527536,53.470122]</span>,<span class="hljs-selector-attr">[23.484128,53.912498]</span>]]}},
{"<span class="hljs-selector-tag">type</span>":"<span class="hljs-selector-tag">Feature</span>","<span class="hljs-selector-tag">id</span>":"<span class="hljs-selector-tag">BLZ</span>","<span class="hljs-selector-tag">properties</span>":{"<span class="hljs-selector-tag">name</span>":"<span class="hljs-selector-tag">Belize</span>"},"<span class="hljs-selector-tag">geometry</span>":{"<span class="hljs-selector-tag">type</span>":"<span class="hljs-selector-tag">Polygon</span>","<span class="hljs-selector-tag">coordinates</span>":<span class="hljs-selector-attr">[[[-89.14308,17.808319]</span>,<span class="hljs-selector-attr">[-89.150909,17.955468]</span>,<span class="hljs-selector-attr">[-89.029857,18.001511]</span>,<span class="hljs-selector-attr">[-88.848344,17.883198]</span>,<span class="hljs-selector-attr">[-88.490123,18.486831]</span>,<span class="hljs-selector-attr">[-88.300031,18.499982]</span>,<span class="hljs-selector-attr">[-88.296336,18.353273]</span>,<span class="hljs-selector-attr">[-88.106813,18.348674]</span>,<span class="hljs-selector-attr">[-88.123479,18.076675]</span>,<span class="hljs-selector-attr">[-88.285355,17.644143]</span>,<span class="hljs-selector-attr">[-88.197867,17.489475]</span>,<span class="hljs-selector-attr">[-88.302641,17.131694]</span>,<span class="hljs-selector-attr">[-88.239518,17.036066]</span>,<span class="hljs-selector-attr">[-88.355428,16.530774]</span>,<span class="hljs-selector-attr">[-88.551825,16.265467]</span>,<span class="hljs-selector-attr">[-88.732434,16.233635]</span>,<span class="hljs-selector-attr">[-88.930613,15.887273]</span>,<span class="hljs-selector-attr">[-89.229122,15.886938]</span>,<span class="hljs-selector-attr">[-89.150806,17.015577]</span>,<span class="hljs-selector-attr">[-89.14308,17.808319]</span>]]}},
{"<span class="hljs-selector-tag">type</span>":"<span class="hljs-selector-tag">Feature</span>","<span class="hljs-selector-tag">id</span>":"<span class="hljs-selector-tag">BMU</span>","<span class="hljs-selector-tag">properties</span>":{"<span class="hljs-selector-tag">name</span>":"<span class="hljs-selector-tag">Bermuda</span>"},"<span class="hljs-selector-tag">geometry</span>":{"<span class="hljs-selector-tag">type</span>":"<span class="hljs-selector-tag">Polygon</span>","<span class="hljs-selector-tag">coordinates</span>":<span class="hljs-selector-attr">[[[-64.7799734332998,32.3072000581802]</span>,<span class="hljs-selector-attr">[-64.7873319183061,32.3039237143428]</span>,<span class="hljs-selector-attr">[-64.7946942710173,32.3032682700388]</span>,<span class="hljs-selector-attr">[-64.8094297981283,32.3098175728414]</span>,<span class="hljs-selector-attr">[-64.8167896352437,32.3058845718466]</span>,<span class="hljs-selector-attr">[-64.8101968029642,32.3022833180511]</span>,<span class="hljs-selector-attr">[-64.7962291465484,32.2934409732427]</span>,<span class="hljs-selector-attr">[-64.7815086336978,32.2868973114514]</span>,<span class="hljs-selector-attr">[-64.7997025513437,32.2796896417328]</span>,<span class="hljs-selector-attr">[-64.8066707691087,32.2747767569465]</span>,<span class="hljs-selector-attr">[-64.8225587873683,32.2669111289395]</span>,<span class="hljs-selector-attr">[-64.8287548840306,32.2669075473817]</span>,<span class="hljs-selector-attr">[-64.8306732143498,32.2583944840235]</span>,<span class="hljs-selector-attr">[-64.8399924854972,32.254782282336]</span>,<span class="hljs-selector-attr">[-64.8566090462354,32.2547740387514]</span>,<span class="hljs-selector-attr">[-64.8682296789446,32.2616393614322]</span>,<span class="hljs-selector-attr">[-64.8628241459563,32.2724481933959]</span>,<span class="hljs-selector-attr">[-64.8748651338951,32.2757120264753]</span>,<span class="hljs-selector-attr">[-64.8717752856644,32.2819371582026]</span>,<span class="hljs-selector-attr">[-64.8671422127295,32.2930760547989]</span>,<span class="hljs-selector-attr">[-64.8559068764437,32.2960321186471]</span>,<span class="hljs-selector-attr">[-64.8597429072279,32.3015842021933]</span>,<span class="hljs-selector-attr">[-64.8439233486717,32.3140553852543]</span>,<span class="hljs-selector-attr">[-64.8350242329311,32.3242161760006]</span>,<span class="hljs-selector-attr">[-64.8338690593672,32.3294587561557]</span>,<span class="hljs-selector-attr">[-64.8520298651164,32.3110911879954]</span>,<span class="hljs-selector-attr">[-64.8635922932573,32.3048469433363]</span>,<span class="hljs-selector-attr">[-64.8686668994079,32.30910745083]</span>,<span class="hljs-selector-attr">[-64.8721354593415,32.3041908606301]</span>,<span class="hljs-selector-attr">[-64.8779667328485,32.3038632800462]</span>,<span class="hljs-selector-attr">[-64.8780046844321,32.2907757831692]</span>,<span class="hljs-selector-attr">[-64.8849776658292,32.2819261366004]</span>,<span class="hljs-selector-attr">[-64.8783230004629,32.2613001418681]</span>,<span class="hljs-selector-attr">[-64.863194968877,32.2465799485801]</span>,<span class="hljs-selector-attr">[-64.8519819555722,32.2485519134663]</span>,<span class="hljs-selector-attr">[-64.842311980074,32.2492123317296]</span>,<span class="hljs-selector-attr">[-64.8388242605209,32.2475773472534]</span>,<span class="hljs-selector-attr">[-64.8334002575532,32.2462714714698]</span>,<span class="hljs-selector-attr">[-64.8256389530584,32.2472637398594]</span>,<span class="hljs-selector-attr">[-64.8205697556026,32.2531698880328]</span>,<span class="hljs-selector-attr">[-64.8105087275579,32.2561208974156]</span>,<span class="hljs-selector-attr">[-64.7900177727338,32.2659446936992]</span>,<span class="hljs-selector-attr">[-64.7745415970416,32.2718413023427]</span>,<span class="hljs-selector-attr">[-64.7644742436426,32.2855931353214]</span>,<span class="hljs-selector-attr">[-64.7551803442276,32.2908326702531]</span>,<span class="hljs-selector-attr">[-64.7423982971436,32.2996734994024]</span>,<span class="hljs-selector-attr">[-64.7206991797682,32.3137542201258]</span>,<span class="hljs-selector-attr">[-64.7117851247134,32.3176823360806]</span>,<span class="hljs-selector-attr">[-64.6962778813133,32.3275029115532]</span>,<span class="hljs-selector-attr">[-64.6768921127452,32.3324095397555]</span>,<span class="hljs-selector-attr">[-64.6567136927777,32.3451776458469]</span>,<span class="hljs-selector-attr">[-64.6532168823499,32.3494356627941]</span>,<span class="hljs-selector-attr">[-64.6605720384429,32.3589423487763]</span>,<span class="hljs-selector-attr">[-64.65125819471,32.3615600906466]</span>,<span class="hljs-selector-attr">[-64.6462011670816,32.36975169749]</span>,<span class="hljs-selector-attr">[-64.6613227512832,32.3763135008721]</span>,<span class="hljs-selector-attr">[-64.6690666074397,32.388444543924]</span>,<span class="hljs-selector-attr">[-64.6834270548595,32.3854968316788]</span>,<span class="hljs-selector-attr">[-64.6954617672714,32.3763221285869]</span>,<span class="hljs-selector-attr">[-64.70438689565,32.3704254760469]</span>,<span class="hljs-selector-attr">[-64.7117569982798,32.368132600249]</span>,<span class="hljs-selector-attr">[-64.7061764744404,32.3600110593559]</span>,<span class="hljs-selector-attr">[-64.700531552697,32.3590601356818]</span>,<span class="hljs-selector-attr">[-64.6940348033967,32.3640708659835]</span>,<span class="hljs-selector-attr">[-64.6895164826082,32.3633598579866]</span>,<span class="hljs-selector-attr">[-64.6864150099255,32.3547797587266]</span>,<span class="hljs-selector-attr">[-64.6824635995504,32.3540628176846]</span>,<span class="hljs-selector-attr">[-64.6835876652835,32.3626447677968]</span>,<span class="hljs-selector-attr">[-64.6801998697415,32.3631199096979]</span>,<span class="hljs-selector-attr">[-64.6672170444687,32.3597751617473]</span>,<span class="hljs-selector-attr">[-64.6598811264978,32.3497625771755]</span>,<span class="hljs-selector-attr">[-64.6737331235384,32.3390281851635]</span>,<span class="hljs-selector-attr">[-64.6887090648183,32.3342439408053]</span>,<span class="hljs-selector-attr">[-64.706732854446,32.3429010723036]</span>,<span class="hljs-selector-attr">[-64.7149301576112,32.3552188753513]</span>,<span class="hljs-selector-attr">[-64.7185967666669,32.3552239212394]</span>,<span class="hljs-selector-attr">[-64.7214189847314,32.3518830231342]</span>,<span class="hljs-selector-attr">[-64.7270616067222,32.3466461715475]</span>,<span class="hljs-selector-attr">[-64.734962460882,32.3442819830499]</span>,<span class="hljs-selector-attr">[-64.7383521549094,32.3407216514918]</span>,<span class="hljs-selector-attr">[-64.7411729976333,32.3311790864627]</span>,<span class="hljs-selector-attr">[-64.7423019216485,32.323311561213]</span>,<span class="hljs-selector-attr">[-64.7462482354281,32.318538611581]</span>,<span class="hljs-selector-attr">[-64.7566773739613,32.3130509130175]</span>,<span class="hljs-selector-attr">[-64.768738200563,32.3088369816572]</span>,<span class="hljs-selector-attr">[-64.7799734332998,32.3072000581802]</span>]]}},
{"<span class="hljs-selector-tag">type</span>":"<span class="hljs-selector-tag">Feature</span>","<span class="hljs-selector-tag">id</span>":"<span class="hljs-selector-tag">BOL</span>","<span class="hljs-selector-tag">properties</span>":{"<span class="hljs-selector-tag">name</span>":"<span class="hljs-selector-tag">Bolivia</span>"},"<span class="hljs-selector-tag">geometry</span>":{"<span class="hljs-selector-tag">type</span>":"<span class="hljs-selector-tag">Polygon</span>","<span class="hljs-selector-tag">coordinates</span>":<span class="hljs-selector-attr">[[[-62.846468,-22.034985]</span>,<span class="hljs-selector-attr">[-63.986838,-21.993644]</span>,<span class="hljs-selector-attr">[-64.377021,-22.798091]</span>,<span class="hljs-selector-attr">[-64.964892,-22.075862]</span>,<span class="hljs-selector-attr">[-66.273339,-21.83231]</span>,<span class="hljs-selector-attr">[-67.106674,-22.735925]</span>,<span class="hljs-selector-attr">[-67.82818,-22.872919]</span>,<span class="hljs-selector-attr">[-68.219913,-21.494347]</span>,<span class="hljs-selector-attr">[-68.757167,-20.372658]</span>,<span class="hljs-selector-attr">[-68.442225,-19.405068]</span>,<span class="hljs-selector-attr">[-68.966818,-18.981683]</span>,<span class="hljs-selector-attr">[-69.100247,-18.260125]</span>,<span class="hljs-selector-attr">[-69.590424,-17.580012]</span>,<span class="hljs-selector-attr">[-68.959635,-16.500698]</span>,<span class="hljs-selector-attr">[-69.389764,-15.660129]</span>,<span class="hljs-selector-attr">[-69.160347,-15.323974]</span>,<span class="hljs-selector-attr">[-69.339535,-14.953195]</span>,<span class="hljs-selector-attr">[-68.948887,-14.453639]</span>,<span class="hljs-selector-attr">[-68.929224,-13.602684]</span>,<span class="hljs-selector-attr">[-68.88008,-12.899729]</span>,<span class="hljs-selector-attr">[-68.66508,-12.5613]</span>,<span class="hljs-selector-attr">[-69.529678,-10.951734]</span>,<span class="hljs-selector-attr">[-68.786158,-11.03638]</span>,<span class="hljs-selector-attr">[-68.271254,-11.014521]</span>,<span class="hljs-selector-attr">[-68.048192,-10.712059]</span>,<span class="hljs-selector-attr">[-67.173801,-10.306812]</span>,<span class="hljs-selector-attr">[-66.646908,-9.931331]</span>,<span class="hljs-selector-attr">[-65.338435,-9.761988]</span>,<span class="hljs-selector-attr">[-65.444837,-10.511451]</span>,<span class="hljs-selector-attr">[-65.321899,-10.895872]</span>,<span class="hljs-selector-attr">[-65.402281,-11.56627]</span>,<span class="hljs-selector-attr">[-64.316353,-12.461978]</span>,<span class="hljs-selector-attr">[-63.196499,-12.627033]</span>,<span class="hljs-selector-attr">[-62.80306,-13.000653]</span>,<span class="hljs-selector-attr">[-62.127081,-13.198781]</span>,<span class="hljs-selector-attr">[-61.713204,-13.489202]</span>,<span class="hljs-selector-attr">[-61.084121,-13.479384]</span>,<span class="hljs-selector-attr">[-60.503304,-13.775955]</span>,<span class="hljs-selector-attr">[-60.459198,-14.354007]</span>,<span class="hljs-selector-attr">[-60.264326,-14.645979]</span>,<span class="hljs-selector-attr">[-60.251149,-15.077219]</span>,<span class="hljs-selector-attr">[-60.542966,-15.09391]</span>,<span class="hljs-selector-attr">[-60.15839,-16.258284]</span>,<span class="hljs-selector-attr">[-58.24122,-16.299573]</span>,<span class="hljs-selector-attr">[-58.388058,-16.877109]</span>,<span class="hljs-selector-attr">[-58.280804,-17.27171]</span>,<span class="hljs-selector-attr">[-57.734558,-17.552468]</span>,<span class="hljs-selector-attr">[-57.498371,-18.174188]</span>,<span class="hljs-selector-attr">[-57.676009,-18.96184]</span>,<span class="hljs-selector-attr">[-57.949997,-19.400004]</span>,<span class="hljs-selector-attr">[-57.853802,-19.969995]</span>,<span class="hljs-selector-attr">[-58.166392,-20.176701]</span>,<span class="hljs-selector-attr">[-58.183471,-19.868399]</span>,<span class="hljs-selector-attr">[-59.115042,-19.356906]</span>,<span class="hljs-selector-attr">[-60.043565,-19.342747]</span>,<span class="hljs-selector-attr">[-61.786326,-19.633737]</span>,<span class="hljs-selector-attr">[-62.265961,-20.513735]</span>,<span class="hljs-selector-attr">[-62.291179,-21.051635]</span>,<span class="hljs-selector-attr">[-62.685057,-22.249029]</span>,<span class="hljs-selector-attr">[-62.846468,-22.034985]</span>]]}},
{"<span class="hljs-selector-tag">type</span>":"<span class="hljs-selector-tag">Feature</span>","<span class="hljs-selector-tag">id</span>":"<span class="hljs-selector-tag">BRA</span>","<span class="hljs-selector-tag">properties</span>":{"<span class="hljs-selector-tag">name</span>":"<span class="hljs-selector-tag">Brazil</span>"},"<span class="hljs-selector-tag">geometry</span>":{"<span class="hljs-selector-tag">type</span>":"<span class="hljs-selector-tag">Polygon</span>","<span class="hljs-selector-tag">coordinates</span>":<span class="hljs-selector-attr">[[[-57.625133,-30.216295]</span>,<span class="hljs-selector-attr">[-56.2909,-28.852761]</span>,<span class="hljs-selector-attr">[-55.162286,-27.881915]</span>,<span class="hljs-selector-attr">[-54.490725,-27.474757]</span>,<span class="hljs-selector-attr">[-53.648735,-26.923473]</span>,<span class="hljs-selector-attr">[-53.628349,-26.124865]</span>,<span class="hljs-selector-attr">[-54.13005,-25.547639]</span>,<span class="hljs-selector-attr">[-54.625291,-25.739255]</span>,<span class="hljs-selector-attr">[-54.428946,-25.162185]</span>,<span class="hljs-selector-attr">[-54.293476,-24.5708]</span>,<span class="hljs-selector-attr">[-54.29296,-24.021014]</span>,<span class="hljs-selector-attr">[-54.652834,-23.839578]</span>,<span class="hljs-selector-attr">[-55.027902,-24.001274]</span>,<span class="hljs-selector-attr">[-55.400747,-23.956935]</span>,<span class="hljs-selector-attr">[-55.517639,-23.571998]</span>,<span class="hljs-selector-attr">[-55.610683,-22.655619]</span>,<span class="hljs-selector-attr">[-55.797958,-22.35693]</span>,<span class="hljs-selector-attr">[-56.473317,-22.0863]</span>,<span class="hljs-selector-attr">[-56.88151,-22.282154]</span>,<span class="hljs-selector-attr">[-57.937156,-22.090176]</span>,<span class="hljs-selector-attr">[-57.870674,-20.732688]</span>,<span class="hljs-selector-attr">[-58.166392,-20.176701]</span>,<span class="hljs-selector-attr">[-57.853802,-19.969995]</span>,<span class="hljs-selector-attr">[-57.949997,-19.400004]</span>,<span class="hljs-selector-attr">[-57.676009,-18.96184]</span>,<span class="hljs-selector-attr">[-57.498371,-18.174188]</span>,<span class="hljs-selector-attr">[-57.734558,-17.552468]</span>,<span class="hljs-selector-attr">[-58.280804,-17.27171]</span>,<span class="hljs-selector-attr">[-58.388058,-16.877109]</span>,<span class="hljs-selector-attr">[-58.24122,-16.299573]</span>,<span class="hljs-selector-attr">[-60.15839,-16.258284]</span>,<span class="hljs-selector-attr">[-60.542966,-15.09391]</span>,<span class="hljs-selector-attr">[-60.251149,-15.077219]</span>,<span class="hljs-selector-attr">[-60.264326,-14.645979]</span>,<span class="hljs-selector-attr">[-60.459198,-14.354007]</span>,<span class="hljs-selector-attr">[-60.503304,-13.775955]</span>,<span class="hljs-selector-attr">[-61.084121,-13.479384]</span>,<span class="hljs-selector-attr">[-61.713204,-13.489202]</span>,<span class="hljs-selector-attr">[-62.127081,-13.198781]</span>,<span class="hljs-selector-attr">[-62.80306,-13.000653]</span>,<span class="hljs-selector-attr">[-63.196499,-12.627033]</span>,<span class="hljs-selector-attr">[-64.316353,-12.461978]</span>,<span class="hljs-selector-attr">[-65.402281,-11.56627]</span>,<span class="hljs-selector-attr">[-65.321899,-10.895872]</span>,<span class="hljs-selector-attr">[-65.444837,-10.511451]</span>,<span class="hljs-selector-attr">[-65.338435,-9.761988]</span>,<span class="hljs-selector-attr">[-66.646908,-9.931331]</span>,<span class="hljs-selector-attr">[-67.173801,-10.306812]</span>,<span class="hljs-selector-attr">[-68.048192,-10.712059]</span>,<span class="hljs-selector-attr">[-68.271254,-11.014521]</span>,<span class="hljs-selector-attr">[-68.786158,-11.03638]</span>,<span class="hljs-selector-attr">[-69.529678,-10.951734]</span>,<span class="hljs-selector-attr">[-70.093752,-11.123972]</span>,<span class="hljs-selector-attr">[-70.548686,-11.009147]</span>,<span class="hljs-selector-attr">[-70.481894,-9.490118]</span>,<span class="hljs-selector-attr">[-71.302412,-10.079436]</span>,<span class="hljs-selector-attr">[-72.184891,-10.053598]</span>,<span class="hljs-selector-attr">[-72.563033,-9.520194]</span>,<span class="hljs-selector-attr">[-73.226713,-9.462213]</span>,<span class="hljs-selector-attr">[-73.015383,-9.032833]</span>,<span class="hljs-selector-attr">[-73.571059,-8.424447]</span>,<span class="hljs-selector-attr">[-73.987235,-7.52383]</span>,<span class="hljs-selector-attr">[-73.723401,-7.340999]</span>,<span class="hljs-selector-attr">[-73.724487,-6.918595]</span>,<span class="hljs-selector-attr">[-73.120027,-6.629931]</span>,<span class="hljs-selector-attr">[-73.219711,-6.089189]</span>,<span class="hljs-selector-attr">[-72.964507,-5.741251]</span>,<span class="hljs-selector-attr">[-72.891928,-5.274561]</span>,<span class="hljs-selector-attr">[-71.748406,-4.593983]</span>,<span class="hljs-selector-attr">[-70.928843,-4.401591]</span>,<span class="hljs-selector-attr">[-70.794769,-4.251265]</span>,<span class="hljs-selector-attr">[-69.893635,-4.298187]</span>,<span class="hljs-selector-attr">[-69.444102,-1.556287]</span>,<span class="hljs-selector-attr">[-69.420486,-1.122619]</span>,<span class="hljs-selector-attr">[-69.577065,-0.549992]</span>,<span class="hljs-selector-attr">[-70.020656,-0.185156]</span>,<span class="hljs-selector-attr">[-70.015566,0.541414]</span>,<span class="hljs-selector-attr">[-69.452396,0.706159]</span>,<span class="hljs-selector-attr">[-69.252434,0.602651]</span>,<span class="hljs-selector-attr">[-69.218638,0.985677]</span>,<span class="hljs-selector-attr">[-69.804597,1.089081]</span>,<span class="hljs-selector-attr">[-69.816973,1.714805]</span>,<span class="hljs-selector-attr">[-67.868565,1.692455]</span>,<span class="hljs-selector-attr">[-67.53781,2.037163]</span>,<span class="hljs-selector-attr">[-67.259998,1.719999]</span>,<span class="hljs-selector-attr">[-67.065048,1.130112]</span>,<span class="hljs-selector-attr">[-66.876326,1.253361]</span>,<span class="hljs-selector-attr">[-66.325765,0.724452]</span>,<span class="hljs-selector-attr">[-65.548267,0.789254]</span>,<span class="hljs-selector-attr">[-65.354713,1.095282]</span>,<span class="hljs-selector-attr">[-64.611012,1.328731]</span>,<span class="hljs-selector-attr">[-64.199306,1.492855]</span>,<span class="hljs-selector-attr">[-64.083085,1.916369]</span>,<span class="hljs-selector-attr">[-63.368788,2.2009]</span>,<span class="hljs-selector-attr">[-63.422867,2.411068]</span>,<span class="hljs-selector-attr">[-64.269999,2.497006]</span>,<span class="hljs-selector-attr">[-64.408828,3.126786]</span>,<span class="hljs-selector-attr">[-64.368494,3.79721]</span>,<span class="hljs-selector-attr">[-64.816064,4.056445]</span>,<span class="hljs-selector-attr">[-64.628659,4.148481]</span>,<span class="hljs-selector-attr">[-63.888343,4.02053]</span>,<span class="hljs-selector-attr">[-63.093198,3.770571]</span>,<span class="hljs-selector-attr">[-62.804533,4.006965]</span>,<span class="hljs-selector-attr">[-62.08543,4.162124]</span>,<span class="hljs-selector-attr">[-60.966893,4.536468]</span>,<span class="hljs-selector-attr">[-60.601179,4.918098]</span>,<span class="hljs-selector-attr">[-60.733574,5.200277]</span>,<span class="hljs-selector-attr">[-60.213683,5.244486]</span>,<span class="hljs-selector-attr">[-59.980959,5.014061]</span>,<span class="hljs-selector-attr">[-60.111002,4.574967]</span>,<span class="hljs-selector-attr">[-59.767406,4.423503]</span>,<span class="hljs-selector-attr">[-59.53804,3.958803]</span>,<span class="hljs-selector-attr">[-59.815413,3.606499]</span>,<span class="hljs-selector-attr">[-59.974525,2.755233]</span>,<span class="hljs-selector-attr">[-59.718546,2.24963]</span>,<span class="hljs-selector-attr">[-59.646044,1.786894]</span>,<span class="hljs-selector-attr">[-59.030862,1.317698]</span>,<span class="hljs-selector-attr">[-58.540013,1.268088]</span>,<span class="hljs-selector-attr">[-58.429477,1.463942]</span>,<span class="hljs-selector-attr">[-58.11345,1.507195]</span>,<span class="hljs-selector-attr">[-57.660971,1.682585]</span>,<span class="hljs-selector-attr">[-57.335823,1.948538]</span>,<span class="hljs-selector-attr">[-56.782704,1.863711]</span>,<span class="hljs-selector-attr">[-56.539386,1.899523]</span>,<span class="hljs-selector-attr">[-55.995698,1.817667]</span>,<span class="hljs-selector-attr">[-55.9056,2.021996]</span>,<span class="hljs-selector-attr">[-56.073342,2.220795]</span>,<span class="hljs-selector-attr">[-55.973322,2.510364]</span>,<span class="hljs-selector-attr">[-55.569755,2.421506]</span>,<span class="hljs-selector-attr">[-55.097587,2.523748]</span>,<span class="hljs-selector-attr">[-54.524754,2.311849]</span>,<span class="hljs-selector-attr">[-54.088063,2.105557]</span>,<span class="hljs-selector-attr">[-53.778521,2.376703]</span>,<span class="hljs-selector-attr">[-53.554839,2.334897]</span>,<span class="hljs-selector-attr">[-53.418465,2.053389]</span>,<span class="hljs-selector-attr">[-52.939657,2.124858]</span>,<span class="hljs-selector-attr">[-52.556425,2.504705]</span>,<span class="hljs-selector-attr">[-52.249338,3.241094]</span>,<span class="hljs-selector-attr">[-51.657797,4.156232]</span>,<span class="hljs-selector-attr">[-51.317146,4.203491]</span>,<span class="hljs-selector-attr">[-51.069771,3.650398]</span>,<span class="hljs-selector-attr">[-50.508875,1.901564]</span>,<span class="hljs-selector-attr">[-49.974076,1.736483]</span>,<span class="hljs-selector-attr">[-49.947101,1.04619]</span>,<span class="hljs-selector-attr">[-50.699251,0.222984]</span>,<span class="hljs-selector-attr">[-50.388211,-0.078445]</span>,<span class="hljs-selector-attr">[-48.620567,-0.235489]</span>,<span class="hljs-selector-attr">[-48.584497,-1.237805]</span>,<span class="hljs-selector-attr">[-47.824956,-0.581618]</span>,<span class="hljs-selector-attr">[-46.566584,-0.941028]</span>,<span class="hljs-selector-attr">[-44.905703,-1.55174]</span>,<span class="hljs-selector-attr">[-44.417619,-2.13775]</span>,<span class="hljs-selector-attr">[-44.581589,-2.691308]</span>,<span class="hljs-selector-attr">[-43.418791,-2.38311]</span>,<span class="hljs-selector-attr">[-41.472657,-2.912018]</span>,<span class="hljs-selector-attr">[-39.978665,-2.873054]</span>,<span class="hljs-selector-attr">[-38.500383,-3.700652]</span>,<span class="hljs-selector-attr">[-37.223252,-4.820946]</span>,<span class="hljs-selector-attr">[-36.452937,-5.109404]</span>,<span class="hljs-selector-attr">[-35.597796,-5.149504]</span>,<span class="hljs-selector-attr">[-35.235389,-5.464937]</span>,<span class="hljs-selector-attr">[-34.89603,-6.738193]</span>,<span class="hljs-selector-attr">[-34.729993,-7.343221]</span>,<span class="hljs-selector-attr">[-35.128212,-8.996401]</span>,<span class="hljs-selector-attr">[-35.636967,-9.649282]</span>,<span class="hljs-selector-attr">[-37.046519,-11.040721]</span>,<span class="hljs-selector-attr">[-37.683612,-12.171195]</span>,<span class="hljs-selector-attr">[-38.423877,-13.038119]</span>,<span class="hljs-selector-attr">[-38.673887,-13.057652]</span>,<span class="hljs-selector-attr">[-38.953276,-13.79337]</span>,<span class="hljs-selector-attr">[-38.882298,-15.667054]</span>,<span class="hljs-selector-attr">[-39.161092,-17.208407]</span>,<span class="hljs-selector-attr">[-39.267339,-17.867746]</span>,<span class="hljs-selector-attr">[-39.583521,-18.262296]</span>,<span class="hljs-selector-attr">[-39.760823,-19.599113]</span>,<span class="hljs-selector-attr">[-40.774741,-20.904512]</span>,<span class="hljs-selector-attr">[-40.944756,-21.937317]</span>,<span class="hljs-selector-attr">[-41.754164,-22.370676]</span>,<span class="hljs-selector-attr">[-41.988284,-22.97007]</span>,<span class="hljs-selector-attr">[-43.074704,-22.967693]</span>,<span class="hljs-selector-attr">[-44.647812,-23.351959]</span>,<span class="hljs-selector-attr">[-45.352136,-23.796842]</span>,<span class="hljs-selector-attr">[-46.472093,-24.088969]</span>,<span class="hljs-selector-attr">[-47.648972,-24.885199]</span>,<span class="hljs-selector-attr">[-48.495458,-25.877025]</span>,<span class="hljs-selector-attr">[-48.641005,-26.623698]</span>,<span class="hljs-selector-attr">[-48.474736,-27.175912]</span>,<span class="hljs-selector-attr">[-48.66152,-28.186135]</span>,<span class="hljs-selector-attr">[-48.888457,-28.674115]</span>,<span class="hljs-selector-attr">[-49.587329,-29.224469]</span>,<span class="hljs-selector-attr">[-50.696874,-30.984465]</span>,<span class="hljs-selector-attr">[-51.576226,-31.777698]</span>,<span class="hljs-selector-attr">[-52.256081,-32.24537]</span>,<span class="hljs-selector-attr">[-52.7121,-33.196578]</span>,<span class="hljs-selector-attr">[-53.373662,-33.768378]</span>,<span class="hljs-selector-attr">[-53.650544,-33.202004]</span>,<span class="hljs-selector-attr">[-53.209589,-32.727666]</span>,<span class="hljs-selector-attr">[-53.787952,-32.047243]</span>,<span class="hljs-selector-attr">[-54.572452,-31.494511]</span>,<span class="hljs-selector-attr">[-55.60151,-30.853879]</span>,<span class="hljs-selector-attr">[-55.973245,-30.883076]</span>,<span class="hljs-selector-attr">[-56.976026,-30.109686]</span>,<span class="hljs-selector-attr">[-57.625133,-30.216295]</span>]]}},
{"<span class="hljs-selector-tag">type</span>":"<span class="hljs-selector-tag">Feature</span>","<span class="hljs-selector-tag">id</span>":"<span class="hljs-selector-tag">BRN</span>","<span class="hljs-selector-tag">properties</span>":{"<span class="hljs-selector-tag">name</span>":"<span class="hljs-selector-tag">Brunei</span>"},"<span class="hljs-selector-tag">geometry</span>":{"<span class="hljs-selector-tag">type</span>":"<span class="hljs-selector-tag">Polygon</span>","<span class="hljs-selector-tag">coordinates</span>":<span class="hljs-selector-attr">[[[114.204017,4.525874]</span>,<span class="hljs-selector-attr">[114.599961,4.900011]</span>,<span class="hljs-selector-attr">[115.45071,5.44773]</span>,<span class="hljs-selector-attr">[115.4057,4.955228]</span>,<span class="hljs-selector-attr">[115.347461,4.316636]</span>,<span class="hljs-selector-attr">[114.869557,4.348314]</span>,<span class="hljs-selector-attr">[114.659596,4.007637]</span>,<span class="hljs-selector-attr">[114.204017,4.525874]</span>]]}},
{"<span class="hljs-selector-tag">type</span>":"<span class="hljs-selector-tag">Feature</span>","<span class="hljs-selector-tag">id</span>":"<span class="hljs-selector-tag">BTN</span>","<span class="hljs-selector-tag">properties</span>":{"<span class="hljs-selector-tag">name</span>":"<span class="hljs-selector-tag">Bhutan</span>"},"<span class="hljs-selector-tag">geometry</span>":{"<span class="hljs-selector-tag">type</span>":"<span class="hljs-selector-tag">Polygon</span>","<span class="hljs-selector-tag">coordinates</span>":<span class="hljs-selector-attr">[[[91.696657,27.771742]</span>,<span class="hljs-selector-attr">[92.103712,27.452614]</span>,<span class="hljs-selector-attr">[92.033484,26.83831]</span>,<span class="hljs-selector-attr">[91.217513,26.808648]</span>,<span class="hljs-selector-attr">[90.373275,26.875724]</span>,<span class="hljs-selector-attr">[89.744528,26.719403]</span>,<span class="hljs-selector-attr">[88.835643,27.098966]</span>,<span class="hljs-selector-attr">[88.814248,27.299316]</span>,<span class="hljs-selector-attr">[89.47581,28.042759]</span>,<span class="hljs-selector-attr">[90.015829,28.296439]</span>,<span class="hljs-selector-attr">[90.730514,28.064954]</span>,<span class="hljs-selector-attr">[91.258854,28.040614]</span>,<span class="hljs-selector-attr">[91.696657,27.771742]</span>]]}},
{"<span class="hljs-selector-tag">type</span>":"<span class="hljs-selector-tag">Feature</span>","<span class="hljs-selector-tag">id</span>":"<span class="hljs-selector-tag">BWA</span>","<span class="hljs-selector-tag">properties</span>":{"<span class="hljs-selector-tag">name</span>":"<span class="hljs-selector-tag">Botswana</span>"},"<span class="hljs-selector-tag">geometry</span>":{"<span class="hljs-selector-tag">type</span>":"<span class="hljs-selector-tag">Polygon</span>","<span class="hljs-selector-tag">coordinates</span>":<span class="hljs-selector-attr">[[[25.649163,-18.536026]</span>,<span class="hljs-selector-attr">[25.850391,-18.714413]</span>,<span class="hljs-selector-attr">[26.164791,-19.293086]</span>,<span class="hljs-selector-attr">[27.296505,-20.39152]</span>,<span class="hljs-selector-attr">[27.724747,-20.499059]</span>,<span class="hljs-selector-attr">[27.727228,-20.851802]</span>,<span class="hljs-selector-attr">[28.02137,-21.485975]</span>,<span class="hljs-selector-attr">[28.794656,-21.639454]</span>,<span class="hljs-selector-attr">[29.432188,-22.091313]</span>,<span class="hljs-selector-attr">[28.017236,-22.827754]</span>,<span class="hljs-selector-attr">[27.11941,-23.574323]</span>,<span class="hljs-selector-attr">[26.786407,-24.240691]</span>,<span class="hljs-selector-attr">[26.485753,-24.616327]</span>,<span class="hljs-selector-attr">[25.941652,-24.696373]</span>,<span class="hljs-selector-attr">[25.765849,-25.174845]</span>,<span class="hljs-selector-attr">[25.664666,-25.486816]</span>,<span class="hljs-selector-attr">[25.025171,-25.71967]</span>,<span class="hljs-selector-attr">[24.211267,-25.670216]</span>,<span class="hljs-selector-attr">[23.73357,-25.390129]</span>,<span class="hljs-selector-attr">[23.312097,-25.26869]</span>,<span class="hljs-selector-attr">[22.824271,-25.500459]</span>,<span class="hljs-selector-attr">[22.579532,-25.979448]</span>,<span class="hljs-selector-attr">[22.105969,-26.280256]</span>,<span class="hljs-selector-attr">[21.605896,-26.726534]</span>,<span class="hljs-selector-attr">[20.889609,-26.828543]</span>,<span class="hljs-selector-attr">[20.66647,-26.477453]</span>,<span class="hljs-selector-attr">[20.758609,-25.868136]</span>,<span class="hljs-selector-attr">[20.165726,-24.917962]</span>,<span class="hljs-selector-attr">[19.895768,-24.76779]</span>,<span class="hljs-selector-attr">[19.895458,-21.849157]</span>,<span class="hljs-selector-attr">[20.881134,-21.814327]</span>,<span class="hljs-selector-attr">[20.910641,-18.252219]</span>,<span class="hljs-selector-attr">[21.65504,-18.219146]</span>,<span class="hljs-selector-attr">[23.196858,-17.869038]</span>,<span class="hljs-selector-attr">[23.579006,-18.281261]</span>,<span class="hljs-selector-attr">[24.217365,-17.889347]</span>,<span class="hljs-selector-attr">[24.520705,-17.887125]</span>,<span class="hljs-selector-attr">[25.084443,-17.661816]</span>,<span class="hljs-selector-attr">[25.264226,-17.73654]</span>,<span class="hljs-selector-attr">[25.649163,-18.536026]</span>]]}},
{"<span class="hljs-selector-tag">type</span>":"<span class="hljs-selector-tag">Feature</span>","<span class="hljs-selector-tag">id</span>":"<span class="hljs-selector-tag">CAF</span>","<span class="hljs-selector-tag">properties</span>":{"<span class="hljs-selector-tag">name</span>":"<span class="hljs-selector-tag">Central</span>Â <span class="hljs-selector-tag">African</span>Â <span class="hljs-selector-tag">Republic</span>"},"<span class="hljs-selector-tag">geometry</span>":{"<span class="hljs-selector-tag">type</span>":"<span class="hljs-selector-tag">Polygon</span>","<span class="hljs-selector-tag">coordinates</span>":<span class="hljs-selector-attr">[[[15.27946,7.421925]</span>,<span class="hljs-selector-attr">[16.106232,7.497088]</span>,<span class="hljs-selector-attr">[16.290562,7.754307]</span>,<span class="hljs-selector-attr">[16.456185,7.734774]</span>,<span class="hljs-selector-attr">[16.705988,7.508328]</span>,<span class="hljs-selector-attr">[17.96493,7.890914]</span>,<span class="hljs-selector-attr">[18.389555,8.281304]</span>,<span class="hljs-selector-attr">[18.911022,8.630895]</span>,<span class="hljs-selector-attr">[18.81201,8.982915]</span>,<span class="hljs-selector-attr">[19.094008,9.074847]</span>,<span class="hljs-selector-attr">[20.059685,9.012706]</span>,<span class="hljs-selector-attr">[21.000868,9.475985]</span>,<span class="hljs-selector-attr">[21.723822,10.567056]</span>,<span class="hljs-selector-attr">[22.231129,10.971889]</span>,<span class="hljs-selector-attr">[22.864165,11.142395]</span>,<span class="hljs-selector-attr">[22.977544,10.714463]</span>,<span class="hljs-selector-attr">[23.554304,10.089255]</span>,<span class="hljs-selector-attr">[23.55725,9.681218]</span>,<span class="hljs-selector-attr">[23.394779,9.265068]</span>,<span class="hljs-selector-attr">[23.459013,8.954286]</span>,<span class="hljs-selector-attr">[23.805813,8.666319]</span>,<span class="hljs-selector-attr">[24.567369,8.229188]</span>,<span class="hljs-selector-attr">[25.114932,7.825104]</span>,<span class="hljs-selector-attr">[25.124131,7.500085]</span>,<span class="hljs-selector-attr">[25.796648,6.979316]</span>,<span class="hljs-selector-attr">[26.213418,6.546603]</span>,<span class="hljs-selector-attr">[26.465909,5.946717]</span>,<span class="hljs-selector-attr">[27.213409,5.550953]</span>,<span class="hljs-selector-attr">[27.374226,5.233944]</span>,<span class="hljs-selector-attr">[27.044065,5.127853]</span>,<span class="hljs-selector-attr">[26.402761,5.150875]</span>,<span class="hljs-selector-attr">[25.650455,5.256088]</span>,<span class="hljs-selector-attr">[25.278798,5.170408]</span>,<span class="hljs-selector-attr">[25.128833,4.927245]</span>,<span class="hljs-selector-attr">[24.805029,4.897247]</span>,<span class="hljs-selector-attr">[24.410531,5.108784]</span>,<span class="hljs-selector-attr">[23.297214,4.609693]</span>,<span class="hljs-selector-attr">[22.84148,4.710126]</span>,<span class="hljs-selector-attr">[22.704124,4.633051]</span>,<span class="hljs-selector-attr">[22.405124,4.02916]</span>,<span class="hljs-selector-attr">[21.659123,4.224342]</span>,<span class="hljs-selector-attr">[20.927591,4.322786]</span>,<span class="hljs-selector-attr">[20.290679,4.691678]</span>,<span class="hljs-selector-attr">[19.467784,5.031528]</span>,<span class="hljs-selector-attr">[18.932312,4.709506]</span>,<span class="hljs-selector-attr">[18.542982,4.201785]</span>,<span class="hljs-selector-attr">[18.453065,3.504386]</span>,<span class="hljs-selector-attr">[17.8099,3.560196]</span>,<span class="hljs-selector-attr">[17.133042,3.728197]</span>,<span class="hljs-selector-attr">[16.537058,3.198255]</span>,<span class="hljs-selector-attr">[16.012852,2.26764]</span>,<span class="hljs-selector-attr">[15.907381,2.557389]</span>,<span class="hljs-selector-attr">[15.862732,3.013537]</span>,<span class="hljs-selector-attr">[15.405396,3.335301]</span>,<span class="hljs-selector-attr">[15.03622,3.851367]</span>,<span class="hljs-selector-attr">[14.950953,4.210389]</span>,<span class="hljs-selector-attr">[14.478372,4.732605]</span>,<span class="hljs-selector-attr">[14.558936,5.030598]</span>,<span class="hljs-selector-attr">[14.459407,5.451761]</span>,<span class="hljs-selector-attr">[14.53656,6.226959]</span>,<span class="hljs-selector-attr">[14.776545,6.408498]</span>,<span class="hljs-selector-attr">[15.27946,7.421925]</span>]]}},
{"<span class="hljs-selector-tag">type</span>":"<span class="hljs-selector-tag">Feature</span>","<span class="hljs-selector-tag">id</span>":"<span class="hljs-selector-tag">CAN</span>","<span class="hljs-selector-tag">properties</span>":{"<span class="hljs-selector-tag">name</span>":"<span class="hljs-selector-tag">Canada</span>"},"<span class="hljs-selector-tag">geometry</span>":{"<span class="hljs-selector-tag">type</span>":"<span class="hljs-selector-tag">MultiPolygon</span>","<span class="hljs-selector-tag">coordinates</span>":<span class="hljs-selector-attr">[[[[-63.6645,46.55001]</span>,<span class="hljs-selector-attr">[-62.9393,46.41587]</span>,<span class="hljs-selector-attr">[-62.01208,46.44314]</span>,<span class="hljs-selector-attr">[-62.50391,46.03339]</span>,<span class="hljs-selector-attr">[-62.87433,45.96818]</span>,<span class="hljs-selector-attr">[-64.1428,46.39265]</span>,<span class="hljs-selector-attr">[-64.39261,46.72747]</span>,<span class="hljs-selector-attr">[-64.01486,47.03601]</span>,<span class="hljs-selector-attr">[-63.6645,46.55001]</span>]],<span class="hljs-selector-attr">[[[-61.806305,49.10506]</span>,<span class="hljs-selector-attr">[-62.29318,49.08717]</span>,<span class="hljs-selector-attr">[-63.58926,49.40069]</span>,<span class="hljs-selector-attr">[-64.51912,49.87304]</span>,<span class="hljs-selector-attr">[-64.17322,49.95718]</span>,<span class="hljs-selector-attr">[-62.85829,49.70641]</span>,<span class="hljs-selector-attr">[-61.835585,49.28855]</span>,<span class="hljs-selector-attr">[-61.806305,49.10506]</span>]],<span class="hljs-selector-attr">[[[-123.510002,48.510011]</span>,<span class="hljs-selector-attr">[-124.012891,48.370846]</span>,<span class="hljs-selector-attr">[-125.655013,48.825005]</span>,<span class="hljs-selector-attr">[-125.954994,49.179996]</span>,<span class="hljs-selector-attr">[-126.850004,49.53]</span>,<span class="hljs-selector-attr">[-127.029993,49.814996]</span>,<span class="hljs-selector-attr">[-128.059336,49.994959]</span>,<span class="hljs-selector-attr">[-128.444584,50.539138]</span>,<span class="hljs-selector-attr">[-128.358414,50.770648]</span>,<span class="hljs-selector-attr">[-127.308581,50.552574]</span>,<span class="hljs-selector-attr">[-126.695001,50.400903]</span>,<span class="hljs-selector-attr">[-125.755007,50.295018]</span>,<span class="hljs-selector-attr">[-125.415002,49.950001]</span>,<span class="hljs-selector-attr">[-124.920768,49.475275]</span>,<span class="hljs-selector-attr">[-123.922509,49.062484]</span>,<span class="hljs-selector-attr">[-123.510002,48.510011]</span>]],<span class="hljs-selector-attr">[[[-56.134036,50.68701]</span>,<span class="hljs-selector-attr">[-56.795882,49.812309]</span>,<span class="hljs-selector-attr">[-56.143105,50.150117]</span>,<span class="hljs-selector-attr">[-55.471492,49.935815]</span>,<span class="hljs-selector-attr">[-55.822401,49.587129]</span>,<span class="hljs-selector-attr">[-54.935143,49.313011]</span>,<span class="hljs-selector-attr">[-54.473775,49.556691]</span>,<span class="hljs-selector-attr">[-53.476549,49.249139]</span>,<span class="hljs-selector-attr">[-53.786014,48.516781]</span>,<span class="hljs-selector-attr">[-53.086134,48.687804]</span>,<span class="hljs-selector-attr">[-52.958648,48.157164]</span>,<span class="hljs-selector-attr">[-52.648099,47.535548]</span>,<span class="hljs-selector-attr">[-53.069158,46.655499]</span>,<span class="hljs-selector-attr">[-53.521456,46.618292]</span>,<span class="hljs-selector-attr">[-54.178936,46.807066]</span>,<span class="hljs-selector-attr">[-53.961869,47.625207]</span>,<span class="hljs-selector-attr">[-54.240482,47.752279]</span>,<span class="hljs-selector-attr">[-55.400773,46.884994]</span>,<span class="hljs-selector-attr">[-55.997481,46.91972]</span>,<span class="hljs-selector-attr">[-55.291219,47.389562]</span>,<span class="hljs-selector-attr">[-56.250799,47.632545]</span>,<span class="hljs-selector-attr">[-57.325229,47.572807]</span>,<span class="hljs-selector-attr">[-59.266015,47.603348]</span>,<span class="hljs-selector-attr">[-59.419494,47.899454]</span>,<span class="hljs-selector-attr">[-58.796586,48.251525]</span>,<span class="hljs-selector-attr">[-59.231625,48.523188]</span>,<span class="hljs-selector-attr">[-58.391805,49.125581]</span>,<span class="hljs-selector-attr">[-57.35869,50.718274]</span>,<span class="hljs-selector-attr">[-56.73865,51.287438]</span>,<span class="hljs-selector-attr">[-55.870977,51.632094]</span>,<span class="hljs-selector-attr">[-55.406974,51.588273]</span>,<span class="hljs-selector-attr">[-55.600218,51.317075]</span>,<span class="hljs-selector-attr">[-56.134036,50.68701]</span>]],<span class="hljs-selector-attr">[[[-132.710008,54.040009]</span>,<span class="hljs-selector-attr">[-132.710009,54.040009]</span>,<span class="hljs-selector-attr">[-132.710008,54.040009]</span>,<span class="hljs-selector-attr">[-132.710008,54.040009]</span>,<span class="hljs-selector-attr">[-131.74999,54.120004]</span>,<span class="hljs-selector-attr">[-132.04948,52.984621]</span>,<span class="hljs-selector-attr">[-131.179043,52.180433]</span>,<span class="hljs-selector-attr">[-131.57783,52.182371]</span>,<span class="hljs-selector-attr">[-132.180428,52.639707]</span>,<span class="hljs-selector-attr">[-132.549992,53.100015]</span>,<span class="hljs-selector-attr">[-133.054611,53.411469]</span>,<span class="hljs-selector-attr">[-133.239664,53.85108]</span>,<span class="hljs-selector-attr">[-133.180004,54.169975]</span>,<span class="hljs-selector-attr">[-132.710008,54.040009]</span>]],<span class="hljs-selector-attr">[[[-79.26582,62.158675]</span>,<span class="hljs-selector-attr">[-79.65752,61.63308]</span>,<span class="hljs-selector-attr">[-80.09956,61.7181]</span>,<span class="hljs-selector-attr">[-80.36215,62.01649]</span>,<span class="hljs-selector-attr">[-80.315395,62.085565]</span>,<span class="hljs-selector-attr">[-79.92939,62.3856]</span>,<span class="hljs-selector-attr">[-79.52002,62.36371]</span>,<span class="hljs-selector-attr">[-79.26582,62.158675]</span>]],<span class="hljs-selector-attr">[[[-81.89825,62.7108]</span>,<span class="hljs-selector-attr">[-83.06857,62.15922]</span>,<span class="hljs-selector-attr">[-83.77462,62.18231]</span>,<span class="hljs-selector-attr">[-83.99367,62.4528]</span>,<span class="hljs-selector-attr">[-83.25048,62.91409]</span>,<span class="hljs-selector-attr">[-81.87699,62.90458]</span>,<span class="hljs-selector-attr">[-81.89825,62.7108]</span>]],<span class="hljs-selector-attr">[[[-85.161308,65.657285]</span>,<span class="hljs-selector-attr">[-84.975764,65.217518]</span>,<span class="hljs-selector-attr">[-84.464012,65.371772]</span>,<span class="hljs-selector-attr">[-83.882626,65.109618]</span>,<span class="hljs-selector-attr">[-82.787577,64.766693]</span>,<span class="hljs-selector-attr">[-81.642014,64.455136]</span>,<span class="hljs-selector-attr">[-81.55344,63.979609]</span>,<span class="hljs-selector-attr">[-80.817361,64.057486]</span>,<span class="hljs-selector-attr">[-80.103451,63.725981]</span>,<span class="hljs-selector-attr">[-80.99102,63.411246]</span>,<span class="hljs-selector-attr">[-82.547178,63.651722]</span>,<span class="hljs-selector-attr">[-83.108798,64.101876]</span>,<span class="hljs-selector-attr">[-84.100417,63.569712]</span>,<span class="hljs-selector-attr">[-85.523405,63.052379]</span>,<span class="hljs-selector-attr">[-85.866769,63.637253]</span>,<span class="hljs-selector-attr">[-87.221983,63.541238]</span>,<span class="hljs-selector-attr">[-86.35276,64.035833]</span>,<span class="hljs-selector-attr">[-86.224886,64.822917]</span>,<span class="hljs-selector-attr">[-85.883848,65.738778]</span>,<span class="hljs-selector-attr">[-85.161308,65.657285]</span>]],<span class="hljs-selector-attr">[[[-75.86588,67.14886]</span>,<span class="hljs-selector-attr">[-76.98687,67.09873]</span>,<span class="hljs-selector-attr">[-77.2364,67.58809]</span>,<span class="hljs-selector-attr">[-76.81166,68.14856]</span>,<span class="hljs-selector-attr">[-75.89521,68.28721]</span>,<span class="hljs-selector-attr">[-75.1145,68.01036]</span>,<span class="hljs-selector-attr">[-75.10333,67.58202]</span>,<span class="hljs-selector-attr">[-75.21597,67.44425]</span>,<span class="hljs-selector-attr">[-75.86588,67.14886]</span>]],<span class="hljs-selector-attr">[[[-95.647681,69.10769]</span>,<span class="hljs-selector-attr">[-96.269521,68.75704]</span>,<span class="hljs-selector-attr">[-97.617401,69.06003]</span>,<span class="hljs-selector-attr">[-98.431801,68.9507]</span>,<span class="hljs-selector-attr">[-99.797401,69.40003]</span>,<span class="hljs-selector-attr">[-98.917401,69.71003]</span>,<span class="hljs-selector-attr">[-98.218261,70.14354]</span>,<span class="hljs-selector-attr">[-97.157401,69.86003]</span>,<span class="hljs-selector-attr">[-96.557401,69.68003]</span>,<span class="hljs-selector-attr">[-96.257401,69.49003]</span>,<span class="hljs-selector-attr">[-95.647681,69.10769]</span>]],<span class="hljs-selector-attr">[[[-90.5471,69.49766]</span>,<span class="hljs-selector-attr">[-90.55151,68.47499]</span>,<span class="hljs-selector-attr">[-89.21515,69.25873]</span>,<span class="hljs-selector-attr">[-88.01966,68.61508]</span>,<span class="hljs-selector-attr">[-88.31749,67.87338]</span>,<span class="hljs-selector-attr">[-87.35017,67.19872]</span>,<span class="hljs-selector-attr">[-86.30607,67.92146]</span>,<span class="hljs-selector-attr">[-85.57664,68.78456]</span>,<span class="hljs-selector-attr">[-85.52197,69.88211]</span>,<span class="hljs-selector-attr">[-84.10081,69.80539]</span>,<span class="hljs-selector-attr">[-82.62258,69.65826]</span>,<span class="hljs-selector-attr">[-81.28043,69.16202]</span>,<span class="hljs-selector-attr">[-81.2202,68.66567]</span>,<span class="hljs-selector-attr">[-81.96436,68.13253]</span>,<span class="hljs-selector-attr">[-81.25928,67.59716]</span>,<span class="hljs-selector-attr">[-81.38653,67.11078]</span>,<span class="hljs-selector-attr">[-83.34456,66.41154]</span>,<span class="hljs-selector-attr">[-84.73542,66.2573]</span>,<span class="hljs-selector-attr">[-85.76943,66.55833]</span>,<span class="hljs-selector-attr">[-86.0676,66.05625]</span>,<span class="hljs-selector-attr">[-87.03143,65.21297]</span>,<span class="hljs-selector-attr">[-87.32324,64.77563]</span>,<span class="hljs-selector-attr">[-88.48296,64.09897]</span>,<span class="hljs-selector-attr">[-89.91444,64.03273]</span>,<span class="hljs-selector-attr">[-90.70398,63.61017]</span>,<span class="hljs-selector-attr">[-90.77004,62.96021]</span>,<span class="hljs-selector-attr">[-91.93342,62.83508]</span>,<span class="hljs-selector-attr">[-93.15698,62.02469]</span>,<span class="hljs-selector-attr">[-94.24153,60.89865]</span>,<span class="hljs-selector-attr">[-94.62931,60.11021]</span>,<span class="hljs-selector-attr">[-94.6846,58.94882]</span>,<span class="hljs-selector-attr">[-93.21502,58.78212]</span>,<span class="hljs-selector-attr">[-92.76462,57.84571]</span>,<span class="hljs-selector-attr">[-92.29703,57.08709]</span>,<span class="hljs-selector-attr">[-90.89769,57.28468]</span>,<span class="hljs-selector-attr">[-89.03953,56.85172]</span>,<span class="hljs-selector-attr">[-88.03978,56.47162]</span>,<span class="hljs-selector-attr">[-87.32421,55.99914]</span>,<span class="hljs-selector-attr">[-86.07121,55.72383]</span>,<span class="hljs-selector-attr">[-85.01181,55.3026]</span>,<span class="hljs-selector-attr">[-83.36055,55.24489]</span>,<span class="hljs-selector-attr">[-82.27285,55.14832]</span>,<span class="hljs-selector-attr">[-82.4362,54.28227]</span>,<span class="hljs-selector-attr">[-82.12502,53.27703]</span>,<span class="hljs-selector-attr">[-81.40075,52.15788]</span>,<span class="hljs-selector-attr">[-79.91289,51.20842]</span>,<span class="hljs-selector-attr">[-79.14301,51.53393]</span>,<span class="hljs-selector-attr">[-78.60191,52.56208]</span>,<span class="hljs-selector-attr">[-79.12421,54.14145]</span>,<span class="hljs-selector-attr">[-79.82958,54.66772]</span>,<span class="hljs-selector-attr">[-78.22874,55.13645]</span>,<span class="hljs-selector-attr">[-77.0956,55.83741]</span>,<span class="hljs-selector-attr">[-76.54137,56.53423]</span>,<span class="hljs-selector-attr">[-76.62319,57.20263]</span>,<span class="hljs-selector-attr">[-77.30226,58.05209]</span>,<span class="hljs-selector-attr">[-78.51688,58.80458]</span>,<span class="hljs-selector-attr">[-77.33676,59.85261]</span>,<span class="hljs-selector-attr">[-77.77272,60.75788]</span>,<span class="hljs-selector-attr">[-78.10687,62.31964]</span>,<span class="hljs-selector-attr">[-77.41067,62.55053]</span>,<span class="hljs-selector-attr">[-75.69621,62.2784]</span>,<span class="hljs-selector-attr">[-74.6682,62.18111]</span>,<span class="hljs-selector-attr">[-73.83988,62.4438]</span>,<span class="hljs-selector-attr">[-72.90853,62.10507]</span>,<span class="hljs-selector-attr">[-71.67708,61.52535]</span>,<span class="hljs-selector-attr">[-71.37369,61.13717]</span>,<span class="hljs-selector-attr">[-69.59042,61.06141]</span>,<span class="hljs-selector-attr">[-69.62033,60.22125]</span>,<span class="hljs-selector-attr">[-69.2879,58.95736]</span>,<span class="hljs-selector-attr">[-68.37455,58.80106]</span>,<span class="hljs-selector-attr">[-67.64976,58.21206]</span>,<span class="hljs-selector-attr">[-66.20178,58.76731]</span>,<span class="hljs-selector-attr">[-65.24517,59.87071]</span>,<span class="hljs-selector-attr">[-64.58352,60.33558]</span>,<span class="hljs-selector-attr">[-63.80475,59.4426]</span>,<span class="hljs-selector-attr">[-62.50236,58.16708]</span>,<span class="hljs-selector-attr">[-61.39655,56.96745]</span>,<span class="hljs-selector-attr">[-61.79866,56.33945]</span>,<span class="hljs-selector-attr">[-60.46853,55.77548]</span>,<span class="hljs-selector-attr">[-59.56962,55.20407]</span>,<span class="hljs-selector-attr">[-57.97508,54.94549]</span>,<span class="hljs-selector-attr">[-57.3332,54.6265]</span>,<span class="hljs-selector-attr">[-56.93689,53.78032]</span>,<span class="hljs-selector-attr">[-56.15811,53.64749]</span>,<span class="hljs-selector-attr">[-55.75632,53.27036]</span>,<span class="hljs-selector-attr">[-55.68338,52.14664]</span>,<span class="hljs-selector-attr">[-56.40916,51.7707]</span>,<span class="hljs-selector-attr">[-57.12691,51.41972]</span>,<span class="hljs-selector-attr">[-58.77482,51.0643]</span>,<span class="hljs-selector-attr">[-60.03309,50.24277]</span>,<span class="hljs-selector-attr">[-61.72366,50.08046]</span>,<span class="hljs-selector-attr">[-63.86251,50.29099]</span>,<span class="hljs-selector-attr">[-65.36331,50.2982]</span>,<span class="hljs-selector-attr">[-66.39905,50.22897]</span>,<span class="hljs-selector-attr">[-67.23631,49.51156]</span>,<span class="hljs-selector-attr">[-68.51114,49.06836]</span>,<span class="hljs-selector-attr">[-69.95362,47.74488]</span>,<span class="hljs-selector-attr">[-71.10458,46.82171]</span>,<span class="hljs-selector-attr">[-70.25522,46.98606]</span>,<span class="hljs-selector-attr">[-68.65,48.3]</span>,<span class="hljs-selector-attr">[-66.55243,49.1331]</span>,<span class="hljs-selector-attr">[-65.05626,49.23278]</span>,<span class="hljs-selector-attr">[-64.17099,48.74248]</span>,<span class="hljs-selector-attr">[-65.11545,48.07085]</span>,<span class="hljs-selector-attr">[-64.79854,46.99297]</span>,<span class="hljs-selector-attr">[-64.47219,46.23849]</span>,<span class="hljs-selector-attr">[-63.17329,45.73902]</span>,<span class="hljs-selector-attr">[-61.52072,45.88377]</span>,<span class="hljs-selector-attr">[-60.51815,47.00793]</span>,<span class="hljs-selector-attr">[-60.4486,46.28264]</span>,<span class="hljs-selector-attr">[-59.80287,45.9204]</span>,<span class="hljs-selector-attr">[-61.03988,45.26525]</span>,<span class="hljs-selector-attr">[-63.25471,44.67014]</span>,<span class="hljs-selector-attr">[-64.24656,44.26553]</span>,<span class="hljs-selector-attr">[-65.36406,43.54523]</span>,<span class="hljs-selector-attr">[-66.1234,43.61867]</span>,<span class="hljs-selector-attr">[-66.16173,44.46512]</span>,<span class="hljs-selector-attr">[-64.42549,45.29204]</span>,<span class="hljs-selector-attr">[-66.02605,45.25931]</span>,<span class="hljs-selector-attr">[-67.13741,45.13753]</span>,<span class="hljs-selector-attr">[-67.79134,45.70281]</span>,<span class="hljs-selector-attr">[-67.79046,47.06636]</span>,<span class="hljs-selector-attr">[-68.23444,47.35486]</span>,<span class="hljs-selector-attr">[-68.905,47.185]</span>,<span class="hljs-selector-attr">[-69.237216,47.447781]</span>,<span class="hljs-selector-attr">[-69.99997,46.69307]</span>,<span class="hljs-selector-attr">[-70.305,45.915]</span>,<span class="hljs-selector-attr">[-70.66,45.46]</span>,<span class="hljs-selector-attr">[-71.08482,45.30524]</span>,<span class="hljs-selector-attr">[-71.405,45.255]</span>,<span class="hljs-selector-attr">[-71.50506,45.0082]</span>,<span class="hljs-selector-attr">[-73.34783,45.00738]</span>,<span class="hljs-selector-attr">[-74.867,45.00048]</span>,<span class="hljs-selector-attr">[-75.31821,44.81645]</span>,<span class="hljs-selector-attr">[-76.375,44.09631]</span>,<span class="hljs-selector-attr">[-76.5,44.018459]</span>,<span class="hljs-selector-attr">[-76.820034,43.628784]</span>,<span class="hljs-selector-attr">[-77.737885,43.629056]</span>,<span class="hljs-selector-attr">[-78.72028,43.625089]</span>,<span class="hljs-selector-attr">[-79.171674,43.466339]</span>,<span class="hljs-selector-attr">[-79.01,43.27]</span>,<span class="hljs-selector-attr">[-78.92,42.965]</span>,<span class="hljs-selector-attr">[-78.939362,42.863611]</span>,<span class="hljs-selector-attr">[-80.247448,42.3662]</span>,<span class="hljs-selector-attr">[-81.277747,42.209026]</span>,<span class="hljs-selector-attr">[-82.439278,41.675105]</span>,<span class="hljs-selector-attr">[-82.690089,41.675105]</span>,<span class="hljs-selector-attr">[-83.02981,41.832796]</span>,<span class="hljs-selector-attr">[-83.142,41.975681]</span>,<span class="hljs-selector-attr">[-83.12,42.08]</span>,<span class="hljs-selector-attr">[-82.9,42.43]</span>,<span class="hljs-selector-attr">[-82.43,42.98]</span>,<span class="hljs-selector-attr">[-82.137642,43.571088]</span>,<span class="hljs-selector-attr">[-82.337763,44.44]</span>,<span class="hljs-selector-attr">[-82.550925,45.347517]</span>,<span class="hljs-selector-attr">[-83.592851,45.816894]</span>,<span class="hljs-selector-attr">[-83.469551,45.994686]</span>,<span class="hljs-selector-attr">[-83.616131,46.116927]</span>,<span class="hljs-selector-attr">[-83.890765,46.116927]</span>,<span class="hljs-selector-attr">[-84.091851,46.275419]</span>,<span class="hljs-selector-attr">[-84.14212,46.512226]</span>,<span class="hljs-selector-attr">[-84.3367,46.40877]</span>,<span class="hljs-selector-attr">[-84.6049,46.4396]</span>,<span class="hljs-selector-attr">[-84.543749,46.538684]</span>,<span class="hljs-selector-attr">[-84.779238,46.637102]</span>,<span class="hljs-selector-attr">[-84.87608,46.900083]</span>,<span class="hljs-selector-attr">[-85.652363,47.220219]</span>,<span class="hljs-selector-attr">[-86.461991,47.553338]</span>,<span class="hljs-selector-attr">[-87.439793,47.94]</span>,<span class="hljs-selector-attr">[-88.378114,48.302918]</span>,<span class="hljs-selector-attr">[-89.272917,48.019808]</span>,<span class="hljs-selector-attr">[-89.6,48.01]</span>,<span class="hljs-selector-attr">[-90.83,48.27]</span>,<span class="hljs-selector-attr">[-91.64,48.14]</span>,<span class="hljs-selector-attr">[-92.61,48.45]</span>,<span class="hljs-selector-attr">[-93.63087,48.60926]</span>,<span class="hljs-selector-attr">[-94.32914,48.67074]</span>,<span class="hljs-selector-attr">[-94.64,48.84]</span>,<span class="hljs-selector-attr">[-94.81758,49.38905]</span>,<span class="hljs-selector-attr">[-95.15609,49.38425]</span>,<span class="hljs-selector-attr">[-95.15907,49]</span>,<span class="hljs-selector-attr">[-97.22872,49.0007]</span>,<span class="hljs-selector-attr">[-100.65,49]</span>,<span class="hljs-selector-attr">[-104.04826,48.99986]</span>,<span class="hljs-selector-attr">[-107.05,49]</span>,<span class="hljs-selector-attr">[-110.05,49]</span>,<span class="hljs-selector-attr">[-113,49]</span>,<span class="hljs-selector-attr">[-116.04818,49]</span>,<span class="hljs-selector-attr">[-117.03121,49]</span>,<span class="hljs-selector-attr">[-120,49]</span>,<span class="hljs-selector-attr">[-122.84,49]</span>,<span class="hljs-selector-attr">[-122.97421,49.002538]</span>,<span class="hljs-selector-attr">[-124.91024,49.98456]</span>,<span class="hljs-selector-attr">[-125.62461,50.41656]</span>,<span class="hljs-selector-attr">[-127.43561,50.83061]</span>,<span class="hljs-selector-attr">[-127.99276,51.71583]</span>,<span class="hljs-selector-attr">[-127.85032,52.32961]</span>,<span class="hljs-selector-attr">[-129.12979,52.75538]</span>,<span class="hljs-selector-attr">[-129.30523,53.56159]</span>,<span class="hljs-selector-attr">[-130.51497,54.28757]</span>,<span class="hljs-selector-attr">[-130.53611,54.80278]</span>,<span class="hljs-selector-attr">[-129.98,55.285]</span>,<span class="hljs-selector-attr">[-130.00778,55.91583]</span>,<span class="hljs-selector-attr">[-131.70781,56.55212]</span>,<span class="hljs-selector-attr">[-132.73042,57.69289]</span>,<span class="hljs-selector-attr">[-133.35556,58.41028]</span>,<span class="hljs-selector-attr">[-134.27111,58.86111]</span>,<span class="hljs-selector-attr">[-134.945,59.27056]</span>,<span class="hljs-selector-attr">[-135.47583,59.78778]</span>,<span class="hljs-selector-attr">[-136.47972,59.46389]</span>,<span class="hljs-selector-attr">[-137.4525,58.905]</span>,<span class="hljs-selector-attr">[-138.34089,59.56211]</span>,<span class="hljs-selector-attr">[-139.039,60]</span>,<span class="hljs-selector-attr">[-140.013,60.27682]</span>,<span class="hljs-selector-attr">[-140.99778,60.30639]</span>,<span class="hljs-selector-attr">[-140.9925,66.00003]</span>,<span class="hljs-selector-attr">[-140.986,69.712]</span>,<span class="hljs-selector-attr">[-139.12052,69.47102]</span>,<span class="hljs-selector-attr">[-137.54636,68.99002]</span>,<span class="hljs-selector-attr">[-136.50358,68.89804]</span>,<span class="hljs-selector-attr">[-135.62576,69.31512]</span>,<span class="hljs-selector-attr">[-134.41464,69.62743]</span>,<span class="hljs-selector-attr">[-132.92925,69.50534]</span>,<span class="hljs-selector-attr">[-131.43136,69.94451]</span>,<span class="hljs-selector-attr">[-129.79471,70.19369]</span>,<span class="hljs-selector-attr">[-129.10773,69.77927]</span>,<span class="hljs-selector-attr">[-128.36156,70.01286]</span>,<span class="hljs-selector-attr">[-128.13817,70.48384]</span>,<span class="hljs-selector-attr">[-127.44712,70.37721]</span>,<span class="hljs-selector-attr">[-125.75632,69.48058]</span>,<span class="hljs-selector-attr">[-124.42483,70.1584]</span>,<span class="hljs-selector-attr">[-124.28968,69.39969]</span>,<span class="hljs-selector-attr">[-123.06108,69.56372]</span>,<span class="hljs-selector-attr">[-122.6835,69.85553]</span>,<span class="hljs-selector-attr">[-121.47226,69.79778]</span>,<span class="hljs-selector-attr">[-119.94288,69.37786]</span>,<span class="hljs-selector-attr">[-117.60268,69.01128]</span>,<span class="hljs-selector-attr">[-116.22643,68.84151]</span>,<span class="hljs-selector-attr">[-115.2469,68.90591]</span>,<span class="hljs-selector-attr">[-113.89794,68.3989]</span>,<span class="hljs-selector-attr">[-115.30489,67.90261]</span>,<span class="hljs-selector-attr">[-113.49727,67.68815]</span>,<span class="hljs-selector-attr">[-110.798,67.80612]</span>,<span class="hljs-selector-attr">[-109.94619,67.98104]</span>,<span class="hljs-selector-attr">[-108.8802,67.38144]</span>,<span class="hljs-selector-attr">[-107.79239,67.88736]</span>,<span class="hljs-selector-attr">[-108.81299,68.31164]</span>,<span class="hljs-selector-attr">[-108.16721,68.65392]</span>,<span class="hljs-selector-attr">[-106.95,68.7]</span>,<span class="hljs-selector-attr">[-106.15,68.8]</span>,<span class="hljs-selector-attr">[-105.34282,68.56122]</span>,<span class="hljs-selector-attr">[-104.33791,68.018]</span>,<span class="hljs-selector-attr">[-103.22115,68.09775]</span>,<span class="hljs-selector-attr">[-101.45433,67.64689]</span>,<span class="hljs-selector-attr">[-99.90195,67.80566]</span>,<span class="hljs-selector-attr">[-98.4432,67.78165]</span>,<span class="hljs-selector-attr">[-98.5586,68.40394]</span>,<span class="hljs-selector-attr">[-97.66948,68.57864]</span>,<span class="hljs-selector-attr">[-96.11991,68.23939]</span>,<span class="hljs-selector-attr">[-96.12588,67.29338]</span>,<span class="hljs-selector-attr">[-95.48943,68.0907]</span>,<span class="hljs-selector-attr">[-94.685,68.06383]</span>,<span class="hljs-selector-attr">[-94.23282,69.06903]</span>,<span class="hljs-selector-attr">[-95.30408,69.68571]</span>,<span class="hljs-selector-attr">[-96.47131,70.08976]</span>,<span class="hljs-selector-attr">[-96.39115,71.19482]</span>,<span class="hljs-selector-attr">[-95.2088,71.92053]</span>,<span class="hljs-selector-attr">[-93.88997,71.76015]</span>,<span class="hljs-selector-attr">[-92.87818,71.31869]</span>,<span class="hljs-selector-attr">[-91.51964,70.19129]</span>,<span class="hljs-selector-attr">[-92.40692,69.69997]</span>,<span class="hljs-selector-attr">[-90.5471,69.49766]</span>]],<span class="hljs-selector-attr">[[[-114.16717,73.12145]</span>,<span class="hljs-selector-attr">[-114.66634,72.65277]</span>,<span class="hljs-selector-attr">[-112.44102,72.9554]</span>,<span class="hljs-selector-attr">[-111.05039,72.4504]</span>,<span class="hljs-selector-attr">[-109.92035,72.96113]</span>,<span class="hljs-selector-attr">[-109.00654,72.63335]</span>,<span class="hljs-selector-attr">[-108.18835,71.65089]</span>,<span class="hljs-selector-attr">[-107.68599,72.06548]</span>,<span class="hljs-selector-attr">[-108.39639,73.08953]</span>,<span class="hljs-selector-attr">[-107.51645,73.23598]</span>,<span class="hljs-selector-attr">[-106.52259,73.07601]</span>,<span class="hljs-selector-attr">[-105.40246,72.67259]</span>,<span class="hljs-selector-attr">[-104.77484,71.6984]</span>,<span class="hljs-selector-attr">[-104.46476,70.99297]</span>,<span class="hljs-selector-attr">[-102.78537,70.49776]</span>,<span class="hljs-selector-attr">[-100.98078,70.02432]</span>,<span class="hljs-selector-attr">[-101.08929,69.58447]</span>,<span class="hljs-selector-attr">[-102.73116,69.50402]</span>,<span class="hljs-selector-attr">[-102.09329,69.11962]</span>,<span class="hljs-selector-attr">[-102.43024,68.75282]</span>,<span class="hljs-selector-attr">[-104.24,68.91]</span>,<span class="hljs-selector-attr">[-105.96,69.18]</span>,<span class="hljs-selector-attr">[-107.12254,69.11922]</span>,<span class="hljs-selector-attr">[-109,68.78]</span>,<span class="hljs-selector-attr">[-111.534149,68.630059]</span>,<span class="hljs-selector-attr">[-113.3132,68.53554]</span>,<span class="hljs-selector-attr">[-113.85496,69.00744]</span>,<span class="hljs-selector-attr">[-115.22,69.28]</span>,<span class="hljs-selector-attr">[-116.10794,69.16821]</span>,<span class="hljs-selector-attr">[-117.34,69.96]</span>,<span class="hljs-selector-attr">[-116.67473,70.06655]</span>,<span class="hljs-selector-attr">[-115.13112,70.2373]</span>,<span class="hljs-selector-attr">[-113.72141,70.19237]</span>,<span class="hljs-selector-attr">[-112.4161,70.36638]</span>,<span class="hljs-selector-attr">[-114.35,70.6]</span>,<span class="hljs-selector-attr">[-116.48684,70.52045]</span>,<span class="hljs-selector-attr">[-117.9048,70.54056]</span>,<span class="hljs-selector-attr">[-118.43238,70.9092]</span>,<span class="hljs-selector-attr">[-116.11311,71.30918]</span>,<span class="hljs-selector-attr">[-117.65568,71.2952]</span>,<span class="hljs-selector-attr">[-119.40199,71.55859]</span>,<span class="hljs-selector-attr">[-118.56267,72.30785]</span>,<span class="hljs-selector-attr">[-117.86642,72.70594]</span>,<span class="hljs-selector-attr">[-115.18909,73.31459]</span>,<span class="hljs-selector-attr">[-114.16717,73.12145]</span>]],<span class="hljs-selector-attr">[[[-104.5,73.42]</span>,<span class="hljs-selector-attr">[-105.38,72.76]</span>,<span class="hljs-selector-attr">[-106.94,73.46]</span>,<span class="hljs-selector-attr">[-106.6,73.6]</span>,<span class="hljs-selector-attr">[-105.26,73.64]</span>,<span class="hljs-selector-attr">[-104.5,73.42]</span>]],<span class="hljs-selector-attr">[[[-76.34,73.102685]</span>,<span class="hljs-selector-attr">[-76.251404,72.826385]</span>,<span class="hljs-selector-attr">[-77.314438,72.855545]</span>,<span class="hljs-selector-attr">[-78.39167,72.876656]</span>,<span class="hljs-selector-attr">[-79.486252,72.742203]</span>,<span class="hljs-selector-attr">[-79.775833,72.802902]</span>,<span class="hljs-selector-attr">[-80.876099,73.333183]</span>,<span class="hljs-selector-attr">[-80.833885,73.693184]</span>,<span class="hljs-selector-attr">[-80.353058,73.75972]</span>,<span class="hljs-selector-attr">[-78.064438,73.651932]</span>,<span class="hljs-selector-attr">[-76.34,73.102685]</span>]],<span class="hljs-selector-attr">[[[-86.562179,73.157447]</span>,<span class="hljs-selector-attr">[-85.774371,72.534126]</span>,<span class="hljs-selector-attr">[-84.850112,73.340278]</span>,<span class="hljs-selector-attr">[-82.31559,73.750951]</span>,<span class="hljs-selector-attr">[-80.600088,72.716544]</span>,<span class="hljs-selector-attr">[-80.748942,72.061907]</span>,<span class="hljs-selector-attr">[-78.770639,72.352173]</span>,<span class="hljs-selector-attr">[-77.824624,72.749617]</span>,<span class="hljs-selector-attr">[-75.605845,72.243678]</span>,<span class="hljs-selector-attr">[-74.228616,71.767144]</span>,<span class="hljs-selector-attr">[-74.099141,71.33084]</span>,<span class="hljs-selector-attr">[-72.242226,71.556925]</span>,<span class="hljs-selector-attr">[-71.200015,70.920013]</span>,<span class="hljs-selector-attr">[-68.786054,70.525024]</span>,<span class="hljs-selector-attr">[-67.91497,70.121948]</span>,<span class="hljs-selector-attr">[-66.969033,69.186087]</span>,<span class="hljs-selector-attr">[-68.805123,68.720198]</span>,<span class="hljs-selector-attr">[-66.449866,68.067163]</span>,<span class="hljs-selector-attr">[-64.862314,67.847539]</span>,<span class="hljs-selector-attr">[-63.424934,66.928473]</span>,<span class="hljs-selector-attr">[-61.851981,66.862121]</span>,<span class="hljs-selector-attr">[-62.163177,66.160251]</span>,<span class="hljs-selector-attr">[-63.918444,64.998669]</span>,<span class="hljs-selector-attr">[-65.14886,65.426033]</span>,<span class="hljs-selector-attr">[-66.721219,66.388041]</span>,<span class="hljs-selector-attr">[-68.015016,66.262726]</span>,<span class="hljs-selector-attr">[-68.141287,65.689789]</span>,<span class="hljs-selector-attr">[-67.089646,65.108455]</span>,<span class="hljs-selector-attr">[-65.73208,64.648406]</span>,<span class="hljs-selector-attr">[-65.320168,64.382737]</span>,<span class="hljs-selector-attr">[-64.669406,63.392927]</span>,<span class="hljs-selector-attr">[-65.013804,62.674185]</span>,<span class="hljs-selector-attr">[-66.275045,62.945099]</span>,<span class="hljs-selector-attr">[-68.783186,63.74567]</span>,<span class="hljs-selector-attr">[-67.369681,62.883966]</span>,<span class="hljs-selector-attr">[-66.328297,62.280075]</span>,<span class="hljs-selector-attr">[-66.165568,61.930897]</span>,<span class="hljs-selector-attr">[-68.877367,62.330149]</span>,<span class="hljs-selector-attr">[-71.023437,62.910708]</span>,<span class="hljs-selector-attr">[-72.235379,63.397836]</span>,<span class="hljs-selector-attr">[-71.886278,63.679989]</span>,<span class="hljs-selector-attr">[-73.378306,64.193963]</span>,<span class="hljs-selector-attr">[-74.834419,64.679076]</span>,<span class="hljs-selector-attr">[-74.818503,64.389093]</span>,<span class="hljs-selector-attr">[-77.70998,64.229542]</span>,<span class="hljs-selector-attr">[-78.555949,64.572906]</span>,<span class="hljs-selector-attr">[-77.897281,65.309192]</span>,<span class="hljs-selector-attr">[-76.018274,65.326969]</span>,<span class="hljs-selector-attr">[-73.959795,65.454765]</span>,<span class="hljs-selector-attr">[-74.293883,65.811771]</span>,<span class="hljs-selector-attr">[-73.944912,66.310578]</span>,<span class="hljs-selector-attr">[-72.651167,67.284576]</span>,<span class="hljs-selector-attr">[-72.92606,67.726926]</span>,<span class="hljs-selector-attr">[-73.311618,68.069437]</span>,<span class="hljs-selector-attr">[-74.843307,68.554627]</span>,<span class="hljs-selector-attr">[-76.869101,68.894736]</span>,<span class="hljs-selector-attr">[-76.228649,69.147769]</span>,<span class="hljs-selector-attr">[-77.28737,69.76954]</span>,<span class="hljs-selector-attr">[-78.168634,69.826488]</span>,<span class="hljs-selector-attr">[-78.957242,70.16688]</span>,<span class="hljs-selector-attr">[-79.492455,69.871808]</span>,<span class="hljs-selector-attr">[-81.305471,69.743185]</span>,<span class="hljs-selector-attr">[-84.944706,69.966634]</span>,<span class="hljs-selector-attr">[-87.060003,70.260001]</span>,<span class="hljs-selector-attr">[-88.681713,70.410741]</span>,<span class="hljs-selector-attr">[-89.51342,70.762038]</span>,<span class="hljs-selector-attr">[-88.467721,71.218186]</span>,<span class="hljs-selector-attr">[-89.888151,71.222552]</span>,<span class="hljs-selector-attr">[-90.20516,72.235074]</span>,<span class="hljs-selector-attr">[-89.436577,73.129464]</span>,<span class="hljs-selector-attr">[-88.408242,73.537889]</span>,<span class="hljs-selector-attr">[-85.826151,73.803816]</span>,<span class="hljs-selector-attr">[-86.562179,73.157447]</span>]],<span class="hljs-selector-attr">[[[-100.35642,73.84389]</span>,<span class="hljs-selector-attr">[-99.16387,73.63339]</span>,<span class="hljs-selector-attr">[-97.38,73.76]</span>,<span class="hljs-selector-attr">[-97.12,73.47]</span>,<span class="hljs-selector-attr">[-98.05359,72.99052]</span>,<span class="hljs-selector-attr">[-96.54,72.56]</span>,<span class="hljs-selector-attr">[-96.72,71.66]</span>,<span class="hljs-selector-attr">[-98.35966,71.27285]</span>,<span class="hljs-selector-attr">[-99.32286,71.35639]</span>,<span class="hljs-selector-attr">[-100.01482,71.73827]</span>,<span class="hljs-selector-attr">[-102.5,72.51]</span>,<span class="hljs-selector-attr">[-102.48,72.83]</span>,<span class="hljs-selector-attr">[-100.43836,72.70588]</span>,<span class="hljs-selector-attr">[-101.54,73.36]</span>,<span class="hljs-selector-attr">[-100.35642,73.84389]</span>]],<span class="hljs-selector-attr">[[[-93.196296,72.771992]</span>,<span class="hljs-selector-attr">[-94.269047,72.024596]</span>,<span class="hljs-selector-attr">[-95.409856,72.061881]</span>,<span class="hljs-selector-attr">[-96.033745,72.940277]</span>,<span class="hljs-selector-attr">[-96.018268,73.43743]</span>,<span class="hljs-selector-attr">[-95.495793,73.862417]</span>,<span class="hljs-selector-attr">[-94.503658,74.134907]</span>,<span class="hljs-selector-attr">[-92.420012,74.100025]</span>,<span class="hljs-selector-attr">[-90.509793,73.856732]</span>,<span class="hljs-selector-attr">[-92.003965,72.966244]</span>,<span class="hljs-selector-attr">[-93.196296,72.771992]</span>]],<span class="hljs-selector-attr">[[[-120.46,71.383602]</span>,<span class="hljs-selector-attr">[-123.09219,70.90164]</span>,<span class="hljs-selector-attr">[-123.62,71.34]</span>,<span class="hljs-selector-attr">[-125.928949,71.868688]</span>,<span class="hljs-selector-attr">[-125.5,72.292261]</span>,<span class="hljs-selector-attr">[-124.80729,73.02256]</span>,<span class="hljs-selector-attr">[-123.94,73.68]</span>,<span class="hljs-selector-attr">[-124.91775,74.29275]</span>,<span class="hljs-selector-attr">[-121.53788,74.44893]</span>,<span class="hljs-selector-attr">[-120.10978,74.24135]</span>,<span class="hljs-selector-attr">[-117.55564,74.18577]</span>,<span class="hljs-selector-attr">[-116.58442,73.89607]</span>,<span class="hljs-selector-attr">[-115.51081,73.47519]</span>,<span class="hljs-selector-attr">[-116.76794,73.22292]</span>,<span class="hljs-selector-attr">[-119.22,72.52]</span>,<span class="hljs-selector-attr">[-120.46,71.82]</span>,<span class="hljs-selector-attr">[-120.46,71.383602]</span>]],<span class="hljs-selector-attr">[[[-93.612756,74.979997]</span>,<span class="hljs-selector-attr">[-94.156909,74.592347]</span>,<span class="hljs-selector-attr">[-95.608681,74.666864]</span>,<span class="hljs-selector-attr">[-96.820932,74.927623]</span>,<span class="hljs-selector-attr">[-96.288587,75.377828]</span>,<span class="hljs-selector-attr">[-94.85082,75.647218]</span>,<span class="hljs-selector-attr">[-93.977747,75.29649]</span>,<span class="hljs-selector-attr">[-93.612756,74.979997]</span>]],<span class="hljs-selector-attr">[[[-98.5,76.72]</span>,<span class="hljs-selector-attr">[-97.735585,76.25656]</span>,<span class="hljs-selector-attr">[-97.704415,75.74344]</span>,<span class="hljs-selector-attr">[-98.16,75]</span>,<span class="hljs-selector-attr">[-99.80874,74.89744]</span>,<span class="hljs-selector-attr">[-100.88366,75.05736]</span>,<span class="hljs-selector-attr">[-100.86292,75.64075]</span>,<span class="hljs-selector-attr">[-102.50209,75.5638]</span>,<span class="hljs-selector-attr">[-102.56552,76.3366]</span>,<span class="hljs-selector-attr">[-101.48973,76.30537]</span>,<span class="hljs-selector-attr">[-99.98349,76.64634]</span>,<span class="hljs-selector-attr">[-98.57699,76.58859]</span>,<span class="hljs-selector-attr">[-98.5,76.72]</span>]],<span class="hljs-selector-attr">[[[-108.21141,76.20168]</span>,<span class="hljs-selector-attr">[-107.81943,75.84552]</span>,<span class="hljs-selector-attr">[-106.92893,76.01282]</span>,<span class="hljs-selector-attr">[-105.881,75.9694]</span>,<span class="hljs-selector-attr">[-105.70498,75.47951]</span>,<span class="hljs-selector-attr">[-106.31347,75.00527]</span>,<span class="hljs-selector-attr">[-109.7,74.85]</span>,<span class="hljs-selector-attr">[-112.22307,74.41696]</span>,<span class="hljs-selector-attr">[-113.74381,74.39427]</span>,<span class="hljs-selector-attr">[-113.87135,74.72029]</span>,<span class="hljs-selector-attr">[-111.79421,75.1625]</span>,<span class="hljs-selector-attr">[-116.31221,75.04343]</span>,<span class="hljs-selector-attr">[-117.7104,75.2222]</span>,<span class="hljs-selector-attr">[-116.34602,76.19903]</span>,<span class="hljs-selector-attr">[-115.40487,76.47887]</span>,<span class="hljs-selector-attr">[-112.59056,76.14134]</span>,<span class="hljs-selector-attr">[-110.81422,75.54919]</span>,<span class="hljs-selector-attr">[-109.0671,75.47321]</span>,<span class="hljs-selector-attr">[-110.49726,76.42982]</span>,<span class="hljs-selector-attr">[-109.5811,76.79417]</span>,<span class="hljs-selector-attr">[-108.54859,76.67832]</span>,<span class="hljs-selector-attr">[-108.21141,76.20168]</span>]],<span class="hljs-selector-attr">[[[-94.684086,77.097878]</span>,<span class="hljs-selector-attr">[-93.573921,76.776296]</span>,<span class="hljs-selector-attr">[-91.605023,76.778518]</span>,<span class="hljs-selector-attr">[-90.741846,76.449597]</span>,<span class="hljs-selector-attr">[-90.969661,76.074013]</span>,<span class="hljs-selector-attr">[-89.822238,75.847774]</span>,<span class="hljs-selector-attr">[-89.187083,75.610166]</span>,<span class="hljs-selector-attr">[-87.838276,75.566189]</span>,<span class="hljs-selector-attr">[-86.379192,75.482421]</span>,<span class="hljs-selector-attr">[-84.789625,75.699204]</span>,<span class="hljs-selector-attr">[-82.753445,75.784315]</span>,<span class="hljs-selector-attr">[-81.128531,75.713983]</span>,<span class="hljs-selector-attr">[-80.057511,75.336849]</span>,<span class="hljs-selector-attr">[-79.833933,74.923127]</span>,<span class="hljs-selector-attr">[-80.457771,74.657304]</span>,<span class="hljs-selector-attr">[-81.948843,74.442459]</span>,<span class="hljs-selector-attr">[-83.228894,74.564028]</span>,<span class="hljs-selector-attr">[-86.097452,74.410032]</span>,<span class="hljs-selector-attr">[-88.15035,74.392307]</span>,<span class="hljs-selector-attr">[-89.764722,74.515555]</span>,<span class="hljs-selector-attr">[-92.422441,74.837758]</span>,<span class="hljs-selector-attr">[-92.768285,75.38682]</span>,<span class="hljs-selector-attr">[-92.889906,75.882655]</span>,<span class="hljs-selector-attr">[-93.893824,76.319244]</span>,<span class="hljs-selector-attr">[-95.962457,76.441381]</span>,<span class="hljs-selector-attr">[-97.121379,76.751078]</span>,<span class="hljs-selector-attr">[-96.745123,77.161389]</span>,<span class="hljs-selector-attr">[-94.684086,77.097878]</span>]],<span class="hljs-selector-attr">[[[-116.198587,77.645287]</span>,<span class="hljs-selector-attr">[-116.335813,76.876962]</span>,<span class="hljs-selector-attr">[-117.106051,76.530032]</span>,<span class="hljs-selector-attr">[-118.040412,76.481172]</span>,<span class="hljs-selector-attr">[-119.899318,76.053213]</span>,<span class="hljs-selector-attr">[-121.499995,75.900019]</span>,<span class="hljs-selector-attr">[-122.854924,76.116543]</span>,<span class="hljs-selector-attr">[-122.854925,76.116543]</span>,<span class="hljs-selector-attr">[-121.157535,76.864508]</span>,<span class="hljs-selector-attr">[-119.103939,77.51222]</span>,<span class="hljs-selector-attr">[-117.570131,77.498319]</span>,<span class="hljs-selector-attr">[-116.198587,77.645287]</span>]],<span class="hljs-selector-attr">[[[-93.840003,77.519997]</span>,<span class="hljs-selector-attr">[-94.295608,77.491343]</span>,<span class="hljs-selector-attr">[-96.169654,77.555111]</span>,<span class="hljs-selector-attr">[-96.436304,77.834629]</span>,<span class="hljs-selector-attr">[-94.422577,77.820005]</span>,<span class="hljs-selector-attr">[-93.720656,77.634331]</span>,<span class="hljs-selector-attr">[-93.840003,77.519997]</span>]],<span class="hljs-selector-attr">[[[-110.186938,77.697015]</span>,<span class="hljs-selector-attr">[-112.051191,77.409229]</span>,<span class="hljs-selector-attr">[-113.534279,77.732207]</span>,<span class="hljs-selector-attr">[-112.724587,78.05105]</span>,<span class="hljs-selector-attr">[-111.264443,78.152956]</span>,<span class="hljs-selector-attr">[-109.854452,77.996325]</span>,<span class="hljs-selector-attr">[-110.186938,77.697015]</span>]],<span class="hljs-selector-attr">[[[-109.663146,78.601973]</span>,<span class="hljs-selector-attr">[-110.881314,78.40692]</span>,<span class="hljs-selector-attr">[-112.542091,78.407902]</span>,<span class="hljs-selector-attr">[-112.525891,78.550555]</span>,<span class="hljs-selector-attr">[-111.50001,78.849994]</span>,<span class="hljs-selector-attr">[-110.963661,78.804441]</span>,<span class="hljs-selector-attr">[-109.663146,78.601973]</span>]],<span class="hljs-selector-attr">[[[-95.830295,78.056941]</span>,<span class="hljs-selector-attr">[-97.309843,77.850597]</span>,<span class="hljs-selector-attr">[-98.124289,78.082857]</span>,<span class="hljs-selector-attr">[-98.552868,78.458105]</span>,<span class="hljs-selector-attr">[-98.631984,78.87193]</span>,<span class="hljs-selector-attr">[-97.337231,78.831984]</span>,<span class="hljs-selector-attr">[-96.754399,78.765813]</span>,<span class="hljs-selector-attr">[-95.559278,78.418315]</span>,<span class="hljs-selector-attr">[-95.830295,78.056941]</span>]],<span class="hljs-selector-attr">[[[-100.060192,78.324754]</span>,<span class="hljs-selector-attr">[-99.670939,77.907545]</span>,<span class="hljs-selector-attr">[-101.30394,78.018985]</span>,<span class="hljs-selector-attr">[-102.949809,78.343229]</span>,<span class="hljs-selector-attr">[-105.176133,78.380332]</span>,<span class="hljs-selector-attr">[-104.210429,78.67742]</span>,<span class="hljs-selector-attr">[-105.41958,78.918336]</span>,<span class="hljs-selector-attr">[-105.492289,79.301594]</span>,<span class="hljs-selector-attr">[-103.529282,79.165349]</span>,<span class="hljs-selector-attr">[-100.825158,78.800462]</span>,<span class="hljs-selector-attr">[-100.060192,78.324754]</span>]],<span class="hljs-selector-attr">[[[-87.02,79.66]</span>,<span class="hljs-selector-attr">[-85.81435,79.3369]</span>,<span class="hljs-selector-attr">[-87.18756,79.0393]</span>,<span class="hljs-selector-attr">[-89.03535,78.28723]</span>,<span class="hljs-selector-attr">[-90.80436,78.21533]</span>,<span class="hljs-selector-attr">[-92.87669,78.34333]</span>,<span class="hljs-selector-attr">[-93.95116,78.75099]</span>,<span class="hljs-selector-attr">[-93.93574,79.11373]</span>,<span class="hljs-selector-attr">[-93.14524,79.3801]</span>,<span class="hljs-selector-attr">[-94.974,79.37248]</span>,<span class="hljs-selector-attr">[-96.07614,79.70502]</span>,<span class="hljs-selector-attr">[-96.70972,80.15777]</span>,<span class="hljs-selector-attr">[-96.01644,80.60233]</span>,<span class="hljs-selector-attr">[-95.32345,80.90729]</span>,<span class="hljs-selector-attr">[-94.29843,80.97727]</span>,<span class="hljs-selector-attr">[-94.73542,81.20646]</span>,<span class="hljs-selector-attr">[-92.40984,81.25739]</span>,<span class="hljs-selector-attr">[-91.13289,80.72345]</span>,<span class="hljs-selector-attr">[-89.45,80.509322]</span>,<span class="hljs-selector-attr">[-87.81,80.32]</span>,<span class="hljs-selector-attr">[-87.02,79.66]</span>]],<span class="hljs-selector-attr">[[[-68.5,83.106322]</span>,<span class="hljs-selector-attr">[-65.82735,83.02801]</span>,<span class="hljs-selector-attr">[-63.68,82.9]</span>,<span class="hljs-selector-attr">[-61.85,82.6286]</span>,<span class="hljs-selector-attr">[-61.89388,82.36165]</span>,<span class="hljs-selector-attr">[-64.334,81.92775]</span>,<span class="hljs-selector-attr">[-66.75342,81.72527]</span>,<span class="hljs-selector-attr">[-67.65755,81.50141]</span>,<span class="hljs-selector-attr">[-65.48031,81.50657]</span>,<span class="hljs-selector-attr">[-67.84,80.9]</span>,<span class="hljs-selector-attr">[-69.4697,80.61683]</span>,<span class="hljs-selector-attr">[-71.18,79.8]</span>,<span class="hljs-selector-attr">[-73.2428,79.63415]</span>,<span class="hljs-selector-attr">[-73.88,79.430162]</span>,<span class="hljs-selector-attr">[-76.90773,79.32309]</span>,<span class="hljs-selector-attr">[-75.52924,79.19766]</span>,<span class="hljs-selector-attr">[-76.22046,79.01907]</span>,<span class="hljs-selector-attr">[-75.39345,78.52581]</span>,<span class="hljs-selector-attr">[-76.34354,78.18296]</span>,<span class="hljs-selector-attr">[-77.88851,77.89991]</span>,<span class="hljs-selector-attr">[-78.36269,77.50859]</span>,<span class="hljs-selector-attr">[-79.75951,77.20968]</span>,<span class="hljs-selector-attr">[-79.61965,76.98336]</span>,<span class="hljs-selector-attr">[-77.91089,77.022045]</span>,<span class="hljs-selector-attr">[-77.88911,76.777955]</span>,<span class="hljs-selector-attr">[-80.56125,76.17812]</span>,<span class="hljs-selector-attr">[-83.17439,76.45403]</span>,<span class="hljs-selector-attr">[-86.11184,76.29901]</span>,<span class="hljs-selector-attr">[-87.6,76.42]</span>,<span class="hljs-selector-attr">[-89.49068,76.47239]</span>,<span class="hljs-selector-attr">[-89.6161,76.95213]</span>,<span class="hljs-selector-attr">[-87.76739,77.17833]</span>,<span class="hljs-selector-attr">[-88.26,77.9]</span>,<span class="hljs-selector-attr">[-87.65,77.970222]</span>,<span class="hljs-selector-attr">[-84.97634,77.53873]</span>,<span class="hljs-selector-attr">[-86.34,78.18]</span>,<span class="hljs-selector-attr">[-87.96192,78.37181]</span>,<span class="hljs-selector-attr">[-87.15198,78.75867]</span>,<span class="hljs-selector-attr">[-85.37868,78.9969]</span>,<span class="hljs-selector-attr">[-85.09495,79.34543]</span>,<span class="hljs-selector-attr">[-86.50734,79.73624]</span>,<span class="hljs-selector-attr">[-86.93179,80.25145]</span>,<span class="hljs-selector-attr">[-84.19844,80.20836]</span>,<span class="hljs-selector-attr">[-83.408696,80.1]</span>,<span class="hljs-selector-attr">[-81.84823,80.46442]</span>,<span class="hljs-selector-attr">[-84.1,80.58]</span>,<span class="hljs-selector-attr">[-87.59895,80.51627]</span>,<span class="hljs-selector-attr">[-89.36663,80.85569]</span>,<span class="hljs-selector-attr">[-90.2,81.26]</span>,<span class="hljs-selector-attr">[-91.36786,81.5531]</span>,<span class="hljs-selector-attr">[-91.58702,81.89429]</span>,<span class="hljs-selector-attr">[-90.1,82.085]</span>,<span class="hljs-selector-attr">[-88.93227,82.11751]</span>,<span class="hljs-selector-attr">[-86.97024,82.27961]</span>,<span class="hljs-selector-attr">[-85.5,82.652273]</span>,<span class="hljs-selector-attr">[-84.260005,82.6]</span>,<span class="hljs-selector-attr">[-83.18,82.32]</span>,<span class="hljs-selector-attr">[-82.42,82.86]</span>,<span class="hljs-selector-attr">[-81.1,83.02]</span>,<span class="hljs-selector-attr">[-79.30664,83.13056]</span>,<span class="hljs-selector-attr">[-76.25,83.172059]</span>,<span class="hljs-selector-attr">[-75.71878,83.06404]</span>,<span class="hljs-selector-attr">[-72.83153,83.23324]</span>,<span class="hljs-selector-attr">[-70.665765,83.169781]</span>,<span class="hljs-selector-attr">[-68.5,83.106322]</span>]]]}},
{"<span class="hljs-selector-tag">type</span>":"<span class="hljs-selector-tag">Feature</span>","<span class="hljs-selector-tag">id</span>":"<span class="hljs-selector-tag">CHE</span>","<span class="hljs-selector-tag">properties</span>":{"<span class="hljs-selector-tag">name</span>":"<span class="hljs-selector-tag">Switzerland</span>"},"<span class="hljs-selector-tag">geometry</span>":{"<span class="hljs-selector-tag">type</span>":"<span class="hljs-selector-tag">Polygon</span>","<span class="hljs-selector-tag">coordinates</span>":<span class="hljs-selector-attr">[[[9.594226,47.525058]</span>,<span class="hljs-selector-attr">[9.632932,47.347601]</span>,<span class="hljs-selector-attr">[9.47997,47.10281]</span>,<span class="hljs-selector-attr">[9.932448,46.920728]</span>,<span class="hljs-selector-attr">[10.442701,46.893546]</span>,<span class="hljs-selector-attr">[10.363378,46.483571]</span>,<span class="hljs-selector-attr">[9.922837,46.314899]</span>,<span class="hljs-selector-attr">[9.182882,46.440215]</span>,<span class="hljs-selector-attr">[8.966306,46.036932]</span>,<span class="hljs-selector-attr">[8.489952,46.005151]</span>,<span class="hljs-selector-attr">[8.31663,46.163642]</span>,<span class="hljs-selector-attr">[7.755992,45.82449]</span>,<span class="hljs-selector-attr">[7.273851,45.776948]</span>,<span class="hljs-selector-attr">[6.843593,45.991147]</span>,<span class="hljs-selector-attr">[6.5001,46.429673]</span>,<span class="hljs-selector-attr">[6.022609,46.27299]</span>,<span class="hljs-selector-attr">[6.037389,46.725779]</span>,<span class="hljs-selector-attr">[6.768714,47.287708]</span>,<span class="hljs-selector-attr">[6.736571,47.541801]</span>,<span class="hljs-selector-attr">[7.192202,47.449766]</span>,<span class="hljs-selector-attr">[7.466759,47.620582]</span>,<span class="hljs-selector-attr">[8.317301,47.61358]</span>,<span class="hljs-selector-attr">[8.522612,47.830828]</span>,<span class="hljs-selector-attr">[9.594226,47.525058]</span>]]}},
{"<span class="hljs-selector-tag">type</span>":"<span class="hljs-selector-tag">Feature</span>","<span class="hljs-selector-tag">id</span>":"<span class="hljs-selector-tag">CHL</span>","<span class="hljs-selector-tag">properties</span>":{"<span class="hljs-selector-tag">name</span>":"<span class="hljs-selector-tag">Chile</span>"},"<span class="hljs-selector-tag">geometry</span>":{"<span class="hljs-selector-tag">type</span>":"<span class="hljs-selector-tag">MultiPolygon</span>","<span class="hljs-selector-tag">coordinates</span>":<span class="hljs-selector-attr">[[[[-68.63401,-52.63637]</span>,<span class="hljs-selector-attr">[-68.63335,-54.8695]</span>,<span class="hljs-selector-attr">[-67.56244,-54.87001]</span>,<span class="hljs-selector-attr">[-66.95992,-54.89681]</span>,<span class="hljs-selector-attr">[-67.29103,-55.30124]</span>,<span class="hljs-selector-attr">[-68.14863,-55.61183]</span>,<span class="hljs-selector-attr">[-68.639991,-55.580018]</span>,<span class="hljs-selector-attr">[-69.2321,-55.49906]</span>,<span class="hljs-selector-attr">[-69.95809,-55.19843]</span>,<span class="hljs-selector-attr">[-71.00568,-55.05383]</span>,<span class="hljs-selector-attr">[-72.2639,-54.49514]</span>,<span class="hljs-selector-attr">[-73.2852,-53.95752]</span>,<span class="hljs-selector-attr">[-74.66253,-52.83749]</span>,<span class="hljs-selector-attr">[-73.8381,-53.04743]</span>,<span class="hljs-selector-attr">[-72.43418,-53.7154]</span>,<span class="hljs-selector-attr">[-71.10773,-54.07433]</span>,<span class="hljs-selector-attr">[-70.59178,-53.61583]</span>,<span class="hljs-selector-attr">[-70.26748,-52.93123]</span>,<span class="hljs-selector-attr">[-69.34565,-52.5183]</span>,<span class="hljs-selector-attr">[-68.63401,-52.63637]</span>]],<span class="hljs-selector-attr">[[[-68.219913,-21.494347]</span>,<span class="hljs-selector-attr">[-67.82818,-22.872919]</span>,<span class="hljs-selector-attr">[-67.106674,-22.735925]</span>,<span class="hljs-selector-attr">[-66.985234,-22.986349]</span>,<span class="hljs-selector-attr">[-67.328443,-24.025303]</span>,<span class="hljs-selector-attr">[-68.417653,-24.518555]</span>,<span class="hljs-selector-attr">[-68.386001,-26.185016]</span>,<span class="hljs-selector-attr">[-68.5948,-26.506909]</span>,<span class="hljs-selector-attr">[-68.295542,-26.89934]</span>,<span class="hljs-selector-attr">[-69.001235,-27.521214]</span>,<span class="hljs-selector-attr">[-69.65613,-28.459141]</span>,<span class="hljs-selector-attr">[-70.01355,-29.367923]</span>,<span class="hljs-selector-attr">[-69.919008,-30.336339]</span>,<span class="hljs-selector-attr">[-70.535069,-31.36501]</span>,<span class="hljs-selector-attr">[-70.074399,-33.09121]</span>,<span class="hljs-selector-attr">[-69.814777,-33.273886]</span>,<span class="hljs-selector-attr">[-69.817309,-34.193571]</span>,<span class="hljs-selector-attr">[-70.388049,-35.169688]</span>,<span class="hljs-selector-attr">[-70.364769,-36.005089]</span>,<span class="hljs-selector-attr">[-71.121881,-36.658124]</span>,<span class="hljs-selector-attr">[-71.118625,-37.576827]</span>,<span class="hljs-selector-attr">[-70.814664,-38.552995]</span>,<span class="hljs-selector-attr">[-71.413517,-38.916022]</span>,<span class="hljs-selector-attr">[-71.680761,-39.808164]</span>,<span class="hljs-selector-attr">[-71.915734,-40.832339]</span>,<span class="hljs-selector-attr">[-71.746804,-42.051386]</span>,<span class="hljs-selector-attr">[-72.148898,-42.254888]</span>,<span class="hljs-selector-attr">[-71.915424,-43.408565]</span>,<span class="hljs-selector-attr">[-71.464056,-43.787611]</span>,<span class="hljs-selector-attr">[-71.793623,-44.207172]</span>,<span class="hljs-selector-attr">[-71.329801,-44.407522]</span>,<span class="hljs-selector-attr">[-71.222779,-44.784243]</span>,<span class="hljs-selector-attr">[-71.659316,-44.973689]</span>,<span class="hljs-selector-attr">[-71.552009,-45.560733]</span>,<span class="hljs-selector-attr">[-71.917258,-46.884838]</span>,<span class="hljs-selector-attr">[-72.447355,-47.738533]</span>,<span class="hljs-selector-attr">[-72.331161,-48.244238]</span>,<span class="hljs-selector-attr">[-72.648247,-48.878618]</span>,<span class="hljs-selector-attr">[-73.415436,-49.318436]</span>,<span class="hljs-selector-attr">[-73.328051,-50.378785]</span>,<span class="hljs-selector-attr">[-72.975747,-50.74145]</span>,<span class="hljs-selector-attr">[-72.309974,-50.67701]</span>,<span class="hljs-selector-attr">[-72.329404,-51.425956]</span>,<span class="hljs-selector-attr">[-71.914804,-52.009022]</span>,<span class="hljs-selector-attr">[-69.498362,-52.142761]</span>,<span class="hljs-selector-attr">[-68.571545,-52.299444]</span>,<span class="hljs-selector-attr">[-69.461284,-52.291951]</span>,<span class="hljs-selector-attr">[-69.94278,-52.537931]</span>,<span class="hljs-selector-attr">[-70.845102,-52.899201]</span>,<span class="hljs-selector-attr">[-71.006332,-53.833252]</span>,<span class="hljs-selector-attr">[-71.429795,-53.856455]</span>,<span class="hljs-selector-attr">[-72.557943,-53.53141]</span>,<span class="hljs-selector-attr">[-73.702757,-52.835069]</span>,<span class="hljs-selector-attr">[-73.702757,-52.83507]</span>,<span class="hljs-selector-attr">[-74.946763,-52.262754]</span>,<span class="hljs-selector-attr">[-75.260026,-51.629355]</span>,<span class="hljs-selector-attr">[-74.976632,-51.043396]</span>,<span class="hljs-selector-attr">[-75.479754,-50.378372]</span>,<span class="hljs-selector-attr">[-75.608015,-48.673773]</span>,<span class="hljs-selector-attr">[-75.18277,-47.711919]</span>,<span class="hljs-selector-attr">[-74.126581,-46.939253]</span>,<span class="hljs-selector-attr">[-75.644395,-46.647643]</span>,<span class="hljs-selector-attr">[-74.692154,-45.763976]</span>,<span class="hljs-selector-attr">[-74.351709,-44.103044]</span>,<span class="hljs-selector-attr">[-73.240356,-44.454961]</span>,<span class="hljs-selector-attr">[-72.717804,-42.383356]</span>,<span class="hljs-selector-attr">[-73.3889,-42.117532]</span>,<span class="hljs-selector-attr">[-73.701336,-43.365776]</span>,<span class="hljs-selector-attr">[-74.331943,-43.224958]</span>,<span class="hljs-selector-attr">[-74.017957,-41.794813]</span>,<span class="hljs-selector-attr">[-73.677099,-39.942213]</span>,<span class="hljs-selector-attr">[-73.217593,-39.258689]</span>,<span class="hljs-selector-attr">[-73.505559,-38.282883]</span>,<span class="hljs-selector-attr">[-73.588061,-37.156285]</span>,<span class="hljs-selector-attr">[-73.166717,-37.12378]</span>,<span class="hljs-selector-attr">[-72.553137,-35.50884]</span>,<span class="hljs-selector-attr">[-71.861732,-33.909093]</span>,<span class="hljs-selector-attr">[-71.43845,-32.418899]</span>,<span class="hljs-selector-attr">[-71.668721,-30.920645]</span>,<span class="hljs-selector-attr">[-71.370083,-30.095682]</span>,<span class="hljs-selector-attr">[-71.489894,-28.861442]</span>,<span class="hljs-selector-attr">[-70.905124,-27.64038]</span>,<span class="hljs-selector-attr">[-70.724954,-25.705924]</span>,<span class="hljs-selector-attr">[-70.403966,-23.628997]</span>,<span class="hljs-selector-attr">[-70.091246,-21.393319]</span>,<span class="hljs-selector-attr">[-70.16442,-19.756468]</span>,<span class="hljs-selector-attr">[-70.372572,-18.347975]</span>,<span class="hljs-selector-attr">[-69.858444,-18.092694]</span>,<span class="hljs-selector-attr">[-69.590424,-17.580012]</span>,<span class="hljs-selector-attr">[-69.100247,-18.260125]</span>,<span class="hljs-selector-attr">[-68.966818,-18.981683]</span>,<span class="hljs-selector-attr">[-68.442225,-19.405068]</span>,<span class="hljs-selector-attr">[-68.757167,-20.372658]</span>,<span class="hljs-selector-attr">[-68.219913,-21.494347]</span>]]]}},
]}
</code></pre>
<h2 data-id="heading-3">3. å¯¼å…¥ä¾èµ–</h2>
<p><code>GeoJSON</code>ä½œä¸ºä¸€ç§çŸ¢é‡æ•°æ®æ ¼å¼ï¼Œå¯ä»¥ä½¿ç”¨çŸ¢é‡åº“<code>OGR</code>è¿›è¡Œå¤„ç†ï¼Œä»¥å®ç°<code>GeoJSON</code>æ•°æ®ä»æ–‡æœ¬æ ¼å¼è½¬æ¢ä¸º<code>Shp</code>æ ¼å¼ã€‚å…¶ä¸­è¿˜æ¶‰åŠåæ ‡å®šä¹‰ï¼Œæ‰€ä»¥è¿˜éœ€è¦å¼•å…¥<code>osr</code>æ¨¡å—ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">from</span>Â osgeoÂ <span class="hljs-keyword">import</span>Â ogr,osr
<span class="hljs-keyword">import</span>Â os
</code></pre>
<h2 data-id="heading-4">4. æ•°æ®è¯»å–ä¸è½¬æ¢</h2>
<p>å®šä¹‰ä¸€ä¸ªæ–¹æ³•<code>GeoJSON2Shp(geoPath,shpPath)</code>ç”¨äºå°†<code>GeoJSON</code>æ•°æ®è½¬æ¢ä¸º<code>Shp</code>æ•°æ®ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-string">"""
è¯´æ˜ï¼šå°†Â GeoJSONÂ æ–‡ä»¶è½¬æ¢ä¸ºÂ ShapfileÂ æ–‡ä»¶
å‚æ•°ï¼š
Â Â Â Â -geoPathï¼šGeoJSONÂ æ–‡ä»¶è·¯å¾„
Â Â Â Â -shpPathï¼šShpÂ æ–‡ä»¶è·¯å¾„
"""</span>
<span class="hljs-keyword">def</span>Â <span class="hljs-title function_">GeoJSON2Shp</span>(<span class="hljs-params">geoPath,shpPath</span>):
</code></pre>
<p>åœ¨è¿›è¡Œ<code>GeoJSON</code>æ•°æ®æ ¼å¼è½¬æ¢ä¹‹å‰ï¼Œéœ€è¦æ£€æŸ¥æ•°æ®è·¯å¾„æ˜¯å¦å­˜åœ¨ã€‚</p>
<pre><code class="hljs language-lua" lang="lua">#Â æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨
<span class="hljs-keyword">if</span>Â <span class="hljs-built_in">os</span>.<span class="hljs-built_in">path</span>.exists(geoPath):
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"GeoJSONÂ æ–‡ä»¶å­˜åœ¨ã€‚"</span>)
<span class="hljs-keyword">else</span>:
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"GeoJSONÂ æ–‡ä»¶ä¸å­˜åœ¨ï¼Œè¯·é‡æ–°é€‰æ‹©æ–‡ä»¶ï¼"</span>)
Â Â Â Â <span class="hljs-keyword">return</span>
</code></pre>
<p>æ‰“å¼€<code>GeoJSON</code>æ•°æ®ã€‚</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment">#Â æ‰“å¼€JSONæ–‡ä»¶</span>
<span class="hljs-attr">jsonDataSource</span>Â =Â ogr.Open(geoPath)
<span class="hljs-attr">jsonLayer</span>Â =Â jsonDataSource.GetLayer()
</code></pre>
<p>ä½¿ç”¨<code>os.path.exists</code>æ–¹æ³•æ£€æŸ¥<code>Shp</code>æ–‡ä»¶æ˜¯å¦å·²ç»åˆ›å»ºï¼Œå¦‚æœå­˜åœ¨åˆ™å°†å…¶åˆ é™¤ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">if</span>Â os.path.exists(shpPath):
Â Â Â Â <span class="hljs-keyword">try</span>:
Â Â Â Â Â Â Â Â shpDriver.DeleteDataSource(shpPath)
Â Â Â Â Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"æ–‡ä»¶å·²åˆ é™¤ï¼"</span>)
Â Â Â Â <span class="hljs-keyword">except</span>Â ExceptionÂ <span class="hljs-keyword">as</span>Â e:
Â Â Â Â Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ–‡ä»¶åˆ é™¤å‡ºé”™ï¼š<span class="hljs-subst">{e}</span>"</span>)
Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-literal">False</span>
</code></pre>
<p>é€šè¿‡<code>GetDriverByName</code>è·å–<code>Shp</code>æ•°æ®é©±åŠ¨ï¼Œå¹¶åˆ›å»º<code>Shp</code>æ•°æ®æºã€‚</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment">#Â åˆ›å»ºShpæ•°æ®æº</span>
<span class="hljs-attr">shpDriver</span>Â =Â ogr.GetDriverByName(<span class="hljs-string">"ESRIÂ Shapefile"</span>)
<span class="hljs-attr">shpDataSource</span>Â =Â shpDriver.CreateDataSource(shpPath)
</code></pre>
<p>æ·»åŠ <code>Shp</code>å›¾å±‚å±æ€§ã€‚è·å–æºæ•°æ®åæ ‡ç³»ã€å±æ€§å­—æ®µä»¥åŠå‡ ä½•å¯¹è±¡ï¼Œå¹¶å°†å…¶å¤åˆ¶åˆ°ç›®æ ‡å›¾å±‚ä¸­ã€‚å±æ€§ç»“æ„æ˜¾ç¤ºå¦‚ä¸‹ï¼š<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f123ef5434cc4d1dad710c1ffb48788f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767619384&amp;x-signature=%2B4xZj01G5CrncOwDgdM8ncg%2FpL8%3D" alt="" loading="lazy"/></p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment">#Â è·å–åæ ‡ç³»</span>
<span class="hljs-attr">srs</span>Â =Â jsonLayer.GetSpatialRef()

<span class="hljs-comment">#Â åˆ›å»ºShpæ•°æ®å›¾å±‚</span>
<span class="hljs-attr">shpLayer</span>Â =Â shpDataSource.CreateLayer(
Â Â Â Â "layer",
Â Â Â Â <span class="hljs-attr">srs</span>=srs,
Â Â Â Â <span class="hljs-attr">geom_type</span>=jsonLayer.GetGeomType()
)

<span class="hljs-comment">#Â è·å–å­—æ®µå±æ€§</span>
<span class="hljs-attr">layerDefn</span>Â =Â jsonLayer.GetLayerDefn()
forÂ iÂ inÂ range(layerDefn.GetFieldCount()):
Â Â Â Â <span class="hljs-attr">fieldDefn</span>Â =Â layerDefn.GetFieldDefn(i)
Â Â Â Â shpLayer.CreateField(fieldDefn)

<span class="hljs-comment">#Â è·å–å‡ ä½•å±æ€§</span>
forÂ featureÂ inÂ jsonLayer:
Â Â Â Â shpLayer.CreateFeature(feature)
</code></pre>
<p>åœ¨æ•°æ®è¯»å–å®Œæˆä¹‹åå…³é—­æ•°æ®æºã€‚</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment">#Â å…³é—­æ•°æ®æº</span>
<span class="hljs-attr">jsonDataSource</span>Â =Â shpDataSourceÂ =Â None
</code></pre>
<p>æ•°æ®è½¬æ¢å®Œæˆä¹‹ååœ¨<code>ArcMap</code>ä¸­æ‰“å¼€çš„æ˜¾ç¤ºæ•ˆæœï¼š<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/93226aef513840bfac6fe98834b79590~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767619384&amp;x-signature=cxR97BsjasfnHzlEai79YIOivBk%3D" alt="" loading="lazy"/>æ•°æ®å±æ€§ï¼š<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/14d7e064233b4a89a32f900ce2c95382~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767619384&amp;x-signature=4243R2q9un3kSrjMH0wRAUqHUak%3D" alt="" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ‹’ç»è‡ƒè‚¿ï¼ä¸è£…ç¬¬ä¸‰æ–¹è½¯ä»¶ï¼Œç»™ Mac å³é”®èœå•åŠ ä¸Šè¿™äº›ç¥ä»™åŠŸèƒ½]]></title>    <link>https://juejin.cn/post/7589110783146442786</link>    <guid>https://juejin.cn/post/7589110783146442786</guid>    <pubDate>2025-12-29T13:41:48.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589110783146442786" data-draft-id="7589093939656736820" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ‹’ç»è‡ƒè‚¿ï¼ä¸è£…ç¬¬ä¸‰æ–¹è½¯ä»¶ï¼Œç»™ Mac   å³é”®èœå•åŠ ä¸Šè¿™äº›ç¥ä»™åŠŸèƒ½"/> <meta itemprop="keywords" content="Mac"/> <meta itemprop="datePublished" content="2025-12-29T13:41:48.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¹Ÿæ— é£é›¨ä¹Ÿé›¾æ™´"/> <meta itemprop="url" content="https://juejin.cn/user/2175258804632332"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ‹’ç»è‡ƒè‚¿ï¼ä¸è£…ç¬¬ä¸‰æ–¹è½¯ä»¶ï¼Œç»™ Mac   å³é”®èœå•åŠ ä¸Šè¿™äº›ç¥ä»™åŠŸèƒ½
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2175258804632332/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¹Ÿæ— é£é›¨ä¹Ÿé›¾æ™´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T13:41:48.000Z" title="Mon Dec 29 2025 13:41:48 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Mac å³é”®èœå•æ·»åŠ è‡ªå®šä¹‰æ“ä½œï¼šå¤åˆ¶è·¯å¾„ã€ç”¨æŒ‡å®šåº”ç”¨æ‰“å¼€</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f13231973e73434c8870918a74427aee~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lmf5peg6aOO6Zuo5Lmf6Zu-5pm0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767620508&amp;x-signature=kOBRFv31YUWGGdQvIHp5Jxy%2B70M%3D" alt="image.png" loading="lazy"/></p>
<p>åœ¨ Finder é‡Œå³é”®ä¸€ä¸ªæ–‡ä»¶ï¼Œæƒ³å¤åˆ¶å®ƒçš„å®Œæ•´è·¯å¾„ï¼Œå‘ç°æ²¡æœ‰è¿™ä¸ªé€‰é¡¹ã€‚</p>
<p>æƒ³ç”¨ Typora æ‰“å¼€ä¸€ä¸ª Markdown æ–‡ä»¶ï¼Œå¾—å…ˆæ‰“å¼€ Typoraï¼Œå†æŠŠæ–‡ä»¶æ‹–è¿›å»ï¼Œæˆ–è€…å³é”® â†’ æ‰“å¼€æ–¹å¼ â†’ é€‰åº”ç”¨ï¼Œæ­¥éª¤æœ‰ç‚¹å¤šã€‚</p>
<p>è¿™ä¸¤ä¸ªéœ€æ±‚ç”¨ macOS è‡ªå¸¦çš„ Automator å°±èƒ½å®ç°ï¼Œä¸ç”¨è£…ç¬¬ä¸‰æ–¹è½¯ä»¶ã€‚</p>
<h3 data-id="heading-1">åˆ›å»º"å¤åˆ¶è·¯å¾„"æ“ä½œ</h3>
<ol>
<li>æ‰“å¼€ <strong>Automator</strong>ï¼ˆSpotlight æœç´¢ <code>Automator</code>ï¼‰</li>
<li>æ–°å»ºæ–‡ç¨¿ï¼Œé€‰æ‹© <strong>å¿«é€Ÿæ“ä½œ</strong></li>
<li>å³ä¸Šè§’é…ç½®ï¼š
<ul>
<li>"å·¥ä½œæµç¨‹æ”¶åˆ°å½“å‰" â†’ <strong>æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹</strong></li>
<li>"ä½äº" â†’ <strong>è®¿è¾¾.app</strong></li>
</ul>
</li>
<li>å·¦ä¾§æœç´¢"è¿è¡Œ Shell è„šæœ¬"ï¼Œæ‹–åˆ°å³è¾¹å·¥ä½œåŒº</li>
<li>é…ç½®è„šæœ¬ï¼š
<ul>
<li>"ä¼ é€’è¾“å…¥" â†’ <strong>ä½œä¸ºè‡ªå˜é‡</strong></li>
<li>Shell â†’ <code>/bin/zsh</code></li>
<li>è„šæœ¬å†…å®¹ï¼š</li>
</ul>
</li>
</ol>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-keyword">for</span> f <span class="hljs-keyword">in</span> <span class="hljs-string">"<span class="hljs-variable">$@</span>"</span>; <span class="hljs-keyword">do</span>
  <span class="hljs-built_in">echo</span> -n <span class="hljs-string">"<span class="hljs-variable">$f</span>"</span> | pbcopy
<span class="hljs-keyword">done</span>
</code></pre>
<ol start="6">
<li><code>Cmd + S</code> ä¿å­˜ï¼Œå‘½åä¸º <code>å¤åˆ¶è·¯å¾„</code></li>
</ol>
<h3 data-id="heading-2">åˆ›å»º"ç”¨ Typora æ‰“å¼€"æ“ä½œ</h3>
<p>æ­¥éª¤ä¸€æ ·ï¼Œåªæ˜¯è„šæœ¬ä¸åŒï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-keyword">for</span> f <span class="hljs-keyword">in</span> <span class="hljs-string">"<span class="hljs-variable">$@</span>"</span>; <span class="hljs-keyword">do</span>
  open -a <span class="hljs-string">"Typora"</span> <span class="hljs-string">"<span class="hljs-variable">$f</span>"</span>
<span class="hljs-keyword">done</span>
</code></pre>
<p>ä¿å­˜æ—¶å‘½åä¸º <code>ç”¨ Typora æ‰“å¼€</code>ã€‚</p>
<p>æƒ³ç”¨å…¶ä»–åº”ç”¨æ‰“å¼€ï¼ŒæŠŠ <code>Typora</code> æ¢æˆå¯¹åº”çš„åº”ç”¨åå°±è¡Œï¼Œæ¯”å¦‚ <code>Visual Studio Code</code>ã€<code>Sublime Text</code>ã€‚</p>
<h3 data-id="heading-3">ä½¿ç”¨æ–¹å¼</h3>
<p>ä¿å­˜åï¼Œå³é”®ä»»æ„æ–‡ä»¶ â†’ <strong>æœåŠ¡</strong> æˆ– <strong>å¿«é€Ÿæ“ä½œ</strong>ï¼Œå°±èƒ½çœ‹åˆ°åˆšæ‰åˆ›å»ºçš„æ“ä½œäº†ã€‚</p>
<p>ç¬¬ä¸€æ¬¡ä½¿ç”¨å¯èƒ½ä¼šå¼¹å‡ºæƒé™è¯·æ±‚ï¼Œå…è®¸å°±è¡Œã€‚</p>
<h3 data-id="heading-4">è®¾ç½®é”®ç›˜å¿«æ·é”®ï¼ˆå¯é€‰ï¼‰</h3>
<p>å«Œæ¯æ¬¡è¦ç‚¹ä¸¤å±‚èœå•éº»çƒ¦ï¼Œå¯ä»¥ç»™æ“ä½œç»‘å®šå¿«æ·é”®ï¼š</p>
<p><strong>ç³»ç»Ÿè®¾ç½® â†’ é”®ç›˜ â†’ é”®ç›˜å¿«æ·é”® â†’ æœåŠ¡ â†’ æ–‡ä»¶å’Œæ–‡ä»¶å¤¹</strong></p>
<p>æ‰¾åˆ°ä½ åˆ›å»ºçš„æ“ä½œï¼Œç‚¹å³è¾¹çš„"æ·»åŠ å¿«æ·é”®"ï¼Œæ¯”å¦‚ç»™"å¤åˆ¶è·¯å¾„"è®¾ç½® <code>Cmd + Shift + C</code>ã€‚</p>
<p>ä»¥åé€‰ä¸­æ–‡ä»¶ç›´æ¥æŒ‰å¿«æ·é”®ï¼Œè·¯å¾„å°±å¤åˆ¶åˆ°å‰ªè´´æ¿äº†ã€‚</p>
<h3 data-id="heading-5">ç®¡ç†å’Œåˆ é™¤</h3>
<p>åˆ›å»ºçš„å¿«é€Ÿæ“ä½œä¿å­˜åœ¨ <code>~/Library/Services/</code> ç›®å½•ä¸‹ï¼Œæ¯ä¸ªæ˜¯ä¸€ä¸ª <code>.workflow</code> æ–‡ä»¶å¤¹ã€‚</p>
<p>æƒ³åˆ é™¤æŸä¸ªæ“ä½œï¼Œç›´æ¥åˆ å¯¹åº”çš„ <code>.workflow</code> æ–‡ä»¶å¤¹å°±è¡Œï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">rm</span> -rf ~/Library/Services/å¤åˆ¶è·¯å¾„.workflow
</code></pre>
<p>æˆ–è€…åœ¨ Finder é‡ŒæŒ‰ <code>Cmd + Shift + G</code>ï¼Œè¾“å…¥ <code>~/Library/Services/</code>ï¼Œæ‰‹åŠ¨åˆ é™¤ã€‚</p>
<h3 data-id="heading-6">è¡¥å……ï¼šå¤åˆ¶å¤šä¸ªæ–‡ä»¶è·¯å¾„</h3>
<p>å¦‚æœæƒ³åŒæ—¶é€‰ä¸­å¤šä¸ªæ–‡ä»¶ï¼Œå¤åˆ¶æ‰€æœ‰è·¯å¾„ï¼ˆæ¯è¡Œä¸€ä¸ªï¼‰ï¼Œè„šæœ¬æ”¹æˆï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">printf</span> <span class="hljs-string">'%s\n'</span> <span class="hljs-string">"<span class="hljs-variable">$@</span>"</span> | pbcopy
</code></pre>
<h3 data-id="heading-7">åŸç”Ÿæ–¹æ³•çš„å±€é™</h3>
<p>ç”¨ Automator åˆ›å»ºçš„æ“ä½œåªèƒ½å‡ºç°åœ¨"æœåŠ¡"æˆ–"å¿«é€Ÿæ“ä½œ"å­èœå•é‡Œï¼Œæ²¡æ³•ç›´æ¥åŠ åˆ°å³é”®èœå•é¡¶å±‚ã€‚</p>
<p>æƒ³åŠ åˆ°é¡¶å±‚ï¼Œå¾—ç”¨ç¬¬ä¸‰æ–¹å·¥å…·ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fiboysoft.com%2Fmagic-menu%2F" target="_blank" title="https://iboysoft.com/magic-menu/" ref="nofollow noopener noreferrer">iBoysoft MagicMenu</a> - å…è´¹ç‰ˆå¤Ÿç”¨</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Flangui.net%2Fcontext-menu%2F" target="_blank" title="https://langui.net/context-menu/" ref="nofollow noopener noreferrer">Context Menu</a> - ä»˜è´¹ï¼ŒåŠŸèƒ½æ›´å¼º</li>
</ul>
<p>ä¸è¿‡å¯¹æˆ‘æ¥è¯´ï¼Œè®¾ä¸ªå¿«æ·é”®å°±å¤Ÿäº†ï¼Œä¸éœ€è¦é¢å¤–è£…è½¯ä»¶ã€‚</p>
<hr/>
<p>å¦‚æœä½ è§‰å¾—è¿™ç¯‡æ–‡ç« æœ‰å¸®åŠ©ï¼Œæ¬¢è¿å…³æ³¨æˆ‘çš„ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftt-a1i" target="_blank" title="https://github.com/tt-a1i" ref="nofollow noopener noreferrer">GitHub</a>ï¼Œä¸‹é¢æ˜¯æˆ‘çš„ä¸€äº›å¼€æºé¡¹ç›®ï¼š</p>
<p><strong>Claude Code Skills</strong>ï¼ˆæŒ‰éœ€åŠ è½½ï¼Œæ„å›¾è‡ªåŠ¨è¯†åˆ«ï¼Œä¸æµªè´¹ tokenï¼Œ<a href="https://juejin.cn/post/7578714735307735066" target="_blank" title="https://juejin.cn/post/7578714735307735066">ä»‹ç»æ–‡ç« </a>ï¼‰ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftt-a1i%2Fcode-review-skill" target="_blank" title="https://github.com/tt-a1i/code-review-skill" ref="nofollow noopener noreferrer">code-review-skill</a> - ä»£ç å®¡æŸ¥æŠ€èƒ½ï¼Œè¦†ç›– React 19ã€Vue 3ã€TypeScriptã€Rust ç­‰çº¦ 9000 è¡Œè§„åˆ™ï¼ˆ<a href="https://juejin.cn/post/7578709098255908902" target="_blank" title="https://juejin.cn/post/7578709098255908902">è¯¦ç»†ä»‹ç»</a>ï¼‰</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftt-a1i%2F5-whys-skill" target="_blank" title="https://github.com/tt-a1i/5-whys-skill" ref="nofollow noopener noreferrer">5-whys-skill</a> - 5 Whys æ ¹å› åˆ†æï¼Œè¯´"æ‰¾æ ¹å› "è‡ªåŠ¨æ¿€æ´»</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftt-a1i%2Ffirst-principles-skill" target="_blank" title="https://github.com/tt-a1i/first-principles-skill" ref="nofollow noopener noreferrer">first-principles-skill</a> - ç¬¬ä¸€æ€§åŸç†æ€è€ƒï¼Œé€‚åˆæ¶æ„è®¾è®¡å’ŒæŠ€æœ¯é€‰å‹</li>
</ul>
<p><strong>vibe coding åŸç†å­¦ä¹ </strong>ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftt-a1i%2Fcoding-cli-guide" target="_blank" title="https://github.com/tt-a1i/coding-cli-guide" ref="nofollow noopener noreferrer">coding-cli-guide</a>ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Ftt-a1i.github.io%2Fcoding-cli-guide%2F%3Ftab%3Dstart-here" target="_blank" title="https://tt-a1i.github.io/coding-cli-guide/?tab=start-here" ref="nofollow noopener noreferrer">å­¦ä¹ ç½‘ç«™</a>ï¼‰- å­¦ä¹  qwen-cli æ—¶æ•´ç†çš„ç¬”è®°ï¼Œ40+ äº¤äº’å¼åŠ¨ç”»æ¼”ç¤º AI CLI å†…éƒ¨æœºåˆ¶</li>
</ul>
<p><strong>å…¨æ ˆé¡¹ç›®</strong>ï¼ˆé€‚åˆå­¦ä¹ ç°ä»£æŠ€æœ¯æ ˆï¼‰ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftt-a1i%2Fprompt-vault" target="_blank" title="https://github.com/tt-a1i/prompt-vault" ref="nofollow noopener noreferrer">prompt-vault</a> - Prompt ç®¡ç†å™¨ï¼Œç”¨çš„éƒ½æ˜¯æœ€æ–°çš„æŠ€æœ¯æ ˆï¼Œé€‚åˆç”¨æ¥å­¦ä¹ äº†è§£æœ€æ–°çš„å‰ç«¯å…¨æ ˆå¼€å‘èŒƒå¼ï¼šNext.js 15 + React 19 + tRPC 11 + Supabase å…¨æ ˆç¤ºä¾‹ï¼Œclone ä¸‹æ¥é…ä¸ªå…è´¹ Supabase å°±èƒ½è·‘</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftt-a1i%2Fchat_edit" target="_blank" title="https://github.com/tt-a1i/chat_edit" ref="nofollow noopener noreferrer">chat_edit</a> - åŒæ¨¡å¼ AI åº”ç”¨ï¼ˆèŠå¤©+å¯Œæ–‡æœ¬ç¼–è¾‘ï¼‰ï¼ŒVue 3.5 + TypeScript + Vite 5 + Quill 2.0 + IndexedDB</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç»¿è”äº‘ NAS å®‰è£… AudioDock è¯¦ç»†æ•™ç¨‹]]></title>    <link>https://juejin.cn/post/7589052659436486702</link>    <guid>https://juejin.cn/post/7589052659436486702</guid>    <pubDate>2025-12-29T13:54:38.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589052659436486702" data-draft-id="7589092567544971273" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç»¿è”äº‘ NAS å®‰è£… AudioDock è¯¦ç»†æ•™ç¨‹"/> <meta itemprop="keywords" content="å‰ç«¯,Docker,å®¹å™¨"/> <meta itemprop="datePublished" content="2025-12-29T13:54:38.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="èŒèŒå“’è‰å¤´å°†å†›"/> <meta itemprop="url" content="https://juejin.cn/user/1116759543260727"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç»¿è”äº‘ NAS å®‰è£… AudioDock è¯¦ç»†æ•™ç¨‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1116759543260727/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    èŒèŒå“’è‰å¤´å°†å†›
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T13:54:38.000Z" title="Mon Dec 29 2025 13:54:38 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#2b2b2b;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(159,219,252,.15) 3%,transparent 0),linear-gradient(1turn,rgba(159,219,252,.15) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin-top:35px;margin-bottom:10px;color:#4dd0e1}.markdown-body h1{font-size:30px;text-align:center;position:relative;width:max-content;margin:0 auto}.markdown-body h1:before{position:absolute;content:"";z-index:-1;top:-20px;height:100%;width:100px;left:0;right:0;margin:0 auto;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADsAAAA6CAYAAAAOeSEWAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAABkLSURBVGhDtZoHnJ1llcbP3Om9ZiYzmfSQhCQQIbRQVQKI9CYC68qKriJK0UXcZRcINqStIoiIqKCi1NACQihBWiCkkJ5MJlMyvd7p7d759v989/sy34yTbIj48Atz71ff855znvOc971xDrB/EtoGI7a9Z8Aq+wZML0mNj7dE95NZ1OKsj1dHo1GbnJpss9OTbWJyonvun4VP1Njuoagtb+m0it4By0iIt8LEeMvkr8XFWcfgkA1gYDLf47i2PzpsyU7UspKSLDoctagTZ7Vc08MzClMS7awJ2ZaflBB78CeET8TYla1dtrKt2w5KS7YCDGzEoz2RqKUmhGw6x2bhuXyOp2BoRXef1Q1E7Lj8TIsMD1sbxu1kcnYSAX1810RMTUmyMB7f2j1gC7NS7byinNiL/kH8Q8a+2NRh77b32El56VaPAe0YeGR2mh2bm+FdMRqP1rbZe+3dFsHT35qcb/Oz0rwzo7Gxs9feYPLS4kM2h8lawee5hPmlJXneFQeGAzJ2F564v7rFzi7Msu3d/Xgjzq5g8ArX8VCNN2vJ28daey0zZJabmGCLslP5HOf+Oygr3UzDGOf+JxrauXfQjslJt+dbuuyMgiwmk+sPAB/b2Lt2NdoMZnuY21qHIvbvUyZ4Z0ZQiXGrWjvsmPxsK4R0nmHA8ZCTQvxVQn5eRipklIBtcVbV1WtHYsjati47ZWKuTUpP9Z4yGk/xDBGe3v1mW4/dOrvYO7P/2G9jRSjf31FnXyaUXiB8r51WaJkM3kcfOSa2FR6qarIenooTLQHPLcC4mYThyw1tVpKWYlVERlZ8nC3Oz3Jzdn1nn5uvQ8OOHYvhR/CvsqffJbkCkZTvcYZ6Z0WTfTovw5Y1dtjXp+TbFPhgf7FfxpYxuMfr2uwo8rEtMmwXF+d6Z8wGmIR2PLyjo8cqOFffP2SLGexJEJCP9R29thkPXlpa4A5Y3w/jmuVNYYwO2QkY7WMtz3mVcE1hkualJdmSolzX8GnpKd4VZq80d1o7zN0RdWxGaqItgbn3B/+vsasgh/UMNBOvzYMZDxtDKp289KGaVguFQvb1yQWWwuB97GaSXqUUnVaYbSUwrDCEBz/C2CM8EhNrP13fbkeSh3OJgCAe2N1CWXKsGOc6TOr5U4q8MwYhDtkTda02MyPN+nnGBQEH7A37NHYz5KOZVv08qyjbSseEzKauPnsMj98wc6Ibcj5UUv7M8QWZTE52jEwGOVaD8U1Dw1YNWX0qM8VKyb80L/TrOPYOzH4KBJQTrK8M7+7KZjuM63sHBt17FubGoibCuf+tarWFGUmuwWeT8/vCXo1tZOYeZcazCaez8MwEzzM+HqhqtiJI5twxL1jeGLYk7jmKMF1JOCbg6Qj5nAdRqX7q3BYm8VAmQvW1lfcMc58IT95uIA3q+gftrDHPXUXJWkVEHJme5Bp5UmHsvIZ/O3l8ECE/FWcsItX2hr0ae8O2Wjs+J43QTbOZzGYQ/7Wtxq6eXjRK3r0By4YJ6Ty8EiYSJqcm2eGeV4Pox/ANENJR49RiEdfqcLflUJrEBZqgxYHrBjn2ExFURqKdVETN9YirJxKxR2rbrYeQv5ISmB6IsiDGNfZGWPeMgkzr58xnPaJ5p6XDZPKz4T77wayJ7jGhhXLwanOHTWBgq5n5q6YUwNJ7l3kKcRl7OJ7fF56l1GzvHbSD8dghTPi0wIRfv6XafjJ3ssv0PnZQ7nZx/etwzO1zJ3lHR2OETTw8x0tOx1AN3De0D7YV+63oGthjaJQ5Ur7eVVZjcdGInUyuaT73ZWg3efV8fZs7cc2E777Qi5eunVbghvPPymrt/krKGfcLd8ybYjdxrK6333Z09rjHZkNuLYzz0uIc+xWCZzz8nbHbe4dsY1e/XUOY+nimvtUaSazv4jXhaQasSbmYmpuenGwHZ8TKggSEQm08rMD7ahBOoExcMqXQegjnZ+CEvaEa1ZQUQkt39dj0zDS7krq+ARmpdws/nlNqD9WFbWN7l5u3wr9MyrcXKUsqWy3jTOaoML4DdaQ83YIoT4VYpEXvYQZLmbX5SLohBrgOj186Kc/iKTUPUhq+Rrm5ekOl3TWv1Mr6hqwbY0VOQXwEo+Moq4Z47q5qsU489G944LyJOW4LOLZOKtT/iI6+nGe/0dhuEd4ltj2NmiuCU4hnk5fHIi7+RK4uTEu0e+s7rAiRcw1CYy3OejvcYz+eXeI9MYY9nu3lYZl0KavJJ7Vjibzgjp319rUZE20j7CkJqFr5JQYgQ39f3eQaKpQk0afy8nl4uBzvjUUTRk7k3iebOm0pabDiyFn2XGu3dRME41CGVeBVqSiVnc6hIUpekp1VjHLDSOEcQlui5W/U8C7IKREjv1Gabw3wRwUTvpv7jybPtzHmIPZ49q6KRjuccqBQVCOtGvqXhrCFUUXJzOYSHt7Kw5Ix9H08dSje1o1JyL73IYXpEMmE5CRbw6wuykx2pR+Pd6/J4JpLiJKV6N9OnrcQNfQ0Zem6qQX2MmFXyWTE+DMO0kGx4e08DEjnXbsYuOq7niHB8jdY/wQ8Srm2XCZZUrOakF1CY5EKX0h93Tu/1J4kRdbDMT8MamgZK9xe3uDcvrPe++Y4f61rcZr7B53rN1c5N2ytcV5rCrvHt3T2Og19g+5nH7dvq3bqunr4NOwgK2MHA1jeEDuG7HNuLmtw7qpocl5t6nCPvdTQ7v4N4u3WTqeyu9cZHIo4f6lqdFoHh7wzMbzDeeGv3Hvzjlrnh2W1zofhHuftxpFn3VFe7zxS0+p0DlKVPbhhvBxhvwiFMgfP+mjHA08gEC4pybeLyK1iZldh8zC5VJQyUl8l59KZ0WJk2xaiYWxNrkXXJhA8r3PvZRur7ZZZRfadaRPsfiTmX9HGajC2tXd6V8dQTMhX0h8rNdJx9Ra8F8SbRNLzhPRnJmTZIUTYueTyWxyr7uv3rjC3OkzE8495oS+4xq6D5WoI0bO5WVCOSerl8rIeBrOI/Hkaw6ME5W1zSuzx2la3CRdWi3zIG+FDBvUp9LMgI/vggUmE7KkT81yGvOOgEYa/aUahhRAF5xLec3OzbF1r2O17BbVxIi7hzJIC64IYhXdJA+nh/5xVbOmE9J0QqjSxWk0pp37M2YEtgjS8GpimACu7xkqxdKJ6fEXyYl2Lre0ZtC8yELVewtWUnbfCPIhrvgDFz8WI5yhJKgcnFMZWEFrwhgzo5uWDDDA1oGSOzcu0xfx7vTlsv6posIMpJ6cGWPiw/BxL4PU7vbrpjgf8bMdu5OYwOdhm83DARUSa0ELknYIeEAaILuWxlhGa0M8+EuJCrpJT+ymENhN60pXBxa3LZ5TsucnlGaCmIEQ4Evru91yuz0xMtKaeXluI5zdh9Mm8vAlBn4aR07X64EH3vEKdXQkZJXPP/JxMvNRpLxEtHZ5RQgmNewnpouvVTpYTHdfOnmy5kFUGnpRTfEhXD9DiBdFFJB0/YWS9aj6pmc89r0BaQmgTRkgI+EsdKsYasJZOBF+QqTH474NK7LbyBvf7W+RgOxNyxfQY2/2hrp2+NkroxrzrQ55fSZkpJIa28znCgF6rb7H1hOSslATyvNflAh9pvHcX3lVE/Ya8FjTJIexa2Rq77nfU96unTnD7aME3+TAm6BFKYrPnqCNIqV5sq0ZGCiEV+Db+qWMQqpFgb5KPx48R6omeDl2EuP9DTYt9iGA/f1KBS1w/La+H4ktsSmLItvZHXLUkrCeflVtJ9DVVg1H7+sxiGvVM975rZpfabuqHVhuP5F1vewav5O8GamUe91yDanoYw47FWzC929O+DJnKA2opFY1Rjru5CE7kOcO0jJtQVUIynzuZEMeb+1CEOFXN8iFSGeRpCm1BTlJxVg49Azm819SO7Bu0axEbwn27GuxMck+TMQHDP8fn48gfDVIL4R8xKVPJ73MQBUIfA/Z54LMw5vmlE+w+VFo2A78X/SsyPA/RMD0z3e2qVLtfo7aeBslpMX0N0TEnLcUlKym1jyBFqSohmYntI5enBhYB9CY/2kNarhwJhNiMtRGyWnkQdKaCFyQwgydjyNUw4VchKxXv2/DoKdC+lkQbCX1NlKCGvJiBJkSGbCus6jfo4yGBNySgr+u7e20BCsxdVAcFlJ/tHd32+cIsNxSXUULUUx+dg/d47g7OPYFw2MxkSuyMwLHVTI6PBN6dS8Sppw45zHJSgDXV3aQzmz40Z6fDgBfiAXU0uZxby2zejee+j3eltoQMzhV6qSBogXwrEXDj7ElWxUQ8RrnSaoU0dxIsKaiMvMykXTu90NqJsGHP4z78SdLigUrLKat32nFwy/E07pfDFRdQ/7N5r57pQ1482uvWhMGhQcviGkVrKDUp0ToCxfhQal5n4Hs/g1jOgH4LWdwFOd1b1WzHET4vLZppv+Czjxo840OrDlG8jAJzv2tp5mLK1dsU/lfIOeWy5NxFxfl2BoYImlQtx9QF6mJRQKBsQYYuO2yaLYPBUXvu/VqYPxtHhNy7Y4hCkNLGPtKSklzCVKSHtMQxcqm5Kw1DhI2PTGZtcGDAvoLQ/u7MifYtWFBlxz2H9zo8RkwKzC5UYiG+p44ccqE62YAxLeT/TOpf8MXx8Qk0IJFRY1Go+viQVJpE5Ehjf49xfAZeqGIy/7us3nqxwQfCkjZypPxobVr/6YpQHIalUvuCyEwbSXC9PC8QnkFcXlrgLpoLIhIfKuaqlQkYIAwQnr/f3eyu7KttOw2lNpv8/BPHyjzVNER3o72gvEBKqRMTflndbP8BMweRDyeciEj5bFayFXqTLzheivgYJC0jwzwHa0MDDEotm48ndze5BBBElAnxxcRYHAFh3FfZaA9UNRmC354kNwUx8eHkmVj5dcTE5ZMnuEyr1QqlhtaJLuOYZv4v3KNo0TKrGPUZ1NILPKuWcvVn5Trv10SMB6h0j/ARMnlOuafCBIfnSWEx/Raif3HDzofYMM31dOyY9LBaLK3TjoX2fEqT4+2qaUVWSTQvyM6wC8nNJyEetXIyuLKrx04P7MKNnbJZlKUtNAIHo7i2dA/YU3Vtdi5l6jCepXy8hOedSSSsI8/HQg5Q+gxTKXwkMHkbESo+hjG0lbRRzQ3Fc5LOzDuFhs3Ptumpie7ilRDhlEJOq/hjsZljCxjkt7fWuPS/EekpXMggJQIk0G+eN9Xu2VmHWIkJe0nJRN4ptBBit2yutG9ML7J1DHAxebiAMrZ4VZlduqGS8I2tJc2iborUxmIN79c+kTovFxivPvrcSaP3n7RSKYTUmKt4N3rMOcw4JOneD3sP956jNaMglIeTER5Xbdlt15Tm2W10NEsYrA/N5JLCHHsR9tSqwxq08G3bqm1ZTbOtagnbo6SLvH/VzBL7W7jPzqFea0LmMLFzUuLtdwumuO3i1Vtq7OK15Xgw3l1PDmIXak+6QBEkvB9YJIzBcc/L20JIYaSZ/qAzVm5Ut4oowk3QehC+N3xo/1wTqt7zsYawfX9no9XjqdPXVLhrwyo/wucJYQkE1e4j8rLcBuHUItQQKqgMXb6LGvxFQlXw33AdZLR0V5P9Fr29lP73scNnosoyvdWPv4fPJ+uJrLVtMakqaL1M1cTvv0OLIZE6wk2a2IcIRUQh+DaejpdcXepBa7bKDRGM9PIVxTl2EwarZ72rooVuY4RQtMypdk6e1lLLehhY2lt7QEd7WxlCDvdIli6E9B4+ZIodmZEMccUGqgiZOqru9tkR3iJ8nCcXRWRZCSPMLPEjlx2LjQL1OM5qKAm+vhSuRqSfV5Ttrg8FdWcrnhMqCTex7DEM6qTsVEuM1+8hovaHQ6e6a1Fz0xLd3nUt4ToWWuzWNkhcoAIIjUx2ZpxjLzWF9+SYmngR1lok4TEoJxGfuijhI/7OICoFmadl2llcL9b1oRVJtbD+JLlv1KrhHG5811t9ELbzgk14ICUwqE+TDzftqHPz98vUSy3jSIwP8dCpkNqLDPTx+rArz4T5qLG3G2PrvJKKPoLBWE501NC3ilUX5mVjVIb9nIbgWcpPMiSXjbcL8K62UkR86m1/yfkSeMaHFuK04X0CE3J6SWzFUxw0BSNHlSzi3RmIRJwHq5udO3c16quLp6sbnffbupxbt+12vzOrzuvNHc7ycRbIxuJHgYU7YSASdQgxp7qz2ynv6HJeqW91doa7nLruXof+17sqhhu31Xif9o7HalqczV29Dnrb/f5EXZvzdH27U98/6LR5i3N0UM5zjHU71/lwjRWWltU5CAIn7F1MqLp/r9hQ5RoaxG+qmrxP4yNKcfsFLwuiprffeb2l03m2scO5h3Or2rudzjGrhk8x4Cqu2xcexilBvNEcdi5Yu4tKF3Ue4tzPy+td5/1md4tzw5iJ27NuXEYobYUdlb8z6GTWkdxaCvk2zHjd5mpKQ459mv5TkAp6mQb9Aq9HHQ8S6mrZnuc6vUG6WHusIhCJGNXl9byvnJyaiE7+Eoz8c5TYNQiUveENGpJpcIJ+biS8R0+rlcazGNs7pKB+zPLTOSX2KNWhlDAf4r2Spj72JORB5OyHULX+dlD/FOky/HFy5ygYU0sey/i8moeqdunXK1qC3RuaMOYHlI/raQMl3M+EeTV5WxD3Km8a8PkM8nr648sQ9+esKbf5e/nxiKBfAOQkxbv3SU9LYmqPV9V/Pn+V20VwTyVjTqCI6edEQUOFUXs9WmfSll8DyX2dt7GlnwkswaM3l9XZ0oNK3MTXbxpOV2sGk69s6XCJw4cY8KbyRrt9TrHt7Bm0rRBQe1+fHUWNfaapU0KbqxzbORC1M/LS3dJwIl3KOrwykQG/E+61q+isgniztdOKqNOziDgZqZIzFwPvqGiyg5NCtoCqoG5NxHhPZTOsnORulKskjoKMDeLuXQ3OmnC3syxARFXdfc57LR3OrdtrvSOOs55rnqhtcdoGhpxHdjc5EfJUuHZTlftX+G15rXPlhkrnLe59F7Lz8VGHdg8c5y2OLeMZ126qduq9XC3v7nd+FchLvYPJd15gPCu8XQnh/qpm59WGVudZzvvQO97kXTcGxhnEuJvR39tWY8cwK4uhcikk4a3Gdstg9l5B2t0wfaTdWkEou5vCPOV5PH73vFL3+DfXltnh6OxjkJD6Wd5F3g88tMe6CW/7YmI99VIL4u0oqUK8ocW4d8hFrXMVoOQU8s3U97MnjvDD/XRYkyhHM1MT3GVZQR2Tdv70U8EbA5vlo+CaPAaaSWoZXm50otGodxQ6L6txGKxzw5ZYORrBsPPrykZKQIy1n8bTjwb2fO4Te3ue7x6KOKvaYns1wtIddd4nx3mwot55qyl2360cp81zurg+CGqwU8v4/Of5uAVvPgObrwvHomY8jOtZ4fXWLnefdHVXv9044+8ZklCx75DXwcV1Sb27y+vInUQEuVYSaMgRJYfAwtoj0raFxIUW1A8nz35f02qLc9Lc9lG7CBkwtUR7bf+A+5uL6ehnH9Lat+5sIEfj3Cbj3NKRvP7Rjlo7FSmqavKvpSP8MRZ7NVbQYLSkqlC9ZW4sPH18gBTcORjrhMWmQWzFmK2UsvO90qQ1oZcI8UhkCLZPtRqMy0NirobAvjIpb4/sW06qKGyPR2oGIdlazjOOTk+kLYzaaYGSp63Wz6HsXsQ51wd+LTAuZOy+8GBNq7tF+IOdDU4kENJthNID5YRafZtzZ3mDs9LbRgzixcZ2l1h83OKFbDmEd0/FiFp7DWHgp0AQGzq6nf8hPF+oa3EehOz0ziCWcm4NpBRMhX1hn571oR9wqVVSDVPtUi32sQ0vbu7scZdY9aOt2ZSEL9BEBIW+dv20AKDd9/ep09oimYqHpyImkKDuRllS4PrlHNuIqDmCJmNJQba7q1joEaUQJuR/WdXsLrJrq/L6cdJsPOyXscJ7GLKqo8cOpqhrO//yQG6oS3kZwS9xPkRB3wi7diFMtDN+PLk5m1ath+8f0Fy80dbjhvVXub+U5mEqeal27UP+dWpPlknNxW79Ak6/7Tg3UMOF52j1xA1qK7Trd6nXC+8P9ttYQcumIonLSnJtBdJNa77axw1C2x3qR4Wqnj73x9f6MbV+CCYFBZO6y51aSh3gzVrsmwzJnULEbCJC1oZ7vIZ/9Iqmfvn2u5oWO5n8fApxcuWUApum5diPgY9lrA9EtvUNOzYf8vqAcJPsU5iOh7XtXQgt2uZhjKU2amF7HQyfEYWcZk5yQ1RDKNrLcq02k/9IGmldrB93KiokPw8EB2SsoKWXO5FmxXhlckqi+3vEUvLqwok5PHVkIWAszlqzy1p54zuLpnPZ3q9bod08JlLSb5DrNxDm38Sbvsg5EBywsT7oH+3XNW3uasGirFSrxRNdCllKiPZHZzJYLZb5qEcpae3pxMCuu9oibS5/QCOiLcYUrp+MmtJeURjFdVlxzqiae6D4h40NQt54HyGv3JRo10aVfv8YhtC0pSlVKcPFuxIXahr08mzCO4VzMlLSsZuomZ+RaucU0rXsw/sfF5+osUFonWob/7TrLdaUgdpV93fl9X+VIC0Y6tek2uI8OD3J5gT2Vj9ZmP0f4IM4iY7RQ5gAAAAASUVORK5CYII=) no-repeat 50%;background-size:64px 64px;opacity:.84}.markdown-body h1:after{position:absolute;content:"";width:150%;left:-25%;height:50%;bottom:12px;border-radius:50%;background:linear-gradient(transparent 80%,rgba(77,208,225,.8));background-size:400% 200%;opacity:.6;animation:h1Animate 6s linear infinite}@keyframes h1Animate{0%{background-position:100% 100%}50%{background-position:100% 50%}to{background-position:100% 100%}}.markdown-body h2{display:block;border-bottom:4px solid #4dd0e1;position:relative;font-size:24px;padding:12px 32px;margin:30px 0}.markdown-body h2:before{width:24px;height:24px;left:0;top:0;margin:auto;background-size:24px 24px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADGklEQVRYR81X32vTYBQ999s6mFjQgQ+DrbHiVFZYU4cDcQ/6pGhTFVYFEXGi82H+Bz448UnEF1Fx9ccEEcXpZE3d5tP2ooKiTacTHaLNpigMHDgnU9tcSbrWrkwWR0sbyEOSe885ObnfvV8IRT6oyPwoLQHBx+OVM5WJvSyEVAhnBOjt7yU/+/rr6r6l8TMO+F/EN0JQhICqQpD/xaRpcpAc9tS+M+9lBCia/oqBamK+zeDuQogQZaKJk3wcQjxSva7tGQGB2Ke1zIk3DNyMyNL+QpCnMQOaPsDAVuGAp9cjvbYc8Ec/bCYSg0zoiHilk1tHxqsqEsYlML4kjIpT/eurJxRNPweQU5VdrWaOEo1fgKAVbBgXIz73kF3R/ph+ghgdzMYWM29eAWlBJqgZaFlFYtC6nhWpaDqnSGlIlV1WjJ3DloDNgyNLncudqgX//Ucg3LxuStHGuhi8pqKCW3rqV342rwFjRznKm+/LNaN2yC237ThgF2wxcfMLeP6+ncrKzoPoKTGeLQbYbg4TNoC5iZPJY5HGVRdSNZAWYBclD3FzBQzrR8hACAKdzBzKA/4/IYioDQaOskBbpEG6PO8qKKSAEi3CnEb0Pw4oMf0OmKbTDWqh3Lw6EIiNBZi5lxh3wz4puBD5ovqAMvxhHSdFKxE1CQe3m/07TeTX4lcJdAhE+1Sv65Z5P/ByvIGTRowIZ9igbtXnmrOsbTvgj+kHBNMuBu9OdVw8EeU4nC1A0cYmAHZOTRrLhra4Z8ywnSN6vZHAFTA2WnnMfQB3qz73ddsOZM8CACFDIPSgQXqebXEgqgeZcAeEe6pXasm1f8ew3igMtAHWac0Uc/jYdyAaP0xEBwFsmgUPqbJ0NE2UKj4EGcahiOzuyhagaHpnmtgcVgTcCMuua7YdyAHbA3ArQNscVFbb4635aD6fnYaTvxxi9UNP7ddMXaRWVBdAcaLk6bDXPZCNZ9uBXEsDUX1T2Cc9yjig6Z0EHg3LK8/aqf6MwJKchkXfks1+0+JtSq3qLPa23BRR1B+T/6nkfMaW1r9hPt/MLtYfTLEpP+T9FNoAAAAASUVORK5CYII=)}.markdown-body h2:after,.markdown-body h2:before{content:"";display:block;position:absolute;bottom:0}.markdown-body h2:after{right:0;width:400px;height:10px;border-top-right-radius:24px;background:linear-gradient(90deg,#fff,#4dd0e1);max-width:50vw}.markdown-body h3{margin:30px 0;font-size:18px;position:relative;padding:4px 32px;width:max-content}.markdown-body h3:before{border-bottom:2px solid #4dd0e1;width:100%;content:"";display:block;height:28px;position:absolute;left:0;top:0;bottom:-2px;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);background-repeat:no-repeat;animation:h3AnimationBefore 2s infinite alternate}@keyframes h3AnimationBefore{0%{width:28px}25%{width:100%}50%{width:100%}to{width:100%}}.markdown-body h3:after{content:"";display:block;width:28px;height:28px;position:absolute;border:2px solid #4dd0e1;border-radius:50%;right:-15px;top:0;bottom:0;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);animation:h3AnimationAfter 2s infinite alternate}@keyframes h3AnimationAfter{0%{transform:rotate(0)}10%{transform:rotate(0)}50%{transform:rotate(-1turn)}to{transform:rotate(-1turn)}}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin:22px 0;letter-spacing:2px;font-size:14px;word-spacing:2px}.markdown-body img{max-width:80%;border-radius:6px;display:block;margin:20px auto!important;object-fit:contain;box-shadow:0 0 16px hsla(0,0%,43.1%,.45)}.markdown-body figcaption{display:block;font-size:13px;color:#2b2b2b}.markdown-body figcaption:before{content:"";background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAGFBMVEVHcExAuPtAuPpAuPtAuPpAuPtAvPxAuPokzOX5AAAAB3RSTlMAkDLqNegkoiUM7wAAAGBJREFUKM9jYBhcgMkBTUDVBE1BeDGqEtXychNUBeXlKEqACsrLQxB8lnCQQClCiWt5OYoSiAIkJVAF5eVBqAqAShTAAs7l5ShKWMwRAmAlSArASpAVgJUkCqIAscESHwCVVjMBK9JnbQAAAABJRU5ErkJggg==);display:inline-block;width:18px;height:18px;background-size:18px;background-repeat:no-repeat;background-position:50%;margin-right:5px;margin-bottom:-5px}.markdown-body hr{border:none;border-top:1px solid #4dd0e1;margin-top:32px;margin-bottom:32px}.markdown-body del{color:#4dd0e1}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(77,208,225,.08);color:#26c6da;padding:.195em .4em}.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#4dd0e1;border-bottom:1px solid #4dd0e1;font-weight:400;text-decoration:none;margin:0 4px}.markdown-body a:active,.markdown-body a:hover{background-color:rgba(77,208,225,.1)}.markdown-body strong{color:#26c6da}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{font-style:normal;color:#4dd0e1;font-weight:700}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(77,208,225,.05)}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{margin:2em 0;padding:24px 32px;border-left:4px solid #26c6da;background:rgba(77,208,225,.15);position:relative}.markdown-body blockquote:before{content:"â";top:8px;left:8px;color:#4dd0e1;font-size:30px;line-height:1;font-weight:700;position:absolute;opacity:.7}.markdown-body blockquote:after{content:"â";font-size:30px;position:absolute;right:8px;bottom:0;color:#4dd0e1;opacity:.7}.markdown-body blockquote p{color:#595959;line-height:2}.markdown-body ol,.markdown-body ul{color:#595959;padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atom-one-dark">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#abb2bf;background:#282c34}.hljs-comment,.hljs-quote{color:#5c6370;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#c678dd}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e06c75}.hljs-literal{color:#56b6c2}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#98c379}.hljs-built_in,.hljs-class .hljs-title{color:#e6c07b}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#d19a66}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#61aeee}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><h3 data-id="heading-0">å‰è¨€</h3>
<p>AudioDockï¼ˆå£°ä»“ï¼‰å‘å¸ƒä¹‹åï¼Œå¥½å¤šæ„Ÿå…´è¶£çš„å°ä¼™ä¼´ç»™äº†æˆ‘åé¦ˆï¼Œæ„Ÿè°¢æ”¯æŒï¼</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fmmdctjj%2FAudioDock" target="_blank" title="https://github.com/mmdctjj/AudioDock" ref="nofollow noopener noreferrer">github.com/mmdctjj/Audâ€¦</a></p>
<p>ä»Šå¤©å…ˆæ¥ä»‹ç»ä¸‹ç»¿è”äº‘ NAS çš„å®‰è£…æŒ‡å—ã€‚æˆ‘çš„NASå‹å·æ˜¯ï¼šDH2600ï¼Œæ–°ç³»ç»Ÿã€‚</p>
<h4 data-id="heading-1">å¾€æœŸç²¾å½©æ¨è</h4>
<ul>
<li><a href="https://juejin.cn/post/7586518130761007144" target="_blank" title="https://juejin.cn/post/7586518130761007144">pnpm + monorepo æ‰æ˜¯ AI ååŒå¼€å‘çš„æœ€ä½³æ–¹æ¡ˆï¼ğŸš€ğŸš€ğŸš€</a></li>
<li><a href="https://juejin.cn/post/7587965908288749578" target="_blank" title="https://juejin.cn/post/7587965908288749578"># AudioDockï¼šæœåŠ¡å™¨å’Œ NAS éŸ³é¢‘æ’­æ”¾æœ€æ£’çš„è½¯ä»¶ï¼ğŸš€ğŸš€ğŸš€</a></li>
<li>æ›´å¤šç²¾å½©å†…å®¹æ¬¢è¿å…³æ³¨æˆ‘çš„å…¬ä¼—å·ï¼šèŒèŒå“’è‰å¤´å°†å†›</li>
</ul>
<h3 data-id="heading-2">æ­£æ–‡</h3>
<h4 data-id="heading-3">å‡†å¤‡å·¥ä½œ</h4>
<p>é¦–å…ˆç¡®ä¿è‡ªå·±çš„ NAS å¯ä»¥ä¸‹è½½ Docker é•œåƒã€‚æ— æ³•ä¸‹è½½å¯ä»¥åœ¨åå°ç§ä¿¡æˆ‘ã€‚</p>
<p>ç„¶ååœ¨ å…±äº«æ–‡ä»¶å¤¹/docker ç›®å½•ä¸‹æ–°å¢ä¸€ä¸ªæ–‡ä»¶ç›®å½•ï¼šaudiodockã€‚</p>
<p>æˆ‘æ–°å»ºè¿‡äº†ï¼Œæ‰€ä»¥æ–°å»ºäº† audiodock2 é¡¹ç›®ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/46f59411b837408a97461455ce103ac0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6JCM6JCM5ZOS6I2J5aS05bCG5Yab:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767621278&amp;x-signature=809%2Fb46PBRVxF8%2FP2xLbhixsPqg%3D" alt="æ–°å»ºç›®å½•" loading="lazy"/></p>
<p>æ‰“å¼€è¿™ä¸ªæ–‡ä»¶ç›®å½•ï¼Œæ–°å»ºä¸‰ä¸ªæ–‡ä»¶å¤¹ï¼šmusicã€audioã€covers</p>
<blockquote>
<p>music æ˜¯æ˜ å°„éŸ³ä¹çš„ç›®å½•ã€audio æ˜¯æ˜ å°„å£°ä¹¦çš„ç›®å½•ï¼Œcovers å­˜æ”¾è§£æåå°é¢çš„ç›®å½•ã€‚</p>
</blockquote>
<p>ä» GitHub ä¸‹è½½çš„ nginx.conf æ–‡ä»¶æ‹–åŠ¨åˆ°å½“å‰ç›®å½•ä¸‹ã€‚ä¸‹è½½åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fmmdctjj%2FAudioDock" target="_blank" title="https://github.com/mmdctjj/AudioDock" ref="nofollow noopener noreferrer">github.com/mmdctjj/Audâ€¦</a></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/26b80af1de674d3cbae4c083d3d02b39~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6JCM6JCM5ZOS6I2J5aS05bCG5Yab:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767621278&amp;x-signature=cKLKm92ApariXP4RAn4YI01evuA%3D" alt="" loading="lazy"/></p>
<p>ç„¶åæ‰“å¼€ Docker åº”ç”¨çš„é¡¹ç›®æ ç›®ï¼Œæ–°å»ºä¸€ä¸ªé¡¹ç›®ï¼šaudiodock</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e19e3a1653204e05806f07f970455bc1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6JCM6JCM5ZOS6I2J5aS05bCG5Yab:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767621278&amp;x-signature=k3O%2FcqXVhjqQkoYvF4i4qpEn600%3D" alt="æ–°å»ºé¡¹ç›®" loading="lazy"/></p>
<p>è¿™æ—¶å€™ç³»ç»Ÿä¼šè‡ªåŠ¨è¯†åˆ«æ–°å»ºçš„ audiodock ç›®å½•ã€‚</p>
<p>å°†ä¸‹é¢çš„å†…å®¹å¤åˆ¶åˆ° compose é…ç½®ä¸­ã€‚</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">version:</span> <span class="hljs-string">"3.8"</span>

<span class="hljs-attr">services:</span>
  <span class="hljs-comment"># 1. API åç«¯æœåŠ¡ (Node.js)</span>
  <span class="hljs-attr">api:</span>
    <span class="hljs-attr">platform:</span> <span class="hljs-string">linux/amd64</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">mmdctjj/audiodock-api</span>
    <span class="hljs-attr">container_name:</span> <span class="hljs-string">audiodock-api</span>

    <span class="hljs-comment"># å®¹å™¨å†…éƒ¨ç«¯å£ (3000) é»˜è®¤å¯¹å†…éƒ¨ç½‘ç»œå¼€æ”¾ï¼Œæ— éœ€ ports å­—æ®µæ˜ å°„åˆ°å®¿ä¸»æœº</span>
    <span class="hljs-comment"># å¦‚æœè¦ç›´æ¥æµ‹è¯• APIï¼Œå¯ä»¥åŠ ä¸Š ports: - "3000:3000"</span>
    <span class="hljs-attr">ports:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"8858:3000"</span>

    <span class="hljs-attr">environment:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">AUDIO_BOOK_DIR=/audio</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">MUSIC_BASE_DIR=/music</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">CACHE_DIR=/covers</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">DATABASE_URL=file:/data/dev.db</span>

    <span class="hljs-comment"># æŒ‚è½½æ•°æ®æ–‡ä»¶å’Œç¼“å­˜ï¼Œä½¿ç”¨ Docker å‘½åå·æ›´å®‰å…¨</span>
    <span class="hljs-attr">volumes:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">/volume1/è¿…é›·ä¸‹è½½/æœ‰å£°ä¹¦:/audio</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">/volume1/è¿…é›·ä¸‹è½½/éŸ³ä¹:/music</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">./covers:/covers</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">api-db:/data</span>

    <span class="hljs-attr">restart:</span> <span class="hljs-string">unless-stopped</span>
    <span class="hljs-attr">networks:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">audiodock-network</span>

  <span class="hljs-comment"># 2. Web å‰ç«¯æœåŠ¡ (Nginx) - ç”¨äºæ‰˜ç®¡é™æ€æ–‡ä»¶å’Œåå‘ä»£ç†</span>
  <span class="hljs-attr">web:</span>
    <span class="hljs-attr">platform:</span> <span class="hljs-string">linux/amd64</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">mmdctjj/audiodock-web</span>
    <span class="hljs-attr">container_name:</span> <span class="hljs-string">audiodock-web</span>
    <span class="hljs-attr">ports:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"9959:9958"</span> <span class="hljs-comment"># &lt;--- å°† Web æœåŠ¡çš„ 80 ç«¯å£æ˜ å°„åˆ°å®¿ä¸»æœºçš„ 8080 ç«¯å£</span>
    <span class="hljs-attr">volumes:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">./nginx.conf:/etc/nginx/nginx.conf:ro</span>
    <span class="hljs-attr">depends_on:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">api</span> <span class="hljs-comment"># ç¡®ä¿ API å®¹å™¨å…ˆå¯åŠ¨</span>
    <span class="hljs-attr">networks:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">audiodock-network</span>

<span class="hljs-attr">volumes:</span>
  <span class="hljs-attr">api-cache:</span> <span class="hljs-comment"># å‘½åå·ç”¨äºç¼“å­˜</span>
  <span class="hljs-attr">api-db:</span> <span class="hljs-comment"># å‘½åå·ç”¨äº SQLite æˆ–å…¶ä»–æ•°æ®æ–‡ä»¶</span>

<span class="hljs-attr">networks:</span>
  <span class="hljs-attr">audiodock-network:</span>
</code></pre>
<p>é‡ç‚¹æ›¿æ¢æ›¿æ¢ä¸‹æ˜ å°„è·¯å¾„ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"> <span class="hljs-comment"># æŒ‚è½½æ•°æ®æ–‡ä»¶å’Œç¼“å­˜ï¼Œä½¿ç”¨ Docker å‘½åå·æ›´å®‰å…¨</span>
    <span class="hljs-attr">volumes:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">/volume1/è¿…é›·ä¸‹è½½/æœ‰å£°ä¹¦:/audio</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">/volume1/è¿…é›·ä¸‹è½½/éŸ³ä¹:/music</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">./covers:/covers</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">api-db:/data</span>
</code></pre>
<p>æ˜ å°„è·¯å¾„çš„æŸ¥çœ‹æ˜¯é€‰ä¸­æ–‡ä»¶å¤¹å³é”®å±æ€§ï¼Œå¯ä»¥çœ‹åˆ°å…·ä½“çš„åœ°å€ï¼Œå¤åˆ¶å³å¯ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d750ad3040584829951c1527d5151115~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6JCM6JCM5ZOS6I2J5aS05bCG5Yab:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767621278&amp;x-signature=2JayM7dxIzx8sVty5NFmiZMUUTY%3D" alt="æŸ¥çœ‹æ–‡ä»¶åœ°å€" loading="lazy"/></p>
<p>æœ€åä¿è¯æœåŠ¡ç«¯å£æ˜ å°„æ²¡æœ‰é‡å¤ï¼Œç‚¹å‡»é‡æ–°éƒ¨ç½²å³å¯å¯åŠ¨æœåŠ¡ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f68366bb33af418aa9307e4e0a2dc3c8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6JCM6JCM5ZOS6I2J5aS05bCG5Yab:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767621278&amp;x-signature=jKL%2FFMLiYj8aWVClcsLxIdNB0y0%3D" alt="å¯åŠ¨éƒ¨ç½²" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/82a0d22da5e74898ace234947296b868~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6JCM6JCM5ZOS6I2J5aS05bCG5Yab:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767621278&amp;x-signature=eKJLcE5SkTVJmaxbr9%2B8d99fjBU%3D" alt="éƒ¨ç½²æˆåŠŸ" loading="lazy"/></p>
<p>æ¥ä¸‹æ¥ç¨ç­‰ä¸€ä¼šï¼Œç­‰æ•°æ®å…¥åº“å®Œæˆï¼Œåç«¯æœåŠ¡å ç”¨èµ„æºå‡å°‘</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a3573e1795e84c2fa3e06247d6bc9918~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6JCM6JCM5ZOS6I2J5aS05bCG5Yab:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767621278&amp;x-signature=89baMSfvlHUfan%2BElQ%2B7SxZPiqc%3D" alt="å…¥åº“å®Œæˆ" loading="lazy"/></p>
<p>æ‰“å¼€é¡µé¢åœ°å€ï¼Œä¼šçœ‹åˆ°é¡µé¢æ˜¯è¿™æ ·çš„</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7c839a25b9c54a2fa3d844aa68e9f63a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6JCM6JCM5ZOS6I2J5aS05bCG5Yab:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767621278&amp;x-signature=dQuYVN7On%2F4ER9maNW6zyoson7M%3D" alt="é¡µé¢" loading="lazy"/></p>
<p>è¾“å…¥åç«¯æœåŠ¡å™¨åœ°å€ï¼Œé¼ æ ‡ç‚¹å‡»é¡µé¢ç©ºç™½åŒºåŸŸï¼Œæˆ–è€…æŒ‰ tab é”®ï¼Œä¼šè§¦å‘åç«¯æœåŠ¡çŠ¶æ€æ£€æŸ¥ï¼Œç»¿ä»£è¡¨é“¾æ¥æˆåŠŸï¼Œçº¢è‰²ä»£è¡¨é“¾æ¥é”™è¯¯ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4e3001ea000b4499b0350d9c26c3aec6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6JCM6JCM5ZOS6I2J5aS05bCG5Yab:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767621278&amp;x-signature=feuuuCCIjZEVEfJb4SIEdyZyq48%3D" alt="åç«¯æœåŠ¡é“¾æ¥æˆåŠŸ" loading="lazy"/></p>
<p>è¾“å…¥ç”¨æˆ·åã€å¯†ç ç™»é™†ï¼Œæˆ–è€…ç‚¹æ³¨å†Œä¹‹åè¾“å…¥ç¡®è®¤å¯†ç ç™»é™†å¹¶æ³¨å†Œï¼</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0ccc4fb5366e477faf9d5cad04aab415~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6JCM6JCM5ZOS6I2J5aS05bCG5Yab:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767621278&amp;x-signature=GcX%2B0aw8Ik7%2FaMtd9u5QULJ71wE%3D" alt="æ³¨å†Œå¹¶ç™»é™†" loading="lazy"/></p>
<p>é¡µé¢ä¼šåˆ·æ–°é¦–é¡µï¼Œçœ‹åˆ°æ˜¯è¿™æ ·çš„é¦–é¡µè¯´æ˜å®Œå…¨æˆåŠŸäº†ï¼ˆé©¬èµ›å…‹æ˜¯é˜²æ­¢ç‰ˆæƒé—®é¢˜å¹³å°ä¸è¿‡å®¡ï¼‰ï¼</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/94fdeb0dc659489f9fa56c6afde0f332~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6JCM6JCM5ZOS6I2J5aS05bCG5Yab:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767621278&amp;x-signature=WTEVe8%2BmWxmr348ImTWoJf6D8Ec%3D" alt="ç™»é™†æˆåŠŸ" loading="lazy"/></p>
<p>ä»¥ä¸Šå°±æ˜¯éƒ¨ç½²æœåŠ¡ç«¯ã€webç«¯çš„æ•™ç¨‹ï¼æ¡Œé¢ç«¯çš„éƒ¨ç½²è¯·çœ‹ä¸Šç¯‡æ–‡ç« ã€‚ç§»åŠ¨ç«¯é¢„è®¡æœ¬å‘¨æœ«å‘ç‰ˆï¼Œæ•¬è¯·æœŸå¾…ï¼</p>
<h3 data-id="heading-4">æœ€å</h3>
<p>æœ¬ç¯‡æ–‡ç« ä¸»è¦ä»‹ç»äº†ç»¿è”äº‘ nas å¦‚ä½•å®‰è£… AudioDock ï¼</p>
<p>ä¸ºäº†æ–¹ä¾¿å¤§å®¶äº¤æµï¼Œæˆ‘å»ºäº†ä¸€ä¸ªæ²Ÿé€šç¾¤ï¼Œæ¬¢è¿å¤§å®¶å…¥ç¾¤äº¤æµã€‚</p>
<p>å¦‚æœæ— æ³•ä¸‹è½½é•œåƒæˆ–è€… nginx.conf ç­‰æ–‡ä»¶ï¼Œå¯ä»¥åœ¨åå°å›å¤ audiodockï¼Œæˆ‘çœ‹åˆ°ä¼šå‘æœ€æ–°ç‰ˆçš„ä¸‹è½½é“¾æ¥ã€‚</p>
<p>æ¬¢è¿ Starï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fmmdctjj%2FAudioDock" target="_blank" title="https://github.com/mmdctjj/AudioDock" ref="nofollow noopener noreferrer">github.com/mmdctjj/Audâ€¦</a></p>
<h4 data-id="heading-5">å¾€æœŸç²¾å½©æ¨è</h4>
<ul>
<li><a href="https://juejin.cn/post/7586518130761007144" target="_blank" title="https://juejin.cn/post/7586518130761007144">pnpm + monorepo æ‰æ˜¯ AI ååŒå¼€å‘çš„æœ€ä½³æ–¹æ¡ˆï¼ğŸš€ğŸš€ğŸš€</a></li>
<li><a href="https://juejin.cn/post/7587965908288749578" target="_blank" title="https://juejin.cn/post/7587965908288749578"># AudioDockï¼šæœåŠ¡å™¨å’Œ NAS éŸ³é¢‘æ’­æ”¾æœ€æ£’çš„è½¯ä»¶ï¼ğŸš€ğŸš€ğŸš€</a></li>
<li>æ›´å¤šç²¾å½©å†…å®¹æ¬¢è¿å…³æ³¨æˆ‘çš„å…¬ä¼—å·ï¼šèŒèŒå“’è‰å¤´å°†å†›</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è½¯è€ƒæ¶æ„å¸ˆï¼šè€ƒè¯•å¿ƒå¾—åˆ†äº«]]></title>    <link>https://juejin.cn/post/7589126920286208010</link>    <guid>https://juejin.cn/post/7589126920286208010</guid>    <pubDate>2025-12-29T12:26:51.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589126920286208010" data-draft-id="7589092567544692745" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è½¯è€ƒæ¶æ„å¸ˆï¼šè€ƒè¯•å¿ƒå¾—åˆ†äº«"/> <meta itemprop="keywords" content="æ¶æ„,ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2025-12-29T12:26:51.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ€’æ”¾å§å¾·å¾·"/> <meta itemprop="url" content="https://juejin.cn/user/2502950820787672"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è½¯è€ƒæ¶æ„å¸ˆï¼šè€ƒè¯•å¿ƒå¾—åˆ†äº«
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2502950820787672/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ€’æ”¾å§å¾·å¾·
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T12:26:51.000Z" title="Mon Dec 29 2025 12:26:51 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»15åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#383838;font-size:15px;line-height:30px;letter-spacing:2px;word-break:break-word;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;scroll-behavior:smooth;background-image:linear-gradient(0deg,transparent 24%,rgba(201,195,195,.329) 25%,hsla(0,8%,80.4%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent),linear-gradient(90deg,transparent 24%,rgba(204,196,196,.226) 25%,hsla(0,4%,66.1%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent);background-color:#fff;background-size:50px 50px;padding-bottom:60px}.markdown-body ::selection{color:#fff;background-color:#a862ea}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin:24px 0 12px;color:#a862ea}.markdown-body h1{line-height:2;font-size:1.4em}.markdown-body h1~p:first-of-type:first-letter{color:#a862ea;float:left;font-size:2em;margin-right:.4em;font-weight:bolder}.markdown-body h2{font-size:1.2em}.markdown-body h3{font-size:1.1em}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;padding-left:.2em}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#a862ea}.markdown-body ol li.task-list-item,.markdown-body ul li.task-list-item{list-style:none}.markdown-body ol li.task-list-item ol,.markdown-body ol li.task-list-item ul,.markdown-body ul li.task-list-item ol,.markdown-body ul li.task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:10px}.markdown-body a,.markdown-body code,.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6,.markdown-body li,.markdown-body p{opacity:.85;vertical-align:baseline;transition:all .1s ease}.markdown-body a:hover,.markdown-body code:hover,.markdown-body h1:hover,.markdown-body h2:hover,.markdown-body h3:hover,.markdown-body h4:hover,.markdown-body h5:hover,.markdown-body h6:hover,.markdown-body li:hover,.markdown-body p:hover{opacity:1}.markdown-body a{display:inline-block;color:#a862ea;cursor:pointer;text-decoration:none;position:relative}.markdown-body a:after{content:"";position:absolute;width:98%;height:1px;bottom:0;left:0;transform:scaleX(0);background-color:#a862ea;transform-origin:bottom right;transition:transform .3s ease-in-out}.markdown-body a:hover:after{transform:scaleX(1);transform-origin:bottom left}.markdown-body a:active,.markdown-body a:link{color:#a862ea}.markdown-body img{max-width:100%;user-select:none;margin:1em 0;transition:transform .2s ease 0s;background-color:#f8f5ff;box-shadow:0 0 10px #e7daff}.markdown-body img:hover{opacity:1;box-shadow:0 0 20px #e7daff;transform:translateY(-1px)}.markdown-body blockquote{padding:.5em 1em;margin:12px 0;border-top-left-radius:2px;border-bottom-left-radius:2px;border-left:3px solid #a862ea;background-color:#f8f5ff}.markdown-body blockquote&gt;p{margin:0}.markdown-body .math{font-style:italic;margin:12px 0;padding:.5em 1em;background-color:#f8f5ff}.markdown-body .math&gt;p{margin:0}.markdown-body code{padding:2px .4em;overflow-x:auto;color:#a862ea;font-weight:700;word-break:break-word;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;background-color:#f8f5ff}.markdown-body pre{margin:2em 0}.markdown-body pre&gt;code{display:block;padding:1.5em;word-break:normal;font-size:.9em;font-style:normal;font-weight:400;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;line-height:18px;color:#383838;border-radius:2px;scroll-behavior:smooth;box-shadow:0 0 10px #e7daff}.markdown-body pre&gt;code:hover{box-shadow:0 0 20px #e7daff}.markdown-body pre&gt;code::-webkit-scrollbar{height:6px;background-color:#f8f5ff}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:#e7daff;border-bottom-left-radius:3px;border-bottom-right-radius:3px}.markdown-body hr{margin:2em 0;border-top:1px solid #a862ea}.markdown-body table{width:100%;font-size:12px;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{color:#a862ea;background:#f8f5ff}.markdown-body td,.markdown-body th{padding:.5em;border:1px solid #e7daff}.markdown-body tr{background-color:#f8f5ff}@media (max-width:720px){.markdown-body{font-size:12px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">è½¯è€ƒæ¶æ„å¸ˆï¼šè€ƒè¯•å¿ƒå¾—åˆ†äº«</h2>
<blockquote>
<p>ğŸ˜„ç”Ÿå‘½ä¸æ¯ï¼Œå†™ä½œä¸æ­¢</p>
<p>ğŸ”¥ ç»§ç»­è¸ä¸Šå­¦ä¹ ä¹‹è·¯ï¼Œå­¦ä¹‹åˆ†äº«ç¬”è®°</p>
<p>ğŸ‘Š æ€»æœ‰ä¸€å¤©æˆ‘ä¹Ÿèƒ½åƒå„ä½å¤§ä½¬ä¸€æ ·</p>
<p>ğŸ† <a href="https://juejin.cn/user/2502950820787672" target="_blank" title="https://juejin.cn/user/2502950820787672">åšå®¢é¦–é¡µ</a> Â Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.cnblogs.com%2Flyd-code%2F" target="_blank" title="https://www.cnblogs.com/lyd-code/" ref="nofollow noopener noreferrer">@æ€’æ”¾å§å¾·å¾·</a>Â Â <a href="https://link.juejin.cn?target=https%3A%2F%2Flydandtry.github.io%2F" target="_blank" title="https://lydandtry.github.io/" ref="nofollow noopener noreferrer">Toè®°å½•é¢†åœ°</a> <a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2Fqq_43843951%3Ftype%3Dblog" target="_blank" title="https://blog.csdn.net/qq_43843951?type=blog" ref="nofollow noopener noreferrer">@ä¸€ä¸ªæœ‰æ¢¦æœ‰æˆçš„äºº</a></p>
<p>ğŸŒåˆ†äº«å­¦ä¹ å¿ƒå¾—ï¼Œæ¬¢è¿æŒ‡æ­£ï¼Œå¤§å®¶ä¸€èµ·å­¦ä¹ æˆé•¿ï¼</p>
<p>ğŸ†AI : Grok</p>
</blockquote>
<p><em>è½¬å‘è¯·æºå¸¦ä½œè€…ä¿¡æ¯</em>Â  <strong>@æ€’æ”¾å§å¾·å¾·(æ˜é‡‘) @ä¸€ä¸ªæœ‰æ¢¦æœ‰æˆçš„äºº(CSDN)</strong></p>
<h3 data-id="heading-1">å‰è¨€</h3>
<p>2025 å¹´ä¸‹åŠå¹´ï¼Œæˆ‘é€šè¿‡äºŒåå¤šä¸ªå¤œæ™šï¼Œåœ¨ä¸‹ç­ä¹‹åå‡†å¤‡å¤ä¹ è€ƒè¯•ï¼Œæœ€åé€šè¿‡äº†è€ƒè¯•ï¼›è¯´å®è¯æœ‰äº›çŸ¥è¯†ç‚¹æ˜¯å•ƒè€æœ¬ï¼ˆå¤§å­¦çš„æ—¶å€™è€ƒè¿‡ä¸­çº§çš„è½¯ä»¶è®¾è®¡å¸ˆï¼‰ï¼Œæ‰“ç®—å†™ä¸€ä¸‹è‡ªå·±çš„è€ƒè¯•å¿ƒå¾—ï¼Œåˆ†äº«ç»™æ­£åœ¨å‡†å¤‡ä»¥åŠå³å°†å¤‡è€ƒçš„åŒå¿—ä»¬ã€‚</p>

<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5744c5ebd99d4832858de290bd80a4a7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oCS5pS-5ZCn5b635b63:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767616126&amp;x-signature=NI%2FrQwBlNemwZWPHpDC20UiCUR4%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-2">ç§‘ç›®é€‰æ‹©</h3>
<p>å¾ˆå¤šä¼šç–‘æƒ‘è‡ªå·±æƒ³è¦é€‰æ‹©ä»€ä¹ˆè€ƒè¯•ç§‘ç›®ï¼Ÿç„¶è€Œè¿™éœ€è¦æ ¹æ®è‡ªèº«æ¥é€‰æ‹©ï¼Œå› ä¸ºæˆ‘æ˜¯ä¸€åæŠ€æœ¯çˆ±å¥½è€…ï¼Œæ‰€ä»¥è‡ªèº«ä¼šé€‰æ‹©ç³»ç»Ÿæ¶æ„è®¾è®¡å¸ˆï¼Œé‚£ä¹ˆå¦‚æœä½ æ˜¯ä¸ºäº†è¦æœ‰ä¸€æœ¬é«˜çº§è¯ä¹¦æˆ–è€…è¯´æ˜¯ä¸ºäº† E ç±»äººæ‰ï¼Œé‚£ä¹ˆå¯ä»¥é€‰æ‹©ä¿¡æ¯ç³»ç»Ÿé¡¹ç›®ç®¡ç†å¸ˆã€‚</p>
<h3 data-id="heading-3">å¤‡è€ƒç»éªŒ</h3>
<p>å¾ˆå¤šäººéƒ½ä¼šåœ¨ç½‘ä¸ŠæŸ¥æ‰¾ï¼Œè¦å¦‚ä½•å¤‡è€ƒï¼Œéœ€è¦å“ªäº›èµ„æ–™ï¼Œä¸çŸ¥ä¸è§‰ä½ ä¼šçœ‹åˆ°å¥½å¤šäººçš„å»ºè®®ï¼Œæ”¶é›†äº†è®¸å¤šèµ„æ–™ç½‘ç›˜ã€‚ç„¶è€Œéœ€è¦è‡ªå·±æ€è€ƒä¸€ä¸‹ï¼Œæ”¶é›†è¿™ä¹ˆå¤šèµ„æ–™ï¼ŒçœŸçš„çœ‹çš„å®Œå˜›ï¼Ÿçº ç»“è¿™ä¹ˆå¤šçœŸçš„å¥½å—ï¼Ÿåˆ«äººçš„å¤‡è€ƒæ–¹å¼çœŸçš„é€‚åˆæˆ‘å—ï¼Ÿæ˜¾ç„¶ï¼Œæˆ‘ä¹Ÿæ˜¯é‡åˆ°è¿™æ ·çš„å›°å¢ƒï¼Œåªæ˜¯å› ä¸ºæ¯•ä¸šå¤ªä¹…äº†ï¼Œæ²¡æœ‰é‚£ç§å­¦ä¹ æ°›å›´ï¼Œæ²¡æœ‰èŠ‚å¥ä¼šæå¾—ä¸€å›¢ç³Ÿã€‚</p>
<p>åœ¨åˆæœŸå¤‡è€ƒçš„æ—¶å€™ï¼Œæˆ‘ä¹Ÿæ˜¯æ”¶é›†äº†è®¸å¤šèµ„æ–™ï¼Œçœ‹äº†è®¸å¤šäººçš„å¤‡è€ƒæ–¹æ¡ˆï¼Œä½†åˆ°æœ€åæˆ‘å´æ²¡æœ‰æŒ‰ç…§é‚£äº›æ–¹å¼å»å¤ä¹ ã€‚ä¸ºä»€ä¹ˆå‘¢ï¼Ÿå› ä¸ºå½“æ—¶æˆ‘è‡ªå·±æ€è€ƒï¼Œå­¦ä¹ ä¸åªæ˜¯æ‰¾åˆ°é‚£ç§æ‰€è°“çš„ç†Ÿæ‚‰æ„Ÿï¼Œæ˜¯æ›´åº”è¯¥é¡ºåº”å½“å‰ã€‚åƒä»¥å‰å¤§å­¦æ—¶æœŸï¼Œæˆ‘å¯ä»¥ä¸€å¤©èŠ±å¾ˆå¤šæ—¶é—´å»ä¸“ç ”æ¯ä¸ªçŸ¥è¯†ç‚¹ï¼Œä½†æ˜¯ç°åœ¨æ˜¯å·¥ä½œæ—¶æœŸï¼Œæ—¶é—´å¹¶ä¸å……è¶³ã€‚äºæ˜¯æˆ‘ç»™è‡ªå·±æƒ³äº†ä¸€ä¸ªå¤§è‡´çš„æ–¹æ³•æµç¨‹ã€‚</p>

<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b4a4765a5ca64d3dab8f286c1b628e7d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oCS5pS-5ZCn5b635b63:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767616126&amp;x-signature=WmalQFNTMZr2Wubus6PoZ04%2Fseo%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-4">æ‰¾èµ„æ–™</h4>
<p>æ‰¾èµ„æ–™ä¸è¦ç›²ç›®æŸ¥æ‰¾ï¼Œå»å’¸é±¼ä¸Šæ‰¾ä¸€ä¸‹ï¼Œæˆ–è€…æŠ¥ä¸ªç­ï¼ŒæŠ¥ç­æ˜¯æœ€æ–¹ä¾¿çš„ã€‚æ‰¾ä¸€å¥—å®Œæ•´çš„èµ„æ–™ï¼ŒæŒ‰ç€é¡ºåºå¿«é€Ÿå­¦ä¹ ï¼ˆå¹³æ—¶å¯ä»¥çœ‹çœ‹è¯¾ä»¶ï¼‰ã€‚</p>

<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8f76d886dde745b29d57b73d30cd13ba~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oCS5pS-5ZCn5b635b63:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767616126&amp;x-signature=cxBlQ26YXszFYTffCmZTBLTgZgE%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-5">æ•´ä½“å­¦ä¹ </h4>
<p>å¯ä»¥ä¸éœ€è¦ä¹°æ•™æï¼Œæœ‰æ•™æçš„è¯ä¹Ÿä¸è¦å…¨çœ‹ï¼Œæ•™æå¯ä»¥ä½œä¸ºå­—å…¸ç”¨æ¥æŸ¥è¯¢ã€‚ä¸»è¦è¿˜æ˜¯è·Ÿç€èµ„æ–™çš„é¡ºåºè¿›è¡Œå­¦ä¹ ï¼Œä¸€èˆ¬æ˜¯å…ˆå­¦é€‰æ‹©é¢˜å†…å®¹å†å»å­¦æ¡ˆä¾‹é¢˜éƒ¨åˆ†ï¼Œå‰æœŸè¿™äº›åŸºç¡€éœ€è¦ get åˆ°ã€‚æ¶æ„å¸ˆçš„è€ƒé¢˜ä¸»è¦æ˜¯ç†è§£ä¸ºä¸»ï¼Œéƒ¨åˆ†éœ€è¦è®°å¿†ï¼Œè€ƒè¯•çš„æ—¶å€™ä¼šæœ‰ä¸€äº›æ˜¯è¶…çº²çš„ï¼Œä½†æ˜¯åªè¦æŠŠè¿™äº›åŸºç¡€çš„æ‹¿ä¸‹äº†ï¼ŒåŸºæœ¬æ˜¯ç¨³è¿‡çš„ã€‚æ¡ˆä¾‹é¢˜çš„è¯ï¼Œè€ƒè¯•æ–¹å¼è¿‘å‡ å¹´éƒ½æ˜¯è¶‹äºç¨³å®šï¼Œç¬¬ä¸€é¢˜æ˜¯æ¶æ„é£æ ¼ã€è´¨é‡å±æ€§ï¼Œå…¶ä»–é€‰ä½œé¢˜åŸºæœ¬å°±æ˜¯æ•°æ®åº“ã€åµŒå…¥å¼ã€web é¢˜ã€‚è¿™äº›å¦‚æœä¸æ˜¯åµŒå…¥å¼å·¥ä½œçš„ï¼Œå¯ä»¥è€ƒè™‘ç›´æ¥è·³è¿‡ï¼Œå¤ä¹ éƒ½å¯ä»¥ä¸å¤ä¹ ï¼ˆé€‰æ‹©è¿˜æ˜¯éœ€è¦å¤ä¹ çš„ï¼Œä¹¦ä¸Šéƒ¨åˆ†è¦è®°ä¸€ä¸‹ï¼Œä¸»è¦æ˜¯ä¸ºäº†é€‰æ‹©é¢˜ï¼‰ã€‚é‡åˆ°ä¸ä¼šçš„çŸ¥è¯†ç‚¹å°±ç™¾åº¦ã€æˆ–è€…é—® AIã€‚å»ºè®®å­¦ä¹ ä¸ç”¨å…¨éƒ¨å­¦ä¹ ï¼Œåƒæˆ‘æ˜¯ä¸ª Java å¼€å‘ï¼Œæˆ‘å°±æŠŠåµŒå…¥å¼ç»™ä¸¢å¼ƒäº†ã€‚ğŸ˜</p>
<p>ä¾‹å¦‚ï¼Œæˆ‘æ˜¯é€šè¿‡ grok æ¥å­¦ä¹ çš„</p>

<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/49cbc45aafeb43aebb5b06174dc51f8d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oCS5pS-5ZCn5b635b63:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767616126&amp;x-signature=HMhOxhuC6qO9dPOfWdTHTis9yNY%3D" alt="" loading="lazy"/></p>
<p>æŒ‡ä»¤å‚è€ƒï¼ˆæˆ‘ä¹Ÿæ˜¯å‚è€ƒäº†å…¶ä»–å¤§ä½¬çš„åšæ³•ï¼Œå¤§ä½¬æ–‡ç« å¿˜è®°äº†ï¼Œä¸ç„¶æˆ‘å°±å¼•ç”¨å‡ºæ¥è®©å¤§å®¶çœ‹çœ‹ï¼‰</p>
<pre><code class="hljs language-xml" lang="xml">## è§’è‰²
è¯·ä½ æ‰®æ¼”ä¸­å›½è½¯ä»¶æ°´å¹³è€ƒè¯•é«˜çº§è¾…å¯¼ä¸“å®¶ï¼Œè´Ÿè´£ç”¨æˆ·å‘é€çš„æ¦‚å¿µè®²è§£å’Œå‘é€çš„é¢˜ç›®è§£ç­”ï¼Œå¯ä»¥ç»“åˆé™„ä»¶çš„å†…å®¹æ¥å›ç­”ã€‚

## æŠ€èƒ½
### æŠ€èƒ½1ï¼šæ¦‚å¿µè®²è§£
å½“æˆ‘å‘é€ä¸€äº›æ¦‚å¿µæˆ–è€…è½¯è€ƒæ¦‚å¿µè®²è§£çš„æˆªå›¾æ—¶ï¼ˆå¦‚æœæ˜¯æˆªå›¾è¯·ä½¿ç”¨ OCR å°†å›¾ç‰‡ä¸­çš„æ–‡å­—æå–å‡ºæ¥ï¼‰ã€‚
Step1ï¼šæ ¹æ®æ¦‚æ‹¬æˆ–æˆªå›¾å¸®æˆ‘è®²è§£ä¸€ä¸‹ç›¸å…³å†…å®¹ï¼Œè®²è§£æ—¶å°½é‡é€šä¿—æ˜“æ‡‚ï¼Œå¹¶ç»™å‡ºæ°å½“çš„ä¾‹å­ï¼Œä¼˜å…ˆä½¿ç”¨ markdown è¡¨æ ¼çš„å½¢å¼æ¥å‘ˆç°
Step2ï¼šå‡º 1 0é“ç¬¦åˆå½“å‰çŸ¥è¯†ç‚¹çš„é€‰æ‹©é¢˜å¹¶åœ¨æ‰€æœ‰é¢˜ç›®åç»™å‡ºç­”æ¡ˆå’Œå¯¹åº”çš„è¯¦ç»†è§£é‡Šã€‚

### æŠ€èƒ½2ï¼šè¯•é¢˜è¾…å¯¼
å½“ç”¨æˆ·å‘é€è½¯è€ƒçš„é¢˜ç›®çš„å†…å®¹æˆ–è€…æˆªå›¾ï¼ˆå¦‚æœæ˜¯æˆªå›¾è¯·ä½¿ç”¨ OCR å°†å›¾ç‰‡ä¸­çš„æ–‡å­—æå–å‡ºæ¥ï¼‰
Step1ï¼šè¯·ä½ ç»™å‡ºç­”æ¡ˆå¹¶è¯¦ç»†è§£é‡ŠåŸå› ã€‚
Step2ï¼šå‡º 1 é“ç›¸ä¼¼çš„é€‰æ‹©é¢˜å¹¶ç»™å‡ºç­”æ¡ˆå’Œå¯¹åº”çš„è¯¦ç»†è§£é‡Šã€‚
è¾“å‡ºæ ¼å¼ä¸ºï¼ˆå…ˆæ˜¯æ‰€æœ‰çš„é¢˜ç›®ï¼Œæ¥ç€å†æŠŠç­”æ¡ˆæ”¾åé¢ï¼‰ï¼š
é¢˜ç›®
ç­”æ¡ˆä¸ºï¼š<span class="hljs-tag">&lt;<span class="hljs-name">ç­”æ¡ˆ</span>&gt;</span>ã€‚
è¯¦ç»†è®²è§£: <span class="hljs-tag">&lt;<span class="hljs-name">è¯¦ç»†è®²è§£</span>&gt;</span>

### ç›¸ä¼¼é¢˜ç›®
<span class="hljs-tag">&lt;<span class="hljs-name">å‡º</span> <span class="hljs-attr">1</span> <span class="hljs-attr">é“è€ƒå¯Ÿç›¸åŒçŸ¥è¯†ç‚¹çš„ç›¸ä¼¼çš„é¢˜ç›®</span>&gt;</span>
ç­”æ¡ˆå’Œè§£æï¼š
<span class="hljs-tag">&lt;<span class="hljs-name">ç­”æ¡ˆå’Œå¯¹åº”çš„ç›¸è§£</span>&gt;</span>


### æŠ€èƒ½3ï¼šå‡ºé¢˜
å½“ç”¨æˆ·å‘é€çš„å†…å®¹åŒ…å«â€œå‡ºé¢˜â€æ—¶ï¼Œè¡¨ç¤ºå¸Œæœ›ä½ æ ¹æ®æä¾›çš„æ¦‚å¿µå‡º 4 é“ç›¸å…³çš„é€‰æ‹©é¢˜ã€‚

### æŠ€èƒ½4ï¼šé—®é¢˜è§£ç­”
å½“ç”¨æˆ·å‘é€ä¸€ä¸ªé—®é¢˜æ—¶ï¼Œä½ åªéœ€è¦å›ç­”é—®é¢˜å³å¯ã€‚

## è¦æ±‚
1 å¿…é¡»ä½¿ç”¨ä¸­æ–‡å›ç­”æˆ‘
2 è§£ç­”æ—¶ï¼Œå°½é‡ä½¿ç”¨é€šä¿—æ˜“æ‡‚çš„è¯­è¨€
3 è®²è§£æ—¶ï¼Œå¦‚æœæœ‰å¯èƒ½å°½é‡ç»™å‡ºç›¸å…³ä¾‹å­
4 è®²è§£æ—¶ï¼Œä¼˜å…ˆè€ƒè™‘ä½¿ç”¨markdownè¡¨æ ¼çš„æ–¹å¼å‘ˆç°ï¼Œå¦‚æœå‡ºç°ä¸åŒå±‚çº§çš„æ¦‚å¿µï¼Œå¯ä»¥å°†ä¸åŒå±‚çº§çš„æ¦‚å¿µç”¨ä¸åŒçš„è¡¨æ ¼è¡¨ç¤º
5 ç»™å‡ºç­”æ¡ˆå’Œè§£ææ—¶ï¼Œæ¯é“é¢˜çš„ç­”æ¡ˆå’Œè§£é‡Šè¦åœ¨ä¸€èµ·ç»™å‡ºï¼Œç­”æ¡ˆçš„è§£é‡Šéœ€è¦è¯¦å°½
</code></pre>
<h4 data-id="heading-6">åˆ·é¢˜</h4>
<p>åˆ·é¢˜æ¨èåœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fwangxiao.xisaiwang.com%2Ftiku2%2Flist-zt131.html" target="_blank" title="https://wangxiao.xisaiwang.com/tiku2/list-zt131.html" ref="nofollow noopener noreferrer">å¸Œèµ›ç½‘</a>è¿›è¡Œåˆ·é¢˜ï¼Œå¸Œèµ›æœ‰æ¯æ—¥ä¸€é¢˜ï¼Œå»ºè®®åˆšå­¦å®Œçš„æ—¶å€™å¯ä»¥å…ˆåˆ·ä¸€ä¸‹ã€‚æ¡ˆä¾‹é¢˜å†…å®¹å­¦å®Œä¹‹åå¯ä»¥è€ƒè™‘åˆ·æ•´å¼ è¯•å·ã€‚å¸Œèµ›ç½‘æ˜¯æœ‰è€ƒè¯•å½¢å¼çš„æ–¹å¼ï¼Œå»ºè®®å…ˆåˆ· 20-23 çš„å·å­ï¼Œå…¶ä¸­ 23-25 å¯èƒ½æœ‰çš„é¢˜ç›®å­˜åœ¨ç¼ºé™·ï¼Œä½†æ˜¯éœ€è¦ç€é‡å­¦ä¹ ï¼Œæ¯”å¦‚éè¶…çº²é¢˜å‹éœ€è¦æŒæ¡ï¼Œå› ä¸ºä¸‹æ¬¡è€ƒè¯•å¾ˆå¯èƒ½ä¼šç›¸ä¼¼ï¼Œå°¤å…¶æ˜¯é€‰æ‹©é¢˜ï¼Œç›¸ä¼¼åº¦å¯èƒ½ä¼šæ¯”è¾ƒå¤§ï¼Œæ¡ˆä¾‹é¢˜æˆ‘è§‰å¾—æ˜¯å˜å½¢å æœ€å¤§ã€‚</p>
<blockquote>
<p>ä¸»è¦è¿˜æ˜¯åˆ·é¢˜ï¼Œé‡åˆ°å“ªé‡Œä¸ä¼šå°±å»æŸ¥èµ„æ–™ï¼Œæˆ‘ä¹ æƒ¯çœ‹çœ‹è¯¾ä»¶æˆ–è€…çœ‹æ•™æï¼Œå¶å°”ä¼šæŸ¥ä¸€ä¸‹ aiï¼Œä½†æ˜¯ä¸è¦çº ç»“ï¼Œä¸ä¼šå°±æ˜¯æŸ¥ã€‚å°±æ¯”å¦‚ï¼Œæˆ‘å½“æ—¶å¯¹äºèŒƒå¼çš„å®šä¹‰ï¼Œå‡½æ•°ä¾èµ–ï¼Œä»€ä¹ˆæ˜¯ä¿æŒå‡½æ•°ä¾èµ–ã€æœ‰æŸåˆ†è§£æ— æŸåˆ†è§£ï¼Œæ€ä¹ˆåˆ¤æ–­ï¼Ÿé¦–å…ˆéœ€è¦è€ƒè™‘ï¼Œè¿™ç®—ä¸ªåŸºç¡€é¢˜ï¼Œéœ€è¦æŒæ¡çš„ï¼Œæ‰€ä»¥æˆ‘å°±å»æŸ¥æ•™æã€è¯¾ä»¶ï¼Œé—® AIï¼Œç†è§£ä»–ï¼Œæ¯æ¬¡åšäº‰å–åšå¯¹ã€‚å¯¹äºåµŒå…¥å¼ï¼Œæˆ‘æ˜¯ä¿æŒè¯¥è®°å¿†å°±è®°å¿†ï¼Œä¸åšæ·±åº¦è¿½ç©¶ã€‚</p>
</blockquote>
<p>åˆ·å®Œé¢˜åˆ‡è®°éœ€è¦å¤ç›˜ï¼ï¼ï¼</p>
<h4 data-id="heading-7">è®ºæ–‡</h4>
<p>å‡†å¤‡è®ºæ–‡ä¸è¦å¤ªæ—©ï¼Œä¹Ÿä¸è¦å¤ªæ™šï¼Œæœ€å¥½æ˜¯è€ƒå‰ä¸¤å‘¨ï¼Œæˆ‘å½“æ—¶æ˜¯è€ƒå‰ 3 å¤©å‡†å¤‡çš„ï¼Œé‚£æ—¶å€™æˆ‘è¿˜åœ¨é¡¹ç›®ç°åœºï¼Œå½“æ—¶æˆ‘æ˜¯æŒºæ…Œçš„ï¼Œè¦è€ƒè¯•äº†è¿˜åœ¨å‡ºå·®ï¼Œä½†æ˜¯è¿˜å¥½é‚£æ—¶å€™ä¸å¿™ï¼Œæ™šä¸Šä¸‹ç­æˆ‘åœ¨é…’åº—ç‹¬è‡ªå­¦ä¹ ã€‚</p>
<p>å‡†å¤‡è®ºæ–‡æˆ‘çš„å»ºè®®æ˜¯ <a href="https://link.juejin.cn?target=https%3A%2F%2Fbilibili.com%2Fvideo%2FBV13KG1zFEnd%2F%3Fspm_id_from%3D333.337.search-card.all.click" target="_blank" title="https://bilibili.com/video/BV13KG1zFEnd/?spm_id_from=333.337.search-card.all.click" ref="nofollow noopener noreferrer">bilibili</a> å»çœ‹çœ‹æœ‰æ²¡æœ‰æŠ¼é¢˜çš„è§†é¢‘ã€‚å½“ç„¶äº†ï¼Œå¦‚æœä½ æœ‰æŠ¥ç­ï¼Œè‚¯å®šæœ‰æŠ¼é¢˜ï¼Œè€Œä¸”è€å¸ˆä¹Ÿä¼šç»™ä½ å®‰æ’å¥½ã€‚å¦‚æœæ²¡æœ‰æŠ¥ç­çš„åŒå¿—ä»¬ï¼Œä¹Ÿå¯ä»¥è‡ªå­¦ã€‚æˆ‘æŒ‰ç…§æˆ‘çš„å¤ä¹ èŠ‚å¥æ¥è¯´ï¼Œæˆ‘æ˜¯å» bilibili çœ‹çœ‹æœ‰æ²¡æœ‰å¤§ä½¬å‘å¦‚ä½•å†™ã€æ€ä¹ˆå†™ã€‚é‚£æ—¶å€™æˆ‘è‡ªå·±å‡†å¤‡äº†ä¸€ä»½æ¨¡æ¿ï¼Œæ ¹æ®è‡ªå·±çš„é¡¹ç›®æ¥æ­å»ºï¼Œè‡³å°‘æœ‰ 1200 å­—ï¼Œå¹¶ä¸”éœ€è¦æŠŠä»–èƒŒä¸‹æ¥ã€‚ç„¶åå°±æ˜¯å»æ‰¾ä¼˜ç§€æ–‡ç« ï¼Œæ¨¡ä»¿ä»–ä»¬å†™ã€‚é‚£ä¹ˆï¼Ÿè¦å‡†å¤‡ä»€ä¹ˆæ–‡ç« å‘¢ï¼Ÿemmmï¼Œæˆ‘å½“æ—¶ä¹Ÿæ˜¯è‡ªå·±è’™çš„ï¼Œæˆ‘å°½é‡æŠŠä¼šè€ƒçš„éƒ½å‡†å¤‡äº†ã€‚åªè¦æœ‰æ¨¡æ¿ï¼Œå…¶ä»–çš„å†…å®¹éƒ½å¥½è®°çš„ã€‚</p>

<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/066e45d6da76491badf30bda4e3e5506~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oCS5pS-5ZCn5b635b63:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767616126&amp;x-signature=mr5Rve499f2OG3%2B6s1eZ3lD8jVo%3D" alt="" loading="lazy"/></p>
<p>è¿™æ˜¯æˆ‘å‡†å¤‡çš„è®ºæ–‡ï¼ˆå¤©å‘ï¼Œè°æ•¢ä¿¡ 3 ä¸ªæ™šä¸Šå‡†å¤‡è¿™ä¹ˆå¤šï¼Œæœ‰ä¸ªæç¬‘çš„äº‹æƒ…ï¼ŒåŸæœ¬æˆ‘æ˜¯å‡†å¤‡äº†æµ‹è¯•è¿™æ–¹é¢çš„ï¼Œä½†æ˜¯æˆ‘çœ‹åˆ°25å¹´ä¸ŠåŠå¹´è€ƒè¿‡äº†ï¼Œäºæ˜¯æŠŠä»–åˆ’æ‰äº†ï¼Œç»“æœè€ƒåˆ°äº†ã€‚å“ã€‚ã€‚ã€‚ï¼‰ï¼Œå…¶å®è¿™äº›å°±å‰é¢å‡ ç¯‡æˆ‘æœ‰è·Ÿç€å†™ï¼Œå…¶ä»–éƒ½åªæ˜¯é»˜å†™è‡ªå·±çš„æ¨¡æ¿ï¼Œç„¶åæ€è€ƒæ€ä¹ˆæŠ“é‡ç‚¹ã€‚</p>

<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e57644c5053a44f196d4f35359a0089d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oCS5pS-5ZCn5b635b63:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767616126&amp;x-signature=JdELAGXnHBj8IZ0uNepHpMfwLaU%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-8">æ€»ç»“</h3>
<p>æˆ‘ç”¨å¦‚æ­¤çš„ç›´ç™½çš„è¯­è¨€é˜è¿°äº†è‡ªå·±çš„å¤‡è€ƒç»éªŒï¼Œæ€»çš„æ¥è¯´ï¼Œè½¯è€ƒåªæ˜¯è€ƒæ ¸ï¼Œå¹¶ä¸æ˜¯äººæ‰é€‰æ‹”ã€‚åªè¦è‚¯åŠªåŠ›å¤ä¹ ï¼Œè¿˜æ˜¯èƒ½å¤Ÿé€šè¿‡çš„ï¼Œå¸Œæœ›æˆ‘æä¾›çš„ç»éªŒèƒ½å¤Ÿå¸®åˆ°å„ä½ï¼Œå¯èƒ½æˆ‘è¯´çš„ä¸æ˜¯å¾ˆå¯¹ï¼Œä½†æ˜¯è¿™äº›æ˜¯æˆ‘çš„ç»éªŒï¼Œå¦‚æœå„ä½æœ‰ä»€ä¹ˆå›°éš¾ï¼Œæ¬¢è¿å„ä½ä¸æˆ‘è¿›è¡Œè®¨è®ºã€‚</p>
<p>ç¥å„ä½å¤‡è€ƒçš„åŒå¿—èƒ½å¤Ÿé¡ºåˆ©é€šè¿‡è€ƒè¯•ã€‚</p>
<h3 data-id="heading-9">å‚è€ƒæ–‡çŒ®</h3>
<p>å„ä½å¯ä»¥çœ‹çœ‹è¿™ä½å¤§ä½¬çš„æ–‡ç« ï¼Œæˆ‘ä¹Ÿæ˜¯å—è¿™ç¯‡æ–‡ç« çš„å¯å‘
<a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2Fw605283073%2Farticle%2Fdetails%2F144461549" target="_blank" title="https://blog.csdn.net/w605283073/article/details/144461549" ref="nofollow noopener noreferrer">ä¸€å¹´æå®šä¸¤ä¸ªè½¯è€ƒé«˜çº§è¯ä¹¦ï¼Œå…³é”®æŠ€å·§å¤§æ­ç§˜</a></p>
<hr/>
ä¸€èµ·å­¦ä¹ ä¸€èµ·è¿›æ­¥ï¼Œèƒ½å­¦ä¸€ç‚¹æ˜¯ä¸€ç‚¹ï¼Œå†²ï¼Œè½¯è€ƒé«˜çº§ï¼ï¼ï¼</div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Hibernateï¼ˆ9ï¼‰ä»€ä¹ˆæ˜¯Hibernateçš„Transactionï¼Ÿ]]></title>    <link>https://juejin.cn/post/7589099845186699300</link>    <guid>https://juejin.cn/post/7589099845186699300</guid>    <pubDate>2025-12-29T12:33:10.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589099845186699300" data-draft-id="7589082912588742699" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Hibernateï¼ˆ9ï¼‰ä»€ä¹ˆæ˜¯Hibernateçš„Transactionï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-29T12:33:10.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Victor356"/> <meta itemprop="url" content="https://juejin.cn/user/3492507879476878"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Hibernateï¼ˆ9ï¼‰ä»€ä¹ˆæ˜¯Hibernateçš„Transactionï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3492507879476878/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Victor356
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T12:33:10.000Z" title="Mon Dec 29 2025 12:33:10 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>Hibernateçš„<code>Transaction</code>æ¥å£ç”¨äºç®¡ç†æ•°æ®åº“äº‹åŠ¡ã€‚äº‹åŠ¡æ˜¯æ•°æ®åº“æ“ä½œçš„ä¸€ä¸ªé€»è¾‘å•å…ƒï¼Œå®ƒç¡®ä¿è¦ä¹ˆæ‰€æœ‰æ“ä½œéƒ½æˆåŠŸï¼Œè¦ä¹ˆæ‰€æœ‰æ“ä½œéƒ½å›æ»šï¼Œä»è€Œä¿è¯æ•°æ®çš„ä¸€è‡´æ€§å’Œå®Œæ•´æ€§ã€‚åœ¨Hibernateä¸­ï¼Œäº‹åŠ¡ç®¡ç†ä¸»è¦æ˜¯é€šè¿‡<code>Transaction</code>æ¥å£å®ç°çš„ï¼Œé€šå¸¸ä¸<code>Session</code>å¯¹è±¡ä¸€èµ·ä½¿ç”¨ã€‚</p>
<h3 data-id="heading-0">ä¸»è¦åŠŸèƒ½</h3>
<ol>
<li><strong>å¼€å§‹äº‹åŠ¡</strong>ï¼šé€šè¿‡<code>beginTransaction</code>æ–¹æ³•å¼€å§‹ä¸€ä¸ªæ–°çš„äº‹åŠ¡ã€‚</li>
<li><strong>æäº¤äº‹åŠ¡</strong>ï¼šé€šè¿‡<code>commit</code>æ–¹æ³•æäº¤å½“å‰äº‹åŠ¡ï¼Œå°†æ‰€æœ‰æ›´æ”¹æŒä¹…åŒ–åˆ°æ•°æ®åº“ä¸­ã€‚</li>
<li><strong>å›æ»šäº‹åŠ¡</strong>ï¼šé€šè¿‡<code>rollback</code>æ–¹æ³•å›æ»šå½“å‰äº‹åŠ¡ï¼Œæ’¤é”€æ‰€æœ‰æœªæäº¤çš„æ›´æ”¹ã€‚</li>
<li><strong>äº‹åŠ¡çŠ¶æ€æŸ¥è¯¢</strong>ï¼šæä¾›æŸ¥è¯¢äº‹åŠ¡çŠ¶æ€çš„æ–¹æ³•ï¼Œå¦‚<code>isActive</code>ã€‚</li>
</ol>
<h3 data-id="heading-1">ä½¿ç”¨ç¤ºä¾‹</h3>
<p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªè¯¦ç»†çš„ä»£ç ç¤ºä¾‹ï¼Œå±•ç¤ºå¦‚ä½•åœ¨Hibernateä¸­ä½¿ç”¨<code>Transaction</code>æ¥å£è¿›è¡ŒCRUDæ“ä½œã€‚</p>
<h4 data-id="heading-2"><code>hibernate.cfg.xml</code> é…ç½®</h4>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">hibernate-configuration</span> <span class="hljs-keyword">PUBLIC</span>
        <span class="hljs-string">"-//Hibernate/Hibernate Configuration DTD 3.0//EN"</span>
        <span class="hljs-string">"http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">hibernate-configuration</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">session-factory</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- æ•°æ®åº“è¿æ¥é…ç½® --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.driver_class"</span>&gt;</span>com.mysql.cj.jdbc.Driver<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.url"</span>&gt;</span>jdbc:mysql://localhost:3306/your_database<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.username"</span>&gt;</span>your_username<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.password"</span>&gt;</span>your_password<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- Hibernate å±æ€§é…ç½® --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.dialect"</span>&gt;</span>org.hibernate.dialect.MySQLDialect<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.show_sql"</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.format_sql"</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.hbm2ddl.auto"</span>&gt;</span>update<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- æ˜ å°„ç±»é…ç½® --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">mapping</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.example.domain.Student"</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">session-factory</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">hibernate-configuration</span>&gt;</span>
</code></pre>
<h4 data-id="heading-3">HibernateUtil ç±»</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.hibernate.SessionFactory;
<span class="hljs-keyword">import</span> org.hibernate.cfg.Configuration;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HibernateUtil</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> SessionFactory sessionFactory;

    <span class="hljs-keyword">static</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// ä»é…ç½®æ–‡ä»¶åˆ›å»ºSessionFactory</span>
            sessionFactory = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Configuration</span>().configure(<span class="hljs-string">"hibernate.cfg.xml"</span>).buildSessionFactory();
        } <span class="hljs-keyword">catch</span> (Throwable ex) {
            <span class="hljs-comment">// è®°å½•å¯åŠ¨å¤±è´¥çš„é”™è¯¯</span>
            System.err.println(<span class="hljs-string">"Initial SessionFactory creation failed."</span> + ex);
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ExceptionInInitializerError</span>(ex);
        }
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> SessionFactory <span class="hljs-title function_">getSessionFactory</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> sessionFactory;
    }
}
</code></pre>
<h4 data-id="heading-4">å®ä½“ç±» Student</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Student</span> {
    <span class="hljs-keyword">private</span> Long id;
    <span class="hljs-keyword">private</span> String name;
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> age;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Student</span><span class="hljs-params">()</span> {}

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Student</span><span class="hljs-params">(String name, <span class="hljs-type">int</span> age)</span> {
        <span class="hljs-built_in">this</span>.name = name;
        <span class="hljs-built_in">this</span>.age = age;
    }

    <span class="hljs-comment">// getters å’Œ setters</span>
    <span class="hljs-keyword">public</span> Long <span class="hljs-title function_">getId</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> id;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setId</span><span class="hljs-params">(Long id)</span> {
        <span class="hljs-built_in">this</span>.id = id;
    }

    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> name;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setName</span><span class="hljs-params">(String name)</span> {
        <span class="hljs-built_in">this</span>.name = name;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getAge</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> age;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setAge</span><span class="hljs-params">(<span class="hljs-type">int</span> age)</span> {
        <span class="hljs-built_in">this</span>.age = age;
    }
}
</code></pre>
<h4 data-id="heading-5">ä½¿ç”¨äº‹åŠ¡è¿›è¡ŒCRUDæ“ä½œ</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.hibernate.Session;
<span class="hljs-keyword">import</span> org.hibernate.SessionFactory;
<span class="hljs-keyword">import</span> org.hibernate.Transaction;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HibernateExample</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// è·å–SessionFactory</span>
        <span class="hljs-type">SessionFactory</span> <span class="hljs-variable">sessionFactory</span> <span class="hljs-operator">=</span> HibernateUtil.getSessionFactory();
        <span class="hljs-comment">// æ‰“å¼€ä¸€ä¸ªæ–°çš„Session</span>
        <span class="hljs-type">Session</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> sessionFactory.openSession();

        <span class="hljs-type">Transaction</span> <span class="hljs-variable">transaction</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// å¯åŠ¨äº‹åŠ¡</span>
            transaction = session.beginTransaction();

            <span class="hljs-comment">// åˆ›å»ºå¹¶ä¿å­˜Studentå¯¹è±¡</span>
            <span class="hljs-type">Student</span> <span class="hljs-variable">student</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>(<span class="hljs-string">"John Doe"</span>, <span class="hljs-number">20</span>);
            session.save(student); <span class="hljs-comment">// ä¿å­˜å¯¹è±¡</span>

            <span class="hljs-comment">// æäº¤äº‹åŠ¡</span>
            transaction.commit();
        } <span class="hljs-keyword">catch</span> (Exception e) {
            <span class="hljs-keyword">if</span> (transaction != <span class="hljs-literal">null</span>) {
                transaction.rollback(); <span class="hljs-comment">// å›æ»šäº‹åŠ¡</span>
            }
            e.printStackTrace();
        } <span class="hljs-keyword">finally</span> {
            session.close(); <span class="hljs-comment">// å…³é—­Session</span>
        }

        <span class="hljs-comment">// è¯»å–ã€æ›´æ–°å’Œåˆ é™¤æ“ä½œ</span>
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// æ‰“å¼€ä¸€ä¸ªæ–°çš„Session</span>
            session = sessionFactory.openSession();
            <span class="hljs-comment">// å¯åŠ¨äº‹åŠ¡</span>
            transaction = session.beginTransaction();

            <span class="hljs-comment">// è¯»å–Studentå¯¹è±¡</span>
            <span class="hljs-type">Student</span> <span class="hljs-variable">retrievedStudent</span> <span class="hljs-operator">=</span> session.get(Student.class, student.getId());
            System.out.println(<span class="hljs-string">"Retrieved Student: "</span> + retrievedStudent.getName() + <span class="hljs-string">", Age: "</span> + retrievedStudent.getAge());

            <span class="hljs-comment">// æ›´æ–°Studentå¯¹è±¡</span>
            retrievedStudent.setAge(<span class="hljs-number">21</span>);
            session.update(retrievedStudent); <span class="hljs-comment">// æ›´æ–°å¯¹è±¡</span>

            <span class="hljs-comment">// åˆ é™¤Studentå¯¹è±¡</span>
            session.delete(retrievedStudent); <span class="hljs-comment">// åˆ é™¤å¯¹è±¡</span>

            <span class="hljs-comment">// æäº¤äº‹åŠ¡</span>
            transaction.commit();
        } <span class="hljs-keyword">catch</span> (Exception e) {
            <span class="hljs-keyword">if</span> (transaction != <span class="hljs-literal">null</span>) {
                transaction.rollback(); <span class="hljs-comment">// å›æ»šäº‹åŠ¡</span>
            }
            e.printStackTrace();
        } <span class="hljs-keyword">finally</span> {
            session.close(); <span class="hljs-comment">// å…³é—­Session</span>
        }

        <span class="hljs-comment">// å…³é—­SessionFactory</span>
        sessionFactory.close();
    }
}
</code></pre>
<h3 data-id="heading-6">è¯¦ç»†è§£é‡Š</h3>
<ol>
<li><strong>è·å–SessionFactory</strong>ï¼šä»<code>HibernateUtil</code>ç±»ä¸­è·å–å•ä¾‹çš„<code>SessionFactory</code>å®ä¾‹ã€‚</li>
<li><strong>æ‰“å¼€Session</strong>ï¼šé€šè¿‡<code>sessionFactory.openSession()</code>æ–¹æ³•æ‰“å¼€ä¸€ä¸ªæ–°çš„<code>Session</code>å¯¹è±¡ã€‚</li>
<li><strong>å¯åŠ¨äº‹åŠ¡</strong>ï¼šé€šè¿‡<code>session.beginTransaction()</code>æ–¹æ³•å¼€å§‹ä¸€ä¸ªæ–°çš„äº‹åŠ¡ã€‚</li>
<li><strong>CRUDæ“ä½œ</strong>ï¼š
<ul>
<li><strong>åˆ›å»ºå¹¶ä¿å­˜å¯¹è±¡</strong>ï¼šåˆ›å»ºä¸€ä¸ª<code>Student</code>å¯¹è±¡ï¼Œå¹¶ä½¿ç”¨<code>session.save(student)</code>æ–¹æ³•å°†å…¶ä¿å­˜åˆ°æ•°æ®åº“ä¸­ã€‚</li>
<li><strong>æäº¤äº‹åŠ¡</strong>ï¼šä½¿ç”¨<code>transaction.commit()</code>æ–¹æ³•æäº¤äº‹åŠ¡ï¼Œå°†æ‰€æœ‰æ›´æ”¹æŒä¹…åŒ–åˆ°æ•°æ®åº“ä¸­ã€‚</li>
<li><strong>è¯»å–å¯¹è±¡</strong>ï¼šé€šè¿‡<code>session.get(Student.class, student.getId())</code>æ–¹æ³•ä»æ•°æ®åº“ä¸­è¯»å–å¯¹è±¡ã€‚</li>
<li><strong>æ›´æ–°å¯¹è±¡</strong>ï¼šä¿®æ”¹å¯¹è±¡å±æ€§åï¼Œä½¿ç”¨<code>session.update(retrievedStudent)</code>æ–¹æ³•æ›´æ–°æ•°æ®åº“ä¸­çš„è®°å½•ã€‚</li>
<li><strong>åˆ é™¤å¯¹è±¡</strong>ï¼šä½¿ç”¨<code>session.delete(retrievedStudent)</code>æ–¹æ³•ä»æ•°æ®åº“ä¸­åˆ é™¤å¯¹è±¡ã€‚</li>
</ul>
</li>
<li><strong>å›æ»šäº‹åŠ¡</strong>ï¼šåœ¨æ•è·å¼‚å¸¸çš„æƒ…å†µä¸‹ï¼Œå¦‚æœäº‹åŠ¡æœªæäº¤ï¼Œä½¿ç”¨<code>transaction.rollback()</code>æ–¹æ³•å›æ»šäº‹åŠ¡ï¼Œæ’¤é”€æ‰€æœ‰æœªæäº¤çš„æ›´æ”¹ã€‚</li>
<li><strong>å…³é—­Session</strong>ï¼šåœ¨<code>finally</code>å—ä¸­é€šè¿‡<code>session.close()</code>æ–¹æ³•å…³é—­<code>Session</code>ã€‚</li>
<li><strong>å…³é—­SessionFactory</strong>ï¼šåœ¨åº”ç”¨ç¨‹åºç»“æŸæ—¶ï¼Œé€šè¿‡<code>sessionFactory.close()</code>æ–¹æ³•å…³é—­<code>SessionFactory</code>ã€‚</li>
</ol>
<h3 data-id="heading-7">äº‹åŠ¡ç®¡ç†çš„æ³¨æ„äº‹é¡¹</h3>
<ol>
<li><strong>åµŒå¥—äº‹åŠ¡</strong>ï¼šHibernateä¸ç›´æ¥æ”¯æŒåµŒå¥—äº‹åŠ¡ï¼Œç»´æŠ¤åµŒå¥—äº‹åŠ¡çš„çŠ¶æ€éœ€è¦é¢å¤–çš„ç®¡ç†ã€‚</li>
<li><strong>è‡ªåŠ¨æäº¤</strong>ï¼šç¡®ä¿åœ¨ä½¿ç”¨äº‹åŠ¡æ—¶ï¼Œè®¾ç½®æ•°æ®åº“è¿æ¥çš„è‡ªåŠ¨æäº¤æ¨¡å¼ä¸ºfalseï¼Œä»¥ä¾¿æ‰‹åŠ¨ç®¡ç†äº‹åŠ¡ã€‚</li>
<li><strong>å¼‚å¸¸å¤„ç†</strong>ï¼šåœ¨äº‹åŠ¡æ“ä½œä¸­ï¼Œåº”å½“å¦¥å–„å¤„ç†å¼‚å¸¸ï¼Œåœ¨æ•è·å¼‚å¸¸åå›æ»šäº‹åŠ¡ä»¥ä¿è¯æ•°æ®çš„ä¸€è‡´æ€§ã€‚</li>
</ol>
<h3 data-id="heading-8">æ€»ç»“</h3>
<p>Hibernateçš„<code>Transaction</code>æ¥å£æä¾›äº†å¯¹æ•°æ®åº“äº‹åŠ¡çš„ç®¡ç†åŠŸèƒ½ï¼Œä½¿å¾—åº”ç”¨ç¨‹åºèƒ½å¤Ÿä¿è¯æ•°æ®æ“ä½œçš„ä¸€è‡´æ€§å’Œå®Œæ•´æ€§ã€‚é€šè¿‡è¯¦ç»†çš„é…ç½®å’Œæ­£ç¡®çš„ä½¿ç”¨<code>Transaction</code>æ¥å£ï¼Œå¯ä»¥é«˜æ•ˆåœ°è¿›è¡Œæ•°æ®åº“æ“ä½œï¼Œç¡®ä¿åº”ç”¨ç¨‹åºçš„ç¨³å®šæ€§å’Œå¯é æ€§ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€å¤§æ•°æ® & AIã€‘Flink Agents æºç è§£è¯» --- (2) --- æ ¸å¿ƒæ¶æ„]]></title>    <link>https://juejin.cn/post/7589107312112926729</link>    <guid>https://juejin.cn/post/7589107312112926729</guid>    <pubDate>2025-12-29T12:33:23.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589107312112926729" data-draft-id="7589052659436208174" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€å¤§æ•°æ® &amp; AIã€‘Flink Agents æºç è§£è¯» --- (2) --- æ ¸å¿ƒæ¶æ„"/> <meta itemprop="keywords" content="åç«¯,ç®—æ³•,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-29T12:33:23.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç½—è¥¿çš„æ€è€ƒ"/> <meta itemprop="url" content="https://juejin.cn/user/351470467691175"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€å¤§æ•°æ® &amp; AIã€‘Flink Agents æºç è§£è¯» --- (2) --- æ ¸å¿ƒæ¶æ„
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/351470467691175/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç½—è¥¿çš„æ€è€ƒ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T12:33:23.000Z" title="Mon Dec 29 2025 12:33:23 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»16åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ã€å¤§æ•°æ® &amp; AIã€‘Flink Agents æºç è§£è¯» --- (2) --- æ ¸å¿ƒæ¶æ„</h2>
<ul>
<li>
<p><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">0x00 æ‘˜è¦</a></p>
</li>
<li>
<p><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">0x01 Flink Agentsä¸»è¦ç»„ä»¶</a></p>
<ul>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">1.1 ä¸»è¦ç»„ä»¶</a></li>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">1.2 å†…éƒ¨æˆå‘˜å˜é‡æ˜ å°„å…³ç³»</a></li>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">1.3 æ‰§è¡Œæµç¨‹</a></li>
</ul>
</li>
<li>
<p><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">0x02 ä¸åŸç”ŸFlinkæ¯”å¯¹</a></p>
<ul>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">2.1 æ ¸å¿ƒ</a></li>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">2.2 å…·ä½“æ¯”å¯¹</a></li>
</ul>
</li>
<li>
<p><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">0x03 å®ä¾‹æ‹†è§£</a></p>
<ul>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">3.1 ç¬¬ä¸€å±‚çº§ï¼šAgent â€“ é¤å…èœå•å’Œè§„åˆ™æ‰‹å†Œï¼ˆBlueprintï¼‰</a></li>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">3.2 ç¬¬äºŒå±‚çº§ï¼šAgentPlan â€“ é¤å…çš„è¯¦ç»†æ“ä½œæµç¨‹å›¾ï¼ˆCompiled Plan,è®¡åˆ’ç¼–è¯‘å±‚ï¼‰</a></li>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">3.3 ç¬¬ä¸‰å±‚çº§ï¼šActionExecutionOperator â€“ é¤å…çš„æ‰§è¡Œç®¡ç†å±‚ï¼ˆRuntime Executorï¼Œæ‰§è¡Œå¼•æ“å±‚ï¼‰</a></li>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">3.4 ç¬¬å››å±‚çº§ï¼šActionTask â€“ å…·ä½“çš„æœåŠ¡æ­¥éª¤ï¼ˆExecution Unitï¼‰</a></li>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">3.5 å·¥ä½œæµç¨‹ä¸¾ä¾‹</a></li>
</ul>
</li>
<li>
<p><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">0x04 å¹¶å‘æ€§å’Œå¹¶è¡Œæ€§</a></p>
<ul>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">4.1 FlinkåŸç”Ÿå¹¶å‘æ¨¡å‹</a></li>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">4.2 æ¯ä¸ªKeyçš„çŠ¶æ€ç®¡ç†</a></li>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">4.3 é‚®ç®±çº¿ç¨‹æ¨¡å‹</a></li>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">4.4 å¼‚æ­¥ä»»åŠ¡å¤„ç†</a></li>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">4.5 å†…å­˜ä¸€è‡´æ€§</a></li>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">4.6 æ°´å°å’Œäº‹ä»¶æ—¶é—´å¤„ç†</a></li>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">4.7 æ£€æŸ¥ç‚¹å’Œæ¢å¤</a></li>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">4.8 æ€»ç»“</a></li>
</ul>
</li>
<li>
<p><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">0xFF å‚è€ƒ</a></p>
</li>
</ul>
<h3 data-id="heading-1">0x00 æ‘˜è¦</h3>
<p>Flink Agents æ¡†æ¶çš„æ ¸å¿ƒæ˜¯ <strong>â€œäº‹ä»¶é©±åŠ¨ + çŠ¶æ€éš”ç¦» + å¤šè¯­è¨€åä½œâ€</strong> ï¼šé€šè¿‡ Agent/AgentPlan å®ç°ä¸šåŠ¡é€»è¾‘çš„å£°æ˜å¼å®šä¹‰ï¼Œå€ŸåŠ© Flink åŸç”Ÿçš„åˆ†å¸ƒå¼ã€é«˜å¹¶å‘èƒ½åŠ›å®ç°å¯é æ‰§è¡Œï¼ŒåŒæ—¶æ”¯æŒ Python ç”Ÿæ€çš„å·¥å…· / æ¨¡å‹é›†æˆï¼Œå…¼é¡¾äº†å¼€å‘çµæ´»æ€§ä¸è¿è¡Œæ—¶æ•ˆç‡ï¼Œé€‚ç”¨äºå¤æ‚ AI ä»£ç†ä»»åŠ¡çš„åˆ†å¸ƒå¼éƒ¨ç½²ä¸æ‰§è¡Œã€‚</p>
<p>å…·ä½“è€Œè¨€ï¼ŒFlink Agents çš„ç»„ä»¶æ˜¯å¯¹åŸç”Ÿ Flink ç»„ä»¶åœ¨ â€œAgent ä¸šåŠ¡åœºæ™¯â€ ä¸‹çš„è¯­ä¹‰åŒ–å°è£…ï¼Œè€Œéå…¨æ–°å‘æ˜ã€‚å› æ­¤ï¼Œæœ¬æ–‡å°†å…ˆä»‹ç»Flink Agentsçš„åŸºæœ¬ç»„ä»¶ï¼Œç„¶åå°†å…¶ç»„ä»¶ä¸Flink åŸç”Ÿç»„ä»¶åšå¯¹æ¯”ï¼Œæœ€åç»™å‡ºä¸€ä¸ªè¯¦ç»†çš„ä¾‹å­ï¼Œè¿™æ ·è¯»è€…å¯ä»¥æ›´å¥½çš„ç†è§£å…¶è®¾è®¡ç²¾è¦ã€‚</p>
<h3 data-id="heading-2">0x01 Flink Agentsä¸»è¦ç»„ä»¶</h3>
<p>å¯ä»¥æŠŠ Flink Agents çš„æ•´ä¸ªæ‰§è¡Œæµç¨‹æ¯”ä½œ â€œåšä¸€é“èœâ€ï¼Œæˆ‘ä»¬å€Ÿæ­¤è¿›è¡Œåˆ†æã€‚</p>
<h4 data-id="heading-3">1.1 ä¸»è¦ç»„ä»¶</h4>
<p>Flink Agents æ˜¯åŸºäºåŸç”Ÿ Flink åˆ†å¸ƒå¼æµå¤„ç†èƒ½åŠ›å°è£…çš„ä¸Šå±‚æ¡†æ¶ã€‚å…¶ä¸­å››ä¸ªä¸»è¦ç»„ä»¶ä»£è¡¨äº† Flink Agents æ¡†æ¶ä¸­çš„å››ä¸ªå±‚æ¬¡ï¼š</p>
<ul>
<li><strong>Agentï¼ˆé¡¶å±‚è®¾è®¡ï¼Œå®šä¹‰äº†â€œåšä»€ä¹ˆâ€ï¼‰</strong> ï¼šç”¨æˆ·å®šä¹‰çš„æ™ºèƒ½å®ä½“ï¼Œç±»ä¼¼ â€œé¤å…èœå• + è§„åˆ™æ‰‹å†Œâ€ï¼ŒåŒ…å«ä¸šåŠ¡é€»è¾‘ã€åŠ¨ä½œï¼ˆActionï¼‰å’Œèµ„æºï¼ˆå·¥å…·ã€æ¨¡å‹ç­‰ï¼‰å®šä¹‰ï¼Œæ˜ç¡® â€œåšä»€ä¹ˆâ€ã€‚</li>
<li><strong>AgentPlanï¼ˆä¸­é—´ç¼–è¯‘å±‚ï¼Œç¡®å®šäº†â€œæ€ä¹ˆåšâ€ï¼‰</strong> ï¼šå°† Agent ç¼–è¯‘åçš„å¯æ‰§è¡Œè®¡åˆ’ï¼Œç±»ä¼¼ â€œè¯¦ç»†æ“ä½œæµç¨‹å›¾â€ï¼Œæ˜ç¡®åŠ¨ä½œè§¦å‘è§„åˆ™ã€èµ„æºæ˜ å°„å…³ç³»ï¼Œç¡®å®š â€œæ€ä¹ˆåšâ€ã€‚</li>
<li><strong>ActionExecutionOperatorï¼ˆè¿è¡Œæ—¶æ‰§è¡Œå±‚ï¼Œæ˜¯æ‰§è¡Œç¯å¢ƒï¼Œè´Ÿè´£â€œåè°ƒè°ƒåº¦â€ï¼‰</strong> ï¼šFlink é›†ç¾¤ä¸­çš„æ‰§è¡Œæ ¸å¿ƒï¼Œåœ¨ Flink æµå¤„ç†ç¯å¢ƒä¸­å®é™…æ‰§è¡Œæ“ä½œï¼Œç±»ä¼¼ â€œé¤å…é¦–å¸­å¤§å¨â€ï¼Œè´Ÿè´£æ¥æ”¶æ•°æ®ã€è°ƒåº¦ä»»åŠ¡ã€ç®¡ç†çŠ¶æ€ï¼Œåè°ƒæ•´ä½“æ‰§è¡Œæµç¨‹ã€‚</li>
<li><strong>ActionTaskï¼ˆæœ€å°æ‰§è¡Œå•å…ƒï¼Œè´Ÿè´£â€œå…·ä½“å®æ–½â€ï¼‰</strong> ï¼šå…·ä½“çš„æ‰§è¡Œä»»åŠ¡ï¼Œç±»ä¼¼ â€œå‘˜å·¥çš„å•ä¸ªæœåŠ¡æ­¥éª¤â€ï¼Œåˆ†ä¸º JavaActionTask å’Œ PythonActionTaskï¼Œå¤„ç†å•ä¸ªäº‹ä»¶å¹¶è¿”å›ç»“æœã€‚</li>
</ul>
<p>å…·ä½“å¯ä»¥å‚è§ä¸‹å›¾ã€‚</p>
<pre><code class="hljs language-csharp" lang="csharp">[<span class="hljs-meta">Agent</span>]Â èœå•æ‰‹å†Œ
Â Â Â Â â†“ï¼ˆç¼–è¯‘ï¼‰
[<span class="hljs-meta">AgentPlan</span>]Â è¯¦ç»†æµç¨‹å›¾
Â Â Â Â â†“ï¼ˆè¿è¡Œæ—¶å®ä¾‹åŒ–ï¼‰
[<span class="hljs-meta">ActionExecutionOperator</span>]Â é¤å…é¦–å¸­å¤§å¨
Â Â Â Â â†“ï¼ˆåˆ†é…ä»»åŠ¡ï¼‰
[<span class="hljs-meta">ActionTask</span>]Â å‘˜å·¥å…·ä½“ä»»åŠ¡
</code></pre>
<p>è¿™æ ·çš„è®¾è®¡ä½¿å¾—ç³»ç»Ÿæ—¢çµæ´»åˆé«˜æ•ˆï¼Œèƒ½å¤Ÿå¤„ç†å¤æ‚çš„AIä»£ç†ä»»åŠ¡ï¼ŒåŒæ—¶ä¿è¯äº†è‰¯å¥½çš„æ‰©å±•æ€§å’Œç»´æŠ¤æ€§ã€‚</p>
<h4 data-id="heading-4">1.2 å†…éƒ¨æˆå‘˜å˜é‡æ˜ å°„å…³ç³»</h4>
<p>Agentã€AgentPlan å’Œ ActionExecutionOperator ä¹‹é—´çš„å…³ç³»ä»¥åŠå®ƒä»¬å†…éƒ¨æˆå‘˜å˜é‡çš„æ˜ å°„å…³ç³»å¦‚ä¸‹ã€‚</p>
<h5 data-id="heading-5">1.2.1 Agent åˆ° AgentPlan</h5>
<p>Agent åˆ° AgentPlan çš„æ˜ å°„å¦‚ä¸‹ï¼š</p>

























<table><thead><tr><th>Agent æˆå‘˜</th><th>AgentPlan å¯¹åº”æˆå‘˜</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>_actionsï¼ˆè£…é¥°å™¨å®šä¹‰ï¼‰</td><td>actions, actions_by_event</td><td>Agent ä¸­é€šè¿‡ @action è£…é¥°å™¨å®šä¹‰çš„åŠ¨ä½œè¢«ç¼–è¯‘åˆ° AgentPlan çš„åŠ¨ä½œæ˜ å°„ä¸­</td></tr><tr><td>_actionsï¼ˆadd_action æ·»åŠ ï¼‰</td><td>actions, actions_by_event</td><td>é€šè¿‡ add_action æ–¹æ³•æ·»åŠ çš„åŠ¨ä½œåŒæ ·ç¼–è¯‘åˆ°åŠ¨ä½œæ˜ å°„ä¸­</td></tr><tr><td>_resources</td><td>resource_providers</td><td>Agent ä¸­æ³¨å†Œçš„èµ„æºè¢«è½¬æ¢ä¸ºèµ„æºæä¾›è€…</td></tr></tbody></table>
<h5 data-id="heading-6">1.2.2 AgentPlan åˆ° ActionExecutionOperator</h5>
<p>AgentPlan åˆ° ActionExecutionOperator çš„æ˜ å°„å¦‚ä¸‹ï¼š</p>

























<table><thead><tr><th>AgentPlan æˆå‘˜</th><th>ActionExecutionOperator å¯¹åº”æˆå‘˜</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>actions</td><td>é€šè¿‡ getActionsTriggeredBy() æ–¹æ³•è°ƒç”¨</td><td>Operator æ ¹æ®äº‹ä»¶ç±»å‹æŸ¥æ‰¾å¯¹åº”çš„åŠ¨ä½œ</td></tr><tr><td>resource_providers</td><td>åœ¨ RunnerContextImpl ä¸­ä½¿ç”¨</td><td>æä¾›è¿è¡Œæ—¶æ‰€éœ€çš„èµ„æº</td></tr><tr><td>config</td><td>metricGroup, builtInMetrics ç­‰</td><td>ç”¨äºé…ç½®æŒ‡æ ‡å’Œå…¶ä»–è¿è¡Œæ—¶è¡Œä¸º</td></tr></tbody></table>
<h6 data-id="heading-7">è¯¦ç»†æ˜ å°„åˆ†æ</h6>
<h6 data-id="heading-8">åŠ¨ä½œæ‰§è¡Œæ˜ å°„</h6>
<p>åœ¨ <code>ActionExecutionOperator</code> ä¸­ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">//Â æ ¹æ®äº‹ä»¶ç±»å‹è·å–è§¦å‘çš„åŠ¨ä½œ</span>
<span class="hljs-function"><span class="hljs-keyword">private</span>Â List&lt;Action&gt;Â <span class="hljs-title">getActionsTriggeredBy</span>(<span class="hljs-params">EventÂ <span class="hljs-keyword">event</span></span>)</span>Â {
Â Â Â Â <span class="hljs-keyword">if</span>Â (<span class="hljs-keyword">event</span>Â instanceofÂ PythonEvent)Â {
Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â agentPlan.getActionsTriggeredBy(((PythonEvent)Â <span class="hljs-keyword">event</span>).getEventType());
Â Â Â Â }Â <span class="hljs-keyword">else</span>Â {
Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â agentPlan.getActionsTriggeredBy(<span class="hljs-keyword">event</span>.getClass().getName());
Â Â Â Â }
}

<span class="hljs-comment">//Â åˆ›å»ºÂ ActionTaskÂ æ¥æ‰§è¡ŒåŠ¨ä½œ</span>
<span class="hljs-function"><span class="hljs-keyword">private</span>Â ActionTaskÂ <span class="hljs-title">createActionTask</span>(<span class="hljs-params">ObjectÂ key,Â ActionÂ action,Â EventÂ <span class="hljs-keyword">event</span></span>)</span>Â {
Â Â Â Â <span class="hljs-keyword">if</span>Â (action.getExec()Â instanceofÂ JavaFunction)Â {
Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-keyword">new</span>Â JavaActionTask(
Â Â Â Â Â Â Â Â Â Â Â Â key,Â <span class="hljs-keyword">event</span>,Â action,Â getRuntimeContext().getUserCodeClassLoader());
Â Â Â Â }Â <span class="hljs-keyword">else</span>Â <span class="hljs-keyword">if</span>Â (action.getExec()Â instanceofÂ PythonFunction)Â {
Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-keyword">new</span>Â PythonActionTask(key,Â <span class="hljs-keyword">event</span>,Â action);
Â Â Â Â }
Â Â Â Â <span class="hljs-comment">//Â ..</span>
}
</code></pre>
<h6 data-id="heading-9">èµ„æºç®¡ç†æ˜ å°„</h6>
<p><code>AgentPlan</code> ä¸­çš„èµ„æºæä¾›è€…åœ¨ <code>ActionExecutionOperator</code> ä¸­é€šè¿‡ <code>RunnerContextImpl</code> è®¿é—®ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">//Â åœ¨Â RunnerContextImplÂ ä¸­</span>
<span class="hljs-keyword">public</span>Â <span class="hljs-title class_">Resource</span>Â <span class="hljs-title function_">getResource</span>(<span class="hljs-params"><span class="hljs-built_in">String</span>Â name,Â ResourceTypeÂ <span class="hljs-keyword">type</span></span>)Â {
Â Â Â Â <span class="hljs-keyword">return</span>Â agentPlan.<span class="hljs-title function_">getResource</span>(name,Â <span class="hljs-keyword">type</span>);
}
</code></pre>
<h6 data-id="heading-10">é…ç½®æ˜ å°„</h6>
<p>AgentPlan ä¸­çš„é…ç½®ä¿¡æ¯è¢«ç”¨äºåˆå§‹åŒ–ActionExecutionOperatorçš„å„ç§è¿è¡Œæ—¶ç»„ä»¶ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">//Â åœ¨Â ActionExecutionOperator.open()Â ä¸­
<span class="hljs-attr">metricGroup</span>Â =Â newÂ FlinkAgentsMetricGroupImpl(getMetricGroup())<span class="hljs-comment">;</span>
<span class="hljs-attr">builtInMetrics</span>Â =Â newÂ BuiltInMetrics(metricGroup,Â agentPlan)<span class="hljs-comment">;</span>

//Â ActionStateStoreÂ åˆå§‹åŒ–ä¹Ÿä¾èµ–äºé…ç½®
ifÂ (<span class="hljs-attr">actionStateStore</span>Â ==Â nullÂ &amp;&amp;Â KAFKA.getType().equalsIgnoreCase(agentPlan.getConfig().get(ACTION_STATE_STORE_BACKEND)))Â {
Â Â Â Â <span class="hljs-attr">actionStateStore</span>Â =Â newÂ KafkaActionStateStore(agentPlan.getConfig())<span class="hljs-comment">;</span>
}
</code></pre>
<h6 data-id="heading-11">çŠ¶æ€ç®¡ç†æ˜ å°„</h6>
<p>ActionExecutionOperator ä¸­çš„å„ç§çŠ¶æ€ä¸ AgentPlan çš„æ‰§è¡Œéœ€æ±‚ç›¸å¯¹åº”ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">//Â çŸ­æœŸå†…å­˜çŠ¶æ€ç”¨äºåŠ¨ä½œé—´çš„æ•°æ®å…±äº«</span>
<span class="hljs-keyword">private</span>Â <span class="hljs-keyword">transient</span>Â MapState&lt;String,Â MemoryObjectImpl.MemoryItem&gt;Â shortTermMemState;

<span class="hljs-comment">//Â åŠ¨ä½œä»»åŠ¡çŠ¶æ€ç”¨äºå¼‚æ­¥æ‰§è¡Œç®¡ç†</span>
<span class="hljs-keyword">private</span>Â <span class="hljs-keyword">transient</span>Â ListState&lt;ActionTask&gt;Â actionTasksState;

<span class="hljs-comment">//Â å¾…å¤„ç†äº‹ä»¶çŠ¶æ€ç”¨äºæµæ§</span>
<span class="hljs-keyword">private</span>Â <span class="hljs-keyword">transient</span>Â ListState&lt;Event&gt;Â pendingInputEventsState;
</code></pre>
<h4 data-id="heading-12">1.3 æ‰§è¡Œæµç¨‹</h4>
<p>å…·ä½“æµç¨‹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-css" lang="css">ActionÂ <span class="hljs-selector-tag">Code</span>Â â†’Â AgentÂ â†’Â AgentPlanÂ â†’Â ActionExecutionOperatorÂ â†’Â ActionTaskÂ â†’Â FlinkÂ Runtime
</code></pre>
<p>ä»¥ ReActAgent ä¸ºä¾‹ï¼Œå…¶æµç¨‹å¦‚ä¸‹ï¼š</p>
<ul>
<li>
<p>ç”¨æˆ·å®šä¹‰ ReActAgentï¼ŒåŒ…å« <code>start_action</code> å’Œ <code>stop_action</code></p>
</li>
<li>
<p>é€šè¿‡ <code>AgentPlan.from_agent()</code> ç¼–è¯‘æˆè®¡åˆ’ï¼š</p>
<ul>
<li><code>actions</code>ï¼šåŒ…å« <code>start_action</code> å’Œ <code>stop_action</code></li>
<li><code>actions_by_event</code>ï¼šæ˜ å°„ <code>InputEvent</code> â†’ <code>start_action</code>ï¼Œ<code>ChatResponseEvent</code> â†’ <code>stop_action</code></li>
</ul>
</li>
<li>
<p>åœ¨è¿è¡Œç¯å¢ƒä¸­ï¼ŒAgentPlan è¢«ä¼ é€’ç»™ ActionExecutionOperatorFactoryã€‚ActionExecutionOperatorFactory åˆ›å»º ActionExecutionOperator å®ä¾‹ã€‚</p>
</li>
<li>
<p>ActionExecutionOperator åœ¨è¿è¡Œæ—¶æ ¹æ® AgentPlan æ‰§è¡Œå…·ä½“æ“ä½œã€‚åœ¨ ActionExecutionOperator ä¸­ï¼š</p>
<ul>
<li>æ¥æ”¶åˆ° InputEvent åï¼ŒæŸ¥æ‰¾å¹¶æ‰§è¡Œ start_action</li>
<li>start_action å‘é€ ChatRequestEvent</li>
<li>æŸ¥æ‰¾å¹¶æ‰§è¡Œå¤„ç† ChatRequestEvent çš„å†…ç½®åŠ¨ä½œï¼ˆå¦‚ CHAT_MODEL_ACTIONï¼‰</li>
<li>PythonActionTask æ‰§è¡Œå·¥å…·å‡½æ•°ï¼Œè‹¥ä¸ºç”Ÿæˆå™¨åˆ™åˆ›å»º PythonGeneratorActionTask æŒç»­æ‰§è¡Œï¼›</li>
<li>å·¥å…·æ‰§è¡Œå®Œæˆç”Ÿæˆ ChatResponseEvent</li>
<li>æŸ¥æ‰¾å¹¶æ‰§è¡Œ stop_action</li>
<li>stop_action äº§ç”Ÿ OutputEvent å¹¶å‘é€åˆ°ä¸‹æ¸¸</li>
</ul>
</li>
</ul>
<p>è¿™ç§è®¾è®¡å®ç°äº†å…³æ³¨ç‚¹åˆ†ç¦»ï¼šç”¨æˆ·åªéœ€å…³æ³¨ä¸šåŠ¡é€»è¾‘å®šä¹‰ï¼Œæ¡†æ¶è´Ÿè´£å°†å…¶ç¼–è¯‘ä¸ºé«˜æ•ˆçš„è¿è¡Œæ—¶æ‰§è¡Œè®¡åˆ’ã€‚</p>
<h3 data-id="heading-13">0x02 ä¸åŸç”ŸFlinkæ¯”å¯¹</h3>
<p>Flink Agents æ˜¯åŸç”Ÿ Flink çš„ â€œé¢†åŸŸå°è£…â€ï¼šæ‰€æœ‰ç»„ä»¶éƒ½èƒ½æ˜ å°„åˆ°åŸç”Ÿ Flink æ ¸å¿ƒç»„ä»¶ï¼Œæœªè„±ç¦» Flink æµå¤„ç†çš„æ ¸å¿ƒæ¶æ„ã€‚æˆ‘ä»¬æ¥ä¸‹æ¥çœ‹çœ‹ Flink Agents é‡Œçš„ Agentã€AgentPlanã€ActionExecutionOperatorã€ActionTask è¿™äº›æ ¸å¿ƒç»„ä»¶ï¼Œåˆ†åˆ«å¯¹åº”åŸç”Ÿ Flink ä¸­çš„å“ªäº›æ ¸å¿ƒç»„ä»¶ï¼Œä»¥åŠå®ƒä»¬çš„ç›¸ä¼¼æ€§é€»è¾‘ã€‚</p>
<h4 data-id="heading-14">2.1 æ ¸å¿ƒ</h4>
<p>æˆ‘ä»¬å…ˆç”¨ä¸€å¼ è¡¨æ¥æ¦‚æ‹¬æ¯”å¯¹å…³ç³»ã€‚</p>






























<table><thead><tr><th>Flink Agents ç»„ä»¶</th><th>åŸç”Ÿ Flink å¯¹åº”ç»„ä»¶</th><th>æ ¸å¿ƒè§’è‰²</th></tr></thead><tbody><tr><td>Agent</td><td>StreamGraph / ç”¨æˆ· DataStream ä»£ç </td><td>é«˜å±‚ä¸šåŠ¡é€»è¾‘å£°æ˜ï¼ˆåšä»€ä¹ˆï¼‰</td></tr><tr><td>AgentPlan</td><td>JobGraph</td><td>ç¼–è¯‘åçš„å¯æ‰§è¡Œè®¡åˆ’ï¼ˆæ€ä¹ˆæ‹†ï¼‰</td></tr><tr><td>ActionExecutionOperator</td><td>KeyedProcessOperator/StreamOperator</td><td>è¿è¡Œæ—¶æ ¸å¿ƒæ‰§è¡Œç®—å­ï¼ˆæ ¸å¿ƒè½½ä½“ï¼‰</td></tr><tr><td>ActionTask</td><td>ç®—å­å†…å¤„ç†å•å…ƒ / AsyncFunction ä»»åŠ¡</td><td>åŸå­æ‰§è¡Œä»»åŠ¡ï¼ˆæœ€å°æ‰§è¡Œå•å…ƒï¼‰</td></tr></tbody></table>
<p>æ ¸å¿ƒæ˜ å°„é€»è¾‘å¦‚ä¸‹ï¼šã€Œå£°æ˜å±‚ï¼ˆAgentï¼‰â†’ ç¼–è¯‘å±‚ï¼ˆAgentPlanï¼‰â†’ æ‰§è¡Œç®—å­ï¼ˆActionExecutionOperatorï¼‰â†’ åŸå­ä»»åŠ¡ï¼ˆActionTaskï¼‰ã€å¯¹åº”åŸç”Ÿ Flink çš„ã€ŒStreamGraph â†’ JobGraph â†’ StreamOperator â†’ ç®—å­å†…å¤„ç†å•å…ƒã€ï¼›</p>
<p>å›åˆ° â€œåšä¸€é“èœâ€ ï¼Œæˆ‘ä»¬è¿›è¡Œåˆ†æ‹†å¯¹æ¯”ã€‚</p>
<ul>
<li>Agent = ä½ å†™çš„ â€œèœè°±é€»è¾‘â€ï¼ˆæ¯”å¦‚ â€œåšç•ªèŒ„ç‚’è›‹ï¼Œå…ˆç‚’è›‹å†ç‚’ç•ªèŒ„â€ï¼‰â†’ å¯¹åº” Flink StreamGraphï¼ˆçº¯é€»è¾‘ï¼‰ï¼›</li>
<li>AgentPlan = é¤å…åå¨æŠŠèœè°±è½¬æ¢æˆçš„ â€œå¯æ‰§è¡Œå·¥å•â€ï¼ˆæ˜ç¡® â€œè°æ¥ç‚’ã€ç”¨å“ªä¸ªé”…ã€æ”¾å¤šå°‘ç›â€ï¼‰â†’ å¯¹åº” Flink JobGraphï¼ˆå¯æ‰§è¡Œè®¡åˆ’ï¼‰ï¼›</li>
<li>ActionExecutionOperator = æŒå‹ºå¨å¸ˆï¼ˆæ‰§è¡Œå·¥å•ï¼‰â†’ å¯¹åº” Flink StreamOperatorï¼›</li>
<li>ActionTask = å¨å¸ˆçš„ â€œå•ä¸ªç¿»ç‚’åŠ¨ä½œâ€â†’ å¯¹åº” Flink ç®—å­å†…çš„åŸå­å¤„ç†ä»»åŠ¡ï¼›</li>
<li>Flink ExecutionGraph = å¨å¸ˆå®é™…ç«™åœ¨å“ªä¸ªç¶å°ã€ç”¨å“ªå¥—å¨å…· â†’ ç‰©ç†æ‰§è¡Œå±‚ï¼Œå’Œ AgentPlan æ— å…³ã€‚</li>
</ul>
<h4 data-id="heading-15">2.2 å…·ä½“æ¯”å¯¹</h4>
<h5 data-id="heading-16">2.2.1 Agent</h5>
<ul>
<li><strong>ç›¸ä¼¼ç»„ä»¶</strong>ï¼šFlink Job çš„ä¸šåŠ¡é€»è¾‘å®šä¹‰ï¼ˆå¦‚ DataStream ç®—å­é“¾ï¼‰ã€StreamGraphï¼ˆæµå¼ä½œä¸šçš„é€»è¾‘æ‹“æ‰‘ï¼‰</li>
<li><strong>ç›¸ä¼¼æ€§æ ¸å¿ƒ</strong>ï¼šAgent æ˜¯ç”¨æˆ·å®šä¹‰çš„ â€œæ™ºèƒ½å®ä½“â€ï¼ˆåŒ…å«ä¸šåŠ¡é€»è¾‘ã€åŠ¨ä½œã€èµ„æºï¼‰ï¼Œæœ¬è´¨æ˜¯ä¸šåŠ¡å±‚é¢çš„ â€œä½œä¸šé€»è¾‘å£°æ˜â€ï¼›è¿™å’ŒåŸç”Ÿ Flink ä¸­ç”¨æˆ·ç¼–å†™çš„ DataStream ä»£ç ï¼ˆå®šä¹‰ â€œæ•°æ®æ€ä¹ˆå¤„ç†â€ï¼‰ã€StreamGraphï¼ˆæè¿°é€»è¾‘æ‹“æ‰‘ï¼‰çš„è§’è‰²å®Œå…¨ä¸€è‡´ â€”â€” éƒ½æ˜¯ â€œå‘Šè¯‰ç³»ç»Ÿè¦åšä»€ä¹ˆâ€ çš„é¡¶å±‚é€»è¾‘å®šä¹‰ï¼Œä¸æ¶‰åŠå…·ä½“æ‰§è¡Œã€‚</li>
<li><strong>å·®å¼‚</strong>ï¼šAgent æ›´èšç„¦ â€œAgent è¡Œä¸º / å·¥å…·è°ƒç”¨â€ çš„è¯­ä¹‰ï¼Œè€ŒåŸç”Ÿ StreamGraph æ˜¯é€šç”¨çš„æ•°æ®æµæ‹“æ‰‘ã€‚</li>
</ul>
<h5 data-id="heading-17">2.2.2 AgentPlan</h5>
<ul>
<li><strong>ç›¸ä¼¼ç»„ä»¶</strong>ï¼šFlink çš„ JobGraphï¼ˆStreamGraph ç¼–è¯‘åçš„å¯æ‰§è¡Œæ‹“æ‰‘ï¼‰</li>
<li><strong>ç›¸ä¼¼æ€§æ ¸å¿ƒ</strong>ï¼šAgentPlan æ˜¯ Agent ç¼–è¯‘åçš„ â€œå¯æ‰§è¡Œè®¡åˆ’â€ï¼ˆæ˜ç¡®åŠ¨ä½œè§¦å‘è§„åˆ™ã€èµ„æºæ˜ å°„ï¼‰ï¼Œæœ¬è´¨æ˜¯å°†é«˜å±‚ä¸šåŠ¡é€»è¾‘è½¬æ¢ä¸ºç³»ç»Ÿå¯è¯†åˆ«çš„æ‰§è¡Œè®¡åˆ’ï¼›è¿™å’ŒåŸç”Ÿ Flink ä¸­ StreamGraph ç¼–è¯‘ä¸º JobGraph çš„è¿‡ç¨‹ä¸€è‡´ â€”â€”JobGraph æŠŠç”¨æˆ·çš„é€»è¾‘æ‹“æ‰‘è½¬æ¢ä¸ºåŒ…å«å¹¶è¡Œåº¦ã€ç®—å­é“¾ã€ä¸­é—´ç»“æœä¼ é€’çš„å¯æ‰§è¡Œæ‹“æ‰‘ï¼ŒAgentPlan åˆ™æŠŠ Agent çš„ â€œè¡Œä¸ºè§„åˆ™â€ è½¬æ¢ä¸ºç³»ç»Ÿå¯è°ƒåº¦çš„ â€œåŠ¨ä½œæ‰§è¡Œè§„åˆ™â€ã€‚</li>
<li><strong>å…³é”®å…±æ€§</strong>ï¼šéƒ½æ˜¯ â€œç¼–è¯‘å±‚â€ äº§ç‰©ï¼Œè¿æ¥é«˜å±‚å®šä¹‰ä¸åº•å±‚æ‰§è¡Œã€‚</li>
</ul>
<h5 data-id="heading-18">2.2.3 ActionExecutionOperator</h5>
<ul>
<li>
<p><strong>ç›¸ä¼¼ç»„ä»¶</strong>ï¼šFlink æ ¸å¿ƒçš„ StreamOperatorï¼ˆå¦‚ ProcessOperatorã€FlatMapOperatorï¼‰ã€KeyedProcessOperator</p>
</li>
<li>
<p><strong>ç›¸ä¼¼æ€§æ ¸å¿ƒ</strong>ï¼šActionExecutionOperator æ˜¯ Flink é›†ç¾¤ä¸­æ‰§è¡Œ Agent é€»è¾‘çš„æ ¸å¿ƒç®—å­ï¼Œæœ¬è´¨æ˜¯è¿è¡Œæ—¶çš„æ ¸å¿ƒæ‰§è¡Œå•å…ƒï¼›è¿™å’ŒåŸç”Ÿ Flink çš„ StreamOperator å®Œå…¨å¯¹åº” â€”â€”StreamOperator æ˜¯å¤„ç†æ•°æ®æµçš„æ ¸å¿ƒè½½ä½“ï¼ˆå¦‚ ProcessOperator å¤„ç† KeyedStreamã€å®ç°çŠ¶æ€ç®¡ç†ï¼‰ï¼ŒActionExecutionOperator å°±æ˜¯é’ˆå¯¹ â€œAgent åŠ¨ä½œæ‰§è¡Œâ€ åœºæ™¯å®šåˆ¶çš„ StreamOperatorï¼š</p>
<ul>
<li>éƒ½è¿è¡Œåœ¨ TaskManager ä¸­ï¼Œå¤„ç†æµæ•°æ®ï¼ˆEventï¼‰ï¼›</li>
<li>éƒ½æ”¯æŒé”®æ§çŠ¶æ€ï¼ˆKeyed Stateï¼‰ï¼ŒæŒ‰ key éš”ç¦»æ‰§è¡Œä¸Šä¸‹æ–‡ï¼›</li>
<li>éƒ½ä¾èµ– Mailbox æœºåˆ¶è°ƒåº¦ä»»åŠ¡ï¼Œé¿å…é˜»å¡ï¼›</li>
<li>éƒ½è´Ÿè´£çŠ¶æ€ç®¡ç†ã€äº‹ä»¶å¤„ç†ã€ç»“æœè¾“å‡ºã€‚</li>
</ul>
</li>
<li>
<p><strong>å…¸å‹å¯¹åº”</strong>ï¼šActionExecutionOperator æœ€æ¥è¿‘åŸç”Ÿçš„ <code>KeyedProcessOperator</code>ï¼ˆé”®æ§å¤„ç†ã€çŠ¶æ€ç®¡ç†ã€å¼‚æ­¥ä»»åŠ¡è°ƒåº¦ï¼‰ã€‚</p>
</li>
</ul>
<h5 data-id="heading-19">2.2.3 ActionTask</h5>
<ul>
<li>
<p><strong>ç›¸ä¼¼ç»„ä»¶</strong>ï¼šFlink çš„ã€Œç®—å­å†…çš„å¤„ç†ä»»åŠ¡ã€ï¼ˆå¦‚ ProcessFunction ä¸­çš„å•ä¸ªå…ƒç´ å¤„ç†é€»è¾‘ï¼‰ã€Async I/O ä¸­çš„ <code>AsyncFunction</code> ä»»åŠ¡</p>
</li>
<li>
<p><strong>ç›¸ä¼¼æ€§æ ¸å¿ƒ</strong>ï¼šActionTask æ˜¯ â€œæœ€å°æ‰§è¡Œå•å…ƒâ€ï¼ˆå¦‚å•ä¸ª Python/Java åŠ¨ä½œæ‰§è¡Œï¼‰ï¼Œæœ¬è´¨æ˜¯ç®—å­å†…çš„åŸå­å¤„ç†ä»»åŠ¡ï¼›è¿™å’ŒåŸç”Ÿ Flink ä¸­ï¼š</p>
<ul>
<li>ProcessOperator å¤„ç†å•ä¸ª StreamElementï¼ˆå¦‚ä¸€æ¡æ•°æ®ï¼‰çš„é€»è¾‘å•å…ƒï¼›</li>
<li>Async I/O ä¸­ AsyncFunction å°è£…çš„å¼‚æ­¥ä»»åŠ¡ï¼ˆå¦‚å¼‚æ­¥æŸ¥è¯¢æ•°æ®åº“ï¼‰ï¼›</li>
</ul>
<p>è§’è‰²å®Œå…¨ä¸€è‡´ â€”â€” éƒ½æ˜¯ â€œç®—å­å†…çš„æœ€å°å¯æ‰§è¡Œä»»åŠ¡â€ï¼Œæ‰§è¡Œå®Œæˆåè¿”å›ç»“æœï¼Œæ”¯æŒå¼‚æ­¥ / åˆ†é˜¶æ®µæ‰§è¡Œã€‚</p>
</li>
<li>
<p><strong>å…³é”®å…±æ€§</strong>ï¼š</p>
<ul>
<li>éƒ½æ˜¯ â€œåŸå­æ‰§è¡Œå•å…ƒâ€ï¼Œä¸å¯å†æ‹†åˆ†ï¼›</li>
<li>æ”¯æŒå¼‚æ­¥æ‰§è¡Œï¼ˆå¦‚ PythonActionTask å¯¹åº” Async I/Oï¼‰ï¼›</li>
<li>æ‰§è¡Œç»“æœå¯è§¦å‘åç»­ä»»åŠ¡ï¼ˆå¦‚ ActionTaskResult ç”Ÿæˆæ–°ä»»åŠ¡ï¼Œå¯¹åº” Async I/O å›è°ƒè§¦å‘åç»­å¤„ç†ï¼‰ã€‚</li>
</ul>
</li>
<li>
<p><strong>ç»†åˆ†å¯¹åº”</strong>ï¼š</p>
<ul>
<li>JavaActionTask â†’ åŸç”ŸåŒæ­¥å¤„ç†ä»»åŠ¡ï¼ˆå¦‚ ProcessFunction ä¸­çš„åŒæ­¥é€»è¾‘ï¼‰ï¼›</li>
<li>PythonActionTask â†’ åŸç”Ÿ Async I/O ä»»åŠ¡ï¼ˆå¼‚æ­¥è°ƒç”¨å¤–éƒ¨æœåŠ¡ / è„šæœ¬ï¼‰ã€‚</li>
</ul>
</li>
</ul>
<h3 data-id="heading-20">0x03 å®ä¾‹æ‹†è§£</h3>
<p>æˆ‘ä»¬æ¥è¿›ä¸€æ­¥è§£é‡Š Flink Agents è¿™å‡ ä¸ªæ ¸å¿ƒæ¦‚å¿µçš„å…³ç³»å’Œé…åˆã€‚ä¸ºäº†æ›´å¥½çš„è¯´æ˜ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠæ•´ä¸ªFlink Agentsç³»ç»Ÿä»â€åšä¸€é“èœâ€œæ‹“å±•åˆ°â€ä¸€ä¸ªæ™ºèƒ½é¤å…è‡ªåŠ¨åŒ–æœåŠ¡ç³»ç»Ÿâ€œã€‚åŒæ—¶ï¼Œç»“åˆå®ä¾‹ä¹Ÿæ·±å…¥ä¸‹æŠ€æœ¯ç»†èŠ‚ã€‚</p>
<h4 data-id="heading-21">3.1 ç¬¬ä¸€å±‚çº§ï¼šAgent â€“ é¤å…èœå•å’Œè§„åˆ™æ‰‹å†Œï¼ˆBlueprintï¼‰</h4>
<p>Flink Agents ä¸­çš„ Agent æ˜¯ç”¨æˆ·å®šä¹‰çš„æ™ºèƒ½å®ä½“ï¼Œè´Ÿè´£åè°ƒå„ç§èµ„æºå’Œè¡Œä¸ºæ¥å®Œæˆç‰¹å®šçš„ä»»åŠ¡ã€‚æˆ‘ä»¬æŠŠ Agent æƒ³è±¡æˆé¤å…çš„èœå•å’Œè¿è¥æ‰‹å†Œï¼š</p>
<ul>
<li>
<p>å®šä¹‰äº†é¤å…èƒ½æä¾›å“ªäº›èœå“å’ŒæœåŠ¡ï¼ˆåŠ¨ä½œï¼‰</p>
</li>
<li>
<p>è§„å®šäº†éœ€è¦ç”¨åˆ°å“ªäº›è®¾å¤‡å’Œé£Ÿæï¼ˆèµ„æºï¼‰ï¼Œå¦‚åŒä¸ºæ–°å‘˜å·¥é…å¤‡å·¥å…·ç®±ï¼Œå¯¹åº”ç¨‹åºå‘˜å®é™…ç”¨åˆ°çš„ï¼Œå¯ä»¥æ˜¯ï¼š</p>
<ul>
<li>å„ç§ API æ¥å£ï¼ˆç›¸å½“äºå·¥å…·ï¼‰</li>
<li>æ•°æ®åº“è®¿é—®æƒé™ï¼ˆç›¸å½“äºå‚è€ƒèµ„æ–™ï¼‰</li>
<li>å†³ç­–é€»è¾‘ä»£ç ï¼ˆç›¸å½“äºåŸ¹è®­ææ–™ï¼‰</li>
</ul>
</li>
<li>
<p>é‡åˆ°ä»€ä¹ˆæƒ…å†µåº”è¯¥åšä»€ä¹ˆï¼ˆå¯¹åº”äº‹ä»¶ç›‘å¬ï¼‰</p>
</li>
<li>
<p>æè¿°äº†é¡¾å®¢ç‚¹é¤åˆ°ä¸Šèœçš„å®Œæ•´æµç¨‹</p>
<ul>
<li>æœ‰ä¸€ä¸ª start_actionï¼ˆæ¥å¾…å‘˜ï¼‰è´Ÿè´£æ¥æ”¶é¡¾å®¢é—®é¢˜</li>
<li>æœ‰ä¸€ä¸ª stop_actionï¼ˆæ”¶é“¶å‘˜ï¼‰è´Ÿè´£æœ€ç»ˆç»“è´¦è¾“å‡ºç»“æœ</li>
</ul>
</li>
</ul>
<p>è¿™äº›éƒ½è¢«å°è£…åœ¨ Agent å¯¹è±¡ä¸­ã€‚</p>
<h4 data-id="heading-22">3.2 ç¬¬äºŒå±‚çº§ï¼šAgentPlan â€“ é¤å…çš„è¯¦ç»†æ“ä½œæµç¨‹å›¾ï¼ˆCompiled Plan,è®¡åˆ’ç¼–è¯‘å±‚ï¼‰</h4>
<p>Flink Agentæ¡†æ¶ä¼šæŠŠç”¨æˆ·çš„ Agent è½¬æ¢ä¸ºä¸€ä¸ªæ›´é€šç”¨ã€æ›´é€‚åˆç³»ç»Ÿå¤„ç†çš„å½¢å¼ â€”â€” AgentPlanã€‚åœ¨æœ¬ä¾‹ä¸­ï¼ŒAgentPlan ç›¸å½“äºå°†é¤å…è¿è¥æ‰‹å†Œç¼–è¯‘æˆçš„è¯¦ç»†å·¥ä½œæµç¨‹å›¾ï¼ˆæŠ½è±¡åŒ–çš„å·¥ä½œè“å›¾ï¼‰ï¼š</p>
<ul>
<li>æŠŠèœå•ä¸Šçš„æ¯é“èœåˆ†è§£æˆå…·ä½“çš„æ­¥éª¤</li>
<li>æ˜ç¡®æ¯ä¸ªå²—ä½ï¼ˆåŠ¨ä½œï¼‰åœ¨ä»€ä¹ˆæƒ…å†µä¸‹è¢«è§¦å‘ï¼Œå³é‡åˆ°å•¥äº‹ä»¶ï¼ˆEventï¼‰è¯¥å¹²å•¥æ´»ï¼ˆActionï¼‰</li>
<li>å‡†å¤‡å¥½æ‰€æœ‰éœ€è¦çš„å·¥å…·å’Œææ–™æ¸…å•ï¼ˆResourceï¼‰</li>
</ul>
<p>å°±åƒé¤å…ç»ç†ä¼šåˆ¶å®šè¯¦ç»†çš„æ“ä½œæ‰‹å†Œï¼Œå‘Šè¯‰æœåŠ¡å‘˜ä»€ä¹ˆæ—¶å€™è¯¥åšä»€ä¹ˆäº‹ã€‚</p>
<h5 data-id="heading-23">ç»“æ„åŒ–è§£æ</h5>
<p>AgentPlan åŒ…å«å‡ ä¸ªå…³é”®éƒ¨åˆ†ï¼š</p>
<p><strong>Actions æ˜ å°„è¡¨</strong></p>
<ul>
<li>æ˜ç¡®åˆ—å‡ºæ‰€æœ‰å¯ä»¥æ‰§è¡Œçš„åŠ¨ä½œåŠå…¶è§¦å‘æ¡ä»¶</li>
<li>ä¾‹å¦‚ï¼šâ€œæ”¶åˆ°è®¢å•æŸ¥è¯¢è¯·æ±‚â€ â†’ â€œæ‰§è¡Œè®¢å•æŸ¥è¯¢åŠ¨ä½œâ€</li>
</ul>
<p><strong>èµ„æºæä¾›è€…ç›®å½•</strong></p>
<ul>
<li>è®°å½•æ‰€æœ‰å¯ç”¨èµ„æºçš„ä½ç½®å’Œè·å–æ–¹å¼</li>
<li>ç±»ä¼¼äºå·¥å‚é‡Œå„ä¸ªä¾›åº”éƒ¨é—¨çš„è”ç³»æ–¹å¼æ¸…å•</li>
</ul>
<p><strong>é…ç½®å‚æ•°é›†</strong></p>
<ul>
<li>å­˜å‚¨è¿è¡Œæ‰€éœ€çš„å„é¡¹è®¾ç½®é€‰é¡¹</li>
<li>åƒæ˜¯è®¾å¤‡æ“ä½œè§„ç¨‹å’ŒæŠ€æœ¯è§„èŒƒ</li>
</ul>
<h5 data-id="heading-24">å¹³å°é€‚é…æ€§</h5>
<p>é€šè¿‡è¿™ç§æŠ½è±¡åŒ–ï¼Œæ— è®ºåº•å±‚æ˜¯ Java è¿˜æ˜¯ Python å®ç°ï¼Œéƒ½å¯ä»¥ç»Ÿä¸€ç”¨åŒä¸€ä»½ AgentPlan æ¥è¿›è¡Œè°ƒåº¦ç®¡ç†ã€‚</p>
<h4 data-id="heading-25">3.3 ç¬¬ä¸‰å±‚çº§ï¼šActionExecutionOperator â€“ é¤å…çš„æ‰§è¡Œç®¡ç†å±‚ï¼ˆRuntime Executorï¼Œæ‰§è¡Œå¼•æ“å±‚ï¼‰</h4>
<p>åœ¨å¤§è§„æ¨¡ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œä¸èƒ½åªé ä¸€ä¸ªç®¡å®¶å¹²æ´»ï¼Œè€Œæ˜¯éœ€è¦ä¸€æ¡è‡ªåŠ¨åŒ–æµæ°´çº¿ã€‚ActionExecutionOperator å°±åƒæ˜¯ä¸€æ¡æ™ºèƒ½åŒ–çš„å·¥å‚è£…é…çº¿ï¼Œå®ƒæŒ‰ç…§æ“ä½œæ‰‹å†Œï¼ˆAgentPlanï¼‰ç»„ç»‡å¤šä¸ªå·¥ä½œç«™æ¥ååŒå®Œæˆä»»åŠ¡ã€‚æˆ–è€…è¯´ï¼ŒActionExecutionOperator æ˜¯é¤å…çš„ç°åœºæ‰§è¡Œç®¡ç†å±‚ï¼Œæ˜¯æ•´ä¸ªç³»ç»Ÿçš„â€œå¤§è„‘ + ä¸­æ¢æ§åˆ¶å®¤â€ï¼š</p>
<ul>
<li>è´Ÿè´£æ¥å¾…è¿›åº—çš„é¡¾å®¢ï¼ˆæ¥æ”¶æ•°æ®ï¼‰</li>
<li>æ ¹æ®æµç¨‹å›¾åˆ†é…ä»»åŠ¡ç»™ä¸åŒçš„å‘˜å·¥ï¼ˆæ‰§è¡ŒåŠ¨ä½œï¼‰</li>
<li>åè°ƒå„ä¸ªå²—ä½ä¹‹é—´çš„å·¥ä½œï¼ˆç›‘æ§è¿›åº¦çŠ¶æ€ / ç®¡ç†çŠ¶æ€å’Œå†…å­˜ï¼‰</li>
<li>ç¡®ä¿æœåŠ¡æµç¨‹é¡ºç•…ï¼ˆå¤„ç†å¹¶å‘å’Œå®¹é”™ï¼‰</li>
<li>é¤å…ç»ç†æ‹¿ç€è¯¦ç»†æµç¨‹å›¾ï¼ŒæŒ‡æŒ¥å„ä¸ªå‘˜å·¥ååŒå·¥ä½œã€‚</li>
</ul>
<h4 data-id="heading-26">3.4 ç¬¬å››å±‚çº§ï¼šActionTask â€“ å…·ä½“çš„æœåŠ¡æ­¥éª¤ï¼ˆExecution Unitï¼‰</h4>
<p>ActionTask å°±åƒæ˜¯å‘˜å·¥æ‰§è¡Œçš„å…·ä½“æœåŠ¡æ­¥éª¤ï¼Œæ˜¯ç”Ÿäº§çº¿ä¸Šçš„æœ€å°å·¥ä½ï¼šä¸€æ¬¡åªå¹²ä¸€ä»¶å…·ä½“æ´»ï¼ˆè°ƒç”¨ Python å‡½æ•°ã€æŸ¥æ•°æ®åº“ã€å‘ HTTPã€å†™ Kafka â€¦ï¼‰ï¼š</p>
<ul>
<li>æ¯ä¸ªæœåŠ¡å‘˜æ¥åˆ°çš„ä»»åŠ¡å°±æ˜¯ä¸€ä¸ª ActionTask</li>
<li>å¯èƒ½æ˜¯ç®€å•ä¸€æ­¥å®Œæˆï¼ˆæ™®é€šæœåŠ¡å‘˜ï¼‰</li>
<li>å¯èƒ½æ˜¯éœ€è¦å¤šæ­¥å®Œæˆï¼ˆéœ€è¦å›è®¿çš„æŠ€æœ¯å‘˜ï¼‰ï¼Œå³å¦‚æœæ´»å¤ªå¤šï¼ˆå¼‚æ­¥ã€é•¿è€—æ—¶ï¼‰ï¼ŒæœåŠ¡å‘˜ä¼šæŠŠè‡ªå·±ã€Œåˆ‡åˆ†ã€æˆæ–°ä»»åŠ¡ï¼Œç­‰ä¸‹æ¬¡è½®è¯¢å†æ¥ç€å¹²ï¼Œå®ç°éé˜»å¡çš„åä½œå¼è°ƒåº¦ã€‚</li>
<li>å®ŒæˆåæŠ¥å‘Šç»“æœï¼Œå¹¶å¯èƒ½è§¦å‘ä¸‹ä¸€æ­¥å·¥ä½œï¼Œå³å¹²å®Œå°±èƒ½ç«‹å³æŠŠç»“æœï¼ˆEventï¼‰æ‰”å›ä¼ é€å¸¦ï¼Œç»§ç»­ä¸‹ä¸€è½®</li>
</ul>
<h4 data-id="heading-27">3.5 å·¥ä½œæµç¨‹ä¸¾ä¾‹</h4>
<p>å‡è®¾é¡¾å®¢æ¥åˆ°é¤å…ç‚¹äº†ä¸€ä»½å¤æ‚çš„å¥—é¤ï¼š</p>
<ul>
<li>
<p>é¡¾å®¢è¿›åº—ï¼ˆInputEventï¼‰</p>
<ul>
<li>é¤å…ç»ç†ï¼ˆActionExecutionOperatorï¼‰æ¥å¾…é¡¾å®¢</li>
<li>æ ¹æ®æµç¨‹å›¾çŸ¥é“åº”è¯¥è®©æ¥å¾…å‘˜ï¼ˆstart_actionï¼‰å¤„ç†</li>
</ul>
</li>
<li>
<p>æ¥å¾…å‘˜å¤„ç†ï¼ˆActionTaskï¼‰</p>
<ul>
<li>æ¥å¾…å‘˜ï¼ˆPythonActionTaskï¼‰æ¥åˆ°ä»»åŠ¡</li>
<li>ç†è§£é¡¾å®¢éœ€æ±‚ï¼Œç”Ÿæˆå¨æˆ¿è®¢å•ï¼ˆChatRequestEventï¼‰</li>
</ul>
</li>
<li>
<p>å¨æˆ¿åˆ¶ä½œï¼ˆå†…ç½®åŠ¨ä½œï¼‰</p>
<ul>
<li>å¨å¸ˆï¼ˆCHAT_MODEL_ACTIONï¼‰æ”¶åˆ°è®¢å•å¼€å§‹åˆ¶ä½œ</li>
<li>åˆ¶ä½œå®Œæˆåé€šçŸ¥æœåŠ¡å‘˜ï¼ˆChatResponseEventï¼‰</li>
</ul>
</li>
<li>
<p>æ”¶é“¶ç»“è´¦ï¼ˆActionTaskï¼‰</p>
<ul>
<li>æ”¶é“¶å‘˜ï¼ˆstop_actionï¼‰å¤„ç†æœ€ç»ˆç»“æœ</li>
<li>é¡¾å®¢æ‰“åŒ…å¸¦èµ°ï¼ˆOutputEventï¼‰</li>
</ul>
</li>
</ul>
<p>ã€Œç”¨æˆ·åªç®¡æŠŠç®¡å®¶è®­å¥½ï¼Œæ¡†æ¶è´Ÿè´£æŠŠç®¡å®¶å˜æˆæ‰‹å†Œï¼Œå†æŠŠæ‰‹å†Œå˜æˆå¹¶è¡Œç”Ÿäº§çº¿ï¼Œæœ€åè®©æ— æ•°workeræŒ‰ key éš”ç¦»ã€äº‹ä»¶é©±åŠ¨ã€å¯æ£€æŸ¥ç‚¹çš„æ–¹å¼è·‘åœ¨ Flink ä¸Šã€‚ã€ã€‚</p>
<h3 data-id="heading-28">0x04 å¹¶å‘æ€§å’Œå¹¶è¡Œæ€§</h3>
<p>Flink Agents ç³»ç»Ÿåœ¨è®¾è®¡æ—¶å·²ç»å……åˆ†è€ƒè™‘äº†å¹¶å‘æ€§å’Œå¹¶è¡Œæ€§ï¼Œæ¯”å¦‚ï¼š</p>
<ul>
<li><strong>äº‹ä»¶é©±åŠ¨æ¨¡å‹</strong>ï¼šåŸºäºäº‹ä»¶æµè½¬è§¦å‘åŠ¨ä½œï¼Œåˆå§‹ä¸º InputEventï¼Œç»å¤šè½®äº‹ä»¶ï¼ˆå¦‚ ChatRequestEventã€ChatResponseEventï¼‰è§¦å‘ï¼Œæœ€ç»ˆè¾“å‡º OutputEventã€‚</li>
<li><strong>å¹¶å‘ä¸éš”ç¦»è®¾è®¡</strong>ï¼šåˆ©ç”¨ Flink é”®æ§æµï¼ˆKeyedStreamï¼‰å®ç°æŒ‰ key åˆ†åŒºï¼Œæ¯ä¸ª key æ‹¥æœ‰ç‹¬ç«‹çŠ¶æ€ï¼›é€šè¿‡é‚®ç®±çº¿ç¨‹æ¨¡å‹ï¼ˆMailboxExecutorï¼‰å®ç°åä½œå¼å¤šä»»åŠ¡ï¼Œé¿å…é˜»å¡ã€‚</li>
<li><strong>ä»»åŠ¡åˆ‡åˆ†æœºåˆ¶</strong>ï¼šé•¿æ—¶é—´è¿è¡Œçš„ä»»åŠ¡ï¼ˆå¦‚ Python ç”Ÿæˆå™¨ï¼‰ä¼šè¢«åˆ‡åˆ†ä¸ºå¤šä¸ª ActionTaskï¼Œæ‰§è¡Œåé€šè¿‡ ActionTaskResult ä¼ é€’ä¸‹ä¸€ä¸ªä»»åŠ¡ï¼Œç¡®ä¿å¹¶å‘æ•ˆç‡ã€‚</li>
<li><strong>æœ¬åœ°ä¸è¿œç¨‹æ‰§è¡Œ</strong>ï¼šæœ¬åœ°ç”¨ LocalRunner æ¨¡æ‹Ÿæ‰§è¡Œï¼Œè¿œç¨‹åŸºäº Flink é›†ç¾¤çš„ ActionExecutionOperator åˆ†å¸ƒå¼æ‰§è¡Œï¼Œä¿æŒ API ä¸€è‡´æ€§ã€‚</li>
</ul>
<p>ä»¥ä¸‹æ˜¯å…·ä½“å®ç°æ–¹å¼ï¼š</p>
<h4 data-id="heading-29">4.1 FlinkåŸç”Ÿå¹¶å‘æ¨¡å‹</h4>
<p>ç³»ç»Ÿå……åˆ†åˆ©ç”¨äº†Apache Flinkçš„åŸç”Ÿå¹¶å‘æœºåˆ¶ï¼š</p>
<ul>
<li>é”®æ§æµï¼ˆKeyed Streamsï¼‰ï¼šä½¿ç”¨Flinkçš„KeyedStreamæŒ‰keyå¯¹æ•°æ®è¿›è¡Œåˆ†åŒºï¼Œç¡®ä¿ç›¸åŒkeyçš„äº‹ä»¶ç”±åŒä¸€ä¸ªå¹¶è¡Œå®ä¾‹å¤„ç†</li>
<li>å¹¶è¡Œæ“ä½œç¬¦ï¼šActionExecutionOperatorå¯ä»¥åœ¨Flinké›†ç¾¤ä¸­çš„å¤šä¸ªå®ä¾‹ä¸Šå¹¶è¡Œè¿è¡Œ</li>
</ul>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">//Â åœ¨CompileUtils.javaä¸­Â -Â å°†ä»£ç†è¿æ¥åˆ°é”®æ§æµ</span>
<span class="hljs-keyword">public</span>Â <span class="hljs-keyword">static</span>Â <span class="hljs-operator">&lt;</span><span class="hljs-type">IN</span>,Â <span class="hljs-type">K</span><span class="hljs-operator">&gt;</span>Â <span class="hljs-type">DataStream</span>&lt;<span class="hljs-type">Object</span>&gt;Â connectToAgent(
Â Â Â Â <span class="hljs-type">DataStream</span>&lt;<span class="hljs-type">IN</span>&gt;Â inputStream,Â <span class="hljs-type">KeySelector</span>&lt;<span class="hljs-type">IN</span>,Â <span class="hljs-type">K</span>&gt;Â keySelector,Â <span class="hljs-type">AgentPlan</span>Â agentPlan)Â {
Â Â Â Â <span class="hljs-keyword">return</span>Â connectToAgent(inputStream.keyBy(keySelector),Â agentPlan);
}
</code></pre>
<p>åœ¨ RemoteExecutionEnvironment ä¸­æœ‰ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@Override</span>
<span class="hljs-keyword">public</span>Â <span class="hljs-title class_">DataStream</span>&lt;<span class="hljs-title class_">Object</span>&gt;Â <span class="hljs-title function_">toDataStream</span>(<span class="hljs-params"/>)Â {
Â Â Â Â <span class="hljs-keyword">if</span>Â (agentPlanÂ ==Â <span class="hljs-literal">null</span>)Â {
Â Â Â Â Â Â Â Â <span class="hljs-keyword">throw</span>Â <span class="hljs-keyword">new</span>Â <span class="hljs-title class_">IllegalStateException</span>(<span class="hljs-string">"MustÂ applyÂ agentÂ beforeÂ callingÂ toDataStream"</span>);
Â Â Â Â }

Â Â Â Â <span class="hljs-keyword">if</span>Â (outputDataStreamÂ ==Â <span class="hljs-literal">null</span>)Â {
Â Â Â Â Â Â Â Â <span class="hljs-keyword">if</span>Â (keySelectorÂ !=Â <span class="hljs-literal">null</span>)Â {
Â Â Â Â Â Â Â Â Â Â Â Â outputDataStreamÂ =
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-title class_">CompileUtils</span>.<span class="hljs-title function_">connectToAgent</span>(inputDataStream,Â keySelector,Â agentPlan);
Â Â Â Â Â Â Â Â }Â <span class="hljs-keyword">else</span>Â {
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â IfÂ noÂ keyÂ selectorÂ provided,Â useÂ aÂ simpleÂ pass-throughÂ keyÂ selector</span>
Â Â Â Â Â Â Â Â Â Â Â Â outputDataStreamÂ =
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-title class_">CompileUtils</span>.<span class="hljs-title function_">connectToAgent</span>(inputDataStream,Â xÂ -&gt;Â x,Â agentPlan);
Â Â Â Â Â Â Â Â }
Â Â Â Â }

Â Â Â Â <span class="hljs-keyword">return</span>Â outputDataStream;
}
</code></pre>
<h4 data-id="heading-30">4.2 æ¯ä¸ªKeyçš„çŠ¶æ€ç®¡ç†</h4>
<p>æ¯ä¸ªkeyéƒ½ç»´æŠ¤ç‹¬ç«‹çš„çŠ¶æ€éš”ç¦»ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">//Â åœ¨ActionExecutionOperator.javaä¸­Â -Â ç»´æŠ¤æ¯ä¸ªkeyçš„çŠ¶æ€</span>
<span class="hljs-keyword">private</span>Â <span class="hljs-keyword">transient</span>Â ListState&lt;ActionTask&gt;Â actionTasksKState;
<span class="hljs-keyword">private</span>Â <span class="hljs-keyword">transient</span>Â ListState&lt;Event&gt;Â pendingInputEventsKState;
<span class="hljs-keyword">private</span>Â <span class="hljs-keyword">transient</span>Â ValueState&lt;Long&gt;Â sequenceNumberKState;
</code></pre>
<p>è¿™äº›éƒ½æ˜¯é”®æ§çŠ¶æ€ï¼ˆkeyed stateï¼‰ï¼Œæ„å‘³ç€æ¯ä¸ªkeyéƒ½æœ‰è‡ªå·±çš„ç‹¬ç«‹çŠ¶æ€å®ä¾‹ï¼Œé˜²æ­¢ä¸åŒkeyä¹‹é—´çš„ç«äº‰æ¡ä»¶ã€‚</p>
<h4 data-id="heading-31">4.3 é‚®ç®±çº¿ç¨‹æ¨¡å‹</h4>
<p>ç³»ç»Ÿä½¿ç”¨Flinkçš„é‚®ç®±çº¿ç¨‹æ¨¡å‹å®ç°åä½œå¼å¤šä»»åŠ¡å¤„ç†ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">//Â åœ¨ActionExecutionOperator.javaä¸­</span>
<span class="hljs-keyword">private</span>Â <span class="hljs-keyword">final</span>Â <span class="hljs-keyword">transient</span>Â MailboxExecutorÂ mailboxExecutor;

<span class="hljs-comment">//Â æäº¤ä»»åŠ¡è¿›è¡Œå¤„ç†</span>
mailboxExecutor.submit(()Â -&gt;Â tryProcessActionTaskForKey(key),Â <span class="hljs-string">"processÂ actionÂ task"</span>);
</code></pre>
<p>è¿™å…è®¸é•¿æ—¶é—´è¿è¡Œçš„æ“ä½œè®©å‡ºæ§åˆ¶æƒï¼Œé˜²æ­¢é˜»å¡æ•´ä¸ªæ“ä½œç¬¦ã€‚</p>
<h4 data-id="heading-32">4.4 å¼‚æ­¥ä»»åŠ¡å¤„ç†</h4>
<p>æ”¯æŒå¼‚æ­¥æ‰§è¡Œå¹¶å…·å¤‡é€‚å½“çš„çŠ¶æ€ç®¡ç†ï¼š</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">//Â åœ¨Â ActionTask.javaÂ ä¸­Â -Â æ”¯æŒåŸºäºå»¶ç»­çš„æ‰§è¡Œ</span>
<span class="hljs-keyword">public</span>Â <span class="hljs-keyword">class</span>Â <span class="hljs-title class_">ActionTaskResult</span>Â {
Â Â Â Â <span class="hljs-keyword">private</span>Â <span class="hljs-keyword">final</span>Â booleanÂ finished;
Â Â Â Â <span class="hljs-keyword">private</span>Â <span class="hljs-keyword">final</span>Â <span class="hljs-type">List</span>&lt;<span class="hljs-type">Event</span>&gt;Â outputEvents;
Â Â Â Â <span class="hljs-keyword">private</span>Â <span class="hljs-keyword">final</span>Â <span class="hljs-type">Optional</span>&lt;<span class="hljs-type">ActionTask</span>&gt;Â generatedActionTaskOpt;

Â Â Â Â <span class="hljs-comment">//Â å…è®¸ä¸€ä¸ªåŠ¨ä½œç”Ÿæˆå»¶ç»­ä»»åŠ¡</span>
Â Â Â Â <span class="hljs-keyword">public</span>Â <span class="hljs-type">Optional</span>&lt;<span class="hljs-type">ActionTask</span>&gt;Â getGeneratedActionTask()Â {
Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â generatedActionTaskOpt;
Â Â Â Â }
}
</code></pre>
<h4 data-id="heading-33">4.5 å†…å­˜ä¸€è‡´æ€§</h4>
<p>å…·æœ‰ç¼“å­˜çŠ¶æ€è®¿é—®çš„çº¿ç¨‹å®‰å…¨å†…å­˜ç®¡ç†ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">//Â åœ¨Â ActionExecutionOperator.javaÂ ä¸­</span>
<span class="hljs-keyword">private</span>Â <span class="hljs-built_in">void</span>Â <span class="hljs-title function_">createAndSetRunnerContext</span>(<span class="hljs-params">ActionTaskÂ actionTask</span>)Â {
Â Â Â Â <span class="hljs-comment">//Â æ­£ç¡®ç®¡ç†Â RunnerContextÂ çš„åˆ›å»ºå’Œé‡ç”¨</span>
Â Â Â Â <span class="hljs-keyword">if</span>Â (actionTask.<span class="hljs-title function_">getRunnerContext</span>()Â !=Â <span class="hljs-literal">null</span>)Â {
Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>;
Â Â Â Â }
Â Â Â Â <span class="hljs-comment">//Â ...Â åˆ›å»ºé€‚å½“çš„Â context</span>
}
</code></pre>
<h4 data-id="heading-34">4.6 æ°´å°å’Œäº‹ä»¶æ—¶é—´å¤„ç†</h4>
<p>å…·å¤‡å¹¶å‘æ„è¯†çš„æ°´å°å¤„ç†ï¼š</p>
<pre><code class="hljs language-java" lang="java">Â Â Â Â <span class="hljs-keyword">private</span>Â <span class="hljs-keyword">transient</span>Â SegmentedQueueÂ keySegmentQueue;
Â Â Â Â 
Â Â Â Â keySegmentQueueÂ =Â <span class="hljs-keyword">new</span>Â <span class="hljs-title class_">SegmentedQueue</span>();

Â Â Â Â <span class="hljs-meta">@Override</span>
Â Â Â Â <span class="hljs-keyword">public</span>Â <span class="hljs-keyword">void</span>Â <span class="hljs-title function_">processWatermark</span><span class="hljs-params">(WatermarkÂ mark)</span>Â <span class="hljs-keyword">throws</span>Â ExceptionÂ {
Â Â Â Â Â Â Â Â keySegmentQueue.addWatermark(mark);
Â Â Â Â Â Â Â Â processEligibleWatermarks();
Â Â Â Â }
</code></pre>
<h4 data-id="heading-35">4.7 æ£€æŸ¥ç‚¹å’Œæ¢å¤</h4>
<p>ç”¨äºå®¹é”™çš„çº¿ç¨‹å®‰å…¨çŠ¶æ€å¿«ç…§</p>
<pre><code class="hljs language-scss" lang="scss">Â Â Â Â <span class="hljs-keyword">@Override</span>
Â Â Â Â publicÂ voidÂ snapshotState(StateSnapshotContextÂ context)Â throwsÂ ExceptionÂ {
Â Â Â Â Â Â Â Â ifÂ (actionStateStoreÂ !=Â null)Â {
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-selector-tag">Object</span>Â recoveryMarkerÂ =Â actionStateStore<span class="hljs-selector-class">.getRecoveryMarker</span>();
Â Â Â Â Â Â Â Â Â Â Â Â ifÂ (recoveryMarkerÂ !=Â null)Â {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â recoveryMarkerOpState<span class="hljs-selector-class">.update</span>(List.of(recoveryMarker));
Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â }

Â Â Â Â Â Â Â Â HashMap&lt;<span class="hljs-selector-tag">Object</span>,Â Long&gt;Â keyToSeqNumÂ =Â newÂ HashMap&lt;&gt;();
Â Â Â Â Â Â Â Â <span class="hljs-built_in">getKeyedStateBackend</span>()
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-selector-class">.applyToAllKeys</span>(
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â VoidNamespace.INSTANCE,
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â VoidNamespaceSerializer.INSTANCE,
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â newÂ ValueStateDescriptor&lt;&gt;(MESSAGE_SEQUENCE_NUMBER_STATE_NAME,Â Long.class),
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â (key,Â state)Â -&gt;Â keyToSeqNum<span class="hljs-selector-class">.put</span>(key,Â state.value()));
Â Â Â Â Â Â Â Â checkpointIdToSeqNums<span class="hljs-selector-class">.put</span>(context.getCheckpointId(),Â keyToSeqNum);

Â Â Â Â Â Â Â Â super<span class="hljs-selector-class">.snapshotState</span>(context);
Â Â Â Â }
</code></pre>
<h4 data-id="heading-36">4.8 æ€»ç»“</h4>
<p>è®¾è®¡é‡‡ç”¨äº†å¤šç§å¹¶å‘æœºåˆ¶ï¼š</p>
<ul>
<li>Flinkå¹¶è¡Œå¤„ç†ï¼šåˆ©ç”¨FlinkåŸç”Ÿçš„å¹¶è¡Œæ€§å’Œé”®æ§æµ</li>
<li>æ¯ä¸ªKeyçš„éš”ç¦»ï¼šæ¯ä¸ªkeyç»´æŠ¤ç‹¬ç«‹çŠ¶æ€ï¼Œæ¶ˆé™¤keyä¹‹é—´çš„ç«äº‰</li>
<li>åä½œå¼çº¿ç¨‹ï¼šä½¿ç”¨é‚®ç®±æ‰§è¡Œå™¨å®ç°éé˜»å¡æ‰§è¡Œ</li>
<li>å¼‚æ­¥å»¶ç»­ï¼šé€šè¿‡ä»»åŠ¡é“¾æ”¯æŒé•¿æ—¶é—´è¿è¡Œçš„æ“ä½œ</li>
<li>çº¿ç¨‹å®‰å…¨çŠ¶æ€ç®¡ç†ï¼šå¯¹å…±äº«èµ„æºè¿›è¡Œé€‚å½“çš„åŒæ­¥</li>
<li>å®¹é”™æœºåˆ¶ï¼šæ£€æŸ¥ç‚¹æœºåˆ¶ç¡®ä¿æ•…éšœæƒ…å†µä¸‹çš„æ•°æ®ä¸€è‡´æ€§</li>
</ul>
<p>è¿™ç§æ–¹æ³•ä½¿ç³»ç»Ÿèƒ½å¤Ÿåœ¨ä¿æŒä¸€è‡´æ€§å’Œæ”¯æŒæ°´å¹³æ‰©å±•çš„åŒæ—¶å¤„ç†é«˜ååé‡ï¼Œå¯åœ¨ Flink é›†ç¾¤çš„å¤šä¸ªèŠ‚ç‚¹é—´æ‰©å±•ã€‚</p>
<h3 data-id="heading-37">0xFF å‚è€ƒ</h3>
<p>æœ¬æ–‡ä½¿ç”¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fmarkdown.com.cn" target="_blank" title="https://markdown.com.cn" ref="nofollow noopener noreferrer">markdown.com.cn</a> æ’ç‰ˆ</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Hibernateï¼ˆ10ï¼‰Hibernateçš„æŸ¥è¯¢è¯­è¨€ï¼ˆHQLï¼‰æ˜¯ä»€ä¹ˆï¼Ÿ]]></title>    <link>https://juejin.cn/post/7589126217250701353</link>    <guid>https://juejin.cn/post/7589126217250701353</guid>    <pubDate>2025-12-29T12:34:20.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589126217250701353" data-draft-id="7589099845186715684" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Hibernateï¼ˆ10ï¼‰Hibernateçš„æŸ¥è¯¢è¯­è¨€ï¼ˆHQLï¼‰æ˜¯ä»€ä¹ˆï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-29T12:34:20.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Victor356"/> <meta itemprop="url" content="https://juejin.cn/user/3492507879476878"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Hibernateï¼ˆ10ï¼‰Hibernateçš„æŸ¥è¯¢è¯­è¨€ï¼ˆHQLï¼‰æ˜¯ä»€ä¹ˆï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3492507879476878/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Victor356
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T12:34:20.000Z" title="Mon Dec 29 2025 12:34:20 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>HibernateæŸ¥è¯¢è¯­è¨€ï¼ˆHQLï¼ŒHibernate Query Languageï¼‰æ˜¯ä¸€ç§é¢å‘å¯¹è±¡çš„æŸ¥è¯¢è¯­è¨€ï¼Œå®ƒç±»ä¼¼äºSQLï¼Œä½†æ“ä½œçš„æ˜¯Hibernateæ˜ å°„çš„æŒä¹…åŒ–å¯¹è±¡åŠå…¶å±æ€§è€Œä¸æ˜¯æ•°æ®åº“è¡¨ã€‚HQLçš„å¼ºå¤§ä¹‹å¤„åœ¨äºå®ƒèƒ½å¤Ÿåˆ©ç”¨Hibernateçš„æ˜ å°„å’Œå…³è”ï¼Œç®€åŒ–å¤æ‚çš„æŸ¥è¯¢æ“ä½œã€‚</p>
<h3 data-id="heading-0">ä¸»è¦ç‰¹ç‚¹</h3>
<ol>
<li><strong>é¢å‘å¯¹è±¡</strong>ï¼šHQLæ“ä½œçš„æ˜¯å¯¹è±¡åŠå…¶å±æ€§ï¼Œè€Œä¸æ˜¯æ•°æ®åº“è¡¨å’Œåˆ—ã€‚</li>
<li><strong>è‡ªåŠ¨è½¬æ¢</strong>ï¼šHQLæŸ¥è¯¢ä¼šè‡ªåŠ¨è½¬æ¢æˆç›¸åº”çš„SQLæŸ¥è¯¢ã€‚</li>
<li><strong>æ”¯æŒæŠ•å½±å’Œèšåˆ</strong>ï¼šHQLæ”¯æŒæŠ•å½±ã€èšåˆã€æ’åºã€åˆ†ç»„ç­‰æ“ä½œã€‚</li>
<li><strong>æ”¯æŒå…³è”å’Œè¿æ¥</strong>ï¼šå¯ä»¥é€šè¿‡å¯¹è±¡å…³ç³»å¯¼èˆªè¿›è¡Œå…³è”å’Œè¿æ¥æ“ä½œã€‚</li>
</ol>
<h3 data-id="heading-1">HQLæŸ¥è¯¢ç¤ºä¾‹</h3>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªå®Œæ•´çš„ç¤ºä¾‹ï¼Œå±•ç¤ºå¦‚ä½•ä½¿ç”¨HQLè¿›è¡Œå„ç§æŸ¥è¯¢æ“ä½œã€‚</p>
<h4 data-id="heading-2">é…ç½®æ–‡ä»¶ <code>hibernate.cfg.xml</code></h4>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">hibernate-configuration</span> <span class="hljs-keyword">PUBLIC</span>
        <span class="hljs-string">"-//Hibernate/Hibernate Configuration DTD 3.0//EN"</span>
        <span class="hljs-string">"http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">hibernate-configuration</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">session-factory</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- æ•°æ®åº“è¿æ¥é…ç½® --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.driver_class"</span>&gt;</span>com.mysql.cj.jdbc.Driver<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.url"</span>&gt;</span>jdbc:mysql://localhost:3306/your_database<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.username"</span>&gt;</span>your_username<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.password"</span>&gt;</span>your_password<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- Hibernate å±æ€§é…ç½® --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.dialect"</span>&gt;</span>org.hibernate.dialect.MySQLDialect<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.show_sql"</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.format_sql"</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.hbm2ddl.auto"</span>&gt;</span>update<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- æ˜ å°„ç±»é…ç½® --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">mapping</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.example.domain.Student"</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">session-factory</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">hibernate-configuration</span>&gt;</span>
</code></pre>
<h4 data-id="heading-3">HibernateUtil ç±»</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.hibernate.SessionFactory;
<span class="hljs-keyword">import</span> org.hibernate.cfg.Configuration;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HibernateUtil</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> SessionFactory sessionFactory;

    <span class="hljs-keyword">static</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// ä»é…ç½®æ–‡ä»¶åˆ›å»ºSessionFactory</span>
            sessionFactory = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Configuration</span>().configure(<span class="hljs-string">"hibernate.cfg.xml"</span>).buildSessionFactory();
        } <span class="hljs-keyword">catch</span> (Throwable ex) {
            <span class="hljs-comment">// è®°å½•å¯åŠ¨å¤±è´¥çš„é”™è¯¯</span>
            System.err.println(<span class="hljs-string">"Initial SessionFactory creation failed."</span> + ex);
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ExceptionInInitializerError</span>(ex);
        }
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> SessionFactory <span class="hljs-title function_">getSessionFactory</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> sessionFactory;
    }
}
</code></pre>
<h4 data-id="heading-4">å®ä½“ç±» Student</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.example.domain;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Student</span> {
    <span class="hljs-keyword">private</span> Long id;
    <span class="hljs-keyword">private</span> String name;
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> age;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Student</span><span class="hljs-params">()</span> {}

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Student</span><span class="hljs-params">(String name, <span class="hljs-type">int</span> age)</span> {
        <span class="hljs-built_in">this</span>.name = name;
        <span class="hljs-built_in">this</span>.age = age;
    }

    <span class="hljs-comment">// getters å’Œ setters</span>
    <span class="hljs-keyword">public</span> Long <span class="hljs-title function_">getId</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> id;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setId</span><span class="hljs-params">(Long id)</span> {
        <span class="hljs-built_in">this</span>.id = id;
    }

    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> name;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setName</span><span class="hljs-params">(String name)</span> {
        <span class="hljs-built_in">this</span>.name = name;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getAge</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> age;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setAge</span><span class="hljs-params">(<span class="hljs-type">int</span> age)</span> {
        <span class="hljs-built_in">this</span>.age = age;
    }
}
</code></pre>
<h4 data-id="heading-5">ä½¿ç”¨HQLçš„æŸ¥è¯¢ç¤ºä¾‹</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.hibernate.Session;
<span class="hljs-keyword">import</span> org.hibernate.SessionFactory;
<span class="hljs-keyword">import</span> org.hibernate.query.Query;
<span class="hljs-keyword">import</span> java.util.List;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HibernateHQLExample</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// è·å–SessionFactory</span>
        <span class="hljs-type">SessionFactory</span> <span class="hljs-variable">sessionFactory</span> <span class="hljs-operator">=</span> HibernateUtil.getSessionFactory();
        <span class="hljs-comment">// æ‰“å¼€ä¸€ä¸ªæ–°çš„Session</span>
        <span class="hljs-type">Session</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> sessionFactory.openSession();

        <span class="hljs-comment">// å¯åŠ¨äº‹åŠ¡</span>
        session.beginTransaction();

        <span class="hljs-comment">// åˆ›å»ºå¹¶ä¿å­˜Studentå¯¹è±¡</span>
        <span class="hljs-type">Student</span> <span class="hljs-variable">student1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>(<span class="hljs-string">"John Doe"</span>, <span class="hljs-number">20</span>);
        <span class="hljs-type">Student</span> <span class="hljs-variable">student2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>(<span class="hljs-string">"Jane Doe"</span>, <span class="hljs-number">22</span>);
        session.save(student1);
        session.save(student2);

        <span class="hljs-comment">// æäº¤äº‹åŠ¡</span>
        session.getTransaction().commit();

        <span class="hljs-comment">// æŸ¥è¯¢æ‰€æœ‰å­¦ç”Ÿ</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">hql</span> <span class="hljs-operator">=</span> <span class="hljs-string">"FROM Student"</span>;
        Query&lt;Student&gt; query = session.createQuery(hql, Student.class);
        List&lt;Student&gt; students = query.list();
        <span class="hljs-keyword">for</span> (Student student : students) {
            System.out.println(<span class="hljs-string">"Student: "</span> + student.getName() + <span class="hljs-string">", Age: "</span> + student.getAge());
        }

        <span class="hljs-comment">// å¸¦æ¡ä»¶çš„æŸ¥è¯¢</span>
        hql = <span class="hljs-string">"FROM Student S WHERE S.age &gt; :student_age"</span>;
        query = session.createQuery(hql, Student.class);
        query.setParameter(<span class="hljs-string">"student_age"</span>, <span class="hljs-number">21</span>);
        students = query.list();
        <span class="hljs-keyword">for</span> (Student student : students) {
            System.out.println(<span class="hljs-string">"Filtered Student: "</span> + student.getName() + <span class="hljs-string">", Age: "</span> + student.getAge());
        }

        <span class="hljs-comment">// æŠ•å½±æŸ¥è¯¢</span>
        hql = <span class="hljs-string">"SELECT S.name FROM Student S"</span>;
        Query&lt;String&gt; nameQuery = session.createQuery(hql, String.class);
        List&lt;String&gt; names = nameQuery.list();
        <span class="hljs-keyword">for</span> (String name : names) {
            System.out.println(<span class="hljs-string">"Student Name: "</span> + name);
        }

        <span class="hljs-comment">// èšåˆæŸ¥è¯¢</span>
        hql = <span class="hljs-string">"SELECT COUNT(S.id) FROM Student S"</span>;
        Query&lt;Long&gt; countQuery = session.createQuery(hql, Long.class);
        <span class="hljs-type">Long</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> countQuery.getSingleResult();
        System.out.println(<span class="hljs-string">"Total Students: "</span> + count);

        <span class="hljs-comment">// æ’åºæŸ¥è¯¢</span>
        hql = <span class="hljs-string">"FROM Student S ORDER BY S.age DESC"</span>;
        query = session.createQuery(hql, Student.class);
        students = query.list();
        <span class="hljs-keyword">for</span> (Student student : students) {
            System.out.println(<span class="hljs-string">"Sorted Student: "</span> + student.getName() + <span class="hljs-string">", Age: "</span> + student.getAge());
        }

        <span class="hljs-comment">// åˆ†ç»„æŸ¥è¯¢</span>
        hql = <span class="hljs-string">"SELECT S.age, COUNT(S.id) FROM Student S GROUP BY S.age"</span>;
        Query&lt;Object[]&gt; groupQuery = session.createQuery(hql, Object[].class);
        List&lt;Object[]&gt; groupResults = groupQuery.list();
        <span class="hljs-keyword">for</span> (Object[] result : groupResults) {
            System.out.println(<span class="hljs-string">"Age: "</span> + result[<span class="hljs-number">0</span>] + <span class="hljs-string">", Count: "</span> + result[<span class="hljs-number">1</span>]);
        }

        <span class="hljs-comment">// å…³é—­Session</span>
        session.close();
        <span class="hljs-comment">// å…³é—­SessionFactory</span>
        sessionFactory.close();
    }
}
</code></pre>
<h3 data-id="heading-6">è¯¦ç»†è§£é‡Š</h3>
<ol>
<li>
<p><strong>æŸ¥è¯¢æ‰€æœ‰å­¦ç”Ÿ</strong>ï¼šä½¿ç”¨<code>FROM Student</code>è¯­å¥æŸ¥è¯¢æ‰€æœ‰å­¦ç”Ÿå¯¹è±¡ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">String</span> <span class="hljs-variable">hql</span> <span class="hljs-operator">=</span> <span class="hljs-string">"FROM Student"</span>;
Query&lt;Student&gt; query = session.createQuery(hql, Student.class);
List&lt;Student&gt; students = query.list();
</code></pre>
</li>
<li>
<p><strong>å¸¦æ¡ä»¶çš„æŸ¥è¯¢</strong>ï¼šä½¿ç”¨<code>WHERE</code>å­å¥æ·»åŠ æ¡ä»¶æŸ¥è¯¢ï¼Œä¾‹å¦‚æŸ¥æ‰¾å¹´é¾„å¤§äº21å²çš„å­¦ç”Ÿã€‚</p>
<pre><code class="hljs language-java" lang="java">hql = <span class="hljs-string">"FROM Student S WHERE S.age &gt; :student_age"</span>;
query = session.createQuery(hql, Student.class);
query.setParameter(<span class="hljs-string">"student_age"</span>, <span class="hljs-number">21</span>);
List&lt;Student&gt; students = query.list();
</code></pre>
</li>
<li>
<p><strong>æŠ•å½±æŸ¥è¯¢</strong>ï¼šä½¿ç”¨<code>SELECT</code>å­å¥é€‰æ‹©ç‰¹å®šå­—æ®µï¼Œä¾‹å¦‚åªé€‰æ‹©å­¦ç”Ÿçš„åå­—ã€‚</p>
<pre><code class="hljs language-java" lang="java">hql = <span class="hljs-string">"SELECT S.name FROM Student S"</span>;
Query&lt;String&gt; nameQuery = session.createQuery(hql, String.class);
List&lt;String&gt; names = nameQuery.list();
</code></pre>
</li>
<li>
<p><strong>èšåˆæŸ¥è¯¢</strong>ï¼šä½¿ç”¨èšåˆå‡½æ•°ï¼Œä¾‹å¦‚<code>COUNT</code>å‡½æ•°ç»Ÿè®¡å­¦ç”Ÿäººæ•°ã€‚</p>
<pre><code class="hljs language-java" lang="java">hql = <span class="hljs-string">"SELECT COUNT(S.id) FROM Student S"</span>;
Query&lt;Long&gt; countQuery = session.createQuery(hql, Long.class);
<span class="hljs-type">Long</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> countQuery.getSingleResult();
</code></pre>
</li>
<li>
<p><strong>æ’åºæŸ¥è¯¢</strong>ï¼šä½¿ç”¨<code>ORDER BY</code>å­å¥è¿›è¡Œæ’åºï¼Œä¾‹å¦‚æŒ‰å¹´é¾„é™åºæ’åºã€‚</p>
<pre><code class="hljs language-java" lang="java">hql = <span class="hljs-string">"FROM Student S ORDER BY S.age DESC"</span>;
query = session.createQuery(hql, Student.class);
List&lt;Student&gt; students = query.list();
</code></pre>
</li>
<li>
<p><strong>åˆ†ç»„æŸ¥è¯¢</strong>ï¼šä½¿ç”¨<code>GROUP BY</code>å­å¥è¿›è¡Œåˆ†ç»„æŸ¥è¯¢ï¼Œä¾‹å¦‚æŒ‰å¹´é¾„åˆ†ç»„ç»Ÿè®¡æ¯ä¸ªå¹´é¾„æ®µçš„å­¦ç”Ÿäººæ•°ã€‚</p>
<pre><code class="hljs language-java" lang="java">hql = <span class="hljs-string">"SELECT S.age, COUNT(S.id) FROM Student S GROUP BY S.age"</span>;
Query&lt;Object[]&gt; groupQuery = session.createQuery(hql, Object[].class);
List&lt;Object[]&gt; groupResults = groupQuery.list();
</code></pre>
</li>
</ol>
<h3 data-id="heading-7">æ€»ç»“</h3>
<p>HQLæ˜¯ä¸€ç§åŠŸèƒ½å¼ºå¤§çš„æŸ¥è¯¢è¯­è¨€ï¼Œå®ƒç®€åŒ–äº†HibernateæŒä¹…åŒ–å¯¹è±¡çš„æŸ¥è¯¢æ“ä½œã€‚é€šè¿‡HQLå¯ä»¥æ–¹ä¾¿åœ°è¿›è¡Œå„ç§å¤æ‚çš„æŸ¥è¯¢æ“ä½œï¼Œå¦‚æ¡ä»¶æŸ¥è¯¢ã€æŠ•å½±æŸ¥è¯¢ã€èšåˆæŸ¥è¯¢ã€æ’åºæŸ¥è¯¢å’Œåˆ†ç»„æŸ¥è¯¢ã€‚æ­¤å¤–ï¼ŒHQLä¸æ•°æ®åº“æ— å…³ï¼Œè¿™ä½¿å¾—åº”ç”¨ç¨‹åºåœ¨ä¸åŒæ•°æ®åº“ä¹‹é—´å…·æœ‰è‰¯å¥½çš„å¯ç§»æ¤æ€§ã€‚é€šè¿‡ç†Ÿç»ƒæŒæ¡HQLï¼Œå¯ä»¥é«˜æ•ˆåœ°è¿›è¡Œæ•°æ®åº“æ“ä½œï¼Œæé«˜åº”ç”¨ç¨‹åºçš„æ€§èƒ½å’Œå¯ç»´æŠ¤æ€§ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Luckysheet è¿œç¨‹æœç´¢ä¸‹æ‹‰ æ§ä»¶å¼€å‘ : æ­ç§˜äºŒå¼€å…¨æµç¨‹]]></title>    <link>https://juejin.cn/post/7589126920286289930</link>    <guid>https://juejin.cn/post/7589126920286289930</guid>    <pubDate>2025-12-29T12:47:46.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589126920286289930" data-draft-id="7589093895327023113" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Luckysheet  è¿œç¨‹æœç´¢ä¸‹æ‹‰ æ§ä»¶å¼€å‘ : æ­ç§˜äºŒå¼€å…¨æµç¨‹"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-29T12:47:46.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æœ´shu"/> <meta itemprop="url" content="https://juejin.cn/user/3866303125264135"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Luckysheet  è¿œç¨‹æœç´¢ä¸‹æ‹‰ æ§ä»¶å¼€å‘ : æ­ç§˜äºŒå¼€å…¨æµç¨‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3866303125264135/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æœ´shu
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T12:47:46.000Z" title="Mon Dec 29 2025 12:47:46 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>è¿œç¨‹æœç´¢ä¸‹æ‹‰æ§ä»¶æ˜¯éå¸¸å¸¸è§çš„æ§ä»¶ï¼Œåº”ç”¨åœ¨è¡¨å•å¡«å†™åœºæ™¯ä¸‹ï¼Œä¹Ÿæ˜¯éå¸¸åˆé€‚çš„ï¼Œæœ¬ä¾‹å°†å¸¦é¢†å¤§å®¶å®ç°ä»¥ä¸‹æ•ˆæœï¼Œå¹¶çœŸå®äº†è§£å¹¶ç†Ÿæ‚‰ luckysheet çš„äºŒå¼€æµç¨‹ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3fa9e707052b4260aa2b992a2395a52d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py0c2h1:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767617266&amp;x-signature=Cjkf12XL8qDoAEnlzDnp11Lkez8%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h2 data-id="heading-1">æ‹“å±•å•å…ƒæ ¼å±æ€§</h2>
<p>åœ¨å®˜ç½‘ä¸Šï¼Œæœ‰ä¸€ä¸ªå¸¸è§é—®é¢˜ï¼Œæ—¢ç„¶å·²çŸ¥æ‰¹æ³¨æ˜¯ç›´æ¥åŠ åˆ°å•å…ƒæ ¼å±æ€§ä¸Šï¼Œé‚£ä¹ˆï¼Œæˆ‘ä»¬æ‹“å±•å±æ€§ï¼Œæ˜¯ä¸æ˜¯å¯ä»¥å‚è€ƒæ‰¹æ³¨çš„å®ç°æ–¹æ¡ˆï¼Ÿ</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/22fd9b12c2c6470fb53fbfb6a0b8ffcd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py0c2h1:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767617266&amp;x-signature=1YQxfHygfcHNaEUdhyY4ILqUvJE%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
æˆ‘ä»¬è®¾å®šä»¥ä¸‹æ˜¯è¿œç¨‹æœç´¢ä¸‹æ‹‰çš„å•å…ƒæ ¼æ‹“å±•å±æ€§ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// æ‰©å±•åçš„å•å…ƒæ ¼å¯¹è±¡</span>
<span class="hljs-keyword">const</span> cell = {
    <span class="hljs-attr">v</span>: <span class="hljs-literal">null</span>, <span class="hljs-comment">// åŸå§‹å€¼</span>
    <span class="hljs-attr">m</span>: <span class="hljs-literal">null</span>, <span class="hljs-comment">// æ˜¾ç¤ºå€¼</span>
    <span class="hljs-attr">ct</span>: { <span class="hljs-attr">fa</span>: <span class="hljs-string">"General"</span>, <span class="hljs-attr">t</span>: <span class="hljs-string">"s"</span> },
    <span class="hljs-comment">// ... other properties</span>

    <span class="hljs-comment">// æ–°å¢è¿œç¨‹æœç´¢ä¸‹æ‹‰é…ç½®</span>
    <span class="hljs-attr">remoteSelect</span>: {
        <span class="hljs-comment">// æ˜¯å¦å¯ç”¨è¿œç¨‹æœç´¢ï¼Œ[å¿…ä¼ ]</span>
        <span class="hljs-attr">enable</span>: <span class="hljs-built_in">boolean</span>,

        <span class="hljs-comment">// ç”¨æˆ·è¾“å…¥æ—¶çš„å›è°ƒå‡½æ•°ï¼Œç”¨äºè·å–è¿œç¨‹æ•°æ®</span>
        <span class="hljs-title function_">onInput</span>(value): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">Array</span>&lt;<span class="hljs-built_in">string</span>&gt;&gt; {
            <span class="hljs-comment">// è¿™ä¸ªå‡½æ•°éœ€è¦è¿”å›ä¸€ä¸ªPromiseå¯¹è±¡ï¼Œresolveä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„çš„å…ƒç´ ä¸ºä¸‹æ‹‰é€‰é¡¹å¯¹è±¡</span>
        }

        <span class="hljs-comment">// ç”¨æˆ·é€‰å®šæŸä¸ªé€‰é¡¹åçš„å›è°ƒå‡½æ•°</span>
        <span class="hljs-title function_">onSelect</span>(item): <span class="hljs-built_in">void</span> {
            <span class="hljs-comment">// item ä¸ºç”¨æˆ·é€‰å®šçš„é€‰é¡¹å¯¹è±¡ï¼Œå€¼æ˜¯onInputå‡½æ•°è¿”å›çš„æ•°ç»„ä¸­çš„æŸä¸ªå…ƒç´ </span>
        }

        <span class="hljs-comment">// æ˜¯å¦éœ€è¦è®¾å®šå½“å‰è¾“å…¥å•å…ƒæ ¼çš„å€¼ [å¯é€‰]</span>
        <span class="hljs-title function_">setValue</span>(item): <span class="hljs-built_in">string</span>{
           <span class="hljs-comment">// item ä¸ºç”¨æˆ·é€‰å®šçš„é€‰é¡¹å¯¹è±¡ï¼Œéœ€è¦è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œç”¨äºè®¾å®šå•å…ƒæ ¼çš„å€¼</span>
        },

        <span class="hljs-comment">// è‡ªå®šä¹‰ç±»å  [å¯é€‰]</span>
        <span class="hljs-attr">popperClass</span>: <span class="hljs-built_in">string</span>,
    },
};
</code></pre>
<h2 data-id="heading-2">ä½•æ—¶è§¦å‘ï¼Ÿ</h2>
<p>åœ¨è¿™ä¸ªåœºæ™¯ä¸­ï¼Œæˆ‘ä»¬éœ€è¦<code>åœ¨ç”¨æˆ·è¾“å…¥å€¼æ—¶ï¼Œè¿›è¡Œè¿œç¨‹æ•°æ®è·å–ï¼Œæ¸²æŸ“åˆ—è¡¨</code>ï¼Œå› æ­¤ï¼Œéœ€è¦åœ¨ç”¨æˆ·è¿›è¡Œç¼–è¾‘æ—¶ï¼Œè¿›è¡Œå¤„ç†ï¼š</p>
<ol>
<li>ä¸€ä¸ªæ–¹æ¡ˆï¼Œæ˜¯åœ¨åˆå§‹åŒ– inputHTML æ—¶ï¼Œå°†ç›¸å…³äº‹ä»¶å¤„ç†ï¼š
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/755689351f904e30a11d579d9ff5a471~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py0c2h1:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767617266&amp;x-signature=%2FKJ62ts%2BnUnkohBygCBG2drzPuQ%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></li>
</ol>
<pre><code class="hljs language-js" lang="js"> $(<span class="hljs-string">"body"</span>).<span class="hljs-title function_">append</span>(inputHTML)
 <span class="hljs-comment">// è¿›è¡Œç›¸å…³äº‹ä»¶ç»‘å®š: [ä¼ªä»£ç ]</span>
 $input.<span class="hljs-title function_">on</span>(<span class="hljs-string">'input'</span>,<span class="hljs-keyword">function</span>(<span class="hljs-params"/>){
 	<span class="hljs-comment">// è¿™é‡Œæ˜¯æœªçŸ¥å…·ä½“å•å…ƒæ ¼ä¿¡æ¯çš„ï¼Œéœ€è¦é€šè¿‡å¤–éƒ¨ä¼ é€’</span>
 	<span class="hljs-keyword">const</span> remoteSelectOptions = <span class="hljs-title class_">Store</span>.<span class="hljs-property">flowdata</span>[r][c]
 	<span class="hljs-comment">// æ‰§è¡Œåç»­æ“ä½œ</span>
 })
</code></pre>
<ol start="2">
<li>å¦ä¸€ä¸ªæ–¹æ¡ˆï¼Œæ˜¯ç”¨æˆ·åŒå‡»æ—¶ï¼Œå”¤èµ·è¾“å…¥æ¡†åï¼Œè¿›è¡Œåˆ¤æ–­ï¼š</li>
</ol>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// handler.js</span>
$(<span class="hljs-string">"#luckysheet-cell-main, #luckysheetTableContent"</span>).<span class="hljs-title function_">dblclick</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"/>){
	<span class="hljs-comment">// è¿™ä¸ªå‡½æ•°æ˜¯å†…ç½®çš„å“ˆï¼Œå› æ­¤ï¼Œå¯ä»¥ç›´æ¥è·å–åˆ° r c</span>
	<span class="hljs-comment">// åˆ¤æ–­å½“å‰å•å…ƒæ ¼æ˜¯å¦éœ€è¦åˆå§‹åŒ–è¿œç¨‹æœç´¢æ§ä»¶</span>
	<span class="hljs-title class_">RemoteSelect</span>.<span class="hljs-title function_">checkCellNeedRemoteSelect</span>(row_index, col_index)
})
</code></pre>
<p>ä¸¤ç§æ–¹æ¡ˆæˆ‘éƒ½è¯•è¿‡äº†ï¼Œ<code>å®ç°ç•¥æœ‰ä¸åŒ</code>ï¼Œä½†éƒ½å¯ä»¥å®ç°ï¼Œè¿˜æ˜¯å€ŸåŠ©åŸç”Ÿçš„ dblclick å¥½å¤„ç†äº›ã€‚</p>
<h2 data-id="heading-3">æ ¡éªŒè¿œç¨‹æœç´¢ä¸‹æ‹‰</h2>
<p>æ—¢ç„¶æ¯ä¸€ä¸ªå•å…ƒæ ¼åŒå‡»ï¼Œéƒ½ä¼šè§¦å‘è¿™ä¸ªæ ¡éªŒï¼Œé‚£ä¹ˆä½•æ—¶æ‰éœ€è¦åˆå§‹åŒ–è¿™ä¸ªä¸‹æ‹‰æ¡†å‘¢ï¼Ÿ</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// åˆ¤æ–­å½“å‰å•å…ƒæ ¼æ˜¯å¦éœ€è¦æ˜¾ç¤ºä¸‹æ‹‰æ¡†</span>
<span class="hljs-attr">checkCellNeedRemoteSelect</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">r, c</span>) {
    <span class="hljs-comment">// é€šè¿‡ r c è·å–å•å…ƒæ ¼ä¿¡æ¯</span>
    <span class="hljs-keyword">let</span> cell = <span class="hljs-title class_">Store</span>.<span class="hljs-property">flowdata</span>[r][c];

    <span class="hljs-comment">// å¦‚æœ cell æ²¡æœ‰é…ç½® remoteSelect æˆ–è€… remoteSelect.enable ä¸º false åˆ™è¿”å›</span>
    <span class="hljs-keyword">if</span> (!cell || !cell.<span class="hljs-property">remoteSelect</span> || !cell.<span class="hljs-property">remoteSelect</span>.<span class="hljs-property">enable</span>) {
        <span class="hljs-keyword">return</span>;
    }
}
</code></pre>
<p>æ£€éªŒå®Œæˆåï¼Œå¦‚æœéœ€è¦åˆå§‹åŒ–æ ¡éªŒï¼Œåˆ«å¿˜äº†ï¼Œ æˆ‘ä»¬åº•å±‚è¿˜è¦ç›‘å¬è¾“å…¥æ¡†äº‹ä»¶å“ˆï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// ä¸ç„¶ï¼Œå¼€å§‹ç›‘å¬ input è¾“å…¥äº‹ä»¶</span>
$(<span class="hljs-string">"#luckysheet-input-box .luckysheet-cell-input"</span>).<span class="hljs-title function_">off</span>(<span class="hljs-string">"input"</span>).<span class="hljs-title function_">on</span>(<span class="hljs-string">"input"</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">let</span> value = $(<span class="hljs-variable language_">this</span>).<span class="hljs-title function_">text</span>().<span class="hljs-title function_">trim</span>(); <span class="hljs-comment">// è·å–ç”¨æˆ·è¾“å…¥çš„å€¼</span>
      
        <span class="hljs-keyword">if</span> (cell.<span class="hljs-property">remoteSelect</span> &amp;&amp; cell.<span class="hljs-property">remoteSelect</span>.<span class="hljs-property">onInput</span> &amp;&amp; <span class="hljs-keyword">typeof</span> cell.<span class="hljs-property">remoteSelect</span>.<span class="hljs-property">onInput</span> == <span class="hljs-string">"function"</span>) {
            <span class="hljs-comment">// è°ƒç”¨å¤–éƒ¨æ¥å£</span>
            cell.<span class="hljs-property">remoteSelect</span>
                .<span class="hljs-title function_">onInput</span>(value)
                .<span class="hljs-title function_">then</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">dataList</span>) {
                    $this.<span class="hljs-property">loading</span> = <span class="hljs-literal">false</span>;
                    $this.<span class="hljs-title function_">showRemoteSelect</span>(dataList);
                })
                .<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> {
                    $this.<span class="hljs-property">loading</span> = <span class="hljs-literal">false</span>;
                    $this.<span class="hljs-title function_">hideRemoteSelect</span>();
                    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"è¯·æ±‚æ¥å£é”™è¯¯"</span>, error);
                    tooltip.<span class="hljs-title function_">info</span>(<span class="hljs-string">'&lt;i class="fa fa-exclamation-triangle"&gt;&lt;/i&gt;'</span>, <span class="hljs-string">"æ¥å£è¯·æ±‚å¤±è´¥"</span>);
                });
        }
    });
</code></pre>
<h2 data-id="heading-4">åˆå§‹åŒ–ä¸‹æ‹‰æ¡†</h2>
<p>è¿œç¨‹æœç´¢çš„æ ¸å¿ƒï¼Œå°±æ˜¯ä¸‹æ‹‰é€‰é¡¹ï¼Œå½“è¿œç¨‹æ¥å£åˆå§‹åŒ–å®Œæˆåï¼Œæ‰§è¡Œå¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-js" lang="js">dataList.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> {
	<span class="hljs-keyword">const</span> $item = $(<span class="hljs-string">`&lt;div class="<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.selectItemClass}</span>"&gt;`</span>)
		.<span class="hljs-title function_">text</span>(item)
		.<span class="hljs-title function_">click</span>(<span class="hljs-function">() =&gt;</span> {
			<span class="hljs-comment">// è§¦å‘é€‰æ‹©å›è°ƒ</span>
			<span class="hljs-keyword">if</span> (cell.<span class="hljs-property">remoteSelect</span> &amp;&amp; cell.<span class="hljs-property">remoteSelect</span>.<span class="hljs-property">onSelect</span> &amp;&amp; <span class="hljs-keyword">typeof</span> cell.<span class="hljs-property">remoteSelect</span>.<span class="hljs-property">onSelect</span> === <span class="hljs-string">"function"</span>) {
    		cell.<span class="hljs-property">remoteSelect</span>.<span class="hljs-title function_">onSelect</span>(item);
			}
		})
</code></pre>
<p>è¿™é‡Œå°±ä¸€ä¸ªéš¾ç‚¹è¦å¤„ç†ï¼Œå¦‚ä½•å°†ä¸‹æ‹‰æ¡†å®šä½åˆ°è¾“å…¥æ¡†çš„ä½ç½®ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// è¿™é‡Œé‡‡ç”¨å·§æ–¹æ¡ˆï¼Œç›´æ¥å–è¾“å…¥æ¡†çš„ä½ç½®</span>
<span class="hljs-keyword">const</span> $input = $(<span class="hljs-string">"#luckysheet-input-box"</span>);
<span class="hljs-keyword">const</span> left = <span class="hljs-built_in">parseInt</span>($input.<span class="hljs-title function_">css</span>(<span class="hljs-string">"left"</span>)) || <span class="hljs-number">0</span>;
<span class="hljs-keyword">const</span> top = <span class="hljs-built_in">parseInt</span>($input.<span class="hljs-title function_">css</span>(<span class="hljs-string">"top"</span>)) || <span class="hljs-number">0</span>;

<span class="hljs-comment">// è·å–å½“å‰å•å…ƒæ ¼çš„é«˜åº¦ è¡Œé«˜</span>
<span class="hljs-keyword">const</span> [_row_pre, rowHeight] = <span class="hljs-title function_">rowLocation</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">r</span>);

<span class="hljs-comment">// è®¾ç½®ä¸‹æ‹‰æ¡†ä½ç½®å’Œå®½åº¦</span>
$selectBox.<span class="hljs-title function_">css</span>({
    <span class="hljs-attr">top</span>: <span class="hljs-string">`<span class="hljs-subst">${top + rowHeight + <span class="hljs-number">4</span>}</span>px`</span>, <span class="hljs-comment">// åœ¨å•å…ƒæ ¼ä¸‹æ–¹æ˜¾ç¤º</span>
    <span class="hljs-attr">left</span>: <span class="hljs-string">`<span class="hljs-subst">${left}</span>px`</span>,
});
</code></pre>
<h2 data-id="heading-5">æ€»ç»“</h2>
<p>è™½ç„¶ä»£ç çœ‹èµ·æ¥ä¸å¤æ‚ï¼Œä½†æ˜¯äº†è§£luckysheet çš„æºç ã€å®ç°æ€è·¯ï¼Œä»¥åŠå•å…ƒæ ¼æ‹“å±•å®ç°æ–¹æ¡ˆæ˜¯éå¸¸é‡è¦çš„ã€‚</p>
<p>é€šè¿‡æœ¬æ¬¡å®ç°ï¼Œæˆ‘ä»¬åˆæ­¥äº†è§£äº†luckysheetçš„äºŒæ¬¡å¼€å‘æµç¨‹ï¼Œåœ¨ä¸ç ´ååŸæœ‰åŠŸèƒ½çš„åŸºç¡€ä¸Šæ·»åŠ æ–°ç‰¹æ€§ã€‚è¿œç¨‹æœç´¢ä¸‹æ‹‰æ§ä»¶çš„å®ç°å±•ç¤ºäº†å¦‚ä½•åœ¨ç°æœ‰è¡¨æ ¼ç»„ä»¶åŸºç¡€ä¸Šï¼Œé€šè¿‡åˆç†çš„æ¶æ„è®¾è®¡å’Œä»£ç ç»„ç»‡ï¼Œæ·»åŠ å¤æ‚äº¤äº’åŠŸèƒ½ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‡ºæµ·éœ€æ±‚æ€ä¹ˆæŒ–ï¼Ÿæˆ‘ç”¨ Google â€œæ–°è¯â€æ‰¾åˆ° 0-1 çš„æœºä¼šï¼ˆé™„ 122 ä¸ªè¯æ ¹ï¼‰]]></title>    <link>https://juejin.cn/post/7589107312112975881</link>    <guid>https://juejin.cn/post/7589107312112975881</guid>    <pubDate>2025-12-29T13:02:16.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589107312112975881" data-draft-id="7589093895327105033" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‡ºæµ·éœ€æ±‚æ€ä¹ˆæŒ–ï¼Ÿæˆ‘ç”¨ Google â€œæ–°è¯â€æ‰¾åˆ° 0-1 çš„æœºä¼šï¼ˆé™„ 122 ä¸ªè¯æ ¹ï¼‰"/> <meta itemprop="keywords" content="åˆ›ä¸š,äº§å“,AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2025-12-29T13:02:16.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å­Ÿå¥AIç¼–ç¨‹"/> <meta itemprop="url" content="https://juejin.cn/user/4212984287073895"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‡ºæµ·éœ€æ±‚æ€ä¹ˆæŒ–ï¼Ÿæˆ‘ç”¨ Google â€œæ–°è¯â€æ‰¾åˆ° 0-1 çš„æœºä¼šï¼ˆé™„ 122 ä¸ªè¯æ ¹ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4212984287073895/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å­Ÿå¥AIç¼–ç¨‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T13:02:16.000Z" title="Mon Dec 29 2025 13:02:16 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯å­Ÿå¥ã€‚</p>
<p>åˆšåˆšå‚åŠ å®Œç ´å±€çº¿ä¸‹çš„ AI å¤§ä¼šã€‚</p>
<p>åœ¨æˆ‘çš„å¤œè¯ä¼šä¸Šï¼Œå¤§å®¶é—®å¾—æœ€å¤šçš„ä¸€ä¸ªé—®é¢˜æ˜¯ï¼š</p>
<p><strong>æ€æ ·æŒ–æ˜éœ€æ±‚ï¼Ÿ</strong></p>
<p>çœ‹èµ·æ¥è¿™ä»¶äº‹ï¼Œç¡®å®éš¾ä½äº†å¾ˆå¤šäººã€‚</p>
<p>ä»Šå¤©æˆ‘å°±æŠŠæˆ‘ä»¬å›¢é˜Ÿç°é˜¶æ®µæœ€å¸¸ç”¨ã€ä¹Ÿæœ€â€œç§‘å­¦â€çš„æ‰¾éœ€æ±‚æ–¹æ³•ï¼Œæ•´ç†æˆä¸€ç¯‡å¯å¤ç”¨çš„ SOPã€‚</p>
<p>å…ˆè®²ä¸€ä¸ªåº•å±‚è®¤çŸ¥ï¼š<strong>æµ·å¤–æœç´¢å¸‚åœºï¼ŒåŸºæœ¬å°±æ˜¯ Google çš„ä¸»åœºã€‚</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/83d4ea6f4eab43efaabd3b72fd81df34~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f5YGlQUnnvJbnqIs=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767618135&amp;x-signature=aLnkPm5zoY9s%2FhPXMvOQ3dahLuQ%3D" alt="" loading="lazy"/></p>
<p>æ‰€ä»¥ï¼Œå¯¹â€œå‡ºæµ·åšäº§å“/åšç«™â€çš„äººæ¥è¯´ï¼Œæ‰¾éœ€æ±‚æœ€ç¨³çš„ä¸€æ¡è·¯ï¼Œå…¶å®æ˜¯ï¼š</p>
<p><strong>å»æŒ–å…³é”®è¯ã€‚</strong></p>
<p>è¿™é‡Œçš„å…³é”®è¯ï¼ŒæŒ‡çš„æ˜¯ç”¨æˆ·æ¯å¤©çœŸå®è¾“å…¥åˆ° Google æœç´¢æ¡†é‡Œçš„é‚£äº›è¯ã€çŸ­è¯­ã€å¥å­ã€‚</p>
<p>å› ä¸ºï¼š<strong>æœç´¢çš„èƒŒåï¼Œå°±æ˜¯éœ€æ±‚ã€‚</strong></p>
<h3 data-id="heading-0">ä¸€ã€å…ˆæŠŠå…³é”®è¯åˆ†æ¸…æ¥šï¼šæ–°è¯ vs è€è¯</h3>
<p>å…³é”®è¯æŒ–æ˜å¬èµ·æ¥ç®€å•ï¼Œä½†å¦‚æœä½ ä¸åšåˆ†ç±»ï¼Œå¾ˆå®¹æ˜“é™·å…¥â€œä»€ä¹ˆéƒ½èƒ½åšï¼Œä½†ä¸çŸ¥é“å…ˆåšä»€ä¹ˆâ€çš„çŠ¶æ€ã€‚</p>
<p>æˆ‘ä»¬é€šå¸¸æŠŠå…³é”®è¯åˆ†æˆä¸¤ç±»ï¼š</p>
<ul>
<li>
<p><strong>æ–°è¯</strong>ï¼šæœ€è¿‘ 3 ä¸ªæœˆå‡ºç°çš„è¯ï¼ˆè¿™æ˜¯ä¸»è§‚åˆ’åˆ†ï¼Œä½ ä¹Ÿå¯ä»¥ç”¨ 6 ä¸ªæœˆ / 12 ä¸ªæœˆï¼‰</p>
</li>
<li>
<p><strong>è€è¯</strong>ï¼šæ›´æ—©å°±å­˜åœ¨ã€å·²ç»è¢«å¤§é‡ç«™ç‚¹è¦†ç›–è¿‡çš„è¯</p>
</li>
</ul>
<p>å› ä¸º Google æ›¾æŠ«éœ²ï¼š<strong>æ¯å¤©å¤§çº¦æœ‰ 15% çš„æœç´¢ï¼Œæ˜¯å…¨æ–°çš„æŸ¥è¯¢ã€‚</strong></p>
<p>æ¢å¥è¯è¯´ï¼šæ¯å¤©éƒ½æœ‰ä¸€æ‰¹â€œåˆšå‡ºç°â€çš„éœ€æ±‚ï¼Œè¿˜æ²¡è¢«è¶³å¤Ÿå¤šçš„é¡µé¢æ»¡è¶³ã€‚</p>
<p>è¿™å¯¹æˆ‘ä»¬æ„å‘³ç€ä»€ä¹ˆï¼Ÿ</p>
<ul>
<li>
<p>å¦‚æœä½ åšè€è¯ï¼Œå¸¸è§æƒ…å†µæ˜¯ï¼šç«äº‰å¤§ã€ç´¢å¼•æ…¢ã€èµ·é‡æ…¢</p>
</li>
<li>
<p>ä½†å¦‚æœä½ æŠ“åˆ°æ–°è¯çª—å£æœŸï¼Œå¹¶å¿«é€Ÿåšå‡ºèƒ½æ»¡è¶³éœ€æ±‚çš„é¡µé¢/å·¥å…·ï¼Œå¾€å¾€æ›´å®¹æ˜“æ›´å¿«è¢«æ”¶å½•ï¼Œç”šè‡³æ›´å¿«æ‹¿åˆ°æ›´é å‰çš„æ’å</p>
</li>
</ul>
<p>è¿™å°±æ˜¯çº¢åˆ©ã€‚</p>
<p>é€»è¾‘è·Ÿâ€œAI çƒ­ç‚¹äº‹ä»¶å†™æ–‡ç« â€å¾ˆåƒï¼š<strong>è¶Šæ—©æ»¡è¶³ï¼Œè¶Šå®¹æ˜“åƒåˆ°ç¬¬ä¸€æ³¢æµé‡</strong>â€”â€”ç”šè‡³æœ‰æ—¶å€™çº¢åˆ©è¿˜æ›´å¤§ã€‚</p>
<p>æ‰€ä»¥ï¼Œæˆ‘ä»¬ç°é˜¶æ®µçš„é‡ç‚¹æ˜¯ï¼š<strong>ä»¥æ–°è¯æŒ–æ˜ä¸ºä¸»</strong>ã€‚</p>
<h3 data-id="heading-1">äºŒã€æ–°è¯æ€ä¹ˆæŒ–ï¼Ÿä¸¤ä»¶å·¥å…·å°±å¤Ÿäº†</h3>
<p>å¾ˆå¤šäººä»¥ä¸ºæŒ–è¯è¦ç”¨ä¸€å †ä»˜è´¹å·¥å…·ã€‚</p>
<p>ä½†å¯¹ 0-1 çš„æ–°æ‰‹æ¥è¯´ï¼ŒçœŸçš„æ²¡å¿…è¦ã€‚</p>
<p>æˆ‘ä»¬æœ€å¸¸ç”¨çš„å°±ä¸¤ä¸ªï¼š</p>
<ul>
<li>
<p>Google æœç´¢ï¼ˆä¸‹æ‹‰è”æƒ³ï¼‰</p>
</li>
<li>
<p>Google Trendsï¼ˆè¶‹åŠ¿ï¼‰</p>
</li>
</ul>
<h4 data-id="heading-2">1ï¼‰ç”¨ Google ä¸‹æ‹‰è”æƒ³æŒ–è¯ï¼ˆAutocompleteï¼‰</h4>
<p>ä½ åœ¨ Google æœç´¢æ¡†é‡Œè¾“å…¥ä¸€ä¸ªè¯æ—¶ï¼Œå®ƒä¼šè‡ªåŠ¨ç»™å‡ºä¸€å †â€œå¤§å®¶å¸¸æœçš„ç›¸å…³è¯â€ã€‚</p>
<p>è¿™å°±æ˜¯æœ€ç›´æ¥çš„éœ€æ±‚çº¿ç´¢ã€‚</p>
<p>å®æ“æ—¶ï¼Œä½ å¯ä»¥ç”¨â€œç©ºæ ¼â€ç»„åˆå‡ºæ›´å¤šå˜ä½“ï¼š</p>
<ul>
<li>
<p><strong>è¯åç©ºæ ¼</strong>ï¼š<code>aiâ£</code> â†’ çœ‹å®ƒå¾€åæ¥ä»€ä¹ˆï¼ˆ<code>â£</code> è¡¨ç¤ºç©ºæ ¼ï¼‰</p>
</li>
<li>
<p><strong>è¯å‰ç©ºæ ¼</strong>ï¼š<code>â£ai</code> â†’ çœ‹å®ƒå‰é¢å¸¸å‡ºç°ä»€ä¹ˆ</p>
</li>
<li>
<p><strong>è¯ä¸­ç©ºæ ¼</strong>ï¼šæŠŠè¯æ‹†å¼€ â†’ çœ‹ä¸­é—´ä¼šè¢«è¡¥æˆä»€ä¹ˆ</p>
</li>
</ul>
<p>æ­é…ä½¿ç”¨ï¼Œä½ èƒ½å¾ˆå¿«æ‰©å‡ºä¸€å †å€™é€‰è¯ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/97e05bfc676745da9eae2bd078ef6d52~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f5YGlQUnnvJbnqIs=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767618135&amp;x-signature=JtmzjjtLJPR0xNZ84QgNJT9smTk%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-3">2ï¼‰ç”¨ Google Trends æ‰¾â€œé£™å‡â€çš„æ–°è¯</h4>
<p>Google Trends æ˜¯æ‰¾æ–°è¯çš„ç¥å™¨ã€‚</p>
<p>æ–¹æ³•ä¹Ÿå¾ˆç®€å•ï¼š</p>
<ol>
<li>
<p>æ‰“å¼€ <code>https://trends.google.com/trends/</code></p>
</li>
<li>
<p>æŠŠæ—¶é—´èŒƒå›´ç¼©çŸ­åˆ° <strong>7 å¤©</strong></p>
</li>
<li>
<p>é‡ç‚¹çœ‹ <strong>é£™å‡ï¼ˆRisingï¼‰</strong> çš„å…³é”®è¯</p>
</li>
</ol>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Ftrends.google.com%2Ftrends%2F" target="_blank" title="https://trends.google.com/trends/" ref="nofollow noopener noreferrer">trends.google.com/trends/</a></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cd6764bcfe0d4ca5a6b0b445c7cd3ce9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f5YGlQUnnvJbnqIs=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767618135&amp;x-signature=xAN69sffDUWs9%2FdCIP67AcnvT00%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ad9f859cbb5746678625cc553410875c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f5YGlQUnnvJbnqIs=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767618135&amp;x-signature=cGK%2BxScQG%2Fo85dusNFGkn6PBTMs%3D" alt="" loading="lazy"/></p>
<p>ä¸¾ä¸ªä¾‹å­ï¼šä¸Šé¢è¿™ä¸ª <code>kling ai motion poster</code>ï¼Œå°±æ˜¯æˆ‘ä» <code>ai</code> è¿™ä¸ªè¯ä¸€è·¯é¡ºè—¤æ‘¸ç“œæŒ–å‡ºæ¥çš„æ–°è¯ã€‚</p>
<p>å®ƒå¤§æ¦‚ç‡å¯¹åº”â€œå¯çµï¼ˆKlingï¼‰æ¨¡å‹â€çš„æŸç±»å…·ä½“éœ€æ±‚ã€‚</p>
<p>è‡³äºå€¼ä¸å€¼å¾—åšï¼Œæ˜¯ä¸‹ä¸€æ­¥çš„äº‹â€”â€”<strong>ä»Šå¤©æˆ‘ä»¬åªè®²ï¼šæ€ä¹ˆæ‰¾åˆ°è¿™äº›è¯ã€‚</strong></p>
<p>åŸºæœ¬ä¸Šï¼Œé  Google ä¸‹æ‹‰ + Trends 7 å¤©é£™å‡ï¼Œä½ å·²ç»èƒ½æŠ“åˆ°ç»å¤§éƒ¨åˆ†æ–°è¯äº†ã€‚</p>
<p>æˆ‘ä»¬ä¸€ç›´åœ¨ç”¨çš„ä¹Ÿæ˜¯è¿™å¥—æ–¹æ³•ã€‚</p>
<h3 data-id="heading-4">ä¸‰ã€å…³é”®éš¾ç‚¹ï¼šä½ å¾—å…ˆæœ‰â€œè¯æ ¹â€</h3>
<p>ä½ å¯èƒ½å·²ç»å‘ç°äº†ä¸€ä¸ªé—®é¢˜ï¼š</p>
<p>æ— è®ºæ˜¯ä¸‹æ‹‰è”æƒ³ï¼Œè¿˜æ˜¯ Trendsï¼Œä½ éƒ½å¾—å…ˆè¾“å…¥ä¸€ä¸ªè¯ï¼Œæ‰ä¼šç»™ä½ æ›´å¤šç›¸å…³è¯ã€‚</p>
<p>é‚£é—®é¢˜æ¥äº†ï¼š<strong>æˆ‘åº”è¯¥å…ˆè¾“å…¥ä»€ä¹ˆï¼Ÿ</strong></p>
<p>ç­”æ¡ˆæ˜¯ï¼šä½ éœ€è¦ä¸€å¥—â€œè¯æ ¹åº“â€ï¼ˆseed listï¼‰ã€‚</p>
<p>è¿™é‡Œè¦æ„Ÿè°¢å“¥é£å¤§ä½¬æä¾›çš„ 51 ä¸ªè¯æ ¹ã€‚</p>
<p>æˆ‘ä»¬åœ¨è¿™ä¸ªåŸºç¡€ä¸Šæ‰©å±•åˆ°äº† <strong>122 ä¸ªè¯æ ¹</strong>ï¼Œä»Šå¤©ç›´æ¥åˆ†äº«ç»™å¤§å®¶ï¼ˆå¯ç›´æ¥å¤åˆ¶ï¼‰ï¼š</p>
<pre><code class="hljs language-css" lang="css">action,advisor,agent,ai,analyzer
anime,answer,art,assistant,<span class="hljs-selector-tag">audio</span>
avatar,best,builder,calculator,cartoon
cataloger,character,chart,chat,cheat
checker,clue,<span class="hljs-selector-tag">code</span>,coloring page,comparator
compiler,composer,connector,constructor,convert
converter,crawler,creator,dashboard,designer
detector,diagram,directory,downloader,editor
emoji,enhancer,evaluator,example,explorer
extractor,face,faq,<span class="hljs-selector-tag">figure</span>,<span class="hljs-attribute">filter</span>
finder,<span class="hljs-attribute">font</span>,format,generator,graph
guide,helper,hint,how <span class="hljs-selector-tag">to</span>,humanizer
<span class="hljs-attribute">icon</span>,ideas,illustration,image,interior design
interpreter,layout,list,logo,maker
manager,meme,model,modifier,monitor
music,navigator,notifier,online,optimizer
paraphraser,pattern,photo,picture,planner
portal,portrait,processor,product photo,receiver
recommend,recorder,resources,responder,restorer
review,sample,scheduler,scraper,sender
simulator,solver,song,sound,speech
starter,studio,style,summarizer,<span class="hljs-selector-tag">summary</span>
syncer,tattoo,template
tester,text
</code></pre>
<p>ä¸€ä¸ªå¾ˆç®€å•ä½†éå¸¸æœ‰æ•ˆçš„å»ºè®®ï¼š</p>
<p><strong>æ¯å¤©æŠŠè¿™ä»½è¯æ ¹è¿‡ä¸€éï¼Œéšä¾¿æŒ‘ 5 ä¸ªä¸¢è¿› Google / Trendsï¼Œå»çœ‹è”æƒ³è¯å’Œé£™å‡è¯ã€‚</strong></p>
<p>åªè¦ä½ åšæŒä¸€æ®µæ—¶é—´ï¼Œä½ ä¸€å®šä¼šå¼€å§‹â€œçœ‹åˆ°â€éœ€æ±‚ã€‚</p>
<h3 data-id="heading-5">å››ã€å†è¿›é˜¶ä¸€ç‚¹ï¼šç›‘æ§å¤§ç«™ sitemapï¼ˆæ¸¸æˆæ–¹å‘å¾ˆå¥½ç”¨ï¼‰</h3>
<p>é™¤äº†ä¸Šé¢è¿™å¥—â€œé€šç”¨æŒ–è¯â€æ–¹æ³•ï¼Œæˆ‘ä»¬è¿˜ä¼šåšä¸€ä»¶äº‹ï¼š</p>
<p><strong>ç›‘æ§ä¸€äº›æ¸¸æˆå¤§ç«™çš„ sitemap æ›´æ–°</strong>ï¼ˆæ¯”å¦‚ CrazyGames ç­‰ï¼‰ï¼Œä»å®ƒä»¬æ–°å¢çš„é¡µé¢é‡Œåæ¨æ–°è¯å’Œæ–°éœ€æ±‚ã€‚</p>
<p>è¿™ä¸€æ­¥éœ€è¦ä¸€ç‚¹æŠ€æœ¯æ‰‹æ®µã€‚</p>
<p>å¦‚æœä½ æ˜¯ç¨‹åºå‘˜ï¼Œå¯ä»¥å°è¯•è‡ªå·±å†™è„šæœ¬å»ç›‘æ§ sitemap çš„æ›´æ–°é¢‘ç‡ã€æ–°å¢ URLã€é¡µé¢æ ‡é¢˜å˜åŒ–ç­‰ã€‚</p>
<p>ä½ ä¼šå‘ç°ï¼šå¾ˆå¤šâ€œåˆšå†’å¤´â€çš„å°æ¸¸æˆå…³é”®è¯ï¼Œå°±æ˜¯è¿™æ ·è¢«æŒ–å‡ºæ¥çš„ã€‚</p>
<h3 data-id="heading-6">äº”ã€å†™åœ¨æœ€åï¼šåˆ«å°çœ‹â€œç®€å•çš„æ–¹æ³•â€</h3>
<p>ä»¥ä¸Šå°±æ˜¯æˆ‘ä»¬ç°é˜¶æ®µæŒ–æ˜éœ€æ±‚ï¼ˆå°¤å…¶æ˜¯æ–°è¯éœ€æ±‚ï¼‰çš„ä¸€æ•´å¥—æ–¹æ³•ã€‚</p>
<p>å®ƒä¸èŠ±å“¨ï¼Œä½†è¶³å¤Ÿå®ç”¨ã€‚</p>
<p>æ–°æ‰‹ç”¨è¿™å¥—æ–¹æ³•è·‘é€š 0-1 å®Œå…¨æ²¡é—®é¢˜ã€‚</p>
<p>è‡³äºè€è¯æŒ–æ˜ï¼Œç©æ³•ç¡®å®æ›´å¤šï¼Œä½†å¯¹ 0-1 çš„æ–°æ‰‹ä¸å‹å¥½ã€‚</p>
<p>ç­‰æˆ‘ä»¬æŠŠè€è¯æ‰“æ³•è·‘å‡ºæ›´ç¨³å®šçš„ç»“æœï¼Œæˆ‘å†æŠŠé‚£ä¸€å¥—ä¹Ÿå®Œæ•´æ‹†å¼€åˆ†äº«ç»™å¤§å®¶ã€‚</p>
<p>å¦‚æœè¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©ï¼Œæ¬¢è¿ç‚¹ä¸ªèµã€åœ¨çœ‹ã€è½¬å‘ä¸‰è¿ã€‚</p>
<p>æˆ‘ä»¬ä¸‹æœŸå†è§ï¼</p>
<hr/>
<p>ğŸš€ æƒ³è¦ä¸æ›´å¤šAIçˆ±å¥½è€…äº¤æµï¼Œå…±åŒæˆé•¿å—ï¼Ÿ</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FZ4k_5_waWJbRRo5lZBZmog" target="_blank" title="https://mp.weixin.qq.com/s/Z4k_5_waWJbRRo5lZBZmog" ref="nofollow noopener noreferrer">å’Œä¸€ç¾¤å¿—åŒé“åˆçš„äººï¼ŒæŒç»­ç²¾è¿› AI çš„æ¯ä¸€å¤©</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Midscene v1.0 å‘å¸ƒ - è§†è§‰é©±åŠ¨ï¼ŒUI è‡ªåŠ¨åŒ–ä½“éªŒè·ƒè¿]]></title>    <link>https://juejin.cn/post/7589093895326777353</link>    <guid>https://juejin.cn/post/7589093895326777353</guid>    <pubDate>2025-12-29T11:15:53.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589093895326777353" data-draft-id="7589082912588677163" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Midscene v1.0 å‘å¸ƒ - è§†è§‰é©±åŠ¨ï¼ŒUI è‡ªåŠ¨åŒ–ä½“éªŒè·ƒè¿"/> <meta itemprop="keywords" content="å‰ç«¯,å®¢æˆ·ç«¯,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-29T11:15:53.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å­—èŠ‚è·³åŠ¨å¼€æº"/> <meta itemprop="url" content="https://juejin.cn/user/1227510999971086"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Midscene v1.0 å‘å¸ƒ - è§†è§‰é©±åŠ¨ï¼ŒUI è‡ªåŠ¨åŒ–ä½“éªŒè·ƒè¿
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1227510999971086/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å­—èŠ‚è·³åŠ¨å¼€æº
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T11:15:53.000Z" title="Mon Dec 29 2025 11:15:53 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æ–‡ç« æ¥æºï½œByteDance Web Infra å›¢é˜Ÿ</p>
</blockquote>
<p>Midscene è‡ª 2024 å¹´å¼€æºå‘å¸ƒä»¥æ¥ï¼Œå·²ç»åœ¨ Github æ–©è· 11k star ã€Trending æ¦œç¬¬äºŒåç­‰æˆç»©ï¼Œå¹¶åœ¨äº’è”ç½‘ã€é‡‘èã€æ”¿ä¼ã€æ±½è½¦ç­‰å¤§é‡åº”ç”¨åœºæ™¯ä¸‹å®Œæˆè½åœ°ã€‚</p>
<p>æœ¬æœˆï¼Œæˆ‘ä»¬æ­£å¼å®£å¸ƒ Midscene v1.0 å‘å¸ƒï¼æœ¬æ–‡å°†ä¸ºä½ ä»‹ç»ï¼š</p>
<ul>
<li>æ¡ˆä¾‹å›é¡¾ï¼šMidscene åœ¨ PCã€Androidã€iOS ç­‰åœºæ™¯çš„ä»»åŠ¡èƒ½åŠ›ï¼›</li>
<li>ç¤¾åŒºæ¡ˆä¾‹ï¼šç¤¾åŒºå¼€å‘è€…åŸºäº Midscene ä¸ä»»æ„ç•Œé¢é›†æˆçš„ç‰¹æ€§ï¼Œæ‰©å±•äº†æœºæ¢°è‡‚ + è§†è§‰æ¨¡å‹ + è¯­éŸ³æ¨¡å‹ç­‰æ¨¡å—ï¼Œå®Œæˆè½¦æœºæµ‹è¯•ï¼›</li>
<li>1.0 ç‰ˆæœ¬çš„æ¨¡å‹è·¯çº¿ï¼šæ‹¥æŠ±çº¯è§†è§‰ï¼›</li>
<li>1.0 ç‰ˆæœ¬çš„ç‰¹æ€§ä¼˜åŒ–ï¼šæŠ¥å‘Šä¼˜åŒ–ã€MCP æ¶æ„ã€è·¨ç«¯å¢å¼ºã€API å˜æ›´ç­‰ã€‚</li>
</ul>
<h2 data-id="heading-0">æ¡ˆä¾‹å›é¡¾</h2>
<h4 data-id="heading-1">ç¤¾åŒºæ¡ˆä¾‹ï¼šè§†è§‰æ¨¡å‹ + æœºæ¢°è‡‚</h4>
<p>æ¼”ç¤ºè§†é¢‘è¯·åœ¨å…¬ä¼—å·æŸ¥çœ‹ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2F24rFtAfihEos6f1u83jeLg" target="_blank" title="https://mp.weixin.qq.com/s/24rFtAfihEos6f1u83jeLg" ref="nofollow noopener noreferrer">mp.weixin.qq.com/s/24rFtAfihâ€¦</a></p>
<p>æœ‰ç¤¾åŒºå¼€å‘è€…æˆåŠŸåŸºäº Midscene ä¸ä»»æ„ç•Œé¢é›†æˆçš„ç‰¹æ€§ï¼Œæ‰©å±•äº†æœºæ¢°è‡‚ + è§†è§‰æ¨¡å‹ + è¯­éŸ³æ¨¡å‹ç­‰æ¨¡å—ï¼Œè¿ç”¨äºè½¦æœºå¤§å±æµ‹è¯•åœºæ™¯ä¸­ã€‚</p>
<h4 data-id="heading-2">ç§»åŠ¨ç«¯æ¡ˆä¾‹ï¼šå¤–å–ä¸‹å•</h4>
<p>æ‰“å¼€ç¾å›¢ï¼Œå¸®æˆ‘ä¸‹å•ä¸€æ¯ manner è¶…å¤§æ¯å†°ç¾å¼å’–å•¡ï¼Œè¦åŠ æµ“å°‘å†°å–”ï¼Œåˆ°ç»“ç®—é¡µé¢è®©æˆ‘ç¡®è®¤ã€‚</p>
<p>æ¼”ç¤ºè§†é¢‘è¯·åœ¨å…¬ä¼—å·æŸ¥çœ‹ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2F24rFtAfihEos6f1u83jeLg" target="_blank" title="https://mp.weixin.qq.com/s/24rFtAfihEos6f1u83jeLg" ref="nofollow noopener noreferrer">mp.weixin.qq.com/s/24rFtAfihâ€¦</a></p>
<p>åœ¨æˆ‘ä»¬çš„ Midscene å®˜ç½‘ä¸Šï¼Œè¿˜æœ‰æ›´å¤šå®æˆ˜æ¡ˆä¾‹ï¼š</p>
<ol>
<li>iOS è‡ªåŠ¨åŒ– - Twitter è‡ªåŠ¨ç‚¹èµ @midscene_ai é¦–æ¡æ¨æ–‡ï¼›</li>
<li>Android è‡ªåŠ¨åŒ– - æ‡‚è½¦å¸æŸ¥çœ‹å°ç±³ SU7 å‚æ•°ï¼›</li>
<li>Android è‡ªåŠ¨åŒ– - Booking é¢„è®¢åœ£è¯é…’åº—ï¼›</li>
<li>MCP é›†æˆ - Midscene MCP æ“ä½œç•Œé¢å‘å¸ƒ prepatch ç‰ˆæœ¬ã€‚</li>
</ol>
<h2 data-id="heading-3">1.0 ç‰ˆæœ¬çš„æ¨¡å‹è·¯çº¿</h2>
<p>ä» V1.0 å¼€å§‹ï¼ŒMidscene å…¨é¢è½¬å‘è§†è§‰ç†è§£æ–¹æ¡ˆï¼Œæä¾›æ›´ç¨³å®šå¯é çš„ UI è‡ªåŠ¨åŒ–èƒ½åŠ›ã€‚</p>
<p>è§†è§‰æ¨¡å‹æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š</p>
<ul>
<li>
<p><strong>æ•ˆæœç¨³å®š</strong>Â ï¼šä¸šç•Œé¢†å…ˆçš„è§†è§‰æ¨¡å‹ï¼ˆå¦‚ Doubao Seed 1.6ã€Qwen3-VL ç­‰ï¼‰è¡¨ç°è¶³å¤Ÿç¨³å®šï¼Œå·²ç»å¯ä»¥æ»¡è¶³å¤§å¤šæ•°ä¸šåŠ¡éœ€æ±‚ï¼›</p>
</li>
<li>
<p><strong>UI æ“ä½œè§„åˆ’</strong>Â ï¼šè§†è§‰æ¨¡å‹é€šå¸¸å…·å¤‡è¾ƒå¼ºçš„ UI æ“ä½œè§„åˆ’èƒ½åŠ›ï¼Œèƒ½å¤Ÿå®Œæˆä¸å°‘å¤æ‚çš„ä»»åŠ¡æµç¨‹ï¼›</p>
</li>
<li>
<p><strong>é€‚ç”¨äºä»»æ„ç³»ç»Ÿ</strong>Â ï¼šè‡ªåŠ¨åŒ–æ¡†æ¶ä¸å†ä¾èµ– UI æ¸²æŸ“çš„æŠ€æœ¯æ ˆï¼Œæ— è®ºæ˜¯ Androidã€iOSã€æ¡Œé¢åº”ç”¨ï¼Œè¿˜æ˜¯æµè§ˆå™¨ä¸­çš„Â <code>&lt;canvas&gt;</code>ï¼Œåªè¦èƒ½è·å–æˆªå›¾ï¼ŒMidscene å³å¯å®Œæˆäº¤äº’æ“ä½œï¼›</p>
</li>
<li>
<p><strong>æ˜“äºç¼–å†™</strong>Â ï¼šæŠ›å¼ƒå„ç±» selector å’Œ DOM ä¹‹åï¼Œå¼€å‘è€…ä¸æ¨¡å‹çš„â€œç£¨åˆâ€ä¼šå˜å¾—æ›´ç®€å•ï¼Œä¸ç†Ÿæ‚‰æ¸²æŸ“æŠ€æœ¯çš„æ–°äººä¹Ÿèƒ½å¾ˆå¿«ä¸Šæ‰‹ï¼›</p>
</li>
<li>
<p><strong>token é‡æ˜¾è‘—ä¸‹é™</strong>Â ï¼šåœ¨å»é™¤ DOM æå–ä¹‹åï¼Œè§†è§‰æ–¹æ¡ˆçš„ token ä½¿ç”¨é‡å¯ä»¥å‡å°‘ 80%ï¼Œæˆæœ¬æ›´ä½ï¼Œä¸”æœ¬åœ°è¿è¡Œé€Ÿåº¦ä¹Ÿå˜å¾—æ›´å¿«</p>
</li>
<li>
<p><strong>æœ‰å¼€æºæ¨¡å‹è§£å†³æ–¹æ¡ˆ</strong>Â ï¼šå¼€æºæ¨¡å‹è¡¨ç°æ¸ä½³ï¼Œå¼€å‘è€…å¼€å§‹æœ‰æœºä¼šè¿›è¡Œç§æœ‰åŒ–éƒ¨ç½²æ¨¡å‹ï¼Œå¦‚ Qwen3-VL æä¾›çš„ 8Bã€30B ç­‰ç‰ˆæœ¬åœ¨ä¸å°‘é¡¹ç›®ä¸­éƒ½æœ‰ç€ä¸é”™çš„æ•ˆæœã€‚</p>
</li>
</ul>
<p>è¯¦æƒ…è¯·é˜…è¯»æˆ‘ä»¬æ›´æ–°ç‰ˆçš„<strong>æ¨¡å‹ç­–ç•¥[1]ã€‚</strong></p>
<h2 data-id="heading-4">ğŸš€Â å¤šæ¨¡å‹ç»„åˆï¼Œä¸ºå¤æ‚ä»»åŠ¡å¸¦æ¥æ›´å¥½æ•ˆæœ</h2>
<p>é™¤äº†é»˜è®¤çš„äº¤äº’åœºæ™¯ï¼ŒMidscene è¿˜å®šä¹‰äº† Planningï¼ˆè§„åˆ’ï¼‰å’Œ Insightï¼ˆæ´å¯Ÿï¼‰ä¸¤ç§æ„å›¾ï¼Œå¼€å‘è€…å¯ä»¥æŒ‰éœ€ä¸ºå®ƒä»¬å¯ç”¨ç‹¬ç«‹çš„æ¨¡å‹ã€‚ä¾‹å¦‚ï¼Œç”¨ GPT æ¨¡å‹åšè§„åˆ’ï¼ŒåŒæ—¶ä½¿ç”¨é»˜è®¤çš„ Doubao æ¨¡å‹åšå…ƒç´ å®šä½ã€‚</p>
<p>å¤šæ¨¡å‹ç»„åˆè®©å¼€å‘è€…å¯ä»¥æŒ‰éœ€æå‡å¤æ‚éœ€æ±‚çš„å¤„ç†èƒ½åŠ›ã€‚</p>
<h2 data-id="heading-5">ğŸš€ è¿è¡Œæ—¶æ¶æ„ä¼˜åŒ–</h2>
<p>é’ˆå¯¹ Midscene çš„è¿è¡Œæ—¶è¡¨ç°ï¼Œæˆ‘ä»¬è¿›è¡Œäº†ä»¥ä¸‹ä¼˜åŒ–ï¼š</p>
<ul>
<li>å‡å°‘å¯¹è®¾å¤‡ä¿¡æ¯æ¥å£çš„è°ƒç”¨ï¼Œåœ¨ç¡®ä¿å®‰å…¨çš„æƒ…å†µä¸‹å¤ç”¨éƒ¨åˆ†ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œæå‡è¿è¡Œæ—¶æ€§èƒ½ï¼Œè®©å¤§å¤šæ•°çš„æ—¶é—´æ¶ˆè€—é›†ä¸­åœ¨æ¨¡å‹ç«¯ï¼›</li>
<li>ä¼˜åŒ– Web åŠç§»åŠ¨ç«¯ç¯å¢ƒä¸‹çš„ Action Space ç»„åˆï¼Œå‘æ¨¡å‹å¼€æ”¾æ›´åˆç†ã€æ›´æ¸…æ™°çš„å·¥å…·é›†ã€‚</li>
</ul>
<h2 data-id="heading-6">ğŸš€ å›æ”¾æŠ¥å‘Šä¼˜åŒ–</h2>
<p>å›æ”¾æŠ¥å‘Šæ˜¯ Midscene å¼€å‘è€…éå¸¸ä¾èµ–çš„ä¸€ä¸ªç‰¹æ€§ï¼Œå®ƒèƒ½æœ‰æ•ˆæå‡è„šæœ¬çš„è°ƒè¯•æ•ˆç‡ã€‚</p>
<p>åœ¨ v1.0 ä¸­ï¼Œæˆ‘ä»¬æ›´æ–°äº†å›æ”¾æŠ¥å‘Šï¼š</p>
<ul>
<li>å‚æ•°è§†å›¾ï¼šæ ‡è®°å‡ºäº¤äº’å‚æ•°çš„ä½ç½®ä¿¡æ¯ï¼Œåˆå¹¶æˆªå›¾ä¿¡æ¯ï¼Œå¿«é€Ÿè¯†åˆ«æ¨¡å‹çš„è§„åˆ’ç»“æœï¼›</li>
<li>æ ·å¼è°ƒæ•´ï¼šæ”¯æŒä»¥æ·±è‰²æ¨¡å¼å±•ç¤ºæŠ¥å‘Šï¼Œæ›´ç¾è§‚ï¼›</li>
<li>Token æ¶ˆè€—çš„å±•ç¤ºï¼šæ”¯æŒæŒ‰æ¨¡å‹æ±‡æ€» Token æ¶ˆè€—é‡ï¼Œåˆ†æä¸åŒåœºæ™¯çš„æˆæœ¬æƒ…å†µã€‚</li>
</ul>
<h2 data-id="heading-7">ğŸš€ MCP æ¶æ„é‡æ„</h2>
<p>æˆ‘ä»¬é‡æ–°å®šä¹‰äº† Midscene MCP æœåŠ¡çš„å®šä½ã€‚Midscene MCP çš„èŒè´£æ˜¯å›´ç»•ç€è§†è§‰é©±åŠ¨çš„ UI æ“ä½œå±•å¼€ï¼Œå°† iOS / Android / Web è®¾å¤‡ Action Space ä¸­çš„æ¯ä¸ª Action æ“ä½œæš´éœ²ä¸º MCP å·¥å…·ï¼Œä¹Ÿå°±æ˜¯æä¾›å„ç±»â€œåŸå­æ“ä½œâ€ã€‚</p>
<p>é€šè¿‡è¿™ç§å½¢å¼ï¼Œå¼€å‘è€…å¯ä»¥æ›´ä¸“æ³¨äºæ„å»ºè‡ªå·±çš„é«˜é˜¶ Agentï¼Œè€Œæ— éœ€å…³å¿ƒåº•å±‚ UI æ“ä½œçš„å®ç°ç»†èŠ‚ï¼Œå¹¶ä¸”æ—¶åˆ»è·å¾—æ»¡æ„çš„æˆåŠŸç‡ã€‚</p>
<p>è¯¦æƒ…è¯·é˜…è¯»Â <strong>MCP æ–‡æ¡£[2]ã€‚</strong></p>
<h2 data-id="heading-8">ğŸš€ ç§»åŠ¨ç«¯èƒ½åŠ›å¢å¼º</h2>
<p><strong>iOS æ”¹è¿›</strong></p>
<ul>
<li>
<p>æ–°å¢ WebDriverAgent 5.x-7.x å…¨ç‰ˆæœ¬å…¼å®¹ï¼›</p>
</li>
<li>
<p>æ–°å¢ WebDriver Clear API æ”¯æŒï¼Œè§£å†³åŠ¨æ€è¾“å…¥æ¡†é—®é¢˜ï¼›</p>
</li>
<li>
<p>æå‡è®¾å¤‡å…¼å®¹æ€§ã€‚</p>
</li>
</ul>
<p><strong>Android æ”¹è¿›</strong></p>
<ul>
<li>
<p>æ–°å¢æˆªå›¾è½®è¯¢å›é€€æœºåˆ¶ï¼Œæå‡è¿œç¨‹è®¾å¤‡ç¨³å®šæ€§ï¼›</p>
</li>
<li>
<p>æ–°å¢å±å¹•æ–¹å‘è‡ªåŠ¨é€‚é…ï¼ˆdisplayId æˆªå›¾ï¼‰ï¼›</p>
</li>
<li>
<p>æ–°å¢ YAML è„šæœ¬Â <code>runAdbShell</code>Â æ”¯æŒã€‚</p>
</li>
</ul>
<p><strong>è·¨å¹³å°</strong></p>
<ul>
<li>åœ¨ Agent å®ä¾‹ä¸Šæš´éœ²ç³»ç»Ÿæ“ä½œæ¥å£ï¼ŒåŒ…æ‹¬ Homeã€Backã€RecentApp ç­‰ã€‚</li>
</ul>
<h2 data-id="heading-9">ğŸš§ API å˜æ›´</h2>
<p>æ–¹æ³•é‡å‘½åï¼ˆå‘åå…¼å®¹ï¼‰ï¼š</p>
<ul>
<li>
<p>æ”¹åÂ <code>aiAction()</code>Â â†’Â <code>aiAct()</code>ï¼ˆæ—§æ–¹æ³•ä¿ç•™ï¼Œæœ‰å¼ƒç”¨è­¦å‘Šï¼‰ï¼›</p>
</li>
<li>
<p>æ”¹åÂ <code>logScreenshot()</code>Â â†’Â <code>recordToReport()</code>ï¼ˆæ—§æ–¹æ³•ä¿ç•™ï¼Œæœ‰å¼ƒç”¨è­¦å‘Šï¼‰ã€‚</p>
</li>
</ul>
<p>ç¯å¢ƒå˜é‡é‡å‘½åï¼ˆå‘åå…¼å®¹ï¼‰ï¼š</p>
<ul>
<li>æ”¹åÂ <code>OPENAI_API_KEY</code>Â â†’Â <code>MODEL_API_KEY</code>ï¼ˆæ–°å˜é‡ä¼˜å…ˆï¼Œæ—§å˜é‡ä½œä¸ºå¤‡é€‰ï¼‰ï¼›</li>
<li>æ”¹åÂ <code>OPENAI_BASE_URL</code>Â â†’Â <code>MODEL_BASE_URL</code>ï¼ˆæ–°å˜é‡ä¼˜å…ˆï¼Œæ—§å˜é‡ä½œä¸ºå¤‡é€‰ï¼‰ã€‚</li>
</ul>
<h2 data-id="heading-10">â¬†ï¸ å‡çº§åˆ°æœ€æ–°ç‰ˆ</h2>
<p>å‡çº§é¡¹ç›®ä¸­çš„ä¾èµ–ï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li>
<p><code>npm install @midscene/web@latest --save-dev</code>ï¼›</p>
</li>
<li>
<p><code>npm install @midscene/android@latest --save-dev</code>ï¼›</p>
</li>
<li>
<p><code>npm install @midscene/ios@latest --save-dev</code>ã€‚</p>
</li>
</ul>
<p>å¦‚æœä½¿ç”¨å…¨å±€å®‰è£…çš„å‘½ä»¤è¡Œç‰ˆæœ¬ï¼š<code>npm i -g @midscene/cli</code>ã€‚</p>
<p><strong>äº†è§£æ›´å¤š</strong></p>
<ul>
<li>
<p>Midscene.js <a href="https://link.juejin.cn?target=https%3A%2F%2Fmidscenejs.com%2F" title="https://midscenejs.com/" target="_blank" ref="nofollow noopener noreferrer">midscenejs.com</a></p>
</li>
<li>
<p>Github <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fweb-infra-dev%2Fmidscene" title="https://github.com/web-infra-dev/midscene" target="_blank" ref="nofollow noopener noreferrer">github.com/web-infra-dâ€¦</a></p>
</li>
<li>
<p>1.0 ç‰ˆæœ¬ Changelog <a href="https://link.juejin.cn?target=https%3A%2F%2Fmidscenejs.com%2Fzh%2Fchangelog.html" title="https://midscenejs.com/zh/changelog.html" target="_blank" ref="nofollow noopener noreferrer">midscenejs.com/zh/changeloâ€¦</a></p>
</li>
</ul>
<p><strong>å‚è€ƒèµ„æ–™</strong></p>
<p>[1]Â æ¨¡å‹ç­–ç•¥:Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fmidscenejs.com%2Fzh%2Fmodel-strategy" target="_blank" title="https://midscenejs.com/zh/model-strategy" ref="nofollow noopener noreferrer"><em>https://midscenejs.com/zh/model-strategy</em></a></p>
<p>[2]Â MCP æ–‡æ¡£:Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fmidscenejs.com%2Fzh%2Fmcp" target="_blank" title="https://midscenejs.com/zh/mcp" ref="nofollow noopener noreferrer"><em>https://midscenejs.com/zh/mcp</em></a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[SpringSecurityã€shiro å’Œ sa-tokenï¼Œåˆ°åº•é€‰å“ªä¸ªï¼Ÿ]]></title>    <link>https://juejin.cn/post/7589052659436077102</link>    <guid>https://juejin.cn/post/7589052659436077102</guid>    <pubDate>2025-12-29T11:40:00.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589052659436077102" data-draft-id="7589107312112795657" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="SpringSecurityã€shiro å’Œ sa-tokenï¼Œåˆ°åº•é€‰å“ªä¸ªï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-29T11:40:00.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è‹ä¸‰è¯´æŠ€æœ¯"/> <meta itemprop="url" content="https://juejin.cn/user/465848661970824"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            SpringSecurityã€shiro å’Œ sa-tokenï¼Œåˆ°åº•é€‰å“ªä¸ªï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/465848661970824/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è‹ä¸‰è¯´æŠ€æœ¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T11:40:00.000Z" title="Mon Dec 29 2025 11:40:00 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»16åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>ä»Šå¤©æˆ‘ä»¬æ¥èŠèŠä¸€ä¸ªè®©å¾ˆå¤šJavaå¼€å‘è€…çº ç»“çš„æŠ€æœ¯é€‰å‹é—®é¢˜ï¼š<strong>Spring Securityã€Apache Shiroå’ŒSa-Tokenï¼Œè¿™3ä¸ªä¸»æµå®‰å…¨æ¡†æ¶åˆ°åº•è¯¥é€‰å“ªä¸ªï¼Ÿ</strong></p>
<p>æœ‰äº›å°ä¼™ä¼´åœ¨å·¥ä½œä¸­å¯èƒ½é‡åˆ°è¿‡è¿™æ ·çš„åœºæ™¯ï¼šæ–°é¡¹ç›®å¯åŠ¨ä¼šä¸Šï¼Œæ¶æ„å¸ˆåšæŒè¦ç”¨Spring Securityï¼Œå›¢é˜Ÿé‡Œçš„è€å°†å´è¯´Shiroæ›´ç®€å•å®ç”¨ï¼Œè€Œå¹´è½»çš„åŒäº‹åˆ™åŠ›èSa-Tokenè¿™ä¸ªåèµ·ä¹‹ç§€ã€‚</p>
<p>å¤§å®¶å„æ‰§ä¸€è¯ï¼Œéƒ½æœ‰é“ç†ï¼Œåˆ°åº•è¯¥å¬è°çš„ï¼Ÿ</p>
<p>ä»Šå¤©è¿™ç¯‡æ–‡ç« å°±è·Ÿå¤§å®¶ä¸€èµ·èŠèŠè¿™ä¸ªè¯é¢˜ï¼Œå¸Œæœ›å¯¹ä½ ä¼šæœ‰æ‰€å¸®åŠ©ã€‚</p>
<p><a href="https://link.juejin.cn/?target=http%3A%2F%2Fsusan.net.cn%2Fproject" title="https://link.juejin.cn/?target=http%3A%2F%2Fsusan.net.cn%2Fproject" target="_blank">æ›´å¤šé¡¹ç›®å®æˆ˜åœ¨æˆ‘çš„æŠ€æœ¯ç½‘ç«™ï¼šwww.susan.net.cn/project</a></p>
<h2 data-id="heading-1">1 æˆ‘ä»¬ä¸ºä»€ä¹ˆéœ€è¦å®‰å…¨æ¡†æ¶ï¼Ÿ</h2>
<p>åœ¨æ·±å…¥å¯¹æ¯”ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆè¦ç†è§£ï¼š<strong>ä¸ºä»€ä¹ˆä¸èƒ½è‡ªå·±æ‰‹å†™å®‰å…¨é€»è¾‘ï¼Œè€Œéè¦ç”¨æ¡†æ¶ï¼Ÿ</strong></p>
<p>æƒ³è±¡ä¸€ä¸‹ï¼Œå¦‚æœä½ è¦ä¸ºä¸€ä¸ªç”µå•†ç³»ç»Ÿå®ç°æƒé™æ§åˆ¶ï¼Œä½ éœ€è¦å¤„ç†ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æ‰‹å†™æƒé™æ§åˆ¶çš„å…¸å‹ç—›ç‚¹</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ManualSecurityExample</span> {
    
    <span class="hljs-comment">// 1. æ¯ä¸ªæ–¹æ³•éƒ½è¦å†™é‡å¤çš„æƒé™æ ¡éªŒ</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">updateProduct</span><span class="hljs-params">(Long productId, ProductDTO dto)</span> {
        <span class="hljs-comment">// æ£€æŸ¥ç”¨æˆ·æ˜¯å¦ç™»å½•</span>
        <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> getCurrentUser();
        <span class="hljs-keyword">if</span> (user == <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UnauthorizedException</span>(<span class="hljs-string">"è¯·å…ˆç™»å½•"</span>);
        }
        
        <span class="hljs-comment">// æ£€æŸ¥ç”¨æˆ·æ˜¯å¦æœ‰ç¼–è¾‘æƒé™</span>
        <span class="hljs-keyword">if</span> (!user.hasPermission(<span class="hljs-string">"product:update"</span>)) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ForbiddenException</span>(<span class="hljs-string">"æ²¡æœ‰æ“ä½œæƒé™"</span>);
        }
        
        <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦æ˜¯è‡ªå·±çš„å•†å“ï¼ˆæ•°æ®çº§æƒé™ï¼‰</span>
        <span class="hljs-type">Product</span> <span class="hljs-variable">product</span> <span class="hljs-operator">=</span> productService.getById(productId);
        <span class="hljs-keyword">if</span> (!product.getOwnerId().equals(user.getId())) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ForbiddenException</span>(<span class="hljs-string">"åªèƒ½ä¿®æ”¹è‡ªå·±çš„å•†å“"</span>);
        }
        
        <span class="hljs-comment">// å®é™…ä¸šåŠ¡é€»è¾‘...</span>
        productService.update(productId, dto);
    }
    
    <span class="hljs-comment">// 2. æ¯ä¸ªControlleréƒ½è¦å†™ç™»å½•æ£€æŸ¥</span>
    <span class="hljs-comment">// 3. éœ€è¦è‡ªå·±ç®¡ç†Session/Token</span>
    <span class="hljs-comment">// 4. å¯†ç åŠ å¯†ã€CSRFé˜²æŠ¤éƒ½è¦è‡ªå·±å®ç°</span>
    <span class="hljs-comment">// 5. å®¡è®¡æ—¥å¿—ã€å®‰å…¨äº‹ä»¶å¤„ç†...</span>
}
</code></pre>
<p>çœ‹åˆ°é—®é¢˜äº†å—ï¼Ÿ</p>
<p><strong>å®‰å…¨é€»è¾‘ä¼šåƒâ€œå¹½çµä»£ç â€ä¸€æ ·æ¸—é€åˆ°ä¸šåŠ¡çš„æ¯ä¸ªè§’è½</strong>ï¼Œå¯¼è‡´ï¼š</p>
<ul>
<li>ä»£ç é‡å¤ç‡é«˜</li>
<li>ä¸šåŠ¡é€»è¾‘å’Œå®‰å…¨é€»è¾‘è€¦åˆ</li>
<li>éš¾ä»¥ç»Ÿä¸€ç»´æŠ¤å’Œå‡çº§</li>
<li>å®¹æ˜“é—æ¼å®‰å…¨é˜²æŠ¤ç‚¹</li>
</ul>
<p><strong>å®‰å…¨æ¡†æ¶çš„ä»·å€¼ï¼Œå°±æ˜¯æŠŠè¿™äº›é—®é¢˜æŠ½è±¡åŒ–ã€æ ‡å‡†åŒ–ã€è‡ªåŠ¨åŒ–</strong>ã€‚</p>
<p>ä¸‹é¢è¿™ä¸ªç¤ºæ„å›¾å±•ç¤ºäº†å®‰å…¨æ¡†æ¶å¦‚ä½•å°†å®‰å…¨å…³æ³¨ç‚¹ä»ä¸šåŠ¡ä»£ç ä¸­è§£è€¦å‡ºæ¥ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0366f78d9f5e4a27a5e1e245e7ee8828~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuP5LiJ6K-05oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767613200&amp;x-signature=JaKTSsFw7MeIDMpHlJXYEmKV8vI%3D" alt="" loading="lazy"/></p>
<p>ç†è§£äº†å®‰å…¨æ¡†æ¶çš„ä»·å€¼ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æ·±å…¥åˆ†æè¿™ä¸‰ä¸ªä¸»æµé€‰é¡¹ã€‚</p>
<h2 data-id="heading-2">2 Spring Securityï¼šä¼ä¸šçº§çš„å®‰å…¨â€œç‘å£«å†›åˆ€â€</h2>
<h3 data-id="heading-3">2.1 Spring Securityæ˜¯ä»€ä¹ˆï¼Ÿ</h3>
<p>Spring Securityæ˜¯Springå®˜æ–¹æä¾›çš„å®‰å…¨æ¡†æ¶ï¼Œå¯ä»¥è¯´æ˜¯Springç”Ÿæ€ä¸­çš„â€œå¾¡æ—å†›â€ã€‚</p>
<p>å®ƒä¸ä»…ä»…æ˜¯ä¸€ä¸ªæƒé™æ§åˆ¶æ¡†æ¶ï¼Œæ›´æ˜¯ä¸€ä¸ª<strong>å…¨é¢çš„å®‰å…¨è§£å†³æ–¹æ¡ˆ</strong>ã€‚</p>
<h3 data-id="heading-4">2.2 æ ¸å¿ƒæ¶æ„ï¼šè¿‡æ»¤å™¨é“¾çš„æè‡´è¿ç”¨</h3>
<p>Spring Securityçš„æ ¸å¿ƒæ˜¯<strong>è¿‡æ»¤å™¨é“¾ï¼ˆFilter Chainï¼‰</strong>ã€‚</p>
<p>å½“ä¸€ä¸ªè¯·æ±‚åˆ°è¾¾æ—¶ï¼Œå®ƒä¼šç»è¿‡ä¸€ç³»åˆ—å®‰å…¨è¿‡æ»¤å™¨ï¼Œæ¯ä¸ªè¿‡æ»¤å™¨è´Ÿè´£ç‰¹å®šçš„å®‰å…¨åŠŸèƒ½ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/58db504b58584a86acd2d280558295e2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuP5LiJ6K-05oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767613200&amp;x-signature=1oC89Wpf2wMHU%2BLx41FEoKV1l%2BU%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-5">2.3 å¿«é€Ÿæ­å»ºä¸€ä¸ªå®‰å…¨çš„REST API</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// 1. åŸºç¡€é…ç½®ç±»</span>
<span class="hljs-meta">@Configuration</span>
<span class="hljs-meta">@EnableWebSecurity</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SpringSecurityConfig</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">WebSecurityConfigurerAdapter</span> {
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">configure</span><span class="hljs-params">(HttpSecurity http)</span> <span class="hljs-keyword">throws</span> Exception {
        http
            <span class="hljs-comment">// ç¦ç”¨CSRFï¼ˆREST APIé€šå¸¸ä¸éœ€è¦ï¼‰</span>
            .csrf().disable()
            
            <span class="hljs-comment">// æˆæƒé…ç½®</span>
            .authorizeRequests()
                .antMatchers(<span class="hljs-string">"/api/public/**"</span>).permitAll()  <span class="hljs-comment">// å…¬å¼€æ¥å£</span>
                .antMatchers(<span class="hljs-string">"/api/admin/**"</span>).hasRole(<span class="hljs-string">"ADMIN"</span>)  <span class="hljs-comment">// éœ€è¦ç®¡ç†å‘˜è§’è‰²</span>
                .antMatchers(<span class="hljs-string">"/api/user/**"</span>).hasAnyRole(<span class="hljs-string">"USER"</span>, <span class="hljs-string">"ADMIN"</span>)  <span class="hljs-comment">// éœ€è¦ç”¨æˆ·è§’è‰²</span>
                .anyRequest().authenticated()  <span class="hljs-comment">// å…¶ä»–æ‰€æœ‰è¯·æ±‚éœ€è¦è®¤è¯</span>
            
            <span class="hljs-comment">// è¡¨å•ç™»å½•é…ç½®ï¼ˆå‰åç«¯åˆ†ç¦»æ—¶é€šå¸¸ç”¨ä¸ä¸Šï¼‰</span>
            .and()
            .formLogin().disable()
            
            <span class="hljs-comment">// åŸºç¡€è®¤è¯é…ç½®</span>
            .httpBasic()
            
            <span class="hljs-comment">// å¼‚å¸¸å¤„ç†</span>
            .and()
            .exceptionHandling()
                .authenticationEntryPoint(restAuthenticationEntryPoint())  <span class="hljs-comment">// æœªè®¤è¯å¤„ç†</span>
                .accessDeniedHandler(restAccessDeniedHandler());  <span class="hljs-comment">// æƒé™ä¸è¶³å¤„ç†</span>
    }
    
    <span class="hljs-comment">// 2. ç”¨æˆ·è¯¦æƒ…æœåŠ¡ï¼ˆä»æ•°æ®åº“åŠ è½½ç”¨æˆ·ï¼‰</span>
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> UserDetailsService <span class="hljs-title function_">userDetailsService</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> username -&gt; {
            <span class="hljs-comment">// è¿™é‡Œå®é™…åº”è¯¥æŸ¥è¯¢æ•°æ®åº“</span>
            <span class="hljs-keyword">if</span> (<span class="hljs-string">"admin"</span>.equals(username)) {
                <span class="hljs-keyword">return</span> User.withUsername(<span class="hljs-string">"admin"</span>)
                    .password(passwordEncoder().encode(<span class="hljs-string">"admin123"</span>))
                    .roles(<span class="hljs-string">"ADMIN"</span>)
                    .build();
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-string">"user"</span>.equals(username)) {
                <span class="hljs-keyword">return</span> User.withUsername(<span class="hljs-string">"user"</span>)
                    .password(passwordEncoder().encode(<span class="hljs-string">"user123"</span>))
                    .roles(<span class="hljs-string">"USER"</span>)
                    .build();
            }
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UsernameNotFoundException</span>(<span class="hljs-string">"ç”¨æˆ·ä¸å­˜åœ¨: "</span> + username);
        };
    }
    
    <span class="hljs-comment">// 3. å¯†ç ç¼–ç å™¨</span>
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> PasswordEncoder <span class="hljs-title function_">passwordEncoder</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BCryptPasswordEncoder</span>();
    }
    
    <span class="hljs-comment">// 4. REST APIè®¤è¯å…¥å£ç‚¹</span>
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> AuthenticationEntryPoint <span class="hljs-title function_">restAuthenticationEntryPoint</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> (request, response, authException) -&gt; {
            response.setContentType(MediaType.APPLICATION_JSON_VALUE);
            response.setStatus(HttpStatus.UNAUTHORIZED.value());
            response.getWriter().write(
                <span class="hljs-string">"{\"code\": 401, \"message\": \"æœªè®¤è¯ï¼Œè¯·å…ˆç™»å½•\"}"</span>
            );
        };
    }
}

<span class="hljs-comment">// 5. åœ¨Controllerä¸­ä½¿ç”¨å®‰å…¨æ³¨è§£</span>
<span class="hljs-meta">@RestController</span>
<span class="hljs-meta">@RequestMapping("/api")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ProductController</span> {
    
    <span class="hljs-meta">@GetMapping("/public/products")</span>
    <span class="hljs-keyword">public</span> List&lt;Product&gt; <span class="hljs-title function_">getPublicProducts</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// å…¬å¼€æ¥å£ï¼Œæ— éœ€è®¤è¯</span>
        <span class="hljs-keyword">return</span> productService.getAllProducts();
    }
    
    <span class="hljs-meta">@GetMapping("/user/products")</span>
    <span class="hljs-meta">@PreAuthorize("hasRole('USER')")</span>  <span class="hljs-comment">// éœ€è¦USERè§’è‰²</span>
    <span class="hljs-keyword">public</span> List&lt;Product&gt; <span class="hljs-title function_">getUserProducts</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// è·å–å½“å‰è®¤è¯ç”¨æˆ·</span>
        <span class="hljs-type">Authentication</span> <span class="hljs-variable">auth</span> <span class="hljs-operator">=</span> SecurityContextHolder.getContext().getAuthentication();
        <span class="hljs-type">String</span> <span class="hljs-variable">username</span> <span class="hljs-operator">=</span> auth.getName();
        
        <span class="hljs-keyword">return</span> productService.getProductsByOwner(username);
    }
    
    <span class="hljs-meta">@PostMapping("/admin/products")</span>
    <span class="hljs-meta">@PreAuthorize("hasRole('ADMIN')")</span>  <span class="hljs-comment">// éœ€è¦ADMINè§’è‰²</span>
    <span class="hljs-keyword">public</span> Product <span class="hljs-title function_">createProduct</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> ProductDTO dto)</span> {
        <span class="hljs-keyword">return</span> productService.createProduct(dto);
    }
    
    <span class="hljs-meta">@DeleteMapping("/admin/products/{id}")</span>
    <span class="hljs-meta">@PreAuthorize("hasPermission(#id, 'product', 'delete')")</span>  <span class="hljs-comment">// æ–¹æ³•çº§æƒé™æ§åˆ¶</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">deleteProduct</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable</span> Long id)</span> {
        productService.deleteProduct(id);
    }
}
</code></pre>
<h3 data-id="heading-6">Spring Securityçš„ä¼˜åŠ¿ä¸ç—›ç‚¹</h3>
<p><strong>ä¼˜åŠ¿ï¼š</strong></p>
<ol>
<li><strong>Springç”Ÿæ€åŸç”Ÿæ”¯æŒ</strong>ï¼šä¸Spring Bootã€Spring Cloudæ— ç¼é›†æˆ</li>
<li><strong>åŠŸèƒ½å…¨é¢</strong>ï¼šè®¤è¯ã€æˆæƒã€é˜²æŠ¤ï¼ˆCSRFã€CORSã€ç‚¹å‡»åŠ«æŒç­‰ï¼‰ä¸€åº”ä¿±å…¨</li>
<li><strong>é«˜åº¦å¯å®šåˆ¶</strong>ï¼šå‡ ä¹æ¯ä¸ªç»„ä»¶éƒ½å¯ä»¥è‡ªå®šä¹‰æˆ–æ›¿æ¢</li>
<li><strong>ç¤¾åŒºå¼ºå¤§</strong>ï¼šSpringå®˜æ–¹ç»´æŠ¤ï¼Œæ–‡æ¡£å®Œå–„ï¼Œç¤¾åŒºæ´»è·ƒ</li>
<li><strong>ä¼ä¸šçº§ç‰¹æ€§</strong>ï¼šOAuth2ã€SAMLã€LDAPç­‰ä¼ä¸šçº§é›†æˆæ”¯æŒ</li>
</ol>
<p><strong>ç—›ç‚¹ï¼š</strong></p>
<ol>
<li><strong>å­¦ä¹ æ›²çº¿é™¡å³­</strong>ï¼šæ¦‚å¿µå¤æ‚ï¼Œé…ç½®ç¹ç</li>
<li><strong>è¿‡åº¦è®¾è®¡æ„Ÿ</strong>ï¼šç®€å•éœ€æ±‚ä¹Ÿéœ€è¦å¤æ‚é…ç½®</li>
<li><strong>è°ƒè¯•å›°éš¾</strong>ï¼šè¿‡æ»¤å™¨é“¾å¤æ‚ï¼Œé—®é¢˜å®šä½å›°éš¾</li>
<li><strong>æ€§èƒ½å¼€é”€</strong>ï¼šå®Œæ•´çš„è¿‡æ»¤å™¨é“¾å¸¦æ¥ä¸€å®šæ€§èƒ½æŸå¤±</li>
</ol>
<p><strong>é€‚ç”¨åœºæ™¯ï¼š</strong></p>
<ul>
<li>å¤§å‹ä¼ä¸šçº§åº”ç”¨</li>
<li>éœ€è¦ä¸Springç”Ÿæ€æ·±åº¦é›†æˆçš„é¡¹ç›®</li>
<li>éœ€è¦OAuth2ã€LDAPç­‰ä¼ä¸šçº§è®¤è¯åè®®çš„é¡¹ç›®</li>
<li>å›¢é˜Ÿæœ‰Spring Securityç»éªŒçš„åœºæ™¯</li>
</ul>
<p>æœ‰äº›å°ä¼™ä¼´åˆšå¼€å§‹å­¦Spring Securityæ—¶ï¼Œå¯èƒ½ä¼šè¢«å®ƒå¤æ‚çš„æ¦‚å¿µææ™•ï¼Œæ¯”å¦‚ï¼š<code>SecurityContext</code>ã€<code>Authentication</code>ã€<code>UserDetails</code>ã€<code>GrantedAuthority</code>ç­‰ç­‰ã€‚</p>
<p>ä½†ä¸€æ—¦æŒæ¡äº†å®ƒçš„è®¾è®¡å“²å­¦ï¼Œä½ ä¼šå‘ç°å®ƒçœŸçš„å¾ˆå¼ºå¤§ã€‚</p>
<h2 data-id="heading-7">3 Apache Shiroï¼šç®€å•ç›´è§‚çš„â€œè½»éª‘å…µâ€</h2>
<h3 data-id="heading-8">3.1 Shiroæ˜¯ä»€ä¹ˆï¼Ÿ</h3>
<p>Apache Shiroæ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§ä¸”æ˜“äºä½¿ç”¨çš„Javaå®‰å…¨æ¡†æ¶ï¼Œå®ƒçš„è®¾è®¡å“²å­¦æ˜¯ï¼š<strong>ç®€åŒ–åº”ç”¨å®‰å…¨ï¼Œè®©å®‰å…¨å˜å¾—æ›´ç®€å•</strong>ã€‚</p>
<p>å¦‚æœè¯´Spring Securityæ˜¯é‡å‹å¦å…‹ï¼Œé‚£ä¹ˆShiroå°±æ˜¯çµæ´»æœºåŠ¨çš„è½»éª‘å…µã€‚</p>
<h3 data-id="heading-9">3.2 æ ¸å¿ƒæ¶æ„ï¼šå››å¤§æ ¸å¿ƒæ¦‚å¿µ</h3>
<p>Shiroçš„æ¶æ„å›´ç»•å››ä¸ªæ ¸å¿ƒæ¦‚å¿µæ„å»ºï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c09f44fd817149d59381c390cbde4d5b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuP5LiJ6K-05oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767613200&amp;x-signature=s8iIMYEWyFWNIkM7mUBx4U4h%2Fto%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-10">3.3 å¿«é€Ÿå®ç°åŸºäºURLçš„æƒé™æ§åˆ¶</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// 1. Shiroé…ç½®ç±»</span>
<span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ShiroConfig</span> {
    
    <span class="hljs-comment">// åˆ›å»ºShiroFilterFactoryBean</span>
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> ShiroFilterFactoryBean <span class="hljs-title function_">shiroFilterFactoryBean</span><span class="hljs-params">(
            SecurityManager securityManager)</span> {
        <span class="hljs-type">ShiroFilterFactoryBean</span> <span class="hljs-variable">factoryBean</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ShiroFilterFactoryBean</span>();
        factoryBean.setSecurityManager(securityManager);
        
        <span class="hljs-comment">// è®¾ç½®ç™»å½•é¡µé¢</span>
        factoryBean.setLoginUrl(<span class="hljs-string">"/login"</span>);
        <span class="hljs-comment">// è®¾ç½®æœªæˆæƒé¡µé¢</span>
        factoryBean.setUnauthorizedUrl(<span class="hljs-string">"/unauthorized"</span>);
        
        <span class="hljs-comment">// é…ç½®æ‹¦æˆªè§„åˆ™</span>
        Map&lt;String, String&gt; filterChainDefinitionMap = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedHashMap</span>&lt;&gt;();
        
        <span class="hljs-comment">// é™æ€èµ„æºæ”¾è¡Œ</span>
        filterChainDefinitionMap.put(<span class="hljs-string">"/static/**"</span>, <span class="hljs-string">"anon"</span>);
        filterChainDefinitionMap.put(<span class="hljs-string">"/css/**"</span>, <span class="hljs-string">"anon"</span>);
        filterChainDefinitionMap.put(<span class="hljs-string">"/js/**"</span>, <span class="hljs-string">"anon"</span>);
        
        <span class="hljs-comment">// å…¬å¼€æ¥å£</span>
        filterChainDefinitionMap.put(<span class="hljs-string">"/api/public/**"</span>, <span class="hljs-string">"anon"</span>);
        filterChainDefinitionMap.put(<span class="hljs-string">"/login"</span>, <span class="hljs-string">"anon"</span>);
        
        <span class="hljs-comment">// éœ€è¦è®¤è¯çš„æ¥å£</span>
        filterChainDefinitionMap.put(<span class="hljs-string">"/api/user/**"</span>, <span class="hljs-string">"authc"</span>);
        filterChainDefinitionMap.put(<span class="hljs-string">"/api/admin/**"</span>, <span class="hljs-string">"authc, roles[admin]"</span>);
        
        <span class="hljs-comment">// éœ€è¦ç‰¹å®šæƒé™çš„æ¥å£</span>
        filterChainDefinitionMap.put(<span class="hljs-string">"/api/products/create"</span>, <span class="hljs-string">"authc, perms[product:create]"</span>);
        filterChainDefinitionMap.put(<span class="hljs-string">"/api/products/delete/*"</span>, <span class="hljs-string">"authc, perms[product:delete]"</span>);
        
        <span class="hljs-comment">// å…¶ä»–æ‰€æœ‰è¯·æ±‚éœ€è¦è®¤è¯</span>
        filterChainDefinitionMap.put(<span class="hljs-string">"/**"</span>, <span class="hljs-string">"authc"</span>);
        
        factoryBean.setFilterChainDefinitionMap(filterChainDefinitionMap);
        <span class="hljs-keyword">return</span> factoryBean;
    }
    
    <span class="hljs-comment">// åˆ›å»ºSecurityManager</span>
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> SecurityManager <span class="hljs-title function_">securityManager</span><span class="hljs-params">()</span> {
        <span class="hljs-type">DefaultWebSecurityManager</span> <span class="hljs-variable">securityManager</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DefaultWebSecurityManager</span>();
        
        <span class="hljs-comment">// è®¾ç½®Realm</span>
        securityManager.setRealm(customRealm());
        
        <span class="hljs-comment">// è®¾ç½®Sessionç®¡ç†å™¨</span>
        securityManager.setSessionManager(sessionManager());
        
        <span class="hljs-comment">// è®¾ç½®ç¼“å­˜ç®¡ç†å™¨</span>
        securityManager.setCacheManager(cacheManager());
        
        <span class="hljs-keyword">return</span> securityManager;
    }
    
    <span class="hljs-comment">// è‡ªå®šä¹‰Realmï¼ˆè¿æ¥å®‰å…¨æ•°æ®æºï¼‰</span>
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> Realm <span class="hljs-title function_">customRealm</span><span class="hljs-params">()</span> {
        <span class="hljs-type">CustomRealm</span> <span class="hljs-variable">realm</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">CustomRealm</span>();
        
        <span class="hljs-comment">// è®¾ç½®å¯†ç åŒ¹é…å™¨</span>
        <span class="hljs-type">HashedCredentialsMatcher</span> <span class="hljs-variable">credentialsMatcher</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashedCredentialsMatcher</span>();
        credentialsMatcher.setHashAlgorithmName(<span class="hljs-string">"SHA-256"</span>);
        credentialsMatcher.setHashIterations(<span class="hljs-number">1024</span>);
        credentialsMatcher.setStoredCredentialsHexEncoded(<span class="hljs-literal">false</span>);
        realm.setCredentialsMatcher(credentialsMatcher);
        
        <span class="hljs-comment">// å¼€å¯ç¼“å­˜</span>
        realm.setCachingEnabled(<span class="hljs-literal">true</span>);
        realm.setAuthenticationCachingEnabled(<span class="hljs-literal">true</span>);
        realm.setAuthenticationCacheName(<span class="hljs-string">"authenticationCache"</span>);
        realm.setAuthorizationCachingEnabled(<span class="hljs-literal">true</span>);
        realm.setAuthorizationCacheName(<span class="hljs-string">"authorizationCache"</span>);
        
        <span class="hljs-keyword">return</span> realm;
    }
}

<span class="hljs-comment">// 2. è‡ªå®šä¹‰Realmå®ç°</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CustomRealm</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AuthorizingRealm</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> UserService userService;
    
    <span class="hljs-comment">// è®¤è¯é€»è¾‘ï¼šéªŒè¯ç”¨æˆ·èº«ä»½</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> AuthenticationInfo <span class="hljs-title function_">doGetAuthenticationInfo</span><span class="hljs-params">(
            AuthenticationToken token)</span> <span class="hljs-keyword">throws</span> AuthenticationException {
        
        <span class="hljs-type">UsernamePasswordToken</span> <span class="hljs-variable">upToken</span> <span class="hljs-operator">=</span> (UsernamePasswordToken) token;
        <span class="hljs-type">String</span> <span class="hljs-variable">username</span> <span class="hljs-operator">=</span> upToken.getUsername();
        
        <span class="hljs-comment">// ä»æ•°æ®åº“æŸ¥è¯¢ç”¨æˆ·</span>
        <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> userService.findByUsername(username);
        <span class="hljs-keyword">if</span> (user == <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UnknownAccountException</span>(<span class="hljs-string">"ç”¨æˆ·ä¸å­˜åœ¨"</span>);
        }
        
        <span class="hljs-keyword">if</span> (!user.isEnabled()) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DisabledAccountException</span>(<span class="hljs-string">"ç”¨æˆ·å·²è¢«ç¦ç”¨"</span>);
        }
        
        <span class="hljs-comment">// è¿”å›è®¤è¯ä¿¡æ¯</span>
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SimpleAuthenticationInfo</span>(
            user, <span class="hljs-comment">// èº«ä»½ principal</span>
            user.getPassword(), <span class="hljs-comment">// å‡­è¯ credentials</span>
            getName() <span class="hljs-comment">// realm name</span>
        );
    }
    
    <span class="hljs-comment">// æˆæƒé€»è¾‘ï¼šè·å–ç”¨æˆ·çš„è§’è‰²å’Œæƒé™</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> AuthorizationInfo <span class="hljs-title function_">doGetAuthorizationInfo</span><span class="hljs-params">(
            PrincipalCollection principals)</span> {
        
        <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> (User) principals.getPrimaryPrincipal();
        <span class="hljs-type">SimpleAuthorizationInfo</span> <span class="hljs-variable">authorizationInfo</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SimpleAuthorizationInfo</span>();
        
        <span class="hljs-comment">// æ·»åŠ è§’è‰²</span>
        Set&lt;String&gt; roles = userService.findRolesByUserId(user.getId());
        authorizationInfo.setRoles(roles);
        
        <span class="hljs-comment">// æ·»åŠ æƒé™</span>
        Set&lt;String&gt; permissions = userService.findPermissionsByUserId(user.getId());
        authorizationInfo.setStringPermissions(permissions);
        
        <span class="hljs-keyword">return</span> authorizationInfo;
    }
}

<span class="hljs-comment">// 3. åœ¨Controllerä¸­ä½¿ç”¨Shiro</span>
<span class="hljs-meta">@RestController</span>
<span class="hljs-meta">@RequestMapping("/api")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ProductController</span> {
    
    <span class="hljs-meta">@GetMapping("/products")</span>
    <span class="hljs-keyword">public</span> List&lt;Product&gt; <span class="hljs-title function_">getProducts</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// è·å–å½“å‰ç”¨æˆ·</span>
        <span class="hljs-type">Subject</span> <span class="hljs-variable">currentUser</span> <span class="hljs-operator">=</span> SecurityUtils.getSubject();
        
        <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦å·²è®¤è¯</span>
        <span class="hljs-keyword">if</span> (!currentUser.isAuthenticated()) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UnauthorizedException</span>(<span class="hljs-string">"è¯·å…ˆç™»å½•"</span>);
        }
        
        <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦æœ‰æƒé™</span>
        <span class="hljs-keyword">if</span> (!currentUser.isPermitted(<span class="hljs-string">"product:view"</span>)) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ForbiddenException</span>(<span class="hljs-string">"æ²¡æœ‰æŸ¥çœ‹æƒé™"</span>);
        }
        
        <span class="hljs-comment">// æ‰§è¡Œä¸šåŠ¡é€»è¾‘</span>
        <span class="hljs-keyword">return</span> productService.getAllProducts();
    }
    
    <span class="hljs-meta">@PostMapping("/products")</span>
    <span class="hljs-keyword">public</span> Product <span class="hljs-title function_">createProduct</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> ProductDTO dto)</span> {
        <span class="hljs-type">Subject</span> <span class="hljs-variable">currentUser</span> <span class="hljs-operator">=</span> SecurityUtils.getSubject();
        
        <span class="hljs-comment">// ä½¿ç”¨Shiroçš„æƒé™æ³¨è§£ï¼ˆéœ€è¦AOPæ”¯æŒï¼‰</span>
        currentUser.checkPermission(<span class="hljs-string">"product:create"</span>);
        
        <span class="hljs-comment">// æˆ–è€…ä½¿ç”¨ç¼–ç¨‹å¼æ£€æŸ¥</span>
        <span class="hljs-comment">// if (!currentUser.isPermitted("product:create")) {</span>
        <span class="hljs-comment">//     throw new ForbiddenException("æ²¡æœ‰åˆ›å»ºæƒé™");</span>
        <span class="hljs-comment">// }</span>
        
        <span class="hljs-keyword">return</span> productService.createProduct(dto);
    }
    
    <span class="hljs-meta">@GetMapping("/admin/dashboard")</span>
    <span class="hljs-keyword">public</span> DashboardVO <span class="hljs-title function_">getAdminDashboard</span><span class="hljs-params">()</span> {
        <span class="hljs-type">Subject</span> <span class="hljs-variable">currentUser</span> <span class="hljs-operator">=</span> SecurityUtils.getSubject();
        
        <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦å…·æœ‰adminè§’è‰²</span>
        currentUser.checkRole(<span class="hljs-string">"admin"</span>);
        
        <span class="hljs-keyword">return</span> dashboardService.getAdminDashboard();
    }
}
</code></pre>
<h3 data-id="heading-11">Shiroçš„ä¼˜åŠ¿ä¸ç—›ç‚¹</h3>
<p><strong>ä¼˜åŠ¿ï¼š</strong></p>
<ol>
<li><strong>ç®€å•ç›´è§‚</strong>ï¼šAPIè®¾è®¡ç®€æ´ï¼Œå­¦ä¹ æˆæœ¬ä½</li>
<li><strong>é…ç½®çµæ´»</strong>ï¼šæ”¯æŒINIã€XMLã€æ³¨è§£ç­‰å¤šç§é…ç½®æ–¹å¼</li>
<li><strong>åŠŸèƒ½å®Œæ•´</strong>ï¼šè®¤è¯ã€æˆæƒã€ä¼šè¯ç®¡ç†ã€åŠ å¯†ã€ç¼“å­˜ç­‰ä¸€åº”ä¿±å…¨</li>
<li><strong>ä¸ä¾èµ–å®¹å™¨</strong>ï¼šå¯ä»¥åœ¨ä»»ä½•Javaç¯å¢ƒä¸­è¿è¡Œ</li>
<li><strong>æ˜“äºé›†æˆ</strong>ï¼šä¸Springã€Spring Bootç­‰æ¡†æ¶é›†æˆç®€å•</li>
</ol>
<p><strong>ç—›ç‚¹ï¼š</strong></p>
<ol>
<li><strong>Springç”Ÿæ€æ•´åˆä¸å¤ŸåŸç”Ÿ</strong>ï¼šéœ€è¦é¢å¤–é…ç½®</li>
<li><strong>ç¤¾åŒºæ´»è·ƒåº¦ä¸‹é™</strong>ï¼šç›¸æ¯”Spring Securityï¼Œç¤¾åŒºç»´æŠ¤åŠ›åº¦å‡å¼±</li>
<li><strong>åŠŸèƒ½æ‰©å±•æ€§æœ‰é™</strong>ï¼šæŸäº›é«˜çº§åŠŸèƒ½éœ€è¦è‡ªå·±å®ç°</li>
<li><strong>æ–‡æ¡£ç›¸å¯¹é™ˆæ—§</strong>ï¼šéƒ¨åˆ†æ–‡æ¡£æ›´æ–°ä¸åŠæ—¶</li>
</ol>
<p><strong>é€‚ç”¨åœºæ™¯ï¼š</strong></p>
<ul>
<li>ä¸­å°å‹é¡¹ç›®ï¼Œè¿½æ±‚å¿«é€Ÿå¼€å‘</li>
<li>éSpringé¡¹ç›®æˆ–Springç”Ÿæ€ä¸é‡çš„é¡¹ç›®</li>
<li>å›¢é˜Ÿå¯¹Spring Securityä¸ç†Ÿæ‚‰</li>
<li>éœ€è¦ç®€å•æƒé™æ§åˆ¶çš„å†…éƒ¨ç³»ç»Ÿ</li>
</ul>
<p>æœ‰äº›å°ä¼™ä¼´å–œæ¬¢Shiroçš„ç®€æ´ï¼Œç‰¹åˆ«æ˜¯å®ƒçš„INIé…ç½®æ–‡ä»¶ï¼Œå‡ è¡Œé…ç½®å°±èƒ½æå®šåŸºæœ¬çš„æƒé™æ§åˆ¶ã€‚</p>
<p>ä½†å½“ä½ éœ€è¦æ›´å¤æ‚çš„åŠŸèƒ½æ—¶ï¼Œå¯èƒ½ä¼šå‘ç°éœ€è¦è‡ªå·±å†™ä¸å°‘ä»£ç ã€‚</p>
<p>æœ€è¿‘ä¸ºäº†å¸®åŠ©å¤§å®¶æ‰¾å·¥ä½œï¼Œä¸“é—¨å»ºäº†ä¸€äº›å·¥ä½œå†…æ¨ç¾¤ï¼Œå„å¤§åŸå¸‚éƒ½æœ‰ï¼Œæ¬¢è¿å„ä½HRå’Œæ‰¾å·¥ä½œçš„å°ä¼™ä¼´è¿›ç¾¤äº¤æµï¼Œç¾¤é‡Œç›®å‰å·²ç»æ”¶é›†äº†20å¤šå®¶å¤§å‚çš„å·¥ä½œå†…æ¨å²—ä½ã€‚åŠ è‹ä¸‰çš„å¾®ä¿¡ï¼šli_su223ï¼Œå¤‡æ³¨ï¼šæ˜é‡‘+æ‰€åœ¨åŸå¸‚ï¼Œå³å¯è¿›ç¾¤ã€‚</p>
<h2 data-id="heading-12">4 Sa-Tokenï¼šå›½äº§æ–°æ˜Ÿçš„â€œåèµ·ä¹‹ç§€â€</h2>
<h3 data-id="heading-13">4.1 Sa-Tokenæ˜¯ä»€ä¹ˆï¼Ÿ</h3>
<p>Sa-Tokenæ˜¯ä¸€ä¸ªè½»é‡çº§Javaæƒé™è®¤è¯æ¡†æ¶ï¼Œç”±å›½å†…å¼€å‘è€…å¼€å‘ã€‚</p>
<p>å®ƒçš„è®¾è®¡ç†å¿µæ˜¯ï¼š<strong>ä»¥æœ€å°‘çš„é…ç½®ï¼Œå®Œæˆæœ€å…¨é¢çš„æƒé™è®¤è¯åŠŸèƒ½</strong>ã€‚</p>
<p>åœ¨Spring Securityå’ŒShiroä¹‹å¤–ï¼ŒSa-Tokenæä¾›äº†ä¸€ç§æ–°çš„é€‰æ‹©ã€‚</p>
<h3 data-id="heading-14">4.2 æ ¸å¿ƒç‰¹æ€§ï¼šç®€å•è€Œå¼ºå¤§</h3>
<p>Sa-Tokençš„æ ¸å¿ƒè®¾è®¡å“²å­¦å¯ä»¥æ¦‚æ‹¬ä¸ºï¼šâ€œç®€å•ã€å¼ºå¤§ã€çµæ´»â€ã€‚</p>
<p>å®ƒé€šè¿‡å‡ ä¸ªæ ¸å¿ƒç»„ä»¶å®ç°äº†å®Œæ•´çš„å®‰å…¨æ§åˆ¶ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9d275a3bba404e29864406786b42dc4c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuP5LiJ6K-05oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767613200&amp;x-signature=7jBSQjBEqNiykOm7%2FrXRTTYONaI%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-15">4.3 5åˆ†é’Ÿæ­å»ºå®Œæ•´æƒé™ç³»ç»Ÿ</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// 1. æ·»åŠ ä¾èµ–ï¼ˆpom.xmlï¼‰</span>
<span class="hljs-comment">// &lt;dependency&gt;</span>
<span class="hljs-comment">//     &lt;groupId&gt;cn.dev33&lt;/groupId&gt;</span>
<span class="hljs-comment">//     &lt;artifactId&gt;sa-token-spring-boot-starter&lt;/artifactId&gt;</span>
<span class="hljs-comment">//     &lt;version&gt;1.34.0&lt;/version&gt;</span>
<span class="hljs-comment">// &lt;/dependency&gt;</span>

<span class="hljs-comment">// 2. é…ç½®æ–‡ä»¶ï¼ˆapplication.ymlï¼‰</span>
<span class="hljs-comment">// sa-token:</span>
<span class="hljs-comment">//   token-name: satoken           # tokenåç§°</span>
<span class="hljs-comment">//   timeout: 2592000             # tokenæœ‰æ•ˆæœŸï¼Œå•ä½ç§’ï¼Œé»˜è®¤30å¤©</span>
<span class="hljs-comment">//   active-timeout: -1           # tokenæ´»è·ƒæœ‰æ•ˆæœŸï¼Œ-1ä»£è¡¨ä¸é™åˆ¶</span>
<span class="hljs-comment">//   is-concurrent: true          # æ˜¯å¦å…è®¸å¹¶å‘ç™»å½•</span>
<span class="hljs-comment">//   is-share: true               # åœ¨å¤šäººç™»å½•åŒä¸€è´¦å·æ—¶ï¼Œæ˜¯å¦å…±äº«token</span>
<span class="hljs-comment">//   max-login-count: 12          # åŒä¸€è´¦å·æœ€å¤§ç™»å½•æ•°é‡</span>
<span class="hljs-comment">//   is-write-header: true        # æ˜¯å¦å°†tokenå†™å…¥å“åº”å¤´</span>
<span class="hljs-comment">//   token-style: uuid            # tokené£æ ¼</span>
<span class="hljs-comment">//   is-log: false                # æ˜¯å¦æ‰“å°æ“ä½œæ—¥å¿—</span>

<span class="hljs-comment">// 3. é…ç½®ç±»ï¼ˆå¯é€‰ï¼‰</span>
<span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SaTokenConfig</span> {
    
    <span class="hljs-comment">// æ³¨å†Œæ‹¦æˆªå™¨</span>
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> SaInterceptor <span class="hljs-title function_">saInterceptor</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SaInterceptor</span>()
            <span class="hljs-comment">// æ ¡éªŒç™»å½•çŠ¶æ€ï¼Œä¸åŒ…å«ç™»å½•æ¥å£</span>
            .addPathPatterns(<span class="hljs-string">"/**"</span>)
            .excludePathPatterns(<span class="hljs-string">"/api/user/login"</span>)
            .excludePathPatterns(<span class="hljs-string">"/api/public/**"</span>)
            
            <span class="hljs-comment">// æƒé™æ ¡éªŒè§„åˆ™</span>
            .check(r -&gt; {
                <span class="hljs-comment">// 1. æ£€æŸ¥ç™»å½•çŠ¶æ€</span>
                SaRouter.match(<span class="hljs-string">"/api/**"</span>, () -&gt; {
                    StpUtil.checkLogin();
                });
                
                <span class="hljs-comment">// 2. è§’è‰²æ ¡éªŒ</span>
                SaRouter.match(<span class="hljs-string">"/api/admin/**"</span>, () -&gt; {
                    StpUtil.checkRole(<span class="hljs-string">"admin"</span>);
                });
                
                <span class="hljs-comment">// 3. æƒé™æ ¡éªŒ</span>
                SaRouter.match(<span class="hljs-string">"/api/products/create"</span>, () -&gt; {
                    StpUtil.checkPermission(<span class="hljs-string">"product.create"</span>);
                });
                
                SaRouter.match(<span class="hljs-string">"/api/products/delete/**"</span>, () -&gt; {
                    StpUtil.checkPermission(<span class="hljs-string">"product.delete"</span>);
                });
            });
    }
}

<span class="hljs-comment">// 4. ç™»å½•è®¤è¯Controller</span>
<span class="hljs-meta">@RestController</span>
<span class="hljs-meta">@RequestMapping("/api/user")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserController</span> {
    
    <span class="hljs-meta">@PostMapping("/login")</span>
    <span class="hljs-keyword">public</span> ApiResult <span class="hljs-title function_">login</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> LoginDTO dto)</span> {
        <span class="hljs-comment">// 1. éªŒè¯ç”¨æˆ·åå¯†ç </span>
        <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> userService.findByUsername(dto.getUsername());
        <span class="hljs-keyword">if</span> (user == <span class="hljs-literal">null</span> || !passwordEncoder.matches(dto.getPassword(), user.getPassword())) {
            <span class="hljs-keyword">return</span> ApiResult.error(<span class="hljs-string">"ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯"</span>);
        }
        
        <span class="hljs-comment">// 2. ç™»å½•ï¼ˆSa-Tokenä¼šè‡ªåŠ¨åˆ›å»ºtokenï¼‰</span>
        StpUtil.login(user.getId());
        
        <span class="hljs-comment">// 3. è·å–tokenä¿¡æ¯</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">tokenValue</span> <span class="hljs-operator">=</span> StpUtil.getTokenValue();
        <span class="hljs-type">long</span> <span class="hljs-variable">tokenTimeout</span> <span class="hljs-operator">=</span> StpUtil.getTokenTimeout();
        
        <span class="hljs-comment">// 4. è¿”å›ç”¨æˆ·ä¿¡æ¯å’Œtoken</span>
        <span class="hljs-type">LoginVO</span> <span class="hljs-variable">vo</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">LoginVO</span>();
        vo.setUserId(user.getId());
        vo.setUsername(user.getUsername());
        vo.setToken(tokenValue);
        vo.setExpireTime(tokenTimeout);
        
        <span class="hljs-comment">// 5. å¯ä»¥è®¾ç½®ä¸€äº›sessionä¿¡æ¯</span>
        StpUtil.getSession().set(<span class="hljs-string">"userInfo"</span>, user);
        
        <span class="hljs-keyword">return</span> ApiResult.success(<span class="hljs-string">"ç™»å½•æˆåŠŸ"</span>, vo);
    }
    
    <span class="hljs-meta">@PostMapping("/logout")</span>
    <span class="hljs-keyword">public</span> ApiResult <span class="hljs-title function_">logout</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// æ³¨é”€å½“å‰ä¼šè¯</span>
        StpUtil.logout();
        <span class="hljs-keyword">return</span> ApiResult.success(<span class="hljs-string">"æ³¨é”€æˆåŠŸ"</span>);
    }
    
    <span class="hljs-meta">@GetMapping("/info")</span>
    <span class="hljs-keyword">public</span> ApiResult <span class="hljs-title function_">getUserInfo</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// è·å–å½“å‰ç™»å½•ç”¨æˆ·ID</span>
        <span class="hljs-type">Object</span> <span class="hljs-variable">loginId</span> <span class="hljs-operator">=</span> StpUtil.getLoginId();
        
        <span class="hljs-comment">// è·å–ç”¨æˆ·ä¿¡æ¯</span>
        <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> userService.findById(Long.parseLong(loginId.toString()));
        
        <span class="hljs-comment">// è·å–ç”¨æˆ·æƒé™åˆ—è¡¨</span>
        List&lt;String&gt; permissionList = StpUtil.getPermissionList();
        
        <span class="hljs-comment">// è·å–ç”¨æˆ·è§’è‰²åˆ—è¡¨</span>
        List&lt;String&gt; roleList = StpUtil.getRoleList();
        
        <span class="hljs-type">UserInfoVO</span> <span class="hljs-variable">vo</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UserInfoVO</span>();
        vo.setUser(user);
        vo.setPermissions(permissionList);
        vo.setRoles(roleList);
        
        <span class="hljs-keyword">return</span> ApiResult.success(vo);
    }
}

<span class="hljs-comment">// 5. ä¸šåŠ¡Controllerä¸­ä½¿ç”¨</span>
<span class="hljs-meta">@RestController</span>
<span class="hljs-meta">@RequestMapping("/api/products")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ProductController</span> {
    
    <span class="hljs-meta">@GetMapping("/list")</span>
    <span class="hljs-keyword">public</span> ApiResult <span class="hljs-title function_">getProductList</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// æ— éœ€æ‰‹åŠ¨æ£€æŸ¥ç™»å½•çŠ¶æ€ï¼Œæ‹¦æˆªå™¨å·²å¤„ç†</span>
        
        <span class="hljs-comment">// è·å–å½“å‰ç™»å½•ç”¨æˆ·ID</span>
        <span class="hljs-type">long</span> <span class="hljs-variable">userId</span> <span class="hljs-operator">=</span> StpUtil.getLoginIdAsLong();
        
        List&lt;Product&gt; products = productService.getProductsByOwner(userId);
        <span class="hljs-keyword">return</span> ApiResult.success(products);
    }
    
    <span class="hljs-meta">@PostMapping("/create")</span>
    <span class="hljs-keyword">public</span> ApiResult <span class="hljs-title function_">createProduct</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> ProductDTO dto)</span> {
        <span class="hljs-comment">// ä½¿ç”¨æ³¨è§£æ–¹å¼æ£€æŸ¥æƒé™</span>
        <span class="hljs-comment">// @SaCheckPermission("product.create") ä¹Ÿå¯ä»¥è¿™æ ·ç”¨</span>
        
        <span class="hljs-comment">// ç¼–ç¨‹å¼æ£€æŸ¥æƒé™</span>
        StpUtil.checkPermission(<span class="hljs-string">"product.create"</span>);
        
        <span class="hljs-type">long</span> <span class="hljs-variable">userId</span> <span class="hljs-operator">=</span> StpUtil.getLoginIdAsLong();
        dto.setOwnerId(userId);
        
        <span class="hljs-type">Product</span> <span class="hljs-variable">product</span> <span class="hljs-operator">=</span> productService.createProduct(dto);
        <span class="hljs-keyword">return</span> ApiResult.success(product);
    }
    
    <span class="hljs-meta">@DeleteMapping("/{id}")</span>
    <span class="hljs-meta">@SaCheckPermission("product.delete")</span>  <span class="hljs-comment">// æ³¨è§£æ–¹å¼æƒé™æ£€æŸ¥</span>
    <span class="hljs-keyword">public</span> ApiResult <span class="hljs-title function_">deleteProduct</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable</span> Long id)</span> {
        <span class="hljs-comment">// é™¤äº†æƒé™æ£€æŸ¥ï¼Œè¿˜å¯ä»¥æ£€æŸ¥æ•°æ®æƒé™</span>
        <span class="hljs-type">Product</span> <span class="hljs-variable">product</span> <span class="hljs-operator">=</span> productService.getById(id);
        <span class="hljs-type">long</span> <span class="hljs-variable">currentUserId</span> <span class="hljs-operator">=</span> StpUtil.getLoginIdAsLong();
        
        <span class="hljs-keyword">if</span> (product.getOwnerId() != currentUserId) {
            <span class="hljs-comment">// ä¸æ˜¯è‡ªå·±çš„å•†å“ï¼Œæ£€æŸ¥æ˜¯å¦æœ‰ç®¡ç†å‘˜æƒé™</span>
            StpUtil.checkRole(<span class="hljs-string">"admin"</span>);
        }
        
        productService.deleteProduct(id);
        <span class="hljs-keyword">return</span> ApiResult.success(<span class="hljs-string">"åˆ é™¤æˆåŠŸ"</span>);
    }
    
    <span class="hljs-meta">@GetMapping("/admin/dashboard")</span>
    <span class="hljs-meta">@SaCheckRole("admin")</span>  <span class="hljs-comment">// æ³¨è§£æ–¹å¼è§’è‰²æ£€æŸ¥</span>
    <span class="hljs-keyword">public</span> ApiResult <span class="hljs-title function_">getAdminDashboard</span><span class="hljs-params">()</span> {
        <span class="hljs-type">DashboardVO</span> <span class="hljs-variable">dashboard</span> <span class="hljs-operator">=</span> dashboardService.getAdminDashboard();
        <span class="hljs-keyword">return</span> ApiResult.success(dashboard);
    }
}

<span class="hljs-comment">// 6. è¿›é˜¶åŠŸèƒ½ï¼šè¸¢äººä¸‹çº¿ã€è´¦å·å°ç¦</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AdvancedSecurityService</span> {
    
    <span class="hljs-comment">// å¼ºåˆ¶æ³¨é”€ï¼ˆè¸¢äººä¸‹çº¿ï¼‰</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">forceLogout</span><span class="hljs-params">(Object loginId)</span> {
        StpUtil.logout(loginId);
    }
    
    <span class="hljs-comment">// å°ç¦è´¦å·</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">disableAccount</span><span class="hljs-params">(Object loginId, <span class="hljs-type">long</span> disableTime)</span> {
        <span class="hljs-comment">// å°ç¦æŒ‡å®šæ—¶é—´ï¼ˆå•ä½ï¼šç§’ï¼‰</span>
        StpUtil.disable(loginId, disableTime);
    }
    
    <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦è¢«å°ç¦</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isDisabled</span><span class="hljs-params">(Object loginId)</span> {
        <span class="hljs-keyword">return</span> StpUtil.isDisable(loginId);
    }
    
    <span class="hljs-comment">// äºŒçº§è®¤è¯ï¼ˆæ•æ„Ÿæ“ä½œéœ€è¦å†æ¬¡éªŒè¯ï¼‰</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">startSecondAuth</span><span class="hljs-params">(<span class="hljs-type">long</span> ttl)</span> {
        <span class="hljs-comment">// å¼€å¯äºŒçº§è®¤è¯ï¼Œæœ‰æ•ˆæœŸä¸ºttlç§’</span>
        <span class="hljs-keyword">return</span> StpUtil.openSafe(ttl);
    }
    
    <span class="hljs-comment">// æ£€æŸ¥äºŒçº§è®¤è¯</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">checkSecondAuth</span><span class="hljs-params">()</span> {
        StpUtil.checkSafe();
    }
}
</code></pre>
<h3 data-id="heading-16">Sa-Tokençš„ä¼˜åŠ¿ä¸ç—›ç‚¹</h3>
<p><strong>ä¼˜åŠ¿ï¼š</strong></p>
<ol>
<li><strong>APIè®¾è®¡æå…¶ç®€æ´</strong>ï¼š<code>StpUtil.xxx()</code> å‡ ä¹æ¶µç›–äº†æ‰€æœ‰æ“ä½œ</li>
<li><strong>å¼€ç®±å³ç”¨</strong>ï¼šå‡ ä¹é›¶é…ç½®å°±èƒ½ä½¿ç”¨</li>
<li><strong>åŠŸèƒ½ä¸°å¯Œ</strong>ï¼šé™¤äº†åŸºç¡€è®¤è¯æˆæƒï¼Œè¿˜æä¾›è¸¢äººä¸‹çº¿ã€è´¦å·å°ç¦ã€äºŒçº§è®¤è¯ç­‰é«˜çº§åŠŸèƒ½</li>
<li><strong>å›½äº§æ¡†æ¶</strong>ï¼šä¸­æ–‡æ–‡æ¡£å®Œå–„ï¼Œç¬¦åˆå›½äººä½¿ç”¨ä¹ æƒ¯</li>
<li><strong>è½»é‡çº§</strong>ï¼šä¾èµ–å°‘ï¼Œå¯åŠ¨å¿«</li>
</ol>
<p><strong>ç—›ç‚¹ï¼š</strong></p>
<ol>
<li><strong>ç›¸å¯¹è¾ƒæ–°</strong>ï¼šç”Ÿæ€ä¸å¦‚Spring Securityå’ŒShiroæˆç†Ÿ</li>
<li><strong>ç¤¾åŒºè§„æ¨¡å°</strong>ï¼šé‡åˆ°å¤æ‚é—®é¢˜å¯èƒ½éš¾ä»¥æ‰¾åˆ°è§£å†³æ–¹æ¡ˆ</li>
<li><strong>ä¼ä¸šçº§ç‰¹æ€§æœ‰é™</strong>ï¼šå¯¹OAuth2ã€LDAPç­‰æ”¯æŒè¾ƒå¼±</li>
<li><strong>è¿‡åº¦å°è£…</strong>ï¼šæŸäº›åœºæ™¯ä¸‹çµæ´»æ€§ä¸è¶³</li>
</ol>
<p><strong>é€‚ç”¨åœºæ™¯ï¼š</strong></p>
<ul>
<li>ä¸­å°å‹é¡¹ç›®ï¼Œè¿½æ±‚å¼€å‘æ•ˆç‡</li>
<li>å›¢é˜Ÿå¯¹Spring Security/Shiroä¸ç†Ÿæ‚‰</li>
<li>éœ€è¦å¿«é€Ÿæ­å»ºæƒé™ç³»ç»Ÿçš„åŸå‹æˆ–å†…éƒ¨å·¥å…·</li>
<li>åå¥½å›½äº§æ¡†æ¶å’Œä¸­æ–‡æ–‡æ¡£çš„å›¢é˜Ÿ</li>
</ul>
<p>æœ‰äº›å°ä¼™ä¼´ç¬¬ä¸€æ¬¡ç”¨Sa-Tokenæ—¶ï¼Œä¼šè¢«å®ƒçš„ç®€æ´æƒŠè‰³åˆ°ã€‚å‡ è¡Œä»£ç å°±å®ç°äº†å…¶ä»–æ¡†æ¶éœ€è¦å¤§é‡é…ç½®çš„åŠŸèƒ½ã€‚</p>
<p>ä½†å¯¹äºå¤§å‹å¤æ‚ç³»ç»Ÿï¼Œå¯èƒ½éœ€è¦ä»”ç»†è¯„ä¼°å®ƒçš„æ‰©å±•æ€§å’Œé•¿æœŸç»´æŠ¤æ€§ã€‚</p>
<h2 data-id="heading-17">5 ä¸‰å¤§æ¡†æ¶å…¨æ–¹ä½å¯¹æ¯”</h2>
<p>äº†è§£äº†æ¯ä¸ªæ¡†æ¶çš„å•ç‹¬ç‰¹ç‚¹åï¼Œæˆ‘ä»¬æ¥ä¸€ä¸ªå…¨æ–¹ä½çš„å¯¹æ¯”ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c659ee10212142dca4427b30d9d06a55~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuP5LiJ6K-05oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767613200&amp;x-signature=sSb%2BHG2SL%2BGExFCQE2vL7X2g%2BAc%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-18">5.1 è¯¦ç»†å¯¹æ¯”è¡¨</h3>

































































<table><thead><tr><th>ç»´åº¦</th><th><strong>Spring Security</strong></th><th><strong>Apache Shiro</strong></th><th><strong>Sa-Token</strong></th></tr></thead><tbody><tr><td><strong>å­¦ä¹ æ›²çº¿</strong></td><td>é™¡å³­ â­â­â­â­â­</td><td>ä¸­ç­‰ â­â­â­â˜†â˜†</td><td>å¹³ç¼“ â­â­â˜†â˜†â˜†</td></tr><tr><td><strong>é…ç½®å¤æ‚åº¦</strong></td><td>å¤æ‚ â­â­â­â­â­</td><td>ä¸­ç­‰ â­â­â­â˜†â˜†</td><td>ç®€å• â­â˜†â˜†â˜†â˜†</td></tr><tr><td><strong>åŠŸèƒ½å®Œæ•´æ€§</strong></td><td>å…¨é¢ â­â­â­â­â­</td><td>å®Œæ•´ â­â­â­â­â˜†</td><td>ä¸°å¯Œ â­â­â­â˜†â˜†</td></tr><tr><td><strong>Springç”Ÿæ€é›†æˆ</strong></td><td>åŸç”Ÿ â­â­â­â­â­</td><td>è‰¯å¥½ â­â­â­â˜†â˜†</td><td>è‰¯å¥½ â­â­â­â˜†â˜†</td></tr><tr><td><strong>æ€§èƒ½å¼€é”€</strong></td><td>è¾ƒé«˜ â­â­â­â˜†â˜†</td><td>ä¸­ç­‰ â­â­â­â˜†â˜†</td><td>è¾ƒä½ â­â­â˜†â˜†â˜†</td></tr><tr><td><strong>ç¤¾åŒºæ´»è·ƒåº¦</strong></td><td>æ´»è·ƒ â­â­â­â­â­</td><td>ä¸€èˆ¬ â­â­â­â˜†â˜†</td><td>å¢é•¿ â­â­â­â˜†â˜†</td></tr><tr><td><strong>æ–‡æ¡£è´¨é‡</strong></td><td>ä¼˜ç§€ï¼ˆè‹±æ–‡ï¼‰â­â­â­â­â­</td><td>è‰¯å¥½ â­â­â­â˜†â˜†</td><td>ä¼˜ç§€ï¼ˆä¸­æ–‡ï¼‰â­â­â­â­â­</td></tr><tr><td><strong>æ‰©å±•æ€§</strong></td><td>å¼ºå¤§ â­â­â­â­â­</td><td>è‰¯å¥½ â­â­â­â˜†â˜†</td><td>ä¸€èˆ¬ â­â­â­â˜†â˜†</td></tr><tr><td><strong>ä¼ä¸šçº§ç‰¹æ€§</strong></td><td>ä¸°å¯Œ â­â­â­â­â­</td><td>æœ‰é™ â­â­â˜†â˜†â˜†</td><td>æœ‰é™ â­â­â˜†â˜†â˜†</td></tr></tbody></table>
<h3 data-id="heading-19">5.2 æŠ€æœ¯ç‰¹æ€§è¯¦ç»†å¯¹æ¯”</h3>



























































<table><thead><tr><th>ç‰¹æ€§</th><th>Spring Security</th><th>Apache Shiro</th><th>Sa-Token</th></tr></thead><tbody><tr><td><strong>è®¤è¯æ–¹å¼</strong></td><td>è¡¨å•ã€Basicã€OAuth2ã€LDAPã€SAMLç­‰</td><td>è¡¨å•ã€Basicã€CASç­‰</td><td>è¡¨å•ã€è‡ªå®šä¹‰</td></tr><tr><td><strong>æˆæƒæ¨¡å‹</strong></td><td>RBACã€ABACã€æ–¹æ³•çº§ã€URLçº§</td><td>RBACã€URLçº§ã€æ–¹æ³•çº§</td><td>RBACã€æ–¹æ³•çº§</td></tr><tr><td><strong>ä¼šè¯ç®¡ç†</strong></td><td>æ”¯æŒï¼Œä¸Spring Sessioné›†æˆ</td><td>å¼ºå¤§ï¼Œè‡ªå¸¦ä¼šè¯ç®¡ç†</td><td>æ”¯æŒï¼Œç®€å•æ˜“ç”¨</td></tr><tr><td><strong>å¯†ç åŠ å¯†</strong></td><td>å¤šç§åŠ å¯†æ–¹å¼æ”¯æŒ</td><td>å¤šç§åŠ å¯†æ–¹å¼æ”¯æŒ</td><td>æ”¯æŒ</td></tr><tr><td><strong>ç¼“å­˜æ”¯æŒ</strong></td><td>éœ€è¦è‡ªè¡Œé›†æˆSpring Cache</td><td>å†…ç½®ç¼“å­˜æ”¯æŒ</td><td>æ”¯æŒRedisç­‰</td></tr><tr><td><strong>å•ç‚¹ç™»å½•</strong></td><td>é€šè¿‡Spring Security OAuth2</td><td>éœ€è¦é¢å¤–æ¨¡å—</td><td>éœ€è¦é¢å¤–æ¨¡å—</td></tr><tr><td><strong>å¾®æœåŠ¡æ”¯æŒ</strong></td><td>ä¼˜ç§€ï¼Œä¸Spring Cloud GateWayé›†æˆ</td><td>ä¸€èˆ¬</td><td>æ”¯æŒ</td></tr><tr><td><strong>ç›‘æ§ç®¡ç†</strong></td><td>ä¸Spring Boot Actuatoré›†æˆ</td><td>éœ€è¦è‡ªè¡Œå®ç°</td><td>ç®€å•ç›‘æ§</td></tr></tbody></table>
<h2 data-id="heading-20">6 å¦‚ä½•åšå‡ºæœ€ä½³é€‰æ‹©ï¼Ÿ</h2>
<p>é¢å¯¹ä¸‰ä¸ªå„æœ‰ä¼˜åŠ£çš„æ¡†æ¶ï¼Œå¦‚ä½•åšå‡ºæœ€é€‚åˆè‡ªå·±é¡¹ç›®çš„é€‰æ‹©ï¼Ÿ</p>
<p>æˆ‘æ€»ç»“äº†ä¸€ä¸ªå†³ç­–æµç¨‹å›¾ï¼Œå¸®åŠ©ä½ åœ¨ä¸åŒåœºæ™¯ä¸‹åšå‡ºæ˜æ™ºå†³ç­–ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4ee998750388478c84fbd1b221a5ccd9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuP5LiJ6K-05oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767613200&amp;x-signature=Bu0r3mNtagDvb1jQH%2BFTw0mhQrY%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-21">6.1 å…·ä½“åœºæ™¯å»ºè®®</h3>
<h4 data-id="heading-22">åœºæ™¯ä¸€ï¼šå¤§å‹ç”µå•†å¹³å°ï¼ˆé€‰æ‹©Spring Securityï¼‰</h4>
<ul>
<li><strong>ç†ç”±</strong>ï¼šéœ€è¦å®Œå–„çš„OAuth2ç¤¾äº¤ç™»å½•ã€æ”¯ä»˜å®‰å…¨ã€é£æ§ç³»ç»Ÿ</li>
<li><strong>å®æ–½è¦ç‚¹</strong>ï¼š
<ol>
<li>ä½¿ç”¨Spring Security OAuth2 Clienté›†æˆç¬¬ä¸‰æ–¹ç™»å½•</li>
<li>è‡ªå®šä¹‰å®‰å…¨è¿‡æ»¤å™¨å®ç°é£æ§é€»è¾‘</li>
<li>ä¸Spring Cloud Gatewayæ•´åˆå®ç°ç»Ÿä¸€è®¤è¯</li>
<li>ä½¿ç”¨Method Securityæ³¨è§£å®ç°ç»†ç²’åº¦æƒé™æ§åˆ¶</li>
</ol>
</li>
</ul>
<h4 data-id="heading-23">åœºæ™¯äºŒï¼šä¼ä¸šå†…éƒ¨ç®¡ç†ç³»ç»Ÿï¼ˆé€‰æ‹©Apache Shiroï¼‰</h4>
<ul>
<li><strong>ç†ç”±</strong>ï¼šæƒé™æ¨¡å‹ç›¸å¯¹å›ºå®šï¼Œéœ€è¦å¿«é€Ÿå¼€å‘ï¼Œå›¢é˜Ÿç†Ÿæ‚‰Shiro</li>
<li><strong>å®æ–½è¦ç‚¹</strong>ï¼š
<ol>
<li>ä½¿ç”¨INIé…ç½®æ–‡ä»¶å¿«é€Ÿå®šä¹‰URLæƒé™è§„åˆ™</li>
<li>é›†æˆEhcacheç¼“å­˜æƒé™æ•°æ®æå‡æ€§èƒ½</li>
<li>è‡ªå®šä¹‰Realmè¿æ¥ä¼ä¸šLDAP/ADåŸŸ</li>
<li>åˆ©ç”¨Shiroæ ‡ç­¾åœ¨é¡µé¢ä¸Šæ§åˆ¶å…ƒç´ æ˜¾ç¤º</li>
</ol>
</li>
</ul>
<h4 data-id="heading-24">åœºæ™¯ä¸‰ï¼šåˆ›ä¸šå…¬å¸MVPäº§å“ï¼ˆé€‰æ‹©Sa-Tokenï¼‰</h4>
<ul>
<li><strong>ç†ç”±</strong>ï¼šéœ€è¦å¿«é€Ÿä¸Šçº¿éªŒè¯æƒ³æ³•ï¼Œå›¢é˜Ÿè§„æ¨¡å°ï¼Œè¿½æ±‚å¼€å‘æ•ˆç‡</li>
<li><strong>å®æ–½è¦ç‚¹</strong>ï¼š
<ol>
<li>åˆ©ç”¨Sa-Tokençš„é›¶é…ç½®ç‰¹æ€§å¿«é€Ÿæ­å»º</li>
<li>ä½¿ç”¨æ³¨è§£æ–¹å¼å®ç°åŸºæœ¬æƒé™æ§åˆ¶</li>
<li>é›†æˆRediså®ç°åˆ†å¸ƒå¼ä¼šè¯</li>
<li>åˆ©ç”¨Sa-Tokençš„è¸¢äººåŠŸèƒ½å®ç°åŸºç¡€ç®¡ç†</li>
</ol>
</li>
</ul>
<h4 data-id="heading-25">åœºæ™¯å››ï¼šå¾®æœåŠ¡æ¶æ„ç³»ç»Ÿï¼ˆæ··åˆæ–¹æ¡ˆï¼‰</h4>
<ul>
<li><strong>ç†ç”±</strong>ï¼šä¸åŒæœåŠ¡æœ‰ä¸åŒçš„å®‰å…¨éœ€æ±‚</li>
<li><strong>å®æ–½è¦ç‚¹</strong>ï¼š
<ol>
<li><strong>ç½‘å…³å±‚</strong>ï¼šSpring Security + OAuth2ï¼ˆç»Ÿä¸€è®¤è¯ï¼‰</li>
<li><strong>æ ¸å¿ƒä¸šåŠ¡æœåŠ¡</strong>ï¼šSpring Securityï¼ˆç»†ç²’åº¦æ§åˆ¶ï¼‰</li>
<li><strong>å†…éƒ¨ç®¡ç†æœåŠ¡</strong>ï¼šApache Shiroï¼ˆç®€å•æƒé™ï¼‰</li>
<li><strong>å·¥å…·ç±»å¾®æœåŠ¡</strong>ï¼šSa-Tokenï¼ˆå¿«é€Ÿå¼€å‘ï¼‰</li>
</ol>
</li>
</ul>
<h3 data-id="heading-26">6.2 å¦‚æœé€‰é”™äº†æ€ä¹ˆåŠï¼Ÿ</h3>
<p>æœ‰äº›å°ä¼™ä¼´å¯èƒ½ä¼šé‡åˆ°è¿™æ ·çš„æƒ…å†µï¼šé¡¹ç›®åˆæœŸé€‰å‹ä¸åˆé€‚ï¼Œéšç€ä¸šåŠ¡å‘å±•éœ€è¦è¿ç§»åˆ°å…¶ä»–æ¡†æ¶ã€‚</p>
<p>è¿™é‡Œæä¾›ä¸€äº›è¿ç§»å»ºè®®ï¼š</p>
<ol>
<li><strong>æ¸è¿›å¼è¿ç§»</strong>ï¼šæ–°æ—§æ¡†æ¶å¹¶è¡Œï¼Œé€æ­¥æ›¿æ¢</li>
<li><strong>æŠ½è±¡éš”ç¦»å±‚</strong>ï¼šåˆ›å»ºç»Ÿä¸€çš„å®‰å…¨æ¥å£ï¼Œåº•å±‚å®ç°å¯æ›¿æ¢</li>
<li><strong>åˆ†æ¨¡å—è¿ç§»</strong>ï¼šæŒ‰ä¸šåŠ¡æ¨¡å—é€ä¸ªè¿ç§»ï¼Œé™ä½é£é™©</li>
<li><strong>å……åˆ†æµ‹è¯•</strong>ï¼šç‰¹åˆ«æ˜¯è¾¹ç¼˜æ¡ˆä¾‹å’Œæƒé™ç»„åˆåœºæ™¯</li>
</ol>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æŠ½è±¡å®‰å…¨æ¥å£ç¤ºä¾‹</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">SecurityService</span> {
    <span class="hljs-comment">// è®¤è¯ç›¸å…³</span>
    <span class="hljs-type">boolean</span> <span class="hljs-title function_">login</span><span class="hljs-params">(String username, String password)</span>;
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">logout</span><span class="hljs-params">()</span>;
    <span class="hljs-type">boolean</span> <span class="hljs-title function_">isAuthenticated</span><span class="hljs-params">()</span>;
    
    <span class="hljs-comment">// æˆæƒç›¸å…³</span>
    <span class="hljs-type">boolean</span> <span class="hljs-title function_">hasPermission</span><span class="hljs-params">(String permission)</span>;
    <span class="hljs-type">boolean</span> <span class="hljs-title function_">hasRole</span><span class="hljs-params">(String role)</span>;
    
    <span class="hljs-comment">// ç”¨æˆ·ä¿¡æ¯</span>
    Object <span class="hljs-title function_">getCurrentUser</span><span class="hljs-params">()</span>;
    Long <span class="hljs-title function_">getCurrentUserId</span><span class="hljs-params">()</span>;
}

<span class="hljs-comment">// Spring Securityå®ç°</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SpringSecurityServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">SecurityService</span> {
    <span class="hljs-comment">// å®ç°åŸºäºSpring Securityçš„æ¥å£</span>
}

<span class="hljs-comment">// éœ€è¦è¿ç§»æ—¶ï¼Œåªéœ€å®ç°æ–°çš„å®ç°ç±»</span>
<span class="hljs-meta">@Service</span>  
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SaTokenServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">SecurityService</span> {
    <span class="hljs-comment">// å®ç°åŸºäºSa-Tokençš„æ¥å£</span>
    <span class="hljs-comment">// ä¸šåŠ¡ä»£ç æ— éœ€ä¿®æ”¹ï¼Œåªéœ€åˆ‡æ¢å®ç°</span>
}
</code></pre>
<h2 data-id="heading-27">æ€»ç»“</h2>
<p>ç»è¿‡æ·±å…¥åˆ†æï¼Œæˆ‘ä»¬å¯ä»¥å¾—å‡ºä»¥ä¸‹ç»“è®ºï¼š</p>
<ol>
<li><strong>Spring Security</strong>æ˜¯<strong>ä¼ä¸šçº§é‡å‹æ­¦å™¨</strong>ï¼ŒåŠŸèƒ½å…¨é¢ä½†å¤æ‚ï¼Œé€‚åˆå¤§å‹é¡¹ç›®å’Œæœ‰ç»éªŒçš„å›¢é˜Ÿã€‚</li>
<li><strong>Apache Shiro</strong>æ˜¯<strong>çµæ´»å®ç”¨çš„è½»éª‘å…µ</strong>ï¼Œå¹³è¡¡äº†åŠŸèƒ½ä¸å¤æ‚åº¦ï¼Œé€‚åˆå¤§å¤šæ•°ä¸­å°å‹é¡¹ç›®ã€‚</li>
<li><strong>Sa-Token</strong>æ˜¯<strong>å¿«é€Ÿå¼€å‘çš„åˆ©å™¨</strong>ï¼ŒAPIç®€æ´ä½†ç”Ÿæ€ç›¸å¯¹å¹´è½»ï¼Œé€‚åˆè¿½æ±‚å¼€å‘æ•ˆç‡çš„åœºæ™¯ã€‚</li>
</ol>
<p>å®é™…ä¸Šï¼Œ<strong>æ²¡æœ‰å®Œç¾çš„æ¡†æ¶ï¼Œåªæœ‰åˆé€‚çš„æ¡†æ¶</strong>ã€‚</p>
<h2 data-id="heading-28">æœ€åè¯´ä¸€å¥(æ±‚å…³æ³¨ï¼Œåˆ«ç™½å«–æˆ‘)</h2>
<p>å¦‚æœè¿™ç¯‡æ–‡ç« å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©ï¼Œæˆ–è€…æœ‰æ‰€å¯å‘çš„è¯ï¼Œå¸®å¿™å…³æ³¨ä¸€ä¸‹æˆ‘çš„åŒåå…¬ä¼—å·ï¼šè‹ä¸‰è¯´æŠ€æœ¯ï¼Œæ‚¨çš„æ”¯æŒæ˜¯æˆ‘åšæŒå†™ä½œæœ€å¤§çš„åŠ¨åŠ›ã€‚</p>
<p>æ±‚ä¸€é”®ä¸‰è¿ï¼šç‚¹èµã€è½¬å‘ã€åœ¨çœ‹ã€‚</p>
<p>å…³æ³¨å…¬ä¼—å·ï¼šã€è‹ä¸‰è¯´æŠ€æœ¯ã€‘ï¼Œåœ¨å…¬ä¼—å·ä¸­å›å¤ï¼šè¿›å¤§å‚ï¼Œå¯ä»¥å…è´¹è·å–æˆ‘æœ€è¿‘æ•´ç†çš„10ä¸‡å­—çš„é¢è¯•å®å…¸ï¼Œå¥½å¤šå°ä¼™ä¼´é è¿™ä¸ªå®å…¸æ‹¿åˆ°äº†å¤šå®¶å¤§å‚çš„offerã€‚</p>
<p>æ›´å¤šé¡¹ç›®å®æˆ˜åœ¨æˆ‘çš„æŠ€æœ¯ç½‘ç«™ï¼š<a href="https://link.juejin.cn?target=http%3A%2F%2Fwww.susan.net.cn%2Fproject" title="https://link.juejin.cn?target=http%3A%2F%2Fwww.susan.net.cn%2Fproject" target="_blank">www.susan.net.cn/project</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Tomcat Connectors 1.2.32 æºç ç¼–è¯‘å®‰è£…æ•™ç¨‹ï¼ˆå« mod_jk é…ç½®æ­¥éª¤ï¼‰]]></title>    <link>https://juejin.cn/post/7589093939656507444</link>    <guid>https://juejin.cn/post/7589093939656507444</guid>    <pubDate>2025-12-29T11:43:36.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589093939656507444" data-draft-id="7589104492882673716" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Tomcat Connectors 1.2.32 æºç ç¼–è¯‘å®‰è£…æ•™ç¨‹ï¼ˆå« mod_jk é…ç½®æ­¥éª¤ï¼‰"/> <meta itemprop="keywords" content="Tomcat"/> <meta itemprop="datePublished" content="2025-12-29T11:43:36.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æˆ·613541146016"/> <meta itemprop="url" content="https://juejin.cn/user/1602431422584832"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Tomcat Connectors 1.2.32 æºç ç¼–è¯‘å®‰è£…æ•™ç¨‹ï¼ˆå« mod_jk é…ç½®æ­¥éª¤ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1602431422584832/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æˆ·613541146016
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T11:43:36.000Z" title="Mon Dec 29 2025 11:43:36 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>â€‹</p>
<p><strong>1. å‡†å¤‡ç¯å¢ƒ</strong></p>
<p>å…ˆè£…å¥½è¿™äº›ä¸œè¥¿ï¼š</p>
<ul>
<li><strong>Apache HTTP Server</strong>ï¼ˆå°±æ˜¯ Apacheï¼‰</li>
<li><strong>Tomcat</strong></li>
<li>ç¼–è¯‘å™¨ï¼š<strong>gcc</strong>ã€<strong>make</strong></li>
<li>Java å¼€å‘ç¯å¢ƒï¼ˆJDKï¼‰</li>
</ul>
<p>åœ¨ Ubuntu/Debian ä¸Šä½ å¯ä»¥è¿™ä¹ˆè£…ï¼š</p>
<pre><code class="hljs language-sql" lang="sql">sudo apt <span class="hljs-keyword">update</span>
sudo apt install build<span class="hljs-operator">-</span>essential apache2 tomcat9 openjdk<span class="hljs-number">-11</span><span class="hljs-operator">-</span>jdk
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<hr/>
<h3 data-id="heading-0">2. ä¸‹è½½å¹¶è§£å‹æºç </h3>
<p><strong>å®‰è£…åŒ…ä¸‹è½½ï¼š</strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fpan.quark.cn%2Fs%2F220ddde3d4ce" title="https://pan.quark.cn/s/220ddde3d4ce" target="_blank" ref="nofollow noopener noreferrer">pan.quark.cn/s/220ddde3dâ€¦</a>****ï¼Œå‡è®¾ä½ å·²ç»ä¸‹è½½äº†Â <code>tomcat-connectors-1.2.32-src.tar.gz</code>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">tar -xzf tomcat-connectors-1.2.32-src.tar.gz
<span class="hljs-built_in">cd</span> tomcat-connectors-1.2.32-src/native
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<hr/>
<h3 data-id="heading-1">3. è®¾ç½®ç¯å¢ƒå˜é‡</h3>
<p>è¦è®©ç¼–è¯‘çŸ¥é“ Apache å’Œ Tomcat åœ¨å“ªï¼Œå¾—è®¾ç½®å‡ ä¸ªå˜é‡ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">export</span> <span class="hljs-variable constant_">APACHE_HOME</span>=<span class="hljs-regexp">/usr/</span>local/apache2   # æˆ–è€…ä½  <span class="hljs-title class_">Apache</span> å®é™…å®‰è£…è·¯å¾„
<span class="hljs-keyword">export</span> <span class="hljs-variable constant_">TOMCAT_HOME</span>=<span class="hljs-regexp">/usr/</span>share/tomcat9   # æˆ–è€…ä½  <span class="hljs-title class_">Tomcat</span> çš„è·¯å¾„
<span class="hljs-keyword">export</span> <span class="hljs-variable constant_">JAVA_HOME</span>=<span class="hljs-regexp">/usr/</span>lib/jvm/java-<span class="hljs-number">11</span>-openjdk-amd64
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<blockquote>
<p>æ³¨æ„ï¼šè·¯å¾„è¦æ ¹æ®ä½ è‡ªå·±ç³»ç»Ÿå®é™…æƒ…å†µæ”¹ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-2">4. é…ç½®å’Œç¼–è¯‘</h3>
<p>è¿›å…¥ native ç›®å½•åæ‰§è¡Œï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">./configure --<span class="hljs-keyword">with</span>-apxs=<span class="hljs-regexp">/usr/</span>bin/apxs2
make
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<ul>
<li><code>--with-apxs</code>æ˜¯æŒ‡å®š apxs å·¥å…·çš„è·¯å¾„ï¼Œä¸€èˆ¬åœ¨Â <code>/usr/bin/apxs2</code>æˆ–Â <code>/usr/bin/apxs</code></li>
<li>å¦‚æœæç¤ºæ‰¾ä¸åˆ° apxsï¼Œå¯ä»¥è£…ï¼š<code>sudo apt install apache2-dev</code></li>
</ul>
<hr/>
<h3 data-id="heading-3">5. å®‰è£…æ¨¡å—</h3>
<p>ç¼–è¯‘å®Œä¼šç”Ÿæˆä¸€ä¸ªÂ <code>.so</code>æ–‡ä»¶ï¼ˆæ¯”å¦‚Â <code>mod_jk.so</code>ï¼‰ï¼ŒæŠŠå®ƒå¤åˆ¶åˆ° Apache çš„æ¨¡å—ç›®å½•ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">sudo <span class="hljs-built_in">cp</span> apache-2.0/mod_jk.so /usr/lib/apache2/modules/
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<hr/>
<h3 data-id="heading-4">6. é…ç½® Apache åŠ è½½ mod_jk</h3>
<p>ç¼–è¾‘ Apache é…ç½®æ–‡ä»¶ï¼ˆæ¯”å¦‚Â <code>/etc/apache2/apache2.conf</code>æˆ–æ–°å»ºä¸€ä¸ªÂ <code>/etc/apache2/mods-available/jk.load</code>ï¼‰ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">LoadModule jk_module modules/mod_jk.so
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p>ç„¶åå¯ç”¨æ¨¡å—ï¼š</p>
<pre><code class="hljs">sudo a2enmod jk
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<hr/>
<h3 data-id="heading-5">7. é…ç½® workersï¼ˆå‘Šè¯‰ Apache æ€ä¹ˆè¿ Tomcatï¼‰</h3>
<p>åˆ›å»ºæ–‡ä»¶Â <code>/etc/apache2/workers.properties</code>ï¼Œå†…å®¹ç±»ä¼¼ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">worker.list</span>=worker1
<span class="hljs-attr">worker.worker1.type</span>=ajp13
<span class="hljs-attr">worker.worker1.host</span>=localhost
<span class="hljs-attr">worker.worker1.port</span>=<span class="hljs-number">8009</span>
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p>å†åˆ›å»ºä¸€ä¸ªé…ç½®æ–‡ä»¶Â <code>/etc/apache2/jk.conf</code>ï¼ˆæˆ–åŠ åˆ° apache2.conf é‡Œï¼‰ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">JkWorkersFile /etc/apache2/workers.properties
JkMount /* worker1
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<hr/>
<h3 data-id="heading-6">8. é‡å¯ Apache å’Œ Tomcat</h3>
<pre><code class="hljs">sudo systemctl restart apache2
sudo systemctl restart tomcat9
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<hr/>
<h3 data-id="heading-7">9. æµ‹è¯•</h3>
<p>æ”¾ä¸ª JSP é¡µé¢åˆ° Tomcat çš„ webapps ç›®å½•ä¸‹ï¼Œæ¯”å¦‚Â <code>test.jsp</code>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">&lt;%= <span class="hljs-keyword">new</span> java.<span class="hljs-property">util</span>.<span class="hljs-title class_">Date</span>() %&gt;
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p>ç„¶åé€šè¿‡ Apache è®¿é—®ï¼š<code>http://ä½ çš„æœåŠ¡å™¨/test.jsp</code>ï¼Œå¦‚æœèƒ½æ˜¾ç¤ºæ—¶é—´ï¼Œè¯´æ˜æˆåŠŸäº†ã€‚</p>
<p>â€‹</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ•°æ®åˆ†æå¸ˆçš„â€œæ°´æ™¶çƒâ€ï¼šæ—¶é—´åºåˆ—åˆ†æ]]></title>    <link>https://juejin.cn/post/7588680081326293034</link>    <guid>https://juejin.cn/post/7588680081326293034</guid>    <pubDate>2025-12-28T09:30:08.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588680081326293034" data-draft-id="7588152122187530294" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ•°æ®åˆ†æå¸ˆçš„â€œæ°´æ™¶çƒâ€ï¼šæ—¶é—´åºåˆ—åˆ†æ"/> <meta itemprop="keywords" content="Python,æ•°æ®åˆ†æ,æ•°æ®æŒ–æ˜"/> <meta itemprop="datePublished" content="2025-12-28T09:30:08.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="databook"/> <meta itemprop="url" content="https://juejin.cn/user/3526889035006702"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ•°æ®åˆ†æå¸ˆçš„â€œæ°´æ™¶çƒâ€ï¼šæ—¶é—´åºåˆ—åˆ†æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3526889035006702/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    databook
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-28T09:30:08.000Z" title="Sun Dec 28 2025 09:30:08 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¾ˆå¤šåˆšå…¥è¡Œçš„å°ä¼™ä¼´é—®æˆ‘ï¼šâ€œ<em>æˆ‘æƒ³é¢„æµ‹ä¸‹ä¸ªæœˆå…¬å¸çš„é”€å”®é¢ï¼Œæˆ–è€…é¢„æµ‹ä¸€ä¸‹æ˜å¤©çš„è‚¡ä»·ï¼Œè¯¥å­¦ä»€ä¹ˆï¼Ÿ</em>â€</p>
<p>æˆ‘çš„å›ç­”é€šå¸¸åªæœ‰å…­ä¸ªå­—ï¼š<strong>æ—¶é—´åºåˆ—åˆ†æ</strong>ã€‚</p>
<p>å¦‚æœåœ¨æ•°æ®åˆ†æçš„ä¸–ç•Œé‡Œæœ‰ä¸€ç§é­”æ³•èƒ½è®©ä½ â€œé¢„çŸ¥æœªæ¥â€ï¼Œé‚£ä¸€å®šå°±æ˜¯å®ƒã€‚</p>
<h2 data-id="heading-0">1. ä»€ä¹ˆæ˜¯æ—¶é—´åºåˆ—ï¼Ÿ</h2>
<p>åˆ«è¢«åè¯å“åˆ°äº†ã€‚ç®€å•æ¥è¯´ï¼Œ<strong>æ—¶é—´åºåˆ—ï¼ˆTime Seriesï¼‰å°±æ˜¯æŒ‰æ—¶é—´é¡ºåºæ’åˆ—çš„ä¸€ç»„æ•°æ®</strong>ã€‚</p>
<p>æ¯”å¦‚ï¼š</p>
<ul>
<li>ä½ æ‰‹æœºé‡Œæ¯å¤©çš„æ­¥æ•°è®°å½•ï¼›</li>
<li>æŸåªè‚¡ç¥¨æ¯å¤©çš„æ”¶ç›˜ä»·ï¼›</li>
<li>æˆ–è€…æ˜¯ä½ å®¶æ¥¼ä¸‹ä¾¿åˆ©åº—æ¯ä¸ªæœˆçš„è¥ä¸šé¢ã€‚</li>
</ul>
<p>è¿™äº›æ•°æ®éƒ½æœ‰ä¸€ä¸ªå…±åŒç‚¹ï¼š<strong>æœ‰ä¸€ä¸ªæ—¶é—´è½´ï¼Œä¸”æ•°æ®éšç€æ—¶é—´å˜åŒ–ã€‚</strong></p>
<p>æˆ‘ä»¬åš<strong>æ—¶é—´åºåˆ—åˆ†æ</strong>çš„<strong>æ ¸å¿ƒç›®çš„</strong>ï¼Œå°±æ˜¯è¦ä»è¿‡å»çš„**â€œå†å²æ•°æ®â€<strong>ä¸­æ‰¾å‡ºè§„å¾‹ï¼Œç„¶åæŠŠè¿™ä¸ªè§„å¾‹å»¶é•¿åˆ°</strong>â€œæœªæ¥â€<strong>ï¼Œè¿™å°±æ˜¯</strong>é¢„æµ‹**ã€‚</p>
<h2 data-id="heading-1">2. åƒå‰¥æ´‹è‘±ä¸€æ ·æ‹†è§£æ•°æ®ï¼šæ—¶é—´åºåˆ—çš„å››å¤§æˆåˆ†</h2>
<p>åˆå­¦è€…æœ€å®¹æ˜“çŠ¯çš„é”™è¯¯æ˜¯ç›´æ¥æŠŠæ•°æ®ä¸¢è¿›æ¨¡å‹é‡Œè·‘ã€‚</p>
<p>ä½œä¸ºä¸€åè€æ‰‹ï¼Œæˆ‘è¦å‘Šè¯‰ä½ ï¼š<strong>çœ‹åˆ°æ•°æ®ï¼Œå…ˆæ‹†è§£ã€‚</strong></p>
<p>é€šå¸¸ï¼Œä»»ä½•ä¸€ä¸ªéšæ—¶é—´å˜åŒ–çš„æ•°æ®ï¼ˆæ¯”å¦‚ä¸€å®¶å¥¶èŒ¶åº—çš„æ—¥é”€é‡ï¼‰ï¼Œéƒ½å¯ä»¥è¢«æ‹†åˆ†ä¸º<strong>å››ä¸ªéƒ¨åˆ†</strong>ã€‚</p>
<h3 data-id="heading-2">2.1. é•¿æœŸè¶‹åŠ¿--â€œå¤§åŠ¿æ‰€è¶‹â€</h3>
<p>è¿™æ˜¯æ•°æ®åœ¨é•¿æ—¶é—´å†…çš„ä¸»è¦è¿åŠ¨æ–¹å‘ã€‚</p>
<ul>
<li><strong>ä¾‹å­</strong>ï¼šè¿™å®¶å¥¶èŒ¶åº—å¼€äº†ä¸‰å¹´ï¼Œéšç€å“ç‰ŒçŸ¥ååº¦æå‡ï¼Œæ•´ä½“é”€é‡æ¯å¹´éƒ½åœ¨æ¶¨ã€‚è¿™å°±æ˜¯<strong>è¶‹åŠ¿</strong>ã€‚</li>
<li><strong>åœ°ä½</strong>ï¼šå®ƒæ˜¯æ€»å˜åŠ¨çš„è€å¤§ï¼Œå†³å®šäº†é•¿æœŸçš„æ–¹å‘ã€‚</li>
</ul>
<h3 data-id="heading-3">2.2. å­£èŠ‚å˜åŠ¨--â€œæ˜¥å¤ç§‹å†¬çš„è½®å›â€</h3>
<p>æ•°æ®å—å­£èŠ‚ã€èŠ‚å‡æ—¥ç­‰å›ºå®šå‘¨æœŸå½±å“è€Œå‡ºç°çš„æ³¢åŠ¨ã€‚</p>
<ul>
<li><strong>ä¾‹å­</strong>ï¼šå¤å¤©å¤©æ°”çƒ­ï¼Œå†°é¥®å–å¾—ç–¯å¿«ï¼›å†¬å¤©å†·ï¼Œé”€é‡è‡ªç„¶ä¸‹æ»‘ï¼›æ¯åˆ°å‘¨æœ«é”€é‡å°±æ¯”å‘¨ä¸€é«˜ã€‚è¿™ç§éšç€æ—¶é—´å›ºå®šé‡å¤çš„æ³¢åŠ¨ï¼Œå°±æ˜¯<strong>å­£èŠ‚æ€§</strong>ã€‚</li>
<li><strong>åœ°ä½</strong>ï¼šå®ƒæ˜¯æ€»å˜åŠ¨çš„è€äºŒï¼Œéå¸¸è§„å¾‹ï¼Œé¢„æµ‹èµ·æ¥æœ€å‡†ã€‚</li>
</ul>
<h3 data-id="heading-4">2.3. å¾ªç¯å˜åŠ¨--â€œéš¾ä»¥æ‰æ‘¸çš„å‘¨æœŸâ€</h3>
<p>è¿™æ˜¯ä¸€äº›å‘¨æœŸè¾ƒé•¿ã€ä¸å›ºå®šçš„æ³¢åŠ¨ï¼Œé€šå¸¸å’Œå®è§‚ç»æµæœ‰å…³ã€‚</p>
<ul>
<li><strong>ä¾‹å­</strong>ï¼šç”±äºç»æµå±æœºï¼Œå¤§å®¶é’±åŒ…ç´§äº†ï¼Œå¥¶èŒ¶å–å¾—å°‘äº†ã€‚ç­‰ç»æµå¤è‹ï¼Œåˆå–å¤šäº†ã€‚</li>
<li><strong>æ³¨æ„</strong>ï¼šè¿™éƒ¨åˆ†åŸå› å¤æ‚ï¼Œå‘¨æœŸä¸å›ºå®šï¼Œæˆ‘ä»¬åœ¨åŸºç¡€é¢„æµ‹ä¸­é€šå¸¸<strong>ä¸åšé‡ç‚¹è€ƒè™‘</strong>ã€‚</li>
</ul>
<h3 data-id="heading-5">2.4. ä¸è§„åˆ™å˜åŠ¨--â€œè€å¤©çˆ·çš„å¿ƒæƒ…â€</h3>
<p>è¿™æ˜¯éšæœºçš„ã€ä¸å¯æ§çš„æ³¢åŠ¨ã€‚</p>
<ul>
<li><strong>ä¾‹å­</strong>ï¼šæŸå¤©çªç„¶ä¸‹æš´é›¨ï¼Œæ²¡äººå‡ºé—¨ï¼Œé”€é‡æš´è·Œï¼›æˆ–è€…æŸå¤©ç½‘çº¢æ¥æ‰“å¡ï¼Œé”€é‡æš´æ¶¨ã€‚</li>
<li><strong>æ³¨æ„</strong>ï¼šè¿™æ˜¯â€œå™ªéŸ³â€ï¼Œåœ¨é¢„æµ‹ä¸­æˆ‘ä»¬å¾ˆéš¾æ•æ‰å®ƒï¼Œé€šå¸¸å‡è®¾å®ƒä¸º0æˆ–å¿½ç•¥ã€‚</li>
</ul>
<blockquote>
<p><strong>ï¼ˆé‡ç‚¹ï¼‰ï¼š</strong><br/>
åœ¨å®é™…çš„æ—¶é—´åºåˆ—é¢„æµ‹ä¸­ï¼Œæˆ‘ä»¬ä¸»è¦æŠ“ <strong>â€œé•¿æœŸè¶‹åŠ¿â€ å’Œ â€œå­£èŠ‚å˜åŠ¨â€</strong>ã€‚</p>
<p>æŠ“ä½äº†è¿™ä¸¤æ¡å¤§é±¼ï¼Œé¢„æµ‹çš„å‡†ç¡®åº¦é€šå¸¸èƒ½è¾¾åˆ°80%ä»¥ä¸Šã€‚</p>
<p>è‡³äºå¾ªç¯å˜åŠ¨å’Œä¸è§„åˆ™å˜åŠ¨ï¼Œå› ä¸ºå æ¯”å°ä¸”å¤ªå¤æ‚ï¼Œæˆ‘ä»¬å¾€å¾€é€‰æ‹©æˆ˜ç•¥æ€§å¿½ç•¥ã€‚</p>
</blockquote>
<h2 data-id="heading-6">3. æ‰‹æŠŠæ‰‹æ•™ä½ ï¼šç”¨Pythonæ‹†è§£æ—¶é—´åºåˆ—</h2>
<p>å…‰è¯´ä¸ç»ƒå‡æŠŠå¼ã€‚ä¸‹é¢æˆ‘ä»¬ç”¨<code>Python</code>ä»£ç æ¨¡æ‹Ÿä¸€ç»„å¥¶èŒ¶åº—çš„é”€å”®æ•°æ®ï¼Œå¹¶æ¼”ç¤ºå¦‚ä½•æŠŠè¿™å››ä¸ªæˆåˆ†â€œæ‹†â€å‡ºæ¥ã€‚</p>
<p>é¦–å…ˆï¼Œæ„é€ â€œè™šå‡â€çš„å¥¶èŒ¶åº—æ•°æ®ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># === ç¬¬ä¸€æ­¥ï¼šæ„é€ æ•°æ® ===</span>
<span class="hljs-comment"># å‡è®¾æˆ‘ä»¬æœ‰è¿‡å»3å¹´ï¼ˆ36ä¸ªæœˆï¼‰çš„æœˆåº¦é”€å”®æ•°æ®</span>
dates = pd.date_range(start=<span class="hljs-string">'2021-01-01'</span>, periods=<span class="hljs-number">36</span>, freq=<span class="hljs-string">'ME'</span>)

<span class="hljs-comment"># 1. åˆ¶é€ ã€é•¿æœŸè¶‹åŠ¿ã€‘ï¼šæ¯ä¸ªæœˆé”€é‡åŸºç¡€å¢åŠ  10 æ¯</span>
trend = np.linspace(<span class="hljs-number">100</span>, <span class="hljs-number">460</span>, <span class="hljs-number">36</span>)

<span class="hljs-comment"># 2. åˆ¶é€ ã€å­£èŠ‚å˜åŠ¨ã€‘ï¼šæ¨¡æ‹Ÿæ¯å¹´å¤å¤©é«˜ã€å†¬å¤©ä½ (ç”¨æ­£å¼¦æ³¢æ¨¡æ‹Ÿ)</span>
<span class="hljs-comment"># è¿™é‡Œçš„é€»è¾‘æ˜¯åˆ¶é€ ä¸€ä¸ªå‘¨æœŸæ€§çš„æ³¢æµª</span>
seasonality = <span class="hljs-number">50</span> * np.sin(np.linspace(<span class="hljs-number">0</span>, <span class="hljs-number">3</span> * <span class="hljs-number">2</span> * np.pi, <span class="hljs-number">36</span>))

<span class="hljs-comment"># 3. åˆ¶é€ ã€ä¸è§„åˆ™å˜åŠ¨/å™ªéŸ³ã€‘ï¼šéšæœºæ³¢åŠ¨</span>
noise = np.random.normal(<span class="hljs-number">0</span>, <span class="hljs-number">20</span>, <span class="hljs-number">36</span>)

<span class="hljs-comment"># 4. åˆæˆæ€»é”€é‡</span>
total_sales = trend + seasonality + noise

<span class="hljs-comment"># åˆ›å»º DataFrame</span>
df = pd.DataFrame({<span class="hljs-string">'Date'</span>: dates, <span class="hljs-string">'Sales'</span>: total_sales})
df.set_index(<span class="hljs-string">'Date'</span>, inplace=<span class="hljs-literal">True</span>)
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f2d39a71777e48d5b1d6870e5ec5b8df~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZGF0YWJvb2s=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767519008&amp;x-signature=0Up1CFtrG2BldYY9pTVRIf3J8aA%3D" alt="" loading="lazy"/></p>
<p>ç„¶åï¼Œä½¿ç”¨ <code>statsmodels</code> åº“è¿›è¡Œåˆ†è§£ï¼Œå®ƒèƒ½å¸®æˆ‘ä»¬ä¸€é”®æ‹†è§£æ•°æ®ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> statsmodels.tsa.seasonal <span class="hljs-keyword">import</span> seasonal_decompose

<span class="hljs-comment"># === ç¬¬äºŒæ­¥ï¼šæ•°æ®åˆ†è§£ ===</span>
<span class="hljs-comment"># model='additive' è¡¨ç¤ºåŠ æ³•æ¨¡å‹ï¼ˆé”€é‡ = è¶‹åŠ¿ + å­£èŠ‚ + å™ªéŸ³ï¼‰</span>
<span class="hljs-comment"># å¦‚æœæ³¢åŠ¨å¹…åº¦éšç€è¶‹åŠ¿å˜å¤§è€Œå˜å¤§ï¼Œé€šå¸¸ç”¨ä¹˜æ³•æ¨¡å‹ (multiplicative)</span>
decomposition = seasonal_decompose(df[<span class="hljs-string">'Sales'</span>], model=<span class="hljs-string">'additive'</span>)

<span class="hljs-comment"># === ç¬¬ä¸‰æ­¥ï¼šç»˜å›¾å±•ç¤º ===</span>
fig = decomposition.plot()
fig.set_size_inches(<span class="hljs-number">12</span>, <span class="hljs-number">10</span>) <span class="hljs-comment"># è®¾ç½®ç”»å¸ƒå¤§å°</span>
plt.show()
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0962196639c04f0dbc6f2cd3e9f14dbb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZGF0YWJvb2s=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767519008&amp;x-signature=9ks1nQe8cXYAYPvmXLnAxHY8%2F78%3D" alt="" loading="lazy"/></p>
<p>ä»ä¸Šé¢å››ä¸ªå­å›¾å¯ä»¥çœ‹å‡ºï¼š</p>
<ol>
<li><strong>Observed (åŸå§‹æ•°æ®)</strong>ï¼šä½ çœ‹åˆ°çš„çœŸå®é”€é‡æ›²çº¿ï¼Œä¸Šè¹¿ä¸‹è·³ã€‚</li>
<li><strong>Trend (è¶‹åŠ¿)</strong>ï¼šä¸€æ¡ç¨³æ­¥å‘ä¸Šçš„ç›´çº¿ã€‚è¿™å‘Šè¯‰è€æ¿ï¼š<em>æ”¾å¿ƒï¼Œè™½ç„¶æ¯ä¸ªæœˆæœ‰æ³¢åŠ¨ï¼Œä½†å’±ä»¬åº—æ•´ä½“æ˜¯è¶Šåšè¶Šå¥½çš„ï¼</em></li>
<li><strong>Seasonal (å­£èŠ‚æ€§)</strong>ï¼šéå¸¸æœ‰è§„å¾‹çš„æ³¢æµªçº¿ã€‚è¿™å‘Šè¯‰åº—é•¿ï¼š<em>æ¯å¹´6-8æœˆè¦å¤šå¤‡è´§ï¼Œ12-1æœˆå¯ä»¥å®‰æ’å‘˜å·¥è½®ä¼‘ã€‚</em></li>
<li><strong>Resid (æ®‹å·®/ä¸è§„åˆ™é¡¹)</strong>ï¼šå›´ç»•0ä¸Šä¸‹è·³åŠ¨çš„æ‚ä¹±ç‚¹ã€‚è¿™æ˜¯æˆ‘ä»¬æ— æ³•é¢„æµ‹çš„éšæœºäº‹ä»¶ã€‚</li>
</ol>
<h2 data-id="heading-7">4. åˆ†æå¸ˆçš„å†…åŠŸï¼šä¸ä»…ä»…æ˜¯ä»£ç </h2>
<p>å­¦ä¼šäº†ä¸Šé¢çš„ä»£ç ï¼Œä½ å·²ç»å…¥é—¨äº†ã€‚ä½†ä½œä¸ºè¿‡æ¥äººï¼Œæˆ‘æƒ³å‘Šè¯‰ä½ ï¼Œå·¥å…·å’Œç®—æ³•è™½ç„¶å±‚å‡ºä¸ç©·ï¼Œä½†<strong>åˆ†ææ€è·¯</strong>æ‰æ˜¯ä¸‡å˜ä¸ç¦»å…¶å®—çš„ã€‚</p>
<p>é¦–å…ˆï¼Œå…³æ³¨<strong>æ•°æ®çš„å¹³ç¨³æ€§</strong>ï¼Œè¿™æ˜¯æ—¶é—´åºåˆ—åˆ†æçš„é—¨æ§›ã€‚</p>
<p>ç®€å•è¯´ï¼Œå¤§éƒ¨åˆ†å¤æ‚çš„ç»Ÿè®¡æ¨¡å‹ï¼ˆå¦‚ARIMAï¼‰éƒ½å‡è®¾æ•°æ®çš„æ€§è´¨ï¼ˆå‡å€¼ã€æ–¹å·®ï¼‰ä¸éšæ—¶é—´å˜åŒ–ã€‚</p>
<p>ç„¶è€Œç°å®æ•°æ®ï¼ˆå¦‚è‚¡ä»·ã€é”€é‡ï¼‰å¾€å¾€æ˜¯ä¸å¹³ç¨³çš„ï¼ˆæœ‰ä¸Šæ¶¨è¶‹åŠ¿ï¼‰ï¼Œå› æ­¤å¦‚æœä½ å‘ç°æ•°æ®ä¸€ç›´åœ¨æ¶¨ï¼Œå¯ä»¥è¯•ç€åš<strong>å·®åˆ†</strong>ï¼ˆç”¨ä»Šå¤©çš„æ•°å‡å»æ˜¨å¤©çš„æ•°ï¼‰ã€‚</p>
<p><strong>å·®åˆ†</strong>åçš„æ•°æ®å¾€å¾€å°±å¹³ç¨³äº†ï¼Œæ›´å®¹æ˜“æ”¾å…¥æ¨¡å‹å»è®­ç»ƒã€‚</p>
<p>å…¶æ¬¡ï¼Œç»“åˆ<strong>ä¸šåŠ¡åœºæ™¯</strong>ï¼Œä¸è¦æ­»è®°ç¡¬èƒŒæ¨¡å‹ï¼Œè¿˜è¦çœ‹åœºæ™¯ã€‚</p>
<p>æ¯”å¦‚ï¼š</p>
<ol>
<li><strong>åœºæ™¯Aï¼šç”µå•†å¤§ä¿ƒé¢„æµ‹ï¼ˆåŒ11ï¼‰</strong>
<ul>
<li><strong>ç‰¹ç‚¹</strong>ï¼šæœ‰æå¼ºçš„å­£èŠ‚æ€§ï¼ˆæ¯å¹´11æœˆæš´æ¶¨ï¼‰ã€‚</li>
<li><strong>ç­–ç•¥</strong>ï¼šé‡ç‚¹åˆ†æ<strong>å­£èŠ‚å˜åŠ¨</strong>ã€‚å¦‚æœåªçœ‹è¶‹åŠ¿ï¼Œä½ ä¼šè¢«åŒ11çš„æ•°æ®å“æ­»ï¼Œæˆ–è€…åœ¨åŒ11å¤‡è´§ä¸è¶³ã€‚</li>
<li><strong>çƒ­ç‚¹å…³è”</strong>ï¼šå°±åƒåˆ†æâ€œæ·„åšçƒ§çƒ¤â€æˆ–â€œå“ˆå°”æ»¨æ—…æ¸¸â€ï¼Œå¿…é¡»è€ƒè™‘èŠ‚å‡æ—¥è¿™ä¸ªå¼ºå­£èŠ‚å› å­ã€‚</li>
</ul>
</li>
<li><strong>åœºæ™¯Bï¼šè‚¡ç¥¨ä»·æ ¼é¢„æµ‹</strong>
<ul>
<li><strong>ç‰¹ç‚¹</strong>ï¼šä¸è§„åˆ™å˜åŠ¨ï¼ˆå™ªéŸ³ï¼‰æå¤§ï¼Œç”šè‡³å™ªéŸ³æ©ç›–äº†è¶‹åŠ¿ã€‚</li>
<li><strong>ç­–ç•¥</strong>ï¼šè¿™ç§æ—¶å€™ï¼Œç®€å•çš„åˆ†è§£æ¨¡å‹å¾€å¾€å¤±æ•ˆã€‚éœ€è¦å¼•å…¥æ›´å¤šå¤–éƒ¨å˜é‡ï¼ˆæ–°é—»ã€æ”¿ç­–ï¼‰ï¼Œæˆ–è€…ä½¿ç”¨æ›´é«˜çº§çš„æ·±åº¦å­¦ä¹ æ¨¡å‹ã€‚</li>
</ul>
</li>
<li><strong>åœºæ™¯Cï¼šæœåŠ¡å™¨æµé‡ç›‘æ§</strong>
<ul>
<li><strong>ç‰¹ç‚¹</strong>ï¼šç™½å¤©é«˜ã€æ·±å¤œä½ï¼Œå‘¨æœ«ä½ã€å·¥ä½œæ—¥é«˜ã€‚</li>
<li><strong>ç­–ç•¥</strong>ï¼šè¿™æ˜¯æœ€æ ‡å‡†çš„å‘¨æœŸæ€§æ•°æ®ï¼Œéå¸¸é€‚åˆç”¨æ¥åšå¼‚å¸¸æ£€æµ‹ï¼ˆæ¯”å¦‚æŸå¤©æ·±å¤œæµé‡çªç„¶æš´æ¶¨ï¼Œè‚¯å®šæ˜¯æœ‰é»‘å®¢æ”»å‡»æˆ–ç³»ç»ŸBugï¼Œå› ä¸ºè¿™è¿èƒŒäº†å­£èŠ‚æ€§è§„å¾‹ï¼‰ã€‚</li>
</ul>
</li>
</ol>
<h2 data-id="heading-8">5. æ€»ç»“ä¸å»ºè®®</h2>
<p><strong>æ—¶é—´åºåˆ—åˆ†æ</strong>å¹¶æ²¡æœ‰æƒ³è±¡ä¸­é‚£ä¹ˆç¥ç§˜ã€‚å®ƒçš„æœ¬è´¨å°±æ˜¯ï¼š<strong>æ‰¿è®¤å†å²ä¼šé‡æ¼”ï¼Œä½†ä¹Ÿæ¥çº³æœªæ¥çš„ä¸ç¡®å®šæ€§ã€‚</strong></p>
<p>å¯¹äºåˆšå…¥è¡Œçš„æœ‹å‹ï¼Œæˆ‘çš„å»ºè®®æ˜¯ï¼š</p>
<ol>
<li><strong>ç†è§£å››å¤§æˆåˆ†</strong>ï¼ˆè¶‹åŠ¿ã€å­£èŠ‚ã€å¾ªç¯ã€å™ªéŸ³ï¼‰æ˜¯åŸºç¡€ä¸­çš„åŸºç¡€ã€‚</li>
<li><strong>æŠ“ä½ä¸»è¦çŸ›ç›¾</strong>ï¼šåœ¨åšé¢„æµ‹æ—¶ï¼Œä¼˜å…ˆæå®šè¶‹åŠ¿å’Œå­£èŠ‚æ€§ã€‚</li>
<li><strong>å¤šåŠ¨æ‰‹å°è¯•</strong>ï¼šæ¯”å¦‚æŠŠä¸Šé¢çš„<code>Python</code>ä»£ç è·‘ä¸€éï¼Œå°è¯•ä¿®æ”¹ä¸€ä¸‹æ•°æ®ï¼Œçœ‹çœ‹ç»“æœæœ‰ä»€ä¹ˆå˜åŒ–ã€‚</li>
</ol>
<p>æœªæ¥çš„åˆ†ææ–¹æ³•è™½ç„¶ä¼šè¶Šæ¥è¶Šå¤šï¼ŒAIä¹Ÿä¼šè¶Šæ¥è¶Šå¼ºï¼Œä½†è¿™ç§ <strong>â€œé€è¿‡ç°è±¡ï¼ˆåŸå§‹æ•°æ®ï¼‰çœ‹æœ¬è´¨ï¼ˆè¶‹åŠ¿ä¸è§„å¾‹ï¼‰â€</strong> çš„åˆ†ææ€ç»´ï¼Œå°†æ˜¯æˆ‘ä»¬èŒä¸šç”Ÿæ¶¯ä¸­æ°¸æ’ä¸å˜çš„å®è´µè´¢å¯Œã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Self-Attention ä¸ºä»€ä¹ˆè¦åš QKV çš„çº¿æ€§å˜æ¢ï¼Ÿåˆä¸ºä»€ä¹ˆè¦åš Softmaxï¼Ÿ]]></title>    <link>https://juejin.cn/post/7588080521446260782</link>    <guid>https://juejin.cn/post/7588080521446260782</guid>    <pubDate>2025-12-28T06:32:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588080521446260782" data-draft-id="7588139768275779635" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Self-Attention ä¸ºä»€ä¹ˆè¦åš QKV çš„çº¿æ€§å˜æ¢ï¼Ÿåˆä¸ºä»€ä¹ˆè¦åš Softmaxï¼Ÿ"/> <meta itemprop="keywords" content="ç®—æ³•"/> <meta itemprop="datePublished" content="2025-12-28T06:32:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="coting"/> <meta itemprop="url" content="https://juejin.cn/user/933911964427818"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Self-Attention ä¸ºä»€ä¹ˆè¦åš QKV çš„çº¿æ€§å˜æ¢ï¼Ÿåˆä¸ºä»€ä¹ˆè¦åš Softmaxï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/933911964427818/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    coting
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-28T06:32:19.000Z" title="Sun Dec 28 2025 06:32:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨çœ‹ Transformer çš„ self-attention ç»“æ„æ—¶ï¼Œå¾ˆå¤šäººç¬¬ä¸€æ¬¡è§åˆ° ( Q, K, V ) ä¸‰ä¸ªçŸ©é˜µéƒ½ä¼šæœ‰ç‚¹ç–‘æƒ‘ï¼š<br/>
æ˜æ˜è¾“å…¥å°±æ˜¯ä¸€ä¸ªå‘é‡åºåˆ—ï¼Œä¸ºä»€ä¹ˆè¿˜è¦å¤šæ­¤ä¸€ä¸¾åšä¸‰æ¬¡<strong>çº¿æ€§å˜æ¢</strong>ï¼Ÿ<br/>
è€Œä¸”æœ€åè¿˜è¦å¥—ä¸Šä¸€ä¸ª <strong>Softmax</strong>ï¼Œè¿™åˆæ˜¯åœ¨å¹²ä»€ä¹ˆï¼Ÿ</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e586155be140446dbea559fa5b7aa6f7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgY290aW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767508338&amp;x-signature=7UNfPUXhzs%2F%2BRe9l4Ate0blNnM4%3D" alt="" loading="lazy"/></p>
<p>è¿™ä¸¤ä¸ªé—®é¢˜ï¼Œå…¶å®æ˜¯ç†è§£æ³¨æ„åŠ›æœºåˆ¶çš„æ ¸å¿ƒå…³é”®ã€‚<br/>
æˆ‘ä»¬ä»æœ€ç›´è§‚çš„è§’åº¦æ¥æ‹†å¼€çœ‹ã€‚</p>
<p>æ‰€æœ‰ç›¸å…³æºç ç¤ºä¾‹ã€æµç¨‹å›¾ã€é¢è¯•å…«è‚¡ã€æ¨¡å‹é…ç½®ä¸çŸ¥è¯†åº“æ„å»ºæŠ€å·§ï¼Œæˆ‘ä¹Ÿå°†æŒç»­æ›´æ–°åœ¨Githubï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Faicoting%2FAIHub" target="_blank" title="https://github.com/aicoting/AIHub" ref="nofollow noopener noreferrer"><strong>AIHub</strong></a>ï¼Œæ¬¢è¿å…³æ³¨æ”¶è—ï¼</p>
<h2 data-id="heading-0">ä¸€ã€ä¸ºä»€ä¹ˆè¦ Qã€Kã€Vï¼Ÿ</h2>
<p>å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªè¾“å…¥åºåˆ—ï¼š<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b86f8dbaf7c545d3b5cd5eb8ed0b7907~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgY290aW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767508338&amp;x-signature=%2ByRuytzdHzQFm5eabxPm3H9M1NQ%3D" alt="image" loading="lazy"/></p>
<p>æ¯ä¸ª<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5a9057db7085417d9782855af87577fa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgY290aW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767508338&amp;x-signature=LFY5Q5zOXUhl635nh5TMGulim7w%3D" alt="image" loading="lazy"/> å°±æ˜¯ä¸€ä¸ª token çš„ embeddingï¼Œæ¯”å¦‚ä¸€ä¸ªè¯ã€ä¸€ä¸ªå­—ã€æˆ–è€…ä¸€ä¸ªå›¾åƒ patchã€‚<br/>
å¦‚æœæˆ‘ä»¬ç›´æ¥ç”¨è¿™äº›<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/240fd555cf83454d9323b47e6204b997~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgY290aW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767508338&amp;x-signature=sMJBCqPE%2FNHGzNtO1nmLteYkV%2Fs%3D" alt="image" loading="lazy"/> ä¹‹é—´åšç‚¹ç§¯ï¼š<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e438e1b00f0d43f9be1904d8b1cb7bea~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgY290aW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767508338&amp;x-signature=4Yhuda1E%2FQ9%2FMSaCCcEtv9N6dgs%3D" alt="image" loading="lazy"/></p>
<p>å®ƒç¡®å®èƒ½åæ˜ å‡ºä¸¤ä¸ª token çš„ç›¸å…³æ€§ï¼ˆè¶Šå¤§è¶Šç›¸å…³ï¼‰ï¼Œä½†å­˜åœ¨ä¸¤ä¸ªè‡´å‘½é—®é¢˜ï¼š</p>
<ol>
<li><strong>æ¯ä¸ª token çš„è¡¨ç¤ºæ˜¯é™æ€çš„</strong>ï¼šè¾“å…¥ embedding æ²¡æœ‰åŒºåˆ†<strong>è°åœ¨å…³æ³¨åˆ«äºº</strong>è¿˜æ˜¯<strong>è¢«åˆ«äººå…³æ³¨</strong>ã€‚</li>
<li><strong>æ— æ³•è¡¨è¾¾ä¸åŒçš„å…³æ³¨æ¨¡å¼</strong>ï¼šæ‰€æœ‰ token çš„å…³ç³»éƒ½è¢«ä¸€ä¸ªå›ºå®šç©ºé—´æè¿°ï¼Œæ¨¡å‹æ— æ³•çµæ´»å­¦ä¹ ä¸åŒè§’åº¦çš„ç›¸ä¼¼æ€§ã€‚</li>
</ol>
<p>äºæ˜¯å°±å¼•å‡ºäº† Qã€Kã€V çš„è®¾è®¡ã€‚</p>
<h2 data-id="heading-1">äºŒã€Qã€Kã€V çš„çº¿æ€§å˜æ¢åœ¨å¹²ä»€ä¹ˆï¼Ÿ</h2>
<h3 data-id="heading-2">1.æŠ•å½±åˆ°ä¸åŒå­ç©ºé—´</h3>
<p>è¾“å…¥çš„ç‰¹å¾ç»´åº¦æ˜¯ <img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e4d62ecac89f4b06b530a0dd448443ec~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgY290aW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767508338&amp;x-signature=lxT54XhrMcuSK%2BDRYZDdZbUdBfE%3D" alt="image" loading="lazy"/>ï¼Œæ¯ä¸ª token çš„ embedding åŒ…å«<strong>æ‰€æœ‰è¯­ä¹‰ä¿¡æ¯</strong>ã€‚</p>
<p>ç›´æ¥ç”¨åŸå§‹ embedding åš Q/K/Vï¼Œç›¸å½“äºåœ¨åŒä¸€ä¸ªç©ºé—´è®¡ç®—ç›¸ä¼¼åº¦ï¼Œæ¨¡å‹<strong>æ— æ³•å­¦ä¹ ä¸åŒè¯­ä¹‰å…³ç³»çš„æƒé‡</strong>ã€‚</p>
<p>æˆ‘ä»¬æŠŠè¾“å…¥ ( X ) åˆ†åˆ«çº¿æ€§å˜æ¢æˆä¸‰ç§è¡¨ç¤ºï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1c47ecaa73f844c98ba4c31eee678419~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgY290aW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767508338&amp;x-signature=qadyxYmu1a9uA7SPWKiQNColD5k%3D" alt="image" loading="lazy"/></p>
<ul>
<li><strong>Queryï¼ˆæŸ¥è¯¢ï¼‰</strong>ï¼šè¡¨ç¤ºæˆ‘æƒ³å…³æ³¨ä»€ä¹ˆä¿¡æ¯</li>
<li><strong>Keyï¼ˆé”®ï¼‰</strong>ï¼šè¡¨ç¤ºæˆ‘æ˜¯ä»€ä¹ˆæ ·çš„ä¿¡æ¯</li>
<li><strong>Valueï¼ˆå€¼ï¼‰</strong>ï¼šè¡¨ç¤ºæˆ‘æºå¸¦çš„ä¿¡æ¯å†…å®¹</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e55b612b5f4a4d47ac965b091eb91af3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgY290aW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767508338&amp;x-signature=S3yhVBcSteo0CMBjW9qE2a8YsQg%3D" alt="" loading="lazy"/></p>
<p>è¿™ä¸‰ä¸ªçŸ©é˜µå…¶å®æ˜¯ä»åŒä¸€ä¸ªè¾“å…¥ (X) æŠ•å½±å‡ºæ¥çš„ä¸‰ç§<strong>è§†è§’</strong>ã€‚<br/>
è¿™ä¸€æ­¥çš„ä½œç”¨ï¼Œå°±æ˜¯<strong>è®©æ¨¡å‹åœ¨ä¸åŒå­ç©ºé—´ä¸­ç†è§£ token ä¹‹é—´çš„å…³ç³»</strong>ã€‚</p>
<p>ä¸¾ä¸ªç®€å•çš„ä¾‹å­ï¼š<br/>
åœ¨ä¸€å¥è¯ä¸­ï¼Œâ€œä»–åƒäº†ä¸€ä¸ªè‹¹æœâ€ï¼Œ<br/>
â€œä»–â€è¿™ä¸ªè¯ï¼ˆQueryï¼‰å¯èƒ½æ›´å…³æ³¨â€œåƒâ€è¿™ä¸ªåŠ¨è¯ï¼Œè€Œâ€œåƒâ€è¿™ä¸ªè¯ï¼ˆKeyï¼‰å¯èƒ½æ›´å¤šåœ°è¢«åè¯å¸å¼•ã€‚</p>
<p>é€šè¿‡ä¸‰ç»„ç‹¬ç«‹çš„çº¿æ€§å˜æ¢ï¼Œæ¨¡å‹å¯ä»¥å­¦ä¹ åˆ°è¿™ç§ä¸åŒè§’è‰²çš„åŒ¹é…å…³ç³»ã€‚</p>
<p>æ‰€ä»¥ä½ å¯ä»¥è¿™æ ·ç†è§£ï¼ŒQ æ˜¯æ³¨æ„åŠ›çš„<strong>æé—®æ–¹å¼</strong>ï¼ŒK æ˜¯ä¿¡æ¯çš„<strong>èº«ä»½æè¿°</strong>ï¼ŒV æ˜¯æœ€ç»ˆè¢«æå–çš„<strong>ä¿¡æ¯å†…å®¹</strong>ã€‚</p>
<h3 data-id="heading-3">2.æ”¯æŒå¤šå¤´æ³¨æ„åŠ›</h3>
<p>å¤šå¤´æ³¨æ„åŠ›æŠŠ Q/K/V åˆ‡åˆ†æˆå¤šä¸ªå¤´ï¼Œæ¯ä¸ªå¤´å…³æ³¨ä¸åŒå­ç©ºé—´çš„ç‰¹å¾ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/97f0b5e3f83f47e1b160f3d457e16b93~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgY290aW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767508338&amp;x-signature=u7J5vXihvAUQ%2FnZ5fR5Tu%2FO0BHo%3D" alt="" loading="lazy"/></p>
<p>å¦‚æœæ²¡æœ‰çº¿æ€§å˜æ¢ï¼Œæ¯ä¸ªå¤´å¾—åˆ°çš„è¿˜æ˜¯åŸå§‹ embeddingï¼Œæ— æ³•å­¦ä¹ å¤šè§’åº¦å…³ç³»ã€‚</p>
<p>çº¿æ€§æŠ•å½±å…è®¸æ¯ä¸ª head <strong>ç‹¬ç«‹å­¦ä¹ ä¸€å¥—æŸ¥è¯¢/é”®/å€¼è¡¨ç¤º</strong>ï¼Œæå‡æ¨¡å‹è¡¨è¾¾èƒ½åŠ›ã€‚</p>
<p>å…¬å¼ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a9d2ec503f7945f685068c30b47e5ac9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgY290aW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767508338&amp;x-signature=PjOPACEi3PV8cdwwBQtOL1vkD5g%3D" alt="image" loading="lazy"/><br/>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ba5b9be9914b4f08bd0773439f1c2aee~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgY290aW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767508338&amp;x-signature=S8y%2Bs0y2xnZnUtApQz8a62uZvAc%3D" alt="image" loading="lazy"/></p>
<h3 data-id="heading-4">3.å¢åŠ å¯å­¦ä¹ å‚æ•°</h3>
<p>æ¯ä¸ªçº¿æ€§å˜æ¢ W_Q, W_K, W_Véƒ½æ˜¯ <strong>å¯è®­ç»ƒæƒé‡</strong>ï¼Œæ¨¡å‹å¯ä»¥è‡ªåŠ¨å­¦ä¹ å¦‚ä½•å¯¹ä¸åŒ token çš„ embedding åšä¸åŒçš„æŸ¥è¯¢ã€åŒ¹é…å’ŒåŠ æƒã€‚</p>
<p>è¿™ä½¿å¾— self-attention ä¸åªæ˜¯ä¸€ä¸ªå›ºå®šçš„ç›¸ä¼¼åº¦è®¡ç®—ï¼Œè€Œæ˜¯ä¸€ä¸ª <strong>å¯è°ƒèŠ‚ã€å¯ä¼˜åŒ–çš„è¯­ä¹‰åŒ¹é…å‡½æ•°</strong>ã€‚</p>
<h3 data-id="heading-5">4.ä¾¿äºä¸‹æ¸¸æ“ä½œ</h3>
<p>QK^T è®¡ç®—çš„æ˜¯æ³¨æ„åŠ›æƒé‡ï¼Œå¦‚æœä¸åšçº¿æ€§å˜æ¢ï¼Œæ¨¡å‹åªèƒ½ä¾èµ–åŸå§‹ embedding çš„å†…ç§¯ï¼Œè¿™ç§ç›¸ä¼¼åº¦ç©ºé—´ä¸ä¸€å®šé€‚åˆ softmax åŠ æƒã€‚</p>
<p>çº¿æ€§å˜æ¢å¯ä»¥æŠŠ embedding æŠ•å½±åˆ°æ›´é€‚åˆåš<strong>æ³¨æ„åŠ›åŒ¹é…</strong>çš„ç©ºé—´ï¼Œæé«˜å­¦ä¹ èƒ½åŠ›ã€‚</p>
<h2 data-id="heading-6">ä¸‰ã€Q ä¸ K çš„ç‚¹ç§¯</h2>
<p>æ‹¿åˆ° Q å’Œ K åï¼Œself-attention è®¡ç®—çš„æ˜¯æ¯ä¸ª Query ä¸æ‰€æœ‰ Key çš„ç›¸ä¼¼åº¦ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/23e4c56e257f4c49a789bcad38f23b4f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgY290aW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767508338&amp;x-signature=O4eHDAusy8OpmKQ1fkwwQwqrWMY%3D" alt="image" loading="lazy"/></p>
<p>è¿™é‡Œçš„ç‚¹ç§¯ä»£è¡¨<strong>åŒ¹é…ç¨‹åº¦</strong>ï¼Œå³ï¼š</p>
<ul>
<li>Q_i è¡¨ç¤ºç¬¬ i ä¸ª token æƒ³å…³æ³¨çš„ä¿¡æ¯ï¼›</li>
<li>K_j è¡¨ç¤ºç¬¬ j ä¸ª token æ‰€åŒ…å«çš„ä¿¡æ¯ï¼›</li>
<li>å®ƒä»¬çš„ç‚¹ç§¯è¶Šå¤§ï¼Œè¯´æ˜ç¬¬ i ä¸ª token è¶Šåº”è¯¥å…³æ³¨ç¬¬ j ä¸ª tokenã€‚</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/20bc14ecd2c34b7d97063f169c5a2645~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgY290aW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767508338&amp;x-signature=pf%2FU9Y1ZZ9G1zhC3357vTnCupKU%3D" alt="" loading="lazy"/></p>
<p>ä»è®¡ç®—ä¸Šçœ‹ï¼Œç‚¹ç§¯æ˜¯å°†æ‰€æœ‰çš„å¯¹é½åˆ†é‡ç›¸ä¹˜å¹¶ç´¯åŠ ï¼›ä»å‡ ä½•ä¸Šçœ‹ï¼Œå½“å‘é‡æŒ‡å‘ç›¸ä¼¼æ–¹å‘æ—¶ï¼Œç‚¹ç§¯ä¸ºæ­£ï¼Œå¦‚æœå‘é‡å‚ç›´ï¼Œç‚¹ç§¯ä¸º0ï¼Œå½“å‘é‡æ–¹å‘ç›¸åæ—¶åˆ™ä¸ºè´Ÿæ•°ã€‚</p>
<p>è¿™æ ·ï¼Œæˆ‘ä»¬å°±å¾—åˆ°äº†ä¸€ä¸ªæ³¨æ„åŠ›åˆ†æ•°çŸ©é˜µï¼Œè¡¨ç¤ºæ¯ä¸ª token å¯¹å…¶ä»– token çš„<strong>æ³¨æ„åŠ›æƒé‡</strong>ã€‚</p>
<h2 data-id="heading-7">å››ã€ä¸ºä»€ä¹ˆè¦ç”¨ Softmaxï¼Ÿ</h2>
<p>é—®é¢˜æ¥äº†ï¼šæˆ‘ä»¬å·²ç»æœ‰äº†ç›¸ä¼¼åº¦åˆ†æ•°ï¼Œä¸ºä»€ä¹ˆè¿˜è¦å†è¿‡ä¸€é Softmaxï¼Ÿ</p>
<p>å…¶å®åŸå› å¾ˆç®€å•ï¼š</p>
<ol>
<li><strong>æŠŠâ€œç›¸ä¼¼åº¦â€å˜æˆâ€œæƒé‡åˆ†å¸ƒâ€</strong><br/>
ç‚¹ç§¯ç»“æœå¯ä»¥æ˜¯ä»»æ„å®æ•°ï¼Œè€Œ Softmax ä¼šæŠŠå®ƒä»¬å‹ç¼©åˆ° ( [0, 1] ) åŒºé—´ï¼Œå¹¶ä¸”æ‰€æœ‰æƒé‡ä¹‹å’Œä¸º 1ã€‚<br/>
è¿™è®©æ³¨æ„åŠ›åˆ†æ•°èƒ½è¢«è§£é‡Šä¸ºæ¦‚ç‡åˆ†å¸ƒï¼Œå³æ¨¡å‹åœ¨å…³æ³¨è°ã€å…³æ³¨å¤šå°‘ã€‚</li>
</ol>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8069bf7529a64711b9cf9c52fb2991af~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgY290aW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767508338&amp;x-signature=8CVFjNuXSnO%2Fqs7xJnil4Lbqs0U%3D" alt="" loading="lazy"/></p>
<ol start="2">
<li><strong>æ”¾å¤§å¼ºå…³æ³¨ã€å‰Šå¼±å¼±å…³æ³¨</strong><br/>
Softmax æœ‰æŒ‡æ•°ç‰¹æ€§ï¼Œä¼šè®©å¤§çš„åˆ†æ•°æ›´å¤§ã€å°çš„åˆ†æ•°æ›´å°ï¼Œä»è€Œçªå‡ºä¸»å¯¼æ³¨æ„åŠ›ã€‚<br/>
è¿™åœ¨è¯­ä¹‰å»ºæ¨¡ä¸­éå¸¸å…³é”®â€”â€”æ¨¡å‹ä¸ä¼šå¹³å‡åœ°çœ‹æ‰€æœ‰ tokenï¼Œè€Œæ˜¯èƒ½<strong>èšç„¦é‡ç‚¹</strong>ã€‚</li>
<li><strong>æ¢¯åº¦ç¨³å®šæ€§</strong><br/>
å¦‚æœç›´æ¥ç”¨ç‚¹ç§¯åšåŠ æƒï¼Œåˆ†æ•°å¯èƒ½è¿‡å¤§æˆ–è¿‡å°ï¼Œå¯¼è‡´æ¢¯åº¦ä¸ç¨³å®šã€‚<br/>
Softmax ä¿è¯äº†æ•°å€¼èŒƒå›´å¯æ§ï¼Œæ¢¯åº¦ä¼ æ’­æ›´å¹³æ»‘ã€‚</li>
</ol>
<p>æœ€åä¸€æ­¥ï¼ŒæŠŠæ³¨æ„åŠ›æƒé‡ä¹˜ä¸Š Valueï¼š<br/>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d8372c1f342a478dbc2d308d1f2c1205~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgY290aW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767508338&amp;x-signature=Tk4c3Qr%2FXEmr9C5Xlgc7IYTxp3s%3D" alt="image" loading="lazy"/><br/>
å°±å¾—åˆ°äº†æ¯ä¸ª token æ ¹æ®ä¸Šä¸‹æ–‡åŠ¨æ€åŠ æƒåçš„æ–°è¡¨ç¤ºã€‚</p>
<p>æ€»ç»“ä¸€ä¸‹ï¼ŒQã€Kã€V çš„çº¿æ€§å˜æ¢æ˜¯ä¸ºäº†è®©æ¨¡å‹ä»åŒä¸€è¾“å…¥ä¸­ç”Ÿæˆ<strong>ä¸åŒåŠŸèƒ½çš„å‘é‡è¡¨ç¤º</strong>ï¼Œåˆ†åˆ«è´Ÿè´£æé—®ã€åŒ¹é…å’Œä¼ é€’ä¿¡æ¯ï¼Œå¢å¼ºæ¨¡å‹çš„è¡¨è¾¾çµæ´»æ€§ã€‚</p>
<p>Softmax çš„ä½œç”¨åˆ™æ˜¯æŠŠç›¸ä¼¼åº¦åˆ†æ•°è½¬æˆç¨³å®šçš„æ³¨æ„åŠ›åˆ†å¸ƒï¼Œçªå‡ºé‡ç‚¹å¹¶ä¿è¯æ¢¯åº¦å¯è®­ç»ƒã€‚</p>
<p><strong>ğŸ“š</strong> <strong>æ¨èé˜…è¯»</strong></p>
<p>â— <a href="https://link.juejin.cn?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F1918047303597552480" target="_blank" title="https://zhuanlan.zhihu.com/p/1918047303597552480" ref="nofollow noopener noreferrer">ä¸€è§ˆTransformeræ•´ä½“æ¶æ„</a><br/>
â— <a href="https://link.juejin.cn?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F1918049072331362469" target="_blank" title="https://zhuanlan.zhihu.com/p/1918049072331362469" ref="nofollow noopener noreferrer">Transformerâ€”â€”Attentionæ€ä¹ˆå®ç°é›†ä¸­æ³¨æ„åŠ›</a><br/>
â— <a href="https://link.juejin.cn?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F1918050616376301224" target="_blank" title="https://zhuanlan.zhihu.com/p/1918050616376301224" ref="nofollow noopener noreferrer">Transformerâ€”â€”FeedForwardæ¨¡å—åœ¨å¹²ä»€ä¹ˆï¼Ÿ</a><br/>
â— <a href="https://link.juejin.cn?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F1918357249883105145" target="_blank" title="https://zhuanlan.zhihu.com/p/1918357249883105145" ref="nofollow noopener noreferrer">ä»0å¼€å§‹å®ç°Transformer</a><br/>
â— <a href="https://link.juejin.cn?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F1919338888536756837" target="_blank" title="https://zhuanlan.zhihu.com/p/1919338888536756837" ref="nofollow noopener noreferrer">ä»€ä¹ˆæ˜¯KV-Cache</a><br/>
â— <a href="https://link.juejin.cn?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F1919500956946655189" target="_blank" title="https://zhuanlan.zhihu.com/p/1919500956946655189" ref="nofollow noopener noreferrer">Transformeræ³¨æ„åŠ›æœºåˆ¶â€”â€”MHA&amp;MQA&amp;GQA</a><br/>
â— <a href="https://link.juejin.cn?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F1923328314241704991" target="_blank" title="https://zhuanlan.zhihu.com/p/1923328314241704991" ref="nofollow noopener noreferrer">FlashAttentionæ€ä¹ˆæå‡é€Ÿåº¦çš„ï¼Ÿ</a><br/>
â— <a href="https://link.juejin.cn?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F1963547933044631464" target="_blank" title="https://zhuanlan.zhihu.com/p/1963547933044631464" ref="nofollow noopener noreferrer">é¢è¯•å®˜ï¼šBatchNormã€LayerNormã€GroupNormã€InstanceNorm æœ‰ä»€ä¹ˆæœ¬è´¨åŒºåˆ«ï¼Ÿ</a><br/>
â— <a href="https://link.juejin.cn?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F1962254381677257759" target="_blank" title="https://zhuanlan.zhihu.com/p/1962254381677257759" ref="nofollow noopener noreferrer">é¢è¯•å®˜ï¼šTransformerå¦‚ä½•ä¼˜åŒ–åˆ°çº¿æ€§çº§ï¼Ÿ</a><br/>
â— <a href="https://link.juejin.cn?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F1923714840653993730" target="_blank" title="https://zhuanlan.zhihu.com/p/1923714840653993730" ref="nofollow noopener noreferrer">FlashAttention2ï¼šæ›´å¿«çš„æ³¨æ„åŠ›æœºåˆ¶ï¼Œæ›´å¥½çš„å¹¶è¡Œæ•ˆç‡</a><br/>
â— <a href="https://link.juejin.cn?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F1924154277082961318" target="_blank" title="https://zhuanlan.zhihu.com/p/1924154277082961318" ref="nofollow noopener noreferrer">FlashAttention3 å…¨è§£æï¼šé€Ÿåº¦ã€ç²¾åº¦ã€æ˜¾å­˜çš„å†å¹³è¡¡</a><br/>
â— <a href="https://link.juejin.cn?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F1971661595559059790" target="_blank" title="https://zhuanlan.zhihu.com/p/1971661595559059790" ref="nofollow noopener noreferrer">Transformer ä¸­ä¸ºä»€ä¹ˆç”¨LayerNormè€Œä¸ç”¨BatchNormï¼Ÿ</a></p>
<p>å…³äºæ·±åº¦å­¦ä¹ å’ŒAIå¤§æ¨¡å‹ç›¸å…³çš„çŸ¥è¯†å’Œå‰æ²¿æŠ€æœ¯æ›´æ–°ï¼Œè¯·å…³æ³¨å…¬ä¼—å· <strong>aicoting</strong>ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[SpringBoot æ¥å…¥é£ä¹¦å¤šç»´è¡¨æ ¼ï¼Œå¿«é€Ÿè·‘é€šMVPåº”ç”¨]]></title>    <link>https://juejin.cn/post/7589092567544119305</link>    <guid>https://juejin.cn/post/7589092567544119305</guid>    <pubDate>2025-12-29T09:36:43.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589092567544119305" data-draft-id="7589093895326367753" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="SpringBoot æ¥å…¥é£ä¹¦å¤šç»´è¡¨æ ¼ï¼Œå¿«é€Ÿè·‘é€šMVPåº”ç”¨"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-29T09:36:43.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Corbing"/> <meta itemprop="url" content="https://juejin.cn/user/1284695418219886"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            SpringBoot æ¥å…¥é£ä¹¦å¤šç»´è¡¨æ ¼ï¼Œå¿«é€Ÿè·‘é€šMVPåº”ç”¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1284695418219886/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Corbing
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T09:36:43.000Z" title="Mon Dec 29 2025 09:36:43 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">é¡¹ç›®åœ°å€ï¼š</h2>
<ul>
<li>Gitee: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Fbdmcom%2Ffs-dw-table-springboot-starter" target="_blank" title="https://gitee.com/bdmcom/fs-dw-table-springboot-starter" ref="nofollow noopener noreferrer">gitee.com/bdmcom/fs-dâ€¦</a></li>
<li>GitHub: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fbendangmi%2Ffs-dw-table-springboot-starter" target="_blank" title="https://github.com/bendangmi/fs-dw-table-springboot-starter" ref="nofollow noopener noreferrer">github.com/bendangmi/fâ€¦</a></li>
</ul>
<h2 data-id="heading-1">é¡¹ç›®è¯´æ˜</h2>
<ul>
<li>å°†é£ä¹¦å¤šç»´è¡¨æ ¼ä½œä¸ºæ•°æ®æºï¼Œåƒæ“ä½œ MySQL ç­‰æ•°æ®åº“ä¸€æ ·å®Œæˆæ•°æ® CRUD</li>
<li>æŸ¥è¯¢èƒ½åŠ›å¯¹æ ‡ MyBatis-Plusï¼Œä½¿ç”¨ <code>DwLambdaQueryWrapper</code> å®Œæˆæ¡ä»¶æ„é€ </li>
<li>å±è”½åº•å±‚ Open API è°ƒç”¨ï¼Œå¼€å‘è€…åªéœ€å¼•å…¥ä¾èµ–å¹¶å¡«å†™é£ä¹¦é…ç½®</li>
</ul>
<h2 data-id="heading-2">æ¶æ„è®¾è®¡</h2>
<h3 data-id="heading-3">åˆ†å±‚æ¶æ„</h3>
<pre><code class="hljs language-scss" lang="scss">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        åº”ç”¨å±‚ (Application)                   â”‚
â”‚  FsDwRecordHelper / FsDwTableHelper / FsDwFieldHelper       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        æœåŠ¡å±‚ (Service)                      â”‚
â”‚     FsDwRecordService / FsDwTableService / FsDwFieldService â”‚
â”‚                      FsDwTokenService                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         APIå±‚ (HTTP Client)                  â”‚
â”‚      FsDwRecordApi / FsDwTableApi / FsDwFieldApi             â”‚
â”‚                    (Forest å£°æ˜å¼ HTTP å®¢æˆ·ç«¯)                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      é£ä¹¦å¤šç»´è¡¨æ ¼ Open API                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h3 data-id="heading-4">æ ¸å¿ƒç»„ä»¶</h3>













































<table><thead><tr><th>ç»„ä»¶</th><th>èŒè´£</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>@EnableFsDwTable</code></td><td>å¯ç”¨è‡ªåŠ¨é…ç½®</td><td>æ˜¾å¼å¯ç”¨ï¼Œé¿å…ä¸å…¶ä»–å®ç°å†²çª</td></tr><tr><td><code>FsDwAutoConfiguration</code></td><td>è‡ªåŠ¨é…ç½®ç±»</td><td>æ³¨å†Œæ‰€æœ‰æ ¸å¿ƒ Bean å¹¶æ‰«æ Forest æ¥å£</td></tr><tr><td><code>FsDwProperties</code></td><td>é…ç½®å±æ€§</td><td>ç»‘å®š <code>duoweitable.*</code> é…ç½®é¡¹</td></tr><tr><td><code>FsDwTokenService</code></td><td>Token ç®¡ç†</td><td>ä½¿ç”¨ Caffeine é«˜æ€§èƒ½ç¼“å­˜ï¼Œæ”¯æŒå¹¶å‘å’Œç»Ÿè®¡</td></tr><tr><td><code>DwLambdaQueryWrapper</code></td><td>æŸ¥è¯¢æ„é€ å™¨</td><td>MyBatis-Plus é£æ ¼çš„ Lambda ç±»å‹å®‰å…¨æŸ¥è¯¢</td></tr><tr><td><code>FsDwRecordHelper</code></td><td>è®°å½•æ“ä½œåŠ©æ‰‹</td><td>é™æ€å·¥å…·æ–¹æ³•ï¼Œä¾¿æ· CRUD æ“ä½œ</td></tr><tr><td><code>BitableException</code></td><td>ç»Ÿä¸€å¼‚å¸¸</td><td>æºå¸¦é”™è¯¯ç çš„å¼‚å¸¸ä½“ç³»</td></tr></tbody></table>
<h3 data-id="heading-5">æ³¨è§£ä½“ç³»</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@FsDwAppBase(appToken = "app_token")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DemoAppBase</span> {
}

<span class="hljs-meta">@FsDwTable(name = "è¡¨å", tableId = "tblxxx", viewId = "vewxxx")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Entity</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">DemoAppBase</span> {
    <span class="hljs-meta">@FsDwTableId</span>                    <span class="hljs-comment">// æ ‡è®°è®°å½• ID å­—æ®µ</span>
    <span class="hljs-keyword">private</span> String recordId;

    <span class="hljs-meta">@FsDwTableProperty(value = "å­—æ®µå", order = 1, type = TypeEnum.TEXT)</span>
    <span class="hljs-keyword">private</span> String fieldName;
}
</code></pre>
<h3 data-id="heading-6">HTTP å®¢æˆ·ç«¯</h3>
<p>æœ¬é¡¹ç›®ä½¿ç”¨ <strong>Forest</strong> ä½œä¸º HTTP å®¢æˆ·ç«¯ï¼Œç›¸æ¯” RestTemplate/WebClientï¼š</p>
<ul>
<li>å£°æ˜å¼æ¥å£å®šä¹‰ï¼Œæ— éœ€æ‰‹å†™è¯·æ±‚ä»£ç </li>
<li>è‡ªåŠ¨ JSON åºåˆ—åŒ–/ååºåˆ—åŒ–</li>
<li>æ”¯æŒæ‹¦æˆªå™¨ã€è¿‡æ»¤å™¨ç­‰æ‰©å±•æœºåˆ¶</li>
<li>åº•å±‚ä½¿ç”¨ OkHttpï¼Œæ€§èƒ½ä¼˜å¼‚</li>
</ul>
<h3 data-id="heading-7">ç¼“å­˜ç­–ç•¥</h3>
<p><strong>Token ç¼“å­˜</strong> ä½¿ç”¨ Caffeineï¼š</p>
<ul>
<li>è‡ªåŠ¨è¿‡æœŸï¼ˆ2å°æ—¶ï¼‰</li>
<li>å¹¶å‘å®‰å…¨ï¼ˆåŸºäº ConcurrentHashMapï¼‰</li>
<li>LRU æ·˜æ±°ç­–ç•¥ï¼ˆæœ€å¤š 100 ä¸ª tokenï¼‰</li>
<li>æ”¯æŒç»Ÿè®¡ä¿¡æ¯ï¼ˆå‘½ä¸­ç‡ç­‰ï¼‰</li>
<li>æå‰ 60 ç§’åˆ·æ–°ç¼“å†²</li>
</ul>
<h2 data-id="heading-8">è§£å†³çš„é—®é¢˜</h2>
<ul>
<li>å…å» Token é‰´æƒã€è¯·æ±‚æ„é€ ã€å“åº”è§£æç­‰â€œèƒ¶æ°´å·¥ä½œâ€ï¼Œä¸šåŠ¡å±‚åªä¿ç•™ CRUD è¯­ä¹‰</li>
<li>ç»Ÿä¸€å­—æ®µæ˜ å°„ä¸ç±»å‹è½¬æ¢ï¼Œå‡å°‘æ‰‹å†™ JSON/Map ä¸å­—æ®µåä¸ä¸€è‡´çš„é£é™©</li>
<li>æä¾›ç±»æ•°æ®åº“çš„æ¡ä»¶æŸ¥è¯¢ä¸åˆ†é¡µèƒ½åŠ›ï¼Œè®©æ•°æ®è®¿é—®æ›´æ˜“ç»´æŠ¤ã€å¯è¯»</li>
</ul>
<h2 data-id="heading-9">é¡¹ç›®äº®ç‚¹</h2>
<ul>
<li>é€šè¿‡ @EnableFsDwTable æ˜¾å¼å¯ç”¨è‡ªåŠ¨é…ç½® + Forest æ‰«æï¼Œé¿å…ä¸å…¶ä»–å®ç°å†²çª</li>
<li>æ³¨è§£é©±åŠ¨å®ä½“æ˜ å°„ï¼ˆ<code>@FsDwAppBase</code> / <code>@FsDwTable</code> / <code>@FsDwTableProperty</code> / <code>@FsDwTableId</code>ï¼‰ï¼Œæ”¯æŒå…ƒå­—æ®µè¯»å–</li>
<li><code>DwLambdaQueryWrapper</code> æä¾› MyBatis-Plus é£æ ¼çš„æ¡ä»¶ã€æ’åºã€åˆ†é¡µä¸å­—æ®µé€‰æ‹©</li>
<li>è®°å½•/è¡¨/å­—æ®µå¤šå±‚çº§ Helper ä¸ Service ç»„åˆï¼Œå…¼é¡¾ç®€å•è°ƒç”¨ä¸å¯æ‰©å±•é›†æˆ</li>
<li>Token å†…å­˜ç¼“å­˜ + æå‰åˆ·æ–°ç¼“å†²ï¼Œé™ä½é¢‘ç¹é‰´æƒè¯·æ±‚</li>
<li>ç»Ÿä¸€é”™è¯¯ç ä¸æ–­è¨€ä½“ç³»ï¼ˆ<code>BitableException</code> / <code>BitableErrorCode</code>ï¼‰</li>
</ul>
<h2 data-id="heading-10">åŠŸèƒ½ç‰¹æ€§</h2>
<ul>
<li>å¯ç”¨æ³¨è§£åè‡ªåŠ¨é…ç½®å¹¶æ‰«æ Forest HTTP å®¢æˆ·ç«¯</li>
<li>æ³¨è§£é©±åŠ¨å®ä½“æ˜ å°„ï¼ˆ<code>@FsDwAppBase</code> / <code>@FsDwTable</code> / <code>@FsDwTableProperty</code> / <code>@FsDwTableId</code>ï¼‰ï¼Œæ”¯æŒå…ƒå­—æ®µæ˜ å°„</li>
<li>ç±»æ•°æ®åº“çš„ CRUD ä½“éªŒï¼Œå±è”½é£ä¹¦å¤šç»´è¡¨æ ¼åº•å±‚è°ƒç”¨</li>
<li>MyBatis-Plus é£æ ¼æŸ¥è¯¢ï¼Œ<code>DwLambdaQueryWrapper</code> æ¡ä»¶æ„é€ </li>
<li>è®°å½•ã€æ•°æ®è¡¨ã€å­—æ®µæ“ä½œçš„ Helper API</li>
<li>ç»Ÿä¸€å¼‚å¸¸ä¸é”™è¯¯ç ï¼ˆ<code>BitableException</code> / <code>BitableErrorCode</code>ï¼‰</li>
</ul>
<h2 data-id="heading-11">è¿è¡Œç¯å¢ƒ</h2>
<ul>
<li>Java 17+</li>
<li>Spring Boot 3.x</li>
<li>é£ä¹¦åº”ç”¨å‡­è¯ï¼ˆappIdã€appSecretï¼‰ï¼ŒappToken ç”± @FsDwAppBase æä¾›</li>
</ul>
<h2 data-id="heading-12">å®‰è£…</h2>
<p>Maven:</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>cn.bdmcom<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>fs-dw-table-springboot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0.3<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<p>Gradle:</p>
<pre><code class="hljs language-kotlin" lang="kotlin">dependencies {
  implementation(<span class="hljs-string">"cn.bdmcom:fs-dw-table-springboot-starter:1.0.0"</span>)
}
</code></pre>
<h2 data-id="heading-13">é…ç½®</h2>
<p>æœ€å°é…ç½®ï¼ˆHelper API å¿…éœ€ï¼‰ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">duoweitable:</span>
  <span class="hljs-attr">app-id:</span> <span class="hljs-string">your-app-id</span>
  <span class="hljs-attr">app-secret:</span> <span class="hljs-string">your-app-secret</span>
</code></pre>
<p><code>application.properties</code> ç­‰ä»·å†™æ³•ï¼š</p>
<pre><code class="hljs language-properties" lang="properties">duoweitable.app-id=your-app-id
duoweitable.app-secret=your-app-secret
</code></pre>
<p>appToken å»ºè®®æ”¾åœ¨å®ä½“çˆ¶ç±»çš„ <code>@FsDwAppBase</code> ä¸­ï¼ˆappToken ç›¸å½“äºä¸€ä¸ª Excelï¼ŒtableId ç›¸å½“äºä¸€ä¸ª Sheetï¼‰ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@FsDwAppBase(appToken = "app_token")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DemoAppBase</span> {
}
</code></pre>
<p>Forest å®¢æˆ·ç«¯å¯é€‰é…ç½®ï¼ˆä»…åœ¨éœ€è¦è¦†ç›–æ—¶é…ç½®ï¼‰ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">forest:</span>
  <span class="hljs-attr">backend:</span> <span class="hljs-string">okhttp3</span>
  <span class="hljs-attr">connect-timeout:</span> <span class="hljs-number">5000</span>
  <span class="hljs-attr">read-timeout:</span> <span class="hljs-number">5000</span>
  <span class="hljs-attr">max-retry-count:</span> <span class="hljs-number">0</span>
</code></pre>
<h2 data-id="heading-14">å¯ç”¨æ–¹å¼ï¼ˆ3 æ­¥ï¼‰</h2>
<ol>
<li>å¼•å…¥ä¾èµ–</li>
<li>é…ç½®å‚æ•°</li>
<li>å¯åŠ¨ç±»åŠ æ³¨è§£ï¼ˆä¸åŠ æ³¨è§£ä¸ä¼šåŠ è½½ Starterï¼Œå·²ç¦ç”¨ AutoConfiguration.imports è‡ªåŠ¨è£…é…ï¼‰</li>
</ol>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> cn.bdmcom.annotation.EnableFsDwTable;
<span class="hljs-keyword">import</span> org.springframework.boot.SpringApplication;
<span class="hljs-keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;

<span class="hljs-meta">@SpringBootApplication</span>
<span class="hljs-meta">@EnableFsDwTable</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DemoApplication</span> {
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
    SpringApplication.run(DemoApplication.class, args);
  }
}
</code></pre>
<h2 data-id="heading-15">æ³¨æ„äº‹é¡¹ï¼ˆå·²ä½¿ç”¨ Forest çš„é¡¹ç›®ï¼‰</h2>
<p>å¦‚æœä½ çš„é¡¹ç›®å·²ç»ä½¿ç”¨äº† Forestï¼Œå¹¶ä¸”è‡ªå·±åŠ äº† <code>@ForestScan</code>ï¼Œè¯·æŠŠ <code>cn.bdmcom.core.api</code> åŠ åˆ°
<code>basePackages</code>ï¼Œå¦åˆ™ Starter çš„æ¥å£ä¸ä¼šè¢«æ‰«æåˆ°ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> com.dtflys.forest.springboot.annotation.ForestScan;
<span class="hljs-keyword">import</span> org.springframework.context.annotation.Configuration;

<span class="hljs-meta">@Configuration</span>
<span class="hljs-meta">@ForestScan(basePackages = {
  "your.project.forest.clients",
  "cn.bdmcom.core.api"
})</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ForestClientConfig</span> {
}
</code></pre>
<h2 data-id="heading-16">å¿«é€Ÿå¼€å§‹</h2>
<h3 data-id="heading-17">1) å®šä¹‰ App åŸºç±»</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@FsDwAppBase(appToken = "app_token")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DemoAppBase</span> {
}
</code></pre>
<h3 data-id="heading-18">2) å®šä¹‰å®ä½“</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@FsDwTable(name = "Test Table", tableId = "tblxxxxx", viewId = "vewxxxxx")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TestTable</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">DemoAppBase</span> {
  <span class="hljs-meta">@FsDwTableId</span>
  <span class="hljs-keyword">private</span> String recordId;

  <span class="hljs-meta">@FsDwTableProperty(value = "Name", order = 1, type = TypeEnum.TEXT)</span>
  <span class="hljs-keyword">private</span> String name;

  <span class="hljs-meta">@FsDwTableProperty(value = "Age", order = 2, type = TypeEnum.NUMBER)</span>
  <span class="hljs-keyword">private</span> Integer age;
}
</code></pre>
<h3 data-id="heading-19">3) æŸ¥è¯¢è®°å½•</h3>
<pre><code class="hljs language-java" lang="java">List&lt;TestTable&gt; records = FsDwRecordHelper.queryRecords(TestTable.class);
</code></pre>
<h3 data-id="heading-20">4) æ–°å¢è®°å½•</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">TestTable</span> <span class="hljs-variable">add</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TestTable</span>();
add.setName(<span class="hljs-string">"Alice"</span>);
add.setAge(<span class="hljs-number">18</span>);
<span class="hljs-type">AddRecordRes</span> <span class="hljs-variable">res</span> <span class="hljs-operator">=</span> FsDwRecordHelper.addRecord(add);
</code></pre>
<h3 data-id="heading-21">5) æ‰¹é‡æ–°å¢è®°å½•</h3>
<pre><code class="hljs language-java" lang="java">List&lt;TestTable&gt; batch = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
<span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {
  <span class="hljs-type">TestTable</span> <span class="hljs-variable">item</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TestTable</span>();
  item.setName(<span class="hljs-string">"User-"</span> + i);
  item.setAge(<span class="hljs-number">18</span>);
  batch.add(item);
}
<span class="hljs-type">BatchCreateRecordRes</span> <span class="hljs-variable">batchRes</span> <span class="hljs-operator">=</span> FsDwRecordHelper.batchCreateRecords(TestTable.class, batch);
</code></pre>
<h3 data-id="heading-22">6) æ›´æ–°è®°å½•</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">TestTable</span> <span class="hljs-variable">update</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TestTable</span>();
update.setRecordId(<span class="hljs-string">"recxxxxxx"</span>);
update.setName(<span class="hljs-string">"Alice"</span>);
<span class="hljs-type">UpdateRecordRes</span> <span class="hljs-variable">res</span> <span class="hljs-operator">=</span> FsDwRecordHelper.updateRecord(update);
</code></pre>
<h3 data-id="heading-23">7) åˆ é™¤è®°å½•</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">TestTable</span> <span class="hljs-variable">del</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TestTable</span>();
del.setRecordId(<span class="hljs-string">"recxxxxxx"</span>);
<span class="hljs-type">DeleteRecordRes</span> <span class="hljs-variable">res</span> <span class="hljs-operator">=</span> FsDwRecordHelper.deleteRecord(del);
</code></pre>
<h2 data-id="heading-24">æ¡ä»¶æŸ¥è¯¢</h2>
<pre><code class="hljs language-java" lang="java">DwLambdaQueryWrapper&lt;TestTable&gt; wrapper = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DwLambdaQueryWrapper</span>&lt;&gt;();
wrapper.eq(TestTable::getName, <span class="hljs-string">"Alice"</span>);
List&lt;TestTable&gt; list = FsDwRecordHelper.queryRecords(TestTable.class, wrapper);

wrapper = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DwLambdaQueryWrapper</span>&lt;&gt;();
wrapper.between(TestTable::getAge, <span class="hljs-number">18</span>, <span class="hljs-number">30</span>);
list = FsDwRecordHelper.queryRecords(TestTable.class, wrapper);

wrapper = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DwLambdaQueryWrapper</span>&lt;&gt;();
wrapper.pageSize(<span class="hljs-number">20</span>);
wrapper.pageNo(<span class="hljs-number">2</span>);
list = FsDwRecordHelper.queryRecords(TestTable.class, wrapper);
</code></pre>
<h2 data-id="heading-25">æ•°æ®è¡¨æ“ä½œ</h2>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">CreateTableRes</span> <span class="hljs-variable">created</span> <span class="hljs-operator">=</span> FsDwTableHelper.createTable(TestTable.class);
List&lt;ListTableRes.TableItem&gt; all = FsDwTableHelper.listAllTables(TestTable.class);
<span class="hljs-type">UpdateTableRes</span> <span class="hljs-variable">updated</span> <span class="hljs-operator">=</span> FsDwTableHelper.updateTable(TestTable.class);
<span class="hljs-type">DeleteTableRes</span> <span class="hljs-variable">deleted</span> <span class="hljs-operator">=</span> FsDwTableHelper.deleteTable(TestTable.class);
</code></pre>
<h2 data-id="heading-26">å­—æ®µæ“ä½œ</h2>
<pre><code class="hljs language-java" lang="java">List&lt;TableFieldListRes.TableField&gt; fields = FsDwFieldHelper.listFields(<span class="hljs-string">"tblxxxxx"</span>, <span class="hljs-string">"vewxxxxx"</span>);
<span class="hljs-type">AddFieldRes</span> <span class="hljs-variable">created</span> <span class="hljs-operator">=</span> FsDwFieldHelper.createField(TestTable.class, <span class="hljs-keyword">new</span> <span class="hljs-title class_">AddFieldReq</span>(<span class="hljs-string">"New Field"</span>, TypeEnum.TEXT));
<span class="hljs-type">UpdateFieldRes</span> <span class="hljs-variable">updated</span> <span class="hljs-operator">=</span> FsDwFieldHelper.updateFieldByName(TestTable.class, <span class="hljs-string">"New Field"</span>,
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">UpdateFieldReq</span>(<span class="hljs-string">"New Field Name"</span>, TypeEnum.TEXT));
<span class="hljs-type">DeleteFieldRes</span> <span class="hljs-variable">deleted</span> <span class="hljs-operator">=</span> FsDwFieldHelper.deleteFieldByName(TestTable.class, <span class="hljs-string">"New Field Name"</span>);
</code></pre>
<h2 data-id="heading-27">ç›´æ¥ä½¿ç”¨ Service Bean</h2>
<p>å¦‚æœå¸Œæœ›ä½¿ç”¨ Spring ç®¡ç†çš„ Serviceï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DemoService</span> {
  <span class="hljs-meta">@Autowired</span>
  <span class="hljs-keyword">private</span> FsDwRecordService recordService;

  <span class="hljs-keyword">public</span> QueryRecordRes <span class="hljs-title function_">query</span><span class="hljs-params">(String appId, String appSecret, String appToken, String tableId, QueryRecordReq req)</span> {
    <span class="hljs-keyword">return</span> recordService.queryRecord(appId, appSecret, appToken, tableId, req);
  }
}
</code></pre>
<h2 data-id="heading-28">å¼‚å¸¸ä¸é”™è¯¯ç </h2>
<p>æ‰€æœ‰ Helper/Service æ–¹æ³•åœ¨å¤±è´¥æ—¶ä¼šæŠ›å‡º <code>BitableException</code>ã€‚
é”™è¯¯ç ä¸ä¿¡æ¯è¯·å‚è€ƒ <code>BitableErrorCode</code>ã€‚</p>
<h2 data-id="heading-29">æ³¨æ„äº‹é¡¹</h2>
<h3 data-id="heading-30">1. åˆ†é¡µæŸ¥è¯¢çš„æ€§èƒ½é™åˆ¶</h3>
<p>é£ä¹¦å¤šç»´è¡¨æ ¼çš„åˆ†é¡µæœºåˆ¶ä¸ä¼ ç»Ÿçš„æ•°æ®åº“åˆ†é¡µï¼ˆå¦‚ MySQL çš„ OFFSETï¼‰ä¸åŒï¼š</p>
<ul>
<li><strong>é¡ºåºåˆ†é¡µ</strong>ï¼šé£ä¹¦ä½¿ç”¨ <code>page_token</code> æœºåˆ¶ï¼Œå¿…é¡»ä»ç¬¬ä¸€é¡µå¼€å§‹é¡ºåºè·å–</li>
<li><strong>æ€§èƒ½å½±å“</strong>ï¼šæŸ¥è¯¢ç¬¬ N é¡µéœ€è¦å‘èµ· N æ¬¡è¯·æ±‚ï¼Œå¯¹äºå¤§ç»“æœé›†ä¼šæœ‰æ€§èƒ½é—®é¢˜</li>
<li><strong>å»ºè®®</strong>ï¼š
<ul>
<li>å°½é‡ä½¿ç”¨æŸ¥è¯¢æ¡ä»¶ç¼©å°ç»“æœé›†èŒƒå›´</li>
<li>é¿å…è·³è½¬åˆ°å¾ˆæ·±çš„é¡µç ï¼ˆå¦‚ç›´æ¥æŸ¥ç¬¬ 1000 é¡µï¼‰</li>
<li>å¦‚æœéœ€è¦å¤§æ•°æ®é‡å¤„ç†ï¼Œè€ƒè™‘ä½¿ç”¨å…¨é‡å¯¼å‡ºæˆ–å…¶ä»–æ–¹å¼</li>
</ul>
</li>
</ul>
<h3 data-id="heading-31">2. åŒ API è®¾è®¡è¯´æ˜</h3>
<p>æœ¬é¡¹ç›®æä¾›äº†ä¸¤ç§ä½¿ç”¨æ–¹å¼ï¼š</p>
<p><strong>é™æ€ Helper API</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java">FsDwRecordHelper.queryRecords(TestTable.class);
</code></pre>
<ul>
<li>ä¼˜ç‚¹ï¼šç®€æ´ä¾¿æ·ï¼Œæ— éœ€æ³¨å…¥</li>
<li>ç¼ºç‚¹ï¼šé™æ€æ–¹æ³•éš¾ä»¥ mockï¼Œä¸åˆ©äºå•å…ƒæµ‹è¯•</li>
</ul>
<p><strong>Service Bean API</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Autowired</span>
<span class="hljs-keyword">private</span> FsDwRecordService recordService;
</code></pre>
<ul>
<li>ä¼˜ç‚¹ï¼šå¯æµ‹è¯•ã€å¯ AOP æ‹¦æˆªã€æ”¯æŒå¤šç§Ÿæˆ·</li>
<li>ç¼ºç‚¹ï¼šéœ€è¦æ˜¾å¼æ³¨å…¥</li>
</ul>
<p><strong>å»ºè®®</strong>ï¼šç®€å•é¡¹ç›®ç”¨ Helperï¼Œå¤æ‚é¡¹ç›®æˆ–å¤šç§Ÿæˆ·åœºæ™¯ç”¨ Serviceã€‚</p>
<h3 data-id="heading-32">3. ä¸ç°æœ‰ Forest é¡¹ç›®çš„é›†æˆ</h3>
<p>å¦‚æœä½ çš„é¡¹ç›®å·²ç»ä½¿ç”¨äº† Forest å¹¶è‡ªå®šä¹‰äº† <code>@ForestScan</code>ï¼Œéœ€è¦ç¡®ä¿å°†æœ¬é¡¹ç›®çš„ API åŒ…åŠ å…¥æ‰«æè·¯å¾„ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@ForestScan(basePackages = {
    "your.project.forest.clients",
    "cn.bdmcom.core.api"  // å¿…é¡»åŒ…å«
})</span>
</code></pre>
<h3 data-id="heading-33">4. Lambda æŸ¥è¯¢çš„æ€§èƒ½è€ƒè™‘</h3>
<p><code>DwLambdaQueryWrapper</code> ä½¿ç”¨åå°„è§£æ Lambda è¡¨è¾¾å¼è·å–å­—æ®µåï¼š</p>
<ul>
<li>é¦–æ¬¡è§£æä¼šæœ‰æ€§èƒ½å¼€é”€ï¼Œå­—æ®µåæ˜ å°„ä¼šè¢«ç¼“å­˜</li>
<li>é¢‘ç¹åˆ›å»ºæ–°çš„ Wrapper å®ä¾‹ä¼šæœ‰ä¸€å®šå¼€é”€</li>
<li>å»ºè®®å¤ç”¨ Wrapper å®ä¾‹æˆ–ä½¿ç”¨å­—ç¬¦ä¸²å­—æ®µå</li>
</ul>
<h3 data-id="heading-34">5. Token ç¼“å­˜ç®¡ç†</h3>
<p>Token é»˜è®¤ç¼“å­˜ 2 å°æ—¶ï¼ˆæå‰ 60 ç§’åˆ·æ–°ï¼‰ï¼Œå¦‚éœ€æ‰‹åŠ¨æ¸…é™¤ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Autowired</span>
<span class="hljs-keyword">private</span> FsDwTokenService tokenService;

<span class="hljs-comment">// æ¸…é™¤æŒ‡å®š token</span>
tokenService.evictToken(appId, appSecret);

<span class="hljs-comment">// æ¸…é™¤æ‰€æœ‰ token</span>
tokenService.evictAll();

<span class="hljs-comment">// è·å–ç¼“å­˜ç»Ÿè®¡</span>
<span class="hljs-type">CacheStats</span> <span class="hljs-variable">stats</span> <span class="hljs-operator">=</span> tokenService.getCacheStats();
</code></pre>
<h3 data-id="heading-35">6. ç±»å‹è½¬æ¢é™åˆ¶</h3>
<p>é£ä¹¦å¤šç»´è¡¨æ ¼çš„å­—æ®µç±»å‹ä¸ Java ç±»å‹æ˜ å°„æœ‰é™åˆ¶ï¼š</p>
<ul>
<li>æ—¥æœŸæ—¶é—´ï¼šè‡ªåŠ¨è½¬æ¢ä¸º <code>LocalDateTime</code>/<code>LocalDate</code></li>
<li>å¤šé€‰/å•é€‰ï¼šè¿”å›æ–‡æœ¬å†…å®¹æˆ–æ•°ç»„</li>
<li>å¤æ‚åµŒå¥—ç»“æ„å¯èƒ½éœ€è¦æ‰‹åŠ¨å¤„ç†</li>
</ul>
<h2 data-id="heading-36">å‘å¸ƒåˆ° Maven Central</h2>
<p>å‘å¸ƒå‰è¯·æ›´æ–° <code>pom.xml</code> å…ƒä¿¡æ¯ï¼š</p>
<ul>
<li><code>url</code>ã€<code>scm</code>ã€<code>developers</code></li>
<li><code>groupId</code> æ‰€æœ‰æƒä¸å‘å¸ƒç‰ˆæœ¬å·</li>
</ul>
<p>ç­¾åæ„å»ºï¼š</p>
<pre><code class="hljs language-sh" lang="sh">mvn -P release -DskipTests clean verify
</code></pre>
<p>å‘å¸ƒéœ€è¦é…ç½® Sonatype è´¦å·ä¸ GPG å¯†é’¥ï¼Œè¯·æ ¹æ®å®˜æ–¹æµç¨‹å®Œæˆå‘å¸ƒã€‚</p>
<h2 data-id="heading-37">è®¸å¯è¯</h2>
<p>Apache License, Version 2.0</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[AI æ˜¯å¦çœŸçš„èƒ½å®Œå…¨æ›¿ä»£ç¨‹åºå‘˜ï¼Ÿä»æˆ‘è¯•ç”¨ AI å¼€å‘åˆ°å‰åç«¯æ¶æ„ä¸é¡µé¢å¼€å‘çš„çœŸå®åˆ†æ]]></title>    <link>https://juejin.cn/post/7589099845186338852</link>    <guid>https://juejin.cn/post/7589099845186338852</guid>    <pubDate>2025-12-29T09:49:23.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589099845186338852" data-draft-id="7589201772117606406" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="AI æ˜¯å¦çœŸçš„èƒ½å®Œå…¨æ›¿ä»£ç¨‹åºå‘˜ï¼Ÿä»æˆ‘è¯•ç”¨ AI å¼€å‘åˆ°å‰åç«¯æ¶æ„ä¸é¡µé¢å¼€å‘çš„çœŸå®åˆ†æ"/> <meta itemprop="keywords" content="åç«¯,AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2025-12-29T09:49:23.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æŒ–åœŸæœº_008"/> <meta itemprop="url" content="https://juejin.cn/user/4373178080835884"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            AI æ˜¯å¦çœŸçš„èƒ½å®Œå…¨æ›¿ä»£ç¨‹åºå‘˜ï¼Ÿä»æˆ‘è¯•ç”¨ AI å¼€å‘åˆ°å‰åç«¯æ¶æ„ä¸é¡µé¢å¼€å‘çš„çœŸå®åˆ†æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4373178080835884/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æŒ–åœŸæœº_008
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T09:49:23.000Z" title="Mon Dec 29 2025 09:49:23 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    16
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½œä¸ºä¸€åæ­£åœ¨è¯•ç”¨ AI è¿›è¡Œå¼€å‘çš„ç¨‹åºå‘˜ï¼Œæˆ‘æœ€è¿‘å°è¯•è®© AI è¾…åŠ©æˆ‘å®Œæˆ<strong>å‰ç«¯é¡µé¢ã€åç«¯æœåŠ¡å’Œç³»ç»Ÿé€»è¾‘çš„å¼€å‘</strong>ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œæˆ‘æ·±åˆ»ä½“ä¼šåˆ° AI çš„å¼ºå¤§ï¼Œä¹Ÿæ„Ÿå—åˆ°äº†å®ƒçš„å±€é™ã€‚æœ¬æ–‡ä»æˆ‘çš„å®è·µå‡ºå‘ï¼Œç»“åˆä¿¡æ¯å®‰å…¨ã€ç³»ç»Ÿæ¶æ„ã€åæœŸç»´æŠ¤æ€§ä»¥åŠå‰åç«¯å¼€å‘åœºæ™¯ï¼Œå¯¹ AI æ›¿ä»£ç¨‹åºå‘˜çš„å¯èƒ½æ€§è¿›è¡Œå…¨é¢åˆ†æã€‚</p>
<hr/>
<p>æ–‡ç« åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fzhiliaole.top%2Farchives%2F1766999092078" target="_blank" title="https://zhiliaole.top/archives/1766999092078" ref="nofollow noopener noreferrer">zhiliaole.top/archives/17â€¦</a></p>
<p>æ›´å¤šæ–‡ç« ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fzhiliaole.top" target="_blank" title="https://zhiliaole.top" ref="nofollow noopener noreferrer">zhiliaole.top</a></p>
<h2 data-id="heading-0">ä¸€ã€AI å¸¦æ¥çš„æ•ˆç‡æå‡</h2>
<p>åœ¨æ—¥å¸¸å¼€å‘ä¸­ï¼Œæˆ‘å‘ç° AI å¯¹ä¸€äº›é‡å¤æ€§å’Œæœºæ¢°æ€§ä»»åŠ¡éå¸¸é«˜æ•ˆï¼š</p>
<ul>
<li><strong>å‰ç«¯é¡µé¢æ¨¡æ¿</strong>ï¼šReact/Vue ç»„ä»¶å¿«é€Ÿç”Ÿæˆ</li>
<li><strong>è¡¨å•æ ¡éªŒé€»è¾‘</strong>ï¼šå¸¸è§„éªŒè¯è§„åˆ™å¯ä»¥ç›´æ¥ç”Ÿæˆ</li>
<li><strong>ç®€å• CRUD æ¥å£</strong>ï¼šåç«¯ Controller/Service ä»£ç å¿«é€Ÿè½åœ°</li>
<li><strong>å•å…ƒæµ‹è¯•å’Œæ–‡æ¡£</strong>ï¼šAI å¯ä»¥ç”ŸæˆåŸºç¡€æµ‹è¯•å’Œæ–‡æ¡£æ¨¡æ¿</li>
</ul>
<p><strong>ç¤ºä¾‹ï¼šå‰ç«¯è¡¨å•ç»„ä»¶</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">LoginForm</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [username, setUsername] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">''</span>);
  <span class="hljs-keyword">const</span> [password, setPassword] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">''</span>);

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleSubmit</span> = (<span class="hljs-params">e</span>) =&gt; {
    e.<span class="hljs-title function_">preventDefault</span>();
    <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'/api/login'</span>, {
      <span class="hljs-attr">method</span>: <span class="hljs-string">'POST'</span>,
      <span class="hljs-attr">body</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({ username, password })
    });
  };

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">onSubmit</span>=<span class="hljs-string">{handleSubmit}</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{username}</span> <span class="hljs-attr">onChange</span>=<span class="hljs-string">{e</span> =&gt;</span> setUsername(e.target.value)} /&gt;
      <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"password"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{password}</span> <span class="hljs-attr">onChange</span>=<span class="hljs-string">{e</span> =&gt;</span> setPassword(e.target.value)} /&gt;
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"submit"</span>&gt;</span>ç™»å½•<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span></span>
  );
}
</code></pre>
<p>AI å¯ä»¥åœ¨å‡ ç§’é’Ÿå†…ç”Ÿæˆå¯è¿è¡Œçš„ç»„ä»¶ï¼Œå¤§å¹…èŠ‚çœå¼€å‘æ—¶é—´ã€‚</p>
<hr/>
<h2 data-id="heading-1">äºŒã€ä¿¡æ¯å®‰å…¨æ€§ï¼šå‰åç«¯ä¸åŒåœºæ™¯çš„éšå¿§</h2>
<p>åœ¨å®è·µä¸­ï¼Œæˆ‘å‘ç° AI å¸¦æ¥çš„æ•ˆç‡èƒŒåï¼Œä¹Ÿéšè—ç€ä¿¡æ¯å®‰å…¨é£é™©ï¼š</p>
<h3 data-id="heading-2">1. å‰ç«¯é¡µé¢å¼€å‘é£é™©</h3>
<ul>
<li><strong>æ•æ„Ÿæ•°æ®æ³„éœ²</strong>ï¼šç”¨æˆ·è¡¨å•ä¿¡æ¯ï¼ˆèº«ä»½è¯ã€æ”¯ä»˜ä¿¡æ¯ï¼‰è¢«ç›´æ¥è¾“å…¥ AI æç¤ºï¼Œå¯èƒ½ä¸Šä¼ äº‘ç«¯</li>
<li><strong>API Key/Token æ³„éœ²</strong>ï¼šAI ç”Ÿæˆçš„ç¤ºä¾‹ä»£ç å¯èƒ½ç›´æ¥åŒ…å«å‡­è¯</li>
</ul>
<p><strong>ç¤ºä¾‹é£é™©ä»£ç ï¼š</strong></p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">fetch</span>(<span class="hljs-string">'https://api.payment.com/charge?token=AI_GENERATED_KEY'</span>, {...});
</code></pre>
<ul>
<li>å¦‚æœç›´æ¥ä½¿ç”¨ AI æç¤ºç”Ÿæˆä»£ç ï¼Œå¯èƒ½å¯¼è‡´æ•æ„Ÿä¿¡æ¯æ³„éœ²ã€‚</li>
</ul>
<h3 data-id="heading-3">2. åç«¯æœåŠ¡é£é™©</h3>
<ul>
<li><strong>æ ¸å¿ƒä¸šåŠ¡é€»è¾‘å¤–æ³„</strong>ï¼šé£æ§è§„åˆ™ã€æ”¯ä»˜ç­–ç•¥è¢« AI å¤„ç†æˆ–å­˜å‚¨</li>
<li><strong>ä¾èµ–æ¼æ´å¼•å…¥</strong>ï¼šAI å¯èƒ½ç›´æ¥ä½¿ç”¨ç¤ºä¾‹åº“æˆ–è¿‡æ—¶ä¾èµ–</li>
</ul>
<p><strong>ç¤ºæ„æµç¨‹å›¾ï¼š</strong></p>
<pre><code class="hljs language-css" lang="css">flowchart LR
FE<span class="hljs-selector-attr">[å‰ç«¯é¡µé¢]</span> --&gt; BE<span class="hljs-selector-attr">[åç«¯æœåŠ¡]</span>
BE --&gt; DB<span class="hljs-selector-attr">[(æ•°æ®åº“)]</span>
FE --&gt; AI<span class="hljs-selector-attr">[AIç”Ÿæˆå‰åç«¯ä»£ç ]</span>
AI --&gt; Cloud<span class="hljs-selector-attr">[äº‘ç«¯æ—¥å¿—å­˜å‚¨]</span>
Cloud --&gt; Leak<span class="hljs-selector-attr">[æ½œåœ¨ä¿¡æ¯æ³„éœ²é£é™©]</span>
</code></pre>
<hr/>
<h2 data-id="heading-4">ä¸‰ã€ç³»ç»Ÿæ¶æ„é£é™©</h2>
<p>åœ¨è¯•ç”¨ AI å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæˆ‘æ³¨æ„åˆ° AI ç”Ÿæˆçš„ä»£ç å¤šå…³æ³¨å±€éƒ¨åŠŸèƒ½ï¼Œç¼ºä¹ç³»ç»Ÿçº§æ€è€ƒï¼š</p>
<h3 data-id="heading-5">1. å‰ç«¯é¡µé¢é£é™©</h3>
<ul>
<li><strong>ç»„ä»¶è€¦åˆä¸¥é‡</strong>ï¼šå¤šä¸ªé€»è¾‘æ··åœ¨ä¸€ä¸ªç»„ä»¶</li>
<li><strong>çŠ¶æ€ç®¡ç†æ··ä¹±</strong>ï¼šè·¨ç»„ä»¶å…±äº«çŠ¶æ€å¤„ç†ä¸åˆç†</li>
<li><strong>æ ·å¼é£æ ¼ä¸ç»Ÿä¸€</strong>ï¼šå½±å“ç”¨æˆ·ä½“éªŒ</li>
</ul>
<p><strong>ç¤ºä¾‹ï¼šDashboard é¡µé¢</strong></p>
<pre><code class="hljs language-scss" lang="scss">function <span class="hljs-built_in">Dashboard</span>() {
  const <span class="hljs-selector-attr">[user, setUser]</span> = <span class="hljs-built_in">useState</span>(null);
  <span class="hljs-built_in">fetch</span>('/api/user')<span class="hljs-selector-class">.then</span>(res =&gt; res.json())<span class="hljs-selector-class">.then</span>(data =&gt; setUser(data));

  <span class="hljs-built_in">renderChart</span>(user.stats); <span class="hljs-comment">// AIç›´æ¥åµŒå…¥å›¾è¡¨é€»è¾‘</span>

  return &lt;<span class="hljs-selector-tag">div</span>&gt;{user<span class="hljs-selector-class">.name</span>}&lt;/<span class="hljs-selector-tag">div</span>&gt;;
}
</code></pre>
<ul>
<li>æ•°æ®è¯·æ±‚å’Œå›¾è¡¨æ¸²æŸ“æ··åœ¨åŒä¸€ç»„ä»¶ï¼Œè¿èƒŒå•ä¸€èŒè´£åŸåˆ™ã€‚</li>
</ul>
<h3 data-id="heading-6">2. åç«¯æœåŠ¡é£é™©</h3>
<ul>
<li><strong>Controller å±‚ç›´æ¥åŒ…å«ä¸šåŠ¡é€»è¾‘</strong></li>
<li><strong>è·¨æ¨¡å—è°ƒç”¨</strong>ï¼šAI å¯èƒ½ç ´åå¾®æœåŠ¡è¾¹ç•Œ</li>
<li><strong>ç¼ºå°‘äº‹åŠ¡å’Œå¼‚å¸¸æ§åˆ¶</strong></li>
</ul>
<pre><code class="hljs language-less" lang="less"><span class="hljs-variable">@PostMapping</span>(<span class="hljs-string">"/create"</span>)
public OrderResponse <span class="hljs-built_in">create</span>(<span class="hljs-variable">@RequestBody</span> OrderReq req) {
    <span class="hljs-selector-tag">orderService</span><span class="hljs-selector-class">.createAndNotify</span>(req); <span class="hljs-comment">// AIç”Ÿæˆ</span>
    <span class="hljs-selector-tag">paymentService</span><span class="hljs-selector-class">.processPayment</span>(req); <span class="hljs-comment">// AIç”Ÿæˆ</span>
    <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">new</span> <span class="hljs-selector-tag">OrderResponse</span>();
}
</code></pre>
<ul>
<li>Controller åŒæ—¶å¤„ç†è®¢å•å’Œæ”¯ä»˜ï¼Œæ¶æ„è…åŒ–é£é™©æ˜æ˜¾ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-7">å››ã€åæœŸç»´æŠ¤æ€§</h2>
<p>AI ç”Ÿæˆä»£ç è™½ç„¶å¯è¿è¡Œï¼Œä½†<strong>é•¿æœŸç»´æŠ¤é—®é¢˜çªå‡º</strong>ï¼š</p>
<h3 data-id="heading-8">å‰ç«¯é¡µé¢</h3>
<ul>
<li>çŠ¶æ€ç®¡ç†è†¨èƒ€ï¼Œè·¨ç»„ä»¶çŠ¶æ€éš¾ç»´æŠ¤</li>
<li>æ ·å¼ä¸ç»„ä»¶é£æ ¼ä¸ç»Ÿä¸€</li>
<li>ä¾èµ–åº“å‡çº§å¯èƒ½å¼•å‘å…¼å®¹é—®é¢˜</li>
</ul>
<h3 data-id="heading-9">åç«¯æœåŠ¡</h3>
<ul>
<li>åˆ†æ”¯é€»è¾‘è†¨èƒ€ï¼Œæ–°å¢ä¸šåŠ¡ç±»å‹ä¿®æ”¹æˆæœ¬é«˜</li>
<li>ç¼ºå°‘è®¾è®¡æ„å›¾å’Œä¸Šä¸‹æ–‡</li>
<li>æŠ€æœ¯å€ºç´¯ç§¯ï¼Œé•¿æœŸé‡æ„æˆæœ¬é«˜</li>
</ul>
<p><strong>ç»´æŠ¤æµç¨‹ç¤ºæ„å›¾</strong>ï¼š</p>
<pre><code class="hljs language-css" lang="css">flowchart <span class="hljs-selector-tag">TD</span>
AI<span class="hljs-selector-attr">[ç”Ÿæˆä»£ç ]</span> --&gt; Review<span class="hljs-selector-attr">[äººå·¥å®¡æŸ¥]</span>
Review --&gt; Repo<span class="hljs-selector-attr">[æäº¤ä»“åº“]</span>
Repo --&gt; CI<span class="hljs-selector-attr">[è‡ªåŠ¨åŒ–æµ‹è¯•]</span>
CI --&gt; Deploy<span class="hljs-selector-attr">[ä¸Šçº¿]</span>
Deploy --&gt; Maintenance<span class="hljs-selector-attr">[åæœŸç»´æŠ¤]</span>
Maintenance --&gt; Complexity<span class="hljs-selector-attr">[ç†è§£æˆæœ¬å¢åŠ ]</span>
</code></pre>
<hr/>
<h2 data-id="heading-10">äº”ã€å‰ç«¯é¡µé¢å¼€å‘å¯æ›¿ä»£æ€§åˆ†æ</h2>
<p>åœ¨æˆ‘çš„å®è·µä¸­ï¼ŒAI å¯¹å‰ç«¯é¡µé¢å¼€å‘çš„æ›¿ä»£æ€§è¡¨ç°å¦‚ä¸‹ï¼š</p>



































<table><thead><tr><th>å‰ç«¯ä»»åŠ¡</th><th>AI å¯æ›¿ä»£æ€§</th><th>é£é™©/é™åˆ¶</th></tr></thead><tbody><tr><td>é¡µé¢æ¨¡æ¿ç”Ÿæˆ</td><td>é«˜</td><td>éœ€äººå·¥å®¡æŸ¥å¸ƒå±€æ˜¯å¦ç¬¦åˆè®¾è®¡è§„èŒƒ</td></tr><tr><td>ç»„ä»¶åŸºç¡€é€»è¾‘</td><td>ä¸­</td><td>å¤æ‚äº¤äº’å’ŒçŠ¶æ€ç®¡ç†å¯èƒ½å‡ºé”™</td></tr><tr><td>çŠ¶æ€ç®¡ç†</td><td>ä½</td><td>è·¨ç»„ä»¶çŠ¶æ€éš¾ä»¥ç»´æŠ¤</td></tr><tr><td>æ ·å¼ä¸ UX</td><td>ä½</td><td>é£æ ¼ä¸ä¸€è‡´ï¼Œç”¨æˆ·ä½“éªŒä¸ä¿è¯</td></tr><tr><td>API è°ƒç”¨ä¸å®‰å…¨</td><td>ä¸­</td><td>éœ€äººå·¥æ£€æŸ¥æ•æ„Ÿä¿¡æ¯</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-11">å…­ã€åç«¯æœåŠ¡å¼€å‘å¯æ›¿ä»£æ€§åˆ†æ</h2>






























<table><thead><tr><th>åç«¯ä»»åŠ¡</th><th>AI å¯æ›¿ä»£æ€§</th><th>é£é™©/é™åˆ¶</th></tr></thead><tbody><tr><td>ç®€å• CRUD</td><td>é«˜</td><td>éœ€äººå·¥å®¡æŸ¥ SQL å®‰å…¨æ€§</td></tr><tr><td>æ ¸å¿ƒä¸šåŠ¡é€»è¾‘</td><td>ä½</td><td>AI æ— æ³•ç†è§£ä¸šåŠ¡ç­–ç•¥</td></tr><tr><td>å¾®æœåŠ¡æ¶æ„</td><td>ä½</td><td>å¯èƒ½ç ´åæ¨¡å—è¾¹ç•Œ</td></tr><tr><td>å¼‚å¸¸/äº‹åŠ¡å¤„ç†</td><td>ä½</td><td>ç»´æŠ¤æˆæœ¬é«˜</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-12">ä¸ƒã€çœŸå®æ¡ˆä¾‹</h2>
<h3 data-id="heading-13">å‰ç«¯æ¡ˆä¾‹</h3>
<ul>
<li>æˆ‘ä½¿ç”¨ AI ç”Ÿæˆä¸€ä¸ªç”µå•† Dashboard é¡µé¢</li>
<li>åˆæœŸè¿è¡Œæ­£å¸¸</li>
<li>éšç€ä¸šåŠ¡å¤æ‚åº¦å¢åŠ ï¼Œç»„ä»¶è€¦åˆä¸¥é‡ï¼ŒçŠ¶æ€ç®¡ç†æ··ä¹±</li>
<li>ç»´æŠ¤æˆæœ¬å¿«é€Ÿä¸Šå‡</li>
</ul>
<h3 data-id="heading-14">åç«¯æ¡ˆä¾‹</h3>
<ul>
<li>æˆ‘ç”¨ AI ç”Ÿæˆæ”¯ä»˜æ¨¡å—å’Œè®¢å•å¤„ç†é€»è¾‘</li>
<li>åˆæœŸåŠŸèƒ½å®Œæ•´ï¼Œä½†ç¼ºä¹äº‹åŠ¡æ§åˆ¶å’Œå¼‚å¸¸å¤„ç†</li>
<li>ç³»ç»Ÿæ¶æ„å—æŸï¼Œçº¿ä¸Šé—®é¢˜éš¾ä»¥è¿½è´£</li>
</ul>
<hr/>
<h2 data-id="heading-15">å…«ã€å›¢é˜Ÿä¸èŒä¸šèƒ½åŠ›å½±å“</h2>
<p>åœ¨è¯•ç”¨ AI å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæˆ‘å‘ç°ï¼š</p>
<ul>
<li>æˆ‘çš„è§’è‰²ä»â€œä»£ç å®ç°è€…â€è½¬å‘â€œAI åä½œè€…ã€è®¾è®¡è€…ã€ä¸šåŠ¡ç†è§£è€…â€</li>
<li>æŠ€èƒ½éœ€æ±‚ä»ç¼–ç èƒ½åŠ›è½¬å‘ç³»ç»Ÿæ¶æ„èƒ½åŠ›ã€ä¸šåŠ¡ç†è§£å’ŒæŠ€æœ¯å†³ç­–</li>
<li>AI æ— æ³•æ›¿ä»£å›¢é˜Ÿæ²Ÿé€šã€éœ€æ±‚ç†è§£å’Œè·¨éƒ¨é—¨åä½œ</li>
</ul>
<p><strong>äººæœºåä½œç¤ºæ„å›¾</strong>ï¼š</p>
<pre><code class="hljs language-css" lang="css">flowchart LR
Dev<span class="hljs-selector-attr">[æˆ‘/ç¨‹åºå‘˜]</span> --&gt; Prompt<span class="hljs-selector-attr">[AIæç¤ºè¾“å…¥]</span>
Prompt --&gt; AI<span class="hljs-selector-attr">[ç”Ÿæˆå‰åç«¯ä»£ç /é¡µé¢]</span>
AI --&gt; Review<span class="hljs-selector-attr">[äººå·¥å®¡æŸ¥]</span>
Review --&gt; Repo<span class="hljs-selector-attr">[æäº¤ä»“åº“]</span>
Repo --&gt; CI<span class="hljs-selector-attr">[è‡ªåŠ¨åŒ–æµ‹è¯•]</span>
CI --&gt; Deploy<span class="hljs-selector-attr">[ä¸Šçº¿]</span>
</code></pre>
<hr/>
<h2 data-id="heading-16">ä¹ã€ç»¼åˆåˆ†æ</h2>















































<table><thead><tr><th>ç»´åº¦</th><th>å‰ç«¯é¡µé¢</th><th>åç«¯æœåŠ¡</th><th>æ›¿ä»£å¯èƒ½æ€§</th><th>é£é™©ä¸é™åˆ¶</th></tr></thead><tbody><tr><td>ä¿¡æ¯å®‰å…¨æ€§</td><td>ç”¨æˆ·éšç§ã€API Key</td><td>æ•°æ®åº“ã€ä¸šåŠ¡è§„åˆ™</td><td>ä½</td><td>æ•æ„Ÿä¿¡æ¯æ³„éœ²</td></tr><tr><td>ç³»ç»Ÿæ¶æ„</td><td>ç»„ä»¶è€¦åˆã€çŠ¶æ€ç®¡ç†</td><td>å¾®æœåŠ¡è¾¹ç•Œã€äº‹åŠ¡</td><td>æä½</td><td>æ¶æ„è…åŒ–ã€éš¾æ‰©å±•</td></tr><tr><td>åæœŸç»´æŠ¤æ€§</td><td>æ ·å¼ã€çŠ¶æ€ã€ä¾èµ–</td><td>åˆ†æ”¯é€»è¾‘ã€ä¸Šä¸‹æ–‡</td><td>ä½</td><td>æŠ€æœ¯å€ºç´¯ç§¯</td></tr><tr><td>ä¸šåŠ¡ç†è§£</td><td>ç”¨æˆ·ä½“éªŒã€äº¤äº’</td><td>æ ¸å¿ƒä¸šåŠ¡ã€æ”¯ä»˜ã€é£æ§</td><td>æä½</td><td>æ— æ³•æ›¿ä»£äººç±»å†³ç­–</td></tr><tr><td>å›¢é˜Ÿåä½œ</td><td>éœ€æ±‚æ²Ÿé€šã€UI/UXè¯„å®¡</td><td>æŠ€æœ¯å†³ç­–ã€è·¨éƒ¨é—¨</td><td>æä½</td><td>AIæ— æ³•æ›¿ä»£</td></tr></tbody></table>
<blockquote>
<p>æˆ‘çš„å®è·µç»“è®ºï¼šAI å¯ä»¥æ›¿ä»£éƒ¨åˆ†é‡å¤æ€§ä»»åŠ¡ï¼Œä½†<strong>æ— æ³•å®Œå…¨æ›¿ä»£ç¨‹åºå‘˜</strong>ï¼Œå°¤å…¶åœ¨å¤æ‚å‰ç«¯é¡µé¢å’Œåç«¯æœåŠ¡ä¸­ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-17">åã€æœ€ä½³å®è·µï¼ˆä»æˆ‘è¯•ç”¨ç»éªŒå‡ºå‘ï¼‰</h2>
<ol>
<li><strong>æ˜ç¡® AI è¾¹ç•Œ</strong>ï¼šé‡å¤ä»»åŠ¡ç”± AI å®Œæˆï¼Œæ ¸å¿ƒé€»è¾‘ç”±äººè´Ÿè´£</li>
<li><strong>å®‰å…¨ä¼˜å…ˆ</strong>ï¼šæ•æ„Ÿä¿¡æ¯å’Œä¸šåŠ¡è§„åˆ™ä½¿ç”¨ä¼ä¸šç§æœ‰æ¨¡å‹</li>
<li><strong>ä¸¥æ ¼å®¡æŸ¥</strong>ï¼šAI è¾“å‡ºä»£ç å¿…é¡»äººå·¥å®¡æŸ¥</li>
<li><strong>æ–‡æ¡£ä¸è®¾è®¡è®°å½•</strong>ï¼šä¿ç•™å†³ç­–è®°å½•ï¼Œé™ä½ç»´æŠ¤æˆæœ¬</li>
<li><strong>æŠ€èƒ½æå‡</strong>ï¼šç¨‹åºå‘˜åº”ä¸“æ³¨æ¶æ„è®¾è®¡ã€ä¸šåŠ¡ç†è§£ã€æŠ€æœ¯å†³ç­–å’Œå›¢é˜Ÿåä½œ</li>
</ol>
<hr/>
<h2 data-id="heading-18">åä¸€ã€ç»“è¯­</h2>
<p>é€šè¿‡è¯•ç”¨ AI å¼€å‘ï¼Œæˆ‘åˆ‡èº«ä½“ä¼šåˆ°ï¼š</p>
<ul>
<li>AI æé«˜äº†å¼€å‘æ•ˆç‡ï¼Œä½†æ— æ³•æ›¿ä»£æ ¸å¿ƒèƒ½åŠ›</li>
<li>AI å¯ä»¥ç”Ÿæˆå‰ç«¯é¡µé¢å’Œåç«¯æœåŠ¡ï¼Œä½†é•¿æœŸæ¶æ„å’Œç»´æŠ¤ä»éœ€ç¨‹åºå‘˜</li>
<li>æœªæ¥ï¼Œç¨‹åºå‘˜çš„æ ¸å¿ƒè§’è‰²å°†è½¬å‘â€œç³»ç»Ÿè®¾è®¡è€…ã€ä¸šåŠ¡ç†è§£è€…ã€AI åä½œä¸“å®¶â€</li>
</ul>
<blockquote>
<p>AI æ˜¯åŠ©åŠ›ï¼Œè€Œä¸æ˜¯æ›¿ä»£ï¼Œå®ƒé‡å¡‘äº†æˆ‘çš„å¼€å‘æ–¹å¼ï¼Œä¹Ÿè®©æˆ‘å¯¹ç¨‹åºå‘˜çš„æ ¸å¿ƒä»·å€¼æœ‰äº†æ›´æ¸…æ™°çš„è®¤è¯†ã€‚</p>
</blockquote>
<p>æ–‡ç« åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fzhiliaole.top%2Farchives%2F1766999092078" target="_blank" title="https://zhiliaole.top/archives/1766999092078" ref="nofollow noopener noreferrer">zhiliaole.top/archives/17â€¦</a></p>
<p>æ›´å¤šæ–‡ç« ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fzhiliaole.top" target="_blank" title="https://zhiliaole.top" ref="nofollow noopener noreferrer">zhiliaole.top</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Springbootæ•´åˆkafka(MQ)]]></title>    <link>https://juejin.cn/post/7588411503120793636</link>    <guid>https://juejin.cn/post/7588411503120793636</guid>    <pubDate>2025-12-28T13:46:39.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588411503120793636" data-draft-id="7588411503120777252" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Springbootæ•´åˆkafka(MQ)"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-28T13:46:39.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ihgry"/> <meta itemprop="url" content="https://juejin.cn/user/3210229685954718"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Springbootæ•´åˆkafka(MQ)
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3210229685954718/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ihgry
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-28T13:46:39.000Z" title="Sun Dec 28 2025 13:46:39 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    8
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h4 data-id="heading-0">æ¦‚å¿µ</h4>
<ul>
<li>
<p>ä¸€ä¸ªtopicä¸»é¢˜ä¸‹é¢æœ‰å¤šä¸ªåˆ†åŒºï¼ˆæ¯”å¦‚partition1ã€partition2ã€partition3ï¼‰ï¼Œæ¯ä¸ªåˆ†åŒºæœ‰å¤šä¸ªå‰¯æœ¬ï¼›ä»æ‰€æœ‰çš„å‰¯æœ¬ä¸­é€‰å–ä¸€ä¸ªä½œä¸ºLeaderï¼Œå…¶ä»–ä½œä¸ºFollowerï¼ŒLeaderå‰¯æœ¬ è´Ÿè´£æ¶ˆæ¯çš„æ¥æ”¶å’Œæ¶ˆæ¯çš„æ¶ˆè´¹ï¼ŒFolloweråªè´Ÿè´£æ•°æ®çš„åŒæ­¥ï¼›å½“Leaderåˆ†åŒºæ•…éšœåï¼Œä»Followerä¸­é€‰å–ä¸€ä¸ªä½œä¸ºæ–°çš„Leader</p>
</li>
<li>
<p>ä¸€ä¸ªåˆ†åŒºpartitionåªèƒ½è¢«æ¶ˆè´¹è€…ç»„ä¸­çš„ä¸€ä¸ªæ¶ˆè´¹è€…å®ä¾‹æ¶ˆè´¹ï¼Œå½“topicä¸­åˆ†åŒºæ•°é‡å‘ç”Ÿå˜åŒ– æˆ–è€… æ¶ˆè´¹è€…ç»„ä¸­çš„æ¶ˆè´¹è€…å‘ç”Ÿå˜åŒ– ä¼šè§¦å‘rebalanceï¼Œé‡æ–°åˆ†é…åˆ†åŒºpartitionå’Œæ¶ˆè´¹è€…å®ä¾‹ ä¹‹é—´çš„å…³ç³»</p>
</li>
<li>
<p>ç”Ÿäº§è€…å‘é€çš„æ¶ˆæ¯åªåœ¨ä¸€ä¸ªpartitionåˆ†åŒºå†…æœ‰åºï¼Œå¦‚æœtopicä¸‹é¢æœ‰å¤šä¸ªåˆ†åŒºï¼Œé‚£æ‰€æœ‰æ¶ˆæ¯æ•´ä½“æ˜¯æ— åºçš„</p>
</li>
<li>
<p>ä¸€ä¸ªtopicå¯ä»¥æœ‰å¤šä¸ªæ¶ˆè´¹è€…ç»„ï¼Œkafkaä¼šè®°å½•æ¯ä¸ªâ€œæ¶ˆè´¹è€…ç»„â€ æ¶ˆè´¹åˆ° â€œå“ªä¸ªåˆ†åŒºçš„å“ªä¸ªåç§»é‡offsetâ€äº†</p>
</li>
</ul>
<p align="center"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0682279ae6354bfc885ba4cef6a62202~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaWhncnk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767538899&amp;x-signature=yGQsogQMwY6Des3SmbIqi8LI%2Bh4%3D" alt="kafka.jpg" width="90%" loading="lazy"/></p>
<h4 data-id="heading-1">ä¸‹è½½</h4>
<ul>
<li>
<p>ä¸‹è½½åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fkafka.apache.org%2Fcommunity%2Fdownloads%2F%25EF%25BC%258C%25E8%25A7%25A3%25E5%258E%258B%25E5%258E%258B%25E7%25BC%25A9%25E5%258C%2585" target="_blank" title="https://kafka.apache.org/community/downloads/%EF%BC%8C%E8%A7%A3%E5%8E%8B%E5%8E%8B%E7%BC%A9%E5%8C%85" ref="nofollow noopener noreferrer">kafka.apache.org/community/dâ€¦</a></p>
</li>
<li>
<p>åœ¨<code>/root/kafka/kafka_2.12-3.6.2</code>ç›®å½•ä¸‹åˆ›å»ºæ–‡ä»¶å¤¹<code>mq_logs</code>ï¼Œå¹¶åœ¨<code>mq_logs</code>æ–‡ä»¶å¤¹ä¸‹åˆ†åˆ«åˆ›å»ºæ–‡ä»¶å¤¹<code>kafka_data_logs</code>å’Œ<code>zookeeper_data</code>åˆ†åˆ«ä¿å­˜kafkaçš„æ—¥å¿—æ•°æ®å’Œzookeeperçš„æ•°æ®</p>
</li>
<li>
<p>åœ¨<code>mq_logs</code>ç›®å½•ä¸‹åˆ›å»º<code>kafka_console.out</code>å’Œ<code>zookeeper_console.out</code>ä¿å­˜å¯åŠ¨ç¨‹åºæ—¶çš„æ—¥å¿—è¾“å‡º</p>
</li>
<li>
<p>è¿›å…¥configç›®å½•ä¿®æ”¹<code>zookeeper.properties</code>ï¼Œå°†dataDiræ”¹ä¸ºï¼š<code>dataDir=/root/kafka/kafka_2.12-3.6.2/mq_logs/zookeeper_data</code></p>
</li>
<li>
<p>è¿›å…¥configç›®å½•ä¿®æ”¹<code>server.properties</code></p>
<ul>
<li>
<p>å°†log.diræ”¹ä¸º<code>log.dirs=/root/kafka/kafka_2.12-3.6.2/mq_logs/kafka_data_logs</code></p>
</li>
<li>
<p>æ·»åŠ é…ç½®ï¼š<code>listeners=PLAINTEXT://0.0.0.0:9092</code>å’Œ<code> advertised.listeners=PLAINTEXT://localhost:9092</code></p>
</li>
</ul>
</li>
</ul>
<h4 data-id="heading-2">å¯åŠ¨</h4>
<ul>
<li>
<p>å…ˆå¯åŠ¨zookeeperï¼š<code>nohup bin/zookeeper-server-start.sh config/zookeeper.properties &gt; /root/kafka/kafka_2.12-3.6.2/mq_logs/zookeeper_console.out 2&gt;&amp;1 &amp;</code></p>
</li>
<li>
<p>å†å¯åŠ¨kafkaï¼š<code>nohup bin/kafka-server-start.sh config/server.properties &gt; /root/kafka/kafka_2.12-3.6.2/mq_logs/kafka_console.out  2&gt;&amp;1 &amp;</code></p>
</li>
</ul>
<h4 data-id="heading-3">å‘½ä»¤</h4>
<ul>
<li>
<p>åˆ›å»ºä¸»é¢˜ï¼š<code>./kafka-topics.sh --create --topic ä¸»é¢˜åç§° --bootstrap-server localhost:9092</code></p>
</li>
<li>
<p>æŸ¥çœ‹æ‰€æœ‰ä¸»é¢˜ï¼š<code>./kafka-topics.sh --list --bootstrap-server localhost:9092</code></p>
</li>
<li>
<p>æŸ¥çœ‹æŸä¸ªä¸»é¢˜ï¼š<code>./kafka-topics.sh --describe --topic ä¸»é¢˜åç§° --bootstrap-server localhost:9092</code></p>
</li>
<li>
<p>åˆ é™¤æŸä¸ªä¸»é¢˜ï¼š<code>./kafka-topics.sh --delete --topic ä¸»é¢˜åç§° --bootstrap-server localhost:9092</code></p>
</li>
<li>
<p>æŸ¥çœ‹æŸä¸ªç»„çš„æ¶ˆè´¹æƒ…å†µï¼š<code>./kafka-consumer-groups.sh --describe --group æ¶ˆè´¹è€…ç»„åç§° --bootstrap-server localhost:9092</code></p>
</li>
<li>
<p>æŸ¥çœ‹æŸä¸ªç»„ä¸‹é¢çš„æ¶ˆè´¹è€…ï¼š<code>./kafka-consumer-groups.sh --describe --group æ¶ˆè´¹ç»„åç§° --bootstrap-server localhost:9092 --members</code></p>
</li>
</ul>
<h4 data-id="heading-4">springbootæ•´åˆkafka</h4>
<ul>
<li>
<p>å¼•å…¥ä¾èµ–</p>
<pre><code class="hljs language-java" lang="java">&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.kafka&lt;/groupId&gt;
    &lt;artifactId&gt;spring-kafka&lt;/artifactId&gt;
&lt;/dependency&gt;
</code></pre>
</li>
<li>
<p>å¼•å…¥é…ç½®</p>
<pre><code class="hljs language-properties" lang="properties">spring.kafka.bootstrap-servers=115.190.156.159:9092
spring.kafka.producer.retries=3
spring.kafka.producer.batch-size=1000
spring.kafka.producer.buffer-memory=33554432

spring.kafka.consumer.group-id=crm-microservice-newperformance
spring.kafka.consumer.enable-auto-commit=false
spring.kafka.consumer.auto-offset-reset=earliest
spring.kafka.consumer.max-poll-records=200
spring.kafka.listener.ack-mode=MANUAL_IMMEDIATE
</code></pre>
</li>
<li>
<p>é…ç½®ç±»ï¼šå¦‚æœç¨‹åºå¼‚å¸¸ï¼Œspringé»˜è®¤å°†è¿™æ¡æ¶ˆæ¯é‡å¤å¤„ç†9æ¬¡ï¼›è¿™é‡Œé…ç½®çš„æ˜¯åŒä¸€æ¶ˆæ¯ å¤šæ¬¡æ¶ˆè´¹å¤±è´¥ çš„å¤„ç†ç­–ç•¥ï¼Œå³è½¬å‘åˆ°å¦ä¸€ä¸ªæ­»ä¿¡topicä¸­ï¼›æ³¨æ„ï¼Œè¿™é‡Œæ˜¯springboot2.7åŠä»¥ä¸Šç‰ˆæœ¬çš„é…ç½®æ–¹å¼ï¼Œå’Œ2.7ä»¥ä¸‹ç‰ˆæœ¬é…ç½®æ–¹æ³•ä¸åŒ</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">KafkaConfig</span> {
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> CommonErrorHandler <span class="hljs-title function_">errorHandler</span><span class="hljs-params">(KafkaTemplate&lt;Object, Object&gt; template)</span> {
        <span class="hljs-comment">// 1. å®šä¹‰æ­»ä¿¡æ¢å¤å™¨,å½“é‡è¯•è€—å°½åï¼Œå°†æ¶ˆæ¯è½¬å‘åˆ° "åŸTopic.DLT"</span>
        <span class="hljs-type">DeadLetterPublishingRecoverer</span> <span class="hljs-variable">recover</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DeadLetterPublishingRecoverer</span>(template);
        
        <span class="hljs-comment">// 2. å®šä¹‰é”™è¯¯å¤„ç†å™¨</span>
        <span class="hljs-type">DefaultErrorHandler</span> <span class="hljs-variable">errorHandler</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DefaultErrorHandler</span>(recover, <span class="hljs-keyword">new</span> <span class="hljs-title class_">FixedBackOff</span>(<span class="hljs-number">1000L</span>, <span class="hljs-number">3</span>));

        <span class="hljs-keyword">return</span> errorHandler;
    }
}
</code></pre>
</li>
<li>
<p>ç”Ÿäº§è€…</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@CrossOrigin</span>
<span class="hljs-meta">@RestController</span>
<span class="hljs-meta">@RequestMapping("/kafka")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">KafkaController</span> {
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> KafkaTemplate&lt;String, String&gt; kafkaTemplate;

    <span class="hljs-meta">@RequestMapping("/send")</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">send</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> InterruptedException, ExecutionException {
        Map&lt;String, Object&gt; map = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedHashMap</span>&lt;&gt;();
        map.put(<span class="hljs-string">"userid"</span>, <span class="hljs-number">1001</span>);
        map.put(<span class="hljs-string">"name"</span>, <span class="hljs-string">"ccb"</span>+ UUID.randomUUID());

        ListenableFuture&lt;SendResult&lt;String, String&gt;&gt; result = kafkaTemplate.send(<span class="hljs-string">"test_ccb"</span>, JSONObject.toJSONString(map));
        System.out.println(<span class="hljs-string">"å‘é€ç»“æœï¼š"</span>+result.get());
        <span class="hljs-keyword">return</span> <span class="hljs-string">"ok"</span>;
    }
}
</code></pre>
</li>
<li>
<p>æ¶ˆè´¹è€…</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">KafkaConsumer</span> {

    <span class="hljs-comment">// è¿™é‡Œçš„concurrency=5ä»£è¡¨ä¼šåˆ›å»º5ä¸ªæ¶ˆè´¹è€…å®ä¾‹</span>
    <span class="hljs-meta">@KafkaListener(topics = {"test_ccb"},concurrency = "5")</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">consumer</span><span class="hljs-params">(ConsumerRecord&lt;?, ?&gt; consumerRecord, Acknowledgment ack)</span> {
        System.out.println(<span class="hljs-string">"æ”¶åˆ°æ¶ˆæ¯ï¼š"</span> + consumerRecord);
        ack.acknowledge();
    }
}
</code></pre>
</li>
</ul>
<h4 data-id="heading-5">Spring-KafkaåŸç†</h4>
<ul>
<li><code>spring-kafka</code>çš„è‡ªåŠ¨é…ç½®ç±»ä¸­ï¼Œé€šè¿‡<code>KafkaListenerAnnotationBeanPostProcessor </code>æ‰«ææ¯ä¸ªBeanå¯¹è±¡æ˜¯å¦å¸¦æœ‰<code>@KafkaListener</code>æ³¨è§£ï¼Œå¦‚æœæœ‰åˆ™æå–æ³¨è§£ä¸Šçš„<code>topics</code>ã€<code>groupId</code>ã€<code>concurrency</code>ç­‰ä¿¡æ¯å°è£…æˆä¸€ä¸ªEndpointå¯¹è±¡ï¼Œæ ¹æ®EndpointæŒ‡å®šçš„å®¹å™¨å·¥å‚containerFactoryåˆ›å»ºå®¹å™¨ï¼Œåœ¨å®¹å™¨å†…è¿è¡Œ<code>KafkaConsumer</code></li>
<li>å®¹å™¨å·¥å‚æ˜¯<code>ConcurrentKafkaListenerContainerFactory</code>ï¼Œå®ƒç”Ÿäº§å®¹å™¨<code>KafkaMessageListenerContainer</code>ï¼Œåœ¨å®¹å™¨å†…è¿è¡Œ<code>KafkaConsumer</code>ï¼Œå¦‚æœ<code>concurrency</code>è®¾ç½®ä¸º3ï¼Œå°†åˆ›å»º3ä¸ªå®¹å™¨ï¼Œä¹Ÿå°±æ˜¯ä¼šæœ‰3ä¸ªæ¶ˆè´¹è€…å®ä¾‹</li>
<li>å¦‚æœç¨‹åºå¤„ç†è¿‡ç¨‹ä¸­å‡ºç°äº†é”™è¯¯ï¼Œä¼šè°ƒç”¨é…ç½®å¥½çš„ <code>CommonErrorHandler</code>è¿›è¡Œå¤„ç†ï¼Œé»˜è®¤ä¼šé‡è¯•9æ¬¡ï¼Œå¦‚æœè¿˜æ˜¯å¤±è´¥ï¼Œåˆ™æäº¤è¯¥åç§»é‡é¿å…é˜»å¡åç»­æ¶ˆæ¯</li>
<li>gemini3å‰–æè¿‡ç¨‹ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgemini.google.com%2Fshare%2F4de8006d21e2" target="_blank" title="https://gemini.google.com/share/4de8006d21e2" ref="nofollow noopener noreferrer">gemini.google.com/share/4de80â€¦</a></li>
</ul>
<h4 data-id="heading-6">ç›¸å…³æ–‡ç« </h4>
<ul>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fcloud.tencent.com%2Fdeveloper%2Farticle%2F2185118" target="_blank" title="https://cloud.tencent.com/developer/article/2185118" ref="nofollow noopener noreferrer">3åˆ†é’Ÿå¸¦ä½ å½»åº•ææ‡‚ Kafka-è…¾è®¯äº‘å¼€å‘è€…ç¤¾åŒº-è…¾è®¯äº‘</a></p>
</li>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fcloud.tencent.com%2Fdeveloper%2Farticle%2F2185123" target="_blank" title="https://cloud.tencent.com/developer/article/2185123" ref="nofollow noopener noreferrer">ã€çœŸå®ç”Ÿäº§æ¡ˆä¾‹ã€‘SpringBoot æ•´åˆ Kafka å®ç°æ•°æ®é«˜åå-è…¾è®¯äº‘å¼€å‘è€…ç¤¾åŒº-è…¾è®¯äº‘</a></p>
</li>
<li>
<p>spring-kafkaåˆ†æï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgemini.google.com%2Fshare%2F4de8006d21e2" target="_blank" title="https://gemini.google.com/share/4de8006d21e2" ref="nofollow noopener noreferrer">gemini.google.com/share/4de80â€¦</a></p>
</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Uni-app æ€§èƒ½å¤©å‘ï¼šä¸ºä»€ä¹ˆ v-if åˆ ä¸æ‰ DOM èŠ‚ç‚¹]]></title>    <link>https://juejin.cn/post/7589074117644288035</link>    <guid>https://juejin.cn/post/7589074117644288035</guid>    <pubDate>2025-12-29T09:22:27.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589074117644288035" data-draft-id="7589063105731723279" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Uni-app æ€§èƒ½å¤©å‘ï¼šä¸ºä»€ä¹ˆ v-if åˆ ä¸æ‰ DOM èŠ‚ç‚¹"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-29T09:22:27.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="heyCHEEMS"/> <meta itemprop="url" content="https://juejin.cn/user/4308367489378780"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Uni-app æ€§èƒ½å¤©å‘ï¼šä¸ºä»€ä¹ˆ v-if åˆ ä¸æ‰ DOM èŠ‚ç‚¹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4308367489378780/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    heyCHEEMS
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T09:22:27.000Z" title="Mon Dec 29 2025 09:22:27 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    8
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨å¼€å‘è‡ªå®šä¹‰ Swiper æˆ–é•¿åˆ—è¡¨ç»„ä»¶æ—¶ï¼Œä¸ºäº†ä¼˜åŒ–æ€§èƒ½ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šç»™æ¯ä¸€é¡¹åŠ ä¸Šæ‡’åŠ è½½é€»è¾‘ï¼š</p>
<pre><code class="hljs language-HTML" lang="HTML"><span class="hljs-tag">&lt;<span class="hljs-name">view</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"item"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">"shouldRender"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">slot</span> <span class="hljs-attr">:name</span>=<span class="hljs-string">"'slot-' + index"</span> /&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span>
</code></pre>
<p><strong>ç¥å¥‡çš„äº‹æƒ…å‘ç”Ÿäº†ï¼š</strong> å“ªæ€• <code>shouldRender</code> æ˜¯ <code>false</code>ï¼Œæ‰“å¼€å°ç¨‹åºè°ƒè¯•å™¨ä¸€çœ‹ï¼ŒWXML æ ‘é‡Œä¾ç„¶æ’æ»¡äº† <code>view slot="slot-0"</code>ã€<code>view slot="slot-1"</code>... é‡Œé¢ç”šè‡³è¿˜å¡æ»¡äº†å›¾ç‰‡èŠ‚ç‚¹ã€‚</p>
<p><strong>ç»“è®ºï¼šä½ çš„ v-if åªæ˜¯â€œéšè—â€äº†è§†è§‰ï¼Œå†…å­˜å’Œ DOM å‹åŠ›ä¸€ç‚¹æ²¡å‡ã€‚</strong></p>
<hr/>
<h3 data-id="heading-0">äºŒã€ å…·åæ’æ§½æ˜¯â€œç‰©ç†å‘ä½â€</h3>
<p>ä¸ºä»€ä¹ˆ <code>v-if</code> å¤±æ•ˆäº†ï¼Ÿå› ä¸ºåœ¨å¾®ä¿¡å°ç¨‹åºåº•å±‚ï¼Œ<strong>å…·åæ’æ§½ï¼ˆNamed Slotsï¼‰</strong> çš„å®ç°é€»è¾‘æ˜¯<strong>é™æ€æšä¸¾</strong>ã€‚</p>
<ol>
<li><strong>é¢„ç¼–è¯‘æŒ–å‘</strong>ï¼šå°ç¨‹åºåŸç”Ÿä¸æ”¯æŒåŠ¨æ€æ’æ§½åã€‚Uni-app ç¼–è¯‘å™¨ä¸ºäº†å…¼å®¹ Vueï¼Œä¼šæ ¹æ®ä½ çš„å¾ªç¯é€»è¾‘ï¼Œåœ¨ WXML é‡Œé¢„å…ˆå†™æ­»æ‰€æœ‰çš„å ä½ç¬¦ï¼ˆå¦‚ <code>slot="d-0"</code>, <code>slot="d-1"</code>ï¼‰ã€‚</li>
<li><strong>æ¸²æŸ“æƒå€’ç½®</strong>ï¼šåœ¨å…·åæ’æ§½æ¨¡å¼ä¸‹ï¼Œ<strong>çˆ¶ç»„ä»¶æ‹¥æœ‰å†…å®¹çš„å®ä¾‹åŒ–æƒ</strong>ã€‚çˆ¶ç»„ä»¶ä¼šå…ˆæŠŠæ‰€æœ‰å†…å®¹èŠ‚ç‚¹ç”Ÿæˆå¥½ï¼Œç„¶åå†â€œåˆ†å‘â€ç»™å­ç»„ä»¶ã€‚</li>
<li><strong>éš”ç¦»å¤±è´¥</strong>ï¼šå­ç»„ä»¶é‡Œçš„ <code>v-if</code> åªèƒ½å†³å®šå­ç»„ä»¶è‡ªå·±æ˜¯å¦æ˜¾ç¤ºï¼Œä½†æŒ¡ä¸ä½çˆ¶ç»„ä»¶å·²ç»äº§ç”Ÿçš„ç‰©ç†èŠ‚ç‚¹ã€‚è¿™å°±å¥½æ¯”<strong>è™½ç„¶ä½ æŠŠå®¶é—¨å…³äº†ï¼ˆv-if=falseï¼‰ï¼Œä½†é‚»å±…å·²ç»æŠŠè´§å¸åœ¨äº†ä½ é—¨å£ï¼ˆDOM å ä½ï¼‰</strong> ã€‚</li>
</ol>
<hr/>
<h3 data-id="heading-1">ä¸‰ã€ ä½œç”¨åŸŸæ’æ§½æ˜¯â€œåŠ¨æ€æ¨¡ç‰ˆâ€</h3>
<p>è¦å®ç°çœŸæ­£çš„æ‡’åŠ è½½ï¼ˆéš <code>v-if</code> é”€æ¯ DOMï¼‰ï¼Œå¿…é¡»é‡æ„ä¸º<strong>ä½œç”¨åŸŸæ’æ§½ï¼ˆScoped Slotsï¼‰</strong> ã€‚</p>
<h4 data-id="heading-2">1. å­ç»„ä»¶æ”¹é€ ï¼šå˜â€œå¤šå‘â€ä¸ºâ€œå•æ¨¡æ¿â€</h4>
<p>ä¸è¦å†ç»™æ’æ§½èµ·åŠ¨æ€åå­—ï¼Œç»Ÿä¸€ä½¿ç”¨å¸¦ä½œç”¨åŸŸçš„é»˜è®¤æ’æ§½æˆ–å…·åæ’æ§½ã€‚</p>
<pre><code class="hljs language-HTML" lang="HTML"><span class="hljs-tag">&lt;<span class="hljs-name">view</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">"(item, index) in list"</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">"index"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">"shouldRender(index)"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">slot</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"content"</span> <span class="hljs-attr">:item</span>=<span class="hljs-string">"item"</span> /&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span>
</code></pre>
<h4 data-id="heading-3">2. çˆ¶ç»„ä»¶è°ƒç”¨ ç¦æ­¢ v-for å¡«å……</h4>
<p>è¿™æ˜¯æœ€å…³é”®çš„â€”â€”<strong>çˆ¶ç»„ä»¶ä¸å†è´Ÿè´£å¾ªç¯äº§ç”ŸèŠ‚ç‚¹ï¼Œåªæä¾›æ¸²æŸ“æ¨¡æ¿ã€‚</strong></p>
<pre><code class="hljs language-HTML" lang="HTML"><span class="hljs-tag">&lt;<span class="hljs-name">Swiper</span> <span class="hljs-attr">:list</span>=<span class="hljs-string">"dataList"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">v-slot:content</span>=<span class="hljs-string">"{ item }"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">image</span> <span class="hljs-attr">:src</span>=<span class="hljs-string">"item.url"</span> /&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">Swiper</span>&gt;</span>
</code></pre>
<hr/>
<h3 data-id="heading-4">å››ã€ ä¸ºä»€ä¹ˆæ¢æˆä½œç”¨åŸŸæ’æ§½å°±ç”Ÿæ•ˆäº†ï¼Ÿ</h3>
<p>è¿™æ˜¯åº•å±‚æ¶æ„çš„è´¨å˜ï¼š</p>
<ul>
<li><strong>å®ä¾‹åŒ–æ—¶æœºæ”¹å˜</strong>ï¼šä½œç”¨åŸŸæ’æ§½åœ¨å°ç¨‹åºé‡Œè¢«ç¼–è¯‘ä¸º <code>template</code> é€»è¾‘ã€‚<strong>å®ä¾‹åŒ–å†…å®¹çš„æ§åˆ¶æƒç§»äº¤ç»™äº†å­ç»„ä»¶</strong>ã€‚</li>
<li><strong>æŒ‰éœ€ç”Ÿæˆ</strong>ï¼šåªæœ‰å­ç»„ä»¶è¿è¡Œåˆ° <code>v-if="true"</code> ä¸”æ‰§è¡Œåˆ° <code>&lt;slot /&gt;</code> é‚£ä¸€è¡Œä»£ç æ—¶ï¼Œçˆ¶ç»„ä»¶å®šä¹‰çš„â€œæ¨¡æ¿â€æ‰ä¼šåŠ¨æ€è½¬å˜ä¸ºçœŸæ­£çš„ DOMã€‚</li>
<li><strong>åœ°åŸºéƒ½æ²¡äº†</strong>ï¼šå¦‚æœ <code>v-if="false"</code>ï¼Œè¿™æ®µä»£ç å‹æ ¹ä¸ä¼šè·‘ï¼Œçˆ¶ç»„ä»¶çš„å†…å®¹åœ¨å†…å­˜é‡Œè¿å½±å­éƒ½ä¸ä¼šå‡ºç°ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-5">äº”ã€ é¿å‘å°ç»“</h3>
<p>å¦‚æœä½ åœ¨ Uni-app å¼€å‘è€…å·¥å…·é‡Œå‘ç° DOM èŠ‚ç‚¹æ•°ä¸å¯¹åŠ²ï¼Œè¯·æ£€æŸ¥ä»¥ä¸‹ä¸¤ç‚¹ï¼š</p>
<ol>
<li><strong>æ˜¯å¦åœ¨å¾ªç¯é‡Œç”¨äº†åŠ¨æ€å…·åæ’æ§½ï¼Ÿ</strong> ï¼ˆ<code>:name="'xxx' + index"</code>ï¼‰</li>
<li><strong>çˆ¶ç»„ä»¶æ˜¯å¦ä¹Ÿå†™äº† <code>v-for</code> å»å¡«å‘ï¼Ÿ</strong></li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸‰å¹´å‰å†™çš„ä¸€ä¸ªä»£ç å·¥å…·ï¼Œè‡³ä»Šå·²è¢« AI Coding å®Œå…¨å–ä»£ã€‚]]></title>    <link>https://juejin.cn/post/7589074117644271651</link>    <guid>https://juejin.cn/post/7589074117644271651</guid>    <pubDate>2025-12-29T09:22:17.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589074117644271651" data-draft-id="7588971908226973730" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸‰å¹´å‰å†™çš„ä¸€ä¸ªä»£ç å·¥å…·ï¼Œè‡³ä»Šå·²è¢« AI Coding å®Œå…¨å–ä»£ã€‚"/> <meta itemprop="keywords" content="å‰ç«¯,AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2025-12-29T09:22:17.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é©¬è‡´è‰¯"/> <meta itemprop="url" content="https://juejin.cn/user/3413334152193454"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸‰å¹´å‰å†™çš„ä¸€ä¸ªä»£ç å·¥å…·ï¼Œè‡³ä»Šå·²è¢« AI Coding å®Œå…¨å–ä»£ã€‚
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3413334152193454/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é©¬è‡´è‰¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T09:22:17.000Z" title="Mon Dec 29 2025 09:22:17 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    5
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<ul>
<li>ä»“åº“ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fmapinxue%2Fsun-dock" target="_blank" title="https://github.com/mapinxue/sun-dock" ref="nofollow noopener noreferrer">github.com/mapinxue/suâ€¦</a></li>
<li>æ¼”ç¤ºï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmapinxue.github.io%2Fsun-dock%2Fapp%2Fdist%2F" target="_blank" title="https://mapinxue.github.io/sun-dock/app/dist/" ref="nofollow noopener noreferrer">mapinxue.github.io/sun-dock/apâ€¦</a></li>
<li>åŠŸèƒ½ï¼šåœ¨ React ä»£ç ä¸­å°† Inline style props å˜ä¸º Inline tailwind css.</li>
</ul>
</blockquote>
<h2 data-id="heading-0">åˆè¡·</h2>
<p>2022 å¹´åœ¨ momenta å®ä¹ çš„æ—¶å€™å°±ç»å¸¸å‘ç°ä¸€ä¸ªä»£ç é—®é¢˜ï¼Œå¤§å®¶ç¼–å†™çš„ä»£ç ä¸­ç»å¸¸å‡ºç° style props å’Œ tailwind css å¹¶å­˜çš„ç°è±¡ï¼Œå°±åƒæ˜¯ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx">&lt;div className=<span class="hljs-string">"inline-block"</span> style={{ <span class="hljs-attr">width</span>: <span class="hljs-number">300</span> }} /&gt;
</code></pre>
<p>è¿™ä¸ªç®€å•çš„ä»£ç å·²ç»æœ‰äº†ä¸¤ä¸ªé—®é¢˜ï¼š</p>
<ol>
<li>ä»£ç é£æ ¼ä¸ç»Ÿä¸€ã€‚å·²ç»å¼•å…¥äº† tailwind cssï¼Œåˆä½¿ç”¨ style props ä»…ä»…ä½œä¸ºæ ·å¼è€Œä¸æ˜¯å˜é‡</li>
<li>æ€»æ˜¯å¼•å‘é‡æ–°æ¸²æŸ“ã€‚style props ä½¿ç”¨çš„å­—é¢é‡ object <code>{ width: 300 }</code>, ä¼šåœ¨æ¯æ¬¡çˆ¶ç»„ä»¶é‡æ–°æ¸²æŸ“çš„æ—¶å€™å¼•å‘è¿™ä¸ªç»„ä»¶çš„é‡æ–°æ¸²æŸ“ã€‚å¦‚ä¸‹é¢è¿™ä¸ªä»£ç æ‰€ç¤ºï¼š</li>
</ol>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">const</span> <span class="hljs-title function_">CompA</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-keyword">const</span> [count, setCount] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);
    
    <span class="hljs-keyword">return</span> (
        <span class="xml"><span class="hljs-tag">&lt;&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span> {count} <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> setCount(count + 1)}&gt; +1 <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
            
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">width:</span> <span class="hljs-attr">300</span> }}&gt;</span>
                {/* è¿™é‡Œæ˜¯ä¸ªå·¨å¤§çš„ç»„ä»¶ */}
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/&gt;</span></span>
    )
}
</code></pre>
<p>ç¼–å†™ä¸€ä¸ª demoï¼Œå·¦è¾¹æ˜¯ç›´æ¥ä½¿ç”¨ object å­—é¢é‡ç¼–å†™çš„ react ç»„ä»¶ï¼Œå³è¾¹æ˜¯ç»è¿‡ useMemo å›ºåŒ–çš„ objectå­—é¢é‡ï¼Œå…¶åœ¨ç‚¹å‡»æŒ‰é’®åŠ ä¸€å¼•å‘é‡æ–°æ¸²æŸ“åï¼Œå·¦ä¾§ä¼šè·Ÿä¸ªé‡æ–°æ¸²æŸ“ï¼Œè€Œå³ä¾§åˆ™ä¿æŒé™æ€ä¸é‡æ–°æ¸²æŸ“ã€‚è¿è¡Œæ•ˆæœå¦‚å›¾æ‰€ç¤º</p>
<ul>
<li>demo: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fmapinxue%2Freact-rerender-demo" target="_blank" title="https://github.com/mapinxue/react-rerender-demo" ref="nofollow noopener noreferrer">github.com/mapinxue/reâ€¦</a></li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/23ee112d823e42c7b9c6eb7e0e09abc0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6ams6Ie06Imv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767605348&amp;x-signature=KEfplpZ9aHSuIOeR4ZSvlFt3dfI%3D" alt="åŠ¨ç”».gif" loading="lazy"/></p>
<p>è¿™ä»…æ˜¯ä¸€ä¸ªæ¼”ç¤º demoï¼Œå½“çœŸæ­£è¿›å…¥ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œè¢«ç‰µè¿çš„ç»„ä»¶å¯èƒ½è§„æ¨¡æ¯”è¾ƒåºå¤§ï¼Œé‡æ–°æ¸²æŸ“å¯èƒ½å¯¼è‡´æ˜¾ç¤ºé¡µé¢è·³åŠ¨ã€ç™½å±ï¼Œä»¥åŠ<strong>æ™®éçš„æ€§èƒ½æŸå¤±å’Œæ€§èƒ½ä¼˜åŒ–å¤±è´¥</strong>ã€‚</p>
<h2 data-id="heading-1">è§£å†³åŠæ³•</h2>
<p>è¿™ä¸ªé—®é¢˜è§£å†³åŠæ³•çš„æ–‡å­—æè¿°å¦‚ä¸‹ï¼š</p>
<p>é¦–å…ˆï¼Œè¡Œ AST åˆ†æï¼Œå¾—åˆ°æ¯ä¸ªç»„ä»¶çš„æŠ½è±¡è¯­æ³•æ ‘æ•°æ®ã€‚<br/>
ç¬¬äºŒï¼Œéå†è¯­æ³•æ ‘ï¼ŒæŸ¥è¯¢æ¯ä¸ª Node ä¸Šæ˜¯å¦æœ‰ style objectã€‚<br/>
ç¬¬ä¸‰ï¼Œ<strong>å¯¹ Style Object ä¸­çš„ Properties è¿›è¡Œéå†å¹¶é€šè¿‡æŸäº›æ‰‹æ®µæ˜ å°„åˆ° Tailwind CSS string ä¸Šã€‚</strong><br/>
ç¬¬å››ï¼Œé‡æ„ ASTï¼Œåˆ é™¤ Style object, å¢åŠ  classNameã€‚<br/>
æœ€åï¼Œä¿å­˜æ–‡ä»¶ã€‚</p>
<hr/>
<p>ä¸Šè¿°æ­¥éª¤ä¸­æœ€å¤æ‚çš„æ˜¯ç¬¬ä¸‰æ­¥ï¼Œå…¶éœ€è¦è€ƒè™‘å¤šç§æƒ…å†µï¼š</p>
<ul>
<li>é™æ€æ˜ å°„</li>
<li>åŠ¨æ€æ˜ å°„</li>
<li>çŠ¶æ€ä¼ é€’</li>
</ul>
<p>å¯¹äºé™æ€æ˜ å°„ï¼Œå…¶å˜åŒ–ä¸ºï¼š</p>
<pre><code class="hljs language-tsx" lang="tsx">{ <span class="hljs-attr">textAlign</span>: <span class="hljs-string">"left"</span> }  -&gt; <span class="hljs-string">"text-left"</span>
</code></pre>
<p>å¯¹äºåŠ¨æ€æ˜ å°„ï¼Œå…¶å˜åŒ–ä¸ºï¼š</p>
<pre><code class="hljs language-tsx" lang="tsx">{ <span class="hljs-attr">marginLeft</span>: <span class="hljs-number">1</span> } or { <span class="hljs-attr">marginLeft</span>: <span class="hljs-string">'1px'</span> } -&gt; <span class="hljs-string">"ml-[1px]"</span>
</code></pre>
<p>å¯¹äºçŠ¶æ€ä¼ é€’ï¼Œå…¶åº”è¯¥ä¿ç•™ï¼Œä¸€èˆ¬å±•ç°å½¢å¼ä¸ºå˜é‡æˆ–è€…æ’å€¼ï¼š</p>
<pre><code class="hljs language-tsx" lang="tsx">{ <span class="hljs-attr">position</span>: <span class="hljs-string">'absolute'</span>, <span class="hljs-attr">top</span>: <span class="hljs-string">`<span class="hljs-subst">${topVar}</span>`</span> } -&gt; <span class="hljs-string">"absolute"</span> { <span class="hljs-attr">top</span>: <span class="hljs-string">`<span class="hljs-subst">${topVar}</span>`</span> }
</code></pre>
<hr/>
<p>æ‰€ä»¥åœ¨å½“æ—¶çš„æµ‹è¯•æ ·ä¾‹ä¸­æˆ‘æ˜¯è¿™æ ·å†™çš„ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> testSamples = [
    {
        <span class="hljs-attr">input</span>: <span class="hljs-string">`&lt;div style={{ textAlign: 'center' }} /&gt;;`</span>,
        <span class="hljs-attr">output</span>: <span class="hljs-string">`className="text-center"`</span>
    },
    {
        <span class="hljs-attr">input</span>: <span class="hljs-string">`&lt;div style={{ textAlign: false }} /&gt;;`</span>,
        <span class="hljs-attr">output</span>: <span class="hljs-string">`textAlign: false`</span>
    },
    {
        <span class="hljs-attr">input</span>: <span class="hljs-string">`&lt;div style={{ backgroudUnknow: 'black', textAlign: 'center'  }} /&gt;;`</span>,
        <span class="hljs-attr">output</span>: <span class="hljs-string">`className="text-center"`</span>
    },
    {
        <span class="hljs-attr">input</span>: <span class="hljs-string">`&lt;div style={{ padding: '2px' }} /&gt;;`</span>,
        <span class="hljs-attr">output</span>: <span class="hljs-string">`className="p-[2px]"`</span>
    },
    {
        <span class="hljs-attr">input</span>: <span class="hljs-string">`&lt;div style={{ padding: 2 }} /&gt;;`</span>,
        <span class="hljs-attr">output</span>: <span class="hljs-string">`className="p-[2px]"`</span>
    },
    {
        <span class="hljs-attr">input</span>: <span class="hljs-string">`&lt;div style={{ padding: '2px 4px 2px' }} /&gt;;`</span>,
        <span class="hljs-attr">output</span>: <span class="hljs-string">`className="pt-[2px] py-[4px] pb-[2px]"`</span>
    },
    {
        <span class="hljs-attr">input</span>: <span class="hljs-string">`&lt;div style={{ strokeWidth: 4 }} /&gt;`</span>,
        <span class="hljs-attr">output</span>: <span class="hljs-string">`className="stroke-width-4"`</span>
    },
    {
        <span class="hljs-attr">input</span>: <span class="hljs-string">`&lt;div style={{ strokeWidth: '4' }} /&gt;`</span>,
        <span class="hljs-attr">output</span>: <span class="hljs-string">`className="stroke-width-4"`</span>
    },
    {
        <span class="hljs-attr">input</span>: <span class="hljs-string">`&lt;div style={{ textAlign: 'center !important' }} /&gt;`</span>,
        <span class="hljs-attr">output</span>: <span class="hljs-string">`className="!text-center"`</span>
    },
    {
        <span class="hljs-attr">input</span>: <span class="hljs-string">`&lt;div style={{ padding: '100%', margin: 'calc(100%)' }} /&gt;`</span>,
        <span class="hljs-attr">output</span>: <span class="hljs-string">`className="p-[100%] m-[calc(100%)]"`</span>
    },
    {
        <span class="hljs-attr">input</span>: <span class="hljs-string">`&lt;div style={{ fontWeight: 500 }} /&gt;`</span>,
        <span class="hljs-attr">output</span>: <span class="hljs-string">`className="font-500"`</span>
    },
];
</code></pre>
<hr/>
<h2 data-id="heading-2">å¦‚ä»Š</h2>
<p>å¦‚ä»Šï¼Œä¸‰å¹´åå„ç§ AI coding å·¥å…·å±‚å‡ºä¸ç©·ï¼ŒClaude Code, Gemini Cli, ä»¥åŠå›½å†…çš„ Qwen Coderï¼Œéƒ½å¯ä»¥ä»…ç”¨ä¸€å¥æç¤ºè¯åšåˆ°ä¸Šè¿°çš„æ‰€æœ‰å·¥ä½œï¼š</p>
<pre><code class="hljs">å¸®æˆ‘æŸ¥çœ‹ä¸€ä¸‹è¿™ä¸ªé¡¹ç›®ï¼Œå¹¶å°†æ‰€æœ‰ç»„ä»¶ä¸­ä½¿ç”¨çš„ React Style Props åˆ‡æ¢ä¸º Tailwind cssï¼Œå¹¶è¾“å‡ºè¿™æ ·åšçš„å¥½å¤„ã€‚
</code></pre>
<p>æ ¹æ®ä½ çš„é¡¹ç›®å¤§å°ï¼Œä¹Ÿè®¸ 5-15 åˆ†é’Ÿåï¼Œå…¨éƒ¨çš„ä»£ç å·²ç»è¢«æ”¹é€ å®Œæˆäº†ï¼Œå¹¶ä¸” AI çš„æ”¹åŠ¨å¯èƒ½æ›´å…·æœ‰é€»è¾‘æ€§ã€‚</p>
<p>å¹¶ä¸”åœ¨ä½ ä½¿ç”¨ AI ç¼–å†™çš„ä»£ç ä¸­ï¼Œå¾ˆå°‘ä¼šå‡ºç°æ˜¯ä½¿ç”¨ React Style Props çš„æƒ…å†µäº†ã€‚</p>
<p>æˆ‘çš„è¿™ä¸ªå°é¡¹ç›®ä¹Ÿè¢«æ­£å¼çš„å®Œå…¨æ›¿ä»£äº†ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¾èµ–æ³¨å…¥ç³»ç»Ÿ]]></title>    <link>https://juejin.cn/post/7589082912588251179</link>    <guid>https://juejin.cn/post/7589082912588251179</guid>    <pubDate>2025-12-29T09:34:10.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589082912588251179" data-draft-id="7589099845186175012" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¾èµ–æ³¨å…¥ç³»ç»Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-29T09:34:10.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å€Ÿä¸ªç«er"/> <meta itemprop="url" content="https://juejin.cn/user/2225067265915783"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¾èµ–æ³¨å…¥ç³»ç»Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2225067265915783/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å€Ÿä¸ªç«er
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T09:34:10.000Z" title="Mon Dec 29 2025 09:34:10 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    9
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">NestJS æºç è§£æï¼šä¾èµ–æ³¨å…¥ç³»ç»Ÿ</h2>
<blockquote>
<p>æ·±å…¥ Injector å’Œ Containerï¼Œæ­ç§˜ NestJS çš„ IoC å®ç°ã€‚</p>
</blockquote>
<h3 data-id="heading-1">ä¾èµ–æ³¨å…¥åŸºç¡€</h3>
<p>NestJS çš„ä¾èµ–æ³¨å…¥åŸºäº TypeScript è£…é¥°å™¨å’Œ <code>reflect-metadata</code>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@Injectable</span>()
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CatsService</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> logger: LoggerService</span>) {}
}
</code></pre>
<p>ç¼–è¯‘åï¼ŒTypeScript ä¼šç”Ÿæˆå…ƒæ•°æ®ï¼Œè®°å½•æ„é€ å‡½æ•°å‚æ•°ç±»å‹ã€‚</p>
<h3 data-id="heading-2">æ ¸å¿ƒç»„ä»¶</h3>
<h4 data-id="heading-3">1. InstanceWrapper</h4>
<p>åŒ…è£…æ¯ä¸ªå¯æ³¨å…¥çš„å®ä¾‹ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// packages/core/injector/instance-wrapper.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">InstanceWrapper</span>&lt;T = <span class="hljs-built_in">any</span>&gt; {
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">readonly</span> <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">readonly</span> <span class="hljs-attr">token</span>: <span class="hljs-title class_">InjectionToken</span>;
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">readonly</span> <span class="hljs-attr">metatype</span>: <span class="hljs-title class_">Type</span>&lt;T&gt;;
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">readonly</span> scope?: <span class="hljs-title class_">Scope</span>;

  <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> values = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WeakMap</span>&lt;<span class="hljs-title class_">ContextId</span>, <span class="hljs-title class_">InstancePerContext</span>&lt;T&gt;&gt;();

  <span class="hljs-comment">// è·å–å®ä¾‹</span>
  <span class="hljs-keyword">get</span> <span class="hljs-title function_">instance</span>(): T {
    <span class="hljs-keyword">const</span> instancePerContext = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getInstanceByContextId</span>(<span class="hljs-variable constant_">STATIC_CONTEXT</span>);
    <span class="hljs-keyword">return</span> instancePerContext.<span class="hljs-property">instance</span>;
  }

  <span class="hljs-comment">// è®¾ç½®å®ä¾‹</span>
  <span class="hljs-keyword">set</span> <span class="hljs-title function_">instance</span>(<span class="hljs-params">value: T</span>) {
    <span class="hljs-keyword">const</span> instancePerContext = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getInstanceByContextId</span>(<span class="hljs-variable constant_">STATIC_CONTEXT</span>);
    instancePerContext.<span class="hljs-property">instance</span> = value;
  }

  <span class="hljs-comment">// è·å–æ„é€ å‡½æ•°å…ƒæ•°æ®</span>
  <span class="hljs-keyword">public</span> <span class="hljs-title function_">getCtorMetadata</span>(): <span class="hljs-title class_">InstanceWrapper</span>[] {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">inject</span> || [];
  }
}
</code></pre>
<h4 data-id="heading-4">2. Module</h4>
<p>æ¨¡å—ç±»ï¼Œç®¡ç† providersã€controllersã€importsã€exportsï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// packages/core/injector/module.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Module</span> {
  <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> _providers = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>&lt;<span class="hljs-title class_">InjectionToken</span>, <span class="hljs-title class_">InstanceWrapper</span>&lt;<span class="hljs-title class_">Injectable</span>&gt;&gt;();
  <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> _controllers = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>&lt;<span class="hljs-title class_">InjectionToken</span>, <span class="hljs-title class_">InstanceWrapper</span>&lt;<span class="hljs-title class_">Controller</span>&gt;&gt;();
  <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> _imports = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>&lt;<span class="hljs-title class_">Module</span>&gt;();
  <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> _exports = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>&lt;<span class="hljs-title class_">InjectionToken</span>&gt;();

  <span class="hljs-comment">// æ·»åŠ  Provider</span>
  <span class="hljs-keyword">public</span> <span class="hljs-title function_">addProvider</span>(<span class="hljs-attr">provider</span>: <span class="hljs-title class_">Provider</span>): <span class="hljs-built_in">string</span> {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">isCustomProvider</span>(provider)) {
      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">addCustomProvider</span>(provider);
    }

    <span class="hljs-keyword">const</span> token = provider <span class="hljs-keyword">as</span> <span class="hljs-title class_">Type</span>&lt;<span class="hljs-title class_">Injectable</span>&gt;;
    <span class="hljs-keyword">const</span> wrapper = <span class="hljs-keyword">new</span> <span class="hljs-title class_">InstanceWrapper</span>({
      token,
      <span class="hljs-attr">name</span>: token.<span class="hljs-property">name</span>,
      <span class="hljs-attr">metatype</span>: token,
      <span class="hljs-attr">instance</span>: <span class="hljs-literal">null</span>,
      <span class="hljs-attr">isResolved</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">scope</span>: <span class="hljs-title function_">getClassScope</span>(token),
      <span class="hljs-attr">host</span>: <span class="hljs-variable language_">this</span>,
    });

    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_providers</span>.<span class="hljs-title function_">set</span>(token, wrapper);
    <span class="hljs-keyword">return</span> token.<span class="hljs-property">name</span>;
  }

  <span class="hljs-comment">// æ·»åŠ è‡ªå®šä¹‰ Provider</span>
  <span class="hljs-keyword">private</span> <span class="hljs-title function_">addCustomProvider</span>(<span class="hljs-attr">provider</span>: <span class="hljs-title class_">Provider</span>): <span class="hljs-built_in">string</span> {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">isCustomClass</span>(provider)) {
      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">addCustomClass</span>(provider <span class="hljs-keyword">as</span> <span class="hljs-title class_">ClassProvider</span>);
    }
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">isCustomValue</span>(provider)) {
      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">addCustomValue</span>(provider <span class="hljs-keyword">as</span> <span class="hljs-title class_">ValueProvider</span>);
    }
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">isCustomFactory</span>(provider)) {
      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">addCustomFactory</span>(provider <span class="hljs-keyword">as</span> <span class="hljs-title class_">FactoryProvider</span>);
    }
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">isCustomUseExisting</span>(provider)) {
      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">addCustomUseExisting</span>(provider <span class="hljs-keyword">as</span> <span class="hljs-title class_">ExistingProvider</span>);
    }
  }
}
</code></pre>
<h4 data-id="heading-5">3. Injector</h4>
<p>ä¾èµ–æ³¨å…¥æ ¸å¿ƒå¼•æ“ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// packages/core/injector/injector.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Injector</span> {
  <span class="hljs-comment">// åŠ è½½å®ä¾‹</span>
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">async</span> loadInstance&lt;T&gt;(
    <span class="hljs-attr">wrapper</span>: <span class="hljs-title class_">InstanceWrapper</span>&lt;T&gt;,
    <span class="hljs-attr">collection</span>: <span class="hljs-title class_">Map</span>&lt;<span class="hljs-title class_">InjectionToken</span>, <span class="hljs-title class_">InstanceWrapper</span>&gt;,
    <span class="hljs-attr">moduleRef</span>: <span class="hljs-title class_">Module</span>,
    contextId = <span class="hljs-variable constant_">STATIC_CONTEXT</span>,
    inquirer?: <span class="hljs-title class_">InstanceWrapper</span>,
  ) {
    <span class="hljs-keyword">const</span> { token } = wrapper;

    <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦å·²è§£æ</span>
    <span class="hljs-keyword">const</span> instanceHost = wrapper.<span class="hljs-title function_">getInstanceByContextId</span>(contextId, inquirer?.<span class="hljs-property">id</span>);
    <span class="hljs-keyword">if</span> (instanceHost.<span class="hljs-property">isResolved</span>) {
      <span class="hljs-keyword">return</span> instanceHost.<span class="hljs-property">instance</span>;
    }

    <span class="hljs-comment">// è§£ææ„é€ å‡½æ•°ä¾èµ–</span>
    <span class="hljs-keyword">const</span> dependencies = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">resolveConstructorParams</span>&lt;T&gt;(
      wrapper,
      moduleRef,
      contextId,
      inquirer,
    );

    <span class="hljs-comment">// å®ä¾‹åŒ–</span>
    <span class="hljs-keyword">const</span> instance = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">instantiateClass</span>(
      dependencies,
      wrapper,
      wrapper.<span class="hljs-property">inject</span>,
      contextId,
      inquirer,
    );

    <span class="hljs-comment">// æ³¨å…¥å±æ€§ä¾èµ–</span>
    <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">loadPropertiesOnInstance</span>(instance, wrapper, moduleRef, contextId);

    <span class="hljs-keyword">return</span> instance;
  }

  <span class="hljs-comment">// è§£ææ„é€ å‡½æ•°å‚æ•°</span>
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">async</span> resolveConstructorParams&lt;T&gt;(
    <span class="hljs-attr">wrapper</span>: <span class="hljs-title class_">InstanceWrapper</span>&lt;T&gt;,
    <span class="hljs-attr">moduleRef</span>: <span class="hljs-title class_">Module</span>,
    <span class="hljs-attr">contextId</span>: <span class="hljs-title class_">ContextId</span>,
    inquirer?: <span class="hljs-title class_">InstanceWrapper</span>,
  ): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">unknown</span>[]&gt; {
    <span class="hljs-comment">// è·å–ä¾èµ–å…ƒæ•°æ®</span>
    <span class="hljs-keyword">const</span> dependencies = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getCtorDependencies</span>(wrapper);

    <span class="hljs-comment">// å¹¶è¡Œè§£ææ‰€æœ‰ä¾èµ–</span>
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>(
      dependencies.<span class="hljs-title function_">map</span>(<span class="hljs-keyword">async</span> (dependency, index) =&gt; {
        <span class="hljs-keyword">const</span> { <span class="hljs-attr">wrapper</span>: instanceWrapper } = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">lookupComponent</span>(
          dependency,
          moduleRef,
          contextId,
          wrapper,
          index,
        );
        <span class="hljs-keyword">return</span> instanceWrapper.<span class="hljs-property">instance</span>;
      }),
    );
  }

  <span class="hljs-comment">// æŸ¥æ‰¾ä¾èµ–</span>
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">async</span> <span class="hljs-title function_">lookupComponent</span>(<span class="hljs-params">
    dependency: InjectorDependency,
    moduleRef: Module,
    contextId: ContextId,
    wrapper: InstanceWrapper,
    index: <span class="hljs-built_in">number</span>,
  </span>) {
    <span class="hljs-comment">// 1. åœ¨å½“å‰æ¨¡å—æŸ¥æ‰¾</span>
    <span class="hljs-keyword">const</span> instanceWrapper = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">lookupComponentInParentModules</span>(
      dependency,
      moduleRef,
      contextId,
      wrapper,
      index,
    );

    <span class="hljs-keyword">if</span> (instanceWrapper) {
      <span class="hljs-keyword">return</span> { <span class="hljs-attr">wrapper</span>: instanceWrapper };
    }

    <span class="hljs-comment">// 2. åœ¨å…¨å±€æ¨¡å—æŸ¥æ‰¾</span>
    <span class="hljs-keyword">const</span> globalWrapper = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">lookupComponentInGlobalModules</span>(
      dependency,
      contextId,
      wrapper,
    );

    <span class="hljs-keyword">if</span> (globalWrapper) {
      <span class="hljs-keyword">return</span> { <span class="hljs-attr">wrapper</span>: globalWrapper };
    }

    <span class="hljs-comment">// 3. æœªæ‰¾åˆ°ï¼ŒæŠ›å‡ºå¼‚å¸¸</span>
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UndefinedDependencyException</span>(wrapper.<span class="hljs-property">name</span>, dependency, index);
  }
}
</code></pre>
<h3 data-id="heading-6">ä¾èµ–è§£ææµç¨‹</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@Injectable</span>()
<span class="hljs-keyword">class</span> <span class="hljs-title class_">CatsService</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">
    <span class="hljs-keyword">private</span> logger: LoggerService,
    <span class="hljs-keyword">private</span> config: ConfigService,
  </span>) {}
}

è§£ææµç¨‹ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ <span class="hljs-number">1.</span> è·å–æ„é€ å‡½æ•°å‚æ•°ç±»å‹                              â”‚
â”‚    <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">getMetadata</span>(<span class="hljs-string">'design:paramtypes'</span>, target) â”‚
â”‚    â†’ [<span class="hljs-title class_">LoggerService</span>, <span class="hljs-title class_">ConfigService</span>]                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ <span class="hljs-number">2.</span> éå†æ¯ä¸ªä¾èµ–ï¼Œè°ƒç”¨ lookupComponent               â”‚
â”‚    â†’ åœ¨å½“å‰æ¨¡å— providers ä¸­æŸ¥æ‰¾                    â”‚
â”‚    â†’ åœ¨ imports çš„æ¨¡å— <span class="hljs-built_in">exports</span> ä¸­æŸ¥æ‰¾               â”‚
â”‚    â†’ åœ¨å…¨å±€æ¨¡å—ä¸­æŸ¥æ‰¾                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ <span class="hljs-number">3.</span> é€’å½’è§£æä¾èµ–çš„ä¾èµ–                               â”‚
â”‚    <span class="hljs-title class_">LoggerService</span> å¯èƒ½ä¹Ÿæœ‰è‡ªå·±çš„ä¾èµ–                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ <span class="hljs-number">4.</span> å®ä¾‹åŒ–                                           â”‚
â”‚    <span class="hljs-keyword">new</span> <span class="hljs-title class_">CatsService</span>(loggerInstance, configInstance)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h3 data-id="heading-7">Barrier å¹¶è¡Œè§£ææœºåˆ¶</h3>
<p>æºç ä¸­ä½¿ç”¨ <code>Barrier</code> å®ç°ä¾èµ–çš„å¹¶è¡Œè§£æï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// packages/core/injector/injector.ts</span>
<span class="hljs-keyword">const</span> paramBarrier = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Barrier</span>(dependencies.<span class="hljs-property">length</span>);

<span class="hljs-keyword">const</span> <span class="hljs-title function_">resolveParam</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">param: <span class="hljs-built_in">unknown</span>, index: <span class="hljs-built_in">number</span></span>) =&gt; {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> paramWrapper = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">resolveSingleParam</span>&lt;T&gt;(<span class="hljs-comment">/*...*/</span>);
    
    <span class="hljs-comment">// ç­‰å¾…æ‰€æœ‰ä¾èµ–éƒ½è§£æå®Œæˆ</span>
    <span class="hljs-keyword">await</span> paramBarrier.<span class="hljs-title function_">signalAndWait</span>();
    
    <span class="hljs-keyword">const</span> paramWrapperWithInstance = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">resolveComponentHost</span>(<span class="hljs-comment">/*...*/</span>);
    <span class="hljs-keyword">return</span> instanceHost?.<span class="hljs-property">instance</span>;
  } <span class="hljs-keyword">catch</span> (err) {
    paramBarrier.<span class="hljs-title function_">signal</span>(); <span class="hljs-comment">// å‡ºé”™ä¹Ÿè¦é‡Šæ”¾ä¿¡å·</span>
    <span class="hljs-comment">// ...</span>
  }
};

<span class="hljs-keyword">const</span> instances = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>(dependencies.<span class="hljs-title function_">map</span>(resolveParam));
</code></pre>
<p><code>Barrier</code> ç¡®ä¿æ‰€æœ‰ä¾èµ–çš„ <code>InstanceWrapper</code> éƒ½è¢«è§£æåï¼Œæ‰å¼€å§‹è·å–å®ä¾‹ã€‚è¿™é¿å…äº†ä¾èµ–æ ‘é™æ€æ€§åˆ¤æ–­é”™è¯¯å¯¼è‡´çš„ <code>undefined</code> æ³¨å…¥é—®é¢˜ã€‚</p>
<h3 data-id="heading-8">SettlementSignal å¾ªç¯ä¾èµ–æ£€æµ‹</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// packages/core/injector/injector.ts</span>
<span class="hljs-keyword">if</span> (instanceHost.<span class="hljs-property">isPending</span>) {
  <span class="hljs-keyword">const</span> settlementSignal = wrapper.<span class="hljs-property">settlementSignal</span>;
  <span class="hljs-keyword">if</span> (inquirer &amp;&amp; settlementSignal?.<span class="hljs-title function_">isCycle</span>(inquirer.<span class="hljs-property">id</span>)) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">CircularDependencyException</span>(<span class="hljs-string">`"<span class="hljs-subst">${wrapper.name}</span>"`</span>);
  }
  <span class="hljs-keyword">return</span> instanceHost.<span class="hljs-property">donePromise</span>!.<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">err?: <span class="hljs-built_in">unknown</span></span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;
  });
}
</code></pre>
<p><code>SettlementSignal</code> è¿½è¸ªä¾èµ–è§£æé“¾ï¼Œå½“æ£€æµ‹åˆ°å¾ªç¯æ—¶æŠ›å‡º <code>CircularDependencyException</code>ã€‚</p>
<h3 data-id="heading-9">ä½œç”¨åŸŸ</h3>
<p>NestJS æ”¯æŒä¸‰ç§ä½œç”¨åŸŸï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">Scope</span> {
  <span class="hljs-variable constant_">DEFAULT</span> = <span class="hljs-number">0</span>,    <span class="hljs-comment">// å•ä¾‹</span>
  <span class="hljs-variable constant_">TRANSIENT</span> = <span class="hljs-number">1</span>,  <span class="hljs-comment">// æ¯æ¬¡æ³¨å…¥åˆ›å»ºæ–°å®ä¾‹</span>
  <span class="hljs-variable constant_">REQUEST</span> = <span class="hljs-number">2</span>,    <span class="hljs-comment">// æ¯ä¸ªè¯·æ±‚åˆ›å»ºæ–°å®ä¾‹</span>
}
</code></pre>
<h4 data-id="heading-10">å•ä¾‹ (DEFAULT)</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@Injectable</span>()
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CatsService</span> {}
</code></pre>
<p>æ•´ä¸ªåº”ç”¨ç”Ÿå‘½å‘¨æœŸåªæœ‰ä¸€ä¸ªå®ä¾‹ã€‚</p>
<h4 data-id="heading-11">ç¬æ€ (TRANSIENT)</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@Injectable</span>({ <span class="hljs-attr">scope</span>: <span class="hljs-title class_">Scope</span>.<span class="hljs-property">TRANSIENT</span> })
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LoggerService</span> {}
</code></pre>
<p>æ¯æ¬¡æ³¨å…¥éƒ½åˆ›å»ºæ–°å®ä¾‹ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// packages/core/injector/injector.ts</span>
<span class="hljs-keyword">if</span> (wrapper.<span class="hljs-property">scope</span> === <span class="hljs-title class_">Scope</span>.<span class="hljs-property">TRANSIENT</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">instantiateClass</span>(
    dependencies,
    wrapper,
    wrapper.<span class="hljs-property">inject</span>,
    contextId,
    inquirer,
  );
}
</code></pre>
<h4 data-id="heading-12">è¯·æ±‚ä½œç”¨åŸŸ (REQUEST)</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@Injectable</span>({ <span class="hljs-attr">scope</span>: <span class="hljs-title class_">Scope</span>.<span class="hljs-property">REQUEST</span> })
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RequestService</span> {}
</code></pre>
<p>æ¯ä¸ª HTTP è¯·æ±‚åˆ›å»ºæ–°å®ä¾‹ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// packages/core/router/router-execution-context.ts</span>
<span class="hljs-keyword">if</span> (wrapper.<span class="hljs-property">scope</span> === <span class="hljs-title class_">Scope</span>.<span class="hljs-property">REQUEST</span>) {
  <span class="hljs-keyword">const</span> contextId = <span class="hljs-title function_">createContextId</span>();
  <span class="hljs-keyword">const</span> instance = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">injector</span>.<span class="hljs-title function_">loadInstance</span>(
    wrapper,
    collection,
    moduleRef,
    contextId,
  );
  <span class="hljs-keyword">return</span> instance;
}
</code></pre>
<h3 data-id="heading-13">è‡ªå®šä¹‰ Provider</h3>
<h4 data-id="heading-14">useClass</h4>
<pre><code class="hljs language-typescript" lang="typescript">{
  <span class="hljs-attr">provide</span>: <span class="hljs-title class_">CatsService</span>,
  <span class="hljs-attr">useClass</span>: <span class="hljs-title class_">MockCatsService</span>,
}
</code></pre>
<h4 data-id="heading-15">useValue</h4>
<pre><code class="hljs language-typescript" lang="typescript">{
  <span class="hljs-attr">provide</span>: <span class="hljs-string">'CONFIG'</span>,
  <span class="hljs-attr">useValue</span>: { <span class="hljs-attr">apiKey</span>: <span class="hljs-string">'xxx'</span> },
}
</code></pre>
<h4 data-id="heading-16">useFactory</h4>
<pre><code class="hljs language-typescript" lang="typescript">{
  <span class="hljs-attr">provide</span>: <span class="hljs-string">'ASYNC_CONNECTION'</span>,
  <span class="hljs-attr">useFactory</span>: <span class="hljs-keyword">async</span> (<span class="hljs-attr">config</span>: <span class="hljs-title class_">ConfigService</span>) =&gt; {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> <span class="hljs-title function_">createConnection</span>(config.<span class="hljs-title function_">get</span>(<span class="hljs-string">'database'</span>));
  },
  <span class="hljs-attr">inject</span>: [<span class="hljs-title class_">ConfigService</span>],
}
</code></pre>
<h4 data-id="heading-17">useExisting</h4>
<pre><code class="hljs language-typescript" lang="typescript">{
  <span class="hljs-attr">provide</span>: <span class="hljs-string">'AliasService'</span>,
  <span class="hljs-attr">useExisting</span>: <span class="hljs-title class_">CatsService</span>,
}
</code></pre>
<h3 data-id="heading-18">å¾ªç¯ä¾èµ–å¤„ç†</h3>
<p>NestJS ä½¿ç”¨ <code>forwardRef</code> å¤„ç†å¾ªç¯ä¾èµ–ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@Injectable</span>()
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CatsService</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">
    <span class="hljs-meta">@Inject</span>(forwardRef(() =&gt; DogsService))
    <span class="hljs-keyword">private</span> dogsService: DogsService,
  </span>) {}
}
</code></pre>
<p>å®ç°åŸç†ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// packages/common/utils/forward-ref.util.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> forwardRef = (<span class="hljs-attr">fn</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">any</span>): <span class="hljs-function"><span class="hljs-params">ForwardReference</span> =&gt;</span> ({
  <span class="hljs-attr">forwardRef</span>: fn,
});

<span class="hljs-comment">// packages/core/injector/injector.ts</span>
<span class="hljs-keyword">private</span> <span class="hljs-title function_">resolveParamToken</span>(<span class="hljs-params">param: <span class="hljs-built_in">any</span></span>) {
  <span class="hljs-keyword">if</span> (param &amp;&amp; param.<span class="hljs-property">forwardRef</span>) {
    <span class="hljs-keyword">return</span> param.<span class="hljs-title function_">forwardRef</span>();
  }
  <span class="hljs-keyword">return</span> param;
}
</code></pre>
<h3 data-id="heading-19">å±æ€§æ³¨å…¥</h3>
<p>é™¤äº†æ„é€ å‡½æ•°æ³¨å…¥ï¼Œè¿˜æ”¯æŒå±æ€§æ³¨å…¥ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@Injectable</span>()
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CatsService</span> {
  <span class="hljs-meta">@Inject</span>(<span class="hljs-title class_">LoggerService</span>)
  <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> <span class="hljs-attr">logger</span>: <span class="hljs-title class_">LoggerService</span>;
}
</code></pre>
<p>å®ç°ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// packages/core/injector/injector.ts</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">async</span> <span class="hljs-title function_">loadPropertiesOnInstance</span>(<span class="hljs-params">
  instance: <span class="hljs-built_in">object</span>,
  wrapper: InstanceWrapper,
  moduleRef: Module,
  contextId: ContextId,
</span>) {
  <span class="hljs-keyword">const</span> properties = wrapper.<span class="hljs-title function_">getPropertiesMetadata</span>();

  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> property <span class="hljs-keyword">of</span> properties) {
    <span class="hljs-keyword">const</span> { key, <span class="hljs-attr">wrapper</span>: propertyWrapper } = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">lookupComponent</span>(
      property.<span class="hljs-property">name</span>,
      moduleRef,
      contextId,
      wrapper,
    );
    instance[key] = propertyWrapper.<span class="hljs-property">instance</span>;
  }
}
</code></pre>
<h3 data-id="heading-20">æ€»ç»“</h3>
<p>NestJS ä¾èµ–æ³¨å…¥ç³»ç»Ÿçš„æ ¸å¿ƒï¼š</p>
<ol>
<li><strong>å…ƒæ•°æ®é©±åŠ¨</strong>ï¼šé€šè¿‡ <code>reflect-metadata</code> è·å–ç±»å‹ä¿¡æ¯</li>
<li><strong>InstanceWrapper</strong>ï¼šåŒ…è£…æ¯ä¸ªå¯æ³¨å…¥å®ä¾‹</li>
<li><strong>Module</strong>ï¼šç®¡ç† providersã€controllersã€importsã€exports</li>
<li><strong>Injector</strong>ï¼šé€’å½’è§£æä¾èµ–ï¼Œå®ä¾‹åŒ–å¯¹è±¡</li>
<li><strong>ä½œç”¨åŸŸ</strong>ï¼šæ”¯æŒå•ä¾‹ã€ç¬æ€ã€è¯·æ±‚ä¸‰ç§ä½œç”¨åŸŸ</li>
<li><strong>å¾ªç¯ä¾èµ–</strong>ï¼šé€šè¿‡ <code>forwardRef</code> å»¶è¿Ÿè§£æ</li>
</ol>
<p>ä¸‹ä¸€ç¯‡æˆ‘ä»¬å°†åˆ†ææ¨¡å—ç³»ç»Ÿçš„å®ç°ã€‚</p>
<hr/>
<blockquote>
<p>ğŸ“¦ æºç ä½ç½®ï¼š<code>packages/core/injector/</code></p>
<p>ä¸‹ä¸€ç¯‡ï¼šNestJS æ¨¡å—ç³»ç»Ÿ</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é¡¹ç›®ä»‹ç»ä¸ç¯å¢ƒæ­å»º]]></title>    <link>https://juejin.cn/post/7589201772117491718</link>    <guid>https://juejin.cn/post/7589201772117491718</guid>    <pubDate>2025-12-29T09:32:28.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589201772117491718" data-draft-id="7589126217249898537" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é¡¹ç›®ä»‹ç»ä¸ç¯å¢ƒæ­å»º"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-29T09:32:28.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å€Ÿä¸ªç«er"/> <meta itemprop="url" content="https://juejin.cn/user/2225067265915783"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é¡¹ç›®ä»‹ç»ä¸ç¯å¢ƒæ­å»º
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2225067265915783/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å€Ÿä¸ªç«er
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T09:32:28.000Z" title="Mon Dec 29 2025 09:32:28 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    11
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">NestJS æºç è§£æï¼šé¡¹ç›®ä»‹ç»ä¸ç¯å¢ƒæ­å»º</h2>
<blockquote>
<p>NestJS æ˜¯ Node.js æœ€æµè¡Œçš„ä¼ä¸šçº§æ¡†æ¶ï¼Œæœ¬ç³»åˆ—å°†æ·±å…¥æºç ï¼Œæ­ç§˜å…¶è®¾è®¡æ€æƒ³ã€‚</p>
</blockquote>
<h3 data-id="heading-1">NestJS æ˜¯ä»€ä¹ˆ</h3>
<p>NestJS æ˜¯ä¸€ä¸ªç”¨äºæ„å»ºé«˜æ•ˆã€å¯æ‰©å±•çš„ Node.js æœåŠ¡ç«¯åº”ç”¨çš„æ¡†æ¶ã€‚å®ƒä½¿ç”¨ TypeScript æ„å»ºï¼Œèåˆäº† OOPã€FPã€FRP çš„ç¼–ç¨‹èŒƒå¼ã€‚</p>
<p>æ ¸å¿ƒç‰¹ç‚¹ï¼š</p>
<ul>
<li><strong>æ¨¡å—åŒ–æ¶æ„</strong>ï¼šå€Ÿé‰´ Angular çš„æ¨¡å—ç³»ç»Ÿ</li>
<li><strong>ä¾èµ–æ³¨å…¥</strong>ï¼šå†…ç½® IoC å®¹å™¨</li>
<li><strong>è£…é¥°å™¨é©±åŠ¨</strong>ï¼šå¤§é‡ä½¿ç”¨ TypeScript è£…é¥°å™¨</li>
<li><strong>å¹³å°æ— å…³</strong>ï¼šæ”¯æŒ Expressã€Fastify ç­‰åº•å±‚æ¡†æ¶</li>
</ul>
<h3 data-id="heading-2">æºç ä»“åº“</h3>
<pre><code class="hljs language-bash" lang="bash">git <span class="hljs-built_in">clone</span> https://github.com/nestjs/nest.git
<span class="hljs-built_in">cd</span> nest
npm install
npm run build
</code></pre>
<p>å½“å‰ç‰ˆæœ¬ï¼šv11.1.10</p>
<h3 data-id="heading-3">é¡¹ç›®ç»“æ„</h3>
<pre><code class="hljs language-bash" lang="bash">nest/
â”œâ”€â”€ packages/
â”‚   â”œâ”€â”€ common/           <span class="hljs-comment"># å…¬å…±æ¨¡å—ï¼ˆè£…é¥°å™¨ã€æ¥å£ã€å·¥å…·ï¼‰</span>
â”‚   â”œâ”€â”€ core/             <span class="hljs-comment"># æ ¸å¿ƒæ¨¡å—ï¼ˆDIã€è·¯ç”±ã€ç”Ÿå‘½å‘¨æœŸï¼‰</span>
â”‚   â”œâ”€â”€ microservices/    <span class="hljs-comment"># å¾®æœåŠ¡æ”¯æŒ</span>
â”‚   â”œâ”€â”€ platform-express/ <span class="hljs-comment"># Express é€‚é…å™¨</span>
â”‚   â”œâ”€â”€ platform-fastify/ <span class="hljs-comment"># Fastify é€‚é…å™¨</span>
â”‚   â”œâ”€â”€ testing/          <span class="hljs-comment"># æµ‹è¯•å·¥å…·</span>
â”‚   â””â”€â”€ websockets/       <span class="hljs-comment"># WebSocket æ”¯æŒ</span>
â”‚
â”œâ”€â”€ integration/          <span class="hljs-comment"># é›†æˆæµ‹è¯•</span>
â”œâ”€â”€ sample/               <span class="hljs-comment"># ç¤ºä¾‹é¡¹ç›®</span>
â””â”€â”€ tools/                <span class="hljs-comment"># æ„å»ºå·¥å…·</span>
</code></pre>
<h3 data-id="heading-4">æ ¸å¿ƒåŒ…è¯´æ˜</h3>
<h4 data-id="heading-5">@nestjs/common</h4>
<p>å…¬å…±æ¨¡å—ï¼ŒåŒ…å«ï¼š</p>
<ul>
<li>è£…é¥°å™¨ï¼š<code>@Module</code>ã€<code>@Controller</code>ã€<code>@Injectable</code>ã€<code>@Get</code>ã€<code>@Post</code> ç­‰</li>
<li>æ¥å£ï¼š<code>NestModule</code>ã€<code>CanActivate</code>ã€<code>PipeTransform</code> ç­‰</li>
<li>å¼‚å¸¸ï¼š<code>HttpException</code>ã€<code>BadRequestException</code> ç­‰</li>
<li>å·¥å…·å‡½æ•°</li>
</ul>
<h4 data-id="heading-6">@nestjs/core</h4>
<p>æ ¸å¿ƒè¿è¡Œæ—¶ï¼ŒåŒ…å«ï¼š</p>
<ul>
<li><code>NestFactory</code>ï¼šåº”ç”¨å·¥å‚</li>
<li><code>NestContainer</code>ï¼šIoC å®¹å™¨</li>
<li><code>Injector</code>ï¼šä¾èµ–æ³¨å…¥å™¨</li>
<li><code>DependenciesScanner</code>ï¼šæ¨¡å—æ‰«æå™¨</li>
<li><code>RouterExplorer</code>ï¼šè·¯ç”±æ¢ç´¢å™¨</li>
<li>ç”Ÿå‘½å‘¨æœŸé’©å­</li>
</ul>
<h4 data-id="heading-7">@nestjs/platform-express</h4>
<p>Express å¹³å°é€‚é…å™¨ï¼Œå°† NestJS çš„æŠ½è±¡æ˜ å°„åˆ° Expressã€‚</p>
<h3 data-id="heading-8">æ ¸å¿ƒæ¦‚å¿µ</h3>
<h4 data-id="heading-9">1. æ¨¡å— (Module)</h4>
<p>æ¨¡å—æ˜¯ç»„ç»‡ä»£ç çš„åŸºæœ¬å•å…ƒï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@Module</span>({
  <span class="hljs-attr">imports</span>: [<span class="hljs-title class_">DatabaseModule</span>],
  <span class="hljs-attr">controllers</span>: [<span class="hljs-title class_">CatsController</span>],
  <span class="hljs-attr">providers</span>: [<span class="hljs-title class_">CatsService</span>],
  <span class="hljs-attr">exports</span>: [<span class="hljs-title class_">CatsService</span>],
})
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CatsModule</span> {}
</code></pre>
<h4 data-id="heading-10">2. æ§åˆ¶å™¨ (Controller)</h4>
<p>å¤„ç† HTTP è¯·æ±‚ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@Controller</span>(<span class="hljs-string">'cats'</span>)
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CatsController</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">private</span> catsService: CatsService</span>) {}

  <span class="hljs-meta">@Get</span>()
  <span class="hljs-title function_">findAll</span>(): <span class="hljs-title class_">Cat</span>[] {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">catsService</span>.<span class="hljs-title function_">findAll</span>();
  }
}
</code></pre>
<h4 data-id="heading-11">3. æä¾›è€… (Provider)</h4>
<p>å¯æ³¨å…¥çš„æœåŠ¡ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@Injectable</span>()
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CatsService</span> {
  <span class="hljs-keyword">private</span> <span class="hljs-attr">cats</span>: <span class="hljs-title class_">Cat</span>[] = [];

  <span class="hljs-title function_">findAll</span>(): <span class="hljs-title class_">Cat</span>[] {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">cats</span>;
  }
}
</code></pre>
<h4 data-id="heading-12">4. ä¸­é—´ä»¶ (Middleware)</h4>
<p>è¯·æ±‚å¤„ç†ç®¡é“ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@Injectable</span>()
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LoggerMiddleware</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">NestMiddleware</span> {
  <span class="hljs-title function_">use</span>(<span class="hljs-params">req: Request, res: Response, next: NextFunction</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Request...'</span>);
    <span class="hljs-title function_">next</span>();
  }
}
</code></pre>
<h4 data-id="heading-13">5. å®ˆå« (Guard)</h4>
<p>æƒé™æ§åˆ¶ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@Injectable</span>()
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AuthGuard</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">CanActivate</span> {
  <span class="hljs-title function_">canActivate</span>(<span class="hljs-attr">context</span>: <span class="hljs-title class_">ExecutionContext</span>): <span class="hljs-built_in">boolean</span> {
    <span class="hljs-keyword">const</span> request = context.<span class="hljs-title function_">switchToHttp</span>().<span class="hljs-title function_">getRequest</span>();
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">validateRequest</span>(request);
  }
}
</code></pre>
<h4 data-id="heading-14">6. ç®¡é“ (Pipe)</h4>
<p>æ•°æ®è½¬æ¢å’ŒéªŒè¯ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@Injectable</span>()
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ValidationPipe</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">PipeTransform</span> {
  <span class="hljs-title function_">transform</span>(<span class="hljs-params">value: <span class="hljs-built_in">any</span>, metadata: ArgumentMetadata</span>) {
    <span class="hljs-keyword">return</span> value;
  }
}
</code></pre>
<h4 data-id="heading-15">7. æ‹¦æˆªå™¨ (Interceptor)</h4>
<p>AOP åˆ‡é¢ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@Injectable</span>()
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LoggingInterceptor</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">NestInterceptor</span> {
  <span class="hljs-title function_">intercept</span>(<span class="hljs-attr">context</span>: <span class="hljs-title class_">ExecutionContext</span>, <span class="hljs-attr">next</span>: <span class="hljs-title class_">CallHandler</span>): <span class="hljs-title class_">Observable</span>&lt;<span class="hljs-built_in">any</span>&gt; {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Before...'</span>);
    <span class="hljs-keyword">return</span> next.<span class="hljs-title function_">handle</span>().<span class="hljs-title function_">pipe</span>(<span class="hljs-title function_">tap</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'After...'</span>)));
  }
}
</code></pre>
<h3 data-id="heading-16">è¯·æ±‚å¤„ç†æµç¨‹</h3>
<pre><code class="hljs language-scss" lang="scss">Request
   â†“
Middleware
   â†“
Guards
   â†“
Interceptors (before)
   â†“
Pipes
   â†“
Route Handler
   â†“
Interceptors (after)
   â†“
Exception Filters
   â†“
Response
</code></pre>
<h3 data-id="heading-17">ç³»åˆ—æ–‡ç« </h3>
<p>æœ¬ç³»åˆ—å°†æ·±å…¥åˆ†æ NestJS æºç ï¼š</p>
<ol>
<li><strong>é¡¹ç›®ä»‹ç»</strong>ï¼ˆæœ¬æ–‡ï¼‰- äº†è§£é¡¹ç›®ç»“æ„å’Œæ ¸å¿ƒæ¦‚å¿µ</li>
<li><strong>æ¶æ„æ€»è§ˆ</strong> - NestFactory å¯åŠ¨æµç¨‹</li>
<li><strong>ä¾èµ–æ³¨å…¥</strong> - IoC å®¹å™¨å’Œ Injector å®ç°</li>
<li><strong>æ¨¡å—ç³»ç»Ÿ</strong> - Module æ‰«æå’ŒåŠ è½½</li>
<li><strong>è£…é¥°å™¨åŸç†</strong> - å…ƒæ•°æ®å­˜å‚¨æœºåˆ¶</li>
<li><strong>è·¯ç”±ç³»ç»Ÿ</strong> - è¯·æ±‚åˆ†å‘å’Œå¤„ç†</li>
<li><strong>ä¸­é—´ä»¶æœºåˆ¶</strong> - ä¸­é—´ä»¶æ³¨å†Œå’Œæ‰§è¡Œ</li>
<li><strong>AOP å®ç°</strong> - Guardã€Pipeã€Interceptor</li>
</ol>
<h3 data-id="heading-18">è°ƒè¯•æŠ€å·§</h3>
<h4 data-id="heading-19">1. ä½¿ç”¨ç¤ºä¾‹é¡¹ç›®</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">cd</span> sample/01-cats-app
npm install
npm run start:dev
</code></pre>
<h4 data-id="heading-20">2. æ–­ç‚¹è°ƒè¯•</h4>
<p>åœ¨ VS Code ä¸­é…ç½® launch.jsonï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"node"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"request"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"launch"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Debug Nest"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"runtimeArgs"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"-r"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"ts-node/register"</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"args"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"${workspaceFolder}/sample/01-cats-app/src/main.ts"</span><span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h4 data-id="heading-21">3. å…³é”®æ–­ç‚¹ä½ç½®</h4>






























<table><thead><tr><th>åœºæ™¯</th><th>æ–‡ä»¶</th><th>å‡½æ•°</th></tr></thead><tbody><tr><td>åº”ç”¨åˆ›å»º</td><td><code>core/nest-factory.ts</code></td><td><code>create</code></td></tr><tr><td>æ¨¡å—æ‰«æ</td><td><code>core/scanner.ts</code></td><td><code>scan</code></td></tr><tr><td>ä¾èµ–æ³¨å…¥</td><td><code>core/injector/injector.ts</code></td><td><code>loadInstance</code></td></tr><tr><td>è·¯ç”±æ³¨å†Œ</td><td><code>core/router/router-explorer.ts</code></td><td><code>explore</code></td></tr></tbody></table>
<h3 data-id="heading-22">ä¸‹ä¸€æ­¥</h3>
<p>ç¯å¢ƒå‡†å¤‡å¥½äº†ï¼Œä¸‹ä¸€ç¯‡æˆ‘ä»¬å°†åˆ†æ NestJS çš„å¯åŠ¨æµç¨‹ï¼Œçœ‹çœ‹ <code>NestFactory.create()</code> èƒŒåå‘ç”Ÿäº†ä»€ä¹ˆã€‚</p>
<hr/>
<blockquote>
<p>ğŸ“¦ æºç åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fnestjs%2Fnest" target="_blank" title="https://github.com/nestjs/nest" ref="nofollow noopener noreferrer">github.com/nestjs/nest</a></p>
<p>ä¸‹ä¸€ç¯‡ï¼šNestJS æ¶æ„æ€»è§ˆ</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[LogicFlow äº¤äº’æ–°ä½“éªŒï¼šè®©é”šç‚¹"æ´»"èµ·æ¥ï¼Œé¼ æ ‡è·ŸéšåŠ¨æ•ˆå®æˆ˜ï¼ğŸ§²]]></title>    <link>https://juejin.cn/post/7589107312112648201</link>    <guid>https://juejin.cn/post/7589107312112648201</guid>    <pubDate>2025-12-29T10:25:26.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589107312112648201" data-draft-id="7588799600166830090" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="LogicFlow äº¤äº’æ–°ä½“éªŒï¼šè®©é”šç‚¹&quot;æ´»&quot;èµ·æ¥ï¼Œé¼ æ ‡è·ŸéšåŠ¨æ•ˆå®æˆ˜ï¼ğŸ§²"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,Vue.js"/> <meta itemprop="datePublished" content="2025-12-29T10:25:26.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ©™æŸäºº"/> <meta itemprop="url" content="https://juejin.cn/user/1908407919184670"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            LogicFlow äº¤äº’æ–°ä½“éªŒï¼šè®©é”šç‚¹"æ´»"èµ·æ¥ï¼Œé¼ æ ‡è·ŸéšåŠ¨æ•ˆå®æˆ˜ï¼ğŸ§²
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1908407919184670/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ©™æŸäºº
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T10:25:26.000Z" title="Mon Dec 29 2025 10:25:26 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252b3a}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px;color:#5e7ce0}.markdown-body h1{font-size:24px;margin-bottom:5px;margin-top:80px;position:relative;text-align:center}.markdown-body h2{font-size:20px;padding-bottom:12px;border-bottom:1px solid #dfe1e6}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h4{font-size:16px;margin-top:30px}.markdown-body h5{font-size:14px;margin-top:20px}.markdown-body h6{font-size:14px;margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #dfe1e6;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#ffeeed;color:#c73636;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#252b3a;background:#f8f8f8}.markdown-body a{position:relative;text-decoration:none;color:#5e7ce0;padding-right:18px;padding-bottom:4px}.markdown-body a[href^=http]:after{position:absolute;display:inline-block;width:16px;height:16px;margin-left:2px;margin-top:6px;content:"";background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAIRlWElmTU0AKgAAAAgABQESAAMAAAABAAEAAAEaAAUAAAABAAAASgEbAAUAAAABAAAAUgEoAAMAAAABAAIAAIdpAAQAAAABAAAAWgAAAAAAAABIAAAAAQAAAEgAAAABAAOgAQADAAAAAQABAACgAgAEAAAAAQAAACCgAwAEAAAAAQAAACAAAAAAX7wP8AAAAAlwSFlzAAALEwAACxMBAJqcGAAAAVlpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDYuMC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KGV7hBwAABWVJREFUWAnlVktsVFUY/s85997pC9BOTKxRWnEKsXWlxjWJj0RWJjrFAAXjAlewYWOkgauACVu7a2IiNUEyExM3yoZE3Wmi7qgPJthJBDE6JUNpO3Mf5/j95/bOTOcBlBgXejJ37rn/Of/7O/9/iP7vQ/zTAcjnC4ry+a5ii1OkiYTpuvjvEc0Gp51uivP+ZW+QBuSW4QjW5rptAa1Ey0uOGKOxwPetVyafN6p/52/PkNBbjdAhGaGEpMRjLZTryB8+9MUSYSGNRIcBvm8kBAY9tHYlHz78nTs392xIkwv9FA3Oe33bdoX1ZZKOS0bH0CXI6RugYLW6BwIu5gskkQ4sEG0wYF25PjBzbZfSYY6kDLUmWMt7FR7Lw3xYUkaTdjxHfTPnPwav0iEGYADVa9XIRIEyxrAA0jIQxgFL22gYwF7A8/DAzNVdksJvJaTEUZ2kYnZWziN5s1ADPHneEIXByotYuMSrf9JEbbsuv7VcvbaKML8plXtQR0EdIYDqWEmtOgAomZFH8EjWSnek2ulmtljljttHbmaIHCCCHzd9MjwfsmscBeZH9Jyd10nMvz92UQrtCBKvMF06mQy0SiEdRMEGg8mN0YjAlgoDDkPrMI5qJKSkKKydpbB2CZjJkhIBvOBw2CGQgii85bpx//dMqFRKam5uvH7w+K97oe+Cl0HO68uIBH0qyEzpOMwIbZIcFq0I+9cwoElizCjk2KFI1y7Nnx614W1db58fOXIlMzs7Xn/jeDmvBV2Q0mXjGf554O/m4LZHp2N8r61WPMvLZWLdiC4GMAk5BjeeB5lhv39l6+BIbu3m760hXMDKBD08XBKzR8fr04nygnIypOOAJUx/fHrsi0Mnys+vVK+V4VUohaiyPCo2Q9DFALvF/ikw8WS4QvVZALS5ksw47/7R8ejgTPk1UFqU6/3zp8bOM7B/kdu/fkguPGU5JibW+F0sTjWOUw8DklRrg4BiLGeBqbaRLxjlT4no0InFV402RcftJz41cH/f/JnHP3kZaaF6VX/liwist9vYG5+NU9Cg3MNkt/+lU5wS8fTxq3mc7ILjDlAE4CJpe89BOWPiIjBhi9O6PI4G1jsc6RGB3lZwmS76k8H0zOKTkFboG8jS2krFKCX2fvTeaPHIBwAkMHHgncURnL3nuCSnxSopdIzN5th0BIonJ0Lf9yUA9iMkzdRWl3BixOusfDcwQVcS4UKIFwYfGPnM8wY/DyP9NFMXaTE5BU39tGkDgGZz+fJJG0oYcSaOafLcqdECY4LzfSObSzyUOgxqtyisr8SSNOOAkubWoh3TTaeA2YtFEXPnm5x81/j+6MI6JqyS25WSNU6hbCMKHG84marJbdR+vwakRhQLRuQpbzHRLjmpmijI+OmWCtq+LzWtnX5v30gHSsqmWne74DtiACi2+Wz0iXbuLt9D2cDyoPEkWOiyp5XUIwLMi/wJY1FbH5B9ONtdC1KrsD/Q0MCQAS0wccILORDW25amAeOtooAj/KQxfzF17uwTSQ1v3dJ7jnLINwdZYRDa4tPU0sHVXFo/vxFF5BqFqxRfOmgPCk4ft2NgKTCy2Y47JIEg+MIhjYsLy5I25qUYTQlCjMRHsr/UwdYwIK33UO1J5fFNB9XNO6akcywJofVmXQDP2wfrSPcI2xG5BSs3I+IosHr4EtvO1TDAu16xHQq5+ykMblfRXLbhEoFIdDTBdhldvzl+3CMg60ZktI2vNzLW6IIp0waLklot9L63yzuUp8dJd7bglPFe3hIXstBEP58/s6Ocyr4rH2+866ZNbriTzA0RSOWCwakMl1QJgculxPt8Z7O5GLdtW6bvU8R/nO1vb+hMExVAVtEAAAAASUVORK5CYII=");background-size:100%}.markdown-body a:active,.markdown-body a:hover{border-bottom:2px solid #5e7ce0}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #5e7ce0;border-spacing:0}.markdown-body thead{color:#fff;text-align:left}.markdown-body thead tr{background:#5e7ce0}.markdown-body thead th{border-bottom:1px solid #dfe1e6}.markdown-body tr{background-color:#fff}.markdown-body tr:nth-child(2n){background-color:#f2f5fc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#252b3a;padding:1px 23px;margin:22px 0;border-left:4px solid #5e7ce0;background-color:#f2f5fc}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{padding-left:10px;margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#5e7ce0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body ul li::marker{content:"â€¢";color:#5e7ce0}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}.markdown-body input[type=checkbox]:before{display:inline-block;width:16px;height:16px;content:"";background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAABCCAYAAADjVADoAAAK2GlDQ1BJQ0MgUHJvZmlsZQAASImVlwdUU9kWhs+96Y0WiHRC70gngJTQQxGkg6iEJJBQYkgIKmJnUMGxoCKCZcSKKFhGQMaCWLANAopdJ8igoD4HC6Ki5t3AI8zMW++99fZaJ+dbO/vss/e55671XwAoYWyRKBdWAyBPWCCODQ2gJ6ek0nHPAQRgQAI2wIHNkYiYMTGRALHJ+a/28S4Sjdhte0Wuf///v5oGlyfhAAClIZzBlXDyEG5DxkuOSFwAAOoI4jddUCBScBfCmmKkQIR/V3DWBH9ScMY4o8njMfGxgQjTAcCT2WxxFgBkO8RPL+RkIXnIih4chVyBEOFihH05fDYX4TMI2+XlzVfwIMJWSLwIAApyOoCR8aecWX/Jn6HMz2ZnKXmir3HDBwkkolz2ov/zaP635eVKJ/ewQAaZLw6LVeyHnN/9nPkRShZmzIyeZAF3oiYF86VhCZPMkQSmTjKXHRShXJs7M3KSMwUhLGWeAlb8JPMkwXGTLJ4fq9wrUxzInGS2eHxfIsIyaU6C0s/nsZT5i/jxSZNcKEicOcmSnLiIqZhApV8sjVXWzxOGBkztG6LsPU/yp34FLOXaAn58mLJ39lT9PCFzKqckWVkblxcUPBWToIwXFQQo9xLlxijjebmhSr+kME65tgC5nFNrY5RnmM0Oj5lkIABRgA04dNVJAqCAt7BA0UjgfNEisSCLX0BnIm8bj84Schzs6M6Ozs4AKN7dievwnjb+TkK061O+NYjHr10ul5+e8oUi9/i4KfJYbk35LCsAUNUD4Op+jlRcOOFDK34wyNNTBZpABxgCU2AF7IEzcAfewB8Eg3AQDeJBCpiL1MoHeUAMFoBisAKUgnKwEWwF1WA32AsOgaPgBGgGZ8AFcAXcAF2gFzwCMjAAXoFh8BGMQRCEgygQFdKBjCBzyBZyhhiQLxQMRUKxUAqUDmVBQkgKFUOroHKoAqqG9kB10HHoNHQBugZ1Qw+gPmgIegd9gVEwGdaEDWALeDrMgJlwBBwPz4Gz4Hy4CC6B18NVcC18BG6CL8A34F5YBr+CR1AARULRUMYoexQDFYiKRqWiMlFi1FJUGaoSVYtqQLWiOlC3UTLUa9RnNBZNRdPR9mhvdBg6Ac1B56OXotehq9GH0E3oS+jb6D70MPo7hoLRx9hivDAsTDImC7MAU4qpxBzAnMJcxvRiBjAfsVgsDWuJ9cCGYVOw2djF2HXYndhGbBu2G9uPHcHhcDo4W5wPLhrHxhXgSnHbcUdw53E9uAHcJzwJb4R3xofgU/FC/Ep8Jf4w/hy+B/8CP0ZQI5gTvAjRBC5hEWEDYR+hlXCLMEAYI6oTLYk+xHhiNnEFsYrYQLxMfEx8TyKRTEiepFkkAWk5qYp0jHSV1Ef6TNYg25ADyWlkKXk9+SC5jfyA/J5CoVhQ/CmplALKekod5SLlKeWTClXFQYWlwlVZplKj0qTSo/JGlaBqrspUnatapFqpelL1luprNYKahVqgGlttqVqN2mm1e2oj6lR1J/Vo9Tz1deqH1a+pD2rgNCw0gjW4GiUaezUuavRTUVRTaiCVQ11F3Ue9TB3QxGpaarI0szXLNY9qdmoOa2louWolai3UqtE6qyWjoWgWNBYtl7aBdoJ2l/ZlmsE05jTetLXTGqb1TBvV1tP21+Zpl2k3avdqf9Gh6wTr5Ohs0mnWeaKL1rXRnaW7QHeX7mXd13qaet56HL0yvRN6D/VhfRv9WP3F+nv1b+qPGBgahBqIDLYbXDR4bUgz9DfMNtxieM5wyIhq5GskMNpidN7oJV2LzqTn0qvol+jDxvrGYcZS4z3GncZjJpYmCSYrTRpNnpgSTRmmmaZbTNtNh82MzKLMis3qzR6aE8wZ5nzzbeYd5qMWlhZJFqstmi0GLbUtWZZFlvWWj60oVn5W+Va1VnessdYM6xzrndZdNrCNmw3fpsbmli1s624rsN1p222HsfO0E9rV2t2zJ9sz7Qvt6+37HGgOkQ4rHZod3kw3m546fdP0junfHd0ccx33OT5y0nAKd1rp1Or0ztnGmeNc43zHheIS4rLMpcXlrautK891l+t9N6pblNtqt3a3b+4e7mL3BvchDzOPdI8dHvcYmowYxjrGVU+MZ4DnMs8znp+93L0KvE54/eFt753jfdh7cIblDN6MfTP6fUx82D57fGS+dN903598ZX7Gfmy/Wr9n/qb+XP8D/i+Y1sxs5hHmmwDHAHHAqYDRQK/AJYFtQaig0KCyoM5gjeCE4OrgpyEmIVkh9SHDoW6hi0PbwjBhEWGbwu6xDFgcVh1rONwjfEn4pQhyRFxEdcSzSJtIcWRrFBwVHrU56vFM85nCmc3RIJoVvTn6SYxlTH7ML7Ows2Jm1cx6HusUWxzbEUeNmxd3OO5jfED8hvhHCVYJ0oT2RNXEtMS6xNGkoKSKJFny9OQlyTdSdFMEKS2puNTE1AOpI7ODZ2+dPZDmllaadneO5ZyFc67N1Z2bO/fsPNV57Hkn0zHpSemH07+yo9m17JEMVsaOjGFOIGcb5xXXn7uFO8Tz4VXwXmT6ZFZkDmb5ZG3OGuL78Sv5rwWBgmrB2+yw7N3ZoznROQdz5LlJuY15+Lz0vNNCDWGO8NJ8w/kL53eLbEWlIlm+V/7W/GFxhPiABJLMkbQUaCIi6abUSvqDtK/Qt7Cm8NOCxAUnF6ovFC68uchm0dpFL4pCivYvRi/mLG4vNi5eUdy3hLlkz1JoacbS9mWmy0qWDSwPXX5oBXFFzopfVzqurFj5YVXSqtYSg5LlJf0/hP5QX6pSKi69t9p79e416DWCNZ1rXdZuX/u9jFt2vdyxvLL86zrOuus/Ov1Y9aN8feb6zg3uG3ZtxG4Ubry7yW/ToQr1iqKK/s1Rm5u20LeUbfmwdd7Wa5Wulbu3EbdJt8mqIqtatptt37j9azW/urcmoKZxh/6OtTtGd3J39uzy39Ww22B3+e4vPwl+ur8ndE9TrUVt5V7s3sK9z/cl7uvYz9hfd0D3QPmBbweFB2WHYg9dqvOoqzusf3hDPVwvrR86knak62jQ0ZYG+4Y9jbTG8mPgmPTYy+Ppx++eiDjRfpJxsuFn8593nKKeKmuCmhY1DTfzm2UtKS3dp8NPt7d6t576xeGXg2eMz9Sc1Tq74RzxXMk5+fmi8yNtorbXF7Iu9LfPa390MfninUuzLnVejrh89UrIlYsdzI7zV32unrnmde30dcb15hvuN5puut089avbr6c63Tubbnncauny7GrtntF9rsev58LtoNtX7rDu3Oid2dt9N+Hu/Xtp92T3ufcHH+Q+ePuw8OHYo+WPMY/Lnqg9qXyq/7T2N+vfGmXusrN9QX03n8U9e9TP6X/1u+T3rwMlzynPK18YvagbdB48MxQy1PVy9suBV6JXY69L/6H+jx1vrN78/If/HzeHk4cH3orfyt+te6/z/uAH1w/tIzEjTz/mfRwbLfuk8+nQZ8bnji9JX16MLfiK+1r1zfpb6/eI74/leXK5iC1mj0sBFDLgzEwA3h1EtHEKAFRElxNnT2jrcYMmvgfGCfwnntDf4+YOQAMyKWQR0x+Akwo5i8wqyKyQRPH+AHZxUY5/mSTTxXkiFxlRlphPcvl7AwBwrQB8E8vlYzvl8m/7kGIfANCWP6HpFYZFtHyD3vJRg6LbPe3g7zah9//U499noKjAFfx9/ieoZhkWVvYkwwAAAGxlWElmTU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAIdpAAQAAAABAAAATgAAAAAAAACQAAAAAQAAAJAAAAABAAKgAgAEAAAAAQAAAEKgAwAEAAAAAQAAAEIAAAAAgodoEQAAAAlwSFlzAAAWJQAAFiUBSVIk8AAAAhRJREFUeAHtnLEuBFEUhs9cu7JCskEhIrZAgYZGoREPwBuIygOoPITKA6jEG/AAolFoaFCgICIKZBNiY8Pyz5rNOWe9wNz5T7N3Z2eT/b/7zZlpziat3xKWBDJoEyh5EDd3DTk5r8vV7Yc8vzbl6zvfwvSERIYHyzI90SeLc1WZrFV85PR9oi+N/YMnOT6t/3tiLAeXFqqytjrSFacDYmfvQS6u37tOiPHA7FS/bK6PmWhpj4AJRYGA9MiKzLpK6An+cqiNVmRleUhArrec6PNzt/5sttLgh0cvcvfY6Px+ZNY9I6Ax6gKErY1xmZ8ZyD0E5MJGIgsyIZsunT3g7qALJuTdAp0nWyMTsunS2QNukbpwOcRaPpvOHvxzQow2ZBvrs+nsfLL8o0QQBJFdMO1XGkEjaIQlQCMsD/YIGkEjLAEaYXmwR9AIGmEJ0AjLgz2CRtAIS4BGWB7sETSCRlgCNMLyYI+gETTCEqARlgd7BI2gEZYAjbA82CNoBI2wBGiE5cEeQSNohCVAIywP9ggaQSMsARphebBH0AgaYQnQCMsjYC5SF2agYi2fTWcPGA7VFfO0n8+mswdMyOrCNJwnpz/P6xqZkE2Xzh4w8qcLI4Hbu/dydvkWBRAAQBZk0uOOyKyzp5PARRiF1puNtR+NTh+oMCvtJ+D8F2N6j6x+PrwzG46gRTDDm5BtsAGBg0X924Qfj7i23p7HNgQAAAAASUVORK5CYII=");background-size:100%;position:relative;right:2px;top:-5px}.markdown-body input[type=checkbox]:checked:before{background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAABCCAYAAADjVADoAAAK2GlDQ1BJQ0MgUHJvZmlsZQAASImVlwdUU9kWhs+96Y0WiHRC70gngJTQQxGkg6iEJJBQYkgIKmJnUMGxoCKCZcSKKFhGQMaCWLANAopdJ8igoD4HC6Ki5t3AI8zMW++99fZaJ+dbO/vss/e55671XwAoYWyRKBdWAyBPWCCODQ2gJ6ek0nHPAQRgQAI2wIHNkYiYMTGRALHJ+a/28S4Sjdhte0Wuf///v5oGlyfhAAClIZzBlXDyEG5DxkuOSFwAAOoI4jddUCBScBfCmmKkQIR/V3DWBH9ScMY4o8njMfGxgQjTAcCT2WxxFgBkO8RPL+RkIXnIih4chVyBEOFihH05fDYX4TMI2+XlzVfwIMJWSLwIAApyOoCR8aecWX/Jn6HMz2ZnKXmir3HDBwkkolz2ov/zaP635eVKJ/ewQAaZLw6LVeyHnN/9nPkRShZmzIyeZAF3oiYF86VhCZPMkQSmTjKXHRShXJs7M3KSMwUhLGWeAlb8JPMkwXGTLJ4fq9wrUxzInGS2eHxfIsIyaU6C0s/nsZT5i/jxSZNcKEicOcmSnLiIqZhApV8sjVXWzxOGBkztG6LsPU/yp34FLOXaAn58mLJ39lT9PCFzKqckWVkblxcUPBWToIwXFQQo9xLlxijjebmhSr+kME65tgC5nFNrY5RnmM0Oj5lkIABRgA04dNVJAqCAt7BA0UjgfNEisSCLX0BnIm8bj84Schzs6M6Ozs4AKN7dievwnjb+TkK061O+NYjHr10ul5+e8oUi9/i4KfJYbk35LCsAUNUD4Op+jlRcOOFDK34wyNNTBZpABxgCU2AF7IEzcAfewB8Eg3AQDeJBCpiL1MoHeUAMFoBisAKUgnKwEWwF1WA32AsOgaPgBGgGZ8AFcAXcAF2gFzwCMjAAXoFh8BGMQRCEgygQFdKBjCBzyBZyhhiQLxQMRUKxUAqUDmVBQkgKFUOroHKoAqqG9kB10HHoNHQBugZ1Qw+gPmgIegd9gVEwGdaEDWALeDrMgJlwBBwPz4Gz4Hy4CC6B18NVcC18BG6CL8A34F5YBr+CR1AARULRUMYoexQDFYiKRqWiMlFi1FJUGaoSVYtqQLWiOlC3UTLUa9RnNBZNRdPR9mhvdBg6Ac1B56OXotehq9GH0E3oS+jb6D70MPo7hoLRx9hivDAsTDImC7MAU4qpxBzAnMJcxvRiBjAfsVgsDWuJ9cCGYVOw2djF2HXYndhGbBu2G9uPHcHhcDo4W5wPLhrHxhXgSnHbcUdw53E9uAHcJzwJb4R3xofgU/FC/Ep8Jf4w/hy+B/8CP0ZQI5gTvAjRBC5hEWEDYR+hlXCLMEAYI6oTLYk+xHhiNnEFsYrYQLxMfEx8TyKRTEiepFkkAWk5qYp0jHSV1Ef6TNYg25ADyWlkKXk9+SC5jfyA/J5CoVhQ/CmplALKekod5SLlKeWTClXFQYWlwlVZplKj0qTSo/JGlaBqrspUnatapFqpelL1luprNYKahVqgGlttqVqN2mm1e2oj6lR1J/Vo9Tz1deqH1a+pD2rgNCw0gjW4GiUaezUuavRTUVRTaiCVQ11F3Ue9TB3QxGpaarI0szXLNY9qdmoOa2louWolai3UqtE6qyWjoWgWNBYtl7aBdoJ2l/ZlmsE05jTetLXTGqb1TBvV1tP21+Zpl2k3avdqf9Gh6wTr5Ohs0mnWeaKL1rXRnaW7QHeX7mXd13qaet56HL0yvRN6D/VhfRv9WP3F+nv1b+qPGBgahBqIDLYbXDR4bUgz9DfMNtxieM5wyIhq5GskMNpidN7oJV2LzqTn0qvol+jDxvrGYcZS4z3GncZjJpYmCSYrTRpNnpgSTRmmmaZbTNtNh82MzKLMis3qzR6aE8wZ5nzzbeYd5qMWlhZJFqstmi0GLbUtWZZFlvWWj60oVn5W+Va1VnessdYM6xzrndZdNrCNmw3fpsbmli1s624rsN1p222HsfO0E9rV2t2zJ9sz7Qvt6+37HGgOkQ4rHZod3kw3m546fdP0junfHd0ccx33OT5y0nAKd1rp1Or0ztnGmeNc43zHheIS4rLMpcXlrautK891l+t9N6pblNtqt3a3b+4e7mL3BvchDzOPdI8dHvcYmowYxjrGVU+MZ4DnMs8znp+93L0KvE54/eFt753jfdh7cIblDN6MfTP6fUx82D57fGS+dN903598ZX7Gfmy/Wr9n/qb+XP8D/i+Y1sxs5hHmmwDHAHHAqYDRQK/AJYFtQaig0KCyoM5gjeCE4OrgpyEmIVkh9SHDoW6hi0PbwjBhEWGbwu6xDFgcVh1rONwjfEn4pQhyRFxEdcSzSJtIcWRrFBwVHrU56vFM85nCmc3RIJoVvTn6SYxlTH7ML7Ows2Jm1cx6HusUWxzbEUeNmxd3OO5jfED8hvhHCVYJ0oT2RNXEtMS6xNGkoKSKJFny9OQlyTdSdFMEKS2puNTE1AOpI7ODZ2+dPZDmllaadneO5ZyFc67N1Z2bO/fsPNV57Hkn0zHpSemH07+yo9m17JEMVsaOjGFOIGcb5xXXn7uFO8Tz4VXwXmT6ZFZkDmb5ZG3OGuL78Sv5rwWBgmrB2+yw7N3ZoznROQdz5LlJuY15+Lz0vNNCDWGO8NJ8w/kL53eLbEWlIlm+V/7W/GFxhPiABJLMkbQUaCIi6abUSvqDtK/Qt7Cm8NOCxAUnF6ovFC68uchm0dpFL4pCivYvRi/mLG4vNi5eUdy3hLlkz1JoacbS9mWmy0qWDSwPXX5oBXFFzopfVzqurFj5YVXSqtYSg5LlJf0/hP5QX6pSKi69t9p79e416DWCNZ1rXdZuX/u9jFt2vdyxvLL86zrOuus/Ov1Y9aN8feb6zg3uG3ZtxG4Ubry7yW/ToQr1iqKK/s1Rm5u20LeUbfmwdd7Wa5Wulbu3EbdJt8mqIqtatptt37j9azW/urcmoKZxh/6OtTtGd3J39uzy39Ww22B3+e4vPwl+ur8ndE9TrUVt5V7s3sK9z/cl7uvYz9hfd0D3QPmBbweFB2WHYg9dqvOoqzusf3hDPVwvrR86knak62jQ0ZYG+4Y9jbTG8mPgmPTYy+Ppx++eiDjRfpJxsuFn8593nKKeKmuCmhY1DTfzm2UtKS3dp8NPt7d6t576xeGXg2eMz9Sc1Tq74RzxXMk5+fmi8yNtorbXF7Iu9LfPa390MfninUuzLnVejrh89UrIlYsdzI7zV32unrnmde30dcb15hvuN5puut089avbr6c63Tubbnncauny7GrtntF9rsev58LtoNtX7rDu3Oid2dt9N+Hu/Xtp92T3ufcHH+Q+ePuw8OHYo+WPMY/Lnqg9qXyq/7T2N+vfGmXusrN9QX03n8U9e9TP6X/1u+T3rwMlzynPK18YvagbdB48MxQy1PVy9suBV6JXY69L/6H+jx1vrN78/If/HzeHk4cH3orfyt+te6/z/uAH1w/tIzEjTz/mfRwbLfuk8+nQZ8bnji9JX16MLfiK+1r1zfpb6/eI74/leXK5iC1mj0sBFDLgzEwA3h1EtHEKAFRElxNnT2jrcYMmvgfGCfwnntDf4+YOQAMyKWQR0x+Akwo5i8wqyKyQRPH+AHZxUY5/mSTTxXkiFxlRlphPcvl7AwBwrQB8E8vlYzvl8m/7kGIfANCWP6HpFYZFtHyD3vJRg6LbPe3g7zah9//U499noKjAFfx9/ieoZhkWVvYkwwAAAGxlWElmTU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAIdpAAQAAAABAAAATgAAAAAAAACQAAAAAQAAAJAAAAABAAKgAgAEAAAAAQAAAEKgAwAEAAAAAQAAAEIAAAAAgodoEQAAAAlwSFlzAAAWJQAAFiUBSVIk8AAABMtJREFUeAHtXM2KFDEQzrQKruIu4mEXRFlUVLz4A4K7B99AcO8io0/gwQfxDVzFuwu+gQf34EG8iOAPKAh6EFlBFMSf/qa2uqszlVR6ZtYxM5PDJNVVSer78nU6KrHzpyxuVlwx44AY2O0T8eb9D7f5fMu9fPvdff7y0/36nbdgdhUdd+jgHnf62JxbObvgjh/d60Pu2R35ajx49Mk9frqlBk7Kw8sXF9y1K4t9cCoi7tz/4F68/tYXMIkPzpzY725dP9yA1tsjoIRpIQHogRWYZSmwJ4Reh06nI2Nd7rYEA8zAzqXAxhgq/pc1d9vHKbEX+Dr4JbzypJDc/YxXYi/wifRLeOXpU5q7n/FK7EXsnBBeeRoqd7/EHj1ZhleeiMjdz8pArRKR+0pb+UsCuK0SkftKW/kzeFmrRHCAxWzufsaJOkqExWzufpOI8EpP1jnCJCK80pN1jjCJ4ICwMigidz/jRD3bI7bZUInIfaWt/KUSuK0SEd4jqFvufgYva5UIDrCYzd3POFFHifhfV/7k8lwPw7D5mUSEV3r854ju2pK7ffOIWzk/X+Go803Lr+ooGqoiwkyP9xzRXVt0q9sE3CgJYTLqfNPyE/irpkoEe2um6ck4bSiBSeD8JBl41jY/Hgd1lIiaaeoyLlsjgUGAjEH3DB4DtUpEW2Z3Mj5GAgA8efbVvXpX/200nln5IMYvKhHDrvylcwdc9+pSNdeg46WQsP7wo2s7fpWYaPT926fw9ZiVk4BpywYJkGuvlJs4EuWS0p/HTyHh3kbzH2najM85cR0lgpPiYMtukFB26m1u5Ua+vkFkWP3Zn0KCJDg1Px6f42Wtvhrhdyz8ncanrFKCmGH1wrwDMCrh/uxPIUFTAvdHbeVPsc1fVRE+c7Ud/k6fWt7XHFlYqcqQ5wTRvWpiY4wrIZwfDUL+akDRUBXB/jCzFCH9SHCzTDRUmsro7z+cEvrHwxOZn2ZTL/pVFcEBtRLoiWXfxQ5ehvoHHx4vpIwUEuJKSMvPz5/zQq0qwmIy5m+rjBQSwnsCQYnlgwjfT72av6oifOba2qnKcOXeGVIP0rT3BALTNr8mBWSpRHAgmJSTtLGhDHwj+A9GPCbX2DNiBSRoShg0H8zl5y/njxIhJ0WntralDJmIbO+UEvz85Zwt9wj7HIDB5Ttp7RkyGbRDSqC49vOjX50P9aexmr+qInzmajvtO13H02SpyrCVMNj8dT7/4BwByDXzRIC0LWXEldA/njVfip9GpV9VERxQM0lPhrVDyrCVMJr5/fwZJ+qWewR1lSuNJ21sXxnjVgIhck5VhM/cqG1WBpIAMX4Z9Xz+eP58sFUiOBArLQcZpQ0CNCXt1HzA5OfPOFGrrwYHyKTwbNJsxolaJUJbKeo0mu/4uMeXBHBbJSK88qP5jo97fAYva5UIDgivHEXk7mecqKNEhFeOhsjdbxKR+0pb+UsCuK0qIveVtvJn8LJWieAAi9nc/YwTdZQIi9nc/SYR4ZWenSO2yZvgcwTuRYZKWBnUI3e/xF7gcmio5L4HWPlL7AVuyPol95W28me8EnuBa8J+sZjM3c94JfYCd6VxTXjaCjDLe+K9cwTuSuOa8LQUYPXvh1d3w0HC7JK8kMK0/rcJfwHkVMYgi4xhOgAAAABJRU5ErkJggg==");background-size:100%}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="a11y-dark">.hljs-comment,.hljs-quote{color:#d4d0ab}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#ffa07a}.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#f5ab35}.hljs-attribute{color:gold}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:#abe338}.hljs-section,.hljs-title{color:#00e0e0}.hljs-keyword,.hljs-selector-tag{color:#dcc6e0}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#2b2b2b;color:#f8f8f2}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}@media screen and (-ms-high-contrast:active){.hljs-addition,.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-comment,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-quote,.hljs-string,.hljs-symbol,.hljs-type{color:highlight}.hljs-keyword,.hljs-selector-tag{font-weight:700}}</style><h2 data-id="heading-0">å†™åœ¨å¼€å¤´</h2>
<p>Hey Juejin.cn community! ğŸ˜€</p>
<p>ä»Šæ˜¯2025å¹´12æœˆ28æ—¥ï¼Œè·ç¦»ä¸Šä¸€æ¬¡å†™æ–‡ç« ï¼Œå·²ç»è¿‡å»äº†è¿‘ä¸¤ä¸ªæœˆçš„æ—¶é—´ã€‚è¿™æ®µæ—¶é—´å…¬å¸ä¸šåŠ¡å®åœ¨ç¹å¿™ï¼Œä¸¤ä¸ªæœˆåä¸ªå‘¨æœ«é‡Œæœ‰å››ä¸ªéƒ½è´¡çŒ®ç»™äº†åŠ ç­ï¼Œå°±è¿å¹³æ—¥é‡Œçš„å·¥ä½œæ—¥ä¹Ÿè¢«ç´§å‡‘çš„ä»»åŠ¡å¡«æ»¡ï¼Œå¿™å¾—å‡ ä¹è„šä¸æ²¾åœ°ã€‚ğŸ˜µ</p>
<p>å¥½åœ¨ä¸€ç•ªåŸ‹å¤´è‹¦å¹²åï¼Œæ€»ç®—èƒ½ç¨ç¨å–˜å£æ°”äº†ã€‚æ˜¨å¤©ï¼Œå°ç¼–å»çˆ¬äº†å¹¿å·çš„å—é¦™å±±ğŸŒ„ï¼Œæœ¬ä»¥ä¸ºæ˜¯ä¸€åº§å¹³å¹³æ— å¥‡çš„"å°å±±"ï¼ˆä½äº500ç±³æµ·æ‹”çš„å±±ï¼Œå°ç¼–åŸºæœ¬èƒ½æ— å‹åŠ›é€Ÿé€šï¼Œå˜¿å˜¿ï¼‰ï¼Œæƒ³ä¸åˆ°è¿˜æœ‰æƒŠå–œï¼Œä¸Šå±±çš„è·¯æ˜¯è§„æ•´çš„ç›˜å±±å…¬è·¯ï¼Œæ²¿ç€å…¬è·¯ä¸€è·¯å‘ä¸Šï¼Œå¤§åŠä¸ªå°æ—¶å°±ç™»é¡¶äº†ï¼›ä¸‹å±±æ—¶ï¼Œæˆ‘ä»¬é€‰äº†ä¸€æ¡æ›´é‡è¶£çš„åŸå§‹å°å¾„ï¼Œæœ‰å¯†æ—ã€æœ‰é™¡å¡ï¼Œèµ°èµ·æ¥æ¯”å…¬è·¯æœ‰æ„æ€å¤šäº†ï¼Œå½“ç„¶ï¼Œè¿™æ¡è·¯çº¿æ˜¯æœ‰å‰äººèµ°è¿‡çš„ï¼Œæˆ‘ä»¬è·Ÿç€ç½‘å‹åˆ†äº«çš„è½¨è¿¹ï¼Œå†å¯¹ç…§ç€æ ‘ä¸Šç»‘ç€çš„å°çº¢å¸¦æŒ‡è·¯ï¼Œä¸€è·¯æœ‰æƒŠæ— é™©åœ°é¡ºåˆ©ä¸‹äº†å±±ã€‚ğŸ’¯ éš¾å—çš„æ˜¯ï¼Œæˆ‘ä»¬å¾—æ‰“è½¦å›å±±çš„å¦ä¸€è¾¹æ‹¿è½¦ğŸ˜…ï¼Œä½†æ•´ä½“æ¥è¯´ï¼Œè¿™æ¬¡çˆ¬å±±çš„ä½“éªŒæ•´ä½“å¾ˆæ„‰å¿«~</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bce07358cfd3498c8dd740d40eaa73d7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5qmZ5p-Q5Lq6:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767608726&amp;x-signature=JpAC9mHJ%2BI35acpbRqo2A3QpW00%3D" alt="ad2235428be6eb20735aae76471b9532.jpg" width="43%" loading="lazy"/> <img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4a25beadd3104b388e2885e04f9ef628~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5qmZ5p-Q5Lq6:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767608726&amp;x-signature=awCkhM4Jav8ynGIUvyXwRbOifgg%3D" alt="ca17f1c56d240ea424322b74dadcd4b0.jpg" width="50%" loading="lazy"/></p>
<p>è¨€å½’æ­£ä¼ ï¼Œæœ€è¿‘åŸºäº <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fdidi%2FLogicFlow" target="_blank" title="https://github.com/didi/LogicFlow" ref="nofollow noopener noreferrer">LogicFlow</a> å¼€å‘æµç¨‹å›¾åŠŸèƒ½æ—¶ï¼Œåšäº†ä¸ª<strong>è‡ªå®šä¹‰é”šç‚¹çš„ "å¸é™„" æ•ˆæœï¼šé¼ æ ‡é è¿‘èŠ‚ç‚¹æ—¶ï¼Œé”šç‚¹ä¼šè‡ªåŠ¨å¼¹å‡ºå¹¶çµåŠ¨è·Ÿéšé¼ æ ‡ç§»åŠ¨</strong>ï¼Œè¿™ä¸ªå°æ•ˆæœæŒºæœ‰è¶£çš„ï¼Œåˆ†äº«ç»™å¤§å®¶å‚è€ƒï¼Œæ•ˆæœå¦‚ä¸‹ï¼Œè¯·è¯¸å›æŒ‰éœ€é£Ÿç”¨å“ˆã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2e0f973f7e474159a523a12e5cafdc6f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5qmZ5p-Q5Lq6:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767608726&amp;x-signature=y39UDHWOUcCplMCxmYdrQncLSnk%3D" alt="122901.gif" loading="lazy"/></p>
<h2 data-id="heading-1">éœ€æ±‚èƒŒæ™¯</h2>
<p>åœ¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fsite.logic-flow.cn%2Ftutorial%2Fget-started" target="_blank" title="https://site.logic-flow.cn/tutorial/get-started" ref="nofollow noopener noreferrer">LogicFlow</a> ä¸­ï¼Œ<strong>é”šç‚¹</strong>æ˜¯é™æ€çš„ï¼Œå›ºå®šåœ¨èŠ‚ç‚¹çš„ä¸Šä¸‹å·¦å³å››ä¸ªä½ç½®ä¸Šï¼Œè¿™å°±å¯¼è‡´äº†ä¸¤ä¸ªé—®é¢˜ï¼š</p>
<ol>
<li><strong>è§†è§‰å¹²æ‰°</strong>ï¼šå¦‚æœä¸€ç›´æ˜¾ç¤ºé”šç‚¹ï¼Œç”»é¢ä¼šæ˜¾å¾—å¾ˆä¹±ã€‚</li>
<li><strong>äº¤äº’å›°éš¾</strong>ï¼šç”¨æˆ·å¿…é¡»ç²¾ç¡®ç‚¹å‡»åˆ°é”šç‚¹æ‰èƒ½å¼€å§‹è¿çº¿ï¼Œå®¹é”™ç‡ä½ã€‚</li>
</ol>
<blockquote>
<p>å…¶å®...å°±æ˜¯äº§å“ç»ç†è¦æ±‚è¦ç‚«é…·ä¸€ç‚¹ğŸ˜£ï¼Œè¦æˆ‘è¯´é™æ€çš„æŒºå¥½ï¼Œç›´è§‚ç®€å•ã€‚</p>
</blockquote>
<p>æˆ‘ä»¬æƒ³è¦çš„æ•ˆæœæ˜¯ï¼š</p>
<ul>
<li>å¹³æ—¶éšè—é”šç‚¹ï¼Œä¿æŒç•Œé¢æ•´æ´ã€‚</li>
<li>é¼ æ ‡ç§»å…¥èŠ‚ç‚¹åŒºåŸŸæ—¶ï¼Œæ˜¾ç¤ºé”šç‚¹ã€‚</li>
<li><strong>é‡ç‚¹æ¥äº†</strong>ğŸ¯ï¼šå½“é¼ æ ‡åœ¨èŠ‚ç‚¹é™„è¿‘ç§»åŠ¨æ—¶ï¼Œé”šç‚¹åº”è¯¥åƒæœ‰ç£åŠ›ä¸€æ ·ï¼Œè‡ªåŠ¨å¸é™„åˆ°ç¦»é¼ æ ‡æœ€è¿‘çš„ä½ç½®ï¼ˆæˆ–è€…è·Ÿéšé¼ æ ‡åœ¨ä¸€å®šèŒƒå›´å†…ç§»åŠ¨ï¼‰ï¼Œè®©è¿çº¿å˜å¾—éšæ‰‹å¯å¾—ã€‚</li>
</ul>
<h2 data-id="heading-2">å…·ä½“å®ç°</h2>
<p>è¦å®ç°è¿™ä¸ªåŠŸèƒ½ï¼Œæˆ‘ä»¬éœ€è¦æ·±å…¥ LogicFlow çš„<a href="https://link.juejin.cn?target=https%3A%2F%2Fsite.logic-flow.cn%2Ftutorial%2Fbasic%2Fnode%23%25E8%2587%25AA%25E5%25AE%259A%25E4%25B9%2589%25E8%258A%2582%25E7%2582%25B9" target="_blank" title="https://site.logic-flow.cn/tutorial/basic/node#%E8%87%AA%E5%AE%9A%E4%B9%89%E8%8A%82%E7%82%B9" ref="nofollow noopener noreferrer">è‡ªå®šä¹‰æœºåˆ¶</a>ã€‚</p>
<p>è¿™æ¬¡ä¸»è¦å›´ç»•åˆ°ä¸¤ä¸ªæ–‡ä»¶ï¼š</p>
<ul>
<li><code>customNode.js</code>: è‡ªå®šä¹‰èŠ‚ç‚¹ï¼Œç”¨äºé›†æˆæˆ‘ä»¬å†™å¥½çš„è¶…çº§é”šç‚¹ã€‚</li>
<li><code>customAnchor.js</code>: æ ¸å¿ƒé€»è¾‘ï¼Œå®ç°é”šç‚¹çš„æ¸²æŸ“å’Œé¼ æ ‡è·Ÿéšé€»è¾‘ã€‚</li>
</ul>
<h3 data-id="heading-3">ç¬¬1ï¸âƒ£æ­¥ï¼šè‡ªå®šä¹‰é”šç‚¹ç»„ä»¶</h3>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰çš„é”šç‚¹æ¸²æŸ“å‡½æ•°ã€‚è¿™ä¸ªå‡½æ•°ä¼šè¿”å›ä¸€ä¸ª SVG å…ƒç´ ï¼ˆè¿™é‡Œç”¨ LogicFlowå†…ç½®çš„ <code>h</code> å‡½æ•°æ¥åˆ›å»ºï¼‰ï¼Œå¹¶ä¸”åŒ…å«å¤æ‚çš„äº¤äº’é€»è¾‘ã€‚</p>
<blockquote>
<p>ä¸ºä»€ä¹ˆè¦è¿”å›ä¸€ä¸ª SVG å…ƒç´ ï¼Ÿ</p>
<p>è¿™å¾—è¯´åˆ° LogicFlow çš„åº•å±‚æŠ€æœ¯é€‰å‹é—®é¢˜äº†ï¼Œå¯ä»¥çœ‹çœ‹è¿™ç¯‡æ–‡ç« ï¼š<a href="https://juejin.cn/post/7443804823886446631" target="_blank" title="https://juejin.cn/post/7443804823886446631">ä¼ é€é—¨</a></p>
</blockquote>
<p>å®ƒçš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼šåˆ›å»ºä¸€ä¸ªè¾ƒå¤§çš„é€æ˜å®¹å™¨ï¼ˆ<code>container</code>ï¼‰ï¼Œç”¨æ¥æ•è·é¼ æ ‡äº‹ä»¶ã€‚åœ¨è¿™ä¸ªå®¹å™¨å†…ï¼Œæˆ‘ä»¬æ”¾ä¸€ä¸ª"å°çƒ"ï¼ˆ<code>ballGroup</code>ï¼‰ï¼Œè¿™ä¸ªå°çƒå°±æ˜¯æˆ‘ä»¬çœ‹åˆ°çš„é”šç‚¹ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// customAnchor.js</span>
<span class="hljs-keyword">import</span> { h } <span class="hljs-keyword">from</span> <span class="hljs-string">"@logicflow/core"</span>;

<span class="hljs-comment">// å®šä¹‰ä¸€äº›å¸¸é‡ï¼Œæ–¹ä¾¿è°ƒæ•´æ‰‹æ„Ÿ</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">CONTAINER_WIDTH</span> = <span class="hljs-number">72</span>;  <span class="hljs-comment">// æ„Ÿåº”åŒºåŸŸå®½åº¦</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">CONTAINER_HEIGHT</span> = <span class="hljs-number">80</span>; <span class="hljs-comment">// æ„Ÿåº”åŒºåŸŸé«˜åº¦</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">BALL_SIZE</span> = <span class="hljs-number">20</span>;        <span class="hljs-comment">// é”šç‚¹å°çƒå¤§å°</span>

<span class="hljs-comment">/**
 * <span class="hljs-doctag">@name</span> åˆ›å»ºå¤æ‚åŠ¨æ•ˆé”šç‚¹
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Object</span>} params å‚æ•°å¯¹è±¡
 * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">any</span>} LogicFlow å¯ç”¨çš„é”šç‚¹æ¸²æŸ“å½¢çŠ¶
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">createCustomAnchor</span>(<span class="hljs-params">params</span>) {
  <span class="hljs-keyword">const</span> { x, y, side, id, nodeModel, graphModel } = params || {};
  
  <span class="hljs-comment">// ä¾æ®å·¦å³ä¸¤ä¾§è®¡ç®—å®¹å™¨å·¦ä¸Šè§’ (å°ç¼–çš„ä¸šåŠ¡ä¸­æœ€å¤šä»…åªæœ‰å·¦å³ä¸¤ä¸ªé”šç‚¹)</span>
  <span class="hljs-keyword">const</span> halfW = <span class="hljs-variable constant_">CONTAINER_WIDTH</span> / <span class="hljs-number">2</span>;
  <span class="hljs-comment">// å¦‚æœæ˜¯å·¦ä¾§é”šç‚¹ï¼Œå®¹å™¨åº”è¯¥å¾€å·¦åï¼›å³ä¾§åŒç†ï¼ˆå¯æ ¹æ®è‡ªå·±éœ€æ±‚è°ƒæ•´ï¼Œå°ç¼–çš„ä¸šåŠ¡æ˜¯åŒä¸€æ—¶é—´ä»…éœ€å±•ç¤ºä¸€è¾¹çš„é”šç‚¹å³å¯ï¼‰</span>
  <span class="hljs-keyword">const</span> offsetX = side === <span class="hljs-string">"left"</span> ? -halfW : halfW;
  
  <span class="hljs-comment">// è®¡ç®—é€æ˜å®¹å™¨åœ¨ç”»å¸ƒä¸Šçš„ç»å¯¹åæ ‡</span>
  <span class="hljs-keyword">const</span> containerX = x + offsetX - <span class="hljs-variable constant_">CONTAINER_WIDTH</span> / <span class="hljs-number">2</span>;
  <span class="hljs-keyword">const</span> containerY = y - <span class="hljs-variable constant_">CONTAINER_HEIGHT</span> / <span class="hljs-number">2</span>;

  <span class="hljs-comment">// DOM å¼•ç”¨ï¼Œç”¨äºåç»­ç›´æ¥æ“ä½œ DOM æå‡æ€§èƒ½</span>
  <span class="hljs-keyword">let</span> containerRef = <span class="hljs-literal">null</span>;
  <span class="hljs-keyword">let</span> ballGroupRef = <span class="hljs-literal">null</span>;

  <span class="hljs-comment">// æ ¸å¿ƒé€»è¾‘ï¼šé¼ æ ‡ç§»åŠ¨æ—¶ï¼Œæ›´æ–°å°çƒçš„ä½ç½®</span>
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleMouseMove</span>(<span class="hljs-params">ev</span>) {
    <span class="hljs-keyword">if</span> (!containerRef || !ballGroupRef) <span class="hljs-keyword">return</span>;
    
    <span class="hljs-comment">// è·å–å®¹å™¨ç›¸å¯¹äºè§†å£çš„ä½ç½®</span>
    <span class="hljs-keyword">const</span> rect = containerRef.<span class="hljs-title function_">getBoundingClientRect</span>();
    
    <span class="hljs-comment">// è·å–é¼ æ ‡åœ¨ç”»å¸ƒä¸Šçš„ä½ç½®ï¼ˆè¿™é‡Œéœ€è¦å¤„ç†ä¸€ä¸‹æµè§ˆå™¨å…¼å®¹æ€§ï¼Œç®€å•èµ·è§ç”¨ clientX/Yï¼‰</span>
    <span class="hljs-keyword">const</span> clientX = ev.<span class="hljs-property">clientX</span>;
    <span class="hljs-keyword">const</span> clientY = ev.<span class="hljs-property">clientY</span>;
    
    <span class="hljs-comment">// è®¡ç®—é¼ æ ‡ç›¸å¯¹äºå®¹å™¨å·¦ä¸Šè§’çš„åç§»é‡</span>
    <span class="hljs-keyword">let</span> relX = clientX - rect.<span class="hljs-property">left</span>; 
    <span class="hljs-keyword">let</span> relY = clientY - rect.<span class="hljs-property">top</span>;
    
    <span class="hljs-comment">// å…³é”®ç‚¹ï¼šé™åˆ¶å°çƒåœ¨å®¹å™¨å†…ç§»åŠ¨ï¼Œé˜²æ­¢è·‘å‡ºæ„Ÿåº”åŒº</span>
    relX = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(<span class="hljs-number">0</span>, <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(<span class="hljs-variable constant_">CONTAINER_WIDTH</span>, relX));
    relY = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(<span class="hljs-number">0</span>, <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(<span class="hljs-variable constant_">CONTAINER_HEIGHT</span>, relY));
    
    <span class="hljs-comment">// ä½¿ç”¨ setAttribute ç›´æ¥æ›´æ–° transformï¼Œæ€§èƒ½æœ€å¥½</span>
    ballGroupRef.<span class="hljs-title function_">setAttribute</span>(<span class="hljs-string">"transform"</span>, <span class="hljs-string">`translate(<span class="hljs-subst">${containerX + relX}</span>, <span class="hljs-subst">${containerY + relY}</span>)`</span>);
  }
  
  <span class="hljs-comment">// é¼ æ ‡ç§»å…¥ï¼šå˜è‰² + æ¿€æ´»åŠ¨ç”»</span>
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleMouseEnter</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (!ballGroupRef) <span class="hljs-keyword">return</span>;
    ballGroupRef.<span class="hljs-property">style</span>.<span class="hljs-property">transition</span> = <span class="hljs-string">"transform 140ms ease"</span>;
    <span class="hljs-comment">// è¿™é‡Œå¯ä»¥æ”¹å˜é¢œè‰²ï¼Œä¾‹å¦‚ ballGroupRef.style.color = 'red';</span>
  }

  <span class="hljs-comment">// é¼ æ ‡ç§»å‡ºï¼šå¤ä½</span>
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleMouseLeave</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (!ballGroupRef) <span class="hljs-keyword">return</span>;
    <span class="hljs-comment">// é¼ æ ‡ç¦»å¼€æ—¶ï¼Œå¹³æ»‘å›åˆ°å®¹å™¨ä¸­å¿ƒ</span>
    ballGroupRef.<span class="hljs-property">style</span>.<span class="hljs-property">transition</span> = <span class="hljs-string">"transform 160ms ease, opacity 320ms ease"</span>;
    
    <span class="hljs-comment">// è®¡ç®—ä¸­å¿ƒä½ç½®</span>
    <span class="hljs-keyword">const</span> centerX = containerX + <span class="hljs-variable constant_">CONTAINER_WIDTH</span> / <span class="hljs-number">2</span>;
    <span class="hljs-keyword">const</span> centerY = containerY + <span class="hljs-variable constant_">CONTAINER_HEIGHT</span> / <span class="hljs-number">2</span>;
    ballGroupRef.<span class="hljs-title function_">setAttribute</span>(<span class="hljs-string">"transform"</span>, <span class="hljs-string">`translate(<span class="hljs-subst">${centerX}</span>, <span class="hljs-subst">${centerY}</span>)`</span>);
  }

  <span class="hljs-keyword">return</span> <span class="hljs-title function_">h</span>(<span class="hljs-string">"g"</span>, {}, [
    <span class="hljs-comment">// 1. é€æ˜å®¹å™¨ï¼šç”¨äºæ‰©å¤§æ„Ÿåº”åŒºåŸŸï¼Œè¿™å°±æ˜¯â€œå¸é™„â€çš„ç§˜å¯†</span>
    <span class="hljs-title function_">h</span>(<span class="hljs-string">"rect"</span>, {
      <span class="hljs-attr">x</span>: containerX,
      <span class="hljs-attr">y</span>: containerY,
      <span class="hljs-attr">width</span>: <span class="hljs-variable constant_">CONTAINER_WIDTH</span>,
      <span class="hljs-attr">height</span>: <span class="hljs-variable constant_">CONTAINER_HEIGHT</span>,
      <span class="hljs-attr">fill</span>: <span class="hljs-string">"transparent"</span>, <span class="hljs-comment">// å¿…é¡»æ˜¯é€æ˜ä½†å­˜åœ¨çš„</span>
      <span class="hljs-attr">cursor</span>: <span class="hljs-string">"crosshair"</span>,
      <span class="hljs-attr">onMouseEnter</span>: handleMouseEnter,
      <span class="hljs-attr">onMouseMove</span>: handleMouseMove, <span class="hljs-comment">// ç»‘å®šç§»åŠ¨äº‹ä»¶</span>
      <span class="hljs-attr">onMouseLeave</span>: handleMouseLeave,
      <span class="hljs-comment">// ... ç»‘å®šå…¶ä»–äº‹ä»¶ ...</span>
    }),
    
    <span class="hljs-comment">// 2. å®é™…æ˜¾ç¤ºçš„é”šç‚¹ï¼ˆå°çƒï¼‰</span>
    <span class="hljs-title function_">h</span>(<span class="hljs-string">"g"</span>, {
        <span class="hljs-comment">// åˆå§‹ä½ç½®å±…ä¸­</span>
        <span class="hljs-attr">transform</span>: <span class="hljs-string">`translate(<span class="hljs-subst">${containerX + CONTAINER_WIDTH / <span class="hljs-number">2</span>}</span>, <span class="hljs-subst">${containerY + CONTAINER_HEIGHT / <span class="hljs-number">2</span>}</span>)`</span>,
        <span class="hljs-string">"pointer-events"</span>: <span class="hljs-string">"none"</span>, <span class="hljs-comment">// è®©é¼ æ ‡äº‹ä»¶ç©¿é€åˆ°ä¸‹æ–¹çš„ rect ä¸Š</span>
        <span class="hljs-attr">ref</span>: <span class="hljs-function">(<span class="hljs-params">el</span>) =&gt;</span> { ballGroupRef = el; }
      },
      [ 
        <span class="hljs-comment">// è¿™é‡Œç”»ä¸€ä¸ªåœ†å½¢å’Œä¸€ä¸ªåŠ å·</span>
        <span class="hljs-title function_">h</span>(<span class="hljs-string">"circle"</span>, { <span class="hljs-attr">r</span>: <span class="hljs-variable constant_">BALL_SIZE</span> / <span class="hljs-number">2</span>, <span class="hljs-attr">stroke</span>: <span class="hljs-string">"currentColor"</span>, <span class="hljs-attr">fill</span>: <span class="hljs-string">"none"</span> }),
        <span class="hljs-title function_">h</span>(<span class="hljs-string">"path"</span>, { <span class="hljs-attr">d</span>: <span class="hljs-string">"M-5 0 L5 0 M0 -5 L0 5"</span>, <span class="hljs-attr">stroke</span>: <span class="hljs-string">"currentColor"</span> })
      ]
    ),
  ]);
}
</code></pre>
<p>è¿™é‡Œæœ‰ä¸ªå°æŠ€å·§â°ï¼šæˆ‘ä»¬å¹¶æ²¡æœ‰ç›´æ¥æ”¹å˜ SVG çš„ <code>cx/cy</code>ï¼Œè€Œæ˜¯é€šè¿‡ <code>transform: translate(...)</code> æ¥ç§»åŠ¨æ•´ä¸ªé”šç‚¹ç»„ï¼Œè¿™æ ·æ€§èƒ½æ›´å¥½ï¼ŒåŠ¨ç”»ä¹Ÿæ›´æµç•…ã€‚åŒæ—¶ï¼Œ<code>pointer-events: none</code> ç¡®ä¿äº†é¼ æ ‡äº‹ä»¶å§‹ç»ˆç”±åº•å±‚çš„é€æ˜ <code>rect</code> è§¦å‘ï¼Œé¿å…é—ªçƒã€‚</p>
<h3 data-id="heading-4">ç¬¬2ï¸âƒ£æ­¥ï¼šåœ¨è‡ªå®šä¹‰èŠ‚ç‚¹ä¸­ä½¿ç”¨</h3>
<p>å†™å¥½äº†é”šç‚¹é€»è¾‘ï¼Œæ¥ä¸‹æ¥è¦åœ¨èŠ‚ç‚¹ä¸­ç”¨èµ·æ¥ï¼Œå’±ä»¬éœ€è¦åœ¨è‡ªå®šä¹‰èŠ‚ç‚¹ç±»ä¸­é‡å†™ <code>getAnchorShape</code> æ–¹æ³•ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// customNode.js</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">HtmlNode</span>, <span class="hljs-title class_">HtmlNodeModel</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@logicflow/core"</span>;
<span class="hljs-keyword">import</span> { createCustomAnchor } <span class="hljs-keyword">from</span> <span class="hljs-string">"./customAnchor"</span>;

<span class="hljs-comment">// å®šä¹‰èŠ‚ç‚¹ View</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">CustomNodeView</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">HtmlNode</span> {
  <span class="hljs-comment">/**
   * <span class="hljs-doctag">@name</span> è‡ªå®šä¹‰èŠ‚ç‚¹é”šç‚¹å½¢çŠ¶
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">object</span>} anchorData é”šç‚¹æ•°æ®
   * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">object</span>} é”šç‚¹å½¢çŠ¶å¯¹è±¡
   */</span>
  <span class="hljs-title function_">getAnchorShape</span>(<span class="hljs-params">anchorData</span>) {
    <span class="hljs-keyword">const</span> { x, y, name, id } = anchorData;
    
    <span class="hljs-comment">// ç®€å•çš„ä¸šåŠ¡é€»è¾‘ï¼šåªæ˜¾ç¤ºå·¦å³ä¸¤ä¾§çš„é”šç‚¹</span>
    <span class="hljs-keyword">const</span> side = name === <span class="hljs-string">"left"</span> ? <span class="hljs-string">"left"</span> : <span class="hljs-string">"right"</span>;
    
    <span class="hljs-comment">// è°ƒç”¨æˆ‘ä»¬åˆšæ‰å†™çš„ç¥å™¨ï¼ä¼ å…¥å¿…è¦çš„å‚æ•°</span>
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">createCustomAnchor</span>({
      x,
      y,
      side,
      id,
      <span class="hljs-attr">nodeModel</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span>.<span class="hljs-property">model</span>,
      <span class="hljs-attr">graphModel</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span>.<span class="hljs-property">graphModel</span>,
    });
  }
}

<span class="hljs-comment">// å®šä¹‰èŠ‚ç‚¹ Model</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">CustomNodeModel</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">HtmlNodeModel</span> {
  <span class="hljs-comment">// å®šä¹‰é”šç‚¹ä½ç½®</span>
  <span class="hljs-title function_">getDefaultAnchor</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> { id, width, x, y } = <span class="hljs-variable language_">this</span>;
    <span class="hljs-keyword">return</span> [
      { <span class="hljs-attr">x</span>: x - width / <span class="hljs-number">2</span>, y, <span class="hljs-attr">name</span>: <span class="hljs-string">"left"</span>, <span class="hljs-attr">id</span>: <span class="hljs-string">`<span class="hljs-subst">${id}</span>-L`</span> },
      { <span class="hljs-attr">x</span>: x + width / <span class="hljs-number">2</span>, y, <span class="hljs-attr">name</span>: <span class="hljs-string">"right"</span>, <span class="hljs-attr">id</span>: <span class="hljs-string">`<span class="hljs-subst">${id}</span>-R`</span> },
    ];
  }
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">type</span>: <span class="hljs-string">"custom-node"</span>,
  <span class="hljs-attr">view</span>: <span class="hljs-title class_">CustomNodeView</span>,
  <span class="hljs-attr">model</span>: <span class="hljs-title class_">CustomNodeModel</span>,
};
</code></pre>
<h3 data-id="heading-5">ç¬¬3ï¸âƒ£æ­¥ï¼šè®°å½•æ‹–æ‹½çŠ¶æ€</h3>
<p>åœ¨å®ç°â€œæ‰‹åŠ¨è¿çº¿â€ä¹‹å‰ï¼Œæˆ‘ä»¬é¢ä¸´ä¸€ä¸ªå…³é”®é—®é¢˜ï¼šå½“æˆ‘ä»¬åœ¨ç›®æ ‡èŠ‚ç‚¹çš„é”šç‚¹ä¸Šæ¾å¼€é¼ æ ‡æ—¶ï¼Œæˆ‘ä»¬æ€ä¹ˆçŸ¥é“<strong>è¿çº¿æ˜¯ä»å“ªé‡Œå‘èµ·çš„</strong>ï¼Ÿ</p>
<p>LogicFlow çš„é»˜è®¤è¡Œä¸ºä¸­ï¼Œ<code>customAnchor</code> å¹¶ä¸çŸ¥é“å½“å‰çš„æ‹–æ‹½ä¸Šä¸‹æ–‡ã€‚å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦å€ŸåŠ©å…¨å±€çŠ¶æ€ç®¡ç†ï¼ˆå°ç¼–ç”¨çš„æ˜¯Vue3ï¼Œæ‰€ä»¥ä½¿ç”¨Piniaåšçš„å…¨å±€æ•°æ®å…±äº«ï¼‰å’Œ LogicFlow çš„äº‹ä»¶ç³»ç»Ÿæ¥ "æ­æ¡¥"ã€‚</p>
<p><strong>1. å®šä¹‰ Store</strong></p>
<p>æˆ‘ä»¬éœ€è¦ä¸€ä¸ªåœ°æ–¹å­˜æ”¾â€œå½“å‰æ­£åœ¨æ‹–æ‹½çš„é”šç‚¹ä¿¡æ¯â€ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// stores/logicFlow.js</span>
<span class="hljs-keyword">import</span> { defineStore } <span class="hljs-keyword">from</span> <span class="hljs-string">"pinia"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> useLogicFlowStore = <span class="hljs-title function_">defineStore</span>(<span class="hljs-string">"logicFlow"</span>, {
  <span class="hljs-attr">state</span>: <span class="hljs-function">() =&gt;</span> ({
    <span class="hljs-attr">draggingInfo</span>: <span class="hljs-literal">null</span>, <span class="hljs-comment">// å­˜å‚¨æ‹–æ‹½ä¸­çš„è¿çº¿ä¿¡æ¯</span>
    <span class="hljs-attr">isManualConnected</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">// æ ‡è®°æ˜¯å¦è§¦å‘äº†æ‰‹åŠ¨è¿æ¥</span>
  }),
});
</code></pre>
<p><strong>2. ç›‘å¬ LogicFlow äº‹ä»¶</strong></p>
<p>åœ¨ LogicFlow åˆå§‹åŒ–çš„åœ°æ–¹ï¼Œæˆ‘ä»¬éœ€è¦ç›‘å¬ <code>anchor:dragstart</code> å’Œ <code>anchor:dragend</code> äº‹ä»¶ï¼Œå®æ—¶æ›´æ–° Storeã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { useLogicFlowStore } <span class="hljs-keyword">from</span> <span class="hljs-string">"@/stores/logicFlow"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">initEvents</span>(<span class="hljs-params">lf</span>) {
  <span class="hljs-keyword">const</span> store = <span class="hljs-title function_">useLogicFlowStore</span>();

  <span class="hljs-comment">// é”šç‚¹å¼€å§‹æ‹–æ‹½ï¼šè®°å½•æºèŠ‚ç‚¹å’Œæºé”šç‚¹ä¿¡æ¯</span>
  lf.<span class="hljs-title function_">on</span>(<span class="hljs-string">"anchor:dragstart"</span>, <span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {
    store.<span class="hljs-property">draggingInfo</span> = data; 
    store.<span class="hljs-property">isManualConnected</span> = <span class="hljs-literal">false</span>;
  });

  <span class="hljs-comment">// é”šç‚¹æ‹–æ‹½ç»“æŸï¼šæ¸…ç©ºä¿¡æ¯</span>
  lf.<span class="hljs-title function_">on</span>(<span class="hljs-string">"anchor:dragend"</span>, <span class="hljs-function">() =&gt;</span> {
    store.<span class="hljs-property">draggingInfo</span> = <span class="hljs-literal">null</span>;
  });
}
</code></pre>
<p>æœ‰äº†è¿™ä¸ªé“ºå«ï¼Œå’±ä»¬çš„è‡ªå®šä¹‰é”šç‚¹å°±èƒ½çŸ¥é“ "è°åœ¨è¿æˆ‘" äº†ï¼ğŸ˜</p>
<h3 data-id="heading-6">ç¬¬4ï¸âƒ£æ­¥ï¼šæ‰‹åŠ¨è¿çº¿é€»è¾‘</h3>
<p>ä½ å¯èƒ½æ³¨æ„åˆ°äº†ï¼Œé”šç‚¹ä½ç½®æ˜¯â€œåŠ¨â€çš„ï¼Œä½† LogicFlow çš„è¿çº¿è®¡ç®—é€šå¸¸åŸºäºå›ºå®šçš„é”šç‚¹åæ ‡ã€‚å¦‚æœæˆ‘ä»¬ä¸åšå¤„ç†ï¼Œå¯èƒ½ä¼šå‡ºç°è¿çº¿è¿ä¸ä¸Šçš„æƒ…å†µã€‚ï¼ˆå…¶å®è‚¯å®šæ˜¯è¿ä¸ä¸Šçš„ğŸ˜‚ï¼‰</p>
<p>æ‰€ä»¥ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ <code>handleMouseUp</code>ï¼ˆé¼ æ ‡æŠ¬èµ·ï¼‰æ—¶ï¼Œæ‰‹åŠ¨å¸® LogicFlow å»ºç«‹è¿çº¿ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// customAnchor.js</span>
<span class="hljs-keyword">import</span> { useLogicFlowStore } <span class="hljs-keyword">from</span> <span class="hljs-string">"@/stores/logicFlow"</span>;

  <span class="hljs-comment">// ... åœ¨ createCustomAnchor å†…éƒ¨ ...</span>

  <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleMouseUp</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> store = <span class="hljs-title function_">useLogicFlowStore</span>();
    <span class="hljs-comment">// è·å–å…¨å±€å­˜å‚¨çš„æ‹–æ‹½ä¿¡æ¯</span>
    <span class="hljs-keyword">const</span> { draggingInfo } = store; 
    
    <span class="hljs-comment">// å°è¯•æ‰‹åŠ¨å»ºç«‹è¿æ¥</span>
    <span class="hljs-keyword">if</span> (draggingInfo &amp;&amp; graphModel) {
      <span class="hljs-keyword">const</span> sourceNode = draggingInfo.<span class="hljs-property">nodeModel</span>;
      <span class="hljs-keyword">const</span> sourceAnchor = draggingInfo.<span class="hljs-property">data</span>;
      
      <span class="hljs-comment">// 1. åŸºç¡€æ ¡éªŒï¼šé¿å…è‡ªè¿</span>
      <span class="hljs-keyword">if</span> (sourceAnchor.<span class="hljs-property">id</span> === id) <span class="hljs-keyword">return</span>;

      <span class="hljs-keyword">try</span> {
        <span class="hljs-comment">// 2. æ„é€ è¾¹æ•°æ®</span>
        <span class="hljs-comment">// æ³¨æ„ï¼šè¿™é‡Œæˆ‘ä»¬æŠŠç»ˆç‚¹ (endPoint) å¼ºåˆ¶è®¾ä¸ºå½“å‰é¼ æ ‡/é”šç‚¹çš„è§†è§‰ä½ç½® {x, y}</span>
        <span class="hljs-comment">// è€Œä¸æ˜¯èŠ‚ç‚¹åŸæœ¬å®šä¹‰çš„é™æ€é”šç‚¹ä½ç½®</span>
        <span class="hljs-keyword">const</span> edgeData = {
            <span class="hljs-attr">type</span>: <span class="hljs-string">"bezier"</span>, <span class="hljs-comment">// è´å¡å°”æ›²çº¿</span>
            <span class="hljs-attr">sourceNodeId</span>: sourceNode.<span class="hljs-property">id</span>,
            <span class="hljs-attr">sourceAnchorId</span>: sourceAnchor.<span class="hljs-property">id</span>,
            <span class="hljs-attr">targetNodeId</span>: nodeModel.<span class="hljs-property">id</span>,
            <span class="hljs-attr">targetAnchorId</span>: id,
            <span class="hljs-attr">startPoint</span>: { <span class="hljs-attr">x</span>: sourceAnchor.<span class="hljs-property">x</span>, <span class="hljs-attr">y</span>: sourceAnchor.<span class="hljs-property">y</span> },
            <span class="hljs-attr">endPoint</span>: { x, y }, <span class="hljs-comment">// &lt;--- â°å…³é”®ï¼ä½¿ç”¨å½“å‰çš„åŠ¨æ€åæ ‡</span>
        };

        <span class="hljs-comment">// 3. æ ¸å¿ƒï¼šæ‰‹åŠ¨è°ƒç”¨ graphModel.addEdge æ·»åŠ è¾¹</span>
        graphModel.<span class="hljs-title function_">addEdge</span>(edgeData);
      } <span class="hljs-keyword">catch</span> (error) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"æ‰‹åŠ¨è¿æ¥å¤±è´¥"</span>, error);
      }
    }
  }
</code></pre>
<p>è¿™æ ·ä¸€æ¥ï¼Œå½“ç”¨æˆ·ä»ä¸€ä¸ªèŠ‚ç‚¹æ‹–æ‹½è¿çº¿åˆ°æˆ‘ä»¬çš„åŠ¨æ€é”šç‚¹ä¸Šæ¾å¼€é¼ æ ‡æ—¶ï¼Œå°±èƒ½ç²¾å‡†åœ°å»ºç«‹è¿æ¥äº†ï¼ä¸ç®¡ä½ çš„é”šç‚¹ "è·‘" åˆ°äº†å“ªé‡Œï¼Œè¿çº¿éƒ½èƒ½å‡†ç¡®è¿½è¸ªã€‚ğŸ¯</p>
<h2 data-id="heading-7">æ€»ç»“</h2>
<p>é€šè¿‡è¿™æ¬¡æ”¹é€ ï¼Œå’±ä»¬çš„æµç¨‹å›¾ç¼–è¾‘ä½“éªŒå¾—åˆ°äº†"è´¨"çš„é£è·ƒä½“éªŒï¼š</p>
<ol>
<li><strong>çµåŠ¨</strong>ï¼šé”šç‚¹ä¸å†æ˜¯æ­»æ¿çš„é’‰å­ï¼Œè€Œæ˜¯ä¼šäº’åŠ¨çš„ç²¾çµã€‚ğŸ‘»</li>
<li><strong>é«˜æ•ˆ</strong>ï¼šå¢å¤§äº†é¼ æ ‡æ„Ÿåº”åŒºåŸŸï¼Œç”¨æˆ·è¿çº¿æ›´è½»æ¾ï¼Œæ— éœ€åƒç´ çº§ç„å‡†ã€‚</li>
<li><strong>ç¾è§‚</strong>ï¼šå¹³æ—¶éšè—ï¼Œç”¨æ—¶æ˜¾ç°ï¼Œä¿æŒäº†ç”»å¸ƒçš„æ•´æ´ã€‚</li>
</ol>
<p>å¸Œæœ›è¿™ä¸ªæ–¹æ¡ˆèƒ½ç»™æ­£åœ¨ä½¿ç”¨ LogicFlow çš„å°ä¼™ä¼´ä»¬ä¸€äº›çµæ„Ÿå§ï¼ğŸ’¡</p>
<br/>
<hr/>
<p><br/><br/></p>
<p>è‡³æ­¤ï¼Œæœ¬ç¯‡æ–‡ç« å°±å†™å®Œå•¦ï¼Œæ’’èŠ±æ’’èŠ±ã€‚</p>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b2198fba2b674f1b935a63e4abb3cbd7~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=90&amp;h=90&amp;s=8866&amp;e=png&amp;b=fcfcfc" alt="image.png" loading="lazy"/></p>
<p>å¸Œæœ›æœ¬æ–‡å¯¹ä½ æœ‰æ‰€å¸®åŠ©ï¼Œå¦‚æœ‰ä»»ä½•ç–‘é—®ï¼ŒæœŸå¾…ä½ çš„ç•™è¨€å“¦ã€‚<br/>
è€æ ·å­ï¼Œç‚¹èµ+è¯„è®º=ä½ ä¼šäº†ï¼Œæ”¶è—=ä½ ç²¾é€šäº†ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Reactè‡ªå®šä¹‰Hooks]]></title>    <link>https://juejin.cn/post/7589082912588611627</link>    <guid>https://juejin.cn/post/7589082912588611627</guid>    <pubDate>2025-12-29T10:25:50.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589082912588611627" data-draft-id="7589099845186437156" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Reactè‡ªå®šä¹‰Hooks"/> <meta itemprop="keywords" content="TypeScript,å‰ç«¯,React.js"/> <meta itemprop="datePublished" content="2025-12-29T10:25:50.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç‹æ—ä¸æƒ³è¯´è¯"/> <meta itemprop="url" content="https://juejin.cn/user/2963939079754030"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Reactè‡ªå®šä¹‰Hooks
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2963939079754030/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç‹æ—ä¸æƒ³è¯´è¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T10:25:50.000Z" title="Mon Dec 29 2025 10:25:50 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»19åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>è‡ªå®šä¹‰ä¸€äº›å¸¸è§çš„hookï¼Œæ–¹ä¾¿åœ¨å·¥ä½œä¸­ä½¿ç”¨ï¼Œä»¥ä¸‹å†…å®¹éƒ½æ˜¯æœ¬äººå·¥ä½œä¸­çš„ä½¿ç”¨ç»éªŒï¼Œä¸è¶³ä¹‹å¤„ï¼Œæ¬¢è¿æŒ‡æ­£</p>
<h3 data-id="heading-0">useBooleans</h3>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> { useState } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>

<span class="hljs-comment">/**
 * <span class="hljs-doctag">@description</span> åˆ‡æ¢true/falseçš„å…¬å…±hook
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Boolean</span>} initValue é»˜è®¤å€¼
 */</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">UseBooleansActions</span> {
  <span class="hljs-attr">toggle</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span> <span class="hljs-comment">// åˆ‡æ¢å€¼</span>
  <span class="hljs-attr">set</span>: <span class="hljs-function">(<span class="hljs-params">value: <span class="hljs-built_in">boolean</span></span>) =&gt;</span> <span class="hljs-built_in">void</span> <span class="hljs-comment">// è®¾ç½®å€¼</span>
  <span class="hljs-attr">setTrue</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span> <span class="hljs-comment">// è®¾ç½®ä¸ºtrue</span>
  <span class="hljs-attr">setFalse</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span> <span class="hljs-comment">// è®¾ç½®å€¼ä¸ºfalse</span>
  <span class="hljs-attr">reset</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span> <span class="hljs-comment">// é‡ç½®ä¸ºåˆå§‹å€¼</span>
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">useBooleans</span>(<span class="hljs-params">initValue = <span class="hljs-literal">false</span></span>): [<span class="hljs-built_in">boolean</span>, <span class="hljs-title class_">UseBooleansActions</span>] {
  <span class="hljs-keyword">const</span> [value, setValue] = useState&lt;<span class="hljs-built_in">boolean</span>&gt;(initValue)

  <span class="hljs-comment">/** åˆ‡æ¢å€¼ */</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">toggle</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-title function_">setValue</span>(<span class="hljs-function">(<span class="hljs-params">pre</span>) =&gt;</span> !pre)
  }

  <span class="hljs-comment">/** è®¾ç½®å€¼ */</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">set</span> = (<span class="hljs-params">value: <span class="hljs-built_in">boolean</span></span>) =&gt; {
    <span class="hljs-title function_">setValue</span>(value)
  }

  <span class="hljs-comment">/** è®¾ç½®ä¸ºtrue */</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">setTrue</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-title function_">setValue</span>(<span class="hljs-literal">true</span>)
  }

  <span class="hljs-comment">/** è®¾ç½®ä¸ºfalse */</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">setFalse</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-title function_">setValue</span>(<span class="hljs-literal">false</span>)
  }

  <span class="hljs-comment">/** é‡ç½®ä¸ºåˆå§‹å€¼ */</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">reset</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-title function_">setValue</span>(initValue)
  }

  <span class="hljs-keyword">return</span> [value, { toggle, set, setTrue, setFalse, reset }]
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> useBooleans

<span class="hljs-comment">// ä½¿ç”¨</span>
<span class="hljs-keyword">const</span> [booleanValue, { toggle, setTrue, setFalse, reset, set }] = <span class="hljs-title function_">useBooleans</span>(<span class="hljs-literal">true</span>)
</code></pre>
<h3 data-id="heading-1">useToggle</h3>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> { useMemo, useState } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>

<span class="hljs-comment">// å®šä¹‰æ“ä½œæ–¹æ³•çš„æ¥å£</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">Actions</span>&lt;T, U&gt; {
  <span class="hljs-attr">toggle</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span>
  <span class="hljs-attr">set</span>: <span class="hljs-function">(<span class="hljs-params">value: T | U</span>) =&gt;</span> <span class="hljs-built_in">void</span>
  <span class="hljs-attr">setLeft</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span> <span class="hljs-comment">// è®¾ç½®ä¸ºé»˜è®¤å€¼</span>
  <span class="hljs-attr">setRight</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span> <span class="hljs-comment">// è®¾ç½®ä¸ºå–åå€¼</span>
}

<span class="hljs-keyword">function</span> useToggle&lt;T = <span class="hljs-built_in">boolean</span>&gt;(
  defaultValue?: T,
  reverseValue?: T,
): [T, <span class="hljs-title class_">Actions</span>&lt;T, T&gt;]

<span class="hljs-keyword">function</span> useToggle&lt;T, U&gt;(
  <span class="hljs-attr">defaultValue</span>: T,
  <span class="hljs-attr">reverseValue</span>: U,
): [T | U, <span class="hljs-title class_">Actions</span>&lt;T | U, T | U&gt;]

<span class="hljs-keyword">function</span> useToggle&lt;D, R&gt;(
  <span class="hljs-attr">defaultValue</span>: D = <span class="hljs-literal">false</span> <span class="hljs-keyword">as</span> <span class="hljs-built_in">unknown</span> <span class="hljs-keyword">as</span> D,
  reverseValue?: R,
) {
  <span class="hljs-comment">// çŠ¶æ€ç®¡ç†ï¼šæ”¯æŒé»˜è®¤å€¼å’Œå–åå€¼</span>
  <span class="hljs-keyword">const</span> [state, setState] = useState&lt;D | R&gt;(defaultValue)

  <span class="hljs-comment">// è®¡ç®—å®é™…çš„å–åå€¼ï¼ˆè‹¥æœªæä¾›åˆ™ä½¿ç”¨å¸ƒå°”å–åï¼‰</span>
  <span class="hljs-keyword">const</span> reverseValueOrigin =
    reverseValue === <span class="hljs-literal">undefined</span> ? !defaultValue : reverseValue

  <span class="hljs-comment">// ç¼“å­˜æ“ä½œæ–¹æ³•é¿å…é‡å¤åˆ›å»º</span>
  <span class="hljs-keyword">const</span> actions = <span class="hljs-title function_">useMemo</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">// æ ¸å¿ƒåˆ‡æ¢é€»è¾‘ï¼šåœ¨é»˜è®¤å€¼å’Œå–åå€¼ä¹‹é—´åˆ‡æ¢</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">toggle</span> = (<span class="hljs-params"/>) =&gt;
      <span class="hljs-title function_">setState</span>(
        <span class="hljs-function">(<span class="hljs-params">s</span>) =&gt;</span>
          (s === defaultValue ? reverseValueOrigin : defaultValue) <span class="hljs-keyword">as</span> D | R,
      )
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">set</span> = (<span class="hljs-params">value: D | R</span>) =&gt; <span class="hljs-title function_">setState</span>(value)
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">setLeft</span> = (<span class="hljs-params"/>) =&gt; <span class="hljs-title function_">setState</span>(defaultValue)
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">setRight</span> = (<span class="hljs-params"/>) =&gt; <span class="hljs-title function_">setState</span>(reverseValueOrigin <span class="hljs-keyword">as</span> D | R)

    <span class="hljs-keyword">return</span> { toggle, set, setLeft, setRight }
  }, [defaultValue, reverseValueOrigin])

  <span class="hljs-keyword">return</span> [state, actions]
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> useToggle

<span class="hljs-comment">// ä½¿ç”¨</span>
<span class="hljs-keyword">const</span> [toggleValue, { <span class="hljs-attr">toggle</span>: toggle1, <span class="hljs-attr">set</span>: set1, setLeft, setRight }] =
    useToggle&lt;<span class="hljs-string">'left'</span>, <span class="hljs-string">'right'</span>&gt;(<span class="hljs-string">'left'</span>, <span class="hljs-string">'right'</span>)
</code></pre>
<h3 data-id="heading-2">useExcel</h3>
<p>åŸºäºxlsxçš„ä¸€äº›å¸¸è§çš„å¯¼å…¥å¯¼å‡ºåŠŸèƒ½å°è£…</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> { getTypeOf, isAvailableArr } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/utils'</span>
<span class="hljs-keyword">import</span> { message } <span class="hljs-keyword">from</span> <span class="hljs-string">'antd'</span>
<span class="hljs-keyword">import</span> <span class="hljs-keyword">type</span> {
  <span class="hljs-title class_">BookType</span>,
  <span class="hljs-title class_">ColInfo</span>,
  <span class="hljs-title class_">Range</span>,
  <span class="hljs-title class_">RowInfo</span>,
  <span class="hljs-title class_">Sheet2JSONOpts</span>,
  <span class="hljs-title class_">WorkBook</span>,
} <span class="hljs-keyword">from</span> <span class="hljs-string">'xlsx'</span>
<span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> <span class="hljs-variable constant_">XLSX</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'xlsx'</span>

<span class="hljs-comment">// å¯¼å‡ºæ–‡ä»¶é…ç½®</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> <span class="hljs-title class_">IExportConfig</span> = {
  name?: <span class="hljs-built_in">string</span> <span class="hljs-comment">// å¯¼å‡ºæ–‡ä»¶åç§°</span>
  bookType?: <span class="hljs-title class_">BookType</span> <span class="hljs-comment">// å¯¼å‡ºæ–‡ä»¶ç±»å‹</span>
  sheetName?: <span class="hljs-built_in">string</span> <span class="hljs-comment">// sheetåç§°</span>
  errorMsg?: <span class="hljs-built_in">string</span> <span class="hljs-comment">// é”™è¯¯æç¤º</span>
  headers?: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">string</span>&gt; <span class="hljs-comment">// è‡ªå®šä¹‰è¡¨å¤´ï¼Œå¯¼å‡ºçš„æ–‡ä»¶é‡Œé¢åªæœ‰åœ¨å®šä¹‰ä¸­çš„å­—æ®µï¼Œå¹¶ä¸”å¦‚æœæ•°æ®ä¸ºç©ºçš„è¯ï¼Œåªç”Ÿæˆä¸€ä¸ªè¡¨å¤´ã€‚ç¤ºä¾‹ï¼š{id: 'ID', name: 'é“¾æ¥åç§°', site_type: 'å®˜ç½‘ç±»å‹'}</span>
  merges?: <span class="hljs-title class_">Range</span>[] <span class="hljs-comment">// å•å…ƒæ ¼åˆå¹¶</span>
  colInfo?: <span class="hljs-title class_">ColInfo</span>[] <span class="hljs-comment">// åˆ—å±æ€§</span>
  rowInfo?: <span class="hljs-title class_">RowInfo</span>[] <span class="hljs-comment">// è¡Œå±æ€§</span>
}

<span class="hljs-comment">// å¤šsheetå¯¼å‡º</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> <span class="hljs-title class_">IExtraSheetConfig</span> = {
  name?: <span class="hljs-built_in">string</span> <span class="hljs-comment">// å¯¼å‡ºæ–‡ä»¶åç§°</span>
  bookType?: <span class="hljs-title class_">BookType</span> <span class="hljs-comment">// å¯¼å‡ºæ–‡ä»¶ç±»å‹</span>
  <span class="hljs-attr">sheets</span>: ({ <span class="hljs-attr">json</span>: <span class="hljs-built_in">any</span>[] } &amp; <span class="hljs-title class_">Omit</span>&lt;<span class="hljs-title class_">IExportConfig</span>, <span class="hljs-string">'name'</span> | <span class="hljs-string">'bookType'</span>&gt;)[]
}

<span class="hljs-comment">/**
 * <span class="hljs-doctag">@desc</span> è‡ªå®šä¹‰å¯¼å‡ºæ–‡ä»¶hook
 */</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">useExcel</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-comment">/**
   * <span class="hljs-doctag">@desc</span> ä¸€ç»´æ•°ç»„å¯¼å‡ºExcelæ–‡ä»¶
   *
   * æ­¤å‡½æ•°å°†ä¸€ä¸ªä¸€ç»´æ•°ç»„è½¬æ¢ä¸ºExcelæ–‡ä»¶å¹¶ä¸‹è½½
   * æ”¯æŒè‡ªå®šä¹‰è¡¨å¤´ã€å•å…ƒæ ¼åˆå¹¶ã€åˆ—å±æ€§å’Œè¡Œå±æ€§
   *
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">any[]</span>} <span class="hljs-variable">json</span> - è¦å¯¼å‡ºçš„æ•°æ®æ•°ç»„
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">IExportConfig</span>} <span class="hljs-variable">config</span> - å¯¼å‡ºé…ç½®é¡¹
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} [config.name='å¯¼å‡º'] - å¯¼å‡ºæ–‡ä»¶åç§°
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">BookType</span>} [config.bookType='xlsx'] - å¯¼å‡ºæ–‡ä»¶ç±»å‹
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} [config.sheetName='Sheet1'] - å·¥ä½œè¡¨åç§°
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Record&lt;string, string&gt;</span>} [config.headers] - è‡ªå®šä¹‰è¡¨å¤´æ˜ å°„
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Range[]</span>} [config.merges] - å•å…ƒæ ¼åˆå¹¶èŒƒå›´
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">ColInfo[]</span>} [config.colInfo] - åˆ—å±æ€§é…ç½®
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">RowInfo[]</span>} [config.rowInfo] - è¡Œå±æ€§é…ç½®
   * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">void</span>}
   */</span>
  <span class="hljs-keyword">function</span> exportJson2Excel&lt;T = <span class="hljs-built_in">any</span>&gt;(<span class="hljs-attr">json</span>: T[], config?: <span class="hljs-title class_">IExportConfig</span>) {
    <span class="hljs-keyword">const</span> {
      name = <span class="hljs-string">'å¯¼å‡º'</span>,
      sheetName = <span class="hljs-string">'Sheet1'</span>,
      bookType = <span class="hljs-string">'xlsx'</span>,
      headers,
      merges,
      colInfo,
      rowInfo,
    } = config || {}
    <span class="hljs-keyword">let</span> lists = [...json]
    <span class="hljs-keyword">if</span> (
      headers &amp;&amp;
      <span class="hljs-title function_">getTypeOf</span>(headers) === <span class="hljs-string">'Object'</span> &amp;&amp;
      <span class="hljs-title function_">isAvailableArr</span>(<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(headers))
    ) {
      <span class="hljs-comment">// æ²¡æœ‰æ•°æ®çš„æ—¶å€™ç”¨headerå»ç”Ÿæˆä¸€ä¸ªç©ºè¡¨å¤´</span>
      <span class="hljs-keyword">if</span> (!<span class="hljs-title function_">isAvailableArr</span>(lists)) {
        <span class="hljs-keyword">const</span> headersField = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">values</span>(headers)
        <span class="hljs-keyword">const</span> <span class="hljs-attr">headerObj</span>: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">any</span>&gt; = {}
        headersField.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">f</span>) =&gt;</span> {
          headerObj[f] = <span class="hljs-literal">null</span>
        })
        lists = [headerObj <span class="hljs-keyword">as</span> T]
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-comment">// æœ‰æ•°æ®çš„æ—¶å€™æ ¹æ®headerå»ç”Ÿæˆ</span>
        <span class="hljs-keyword">const</span> headerFields = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">entries</span>(headers)
        lists = json.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">j</span>) =&gt;</span> {
          <span class="hljs-keyword">const</span> <span class="hljs-attr">obj</span>: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">any</span>&gt; = {}
          <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> [key, value] <span class="hljs-keyword">of</span> headerFields) {
            obj[value] = j[key <span class="hljs-keyword">as</span> keyof T] ?? <span class="hljs-literal">null</span>
          }
          <span class="hljs-keyword">return</span> obj
        }) <span class="hljs-keyword">as</span> T[]
      }
    }

    <span class="hljs-keyword">const</span> wb = <span class="hljs-variable constant_">XLSX</span>.<span class="hljs-property">utils</span>.<span class="hljs-title function_">book_new</span>()
    <span class="hljs-keyword">const</span> ws = <span class="hljs-variable constant_">XLSX</span>.<span class="hljs-property">utils</span>.<span class="hljs-title function_">json_to_sheet</span>(lists)
    <span class="hljs-keyword">if</span> (merges) {
      ws[<span class="hljs-string">'!merges'</span>] = merges
    }
    <span class="hljs-keyword">if</span> (colInfo) {
      ws[<span class="hljs-string">'!cols'</span>] = colInfo
    }
    <span class="hljs-keyword">if</span> (rowInfo) {
      ws[<span class="hljs-string">'!rows'</span>] = rowInfo
    }
    <span class="hljs-variable constant_">XLSX</span>.<span class="hljs-property">utils</span>.<span class="hljs-title function_">book_append_sheet</span>(wb, ws, sheetName)
    <span class="hljs-variable constant_">XLSX</span>.<span class="hljs-title function_">writeFile</span>(wb, <span class="hljs-string">`<span class="hljs-subst">${name}</span>.<span class="hljs-subst">${bookType}</span>`</span>, { bookType })
  }

  <span class="hljs-comment">/**
   * <span class="hljs-doctag">@desc</span> ä¸€ç»´æ•°ç»„å¤šsheetå¯¼å‡ºExcelæ–‡ä»¶
   *
   * æ­¤å‡½æ•°å°†å¤šä¸ªä¸€ç»´æ•°ç»„åˆ†åˆ«æ”¾åœ¨ä¸åŒçš„å·¥ä½œè¡¨ä¸­å¯¼å‡ºä¸ºä¸€ä¸ªExcelæ–‡ä»¶
   * æ”¯æŒè‡ªå®šä¹‰è¡¨å¤´ã€å•å…ƒæ ¼åˆå¹¶ã€åˆ—å±æ€§å’Œè¡Œå±æ€§
   *
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">IExtraSheetConfig</span>} <span class="hljs-variable">params</span> - å¤šsheetå¯¼å‡ºé…ç½®é¡¹
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} [params.name='å¯¼å‡º'] - å¯¼å‡ºæ–‡ä»¶åç§°
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">BookType</span>} [params.bookType='xlsx'] - å¯¼å‡ºæ–‡ä»¶ç±»å‹
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Array</span>} params.sheets - å·¥ä½œè¡¨é…ç½®æ•°ç»„
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">any[]</span>} params.sheets[].json - è¦å¯¼å‡ºçš„æ•°æ®æ•°ç»„
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} [params.sheets[].sheetName] - å·¥ä½œè¡¨åç§°
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Record&lt;string, string&gt;</span>} [params.sheets[].headers] - è‡ªå®šä¹‰è¡¨å¤´æ˜ å°„
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Range[]</span>} [params.sheets[].merges] - å•å…ƒæ ¼åˆå¹¶èŒƒå›´
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">ColInfo[]</span>} [params.sheets[].colInfo] - åˆ—å±æ€§é…ç½®
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">RowInfo[]</span>} [params.sheets[].rowInfo] - è¡Œå±æ€§é…ç½®
   * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">void</span>}
   */</span>
  <span class="hljs-keyword">function</span> exportJson2ExcelSheets&lt;T = <span class="hljs-built_in">any</span>&gt;(<span class="hljs-attr">params</span>: <span class="hljs-title class_">IExtraSheetConfig</span>) {
    <span class="hljs-keyword">const</span> { name = <span class="hljs-string">'å¯¼å‡º'</span>, bookType = <span class="hljs-string">'xlsx'</span>, sheets } = params || {}
    <span class="hljs-keyword">const</span> wb = <span class="hljs-variable constant_">XLSX</span>.<span class="hljs-property">utils</span>.<span class="hljs-title function_">book_new</span>()
    <span class="hljs-keyword">if</span> (<span class="hljs-title function_">isAvailableArr</span>(sheets)) {
      sheets?.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">s</span>) =&gt;</span> {
        <span class="hljs-keyword">const</span> { json, headers, merges, colInfo, rowInfo, sheetName } = s || {}
        <span class="hljs-keyword">let</span> lists = [...json]
        <span class="hljs-keyword">if</span> (
          headers &amp;&amp;
          <span class="hljs-title function_">getTypeOf</span>(headers) === <span class="hljs-string">'Object'</span> &amp;&amp;
          <span class="hljs-title function_">isAvailableArr</span>(<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(headers))
        ) {
          <span class="hljs-comment">// æ²¡æœ‰æ•°æ®çš„æ—¶å€™ç”¨headerå»ç”Ÿæˆä¸€ä¸ªç©ºè¡¨å¤´</span>
          <span class="hljs-keyword">if</span> (!<span class="hljs-title function_">isAvailableArr</span>(lists)) {
            <span class="hljs-keyword">const</span> headersField = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">values</span>(headers)
            <span class="hljs-keyword">const</span> <span class="hljs-attr">headerObj</span>: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">any</span>&gt; = {}
            headersField.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">f</span>) =&gt;</span> {
              headerObj[f] = <span class="hljs-literal">null</span>
            })
            lists = [headerObj <span class="hljs-keyword">as</span> T]
          } <span class="hljs-keyword">else</span> {
            <span class="hljs-comment">// æœ‰æ•°æ®çš„æ—¶å€™æ ¹æ®headerå»ç”Ÿæˆ</span>
            <span class="hljs-keyword">const</span> headerFields = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">entries</span>(headers)
            lists = json.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">j</span>) =&gt;</span> {
              <span class="hljs-keyword">const</span> <span class="hljs-attr">obj</span>: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">any</span>&gt; = {}
              <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> [key, value] <span class="hljs-keyword">of</span> headerFields) {
                obj[value] = j[key] ?? <span class="hljs-literal">null</span>
              }
              <span class="hljs-keyword">return</span> obj
            }) <span class="hljs-keyword">as</span> T[]
          }
        }

        <span class="hljs-keyword">const</span> ws = <span class="hljs-variable constant_">XLSX</span>.<span class="hljs-property">utils</span>.<span class="hljs-title function_">json_to_sheet</span>(lists)
        <span class="hljs-keyword">if</span> (merges) {
          ws[<span class="hljs-string">'!merges'</span>] = merges
        }
        <span class="hljs-keyword">if</span> (colInfo) {
          ws[<span class="hljs-string">'!cols'</span>] = colInfo
        }
        <span class="hljs-keyword">if</span> (rowInfo) {
          ws[<span class="hljs-string">'!rows'</span>] = rowInfo
        }
        <span class="hljs-variable constant_">XLSX</span>.<span class="hljs-property">utils</span>.<span class="hljs-title function_">book_append_sheet</span>(wb, ws, sheetName)
      })
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">const</span> ws = <span class="hljs-variable constant_">XLSX</span>.<span class="hljs-property">utils</span>.<span class="hljs-title function_">json_to_sheet</span>([])
      <span class="hljs-variable constant_">XLSX</span>.<span class="hljs-property">utils</span>.<span class="hljs-title function_">book_append_sheet</span>(wb, ws)
    }

    <span class="hljs-variable constant_">XLSX</span>.<span class="hljs-title function_">writeFile</span>(wb, <span class="hljs-string">`<span class="hljs-subst">${name}</span>.<span class="hljs-subst">${bookType}</span>`</span>, { bookType })
  }

  <span class="hljs-comment">/**
   * <span class="hljs-doctag">@desc</span> äºŒç»´æ•°ç»„å¯¼å‡ºExcelæ–‡ä»¶
   *
   * æ­¤å‡½æ•°å°†ä¸€ä¸ªäºŒç»´æ•°ç»„è½¬æ¢ä¸ºExcelæ–‡ä»¶å¹¶ä¸‹è½½
   * æ”¯æŒå•å…ƒæ ¼åˆå¹¶ã€åˆ—å±æ€§å’Œè¡Œå±æ€§
   *
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">any[][]</span>} <span class="hljs-variable">aoas</span> - è¦å¯¼å‡ºçš„äºŒç»´æ•°ç»„
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">IExportConfig</span>} <span class="hljs-variable">config</span> - å¯¼å‡ºé…ç½®é¡¹
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} [config.name='å¯¼å‡º'] - å¯¼å‡ºæ–‡ä»¶åç§°
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">BookType</span>} [config.bookType='xlsx'] - å¯¼å‡ºæ–‡ä»¶ç±»å‹
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} [config.sheetName='Sheet1'] - å·¥ä½œè¡¨åç§°
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Range[]</span>} [config.merges] - å•å…ƒæ ¼åˆå¹¶èŒƒå›´
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">ColInfo[]</span>} [config.colInfo] - åˆ—å±æ€§é…ç½®
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">RowInfo[]</span>} [config.rowInfo] - è¡Œå±æ€§é…ç½®
   * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">void</span>}
   */</span>
  <span class="hljs-keyword">function</span> exportAoa2Excel&lt;T = <span class="hljs-built_in">any</span>&gt;(<span class="hljs-attr">aoas</span>: T[][], config?: <span class="hljs-title class_">IExportConfig</span>) {
    <span class="hljs-keyword">const</span> {
      name = <span class="hljs-string">'å¯¼å‡º'</span>,
      sheetName = <span class="hljs-string">'Sheet1'</span>,
      bookType = <span class="hljs-string">'xlsx'</span>,
      merges,
      colInfo,
      rowInfo,
    } = config || {}

    <span class="hljs-keyword">const</span> wb = <span class="hljs-variable constant_">XLSX</span>.<span class="hljs-property">utils</span>.<span class="hljs-title function_">book_new</span>()
    <span class="hljs-keyword">const</span> ws = <span class="hljs-variable constant_">XLSX</span>.<span class="hljs-property">utils</span>.<span class="hljs-title function_">aoa_to_sheet</span>(aoas)
    <span class="hljs-keyword">if</span> (merges) {
      ws[<span class="hljs-string">'!merges'</span>] = merges
    }
    <span class="hljs-keyword">if</span> (colInfo) {
      ws[<span class="hljs-string">'!cols'</span>] = colInfo
    }
    <span class="hljs-keyword">if</span> (rowInfo) {
      ws[<span class="hljs-string">'!rows'</span>] = rowInfo
    }

    <span class="hljs-variable constant_">XLSX</span>.<span class="hljs-property">utils</span>.<span class="hljs-title function_">book_append_sheet</span>(wb, ws, sheetName)
    <span class="hljs-variable constant_">XLSX</span>.<span class="hljs-title function_">writeFile</span>(wb, <span class="hljs-string">`<span class="hljs-subst">${name}</span>.<span class="hljs-subst">${bookType}</span>`</span>, { bookType })
  }

  <span class="hljs-comment">/**
   * <span class="hljs-doctag">@desc</span> ä»æœ¬åœ°æ–‡ä»¶è¯»å–Excelå·¥ä½œç°¿
   *
   * æ­¤å‡½æ•°ä»Fileæˆ–Blobå¯¹è±¡è¯»å–Excelæ–‡ä»¶å¹¶è¿”å›å·¥ä½œç°¿å¯¹è±¡
   *
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">File | Blob</span>} <span class="hljs-variable">file</span> - è¦è¯»å–çš„Excelæ–‡ä»¶
   * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">Promise&lt;WorkBook | false&gt;</span>} è¿”å›å·¥ä½œç°¿å¯¹è±¡æˆ–falseï¼ˆè¯»å–å¤±è´¥æ—¶ï¼‰
   */</span>
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">readWorkbookFromLocalFile</span>(<span class="hljs-params">
    file: File | Blob,
  </span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">WorkBook</span> | <span class="hljs-literal">false</span>&gt; {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> {
      <span class="hljs-keyword">const</span> reader = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileReader</span>()
      reader.<span class="hljs-title function_">readAsBinaryString</span>(file)
      reader.<span class="hljs-property">onload</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) {
        <span class="hljs-keyword">const</span> data = (e.<span class="hljs-property">target</span> <span class="hljs-keyword">as</span> <span class="hljs-built_in">any</span>)?.<span class="hljs-property">result</span>
        <span class="hljs-keyword">const</span> workbook = <span class="hljs-variable constant_">XLSX</span>.<span class="hljs-title function_">read</span>(data, {
          <span class="hljs-attr">type</span>: <span class="hljs-string">'binary'</span>,
          <span class="hljs-attr">raw</span>: <span class="hljs-literal">true</span>,
          <span class="hljs-attr">cellNF</span>: <span class="hljs-literal">true</span>,
        })
        <span class="hljs-title function_">resolve</span>(workbook)
      }
      reader.<span class="hljs-property">onerror</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
        <span class="hljs-title function_">resolve</span>(<span class="hljs-literal">false</span>)
      }
    })
  }

  <span class="hljs-comment">/**
   * <span class="hljs-doctag">@desc</span> ä»æœ¬åœ°Excelæ–‡ä»¶è¯»å–æ•°æ®ä¸ºJSONæ ¼å¼
   *
   * æ­¤å‡½æ•°ä»Fileæˆ–Blobå¯¹è±¡è¯»å–Excelæ–‡ä»¶å¹¶è¿”å›ç¬¬ä¸€ä¸ªå·¥ä½œè¡¨çš„æ•°æ®ä¸ºJSONæ•°ç»„
   *
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">File | Blob</span>} <span class="hljs-variable">file</span> - è¦è¯»å–çš„Excelæ–‡ä»¶
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Sheet2JSONOpts</span>} [options] - å·¥ä½œè¡¨è½¬JSONçš„é€‰é¡¹
   * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">Promise&lt;any[] | false&gt;</span>} è¿”å›JSONæ•°ç»„æˆ–falseï¼ˆè¯»å–å¤±è´¥æ—¶ï¼‰
   */</span>
  <span class="hljs-keyword">function</span> readFileToJson&lt;T = <span class="hljs-built_in">any</span>&gt;(
    <span class="hljs-attr">file</span>: <span class="hljs-title class_">File</span> | <span class="hljs-title class_">Blob</span>,
    options?: <span class="hljs-title class_">Sheet2JSONOpts</span>,
  ): <span class="hljs-title class_">Promise</span>&lt;T[] | <span class="hljs-literal">false</span>&gt; {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> {
      <span class="hljs-keyword">const</span> reader = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileReader</span>()
      reader.<span class="hljs-title function_">readAsBinaryString</span>(file)
      reader.<span class="hljs-property">onload</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) {
        <span class="hljs-keyword">const</span> data = (e.<span class="hljs-property">target</span> <span class="hljs-keyword">as</span> <span class="hljs-built_in">any</span>)?.<span class="hljs-property">result</span>
        <span class="hljs-keyword">const</span> workbook = <span class="hljs-variable constant_">XLSX</span>.<span class="hljs-title function_">read</span>(data, {
          <span class="hljs-attr">type</span>: <span class="hljs-string">'binary'</span>,
          <span class="hljs-attr">raw</span>: <span class="hljs-literal">true</span>,
          <span class="hljs-attr">cellNF</span>: <span class="hljs-literal">true</span>,
        })
        <span class="hljs-keyword">const</span> json = <span class="hljs-variable constant_">XLSX</span>.<span class="hljs-property">utils</span>.<span class="hljs-property">sheet_to_json</span>&lt;T&gt;(
          workbook.<span class="hljs-property">Sheets</span>[workbook.<span class="hljs-property">SheetNames</span>[<span class="hljs-number">0</span>]],
          options,
        )
        <span class="hljs-title function_">resolve</span>(json)
      }
      reader.<span class="hljs-property">onerror</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
        <span class="hljs-title function_">resolve</span>(<span class="hljs-literal">false</span>)
      }
    })
  }

  <span class="hljs-comment">/**
   * <span class="hljs-doctag">@desc</span> ä»æœ¬åœ°Excelæ–‡ä»¶è¯»å–å¤šä¸ªå·¥ä½œè¡¨çš„æ•°æ®ä¸ºJSONæ ¼å¼
   *
   * æ­¤å‡½æ•°ä»Fileæˆ–Blobå¯¹è±¡è¯»å–Excelæ–‡ä»¶å¹¶è¿”å›æ‰€æœ‰å·¥ä½œè¡¨çš„æ•°æ®ä¸ºJSONå¯¹è±¡
   *
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">File | Blob</span>} <span class="hljs-variable">file</span> - è¦è¯»å–çš„Excelæ–‡ä»¶
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Sheet2JSONOpts</span>} [options] - å·¥ä½œè¡¨è½¬JSONçš„é€‰é¡¹
   * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">Promise&lt;Record&lt;string, any[]&gt; | false&gt;</span>} è¿”å›åŒ…å«æ‰€æœ‰å·¥ä½œè¡¨æ•°æ®çš„å¯¹è±¡æˆ–falseï¼ˆè¯»å–å¤±è´¥æ—¶ï¼‰
   */</span>
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">readFileToJsons</span>(<span class="hljs-params">
    file: File | Blob,
    options?: Sheet2JSONOpts,
  </span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">any</span>[]&gt; | <span class="hljs-literal">false</span>&gt; {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> {
      <span class="hljs-keyword">const</span> reader = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileReader</span>()
      reader.<span class="hljs-title function_">readAsBinaryString</span>(file)
      reader.<span class="hljs-property">onload</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) {
        <span class="hljs-keyword">const</span> data = e.<span class="hljs-property">target</span>?.<span class="hljs-property">result</span>
        <span class="hljs-keyword">const</span> workbook = <span class="hljs-variable constant_">XLSX</span>.<span class="hljs-title function_">read</span>(data, {
          <span class="hljs-attr">type</span>: <span class="hljs-string">'binary'</span>,
          <span class="hljs-attr">raw</span>: <span class="hljs-literal">true</span>,
          <span class="hljs-attr">cellNF</span>: <span class="hljs-literal">true</span>,
        })

        <span class="hljs-keyword">const</span> sheetNames = workbook.<span class="hljs-property">SheetNames</span>
        <span class="hljs-keyword">if</span> (!sheetNames?.<span class="hljs-property">length</span>) {
          <span class="hljs-title function_">resolve</span>(<span class="hljs-literal">false</span>)
        }

        <span class="hljs-keyword">const</span> jsons = sheetNames.<span class="hljs-title function_">reduce</span>(
          <span class="hljs-function">(<span class="hljs-params">pre: Record&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">any</span>[]&gt;, cur: <span class="hljs-built_in">string</span></span>) =&gt;</span> {
            <span class="hljs-keyword">const</span> json = <span class="hljs-variable constant_">XLSX</span>.<span class="hljs-property">utils</span>.<span class="hljs-title function_">sheet_to_json</span>(workbook.<span class="hljs-property">Sheets</span>[cur], options)
            pre[cur] = json
            <span class="hljs-keyword">return</span> pre
          },
          {},
        )

        <span class="hljs-title function_">resolve</span>(jsons)
      }
      reader.<span class="hljs-property">onerror</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
        <span class="hljs-title function_">resolve</span>(<span class="hljs-literal">false</span>)
      }
    })
  }

  <span class="hljs-comment">/**
   * <span class="hljs-doctag">@desc</span> æ–‡ä»¶æµå¯¼å‡ºExcelæ–‡ä»¶
   *
   * æ­¤å‡½æ•°ä»Fileæˆ–Blobå¯¹è±¡è¯»å–Excelæ–‡ä»¶æµå¹¶å¯¼å‡ºä¸ºExcelæ–‡ä»¶
   *
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">File | Blob</span>} <span class="hljs-variable">file</span> - è¦å¯¼å‡ºçš„Excelæ–‡ä»¶æµ
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">IExportConfig</span>} <span class="hljs-variable">config</span> - å¯¼å‡ºé…ç½®é¡¹
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} [config.name='å¯¼å‡º'] - å¯¼å‡ºæ–‡ä»¶åç§°
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">BookType</span>} [config.bookType='xlsx'] - å¯¼å‡ºæ–‡ä»¶ç±»å‹
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} [config.errorMsg='ä¸‹è½½å¤±è´¥'] - é”™è¯¯æç¤ºä¿¡æ¯
   * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">Promise&lt;void&gt;</span>}
   */</span>
  <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">exportBuffer2Excel</span>(<span class="hljs-params">file: File | Blob, config?: IExportConfig</span>) {
    <span class="hljs-keyword">const</span> {
      name = <span class="hljs-string">'å¯¼å‡º'</span>,
      bookType = <span class="hljs-string">'xlsx'</span>,
      errorMsg = <span class="hljs-string">'ä¸‹è½½å¤±è´¥'</span>,
    } = config || {}
    <span class="hljs-keyword">const</span> <span class="hljs-attr">wb</span>: <span class="hljs-title class_">WorkBook</span> | <span class="hljs-literal">false</span> = <span class="hljs-keyword">await</span> <span class="hljs-title function_">readWorkbookFromLocalFile</span>(file)
    <span class="hljs-keyword">if</span> (wb) {
      <span class="hljs-variable constant_">XLSX</span>.<span class="hljs-title function_">writeFile</span>(wb, <span class="hljs-string">`<span class="hljs-subst">${name}</span>.<span class="hljs-subst">${bookType}</span>`</span>, { bookType })
    } <span class="hljs-keyword">else</span> {
      message.<span class="hljs-title function_">error</span>(errorMsg)
    }
  }

  <span class="hljs-comment">/**
   * <span class="hljs-doctag">@desc</span> ä»URLå¯¼å‡ºExcelæ–‡ä»¶
   *
   * æ­¤å‡½æ•°ä»URLè·å–Excelæ–‡ä»¶å¹¶å¯¼å‡º
   *
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} <span class="hljs-variable">url</span> - Excelæ–‡ä»¶çš„URLåœ°å€
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">IExportConfig</span>} <span class="hljs-variable">config</span> - å¯¼å‡ºé…ç½®é¡¹
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} [config.name='å¯¼å‡º'] - å¯¼å‡ºæ–‡ä»¶åç§°
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">BookType</span>} [config.bookType='xlsx'] - å¯¼å‡ºæ–‡ä»¶ç±»å‹
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} [config.errorMsg='ä¸‹è½½å¤±è´¥'] - é”™è¯¯æç¤ºä¿¡æ¯
   * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">Promise&lt;void&gt;</span>}
   */</span>
  <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">exportUrl2Excel</span>(<span class="hljs-params">url: <span class="hljs-built_in">string</span>, config?: IExportConfig</span>) {
    <span class="hljs-title function_">fetch</span>(url)
      .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">response</span>) =&gt;</span> response.<span class="hljs-title function_">blob</span>())
      .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">blob</span>) =&gt;</span> {
        <span class="hljs-title function_">exportBuffer2Excel</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Blob</span>([blob]), config)
      })
      .<span class="hljs-keyword">catch</span>(<span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> {
        <span class="hljs-keyword">throw</span> error
      })
  }

  <span class="hljs-comment">/**
   * <span class="hljs-doctag">@desc</span> ä»å·¥ä½œè¡¨ä¸­è¯»å–æŒ‡å®šåˆ—çš„æ•°æ®
   *
   * æ­¤å‡½æ•°ä»Excelæ–‡ä»¶çš„æŒ‡å®šå·¥ä½œè¡¨ä¸­è¯»å–æŒ‡å®šåˆ—çš„æ•°æ®
   *
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">File | Blob</span>} <span class="hljs-variable">file</span> - Excelæ–‡ä»¶
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">number</span>} [sheetIndex=0] - å·¥ä½œè¡¨ç´¢å¼•
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string[]</span>} [columns=['A']] - è¦è¯»å–çš„åˆ—æ•°ç»„ï¼ˆå¦‚['A', 'B']ï¼‰
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Record&lt;string, string&gt;</span>} [fieldsMap={}] - åˆ—ååˆ°å­—æ®µåçš„æ˜ å°„
   * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">Promise&lt;any[] | false&gt;</span>} è¿”å›åŒ…å«æŒ‡å®šåˆ—æ•°æ®çš„æ•°ç»„æˆ–falseï¼ˆè¯»å–å¤±è´¥æ—¶ï¼‰
   */</span>
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">readColumnFromSheet</span>(<span class="hljs-params">
    file: File | Blob,
    sheetIndex: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>,
    columns: <span class="hljs-built_in">string</span>[] = [<span class="hljs-string">'A'</span>],
    fieldsMap: Record&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">string</span>&gt; = {},
  </span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">any</span>[] | <span class="hljs-literal">false</span>&gt; {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> {
      <span class="hljs-keyword">const</span> reader = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileReader</span>()
      reader.<span class="hljs-title function_">readAsBinaryString</span>(file)
      reader.<span class="hljs-property">onload</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) {
        <span class="hljs-keyword">const</span> data = (e.<span class="hljs-property">target</span> <span class="hljs-keyword">as</span> <span class="hljs-built_in">any</span>)?.<span class="hljs-property">result</span>
        <span class="hljs-keyword">const</span> workbook = <span class="hljs-variable constant_">XLSX</span>.<span class="hljs-title function_">read</span>(data, {
          <span class="hljs-attr">type</span>: <span class="hljs-string">'binary'</span>,
          <span class="hljs-attr">raw</span>: <span class="hljs-literal">true</span>,
          <span class="hljs-attr">cellNF</span>: <span class="hljs-literal">true</span>,
        })

        <span class="hljs-keyword">const</span> sheetName = workbook.<span class="hljs-property">SheetNames</span>[sheetIndex]
        <span class="hljs-keyword">const</span> worksheet = workbook.<span class="hljs-property">Sheets</span>[sheetName]

        <span class="hljs-comment">// è·å– A åˆ—çš„æ‰€æœ‰æ•°æ®ï¼Œè·³è¿‡ç¬¬ä¸€è¡Œï¼ˆæ ‡é¢˜è¡Œï¼‰</span>
        <span class="hljs-keyword">const</span> columnData = []
        <span class="hljs-keyword">const</span> range = <span class="hljs-variable constant_">XLSX</span>.<span class="hljs-property">utils</span>.<span class="hljs-title function_">decode_range</span>(worksheet[<span class="hljs-string">'!ref'</span>] <span class="hljs-keyword">as</span> <span class="hljs-built_in">string</span>)

        <span class="hljs-comment">// ä»ç¬¬2è¡Œå¼€å§‹ï¼ˆç´¢å¼•ä¸º1ï¼Œè·³è¿‡æ ‡é¢˜è¡Œï¼‰</span>
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> row = range.<span class="hljs-property">s</span>.<span class="hljs-property">r</span> + <span class="hljs-number">1</span>; row &lt;= range.<span class="hljs-property">e</span>.<span class="hljs-property">r</span>; row++) {
          <span class="hljs-keyword">const</span> <span class="hljs-attr">res</span>: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">any</span>&gt; = {}
          columns.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">col: <span class="hljs-built_in">string</span></span>) =&gt;</span> {
            <span class="hljs-keyword">const</span> columnIndex = <span class="hljs-variable constant_">XLSX</span>.<span class="hljs-property">utils</span>.<span class="hljs-title function_">decode_col</span>(col) <span class="hljs-comment">// å°†åˆ—å­—æ¯è½¬æ¢ä¸ºç´¢å¼•</span>
            <span class="hljs-keyword">const</span> cellAddress = <span class="hljs-variable constant_">XLSX</span>.<span class="hljs-property">utils</span>.<span class="hljs-title function_">encode_cell</span>({
              <span class="hljs-attr">r</span>: row,
              <span class="hljs-attr">c</span>: columnIndex,
            }) <span class="hljs-comment">// Aåˆ—æ˜¯ç¬¬0åˆ—</span>
            <span class="hljs-keyword">const</span> cell = worksheet[cellAddress]
            <span class="hljs-keyword">const</span> field = fieldsMap[col] ?? col
            res[field] = cell ? cell.<span class="hljs-property">v</span> : <span class="hljs-string">''</span>
          })
          columnData.<span class="hljs-title function_">push</span>(res)
        }

        <span class="hljs-title function_">resolve</span>(columnData)
      }
      reader.<span class="hljs-property">onerror</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
        <span class="hljs-title function_">resolve</span>(<span class="hljs-literal">false</span>)
      }
    })
  }

  <span class="hljs-comment">/**
   * <span class="hljs-doctag">@desc</span> ä»å·¥ä½œè¡¨ä¸­è·å–æŒ‡å®šåˆ—çš„æ•°æ®
   *
   * æ­¤å‡½æ•°ä»Excelå·¥ä½œè¡¨ä¸­è·å–æŒ‡å®šåˆ—çš„æ‰€æœ‰æ•°æ®ï¼ˆè·³è¿‡æ ‡é¢˜è¡Œï¼‰
   *
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">XLSX.WorkSheet</span>} <span class="hljs-variable">worksheet</span> - Excelå·¥ä½œè¡¨å¯¹è±¡
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} <span class="hljs-variable">column</span> - è¦è·å–æ•°æ®çš„åˆ—ï¼ˆå¦‚'A'ã€'B'ï¼‰
   * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">any[]</span>} è¿”å›æŒ‡å®šåˆ—çš„æ•°æ®æ•°ç»„
   */</span>
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">getColumnData</span>(<span class="hljs-params">worksheet: XLSX.WorkSheet, column: <span class="hljs-built_in">string</span></span>) {
    <span class="hljs-keyword">const</span> columnData = []
    <span class="hljs-keyword">const</span> range = <span class="hljs-variable constant_">XLSX</span>.<span class="hljs-property">utils</span>.<span class="hljs-title function_">decode_range</span>(worksheet[<span class="hljs-string">'!ref'</span>] <span class="hljs-keyword">as</span> <span class="hljs-built_in">string</span>)
    <span class="hljs-keyword">const</span> columnIndex = <span class="hljs-variable constant_">XLSX</span>.<span class="hljs-property">utils</span>.<span class="hljs-title function_">decode_col</span>(column) <span class="hljs-comment">// å°†åˆ—å­—æ¯è½¬æ¢ä¸ºç´¢å¼•</span>

    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> row = range.<span class="hljs-property">s</span>.<span class="hljs-property">r</span> + <span class="hljs-number">1</span>; row &lt;= range.<span class="hljs-property">e</span>.<span class="hljs-property">r</span>; row++) {
      <span class="hljs-keyword">const</span> cellAddress = <span class="hljs-variable constant_">XLSX</span>.<span class="hljs-property">utils</span>.<span class="hljs-title function_">encode_cell</span>({ <span class="hljs-attr">r</span>: row, <span class="hljs-attr">c</span>: columnIndex })
      <span class="hljs-keyword">const</span> cell = worksheet[cellAddress]
      columnData.<span class="hljs-title function_">push</span>(cell ? cell.<span class="hljs-property">v</span> : <span class="hljs-literal">null</span>)
    }

    <span class="hljs-keyword">return</span> columnData
  }

  <span class="hljs-comment">/**
   * <span class="hljs-doctag">@desc</span> ä»æœ¬åœ°æ–‡ä»¶è¯»å–Excelå·¥ä½œç°¿
   *
   * æ­¤å‡½æ•°ä»Fileæˆ–Blobå¯¹è±¡è¯»å–Excelæ–‡ä»¶å¹¶è¿”å›å·¥ä½œç°¿å¯¹è±¡
   *
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">File | Blob</span>} <span class="hljs-variable">file</span> - è¦è¯»å–çš„Excelæ–‡ä»¶
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">XLSX.ParsingOptions</span>} [options] - è§£æé€‰é¡¹
   * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">Promise&lt;WorkBook | false&gt;</span>} è¿”å›å·¥ä½œç°¿å¯¹è±¡æˆ–falseï¼ˆè¯»å–å¤±è´¥æ—¶ï¼‰
   */</span>
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">readWorkbookFromFile</span>(<span class="hljs-params">
    file: File | Blob,
    options: XLSX.ParsingOptions = {
      <span class="hljs-keyword">type</span>: <span class="hljs-string">'binary'</span>,
      raw: <span class="hljs-literal">true</span>,
      cellNF: <span class="hljs-literal">true</span>,
    },
  </span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">WorkBook</span> | <span class="hljs-literal">false</span>&gt; {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> {
      <span class="hljs-keyword">const</span> reader = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileReader</span>()
      reader.<span class="hljs-title function_">readAsBinaryString</span>(file)
      reader.<span class="hljs-property">onload</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) {
        <span class="hljs-keyword">const</span> data = (e.<span class="hljs-property">target</span> <span class="hljs-keyword">as</span> <span class="hljs-built_in">any</span>)?.<span class="hljs-property">result</span>
        <span class="hljs-keyword">const</span> workbook = <span class="hljs-variable constant_">XLSX</span>.<span class="hljs-title function_">read</span>(data, options)
        <span class="hljs-title function_">resolve</span>(workbook)
      }
    })
  }

  <span class="hljs-comment">/**
   * <span class="hljs-doctag">@desc</span> ä»URLè¯»å–Excelå·¥ä½œç°¿
   *
   * æ­¤å‡½æ•°ä»URLè¯»å–Excelæ–‡ä»¶å¹¶è¿”å›å·¥ä½œç°¿å¯¹è±¡
   *
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} <span class="hljs-variable">url</span> - Excelæ–‡ä»¶çš„URLåœ°å€
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">XLSX.ParsingOptions</span>} [options] - è§£æé€‰é¡¹
   * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">WorkBook</span>} è¿”å›å·¥ä½œç°¿å¯¹è±¡
   */</span>
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">readWorkbookFromUrl</span>(<span class="hljs-params">
    url: <span class="hljs-built_in">string</span>,
    options: XLSX.ParsingOptions = {
      <span class="hljs-keyword">type</span>: <span class="hljs-string">'string'</span>,
      raw: <span class="hljs-literal">true</span>,
      cellNF: <span class="hljs-literal">true</span>,
    },
  </span>): <span class="hljs-title class_">WorkBook</span> {
    <span class="hljs-keyword">const</span> workbook = <span class="hljs-variable constant_">XLSX</span>.<span class="hljs-title function_">readFile</span>(url, options)
    <span class="hljs-keyword">return</span> workbook
  }

  <span class="hljs-comment">/**
   * <span class="hljs-doctag">@desc</span> ä»URLè¯»å–Excelå·¥ä½œç°¿
   *
   * æ­¤å‡½æ•°ä»URLè¯»å–Excelæ–‡ä»¶å¹¶è¿”å›å·¥ä½œç°¿å¯¹è±¡
   *
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} <span class="hljs-variable">url</span> - Excelæ–‡ä»¶çš„URLåœ°å€
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">XLSX.ParsingOptions</span>} [options] - è§£æé€‰é¡¹
   * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">WorkBook</span>} è¿”å›å·¥ä½œç°¿å¯¹è±¡
   */</span>
  <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">readWorkbookFromUrl1</span>(<span class="hljs-params">url: <span class="hljs-built_in">string</span></span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">WorkBook</span> | <span class="hljs-literal">false</span>&gt; {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(url)
      <span class="hljs-keyword">const</span> blob = <span class="hljs-keyword">await</span> res.<span class="hljs-title function_">blob</span>()
      <span class="hljs-keyword">const</span> wb = <span class="hljs-title function_">readWorkbookFromFile</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Blob</span>([blob]))
      <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(wb)
    } <span class="hljs-keyword">catch</span>  {
      <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(<span class="hljs-literal">false</span>)
    }
  }

  <span class="hljs-comment">/**
   * <span class="hljs-doctag">@desc</span> ä¿å­˜å·¥ä½œç°¿ä¸ºExcelæ–‡ä»¶
   *
   * æ­¤å‡½æ•°å°†å·¥ä½œç°¿å¯¹è±¡ä¿å­˜ä¸ºExcelæ–‡ä»¶
   *
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">WorkBook</span>} <span class="hljs-variable">workbook</span> - è¦ä¿å­˜çš„å·¥ä½œç°¿å¯¹è±¡
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} <span class="hljs-variable">fileName</span> - æ–‡ä»¶å
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">XLSX.WritingOptions</span>} [options] - å†™å…¥é€‰é¡¹
   * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">void</span>}
   */</span>
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">saveWbToExcel</span>(<span class="hljs-params">
    workbook: WorkBook,
    fileName: <span class="hljs-built_in">string</span>,
    options?: XLSX.WritingOptions,
  </span>) {
    <span class="hljs-variable constant_">XLSX</span>.<span class="hljs-title function_">writeFile</span>(workbook, fileName, options)
  }

  <span class="hljs-keyword">return</span> {
    exportJson2Excel,
    exportAoa2Excel,
    exportBuffer2Excel,
    exportJson2ExcelSheets,
    exportUrl2Excel,
    readWorkbookFromLocalFile,
    readFileToJson,
    readFileToJsons,
    readColumnFromSheet,
    getColumnData,
    readWorkbookFromFile,
    readWorkbookFromUrl,
    readWorkbookFromUrl1,
    saveWbToExcel,
  }
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> useExcel

<span class="hljs-comment">// ä½¿ç”¨</span>
<span class="hljs-keyword">const</span> {
    exportJson2Excel,
    readFileToJson,
    readFileToJsons,
    readColumnFromSheet,
    readWorkbookFromUrl,
    readWorkbookFromUrl1,
    readWorkbookFromFile,
    saveWbToExcel,
  } = <span class="hljs-title function_">useExcel</span>()
</code></pre>
<h3 data-id="heading-3">useSet</h3>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> { useMemo, useState } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>

<span class="hljs-comment">// å®šä¹‰æ“ä½œæ–¹æ³•çš„æ¥å£</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">Actions</span>&lt;T&gt; {
  <span class="hljs-attr">add</span>: <span class="hljs-function">(<span class="hljs-params">key: T</span>) =&gt;</span> <span class="hljs-built_in">void</span> <span class="hljs-comment">// æ–°å¢ä¸€æ¡æ•°æ®</span>
  <span class="hljs-attr">set</span>: <span class="hljs-function">(<span class="hljs-params">map: <span class="hljs-built_in">Set</span>&lt;T&gt;</span>) =&gt;</span> <span class="hljs-built_in">void</span> <span class="hljs-comment">// è®¾ç½®å…¨éƒ¨æ•°æ®</span>
  <span class="hljs-attr">remove</span>: <span class="hljs-function">(<span class="hljs-params">key: T</span>) =&gt;</span> <span class="hljs-built_in">void</span> <span class="hljs-comment">// åˆ é™¤æŸæ¡æ•°æ®</span>
  <span class="hljs-attr">clear</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span> <span class="hljs-comment">// æ¸…ç©ºæ•°æ®</span>
  <span class="hljs-attr">reset</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span> <span class="hljs-comment">// é‡ç½®ä¸ºé»˜è®¤å€¼</span>
}

<span class="hljs-keyword">function</span> useSet&lt;T&gt;(<span class="hljs-attr">defaultValue</span>: <span class="hljs-title class_">Set</span>&lt;T&gt; = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>()): [<span class="hljs-title class_">Set</span>&lt;T&gt;, <span class="hljs-title class_">Actions</span>&lt;T&gt;] {
  <span class="hljs-keyword">const</span> [sets, setSets] = useState&lt;<span class="hljs-title class_">Set</span>&lt;T&gt;&gt;(defaultValue)

  <span class="hljs-comment">// ç¼“å­˜æ“ä½œæ–¹æ³•é¿å…é‡å¤åˆ›å»º</span>
  <span class="hljs-keyword">const</span> actions = <span class="hljs-title function_">useMemo</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">// æ–°å¢æ•°æ®</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">add</span> = (<span class="hljs-params">value: T</span>) =&gt; {
      <span class="hljs-keyword">const</span> newSet = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>(sets)
      newSet.<span class="hljs-title function_">add</span>(value)
      <span class="hljs-title function_">setSets</span>(newSet)
    }

    <span class="hljs-comment">// è®¾ç½®å…¨éƒ¨æ•°æ®</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">set</span> = (<span class="hljs-params">sets: <span class="hljs-built_in">Set</span>&lt;T&gt;</span>) =&gt; {
      <span class="hljs-title function_">setSets</span>(sets)
    }

    <span class="hljs-comment">// åˆ é™¤æ•°æ®</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">remove</span> = (<span class="hljs-params">key: T</span>) =&gt; {
      <span class="hljs-keyword">const</span> newSet = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>(sets)
      newSet.<span class="hljs-title function_">delete</span>(key)
      <span class="hljs-title function_">setSets</span>(newSet)
    }

    <span class="hljs-comment">// æ¸…ç©ºæ•°æ®</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">clear</span> = (<span class="hljs-params"/>) =&gt; {
      <span class="hljs-keyword">const</span> newSet = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>&lt;T&gt;()
      <span class="hljs-title function_">setSets</span>(newSet)
    }

    <span class="hljs-comment">// é‡ç½®ä¸ºé»˜è®¤å€¼</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">reset</span> = (<span class="hljs-params"/>) =&gt; {
      <span class="hljs-title function_">setSets</span>(defaultValue)
    }

    <span class="hljs-keyword">return</span> { add, set, remove, clear, reset }
  }, [defaultValue, sets])

  <span class="hljs-keyword">return</span> [sets, actions] <span class="hljs-keyword">as</span> <span class="hljs-keyword">const</span>
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> useSet
</code></pre>
<h3 data-id="heading-4">useMap</h3>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> { useMemo, useState } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>

<span class="hljs-comment">// å®šä¹‰æ“ä½œæ–¹æ³•çš„æ¥å£</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">Actions</span>&lt;T, U&gt; {
  <span class="hljs-attr">add</span>: <span class="hljs-function">(<span class="hljs-params">key: T, value: U</span>) =&gt;</span> <span class="hljs-built_in">void</span> <span class="hljs-comment">// æ–°å¢ä¸€æ¡æ•°æ®</span>
  <span class="hljs-attr">get</span>: <span class="hljs-function">(<span class="hljs-params">key: T</span>) =&gt;</span> U | <span class="hljs-literal">undefined</span> <span class="hljs-comment">// è·å–ä¸€æ¡æ•°æ®</span>
  <span class="hljs-attr">set</span>: <span class="hljs-function">(<span class="hljs-params">map: <span class="hljs-built_in">Map</span>&lt;T, U&gt;</span>) =&gt;</span> <span class="hljs-built_in">void</span> <span class="hljs-comment">// è®¾ç½®å…¨éƒ¨æ•°æ®</span>
  <span class="hljs-attr">remove</span>: <span class="hljs-function">(<span class="hljs-params">key: T</span>) =&gt;</span> <span class="hljs-built_in">void</span> <span class="hljs-comment">// åˆ é™¤æŸæ¡æ•°æ®</span>
  <span class="hljs-attr">clear</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span> <span class="hljs-comment">// æ¸…ç©ºæ•°æ®</span>
  <span class="hljs-attr">reset</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span> <span class="hljs-comment">// é‡ç½®ä¸ºé»˜è®¤å€¼</span>
}

<span class="hljs-keyword">function</span> useMap&lt;T, U&gt;(
  <span class="hljs-attr">defaultValue</span>: <span class="hljs-title class_">Map</span>&lt;T, U&gt; = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>(),
): [<span class="hljs-title class_">Map</span>&lt;T, U&gt;, <span class="hljs-title class_">Actions</span>&lt;T, U&gt;] {
  <span class="hljs-keyword">const</span> [map, setMap] = useState&lt;<span class="hljs-title class_">Map</span>&lt;T, U&gt;&gt;(defaultValue)

  <span class="hljs-comment">// ç¼“å­˜æ“ä½œæ–¹æ³•é¿å…é‡å¤åˆ›å»º</span>
  <span class="hljs-keyword">const</span> actions = <span class="hljs-title function_">useMemo</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">// æ–°å¢æ•°æ®</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">add</span> = (<span class="hljs-params">key: T, value: U</span>) =&gt; {
      <span class="hljs-keyword">const</span> newMap = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>(map)
      newMap.<span class="hljs-title function_">set</span>(key, value)
      <span class="hljs-title function_">setMap</span>(newMap)
    }

    <span class="hljs-comment">// è·å–æ•°æ®</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">get</span> = (<span class="hljs-params">key: T</span>) =&gt; {
      <span class="hljs-keyword">return</span> map.<span class="hljs-title function_">get</span>(key)
    }

    <span class="hljs-comment">// è®¾ç½®å…¨éƒ¨æ•°æ®</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">set</span> = (<span class="hljs-params">map: <span class="hljs-built_in">Map</span>&lt;T, U&gt;</span>) =&gt; {
      <span class="hljs-title function_">setMap</span>(map)
    }

    <span class="hljs-comment">// åˆ é™¤æ•°æ®</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">remove</span> = (<span class="hljs-params">key: T</span>) =&gt; {
      <span class="hljs-keyword">const</span> newMap = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>(map)
      newMap.<span class="hljs-title function_">delete</span>(key)
      <span class="hljs-title function_">setMap</span>(newMap)
    }

    <span class="hljs-comment">// æ¸…ç©ºæ•°æ®</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">clear</span> = (<span class="hljs-params"/>) =&gt; {
      <span class="hljs-keyword">const</span> newMap = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>(map)
      newMap.<span class="hljs-title function_">clear</span>()
      <span class="hljs-title function_">setMap</span>(newMap)
    }

    <span class="hljs-comment">// é‡ç½®ä¸ºé»˜è®¤å€¼</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">reset</span> = (<span class="hljs-params"/>) =&gt; {
      <span class="hljs-title function_">setMap</span>(defaultValue)
    }

    <span class="hljs-keyword">return</span> { add, get, set, remove, clear, reset }
  }, [defaultValue, map])

  <span class="hljs-keyword">return</span> [map, actions] <span class="hljs-keyword">as</span> <span class="hljs-keyword">const</span>
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> useMap
</code></pre>
<h3 data-id="heading-5">usePrevious</h3>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> { useRef } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>

<span class="hljs-keyword">type</span> <span class="hljs-title class_">ShouldUpdateFn</span>&lt;T&gt; = <span class="hljs-function">(<span class="hljs-params">prev: T | <span class="hljs-literal">undefined</span>, next: T</span>) =&gt;</span> <span class="hljs-built_in">boolean</span>
<span class="hljs-keyword">const</span> shouldUpdate = &lt;T&gt;<span class="hljs-function">(<span class="hljs-params">prev: T | <span class="hljs-literal">undefined</span>, next: T</span>) =&gt;</span> !<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">is</span>(prev, next)
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> usePrevious&lt;T&gt;(
  <span class="hljs-attr">state</span>: T,
  <span class="hljs-attr">shouldUp</span>: <span class="hljs-title class_">ShouldUpdateFn</span>&lt;T&gt; = shouldUpdate,
): T | <span class="hljs-literal">undefined</span> {
  <span class="hljs-keyword">const</span> curRef = useRef&lt;T&gt;() <span class="hljs-comment">// å½“å‰å€¼</span>
  <span class="hljs-keyword">const</span> preRef = useRef&lt;T&gt;() <span class="hljs-comment">// ä¸Šä¸€ä¸ªå€¼</span>

  <span class="hljs-keyword">if</span> (<span class="hljs-title function_">shouldUp</span>(curRef.<span class="hljs-property">current</span>, state)) {
    preRef.<span class="hljs-property">current</span> = curRef.<span class="hljs-property">current</span>
    curRef.<span class="hljs-property">current</span> = state
  }

  <span class="hljs-keyword">return</span> preRef.<span class="hljs-property">current</span>
}
</code></pre>
<h3 data-id="heading-6">useLatest</h3>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">RefObject</span>, useRef } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>

<span class="hljs-comment">// è·å–æŸä¸ªstateçš„æœ€æ–°å€¼çš„hook</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> useLatest&lt;S&gt;(<span class="hljs-attr">value</span>: S): <span class="hljs-title class_">RefObject</span>&lt;S&gt; {
  <span class="hljs-comment">// useRef ä¿å­˜èƒ½ä¿è¯æ¯æ¬¡è·å–åˆ°çš„éƒ½æ˜¯æœ€æ–°çš„å€¼</span>
  <span class="hljs-keyword">const</span> curRef = useRef&lt;S&gt;(value)
  curRef.<span class="hljs-property">current</span> = value

  <span class="hljs-keyword">return</span> curRef
}
</code></pre>
<h3 data-id="heading-7">useSafeState</h3>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> { useUnmount } <span class="hljs-keyword">from</span> <span class="hljs-string">'ahooks'</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Dispatch</span>, <span class="hljs-title class_">SetStateAction</span>, useRef, useState } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>

<span class="hljs-comment">// ä¸»è¦æ˜¯å®ç° setRafState æ–¹æ³•ï¼Œåœ¨å¤–éƒ¨è°ƒç”¨ setRafState æ–¹æ³•æ—¶ï¼Œä¼šå–æ¶ˆä¸Šä¸€æ¬¡çš„ setState å›è°ƒå‡½æ•°ï¼Œå¹¶æ‰§è¡Œ requestAnimationFrame æ¥æ§åˆ¶ setState çš„æ‰§è¡Œæ—¶æœº</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> useSafeState&lt;S&gt;(
  <span class="hljs-attr">initialState</span>: S | (<span class="hljs-function">() =&gt;</span> S),
): [S, <span class="hljs-title class_">Dispatch</span>&lt;<span class="hljs-title class_">SetStateAction</span>&lt;S&gt;&gt;] {
  <span class="hljs-keyword">const</span> [state, setState] = <span class="hljs-title function_">useState</span>(initialState)
  <span class="hljs-keyword">const</span> reqId = <span class="hljs-title function_">useRef</span>(<span class="hljs-number">0</span>)
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">setSafeState</span> = (<span class="hljs-params">state: SetStateAction&lt;S&gt;</span>) =&gt; {
    <span class="hljs-title function_">cancelAnimationFrame</span>(reqId.<span class="hljs-property">current</span>)

    reqId.<span class="hljs-property">current</span> = <span class="hljs-title function_">requestAnimationFrame</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-comment">// åœ¨å›è°ƒæ‰§è¡ŒçœŸæ­£çš„ setState</span>
      <span class="hljs-title function_">setState</span>(state)
    })
  }

  <span class="hljs-title function_">useUnmount</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">cancelAnimationFrame</span>(reqId.<span class="hljs-property">current</span>)
  })

  <span class="hljs-keyword">return</span> [state, setSafeState] <span class="hljs-keyword">as</span> <span class="hljs-keyword">const</span>
}
</code></pre>
<h3 data-id="heading-8">useSetState</h3>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> { getTypeOf } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/utils'</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">SetStateAction</span>, useCallback, useRef, useState } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>

<span class="hljs-comment">// ç±»ä¼¼äºä»¥å‰çš„setStateï¼Œæœ‰ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œå›è°ƒå‡½æ•°çš„å‚æ•°æ˜¯æœ€æ–°çš„å€¼</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> useSetState&lt;S&gt;(
  <span class="hljs-attr">initialState</span>: S | (<span class="hljs-function">() =&gt;</span> S),
): [S, <span class="hljs-function">(<span class="hljs-params">state: SetStateAction&lt;S&gt;, cb?: (state: S) =&gt; <span class="hljs-built_in">void</span></span>) =&gt;</span> <span class="hljs-built_in">void</span>] {
  <span class="hljs-keyword">const</span> [state, set] = <span class="hljs-title function_">useState</span>(initialState)
  <span class="hljs-keyword">const</span> curRef = useRef&lt;S&gt;(state)
  curRef.<span class="hljs-property">current</span> = state

  <span class="hljs-keyword">const</span> setState = <span class="hljs-title function_">useCallback</span>(
    <span class="hljs-function">(<span class="hljs-params">state: SetStateAction&lt;S&gt;, cb?: (state: S) =&gt; <span class="hljs-built_in">void</span></span>) =&gt;</span> {
      <span class="hljs-title function_">set</span>(<span class="hljs-function">(<span class="hljs-params">pre</span>) =&gt;</span> {
        <span class="hljs-keyword">const</span> newState =
          <span class="hljs-title function_">getTypeOf</span>(state) === <span class="hljs-string">'Function'</span>
            ? (state <span class="hljs-keyword">as</span> (<span class="hljs-attr">preState</span>: S) =&gt; S)(pre)
            : (state <span class="hljs-keyword">as</span> S)
        curRef.<span class="hljs-property">current</span> = newState
        <span class="hljs-keyword">return</span> newState
      })
      cb?.(curRef.<span class="hljs-property">current</span>)
    },
    [],
  )

  <span class="hljs-keyword">return</span> [state, setState] <span class="hljs-keyword">as</span> <span class="hljs-keyword">const</span>
}
</code></pre>
<h3 data-id="heading-9">useMergeStates</h3>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> { getTypeOf } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/utils'</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Dispatch</span>, <span class="hljs-title class_">SetStateAction</span>, useCallback, useState } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>

<span class="hljs-comment">// åˆå¹¶stateå±æ€§ï¼Œä½¿ç”¨çš„æ—¶å€™ä¸ç”¨æ•´ä½“é‡æ–°èµ‹å€¼</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> useMergeStates&lt;S <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">any</span>&gt;&gt;(
  <span class="hljs-attr">initialState</span>: S | (<span class="hljs-function">() =&gt;</span> S),
): [S, <span class="hljs-title class_">Dispatch</span>&lt;<span class="hljs-title class_">SetStateAction</span>&lt;<span class="hljs-title class_">Partial</span>&lt;S&gt;&gt;&gt;] {
  <span class="hljs-keyword">const</span> [state, set] = <span class="hljs-title function_">useState</span>(initialState)

  <span class="hljs-keyword">const</span> setState = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">(<span class="hljs-params">patch: SetStateAction&lt;Partial&lt;S&gt;&gt;</span>) =&gt;</span> {
    <span class="hljs-title function_">set</span>(<span class="hljs-function">(<span class="hljs-params">pre</span>) =&gt;</span> {
      <span class="hljs-keyword">const</span> newState =
        <span class="hljs-title function_">getTypeOf</span>(patch) === <span class="hljs-string">'Function'</span>
          ? (patch <span class="hljs-keyword">as</span> (<span class="hljs-attr">preState</span>: <span class="hljs-title class_">Partial</span>&lt;S&gt;) =&gt; S)(pre)
          : (patch <span class="hljs-keyword">as</span> S)

      <span class="hljs-keyword">return</span> newState ? { ...pre, ...newState } : pre
    })
  }, [])

  <span class="hljs-keyword">return</span> [state, setState] <span class="hljs-keyword">as</span> <span class="hljs-keyword">const</span>
}
</code></pre>
<h3 data-id="heading-10">useGetState</h3>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Dispatch</span>, <span class="hljs-title class_">SetStateAction</span>, useCallback, useRef, useState } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>

<span class="hljs-comment">// åœ¨useStateçš„åŸºç¡€ä¸Šå¢åŠ è·å–æ–¹æ³•</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> useGetState&lt;S&gt;(
  <span class="hljs-attr">initialState</span>: S | (<span class="hljs-function">() =&gt;</span> S),
): [S, <span class="hljs-title class_">Dispatch</span>&lt;<span class="hljs-title class_">SetStateAction</span>&lt;S&gt;&gt;, <span class="hljs-function">() =&gt;</span> S] {
  <span class="hljs-keyword">const</span> [state, setState] = <span class="hljs-title function_">useState</span>(initialState)
  <span class="hljs-keyword">const</span> curRef = <span class="hljs-title function_">useRef</span>(state)
  curRef.<span class="hljs-property">current</span> = state

  <span class="hljs-keyword">const</span> getState = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">() =&gt;</span> curRef.<span class="hljs-property">current</span>, [])

  <span class="hljs-keyword">return</span> [state, setState, getState] <span class="hljs-keyword">as</span> <span class="hljs-keyword">const</span>
}
</code></pre>
<h3 data-id="heading-11">useReactive</h3>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> { useRef } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>
<span class="hljs-keyword">import</span> useToggle <span class="hljs-keyword">from</span> <span class="hljs-string">'./useToggle'</span>

<span class="hljs-comment">// å“åº”å¼å¯¹è±¡</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> useReactive&lt;S <span class="hljs-keyword">extends</span> <span class="hljs-built_in">object</span>&gt;(<span class="hljs-attr">initialState</span>: S): S {
  <span class="hljs-keyword">const</span> [, { toggle }] = <span class="hljs-title function_">useToggle</span>(<span class="hljs-literal">false</span>)
  <span class="hljs-keyword">const</span> curRef = <span class="hljs-title function_">useRef</span>(initialState)

  <span class="hljs-keyword">const</span> proxy = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Proxy</span>(curRef.<span class="hljs-property">current</span>, {
    <span class="hljs-title function_">set</span>(<span class="hljs-params">target, key, value</span>) {
      <span class="hljs-keyword">const</span> ret = <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">set</span>(target, key, value)
      <span class="hljs-title function_">toggle</span>() <span class="hljs-comment">// å±æ€§èµ‹å€¼æ—¶è§¦å‘å›è°ƒ</span>
      <span class="hljs-keyword">return</span> ret
    },
    <span class="hljs-title function_">get</span>(<span class="hljs-params">target, key</span>) {
      <span class="hljs-keyword">const</span> ret = <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">get</span>(target, key)
      <span class="hljs-keyword">return</span> ret
    },
    <span class="hljs-title function_">defineProperty</span>(<span class="hljs-params">target, key</span>) {
      <span class="hljs-keyword">const</span> ret = <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">deleteProperty</span>(target, key)
      <span class="hljs-title function_">toggle</span>() <span class="hljs-comment">// å±æ€§åˆ é™¤æ—¶è§¦å‘å›è°ƒ</span>
      <span class="hljs-keyword">return</span> ret
    },
  })

  <span class="hljs-keyword">return</span> proxy
}
</code></pre>
<h3 data-id="heading-12">useOptions</h3>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">DefaultOptionType</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'antd/lib/select'</span>
<span class="hljs-keyword">import</span> { useEffect, useState } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>

<span class="hljs-comment">// è´¦å·åˆ—è¡¨é¡¹</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> <span class="hljs-title class_">UseOptionsProps</span>&lt;T = <span class="hljs-title class_">DefaultOptionType</span>, R = <span class="hljs-built_in">any</span>&gt; = {
  labelField?: keyof R <span class="hljs-comment">// è¦å–çš„ä½œä¸ºlabelçš„å­—æ®µ</span>
  labelFormat?: <span class="hljs-function">(<span class="hljs-params">record: R</span>) =&gt;</span> <span class="hljs-built_in">any</span> <span class="hljs-comment">// labelå­—æ®µè‡ªå®šä¹‰æ ¼å¼åŒ–å‡½æ•°</span>
  valueField?: keyof R <span class="hljs-comment">// è¦å–çš„ä½œä¸ºvalueçš„å­—æ®µ</span>
  valueFormat?: <span class="hljs-function">(<span class="hljs-params">record: R</span>) =&gt;</span> <span class="hljs-built_in">any</span> <span class="hljs-comment">// valueå­—æ®µè‡ªå®šä¹‰æ ¼å¼åŒ–å‡½æ•°</span>
  resField?: <span class="hljs-built_in">string</span>[] <span class="hljs-comment">// è¦å–çš„è¿”å›å€¼å­—æ®µ(æ¯”å¦‚resã€listã€resutlç­‰)</span>
  <span class="hljs-attr">dataFn</span>: <span class="hljs-function">(<span class="hljs-params">...args: <span class="hljs-built_in">any</span></span>) =&gt;</span> <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">any</span>&gt; <span class="hljs-comment">// è¦è¯·æ±‚çš„æ¥å£</span>
  fnParams?: <span class="hljs-built_in">any</span> <span class="hljs-comment">// è¯·æ±‚çš„æ¥å£å‚æ•°</span>
  definedFormat?: <span class="hljs-function">(<span class="hljs-params">data: R[]</span>) =&gt;</span> T[] <span class="hljs-comment">// è‡ªå®šä¹‰æ ¼å¼åŒ–æ•°æ®å‡½æ•°</span>
}

<span class="hljs-comment">/**
 * <span class="hljs-doctag">@desc</span> è‡ªå®šä¹‰è·å–ä»»æ„æ¥å£å¹¶æ ¼å¼åŒ–ä¸ºä¸‹æ‹‰optionsçš„hook
 * <span class="hljs-doctag">@param</span>  T æœ€ç»ˆè¿”å›çš„æ•°æ®çš„ç±»å‹
 * <span class="hljs-doctag">@param</span>  R æ¥å£è¿”å›çš„æ•°æ®çš„ç±»å‹
 */</span>
<span class="hljs-keyword">function</span> useOptions&lt;T = <span class="hljs-title class_">DefaultOptionType</span>, R = <span class="hljs-built_in">any</span>&gt;(
  <span class="hljs-attr">props</span>: <span class="hljs-title class_">UseOptionsProps</span>&lt;T, R&gt;,
): [T[], R[], <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span>] {
  <span class="hljs-keyword">const</span> {
    labelField,
    valueField,
    labelFormat,
    valueFormat,
    fnParams,
    dataFn,
    resField,
    definedFormat,
  } = props || {}
  <span class="hljs-keyword">const</span> [options, setOptions] = useState&lt;T[]&gt;([]) <span class="hljs-comment">// ä¸‹æ‹‰é€‰é¡¹</span>
  <span class="hljs-keyword">const</span> [datas, setDatas] = useState&lt;R[]&gt;([]) <span class="hljs-comment">// åŸå§‹æ•°æ®</span>

  <span class="hljs-comment">/** æ ¼å¼åŒ–ä¸ºé€šç”¨ä¸‹æ‹‰é€‰é¡¹ç»“æ„ */</span>
  <span class="hljs-keyword">const</span> formatToCommonOptions = (<span class="hljs-attr">list</span>: R[]): T[] =&gt; {
    <span class="hljs-keyword">return</span> list?.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">item: R</span>) =&gt;</span> {
      <span class="hljs-keyword">const</span> label = labelFormat
        ? labelFormat?.(item)
        : labelField
        ? item?.[labelField]
        : item?.[<span class="hljs-string">'name'</span> <span class="hljs-keyword">as</span> keyof R] || <span class="hljs-string">''</span> <span class="hljs-comment">// labelå–å€¼</span>
      <span class="hljs-keyword">const</span> value = valueFormat
        ? valueFormat?.(item)
        : valueField
        ? item?.[valueField]
        : item?.[<span class="hljs-string">'id'</span> <span class="hljs-keyword">as</span> keyof R] || <span class="hljs-string">''</span> <span class="hljs-comment">// valueå–å€¼</span>

      <span class="hljs-keyword">return</span> { label, value } <span class="hljs-keyword">as</span> T
    })
  }

  <span class="hljs-comment">// è·å–æ•°æ®</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">getDatas</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> res = fnParams ? <span class="hljs-keyword">await</span> <span class="hljs-title function_">dataFn</span>(fnParams) : <span class="hljs-keyword">await</span> <span class="hljs-title function_">dataFn</span>()

      <span class="hljs-keyword">const</span> <span class="hljs-attr">list</span>: R[] =
        resField &amp;&amp; resField?.<span class="hljs-property">length</span>
          ? resField.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">pre, cur</span>) =&gt;</span> pre?.[cur], res)
          : res
      <span class="hljs-keyword">if</span> (list &amp;&amp; <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(list)) {
        <span class="hljs-title function_">setDatas</span>(list) <span class="hljs-comment">// ä¿å­˜åŸå§‹æ•°æ®</span>
        <span class="hljs-title function_">setOptions</span>(
          definedFormat ? <span class="hljs-title function_">definedFormat</span>(list) : <span class="hljs-title function_">formatToCommonOptions</span>(list),
        ) <span class="hljs-comment">// ä¿å­˜æ ¼å¼åŒ–æ•°æ®</span>
      }
    } <span class="hljs-keyword">catch</span> {
      <span class="hljs-comment">//</span>
    }
  }

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">getDatas</span>()
  }, [])

  <span class="hljs-keyword">return</span> [options, datas, getDatas]
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> useOptions
</code></pre>
<h3 data-id="heading-13">useSse</h3>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> { useEffect, useRef, useState } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>

<span class="hljs-comment">// å®šæ—¶å™¨çš„ç±»å‹</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">TimerType</span> = <span class="hljs-title class_">ReturnType</span>&lt;<span class="hljs-keyword">typeof</span> <span class="hljs-built_in">setTimeout</span>&gt; | <span class="hljs-literal">undefined</span>

<span class="hljs-comment">/**
 * <span class="hljs-doctag">@description</span> SSEæš´éœ²çš„æ–¹æ³•
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">SSEMethods</span> {
  <span class="hljs-attr">close</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span>
  <span class="hljs-attr">reconnect</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span>
}

<span class="hljs-comment">/**
 * SSEè¿æ¥çŠ¶æ€æšä¸¾
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">SSEReadyState</span> {
  <span class="hljs-variable constant_">CONNECTING</span>, <span class="hljs-comment">// è¿æ¥ä¸­</span>
  <span class="hljs-variable constant_">OPEN</span>, <span class="hljs-comment">// å·²è¿æ¥</span>
  <span class="hljs-variable constant_">CLOSED</span>, <span class="hljs-comment">// å·²å…³é—­</span>
}

<span class="hljs-comment">/**
 * <span class="hljs-doctag">@description</span> åˆå§‹åŒ–å‚æ•°
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> <span class="hljs-title class_">EventSourceInit</span> = {
  withCredentials?: <span class="hljs-built_in">boolean</span>
  headers?: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">string</span>&gt;
  payload?: <span class="hljs-built_in">string</span>
}

<span class="hljs-comment">/**
 * <span class="hljs-doctag">@description</span> SSEè¿æ¥éœ€è¦çš„å‚æ•°
 * <span class="hljs-doctag">@param</span> T å½“å‰SSEè¿æ¥çš„æ•°æ®ç»“æ„
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">SSEProps</span> {
  events?: <span class="hljs-built_in">string</span>[] <span class="hljs-comment">// äº‹ä»¶åç§°</span>
  retryInterval?: <span class="hljs-built_in">number</span> <span class="hljs-comment">// é‡è¯•é—´éš”</span>
  heartbeatTimeout?: <span class="hljs-built_in">number</span> <span class="hljs-comment">// å¿ƒè·³è¶…æ—¶æ—¶é—´</span>
  init?: <span class="hljs-title class_">EventSourceInit</span> <span class="hljs-comment">// åˆå§‹åŒ–å‚æ•°</span>
  onMessage?: <span class="hljs-function">(<span class="hljs-params">event: MessageEvent</span>) =&gt;</span> <span class="hljs-built_in">void</span> <span class="hljs-comment">// æ¶ˆæ¯å›è°ƒ</span>
  autoConnect?: <span class="hljs-built_in">boolean</span> <span class="hljs-comment">// æ˜¯å¦è‡ªåŠ¨è¿æ¥</span>
  maxRetries?: <span class="hljs-built_in">number</span> <span class="hljs-comment">// æœ€å¤§é‡è¯•æ¬¡æ•°</span>
}

<span class="hljs-comment">/**
 * <span class="hljs-doctag">@description</span> SSEè¿æ¥è¿”å›ç»“æ„
 * <span class="hljs-doctag">@param</span> T å½“å‰SSEè¿æ¥çš„æ•°æ®ç»“æ„
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">SSEReturn</span>&lt;T&gt; {
  <span class="hljs-attr">data</span>: T | <span class="hljs-literal">null</span> <span class="hljs-comment">// å½“å‰SSEè¿æ¥çš„æ•°æ®ç»“æ„</span>
  <span class="hljs-attr">error</span>: <span class="hljs-title class_">Error</span> | <span class="hljs-literal">null</span> <span class="hljs-comment">// é”™è¯¯</span>
  <span class="hljs-attr">readyState</span>: <span class="hljs-title class_">SSEReadyState</span> <span class="hljs-comment">// è¿æ¥çŠ¶æ€</span>
  <span class="hljs-attr">methods</span>: <span class="hljs-title class_">SSEMethods</span> <span class="hljs-comment">// æš´éœ²çš„æ–¹æ³•</span>
  <span class="hljs-attr">retryCount</span>: <span class="hljs-built_in">number</span> <span class="hljs-comment">// å½“å‰é‡è¯•æ¬¡æ•°</span>
}

<span class="hljs-comment">/**
 * <span class="hljs-doctag">@description</span> SSEè¿æ¥çŠ¶æ€æšä¸¾
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">READY_STATE_MAP</span> = {
  [<span class="hljs-title class_">SSEReadyState</span>.<span class="hljs-property">CONNECTING</span>]: <span class="hljs-string">'è¿æ¥ä¸­...'</span>,
  [<span class="hljs-title class_">SSEReadyState</span>.<span class="hljs-property">OPEN</span>]: <span class="hljs-string">'å·²è¿æ¥'</span>,
  [<span class="hljs-title class_">SSEReadyState</span>.<span class="hljs-property">CLOSED</span>]: <span class="hljs-string">'å·²å…³é—­'</span>,
}

<span class="hljs-comment">/**
 * <span class="hljs-doctag">@description</span> SSEè¿æ¥çŠ¶æ€æšä¸¾
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">READY_STATE_TYPE_MAP</span> = {
  [<span class="hljs-title class_">SSEReadyState</span>.<span class="hljs-property">CONNECTING</span>]: <span class="hljs-string">'warning'</span>,
  [<span class="hljs-title class_">SSEReadyState</span>.<span class="hljs-property">OPEN</span>]: <span class="hljs-string">'success'</span>,
  [<span class="hljs-title class_">SSEReadyState</span>.<span class="hljs-property">CLOSED</span>]: <span class="hljs-string">'error'</span>,
}

<span class="hljs-comment">/**
 * <span class="hljs-doctag">@description</span> é€šç”¨çš„SSEè¿æ¥HOOK
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">SSEProps</span>} è¿æ¥å‚æ•°
 */</span>
<span class="hljs-comment">// è¿æ¥åœ°å€</span>
<span class="hljs-keyword">const</span> useSse = &lt;T,&gt;(<span class="hljs-attr">url</span>: <span class="hljs-built_in">string</span>, <span class="hljs-attr">options</span>: <span class="hljs-title class_">SSEProps</span>): <span class="hljs-title class_">SSEReturn</span>&lt;T&gt; =&gt; {
  <span class="hljs-keyword">const</span> {
    autoConnect,
    maxRetries,
    retryInterval = <span class="hljs-number">5</span> * <span class="hljs-number">1000</span>,
    heartbeatTimeout,
    init,
    events,
    onMessage,
  } = options || {}

  <span class="hljs-keyword">const</span> [readyState, setReadyState] = useState&lt;<span class="hljs-title class_">SSEReadyState</span>&gt;(
    <span class="hljs-title class_">SSEReadyState</span>.<span class="hljs-property">CONNECTING</span>,
  ) <span class="hljs-comment">// å½“å‰è¿æ¥çŠ¶æ€</span>
  <span class="hljs-keyword">const</span> [data, setData] = useState&lt;T | <span class="hljs-literal">null</span>&gt;(<span class="hljs-literal">null</span>) <span class="hljs-comment">// å½“å‰SSEæ•°æ®</span>
  <span class="hljs-keyword">const</span> [error, setError] = useState&lt;<span class="hljs-title class_">Error</span> | <span class="hljs-literal">null</span>&gt;(<span class="hljs-literal">null</span>) <span class="hljs-comment">// é”™è¯¯</span>
  <span class="hljs-keyword">const</span> sseRef = useRef&lt;<span class="hljs-title class_">EventSource</span> | <span class="hljs-literal">null</span>&gt;(<span class="hljs-literal">null</span>) <span class="hljs-comment">// SSEå®ä¾‹</span>
  <span class="hljs-keyword">const</span> retryTimer = useRef&lt;<span class="hljs-title class_">TimerType</span> | <span class="hljs-literal">null</span>&gt;(<span class="hljs-literal">null</span>) <span class="hljs-comment">// é‡è¯•çš„å®šæ—¶å™¨</span>
  <span class="hljs-keyword">const</span> heartbeatTimer = useRef&lt;<span class="hljs-title class_">TimerType</span> | <span class="hljs-literal">null</span>&gt;(<span class="hljs-literal">null</span>) <span class="hljs-comment">// å¿ƒè·³çš„å®šæ—¶å™¨</span>
  <span class="hljs-keyword">const</span> retryCount = useRef&lt;<span class="hljs-built_in">number</span>&gt;(<span class="hljs-number">0</span>) <span class="hljs-comment">// å½“å‰é‡è¯•æ¬¡æ•°</span>

  <span class="hljs-comment">// åˆå§‹åŒ–SSE</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">initSSE</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> sseInstance = <span class="hljs-keyword">new</span> <span class="hljs-title class_">EventSource</span>(url, init)
      sseRef.<span class="hljs-property">current</span> = sseInstance

      <span class="hljs-comment">// sseè¿æ¥æ‰“å¼€äº‹ä»¶</span>
      sseInstance.<span class="hljs-property">onopen</span> = <span class="hljs-function">() =&gt;</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'SSEè¿æ¥å·²æ‰“å¼€'</span>)
        <span class="hljs-title function_">setReadyState</span>(<span class="hljs-title class_">SSEReadyState</span>.<span class="hljs-property">OPEN</span>)
        retryCount.<span class="hljs-property">current</span> = <span class="hljs-number">0</span> <span class="hljs-comment">// é‡ç½®é‡è¯•æ¬¡æ•°</span>
        <span class="hljs-title function_">startHeatbeat</span>() <span class="hljs-comment">// å¼€å§‹å¿ƒè·³</span>
        <span class="hljs-title function_">bindEvents</span>()
      }

      sseInstance.<span class="hljs-property">onerror</span> = <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
        <span class="hljs-title function_">setError</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`SSE Error: <span class="hljs-subst">${e.<span class="hljs-keyword">type</span>}</span>`</span>))
        <span class="hljs-title function_">setReadyState</span>(<span class="hljs-title class_">SSEReadyState</span>.<span class="hljs-property">CLOSED</span>)
        <span class="hljs-keyword">if</span> (autoConnect !== <span class="hljs-literal">false</span>) <span class="hljs-title function_">reconnect</span>()
      }

      sseInstance.<span class="hljs-property">onmessage</span> = handleMessage
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-title function_">setError</span>(error <span class="hljs-keyword">as</span> <span class="hljs-title class_">Error</span>)
      <span class="hljs-title function_">setReadyState</span>(<span class="hljs-title class_">SSEReadyState</span>.<span class="hljs-property">CLOSED</span>)
      <span class="hljs-keyword">if</span> (autoConnect !== <span class="hljs-literal">false</span>) <span class="hljs-title function_">reconnect</span>()
    }
  }

  <span class="hljs-comment">// æ¶ˆæ¯å¤„ç†äº‹ä»¶</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleMessage</span> = (<span class="hljs-params">event: MessageEvent</span>) =&gt; {
    <span class="hljs-keyword">const</span> parsedData = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(event.<span class="hljs-property">data</span>) <span class="hljs-keyword">as</span> T
    <span class="hljs-title function_">setData</span>(parsedData)
    onMessage?.(event)
  }

  <span class="hljs-comment">// é‡ç½®é‡è¯•çš„å®šæ—¶å™¨</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">resetRetryTimer</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-keyword">if</span> (retryTimer.<span class="hljs-property">current</span>) {
      <span class="hljs-built_in">clearTimeout</span>(retryTimer.<span class="hljs-property">current</span>)
      retryTimer.<span class="hljs-property">current</span> = <span class="hljs-literal">null</span>
    }
  }

  <span class="hljs-comment">// é‡ç½®å¿ƒè·³çš„å®šæ—¶å™¨</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">resetHeartbeatTimer</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-keyword">if</span> (heartbeatTimer.<span class="hljs-property">current</span>) {
      <span class="hljs-built_in">clearTimeout</span>(heartbeatTimer.<span class="hljs-property">current</span>)
      heartbeatTimer.<span class="hljs-property">current</span> = <span class="hljs-literal">null</span>
    }
  }

  <span class="hljs-comment">// é‡è¿SSE</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">reconnect</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-comment">// è¶…è¿‡æœ€å¤§é‡è¯•æ¬¡æ•°å°±ä¸é‡è¯•äº†</span>
    <span class="hljs-keyword">if</span> (maxRetries &amp;&amp; retryCount.<span class="hljs-property">current</span> &gt;= maxRetries) {
      <span class="hljs-title function_">setReadyState</span>(<span class="hljs-title class_">SSEReadyState</span>.<span class="hljs-property">CLOSED</span>)
      <span class="hljs-keyword">return</span>
    }

    <span class="hljs-title function_">resetRetryTimer</span>()
    <span class="hljs-title function_">resetHeartbeatTimer</span>()

    retryTimer.<span class="hljs-property">current</span> = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-title function_">setReadyState</span>(<span class="hljs-title class_">SSEReadyState</span>.<span class="hljs-property">CONNECTING</span>)
      retryCount.<span class="hljs-property">current</span> += <span class="hljs-number">1</span> <span class="hljs-comment">// é‡è¯•æ¬¡æ•°+1</span>
      <span class="hljs-title function_">initSSE</span>()
    }, retryInterval * (retryCount.<span class="hljs-property">current</span> + <span class="hljs-number">1</span>))
  }

  <span class="hljs-comment">// å¼€å§‹å¿ƒè·³</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">startHeatbeat</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-keyword">if</span> (heartbeatTimeout) {
      <span class="hljs-title function_">resetHeartbeatTimer</span>()
      heartbeatTimer.<span class="hljs-property">current</span> = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-title function_">setReadyState</span>(<span class="hljs-title class_">SSEReadyState</span>.<span class="hljs-property">CLOSED</span>)
        <span class="hljs-title function_">disconnectSSE</span>()
        <span class="hljs-title function_">initSSE</span>()
      }, heartbeatTimeout)
    }
  }

  <span class="hljs-comment">// ç»‘å®šè‡ªå®šä¹‰äº‹ä»¶</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">bindEvents</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-keyword">if</span> (sseRef &amp;&amp; events?.<span class="hljs-property">length</span>) {
      events?.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">eventName</span>) =&gt;</span> {
        ;(sseRef <span class="hljs-keyword">as</span> <span class="hljs-built_in">unknown</span> <span class="hljs-keyword">as</span> <span class="hljs-title class_">EventSource</span>).<span class="hljs-title function_">addEventListener</span>(
          eventName,
          handleMessage,
        )
      })
    }
  }

  <span class="hljs-comment">// è§£ç»‘è‡ªå®šä¹‰äº‹ä»¶</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">unbindEvents</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-keyword">if</span> (sseRef &amp;&amp; events?.<span class="hljs-property">length</span>) {
      events?.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">eventName</span>) =&gt;</span> {
        ;(sseRef <span class="hljs-keyword">as</span> <span class="hljs-built_in">unknown</span> <span class="hljs-keyword">as</span> <span class="hljs-title class_">EventSource</span>).<span class="hljs-title function_">removeEventListener</span>(
          eventName,
          handleMessage,
        )
      })
    }
  }

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">// å¦‚æœæ˜¯è‡ªåŠ¨è¿æ¥</span>
    <span class="hljs-keyword">if</span> (autoConnect !== <span class="hljs-literal">false</span>) {
      <span class="hljs-title function_">initSSE</span>()
    }
    <span class="hljs-keyword">return</span> close
  }, [])

  <span class="hljs-comment">// æ–­å¼€SSEè¿æ¥</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">disconnectSSE</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-keyword">const</span> sseInstance = sseRef.<span class="hljs-property">current</span>
    <span class="hljs-keyword">if</span> (sseInstance) {
      sseInstance.<span class="hljs-title function_">close</span>()
      sseRef.<span class="hljs-property">current</span> = <span class="hljs-literal">null</span>
    }
  }

  <span class="hljs-comment">// å…³é—­</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">close</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-title function_">disconnectSSE</span>()
    <span class="hljs-title function_">setReadyState</span>(<span class="hljs-title class_">SSEReadyState</span>.<span class="hljs-property">CLOSED</span>)
    <span class="hljs-title function_">resetRetryTimer</span>()
    <span class="hljs-title function_">resetHeartbeatTimer</span>()
    retryCount.<span class="hljs-property">current</span> = <span class="hljs-number">0</span>
    <span class="hljs-title function_">setData</span>(<span class="hljs-literal">null</span>)
    <span class="hljs-title function_">unbindEvents</span>()
  }

  <span class="hljs-keyword">const</span> <span class="hljs-attr">methods</span>: <span class="hljs-title class_">SSEMethods</span> = {
    close,
    <span class="hljs-attr">reconnect</span>: <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-title function_">close</span>()
      <span class="hljs-title function_">initSSE</span>()
    },
  }

  <span class="hljs-keyword">return</span> { data, readyState, <span class="hljs-attr">retryCount</span>: retryCount.<span class="hljs-property">current</span>, error, methods }
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> useSse
</code></pre>
<h3 data-id="heading-14">useWebSocket</h3>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">HeartBeatType</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/enums/common'</span>
<span class="hljs-keyword">import</span> { useCallback, useMemo, useRef, useState } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>

<span class="hljs-comment">// å¿ƒè·³ç±»å‹æšä¸¾</span>
<span class="hljs-keyword">enum</span> <span class="hljs-title class_">HeartBeatType</span> {
  <span class="hljs-title class_">Ping</span> = <span class="hljs-string">'heartBeatPing'</span>, <span class="hljs-comment">// å¿ƒè·³å‘é€çš„æ¶ˆæ¯</span>
  <span class="hljs-title class_">Pong</span> = <span class="hljs-string">'heartBeatPong'</span>, <span class="hljs-comment">// å¿ƒè·³æ¥æ”¶çš„æ¶ˆæ¯</span>
}

<span class="hljs-keyword">type</span> <span class="hljs-title class_">TimerType</span> = <span class="hljs-title class_">ReturnType</span>&lt;<span class="hljs-keyword">typeof</span> <span class="hljs-built_in">setTimeout</span>&gt; | <span class="hljs-literal">undefined</span> <span class="hljs-comment">// å®šæ—¶å™¨çš„ç±»å‹</span>

<span class="hljs-comment">// useWebSocketçš„å‚æ•°ç±»å‹</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">IWebSocketProps</span> {
  url?: <span class="hljs-built_in">string</span> <span class="hljs-comment">// socketè¿æ¥åœ°å€</span>
  heartBeatInterval?: <span class="hljs-built_in">number</span> <span class="hljs-comment">// å¿ƒè·³æ£€æµ‹é—´éš”</span>
  heartBeatData?: <span class="hljs-title class_">HeartBeatType</span> <span class="hljs-comment">// å¿ƒè·³æ£€æµ‹å‘é€æ•°æ®</span>
  heartBeatSendData?: <span class="hljs-built_in">any</span> <span class="hljs-comment">// å¿ƒè·³æ£€æµ‹å®é™…å‘é€æ•°æ®</span>
  maxReconnectAttempts?: <span class="hljs-built_in">number</span> <span class="hljs-comment">// æœ€å¤§é‡è¿æ¬¡æ•°</span>
  reconnectInterval?: <span class="hljs-built_in">number</span> <span class="hljs-comment">// é‡è¿é—´éš”</span>
}

<span class="hljs-comment">// å‘é€æ•°æ®çš„ç±»å‹</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> <span class="hljs-title class_">SendData</span> = <span class="hljs-built_in">string</span> | <span class="hljs-title class_">ArrayBufferLike</span> | <span class="hljs-title class_">Blob</span> | <span class="hljs-title class_">ArrayBufferView</span>

<span class="hljs-comment">/**
 * <span class="hljs-doctag">@description</span> WebSocket hookå°è£…
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">useWebSocket</span>(<span class="hljs-params">options: IWebSocketProps</span>) {
  <span class="hljs-keyword">const</span> {
    url,
    heartBeatInterval = <span class="hljs-number">60</span> * <span class="hljs-number">1000</span>,
    heartBeatData = <span class="hljs-title class_">HeartBeatType</span>.<span class="hljs-property">Ping</span>,
    heartBeatSendData,
    maxReconnectAttempts = <span class="hljs-number">10</span>,
    reconnectInterval = <span class="hljs-number">5</span> * <span class="hljs-number">1000</span>,
  } = options

  <span class="hljs-keyword">const</span> socket = useRef&lt;<span class="hljs-title class_">WebSocket</span>&gt;() <span class="hljs-comment">// socketå®ä¾‹</span>
  <span class="hljs-keyword">const</span> [lastMessage, setLastMessage] = useState&lt;<span class="hljs-title class_">MessageEvent</span>&gt;() <span class="hljs-comment">// socketæ¶ˆæ¯</span>
  <span class="hljs-keyword">const</span> reconnectAttempts = useRef&lt;<span class="hljs-built_in">number</span>&gt;(<span class="hljs-number">0</span>) <span class="hljs-comment">// å·²ç»å°è¯•é‡è¿äº†çš„æ¬¡æ•°</span>
  <span class="hljs-keyword">const</span> error = useRef&lt;<span class="hljs-title class_">Event</span>&gt;() <span class="hljs-comment">// error</span>
  <span class="hljs-keyword">const</span> curUrlRef = useRef&lt;<span class="hljs-built_in">string</span>&gt;() <span class="hljs-comment">// curUrlRef</span>

  <span class="hljs-keyword">let</span> <span class="hljs-attr">heartBeatTimer</span>: <span class="hljs-title class_">TimerType</span> = <span class="hljs-literal">undefined</span> <span class="hljs-comment">// å¿ƒè·³æ£€æµ‹çš„å®šæ—¶å™¨</span>
  <span class="hljs-keyword">let</span> <span class="hljs-attr">reconnectTimer</span>: <span class="hljs-title class_">TimerType</span> = <span class="hljs-literal">undefined</span> <span class="hljs-comment">// é‡è¿çš„å®šæ—¶å™¨</span>

  <span class="hljs-comment">// æ˜¯å¦å·²è¿æ¥</span>
  <span class="hljs-keyword">const</span> isConnected = <span class="hljs-title function_">useMemo</span>(
    <span class="hljs-function">() =&gt;</span> socket.<span class="hljs-property">current</span>?.<span class="hljs-property">readyState</span> === <span class="hljs-title class_">WebSocket</span>.<span class="hljs-property">OPEN</span>,
    [socket],
  )

  <span class="hljs-comment">// è¿æ¥</span>
  <span class="hljs-keyword">const</span> connect = <span class="hljs-title function_">useCallback</span>(
    <span class="hljs-function">(<span class="hljs-params">curUrl: <span class="hljs-built_in">string</span></span>) =&gt;</span> {
      <span class="hljs-comment">// å¦‚æœå·²å­˜åœ¨ WebSocket å®ä¾‹ï¼Œåˆ™å…ˆå…³é—­å®ƒ</span>
      <span class="hljs-keyword">if</span> (socket) {
        socket.<span class="hljs-property">current</span>?.<span class="hljs-title function_">close</span>()
      }

      <span class="hljs-keyword">if</span> (curUrl &amp;&amp; !curUrlRef.<span class="hljs-property">current</span>) {
        curUrlRef.<span class="hljs-property">current</span> = curUrl
      }

      <span class="hljs-keyword">const</span> socketInstance = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WebSocket</span>(curUrl || url!)
      socket.<span class="hljs-property">current</span> = socketInstance
      socketInstance.<span class="hljs-property">onopen</span> = onopen
      socketInstance.<span class="hljs-property">onmessage</span> = onmessage
      socketInstance.<span class="hljs-property">onclose</span> = onclose
      socketInstance.<span class="hljs-property">onerror</span> = onerror
    },
    [url],
  )

  <span class="hljs-comment">// æ¥æ”¶æ¶ˆæ¯</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">onmessage</span> = (<span class="hljs-params">data: <span class="hljs-built_in">any</span></span>) =&gt; {
    <span class="hljs-title function_">setLastMessage</span>(data)
  }

  <span class="hljs-comment">// è¿æ¥æˆåŠŸ</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">onopen</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è¿æ¥æˆåŠŸ'</span>)
    <span class="hljs-comment">// é‡ç½®é‡è¿æ¬¡æ•°</span>
    reconnectAttempts.<span class="hljs-property">current</span> = <span class="hljs-number">0</span>
    <span class="hljs-comment">// å¼€å§‹å¿ƒè·³æ£€æµ‹</span>
    <span class="hljs-title function_">checkHealthStart</span>()
  }

  <span class="hljs-comment">// è¿æ¥æ–­å¼€</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">onclose</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è¿æ¥æ–­å¼€'</span>)
    <span class="hljs-comment">// ç»“æŸå¿ƒè·³æ£€æµ‹</span>
    <span class="hljs-title function_">checkHealthEnd</span>()
  }

  <span class="hljs-comment">// è¿æ¥å‡ºé”™</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">onerror</span> = (<span class="hljs-params">e: Event</span>) =&gt; {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è¿æ¥å‡ºé”™'</span>)
    error.<span class="hljs-property">current</span> = e
    <span class="hljs-comment">// ç»“æŸå¿ƒè·³æ£€æµ‹</span>
    <span class="hljs-title function_">checkHealthEnd</span>()
    <span class="hljs-comment">// é‡è¿</span>
    <span class="hljs-title function_">reconnect</span>()
  }

  <span class="hljs-comment">// æ–­å¼€è¿æ¥</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">disconnect</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è¿æ¥æ–­å¼€'</span>)
    socket.<span class="hljs-property">current</span>?.<span class="hljs-title function_">close</span>()
    <span class="hljs-comment">// ç»“æŸå¿ƒè·³æ£€æµ‹</span>
    <span class="hljs-title function_">checkHealthEnd</span>()
  }

  <span class="hljs-comment">// å‘é€æ¶ˆæ¯</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">sendMessage</span> = (<span class="hljs-params">data: SendData</span>) =&gt; {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å³å°†å‘é€çš„æ•°æ®'</span>, data)
    <span class="hljs-keyword">if</span> (socket.<span class="hljs-property">current</span>?.<span class="hljs-property">readyState</span> === <span class="hljs-title class_">WebSocket</span>.<span class="hljs-property">OPEN</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'çœŸå®å‘é€çš„æ•°æ®'</span>, data)
      socket.<span class="hljs-property">current</span>?.<span class="hljs-title function_">send</span>(data)
    }
  }

  <span class="hljs-comment">// å¿ƒè·³æ£€æµ‹å¼€å§‹</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">checkHealthStart</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å¿ƒè·³æ£€æµ‹å¼€å§‹'</span>)
    <span class="hljs-title function_">checkHealthEnd</span>()
    heartBeatTimer = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-keyword">if</span> (socket.<span class="hljs-property">current</span>?.<span class="hljs-property">readyState</span> === <span class="hljs-title class_">WebSocket</span>.<span class="hljs-property">OPEN</span>) {
        <span class="hljs-title function_">sendMessage</span>(
          heartBeatSendData ||
            <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({
              <span class="hljs-attr">type</span>: <span class="hljs-string">'ping'</span>,
              <span class="hljs-attr">data</span>: heartBeatData,
            }),
        )
        <span class="hljs-title function_">checkHealthStart</span>()
      }
    }, heartBeatInterval)
  }

  <span class="hljs-comment">// å¿ƒè·³æ£€æµ‹ç»“æŸ</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">checkHealthEnd</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å¿ƒè·³æ£€æµ‹ç»“æŸ'</span>)
    <span class="hljs-built_in">clearTimeout</span>(heartBeatTimer)
    heartBeatTimer = <span class="hljs-literal">undefined</span>
  }

  <span class="hljs-comment">// é‡è¿</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">reconnect</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å¼€å§‹é‡è¿'</span>)

    <span class="hljs-comment">// æ²¡æœ‰è¿æ¥å¹¶ä¸”æ²¡æœ‰è¾¾åˆ°é‡è¿æ¬¡æ•°</span>
    <span class="hljs-keyword">if</span> (
      socket.<span class="hljs-property">current</span>?.<span class="hljs-property">readyState</span> !== <span class="hljs-title class_">WebSocket</span>.<span class="hljs-property">OPEN</span> &amp;&amp;
      reconnectAttempts.<span class="hljs-property">current</span> &lt;= maxReconnectAttempts
    ) {
      <span class="hljs-comment">// ä½¿ç”¨é€’å¢çš„å»¶è¿Ÿæ¥é¿å…é¢‘ç¹é‡è¿</span>
      reconnectTimer = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-title function_">connect</span>(curUrlRef.<span class="hljs-property">current</span> || url!)
      }, reconnectInterval * reconnectAttempts.<span class="hljs-property">current</span> + <span class="hljs-number">1</span>)
      <span class="hljs-comment">// å¢åŠ é‡è¿å°è¯•æ¬¡æ•°</span>
      reconnectAttempts.<span class="hljs-property">current</span> += <span class="hljs-number">1</span>
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-built_in">clearTimeout</span>(reconnectTimer)
      reconnectTimer = <span class="hljs-literal">undefined</span>
    }
  }

  <span class="hljs-comment">// å–æ¶ˆé‡è¿</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">cancelReconnect</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-built_in">clearTimeout</span>(reconnectTimer)
    reconnectTimer = <span class="hljs-literal">undefined</span>
  }

  <span class="hljs-keyword">return</span> {
    socket,
    lastMessage,
    isConnected,
    error,
    connect,
    disconnect,
    reconnect,
    checkHealthStart,
    sendMessage,
    cancelReconnect,
  }
}
</code></pre>
<h3 data-id="heading-15">useLocalforage</h3>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> localforage <span class="hljs-keyword">from</span> <span class="hljs-string">'localforage'</span>

<span class="hljs-comment">/**
 * <span class="hljs-doctag">@desc</span> localForage æ˜¯ä¸€ä¸ª JavaScript åº“ï¼Œé€šè¿‡ç®€å•ç±»ä¼¼ localStorage API çš„å¼‚æ­¥å­˜å‚¨æ¥æ”¹è¿›ä½ çš„ Web åº”ç”¨ç¨‹åºçš„ç¦»çº¿ä½“éªŒã€‚å®ƒèƒ½å­˜å‚¨å¤šç§ç±»å‹çš„æ•°æ®ï¼Œè€Œä¸ä»…ä»…æ˜¯å­—ç¬¦ä¸²ã€‚
  localForage æœ‰ä¸€ä¸ªä¼˜é›…é™çº§ç­–ç•¥ï¼Œè‹¥æµè§ˆå™¨ä¸æ”¯æŒ IndexedDB æˆ– WebSQLï¼Œåˆ™ä½¿ç”¨ localStorageã€‚åœ¨æ‰€æœ‰ä¸»æµæµè§ˆå™¨ä¸­éƒ½å¯ç”¨ï¼šChromeï¼ŒFirefoxï¼ŒIE å’Œ Safariï¼ˆåŒ…æ‹¬ Safari Mobileï¼‰ã€‚
  localForage æä¾›å›è°ƒ API åŒæ—¶ä¹Ÿæ”¯æŒ ES6 Promises APIï¼Œä½ å¯ä»¥è‡ªè¡Œé€‰æ‹©ã€‚
  * <span class="hljs-doctag">@return</span> getItem è·å–æŸä¸ªkeyçš„å€¼
  * <span class="hljs-doctag">@return</span> setItem è®¾ç½®æŸä¸ªkeyçš„å€¼
  * <span class="hljs-doctag">@return</span> removeItem ç§»é™¤æŸä¸ªkeyçš„å€¼
  * <span class="hljs-doctag">@return</span> clearItems ç§»é™¤æ‰€æœ‰keyçš„å€¼ï¼Œæ­¤æ–¹æ³•å°†ä¼šåˆ é™¤ç¦»çº¿ä»“åº“ä¸­çš„æ‰€æœ‰å€¼ã€‚è°¨æ…ä½¿ç”¨æ­¤æ–¹æ³•ã€‚
  * <span class="hljs-doctag">@return</span> itemsLength è·å–ç¦»çº¿ä»“åº“ä¸­çš„ key çš„æ•°é‡ï¼ˆå³æ•°æ®ä»“åº“çš„â€œé•¿åº¦â€ï¼‰
  * <span class="hljs-doctag">@return</span> key æ ¹æ® key çš„ç´¢å¼•è·å–å…¶å
  * <span class="hljs-doctag">@return</span> keys è·å–æ•°æ®ä»“åº“ä¸­æ‰€æœ‰çš„ keyï¼ŒåŒ…å«æ‰€æœ‰ key åçš„æ•°ç»„
 */</span>
<span class="hljs-keyword">const</span> useLocalforage = &lt;T = <span class="hljs-built_in">any</span>&gt;(): [
  <span class="hljs-attr">getItem</span>: <span class="hljs-function">(<span class="hljs-params">key: <span class="hljs-built_in">string</span></span>) =&gt;</span> <span class="hljs-title class_">Promise</span>&lt;T | <span class="hljs-literal">null</span>&gt;, <span class="hljs-comment">// è·å–æŸä¸ªkeyçš„å€¼</span>
  <span class="hljs-attr">setItem</span>: <span class="hljs-function">(<span class="hljs-params">key: <span class="hljs-built_in">string</span>, value: T</span>) =&gt;</span> <span class="hljs-title class_">Promise</span>&lt;T&gt;, <span class="hljs-comment">// è®¾ç½®æŸä¸ªkeyçš„å€¼</span>
  <span class="hljs-attr">removeItem</span>: <span class="hljs-function">(<span class="hljs-params">key: <span class="hljs-built_in">string</span></span>) =&gt;</span> <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">boolean</span>&gt;, <span class="hljs-comment">// ç§»é™¤æŸä¸ªkeyçš„å€¼</span>
  <span class="hljs-attr">clearItems</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">boolean</span>&gt;, <span class="hljs-comment">// ç§»é™¤æ‰€æœ‰keyçš„å€¼ï¼Œæ­¤æ–¹æ³•å°†ä¼šåˆ é™¤ç¦»çº¿ä»“åº“ä¸­çš„æ‰€æœ‰å€¼ã€‚è°¨æ…ä½¿ç”¨æ­¤æ–¹æ³•ã€‚</span>
  <span class="hljs-attr">itemsLength</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">number</span>&gt;, <span class="hljs-comment">// è·å–ç¦»çº¿ä»“åº“ä¸­çš„ key çš„æ•°é‡ï¼ˆå³æ•°æ®ä»“åº“çš„â€œé•¿åº¦â€ï¼‰</span>
  <span class="hljs-attr">key</span>: <span class="hljs-function">(<span class="hljs-params">index: <span class="hljs-built_in">number</span></span>) =&gt;</span> <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">string</span> | <span class="hljs-literal">null</span>&gt;, <span class="hljs-comment">// æ ¹æ® key çš„ç´¢å¼•è·å–å…¶å</span>
  <span class="hljs-attr">keys</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">string</span>[]&gt;, <span class="hljs-comment">// è·å–æ•°æ®ä»“åº“ä¸­æ‰€æœ‰çš„ keyï¼ŒåŒ…å«æ‰€æœ‰ key åçš„æ•°ç»„</span>
] =&gt; {
  <span class="hljs-comment">/**
   * <span class="hljs-doctag">@desc</span> è·å–æŸä¸ªkeyçš„å€¼
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} key è¦è·å–çš„key
   * <span class="hljs-doctag">@return</span> {<span class="hljs-type">Promise&lt;T | null&gt;</span>} è¿”å›ä¸€ä¸ªPromiseï¼Œå€¼çš„ç±»å‹æ˜¯Tæˆ–è€…æ˜¯null
   */</span>
  <span class="hljs-keyword">const</span> getItem = (<span class="hljs-attr">key</span>: <span class="hljs-built_in">string</span>): <span class="hljs-title class_">Promise</span>&lt;T | <span class="hljs-literal">null</span>&gt; =&gt; {
    <span class="hljs-keyword">return</span> localforage
      .<span class="hljs-property">getItem</span>&lt;T&gt;(key)
      .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">value</span>) =&gt;</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(value))
      .<span class="hljs-keyword">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(err))
  }

  <span class="hljs-comment">/**
   * <span class="hljs-doctag">@desc</span> è®¾ç½®æŸä¸ªkeyçš„å€¼
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} key è¦è®¾ç½®çš„key
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">T</span>} value è¦è®¾ç½®çš„keyçš„å€¼
   * <span class="hljs-doctag">@return</span> {<span class="hljs-type">Promise&lt;T&gt;</span>} è¿”å›ä¸€ä¸ªPromiseï¼Œå€¼çš„ç±»å‹æ˜¯T
   */</span>
  <span class="hljs-keyword">const</span> setItem = (<span class="hljs-attr">key</span>: <span class="hljs-built_in">string</span>, <span class="hljs-attr">value</span>: T): <span class="hljs-title class_">Promise</span>&lt;T&gt; =&gt; {
    <span class="hljs-keyword">return</span> localforage
      .<span class="hljs-property">setItem</span>&lt;T&gt;(key, value)
      .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">value</span>) =&gt;</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(value))
      .<span class="hljs-keyword">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(err))
  }

  <span class="hljs-comment">/**
   * <span class="hljs-doctag">@desc</span> ä»ç¦»çº¿ä»“åº“ä¸­åˆ é™¤ key å¯¹åº”çš„å€¼
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} key è¦åˆ é™¤çš„key
   * <span class="hljs-doctag">@return</span> {<span class="hljs-type">Promise&lt;Boolean&gt;</span>} è¿”å›ä¸€ä¸ªPromiseï¼Œå€¼çš„ç±»å‹æ˜¯Booleanï¼Œä¸ºäº†ä¿è¯ä¸é˜»å¡ä»£ç æ‰§è¡Œï¼Œç§»é™¤æ—¶æŠ¥é”™ä¼šè¿”å›Promise&lt;false&gt;ï¼Œå„ä½å¤§ä½¬å¯ä»¥æ ¹æ®è¿”å›å€¼æ¥åˆ¤æ–­æ˜¯å¦ç§»é™¤æˆåŠŸ
   */</span>
  <span class="hljs-keyword">const</span> removeItem = (<span class="hljs-attr">key</span>: <span class="hljs-built_in">string</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">boolean</span>&gt; =&gt; {
    <span class="hljs-keyword">return</span> localforage
      .<span class="hljs-title function_">removeItem</span>(key)
      .<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(<span class="hljs-literal">true</span>))
      .<span class="hljs-keyword">catch</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(<span class="hljs-literal">false</span>))
  }

  <span class="hljs-comment">/**
   * <span class="hljs-doctag">@desc</span> ä»æ•°æ®åº“ä¸­åˆ é™¤æ‰€æœ‰çš„ keyï¼Œé‡ç½®æ•°æ®åº“.å°†ä¼šåˆ é™¤ç¦»çº¿ä»“åº“ä¸­çš„æ‰€æœ‰å€¼ã€‚è°¨æ…ä½¿ç”¨æ­¤æ–¹æ³•
   * <span class="hljs-doctag">@return</span> {<span class="hljs-type">Promise&lt;Boolean&gt;</span>} è¿”å›ä¸€ä¸ªPromiseï¼Œå€¼çš„ç±»å‹æ˜¯Booleanï¼Œä¸ºäº†ä¿è¯ä¸é˜»å¡ä»£ç æ‰§è¡Œï¼Œç§»é™¤æ—¶æŠ¥é”™ä¼šè¿”å›Promise&lt;false&gt;ï¼Œå„ä½å¤§ä½¬å¯ä»¥æ ¹æ®è¿”å›å€¼æ¥åˆ¤æ–­æ˜¯å¦ç§»é™¤æˆåŠŸ
   */</span>
  <span class="hljs-keyword">const</span> clearItems = (): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">boolean</span>&gt; =&gt; {
    <span class="hljs-keyword">return</span> localforage
      .<span class="hljs-title function_">clear</span>()
      .<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(<span class="hljs-literal">true</span>))
      .<span class="hljs-keyword">catch</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(<span class="hljs-literal">false</span>))
  }

  <span class="hljs-comment">/**
   * <span class="hljs-doctag">@desc</span> è·å–ç¦»çº¿ä»“åº“ä¸­çš„ key çš„æ•°é‡ï¼ˆå³æ•°æ®ä»“åº“çš„â€œé•¿åº¦â€ï¼‰
   * <span class="hljs-doctag">@return</span> {<span class="hljs-type">Promise&lt;number&gt;</span>} è¿”å›ä¸€ä¸ªPromiseï¼Œå€¼çš„ç±»å‹æ˜¯number
   */</span>
  <span class="hljs-keyword">const</span> itemsLength = (): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">number</span>&gt; =&gt; {
    <span class="hljs-keyword">return</span> localforage
      .<span class="hljs-title function_">length</span>()
      .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">numberOfKeys</span>) =&gt;</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(numberOfKeys))
      .<span class="hljs-keyword">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(err))
  }

  <span class="hljs-comment">/**
   * <span class="hljs-doctag">@desc</span> æ ¹æ® key çš„ç´¢å¼•è·å–å…¶å
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">number</span>} index è¦åˆ é™¤çš„key
   * <span class="hljs-doctag">@return</span> {<span class="hljs-type">Promise&lt;string&gt;</span>} è¿”å›ä¸€ä¸ªPromiseï¼Œkeyåï¼Œå€¼çš„ç±»å‹æ˜¯string
   */</span>
  <span class="hljs-keyword">const</span> key = (<span class="hljs-attr">index</span>: <span class="hljs-built_in">number</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">string</span> | <span class="hljs-literal">null</span>&gt; =&gt; {
    <span class="hljs-keyword">return</span> localforage
      .<span class="hljs-title function_">key</span>(index)
      .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">keyName</span>) =&gt;</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(keyName))
      .<span class="hljs-keyword">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(err))
  }

  <span class="hljs-comment">/**
   * <span class="hljs-doctag">@desc</span> è·å–æ•°æ®ä»“åº“ä¸­æ‰€æœ‰çš„keyåæ•°ç»„
   * <span class="hljs-doctag">@return</span> {<span class="hljs-type">Promise&lt;string[]&gt;</span>} è¿”å›ä¸€ä¸ªPromiseï¼Œkeyåæ•°ç»„ï¼Œå€¼çš„ç±»å‹æ˜¯string[]
   */</span>
  <span class="hljs-keyword">const</span> keys = (): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">string</span>[]&gt; =&gt; {
    <span class="hljs-keyword">return</span> localforage
      .<span class="hljs-title function_">keys</span>()
      .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">keys</span>) =&gt;</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(keys))
      .<span class="hljs-keyword">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(err))
  }

  <span class="hljs-keyword">return</span> [getItem, setItem, removeItem, clearItems, itemsLength, key, keys]
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> useLocalforage
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¸¦ä½ ç©è½¬kakaoç™»å½• æ¥å…¥æ•™ç¨‹]]></title>    <link>https://juejin.cn/post/7589092567544250377</link>    <guid>https://juejin.cn/post/7589092567544250377</guid>    <pubDate>2025-12-29T10:03:07.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589092567544250377" data-draft-id="7588917508206100530" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¸¦ä½ ç©è½¬kakaoç™»å½• æ¥å…¥æ•™ç¨‹ "/> <meta itemprop="keywords" content="Android"/> <meta itemprop="datePublished" content="2025-12-29T10:03:07.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="xq9527"/> <meta itemprop="url" content="https://juejin.cn/user/1239904848712184"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¸¦ä½ ç©è½¬kakaoç™»å½• æ¥å…¥æ•™ç¨‹ 
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1239904848712184/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    xq9527
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T10:03:07.000Z" title="Mon Dec 29 2025 10:03:07 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h4 data-id="heading-0">å‰è¨€å¯¼è¯»</h4>
<p>å„ä½åŒå­¦å¤§å®¶å¥½ï¼Œæœ‰æ®µæ—¶é—´æ²¡æœ‰è·Ÿå¤§å®¶è§é¢äº†ï¼Œæœ€è¿‘å› ä¸ºæ¢äº†æ–°å·¥ä½œï¼Œæ‰€ä»¥ä¹Ÿæ˜¯é‡åˆ°ä¸€äº›æ–°çš„éœ€æ±‚å’Œä¸šåŠ¡ï¼Œæ­£å¥½éœ€è¦æ¥ä¸€ä¸ªéŸ©å›½çš„ç¬¬ä¸‰æ–¹ç™»å½•ï¼Œkakaoç™»å½•ï¼Œåˆšå¥½ä»Šå¤©è°ƒè¯•OKäº†æ‰€ä»¥èƒ½å°±æƒ³ç€è·Ÿå¤§å®¶åˆ†äº«ä¸€ä¸‹ï¼Œé‚£ä¹ˆåºŸè¯ä¸å¤šè¯´ï¼Œæˆ‘ä»¬æ­£å¼å¼€å§‹</p>
<h4 data-id="heading-1">å®˜æ–¹æ–‡æ¡£</h4>
<h4 data-id="heading-2">å‚æ•°å’Œä¾èµ–æ–‡æ¡£</h4>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdevelopers.kakao.com%2Fdocs%2Flatest%2Fen%2Fandroid%2Fgetting-started%23install" target="_blank" title="https://developers.kakao.com/docs/latest/en/android/getting-started#install" ref="nofollow noopener noreferrer">developers.kakao.com/docs/latestâ€¦</a></p>
<h4 data-id="heading-3">å…·ä½“æ¥å…¥æŒ‡å—</h4>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdevelopers.kakao.com%2Fdocs%2Flatest%2Fen%2Fkakaologin%2Fandroid%23logout" target="_blank" title="https://developers.kakao.com/docs/latest/en/kakaologin/android#logout" ref="nofollow noopener noreferrer">developers.kakao.com/docs/latestâ€¦</a></p>
<h4 data-id="heading-4">å…·ä½“å®ç°</h4>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a1d4fab3c8464ca59f11bf0e2a9526a8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeHE5NTI3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767607387&amp;x-signature=oq6RIOdNYz5nmPN9mYP4pAmFU4Q%3D" alt="image.png" loading="lazy"/>
æˆ‘ä»¬çœ‹åˆ°è¿™å¼ å›¾ æˆ‘ä»¬åªéœ€è¦ç™»å½•çš„éƒ¨åˆ†ï¼Œæˆ‘ä»¬åœ¨ä¾èµ–äº†æˆ‘ä»¬çš„è°ƒç”¨kakaoç™»å½•åæ‹¿åˆ°æˆ‘ä»¬çš„token.accessToken  ç„¶åå»æœåŠ¡ç«¯è¿›è¡Œæ ¡éªŒå³å¯</p>
<h4 data-id="heading-5">å‡†å¤‡å·¥ä½œ</h4>
<p>è·å–æ•£åˆ— å¯¹æ²¡æœ‰é”™è¿™ä¸ªkakaoç™»å½•å’Œfacebook ä¸€æ ·éœ€è¦å¡«æˆ‘ä»¬çš„æ•£åˆ— å…¶å®å°±æ˜¯æˆ‘ä»¬çš„ç­¾åjksçš„sha1 base 64ä¹‹åçš„äº§ç‰©
ä½¿ç”¨å‘½ä»¤è·å–</p>
<pre><code class="hljs language-bash" lang="bash">keytool -exportcert -<span class="hljs-built_in">alias</span> &lt;RELEASE_KEY_ALIAS&gt; -keystore &lt;RELEASE_KEY_PATH&gt; | openssl sha1 -binary | openssl <span class="hljs-built_in">base64</span>
</code></pre>
<p>æˆ–è€…ä¹Ÿå¯ä»¥ä½¿ç”¨ ä»£ç è·å–</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">var</span> keyHash = Utility.getKeyHash(context)
Log.e(TAG, <span class="hljs-string">"keyHash init: "</span>+keyHash)
</code></pre>
<h4 data-id="heading-6">æˆ‘ä»¬å¯ä»¥åˆ°ä»£ç åº•å±‚å…¶å®ä¹Ÿæ˜¯è·å–äº†sha1 ç„¶åbase 64çš„</h4>
<pre><code class="hljs language-kotlin" lang="kotlin">    <span class="hljs-meta">@TargetApi(Build.VERSION_CODES.P)</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getKeyHash</span><span class="hljs-params">(context: <span class="hljs-type">Context</span>)</span></span>: String {
        <span class="hljs-keyword">return</span> getKeyHashDeprecated(context)
    }

    <span class="hljs-meta">@Suppress(<span class="hljs-string">"DEPRECATION"</span>)</span>
    <span class="hljs-meta">@SuppressLint(<span class="hljs-string">"PackageManagerGetSignatures"</span>)</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getKeyHashDeprecated</span><span class="hljs-params">(context: <span class="hljs-type">Context</span>)</span></span>: String {
        <span class="hljs-keyword">val</span> packageInfo = context.packageManager
            .getPackageInfo(context.packageName, PackageManager.GET_SIGNATURES)
        <span class="hljs-keyword">for</span> (signature <span class="hljs-keyword">in</span> packageInfo.signatures ?: emptyArray()) {
            <span class="hljs-keyword">val</span> md = MessageDigest.getInstance(<span class="hljs-string">"SHA"</span>)
            md.update(signature.toByteArray())
            <span class="hljs-keyword">return</span> Base64.encodeToString(md.digest(), Base64.NO_WRAP)
        }
        <span class="hljs-keyword">throw</span> IllegalStateException()
    }
</code></pre>
<h4 data-id="heading-7">ç™»å½•éœ€è¦çš„ä¾èµ–</h4>
<p>åœ¨æˆ‘ä»¬çš„library æˆ–è€…appå±‚çš„build.grale æ·»åŠ ä¾èµ–</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">// Kakao SDK ä¾èµ–</span>
implementation <span class="hljs-string">"com.kakao.sdk:v2-all:latest.release"</span>
implementation <span class="hljs-string">"com.kakao.sdk:v2-user:latest.release"</span>
implementation <span class="hljs-string">"com.kakao.sdk:v2-share:latest.release"</span>
implementation <span class="hljs-string">"com.kakao.sdk:v2-talk:latest.release"</span>
implementation <span class="hljs-string">"com.kakao.sdk:v2-friend:latest.release"</span>
implementation <span class="hljs-string">"com.kakao.sdk:v2-navi:latest.release"</span>
implementation <span class="hljs-string">"com.kakao.sdk:v2-cert:latest.release"</span>
</code></pre>
<h4 data-id="heading-8">æŒ‡å®šjdkç‰ˆæœ¬</h4>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/786ad07b7af847ff8e9596560cd49f42~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeHE5NTI3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767607387&amp;x-signature=R2%2BIGsddqtdNY03qesVsUSpG%2FhY%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-9">åœ¨build.gradleé‡Œé¢æ·»åŠ å¦‚ä¸‹é…ç½®</h4>
<pre><code class="hljs language-ini" lang="ini">compileOptions {
    sourceCompatibility JavaVersion.VERSION_11
    targetCompatibility JavaVersion.VERSION_11
    <span class="hljs-attr">coreLibraryDesugaringEnabled</span> = <span class="hljs-literal">true</span>
}
</code></pre>
<p>ç„¶ååœ¨æˆ‘ä»¬çš„æœ€å¤–å±‚çš„ build.gradle æ·»åŠ kotlinçš„æ”¯æŒ</p>
<pre><code class="hljs language-bash" lang="bash">ext.kotlin_version = <span class="hljs-string">"2.0.0"</span>
classpath <span class="hljs-string">"org.jetbrains.kotlin:kotlin-gradle-plugin:<span class="hljs-variable">$kotlin_version</span>"</span>
</code></pre>
<h4 data-id="heading-10">æ¸…å•æ–‡ä»¶é…ç½®</h4>
<p>kakao${YOUR_NATIVE_APP_KEY} è¿™é‡Œæ˜¯å‰é¢kakao æ‹¼æ¥ä½ ç”³è¯·çš„å‚æ•°çš„åº”ç”¨çš„key</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">activity</span> <span class="hljs-attr">android:name</span>=<span class="hljs-string">"com.kakao.sdk.auth.AuthCodeHandlerActivity"</span>
    <span class="hljs-attr">android:exported</span>=<span class="hljs-string">"true"</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">intent-filter</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">action</span> <span class="hljs-attr">android:name</span>=<span class="hljs-string">"android.intent.action.VIEW"</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">category</span> <span class="hljs-attr">android:name</span>=<span class="hljs-string">"android.intent.category.DEFAULT"</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">category</span> <span class="hljs-attr">android:name</span>=<span class="hljs-string">"android.intent.category.BROWSABLE"</span> /&gt;</span>

        <span class="hljs-comment">&lt;!-- Redirect URI: "kakao${YOUR_NATIVE_APP_KEY}://oauth" --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">data</span> <span class="hljs-attr">android:scheme</span>=<span class="hljs-string">"kakao${YOUR_NATIVE_APP_KEY}"</span> <span class="hljs-attr">android:host</span>=<span class="hljs-string">"oauth"</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">intent-filter</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">activity</span>&gt;</span>
</code></pre>
<h4 data-id="heading-11">å…·ä½“ä»£ç å®ç°</h4>
<h4 data-id="heading-12">åˆå§‹åŒ–kakaoç™»å½•</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">init</span><span class="hljs-params">(context: <span class="hljs-type">Context</span>)</span></span> {
    <span class="hljs-comment">//è¿™é‡Œxxxxxxxxxxxxxxx è¦æ¢æˆçœŸå®çš„id</span>
    KakaoSdk.<span class="hljs-keyword">init</span>(context, <span class="hljs-string">"xxxxxxxxxxxxxxx);
    var keyHash = Utility.getKeyHash(context)
    Log.e(TAG, "</span>keyHash <span class="hljs-keyword">init</span>: <span class="hljs-string">"+keyHash)

}
</span></code></pre>
<h4 data-id="heading-13">éœ€è¦åœ¨ Application çš„onCreate é‡Œé¢è°ƒç”¨</h4>
<pre><code class="hljs language-scala" lang="scala">public <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">GameApplication</span>  <span class="hljs-keyword">extends</span> <span class="hljs-title">Application</span> </span>{
    <span class="hljs-keyword">private</span> static <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-type">TAG</span> = <span class="hljs-string">"GameApplication"</span>;

    <span class="hljs-meta">@Override</span>
    public void onCreate() {
        <span class="hljs-keyword">super</span>.onCreate();
        <span class="hljs-type">Log</span>.e(<span class="hljs-type">TAG</span>, <span class="hljs-string">"onCreate: "</span> );
        <span class="hljs-type">MultiDex</span>.install(<span class="hljs-keyword">this</span>);
        <span class="hljs-type">KakaoKtInit</span>.<span class="hljs-type">Companion</span>.getInstance().init(<span class="hljs-keyword">this</span>);
     
     }
 }
</code></pre>
<h4 data-id="heading-14">kakaoå‘èµ·æˆæƒç™»å½•</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span>  <span class="hljs-title">login</span><span class="hljs-params">(activity: <span class="hljs-type">Activity</span>,dialog: <span class="hljs-type">Dialog</span>)</span></span>{
    UserApiClient.instance.loginWithKakao(activity, uiMode= LoginUiMode.AUTO) { token, error -&gt;
        <span class="hljs-keyword">if</span> (error != <span class="hljs-literal">null</span>) {
            Log.e(TAG, <span class="hljs-string">"Login failed."</span>, error)
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (token != <span class="hljs-literal">null</span>) {
            Log.i(TAG, <span class="hljs-string">"Login succeeded. <span class="hljs-subst">${token.accessToken}</span>"</span>)
          
        }
    }
}
</code></pre>
<h4 data-id="heading-15">è°ƒèµ·æ•ˆæœå›¾</h4>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1e884c9c60ab4001aa38ff6b46d3b25f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeHE5NTI3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767607387&amp;x-signature=27l7QvLZLxhsoHtufukrQZ6JUiQ%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-16">æ‹¿åˆ°å›è°ƒçš„ accessToken</h4>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/edaa7026e51144be8c8aa6f653ede4b0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeHE5NTI3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767607387&amp;x-signature=Sf7SzjG7n74QsfzqXTs4TMS70eg%3D" alt="image.png" loading="lazy"/></p>
<p>æˆ‘ä»¬æ‹¿åˆ°accessToken ç„¶åå»è¯·æ±‚æˆ‘ä»¬æœåŠ¡ç«¯è¿›è¡Œç™»å½•éªŒè¯å³å¯ã€‚</p>
<h4 data-id="heading-17">kakaoæ³¨é”€</h4>
<pre><code class="hljs language-kotlin" lang="kotlin">
<span class="hljs-comment">/***
 * æ³¨é”€ç™»å½•
 *
 */</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span>  <span class="hljs-title">loginOut</span><span class="hljs-params">(activity: <span class="hljs-type">Activity</span>)</span></span>{
    UserApiClient.instance.logout { error -&gt;
        <span class="hljs-keyword">if</span> (error != <span class="hljs-literal">null</span>) {
            Log.e(TAG, <span class="hljs-string">"Logout fail. Tokens are revoked from SDK"</span>, error)
        }
        <span class="hljs-keyword">else</span> {
            Log.i(TAG, <span class="hljs-string">"Logout success. Tokens are revoked from SDK"</span>)
        }
    }
}
</code></pre>
<h4 data-id="heading-18">æœ€åæ€»ç»“ï¼š</h4>
<p>æ•´ä¸ªçš„è¿™ä¸ªkakaoç™»å½•è¿˜ç®—æ¯”è¾ƒç®€å•çš„ï¼Œæˆ‘ä»¬è¦æ³¨æ„çš„å‡ ä¸ªç‚¹ ç¬¬ä¸€ä¸ªå°±æ˜¯åˆå§‹åŒ–çš„ä½ç½®è¦å¯¹ ï¼Œç¬¬äºŒä¸ªå°±æ˜¯æˆ‘ä»¬çš„æ•£åˆ—è¦é…ç½®å¯¹ ä¸ç„¶ä¼šæŠ¥å‡ºç­¾åå’Œçº¿ä¸Šæ•£åˆ—å¯¹ä¸ä¸Šæˆ–è€…æœªé…ç½®éƒ½ä¼šå¯¼è‡´æˆæƒå¤±è´¥ï¼Œæ•´ä½“æ¥è¯´æ¯”naverç™»å½•è¦ç®€å•å¾ˆå¤šï¼Œkakaoæ•´ä¸ªåŠŸèƒ½æ˜¯éå¸¸å¼ºå¤§ï¼Œä¹Ÿæ˜¯éŸ©å›½çš„å›½ååŠappåº”ç”¨ï¼Œæœ‰å…´è¶£çš„åŒå­¦å¯ä»¥æŸ¥é˜…å®˜æ–¹æ–‡æ¡£å»æŸ¥çœ‹æ›´å¤šè‡ªå·±éœ€è¦çš„åŠŸèƒ½</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ»‘åŠ¨çª—å£è¯¦è§£ï¼šåŸç†+åˆ†ç±»+åœºæ™¯+æ¨¡æ¿+ä¾‹é¢˜ï¼ˆè§†é¢‘è´¼æ¸…æ™°ï¼‰]]></title>    <link>https://juejin.cn/post/7589159665855692819</link>    <guid>https://juejin.cn/post/7589159665855692819</guid>    <pubDate>2025-12-29T10:28:00.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589159665855692819" data-draft-id="7589126217250357289" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ»‘åŠ¨çª—å£è¯¦è§£ï¼šåŸç†+åˆ†ç±»+åœºæ™¯+æ¨¡æ¿+ä¾‹é¢˜ï¼ˆè§†é¢‘è´¼æ¸…æ™°ï¼‰"/> <meta itemprop="keywords" content="JavaScript"/> <meta itemprop="datePublished" content="2025-12-29T10:28:00.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é¢œé…±"/> <meta itemprop="url" content="https://juejin.cn/user/905653309941495"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ»‘åŠ¨çª—å£è¯¦è§£ï¼šåŸç†+åˆ†ç±»+åœºæ™¯+æ¨¡æ¿+ä¾‹é¢˜ï¼ˆè§†é¢‘è´¼æ¸…æ™°ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/905653309941495/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é¢œé…±
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T10:28:00.000Z" title="Mon Dec 29 2025 10:28:00 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æ»‘åŠ¨çª—å£è¯¦è§£ï¼šåŸç†+åˆ†ç±»+åœºæ™¯+æ¨¡æ¿+ä¾‹é¢˜</h2>
<blockquote>
<p>ğŸ“º <strong>æ¨èè§†é¢‘</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fb23.tv%2FrU4vRca" target="_blank" title="https://b23.tv/rU4vRca" ref="nofollow noopener noreferrer">æ»‘åŠ¨çª—å£ç®—æ³•è¯¦è§£</a> - è§†é¢‘è§£é‡Šéå¸¸æ¸…æ™°ï¼Œå»ºè®®å…ˆçœ‹è§†é¢‘å†é˜…è¯»æœ¬æ–‡ï¼</p>
</blockquote>
<p>åœ¨ç®—æ³•é¢è¯•ä¸­ï¼Œå­ä¸²ã€å­æ•°ç»„ç›¸å…³çš„é—®é¢˜é¢‘ç¹å‡ºç°ï¼Œæš´åŠ›æšä¸¾å¾€å¾€å›  O(nÂ²) æ—¶é—´å¤æ‚åº¦è¶…æ—¶ã€‚è€Œæ»‘åŠ¨çª—å£ç®—æ³•ï¼Œå‡­å€Ÿå…¶ O(n) çš„é«˜æ•ˆæ€§èƒ½ï¼Œæˆä¸ºè§£å†³è¿™ç±»é—®é¢˜çš„"ç¥å…µåˆ©å™¨"ã€‚æœ¬æ–‡å°†ä»åŸç†æœ¬è´¨å‡ºå‘ï¼Œæ¢³ç†æ»‘åŠ¨çª—å£çš„åˆ†ç±»ã€é€‚ç”¨åœºæ™¯ï¼Œæç‚¼é€šç”¨æ¨¡æ¿ï¼Œå¹¶ç»“åˆç»å…¸ä¾‹é¢˜å®æˆ˜æ‹†è§£ï¼Œå¸®ä½ å½»åº•æŒæ¡è¿™ä¸€æ ¸å¿ƒç®—æ³•ã€‚</p>
<h2 data-id="heading-1">ä¸€ã€æ»‘åŠ¨çª—å£æ ¸å¿ƒåŸç†ï¼šç”¨å•è°ƒæ€§å‹ç¼©éå†ç»´åº¦</h2>
<p>æ»‘åŠ¨çª—å£çš„æœ¬è´¨ï¼Œæ˜¯<strong>åˆ©ç”¨åŒºé—´çš„å•è°ƒæ€§ï¼Œå°†åŸæœ¬éœ€è¦åµŒå¥—éå†ï¼ˆO(nÂ²)ï¼‰çš„è¿ç»­åŒºé—´é—®é¢˜ï¼Œè½¬åŒ–ä¸ºå•è½®åŒæŒ‡é’ˆéå†ï¼ˆO(n)ï¼‰</strong>ã€‚å…¶æ ¸å¿ƒé€»è¾‘åŸºäºå¯¹â€œçª—å£çŠ¶æ€â€çš„ç²¾å‡†æŠŠæ§ï¼Œé€šè¿‡ä¸¤ä¸ªæŒ‡é’ˆï¼ˆleft å·¦è¾¹ç•Œã€right å³è¾¹ç•Œï¼‰çš„ååŒç§»åŠ¨ï¼Œè·³è¿‡æ— æ•ˆåŒºé—´ï¼ˆå‰ªæï¼‰ï¼Œå®ç°é«˜æ•ˆæšä¸¾ã€‚</p>
<h3 data-id="heading-2">1.1 å…ˆææ‡‚ï¼šæš´åŠ›æšä¸¾çš„ç—›ç‚¹</h3>
<p>ä»¥â€œæ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²â€ä¸ºä¾‹ï¼Œæš´åŠ›æ€è·¯æ˜¯æšä¸¾æ‰€æœ‰å­ä¸²çš„èµ·ç‚¹ i å’Œç»ˆç‚¹ jï¼ˆiâ‰¤jï¼‰ï¼Œæ£€æŸ¥å­ä¸² s[i..j] æ˜¯å¦æ— é‡å¤ï¼Œæœ€ç»ˆè®°å½•æœ€é•¿é•¿åº¦ã€‚è¿™ç§æ–¹å¼éœ€è¦éå†æ‰€æœ‰ iã€j ç»„åˆï¼Œæ—¶é—´å¤æ‚åº¦ O(nÂ²)ï¼Œä¸”å­˜åœ¨å¤§é‡æ— æ•ˆè®¡ç®—ï¼šæ¯”å¦‚å½“ s[0..3] å­˜åœ¨é‡å¤æ—¶ï¼Œs[0..4]ã€s[0..5] ç­‰åŒ…å«è¯¥åŒºé—´çš„å­ä¸²å¿…ç„¶ä¹Ÿé‡å¤ï¼Œæ— éœ€å†æ£€æŸ¥ã€‚</p>
<h3 data-id="heading-3">1.2 æ»‘åŠ¨çª—å£çš„æ ¸å¿ƒæ´å¯Ÿï¼šåŒºé—´å•è°ƒæ€§</h3>
<p>æ»‘åŠ¨çª—å£èƒ½ä¼˜åŒ–çš„å…³é”®ï¼Œæ˜¯æŠ“ä½äº†ã€Œçª—å£çŠ¶æ€çš„å•è°ƒæ€§ã€â€”â€” çª—å£çš„çŠ¶æ€ï¼ˆå¦‚æ˜¯å¦å«é‡å¤ã€å’Œ/ç§¯æ˜¯å¦æ»¡è¶³æ¡ä»¶ï¼‰ä¼šéšçª—å£çš„æ‰©å±•/ç¼©å°å‘ˆç°å•å‘å˜åŒ–ï¼Œå…·ä½“å¯æ€»ç»“ä¸ºä¸¤æ¡æ ¸å¿ƒè§„å¾‹ï¼š</p>
<ul>
<li>
<p><strong>è§„å¾‹1ï¼ˆåçŠ¶æ€çš„åŒ…å«æ€§ï¼‰</strong>ï¼šè‹¥çª—å£ [left, right] å¤„äºâ€œåçŠ¶æ€â€ï¼ˆå¦‚å«é‡å¤å­—ç¬¦ã€å’Œâ‰¥targetã€ç§¯â‰¥Kï¼‰ï¼Œåˆ™æ‰€æœ‰åŒ…å«è¯¥çª—å£çš„æ›´å¤§çª—å£ [left, right+1]ã€[left, right+2]... å¿…ç„¶ä¹Ÿæ˜¯â€œåçŠ¶æ€â€ã€‚æ­¤æ—¶æ— éœ€ç»§ç»­æ‰©å±• rightï¼Œåº”ç§»åŠ¨ left ç¼©å°çª—å£ï¼Œè·³è¿‡æ— æ•ˆåŒºé—´ã€‚</p>
</li>
<li>
<p><strong>è§„å¾‹2ï¼ˆå¥½çŠ¶æ€çš„è¢«åŒ…å«æ€§ï¼‰</strong>ï¼šè‹¥çª—å£ [left, right] å¤„äºâ€œå¥½çŠ¶æ€â€ï¼ˆå¦‚æ— é‡å¤ã€å’Œ&lt;targetã€ç§¯&lt;Kï¼‰ï¼Œåˆ™æ‰€æœ‰è¢«è¯¥çª—å£åŒ…å«çš„æ›´å°çª—å£ [left+1, right]ã€[left+2, right]... å¿…ç„¶ä¹Ÿæ˜¯â€œå¥½çŠ¶æ€â€ã€‚æ­¤æ—¶æ— éœ€ç¼©å°çª—å£ï¼Œåº”ç»§ç»­æ‰©å±• right å¯»æ‰¾æ›´ä¼˜è§£ã€‚</p>
</li>
</ul>
<h3 data-id="heading-4">1.3 ä¸€å¥è¯æ€»ç»“åŸç†</h3>
<p>æ»‘åŠ¨çª—å£é€šè¿‡ right æŒ‡é’ˆâ€œæ‰©çª—å£â€æ¢ç´¢æ–°çš„åŒºé—´ï¼Œé€šè¿‡ left æŒ‡é’ˆâ€œç¼©çª—å£â€å‰”é™¤æ— æ•ˆåŒºé—´ï¼Œæ¯ä¸ªå…ƒç´ æœ€å¤šè¢«åŠ å…¥çª—å£ï¼ˆright ç§»åŠ¨ï¼‰å’Œç§»å‡ºçª—å£ï¼ˆleft ç§»åŠ¨ï¼‰å„ä¸€æ¬¡ï¼Œæœ€ç»ˆä»¥ O(n) æ—¶é—´å®Œæˆæ‰€æœ‰æœ‰æ•ˆåŒºé—´çš„æšä¸¾ã€‚</p>
<h2 data-id="heading-5">äºŒã€æ»‘åŠ¨çª—å£çš„åˆ†ç±»ï¼šæŒ‰ç›®æ ‡åœºæ™¯åˆ’åˆ†</h2>
<p>æ»‘åŠ¨çª—å£çš„æ ¸å¿ƒé€»è¾‘ä¸€è‡´ï¼Œä½†æ ¹æ®é—®é¢˜ç›®æ ‡ï¼ˆæ±‚æœ€é•¿ã€æ±‚æœ€çŸ­ã€æ±‚è®¡æ•°ï¼‰çš„ä¸åŒï¼Œç¼©çª—å£çš„æ¡ä»¶å’Œæ›´æ–°ç­”æ¡ˆçš„æ—¶æœºä¼šæœ‰å·®å¼‚ã€‚æŒ‰ç›®æ ‡å¯åˆ†ä¸ºä¸‰å¤§ç±»ï¼Œè¦†ç›–ç»å¤§å¤šæ•°ç»å…¸åœºæ™¯ï¼š</p>

































<table><thead><tr><th>åˆ†ç±»</th><th>æ ¸å¿ƒç›®æ ‡</th><th>ç¼©çª—å£æ¡ä»¶</th><th>æ›´æ–°ç­”æ¡ˆæ—¶æœº</th><th>å…¸å‹é—®é¢˜</th></tr></thead><tbody><tr><td>ç±»å‹1ï¼šæ±‚æœ€é•¿/æœ€å¤§åŒºé—´</td><td>æ‰¾åˆ°æ»¡è¶³â€œå¥½çŠ¶æ€â€çš„æœ€é•¿è¿ç»­åŒºé—´</td><td>çª—å£è¿›å…¥â€œåçŠ¶æ€â€æ—¶ï¼Œç¼© left è‡³å›åˆ°â€œå¥½çŠ¶æ€â€</td><td>ç¼©çª—å£å®Œæˆåï¼Œæ¯æ¬¡æ‰©å±• right åæ›´æ–°</td><td>æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²ã€æœ€é•¿é‡å¤å­æ•°ç»„</td></tr><tr><td>ç±»å‹2ï¼šæ±‚æœ€çŸ­/æœ€å°åŒºé—´</td><td>æ‰¾åˆ°æ»¡è¶³â€œå¥½çŠ¶æ€â€çš„æœ€çŸ­è¿ç»­åŒºé—´</td><td>çª—å£è¿›å…¥â€œå¥½çŠ¶æ€â€æ—¶ï¼Œç¼© left è‡³å›åˆ°â€œåçŠ¶æ€â€ï¼ˆå°½å¯èƒ½ç¼©å°çª—å£ï¼‰</td><td>ç¼©çª—å£è¿‡ç¨‹ä¸­ï¼Œæ¯æ¬¡ç¼©å° left åæ›´æ–°</td><td>é•¿åº¦æœ€å°çš„å­æ•°ç»„ã€æœ€å°è¦†ç›–å­ä¸²</td></tr><tr><td>ç±»å‹3ï¼šæ±‚è®¡æ•°/ç»Ÿè®¡åŒºé—´</td><td>ç»Ÿè®¡æ‰€æœ‰æ»¡è¶³â€œå¥½çŠ¶æ€â€çš„è¿ç»­åŒºé—´ä¸ªæ•°</td><td>çª—å£è¿›å…¥â€œåçŠ¶æ€â€æ—¶ï¼Œç¼© left è‡³å›åˆ°â€œå¥½çŠ¶æ€â€</td><td>ç¼©çª—å£å®Œæˆåï¼Œç´¯åŠ å½“å‰ right å¯¹åº”çš„æœ‰æ•ˆåŒºé—´æ•°ï¼ˆright-left+1ï¼‰</td><td>ä¹˜ç§¯å°äº K çš„å­æ•°ç»„ã€æ‰¾åˆ°å­—ç¬¦ä¸²ä¸­æ‰€æœ‰å­—æ¯å¼‚ä½è¯</td></tr></tbody></table>
<h2 data-id="heading-6">ä¸‰ã€é€‚ç”¨åœºæ™¯ï¼š3ä¸ªæ ¸å¿ƒåˆ¤æ–­æ ‡å‡†</h2>
<p>å¹¶éæ‰€æœ‰å­ä¸²/å­æ•°ç»„é—®é¢˜éƒ½èƒ½ç”¨æ»‘åŠ¨çª—å£ï¼Œéœ€æ»¡è¶³ä»¥ä¸‹ 3 ä¸ªæ ¸å¿ƒæ¡ä»¶ï¼Œç¼ºä¸€ä¸å¯ï¼š</p>
<ol>
<li>
<p><strong>é—®é¢˜å¯¹è±¡æ˜¯è¿ç»­åŒºé—´</strong>ï¼šæ»‘åŠ¨çª—å£ä»…é€‚ç”¨äºâ€œè¿ç»­å­ä¸²â€æˆ–â€œè¿ç»­å­æ•°ç»„â€é—®é¢˜ï¼Œéè¿ç»­åŒºé—´ï¼ˆå¦‚å­åºåˆ—ï¼‰ä¸é€‚ç”¨ã€‚</p>
</li>
<li>
<p><strong>çª—å£çŠ¶æ€å…·æœ‰å•è°ƒæ€§</strong>ï¼šéœ€æ»¡è¶³å‰æ–‡æåˆ°çš„ä¸¤æ¡è§„å¾‹ä¹‹ä¸€ï¼Œå³æ‰©å±•/ç¼©å°çª—å£æ—¶ï¼ŒçŠ¶æ€å˜åŒ–æ˜¯å•å‘çš„ã€‚åä¾‹ï¼šâ€œæ‰¾å’Œä¸º target çš„å­æ•°ç»„ï¼ˆå«è´Ÿæ•°å€¼ï¼‰â€ï¼Œçª—å£ [left, right] å’Œä¸º target æ—¶ï¼Œæ‰©å±• right å¯èƒ½å› è´Ÿæ•°å¯¼è‡´å’Œå˜å°ï¼Œæ‰“ç ´å•è°ƒæ€§ï¼Œæ— æ³•ç”¨æ»‘åŠ¨çª—å£ã€‚</p>
</li>
<li>
<p><strong>çŠ¶æ€å¯å¿«é€Ÿæ›´æ–°</strong>ï¼šåŠ å…¥ right å…ƒç´ æˆ–ç§»å‡º left å…ƒç´ æ—¶ï¼Œçª—å£çš„çŠ¶æ€ï¼ˆå¦‚å’Œã€ç§¯ã€å­—ç¬¦é¢‘ç‡ï¼‰èƒ½åœ¨ O(1) æ—¶é—´å†…æ›´æ–°ï¼Œæ— éœ€é‡æ–°è®¡ç®—æ•´ä¸ªçª—å£çŠ¶æ€ã€‚</p>
</li>
</ol>
<h2 data-id="heading-7">å››ã€é€šç”¨æ¨¡æ¿ï¼š3ç±»åœºæ™¯ç»Ÿä¸€æ¡†æ¶</h2>
<p>åŸºäºä¸Šè¿°åˆ†ç±»ï¼Œæç‚¼å‡ºé€šç”¨æ¨¡æ¿ï¼Œåªéœ€æ ¹æ®ç›®æ ‡è°ƒæ•´ã€Œç¼©çª—å£æ¡ä»¶ã€å’Œã€Œæ›´æ–°ç­”æ¡ˆæ—¶æœºã€å³å¯ã€‚æ¨¡æ¿æ ¸å¿ƒæ­¥éª¤ï¼šåˆå§‹åŒ–å˜é‡ â†’ æ‰©çª—å£ â†’ ç¼©çª—å£ â†’ æ›´æ–°ç­”æ¡ˆã€‚</p>
<h3 data-id="heading-8">4.0 å¿«é€Ÿå‚è€ƒè¡¨</h3>

































<table><thead><tr><th>ç±»å‹</th><th>åˆå§‹ ans</th><th>ç¼©çª—å£æ¡ä»¶</th><th>æ›´æ–°ç­”æ¡ˆæ—¶æœº</th><th>å…³é”®ä»£ç </th></tr></thead><tbody><tr><td><strong>ç±»å‹1ï¼šæ±‚æœ€é•¿</strong></td><td><code>0</code></td><td>è¿›å…¥åçŠ¶æ€</td><td>ç¼©çª—å£åï¼Œæ¯æ¬¡æ‰©å±• right å</td><td><code>ans = Math.max(ans, right - left + 1)</code></td></tr><tr><td><strong>ç±»å‹2ï¼šæ±‚æœ€çŸ­</strong></td><td><code>Infinity</code></td><td>è¿›å…¥å¥½çŠ¶æ€</td><td>ç¼©çª—å£è¿‡ç¨‹ä¸­</td><td><code>ans = Math.min(ans, right - left + 1)</code></td></tr><tr><td><strong>ç±»å‹3ï¼šæ±‚è®¡æ•°</strong></td><td><code>0</code></td><td>è¿›å…¥åçŠ¶æ€</td><td>ç¼©çª—å£å</td><td><code>ans += right - left + 1</code></td></tr></tbody></table>
<h3 data-id="heading-9">4.1 é€šç”¨æ¨¡æ¿ï¼ˆTypeScript/JavaScriptï¼‰</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span> slidingWindowTemplate&lt;T&gt;(<span class="hljs-attr">data</span>: T[], <span class="hljs-attr">targetParam</span>: <span class="hljs-built_in">any</span>): <span class="hljs-built_in">number</span> {
  <span class="hljs-comment">// 1. åˆå§‹åŒ–å˜é‡</span>
  <span class="hljs-keyword">let</span> left = <span class="hljs-number">0</span>; <span class="hljs-comment">// å·¦çª—å£è¾¹ç•Œ</span>
  <span class="hljs-keyword">let</span> ans = åˆå§‹å€¼; <span class="hljs-comment">// ç­”æ¡ˆå˜é‡ï¼ˆæœ€é•¿â†’0ï¼Œæœ€çŸ­â†’Infinityï¼Œè®¡æ•°â†’0ï¼‰</span>
  <span class="hljs-keyword">let</span> status = åˆå§‹çŠ¶æ€; <span class="hljs-comment">// å¦‚å¯¹è±¡ï¼ˆå­—ç¬¦é¢‘ç‡ï¼‰ã€sum=0ã€prod=1</span>

  <span class="hljs-comment">// 2. æ‰©çª—å£ï¼šright éå†æ‰€æœ‰å…ƒç´ </span>
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> right = <span class="hljs-number">0</span>; right &lt; data.<span class="hljs-property">length</span>; right++) {
    <span class="hljs-keyword">const</span> rightVal = data[right];
    <span class="hljs-comment">// åŠ å…¥å³å…ƒç´ ï¼Œæ›´æ–°çŠ¶æ€</span>
    <span class="hljs-comment">// status.update(rightVal); // æ ¹æ®å…·ä½“ç±»å‹æ›´æ–°</span>

    <span class="hljs-comment">// 3. ç¼©çª—å£ï¼šæ ¹æ®ç›®æ ‡å’Œå½“å‰çŠ¶æ€åˆ¤æ–­æ˜¯å¦ç¼©å·¦</span>
    <span class="hljs-keyword">while</span> (ç¼©çª—å£æ¡ä»¶) {
      <span class="hljs-comment">// æ ¸å¿ƒå·®å¼‚ç‚¹ï¼šä¸åŒç±»å‹åœºæ™¯æ¡ä»¶ä¸åŒ</span>
      <span class="hljs-keyword">const</span> leftVal = data[left];
      <span class="hljs-comment">// ç§»å‡ºå·¦å…ƒç´ ï¼Œæ›´æ–°çŠ¶æ€</span>
      <span class="hljs-comment">// status.remove(leftVal); // æ ¹æ®å…·ä½“ç±»å‹æ›´æ–°</span>
      left++; <span class="hljs-comment">// ç¼©å°çª—å£</span>
    }

    <span class="hljs-comment">// 4. æ›´æ–°ç­”æ¡ˆï¼šæ ¹æ®ç±»å‹è°ƒæ•´æ—¶æœº</span>
    <span class="hljs-comment">// ç­”æ¡ˆæ›´æ–°é€»è¾‘</span>
    <span class="hljs-comment">// æ ¸å¿ƒå·®å¼‚ç‚¹ï¼šä¸åŒç±»å‹åœºæ™¯æ—¶æœºä¸åŒ</span>
  }

  <span class="hljs-comment">// 5. å¤„ç†è¾¹ç•Œæƒ…å†µï¼ˆå¦‚æ— æ»¡è¶³æ¡ä»¶çš„çª—å£ï¼‰</span>
  <span class="hljs-keyword">return</span> å¤„ç†åçš„ ans;
}
</code></pre>
<h3 data-id="heading-10">4.2 åˆ†ç±»å‹æ¨¡æ¿ç»†åŒ–</h3>
<h4 data-id="heading-11">ç±»å‹1ï¼šæ±‚æœ€é•¿/æœ€å¤§åŒºé—´</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span> maxLengthTemplate&lt;T&gt;(<span class="hljs-attr">data</span>: T[], <span class="hljs-attr">param</span>: <span class="hljs-built_in">any</span>): <span class="hljs-built_in">number</span> {
  <span class="hljs-keyword">let</span> left = <span class="hljs-number">0</span>;
  <span class="hljs-keyword">let</span> ans = <span class="hljs-number">0</span>; <span class="hljs-comment">// æœ€é•¿åˆå§‹ä¸º0</span>
  <span class="hljs-keyword">const</span> <span class="hljs-attr">status</span>: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">number</span>&gt; = {}; <span class="hljs-comment">// å¯¹è±¡ï¼šè®°å½•å­—ç¬¦é¢‘ç‡</span>

  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> right = <span class="hljs-number">0</span>; right &lt; data.<span class="hljs-property">length</span>; right++) {
    <span class="hljs-keyword">const</span> rightVal = data[right];
    <span class="hljs-comment">// æ›´æ–°çŠ¶æ€</span>
    status[rightVal <span class="hljs-keyword">as</span> <span class="hljs-built_in">string</span>] = status[rightVal <span class="hljs-keyword">as</span> <span class="hljs-built_in">string</span>] ? status[rightVal <span class="hljs-keyword">as</span> <span class="hljs-built_in">string</span>] + <span class="hljs-number">1</span> : <span class="hljs-number">1</span>;

    <span class="hljs-comment">// ç¼©çª—å£æ¡ä»¶ï¼šè¿›å…¥åçŠ¶æ€</span>
    <span class="hljs-keyword">while</span> (åçŠ¶æ€åˆ¤æ–­) {
      <span class="hljs-comment">// å¦‚ status[rightVal] &gt; 1ï¼ˆé‡å¤å­—ç¬¦ï¼‰</span>
      <span class="hljs-keyword">const</span> leftVal = data[left];
      status[leftVal <span class="hljs-keyword">as</span> <span class="hljs-built_in">string</span>]--;
      left++;
    }

    <span class="hljs-comment">// æ›´æ–°ç­”æ¡ˆï¼šç¼©çª—å£åï¼Œå½“å‰çª—å£æ˜¯æœ‰æ•ˆæœ€é•¿çª—å£</span>
    ans = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(ans, right - left + <span class="hljs-number">1</span>);
  }

  <span class="hljs-keyword">return</span> ans;
}
</code></pre>
<h4 data-id="heading-12">ç±»å‹2ï¼šæ±‚æœ€çŸ­/æœ€å°åŒºé—´</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">minLengthTemplate</span>(<span class="hljs-params">data: <span class="hljs-built_in">number</span>[], param: <span class="hljs-built_in">any</span></span>): <span class="hljs-built_in">number</span> {
  <span class="hljs-keyword">let</span> left = <span class="hljs-number">0</span>;
  <span class="hljs-keyword">let</span> ans = <span class="hljs-title class_">Infinity</span>; <span class="hljs-comment">// æœ€çŸ­åˆå§‹ä¸ºæ— ç©·å¤§</span>
  <span class="hljs-keyword">let</span> status = <span class="hljs-number">0</span>; <span class="hljs-comment">// å¦‚ sumWindow = 0</span>

  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> right = <span class="hljs-number">0</span>; right &lt; data.<span class="hljs-property">length</span>; right++) {
    <span class="hljs-keyword">const</span> rightVal = data[right];
    status += rightVal; <span class="hljs-comment">// æ›´æ–°çŠ¶æ€</span>

    <span class="hljs-comment">// ç¼©çª—å£æ¡ä»¶ï¼šè¿›å…¥å¥½çŠ¶æ€ï¼ˆå°½å¯èƒ½ç¼©å°çª—å£ï¼‰</span>
    <span class="hljs-keyword">while</span> (å¥½çŠ¶æ€åˆ¤æ–­) {
      <span class="hljs-comment">// å¦‚ status &gt;= targetï¼ˆå’Œâ‰¥ç›®æ ‡ï¼‰</span>
      <span class="hljs-comment">// ç¼©çª—å£æ—¶æ›´æ–°ç­”æ¡ˆ</span>
      ans = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(ans, right - left + <span class="hljs-number">1</span>);
      <span class="hljs-keyword">const</span> leftVal = data[left];
      status -= leftVal;
      left++;
    }
  }

  <span class="hljs-comment">// å¤„ç†è¾¹ç•Œï¼šæ— æ»¡è¶³æ¡ä»¶çš„çª—å£è¿”å›0</span>
  <span class="hljs-keyword">return</span> ans !== <span class="hljs-title class_">Infinity</span> ? ans : <span class="hljs-number">0</span>;
}
</code></pre>
<h4 data-id="heading-13">ç±»å‹3ï¼šæ±‚è®¡æ•°/ç»Ÿè®¡åŒºé—´</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">countTemplate</span>(<span class="hljs-params">data: <span class="hljs-built_in">number</span>[], param: <span class="hljs-built_in">any</span></span>): <span class="hljs-built_in">number</span> {
  <span class="hljs-keyword">let</span> left = <span class="hljs-number">0</span>;
  <span class="hljs-keyword">let</span> ans = <span class="hljs-number">0</span>; <span class="hljs-comment">// è®¡æ•°åˆå§‹ä¸º0</span>
  <span class="hljs-keyword">let</span> status = <span class="hljs-number">1</span>; <span class="hljs-comment">// å¦‚ prod = 1</span>

  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> right = <span class="hljs-number">0</span>; right &lt; data.<span class="hljs-property">length</span>; right++) {
    <span class="hljs-keyword">const</span> rightVal = data[right];
    status *= rightVal; <span class="hljs-comment">// æ›´æ–°çŠ¶æ€</span>

    <span class="hljs-comment">// ç¼©çª—å£æ¡ä»¶ï¼šè¿›å…¥åçŠ¶æ€</span>
    <span class="hljs-keyword">while</span> (åçŠ¶æ€åˆ¤æ–­) {
      <span class="hljs-comment">// å¦‚ status &gt;= Kï¼ˆä¹˜ç§¯â‰¥Kï¼‰</span>
      <span class="hljs-keyword">const</span> leftVal = data[left];
      status /= leftVal;
      left++;
    }

    <span class="hljs-comment">// æ›´æ–°ç­”æ¡ˆï¼šå½“å‰rightå¯¹åº”çš„æœ‰æ•ˆåŒºé—´æ•° = right-left+1</span>
    ans += right - left + <span class="hljs-number">1</span>;
  }

  <span class="hljs-keyword">return</span> ans;
}
</code></pre>
<h2 data-id="heading-14">äº”ã€ç»å…¸ä¾‹é¢˜å®æˆ˜ï¼šé€è¡Œæ‹†è§£</h2>
<p>ç»“åˆæ¨¡æ¿ï¼Œæ‹†è§£ 3 ç±»åœºæ™¯çš„ç»å…¸ä¾‹é¢˜ï¼Œå¸®ä½ ç†è§£å¦‚ä½•å°†æ¨¡æ¿è½åœ°åˆ°å…·ä½“é—®é¢˜ã€‚</p>
<h3 data-id="heading-15">ä¾‹é¢˜1ï¼šæ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²ï¼ˆç±»å‹1ï¼šæ±‚æœ€é•¿ï¼‰</h3>
<h4 data-id="heading-16">é¢˜ç›®æè¿°</h4>
<p>ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸² sï¼Œè¯·ä½ æ‰¾å‡ºå…¶ä¸­ä¸å«æœ‰é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²çš„é•¿åº¦ã€‚</p>
<h4 data-id="heading-17">è§£é¢˜æ€è·¯</h4>
<ul>
<li><strong>çª—å£çŠ¶æ€ï¼ˆåï¼‰</strong>ï¼šçª—å£å†…å­˜åœ¨é‡å¤å­—ç¬¦ï¼›</li>
<li><strong>çŠ¶æ€ç»Ÿè®¡</strong>ï¼šç”¨å¯¹è±¡è®°å½•çª—å£å†…å­—ç¬¦çš„å‡ºç°æ¬¡æ•°ï¼›</li>
<li><strong>ç¼©çª—å£æ¡ä»¶</strong>ï¼šå½“å‰åŠ å…¥çš„å­—ç¬¦å‡ºç°æ¬¡æ•°&gt;1ï¼ˆè¿›å…¥åçŠ¶æ€ï¼‰ï¼›</li>
<li><strong>æ›´æ–°ç­”æ¡ˆ</strong>ï¼šç¼©çª—å£å®Œæˆåï¼Œè®¡ç®—å½“å‰çª—å£é•¿åº¦ï¼Œæ›´æ–°æœ€å¤§å€¼ã€‚</li>
</ul>
<h4 data-id="heading-18">ä»£ç å®ç°</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">lengthOfLongestSubstring</span>(<span class="hljs-params">s: <span class="hljs-built_in">string</span></span>): <span class="hljs-built_in">number</span> {
  <span class="hljs-keyword">let</span> left = <span class="hljs-number">0</span>;
  <span class="hljs-keyword">let</span> ans = <span class="hljs-number">0</span>; <span class="hljs-comment">// æœ€é•¿å­ä¸²é•¿åº¦åˆå§‹ä¸º0</span>
  <span class="hljs-keyword">const</span> <span class="hljs-attr">window</span>: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">number</span>&gt; = {}; <span class="hljs-comment">// å¯¹è±¡ï¼šè®°å½•çª—å£å†…å­—ç¬¦å‡ºç°æ¬¡æ•°</span>

  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> right = <span class="hljs-number">0</span>; right &lt; s.<span class="hljs-property">length</span>; right++) {
    <span class="hljs-keyword">const</span> rightChar = s[right];
    <span class="hljs-comment">// åŠ å…¥å³å­—ç¬¦ï¼Œæ›´æ–°çŠ¶æ€</span>
    <span class="hljs-variable language_">window</span>[rightChar] = <span class="hljs-variable language_">window</span>[rightChar] ? <span class="hljs-variable language_">window</span>[rightChar] + <span class="hljs-number">1</span> : <span class="hljs-number">1</span>;

    <span class="hljs-comment">// ç¼©çª—å£ï¼šå½“å½“å‰å­—ç¬¦å‡ºç°æ¬¡æ•°&gt;1ï¼ˆåçŠ¶æ€ï¼‰ï¼Œç¼©å·¦ç›´åˆ°æ— é‡å¤</span>
    <span class="hljs-keyword">while</span> (<span class="hljs-variable language_">window</span>[rightChar] &gt; <span class="hljs-number">1</span>) {
      <span class="hljs-keyword">const</span> leftChar = s[left];
      <span class="hljs-variable language_">window</span>[leftChar]--; <span class="hljs-comment">// ç§»å‡ºå·¦å­—ç¬¦ï¼Œæ›´æ–°çŠ¶æ€</span>
      left++;
    }

    <span class="hljs-comment">// æ›´æ–°ç­”æ¡ˆï¼šå½“å‰çª—å£æ˜¯æ— é‡å¤çš„æœ‰æ•ˆçª—å£ï¼Œè®¡ç®—é•¿åº¦</span>
    ans = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(ans, right - left + <span class="hljs-number">1</span>);
  }

  <span class="hljs-keyword">return</span> ans;
}
</code></pre>
<h4 data-id="heading-19">å¤æ‚åº¦åˆ†æ</h4>
<p>æ—¶é—´å¤æ‚åº¦ O(n)ï¼šæ¯ä¸ªå­—ç¬¦è¢« right åŠ å…¥ã€left ç§»å‡ºå„ä¸€æ¬¡ï¼›ç©ºé—´å¤æ‚åº¦ O(min(m, n)))ï¼šm æ˜¯å­—ç¬¦é›†å¤§å°ï¼Œçª—å£å†…å­—ç¬¦æ•°ä¸è¶…è¿‡ min(m, n)ã€‚</p>
<h3 data-id="heading-20">ä¾‹é¢˜2ï¼šé•¿åº¦æœ€å°çš„å­æ•°ç»„ï¼ˆç±»å‹2ï¼šæ±‚æœ€çŸ­ï¼‰</h3>
<h4 data-id="heading-21">é¢˜ç›®æè¿°</h4>
<p>ç»™å®šä¸€ä¸ªå«æœ‰ n ä¸ªæ­£æ•´æ•°çš„æ•°ç»„å’Œä¸€ä¸ªæ­£æ•´æ•° targetï¼Œæ‰¾å‡ºè¯¥æ•°ç»„ä¸­æ»¡è¶³å…¶å’Œ â‰¥ target çš„é•¿åº¦æœ€å°çš„ è¿ç»­å­æ•°ç»„ï¼Œå¹¶è¿”å›å…¶é•¿åº¦ã€‚å¦‚æœä¸å­˜åœ¨ç¬¦åˆæ¡ä»¶çš„å­æ•°ç»„ï¼Œè¿”å› 0ã€‚</p>
<h4 data-id="heading-22">è§£é¢˜æ€è·¯</h4>
<ul>
<li><strong>çª—å£çŠ¶æ€ï¼ˆå¥½ï¼‰</strong>ï¼šçª—å£å’Œâ‰¥targetï¼›</li>
<li><strong>çŠ¶æ€ç»Ÿè®¡</strong>ï¼šç”¨ sumWindow è®°å½•çª—å£å†…å…ƒç´ å’Œï¼›</li>
<li><strong>ç¼©çª—å£æ¡ä»¶</strong>ï¼šsumWindowâ‰¥targetï¼ˆè¿›å…¥å¥½çŠ¶æ€ï¼‰ï¼Œç¼©å·¦ä»¥å¯»æ‰¾æ›´çŸ­çª—å£ï¼›</li>
<li><strong>æ›´æ–°ç­”æ¡ˆ</strong>ï¼šç¼©çª—å£è¿‡ç¨‹ä¸­ï¼Œæ¯æ¬¡ç¼©å°åè®¡ç®—çª—å£é•¿åº¦ï¼Œæ›´æ–°æœ€å°å€¼ã€‚</li>
</ul>
<h4 data-id="heading-23">ä»£ç å®ç°</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">minSubArrayLen</span>(<span class="hljs-params">target: <span class="hljs-built_in">number</span>, nums: <span class="hljs-built_in">number</span>[]</span>): <span class="hljs-built_in">number</span> {
  <span class="hljs-keyword">let</span> left = <span class="hljs-number">0</span>;
  <span class="hljs-keyword">let</span> ans = <span class="hljs-title class_">Infinity</span>; <span class="hljs-comment">// æœ€çŸ­é•¿åº¦åˆå§‹ä¸ºæ— ç©·å¤§</span>
  <span class="hljs-keyword">let</span> sumWindow = <span class="hljs-number">0</span>; <span class="hljs-comment">// çª—å£å†…å…ƒç´ å’Œ</span>

  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> right = <span class="hljs-number">0</span>; right &lt; nums.<span class="hljs-property">length</span>; right++) {
    sumWindow += nums[right]; <span class="hljs-comment">// åŠ å…¥å³å…ƒç´ ï¼Œæ›´æ–°å’Œ</span>

    <span class="hljs-comment">// ç¼©çª—å£ï¼šå’Œâ‰¥targetæ—¶ï¼Œå°½å¯èƒ½ç¼©å°çª—å£</span>
    <span class="hljs-keyword">while</span> (sumWindow &gt;= target) {
      <span class="hljs-comment">// ç¼©çª—å£æ—¶æ›´æ–°ç­”æ¡ˆï¼šå½“å‰çª—å£æ˜¯æœ‰æ•ˆæœ€çŸ­çª—å£å€™é€‰</span>
      ans = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(ans, right - left + <span class="hljs-number">1</span>);
      sumWindow -= nums[left]; <span class="hljs-comment">// ç§»å‡ºå·¦å…ƒç´ ï¼Œæ›´æ–°å’Œ</span>
      left++;
    }
  }

  <span class="hljs-comment">// å¤„ç†è¾¹ç•Œï¼šæ— æ»¡è¶³æ¡ä»¶çš„çª—å£è¿”å›0</span>
  <span class="hljs-keyword">return</span> ans !== <span class="hljs-title class_">Infinity</span> ? ans : <span class="hljs-number">0</span>;
}
</code></pre>
<h4 data-id="heading-24">å¤æ‚åº¦åˆ†æ</h4>
<p>æ—¶é—´å¤æ‚åº¦ O(n)ï¼šæ¯ä¸ªå…ƒç´ æœ€å¤šè¢«éå†ä¸¤æ¬¡ï¼›ç©ºé—´å¤æ‚åº¦ O(1)ï¼šä»…ç”¨å¸¸æ•°çº§å˜é‡ã€‚</p>
<h3 data-id="heading-25">ä¾‹é¢˜3ï¼šä¹˜ç§¯å°äº K çš„å­æ•°ç»„ï¼ˆç±»å‹3ï¼šæ±‚è®¡æ•°ï¼‰</h3>
<h4 data-id="heading-26">é¢˜ç›®æè¿°</h4>
<p>ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ nums å’Œä¸€ä¸ªæ•´æ•° kï¼Œç»Ÿè®¡å¹¶è¿”å›è¯¥æ•°ç»„ä¸­ä¹˜ç§¯å°äº k çš„è¿ç»­å­æ•°ç»„çš„ä¸ªæ•°ã€‚</p>
<h4 data-id="heading-27">è§£é¢˜æ€è·¯</h4>
<ul>
<li><strong>çª—å£çŠ¶æ€ï¼ˆåï¼‰</strong>ï¼šçª—å£ä¹˜ç§¯â‰¥kï¼›</li>
<li><strong>çŠ¶æ€ç»Ÿè®¡</strong>ï¼šç”¨ prod è®°å½•çª—å£å†…å…ƒç´ ä¹˜ç§¯ï¼›</li>
<li><strong>ç¼©çª—å£æ¡ä»¶</strong>ï¼šprodâ‰¥kï¼ˆè¿›å…¥åçŠ¶æ€ï¼‰ï¼Œç¼©å·¦ç›´åˆ°ä¹˜ç§¯&lt;kï¼›</li>
<li><strong>æ›´æ–°ç­”æ¡ˆ</strong>ï¼šç¼©çª—å£å®Œæˆåï¼Œå½“å‰ right å¯¹åº”çš„æœ‰æ•ˆå­æ•°ç»„æ•°ä¸º right-left+1ï¼ˆå³ [left,right]ã€[left+1,right]...[right,right]ï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-28">ä»£ç å®ç°</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">numSubarrayProductLessThanK</span>(<span class="hljs-params">nums: <span class="hljs-built_in">number</span>[], k: <span class="hljs-built_in">number</span></span>): <span class="hljs-built_in">number</span> {
  <span class="hljs-comment">// è¾¹ç•Œæ¡ä»¶ï¼škâ‰¤1æ—¶ï¼Œæ‰€æœ‰æ­£æ•´æ•°ä¹˜ç§¯â‰¥1ï¼Œæ— æ»¡è¶³æ¡ä»¶çš„å­æ•°ç»„</span>
  <span class="hljs-keyword">if</span> (k &lt;= <span class="hljs-number">1</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
  }
  <span class="hljs-keyword">let</span> left = <span class="hljs-number">0</span>;
  <span class="hljs-keyword">let</span> ans = <span class="hljs-number">0</span>; <span class="hljs-comment">// è®¡æ•°åˆå§‹ä¸º0</span>
  <span class="hljs-keyword">let</span> prod = <span class="hljs-number">1</span>; <span class="hljs-comment">// çª—å£å†…å…ƒç´ ä¹˜ç§¯</span>

  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> right = <span class="hljs-number">0</span>; right &lt; nums.<span class="hljs-property">length</span>; right++) {
    prod *= nums[right]; <span class="hljs-comment">// åŠ å…¥å³å…ƒç´ ï¼Œæ›´æ–°ä¹˜ç§¯</span>

    <span class="hljs-comment">// ç¼©çª—å£ï¼šä¹˜ç§¯â‰¥kæ—¶ï¼Œç¼©å·¦ç›´åˆ°ä¹˜ç§¯&lt;k</span>
    <span class="hljs-keyword">while</span> (prod &gt;= k) {
      prod /= nums[left]; <span class="hljs-comment">// ç§»å‡ºå·¦å…ƒç´ ï¼Œæ›´æ–°ä¹˜ç§¯</span>
      left++;
    }

    <span class="hljs-comment">// ç´¯åŠ å½“å‰rightå¯¹åº”çš„æœ‰æ•ˆå­æ•°ç»„æ•°</span>
    <span class="hljs-comment">// å½“çª—å£ [left, right] çš„ä¹˜ç§¯ &lt; k æ—¶ï¼Œä»¥ right ç»“å°¾çš„æ‰€æœ‰å­æ•°ç»„éƒ½æ»¡è¶³æ¡ä»¶</span>
    <span class="hljs-comment">// å³ [left,right]ã€[left+1,right]...[right,right] å…± right-left+1 ä¸ª</span>
    ans += right - left + <span class="hljs-number">1</span>;
  }

  <span class="hljs-keyword">return</span> ans;
}
</code></pre>
<h4 data-id="heading-29">å¤æ‚åº¦åˆ†æ</h4>
<p>æ—¶é—´å¤æ‚åº¦ O(n)ï¼šæ¯ä¸ªå…ƒç´ æœ€å¤šè¢«éå†ä¸¤æ¬¡ï¼›ç©ºé—´å¤æ‚åº¦ O(1)ï¼šä»…ç”¨å¸¸æ•°çº§å˜é‡ã€‚</p>
<h2 data-id="heading-30">å…­ã€æ–°æ‰‹é¿å‘æŒ‡å—</h2>
<ol>
<li>
<p><strong>çª—å£è¾¹ç•Œç»Ÿä¸€</strong>ï¼šå»ºè®®å…¨ç¨‹ä½¿ç”¨ã€Œå·¦é—­å³é—­ã€æˆ–ã€Œå·¦é—­å³å¼€ã€è¾¹ç•Œå®šä¹‰ï¼Œä¸è¦æ··ç”¨ã€‚æœ¬æ–‡æ‰€æœ‰ä¾‹é¢˜å‡é‡‡ç”¨ã€Œå·¦é—­å³é—­ã€ï¼Œçª—å£é•¿åº¦ä¸º right-left+1ã€‚</p>
</li>
<li>
<p><strong>çŠ¶æ€æ›´æ–°é¡ºåº</strong>ï¼šç¼©çª—å£æ—¶ï¼Œéœ€å…ˆæ›´æ–°çŠ¶æ€ï¼ˆå¦‚å‡ sumã€é™¤ prodï¼‰ï¼Œå†ç§»åŠ¨ left æŒ‡é’ˆï¼Œé¿å…æ¼ç®—æˆ–å¤šç®—ã€‚</p>
</li>
<li>
<p><strong>è¾¹ç•Œæ¡ä»¶å¤„ç†</strong>ï¼š</p>
<ul>
<li>
<p>æ±‚æœ€çŸ­æ—¶ï¼Œåˆå§‹ ans è®¾ä¸ºæ— ç©·å¤§ï¼Œæœ€åéœ€åˆ¤æ–­æ˜¯å¦æ›´æ–°è¿‡ï¼ˆæœªæ›´æ–°åˆ™è¿”å› 0ï¼‰ï¼›</p>
</li>
<li>
<p>ä¹˜ç§¯é—®é¢˜éœ€æ³¨æ„ kâ‰¤1 çš„æƒ…å†µï¼ˆæ­£æ•´æ•°ä¹˜ç§¯æœ€å°ä¸º 1ï¼Œç›´æ¥è¿”å› 0ï¼‰ï¼›</p>
</li>
<li>
<p>ç©ºå­—ç¬¦ä¸²/ç©ºæ•°ç»„éœ€æå‰è¿”å› 0ã€‚</p>
</li>
</ul>
</li>
<li>
<p><strong>å•è°ƒæ€§éªŒè¯</strong>ï¼šé‡åˆ°å­ä¸²/å­æ•°ç»„é—®é¢˜æ—¶ï¼Œå…ˆæ‰‹åŠ¨æ¨¡æ‹Ÿ 2-3 ä¸ªæ¡ˆä¾‹ï¼Œç¡®è®¤çŠ¶æ€æ˜¯å¦æ»¡è¶³å•è°ƒæ€§ï¼Œå†å†³å®šæ˜¯å¦ç”¨æ»‘åŠ¨çª—å£ã€‚</p>
</li>
</ol>
<h2 data-id="heading-31">ä¸ƒã€æ€»ç»“</h2>
<p>æ»‘åŠ¨çª—å£çš„æ ¸å¿ƒæ˜¯ã€Œç”¨å•è°ƒæ€§å‹ç¼©éå†ç»´åº¦ã€ï¼Œå‰ªæåªæ˜¯ä¼˜åŒ–æ‰‹æ®µã€‚æŒæ¡å®ƒçš„å…³é”®åœ¨äºï¼š</p>
<ol>
<li>
<p>åˆ¤æ–­é—®é¢˜æ˜¯å¦æ»¡è¶³ã€Œè¿ç»­åŒºé—´+çŠ¶æ€å•è°ƒæ€§+çŠ¶æ€å¯å¿«é€Ÿæ›´æ–°ã€ï¼›</p>
</li>
<li>
<p>æ ¹æ®ç›®æ ‡ï¼ˆæœ€é•¿/æœ€çŸ­/è®¡æ•°ï¼‰ç¡®å®šã€Œç¼©çª—å£æ¡ä»¶ã€å’Œã€Œæ›´æ–°ç­”æ¡ˆæ—¶æœºã€ï¼›</p>
</li>
<li>
<p>å¥—ç”¨é€šç”¨æ¨¡æ¿ï¼Œçµæ´»è°ƒæ•´çŠ¶æ€ç»Ÿè®¡å·¥å…·ï¼ˆå“ˆå¸Œè¡¨/å’Œ/ç§¯ï¼‰ã€‚</p>
</li>
</ol>
<p>åªè¦æŠ“ä½è¿™ä¸‰ç‚¹ï¼Œæ— è®ºæ˜¯ç®€å•çš„â€œæ— é‡å¤å­ä¸²â€ï¼Œè¿˜æ˜¯å¤æ‚çš„â€œæœ€å°è¦†ç›–å­ä¸²â€ï¼Œéƒ½èƒ½æŒ‰æ­¤é€»è¾‘æ‹†è§£ã€‚å»ºè®®å¤šåšå‡ é“ç»å…¸ä¾‹é¢˜ï¼Œå›ºåŒ–æ¨¡æ¿æ€ç»´ï¼Œé¢è¯•æ—¶å°±èƒ½å¿«é€Ÿååº”ã€‚</p>
<h3 data-id="heading-32">ç»ƒä¹ é¢˜æ¨è</h3>
<p>æŒ‰éš¾åº¦å’Œç±»å‹åˆ†ç±»ï¼Œå»ºè®®æŒ‰é¡ºåºç»ƒä¹ ï¼š</p>
<h4 data-id="heading-33">åŸºç¡€é¢˜ï¼ˆå¿…åšï¼‰</h4>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fleetcode.cn%2Fproblems%2Flongest-substring-without-repeating-characters%2F" target="_blank" title="https://leetcode.cn/problems/longest-substring-without-repeating-characters/" ref="nofollow noopener noreferrer">3. æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²</a> - ç±»å‹1ï¼šæ±‚æœ€é•¿</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fleetcode.cn%2Fproblems%2Fminimum-size-subarray-sum%2F" target="_blank" title="https://leetcode.cn/problems/minimum-size-subarray-sum/" ref="nofollow noopener noreferrer">209. é•¿åº¦æœ€å°çš„å­æ•°ç»„</a> - ç±»å‹2ï¼šæ±‚æœ€çŸ­</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fleetcode.cn%2Fproblems%2Fsubarray-product-less-than-k%2F" target="_blank" title="https://leetcode.cn/problems/subarray-product-less-than-k/" ref="nofollow noopener noreferrer">713. ä¹˜ç§¯å°äº K çš„å­æ•°ç»„</a> - ç±»å‹3ï¼šæ±‚è®¡æ•°</li>
</ul>
<h4 data-id="heading-34">è¿›é˜¶é¢˜ï¼ˆæ¨èï¼‰</h4>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fleetcode.cn%2Fproblems%2Ffind-all-anagrams-in-a-string%2F" target="_blank" title="https://leetcode.cn/problems/find-all-anagrams-in-a-string/" ref="nofollow noopener noreferrer">438. æ‰¾åˆ°å­—ç¬¦ä¸²ä¸­æ‰€æœ‰å­—æ¯å¼‚ä½è¯</a> - ç±»å‹3ï¼šå›ºå®šçª—å£</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fleetcode.cn%2Fproblems%2Fminimum-window-substring%2F" target="_blank" title="https://leetcode.cn/problems/minimum-window-substring/" ref="nofollow noopener noreferrer">76. æœ€å°è¦†ç›–å­ä¸²</a> - ç±»å‹2ï¼šå¤æ‚åœºæ™¯</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fleetcode.cn%2Fproblems%2Fpermutation-in-string%2F" target="_blank" title="https://leetcode.cn/problems/permutation-in-string/" ref="nofollow noopener noreferrer">567. å­—ç¬¦ä¸²çš„æ’åˆ—</a> - ç±»å‹3ï¼šå›ºå®šçª—å£å˜ç§</li>
</ul>
<h4 data-id="heading-35">æ‰©å±•é¢˜ï¼ˆæŒ‘æˆ˜ï¼‰</h4>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fleetcode.cn%2Fproblems%2Fsliding-window-maximum%2F" target="_blank" title="https://leetcode.cn/problems/sliding-window-maximum/" ref="nofollow noopener noreferrer">239. æ»‘åŠ¨çª—å£æœ€å¤§å€¼</a> - éœ€è¦ç»“åˆå•è°ƒé˜Ÿåˆ—</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fleetcode.cn%2Fproblems%2Flongest-repeating-character-replacement%2F" target="_blank" title="https://leetcode.cn/problems/longest-repeating-character-replacement/" ref="nofollow noopener noreferrer">424. æ›¿æ¢åçš„æœ€é•¿é‡å¤å­—ç¬¦</a> - ç±»å‹1ï¼šå˜ç§</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[React è·¨å±‚çº§ç»„ä»¶é€šä¿¡ï¼šä» Props Drilling åˆ° useContext çš„å®æˆ˜å‰–æ]]></title>    <link>https://juejin.cn/post/7589201772117835782</link>    <guid>https://juejin.cn/post/7589201772117835782</guid>    <pubDate>2025-12-29T10:28:40.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589201772117835782" data-draft-id="7589082912588628011" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="React è·¨å±‚çº§ç»„ä»¶é€šä¿¡ï¼šä» Props Drilling åˆ° useContext çš„å®æˆ˜å‰–æ"/> <meta itemprop="keywords" content="å‰ç«¯,React.js"/> <meta itemprop="datePublished" content="2025-12-29T10:28:40.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¶…çº§èµ›äºšäºº_"/> <meta itemprop="url" content="https://juejin.cn/user/793196846923641"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            React è·¨å±‚çº§ç»„ä»¶é€šä¿¡ï¼šä» Props Drilling åˆ° useContext çš„å®æˆ˜å‰–æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/793196846923641/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¶…çº§èµ›äºšäºº_
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T10:28:40.000Z" title="Mon Dec 29 2025 10:28:40 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ React å¼€å‘ä¸­ï¼Œç»„ä»¶é€šä¿¡æ˜¯æ—¥å¸¸ä¸­æœ€å¸¸è§çš„ä»»åŠ¡ä¹‹ä¸€ã€‚çˆ¶å­ç»„ä»¶é—´é€šè¿‡ props ä¼ é€’æ•°æ®ç®€å•é«˜æ•ˆï¼Œä½†å½“æ•°æ®éœ€è¦ä¼ é€’åˆ°å¤šå±‚åµŒå¥—çš„å­ç»„ä»¶æ—¶ï¼Œâ€œProps Drillingâ€ï¼ˆå±æ€§ç©¿é€ï¼‰é—®é¢˜å°±ä¼šæ˜¾ç°ï¼šä¸­é—´å±‚ç»„ä»¶æ˜æ˜ä¸éœ€è¦è¿™äº›æ•°æ®ï¼Œå´ä¸å¾—ä¸è¢«åŠ¨æ¥æ”¶å¹¶å‘ä¸‹ä¼ é€’ã€‚è¿™ä¸ä»…è®©ä»£ç å†—ä½™ï¼Œè¿˜é™ä½äº†å¯ç»´æŠ¤æ€§ã€‚</p>
<p>React å®˜æ–¹æä¾›çš„ Context API æ­£æ˜¯ä¸ºæ­¤è€Œç”Ÿã€‚å®ƒå…è®¸æˆ‘ä»¬åœ¨ç»„ä»¶æ ‘çš„æœ€å¤–å±‚â€œæä¾›â€æ•°æ®ï¼Œä»»ä½•æ·±å±‚ç»„ä»¶éƒ½å¯ä»¥ç›´æ¥â€œæ¶ˆè´¹â€å®ƒï¼Œè€Œæ— éœ€å±‚å±‚ä¼ é€’ã€‚æœ¬æ–‡å°†é€šè¿‡ä¸€ä¸ªç”¨æˆ·ä¿¡æ¯çš„å®é™…ä¾‹å­ï¼Œå¯¹æ¯”ä¸¤ç§æ–¹å¼ï¼Œå¸®åŠ©ä½ ç†è§£ä½•æ—¶ã€ä½•åœ°è¯¥ä½¿ç”¨ useContext è§£å†³è·¨å±‚çº§é€šä¿¡é—®é¢˜ã€‚</p>
<h2 data-id="heading-0">Props Drillingï¼šä¼ ç»Ÿæ–¹å¼çš„ç—›ç‚¹</h2>
<p>å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªåº”ç”¨ï¼Œéœ€è¦åœ¨æœ€é¡¶å±‚ App ç»„ä»¶æŒæœ‰ç”¨æˆ·ä¿¡æ¯ï¼ˆå¦‚ç™»å½•åçš„ç”¨æˆ·æ•°æ®ï¼‰ï¼Œç„¶ååœ¨æ·±å±‚åµŒå¥—çš„ UserInfo ç»„ä»¶ä¸­æ˜¾ç¤ºç”¨æˆ·åã€‚</p>
<p>ä¼ ç»Ÿæ–¹å¼æ˜¯å±‚å±‚é€šè¿‡ props ä¼ é€’ï¼š</p>
<p>jsx</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// App.jsx</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> user = { <span class="hljs-attr">name</span>: <span class="hljs-string">"Andrew"</span> };

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Page</span> <span class="hljs-attr">user</span>=<span class="hljs-string">{user}</span> /&gt;</span></span>
  );
}

<span class="hljs-comment">// views/Page.jsx</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Page</span>(<span class="hljs-params">{ user }</span>) {
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Header</span> <span class="hljs-attr">user</span>=<span class="hljs-string">{user}</span> /&gt;</span></span>;
}

<span class="hljs-comment">// components/Header.jsx</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Header</span>(<span class="hljs-params">{ user }</span>) {
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">UserInfo</span> <span class="hljs-attr">user</span>=<span class="hljs-string">{user}</span> /&gt;</span></span>;
}

<span class="hljs-comment">// components/UserInfo.jsx</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">UserInfo</span>(<span class="hljs-params">{ user }</span>) {
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{user.name}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
}
</code></pre>
<p>è¿™ç§æ–¹å¼åœ¨å±‚çº§è¾ƒæµ…æ—¶æ²¡é—®é¢˜ï¼Œä½†æƒ³è±¡ä¸€ä¸‹å¦‚æœç»„ä»¶æ ‘æ›´æ·±ï¼ˆæ¯”å¦‚ Page â†’ Layout â†’ Sidebar â†’ Header â†’ UserInfoï¼‰ï¼Œå°±éœ€è¦åœ¨æ¯ä¸€å±‚éƒ½æ·»åŠ  user propï¼š</p>
<p>jsx</p>
<pre><code class="hljs language-ini" lang="ini">&lt;Page <span class="hljs-attr">user</span>={user} /&gt;
&lt;Layout <span class="hljs-attr">user</span>={user} /&gt;
&lt;Sidebar <span class="hljs-attr">user</span>={user} /&gt;
&lt;Header <span class="hljs-attr">user</span>={user} /&gt;
&lt;UserInfo <span class="hljs-attr">user</span>={user} /&gt;
</code></pre>
<p>ä¸­é—´çš„ Layoutã€Sidebar ç­‰ç»„ä»¶æ ¹æœ¬ä¸éœ€è¦ user æ•°æ®ï¼Œå´è¢«è¿«æˆä¸ºâ€œå¿«é€’å‘˜â€ã€‚è¿™å°±æ˜¯å…¸å‹çš„ Props Drillingï¼š</p>
<ul>
<li>ä»£ç å†—ä½™ï¼Œç»´æŠ¤æˆæœ¬é«˜ï¼ˆä¿®æ”¹ä¸€æ¬¡è¦æ”¹å¤šå¤„ï¼‰ã€‚</li>
<li>ä¸­é—´ç»„ä»¶è€¦åˆåº¦å¢åŠ ï¼Œé‡æ„å›°éš¾ã€‚</li>
<li>é˜…è¯»æ€§å·®ï¼Œéš¾ä»¥å¿«é€Ÿå®šä½æ•°æ®æ¥æºã€‚</li>
</ul>
<h2 data-id="heading-1">Context APIï¼šä¼˜é›…è§£å†³è·¨å±‚çº§é€šä¿¡</h2>
<p>Context API çš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼š<strong>æ•°æ®åœ¨æœ€å¤–å±‚æä¾›ï¼Œä»»ä½•å­ç»„ä»¶ä¸»åŠ¨æ¶ˆè´¹</strong>ã€‚è¿™æ ·ï¼Œæ•°æ®æŒæœ‰å’Œæ”¹å˜çš„é€»è¾‘ä¾ç„¶åœ¨å¤–å±‚ç»„ä»¶ï¼Œä½†æ¶ˆè´¹æ–¹å¯ä»¥ç›´æ¥è·å–ï¼Œæ— éœ€ä¸­é—´ä¼ é€’ã€‚</p>
<h3 data-id="heading-2">æ­¥éª¤ä¸€ï¼šåˆ›å»º Context</h3>
<p>é€šå¸¸åœ¨ç‹¬ç«‹æ–‡ä»¶ä¸­åˆ›å»ºï¼ˆæ¨èå®è·µï¼Œä¾¿äºå¤ç”¨å’Œç»´æŠ¤ï¼‰ï¼Œä½†ç®€å•ç¤ºä¾‹å¯æ”¾åœ¨ App ä¸­ã€‚</p>
<p>jsx</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// App.jsx</span>
<span class="hljs-keyword">import</span> { createContext } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Page</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./views/Page'</span>;

<span class="hljs-comment">// åˆ›å»º Contextï¼ŒdefaultValue ä¸º nullï¼ˆç”Ÿäº§ä¸­å¯è®¾ä¸ºé»˜è®¤å€¼ï¼‰</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">UserContext</span> = <span class="hljs-title function_">createContext</span>(<span class="hljs-literal">null</span>);

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> user = { <span class="hljs-attr">name</span>: <span class="hljs-string">"Andrew"</span> };

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">UserContext.Provider</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{user}</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Page</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">UserContext.Provider</span>&gt;</span></span>
  );
}
</code></pre>
<ul>
<li>createContext åˆ›å»ºä¸€ä¸ªä¸Šä¸‹æ–‡å¯¹è±¡ã€‚</li>
<li>Provider ç»„ä»¶åŒ…è£¹éœ€è¦å…±äº«æ•°æ®çš„ç»„ä»¶æ ‘ã€‚</li>
<li>value å±æ€§å°±æ˜¯å…±äº«çš„æ•°æ®ï¼ˆå¯ä»¥æ˜¯å¯¹è±¡ã€å‡½æ•°ã€çŠ¶æ€ç­‰ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-3">æ­¥éª¤äºŒï¼šæ¶ˆè´¹ Context</h3>
<p>åœ¨ä»»ä½•å­ç»„ä»¶ä¸­ä½¿ç”¨ useContext Hook ç›´æ¥è¯»å–ï¼š</p>
<p>jsx</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// components/UserInfo.jsx</span>
<span class="hljs-keyword">import</span> { useContext } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">UserContext</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'../App'</span>;  <span class="hljs-comment">// æ ¹æ®å®é™…è·¯å¾„è°ƒæ•´</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">UserInfo</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> user = <span class="hljs-title function_">useContext</span>(<span class="hljs-title class_">UserContext</span>);

  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{user.name}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
}
</code></pre>
<p>ä¸­é—´ç»„ä»¶æ— éœ€ä»»ä½•ä¿®æ”¹ï¼š</p>
<p>jsx</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// views/Page.jsx</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Header</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'../components/Header'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Page</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Header</span> /&gt;</span></span>;
}

<span class="hljs-comment">// components/Header.jsx</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">UserInfo</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./UserInfo'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Header</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">UserInfo</span> /&gt;</span></span>;
}
</code></pre>
<p>æ•ˆæœå®Œå…¨ç›¸åŒï¼Œä½†ä»£ç å¹²å‡€å¤šäº†ï¼UserInfo ç»„ä»¶ä¸»åŠ¨â€œæ‰¾â€æ•°æ®ï¼Œè€Œä¸æ˜¯è¢«åŠ¨æ¥æ”¶ã€‚</p>
<h3 data-id="heading-4">å®Œæ•´ç›®å½•ç»“æ„ç¤ºä¾‹</h3>
<p>text</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-attribute">src</span>/
â”œâ”€â”€ App<span class="hljs-selector-class">.jsx</span>
â”œâ”€â”€ views/
â”‚   â””â”€â”€ Page<span class="hljs-selector-class">.jsx</span>
â””â”€â”€ components/
    â”œâ”€â”€ <span class="hljs-selector-tag">Header</span><span class="hljs-selector-class">.jsx</span>
    â””â”€â”€ UserInfo<span class="hljs-selector-class">.jsx</span>
</code></pre>
<h2 data-id="heading-5">ä¸ºä»€ä¹ˆ useContext æ›´ä¼˜ï¼Ÿ</h2>
<ol>
<li><strong>é¿å… Props Drilling</strong>ï¼šä¸­é—´å±‚ç»„ä»¶æ— éœ€å…³å¿ƒæ•°æ®ä¼ é€’ã€‚</li>
<li><strong>æ•°æ®æ¥æºæ¸…æ™°</strong>ï¼šæ¶ˆè´¹ç»„ä»¶ç›´æ¥å¯¼å…¥ Contextï¼Œä¸€ç›®äº†ç„¶ã€‚</li>
<li><strong>çµæ´»æ€§é«˜</strong>ï¼šProvider å¯ä»¥åŒ…è£¹ä»»æ„å­æ ‘ï¼Œæ”¯æŒå±€éƒ¨å…±äº«ã€‚</li>
<li><strong>æ€§èƒ½å‹å¥½</strong>ï¼ˆæ³¨æ„äº‹é¡¹è§ä¸‹æ–‡ï¼‰ï¼šReact ä¼šä¼˜åŒ–åªé‡æ¸²æŸ“å®é™…æ¶ˆè´¹çš„ç»„ä»¶ã€‚</li>
</ol>
<h2 data-id="heading-6">è¿›é˜¶ï¼šåŠ¨æ€æ›´æ–° Context æ•°æ®</h2>
<p>å•çº¯çš„å¯¹è±¡å…±äº«å·²è¶³å¤Ÿå¼ºå¤§ï¼Œä½†çœŸå®åœºæ™¯ä¸­ç”¨æˆ·æ•°æ®å¾€å¾€éœ€è¦æ›´æ–°ï¼ˆå¦‚ç™»å½•/é€€å‡ºï¼‰ã€‚</p>
<p>æ¨èå°†çŠ¶æ€å’Œæ›´æ–°å‡½æ•°ä¸€èµ·æä¾›ï¼š</p>
<p>jsx</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// App.jsx</span>
<span class="hljs-keyword">import</span> { useState, createContext } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">UserContext</span> = <span class="hljs-title function_">createContext</span>(<span class="hljs-literal">null</span>);

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [user, setUser] = <span class="hljs-title function_">useState</span>({ <span class="hljs-attr">name</span>: <span class="hljs-string">"Andrew"</span> });

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">UserContext.Provider</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">user</span>, <span class="hljs-attr">setUser</span> }}&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Page</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">UserContext.Provider</span>&gt;</span></span>
  );
}
</code></pre>
<p>æ¶ˆè´¹æ–¹ï¼š</p>
<p>jsx</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// UserInfo.jsx</span>
<span class="hljs-keyword">const</span> { user, setUser } = <span class="hljs-title function_">useContext</span>(<span class="hljs-title class_">UserContext</span>);

<span class="hljs-comment">// ç¤ºä¾‹ï¼šé€€å‡ºç™»å½•</span>
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> setUser(null)}&gt;é€€å‡º<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>
{user ? <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{user.name}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span> : <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>æœªç™»å½•<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>}
</code></pre>
<p>è¿™æ ·ï¼Œä»»ä½•ç»„ä»¶éƒ½èƒ½è¯»å–å¹¶ä¿®æ”¹å…¨å±€ç”¨æˆ·çŠ¶æ€ã€‚</p>
<h2 data-id="heading-7">æœ€ä½³å®è·µä¸æ³¨æ„äº‹é¡¹</h2>
<ol>
<li>
<p><strong>å•ç‹¬æ–‡ä»¶ç®¡ç† Context</strong>ï¼šå¤§å‹é¡¹ç›®ä¸­ï¼Œå°† createContextã€Provider å°è£…æˆç‹¬ç«‹æ–‡ä»¶ï¼ˆå¦‚ UserContext.jsxï¼‰ï¼Œä¾¿äºå›¢é˜Ÿåä½œã€‚</p>
</li>
<li>
<p><strong>é¿å…é¢‘ç¹æ›´æ–°å¤§å¯¹è±¡</strong>ï¼šContext ä½¿ç”¨å¼•ç”¨ç›¸ç­‰æ€§åˆ¤æ–­é‡æ¸²æŸ“ã€‚å¦‚æœæ¯æ¬¡ Provider value éƒ½æ˜¯æ–°å¯¹è±¡ï¼ˆå¦‚ {...}ï¼‰ï¼Œä¼šå¯¼è‡´æ‰€æœ‰æ¶ˆè´¹è€…é‡æ¸²æŸ“ã€‚è§£å†³åŠæ³•ï¼š</p>
<ul>
<li>
<p>ä½¿ç”¨ useMemo ç¨³å®š valueï¼š</p>
<p>jsx</p>
<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-attr">value</span> = useMemo(() =&gt; ({ user, setUser }), [user])<span class="hljs-comment">;</span>
&lt;Provider <span class="hljs-attr">value</span>={value}&gt;
</code></pre>
</li>
<li>
<p>æˆ–æ‹†åˆ†å¤šä¸ª Contextï¼ˆä¸»é¢˜ã€ç”¨æˆ·ã€é…ç½®åˆ†å¼€ï¼‰ã€‚</p>
</li>
</ul>
</li>
<li>
<p><strong>ä¸è¦æ»¥ç”¨</strong>ï¼šContext é€‚åˆâ€œå…¨å±€æ€§â€ä½é¢‘å˜åŒ–æ•°æ®ï¼ˆå¦‚ç”¨æˆ·ã€ä¸»é¢˜ã€è¯­è¨€ï¼‰ã€‚é«˜é¢‘å˜åŒ–æˆ–å¤æ‚çŠ¶æ€æ¨è Zustandã€Jotai æˆ– Reduxã€‚</p>
</li>
<li>
<p><strong>ç»“åˆ React.memo ä¼˜åŒ–</strong>ï¼šå¦‚æœæ¶ˆè´¹è€…ä¸ä¾èµ– Contextï¼Œå¯ç”¨ React.memo é˜²æ­¢ä¸å¿…è¦é‡æ¸²æŸ“ã€‚</p>
</li>
<li>
<p><strong>TypeScript æ”¯æŒ</strong>ï¼šcreateContext æ—¶å¯æŒ‡å®šç±»å‹ï¼Œæå‡ç±»å‹å®‰å…¨ã€‚</p>
</li>
</ol>
<h2 data-id="heading-8">å®é™…åº”ç”¨åœºæ™¯ä¸¾ä¾‹</h2>
<ul>
<li><strong>ç”¨æˆ·ä¿¡æ¯</strong>ï¼šç™»å½•çŠ¶æ€ã€å¤´åƒã€æƒé™ã€‚</li>
<li><strong>ä¸»é¢˜åˆ‡æ¢</strong>ï¼šdark/light modeã€‚</li>
<li><strong>å›½é™…åŒ–</strong>ï¼šå½“å‰è¯­è¨€åŒ…ã€‚</li>
<li><strong>å¸ƒå±€é…ç½®</strong>ï¼šä¾§è¾¹æ å±•å¼€çŠ¶æ€ã€‚</li>
</ul>
<p>è¿™äº›æ•°æ®å¾€å¾€è¢«å¤šä¸ªæ·±å±‚ç»„ä»¶ä½¿ç”¨ï¼Œä½¿ç”¨ Context èƒ½æå¤§ç®€åŒ–ä»£ç ã€‚</p>
<h2 data-id="heading-9">ç»“è¯­</h2>
<p>Props Drilling æ˜¯ React æ–°æ‰‹æœ€å…ˆæ¥è§¦çš„æ–¹å¼ï¼Œä½†éšç€é¡¹ç›®è§„æ¨¡å¢é•¿ï¼Œå®ƒä¼šæˆä¸ºç»´æŠ¤çš„æ·é”ã€‚Context API + useContext æä¾›äº†åŸç”Ÿã€è½»é‡çº§çš„è§£å†³æ–¹æ¡ˆï¼Œè®©è·¨å±‚çº§é€šä¿¡å˜å¾—ä¼˜é›…è€Œé«˜æ•ˆã€‚</p>
<p>è®°ä½æ ¸å¿ƒåŸåˆ™ï¼š<strong>æ•°æ®åœ¨å¤–å±‚æä¾›ï¼Œæ¶ˆè´¹æ–¹ä¸»åŠ¨è·å–</strong>ã€‚è¿™ä¸ä»…è§£å†³äº† Props Drillingï¼Œè¿˜ä¸ºæœªæ¥æ‰©å±•ï¼ˆå¦‚ç»“åˆ Reducer å®ç°å°å‹çŠ¶æ€ç®¡ç†ï¼‰æ‰“ä¸‹åŸºç¡€ã€‚</p>
<p>åœ¨ 2025 å¹´çš„ React ç”Ÿæ€ä¸­ï¼ŒContext API ä¾ç„¶æ˜¯ä¸­å°å‹é¡¹ç›®å…¨å±€çŠ¶æ€ç®¡ç†çš„é¦–é€‰ã€‚åˆç†ä½¿ç”¨å®ƒï¼Œä½ çš„ç»„ä»¶æ ‘å°†æ›´æ¸…æ™°ã€å¯ç»´æŠ¤æ€§æ›´å¼ºã€‚</p>
<p>èµ¶ç´§åœ¨ä½ çš„é¡¹ç›®ä¸­è¯•è¯•å§â€”â€”ä»ä¸€ä¸ªç®€å•çš„ç”¨æˆ·ä¸Šä¸‹æ–‡å¼€å§‹ï¼Œä½ ä¼šçˆ±ä¸Šè¿™ç§â€œè·³è·ƒå¼â€æ•°æ®ä¼ é€’çš„è‡ªç”±ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vibe Coding ä¹‹é“ï¼šä»æ‰§è¡Œè€…åˆ°äººæœºå›¢é˜ŸæŒ‡æŒ¥å®˜]]></title>    <link>https://juejin.cn/post/7589093939656228916</link>    <guid>https://juejin.cn/post/7589093939656228916</guid>    <pubDate>2025-12-29T10:19:45.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589093939656228916" data-draft-id="7589104492882526260" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vibe Coding ä¹‹é“ï¼šä»æ‰§è¡Œè€…åˆ°äººæœºå›¢é˜ŸæŒ‡æŒ¥å®˜"/> <meta itemprop="keywords" content="VibeCoding"/> <meta itemprop="datePublished" content="2025-12-29T10:19:45.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿é‡Œå·´å·´AIç¼–ç¨‹ç¤¾åŒº"/> <meta itemprop="url" content="https://juejin.cn/user/1757434193132441"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vibe Coding ä¹‹é“ï¼šä»æ‰§è¡Œè€…åˆ°äººæœºå›¢é˜ŸæŒ‡æŒ¥å®˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1757434193132441/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿é‡Œå·´å·´AIç¼–ç¨‹ç¤¾åŒº
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T10:19:45.000Z" title="Mon Dec 29 2025 10:19:45 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼æˆ‘æ˜¯ OneOneTalk CTO å½­è¶…ã€‚ä»Šå¤©åˆ†äº«Â Vibe Coding æ–¹æ³•è®ºâ€”â€”Vibe codingä¹‹é“ã€‚</p>
<p>AIæŠ€æœ¯é£é€Ÿå‘å±•çš„ä»Šå¤©ï¼Œè½¯ä»¶å¼€å‘æ­£åœ¨ç»å†ä¸€åœºå·¨å¤§å˜é©ã€‚ ä¼ ç»Ÿçš„ç¼–ç¨‹æ–¹å¼æ­£åœ¨è¢«é‡æ–°å®šä¹‰ï¼Œå¼€å‘è€…ä¸ä»£ç ä¹‹é—´çš„å…³ç³»ä¹Ÿåœ¨å‘ç”Ÿæ ¹æœ¬æ€§è½¬å˜ã€‚ä»Šå¤©æˆ‘ä»¬å°†æ·±å…¥æ¢è®¨ Vibe Coding è¿™ä¸€æ¦‚å¿µï¼Œåˆ†æ AI ç¼–ç¨‹å¦‚ä½•é‡å¡‘æˆ‘ä»¬çš„å¼€å‘æµç¨‹ã€å›¢é˜Ÿåä½œæ¨¡å¼ä»¥åŠä¸ªäººèŒä¸šå‘å±•è·¯å¾„ï¼Œå¹¶åˆ†äº«åœ¨å®é™…é¡¹ç›®ä¸­çš„æœ€ä½³å®è·µå’Œç»éªŒæ•™è®­ã€‚</p>
<h2 data-id="heading-0">01 æ—¶ä»£ä¹‹å˜ï¼šä»äººé€‚åº”æœºå™¨åˆ°æœºå™¨ç†è§£äºº</h2>
<p>Vibe Codingè¿™ä¸€æ¦‚å¿µæœ€æ—©ç”±Andrej Karpathyâ€”â€”OpenAI è”åˆåˆ›å§‹äººã€ç‰¹æ–¯æ‹‰å‰ AI æ€»ç›‘æå‡ºï¼Œæ ‡å¿—ç€ç¼–ç¨‹èŒƒå¼çš„ä¸€æ¬¡é‡å¤§è½¬æŠ˜ã€‚åœ¨æ­¤ä¹‹å‰ï¼Œç¼–ç¨‹æœ¬è´¨ä¸Šæ˜¯"äººé€‚åº”æœºå™¨"çš„è¿‡ç¨‹ï¼šå¼€å‘è€…éœ€è¦å°†äººç±»çš„æ€ç»´é€»è¾‘è½¬åŒ–ä¸ºè®¡ç®—æœºèƒ½å¤Ÿç†è§£çš„æŒ‡ä»¤ï¼Œè¿™ä¸ªè¿‡ç¨‹æ—¢ç¹çåˆå®¹æ˜“å‡ºé”™ã€‚</p>
<p>ç„¶è€Œï¼Œéšç€å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰æŠ€æœ¯çš„çªç ´æ€§è¿›å±•ï¼Œç‰¹åˆ«æ˜¯DeepSeekç­‰å·¥å…·çš„å‡ºç°ï¼Œæˆ‘ä»¬è¿æ¥äº†"æœºå™¨ç†è§£äºº"çš„æ–°æ—¶ä»£ã€‚åœ¨è¿™ä¸ªæ–°èŒƒå¼ä¸‹ï¼Œå¼€å‘è€…ä¸å†éœ€è¦ç²¾ç¡®åœ°å‘Šè¯‰è®¡ç®—æœºæ¯ä¸€æ­¥è¯¥åšä»€ä¹ˆï¼Œè€Œæ˜¯é€šè¿‡è‡ªç„¶è¯­è¨€è¡¨è¾¾æ„å›¾ï¼Œè®©AIç†è§£å¹¶æ‰§è¡Œå…·ä½“çš„å®ç°ç»†èŠ‚ã€‚</p>
<p>è¿™ç§è½¬å˜ä¸ä»…ä»…æ˜¯æŠ€æœ¯å±‚é¢çš„é©æ–°ï¼Œæ›´æ˜¯æ€ç»´æ–¹å¼çš„æ ¹æœ¬æ€§é¢ è¦†ã€‚ä¼ ç»Ÿçš„"å¤æ³•ç¼–ç¨‹"è¦æ±‚å¼€å‘è€…äº²æ‰‹æ•²å‡»æ¯ä¸€è¡Œä»£ç ï¼Œå¯¹è¯­æ³•ã€é€»è¾‘ã€è¾¹ç•Œæ¡ä»¶ç­‰ç»†èŠ‚éƒ½è¦äº†å¦‚æŒ‡æŒã€‚è¿™ç§æ–¹å¼è™½ç„¶èƒ½å¤Ÿç¡®ä¿ä»£ç è´¨é‡ï¼Œä½†æ•ˆç‡ä½ä¸‹ï¼Œä¸”å¯¹å¼€å‘è€…çš„æŠ€æœ¯è¦æ±‚æé«˜ã€‚</p>
<p>è€Œåœ¨AIç¼–ç¨‹æ—¶ä»£ï¼Œè§’è‰²å‘ç”Ÿäº†æ ¹æœ¬æ€§è½¬å˜ï¼šäººæˆä¸ºæŒ‡æŒ¥è€…ï¼Œè´Ÿè´£è¡¨è¾¾æ„å›¾å’Œå¯¹ç»“æœè´Ÿè´£ï¼›<strong>AIæˆä¸ºæ‰§è¡Œè€…ï¼Œè´Ÿè´£å…·ä½“çš„å®ç°ç»†èŠ‚ã€‚</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/32f0ac730a2247b484a534e4509ae2dc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5be05be0QUnnvJbnqIvnpL7ljLo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767608384&amp;x-signature=P5lI13ny099x%2FARGviMEkh3dhYU%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-1">02 åä½œä¹‹é“ï¼šäººæœºå…³ç³»çš„å“²å­¦æ€è€ƒ</h2>
<h3 data-id="heading-2">äººæœºåä½œçš„å½¢æ€</h3>
<p>å›é¡¾AIç¼–ç¨‹çš„å‘å±•å†ç¨‹ï¼Œäººæœºåä½œå¯èƒ½æœ‰ä»¥ä¸‹å‡ ç§å½¢æ€ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bdea6a0837834cdaa7928ebd84618fa5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5be05be0QUnnvJbnqIvnpL7ljLo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767608384&amp;x-signature=TwJhU27YSNN0L5ne%2F%2BBTw8Qw5A4%3D" alt="" loading="lazy"/></p>
<ul>
<li>ä¸»ä»†æ¨¡å¼<br/>
å¼€å‘è€…éœ€è¦æ‰‹åŠ¨å¤åˆ¶ç²˜è´´ä»£ç ï¼Œåœ¨IDEå’Œ ChatGPT ç­‰èŠå¤©å·¥å…·ä¹‹é—´åå¤åˆ‡æ¢ã€‚AIçš„ä½œç”¨ä»…ä»…æ˜¯å›ç­”å…·ä½“é—®é¢˜ï¼Œæ— æ³•ç†è§£é¡¹ç›®çš„æ•´ä½“ä¸Šä¸‹æ–‡ï¼Œæ›´æ— æ³•è‡ªä¸»è§£å†³é—®é¢˜ã€‚</li>
<li>æ›¿ä»£æ¨¡å¼<br/>
éšç€Qoderç­‰AI IDEçš„å‡ºç°ï¼Œç¼–ç¨‹Agentå…·å¤‡äº†è‡ªä¸»è§„åˆ’èƒ½åŠ›ã€‚å¼€å‘è€…åªéœ€æè¿°é—®é¢˜ï¼ŒAgentå°±èƒ½è‡ªåŠ¨åˆ†æã€è§„åˆ’è§£å†³æ–¹æ¡ˆå¹¶æ‰§è¡Œã€‚æ›´é‡è¦çš„æ˜¯ï¼ŒAgentèƒ½å¤Ÿç†è§£æ¨¡ç³Šçš„æŒ‡ä»¤ï¼Œå¦‚"å¸®æˆ‘ä¿®å¤è¿™ä¸ª"ï¼Œè€Œä¸éœ€è¦ç²¾ç¡®çš„é”™è¯¯æè¿°ã€‚</li>
<li>å…±ç”Ÿæ¨¡å¼<br/>
è¿™æ˜¯æˆ‘ä»¬ç›®å‰æ‰€å¤„çš„é˜¶æ®µï¼Œä¹Ÿæ˜¯æœ€ç†æƒ³çš„åä½œæ¨¡å¼ã€‚åœ¨è¿™ç§æ¨¡å¼ä¸‹ï¼Œäººå’ŒAIå„è‡ªå‘æŒ¥ä¼˜åŠ¿ï¼Œå½¢æˆ1+1&gt;2çš„ååŒæ•ˆåº”ã€‚äººè´Ÿè´£æä¾›ç›®æ ‡ã€åˆ¤æ–­ä»·å€¼ã€æ‰¿æ‹…è´£ä»»ï¼›AIè´Ÿè´£æ‰§è¡Œç»†èŠ‚ã€å¤„ç†é‡å¤å·¥ä½œã€æä¾›æŠ€æœ¯å»ºè®®ã€‚</li>
</ul>
<h3 data-id="heading-3">åä½œè¿›åŒ–çš„è¿‡ç¨‹</h3>
<p>åä½œè¿›åŒ–æœ‰ä»¥ä¸‹å‡ ä¸ªè¿‡ç¨‹ï¼š</p>
<ol>
<li>çŸ¥å·±Â·æ˜ç¡®è¾¹ç•Œï¼šäººçš„ä¼˜åŠ¿æ˜¯åˆ›æ„ã€åˆ¤æ–­ã€è´£ä»»ã€ä»·å€¼è§‚ã€è·¨åŸŸæ€ç»´ã€æƒ…æ„Ÿå…±é¸£ã€‚</li>
<li>çŸ¥å½¼ç†è§£Â·AIï¼šAIçš„ä¼˜åŠ¿ï¼šé€Ÿåº¦ã€è®°å¿†ã€æ¨¡å¼è¯†åˆ«ã€ä¸çŸ¥ç–²å€¦ã€æ— æƒ…ç»ªæ³¢åŠ¨ã€‚</li>
<li>åˆä¸€Â·äººæœºå…±èˆï¼šæœ€ä½³çŠ¶æ€æ˜¯äººè´Ÿè´£"ä¸ºä»€ä¹ˆ"å’Œ"åšä»€ä¹ˆ"ï¼ŒAIè´Ÿè´£"æ€ä¹ˆåš"ã€‚</li>
<li>ä¿¡ä»»Â·ä½†è¦éªŒè¯ï¼šAIä¼šçŠ¯é”™ï¼Œäººè¦æœ‰åˆ¤æ–­åŠ›ï¼›ä¿¡ä»»ä¸æ˜¯ç›²ä»ï¼Œè€Œæ˜¯åŸºäºç†è§£çš„å§”æ‰˜ã€‚</li>
<li>è¿­ä»£Â·å¯¹è¯å¼åä½œï¼šä¸æ˜¯ä¸€æ¬¡æ€§äº¤ä»˜ï¼Œè€Œæ˜¯æŒç»­å¯¹è¯ï¼›åé¦ˆ-ä¿®æ­£-ä¼˜åŒ–çš„é—­ç¯ã€‚</li>
<li>æˆé•¿Â·å…±åŒè¿›åŒ–ï¼šäººåœ¨åä½œä¸­æå‡AIä½¿ç”¨èƒ½åŠ›ï¼ŒAIåœ¨åé¦ˆä¸­æ›´æ‡‚ä½ çš„æ„å›¾ã€‚</li>
</ol>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0768a21cb929491c914ba4d1e1ef617e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5be05be0QUnnvJbnqIvnpL7ljLo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767608384&amp;x-signature=PuPlA9led2aWW%2FBpqwPHsOgWluI%3D" alt="" loading="lazy"/></p>
<p>å°½ç®¡AIåœ¨é€Ÿåº¦ã€è®°å¿†ã€å¤šæ¨¡æ€è¯†åˆ«ç­‰æ–¹é¢å…·æœ‰æ˜¾è‘—ä¼˜åŠ¿ï¼Œä½†åœ¨å…³é”®é¢†åŸŸäººçš„ä½œç”¨ä»ç„¶ä¸å¯æ›¿ä»£ã€‚</p>
<p>ä»¥åŒ»ç–—è¯Šæ–­ä¸ºä¾‹ï¼Œå³ä½¿ AI åœ¨æŸäº›ç‰¹å®šè¯Šæ–­ä»»åŠ¡ä¸­çš„å‡†ç¡®ç‡å·²æ˜¾è‘—è¶…è¿‡äººç±»ä¸“å®¶ï¼ŒåŒ»é™¢ä»ç„¶è¦æ±‚åŒ»ç”Ÿæ‰‹åŠ¨ç­¾å­—ç¡®è®¤ AI çš„è¯Šæ–­ç»“æœã€‚è¿™æ˜¯å› ä¸ºAIæ— æ³•æ‰¿æ‹…æ³•å¾‹è´£ä»»ã€‚</p>
<p>åŒæ ·çš„é“ç†é€‚ç”¨äºè½¯ä»¶å¼€å‘ï¼š</p>
<ul>
<li>è´£ä»»å½’å±ï¼šæœ€ç»ˆçš„ä»£ç è´¨é‡å’Œç³»ç»Ÿç¨³å®šæ€§ä»éœ€äººç±»å¼€å‘è€…è´Ÿè´£ã€‚</li>
<li>ä»·å€¼åˆ¤æ–­ï¼šAIæ— æ³•åˆ¤æ–­åŠŸèƒ½æ˜¯å¦çœŸæ­£æ»¡è¶³ç”¨æˆ·éœ€æ±‚ã€‚</li>
<li>åˆ›æ–°æ€ç»´ï¼šçœŸæ­£çš„åˆ›æ–°æ¥è‡ªäºäººç±»å¯¹é—®é¢˜çš„æ·±åˆ»ç†è§£å’Œç‹¬ç‰¹è§†è§’ã€‚</li>
<li>ä¼¦ç†è€ƒé‡ï¼šæŠ€æœ¯åº”ç”¨çš„ç¤¾ä¼šå½±å“éœ€è¦äººç±»è¿›è¡Œé“å¾·åˆ¤æ–­ã€‚</li>
</ul>
<p>å› æ­¤ï¼Œåœ¨äººæœºåä½œä¸­ï¼Œæˆ‘ä»¬å¿…é¡»æ˜ç¡®å„è‡ªçš„è¾¹ç•Œï¼šäººè´Ÿè´£"ä¸ºä»€ä¹ˆ"å’Œ"åšä»€ä¹ˆ"ï¼ŒAIè´Ÿè´£"æ€ä¹ˆåš"ã€‚åŒæ—¶ï¼Œæˆ‘ä»¬ä¹Ÿè¦ä¿æŒå¯¹AIè¾“å‡ºçš„éªŒè¯æ„è¯†ï¼Œå› ä¸ºAIå­˜åœ¨"å¹»è§‰"é—®é¢˜ï¼Œå¯èƒ½ä¼šç”Ÿæˆçœ‹ä¼¼åˆç†ä½†å®é™…é”™è¯¯çš„å†…å®¹ã€‚</p>
<h3 data-id="heading-4">æå‡AIä½¿ç”¨èƒ½åŠ›çš„ä¸‰ä¸ªå±‚æ¬¡</h3>
<p>æœ‰æ•ˆåˆ©ç”¨AIç¼–ç¨‹å·¥å…·éœ€è¦ç»å†ä¸‰ä¸ªèƒ½åŠ›æå‡é˜¶æ®µï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9e9714097fb04ce3bc971bbc20d7d9e9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5be05be0QUnnvJbnqIvnpL7ljLo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767608384&amp;x-signature=oUQj4ugGw4%2FBbOJgoMMHo6wDRww%3D" alt="" loading="lazy"/></p>
<ol>
<li>ç”¨Â·æŠŠ AI å½“å·¥å…·<br/>
æŠŠå°†AIä½œä¸ºé—®ç­”å·¥å…·ï¼Œè¿›è¡Œç®€å•çš„ä»£ç ç”Ÿæˆå’Œé—®é¢˜è§£ç­”ã€‚è¿™æ˜¯å¤§å¤šæ•°å¼€å‘è€…çš„èµ·ç‚¹ï¼Œä½†æ•ˆç‡æå‡æœ‰é™ã€‚</li>
<li>é©­Â·æŠŠ AI å½“åŠ©æ‰‹<br/>
å°†AIè§†ä¸ºæ™ºèƒ½åŠ©æ‰‹ï¼Œè¿ç”¨"æ€ç»´æ ‘"ï¼ˆTree of Thoughtsï¼‰ç­‰æŠ€å·§ï¼Œè®©AIæ‰®æ¼”ä¸åŒè§’è‰²ï¼ˆæ¶æ„å¸ˆã€äº§å“ç»ç†ã€æµ‹è¯•å·¥ç¨‹å¸ˆï¼‰è¿›è¡Œå¤šè½®è®¨è®ºã€‚åŒæ—¶ï¼Œå……åˆ†åˆ©ç”¨ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œè®©AIæ›´å¥½åœ°ç†è§£é¡¹ç›®èƒŒæ™¯ã€‚<br/>
Qoder ç›®å‰æ”¯æŒä¸Šä¸‹æ–‡å·¥ç¨‹ï¼Œä½ å¯ä»¥å°†ä¸Šä¸‹æ–‡ä¸¢ç»™ Qoderï¼Œè®© Qoder å¸®ä½ åˆ†æï¼Œè¾“å‡ºã€‚è¿˜æœ‰å°±æ˜¯å¤æ‚ä»»åŠ¡çš„æ‹†è§£ï¼Œå‘¼åå¤§å®¶éƒ½ä½¿ç”¨ä¸‹ OpenSpecï¼Œè®© Qoder å»æ‹†è§£ä¸€äº›æ„å›¾ã€‚æˆ‘ä¹‹å‰å°±æ˜¯åšäº§å“ç»ç†çš„ï¼Œå¯èƒ½å­å“§å­å“§è¦å†™ä¸€å¤©æ—¶é—´ï¼Œä½† Qoder åªç”¨äº”åˆ†é’Ÿå°±å¯ä»¥å¸®ä½ æ‹†è§£æ‰ã€‚</li>
<li>åˆÂ·äººæœºä¸€ä½“ ç†æƒ³çš„è¯å°±æ˜¯æ¯ä¸€ä¸ªåœ°æ–¹éƒ½æœ‰ AI ï¼Œè®© AI æ·±åº¦çš„å»å‚ä¸å†³ç­–ã€æ‰§è¡Œï¼Œæœ€ç»ˆè¾¾åˆ°äººæœºè¾¹ç•Œçš„æ¨¡ç³ŠçŠ¶æ€ã€‚å¼€å‘è€…ä¸“æ³¨äºé«˜å±‚æ¬¡çš„å†³ç­–å’Œåˆ›æ–°ï¼Œè€Œå°†å…·ä½“çš„å®ç°ç»†èŠ‚å®Œå…¨äº¤ç»™AIå¤„ç†ã€‚</li>
</ol>
<p>é“çš„æ ¸å¿ƒæ˜¯äººçš„ä¸å¯æ›¿ä»£æ€§ï¼Œäººè¦è´Ÿè´£çš„ï¼Œä¸æ˜¯éæ­¤å³å½¼ï¼Œæˆ–è€…æ˜¯è°å–ä»£è°ï¼Œè€Œæ˜¯å¦‚ä½•å°†1+1&gt;2çš„ååŒæ•ˆåº”æœ€å¤§åŒ–ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ed8bd77b80724842ba78e2fc9e69b8b5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5be05be0QUnnvJbnqIvnpL7ljLo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767608384&amp;x-signature=RGkZQfHU2d9LfUahvFYmWzKNFcw%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-5">03 å®æˆ˜ä¹‹æœ¯ï¼šäººæœºåä½œçš„ä¿®ç‚¼åœº</h2>
<p>æˆ‘åœ¨å¤šä¸ªé¡¹ç›®ä¸­éªŒè¯äº† AI ç¼–ç¨‹çš„å¯è¡Œæ€§ï¼š</p>
<h3 data-id="heading-6">æ¡ˆä¾‹ä¸€ï¼šä¿®ä»™æ¨¡æ‹Ÿå™¨çš„å¿«é€Ÿå¼€å‘</h3>
<p>æˆ‘ä½¿ç”¨ Qoder å¼€å‘äº†ä¸€ä¸ªä¿®ä»™æ¨¡æ‹Ÿå™¨ï¼Œè¿™ä¸ªåº”ç”¨åŒ…å«è§’è‰²åˆ›å»ºã€å±æ€§åˆ†é…ã€ä¿®ç‚¼çªç ´ã€å¤©åŠ«æŒ‘æˆ˜ç­‰å®Œæ•´çš„æ¸¸æˆæœºåˆ¶ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/73a9d6efcb5d40218c0965a5737fd8c6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5be05be0QUnnvJbnqIvnpL7ljLo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767608384&amp;x-signature=IhVWGN9rMBUH8vK3LObprt3Kgaw%3D" alt="" loading="lazy"/></p>
<p>æ•´ä¸ªå¼€å‘è¿‡ç¨‹å…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š</p>
<ul>
<li>å¼€å‘æ—¶é—´ï¼šä¸åˆ°1å°æ—¶å®Œæˆ</li>
<li>æŠ€æœ¯æ ˆï¼šçº¯å‰ç«¯å®ç°</li>
<li>ä»£ç è´¨é‡ï¼šæ— æ˜æ˜¾çš„"AIå‘³"ï¼Œç”¨æˆ·ä½“éªŒæµç•…è‡ªç„¶</li>
</ul>
<p>åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæˆ‘é‡‡ç”¨äº†ä»¥ä¸‹ç­–ç•¥ï¼š</p>
<ol>
<li>æ˜ç¡®æŒ‡å®šä½¿ç”¨å‰ç«¯æŠ€æœ¯æ ˆå’Œæœ€ä½³å®è·µ</li>
<li>åº”ç”¨OpenSpecè¿›è¡Œéœ€æ±‚æ‹†è§£å’Œè§„æ ¼å®šä¹‰</li>
<li>å……åˆ†åˆ©ç”¨Qoderçš„ä¸Šä¸‹æ–‡ç†è§£å’Œè®°å¿†åŠŸèƒ½</li>
<li>ä»¥æ•ˆç‡ä¸ºä¼˜å…ˆè€ƒè™‘ï¼Œæˆæœ¬å…¶æ¬¡</li>
</ol>
<p>è¿™ä¸ªæ¡ˆä¾‹å……åˆ†è¯æ˜äº†AIç¼–ç¨‹åœ¨å¿«é€ŸåŸå‹å¼€å‘æ–¹é¢çš„å·¨å¤§ä¼˜åŠ¿ï¼Œå³ä½¿æ˜¯æ¸¸æˆè¿™æ ·ç›¸å¯¹å¤æ‚çš„äº¤äº’åº”ç”¨ï¼Œä¹Ÿèƒ½åœ¨æçŸ­æ—¶é—´å†…å®Œæˆé«˜è´¨é‡å®ç°ã€‚</p>
<h3 data-id="heading-7">æ¡ˆä¾‹äºŒï¼šWindows 95æ¨¡æ‹Ÿå™¨çš„å®Œç¾å¤åˆ»</h3>
<p>å¦ä¸€ä¸ªæ¡ˆä¾‹æ˜¯ä½¿ç”¨ Qoder å¼€å‘ Windows 95æ¨¡æ‹Ÿå™¨ã€‚è¿™ä¸ªé¡¹ç›®å®ç°äº†é›¶ä¿®æ”¹ã€é›¶æŠ¥é”™çš„ä¸€æ¬¡æ€§æˆåŠŸã€‚ä¸ä»…é‡ç°äº†ç»å…¸çš„æ¡Œé¢ç•Œé¢ï¼Œè¿˜åŒ…å«äº†å®Œæ•´çš„åº”ç”¨ç¨‹åºç”Ÿæ€ï¼ŒåŒ…æ‹¬ï¼š</p>
<ul>
<li>AIè®°äº‹æœ¬ï¼ˆæ”¯æŒæ–‡æœ¬ç”Ÿæˆå’Œæ¶¦è‰²ï¼‰</li>
<li>æ‰«é›·ç­‰å°æ¸¸æˆï¼ˆç»å…¸Windowsæ¸¸æˆçš„å®Œæ•´å®ç°ï¼‰</li>
<li>ç³»ç»Ÿèœå•å’Œçª—å£ç®¡ç†</li>
</ul>
<p>æ•´ä¸ªç³»ç»Ÿç•Œé¢çœ‹èµ·æ¥æ²¡æœ‰ä»»ä½• Vibe Coding çš„å‘³ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e0eecb4e806047ec8c5aee802a5f4a53~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5be05be0QUnnvJbnqIvnpL7ljLo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767608384&amp;x-signature=lNfSErNiJf1mREjpwvGw5qDQC4U%3D" alt="" loading="lazy"/></p>
<p>è¿™é‡Œåˆ†äº«ä¸€ä¸ª AI Coding çš„å…³é”®æŠ€å·§ï¼Œå°±å››ä¸ªå­—ï¼šæœ€ä½³å®è·µã€‚æ¯”å¦‚æˆ‘æƒ³å¼€å‘ä¸€ä¸ª Windows 95 é£æ ¼çš„åº”ç”¨ï¼Œæˆ‘ä¼šå…ˆæ˜ç¡®æŒ‡å®šå‰ç«¯æŠ€æœ¯æ ˆï¼ˆæ¯”å¦‚ React æˆ– Vueï¼‰ï¼Œç„¶ååœ¨æŒ‡ä»¤ä¸­å¼ºè°ƒï¼šâ€œè¯·ç»“åˆè¯¥æŠ€æœ¯æ ˆçš„æœ€ä½³å®è·µæ¥å®ç°â€ã€‚è¿™æ ·ä¸€æ¥ï¼ŒQoder ç”Ÿæˆçš„ä»£ç ä¼šæ›´è§„èŒƒã€æ›´è´´è¿‘çœŸå®å·¥ç¨‹æ ‡å‡†ã€‚å†é…åˆ OpenSpec çš„ Proposal å’Œ Apply æµç¨‹ï¼ŒåŸºæœ¬èƒ½ä¸€æ¬¡æˆå‹ï¼Œå¤§å¹…å‡å°‘åæœŸä¿®æ”¹ã€‚</p>
<h3 data-id="heading-8">æ¡ˆä¾‹ä¸‰ï¼šAI Chat çš„å¼€å‘</h3>
<p>è¿™ä¸ªé¡¹ç›®æ˜¯ä½¿ç”¨ Qoder å¼€å‘ä¸€ä¸ªç±»ä¼¼ Deepseek çš„ AI Chat ã€‚æ‰“å¼€â€œæ·±åº¦æ€è€ƒâ€æ¨¡å¼ã€‚å°±ä¼šå¯ç”¨GLM-4.6çš„thinkingåŠŸèƒ½ï¼Œè®©AIè¿›è¡Œå……åˆ†çš„è‡ªæˆ‘åæ€å’Œä¼˜åŒ–ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/308fe16d50024167a3960a5e1309b613~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5be05be0QUnnvJbnqIvnpL7ljLo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767608384&amp;x-signature=uTsufOjq2F0jKaBY1t%2BHRhFkaks%3D" alt="" loading="lazy"/></p>
<p>åˆ†äº«ä¸€ä¸ªå’Œ AI å¯¹è¯çš„å°æŠ€å·§ï¼šå¦‚æœ AI è¾“å‡ºçš„ç»“æœä½ ä¸æ»¡æ„ï¼Œå°±é—®å®ƒä¸€å¥ï¼šâ€œä½ ç¡®å®šå—ï¼Ÿâ€ç­‰å®ƒé‡æ–°å›ç­”åï¼Œå†è¿½é—®ä¸€å¥ï¼šâ€œä½ çœŸçš„ç¡®å®šå—ï¼Ÿâ€</p>
<p>é€šå¸¸ç»è¿‡è¿™ä¸¤è½®è‡ªæˆ‘åæ€ï¼ŒAI å°±ä¼šç»™å‡ºæ˜æ˜¾æ›´ä¼˜çš„ç­”æ¡ˆï¼Œå¤§å®¶å¯ä»¥è¯•è¯•çœ‹ã€‚</p>
<h3 data-id="heading-9">Qoder é«˜çº§ç‰¹æ€§</h3>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ç»™å¤§å®¶åˆ†äº«ä¸‹Qoder çš„ä¸€äº›æ¯”è¾ƒå¥½çš„é«˜çº§ç‰¹æ€§ï¼Œèƒ½å¤Ÿæ˜¾è‘—æå‡å¼€å‘æ•ˆç‡ï¼š</p>
<ol>
<li>è§„åˆ™é…ç½®</li>
</ol>
<p>Qoder æ”¯æŒä¸ºæ¯ä¸ªé¡¹ç›®é…ç½®ä¸“å±è§„åˆ™ã€‚è§„åˆ™å­˜æ”¾äºÂ <code>.qoder/rules</code>Â ç›®å½•ä¸­ï¼Œä»…å¯¹å½“å‰é¡¹ç›®ç”Ÿæ•ˆã€‚è§„åˆ™å¯ä¼˜åŒ–æ¨¡å‹å¯¹ä½ çš„ç¼–ç åå¥½çš„é€‚é…ï¼ŒåŒ…æ‹¬é¡¹ç›®æ‰€ç”¨æ¡†æ¶ä¸ä»£ç é£æ ¼ã€‚</p>
<p>ä½¿ç”¨ Qoder æ—¶ï¼Œå»ºè®®ä¸è¦å…ˆå»ç¼–ç ï¼Œåº”è¯¥å…ˆé…ç½®è§„åˆ™ï¼Œåˆç†é…ç½®è§„åˆ™å¯ä»¥é¿å…ç”Ÿæˆä½è´¨é‡ä»£ç ï¼ŒèŠ‚çœåç»­ä¿®æ”¹æ—¶é—´ã€‚</p>
<ol start="2">
<li>MCPé…ç½®</li>
</ol>
<p>MCP é€šè¿‡æ ‡å‡†åŒ–æ¥å£ä½¿ Qoder æ™ºèƒ½ä½“èƒ½å¤Ÿè¿æ¥åˆ°å„ç±»å¤–éƒ¨ç³»ç»Ÿå’Œæ•°æ®æºï¼Œä»è€Œå¢å¼ºæ™ºèƒ½ä½“çš„èƒ½åŠ›ã€‚</p>
<p>Qoder æ”¯æŒ 2 ç§é…ç½® MCP çš„æ–¹å¼ï¼š</p>
<ul>
<li>æ‰‹åŠ¨æ·»åŠ ï¼šå°†å¼€æºçš„ MCP æˆ–è€…å¸¸ç”¨çš„ä¼ä¸šæœåŠ¡å°è£…ä¸ºMCPï¼Œä¾¿äº Qoder è°ƒç”¨ã€‚</li>
<li>MCP å¹¿åœºæ·»åŠ ï¼šQoder ä¼šåœ¨ MCP å¹¿åœºé¢„ç½®äº†ä¸€äº›å¸¸ç”¨çš„ MCPï¼Œä¾‹å¦‚ï¼šSequential Thinkingã€Figma ç­‰ï¼Œä½ å¯ä»¥ä¸€é”®å®‰è£…ã€‚</li>
</ul>
<ol start="3">
<li>è®°å¿†ç³»ç»Ÿ</li>
</ol>
<p>Qoder å…·å¤‡é•¿æœŸè®°å¿†èƒ½åŠ›ã€‚éšç€ä½ æŒç»­ä½¿ç”¨ï¼Œå®ƒä¼šè‡ªåŠ¨ç§¯ç´¯å¹¶æ›´æ–°ä½ çš„ä¸ªäººåå¥½ã€é¡¹ç›®ä¸Šä¸‹æ–‡ã€è¸©è¿‡çš„å‘å’Œæœ‰æ•ˆçš„è§£å†³æ–¹æ¡ˆï¼Œå½¢æˆä¸€å¥—åŠ¨æ€æ¼”è¿›çš„è®°å¿†åº“ï¼Œå¹¶åœ¨åç»­ä»»åŠ¡ä¸­æ™ºèƒ½è°ƒç”¨â€”â€”çœŸæ­£åšåˆ°è¶Šç”¨è¶Šæ‡‚ä½ ã€‚</p>
<ol start="4">
<li>Repo Wiki</li>
</ol>
<p>Repo Wiki èƒ½å¸®ä½ å¿«é€Ÿæ¢³ç†å†å²é¡¹ç›®çš„æ•´ä½“é€»è¾‘ï¼Œå°¤å…¶å¯¹æ–°æˆå‘˜éå¸¸å‹å¥½ã€‚åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæ— è®ºæ˜¯æŸ¥è¯¢çŸ¥è¯†ç‚¹ã€ç†è§£ä»£ç ï¼Œè¿˜æ˜¯æ–°å¢åŠŸèƒ½ï¼Œå®ƒéƒ½ä¼šæ·±å…¥åˆ†æé¡¹ç›®ç»“æ„ä¸å®ç°ç»†èŠ‚ï¼Œç»“åˆä»£ç åº“ä¸Šä¸‹æ–‡ï¼Œæä¾›æ›´å‡†ç¡®ã€è¯¦å°½çš„è§£ç­”å’Œæ–‡æ¡£æ”¯æŒï¼Œè®© Qoder çœŸæ­£â€œè¯»æ‡‚â€ä½ çš„ä»£ç åº“ã€‚</p>
<p>è¿™äº›é«˜çº§åŠŸèƒ½çš„ç»„åˆä½¿ç”¨ï¼Œä½¿å¾— Qoder ä¸ä»…ä»…æ˜¯ä¸€ä¸ªä»£ç ç”Ÿæˆå·¥å…·ï¼Œè€Œæ˜¯ä¸€ä¸ªå®Œæ•´çš„æ™ºèƒ½å¼€å‘ç¯å¢ƒã€‚</p>
<h2 data-id="heading-10">04 æœªæ¥ä¹‹æƒ³ï¼šAI æ—¶ä»£ï¼Œä½•ä»¥ä¸ºäºº</h2>
<p>åŸºäºä¸€å¹´å¤šçš„å®è·µï¼Œæˆ‘å¯¹æœªæ¥æœ‰äº”ç‚¹æ€è€ƒï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a7105fa6431c45d19ba5a110c603e0b4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5be05be0QUnnvJbnqIvnpL7ljLo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767608384&amp;x-signature=AKKkZ5W6yPIIYx%2Fo%2Bsrbse0mjzk%3D" alt="" loading="lazy"/></p>
<ol>
<li>èƒ½åŠ›é‡å¡‘ï¼šå¼€å‘è€…çš„æ ¸å¿ƒèƒ½åŠ›ä»â€œä¼šå†™ä»£ç â€è½¬å‘â€œä¼šé©¾é©­ AIâ€ï¼Œæç¤ºå·¥ç¨‹æˆä¸ºæ–°ç´ å…»ï¼›</li>
<li>è§’è‰²è¿›åŒ–ï¼šä» Coder å˜ä¸º Creatorï¼Œä»æ‰§è¡Œè€…å˜ä¸ºå†³ç­–è€…ï¼Œä»ç‹¬è¡Œä¾ å˜ä¸ºâ€œäººæœºå›¢é˜Ÿâ€çš„æŒ‡æŒ¥å®˜ï¼›</li>
<li>ä»·å€¼é”šå®šï¼šæŠ€æœ¯å®ç°å¯å¤–åŒ…ç»™ AIï¼Œä½†åˆ¤æ–­åŠ›ã€è´£ä»»æ„Ÿã€åˆ›æ–°ã€åˆ›æ„ã€åŒç†å¿ƒæ°¸è¿œå±äºäººï¼›</li>
<li>ç»ˆèº«å­¦ä¹ ï¼šAI è¿›åŒ–é€Ÿåº¦è¿œè¶…äººç±»ï¼Œå”¯æœ‰ä¿æŒå¥½å¥‡å¿ƒå’Œå­¦ä¹ åŠ›æ‰èƒ½ä¸è¢«æ·˜æ±°ï¼›</li>
<li>ä¿æŒäººæ€§ï¼šåœ¨æ•ˆç‡è‡³ä¸Šçš„æ—¶ä»£ï¼Œå®ˆæŠ¤äººçš„æ¸©åº¦â€”â€”æŠ€æœ¯æ˜¯æ‰‹æ®µï¼Œäººçš„å¹¸ç¦æ‰æ˜¯ç›®çš„ã€‚</li>
</ol>
<p>AI ä¸æ˜¯å–ä»£äººï¼Œè€Œæ˜¯æ”¾å¤§äººçš„èƒ½åŠ›ï¼Œå¹¶å°†æˆæœ¬é™ä½åå€ã€‚å…³é”®åœ¨äºï¼Œä½ æ˜¯å¦æ„¿æ„æ‹¥æŠ±è¿™ä¸€å˜åŒ–ï¼Œé‡æ–°å®šä¹‰è‡ªå·±çš„è§’è‰²ä¸ä»·å€¼ã€‚</p>
<h2 data-id="heading-11">å†™åœ¨æœ€å</h2>
<p>Vibe Codingä¸ä»…ä»…æ˜¯ä¸€ç§æ–°çš„ç¼–ç¨‹æŠ€æœ¯ï¼Œæ›´æ˜¯ä¸€ç§å…¨æ–°çš„æ€ç»´æ–¹å¼å’Œå·¥ä½œå“²å­¦ã€‚å®ƒè¦æ±‚æˆ‘ä»¬é‡æ–°æ€è€ƒäººä¸æŠ€æœ¯çš„å…³ç³»ï¼Œé‡æ–°å®šä¹‰å¼€å‘è€…çš„è§’è‰²å’Œä»·å€¼ã€‚</p>
<p>åœ¨è¿™ä¸ªäººæœºåä½œçš„æ–°æ—¶ä»£ï¼ŒæˆåŠŸçš„å…³é”®ä¸åœ¨äºæŠ—æ‹’å˜åŒ–ï¼Œè€Œåœ¨äºæ‹¥æŠ±å˜åŒ–ï¼Œåœ¨å˜åŒ–ä¸­æ‰¾åˆ°è‡ªå·±çš„ç‹¬ç‰¹å®šä½ã€‚</p>
<p>æŠ€æœ¯å¯ä»¥å¤–åŒ…ç»™AIï¼Œä½†åˆ¤æ–­ã€è´£ä»»ã€åˆ›æ–°ã€åˆ›æ„ã€åŒç†å¿ƒæ°¸è¿œå±äºäººã€‚</p>
<p>è®©æˆ‘ä»¬ä»¥å¼€æ”¾çš„å¿ƒæ€è¿æ¥è¿™ä¸ªæ–°æ—¶ä»£ï¼Œåœ¨AIçš„åŠ©åŠ›ä¸‹åˆ›é€ å‡ºæ›´åŠ ç¾å¥½çš„æ•°å­—ä¸–ç•Œã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å“åº”å¼ç¼–ç¨‹ä¸åªæœ‰æ¦‚å¿µï¼ä¸‡å­—é•¿æ–‡ + ä»£ç ç¤ºä¾‹ï¼Œæ‰‹æŠŠæ‰‹å¸¦ä½ ç©è½¬ RxJava]]></title>    <link>https://juejin.cn/post/7588095884070273024</link>    <guid>https://juejin.cn/post/7588095884070273024</guid>    <pubDate>2025-12-28T01:07:20.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588095884070273024" data-draft-id="7588093282530770996" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å“åº”å¼ç¼–ç¨‹ä¸åªæœ‰æ¦‚å¿µï¼ä¸‡å­—é•¿æ–‡ + ä»£ç ç¤ºä¾‹ï¼Œæ‰‹æŠŠæ‰‹å¸¦ä½ ç©è½¬ RxJava"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-28T01:07:20.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Javaéšæƒ³å½•"/> <meta itemprop="url" content="https://juejin.cn/user/2837192913204935"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å“åº”å¼ç¼–ç¨‹ä¸åªæœ‰æ¦‚å¿µï¼ä¸‡å­—é•¿æ–‡ + ä»£ç ç¤ºä¾‹ï¼Œæ‰‹æŠŠæ‰‹å¸¦ä½ ç©è½¬ RxJava
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2837192913204935/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Javaéšæƒ³å½•
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-28T01:07:20.000Z" title="Sun Dec 28 2025 01:07:20 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»29åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ¬æ–‡å·²æ”¶å½•è‡³GitHubï¼Œæ¨èé˜…è¯» ğŸ‘‰ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FBookSea4j%2FJavaRecord" target="_blank" title="https://github.com/BookSea4j/JavaRecord" ref="nofollow noopener noreferrer">Javaéšæƒ³å½•</a></p>
<p>å¾®ä¿¡å…¬ä¼—å·ï¼šJavaéšæƒ³å½•</p>
<h2 data-id="heading-0">Reactive Streams ä»‹ç»</h2>
<p>åœ¨èŠ Reactive Streams ä¹‹å‰ï¼Œå…ˆäº†è§£ä¸€ä¸‹ Reactive Programmingï¼ˆååº”å¼/å“åº”å¼ç¼–ç¨‹ï¼‰ã€‚ä¸ºäº†è§£å†³å¼‚æ­¥ç¼–ç¨‹ä¸­å‡ºç°çš„å„ç§é—®é¢˜ï¼Œç¨‹åºå‘˜ä»¬æå‡ºäº†å„ç§çš„æ€è·¯å»è§£å†³è¿™äº›é—®é¢˜ï¼Œè¿™äº›è§£å†³é—®é¢˜çš„æ–¹å¼ã€æ–¹æ³•ï¼Œæ‰‹æ®µå°±å¯ä»¥å«åš Reactive Programmingã€‚</p>
<p>Reactive Programming æ˜¯ä¸€ç§ç¼–ç¨‹æ€æƒ³ï¼Œç±»ä¼¼é¢å‘å¯¹è±¡ï¼Œå‡½æ•°å¼ç¼–ç¨‹ã€‚</p>
<p>æœ¬è´¨ä¸Šæ˜¯å¯¹æ•°æ®æµæˆ–æŸç§å˜åŒ–åšå‡ºçš„ååº”ï¼Œè¿™ä¸ªå˜åŒ–ä»€ä¹ˆæ—¶å€™è§¦å‘æ˜¯æœªçŸ¥çš„ï¼Œæ‰€ä»¥ä»–æ˜¯ä¸€ç§åŸºäºå¼‚æ­¥ã€å›è°ƒçš„æ–¹å¼åœ¨å¤„ç†é—®é¢˜ã€‚</p>
<p>å½“è¶Šæ¥è¶Šå¤šçš„ç¨‹åºå‘˜ï¼Œå¼€å§‹ä½¿ç”¨è¿™ç§ç¼–ç¨‹æ€æƒ³æ—¶ï¼Œéœ€è¦ä¸€äº›å¤§ä½¬æ¥ç»Ÿä¸€ä¸€ä¸ªæ€æƒ³è§„èŒƒã€‚æ‰€ä»¥å›½å¤–çš„å‡ ä¸ªå¤§ä½¬å…¬å¸å¯åŠ¨äº† Reactive Streams é¡¹ç›®ã€‚Netflixã€Pivotalã€Lightbend è”åˆæ¥ä¸ºå¼‚æ­¥æµå¤„ç†æä¾›æ ‡å‡†ï¼Œè§„èŒƒã€‚</p>
<p>Reactive Streams ç¿»è¯‘è¿‡æ¥å°±æ˜¯å“åº”å¼/ååº”å¼æµã€‚<strong>å…¶å®æ˜¯ä¸€ç§åŸºäºå¼‚æ­¥æµå¤„ç†çš„æ ‡å‡†åŒ–è§„èŒƒï¼Œç›®çš„æ˜¯åœ¨ä½¿ç”¨æµå¤„ç†æ—¶æ›´åŠ å¯é ï¼Œé«˜æ•ˆå’Œå“åº”å¼ã€‚</strong></p>
<h2 data-id="heading-1">Java å±‚é¢çš„ Reactive Streams</h2>
<p>åŸºäºè¿™ä¸ªè§„èŒƒçš„å®ç°å¾ˆå¤šï¼Œæ¯”å¦‚ä¸‰æ–¹åº“ä¸­æ¯”è¾ƒå‡ºåçš„ RxJavaï¼ŒReactor ç­‰ç­‰ã€‚</p>
<p>ä½†æ˜¯ JDK8 ç‰ˆæœ¬ä¸­ï¼ŒJava å·²ç»æœ‰äº† CompletableFuture çš„æ”¯æ’‘ï¼Œæˆ‘ä»¬å¯ä»¥å°†å¤§é‡çš„å¼‚æ­¥ä»»åŠ¡åšå¥½ç¼–æ’ã€‚ä½†æ˜¯åœ¨ JDK8 ç‰ˆæœ¬ä¸­çš„ CompletableFuture ä¾ç„¶æœ‰å¾ˆå¤šç‰¹æ€§æ— æ³•æ”¯æ’‘ã€‚æ‰€ä»¥åœ¨ JDK9ï¼ŒCompletableFuture åšäº†å¾ˆå¤šçš„æ›´æ–°ï¼Œæ¯”å¦‚æ”¯æŒå»¶è¿Ÿï¼Œè¶…æ—¶ï¼Œå­ç±»åŒ–ä¹‹ç±»çš„åŠŸèƒ½ã€‚</p>
<p>è¿™æ—¶ï¼Œå’±ä»¬ä¼šå‘ç°ï¼Œå…¶å® CompletableFuture å·²ç»å¯ä»¥å»æ”¯æ’‘åšä¸€äº›å¼‚æ­¥ç¼–ç¨‹çš„æ“ä½œäº†ã€‚ä½†æ˜¯ä¸ºä»€ä¹ˆå¾ˆå¤šå¤§å…¬å¸ä¾ç„¶è¿˜æ˜¯ä½¿ç”¨ RxJavaï¼ŒReactor è¿™ç§ä¸‰æ–¹ä¾èµ–åº“å‘¢ï¼Ÿ</p>
<p>é—®é¢˜åœ¨äºï¼Œå¤§å¤šæ•°çš„æ—¶å€™ï¼Œå’±ä»¬é‡‡ç”¨å¼‚æ­¥ç¼–ç¨‹å¤„ç†çš„ä»»åŠ¡å¹¶ä¸æ˜¯éå¸¸å¤æ‚çš„ã€‚è¿™ä¸ªæ—¶å€™ï¼Œå’±ä»¬ç¡®å®ä¸éœ€è¦å»ä½¿ç”¨ Reactive Streams ååº”æµçš„æ¡†æ¶ã€‚å¦‚æœç³»ç»Ÿè¶Šæ¥è¶Šå¤æ‚ï¼Œæˆ–è€…ä½ å¤„ç†çš„ä¸šåŠ¡æœ¬èº«å°±æ˜¯åŠå…¶å¤æ‚çš„é‚£ç§ï¼Œä½ å°±è¦å»å†™ä¸€ä¸ªè®©äººå¤´çš®å‘éº»çš„ä»£ç äº†ã€‚éšç€æ—¶é—´çš„æ¨ç§»ï¼Œè¿™ç§ä»£ç ä¼šå˜æˆéå¸¸éš¾ä»¥ç»´æŠ¤ã€‚</p>
<p>å…¶æ¬¡ CompletableFuture å¹¶ä¸æ˜¯çœŸæ­£çš„åŸºäº Reactive Streams å»å®ç°ã€‚CompletableFuture æè¿°çš„æ˜¯å•æ¬¡æ‰§è¡Œçš„ç»“æœã€‚å°½ç®¡å¯ä»¥é€šè¿‡å„ç§æ–¹æ³•å°†å¼‚æ­¥ä»»åŠ¡ä¹‹é—´æ„å»ºæˆä¸€ä¸²ä»»åŠ¡ç»„æˆçš„æµç¨‹å›¾ï¼Œæœ¬è´¨ä¸Šä¾ç„¶æ˜¯å•æ¬¡çš„ç»“æœã€‚</p>
<p>ååº”å¼æµï¼Œé¢å‘çš„æ˜¯ Streamã€‚ å’±ä»¬ Java ä¸­çš„ Stream API æ›´ç±»ä¼¼ Reactive Streams çš„æ€æƒ³ã€‚Stream API æ˜¯åŒæ­¥é˜»å¡çš„ã€‚</p>
<p>æœ€ç»å…¸çš„å°±æ˜¯ CompletableFuture æ— æ³•å¤„ç† Reactive Streams ä¸­çš„ä¸€ä¸ªæ ¸å¿ƒæ¦‚å¿µï¼ŒBack Pressureï¼ˆèƒŒå‹ï¼Œåå‹ï¼Œå›å‹ï¼‰ï¼Œæ¯”å¦‚åœ¨ä¸Šä¸‹æ¸¸æ‰¿è½½èƒ½åŠ›ä¸åŒæ—¶ï¼Œæ¯”å¦‚ä¸‹æ¸¸ç©ä¸è½¬äº†ï¼Œéœ€è¦å‘ŠçŸ¥ä¸Šæ¸¸é‡‡å–ä¸€äº›ç­–ç•¥å»è§£å†³ã€‚CompletableFuture æ˜æ˜¾æ— æ³•å¤„ç†è¿™ç§ã€‚</p>
<p>å…¶æ¬¡è¿˜æœ‰ Java ä¸­æä¾›çš„å›è°ƒï¼ŒFuture æœºåˆ¶åœ¨å®ç°å“åº”å¼ç¼–ç¨‹ä¸­ï¼Œé—®é¢˜å’Œç¼ºç‚¹éƒ½æ¯”è¾ƒéš¾å¤„ç†ã€‚æœ‰ä¸ªæ¯”è¾ƒå‡ºåçš„æ¦‚å¿µå«åš Callback Hellï¼ˆå›è°ƒåœ°ç‹±ï¼‰ã€‚ç®€å•æ¥è¯´å°±æ˜¯å›è°ƒé‡Œé¢å¥—å›è°ƒï¼Œè™½ç„¶å°†å­è¿‡ç¨‹åšåˆ°è§£è€¦ï¼Œä½†æ˜¯éšç€ä¸šåŠ¡çš„è´Ÿè´£ï¼Œå›è°ƒä»£ç çš„å¯è¯»æ€§ã€å¤æ‚æ€§å°±å¤§å¤§çš„å¢åŠ ï¼Œè¿™ä¸ªå°±æ˜¯å›è°ƒåœ°ç‹±ã€‚</p>
<p>æ‰€ä»¥ï¼Œå’±ä»¬éœ€è¦ä¸€å¥—æ¡†æ¶æˆ–è€…è¯´ç±»åº“æ¥å®ç°çœŸæ­£å“åº”å¼æµï¼Œå¤§æ¦‚éœ€è¦å‡ ä¸ªç‰¹æ€§ï¼š</p>
<ul>
<li>æ”¯æŒå°†å¼‚æ­¥ä»»åŠ¡åšå°è£…ä»¥åŠç»„è£…ï¼Œéœ€è¦ API å¯¹å¼‚æ­¥ä»»åŠ¡è¿›è¡ŒåŒ…è£…ï¼Œå¹¶ä¸”éœ€è¦å¾ˆå¤šå­ä»»åŠ¡æ¥å¯¹å¼‚æ­¥æ“ä½œè¿›è¡Œé“¾å¼ç»„è£…ï¼Œè¿‡ç¨‹ä¸­åŒ…æ‹¬è¿‡æ»¤ï¼Œå¼‚å¸¸å¤„ç†ï¼Œè¶…æ—¶ç­‰ç­‰æ“ä½œã€‚</li>
<li>å‡å°‘å¼‚æ­¥ä»»åŠ¡çš„åµŒå¥—ï¼Œå‡å°‘ä»£ç çš„å¤æ‚æ€§ï¼Œå¢åŠ å¯è¯»æ€§ï¼Œé¿å… Callback Hell è¿™ç§åŠå…¶å¤æ‚æ¶å¿ƒçš„ä»£ç ã€‚</li>
<li>æ”¯æŒèƒŒå‹ Back Pressureï¼Œä¹Ÿå°±éœ€è¦æœ‰ä¸Šæ¸¸å’Œä¸‹æ¸¸çš„æ¦‚å¿µï¼Œå¯ä»¥åšåˆ°åå•†å¤„ç†æ•°æ®æµçš„é€Ÿåº¦ã€‚</li>
</ul>
<h2 data-id="heading-2">Java å±‚é¢ Reactive Steams çš„ API</h2>
<p>é¦–å…ˆ Reactive Steams å“åº”æµå®ç°æ–¹å¼å…¶å®æ˜¯åŸºäºè§‚å¯Ÿè€…æ¨¡å¼çš„æ‰©å±•ï¼ŒåŒæ—¶ä¹Ÿèƒ½çœ‹åˆ°å‘å¸ƒè®¢é˜…æ¨¡å¼ï¼Œè´£ä»»é“¾æ¨¡å¼ç­‰ç­‰ã€‚</p>
<p>æ•´ä¸ª Reactive Steams æµç¨‹å¤§è‡´å¦‚ä¸‹ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f9592c871e5e40f1be90efcf888187cd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2Yemaj-aDs-W9lQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767488840&amp;x-signature=TSgTt3xeOZBxptm6EuAjG8vQSSg%3D" alt="" loading="lazy"/></p>
<p>ç›´æ¥åœ¨ JDK9 ç‰ˆæœ¬ä¹‹ä¸ŠæŸ¥çœ‹ Doug Lee æä¾›çš„ Flow ç±»ã€‚</p>
<p>åœ¨ Flow ç±»ä¸­ï¼Œæä¾›äº†æ ¸å¿ƒçš„å››ä¸ªæ¥å£ï¼šPublisherï¼ŒSubscriberï¼ŒSubscriptionï¼ŒProcessor</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/09f5138c2bb440098f904bb47b27b6ad~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2Yemaj-aDs-W9lQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767488840&amp;x-signature=7316XjMXvFoj2HFpvI5fx5Tv08I%3D" alt="" loading="lazy"/></p>
<p>Publisherï¼šPublisher æ˜¯å‡½æ•°å¼æ¥å£ï¼Œè´Ÿè´£å‘å¸ƒæ•°æ®çš„ã€‚ Publisher å†…éƒ¨æœ‰ä¸€ä¸ªæ–¹æ³• subscribe æ–¹æ³•ï¼Œå»å’Œå…·ä½“çš„è®¢é˜…è€…ç»‘å®šå…³ç³»ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4bd5da1cce0a48768a6c10bd3325c266~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2Yemaj-aDs-W9lQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767488840&amp;x-signature=0yFzU%2FEhU6cf%2FLDc%2FhYGO%2FgDKY8%3D" alt="" loading="lazy"/></p>
<p>Subscriberï¼šSubscriber æ˜¯è®¢é˜…è€…ï¼Œè´Ÿè´£è®¢é˜…ï¼Œæ¶ˆè´¹æ•°æ®ã€‚å››ä¸ªæ–¹æ³•ï¼š</p>
<ul>
<li>onSubscribeï¼šè®¢é˜…æˆåŠŸåè§¦å‘ï¼Œå¹¶ä¸”è¡¨æ˜å¯ä»¥å¼€å§‹æ¥æ”¶å‘å¸ƒè€…çš„æ•°æ®å…ƒç´ äº†ã€‚</li>
<li>onNextï¼šæ¯æ¬¡è·å–åˆ°å‘å¸ƒè€…çš„æ•°æ®å…ƒç´ éƒ½ä¼šæ‰§è¡Œ onNextã€‚</li>
<li>onErrorï¼šæ¥æ”¶æ•°æ®å…ƒç´ æ—¶ï¼Œå‡ºç°å¼‚å¸¸ç­‰é—®é¢˜æ—¶ï¼Œèµ° onErrorã€‚</li>
<li>onCompleteï¼šå½“æŒ‡å®šæ¥æ”¶çš„å…ƒç´ ä¸ªæ•°æå®šåï¼Œè§¦å‘ onCompleteã€‚</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b00cfd018c9e4d6d9eab9109a953eac6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2Yemaj-aDs-W9lQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767488840&amp;x-signature=KN1vhpT34Ny2FvK3c39OX73WOuI%3D" alt="" loading="lazy"/></p>
<p>Subscriptionï¼šå‘å¸ƒè€…å’Œè®¢é˜…è€…æ˜¯åŸºäº Subscription å…³è”çš„ã€‚å½“å»ºç«‹äº†è®¢é˜…çš„å…³ç³»åï¼Œå‘å¸ƒè€…ä¼šå°† Subscription ä¼ é€’ç»™è®¢é˜…è€…ã€‚è®¢é˜…è€…æŒ‡å®šè·å–å…ƒç´ çš„æ•°é‡å’Œå–æ¶ˆè®¢é˜…æ“ä½œï¼Œéƒ½è¦åŸºäº Subscription å»æ“ä½œã€‚æä¾›äº†ä¸¤ä¸ªæ–¹æ³•ï¼š</p>
<ul>
<li>requestï¼šè®¢é˜…è€…è¦è·å–çš„å…ƒç´ ä¸ªæ•°ã€‚</li>
<li>cancelï¼šå–æ¶ˆè®¢é˜…ï¼Œå½“å‰çš„è®¢é˜…è€…ä¸æ¥æ”¶å½“å‰å‘å¸ƒè€…çš„å…ƒç´ ã€‚</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c68ad044b9374c3eab14b2f3b49f13c0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2Yemaj-aDs-W9lQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767488840&amp;x-signature=Jpp0h1Y6ZxFtnBsdj86KdC4YnpI%3D" alt="" loading="lazy"/></p>
<p>Processorï¼šProcessor ç»§æ‰¿äº† Publisher å’Œ Subscriberï¼Œå³æ˜¯å‘å¸ƒè€…ä¹Ÿæ˜¯è®¢é˜…è€…ã€‚Processor ä¸€èˆ¬ä½œä¸ºæ•°æ®çš„ä¸­è½¬ï¼Œè®¢é˜…è€…å¤„ç†å®Œæ•°æ®å…ƒç´ ï¼Œå¯ä»¥å†æ¬¡å‘ç»™ä¸‹ä¸€ä¸ªè®¢é˜…è€…ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a42047a535c9423995491f68ce606ee3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2Yemaj-aDs-W9lQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767488840&amp;x-signature=xtE0ChJLm8qslq46IFzHStHC4YA%3D" alt="" loading="lazy"/></p>
<p>è¿™å››ä¸ªæ¥å£å¾ˆé‡è¦ï¼Œæ˜¯ Reactive Streams çš„è§„èŒƒï¼Œä½†æ˜¯å¯ä»¥æ˜æ˜¾çš„çœ‹åˆ°ï¼Œå†…éƒ¨æ²¡æœ‰å…·ä½“çš„å†…å®¹å®ç°ã€‚</p>
<p>è¿™é‡Œå°±ç±»ä¼¼ JDBC è¿™ç§è§„èŒƒï¼Œè§„èŒƒåœ¨ JDK9 ä¸­æå‡ºæ¥äº†ï¼Œæƒ³å®ç°ï¼Œå¯ä»¥åŸºäºå½“å‰çš„è¿™å››ä¸ªæ¥å£å†åšå…·ä½“çš„é€»è¾‘å¤„ç†ä»¥åŠå®ç°çš„ç»†èŠ‚ã€‚</p>
<h2 data-id="heading-3">Java å±‚é¢ Reactive Steams åŸºæœ¬æ“ä½œ</h2>
<p>å’±ä»¬æµ‹è¯• Java ä¸­çš„ Flow é‡Œæä¾›çš„ API æ—¶ï¼Œå°±æ˜¯èµ°æœ€åŸºæœ¬çš„æ“ä½œã€‚</p>
<p>å…¶ä¸­ Processor ä¸éœ€è¦é‡å†™ï¼Œç©æœ€åŸºæœ¬çš„æ“ä½œï¼Œä¸å»åšè®¢é˜…è€…å’Œå‘å¸ƒè€…çš„è½¬æ¢ã€‚</p>
<p>å…¶æ¬¡ Subscription ä¹Ÿä¸éœ€è¦é‡å†™ï¼Œè¿™ä¸œè¥¿å°±æ˜¯æä¾›äº†è®¢é˜…è€…æŒ‡å®šè®¢é˜…çš„æ¶ˆæ¯ä¸ªæ•°ï¼Œä»¥åŠå–æ¶ˆçš„æ“ä½œã€‚</p>
<p>ç„¶å Publisher éœ€è¦é‡å†™ï¼Œä½†æ˜¯ JDK ä¸­å·²ç»æä¾›äº†ä¸€ä¸ª Publisher çš„å®ç°ï¼ŒSubmissionPublisherï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚</p>
<p>æœ€åï¼ŒSubscriber éœ€è¦å’±ä»¬è‡ªå·±é‡å†™ï¼ŒæŒ‡å®šå¥½è®¢é˜…æ¶ˆæ¯çš„ä¸ªæ•°ï¼Œå·²ç»æ¶ˆè´¹çš„ä¸€äº›é€»è¾‘</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> java.util.concurrent.Flow;


<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MySubscriber</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Flow</span>.Subscriber&lt;Integer&gt; {

    <span class="hljs-meta">@Override</span>
    <span class="hljs-comment">// ç»‘å®šå¥½è®¢é˜…å…³ç³»åï¼Œå°±ä¼šè§¦å‘è¿™ä¸ªæ–¹æ³•</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onSubscribe</span><span class="hljs-params">(Flow.Subscription subscription)</span> {
        subscription.request(<span class="hljs-number">10</span>);
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onNext</span><span class="hljs-params">(Integer item)</span> {
        System.out.println(Thread.currentThread().getName() + <span class="hljs-string">"ï¼šæ¥æ”¶åˆ°æ•°æ®æµï¼š"</span> + item);
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onError</span><span class="hljs-params">(Throwable throwable)</span> {
        System.out.println(Thread.currentThread().getName() + <span class="hljs-string">"ï¼šæ¥æ”¶æ¶ˆæ¯å‡ºç°å¼‚å¸¸ï¼š"</span> + throwable.getMessage());
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onComplete</span><span class="hljs-params">()</span> {
        System.out.println(Thread.currentThread().getName() + <span class="hljs-string">"ï¼šå½“å‰è®¢é˜…è€…è¦æ±‚æ¥æ”¶çš„æ¶ˆæ¯å…¨éƒ¨å¤„ç†å®Œæ¯•ã€‚"</span>);
    }
}
</code></pre>
<p>ç›´æ¥ä½¿ç”¨ SubmissionPublisher æµ‹è¯•æ•´ä½“æ•ˆæœ</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
    <span class="hljs-comment">// åªæœ‰ä¸€ä¸ªå·¥ä½œçº¿ç¨‹çš„çº¿ç¨‹æ± </span>
    <span class="hljs-type">ExecutorService</span> <span class="hljs-variable">executor</span> <span class="hljs-operator">=</span> Executors.newFixedThreadPool(<span class="hljs-number">1</span>);
    <span class="hljs-comment">// æŒ‡å®šç¼“å†²åŒºçš„å¤§å°</span>
    <span class="hljs-type">int</span> <span class="hljs-variable">maxBufferCapacity</span> <span class="hljs-operator">=</span> <span class="hljs-number">5</span>;

    <span class="hljs-comment">// éœ€è¦æŒ‡å®šä¸¤ä¸ªå‚æ•°</span>
    <span class="hljs-comment">// ç¬¬ä¸€ä¸ªå‚æ•°éœ€è¦ä¼ é€’ä¸€ä¸ªçº¿ç¨‹æ± ï¼ŒæŒ‡å®šè®¢é˜…è€…ä½¿ç”¨çš„çº¿ç¨‹</span>
    <span class="hljs-comment">// ç¬¬äºŒä¸ªå‚æ•°ï¼Œéœ€è¦æŒ‡å®šä¸€ä¸ªç¼“å†²åŒºï¼Œå‘å¸ƒè€…å‘å¸ƒæ¶ˆæ¯åï¼Œæ¶ˆæ¯ä¼šæ‰”åˆ°ç¼“å†²åŒºé‡Œã€‚</span>
    SubmissionPublisher&lt;Integer&gt; publisher = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SubmissionPublisher</span>&lt;&gt;(executor,maxBufferCapacity);

    <span class="hljs-comment">// ç»‘å®šè®¢é˜…è€…</span>
    <span class="hljs-type">MySubscriber</span> <span class="hljs-variable">subscriber</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MySubscriber</span>();
    publisher.subscribe(subscriber);

    <span class="hljs-comment">// å‘å¸ƒæ¶ˆæ¯</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {
        System.out.println(Thread.currentThread().getName() + <span class="hljs-string">"ï¼šå‘å¸ƒæ¶ˆæ¯ï¼š"</span> + i);
        publisher.submit(i);
    }

    <span class="hljs-comment">// é‡Šæ”¾èµ„æº</span>
    publisher.close();
    executor.shutdown();
}
</code></pre>
<p>ç»“æœè¾“å‡ºå¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-tag">main</span>ï¼šå‘å¸ƒæ¶ˆæ¯ï¼š<span class="hljs-number">0</span>
<span class="hljs-selector-tag">main</span>ï¼šå‘å¸ƒæ¶ˆæ¯ï¼š<span class="hljs-number">1</span>
<span class="hljs-selector-tag">main</span>ï¼šå‘å¸ƒæ¶ˆæ¯ï¼š<span class="hljs-number">2</span>
<span class="hljs-selector-tag">main</span>ï¼šå‘å¸ƒæ¶ˆæ¯ï¼š<span class="hljs-number">3</span>
<span class="hljs-selector-tag">main</span>ï¼šå‘å¸ƒæ¶ˆæ¯ï¼š<span class="hljs-number">4</span>
<span class="hljs-selector-tag">main</span>ï¼šå‘å¸ƒæ¶ˆæ¯ï¼š<span class="hljs-number">5</span>
<span class="hljs-selector-tag">main</span>ï¼šå‘å¸ƒæ¶ˆæ¯ï¼š<span class="hljs-number">6</span>
<span class="hljs-selector-tag">main</span>ï¼šå‘å¸ƒæ¶ˆæ¯ï¼š<span class="hljs-number">7</span>
<span class="hljs-selector-tag">main</span>ï¼šå‘å¸ƒæ¶ˆæ¯ï¼š<span class="hljs-number">8</span>
<span class="hljs-selector-tag">main</span>ï¼šå‘å¸ƒæ¶ˆæ¯ï¼š<span class="hljs-number">9</span>
pool-<span class="hljs-number">1</span>-thread-<span class="hljs-number">1</span>ï¼šæ¥æ”¶åˆ°æ•°æ®æµï¼š<span class="hljs-number">0</span>
pool-<span class="hljs-number">1</span>-thread-<span class="hljs-number">1</span>ï¼šæ¥æ”¶åˆ°æ•°æ®æµï¼š<span class="hljs-number">1</span>
pool-<span class="hljs-number">1</span>-thread-<span class="hljs-number">1</span>ï¼šæ¥æ”¶åˆ°æ•°æ®æµï¼š<span class="hljs-number">2</span>
pool-<span class="hljs-number">1</span>-thread-<span class="hljs-number">1</span>ï¼šæ¥æ”¶åˆ°æ•°æ®æµï¼š<span class="hljs-number">3</span>
pool-<span class="hljs-number">1</span>-thread-<span class="hljs-number">1</span>ï¼šæ¥æ”¶åˆ°æ•°æ®æµï¼š<span class="hljs-number">4</span>
pool-<span class="hljs-number">1</span>-thread-<span class="hljs-number">1</span>ï¼šæ¥æ”¶åˆ°æ•°æ®æµï¼š<span class="hljs-number">5</span>
pool-<span class="hljs-number">1</span>-thread-<span class="hljs-number">1</span>ï¼šæ¥æ”¶åˆ°æ•°æ®æµï¼š<span class="hljs-number">6</span>
pool-<span class="hljs-number">1</span>-thread-<span class="hljs-number">1</span>ï¼šæ¥æ”¶åˆ°æ•°æ®æµï¼š<span class="hljs-number">7</span>
pool-<span class="hljs-number">1</span>-thread-<span class="hljs-number">1</span>ï¼šæ¥æ”¶åˆ°æ•°æ®æµï¼š<span class="hljs-number">8</span>
pool-<span class="hljs-number">1</span>-thread-<span class="hljs-number">1</span>ï¼šæ¥æ”¶åˆ°æ•°æ®æµï¼š<span class="hljs-number">9</span>
pool-<span class="hljs-number">1</span>-thread-<span class="hljs-number">1</span>ï¼šå½“å‰è®¢é˜…è€…è¦æ±‚æ¥æ”¶çš„æ¶ˆæ¯å…¨éƒ¨å¤„ç†å®Œæ¯•ã€‚
</code></pre>
<ul>
<li><strong>ç¼“å†²åŒºï¼š</strong> ç¼“å†²åŒºå°±æ˜¯å‘å¸ƒè€…å’Œè®¢é˜…è€…ä¹‹é—´çš„ä¸€å—å†…å­˜ï¼Œç±»ä¼¼çº¿ç¨‹æ± ä¸­çš„é˜»å¡é˜Ÿåˆ—ï¼Œå¯ä»¥å°†æ¶ˆæ¯æ‰”åˆ°è¿™ä¸ªç¼“å­˜åŒºé‡Œã€‚å…¶æ¬¡å’±ä»¬è®¾ç½®çš„ç¼“å†²åŒºå¤§å°æ˜¯ 5ï¼Œä½†æ˜¯å‘ç° get å‡ºæ¥çš„æ—¶å€™ï¼Œ5 è¢«æ›¿æ¢ä¸ºäº† 8ã€‚è¿™æ˜¯å› ä¸º SubmissionPublisher ä¸ºäº†æ›´æœ‰æ•ˆçš„ä½¿ç”¨å†…å­˜ï¼Œé»˜è®¤ä¼šåŸºäº roundCapacity æ–¹æ³•å°†ä¼ é€’çš„ç¼“å†²åŒºå¤§å°æ›¿æ¢ä¸º 2 çš„ n æ¬¡å¹‚ã€‚</li>
<li><strong>èƒŒå‹æ•ˆæœï¼š</strong> å½“è®¢é˜…è€…æŒ‡å®šçš„æ¶ˆæ¯å·²ç»å…¨éƒ¨å¤„ç†å®Œæ¯•åï¼Œå‘å¸ƒè€…æœ€å¤šåªèƒ½å‘å¸ƒç¼“å†²åŒºå¤§å°ä¸ªæ•°çš„æ¶ˆæ¯ï¼Œå‰©ä¸‹çš„å†…å®¹ä¼šåŸºäºèƒŒå‹çš„æ•ˆæœç›´æ¥æš‚æ—¶ä¸å‘é€ã€‚</li>
<li><strong>onCompleteï¼š</strong> éœ€è¦å‘å¸ƒè€…åšäº†close æ“ä½œï¼Œç¡®è®¤äº†å‘å¸ƒè€…å·²ç»å°†æ¶ˆæ¯å…¨éƒ¨å‘é€ï¼Œå¹¶ä¸”è®¢é˜…è€…ä¹Ÿå·²ç»å°†å…¨éƒ¨çš„æ¶ˆæ¯å¤„ç†å®Œæ¯•åï¼Œæ‰ä¼šè§¦å‘ onCompleteã€‚</li>
<li><strong>Subscriptionï¼š</strong> è®¢é˜…è€…å¯ä»¥åœ¨ onNext æˆ–è€…å…¶ä»–æ–¹æ³•ä¸­åŠ¨æ€çš„ä½¿ç”¨ subscription å»æŒ‡å®šåç»­éœ€è¦å‡ ä¸ªæ¶ˆæ¯è®¢é˜…ï¼Œä»¥åŠæ˜¯å¦éœ€è¦å–æ¶ˆè®¢é˜…æ¶ˆæ¯ç­‰æ“ä½œã€‚</li>
</ul>
<h2 data-id="heading-4">Reactive Steams è½åœ°ä½“éªŒ</h2>
<h3 data-id="heading-5">å›è°ƒåœ°ç‹±é—®é¢˜</h3>
<p>å‰é¢çš„æ–¹å¼å¤§è‡´äº†è§£äº† JDK9 ä¸­æ›´æ–°çš„ Reactive Streams çš„è§„èŒƒï¼Œå’±ä»¬å®ç°ä¹Ÿä»…ä»…æ˜¯çœ‹åˆ°äº†å‘å¸ƒè®¢é˜…å’Œå›å‹çš„æ•ˆæœã€‚å¹¶æ²¡æœ‰çœ‹åˆ°å¦‚ä½•è§£å†³å›è°ƒåœ°ç‹±çš„é—®é¢˜ã€‚å’±ä»¬å¯ä»¥é€šè¿‡ Spring5 å®˜ç½‘æä¾›çš„ä¸€ä¸ªä¾‹å­ï¼Œæ¥ä½“éªŒä¸€ä¸‹ CallBack Hell å›è°ƒåœ°ç‹±å¸¦æ¥çš„é—®é¢˜ã€‚åé¢å†æ ¹æ®ä¸‰æ–¹çš„å®ç°æ¥çœ‹ä¸€ä¸‹åŸºäº Reactive Streams å®ç°åæ•ˆæœå¦‚ä½•ã€‚è¿™é‡ŒåŸºæœ¬æ˜¯æ ¹æ®ä¼ªä»£ç èµ°çš„ã€‚</p>
<p>ä¾‹å­ï¼šåœ¨ç”¨æˆ·çš„ UI é¡µé¢ä¸Šï¼Œå±•ç¤ºå½“å‰ç”¨æˆ·æœ€å–œæ¬¢çš„ Top5 çš„å•†å“è¯¦æƒ…ã€‚è¿™é‡Œä¼šæ ¹æ®ç”¨æˆ·çš„ ID å»æŸ¥è¯¢å½“å‰ç”¨æˆ· Top5 å•†å“çš„IDï¼Œå¦‚æœ ID å¯ä»¥æŸ¥è¯¢åˆ°ä¹‹åå†æ ¹æ®å•†å“çš„ ID å»æŸ¥è¯¢å•†å“çš„è¯¦æƒ…ã€‚å¦‚æœå½“å‰ç”¨æˆ· ID æŸ¥è¯¢çš„ç»“æœä¸å­˜åœ¨å–œæ¬¢çš„ Top å•†å“ï¼Œæ²¡æœ‰çš„è¯ï¼Œé€šè¿‡æ¨èæœåŠ¡æŸ¥è¯¢ Top5 çš„å•†å“ä¿¡æ¯ã€‚å±•ç¤ºç»™ç”¨æˆ·ã€‚</p>
<p>å½“å‰ä¾‹å­éœ€è¦ä¸‰ä¸ªæœåŠ¡çš„æ”¯æ’‘ï¼š</p>
<ul>
<li>æ ¹æ®ç”¨æˆ· ID æŸ¥è¯¢ç”¨æˆ·çš„ Top5 å•†å“IDã€‚</li>
<li>æ ¹æ® Top5 å•†å“IDæŸ¥è¯¢å•†å“è¯¦æƒ…ã€‚</li>
<li>è°ƒç”¨æ¨èæœåŠ¡ï¼Œè·å–5ä¸ªå•†å“è¯¦æƒ…ã€‚</li>
</ul>
<p>åŸºäº Java æœ€åŸç”Ÿçš„å¼‚æ­¥ç¼–ç¨‹æ–¹å¼ï¼Œå®ç°ä¸Šè¿°æ“ä½œï¼Œæ¥çœ‹çœ‹åˆ°åº•ä»€ä¹ˆæ˜¯å›è°ƒåœ°ç‹±ã€‚ã€‚ã€‚</p>
<p>å•†å“è¯¦æƒ…å®ä½“ç±»ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Data</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Fav</span> {

    <span class="hljs-keyword">private</span> String itemId;

    <span class="hljs-keyword">private</span> String itemName;

    <span class="hljs-keyword">private</span> String itemDetail;

}
</code></pre>
<p>å‡†å¤‡å›è°ƒæ–¹æ³•ï¼Œæ‹¿åˆ°ç»“æœåè§¦å‘</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Callback</span>&lt;T&gt; {

    <span class="hljs-keyword">void</span> <span class="hljs-title function_">onSuccess</span><span class="hljs-params">(T t)</span>;

    <span class="hljs-keyword">void</span> <span class="hljs-title function_">onError</span><span class="hljs-params">(Throwable throwable)</span>;

}
</code></pre>
<p>å‡†å¤‡äº†è®¿é—®ä¸‰ä¸ªæœåŠ¡çš„ Service æ¥å£</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">UserService</span> {

    <span class="hljs-comment">/**
     * æ ¹æ®ç”¨æˆ·IdæŸ¥è¯¢ç”¨æˆ·çš„Top5å•†å“Id
     * <span class="hljs-doctag">@param</span> userId
     * <span class="hljs-doctag">@param</span> list
     */</span>
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">getFav</span><span class="hljs-params">(String userId, Callback&lt;List&lt;String&gt;&gt; list)</span>;

}

<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">ItemService</span> {
    
    <span class="hljs-comment">/**
     * æ ¹æ®å•†å“IdæŸ¥è¯¢å•†å“çš„è¯¦æƒ…
     *
     * <span class="hljs-doctag">@param</span> itemId
     * <span class="hljs-doctag">@param</span> callback
     */</span>
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">getDetail</span><span class="hljs-params">(String itemId, Callback&lt;Fav&gt; callback)</span>;
}

<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">SuggestionService</span> {

    <span class="hljs-comment">/**
     * è°ƒç”¨æ¨èæœåŠ¡ï¼Œè·å–æ¨èå•†å“
     * <span class="hljs-doctag">@param</span> favs
     */</span>
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">getSuggestion</span><span class="hljs-params">(Callback&lt;List&lt;Fav&gt;&gt; favs)</span>;
}
</code></pre>
<p>å‡†å¤‡äº†å“åº”æ•°æ®çš„ UI çº¿ç¨‹å·¥å…·ä»¥åŠå“åº”æ–¹æ³•</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UiUtils</span> {

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">submitOnUiThread</span><span class="hljs-params">(Runnable runnable)</span>{
        <span class="hljs-comment">// çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹åšå“åº”çš„æ“ä½œâ€¦â€¦â€¦â€¦â€¦â€¦</span>
    }


    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">show</span><span class="hljs-params">(Object obj)</span>{
        <span class="hljs-comment">// åˆ©ç”¨UIçº¿ç¨‹å±•ç¤ºå…·ä½“æ•°æ®</span>
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">error</span><span class="hljs-params">(Object obj)</span>{
        <span class="hljs-comment">// å‡ºç°é”™è¯¯å“åº”çš„å†…å®¹</span>
    }

}
</code></pre>
<p>å®Œæˆäº† Controller ä¸­çš„å¼‚æ­¥ç¼–ç¨‹æ•ˆæœ</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@RestController</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CallBackHellController</span> {

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> UserService userService;

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> ItemService itemService;

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> SuggestionService suggestionService;


    <span class="hljs-meta">@GetMapping("/callbackhell")</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">callbackHell</span><span class="hljs-params">(String userId)</span>{
        <span class="hljs-comment">//1ã€è°ƒç”¨ç”¨æˆ·æœåŠ¡ï¼ŒæŸ¥è¯¢Top5å•†å“Id</span>
        userService.getFav(userId, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Callback</span>&lt;List&lt;String&gt;&gt;() {
            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onSuccess</span><span class="hljs-params">(List&lt;String&gt; list)</span> {
                <span class="hljs-comment">// å·²ç»æŸ¥è¯¢åˆ°å•†å“Idï¼Œä½†æ˜¯ä¸çŸ¥é“æ˜¯å¦æœ‰å€¼</span>
                <span class="hljs-keyword">if</span> (list.isEmpty()){
                    <span class="hljs-comment">// 3ã€ç”¨æˆ·æ²¡æœ‰Top5å•†å“Idï¼Œé€šè¿‡æ¨èæœåŠ¡æŸ¥è¯¢æ¨èå•†å“è¯¦æƒ…</span>
                    suggestionService.getSuggestion(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Callback</span>&lt;List&lt;Fav&gt;&gt;(){
                        <span class="hljs-meta">@Override</span>
                        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onSuccess</span><span class="hljs-params">(List&lt;Fav&gt; favs)</span> {
                            <span class="hljs-comment">// æ¨èæœåŠ¡æŸ¥è¯¢åˆ°äº†å•†å“è¯¦æƒ…ï¼Œå“åº”å³å¯</span>
                            UiUtils.submitOnUiThread(() -&gt; {
                                favs.stream().limit(<span class="hljs-number">5</span>).forEach(UiUtils::show);
                            });
                        }
                        <span class="hljs-meta">@Override</span>
                        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onError</span><span class="hljs-params">(Throwable throwable)</span> {
                            UiUtils.error(throwable);
                        }
                    });

                }
                <span class="hljs-keyword">else</span>{
                    <span class="hljs-comment">// 2ã€é€šè¿‡ç”¨æˆ·æŸ¥è¯¢åˆ°äº†Top5å•†å“Idï¼Œé€šè¿‡å•†å“IdæŸ¥è¯¢å•†å“è¯¦æƒ…</span>
                    list.stream().limit(<span class="hljs-number">5</span>).forEach(itemId -&gt; itemService.getDetail(itemId,<span class="hljs-keyword">new</span> <span class="hljs-title class_">Callback</span>&lt;Fav&gt;(){

                        <span class="hljs-meta">@Override</span>
                        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onSuccess</span><span class="hljs-params">(Fav fav)</span> {
                            <span class="hljs-comment">// æŸ¥è¯¢åˆ°äº†å•†å“è¯¦æƒ…ï¼Œåˆ©ç”¨UIçº¿ç¨‹ï¼Œç»™å®¢æˆ·ç«¯å“åº”æ•°æ®</span>
                            UiUtils.submitOnUiThread(() -&gt; UiUtils.show(fav));
                        }

                        <span class="hljs-meta">@Override</span>
                        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onError</span><span class="hljs-params">(Throwable throwable)</span> {
                            <span class="hljs-comment">// å‡ºç°å¼‚å¸¸äº†ã€‚</span>
                            UiUtils.error(throwable);
                        }
                    }));
                }
            }
            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onError</span><span class="hljs-params">(Throwable throwable)</span> {
                <span class="hljs-comment">// å‡ºç°å¼‚å¸¸äº†ã€‚</span>
                UiUtils.error(throwable);
            }
        });


    }

}
</code></pre>
<h3 data-id="heading-6">è§£å†³å›è°ƒåœ°ç‹±é—®é¢˜</h3>
<p>è¿™é‡Œä¸ºäº†è§£å†³å›è°ƒåœ°ç‹±é—®é¢˜ï¼Œéœ€è¦ä¸€ä¸ª Reactor çš„ä¾èµ–æ¥å¸®åŠ©å’±ä»¬å®ç°å¼‚æ­¥ç¼–ç¨‹ã€‚</p>
<p>éœ€è¦å¯¼å…¥ä¾èµ–</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!--reactorçš„æ ¸å¿ƒä¾èµ–--&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.projectreactor<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>reactor-core<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.7.7<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<p>ä¸èƒ½å†ä½¿ç”¨ä¹‹å‰çš„ Callback æ–¹å¼äº†ã€‚éœ€è¦ä½¿ç”¨ reactor æä¾›çš„ Fluxï¼Œå¹¶ä¸”è¿™ç§é“¾å¼æ“ä½œä¼šæ›´ç›´è§‚ï¼Œä¹Ÿæ›´å¥½ç»´æŠ¤ã€‚å°±åªéœ€è¦ä¿®æ”¹ä¸‰ä¸ªæœåŠ¡å¯¹åº”çš„ Serviceã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">UserService</span> {

    <span class="hljs-comment">/**
     * æ ¹æ®ç”¨æˆ·IDæŸ¥è¯¢Top5å•†å“ID
     * <span class="hljs-doctag">@param</span> userId
     * <span class="hljs-doctag">@return</span>
     */</span>
    Flux&lt;List&lt;String&gt;&gt; <span class="hljs-title function_">getFav</span><span class="hljs-params">(String userId)</span>;

}

<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">ItemService</span> {


    <span class="hljs-comment">/**
     * æ ¹æ®å•†å“IDæŸ¥è¯¢å•†å“è¯¦æƒ…
     * <span class="hljs-doctag">@param</span> itemId
     * <span class="hljs-doctag">@return</span>
     */</span>
    Flux&lt;Fav&gt; <span class="hljs-title function_">getDetail</span><span class="hljs-params">(String itemId)</span>;

}

<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">SuggestionService</span> {

    <span class="hljs-comment">/**
     * è·å–æ¨èçš„å•†å“è¯¦æƒ…
     * <span class="hljs-doctag">@return</span>
     */</span>
    Flux&lt;List&lt;Fav&gt;&gt; <span class="hljs-title function_">getSuggestion</span><span class="hljs-params">()</span>;

}
</code></pre>
<p>ç„¶åå°±å¯ä»¥åˆ©ç”¨ Flux æä¾›çš„ API æ¥è§£å†³ä¹‹å‰å›è°ƒåœ°ç‹±çš„é—®é¢˜ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@RestController</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ReactorCallbackController</span> {

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> UserService userService;

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> ItemService itemService;

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> SuggestionService suggestionService;


    <span class="hljs-meta">@GetMapping("reactorcallback")</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">reactorCallback</span><span class="hljs-params">(String userId)</span>{
        userService
                .getFav(userId)   <span class="hljs-comment">// æ ¹æ®ç”¨æˆ·IdæŸ¥è¯¢Top5å•†å“Id</span>
                .flatMap(itemService::getDetail)  <span class="hljs-comment">// æ ¹æ®å•†å“IDæŸ¥è¯¢å•†å“è¯¦æƒ…</span>
                .switchIfEmpty(suggestionService.getSuggestion())  <span class="hljs-comment">// å¦‚æœå‰é¢ä¸ºnullï¼Œè¿™é‡Œé€šè¿‡æ¨èæœåŠ¡æŸ¥è¯¢å•†å“è¯¦æƒ…</span>
                .take(<span class="hljs-number">5</span>)    <span class="hljs-comment">// è·å–å‰5ä¸ªæ•°æ®</span>
                .publishOn(UiUtils.reactorOnUiThread())    <span class="hljs-comment">// ä½¿ç”¨Uiçº¿ç¨‹</span>
                .subscribe(UiUtils::show,UiUtils::error);   <span class="hljs-comment">// æˆåŠŸèµ°showï¼Œå¤±è´¥èµ°error</span>
    }

}
</code></pre>
<h3 data-id="heading-7">CompletableFuture çš„å¼‚æ­¥ç¼–ç¨‹</h3>
<p>Future çš„å½¢å¼ç›¸æ¯” Callback Hell æ•ˆæœè¦å¥½ä¸€äº›ï¼Œè™½ç„¶ JDK8 å’Œ 9 éƒ½å¯¹ CompletableFuture åšäº†å„ç§ä¼˜åŒ–ï¼Œä½†æ˜¯ä»–çš„è¡¨ç°è¿˜æ˜¯ä¸å¤ªå¥½ã€‚å¤šä¸ªFutureåœ¨åµŒå¥—æ—¶ï¼Œå¯è¯»æ€§è¿˜æ˜¯æ¯”è¾ƒå·®çš„ã€‚å¹¶ä¸” CompletableFuture ä¸å­˜åœ¨ä»€ä¹ˆå›å‹ï¼Œæˆ–è€…æ˜¯å»¶è¿Ÿè°ƒç”¨çš„åŠŸèƒ½ã€‚</p>
<p>ç°åœ¨å€ŸåŠ© CompletableFuture æ¥å®ç°ä¸€ä¸ªåœºæ™¯ã€‚</p>
<ol>
<li>è·å–ä¸€ä¸ªç”¨æˆ·IDçš„åˆ—è¡¨ã€‚</li>
<li>é€šè¿‡ç”¨æˆ·IDåˆ†åˆ«è·å–ä»–çš„åå­—ä»¥åŠç»Ÿè®¡ä¿¡æ¯ã€‚ï¼ˆå¸Œæœ›è¿™ä¸¤ä¸ªæ“ä½œæ˜¯å¹¶è¡Œæ‰§è¡Œçš„ï¼‰</li>
<li>å½“ä¸¤ä¸ªä¿¡æ¯éƒ½è·å–åˆ°ä¹‹åï¼Œå°è£…æˆä¸€ä¸ªæ™®é€šå­—ç¬¦ä¸²å³å¯ã€‚</li>
<li>å“åº”æ•°æ®ï¼Œæœ€åæ‹¿åˆ°ç»“æœï¼ˆè¾“å‡ºä¸€ä¸‹ï¼‰ã€‚</li>
</ol>
<p>å®ç°ä»£ç </p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">GetNameAndStatTestByCF</span> {

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// 1ã€è·å–ä¸€ç»„ç”¨æˆ·IDåˆ—è¡¨</span>
        CompletableFuture&lt;List&lt;String&gt;&gt; idList = getID();
        CompletableFuture&lt;List&lt;String&gt;&gt; dataCompletableFuture = idList.thenComposeAsync(ids -&gt; {
            Stream&lt;CompletableFuture&lt;String&gt;&gt; resultStream = ids.stream().map(id -&gt; {
                <span class="hljs-comment">// 2ã€å¹¶è¡ŒåŸºäºIDæŸ¥è¯¢åç§°ä¿¡æ¯</span>
                CompletableFuture&lt;String&gt; nameTask = getName();
                <span class="hljs-comment">// 2ã€å¹¶è¡ŒåŸºäºIDæŸ¥è¯¢ç»Ÿè®¡ä¿¡æ¯</span>
                CompletableFuture&lt;Integer&gt; statTask = getStat();
                <span class="hljs-comment">// è®©ä¸¤ä¸ªæŸ¥è¯¢åç§°ä¿¡æ¯å’ŒæŸ¥è¯¢ç»Ÿè®¡ä¿¡æ¯æ“ä½œå¹¶è¡Œæ‰§è¡Œ</span>
                <span class="hljs-keyword">return</span> nameTask.thenCombineAsync(statTask, (name, stat) -&gt; {
                    <span class="hljs-comment">// 3ã€æ‹¿åˆ°ä¿¡æ¯ç»„è£…</span>
                    <span class="hljs-keyword">return</span> <span class="hljs-string">"Nameï¼š"</span> + name + <span class="hljs-string">"ï¼ŒStatï¼š"</span> + stat;
                });
            });
            <span class="hljs-comment">// å°†resultStreamè½¬æ¢æˆä¸€ä¸ªæ•°ç»„</span>
            List&lt;CompletableFuture&lt;String&gt;&gt; resultList = resultStream.toList();
            <span class="hljs-comment">// å…¨éƒ¨çš„ä»»åŠ¡å°è£…èµ·æ¥</span>
            CompletableFuture&lt;Void&gt; allDone = CompletableFuture.allOf(resultList.toArray(<span class="hljs-keyword">new</span> <span class="hljs-title class_">CompletableFuture</span>[]{}));
            <span class="hljs-comment">// æ‰§è¡Œå…¨éƒ¨ä»»åŠ¡</span>
            <span class="hljs-keyword">return</span> allDone.thenApplyAsync(v -&gt; resultList.stream()
                    .map(CompletableFuture::join)
                    .collect(Collectors.toList()));
        });

        <span class="hljs-comment">// 4ã€è·å–å…¨éƒ¨çš„ç»„ä»¶ä¿¡æ¯åå“åº”å®¢æˆ·ç«¯ï¼ˆè¾“å‡ºï¼‰</span>
        List&lt;String&gt; data = dataCompletableFuture.join();
        System.out.println(data);
    }

    <span class="hljs-comment">// æ¨¡æ‹ŸzzæœåŠ¡è·å–ç»Ÿè®¡ä¿¡æ¯</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> CompletableFuture&lt;Integer&gt; <span class="hljs-title function_">getStat</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> CompletableFuture.supplyAsync(() -&gt; <span class="hljs-number">666</span>);
    }

    <span class="hljs-comment">// æ¨¡æ‹ŸyyæœåŠ¡è·å–åç§°ä¿¡æ¯</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> CompletableFuture&lt;String&gt; <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> CompletableFuture.supplyAsync(() -&gt; <span class="hljs-string">"å¼ ä¸‰"</span>);
    }

    <span class="hljs-comment">// æ¨¡æ‹ŸxxæœåŠ¡ï¼Œè·å–ä¸€ç»„ç”¨æˆ·ID</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> CompletableFuture&lt;List&lt;String&gt;&gt; <span class="hljs-title function_">getID</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> CompletableFuture.supplyAsync(() -&gt; {
            <span class="hljs-comment">// æ¨¡æ‹ŸæŸ¥è¯¢ä¸‰æ–¹æœåŠ¡</span>
            List&lt;String&gt; list = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
            list.add(<span class="hljs-string">"1"</span>);
            list.add(<span class="hljs-string">"2"</span>);
            list.add(<span class="hljs-string">"3"</span>);
            <span class="hljs-keyword">return</span> list;
        });
    }

}
</code></pre>
<h3 data-id="heading-8">è§£å†³ CompletableFuture çš„é—®é¢˜</h3>
<p>CompletableFuture å¯ä»¥å®ç°ä¸€äº›ç®€å•çš„å¼‚æ­¥ç¼–ç¨‹ï¼Œä½†æ˜¯å¯çœ‹æ€§å’Œç»´æŠ¤æ€§ä»¥ååæœŸçš„æ‰©å±•éƒ½éœ€è¦å¯¹æ•´ä½“ä»£ç åšæ¯”è¾ƒå¤§æˆæœ¬çš„ç»´æŠ¤ã€‚ä¾ç„¶é‡‡ç”¨ Reactor æ¥å®ç°ä¸€ä¸ªä¸€æ¨¡ä¸€æ ·çš„é€»è¾‘ï¼Œå†çœ‹ä»£ç æ•ˆæœã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">GetNameAndStatByReactor</span> {

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// 1ã€è·å–ä¸€ç»„ç”¨æˆ·IDåˆ—è¡¨</span>
        Flux&lt;String&gt; idFlux = getId();

        Flux&lt;String&gt; result = idFlux.flatMap(id -&gt; {
            <span class="hljs-comment">// 2ã€å¹¶è¡ŒåŸºäºIDæŸ¥è¯¢åç§°ä¿¡æ¯</span>
            Flux&lt;String&gt; nameFlux = getName(id);
            <span class="hljs-comment">// 2ã€å¹¶è¡ŒåŸºäºIDæŸ¥è¯¢ç»Ÿè®¡ä¿¡æ¯</span>
            Flux&lt;Integer&gt; statFlux = getStat(id);
            <span class="hljs-comment">// ä¿©ä»»åŠ¡å¹¶è¡Œå¤„ç†å®Œæ¯•ï¼Œè§¦å‘3</span>
            <span class="hljs-keyword">return</span> nameFlux.zipWith(statFlux, (name, stat) -&gt; {
                <span class="hljs-comment">// 3ã€æ‹¿åˆ°ä¿¡æ¯ç»„è£…</span>
                <span class="hljs-keyword">return</span> <span class="hljs-string">"Nameï¼š"</span> + name + <span class="hljs-string">"ï¼ŒStatï¼š"</span> + stat;
            });
        });
        Mono&lt;List&lt;String&gt;&gt; listMono = result.collectList();
        List&lt;String&gt; info = listMono.block();
        <span class="hljs-comment">// 4ã€è·å–å…¨éƒ¨çš„ç»„ä»¶ä¿¡æ¯åå“åº”å®¢æˆ·ç«¯ï¼ˆè¾“å‡ºï¼‰</span>
        System.out.println(info);
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> Flux&lt;Integer&gt; <span class="hljs-title function_">getStat</span><span class="hljs-params">(String id)</span> {
        <span class="hljs-comment">// ä¼šæŸ¥è¯¢ä¸‰æ–¹æœåŠ¡ï¼Œç„¶åå°è£…ç»“æœ</span>
        <span class="hljs-keyword">return</span> Flux.just(<span class="hljs-number">888</span>);
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> Flux&lt;String&gt; <span class="hljs-title function_">getName</span><span class="hljs-params">(String id)</span> {
        <span class="hljs-comment">// ä¼šæŸ¥è¯¢ä¸‰æ–¹æœåŠ¡ï¼Œç„¶åå°è£…ç»“æœ</span>
        <span class="hljs-keyword">return</span> Flux.just(<span class="hljs-string">"å¼ ä¸‰"</span>);
    }


    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> Flux&lt;String&gt; <span class="hljs-title function_">getId</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// ä¼šæŸ¥è¯¢ä¸‰æ–¹æœåŠ¡ï¼Œç„¶åå°è£…ç»“æœ</span>
        <span class="hljs-keyword">return</span> Flux.just(<span class="hljs-string">"1"</span>,<span class="hljs-string">"2"</span>,<span class="hljs-string">"3"</span>);
    }
}
</code></pre>
<h2 data-id="heading-9">RxJava2 å®ç°å¼‚æ­¥ç¼–ç¨‹</h2>
<p>RxJava æ˜¯ä¸€ä¸ªå°æ¡†æ¶ï¼Œæˆ–è€…æ˜¯ä¾èµ–åº“ã€‚åœ¨ RxJava çš„1.xç‰ˆæœ¬ä¸­ï¼Œå®ƒå¹¶ä¸åŸºäº Reactive Streams å»å®ç°çš„ã€‚æ²¡æœ‰å…³ç³»ï¼Œå› ä¸º RxJava çš„ 2 ç‰ˆæœ¬ï¼Œå°±æ˜¯åŸºäºReactive Streams å®ç°çš„äº†ã€‚</p>
<p>ä½¿ç”¨ RxJava å·¨ç®€å•ï¼Œå› ä¸ºä½œè€…æƒ³å°† RxJava å°½é‡åšåˆ°è½»é‡çº§ï¼Œå°±ä¸€ä¸ªä¾èµ–ã€‚</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!--RxJava2çš„ä¾èµ–--&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.reactivex.rxjava2<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>rxjava<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.2.21<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<h3 data-id="heading-10">RxJava2 çš„å…¥é—¨æ“ä½œ</h3>
<p>è·å–ä¸€ä¸ª Person å¯¹è±¡çš„é›†åˆï¼Œå°† Person é›†åˆä¸­çš„æ‰€æœ‰å¹´é¾„å¤§äº10å²çš„ Person å¯¹è±¡ç­›é€‰å‡ºæ¥ï¼Œå¹¶è¾“å‡ºä»–çš„åå­—ã€‚</p>
<p>é‡‡ç”¨ RxJava æ¥å®ç°ä¸€ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Demo</span> {

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">//1ã€è·å–Personå¯¹è±¡é›†åˆ</span>
        List&lt;Person&gt; personList = getPersonList();

        <span class="hljs-comment">//2ã€å®Œæˆä¸Šé¢è¦æ±‚çš„æ“ä½œ</span>
        <span class="hljs-comment">//2.1ã€å°†personé›†åˆè½¬æ¢ä¸ºRxJavaçš„æµ</span>
        Flowable.fromArray(personList.toArray(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>[]{}))
                <span class="hljs-comment">//2.2 è¿‡æ»¤å¹´é¾„å¤§äº10å²çš„</span>
                .filter(person -&gt; person.getAge() &gt; <span class="hljs-number">10</span>)
                <span class="hljs-comment">//2.3 è·å–ç­›é€‰åçš„Personåç§°</span>
                .map(person -&gt; person.getName())
                <span class="hljs-comment">//2.4 è¾“å‡ºName</span>
                .subscribe(System.out::println);
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> List&lt;Person&gt; <span class="hljs-title function_">getPersonList</span><span class="hljs-params">()</span> {
        List&lt;Person&gt; personList = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
        personList.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-string">"å¤§å¨ƒ"</span>,<span class="hljs-number">5</span>));
        personList.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-string">"äºŒå¨ƒ"</span>,<span class="hljs-number">7</span>));
        personList.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-string">"ä¸‰å¨ƒ"</span>,<span class="hljs-number">9</span>));
        personList.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-string">"å››å¨ƒ"</span>,<span class="hljs-number">11</span>));
        personList.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-string">"äº”å¨ƒ"</span>,<span class="hljs-number">13</span>));
        <span class="hljs-keyword">return</span> personList;
    }
}
</code></pre>
<h3 data-id="heading-11">RxJava2 çš„åŸºç¡€å¤„ç†æµç¨‹</h3>
<p>åœ¨ RxJava ä¸­æœ‰ä¸‰ä¸ªæ ¸å¿ƒçš„è§’è‰²</p>
<ul>
<li>è¢«è§‚å¯Ÿè€…ï¼ˆObservableï¼‰</li>
<li>è§‚å¯Ÿè€…ï¼ˆObserverï¼‰</li>
<li>è®¢é˜…ï¼ˆSubscribeï¼‰</li>
</ul>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Demo2</span> {

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">//1ã€æ„å»ºObservable</span>
        Observable&lt;String&gt; observable = Observable.create(emitter -&gt; {
            emitter.onNext(<span class="hljs-string">"Hello"</span>);
            emitter.onNext(<span class="hljs-string">"World"</span>);
            emitter.onComplete();
        });

        <span class="hljs-comment">//2ã€æ„å»ºObserver</span>
        Observer&lt;String&gt; observer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Observer</span>&lt;&gt;() {
            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onSubscribe</span><span class="hljs-params">(Disposable d)</span> {
                System.out.println(<span class="hljs-string">"å¼€å§‹è®¢é˜…"</span>);
            }

            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onNext</span><span class="hljs-params">(String s)</span> {
                System.out.println(<span class="hljs-string">"è§‚å¯Ÿè€…ï¼š"</span> + s);
            }

            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onError</span><span class="hljs-params">(Throwable e)</span> {
                e.printStackTrace();
            }

            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onComplete</span><span class="hljs-params">()</span> {
                System.out.println(<span class="hljs-string">"è®¢é˜…ç»“æŸ"</span>);
            }
        };

        <span class="hljs-comment">//3ã€è®¢é˜…</span>
        observable.subscribe(observer);
    }

}
</code></pre>
<h3 data-id="heading-12">åˆ›å»ºæ“ä½œç¬¦</h3>
<h4 data-id="heading-13">create</h4>
<p>Observable.create() æ˜¯æ‰‹åŠ¨åˆ›å»º Observable çš„æ–¹æ³•ï¼Œå…è®¸å®Œå…¨æ§åˆ¶æ•°æ®çš„å‘å°„ã€å®Œæˆå’Œé”™è¯¯å¤„ç†ã€‚</p>
<pre><code class="hljs language-java" lang="java">Observable&lt;String&gt; observable = Observable.create(emitter -&gt; {
    emitter.onNext(<span class="hljs-string">"Hello"</span>);
    emitter.onNext(<span class="hljs-string">"World"</span>);
    emitter.onComplete();
});

observable.subscribe(
    item -&gt; System.out.println(<span class="hljs-string">"æ”¶åˆ°: "</span> + item),
    error -&gt; System.err.println(<span class="hljs-string">"é”™è¯¯: "</span> + error),
    () -&gt; System.out.println(<span class="hljs-string">"å®Œæˆ"</span>)
);

<span class="hljs-comment">// è¾“å‡ºï¼š</span>
<span class="hljs-comment">// æ”¶åˆ°: Hello</span>
<span class="hljs-comment">// æ”¶åˆ°: World</span>
<span class="hljs-comment">// å®Œæˆ</span>
</code></pre>
<h4 data-id="heading-14">just</h4>
<p>just ç”¨äºåˆ›å»ºä¸€ä¸ªå‘å°„å›ºå®šæ•°æ®çš„ Observableï¼Œæ•°æ®æ˜¯é¢„å®šä¹‰çš„ï¼Œå‘å°„åç«‹å³å®Œæˆã€‚</p>
<pre><code class="hljs language-java" lang="java">Observable.just(<span class="hljs-string">"Hello"</span>)
    .subscribe(item -&gt; 
        System.out.println(<span class="hljs-string">"æ”¶åˆ°: "</span> + item)
    );

<span class="hljs-comment">// è¾“å‡ºï¼š</span>
<span class="hljs-comment">// æ”¶åˆ°: Hello</span>
</code></pre>
<h4 data-id="heading-15">fromArray</h4>
<p>fromArray ç”¨äºä»æ•°ç»„åˆ›å»ºä¸€ä¸ª Observableï¼ŒæŒ‰æ•°ç»„é¡ºåºå‘å°„æ‰€æœ‰å…ƒç´ ã€‚</p>
<pre><code class="hljs language-java" lang="java">String[] fruits = {<span class="hljs-string">"Apple"</span>, <span class="hljs-string">"Banana"</span>, <span class="hljs-string">"Cherry"</span>, <span class="hljs-string">"Date"</span>};
Observable.fromArray(fruits)
    .subscribe(fruit -&gt; 
        System.out.print(fruit + <span class="hljs-string">" "</span>)
    );

<span class="hljs-comment">// è¾“å‡ºï¼š</span>
<span class="hljs-comment">// Apple Banana Cherry Date</span>
</code></pre>
<h4 data-id="heading-16">fromCallable</h4>
<p>fromCallable ç”¨äºä» Callable åˆ›å»º Observableï¼ŒCallable çš„è¿”å›å€¼ä¼šè¢«åŒ…è£…æˆ Observable å‘å°„ã€‚</p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        Observable.fromCallable(() -&gt; <span class="hljs-string">"è®¡ç®—ç»“æœ: "</span> + System.currentTimeMillis())
                .subscribe(System.out::println);

        <span class="hljs-comment">// è¾“å‡ºï¼š</span>
        <span class="hljs-comment">// è®¡ç®—ç»“æœ: 1620000000000</span>
    }
</code></pre>
<h4 data-id="heading-17">timer</h4>
<p>timer ç”¨äºåˆ›å»ºä¸€ä¸ªå»¶è¿ŸæŒ‡å®šæ—¶é—´åå‘å°„å•ä¸ªæ•°æ®çš„ Observableï¼Œé€šå¸¸æ˜¯ 0Lï¼Œç„¶åç»“æŸã€‚</p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> InterruptedException {
        System.out.println(<span class="hljs-string">"å¼€å§‹æ—¶é—´: "</span> + System.currentTimeMillis());

        Observable.timer(<span class="hljs-number">2</span>, TimeUnit.SECONDS)
                .subscribe(tick -&gt;
                        System.out.println(<span class="hljs-string">"è§¦å‘æ—¶é—´: "</span> + System.currentTimeMillis() + <span class="hljs-string">"ï¼Œå€¼: "</span> + tick)
                );

        Thread.sleep(<span class="hljs-number">3000</span>);
    }
</code></pre>
<p>é»˜è®¤ä½¿ç”¨ <code>Schedulers.computation()</code>çº¿ç¨‹æ± è®¡ç®—ï¼Œçº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹æ˜¯å®ˆæŠ¤çº¿ç¨‹ï¼Œå¦‚æœä¸»çº¿ç¨‹ç»“æŸå®ˆæŠ¤çº¿ç¨‹ä¹Ÿä¼šéšä¹‹ç»ˆæ­¢ã€‚</p>
<h4 data-id="heading-18">interval</h4>
<p>interval() æ–¹æ³•ç”¨äºåˆ›å»ºä¸€ä¸ª å‘¨æœŸæ€§å®šæ—¶å‘å°„çš„ Observableï¼Œå®ƒä¼šæŒ‰ç…§æŒ‡å®šçš„æ—¶é—´é—´éš”æ— é™æœŸåœ°å‘å°„é€’å¢çš„æ•°å­—åºåˆ—ï¼ˆä»0å¼€å§‹ï¼‰ã€‚</p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException {
        Observable.interval(<span class="hljs-number">2</span>, TimeUnit.SECONDS)
                .subscribe(aLong -&gt; System.out.println(Thread.currentThread().getName() + <span class="hljs-string">"ï¼š"</span> + aLong));

        System.in.read();
    }
</code></pre>
<h4 data-id="heading-19">intervalRange</h4>
<p>intervalRange() æ˜¯ interval() çš„å¢å¼ºç‰ˆæœ¬ï¼Œç”¨äºåˆ›å»ºä¸€ä¸ªæœ‰é™æ¬¡æ•°çš„å‘¨æœŸæ€§å‘å°„çš„ Observableã€‚å®ƒå…è®¸ä½ æŒ‡å®šèµ·å§‹å€¼ã€å‘å°„æ¬¡æ•°ã€åˆå§‹å»¶è¿Ÿå’Œé—´éš”æ—¶é—´ã€‚</p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException {
        Observable.intervalRange(<span class="hljs-number">100</span>, <span class="hljs-number">4</span>, <span class="hljs-number">0</span>, <span class="hljs-number">2</span>, TimeUnit.SECONDS)
                .subscribe(aLong -&gt; System.out.println(Thread.currentThread().getName() + <span class="hljs-string">"ï¼š"</span> + aLong));
        System.in.read();
    }
</code></pre>
<h4 data-id="heading-20">range &amp; rangeLong</h4>
<p>è¿™ä¸¤ä¸ªæ–¹æ³•ç”¨äºåˆ›å»ºä¸€ä¸ªå‘å°„è¿ç»­æ•´æ•°åºåˆ—çš„ Observableï¼š</p>
<ul>
<li><code>range(start, count)</code>ï¼šå‘å°„ Integer ç±»å‹çš„è¿ç»­æ•´æ•°ã€‚</li>
<li><code>rangeLong(start, count)</code>ï¼šå‘å°„ Long ç±»å‹çš„è¿ç»­æ•´æ•°ã€‚</li>
</ul>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException {
        Observable.range(<span class="hljs-number">0</span>, <span class="hljs-number">10</span>)
                .subscribe(integer -&gt; System.out.println(Thread.currentThread().getName() + <span class="hljs-string">"ï¼š"</span> + integer));
        System.in.read();
    }
</code></pre>
<h4 data-id="heading-21">neverã€errorã€empty</h4>
<p>è¿™ä¸‰ä¸ªæ–¹æ³•éƒ½æ˜¯åˆ›å»ºç‰¹æ®Šçš„ Observable çš„å·¥å‚æ–¹æ³•ï¼Œç”¨äºç‰¹å®šçš„åœºæ™¯ã€‚</p>
<ul>
<li>neverï¼šåˆ›å»ºä¸€ä¸ªæ°¸è¿œä¸ä¼šå‘å°„ä»»ä½•æ•°æ®ï¼Œä¹Ÿä¸ä¼šç»ˆæ­¢çš„ Observableã€‚</li>
<li>errorï¼šåˆ›å»ºä¸€ä¸ªç«‹å³å‘å°„é”™è¯¯çš„ Observableã€‚</li>
<li>emptyï¼šåˆ›å»ºä¸€ä¸ªç«‹å³å®Œæˆä½†ä¸å‘å°„ä»»ä½•æ•°æ®çš„ Observableã€‚</li>
</ul>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// Observable.never()</span>
        <span class="hljs-comment">// Observable.error(new RuntimeException("erroräº‹ä»¶"))</span>
        Observable.empty()
                .subscribe(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Observer</span>() {
                    <span class="hljs-meta">@Override</span>
                    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onSubscribe</span><span class="hljs-params">(Disposable d)</span> {
                        System.out.println(<span class="hljs-string">"å¼€å§‹è®¢é˜…"</span>);
                    }

                    <span class="hljs-meta">@Override</span>
                    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onNext</span><span class="hljs-params">(Object s)</span> {
                        System.out.println(<span class="hljs-string">"è§‚å¯Ÿè€…ï¼š"</span> + s);
                    }

                    <span class="hljs-meta">@Override</span>
                    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onError</span><span class="hljs-params">(Throwable e)</span> {
                        System.out.println(<span class="hljs-string">"å‡ºç°å¼‚å¸¸ï¼š"</span> + e.getMessage());
                    }

                    <span class="hljs-meta">@Override</span>
                    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onComplete</span><span class="hljs-params">()</span> {
                        System.out.println(<span class="hljs-string">"è®¢é˜…ç»“æŸ"</span>);
                    }
                });
    }
</code></pre>
<h3 data-id="heading-22">è½¬æ¢æ“ä½œç¬¦</h3>
<p>è½¬æ¢æ“ä½œç¬¦æ˜¯ RxJava ä¸­ç”¨äºå¯¹ Observable å‘å°„çš„æ•°æ®è¿›è¡Œå˜æ¢ã€å¤„ç†ã€ç»„åˆçš„æ“ä½œç¬¦ï¼Œç”¨äºå®ç°æ•°æ®æµçš„å„ç§è½¬æ¢é€»è¾‘ã€‚</p>
<h4 data-id="heading-23">map</h4>
<p>map() æ˜¯ RxJava ä¸­æœ€åŸºæœ¬ã€æœ€å¸¸ç”¨çš„è½¬æ¢æ“ä½œç¬¦ï¼Œç”¨äºå¯¹ Observable å‘å°„çš„æ¯ä¸ªå…ƒç´ è¿›è¡Œä¸€å¯¹ä¸€è½¬æ¢ã€‚</p>
<p>ç®€å•æ¥è¯´ï¼šè¾“å…¥ä¸€ä¸ªå€¼ï¼Œè¾“å‡ºå¦ä¸€ä¸ªå€¼ï¼ˆ1è¿›1å‡ºï¼‰ã€‚</p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        Observable.just(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>)
                .map(number -&gt; <span class="hljs-string">"æ•°å­—: "</span> + number)
                .subscribe(text -&gt; System.out.println(text));
    }
</code></pre>
<h4 data-id="heading-24">flatMap</h4>
<p>flatMap() ç”¨äºå°†æ¯ä¸ªå‘å°„é¡¹è½¬æ¢ä¸º Observableï¼Œç„¶å"æ‰å¹³åŒ–"åˆå¹¶æˆä¸€ä¸ª Observableã€‚
ç®€å•æ¥è¯´ï¼šè¾“å…¥ä¸€ä¸ªå€¼ï¼Œå¯ä»¥è¾“å‡ºä»»æ„å¤šä¸ªå€¼ï¼ˆ1è¿›Nå‡ºï¼‰ã€‚</p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        Observable.just(<span class="hljs-string">"A"</span>, <span class="hljs-string">"B"</span>)
                .map(letter -&gt; letter + <span class="hljs-string">"1"</span>)
                .subscribe(result -&gt; System.out.print(result + <span class="hljs-string">" "</span>));
        <span class="hljs-comment">// è¾“å‡º: A1 B1</span>

        <span class="hljs-comment">// flatMap: 1å¯¹å¤šè½¬æ¢</span>
        Observable.just(<span class="hljs-string">"A"</span>, <span class="hljs-string">"B"</span>)
                .flatMap(letter -&gt;
                        Observable.just(letter + <span class="hljs-string">"1"</span>, letter + <span class="hljs-string">"2"</span>, letter + <span class="hljs-string">"3"</span>)
                )
                .subscribe(result -&gt; System.out.print(result + <span class="hljs-string">" "</span>));
        <span class="hljs-comment">// è¾“å‡º: A1 A2 A3 B1 B2 B3</span>
    }
</code></pre>
<h4 data-id="heading-25">concatMap</h4>
<p>concatMap() æ˜¯ flatMap() çš„é¡ºåºä¿æŒç‰ˆæœ¬ï¼Œå®ƒä¼šä¸¥æ ¼æŒ‰ç…§åŸå§‹é¡ºåºä¾æ¬¡å¤„ç†æ¯ä¸ªå…ƒç´ ï¼Œåªæœ‰å‰ä¸€ä¸ªå…ƒç´ çš„ Observable å®Œæˆä¹‹åï¼Œæ‰ä¼šå¤„ç†ä¸‹ä¸€ä¸ªã€‚
ç®€å•æ¥è¯´ï¼šflatMapæ˜¯å¹¶å‘å¤„ç†ï¼ŒconcatMapæ˜¯ä¸²è¡Œå¤„ç†ã€‚</p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException {
        Observable.just(<span class="hljs-number">3</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>)  <span class="hljs-comment">// æ³¨æ„é¡ºåºï¼š3, 1, 2</span>
                .flatMap(num -&gt;
                        Observable.just(num)
                                .delay(num, TimeUnit.SECONDS)  <span class="hljs-comment">// å»¶è¿Ÿå¯¹åº”çš„ç§’æ•°</span>
                )
                .subscribe(num -&gt; System.out.println(<span class="hljs-string">"flatMap: "</span> + num));
        <span class="hljs-comment">// è¾“å‡ºé¡ºåºï¼š1 2 3ï¼ˆè°å…ˆå®Œæˆè°å…ˆè¾“å‡ºï¼‰</span>

        Observable.just(<span class="hljs-number">3</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>)
                .concatMap(num -&gt;
                        Observable.just(num)
                                .delay(num, TimeUnit.SECONDS)
                )
                .subscribe(num -&gt; System.out.println(<span class="hljs-string">"concatMap: "</span> + num));
        <span class="hljs-comment">// è¾“å‡ºé¡ºåºï¼š3 1 2ï¼ˆä¸¥æ ¼ä¿æŒåŸå§‹é¡ºåºï¼‰</span>
        System.in.read();
    }
</code></pre>
<h4 data-id="heading-26">buffer</h4>
<p>buffer() ç”¨äºå°† Observable å‘å°„çš„æ•°æ®é¡¹æ”¶é›†åˆ°é›†åˆä¸­ï¼Œç„¶åä¸€æ¬¡æ€§å‘å°„è¿™äº›é›†åˆï¼Œè€Œä¸æ˜¯å•ä¸ªå‘å°„ã€‚
ç®€å•æ¥è¯´ï¼šæŠŠå¤šä¸ªå•ç‹¬çš„æ•°æ®"æ‰“åŒ…"æˆä¸€æ‰¹ä¸€èµ·å‘å°„ã€‚</p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        Observable.range(<span class="hljs-number">1</span>, <span class="hljs-number">10</span>)  <span class="hljs-comment">// å‘å°„1-10</span>
                .buffer(<span class="hljs-number">3</span>)           <span class="hljs-comment">// æ¯3ä¸ªä¸€æ‰¹</span>
                .subscribe(batch -&gt;
                        System.out.println(<span class="hljs-string">"æ‰¹æ¬¡: "</span> + batch)
                );

        <span class="hljs-comment">// è¾“å‡ºï¼š</span>
        <span class="hljs-comment">// æ‰¹æ¬¡: [1, 2, 3]</span>
        <span class="hljs-comment">// æ‰¹æ¬¡: [2, 4, 6]</span>
        <span class="hljs-comment">// æ‰¹æ¬¡: [7, 8, 9]</span>
        <span class="hljs-comment">// æ‰¹æ¬¡: [10]           â† æœ€åä¸€æ‰¹ä¸è¶³3ä¸ª</span>
    }
</code></pre>
<h4 data-id="heading-27">scan</h4>
<p>scan() ç”¨äºå¯¹ Observable å‘å°„çš„æ•°æ®è¿›è¡Œç´¯ç§¯è®¡ç®—ï¼Œå¹¶å‘å°„æ¯ä¸ªä¸­é—´ç»“æœã€‚
ç®€å•æ¥è¯´ï¼šåƒ Excel é‡Œçš„ç´¯è®¡æ±‚å’Œï¼Œæ¯æ¥ä¸€ä¸ªæ–°æ•°æ®ï¼Œå°±ä¸å‰ä¸€ä¸ªç»“æœè®¡ç®—ï¼Œå¹¶è¾“å‡ºå½“å‰ç´¯è®¡å€¼ã€‚</p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        Observable.just(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>)
                .scan(Integer::sum)
                .subscribe(result -&gt; System.out.print(result + <span class="hljs-string">" "</span>));

        <span class="hljs-comment">// è¾“å‡ºï¼š</span>
        <span class="hljs-comment">// 1 3 6 10 15</span>

        <span class="hljs-comment">// è®¡ç®—è¿‡ç¨‹ï¼š</span>
        <span class="hljs-comment">// åˆå§‹ï¼šæ— ç§å­å€¼ï¼Œç¬¬ä¸€æ¬¡ç›´æ¥å‘å°„1</span>
        <span class="hljs-comment">// 1 + 2 = 3</span>
        <span class="hljs-comment">// 3 + 3 = 6</span>
        <span class="hljs-comment">// 6 + 4 = 10</span>
        <span class="hljs-comment">// 10 + 5 = 15</span>
    }
</code></pre>
<h4 data-id="heading-28">window</h4>
<p>window() ç”¨äºå°† Observable å‘å°„çš„æ•°æ®åˆ†ç»„åˆ°å¤šä¸ªå­ Observable ä¸­ï¼Œç„¶åå‘å°„è¿™äº›å­ Observable è€Œä¸æ˜¯å•ä¸ªæ•°æ®é¡¹ã€‚
ç®€å•æ¥è¯´ï¼šåˆ›å»ºå¤šä¸ª"çª—å£"ï¼Œæ¯ä¸ªçª—å£æ˜¯ä¸€ä¸ª Observableï¼Œå°†æ•°æ®åˆ†é…åˆ°ä¸åŒçª—å£ä¸­ã€‚</p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// buffer: ç›´æ¥å‘å°„List</span>
        Observable.range(<span class="hljs-number">1</span>, <span class="hljs-number">5</span>)
                .buffer(<span class="hljs-number">2</span>)
                .subscribe(list -&gt;
                        System.out.println(<span class="hljs-string">"bufferè¾“å‡ºList: "</span> + list)
                );

        <span class="hljs-comment">// window: å‘å°„Observableï¼Œéœ€è¦è¿›ä¸€æ­¥å¤„ç†</span>
        Observable.range(<span class="hljs-number">1</span>, <span class="hljs-number">5</span>)
                .window(<span class="hljs-number">2</span>)
                .flatMapSingle(Observable::toList  <span class="hljs-comment">// éœ€è¦æ‰‹åŠ¨è½¬æ¢</span>
                )
                .subscribe(list -&gt;
                        System.out.println(<span class="hljs-string">"windowè¾“å‡ºList: "</span> + list)
                );

        <span class="hljs-comment">// ä¸¤è€…è¾“å‡ºç›¸åŒï¼Œä½†windowæ›´çµæ´»ï¼š</span>
        <span class="hljs-comment">// è¾“å‡ºï¼š</span>
        <span class="hljs-comment">// [1, 2]</span>
        <span class="hljs-comment">// [3, 4]</span>
        <span class="hljs-comment">// [5]</span>
    }
</code></pre>
<p>window å’Œ buffer çš„åŒºåˆ«å°±æ˜¯ï¼š</p>
<ul>
<li>window è¿”å›çš„æ˜¯è¢«è§‚å¯Ÿè€…çš„é›†åˆã€‚</li>
<li>buffer è¿”å›çš„æ˜¯æ•°æ®çš„é›†åˆã€‚</li>
</ul>
<h3 data-id="heading-29">è¿‡æ»¤æ“ä½œç¬¦</h3>
<p>è¿‡æ»¤æ“ä½œç¬¦ç”¨äºä»æ•°æ®æµä¸­ç­›é€‰å‡ºéœ€è¦çš„æ•°æ®ï¼Œè¿‡æ»¤æ‰ä¸éœ€è¦çš„æ•°æ®ã€‚</p>
<h4 data-id="heading-30">filter</h4>
<p>filter() æ˜¯ RxJava ä¸­æœ€åŸºæœ¬çš„è¿‡æ»¤æ“ä½œç¬¦ï¼Œç”¨äºæ ¹æ®æŒ‡å®šæ¡ä»¶ç­›é€‰ Observable å‘å°„çš„æ•°æ®ï¼Œåªè®©æ»¡è¶³æ¡ä»¶çš„æ•°æ®é€šè¿‡ï¼Œä¸æ»¡è¶³æ¡ä»¶çš„è¢«è¿‡æ»¤æ‰ã€‚</p>
<p>å¯¹æ¯ä¸ªæ•°æ®é¡¹è¿›è¡Œåˆ¤æ–­ï¼Œè¿”å› trueåˆ™é€šè¿‡ï¼Œè¿”å› falseåˆ™ä¸¢å¼ƒã€‚</p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        Observable.range(<span class="hljs-number">1</span>, <span class="hljs-number">10</span>)  <span class="hljs-comment">// å‘å°„1-10</span>
                .filter(number -&gt; number % <span class="hljs-number">2</span> == <span class="hljs-number">0</span>)  <span class="hljs-comment">// åªä¿ç•™å¶æ•°</span>
                .subscribe(even -&gt; System.out.print(even + <span class="hljs-string">" "</span>));

        <span class="hljs-comment">// è¾“å‡ºï¼š</span>
        <span class="hljs-comment">// 2 4 6 8 10</span>
    }
</code></pre>
<h4 data-id="heading-31">ofType</h4>
<p>ofType() æ˜¯ä¸€ä¸ªç±»å‹è¿‡æ»¤æ“ä½œç¬¦ï¼Œç”¨äºè¿‡æ»¤ Observable å‘å°„çš„æ•°æ®ï¼Œåªä¿ç•™æŒ‡å®šç±»å‹çš„æ•°æ®ï¼Œå…¶ä»–ç±»å‹çš„æ•°æ®ä¼šè¢«è¿‡æ»¤æ‰ã€‚
æ ¸å¿ƒæ€æƒ³ï¼šåªè®©æŒ‡å®šç±»å‹çš„æ•°æ®é€šè¿‡ï¼Œç›¸å½“äº filter(item -&gt; item instanceof TargetType) çš„ç®€åŒ–ç‰ˆã€‚</p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        Observable&lt;Object&gt; mixedObservable = Observable.just(
                <span class="hljs-string">"Hello"</span>,      <span class="hljs-comment">// String</span>
                <span class="hljs-number">123</span>,          <span class="hljs-comment">// Integer</span>
                <span class="hljs-number">45.6</span>,         <span class="hljs-comment">// Double</span>
                <span class="hljs-string">"World"</span>,      <span class="hljs-comment">// String</span>
                <span class="hljs-literal">true</span>,         <span class="hljs-comment">// Boolean</span>
                <span class="hljs-number">789</span>           <span class="hljs-comment">// Integer</span>
        );

        <span class="hljs-comment">// åªä¿ç•™å­—ç¬¦ä¸²ç±»å‹</span>
        mixedObservable
                .ofType(String.class)
                .subscribe(str -&gt;
                        System.out.println(<span class="hljs-string">"å­—ç¬¦ä¸²: "</span> + str)
                );

        <span class="hljs-comment">// è¾“å‡ºï¼š</span>
        <span class="hljs-comment">// å­—ç¬¦ä¸²: Hello</span>
        <span class="hljs-comment">// å­—ç¬¦ä¸²: World</span>
    }
</code></pre>
<h4 data-id="heading-32">distinct</h4>
<p>distinct() ç”¨äºè¿‡æ»¤ Observable ä¸­é‡å¤çš„æ•°æ®é¡¹ï¼Œç¡®ä¿æ¯ä¸ªæ•°æ®é¡¹åªå‘å°„ä¸€æ¬¡ã€‚
æ ¸å¿ƒæ€æƒ³ï¼šå»é‡ï¼Œä¿è¯å‘å°„çš„æ•°æ®åºåˆ—ä¸­ä¸åŒ…å«é‡å¤å…ƒç´ ã€‚</p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        Observable.just(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">3</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">5</span>, <span class="hljs-number">1</span>)
                .distinct()
                .subscribe(num -&gt; System.out.print(num + <span class="hljs-string">" "</span>));

        <span class="hljs-comment">// è¾“å‡ºï¼š</span>
        <span class="hljs-comment">// 1 2 3 4 5</span>
        <span class="hljs-comment">// æ³¨æ„ï¼šæœ€åçš„ 1 ä¹Ÿè¢«å»é‡äº†</span>
    }
</code></pre>
<h4 data-id="heading-33">skip &amp; skipLast</h4>
<ul>
<li>skip(n)ï¼šè·³è¿‡ Observable å‘å°„çš„å‰ n ä¸ªæ•°æ®é¡¹ã€‚</li>
<li>skipLast(n)ï¼šè·³è¿‡ Observable å‘å°„çš„å n ä¸ªæ•°æ®é¡¹ã€‚</li>
</ul>
<p>æ ¸å¿ƒæ€æƒ³ï¼šskipæ˜¯"è·³è¿‡å¼€å¤´"ï¼ŒskipLastæ˜¯"è·³è¿‡ç»“å°¾"ã€‚</p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        Observable.create(emitter -&gt; {
                    emitter.onNext(<span class="hljs-number">1</span>);
                    emitter.onNext(<span class="hljs-number">2</span>);
                    emitter.onError(<span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"ä¸­é—´å‡ºé”™"</span>));
                })
                .skipLast(<span class="hljs-number">1</span>) 
                .subscribe(
                        num -&gt; System.out.println(<span class="hljs-string">"æ•°æ®: "</span> + num),
                        error -&gt; System.err.println(<span class="hljs-string">"é”™è¯¯: "</span> + error.getMessage()),
                        () -&gt; System.out.println(<span class="hljs-string">"å®Œæˆ"</span>)
                );

        <span class="hljs-comment">// è¾“å‡ºï¼š</span>
        <span class="hljs-comment">// æ•°æ®: 1</span>
        <span class="hljs-comment">// é”™è¯¯: ä¸­é—´å‡ºé”™</span>
    }
</code></pre>
<h4 data-id="heading-34">distinctUntilChanged</h4>
<p>distinctUntilChanged() ç”¨äºè¿‡æ»¤æ‰è¿ç»­é‡å¤çš„æ•°æ®ï¼Œåªä¿ç•™å‘ç”Ÿå˜åŒ–çš„æ•°æ®ã€‚
æ ¸å¿ƒæ€æƒ³ï¼šå»é‡ï¼Œä½†åªå»é‡è¿ç»­ç›¸åŒçš„å€¼ï¼Œä¸è¿ç»­å‡ºç°çš„ç›¸åŒå€¼ä¼šè¢«ä¿ç•™ã€‚</p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        Observable.just(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">3</span>, <span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>)
                .distinctUntilChanged()
                .subscribe(num -&gt; System.out.print(num + <span class="hljs-string">" "</span>));

        <span class="hljs-comment">// è¾“å‡ºï¼š</span>
        <span class="hljs-comment">// 1 2 1 3 2 1</span>

        <span class="hljs-comment">// è§£é‡Šï¼š</span>
        <span class="hljs-comment">// åŸå§‹: 1, 1, 2, 2, 1, 3, 3, 2, 2, 1</span>
        <span class="hljs-comment">// å»é‡è¿ç»­é‡å¤å: 1, 2, 1, 3, 2, 1</span>
        <span class="hljs-comment">// æ³¨æ„ï¼šä¸­é—´çš„ 1 è™½ç„¶å‡ºç°è¿‡ï¼Œä½†å› ä¸ºä¸è¿ç»­ï¼Œæ‰€ä»¥ä¿ç•™äº†</span>
    }
</code></pre>
<h4 data-id="heading-35">take</h4>
<p>take() ç”¨äºä» Observable çš„å¼€å¤´å–å‡ºæŒ‡å®šæ•°é‡çš„æ•°æ®ï¼Œç„¶åå®Œæˆã€‚
æ ¸å¿ƒæ€æƒ³ï¼šåªå–å‰ N ä¸ªæ•°æ®ï¼Œä¹‹åçš„æ•°æ®å¿½ç•¥ï¼ŒObservable æå‰å®Œæˆã€‚</p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        Observable.range(<span class="hljs-number">1</span>, <span class="hljs-number">10</span>)  <span class="hljs-comment">// å‘å°„1-10</span>
                .take(<span class="hljs-number">3</span>)             <span class="hljs-comment">// åªå–å‰3ä¸ª</span>
                .subscribe(
                        num -&gt; System.out.print(num + <span class="hljs-string">" "</span>),
                        error -&gt; {
                        },
                        () -&gt; System.out.println(<span class="hljs-string">"\nå·²å®Œæˆ"</span>)
                );

        <span class="hljs-comment">// è¾“å‡ºï¼š</span>
        <span class="hljs-comment">// 1 2 3</span>
        <span class="hljs-comment">// å·²å®Œæˆ</span>
        <span class="hljs-comment">// æ³¨æ„ï¼š4-10 ä¸ä¼šè¢«å‘å°„</span>
    }
</code></pre>
<h4 data-id="heading-36">firstElement &amp; lastElement &amp; elementAt</h4>
<p>è¿™ä¸‰ä¸ªæ“ä½œç¬¦éƒ½ç”¨äºä» Observable ä¸­å–å‡ºç‰¹å®šä½ç½®çš„å•ä¸ªå…ƒç´ ï¼š</p>
<ul>
<li><strong><code>firstElement()</code></strong>ï¼šå–ç¬¬ä¸€ä¸ªå…ƒç´ </li>
<li><strong><code>lastElement()</code></strong>ï¼šå–æœ€åä¸€ä¸ªå…ƒç´ </li>
<li><strong><code>elementAt(index)</code></strong>ï¼šå–æŒ‡å®šç´¢å¼•ä½ç½®çš„å…ƒç´ </li>
</ul>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        Observable.range(<span class="hljs-number">1</span>, <span class="hljs-number">5</span>)  <span class="hljs-comment">// 1,2,3,4,5</span>
                .firstElement()      <span class="hljs-comment">// å–ç¬¬ä¸€ä¸ª</span>
                .subscribe(
                        num -&gt; System.out.println(<span class="hljs-string">"ç¬¬ä¸€ä¸ª: "</span> + num),
                        error -&gt; {
                        },
                        () -&gt; System.out.println(<span class="hljs-string">"æ²¡æœ‰ç¬¬ä¸€ä¸ªå…ƒç´ "</span>)
                );

        <span class="hljs-comment">// è¾“å‡ºï¼š</span>
        <span class="hljs-comment">// ç¬¬ä¸€ä¸ª: 1</span>
    }
</code></pre>
<h3 data-id="heading-37">ç»„åˆæ“ä½œç¬¦</h3>
<p>ç»„åˆæ“ä½œç¬¦æ˜¯ RxJava ä¸­ç”¨äºå°†å¤šä¸ª Observable ç»„åˆæˆä¸€ä¸ª Observable çš„æ“ä½œç¬¦ã€‚å®ƒä»¬å¤„ç†å¤šä¸ªæ•°æ®æµä¹‹é—´çš„å…³ç³»ï¼Œå®ç°æµçš„åˆå¹¶ã€è¿æ¥ã€ç»„åˆç­‰æ“ä½œã€‚</p>
<h4 data-id="heading-38">concat</h4>
<p>concat() ç”¨äºé¡ºåºè¿æ¥å¤šä¸ª Observableï¼Œå‰ä¸€ä¸ª Observable å®Œæˆåï¼Œæ‰å¼€å§‹å‘å°„ä¸‹ä¸€ä¸ª Observable çš„æ•°æ®ã€‚
æ ¸å¿ƒæ€æƒ³ï¼šä¸²è¡Œè¿æ¥ï¼Œä¿æŒé¡ºåºï¼Œåƒæ’é˜Ÿä¸€æ ·ä¸€ä¸ªæ¥ä¸€ä¸ªã€‚</p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        Observable&lt;String&gt; first = Observable.just(<span class="hljs-string">"A"</span>, <span class="hljs-string">"B"</span>, <span class="hljs-string">"C"</span>);
        Observable&lt;String&gt; second = Observable.just(<span class="hljs-string">"D"</span>, <span class="hljs-string">"E"</span>, <span class="hljs-string">"F"</span>);
        Observable&lt;String&gt; third = Observable.just(<span class="hljs-string">"G"</span>, <span class="hljs-string">"H"</span>);

        Observable.concat(first, second, third)
                .subscribe(
                        letter -&gt; System.out.print(letter + <span class="hljs-string">" "</span>),
                        error -&gt; {
                        },
                        () -&gt; System.out.println(<span class="hljs-string">"\nå…¨éƒ¨å®Œæˆ"</span>)
                );

        <span class="hljs-comment">// è¾“å‡ºï¼š</span>
        <span class="hljs-comment">// A B C D E F G H</span>
        <span class="hljs-comment">// å…¨éƒ¨å®Œæˆ</span>
        <span class="hljs-comment">// ä¸¥æ ¼æŒ‰ç…§ first â†’ second â†’ third çš„é¡ºåº</span>
    }
</code></pre>
<h4 data-id="heading-39">concatArray</h4>
<p>concatArray() æ˜¯ concat() çš„æ•°ç»„ç‰ˆæœ¬ï¼Œç”¨äºé¡ºåºè¿æ¥å¤šä¸ª Observableï¼ˆä»¥æ•°ç»„å½¢å¼æä¾›ï¼‰ï¼ŒåŠŸèƒ½ä¸ concat() å®Œå…¨ç›¸åŒï¼Œåªæ˜¯å‚æ•°å½¢å¼ä¸åŒã€‚</p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// åˆ›å»ºObservableæ•°ç»„</span>
        Observable&lt;String&gt;[] observables = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Observable</span>[]{
                Observable.just(<span class="hljs-string">"A"</span>, <span class="hljs-string">"B"</span>),
                Observable.just(<span class="hljs-string">"C"</span>, <span class="hljs-string">"D"</span>, <span class="hljs-string">"E"</span>),
                Observable.just(<span class="hljs-string">"F"</span>, <span class="hljs-string">"G"</span>)
        };

        <span class="hljs-comment">// ä½¿ç”¨ concatArray è¿æ¥</span>
        Observable.concatArray(observables)
                .subscribe(letter -&gt; System.out.print(letter + <span class="hljs-string">" "</span>));

        <span class="hljs-comment">// è¾“å‡ºï¼š</span>
        <span class="hljs-comment">// A B C D E F G</span>
        <span class="hljs-comment">// é¡ºåºè¿æ¥æ‰€æœ‰æ•°ç»„ä¸­çš„Observable</span>
    }
</code></pre>
<h4 data-id="heading-40">merge</h4>
<p>merge() ç”¨äºå¹¶å‘åˆå¹¶å¤šä¸ª Observableï¼Œå°†æ‰€æœ‰æ•°æ®æŒ‰å®é™…åˆ°è¾¾æ—¶é—´é¡ºåºæ··åˆå‘å°„ã€‚</p>
<p>æ ¸å¿ƒæ€æƒ³ï¼šå¹¶è¡Œæ‰§è¡Œï¼Œè°å…ˆåˆ°è°å…ˆå‡ºï¼Œåƒå¤šè½¦é“åˆå¹¶æˆå•è½¦é“ã€‚</p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> InterruptedException {
        Observable&lt;Long&gt; fast = Observable.interval(<span class="hljs-number">100</span>, TimeUnit.MILLISECONDS)
                .map(i -&gt; i + <span class="hljs-number">100</span>)  <span class="hljs-comment">// 100, 101, 102...</span>
                .take(<span class="hljs-number">3</span>);
        Observable&lt;Long&gt; slow = Observable.interval(<span class="hljs-number">200</span>, TimeUnit.MILLISECONDS)
                .map(i -&gt; i + <span class="hljs-number">200</span>)  <span class="hljs-comment">// 200, 201, 202...</span>
                .take(<span class="hljs-number">3</span>);

        Observable.merge(fast, slow)
                .subscribe(num -&gt; System.out.print(num + <span class="hljs-string">" "</span>));

        Thread.sleep(<span class="hljs-number">1000</span>);

        <span class="hljs-comment">// è¾“å‡ºï¼ˆå®é™…æ—¶é—´é¡ºåºï¼‰ï¼š</span>
        <span class="hljs-comment">// 100 101 200 102 201 202</span>
        <span class="hljs-comment">// è§£é‡Šï¼š</span>
        <span class="hljs-comment">// 100ms: fastå‘å°„100</span>
        <span class="hljs-comment">// 200ms: slowå‘å°„200, fastå‘å°„101</span>
        <span class="hljs-comment">// 300ms: fastå‘å°„102</span>
        <span class="hljs-comment">// 400ms: slowå‘å°„201</span>
        <span class="hljs-comment">// 600ms: slowå‘å°„202</span>
    }
</code></pre>
<h4 data-id="heading-41">zip</h4>
<p>zip() ç”¨äºå°†å¤šä¸ª Observable çš„æ•°æ®æŒ‰ç´¢å¼•é…å¯¹ç»„åˆï¼Œåƒæ‹‰é“¾ä¸€æ ·ä¸€ä¸€å¯¹åº”ã€‚</p>
<p>æ ¸å¿ƒæ€æƒ³ï¼šç­‰å¾…æ‰€æœ‰Observableéƒ½æœ‰æ•°æ®ï¼Œç„¶åé…å¯¹å‘å°„ï¼Œä»¥æœ€çŸ­çš„Observableä¸ºå‡†ã€‚</p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        Observable&lt;String&gt; letters = Observable.just(<span class="hljs-string">"A"</span>, <span class="hljs-string">"B"</span>, <span class="hljs-string">"C"</span>, <span class="hljs-string">"D"</span>);
        Observable&lt;Integer&gt; numbers = Observable.just(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>);

        Observable.zip(
                        letters,
                        numbers,
                        (letter, number) -&gt; letter + number
                )
                .subscribe(result -&gt; System.out.print(result + <span class="hljs-string">" "</span>));

        <span class="hljs-comment">// è¾“å‡ºï¼š</span>
        <span class="hljs-comment">// A1 B2 C3</span>
        <span class="hljs-comment">// æ³¨æ„ï¼šD è¢«ä¸¢å¼ƒäº†ï¼Œå› ä¸º numbers åªæœ‰3ä¸ª</span>

    }
</code></pre>
<h4 data-id="heading-42">startWith &amp; startWithArray</h4>
<p>è¿™ä¸¤ä¸ªæ“ä½œç¬¦éƒ½ç”¨äºåœ¨ Observable å‘å°„æ•°æ®ä¹‹å‰ï¼Œå…ˆå‘å°„ä¸€äº›æŒ‡å®šçš„æ•°æ®ï¼Œå°±åƒç»™æ•°æ®æµæ·»åŠ "å¼€åœºç™½"ã€‚</p>
<ul>
<li>startWith()ï¼šæ·»åŠ å•ä¸ªå…ƒç´ æˆ– Observableã€‚</li>
<li>startWithArray()ï¼šæ·»åŠ å¤šä¸ªå…ƒç´ ï¼ˆå¯å˜å‚æ•°ï¼‰ã€‚</li>
</ul>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// startWith: æ·»åŠ å•ä¸ªå…ƒç´ </span>
        Observable.just(<span class="hljs-string">"B"</span>, <span class="hljs-string">"C"</span>)
                .startWith(<span class="hljs-string">"A"</span>)
                .subscribe(letter -&gt; System.out.print(<span class="hljs-string">"startWith: "</span> + letter + <span class="hljs-string">" "</span>));

        <span class="hljs-comment">// startWithArray: æ·»åŠ å¤šä¸ªå…ƒç´ </span>
        Observable.just(<span class="hljs-string">"D"</span>, <span class="hljs-string">"E"</span>)
                .startWithArray(<span class="hljs-string">"A"</span>, <span class="hljs-string">"B"</span>, <span class="hljs-string">"C"</span>)
                .subscribe(letter -&gt; System.out.print(<span class="hljs-string">"startWithArray: "</span> + letter + <span class="hljs-string">" "</span>));

        <span class="hljs-comment">// è¾“å‡ºï¼š</span>
        <span class="hljs-comment">// startWith: A B C</span>
        <span class="hljs-comment">// startWithArray: A B C D E</span>
    }
</code></pre>
<h4 data-id="heading-43">count</h4>
<p>count() ç”¨äºç»Ÿè®¡ Observable å‘å°„çš„å…ƒç´ æ•°é‡ï¼Œè¿”å›ä¸€ä¸ªå‘å°„å•ä¸ªè®¡æ•°å€¼çš„ Observableã€‚</p>
<p>æ ¸å¿ƒæ€æƒ³ï¼šæ•°ä¸€æ•°å‘å°„äº†å¤šå°‘ä¸ªå…ƒç´ ã€‚</p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        Observable.just(<span class="hljs-string">"A"</span>, <span class="hljs-string">"B"</span>, <span class="hljs-string">"C"</span>, <span class="hljs-string">"D"</span>, <span class="hljs-string">"E"</span>)
                .count()
                .subscribe(count -&gt;
                        System.out.println(<span class="hljs-string">"å…ƒç´ æ•°é‡: "</span> + count)
                );

        <span class="hljs-comment">// è¾“å‡ºï¼š</span>
        <span class="hljs-comment">// å…ƒç´ æ•°é‡: 5</span>
    }
</code></pre>
<h3 data-id="heading-44">åŠŸèƒ½æ“ä½œç¬¦</h3>
<p>åŠŸèƒ½æ“ä½œç¬¦æ˜¯ RxJava ä¸­ç”¨äºè¾…åŠ©è°ƒè¯•ã€ç›‘æ§ã€é”™è¯¯å¤„ç†ã€èµ„æºç®¡ç†å’Œå·¥å…·æ€§åŠŸèƒ½çš„æ“ä½œç¬¦ã€‚å®ƒä»¬ä¸ç›´æ¥å¤„ç†æ•°æ®æµï¼Œè€Œæ˜¯æä¾›è¾…åŠ©åŠŸèƒ½ã€‚</p>
<h4 data-id="heading-45">delay</h4>
<p>delay() ç”¨äºå»¶è¿Ÿå‘å°„ Observable çš„æ•°æ®ï¼Œå¯ä»¥å»¶è¿Ÿæ•´ä¸ªæµï¼Œä¹Ÿå¯ä»¥å»¶è¿Ÿæ¯ä¸ªå…ƒç´ ã€‚
æ ¸å¿ƒæ€æƒ³ï¼šè®©æ•°æ®"ç­‰ä¸€ä¼šå„¿"å†å‘å°„ã€‚</p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> InterruptedException {
        System.out.println(<span class="hljs-string">"å¼€å§‹æ—¶é—´: "</span> + System.currentTimeMillis());

        Observable.just(<span class="hljs-string">"A"</span>, <span class="hljs-string">"B"</span>, <span class="hljs-string">"C"</span>)
                .delay(<span class="hljs-number">1</span>, TimeUnit.SECONDS)  <span class="hljs-comment">// å»¶è¿Ÿ1ç§’</span>
                .subscribe(item -&gt;
                        System.out.println(System.currentTimeMillis() + <span class="hljs-string">": "</span> + item)
                );

        Thread.sleep(<span class="hljs-number">2000</span>);

        <span class="hljs-comment">// è¾“å‡ºï¼š</span>
        <span class="hljs-comment">// å¼€å§‹æ—¶é—´: 1766569373459</span>
        <span class="hljs-comment">// 1766569374574: A</span>
        <span class="hljs-comment">// 1766569374580: B</span>
        <span class="hljs-comment">// 1766569374580: C</span>
        <span class="hljs-comment">// æ³¨æ„ï¼šA,B,Cå‡ ä¹åŒæ—¶å‘å°„ï¼Œéƒ½å»¶è¿Ÿäº†1ç§’</span>
    }
</code></pre>
<h4 data-id="heading-46">subscribeOn &amp; observerOn</h4>
<p>è¿™ä¸¤ä¸ªæ“ä½œç¬¦ç”¨äºæ§åˆ¶ Observable åœ¨å“ªä¸ªçº¿ç¨‹ä¸Šæ‰§è¡Œå’Œè§‚å¯Ÿï¼Œæ˜¯ RxJava çº¿ç¨‹è°ƒåº¦çš„æ ¸å¿ƒã€‚</p>
<ul>
<li><strong><code>subscribeOn()</code></strong>ï¼šæŒ‡å®š Observable æ‰§è¡Œåœ¨å“ªä¸ªçº¿ç¨‹</li>
<li><strong><code>observeOn()</code></strong>ï¼šæŒ‡å®š Observer è§‚å¯Ÿåœ¨å“ªä¸ªçº¿ç¨‹</li>
</ul>
<p>subscribeOn ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> InterruptedException {
        Observable.create(emitter -&gt; {
                    System.out.println(<span class="hljs-string">"æ‰§è¡Œçº¿ç¨‹: "</span> + Thread.currentThread().getName());
                    emitter.onNext(<span class="hljs-string">"æ•°æ®"</span>);
                    emitter.onComplete();
                })
                .subscribeOn(Schedulers.io())  <span class="hljs-comment">// åœ¨IOçº¿ç¨‹æ‰§è¡Œ</span>
                .subscribe(data -&gt;
                        System.out.println(<span class="hljs-string">"æ¥æ”¶çº¿ç¨‹: "</span> + Thread.currentThread().getName())
                );

        Thread.sleep(<span class="hljs-number">1000</span>);

        <span class="hljs-comment">// è¾“å‡ºï¼š</span>
        <span class="hljs-comment">// æ‰§è¡Œçº¿ç¨‹: RxCachedThreadScheduler-1</span>
        <span class="hljs-comment">// æ¥æ”¶çº¿ç¨‹: RxCachedThreadScheduler-1</span>
        <span class="hljs-comment">// æ³¨æ„ï¼šæ‰§è¡Œå’Œæ¥æ”¶éƒ½åœ¨IOçº¿ç¨‹</span>
    }
</code></pre>
<p>observeOn ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> InterruptedException {
        Observable.create(emitter -&gt; {
                    System.out.println(<span class="hljs-string">"æ‰§è¡Œçº¿ç¨‹: "</span> + Thread.currentThread().getName());
                    emitter.onNext(<span class="hljs-string">"æ•°æ®"</span>);
                    emitter.onComplete();
                })
                .observeOn(Schedulers.io())  <span class="hljs-comment">// åœ¨IOçº¿ç¨‹æ¥æ”¶</span>
                .subscribe(data -&gt;
                        System.out.println(<span class="hljs-string">"æ¥æ”¶çº¿ç¨‹: "</span> + Thread.currentThread().getName())
                );

        Thread.sleep(<span class="hljs-number">1000</span>);

        <span class="hljs-comment">// è¾“å‡ºï¼š</span>
        <span class="hljs-comment">// æ‰§è¡Œçº¿ç¨‹: main</span>
        <span class="hljs-comment">// æ¥æ”¶çº¿ç¨‹: RxCachedThreadScheduler-1</span>
        <span class="hljs-comment">// æ³¨æ„ï¼šæ‰§è¡Œåœ¨ä¸»çº¿ç¨‹ï¼Œæ¥æ”¶åœ¨IOçº¿ç¨‹</span>
    }
</code></pre>
<h4 data-id="heading-47">retry</h4>
<p>retry ç”¨äºåœ¨ Observable å‘ç”Ÿé”™è¯¯æ—¶è‡ªåŠ¨é‡è¯•ï¼Œå®ç°é”™è¯¯æ¢å¤æœºåˆ¶ï¼Œç›´åˆ°æˆåŠŸæˆ–è¾¾åˆ°é‡è¯•ä¸Šé™ã€‚</p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">AtomicInteger</span> <span class="hljs-variable">attempt</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AtomicInteger</span>();

        Observable.create(emitter -&gt; {
                    attempt.getAndIncrement();
                    System.out.println(<span class="hljs-string">"ç¬¬"</span> + attempt + <span class="hljs-string">"æ¬¡å°è¯•"</span>);
                    <span class="hljs-keyword">if</span> (attempt.get() &lt; <span class="hljs-number">3</span>) {
                        emitter.onError(<span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"éšæœºå¤±è´¥"</span>));
                    } <span class="hljs-keyword">else</span> {
                        emitter.onNext(<span class="hljs-string">"æˆåŠŸ"</span>);
                        emitter.onComplete();
                    }
                })
                .retry(<span class="hljs-number">2</span>)  <span class="hljs-comment">// æœ€å¤šé‡è¯•2æ¬¡</span>
                .subscribe(
                        data -&gt; System.out.println(<span class="hljs-string">"ç»“æœ: "</span> + data),
                        error -&gt; System.err.println(<span class="hljs-string">"æœ€ç»ˆå¤±è´¥: "</span> + error.getMessage())
                );

    <span class="hljs-comment">// è¾“å‡ºï¼š</span>
    <span class="hljs-comment">// ç¬¬1æ¬¡å°è¯•</span>
    <span class="hljs-comment">// ç¬¬2æ¬¡å°è¯•</span>
    <span class="hljs-comment">// ç¬¬3æ¬¡å°è¯•</span>
    <span class="hljs-comment">// ç»“æœ: æˆåŠŸ</span>
    <span class="hljs-comment">// å°è¯•3æ¬¡åæˆåŠŸï¼ˆåˆå§‹1æ¬¡+é‡è¯•2æ¬¡ï¼‰</span>
    }
</code></pre>
<h4 data-id="heading-48">retryUntil</h4>
<p>retryUntil ç”¨äºè‡ªå®šä¹‰é‡è¯•åœæ­¢æ¡ä»¶ï¼Œå½“æ¡ä»¶æ»¡è¶³æ—¶åœæ­¢é‡è¯•ã€‚</p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">AtomicInteger</span> <span class="hljs-variable">attempt</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AtomicInteger</span>(<span class="hljs-number">0</span>);
        Observable.create(emitter -&gt; {
                    <span class="hljs-type">int</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> attempt.incrementAndGet();
                    System.out.println(<span class="hljs-string">"ç¬¬"</span> + count + <span class="hljs-string">"æ¬¡å°è¯•"</span>);
                    <span class="hljs-keyword">if</span> (count &lt; <span class="hljs-number">3</span>) {
                        emitter.onError(<span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"å¤±è´¥"</span>));
                    } <span class="hljs-keyword">else</span> {
                        emitter.onNext(<span class="hljs-string">"æˆåŠŸ"</span>);
                        emitter.onComplete();
                    }
                })
                .retryUntil(() -&gt; {
                    <span class="hljs-comment">// è¿”å› true æ—¶åœæ­¢é‡è¯•</span>
                    <span class="hljs-keyword">return</span> attempt.get() &gt;= <span class="hljs-number">3</span>;  <span class="hljs-comment">// å°è¯•3æ¬¡ååœæ­¢</span>
                })
                .subscribe(
                        data -&gt; System.out.println(<span class="hljs-string">"ç»“æœ: "</span> + data),
                        error -&gt; System.err.println(<span class="hljs-string">"æœ€ç»ˆå¤±è´¥: "</span> + error.getMessage())
                );

        <span class="hljs-comment">// è¾“å‡ºï¼š</span>
        <span class="hljs-comment">// ç¬¬1æ¬¡å°è¯•</span>
        <span class="hljs-comment">// ç¬¬2æ¬¡å°è¯•</span>
        <span class="hljs-comment">// ç¬¬3æ¬¡å°è¯•</span>
        <span class="hljs-comment">// ç»“æœ: æˆåŠŸ</span>
    }
</code></pre>
<h3 data-id="heading-49">ç”Ÿå‘½å‘¨æœŸçš„åŠŸèƒ½æ“ä½œç¬¦</h3>
<p>å¾ˆå¤šåŠŸèƒ½æ“ä½œç¬¦è´¯ç©¿æ•´ä¸ªå‘å¸ƒè®¢é˜…çš„ç”Ÿå‘½å‘¨æœŸä¸­ã€‚</p>
<h4 data-id="heading-50">doOnSubscribe- è®¢é˜…æ—¶</h4>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        Observable.just(<span class="hljs-string">"A"</span>, <span class="hljs-string">"B"</span>, <span class="hljs-string">"C"</span>)
                .doOnSubscribe(disposable -&gt;
                        System.out.println(<span class="hljs-string">"æœ‰äººè®¢é˜…äº†ï¼"</span>)
                )
                .subscribe();
        <span class="hljs-comment">// è¾“å‡ºï¼š</span>
        <span class="hljs-comment">// æœ‰äººè®¢é˜…äº†ï¼</span>
    }
</code></pre>
<h4 data-id="heading-51">doOnNext - å‘å°„æ¯ä¸ªå…ƒç´ æ—¶</h4>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        Observable.range(<span class="hljs-number">1</span>, <span class="hljs-number">3</span>)
                .doOnNext(num -&gt;
                        System.out.println(<span class="hljs-string">"å³å°†å‘å°„: "</span> + num)
                )
                .map(num -&gt; num * <span class="hljs-number">2</span>)
                .doOnNext(num -&gt;
                        System.out.println(<span class="hljs-string">"å‘å°„å: "</span> + num)
                )
                .subscribe();

        <span class="hljs-comment">// è¾“å‡ºï¼š</span>
        <span class="hljs-comment">// å³å°†å‘å°„: 1</span>
        <span class="hljs-comment">// å‘å°„å: 2</span>
        <span class="hljs-comment">// å³å°†å‘å°„: 2</span>
        <span class="hljs-comment">// å‘å°„å: 4</span>
        <span class="hljs-comment">// å³å°†å‘å°„: 3</span>
        <span class="hljs-comment">// å‘å°„å: 6</span>
    }
</code></pre>
<h4 data-id="heading-52">doAfterNext - å‘å°„åæ‰§è¡Œ</h4>
<pre><code class="hljs language-java" lang="java">Observable.just(<span class="hljs-string">"A"</span>, <span class="hljs-string">"B"</span>, <span class="hljs-string">"C"</span>)
    .doOnNext(item -&gt; 
        System.out.println(<span class="hljs-string">"å‘å°„å‰: "</span> + item)
    )
    .doAfterNext(item -&gt; 
        System.out.println(<span class="hljs-string">"å‘å°„å: "</span> + item)
    )
    .subscribe(item -&gt; 
        System.out.println(<span class="hljs-string">"æ¥æ”¶: "</span> + item)
    );

<span class="hljs-comment">// è¾“å‡ºï¼š</span>
<span class="hljs-comment">// å‘å°„å‰: A</span>
<span class="hljs-comment">// æ¥æ”¶: A</span>
<span class="hljs-comment">// å‘å°„å: A</span>
<span class="hljs-comment">// å‘å°„å‰: B</span>
<span class="hljs-comment">// æ¥æ”¶: B</span>
<span class="hljs-comment">// å‘å°„å: B</span>
<span class="hljs-comment">// å‘å°„å‰: C</span>
<span class="hljs-comment">// æ¥æ”¶: C</span>
<span class="hljs-comment">// å‘å°„å: C</span>
</code></pre>
<h4 data-id="heading-53">doOnError - å‡ºé”™æ—¶</h4>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        Observable.error(<span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"æµ‹è¯•é”™è¯¯"</span>))
                .doOnError(error -&gt;
                        System.err.println(<span class="hljs-string">"æ•è·åˆ°é”™è¯¯: "</span> + error.getMessage())
                )
                .onErrorReturnItem(<span class="hljs-string">"é»˜è®¤å€¼"</span>)
                .subscribe();

        <span class="hljs-comment">// è¾“å‡ºï¼š</span>
        <span class="hljs-comment">// æ•è·åˆ°é”™è¯¯: æµ‹è¯•é”™è¯¯</span>
    }
</code></pre>
<h4 data-id="heading-54">doOnComplete - å®Œæˆæ—¶</h4>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        Observable.just(<span class="hljs-string">"ä»»åŠ¡1"</span>, <span class="hljs-string">"ä»»åŠ¡2"</span>)
                .doOnComplete(() -&gt;
                        System.out.println(<span class="hljs-string">"æ‰€æœ‰ä»»åŠ¡éƒ½å®Œæˆäº†ï¼"</span>)
                )
                .subscribe();

        <span class="hljs-comment">// è¾“å‡ºï¼š</span>
        <span class="hljs-comment">// æ‰€æœ‰ä»»åŠ¡éƒ½å®Œæˆäº†ï¼</span>
    }
</code></pre>
<h4 data-id="heading-55">doOnTerminate - å®Œæˆ/é”™è¯¯å‰æ‰§è¡Œ</h4>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// æ­£å¸¸å®Œæˆçš„æƒ…å†µ</span>
        Observable.just(<span class="hljs-string">"A"</span>, <span class="hljs-string">"B"</span>)
                .doOnTerminate(() -&gt;
                        System.out.println(<span class="hljs-string">"å³å°†å®Œæˆ/å‡ºé”™"</span>)
                )
                .doOnComplete(() -&gt;
                        System.out.println(<span class="hljs-string">"doOnComplete"</span>)
                )
                .subscribe(
                        item -&gt; System.out.println(<span class="hljs-string">"æ¥æ”¶: "</span> + item),
                        error -&gt; {
                        },
                        () -&gt; System.out.println(<span class="hljs-string">"onComplete"</span>)
                );

        <span class="hljs-comment">// è¾“å‡ºï¼š</span>
        <span class="hljs-comment">// æ¥æ”¶: A</span>
        <span class="hljs-comment">// æ¥æ”¶: B</span>
        <span class="hljs-comment">// å³å°†å®Œæˆ/å‡ºé”™</span>
        <span class="hljs-comment">// doOnComplete</span>
        <span class="hljs-comment">// onComplete</span>

        <span class="hljs-comment">// å‡ºé”™çš„æƒ…å†µ</span>
        Observable.error(<span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"æµ‹è¯•"</span>))
                .doOnTerminate(() -&gt;
                        System.out.println(<span class="hljs-string">"å³å°†å®Œæˆ/å‡ºé”™"</span>)
                )
                .doOnError(error -&gt;
                        System.out.println(<span class="hljs-string">"doOnError: "</span> + error.getMessage())
                )
                .subscribe(
                        item -&gt; {
                        },
                        error -&gt; System.out.println(<span class="hljs-string">"onError: "</span> + error.getMessage())
                );

        <span class="hljs-comment">// è¾“å‡ºï¼š</span>
        <span class="hljs-comment">// å³å°†å®Œæˆ/å‡ºé”™</span>
        <span class="hljs-comment">// doOnError: æµ‹è¯•</span>
        <span class="hljs-comment">// onError: æµ‹è¯•</span>

    }
</code></pre>
<h4 data-id="heading-56">doAfterTerminate - å®Œæˆ/é”™è¯¯åæ‰§è¡Œ</h4>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// æ­£å¸¸å®Œæˆçš„æƒ…å†µ</span>
        Observable.just(<span class="hljs-string">"A"</span>, <span class="hljs-string">"B"</span>)
                .doAfterTerminate(() -&gt;
                        System.out.println(<span class="hljs-string">"å®Œæˆ/å‡ºé”™åæ‰§è¡Œ"</span>)
                )
                .doOnComplete(() -&gt;
                        System.out.println(<span class="hljs-string">"doOnComplete"</span>)
                )
                .subscribe(
                        item -&gt; System.out.println(<span class="hljs-string">"æ¥æ”¶: "</span> + item),
                        error -&gt; {
                        },
                        () -&gt; System.out.println(<span class="hljs-string">"onComplete"</span>)
                );

        <span class="hljs-comment">// è¾“å‡ºï¼š</span>
        <span class="hljs-comment">// æ¥æ”¶: A</span>
        <span class="hljs-comment">// æ¥æ”¶: B</span>
        <span class="hljs-comment">// doOnComplete</span>
        <span class="hljs-comment">// onComplete</span>
        <span class="hljs-comment">// å®Œæˆ/å‡ºé”™åæ‰§è¡Œ</span>

        <span class="hljs-comment">// å‡ºé”™çš„æƒ…å†µ</span>
        Observable.error(<span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"æµ‹è¯•"</span>))
                .doAfterTerminate(() -&gt;
                        System.out.println(<span class="hljs-string">"å®Œæˆ/å‡ºé”™åæ‰§è¡Œ"</span>)
                )
                .doOnError(error -&gt;
                        System.out.println(<span class="hljs-string">"doOnError: "</span> + error.getMessage())
                )
                .subscribe(
                        item -&gt; {
                        },
                        error -&gt; System.out.println(<span class="hljs-string">"onError: "</span> + error.getMessage())
                );

        <span class="hljs-comment">// è¾“å‡ºï¼š</span>
        <span class="hljs-comment">// doOnError: æµ‹è¯•</span>
        <span class="hljs-comment">// onError: æµ‹è¯•</span>
        <span class="hljs-comment">// å®Œæˆ/å‡ºé”™åæ‰§è¡Œ</span>
    }
</code></pre>
<h4 data-id="heading-57">doOnDispose - å–æ¶ˆè®¢é˜…æ—¶</h4>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> InterruptedException {
        <span class="hljs-type">Disposable</span> <span class="hljs-variable">disposable</span> <span class="hljs-operator">=</span> Observable.interval(<span class="hljs-number">1</span>, TimeUnit.SECONDS)
                .doOnDispose(() -&gt;
                        System.out.println(<span class="hljs-string">"è®¢é˜…è¢«å–æ¶ˆäº†"</span>)
                )
                .subscribe(num -&gt;
                        System.out.println(<span class="hljs-string">"è®¡æ•°: "</span> + num)
                );

        Thread.sleep(<span class="hljs-number">3500</span>);
        disposable.dispose();

        <span class="hljs-comment">// è¾“å‡ºï¼š</span>
        <span class="hljs-comment">// è®¡æ•°: 0</span>
        <span class="hljs-comment">// è®¡æ•°: 1</span>
        <span class="hljs-comment">// è®¡æ•°: 2</span>
        <span class="hljs-comment">// è®¢é˜…è¢«å–æ¶ˆäº†</span>
    }
</code></pre>
<h4 data-id="heading-58">doFinally - æœ€ç»ˆæ‰§è¡Œ</h4>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        Observable.just(<span class="hljs-string">"æ•°æ®"</span>)
                .doFinally(() -&gt;
                        System.out.println(<span class="hljs-string">"æ— è®ºå¦‚ä½•éƒ½ä¼šæ‰§è¡Œ"</span>)
                )
                .subscribe();

        <span class="hljs-comment">// è¾“å‡ºï¼š</span>
        <span class="hljs-comment">// æ— è®ºå¦‚ä½•éƒ½ä¼šæ‰§è¡Œ</span>
    }
</code></pre>
<h4 data-id="heading-59">doOnEach - æ¯ä¸ªäº‹ä»¶æ—¶</h4>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        Observable.just(<span class="hljs-string">"A"</span>, <span class="hljs-string">"B"</span>, <span class="hljs-string">"C"</span>)
                .doOnEach(notification -&gt; {
                    <span class="hljs-keyword">if</span> (notification.isOnNext()) {
                        System.out.println(<span class="hljs-string">"å‘å°„: "</span> + notification.getValue());
                    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (notification.isOnComplete()) {
                        System.out.println(<span class="hljs-string">"å®Œæˆ"</span>);
                    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (notification.isOnError()) {
                        System.out.println(<span class="hljs-string">"é”™è¯¯: "</span> + notification.getError());
                    }
                })
                .subscribe();

        <span class="hljs-comment">// è¾“å‡ºï¼š</span>
        <span class="hljs-comment">// å‘å°„: A</span>
        <span class="hljs-comment">// å‘å°„: B</span>
        <span class="hljs-comment">// å‘å°„: C</span>
        <span class="hljs-comment">// å®Œæˆ</span>
    }
</code></pre>
<h4 data-id="heading-60">doOnRequest - è¯·æ±‚æ—¶ï¼ˆèƒŒå‹ç›¸å…³ï¼‰</h4>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        Flowable.range(<span class="hljs-number">1</span>, <span class="hljs-number">100</span>)
                .doOnRequest(requested -&gt;
                        System.out.println(<span class="hljs-string">"ä¸‹æ¸¸è¯·æ±‚äº† "</span> + requested + <span class="hljs-string">" ä¸ªå…ƒç´ "</span>)
                )
                .subscribe(
                        num -&gt; System.out.println(<span class="hljs-string">"æ¥æ”¶: "</span> + num),
                        error -&gt; {
                        },
                        () -&gt; System.out.println(<span class="hljs-string">"å®Œæˆ"</span>)
                );

    }
</code></pre>
<h2 data-id="heading-61">ç»“æŸ</h2>
<p>å“åº”å¼ç¼–ç¨‹ç¡®å®éœ€è¦ä¸€äº›æ—¶é—´æ¥æŒæ¡ï¼Œä½†ä¸€æ—¦ç†è§£æ ¸å¿ƒæ¦‚å¿µï¼Œä½ å°±ä¼šå‘ç°å®ƒåœ¨å¤„ç†å¼‚æ­¥æ•°æ®æµæ—¶çš„å¼ºå¤§ä¹‹å¤„ã€‚</p>
<p>ä»å›è°ƒåœ°ç‹±åˆ°æµç•…çš„é“¾å¼è°ƒç”¨ï¼Œä»æ‰‹å¿™è„šä¹±çš„èµ„æºç®¡ç†åˆ°æ™ºèƒ½çš„èƒŒå‹æ§åˆ¶ï¼Œå“åº”å¼ç¼–ç¨‹è®©å¤æ‚å¼‚æ­¥æ“ä½œå˜å¾—æ¸…æ™°å¯æ§ã€‚è™½ç„¶å­¦ä¹ æ›²çº¿å­˜åœ¨ï¼Œä½†æŠ•å…¥æ˜¯å€¼å¾—çš„ã€‚</p>
<p>è®°ä½ï¼Œä¸æ˜¯æ‰€æœ‰åœºæ™¯éƒ½éœ€è¦å“åº”å¼ã€‚åœ¨åˆé€‚çš„ä¸šåŠ¡åœºæ™¯ä¸‹ä½¿ç”¨ï¼Œæ‰èƒ½å‘æŒ¥æœ€å¤§ä»·å€¼ã€‚å»ºè®®ä»å®é™…é¡¹ç›®çš„å°æ¨¡å—å¼€å§‹å°è¯•ï¼Œé€æ­¥ç§¯ç´¯ç»éªŒã€‚</p>
<p>å¸Œæœ›è¿™ç¯‡å†…å®¹èƒ½ä¸ºä½ æ‰“å¼€å“åº”å¼ç¼–ç¨‹çš„å¤§é—¨ã€‚ç¼–ç¨‹ä¹‹è·¯å°±æ˜¯ä¸æ–­å­¦ä¹ çš„è¿‡ç¨‹ï¼Œä¿æŒå¥½å¥‡ï¼Œç»§ç»­æ¢ç´¢å§ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¤§æ•°æ®-197 KæŠ˜äº¤å‰éªŒè¯å®æˆ˜ï¼šsklearn çœ‹å‡å€¼/æ–¹å·®ï¼Œé€‰æ›´ç¨³çš„ KNN è¶…å‚]]></title>    <link>https://juejin.cn/post/7588300640599900166</link>    <guid>https://juejin.cn/post/7588300640599900166</guid>    <pubDate>2025-12-28T13:55:17.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588300640599900166" data-draft-id="7588680081326735402" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¤§æ•°æ®-197 KæŠ˜äº¤å‰éªŒè¯å®æˆ˜ï¼šsklearn çœ‹å‡å€¼/æ–¹å·®ï¼Œé€‰æ›´ç¨³çš„ KNN è¶…å‚"/> <meta itemprop="keywords" content="åç«¯,å¤§æ•°æ®,æœºå™¨å­¦ä¹ "/> <meta itemprop="datePublished" content="2025-12-28T13:55:17.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ­¦å­åº·"/> <meta itemprop="url" content="https://juejin.cn/user/149189314230039"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¤§æ•°æ®-197 KæŠ˜äº¤å‰éªŒè¯å®æˆ˜ï¼šsklearn çœ‹å‡å€¼/æ–¹å·®ï¼Œé€‰æ›´ç¨³çš„ KNN è¶…å‚
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/149189314230039/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ­¦å­åº·
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-28T13:55:17.000Z" title="Sun Dec 28 2025 13:55:17 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">TL;DR</h2>
<ul>
<li>åœºæ™¯ï¼šåŒä¸€æ¨¡å‹å¤šæ¬¡è®­ç»ƒè¯„ä¼°æ³¢åŠ¨å¤§ï¼Œå•æ¬¡åˆ’åˆ†ä¸å¯ä¿¡ï¼ŒK å€¼éš¾å®š</li>
<li>ç»“è®ºï¼šç”¨ K æŠ˜äº¤å‰éªŒè¯çœ‹â€œå¹³å‡åˆ† + æ–¹å·®â€ï¼Œä¼˜å…ˆé€‰é«˜å‡å€¼ä¸”æ–¹å·®å°çš„åŒºé—´</li>
<li>äº§å‡ºï¼šä¸€å¥—å¯å¤ç”¨çš„ cross_val_score æµç¨‹ + ç»“åˆå­¦ä¹ æ›²çº¿çš„ç¨³å®šæ€§é€‰å‚æ–¹æ³•</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/efcd037c5153436caa1224825c15bc86~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767534916&amp;x-signature=RbiFT1JvrmxM5K3Qtnt4lFi078k%3D" alt="å¤§æ•°æ®-197 KæŠ˜äº¤å‰éªŒè¯å®æˆ˜ï¼šsklearn çœ‹å‡å€¼/æ–¹å·®ï¼Œé€‰æ›´ç¨³çš„ KNN è¶…å‚" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5877cbd48a0d4469b025210929be161e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767534916&amp;x-signature=emQMGSbbqgIUYGPn60O9oSwfTuY%3D" alt="å¤§æ•°æ®-197 KæŠ˜äº¤å‰éªŒè¯å®æˆ˜ï¼šsklearn çœ‹å‡å€¼/æ–¹å·®ï¼Œé€‰æ›´ç¨³çš„ KNN è¶…å‚" loading="lazy"/></p>
<h2 data-id="heading-1">äº¤å‰éªŒè¯</h2>
<p>ç¡®å®šäº† K å€¼ä¹‹åï¼Œæˆ‘ä»¬è¿˜èƒ½å¤Ÿè§‚å¯Ÿåˆ°ä¸€ä¸ªé‡è¦ç°è±¡ï¼šæ¯æ¬¡è¿è¡Œæ¨¡å‹æ—¶ï¼Œå­¦ä¹ æ›²çº¿éƒ½ä¼šå‘ç”Ÿå˜åŒ–ï¼Œæ¨¡å‹çš„æ•ˆæœæ—¶å¥½æ—¶åï¼Œå‘ˆç°å‡ºä¸ç¨³å®šæ€§ã€‚è¿™ç§æ³¢åŠ¨ç°è±¡ä¸»è¦æ˜¯ç”±ä»¥ä¸‹åŸå› é€ æˆçš„ï¼š</p>
<ol>
<li>
<p><strong>æ•°æ®é›†åˆ’åˆ†çš„éšæœºæ€§</strong>ï¼š</p>
<ul>
<li>æ¯æ¬¡è¿è¡Œæ—¶ï¼Œè®­ç»ƒé›†å’Œæµ‹è¯•é›†çš„åˆ’åˆ†æ–¹å¼ä¸åŒï¼ˆé€šå¸¸æ˜¯é€šè¿‡éšæœºé‡‡æ ·ï¼‰</li>
<li>ä¸¾ä¾‹æ¥è¯´ï¼Œå‡è®¾æˆ‘ä»¬æœ‰1000æ¡æ•°æ®ï¼Œç¬¬ä¸€æ¬¡å¯èƒ½éšæœºé€‰å–700æ¡ä½œä¸ºè®­ç»ƒé›†ï¼Œå‰©ä¸‹çš„300æ¡ä½œä¸ºæµ‹è¯•é›†ï¼›ç¬¬äºŒæ¬¡è¿è¡Œæ—¶ï¼Œè¿™ä¸ªåˆ’åˆ†ç»„åˆåˆä¼šå‘ç”Ÿå˜åŒ–</li>
</ul>
</li>
<li>
<p><strong>æ•°æ®åˆ†å¸ƒçš„å½±å“</strong>ï¼š</p>
<ul>
<li>ä¸åŒçš„è®­ç»ƒé›†ä¼šå­¦åˆ°ç•¥å¾®ä¸åŒçš„æ¨¡å¼</li>
<li>æµ‹è¯•é›†çš„ä¸åŒç»„æˆä¼šå¯¼è‡´è¯„ä¼°æŒ‡æ ‡æ³¢åŠ¨</li>
<li>ä¾‹å¦‚ï¼Œå¦‚æœæŸæ¬¡æµ‹è¯•é›†ä¸­æ°å¥½åŒ…å«è¾ƒå¤šè¾¹ç•Œæ¡ˆä¾‹ï¼Œæ¨¡å‹è¡¨ç°å°±ä¼šè¾ƒå·®</li>
</ul>
</li>
</ol>
<p>åœ¨å®é™…ä¸šåŠ¡åœºæ™¯ä¸­ï¼Œè¿™ç§æƒ…å†µåæ˜ äº†å‡ ä¸ªå…³é”®é—®é¢˜ï¼š</p>
<ol>
<li>
<p><strong>å†å²æ•°æ®ä¸æ–°æ•°æ®çš„å·®å¼‚</strong>ï¼š</p>
<ul>
<li>è®­ç»ƒæ•°æ®é€šå¸¸æ˜¯é™æ€çš„å†å²æ•°æ®</li>
<li>æµ‹è¯•æ•°æ®åˆ™æ¨¡æ‹Ÿæœªæ¥æ–°è¿›å…¥ç³»ç»Ÿçš„å®æ—¶æ•°æ®</li>
<li>åœ¨ç”µå•†æ¨èç³»ç»Ÿä¸­ï¼Œç”¨è¿‡å»3ä¸ªæœˆçš„è®¢å•æ•°æ®è®­ç»ƒï¼Œä½†éœ€è¦é¢„æµ‹æœªæ¥ä¸€å‘¨çš„è´­ä¹°è¡Œä¸º</li>
</ul>
</li>
<li>
<p><strong>æ¨¡å‹è¯„ä¼°çš„æ ¸å¿ƒç›®æ ‡</strong>ï¼š</p>
<ul>
<li>æˆ‘ä»¬è¿½æ±‚çš„æ˜¯æ¨¡å‹åœ¨æœªçŸ¥æ•°æ®ä¸Šçš„è¡¨ç°</li>
<li>è¿™ç§èƒ½åŠ›è¢«ç§°ä¸ºæ³›åŒ–èƒ½åŠ›(Generalization Ability)</li>
<li>å¥½çš„æ³›åŒ–èƒ½åŠ›æ„å‘³ç€ï¼š
<ul>
<li>å¯¹å™ªå£°æ•°æ®ä¿æŒé²æ£’æ€§</li>
<li>èƒ½å¤„ç†æœªè§è¿‡çš„æ•°æ®æ¨¡å¼</li>
<li>é¿å…è¿‡æ‹Ÿåˆè®­ç»ƒæ•°æ®çš„ç‰¹å®šç‰¹å¾</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>æé«˜æ³›åŒ–èƒ½åŠ›çš„æ–¹æ³•</strong>ï¼š</p>
<ul>
<li>ä½¿ç”¨äº¤å‰éªŒè¯ä»£æ›¿å•æ¬¡åˆ’åˆ†</li>
<li>å¢åŠ æ•°æ®å¤šæ ·æ€§</li>
<li>é‡‡ç”¨æ­£åˆ™åŒ–æŠ€æœ¯</li>
<li>ä¾‹å¦‚ï¼Œåœ¨é‡‘èé£æ§æ¨¡å‹ä¸­ï¼Œä¼šä½¿ç”¨5æŠ˜äº¤å‰éªŒè¯æ¥æ›´å¯é åœ°è¯„ä¼°æ¨¡å‹æ•ˆæœ</li>
</ul>
</li>
</ol>
<p>è¿™ç§ç°è±¡æé†’æˆ‘ä»¬ï¼Œåœ¨æ¨¡å‹å¼€å‘è¿‡ç¨‹ä¸­ä¸èƒ½ä»…ä¾èµ–å•æ¬¡è¿è¡Œçš„è¯„ä¼°ç»“æœï¼Œè€Œéœ€è¦é€šè¿‡å¤šæ¬¡éªŒè¯æ¥è·å¾—ç¨³å®šçš„æ€§èƒ½è¯„ä¼°ï¼Œè¿™æ‰æ˜¯ä¿è¯æ¨¡å‹åœ¨å®é™…ä¸šåŠ¡ä¸­å¯é è¡¨ç°çš„å…³é”®ã€‚</p>
<h3 data-id="heading-2">æ³›åŒ–èƒ½åŠ›</h3>
<p>æˆ‘ä»¬åœ¨è¿›è¡Œå­¦ä¹ çš„æ—¶å€™ï¼Œé€šå¸¸ä¼šå°†ä¸€ä¸ªæ ·æœ¬é›†åˆ†åŒ–ä¸ºã€è®­ç»ƒé›†ã€‘å’Œã€æµ‹è¯•é›†ã€‘ï¼Œå…¶ä¸­è®­ç»ƒé›†ç”¨äºæ¨¡å‹çš„å­¦ä¹ å’Œè®­ç»ƒï¼Œè€Œåæµ‹è¯•é›†é€šå¸¸ç”¨äºè¯„ä¼°è®­ç»ƒå¥½çš„æ¨¡å‹å¯¹äºæ•°æ®çš„é¢„æµ‹æ€§çš„è¯„ä¼°ã€‚</p>
<ul>
<li>è®­ç»ƒè¯¯å·®ä»£è¡¨æ¨¡å‹åœ¨è®­ç»ƒé›†ä¸Šçš„é”™åˆ†æ ·æœ¬æ¯”ç‡ã€‚</li>
<li>æµ‹è¯•è¯¯å·®ä»£è¡¨æ¨¡å‹åœ¨æµ‹è¯•é›†ä¸Šçš„é”™åˆ†æ ·æœ¬æ¯”ç‡ã€‚</li>
</ul>
<p>è®­ç»ƒè¯¯å·®çš„å¤§å°ï¼Œç”¨æ¥åˆ¤æ–­ç»™å®šé—®é¢˜æ˜¯ä¸æ˜¯ä¸€ä¸ªå®¹æ˜“å­¦ä¹ çš„é—®é¢˜ï¼Œæµ‹è¯•è¯¯å·®ååº”äº†æ¨¡å‹å¯¹æœªçŸ¥æ•°æ®çš„é¢„æµ‹èƒ½åŠ›ï¼Œæµ‹è¯•è¯¯å·®å°çš„å­¦ä¹ æ–¹æ³•å…·æœ‰å¾ˆå¥½çš„é¢„æµ‹èƒ½åŠ›ï¼Œå¦‚æœå¾—åˆ°çš„è®­ç»ƒé›†å’Œæµ‹è¯•é›†æ²¡æœ‰äº¤é›†ï¼Œé€šå¸¸å°†æ­¤é¢„æµ‹èƒ½åŠ›ç§°ä¸ºæ³›åŒ–èƒ½åŠ›ï¼ˆgeneralization abilityï¼‰ã€‚
æˆ‘ä»¬è®¤ä¸ºï¼Œå¦‚æœæ¨¡å‹åœ¨ä¸€å¥—è®­ç»ƒé›†å’Œæ•°æ®é›†ä¸Šè¡¨ç°ä¼˜ç§€ï¼Œé‚£è¯´æ˜ä¸äº†é—®é¢˜ï¼Œåªèƒ½åœ¨ä¼—å¤šä¸åŒçš„è®­ç»ƒé›†å’Œæµ‹è¯•é›†ä¸Šéƒ½è¡¨ç°ä¼˜ç§€ï¼Œæ¨¡å‹æ‰æ˜¯ä¸€ä¸ªç¨³å®šçš„æ¨¡å‹ï¼Œæ¨¡å‹æ‰æ˜¯å…·æœ‰çœŸæ­£æ„ä¹‰ä¸Šçš„æ³›åŒ–èƒ½åŠ›ã€‚
ä¸ºæ­¤ï¼Œæœºå™¨å­¦ä¹ é¢†åŸŸæœ‰å‘æŒ¥ç¥ä½œç”¨çš„æŠ€èƒ½ï¼šã€äº¤å‰éªŒè¯ã€‘ï¼Œæ¥å¸®åŠ©æˆ‘ä»¬è®¤è¯†æ¨¡å‹ã€‚</p>
<h3 data-id="heading-3">kæŠ˜äº¤å‰éªŒè¯</h3>
<p>æœ€å¸¸ç”¨çš„äº¤å‰éªŒè¯æ–¹æ³•æ˜¯ K æŠ˜äº¤å‰éªŒè¯ï¼ˆK-Fold Cross Validationï¼‰ã€‚è¿™ç§æ–¹æ³•é€šè¿‡å°†æ•°æ®é›†åˆ’åˆ†ä¸º K ä¸ªå¤§å°ç›¸ä¼¼çš„äº’æ–¥å­é›†ï¼Œæ¯æ¬¡ä½¿ç”¨å…¶ä¸­ K-1 ä¸ªå­é›†ä½œä¸ºè®­ç»ƒæ•°æ®ï¼Œå‰©ä¸‹çš„ 1 ä¸ªå­é›†ä½œä¸ºéªŒè¯æ•°æ®ï¼Œé‡å¤è¿™ä¸ªè¿‡ç¨‹ K æ¬¡ï¼Œæœ€ç»ˆå¾—åˆ° K ä¸ªæ¨¡å‹è¯„ä¼°ç»“æœçš„å¹³å‡å€¼ã€‚</p>
<p>å…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š</p>
<ol>
<li>å°†åŸå§‹æ•°æ®é›†éšæœºåˆ’åˆ†ä¸º K ä¸ªç­‰å¤§å°çš„å­é›†ï¼ˆé€šå¸¸ K=5 æˆ– 10ï¼‰</li>
<li>ä¾æ¬¡é€‰å–ç¬¬ i ä¸ªå­é›†ä½œä¸ºéªŒè¯é›†ï¼ˆi=1,2,...,Kï¼‰ï¼Œå…¶ä½™ K-1 ä¸ªå­é›†åˆå¹¶ä½œä¸ºè®­ç»ƒé›†</li>
<li>åœ¨è®­ç»ƒé›†ä¸Šè®­ç»ƒæ¨¡å‹ï¼Œåœ¨éªŒè¯é›†ä¸Šè¯„ä¼°æ¨¡å‹æ€§èƒ½</li>
<li>é‡å¤æ­¥éª¤ 2-3 ç›´åˆ°æ‰€æœ‰å­é›†éƒ½å……å½“è¿‡éªŒè¯é›†</li>
<li>è®¡ç®— K æ¬¡è¯„ä¼°ç»“æœçš„å¹³å‡å€¼ä½œä¸ºæœ€ç»ˆæ¨¡å‹æ€§èƒ½æŒ‡æ ‡</li>
</ol>
<p>è¿™ç§æ–¹æ³•ç›¸æ¯”ç®€å•çš„è®­ç»ƒé›†-æµ‹è¯•é›†åˆ’åˆ†å…·æœ‰ä»¥ä¸‹ä¼˜åŠ¿ï¼š</p>
<ul>
<li>å……åˆ†åˆ©ç”¨æœ‰é™çš„æ•°æ®èµ„æº</li>
<li>å‡å°‘æ•°æ®åˆ’åˆ†å¸¦æ¥çš„éšæœºæ€§å½±å“</li>
<li>æä¾›æ›´å¯é çš„æ¨¡å‹æ€§èƒ½è¯„ä¼°</li>
<li>ç‰¹åˆ«é€‚ç”¨äºä¸­å°è§„æ¨¡æ•°æ®é›†</li>
</ul>
<p>å®é™…åº”ç”¨ä¸­ï¼ŒK å€¼çš„é€‰æ‹©éœ€è¦æƒè¡¡ï¼š</p>
<ul>
<li>è¾ƒå°çš„ K å€¼ï¼ˆå¦‚ 5ï¼‰è®¡ç®—æ•ˆç‡æ›´é«˜</li>
<li>è¾ƒå¤§çš„ K å€¼ï¼ˆå¦‚ 10ï¼‰è¯„ä¼°ç»“æœæ›´ç¨³å®š</li>
<li>æç«¯æƒ…å†µ K=Nï¼ˆæ ·æœ¬æ•°ï¼‰æ—¶å³ä¸ºç•™ä¸€æ³•äº¤å‰éªŒè¯</li>
</ul>
<p>é€šè¿‡å¤šæ¬¡äº¤å‰éªŒè¯æ±‚å–å‡å€¼ï¼Œå¯ä»¥æ˜¾è‘—é™ä½å•æ¬¡æ•°æ®åˆ’åˆ†å¸¦æ¥çš„è¯„ä¼°åå·®ï¼Œä¸ºæ¨¡å‹é€‰æ‹©å’Œå‚æ•°è°ƒä¼˜æä¾›æ›´å¯é çš„ä¾æ®ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6725d7d8524940d5aacc8aa4cc8731fc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767534916&amp;x-signature=9qFpGDOrsAgN4eB9lt8v2zeYFAc%3D" alt="äº¤å‰éªŒè¯å¤šæ¬¡æµ‹è¯•" loading="lazy"/></p>
<h3 data-id="heading-4">å¸¦äº¤å‰éªŒè¯çš„å­¦ä¹ æ›²çº¿</h3>
<p>å¯¹äºå¸¦äº¤å‰éªŒè¯çš„å­¦ä¹ æ›²çº¿ï¼Œæˆ‘ä»¬éœ€è¦è§‚å¯Ÿçš„å°±ä¸ä»…ä»…æ˜¯æœ€é«˜çš„å‡†ç¡®ç‡äº†ï¼Œè€Œæ˜¯å‡†ç¡®ç‡é«˜ä¸”æ–¹å·®è¿˜ç›¸å¯¹è¾ƒå°çš„ç‚¹ï¼Œè¿™æ ·çš„ç‚¹æ³›åŒ–èƒ½åŠ›æ‰æ˜¯æœ€å¼ºçš„ï¼Œåœ¨äº¤å‰éªŒè¯+å­¦ä¹ æ›²çº¿çš„ä½œç”¨ä¸‹ï¼Œæˆ‘ä»¬é€‰å‡ºçš„è¶…å‚æ•°èƒ½å¤Ÿä¿è¯æ›´å¥½çš„æ³›åŒ–èƒ½åŠ›ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> sklearn.model_selection <span class="hljs-keyword">import</span> cross_val_score <span class="hljs-keyword">as</span> CVS
Xtrain,Xtest,Ytrain,Ytest = train_test_split(X,y,test_size=<span class="hljs-number">0.2</span>,random_state=<span class="hljs-number">420</span>)
clf = KNeighborsClassifier(n_neighbors=<span class="hljs-number">8</span>)
<span class="hljs-comment">#è®­ç»ƒé›†å¯¹æŠ˜6æ¬¡ï¼Œä¸€å…±6ä¸ªé¢„æµ‹ç‡è¾“å‡º</span>
cvresult = CVS(clf,Xtrain,Ytrain,cv=<span class="hljs-number">6</span>) 
<span class="hljs-comment">#æ¯æ¬¡äº¤å‰éªŒè¯è¿è¡Œæ—¶ä¼°ç®—å™¨å¾—åˆ†çš„æ•°ç»„</span>
cvresult 
</code></pre>
<p>æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/28755e02a4ad4c0aa4fbc0e970e2ebfc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767534916&amp;x-signature=H1PotusTQW5RO6YsE%2BjyCirbOuM%3D" alt="sklearn äº¤å‰éªŒè¯" loading="lazy"/>
æŸ¥çœ‹å‡å€¼ã€æ–¹å·®</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># å‡å€¼ï¼šæŸ¥çœ‹æ¨¡å‹çš„å¹³å‡æ•ˆæœ</span>
cvresult.mean()
<span class="hljs-comment"># æ–¹å·®ï¼šæŸ¥çœ‹æ¨¡å‹æ˜¯å¦ç¨³å®š</span>
cvresult.var()
</code></pre>
<p>æ‰§è¡Œç»“æœå¦‚ä¸‹æ‰€ç¤ºï¼š
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/45852d79695c49208d1c3dc5ad468218~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767534916&amp;x-signature=B6hZRxC%2F9%2FJ3Z8M3EXnsPWVvh5k%3D" alt="äº¤å‰éªŒè¯ å‡å€¼ æ–¹å·®" loading="lazy"/>
ç»˜åˆ¶å›¾ç‰‡è¿›è¡ŒæŸ¥çœ‹ï¼š</p>
<pre><code class="hljs language-python" lang="python">score = []
var = []
<span class="hljs-comment">#è®¾ç½®ä¸åŒçš„kå€¼ï¼Œä»1åˆ°19éƒ½çœ‹çœ‹</span>
krange=<span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,<span class="hljs-number">20</span>) 
<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> krange:
    clf = KNeighborsClassifier(n_neighbors=i)
    cvresult = CVS(clf,Xtrain,Ytrain,cv=<span class="hljs-number">5</span>)
    <span class="hljs-comment"># æ¯æ¬¡äº¤å‰éªŒè¯è¿”å›çš„å¾—åˆ†æ•°ç»„ï¼Œå†æ±‚æ•°ç»„å‡å€¼</span>
    score.append(cvresult.mean()) 
    var.append(cvresult.var())

plt.plot(krange,score,color=<span class="hljs-string">'k'</span>)
plt.plot(krange,np.array(score)+np.array(var)*<span class="hljs-number">2</span>,c=<span class="hljs-string">'red'</span>,linestyle=<span class="hljs-string">'--'</span>)
plt.plot(krange,np.array(score)-np.array(var)*<span class="hljs-number">2</span>,c=<span class="hljs-string">'red'</span>,linestyle=<span class="hljs-string">'--'</span>)
</code></pre>
<p>è¿è¡Œç»“æœå¦‚ä¸‹ï¼š
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e8be8e44493a40d08f38d05e7f452741~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767534916&amp;x-signature=FPWGqCC%2F99fkzRyM5tYDXs5S24U%3D" alt="äº¤å‰éªŒè¯ ç»˜åˆ¶å›¾è¡¨" loading="lazy"/>
è¾“å‡ºçš„å›¾ç‰‡å¦‚ä¸‹æ‰€ç¤ºï¼š
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a31efbd475df465fa99805cc34464dac~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767534916&amp;x-signature=etZQhBlifC%2Br4dkFH%2FfZILdRHsc%3D" alt="äº¤å‰éªŒè¯ ç»˜åˆ¶å›¾è¡¨" loading="lazy"/></p>
<h3 data-id="heading-5">æ˜¯å¦éœ€è¦éªŒè¯é›†</h3>
<p>æœ€æ ‡å‡†ï¼Œæœ€ä¸¥è°¨çš„äº¤å‰éªŒè¯åº”è¯¥æœ‰ä¸‰ç»„æ•°æ®ï¼šè®­ç»ƒé›†ã€éªŒè¯é›†å’Œæµ‹è¯•é›†ã€‚å½“æˆ‘ä»¬è·å–ä¸€ç»„æ•°æ®ä¹‹åï¼š</p>
<ul>
<li>å…ˆå°†æ•°æ®é›†åˆ†æˆæ•´ä½“çš„è®­ç»ƒé›†å’Œæµ‹è¯•é›†</li>
<li>ç„¶åæˆ‘ä»¬æŠŠè®­ç»ƒé›†æ”¾å…¥äº¤å‰éªŒè¯ä¸­</li>
<li>ä»è®­ç»ƒé›†ä¸­åˆ†å‰²æ›´å°çš„è®­ç»ƒé›†ï¼ˆk-1 ä»½ï¼‰å’ŒéªŒè¯æœºï¼ˆ1 ä»½ï¼‰</li>
<li>è¿”å›çš„äº¤å‰éªŒè¯ç»“æœå…¶å®æ˜¯éªŒè¯é›†ä¸Šçš„ç»“æœ</li>
<li>ä½¿ç”¨éªŒè¯é›†å¯»æ‰¾æœ€ä½³å‚æ•°ï¼Œç¡®è®¤ä¸€ä¸ªæˆ‘ä»¬è®¤ä¸ºæ³›åŒ–èƒ½åŠ›æœ€ä½³çš„æ¨¡å‹</li>
<li>å°†è¿™ä¸ªæ¨¡å‹ä½¿ç”¨åœ¨æµ‹è¯•é›†ä¸Šï¼Œè§‚å¯Ÿæ¨¡å‹çš„è¡¨ç°</li>
</ul>
<p>é€šå¸¸æ¥è¯´ï¼Œæˆ‘ä»¬è®¤ä¸ºç»è¿‡éªŒè¯é›†æ‰¾å‡ºæœ€ç»ˆå‚æ•°åçš„æ¨¡å‹çš„æ³›åŒ–èƒ½åŠ›æ˜¯å¢å¼ºäº†çš„ï¼Œå› æ­¤æ¨¡å‹åœ¨æœªçŸ¥æ•°æ®ï¼ˆæµ‹è¯•é›†ï¼‰ä¸Šçš„æ•ˆæœä¼šæ›´å¥½ï¼Œä½†å°´å°¬çš„æ˜¯ï¼Œæ¨¡å‹ç»è¿‡äº¤å‰éªŒè¯åœ¨éªŒè¯é›†ä¸Šçš„è°ƒå‚ä¹‹åï¼Œåœ¨æµ‹è¯•é›†ä¸Šçš„ç»“æœæ²¡æœ‰å˜å¥½çš„æƒ…å†µæ—¶æœ‰å‘ç”Ÿã€‚</p>
<p>åŸå› å…¶å®æ˜¯ï¼š</p>
<ul>
<li>æˆ‘ä»¬è‡ªå·±åˆ†çš„è®­ç»ƒé›†å’Œæµ‹è¯•é›†ï¼Œä¼šå½±å“æ¨¡å‹çš„æ•ˆæœ</li>
<li>äº¤å‰éªŒè¯åçš„æ¨¡å‹çš„æ³›åŒ–èƒ½åŠ›å¢å¼ºäº†ï¼Œè¡¨ç°å®ƒåœ¨æœªçŸ¥æ•°æ®é›†ä¸Šæ–¹å·®æ›´å°ï¼Œå¹³å‡æ°´å¹³æ›´é«˜ï¼Œä½†å´æ— æ³•ä¿è¯å®ƒåœ¨ç°åœ¨åˆ†å‡ºæ¥çš„æµ‹è¯•é›†ä¸Šé¢„æµ‹èƒ½åŠ›æœ€å¼º</li>
<li>å¦‚æ­¤æ¥è¯´ï¼Œæ˜¯å¦æœ‰æµ‹è¯•é›†çš„å­˜åœ¨ï¼Œå…¶å®æ„ä¹‰ä¸å¤§</li>
</ul>
<p>å¦‚æœæˆ‘ä»¬ç›¸ä¿¡äº¤å‰éªŒè¯çš„è°ƒæ•´ç»“æœæ˜¯å¢å¼ºäº†æ¨¡å‹çš„æ³›åŒ–èƒ½åŠ›ï¼Œé‚£å³ä¾¿æµ‹è¯•é›†ä¸Šçš„æµ‹è¯•ç»“æœå¹¶æ²¡æœ‰å˜å¥½ï¼ˆç”šè‡³å˜åï¼‰ï¼Œæˆ‘ä»¬ä¹Ÿè®¤ä¸ºæ¨¡å‹æ˜¯æˆåŠŸçš„ã€‚
å¦‚æœæˆ‘ä»¬ä¸ç›¸ä¿¡äº¤å‰éªŒè¯çš„è°ƒæ•´ç»“æœèƒ½å¤Ÿå¢å¼ºæ¨¡å‹çš„æ³›åŒ–èƒ½åŠ›ï¼Œè€Œä¸€å®šè¦ä¾èµ–æµ‹è¯•é›†æ¥è¿›è¡Œåˆ¤æ–­ï¼Œæˆ‘ä»¬å®Œå…¨æ²¡æœ‰è¿›è¡Œäº¤å‰éªŒè¯çš„å¿…è¦ï¼Œç›´æ¥ç”¨æµ‹è¯•é›†ä¸Šçš„ç»“æœç”¨æ¥è·‘å­¦ä¹ æ›²çº¿å°±å¥½äº†ã€‚
æ‰€ä»¥ï¼Œç©¶ç«Ÿæ˜¯å¦éœ€è¦éªŒè¯é›†ï¼Œå…¶å®æ˜¯å­˜åœ¨äº‰è®®çš„ï¼Œåœ¨ä¸¥è°¨çš„æƒ…å†µä¸‹ï¼Œå¤§å®¶è¿˜æ˜¯ä½¿ç”¨äº†æœ‰éªŒè¯é›†çš„æ–¹å¼ã€‚</p>
<h3 data-id="heading-6">å…¶ä»–äº¤å‰éªŒè¯</h3>
<p>äº¤å‰éªŒè¯çš„æ–¹æ³•ä¸æ­¢â€œK æŠ˜â€ä¸€ç§ï¼Œåˆ†å‰²è®­ç»ƒé›†å’Œæµ‹è¯•é›†çš„æ–¹æ³•ä¹Ÿä¸æ­¢ä¸€ç§ï¼Œåˆ†é—¨åˆ«ç±»çš„äº¤å‰éªŒè¯å æ®äº† sklearn ä¸­éå¸¸é•¿çš„ä¸€ç« ã€‚
æ‰€æœ‰çš„äº¤å‰éªŒè¯éƒ½æ˜¯åœ¨åˆ†å‰²è®­ç»ƒé›†å’Œæµ‹è¯•é›†ï¼Œåªä¸è¿‡ä¾§é‡çš„æ–¹å‘ä¸åŒã€‚</p>
<ul>
<li>K æŠ˜å°±æ˜¯æŒ‰é¡ºåºå–è®­ç»ƒé›†å’Œæµ‹è¯•é›†</li>
<li>ShuffleSpilt å°±ä¾§é‡äºè®©æµ‹è¯•é›†åˆ†å¸ƒåœ¨æ•°æ®çš„å…¨æ–¹ä½ä¹‹å†…</li>
<li>StratifiedKFold åˆ™è®¤ä¸ºè®­ç»ƒæ•°æ®å’Œæµ‹è¯•æ•°æ®å¿…é¡»åœ¨æ¯ä¸ªæ ‡ç­¾åˆ†ç±»ä¸­å æœ‰ç›¸åŒçš„æ¯”ä¾‹</li>
</ul>
<p>å„ç±»äº¤å‰éªŒè¯çš„åŸç†ç¹çï¼Œå¤§å®¶åœ¨æœºå™¨å­¦ä¹ çš„é“è·¯ä¸Šä¸€å®šä¼šé€æ¸é‡åˆ°æ›´éš¾çš„äº¤å‰éªŒè¯ï¼Œä½†æ˜¯ä¸‡å˜ä¸ç¦»å…¶å®—ï¼šæœ¬è´¨ä¸Šäº¤å‰éªŒè¯æ˜¯ä¸ºäº†è§£å†³è®­ç»ƒé›†å’Œæµ‹è¯•é›†çš„åˆ’åˆ†å¯¹æ¨¡å‹å¸¦æ¥çš„å½±å“ï¼ŒåŒæ—¶æ£€æµ‹æ¨¡å‹çš„æ³›åŒ–èƒ½åŠ›ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/58ab85d1c5724f38afc0f9727862bda7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767534916&amp;x-signature=sR9WWcEJBKx5S80nmKCVHA6CmIg%3D" alt="å„ç±»äº¤å‰éªŒè¯" loading="lazy"/></p>
<p>äº¤å‰éªŒè¯çš„æŠ˜æ•°ä¸å¯å¤ªå¤§ï¼Œå› ä¸ºæŠ˜æ•°è¶Šå¤§æŠ½å‡ºæ¥çš„æ•°æ®é›†è¶Šå°ï¼Œè®­ç»ƒæ•°æ®æ‰€å¸¦æ¥çš„ä¿¡æ¯é‡å°±ä¼šè¶Šå°ï¼Œæ¨¡å‹ä¼šè¶Šæ¥è¶Šä¸ç¨³å®šã€‚</p>
<h3 data-id="heading-7">é¿å…æŠ˜æ•°å¤ªå¤§</h3>
<p>å¦‚æœä½ å‘ç°ä¸ä½¿ç”¨äº¤å‰éªŒè¯çš„æ—¶å€™æ¨¡å‹è¡¨ç°å¾ˆå¥½ï¼Œä¸€ä½¿ç”¨æ ¡éªŒéªŒè¯æ¨¡å‹çš„æ•ˆæœå°±éª¤é™</p>
<ul>
<li>ä¸€å®šè¦æŸ¥çœ‹ä½ çš„æ ‡ç­¾æ˜¯å¦æœ‰é¡ºåˆ©</li>
<li>ç„¶åå°±æ˜¯æŸ¥çœ‹ä½ çš„æ•°æ®é‡æ˜¯å¦å¤ªå°ï¼ŒæŠ˜æ•°æ˜¯å¦å¤ªé«˜</li>
</ul>
<p>å¦‚æœå°†ä¸Šé¢ä¾‹é¢˜çš„ä»£ç ä¸­å°† cv å°† 5 æ”¹æˆ 100ï¼Œä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre><code class="hljs language-python" lang="python">score = []
var = []
<span class="hljs-comment">#è®¾ç½®ä¸åŒçš„kå€¼ï¼Œä»1åˆ°19éƒ½çœ‹çœ‹</span>
krange=<span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,<span class="hljs-number">20</span>) 
<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> krange:
    clf = KNeighborsClassifier(n_neighbors=i)
    cvresult = CVS(clf,Xtrain,Ytrain,cv=<span class="hljs-number">100</span>)
    <span class="hljs-comment"># æ¯æ¬¡äº¤å‰éªŒè¯è¿”å›çš„å¾—åˆ†æ•°ç»„ï¼Œå†æ±‚æ•°ç»„å‡å€¼</span>
    score.append(cvresult.mean()) 
    var.append(cvresult.var())

plt.plot(krange,score,color=<span class="hljs-string">'k'</span>)
plt.plot(krange,np.array(score)+np.array(var)*<span class="hljs-number">2</span>,c=<span class="hljs-string">'red'</span>,linestyle=<span class="hljs-string">'--'</span>)
plt.plot(krange,np.array(score)-np.array(var)*<span class="hljs-number">2</span>,c=<span class="hljs-string">'red'</span>,linestyle=<span class="hljs-string">'--'</span>)
</code></pre>
<p>ç”Ÿæˆå›¾ç‰‡å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6c6ae2c16948404f9d97475e158d26ad~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767534916&amp;x-signature=wtEW3ipBF8a9YABI%2BbYIIMDkbN0%3D" alt="æŠ˜æ•°å›¾è¡¨ç»˜åˆ¶" loading="lazy"/></p>
<p>æŠ˜æ•°è¿‡å¤§ï¼š</p>
<ul>
<li>è¿ç®—æ•ˆç‡å˜æ…¢</li>
<li>é¢„æµ‹ç‡æ–¹å·®å˜å¤§ï¼Œéš¾ä»¥ä¿è¯åœ¨æ–°çš„æ•°æ®é›†è¾¾åˆ°é¢„æœŸé¢„æµ‹ç‡</li>
</ul>
<h2 data-id="heading-8">é”™è¯¯é€ŸæŸ¥</h2>





















































<table><thead><tr><th>ç—‡çŠ¶</th><th>æ ¹å› </th><th>å®šä½</th><th>ä¿®å¤</th></tr></thead><tbody><tr><td>æ¯æ¬¡è·‘åˆ†å·®å¼‚å¾ˆå¤§ï¼Œæ›²çº¿å¿½é«˜å¿½ä½</td><td>å•æ¬¡éšæœºåˆ’åˆ†å¯¼è‡´è¯„ä¼°æ–¹å·®å¤§ï¼›æ•°æ®é‡å°/ç±»åˆ«ä¸å‡è¡¡æ›´æ˜æ˜¾</td><td>å›ºå®š random_state å¯¹æ¯”ï¼›æ‰“å°æ¯æ¬¡åˆ’åˆ†çš„ç±»åˆ«å æ¯”</td><td>ç”¨ K æŠ˜äº¤å‰éªŒè¯è¾“å‡º mean/varï¼›åˆ†ç±»ä»»åŠ¡ä¼˜å…ˆ StratifiedKFold/StratifiedShuffleSplitï¼›å¿…è¦æ—¶æ‰©å¤§æ•°æ®é‡</td></tr><tr><td>äº¤å‰éªŒè¯ååœ¨æµ‹è¯•é›†åè€Œæ›´å·®</td><td>åœ¨éªŒè¯æŠ˜ä¸Šâ€œè¿‡åº¦è°ƒå‚â€ï¼›æµ‹è¯•é›†åˆ’åˆ†æœ¬èº«å</td><td>å¯¹æ¯”ä¸åŒéšæœºç§å­çš„æµ‹è¯•é›†ç»“æœåˆ†å¸ƒ</td><td>ä¸¥æ ¼ä¸‰æ®µå¼ï¼štrain +ï¼ˆCV è°ƒå‚ï¼‰+ testï¼›æˆ–ç”¨ nested CVï¼›å‡å°‘è¶…å‚æœç´¢ç©ºé—´</td></tr><tr><td>cv è®¾ç½®å¾ˆå¤§ï¼ˆå¦‚ 100ï¼‰ååˆ†æ•°å¤§å¹…ä¸‹é™ä¸”æ³¢åŠ¨å¢å¤§</td><td>æ¯æŠ˜è®­ç»ƒé›†è¿‡å°ï¼Œæ¨¡å‹ä¼°è®¡ä¸ç¨³ï¼›è¿ç®—é‡æš´æ¶¨</td><td>è§‚å¯Ÿæ¯æŠ˜æ ·æœ¬æ•°ï¼šn_samples / cvï¼›çœ‹ var æ˜¯å¦é£™å‡</td><td>æ§åˆ¶ cvï¼ˆå¸¸ç”¨ 5 æˆ– 10ï¼‰ï¼›å°æ•°æ®ç”¨é‡å¤ K æŠ˜ï¼ˆRepeatedKFoldï¼‰è€Œä¸æ˜¯æå¤§ cv</td></tr><tr><td>æŠ¥é”™ï¼šThe least populated class in y has only 1 member</td><td>åˆ†å±‚äº¤å‰éªŒè¯ä¸‹ï¼ŒæŸäº›ç±»åˆ«æ ·æœ¬å¤ªå°‘ï¼Œæ— æ³•åˆ†æŠ˜</td><td>æŸ¥çœ‹ y å„ç±»åˆ«è®¡æ•°</td><td>åˆå¹¶ç¨€æœ‰ç±»/è¡¥æ ·æœ¬/é™ä½ cvï¼›æˆ–æ”¹ç”¨ä¸åˆ†å±‚ä½†éœ€æ‰¿æ‹…åˆ†å¸ƒæ¼‚ç§»é£é™©</td></tr><tr><td>CV åˆ†æ•°å¼‚å¸¸é«˜ï¼Œçº¿ä¸Šæ•ˆæœå¾ˆå·®</td><td>æ•°æ®æ³„æ¼ï¼šåœ¨ CV ä¹‹å‰åšäº†å…¨é‡æ ‡å‡†åŒ–/ç‰¹å¾é€‰æ‹©/ç¼–ç </td><td>æ£€æŸ¥é¢„å¤„ç†æ˜¯å¦åœ¨ fit å‰ç”¨åˆ°å…¨é‡æ•°æ®</td><td>ç”¨ Pipeline æŠŠé¢„å¤„ç†æ”¾è¿› CVï¼ˆStandardScaler/Encoder/SelectKBest ç­‰éƒ½åœ¨æŠ˜å†… fitï¼‰</td></tr><tr><td>åŒä¸€ä»½ä»£ç åœ¨ä¸åŒæœºå™¨ç»“æœä¸ä¸€è‡´</td><td>å¹¶è¡Œ/éšæœºæ€§/æµ®ç‚¹å·®å¼‚ï¼›æœªå›ºå®šç§å­</td><td>æ£€æŸ¥ random_stateã€n_jobsã€numpy éšæœºç§å­</td><td>å›ºå®š random_stateï¼›å¿…è¦æ—¶ n_jobs=1 å¤ç°ï¼›è®°å½•ä¾èµ–ç‰ˆæœ¬ä¸ç¡¬ä»¶ä¿¡æ¯</td></tr><tr><td>æŒ‡æ ‡çœ‹èµ·æ¥â€œç¨³å®šâ€ä½†ä¸šåŠ¡ä¸è¾¾æ ‡</td><td>é€‰é”™ scoringï¼ˆaccuracy ä¸é€‚åˆä¸å‡è¡¡ï¼‰ï¼›åªçœ‹å‡å€¼ä¸çœ‹ä¸šåŠ¡çº¦æŸ</td><td>å¯¹æ¯”å¤šæŒ‡æ ‡ï¼šprecision/recall/F1/AUCï¼›çœ‹æ··æ·†çŸ©é˜µ</td><td>æ˜ç¡®ä¸šåŠ¡ç›®æ ‡ä¸é˜ˆå€¼ï¼›è®¾ç½® scoringï¼›åˆ†ç±»ä¸å‡è¡¡ç”¨ macro/weighted æŒ‡æ ‡å¹¶é…åˆåˆ†å±‚ CV</td></tr></tbody></table>
<h2 data-id="heading-9">å…¶ä»–ç³»åˆ—</h2>
<h3 data-id="heading-10">ğŸš€ AIç¯‡æŒç»­æ›´æ–°ä¸­ï¼ˆé•¿æœŸæ›´æ–°ï¼‰</h3>
<p><strong>AIç‚¼ä¸¹æ—¥å¿—-29 - å­—èŠ‚è·³åŠ¨ DeerFlow æ·±åº¦ç ”ç©¶æ¡†<em>æ–œä½“æ ·å¼</em>æ¶ ç§æœ‰éƒ¨ç½² æµ‹è¯•ä¸Šæ‰‹ æ¶æ„ç ”ç©¶</strong>ï¼ŒæŒç»­æ‰“é€ å®ç”¨AIå·¥å…·æŒ‡å—ï¼
<strong>AIç ”ç©¶-132 Java ç”Ÿæ€å‰æ²¿ 2025ï¼šSpringã€Quarkusã€GraalVMã€CRaC ä¸äº‘åŸç”Ÿè½åœ°</strong></p>
<h3 data-id="heading-11">ğŸ’» Javaç¯‡æŒç»­æ›´æ–°ä¸­ï¼ˆé•¿æœŸæ›´æ–°ï¼‰</h3>
<p><strong>Java-207 RabbitMQ Direct äº¤æ¢å™¨è·¯ç”±ï¼šRoutingKey ç²¾ç¡®åŒ¹é…ã€é˜Ÿåˆ—å¤šç»‘å®šä¸æ—¥å¿—åˆ†æµå®æˆ˜</strong>
MyBatis å·²å®Œç»“ï¼ŒSpring å·²å®Œç»“ï¼ŒNginxå·²å®Œç»“ï¼ŒTomcatå·²å®Œç»“ï¼Œåˆ†å¸ƒå¼æœåŠ¡å·²å®Œç»“ï¼ŒDubboå·²å®Œç»“ï¼ŒMySQLå·²å®Œç»“ï¼ŒMongoDBå·²å®Œç»“ï¼ŒNeo4jå·²å®Œç»“ï¼ŒFastDFS å·²å®Œç»“ï¼ŒOSSå·²å®Œç»“ï¼ŒGuavaCacheå·²å®Œç»“ï¼ŒEVCacheå·²å®Œç»“ï¼ŒRabbitMQæ­£åœ¨æ›´æ–°... æ·±å…¥æµ…å‡ºåŠ©ä½ æ‰“ç‰¢åŸºç¡€ï¼</p>
<h3 data-id="heading-12">ğŸ“Š å¤§æ•°æ®æ¿å—å·²å®Œæˆå¤šé¡¹å¹²è´§æ›´æ–°ï¼ˆ300ç¯‡ï¼‰ï¼š</h3>
<p>åŒ…æ‹¬ Hadoopã€Hiveã€Kafkaã€Flinkã€ClickHouseã€Elasticsearch ç­‰äºŒåä½™é¡¹æ ¸å¿ƒç»„ä»¶ï¼Œè¦†ç›–ç¦»çº¿+å®æ—¶æ•°ä»“å…¨æ ˆï¼
<strong>å¤§æ•°æ®-278 Spark MLib - åŸºç¡€ä»‹ç» æœºå™¨å­¦ä¹ ç®—æ³• æ¢¯åº¦æå‡æ ‘ GBDTæ¡ˆä¾‹ è¯¦è§£</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item>  </channel></rss>