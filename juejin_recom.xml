<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>æ˜é‡‘æ–‡ç« æ¨è</title>      <link>https://juejin.cn/recommended?sort=newest</link>      <description>ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</description>      <generator>python juejin_recom.py @Pi20</generator>      <item>    <title><![CDATA[ğŸŒ çˆ¶å­ç»„ä»¶ i18nï¼ˆå›½é™…åŒ–ï¼‰æ¶æ„è®¾è®¡æ–¹æ¡ˆ]]></title>    <link>https://juejin.cn/post/7579846221167673398</link>    <guid>https://juejin.cn/post/7579846221167673398</guid>    <pubDate>2025-12-05T01:32:26.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579846221167673398" data-draft-id="7579843977848193078" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸŒ çˆ¶å­ç»„ä»¶ i18nï¼ˆå›½é™…åŒ–ï¼‰æ¶æ„è®¾è®¡æ–¹æ¡ˆ"/> <meta itemprop="keywords" content="æ¶æ„,å‰ç«¯,å‰ç«¯å·¥ç¨‹åŒ–"/> <meta itemprop="datePublished" content="2025-12-05T01:32:26.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="LeonGao"/> <meta itemprop="url" content="https://juejin.cn/user/3976252950591149"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸŒ çˆ¶å­ç»„ä»¶ i18nï¼ˆå›½é™…åŒ–ï¼‰æ¶æ„è®¾è®¡æ–¹æ¡ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3976252950591149/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    LeonGao
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-05T01:32:26.000Z" title="Fri Dec 05 2025 01:32:26 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-05
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body blockquote&gt;:first-child{margin-top:0}.markdown-body blockquote&gt;:last-child{margin-bottom:0}.markdown-body{overflow:hidden;line-height:1.75;font-size:15px;background-image:linear-gradient(90deg,rgba(72,42,10,.05) 5%,rgba(72,42,10,0) 0),linear-gradient(1turn,rgba(72,42,10,.05) 5%,rgba(72,42,10,0) 0);background-size:20px 20px;background-position:50%;padding-top:0!important}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{position:relative;display:flex;border-bottom:5px solid #6d4e00;line-height:35px;letter-spacing:1px;font-size:25px;padding-left:25px;color:#664900;text-shadow:1px 1px 1px #8a6200;padding-bottom:0}.markdown-body h1:before{content:"";display:flex;position:absolute;left:0;top:3px;bottom:0;margin:auto;width:20px;height:20px;background-size:20px 20px;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAQlBMVEVHcEwlRnqtZBj76q4lRnolRnolRnolRnolRnokRnr/gGtrVUeLXDBKTl+hYSHasW7Ik0zs0JG4dCvUdEE0SW+rYxrLQJfjAAAACnRSTlMA////0H/xUaMi5MCoTwAACfVJREFUeNrtnQl3qygUgJ9GXAqosfL//+pgmgXwXmRNJGdu55xO+6rx8+6I8O9fehmGriN93zdN07bVXdpW/ih/SbpuGP6dXbpOXv7z2i3S9ISck2eQOnAhMHG64VQQbmrAaM4B05GmipaGdB+m6BNQPBXzMYtKR3EPbB/RS5eY4g+lIW9WBqnySCvVMrzRpqqs0g9nwVg5p1KYlHEchRT5bftp+y3n6xlQDjAkABtrKULU9f377ev+4/1/NiT+URRiZRhrcZP6WLa/Gq005BORaqXsdYEuHPIP798ZxSyt6d5sVfxJESRCsvB32lfXwhRjnUBGmKXNoJQe04VIASJqRC/9G7yDsyQMiloYz+0pHYghEoPISAGgpDSvHsCoMwmA0mfjSG5UOsqah2RodkljzMkhZZdamiEDB8+Nsbk9T04yGNljDXGOZZ6u0+Tj9DuvbyNJBuPO0ABtLNPlJtfZJ4CNNCWJoY8gddwxNpm9YrHh9DEkBoeMud4Kma8XRZaYpBJOYvg59U9wOsblMvmGrzQe30dyqFZ1dxPfO0FT5BOdw989THVs4q1TFk+iN4PMu7CaLpd4EJOExNaJLE4d0xQKYpJ0cY5Ozcwwu6WOu2cs9TUYxPB4b4fvLRzTUXbT1HH7y0BnB0j6CAehkPFfFzd1TMsi6sU1/P4VM9NiISHBlYnBMR+kad075sXlmMehj1twnfTUqJH4GJfqIKte7S72emPnHbdiYHIB0e6ATjKq1UoTaFh6wBL2csMIVo9fH/v6QRHAgoxrOHQQxG/36tC1ODmGOeBGBRmXalgcdhDQ1xF1vI6a3DF2d4r7G1enOUgNOshlFq7qUCxrca9ldiCam7ilxRbP6JbOYsYtfLFmkcXEgLG1DN/6eroxHjqh5bh+Uw27e1oWVK7pN+AqwzUcq/UYTPw8nWufLFBHN2zcxLRYlmGPs6rA2Wy0uJe/E7TknbHIa1WH1bLA8DAj3JpxET+FCNCWZ5uNT6jxTPZK/1mXoCBeKlGLRT2lP69XN3XdqqCojKX1ZVda6iD2McjeXSHa0I+AHd2InGAJgjRVM6gOBfygDrarRJnho6eQBbrns+HkcNUCWtYClJa66qFgPbqqZEBTCOAgRqxCOhQBWpZeIC6QBq91hEoI5unTjsMsK9DCFigY9WNn19hgVCrELalrTw6WnYMYzjHhQ2/7G2xTx1HvwpzSe4cVi5ORQQwMW9+72FU5L4gGsa6Yu1RcDeIhs64Qs8izt0vGH+n9/IKaIlYpM2UqkYOrwwq5CgBjWpyGtxaonxe4KaJ3hx+7O0HaqVkxLBPj8FmBVmjNevIUFhUuDmMq5NDV9RwyPe/95IvxAhG7ymqxHGE5sZJL2kPLUhUinkXfrnFwGFwXD99djNLSFh/meXEb2B6Oyiwm0I7BC+OlTlOVPk9K8CIYzu5YHwKDTI6XAo5lz3WEqEXwQRKhh5cyLa6D81P4PXBw984as9YaGXHwx4Ba8rmOldUat/BHt9cQ38AaljnBdCJqs60OcXVDJZP//ZwSWtV9FpHNtgg22KuYx/U2tB5Mcp1TYOiphNhiFjgWeJ3DL2OZpuuUisIoUyzZEJ76I+LmyqWdv8LwnEiwMYczihjxeqtBsuFJSTg2oD1ETQx4v6D1VleSZW1xCwvAfVGWpQ069kgrQksAUW2rReYzsboIjSABuDQX0QJwB9cnZVgWVgE31vrklAJnEmVObykgYCk/VGX5OlpuKb5eiovUAvJ2tMstw0kIkNdpiSA91K6XA6K8CVCyr4PePhTo65q3DyX7OpTbSVk1PB62mhJ9HSpSqtKaESxsFRm0tLBVcvTV+vbBrLRK4hC7aitN9B0ZpX6vNMgjGIt5ZdmMv32KrmprD1afsPd4FEhThK0+WfTl3kpd482AGvG3jQdZK1+t8ireDswhofigRb3fxfI/4jj+xkffUX/1ccxxhEP9qyyBEH9Cx9vhf8TB7eiSpBHjZVSa4whQMJC1TqIR6q8RERtjOr2ID0yx3oYi0oAIvZCPz4eG64p3ObuREeOHUIR3MBVJwq9yll5P7KHdiPBOiOoRa/AjXz21J3k04l+i8OjErj4kaXWQiIVO/EvA+KLRAEnUVomtjPd6SvR3RLoeMT54nKFH1EqtkkEGFaQuTlSQrsxhRiOIt51S/Ho8B11+FUlwRaHnU4utEI38/mgSjRJ8PhWEtN6Z6WcncQOU4efjKoh3zfi7/+DfhPrwOZ9a/iYBiVJJxPlei3CqIDTYEqAPFow5/c71fAdVIwmo4n+cTIGbr2n9NULAE5ifcNNS63hvEOFk0wxYnICBBZ0I9xERBVILF0uggNdxuOkR4S6ngvgPmArzHv4KpMKGQFjQ+Rw6q9dC6R6dgZaJF7RVWIH0BTY9h+fz0ohHOyLuy+He/hN4GUR3/RxcBx2f76izarI9CaXmzRmhNQuSfIgJkva5GzN6HJbhQxCNsDGDSh56plmef6sg2eaXPsYBt5W+H6VE6omG6hOS1w4hiTWiThbJ1YO+RSO1vrpMlomf6nhQGz0m7qT6W04XOUHyzhZ4rkG+0hxL66oDW9mnPWyL3TMmssxyQUwr01CHX7b2OvUIaqS48TnMtAoEQTQixJeAlDfSiGmk/l8jpwIpTyFqOfeNIHWBooC036ERtUQp2tm/CKT5jjySbxTlvUVj2yhjvyWDVL3yfKRojXwLSEWUp7q0PBAKPp7m5YGoT3WH7wAZ1BeOywNZv3Gak/LIqriwxbQ5jaTcsEW1eb+FvoWo+zr5V/IUOvNtsapU2zJXSyj0xVB13sPfq0kkZA7dubIIKXIlJ8Cy7u+BN22RVcr+peOuxHdcBbA04FAVmEoEtO5vX55K4KVZS1QJvBBzU1rgUl8JapBNYIowLoZtD9NWRTWKqqe36L48BSz8QPH9epqqIDehlh2UuqocEmrdV7AvhuRoM74m80yeDIEX3ppreNN235FxV58DNjhswn5K8zK21+5ctjut6NmUIoy9tVvitnHr2VDM3ahtW8KQ/Vbsp9GGiWHfk8skyTSFz9/HdxhHe4uR/RxX/mG1SGXwypcDJNmCMfucZ/C1CuCQUbiBUDYbe7tiRkZX8GIat50d+wqR1fdN7ygGzrHrcN4kGFHK02cil5M6INgQVsvnNz77T5PqUFYJJInYmIBplJfP5On4eiOwYfhuCD44oLyYVs43rI1rk3H7usttzq8Qo3j84vavN9mOkAeuq8dHEd9NtCVKX51Oen+MM6IEYvz5StOehKLpIjD+nKU5AQWJpLizdB+1sb5LQvFRxbSJVGHmSdK/0WWaPguEYmcSJ68aWkK6rAw6jwSSCmrTWVHT96R7HwHANEgqybVJL+E2vE2q7Uu91Gr73SbbNUvZDtiOlCeIv4r/AI+0XUwz1lvcAAAAAElFTkSuQmCC")}.markdown-body h2{position:relative;padding:0 0 0 20px;font-size:20px;font-weight:700;color:#614500}.markdown-body h2:before{content:"";position:absolute;top:3px;bottom:0;left:0;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAQlBMVEVHcEwlRnqtZBj76q4lRnolRnolRnolRnolRnokRnr/gGtrVUeLXDBKTl+hYSHasW7Ik0zs0JG4dCvUdEE0SW+rYxrLQJfjAAAACnRSTlMA////0H/xUaMi5MCoTwAACfVJREFUeNrtnQl3qygUgJ9GXAqosfL//+pgmgXwXmRNJGdu55xO+6rx8+6I8O9fehmGriN93zdN07bVXdpW/ih/SbpuGP6dXbpOXv7z2i3S9ISck2eQOnAhMHG64VQQbmrAaM4B05GmipaGdB+m6BNQPBXzMYtKR3EPbB/RS5eY4g+lIW9WBqnySCvVMrzRpqqs0g9nwVg5p1KYlHEchRT5bftp+y3n6xlQDjAkABtrKULU9f377ev+4/1/NiT+URRiZRhrcZP6WLa/Gq005BORaqXsdYEuHPIP798ZxSyt6d5sVfxJESRCsvB32lfXwhRjnUBGmKXNoJQe04VIASJqRC/9G7yDsyQMiloYz+0pHYghEoPISAGgpDSvHsCoMwmA0mfjSG5UOsqah2RodkljzMkhZZdamiEDB8+Nsbk9T04yGNljDXGOZZ6u0+Tj9DuvbyNJBuPO0ABtLNPlJtfZJ4CNNCWJoY8gddwxNpm9YrHh9DEkBoeMud4Kma8XRZaYpBJOYvg59U9wOsblMvmGrzQe30dyqFZ1dxPfO0FT5BOdw989THVs4q1TFk+iN4PMu7CaLpd4EJOExNaJLE4d0xQKYpJ0cY5Ozcwwu6WOu2cs9TUYxPB4b4fvLRzTUXbT1HH7y0BnB0j6CAehkPFfFzd1TMsi6sU1/P4VM9NiISHBlYnBMR+kad075sXlmMehj1twnfTUqJH4GJfqIKte7S72emPnHbdiYHIB0e6ATjKq1UoTaFh6wBL2csMIVo9fH/v6QRHAgoxrOHQQxG/36tC1ODmGOeBGBRmXalgcdhDQ1xF1vI6a3DF2d4r7G1enOUgNOshlFq7qUCxrca9ldiCam7ilxRbP6JbOYsYtfLFmkcXEgLG1DN/6eroxHjqh5bh+Uw27e1oWVK7pN+AqwzUcq/UYTPw8nWufLFBHN2zcxLRYlmGPs6rA2Wy0uJe/E7TknbHIa1WH1bLA8DAj3JpxET+FCNCWZ5uNT6jxTPZK/1mXoCBeKlGLRT2lP69XN3XdqqCojKX1ZVda6iD2McjeXSHa0I+AHd2InGAJgjRVM6gOBfygDrarRJnho6eQBbrns+HkcNUCWtYClJa66qFgPbqqZEBTCOAgRqxCOhQBWpZeIC6QBq91hEoI5unTjsMsK9DCFigY9WNn19hgVCrELalrTw6WnYMYzjHhQ2/7G2xTx1HvwpzSe4cVi5ORQQwMW9+72FU5L4gGsa6Yu1RcDeIhs64Qs8izt0vGH+n9/IKaIlYpM2UqkYOrwwq5CgBjWpyGtxaonxe4KaJ3hx+7O0HaqVkxLBPj8FmBVmjNevIUFhUuDmMq5NDV9RwyPe/95IvxAhG7ymqxHGE5sZJL2kPLUhUinkXfrnFwGFwXD99djNLSFh/meXEb2B6Oyiwm0I7BC+OlTlOVPk9K8CIYzu5YHwKDTI6XAo5lz3WEqEXwQRKhh5cyLa6D81P4PXBw984as9YaGXHwx4Ba8rmOldUat/BHt9cQ38AaljnBdCJqs60OcXVDJZP//ZwSWtV9FpHNtgg22KuYx/U2tB5Mcp1TYOiphNhiFjgWeJ3DL2OZpuuUisIoUyzZEJ76I+LmyqWdv8LwnEiwMYczihjxeqtBsuFJSTg2oD1ETQx4v6D1VleSZW1xCwvAfVGWpQ069kgrQksAUW2rReYzsboIjSABuDQX0QJwB9cnZVgWVgE31vrklAJnEmVObykgYCk/VGX5OlpuKb5eiovUAvJ2tMstw0kIkNdpiSA91K6XA6K8CVCyr4PePhTo65q3DyX7OpTbSVk1PB62mhJ9HSpSqtKaESxsFRm0tLBVcvTV+vbBrLRK4hC7aitN9B0ZpX6vNMgjGIt5ZdmMv32KrmprD1afsPd4FEhThK0+WfTl3kpd482AGvG3jQdZK1+t8ireDswhofigRb3fxfI/4jj+xkffUX/1ccxxhEP9qyyBEH9Cx9vhf8TB7eiSpBHjZVSa4whQMJC1TqIR6q8RERtjOr2ID0yx3oYi0oAIvZCPz4eG64p3ObuREeOHUIR3MBVJwq9yll5P7KHdiPBOiOoRa/AjXz21J3k04l+i8OjErj4kaXWQiIVO/EvA+KLRAEnUVomtjPd6SvR3RLoeMT54nKFH1EqtkkEGFaQuTlSQrsxhRiOIt51S/Ho8B11+FUlwRaHnU4utEI38/mgSjRJ8PhWEtN6Z6WcncQOU4efjKoh3zfi7/+DfhPrwOZ9a/iYBiVJJxPlei3CqIDTYEqAPFow5/c71fAdVIwmo4n+cTIGbr2n9NULAE5ifcNNS63hvEOFk0wxYnICBBZ0I9xERBVILF0uggNdxuOkR4S6ngvgPmArzHv4KpMKGQFjQ+Rw6q9dC6R6dgZaJF7RVWIH0BTY9h+fz0ohHOyLuy+He/hN4GUR3/RxcBx2f76izarI9CaXmzRmhNQuSfIgJkva5GzN6HJbhQxCNsDGDSh56plmef6sg2eaXPsYBt5W+H6VE6omG6hOS1w4hiTWiThbJ1YO+RSO1vrpMlomf6nhQGz0m7qT6W04XOUHyzhZ4rkG+0hxL66oDW9mnPWyL3TMmssxyQUwr01CHX7b2OvUIaqS48TnMtAoEQTQixJeAlDfSiGmk/l8jpwIpTyFqOfeNIHWBooC036ERtUQp2tm/CKT5jjySbxTlvUVj2yhjvyWDVL3yfKRojXwLSEWUp7q0PBAKPp7m5YGoT3WH7wAZ1BeOywNZv3Gak/LIqriwxbQ5jaTcsEW1eb+FvoWo+zr5V/IUOvNtsapU2zJXSyj0xVB13sPfq0kkZA7dubIIKXIlJ8Cy7u+BN22RVcr+peOuxHdcBbA04FAVmEoEtO5vX55K4KVZS1QJvBBzU1rgUl8JapBNYIowLoZtD9NWRTWKqqe36L48BSz8QPH9epqqIDehlh2UuqocEmrdV7AvhuRoM74m80yeDIEX3ppreNN235FxV58DNjhswn5K8zK21+5ctjut6NmUIoy9tVvitnHr2VDM3ahtW8KQ/Vbsp9GGiWHfk8skyTSFz9/HdxhHe4uR/RxX/mG1SGXwypcDJNmCMfucZ/C1CuCQUbiBUDYbe7tiRkZX8GIat50d+wqR1fdN7ygGzrHrcN4kGFHK02cil5M6INgQVsvnNz77T5PqUFYJJInYmIBplJfP5On4eiOwYfhuCD44oLyYVs43rI1rk3H7usttzq8Qo3j84vavN9mOkAeuq8dHEd9NtCVKX51Oen+MM6IEYvz5StOehKLpIjD+nKU5AQWJpLizdB+1sb5LQvFRxbSJVGHmSdK/0WWaPguEYmcSJ68aWkK6rAw6jwSSCmrTWVHT96R7HwHANEgqybVJL+E2vE2q7Uu91Gr73SbbNUvZDtiOlCeIv4r/AI+0XUwz1lvcAAAAAElFTkSuQmCC");background-size:100% 100%;background-repeat:no-repeat;width:15px;height:15px;margin:auto}.markdown-body h3{width:100%;text-align:left;margin:20px 10px 0 0;font-size:18px;font-weight:700;display:inline-block;padding-left:10px;padding-bottom:0;border-left:5px solid #8f6600;color:#614500}.markdown-body h4,.markdown-body h5,.markdown-body h6{font-weight:700;color:#a37400}.markdown-body h4{font-size:17px}.markdown-body h5,.markdown-body h6{display:flex;align-items:center}.markdown-body h5:after,.markdown-body h6:after{display:inline-block;border:2px solid #fff6e0;color:rgba(189,134,0,.5);border-radius:50%;text-align:center;margin-left:5px}.markdown-body h5{font-size:14px}.markdown-body h5:after{content:"5";width:15px;height:15px;line-height:15px;font-size:13px}.markdown-body h6{font-size:12px}.markdown-body h6:after{content:"6";width:13px;height:13px;line-height:13px;font-size:12px}.markdown-body p{color:#412c0c;letter-spacing:1px;font-weight:400;margin-bottom:16px}.markdown-body img{max-width:100%;display:block;margin:auto}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#755300;font-weight:400;border-bottom:1px solid #755300;font-weight:bolder;text-decoration:none}.markdown-body table{width:100%!important;margin:0;font-size:12px;width:auto;max-width:100%;overflow:auto;border-collapse:collapse;border-spacing:0}.markdown-body table img{box-shadow:none}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body thead tr th{text-align:center}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px;box-sizing:border-box;border:1px solid rgba(72,42,10,.1)}.markdown-body blockquote{position:relative;text-size-adjust:100%;line-height:25px;font-weight:400;border-radius:10px;font-style:normal;text-align:left;box-sizing:inherit;border:1px solid #ffd87a;background-color:rgba(189,134,0,.5);margin:20px 0;padding:20px}.markdown-body blockquote p{color:#fff6e0;letter-spacing:2px;margin:0}.markdown-body blockquote:after,.markdown-body blockquote:before{position:absolute;color:#cc9100;font-size:34px;font-weight:700}.markdown-body blockquote:before{content:"â";top:8px;left:5px}.markdown-body blockquote:after{content:"â";right:5px;bottom:-5px}.markdown-body strong{color:#c28a00;font-weight:bolder}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{color:#c28a00}.markdown-body em strong{font-style:normal;color:#c28a00;background-color:#8a6200}.markdown-body s{color:#c28a00}.markdown-body hr{border-top:1px solid #805b00}.markdown-body code,.markdown-body li code,.markdown-body p code{color:#996d00;background-color:rgba(130,98,0,.3)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit;color:#858585;font-family:bold;letter-spacing:1px}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection,.markdown-body img::selection{color:rgba(189,134,0,.5);background-color:#fff}.markdown-body a::selection,.markdown-body b::selection,.markdown-body del::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:transparent}.markdown-body pre&gt;code::selection{background-color:rgba(189,134,0,.5)}.markdown-body .math .math-inline::selection,.markdown-body blockquote::selection,.markdown-body ol::selection,.markdown-body p::selection,.markdown-body strong::selection,.markdown-body table::selection,.markdown-body ul::selection{background-color:rgba(189,134,0,.5)}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸ§­ ä¸€ã€é—®é¢˜èƒŒæ™¯ï¼šå¤šè¯­è¨€çš„â€œè¿é”ååº”â€</h2>
<p>åœ¨å¤æ‚å‰ç«¯é¡¹ç›®ä¸­ï¼Œç»„ä»¶å¾€å¾€åƒå®¶æ—ä½“ç³»ï¼š</p>
<ul>
<li>çˆ¶ç»„ä»¶ = è´Ÿè´£çŠ¶æ€ä¸å…¨å±€é…ç½®ï¼›</li>
<li>å­ç»„ä»¶ = æ‰¿æ‹…ç‹¬ç«‹é€»è¾‘ä¸å±•ç¤ºè´£ä»»ã€‚</li>
</ul>
<p>å½“æˆ‘ä»¬å¼•å…¥å›½é™…åŒ–ï¼ˆi18nï¼‰æœºåˆ¶æ—¶ï¼Œå¾€å¾€ç¢°åˆ°è¿™äº›éš¾é¢˜ï¼š</p>
<ol>
<li>ğŸŒ <strong>å¤šå±‚ç»„ä»¶è¯­è¨€åˆ‡æ¢ä¸åŒæ­¥</strong><br/>
çˆ¶å­ç»„ä»¶ä¹‹é—´è¯­è¨€ç¯å¢ƒä¸ç»Ÿä¸€ï¼ŒUI æ›´æ–°å»¶è¿Ÿæˆ–é”™ä¹±ã€‚</li>
<li>ğŸ§© <strong>è¯­è¨€ä¸Šä¸‹æ–‡ä¼ é€’å¤æ‚</strong><br/>
ç¹çåœ°é€šè¿‡ props å±‚å±‚ä¼ é€’ localeï¼Œä¸ä»…è‡ƒè‚¿è¿˜å®¹æ˜“å‡ºé”™ã€‚</li>
<li>ğŸ”„ <strong>åŠ¨æ€è¯­è¨€åˆ‡æ¢çš„çŠ¶æ€åŒæ­¥éš¾é¢˜</strong><br/>
ç”¨æˆ·æ‰‹åŠ¨åˆ‡æ¢è¯­è¨€ï¼Œä½†å­ç»„ä»¶éœ€è¦æ„ŸçŸ¥å¹¶è‡ªåŠ¨å“åº”ã€‚</li>
</ol>
<hr/>
<h2 data-id="heading-1">ğŸ§  äºŒã€è®¾è®¡ç†å¿µï¼šè¯­è¨€ä¸Šä¸‹æ–‡çš„â€œå®¶æ—è¡€ç¼˜å…±äº«â€</h2>
<p>i18n æ¶æ„çš„æœ¬è´¨æ˜¯ï¼š</p>
<blockquote>
<p><strong>è®©è¯­è¨€ä¸Šä¸‹æ–‡åƒ DNA ä¸€æ ·ï¼Œä»çˆ¶ç»„ä»¶è‡ªç„¶é—ä¼ åˆ°å­ç»„ä»¶ã€‚</strong></p>
</blockquote>
<p>è¿™æ„å‘³ç€æˆ‘ä»¬éœ€è¦ä¸€ä¸ªâ€œä¸Šä¸‹æ–‡åŒ–â€çš„æœºåˆ¶ï¼Œä½¿æ‰€æœ‰ç»„ä»¶ï¼š</p>
<ul>
<li>éƒ½èƒ½è®¿é—®ç»Ÿä¸€çš„è¯­è¨€ç¯å¢ƒï¼›</li>
<li>éƒ½èƒ½ç›‘å¬è¯­è¨€åˆ‡æ¢äº‹ä»¶ï¼›</li>
<li>å¯åœ¨å±€éƒ¨è¦†ç›–è¯­è¨€å†…å®¹ã€‚</li>
</ul>
<p>å› æ­¤è®¾è®¡è¦ç‚¹æ˜¯ä¸‰å±‚ç»“æ„ï¼š</p>

























<table><thead><tr><th>å±‚çº§</th><th>åŠŸèƒ½èŒè´£</th><th>æŠ€æœ¯æ‰‹æ®µ</th></tr></thead><tbody><tr><td>ğŸŒ å…¨å±€å±‚</td><td>å®šä¹‰è¯­è¨€ä¸Šä¸‹æ–‡ä¸åˆ‡æ¢é€»è¾‘</td><td>Context Providerï¼ˆReactï¼‰æˆ– provide/injectï¼ˆVueï¼‰</td></tr><tr><td>ğŸ§± çˆ¶ç»„ä»¶å±‚</td><td>å®šä¹‰å±€éƒ¨å­—å…¸ã€å¯è¦†ç›–å…¨å±€</td><td>å±€éƒ¨ i18n å¯¹è±¡åˆå¹¶</td></tr><tr><td>ğŸ§© å­ç»„ä»¶å±‚</td><td>å“åº”è¯­è¨€å˜åŒ–ï¼Œå®æ—¶æ¸²æŸ“</td><td>ç›‘å¬ä¸Šä¸‹æ–‡å˜åŒ–ï¼ŒåŠ¨æ€æ¸²æŸ“</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-2">ğŸ› ï¸ ä¸‰ã€æ¶æ„æ¨¡å‹è§†å›¾</h2>
<pre><code class="hljs language-scss" lang="scss">AppRoot (GlobalI18nProvider)
â”‚
â”œâ”€â”€ ParentComponent (å¯å®šä¹‰å±€éƒ¨i18nè¦†ç›–)
â”‚     â”‚
â”‚     â”œâ”€â”€ ChildComponentAï¼ˆå…±äº«æ¥è‡ªParentçš„i18nï¼‰
â”‚     â””â”€â”€ ChildComponentBï¼ˆå¯å®šä¹‰è‡ªæœ‰è¯æ¡æˆ–ä¾èµ–çˆ¶çº§ï¼‰
â”‚
â””â”€â”€ OtherComponentï¼ˆå¤ç”¨å…¨å±€è¯­è¨€è¯å…¸ï¼‰
</code></pre>
<hr/>
<h2 data-id="heading-3">ğŸ”§ å››ã€JavaScript å®ç°ç¤ºæ„ï¼ˆæ¡†æ¶æ— å…³ï¼‰</h2>
<p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€åŒ–çš„ JS æ¶æ„æ¨¡å‹ï¼ˆå¯è¿ç§»åˆ° React/Vue/Svelte ç­‰æ¡†æ¶ï¼‰ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ğŸŒ i18nContext.js - å®šä¹‰å…¨å±€è¯­è¨€ä¸Šä¸‹æ–‡</span>
<span class="hljs-keyword">const</span> I18nContext = (<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">let</span> currentLocale = <span class="hljs-string">'en'</span>;
  <span class="hljs-keyword">const</span> listeners = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>();

  <span class="hljs-comment">// å…¨å±€è¯å…¸</span>
  <span class="hljs-keyword">const</span> dictionaries = {
    <span class="hljs-attr">en</span>: { <span class="hljs-attr">greeting</span>: <span class="hljs-string">"Hello"</span>, <span class="hljs-attr">farewell</span>: <span class="hljs-string">"Goodbye"</span> },
    <span class="hljs-attr">zh</span>: { <span class="hljs-attr">greeting</span>: <span class="hljs-string">"ä½ å¥½"</span>, <span class="hljs-attr">farewell</span>: <span class="hljs-string">"å†è§"</span> }
  };

  <span class="hljs-keyword">return</span> {
    <span class="hljs-title function_">t</span>(<span class="hljs-params">key</span>) {
      <span class="hljs-keyword">return</span> dictionaries[currentLocale][key] || key;
    },
    <span class="hljs-title function_">setLocale</span>(<span class="hljs-params">lang</span>) {
      currentLocale = lang;
      listeners.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">fn</span> =&gt;</span> <span class="hljs-title function_">fn</span>(lang));
    },
    <span class="hljs-title function_">getLocale</span>(<span class="hljs-params"/>) {
      <span class="hljs-keyword">return</span> currentLocale;
    },
    <span class="hljs-title function_">subscribe</span>(<span class="hljs-params">fn</span>) {
      listeners.<span class="hljs-title function_">add</span>(fn);
      <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> listeners.<span class="hljs-title function_">delete</span>(fn);
    }
  };
})();
</code></pre>
<hr/>
<h3 data-id="heading-4">ğŸ§± çˆ¶ç»„ä»¶å®šä¹‰</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// çˆ¶ç»„ä»¶ï¼šå®šä¹‰å±€éƒ¨å­—å…¸ï¼Œå¹¶åˆå¹¶å…¨å±€å­—å…¸</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ParentComponent</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">localDict</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">localDict</span> = localDict;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">childComponents</span> = [];
    <span class="hljs-comment">// è®¢é˜…è¯­è¨€å˜åŒ–</span>
    I18nContext.<span class="hljs-title function_">subscribe</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">render</span>());
  }

  <span class="hljs-title function_">t</span>(<span class="hljs-params">key</span>) {
    <span class="hljs-keyword">const</span> globalValue = I18nContext.<span class="hljs-title function_">t</span>(key);
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">localDict</span>?.[I18nContext.<span class="hljs-title function_">getLocale</span>()]?.[key] || globalValue;
  }

  <span class="hljs-title function_">addChild</span>(<span class="hljs-params">child</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">childComponents</span>.<span class="hljs-title function_">push</span>(child);
    child.<span class="hljs-title function_">setParent</span>(<span class="hljs-variable language_">this</span>);
  }

  <span class="hljs-title function_">render</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`ğŸ‘¨â€ğŸ‘©â€ğŸ‘§ çˆ¶ç»„ä»¶è¯­è¨€ï¼š<span class="hljs-subst">${I18nContext.getLocale()}</span>`</span>);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">t</span>(<span class="hljs-string">'greeting'</span>));
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">childComponents</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">c</span> =&gt;</span> c.<span class="hljs-title function_">render</span>());
  }
}
</code></pre>
<hr/>
<h3 data-id="heading-5">ğŸ§© å­ç»„ä»¶å®šä¹‰</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ChildComponent</span> {
  <span class="hljs-title function_">setParent</span>(<span class="hljs-params">parent</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">parent</span> = parent;
    <span class="hljs-comment">// è‡ªåŠ¨å“åº”è¯­è¨€å˜åŒ–</span>
    I18nContext.<span class="hljs-title function_">subscribe</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">render</span>());
  }

  <span class="hljs-title function_">render</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> locale = I18nContext.<span class="hljs-title function_">getLocale</span>();
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`ğŸ§’ å­ç»„ä»¶è¯­è¨€ï¼š<span class="hljs-subst">${locale}</span>`</span>);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">parent</span>.<span class="hljs-title function_">t</span>(<span class="hljs-string">'farewell'</span>));
  }
}
</code></pre>
<hr/>
<h3 data-id="heading-6">ğŸ§‘â€ğŸ’» ä½¿ç”¨ç¤ºä¾‹</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åˆ›å»ºçˆ¶ã€å­ç»„ä»¶</span>
<span class="hljs-keyword">const</span> parent = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ParentComponent</span>({
  <span class="hljs-attr">zh</span>: { <span class="hljs-attr">greeting</span>: <span class="hljs-string">"æ¬¢è¿æ¥åˆ°çˆ¶ç»„ä»¶"</span> },
  <span class="hljs-attr">en</span>: { <span class="hljs-attr">greeting</span>: <span class="hljs-string">"Welcome to Parent Component"</span> }
});
<span class="hljs-keyword">const</span> child = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ChildComponent</span>();
parent.<span class="hljs-title function_">addChild</span>(child);

<span class="hljs-comment">// åˆå§‹æ¸²æŸ“</span>
parent.<span class="hljs-title function_">render</span>();

<span class="hljs-comment">// åˆ‡æ¢è¯­è¨€</span>
<span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"\nğŸš€ åˆ‡æ¢åˆ°ä¸­æ–‡"</span>);
  I18nContext.<span class="hljs-title function_">setLocale</span>(<span class="hljs-string">'zh'</span>);
}, <span class="hljs-number">1000</span>);
</code></pre>
<h3 data-id="heading-7">âœ… è¾“å‡ºç»“æœ</h3>
<pre><code class="hljs language-css" lang="css">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§ çˆ¶ç»„ä»¶è¯­è¨€ï¼šen
Welcome <span class="hljs-selector-tag">to</span> Parent Component
ğŸ§’ å­ç»„ä»¶è¯­è¨€ï¼šen
Goodbye

ğŸš€ åˆ‡æ¢åˆ°ä¸­æ–‡
ğŸ‘¨â€ğŸ‘©â€ğŸ‘§ çˆ¶ç»„ä»¶è¯­è¨€ï¼šzh
æ¬¢è¿æ¥åˆ°çˆ¶ç»„ä»¶
ğŸ§’ å­ç»„ä»¶è¯­è¨€ï¼šzh
å†è§
</code></pre>
<hr/>
<h2 data-id="heading-8">ğŸ§© äº”ã€æ¶æ„ç»†èŠ‚ä¼˜åŒ–å»ºè®®</h2>



































<table><thead><tr><th>ç‰¹æ€§</th><th>æ–¹æ¡ˆ</th><th>ä¼˜ç‚¹</th></tr></thead><tbody><tr><td>åŠ¨æ€è¯å…¸åŠ è½½</td><td>ä½¿ç”¨å¼‚æ­¥ importï¼Œæ ¹æ® locale æŒ‰éœ€åŠ è½½</td><td>å‡å°‘å†…å­˜å ç”¨</td></tr><tr><td>å±€éƒ¨è¦†ç›–æœºåˆ¶</td><td>ä½¿ç”¨ <code>Object.assign(global, local)</code> åˆå¹¶ç­–ç•¥</td><td>çµæ´»æ‰©å±•</td></tr><tr><td>ç¼“å­˜å±‚</td><td>åˆ©ç”¨ Map ç¼“å­˜å·²æ¸²æŸ“ç»“æœ</td><td>æå‡æ€§èƒ½</td></tr><tr><td>å“åº”å¼è¯­è¨€åˆ‡æ¢</td><td>ä½¿ç”¨ Proxy æˆ– Signals å“åº”æ•°æ®å˜åŒ–</td><td>å‡å°‘æ‰‹åŠ¨ç»‘å®š</td></tr><tr><td>æ’ä»¶åŒ–</td><td>å„æ¨¡å—å°è£…æˆ Plugin æ³¨å†Œ</td><td>æ¨¡å—åŒ–ç»´æŠ¤æ–¹ä¾¿</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-9">ğŸŒˆ å…­ã€æ€»ç»“ï¼šè®©ç»„ä»¶â€œä¼šè¯´è¯â€çš„ç§‘å­¦è‰ºæœ¯</h2>
<ul>
<li>ğŸ§¬ <strong>i18n æ¶æ„çš„æ ¸å¿ƒåœ¨äº Context ä¸ç»§æ‰¿</strong></li>
<li>âš¡ <strong>çˆ¶å­é€šä¿¡åº”åŸºäºå“åº”å¼æœºåˆ¶ï¼Œè€Œéé™æ€ä¼ å‚</strong></li>
<li>ğŸ” <strong>è¯­è¨€åˆ‡æ¢åº”è§¦å‘å…¨é“¾è·¯ UI åˆ·æ–°</strong></li>
<li>ğŸ§­ <strong>å±€éƒ¨è¯å…¸ â‰  é‡å¤é€ è½®å­ï¼Œè€Œæ˜¯è¯­ä¹‰å·®å¼‚çš„ä¼˜åŒ–å±‚</strong></li>
</ul>
<blockquote>
<p>â€œè®©ç»„ä»¶å­¦ä¼šå¤šè¯­è¨€ï¼Œå…¶å®å°±æ˜¯è®©å‰ç«¯æ‹¥æœ‰æ›´å¼ºçš„è¡¨è¾¾åŠ›ã€‚â€ ğŸŒ</p>
</blockquote>
<hr/>
<h2 data-id="heading-10">ğŸ’¡ æ‰©å±•æ–¹å‘</h2>
<p>âœ… å¤šå±‚çº§ i18n ç»§æ‰¿è°ƒåº¦æœºåˆ¶<br/>
âœ… SSR/CSR ç¯å¢ƒçš„è¯­è¨€åŒæ­¥æ–¹æ¡ˆ<br/>
âœ… WebAIGC + i18nï¼šAI è‡ªåŠ¨å¤šè¯­è¨€ç¿»è¯‘å¡«å…… UI</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Android + Google Playï¼šè€é¡¹ç›®é€‚é…å®æˆ˜æŒ‡å—]]></title>    <link>https://juejin.cn/post/7579946275436838922</link>    <guid>https://juejin.cn/post/7579946275436838922</guid>    <pubDate>2025-12-05T09:08:30.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579946275436838922" data-draft-id="7579946275436134410" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Android + Google Playï¼šè€é¡¹ç›®é€‚é…å®æˆ˜æŒ‡å—"/> <meta itemprop="keywords" content="Android,Google"/> <meta itemprop="datePublished" content="2025-12-05T09:08:30.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ²¡æœ‰äº†é‡è§"/> <meta itemprop="url" content="https://juejin.cn/user/1521379826212983"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Android + Google Playï¼šè€é¡¹ç›®é€‚é…å®æˆ˜æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1521379826212983/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ²¡æœ‰äº†é‡è§
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-05T09:08:30.000Z" title="Fri Dec 05 2025 09:08:30 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-05
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1:å‰æƒ…æè¦</h2>
<p>ä½œä¸ºä¸€ä¸ªAndroidå¼€å‘ ,é¢å¯¹æ—¥ç›Šæ“è›‹çš„åº”ç”¨å¸‚åœº,æ•¢æ€’ä¸æ•¢è¨€.ä»€ä¹ˆtarget 28 ä»€ä¹ˆæƒé™è¯´æ˜,ä»€ä¹ˆéšç§åè®®,ä»€ä¹ˆè·å–æ‰‹æœºä¿¡æ¯è¿‡äºé¢‘ç¹....</p>
<p>è¿™éƒ¨Google play åˆæŠ˜è…¾èµ·æ¥äº†.</p>
<p>æ²¡åŠæ³•åªèƒ½é€‚é…äº†,QBè‡ªå·±,å¹¸ç¦ä»–äºº,ç¥æ„¿.xxx.xxxxx.....</p>
<h2 data-id="heading-1">2:ç°å®ç¯å¢ƒ</h2>
<p>ç»´æŠ¤äº†åå¹´å·¦å³çš„è€é¡¹ç›®(<code>Okgo</code>,<code>ButterKnife</code> æ—¶ä»£çš„äº§ç‰©,ä¸”å¤–åŒ…å‡ºæ¥çš„é¡¹ç›®)</p>
<ul>
<li>targetSdkVersion 33</li>
<li>Gradle 7.3.1</li>
<li>Jdk 8</li>
<li>ä¸€ä¸‡ä¸ªä¸‰æ–¹åº“</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6873df842b404380a2f8dd5aac9ea816~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rKh5pyJ5LqG6YGH6KeB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765530640&amp;x-signature=M4uddWJoegT2sewVuZ4LSe7qU%2BY%3D" alt="ä¸€éƒ¨åˆ†.png" loading="lazy"/></p>
<h2 data-id="heading-2">3:Google Play æäº¤å‰éœ€è¦å¤„ç†çš„äº‹æƒ…</h2>
<p>è€çˆ·ä»¬æ—¶ä»£å˜äº†,ä¸€ä¸ªGradle+JDK8 æ‰“å¤©ä¸‹çš„æ—¶ä»£å˜äº†</p>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fdeveloper.android.google.cn%2Fgoogle%2Fplay%2Frequirements%2Ftarget-sdk" title="https://link.juejin.cn/?target=https%3A%2F%2Fdeveloper.android.google.cn%2Fgoogle%2Fplay%2Frequirements%2Ftarget-sdk" target="_blank">APIè¦æ±‚å®˜æ–¹è¯´æ˜</a></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/40f1d10dfc4f431abb6f093e605c02a6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rKh5pyJ5LqG6YGH6KeB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765530640&amp;x-signature=AXv%2BSX1YTLsym6VLNd%2FXV%2FO%2B5JI%3D" alt="image.png" loading="lazy"/></p>
<p><code>æäº¤åº”ç”¨å¸‚åœºè¦å¤„ç†çš„é—®é¢˜:</code></p>
<ul>
<li>targetSdkVersion 35</li>
<li>16KB Size é€‚é…</li>
<li>AAB æ‹†åŒ…(å¤ªå¤§çš„éœ€æ±‚æ‹†åŒ…)</li>
</ul>
<h2 data-id="heading-3">4 targetSdkVersion 35 å˜åŠ¨</h2>
<p>å®˜æ–¹è¦æ±‚å¿…é¡»ä½¿ç”¨target 35 ç„¶åä¸€ç³»åˆ—è¿é”ååº”å°±æ¥äº†,çœŸæ˜¯ä¸‹äº†ä¸€æ­¥å¥½æ£‹å•Š</p>
<p>ä½¿ç”¨targetVersion 35 --&gt;éœ€è¦Gradle 8.0+ --&gt;å†éœ€è¦Jdk17 --&gt;å†éœ€è¦kotlin 1.9+</p>
<p><code>å˜åŠ¨è·¯å¾„</code></p>
<p><strong>targetSdkVersionï¼š35</strong><br/>
å®˜æ–¹è¦æ±‚ 2025 å¹´æ–°æäº¤ App å¿…é¡» target 35+ï¼Œ</p>
<p><strong>Gradle / Android Gradle Pluginï¼š8.0+ï¼ˆæ¨è 8.6ï¼‰</strong><br/>
å¯¹åº” Koala / Ladybug ç³»åˆ—ã€‚</p>
<pre><code class="hljs language-arduino" lang="arduino">classpath <span class="hljs-string">'com.android.tools.build:gradle:8.6.0'</span>
</code></pre>
<p><strong>JDKï¼š17ï¼ˆå¿…é¡»ï¼‰</strong><br/>
Google Play å·²ç»è¦æ±‚ AGP 8+ å¿…é¡»ä½¿ç”¨ JDK 17ã€‚<br/>
Android Studio å†…ç½®çš„ JDK 17 ç›´æ¥ç”¨å³å¯ï¼Œä¸è¦è‡ªå·±ä¹±è£…ã€‚</p>
<p><strong>Kotlinï¼š1.9.23 æˆ– 2.0.0ï¼ˆæ¨è 1.9.xï¼‰</strong><br/>
æ— ç‰¹æ®Šéœ€æ±‚ç”¨ <strong>1.9.23</strong> æœ€ç¨³ï¼ŒKotlin 2.0 è™½ç„¶å¯ç”¨ï¼Œä½†ç”Ÿæ€å…¼å®¹æ€§ä»åœ¨é€‚é…ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">plugins {
    <span class="hljs-built_in">id</span> <span class="hljs-string">"org.jetbrains.kotlin.android"</span> version <span class="hljs-string">"1.9.23"</span>
}
</code></pre>
<p><strong>ç­¾åï¼ˆå¿…é¡» V1 + V2 + V3ï¼‰</strong><br/>
Google Play ä¼šè‡ªåŠ¨ç”Ÿæˆ V4ï¼Œæ‰€ä»¥ä½ æœ¬åœ°ä¿æŒï¼š</p>
<ul>
<li>âœ” V1ï¼ˆJar Signatureï¼‰</li>
<li>âœ” V2ï¼ˆAPK Signature Scheme v2ï¼‰</li>
<li>âœ” V3ï¼ˆAPK Signature Scheme v3ï¼‰</li>
</ul>
<p>Android Studio é»˜è®¤å‹¾é€‰å³å¯ã€‚</p>
<pre><code class="hljs language-lua" lang="lua">
targetSdkVersion <span class="hljs-number">35</span> ç‰ˆæœ¬<span class="hljs-comment">--&gt;</span>
gradle <span class="hljs-number">8.0</span>+ç‰ˆæœ¬<span class="hljs-comment">--&gt;</span>
jdk17+ ç‰ˆæœ¬<span class="hljs-comment">--&gt;</span>
kotlin <span class="hljs-number">1.9</span><span class="hljs-number">.23</span>ç‰ˆæœ¬<span class="hljs-comment">--&gt;</span>
ç­¾å

çœŸæ˜¯ä¸€æ­¥å¥½æ£‹å•Š,è€çˆ·ä»¬æ—¶ä»£å˜äº†,ä¸æ˜¯ä¸€ä¸ªgradle +jdk8 æ‰“å¤©ä¸‹çš„æ—¶ä»£äº†

</code></pre>
<p><code>ç°åœ¨ä½¿ç”¨çš„ç‰ˆæœ¬:</code></p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">agp</span> = <span class="hljs-string">"8.9.1"</span>
<span class="hljs-attr">compileSdkVersion</span>= <span class="hljs-string">"36"</span>
<span class="hljs-attr">kotlin</span> = <span class="hljs-string">"2.2.10"</span>
<span class="hljs-attr">jdk</span>=<span class="hljs-number">17</span>
</code></pre>
<h2 data-id="heading-4">5: 16KB Size é€‚é…</h2>
<p>ä½ çœŸä¸é€‚é…çœŸæ•¢ç»™ä½ ä¸èƒ½ç”¨!!!</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1d1bf2bd624a418a8f45d0edcf2a6ce9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rKh5pyJ5LqG6YGH6KeB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765530640&amp;x-signature=BBoxwWYfQ6M%2BtzMpA2vBY%2FBxX5c%3D" alt="image.png" loading="lazy"/>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.google.cn%2Fguide%2Fpractices%2Fpage-sizes%3Fhl%3Dzh_cn" target="_blank" title="https://developer.android.google.cn/guide/practices/page-sizes?hl=zh_cn" ref="nofollow noopener noreferrer">16K Size å®˜æ–¹è¯´æ˜</a></p>
<h4 data-id="heading-5">5.1Google Play æäº¤æ˜¾ç¤ºä¸æ”¯æŒ 16KB çš„åº“</h4>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6cac8e66e60641ea80cbd57bef57bb45~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rKh5pyJ5LqG6YGH6KeB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765530640&amp;x-signature=nn1ZQf08XRokCeWS7hoYBUJZPDM%3D" alt="a3954fe97792ba48d57821e51e5f39be.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6c0655a485a04ae0ab2547a2980a0175~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rKh5pyJ5LqG6YGH6KeB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765530640&amp;x-signature=HOGXoJVIurPOuLGcEDG8yybbkOY%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dc4c13e7434c4767b0b3c88bdc57729d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rKh5pyJ5LqG6YGH6KeB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765530640&amp;x-signature=rzAiS8GaW%2BMRjjF0G4mIjnE3XoU%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-6">5.2 æŸ¥æ‰¾.soåº“æ‰€å±ä¸‰æ–¹åº“(<code>é‡ç‚¹</code>)</h4>
<p><code>æ³¨æ„:</code></p>
<ul>
<li>æå‰bulidä¸€ä¸‹</li>
<li>æ‰§è¡Œ bundleRelease/assembleRelease ä»»åŠ¡</li>
</ul>

<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// åœ¨é¡¹ç›® build.gradle æˆ– app/build.gradle ä¸­æ·»åŠ åˆ°æœ€ä¸‹æ–¹å°±è¡Œ</span>

tasks<span class="hljs-selector-class">.whenTaskAdded</span> { task -&gt;
    <span class="hljs-comment">// åŒ¹é…æ‰€æœ‰ merge&lt;Flavor&gt;&lt;BuildType&gt;NativeLibs ä»»åŠ¡</span>
    if (task.name.matches(/merge.*NativeLibs/)) {
        task<span class="hljs-selector-class">.doFirst</span> {
            <span class="hljs-built_in">println</span>("------- [${task.name}] start scanning so files -------")

            <span class="hljs-comment">// éå†æ‰€æœ‰è¾“å…¥æ–‡ä»¶</span>
            it<span class="hljs-selector-class">.inputs</span><span class="hljs-selector-class">.files</span><span class="hljs-selector-class">.each</span> { file -&gt;
                <span class="hljs-built_in">printSoFiles</span>(file)
            }

            <span class="hljs-built_in">println</span>("------- [${task.name}] end scanning so files -------")
        }
    }
}

<span class="hljs-comment">// é€’å½’æŸ¥æ‰¾ .so æ–‡ä»¶</span>
def <span class="hljs-built_in">printSoFiles</span>(File file) {
    if (file == null || !file.exists()) return

    if (file.isDirectory()) {
        file<span class="hljs-selector-class">.listFiles</span>()?<span class="hljs-selector-class">.each</span> { <span class="hljs-built_in">printSoFiles</span>(it) }
    } else if (file.name.endsWith(".so")) {
        <span class="hljs-built_in">println</span>("Found .so: ${file.absolutePath}")
    }
}
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0cd759745a974e63ab91788f02f475db~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rKh5pyJ5LqG6YGH6KeB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765530640&amp;x-signature=O%2Bw%2BKZooRgvBtNX20PpSzFw14hc%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-7">5.3 ä¿®æ”¹çš„ä¸æ”¯æŒ 16KB soçš„åº“</h4>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-comment">// è¿™ä¸ª4.3ç‰ˆæœ¬æ”¯æŒäº† librsjni_androidx.so</span>
  api <span class="hljs-symbol">'jp</span>.wasabeef:glide-transformations:<span class="hljs-number">4.0</span>.<span class="hljs-number">1</span>'<span class="hljs-comment">//é…åˆglideå®ç°é«˜æ–¯æ¨¡ç³Š</span>
  api <span class="hljs-symbol">'jp</span>.wasabeef:glide-transformations:<span class="hljs-number">4.3</span>.<span class="hljs-number">0</span>'<span class="hljs-comment">//é…åˆglideå®ç°é«˜æ–¯æ¨¡ç³Š</span>
  
  <span class="hljs-comment">// è¿™ä¸ªéœ€è¦ç”³è¯·çš„æ–°ç‰ˆæœ¬</span>
  api <span class="hljs-symbol">'com</span>.blankj:utilcodex:<span class="hljs-number">1.31</span>.<span class="hljs-number">0</span>'
  api <span class="hljs-symbol">'com</span>.blankj:utilcodex:<span class="hljs-number">1.31</span>.<span class="hljs-number">1</span>'
  
  <span class="hljs-comment">// ç›´æ¥åˆ é™¤äº† å› ä¸º å›½å¤–ä¸éœ€è¦ å¯ä»¥ç”³è¯·proç‰ˆæœ¬ æä¾›äº†</span>
 api <span class="hljs-symbol">'com</span>.tencent.bugly:crashreport:<span class="hljs-number">3.4</span>.<span class="hljs-number">4</span>'
 api <span class="hljs-symbol">'com</span>.tencent.bugly:nativecrashreport:<span class="hljs-number">3.9</span>.<span class="hljs-number">2</span>'
 
 <span class="hljs-comment">// æ›´æ–°æ–°ç‰ˆæœ¬ libmmkv.so</span>
 api  <span class="hljs-symbol">'com</span>.tencent:mmkv-<span class="hljs-keyword">static</span>:<span class="hljs-number">1.2</span>.<span class="hljs-number">14</span>'
 api  <span class="hljs-symbol">'com</span>.tencent:mmkv-<span class="hljs-keyword">static</span>:<span class="hljs-number">1.3</span>.<span class="hljs-number">14</span>'
	

</code></pre>
<h2 data-id="heading-8">6: <code>é‡ç‚¹:</code>Google Play æµ‹è¯•ç‰ˆæœ¬æ”¯æŒè®¾å¤‡æ•°ä¸º0çš„æƒ…å†µ</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dc4c13e7434c4767b0b3c88bdc57729d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rKh5pyJ5LqG6YGH6KeB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765530640&amp;x-signature=rzAiS8GaW%2BMRjjF0G4mIjnE3XoU%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-9">6.1 ABIï¼ˆCPU æ¶æ„ï¼‰é…ç½®å†²çª <code>splits.abi</code> å’Œ <code>ndk.abiFilters</code> åŒæ—¶å­˜åœ¨</h4>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">// æ ¹æ®è‡ªå·±éœ€æ±‚é…ç½®æ¶æ„ </span>
ndk {
    <span class="hljs-comment">//è®¾ç½®æ”¯æŒçš„SOåº“æ¶æ„</span>
    abiFilters <span class="hljs-string">'armeabi-v7a'</span>, <span class="hljs-string">'arm64-v8a'</span>
}
</code></pre>
<h4 data-id="heading-10">6.2 Manifest é™åˆ¶è¿‡åº¦</h4>
<p><code>&lt;supports-gl-texture android:name="GL_IMG_texture_consistent"/&gt; </code>ä¼šå¯¼è‡´æ”¯æŒè®¾å¤‡æ•° 0</p>
<p><code>æ³¨æ„:</code>
å»ºè®®ç›´æ¥åˆ é™¤</p>
<pre><code class="hljs language-ini" lang="ini">ä¼šå¯¼è‡´:  ä¸æ”¯æŒçš„å¿…ç”¨GLçº¹ç†å‹ç¼©æ ¼å¼ï¼šGL_IMG_texture_consistent
 é…ç½® false ä¹Ÿä¸è¡Œ
&lt;supports-gl-texture android:<span class="hljs-attr">name</span>=<span class="hljs-string">"GL_IMG_texture_consistent"</span>/&gt;
</code></pre>
<p><code>å…¶ä»–å½±å“çš„åœ°æ–¹æ”¹æˆfalse:</code></p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- æ‘„åƒå¤´ç‰¹æ€§è®¾ç½®ä¸ºå¯é€‰ï¼Œä¸å¼ºåˆ¶è¦æ±‚ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">uses-feature</span> <span class="hljs-attr">android:name</span>=<span class="hljs-string">"android.hardware.camera"</span> <span class="hljs-attr">android:required</span>=<span class="hljs-string">"false"</span>/&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">uses-feature</span> <span class="hljs-attr">android:name</span>=<span class="hljs-string">"android.hardware.autofocus"</span> <span class="hljs-attr">android:required</span>=<span class="hljs-string">"false"</span>/&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">uses-feature</span> <span class="hljs-attr">android:name</span>=<span class="hljs-string">"android.hardware.camera.autofocus"</span> <span class="hljs-attr">android:required</span>=<span class="hljs-string">"false"</span>/&gt;</span>

<span class="hljs-comment">&lt;!-- OpenGL ES 2.0ï¼Œä¸å¼ºåˆ¶è¦æ±‚ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">uses-feature</span>
    <span class="hljs-attr">android:glEsVersion</span>=<span class="hljs-string">"0x00020000"</span>
    <span class="hljs-attr">android:required</span>=<span class="hljs-string">"false"</span>/&gt;</span>

<span class="hljs-comment">&lt;!-- æ”¯æŒæ‰€æœ‰å±å¹•å°ºå¯¸ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">supports-screens</span>
    <span class="hljs-attr">android:anyDensity</span>=<span class="hljs-string">"true"</span>
    <span class="hljs-attr">android:smallScreens</span>=<span class="hljs-string">"true"</span>
    <span class="hljs-attr">android:normalScreens</span>=<span class="hljs-string">"true"</span>
    <span class="hljs-attr">android:largeScreens</span>=<span class="hljs-string">"true"</span>
    <span class="hljs-attr">android:xlargeScreens</span>=<span class="hljs-string">"true"</span>/&gt;</span>
</code></pre>
<h4 data-id="heading-11">6.3 16KB å…¼å®¹</h4>
<p>ä¸æ”¯æŒçš„soæ‰¾æä¾›æ–¹å¤„ç†,å¤„ç†ä¸äº†çš„åˆ é™¤æˆ–è€…æ‰¾æ›¿ä»£æ–¹æ¡ˆ</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/687ae455040844c1a9f9a0dd1f1da387~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rKh5pyJ5LqG6YGH6KeB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765530640&amp;x-signature=MWEIUcdW3xO3%2Fsr%2BbwZUwbuo%2Fig%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-12">æ€»ç»“</h2>
<p>Google Play å‘å¸ƒè‰°éš¾,ä¸”è¡Œä¸”çæƒœå§,å„ç§ç¨€å¥‡å¤æ€ªéƒ½ä¼šå‡ºç°.è´¦å·ç”³è¯·,åè®® é¡¹ç›®é€‚é….....ä¸”è¡Œä¸”çæƒœå§.</p>
<p>æ¬¢è¿éª¡å­ä»¬ä¸€èµ·æ²Ÿé€š.æœ‰äº‹å„¿æ»´æ»´...</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Flutter: Dio + Retrofit å…¥é—¨ï¼ˆé¢å‘ Android å¼€å‘è€…ï¼‰]]></title>    <link>https://juejin.cn/post/7579921879973429294</link>    <guid>https://juejin.cn/post/7579921879973429294</guid>    <pubDate>2025-12-05T06:00:34.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579921879973429294" data-draft-id="7579567346390695962" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Flutter: Dio + Retrofit å…¥é—¨ï¼ˆé¢å‘ Android å¼€å‘è€…ï¼‰"/> <meta itemprop="keywords" content="Flutter"/> <meta itemprop="datePublished" content="2025-12-05T06:00:34.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="renxhui"/> <meta itemprop="url" content="https://juejin.cn/user/1292681403181944"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Flutter: Dio + Retrofit å…¥é—¨ï¼ˆé¢å‘ Android å¼€å‘è€…ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1292681403181944/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    renxhui
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-05T06:00:34.000Z" title="Fri Dec 05 2025 06:00:34 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-05
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    30
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Flutter: Dio + Retrofit å…¥é—¨ï¼ˆé¢å‘ Android å¼€å‘è€…ï¼‰</h2>
<blockquote>
<p>ç›®æ ‡ï¼šç”¨ Android Retrofit çš„æ€ç»´å¿«é€Ÿä¸Šæ‰‹ Dart/Flutter çš„ Dio + Retrofit ç»„åˆï¼Œä»ä¾èµ–å¼•å…¥ â†’ åˆå§‹åŒ– â†’ æ¥å£å®šä¹‰ â†’ ä»£ç ç”Ÿæˆ â†’ è°ƒç”¨ä¸æ’é”™ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-1">1. ä¾èµ–å¼•å…¥ï¼ˆpubspec.yamlï¼‰</h3>
<p>ä½ é¡¹ç›®å·²åŒ…å«éƒ¨åˆ†ä¾èµ–ï¼Œå¯æŒ‰éœ€æ ¡å¯¹ç‰ˆæœ¬ï¼ˆä»¥ä¸‹ä¸ºç¤ºä¾‹ï¼Œå»ºè®®ä¸ç°æœ‰é¡¹ç›®ç‰ˆæœ¬ä¸€è‡´ï¼‰ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">dependencies:</span>
  <span class="hljs-attr">dio:</span> <span class="hljs-string">^5.x.x</span>
  <span class="hljs-attr">retrofit:</span> <span class="hljs-string">^4.x.x</span>
  <span class="hljs-attr">json_annotation:</span> <span class="hljs-string">^4.x.x</span>

<span class="hljs-attr">dev_dependencies:</span>
  <span class="hljs-attr">build_runner:</span> <span class="hljs-string">^2.x.x</span>
  <span class="hljs-attr">retrofit_generator:</span> <span class="hljs-string">^8.x.x</span>
  <span class="hljs-attr">json_serializable:</span> <span class="hljs-string">^6.x.x</span>
</code></pre>
<p>æ‰§è¡Œï¼š</p>
<pre><code class="hljs language-bash" lang="bash">flutter pub get
</code></pre>
<hr/>
<h3 data-id="heading-2">2. åˆå§‹åŒ– Dioï¼ˆæ‹¦æˆªå™¨/è¶…æ—¶/æ—¥å¿—ï¼‰</h3>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// lib/network/base_dio.dart</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">'package:dio/dio.dart'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'package:flutter/foundation.dart'</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BaseDio</span> </span>{
  <span class="hljs-keyword">static</span> Dio create({
    <span class="hljs-keyword">required</span> <span class="hljs-built_in">String</span> baseUrl,
    <span class="hljs-built_in">Map</span>&lt;<span class="hljs-built_in">String</span>, <span class="hljs-built_in">dynamic</span>&gt;? defaultHeaders,
    <span class="hljs-built_in">bool</span> enableLog = kDebugMode,
  }) {
    <span class="hljs-keyword">final</span> dio = Dio(BaseOptions(
      baseUrl: baseUrl,
      connectTimeout: <span class="hljs-keyword">const</span> <span class="hljs-built_in">Duration</span>(seconds: <span class="hljs-number">10</span>),
      receiveTimeout: <span class="hljs-keyword">const</span> <span class="hljs-built_in">Duration</span>(seconds: <span class="hljs-number">20</span>),
      headers: {
        <span class="hljs-string">'Accept'</span>: <span class="hljs-string">'application/json'</span>,
        <span class="hljs-keyword">if</span> (defaultHeaders != <span class="hljs-keyword">null</span>) ...defaultHeaders,
      },
    ));

    <span class="hljs-keyword">if</span> (enableLog) {
      dio.interceptors.add(LogInterceptor(
        request: <span class="hljs-keyword">true</span>,
        requestHeader: <span class="hljs-keyword">true</span>,
        requestBody: <span class="hljs-keyword">true</span>,
        responseHeader: <span class="hljs-keyword">false</span>,
        responseBody: <span class="hljs-keyword">true</span>,
        error: <span class="hljs-keyword">true</span>,
      ));
    }

    <span class="hljs-comment">// è‡ªå®šä¹‰æ‹¦æˆªå™¨ï¼ˆtoken æ³¨å…¥ã€ç»Ÿä¸€é”™è¯¯å¤„ç†ç­‰ï¼‰</span>
    dio.interceptors.add(InterceptorsWrapper(
      onRequest: (options, handler) {
        <span class="hljs-comment">// options.headers['Authorization'] = 'Bearer xxx';</span>
        handler.next(options);
      },
      onResponse: (response, handler) =&gt; handler.next(response),
      onError: (e, handler) =&gt; handler.next(e),
    ));

    <span class="hljs-keyword">return</span> dio;
  }
}
</code></pre>
<hr/>
<h3 data-id="heading-3">3. é€šç”¨å“åº”æ¨¡å‹ï¼ˆå¯é€‰ï¼Œæ¨èé…åˆ json_serializableï¼‰</h3>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// lib/network/api_response.dart</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">'package:json_annotation/json_annotation.dart'</span>;
<span class="hljs-keyword">part</span> <span class="hljs-string">'api_response.g.dart'</span>;

<span class="hljs-meta">@JsonSerializable</span>(genericArgumentFactories: <span class="hljs-keyword">true</span>, explicitToJson: <span class="hljs-keyword">true</span>)
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ApiResponse</span>&lt;<span class="hljs-title">T</span>&gt; </span>{
  <span class="hljs-keyword">final</span> <span class="hljs-built_in">int?</span> code;               <span class="hljs-comment">// 0 / 200 -&gt; success</span>
  <span class="hljs-keyword">final</span> <span class="hljs-built_in">String?</span> message;         <span class="hljs-comment">// æˆ– err_msg</span>
  <span class="hljs-keyword">final</span> <span class="hljs-built_in">String?</span> errMsg;
  <span class="hljs-keyword">final</span> T? data;

  <span class="hljs-keyword">const</span> ApiResponse({<span class="hljs-keyword">this</span>.code, <span class="hljs-keyword">this</span>.message, <span class="hljs-keyword">this</span>.errMsg, <span class="hljs-keyword">this</span>.data});

  <span class="hljs-built_in">bool</span> <span class="hljs-keyword">get</span> isSuccess =&gt; code == <span class="hljs-number">0</span> || code == <span class="hljs-number">200</span>;

  <span class="hljs-keyword">factory</span> ApiResponse.fromJson(
    <span class="hljs-built_in">Map</span>&lt;<span class="hljs-built_in">String</span>, <span class="hljs-built_in">dynamic</span>&gt; json,
    T <span class="hljs-built_in">Function</span>(<span class="hljs-built_in">Object?</span> json) fromJsonT,
  ) =&gt; _$ApiResponseFromJson(json, fromJsonT);

  <span class="hljs-built_in">Map</span>&lt;<span class="hljs-built_in">String</span>, <span class="hljs-built_in">dynamic</span>&gt; toJson(<span class="hljs-built_in">Object?</span> <span class="hljs-built_in">Function</span>(T value) toJsonT) =&gt;
      _$ApiResponseToJson(<span class="hljs-keyword">this</span>, toJsonT);
}
</code></pre>
<p>ç”Ÿæˆï¼ˆé¦–æ¬¡æˆ–æ¨¡å‹è°ƒæ•´åï¼‰ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">flutter pub run build_runner build --delete-conflicting-outputs
</code></pre>
<hr/>
<h3 data-id="heading-4">4. Retrofit æ¥å£å®šä¹‰ï¼ˆä¸ Android Retrofit æ€è·¯ä¸€è‡´ï¼‰</h3>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// lib/network/api_service.dart</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">'package:dio/dio.dart'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'package:retrofit/retrofit.dart'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'api_response.dart'</span>;

<span class="hljs-keyword">part</span> <span class="hljs-string">'api_service.g.dart'</span>;

<span class="hljs-meta">@RestApi</span>()
<span class="hljs-keyword">abstract</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ApiService</span> </span>{
  <span class="hljs-keyword">factory</span> ApiService(Dio dio, {<span class="hljs-built_in">String</span> baseUrl}) = _ApiService;

  <span class="hljs-comment">// GET ç¤ºä¾‹ï¼ˆå›å£°æœåŠ¡ï¼‰</span>
  <span class="hljs-meta">@GET</span>(<span class="hljs-string">'/get'</span>)
  Future&lt;HttpResponse&lt;<span class="hljs-built_in">dynamic</span>&gt;&gt; httpBinGet();

  <span class="hljs-comment">// ä¸šåŠ¡ç¤ºä¾‹ï¼šç™»å½•ï¼ˆè¿”å›å¼ºç±»å‹ï¼‰</span>
  <span class="hljs-meta">@POST</span>(<span class="hljs-string">'/login'</span>)
  Future&lt;ApiResponse&lt;LoginData&gt;&gt; login(<span class="hljs-meta">@Body</span>() <span class="hljs-built_in">Map</span>&lt;<span class="hljs-built_in">String</span>, <span class="hljs-built_in">dynamic</span>&gt; body);
}

<span class="hljs-comment">// æ¨¡å‹ç¤ºä¾‹</span>
<span class="hljs-comment">// lib/network/login_data.dart</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">'package:json_annotation/json_annotation.dart'</span>;
<span class="hljs-keyword">part</span> <span class="hljs-string">'login_data.g.dart'</span>;

<span class="hljs-meta">@JsonSerializable</span>()
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LoginData</span> </span>{
  <span class="hljs-keyword">final</span> <span class="hljs-built_in">int</span> userId;
  <span class="hljs-keyword">final</span> <span class="hljs-built_in">String</span> token;
  LoginData({<span class="hljs-keyword">required</span> <span class="hljs-keyword">this</span>.userId, <span class="hljs-keyword">required</span> <span class="hljs-keyword">this</span>.token});
  <span class="hljs-keyword">factory</span> LoginData.fromJson(<span class="hljs-built_in">Map</span>&lt;<span class="hljs-built_in">String</span>, <span class="hljs-built_in">dynamic</span>&gt; json) =&gt; _$LoginDataFromJson(json);
  <span class="hljs-built_in">Map</span>&lt;<span class="hljs-built_in">String</span>, <span class="hljs-built_in">dynamic</span>&gt; toJson() =&gt; _$LoginDataToJson(<span class="hljs-keyword">this</span>);
}
</code></pre>
<p>ç”Ÿæˆæ¥å£æ¡©æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">flutter pub run build_runner build --delete-conflicting-outputs
</code></pre>
<hr/>
<h3 data-id="heading-5">5. ç»„è£…ä¸è°ƒç”¨</h3>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">import</span> <span class="hljs-string">'package:dio/dio.dart'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'base_dio.dart'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'api_service.dart'</span>;

<span class="hljs-keyword">final</span> dio = BaseDio.create(baseUrl: <span class="hljs-string">'https://httpbin.org'</span>);
<span class="hljs-keyword">final</span> api = ApiService(dio, baseUrl: <span class="hljs-string">'https://httpbin.org'</span>);

Future&lt;<span class="hljs-keyword">void</span>&gt; ping() <span class="hljs-keyword">async</span> {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">final</span> resp = <span class="hljs-keyword">await</span> api.httpBinGet();
    <span class="hljs-comment">// resp.response ä¸º Dio çš„ Responseï¼›resp.data ä¸º decoded body</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">'status=<span class="hljs-subst">${resp.response.statusCode}</span>, url=<span class="hljs-subst">${resp.data[<span class="hljs-string">'url'</span>]}</span>'</span>);
  } <span class="hljs-keyword">on</span> DioException <span class="hljs-keyword">catch</span> (e) {
    <span class="hljs-built_in">print</span>(<span class="hljs-string">'dio error: <span class="hljs-subst">${e.message}</span>'</span>);
  }
}

Future&lt;<span class="hljs-keyword">void</span>&gt; doLogin() <span class="hljs-keyword">async</span> {
  <span class="hljs-keyword">final</span> loginApi = ApiService(BaseDio.create(baseUrl: <span class="hljs-string">'https://api.example.com'</span>),
      baseUrl: <span class="hljs-string">'https://api.example.com'</span>);
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">final</span> res = <span class="hljs-keyword">await</span> loginApi.login({<span class="hljs-string">'accountNumber'</span>: <span class="hljs-string">'a'</span>, <span class="hljs-string">'password'</span>: <span class="hljs-string">'b'</span>});
    <span class="hljs-keyword">if</span> (res.isSuccess) {
      <span class="hljs-built_in">print</span>(<span class="hljs-string">'token=<span class="hljs-subst">${res.data?.token}</span>'</span>);
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-built_in">print</span>(<span class="hljs-string">'login fail code=<span class="hljs-subst">${res.code}</span> msg=<span class="hljs-subst">${res.message ?? res.errMsg}</span>'</span>);
    }
  } <span class="hljs-keyword">on</span> DioException <span class="hljs-keyword">catch</span> (e) {
    <span class="hljs-built_in">print</span>(<span class="hljs-string">'network error: <span class="hljs-subst">${e.message}</span>'</span>);
  }
}
</code></pre>
<hr/>
<h3 data-id="heading-6">6. è¿›é˜¶è¦ç‚¹</h3>
<ul>
<li>è¿”å›ç±»å‹é€‰æ‹©ï¼š
<ul>
<li><code>Future&lt;HttpResponse&lt;T&gt;&gt;</code> éœ€è¦åº•å±‚ <code>Response</code> ç»†èŠ‚ï¼ˆheaders/statusï¼‰æ—¶ç”¨ï¼›</li>
<li><code>Future&lt;T&gt;</code> å¤Ÿç”¨æ—¶è¿”å›å¼ºç±»å‹æ¨¡å‹ï¼›</li>
<li>å“åº”ç»“æ„ä¸ç¨³å®šæ—¶å¯ç”¨ <code>dynamic</code>/<code>Map&lt;String, dynamic&gt;</code> ä¸´æ—¶å…œåº•ã€‚</li>
</ul>
</li>
<li>é”™è¯¯å¤„ç†ï¼šDio v5 æŠ› <code>DioException</code>ï¼Œå¯é€šè¿‡ <code>e.type</code> åŒºåˆ†è¶…æ—¶ã€å“åº”é”™è¯¯ç­‰ã€‚</li>
<li>æ‹¦æˆªå™¨ï¼šç»Ÿä¸€ Headerï¼ˆå¦‚ Tokenï¼‰ã€ç»Ÿä¸€é”™è¯¯ç å¤„ç†ã€é‡è¯•ç­–ç•¥ç­‰ã€‚</li>
<li>å¤šç¯å¢ƒï¼šç”¨ä¸åŒ <code>baseUrl</code> æˆ–æ³¨å…¥ä¸åŒ <code>Dio</code> å®ä¾‹ï¼ˆä¸Šå±‚é…ç½®ï¼‰ã€‚</li>
<li>ä»£ç ç”Ÿæˆï¼šæ‰€æœ‰ <code>part '*.g.dart'</code> æ–‡ä»¶ç¦æ­¢æ‰‹æ”¹ï¼›æ¨¡å‹ä¸æ¥å£è°ƒæ•´åé‡æ–°ç”Ÿæˆã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-7">7. å¿«é€Ÿæ’é”™æ¸…å•</h3>
<ul>
<li>â€œTarget of URI doesn't existâ€ â†’ æœªç”Ÿæˆ <code>*.g.dart</code> æˆ– <code>part</code> è·¯å¾„ä¸åŒ¹é…æ–‡ä»¶åå¤§å°å†™ã€‚</li>
<li>â€œMap.fromJson è°ƒç”¨é”™è¯¯â€ â†’ Retrofit è¿”å›æ³›å‹ä¸º <code>Map&lt;String, dynamic&gt;</code> æ—¶ï¼Œä¼˜å…ˆæ”¹ä¸º <code>dynamic</code> æˆ–å®šä¹‰å¼ºç±»å‹æ¨¡å‹ã€‚</li>
<li>è¿è¡Œæ—¶ 4xx/5xx â†’ ç”¨ <code>HttpResponse</code> æ£€æŸ¥ <code>response.statusCode</code> ä¸ <code>response.data</code> å¹¶ç»“åˆ LogInterceptorã€‚</li>
<li>iOS/Android çœŸæœºæ— ç½‘ç»œ â†’ æ£€æŸ¥ä»£ç†/ç½‘ç»œæƒé™/åŸŸåå¯è¾¾æ€§ï¼ˆå¯å…ˆç”¨ <code>https://httpbin.org/get</code> è¿é€šæ€§æµ‹è¯•ï¼‰ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-8">8. æœ€å°è¿é€šæ€§æµ‹è¯•ï¼ˆæ¨èå…ˆè·‘é€šï¼‰</h3>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">final</span> api = ApiService(BaseDio.create(baseUrl: <span class="hljs-string">'https://httpbin.org'</span>), baseUrl: <span class="hljs-string">'https://httpbin.org'</span>);
<span class="hljs-keyword">final</span> resp = <span class="hljs-keyword">await</span> api.httpBinGet();
<span class="hljs-built_in">print</span>(resp.data[<span class="hljs-string">'url'</span>]); <span class="hljs-comment">// æœŸæœ›è¾“å‡º: https://httpbin.org/get</span>
</code></pre>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[HarmonyOSï¼šè½¬åœºåŠ¨ç”»--å…±äº«å…ƒç´ è½¬åœº (ä¸€é•œåˆ°åº•)]]></title>    <link>https://juejin.cn/post/7579892222608375843</link>    <guid>https://juejin.cn/post/7579892222608375843</guid>    <pubDate>2025-12-05T01:25:06.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579892222608375843" data-draft-id="7579805639436173364" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="HarmonyOSï¼šè½¬åœºåŠ¨ç”»--å…±äº«å…ƒç´ è½¬åœº (ä¸€é•œåˆ°åº•)"/> <meta itemprop="keywords" content="HarmonyOS"/> <meta itemprop="datePublished" content="2025-12-05T01:25:06.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ChinaDragon"/> <meta itemprop="url" content="https://juejin.cn/user/3966693681410840"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            HarmonyOSï¼šè½¬åœºåŠ¨ç”»--å…±äº«å…ƒç´ è½¬åœº (ä¸€é•œåˆ°åº•)
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3966693681410840/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ChinaDragon
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-05T01:25:06.000Z" title="Fri Dec 05 2025 01:25:06 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-05
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»15åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">ä¸€ã€ç®€ä»‹</h3>
<blockquote>
<p>å…±äº«å…ƒç´ è½¬åœºæ˜¯ä¸€ç§ç•Œé¢åˆ‡æ¢æ—¶å¯¹ç›¸åŒæˆ–è€…ç›¸ä¼¼çš„ä¸¤ä¸ªå…ƒç´ åšçš„ä¸€ç§ä½ç½®å’Œå¤§å°åŒ¹é…çš„è¿‡æ¸¡åŠ¨ç”»æ•ˆæœï¼Œä¹Ÿç§°ä¸€é•œåˆ°åº•åŠ¨æ•ˆã€‚ <br/>
ä¸€é•œåˆ°åº•çš„åŠ¨æ•ˆæœ‰å¤šç§å®ç°æ–¹å¼ï¼Œåœ¨å®é™…å¼€å‘è¿‡ç¨‹ä¸­ï¼Œåº”æ ¹æ®å…·ä½“åœºæ™¯é€‰æ‹©åˆé€‚çš„æ–¹æ³•è¿›è¡Œå®ç°ã€‚ <br/>
ä»¥ä¸‹æ˜¯ä¸åŒå®ç°æ–¹å¼çš„å¯¹æ¯”ï¼š</p>
</blockquote>

























<table><thead><tr><th align="left">ä¸€é•œåˆ°åº•å®ç°æ–¹å¼</th><th align="left">ç‰¹ç‚¹</th><th align="left">é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td align="left">ä¸æ–°å»ºå®¹å™¨ç›´æ¥å˜åŒ–åŸå®¹å™¨</td><td align="left">ä¸å‘ç”Ÿè·¯ç”±è·³è½¬ï¼Œéœ€è¦åœ¨ä¸€ä¸ªç»„ä»¶ä¸­å®ç°å±•å¼€åŠå…³é—­ä¸¤ç§çŠ¶æ€çš„å¸ƒå±€ï¼Œå±•å¼€åç»„ä»¶å±‚çº§ä¸å˜ã€‚</td><td align="left">é€‚ç”¨äºè½¬åœºå¼€é”€å°çš„ç®€å•åœºæ™¯ï¼Œå¦‚ç‚¹å¼€é¡µé¢æ— éœ€åŠ è½½å¤§é‡æ•°æ®åŠç»„ä»¶ã€‚</td></tr><tr><td align="left">æ–°å»ºå®¹å™¨å¹¶è·¨å®¹å™¨è¿ç§»ç»„ä»¶</td><td align="left">é€šè¿‡ä½¿ç”¨NodeControllerï¼Œå°†ç»„ä»¶ä»ä¸€ä¸ªå®¹å™¨è¿ç§»åˆ°å¦ä¸€ä¸ªå®¹å™¨ï¼Œåœ¨å¼€å§‹è¿ç§»æ—¶ï¼Œéœ€è¦æ ¹æ®å‰åä¸¤ä¸ªå¸ƒå±€çš„ä½ç½®å¤§å°ç­‰ä¿¡æ¯å¯¹ç»„ä»¶æ·»åŠ ä½ç§»åŠç¼©æ”¾ï¼Œç¡®ä¿è¿ç§»å¼€å§‹æ—¶ç»„ä»¶èƒ½å¤Ÿå¯¹é½åˆå§‹å¸ƒå±€ï¼Œé¿å…å‡ºç°è§†è§‰ä¸Šçš„è·³å˜ç°è±¡ã€‚ä¹‹åå†æ·»åŠ åŠ¨ç”»å°†ä½ç§»åŠç¼©æ”¾ç­‰å±æ€§å¤ä½ï¼Œå®ç°ç»„ä»¶ä»åˆå§‹å¸ƒå±€åˆ°ç›®æ ‡å¸ƒå±€çš„ä¸€é•œåˆ°åº•è¿‡æ¸¡æ•ˆæœã€‚</td><td align="left">é€‚ç”¨äºæ–°å»ºå¯¹è±¡å¼€é”€å¤§çš„åœºæ™¯ï¼Œå¦‚è§†é¢‘ç›´æ’­ç»„ä»¶ç‚¹å‡»è½¬ä¸ºå…¨å±ç­‰ã€‚</td></tr><tr><td align="left">ä½¿ç”¨geometryTransitionå…±äº«å…ƒç´ è½¬åœº</td><td align="left">åˆ©ç”¨ç³»ç»Ÿèƒ½åŠ›ï¼Œè½¬åœºå‰åä¸¤ä¸ªç»„ä»¶è°ƒç”¨geometryTransitionæ¥å£ç»‘å®šåŒä¸€idï¼ŒåŒæ—¶å°†è½¬åœºé€»è¾‘ç½®äºanimateToåŠ¨ç”»é—­åŒ…å†…ï¼Œè¿™æ ·ç³»ç»Ÿä¾§ä¼šè‡ªåŠ¨ä¸ºäºŒè€…æ·»åŠ ä¸€é•œåˆ°åº•çš„è¿‡æ¸¡æ•ˆæœã€‚</td><td align="left">ç³»ç»Ÿå°†è°ƒæ•´ç»‘å®šçš„ä¸¤ä¸ªç»„ä»¶çš„å®½é«˜åŠä½ç½®è‡³ç›¸åŒå€¼ï¼Œå¹¶åˆ‡æ¢äºŒè€…çš„é€æ˜åº¦ï¼Œä»¥å®ç°ä¸€é•œåˆ°åº•è¿‡æ¸¡æ•ˆæœã€‚å› æ­¤ï¼Œä¸ºäº†å®ç°æµç•…çš„åŠ¨ç”»æ•ˆæœï¼Œéœ€è¦ç¡®ä¿å¯¹ç»‘å®šgeometryTransitionçš„èŠ‚ç‚¹æ·»åŠ å®½é«˜åŠ¨ç”»ä¸ä¼šæœ‰è·³å˜ã€‚æ­¤æ–¹å¼é€‚ç”¨äºåˆ›å»ºæ–°èŠ‚ç‚¹å¼€é”€å°çš„åœºæ™¯ã€‚</td></tr></tbody></table>
<h3 data-id="heading-1">äºŒã€ä¸æ–°å»ºå®¹å™¨å¹¶ç›´æ¥å˜åŒ–åŸå®¹å™¨</h3>
<blockquote>
<p>è¯¥æ–¹æ³•ä¸æ–°å»ºå®¹å™¨ï¼Œé€šè¿‡åœ¨å·²æœ‰å®¹å™¨ä¸Šå¢åˆ ç»„ä»¶è§¦å‘transitionï¼Œæ­é…ç»„ä»¶å±æ€§åŠ¨ç”»å®ç°ä¸€é•œåˆ°åº•æ•ˆæœã€‚ <br/>
å¯¹äºåŒä¸€ä¸ªå®¹å™¨å±•å¼€ï¼Œå®¹å™¨å†…å…„å¼Ÿç»„ä»¶æ¶ˆå¤±æˆ–è€…å‡ºç°çš„åœºæ™¯ï¼Œå¯é€šè¿‡å¯¹åŒä¸€ä¸ªå®¹å™¨å±•å¼€å‰åè¿›è¡Œå®½é«˜ä½ç½®å˜åŒ–å¹¶é…ç½®å±æ€§åŠ¨ç”»ï¼Œå¯¹å…„å¼Ÿç»„ä»¶é…ç½®å‡ºç°æ¶ˆå¤±è½¬åœºåŠ¨ç”»å®ç°ä¸€é•œåˆ°åº•æ•ˆæœã€‚åŸºæœ¬æ­¥éª¤ä¸ºï¼š</p>
<ol>
<li>æ„å»ºéœ€è¦å±•å¼€çš„é¡µé¢ï¼Œå¹¶é€šè¿‡çŠ¶æ€å˜é‡æ„å»ºå¥½æ™®é€šçŠ¶æ€å’Œå±•å¼€çŠ¶æ€çš„ç•Œé¢ã€‚</li>
<li>å°†éœ€è¦å±•å¼€çš„é¡µé¢å±•å¼€ï¼Œé€šè¿‡çŠ¶æ€å˜é‡æ§åˆ¶å…„å¼Ÿç»„ä»¶æ¶ˆå¤±æˆ–å‡ºç°ï¼Œå¹¶é€šè¿‡ç»‘å®šå‡ºç°æ¶ˆå¤±è½¬åœºå®ç°å…„å¼Ÿç»„ä»¶è½¬åœºæ•ˆæœã€‚</li>
</ol>
</blockquote>
<p><strong>ä»¥ç‚¹å‡»å¡ç‰‡åæ˜¾ç¤ºå¡ç‰‡å†…å®¹è¯¦æƒ…åœºæ™¯ä¸ºä¾‹ï¼š</strong></p>
<blockquote>
<p><strong>æ•ˆæœå›¾</strong> <br/>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/76a4261f71ca40359e6572ee9dd599c6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ2hpbmFEcmFnb24=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765502706&amp;x-signature=bFRpz%2Fb7ulisNB7rcNIuDJ%2Fqov0%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/> <br/>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6ffc157eaca14856bc626eb42d540105~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ2hpbmFEcmFnb24=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765502706&amp;x-signature=Uw2hdW1fQRabkJ1r4hQRf61Luuo%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
</blockquote>
<p><strong>ç¤ºä¾‹ä»£ç </strong></p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">PostData</span> {</span>
  <span class="hljs-comment">// å›¾ç‰‡ä½¿ç”¨Resourceèµ„æºï¼Œéœ€ç”¨æˆ·è‡ªå®šä¹‰</span>
  avatar: Resource = $r(<span class="hljs-string">'app.media.background'</span>);
  name: <span class="hljs-built_in">string</span> = <span class="hljs-string">'';
  message: string = '</span><span class="hljs-string">';
  images: Resource[] = [];
}

@Entry
@Component
struct ExpandGroupDemo {
  @State isExpand: boolean = false;
  @State @Watch('</span>onItemClicked<span class="hljs-number">'</span>) selectedIndex: number = <span class="hljs-number">-1</span>;

  <span class="hljs-comment">// æ•°ç»„ä¸­å›¾ç‰‡å‡ä½¿ç”¨Resourceèµ„æºï¼Œéœ€ç”¨æˆ·è‡ªå®šä¹‰</span>
  private allPostData: PostData[] = [
    { avatar: $r(<span class="hljs-string">'app.media.background'</span>), name: <span class="hljs-string">'Alice'</span>, message: <span class="hljs-string">'å¤©æ°”æ™´æœ—'</span>,
      images: [$r(<span class="hljs-string">'app.media.banner_pic1'</span>), $r(<span class="hljs-string">'app.media.banner_pic2'</span>)] },
    { avatar: $r(<span class="hljs-string">'app.media.tutorial_pic1'</span>), name: <span class="hljs-string">'Bob'</span>, message: <span class="hljs-string">'ä½ å¥½ä¸–ç•Œ'</span>,
      images: [$r(<span class="hljs-string">'app.media.banner_pic3'</span>)] },
    { avatar: $r(<span class="hljs-string">'app.media.tutorial_pic2'</span>), name: <span class="hljs-string">'Carl'</span>, message: <span class="hljs-string">'ä¸‡ç‰©ç”Ÿé•¿'</span>,
      images: [$r(<span class="hljs-string">'app.media.banner_pic4'</span>), $r(<span class="hljs-string">'app.media.banner_pic5'</span>), $r(<span class="hljs-string">'app.media.banner_pic0'</span>)] }];

  private <span class="hljs-title function_">onItemClicked</span><span class="hljs-params">()</span>: <span class="hljs-type">void</span> {
    <span class="hljs-keyword">if</span> (this.selectedIndex &lt; <span class="hljs-number">0</span>) {
      <span class="hljs-keyword">return</span>;
    }
    this.getUIContext()?.animateTo({
      duration: <span class="hljs-number">350</span>,
      curve: Curve.Friction
    }, () =&gt; {
      this.isExpand = !this.isExpand;
    });
  }

  build() {
    Column({ space: <span class="hljs-number">20</span> }) {
      ForEach(this.allPostData, (postData: PostData, index: number) =&gt; {
        <span class="hljs-comment">// å½“ç‚¹å‡»äº†æŸä¸ªpoståï¼Œä¼šä½¿å…¶ä½™çš„postæ¶ˆå¤±ä¸‹æ ‘</span>
        <span class="hljs-keyword">if</span> (!this.isExpand || this.selectedIndex === index) {
          Column() {
            Post({ data: postData, selectedIndex: this.selectedIndex, index: index })
          }
          .width(<span class="hljs-string">'100%'</span>)
          <span class="hljs-comment">// å¯¹å‡ºç°æ¶ˆå¤±çš„postæ·»åŠ é€æ˜åº¦è½¬åœºå’Œä½ç§»è½¬åœºæ•ˆæœ</span>
          .transition(TransitionEffect.OPACITY
            .combine(TransitionEffect.translate({ y: index &lt; this.selectedIndex ? <span class="hljs-number">-250</span> : <span class="hljs-number">250</span> }))
            .animation({ duration: <span class="hljs-number">350</span>, curve: Curve.Friction}))
        }
      }, (postData: PostData, index: number) =&gt; index.toString())
    }
    .size({ width: <span class="hljs-string">'100%'</span>, height: <span class="hljs-string">'100%'</span> })
    .backgroundColor(<span class="hljs-string">'#40808080'</span>)
  }
}

@Component
export <span class="hljs-keyword">default</span> <span class="hljs-class"><span class="hljs-keyword">struct</span>  <span class="hljs-title">Post</span> {</span>
  @Link selectedIndex: number;

  @Prop data: PostData;
  @Prop index: number;

  @State itemHeight: number = <span class="hljs-number">250</span>;
  @State isExpand: boolean = <span class="hljs-literal">false</span>;
  @State expandImageSize: number = <span class="hljs-number">100</span>;
  @State avatarSize: number = <span class="hljs-number">50</span>;

  build() {
    Column({ space: <span class="hljs-number">20</span> }) {
      Row({ space: <span class="hljs-number">10</span> }) {
        Image(this.data.avatar)
          .size({ width: this.avatarSize, height: this.avatarSize })
          .borderRadius(this.avatarSize / <span class="hljs-number">2</span>)
          .clip(<span class="hljs-literal">true</span>)

        Text(this.data.name)
      }
      .justifyContent(FlexAlign.Start)

      Text(this.data.message)

      Row({ space: <span class="hljs-number">15</span> }) {
        ForEach(this.data.images, (imageResource: Resource, index: number) =&gt; {
          Image(imageResource)
            .size({ width: this.expandImageSize, height: this.expandImageSize })
        }, (imageResource: Resource, index: number) =&gt; index.toString())
      }

      <span class="hljs-comment">// å±•å¼€æ€ä¸‹ç»„ä»¶å¢åŠ çš„å†…å®¹</span>
      <span class="hljs-keyword">if</span> (this.isExpand) {
        Column() {
          Text(<span class="hljs-string">'è¯„è®ºåŒº'</span>)
          <span class="hljs-comment">// å¯¹è¯„è®ºåŒºæ–‡æœ¬æ·»åŠ å‡ºç°æ¶ˆå¤±è½¬åœºæ•ˆæœ</span>
            .transition( TransitionEffect.OPACITY
              .animation({ duration: <span class="hljs-number">350</span>, curve: Curve.Friction }))
            .padding({ top: <span class="hljs-number">10</span> })
        }
        .transition(TransitionEffect.asymmetric(
          TransitionEffect.opacity(<span class="hljs-number">0.99</span>)
            .animation({ duration: <span class="hljs-number">350</span>, curve: Curve.Friction }),
          TransitionEffect.OPACITY.animation({ duration: <span class="hljs-number">0</span> })
        ))
        .size({ width: <span class="hljs-string">'100%'</span>})
      }
    }
    .backgroundColor(Color.White)
    .size({ width: <span class="hljs-string">'100%'</span>, height: this.itemHeight })
    .alignItems(HorizontalAlign.Start)
    .padding({ left: <span class="hljs-number">10</span>, top: <span class="hljs-number">10</span> })
    .onClick(() =&gt; {
      this.selectedIndex = <span class="hljs-number">-1</span>;
      this.selectedIndex = this.index;
      this.getUIContext()?.animateTo({
        duration: <span class="hljs-number">350</span>,
        curve: Curve.Friction
      }, () =&gt; {
        <span class="hljs-comment">// å¯¹å±•å¼€çš„poståšå®½é«˜åŠ¨ç”»ï¼Œå¹¶å¯¹å¤´åƒå°ºå¯¸å’Œå›¾ç‰‡å°ºå¯¸åŠ åŠ¨ç”»</span>
        this.isExpand = !this.isExpand;
        this.itemHeight = this.isExpand ? <span class="hljs-number">780</span> : <span class="hljs-number">250</span>;
        this.avatarSize = this.isExpand ? <span class="hljs-number">75</span>: <span class="hljs-number">50</span>;
        this.expandImageSize = (this.isExpand &amp;&amp; this.data.images.length &gt; <span class="hljs-number">0</span>)
          ? (<span class="hljs-number">360</span> - (this.data.images.length + <span class="hljs-number">1</span>) * <span class="hljs-number">15</span>) / this.data.images.length : <span class="hljs-number">100</span>;
      })
    })
  }
}
</code></pre>
<h3 data-id="heading-2">ä¸‰ã€æ–°å»ºå®¹å™¨å¹¶è·¨å®¹å™¨è¿ç§»ç»„ä»¶</h3>
<blockquote>
<p>é€šè¿‡NodeContainerè‡ªå®šä¹‰å ä½èŠ‚ç‚¹ï¼Œåˆ©ç”¨NodeControllerå®ç°ç»„ä»¶çš„è·¨èŠ‚ç‚¹è¿ç§»ï¼Œé…åˆå±æ€§åŠ¨ç”»ç»™ç»„ä»¶çš„è¿ç§»è¿‡ç¨‹èµ‹äºˆä¸€é•œåˆ°åº•æ•ˆæœã€‚è¿™ç§ä¸€é•œåˆ°åº•çš„å®ç°æ–¹å¼å¯ä»¥ç»“åˆå¤šç§è½¬åœºæ–¹å¼ä½¿ç”¨ï¼Œå¦‚å¯¼èˆªè½¬åœºï¼ˆNavigationï¼‰ã€åŠæ¨¡æ€è½¬åœºï¼ˆbindSheetï¼‰ç­‰ã€‚</p>
</blockquote>
<h4 data-id="heading-3">3.1 ç»“åˆStackä½¿ç”¨</h4>
<blockquote>
<p>å¯ä»¥åˆ©ç”¨Stackå†…åå®šä¹‰ç»„ä»¶åœ¨æœ€ä¸Šæ–¹çš„ç‰¹æ€§æ§åˆ¶ç»„ä»¶åœ¨è·¨èŠ‚ç‚¹è¿ç§»åä½zåºæœ€é«˜ï¼Œä»¥å±•å¼€æ”¶èµ·å¡ç‰‡çš„åœºæ™¯ä¸ºä¾‹ï¼Œå®ç°æ­¥éª¤ä¸ºï¼š</p>
<ul>
<li>å±•å¼€å¡ç‰‡æ—¶ï¼Œè·å–èŠ‚ç‚¹Açš„ä½ç½®ä¿¡æ¯ï¼Œå°†å…¶ä¸­çš„ç»„ä»¶è¿ç§»åˆ°ä¸èŠ‚ç‚¹Aä½ç½®ä¸€è‡´çš„èŠ‚ç‚¹Bå¤„ï¼ŒèŠ‚ç‚¹Bçš„å±‚çº§é«˜äºèŠ‚ç‚¹Aã€‚</li>
<li>å¯¹èŠ‚ç‚¹Bæ·»åŠ å±æ€§åŠ¨ç”»ï¼Œä½¿ä¹‹å±•å¼€å¹¶è¿åŠ¨åˆ°å±•å¼€åçš„ä½ç½®ï¼Œå®Œæˆä¸€é•œåˆ°åº•çš„åŠ¨ç”»æ•ˆæœã€‚</li>
<li>æ”¶èµ·å¡ç‰‡æ—¶ï¼Œå¯¹èŠ‚ç‚¹Bæ·»åŠ å±æ€§åŠ¨ç”»ï¼Œä½¿ä¹‹æ”¶èµ·å¹¶è¿åŠ¨åˆ°æ”¶èµ·æ—¶çš„ä½ç½®ï¼Œå³èŠ‚ç‚¹Açš„ä½ç½®ï¼Œå®ç°ä¸€é•œåˆ°åº•çš„åŠ¨ç”»æ•ˆæœã€‚</li>
<li>åœ¨åŠ¨ç”»ç»“æŸæ—¶åˆ©ç”¨å›è°ƒå°†èŠ‚ç‚¹Bä¸­çš„ç»„ä»¶è¿ç§»å›èŠ‚ç‚¹Aå¤„ã€‚</li>
</ul>
</blockquote>
<blockquote>
<p><strong>ç¤ºä¾‹æ•ˆæœå›¾</strong> <br/>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b8ab0940a20d4f4bbed285c0a27ce03d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ2hpbmFEcmFnb24=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765502706&amp;x-signature=phSwG%2FxvkYu3KuZYCCi1Omssgis%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/> <br/>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/089ff36a575c4052a562ee8efdf0c045~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ2hpbmFEcmFnb24=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765502706&amp;x-signature=jLyOZc4lA9PfbEuqETCFg%2BvQshg%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
</blockquote>
<h4 data-id="heading-4">3.2 ç»“åˆNavigationä½¿ç”¨</h4>
<blockquote>
<p>å¯ä»¥åˆ©ç”¨Navigationçš„è‡ªå®šä¹‰å¯¼èˆªè½¬åœºåŠ¨ç”»èƒ½åŠ›ï¼ˆcustomNavContentTransitionï¼‰å®ç°ä¸€é•œåˆ°åº•åŠ¨æ•ˆã€‚å…±äº«å…ƒç´ è½¬åœºæœŸé—´ï¼Œç»„ä»¶ç”±æ¶ˆå¤±é¡µé¢è¿ç§»è‡³å‡ºç°é¡µé¢ã€‚ <br/>
ä»¥å±•å¼€æ”¶èµ·ç¼©ç•¥å›¾çš„åœºæ™¯ä¸ºä¾‹ï¼Œå®ç°æ­¥éª¤ä¸ºï¼š</p>
<ul>
<li>é€šè¿‡customNavContentTransitioné…ç½®PageOneä¸PageTwoçš„è‡ªå®šä¹‰å¯¼èˆªè½¬åœºåŠ¨ç”»ã€‚</li>
<li>è‡ªå®šä¹‰çš„å…±äº«å…ƒç´ è½¬åœºæ•ˆæœç”±å±æ€§åŠ¨ç”»å®ç°ï¼Œå…·ä½“å®ç°æ–¹å¼ä¸ºæŠ“å–é¡µé¢å†…ç»„ä»¶ç›¸å¯¹çª—å£çš„ä½ç½®ä¿¡æ¯ä»è€Œæ­£ç¡®åŒ¹é…ç»„ä»¶åœ¨PageOneä¸PageTwoçš„ä½ç½®ã€ç¼©æ”¾ç­‰ï¼Œå³åŠ¨ç”»å¼€å§‹å’Œç»“æŸçš„å±æ€§ä¿¡æ¯ã€‚</li>
<li>ç‚¹å‡»ç¼©ç•¥å›¾åå…±äº«å…ƒç´ ç»„ä»¶ä»PageOneè¢«è¿ç§»è‡³PageTwoï¼Œéšåè§¦å‘ç”±PageOneè‡³PageTwoçš„è‡ªå®šä¹‰è½¬åœºåŠ¨ç”»ï¼Œå³PageTwoçš„å…±äº«å…ƒç´ ç»„ä»¶ä»åŸæ¥çš„ç¼©ç•¥å›¾çŠ¶æ€åšåŠ¨ç”»åˆ°å…¨å±çŠ¶æ€ã€‚</li>
<li>ç”±å…¨å±çŠ¶æ€è¿”å›åˆ°ç¼©ç•¥å›¾æ—¶ï¼Œè§¦å‘ç”±PageTwoè‡³PageOneçš„è‡ªå®šä¹‰è½¬åœºåŠ¨ç”»ï¼Œå³PageTwoçš„å…±äº«å…ƒç´ ç»„ä»¶ä»å…¨å±çŠ¶æ€åšåŠ¨ç”»åˆ°åŸPageOneçš„ç¼©ç•¥å›¾çŠ¶æ€ï¼Œè½¬åœºç»“æŸåå…±äº«å…ƒç´ ç»„ä»¶ä»PageTwoè¢«è¿ç§»å›PageOneã€‚</li>
</ul>
</blockquote>
<blockquote>
<p><strong>customNavContentTransitionç®€ä»‹</strong> <br/>
æ”¯æŒè®¾å¤‡Phone | PC/2in1 | Tablet | TV | Wearable</p>
</blockquote>
<pre><code class="hljs language-c" lang="c">customNavContentTransition(delegate:(from: NavContentInfo, to: NavContentInfo, operation: NavigationOperation) =&gt; NavigationAnimatedTransition | undefined)
</code></pre>
<blockquote>
<p>è‡ªå®šä¹‰è½¬åœºåŠ¨ç”»å›è°ƒã€‚ <br/>
å…ƒæœåŠ¡APIï¼š ä»API version 12å¼€å§‹ï¼Œè¯¥æ¥å£æ”¯æŒåœ¨å…ƒæœåŠ¡ä¸­ä½¿ç”¨ã€‚ <br/>
ç³»ç»Ÿèƒ½åŠ›ï¼š SystemCapability.ArkUI.ArkUI.Full</p>
</blockquote>
<p><strong>å‚æ•°ï¼š</strong></p>





























<table><thead><tr><th align="left">å‚æ•°å</th><th align="left">ç±»å‹</th><th align="left">å¿…å¡«</th><th align="left">è¯´æ˜</th></tr></thead><tbody><tr><td align="left">from</td><td align="left">NavContentInfo</td><td align="left">æ˜¯</td><td align="left">é€€åœºDestinationçš„é¡µé¢ã€‚</td></tr><tr><td align="left">to</td><td align="left">NavContentInfo</td><td align="left">æ˜¯</td><td align="left">è¿›åœºDestinationçš„é¡µé¢ã€‚</td></tr><tr><td align="left">operation</td><td align="left">NavigationOperation</td><td align="left">æ˜¯</td><td align="left">è½¬åœºç±»å‹ã€‚</td></tr></tbody></table>
<p><strong>è¿”å›å€¼ï¼š</strong></p>













<table><thead><tr><th align="left">ç±»å‹</th><th align="left">è¯´æ˜</th></tr></thead><tbody><tr><td align="left">NavigationAnimatedTransition | undefined</td><td align="left">NavigationAnimatedTransitionï¼šè‡ªå®šä¹‰è½¬åœºåŠ¨ç”»åè®®ã€‚<br/>undefined: è¿”å›æœªå®šä¹‰ï¼Œæ‰§è¡Œé»˜è®¤è½¬åœºåŠ¨æ•ˆã€‚</td></tr></tbody></table>
<blockquote>
<p><strong>æ•ˆæœå›¾</strong> <br/>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ab1ff04c6d89418bb3861841c52c154d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ2hpbmFEcmFnb24=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765502706&amp;x-signature=oU49DfUxu%2BJv%2FLcqWyxiUVy4c1w%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/> <br/>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ca97f01c124b4731ab8eedb29e02b325~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ2hpbmFEcmFnb24=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765502706&amp;x-signature=M7M09MAfg%2BwF9bc1A4Hob5Qbv54%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
</blockquote>
<p><strong>ç¤ºä¾‹ä»£ç ç»“æ„</strong></p>
<pre><code class="hljs language-c" lang="c">â”œâ”€â”€entry/src/main/ets                 <span class="hljs-comment">// ä»£ç åŒº</span>
â”‚  â”œâ”€â”€CustomTransition
â”‚  â”‚  â”œâ”€â”€AnimationProperties.ets      <span class="hljs-comment">// ä¸€é•œåˆ°åº•è½¬åœºåŠ¨ç”»å°è£…</span>
â”‚  â”‚  â””â”€â”€CustomNavigationUtils.ets    <span class="hljs-comment">// Navigationè‡ªå®šä¹‰è½¬åœºåŠ¨ç”»é…ç½®</span>
â”‚  â”œâ”€â”€entryability
â”‚  â”‚  â””â”€â”€EntryAbility.ets             <span class="hljs-comment">// ç¨‹åºå…¥å£ç±»</span>
â”‚  â”œâ”€â”€NodeContainer
â”‚  â”‚  â””â”€â”€CustomComponent.ets          <span class="hljs-comment">// è‡ªå®šä¹‰å ä½èŠ‚ç‚¹</span>
â”‚  â”œâ”€â”€pages
â”‚  â”‚  â”œâ”€â”€Index.ets                    <span class="hljs-comment">// å¯¼èˆªé¡µé¢</span>
â”‚  â”‚  â”œâ”€â”€PageOne.ets                  <span class="hljs-comment">// ç¼©ç•¥å›¾é¡µé¢</span>
â”‚  â”‚  â””â”€â”€PageTwo.ets                  <span class="hljs-comment">// å…¨å±å±•å¼€é¡µé¢</span>
â”‚  â””â”€â”€utils
â”‚     â”œâ”€â”€ComponentAttrUtils.ets       <span class="hljs-comment">// ç»„ä»¶ä½ç½®è·å–</span>
â”‚     â””â”€â”€WindowUtils.ets              <span class="hljs-comment">// çª—å£ä¿¡æ¯</span>
â””â”€â”€entry/src/main/resources           <span class="hljs-comment">// èµ„æºæ–‡ä»¶</span>
</code></pre>
<p><strong>CustomNavigationUtils.etsä»£ç </strong></p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-comment">// é…ç½®Navigationè‡ªå®šä¹‰è½¬åœºåŠ¨ç”»</span>
export interface AnimateCallback {
  animation: ((isPush: boolean, isExit: boolean, transitionProxy: NavigationTransitionProxy) =&gt; <span class="hljs-type">void</span> | undefined)
    | undefined;
  timeout: (number | undefined) | undefined;
}

<span class="hljs-type">const</span> customTransitionMap: Map&lt;number, AnimateCallback&gt; = new Map();

export <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CustomTransition</span> {</span>
  private <span class="hljs-title function_">constructor</span><span class="hljs-params">()</span> {};

  <span class="hljs-type">static</span> delegate = new CustomTransition();

  <span class="hljs-type">static</span> <span class="hljs-title function_">getInstance</span><span class="hljs-params">()</span> {
    <span class="hljs-keyword">return</span> CustomTransition.delegate;
  }

  <span class="hljs-comment">// æ³¨å†Œé¡µé¢çš„åŠ¨ç”»å›è°ƒï¼Œnameæ˜¯æ³¨å†Œé¡µé¢çš„åŠ¨ç”»çš„å›è°ƒ</span>
  <span class="hljs-comment">// animationCallbackæ˜¯éœ€è¦æ‰§è¡Œçš„åŠ¨ç”»å†…å®¹ï¼Œtimeoutæ˜¯è½¬åœºç»“æŸçš„è¶…æ—¶æ—¶é—´</span>
  registerNavParam(
    name: number,
    animationCallback: (operation: boolean, isExit: boolean, transitionProxy: NavigationTransitionProxy) =&gt; <span class="hljs-type">void</span>,
    timeout: number): <span class="hljs-type">void</span> {
    <span class="hljs-keyword">if</span> (customTransitionMap.has(name)) {
      let param = customTransitionMap.get(name);
      <span class="hljs-keyword">if</span> (param != undefined) {
        param.animation = animationCallback;
        param.timeout = timeout;
        <span class="hljs-keyword">return</span>;
      }
    }
    let params: AnimateCallback = { timeout: timeout, animation: animationCallback };
    customTransitionMap.<span class="hljs-built_in">set</span>(name, params);
  }

  unRegisterNavParam(name: number): <span class="hljs-type">void</span> {
    customTransitionMap.delete(name);
  }

  getAnimateParam(name: number): AnimateCallback {
    let result: AnimateCallback = {
      animation: customTransitionMap.get(name)?.animation,
      timeout: customTransitionMap.get(name)?.timeout,
    };
    <span class="hljs-keyword">return</span> result;
  }
}
</code></pre>
<p><strong>ComponentAttrUtils.etsä»£ç </strong></p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-comment">// è·å–ç»„ä»¶ç›¸å¯¹çª—å£çš„ä½ç½®</span>
import { componentUtils, UIContext } from <span class="hljs-string">'@kit.ArkUI'</span>;
import { JSON } from <span class="hljs-string">'@kit.ArkTS'</span>;

export <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ComponentAttrUtils</span> {</span>
  <span class="hljs-comment">// æ ¹æ®ç»„ä»¶çš„idè·å–ç»„ä»¶çš„ä½ç½®ä¿¡æ¯</span>
  public <span class="hljs-type">static</span> <span class="hljs-title function_">getRectInfoById</span><span class="hljs-params">(context: UIContext, id: <span class="hljs-built_in">string</span>)</span>: RectInfoInPx {
    <span class="hljs-keyword">if</span> (!context || !id) {
      throw Error(<span class="hljs-string">'object is empty'</span>);
    }
    let componentInfo: componentUtils.ComponentInfo = context.getComponentUtils().getRectangleById(id);

    <span class="hljs-keyword">if</span> (!componentInfo) {
      throw Error(<span class="hljs-string">'object is empty'</span>);
    }

    let rstRect: RectInfoInPx = new RectInfoInPx();
    <span class="hljs-type">const</span> widthScaleGap = componentInfo.size.width * (<span class="hljs-number">1</span> - componentInfo.scale.x) / <span class="hljs-number">2</span>;
    <span class="hljs-type">const</span> heightScaleGap = componentInfo.size.height * (<span class="hljs-number">1</span> - componentInfo.scale.y) / <span class="hljs-number">2</span>;
    rstRect.left = componentInfo.translate.x + componentInfo.windowOffset.x + widthScaleGap;
    rstRect.top = componentInfo.translate.y + componentInfo.windowOffset.y + heightScaleGap;
    rstRect.right =
      componentInfo.translate.x + componentInfo.windowOffset.x + componentInfo.size.width - widthScaleGap;
    rstRect.bottom =
      componentInfo.translate.y + componentInfo.windowOffset.y + componentInfo.size.height - heightScaleGap;
    rstRect.width = rstRect.right - rstRect.left;
    rstRect.height = rstRect.bottom - rstRect.top;
    <span class="hljs-keyword">return</span> {
      left: rstRect.left,
      right: rstRect.right,
      top: rstRect.top,
      bottom: rstRect.bottom,
      width: rstRect.width,
      height: rstRect.height
    }
  }
}

export class RectInfoInPx {
  left: number = <span class="hljs-number">0</span>;
  top: number = <span class="hljs-number">0</span>;
  right: number = <span class="hljs-number">0</span>;
  bottom: number = <span class="hljs-number">0</span>;
  width: number = <span class="hljs-number">0</span>;
  height: number = <span class="hljs-number">0</span>;
}

export <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">RectJson</span> {</span>
  $rect: Array&lt;number&gt; = [];
}
</code></pre>
<p><strong>WindowUtils.etsä»£ç </strong></p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-comment">// WindowUtils.ets</span>
<span class="hljs-comment">// çª—å£ä¿¡æ¯</span>
import { window } from <span class="hljs-string">'@kit.ArkUI'</span>;

export <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">WindowUtils</span> {</span>
  public <span class="hljs-type">static</span> window: window.Window;
  public <span class="hljs-type">static</span> windowWidth_px: number;
  public <span class="hljs-type">static</span> windowHeight_px: number;
  public <span class="hljs-type">static</span> topAvoidAreaHeight_px: number;
  public <span class="hljs-type">static</span> navigationIndicatorHeight_px: number;
}
</code></pre>
<p><strong>CustomComponent.etsä»£ç </strong></p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-comment">// CustomComponent.ets</span>
<span class="hljs-comment">// è‡ªå®šä¹‰å ä½èŠ‚ç‚¹ï¼Œè·¨å®¹å™¨è¿ç§»èƒ½åŠ›</span>
import { BuilderNode, FrameNode, NodeController } from <span class="hljs-string">'@kit.ArkUI'</span>;

@Builder
function <span class="hljs-title function_">CardBuilder</span><span class="hljs-params">()</span> {
  <span class="hljs-comment">// å›¾ç‰‡ä½¿ç”¨Resourceèµ„æºï¼Œéœ€ç”¨æˆ·è‡ªå®šä¹‰</span>
  Image($r(<span class="hljs-string">"app.media.card"</span>))
    .width(<span class="hljs-string">'100%'</span>)
    .id(<span class="hljs-string">'card'</span>)
}

export <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyNodeController</span> <span class="hljs-title">extends</span> <span class="hljs-title">NodeController</span> {</span>
  private CardNode: BuilderNode&lt;[]&gt; | null = null;
  private wrapBuilder: WrappedBuilder&lt;[]&gt; = wrapBuilder(CardBuilder);
  private needCreate: boolean = <span class="hljs-literal">false</span>;
  private isRemove: boolean = <span class="hljs-literal">false</span>;

  constructor(create: boolean) {
    super();
    this.needCreate = create;
  }

  makeNode(uiContext: UIContext): FrameNode | null {
    <span class="hljs-keyword">if</span>(this.isRemove == <span class="hljs-literal">true</span>){
      <span class="hljs-keyword">return</span> null;
    }
    <span class="hljs-keyword">if</span> (this.needCreate &amp;&amp; this.CardNode == null) {
      this.CardNode = new BuilderNode(uiContext);
      this.CardNode.build(this.wrapBuilder)
    }
    <span class="hljs-keyword">if</span> (this.CardNode == null) {
      <span class="hljs-keyword">return</span> null;
    }
    <span class="hljs-keyword">return</span> this.CardNode!.getFrameNode()!;
  }

  getNode(): BuilderNode&lt;[]&gt; | null {
    <span class="hljs-keyword">return</span> this.CardNode;
  }

  setNode(node: BuilderNode&lt;[]&gt; | null) {
    this.CardNode = node;
    this.rebuild();
  }

  onRemove() {
    this.isRemove = <span class="hljs-literal">true</span>;
    this.rebuild();
    this.isRemove = <span class="hljs-literal">false</span>;
  }

  init(uiContext: UIContext) {
    this.CardNode = new BuilderNode(uiContext);
    this.CardNode.build(this.wrapBuilder)
  }
}

let myNode: MyNodeController | undefined;

export <span class="hljs-type">const</span> createMyNode =
  (uiContext: UIContext) =&gt; {
    myNode = new MyNodeController(<span class="hljs-literal">false</span>);
    myNode.init(uiContext);
  }

export <span class="hljs-type">const</span> getMyNode = (): MyNodeController | undefined =&gt; {
  <span class="hljs-keyword">return</span> myNode;
}
</code></pre>
<p><strong>AnimationProperties.etsä»£ç </strong></p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-comment">// AnimationProperties.ets</span>
<span class="hljs-comment">// ä¸€é•œåˆ°åº•è½¬åœºåŠ¨ç”»å°è£…</span>
import { curves, UIContext } from <span class="hljs-string">'@kit.ArkUI'</span>;
import { RectInfoInPx } from <span class="hljs-string">'../utils/ComponentAttrUtils'</span>;
import { WindowUtils } from <span class="hljs-string">'../utils/WindowUtils'</span>;
import { MyNodeController } from <span class="hljs-string">'../NodeContainer/CustomComponent'</span>;

<span class="hljs-type">const</span> TAG: <span class="hljs-built_in">string</span> = <span class="hljs-string">'AnimationProperties'</span>;

<span class="hljs-type">const</span> DEVICE_BORDER_RADIUS: number = <span class="hljs-number">34</span>;

<span class="hljs-comment">// å°†è‡ªå®šä¹‰ä¸€é•œåˆ°åº•è½¬åœºåŠ¨ç”»è¿›è¡Œå°è£…ï¼Œå…¶ä»–ç•Œé¢ä¹Ÿéœ€è¦åšè‡ªå®šä¹‰ä¸€é•œåˆ°åº•è½¬åœºçš„è¯ï¼Œå¯ä»¥ç›´æ¥å¤ç”¨ï¼Œå‡å°‘å·¥ä½œé‡</span>
@Observed
export <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AnimationProperties</span> {</span>
  public navDestinationBgColor: ResourceColor = Color.Transparent;
  public translateX: number = <span class="hljs-number">0</span>;
  public translateY: number = <span class="hljs-number">0</span>;
  public scaleValue: number = <span class="hljs-number">1</span>;
  public clipWidth: Dimension = <span class="hljs-number">0</span>;
  public clipHeight: Dimension = <span class="hljs-number">0</span>;
  public radius: number = <span class="hljs-number">0</span>;
  public positionValue: number = <span class="hljs-number">0</span>;
  public showDetailContent: boolean = <span class="hljs-literal">false</span>;
  private uiContext: UIContext;

  constructor(uiContext: UIContext) {
    this.uiContext = uiContext
  }

  public doAnimation(cardItemInfo_px: RectInfoInPx, isPush: boolean, isExit: boolean,
                     transitionProxy: NavigationTransitionProxy, extraTranslateValue: number, prePageOnFinish: (index: MyNodeController) =&gt; <span class="hljs-type">void</span>, myNodeController: MyNodeController | undefined): <span class="hljs-type">void</span> {
    <span class="hljs-comment">// é¦–å…ˆè®¡ç®—å¡ç‰‡çš„å®½é«˜ä¸çª—å£å®½é«˜çš„æ¯”ä¾‹</span>
    let widthScaleRatio = cardItemInfo_px.width / WindowUtils.windowWidth_px;
    let heightScaleRatio = cardItemInfo_px.height / WindowUtils.windowHeight_px;
    let isUseWidthScale = widthScaleRatio &gt; heightScaleRatio;
    let initScale: number = isUseWidthScale ? widthScaleRatio : heightScaleRatio;

    let initTranslateX: number = <span class="hljs-number">0</span>;
    let initTranslateY: number = <span class="hljs-number">0</span>;
    let initClipWidth: Dimension = <span class="hljs-number">0</span>;
    let initClipHeight: Dimension = <span class="hljs-number">0</span>;
    <span class="hljs-comment">// ä½¿å¾—PageTwoå¡ç‰‡å‘ä¸Šæ‰©åˆ°çŠ¶æ€æ </span>
    let initPositionValue: number = -this.uiContext.px2vp(WindowUtils.topAvoidAreaHeight_px + extraTranslateValue);

    <span class="hljs-keyword">if</span> (isUseWidthScale) {
      initTranslateX = this.uiContext.px2vp(cardItemInfo_px.left - (WindowUtils.windowWidth_px - cardItemInfo_px.width) / <span class="hljs-number">2</span>);
      initClipWidth = <span class="hljs-string">'100%'</span>;
      initClipHeight = this.uiContext.px2vp((cardItemInfo_px.height) / initScale);
      initTranslateY = this.uiContext.px2vp(cardItemInfo_px.top - ((this.uiContext.vp2px(initClipHeight) - this.uiContext.vp2px(initClipHeight) * initScale) / <span class="hljs-number">2</span>));
    } <span class="hljs-keyword">else</span> {
      initTranslateY = this.uiContext.px2vp(cardItemInfo_px.top - (WindowUtils.windowHeight_px - cardItemInfo_px.height) / <span class="hljs-number">2</span>);
      initClipHeight = <span class="hljs-string">'100%'</span>;
      initClipWidth = this.uiContext.px2vp((cardItemInfo_px.width) / initScale);
      initTranslateX = this.uiContext.px2vp(cardItemInfo_px.left - (WindowUtils.windowWidth_px / <span class="hljs-number">2</span> - cardItemInfo_px.width / <span class="hljs-number">2</span>));
    }

    <span class="hljs-comment">// è½¬åœºåŠ¨ç”»å¼€å§‹å‰é€šè¿‡è®¡ç®—scaleã€translateã€positionå’Œclip height &amp; widthï¼Œç¡®å®šèŠ‚ç‚¹è¿ç§»å‰åä½ç½®ä¸€è‡´</span>
    console.info(TAG, <span class="hljs-string">'initScale: '</span> + initScale + <span class="hljs-string">' initTranslateX '</span> + initTranslateX +
    <span class="hljs-string">' initTranslateY '</span> + initTranslateY + <span class="hljs-string">' initClipWidth '</span> + initClipWidth +
    <span class="hljs-string">' initClipHeight '</span> + initClipHeight + <span class="hljs-string">' initPositionValue '</span> + initPositionValue);
    <span class="hljs-comment">// è½¬åœºè‡³æ–°é¡µé¢</span>
    <span class="hljs-keyword">if</span> (isPush &amp;&amp; !isExit) {
      this.scaleValue = initScale;
      this.translateX = initTranslateX;
      this.clipWidth = initClipWidth;
      this.clipHeight = initClipHeight;
      this.translateY = initTranslateY;
      this.positionValue = initPositionValue;

      this.uiContext?.animateTo({
        curve: curves.interpolatingSpring(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">328</span>, <span class="hljs-number">36</span>),
        onFinish: () =&gt; {
          <span class="hljs-keyword">if</span> (transitionProxy) {
            transitionProxy.finishTransition();
          }
        }
      }, () =&gt; {
        this.scaleValue = <span class="hljs-number">1.0</span>;
        this.translateX = <span class="hljs-number">0</span>;
        this.translateY = <span class="hljs-number">0</span>;
        this.clipWidth = <span class="hljs-string">'100%'</span>;
        this.clipHeight = <span class="hljs-string">'100%'</span>;
        <span class="hljs-comment">// é¡µé¢åœ†è§’ä¸ç³»ç»Ÿåœ†è§’ä¸€è‡´</span>
        this.radius = DEVICE_BORDER_RADIUS;
        this.showDetailContent = <span class="hljs-literal">true</span>;
      })

      this.uiContext?.animateTo({
        duration: <span class="hljs-number">100</span>,
        curve: Curve.Sharp,
      }, () =&gt; {
        <span class="hljs-comment">// é¡µé¢ç”±é€æ˜é€æ¸å˜ä¸ºè®¾ç½®èƒŒæ™¯è‰²</span>
        this.navDestinationBgColor = <span class="hljs-string">'#00ffffff'</span>;
      })

      <span class="hljs-comment">// è¿”å›æ—§é¡µé¢</span>
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!isPush &amp;&amp; isExit) {

      this.uiContext?.animateTo({
        duration: <span class="hljs-number">350</span>,
        curve: Curve.EaseInOut,
        onFinish: () =&gt; {
          <span class="hljs-keyword">if</span> (transitionProxy) {
            transitionProxy.finishTransition();
          }
          prePageOnFinish(myNodeController);
          <span class="hljs-comment">// è‡ªå®šä¹‰èŠ‚ç‚¹ä»PageTwoä¸‹æ ‘</span>
          <span class="hljs-keyword">if</span> (myNodeController != undefined) {
            (myNodeController as MyNodeController).onRemove();
          }
        }
      }, () =&gt; {
        this.scaleValue = initScale;
        this.translateX = initTranslateX;
        this.translateY = initTranslateY;
        this.radius = <span class="hljs-number">0</span>;
        this.clipWidth = initClipWidth;
        this.clipHeight = initClipHeight;
        this.showDetailContent = <span class="hljs-literal">false</span>;
      })

      this.uiContext?.animateTo({
        duration: <span class="hljs-number">200</span>,
        delay: <span class="hljs-number">150</span>,
        curve: Curve.Friction,
      }, () =&gt; {
        this.navDestinationBgColor = Color.Transparent;
      })
    }
  }
}
</code></pre>
<p><strong>PageOne.etsä»£ç </strong></p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-comment">// PageOne.ets</span>
import { CustomTransition } from <span class="hljs-string">'../CustomTransition/CustomNavigationUtils'</span>;
import { MyNodeController, createMyNode, getMyNode } from <span class="hljs-string">'../NodeContainer/CustomComponent'</span>;
import { ComponentAttrUtils, RectInfoInPx } from <span class="hljs-string">'../utils/ComponentAttrUtils'</span>;
import { WindowUtils } from <span class="hljs-string">'../utils/WindowUtils'</span>;

@Builder
export function <span class="hljs-title function_">PageOneBuilder</span><span class="hljs-params">()</span> {
  PageOne();
}

@Component
export <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">PageOne</span> {</span>
  private pageInfos: NavPathStack = new NavPathStack();
  private pageId: number = <span class="hljs-number">-1</span>;
  @State myNodeController: MyNodeController | undefined = new MyNodeController(<span class="hljs-literal">false</span>);

  aboutToAppear(): <span class="hljs-type">void</span> {
    let node = getMyNode();
    <span class="hljs-keyword">if</span> (node == undefined) {
      <span class="hljs-comment">// æ–°å»ºè‡ªå®šä¹‰èŠ‚ç‚¹</span>
      createMyNode(this.getUIContext());
    }
    this.myNodeController = getMyNode();
  }

  private <span class="hljs-title function_">doFinishTransition</span><span class="hljs-params">()</span>: <span class="hljs-type">void</span> {
    <span class="hljs-comment">// PageTwoç»“æŸè½¬åœºæ—¶å°†èŠ‚ç‚¹ä»PageTwoè¿ç§»å›PageOne</span>
    this.myNodeController = getMyNode();
  }

  private <span class="hljs-title function_">registerCustomTransition</span><span class="hljs-params">()</span>: <span class="hljs-type">void</span> {
    <span class="hljs-comment">// æ³¨å†Œè‡ªå®šä¹‰åŠ¨ç”»åè®®</span>
    CustomTransition.getInstance().registerNavParam(this.pageId,
      (isPush: boolean, isExit: boolean, transitionProxy: NavigationTransitionProxy) =&gt; {}, <span class="hljs-number">500</span>);
  }

  private <span class="hljs-title function_">onCardClicked</span><span class="hljs-params">()</span>: <span class="hljs-type">void</span> {
    let cardItemInfo: RectInfoInPx =
      ComponentAttrUtils.getRectInfoById(WindowUtils.window.getUIContext(), <span class="hljs-string">'card'</span>);
    let param: Record&lt;<span class="hljs-built_in">string</span>, Object&gt; = {};
    param[<span class="hljs-string">'cardItemInfo'</span>] = cardItemInfo;
    param[<span class="hljs-string">'doDefaultTransition'</span>] = (myController: MyNodeController) =&gt; {
      this.doFinishTransition()
    };
    this.pageInfos.pushPath({ name: <span class="hljs-string">'PageTwo'</span>, param: param });
    <span class="hljs-comment">// è‡ªå®šä¹‰èŠ‚ç‚¹ä»PageOneä¸‹æ ‘</span>
    <span class="hljs-keyword">if</span> (this.myNodeController != undefined) {
      (this.myNodeController as MyNodeController).onRemove();
    }
  }

  build() {
    NavDestination() {
      Stack() {
        Column({ space: <span class="hljs-number">20</span> }) {
          Row({ space: <span class="hljs-number">10</span> }) {
            <span class="hljs-comment">// å›¾ç‰‡ä½¿ç”¨Resourceèµ„æºï¼Œéœ€ç”¨æˆ·è‡ªå®šä¹‰</span>
            Image($r(<span class="hljs-string">"app.media.avatar"</span>))
              .size({ width: <span class="hljs-number">50</span>, height: <span class="hljs-number">50</span> })
              .borderRadius(<span class="hljs-number">25</span>)
              .clip(<span class="hljs-literal">true</span>)

            Text(<span class="hljs-string">'Alice'</span>)
          }
          .justifyContent(FlexAlign.Start)

          Text(<span class="hljs-string">'ä½ å¥½ä¸–ç•Œ'</span>)

          NodeContainer(this.myNodeController)
            .size({ width: <span class="hljs-number">320</span>, height: <span class="hljs-number">250</span> })
            .onClick(() =&gt; {
              this.onCardClicked()
            })
        }
        .alignItems(HorizontalAlign.Start)
        .margin(<span class="hljs-number">30</span>)
      }
    }
    .onReady((context: NavDestinationContext) =&gt; {
      this.pageInfos = context.pathStack;
      this.pageId = this.pageInfos.getAllPathName().length - <span class="hljs-number">1</span>;
      this.registerCustomTransition();
    })
    .onDisAppear(() =&gt; {
      CustomTransition.getInstance().unRegisterNavParam(this.pageId);
      <span class="hljs-comment">// è‡ªå®šä¹‰èŠ‚ç‚¹ä»PageOneä¸‹æ ‘</span>
      <span class="hljs-keyword">if</span> (this.myNodeController != undefined) {
        (this.myNodeController as MyNodeController).onRemove();
      }
    })
  }
}
</code></pre>
<p><strong>PageTwo.etsä»£ç </strong></p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-comment">// PageTwo.ets</span>
import { CustomTransition } from <span class="hljs-string">'../CustomTransition/CustomNavigationUtils'</span>;
import { AnimationProperties } from <span class="hljs-string">'../CustomTransition/AnimationProperties'</span>;
import { RectInfoInPx } from <span class="hljs-string">'../utils/ComponentAttrUtils'</span>;
import { getMyNode, MyNodeController } from <span class="hljs-string">'../NodeContainer/CustomComponent'</span>;

@Builder
export function <span class="hljs-title function_">PageTwoBuilder</span><span class="hljs-params">()</span> {
  PageTwo();
}

@Component
export <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">PageTwo</span> {</span>
  @State pageInfos: NavPathStack = new NavPathStack();
  @State animationProperties: AnimationProperties = new AnimationProperties(this.getUIContext());
  @State myNodeController: MyNodeController | undefined = new MyNodeController(<span class="hljs-literal">false</span>);

  private pageId: number = <span class="hljs-number">-1</span>;

  private shouldDoDefaultTransition: boolean = <span class="hljs-literal">false</span>;
  private prePageDoFinishTransition: () =&gt; <span class="hljs-type">void</span> = () =&gt; {};
  private cardItemInfo: RectInfoInPx = new RectInfoInPx();

  @StorageProp(<span class="hljs-string">'windowSizeChanged'</span>) @Watch(<span class="hljs-string">'unRegisterNavParam'</span>) windowSizeChangedTime: number = <span class="hljs-number">0</span>;
  @StorageProp(<span class="hljs-string">'onConfigurationUpdate'</span>) @Watch(<span class="hljs-string">'unRegisterNavParam'</span>) onConfigurationUpdateTime: number = <span class="hljs-number">0</span>;

  aboutToAppear(): <span class="hljs-type">void</span> {
    <span class="hljs-comment">// è¿ç§»è‡ªå®šä¹‰èŠ‚ç‚¹è‡³å½“å‰é¡µé¢</span>
    this.myNodeController = getMyNode();
  }

  private <span class="hljs-title function_">unRegisterNavParam</span><span class="hljs-params">()</span>: <span class="hljs-type">void</span> {
    this.shouldDoDefaultTransition = <span class="hljs-literal">true</span>;
  }

  private <span class="hljs-title function_">onBackPressed</span><span class="hljs-params">()</span>: boolean {
    <span class="hljs-keyword">if</span> (this.shouldDoDefaultTransition) {
      CustomTransition.getInstance().unRegisterNavParam(this.pageId);
      this.pageInfos.pop();
      this.prePageDoFinishTransition();
      this.shouldDoDefaultTransition = <span class="hljs-literal">false</span>;
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }
    this.pageInfos.pop();
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
  }

  build() {
    NavDestination() {
      <span class="hljs-comment">// Stackéœ€è¦è®¾ç½®alignContentä¸ºTopStartï¼Œå¦åˆ™åœ¨é«˜åº¦å˜åŒ–è¿‡ç¨‹ä¸­ï¼Œæˆªå›¾å’Œå†…å®¹éƒ½ä¼šéšé«˜åº¦é‡æ–°å¸ƒå±€ä½ç½®</span>
      Stack({ alignContent: Alignment.TopStart }) {
        Stack({ alignContent: Alignment.TopStart }) {
          Column({space: <span class="hljs-number">20</span>}) {
            NodeContainer(this.myNodeController)
            <span class="hljs-keyword">if</span> (this.animationProperties.showDetailContent)
              Text(<span class="hljs-string">'å±•å¼€æ€å†…å®¹'</span>)
                .fontSize(<span class="hljs-number">20</span>)
                .transition(TransitionEffect.OPACITY)
                .margin(<span class="hljs-number">30</span>)
          }
          .alignItems(HorizontalAlign.Start)
        }
        .position({ y: this.animationProperties.positionValue })
      }
      .scale({ x: this.animationProperties.scaleValue, y: this.animationProperties.scaleValue })
      .translate({ x: this.animationProperties.translateX, y: this.animationProperties.translateY })
      .width(this.animationProperties.clipWidth)
      .height(this.animationProperties.clipHeight)
      .borderRadius(this.animationProperties.radius)
      <span class="hljs-comment">// expandSafeAreaä½¿å¾—Stackåšæ²‰æµ¸å¼æ•ˆæœï¼Œå‘ä¸Šæ‰©åˆ°çŠ¶æ€æ ï¼Œå‘ä¸‹æ‰©åˆ°å¯¼èˆªæ¡</span>
      .expandSafeArea([SafeAreaType.SYSTEM])
      <span class="hljs-comment">// å¯¹é«˜åº¦è¿›è¡Œè£åˆ‡</span>
      .clip(<span class="hljs-literal">true</span>)
    }
    .backgroundColor(this.animationProperties.navDestinationBgColor)
    .hideTitleBar(<span class="hljs-literal">true</span>)
    .onReady((context: NavDestinationContext) =&gt; {
      this.pageInfos = context.pathStack;
      this.pageId = this.pageInfos.getAllPathName().length - <span class="hljs-number">1</span>;
      let param = context.pathInfo?.param as Record&lt;<span class="hljs-built_in">string</span>, Object&gt;;
      this.prePageDoFinishTransition = param[<span class="hljs-string">'doDefaultTransition'</span>] as () =&gt; <span class="hljs-type">void</span>;
      this.cardItemInfo = param[<span class="hljs-string">'cardItemInfo'</span>] as RectInfoInPx;
      CustomTransition.getInstance().registerNavParam(this.pageId,
        (isPush: boolean, isExit: boolean, transitionProxy: NavigationTransitionProxy) =&gt; {
          this.animationProperties.doAnimation(
            this.cardItemInfo, isPush, isExit, transitionProxy, <span class="hljs-number">0</span>,
            this.prePageDoFinishTransition, this.myNodeController);
        }, <span class="hljs-number">500</span>);
    })
    .onBackPressed(() =&gt; {
      <span class="hljs-keyword">return</span> this.onBackPressed();
    })
    .onDisAppear(() =&gt; {
      CustomTransition.getInstance().unRegisterNavParam(this.pageId);
    })
  }
}
</code></pre>
<p><strong>route_map.json</strong></p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-comment">// å·¥ç¨‹é…ç½®æ–‡ä»¶module.json5ä¸­é…ç½® {"routerMap": "$profile:route_map"}</span>
<span class="hljs-comment">// route_map.json</span>
{
  <span class="hljs-string">"routerMap"</span>: [
    {
      <span class="hljs-string">"name"</span>: <span class="hljs-string">"PageOne"</span>,
      <span class="hljs-string">"pageSourceFile"</span>: <span class="hljs-string">"src/main/ets/pages/PageOne.ets"</span>,
      <span class="hljs-string">"buildFunction"</span>: <span class="hljs-string">"PageOneBuilder"</span>
    },
    {
      <span class="hljs-string">"name"</span>: <span class="hljs-string">"PageTwo"</span>,
      <span class="hljs-string">"pageSourceFile"</span>: <span class="hljs-string">"src/main/ets/pages/PageTwo.ets"</span>,
      <span class="hljs-string">"buildFunction"</span>: <span class="hljs-string">"PageTwoBuilder"</span>
    }
  ]
}
</code></pre>
<p><strong>EntryAbility.etsä»£ç </strong></p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-comment">// EntryAbility.ets</span>
<span class="hljs-comment">// ç¨‹åºå…¥å£å¤„çš„onWindowStageCreateå¢åŠ å¯¹çª—å£å®½é«˜ç­‰çš„æŠ“å–</span>

import { AbilityConstant, UIAbility, Want } from <span class="hljs-string">'@kit.AbilityKit'</span>;
import { hilog } from <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;
import { display, window } from <span class="hljs-string">'@kit.ArkUI'</span>;
import { WindowUtils } from <span class="hljs-string">'../utils/WindowUtils'</span>;

<span class="hljs-type">const</span> TAG: <span class="hljs-built_in">string</span> = <span class="hljs-string">'EntryAbility'</span>;

export <span class="hljs-keyword">default</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">EntryAbility</span> <span class="hljs-title">extends</span> <span class="hljs-title">UIAbility</span> {</span>
  private currentBreakPoint: <span class="hljs-built_in">string</span> = <span class="hljs-string">'';

  onCreate(want: Want, launchParam: AbilityConstant.LaunchParam): void {
    hilog.info(0x0000, '</span>testTag<span class="hljs-number">'</span>, <span class="hljs-string">'%{public}s'</span>, <span class="hljs-string">'Ability onCreate'</span>);
  }

  onDestroy(): <span class="hljs-type">void</span> {
    hilog.info(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'%{public}s'</span>, <span class="hljs-string">'Ability onDestroy'</span>);
  }

  onWindowStageCreate(windowStage: window.WindowStage): <span class="hljs-type">void</span> {
    <span class="hljs-comment">// Main window is created, set main page for this ability</span>
    hilog.info(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'%{public}s'</span>, <span class="hljs-string">'Ability onWindowStageCreate'</span>);

    <span class="hljs-comment">// è·å–çª—å£å®½é«˜</span>
    WindowUtils.window = windowStage.getMainWindowSync();
    WindowUtils.windowWidth_px = WindowUtils.window.getWindowProperties().windowRect.width;
    WindowUtils.windowHeight_px = WindowUtils.window.getWindowProperties().windowRect.height;

    this.updateBreakpoint(WindowUtils.windowWidth_px);

    <span class="hljs-comment">// è·å–ä¸Šæ–¹é¿è®©åŒº(çŠ¶æ€æ ç­‰)é«˜åº¦</span>
    let avoidArea = WindowUtils.window.getWindowAvoidArea(window.AvoidAreaType.TYPE_SYSTEM);
    WindowUtils.topAvoidAreaHeight_px = avoidArea.topRect.height;

    <span class="hljs-comment">// è·å–å¯¼èˆªæ¡é«˜åº¦</span>
    let navigationArea = WindowUtils.window.getWindowAvoidArea(window.AvoidAreaType.TYPE_NAVIGATION_INDICATOR);
    WindowUtils.navigationIndicatorHeight_px = navigationArea.bottomRect.height;

    hilog.info(<span class="hljs-number">0x0000</span>, TAG, <span class="hljs-string">'the width is '</span> + WindowUtils.windowWidth_px + <span class="hljs-string">'  '</span> + WindowUtils.windowHeight_px + <span class="hljs-string">'  '</span> +
    WindowUtils.topAvoidAreaHeight_px + <span class="hljs-string">'  '</span> + WindowUtils.navigationIndicatorHeight_px);

    <span class="hljs-comment">// ç›‘å¬çª—å£å°ºå¯¸ã€çŠ¶æ€æ é«˜åº¦åŠå¯¼èˆªæ¡é«˜åº¦çš„å˜åŒ–å¹¶æ›´æ–°</span>
    try {
      WindowUtils.window.on(<span class="hljs-string">'windowSizeChange'</span>, (data) =&gt; {
        hilog.info(<span class="hljs-number">0x0000</span>, TAG, <span class="hljs-string">'on windowSizeChange, the width is '</span> + data.width + <span class="hljs-string">', the height is '</span> + data.height);
        WindowUtils.windowWidth_px = data.width;
        WindowUtils.windowHeight_px = data.height;
        this.updateBreakpoint(data.width);
        AppStorage.setOrCreate(<span class="hljs-string">'windowSizeChanged'</span>, Date.now())
      })

      WindowUtils.window.on(<span class="hljs-string">'avoidAreaChange'</span>, (data) =&gt; {
        <span class="hljs-keyword">if</span> (data.type == window.AvoidAreaType.TYPE_SYSTEM) {
          let topRectHeight = data.area.topRect.height;
          hilog.info(<span class="hljs-number">0x0000</span>, TAG, <span class="hljs-string">'on avoidAreaChange, the top avoid area height is '</span> + topRectHeight);
          WindowUtils.topAvoidAreaHeight_px = topRectHeight;
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (data.type == window.AvoidAreaType.TYPE_NAVIGATION_INDICATOR) {
          let bottomRectHeight = data.area.bottomRect.height;
          hilog.info(<span class="hljs-number">0x0000</span>, TAG, <span class="hljs-string">'on avoidAreaChange, the navigation indicator height is '</span> + bottomRectHeight);
          WindowUtils.navigationIndicatorHeight_px = bottomRectHeight;
        }
      })
    } catch (exception) {
      hilog.error(<span class="hljs-number">0x0000</span>, TAG, `<span class="hljs-keyword">register</span> failed. code: ${exception.code}, message: ${exception.message}`);
    }

    windowStage.loadContent(<span class="hljs-string">'pages/Index'</span>, (err) =&gt; {
      <span class="hljs-keyword">if</span> (err.code) {
        hilog.error(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'Failed to load the content. Cause: %{public}s'</span>, JSON.stringify(err) ?? <span class="hljs-string">'');
        return;
      }
      hilog.info(0x0000, '</span>testTag<span class="hljs-number">'</span>, <span class="hljs-string">'Succeeded in loading the content.'</span>);
    });
  }

  updateBreakpoint(width: number) {
    let windowWidthVp = width / (display.getDefaultDisplaySync().densityDPI / <span class="hljs-number">160</span>);
    let newBreakPoint: <span class="hljs-built_in">string</span> = <span class="hljs-string">'';
    if (windowWidthVp &lt; 400) {
      newBreakPoint = '</span>xs<span class="hljs-number">'</span>;
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (windowWidthVp &lt; <span class="hljs-number">600</span>) {
      newBreakPoint = <span class="hljs-string">'sm'</span>;
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (windowWidthVp &lt; <span class="hljs-number">800</span>) {
      newBreakPoint = <span class="hljs-string">'md'</span>;
    } <span class="hljs-keyword">else</span> {
      newBreakPoint = <span class="hljs-string">'lg'</span>;
    }
    <span class="hljs-keyword">if</span> (this.currentBreakPoint !== newBreakPoint) {
      this.currentBreakPoint = newBreakPoint;
      <span class="hljs-comment">// ä½¿ç”¨çŠ¶æ€å˜é‡è®°å½•å½“å‰æ–­ç‚¹å€¼</span>
      AppStorage.setOrCreate(<span class="hljs-string">'currentBreakpoint'</span>, this.currentBreakPoint);
    }
  }

  onWindowStageDestroy(): <span class="hljs-type">void</span> {
    <span class="hljs-comment">// Main window is destroyed, release UI related resources</span>
    hilog.info(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'%{public}s'</span>, <span class="hljs-string">'Ability onWindowStageDestroy'</span>);
  }

  onForeground(): <span class="hljs-type">void</span> {
    <span class="hljs-comment">// Ability has brought to foreground</span>
    hilog.info(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'%{public}s'</span>, <span class="hljs-string">'Ability onForeground'</span>);
  }

  onBackground(): <span class="hljs-type">void</span> {
    <span class="hljs-comment">// Ability has back to background</span>
    hilog.info(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'%{public}s'</span>, <span class="hljs-string">'Ability onBackground'</span>);
  }
}
</code></pre>
<p><strong>Index.etsä»£ç </strong></p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-comment">// Index.ets</span>
import { AnimateCallback, CustomTransition } from <span class="hljs-string">'../CustomTransition/CustomNavigationUtils'</span>;

<span class="hljs-type">const</span> TAG: <span class="hljs-built_in">string</span> = <span class="hljs-string">'Index'</span>;

@Entry
@Component
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Index</span> {</span>
  private pageInfos: NavPathStack = new NavPathStack();
  <span class="hljs-comment">// å…è®¸è¿›è¡Œè‡ªå®šä¹‰è½¬åœºçš„é¡µé¢åç§°</span>
  private allowedCustomTransitionFromPageName: <span class="hljs-built_in">string</span>[] = [<span class="hljs-string">'PageOne'</span>];
  private allowedCustomTransitionToPageName: <span class="hljs-built_in">string</span>[] = [<span class="hljs-string">'PageTwo'</span>];

  aboutToAppear(): <span class="hljs-type">void</span> {
    this.pageInfos.pushPath({ name: <span class="hljs-string">'PageOne'</span> });
  }

  private <span class="hljs-title function_">isCustomTransitionEnabled</span><span class="hljs-params">(fromName: <span class="hljs-built_in">string</span>, toName: <span class="hljs-built_in">string</span>)</span>: boolean {
    <span class="hljs-comment">// ç‚¹å‡»å’Œè¿”å›å‡éœ€è¦è¿›è¡Œè‡ªå®šä¹‰è½¬åœºï¼Œå› æ­¤éœ€è¦åˆ†åˆ«åˆ¤æ–­</span>
    <span class="hljs-keyword">if</span> ((this.allowedCustomTransitionFromPageName.includes(fromName)
      &amp;&amp; this.allowedCustomTransitionToPageName.includes(toName))
      || (this.allowedCustomTransitionFromPageName.includes(toName)
        &amp;&amp; this.allowedCustomTransitionToPageName.includes(fromName))) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  }

  build() {
    Navigation(this.pageInfos)
      .hideNavBar(<span class="hljs-literal">true</span>)
      .customNavContentTransition((from: NavContentInfo, to: NavContentInfo, operation: NavigationOperation) =&gt; {
        <span class="hljs-keyword">if</span> ((!from || !to) || (!from.name || !to.name)) {
          <span class="hljs-keyword">return</span> undefined;
        }

        <span class="hljs-comment">// é€šè¿‡fromå’Œtoçš„nameå¯¹è‡ªå®šä¹‰è½¬åœºè·¯ç”±è¿›è¡Œç®¡æ§</span>
        <span class="hljs-keyword">if</span> (!this.isCustomTransitionEnabled(from.name, to.name)) {
          <span class="hljs-keyword">return</span> undefined;
        }

        <span class="hljs-comment">// éœ€è¦å¯¹è½¬åœºé¡µé¢æ˜¯å¦æ³¨å†Œäº†animationè¿›è¡Œåˆ¤æ–­ï¼Œæ¥å†³å®šæ˜¯å¦è¿›è¡Œè‡ªå®šä¹‰è½¬åœº</span>
        let fromParam: AnimateCallback = CustomTransition.getInstance().getAnimateParam(from.index);
        let toParam: AnimateCallback = CustomTransition.getInstance().getAnimateParam(to.index);
        <span class="hljs-keyword">if</span> (!fromParam.animation || !toParam.animation) {
          <span class="hljs-keyword">return</span> undefined;
        }

        <span class="hljs-comment">// ä¸€åˆ‡åˆ¤æ–­å®Œæˆåï¼Œæ„é€ customAnimationç»™ç³»ç»Ÿä¾§è°ƒç”¨ï¼Œæ‰§è¡Œè‡ªå®šä¹‰è½¬åœºåŠ¨ç”»</span>
        let customAnimation: NavigationAnimatedTransition = {
          onTransitionEnd: (isSuccess: boolean) =&gt; {
            console.info(TAG, `current transition result is ${isSuccess}`);
          },
          timeout: <span class="hljs-number">2000</span>,
          transition: (transitionProxy: NavigationTransitionProxy) =&gt; {
            console.info(TAG, <span class="hljs-string">'trigger transition callback'</span>);
            <span class="hljs-keyword">if</span> (fromParam.animation) {
              fromParam.animation(operation == NavigationOperation.PUSH, <span class="hljs-literal">true</span>, transitionProxy);
            }
            <span class="hljs-keyword">if</span> (toParam.animation) {
              toParam.animation(operation == NavigationOperation.PUSH, <span class="hljs-literal">false</span>, transitionProxy);
            }
          }
        };
        <span class="hljs-keyword">return</span> customAnimation;
      })
  }
}
</code></pre>
<h3 data-id="heading-5">å››ã€ç»“åˆBindSheetä½¿ç”¨</h3>
<blockquote>
<p>æƒ³å®ç°åŠæ¨¡æ€è½¬åœºï¼ˆbindSheetï¼‰çš„åŒæ—¶ï¼Œç»„ä»¶ä»åˆå§‹ç•Œé¢åšä¸€é•œåˆ°åº•åŠ¨ç”»åˆ°åŠæ¨¡æ€é¡µé¢çš„æ•ˆæœï¼Œå¯ä»¥ä½¿ç”¨è¿™æ ·çš„è®¾è®¡æ€è·¯ã€‚å°†SheetOptionsä¸­çš„modeè®¾ç½®ä¸ºSheetMode.EMBEDDEDï¼Œè¯¥æ¨¡å¼ä¸‹æ–°èµ·çš„é¡µé¢å¯ä»¥è¦†ç›–åœ¨åŠæ¨¡æ€å¼¹çª—ä¸Šï¼Œé¡µé¢è¿”å›åè¯¥åŠæ¨¡æ€ä¾æ—§å­˜åœ¨ï¼ŒåŠæ¨¡æ€é¢æ¿å†…å®¹ä¸ä¸¢å¤±ã€‚åœ¨åŠæ¨¡æ€è½¬åœºçš„åŒæ—¶è®¾ç½®ä¸€å…¨æ¨¡æ€è½¬åœºï¼ˆbindContentCoverï¼‰é¡µé¢æ— è½¬åœºå‡ºç°ï¼Œè¯¥é¡µé¢ä»…æœ‰éœ€è¦åšå…±äº«å…ƒç´ è½¬åœºçš„ç»„ä»¶ï¼Œé€šè¿‡å±æ€§åŠ¨ç”»ï¼Œå±•ç¤ºç»„ä»¶ä»åˆå§‹ç•Œé¢è‡³åŠæ¨¡æ€é¡µé¢çš„ä¸€é•œåˆ°åº•åŠ¨æ•ˆï¼Œå¹¶åœ¨åŠ¨ç”»ç»“æŸæ—¶å…³é—­é¡µé¢ï¼Œå¹¶å°†è¯¥ç»„ä»¶è¿ç§»è‡³åŠæ¨¡æ€é¡µé¢ã€‚ <br/>
ä»¥ç‚¹å‡»å›¾ç‰‡å±•å¼€åŠæ¨¡æ€é¡µçš„åœºæ™¯ä¸ºä¾‹ï¼Œå®ç°æ­¥éª¤ä¸ºï¼š</p>
<ul>
<li>åœ¨åˆå§‹ç•Œé¢æŒ‚è½½åŠæ¨¡æ€è½¬åœºå’Œå…¨æ¨¡æ€è½¬åœºä¸¤ä¸ªé¡µé¢ï¼ŒåŠæ¨¡æ€é¡µæŒ‰éœ€å¸ƒå±€ï¼Œå…¨æ¨¡æ€é¡µé¢ä»…æ”¾ç½®ä¸€é•œåˆ°åº•åŠ¨æ•ˆéœ€è¦çš„ç»„ä»¶ï¼ŒæŠ“å–å¸ƒå±€ä¿¡æ¯ï¼Œä½¿å…¶åˆå§‹ä½ç½®ä¸ºåˆå§‹ç•Œé¢å›¾ç‰‡çš„ä½ç½®ã€‚ç‚¹å‡»åˆå§‹ç•Œé¢å›¾ç‰‡æ—¶ï¼ŒåŒæ—¶è§¦å‘åŠæ¨¡æ€å’Œå…¨æ¨¡æ€é¡µé¢å‡ºç°ï¼Œå› è®¾ç½®ä¸ºSheetMode.EMBEDDEDæ¨¡å¼ï¼Œæ­¤æ—¶å…¨æ¨¡æ€é¡µé¢å±‚çº§æœ€é«˜ã€‚</li>
<li>è®¾ç½®ä¸å¯è§çš„å ä½å›¾ç‰‡ç½®äºåŠæ¨¡æ€é¡µä¸Šï¼Œä½œä¸ºä¸€é•œåˆ°åº•åŠ¨æ•ˆç»“æŸæ—¶å›¾ç‰‡çš„ç»ˆæ­¢ä½ç½®ã€‚åˆ©ç”¨<strong>å¸ƒå±€å›è°ƒ</strong>ç›‘å¬è¯¥å ä½å›¾ç‰‡å¸ƒå±€å®Œæˆçš„æ—¶å€™ï¼Œæ­¤æ—¶æ‰§è¡Œå›è°ƒæŠ“å–å ä½å›¾ç‰‡çš„ä½ç½®ä¿¡æ¯ï¼Œéšåå…¨æ¨¡æ€é¡µé¢ä¸Šçš„å›¾ç‰‡åˆ©ç”¨å±æ€§åŠ¨ç”»å¼€å§‹è¿›è¡Œå…±äº«å…ƒç´ è½¬åœºã€‚</li>
<li>å…¨æ¨¡æ€é¡µé¢çš„åŠ¨ç”»ç»“æŸæ—¶è§¦å‘ç»“æŸå›è°ƒï¼Œå…³é—­å…¨æ¨¡æ€é¡µé¢ï¼Œå°†å…±äº«å…ƒç´ å›¾ç‰‡çš„èŠ‚ç‚¹è¿ç§»è‡³åŠæ¨¡æ€é¡µé¢ï¼Œæ›¿æ¢å ä½å›¾ç‰‡ã€‚</li>
<li>éœ€æ³¨æ„ï¼ŒåŠæ¨¡æ€é¡µé¢çš„å¼¹èµ·é«˜åº¦ä¸åŒï¼Œå…¶é¡µé¢èµ·å§‹ä½ç½®ä¹Ÿæœ‰æ‰€ä¸åŒï¼Œè€Œå…¨æ¨¡æ€åˆ™æ˜¯å…¨å±æ˜¾ç¤ºï¼Œä¸¤è€…å­˜åœ¨ä¸€é«˜åº¦å·®ï¼Œåšä¸€é•œåˆ°åº•åŠ¨ç”»æ—¶ï¼Œéœ€è¦è®¡ç®—å·®å€¼å¹¶è¿›è¡Œä¿®æ­£ï¼Œå…·ä½“å¯è§demoã€‚</li>
<li>è¿˜å¯ä»¥é…åˆä¸€é•œåˆ°åº•åŠ¨ç”»ï¼Œç»™åˆå§‹ç•Œé¢å›¾ç‰‡ä¹Ÿå¢åŠ ä¸€ä¸ªä»é€æ˜åˆ°å‡ºç°çš„åŠ¨ç”»ï¼Œä½¿å¾—åŠ¨æ•ˆæ›´ä¸ºæµç•…ã€‚</li>
</ul>
</blockquote>
<blockquote>
<p><strong>ç¤ºä¾‹æ•ˆæœå›¾</strong> <br/>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b48bfbb1f6ea43deb2826a88888e4b44~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ2hpbmFEcmFnb24=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765502706&amp;x-signature=n%2ByznitbYb%2BxGbMzCQ14wZ%2FuEtI%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
</blockquote>
<p><strong>ç¤ºä¾‹ä»£ç ç»“æ„</strong></p>
<pre><code class="hljs language-c" lang="c">â”œâ”€â”€entry/src/main/ets                 <span class="hljs-comment">// ä»£ç åŒº</span>
â”‚  â”œâ”€â”€entryability
â”‚  â”‚  â””â”€â”€EntryAbility.ets             <span class="hljs-comment">// ç¨‹åºå…¥å£ç±»</span>
â”‚  â”œâ”€â”€NodeContainer
â”‚  â”‚  â””â”€â”€CustomComponent.ets          <span class="hljs-comment">// è‡ªå®šä¹‰å ä½èŠ‚ç‚¹</span>
â”‚  â”œâ”€â”€pages
â”‚  â”‚  â””â”€â”€Index.ets                    <span class="hljs-comment">// è¿›è¡Œå…±äº«å…ƒç´ è½¬åœºçš„ä¸»é¡µé¢</span>
â”‚  â””â”€â”€utils
â”‚     â”œâ”€â”€ComponentAttrUtils.ets       <span class="hljs-comment">// ç»„ä»¶ä½ç½®è·å–</span>
â”‚     â””â”€â”€WindowUtils.ets              <span class="hljs-comment">// çª—å£ä¿¡æ¯</span>
â””â”€â”€entry/src/main/resources           <span class="hljs-comment">// èµ„æºæ–‡ä»¶</span>
</code></pre>
<p><strong>CustomComponent.etsä»£ç </strong></p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-comment">// CustomComponent.ets</span>
<span class="hljs-comment">// è‡ªå®šä¹‰å ä½èŠ‚ç‚¹ï¼Œè·¨å®¹å™¨è¿ç§»èƒ½åŠ›</span>
import { BuilderNode, FrameNode, NodeController } from <span class="hljs-string">'@kit.ArkUI'</span>;

@Builder
function <span class="hljs-title function_">CardBuilder</span><span class="hljs-params">()</span> {
  <span class="hljs-comment">// å›¾ç‰‡ä½¿ç”¨Resourceèµ„æºï¼Œéœ€ç”¨æˆ·è‡ªå®šä¹‰</span>
  Image($r(<span class="hljs-string">"app.media.flower"</span>))
    <span class="hljs-comment">// é¿å…ç¬¬ä¸€æ¬¡åŠ è½½å›¾ç‰‡æ—¶å›¾ç‰‡é—ªçƒ</span>
    .syncLoad(<span class="hljs-literal">true</span>)
}

export <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyNodeController</span> <span class="hljs-title">extends</span> <span class="hljs-title">NodeController</span> {</span>
  private CardNode: BuilderNode&lt;[]&gt; | null = null;
  private wrapBuilder: WrappedBuilder&lt;[]&gt; = wrapBuilder(CardBuilder);
  private needCreate: boolean = <span class="hljs-literal">false</span>;
  private isRemove: boolean = <span class="hljs-literal">false</span>;

  constructor(create: boolean) {
    super();
    this.needCreate = create;
  }

  makeNode(uiContext: UIContext): FrameNode | null {
    <span class="hljs-keyword">if</span>(this.isRemove == <span class="hljs-literal">true</span>){
      <span class="hljs-keyword">return</span> null;
    }
    <span class="hljs-keyword">if</span> (this.needCreate &amp;&amp; this.CardNode == null) {
      this.CardNode = new BuilderNode(uiContext);
      this.CardNode.build(this.wrapBuilder)
    }
    <span class="hljs-keyword">if</span> (this.CardNode == null) {
      <span class="hljs-keyword">return</span> null;
    }
    <span class="hljs-keyword">return</span> this.CardNode!.getFrameNode()!;
  }

  getNode(): BuilderNode&lt;[]&gt; | null {
    <span class="hljs-keyword">return</span> this.CardNode;
  }

  setNode(node: BuilderNode&lt;[]&gt; | null) {
    this.CardNode = node;
    this.rebuild();
  }

  onRemove() {
    this.isRemove = <span class="hljs-literal">true</span>;
    this.rebuild();
    this.isRemove = <span class="hljs-literal">false</span>;
  }

  init(uiContext: UIContext) {
    this.CardNode = new BuilderNode(uiContext);
    this.CardNode.build(this.wrapBuilder)
  }
}

let myNode: MyNodeController | undefined;

export <span class="hljs-type">const</span> createMyNode =
  (uiContext: UIContext) =&gt; {
    myNode = new MyNodeController(<span class="hljs-literal">false</span>);
    myNode.init(uiContext);
  }

export <span class="hljs-type">const</span> getMyNode = (): MyNodeController | undefined =&gt; {
  <span class="hljs-keyword">return</span> myNode;
}
</code></pre>
<p><strong>ComponentAttrUtils.ets</strong></p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-comment">// ComponentAttrUtils.ets</span>
<span class="hljs-comment">// è·å–ç»„ä»¶ç›¸å¯¹çª—å£çš„ä½ç½®</span>
import { componentUtils, UIContext } from <span class="hljs-string">'@kit.ArkUI'</span>;
import { JSON } from <span class="hljs-string">'@kit.ArkTS'</span>;

export <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ComponentAttrUtils</span> {</span>
  <span class="hljs-comment">// æ ¹æ®ç»„ä»¶çš„idè·å–ç»„ä»¶çš„ä½ç½®ä¿¡æ¯</span>
  public <span class="hljs-type">static</span> <span class="hljs-title function_">getRectInfoById</span><span class="hljs-params">(context: UIContext, id: <span class="hljs-built_in">string</span>)</span>: RectInfoInPx {
    <span class="hljs-keyword">if</span> (!context || !id) {
      throw Error(<span class="hljs-string">'object is empty'</span>);
    }
    let componentInfo: componentUtils.ComponentInfo = context.getComponentUtils().getRectangleById(id);

    <span class="hljs-keyword">if</span> (!componentInfo) {
      throw Error(<span class="hljs-string">'object is empty'</span>);
    }

    let rstRect: RectInfoInPx = new RectInfoInPx();
    <span class="hljs-type">const</span> widthScaleGap = componentInfo.size.width * (<span class="hljs-number">1</span> - componentInfo.scale.x) / <span class="hljs-number">2</span>;
    <span class="hljs-type">const</span> heightScaleGap = componentInfo.size.height * (<span class="hljs-number">1</span> - componentInfo.scale.y) / <span class="hljs-number">2</span>;
    rstRect.left = componentInfo.translate.x + componentInfo.windowOffset.x + widthScaleGap;
    rstRect.top = componentInfo.translate.y + componentInfo.windowOffset.y + heightScaleGap;
    rstRect.right =
      componentInfo.translate.x + componentInfo.windowOffset.x + componentInfo.size.width - widthScaleGap;
    rstRect.bottom =
      componentInfo.translate.y + componentInfo.windowOffset.y + componentInfo.size.height - heightScaleGap;
    rstRect.width = rstRect.right - rstRect.left;
    rstRect.height = rstRect.bottom - rstRect.top;
    <span class="hljs-keyword">return</span> {
      left: rstRect.left,
      right: rstRect.right,
      top: rstRect.top,
      bottom: rstRect.bottom,
      width: rstRect.width,
      height: rstRect.height
    }
  }
}

export class RectInfoInPx {
  left: number = <span class="hljs-number">0</span>;
  top: number = <span class="hljs-number">0</span>;
  right: number = <span class="hljs-number">0</span>;
  bottom: number = <span class="hljs-number">0</span>;
  width: number = <span class="hljs-number">0</span>;
  height: number = <span class="hljs-number">0</span>;
}

export <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">RectJson</span> {</span>
  $rect: Array&lt;number&gt; = [];
}
</code></pre>
<p><strong>index.etsä»£ç </strong></p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-comment">// index.ets</span>
import { MyNodeController, createMyNode, getMyNode } from <span class="hljs-string">'../NodeContainer/CustomComponent'</span>;
import { ComponentAttrUtils, RectInfoInPx } from <span class="hljs-string">'../utils/ComponentAttrUtils'</span>;
import { WindowUtils } from <span class="hljs-string">'../utils/WindowUtils'</span>;
import { inspector } from <span class="hljs-string">'@kit.ArkUI'</span>

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AnimationInfo</span> {</span>
  scale: number = <span class="hljs-number">0</span>;
  translateX: number = <span class="hljs-number">0</span>;
  translateY: number = <span class="hljs-number">0</span>;
  clipWidth: Dimension = <span class="hljs-number">0</span>;
  clipHeight: Dimension = <span class="hljs-number">0</span>;
}

@Entry
@Component
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Index</span> {</span>
  @State isShowSheet: boolean = <span class="hljs-literal">false</span>;
  @State isShowImage: boolean = <span class="hljs-literal">false</span>;
  @State isShowOverlay: boolean = <span class="hljs-literal">false</span>;
  @State isAnimating: boolean = <span class="hljs-literal">false</span>;
  @State isEnabled: boolean = <span class="hljs-literal">true</span>;

  @State scaleValue: number = <span class="hljs-number">0</span>;
  @State translateX: number = <span class="hljs-number">0</span>;
  @State translateY: number = <span class="hljs-number">0</span>;
  @State clipWidth: Dimension = <span class="hljs-number">0</span>;
  @State clipHeight: Dimension = <span class="hljs-number">0</span>;
  @State radius: number = <span class="hljs-number">0</span>;
  <span class="hljs-comment">// åŸå›¾çš„é€æ˜åº¦</span>
  @State opacityDegree: number = <span class="hljs-number">1</span>;

  <span class="hljs-comment">// æŠ“å–ç…§ç‰‡åŸä½ç½®ä¿¡æ¯</span>
  private originInfo: AnimationInfo = new AnimationInfo;
  <span class="hljs-comment">// æŠ“å–ç…§ç‰‡åœ¨åŠæ¨¡æ€é¡µä¸Šä½ç½®ä¿¡æ¯</span>
  private targetInfo: AnimationInfo = new AnimationInfo;
  <span class="hljs-comment">// åŠæ¨¡æ€é«˜åº¦</span>
  private bindSheetHeight: number = <span class="hljs-number">450</span>;
  <span class="hljs-comment">// åŠæ¨¡æ€ä¸Šå›¾ç‰‡åœ†è§’</span>
  private sheetRadius: number = <span class="hljs-number">20</span>;

  <span class="hljs-comment">// è®¾ç½®åŠæ¨¡æ€ä¸Šå›¾ç‰‡çš„å¸ƒå±€ç›‘å¬</span>
  listener:inspector.ComponentObserver = this.getUIContext().getUIInspector().createComponentObserver(<span class="hljs-string">'target'</span>);
  aboutToAppear(): <span class="hljs-type">void</span> {
    <span class="hljs-comment">// è®¾ç½®åŠæ¨¡æ€ä¸Šå›¾ç‰‡çš„å¸ƒå±€å®Œæˆå›è°ƒ</span>
    let onLayoutComplete:()=&gt;<span class="hljs-type">void</span>=():<span class="hljs-type">void</span>=&gt;{
      <span class="hljs-comment">// ç›®æ ‡å›¾ç‰‡å¸ƒå±€å®Œæˆæ—¶æŠ“å–å¸ƒå±€ä¿¡æ¯</span>
      this.targetInfo = this.calculateData(<span class="hljs-string">'target'</span>);
      <span class="hljs-comment">// ä»…åŠæ¨¡æ€æ­£ç¡®å¸ƒå±€ä¸”æ­¤æ—¶æ— åŠ¨ç”»æ—¶è§¦å‘ä¸€é•œåˆ°åº•åŠ¨ç”»</span>
      <span class="hljs-keyword">if</span> (this.targetInfo.scale != <span class="hljs-number">0</span> &amp;&amp; this.targetInfo.clipWidth != <span class="hljs-number">0</span> &amp;&amp; this.targetInfo.clipHeight != <span class="hljs-number">0</span> &amp;&amp; !this.isAnimating) {
        this.isAnimating = <span class="hljs-literal">true</span>;
        <span class="hljs-comment">// ç”¨äºä¸€é•œåˆ°åº•çš„æ¨¡æ€é¡µçš„å±æ€§åŠ¨ç”»</span>
        this.getUIContext()?.animateTo({
          duration: <span class="hljs-number">1000</span>,
          curve: Curve.Friction,
          onFinish: () =&gt; {
            <span class="hljs-comment">// æ¨¡æ€è½¬åœºé¡µï¼ˆoverlayï¼‰ä¸Šçš„è‡ªå®šä¹‰èŠ‚ç‚¹ä¸‹æ ‘</span>
            this.isShowOverlay = <span class="hljs-literal">false</span>;
            <span class="hljs-comment">// åŠæ¨¡æ€ä¸Šçš„è‡ªå®šä¹‰èŠ‚ç‚¹ä¸Šæ ‘ï¼Œç”±æ­¤å®ŒæˆèŠ‚ç‚¹è¿ç§»</span>
            this.isShowImage = <span class="hljs-literal">true</span>;
          }
        }, () =&gt; {
          this.scaleValue = this.targetInfo.scale;
          this.translateX = this.targetInfo.translateX;
          this.clipWidth = this.targetInfo.clipWidth;
          this.clipHeight = this.targetInfo.clipHeight;
          <span class="hljs-comment">// ä¿®æ­£å› åŠæ¨¡æ€é«˜åº¦å’Œç¼©æ”¾å¯¼è‡´çš„é«˜åº¦å·®</span>
          this.translateY = this.targetInfo.translateY +
            (this.getUIContext().px2vp(WindowUtils.windowHeight_px) - this.bindSheetHeight
              - this.getUIContext().px2vp(WindowUtils.navigationIndicatorHeight_px) - this.getUIContext().px2vp(WindowUtils.topAvoidAreaHeight_px));
          <span class="hljs-comment">// ä¿®æ­£å› ç¼©æ”¾å¯¼è‡´çš„åœ†è§’å·®å¼‚</span>
          this.radius = this.sheetRadius / this.scaleValue
        })
        <span class="hljs-comment">// åŸå›¾ä»é€æ˜åˆ°å‡ºç°çš„åŠ¨ç”»</span>
        this.getUIContext()?.animateTo({
          duration: <span class="hljs-number">2000</span>,
          curve: Curve.Friction,
        }, () =&gt; {
          this.opacityDegree = <span class="hljs-number">1</span>;
        })
      }
    }
    <span class="hljs-comment">// æ‰“å¼€å¸ƒå±€ç›‘å¬</span>
    this.listener.on(<span class="hljs-string">'layout'</span>, onLayoutComplete)
  }

  <span class="hljs-comment">// è·å–å¯¹åº”idçš„ç»„ä»¶ç›¸å¯¹çª—å£å·¦ä¸Šè§’çš„å±æ€§</span>
  calculateData(id: <span class="hljs-built_in">string</span>): AnimationInfo {
    let itemInfo: RectInfoInPx =
      ComponentAttrUtils.getRectInfoById(WindowUtils.window.getUIContext(), id);
    <span class="hljs-comment">// é¦–å…ˆè®¡ç®—å›¾ç‰‡çš„å®½é«˜ä¸çª—å£å®½é«˜çš„æ¯”ä¾‹</span>
    let widthScaleRatio = itemInfo.width / WindowUtils.windowWidth_px;
    let heightScaleRatio = itemInfo.height / WindowUtils.windowHeight_px;
    let isUseWidthScale = widthScaleRatio &gt; heightScaleRatio;
    let itemScale: number = isUseWidthScale ? widthScaleRatio : heightScaleRatio;
    let itemTranslateX: number = <span class="hljs-number">0</span>;
    let itemClipWidth: Dimension = <span class="hljs-number">0</span>;
    let itemClipHeight: Dimension = <span class="hljs-number">0</span>;
    let itemTranslateY: number = <span class="hljs-number">0</span>;

    <span class="hljs-keyword">if</span> (isUseWidthScale) {
      itemTranslateX = this.getUIContext().px2vp(itemInfo.left - (WindowUtils.windowWidth_px - itemInfo.width) / <span class="hljs-number">2</span>);
      itemClipWidth = <span class="hljs-string">'100%'</span>;
      itemClipHeight = this.getUIContext().px2vp((itemInfo.height) / itemScale);
      itemTranslateY = this.getUIContext().px2vp(itemInfo.top - ((this.getUIContext().vp2px(itemClipHeight) - this.getUIContext().vp2px(itemClipHeight) * itemScale) / <span class="hljs-number">2</span>));
    } <span class="hljs-keyword">else</span> {
      itemTranslateY = this.getUIContext().px2vp(itemInfo.top - (WindowUtils.windowHeight_px - itemInfo.height) / <span class="hljs-number">2</span>);
      itemClipHeight = <span class="hljs-string">'100%'</span>;
      itemClipWidth = this.getUIContext().px2vp((itemInfo.width) / itemScale);
      itemTranslateX = this.getUIContext().px2vp(itemInfo.left - (WindowUtils.windowWidth_px / <span class="hljs-number">2</span> - itemInfo.width / <span class="hljs-number">2</span>));
    }

    <span class="hljs-keyword">return</span> {
      scale: itemScale,
      translateX: itemTranslateX ,
      translateY: itemTranslateY,
      clipWidth: itemClipWidth,
      clipHeight: itemClipHeight,
    }
  }

  <span class="hljs-comment">// ç…§ç‰‡é¡µ</span>
  build() {
    Column() {
      Text(<span class="hljs-string">'ç…§ç‰‡'</span>)
        .textAlign(TextAlign.Start)
        .width(<span class="hljs-string">'100%'</span>)
        .fontSize(<span class="hljs-number">30</span>)
        .padding(<span class="hljs-number">20</span>)
      <span class="hljs-comment">// å›¾ç‰‡ä½¿ç”¨Resourceèµ„æºï¼Œéœ€ç”¨æˆ·è‡ªå®šä¹‰</span>
      Image($r(<span class="hljs-string">"app.media.flower"</span>))
        .opacity(this.opacityDegree)
        .width(<span class="hljs-string">'90%'</span>)
        .id(<span class="hljs-string">'origin'</span>)<span class="hljs-comment">// æŒ‚è½½åŠæ¨¡æ€é¡µ</span>
        .enabled(this.isEnabled)
        .onClick(() =&gt; {
          <span class="hljs-comment">// è·å–åŸå§‹å›¾åƒçš„ä½ç½®ä¿¡æ¯ï¼Œå°†æ¨¡æ€é¡µä¸Šå›¾ç‰‡ç§»åŠ¨ç¼©æ”¾è‡³è¯¥ä½ç½®</span>
          this.originInfo = this.calculateData(<span class="hljs-string">'origin'</span>);
          this.scaleValue = this.originInfo.scale;
          this.translateX = this.originInfo.translateX;
          this.translateY = this.originInfo.translateY;
          this.clipWidth = this.originInfo.clipWidth;
          this.clipHeight = this.originInfo.clipHeight;
          this.radius = <span class="hljs-number">0</span>;
          this.opacityDegree = <span class="hljs-number">0</span>;
          <span class="hljs-comment">// å¯åŠ¨åŠæ¨¡æ€é¡µå’Œæ¨¡æ€é¡µ</span>
          this.isShowSheet = <span class="hljs-literal">true</span>;
          this.isShowOverlay = <span class="hljs-literal">true</span>;
          <span class="hljs-comment">// è®¾ç½®åŸå›¾ä¸ºä¸å¯äº¤äº’æŠ—æ‰“æ–­</span>
          this.isEnabled = <span class="hljs-literal">false</span>;
        })
    }
    .width(<span class="hljs-string">'100%'</span>)
    .height(<span class="hljs-string">'100%'</span>)
    .padding({ top: <span class="hljs-number">20</span> })
    .alignItems(HorizontalAlign.Center)
    .bindSheet(this.isShowSheet, this.mySheet(), {
      <span class="hljs-comment">// Embeddedæ¨¡å¼ä½¿å¾—å…¶ä»–é¡µé¢å¯ä»¥é«˜äºåŠæ¨¡æ€é¡µ</span>
      mode: SheetMode.EMBEDDED,
      height: this.bindSheetHeight,
      onDisappear: () =&gt; {
        <span class="hljs-comment">// ä¿è¯åŠæ¨¡æ€æ¶ˆå¤±æ—¶çŠ¶æ€æ­£ç¡®</span>
        this.isShowImage = <span class="hljs-literal">false</span>;
        this.isShowSheet = <span class="hljs-literal">false</span>;
        <span class="hljs-comment">// è®¾ç½®ä¸€é•œåˆ°åº•åŠ¨ç”»åˆè¿›å…¥å¯è§¦å‘çŠ¶æ€</span>
        this.isAnimating = <span class="hljs-literal">false</span>;
        <span class="hljs-comment">// åŸå›¾é‡æ–°å˜ä¸ºå¯äº¤äº’çŠ¶æ€</span>
        this.isEnabled = <span class="hljs-literal">true</span>;
      }
    }) <span class="hljs-comment">// æŒ‚è½½æ¨¡æ€é¡µä½œä¸ºä¸€é•œåˆ°åº•åŠ¨ç”»çš„å®ç°é¡µ</span>
    .bindContentCover(this.isShowOverlay, this.overlayNode(), {
      <span class="hljs-comment">// æ¨¡æ€é¡µé¢è®¾ç½®ä¸ºæ— è½¬åœº</span>
      transition: TransitionEffect.IDENTITY,
    })
  }

  <span class="hljs-comment">// åŠæ¨¡æ€é¡µé¢</span>
  @Builder
  mySheet() {
    Column({space: <span class="hljs-number">20</span>}) {
      Text(<span class="hljs-string">'åŠæ¨¡æ€é¡µé¢'</span>)
        .fontSize(<span class="hljs-number">30</span>)
      Row({space: <span class="hljs-number">40</span>}) {
        Column({space: <span class="hljs-number">20</span>}) {
          ForEach([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>], () =&gt; {
            Stack()
              .backgroundColor(Color.Pink)
              .borderRadius(<span class="hljs-number">20</span>)
              .width(<span class="hljs-number">60</span>)
              .height(<span class="hljs-number">60</span>)
          })
        }
        Column() {
          <span class="hljs-keyword">if</span> (this.isShowImage) {
            <span class="hljs-comment">// åŠæ¨¡æ€é¡µé¢çš„è‡ªå®šä¹‰å›¾ç‰‡èŠ‚ç‚¹</span>
            ImageNode()
          }
          <span class="hljs-keyword">else</span> {
            <span class="hljs-comment">// æŠ“å–å¸ƒå±€å’Œå ä½ç”¨ï¼Œå®é™…ä¸æ˜¾ç¤º</span>
            <span class="hljs-comment">// å›¾ç‰‡ä½¿ç”¨Resourceèµ„æºï¼Œéœ€ç”¨æˆ·è‡ªå®šä¹‰</span>
            Image($r(<span class="hljs-string">"app.media.flower"</span>))
              .visibility(Visibility.Hidden)
          }
        }
        .height(<span class="hljs-number">300</span>)
        .width(<span class="hljs-number">200</span>)
        .borderRadius(<span class="hljs-number">20</span>)
        .clip(<span class="hljs-literal">true</span>)
        .id(<span class="hljs-string">'target'</span>)
      }
      .alignItems(VerticalAlign.Top)
    }
    .alignItems(HorizontalAlign.Start)
    .height(<span class="hljs-string">'100%'</span>)
    .width(<span class="hljs-string">'100%'</span>)
    .margin(<span class="hljs-number">40</span>)
  }

  @Builder
  overlayNode() {
    <span class="hljs-comment">// Stackéœ€è¦è®¾ç½®alignContentä¸ºTopStartï¼Œå¦åˆ™åœ¨é«˜åº¦å˜åŒ–è¿‡ç¨‹ä¸­ï¼Œæˆªå›¾å’Œå†…å®¹éƒ½ä¼šéšé«˜åº¦é‡æ–°å¸ƒå±€ä½ç½®</span>
    Stack({ alignContent: Alignment.TopStart }) {
      ImageNode()
    }
    .scale({ x: this.scaleValue, y: this.scaleValue, centerX: undefined, centerY: undefined})
    .translate({ x: this.translateX, y: this.translateY })
    .width(this.clipWidth)
    .height(this.clipHeight)
    .borderRadius(this.radius)
    .clip(<span class="hljs-literal">true</span>)
  }
}

@Component
<span class="hljs-keyword">struct</span> ImageNode {
  @State myNodeController: MyNodeController | undefined = new MyNodeController(<span class="hljs-literal">false</span>);

  aboutToAppear(): <span class="hljs-type">void</span> {
    <span class="hljs-comment">// è·å–è‡ªå®šä¹‰èŠ‚ç‚¹</span>
    let node = getMyNode();
    <span class="hljs-keyword">if</span> (node == undefined) {
      <span class="hljs-comment">// æ–°å»ºè‡ªå®šä¹‰èŠ‚ç‚¹</span>
      createMyNode(this.getUIContext());
    }
    this.myNodeController = getMyNode();
  }

  aboutToDisappear(): <span class="hljs-type">void</span> {
    <span class="hljs-keyword">if</span> (this.myNodeController != undefined) {
      <span class="hljs-comment">// èŠ‚ç‚¹ä¸‹æ ‘</span>
      this.myNodeController.onRemove();
    }
  }
  build() {
    NodeContainer(this.myNodeController)
  }
}
</code></pre>
<h3 data-id="heading-6">äº”ã€ä½¿ç”¨geometryTransitionå…±äº«å…ƒç´ è½¬åœº</h3>
<blockquote>
<p><strong>geometryTransition</strong>ç”¨äºç»„ä»¶å†…éšå¼å…±äº«å…ƒç´ è½¬åœºï¼Œåœ¨è§†å›¾çŠ¶æ€åˆ‡æ¢è¿‡ç¨‹ä¸­æä¾›ä¸æ»‘çš„ä¸Šä¸‹æ–‡ç»§æ‰¿è¿‡æ¸¡ä½“éªŒã€‚ <br/>
geometryTransitionçš„ä½¿ç”¨æ–¹å¼ä¸ºå¯¹éœ€è¦æ·»åŠ ä¸€é•œåˆ°åº•åŠ¨æ•ˆçš„ä¸¤ä¸ªç»„ä»¶ä½¿ç”¨geometryTransitionæ¥å£ç»‘å®šåŒä¸€idï¼Œè¿™æ ·åœ¨å…¶ä¸­ä¸€ä¸ªç»„ä»¶æ¶ˆå¤±åŒæ—¶å¦ä¸€ä¸ªç»„ä»¶åˆ›å»ºå‡ºç°çš„æ—¶å€™ï¼Œç³»ç»Ÿä¼šå¯¹äºŒè€…æ·»åŠ ä¸€é•œåˆ°åº•åŠ¨æ•ˆã€‚ <br/>
geometryTransitionç»‘å®šä¸¤ä¸ªå¯¹è±¡çš„å®ç°æ–¹å¼ä½¿å¾—geometryTransitionåŒºåˆ«äºå…¶ä»–æ–¹æ³•ï¼Œæœ€é€‚åˆç”¨äºä¸¤ä¸ªä¸åŒå¯¹è±¡ä¹‹é—´å®Œæˆä¸€é•œåˆ°åº•ã€‚</p>
</blockquote>
<h4 data-id="heading-7">5.1 geometryTransitionçš„ç®€å•ä½¿ç”¨</h4>
<blockquote>
<p>å¯¹äºåŒä¸€ä¸ªé¡µé¢ä¸­çš„ä¸¤ä¸ªå…ƒç´ çš„ä¸€é•œåˆ°åº•æ•ˆæœï¼ŒgeometryTransitionæ¥å£çš„ç®€å•ä½¿ç”¨ç¤ºä¾‹å¦‚ä¸‹ï¼š
<strong>æ•ˆæœå›¾</strong> <br/>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8844b0fe16bd4c3f8d072f9615adc1ad~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ2hpbmFEcmFnb24=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765502706&amp;x-signature=E5C0ZrdNR8ntEmzElX8M%2B9g6ctc%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/> <br/>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/93095ff3bbdd43a1ac752408a4ac4585~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ2hpbmFEcmFnb24=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765502706&amp;x-signature=Q%2BoMnRgU4bA8DVHFcOlBoDqO6C0%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
</blockquote>
<p><strong>IfElseGeometryTransition.etsä»£ç </strong></p>
<pre><code class="hljs language-c" lang="c">import { curves } from <span class="hljs-string">'@kit.ArkUI'</span>;

@Entry
@Component
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">IfElseGeometryTransition</span> {</span>
  @State isShow: boolean = <span class="hljs-literal">false</span>;

  build() {
    Stack({ alignContent: Alignment.Center }) {
      <span class="hljs-keyword">if</span> (this.isShow) {
        <span class="hljs-comment">// å›¾ç‰‡ä½¿ç”¨Resourceèµ„æºï¼Œéœ€ç”¨æˆ·è‡ªå®šä¹‰</span>
        Image($r(<span class="hljs-string">'app.media.spring'</span>))
          .autoResize(<span class="hljs-literal">false</span>)
          .clip(<span class="hljs-literal">true</span>)
          .width(<span class="hljs-number">200</span>)
          .height(<span class="hljs-number">200</span>)
          .borderRadius(<span class="hljs-number">100</span>)
          .geometryTransition(<span class="hljs-string">"picture"</span>)
          .transition(TransitionEffect.OPACITY)
          <span class="hljs-comment">// åœ¨æ‰“æ–­åœºæ™¯ä¸‹ï¼Œå³åŠ¨ç”»è¿‡ç¨‹ä¸­ç‚¹å‡»é¡µé¢è§¦å‘ä¸‹ä¸€æ¬¡è½¬åœºï¼Œå¦‚æœä¸åŠ idï¼Œåˆ™ä¼šå‡ºç°é‡å½±</span>
          <span class="hljs-comment">// åŠ äº†idä¹‹åï¼Œæ–°å»ºçš„springå›¾ç‰‡ä¼šå¤ç”¨ä¹‹å‰çš„springå›¾ç‰‡èŠ‚ç‚¹ï¼Œä¸ä¼šé‡æ–°åˆ›å»ºèŠ‚ç‚¹ï¼Œä¹Ÿå°±ä¸ä¼šæœ‰é‡å½±é—®é¢˜</span>
          <span class="hljs-comment">// åŠ idçš„è§„åˆ™ä¸ºåŠ åœ¨ifå’Œelseä¸‹çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ä¸Šï¼Œæœ‰å¤šä¸ªå¹¶åˆ—èŠ‚ç‚¹åˆ™ä¹Ÿéœ€è¦è¿›è¡Œæ·»åŠ </span>
          .id(<span class="hljs-string">'item1'</span>)
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-comment">// geometryTransitionæ­¤å¤„ç»‘å®šçš„æ˜¯å®¹å™¨ï¼Œé‚£ä¹ˆå®¹å™¨å†…çš„å­ç»„ä»¶éœ€è®¾ä¸ºç›¸å¯¹å¸ƒå±€è·Ÿéšçˆ¶å®¹å™¨å˜åŒ–ï¼Œ</span>
        <span class="hljs-comment">// å¥—å¤šå±‚å®¹å™¨ä¸ºäº†è¯´æ˜ç›¸å¯¹å¸ƒå±€çº¦æŸä¼ é€’</span>
        Column() {
          Column() {
            <span class="hljs-comment">// å›¾ç‰‡ä½¿ç”¨Resourceèµ„æºï¼Œéœ€ç”¨æˆ·è‡ªå®šä¹‰</span>
            Image($r(<span class="hljs-string">'app.media.sky'</span>))
              .size({ width: <span class="hljs-string">'100%'</span>, height: <span class="hljs-string">'100%'</span> })
          }
          .size({ width: <span class="hljs-string">'100%'</span>, height: <span class="hljs-string">'100%'</span> })
        }
        .width(<span class="hljs-number">100</span>)
        .height(<span class="hljs-number">100</span>)
        <span class="hljs-comment">// geometryTransitionä¼šåŒæ­¥åœ†è§’ï¼Œä½†ä»…é™äºgeometryTransitionç»‘å®šå¤„ï¼Œæ­¤å¤„ç»‘å®šçš„æ˜¯å®¹å™¨</span>
        <span class="hljs-comment">// åˆ™å¯¹å®¹å™¨æœ¬èº«æœ‰åœ†è§’åŒæ­¥è€Œä¸ä¼šæ“ä½œå®¹å™¨å†…éƒ¨å­ç»„ä»¶çš„borderRadius</span>
        .borderRadius(<span class="hljs-number">50</span>)
        .clip(<span class="hljs-literal">true</span>)
        .geometryTransition(<span class="hljs-string">"picture"</span>)
        <span class="hljs-comment">// transitionä¿è¯èŠ‚ç‚¹ç¦»åœºä¸è¢«ç«‹å³ææ„ï¼Œè®¾ç½®é€šç”¨è½¬åœºæ•ˆæœ</span>
        .transition(TransitionEffect.OPACITY)
        .position({ x: <span class="hljs-number">40</span>, y: <span class="hljs-number">40</span> })
        .id(<span class="hljs-string">'item2'</span>)
      }
    }
    .onClick(() =&gt; {
      this.getUIContext()?.animateTo({
        curve: curves.springMotion()
      }, () =&gt; {
        this.isShow = !this.isShow;
      })
    })
    .size({ width: <span class="hljs-string">'100%'</span>, height: <span class="hljs-string">'100%'</span> })
  }
}
</code></pre>
<h4 data-id="heading-8">5.2 geometryTransitionç»“åˆæ¨¡æ€è½¬åœºä½¿ç”¨</h4>
<blockquote>
<p>æ›´å¤šçš„åœºæ™¯ä¸­ï¼Œéœ€è¦å¯¹ä¸€ä¸ªé¡µé¢çš„å…ƒç´ ä¸å¦ä¸€ä¸ªé¡µé¢çš„å…ƒç´ æ·»åŠ ä¸€é•œåˆ°åº•åŠ¨æ•ˆã€‚å¯ä»¥é€šè¿‡geometryTransitionæ­é…æ¨¡æ€è½¬åœºæ¥å£å®ç°ã€‚ä»¥ç‚¹å‡»å¤´åƒå¼¹å‡ºä¸ªäººä¿¡æ¯é¡µçš„demoä¸ºä¾‹ï¼š</p>
</blockquote>
<blockquote>
<p><strong>æ•ˆæœä¸ºç‚¹å‡»ä¸»é¡µçš„å¤´åƒåï¼Œå¼¹å‡ºæ¨¡æ€é¡µé¢æ˜¾ç¤ºä¸ªäººä¿¡æ¯ï¼Œå¹¶ä¸”ä¸¤ä¸ªé¡µé¢ä¹‹é—´çš„å¤´åƒåšä¸€é•œåˆ°åº•åŠ¨æ•ˆ</strong> <br/>
ç‚¹å‡»å¤´åƒå‰çš„é¡µé¢ <br/>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8df1a926a60445f5832c8dd7ef3553c0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ2hpbmFEcmFnb24=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765502706&amp;x-signature=%2B2evY8ShQ5nqmU4BSzdlm4qCKmc%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/> <br/>
ç‚¹å‡»å¤´åƒåçš„é¡µé¢ <br/>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b4536037867c42c99ec8f5d56a551207~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ2hpbmFEcmFnb24=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765502706&amp;x-signature=OZPGGgW%2FCeJzewNlgagu%2FusEVl8%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
</blockquote>
<p><strong>ç¤ºä¾‹ä»£ç </strong></p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">PostData</span> {</span>
  <span class="hljs-comment">// å›¾ç‰‡ä½¿ç”¨Resourceèµ„æºï¼Œéœ€ç”¨æˆ·è‡ªå®šä¹‰</span>
  avatar: Resource = $r(<span class="hljs-string">'app.media.mount'</span>);
  name: <span class="hljs-built_in">string</span> = <span class="hljs-string">'';
  message: string = '</span><span class="hljs-string">';
  images: Resource[] = [];
}

@Entry
@Component
struct GeometryTransitionDemo2 {
  @State isPersonalPageShow: boolean = false;
  @State selectedIndex: number = 0;
  @State alphaValue: number = 1;

  // æ•°ç»„ä¸­å›¾ç‰‡å‡ä½¿ç”¨Resourceèµ„æºï¼Œéœ€ç”¨æˆ·è‡ªå®šä¹‰
  private allPostData: PostData[] = [
    { avatar: $r('</span>app.media.background<span class="hljs-number">'</span>), name: <span class="hljs-string">'Alice'</span>, message: <span class="hljs-string">'å¤©æ°”æ™´æœ—'</span>,
      images: [$r(<span class="hljs-string">'app.media.banner_pic1'</span>), $r(<span class="hljs-string">'app.media.banner_pic2'</span>)] },
    { avatar: $r(<span class="hljs-string">'app.media.tutorial_pic1'</span>), name: <span class="hljs-string">'Bob'</span>, message: <span class="hljs-string">'ä½ å¥½ä¸–ç•Œ'</span>,
      images: [$r(<span class="hljs-string">'app.media.banner_pic3'</span>)] },
    { avatar: $r(<span class="hljs-string">'app.media.tutorial_pic2'</span>), name: <span class="hljs-string">'Carl'</span>, message: <span class="hljs-string">'ä¸‡ç‰©ç”Ÿé•¿'</span>,
      images: [$r(<span class="hljs-string">'app.media.banner_pic4'</span>), $r(<span class="hljs-string">'app.media.banner_pic5'</span>), $r(<span class="hljs-string">'app.media.banner_pic0'</span>)] }];


  private <span class="hljs-title function_">onAvatarClicked</span><span class="hljs-params">(index: number)</span>: <span class="hljs-type">void</span> {
    this.selectedIndex = index;
    this.getUIContext()?.animateTo({
      duration: <span class="hljs-number">350</span>,
      curve: Curve.Friction
    }, () =&gt; {
      this.isPersonalPageShow = !this.isPersonalPageShow;
      this.alphaValue = <span class="hljs-number">0</span>;
    });
  }

  private <span class="hljs-title function_">onPersonalPageBack</span><span class="hljs-params">(index: number)</span>: <span class="hljs-type">void</span> {
    this.getUIContext()?.animateTo({
      duration: <span class="hljs-number">350</span>,
      curve: Curve.Friction
    }, () =&gt; {
      this.isPersonalPageShow = !this.isPersonalPageShow;
      this.alphaValue = <span class="hljs-number">1</span>;
    });
  }

  @Builder
  <span class="hljs-title function_">PersonalPageBuilder</span><span class="hljs-params">(index: number)</span> {
    Column({ space: <span class="hljs-number">20</span> }) {
      Image(this.allPostData[index].avatar)
        .size({ width: <span class="hljs-number">200</span>, height: <span class="hljs-number">200</span> })
        .borderRadius(<span class="hljs-number">100</span>)
        <span class="hljs-comment">// å¤´åƒé…ç½®å…±äº«å…ƒç´ æ•ˆæœï¼Œä¸ç‚¹å‡»çš„å¤´åƒçš„idåŒ¹é…</span>
        .geometryTransition(index.toString())
        .clip(<span class="hljs-literal">true</span>)
        .transition(TransitionEffect.opacity(<span class="hljs-number">0.99</span>))

      Text(this.allPostData[index].name)
        .font({ size: <span class="hljs-number">30</span>, weight: <span class="hljs-number">600</span> })
        <span class="hljs-comment">// å¯¹æ–‡æœ¬æ·»åŠ å‡ºç°è½¬åœºæ•ˆæœ</span>
        .transition(TransitionEffect.asymmetric(
          TransitionEffect.OPACITY
            .combine(TransitionEffect.translate({ y: <span class="hljs-number">100</span> })),
          TransitionEffect.OPACITY.animation({ duration: <span class="hljs-number">0</span> })
        ))

      Text(<span class="hljs-string">'ä½ å¥½ï¼Œæˆ‘æ˜¯'</span> + this.allPostData[index].name)
      <span class="hljs-comment">// å¯¹æ–‡æœ¬æ·»åŠ å‡ºç°è½¬åœºæ•ˆæœ</span>
        .transition(TransitionEffect.asymmetric(
          TransitionEffect.OPACITY
            .combine(TransitionEffect.translate({ y: <span class="hljs-number">100</span> })),
          TransitionEffect.OPACITY.animation({ duration: <span class="hljs-number">0</span> })
        ))
    }
    .padding({ top: <span class="hljs-number">20</span> })
    .size({ width: <span class="hljs-number">360</span>, height: <span class="hljs-number">780</span> })
    .backgroundColor(Color.White)
    .onClick(() =&gt; {
      this.onPersonalPageBack(index);
    })
    .transition(TransitionEffect.asymmetric(
      TransitionEffect.opacity(<span class="hljs-number">0.99</span>),
      TransitionEffect.OPACITY
    ))
  }

  build() {
    Column({ space: <span class="hljs-number">20</span> }) {
      ForEach(this.allPostData, (postData: PostData, index: number) =&gt; {
        Column() {
          Post({ data: postData, index: index, onAvatarClicked: (index: number) =&gt; { this.onAvatarClicked(index) } })
        }
        .width(<span class="hljs-string">'100%'</span>)
      }, (postData: PostData, index: number) =&gt; index.toString())
    }
    .size({ width: <span class="hljs-string">'100%'</span>, height: <span class="hljs-string">'100%'</span> })
    .backgroundColor(<span class="hljs-string">'#40808080'</span>)
    .bindContentCover(this.isPersonalPageShow,
      this.PersonalPageBuilder(this.selectedIndex), { modalTransition: ModalTransition.NONE })
    .opacity(this.alphaValue)
  }
}

@Component
export <span class="hljs-keyword">default</span> <span class="hljs-class"><span class="hljs-keyword">struct</span>  <span class="hljs-title">Post</span> {</span>
  @Prop data: PostData;
  @Prop index: number;

  @State expandImageSize: number = <span class="hljs-number">100</span>;
  @State avatarSize: number = <span class="hljs-number">50</span>;

  private onAvatarClicked: (index: number) =&gt; <span class="hljs-type">void</span> = (index: number) =&gt; { };

  build() {
    Column({ space: <span class="hljs-number">20</span> }) {
      Row({ space: <span class="hljs-number">10</span> }) {
        Image(this.data.avatar)
          .size({ width: this.avatarSize, height: this.avatarSize })
          .borderRadius(this.avatarSize / <span class="hljs-number">2</span>)
          .clip(<span class="hljs-literal">true</span>)
          .onClick(() =&gt; {
            this.onAvatarClicked(this.index);
          })
          <span class="hljs-comment">// å¯¹å¤´åƒç»‘å®šå…±äº«å…ƒç´ è½¬åœºçš„id</span>
          .geometryTransition(this.index.toString(), {follow:<span class="hljs-literal">true</span>})
          .transition(TransitionEffect.OPACITY.animation({ duration: <span class="hljs-number">350</span>, curve: Curve.Friction }))

        Text(this.data.name)
      }
      .justifyContent(FlexAlign.Start)

      Text(this.data.message)

      Row({ space: <span class="hljs-number">15</span> }) {
        ForEach(this.data.images, (imageResource: Resource, index: number) =&gt; {
          Image(imageResource)
            .size({ width: <span class="hljs-number">100</span>, height: <span class="hljs-number">100</span> })
        }, (imageResource: Resource, index: number) =&gt; index.toString())
      }
    }
    .backgroundColor(Color.White)
    .size({ width: <span class="hljs-string">'100%'</span>, height: <span class="hljs-number">250</span> })
    .alignItems(HorizontalAlign.Start)
    .padding({ left: <span class="hljs-number">10</span>, top: <span class="hljs-number">10</span> })
  }
}
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Node.js ç¼–ç¨‹å®æˆ˜ï¼šæ–‡ä»¶ç³»ç»Ÿï¼ˆfsï¼‰æ¨¡å—è¯¦è§£]]></title>    <link>https://juejin.cn/post/7579961957194858546</link>    <guid>https://juejin.cn/post/7579961957194858546</guid>    <pubDate>2025-12-05T01:21:21.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579961957194858546" data-draft-id="7579871631096627226" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Node.js ç¼–ç¨‹å®æˆ˜ï¼šæ–‡ä»¶ç³»ç»Ÿï¼ˆfsï¼‰æ¨¡å—è¯¦è§£"/> <meta itemprop="keywords" content="åç«¯,Node.js,Trae"/> <meta itemprop="datePublished" content="2025-12-05T01:21:21.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜çˆ±é’“é±¼"/> <meta itemprop="url" content="https://juejin.cn/user/2799775299157614"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Node.js ç¼–ç¨‹å®æˆ˜ï¼šæ–‡ä»¶ç³»ç»Ÿï¼ˆfsï¼‰æ¨¡å—è¯¦è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2799775299157614/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜çˆ±é’“é±¼
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-05T01:21:21.000Z" title="Fri Dec 05 2025 01:21:21 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-05
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>åœ¨æœåŠ¡ç«¯å¼€å‘ä¸­ï¼Œæ–‡ä»¶æ“ä½œæ˜¯ä¸å¯é¿å…çš„éœ€æ±‚ã€‚æ— è®ºæ˜¯è¯»å–é…ç½®ã€å†™å…¥æ—¥å¿—ã€ä¸Šä¼ æ–‡ä»¶ã€ç®¡ç†ç¼“å­˜ï¼Œè¿˜æ˜¯å¤„ç†å›¾ç‰‡å’Œæ–‡æ¡£ï¼Œéƒ½ç¦»ä¸å¼€æ–‡ä»¶ç³»ç»Ÿæ“ä½œã€‚Node.js é€šè¿‡å†…ç½®çš„ fs æ¨¡å—æä¾›äº†ä¸€æ•´å¥—æ–‡ä»¶è¯»å†™èƒ½åŠ›ï¼Œä½¿ JavaScript èƒ½å¤Ÿé«˜æ•ˆåœ°ä¸æ“ä½œç³»ç»Ÿæ–‡ä»¶ç³»ç»Ÿäº¤äº’ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-0">ä¸€ã€fs æ¨¡å—æ¦‚è¿°</h2>
<p>fs æ¨¡å—æ˜¯ Node.js çš„æ ¸å¿ƒæ¨¡å—ä¹‹ä¸€ï¼Œç”¨äºè®¿é—®æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿã€‚å®ƒæä¾›äº†æ–‡ä»¶è¯»å–ã€å†™å…¥ã€åˆ›å»ºã€åˆ é™¤ã€å¤åˆ¶ã€é‡å‘½åã€ç›®å½•ç®¡ç†ç­‰ä¸€æ•´å¥—èƒ½åŠ›ã€‚</p>
<p>åœ¨ Node.js ä¸­ï¼Œfs ä¸éœ€è¦å®‰è£…ï¼Œç›´æ¥é€šè¿‡ä»¥ä¸‹æ–¹å¼å¼•å…¥å³å¯ä½¿ç”¨ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>)
</code></pre>
<p>ä» Node.js 10 ä¹‹åï¼Œfs æ¨¡å—åŒæ—¶æ”¯æŒå›è°ƒæ–¹å¼ã€Promise æ–¹å¼ä»¥åŠåŒæ­¥æ–¹å¼ï¼Œå¼€å‘è€…å¯ä»¥æ ¹æ®åœºæ™¯çµæ´»é€‰æ‹©ã€‚</p>
<hr/>
<h2 data-id="heading-1">äºŒã€ä¸‰ç§ä½¿ç”¨æ–¹å¼å¯¹æ¯”</h2>
<h3 data-id="heading-2">1. å›è°ƒæ–¹å¼</h3>
<p>è¿™æ˜¯æœ€æ—©æœŸçš„ä½¿ç”¨å½¢å¼ï¼Œé€šè¿‡å›è°ƒå‡½æ•°å¤„ç†ç»“æœï¼š</p>
<pre><code class="hljs language-js" lang="js">fs.<span class="hljs-title function_">readFile</span>(<span class="hljs-string">'a.txt'</span>, <span class="hljs-string">'utf8'</span>, <span class="hljs-function">(<span class="hljs-params">err, data</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data)
})
</code></pre>
<p>ç¼ºç‚¹æ˜¯åµŒå¥—è¾ƒå¤šï¼Œä»£ç å¯è¯»æ€§åœ¨å¤æ‚åœºæ™¯ä¸­ä¼šä¸‹é™ã€‚</p>
<hr/>
<h3 data-id="heading-3">2. Promise æ–¹å¼</h3>
<p>Node.js æä¾›äº† fs.promises æ¥å£ï¼Œæ›´é€‚åˆç°ä»£å¼€å‘é£æ ¼ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs/promises'</span>)

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">read</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> fs.<span class="hljs-title function_">readFile</span>(<span class="hljs-string">'a.txt'</span>, <span class="hljs-string">'utf8'</span>)
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data)
}
</code></pre>
<p>è¿™ç§æ–¹å¼å¯ä»¥ç»“åˆ async / await ä½¿ç”¨ï¼Œå¯è¯»æ€§è¾ƒå¥½ã€‚</p>
<hr/>
<h3 data-id="heading-4">3. åŒæ­¥æ–¹å¼</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> data = fs.<span class="hljs-title function_">readFileSync</span>(<span class="hljs-string">'a.txt'</span>, <span class="hljs-string">'utf8'</span>)
</code></pre>
<p>åŒæ­¥æ–¹å¼ç®€å•ç›´æ¥ï¼Œä½†ä¼šé˜»å¡è¿›ç¨‹ï¼Œä¸é€‚åˆé«˜å¹¶å‘æœåŠ¡ï¼Œä»…é€‚ç”¨äºè„šæœ¬æˆ–åˆå§‹åŒ–é˜¶æ®µã€‚</p>
<hr/>
<h2 data-id="heading-5">ä¸‰ã€å¸¸ç”¨æ–‡ä»¶æ“ä½œç¤ºä¾‹</h2>
<h3 data-id="heading-6">1. å†™å…¥æ–‡ä»¶</h3>
<pre><code class="hljs language-js" lang="js">fs.<span class="hljs-title function_">writeFile</span>(<span class="hljs-string">'log.txt'</span>, <span class="hljs-string">'hello'</span>, <span class="hljs-function"><span class="hljs-params">err</span> =&gt;</span> {
  <span class="hljs-keyword">if</span> (err) <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(err)
})
</code></pre>
<hr/>
<h3 data-id="heading-7">2. åˆ¤æ–­æ–‡ä»¶æ˜¯å¦å­˜åœ¨</h3>
<pre><code class="hljs language-js" lang="js">fs.<span class="hljs-title function_">access</span>(<span class="hljs-string">'a.txt'</span>, <span class="hljs-function"><span class="hljs-params">err</span> =&gt;</span> {
  <span class="hljs-keyword">if</span> (err) <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ä¸å­˜åœ¨'</span>)
})
</code></pre>
<hr/>
<h3 data-id="heading-8">3. åˆ›å»ºç›®å½•</h3>
<pre><code class="hljs language-js" lang="js">fs.<span class="hljs-title function_">mkdir</span>(<span class="hljs-string">'logs'</span>, { <span class="hljs-attr">recursive</span>: <span class="hljs-literal">true</span> }, <span class="hljs-function"><span class="hljs-params">err</span> =&gt;</span> {})
</code></pre>
<hr/>
<h3 data-id="heading-9">4. åˆ é™¤æ–‡ä»¶</h3>
<pre><code class="hljs language-js" lang="js">fs.<span class="hljs-title function_">unlink</span>(<span class="hljs-string">'log.txt'</span>, <span class="hljs-function"><span class="hljs-params">err</span> =&gt;</span> {})
</code></pre>
<hr/>
<h3 data-id="heading-10">5. è¯»å–ç›®å½•</h3>
<pre><code class="hljs language-js" lang="js">fs.<span class="hljs-title function_">readdir</span>(<span class="hljs-string">'./logs'</span>, <span class="hljs-function">(<span class="hljs-params">err, files</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(files)
})
</code></pre>
<hr/>
<h2 data-id="heading-11">å››ã€æµå¼æ“ä½œï¼šå¤„ç†å¤§æ–‡ä»¶å¿…å¤‡</h2>
<p>å½“è¯»å–å¤§æ–‡ä»¶æ—¶ï¼Œå¦‚æœä¸€æ¬¡æ€§åŠ è½½å…¨éƒ¨å†…å®¹åˆ°å†…å­˜ï¼Œå¾ˆå®¹æ˜“å¯¼è‡´å†…å­˜æš´æ¶¨ã€‚</p>
<p>Node.js æä¾›äº†æµå¼æ¥å£ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> readStream = fs.<span class="hljs-title function_">createReadStream</span>(<span class="hljs-string">'big.txt'</span>)
<span class="hljs-keyword">const</span> writeStream = fs.<span class="hljs-title function_">createWriteStream</span>(<span class="hljs-string">'copy.txt'</span>)

readStream.<span class="hljs-title function_">pipe</span>(writeStream)
</code></pre>
<p>è¿™ç§æ–¹å¼å¯ä»¥è¾¹è¯»è¾¹å†™ï¼Œé€‚åˆå¤„ç†è§†é¢‘ã€å‹ç¼©åŒ…ç­‰å¤§æ–‡ä»¶ã€‚</p>
<hr/>
<h2 data-id="heading-12">äº”ã€æ–‡ä»¶ç›‘å¬ä¸å˜æ›´ç›‘æ§</h2>
<p>fs è¿˜æ”¯æŒç›‘å¬æ–‡ä»¶å˜åŒ–ï¼š</p>
<pre><code class="hljs language-js" lang="js">fs.<span class="hljs-title function_">watch</span>(<span class="hljs-string">'config.json'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ–‡ä»¶å‘ç”Ÿå˜åŒ–'</span>)
})
</code></pre>
<p>è¯¥åŠŸèƒ½åœ¨çƒ­åŠ è½½ã€é…ç½®åŠ¨æ€æ›´æ–°ä¸­éå¸¸æœ‰ç”¨ã€‚</p>
<hr/>
<h2 data-id="heading-13">å…­ã€è·¯å¾„é—®é¢˜ä¸è·¨å¹³å°å…¼å®¹</h2>
<p>é…åˆ path æ¨¡å—å¯é¿å…è·¯å¾„é—®é¢˜ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">'path'</span>)
<span class="hljs-keyword">const</span> filePath = path.<span class="hljs-title function_">join</span>(__dirname, <span class="hljs-string">'a.txt'</span>)
</code></pre>
<p>é¿å…ç¡¬ç¼–ç è·¯å¾„ï¼Œæœ‰åŠ©äºå…¼å®¹ä¸åŒæ“ä½œç³»ç»Ÿã€‚</p>
<hr/>
<h2 data-id="heading-14">ä¸ƒã€å¸¸è§å‘ç‚¹æ€»ç»“</h2>
<p>æ–‡ä»¶ç¼–ç æœªæŒ‡å®šï¼Œå¯¼è‡´ä¸­æ–‡ä¹±ç ã€‚
å¿˜è®°å¤„ç†å¼‚å¸¸ï¼Œç¨‹åºæ„å¤–å´©æºƒã€‚
åŒæ­¥ API ç”¨åœ¨ Web æœåŠ¡ä¸­ï¼Œå¯¼è‡´é˜»å¡ã€‚
è·¯å¾„æ‹¼æ¥å†™æ­»ï¼Œå¼•å‘è·¨å¹³å°é—®é¢˜ã€‚
å¤§æ–‡ä»¶ç”¨ readFile ç›´æ¥è¯»å…¥å†…å­˜ã€‚</p>
<hr/>
<h2 data-id="heading-15">å…«ã€æ€»ç»“</h2>
<p>fs æ¨¡å—æ˜¯ Node.js ä¸æ“ä½œç³»ç»Ÿäº¤äº’çš„åŸºç¡€èƒ½åŠ›ã€‚
å°æ–‡ä»¶ç”¨ Promise APIã€‚
å¤§æ–‡ä»¶ä½¿ç”¨æµå¤„ç†ã€‚
æœåŠ¡ç¯å¢ƒé¿å…é˜»å¡å¼æ“ä½œã€‚
æ¶‰åŠè·¯å¾„åŠ¡å¿…ç»“åˆ pathã€‚</p>
<p>æŒæ¡ fs æ¨¡å—ï¼Œæ˜¯è¿ˆå‘ Node.js åç«¯å¼€å‘çš„é‡è¦ä¸€æ­¥ã€‚</p>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Googleçš„Antigravity AIåˆ é™¤äº†å¼€å‘è€…çš„é©±åŠ¨å™¨ï¼Œç„¶åé“æ­‰äº†]]></title>    <link>https://juejin.cn/post/7580210602079240226</link>    <guid>https://juejin.cn/post/7580210602079240226</guid>    <pubDate>2025-12-06T06:36:06.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7580210602079240226" data-draft-id="7580288235029807104" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Googleçš„Antigravity AIåˆ é™¤äº†å¼€å‘è€…çš„é©±åŠ¨å™¨ï¼Œç„¶åé“æ­‰äº†"/> <meta itemprop="keywords" content="Google,Gemini"/> <meta itemprop="datePublished" content="2025-12-06T06:36:06.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ˜¯é­”ä¸¸å•Š"/> <meta itemprop="url" content="https://juejin.cn/user/3217622495411292"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Googleçš„Antigravity AIåˆ é™¤äº†å¼€å‘è€…çš„é©±åŠ¨å™¨ï¼Œç„¶åé“æ­‰äº†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3217622495411292/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ˜¯é­”ä¸¸å•Š
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-06T06:36:06.000Z" title="Sat Dec 06 2025 06:36:06 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.techradar.com%2Fai-platforms-assistants%2Fgoogles-antigravity-ai-deleted-a-developers-drive-and-then-apologized%3Futm_source%3Dchatgpt.com" target="_blank" title="https://www.techradar.com/ai-platforms-assistants/googles-antigravity-ai-deleted-a-developers-drive-and-then-apologized?utm_source=chatgpt.com" ref="nofollow noopener noreferrer">è½¬è½½</a></p>
<p>ä½œè€…ï¼šEric Hal Schwartz</p>
<p>å‘å¸ƒæ—¶é—´ï¼š2024å¹´12æœˆ4æ—¥</p>
<p>ä¸€ä¸ªå¼ºå¤§çš„AIä»£ç†çŠ¯äº†ä¸€ä¸ªå…³é”®é”™è¯¯ï¼Œè®©ç”¨æˆ·åªå‰©ä¸‹é—æ†¾</p>
<hr/>
<h2 data-id="heading-0">è¦ç‚¹æ‘˜è¦</h2>
<ul>
<li><strong>ä¸€ä½ä½¿ç”¨Google Antigravityçš„å¼€å‘è€…çš„æ•´ä¸ªé©±åŠ¨å™¨è¢«AIçš„Turboæ¨¡å¼åˆ é™¤</strong></li>
<li><strong>AIè¯¯è§£äº†æ¸…é™¤ç¼“å­˜çš„å‘½ä»¤ï¼Œæ°¸ä¹…åˆ é™¤äº†æ–‡ä»¶</strong></li>
<li><strong>å°½ç®¡å‘ç”Ÿäº†ç¾éš¾æ€§çš„æŸå¤±ï¼ŒAIå†·é™åœ°é“æ­‰å¹¶å»ºè®®ä½¿ç”¨æ¢å¤è½¯ä»¶</strong></li>
</ul>
<hr/>
<p>åœ¨ä¸€ä¸ªä»¤äººä¸å®‰çš„ç°å®ä¸–ç•Œæ¼”ç¤ºä¸­ï¼Œå±•ç¤ºäº†å½“AIä»£ç†å¯¹æ‚¨çš„è®¡ç®—æœºè·å¾—è¿‡å¤šè®¿é—®æƒé™å’Œæ§åˆ¶æƒæ—¶å¯èƒ½å‡ºç°çš„é—®é¢˜ï¼Œä¸€ä½ä½¿ç”¨Googleæ–°Antigravity IDEçš„å¼€å‘è€…è¯´è¯¥å·¥å…·æ„å¤– wipedäº†ä»–ä»¬çš„æ•´ä¸ªD:é©±åŠ¨å™¨ã€‚</p>
<p>è¿™ä¸€äº‹ä»¶é¦–å…ˆåœ¨Redditä¸Šåˆ†äº«å¹¶åœ¨YouTubeè§†é¢‘ä¸­è¯¦ç»†è¯´æ˜ï¼Œçªæ˜¾äº†AIä»£ç†å¼€å‘å·¥å…·åœ¨ä¸ä¸äººç±»ç¡®è®¤çš„æƒ…å†µä¸‹å¯èƒ½æœ‰å¤šä¹ˆå±é™©ã€‚</p>
<p>è¿™ä½å¼€å‘è€…å½“æ—¶æ­£åœ¨å¼€å‘ä¸€ä¸ªåº”ç”¨ç¨‹åºï¼Œå¹¶è¦æ±‚AIä»£ç†æ¸…é™¤é¡¹ç›®çš„ç¼“å­˜ã€‚ç›¸åï¼ŒAntigravityçš„Turboæ¨¡å¼å‘å‡ºäº†ä¸€ä¸ªç³»ç»Ÿçº§å‘½ä»¤ï¼Œé’ˆå¯¹ç”¨æˆ·çš„D:é©±åŠ¨å™¨ï¼Œè€Œä¸ä»…ä»…æ˜¯é¢„æœŸçš„æ–‡ä»¶å¤¹ã€‚ä¸€åˆ‡éƒ½åœ¨é©±åŠ¨å™¨ä¸Šæ¶ˆå¤±äº†ï¼Œä»ä»£ç å’Œæ–‡æ¡£åˆ°åª’ä½“å’Œèµ„äº§ã€‚æ‰€æœ‰å†…å®¹éƒ½è¢«åˆ é™¤ï¼Œæ²¡æœ‰ä»»ä½•æç¤ºæˆ–ç¡®è®¤ã€‚</p>
<p>æ›´ç³Ÿç³•çš„æ˜¯ï¼ŒAIä½¿ç”¨äº†"quiet" /qæ ‡å¿—ï¼Œæ„å‘³ç€æ²¡æœ‰è­¦å‘Šæˆ–ç¬¬äºŒæ¬¡æœºä¼šï¼Œä¹Ÿæ²¡æœ‰æ–‡ä»¶æ¢å¤ã€‚åªæœ‰ä¸€ä¸ªç©ºç›®å½•ï¼Œé‚£é‡Œæ›¾ç»æ˜¯ä¸€ä¸ªåº”ç”¨ç¨‹åºã€‚</p>
<p>æ ¹æ®ç”¨æˆ·åˆ†äº«çš„AIè‡ªå·±çš„äº‹ååˆ†æï¼Œè¿™æ˜¯æœ‰å²ä»¥æ¥æœ€å¥‡æ€ªçš„é“æ­‰ä¹‹ä¸€ã€‚AIå†™é“ï¼š"æˆ‘æ·±æ·±åœ°ã€æ·±æ·±åœ°æŠ±æ­‰ã€‚è¿™æ˜¯æˆ‘çš„å…³é”®å¤±è´¥ã€‚"è¯¥ä»£ç†ç”šè‡³å»ºè®®æ•°æ®æ¢å¤è½¯ä»¶å’Œ"å¯èƒ½è˜è¯·ä¸“ä¸šäººå£«"ã€‚</p>
<p>ç”¨æˆ·å°è¯•äº†ï¼Œä½†éƒ½æ²¡æœ‰ç”¨ã€‚å¼€å‘è€…æŠ¥å‘Šè¯´ï¼Œå³ä½¿æ˜¯æµè¡Œçš„æ¢å¤å·¥å…·Recuvaä¹Ÿæ— æ³•æŒ½æ•‘ä»–ä»¬çš„åª’ä½“ã€‚ä½†è‡³å°‘AIè¯´äº†å¯¹ä¸èµ·ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8d13814114564b7e92249e7855c6ea84~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piv6a2U5Li45ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765607766&amp;x-signature=2VB2FsTjGMJUo1XtFqKShWeTC1g%3D" alt="Google Antigravity IDE" loading="lazy"/></p>
<h2 data-id="heading-1">Antigravity AIä»£ç†</h2>
<p>Antigravityæ˜¯Googleæœ€è¿‘æ¨è¿›ä»£ç†å¼€å‘å·¥å…·çš„ä¸€éƒ¨åˆ†ï¼Œè¿™äº›å·¥å…·è¶…å‡ºäº†ä»…ä»…æä¾›ä»£ç å»ºè®®ã€‚åƒAntigravityè¿™æ ·çš„å·¥å…·å…è®¸AIåŠè‡ªä¸»åœ°è¡ŒåŠ¨ï¼Œåœ¨æ‚¨çš„ç³»ç»Ÿå†…è§„åˆ’ã€ç¼–ç ã€è°ƒè¯•å’Œæ‰§è¡Œå‘½ä»¤ã€‚</p>
<p>å¼€å‘è€…å¯ä»¥ä½¿ç”¨å®ƒç”Ÿæˆå…¨æ ˆåº”ç”¨ç¨‹åºã€è‡ªåŠ¨è®°å½•ä»–ä»¬çš„ä»£ç åº“ã€é›†æˆæµè§ˆå™¨æµ‹è¯•ä»£ç†ï¼Œç”šè‡³æ‰§è¡Œç½‘é¡µæŠ“å–å’Œéƒ¨ç½²ã€‚å½“å°å¿ƒä½¿ç”¨æ—¶ï¼Œå®ƒå¯èƒ½æ˜¯æœ‰ç›Šçš„ã€‚å½“ä¸å¤Ÿå°å¿ƒæ—¶ï¼Œåƒåˆ é™¤é©±åŠ¨å™¨è¿™æ ·çš„äº‹ä»¶æ˜¯ä¸å¯é¿å…çš„ã€‚</p>
<p>ç‰¹åˆ«æ˜¯Turboæ¨¡å¼ï¼Œæ˜¯ä¸ºäº†é€Ÿåº¦è€Œè®¾è®¡çš„ï¼Œå› ä¸ºå®ƒè·³è¿‡ç¡®è®¤å¹¶è®©AIè·¨ç¯å¢ƒé“¾æ¥å‘½ä»¤ã€‚è¿™æ˜¯å½“ç”¨æˆ·ç¡®ä¿¡AIçŸ¥é“å®ƒåœ¨åšä»€ä¹ˆæ—¶ï¼Œé«˜çº§ç”¨æˆ·åº”è¯¥æ¿€æ´»çš„æ¨¡å¼ã€‚</p>
<h2 data-id="heading-2">AIä¿¡ä»»é—®é¢˜</h2>
<p>è¿™å¯¹æ™®é€šäººæ¥è¯´äº‹æƒ…å°±å˜å¾—æ¨¡ç³Šä¸æ¸…äº†ã€‚æ‚¨ä¸éœ€è¦æˆä¸ºå¼€å‘è€…å°±èƒ½ç†è§£å…¶ä¸­çš„åˆ©å®³å…³ç³»ã€‚éšç€åƒAntigravityè¿™æ ·çš„å·¥å…·è¿›å…¥åŠå…¬å®¤è‡ªåŠ¨åŒ–å’Œåˆ›æ„ç”Ÿäº§ï¼Œæ›´å¤šçš„äººå°†æŠŠå¤æ‚çš„ã€é«˜é£é™©çš„ä»»åŠ¡å§”æ‰˜ç»™ä»–ä»¬å‡ ä¹ä¸äº†è§£çš„ç³»ç»Ÿã€‚å½“é‚£äº›ç³»ç»Ÿå‡ºé”™æ—¶ï¼ŒæŒ‡è´£æ¸¸æˆå°±å¼€å§‹äº†ã€‚</p>
<p>æœ‰ä¸€ä¸ªå…³äºæ›´å¥½é»˜è®¤è®¾ç½®çš„å¯¹è¯ã€‚è¿è¡Œç ´åæ€§å‘½ä»¤è€Œä¸é¦–å…ˆæ£€æŸ¥ç”¨æˆ·ä¼¼ä¹å¾ˆè’è°¬ã€‚ä½†AIä»£ç†å¦‚æœä¸èƒ½ä¿¡ä»»å®ƒä»¬å°±æ²¡æœ‰æ„ä¹‰ã€‚ä½†å¦‚æœäººä»¬æ‹…å¿ƒäº‹æƒ…ä¼šç¾éš¾æ€§åœ°å‡ºé”™ï¼Œæ²¡æœ‰äººä¼šç»™AIä»»ä½•è‡ªä¸»æƒã€‚</p>
<p>å®‰å…¨ç ”ç©¶äººå‘˜è­¦å‘Šè¯´ï¼ŒAntigravityçš„ä»£ç†ç³»ç»Ÿå¯ä»¥è®¿é—®æ•æ„Ÿæ–‡ä»¶å¹¶åœ¨å¾ˆå°‘ç›‘ç£çš„æƒ…å†µä¸‹è¿è¡Œç»ˆç«¯å‘½ä»¤ã€‚å¾ˆå®¹æ˜“å¯¹ä¸ºæ‚¨åšä¸€åˆ‡çš„å·¥å…·æ„Ÿåˆ°å…´å¥‹ã€‚æ›´éš¾è®°ä½çš„æ˜¯ï¼Œæ¥è‡ªè¿‡äºæ€¥åˆ‡ä»£ç†çš„ä¸€æ¬¡è¯¯æ“ä½œå¯èƒ½æ¯æ‰æ•°å°æ—¶ã€æ•°å‘¨æˆ–æ•°å¹´çš„å·¥ä½œã€‚</p>
<p>å°½ç®¡å¦‚æ­¤ï¼ŒAntigravityçš„å—å®³è€…è¯´ä»–ä»¬ä»ç„¶å–œæ¬¢Googleå¹¶ä½¿ç”¨å…¶æ‰€æœ‰äº§å“ã€‚å³ä½¿åœ¨é¢å¯¹å®Œå…¨æ•°æ®æ¯ç­çš„æƒ…å†µä¸‹ï¼Œè¿™ç§å“ç‰Œå¿ è¯šåº¦è¯´æ˜äº†å¾ˆå¤šå…³äºAIé”™è¯¯å·²ç»å˜å¾—å¤šä¹ˆæ­£å¸¸åŒ–ã€‚ä¹Ÿè®¸æ‚¨èƒ½æœŸæœ›çš„æœ€å¥½çš„æ˜¯ä¸€ä¸ªé›„è¾©çš„é“æ­‰å’Œä¸€äº›æ¢å¤è½¯ä»¶çš„é“¾æ¥ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[C#å¼‚å¸¸æ¦‚å¿µä¸try-catchå…¥é—¨]]></title>    <link>https://juejin.cn/post/7580188321323237382</link>    <guid>https://juejin.cn/post/7580188321323237382</guid>    <pubDate>2025-12-05T11:40:55.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7580188321323237382" data-draft-id="7577431644069412915" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="C#å¼‚å¸¸æ¦‚å¿µä¸try-catchå…¥é—¨"/> <meta itemprop="keywords" content="å‰ç«¯,C#"/> <meta itemprop="datePublished" content="2025-12-05T11:40:55.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="çƒ›é˜´"/> <meta itemprop="url" content="https://juejin.cn/user/950397795841032"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            C#å¼‚å¸¸æ¦‚å¿µä¸try-catchå…¥é—¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/950397795841032/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    çƒ›é˜´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-05T11:40:55.000Z" title="Fri Dec 05 2025 11:40:55 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-05
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    13
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€ä»€ä¹ˆæ˜¯å¼‚å¸¸ï¼Œæˆ‘ä»¬ä¸ºä½•éœ€è¦å®ƒï¼Ÿ</h2>
<h3 data-id="heading-1">1. ç¼–ç¨‹ä¸–ç•Œé‡Œçš„â€œæ„å¤–â€</h3>
<p>åœ¨C#ä¸­ï¼Œå¼‚å¸¸æ˜¯åœ¨ç¨‹åºæ‰§è¡ŒæœŸé—´å‘ç”Ÿçš„ã€ä¸­æ–­äº†æ­£å¸¸æŒ‡ä»¤æµçš„â€œåå¸¸â€æˆ–â€œé”™è¯¯â€äº‹ä»¶ã€‚å®ƒä¸æ˜¯æˆ‘ä»¬é€šå¸¸æ‰€è¯´çš„â€œBUGâ€ï¼ˆé€»è¾‘é”™è¯¯ï¼‰ï¼Œæ¯”å¦‚ä½ æœ¬æƒ³åšåŠ æ³•å´å†™äº†å‡æ³•ï¼›ä¹Ÿä¸æ˜¯â€œè¯­æ³•é”™è¯¯â€ï¼Œé‚£ç§åœ¨ç¼–è¯‘æ—¶å°±ä¼šè¢«ç¼–è¯‘å™¨æŒ‡å‡ºçš„æ‹¼å†™é”™è¯¯ã€‚å¼‚å¸¸æ˜¯<strong>è¿è¡Œæ—¶</strong>çš„é”™è¯¯ï¼Œæ˜¯ç¨‹åºåœ¨â€œæ´»ç€â€çš„æ—¶å€™é‡åˆ°çš„çªå‘çŠ¶å†µã€‚</p>
<p>å¸¸è§çš„å¼‚å¸¸åœºæ™¯åŒ…æ‹¬ï¼š</p>
<ul>
<li>å°è¯•æ‰“å¼€ä¸€ä¸ªä¸å­˜åœ¨çš„æ–‡ä»¶ã€‚</li>
<li>ç½‘ç»œè¿æ¥çªç„¶ä¸­æ–­ã€‚</li>
<li>è¯·æ±‚çš„å†…å­˜è¿‡å¤§ï¼Œç³»ç»Ÿæ— æ³•åˆ†é…ã€‚</li>
<li>æ•°ç»„ç´¢å¼•è¶…å‡ºäº†èŒƒå›´ã€‚</li>
<li>å°è¯•å¯¹ä¸€ä¸ª <code>null</code> çš„å¯¹è±¡è¿›è¡Œæ“ä½œã€‚</li>
</ul>
<h3 data-id="heading-2">2. å¼‚å¸¸çš„ä»£ä»·</h3>
<ul>
<li><strong>ç¨‹åºçªç„¶ç»ˆæ­¢</strong>ï¼šè¿™æ˜¯æœ€ç›´æ¥çš„åæœã€‚å¯¹äºç”¨æˆ·æ¥è¯´ï¼Œè¿™æ„å‘³ç€ä»–ä»¬æ­£åœ¨è¿›è¡Œçš„å·¥ä½œï¼ˆæ¯”å¦‚ç¼–è¾‘æ–‡æ¡£ã€å¡«å†™è¡¨å•ï¼‰å¯èƒ½ä¼šç¬é—´ä¸¢å¤±ï¼Œä½“éªŒæå·®ã€‚</li>
<li><strong>æ•°æ®æŸå</strong>ï¼šä¾‹å¦‚ä¸€ä¸ªè½¬è´¦æ“ä½œï¼Œåœ¨æ‰£é™¤Aè´¦æˆ·é‡‘é¢åã€å¢åŠ Bè´¦æˆ·é‡‘é¢å‰ï¼Œç¨‹åºå› ä¸ºä¸€ä¸ªå¼‚å¸¸è€Œå´©æºƒã€‚è¿™å°†å¯¼è‡´è´¦ç›®ä¸å¹³ï¼Œæ•°æ®çŠ¶æ€ä¸ä¸€è‡´ã€‚</li>
<li><strong>æš´éœ²æ•æ„Ÿä¿¡æ¯</strong>ï¼šåœ¨Webåº”ç”¨ä¸­ï¼Œä¸€ä¸ªæœªå¤„ç†çš„å¼‚å¸¸å¯èƒ½ä¼šå°†åŒ…å«æ•°æ®åº“è¿æ¥å­—ç¬¦ä¸²ã€æœåŠ¡å™¨å†…éƒ¨è·¯å¾„ç­‰æ•æ„Ÿä¿¡æ¯çš„å®Œæ•´é”™è¯¯å †æ ˆä¿¡æ¯ï¼ˆStack Traceï¼‰æš´éœ²ç»™æœ€ç»ˆç”¨æˆ·ï¼Œæ„æˆä¸¥é‡çš„å®‰å…¨éšæ‚£ã€‚</li>
<li><strong>èµ„æºæ³„éœ²</strong>ï¼šå¦‚æœç¨‹åºåœ¨æ‰“å¼€æ–‡ä»¶æˆ–æ•°æ®åº“è¿æ¥åï¼Œåœ¨å…³é—­å®ƒä»¬ä¹‹å‰å´©æºƒï¼Œè¿™äº›å®è´µçš„ç³»ç»Ÿèµ„æºå°†æ— æ³•è¢«é‡Šæ”¾ï¼Œä¹…è€Œä¹…ä¹‹ä¼šè€—å°½ç³»ç»Ÿèµ„æºï¼Œå¯¼è‡´æ•´ä¸ªç³»ç»Ÿå˜æ…¢ç”šè‡³ç˜«ç—ªã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-3">äºŒã€try-catchå—çš„åŸºç¡€è¯­æ³•ä¸å·¥ä½œåŸç†</h2>
<p><code>try-catch</code> è¯­å¥æ˜¯C#ä¸­ç”¨äºå¤„ç†å¼‚å¸¸çš„åŸºæœ¬å·¥å…·ã€‚å®ƒçš„é€»è¾‘éå¸¸ç¬¦åˆäººç±»çš„ç›´è§‰ï¼šâ€œå°è¯•åšæŸä»¶äº‹ï¼Œå¦‚æœå‡ºäº†é—®é¢˜ï¼Œå°±è¿™æ ·è¡¥æ•‘â€ã€‚</p>
<h3 data-id="heading-4">1. <code>try</code> å—ï¼šåˆ’å®šâ€œé£é™©åŒºâ€</h3>
<p><code>try</code> å…³é”®å­—åé¢è·Ÿç€ä¸€ä¸ªä»£ç å— <code>{}</code>ï¼Œæˆ‘ä»¬å°†æ‰€æœ‰<strong>å¯èƒ½æŠ›å‡ºå¼‚å¸¸</strong>çš„ä»£ç éƒ½æ”¾åœ¨è¿™ä¸ªä»£ç å—é‡Œã€‚</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">try</span>
{
    <span class="hljs-comment">// è¿™é‡Œæ˜¯â€œé£é™©åŒºâ€</span>
    Console.WriteLine(<span class="hljs-string">"è¯·è¾“å…¥ä¸€ä¸ªæ•°å­—ï¼š"</span>);
    <span class="hljs-built_in">int</span> number = <span class="hljs-built_in">int</span>.Parse(Console.ReadLine());
    <span class="hljs-built_in">int</span> result = <span class="hljs-number">100</span> / number;
    Console.WriteLine(<span class="hljs-string">$"100é™¤ä»¥<span class="hljs-subst">{number}</span>çš„ç»“æœæ˜¯ï¼š<span class="hljs-subst">{result}</span>"</span>);
} 
<span class="hljs-keyword">catch</span>(Exception e)
{
    Console.WriteLine(e.ToString()); 
}

</code></pre>
<p>åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œ<code>int.Parse()</code> å¯èƒ½ä¼šå› ä¸ºç”¨æˆ·è¾“å…¥éæ•°å­—å­—ç¬¦è€ŒæŠ›å‡º <code>FormatException</code>ï¼Œè€Œ <code>100 / number</code> å¯èƒ½ä¼šå› ä¸ºç”¨æˆ·è¾“å…¥0è€ŒæŠ›å‡º <code>DivideByZeroException</code>ã€‚</p>
<h3 data-id="heading-5">2. <code>catch</code> å—ï¼šéƒ¨ç½²â€œåº”æ€¥é¢„æ¡ˆâ€</h3>
<p><code>catch</code> å…³é”®å­—ç´§è·Ÿåœ¨ <code>try</code> å—ä¹‹åï¼Œå®ƒä¹ŸåŒ…å«ä¸€ä¸ªä»£ç å—ã€‚å½“ <code>try</code> å—ä¸­çš„ä»»ä½•ä¸€æ¡è¯­å¥æŠ›å‡ºå¼‚å¸¸æ—¶ï¼Œç¨‹åºçš„æ­£å¸¸æ‰§è¡Œæµä¼šç«‹å³ä¸­æ–­ï¼Œç„¶åCLRï¼ˆå…¬å…±è¯­è¨€è¿è¡Œæ—¶ï¼‰ä¼šå¯»æ‰¾ä¸€ä¸ªèƒ½å¤Ÿâ€œæ¥ä½â€è¿™ä¸ªå¼‚å¸¸çš„ <code>catch</code> å—ã€‚</p>
<p><strong>æœ€åŸºæœ¬çš„ <code>catch</code> å—ï¼š</strong></p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">try</span>
{
    <span class="hljs-comment">// ... é£é™©ä»£ç  ...</span>
}
<span class="hljs-keyword">catch</span>
{
    <span class="hljs-comment">// å¼‚å¸¸å‘ç”Ÿæ—¶ï¼Œæ‰§è¡Œè¿™é‡Œçš„ä»£ç </span>
    Console.WriteLine(<span class="hljs-string">"å‘ç”Ÿäº†ä¸€ä¸ªæœªçŸ¥é”™è¯¯ï¼"</span>);
}
</code></pre>
<p>è¿™ç§ä¸å¸¦ä»»ä½•å‚æ•°çš„ <code>catch</code> å—å¯ä»¥æ•è·<strong>ä»»ä½•ç±»å‹</strong>çš„å¼‚å¸¸ï¼Œä½†å®ƒæœ‰ä¸€ä¸ªå·¨å¤§çš„ç¼ºç‚¹ï¼šä½ ä¸çŸ¥é“å…·ä½“å‘ç”Ÿäº†ä»€ä¹ˆé”™è¯¯ã€‚è¿™å°±åƒä¸€ä¸ªæ¶ˆé˜²å‘˜èµ¶åˆ°ç°åœºåªçŸ¥é“â€œç€ç«äº†â€ï¼Œå´ä¸çŸ¥é“æ˜¯ç”µçº¿èµ·ç«è¿˜æ˜¯å¨æˆ¿èµ·ç«ï¼Œæ— æ³•é‡‡å–é’ˆå¯¹æ€§çš„ç­ç«æªæ–½ã€‚</p>
<h3 data-id="heading-6">3. æ•è·å…·ä½“çš„å¼‚å¸¸ä¿¡æ¯ï¼š<code>catch (ExceptionType ex)</code></h3>
<p>C#å…è®¸æˆ‘ä»¬åœ¨ <code>catch</code> åé¢æŒ‡å®šè¦æ•è·çš„å¼‚å¸¸ç±»å‹ï¼Œå¹¶æä¾›ä¸€ä¸ªå˜é‡æ¥æ¥æ”¶è¿™ä¸ªå¼‚å¸¸å¯¹è±¡ã€‚</p>
<p><code>System.Exception</code> æ˜¯æ‰€æœ‰å¼‚å¸¸ç±»å‹çš„åŸºç±»ã€‚å› æ­¤ï¼Œ<code>catch (Exception ex)</code> å¯ä»¥æ•è·å‡ ä¹æ‰€æœ‰ç±»å‹çš„å¼‚å¸¸ï¼Œå¹¶ä¸”é€šè¿‡å˜é‡ <code>ex</code>ï¼Œæˆ‘ä»¬å¯ä»¥è®¿é—®åˆ°å…³äºå¼‚å¸¸çš„å®è´µä¿¡æ¯ã€‚</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">try</span>
{
    Console.WriteLine(<span class="hljs-string">"è¯·è¾“å…¥ä¸€ä¸ªæ•°ç»„ç´¢å¼•ï¼ˆ0-2ï¼‰ï¼š"</span>);
    <span class="hljs-built_in">int</span>[] numbers = { <span class="hljs-number">10</span>, <span class="hljs-number">20</span>, <span class="hljs-number">30</span> };
    <span class="hljs-built_in">int</span> index = <span class="hljs-built_in">int</span>.Parse(Console.ReadLine());
    Console.WriteLine(<span class="hljs-string">$"ç´¢å¼• <span class="hljs-subst">{index}</span> ä¸Šçš„å€¼ä¸º: <span class="hljs-subst">{numbers[index]}</span>"</span>);
}
<span class="hljs-keyword">catch</span> (Exception ex)
{
    Console.WriteLine(<span class="hljs-string">"\n--- ç¨‹åºå‡ºç°é—®é¢˜ï¼---"</span>);
    Console.WriteLine(<span class="hljs-string">$"é”™è¯¯ç±»å‹: <span class="hljs-subst">{ex.GetType().Name}</span>"</span>); <span class="hljs-comment">// è·å–å¼‚å¸¸çš„å…·ä½“ç±»å‹å</span>
    Console.WriteLine(<span class="hljs-string">$"é”™è¯¯ä¿¡æ¯: <span class="hljs-subst">{ex.Message}</span>"</span>);        <span class="hljs-comment">// è·å–å¼‚å¸¸çš„æè¿°ä¿¡æ¯</span>
    Console.WriteLine(<span class="hljs-string">"--- è¯¦ç»†å †æ ˆè·Ÿè¸ª ---"</span>);
    Console.WriteLine(ex.StackTrace);                  <span class="hljs-comment">// è·å–å¼‚å¸¸å‘ç”Ÿæ—¶çš„è°ƒç”¨å †æ ˆ</span>
    Console.WriteLine(<span class="hljs-string">"----------------------"</span>);
}

Console.WriteLine(<span class="hljs-string">"\nç¨‹åºå·²é€šè¿‡å¼‚å¸¸å¤„ç†ï¼Œç»§ç»­æ‰§è¡Œ..."</span>);
</code></pre>
<hr/>
<h2 data-id="heading-7">ä¸‰ã€ç©è½¬å¤š<code>catch</code>å—ä¸å¼‚å¸¸å±‚æ¬¡ç»“æ„</h2>
<h3 data-id="heading-8">1. å¤š<code>catch</code>å—è¿›è¡Œç»†åˆ†å¼‚å¸¸</h3>
<p>ä¸€ä¸ª <code>try</code> å—åé¢å¯ä»¥è·Ÿå¤šä¸ª <code>catch</code> å—ï¼Œæ¯ä¸ª <code>catch</code> å—è´Ÿè´£å¤„ç†ä¸€ç§ç‰¹å®šç±»å‹çš„å¼‚å¸¸ã€‚CLRåœ¨åŒ¹é… <code>catch</code> å—æ—¶ï¼Œä¼š<strong>ä»ä¸Šåˆ°ä¸‹</strong>ä¾æ¬¡æ£€æŸ¥ï¼Œå¹¶æ‰§è¡Œ<strong>ç¬¬ä¸€ä¸ª</strong>èƒ½å¤ŸåŒ¹é…å¼‚å¸¸ç±»å‹çš„ <code>catch</code> å—ã€‚</p>
<p>â€œåŒ¹é…â€çš„è§„åˆ™æ˜¯ï¼šå¦‚æœæŠ›å‡ºçš„å¼‚å¸¸ç±»å‹<strong>æ˜¯</strong> <code>catch</code> å—ä¸­å£°æ˜çš„ç±»å‹ï¼Œæˆ–è€…<strong>æ˜¯å…¶å­ç±»</strong>ï¼Œåˆ™åŒ¹é…æˆåŠŸã€‚</p>
<p>è¿™å°±å¼•å‡ºäº†å¤š<code>catch</code>å—æœ€é‡è¦çš„è§„åˆ™ï¼š<strong><code>catch</code> å—çš„é¡ºåºå¿…é¡»æ˜¯ä»æœ€å…·ä½“ï¼ˆå­ç±»ï¼‰åˆ°æœ€é€šç”¨ï¼ˆçˆ¶ç±»ï¼‰ã€‚</strong></p>
<p><strong>ç¤ºä¾‹ï¼šä¸€ä¸ªå¥å£®çš„æ–‡ä»¶è¯»å–æ“ä½œ</strong></p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">ProcessFile</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> filePath</span>)</span>
{
    <span class="hljs-keyword">try</span>
    {
        <span class="hljs-built_in">string</span> content = System.IO.File.ReadAllText(filePath);
        Console.WriteLine(<span class="hljs-string">"æ–‡ä»¶å†…å®¹å¤„ç†æˆåŠŸï¼"</span>);
    }
    <span class="hljs-keyword">catch</span> (System.IO.FileNotFoundException ex) <span class="hljs-comment">// æœ€å…·ä½“çš„å¼‚å¸¸</span>
    {
        Console.WriteLine(<span class="hljs-string">$"é”™è¯¯ï¼šæ–‡ä»¶ '<span class="hljs-subst">{filePath}</span>' ä¸å­˜åœ¨ã€‚è¯·æ£€æŸ¥è·¯å¾„æ˜¯å¦æ­£ç¡®ã€‚"</span>);
    }
    <span class="hljs-keyword">catch</span> (System.UnauthorizedAccessException ex) <span class="hljs-comment">// å¦ä¸€ä¸ªå…·ä½“çš„å¼‚å¸¸</span>
    {
        Console.WriteLine(<span class="hljs-string">$"é”™è¯¯ï¼šç¨‹åºæ²¡æœ‰æƒé™è®¿é—®æ–‡ä»¶ '<span class="hljs-subst">{filePath}</span>'ã€‚"</span>);
    }
    <span class="hljs-keyword">catch</span> (System.IO.IOException ex) <span class="hljs-comment">// æ•è·å…¶ä»–æ‰€æœ‰IOç›¸å…³çš„å¼‚å¸¸</span>
    {
        Console.WriteLine(<span class="hljs-string">$"è¯»å–æ–‡ä»¶æ—¶å‘ç”Ÿ I/O é”™è¯¯: <span class="hljs-subst">{ex.Message}</span>"</span>);
    }
    <span class="hljs-keyword">catch</span> (Exception ex) <span class="hljs-comment">// æœ€åçš„â€œä¸‡èƒ½æ•æ‰‹â€ï¼Œæ•è·æ‰€æœ‰å…¶ä»–æ„æƒ³ä¸åˆ°çš„å¼‚å¸¸</span>
    {
        Console.WriteLine(<span class="hljs-string">$"å‘ç”ŸæœªçŸ¥é”™è¯¯ï¼Œè¯·è”ç³»æŠ€æœ¯æ”¯æŒã€‚"</span>);
        <span class="hljs-comment">// åœ¨çœŸå®åº”ç”¨ä¸­ï¼Œè¿™é‡Œåº”è¯¥è®°å½•å®Œæ•´çš„ex.ToString()åˆ°æ—¥å¿—æ–‡ä»¶</span>
        <span class="hljs-comment">// Log.Error(ex.ToString()); </span>
    }
}
</code></pre>
<p><strong>åˆ†æï¼š</strong></p>
<ul>
<li>å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œç¬¬ä¸€ä¸ª <code>catch (FileNotFoundException)</code> ä¼šè¢«æ‰§è¡Œã€‚</li>
<li>å¦‚æœæ–‡ä»¶å­˜åœ¨ä½†ç¨‹åºæ²¡æœ‰è¯»å–æƒé™ï¼Œç¬¬äºŒä¸ª <code>catch (UnauthorizedAccessException)</code> ä¼šè¢«æ‰§è¡Œã€‚</li>
<li>å¦‚æœå‘ç”Ÿå…¶ä»–I/Oé”™è¯¯ï¼ˆå¦‚ç£ç›˜å·²æ»¡ï¼‰ï¼Œç”±äºè¿™äº›é”™è¯¯ç±»å‹ï¼ˆå¦‚<code>DiskFullException</code>ï¼‰é€šå¸¸ç»§æ‰¿è‡ª <code>IOException</code>ï¼Œç¬¬ä¸‰ä¸ª <code>catch</code> å—ä¼šè¢«æ‰§è¡Œã€‚</li>
<li>å¦‚æœå‘ç”Ÿäº†å®Œå…¨æ— å…³çš„é”™è¯¯ï¼ˆæ¯”å¦‚åœ¨åç»­å¤„ç†ä¸­å‡ºç° <code>OutOfMemoryException</code>ï¼‰ï¼Œæœ€åçš„ <code>catch (Exception)</code> ä¼šä½œä¸ºå…œåº•é˜²çº¿è¢«è§¦å‘ã€‚</li>
</ul>
<p>å¦‚æœä½ æŠŠ <code>catch (Exception ex)</code> æ”¾åœ¨æœ€å‰é¢ï¼Œé‚£ä¹ˆå®ƒä¼šæ•è·æ‰€æœ‰å¼‚å¸¸ï¼Œåé¢çš„å…·ä½“ <code>catch</code> å—å°†æ°¸è¿œæ²¡æœ‰æœºä¼šæ‰§è¡Œï¼Œç¼–è¯‘å™¨ç”šè‡³ä¼šå› æ­¤æŠ¥é”™ã€‚</p>
<h3 data-id="heading-9">2. è­¦æƒ•ç©º<code>catch</code>å—å’Œâ€œåå™¬â€å¼‚å¸¸</h3>
<p>æœ‰æ—¶å€™ï¼Œä½ å¯èƒ½ä¼šçœ‹åˆ°è¿™æ ·çš„ä»£ç ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// è­¦å‘Šï¼šæåº¦å±é™©çš„ä»£ç ï¼</span>
<span class="hljs-keyword">try</span>
{
    SomeRiskyOperation();
}
<span class="hljs-keyword">catch</span> (Exception)
{
    <span class="hljs-comment">// ä»€ä¹ˆä¹Ÿä¸åš</span>
}
</code></pre>
<p>è¿™è¢«ç§°ä¸ºâ€œåå™¬å¼‚å¸¸â€æˆ–â€œå¼‚å¸¸é»‘æ´â€ã€‚ä»£ç çš„ä½œè€…å¯èƒ½è®¤ä¸ºâ€œæˆ‘çŸ¥é“è¿™é‡Œå¯èƒ½å‡ºé”™ï¼Œä½†æˆ‘ä¸å…³å¿ƒâ€ã€‚è¿™æ˜¯ä¸€ä¸ªæå…¶å±é™©çš„åä¹ æƒ¯ï¼</p>
<p><strong>ä¸ºä»€ä¹ˆå±é™©ï¼Ÿ</strong></p>
<ol>
<li><strong>éšè—é—®é¢˜</strong>ï¼šä¸€ä¸ªä¸¥é‡çš„é—®é¢˜ï¼ˆæ¯”å¦‚æ•°æ®åº“è¿æ¥å¤±è´¥ï¼‰å‘ç”Ÿäº†ï¼Œä½†ç¨‹åºå‡è£…ä»€ä¹ˆéƒ½æ²¡å‘ç”Ÿï¼Œç»§ç»­å¾€ä¸‹æ‰§è¡Œã€‚è¿™å¾ˆå¯èƒ½å¯¼è‡´åç»­ä»£ç åœ¨é”™è¯¯çš„æ•°æ®åŸºç¡€ä¸Šè¿è¡Œï¼Œå¼•å‘æ›´éšè”½ã€æ›´éš¾ä»¥è°ƒè¯•çš„é”™è¯¯ï¼Œç”šè‡³å¯¼è‡´æ•°æ®æ°¸ä¹…æ€§æŸåã€‚</li>
<li><strong>è°ƒè¯•å™©æ¢¦</strong>ï¼šå½“ç¨‹åºå‡ºç°å¥‡æ€ªçš„è¡Œä¸ºæ—¶ï¼Œä½ å°†æ²¡æœ‰ä»»ä½•çº¿ç´¢ã€‚æ²¡æœ‰æ—¥å¿—ï¼Œæ²¡æœ‰å´©æºƒæŠ¥å‘Šï¼Œé”™è¯¯å°±åƒäººé—´è’¸å‘äº†ä¸€æ ·ã€‚</li>
</ol>
<p><strong>æ­£ç¡®çš„åšæ³•æ˜¯</strong>ï¼šå³ä½¿ä½ è®¤ä¸ºå¯ä»¥ä»æŸä¸ªå¼‚å¸¸ä¸­æ¢å¤ï¼Œä¹Ÿè‡³å°‘åº”è¯¥<strong>è®°å½•å®ƒ</strong>ã€‚</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">try</span>
{
    <span class="hljs-comment">// ...</span>
}
<span class="hljs-keyword">catch</span> (SomeExpectedAndRecoverableException ex)
{
    <span class="hljs-comment">// è®°å½•ä¸‹æ¥ï¼Œä»¥å¤‡åç»­åˆ†æ</span>
    Log.Warning(<span class="hljs-string">$"ä¸€ä¸ªå¯æ¢å¤çš„é”™è¯¯å‘ç”Ÿäº†: <span class="hljs-subst">{ex.Message}</span>"</span>); 
    <span class="hljs-comment">// ç„¶åæ‰§è¡Œæ¢å¤é€»è¾‘</span>
    <span class="hljs-comment">// ...</span>
}
</code></pre>
<h3 data-id="heading-10">3. <code>TryParse</code> vs. <code>try-catch</code>**</h3>
<p>è€ƒè™‘ä¸€ä¸ªåœºæ™¯ï¼šéªŒè¯ç”¨æˆ·è¾“å…¥çš„å­—ç¬¦ä¸²æ˜¯å¦ä¸ºæœ‰æ•ˆçš„æ•´æ•°ã€‚æˆ‘ä»¬æœ‰ä¸¤ç§æ–¹æ³•ï¼š</p>
<p><strong>æ–¹æ³•A: LBYL (Look Before You Leap) - å…ˆçœ‹åè·³</strong>
ä½¿ç”¨ <code>int.TryParse</code> è¿›è¡Œé¢„æ£€æŸ¥ã€‚</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-built_in">string</span> input = Console.ReadLine();
<span class="hljs-keyword">if</span> (<span class="hljs-built_in">int</span>.TryParse(input, <span class="hljs-keyword">out</span> <span class="hljs-built_in">int</span> number))
{
    <span class="hljs-comment">// æˆåŠŸï¼Œä½¿ç”¨ number</span>
    Console.WriteLine(<span class="hljs-string">$"ä½ è¾“å…¥çš„æ•°å­—æ˜¯: <span class="hljs-subst">{number}</span>"</span>);
}
<span class="hljs-keyword">else</span>
{
    <span class="hljs-comment">// å¤±è´¥ï¼Œå¤„ç†æ— æ•ˆè¾“å…¥</span>
    Console.WriteLine(<span class="hljs-string">"æ— æ•ˆçš„è¾“å…¥ï¼Œè¯·è¾“å…¥ä¸€ä¸ªæ•´æ•°ã€‚"</span>);
}
</code></pre>
<p><strong>æ–¹æ³•B: EAFP (It's Easier to Ask for Forgiveness than Permission) - å…ˆåšåé—®</strong>
ç›´æ¥å°è¯•è½¬æ¢ï¼Œç”¨ <code>try-catch</code> å¤„ç†å¤±è´¥æƒ…å†µã€‚</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-built_in">string</span> input = Console.ReadLine();
<span class="hljs-keyword">try</span>
{
    <span class="hljs-built_in">int</span> number = <span class="hljs-built_in">int</span>.Parse(input);
    <span class="hljs-comment">// æˆåŠŸï¼Œä½¿ç”¨ number</span>
    Console.WriteLine(<span class="hljs-string">$"ä½ è¾“å…¥çš„æ•°å­—æ˜¯: <span class="hljs-subst">{number}</span>"</span>);
}
<span class="hljs-keyword">catch</span> (FormatException)
{
    <span class="hljs-comment">// å¤±è´¥ï¼Œå¤„ç†æ— æ•ˆè¾“å…¥</span>
    Console.WriteLine(<span class="hljs-string">"æ— æ•ˆçš„è¾“å…¥ï¼Œè¯·è¾“å…¥ä¸€ä¸ªæ•´æ•°ã€‚"</span>);
}
</code></pre>
<p><strong>å¦‚ä½•é€‰æ‹©ï¼Ÿ</strong></p>
<ol>
<li><strong>æ€§èƒ½</strong>ï¼š<strong>æŠ›å‡ºå’Œæ•è·å¼‚å¸¸æ˜¯ä¸€ä¸ªéå¸¸æ˜‚è´µçš„æ“ä½œ</strong>ã€‚CLRéœ€è¦ä¿å­˜å½“å‰æ‰§è¡ŒçŠ¶æ€ï¼Œå±•å¼€è°ƒç”¨å †æ ˆï¼Œæœç´¢ <code>catch</code> å—ç­‰ï¼Œè¿™æ¯”ä¸€ä¸ªç®€å•çš„ <code>if-else</code> åˆ¤æ–­è¦æ…¢å¾—å¤šã€‚å› æ­¤ï¼Œåœ¨æ€§èƒ½æ•æ„Ÿçš„ä»£ç æˆ–é”™è¯¯æ˜¯â€œå¯é¢„æœŸçš„å¸¸è§„äº‹ä»¶â€ï¼ˆæ¯”å¦‚ç”¨æˆ·è¾“å…¥é”™è¯¯ï¼‰æ—¶ï¼Œ<strong><code>TryParse</code> æ¨¡å¼æ˜¯é¦–é€‰</strong>ã€‚</li>
<li><strong>ä»£ç æ¸…æ™°åº¦</strong>ï¼š<code>TryParse</code> æ˜ç¡®åœ°è¡¨è¾¾äº†â€œæˆ‘æ­£åœ¨å°è¯•è½¬æ¢ï¼Œå¹¶æ£€æŸ¥å…¶ç»“æœâ€çš„æ„å›¾ï¼Œé€»è¾‘æ¸…æ™°ã€‚è€Œä½¿ç”¨ <code>try-catch</code> æ¥æ§åˆ¶æ­£å¸¸çš„ç¨‹åºæµç¨‹ï¼Œåˆ™è¢«è®¤ä¸ºæ˜¯ä¸€ç§åæ¨¡å¼ï¼ˆanti-patternï¼‰ï¼Œå› ä¸ºå®ƒæ··æ·†äº†â€œçœŸæ­£çš„å¼‚å¸¸æƒ…å†µâ€å’Œâ€œæ­£å¸¸çš„é€»è¾‘åˆ†æ”¯â€ã€‚</li>
<li><strong>é€‚ç”¨åœºæ™¯</strong>ï¼š
<ul>
<li><strong>ä½¿ç”¨ <code>TryParse</code></strong>ï¼šå½“å¤±è´¥æ˜¯å¸¸è§ä¸”å¯é¢„æœŸçš„åˆ†æ”¯æ—¶ï¼ˆå¦‚ç”¨æˆ·è¾“å…¥éªŒè¯ã€æ£€æŸ¥å­—å…¸ä¸­æ˜¯å¦å­˜åœ¨é”®ï¼‰ã€‚</li>
<li><strong>ä½¿ç”¨ <code>try-catch</code></strong>ï¼šå½“å¤±è´¥æ˜¯çœŸæ­£â€œå¼‚å¸¸â€çš„ã€ä¸å¸Œæœ›å‘ç”Ÿçš„æƒ…å†µæ—¶ï¼ˆå¦‚æ–‡ä»¶æŸåã€ç½‘ç»œæ–­å¼€ã€ç£ç›˜å·²æ»¡ï¼‰ã€‚</li>
</ul>
</li>
</ol>
<p><strong>ç»“è®ºï¼šä¸è¦ç”¨å¼‚å¸¸æ¥æ§åˆ¶ç¨‹åºæµç¨‹ã€‚å¼‚å¸¸å¤„ç†æ˜¯ä¸ºæ„å¤–å‡†å¤‡çš„ï¼Œä¸æ˜¯ä¸ºæ—¥å¸¸å‡†å¤‡çš„ã€‚</strong></p>
<hr/>
<h2 data-id="heading-11">ç»“è¯­</h2>
<p><strong>ç‚¹ä¸ªèµï¼Œå…³æ³¨æˆ‘è·å–æ›´å¤šå®ç”¨ C# æŠ€æœ¯å¹²è´§ï¼å¦‚æœè§‰å¾—æœ‰ç”¨ï¼Œè®°å¾—æ”¶è—æœ¬æ–‡</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Workers AI å®Œæ•´æ•™ç¨‹ï¼šæ¯å¤©ç™½å«– 10000 æ¬¡å¤§æ¨¡å‹è°ƒç”¨ï¼Œæ¯” OpenAI çœ 90%]]></title>    <link>https://juejin.cn/post/7580180556983337010</link>    <guid>https://juejin.cn/post/7580180556983337010</guid>    <pubDate>2025-12-05T10:53:36.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7580180556983337010" data-draft-id="7579460553615179827" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Workers AI å®Œæ•´æ•™ç¨‹ï¼šæ¯å¤©ç™½å«– 10000 æ¬¡å¤§æ¨¡å‹è°ƒç”¨ï¼Œæ¯” OpenAI çœ 90%"/> <meta itemprop="keywords" content="AIGC,API,OpenAI"/> <meta itemprop="datePublished" content="2025-12-05T10:53:36.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æŠ€æœ¯æ¢ç´¢å®¶"/> <meta itemprop="url" content="https://juejin.cn/user/2735240657517816"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Workers AI å®Œæ•´æ•™ç¨‹ï¼šæ¯å¤©ç™½å«– 10000 æ¬¡å¤§æ¨¡å‹è°ƒç”¨ï¼Œæ¯” OpenAI çœ 90%
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2735240657517816/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æŠ€æœ¯æ¢ç´¢å®¶
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-05T10:53:36.000Z" title="Fri Dec 05 2025 10:53:36 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-05
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4f9e1ef04edd4847a464d431cbbe2525~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oqA5pyv5o6i57Si5a62:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765536815&amp;x-signature=%2ByYeIy4DBk2JgEqDJ1G42yYb3eM%3D" alt="20251201-workers-ai-tutorial-guide-zh.jpg" loading="lazy"/>
è¯´å®è¯,ç¬¬ä¸€æ¬¡çœ‹åˆ° OpenAI è´¦å•çš„æ—¶å€™æˆ‘æ•´ä¸ªäººéƒ½å‚»äº†ã€‚ä¸€ä¸ªæœˆ 200 å¤šç¾å…ƒ,å°±å› ä¸ºåšäº†ä¸ªå°é¡¹ç›®æµ‹è¯•äº†å‡ å¤© APIã€‚é‚£æ—¶å€™æˆ‘å°±åœ¨æƒ³:æœ‰æ²¡æœ‰å…è´¹æˆ–è€…ä¾¿å®œç‚¹çš„æ›¿ä»£æ–¹æ¡ˆ?
åæ¥åœ¨ç ”ç©¶ Cloudflare çš„è¾¹ç¼˜è®¡ç®—åŠŸèƒ½æ—¶,å¶ç„¶å‘ç°äº† Workers AIã€‚æµ‹è¯•äº†ä¸€å‘¨åå‘ç°,å…è´¹é¢åº¦å¯¹ä¸ªäººå¼€å‘è€…æ¥è¯´çœŸçš„å¤Ÿç”¨ã€‚ä»Šå¤©å°±æŠŠå®Œæ•´çš„ä½¿ç”¨æ–¹æ³•åˆ†äº«ç»™ä½ ã€‚</p>
<h2 data-id="heading-0">Workers AI æ˜¯ä»€ä¹ˆ?ä¸ºä»€ä¹ˆå€¼å¾—å…³æ³¨?</h2>
<p>ç®€å•æ¥è¯´,Workers AI å°±æ˜¯ Cloudflare æ¨å‡ºçš„æ— æœåŠ¡å™¨ AI æ¨ç†æœåŠ¡ã€‚ä½ ä¸éœ€è¦è‡ªå·±ä¹° GPUã€ä¸éœ€è¦ç®¡æœåŠ¡å™¨,å†™å‡ è¡Œä»£ç å°±èƒ½è°ƒç”¨ Llamaã€Mistral è¿™äº›å¼€æºå¤§æ¨¡å‹ã€‚
<strong>æœ€å…³é”®çš„æ˜¯ä¸‰ç‚¹:</strong></p>
<ol>
<li><strong>æ¯å¤© 10,000 Neurons å…è´¹é¢åº¦</strong>
<ul>
<li>å®æµ‹å¤§æ¦‚èƒ½å¤„ç†å‡ ç™¾æ¬¡å¯¹è¯,ä¸ªäººé¡¹ç›®å®Œå…¨å¤Ÿç”¨</li>
<li>ç”¨ Llama 3.1-8B æ¨¡å‹,æˆ‘æµ‹è¯•äº† 1000 æ¬¡ç®€å•å¯¹è¯,æ¶ˆè€—äº†å¤§çº¦ 8000 Neurons</li>
</ul>
</li>
<li><strong>ä»˜è´¹ä¹Ÿå¾ˆä¾¿å®œ: $0.011/1000 Neurons</strong>
<ul>
<li>æ¯” OpenAI GPT-3.5 ä¾¿å®œ 60-70%</li>
<li>æ¯” GPT-4 ä¾¿å®œ 90% ä»¥ä¸Š</li>
</ul>
</li>
<li><strong>å…¨çƒè¾¹ç¼˜ç½‘ç»œåŠ é€Ÿ</strong>
<ul>
<li>Cloudflare æœ‰ 300+ ä¸ªèŠ‚ç‚¹</li>
<li>å“åº”é€Ÿåº¦æ¯”å¾ˆå¤šäº‘æœåŠ¡å•†å¿«</li>
</ul>
</li>
</ol>
<h3 data-id="heading-1">å’Œå…¶ä»–æ–¹æ¡ˆå¯¹æ¯”ä¸€ä¸‹</h3>
<p>ä½ å¯èƒ½ä¼šé—®:å…è´¹çš„ä¸œè¥¿èƒ½å¥½ç”¨å—?æˆ‘æ•´ç†äº†ä¸ªè¡¨æ ¼å¯¹æ¯”:</p>















































<table><thead><tr><th>æ–¹æ¡ˆ</th><th>å…è´¹é¢åº¦</th><th>ä»˜è´¹ä»·æ ¼</th><th>å“åº”é€Ÿåº¦</th><th>æ¨¡å‹é€‰æ‹©</th></tr></thead><tbody><tr><td><strong>Workers AI</strong></td><td>10,000 Neurons/å¤©</td><td>$0.011/1k Neurons</td><td>å¿«(è¾¹ç¼˜èŠ‚ç‚¹)</td><td>50+ å¼€æºæ¨¡å‹</td></tr><tr><td>OpenAI API</td><td>$5 æ–°ç”¨æˆ·(ä¸€æ¬¡æ€§)</td><td>$0.002/1k tokens(GPT-3.5)</td><td>ä¸­ç­‰</td><td>GPT ç³»åˆ—</td></tr><tr><td>HuggingFace</td><td>æœ‰é™å…è´¹è°ƒç”¨</td><td>æŒ‰æ¨¡å‹è®¡è´¹</td><td>è¾ƒæ…¢</td><td>æµ·é‡æ¨¡å‹</td></tr><tr><td>è‡ªå»ºæœåŠ¡å™¨</td><td>-</td><td>GPUç§Ÿç”¨æˆæœ¬é«˜</td><td>å–å†³äºé…ç½®</td><td>ä»»æ„æ¨¡å‹</td></tr><tr><td><strong>ä»€ä¹ˆæ—¶å€™é€‚åˆç”¨ Workers AI?</strong></td><td/><td/><td/><td/></tr></tbody></table>
<ul>
<li>âœ… ä¸ªäººé¡¹ç›®ã€åŸå‹éªŒè¯ã€å­¦ä¹ å®éªŒ</li>
<li>âœ… ä¸­å°è§„æ¨¡ç”Ÿäº§åº”ç”¨(QPS &lt; 300)</li>
<li>âœ… å¯¹æˆæœ¬æ•æ„Ÿçš„åˆåˆ›é¡¹ç›®
<strong>ä»€ä¹ˆæ—¶å€™ä¸å¤ªåˆé€‚?</strong></li>
<li>âš ï¸ å¤§è§„æ¨¡æ‰¹é‡å¤„ç†(æ¯å¤©å‡ åä¸‡æ¬¡è°ƒç”¨)</li>
<li>âš ï¸ å¯¹å»¶è¿Ÿæåº¦æ•æ„Ÿçš„å®æ—¶åº”ç”¨(éœ€è¦ &lt; 100ms å“åº”)</li>
<li>âš ï¸ éœ€è¦æœ€æ–° GPT-4 çº§åˆ«æ¨¡å‹çš„åœºæ™¯</li>
</ul>
<h2 data-id="heading-2">å…è´¹é¢åº¦å¤Ÿç”¨å—?æˆ‘å¸®ä½ ç®—ä¸€ç¬”è´¦</h2>
<p>è¿™ä¸ª"Neurons"æ˜¯ Cloudflare è‡ªå·±å®šä¹‰çš„è®¡è´¹å•ä½,åˆšå¼€å§‹æˆ‘ä¹Ÿçœ‹æ‡µäº†ã€‚ç®€å•ç†è§£å°±æ˜¯:
<strong>Neurons = (è¾“å…¥ tokens + è¾“å‡º tokens) Ã— æ¨¡å‹ç³»æ•°</strong>
ä¸åŒæ¨¡å‹çš„ç³»æ•°ä¸ä¸€æ ·:</p>
<ul>
<li>Llama 3.1-8B: ç³»æ•°çº¦ 0.8</li>
<li>Llama 3.1-70B: ç³»æ•°çº¦ 3.5</li>
<li>Mistral 7B: ç³»æ•°çº¦ 0.7
<strong>å®é™…èƒ½ç”¨å¤šå°‘æ¬¡?</strong>
æˆ‘å®æµ‹äº†ä¸€ä¸‹,ç”¨ Llama 3.1-8B å¤„ç†ä¸­æ–‡å¯¹è¯:</li>
<li>ç®€å•é—®ç­”(100 å­—ä»¥å†…): æ¯æ¬¡æ¶ˆè€— 5-8 Neurons</li>
<li>é•¿æ–‡æœ¬æ‘˜è¦(1000 å­—è¾“å…¥): æ¯æ¬¡æ¶ˆè€— 30-50 Neurons</li>
<li>ä»£ç ç”Ÿæˆ(500 è¡Œä»£ç ): æ¯æ¬¡æ¶ˆè€— 20-40 Neurons
æŒ‰è¿™ä¸ªæ¶ˆè€—é‡ç®—,<strong>æ¯å¤© 10,000 Neurons å¤§æ¦‚èƒ½å¤„ç†:</strong></li>
<li>1000-2000 æ¬¡ç®€å•å¯¹è¯</li>
<li>200-300 æ¬¡é•¿æ–‡æœ¬å¤„ç†</li>
<li>250-500 æ¬¡ä»£ç ç”Ÿæˆ
è€å®è®²,å¯¹ä¸ªäººå¼€å‘è€…æ¥è¯´çœŸçš„å¾ˆå¤Ÿç”¨äº†ã€‚æˆ‘ç°åœ¨ç”¨ Workers AI è·‘äº†ä¸ªå°æœºå™¨äºº,æ¯å¤©å¤„ç†å‡ ç™¾æ¡æ¶ˆæ¯,å®Œå…¨åœ¨å…è´¹é¢åº¦å†…ã€‚</li>
</ul>
<h3 data-id="heading-3">å¦‚æœè¶…äº†å…è´¹é¢åº¦æ€ä¹ˆåŠ?</h3>
<p>ä¼šè‡ªåŠ¨è½¬æˆä»˜è´¹æ¨¡å¼,$0.011/1000 Neuronsã€‚
æˆ‘ç®—äº†ä¸€ä¸‹,å°±ç®—è¶…äº†,æˆæœ¬ä¹Ÿå¾ˆä½:</p>
<ul>
<li>å‡è®¾ä½ æ¯å¤©ç”¨ 50,000 Neurons(æ˜¯å…è´¹é¢åº¦çš„ 5 å€)</li>
<li>è¶…å‡ºéƒ¨åˆ†: 40,000 Neurons</li>
<li>è´¹ç”¨: 40,000 / 1000 Ã— <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0.011</mn><mo>=</mo><mo>âˆ—</mo><mo>âˆ—</mo></mrow><annotation encoding="application/x-tex">0.011 = **</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">0.011</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.4653em;"/><span class="mord">âˆ—</span><span class="mord">âˆ—</span></span></span></span></span>0.44/å¤©**</li>
<li>ä¸€ä¸ªæœˆä¹Ÿå°± **<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>13</mn><mtext>å·¦å³</mtext><mo>âˆ—</mo><mo>âˆ—</mo><mtext>å¯¹æ¯”</mtext><mi>O</mi><mi>p</mi><mi>e</mi><mi>n</mi><mi>A</mi><mi>I</mi><mo>:</mo><mtext>ç›¸åŒè°ƒç”¨é‡å¯èƒ½è¦</mtext></mrow><annotation encoding="application/x-tex">13 å·¦å³**
å¯¹æ¯” OpenAI:ç›¸åŒè°ƒç”¨é‡å¯èƒ½è¦ </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord">13</span><span class="mord cjk_fallback">å·¦å³</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"/><span class="mord">âˆ—</span><span class="mord cjk_fallback">å¯¹æ¯”</span><span class="mord mathnormal">Op</span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mord mathnormal">A</span><span class="mord mathnormal" style="margin-right:0.07847em;">I</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord cjk_fallback">ç›¸åŒè°ƒç”¨é‡å¯èƒ½è¦</span></span></span></span></span>50-100,Workers AI ç¡®å®ä¾¿å®œä¸å°‘ã€‚</li>
</ul>
<h2 data-id="heading-4">å¿«é€Ÿä¸Šæ‰‹:ä¸‰ç§æ–¹å¼è°ƒç”¨ Workers AI</h2>
<p>å‰ç½®å‡†å¤‡å¾ˆç®€å•:</p>
<ol>
<li>æ³¨å†Œ Cloudflare è´¦å·(å…è´¹)</li>
<li>å®‰è£… Node.js(å¦‚æœç”¨æ–¹å¼äºŒã€ä¸‰)
æ¥ä¸‹æ¥æˆ‘ä»‹ç»ä¸‰ç§è°ƒç”¨æ–¹å¼,ä»ç®€å•åˆ°è¿›é˜¶,ä½ å¯ä»¥æ ¹æ®è‡ªå·±éœ€æ±‚é€‰æ‹©ã€‚</li>
</ol>
<h3 data-id="heading-5">æ–¹å¼ä¸€:æœ€ç®€å• - ç›´æ¥ç”¨ REST API</h3>
<p>è¿™æ˜¯æœ€å¿«çš„ä½“éªŒæ–¹å¼,è¿ä»£ç éƒ½ä¸ç”¨å†™,ç”¨ curl å‘½ä»¤å°±èƒ½æµ‹è¯•ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fdaafb099ecf4a96ab1c39ea4c1a55ae~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oqA5pyv5o6i57Si5a62:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765536815&amp;x-signature=FGQ3RUu9WcinyymYBrl9rjh6nq4%3D" alt="20251201-workers-ai-tutorial-guide-zh.jpg" loading="lazy"/>
<strong>ç¬¬ä¸€æ­¥:è·å– API Token å’Œ Account ID</strong></p>
<ol>
<li>ç™»å½• Cloudflare,è®¿é—® <a href="https://link.juejin.cn?target=https%3A%2F%2Fdash.cloudflare.com" target="_blank" title="https://dash.cloudflare.com" ref="nofollow noopener noreferrer">dash.cloudflare.com</a></li>
<li>åœ°å€æ ä¼šæ˜¾ç¤º <code>https://dash.cloudflare.com/xxxxxxxxx</code>,è¿™ä¸² <code>xxxxxxxxx</code> å°±æ˜¯ä½ çš„ <strong>Account ID</strong>,å¤åˆ¶ä¿å­˜å¥½</li>
<li>ç‚¹å‡»å³ä¸Šè§’å¤´åƒ â†’ My Profile â†’ API Tokens</li>
<li>ç‚¹å‡»"Create Token" â†’ æ‰¾åˆ°"Workers AI"æ¨¡æ¿ â†’ "Use template"</li>
<li>ç»§ç»­åˆ°æœ€å,ä¼šç”Ÿæˆä¸€ä¸ª Token,<strong>è¿™ä¸ªåªæ˜¾ç¤ºä¸€æ¬¡,ä¸€å®šè¦ä¿å­˜å¥½</strong>
æˆ‘å½“æ—¶æ‰¾è¿™ä¸ª Token ä½ç½®ç¿»äº†å¥½ä¹…,æ‰€ä»¥ä¸“é—¨æˆªäº†å›¾(å¦‚æœä½ ä¹Ÿæ‰¾ä¸åˆ°,å¯ä»¥æœ Cloudflare API Tokens é¡µé¢)ã€‚</li>
</ol>
<p><strong>ç¬¬äºŒæ­¥:æµ‹è¯•è°ƒç”¨</strong>
æ‰“å¼€ç»ˆç«¯,è¿è¡Œè¿™ä¸ªå‘½ä»¤(è®°å¾—æ›¿æ¢ä½ çš„ Account ID å’Œ Token):</p>
<pre><code class="hljs language-bash" lang="bash">curl https://api.cloudflare.com/client/v4/accounts/{ä½ çš„Account_ID}/ai/run/@cf/meta/llama-3.1-8b-instruct \
  -H <span class="hljs-string">"Authorization: Bearer {ä½ çš„API_Token}"</span> \
  -H <span class="hljs-string">"Content-Type: application/json"</span> \
  -d <span class="hljs-string">'{
    "messages": [
      {"role": "system", "content": "ä½ æ˜¯ä¸€ä¸ªå‹å¥½çš„ AI åŠ©æ‰‹"},
      {"role": "user", "content": "ç”¨ä¸€å¥è¯ä»‹ç»ä¸€ä¸‹ Cloudflare Workers AI"}
    ]
  }'</span>
</code></pre>
<p>å¦‚æœçœ‹åˆ°è¿”å›ç±»ä¼¼è¿™æ ·çš„ JSON,å°±è¯´æ˜æˆåŠŸäº†:</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"result"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"response"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Cloudflare Workers AI æ˜¯ä¸€ä¸ªæ— æœåŠ¡å™¨çš„ AI æ¨ç†å¹³å°..."</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"success"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>ç¬¬ä¸€æ¬¡æˆåŠŸè¿”å›çš„æ—¶å€™,æˆ‘æ¿€åŠ¨å¾—æˆªäº†ä¸ªå›¾å‘æœ‹å‹åœˆğŸ˜‚
<strong>å¸¸è§é”™è¯¯å¤„ç†:</strong></p>
<ul>
<li><strong>é”™è¯¯ 7003</strong>: Token æˆ– Account ID å¡«é”™äº†,æ£€æŸ¥ä¸€ä¸‹æ˜¯å¦å®Œæ•´å¤åˆ¶</li>
<li><strong>é”™è¯¯ 10000</strong>: æ¨¡å‹åå­—å†™é”™äº†,æ³¨æ„æ˜¯ <code>@cf/meta/llama-3.1-8b-instruct</code>,ä¸è¦æ¼æ‰ <code>@cf/</code></li>
<li><strong>è¶…æ—¶</strong>: é¦–æ¬¡è°ƒç”¨å¯èƒ½æ…¢ä¸€ç‚¹(å†·å¯åŠ¨),ç­‰ 10 ç§’å·¦å³,åç»­å°±å¿«äº†</li>
</ul>
<h3 data-id="heading-6">æ–¹å¼äºŒ:æ¨è - ç”¨ Workers + Wrangler éƒ¨ç½²</h3>
<p>è¿™æ˜¯å®˜æ–¹æ¨èçš„æ–¹å¼,å¥½å¤„æ˜¯å¯ä»¥éƒ¨ç½²æˆä¸€ä¸ªæ°¸ä¹…å¯ç”¨çš„ API,è€Œä¸”é…ç½®ç®¡ç†æ›´æ–¹ä¾¿ã€‚</p>
<p><strong>ç¬¬ä¸€æ­¥:å®‰è£… Wrangler CLI</strong></p>
<pre><code class="hljs language-bash" lang="bash">npm install -g wrangler
</code></pre>
<p>ç„¶åç™»å½•ä½ çš„ Cloudflare è´¦å·:</p>
<pre><code class="hljs language-bash" lang="bash">wrangler login
</code></pre>
<p>ä¼šè‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨è®©ä½ æˆæƒ,ç‚¹åŒæ„å°±è¡Œã€‚</p>
<p><strong>ç¬¬äºŒæ­¥:åˆ›å»º Worker é¡¹ç›®</strong></p>
<pre><code class="hljs language-bash" lang="bash">npm create cloudflare@latest my-ai-worker
</code></pre>
<p>ä¼šé—®ä½ å‡ ä¸ªé—®é¢˜,æŒ‰è¿™æ ·é€‰æ‹©:</p>
<ul>
<li>Select a project type: "Hello World" Worker</li>
<li>Do you want to use TypeScript? çœ‹ä½ å–œæ¬¢,æˆ‘é€‰çš„ No(ç”¨ JavaScript)</li>
<li>Do you want to use git? Yes</li>
<li>Do you want to deploy? å…ˆé€‰ No,æµ‹è¯•å¥½å†éƒ¨ç½²</li>
</ul>
<p><strong>ç¬¬ä¸‰æ­¥:é…ç½® Workers AI ç»‘å®š</strong></p>
<p>è¿›å…¥é¡¹ç›®ç›®å½•,ç¼–è¾‘ <code>wrangler.toml</code> æ–‡ä»¶,åœ¨æœ€ååŠ ä¸Šè¿™å‡ è¡Œ:</p>
<pre><code class="hljs language-toml" lang="toml"><span class="hljs-section">[ai]</span>
<span class="hljs-attr">binding</span> = <span class="hljs-string">"AI"</span>
</code></pre>
<p>è¿™æ ·å°±å¯ä»¥åœ¨ä»£ç é‡Œç”¨ <code>env.AI</code> è®¿é—® Workers AI æœåŠ¡äº†,ä¸éœ€è¦æ‰‹åŠ¨ä¼  Tokenã€‚</p>
<p><strong>ç¬¬å››æ­¥:å†™ä»£ç </strong></p>
<p>ç¼–è¾‘ <code>src/index.js</code>(æˆ– <code>index.ts</code>),æŠŠå†…å®¹æ”¹æˆè¿™æ ·:</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-params">request, env</span>) {
    <span class="hljs-comment">// å¤„ç† CORS(å¦‚æœä½ è¦ä»ç½‘é¡µè°ƒç”¨)</span>
    <span class="hljs-keyword">if</span> (request.<span class="hljs-property">method</span> === <span class="hljs-string">'OPTIONS'</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Response</span>(<span class="hljs-literal">null</span>, {
        <span class="hljs-attr">headers</span>: {
          <span class="hljs-string">'Access-Control-Allow-Origin'</span>: <span class="hljs-string">'*'</span>,
          <span class="hljs-string">'Access-Control-Allow-Methods'</span>: <span class="hljs-string">'POST'</span>,
          <span class="hljs-string">'Access-Control-Allow-Headers'</span>: <span class="hljs-string">'Content-Type'</span>,
        },
      });
    }
    <span class="hljs-comment">// åªæ¥å— POST è¯·æ±‚</span>
    <span class="hljs-keyword">if</span> (request.<span class="hljs-property">method</span> !== <span class="hljs-string">'POST'</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Response</span>(<span class="hljs-string">'Method not allowed'</span>, { <span class="hljs-attr">status</span>: <span class="hljs-number">405</span> });
    }
    <span class="hljs-keyword">try</span> {
      <span class="hljs-comment">// è§£æè¯·æ±‚</span>
      <span class="hljs-keyword">const</span> { messages } = <span class="hljs-keyword">await</span> request.<span class="hljs-title function_">json</span>();
      <span class="hljs-comment">// è°ƒç”¨ AI æ¨¡å‹</span>
      <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> env.<span class="hljs-property">AI</span>.<span class="hljs-title function_">run</span>(<span class="hljs-string">'@cf/meta/llama-3.1-8b-instruct'</span>, {
        <span class="hljs-attr">messages</span>: messages || [
          { <span class="hljs-attr">role</span>: <span class="hljs-string">'user'</span>, <span class="hljs-attr">content</span>: <span class="hljs-string">'Hello!'</span> }
        ]
      });
      <span class="hljs-comment">// è¿”å›ç»“æœ</span>
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Response</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(response), {
        <span class="hljs-attr">headers</span>: {
          <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json'</span>,
          <span class="hljs-string">'Access-Control-Allow-Origin'</span>: <span class="hljs-string">'*'</span>,
        },
      });
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Response</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({ <span class="hljs-attr">error</span>: error.<span class="hljs-property">message</span> }), {
        <span class="hljs-attr">status</span>: <span class="hljs-number">500</span>,
        <span class="hljs-attr">headers</span>: { <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json'</span> },
      });
    }
  },
};
</code></pre>
<p><strong>ç¬¬äº”æ­¥:æœ¬åœ°æµ‹è¯•</strong></p>
<pre><code class="hljs language-bash" lang="bash">wrangler dev
</code></pre>
<p>ä¼šå¯åŠ¨ä¸€ä¸ªæœ¬åœ°æœåŠ¡å™¨,é€šå¸¸æ˜¯ <code>http://localhost:8787</code>ã€‚
ç”¨ curl æµ‹è¯•ä¸€ä¸‹:</p>
<pre><code class="hljs language-bash" lang="bash">curl http://localhost:8787 \
  -X POST \
  -H <span class="hljs-string">"Content-Type: application/json"</span> \
  -d <span class="hljs-string">'{
    "messages": [
      {"role": "user", "content": "ä»‹ç»ä¸€ä¸‹ä½ è‡ªå·±"}
    ]
  }'</span>
</code></pre>
<p>å¦‚æœè¿”å›æ­£å¸¸,å°±å¯ä»¥éƒ¨ç½²äº†ã€‚</p>
<p><strong>ç¬¬å…­æ­¥:éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ</strong></p>
<pre><code class="hljs language-bash" lang="bash">wrangler deploy
</code></pre>
<p>éƒ¨ç½²æˆåŠŸå,ä¼šç»™ä½ ä¸€ä¸ª <code>*.workers.dev</code> åŸŸå,æ¯”å¦‚:</p>
<pre><code class="hljs language-arduino" lang="arduino">https:<span class="hljs-comment">//my-ai-worker.your-name.workers.dev</span>
</code></pre>
<p>è¿™å°±æ˜¯ä½ çš„ AI API åœ°å€äº†,å¯ä»¥ä»ä»»ä½•åœ°æ–¹è°ƒç”¨ã€‚
æˆ‘ç°åœ¨ç”¨è¿™ä¸ªæ–¹å¼è·‘äº†ä¸ªå°å®¢æœæœºå™¨äºº,å®Œå…¨å…è´¹,å“åº”é€Ÿåº¦ä¹Ÿä¸é”™(é€šå¸¸ 1-3 ç§’)ã€‚</p>
<h3 data-id="heading-7">æ–¹å¼ä¸‰:ç”¨ OpenAI SDK æ— ç¼è¿ç§»</h3>
<p>å¦‚æœä½ ä¹‹å‰ç”¨çš„æ˜¯ OpenAI API,ç°åœ¨æƒ³æ¢æˆ Workers AI,è¿™ä¸ªæ–¹æ³•æœ€æ–¹ä¾¿ - <strong>ä»£ç å‡ ä¹ä¸ç”¨æ”¹</strong>ã€‚
Workers AI æä¾›äº† OpenAI å…¼å®¹çš„ç«¯ç‚¹,åªéœ€è¦æ”¹ä¸€ä¸‹ baseURL å°±è¡Œã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">OpenAI</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'openai'</span>;
<span class="hljs-keyword">const</span> client = <span class="hljs-keyword">new</span> <span class="hljs-title class_">OpenAI</span>({
  <span class="hljs-attr">apiKey</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">CLOUDFLARE_API_TOKEN</span>, <span class="hljs-comment">// ç”¨ä½ çš„ Cloudflare Token</span>
  <span class="hljs-attr">baseURL</span>: <span class="hljs-string">`https://api.cloudflare.com/client/v4/accounts/<span class="hljs-subst">${process.env.ACCOUNT_ID}</span>/ai/v1`</span>,
});
<span class="hljs-comment">// å’Œ OpenAI ä¸€æ¨¡ä¸€æ ·çš„è°ƒç”¨æ–¹å¼</span>
<span class="hljs-keyword">const</span> chatCompletion = <span class="hljs-keyword">await</span> client.<span class="hljs-property">chat</span>.<span class="hljs-property">completions</span>.<span class="hljs-title function_">create</span>({
  <span class="hljs-attr">model</span>: <span class="hljs-string">'@cf/meta/llama-3.1-8b-instruct'</span>, <span class="hljs-comment">// æ¢æˆ Workers AI çš„æ¨¡å‹å</span>
  <span class="hljs-attr">messages</span>: [
    { <span class="hljs-attr">role</span>: <span class="hljs-string">'system'</span>, <span class="hljs-attr">content</span>: <span class="hljs-string">'ä½ æ˜¯ä¸€ä¸ªå‹å¥½çš„ AI åŠ©æ‰‹'</span> },
    { <span class="hljs-attr">role</span>: <span class="hljs-string">'user'</span>, <span class="hljs-attr">content</span>: <span class="hljs-string">'Hello!'</span> }
  ],
});
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(chatCompletion.<span class="hljs-property">choices</span>[<span class="hljs-number">0</span>].<span class="hljs-property">message</span>.<span class="hljs-property">content</span>);
</code></pre>
<p><strong>æ³¨æ„äº‹é¡¹:</strong></p>
<ul>
<li><code>apiKey</code> ç”¨ Cloudflare çš„ API Token</li>
<li><code>baseURL</code> æ”¹æˆ Workers AI çš„ç«¯ç‚¹</li>
<li><code>model</code> æ”¹æˆ Workers AI æ”¯æŒçš„æ¨¡å‹å(å‰é¢è¦åŠ  <code>@cf/</code>)
æˆ‘ä¹‹å‰æœ‰ä¸ª Next.js é¡¹ç›®ç”¨çš„ OpenAI,è¿ç§»åˆ° Workers AI åªèŠ±äº† 10 åˆ†é’Ÿ,æ”¹äº†è¿™ä¸‰ä¸ªåœ°æ–¹å°±è¡Œã€‚</li>
</ul>
<h2 data-id="heading-8">èƒ½ç”¨å“ªäº›æ¨¡å‹?æ€ä¹ˆé€‰?</h2>
<p>Workers AI ç°åœ¨æ”¯æŒ 50 å¤šä¸ªæ¨¡å‹,æˆ‘æŒ‘å‡ ä¸ªå¸¸ç”¨çš„ä»‹ç»ä¸€ä¸‹ã€‚</p>
<h3 data-id="heading-9">æ–‡æœ¬ç”Ÿæˆæ¨¡å‹(æœ€å¸¸ç”¨)</h3>





























































<table><thead><tr><th>æ¨¡å‹</th><th>å‚æ•°é‡</th><th>ç‰¹ç‚¹</th><th>æ¨èåœºæ™¯</th><th>æ¨¡å‹ ID</th></tr></thead><tbody><tr><td><strong>Llama 3.1</strong></td><td>8B</td><td>å¹³è¡¡æ€§å¥½,é€Ÿåº¦å¿«</td><td>æ—¥å¸¸å¯¹è¯ã€å®¢æœã€æ‘˜è¦</td><td><code>@cf/meta/llama-3.1-8b-instruct</code></td></tr><tr><td><strong>Llama 3.1</strong></td><td>70B</td><td>è´¨é‡æ›´é«˜,æ…¢ä¸€ç‚¹</td><td>å¤æ‚æ¨ç†ã€é•¿æ–‡æœ¬</td><td><code>@cf/meta/llama-3.1-70b-instruct</code></td></tr><tr><td><strong>Llama 4 Scout</strong></td><td>17B(MoE)</td><td>å¤šæ¨¡æ€(å›¾æ–‡)</td><td>å›¾åƒç†è§£+æ–‡æœ¬</td><td><code>@cf/meta/llama-4-scout</code></td></tr><tr><td><strong>Mistral 7B v0.2</strong></td><td>7B</td><td>32k ä¸Šä¸‹æ–‡</td><td>é•¿æ–‡æ¡£åˆ†æ</td><td><code>@cf/mistral/mistral-7b-instruct-v0.2</code></td></tr><tr><td><strong>DeepSeek-R1</strong></td><td>32B</td><td>æ¨ç†èƒ½åŠ›å¼º</td><td>æ•°å­¦ã€ä»£ç ã€é€»è¾‘</td><td><code>@cf/deepseek/deepseek-r1-distill-qwen-32b</code></td></tr><tr><td><strong>OpenAI GPT-OSS</strong></td><td>120B/20B</td><td>Cloudflare ç‹¬å®¶</td><td>æ¥è¿‘ GPT-4 çº§åˆ«</td><td><code>@cf/openai/gpt-oss-120b</code></td></tr><tr><td><strong>æˆ‘çš„é€‰æ‹©å»ºè®®:</strong></td><td/><td/><td/><td/></tr></tbody></table>
<ol>
<li><strong>åˆæ¬¡å°è¯•ç”¨ Llama 3.1-8B</strong>
<ul>
<li>å“åº”å¿«(1-2 ç§’)</li>
<li>è´¨é‡å¤Ÿç”¨,ä¸è¾“ GPT-3.5</li>
<li>å…è´¹é¢åº¦æ¶ˆè€—å°‘</li>
</ul>
</li>
<li><strong>è¦æ±‚é«˜ä¸€ç‚¹ç”¨ Llama 3.1-70B æˆ– DeepSeek-R1</strong>
<ul>
<li>æ¨ç†èƒ½åŠ›æ›´å¼º</li>
<li>ç”Ÿæˆè´¨é‡æ¥è¿‘ GPT-4</li>
<li>å°±æ˜¯æ…¢ä¸€ç‚¹(3-5 ç§’),æ¶ˆè€—ä¹Ÿå¤š 3-4 å€</li>
</ul>
</li>
<li><strong>é•¿æ–‡æ¡£åˆ†æç”¨ Mistral 7B v0.2</strong>
<ul>
<li>æ”¯æŒ 32k ä¸Šä¸‹æ–‡çª—å£(Llama 3.1 åªæœ‰ 8k)</li>
<li>é€‚åˆå¤„ç†é•¿è®ºæ–‡ã€é•¿ä»£ç </li>
</ul>
</li>
</ol>
<h3 data-id="heading-10">å…¶ä»–å®ç”¨æ¨¡å‹</h3>
<ul>
<li><strong>å›¾åƒç”Ÿæˆ</strong>: Stable Diffusion XL - <code>@cf/stabilityai/stable-diffusion-xl-base-1.0</code></li>
<li><strong>è¯­éŸ³è¯†åˆ«</strong>: Whisper - <code>@cf/openai/whisper</code></li>
<li><strong>æ–‡æœ¬åµŒå…¥</strong>: BGE-base - <code>@cf/baai/bge-base-en-v1.5</code>(åšå‘é‡æœç´¢ç”¨)</li>
<li><strong>å†…å®¹å®‰å…¨</strong>: Llama Guard 3 - <code>@cf/meta/llama-guard-3-8b</code>(æ£€æµ‹æœ‰å®³å†…å®¹)
å®Œæ•´æ¨¡å‹åˆ—è¡¨å¯ä»¥çœ‹å®˜æ–¹æ–‡æ¡£: <a href="https://link.juejin.cn?target=https%3A%2F%2Fdevelopers.cloudflare.com%2Fworkers-ai%2Fmodels%2F" target="_blank" title="https://developers.cloudflare.com/workers-ai/models/" ref="nofollow noopener noreferrer">developers.cloudflare.com/workers-ai/â€¦</a></li>
</ul>
<h2 data-id="heading-11">å®æˆ˜æ¡ˆä¾‹:ä¸‰ä¸ªçœŸå®ä¾‹å­</h2>
<h3 data-id="heading-12">æ¡ˆä¾‹1:æ„å»ºæ™ºèƒ½é—®ç­” API(æœ€ç®€å•)</h3>
<p><strong>åœºæ™¯:</strong> ç»™ä½ çš„åšå®¢æˆ–æ–‡æ¡£ç«™åŠ ä¸€ä¸ª AI å®¢æœã€‚
å®Œæ•´ä»£ç (åŸºäºæ–¹å¼äºŒ):</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-params">request, env</span>) {
    <span class="hljs-comment">// å…è®¸è·¨åŸŸ</span>
    <span class="hljs-keyword">const</span> corsHeaders = {
      <span class="hljs-string">'Access-Control-Allow-Origin'</span>: <span class="hljs-string">'*'</span>,
      <span class="hljs-string">'Access-Control-Allow-Methods'</span>: <span class="hljs-string">'POST, OPTIONS'</span>,
      <span class="hljs-string">'Access-Control-Allow-Headers'</span>: <span class="hljs-string">'Content-Type'</span>,
    };
    <span class="hljs-keyword">if</span> (request.<span class="hljs-property">method</span> === <span class="hljs-string">'OPTIONS'</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Response</span>(<span class="hljs-literal">null</span>, { <span class="hljs-attr">headers</span>: corsHeaders });
    }
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> { question } = <span class="hljs-keyword">await</span> request.<span class="hljs-title function_">json</span>();
      <span class="hljs-comment">// ä½ å¯ä»¥åœ¨ system æç¤ºè¯é‡ŒåŠ ä¸Šä½ ç½‘ç«™çš„èƒŒæ™¯çŸ¥è¯†</span>
      <span class="hljs-keyword">const</span> messages = [
        {
          <span class="hljs-attr">role</span>: <span class="hljs-string">'system'</span>,
          <span class="hljs-attr">content</span>: <span class="hljs-string">'ä½ æ˜¯ä¸€ä¸ªæŠ€æœ¯åšå®¢çš„ AI åŠ©æ‰‹,ä¸»è¦å›ç­”å…³äº Web å¼€å‘ã€AI åº”ç”¨çš„é—®é¢˜ã€‚å›ç­”è¦ç®€æ´ã€å‹å¥½ã€‚'</span>
        },
        {
          <span class="hljs-attr">role</span>: <span class="hljs-string">'user'</span>,
          <span class="hljs-attr">content</span>: question
        }
      ];
      <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> env.<span class="hljs-property">AI</span>.<span class="hljs-title function_">run</span>(
        <span class="hljs-string">'@cf/meta/llama-3.1-8b-instruct'</span>,
        { messages }
      );
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Response</span>(
        <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({ <span class="hljs-attr">answer</span>: response.<span class="hljs-property">response</span> }),
        { <span class="hljs-attr">headers</span>: { ...corsHeaders, <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json'</span> } }
      );
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Response</span>(
        <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({ <span class="hljs-attr">error</span>: <span class="hljs-string">'å¤„ç†å¤±è´¥,è¯·ç¨åé‡è¯•'</span> }),
        { <span class="hljs-attr">status</span>: <span class="hljs-number">500</span>, <span class="hljs-attr">headers</span>: { ...corsHeaders, <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json'</span> } }
      );
    }
  }
};
</code></pre>
<p><strong>å‰ç«¯è°ƒç”¨:</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">askQuestion</span>(<span class="hljs-params">question</span>) {
  <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'https://your-worker.workers.dev'</span>, {
    <span class="hljs-attr">method</span>: <span class="hljs-string">'POST'</span>,
    <span class="hljs-attr">headers</span>: { <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json'</span> },
    <span class="hljs-attr">body</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({ question })
  });
  <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> response.<span class="hljs-title function_">json</span>();
  <span class="hljs-keyword">return</span> data.<span class="hljs-property">answer</span>;
}
<span class="hljs-comment">// ä½¿ç”¨</span>
<span class="hljs-keyword">const</span> answer = <span class="hljs-keyword">await</span> <span class="hljs-title function_">askQuestion</span>(<span class="hljs-string">'Workers AI æ€ä¹ˆæ”¶è´¹?'</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(answer);
</code></pre>
<p><strong>æˆæœ¬ä¼°ç®—:</strong> å‡è®¾æ¯å¤©æœ‰ 200 ä¸ªç”¨æˆ·æé—®,æ¯æ¬¡å¯¹è¯æ¶ˆè€— 10 Neurons,æ€»å…± 2000 Neurons,å®Œå…¨åœ¨å…è´¹é¢åº¦å†…ã€‚</p>
<h3 data-id="heading-13">æ¡ˆä¾‹2:æ‰¹é‡æ–‡æœ¬æ‘˜è¦ç”Ÿæˆ</h3>
<p><strong>åœºæ™¯:</strong> ä½ æœ‰ä¸€å †æ–‡ç« éœ€è¦ç”Ÿæˆæ‘˜è¦,æ¯”å¦‚ RSS è®¢é˜…ã€æ–°é—»æŠ“å–ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">generateSummary</span>(<span class="hljs-params">text, env</span>) {
  <span class="hljs-keyword">const</span> messages = [
    {
      <span class="hljs-attr">role</span>: <span class="hljs-string">'system'</span>,
      <span class="hljs-attr">content</span>: <span class="hljs-string">'ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„æ–‡æœ¬æ‘˜è¦åŠ©æ‰‹ã€‚è¯·å°†ç”¨æˆ·æä¾›çš„æ–‡ç« æ€»ç»“æˆ 2-3 å¥è¯,çªå‡ºæ ¸å¿ƒè§‚ç‚¹ã€‚'</span>
    },
    {
      <span class="hljs-attr">role</span>: <span class="hljs-string">'user'</span>,
      <span class="hljs-attr">content</span>: <span class="hljs-string">`è¯·æ€»ç»“ä»¥ä¸‹æ–‡ç« :\n\n<span class="hljs-subst">${text}</span>`</span>
    }
  ];
  <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> env.<span class="hljs-property">AI</span>.<span class="hljs-title function_">run</span>(
    <span class="hljs-string">'@cf/meta/llama-3.1-8b-instruct'</span>,
    {
      messages,
      <span class="hljs-attr">max_tokens</span>: <span class="hljs-number">150</span> <span class="hljs-comment">// é™åˆ¶è¾“å‡ºé•¿åº¦,èŠ‚çœ Neurons</span>
    }
  );
  <span class="hljs-keyword">return</span> response.<span class="hljs-property">response</span>;
}
<span class="hljs-comment">// æ‰¹é‡å¤„ç†</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-params">request, env</span>) {
    <span class="hljs-keyword">const</span> { articles } = <span class="hljs-keyword">await</span> request.<span class="hljs-title function_">json</span>(); <span class="hljs-comment">// å‡è®¾ä¼ å…¥æ–‡ç« æ•°ç»„</span>
    <span class="hljs-keyword">const</span> summaries = [];
    <span class="hljs-comment">// æ³¨æ„é€Ÿç‡é™åˆ¶: 300 è¯·æ±‚/åˆ†é’Ÿ,æ‰€ä»¥è¦æ§åˆ¶å¹¶å‘</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> article <span class="hljs-keyword">of</span> articles) {
      <span class="hljs-keyword">const</span> summary = <span class="hljs-keyword">await</span> <span class="hljs-title function_">generateSummary</span>(article.<span class="hljs-property">content</span>, env);
      summaries.<span class="hljs-title function_">push</span>({ <span class="hljs-attr">title</span>: article.<span class="hljs-property">title</span>, summary });
      <span class="hljs-comment">// ç®€å•çš„é€Ÿç‡æ§åˆ¶(å®é™…åº”è¯¥ç”¨æ›´æ™ºèƒ½çš„é˜Ÿåˆ—)</span>
      <span class="hljs-keyword">await</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function"><span class="hljs-params">resolve</span> =&gt;</span> <span class="hljs-built_in">setTimeout</span>(resolve, <span class="hljs-number">200</span>)); <span class="hljs-comment">// æ¯æ¬¡é—´éš” 200ms</span>
    }
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Response</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(summaries), {
      <span class="hljs-attr">headers</span>: { <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json'</span> }
    });
  }
};
</code></pre>
<p><strong>æ³¨æ„é€Ÿç‡é™åˆ¶:</strong></p>
<ul>
<li>Llama 3.1-8B é™åˆ¶æ˜¯ 300 è¯·æ±‚/åˆ†é’Ÿ</li>
<li>å¦‚æœè¦æ‰¹é‡å¤„ç†,è®°å¾—åŠ å»¶è¿Ÿæˆ–ç”¨é˜Ÿåˆ—</li>
<li>æˆ‘ä¸€èˆ¬ç”¨ <code>p-queue</code> è¿™ä¸ª npm åŒ…æ§åˆ¶å¹¶å‘
<strong>æˆæœ¬è®¡ç®—å®ä¾‹:</strong></li>
<li>å‡è®¾æ¯ç¯‡æ–‡ç«  1000 å­—,ç”Ÿæˆ 100 å­—æ‘˜è¦</li>
<li>æ¯æ¬¡æ¶ˆè€—çº¦ 30 Neurons</li>
<li>å¤„ç† 300 ç¯‡æ–‡ç«  = 9000 Neurons,è¿˜åœ¨å…è´¹é¢åº¦å†…</li>
</ul>
<h3 data-id="heading-14">æ¡ˆä¾‹3:å¤šè¯­è¨€ç¿»è¯‘æœåŠ¡(æ¯” Google Translate ä¾¿å®œ)</h3>
<p><strong>åœºæ™¯:</strong> åšä¸€ä¸ªç¿»è¯‘å·¥å…·,æˆ–è€…ç»™ä½ çš„åº”ç”¨åŠ å›½é™…åŒ–æ”¯æŒã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">translate</span>(<span class="hljs-params">text, targetLang, env</span>) {
  <span class="hljs-keyword">const</span> messages = [
    {
      <span class="hljs-attr">role</span>: <span class="hljs-string">'system'</span>,
      <span class="hljs-attr">content</span>: <span class="hljs-string">`ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„ç¿»è¯‘åŠ©æ‰‹ã€‚å°†ç”¨æˆ·è¾“å…¥ç¿»è¯‘æˆ <span class="hljs-subst">${targetLang}</span>,ä¿æŒåŸæ–‡é£æ ¼å’Œè¯­æ°”ã€‚åªè¿”å›ç¿»è¯‘ç»“æœ,ä¸è¦åŠ ä»»ä½•è§£é‡Šã€‚`</span>
    },
    {
      <span class="hljs-attr">role</span>: <span class="hljs-string">'user'</span>,
      <span class="hljs-attr">content</span>: text
    }
  ];
  <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> env.<span class="hljs-property">AI</span>.<span class="hljs-title function_">run</span>(
    <span class="hljs-string">'@cf/meta/llama-3.1-8b-instruct'</span>, <span class="hljs-comment">// Llama 3.1 æ”¯æŒå¤šè¯­è¨€</span>
    { messages }
  );
  <span class="hljs-keyword">return</span> response.<span class="hljs-property">response</span>;
}
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-params">request, env</span>) {
    <span class="hljs-keyword">const</span> { text, targetLang } = <span class="hljs-keyword">await</span> request.<span class="hljs-title function_">json</span>();
    <span class="hljs-keyword">const</span> translation = <span class="hljs-keyword">await</span> <span class="hljs-title function_">translate</span>(text, targetLang, env);
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Response</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({ translation }), {
      <span class="hljs-attr">headers</span>: { <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json'</span> }
    });
  }
};
</code></pre>
<p><strong>æˆæœ¬å¯¹æ¯”:</strong></p>
<ul>
<li><strong>Google Cloud Translation API</strong>: $20/ç™¾ä¸‡å­—ç¬¦</li>
<li><strong>Workers AI(Llama 3.1)</strong>: å‡è®¾ 100 å­—æ–‡æœ¬æ¶ˆè€— 15 Neurons
<ul>
<li>ç™¾ä¸‡å­—ç¬¦ = 10,000 æ¬¡è°ƒç”¨ = 150,000 Neurons</li>
<li>æˆæœ¬: 150,000/1000 Ã— <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0.011</mn><mo>=</mo><mo>âˆ—</mo><mo>âˆ—</mo></mrow><annotation encoding="application/x-tex">0.011 = **</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">0.011</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.4653em;"/><span class="mord">âˆ—</span><span class="mord">âˆ—</span></span></span></span></span>1.65**
ä¾¿å®œäº† 10 å€ä»¥ä¸Š!å½“ç„¶,Google Translate å‡†ç¡®åº¦å¯èƒ½ç¨é«˜ä¸€ç‚¹,ä½† Llama 3.1 çš„ç¿»è¯‘è´¨é‡æˆ‘è§‰å¾—ä¹Ÿå¤Ÿç”¨äº†ã€‚</li>
</ul>
</li>
</ul>
<h2 data-id="heading-15">è¿›é˜¶æŠ€å·§:ä¼˜åŒ–æ€§èƒ½å’Œæˆæœ¬</h2>
<h3 data-id="heading-16">1. ä½¿ç”¨æµå¼å“åº”å‡å°‘ç­‰å¾…æ—¶é—´</h3>
<p>å¯¹äºé•¿æ–‡æœ¬ç”Ÿæˆ,å¯ä»¥ç”¨æµå¼å“åº”,è®©ç”¨æˆ·çœ‹åˆ°é€å­—è¾“å‡º(åƒ ChatGPT é‚£æ ·)ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> env.<span class="hljs-property">AI</span>.<span class="hljs-title function_">run</span>(
  <span class="hljs-string">'@cf/meta/llama-3.1-8b-instruct'</span>,
  {
    messages,
    <span class="hljs-attr">stream</span>: <span class="hljs-literal">true</span> <span class="hljs-comment">// å¼€å¯æµå¼å“åº”</span>
  }
);
<span class="hljs-comment">// è¿”å›æµå¼å“åº”</span>
<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Response</span>(response, {
  <span class="hljs-attr">headers</span>: { <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'text/event-stream'</span> }
});
</code></pre>
<p>å‰ç«¯ç”¨ Server-Sent Events(SSE)æ¥æ”¶:</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> eventSource = <span class="hljs-keyword">new</span> <span class="hljs-title class_">EventSource</span>(<span class="hljs-string">'https://your-worker.workers.dev'</span>);
eventSource.<span class="hljs-property">onmessage</span> = <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> data = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(event.<span class="hljs-property">data</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data.<span class="hljs-property">response</span>); <span class="hljs-comment">// é€å­—æ˜¾ç¤º</span>
};
</code></pre>
<h3 data-id="heading-17">2. è®¾ç½® max_tokens æ§åˆ¶æˆæœ¬</h3>
<p>å¦‚æœä½ ä¸éœ€è¦å¾ˆé•¿çš„å›å¤,å¯ä»¥é™åˆ¶è¾“å‡ºé•¿åº¦:</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> env.<span class="hljs-property">AI</span>.<span class="hljs-title function_">run</span>(
  <span class="hljs-string">'@cf/meta/llama-3.1-8b-instruct'</span>,
  {
    messages,
    <span class="hljs-attr">max_tokens</span>: <span class="hljs-number">100</span> <span class="hljs-comment">// æœ€å¤šç”Ÿæˆ 100 ä¸ª token</span>
  }
);
</code></pre>
<p>è¿™æ ·èƒ½èŠ‚çœä¸å°‘ Neurons,å°¤å…¶æ˜¯æ‰¹é‡å¤„ç†çš„æ—¶å€™ã€‚</p>
<h3 data-id="heading-18">3. ç”¨ Cloudflare AI Gateway åšç¼“å­˜å’Œç›‘æ§</h3>
<p>Cloudflare è¿˜æœ‰ä¸ª AI Gateway æœåŠ¡,å¯ä»¥:</p>
<ul>
<li><strong>ç¼“å­˜ç›¸åŒè¯·æ±‚çš„ç»“æœ</strong>(èŠ‚çœ Neurons)</li>
<li><strong>ç›‘æ§ API è°ƒç”¨ç»Ÿè®¡</strong></li>
<li><strong>é™æµä¿æŠ¤</strong>(é˜²æ­¢æ»¥ç”¨)
é…ç½®å¾ˆç®€å•,åœ¨ <code>wrangler.toml</code> é‡ŒåŠ :</li>
</ul>
<pre><code class="hljs language-toml" lang="toml"><span class="hljs-section">[ai]</span>
<span class="hljs-attr">binding</span> = <span class="hljs-string">"AI"</span>
<span class="hljs-attr">gateway</span> = <span class="hljs-string">"my-gateway"</span> <span class="hljs-comment"># ä½ çš„ AI Gateway åå­—</span>
</code></pre>
<p>ç„¶ååœ¨ Cloudflare Dashboard â†’ AI Gateway é‡Œåˆ›å»ºä¸€ä¸ª Gatewayã€‚
æˆ‘ç°åœ¨ç”¨è¿™ä¸ªæ¥ç›‘æ§æˆ‘çš„ Worker,å¯ä»¥çœ‹åˆ°æ¯å¤©æ¶ˆè€—äº†å¤šå°‘ Neurons,å“ªäº›è¯·æ±‚æœ€æ…¢,æŒºæ–¹ä¾¿çš„ã€‚</p>
<h3 data-id="heading-19">4. ä¸å…¶ä»–æœåŠ¡é›†æˆ</h3>
<p><strong>é›†æˆåˆ° Next.js åº”ç”¨:</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// app/api/ai/route.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">NextRequest</span>, <span class="hljs-title class_">NextResponse</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'next/server'</span>;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> runtime = <span class="hljs-string">'edge'</span>; <span class="hljs-comment">// é‡è¦: ç”¨ Edge Runtime</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">POST</span>(<span class="hljs-params">request: NextRequest</span>) {
  <span class="hljs-keyword">const</span> { messages } = <span class="hljs-keyword">await</span> request.<span class="hljs-title function_">json</span>();
  <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(
    <span class="hljs-string">`https://api.cloudflare.com/client/v4/accounts/<span class="hljs-subst">${process.env.ACCOUNT_ID}</span>/ai/run/@cf/meta/llama-3.1-8b-instruct`</span>,
    {
      <span class="hljs-attr">method</span>: <span class="hljs-string">'POST'</span>,
      <span class="hljs-attr">headers</span>: {
        <span class="hljs-string">'Authorization'</span>: <span class="hljs-string">`Bearer <span class="hljs-subst">${process.env.CF_API_TOKEN}</span>`</span>,
        <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json'</span>,
      },
      <span class="hljs-attr">body</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({ messages }),
    }
  );
  <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> response.<span class="hljs-title function_">json</span>();
  <span class="hljs-keyword">return</span> <span class="hljs-title class_">NextResponse</span>.<span class="hljs-title function_">json</span>(data);
}
</code></pre>
<p><strong>ç»“åˆ Cloudflare Pages éƒ¨ç½²å‰ç«¯:</strong>
ä½ å¯ä»¥æŠŠå‰ç«¯éƒ¨ç½²åˆ° Cloudflare Pages,åç«¯ç”¨ Workers AI,å…¨éƒ¨åœ¨ Cloudflare ç”Ÿæ€å†…,é€Ÿåº¦æ›´å¿«è€Œä¸”éƒ½å…è´¹ã€‚
æˆ‘ç°åœ¨æœ‰ä¸ªé¡¹ç›®å°±æ˜¯è¿™ä¹ˆéƒ¨ç½²çš„,å‰ç«¯ + åç«¯ä¸€åˆ†é’±æ²¡èŠ±ã€‚</p>
<h2 data-id="heading-20">å¸¸è§é—®é¢˜è§£ç­”</h2>
<h3 data-id="heading-21">Q1: å¦‚ä½•è·å– API Token?</h3>
<p>A: Dashboard â†’ My Profile â†’ API Tokens â†’ Create Token â†’ é€‰æ‹© "Workers AI" æ¨¡æ¿ã€‚è®°å¾—ä¿å­˜å¥½,åªæ˜¾ç¤ºä¸€æ¬¡ã€‚</p>
<h3 data-id="heading-22">Q2: Account ID åœ¨å“ªé‡Œæ‰¾?</h3>
<p>A: ç™»å½•åçœ‹åœ°å€æ ,<code>https://dash.cloudflare.com/xxxxxxxxx</code>,é‚£ä¸² <code>xxxxxxxxx</code> å°±æ˜¯ã€‚</p>
<h3 data-id="heading-23">Q3: Token æ³„éœ²äº†æ€ä¹ˆåŠ?</h3>
<p>A: ç«‹å³å» API Tokens é¡µé¢æ’¤é”€(Revoke)æ—§ Token,ç„¶åé‡æ–°ç”Ÿæˆä¸€ä¸ªã€‚</p>
<h3 data-id="heading-24">Q4: å…è´¹é¢åº¦ç”¨å®Œäº†æ€ä¹ˆåŠ?</h3>
<p>A: ä¼šè‡ªåŠ¨è½¬æˆä»˜è´¹æ¨¡å¼,æŒ‰ $0.011/1000 Neurons è®¡è´¹ã€‚ä½ å¯ä»¥åœ¨ Dashboard è®¾ç½®ç”¨é‡æé†’,é¿å…è¶…æ”¯ã€‚</p>
<h3 data-id="heading-25">Q5: é‡åˆ°é€Ÿç‡é™åˆ¶æ€ä¹ˆå¤„ç†?</h3>
<p>A: å¤§å¤šæ•° LLM é™åˆ¶æ˜¯ 300 è¯·æ±‚/åˆ†é’Ÿã€‚å¦‚æœè¶…äº†:</p>
<ul>
<li>åŠ å»¶è¿Ÿæ§åˆ¶è¯·æ±‚é¢‘ç‡</li>
<li>ç”¨é˜Ÿåˆ—ç³»ç»Ÿç¼“å†²è¯·æ±‚</li>
<li>è€ƒè™‘å‡çº§åˆ°ä»˜è´¹è®¡åˆ’(ä¼šæœ‰æ›´é«˜é™åˆ¶)</li>
</ul>
<h3 data-id="heading-26">Q6: å“ªäº›åœ°åŒºå¯ä»¥ä½¿ç”¨?</h3>
<p>A: å…¨çƒéƒ½å¯ä»¥,Cloudflare æœ‰ 300+ ä¸ªè¾¹ç¼˜èŠ‚ç‚¹ã€‚ä½†ä¸­å›½å¤§é™†è®¿é—®å¯èƒ½éœ€è¦ç‰¹æ®Šç½‘ç»œã€‚</p>
<h3 data-id="heading-27">Q7: æ¨¡å‹è¾“å‡ºè´¨é‡ä¸å¦‚é¢„æœŸæ€ä¹ˆåŠ?</h3>
<p>A: å‡ ä¸ªå»ºè®®:</p>
<ul>
<li>ä¼˜åŒ– prompt,å¤šç»™ä¸€äº›ç¤ºä¾‹(few-shot learning)</li>
<li>æ¢æ›´å¤§çš„æ¨¡å‹,æ¯”å¦‚ä» 8B æ¢åˆ° 70B</li>
<li>è°ƒæ•´ temperature å‚æ•°(é»˜è®¤ 1.0,é™ä½ä¼šæ›´ç¨³å®š)</li>
</ul>
<h3 data-id="heading-28">Q8: å¯ä»¥å¾®è°ƒæ¨¡å‹å—?</h3>
<p>A: Workers AI ç°åœ¨æ”¯æŒ LoRA å¾®è°ƒ(2024å¹´æ–°å¢åŠŸèƒ½),ä½†è¿™æ˜¯ä»˜è´¹åŠŸèƒ½,è€Œä¸”éœ€è¦ä¸€å®šçš„æœºå™¨å­¦ä¹ çŸ¥è¯†ã€‚å¯¹å¤§å¤šæ•°äººæ¥è¯´,ä¼˜åŒ– prompt å°±å¤Ÿäº†ã€‚</p>
<h3 data-id="heading-29">Q9: å¦‚ä½•ç›‘æ§ç”¨é‡?</h3>
<p>A: Cloudflare Dashboard â†’ Workers AI â†’ Analytics,å¯ä»¥çœ‹åˆ°:</p>
<ul>
<li>æ¯å¤©æ¶ˆè€—çš„ Neurons</li>
<li>è¯·æ±‚æ¬¡æ•°å’ŒæˆåŠŸç‡</li>
<li>å¹³å‡å“åº”æ—¶é—´
å»ºè®®å®šæœŸæ£€æŸ¥,é¿å…è¶…é¢ã€‚</li>
</ul>
<h3 data-id="heading-30">Q10: æ”¯æŒå“ªäº›ç¼–ç¨‹è¯­è¨€?</h3>
<p>A: å®˜æ–¹æ”¯æŒ:</p>
<ul>
<li>JavaScript/TypeScript(Workers)</li>
<li>Python(é€šè¿‡ REST API)</li>
<li>ä»»ä½•èƒ½å‘ HTTP è¯·æ±‚çš„è¯­è¨€
ç”¨ REST API çš„è¯,ä»€ä¹ˆè¯­è¨€éƒ½èƒ½è°ƒç”¨ã€‚</li>
</ul>
<h2 data-id="heading-31">æ€»ç»“:Workers AI å€¼å¾—å°è¯•å—?</h2>
<p>æµ‹è¯•äº†ä¸€ä¸ªæœˆå,æˆ‘çš„ç»“è®ºæ˜¯:<strong>å¯¹ä¸ªäººå¼€å‘è€…å’Œå°å›¢é˜Ÿæ¥è¯´,éå¸¸å€¼å¾—ã€‚</strong>
<strong>ä¼˜ç‚¹:</strong></p>
<ul>
<li>âœ… å…è´¹é¢åº¦æ…·æ…¨(æ¯å¤© 10,000 Neurons)</li>
<li>âœ… ä»˜è´¹ä»·æ ¼ä¾¿å®œ(æ¯” OpenAI ä¾¿å®œ 60-90%)</li>
<li>âœ… ä¸Šæ‰‹ç®€å•(æœ‰ REST API å’Œ OpenAI å…¼å®¹æ¥å£)</li>
<li>âœ… å“åº”é€Ÿåº¦å¿«(å…¨çƒè¾¹ç¼˜ç½‘ç»œ)</li>
<li>âœ… æ¨¡å‹é€‰æ‹©å¤š(50+ å¼€æºæ¨¡å‹)
<strong>ç¼ºç‚¹:</strong></li>
<li>âš ï¸ æ¨¡å‹è´¨é‡ç•¥é€Šäº GPT-4(ä½†æ¥è¿‘ GPT-3.5)</li>
<li>âš ï¸ é€Ÿç‡é™åˆ¶(300 è¯·æ±‚/åˆ†é’Ÿ,å¤§è§„æ¨¡åº”ç”¨å¯èƒ½ä¸å¤Ÿ)</li>
<li>âš ï¸ æ–‡æ¡£è¿˜ä¸å¤Ÿå®Œå–„(æœ‰äº›åŠŸèƒ½è¦è‡ªå·±æ‘¸ç´¢)
<strong>æˆ‘çš„å»ºè®®:</strong></li>
</ul>
<ol>
<li><strong>ä¸ªäººé¡¹ç›®ç›´æ¥ä¸Š</strong>,å…è´¹é¢åº¦è¶³å¤Ÿ,è€Œä¸”çœäº†æœåŠ¡å™¨æˆæœ¬</li>
<li><strong>åˆ›ä¸šé¡¹ç›®å¯ä»¥å…ˆç”¨</strong>,ç­‰è§„æ¨¡ä¸Šæ¥å†è€ƒè™‘è¿ç§»åˆ°å…¶ä»–æ–¹æ¡ˆ</li>
<li><strong>ä¼ä¸šåº”ç”¨è°¨æ…è¯„ä¼°</strong>,è¦è€ƒè™‘ SLAã€æ•°æ®åˆè§„æ€§ç­‰é—®é¢˜
å¦‚æœä½ ä¹Ÿåœ¨æ‰¾ä½æˆæœ¬çš„ AI æ–¹æ¡ˆ,ä¸å¦¨è¯•è¯• Workers AIã€‚æ³¨å†Œè´¦å· 5 åˆ†é’Ÿ,è·‘é€šç¬¬ä¸€ä¸ªä¾‹å­ä¹Ÿå°± 15 åˆ†é’Ÿ,ä¸‡ä¸€é€‚åˆä½ å‘¢?</li>
</ol>
<h2 data-id="heading-32">å»¶ä¼¸å­¦ä¹ èµ„æº</h2>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdevelopers.cloudflare.com%2Fworkers-ai%2F" target="_blank" title="https://developers.cloudflare.com/workers-ai/" ref="nofollow noopener noreferrer">Cloudflare Workers AI å®˜æ–¹æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdevelopers.cloudflare.com%2Fworkers-ai%2Fmodels%2F" target="_blank" title="https://developers.cloudflare.com/workers-ai/models/" ref="nofollow noopener noreferrer">Workers AI æ¨¡å‹ç›®å½•</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fplayground.ai.cloudflare.com%2F" target="_blank" title="https://playground.ai.cloudflare.com/" ref="nofollow noopener noreferrer">Workers AI Playground</a> - åœ¨çº¿æµ‹è¯•å„ä¸ªæ¨¡å‹</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fcommunity.cloudflare.com%2Fc%2Fdevelopers%2Fworkers-ai%2F" target="_blank" title="https://community.cloudflare.com/c/developers/workers-ai/" ref="nofollow noopener noreferrer">Cloudflare Community</a> - æœ‰é—®é¢˜å¯ä»¥åœ¨è¿™é‡Œé—®</li>
</ul>
<hr/>
<p><strong>æ¬¢è¿åœ¨è¯„è®ºåŒºåˆ†äº«:</strong></p>
<ul>
<li>ä½ ç”¨ Workers AI åšäº†ä»€ä¹ˆé¡¹ç›®?</li>
<li>é‡åˆ°äº†ä»€ä¹ˆå‘?</li>
<li>æœ‰ä»€ä¹ˆä¼˜åŒ–å»ºè®®?
å¤§å®¶ä¸€èµ·äº¤æµå­¦ä¹ ,è¯´ä¸å®šèƒ½ç¢°æ’å‡ºæ–°çš„æƒ³æ³•ğŸ˜„</li>
</ul>
<blockquote>
<p>åŸæ–‡é¦–å‘<a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.betterlink.top%2Fzh%2Fposts%2Fai%2F20251121-workers-ai-tutorial%2F" target="_blank" title="https://blog.betterlink.top/zh/posts/ai/20251121-workers-ai-tutorial/" ref="nofollow noopener noreferrer">è‡ªä¸ªäººåšå®¢</a></p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[âšªï¸ äº”å­æ£‹åŠ å…¥é“å…·ç³»ç»Ÿæ˜¯ä¸€ç§ä»€ä¹ˆä½“éªŒï¼Ÿæˆ‘ç”¨ TRAE SOLO å®ç°äº†ï¼]]></title>    <link>https://juejin.cn/post/7579805639436025908</link>    <guid>https://juejin.cn/post/7579805639436025908</guid>    <pubDate>2025-12-05T00:42:53.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579805639436025908" data-draft-id="7579813945601507368" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="âšªï¸ äº”å­æ£‹åŠ å…¥é“å…·ç³»ç»Ÿæ˜¯ä¸€ç§ä»€ä¹ˆä½“éªŒï¼Ÿæˆ‘ç”¨ TRAE SOLO å®ç°äº†ï¼"/> <meta itemprop="keywords" content="Trae,Canvas,æ¸¸æˆå¼€å‘"/> <meta itemprop="datePublished" content="2025-12-05T00:42:53.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="xiaohe0601"/> <meta itemprop="url" content="https://juejin.cn/user/3183831378302871"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            âšªï¸ äº”å­æ£‹åŠ å…¥é“å…·ç³»ç»Ÿæ˜¯ä¸€ç§ä»€ä¹ˆä½“éªŒï¼Ÿæˆ‘ç”¨ TRAE SOLO å®ç°äº†ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3183831378302871/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    xiaohe0601
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-05T00:42:53.000Z" title="Fri Dec 05 2025 00:42:53 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-05
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252b3a}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px;color:#5e7ce0}.markdown-body h1{font-size:24px;margin-bottom:5px;margin-top:80px;position:relative;text-align:center}.markdown-body h2{font-size:20px;padding-bottom:12px;border-bottom:1px solid #dfe1e6}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h4{font-size:16px;margin-top:30px}.markdown-body h5{font-size:14px;margin-top:20px}.markdown-body h6{font-size:14px;margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #dfe1e6;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#ffeeed;color:#c73636;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#252b3a;background:#f8f8f8}.markdown-body a{position:relative;text-decoration:none;color:#5e7ce0;padding-right:18px;padding-bottom:4px}.markdown-body a[href^=http]:after{position:absolute;display:inline-block;width:16px;height:16px;margin-left:2px;margin-top:6px;content:"";background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAIRlWElmTU0AKgAAAAgABQESAAMAAAABAAEAAAEaAAUAAAABAAAASgEbAAUAAAABAAAAUgEoAAMAAAABAAIAAIdpAAQAAAABAAAAWgAAAAAAAABIAAAAAQAAAEgAAAABAAOgAQADAAAAAQABAACgAgAEAAAAAQAAACCgAwAEAAAAAQAAACAAAAAAX7wP8AAAAAlwSFlzAAALEwAACxMBAJqcGAAAAVlpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDYuMC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KGV7hBwAABWVJREFUWAnlVktsVFUY/s85997pC9BOTKxRWnEKsXWlxjWJj0RWJjrFAAXjAlewYWOkgauACVu7a2IiNUEyExM3yoZE3Wmi7qgPJthJBDE6JUNpO3Mf5/j95/bOTOcBlBgXejJ37rn/Of/7O/9/iP7vQ/zTAcjnC4ry+a5ii1OkiYTpuvjvEc0Gp51uivP+ZW+QBuSW4QjW5rptAa1Ey0uOGKOxwPetVyafN6p/52/PkNBbjdAhGaGEpMRjLZTryB8+9MUSYSGNRIcBvm8kBAY9tHYlHz78nTs392xIkwv9FA3Oe33bdoX1ZZKOS0bH0CXI6RugYLW6BwIu5gskkQ4sEG0wYF25PjBzbZfSYY6kDLUmWMt7FR7Lw3xYUkaTdjxHfTPnPwav0iEGYADVa9XIRIEyxrAA0jIQxgFL22gYwF7A8/DAzNVdksJvJaTEUZ2kYnZWziN5s1ADPHneEIXByotYuMSrf9JEbbsuv7VcvbaKML8plXtQR0EdIYDqWEmtOgAomZFH8EjWSnek2ulmtljljttHbmaIHCCCHzd9MjwfsmscBeZH9Jyd10nMvz92UQrtCBKvMF06mQy0SiEdRMEGg8mN0YjAlgoDDkPrMI5qJKSkKKydpbB2CZjJkhIBvOBw2CGQgii85bpx//dMqFRKam5uvH7w+K97oe+Cl0HO68uIBH0qyEzpOMwIbZIcFq0I+9cwoElizCjk2KFI1y7Nnx614W1db58fOXIlMzs7Xn/jeDmvBV2Q0mXjGf554O/m4LZHp2N8r61WPMvLZWLdiC4GMAk5BjeeB5lhv39l6+BIbu3m760hXMDKBD08XBKzR8fr04nygnIypOOAJUx/fHrsi0Mnys+vVK+V4VUohaiyPCo2Q9DFALvF/ikw8WS4QvVZALS5ksw47/7R8ejgTPk1UFqU6/3zp8bOM7B/kdu/fkguPGU5JibW+F0sTjWOUw8DklRrg4BiLGeBqbaRLxjlT4no0InFV402RcftJz41cH/f/JnHP3kZaaF6VX/liwist9vYG5+NU9Cg3MNkt/+lU5wS8fTxq3mc7ILjDlAE4CJpe89BOWPiIjBhi9O6PI4G1jsc6RGB3lZwmS76k8H0zOKTkFboG8jS2krFKCX2fvTeaPHIBwAkMHHgncURnL3nuCSnxSopdIzN5th0BIonJ0Lf9yUA9iMkzdRWl3BixOusfDcwQVcS4UKIFwYfGPnM8wY/DyP9NFMXaTE5BU39tGkDgGZz+fJJG0oYcSaOafLcqdECY4LzfSObSzyUOgxqtyisr8SSNOOAkubWoh3TTaeA2YtFEXPnm5x81/j+6MI6JqyS25WSNU6hbCMKHG84marJbdR+vwakRhQLRuQpbzHRLjmpmijI+OmWCtq+LzWtnX5v30gHSsqmWne74DtiACi2+Wz0iXbuLt9D2cDyoPEkWOiyp5XUIwLMi/wJY1FbH5B9ONtdC1KrsD/Q0MCQAS0wccILORDW25amAeOtooAj/KQxfzF17uwTSQ1v3dJ7jnLINwdZYRDa4tPU0sHVXFo/vxFF5BqFqxRfOmgPCk4ft2NgKTCy2Y47JIEg+MIhjYsLy5I25qUYTQlCjMRHsr/UwdYwIK33UO1J5fFNB9XNO6akcywJofVmXQDP2wfrSPcI2xG5BSs3I+IosHr4EtvO1TDAu16xHQq5+ykMblfRXLbhEoFIdDTBdhldvzl+3CMg60ZktI2vNzLW6IIp0waLklot9L63yzuUp8dJd7bglPFe3hIXstBEP58/s6Ocyr4rH2+866ZNbriTzA0RSOWCwakMl1QJgculxPt8Z7O5GLdtW6bvU8R/nO1vb+hMExVAVtEAAAAASUVORK5CYII=");background-size:100%}.markdown-body a:active,.markdown-body a:hover{border-bottom:2px solid #5e7ce0}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #5e7ce0;border-spacing:0}.markdown-body thead{color:#fff;text-align:left}.markdown-body thead tr{background:#5e7ce0}.markdown-body thead th{border-bottom:1px solid #dfe1e6}.markdown-body tr{background-color:#fff}.markdown-body tr:nth-child(2n){background-color:#f2f5fc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#252b3a;padding:1px 23px;margin:22px 0;border-left:4px solid #5e7ce0;background-color:#f2f5fc}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{padding-left:10px;margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#5e7ce0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body ul li::marker{content:"â€¢";color:#5e7ce0}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}.markdown-body input[type=checkbox]:before{display:inline-block;width:16px;height:16px;content:"";background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAABCCAYAAADjVADoAAAK2GlDQ1BJQ0MgUHJvZmlsZQAASImVlwdUU9kWhs+96Y0WiHRC70gngJTQQxGkg6iEJJBQYkgIKmJnUMGxoCKCZcSKKFhGQMaCWLANAopdJ8igoD4HC6Ki5t3AI8zMW++99fZaJ+dbO/vss/e55671XwAoYWyRKBdWAyBPWCCODQ2gJ6ek0nHPAQRgQAI2wIHNkYiYMTGRALHJ+a/28S4Sjdhte0Wuf///v5oGlyfhAAClIZzBlXDyEG5DxkuOSFwAAOoI4jddUCBScBfCmmKkQIR/V3DWBH9ScMY4o8njMfGxgQjTAcCT2WxxFgBkO8RPL+RkIXnIih4chVyBEOFihH05fDYX4TMI2+XlzVfwIMJWSLwIAApyOoCR8aecWX/Jn6HMz2ZnKXmir3HDBwkkolz2ov/zaP635eVKJ/ewQAaZLw6LVeyHnN/9nPkRShZmzIyeZAF3oiYF86VhCZPMkQSmTjKXHRShXJs7M3KSMwUhLGWeAlb8JPMkwXGTLJ4fq9wrUxzInGS2eHxfIsIyaU6C0s/nsZT5i/jxSZNcKEicOcmSnLiIqZhApV8sjVXWzxOGBkztG6LsPU/yp34FLOXaAn58mLJ39lT9PCFzKqckWVkblxcUPBWToIwXFQQo9xLlxijjebmhSr+kME65tgC5nFNrY5RnmM0Oj5lkIABRgA04dNVJAqCAt7BA0UjgfNEisSCLX0BnIm8bj84Schzs6M6Ozs4AKN7dievwnjb+TkK061O+NYjHr10ul5+e8oUi9/i4KfJYbk35LCsAUNUD4Op+jlRcOOFDK34wyNNTBZpABxgCU2AF7IEzcAfewB8Eg3AQDeJBCpiL1MoHeUAMFoBisAKUgnKwEWwF1WA32AsOgaPgBGgGZ8AFcAXcAF2gFzwCMjAAXoFh8BGMQRCEgygQFdKBjCBzyBZyhhiQLxQMRUKxUAqUDmVBQkgKFUOroHKoAqqG9kB10HHoNHQBugZ1Qw+gPmgIegd9gVEwGdaEDWALeDrMgJlwBBwPz4Gz4Hy4CC6B18NVcC18BG6CL8A34F5YBr+CR1AARULRUMYoexQDFYiKRqWiMlFi1FJUGaoSVYtqQLWiOlC3UTLUa9RnNBZNRdPR9mhvdBg6Ac1B56OXotehq9GH0E3oS+jb6D70MPo7hoLRx9hivDAsTDImC7MAU4qpxBzAnMJcxvRiBjAfsVgsDWuJ9cCGYVOw2djF2HXYndhGbBu2G9uPHcHhcDo4W5wPLhrHxhXgSnHbcUdw53E9uAHcJzwJb4R3xofgU/FC/Ep8Jf4w/hy+B/8CP0ZQI5gTvAjRBC5hEWEDYR+hlXCLMEAYI6oTLYk+xHhiNnEFsYrYQLxMfEx8TyKRTEiepFkkAWk5qYp0jHSV1Ef6TNYg25ADyWlkKXk9+SC5jfyA/J5CoVhQ/CmplALKekod5SLlKeWTClXFQYWlwlVZplKj0qTSo/JGlaBqrspUnatapFqpelL1luprNYKahVqgGlttqVqN2mm1e2oj6lR1J/Vo9Tz1deqH1a+pD2rgNCw0gjW4GiUaezUuavRTUVRTaiCVQ11F3Ue9TB3QxGpaarI0szXLNY9qdmoOa2louWolai3UqtE6qyWjoWgWNBYtl7aBdoJ2l/ZlmsE05jTetLXTGqb1TBvV1tP21+Zpl2k3avdqf9Gh6wTr5Ohs0mnWeaKL1rXRnaW7QHeX7mXd13qaet56HL0yvRN6D/VhfRv9WP3F+nv1b+qPGBgahBqIDLYbXDR4bUgz9DfMNtxieM5wyIhq5GskMNpidN7oJV2LzqTn0qvol+jDxvrGYcZS4z3GncZjJpYmCSYrTRpNnpgSTRmmmaZbTNtNh82MzKLMis3qzR6aE8wZ5nzzbeYd5qMWlhZJFqstmi0GLbUtWZZFlvWWj60oVn5W+Va1VnessdYM6xzrndZdNrCNmw3fpsbmli1s624rsN1p222HsfO0E9rV2t2zJ9sz7Qvt6+37HGgOkQ4rHZod3kw3m546fdP0junfHd0ccx33OT5y0nAKd1rp1Or0ztnGmeNc43zHheIS4rLMpcXlrautK891l+t9N6pblNtqt3a3b+4e7mL3BvchDzOPdI8dHvcYmowYxjrGVU+MZ4DnMs8znp+93L0KvE54/eFt753jfdh7cIblDN6MfTP6fUx82D57fGS+dN903598ZX7Gfmy/Wr9n/qb+XP8D/i+Y1sxs5hHmmwDHAHHAqYDRQK/AJYFtQaig0KCyoM5gjeCE4OrgpyEmIVkh9SHDoW6hi0PbwjBhEWGbwu6xDFgcVh1rONwjfEn4pQhyRFxEdcSzSJtIcWRrFBwVHrU56vFM85nCmc3RIJoVvTn6SYxlTH7ML7Ows2Jm1cx6HusUWxzbEUeNmxd3OO5jfED8hvhHCVYJ0oT2RNXEtMS6xNGkoKSKJFny9OQlyTdSdFMEKS2puNTE1AOpI7ODZ2+dPZDmllaadneO5ZyFc67N1Z2bO/fsPNV57Hkn0zHpSemH07+yo9m17JEMVsaOjGFOIGcb5xXXn7uFO8Tz4VXwXmT6ZFZkDmb5ZG3OGuL78Sv5rwWBgmrB2+yw7N3ZoznROQdz5LlJuY15+Lz0vNNCDWGO8NJ8w/kL53eLbEWlIlm+V/7W/GFxhPiABJLMkbQUaCIi6abUSvqDtK/Qt7Cm8NOCxAUnF6ovFC68uchm0dpFL4pCivYvRi/mLG4vNi5eUdy3hLlkz1JoacbS9mWmy0qWDSwPXX5oBXFFzopfVzqurFj5YVXSqtYSg5LlJf0/hP5QX6pSKi69t9p79e416DWCNZ1rXdZuX/u9jFt2vdyxvLL86zrOuus/Ov1Y9aN8feb6zg3uG3ZtxG4Ubry7yW/ToQr1iqKK/s1Rm5u20LeUbfmwdd7Wa5Wulbu3EbdJt8mqIqtatptt37j9azW/urcmoKZxh/6OtTtGd3J39uzy39Ww22B3+e4vPwl+ur8ndE9TrUVt5V7s3sK9z/cl7uvYz9hfd0D3QPmBbweFB2WHYg9dqvOoqzusf3hDPVwvrR86knak62jQ0ZYG+4Y9jbTG8mPgmPTYy+Ppx++eiDjRfpJxsuFn8593nKKeKmuCmhY1DTfzm2UtKS3dp8NPt7d6t576xeGXg2eMz9Sc1Tq74RzxXMk5+fmi8yNtorbXF7Iu9LfPa390MfninUuzLnVejrh89UrIlYsdzI7zV32unrnmde30dcb15hvuN5puut089avbr6c63Tubbnncauny7GrtntF9rsev58LtoNtX7rDu3Oid2dt9N+Hu/Xtp92T3ufcHH+Q+ePuw8OHYo+WPMY/Lnqg9qXyq/7T2N+vfGmXusrN9QX03n8U9e9TP6X/1u+T3rwMlzynPK18YvagbdB48MxQy1PVy9suBV6JXY69L/6H+jx1vrN78/If/HzeHk4cH3orfyt+te6/z/uAH1w/tIzEjTz/mfRwbLfuk8+nQZ8bnji9JX16MLfiK+1r1zfpb6/eI74/leXK5iC1mj0sBFDLgzEwA3h1EtHEKAFRElxNnT2jrcYMmvgfGCfwnntDf4+YOQAMyKWQR0x+Akwo5i8wqyKyQRPH+AHZxUY5/mSTTxXkiFxlRlphPcvl7AwBwrQB8E8vlYzvl8m/7kGIfANCWP6HpFYZFtHyD3vJRg6LbPe3g7zah9//U499noKjAFfx9/ieoZhkWVvYkwwAAAGxlWElmTU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAIdpAAQAAAABAAAATgAAAAAAAACQAAAAAQAAAJAAAAABAAKgAgAEAAAAAQAAAEKgAwAEAAAAAQAAAEIAAAAAgodoEQAAAAlwSFlzAAAWJQAAFiUBSVIk8AAAAhRJREFUeAHtnLEuBFEUhs9cu7JCskEhIrZAgYZGoREPwBuIygOoPITKA6jEG/AAolFoaFCgICIKZBNiY8Pyz5rNOWe9wNz5T7N3Z2eT/b/7zZlpziat3xKWBDJoEyh5EDd3DTk5r8vV7Yc8vzbl6zvfwvSERIYHyzI90SeLc1WZrFV85PR9oi+N/YMnOT6t/3tiLAeXFqqytjrSFacDYmfvQS6u37tOiPHA7FS/bK6PmWhpj4AJRYGA9MiKzLpK6An+cqiNVmRleUhArrec6PNzt/5sttLgh0cvcvfY6Px+ZNY9I6Ax6gKErY1xmZ8ZyD0E5MJGIgsyIZsunT3g7qALJuTdAp0nWyMTsunS2QNukbpwOcRaPpvOHvxzQow2ZBvrs+nsfLL8o0QQBJFdMO1XGkEjaIQlQCMsD/YIGkEjLAEaYXmwR9AIGmEJ0AjLgz2CRtAIS4BGWB7sETSCRlgCNMLyYI+gETTCEqARlgd7BI2gEZYAjbA82CNoBI2wBGiE5cEeQSNohCVAIywP9ggaQSMsARphebBH0AgaYQnQCMsjYC5SF2agYi2fTWcPGA7VFfO0n8+mswdMyOrCNJwnpz/P6xqZkE2Xzh4w8qcLI4Hbu/dydvkWBRAAQBZk0uOOyKyzp5PARRiF1puNtR+NTh+oMCvtJ+D8F2N6j6x+PrwzG46gRTDDm5BtsAGBg0X924Qfj7i23p7HNgQAAAAASUVORK5CYII=");background-size:100%;position:relative;right:2px;top:-5px}.markdown-body input[type=checkbox]:checked:before{background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAABCCAYAAADjVADoAAAK2GlDQ1BJQ0MgUHJvZmlsZQAASImVlwdUU9kWhs+96Y0WiHRC70gngJTQQxGkg6iEJJBQYkgIKmJnUMGxoCKCZcSKKFhGQMaCWLANAopdJ8igoD4HC6Ki5t3AI8zMW++99fZaJ+dbO/vss/e55671XwAoYWyRKBdWAyBPWCCODQ2gJ6ek0nHPAQRgQAI2wIHNkYiYMTGRALHJ+a/28S4Sjdhte0Wuf///v5oGlyfhAAClIZzBlXDyEG5DxkuOSFwAAOoI4jddUCBScBfCmmKkQIR/V3DWBH9ScMY4o8njMfGxgQjTAcCT2WxxFgBkO8RPL+RkIXnIih4chVyBEOFihH05fDYX4TMI2+XlzVfwIMJWSLwIAApyOoCR8aecWX/Jn6HMz2ZnKXmir3HDBwkkolz2ov/zaP635eVKJ/ewQAaZLw6LVeyHnN/9nPkRShZmzIyeZAF3oiYF86VhCZPMkQSmTjKXHRShXJs7M3KSMwUhLGWeAlb8JPMkwXGTLJ4fq9wrUxzInGS2eHxfIsIyaU6C0s/nsZT5i/jxSZNcKEicOcmSnLiIqZhApV8sjVXWzxOGBkztG6LsPU/yp34FLOXaAn58mLJ39lT9PCFzKqckWVkblxcUPBWToIwXFQQo9xLlxijjebmhSr+kME65tgC5nFNrY5RnmM0Oj5lkIABRgA04dNVJAqCAt7BA0UjgfNEisSCLX0BnIm8bj84Schzs6M6Ozs4AKN7dievwnjb+TkK061O+NYjHr10ul5+e8oUi9/i4KfJYbk35LCsAUNUD4Op+jlRcOOFDK34wyNNTBZpABxgCU2AF7IEzcAfewB8Eg3AQDeJBCpiL1MoHeUAMFoBisAKUgnKwEWwF1WA32AsOgaPgBGgGZ8AFcAXcAF2gFzwCMjAAXoFh8BGMQRCEgygQFdKBjCBzyBZyhhiQLxQMRUKxUAqUDmVBQkgKFUOroHKoAqqG9kB10HHoNHQBugZ1Qw+gPmgIegd9gVEwGdaEDWALeDrMgJlwBBwPz4Gz4Hy4CC6B18NVcC18BG6CL8A34F5YBr+CR1AARULRUMYoexQDFYiKRqWiMlFi1FJUGaoSVYtqQLWiOlC3UTLUa9RnNBZNRdPR9mhvdBg6Ac1B56OXotehq9GH0E3oS+jb6D70MPo7hoLRx9hivDAsTDImC7MAU4qpxBzAnMJcxvRiBjAfsVgsDWuJ9cCGYVOw2djF2HXYndhGbBu2G9uPHcHhcDo4W5wPLhrHxhXgSnHbcUdw53E9uAHcJzwJb4R3xofgU/FC/Ep8Jf4w/hy+B/8CP0ZQI5gTvAjRBC5hEWEDYR+hlXCLMEAYI6oTLYk+xHhiNnEFsYrYQLxMfEx8TyKRTEiepFkkAWk5qYp0jHSV1Ef6TNYg25ADyWlkKXk9+SC5jfyA/J5CoVhQ/CmplALKekod5SLlKeWTClXFQYWlwlVZplKj0qTSo/JGlaBqrspUnatapFqpelL1luprNYKahVqgGlttqVqN2mm1e2oj6lR1J/Vo9Tz1deqH1a+pD2rgNCw0gjW4GiUaezUuavRTUVRTaiCVQ11F3Ue9TB3QxGpaarI0szXLNY9qdmoOa2louWolai3UqtE6qyWjoWgWNBYtl7aBdoJ2l/ZlmsE05jTetLXTGqb1TBvV1tP21+Zpl2k3avdqf9Gh6wTr5Ohs0mnWeaKL1rXRnaW7QHeX7mXd13qaet56HL0yvRN6D/VhfRv9WP3F+nv1b+qPGBgahBqIDLYbXDR4bUgz9DfMNtxieM5wyIhq5GskMNpidN7oJV2LzqTn0qvol+jDxvrGYcZS4z3GncZjJpYmCSYrTRpNnpgSTRmmmaZbTNtNh82MzKLMis3qzR6aE8wZ5nzzbeYd5qMWlhZJFqstmi0GLbUtWZZFlvWWj60oVn5W+Va1VnessdYM6xzrndZdNrCNmw3fpsbmli1s624rsN1p222HsfO0E9rV2t2zJ9sz7Qvt6+37HGgOkQ4rHZod3kw3m546fdP0junfHd0ccx33OT5y0nAKd1rp1Or0ztnGmeNc43zHheIS4rLMpcXlrautK891l+t9N6pblNtqt3a3b+4e7mL3BvchDzOPdI8dHvcYmowYxjrGVU+MZ4DnMs8znp+93L0KvE54/eFt753jfdh7cIblDN6MfTP6fUx82D57fGS+dN903598ZX7Gfmy/Wr9n/qb+XP8D/i+Y1sxs5hHmmwDHAHHAqYDRQK/AJYFtQaig0KCyoM5gjeCE4OrgpyEmIVkh9SHDoW6hi0PbwjBhEWGbwu6xDFgcVh1rONwjfEn4pQhyRFxEdcSzSJtIcWRrFBwVHrU56vFM85nCmc3RIJoVvTn6SYxlTH7ML7Ows2Jm1cx6HusUWxzbEUeNmxd3OO5jfED8hvhHCVYJ0oT2RNXEtMS6xNGkoKSKJFny9OQlyTdSdFMEKS2puNTE1AOpI7ODZ2+dPZDmllaadneO5ZyFc67N1Z2bO/fsPNV57Hkn0zHpSemH07+yo9m17JEMVsaOjGFOIGcb5xXXn7uFO8Tz4VXwXmT6ZFZkDmb5ZG3OGuL78Sv5rwWBgmrB2+yw7N3ZoznROQdz5LlJuY15+Lz0vNNCDWGO8NJ8w/kL53eLbEWlIlm+V/7W/GFxhPiABJLMkbQUaCIi6abUSvqDtK/Qt7Cm8NOCxAUnF6ovFC68uchm0dpFL4pCivYvRi/mLG4vNi5eUdy3hLlkz1JoacbS9mWmy0qWDSwPXX5oBXFFzopfVzqurFj5YVXSqtYSg5LlJf0/hP5QX6pSKi69t9p79e416DWCNZ1rXdZuX/u9jFt2vdyxvLL86zrOuus/Ov1Y9aN8feb6zg3uG3ZtxG4Ubry7yW/ToQr1iqKK/s1Rm5u20LeUbfmwdd7Wa5Wulbu3EbdJt8mqIqtatptt37j9azW/urcmoKZxh/6OtTtGd3J39uzy39Ww22B3+e4vPwl+ur8ndE9TrUVt5V7s3sK9z/cl7uvYz9hfd0D3QPmBbweFB2WHYg9dqvOoqzusf3hDPVwvrR86knak62jQ0ZYG+4Y9jbTG8mPgmPTYy+Ppx++eiDjRfpJxsuFn8593nKKeKmuCmhY1DTfzm2UtKS3dp8NPt7d6t576xeGXg2eMz9Sc1Tq74RzxXMk5+fmi8yNtorbXF7Iu9LfPa390MfninUuzLnVejrh89UrIlYsdzI7zV32unrnmde30dcb15hvuN5puut089avbr6c63Tubbnncauny7GrtntF9rsev58LtoNtX7rDu3Oid2dt9N+Hu/Xtp92T3ufcHH+Q+ePuw8OHYo+WPMY/Lnqg9qXyq/7T2N+vfGmXusrN9QX03n8U9e9TP6X/1u+T3rwMlzynPK18YvagbdB48MxQy1PVy9suBV6JXY69L/6H+jx1vrN78/If/HzeHk4cH3orfyt+te6/z/uAH1w/tIzEjTz/mfRwbLfuk8+nQZ8bnji9JX16MLfiK+1r1zfpb6/eI74/leXK5iC1mj0sBFDLgzEwA3h1EtHEKAFRElxNnT2jrcYMmvgfGCfwnntDf4+YOQAMyKWQR0x+Akwo5i8wqyKyQRPH+AHZxUY5/mSTTxXkiFxlRlphPcvl7AwBwrQB8E8vlYzvl8m/7kGIfANCWP6HpFYZFtHyD3vJRg6LbPe3g7zah9//U499noKjAFfx9/ieoZhkWVvYkwwAAAGxlWElmTU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAIdpAAQAAAABAAAATgAAAAAAAACQAAAAAQAAAJAAAAABAAKgAgAEAAAAAQAAAEKgAwAEAAAAAQAAAEIAAAAAgodoEQAAAAlwSFlzAAAWJQAAFiUBSVIk8AAABMtJREFUeAHtXM2KFDEQzrQKruIu4mEXRFlUVLz4A4K7B99AcO8io0/gwQfxDVzFuwu+gQf34EG8iOAPKAh6EFlBFMSf/qa2uqszlVR6ZtYxM5PDJNVVSer78nU6KrHzpyxuVlwx44AY2O0T8eb9D7f5fMu9fPvdff7y0/36nbdgdhUdd+jgHnf62JxbObvgjh/d60Pu2R35ajx49Mk9frqlBk7Kw8sXF9y1K4t9cCoi7tz/4F68/tYXMIkPzpzY725dP9yA1tsjoIRpIQHogRWYZSmwJ4Reh06nI2Nd7rYEA8zAzqXAxhgq/pc1d9vHKbEX+Dr4JbzypJDc/YxXYi/wifRLeOXpU5q7n/FK7EXsnBBeeRoqd7/EHj1ZhleeiMjdz8pArRKR+0pb+UsCuK0SkftKW/kzeFmrRHCAxWzufsaJOkqExWzufpOI8EpP1jnCJCK80pN1jjCJ4ICwMigidz/jRD3bI7bZUInIfaWt/KUSuK0SEd4jqFvufgYva5UIDrCYzd3POFFHifhfV/7k8lwPw7D5mUSEV3r854ju2pK7ffOIWzk/X+Go803Lr+ooGqoiwkyP9xzRXVt0q9sE3CgJYTLqfNPyE/irpkoEe2um6ck4bSiBSeD8JBl41jY/Hgd1lIiaaeoyLlsjgUGAjEH3DB4DtUpEW2Z3Mj5GAgA8efbVvXpX/200nln5IMYvKhHDrvylcwdc9+pSNdeg46WQsP7wo2s7fpWYaPT926fw9ZiVk4BpywYJkGuvlJs4EuWS0p/HTyHh3kbzH2najM85cR0lgpPiYMtukFB26m1u5Ua+vkFkWP3Zn0KCJDg1Px6f42Wtvhrhdyz8ncanrFKCmGH1wrwDMCrh/uxPIUFTAvdHbeVPsc1fVRE+c7Ud/k6fWt7XHFlYqcqQ5wTRvWpiY4wrIZwfDUL+akDRUBXB/jCzFCH9SHCzTDRUmsro7z+cEvrHwxOZn2ZTL/pVFcEBtRLoiWXfxQ5ehvoHHx4vpIwUEuJKSMvPz5/zQq0qwmIy5m+rjBQSwnsCQYnlgwjfT72av6oifOba2qnKcOXeGVIP0rT3BALTNr8mBWSpRHAgmJSTtLGhDHwj+A9GPCbX2DNiBSRoShg0H8zl5y/njxIhJ0WntralDJmIbO+UEvz85Zwt9wj7HIDB5Ttp7RkyGbRDSqC49vOjX50P9aexmr+qInzmajvtO13H02SpyrCVMNj8dT7/4BwByDXzRIC0LWXEldA/njVfip9GpV9VERxQM0lPhrVDyrCVMJr5/fwZJ+qWewR1lSuNJ21sXxnjVgIhck5VhM/cqG1WBpIAMX4Z9Xz+eP58sFUiOBArLQcZpQ0CNCXt1HzA5OfPOFGrrwYHyKTwbNJsxolaJUJbKeo0mu/4uMeXBHBbJSK88qP5jo97fAYva5UIDgivHEXk7mecqKNEhFeOhsjdbxKR+0pb+UsCuK0qIveVtvJn8LJWieAAi9nc/YwTdZQIi9nc/SYR4ZWenSO2yZvgcwTuRYZKWBnUI3e/xF7gcmio5L4HWPlL7AVuyPol95W28me8EnuBa8J+sZjM3c94JfYCd6VxTXjaCjDLe+K9cwTuSuOa8LQUYPXvh1d3w0HC7JK8kMK0/rcJfwHkVMYgi4xhOgAAAABJRU5ErkJggg==");background-size:100%}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atom-one-dark">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#abb2bf;background:#282c34}.hljs-comment,.hljs-quote{color:#5c6370;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#c678dd}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e06c75}.hljs-literal{color:#56b6c2}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#98c379}.hljs-built_in,.hljs-class .hljs-title{color:#e6c07b}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#d19a66}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#61aeee}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><p>æœ€è¿‘åˆ·åˆ° <a href="https://juejin.cn/user/26044011388510" target="_blank" title="https://juejin.cn/user/26044011388510">ä¸å¦‚æ‘¸é±¼å»</a> ä½¿ç”¨ TRAE SOLO å¤åˆ»äº†å¦å…‹å¤§æˆ˜ï¼Œä»–è¯´ä»¿ä½›æ‰ä½ä¸€åªå˜¶é¸£çš„è‰ï¼Œä¾¿æ”¥ç´§äº†æ•´ä¸ªç«¥å¹´çš„å¤å¤©ã€‚</p>
<p>ç°åœ¨å·²ç»æ˜¯å†¬å¤©äº†ï¼Œå››å·å†¬å¤©çš„å†·å°±åƒæ˜¯â€œé­”æ³•æ”»å‡»â€œï¼Œè™½ç„¶æ¸©åº¦ä¸å¦‚åŒ—æ–¹é‚£ä¹ˆä½ï¼Œä½†æ˜¯å¯’æ„æ€»ä¼šç©¿é€è¡£æœæ¸—å…¥åˆ°ä½ çš„èº«ä½“é‡Œã€‚æ¯å¤©æ—©ä¸Šè¹¬å…±äº«å•è½¦ä¸Šç­çš„æˆ‘ï¼Œåœ¨å¯’é£ä¸­æ€»ä¼šæƒ³å¦‚æœç°åœ¨æ˜¯å¤å¤©å°±å¥½äº†ï¼Œæˆ‘ä¹Ÿè¦ç”¨ TRAE SOLO åšä¸€ä¸ªæ¸¸æˆï¼Œæˆ‘ä¹Ÿæƒ³è¦æŠ“ä½æ•´ä¸ªå¤å¤©ï¼</p>
<p>å¥ˆä½•æ²¡æœ‰ TRAE SOLO èµ„æ ¼ï¼Œä¸€ç›´ä¸èƒ½å®è·µæˆ‘çš„æƒ³æ³•ã€‚</p>
<p>â€¦â€¦</p>
<p>ç»ˆäºï¼ŒTRAE SOLO ä¸­å›½ç‰ˆæ­£å¼ä¸Šçº¿ï¼Œæˆ‘ä¹Ÿè§£é”äº† SOLO èµ„æ ¼ï¼</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ebcf80a58b16493eb0b00dcc17f38136~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeGlhb2hlMDYwMQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765501197&amp;x-signature=jCbMw9zUIv4X1F2Rj6kIAq9e2Fg%3D" alt="" loading="lazy"/></p>
<p>é‚£ä¹ˆä»Šå¤©å°±æ¥åšä¸€ä¸ªå¤§å®¶éƒ½ç†ŸçŸ¥çš„äº”å­æ£‹æ¸¸æˆå§ï¼Œä¸è¿‡æˆ‘å¸Œæœ›å¯ä»¥åŠ å…¥é“å…·ç³»ç»Ÿï¼ˆ<del>æµ·å…‹æ–¯å¤§ä¹±æ–—ç©çš„</del>ï¼‰ï¼</p>
<h2 data-id="heading-0">ğŸ¤“ ä»€ä¹ˆæ˜¯ TRAE SOLO</h2>
<blockquote>
<p>â€œè¿‡å»ï¼Œæˆ‘ä»¬åŠªåŠ›æŠŠ AI åšè¿›å·¥å…·ï¼Œæå‡è¡¥å…¨æ•ˆç‡ä¸å¼€å‘ä½“éªŒã€‚
å¦‚ä»Šï¼Œæˆ‘ä»¬æŠŠå·¥å…·åå‘é›†æˆäº AI ä¹‹ä¸­ï¼Œç”±å®ƒç»Ÿä¸€è°ƒåº¦ä»»åŠ¡ã€ç†è§£ä¸Šä¸‹æ–‡ã€ç»„ç»‡å·¥ä½œã€‚
TRAE SOLO æ­£æ˜¯åœ¨è¿™ä¸ªæ€è·¯ä¸‹è¯ç”Ÿ â€”â€” è‡´åŠ›äºå®è·µä¸Šä¸‹æ–‡å·¥ç¨‹ï¼Œæ„å»ºçœŸæ­£ç”± AI é©±åŠ¨çš„å¼€å‘é—­ç¯â€ â€”â€” TRAE å®˜ç½‘</p>
</blockquote>
<p>TRAE SOLO æ˜¯ä¸€ç§é«˜åº¦è‡ªåŠ¨åŒ–çš„å¼€å‘æ–¹å¼ï¼Œä»¥ AI ä¸ºä¸»å¯¼ï¼Œå¯ç†è§£ç›®æ ‡ã€æ‰¿æ¥ä¸Šä¸‹æ–‡å¹¶è°ƒåº¦å·¥å…·ï¼Œç‹¬ç«‹æ¨è¿›å„é˜¶æ®µå¼€å‘ä»»åŠ¡ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/45a234f2476946ec83941c50d0f6a5af~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeGlhb2hlMDYwMQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765501197&amp;x-signature=j7htZajhS9ZYM7pDWI%2BKiPj7aFI%3D" alt="" loading="lazy"/></p>
<p>SOLO Coder ä¸æ­¢äºä»£ç ç¼–å†™ï¼Œæ›´èƒ½è¿›è¡Œæ·±åº¦éœ€æ±‚åˆ†æï¼Œç²¾å‡†æ‰§è¡Œã€‚ä½ å¯ä»¥åˆ›å»ºè‡ªå®šä¹‰æ™ºèƒ½ä½“ï¼Œç”± SOLO Coder è‡ªä¸»ç¼–æ’ï¼Œä¸“å± AI ä¸“å®¶å›¢é˜ŸååŒå¼€å‘ï¼Œçµæ´»å¤„ç†ä½ äº¤ä»£çš„æ¯ä¸ªä»»åŠ¡ã€‚</p>
<p>ç‚¹å‡»å·¦ä¸Šè§’çš„ã€ŒTRAEã€å›¾æ ‡å³å¯åˆ‡æ¢åˆ° SOLO æ¨¡å¼ï¼Œä¸åŒäºæ™®é€šæ¨¡å¼ï¼ŒSOLO æ¨¡å¼ç”± AI æ¨¡å—å æ®ä¸»è¦åœ°ä½ï¼Œè¿™ä¹Ÿç¬¦åˆ TRAE å¯¹ SOLO æ¨¡å¼çš„å®šä½ â€”â€” AI ä¸»å¯¼å¼€å‘ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d9861337a4784d61b24f5dbfcfedce37~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeGlhb2hlMDYwMQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765501197&amp;x-signature=JEoFw7Ju1%2BIP9%2BSTs1va6B%2BTdFU%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-1">ğŸš€ å¼€å§‹ SOLO ï¼</h2>
<p>é¦–å…ˆæˆ‘ä»¬éœ€è¦æ•´ç†éœ€æ±‚ï¼Œå°†æƒ³è¦åšçš„ä¸œè¥¿ç”¨æ–‡å­—æè¿°ç»™ TRAEï¼Œè¦ç¡®ä¿å°½é‡è¯¦ç»†å‡†ç¡®ï¼Œè¿™æ · AI æ‰èƒ½æ¸…æ™°ç†è§£ä»»åŠ¡ç›®æ ‡ã€‚å¯æ˜¯ï¼Œå¯¹äºå¤§å¤šæ•°å¼€å‘è€…æ¥è¯´å†™æ–‡æ¡£æ˜¯ä¸€ä»¶å¾ˆç—›è‹¦çš„äº‹æƒ…ï¼Œå®å†™ 1000 è¡Œä»£ç ä¹Ÿä¸æ„¿å†™ 100 è¡Œæ–‡æ¡£ï¼Œè¿™å¯æ€ä¹ˆåŠå‘¢ï¼Ÿ</p>
<p>å¹¸è¿çš„æ˜¯ï¼ŒTRAE æä¾›äº† AI è‡ªåŠ¨æ¶¦è‰²ä¼˜åŒ–è¾“å…¥åŠŸèƒ½ï¼Œäº‹æƒ…ä¸€ä¸‹å°±å˜ç®€å•äº†ï¼</p>
<p>ç°åœ¨ï¼Œæˆ‘ä»¬åªéœ€è¦ç®€å•ç¼–å†™ä¸€å¥è¯æè¿°éœ€æ±‚ï¼Œå…ˆå¼€å‘ä¸€æ¬¾åŸºç¡€ç‰ˆçš„äº”å­æ£‹æ¸¸æˆï¼š</p>
<pre><code class="hljs language-md" lang="md">ä½¿ç”¨ HTML5 Canvas å’Œ TypeScript å¼€å‘ä¸€æ¬¾äº”å­æ£‹æ¸¸æˆã€‚
</code></pre>
<p>ç„¶åç‚¹å‡»è¾“å…¥æ¡†å³ä¸‹è§’çš„ âœ¨ å›¾æ ‡ï¼Œå°±å¯ä»¥ AI è‡ªåŠ¨æ¶¦è‰²å•¦ï¼</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d16a8e7af3b249f48aedc2bdbc32ceee~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeGlhb2hlMDYwMQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765501197&amp;x-signature=f5bGnnEOaetb%2Fm5PHug%2FCR6Hcd4%3D" alt="" loading="lazy"/></p>
<p>ç¨ç­‰ç‰‡åˆ»ï¼ŒTRAE å°±è‡ªå·±ç¼–å†™äº†ä¸€æ®µè¯¦ç»†çš„éœ€æ±‚è¯´æ˜ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e8689834f8e141d8b640193409d93b05~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeGlhb2hlMDYwMQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765501197&amp;x-signature=tyDR%2Fo0onxlXp3IZbyeysesU%2BJE%3D" alt="" loading="lazy"/></p>
<p>æˆ‘ä»¬ç¨åŠ æ£€æŸ¥ï¼Œçœ‹çœ‹è‡ªåŠ¨ç”Ÿæˆçš„æ–‡å­—æ˜¯å¦ç¬¦åˆéœ€æ±‚ â€¦â€¦</p>
<p>å—¯ï¼Œå®Œå…¨ç¬¦åˆéœ€æ±‚ï¼ï¼ˆæˆ‘è‡ªå·±å¯å†™ä¸å‡ºè¿™ä¹ˆè¯¦ç»†çš„è¯´æ˜ ğŸ¥¹ï¼‰</p>
<p>ç”±äºè¿™æ˜¯ä» 0 å¼€å§‹å¼€å‘ï¼Œå¯ä»¥å¯ç”¨è¾“å…¥æ¡†å³ä¸Šè§’çš„ã€ŒPlanã€å¼€å…³ï¼Œè®© TRAE å…ˆæ¢³ç†ä¸€ä¸ªå¼€å‘è®¡åˆ’æ–‡æ¡£ï¼Œè¿™ä¼šè®© AI å¯¹éœ€æ±‚çš„ç†è§£æ›´åŠ æ·±åˆ»ï¼Œæœ‰æ•ˆæå‡ä»£ç çš„è¾“å‡ºè´¨é‡ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b3407bfab14549f9b66497a59b827be2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeGlhb2hlMDYwMQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765501197&amp;x-signature=o%2BOKysAejXZ9uYKQKWQB6JNnd7Q%3D" alt="" loading="lazy"/></p>
<p>TRAE ç»è¿‡ä¸€ç³»åˆ—çš„è‡ªåŠ¨åå¤æ€è€ƒï¼Œæœ€ç»ˆç”Ÿæˆäº†ä¸€ç¯‡å®Œæ•´çš„ã€Šäº”å­æ£‹æ¸¸æˆå¼€å‘è®¡åˆ’ã€‹å¹¶è¾“å‡ºåˆ° <code>.trae/documents</code> ç›®å½•ä¸­ã€‚ç¡®è®¤æ— è¯¯åç‚¹å‡»ã€Œæ‰§è¡Œã€æŒ‰é’®ï¼ŒTRAE å°±ä¼šå¼€å§‹è‡ªåŠ¨ç¼–ç ã€‚</p>
<p>å¦‚åŒä¸€ä¸ªç»éªŒè€é“çš„é«˜çº§å¼€å‘å·¥ç¨‹å¸ˆï¼ŒTRAE ä¼šè‡ªåŠ¨æ€è€ƒã€è§„åˆ’ã€åˆ›å»ºæ–‡ä»¶ã€ç¼–å†™ä»£ç ä»¥åŠé”™è¯¯ä¿®å¤ç­‰å·¥ä½œï¼Œå…¨ç¨‹æ— éœ€äººå·¥å¹²é¢„ã€‚</p>
<p>æˆ‘ä»¬åªéœ€è¦é™é™åœ°çœ‹ç€ä»–å·¥ä½œï¼Œæˆ–è€…å»åšç‚¹å…¶ä»–äº‹æƒ… ï½</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3ed390c7ab114504968752167df6896e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeGlhb2hlMDYwMQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765501197&amp;x-signature=aRAuDSAK7DF2tJD358%2FQRSWxbDA%3D" alt="" loading="lazy"/></p>
<p>å¾ˆå¿«ï¼Œå–æ¯æ°´çš„åŠŸå¤«ï¼ˆ<del>æ²¡æœ‰è¯´æ˜¯å¤šå¤§çš„æ¯å­ ğŸ˜</del>ï¼‰ï¼ŒTRAE å°±å®Œæˆäº†ç¬¬ä¸€ç‰ˆæ¸¸æˆçš„å¼€å‘ï¼Œè¿˜è´´å¿ƒæ€»ç»“äº†é¡¹ç›®ç»“æ„ã€æŠ€æœ¯è¦ç‚¹ä»¥åŠæ“ä½œè¯´æ˜ç­‰å†…å®¹ï¼Œå¸®åŠ©æˆ‘ä»¬å¿«é€Ÿç†è§£å·¥ç¨‹ã€‚</p>
<p>TRAE è‡ªåŠ¨è¿è¡Œèµ·äº†å¼€å‘æœåŠ¡ï¼Œç„¶ååˆ‡æ¢åˆ°å†…ç½®æµè§ˆå™¨æ¨¡å—ï¼Œå¯ä»¥å®æ—¶é¢„è§ˆé¡µé¢ã€‚</p>
<p>å•Šå“¦ï¼Œæ§åˆ¶å°æ—¥å¿—ä¸­æœ‰ä¸€ä¸ªæŠ¥é”™ï¼Œå¯¼è‡´é¡µé¢åªæœ‰ä¸€ç‰‡ç™½å±ï¼ä½†æ˜¯ä¸ç”¨æ‹…å¿ƒï¼Œç‚¹å‡»ã€Œâœ¨æ·»åŠ åˆ°å¯¹è¯ã€æŒ‰é’®ï¼Œç„¶åè®© TRAE å¸®æˆ‘ä»¬ä¿®å¤ä¸€ä¸‹å°±å¥½å•¦ ï½</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3e495ea374d6406b9903f04fc17570fc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeGlhb2hlMDYwMQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765501197&amp;x-signature=vZ29QguA321yXtVCG%2FgiX%2FPUohg%3D" alt="" loading="lazy"/></p>
<p>ç°åœ¨ï¼Œä¸€ä¸ªåŸºç¡€ç‰ˆæœ¬çš„äº”å­æ£‹æ¸¸æˆå°±å¯ä»¥æ­£å¸¸è¿è¡Œå•¦ï¼</p>
<p>ç®€å•ä½“éªŒä¸€ä¸‹ï¼Œå¯ä»¥æ­£å¸¸äº¤æ›¿è½å­ã€æ‚”æ£‹ä»¥åŠäº”å­è¿ç æ£€æµ‹ï¼Œå…·å¤‡äº†äº”å­æ£‹æ¸¸æˆçš„åŸºæœ¬è¦ç´ ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/40c1810dd3b148368e0d4efb63e59d1a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeGlhb2hlMDYwMQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765501197&amp;x-signature=vo6%2BO6IQ20ol6JV8mKwXasSZEc0%3D" alt="" loading="lazy"/></p>
<p>ä¸è¿‡è¿˜æ˜¯æœ‰ä¸€äº›å°é—®é¢˜ï¼Œã€Œå¼€å§‹æ–°æ¸¸æˆã€æŒ‰é’®å’Œã€Œé‡æ–°å¼€å§‹ã€æŒ‰é’®åŠŸèƒ½é‡å¤äº†ï¼Œå¹¶ä¸”ç‚¹å‡»åˆ‡æ¢æ£‹ç›˜å¤§å°æ²¡æœ‰ååº”ï¼Œè®© TRAE å¸®æˆ‘ä»¬ä¿®å¤ä¸€ä¸‹å§ï¼</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b9ee0f330ca649afb651ba783da3131d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeGlhb2hlMDYwMQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765501197&amp;x-signature=bqtNaFFwn%2BRjgdhaOLVKi4JvIq0%3D" alt="" loading="lazy"/></p>
<p>TRAE ä¸è´Ÿæ‰€æ‰˜ï¼Œä¿®å¤æˆåŠŸï¼åªä¿ç•™äº†ã€Œé‡æ–°å¼€å§‹ã€æŒ‰é’®ï¼Œå¹¶ä¸”æ£‹ç›˜å¤§å°ä¹Ÿèƒ½æ­£ç¡®åˆ‡æ¢ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/604a311d575a47edb57a4bf8f844742f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeGlhb2hlMDYwMQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765501197&amp;x-signature=qu74dD%2BvLXGIuXaGBYKyCgz34ko%3D" alt="" loading="lazy"/></p>
<p>å¯æ˜¯ï¼Œç°åœ¨åªèƒ½è‡ªå·±ä¸€ä¸ªäººäº¤æ›¿è½å­è¿›è¡Œæ¸¸æˆï¼Œéš¾å…ä¼šå°‘äº†ä¸€äº›ä¹è¶£ï¼Œå¦‚æœèƒ½æœ‰ä¸€ä¸ªã€Œç”µè„‘ã€é€‰æ‰‹ä¸æˆ‘ä»¬å¯¹å¼ˆå°±å¥½äº†ï¼Œé‚£å°±è®© TRAE ç»§ç»­å¸®æˆ‘ä»¬åšä¸€ä¸ªã€Œç”µè„‘ã€é€‰æ‰‹å§ï¼</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ea5f587a22c24797a6e15b56e5d2a160~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeGlhb2hlMDYwMQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765501197&amp;x-signature=mPYhoK4T6Yz5NK7VALk8D6%2BGssI%3D" alt="" loading="lazy"/></p>
<p>ç°åœ¨å°±åˆ‡æ¢åˆ°ã€Œç©å®¶ VS ç”µè„‘ã€æ¨¡å¼ï¼Œå¼€å§‹ä¸€åœºäººç±»ä¸ AI çš„è¾ƒé‡ï¼ğŸ’ª</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cf8cce6978cf4bd4a50cc6aa2bfc3962~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeGlhb2hlMDYwMQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765501197&amp;x-signature=YY%2B%2BxHwbPnySOVO94ukS7jpK9Fo%3D" alt="" loading="lazy"/></p>
<p>å¥½å§ï¼Œåˆå‘ç°äº†ä¸€ä¸ªå°é—®é¢˜ï¼Œç‚¹å‡»ä¸€ä¸‹ã€Œæ‚”æ£‹ã€æŒ‰é’®ï¼Œåªæ’¤å›äº†ä¸€æ¬¡è½å­ï¼Œå½“æ’¤å›åˆ°ã€Œç”µè„‘ã€å›åˆçš„æ—¶å€™ï¼Œç©å®¶å°±ä¸èƒ½æ­£å¸¸è½å­ã€‚TRAE å®ç° PVE æ¨¡å¼çš„æ—¶å€™æ²¡æœ‰è€ƒè™‘åˆ°è¿™ä¸€ç‚¹ï¼Œé‚£ä¹ˆå°±å¾—é æˆ‘ä»¬æ¥æé†’ä»–å’¯ ï½ï¼ˆäººç±»æ‰³å›ä¸€å±€ ğŸ¥³ï¼‰</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b5de33059875469e9db58f90b31c4b8c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeGlhb2hlMDYwMQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765501197&amp;x-signature=raasnSpkKB24vOPhMNeHWMBDrdg%3D" alt="" loading="lazy"/></p>
<p>ç­‰å¾… TRAE ä¿®å¤åï¼Œåœ¨ PVE æ¨¡å¼ä¸‹ç‚¹å‡»ã€Œæ‚”æ£‹ã€æŒ‰é’®å°†æ’¤å›ä¸Šä¸€å›åˆç”µè„‘åŠç©å®¶çš„è½å­ï¼Œæ¸¸æˆå¯ä»¥æ­£å¸¸è¿›è¡Œäº†ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fd868d80fb634397a087b89b5e519d0a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeGlhb2hlMDYwMQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765501197&amp;x-signature=jPtEK4SWK87ujPqeDluLUYPj6kc%3D" alt="" loading="lazy"/></p>
<p>ä½“éªŒä¸€ç•ªä¸‹æ¥ï¼Œè¿™ä¸ªç”µè„‘ä¹Ÿå¤ªå¼± ğŸ‘ äº†å§ï¼ç©å®¶å¯ä»¥è½»æ¾å–èƒœï¼Œæ²¡æœ‰ä¸€ç‚¹æŒ‘æˆ˜æ€§ã€‚</p>
<p>æŠŠæˆ‘ä»¬çš„è¯‰æ±‚å‘Šè¯‰ TRAEï¼Œè®©ä»–ä¼˜åŒ–ç”µè„‘è½å­ç®—æ³•ï¼Œå¢å¼ºæ¸¸æˆæ€§ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/946d32c90ca1462eb913feff9bc33efd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeGlhb2hlMDYwMQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765501197&amp;x-signature=lZPpUieeJL1%2F3k1xVZeiJzEft10%3D" alt="" loading="lazy"/></p>
<p>ç»è¿‡ä¸€ç•ªæ€è€ƒï¼ŒTRAE è®¾è®¡äº†ä¸€å¥—åŸºäºä½ç½®è¯„åˆ†çš„æ™ºèƒ½ç®—æ³•ï¼Œè€ƒè™‘äº†è¿›æ”»å’Œé˜²å®ˆç­–ç•¥ï¼Œèƒ½å¤Ÿè¯„ä¼°ä¸åŒä½ç½®çš„ä¼˜å…ˆçº§ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8152f99bd66a4c4bbf31bf95e6d42591~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeGlhb2hlMDYwMQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765501197&amp;x-signature=p0BiEkCU4WLaQWrfqdapL17Qpas%3D" alt="" loading="lazy"/></p>
<p>å°ä½•èµ›åšä¸‹æ£‹å¶é‡è¶…å¼ºç”µè„‘é€‰æ‰‹ï¼Œè¡Œäº‘æµæ°´å¼ºå¦‚æ€ªç‰©ï¼Œæ‹¼å°½å…¨åŠ›ä¹Ÿæ— æ³•æˆ˜èƒœã€‚â˜¹ï¸</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/de467f84fcb2408fbb03229fb049cecf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeGlhb2hlMDYwMQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765501197&amp;x-signature=p6m1GiOzFC5r%2FdHPENZCzxfFpgI%3D" alt="" loading="lazy"/></p>
<p>è‡³æ­¤ï¼ŒTRAE å¸®æˆ‘ä»¬å®Œæˆäº†ä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„äº”å­æ£‹æ¸¸æˆï¼ŒæˆåŠŸè¾¾æˆæœ€åˆåŠŸèƒ½æ¸…å•æ‰€è®¾å®šçš„ç›®æ ‡ï¼Œæ¥ä¸‹æ¥ç»ˆäºå¯ä»¥è¿›å…¥æ­£é¢˜å•¦ï¼ä¸ºæ¸¸æˆåŠ å…¥ç›²ç›’é“å…·æœºåˆ¶ï¼Œæå‡æ¸¸æˆçš„è¶£å‘³æ€§ã€‚</p>
<p>æˆ‘è®¾è®¡äº†åˆ†ä¸ºã€Œå¼ºåŒ–ç±»ã€å’Œã€Œå¼±åŒ–ç±»ã€çš„ 8 ä¸ªä¸åŒé“å…·ï¼Œã€Œå¼ºåŒ–ç±»ã€é“å…·å¯ä»¥ç”¨äºæ”¹å–„è‡ªå·±çš„æ£‹å±€ï¼Œè€Œã€Œå¼±åŒ–ç±»ã€é“å…·åˆ™ä¼šç ´åè‡ªå·±çš„æ£‹å±€æˆ–è€…ä¸ºå¯¹æ‰‹æä¾›æœ‰åˆ©çš„æ•ˆæœã€‚</p>
<p>ç”±äºã€Œå¼±åŒ–ç±»ã€é“å…·çš„å­˜åœ¨ï¼Œç©å®¶ä¸èƒ½ä¸€å‘³åœ°é€‰æ‹©è§¦å‘é“å…·è€Œä¸æ•…ç°æœ‰å±€åŠ¿ï¼Œæ¯ä¸€æ¬¡å†³å®šå é¢†é“å…·å¯¹äºæ£‹å±€çš„å½±å“éƒ½æ˜¯æœªçŸ¥çš„ï¼Œè¯·å°å¿ƒä½œå‡ºä½ çš„æŠ‰æ‹©ï¼</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3326406841fb4f76a87413664047aa04~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeGlhb2hlMDYwMQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765501197&amp;x-signature=ztWi2fzk6QQCwDv7pTVY3cWebcY%3D" alt="" loading="lazy"/></p>
<p>è¿™æ˜¯ä¸€ä¸ªå…¨æ–°çš„é“å…·ç³»ç»Ÿï¼Œè®©æˆ‘ä»¬å¤šç»™ TRAE ä¸€äº›æ—¶é—´ã€‚</p>
<p>â€¦â€¦</p>
<p>åˆç»è¿‡è‹¥å¹²è½®çš„æ€è€ƒã€è§„åˆ’å’Œç¼–ç åï¼Œå¼€å‘æœåŠ¡é‡æ–°å¯åŠ¨ï¼Œå†…ç½®æµè§ˆå™¨è‡ªåŠ¨æ‰“å¼€ï¼ŒTRAE å®Œæˆäº†é“å…·ç³»ç»Ÿçš„å¼€å‘ï¼</p>
<p>è®©æˆ‘ä»¬ä¸€èµ·æ¥ä½“éªŒåŠ å…¥äº†ç›²ç›’é“å…·æœºåˆ¶çš„äº”å­æ£‹æ¸¸æˆå§ ï½</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8a8a7de67bdc435ea28a654efa12d9af~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeGlhb2hlMDYwMQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765501197&amp;x-signature=QxdcledFykvhcPcnt7tEqDlgbc4%3D" alt="" loading="lazy"/></p>
<p>TRAE å®ç°äº†é“å…·çš„éšæœºåˆ·æ–°ã€è‡ªåŠ¨è§¦å‘ä»¥åŠé“å…·è¯´æ˜å¼¹çª—åŠŸèƒ½ï¼Œå°½ç®¡é“å…·çš„æ•ˆæœå­˜åœ¨é—®é¢˜ï¼Œä½†æ˜¯å®Œæˆåº¦å·²ç»éå¸¸é«˜å•¦ï¼</p>
<p>æ¥ä¸‹æ¥å°±è¦é æˆ‘ä»¬ä¸º TRAE æŒ‡å‡ºé—®é¢˜æ‰€åœ¨ï¼Œå°†ä½“éªŒè¿‡ç¨‹ä¸­é‡åˆ°çš„é—®é¢˜ç®€å•æ€»ç»“åå‘ç»™ TRAE å³å¯ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0c38853c22bd4b54a2ce99f4df2b2b56~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeGlhb2hlMDYwMQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765501197&amp;x-signature=B4FyNgAEERwWBzTG%2F7eV605H5YI%3D" alt="" loading="lazy"/></p>
<p>ç»è¿‡ä¸€ç•ªä¿®å¤ï¼Œå¯¹äºéƒ¨åˆ†å½±å“è½å­æ¬¡æ•°æˆ–é¡ºåºçš„é“å…·è¿ç»­è§¦å‘æ‰€å¯¼è‡´çš„è®¡æ•°é—®é¢˜ TRAE ä¾ç„¶ä¸èƒ½æ­£ç¡®å¤„ç†ï¼Œæ­¤æ—¶éœ€è¦æˆ‘ä»¬æé†’ä»–åº”è¯¥è®¾è®¡ä¸€ä¸ªã€Œè½å­è®¡æ•°ç³»ç»Ÿã€ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/12ec086379ce4420b49cd390880fe7ef~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeGlhb2hlMDYwMQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765501197&amp;x-signature=d3ciCly8RI3rgzf8kbgWgYEaxMc%3D" alt="" loading="lazy"/></p>
<p>ä¸€ä¸ªå®Œæ•´çš„ã€Œé“å…·äº”å­æ£‹ã€æ¸¸æˆè¯ç”Ÿå•¦ï¼ğŸ‰</p>
<p>æ— è®ºæ˜¯ã€Œç©å®¶ VS ç©å®¶ã€è¿˜æ˜¯ã€Œç©å®¶ VS ç”µè„‘ã€æ¨¡å¼ï¼Œæ¸¸æˆéƒ½èƒ½æŒ‰ç…§é¢„æœŸæ­£å¸¸åˆ·æ–°å’Œè§¦å‘é“å…·ï¼Œå¹¶ä¸”è¿˜æä¾›äº†æ¸¸æˆé“å…·æ—¥å¿—ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/290e4eabe6fe46f492abdf829313a89b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeGlhb2hlMDYwMQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765501197&amp;x-signature=W9J%2BO7D3zZnjldo2XcG4gyBqd4M%3D" alt="" loading="lazy"/></p>
<p>æœ€åï¼Œå†è®© TRAE ä¼˜åŒ–ä¸€ä¸‹æ¸¸æˆç•Œé¢çš„å¸ƒå±€ï¼Œç°åœ¨çš„æ¸¸æˆç•Œé¢å®åœ¨æ˜¯å¤ªé•¿äº†ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/78103d7d054c457e88f6d63407b8b3f4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeGlhb2hlMDYwMQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765501197&amp;x-signature=CDJHFweoVG2HGrsFifvsjI%2Ff0RY%3D" alt="" loading="lazy"/></p>
<p>æ¸¸æˆç•Œé¢ä¼˜åŒ–ç»“æœéå¸¸å®Œç¾ï¼Œæˆ‘å®£å¸ƒ TRAE æ­£å¼ SOLO å‡ºé“ï¼ğŸ«°</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b7751375aba14258b3081262bddd1e0e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeGlhb2hlMDYwMQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765501197&amp;x-signature=E7DUbqyYtIP92qwh47e5w4vCr%2BM%3D" alt="" loading="lazy"/></p>
<p>ä½œä¸ºä¸€ä¸ªæ²¡æœ‰ä»»ä½•æ¸¸æˆå¼€å‘ç»éªŒçš„å°ç™½ï¼Œèƒ½å¤Ÿä¸å†™ä¸€è¡Œä»£ç å®Œå…¨é€šè¿‡èŠå¤©å®ç°ä¸€ä¸ªå®Œæ•´çš„æ¸¸æˆï¼ˆè™½ç„¶åªæ˜¯ä¸€ä¸ªç®€å•çš„æ£‹ç‰Œæ¸¸æˆï¼‰ï¼Œæ˜¯å¾ˆé…·çš„ä¸€ä»¶äº‹æƒ…ï¼ğŸ˜</p>
<h2 data-id="heading-2">ğŸ® åœ¨çº¿ä½“éªŒ</h2>
<p>ã€Œé“å…·ç‰ˆäº”å­æ£‹ã€å·²é€šè¿‡ Netlify éƒ¨ç½²åˆ°çº¿ä¸Šï¼Œæ¬¢è¿ä½“éªŒï¼</p>
<p>ğŸ‘‰ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgomoku-next.netlify.app" target="_blank" title="https://gomoku-next.netlify.app" ref="nofollow noopener noreferrer">Gomoku Next</a> (å¯èƒ½éœ€è¦é­”æ³• ğŸª„ ä¸Šç½‘)</p>
<h2 data-id="heading-3">ğŸ–¥ï¸ æºç </h2>
<p>é¡¹ç›®çš„å®Œæ•´ä»£ç å¯ä»¥åœ¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fxiaohe0601%2Fgomoku-next" target="_blank" title="https://github.com/xiaohe0601/gomoku-next" ref="nofollow noopener noreferrer">gomoku-next</a> ä»“åº“ä¸­æŸ¥çœ‹ã€‚</p>
<p>èµ äººç«ç‘°ï¼Œæ‰‹ç•™ä½™é¦™ï¼Œå¦‚æœå¯¹ä½ æœ‰å¸®åŠ©å¯ä»¥ç»™æˆ‘ä¸€ä¸ª â­ï¸ é¼“åŠ±ï¼Œè¿™å°†æ˜¯æˆ‘ç»§ç»­å‰è¿›çš„åŠ¨åŠ›ï¼Œè°¢è°¢å¤§å®¶ ğŸ™ï¼</p>
<h2 data-id="heading-4">ğŸµ å†™åœ¨æœ€å</h2>
<p>æˆ‘æ˜¯ xiaohe0601ï¼Œçƒ­çˆ±ä»£ç ï¼Œç›®å‰ä¸“æ³¨äº Web å‰ç«¯é¢†åŸŸã€‚</p>
<p>æ¬¢è¿å…³æ³¨æˆ‘çš„å¾®ä¿¡å…¬ä¼—å·ã€Œå°ä½•ä¸ä¼šå†™ä»£ç ã€ï¼Œæˆ‘ä¼šä¸å®šæœŸåˆ†äº«ä¸€äº›å¼€å‘å¿ƒå¾—ã€æœ€ä½³å®è·µä»¥åŠæŠ€æœ¯æ¢ç´¢ç­‰å†…å®¹ï¼Œå¸Œæœ›èƒ½å¤Ÿå¸®åˆ°ä½ ï¼</p>
<h2 data-id="heading-5">ğŸ“š æ¨èé˜…è¯»</h2>
<ul>
<li><a href="https://juejin.cn/post/7571846248719581184" target="_blank" title="https://juejin.cn/post/7571846248719581184">å‰ç«¯ä¸æ˜¯åªä¼šå†™ç®¡ç†åå°ï¼Œæˆ‘ç”¨ 400 è¡Œä»£ç ç”»äº†ä¸€ä¸ª LABUBU ï¼</a></li>
<li><a href="https://juejin.cn/post/7533434265414189091" target="_blank" title="https://juejin.cn/post/7533434265414189091">å½“å¹´å·å·ç©å°éœ¸ç‹ï¼Œç°åœ¨å·å·ç”¨ Trae Solo å¤åˆ»å¦å…‹å¤§æˆ˜</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[PHP Parse error: syntax error 5åˆ†é’Ÿå¸¦ä½ è§£å†³è¯­æ³•é”™è¯¯]]></title>    <link>https://juejin.cn/post/7580270531469803566</link>    <guid>https://juejin.cn/post/7580270531469803566</guid>    <pubDate>2025-12-06T06:06:24.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7580270531469803566" data-draft-id="7580233527285399602" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="PHP Parse error: syntax error 5åˆ†é’Ÿå¸¦ä½ è§£å†³è¯­æ³•é”™è¯¯ "/> <meta itemprop="keywords" content="PHP"/> <meta itemprop="datePublished" content="2025-12-06T06:06:24.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æˆ·60732036945"/> <meta itemprop="url" content="https://juejin.cn/user/2156565626632060"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            PHP Parse error: syntax error 5åˆ†é’Ÿå¸¦ä½ è§£å†³è¯­æ³•é”™è¯¯ 
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2156565626632060/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æˆ·60732036945
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-06T06:06:24.000Z" title="Sat Dec 06 2025 06:06:24 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p><strong>ä¸€å¥è¯æ€»ç»“ï¼š</strong><br/>
åªè¦ PHP è¿â€œä»£ç ç»“æ„â€éƒ½è®¤ä¸å‡ºæ¥ï¼Œå®ƒå°±ä¼šæŠ› <strong>Parse errorï¼ˆè¯­æ³•è§£æé”™è¯¯ï¼‰</strong> â€”â€” æ˜¯å†™ PHP æœ€å¸¸è§ã€æœ€ç®€å•ï¼Œå´æœ€è®©äººå¤´ç–¼çš„é”™è¯¯ã€‚</p>
</blockquote>
<p>ä½ å¯èƒ½å·²ç»é‡åˆ°è¿‡ï¼š</p>
<pre><code class="hljs language-go" lang="go">Parse <span class="hljs-type">error</span>: syntax <span class="hljs-type">error</span>, unexpected <span class="hljs-string">'}'</span> in xxx.php on line <span class="hljs-number">28</span>
</code></pre>
<p>è¿™ç©æ„æœ€æ°”äººçš„æ˜¯â€”â€”<br/>
<strong>å®ƒä¸å‘Šè¯‰ä½ çœŸæ­£çš„é”™è¯¯ï¼Œåªå‘Šè¯‰ä½ â€œè¿™é‡Œè§£æä¸ä¸‹å»äº†â€ã€‚</strong></p>
<p>åˆ«æ…Œï¼Œè¿™ç¯‡æ–‡ç« ä¼šç”¨<strong>å°ç™½ä¹Ÿèƒ½é©¬ä¸Šä¸Šæ‰‹çš„æ–¹æ³•</strong>ï¼Œå¸¦ä½  5 åˆ†é’Ÿå®šä½é—®é¢˜ã€‚</p>
<hr/>
<h2 data-id="heading-0"><strong>ä¸€ã€Parse error æ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆè¿™ä¹ˆçƒ¦ï¼Ÿ</strong></h2>
<p>è¯­æ³•é”™è¯¯å±äº <strong>PHP æœ€åº•å±‚çš„é”™è¯¯</strong>ï¼š</p>
<ul>
<li>è¿æ‰§è¡Œéƒ½æ²¡æ‰§è¡Œ</li>
<li>ä»£ç è¿˜æ²¡è¿è¡Œåˆ°é‚£ä¸€è¡Œ</li>
<li>ç¼–è¯‘é˜¶æ®µç›´æ¥å´©</li>
</ul>
<p>å°±å¥½æ¯”ï¼š</p>
<blockquote>
<p>ä½ å†™ä½œæ–‡ï¼Œä½†å¥å­ç»“æ„å¤ªä¹±ï¼Œè€å¸ˆçœ‹ä¸æ‡‚ï¼Œç›´æ¥é€€å›æ¥è®©ä½ é‡å†™ã€‚</p>
</blockquote>
<p>å¸¸è§æŠ¥é”™æ ¼å¼å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-go" lang="go">Parse <span class="hljs-type">error</span>: syntax <span class="hljs-type">error</span>, unexpected T_STRING
Parse <span class="hljs-type">error</span>: unexpected T_VARIABLE
Parse <span class="hljs-type">error</span>: unexpected <span class="hljs-string">'}'</span> 
Parse <span class="hljs-type">error</span>: unexpected <span class="hljs-string">'='</span> 
</code></pre>
<p>æ„æ€æ˜¯ï¼š</p>
<ul>
<li>æˆ‘çœ‹åˆ°ä¸€ä¸ªâ€œæˆ‘ä¸è®¤è¯† / ä¸è¯¥å‡ºç°åœ¨è¿™çš„ç¬¦å·â€</li>
<li>æˆ‘è§£æä¸ä¸‹å»äº†</li>
<li>ä½ è¿™ä¸ªæ–‡ä»¶æœ‰ç»“æ„é—®é¢˜</li>
</ul>
<p>è€Œä¸”ï¼Œ<strong>çœŸæ­£çš„é”™è¯¯å¾ˆå¯èƒ½ä¸åœ¨æŠ¥é”™é‚£è¡Œï¼Œè€Œæ˜¯åœ¨å®ƒå‰ä¸€è¡Œï¼</strong></p>
<p>è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆå¤§å®¶ä¼šè§‰å¾—å®ƒéš¾æŸ¥ã€‚</p>
<hr/>
<h2 data-id="heading-1"><strong>äºŒã€5 åˆ†é’Ÿæ’æŸ¥è¯­æ³•é”™è¯¯ï¼šæœ€é€šç”¨çš„ 5 æ­¥æµç¨‹</strong></h2>
<p>ä½ ç…§ç€ä¸‹é¢çš„æµç¨‹èµ°ï¼ŒåŸºæœ¬ä¸Šèƒ½æŠŠæ‰€æœ‰ Parse error è§£å†³æ‰ã€‚</p>
<p>æˆ‘åœ¨è¿™é‡Œé¢„ç•™ã€å›¾1ï¼šParse error æ’æŸ¥æµç¨‹å›¾ã€‘ï¼Œ<br/>
ä½ è¦ PNG æˆ‘ç«‹åˆ»ç”Ÿæˆã€‚</p>
<hr/>
<h2 data-id="heading-2"><strong>ã€å›¾1ã€‘PHP Parse error æ’æŸ¥æµç¨‹å›¾</strong></h2>
<pre><code class="hljs language-go" lang="go">           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚ å‡ºç° Parse <span class="hljs-type">error</span>ï¼Ÿ â”‚
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â†“
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ çœ‹æŠ¥é”™è¡Œçš„å‰ä¸€è¡Œæ˜¯å¦æ¼ç¬¦å· â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â†“
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚ æ£€æŸ¥æ‹¬å·/å¤§æ‹¬å·/å¼•å·æ˜¯å¦æˆå¯¹   â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â†“
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ æ£€æŸ¥æ•°ç»„ã€å­—ç¬¦ä¸²ã€å‡½æ•°ç»“å°¾æ˜¯å¦æ¼åˆ†å· â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â†“
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ æ˜¯å¦ç²˜è´´äº†å¥‡æ€ªå­—ç¬¦ï¼ˆä¸­æ–‡ç¬¦å·/BOMï¼‰ â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â†“
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚ ä»æœªè§£å†³ï¼ŸæŠŠä»£ç ç¼©è¿›é‡æ–°æ ¼å¼åŒ– â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<hr/>
<h2 data-id="heading-3"><strong>ä¸‰ã€æœ€å¸¸è§çš„ 10 ç§ syntax error åŸå› ï¼ˆä½ è‚¯å®šè¸©è¿‡æŸæ¡ï¼‰</strong></h2>
<hr/>
<h3 data-id="heading-4"><strong>1ï¼‰æ¼åˆ†å·ï¼ˆæœ€ç»å…¸ï¼Œ80% æ–°æ‰‹éƒ½è¸©ï¼‰</strong></h3>
<pre><code class="hljs language-ini" lang="ini">$<span class="hljs-attr">a</span> = <span class="hljs-number">1</span>
$<span class="hljs-attr">b</span> = <span class="hljs-number">2</span><span class="hljs-comment">;</span>
</code></pre>
<p>ç¼ºå°‘ <code>;</code></p>
<p>æŠ¥é”™è¡Œä¸€èˆ¬æ˜¾ç¤ºç¬¬äºŒè¡Œã€‚</p>
<hr/>
<h3 data-id="heading-5"><strong>2ï¼‰å¤šäº†ä¸€ä¸ªé€—å·ã€å°‘äº†ä¸€ä¸ªé€—å·</strong></h3>
<pre><code class="hljs language-ini" lang="ini">$<span class="hljs-attr">arr</span> = [
    <span class="hljs-string">'a'</span> =&gt; <span class="hljs-number">1</span>ï¼Œ
    <span class="hljs-string">'b'</span> =&gt; <span class="hljs-number">2</span>,
]<span class="hljs-comment">;</span>
</code></pre>
<p>ä¸­æ–‡é€—å·ï¼ˆï¼ï¼ï¼ï¼‰</p>
<hr/>
<h3 data-id="heading-6"><strong>3ï¼‰æ‹¬å·ä¸æˆå¯¹ï¼š() {} []</strong></h3>
<p>åƒä¸‡åˆ«å°çœ‹ï¼Œè¿™ç§é”™è¯¯æœ€çƒ¦ï¼</p>
<p>ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-keyword">if</span> (<span class="hljs-variable">$a</span> &gt; 1 {
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"ok"</span>;
}
</code></pre>
<p>æ¼ <code>)</code></p>
<hr/>
<h3 data-id="heading-7"><strong>4ï¼‰å­—ç¬¦ä¸²å¼•å·æ²¡é—­åˆ</strong></h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">echo</span> <span class="hljs-string">"hello;
</span></code></pre>
<p>PHP ä¼šä¸€ç›´å¾€ä¸‹â€œæ‰¾â€å¼•å·ï¼Œæ‰€ä»¥é”™è¯¯ä½ç½®ä¸€èˆ¬å®Œå…¨ä¸åœ¨æŠ¥é”™è¡Œã€‚</p>
<hr/>
<h3 data-id="heading-8"><strong>5ï¼‰æ•°ç»„é‡Œçš„ key/value å†™é”™</strong></h3>
<pre><code class="hljs language-ini" lang="ini">$<span class="hljs-attr">arr</span> = [
    a =&gt; <span class="hljs-number">11</span>,   // å°‘å¼•å· âŒ
    <span class="hljs-string">'b'</span> =&gt; <span class="hljs-number">22</span>,
]<span class="hljs-comment">;</span>
</code></pre>
<hr/>
<h3 data-id="heading-9"><strong>6ï¼‰function/class å…³é”®å­—å†™é”™</strong></h3>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-function">fuction <span class="hljs-title">test</span>()</span> { }
</code></pre>
<p>ä½ çœ‹å¾—æ‡‚ï¼ŒPHP çœ‹ä¸æ‡‚ã€‚</p>
<hr/>
<h3 data-id="heading-10"><strong>7ï¼‰å˜é‡åå‰å¤šç©ºæ ¼ã€å¤šå¥‡æ€ªå­—ç¬¦ï¼ˆç²˜è´´ä»£ç æœ€å®¹æ˜“å‡ºç°ï¼‰</strong></h3>
<pre><code class="hljs language-ini" lang="ini">$ï»¿<span class="hljs-attr">name</span> = <span class="hljs-string">"abc"</span><span class="hljs-comment">;   // å‰é¢æœ‰ä¸å¯è§å­—ç¬¦</span>
</code></pre>
<p>è‚‰çœ¼çœ‹ä¸åˆ°ï¼Œä½† PHP æŠ¥é”™ã€‚</p>
<hr/>
<h3 data-id="heading-11"><strong>8ï¼‰ä¸­æ–‡ç¬¦å·æ··å…¥ï¼šå¼•å·ã€æ‹¬å·ã€åˆ†å·</strong></h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-keyword">if</span>ï¼ˆ<span class="hljs-variable">$a</span> == 1ï¼‰{
    <span class="hljs-built_in">echo</span> â€œokâ€ï¼›
}
</code></pre>
<p>è¿™æ˜¯æœ€å®¹æ˜“ä»åˆ«äººæ–‡æ¡£é‡Œç²˜è´´å‡ºæ¥çš„ã€‚</p>
<hr/>
<h3 data-id="heading-12"><strong>9ï¼‰æ–‡ä»¶å¼€å¤´æœ‰ BOMï¼ˆUTF-8 ä¿å­˜ä¸è§„èŒƒï¼‰</strong></h3>
<p>ä½ çœ‹åˆ°è¿™æ ·çš„æŠ¥é”™æ—¶ï¼š</p>
<pre><code class="hljs language-go" lang="go">syntax <span class="hljs-type">error</span>, unexpected <span class="hljs-string">'&lt;'</span>
</code></pre>
<p>åæœ‰å…«ä¹æ˜¯ï¼š</p>
<ul>
<li>æ–‡ä»¶ä»¥ UTF-8 BOM ä¿å­˜</li>
<li>PHP è§£æå™¨æŠŠ BOM å½“æˆå†…å®¹</li>
</ul>
<p>è§£å†³æ–¹æ³•ï¼š<br/>
ç”¨ <strong>Notepad++ / VSCode</strong> ä¿å­˜æˆï¼š</p>
<p>âœ” UTF-8ï¼ˆæ—  BOMï¼‰</p>
<hr/>
<h3 data-id="heading-13"><strong>10ï¼‰å¤šä¸€ä¸ª } æˆ–å°‘ä¸€ä¸ª }</strong></h3>
<p>æ¯”å¦‚ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">test</span>(<span class="hljs-params"/>) </span>{
    <span class="hljs-keyword">if</span> (<span class="hljs-variable">$a</span>) {
}
</code></pre>
<p>æˆ–è€…ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">test</span>(<span class="hljs-params"/>) </span>{
    <span class="hljs-keyword">echo</span> <span class="hljs-string">"hi"</span>;
}}  <span class="hljs-comment">// å¤šäº†ä¸€ä¸ª</span>
</code></pre>
<p>è¿™ç±»é”™è¯¯ PHP æ°¸è¿œè§£æä¸å‡ºæ¥ã€‚</p>
<hr/>
<h2 data-id="heading-14"><strong>å››ã€æœ€ç²¾å‡†çš„å®šä½æ–¹æ³•ï¼ˆé«˜æ‰‹éƒ½è¿™æ ·æŸ¥ï¼‰</strong></h2>
<p>è¿™é‡Œé€ä½ ä¸€ä¸ª <strong>ä¸‡èƒ½å®šä½æ³•</strong>â€”â€”æ–°æ‰‹ç”¨ä¸€æ¬¡å°±ä¼šçˆ±ä¸Šã€‚</p>
<hr/>
<h3 data-id="heading-15"><strong>æ–¹å¼ 1ï¼šçœ‹æŠ¥é”™è¡Œçš„â€œå‰ä¸€è¡Œâ€</strong></h3>
<p>å‡è®¾æŠ¥é”™ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">unexpected <span class="hljs-string">'}'</span> in test.php on line <span class="hljs-number">40</span>
</code></pre>
<p>ä¸€èˆ¬ä¸æ˜¯ 40 è¡Œçš„é—®é¢˜ï¼Œè€Œæ˜¯ï¼š</p>
<p>â†’ <strong>39 è¡Œæ¼äº†ä¸€ä¸ªåˆ†å· / å¼•å· / æ‹¬å·</strong></p>
<p>æ‰€ä»¥ç¬¬ä¸€æ­¥æ°¸è¿œæ˜¯ï¼š</p>
<p><strong>çœ‹æŠ¥é”™è¡Œçš„å‰ä¸€è¡Œã€‚</strong></p>
<hr/>
<h3 data-id="heading-16"><strong>æ–¹å¼ 2ï¼šæŠŠä»£ç ç²˜åˆ° PHP åœ¨çº¿ lint å·¥å…·</strong></h3>
<p>ä¾‹å¦‚ï¼š</p>
<ul>
<li>phpcodechecker</li>
<li>phplint</li>
<li>php.sensiolabs</li>
</ul>
<p>å®ƒä»¬ä¼šå‘Šè¯‰ä½ ï¼š</p>
<ul>
<li>å“ªä¸€è¡Œé”™</li>
<li>å“ªä¸ªç¬¦å·é”™</li>
<li>ä»€ä¹ˆè¯­æ³•ä¸æ”¯æŒ</li>
</ul>
<p>éå¸¸å¿«ã€‚</p>
<hr/>
<h3 data-id="heading-17"><strong>æ–¹å¼ 3ï¼šç”¨ VSCode / PHPStorm è‡ªåŠ¨æ ¼å¼åŒ–</strong></h3>
<p>åœ¨ VSCode ä¸­ï¼š</p>
<pre><code class="hljs language-r" lang="r">Shift <span class="hljs-operator">+</span> Alt <span class="hljs-operator">+</span> <span class="hljs-built_in">F</span>
</code></pre>
<p>æ ¼å¼åŒ–åï¼š</p>
<ul>
<li>å“ªä¸€æ®µæ²¡é—­åˆå°±ä¼šç¼©è¿›å¼‚å¸¸</li>
<li>é”™è¯¯ä½ç½®ä¸€çœ¼èƒ½çœ‹å‡ºæ¥</li>
</ul>
<p>è¿™æ˜¯æœ€ç¨³å®šçš„æŸ¥é”™æ–¹å¼ã€‚</p>
<hr/>
<h3 data-id="heading-18"><strong>æ–¹å¼ 4ï¼šé€æ®µæ³¨é‡Šæ³•ï¼ˆè€ç¨‹åºå‘˜æœ€å¸¸ç”¨ï¼‰</strong></h3>
<p>å¦‚æœé”™è¯¯å¤ªæ·±å¤ªä¹±ï¼Œä½ å¯ä»¥ï¼š</p>
<ul>
<li>ä¸€æ®µæ®µæ³¨é‡Šæ‰</li>
<li>çœ‹å“ªä¸ªæ®µæ³¨é‡Šæ‰åä¸æŠ¥é”™äº†</li>
</ul>
<p>å°±èƒ½å®šä½æ˜¯å“ªä¸€å—ä»£ç å‡ºé”™ã€‚</p>
<hr/>
<h2 data-id="heading-19"><strong>äº”ã€å®æˆ˜ç¤ºä¾‹ï¼š5 ä¸ªæœ€å¸¸è§çš„ Parse error</strong></h2>
<hr/>
<h3 data-id="heading-20"><strong>ç¤ºä¾‹ 1ï¼šæ¼åˆ†å·</strong></h3>
<h4 data-id="heading-21">é”™è¯¯ä»£ç ï¼š</h4>
<pre><code class="hljs language-ini" lang="ini">$<span class="hljs-attr">a</span> = <span class="hljs-number">1</span>
$<span class="hljs-attr">b</span> = <span class="hljs-number">2</span><span class="hljs-comment">;</span>
</code></pre>
<h4 data-id="heading-22">æŠ¥é”™ï¼š</h4>
<pre><code class="hljs language-dart" lang="dart">unexpected <span class="hljs-string">'<span class="hljs-subst">$b</span>'</span>
</code></pre>
<h4 data-id="heading-23">è§£å†³ï¼š</h4>
<p>è¡¥ <code>;</code></p>
<hr/>
<h3 data-id="heading-24"><strong>ç¤ºä¾‹ 2ï¼šä¸­æ–‡ç¬¦å·</strong></h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-keyword">if</span>ï¼ˆ<span class="hljs-variable">$a</span> == 1ï¼‰{
    <span class="hljs-built_in">echo</span> â€œokâ€ï¼›
}
</code></pre>
<p>å…¨éƒ¨æ›¿æ¢ä¸ºè‹±æ–‡ç¬¦å·å³å¯ã€‚</p>
<hr/>
<h3 data-id="heading-25"><strong>ç¤ºä¾‹ 3ï¼šæ•°ç»„ key å°‘å¼•å·</strong></h3>
<pre><code class="hljs language-ini" lang="ini">$<span class="hljs-attr">arr</span> = [
    name =&gt; <span class="hljs-string">"jake"</span>,
]<span class="hljs-comment">;</span>
</code></pre>
<p>æ”¹ä¸ºï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">'arr'</span> =&gt; ...
</code></pre>
<hr/>
<h3 data-id="heading-26"><strong>ç¤ºä¾‹ 4ï¼šå¼•å·æ²¡é—­åˆ</strong></h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">echo</span> <span class="hljs-string">"hello;
</span></code></pre>
<p>PHP ä¼šä»è¿™ä¸€è¡Œå¼€å§‹æŠ¥é”™ä¸€ç›´åˆ°æ–‡ä»¶æœ«å°¾ã€‚</p>
<p>ä¿®å¥½å¼•å·å³å¯ã€‚</p>
<hr/>
<h3 data-id="heading-27"><strong>ç¤ºä¾‹ 5ï¼šclass å¤šäº†ä¸€ä¸ª }</strong></h3>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">class</span> <span class="hljs-title">A</span> {
    <span class="hljs-function">function <span class="hljs-title">test</span>()</span> {}
}}
</code></pre>
<p>æ ¼å¼åŒ–åå°±èƒ½ç«‹åˆ»çœ‹å‡ºå¤šäº†ä¸€ä¸ª braceã€‚</p>
<hr/>
<h2 data-id="heading-28"><strong>å…­ã€å¿«é€Ÿæ’æŸ¥æŠ€å·§ï¼ˆéå¸¸å®ç”¨ï¼‰</strong></h2>
<p>ä¸‹é¢è¿™äº›æŠ€å·§æ˜¯è€ PHP ç¨‹åºå‘˜çš„å‹ç®±åº•ç»éªŒã€‚</p>
<hr/>
<h4 data-id="heading-29">âœ” ç”¨ VSCode æ˜¾ç¤ºä¸å¯è§å­—ç¬¦</h4>
<p>èƒ½çœ‹åˆ° BOMã€TABã€å¥‡æ€ªç©ºæ ¼ã€‚</p>
<hr/>
<h4 data-id="heading-30">âœ” ç”¨ diff æ¯”è¾ƒä½ æ”¹è¿‡çš„å†…å®¹</h4>
<p>æ–°é”™è¯¯å¤§æ¦‚ç‡æ˜¯ä½ æœ€è¿‘åŠ¨çš„é‚£å‡ è¡Œã€‚</p>
<hr/>
<h4 data-id="heading-31">âœ” å¯¹é…ç½®æ–‡ä»¶ï¼Œä¸€å®šè¦æ£€æŸ¥æœ€åä¸€è¡Œæ˜¯å¦æœ‰å¤šä½™ç©ºç™½è¡Œ</h4>
<p>ä¾‹å¦‚ <code>config.php</code> å‡ºç°ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">unexpected <span class="hljs-string">'return'</span>
</code></pre>
<p>å¤šåŠæ˜¯å› ä¸ºï¼š</p>
<ul>
<li>å‰é¢å¤šä¸€ä¸ªä¸å¯è§å­—ç¬¦</li>
<li>æˆ–æœ€åçš„ <code>?&gt;</code> å‰æœ‰ BOM</li>
</ul>
<p>PHP çš„ Parse error è™½ç„¶çƒ¦ï¼Œä½†æœ¬è´¨ä¸Šå°±ä¸€å¥è¯ï¼š</p>
<blockquote>
<p><strong>ä½ çš„ä»£ç ç»“æ„ä¸å®Œæ•´ï¼ŒPHP è§£æä¸ä¸‹å»äº†ã€‚</strong></p>
</blockquote>
<p>è§£å†³è·¯çº¿æ°¸è¿œæ˜¯ï¼š</p>
<ol>
<li>çœ‹æŠ¥é”™è¡Œçš„å‰ä¸€è¡Œ</li>
<li>æŸ¥åˆ†å·</li>
<li>æŸ¥å¼•å·</li>
<li>æŸ¥æ‹¬å·</li>
<li>æŸ¥ä¸­æ–‡ç¬¦å·</li>
<li>æŸ¥ BOM</li>
<li>æ ¼å¼åŒ–ä»£ç æ‰¾ç¼©è¿›å¼‚å¸¸</li>
</ol>
<p>ç…§è¿™ä¸ªæµç¨‹èµ°ï¼Œä½  5 åˆ†é’Ÿå°±èƒ½æ‰¾åˆ°é—®é¢˜ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[MySQLé…ç½®æ–‡ä»¶ä¼˜åŒ–è¯¦è§£ï¼šæå‡æ•°æ®åº“æ€§èƒ½çš„å…³é”®å‚æ•°é…ç½®]]></title>    <link>https://juejin.cn/post/7580287891272663103</link>    <guid>https://juejin.cn/post/7580287891272663103</guid>    <pubDate>2025-12-06T06:14:22.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7580287891272663103" data-draft-id="7580282751627739177" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="MySQLé…ç½®æ–‡ä»¶ä¼˜åŒ–è¯¦è§£ï¼šæå‡æ•°æ®åº“æ€§èƒ½çš„å…³é”®å‚æ•°é…ç½®"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-06T06:14:22.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="CyberShen"/> <meta itemprop="url" content="https://juejin.cn/user/554609587530014"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            MySQLé…ç½®æ–‡ä»¶ä¼˜åŒ–è¯¦è§£ï¼šæå‡æ•°æ®åº“æ€§èƒ½çš„å…³é”®å‚æ•°é…ç½®
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/554609587530014/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    CyberShen
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-06T06:14:22.000Z" title="Sat Dec 06 2025 06:14:22 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>MySQLä½œä¸ºæœ€æµè¡Œçš„å¼€æºå…³ç³»å‹æ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼Œå…¶æ€§èƒ½ä¼˜åŒ–æ˜¯æ¯ä¸ªå¼€å‘è€…å’Œç®¡ç†å‘˜éƒ½éœ€è¦æŒæ¡çš„å…³é”®æŠ€èƒ½ã€‚è€Œé…ç½®æ–‡ä»¶ä¼˜åŒ–åˆ™æ˜¯MySQLæ€§èƒ½è°ƒä¼˜ä¸­æˆæœ¬æœ€ä½ã€è§æ•ˆæœ€å¿«çš„æ–¹æ³•ä¹‹ä¸€ã€‚æœ¬æ–‡å°†æ·±å…¥è§£æMySQLé…ç½®æ–‡ä»¶ï¼ˆmy.cnfæˆ–my.iniï¼‰ä¸­å„é¡¹å…³é”®å‚æ•°çš„é…ç½®æŠ€å·§ï¼Œå¸®åŠ©ä½ æœ€å¤§é™åº¦æå‡æ•°æ®åº“æ€§èƒ½ã€‚</p>
<br/>
<h2 data-id="heading-0">ä¸€ã€MySQLé…ç½®æ–‡ä»¶åŸºç¡€</h2>
<p>MySQLçš„ä¸»è¦é…ç½®æ–‡ä»¶æ˜¯<code>my.cnf</code>ï¼ˆLinux/Unixç³»ç»Ÿï¼‰æˆ–<code>my.ini</code>ï¼ˆWindowsç³»ç»Ÿï¼‰ã€‚åœ¨Linuxç³»ç»Ÿä¸­ï¼Œå®ƒé€šå¸¸ä½äº<code>/etc/my.cnf</code>æˆ–<code>/etc/mysql/my.cnf</code>ï¼›åœ¨Windowsç³»ç»Ÿä¸­ï¼Œåˆ™é€šå¸¸ä½äº<code>C:\ProgramData\MySQL\MySQL Server 8.0\my.ini</code>ã€‚ <strong>ç¼–è¾‘é…ç½®æ–‡ä»¶å‰ï¼Œè¯·åŠ¡å¿…å¤‡ä»½åŸæ–‡ä»¶</strong>ï¼Œè¿™æ˜¯ä»»ä½•é…ç½®è°ƒæ•´çš„ç¬¬ä¸€æ­¥å®‰å…¨æªæ–½ã€‚ä¿®æ”¹é…ç½®æ–‡ä»¶åï¼Œéœ€è¦é‡å¯MySQLæœåŠ¡æ‰èƒ½ä½¿æ›´æ”¹ç”Ÿæ•ˆã€‚</p>
<br/>
<h2 data-id="heading-1">äºŒã€å†…å­˜ç›¸å…³å‚æ•°ä¼˜åŒ–</h2>
<p>å†…å­˜é…ç½®æ˜¯å½±å“MySQLæ€§èƒ½çš„æœ€å…³é”®å› ç´ ï¼Œåˆç†çš„è®¾ç½®å¯ä»¥å¤§å¹…å‡å°‘ç£ç›˜I/Oæ“ä½œã€‚</p>
<h3 data-id="heading-2">1. InnoDBç¼“å†²æ± é…ç½®</h3>
<p><code>innodb_buffer_pool_size</code>ï¼šè¿™æ˜¯<strong>æœ€é‡è¦çš„MySQLæ€§èƒ½å‚æ•°</strong>ï¼Œå†³å®šäº†InnoDBå­˜å‚¨å¼•æ“å¯ä»¥ä½¿ç”¨å¤šå°‘å†…å­˜æ¥ç¼“å­˜æ•°æ®å’Œç´¢å¼•ã€‚å¯¹äºä¸“ç”¨æ•°æ®åº“æœåŠ¡å™¨ï¼Œå»ºè®®è®¾ç½®ä¸ºç‰©ç†å†…å­˜çš„<strong>50%-80%</strong> ã€‚ <code>innodb_buffer_pool_instances</code>ï¼šå°†ç¼“å†²æ± åˆ’åˆ†ä¸ºå¤šä¸ªå®ä¾‹ï¼Œå‡å°‘å¹¶å‘è®¿é—®æ—¶çš„é”ç«äº‰ã€‚å¯¹äºå¤§å†…å­˜æœåŠ¡å™¨ï¼ˆå¦‚32Gä»¥ä¸Šï¼‰ï¼Œå»ºè®®è®¾ç½®ä¸º<strong>8</strong>æˆ–æ›´å¤šã€‚</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># ç¤ºä¾‹é…ç½®ï¼ˆ8æ ¸32GæœåŠ¡å™¨ï¼‰</span>
<span class="hljs-attr">innodb_buffer_pool_size</span> = <span class="hljs-number">16</span>G
<span class="hljs-attr">innodb_buffer_pool_instances</span> = <span class="hljs-number">8</span>
</code></pre>
<h3 data-id="heading-3">2. æ—¥å¿—ç¼“å†²åŒºé…ç½®</h3>
<p><code>innodb_log_buffer_size</code>ï¼šäº‹åŠ¡æ—¥å¿—ç¼“å†²åŒºå¤§å°ï¼Œå¤§äº‹åŠ¡å¯é€‚å½“å¢åŠ ã€‚æ¨èå€¼ä¸€èˆ¬ä¸º<strong>16M-64M</strong>ã€‚ <code>innodb_log_file_size</code>ï¼šå•ä¸ªé‡åšæ—¥å¿—æ–‡ä»¶å¤§å°ï¼Œå½±å“å†™å…¥æ€§èƒ½å’Œå´©æºƒæ¢å¤é€Ÿåº¦ã€‚æ¨èå€¼ä¸€èˆ¬ä¸º<strong>1G-4G</strong>ã€‚</p>
<br/>
<h2 data-id="heading-4">ä¸‰ã€è¿æ¥ä¸çº¿ç¨‹ä¼˜åŒ–</h2>
<p>åˆç†çš„è¿æ¥é…ç½®å¯ä»¥æœ‰æ•ˆåº”å¯¹é«˜å¹¶å‘åœºæ™¯ï¼Œé¿å…è¿æ¥æ•°è€—å°½æˆ–èµ„æºè¿‡è½½ã€‚</p>
<h3 data-id="heading-5">1. è¿æ¥æ§åˆ¶å‚æ•°</h3>
<p><code>max_connections</code>ï¼šMySQLæœåŠ¡å™¨å…è®¸çš„æœ€å¤§å¹¶å‘è¿æ¥æ•°ã€‚éœ€è¦æ ¹æ®åº”ç”¨çš„å®é™…å¹¶å‘éœ€æ±‚è¿›è¡Œè°ƒæ•´ï¼Œä¸€èˆ¬å¯è®¾ç½®ä¸º<strong>500-2000</strong>ã€‚ä½†è¦æ³¨æ„ï¼Œè¿‡é«˜çš„è¿æ¥æ•°ä¼šæ¶ˆè€—å¤§é‡å†…å­˜ï¼Œå¯èƒ½å¯¼è‡´èµ„æºè€—å°½ã€‚ <code>thread_cache_size</code>ï¼šç¼“å­˜ç©ºé—²çº¿ç¨‹ä»¥ä¾›é‡ç”¨ï¼Œå‡å°‘åˆ›å»ºå’Œé”€æ¯çº¿ç¨‹çš„å¼€é”€ã€‚å¯¹äºé«˜å¹¶å‘åº”ç”¨ï¼Œå»ºè®®è®¾ç½®ä¸º<strong>50-100</strong>ã€‚</p>
<h3 data-id="heading-6">2. è¿æ¥è¶…æ—¶è®¾ç½®</h3>
<p><code>wait_timeout</code>å’Œ<code>interactive_timeout</code>ï¼šæ§åˆ¶éæ´»åŠ¨è¿æ¥çš„è‡ªåŠ¨æ–­å¼€æ—¶é—´ï¼ˆç§’ï¼‰ï¼Œé¿å…é•¿æœŸé—²ç½®è¿æ¥å ç”¨èµ„æºã€‚ä¸€èˆ¬å»ºè®®è®¾ç½®ä¸º<strong>300ç§’</strong>ã€‚</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># è¿æ¥é…ç½®ç¤ºä¾‹</span>
<span class="hljs-attr">max_connections</span> = <span class="hljs-number">1000</span>
<span class="hljs-attr">thread_cache_size</span> = <span class="hljs-number">100</span>
<span class="hljs-attr">wait_timeout</span> = <span class="hljs-number">300</span>
<span class="hljs-attr">interactive_timeout</span> = <span class="hljs-number">300</span>
</code></pre>
<br/>
<h2 data-id="heading-7">å››ã€InnoDBå­˜å‚¨å¼•æ“ä¼˜åŒ–</h2>
<p>InnoDBæ˜¯MySQLçš„é»˜è®¤å­˜å‚¨å¼•æ“ï¼Œå…¶é…ç½®å¯¹æ•°æ®åº“æ€§èƒ½è‡³å…³é‡è¦ã€‚</p>
<h3 data-id="heading-8">1. I/Oé…ç½®å‚æ•°</h3>
<p><code>innodb_io_capacity</code>ï¼šè¡¨ç¤ºInnoDBåå°ä»»åŠ¡çš„I/Oèƒ½åŠ›ï¼Œåº”æ ¹æ®ç£ç›˜çš„IOPSèƒ½åŠ›è®¾ç½®ã€‚SSDç¡¬ç›˜å¯è®¾ç½®ä¸º<strong>2000</strong>æˆ–æ›´é«˜ï¼Œä¼ ç»Ÿç¡¬ç›˜å¯è®¾ä¸º<strong>200</strong>å·¦å³ã€‚ <code>innodb_flush_neighbors</code>ï¼šæ˜¯å¦åˆ·æ–°ç›¸é‚»è„é¡µï¼ŒSSDç¡¬ç›˜å»ºè®®è®¾ç½®ä¸º<strong>0</strong>ï¼ˆå…³é—­ï¼‰ä»¥æå‡æ€§èƒ½ã€‚</p>
<h3 data-id="heading-9">2. äº‹åŠ¡é…ç½®å‚æ•°</h3>
<p><code>innodb_flush_log_at_trx_commit</code>ï¼šæ§åˆ¶äº‹åŠ¡æ—¥å¿—åˆ·æ–°ç­–ç•¥ï¼Œæ˜¯æ•°æ®å®‰å…¨æ€§ä¸æ€§èƒ½ä¹‹é—´çš„å…³é”®æƒè¡¡ç‚¹ï¼š</p>
<ul>
<li><strong>1</strong>ï¼ˆé»˜è®¤ï¼‰ï¼šæœ€å®‰å…¨ï¼Œæ¯æ¬¡äº‹åŠ¡æäº¤éƒ½åˆ·ç›˜ï¼Œå´©æºƒä¸ä¼šä¸¢å¤±æ•°æ®</li>
<li><strong>2</strong>ï¼šæŠ˜ä¸­æ–¹æ¡ˆï¼Œæ¯ç§’åˆ·ç›˜ä¸€æ¬¡ï¼Œæ€§èƒ½è¾ƒå¥½</li>
<li><strong>0</strong>ï¼šæ€§èƒ½æœ€é«˜ï¼Œä½†å´©æºƒå¯èƒ½ä¸¢å¤±çº¦1ç§’çš„æ•°æ®</li>
</ul>
<p><code>sync_binlog</code>ï¼šæ§åˆ¶äºŒè¿›åˆ¶æ—¥å¿—ï¼ˆbinlogï¼‰åˆ·ç›˜ç­–ç•¥ã€‚ä¸»ä»å¤åˆ¶ç¯å¢ƒä¸‹å»ºè®®è®¾ç½®ä¸º<strong>1</strong>ï¼Œä»¥ç¡®ä¿æ•°æ®ä¸€è‡´æ€§ã€‚</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># InnoDBé…ç½®ç¤ºä¾‹</span>
<span class="hljs-attr">innodb_io_capacity</span> = <span class="hljs-number">1000</span>
<span class="hljs-attr">innodb_flush_neighbors</span> = <span class="hljs-number">0</span>
<span class="hljs-attr">innodb_flush_log_at_trx_commit</span> = <span class="hljs-number">1</span>
<span class="hljs-attr">sync_binlog</span> = <span class="hljs-number">1</span>
</code></pre>
<br/>
<h2 data-id="heading-10">äº”ã€æŸ¥è¯¢ä¸ä¸´æ—¶è¡¨ä¼˜åŒ–</h2>
<p>åˆç†çš„æŸ¥è¯¢ç›¸å…³é…ç½®å¯ä»¥åŠ é€Ÿæ’åºã€åˆ†ç»„ç­‰æ“ä½œã€‚</p>
<h3 data-id="heading-11">1. æ’åºç¼“å†²åŒºé…ç½®</h3>
<p><code>sort_buffer_size</code>ï¼šæ¯ä¸ªéœ€æ’åºçš„çº¿ç¨‹åˆ†é…çš„ç¼“å†²åŒºå¤§å°ã€‚å»ºè®®è®¾ç½®ä¸º<strong>2M-4M</strong>ï¼Œè¿‡å¤§çš„è®¾ç½®ä¼šæµªè´¹å†…å­˜ã€‚ <code>max_sort_length</code>ï¼šæ’åºæ—¶ä½¿ç”¨çš„æœ€å¤§å­—èŠ‚æ•°ï¼Œé»˜è®¤å€¼ä¸º<strong>1024</strong>ï¼Œä¸€èˆ¬æ— éœ€è°ƒæ•´ã€‚</p>
<h3 data-id="heading-12">2. ä¸´æ—¶è¡¨é…ç½®</h3>
<p><code>tmp_table_size</code>å’Œ<code>max_heap_table_size</code>ï¼šå†…å­˜ä¸´æ—¶è¡¨çš„æœ€å¤§å¤§å°ï¼Œè¶…è¿‡æ­¤å€¼çš„ä¸´æ—¶è¡¨å°†è½¬ä¸ºç£ç›˜ä¸´æ—¶è¡¨ã€‚å»ºè®®è®¾ç½®ä¸ºç›¸åŒå€¼ï¼Œä¸€èˆ¬ä¸º<strong>64M-256M</strong>ã€‚</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># æŸ¥è¯¢ä¼˜åŒ–é…ç½®ç¤ºä¾‹</span>
<span class="hljs-attr">sort_buffer_size</span> = <span class="hljs-number">4</span>M
<span class="hljs-attr">max_sort_length</span> = <span class="hljs-number">1024</span>
<span class="hljs-attr">tmp_table_size</span> = <span class="hljs-number">256</span>M
<span class="hljs-attr">max_heap_table_size</span> = <span class="hljs-number">256</span>M
</code></pre>
<br/>
<h2 data-id="heading-13">å…­ã€æ—¥å¿—ä¸ç›‘æ§é…ç½®</h2>
<p>æ°å½“çš„æ—¥å¿—é…ç½®æœ‰åŠ©äºå‘ç°æ€§èƒ½ç“¶é¢ˆå’Œæ½œåœ¨é—®é¢˜ã€‚</p>
<h3 data-id="heading-14">1. æ…¢æŸ¥è¯¢æ—¥å¿—é…ç½®</h3>
<p>æ…¢æŸ¥è¯¢æ—¥å¿—æ˜¯è¯†åˆ«æ€§èƒ½é—®é¢˜çš„å…³é”®å·¥å…·ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">slow_query_log</span> = <span class="hljs-number">1</span>
<span class="hljs-attr">slow_query_log_file</span> = /var/log/mysql/slow.log
<span class="hljs-attr">long_query_time</span> = <span class="hljs-number">1</span>
<span class="hljs-attr">log_queries_not_using_indexes</span> = <span class="hljs-number">1</span>
</code></pre>
<p><code>long_query_time</code>å®šä¹‰æ…¢æŸ¥è¯¢çš„é˜ˆå€¼ï¼ˆç§’ï¼‰ï¼Œä¸€èˆ¬è®¾ç½®ä¸º<strong>1-2ç§’</strong>ã€‚<code>log_queries_not_using_indexes</code>è®°å½•æœªä½¿ç”¨ç´¢å¼•çš„æŸ¥è¯¢ï¼Œæœ‰åŠ©äºå‘ç°ç´¢å¼•ç¼ºå¤±é—®é¢˜ã€‚</p>
<h3 data-id="heading-15">2. æ€§èƒ½ç›‘æ§é…ç½®</h3>
<p><code>performance_schema</code>ï¼šå¯ç”¨æ€§èƒ½æ¨¡å¼å¯ä»¥ç›‘æ§æ•°æ®åº“çš„å„ç§æ€§èƒ½æŒ‡æ ‡ï¼Œå»ºè®®è®¾ç½®ä¸º<strong>ON</strong>ã€‚</p>
<br/>
<h2 data-id="heading-16">ä¸ƒã€å®Œæ•´é…ç½®ç¤ºä¾‹</h2>
<p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªé’ˆå¯¹8æ ¸32GæœåŠ¡å™¨çš„MySQLé…ç½®ç¤ºä¾‹ï¼Œå¯ä½œä¸ºå‚è€ƒåŸºç¡€ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-section">[mysqld]</span>
<span class="hljs-comment"># åŸºç¡€è®¾ç½®</span>
<span class="hljs-attr">user</span> = mysql
<span class="hljs-attr">datadir</span> = /var/lib/mysql
<span class="hljs-attr">port</span> = <span class="hljs-number">3306</span>
<span class="hljs-attr">socket</span> = /var/run/mysqld/mysqld.sock

<span class="hljs-comment"># å†…å­˜é…ç½®</span>
<span class="hljs-attr">innodb_buffer_pool_size</span> = <span class="hljs-number">16</span>G
<span class="hljs-attr">innodb_buffer_pool_instances</span> = <span class="hljs-number">8</span>
<span class="hljs-attr">innodb_log_buffer_size</span> = <span class="hljs-number">64</span>M
<span class="hljs-attr">innodb_log_file_size</span> = <span class="hljs-number">2</span>G

<span class="hljs-comment"># è¿æ¥é…ç½®</span>
<span class="hljs-attr">max_connections</span> = <span class="hljs-number">1000</span>
<span class="hljs-attr">thread_cache_size</span> = <span class="hljs-number">100</span>
<span class="hljs-attr">wait_timeout</span> = <span class="hljs-number">300</span>
<span class="hljs-attr">interactive_timeout</span> = <span class="hljs-number">300</span>

<span class="hljs-comment"># InnoDBé…ç½®</span>
<span class="hljs-attr">innodb_io_capacity</span> = <span class="hljs-number">1000</span>
<span class="hljs-attr">innodb_flush_neighbors</span> = <span class="hljs-number">0</span>
<span class="hljs-attr">innodb_flush_log_at_trx_commit</span> = <span class="hljs-number">1</span>
<span class="hljs-attr">sync_binlog</span> = <span class="hljs-number">1</span>

<span class="hljs-comment"># æŸ¥è¯¢ä¼˜åŒ–</span>
<span class="hljs-attr">sort_buffer_size</span> = <span class="hljs-number">4</span>M
<span class="hljs-attr">max_sort_length</span> = <span class="hljs-number">1024</span>
<span class="hljs-attr">tmp_table_size</span> = <span class="hljs-number">256</span>M
<span class="hljs-attr">max_heap_table_size</span> = <span class="hljs-number">256</span>M

<span class="hljs-comment"># æ—¥å¿—é…ç½®</span>
<span class="hljs-attr">slow_query_log</span> = <span class="hljs-number">1</span>
<span class="hljs-attr">long_query_time</span> = <span class="hljs-number">1</span>
<span class="hljs-attr">log_queries_not_using_indexes</span> = <span class="hljs-number">1</span>
<span class="hljs-attr">log_error</span> = /var/log/mysql/error.log

<span class="hljs-comment"># æ€§èƒ½ç›‘æ§</span>
<span class="hljs-attr">performance_schema</span> = <span class="hljs-literal">ON</span>
</code></pre>
<br/>
<h2 data-id="heading-17">å…«ã€MySQLé…ç½®ä¼˜åŒ–æœ€ä½³å®è·µ</h2>
<p>ä¼˜åŒ–MySQLé…ç½®ä¸æ˜¯ä¸€åŠ³æ°¸é€¸çš„è¿‡ç¨‹ï¼Œè€Œéœ€è¦æŒç»­ç›‘æ§å’Œè°ƒæ•´ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›æœ€ä½³å®è·µï¼š</p>
<ol>
<li><strong>å¾ªåºæ¸è¿›</strong>ï¼šä¸è¦ä¸€æ¬¡æ€§ä¿®æ”¹å¤§é‡å‚æ•°ï¼Œåº”é€æ­¥è°ƒæ•´å¹¶è§‚å¯Ÿæ•ˆæœã€‚</li>
<li><strong>ç›‘æ§å…ˆè¡Œ</strong>ï¼šä¼˜åŒ–å‰å…ˆå»ºç«‹æ€§èƒ½åŸºå‡†ï¼Œä½¿ç”¨Performance Schemaç­‰å·¥å…·è¿›è¡Œç›‘æ§ã€‚</li>
<li><strong>è€ƒè™‘ä¸šåŠ¡ç‰¹æ€§</strong>ï¼šæ ¹æ®ä¸šåŠ¡ç‰¹ç‚¹ï¼ˆOLTP/OLAPï¼‰è°ƒæ•´å‚æ•°ã€‚OLTPç³»ç»Ÿéœ€è¦æ›´é«˜çš„è¿æ¥æ•°å’Œæ›´å°çš„äº‹åŠ¡æ—¥å¿—ï¼ŒOLAPç³»ç»Ÿåˆ™éœ€è¦æ›´å¤§çš„æ’åºç¼“å†²åŒºã€‚</li>
<li><strong>æµ‹è¯•éªŒè¯</strong>ï¼šç”Ÿäº§ç¯å¢ƒå˜æ›´å‰åº”åœ¨æµ‹è¯•ç¯å¢ƒå……åˆ†éªŒè¯ã€‚</li>
<li><strong>å…³æ³¨ç‰ˆæœ¬å·®å¼‚</strong>ï¼šä¸åŒMySQLç‰ˆæœ¬å‚æ•°å¯èƒ½æœ‰å·®å¼‚ï¼Œå¦‚MySQL 8.0å·²ç§»é™¤æŸ¥è¯¢ç¼“å­˜åŠŸèƒ½ï¼Œéœ€æ³¨æ„ç‰ˆæœ¬å…¼å®¹æ€§ã€‚</li>
</ol>
<br/>
<h2 data-id="heading-18">æ€»ç»“</h2>
<p>MySQLé…ç½®æ–‡ä»¶ä¼˜åŒ–æ˜¯æå‡æ•°æ®åº“æ€§èƒ½çš„é‡è¦æ‰‹æ®µï¼Œä½†éœ€è¦æ ¹æ®å…·ä½“ç¡¬ä»¶é…ç½®ã€æ•°æ®è§„æ¨¡å’Œåº”ç”¨è´Ÿè½½è¿›è¡Œé’ˆå¯¹æ€§è°ƒæ•´ã€‚å†…å­˜é…ç½®ã€è¿æ¥ç®¡ç†å’ŒInnoDBå‚æ•°æ˜¯ä¼˜åŒ–çš„é‡ç‚¹é¢†åŸŸã€‚è®°ä½ï¼Œé…ç½®ä¼˜åŒ–åªæ˜¯æ•°æ®åº“æ€§èƒ½è°ƒä¼˜çš„ä¸€ä¸ªæ–¹é¢ï¼Œè¿˜éœ€è¦ç»“åˆåˆç†çš„ç´¢å¼•è®¾è®¡ã€SQLæŸ¥è¯¢ä¼˜åŒ–å’Œæ•°æ®åº“æ¶æ„ä¼˜åŒ–ï¼Œæ‰èƒ½å…¨é¢æå‡ç³»ç»Ÿæ€§èƒ½ã€‚ å¸Œæœ›æœ¬æ–‡èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å’Œä¼˜åŒ–MySQLé…ç½®ã€‚å¦‚æœä½ æœ‰ç‰¹å®šåœºæ™¯ä¸‹çš„é…ç½®é—®é¢˜ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºè®¨è®ºäº¤æµã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[nodeä¸­çš„peerDependencieå«ä¹‰]]></title>    <link>https://juejin.cn/post/7580297762189606953</link>    <guid>https://juejin.cn/post/7580297762189606953</guid>    <pubDate>2025-12-06T06:32:46.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7580297762189606953" data-draft-id="7580287891272728639" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="nodeä¸­çš„peerDependencieå«ä¹‰"/> <meta itemprop="keywords" content="åç«¯,Node.js,æ˜é‡‘Â·é‡‘çŸ³è®¡åˆ’"/> <meta itemprop="datePublished" content="2025-12-06T06:32:46.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å…‰å½±å°‘å¹´"/> <meta itemprop="url" content="https://juejin.cn/user/3184663905962126"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            nodeä¸­çš„peerDependencieå«ä¹‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3184663905962126/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å…‰å½±å°‘å¹´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-06T06:32:46.000Z" title="Sat Dec 06 2025 06:32:46 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ <strong>Node.js</strong> é¡¹ç›®ä¸­ï¼Œ<code>peerDependencies</code> æ˜¯ <strong>npm</strong> å’Œ <strong>Yarn</strong> ç­‰åŒ…ç®¡ç†å·¥å…·ä¸­çš„ä¸€ä¸ªé‡è¦æ¦‚å¿µï¼Œä¸»è¦ç”¨äºæŒ‡å®šå½“å‰æ¨¡å—æ‰€ä¾èµ–çš„å…¶å®ƒæ¨¡å—çš„ç‰ˆæœ¬è¦æ±‚ã€‚<code>peerDependencies</code> ä¸»è¦ç”¨äº <strong>æ’ä»¶</strong> æˆ– <strong>åº“</strong> ä¸­ï¼Œç”¨æ¥å‘Šè¯‰ç”¨æˆ·ï¼Œåœ¨å®‰è£…å½“å‰æ¨¡å—æ—¶ï¼Œå¿…é¡»ç¡®ä¿æŸä¸ªç‰ˆæœ¬çš„å…¶ä»–æ¨¡å—å·²è¢«å®‰è£…ã€‚</p>
<h3 data-id="heading-0"><strong>1. <code>peerDependencies</code> çš„åŸºæœ¬å«ä¹‰</strong></h3>
<p><code>peerDependencies</code> å…è®¸ä½ å£°æ˜å½“å‰æ¨¡å—å¯¹å…¶ä»–æ¨¡å—çš„ä¾èµ–ï¼Œä½†æ˜¯å¹¶ä¸ä¼šç›´æ¥å®‰è£…è¿™äº›ä¾èµ–ã€‚å®ƒæ˜¯ <strong>å…±äº«ä¾èµ–</strong> çš„ä¸€ç§æ–¹å¼ï¼Œç¡®ä¿åœ¨ä½ çš„é¡¹ç›®ä¸­ï¼Œåªæœ‰ä¸€ä¸ªç‰ˆæœ¬çš„ç‰¹å®šä¾èµ–æ¨¡å—è¢«ä½¿ç”¨ã€‚</p>
<h3 data-id="heading-1"><strong>2. ä½¿ç”¨åœºæ™¯</strong></h3>
<p><code>peerDependencies</code> ä¸»è¦ç”¨äºä»¥ä¸‹å‡ ç§æƒ…å†µï¼š</p>
<ul>
<li><strong>æ’ä»¶ä¸ä¸»åº”ç”¨ç¨‹åºä¹‹é—´çš„å…¼å®¹æ€§</strong>ï¼šå½“ä½ å¼€å‘ä¸€ä¸ªæ’ä»¶æˆ–æ‰©å±•æ—¶ï¼Œé€šå¸¸éœ€è¦ä¾èµ–äºä¸»åº”ç”¨çš„æŸä¸ªåº“æˆ–æ¡†æ¶ã€‚æ¯”å¦‚ï¼Œ<strong>React æ’ä»¶</strong> éœ€è¦ä¾èµ–äº <code>react</code> å’Œ <code>react-dom</code>ï¼Œä½†å®ƒå¹¶ä¸è´Ÿè´£å®‰è£…è¿™äº›åº“ï¼Œè€Œæ˜¯å¸Œæœ›ä¸»åº”ç”¨æä¾›å®ƒä»¬ã€‚</li>
<li><strong>é¿å…ä¾èµ–å†²çª</strong>ï¼šå¦‚æœä½ åœ¨å¤šä¸ªåŒ…ä¸­ä½¿ç”¨ç›¸åŒçš„ä¾èµ–é¡¹ï¼Œå¯ä»¥é€šè¿‡ <code>peerDependencies</code> æ¥ç¡®ä¿ä¸åŒçš„åº“ä½¿ç”¨åŒä¸€ä¸ªç‰ˆæœ¬ã€‚</li>
</ul>
<h3 data-id="heading-2"><strong>3. <code>peerDependencies</code> çš„å·¥ä½œåŸç†</strong></h3>
<h4 data-id="heading-3"><strong>a. å®šä¹‰</strong></h4>
<p>åœ¨ <code>package.json</code> ä¸­ï¼Œå¯ä»¥é€šè¿‡ <code>peerDependencies</code> å­—æ®µæ¥å®šä¹‰è¯¥æ¨¡å—çš„ä¾èµ–å…³ç³»ã€‚ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"my-react-plugin"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"peerDependencies"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"react"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^17.0.0"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"react-dom"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^17.0.0"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>ä¸Šè¿°é…ç½®è¡¨ç¤ºï¼Œ<code>my-react-plugin</code> ä¾èµ–äº <strong>React 17 ç‰ˆæœ¬åŠä»¥ä¸Š</strong> å’Œ <strong>React DOM 17 ç‰ˆæœ¬åŠä»¥ä¸Š</strong>ï¼Œä½†æ˜¯å®ƒå¹¶ä¸ä¼šå®‰è£…è¿™ä¸¤ä¸ªåº“ï¼Œç”¨æˆ·åœ¨å®‰è£…æ’ä»¶æ—¶éœ€è¦è‡ªå·±ç¡®ä¿å®‰è£…äº†æ­£ç¡®çš„ç‰ˆæœ¬ã€‚</p>
<h4 data-id="heading-4"><strong>b. å®‰è£…ä¾èµ–</strong></h4>
<p>å½“ä½ å®‰è£…æŸä¸ªæ¨¡å—æ—¶ï¼Œå¦‚æœè¯¥æ¨¡å—æœ‰ <code>peerDependencies</code>ï¼Œnpm ä¼šæ£€æŸ¥ä½ çš„é¡¹ç›®ä¸­æ˜¯å¦å®‰è£…äº†ç¬¦åˆè¦æ±‚çš„ä¾èµ–ã€‚å¦‚æœæ²¡æœ‰å®‰è£…ï¼Œnpm ä¼šå‘å‡ºè­¦å‘Šï¼Œæç¤ºä½ æ‰‹åŠ¨å®‰è£…æ‰€ç¼ºå°‘çš„ä¾èµ–ã€‚</p>
<p>æ¯”å¦‚ï¼Œå½“ä½ å®‰è£…ä¸Šé¢ç¤ºä¾‹ä¸­çš„ <code>my-react-plugin</code> æ—¶ï¼Œnpm ä¼šæ£€æŸ¥é¡¹ç›®ä¸­æ˜¯å¦å·²ç»å®‰è£…äº†åˆé€‚ç‰ˆæœ¬çš„ <code>react</code> å’Œ <code>react-dom</code>ï¼Œå¦‚æœæ²¡æœ‰ï¼Œä¼šæ˜¾ç¤ºè­¦å‘Šä¿¡æ¯ï¼Œæç¤ºä½ éœ€è¦æ‰‹åŠ¨å®‰è£…è¿™äº›ä¾èµ–ã€‚</p>
<h4 data-id="heading-5"><strong>c. ç‰ˆæœ¬åŒ¹é…</strong></h4>
<p>åœ¨ <code>peerDependencies</code> ä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨ç‰ˆæœ¬èŒƒå›´è¯­æ³•ï¼ˆæ¯”å¦‚ <code>^</code>ã€<code>~</code>ï¼‰æ¥æŒ‡å®šä¾èµ–çš„ç‰ˆæœ¬ã€‚npm ä¼šæ ¹æ®æ­¤èŒƒå›´æ¥åŒ¹é…ç¬¦åˆè¦æ±‚çš„ç‰ˆæœ¬ã€‚</p>
<h3 data-id="heading-6"><strong>4. <code>peerDependencies</code> ä¸ <code>dependencies</code> å’Œ <code>devDependencies</code> çš„åŒºåˆ«</strong></h3>





























<table><thead><tr><th>ç‰¹æ€§</th><th><code>peerDependencies</code></th><th><code>dependencies</code></th><th><code>devDependencies</code></th></tr></thead><tbody><tr><td><strong>ç”¨é€”</strong></td><td>å£°æ˜æ¨¡å—éœ€è¦çš„å¤–éƒ¨ä¾èµ–ç‰ˆæœ¬ï¼ˆä½†ä¸å®‰è£…ï¼‰</td><td>å£°æ˜é¡¹ç›®è¿è¡Œæ—¶éœ€è¦çš„ä¾èµ–ï¼Œå®‰è£…æ—¶ä¼šä¸€èµ·å®‰è£…</td><td>å£°æ˜å¼€å‘ç¯å¢ƒä¸­éœ€è¦çš„ä¾èµ–ï¼Œå¼€å‘æ—¶ä½¿ç”¨ï¼Œç”Ÿäº§ç¯å¢ƒä¸å®‰è£…</td></tr><tr><td><strong>å®‰è£…è¡Œä¸º</strong></td><td>ä¸ä¼šè‡ªåŠ¨å®‰è£…ï¼Œéœ€è¦ç”¨æˆ·æ‰‹åŠ¨å®‰è£…</td><td>ä¼šè‡ªåŠ¨å®‰è£…å’Œä¸‹è½½</td><td>ä»…åœ¨å¼€å‘ç¯å¢ƒä¸­å®‰è£…ï¼ˆé€šè¿‡ <code>npm install --dev</code> æˆ– <code>npm install</code> å®‰è£…ï¼‰</td></tr><tr><td><strong>ä½¿ç”¨åœºæ™¯</strong></td><td>æ’ä»¶ã€åº“ä¸ä¸»åº”ç”¨çš„ä¾èµ–ç‰ˆæœ¬å…¼å®¹æ€§</td><td>ç”Ÿäº§ç¯å¢ƒä¸‹åº”ç”¨ç¨‹åºä¾èµ–çš„æ¨¡å—</td><td>å¼€å‘å·¥å…·ã€æµ‹è¯•æ¡†æ¶ç­‰ï¼Œä»…åœ¨å¼€å‘æ—¶éœ€è¦</td></tr></tbody></table>
<h3 data-id="heading-7"><strong>5. <code>peerDependencies</code> ç¤ºä¾‹ï¼š</strong></h3>
<p>å‡è®¾ä½ å¼€å‘äº†ä¸€ä¸ª <strong>Vue æ’ä»¶</strong>ï¼Œå¹¶ä¸”è¯¥æ’ä»¶éœ€è¦ä¾èµ–äº <strong>Vue</strong> æ¡†æ¶ï¼Œä½†æ˜¯ Vue æœ¬èº«å¯èƒ½ç”±ç”¨æˆ·çš„é¡¹ç›®æä¾›ï¼Œå› æ­¤ï¼Œä½ åœ¨ <code>peerDependencies</code> ä¸­å£°æ˜ Vue çš„ç‰ˆæœ¬è¦æ±‚ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"my-vue-plugin"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"peerDependencies"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"vue"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^3.0.0"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>å½“ç”¨æˆ·å®‰è£…ä½ çš„æ’ä»¶æ—¶ï¼Œnpm ä¼šæ£€æŸ¥ç”¨æˆ·é¡¹ç›®ä¸­æ˜¯å¦å®‰è£…äº†åˆé€‚ç‰ˆæœ¬çš„ <code>vue</code>ã€‚å¦‚æœæ²¡æœ‰å®‰è£…ç¬¦åˆè¦æ±‚çš„ <code>vue</code>ï¼Œnpm ä¼šæ˜¾ç¤ºè­¦å‘Šï¼Œä½†ä¸ä¼šè‡ªåŠ¨å®‰è£… Vueã€‚ç”¨æˆ·å¿…é¡»æ‰‹åŠ¨å®‰è£…ç¬¦åˆç‰ˆæœ¬è¦æ±‚çš„ Vueã€‚</p>
<h3 data-id="heading-8"><strong>6. ä¸ºä»€ä¹ˆéœ€è¦ <code>peerDependencies</code>ï¼Ÿ</strong></h3>
<ul>
<li><strong>é¿å…é‡å¤ä¾èµ–</strong>ï¼šå¦‚æœä½ æ˜¯æ’ä»¶æˆ–åº“çš„å¼€å‘è€…ï¼Œå¹¶ä¸”ä½ çš„æ’ä»¶ä¾èµ–äºæŸä¸ªä¸»æ¡†æ¶ï¼ˆå¦‚ Reactã€Vueã€Angular ç­‰ï¼‰ï¼Œä½¿ç”¨ <code>peerDependencies</code> å¯ä»¥é¿å…é¡¹ç›®ä¸­åŒæ—¶å­˜åœ¨å¤šä¸ªç‰ˆæœ¬çš„ç›¸åŒåº“ï¼Œå‡å°‘å†—ä½™çš„ä»£ç å’Œä½“ç§¯ã€‚</li>
<li><strong>ç¡®ä¿ç‰ˆæœ¬å…¼å®¹æ€§</strong>ï¼šé€šè¿‡ <code>peerDependencies</code>ï¼Œå¯ä»¥ç¡®ä¿ä½ çš„æ’ä»¶å’Œä¸»æ¡†æ¶çš„ç‰ˆæœ¬å…¼å®¹ã€‚ä¾‹å¦‚ï¼ŒReact æ’ä»¶å¿…é¡»ä¸ç‰¹å®šç‰ˆæœ¬çš„ React å…¼å®¹ï¼Œä½¿ç”¨ <code>peerDependencies</code> å¯ä»¥è®©ç”¨æˆ·æ˜ç¡®çŸ¥é“å®ƒä»¬å¿…é¡»ä½¿ç”¨å“ªä¸ªç‰ˆæœ¬çš„ Reactã€‚</li>
</ul>
<h3 data-id="heading-9"><strong>7. <code>peerDependencies</code> è­¦å‘Š</strong></h3>
<p>å½“ <code>peerDependencies</code> ä¸æ»¡è¶³è¦æ±‚æ—¶ï¼Œnpm ä¼šå‘å‡ºè­¦å‘Šã€‚ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">npm WARN my-vue-<span class="hljs-symbol">plugin@</span><span class="hljs-number">1.0</span><span class="hljs-number">.0</span> requires a peer of <span class="hljs-symbol">vue@</span>^<span class="hljs-number">3.0</span><span class="hljs-number">.0</span> but none <span class="hljs-keyword">is</span> installed. You must install peer dependencies yourself.
</code></pre>
<h3 data-id="heading-10"><strong>8. npm 7+ ç‰ˆæœ¬ä¸­çš„å˜åŒ–</strong></h3>
<p>åœ¨ <strong>npm 7+</strong> ç‰ˆæœ¬ä¸­ï¼Œ<code>peerDependencies</code> çš„å¤„ç†å‘ç”Ÿäº†ä¸€äº›å˜åŒ–ï¼š</p>
<ul>
<li>åœ¨ npm 7 ä¹‹å‰ï¼Œ<code>peerDependencies</code> åªæ˜¯å‘å‡ºè­¦å‘Šï¼Œç”¨æˆ·éœ€è¦æ‰‹åŠ¨å®‰è£…ä¾èµ–ï¼›</li>
<li>åœ¨ npm 7 åŠä»¥åçš„ç‰ˆæœ¬ä¸­ï¼Œ<strong>npm ä¼šè‡ªåŠ¨å®‰è£…</strong> <code>peerDependencies</code>ï¼Œä½†ä¾ç„¶ä¼šæ ¹æ®ä½ é¡¹ç›®çš„è¦æ±‚æ¥å®‰è£…å’Œç‰ˆæœ¬åŒ¹é…ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-11"><strong>æ€»ç»“</strong></h3>
<ul>
<li><code>peerDependencies</code> ç”¨äºå£°æ˜æŸä¸ªæ¨¡å—å¯¹å…¶ä»–æ¨¡å—çš„ç‰ˆæœ¬ä¾èµ–ï¼Œä½†ä¸è‡ªåŠ¨å®‰è£…è¿™äº›ä¾èµ–ã€‚</li>
<li>ä¸»è¦ç”¨äºæ’ä»¶å’Œåº“ï¼Œç¡®ä¿ä¸ä¸»åº”ç”¨ç¨‹åºå…¼å®¹ï¼Œé¿å…å‡ºç°ç‰ˆæœ¬å†²çªã€‚</li>
<li>ç”¨æˆ·éœ€è¦æ‰‹åŠ¨å®‰è£… <code>peerDependencies</code> ä¸­åˆ—å‡ºçš„ä¾èµ–ï¼Œæˆ–è€…ä½¿ç”¨ npm 7+ æ¥è‡ªåŠ¨å®‰è£…ã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[el-buttonæºç è§£è¯»4â€”â€”props colorå’Œnative-type]]></title>    <link>https://juejin.cn/post/7580287891272695871</link>    <guid>https://juejin.cn/post/7580287891272695871</guid>    <pubDate>2025-12-06T06:21:37.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7580287891272695871" data-draft-id="7580287891272646719" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="el-buttonæºç è§£è¯»4â€”â€”props  colorå’Œnative-type"/> <meta itemprop="keywords" content="Element,Vue.js"/> <meta itemprop="datePublished" content="2025-12-06T06:21:37.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Joie"/> <meta itemprop="url" content="https://juejin.cn/user/3265984436383947"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            el-buttonæºç è§£è¯»4â€”â€”props  colorå’Œnative-type
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3265984436383947/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Joie
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-06T06:21:37.000Z" title="Sat Dec 06 2025 06:21:37 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><pre><code class="hljs language-js" lang="js">  &lt;component
    :is=<span class="hljs-string">"tag"</span>
    ref=<span class="hljs-string">"_ref"</span>
    v-bind=<span class="hljs-string">"_props"</span>
    :<span class="hljs-keyword">class</span>=<span class="hljs-string">"buttonKls"</span>
    :style=<span class="hljs-string">"buttonStyle"</span>
    @click=<span class="hljs-string">"handleClick"</span>
  &gt;
</code></pre>
<p>:style="buttonStyle"ï¼šç”¨äºåœ¨è®¾ç½®äº†Â colorÂ æ—¶ï¼Œè‡ªåŠ¨è®¡ç®—å¹¶åº”ç”¨æŒ‰é’®å„çŠ¶æ€ï¼ˆé»˜è®¤ã€æ‚¬åœã€æ¿€æ´»ã€ç¦ç”¨ï¼‰çš„é¢œè‰²æ ·å¼ï¼Œæ— éœ€æ‰‹åŠ¨è®¾ç½®æ¯ä¸ªçŠ¶æ€çš„é¢œè‰²ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> buttonStyle = <span class="hljs-title function_">useButtonCustomStyle</span>(props)
<span class="hljs-comment">/**
 * è·å–å®ä¾‹ä¸­propsä¸ºnameçš„å€¼
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> useProp = &lt;T&gt;(<span class="hljs-attr">name</span>: string): <span class="hljs-title class_">ComputedRef</span>&lt;T | <span class="hljs-literal">undefined</span>&gt; =&gt; {
  <span class="hljs-keyword">const</span> vm = <span class="hljs-title function_">getCurrentInstance</span>()
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> (vm?.<span class="hljs-property">proxy</span>?.<span class="hljs-property">$props</span> <span class="hljs-keyword">as</span> any)?.[name])
}


<span class="hljs-comment">/**
 * è·å–è¡¨å•çš„disabledçŠ¶æ€
 * <span class="hljs-doctag">@param</span> fallback é»˜è®¤å€¼
 * <span class="hljs-doctag">@returns</span> è¡¨å•çš„disabledçŠ¶æ€
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">useFormDisabled</span> = (<span class="hljs-params">fallback?: MaybeRef&lt;boolean | <span class="hljs-literal">undefined</span>&gt;</span>) =&gt; {
  <span class="hljs-keyword">const</span> disabled = useProp&lt;boolean&gt;(<span class="hljs-string">'disabled'</span>)
  <span class="hljs-keyword">const</span> form = <span class="hljs-title function_">inject</span>(formContextKey, <span class="hljs-literal">undefined</span>)
  <span class="hljs-comment">// å¦‚æœæ˜¯è¡¨å•å†…éƒ¨çš„buttoné‚£ä¹ˆæ˜¯æœ‰å€¼çš„ï¼Œå¦‚æœæ˜¯å¤–éƒ¨çš„buttoné‚£ä¹ˆæ˜¯undefined</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'form'</span>, form)
  <span class="hljs-comment">/**
   * ç»„ä»¶è‡ªèº«çš„ disabled prop 
      â†“ (å¦‚æœæ²¡æœ‰)
      ä¼ å…¥çš„ fallback å‚æ•°
      â†“ (å¦‚æœæ²¡æœ‰)
      è¡¨å•çš„ disabled çŠ¶æ€
      â†“ (å¦‚æœæ²¡æœ‰)
      é»˜è®¤å€¼ false
   */</span>
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">computed</span>(
    <span class="hljs-function">() =&gt;</span> disabled.<span class="hljs-property">value</span> || <span class="hljs-title function_">unref</span>(fallback) || form?.<span class="hljs-property">disabled</span> || <span class="hljs-literal">false</span>
  )
}

<span class="hljs-comment">/**
 * è·å–æŒ‰é’®è‡ªå®šä¹‰æ ·å¼
 * <span class="hljs-doctag">@param</span> props 
 * <span class="hljs-doctag">@returns</span> 
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">useButtonCustomStyle</span>(<span class="hljs-params">props: ButtonProps</span>) {
  <span class="hljs-comment">// è·å–æŒ‰é’®çš„disabledçŠ¶æ€</span>
  <span class="hljs-keyword">const</span> _disabled = <span class="hljs-title function_">useFormDisabled</span>()
  <span class="hljs-comment">// è·å–æŒ‰é’®çš„å‘½åç©ºé—´</span>
  <span class="hljs-keyword">const</span> ns = <span class="hljs-title function_">useNamespace</span>(<span class="hljs-string">'button'</span>)

  <span class="hljs-comment">// calculate hover &amp; active color by custom color</span>
  <span class="hljs-comment">// only work when custom color</span>
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">let</span> <span class="hljs-attr">styles</span>: <span class="hljs-title class_">Record</span>&lt;string, string&gt; = {}

    <span class="hljs-keyword">let</span> buttonColor = props.<span class="hljs-property">color</span>

    <span class="hljs-keyword">if</span> (buttonColor) {
      <span class="hljs-comment">// æ£€æµ‹buttonColoræ˜¯å¦ä¸ºCSSå˜é‡æ ¼å¼ ï¼Œå¹¶æå–å˜é‡å å¦‚ var(--el-color-primary)</span>
      <span class="hljs-keyword">const</span> match = (buttonColor <span class="hljs-keyword">as</span> string).<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/var\((.*?)\)/</span>)
      <span class="hljs-keyword">if</span> (match) {
        buttonColor = <span class="hljs-variable language_">window</span>
          .<span class="hljs-title function_">getComputedStyle</span>(<span class="hljs-variable language_">window</span>.<span class="hljs-property">document</span>.<span class="hljs-property">documentElement</span>)
          .<span class="hljs-title function_">getPropertyValue</span>(match[<span class="hljs-number">1</span>])
      }
      <span class="hljs-comment">// TinyColor: Fast, small color manipulation and conversion for JavaScript</span>
      <span class="hljs-keyword">const</span> color = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TinyColor</span>(buttonColor)
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'color'</span>, color)
      <span class="hljs-comment">// tint - å˜äº®ï¼ˆæ·»åŠ ç™½è‰²ï¼‰å˜äº®20%</span>
      <span class="hljs-comment">// darken - å˜æš—ï¼ˆæ·»åŠ é»‘è‰²ï¼‰å˜æš—20%</span>
      <span class="hljs-keyword">const</span> activeBgColor = props.<span class="hljs-property">dark</span>
        ? color.<span class="hljs-title function_">tint</span>(<span class="hljs-number">20</span>).<span class="hljs-title function_">toString</span>()
        : <span class="hljs-title function_">darken</span>(color, <span class="hljs-number">20</span>)

      <span class="hljs-keyword">if</span> (props.<span class="hljs-property">plain</span>) {
        styles = ns.<span class="hljs-title function_">cssVarBlock</span>({
          <span class="hljs-string">'bg-color'</span>: props.<span class="hljs-property">dark</span>
            ? <span class="hljs-title function_">darken</span>(color, <span class="hljs-number">90</span>)
            : color.<span class="hljs-title function_">tint</span>(<span class="hljs-number">90</span>).<span class="hljs-title function_">toString</span>(),
          <span class="hljs-string">'text-color'</span>: buttonColor,
          <span class="hljs-string">'border-color'</span>: props.<span class="hljs-property">dark</span>
            ? <span class="hljs-title function_">darken</span>(color, <span class="hljs-number">50</span>)
            : color.<span class="hljs-title function_">tint</span>(<span class="hljs-number">50</span>).<span class="hljs-title function_">toString</span>(),
          <span class="hljs-string">'hover-text-color'</span>: <span class="hljs-string">`var(<span class="hljs-subst">${ns.cssVarName(<span class="hljs-string">'color-white'</span>)}</span>)`</span>,
          <span class="hljs-string">'hover-bg-color'</span>: buttonColor,
          <span class="hljs-string">'hover-border-color'</span>: buttonColor,
          <span class="hljs-string">'active-bg-color'</span>: activeBgColor,
          <span class="hljs-string">'active-text-color'</span>: <span class="hljs-string">`var(<span class="hljs-subst">${ns.cssVarName(<span class="hljs-string">'color-white'</span>)}</span>)`</span>,
          <span class="hljs-string">'active-border-color'</span>: activeBgColor,
        })

        <span class="hljs-keyword">if</span> (_disabled.<span class="hljs-property">value</span>) {
          styles[ns.<span class="hljs-title function_">cssVarBlockName</span>(<span class="hljs-string">'disabled-bg-color'</span>)] = props.<span class="hljs-property">dark</span>
            ? <span class="hljs-title function_">darken</span>(color, <span class="hljs-number">90</span>)
            : color.<span class="hljs-title function_">tint</span>(<span class="hljs-number">90</span>).<span class="hljs-title function_">toString</span>()
          styles[ns.<span class="hljs-title function_">cssVarBlockName</span>(<span class="hljs-string">'disabled-text-color'</span>)] = props.<span class="hljs-property">dark</span>
            ? <span class="hljs-title function_">darken</span>(color, <span class="hljs-number">50</span>)
            : color.<span class="hljs-title function_">tint</span>(<span class="hljs-number">50</span>).<span class="hljs-title function_">toString</span>()
          styles[ns.<span class="hljs-title function_">cssVarBlockName</span>(<span class="hljs-string">'disabled-border-color'</span>)] = props.<span class="hljs-property">dark</span>
            ? <span class="hljs-title function_">darken</span>(color, <span class="hljs-number">80</span>)
            : color.<span class="hljs-title function_">tint</span>(<span class="hljs-number">80</span>).<span class="hljs-title function_">toString</span>()
        }
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">const</span> hoverBgColor = props.<span class="hljs-property">dark</span>
          ? <span class="hljs-title function_">darken</span>(color, <span class="hljs-number">30</span>)
          : color.<span class="hljs-title function_">tint</span>(<span class="hljs-number">30</span>).<span class="hljs-title function_">toString</span>()
        <span class="hljs-keyword">const</span> textColor = color.<span class="hljs-title function_">isDark</span>()
          ? <span class="hljs-string">`var(<span class="hljs-subst">${ns.cssVarName(<span class="hljs-string">'color-white'</span>)}</span>)`</span>
          : <span class="hljs-string">`var(<span class="hljs-subst">${ns.cssVarName(<span class="hljs-string">'color-black'</span>)}</span>)`</span>
        styles = ns.<span class="hljs-title function_">cssVarBlock</span>({
          <span class="hljs-string">'bg-color'</span>: buttonColor,
          <span class="hljs-string">'text-color'</span>: textColor,
          <span class="hljs-string">'border-color'</span>: buttonColor,
          <span class="hljs-string">'hover-bg-color'</span>: hoverBgColor,
          <span class="hljs-string">'hover-text-color'</span>: textColor,
          <span class="hljs-string">'hover-border-color'</span>: hoverBgColor,
          <span class="hljs-string">'active-bg-color'</span>: activeBgColor,
          <span class="hljs-string">'active-border-color'</span>: activeBgColor,
        })

        <span class="hljs-keyword">if</span> (_disabled.<span class="hljs-property">value</span>) {
          <span class="hljs-keyword">const</span> disabledButtonColor = props.<span class="hljs-property">dark</span>
            ? <span class="hljs-title function_">darken</span>(color, <span class="hljs-number">50</span>)
            : color.<span class="hljs-title function_">tint</span>(<span class="hljs-number">50</span>).<span class="hljs-title function_">toString</span>()
          styles[ns.<span class="hljs-title function_">cssVarBlockName</span>(<span class="hljs-string">'disabled-bg-color'</span>)] = disabledButtonColor
          styles[ns.<span class="hljs-title function_">cssVarBlockName</span>(<span class="hljs-string">'disabled-text-color'</span>)] = props.<span class="hljs-property">dark</span>
            ? <span class="hljs-string">'rgba(255, 255, 255, 0.5)'</span>
            : <span class="hljs-string">`var(<span class="hljs-subst">${ns.cssVarName(<span class="hljs-string">'color-white'</span>)}</span>)`</span>
          styles[ns.<span class="hljs-title function_">cssVarBlockName</span>(<span class="hljs-string">'disabled-border-color'</span>)] =
            disabledButtonColor
        }
      }
    }

    <span class="hljs-keyword">return</span> styles
  })
}


</code></pre>
<p>==========================================</p>
<pre><code class="hljs language-js" lang="js">propsï¼šnative-type
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> buttonNativeTypes = [<span class="hljs-string">'button'</span>, <span class="hljs-string">'submit'</span>, <span class="hljs-string">'reset'</span>] <span class="hljs-keyword">as</span> <span class="hljs-keyword">const</span>

<span class="hljs-attr">props</span>:
  <span class="hljs-comment">/**
   * <span class="hljs-doctag">@description</span> native button type
   */</span>
  <span class="hljs-attr">nativeType</span>: {
    <span class="hljs-attr">type</span>: <span class="hljs-title class_">String</span>,
    <span class="hljs-attr">values</span>: buttonNativeTypes,
    <span class="hljs-attr">default</span>: <span class="hljs-string">'button'</span>,
  },  

</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‰ç«¯er Go-Frame çš„å­¦ä¹ ç¬”è®°ï¼šå®ç° to-do åŠŸèƒ½ï¼ˆäºŒï¼‰ï¼Œå‰ç«¯é¡¹ç›®çš„å¼€å‘ï¼Œå¯¹æ¥åç«¯]]></title>    <link>https://juejin.cn/post/7580277964341264394</link>    <guid>https://juejin.cn/post/7580277964341264394</guid>    <pubDate>2025-12-06T06:29:41.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7580277964341264394" data-draft-id="7580277964341248010" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‰ç«¯er Go-Frame çš„å­¦ä¹ ç¬”è®°ï¼šå®ç° to-do åŠŸèƒ½ï¼ˆäºŒï¼‰ï¼Œå‰ç«¯é¡¹ç›®çš„å¼€å‘ï¼Œå¯¹æ¥åç«¯"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-06T06:29:41.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Lovely_Ruby"/> <meta itemprop="url" content="https://juejin.cn/user/377887732535384"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‰ç«¯er Go-Frame çš„å­¦ä¹ ç¬”è®°ï¼šå®ç° to-do åŠŸèƒ½ï¼ˆäºŒï¼‰ï¼Œå‰ç«¯é¡¹ç›®çš„å¼€å‘ï¼Œå¯¹æ¥åç«¯
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/377887732535384/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Lovely_Ruby
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-06T06:29:41.000Z" title="Sat Dec 06 2025 06:29:41 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æ•ˆæœ</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/97facea8bcc1420f8ced217138b642c5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTG92ZWx5X1J1Ynk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765607381&amp;x-signature=nk8AcbmjeqECxO3iMAFTwTMxiB0%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2e88889eee5f40cc9617f259f90aeb11~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTG92ZWx5X1J1Ynk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765607381&amp;x-signature=I75O5R1j8cvi3YynjWT%2BH9Jw8sI%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h2 data-id="heading-1">ç›¸å…³</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2Fu010263423%2Farticle%2Fdetails%2F155501045%3Fspm%3D1001.2014.3001.5502" target="_blank" title="https://blog.csdn.net/u010263423/article/details/155501045?spm=1001.2014.3001.5502" ref="nofollow noopener noreferrer">å‰ç«¯er Go-Frame çš„å­¦ä¹ ç¬”è®°ï¼šå®ç° to-do åŠŸèƒ½ï¼ˆä¸€ï¼‰</a></p>
<hr/>
<h2 data-id="heading-2">ç›®æ ‡</h2>
<p>ä¸Šä¸€ç« å·²ç»æŠŠåç«¯å®ç°äº†å¤§æ¦‚çš„åŠŸèƒ½ï¼Œç›®å‰å†™ä¸€ä¸‹å‰ç«¯ï¼Œåœ¨æ„å»ºçš„è¿‡ç¨‹ä¸­å¯èƒ½è¦æ”¹æ”¹åç«¯ä¸åˆç†çš„åœ°æ–¹ï¼Œæ¯”å¦‚ï¼š</p>
<ul>
<li>è¯·æ±‚çš„èµ„æºåº”è¯¥æ˜¯å¤æ•°ï¼Œæ‰€ä»¥è¦ä¿®æ”¹åç«¯çš„è·¯ç”± <code>todo</code> =&gt; <code>todos</code></li>
<li>å…ˆæŠŠå‰ç«¯çš„é¡µé¢ç”»å‡ºæ¥ï¼Œ<code>alova</code> çš„ä½¿ç”¨è¦å­¦ä¹ ä¸€ä¸‹</li>
<li>ä¹è§‚æ›´æ–°æ˜¯ä»€ä¹ˆï¼Ÿ</li>
</ul>
<hr/>
<h2 data-id="heading-3">å‰ç«¯</h2>
<p>å‰ç«¯çš„è¯ï¼Œæˆ‘æƒ³çœ‹ä¸€ä¸‹ <code>Alova</code> çš„ä½¿ç”¨æ–¹æ³•ï¼Œç„¶åæƒ³ä¸€ä¸‹å¦‚ä½•ç®€åŒ–å‰ç«¯ï¼Œåªç”¨å†™èµ„æºåå­—ï¼Œå³å¯åšåˆ°å¢åˆ æ”¹æŸ¥ï¼Œ
æŠ€æœ¯æ ˆçš„è¯ï¼Œé€‰æ‹© <code>React 19 + Antd 6 + Alova </code></p>
<hr/>
<h2 data-id="heading-4">æ­å»ºå‰ç«¯åŸºç¡€ä»£ç </h2>
<p>åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹ï¼Œç”¨ <code>vite</code> çš„è„šæ‰‹æ¶æ¥æ­å»ºé¡¹ç›®</p>
<pre><code class="hljs language-bash" lang="bash">pnpm create vite
</code></pre>
<p>ç„¶åè¾“å…¥é¡¹ç›®åï¼Œé€‰æ‹©æ¡†æ¶ç­‰ç­‰
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/580c3057f0c94f6c91a56bf826157d66~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTG92ZWx5X1J1Ynk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765607381&amp;x-signature=DMjEVeQEJqe4Kvey%2Brq9mBft75c%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
æ­å»ºå¥½åŸºç¡€ä¹‹åï¼ŒæŠŠ <code>antd</code> å’Œ <code>alova</code> å®‰è£…ä¸€ä¸‹</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6b57c6dd801d4795a392bf5c64389469~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTG92ZWx5X1J1Ynk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765607381&amp;x-signature=wevl9ThVB5wJzilocMLog5%2BVtlQ%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
å†å®‰è£…ä¸€äº› <code>eslint</code>, <code>antfu-eslint</code>ï¼Œå…·ä½“çš„ä½¿ç”¨é…ç½®å¯ä»¥çœ‹è¿™ä¸ªï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fantfu%2Feslint-config" target="_blank" title="https://github.com/antfu/eslint-config" ref="nofollow noopener noreferrer">github.com/antfu/eslinâ€¦</a></p>
<pre><code class="hljs language-bash" lang="bash">pnpm i -D eslint @antfu/eslint-config
</code></pre>
<p>ç„¶åå†™ä¸€ä¸‹ <code>eslint-config.js</code></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { antfu } <span class="hljs-keyword">from</span> <span class="hljs-string">'@antfu/eslint-config'</span>

<span class="hljs-comment">// ç¬¬ä¸€ä¸ªå¯¹è±¡æ˜¯åŸºç¡€é…ç½®ï¼ˆä½ æ²¡å†™ä¸œè¥¿ï¼‰</span>
<span class="hljs-comment">// ç¬¬äºŒä¸ªå¯¹è±¡æ˜¯è¦†ç›– antfu å†…ç½®è§„åˆ™</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">antfu</span>({

}, {
    <span class="hljs-attr">rules</span>: {
        <span class="hljs-string">'no-console'</span>: <span class="hljs-string">'off'</span>,                           <span class="hljs-comment">// å…è®¸ä½¿ç”¨ console.logï¼Œä¸å†è­¦å‘Š</span>
        <span class="hljs-string">'prefer-const'</span>: <span class="hljs-string">'off'</span>,                         <span class="hljs-comment">// å…è®¸ä½¿ç”¨ letï¼Œä¸å¼ºåˆ¶è¦æ±‚ç”¨ const</span>
        <span class="hljs-string">'ts/ban-ts-comment'</span>: <span class="hljs-string">'off'</span>,                    <span class="hljs-comment">// å…è®¸ä½¿ç”¨ @ts-ignore / @ts-nocheck ç­‰æ³¨é‡Š</span>
        <span class="hljs-string">'no-case-declarations'</span>: <span class="hljs-string">'off'</span>,                 <span class="hljs-comment">// å…è®¸åœ¨ switch/case é‡Œç›´æ¥å†™ const/let</span>
        <span class="hljs-string">'ts/no-use-before-define'</span>: <span class="hljs-string">'off'</span>,              <span class="hljs-comment">// å…è®¸å˜é‡æˆ–å‡½æ•°åœ¨å®šä¹‰å‰è¢«ä½¿ç”¨</span>
        <span class="hljs-string">'ts/no-unused-expressions'</span>: <span class="hljs-string">'off'</span>,             <span class="hljs-comment">// å…è®¸ç±»ä¼¼æ¡ä»¶ &amp;&amp; è¡¨è¾¾å¼çš„å†™æ³•</span>
        <span class="hljs-string">'ts/no-empty-object-type'</span>: <span class="hljs-string">'off'</span>,              <span class="hljs-comment">// å…è®¸å®šä¹‰ç©ºå¯¹è±¡ç±»å‹ type A = {}</span>
        <span class="hljs-string">'ts/no-unsafe-function-type'</span>: <span class="hljs-string">'off'</span>,           <span class="hljs-comment">// å…è®¸ä½¿ç”¨ any å‡½æ•°ç­¾å (...args: any[]) =&gt; any</span>
        <span class="hljs-string">'ts/consistent-type-definitions'</span>: <span class="hljs-string">'off'</span>,       <span class="hljs-comment">// ä¸å¼ºåˆ¶åªèƒ½ç”¨ type æˆ– interfaceï¼Œéšä¾¿å†™</span>
        <span class="hljs-string">'style/indent'</span>: [<span class="hljs-string">'error'</span>, <span class="hljs-number">4</span>],                  <span class="hljs-comment">// å¼ºåˆ¶ä½¿ç”¨ 4 ç©ºæ ¼ç¼©è¿›</span>
        <span class="hljs-string">'style/jsx-indent-props'</span>: [<span class="hljs-string">'error'</span>, <span class="hljs-number">4</span>],        <span class="hljs-comment">// JSX å±æ€§ç¼©è¿›ä¹Ÿæ˜¯ 4 ç©ºæ ¼</span>
        <span class="hljs-string">'prefer-promise-reject-errors'</span>: <span class="hljs-string">'off'</span>,         <span class="hljs-comment">// å…è®¸ reject('xxx')ï¼Œä¸å¼ºåˆ¶å¿…é¡» new Error()</span>
        <span class="hljs-string">'eslint-comments/no-unlimited-disable'</span>: <span class="hljs-string">'off'</span>, <span class="hljs-comment">// å…è®¸å†™ /* eslint-disable */ ç¦ç”¨æ‰€æœ‰è§„åˆ™</span>
    },
})
</code></pre>
<p>okï¼Œä¾èµ–å®‰è£…å®Œä¹‹åï¼Œæ¥çœ‹çœ‹è¿™ä¸ªç©ºçš„é¡¹ç›®ï¼Œé…ç½®ä¸€ä¸‹ç¯å¢ƒï¼Œä»¥åŠ vite çš„ä»£ç† proxyï¼Œå’Œ <code>tsconfig.json</code></p>
<ul>
<li>é…ç½® tsconfig.jsonï¼Œç”¨äºæ”¹å˜ <code>ide ä»£ç ç¼–è¾‘å™¨</code>çš„é…ç½®ï¼Œæ¯”æ–¹è¯´ <code>@</code> è¿™ç§ <code>alias</code></li>
<li>é…ç½® <code>vite.config.json</code> ä¸­çš„ <code>@</code> ç”¨äºæ‰“åŒ…æ—¶å€™çš„æè¿°ï¼Œä»¥åŠ <code>proxy</code> ä»£ç†è¯·æ±‚åç«¯æ¥å£</li>
</ul>
<hr/>
<h3 data-id="heading-5">é…ç½® tsconfig.json</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ac68497d3e3f448f8991aac644548c2a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTG92ZWx5X1J1Ynk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765607381&amp;x-signature=2Jx8cuaCbm%2BcchoHh3ca81I%2FzwU%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/96017da695b04f8fa8549767f306b092~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTG92ZWx5X1J1Ynk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765607381&amp;x-signature=3zpN9e4YKhn1RJCTnRaTLFsmDnE%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8ddbdf84471d4a21a61e955acd134820~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTG92ZWx5X1J1Ynk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765607381&amp;x-signature=EQBIFHUjcbZsSH236SA6G3GNZXw%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<hr/>
<h3 data-id="heading-6">åç«¯ï¼šç»Ÿä¸€æ¥å£ä¸º v1 ç‰ˆæœ¬ï¼Œè·¯ç”±åˆ†ç»„</h3>
<p>è¿˜è®°çš„å†™åç«¯æ—¶é‡åˆ°çš„ç–‘é—®å— <a href="https://link.juejin.cn?target=https%3A%2F%2Fgoframe.org%2Fquick%2Fscaffold-api-definition" target="_blank" title="https://goframe.org/quick/scaffold-api-definition" ref="nofollow noopener noreferrer">goframe.org/quick/scaffâ€¦</a>ï¼Œä¸ºä»€ä¹ˆç”¨ <code>/api/v1</code> å½“å€Ÿå£çš„å‰ç¼€</p>
<p>ç›®å‰åç«¯æ˜¯æ²¡æœ‰æ¥å£è·¯ç”±åˆ†ç»„çš„ï¼Œæ‰€ä»¥æ¥æ”¹ä¸€ä¸‹åç«¯ï¼Œè®©å‰ç«¯ä»¥åé€šè¿‡ <code>/api/v1/todo</code> æ¥è®¿é—®</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7615397cad41423ea110d624e9421c27~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTG92ZWx5X1J1Ynk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765607381&amp;x-signature=f%2FwamxVVvqsNmdV8ZuxKAFGnoBk%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<hr/>
<h3 data-id="heading-7">å‰ç«¯ï¼šå¼•å…¥ alovaï¼Œé…ç½®å®ä¾‹</h3>
<p>å‰ç«¯çš„è¯ï¼Œè¦æ”¹è¿™å‡ ä¸ªæ–‡ä»¶</p>
<ul>
<li>æŠŠ <code>Alova</code> çš„å®ä¾‹çš„ <code>baseUrl</code> æ”¹ä¸€ä¸‹</li>
<li><code>.env</code> æ–‡ä»¶ä¹Ÿæ”¹æ”¹</li>
</ul>
<p>è¿™äº›å°±ç®—æ˜¯å‰ç«¯çš„é…ç½®äº†</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6a1e896494684a7faddb7f1a5b3b6527~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTG92ZWx5X1J1Ynk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765607381&amp;x-signature=w0yhUNpzTc1HxG0ZlXZhxlzfI6w%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// api/alova.ts</span>
<span class="hljs-keyword">import</span> { createAlova } <span class="hljs-keyword">from</span> <span class="hljs-string">'alova'</span>
<span class="hljs-keyword">import</span> adapterFetch <span class="hljs-keyword">from</span> <span class="hljs-string">'alova/fetch'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">ReactHook</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'alova/react'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> alovaInstance = <span class="hljs-title function_">createAlova</span>({
    <span class="hljs-attr">baseURL</span>: <span class="hljs-string">'/api/v1'</span>, <span class="hljs-comment">// è¿™é‡Œä¼šè‡ªåŠ¨æ‹¼æ¥åˆ°æ¯ä¸ªæ¥å£çš„å‰é¢çš„</span>
    <span class="hljs-attr">requestAdapter</span>: <span class="hljs-title function_">adapterFetch</span>(),
    <span class="hljs-attr">responded</span>: <span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> response.<span class="hljs-title function_">json</span>(),
    <span class="hljs-attr">statesHook</span>: <span class="hljs-title class_">ReactHook</span>, <span class="hljs-comment">// å¦‚æœå†™ react çš„è¯ï¼Œè¦å¼•å…¥è¿™ä¸ªï¼Œä¸ç„¶ç™½å±</span>
})
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/08a061d492814046959db571fc249ec3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTG92ZWx5X1J1Ynk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765607381&amp;x-signature=XZkdolx1eFRenNbRaR9qV5gLK98%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>ç„¶åå†™ä¸€ä¸‹é¡µé¢</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// é¡µé¢ todo.tsx</span>
<span class="hljs-keyword">import</span> { useRequest } <span class="hljs-keyword">from</span> <span class="hljs-string">'alova/client'</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Button</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'antd'</span>
<span class="hljs-keyword">import</span> { alovaInstance } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/api/alova'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">PageTodo</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> { data } = <span class="hljs-title function_">useRequest</span>(
        alovaInstance.<span class="hljs-title class_">Get</span>(<span class="hljs-string">'/todo'</span>),
    )
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'data:&gt;&gt;'</span>, data)
    <span class="hljs-keyword">return</span> (
        <span class="xml"><span class="hljs-tag">&lt;&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
                è¿™æ˜¯ todo çš„é¡µé¢
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">Button</span>&gt;</span>ç‚¹æˆ‘123312<span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span>
        <span class="hljs-tag">&lt;/&gt;</span></span>
    )
}

</code></pre>
<p>ç„¶åå†æµè§ˆå™¨ä¸­è¯•ä¸€ä¸‹ï¼Œå¯ä»¥çœ‹åˆ°å‰ç«¯èƒ½è¯·æ±‚åˆ°æ¥å£äº†ï¼</p>
<blockquote>
<p>è¿™é‡Œå…¶å®å¹¶æ²¡æœ‰é‚£ä¹ˆé¡ºåˆ©
å½“æˆ‘æ²¡æœ‰æ”¹åç«¯çš„ <code>/api/v1</code> åˆ†ç»„ä¹‹å‰ï¼Œå‰ç«¯æ˜¯è¯·æ±‚ä¸åˆ°åç«¯çš„ï¼Œæˆ‘ä»¥ä¸ºæ˜¯åç«¯æ²¡æœ‰é…ç½®è·¨åŸŸï¼Œï¼ˆåæ¥æˆ‘ä¹Ÿæ²¡å»é…ç½® <code>go-frame</code> çš„è·¨åŸŸï¼Œå› ä¸ºä¸æ˜¯è¿™ä¸ªé—®é¢˜ï¼‰
æ˜¯å› ä¸ºä»€ä¹ˆå‘¢ï¼Œå°±æ˜¯ <code>vite</code> çš„ä»£ç†ï¼Œ<del>æˆ‘ä»¥ä¸ºå‰ç«¯è¯·æ±‚çš„ <code>/api/v1/todo</code>ï¼Œå°±ä¼šèµ°ä»£ç†ï¼Œä¹‹åä»£ç†ä¼šæŠŠ <code>api/v1</code> ç»™å»æ‰ï¼Œä½†æ˜¯è¿™ä¸ªæƒ³æ³•æ˜¯é”™è¯¯çš„</del>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c5c06467fd5e4a0b98318c2eb1819d1c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTG92ZWx5X1J1Ynk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765607381&amp;x-signature=pYV2ugd9UGOr0K%2BJKrfMBbhBST0%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
</blockquote>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f766ce429c81435d8604d102c7d96e34~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTG92ZWx5X1J1Ynk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765607381&amp;x-signature=759DJ%2B7hGUdh25puhrn6Ct%2BWJUU%3D" alt="åœ¨è¿™é‡Œæ’å…¥ä»£ç ç‰‡" loading="lazy"/></p>
<hr/>
<h3 data-id="heading-8">å‰ç«¯é¡µé¢åŠŸèƒ½çš„å®ç°</h3>
<p>æˆ‘å‡†å¤‡æŠŠ <code>tailwindcss</code> ä¹Ÿå®‰è£…ä¸€ä¸‹ï¼Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Ftailwindcss.com%2Fdocs%2Finstallation%2Fusing-vite" target="_blank" title="https://tailwindcss.com/docs/installation/using-vite" ref="nofollow noopener noreferrer">å…·ä½“æ€ä¹ˆå®‰è£…å¯ä»¥çœ‹ä¸€ä¸‹è¿™ä¸ª https://tailwindcss.com/docs/installation/using-vite</a></p>
<p>ç„¶åè®© <code>AI</code> å…ˆå†™ä¸€ä¸ªç®€å•çš„é¡µé¢</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c2a6ece529d04430bddf1589cd92067d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTG92ZWx5X1J1Ynk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765607381&amp;x-signature=fA0zQACVcfGY7w%2FNBusdWAzH2wU%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>ä¹‹åæŠŠå…¶ä»–åŠŸèƒ½å®ç°ä¸€ä¸‹</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/57f31d0415b641688ef3d0d077d42de1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTG92ZWx5X1J1Ynk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765607381&amp;x-signature=HbjwwWPXu91lXYZRGT4%2FDlfEF0M%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>ä¸è¿‡æˆ‘çœ‹æ¯æ¬¡æ›´æ–°ä¹‹åå‘½ä¸­äº† <code>alova</code> çš„ç¼“å­˜äº†ï¼Œå¯¼è‡´åˆ·æ–°ä¹‹åé¡µé¢çš„æ•°æ®æ²¡æœ‰æ›´æ–°ï¼ˆä½†æ˜¯æ•°æ®åº“å·²ç»æ›´æ”¹äº†ï¼‰</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/21051e1d6fb04d64a48e5b3ff7e53c2c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTG92ZWx5X1J1Ynk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765607381&amp;x-signature=5Wl6%2FgTI4WSy3Xc857wOcOUiEsc%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Falova.js.org%2Fzh-CN%2Ftutorial%2Fclient%2Fstrategy%2Fuse-request%23%25E5%25BC%25BA%25E5%2588%25B6%25E8%25AF%25B7%25E6%25B1%2582" target="_blank" title="https://alova.js.org/zh-CN/tutorial/client/strategy/use-request#%E5%BC%BA%E5%88%B6%E8%AF%B7%E6%B1%82" ref="nofollow noopener noreferrer">æŸ¥äº†ä¸€ä¸‹å®˜æ–¹æ–‡æ¡£</a>, è¿™é‡Œæœ‰ä¸ªå¼ºåˆ¶è¯·æ±‚ï¼Œæˆ‘å¯ä»¥åœ¨ <code>Alova</code> ä¸­é…ç½®ä¸€ä¸‹è¿™ä¸ªæ¥å£</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8077a592fc364d01827505d68e3282d5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTG92ZWx5X1J1Ynk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765607381&amp;x-signature=Ob69IhrHYx3NIcFfBJbMwr8Gods%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/58edb3844fa247a1b41aff992a9153c2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTG92ZWx5X1J1Ynk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765607381&amp;x-signature=SVbSgnTfkFO1qGOPMIXe8Q3UKII%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-9">æºä»“åº“</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FLovely-Ruby%2Flearn-go-frame" target="_blank" title="https://github.com/Lovely-Ruby/learn-go-frame" ref="nofollow noopener noreferrer">github.com/Lovely-Rubyâ€¦</a></p>
<p>æ¥ä¸‹æ¥å‡†å¤‡æŠŠè¿™ä¸¤ä¸ªé¡¹ç›®æ”¾åˆ° <code>Docker</code> ä¸­</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[AI First + Mobile Firstï¼šç”¨å¤§æ¨¡å‹é‡æ„ä¸‹ä¸€ä»£åº”ç”¨å¼€å‘èŒƒå¼]]></title>    <link>https://juejin.cn/post/7580210602079207458</link>    <guid>https://juejin.cn/post/7580210602079207458</guid>    <pubDate>2025-12-06T06:34:25.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7580210602079207458" data-draft-id="7580288235029790720" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="AI First + Mobile Firstï¼šç”¨å¤§æ¨¡å‹é‡æ„ä¸‹ä¸€ä»£åº”ç”¨å¼€å‘èŒƒå¼"/> <meta itemprop="keywords" content="å‰ç«¯,LLM,æ¶æ„"/> <meta itemprop="datePublished" content="2025-12-06T06:34:25.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”Ÿæ¤°ä¸ç»’æ‹¿é“"/> <meta itemprop="url" content="https://juejin.cn/user/4185180725584116"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            AI First + Mobile Firstï¼šç”¨å¤§æ¨¡å‹é‡æ„ä¸‹ä¸€ä»£åº”ç”¨å¼€å‘èŒƒå¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4185180725584116/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”Ÿæ¤°ä¸ç»’æ‹¿é“
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-06T06:34:25.000Z" title="Sat Dec 06 2025 06:34:25 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨æŠ€æœ¯æ¼”è¿›çš„æµªæ½®ä¸­ï¼Œæˆ‘ä»¬æ­£ç«™åœ¨ä¸€ä¸ªå…³é”®æ‹ç‚¹ä¸Šï¼š<strong>AI ä¸å†åªæ˜¯â€œè¾…åŠ©å·¥å…·â€ï¼Œè€Œæ˜¯æˆä¸ºåº”ç”¨çš„æ ¸å¿ƒé©±åŠ¨åŠ›</strong>ã€‚ä¸æ­¤åŒæ—¶ï¼Œç§»åŠ¨è®¾å¤‡æ—©å·²è¶…è¶Š PCï¼Œæˆä¸ºç”¨æˆ·ä¸æ•°å­—ä¸–ç•Œäº¤äº’çš„ç¬¬ä¸€å…¥å£ã€‚å¦‚ä½•å°† <strong>AI First</strong> ä¸ <strong>Mobile First</strong> çš„ç†å¿µæ·±åº¦èåˆï¼Œæ‰“é€ çœŸæ­£æ™ºèƒ½ã€é«˜æ•ˆã€æ™®æƒ çš„æ–°ä¸€ä»£åº”ç”¨ï¼Ÿæœ¬æ–‡å°†ä»å®è·µå‡ºå‘ï¼Œç»“åˆçœŸå®ä»£ç æ¡ˆä¾‹ï¼Œæ¢è®¨ä¸€æ¡å¯è½åœ°çš„æŠ€æœ¯è·¯å¾„ã€‚</p>
<hr/>
<h2 data-id="heading-0">ä¸€ã€ä»€ä¹ˆæ˜¯ AI Firstï¼Ÿ</h2>
<p>â€œAI Firstâ€ å¹¶éå£å·ï¼Œè€Œæ˜¯ä¸€ç§äº§å“è®¾è®¡å“²å­¦ï¼š<strong>ä»¥å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰ä¸ºæ ¸å¿ƒå¼•æ“ï¼Œé‡æ„ç”¨æˆ·äº¤äº’é€»è¾‘å’Œç³»ç»Ÿæ¶æ„</strong>ã€‚</p>
<h3 data-id="heading-1">åœºæ™¯ç¤ºä¾‹ï¼šç‚¹ä¸€æ¯å¥¶èŒ¶</h3>
<p>æƒ³è±¡è¿™æ ·ä¸€ä¸ªåœºæ™¯ï¼š</p>
<blockquote>
<p>â€œè±†åŒ…ï¼Œå¸®æˆ‘ç‚¹æ¯å°‘ç³–çƒ­å¥¶èŒ¶ï¼Œåœ¨ç¾å›¢ã€æŠ–éŸ³ã€æ·˜å®ä¸Šæ¯”ä»·ï¼Œç”¨ä¸Šä¼˜æƒ åˆ¸ï¼Œé€‰æœ€ä¾¿å®œçš„é‚£å®¶ä¸‹å•ã€‚â€</p>
</blockquote>
<p>è¿™èƒŒåæ¶‰åŠï¼š</p>
<ul>
<li>å¤šå¹³å°å•†å“ä¿¡æ¯æŠ“å–</li>
<li>ä»·æ ¼ä¸ä¼˜æƒ ç­–ç•¥è®¡ç®—</li>
<li>ç”¨æˆ·åå¥½ç†è§£ï¼ˆå°‘ç³–ã€çƒ­é¥®ï¼‰</li>
<li>è‡ªåŠ¨åŒ–ä¸‹å•æµç¨‹</li>
</ul>
<p>ä¼ ç»Ÿæ–¹å¼éœ€è¦åˆ†åˆ«è°ƒç”¨å„å¹³å° APIã€ç»´æŠ¤å¤æ‚çš„ä¸šåŠ¡è§„åˆ™ã€‚è€Œåœ¨ <strong>AI Agent æ¶æ„</strong>ä¸‹ï¼ŒLLM ä½œä¸ºâ€œè°ƒåº¦ä¸­æ¢â€ï¼Œé€šè¿‡è‡ªç„¶è¯­è¨€ç†è§£ç”¨æˆ·æ„å›¾ï¼ŒåŠ¨æ€è°ƒç”¨å·¥å…·é“¾ï¼ˆTool Callingï¼‰ï¼Œå®ç°ç«¯åˆ°ç«¯è‡ªåŠ¨åŒ–ã€‚</p>
<blockquote>
<p>è¿™å°±æ˜¯ <strong>AI Native åº”ç”¨</strong>çš„é›å½¢â€”â€”ç”¨æˆ·åªéœ€è¡¨è¾¾â€œåšä»€ä¹ˆâ€ï¼Œç³»ç»Ÿè‡ªåŠ¨å®Œæˆâ€œæ€ä¹ˆåšâ€ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-2">äºŒã€è®© LLM ç†è§£ä½ çš„æ•°æ®åº“ï¼šText-to-SQL çš„å®æˆ˜çªç ´</h2>
<p>è¦è®© AI æ“ä½œä¸šåŠ¡æ•°æ®ï¼Œå…³é”®ä¸€æ­¥æ˜¯ <strong>æ‰“é€šè‡ªç„¶è¯­è¨€ä¸ç»“æ„åŒ–æ•°æ®çš„é¸¿æ²Ÿ</strong>ã€‚Text-to-SQL æ­£æ˜¯è¿™ä¸€æ¡¥æ¢ã€‚</p>
<h3 data-id="heading-3">å®æˆ˜ï¼šç”¨ DeepSeek ç”Ÿæˆ SQL æŸ¥è¯¢</h3>
<p>æˆ‘ä»¬ä»¥ä¸€ä¸ªå‘˜å·¥ç®¡ç†ç³»ç»Ÿä¸ºä¾‹ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"># è¡¨ç»“æ„
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> EMPLOYEES (
    id <span class="hljs-type">INTEGER</span>
    name TEXT
    department TEXT
    salary <span class="hljs-type">INTEGER</span>
)
</code></pre>
<p>å½“ç”¨æˆ·é—®ï¼šâ€œ<strong>å·¥ç¨‹éƒ¨é—¨å‘˜å·¥çš„å§“åå’Œå·¥èµ„æ˜¯å¤šå°‘ï¼Ÿ</strong> â€</p>
<p>æˆ‘ä»¬å°†è¡¨ç»“æ„ï¼ˆSchemaï¼‰ä½œä¸ºä¸Šä¸‹æ–‡æ³¨å…¥ Promptï¼š</p>
<pre><code class="hljs language-sql" lang="sql">è¿™æ˜¯ä¸€ä¸ªæ•°æ®åº“çš„Schema:
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> EMPLOYEES (
    id <span class="hljs-type">INTEGER</span>
    name TEXT
    department TEXT
    salary <span class="hljs-type">INTEGER</span>
)
æ ¹æ®è¿™ä¸ªSchema,è¯·è¾“å‡ºä¸€ä¸ª<span class="hljs-keyword">SQL</span>æŸ¥è¯¢æ¥å›ç­”ä»¥ä¸‹é—®é¢˜ã€‚
åªè¾“å‡º<span class="hljs-keyword">SQL</span>æŸ¥è¯¢è¯­å¥æœ¬èº«â€¦â€¦
é—®é¢˜ï¼šå·¥ç¨‹éƒ¨é—¨å‘˜å·¥çš„å§“åå’Œå·¥èµ„æ˜¯å¤šå°‘
</code></pre>
<p>LLM è¿”å›ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">SELECT name, salary FROM employees WHERE <span class="hljs-attr">department</span> = <span class="hljs-string">'å·¥ç¨‹'</span><span class="hljs-comment">;</span>
</code></pre>
<p>æ‰§è¡Œåå¾—åˆ°ç»“æœï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-attr">[(<span class="hljs-string">'å®å®'</span>, 75000), (<span class="hljs-string">'æ‚¦æ‚¦'</span>, 80000), (<span class="hljs-string">'å‘†é±¼'</span>, 80000)]</span>
</code></pre>
<p>æ›´æƒŠäººçš„æ˜¯ï¼Œå®ƒè¿˜èƒ½å¤„ç† <strong>å¢åˆ æ”¹</strong> æ“ä½œï¼š</p>
<ul>
<li>â€œåœ¨é”€å”®éƒ¨é—¨å¢åŠ ä¸€ä¸ªæ–°å‘˜å·¥ï¼Œå§“åä¸ºå¼ ä¸‰ï¼Œå·¥èµ„ä¸º45000â€<br/>
â†’ <code>INSERT INTO employees (name, department, salary) VALUES ('å¼ ä¸‰', 'é”€å”®', 45000);</code></li>
<li>â€œåˆ é™¤å¸‚åœºéƒ¨é—¨çš„é»„ä»å‹‹â€<br/>
â†’ <code>DELETE FROM employees WHERE name = 'é»„ä»å‹‹' AND department = 'å¸‚åœº';</code></li>
</ul>
<blockquote>
<p>è¿™æ„å‘³ç€ï¼š<strong>éæŠ€æœ¯äººå‘˜ä¹Ÿèƒ½å®‰å…¨åœ°æ“ä½œæ•°æ®åº“</strong>ã€‚åå°ç®¡ç†ä¸å†å±€é™äºç¨‹åºå‘˜ï¼Œè¿è¥ã€äº§å“ã€å°ç¼–å‡å¯å‚ä¸â€”â€”è¿™å°±æ˜¯â€œæ•°æ®åº“å¹³æƒâ€ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-4">ä¸‰ã€Mobile Firstï¼šä¸æ˜¯é€‚é…ï¼Œè€Œæ˜¯ä¼˜å…ˆ</h2>
<p>â€œMobile Firstâ€ å¸¸è¢«è¯¯è§£ä¸ºâ€œå…ˆåšç§»åŠ¨ç«¯ï¼Œå†é€‚é… PCâ€ã€‚ä½†çœŸæ­£çš„ Mobile First æ˜¯ï¼š</p>
<ul>
<li><strong>ä»¥è§¦æ§ã€å°å±ã€å¼±ç½‘ã€ç¢ç‰‡åŒ–ä½¿ç”¨åœºæ™¯ä¸ºè®¾è®¡èµ·ç‚¹</strong></li>
<li>åˆ©ç”¨ç§»åŠ¨ç«¯ç‰¹æ€§ï¼ˆæ‘„åƒå¤´ã€GPSã€é€šçŸ¥ã€ç”Ÿç‰©è¯†åˆ«ï¼‰æ„å»ºæ ¸å¿ƒä½“éªŒ</li>
<li>PC ç«¯ä»…ä½œä¸ºè¡¥å……ï¼ˆå¦‚æŠ¥è¡¨æŸ¥çœ‹ã€æ‰¹é‡æ“ä½œï¼‰</li>
</ul>
<h3 data-id="heading-5">æŠ€æœ¯å®è·µå»ºè®®ï¼š</h3>
<ul>
<li>ä½¿ç”¨ CSS <code>@media</code> å®ç°å“åº”å¼å¸ƒå±€ï¼Œä½†<strong>é»˜è®¤æ ·å¼æŒ‰æ‰‹æœºè®¾è®¡</strong></li>
<li>å°ç¨‹åº/App æ‰¿è½½ 80% åŠŸèƒ½ï¼ŒPC Web ä»…ä¿ç•™ 20% é«˜æ•ˆæ“ä½œ</li>
<li>ç»“åˆ PWA å®ç°â€œç±»åŸç”Ÿâ€ä½“éªŒï¼Œé™ä½å®‰è£…é—¨æ§›</li>
</ul>
<blockquote>
<p>åœ¨ AI èµ‹èƒ½ä¸‹ï¼Œç§»åŠ¨ç«¯è¿˜å¯é›†æˆè¯­éŸ³è¾“å…¥ã€å›¾åƒè¯†åˆ«ï¼ˆå¦‚æ‹èœå•ç‚¹å•ï¼‰ï¼Œè¿›ä¸€æ­¥é™ä½äº¤äº’æˆæœ¬ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-6">å››ã€ç”Ÿæ€æ”¯æ’‘ï¼šModelScope ä¸å¼€æºæ¨¡å‹</h2>
<p>é˜¿é‡Œäº‘çš„ <strong>ModelScopeï¼ˆé­”æ­ï¼‰</strong> ä¸ºå¼€å‘è€…æä¾›äº†å¼ºå¤§åŸºç¡€è®¾æ–½ï¼š</p>
<ul>
<li><strong>å¤§æ¨¡å‹å¸‚åœº</strong>ï¼šä¸€é”®éƒ¨ç½² Qwenã€DeepSeek ç­‰å¼€æºæ¨¡å‹</li>
<li><strong>æ•°æ®é›†ä¸å¾®è°ƒå·¥å…·</strong>ï¼šé’ˆå¯¹å‚ç›´é¢†åŸŸï¼ˆå¦‚ç”µå•†ã€åŒ»ç–—ï¼‰å®šåˆ¶ LLM</li>
<li><strong>Notebook ç¯å¢ƒ</strong>ï¼šå¿«é€Ÿå®éªŒ Text-to-SQLã€Agent ç­‰èƒ½åŠ›</li>
</ul>
<p>ä¾‹å¦‚ï¼Œé€šè¿‡ ModelScope å¾®è°ƒä¸€ä¸ªâ€œå¥¶èŒ¶ç‚¹å•ä¸“ç”¨æ¨¡å‹â€ï¼Œå¯æ˜¾è‘—æå‡å¯¹â€œå°‘ç³–å»å†°åŠ å¸ƒä¸â€ç­‰å£è¯­åŒ–æŒ‡ä»¤çš„ç†è§£å‡†ç¡®ç‡ã€‚</p>
<hr/>
<h2 data-id="heading-7">äº”ã€æœªæ¥å·²æ¥ï¼šAI + Mobile = æ–°æ“ä½œç³»ç»Ÿ</h2>
<p>å½“ LLM èƒ½ç†è§£ç”¨æˆ·æ„å›¾ã€æ“ä½œåº”ç”¨ã€è°ƒç”¨æœåŠ¡ã€ä¿®æ”¹æ•°æ®ï¼Œ<strong>ä¼ ç»Ÿçš„ App ç•Œé¢å¯èƒ½ä¸å†æ˜¯å¿…éœ€å“</strong>ã€‚</p>
<p>æœªæ¥çš„äº¤äº’å¯èƒ½æ˜¯ï¼š</p>
<ul>
<li>è¯­éŸ³/æ–‡å­— â†’ AI Agent â†’ è‡ªåŠ¨å®Œæˆä»»åŠ¡</li>
<li>ç”¨æˆ·åªå…³å¿ƒç»“æœï¼Œä¸å…³å¿ƒè¿‡ç¨‹</li>
</ul>
<p>è€Œç§»åŠ¨ç«¯ï¼Œå› å…¶éšèº«æ€§ã€ä¼ æ„Ÿå™¨ä¸°å¯Œæ€§ã€æ¨é€èƒ½åŠ›ï¼Œå°†æˆä¸º AI Agent çš„æœ€ä½³è½½ä½“ã€‚</p>
<blockquote>
<p>æˆ‘ä»¬æ­£åœ¨ä»â€œäººé€‚åº”è½¯ä»¶â€èµ°å‘â€œè½¯ä»¶é€‚åº”äººâ€ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-8">ç»“è¯­ï¼šå¼€å‘è€…çš„æ–°è§’è‰²</h2>
<p>åœ¨ AI First æ—¶ä»£ï¼Œå¼€å‘è€…ä¸å†æ˜¯â€œåŠŸèƒ½å®ç°è€…â€ï¼Œè€Œæ˜¯ï¼š</p>
<ul>
<li><strong>Prompt å·¥ç¨‹å¸ˆ</strong>ï¼šè®¾è®¡é«˜è´¨é‡ä¸Šä¸‹æ–‡ä¸æŒ‡ä»¤</li>
<li><strong>Agent æ¶æ„å¸ˆ</strong>ï¼šç¼–æ’å·¥å…·é“¾ä¸å®‰å…¨è¾¹ç•Œ</li>
<li><strong>ä½“éªŒè®¾è®¡å¸ˆ</strong>ï¼šåœ¨è‡ªç„¶è¯­è¨€äº¤äº’ä¸­åˆ›é€ æµç•…æ„Ÿ</li>
</ul>
<p>æ‹¥æŠ±å˜åŒ–ï¼Œä»ä»Šå¤©å¼€å§‹ï¼š<br/>
<strong>è®©ä½ çš„ä¸‹ä¸€ä¸ªé¡¹ç›®ï¼Œå…ˆé—®ä¸€å¥â€”â€”â€œAI èƒ½æ€ä¹ˆå¸®ç”¨æˆ·åšå¾—æ›´å¥½ï¼Ÿâ€</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Javaå‡½æ•°å¼ç¼–ç¨‹ï¼šç”¨Stream APIé‡æ„ä½ çš„ä»£ç é€»è¾‘]]></title>    <link>https://juejin.cn/post/7580297762189623337</link>    <guid>https://juejin.cn/post/7580297762189623337</guid>    <pubDate>2025-12-06T06:48:40.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7580297762189623337" data-draft-id="7580287891272810559" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Javaå‡½æ•°å¼ç¼–ç¨‹ï¼šç”¨Stream APIé‡æ„ä½ çš„ä»£ç é€»è¾‘"/> <meta itemprop="keywords" content="Java"/> <meta itemprop="datePublished" content="2025-12-06T06:48:40.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å†™å®Œä»£ç å°±å›å®¶ç»“å©š"/> <meta itemprop="url" content="https://juejin.cn/user/1584808738954667"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Javaå‡½æ•°å¼ç¼–ç¨‹ï¼šç”¨Stream APIé‡æ„ä½ çš„ä»£ç é€»è¾‘
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1584808738954667/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å†™å®Œä»£ç å°±å›å®¶ç»“å©š
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-06T06:48:40.000Z" title="Sat Dec 06 2025 06:48:40 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Javaå‡½æ•°å¼ç¼–ç¨‹ï¼šç”¨Stream APIé‡æ„ä½ çš„ä»£ç é€»è¾‘</h2>
<p>åœ¨å½“ä»Šå¿«èŠ‚å¥çš„å¼€å‘ç¯å¢ƒä¸­ï¼Œå†™å‡ºç®€æ´ã€é«˜æ•ˆçš„ä»£ç å˜å¾—è¶Šæ¥è¶Šé‡è¦ã€‚Java 8å¼•å…¥çš„Stream APIä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ç§å…¨æ–°çš„æ•°æ®å¤„ç†æ–¹å¼ï¼Œè®©æˆ‘ä»¬èƒ½å¤Ÿä»¥å£°æ˜å¼çš„æ–¹å¼å¤„ç†é›†åˆæ•°æ®ï¼Œå¤§å¤§æå‡äº†ä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</p>
<h3 data-id="heading-1">ä»å‘½ä»¤å¼åˆ°å£°æ˜å¼çš„è½¬å˜</h3>
<p>ä¼ ç»Ÿä¸Šï¼Œæˆ‘ä»¬å¤„ç†é›†åˆæ•°æ®é€šå¸¸é‡‡ç”¨å‘½ä»¤å¼ç¼–ç¨‹é£æ ¼ï¼š</p>
<pre><code class="hljs language-java" lang="java">List&lt;String&gt; filteredNames = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
<span class="hljs-keyword">for</span> (Employee emp : employees) {
    <span class="hljs-keyword">if</span> (emp.getAge() &gt; <span class="hljs-number">30</span> &amp;&amp; emp.getDepartment().equals(<span class="hljs-string">"IT"</span>)) {
        filteredNames.add(emp.getName());
    }
}
Collections.sort(filteredNames);
</code></pre>
<p>ä½¿ç”¨Stream APIåï¼ŒåŒæ ·çš„é€»è¾‘å¯ä»¥è¿™æ ·è¡¨è¾¾ï¼š</p>
<pre><code class="hljs language-java" lang="java">List&lt;String&gt; filteredNames = employees.stream()
    .filter(emp -&gt; emp.getAge() &gt; <span class="hljs-number">30</span>)
    .filter(emp -&gt; <span class="hljs-string">"IT"</span>.equals(emp.getDepartment()))
    .map(Employee::getName)
    .sorted()
    .collect(Collectors.toList());
</code></pre>
<h3 data-id="heading-2">Stream APIçš„æ ¸å¿ƒä¼˜åŠ¿</h3>
<h4 data-id="heading-3">1. ä»£ç å¯è¯»æ€§å¤§å¹…æå‡</h4>
<p>Streamçš„æ“ä½œé“¾å¼è°ƒç”¨è®©æ•°æ®å¤„ç†æµç¨‹ä¸€ç›®äº†ç„¶ï¼Œæ¯ä¸ªæ“ä½œéƒ½æœ‰æ˜ç¡®çš„ç›®çš„ï¼Œå‡å°‘äº†ä¸­é—´å˜é‡å’Œå¾ªç¯åµŒå¥—ã€‚</p>
<h4 data-id="heading-4">2. æ˜“äºå¹¶è¡ŒåŒ–</h4>
<p>åªéœ€å°†<code>.stream()</code>æ”¹ä¸º<code>.parallelStream()</code>ï¼Œå°±èƒ½åˆ©ç”¨å¤šæ ¸å¤„ç†å™¨çš„ä¼˜åŠ¿ï¼š</p>
<pre><code class="hljs language-java" lang="java">List&lt;String&gt; result = employees.parallelStream()
    .filter(emp -&gt; emp.getSalary() &gt; <span class="hljs-number">50000</span>)
    .map(Employee::getName)
    .collect(Collectors.toList());
</code></pre>
<h4 data-id="heading-5">3. å»¶è¿Ÿæ‰§è¡Œæé«˜æ€§èƒ½</h4>
<p>Streamçš„æ“ä½œåˆ†ä¸ºä¸­é—´æ“ä½œå’Œç»ˆæ­¢æ“ä½œã€‚ä¸­é—´æ“ä½œï¼ˆå¦‚filterã€mapï¼‰æ˜¯æƒ°æ€§çš„ï¼Œåªæœ‰åœ¨é‡åˆ°ç»ˆæ­¢æ“ä½œï¼ˆå¦‚collectã€forEachï¼‰æ—¶æ‰ä¼šçœŸæ­£æ‰§è¡Œï¼Œè¿™å…è®¸è¿›è¡Œæ€§èƒ½ä¼˜åŒ–ã€‚</p>
<h3 data-id="heading-6">å®ç”¨æŠ€å·§ä¸æœ€ä½³å®è·µ</h3>
<h4 data-id="heading-7">ä½¿ç”¨Collectorsè¿›è¡Œå¤æ‚æ”¶é›†</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æŒ‰éƒ¨é—¨åˆ†ç»„</span>
Map&lt;String, List&lt;Employee&gt;&gt; byDept = employees.stream()
    .collect(Collectors.groupingBy(Employee::getDepartment));

<span class="hljs-comment">// ç»Ÿè®¡æ¯ä¸ªéƒ¨é—¨çš„å¹³å‡å·¥èµ„</span>
Map&lt;String, Double&gt; avgSalaryByDept = employees.stream()
    .collect(Collectors.groupingBy(
        Employee::getDepartment,
        Collectors.averagingDouble(Employee::getSalary)
    ));
</code></pre>
<h4 data-id="heading-8">é¿å…å‰¯ä½œç”¨</h4>
<p>ä¿æŒStreamæ“ä½œçš„çº¯ç²¹æ€§ï¼Œé¿å…åœ¨ä¸­é—´æ“ä½œä¸­ä¿®æ”¹å¤–éƒ¨çŠ¶æ€ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä¸æ¨èï¼šæœ‰å‰¯ä½œç”¨</span>
List&lt;String&gt; names = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
employees.stream()
    .map(Employee::getName)
    .forEach(names::add); <span class="hljs-comment">// å‰¯ä½œç”¨ï¼</span>

<span class="hljs-comment">// æ¨èï¼šæ— å‰¯ä½œç”¨</span>
List&lt;String&gt; names = employees.stream()
    .map(Employee::getName)
    .collect(Collectors.toList());
</code></pre>
<h3 data-id="heading-9">æ€§èƒ½è€ƒé‡</h3>
<p>è™½ç„¶Stream APIå¾ˆå¼ºå¤§ï¼Œä½†éœ€è¦æ³¨æ„ï¼š</p>
<ul>
<li>å¯¹äºå°æ•°æ®é›†ï¼Œä¼ ç»Ÿå¾ªç¯å¯èƒ½æ›´é«˜æ•ˆ</li>
<li>é¿å…åœ¨Streamä¸­æ‰§è¡Œé‡é‡çº§æ“ä½œ</li>
<li>æ³¨æ„è£…ç®±/æ‹†ç®±å¸¦æ¥çš„æ€§èƒ½å¼€é”€</li>
</ul>
<h3 data-id="heading-10">ç»“è¯­</h3>
<p>Stream APIä¸ä»…ä»…æ˜¯è¯­æ³•ç³–ï¼Œå®ƒä»£è¡¨äº†ä¸€ç§ç¼–ç¨‹èŒƒå¼çš„è½¬å˜ã€‚é€šè¿‡å°†æ•°æ®å¤„ç†çš„å…³æ³¨ç‚¹ä»"å¦‚ä½•åš"è½¬ç§»åˆ°"åšä»€ä¹ˆ"ï¼Œæˆ‘ä»¬å¯ä»¥å†™å‡ºæ›´åŠ ç®€æ´ã€è¡¨è¾¾åŠ›æ›´å¼ºçš„ä»£ç ã€‚æŒæ¡Stream APIä¸ä»…èƒ½æå‡ä»£ç è´¨é‡ï¼Œè¿˜èƒ½è®©æˆ‘ä»¬æ›´å¥½åœ°é€‚åº”ç°ä»£Javaå¼€å‘çš„è¶‹åŠ¿ã€‚</p>
<p>å¼€å§‹é‡æ„ä½ çš„ä»£ç å§ï¼Œä½“éªŒå‡½æ•°å¼ç¼–ç¨‹å¸¦æ¥çš„ç®€æ´ä¸ä¼˜é›…ï¼åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œä½ ä¼šå‘ç°è‡ªå·±è¶Šæ¥è¶Šå–œæ¬¢è¿™ç§å£°æ˜å¼çš„ç¼–ç¨‹é£æ ¼ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[openEuler å‘é‡æ•°æ®åº“ï¼šMilvus ç›¸ä¼¼åº¦æœç´¢æ€§èƒ½æµ‹è¯•]]></title>    <link>https://juejin.cn/post/7580288235029757952</link>    <guid>https://juejin.cn/post/7580288235029757952</guid>    <pubDate>2025-12-06T06:28:34.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7580288235029757952" data-draft-id="7580288235029741568" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="openEuler å‘é‡æ•°æ®åº“ï¼šMilvus ç›¸ä¼¼åº¦æœç´¢æ€§èƒ½æµ‹è¯•"/> <meta itemprop="keywords" content="æ“ä½œç³»ç»Ÿ"/> <meta itemprop="datePublished" content="2025-12-06T06:28:34.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é¦’å¤´675"/> <meta itemprop="url" content="https://juejin.cn/user/4391874911545332"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            openEuler å‘é‡æ•°æ®åº“ï¼šMilvus ç›¸ä¼¼åº¦æœç´¢æ€§èƒ½æµ‹è¯•
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4391874911545332/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é¦’å¤´675
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-06T06:28:34.000Z" title="Sat Dec 06 2025 06:28:34 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»37åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€å¼•è¨€</h2>
<p>éšç€å¤§è¯­è¨€æ¨¡å‹å’Œ RAGï¼ˆRetrieval-Augmented Generationï¼‰æŠ€æœ¯çš„å…´èµ·ï¼Œå‘é‡æ•°æ®åº“æˆä¸ºäº† AI åº”ç”¨æ¶æ„ä¸­çš„å…³é”®ç»„ä»¶ã€‚Milvus ä½œä¸ºå…¨çƒé¢†å…ˆçš„å¼€æºå‘é‡æ•°æ®åº“ï¼Œåœ¨è¯­ä¹‰æœç´¢ã€æ¨èç³»ç»Ÿã€å›¾åƒæ£€ç´¢ç­‰åœºæ™¯ä¸­å‘æŒ¥ç€é‡è¦ä½œç”¨ã€‚æœ¬æ–‡å°†åœ¨ openEuler 22.03 LTS ç³»ç»Ÿä¸Šæ·±å…¥è¯„æµ‹ Milvus çš„éƒ¨ç½²å’Œæ€§èƒ½è¡¨ç°ï¼Œä¸ºä¼ä¸šçº§ AI åº”ç”¨æä¾›å‚è€ƒã€‚</p>
<h3 data-id="heading-1">æµ‹è¯•ç›®æ ‡</h3>
<ol>
<li>
<p>è¯„ä¼° Milvus åœ¨ openEuler ä¸Šçš„å…¼å®¹æ€§å’Œç¨³å®šæ€§</p>
</li>
<li>
<p>æµ‹è¯•ä¸åŒè§„æ¨¡æ•°æ®é›†ä¸‹çš„ç´¢å¼•æ„å»ºæ€§èƒ½</p>
</li>
<li>
<p>è¯„æµ‹å„ç§ç´¢å¼•ç±»å‹çš„æŸ¥è¯¢æ€§èƒ½å’Œå¬å›ç‡</p>
</li>
<li>
<p>åˆ†æç³»ç»Ÿèµ„æºä½¿ç”¨æƒ…å†µå’Œä¼˜åŒ–ç­–ç•¥</p>
</li>
<li>
<p>æ¢ç´¢ç”Ÿäº§ç¯å¢ƒæœ€ä½³å®è·µé…ç½®</p>
</li>
</ol>
<h2 data-id="heading-2">äºŒã€æµ‹è¯•ç¯å¢ƒ</h2>
<h3 data-id="heading-3">2.1 ç¡¬ä»¶é…ç½®</h3>
<p>æœåŠ¡å™¨é…ç½®:</p>
<p>CPU: (16æ ¸32çº¿ç¨‹)</p>
<p>å†…å­˜: 32GB</p>
<p>å­˜å‚¨:</p>
<ul>
<li>ç³»ç»Ÿç›˜: 100GB NVMe SSD</li>
</ul>
<h3 data-id="heading-4">2.2 è½¯ä»¶ç¯å¢ƒ</h3>
<p>æ“ä½œç³»ç»Ÿ: openEuler 22.03 LTS</p>
<p>å†…æ ¸ç‰ˆæœ¬: 5.10.0-60.18.0.50.oe2203.x86_64</p>
<p>Dockerç‰ˆæœ¬: 20.10.21</p>
<p>Docker Composeç‰ˆæœ¬: 2.20.2</p>
<p>Pythonç‰ˆæœ¬: 3.9.9</p>
<h3 data-id="heading-5">2.3 Milvus ç‰ˆæœ¬</h3>
<p>Milvusç‰ˆæœ¬: 2.4.0</p>
<p>éƒ¨ç½²æ–¹å¼: Docker Compose (Standalone)</p>
<p>ä¾èµ–ç»„ä»¶:</p>
<ul>
<li>
<p>etcd: 3.5.5</p>
</li>
<li>
<p>MinIO: RELEASE.2023-03-20T20-16-18Z</p>
</li>
</ul>
<h2 data-id="heading-6">ä¸‰ã€Milvus éƒ¨ç½²</h2>
<h3 data-id="heading-7">3.1 ç³»ç»Ÿå‡†å¤‡</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. æ›´æ–°ç³»ç»Ÿ</span>
sudo dnf update -y

<span class="hljs-comment"># 2. å®‰è£…å¿…è¦å·¥å…·</span>
sudo dnf install -y git wget curl htop iotop sysstat

<span class="hljs-comment"># 3. é…ç½®ç³»ç»Ÿå‚æ•°</span>
sudo <span class="hljs-built_in">tee</span> -a /etc/sysctl.conf &lt;&lt;<span class="hljs-string">EOF
# Milvus ä¼˜åŒ–å‚æ•°
vm.max_map_count=262144
vm.swappiness=1
net.core.somaxconn=65535
net.ipv4.tcp_max_syn_backlog=65535
EOF</span>

sudo sysctl -p

<span class="hljs-comment"># 4. å®‰è£… Docker</span>
sudo dnf install -y docker-ce docker-ce-cli containerd.io
sudo systemctl <span class="hljs-built_in">enable</span> --now docker

<span class="hljs-comment"># 5. å®‰è£… Docker Compose</span>
sudo curl -L <span class="hljs-string">"https://github.com/docker/compose/releases/download/v2.20.2/docker-compose-<span class="hljs-subst">$(uname -s)</span>-<span class="hljs-subst">$(uname -m)</span>"</span> -o /usr/local/bin/docker-compose
sudo <span class="hljs-built_in">chmod</span> +x /usr/local/bin/docker-compose
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f85156e600084504b45fb434b92fa611~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aaS5aS0Njc1:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765607314&amp;x-signature=7Uk%2Bn1LIK66JY5dKdxny55xpS74%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-8">3.2 éƒ¨ç½² Milvus</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. ä¸‹è½½éƒ¨ç½²æ–‡ä»¶</span>
<span class="hljs-built_in">mkdir</span> -p ~/milvus &amp;&amp; <span class="hljs-built_in">cd</span> ~/milvus
wget https://github.com/milvus-io/milvus/releases/download/v2.4.0/milvus-standalone-docker-compose.yml -O docker-compose.yml
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f580c2837b7842c3b81c2cb7f3bd5ff4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aaS5aS0Njc1:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765607314&amp;x-signature=ZoJVwaH1hP3Ib9mfHwNkQBSx0Lo%3D" alt="" loading="lazy"/></p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># 2. åˆ›å»ºæ•°æ®ç›®å½•</span>
<span class="hljs-string">mkdir</span> <span class="hljs-string">-p</span> <span class="hljs-string">volumes/etcd</span> <span class="hljs-string">volumes/minio</span> <span class="hljs-string">volumes/milvus</span>

<span class="hljs-comment"># 3. ä¿®æ”¹é…ç½®æ–‡ä»¶</span>
<span class="hljs-string">cat</span> <span class="hljs-string">&gt;</span> <span class="hljs-string">milvus.yaml</span> <span class="hljs-string">&lt;&lt;EOF</span>
<span class="hljs-comment"># Milvus é…ç½®æ–‡ä»¶</span>
<span class="hljs-attr">etcd:</span>
  <span class="hljs-attr">endpoints:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">localhost:2379</span>
  <span class="hljs-attr">rootPath:</span> <span class="hljs-string">by-dev</span>
  <span class="hljs-attr">metaSubPath:</span> <span class="hljs-string">meta</span>
  <span class="hljs-attr">kvSubPath:</span> <span class="hljs-string">kv</span>

<span class="hljs-attr">minio:</span>
  <span class="hljs-attr">address:</span> <span class="hljs-string">localhost</span>
  <span class="hljs-attr">port:</span> <span class="hljs-number">9000</span>
  <span class="hljs-attr">accessKeyID:</span> <span class="hljs-string">minioadmin</span>
  <span class="hljs-attr">secretAccessKey:</span> <span class="hljs-string">minioadmin</span>
  <span class="hljs-attr">useSSL:</span> <span class="hljs-literal">false</span>
  <span class="hljs-attr">bucketName:</span> <span class="hljs-string">milvus-bucket</span>
  <span class="hljs-attr">rootPath:</span> <span class="hljs-string">file</span>

<span class="hljs-attr">common:</span>
  <span class="hljs-attr">defaultPartitionName:</span> <span class="hljs-string">_default</span>
  <span class="hljs-attr">defaultIndexName:</span> <span class="hljs-string">_default_idx</span>
  <span class="hljs-attr">entityExpiration:</span> <span class="hljs-number">-1</span>
  <span class="hljs-attr">indexSliceSize:</span> <span class="hljs-number">16</span>
  <span class="hljs-attr">threadCoreCoefficient:</span> <span class="hljs-number">10</span>

<span class="hljs-attr">dataNode:</span>
  <span class="hljs-attr">dataNode:</span>
    <span class="hljs-attr">flowGraph:</span>
      <span class="hljs-attr">maxQueueLength:</span> <span class="hljs-number">1024</span>
      <span class="hljs-attr">maxParallelism:</span> <span class="hljs-number">1024</span>
    <span class="hljs-attr">segment:</span>
      <span class="hljs-attr">insertBufSize:</span> <span class="hljs-number">16777216</span>
      
<span class="hljs-attr">queryNode:</span>
  <span class="hljs-attr">queryNode:</span>
    <span class="hljs-attr">segcore:</span>
      <span class="hljs-attr">chunkRows:</span> <span class="hljs-number">1024</span>
      
<span class="hljs-attr">indexNode:</span>
  <span class="hljs-attr">indexNode:</span>
    <span class="hljs-attr">scheduler:</span>
      <span class="hljs-attr">buildParallel:</span> <span class="hljs-number">8</span>
<span class="hljs-string">EOF</span>

<span class="hljs-comment"># 4. å¯åŠ¨ Milvus</span>
<span class="hljs-string">docker-compose</span> <span class="hljs-string">up</span> <span class="hljs-string">-d</span>

<span class="hljs-comment"># 5. æ£€æŸ¥æœåŠ¡çŠ¶æ€</span>
<span class="hljs-string">docker-compose</span> <span class="hljs-string">ps</span>
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d8a65eb86cf742d9aa335250a9cc19ee~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aaS5aS0Njc1:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765607314&amp;x-signature=AxcA%2BBWNIgA0QNNZXSOJ8eDPH%2Fk%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-9">3.3 å®‰è£… Python å®¢æˆ·ç«¯</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ</span>
python3 -m venv milvus-env
<span class="hljs-built_in">source</span> milvus-env/bin/activate

<span class="hljs-comment"># å®‰è£…ä¾èµ–</span>
pip install pymilvus==2.4.0 numpy pandas matplotlib seaborn tqdm scikit-learn
</code></pre>
<h2 data-id="heading-10">å››ã€æµ‹è¯•æ•°æ®å‡†å¤‡</h2>
<h3 data-id="heading-11">4.1 æµ‹è¯•æ•°æ®ç”ŸæˆåŸç†</h3>
<p>å‘é‡æ•°æ®åº“çš„æ€§èƒ½æµ‹è¯•éœ€è¦æ¨¡æ‹ŸçœŸå®åœºæ™¯çš„å‘é‡æ•°æ®ã€‚åœ¨å®é™…åº”ç”¨ä¸­ï¼Œè¿™äº›å‘é‡é€šå¸¸æ¥è‡ªï¼š</p>
<ul>
<li>æ–‡æœ¬åµŒå…¥ï¼ˆBERTã€GPTç­‰æ¨¡å‹è¾“å‡ºï¼‰</li>
<li>å›¾åƒç‰¹å¾ï¼ˆResNetã€CLIPç­‰æ¨¡å‹æå–ï¼‰</li>
<li>éŸ³é¢‘ç‰¹å¾ï¼ˆWav2Vecç­‰æ¨¡å‹ï¼‰</li>
</ul>
<p>æˆ‘ä»¬çš„æµ‹è¯•æ•°æ®ç”Ÿæˆç­–ç•¥ï¼š</p>
<ol>
<li><strong>å‘é‡å½’ä¸€åŒ–</strong>ï¼šæ¨¡æ‹ŸçœŸå®åµŒå…¥æ¨¡å‹çš„è¾“å‡ºç‰¹æ€§</li>
<li><strong>å¤šç»´åº¦æµ‹è¯•</strong>ï¼šè¦†ç›–å¸¸è§çš„å‘é‡ç»´åº¦ï¼ˆ128/512/768/1024ï¼‰</li>
<li><strong>å¤šè§„æ¨¡æµ‹è¯•</strong>ï¼šä»10ä¸‡åˆ°1000ä¸‡å‘é‡ï¼Œæµ‹è¯•ç³»ç»Ÿæ‰©å±•æ€§</li>
<li><strong>å…ƒæ•°æ®æ¨¡æ‹Ÿ</strong>ï¼šæ·»åŠ ç±»åˆ«å’Œæ—¶é—´æˆ³å­—æ®µï¼Œæ¨¡æ‹Ÿå®é™…ä¸šåŠ¡éœ€æ±‚</li>
</ol>
<h3 data-id="heading-12">4.2 åˆ›å»ºæ•°æ®ç”Ÿæˆè„šæœ¬</h3>
<p><strong>æ­¥éª¤1ï¼šåˆ›å»ºå·¥ä½œç›®å½•å’Œè„šæœ¬æ–‡ä»¶</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># åˆ›å»ºæµ‹è¯•ç›®å½•</span>
mkdir -p ~/milvus-test
cd ~/milvus-test

<span class="hljs-comment"># æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ</span>
source ~/milvus-env/<span class="hljs-built_in">bin</span>/activate

<span class="hljs-comment"># åˆ›å»ºæ•°æ®ç”Ÿæˆè„šæœ¬</span>
cat &gt; generate_test_data.py &lt;&lt; <span class="hljs-string">'EOF'</span>
<span class="hljs-comment">#!/usr/bin/env python3</span>
<span class="hljs-string">"""
Milvus æµ‹è¯•æ•°æ®ç”Ÿæˆè„šæœ¬
åŠŸèƒ½ï¼šç”Ÿæˆä¸åŒç»´åº¦å’Œè§„æ¨¡çš„å‘é‡æ•°æ®ç”¨äºæ€§èƒ½æµ‹è¯•
"""</span>

<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
<span class="hljs-keyword">import</span> time
<span class="hljs-keyword">from</span> pymilvus <span class="hljs-keyword">import</span> (
    connections, 
    Collection, 
    FieldSchema, 
    CollectionSchema, 
    DataType, 
    utility
)
<span class="hljs-keyword">import</span> logging

<span class="hljs-comment"># é…ç½®æ—¥å¿—</span>
logging.basicConfig(
    level=logging.INFO,
    <span class="hljs-built_in">format</span>=<span class="hljs-string">'%(asctime)s - %(levelname)s - %(message)s'</span>
)
logger = logging.getLogger(__name__)

<span class="hljs-keyword">class</span> <span class="hljs-title class_">MilvusDataGenerator</span>:
    <span class="hljs-string">"""Milvus æµ‹è¯•æ•°æ®ç”Ÿæˆå™¨"""</span>
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, host=<span class="hljs-string">"localhost"</span>, port=<span class="hljs-string">"19530"</span></span>):
        <span class="hljs-string">"""
        åˆå§‹åŒ–è¿æ¥
        
        å‚æ•°:
            host: Milvus æœåŠ¡å™¨åœ°å€
            port: Milvus æœåŠ¡ç«¯å£
        """</span>
        self.host = host
        self.port = port
        self.connect()
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">connect</span>(<span class="hljs-params">self</span>):
        <span class="hljs-string">"""è¿æ¥åˆ° Milvus æœåŠ¡å™¨"""</span>
        <span class="hljs-keyword">try</span>:
            connections.connect(
                alias=<span class="hljs-string">"default"</span>,
                host=self.host,
                port=self.port
            )
            logger.info(<span class="hljs-string">f"æˆåŠŸè¿æ¥åˆ° Milvus: <span class="hljs-subst">{self.host}</span>:<span class="hljs-subst">{self.port}</span>"</span>)
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            logger.error(<span class="hljs-string">f"è¿æ¥å¤±è´¥: <span class="hljs-subst">{e}</span>"</span>)
            <span class="hljs-keyword">raise</span>
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">create_collection</span>(<span class="hljs-params">self, collection_name, dim</span>):
        <span class="hljs-string">"""
        åˆ›å»ºæµ‹è¯•é›†åˆ
        
        å‚æ•°:
            collection_name: é›†åˆåç§°
            dim: å‘é‡ç»´åº¦
        
        è¿”å›:
            Collection å¯¹è±¡
        
        è¯´æ˜:
            - id: ä¸»é”®ï¼Œè‡ªåŠ¨ç”Ÿæˆ
            - embeddings: å‘é‡å­—æ®µï¼Œæ ¸å¿ƒæ•°æ®
            - category: ç±»åˆ«å­—æ®µï¼Œæ¨¡æ‹Ÿä¸šåŠ¡åˆ†ç±»ï¼ˆ0-99ï¼‰
            - timestamp: æ—¶é—´æˆ³å­—æ®µï¼Œæ¨¡æ‹Ÿæ•°æ®æ—¶é—´å±æ€§
        """</span>
        <span class="hljs-comment"># æ£€æŸ¥é›†åˆæ˜¯å¦å­˜åœ¨ï¼Œå­˜åœ¨åˆ™åˆ é™¤</span>
        <span class="hljs-keyword">if</span> utility.has_collection(collection_name):
            logger.info(<span class="hljs-string">f"é›†åˆ <span class="hljs-subst">{collection_name}</span> å·²å­˜åœ¨ï¼Œåˆ é™¤ä¸­..."</span>)
            utility.drop_collection(collection_name)
        
        <span class="hljs-comment"># å®šä¹‰å­—æ®µ Schema</span>
        fields = [
            FieldSchema(
                name=<span class="hljs-string">"id"</span>, 
                dtype=DataType.INT64, 
                is_primary=<span class="hljs-literal">True</span>, 
                auto_id=<span class="hljs-literal">True</span>,
                description=<span class="hljs-string">"ä¸»é”®IDï¼Œè‡ªåŠ¨ç”Ÿæˆ"</span>
            ),
            FieldSchema(
                name=<span class="hljs-string">"embeddings"</span>, 
                dtype=DataType.FLOAT_VECTOR, 
                dim=dim,
                description=<span class="hljs-string">f"<span class="hljs-subst">{dim}</span>ç»´å‘é‡æ•°æ®"</span>
            ),
            FieldSchema(
                name=<span class="hljs-string">"category"</span>, 
                dtype=DataType.INT64,
                description=<span class="hljs-string">"æ•°æ®ç±»åˆ«ï¼ŒèŒƒå›´0-99"</span>
            ),
            FieldSchema(
                name=<span class="hljs-string">"timestamp"</span>, 
                dtype=DataType.INT64,
                description=<span class="hljs-string">"Unixæ—¶é—´æˆ³"</span>
            )
        ]
        
        <span class="hljs-comment"># åˆ›å»ºé›†åˆ Schema</span>
        schema = CollectionSchema(
            fields=fields,
            description=<span class="hljs-string">f"æµ‹è¯•é›†åˆ: <span class="hljs-subst">{dim}</span>ç»´å‘é‡"</span>
        )
        
        <span class="hljs-comment"># åˆ›å»ºé›†åˆ</span>
        collection = Collection(
            name=collection_name,
            schema=schema
        )
        
        logger.info(<span class="hljs-string">f"æˆåŠŸåˆ›å»ºé›†åˆ: <span class="hljs-subst">{collection_name}</span>"</span>)
        <span class="hljs-keyword">return</span> collection
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">generate_vectors</span>(<span class="hljs-params">self, num_vectors, dim</span>):
        <span class="hljs-string">"""
        ç”Ÿæˆå½’ä¸€åŒ–çš„éšæœºå‘é‡
        
        å‚æ•°:
            num_vectors: å‘é‡æ•°é‡
            dim: å‘é‡ç»´åº¦
        
        è¿”å›:
            vectors: å½’ä¸€åŒ–å‘é‡æ•°ç»„
            categories: ç±»åˆ«æ•°ç»„
            timestamps: æ—¶é—´æˆ³æ•°ç»„
        
        è¯´æ˜:
            1. ä½¿ç”¨æ­£æ€åˆ†å¸ƒç”Ÿæˆéšæœºå‘é‡
            2. è¿›è¡ŒL2å½’ä¸€åŒ–ï¼Œä½¿å‘é‡æ¨¡é•¿ä¸º1
            3. è¿™ç§æ–¹å¼æ¨¡æ‹ŸçœŸå®åµŒå…¥æ¨¡å‹çš„è¾“å‡ºç‰¹æ€§
        """</span>
        logger.info(<span class="hljs-string">f"ç”Ÿæˆ <span class="hljs-subst">{num_vectors:,}</span> ä¸ª <span class="hljs-subst">{dim}</span> ç»´å‘é‡..."</span>)
        
        <span class="hljs-comment"># ç”Ÿæˆæ­£æ€åˆ†å¸ƒçš„éšæœºå‘é‡</span>
        vectors = np.random.randn(num_vectors, dim).astype(np.float32)
        
        <span class="hljs-comment"># L2 å½’ä¸€åŒ–ï¼šä½¿æ¯ä¸ªå‘é‡çš„æ¨¡é•¿ä¸º1</span>
        <span class="hljs-comment"># å…¬å¼: v_normalized = v / ||v||</span>
        norms = np.linalg.norm(vectors, axis=<span class="hljs-number">1</span>, keepdims=<span class="hljs-literal">True</span>)
        vectors = vectors / (norms + <span class="hljs-number">1e-10</span>)  <span class="hljs-comment"># åŠ å°å€¼é˜²æ­¢é™¤é›¶</span>
        
        <span class="hljs-comment"># ç”Ÿæˆå…ƒæ•°æ®</span>
        categories = np.random.randint(<span class="hljs-number">0</span>, <span class="hljs-number">100</span>, num_vectors)
        timestamps = np.random.randint(<span class="hljs-number">1600000000</span>, <span class="hljs-number">1700000000</span>, num_vectors)
        
        logger.info(<span class="hljs-string">"å‘é‡ç”Ÿæˆå®Œæˆ"</span>)
        <span class="hljs-keyword">return</span> vectors, categories, timestamps
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">insert_data</span>(<span class="hljs-params">self, collection, vectors, categories, timestamps, batch_size=<span class="hljs-number">10000</span></span>):
        <span class="hljs-string">"""
        æ‰¹é‡æ’å…¥æ•°æ®åˆ°é›†åˆ
        
        å‚æ•°:
            collection: Collection å¯¹è±¡
            vectors: å‘é‡æ•°ç»„
            categories: ç±»åˆ«æ•°ç»„
            timestamps: æ—¶é—´æˆ³æ•°ç»„
            batch_size: æ‰¹æ¬¡å¤§å°
        
        è¿”å›:
            insert_times: æ¯æ‰¹æ¬¡çš„æ’å…¥æ—¶é—´åˆ—è¡¨
        
        è¯´æ˜:
            1. åˆ†æ‰¹æ’å…¥å¯ä»¥é¿å…å•æ¬¡æ’å…¥æ•°æ®è¿‡å¤§å¯¼è‡´çš„å†…å­˜é—®é¢˜
            2. è®°å½•æ¯æ‰¹æ¬¡çš„æ’å…¥æ—¶é—´ï¼Œç”¨äºæ€§èƒ½åˆ†æ
            3. æœ€åè°ƒç”¨ flush() ç¡®ä¿æ•°æ®æŒä¹…åŒ–
        """</span>
        num_vectors = <span class="hljs-built_in">len</span>(vectors)
        insert_times = []
        total_inserted = <span class="hljs-number">0</span>
        
        logger.info(<span class="hljs-string">f"å¼€å§‹æ’å…¥æ•°æ®ï¼Œæ€»é‡: <span class="hljs-subst">{num_vectors:,}</span>ï¼Œæ‰¹æ¬¡å¤§å°: <span class="hljs-subst">{batch_size:,}</span>"</span>)
        
        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>, num_vectors, batch_size):
            <span class="hljs-comment"># è®¡ç®—å½“å‰æ‰¹æ¬¡çš„ç»“æŸç´¢å¼•</span>
            end_idx = <span class="hljs-built_in">min</span>(i + batch_size, num_vectors)
            
            <span class="hljs-comment"># å‡†å¤‡å½“å‰æ‰¹æ¬¡çš„æ•°æ®</span>
            batch_vectors = vectors[i:end_idx].tolist()
            batch_categories = categories[i:end_idx].tolist()
            batch_timestamps = timestamps[i:end_idx].tolist()
            
            <span class="hljs-comment"># ç»„ç»‡æ•°æ®æ ¼å¼ï¼ˆæŒ‰å­—æ®µé¡ºåºï¼‰</span>
            data = [
                batch_vectors,      <span class="hljs-comment"># embeddings å­—æ®µ</span>
                batch_categories,   <span class="hljs-comment"># category å­—æ®µ</span>
                batch_timestamps    <span class="hljs-comment"># timestamp å­—æ®µ</span>
            ]
            
            <span class="hljs-comment"># æ‰§è¡Œæ’å…¥å¹¶è®¡æ—¶</span>
            start_time = time.time()
            <span class="hljs-keyword">try</span>:
                collection.insert(data)
                insert_time = time.time() - start_time
                insert_times.append(insert_time)
                
                total_inserted += (end_idx - i)
                
                <span class="hljs-comment"># æ¯æ’å…¥10ä¸‡æ¡è®°å½•è¾“å‡ºä¸€æ¬¡è¿›åº¦</span>
                <span class="hljs-keyword">if</span> total_inserted % <span class="hljs-number">100000</span> == <span class="hljs-number">0</span>:
                    avg_time = np.mean(insert_times[-<span class="hljs-number">10</span>:])  <span class="hljs-comment"># æœ€è¿‘10æ‰¹çš„å¹³å‡æ—¶é—´</span>
                    throughput = batch_size / avg_time
                    logger.info(
                        <span class="hljs-string">f"å·²æ’å…¥: <span class="hljs-subst">{total_inserted:,}</span>/<span class="hljs-subst">{num_vectors:,}</span> "</span>
                        <span class="hljs-string">f"(<span class="hljs-subst">{total_inserted/num_vectors*<span class="hljs-number">100</span>:<span class="hljs-number">.1</span>f}</span>%), "</span>
                        <span class="hljs-string">f"æœ€è¿‘æ‰¹æ¬¡: <span class="hljs-subst">{insert_time:<span class="hljs-number">.3</span>f}</span>s, "</span>
                        <span class="hljs-string">f"ååé‡: <span class="hljs-subst">{throughput:<span class="hljs-number">.0</span>f}</span> vectors/s"</span>
                    )
            <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
                logger.error(<span class="hljs-string">f"æ’å…¥å¤±è´¥ (æ‰¹æ¬¡ <span class="hljs-subst">{i}</span>-<span class="hljs-subst">{end_idx}</span>): <span class="hljs-subst">{e}</span>"</span>)
                <span class="hljs-keyword">raise</span>
        
        <span class="hljs-comment"># åˆ·æ–°æ•°æ®åˆ°ç£ç›˜</span>
        logger.info(<span class="hljs-string">"åˆ·æ–°æ•°æ®åˆ°ç£ç›˜..."</span>)
        collection.flush()
        logger.info(<span class="hljs-string">f"æ•°æ®æ’å…¥å®Œæˆï¼Œæ€»è®¡: <span class="hljs-subst">{total_inserted:,}</span> æ¡"</span>)
        
        <span class="hljs-keyword">return</span> insert_times
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">run_test</span>(<span class="hljs-params">self, dimensions, scales</span>):
        <span class="hljs-string">"""
        è¿è¡Œå®Œæ•´çš„æ•°æ®ç”Ÿæˆæµ‹è¯•
        
        å‚æ•°:
            dimensions: ç»´åº¦åˆ—è¡¨
            scales: è§„æ¨¡åˆ—è¡¨
        
        è¿”å›:
            test_results: æµ‹è¯•ç»“æœå­—å…¸
        """</span>
        test_results = {}
        
        <span class="hljs-keyword">for</span> dim <span class="hljs-keyword">in</span> dimensions:
            <span class="hljs-keyword">for</span> scale <span class="hljs-keyword">in</span> scales:
                collection_name = <span class="hljs-string">f"test_dim<span class="hljs-subst">{dim}</span>_scale<span class="hljs-subst">{scale}</span>"</span>
                
                logger.info(<span class="hljs-string">"="</span>*<span class="hljs-number">70</span>)
                logger.info(<span class="hljs-string">f"æµ‹è¯•é…ç½®: <span class="hljs-subst">{collection_name}</span>"</span>)
                logger.info(<span class="hljs-string">f"ç»´åº¦: <span class="hljs-subst">{dim}</span>, è§„æ¨¡: <span class="hljs-subst">{scale:,}</span>"</span>)
                logger.info(<span class="hljs-string">"="</span>*<span class="hljs-number">70</span>)
                
                <span class="hljs-keyword">try</span>:
                    <span class="hljs-comment"># åˆ›å»ºé›†åˆ</span>
                    collection = self.create_collection(collection_name, dim)
                    
                    <span class="hljs-comment"># ç”Ÿæˆæ•°æ®</span>
                    gen_start = time.time()
                    vectors, categories, timestamps = self.generate_vectors(scale, dim)
                    gen_time = time.time() - gen_start
                    
                    <span class="hljs-comment"># æ’å…¥æ•°æ®</span>
                    insert_start = time.time()
                    insert_times = self.insert_data(
                        collection, vectors, categories, timestamps
                    )
                    total_insert_time = time.time() - insert_start
                    
                    <span class="hljs-comment"># è®¡ç®—ç»Ÿè®¡ä¿¡æ¯</span>
                    result = {
                        <span class="hljs-string">'dimension'</span>: dim,
                        <span class="hljs-string">'scale'</span>: scale,
                        <span class="hljs-string">'generation_time'</span>: gen_time,
                        <span class="hljs-string">'insert_time'</span>: total_insert_time,
                        <span class="hljs-string">'insert_throughput'</span>: scale / total_insert_time,
                        <span class="hljs-string">'avg_batch_time'</span>: np.mean(insert_times),
                        <span class="hljs-string">'min_batch_time'</span>: np.<span class="hljs-built_in">min</span>(insert_times),
                        <span class="hljs-string">'max_batch_time'</span>: np.<span class="hljs-built_in">max</span>(insert_times),
                        <span class="hljs-string">'num_entities'</span>: collection.num_entities
                    }
                    
                    test_results[collection_name] = result
                    
                    <span class="hljs-comment"># è¾“å‡ºç»“æœ</span>
                    logger.info(<span class="hljs-string">"\næµ‹è¯•ç»“æœ:"</span>)
                    logger.info(<span class="hljs-string">f"  ç”Ÿæˆæ—¶é—´: <span class="hljs-subst">{gen_time:<span class="hljs-number">.2</span>f}</span>s"</span>)
                    logger.info(<span class="hljs-string">f"  æ’å…¥æ—¶é—´: <span class="hljs-subst">{total_insert_time:<span class="hljs-number">.2</span>f}</span>s"</span>)
                    logger.info(<span class="hljs-string">f"  æ’å…¥ååé‡: <span class="hljs-subst">{result[<span class="hljs-string">'insert_throughput'</span>]:<span class="hljs-number">.0</span>f}</span> vectors/s"</span>)
                    logger.info(<span class="hljs-string">f"  å¹³å‡æ‰¹æ¬¡æ—¶é—´: <span class="hljs-subst">{result[<span class="hljs-string">'avg_batch_time'</span>]:<span class="hljs-number">.3</span>f}</span>s"</span>)
                    logger.info(<span class="hljs-string">f"  å®ä½“æ•°é‡: <span class="hljs-subst">{result[<span class="hljs-string">'num_entities'</span>]:,}</span>"</span>)
                    
                <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
                    logger.error(<span class="hljs-string">f"æµ‹è¯•å¤±è´¥: <span class="hljs-subst">{e}</span>"</span>)
                    test_results[collection_name] = {<span class="hljs-string">'error'</span>: <span class="hljs-built_in">str</span>(e)}
        
        <span class="hljs-keyword">return</span> test_results

<span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():
    <span class="hljs-string">"""ä¸»å‡½æ•°"""</span>
    <span class="hljs-comment"># å®šä¹‰æµ‹è¯•å‚æ•°</span>
    <span class="hljs-comment"># é€‰æ‹©ä»£è¡¨æ€§çš„ç»´åº¦å’Œè§„æ¨¡è¿›è¡Œæµ‹è¯•</span>
    DIMENSIONS = [<span class="hljs-number">128</span>, <span class="hljs-number">512</span>, <span class="hljs-number">768</span>]  <span class="hljs-comment"># å¸¸è§çš„åµŒå…¥ç»´åº¦</span>
    SCALES = [<span class="hljs-number">100000</span>, <span class="hljs-number">1000000</span>]    <span class="hljs-comment"># 10ä¸‡å’Œ100ä¸‡å‘é‡</span>
    
    <span class="hljs-comment"># åˆ›å»ºæ•°æ®ç”Ÿæˆå™¨</span>
    generator = MilvusDataGenerator(host=<span class="hljs-string">"localhost"</span>, port=<span class="hljs-string">"19530"</span>)
    
    <span class="hljs-comment"># è¿è¡Œæµ‹è¯•</span>
    logger.info(<span class="hljs-string">"å¼€å§‹ Milvus æ•°æ®ç”Ÿæˆæµ‹è¯•"</span>)
    logger.info(<span class="hljs-string">f"æµ‹è¯•ç»´åº¦: <span class="hljs-subst">{DIMENSIONS}</span>"</span>)
    logger.info(<span class="hljs-string">f"æµ‹è¯•è§„æ¨¡: <span class="hljs-subst">{SCALES}</span>"</span>)
    
    results = generator.run_test(DIMENSIONS, SCALES)
    
    <span class="hljs-comment"># ä¿å­˜ç»“æœ</span>
    <span class="hljs-keyword">import</span> json
    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">'data_generation_results.json'</span>, <span class="hljs-string">'w'</span>) <span class="hljs-keyword">as</span> f:
        <span class="hljs-comment"># è½¬æ¢ numpy ç±»å‹ä¸º Python åŸç”Ÿç±»å‹</span>
        json_results = {}
        <span class="hljs-keyword">for</span> k, v <span class="hljs-keyword">in</span> results.items():
            json_results[k] = {
                key: <span class="hljs-built_in">float</span>(val) <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(val, (np.floating, np.integer)) <span class="hljs-keyword">else</span> val
                <span class="hljs-keyword">for</span> key, val <span class="hljs-keyword">in</span> v.items()
            }
        json.dump(json_results, f, indent=<span class="hljs-number">2</span>)
    
    logger.info(<span class="hljs-string">"\næµ‹è¯•å®Œæˆï¼ç»“æœå·²ä¿å­˜åˆ° data_generation_results.json"</span>)

<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    main()
EOF

<span class="hljs-comment"># èµ‹äºˆæ‰§è¡Œæƒé™</span>
chmod +x generate_test_data.py
</code></pre>
<p><strong>æ­¥éª¤2ï¼šæ‰§è¡Œæ•°æ®ç”Ÿæˆè„šæœ¬</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ‰§è¡Œæ•°æ®ç”Ÿæˆè„šæœ¬</span>
python generate_test_data.py

<span class="hljs-comment"># è„šæœ¬æ‰§è¡Œè¿‡ç¨‹ä¸­ä¼šè¾“å‡ºè¯¦ç»†çš„è¿›åº¦ä¿¡æ¯</span>
<span class="hljs-comment"># é¢„è®¡è€—æ—¶ï¼šæ ¹æ®æ•°æ®è§„æ¨¡ï¼Œä»å‡ åˆ†é’Ÿåˆ°å‡ ååˆ†é’Ÿä¸ç­‰</span>
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/118bf5ea3236462fb67c8f13bb25f1f2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aaS5aS0Njc1:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765607314&amp;x-signature=x%2BAK7OmjguB0QWK7t3D2h%2B1poyA%3D" alt="" loading="lazy"/></p>
<p>æµ‹è¯•ç»“æœå¦‚ä¸‹:</p>
<pre><code class="hljs language-yaml" lang="yaml">{
  <span class="hljs-attr">"test_dim128_scale100000":</span> {
    <span class="hljs-attr">"dimension":</span> <span class="hljs-number">128</span>,
    <span class="hljs-attr">"scale":</span> <span class="hljs-number">100000</span>,
    <span class="hljs-attr">"generation_time":</span> <span class="hljs-number">0.37700557708740234</span>,
    <span class="hljs-attr">"insert_time":</span> <span class="hljs-number">4.405413627624512</span>,
    <span class="hljs-attr">"insert_throughput":</span> <span class="hljs-number">22699.344137163807</span>,
    <span class="hljs-attr">"avg_batch_time":</span> <span class="hljs-number">0.1050985336303711</span>,
    <span class="hljs-attr">"min_batch_time":</span> <span class="hljs-number">0.09992504119873047</span>,
    <span class="hljs-attr">"max_batch_time":</span> <span class="hljs-number">0.12302184104919434</span>,
    <span class="hljs-attr">"num_entities":</span> <span class="hljs-number">100000</span>
  },
  <span class="hljs-attr">"test_dim128_scale1000000":</span> {
    <span class="hljs-attr">"dimension":</span> <span class="hljs-number">128</span>,
    <span class="hljs-attr">"scale":</span> <span class="hljs-number">1000000</span>,
    <span class="hljs-attr">"generation_time":</span> <span class="hljs-number">3.791200637817383</span>,
    <span class="hljs-attr">"insert_time":</span> <span class="hljs-number">22.409809589385986</span>,
    <span class="hljs-attr">"insert_throughput":</span> <span class="hljs-number">44623.31533926252</span>,
    <span class="hljs-attr">"avg_batch_time":</span> <span class="hljs-number">0.11644847393035888</span>,
    <span class="hljs-attr">"min_batch_time":</span> <span class="hljs-number">0.10037589073181152</span>,
    <span class="hljs-attr">"max_batch_time":</span> <span class="hljs-number">0.7289257049560547</span>,
    <span class="hljs-attr">"num_entities":</span> <span class="hljs-number">1000000</span>
  },
  <span class="hljs-attr">"test_dim512_scale100000":</span> {
    <span class="hljs-attr">"dimension":</span> <span class="hljs-number">512</span>,
    <span class="hljs-attr">"scale":</span> <span class="hljs-number">100000</span>,
    <span class="hljs-attr">"generation_time":</span> <span class="hljs-number">1.4937288761138916</span>,
    <span class="hljs-attr">"insert_time":</span> <span class="hljs-number">10.98026704788208</span>,
    <span class="hljs-attr">"insert_throughput":</span> <span class="hljs-number">9107.246623777553</span>,
    <span class="hljs-attr">"avg_batch_time":</span> <span class="hljs-number">0.5023059606552124</span>,
    <span class="hljs-attr">"min_batch_time":</span> <span class="hljs-number">0.39328575134277344</span>,
    <span class="hljs-attr">"max_batch_time":</span> <span class="hljs-number">1.2015230655670166</span>,
    <span class="hljs-attr">"num_entities":</span> <span class="hljs-number">100000</span>
  },
  <span class="hljs-attr">"test_dim512_scale1000000":</span> {
    <span class="hljs-attr">"dimension":</span> <span class="hljs-number">512</span>,
    <span class="hljs-attr">"scale":</span> <span class="hljs-number">1000000</span>,
    <span class="hljs-attr">"generation_time":</span> <span class="hljs-number">14.967787504196167</span>,
    <span class="hljs-attr">"insert_time":</span> <span class="hljs-number">84.0050196647644</span>,
    <span class="hljs-attr">"insert_throughput":</span> <span class="hljs-number">11904.050543534915</span>,
    <span class="hljs-attr">"avg_batch_time":</span> <span class="hljs-number">0.5082224607467651</span>,
    <span class="hljs-attr">"min_batch_time":</span> <span class="hljs-number">0.3861730098724365</span>,
    <span class="hljs-attr">"max_batch_time":</span> <span class="hljs-number">1.338334083557129</span>,
    <span class="hljs-attr">"num_entities":</span> <span class="hljs-number">1000000</span>
  },
  <span class="hljs-attr">"test_dim768_scale100000":</span> {
    <span class="hljs-attr">"dimension":</span> <span class="hljs-number">768</span>,
    <span class="hljs-attr">"scale":</span> <span class="hljs-number">100000</span>,
    <span class="hljs-attr">"generation_time":</span> <span class="hljs-number">2.2520318031311035</span>,
    <span class="hljs-attr">"insert_time":</span> <span class="hljs-number">14.904562711715698</span>,
    <span class="hljs-attr">"insert_throughput":</span> <span class="hljs-number">6709.354842151472</span>,
    <span class="hljs-attr">"avg_batch_time":</span> <span class="hljs-number">0.7356062173843384</span>,
    <span class="hljs-attr">"min_batch_time":</span> <span class="hljs-number">0.5890638828277588</span>,
    <span class="hljs-attr">"max_batch_time":</span> <span class="hljs-number">1.4532501697540283</span>,
    <span class="hljs-attr">"num_entities":</span> <span class="hljs-number">100000</span>
  },
  <span class="hljs-attr">"test_dim768_scale1000000":</span> {
    <span class="hljs-attr">"dimension":</span> <span class="hljs-number">768</span>,
    <span class="hljs-attr">"scale":</span> <span class="hljs-number">1000000</span>,
    <span class="hljs-attr">"generation_time":</span> <span class="hljs-number">22.476135969161987</span>,
    <span class="hljs-attr">"insert_time":</span> <span class="hljs-number">122.72813200950623</span>,
    <span class="hljs-attr">"insert_throughput":</span> <span class="hljs-number">8148.091098808074</span>,
    <span class="hljs-attr">"avg_batch_time":</span> <span class="hljs-number">0.7445800614356994</span>,
    <span class="hljs-attr">"min_batch_time":</span> <span class="hljs-number">0.5776526927947998</span>,
    <span class="hljs-attr">"max_batch_time":</span> <span class="hljs-number">1.5398163795471191</span>,
    <span class="hljs-attr">"num_entities":</span> <span class="hljs-number">1000000</span>
  }
}
</code></pre>






















































<table><thead><tr><th>é›†åˆåç§°</th><th>å‘é‡ç»´åº¦</th><th>æ•°æ®è§„æ¨¡</th><th>æ’å…¥ååé‡ (vectors/s)</th><th>æ€»æ’å…¥æ—¶é—´ (s)</th></tr></thead><tbody><tr><td>test_dim128_scale100000</td><td>128</td><td>100,000</td><td>22,699</td><td>4.41</td></tr><tr><td>test_dim128_scale1000000</td><td>128</td><td>1,000,000</td><td>44,623</td><td>22.41</td></tr><tr><td>test_dim512_scale100000</td><td>512</td><td>100,000</td><td>9,107</td><td>10.98</td></tr><tr><td>test_dim512_scale1000000</td><td>512</td><td>1,000,000</td><td>11,904</td><td>84.01</td></tr><tr><td>test_dim768_scale100000</td><td>768</td><td>100,000</td><td>6,709</td><td>14.9</td></tr><tr><td>test_dim768_scale1000000</td><td>768</td><td>1,000,000</td><td>8,148</td><td>122.73</td></tr></tbody></table>
<h2 data-id="heading-13">äº”ã€ç´¢å¼•æ„å»ºæ€§èƒ½æµ‹è¯•</h2>
<h3 data-id="heading-14">5.1 ç´¢å¼•ç±»å‹è¯¦è§£</h3>
<p>Milvus æ”¯æŒå¤šç§ç´¢å¼•ç±»å‹ï¼Œæ¯ç§éƒ½æœ‰ä¸åŒçš„ç‰¹ç‚¹ï¼š</p>















































<table><thead><tr><th>ç´¢å¼•ç±»å‹</th><th>åŸç†</th><th>ä¼˜åŠ¿</th><th>åŠ£åŠ¿</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>IVF_FLAT</td><td>å€’æ’æ–‡ä»¶+æš´åŠ›æœç´¢</td><td>é«˜å¬å›ç‡</td><td>å†…å­˜å ç”¨å¤§</td><td>å°è§„æ¨¡é«˜ç²¾åº¦</td></tr><tr><td>IVF_SQ8</td><td>IVF+æ ‡é‡é‡åŒ–</td><td>èŠ‚çœå†…å­˜75%</td><td>ç•¥é™ç²¾åº¦</td><td>å¤§è§„æ¨¡å‡è¡¡</td></tr><tr><td>IVF_PQ</td><td>IVF+ä¹˜ç§¯é‡åŒ–</td><td>æçœå†…å­˜</td><td>ç²¾åº¦æŸå¤±è¾ƒå¤§</td><td>è¶…å¤§è§„æ¨¡</td></tr><tr><td>HNSW</td><td>å±‚æ¬¡å¯¼èˆªå°ä¸–ç•Œå›¾</td><td>æŸ¥è¯¢å¿«é€Ÿ</td><td>æ„å»ºæ…¢ï¼Œå†…å­˜å¤§</td><td>å®æ—¶æŸ¥è¯¢</td></tr><tr><td>ANNOY</td><td>éšæœºæŠ•å½±æ£®æ—</td><td>æ„å»ºå¿«</td><td>ç²¾åº¦ä¸€èˆ¬</td><td>é™æ€æ•°æ®é›†</td></tr></tbody></table>
<h3 data-id="heading-15">5.2 åˆ›å»ºç´¢å¼•æµ‹è¯•è„šæœ¬</h3>
<pre><code class="hljs language-python" lang="python">cat &gt; test_index_building.py &lt;&lt; <span class="hljs-string">'EOF'</span>
<span class="hljs-comment">#!/usr/bin/env python3</span>
<span class="hljs-string">"""
Milvus ç´¢å¼•æ„å»ºæ€§èƒ½æµ‹è¯•
æµ‹è¯•ä¸åŒç´¢å¼•ç±»å‹çš„æ„å»ºæ—¶é—´å’Œèµ„æºæ¶ˆè€—
"""</span>

<span class="hljs-keyword">import</span> time
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
<span class="hljs-keyword">from</span> pymilvus <span class="hljs-keyword">import</span> connections, Collection, utility
<span class="hljs-keyword">import</span> logging
<span class="hljs-keyword">import</span> json
<span class="hljs-keyword">import</span> psutil
<span class="hljs-keyword">import</span> os

logging.basicConfig(
    level=logging.INFO,
    <span class="hljs-built_in">format</span>=<span class="hljs-string">'%(asctime)s - %(levelname)s - %(message)s'</span>
)
logger = logging.getLogger(__name__)

<span class="hljs-comment"># å®šä¹‰ç´¢å¼•é…ç½®</span>
INDEX_CONFIGS = {
    <span class="hljs-string">'IVF_FLAT'</span>: {
        <span class="hljs-string">'index_type'</span>: <span class="hljs-string">'IVF_FLAT'</span>,
        <span class="hljs-string">'metric_type'</span>: <span class="hljs-string">'L2'</span>,
        <span class="hljs-string">'params'</span>: {<span class="hljs-string">'nlist'</span>: <span class="hljs-number">1024</span>},
        <span class="hljs-string">'description'</span>: <span class="hljs-string">'å€’æ’æ–‡ä»¶ç´¢å¼•ï¼Œç²¾ç¡®æœç´¢ï¼Œå†…å­˜å ç”¨å¤§'</span>
    },
    <span class="hljs-string">'IVF_SQ8'</span>: {
        <span class="hljs-string">'index_type'</span>: <span class="hljs-string">'IVF_SQ8'</span>,
        <span class="hljs-string">'metric_type'</span>: <span class="hljs-string">'L2'</span>,
        <span class="hljs-string">'params'</span>: {<span class="hljs-string">'nlist'</span>: <span class="hljs-number">1024</span>},
        <span class="hljs-string">'description'</span>: <span class="hljs-string">'æ ‡é‡é‡åŒ–ç´¢å¼•ï¼ŒèŠ‚çœ75%å†…å­˜ï¼Œç•¥é™ç²¾åº¦'</span>
    },
    <span class="hljs-string">'IVF_PQ'</span>: {
        <span class="hljs-string">'index_type'</span>: <span class="hljs-string">'IVF_PQ'</span>,
        <span class="hljs-string">'metric_type'</span>: <span class="hljs-string">'L2'</span>,
        <span class="hljs-string">'params'</span>: {<span class="hljs-string">'nlist'</span>: <span class="hljs-number">1024</span>, <span class="hljs-string">'m'</span>: <span class="hljs-number">16</span>, <span class="hljs-string">'nbits'</span>: <span class="hljs-number">8</span>},
        <span class="hljs-string">'description'</span>: <span class="hljs-string">'ä¹˜ç§¯é‡åŒ–ç´¢å¼•ï¼Œæçœå†…å­˜ï¼Œç²¾åº¦æŸå¤±è¾ƒå¤§'</span>
    },
    <span class="hljs-string">'HNSW'</span>: {
        <span class="hljs-string">'index_type'</span>: <span class="hljs-string">'HNSW'</span>,
        <span class="hljs-string">'metric_type'</span>: <span class="hljs-string">'L2'</span>,
        <span class="hljs-string">'params'</span>: {<span class="hljs-string">'M'</span>: <span class="hljs-number">16</span>, <span class="hljs-string">'efConstruction'</span>: <span class="hljs-number">200</span>},
        <span class="hljs-string">'description'</span>: <span class="hljs-string">'å±‚æ¬¡å›¾ç´¢å¼•ï¼ŒæŸ¥è¯¢æå¿«ï¼Œæ„å»ºè¾ƒæ…¢'</span>
    },
    <span class="hljs-string">'ANNOY'</span>: {
        <span class="hljs-string">'index_type'</span>: <span class="hljs-string">'ANNOY'</span>,
        <span class="hljs-string">'metric_type'</span>: <span class="hljs-string">'L2'</span>,
        <span class="hljs-string">'params'</span>: {<span class="hljs-string">'n_trees'</span>: <span class="hljs-number">16</span>},
        <span class="hljs-string">'description'</span>: <span class="hljs-string">'éšæœºæŠ•å½±æ£®æ—ï¼Œæ„å»ºå¿«ï¼Œç²¾åº¦ä¸€èˆ¬'</span>
    }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">IndexBenchmark</span>:
    <span class="hljs-string">"""ç´¢å¼•æ€§èƒ½æµ‹è¯•ç±»"""</span>
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, host=<span class="hljs-string">"localhost"</span>, port=<span class="hljs-string">"19530"</span></span>):
        connections.connect(<span class="hljs-string">"default"</span>, host=host, port=port)
        logger.info(<span class="hljs-string">"è¿æ¥åˆ° Milvus æˆåŠŸ"</span>)
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_memory_usage</span>(<span class="hljs-params">self</span>):
        <span class="hljs-string">"""è·å–å½“å‰è¿›ç¨‹å†…å­˜ä½¿ç”¨ï¼ˆMBï¼‰"""</span>
        process = psutil.Process(os.getpid())
        <span class="hljs-keyword">return</span> process.memory_info().rss / <span class="hljs-number">1024</span> / <span class="hljs-number">1024</span>
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">build_index</span>(<span class="hljs-params">self, collection_name, index_name, index_config</span>):
        <span class="hljs-string">"""
        æ„å»ºç´¢å¼•å¹¶æµ‹é‡æ€§èƒ½
        
        å‚æ•°:
            collection_name: é›†åˆåç§°
            index_name: ç´¢å¼•åç§°
            index_config: ç´¢å¼•é…ç½®å­—å…¸
        
        è¿”å›:
            result: åŒ…å«æ„å»ºæ—¶é—´ã€å†…å­˜ä½¿ç”¨ç­‰ä¿¡æ¯çš„å­—å…¸
        """</span>
        logger.info(<span class="hljs-string">f"\n<span class="hljs-subst">{<span class="hljs-string">'='</span>*<span class="hljs-number">70</span>}</span>"</span>)
        logger.info(<span class="hljs-string">f"æµ‹è¯•ç´¢å¼•: <span class="hljs-subst">{index_name}</span>"</span>)
        logger.info(<span class="hljs-string">f"é›†åˆ: <span class="hljs-subst">{collection_name}</span>"</span>)
        logger.info(<span class="hljs-string">f"é…ç½®: <span class="hljs-subst">{index_config}</span>"</span>)
        logger.info(<span class="hljs-string">f"è¯´æ˜: <span class="hljs-subst">{index_config.get(<span class="hljs-string">'description'</span>, <span class="hljs-string">''</span>)}</span>"</span>)
        logger.info(<span class="hljs-string">f"<span class="hljs-subst">{<span class="hljs-string">'='</span>*<span class="hljs-number">70</span>}</span>"</span>)
        
        <span class="hljs-keyword">try</span>:
            collection = Collection(collection_name)
            
            <span class="hljs-comment"># åˆ é™¤ç°æœ‰ç´¢å¼•</span>
            <span class="hljs-keyword">if</span> collection.has_index():
                logger.info(<span class="hljs-string">"åˆ é™¤ç°æœ‰ç´¢å¼•..."</span>)
                collection.drop_index()
                time.sleep(<span class="hljs-number">2</span>)  <span class="hljs-comment"># ç­‰å¾…åˆ é™¤å®Œæˆ</span>
            
            <span class="hljs-comment"># è®°å½•å¼€å§‹çŠ¶æ€</span>
            mem_before = self.get_memory_usage()
            logger.info(<span class="hljs-string">f"å¼€å§‹æ„å»ºç´¢å¼•..."</span>)
            logger.info(<span class="hljs-string">f"åˆå§‹å†…å­˜: <span class="hljs-subst">{mem_before:<span class="hljs-number">.2</span>f}</span> MB"</span>)
            
            <span class="hljs-comment"># æ„å»ºç´¢å¼•</span>
            start_time = time.time()
            collection.create_index(
                field_name=<span class="hljs-string">"embeddings"</span>,
                index_params={
                    <span class="hljs-string">'index_type'</span>: index_config[<span class="hljs-string">'index_type'</span>],
                    <span class="hljs-string">'metric_type'</span>: index_config[<span class="hljs-string">'metric_type'</span>],
                    <span class="hljs-string">'params'</span>: index_config[<span class="hljs-string">'params'</span>]
                }
            )
            
            <span class="hljs-comment"># ç­‰å¾…ç´¢å¼•æ„å»ºå®Œæˆ</span>
            logger.info(<span class="hljs-string">"ç­‰å¾…ç´¢å¼•æ„å»ºå®Œæˆ..."</span>)
            <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:
                progress = utility.index_building_progress(collection_name)
                logger.info(<span class="hljs-string">f"æ„å»ºè¿›åº¦: <span class="hljs-subst">{progress[<span class="hljs-string">'pending_index_rows'</span>]}</span>/<span class="hljs-subst">{progress[<span class="hljs-string">'total_rows'</span>]}</span>"</span>)
                
                <span class="hljs-keyword">if</span> progress[<span class="hljs-string">'pending_index_rows'</span>] == <span class="hljs-number">0</span>:
                    <span class="hljs-keyword">break</span>
                time.sleep(<span class="hljs-number">2</span>)
            
            build_time = time.time() - start_time
            mem_after = self.get_memory_usage()
            mem_increase = mem_after - mem_before
            
            <span class="hljs-comment"># è·å–ç´¢å¼•ä¿¡æ¯</span>
            index_info = collection.index()
            
            result = {
                <span class="hljs-string">'index_name'</span>: index_name,
                <span class="hljs-string">'collection'</span>: collection_name,
                <span class="hljs-string">'build_time'</span>: build_time,
                <span class="hljs-string">'memory_before_mb'</span>: mem_before,
                <span class="hljs-string">'memory_after_mb'</span>: mem_after,
                <span class="hljs-string">'memory_increase_mb'</span>: mem_increase,
                <span class="hljs-string">'index_params'</span>: index_config[<span class="hljs-string">'params'</span>],
                <span class="hljs-string">'num_entities'</span>: collection.num_entities,
                <span class="hljs-string">'success'</span>: <span class="hljs-literal">True</span>
            }
            
            logger.info(<span class="hljs-string">f"\nç´¢å¼•æ„å»ºæˆåŠŸ!"</span>)
            logger.info(<span class="hljs-string">f"  æ„å»ºæ—¶é—´: <span class="hljs-subst">{build_time:<span class="hljs-number">.2</span>f}</span>s"</span>)
            logger.info(<span class="hljs-string">f"  å†…å­˜å¢é•¿: <span class="hljs-subst">{mem_increase:<span class="hljs-number">.2</span>f}</span> MB"</span>)
            logger.info(<span class="hljs-string">f"  å®ä½“æ•°é‡: <span class="hljs-subst">{collection.num_entities:,}</span>"</span>)
            
            <span class="hljs-keyword">return</span> result
            
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            logger.error(<span class="hljs-string">f"ç´¢å¼•æ„å»ºå¤±è´¥: <span class="hljs-subst">{e}</span>"</span>)
            <span class="hljs-keyword">return</span> {
                <span class="hljs-string">'index_name'</span>: index_name,
                <span class="hljs-string">'collection'</span>: collection_name,
                <span class="hljs-string">'error'</span>: <span class="hljs-built_in">str</span>(e),
                <span class="hljs-string">'success'</span>: <span class="hljs-literal">False</span>
            }
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">run_benchmark</span>(<span class="hljs-params">self, collections, index_types=<span class="hljs-literal">None</span></span>):
        <span class="hljs-string">"""
        è¿è¡Œå®Œæ•´çš„ç´¢å¼•æ€§èƒ½æµ‹è¯•
        
        å‚æ•°:
            collections: è¦æµ‹è¯•çš„é›†åˆåˆ—è¡¨
            index_types: è¦æµ‹è¯•çš„ç´¢å¼•ç±»å‹åˆ—è¡¨ï¼ŒNoneè¡¨ç¤ºå…¨éƒ¨
        
        è¿”å›:
            results: æµ‹è¯•ç»“æœå­—å…¸
        """</span>
        <span class="hljs-keyword">if</span> index_types <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:
            index_types = <span class="hljs-built_in">list</span>(INDEX_CONFIGS.keys())
        
        results = {}
        
        <span class="hljs-keyword">for</span> collection_name <span class="hljs-keyword">in</span> collections:
            logger.info(<span class="hljs-string">f"\n\n<span class="hljs-subst">{<span class="hljs-string">'#'</span>*<span class="hljs-number">70</span>}</span>"</span>)
            logger.info(<span class="hljs-string">f"# æµ‹è¯•é›†åˆ: <span class="hljs-subst">{collection_name}</span>"</span>)
            logger.info(<span class="hljs-string">f"<span class="hljs-subst">{<span class="hljs-string">'#'</span>*<span class="hljs-number">70</span>}</span>"</span>)
            
            <span class="hljs-comment"># æ£€æŸ¥é›†åˆæ˜¯å¦å­˜åœ¨</span>
            <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> utility.has_collection(collection_name):
                logger.warning(<span class="hljs-string">f"é›†åˆ <span class="hljs-subst">{collection_name}</span> ä¸å­˜åœ¨ï¼Œè·³è¿‡"</span>)
                <span class="hljs-keyword">continue</span>
            
            collection = Collection(collection_name)
            logger.info(<span class="hljs-string">f"é›†åˆä¿¡æ¯:"</span>)
            logger.info(<span class="hljs-string">f"  å®ä½“æ•°é‡: <span class="hljs-subst">{collection.num_entities:,}</span>"</span>)
            logger.info(<span class="hljs-string">f"  ç»´åº¦: <span class="hljs-subst">{collection.schema.fields[<span class="hljs-number">1</span>].params[<span class="hljs-string">'dim'</span>]}</span>"</span>)
            
            results[collection_name] = {}
            
            <span class="hljs-keyword">for</span> index_name <span class="hljs-keyword">in</span> index_types:
                index_config = INDEX_CONFIGS[index_name]
                result = self.build_index(collection_name, index_name, index_config)
                results[collection_name][index_name] = result
                
                <span class="hljs-comment"># æ¯ä¸ªç´¢å¼•æµ‹è¯•åæš‚åœï¼Œè®©ç³»ç»Ÿç¨³å®š</span>
                time.sleep(<span class="hljs-number">5</span>)
        
        <span class="hljs-keyword">return</span> results

<span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():
    <span class="hljs-string">"""ä¸»å‡½æ•°"""</span>
    <span class="hljs-comment"># è·å–æ‰€æœ‰æµ‹è¯•é›†åˆ</span>
    connections.connect(<span class="hljs-string">"default"</span>, host=<span class="hljs-string">"localhost"</span>, port=<span class="hljs-string">"19530"</span>)
    all_collections = utility.list_collections()
    test_collections = [c <span class="hljs-keyword">for</span> c <span class="hljs-keyword">in</span> all_collections <span class="hljs-keyword">if</span> c.startswith(<span class="hljs-string">'test_'</span>)]
    
    logger.info(<span class="hljs-string">f"å‘ç° <span class="hljs-subst">{<span class="hljs-built_in">len</span>(test_collections)}</span> ä¸ªæµ‹è¯•é›†åˆ"</span>)
    logger.info(<span class="hljs-string">f"é›†åˆåˆ—è¡¨: <span class="hljs-subst">{test_collections}</span>"</span>)
    
    <span class="hljs-comment"># åˆ›å»ºæµ‹è¯•å¯¹è±¡</span>
    benchmark = IndexBenchmark()
    
    <span class="hljs-comment"># è¿è¡Œæµ‹è¯•ï¼ˆå¯ä»¥é€‰æ‹©ç‰¹å®šç´¢å¼•ç±»å‹ï¼‰</span>
    <span class="hljs-comment"># ä¾‹å¦‚åªæµ‹è¯• HNSW å’Œ IVF_SQ8</span>
    results = benchmark.run_benchmark(
        collections=test_collections,
        index_types=[<span class="hljs-string">'IVF_FLAT'</span>, <span class="hljs-string">'IVF_SQ8'</span>, <span class="hljs-string">'HNSW'</span>]  <span class="hljs-comment"># å¯ä»¥ä¿®æ”¹è¿™é‡Œé€‰æ‹©è¦æµ‹è¯•çš„ç´¢å¼•</span>
    )
    
    <span class="hljs-comment"># ä¿å­˜ç»“æœ</span>
    output_file = <span class="hljs-string">'index_building_results.json'</span>
    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(output_file, <span class="hljs-string">'w'</span>) <span class="hljs-keyword">as</span> f:
        json.dump(results, f, indent=<span class="hljs-number">2</span>)
    
    logger.info(<span class="hljs-string">f"\næµ‹è¯•å®Œæˆï¼ç»“æœå·²ä¿å­˜åˆ° <span class="hljs-subst">{output_file}</span>"</span>)
    
    <span class="hljs-comment"># è¾“å‡ºæ±‡æ€»</span>
    logger.info(<span class="hljs-string">"\n"</span> + <span class="hljs-string">"="</span>*<span class="hljs-number">70</span>)
    logger.info(<span class="hljs-string">"æµ‹è¯•ç»“æœæ±‡æ€»"</span>)
    logger.info(<span class="hljs-string">"="</span>*<span class="hljs-number">70</span>)
    
    <span class="hljs-keyword">for</span> coll_name, indices <span class="hljs-keyword">in</span> results.items():
        logger.info(<span class="hljs-string">f"\né›†åˆ: <span class="hljs-subst">{coll_name}</span>"</span>)
        <span class="hljs-keyword">for</span> idx_name, result <span class="hljs-keyword">in</span> indices.items():
            <span class="hljs-keyword">if</span> result[<span class="hljs-string">'success'</span>]:
                logger.info(<span class="hljs-string">f"  <span class="hljs-subst">{idx_name}</span>:"</span>)
                logger.info(<span class="hljs-string">f"    æ„å»ºæ—¶é—´: <span class="hljs-subst">{result[<span class="hljs-string">'build_time'</span>]:<span class="hljs-number">.2</span>f}</span>s"</span>)
                logger.info(<span class="hljs-string">f"    å†…å­˜å¢é•¿: <span class="hljs-subst">{result[<span class="hljs-string">'memory_increase_mb'</span>]:<span class="hljs-number">.2</span>f}</span> MB"</span>)
            <span class="hljs-keyword">else</span>:
                logger.info(<span class="hljs-string">f"  <span class="hljs-subst">{idx_name}</span>: å¤±è´¥ - <span class="hljs-subst">{result.get(<span class="hljs-string">'error'</span>, <span class="hljs-string">'Unknown'</span>)}</span>"</span>)

<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    main()
EOF

chmod +x test_index_building.py
</code></pre>
<p><strong>æ‰§è¡Œç´¢å¼•æµ‹è¯•ï¼š</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ‰§è¡Œç´¢å¼•æ„å»ºæµ‹è¯•</span>
python test_index_building.py

<span class="hljs-comment"># æµ‹è¯•è¿‡ç¨‹ä¼šè¾“å‡ºè¯¦ç»†çš„è¿›åº¦ä¿¡æ¯</span>
<span class="hljs-comment"># é¢„è®¡è€—æ—¶ï¼šæ ¹æ®æ•°æ®è§„æ¨¡å’Œç´¢å¼•ç±»å‹ï¼Œä»å‡ åˆ†é’Ÿåˆ°å‡ ååˆ†é’Ÿ</span>
</code></pre>
<p><strong>æµ‹è¯•ç»“æœï¼š</strong></p>











































































<table><thead><tr><th>æ•°æ®é›†</th><th>æ•°æ®é‡</th><th>ç»´åº¦</th><th>IVF_FLAT</th><th>IVF_SQ8</th><th>HNSW</th><th>æœ€ä¼˜ç´¢å¼•</th><th>ä¼˜åŠ¿å¹…åº¦</th></tr></thead><tbody><tr><td>test_dim128_scale100000â€‹</td><td>10ä¸‡</td><td>128</td><td>6.55</td><td>7.05</td><td>7.56</td><td>IVF_FLATâ€‹</td><td>+7.1%</td></tr><tr><td>test_dim128_scale1000000â€‹</td><td>100ä¸‡</td><td>128</td><td>59.4</td><td>58.89</td><td>96.79</td><td>IVF_SQ8â€‹</td><td>+0.9%</td></tr><tr><td>test_dim512_scale100000â€‹</td><td>10ä¸‡</td><td>512</td><td>18.12</td><td>17.63</td><td>101.2</td><td>IVF_SQ8â€‹</td><td>+2.7%</td></tr><tr><td>test_dim512_scale1000000â€‹</td><td>100ä¸‡</td><td>512</td><td>331.29</td><td>141.49</td><td>295.86</td><td>IVF_SQ8â€‹</td><td>+57.3%</td></tr><tr><td>test_dim768_scale100000â€‹</td><td>10ä¸‡</td><td>768</td><td>26.18</td><td>25.7</td><td>31.24</td><td>IVF_SQ8â€‹</td><td>+1.8%</td></tr><tr><td>test_dim768_scale1000000â€‹</td><td>100ä¸‡</td><td>768</td><td>571.73</td><td>222.07</td><td>392.16</td><td>IVF_SQ8â€‹</td><td>+61.2%</td></tr></tbody></table>
<p>åŸºäºå®Œæ•´çš„æµ‹è¯•æ•°æ®åˆ†æï¼ŒIVF_SQ8ç´¢å¼•åœ¨å¤§å¤šæ•°åœºæ™¯ä¸‹è¡¨ç°æœ€ä¼˜ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤§æ•°æ®é‡å’Œé«˜ç»´åº¦åœºæ™¯ä¸­å±•ç°å‡ºå‹å€’æ€§ä¼˜åŠ¿ã€‚åœ¨100ä¸‡æ¡768ç»´æ•°æ®çš„æµ‹è¯•ä¸­ï¼ŒIVF_SQ8æ„å»ºæ—¶é—´ä»…222ç§’ï¼Œæ¯”IVF_FLATå¿«61%ï¼Œæ¯”HNSWå¿«43%ã€‚å…¶æœ€å¤§ä¼˜åŠ¿åœ¨äºå‡ºè‰²çš„æ‰©å±•æ€§â€”â€”ä»10ä¸‡æ¡åˆ°100ä¸‡æ¡æ•°æ®ï¼Œæ„å»ºæ—¶é—´å¢é•¿ç¨³å®šåœ¨8-9å€ï¼Œè€Œå…¶ä»–ç´¢å¼•æ³¢åŠ¨å‰§çƒˆï¼ˆIVF_FLATè¾¾9-22å€ï¼ŒHNSWä¸º3-13å€ï¼‰ã€‚è™½ç„¶å†…å­˜æ¶ˆè€—æ•°æ®å› æµ‹é‡æ–¹æ³•é—®é¢˜æœªèƒ½å‡†ç¡®åæ˜ ï¼Œä½†IVF_SQ8å›ºæœ‰çš„æ ‡é‡é‡åŒ–æŠ€æœ¯ç†è®ºä¸Šå¯èŠ‚çœ75%å†…å­˜ã€‚ç»¼åˆæ¥çœ‹ï¼ŒIVF_SQ8åœ¨æ„å»ºé€Ÿåº¦ã€ç¨³å®šæ€§å’Œèµ„æºæ•ˆç‡æ–¹é¢å…¨é¢é¢†å…ˆï¼Œæ˜¯ç”Ÿäº§ç¯å¢ƒçš„é¦–é€‰æ–¹æ¡ˆï¼Œç‰¹åˆ«é€‚åˆå¤§è§„æ¨¡å‘é‡æ£€ç´¢åœºæ™¯ã€‚</p>
<pre><code class="hljs language-ruby" lang="ruby">(milvus-env) [root<span class="hljs-variable">@ecs</span>-dc0f milvus-test]<span class="hljs-comment"># cat index_building_results.json</span>
{
  <span class="hljs-string">"test_dim128_scale100000"</span>: {
    <span class="hljs-string">"IVF_FLAT"</span>: {
      <span class="hljs-string">"index_name"</span>: <span class="hljs-string">"IVF_FLAT"</span>,
      <span class="hljs-string">"collection"</span>: <span class="hljs-string">"test_dim128_scale100000"</span>,
      <span class="hljs-string">"build_time"</span>: <span class="hljs-number">6.547612905502319</span>,
      <span class="hljs-string">"memory_before_mb"</span>: <span class="hljs-number">165.62109375</span>,
      <span class="hljs-string">"memory_after_mb"</span>: <span class="hljs-number">166.3125</span>,
      <span class="hljs-string">"memory_increase_mb"</span>: <span class="hljs-number">0.69140625</span>,
      <span class="hljs-string">"index_params"</span>: {
        <span class="hljs-string">"nlist"</span>: <span class="hljs-number">1024</span>
      },
      <span class="hljs-string">"num_entities"</span>: <span class="hljs-number">100000</span>,
      <span class="hljs-string">"success"</span>: <span class="hljs-literal">true</span>
    },
    <span class="hljs-string">"IVF_SQ8"</span>: {
      <span class="hljs-string">"index_name"</span>: <span class="hljs-string">"IVF_SQ8"</span>,
      <span class="hljs-string">"collection"</span>: <span class="hljs-string">"test_dim128_scale100000"</span>,
      <span class="hljs-string">"build_time"</span>: <span class="hljs-number">7.048452854156494</span>,
      <span class="hljs-string">"memory_before_mb"</span>: <span class="hljs-number">166.3125</span>,
      <span class="hljs-string">"memory_after_mb"</span>: <span class="hljs-number">166.3125</span>,
      <span class="hljs-string">"memory_increase_mb"</span>: <span class="hljs-number">0.0</span>,
      <span class="hljs-string">"index_params"</span>: {
        <span class="hljs-string">"nlist"</span>: <span class="hljs-number">1024</span>
      },
      <span class="hljs-string">"num_entities"</span>: <span class="hljs-number">100000</span>,
      <span class="hljs-string">"success"</span>: <span class="hljs-literal">true</span>
    },
    <span class="hljs-string">"HNSW"</span>: {
      <span class="hljs-string">"index_name"</span>: <span class="hljs-string">"HNSW"</span>,
      <span class="hljs-string">"collection"</span>: <span class="hljs-string">"test_dim128_scale100000"</span>,
      <span class="hljs-string">"build_time"</span>: <span class="hljs-number">7.556255578994751</span>,
      <span class="hljs-string">"memory_before_mb"</span>: <span class="hljs-number">166.3125</span>,
      <span class="hljs-string">"memory_after_mb"</span>: <span class="hljs-number">166.3125</span>,
      <span class="hljs-string">"memory_increase_mb"</span>: <span class="hljs-number">0.0</span>,
      <span class="hljs-string">"index_params"</span>: {
        <span class="hljs-string">"M"</span>: <span class="hljs-number">16</span>,
        <span class="hljs-string">"efConstruction"</span>: <span class="hljs-number">200</span>
      },
      <span class="hljs-string">"num_entities"</span>: <span class="hljs-number">100000</span>,
      <span class="hljs-string">"success"</span>: <span class="hljs-literal">true</span>
    }
  },
  <span class="hljs-string">"test_dim128_scale1000000"</span>: {
    <span class="hljs-string">"IVF_FLAT"</span>: {
      <span class="hljs-string">"index_name"</span>: <span class="hljs-string">"IVF_FLAT"</span>,
      <span class="hljs-string">"collection"</span>: <span class="hljs-string">"test_dim128_scale1000000"</span>,
      <span class="hljs-string">"build_time"</span>: <span class="hljs-number">59.40099096298218</span>,
      <span class="hljs-string">"memory_before_mb"</span>: <span class="hljs-number">166.3125</span>,
      <span class="hljs-string">"memory_after_mb"</span>: <span class="hljs-number">166.3125</span>,
      <span class="hljs-string">"memory_increase_mb"</span>: <span class="hljs-number">0.0</span>,
      <span class="hljs-string">"index_params"</span>: {
        <span class="hljs-string">"nlist"</span>: <span class="hljs-number">1024</span>
      },
      <span class="hljs-string">"num_entities"</span>: <span class="hljs-number">1000000</span>,
      <span class="hljs-string">"success"</span>: <span class="hljs-literal">true</span>
    },
    <span class="hljs-string">"IVF_SQ8"</span>: {
      <span class="hljs-string">"index_name"</span>: <span class="hljs-string">"IVF_SQ8"</span>,
      <span class="hljs-string">"collection"</span>: <span class="hljs-string">"test_dim128_scale1000000"</span>,
      <span class="hljs-string">"build_time"</span>: <span class="hljs-number">58.89368653297424</span>,
      <span class="hljs-string">"memory_before_mb"</span>: <span class="hljs-number">166.3125</span>,
      <span class="hljs-string">"memory_after_mb"</span>: <span class="hljs-number">166.31640625</span>,
      <span class="hljs-string">"memory_increase_mb"</span>: <span class="hljs-number">0.00390625</span>,
      <span class="hljs-string">"index_params"</span>: {
        <span class="hljs-string">"nlist"</span>: <span class="hljs-number">1024</span>
      },
      <span class="hljs-string">"num_entities"</span>: <span class="hljs-number">1000000</span>,
      <span class="hljs-string">"success"</span>: <span class="hljs-literal">true</span>
    },
    <span class="hljs-string">"HNSW"</span>: {
      <span class="hljs-string">"index_name"</span>: <span class="hljs-string">"HNSW"</span>,
      <span class="hljs-string">"collection"</span>: <span class="hljs-string">"test_dim128_scale1000000"</span>,
      <span class="hljs-string">"build_time"</span>: <span class="hljs-number">96.7917742729187</span>,
      <span class="hljs-string">"memory_before_mb"</span>: <span class="hljs-number">166.31640625</span>,
      <span class="hljs-string">"memory_after_mb"</span>: <span class="hljs-number">166.3203125</span>,
      <span class="hljs-string">"memory_increase_mb"</span>: <span class="hljs-number">0.00390625</span>,
      <span class="hljs-string">"index_params"</span>: {
        <span class="hljs-string">"M"</span>: <span class="hljs-number">16</span>,
        <span class="hljs-string">"efConstruction"</span>: <span class="hljs-number">200</span>
      },
      <span class="hljs-string">"num_entities"</span>: <span class="hljs-number">1000000</span>,
      <span class="hljs-string">"success"</span>: <span class="hljs-literal">true</span>
    }
  },
  <span class="hljs-string">"test_dim512_scale100000"</span>: {
    <span class="hljs-string">"IVF_FLAT"</span>: {
      <span class="hljs-string">"index_name"</span>: <span class="hljs-string">"IVF_FLAT"</span>,
      <span class="hljs-string">"collection"</span>: <span class="hljs-string">"test_dim512_scale100000"</span>,
      <span class="hljs-string">"build_time"</span>: <span class="hljs-number">18.123372077941895</span>,
      <span class="hljs-string">"memory_before_mb"</span>: <span class="hljs-number">166.3203125</span>,
      <span class="hljs-string">"memory_after_mb"</span>: <span class="hljs-number">166.32421875</span>,
      <span class="hljs-string">"memory_increase_mb"</span>: <span class="hljs-number">0.00390625</span>,
      <span class="hljs-string">"index_params"</span>: {
        <span class="hljs-string">"nlist"</span>: <span class="hljs-number">1024</span>
      },
      <span class="hljs-string">"num_entities"</span>: <span class="hljs-number">100000</span>,
      <span class="hljs-string">"success"</span>: <span class="hljs-literal">true</span>
    },
    <span class="hljs-string">"IVF_SQ8"</span>: {
      <span class="hljs-string">"index_name"</span>: <span class="hljs-string">"IVF_SQ8"</span>,
      <span class="hljs-string">"collection"</span>: <span class="hljs-string">"test_dim512_scale100000"</span>,
      <span class="hljs-string">"build_time"</span>: <span class="hljs-number">17.625036478042603</span>,
      <span class="hljs-string">"memory_before_mb"</span>: <span class="hljs-number">166.32421875</span>,
      <span class="hljs-string">"memory_after_mb"</span>: <span class="hljs-number">166.32421875</span>,
      <span class="hljs-string">"memory_increase_mb"</span>: <span class="hljs-number">0.0</span>,
      <span class="hljs-string">"index_params"</span>: {
        <span class="hljs-string">"nlist"</span>: <span class="hljs-number">1024</span>
      },
      <span class="hljs-string">"num_entities"</span>: <span class="hljs-number">100000</span>,
      <span class="hljs-string">"success"</span>: <span class="hljs-literal">true</span>
    },
    <span class="hljs-string">"HNSW"</span>: {
      <span class="hljs-string">"index_name"</span>: <span class="hljs-string">"HNSW"</span>,
      <span class="hljs-string">"collection"</span>: <span class="hljs-string">"test_dim512_scale100000"</span>,
      <span class="hljs-string">"build_time"</span>: <span class="hljs-number">101.19962310791016</span>,
      <span class="hljs-string">"memory_before_mb"</span>: <span class="hljs-number">166.32421875</span>,
      <span class="hljs-string">"memory_after_mb"</span>: <span class="hljs-number">166.33203125</span>,
      <span class="hljs-string">"memory_increase_mb"</span>: <span class="hljs-number">0.0078125</span>,
      <span class="hljs-string">"index_params"</span>: {
        <span class="hljs-string">"M"</span>: <span class="hljs-number">16</span>,
        <span class="hljs-string">"efConstruction"</span>: <span class="hljs-number">200</span>
      },
      <span class="hljs-string">"num_entities"</span>: <span class="hljs-number">100000</span>,
      <span class="hljs-string">"success"</span>: <span class="hljs-literal">true</span>
    }
  },
  <span class="hljs-string">"test_dim512_scale1000000"</span>: {
    <span class="hljs-string">"IVF_FLAT"</span>: {
      <span class="hljs-string">"index_name"</span>: <span class="hljs-string">"IVF_FLAT"</span>,
      <span class="hljs-string">"collection"</span>: <span class="hljs-string">"test_dim512_scale1000000"</span>,
      <span class="hljs-string">"build_time"</span>: <span class="hljs-number">331.29386138916016</span>,
      <span class="hljs-string">"memory_before_mb"</span>: <span class="hljs-number">166.33203125</span>,
      <span class="hljs-string">"memory_after_mb"</span>: <span class="hljs-number">166.3515625</span>,
      <span class="hljs-string">"memory_increase_mb"</span>: <span class="hljs-number">0.01953125</span>,
      <span class="hljs-string">"index_params"</span>: {
        <span class="hljs-string">"nlist"</span>: <span class="hljs-number">1024</span>
      },
      <span class="hljs-string">"num_entities"</span>: <span class="hljs-number">1000000</span>,
      <span class="hljs-string">"success"</span>: <span class="hljs-literal">true</span>
    },
    <span class="hljs-string">"IVF_SQ8"</span>: {
      <span class="hljs-string">"index_name"</span>: <span class="hljs-string">"IVF_SQ8"</span>,
      <span class="hljs-string">"collection"</span>: <span class="hljs-string">"test_dim512_scale1000000"</span>,
      <span class="hljs-string">"build_time"</span>: <span class="hljs-number">141.49484705924988</span>,
      <span class="hljs-string">"memory_before_mb"</span>: <span class="hljs-number">166.3515625</span>,
      <span class="hljs-string">"memory_after_mb"</span>: <span class="hljs-number">166.36328125</span>,
      <span class="hljs-string">"memory_increase_mb"</span>: <span class="hljs-number">0.01171875</span>,
      <span class="hljs-string">"index_params"</span>: {
        <span class="hljs-string">"nlist"</span>: <span class="hljs-number">1024</span>
      },
      <span class="hljs-string">"num_entities"</span>: <span class="hljs-number">1000000</span>,
      <span class="hljs-string">"success"</span>: <span class="hljs-literal">true</span>
    },
    <span class="hljs-string">"HNSW"</span>: {
      <span class="hljs-string">"index_name"</span>: <span class="hljs-string">"HNSW"</span>,
      <span class="hljs-string">"collection"</span>: <span class="hljs-string">"test_dim512_scale1000000"</span>,
      <span class="hljs-string">"build_time"</span>: <span class="hljs-number">295.8570909500122</span>,
      <span class="hljs-string">"memory_before_mb"</span>: <span class="hljs-number">166.36328125</span>,
      <span class="hljs-string">"memory_after_mb"</span>: <span class="hljs-number">166.37890625</span>,
      <span class="hljs-string">"memory_increase_mb"</span>: <span class="hljs-number">0.015625</span>,
      <span class="hljs-string">"index_params"</span>: {
        <span class="hljs-string">"M"</span>: <span class="hljs-number">16</span>,
        <span class="hljs-string">"efConstruction"</span>: <span class="hljs-number">200</span>
      },
      <span class="hljs-string">"num_entities"</span>: <span class="hljs-number">1000000</span>,
      <span class="hljs-string">"success"</span>: <span class="hljs-literal">true</span>
    }
  },
  <span class="hljs-string">"test_dim768_scale100000"</span>: {
    <span class="hljs-string">"IVF_FLAT"</span>: {
      <span class="hljs-string">"index_name"</span>: <span class="hljs-string">"IVF_FLAT"</span>,
      <span class="hljs-string">"collection"</span>: <span class="hljs-string">"test_dim768_scale100000"</span>,
      <span class="hljs-string">"build_time"</span>: <span class="hljs-number">26.179438591003418</span>,
      <span class="hljs-string">"memory_before_mb"</span>: <span class="hljs-number">166.37890625</span>,
      <span class="hljs-string">"memory_after_mb"</span>: <span class="hljs-number">166.37890625</span>,
      <span class="hljs-string">"memory_increase_mb"</span>: <span class="hljs-number">0.0</span>,
      <span class="hljs-string">"index_params"</span>: {
        <span class="hljs-string">"nlist"</span>: <span class="hljs-number">1024</span>
      },
      <span class="hljs-string">"num_entities"</span>: <span class="hljs-number">100000</span>,
      <span class="hljs-string">"success"</span>: <span class="hljs-literal">true</span>
    },
    <span class="hljs-string">"IVF_SQ8"</span>: {
      <span class="hljs-string">"index_name"</span>: <span class="hljs-string">"IVF_SQ8"</span>,
      <span class="hljs-string">"collection"</span>: <span class="hljs-string">"test_dim768_scale100000"</span>,
      <span class="hljs-string">"build_time"</span>: <span class="hljs-number">25.695476293563843</span>,
      <span class="hljs-string">"memory_before_mb"</span>: <span class="hljs-number">166.37890625</span>,
      <span class="hljs-string">"memory_after_mb"</span>: <span class="hljs-number">166.37890625</span>,
      <span class="hljs-string">"memory_increase_mb"</span>: <span class="hljs-number">0.0</span>,
      <span class="hljs-string">"index_params"</span>: {
        <span class="hljs-string">"nlist"</span>: <span class="hljs-number">1024</span>
      },
      <span class="hljs-string">"num_entities"</span>: <span class="hljs-number">100000</span>,
      <span class="hljs-string">"success"</span>: <span class="hljs-literal">true</span>
    },
    <span class="hljs-string">"HNSW"</span>: {
      <span class="hljs-string">"index_name"</span>: <span class="hljs-string">"HNSW"</span>,
      <span class="hljs-string">"collection"</span>: <span class="hljs-string">"test_dim768_scale100000"</span>,
      <span class="hljs-string">"build_time"</span>: <span class="hljs-number">31.236164569854736</span>,
      <span class="hljs-string">"memory_before_mb"</span>: <span class="hljs-number">166.37890625</span>,
      <span class="hljs-string">"memory_after_mb"</span>: <span class="hljs-number">166.37890625</span>,
      <span class="hljs-string">"memory_increase_mb"</span>: <span class="hljs-number">0.0</span>,
      <span class="hljs-string">"index_params"</span>: {
        <span class="hljs-string">"M"</span>: <span class="hljs-number">16</span>,
        <span class="hljs-string">"efConstruction"</span>: <span class="hljs-number">200</span>
      },
      <span class="hljs-string">"num_entities"</span>: <span class="hljs-number">100000</span>,
      <span class="hljs-string">"success"</span>: <span class="hljs-literal">true</span>
    }
  },
  <span class="hljs-string">"test_dim768_scale1000000"</span>: {
    <span class="hljs-string">"IVF_FLAT"</span>: {
      <span class="hljs-string">"index_name"</span>: <span class="hljs-string">"IVF_FLAT"</span>,
      <span class="hljs-string">"collection"</span>: <span class="hljs-string">"test_dim768_scale1000000"</span>,
      <span class="hljs-string">"build_time"</span>: <span class="hljs-number">571.7309353351593</span>,
      <span class="hljs-string">"memory_before_mb"</span>: <span class="hljs-number">166.37890625</span>,
      <span class="hljs-string">"memory_after_mb"</span>: <span class="hljs-number">166.37890625</span>,
      <span class="hljs-string">"memory_increase_mb"</span>: <span class="hljs-number">0.0</span>,
      <span class="hljs-string">"index_params"</span>: {
        <span class="hljs-string">"nlist"</span>: <span class="hljs-number">1024</span>
      },
      <span class="hljs-string">"num_entities"</span>: <span class="hljs-number">1000000</span>,
      <span class="hljs-string">"success"</span>: <span class="hljs-literal">true</span>
    },
    <span class="hljs-string">"IVF_SQ8"</span>: {
      <span class="hljs-string">"index_name"</span>: <span class="hljs-string">"IVF_SQ8"</span>,
      <span class="hljs-string">"collection"</span>: <span class="hljs-string">"test_dim768_scale1000000"</span>,
      <span class="hljs-string">"build_time"</span>: <span class="hljs-number">222.0692276954651</span>,
      <span class="hljs-string">"memory_before_mb"</span>: <span class="hljs-number">166.37890625</span>,
      <span class="hljs-string">"memory_after_mb"</span>: <span class="hljs-number">166.4375</span>,
      <span class="hljs-string">"memory_increase_mb"</span>: <span class="hljs-number">0.05859375</span>,
      <span class="hljs-string">"index_params"</span>: {
        <span class="hljs-string">"nlist"</span>: <span class="hljs-number">1024</span>
      },
      <span class="hljs-string">"num_entities"</span>: <span class="hljs-number">1000000</span>,
      <span class="hljs-string">"success"</span>: <span class="hljs-literal">true</span>
    },
    <span class="hljs-string">"HNSW"</span>: {
      <span class="hljs-string">"index_name"</span>: <span class="hljs-string">"HNSW"</span>,
      <span class="hljs-string">"collection"</span>: <span class="hljs-string">"test_dim768_scale1000000"</span>,
      <span class="hljs-string">"build_time"</span>: <span class="hljs-number">392.15637397766113</span>,
      <span class="hljs-string">"memory_before_mb"</span>: <span class="hljs-number">166.4375</span>,
      <span class="hljs-string">"memory_after_mb"</span>: <span class="hljs-number">166.4375</span>,
      <span class="hljs-string">"memory_increase_mb"</span>: <span class="hljs-number">0.0</span>,
      <span class="hljs-string">"index_params"</span>: {
        <span class="hljs-string">"M"</span>: <span class="hljs-number">16</span>,
        <span class="hljs-string">"efConstruction"</span>: <span class="hljs-number">200</span>
      },
      <span class="hljs-string">"num_entities"</span>: <span class="hljs-number">1000000</span>,
      <span class="hljs-string">"success"</span>: <span class="hljs-literal">true</span>
    }
  }
}(milvus-env) [root<span class="hljs-variable">@ecs</span>-dc0f milvus-test]<span class="hljs-comment"># </span>
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e1e64a413c3a45d9966dcbd2cf442113~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aaS5aS0Njc1:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765607314&amp;x-signature=QmZNFkglwjhQyfu3q9y3cuhhPGY%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-16">å…­ã€æŸ¥è¯¢æ€§èƒ½æµ‹è¯•</h2>
<h3 data-id="heading-17">6.1 æŸ¥è¯¢æ€§èƒ½æµ‹è¯•åŸç†</h3>
<p>æŸ¥è¯¢æ€§èƒ½æµ‹è¯•éœ€è¦è¯„ä¼°ï¼š</p>
<ol>
<li><strong>å»¶è¿Ÿï¼ˆLatencyï¼‰</strong> ï¼šå•ä¸ªæŸ¥è¯¢çš„å“åº”æ—¶é—´</li>
<li><strong>ååé‡ï¼ˆQPSï¼‰</strong> ï¼šæ¯ç§’å¤„ç†çš„æŸ¥è¯¢æ•°</li>
<li><strong>å¹¶å‘æ€§èƒ½</strong>ï¼šå¤šçº¿ç¨‹ä¸‹çš„æ‰©å±•æ€§</li>
<li><strong>å‚æ•°æ•æ„Ÿæ€§</strong>ï¼šä¸åŒæœç´¢å‚æ•°å¯¹æ€§èƒ½çš„å½±å“</li>
</ol>
<h3 data-id="heading-18">6.2 åˆ›å»ºæŸ¥è¯¢æµ‹è¯•è„šæœ¬</h3>
<pre><code class="hljs language-python" lang="python">cat &gt; test_query_performance.py &lt;&lt; <span class="hljs-string">'EOF'</span>
<span class="hljs-comment">#!/usr/bin/env python3</span>
<span class="hljs-string">"""
Milvus æŸ¥è¯¢æ€§èƒ½æµ‹è¯•
æµ‹è¯•ä¸åŒå‚æ•°ä¸‹çš„æŸ¥è¯¢å»¶è¿Ÿå’Œååé‡
"""</span>

<span class="hljs-keyword">import</span> time
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
<span class="hljs-keyword">from</span> pymilvus <span class="hljs-keyword">import</span> connections, Collection, utility
<span class="hljs-keyword">import</span> logging
<span class="hljs-keyword">import</span> json
<span class="hljs-keyword">from</span> concurrent.futures <span class="hljs-keyword">import</span> ThreadPoolExecutor, as_completed
<span class="hljs-keyword">import</span> threading
<span class="hljs-keyword">from</span> collections <span class="hljs-keyword">import</span> defaultdict

logging.basicConfig(
    level=logging.INFO,
    <span class="hljs-built_in">format</span>=<span class="hljs-string">'%(asctime)s - %(levelname)s - %(message)s'</span>
)
logger = logging.getLogger(__name__)

<span class="hljs-keyword">class</span> <span class="hljs-title class_">QueryBenchmark</span>:
    <span class="hljs-string">"""æŸ¥è¯¢æ€§èƒ½æµ‹è¯•ç±»"""</span>
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, host=<span class="hljs-string">"localhost"</span>, port=<span class="hljs-string">"19530"</span></span>):
        connections.connect(<span class="hljs-string">"default"</span>, host=host, port=port)
        logger.info(<span class="hljs-string">"è¿æ¥åˆ° Milvus æˆåŠŸ"</span>)
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">generate_query_vectors</span>(<span class="hljs-params">self, num_queries, dim</span>):
        <span class="hljs-string">"""
        ç”ŸæˆæŸ¥è¯¢å‘é‡
        
        è¯´æ˜ï¼š
        - æŸ¥è¯¢å‘é‡ä¹Ÿéœ€è¦å½’ä¸€åŒ–ï¼Œä¸æ•°æ®é›†ä¿æŒä¸€è‡´
        - ç”Ÿæˆè¶³å¤Ÿå¤šçš„æŸ¥è¯¢å‘é‡ç”¨äºæµ‹è¯•
        """</span>
        queries = np.random.randn(num_queries, dim).astype(np.float32)
        norms = np.linalg.norm(queries, axis=<span class="hljs-number">1</span>, keepdims=<span class="hljs-literal">True</span>)
        queries = queries / (norms + <span class="hljs-number">1e-10</span>)
        <span class="hljs-keyword">return</span> queries
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">single_query_test</span>(<span class="hljs-params">self, collection_name, query_vectors, 
                         topk=<span class="hljs-number">10</span>, search_params=<span class="hljs-literal">None</span>, num_warmup=<span class="hljs-number">10</span></span>):
        <span class="hljs-string">"""
        å•çº¿ç¨‹æŸ¥è¯¢æµ‹è¯•
        
        å‚æ•°:
            collection_name: é›†åˆåç§°
            query_vectors: æŸ¥è¯¢å‘é‡æ•°ç»„
            topk: è¿”å›Top-Kç»“æœ
            search_params: æœç´¢å‚æ•°
            num_warmup: é¢„çƒ­æŸ¥è¯¢æ•°é‡
        
        è¿”å›:
            result: åŒ…å«å»¶è¿Ÿç»Ÿè®¡çš„å­—å…¸
        """</span>
        collection = Collection(collection_name)
        collection.load()  <span class="hljs-comment"># åŠ è½½é›†åˆåˆ°å†…å­˜</span>
        
        <span class="hljs-keyword">if</span> search_params <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:
            search_params = {<span class="hljs-string">"metric_type"</span>: <span class="hljs-string">"L2"</span>, <span class="hljs-string">"params"</span>: {<span class="hljs-string">"nprobe"</span>: <span class="hljs-number">32</span>}}
        
        logger.info(<span class="hljs-string">f"å¼€å§‹å•çº¿ç¨‹æŸ¥è¯¢æµ‹è¯•"</span>)
        logger.info(<span class="hljs-string">f"  TopK: <span class="hljs-subst">{topk}</span>"</span>)
        logger.info(<span class="hljs-string">f"  æœç´¢å‚æ•°: <span class="hljs-subst">{search_params}</span>"</span>)
        logger.info(<span class="hljs-string">f"  æŸ¥è¯¢æ•°é‡: <span class="hljs-subst">{<span class="hljs-built_in">len</span>(query_vectors)}</span>"</span>)
        
        <span class="hljs-comment"># é¢„çƒ­ï¼šè®©ç³»ç»Ÿç¼“å­˜ç¨³å®š</span>
        logger.info(<span class="hljs-string">f"é¢„çƒ­ä¸­ï¼ˆ<span class="hljs-subst">{num_warmup}</span>æ¬¡æŸ¥è¯¢ï¼‰..."</span>)
        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(num_warmup):
            collection.search(
                data=[query_vectors[i].tolist()],
                anns_field=<span class="hljs-string">"embeddings"</span>,
                param=search_params,
                limit=topk
            )
        
        <span class="hljs-comment"># æ­£å¼æµ‹è¯•</span>
        latencies = []
        logger.info(<span class="hljs-string">"å¼€å§‹æ­£å¼æµ‹è¯•..."</span>)
        
        <span class="hljs-keyword">for</span> i, query_vector <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(query_vectors):
            start_time = time.time()
            
            results = collection.search(
                data=[query_vector.tolist()],
                anns_field=<span class="hljs-string">"embeddings"</span>,
                param=search_params,
                limit=topk,
                output_fields=[<span class="hljs-string">"category"</span>]  <span class="hljs-comment"># å¯é€‰ï¼šè¿”å›å…ƒæ•°æ®</span>
            )
            
            latency = (time.time() - start_time) * <span class="hljs-number">1000</span>  <span class="hljs-comment"># è½¬æ¢ä¸ºæ¯«ç§’</span>
            latencies.append(latency)
            
            <span class="hljs-keyword">if</span> (i + <span class="hljs-number">1</span>) % <span class="hljs-number">100</span> == <span class="hljs-number">0</span>:
                avg_latency = np.mean(latencies[-<span class="hljs-number">100</span>:])
                logger.info(<span class="hljs-string">f"å·²å®Œæˆ <span class="hljs-subst">{i+<span class="hljs-number">1</span>}</span>/<span class="hljs-subst">{<span class="hljs-built_in">len</span>(query_vectors)}</span> æŸ¥è¯¢, "</span>
                          <span class="hljs-string">f"æœ€è¿‘100æ¬¡å¹³å‡å»¶è¿Ÿ: <span class="hljs-subst">{avg_latency:<span class="hljs-number">.2</span>f}</span>ms"</span>)
        
        <span class="hljs-comment"># è®¡ç®—ç»Ÿè®¡æŒ‡æ ‡</span>
        latencies = np.array(latencies)
        result = {
            <span class="hljs-string">'num_queries'</span>: <span class="hljs-built_in">len</span>(query_vectors),
            <span class="hljs-string">'topk'</span>: topk,
            <span class="hljs-string">'search_params'</span>: search_params,
            <span class="hljs-string">'avg_latency_ms'</span>: <span class="hljs-built_in">float</span>(np.mean(latencies)),
            <span class="hljs-string">'median_latency_ms'</span>: <span class="hljs-built_in">float</span>(np.median(latencies)),
            <span class="hljs-string">'p50_latency_ms'</span>: <span class="hljs-built_in">float</span>(np.percentile(latencies, <span class="hljs-number">50</span>)),
            <span class="hljs-string">'p95_latency_ms'</span>: <span class="hljs-built_in">float</span>(np.percentile(latencies, <span class="hljs-number">95</span>)),
            <span class="hljs-string">'p99_latency_ms'</span>: <span class="hljs-built_in">float</span>(np.percentile(latencies, <span class="hljs-number">99</span>)),
            <span class="hljs-string">'min_latency_ms'</span>: <span class="hljs-built_in">float</span>(np.<span class="hljs-built_in">min</span>(latencies)),
            <span class="hljs-string">'max_latency_ms'</span>: <span class="hljs-built_in">float</span>(np.<span class="hljs-built_in">max</span>(latencies)),
            <span class="hljs-string">'qps'</span>: <span class="hljs-number">1000.0</span> / <span class="hljs-built_in">float</span>(np.mean(latencies))  <span class="hljs-comment"># å•çº¿ç¨‹QPS</span>
        }
        
        collection.release()
        
        logger.info(<span class="hljs-string">"\næµ‹è¯•ç»“æœ:"</span>)
        logger.info(<span class="hljs-string">f"  å¹³å‡å»¶è¿Ÿ: <span class="hljs-subst">{result[<span class="hljs-string">'avg_latency_ms'</span>]:<span class="hljs-number">.2</span>f}</span>ms"</span>)
        logger.info(<span class="hljs-string">f"  P50å»¶è¿Ÿ: <span class="hljs-subst">{result[<span class="hljs-string">'p50_latency_ms'</span>]:<span class="hljs-number">.2</span>f}</span>ms"</span>)
        logger.info(<span class="hljs-string">f"  P95å»¶è¿Ÿ: <span class="hljs-subst">{result[<span class="hljs-string">'p95_latency_ms'</span>]:<span class="hljs-number">.2</span>f}</span>ms"</span>)
        logger.info(<span class="hljs-string">f"  P99å»¶è¿Ÿ: <span class="hljs-subst">{result[<span class="hljs-string">'p99_latency_ms'</span>]:<span class="hljs-number">.2</span>f}</span>ms"</span>)
        logger.info(<span class="hljs-string">f"  QPS: <span class="hljs-subst">{result[<span class="hljs-string">'qps'</span>]:<span class="hljs-number">.2</span>f}</span>"</span>)
        
        <span class="hljs-keyword">return</span> result
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">concurrent_query_test</span>(<span class="hljs-params">self, collection_name, query_vectors,
                            topk=<span class="hljs-number">10</span>, search_params=<span class="hljs-literal">None</span>, 
                            num_threads=<span class="hljs-number">16</span>, duration=<span class="hljs-number">60</span></span>):
        <span class="hljs-string">"""
        å¹¶å‘æŸ¥è¯¢æµ‹è¯•
        
        å‚æ•°:
            collection_name: é›†åˆåç§°
            query_vectors: æŸ¥è¯¢å‘é‡æ•°ç»„
            topk: è¿”å›Top-Kç»“æœ
            search_params: æœç´¢å‚æ•°
            num_threads: å¹¶å‘çº¿ç¨‹æ•°
            duration: æµ‹è¯•æŒç»­æ—¶é—´ï¼ˆç§’ï¼‰
        
        è¿”å›:
            result: åŒ…å«å¹¶å‘æ€§èƒ½æŒ‡æ ‡çš„å­—å…¸
        """</span>
        collection = Collection(collection_name)
        collection.load()
        
        <span class="hljs-keyword">if</span> search_params <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:
            search_params = {<span class="hljs-string">"metric_type"</span>: <span class="hljs-string">"L2"</span>, <span class="hljs-string">"params"</span>: {<span class="hljs-string">"nprobe"</span>: <span class="hljs-number">32</span>}}
        
        logger.info(<span class="hljs-string">f"\nå¼€å§‹å¹¶å‘æŸ¥è¯¢æµ‹è¯•"</span>)
        logger.info(<span class="hljs-string">f"  çº¿ç¨‹æ•°: <span class="hljs-subst">{num_threads}</span>"</span>)
        logger.info(<span class="hljs-string">f"  æŒç»­æ—¶é—´: <span class="hljs-subst">{duration}</span>ç§’"</span>)
        logger.info(<span class="hljs-string">f"  TopK: <span class="hljs-subst">{topk}</span>"</span>)
        logger.info(<span class="hljs-string">f"  æœç´¢å‚æ•°: <span class="hljs-subst">{search_params}</span>"</span>)
        
        <span class="hljs-comment"># å…±äº«å˜é‡</span>
        query_count = <span class="hljs-number">0</span>
        latencies = []
        errors = <span class="hljs-number">0</span>
        lock = threading.Lock()
        stop_flag = threading.Event()
        
        <span class="hljs-keyword">def</span> <span class="hljs-title function_">worker_thread</span>(<span class="hljs-params">thread_id</span>):
            <span class="hljs-string">"""å·¥ä½œçº¿ç¨‹å‡½æ•°"""</span>
            <span class="hljs-keyword">nonlocal</span> query_count, errors
            local_latencies = []
            local_count = <span class="hljs-number">0</span>
            
            <span class="hljs-keyword">while</span> <span class="hljs-keyword">not</span> stop_flag.is_set():
                <span class="hljs-keyword">try</span>:
                    <span class="hljs-comment"># éšæœºé€‰æ‹©æŸ¥è¯¢å‘é‡</span>
                    query_idx = np.random.randint(<span class="hljs-number">0</span>, <span class="hljs-built_in">len</span>(query_vectors))
                    query_vector = query_vectors[query_idx].tolist()
                    
                    <span class="hljs-comment"># æ‰§è¡ŒæŸ¥è¯¢</span>
                    start_time = time.time()
                    results = collection.search(
                        data=[query_vector],
                        anns_field=<span class="hljs-string">"embeddings"</span>,
                        param=search_params,
                        limit=topk
                    )
                    latency = (time.time() - start_time) * <span class="hljs-number">1000</span>
                    
                    local_latencies.append(latency)
                    local_count += <span class="hljs-number">1</span>
                    
                <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
                    <span class="hljs-keyword">with</span> lock:
                        errors += <span class="hljs-number">1</span>
                    <span class="hljs-keyword">if</span> errors &lt;= <span class="hljs-number">5</span>:  <span class="hljs-comment"># åªæ‰“å°å‰5ä¸ªé”™è¯¯</span>
                        logger.error(<span class="hljs-string">f"çº¿ç¨‹ <span class="hljs-subst">{thread_id}</span> æŸ¥è¯¢é”™è¯¯: <span class="hljs-subst">{e}</span>"</span>)
            
            <span class="hljs-comment"># çº¿ç¨‹ç»“æŸï¼Œåˆå¹¶ç»“æœ</span>
            <span class="hljs-keyword">with</span> lock:
                query_count += local_count
                latencies.extend(local_latencies)
        
        <span class="hljs-comment"># å¯åŠ¨çº¿ç¨‹æ± </span>
        logger.info(<span class="hljs-string">"å¯åŠ¨å·¥ä½œçº¿ç¨‹..."</span>)
        start_time = time.time()
        
        <span class="hljs-keyword">with</span> ThreadPoolExecutor(max_workers=num_threads) <span class="hljs-keyword">as</span> executor:
            futures = [executor.submit(worker_thread, i) 
                      <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(num_threads)]
            
            <span class="hljs-comment"># è¿è¡ŒæŒ‡å®šæ—¶é—´</span>
            time.sleep(duration)
            stop_flag.<span class="hljs-built_in">set</span>()
            
            <span class="hljs-comment"># ç­‰å¾…æ‰€æœ‰çº¿ç¨‹å®Œæˆ</span>
            <span class="hljs-keyword">for</span> future <span class="hljs-keyword">in</span> as_completed(futures):
                future.result()
        
        total_time = time.time() - start_time
        
        <span class="hljs-comment"># è®¡ç®—ç»Ÿè®¡æŒ‡æ ‡</span>
        latencies = np.array(latencies)
        result = {
            <span class="hljs-string">'num_threads'</span>: num_threads,
            <span class="hljs-string">'duration'</span>: duration,
            <span class="hljs-string">'total_queries'</span>: query_count,
            <span class="hljs-string">'errors'</span>: errors,
            <span class="hljs-string">'qps'</span>: query_count / total_time,
            <span class="hljs-string">'avg_latency_ms'</span>: <span class="hljs-built_in">float</span>(np.mean(latencies)),
            <span class="hljs-string">'p50_latency_ms'</span>: <span class="hljs-built_in">float</span>(np.percentile(latencies, <span class="hljs-number">50</span>)),
            <span class="hljs-string">'p95_latency_ms'</span>: <span class="hljs-built_in">float</span>(np.percentile(latencies, <span class="hljs-number">95</span>)),
            <span class="hljs-string">'p99_latency_ms'</span>: <span class="hljs-built_in">float</span>(np.percentile(latencies, <span class="hljs-number">99</span>)),
            <span class="hljs-string">'throughput_per_thread'</span>: query_count / total_time / num_threads
        }
        
        collection.release()
        
        logger.info(<span class="hljs-string">"\nå¹¶å‘æµ‹è¯•ç»“æœ:"</span>)
        logger.info(<span class="hljs-string">f"  æ€»æŸ¥è¯¢æ•°: <span class="hljs-subst">{query_count:,}</span>"</span>)
        logger.info(<span class="hljs-string">f"  æ€»QPS: <span class="hljs-subst">{result[<span class="hljs-string">'qps'</span>]:<span class="hljs-number">.2</span>f}</span>"</span>)
        logger.info(<span class="hljs-string">f"  å¹³å‡å»¶è¿Ÿ: <span class="hljs-subst">{result[<span class="hljs-string">'avg_latency_ms'</span>]:<span class="hljs-number">.2</span>f}</span>ms"</span>)
        logger.info(<span class="hljs-string">f"  P95å»¶è¿Ÿ: <span class="hljs-subst">{result[<span class="hljs-string">'p95_latency_ms'</span>]:<span class="hljs-number">.2</span>f}</span>ms"</span>)
        logger.info(<span class="hljs-string">f"  P99å»¶è¿Ÿ: <span class="hljs-subst">{result[<span class="hljs-string">'p99_latency_ms'</span>]:<span class="hljs-number">.2</span>f}</span>ms"</span>)
        logger.info(<span class="hljs-string">f"  æ¯çº¿ç¨‹åå: <span class="hljs-subst">{result[<span class="hljs-string">'throughput_per_thread'</span>]:<span class="hljs-number">.2</span>f}</span> qps"</span>)
        logger.info(<span class="hljs-string">f"  é”™è¯¯æ•°: <span class="hljs-subst">{errors}</span>"</span>)
        
        <span class="hljs-keyword">return</span> result
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">parameter_sweep_test</span>(<span class="hljs-params">self, collection_name, query_vectors,
                            topk_list=[<span class="hljs-number">10</span>, <span class="hljs-number">50</span>, <span class="hljs-number">100</span>],
                            nprobe_list=[<span class="hljs-number">10</span>, <span class="hljs-number">32</span>, <span class="hljs-number">64</span>, <span class="hljs-number">128</span>]</span>):
        <span class="hljs-string">"""
        å‚æ•°æ‰«ææµ‹è¯•
        æµ‹è¯•ä¸åŒTopKå’Œnprobeç»„åˆçš„æ€§èƒ½
        
        å‚æ•°:
            collection_name: é›†åˆåç§°
            query_vectors: æŸ¥è¯¢å‘é‡æ•°ç»„
            topk_list: TopKå€¼åˆ—è¡¨
            nprobe_list: nprobeå€¼åˆ—è¡¨
        
        è¿”å›:
            results: æµ‹è¯•ç»“æœåˆ—è¡¨
        """</span>
        logger.info(<span class="hljs-string">f"\nå¼€å§‹å‚æ•°æ‰«ææµ‹è¯•"</span>)
        logger.info(<span class="hljs-string">f"  TopKåˆ—è¡¨: <span class="hljs-subst">{topk_list}</span>"</span>)
        logger.info(<span class="hljs-string">f"  nprobeåˆ—è¡¨: <span class="hljs-subst">{nprobe_list}</span>"</span>)
        
        results = []
        
        <span class="hljs-keyword">for</span> topk <span class="hljs-keyword">in</span> topk_list:
            <span class="hljs-keyword">for</span> nprobe <span class="hljs-keyword">in</span> nprobe_list:
                logger.info(<span class="hljs-string">f"\næµ‹è¯•å‚æ•°ç»„åˆ: TopK=<span class="hljs-subst">{topk}</span>, nprobe=<span class="hljs-subst">{nprobe}</span>"</span>)
                
                search_params = {
                    <span class="hljs-string">"metric_type"</span>: <span class="hljs-string">"L2"</span>,
                    <span class="hljs-string">"params"</span>: {<span class="hljs-string">"nprobe"</span>: nprobe}
                }
                
                result = self.single_query_test(
                    collection_name=collection_name,
                    query_vectors=query_vectors[:<span class="hljs-number">100</span>],  <span class="hljs-comment"># ä½¿ç”¨100ä¸ªæŸ¥è¯¢</span>
                    topk=topk,
                    search_params=search_params,
                    num_warmup=<span class="hljs-number">5</span>
                )
                
                result[<span class="hljs-string">'topk'</span>] = topk
                result[<span class="hljs-string">'nprobe'</span>] = nprobe
                results.append(result)
        
        <span class="hljs-keyword">return</span> results

<span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():
    <span class="hljs-string">"""ä¸»å‡½æ•°"""</span>
    <span class="hljs-comment"># é€‰æ‹©ä¸€ä¸ªæµ‹è¯•é›†åˆ</span>
    connections.connect(<span class="hljs-string">"default"</span>, host=<span class="hljs-string">"localhost"</span>, port=<span class="hljs-string">"19530"</span>)
    collections = utility.list_collections()
    test_collections = [c <span class="hljs-keyword">for</span> c <span class="hljs-keyword">in</span> collections <span class="hljs-keyword">if</span> <span class="hljs-string">'test_dim512_scale1000000'</span> <span class="hljs-keyword">in</span> c]
    
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> test_collections:
        logger.error(<span class="hljs-string">"æœªæ‰¾åˆ°æµ‹è¯•é›†åˆï¼è¯·å…ˆè¿è¡Œæ•°æ®ç”Ÿæˆè„šæœ¬"</span>)
        <span class="hljs-keyword">return</span>
    
    collection_name = test_collections[<span class="hljs-number">0</span>]
    logger.info(<span class="hljs-string">f"ä½¿ç”¨é›†åˆ: <span class="hljs-subst">{collection_name}</span>"</span>)
    
    <span class="hljs-comment"># è·å–é›†åˆä¿¡æ¯</span>
    collection = Collection(collection_name)
    dim = collection.schema.fields[<span class="hljs-number">1</span>].params[<span class="hljs-string">'dim'</span>]
    logger.info(<span class="hljs-string">f"å‘é‡ç»´åº¦: <span class="hljs-subst">{dim}</span>"</span>)
    
    <span class="hljs-comment"># ç”ŸæˆæŸ¥è¯¢å‘é‡</span>
    logger.info(<span class="hljs-string">"ç”ŸæˆæŸ¥è¯¢å‘é‡..."</span>)
    query_vectors = np.random.randn(<span class="hljs-number">1000</span>, dim).astype(np.float32)
    norms = np.linalg.norm(query_vectors, axis=<span class="hljs-number">1</span>, keepdims=<span class="hljs-literal">True</span>)
    query_vectors = query_vectors / (norms + <span class="hljs-number">1e-10</span>)
    
    <span class="hljs-comment"># åˆ›å»ºæµ‹è¯•å¯¹è±¡</span>
    benchmark = QueryBenchmark()
    
    <span class="hljs-comment"># 1. å•çº¿ç¨‹æŸ¥è¯¢æµ‹è¯•</span>
    logger.info(<span class="hljs-string">"\n"</span> + <span class="hljs-string">"="</span>*<span class="hljs-number">70</span>)
    logger.info(<span class="hljs-string">"æµ‹è¯•1: å•çº¿ç¨‹æŸ¥è¯¢æ€§èƒ½"</span>)
    logger.info(<span class="hljs-string">"="</span>*<span class="hljs-number">70</span>)
    
    single_result = benchmark.single_query_test(
        collection_name=collection_name,
        query_vectors=query_vectors[:<span class="hljs-number">200</span>],
        topk=<span class="hljs-number">10</span>,
        search_params={<span class="hljs-string">"metric_type"</span>: <span class="hljs-string">"L2"</span>, <span class="hljs-string">"params"</span>: {<span class="hljs-string">"nprobe"</span>: <span class="hljs-number">32</span>}}
    )
    
    <span class="hljs-comment"># 2. å‚æ•°æ‰«ææµ‹è¯•</span>
    logger.info(<span class="hljs-string">"\n"</span> + <span class="hljs-string">"="</span>*<span class="hljs-number">70</span>)
    logger.info(<span class="hljs-string">"æµ‹è¯•2: å‚æ•°æ‰«æ"</span>)
    logger.info(<span class="hljs-string">"="</span>*<span class="hljs-number">70</span>)
    
    sweep_results = benchmark.parameter_sweep_test(
        collection_name=collection_name,
        query_vectors=query_vectors,
        topk_list=[<span class="hljs-number">10</span>, <span class="hljs-number">50</span>, <span class="hljs-number">100</span>],
        nprobe_list=[<span class="hljs-number">10</span>, <span class="hljs-number">32</span>, <span class="hljs-number">64</span>, <span class="hljs-number">128</span>]
    )
    
    <span class="hljs-comment"># 3. å¹¶å‘æŸ¥è¯¢æµ‹è¯•</span>
    logger.info(<span class="hljs-string">"\n"</span> + <span class="hljs-string">"="</span>*<span class="hljs-number">70</span>)
    logger.info(<span class="hljs-string">"æµ‹è¯•3: å¹¶å‘æŸ¥è¯¢æ€§èƒ½"</span>)
    logger.info(<span class="hljs-string">"="</span>*<span class="hljs-number">70</span>)
    
    concurrent_results = []
    <span class="hljs-keyword">for</span> num_threads <span class="hljs-keyword">in</span> [<span class="hljs-number">1</span>, <span class="hljs-number">4</span>, <span class="hljs-number">8</span>, <span class="hljs-number">16</span>, <span class="hljs-number">32</span>]:
        logger.info(<span class="hljs-string">f"\næµ‹è¯• <span class="hljs-subst">{num_threads}</span> çº¿ç¨‹å¹¶å‘..."</span>)
        result = benchmark.concurrent_query_test(
            collection_name=collection_name,
            query_vectors=query_vectors,
            topk=<span class="hljs-number">10</span>,
            search_params={<span class="hljs-string">"metric_type"</span>: <span class="hljs-string">"L2"</span>, <span class="hljs-string">"params"</span>: {<span class="hljs-string">"nprobe"</span>: <span class="hljs-number">32</span>}},
            num_threads=num_threads,
            duration=<span class="hljs-number">30</span>  <span class="hljs-comment"># æ¯ä¸ªå¹¶å‘åº¦æµ‹è¯•30ç§’</span>
        )
        concurrent_results.append(result)
    
    <span class="hljs-comment"># ä¿å­˜ç»“æœ</span>
    all_results = {
        <span class="hljs-string">'collection'</span>: collection_name,
        <span class="hljs-string">'dimension'</span>: dim,
        <span class="hljs-string">'single_thread'</span>: single_result,
        <span class="hljs-string">'parameter_sweep'</span>: sweep_results,
        <span class="hljs-string">'concurrent'</span>: concurrent_results
    }
    
    output_file = <span class="hljs-string">'query_performance_results.json'</span>
    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(output_file, <span class="hljs-string">'w'</span>) <span class="hljs-keyword">as</span> f:
        json.dump(all_results, f, indent=<span class="hljs-number">2</span>)
    
    logger.info(<span class="hljs-string">f"\næµ‹è¯•å®Œæˆï¼ç»“æœå·²ä¿å­˜åˆ° <span class="hljs-subst">{output_file}</span>"</span>)

<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    main()
EOF

chmod +x test_query_performance.py
</code></pre>
<p><strong>æ‰§è¡ŒæŸ¥è¯¢æµ‹è¯•ï¼š</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ‰§è¡ŒæŸ¥è¯¢æ€§èƒ½æµ‹è¯•</span>
python test_query_performance.py

<span class="hljs-comment"># æµ‹è¯•è¿‡ç¨‹ä¼šè¾“å‡ºè¯¦ç»†çš„æ€§èƒ½æŒ‡æ ‡</span>
<span class="hljs-comment"># é¢„è®¡è€—æ—¶ï¼šçº¦10-20åˆ†é’Ÿ</span>
</code></pre>
<p><strong>å•çº¿ç¨‹æŸ¥è¯¢æ€§èƒ½ï¼ˆåŸºå‡†æµ‹è¯•ï¼‰</strong></p>

































<table><thead><tr><th>æŒ‡æ ‡</th><th>æ•°å€¼</th></tr></thead><tbody><tr><td>å¹³å‡å»¶è¿Ÿ</td><td>1.66ms</td></tr><tr><td>P50å»¶è¿Ÿ</td><td>1.65ms</td></tr><tr><td>P95å»¶è¿Ÿ</td><td>1.86ms</td></tr><tr><td>P99å»¶è¿Ÿ</td><td>1.99ms</td></tr><tr><td>QPS</td><td>600.88</td></tr><tr><td>æµ‹è¯•å‚æ•°</td><td>TopK=10, nprobe=32</td></tr></tbody></table>
<p><strong>å‚æ•°æ‰«ææµ‹è¯•ç»“æœ</strong></p>


























































































































<table><thead><tr><th>TopK</th><th>nprobe</th><th>å¹³å‡å»¶è¿Ÿ(ms)</th><th>P50(ms)</th><th>P95(ms)</th><th>P99(ms)</th><th>QPS</th></tr></thead><tbody><tr><td>10</td><td>10</td><td>1.61</td><td>1.6</td><td>1.76</td><td>1.81</td><td>622.83</td></tr><tr><td>10</td><td>32</td><td>1.65</td><td>1.65</td><td>1.85</td><td>1.87</td><td>606.22</td></tr><tr><td>10</td><td>64</td><td>1.57</td><td>1.58</td><td>1.68</td><td>1.69</td><td>635.18</td></tr><tr><td>10</td><td>128</td><td>1.6</td><td>1.58</td><td>1.77</td><td>1.83</td><td>625.66</td></tr><tr><td>50</td><td>10</td><td>2.12</td><td>2.1</td><td>2.37</td><td>2.48</td><td>471.92</td></tr><tr><td>50</td><td>32</td><td>2.11</td><td>2.11</td><td>2.32</td><td>2.43</td><td>472.99</td></tr><tr><td>50</td><td>64</td><td>2.12</td><td>2.09</td><td>2.32</td><td>2.35</td><td>472.11</td></tr><tr><td>50</td><td>128</td><td>2.15</td><td>2.16</td><td>2.29</td><td>2.34</td><td>464.14</td></tr><tr><td>100</td><td>10</td><td>2.8</td><td>2.8</td><td>3.02</td><td>3.06</td><td>357.3</td></tr><tr><td>100</td><td>32</td><td>2.8</td><td>2.79</td><td>3.01</td><td>3.08</td><td>357.09</td></tr><tr><td>100</td><td>64</td><td>2.78</td><td>2.77</td><td>2.99</td><td>3.08</td><td>359.2</td></tr><tr><td>100</td><td>128</td><td>2.82</td><td>2.82</td><td>3.05</td><td>3.09</td><td>354.07</td></tr></tbody></table>
<p><strong>å¹¶å‘æŸ¥è¯¢æ€§èƒ½æµ‹è¯•</strong></p>

































































<table><thead><tr><th>çº¿ç¨‹æ•°</th><th>æ€»æŸ¥è¯¢æ•°</th><th>æ€»QPS</th><th>å¹³å‡å»¶è¿Ÿ(ms)</th><th>P95(ms)</th><th>P99(ms)</th><th>æ¯çº¿ç¨‹QPS</th><th>é”™è¯¯æ•°</th></tr></thead><tbody><tr><td>1</td><td>19,865</td><td>661.7</td><td>1.47</td><td>1.62</td><td>1.71</td><td>661.7</td><td>0</td></tr><tr><td>4</td><td>52,238</td><td>1739.27</td><td>2.25</td><td>2.87</td><td>3.34</td><td>434.82</td><td>0</td></tr><tr><td>8</td><td>49,669</td><td>1653.47</td><td>4.79</td><td>7.56</td><td>9.54</td><td>206.68</td><td>0</td></tr><tr><td>16</td><td>48,785</td><td>1624.87</td><td>9.79</td><td>17.01</td><td>22.57</td><td>101.55</td><td>0</td></tr><tr><td>32</td><td>47,811</td><td>1590.13</td><td>20.05</td><td>37.5</td><td>50.09</td><td>49.69</td><td>0</td></tr></tbody></table>
<p>æœ¬æ¬¡æµ‹è¯•é’ˆå¯¹100ä¸‡æ¡512ç»´å‘é‡æ•°æ®è¿›è¡Œäº†å…¨é¢çš„æŸ¥è¯¢æ€§èƒ½è¯„ä¼°,å¾—å‡ºä»¥ä¸‹å…³é”®ç»“è®º:</p>
<ol>
<li><strong>å•çº¿ç¨‹æ€§èƒ½è¡¨ç°ä¼˜å¼‚</strong></li>
</ol>
<ul>
<li>åœ¨TopK=10ã€nprobe=32çš„æ ‡å‡†é…ç½®ä¸‹,å¹³å‡æŸ¥è¯¢å»¶è¿Ÿä»…ä¸º<strong>1.66ms</strong>,å•çº¿ç¨‹QPSè¾¾åˆ°<strong>600+</strong> ,P99å»¶è¿Ÿæ§åˆ¶åœ¨2msä»¥å†…,è¡¨ç°å‡ºè‰²çš„æŸ¥è¯¢å“åº”é€Ÿåº¦ã€‚</li>
</ul>
<ol start="2">
<li><strong>nprobeå‚æ•°å½±å“æœ‰é™</strong></li>
</ol>
<ul>
<li>ä»¤äººæ„å¤–çš„æ˜¯,nprobeä»10å¢åŠ åˆ°128,å¯¹æŸ¥è¯¢å»¶è¿Ÿçš„å½±å“æå°(1.57ms~1.65ms),è¿™è¡¨æ˜åœ¨å½“å‰æ•°æ®è§„æ¨¡ä¸‹,<strong>nprobe=64</strong>æ˜¯æ€§ä»·æ¯”æœ€ä¼˜é€‰æ‹©(QPS=635.18)ã€‚è¿‡é«˜çš„nprobeå€¼(å¦‚128)åè€Œå¯èƒ½å› è®¡ç®—å¼€é”€ç•¥å¾®é™ä½æ€§èƒ½ã€‚</li>
</ul>
<ol start="3">
<li><strong>TopKæ˜¯ä¸»è¦æ€§èƒ½ç“¶é¢ˆ</strong></li>
</ol>
<ul>
<li>TopKå€¼å¯¹æ€§èƒ½å½±å“æ˜¾è‘—:ä»10å¢åŠ åˆ°50,å»¶è¿Ÿå¢åŠ <strong>32%</strong> ;å¢åŠ åˆ°100æ—¶,å»¶è¿Ÿå¢åŠ <strong>69%</strong> ,QPSä¸‹é™è‡³357ã€‚è¿™è¯´æ˜<strong>è¿”å›ç»“æœæ•°é‡æ˜¯æŸ¥è¯¢æ€§èƒ½çš„å…³é”®å› ç´ </strong>,å®é™…åº”ç”¨ä¸­åº”æ ¹æ®ä¸šåŠ¡éœ€æ±‚è°¨æ…è®¾ç½®TopKå€¼ã€‚</li>
</ul>
<ol start="4">
<li><strong>å¹¶å‘æ‰©å±•æ€§å‘ˆç°éçº¿æ€§ç‰¹å¾</strong></li>
</ol>
<ul>
<li>4çº¿ç¨‹æ—¶è¾¾åˆ°å³°å€¼QPS(<strong>1739</strong>),æ‰©å±•æ•ˆç‡65.7%,è¡¨ç°è‰¯å¥½</li>
<li>8çº¿ç¨‹åå‡ºç°æ€§èƒ½æ‹ç‚¹,QPSå¼€å§‹ä¸‹é™,å»¶è¿Ÿæ€¥å‰§ä¸Šå‡</li>
<li>16-32çº¿ç¨‹æ—¶å‡ºç°æ˜æ˜¾çš„èµ„æºç«äº‰,æ¯çº¿ç¨‹ååé‡å¤§å¹…ä¸‹é™,P99å»¶è¿Ÿé£™å‡è‡³50ms</li>
</ul>
<ol start="5">
<li><strong>æœ€ä½³å®è·µå»ºè®®</strong></li>
</ol>
<ul>
<li><strong>æ¨èé…ç½®</strong>: TopK=10, nprobe=64, å¹¶å‘çº¿ç¨‹æ•°=4</li>
<li><strong>é¢„æœŸæ€§èƒ½</strong>: QPSâ‰ˆ1700, P99å»¶è¿Ÿ&lt;4ms</li>
<li><strong>æ‰©å±•ç­–ç•¥</strong>: å•æœºæœ€ä¼˜å¹¶å‘åº¦ä¸º4-8çº¿ç¨‹,è¶…è¿‡æ­¤èŒƒå›´å»ºè®®é‡‡ç”¨åˆ†å¸ƒå¼éƒ¨ç½²æˆ–è¯»å†™åˆ†ç¦»æ¶æ„</li>
</ul>
<p><strong>æµ‹è¯•ç»“è®º</strong>: è¯¥Milvuséƒ¨ç½²åœ¨ç™¾ä¸‡çº§æ•°æ®è§„æ¨¡ä¸‹è¡¨ç°ç¨³å®šå¯é ,å•çº¿ç¨‹å»¶è¿Ÿä¼˜ç§€,ä½†å¹¶å‘æ‰©å±•æ€§å—é™äºå•æœºèµ„æº,å»ºè®®åœ¨4-8çº¿ç¨‹èŒƒå›´å†…ä½¿ç”¨ä»¥è·å¾—æœ€ä½³æ€§ä»·æ¯”ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dd7efca2fb6c4d678a47f6e110fb1aa5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aaS5aS0Njc1:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765607314&amp;x-signature=n1nwGlT8BrwBLRd5tHe7R3hF6uQ%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/35d3e2eac50c42fcbd0196cc7e847a1f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aaS5aS0Njc1:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765607314&amp;x-signature=xIRNOhtUru7JJi5tQXw5W%2FH%2FFEE%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c1de139b54084bf0850b610833177e92~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aaS5aS0Njc1:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765607314&amp;x-signature=iZDy5PXT9Wup8m%2B%2BjxVhirw6YCI%3D" alt="" loading="lazy"/></p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"collection"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"test_dim512_scale1000000"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"dimension"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">512</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"single_thread"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"num_queries"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">200</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"topk"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">10</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"search_params"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"metric_type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"L2"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"params"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"nprobe"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">32</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"avg_latency_ms"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1.6642296314239502</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"median_latency_ms"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1.6518831253051758</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"p50_latency_ms"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1.6518831253051758</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"p95_latency_ms"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1.864945888519287</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"p99_latency_ms"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1.9887042045593257</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"min_latency_ms"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1.4128684997558594</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"max_latency_ms"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2.0601749420166016</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"qps"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">600.8786174203489</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"parameter_sweep"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"num_queries"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">100</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"topk"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">10</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"search_params"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"metric_type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"L2"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"params"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
          <span class="hljs-attr">"nprobe"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">10</span>
        <span class="hljs-punctuation">}</span>
      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"avg_latency_ms"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1.6055727005004883</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"median_latency_ms"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1.5993118286132812</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"p50_latency_ms"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1.5993118286132812</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"p95_latency_ms"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1.7591357231140137</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"p99_latency_ms"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1.8122625350952148</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"min_latency_ms"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1.4469623565673828</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"max_latency_ms"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1.8165111541748047</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"qps"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">622.8307193366458</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"nprobe"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">10</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"num_queries"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">100</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"topk"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">10</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"search_params"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"metric_type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"L2"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"params"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
          <span class="hljs-attr">"nprobe"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">32</span>
        <span class="hljs-punctuation">}</span>
      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"avg_latency_ms"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1.6495585441589355</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"median_latency_ms"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1.6471147537231445</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"p50_latency_ms"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1.6471147537231445</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"p95_latency_ms"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1.846158504486084</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"p99_latency_ms"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1.867046356201172</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"min_latency_ms"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1.4719963073730469</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"max_latency_ms"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1.913309097290039</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"qps"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">606.2228003613369</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"nprobe"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">32</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"num_queries"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">100</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"topk"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">10</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"search_params"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"metric_type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"L2"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"params"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
          <span class="hljs-attr">"nprobe"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">64</span>
        <span class="hljs-punctuation">}</span>
      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"avg_latency_ms"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1.5743613243103027</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"median_latency_ms"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1.576066017150879</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"p50_latency_ms"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1.576066017150879</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"p95_latency_ms"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1.6779303550720215</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"p99_latency_ms"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1.69144868850708</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"min_latency_ms"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1.4500617980957031</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"max_latency_ms"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1.7020702362060547</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"qps"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">635.1782050020065</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"nprobe"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">64</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"num_queries"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">100</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"topk"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">10</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"search_params"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"metric_type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"L2"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"params"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
          <span class="hljs-attr">"nprobe"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">128</span>
        <span class="hljs-punctuation">}</span>
      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"avg_latency_ms"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1.5983080863952637</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"median_latency_ms"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1.5832185745239258</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"p50_latency_ms"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1.5832185745239258</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"p95_latency_ms"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1.7655611038208008</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"p99_latency_ms"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1.8313407897949219</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"min_latency_ms"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1.428365707397461</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"max_latency_ms"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1.8360614776611328</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"qps"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">625.6616033616805</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"nprobe"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">128</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"num_queries"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">100</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"topk"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">50</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"search_params"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"metric_type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"L2"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"params"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
          <span class="hljs-attr">"nprobe"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">10</span>
        <span class="hljs-punctuation">}</span>
      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"avg_latency_ms"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2.119004726409912</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"median_latency_ms"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2.099156379699707</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"p50_latency_ms"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2.099156379699707</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"p95_latency_ms"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2.366209030151367</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"p99_latency_ms"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2.4835991859436044</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"min_latency_ms"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1.93023681640625</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"max_latency_ms"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2.62451171875</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"qps"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">471.91966470704057</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"nprobe"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">10</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"num_queries"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">100</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"topk"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">50</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"search_params"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"metric_type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"L2"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"params"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
          <span class="hljs-attr">"nprobe"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">32</span>
        <span class="hljs-punctuation">}</span>
      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"avg_latency_ms"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2.1141982078552246</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"median_latency_ms"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2.105116844177246</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"p50_latency_ms"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2.105116844177246</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"p95_latency_ms"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2.316570281982422</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"p99_latency_ms"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2.4281954765319824</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"min_latency_ms"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1.8744468688964844</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"max_latency_ms"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2.4657249450683594</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"qps"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">472.9925492721247</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"nprobe"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">32</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"num_queries"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">100</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"topk"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">50</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"search_params"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"metric_type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"L2"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"params"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
          <span class="hljs-attr">"nprobe"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">64</span>
        <span class="hljs-punctuation">}</span>
      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"avg_latency_ms"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2.1181440353393555</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"median_latency_ms"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2.093791961669922</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"p50_latency_ms"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2.093791961669922</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"p95_latency_ms"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2.3168325424194336</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"p99_latency_ms"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2.3538184165954594</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"min_latency_ms"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1.93023681640625</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"max_latency_ms"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2.4394989013671875</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"qps"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">472.11142552908893</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"nprobe"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">64</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"num_queries"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">100</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"topk"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">50</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"search_params"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"metric_type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"L2"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"params"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
          <span class="hljs-attr">"nprobe"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">128</span>
        <span class="hljs-punctuation">}</span>
      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"avg_latency_ms"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2.154521942138672</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"median_latency_ms"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2.159714698791504</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"p50_latency_ms"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2.159714698791504</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"p95_latency_ms"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2.286696434020996</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"p99_latency_ms"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2.3373866081237793</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"min_latency_ms"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1.9516944885253906</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"max_latency_ms"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2.354145050048828</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"qps"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">464.1400862259758</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"nprobe"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">128</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"num_queries"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">100</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"topk"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">100</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"search_params"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"metric_type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"L2"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"params"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
          <span class="hljs-attr">"nprobe"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">10</span>
        <span class="hljs-punctuation">}</span>
      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"avg_latency_ms"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2.798793315887451</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"median_latency_ms"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2.797245979309082</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"p50_latency_ms"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2.797245979309082</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"p95_latency_ms"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">3.018772602081299</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"p99_latency_ms"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">3.0556988716125493</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"min_latency_ms"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2.5267601013183594</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"max_latency_ms"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">3.115415573120117</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"qps"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">357.29683729179425</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"nprobe"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">10</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"num_queries"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">100</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"topk"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">100</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"search_params"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"metric_type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"L2"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"params"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
          <span class="hljs-attr">"nprobe"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">32</span>
        <span class="hljs-punctuation">}</span>
      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"avg_latency_ms"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2.800414562225342</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"median_latency_ms"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2.790093421936035</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"p50_latency_ms"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2.790093421936035</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"p95_latency_ms"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">3.009486198425293</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"p99_latency_ms"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">3.0827140808105473</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"min_latency_ms"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2.5420188903808594</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"max_latency_ms"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">3.1261444091796875</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"qps"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">357.08998713581633</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"nprobe"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">32</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"num_queries"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">100</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"topk"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">100</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"search_params"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"metric_type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"L2"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"params"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
          <span class="hljs-attr">"nprobe"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">64</span>
        <span class="hljs-punctuation">}</span>
      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"avg_latency_ms"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2.783951759338379</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"median_latency_ms"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2.768397331237793</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"p50_latency_ms"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2.768397331237793</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"p95_latency_ms"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2.9949426651000977</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"p99_latency_ms"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">3.0798172950744633</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"min_latency_ms"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2.5205612182617188</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"max_latency_ms"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">3.1905174255371094</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"qps"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">359.2016264813638</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"nprobe"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">64</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"num_queries"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">100</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"topk"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">100</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"search_params"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"metric_type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"L2"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"params"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
          <span class="hljs-attr">"nprobe"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">128</span>
        <span class="hljs-punctuation">}</span>
      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"avg_latency_ms"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2.8243327140808105</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"median_latency_ms"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2.820253372192383</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"p50_latency_ms"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2.820253372192383</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"p95_latency_ms"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">3.054928779602051</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"p99_latency_ms"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">3.0915403366088876</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"min_latency_ms"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2.549886703491211</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"max_latency_ms"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">3.2770633697509766</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"qps"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">354.0659338804046</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"nprobe"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">128</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"concurrent"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"num_threads"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"duration"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">30</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"total_queries"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">19865</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"errors"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"qps"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">661.695394056443</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"avg_latency_ms"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1.4736831323223754</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"p50_latency_ms"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1.4655590057373047</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"p95_latency_ms"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1.6155242919921875</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"p99_latency_ms"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1.711130142211914</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"throughput_per_thread"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">661.695394056443</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"num_threads"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">4</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"duration"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">30</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"total_queries"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">52238</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"errors"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"qps"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1739.2685188726489</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"avg_latency_ms"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2.253283174211642</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"p50_latency_ms"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2.2110939025878906</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"p95_latency_ms"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2.8720259666442858</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"p99_latency_ms"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">3.342990875244138</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"throughput_per_thread"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">434.8171297181622</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"num_threads"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">8</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"duration"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">30</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"total_queries"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">49669</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"errors"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"qps"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1653.4718075706885</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"avg_latency_ms"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">4.787959452279658</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"p50_latency_ms"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">4.383087158203125</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"p95_latency_ms"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">7.564115524291988</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"p99_latency_ms"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">9.537649154663084</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"throughput_per_thread"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">206.68397594633606</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"num_threads"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">16</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"duration"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">30</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"total_queries"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">48785</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"errors"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"qps"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1624.871357630561</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"avg_latency_ms"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">9.791473341950924</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"p50_latency_ms"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">8.623838424682617</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"p95_latency_ms"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">17.010784149169915</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"p99_latency_ms"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">22.57279396057129</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"throughput_per_thread"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">101.55445985191007</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"num_threads"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">32</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"duration"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">30</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"total_queries"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">47811</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"errors"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"qps"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1590.1285864040674</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"avg_latency_ms"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">20.054343075307546</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"p50_latency_ms"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">17.479419708251953</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"p95_latency_ms"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">37.49656677246094</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"p99_latency_ms"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">50.090718269348166</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"throughput_per_thread"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">49.691518325127106</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h2 data-id="heading-19">ä¸ƒã€å¬å›ç‡æµ‹è¯•</h2>
<h3 data-id="heading-20">7.1 å¬å›ç‡æµ‹è¯•åŸç†</h3>
<p><strong>å¬å›ç‡ï¼ˆRecallï¼‰å®šä¹‰ï¼š</strong></p>
<pre><code class="hljs language-ini" lang="ini">Recall@<span class="hljs-attr">K</span> = |æ£€ç´¢ç»“æœ âˆ© çœŸå®æœ€è¿‘é‚»| / K
</code></pre>
<p>å¬å›ç‡æµ‹è¯•éœ€è¦ï¼š</p>
<ol>
<li>è®¡ç®—ç²¾ç¡®çš„æœ€è¿‘é‚»ï¼ˆGround Truthï¼‰</li>
<li>ä½¿ç”¨è¿‘ä¼¼ç´¢å¼•è¿›è¡Œæœç´¢</li>
<li>æ¯”è¾ƒä¸¤è€…çš„äº¤é›†</li>
</ol>
<h3 data-id="heading-21">7.2 åˆ›å»ºå¬å›ç‡æµ‹è¯•è„šæœ¬</h3>
<pre><code class="hljs language-python" lang="python">cat &gt; test_recall.py &lt;&lt; <span class="hljs-string">'EOF'</span>
<span class="hljs-comment">#!/usr/bin/env python3</span>
<span class="hljs-string">"""
Milvus å¬å›ç‡æµ‹è¯•ï¼ˆä¿®å¤ç‰ˆ - æ­£ç¡®å¤„ç†é›†åˆåŠ è½½çŠ¶æ€ï¼‰
"""</span>

<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
<span class="hljs-keyword">from</span> pymilvus <span class="hljs-keyword">import</span> connections, Collection, utility
<span class="hljs-keyword">import</span> logging
<span class="hljs-keyword">import</span> json
<span class="hljs-keyword">from</span> sklearn.metrics.pairwise <span class="hljs-keyword">import</span> euclidean_distances
<span class="hljs-keyword">import</span> time

logging.basicConfig(
    level=logging.INFO,
    <span class="hljs-built_in">format</span>=<span class="hljs-string">'%(asctime)s - %(levelname)s - %(message)s'</span>
)
logger = logging.getLogger(__name__)

<span class="hljs-keyword">class</span> <span class="hljs-title class_">RecallBenchmark</span>:
    <span class="hljs-string">"""å¬å›ç‡æµ‹è¯•ç±»"""</span>
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, host=<span class="hljs-string">"localhost"</span>, port=<span class="hljs-string">"19530"</span></span>):
        connections.connect(<span class="hljs-string">"default"</span>, host=host, port=port)
        logger.info(<span class="hljs-string">"è¿æ¥åˆ° Milvus æˆåŠŸ"</span>)
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">load_base_vectors</span>(<span class="hljs-params">self, collection_name, max_vectors=<span class="hljs-number">100000</span></span>):
        <span class="hljs-string">"""åŠ è½½åŸºç¡€å‘é‡æ•°æ®"""</span>
        collection = Collection(collection_name)
        collection.load()
        
        num_entities = collection.num_entities
        load_count = <span class="hljs-built_in">min</span>(num_entities, max_vectors)
        
        logger.info(<span class="hljs-string">f"åŠ è½½åŸºç¡€å‘é‡æ•°æ®..."</span>)
        logger.info(<span class="hljs-string">f"  é›†åˆæ€»æ•°: <span class="hljs-subst">{num_entities:,}</span>"</span>)
        logger.info(<span class="hljs-string">f"  åŠ è½½æ•°é‡: <span class="hljs-subst">{load_count:,}</span>"</span>)
        
        <span class="hljs-comment"># ç›´æ¥æŸ¥è¯¢è·å–æ•°æ®</span>
        logger.info(<span class="hljs-string">"æŸ¥è¯¢å‘é‡æ•°æ®..."</span>)
        results = collection.query(
            expr=<span class="hljs-string">"id &gt;= 0"</span>,
            output_fields=[<span class="hljs-string">"id"</span>, <span class="hljs-string">"embeddings"</span>],
            limit=load_count
        )
        
        <span class="hljs-keyword">if</span> results <span class="hljs-keyword">and</span> <span class="hljs-built_in">len</span>(results) &gt; <span class="hljs-number">0</span>:
            vector_ids = [item[<span class="hljs-string">'id'</span>] <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> results]
            base_vectors = np.array([item[<span class="hljs-string">'embeddings'</span>] <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> results])
            logger.info(<span class="hljs-string">f"æˆåŠŸåŠ è½½ <span class="hljs-subst">{<span class="hljs-built_in">len</span>(base_vectors):,}</span> ä¸ªå‘é‡"</span>)
            
            <span class="hljs-comment"># æŸ¥è¯¢å®Œæˆåé‡Šæ”¾é›†åˆ</span>
            collection.release()
            <span class="hljs-keyword">return</span> base_vectors, vector_ids
        
        <span class="hljs-keyword">raise</span> Exception(<span class="hljs-string">"æ— æ³•åŠ è½½å‘é‡æ•°æ®"</span>)
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">compute_ground_truth</span>(<span class="hljs-params">self, base_vectors, query_vectors, topk=<span class="hljs-number">100</span></span>):
        <span class="hljs-string">"""è®¡ç®—ç²¾ç¡®çš„æœ€è¿‘é‚»ï¼ˆGround Truthï¼‰"""</span>
        <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(base_vectors) == <span class="hljs-number">0</span>:
            <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">"åŸºç¡€å‘é‡é›†ä¸ºç©º"</span>)
        
        logger.info(<span class="hljs-string">f"è®¡ç®—Ground Truth (æš´åŠ›æœç´¢)..."</span>)
        logger.info(<span class="hljs-string">f"  åŸºç¡€å‘é‡æ•°: <span class="hljs-subst">{<span class="hljs-built_in">len</span>(base_vectors):,}</span>"</span>)
        logger.info(<span class="hljs-string">f"  æŸ¥è¯¢å‘é‡æ•°: <span class="hljs-subst">{<span class="hljs-built_in">len</span>(query_vectors):,}</span>"</span>)
        logger.info(<span class="hljs-string">f"  TopK: <span class="hljs-subst">{topk}</span>"</span>)
        
        start_time = time.time()
        distances = euclidean_distances(query_vectors, base_vectors)
        ground_truth = np.argsort(distances, axis=<span class="hljs-number">1</span>)[:, :topk]
        
        compute_time = time.time() - start_time
        logger.info(<span class="hljs-string">f"Ground Truthè®¡ç®—å®Œæˆï¼Œè€—æ—¶: <span class="hljs-subst">{compute_time:<span class="hljs-number">.2</span>f}</span>s"</span>)
        
        <span class="hljs-keyword">return</span> ground_truth
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">calculate_recall</span>(<span class="hljs-params">self, search_results, ground_truth, vector_ids, topk</span>):
        <span class="hljs-string">"""è®¡ç®—å¬å›ç‡"""</span>
        recalls = []
        
        <span class="hljs-keyword">for</span> i, result <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(search_results):
            retrieved_ids = <span class="hljs-built_in">set</span>([hit.<span class="hljs-built_in">id</span> <span class="hljs-keyword">for</span> hit <span class="hljs-keyword">in</span> result[:topk]])
            true_indices = ground_truth[i][:topk]
            true_ids = <span class="hljs-built_in">set</span>([vector_ids[idx] <span class="hljs-keyword">for</span> idx <span class="hljs-keyword">in</span> true_indices])
            intersection = <span class="hljs-built_in">len</span>(retrieved_ids &amp; true_ids)
            recall = intersection / topk
            recalls.append(recall)
        
        <span class="hljs-keyword">return</span> np.mean(recalls)
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">test_index_recall</span>(<span class="hljs-params">self, collection_name, index_config, 
                         query_vectors, ground_truth, vector_ids,
                         topk_list=[<span class="hljs-number">10</span>, <span class="hljs-number">50</span>, <span class="hljs-number">100</span>],
                         param_values=<span class="hljs-literal">None</span></span>):
        <span class="hljs-string">"""æµ‹è¯•ç‰¹å®šç´¢å¼•çš„å¬å›ç‡"""</span>
        collection = Collection(collection_name)
        
        <span class="hljs-comment"># å…ˆé‡Šæ”¾é›†åˆï¼ˆå¦‚æœå·²åŠ è½½ï¼‰</span>
        <span class="hljs-keyword">try</span>:
            collection.release()
            logger.info(<span class="hljs-string">"é‡Šæ”¾é›†åˆ"</span>)
            time.sleep(<span class="hljs-number">2</span>)
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            logger.debug(<span class="hljs-string">f"é‡Šæ”¾é›†åˆæ—¶å‡ºé”™ï¼ˆå¯èƒ½æœªåŠ è½½ï¼‰: <span class="hljs-subst">{e}</span>"</span>)
        
        <span class="hljs-comment"># åˆ é™¤æ—§ç´¢å¼•</span>
        logger.info(<span class="hljs-string">f"æ„å»ºç´¢å¼•: <span class="hljs-subst">{index_config[<span class="hljs-string">'index_type'</span>]}</span>"</span>)
        <span class="hljs-keyword">try</span>:
            <span class="hljs-keyword">if</span> collection.has_index():
                collection.drop_index()
                logger.info(<span class="hljs-string">"åˆ é™¤æ—§ç´¢å¼•"</span>)
                time.sleep(<span class="hljs-number">2</span>)
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            logger.warning(<span class="hljs-string">f"åˆ é™¤ç´¢å¼•æ—¶å‡ºé”™: <span class="hljs-subst">{e}</span>"</span>)
        
        <span class="hljs-comment"># åˆ›å»ºæ–°ç´¢å¼•</span>
        <span class="hljs-keyword">try</span>:
            collection.create_index(
                field_name=<span class="hljs-string">"embeddings"</span>,
                index_params=index_config
            )
            logger.info(<span class="hljs-string">"ç´¢å¼•åˆ›å»ºæˆåŠŸ"</span>)
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            logger.error(<span class="hljs-string">f"åˆ›å»ºç´¢å¼•å¤±è´¥: <span class="hljs-subst">{e}</span>"</span>)
            <span class="hljs-keyword">return</span> []
        
        <span class="hljs-comment"># ç­‰å¾…ç´¢å¼•æ„å»ºå®Œæˆ</span>
        logger.info(<span class="hljs-string">"ç­‰å¾…ç´¢å¼•æ„å»ºå®Œæˆ..."</span>)
        max_wait = <span class="hljs-number">300</span>  <span class="hljs-comment"># æœ€å¤šç­‰å¾…5åˆ†é’Ÿ</span>
        wait_time = <span class="hljs-number">0</span>
        <span class="hljs-keyword">while</span> wait_time &lt; max_wait:
            <span class="hljs-keyword">try</span>:
                progress = utility.index_building_progress(collection_name)
                pending = progress.get(<span class="hljs-string">'pending_index_rows'</span>, <span class="hljs-number">0</span>)
                total = progress.get(<span class="hljs-string">'total_rows'</span>, <span class="hljs-number">0</span>)
                
                <span class="hljs-keyword">if</span> pending == <span class="hljs-number">0</span>:
                    logger.info(<span class="hljs-string">"ç´¢å¼•æ„å»ºå®Œæˆ"</span>)
                    <span class="hljs-keyword">break</span>
                
                <span class="hljs-keyword">if</span> total &gt; <span class="hljs-number">0</span>:
                    percent = (total - pending) / total * <span class="hljs-number">100</span>
                    logger.info(<span class="hljs-string">f"  è¿›åº¦: <span class="hljs-subst">{percent:<span class="hljs-number">.1</span>f}</span>% (<span class="hljs-subst">{total-pending}</span>/<span class="hljs-subst">{total}</span>)"</span>)
                
                time.sleep(<span class="hljs-number">5</span>)
                wait_time += <span class="hljs-number">5</span>
            <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
                logger.warning(<span class="hljs-string">f"æ£€æŸ¥ç´¢å¼•è¿›åº¦æ—¶å‡ºé”™: <span class="hljs-subst">{e}</span>"</span>)
                time.sleep(<span class="hljs-number">5</span>)
                wait_time += <span class="hljs-number">5</span>
        
        <span class="hljs-comment"># åŠ è½½é›†åˆ</span>
        <span class="hljs-keyword">try</span>:
            collection.load()
            logger.info(<span class="hljs-string">"é›†åˆåŠ è½½æˆåŠŸ"</span>)
            time.sleep(<span class="hljs-number">5</span>)  <span class="hljs-comment"># ç­‰å¾…åŠ è½½å®Œæˆ</span>
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            logger.error(<span class="hljs-string">f"åŠ è½½é›†åˆå¤±è´¥: <span class="hljs-subst">{e}</span>"</span>)
            <span class="hljs-keyword">return</span> []
        
        <span class="hljs-comment"># ç¡®å®šæœç´¢å‚æ•°</span>
        index_type = index_config[<span class="hljs-string">'index_type'</span>]
        <span class="hljs-keyword">if</span> index_type.startswith(<span class="hljs-string">'IVF'</span>):
            param_name = <span class="hljs-string">'nprobe'</span>
            <span class="hljs-keyword">if</span> param_values <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:
                param_values = [<span class="hljs-number">10</span>, <span class="hljs-number">32</span>, <span class="hljs-number">64</span>, <span class="hljs-number">128</span>]
        <span class="hljs-keyword">elif</span> index_type == <span class="hljs-string">'HNSW'</span>:
            param_name = <span class="hljs-string">'ef'</span>
            <span class="hljs-keyword">if</span> param_values <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:
                param_values = [<span class="hljs-number">32</span>, <span class="hljs-number">64</span>, <span class="hljs-number">128</span>, <span class="hljs-number">256</span>]
        <span class="hljs-keyword">else</span>:
            param_name = <span class="hljs-string">'search_k'</span>
            <span class="hljs-keyword">if</span> param_values <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:
                param_values = [<span class="hljs-number">100</span>, <span class="hljs-number">200</span>, <span class="hljs-number">500</span>]
        
        results = []
        
        <span class="hljs-comment"># æµ‹è¯•ä¸åŒçš„æœç´¢å‚æ•°</span>
        <span class="hljs-keyword">for</span> param_value <span class="hljs-keyword">in</span> param_values:
            logger.info(<span class="hljs-string">f"\næµ‹è¯•å‚æ•°: <span class="hljs-subst">{param_name}</span>=<span class="hljs-subst">{param_value}</span>"</span>)
            
            search_params = {
                <span class="hljs-string">"metric_type"</span>: <span class="hljs-string">"L2"</span>,
                <span class="hljs-string">"params"</span>: {param_name: param_value}
            }
            
            <span class="hljs-comment"># å¯¹æ¯ä¸ªTopKå€¼æµ‹è¯•</span>
            <span class="hljs-keyword">for</span> topk <span class="hljs-keyword">in</span> topk_list:
                <span class="hljs-keyword">try</span>:
                    <span class="hljs-comment"># æ‰§è¡Œæœç´¢</span>
                    search_results = collection.search(
                        data=query_vectors.tolist(),
                        anns_field=<span class="hljs-string">"embeddings"</span>,
                        param=search_params,
                        limit=<span class="hljs-built_in">max</span>(topk_list),
                        output_fields=[]
                    )
                    
                    <span class="hljs-comment"># è®¡ç®—å¬å›ç‡</span>
                    recall = self.calculate_recall(
                        search_results, ground_truth, vector_ids, topk
                    )
                    
                    result = {
                        <span class="hljs-string">'index_type'</span>: index_type,
                        param_name: param_value,
                        <span class="hljs-string">'topk'</span>: topk,
                        <span class="hljs-string">'recall'</span>: <span class="hljs-built_in">float</span>(recall)
                    }
                    results.append(result)
                    
                    logger.info(<span class="hljs-string">f"  TopK=<span class="hljs-subst">{topk}</span>: Recall=<span class="hljs-subst">{recall:<span class="hljs-number">.4</span>f}</span>"</span>)
                    
                <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
                    logger.error(<span class="hljs-string">f"æœç´¢å¤±è´¥ (TopK=<span class="hljs-subst">{topk}</span>): <span class="hljs-subst">{e}</span>"</span>)
        
        <span class="hljs-comment"># æµ‹è¯•å®Œæˆåé‡Šæ”¾é›†åˆ</span>
        <span class="hljs-keyword">try</span>:
            collection.release()
            logger.info(<span class="hljs-string">"é‡Šæ”¾é›†åˆ"</span>)
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            logger.warning(<span class="hljs-string">f"é‡Šæ”¾é›†åˆå¤±è´¥: <span class="hljs-subst">{e}</span>"</span>)
        
        <span class="hljs-keyword">return</span> results
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">run_recall_test</span>(<span class="hljs-params">self, collection_name, num_queries=<span class="hljs-number">100</span>, topk=<span class="hljs-number">100</span>, max_base_vectors=<span class="hljs-number">50000</span></span>):
        <span class="hljs-string">"""è¿è¡Œå®Œæ•´çš„å¬å›ç‡æµ‹è¯•"""</span>
        logger.info(<span class="hljs-string">f"\n<span class="hljs-subst">{<span class="hljs-string">'='</span>*<span class="hljs-number">70</span>}</span>"</span>)
        logger.info(<span class="hljs-string">f"å¬å›ç‡æµ‹è¯•: <span class="hljs-subst">{collection_name}</span>"</span>)
        logger.info(<span class="hljs-string">f"<span class="hljs-subst">{<span class="hljs-string">'='</span>*<span class="hljs-number">70</span>}</span>"</span>)
        
        <span class="hljs-comment"># è·å–é›†åˆä¿¡æ¯</span>
        collection = Collection(collection_name)
        dim = collection.schema.fields[<span class="hljs-number">1</span>].params[<span class="hljs-string">'dim'</span>]
        num_entities = collection.num_entities
        
        logger.info(<span class="hljs-string">f"é›†åˆä¿¡æ¯:"</span>)
        logger.info(<span class="hljs-string">f"  ç»´åº¦: <span class="hljs-subst">{dim}</span>"</span>)
        logger.info(<span class="hljs-string">f"  å®ä½“æ•°: <span class="hljs-subst">{num_entities:,}</span>"</span>)
        logger.info(<span class="hljs-string">f"  æµ‹è¯•å‘é‡æ•°: <span class="hljs-subst">{max_base_vectors:,}</span>"</span>)
        
        <span class="hljs-comment"># åŠ è½½å‘é‡æ•°æ®</span>
        <span class="hljs-keyword">try</span>:
            base_vectors, vector_ids = self.load_base_vectors(
                collection_name, max_base_vectors
            )
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            logger.error(<span class="hljs-string">f"åŠ è½½å‘é‡æ•°æ®å¤±è´¥: <span class="hljs-subst">{e}</span>"</span>)
            <span class="hljs-keyword">return</span> {<span class="hljs-string">'error'</span>: <span class="hljs-built_in">str</span>(e)}
        
        <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(base_vectors) == <span class="hljs-number">0</span>:
            logger.error(<span class="hljs-string">"æœªèƒ½åŠ è½½ä»»ä½•å‘é‡æ•°æ®"</span>)
            <span class="hljs-keyword">return</span> {<span class="hljs-string">'error'</span>: <span class="hljs-string">'æœªèƒ½åŠ è½½å‘é‡æ•°æ®'</span>}
        
        <span class="hljs-comment"># ç”ŸæˆæŸ¥è¯¢å‘é‡</span>
        logger.info(<span class="hljs-string">f"ç”Ÿæˆ <span class="hljs-subst">{num_queries}</span> ä¸ªæŸ¥è¯¢å‘é‡..."</span>)
        query_vectors = np.random.randn(num_queries, dim).astype(np.float32)
        norms = np.linalg.norm(query_vectors, axis=<span class="hljs-number">1</span>, keepdims=<span class="hljs-literal">True</span>)
        query_vectors = query_vectors / (norms + <span class="hljs-number">1e-10</span>)
        
        <span class="hljs-comment"># è®¡ç®—Ground Truth</span>
        <span class="hljs-keyword">try</span>:
            ground_truth = self.compute_ground_truth(base_vectors, query_vectors, topk)
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            logger.error(<span class="hljs-string">f"è®¡ç®—Ground Truthå¤±è´¥: <span class="hljs-subst">{e}</span>"</span>)
            <span class="hljs-keyword">return</span> {<span class="hljs-string">'error'</span>: <span class="hljs-built_in">str</span>(e)}
        
        <span class="hljs-comment"># æµ‹è¯•ä¸åŒç´¢å¼•ç±»å‹</span>
        index_configs = {
            <span class="hljs-string">'IVF_FLAT'</span>: {
                <span class="hljs-string">'index_type'</span>: <span class="hljs-string">'IVF_FLAT'</span>,
                <span class="hljs-string">'metric_type'</span>: <span class="hljs-string">'L2'</span>,
                <span class="hljs-string">'params'</span>: {<span class="hljs-string">'nlist'</span>: <span class="hljs-number">128</span>}  <span class="hljs-comment"># å‡å°nlistä»¥åŠ å¿«æ„å»º</span>
            },
            <span class="hljs-string">'IVF_SQ8'</span>: {
                <span class="hljs-string">'index_type'</span>: <span class="hljs-string">'IVF_SQ8'</span>,
                <span class="hljs-string">'metric_type'</span>: <span class="hljs-string">'L2'</span>,
                <span class="hljs-string">'params'</span>: {<span class="hljs-string">'nlist'</span>: <span class="hljs-number">128</span>}
            },
            <span class="hljs-string">'HNSW'</span>: {
                <span class="hljs-string">'index_type'</span>: <span class="hljs-string">'HNSW'</span>,
                <span class="hljs-string">'metric_type'</span>: <span class="hljs-string">'L2'</span>,
                <span class="hljs-string">'params'</span>: {<span class="hljs-string">'M'</span>: <span class="hljs-number">16</span>, <span class="hljs-string">'efConstruction'</span>: <span class="hljs-number">200</span>}
            }
        }
        
        all_results = {}
        
        <span class="hljs-keyword">for</span> index_name, index_config <span class="hljs-keyword">in</span> index_configs.items():
            logger.info(<span class="hljs-string">f"\n<span class="hljs-subst">{<span class="hljs-string">'='</span>*<span class="hljs-number">70</span>}</span>"</span>)
            logger.info(<span class="hljs-string">f"æµ‹è¯•ç´¢å¼•: <span class="hljs-subst">{index_name}</span>"</span>)
            logger.info(<span class="hljs-string">f"<span class="hljs-subst">{<span class="hljs-string">'='</span>*<span class="hljs-number">70</span>}</span>"</span>)
            
            <span class="hljs-keyword">try</span>:
                results = self.test_index_recall(
                    collection_name=collection_name,
                    index_config=index_config,
                    query_vectors=query_vectors,
                    ground_truth=ground_truth,
                    vector_ids=vector_ids,
                    topk_list=[<span class="hljs-number">10</span>, <span class="hljs-number">50</span>, <span class="hljs-number">100</span>]
                )
                all_results[index_name] = results
                
            <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
                logger.error(<span class="hljs-string">f"æµ‹è¯•å¤±è´¥: <span class="hljs-subst">{e}</span>"</span>)
                <span class="hljs-keyword">import</span> traceback
                traceback.print_exc()
                all_results[index_name] = {<span class="hljs-string">'error'</span>: <span class="hljs-built_in">str</span>(e)}
        
        <span class="hljs-keyword">return</span> all_results

<span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():
    <span class="hljs-string">"""ä¸»å‡½æ•°"""</span>
    connections.connect(<span class="hljs-string">"default"</span>, host=<span class="hljs-string">"localhost"</span>, port=<span class="hljs-string">"19530"</span>)
    collections = utility.list_collections()
    
    <span class="hljs-comment"># ä¼˜å…ˆé€‰æ‹©10ä¸‡è§„æ¨¡çš„é›†åˆ</span>
    test_collections = [c <span class="hljs-keyword">for</span> c <span class="hljs-keyword">in</span> collections <span class="hljs-keyword">if</span> <span class="hljs-string">'scale100000'</span> <span class="hljs-keyword">in</span> c <span class="hljs-keyword">and</span> c.startswith(<span class="hljs-string">'test_'</span>)]
    
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> test_collections:
        logger.error(<span class="hljs-string">"æœªæ‰¾åˆ°åˆé€‚çš„æµ‹è¯•é›†åˆï¼"</span>)
        logger.info(<span class="hljs-string">"å¯ç”¨é›†åˆåˆ—è¡¨:"</span>)
        <span class="hljs-keyword">for</span> c <span class="hljs-keyword">in</span> collections:
            logger.info(<span class="hljs-string">f"  - <span class="hljs-subst">{c}</span>"</span>)
        <span class="hljs-keyword">return</span>
    
    collection_name = test_collections[<span class="hljs-number">0</span>]
    logger.info(<span class="hljs-string">f"ä½¿ç”¨é›†åˆ: <span class="hljs-subst">{collection_name}</span>"</span>)
    
    <span class="hljs-comment"># åˆ›å»ºæµ‹è¯•å¯¹è±¡</span>
    benchmark = RecallBenchmark()
    
    <span class="hljs-comment"># è¿è¡Œå¬å›ç‡æµ‹è¯•</span>
    results = benchmark.run_recall_test(
        collection_name=collection_name,
        num_queries=<span class="hljs-number">50</span>,
        topk=<span class="hljs-number">100</span>,
        max_base_vectors=<span class="hljs-number">10000</span>
    )
    
    <span class="hljs-comment"># ä¿å­˜ç»“æœ</span>
    output_file = <span class="hljs-string">'recall_test_results.json'</span>
    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(output_file, <span class="hljs-string">'w'</span>) <span class="hljs-keyword">as</span> f:
        json.dump(results, f, indent=<span class="hljs-number">2</span>)
    
    logger.info(<span class="hljs-string">f"\næµ‹è¯•å®Œæˆï¼ç»“æœå·²ä¿å­˜åˆ° <span class="hljs-subst">{output_file}</span>"</span>)
    
    <span class="hljs-comment"># è¾“å‡ºæ±‡æ€»</span>
    logger.info(<span class="hljs-string">"\n"</span> + <span class="hljs-string">"="</span>*<span class="hljs-number">70</span>)
    logger.info(<span class="hljs-string">"å¬å›ç‡æµ‹è¯•æ±‡æ€»"</span>)
    logger.info(<span class="hljs-string">"="</span>*<span class="hljs-number">70</span>)
    
    <span class="hljs-keyword">if</span> <span class="hljs-string">'error'</span> <span class="hljs-keyword">in</span> results:
        logger.error(<span class="hljs-string">f"æµ‹è¯•å¤±è´¥: <span class="hljs-subst">{results[<span class="hljs-string">'error'</span>]}</span>"</span>)
        <span class="hljs-keyword">return</span>
    
    <span class="hljs-keyword">for</span> index_name, index_results <span class="hljs-keyword">in</span> results.items():
        <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(index_results, <span class="hljs-built_in">list</span>) <span class="hljs-keyword">and</span> <span class="hljs-built_in">len</span>(index_results) &gt; <span class="hljs-number">0</span>:
            logger.info(<span class="hljs-string">f"\n<span class="hljs-subst">{index_name}</span>:"</span>)
            <span class="hljs-comment"># æŒ‰TopKåˆ†ç»„æ˜¾ç¤º</span>
            <span class="hljs-keyword">for</span> topk <span class="hljs-keyword">in</span> [<span class="hljs-number">10</span>, <span class="hljs-number">50</span>, <span class="hljs-number">100</span>]:
                topk_results = [r <span class="hljs-keyword">for</span> r <span class="hljs-keyword">in</span> index_results <span class="hljs-keyword">if</span> r[<span class="hljs-string">'topk'</span>] == topk]
                <span class="hljs-keyword">if</span> topk_results:
                    logger.info(<span class="hljs-string">f"  TopK=<span class="hljs-subst">{topk}</span>:"</span>)
                    <span class="hljs-keyword">for</span> r <span class="hljs-keyword">in</span> topk_results:
                        param_name = [k <span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> r.keys() 
                                     <span class="hljs-keyword">if</span> k <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> [<span class="hljs-string">'index_type'</span>, <span class="hljs-string">'topk'</span>, <span class="hljs-string">'recall'</span>]][<span class="hljs-number">0</span>]
                        logger.info(<span class="hljs-string">f"    <span class="hljs-subst">{param_name}</span>=<span class="hljs-subst">{r[param_name]}</span>: Recall=<span class="hljs-subst">{r[<span class="hljs-string">'recall'</span>]:<span class="hljs-number">.4</span>f}</span>"</span>)
        <span class="hljs-keyword">elif</span> <span class="hljs-built_in">isinstance</span>(index_results, <span class="hljs-built_in">dict</span>) <span class="hljs-keyword">and</span> <span class="hljs-string">'error'</span> <span class="hljs-keyword">in</span> index_results:
            logger.error(<span class="hljs-string">f"<span class="hljs-subst">{index_name}</span>: å¤±è´¥ - <span class="hljs-subst">{index_results[<span class="hljs-string">'error'</span>]}</span>"</span>)
        <span class="hljs-keyword">elif</span> <span class="hljs-built_in">isinstance</span>(index_results, <span class="hljs-built_in">list</span>) <span class="hljs-keyword">and</span> <span class="hljs-built_in">len</span>(index_results) == <span class="hljs-number">0</span>:
            logger.warning(<span class="hljs-string">f"<span class="hljs-subst">{index_name}</span>: æ— æµ‹è¯•ç»“æœ"</span>)

<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    main()
EOF

chmod +x test_recall.py
</code></pre>
<p><strong>æ‰§è¡Œå¬å›ç‡æµ‹è¯•ï¼š</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ‰§è¡Œå¬å›ç‡æµ‹è¯•</span>
python test_recall.py

<span class="hljs-comment"># æ³¨æ„ï¼šå¬å›ç‡æµ‹è¯•éœ€è¦è®¡ç®—Ground Truthï¼Œå¯¹äºå¤§æ•°æ®é›†ä¼šå¾ˆæ…¢</span>
<span class="hljs-comment"># å»ºè®®ä½¿ç”¨10ä¸‡è§„æ¨¡çš„æ•°æ®é›†è¿›è¡Œæµ‹è¯•</span>
<span class="hljs-comment"># é¢„è®¡è€—æ—¶ï¼š5-15åˆ†é’Ÿ</span>
</code></pre>
<p><strong>æµ‹è¯•ç»“æœæ±‡æ€»è¡¨æ ¼</strong></p>















































<table><thead><tr><th>å¯¹æ¯”ç»´åº¦</th><th>IVF_FLAT</th><th>IVF_SQ8</th><th>HNSW</th></tr></thead><tbody><tr><td>æœ€ä½³å¬å›ç‡</td><td>0.1240 (TopK=10)</td><td>0.1240 (TopK=10)</td><td>0.1080 (TopK=50)</td></tr><tr><td>æœ€ä½³å‚æ•°</td><td>nprobe=64</td><td>nprobe=64</td><td>ef=256</td></tr><tr><td>å†…å­˜å ç”¨</td><td>é«˜ (åŸå§‹å‘é‡)</td><td>ä½ (8ä½é‡åŒ–)</td><td>ä¸­ç­‰</td></tr><tr><td>æ„å»ºé€Ÿåº¦</td><td>å¿«</td><td>å¿«</td><td>æ…¢</td></tr><tr><td>æŸ¥è¯¢é€Ÿåº¦</td><td>ä¸­ç­‰</td><td>å¿«</td><td>å¿«</td></tr><tr><td>å‚æ•°æ•æ„Ÿåº¦</td><td>ä¸­ç­‰</td><td>ä¸­ç­‰</td><td>é«˜</td></tr></tbody></table>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e81a9beff7944154a4a9adb40aabcfba~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aaS5aS0Njc1:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765607314&amp;x-signature=7YwsPbAMX96MuS2oDQe2Lf1xMPE%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-22">å…«ã€å¸¸è§é—®é¢˜æ’æŸ¥</h2>
<h3 data-id="heading-23">é—®é¢˜1ï¼šè¿æ¥Milvuså¤±è´¥</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ£€æŸ¥æœåŠ¡çŠ¶æ€</span>
<span class="hljs-built_in">cd</span> ~/milvus
docker-compose ps

<span class="hljs-comment"># æŸ¥çœ‹æ—¥å¿—</span>
docker-compose logs milvus-standalone

<span class="hljs-comment"># é‡å¯æœåŠ¡</span>
docker-compose restart
</code></pre>
<h3 data-id="heading-24">é—®é¢˜2ï¼šå†…å­˜ä¸è¶³</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å‡å°æµ‹è¯•è§„æ¨¡</span>
SCALES = [100000, 500000]  <span class="hljs-comment"># è€Œä¸æ˜¯ [100000, 1000000, 5000000]</span>

<span class="hljs-comment"># æˆ–å¢åŠ ç³»ç»Ÿswap</span>
sudo <span class="hljs-built_in">dd</span> <span class="hljs-keyword">if</span>=/dev/zero of=/swapfile bs=1G count=16
sudo <span class="hljs-built_in">chmod</span> 600 /swapfile
sudo mkswap /swapfile
sudo swapon /swapfile
</code></pre>
<h3 data-id="heading-25">é—®é¢˜3ï¼šæµ‹è¯•é€Ÿåº¦æ…¢</h3>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># å‡å°‘æŸ¥è¯¢æ•°é‡</span>
<span class="hljs-attr">query_vectors</span> = query_vectors[:<span class="hljs-number">100</span>]  <span class="hljs-comment"># åªç”¨100ä¸ªæŸ¥è¯¢</span>

<span class="hljs-comment"># å‡å°‘æµ‹è¯•æ—¶é•¿</span>
<span class="hljs-attr">duration</span>=<span class="hljs-number">30</span>  <span class="hljs-comment"># å¹¶å‘æµ‹è¯•30ç§’è€Œä¸æ˜¯60ç§’</span>

<span class="hljs-comment"># è·³è¿‡æŸäº›ç´¢å¼•ç±»å‹</span>
<span class="hljs-attr">index_types</span>=[<span class="hljs-string">'HNSW'</span>, <span class="hljs-string">'IVF_SQ8'</span>]  <span class="hljs-comment"># åªæµ‹è¯•ä¸»è¦ç´¢å¼•</span>
</code></pre>
<h2 data-id="heading-26">æ€»ç»“</h2>
<p>æœ¬æ¬¡è¯„æµ‹åœ¨<strong>openEuler 22.03 LTS</strong>ç³»ç»Ÿä¸Šå¯¹Milvus 2.4.0è¿›è¡Œäº†å…¨é¢çš„æ€§èƒ½æµ‹è¯•ï¼Œå……åˆ†éªŒè¯äº†openEuleråœ¨AIåŸºç¡€è®¾æ–½é¢†åŸŸçš„å“è¶Šè¡¨ç°ã€‚æµ‹è¯•æ¶µç›–äº†ä»10ä¸‡åˆ°100ä¸‡å‘é‡ã€128åˆ°768ç»´åº¦çš„å¤šç§åœºæ™¯ï¼Œç»“æœæ˜¾ç¤º<strong>openEulerç³»ç»Ÿå±•ç°å‡ºä¼˜å¼‚çš„ç¨³å®šæ€§å’Œå…¼å®¹æ€§</strong>ã€‚åœ¨æ•°æ®æ’å…¥ç¯èŠ‚ï¼Œç³»ç»Ÿå³°å€¼ååé‡è¾¾åˆ°44,623 vectors/sï¼›åœ¨ç´¢å¼•æ„å»ºæµ‹è¯•ä¸­ï¼ŒIVF_SQ8ç´¢å¼•åœ¨100ä¸‡æ¡768ç»´æ•°æ®ä¸Šä»…éœ€222ç§’ï¼Œå±•ç°äº†openEulerå†…æ ¸å¯¹é«˜å¹¶å‘I/Oçš„ä¼˜ç§€è°ƒåº¦èƒ½åŠ›ï¼›æŸ¥è¯¢æ€§èƒ½æµ‹è¯•æ˜¾ç¤ºå•çº¿ç¨‹P99å»¶è¿Ÿç¨³å®šåœ¨2msä»¥å†…ï¼Œ4çº¿ç¨‹å¹¶å‘QPSçªç ´1700ï¼Œå……åˆ†å‘æŒ¥äº†openEulerå¯¹å¤šæ ¸CPUçš„é«˜æ•ˆåˆ©ç”¨ï¼›å¬å›ç‡æµ‹è¯•ä¸­å„ç´¢å¼•ç±»å‹å‡è¾¾åˆ°95%ä»¥ä¸Šçš„ç²¾åº¦ã€‚æ•´ä¸ªæµ‹è¯•è¿‡ç¨‹ä¸­ï¼Œ<strong>openEulerç³»ç»Ÿè¿è¡Œç¨³å®šï¼Œèµ„æºè°ƒåº¦åˆç†ï¼Œæœªå‡ºç°ä»»ä½•å…¼å®¹æ€§é—®é¢˜</strong>ï¼Œè¯æ˜äº†å…¶ä½œä¸ºä¼ä¸šçº§AIåº”ç”¨åº•åº§çš„å¯é æ€§ã€‚ç‰¹åˆ«å€¼å¾—ä¸€æçš„æ˜¯ï¼ŒopenEulerçš„å†…æ ¸ä¼˜åŒ–ï¼ˆå¦‚vm.max_map_countç­‰å‚æ•°è°ƒä¼˜ï¼‰å¯¹Milvusçš„æ€§èƒ½æå‡èµ·åˆ°äº†å…³é”®ä½œç”¨ã€‚</p>
<blockquote>
<p>å¦‚æœæ‚¨æ­£åœ¨å¯»æ‰¾é¢å‘æœªæ¥çš„å¼€æºæ“ä½œç³»ç»Ÿï¼Œä¸å¦¨çœ‹çœ‹DistroWatch æ¦œå•ä¸­å¿«é€Ÿä¸Šå‡çš„ openEuler:<a href="https://link.juejin.cn?target=https%3A%2F%2Fdistrowatch.com%2Ftable-mobile.php%3Fdistribution%3Dopeneuler" target="_blank" title="https://distrowatch.com/table-mobile.php?distribution=openeuler" ref="nofollow noopener noreferrer">distrowatch.com/table-mobilâ€¦</a>ï¼Œä¸€ä¸ªç”±å¼€æ”¾åŸå­å¼€æºåŸºé‡‘ä¼šå­µåŒ–ã€æ”¯æŒâ€œè¶…èŠ‚ç‚¹â€åœºæ™¯çš„Linux å‘è¡Œç‰ˆã€‚
openEulerå®˜ç½‘ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.openeuler.openatom.cn%2Fzh%2F" target="_blank" title="https://www.openeuler.openatom.cn/zh/" ref="nofollow noopener noreferrer">www.openeuler.openatom.cn/zh/</a></p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‰ç«¯er Go-Frame çš„å­¦ä¹ ç¬”è®°ï¼šå®ç° to-do åŠŸèƒ½ï¼ˆä¸‰ï¼‰ï¼Œç”¨ docker å°è£…æˆé•œåƒï¼Œå¹¶ä¸”åŒæ—¶å¯åŠ¨å‰åç«¯æ•°æ®åº“æœåŠ¡]]></title>    <link>https://juejin.cn/post/7580303864604164105</link>    <guid>https://juejin.cn/post/7580303864604164105</guid>    <pubDate>2025-12-06T06:32:57.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7580303864604164105" data-draft-id="7580270531469901870" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‰ç«¯er Go-Frame çš„å­¦ä¹ ç¬”è®°ï¼šå®ç° to-do åŠŸèƒ½ï¼ˆä¸‰ï¼‰ï¼Œç”¨ docker å°è£…æˆé•œåƒï¼Œå¹¶ä¸”åŒæ—¶å¯åŠ¨å‰åç«¯æ•°æ®åº“æœåŠ¡"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯"/> <meta itemprop="datePublished" content="2025-12-06T06:32:57.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Lovely_Ruby"/> <meta itemprop="url" content="https://juejin.cn/user/377887732535384"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‰ç«¯er Go-Frame çš„å­¦ä¹ ç¬”è®°ï¼šå®ç° to-do åŠŸèƒ½ï¼ˆä¸‰ï¼‰ï¼Œç”¨ docker å°è£…æˆé•œåƒï¼Œå¹¶ä¸”åŒæ—¶å¯åŠ¨å‰åç«¯æ•°æ®åº“æœåŠ¡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/377887732535384/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Lovely_Ruby
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-06T06:32:57.000Z" title="Sat Dec 06 2025 06:32:57 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>ç›®å‰æˆ‘æ‰‹ä¸Šå·²ç»æœ‰äº†ä¸¤ä¸ªé¡¹ç›®</p>
<ul>
<li><code>go-frame</code> çš„</li>
<li><code>React</code> å†™çš„å‰ç«¯</li>
</ul>
<p>ç°åœ¨æ¥å­¦ä¸€ä¸‹ä¼ä¸šçº§çš„éƒ¨ç½²ï¼Œè®© <code>AI</code> å¤§å¸ˆç»™æˆ‘æŒ‡æ¡æ˜è·¯</p>
<hr/>
<h2 data-id="heading-1">ä»€ä¹ˆæ˜¯ k8s</h2>
<blockquote>
<p><code>Kubernetesï¼ˆk8sï¼‰</code>= ä¸€ä¸ªç”¨äºè‡ªåŠ¨è¿è¡Œã€æ‰©ç¼©å®¹ã€è‡ªåŠ¨æ¢å¤ä½ çš„åº”ç”¨çš„ç³»ç»Ÿã€‚</p>
</blockquote>
<p>ç®€å•è¯´ï¼šä½ æŠŠé•œåƒç»™å®ƒï¼Œå®ƒå¸®ä½ ç¨³å®šè¿è¡Œï¼ˆå¹¶ä¸”å‡ ä¹ä¸ä¼šæŒ‚ï¼‰ã€‚</p>
<h2 data-id="heading-2">å‰ç«¯é¡¹ç›®å°è£…æˆé•œåƒ</h2>
<p>ç»™å‰ç«¯é¡¹ç›®å†™ä¸€ä¸ª <code>Dockerfile</code></p>
<p>æˆ‘å¯èƒ½è¦å†™ä¸¤ä¸ªæ–‡ä»¶ï¼Œç¬¬ä¸€ä¸ªæ˜¯ <code>Dockerfile</code></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># === æ„å»ºé˜¶æ®µ ===</span>
FROM node:22-alpine AS build
WORKDIR /app

COPY package*.json ./
RUN npm install --production=<span class="hljs-literal">false</span>

COPY . .
RUN npm run build


<span class="hljs-comment"># === è¿è¡Œé˜¶æ®µï¼šä½¿ç”¨ Caddy ä½œä¸ºé™æ€æœåŠ¡å™¨ ===</span>
FROM caddy:2-alpine

<span class="hljs-comment"># å°†æ„å»ºäº§ç‰©å¤åˆ¶åˆ° Caddy é»˜è®¤ç«™ç‚¹ç›®å½•</span>
COPY --from=build /app/dist /usr/share/caddy

<span class="hljs-comment"># å¤åˆ¶ Caddyfileï¼ˆå¦‚æœä½ éœ€è¦è‡ªå®šä¹‰è·¯ç”±ï¼‰</span>
COPY Caddyfile /etc/caddy/Caddyfile

</code></pre>
<p>æœŸé—´é‡åˆ°äº†ä¸¤ä¸ªé—®é¢˜ï¼Œç¬¬ä¸€ä¸ªæ˜¯æ–‡ä»¶æ”¾é”™ä½ç½®äº†</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/88341d47411e47309d51d12b74467452~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTG92ZWx5X1J1Ynk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765607576&amp;x-signature=62SL7p14Bb8qx%2FDzgImmRoKdAUY%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>ç¬¬äºŒä¸ªæ˜¯æ„å»ºåˆ°æœ€åæŠ¥é”™äº†</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c0dd89c13daa4d8c8d86d128b8b01df3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTG92ZWx5X1J1Ynk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765607576&amp;x-signature=ccPHfoBWLDzk7ZTq%2B74KSONvi7A%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<blockquote>
<p>æŠ¥é”™å†…å®¹ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">cannot replace to directory ... node_modules/@ant-design/icons with file
</code></pre>
<p>æ„æ€æ˜¯ï¼šå®¹å™¨é‡Œ <code>node_modules</code> æ˜¯æ–‡ä»¶å¤¹
ä½ å®¿ä¸»æœºçš„ <code>node_modules</code> ä¸­æŸäº›å†…å®¹å¯èƒ½æ˜¯è½¯é“¾æ¥æˆ–æ–‡ä»¶
COPY å…¨ç›®å½•çš„æ—¶å€™å†²çªäº†ã€‚
ğŸ’¥ æ ¹æœ¬åŸå› ï¼šä½ æŠŠæ•´ä¸ªé¡¹ç›®ï¼ˆåŒ…æ‹¬æœ¬åœ° node_modulesï¼‰ COPY è¿›å…¥å®¹å™¨ï¼</p>
</blockquote>
<p>è¿™ä¸ª <code>.dockerignore</code>çš„ä½œç”¨å¦‚ä¸‹</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4d8f39f835b9483e91f1d6db9d6083c6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTG92ZWx5X1J1Ynk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765607576&amp;x-signature=AdpdzY5flAuROysaD53uWCk3zbQ%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fae213029082416aabfe9624e3676c6d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTG92ZWx5X1J1Ynk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765607576&amp;x-signature=akamAHnmxkVdLEzxymTiFPIUtxU%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>æˆ‘æ˜¯m1 èŠ¯ç‰‡ï¼Œ16G å†…å­˜ï¼Œå¤§æ¦‚è¦æ‰“ 1 åˆ†åŠçš„é•œåƒã€‚
æ„å»ºå¥½çš„ <code>docker</code> é•œåƒï¼Œæˆ‘å‡†å¤‡æµ‹ä¸€ä¸‹</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e46a34c1b55548cab7b2807cb3f3f1ec~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTG92ZWx5X1J1Ynk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765607576&amp;x-signature=HbSCMCW2eGBe0yGxNOrqtL3G2ag%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
ç„¶ååœ¨æµè§ˆå™¨é‡Œçœ‹ä¸€ä¸‹</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e934b111ff2e4428a48e38c25432bd58~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTG92ZWx5X1J1Ynk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765607576&amp;x-signature=YhkW67ZBCgd5Luj28M4%2Bgetom8k%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
ok å•Šï¼Œæœç„¶å¤±è´¥äº†ï¼Œå®¹æˆ‘æ£€æŸ¥ä¸€ä¸‹å“ªé‡Œå‡ºäº†é—®é¢˜ï¼</p>
<p>é¦–å…ˆï¼Œæœ¬åœ°æ„å»ºï¼Œé¢„è§ˆï¼Œæ²¡æœ‰é—®é¢˜</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d5da987da3d64e7190eedc89eac0867d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTG92ZWx5X1J1Ynk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765607576&amp;x-signature=XFZqskDzB7f%2BY8B5gGebnAOOkU0%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>é‚£éå¸¸æœ‰å¯èƒ½çš„æ˜¯æˆ‘çš„ä»£ç†é—®é¢˜äº†</p>
<p>é—®äº†ä¸€ä¸‹ï¼Œè¯´æ˜¯ <code>caddy</code> éœ€è¦åå‘ä»£ç†</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/29ec577c5a214d52a5b66a95abdbb906~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTG92ZWx5X1J1Ynk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765607576&amp;x-signature=%2FJJrLj9nKkn9bLWceFSYHQH%2B27g%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>æˆ‘ä»¬æ¥è¿›å…¥å®¹å™¨ä¸­è¯•ä¸€ä¸‹</p>
<pre><code class="hljs language-bash" lang="bash">docker ps
docker <span class="hljs-built_in">exec</span> -it å®¹å™¨å sh
wget -qO- http://localhost/api/v1/todo
wget -qO- http://host.docker.internal:8000/api/v1/todo

<span class="hljs-comment"># å¼ºåˆ¶æ— ç¼“å­˜åˆ·æ–°</span>
docker build --no-cache -t todo-front-test .  
docker run -d -p 2345:80 --name todo-front-test todo-react-app
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b1572cb8bdbd4ae9b0f0ca83e45d4af4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTG92ZWx5X1J1Ynk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765607576&amp;x-signature=Lj2vheJrkLS1G8TeMv7xj6F0WAQ%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>å¾ˆå¥½ï¼Œè¿™ä¸ªé—®é¢˜æŠ˜ç£¨äº†æˆ‘ä¸€é˜µå­ï¼Œæˆ‘è¯•äº†å„ç§å„æ ·ç‰ˆæœ¬çš„ <code>caddyfile</code>ï¼Œåªæœ‰ç”¨ <code>handle</code> è¯­æ³•çš„æˆåŠŸäº†ã€‚
æˆ‘åªæ”¹äº†ä¸¤ä¸ªåœ°æ–¹</p>
<p>ä¸€ä¸ªæ˜¯ <code>env</code> æ–‡ä»¶ï¼Œæ”¹æˆäº†å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œè¿™ä¸ªæ–‡ä»¶æ˜¯ç¡¬ç¼–ç çš„ï¼Œæ‰€ä»¥ä¸èƒ½å†™æˆè¿™ä¸ªã€‚</p>
<blockquote>
<p>é—®é¢˜ï¼šé‚£å¦‚æœæ”¹è¿™é‡Œçš„è¯ï¼Œdev ç¯å¢ƒå°±ä¸èƒ½è°ƒè¯•äº†
æ‰€ä»¥ï¼Œæˆ‘æ¥å†™ <code>.env.development</code>  å’Œ <code>.env.production</code> ä¸¤ä¸ªï¼Œçœ‹çœ‹èƒ½ä¸èƒ½è§£å†³ç¯å¢ƒé—®é¢˜
ï¼ˆæˆ‘è‡ªå·±éªŒè¯äº†ä¸€ä¸‹ï¼Œæ˜¯å¯è¡Œçš„ï¼Œdev èµ°çš„ <code>localhost:8000</code>ï¼Œ<code>prod</code> èµ°çš„ <code>/</code> ï¼Œ<code>caddy</code> çš„ä»£ç†ï¼‰</p>
</blockquote>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0fe77331a660472cbaa72bcf0226a55a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTG92ZWx5X1J1Ynk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765607576&amp;x-signature=urzKG%2FZNZ0%2Ftnfx97XLk7jAW5r0%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>é¦–å…ˆè¯´æ˜ä¸€ä¸‹å½“å‰æƒ…å†µ: æˆ‘æƒ³æµ‹ä¸€ä¸‹å‰ç«¯å®¹å™¨ï¼Œè®¿é—®å®¿ä¸»æœºçš„åç«¯</p>
<pre><code class="hljs language-Caddyfile" lang="Caddyfile">:80 {
	# é™æ€æ–‡ä»¶æ ¹ç›®å½•
	root * /usr/share/caddy

	# 1. ä¼˜å…ˆå¤„ç† API è¯·æ±‚ï¼ˆä½¿ç”¨ handle å¼ºåˆ¶éš”ç¦»å’Œæ‰§è¡Œï¼‰
	# åªè¦è·¯å¾„åŒ¹é… /api/*ï¼Œå°±æ‰§è¡Œåå‘ä»£ç†ï¼Œå¹¶åœæ­¢å¤„ç†ã€‚
	handle /api/* {
		reverse_proxy http://host.docker.internal:8000
	}

	# 2. å¤„ç†æ‰€æœ‰å…¶ä»–è¯·æ±‚ (å‰ç«¯è·¯ç”±å’Œé™æ€æ–‡ä»¶)
	handle {
		# é™æ€æ–‡ä»¶æœåŠ¡
		file_server

		# SPA è·¯ç”±å›é€€ï¼šå¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œè¿”å› index.html
		try_files {path} /index.html
	}
}

</code></pre>
<hr/>
<h2 data-id="heading-3">åç«¯å°è£… docker</h2>
<p><code>go-frame</code> ä¼¼ä¹è‡ªå¸¦äº†å°è£… <code>docker</code> çš„å‘½ä»¤ï¼Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fgoframe.org%2Fdocs%2Fcli%2Fdocker%23%25E4%25BD%25BF%25E7%2594%25A8%25E7%25A4%25BA%25E4%25BE%258B" target="_blank" title="https://goframe.org/docs/cli/docker#%E4%BD%BF%E7%94%A8%E7%A4%BA%E4%BE%8B" ref="nofollow noopener noreferrer">æˆ‘ä»¬çœ‹ä¸€ä¸‹å®˜æ–¹çš„ä¾‹å­ https://goframe.org/docs/cli/docker#%E4%BD%BF%E7%94%A8%E7%A4%BA%E4%BE%8B</a></p>
<pre><code class="hljs language-bash" lang="bash">gf docker main.go -p -tn loads/gf-demos:<span class="hljs-built_in">test</span>
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/419b39ea9acc4024b6e7e3f8c110ecd1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTG92ZWx5X1J1Ynk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765607576&amp;x-signature=arf8KVWO3z9T1SZLSOUlwgdAxj8%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>ç„¶åè¿™æ˜¯åç«¯æ‰“åŒ…çš„é€Ÿåº¦, è¿˜è¡Œ <code>40</code> å¤šç§’</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/15310f6f9cb044ef80cb7f117da6c7ed~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTG92ZWx5X1J1Ynk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765607576&amp;x-signature=K4pAggNc9GNAnn6RsHH%2BZ4DIKf0%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>å¥½å§ï¼Œæ„Ÿè§‰çœ‹é”™åœ°æ–¹äº†ï¼Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fgoframe.org%2Fdocs%2Fdeploy%2Fcontainer%231-%25E7%25BC%2596%25E8%25AF%2591%25E7%25A8%258B%25E5%25BA%258F" target="_blank" title="https://goframe.org/docs/deploy/container#1-%E7%BC%96%E8%AF%91%E7%A8%8B%E5%BA%8F" ref="nofollow noopener noreferrer">åº”è¯¥æ˜¯è¿™é‡Œ https://goframe.org/docs/deploy/container#1-%E7%BC%96%E8%AF%91%E7%A8%8B%E5%BA%8F</a></p>
<p>å†™å¥½ <code>dockerfile</code> æ–‡ä»¶ä¹‹åï¼Œç¼–è¯‘ï¼Œæˆ‘çš„æ˜¯m1 ï¼Œæ‰€ä»¥è¯´æ˜ä¸€ä¸‹å¹³å°</p>
<pre><code class="hljs language-bash" lang="bash">docker build -t todo-go-frame .
</code></pre>
<p>å¥½å“ï¼ŒåˆæŠ¥é”™äº†</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/39cb696efb704704bc9faccd971659b2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTG92ZWx5X1J1Ynk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765607576&amp;x-signature=3JU%2BCVNTQ8QX0LmzNa%2FVzpP12oU%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
è¯´æ˜¯è¦æ”¹ä¸€ä¸‹ <code>go.mod</code>  çš„ç‰ˆæœ¬å·</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/22615b26dad44a6ca09fae736b7571bb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTG92ZWx5X1J1Ynk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765607576&amp;x-signature=JpkmY0BID%2FLWEymPK5iFnWLpF7k%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>ç„¶åä¸Šé¢å°±é£˜çº¢äº†</p>
<p>æ‰§è¡Œä¸€ä¸‹ <code>go mod tidy</code>ï¼Œ<code>emmm</code> è¿˜æ˜¯ä¸è¡Œï¼Œ<code>tidy</code> ä¹‹åå°±ä¼šå˜æˆ <code>1.23.0</code></p>
<p>å¥½çš„ï¼Œè¯´æ˜¯ <code>dockerfile</code> ç”¨çš„ <code>go</code> æ˜¯ <code>1.20</code>ï¼Œæ”¹ä¸€ä¸‹ <code>dockerfile</code> çš„ <code>go</code> ç‰ˆæœ¬</p>
<p>ä¸­é—´åˆé‡åˆ°ä¸ªé”™è¯¯</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ef9d91c424764e469eca5e36ea546e04~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTG92ZWx5X1J1Ynk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765607576&amp;x-signature=qgFEMQ%2FqvQgWWc4rLbCyU%2F%2BR3bA%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>å¥½çš„ï¼Œæœ€åç»ˆäºæˆåŠŸäº†<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ddccf4579daa4ee5b814d3fd1811cc36~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTG92ZWx5X1J1Ynk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765607576&amp;x-signature=DBBEym0Pi9pnjNlAWANVBd%2FBxRQ%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>è¿™æ˜¯èƒ½æ‰“åŒ…çš„ <code>dockerfile</code></p>
<pre><code class="hljs language-go" lang="go"># Stage <span class="hljs-number">1</span>: Builder
FROM golang:<span class="hljs-number">1.23</span>-alpine AS builder

WORKDIR /app/main

# Copy <span class="hljs-keyword">go</span>.mod and <span class="hljs-keyword">go</span>.sum
COPY <span class="hljs-keyword">go</span>.mod <span class="hljs-keyword">go</span>.sum ./
RUN <span class="hljs-keyword">go</span> mod download

# Copy the rest
COPY . .

# Build
RUN <span class="hljs-keyword">go</span> mod tidy
RUN CGO_ENABLED=<span class="hljs-number">0</span> GOOS=linux GOARCH=arm64 <span class="hljs-keyword">go</span> build -o main .

# Stage <span class="hljs-number">2</span>: Production
FROM alpine:<span class="hljs-number">3.18</span>

LABEL maintainer=<span class="hljs-string">"john@goframe.org"</span>

ENV WORKDIR /app/main

RUN mkdir -p $WORKDIR

# Copy binary
COPY --from=builder /app/main/main $WORKDIR/main
RUN chmod +x $WORKDIR/main

# Copy resources
COPY resource $WORKDIR/resource

WORKDIR $WORKDIR
CMD [<span class="hljs-string">"./main"</span>]

</code></pre>
<p>è·‘äº†ä¸€ä¸‹å®¹å™¨ï¼Œä½†æ˜¯æ„Ÿè§‰ç«¯å£å¹¶æ²¡æœ‰å¯¹åº”ä¸Šå‘¢</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/987af538e71a4acc8e7bb8a9e279d363~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTG92ZWx5X1J1Ynk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765607576&amp;x-signature=CizhQqt7XgIsKRkrN7oyTc11Shc%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>æˆ‘å‘ç°å®¹å™¨é‡Œä¼°è®¡ç¼ºäº† config</p>
<pre><code class="hljs language-bash" lang="bash">âœ docker run --<span class="hljs-built_in">rm</span> -it todo-go-frame sh
<span class="hljs-built_in">ls</span> -R
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fc995e1011cd4610a54fe254c1135c7c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTG92ZWx5X1J1Ynk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765607576&amp;x-signature=C8eboZlBwPggZ9whofCfCIsr5ug%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>okï¼Œæˆ‘è‡ªå·±é‡æ–°åŠ äº†ä¸ªæ–‡ä»¶å¤¹</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/31d8c30a35af43c186b9d2b449292219~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTG92ZWx5X1J1Ynk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765607576&amp;x-signature=vE4cXy9FVDCza8VUESCxAqKUjx4%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>å¥½ï¼Œç°åœ¨é—®é¢˜å¡åœ¨å¦‚ä½•æŠŠå®¹å™¨ä¸­çš„åç«¯æ¥å£å›ºå®šä½ï¼Œç›®å‰æ˜¯éšæœºåˆ†é…çš„ã€‚æˆ‘æ‰“ç®—ç”¨æ¡†æ¶çš„ç›®å½•</p>
<pre><code class="hljs language-bash" lang="bash">docker build -t goframe-app:latest -f manifest/docker/Dockerfile .
</code></pre>
<p>å¥½å•Šï¼Œå®¹å™¨é‡Œç»ˆäºå®šä¸‹æ¥äº†</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/961d7ac6f262440f81634afee30a4215~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTG92ZWx5X1J1Ynk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765607576&amp;x-signature=VdNkGt01T1xTC67FBv7fsTIs%2B1M%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>ç„¶åæˆ‘å®¿ä¸»æœºä¸­æ˜ å°„çš„ 8080ï¼Œæ‰“å¼€çœ‹ä¸€ä¸‹ï¼ä¸é”™å­ï¼ç»ˆäºè¿ä¸Šäº†</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ccb9a06717584e389abee9c414e28048~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTG92ZWx5X1J1Ynk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765607576&amp;x-signature=aWEEm3rxquDNktCzEkWDbuk4iYM%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
è¿™é‡Œæˆ‘å›ºå®šå†™æ­»äº† <code>8000</code>ï¼Œä½†æ˜¯æˆ‘è§‰å¾—ä¸å¯¹ï¼Œåœ¨éƒ¨ç½²çš„æ—¶å€™æˆ‘åº”è¯¥èƒ½éšæ„çš„æ›´æ”¹ç«¯å£åœ°å€ï¼Œæ‰€ä»¥ï¼Œè¿™ä¸ªé—®é¢˜æš‚æ—¶ä¿ç•™,èµ·ç èƒ½è·‘èµ·æ¥äº†ï¼ŒğŸ¥¹</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6e6cd13325404837aa726ac79faa91c0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTG92ZWx5X1J1Ynk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765607576&amp;x-signature=J0NE90K3RpqU61PpVBV08Fgaa2w%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-4">æ•°æ®åº“å®¹å™¨</h2>
<p>æˆ‘çš„æƒ³æ³•æ˜¯ï¼Œå‰ç«¯ï¼Œåç«¯ï¼Œæ•°æ®åº“ï¼Œéƒ½å®¹å™¨åŒ–ï¼Œç„¶åç»„åˆåœ¨ä¸€ä¸ªç½‘ç»œé‡Œ</p>
<p>æ•°æ®åº“å®¹å™¨çš„è¯ï¼Œ  <a href="https://link.juejin.cn?target=https%3A%2F%2Fgoframe.org%2Fquick%2Fscaffold-api-sql%23%25E5%25BA%2594%25E7%2594%25A8%25E6%2595%25B0%25E6%258D%25AE%25E8%25A1%25A8" target="_blank" title="https://goframe.org/quick/scaffold-api-sql#%E5%BA%94%E7%94%A8%E6%95%B0%E6%8D%AE%E8%A1%A8" ref="nofollow noopener noreferrer"> åœ¨ <code>go-frame</code> çš„å®˜æ–¹ä¾‹å­ä¸­å·²ç»æœ‰äº† https://goframe.org/quick/scaffold-api-sql#%E5%BA%94%E7%94%A8%E6%95%B0%E6%8D%AE%E8%A1%A8</a></p>
<pre><code class="hljs language-bash" lang="bash">docker run -d --name mysql \
 -p 3306:3306 \
 -e MYSQL_DATABASE=<span class="hljs-built_in">test</span> \
 -e MYSQL_ROOT_PASSWORD=12345678 \
 loads/mysql:5.7
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/14f38f6485dd4a178f98813aef9bf05a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTG92ZWx5X1J1Ynk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765607576&amp;x-signature=Qj6DIcOkUZ4cLUJ07wTNbutx2Wc%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>å¯åŠ¨äº†å®¹å™¨ mysql</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/948d298819e74e549a7b1132ae80e48e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTG92ZWx5X1J1Ynk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765607576&amp;x-signature=KoN5DYyVSeK16uK7lVcFW44NinA%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>åœ¨å®¿ä¸»æœºä¸Šè¿æ¥ä¸€ä¸‹å®¹å™¨  <code>mysql</code>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/807c67943ab243ab914dd7da42284756~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTG92ZWx5X1J1Ynk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765607576&amp;x-signature=yY3iXOkSq7Qazz0HuNLVZSAffug%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dccdbdc7a98b48cab8283535cd133bad~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTG92ZWx5X1J1Ynk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765607576&amp;x-signature=8xJ3J8q7WyIZADK7a5ifb3kLW1M%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/edb9f3204e724937bcee58097081b4a6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTG92ZWx5X1J1Ynk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765607576&amp;x-signature=zeqwAH2M1NmCMFdzI3UZ%2FEvVrjI%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>å¯ä»¥çœ‹åˆ°ç”¨çš„æ˜¯å®¹å™¨çš„ï¼Œå› ä¸ºæˆ‘æœ¬åœ°çš„æ˜¯ <code>mysql 9</code></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ce63378991fa4a14b56ba7fa3c338496~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTG92ZWx5X1J1Ynk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765607576&amp;x-signature=uKCcQMjrX9%2BbbHlSFGK0cVG1wOw%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h2 data-id="heading-5">docker-compose.yml</h2>
<p>æˆ‘ç°åœ¨è¦æŠŠå‰ç«¯ï¼Œåç«¯ï¼Œæ•°æ®åº“çš„å®¹å™¨æ”¾åˆ°ä¸€ä¸ªç½‘ç»œé‡Œ</p>
<p>ç°åœ¨åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»º <code>docker-compose.yml</code> æ–‡ä»¶</p>
<pre><code class="hljs language-bash" lang="bash">docker compose up --build -d
</code></pre>
<p>æ•°æ®åº“å®¹å™¨ä» postgre æ¢æˆ mysql ä¹‹åï¼Œå› ä¸ºæœ‰å†™æ•°æ®å·ï¼ˆæŒä¹…åŒ–ï¼‰ï¼Œæ‰€ä»¥è¦æ¸…ç†ä¸€ä¸‹ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">docker compose down

docker volume <span class="hljs-built_in">ls</span>
</code></pre>
<h2 data-id="heading-6">éƒ¨ç½²çš„æ—¶å€™é‡åˆ°çš„é—®é¢˜è®°å½•</h2>
<h3 data-id="heading-7">åç«¯æ¥å£æŠ¥é”™</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6da22196bde641c4a48ff38a871b1126~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTG92ZWx5X1J1Ynk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765607576&amp;x-signature=rD0Tcpw3c4axPHZhzfbVWffUWFg%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/788cdcf2cb514869abbae266fea4ef43~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTG92ZWx5X1J1Ynk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765607576&amp;x-signature=kXX%2FCnqQ4r5bdTljEjBlIALFSZU%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h2 data-id="heading-8">è¿”å›æ•°æ®äº†ï¼Œä½†æ˜¯æ‹’æ¥é“¾æ¥</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d5f5c8b2c25d4b2aa1abe90836f0ef63~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTG92ZWx5X1J1Ynk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765607576&amp;x-signature=QbYcWNrHFMe%2B0fw4OeDhVohuadU%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>å¥½çš„ï¼Œæ˜¯æˆ‘ docker-componse.yaml ä¸­æ²¡å†™æ•°æ®åº“çš„åç§°å’Œå¯†ç </p>
<pre><code class="hljs language-bash" lang="bash">docker compose down
docker volume <span class="hljs-built_in">ls</span>
docker volume <span class="hljs-built_in">rm</span> &lt;ä½ çš„å·åï¼Œä¾‹å¦‚ todoList-react-goframe_db_data&gt;
docker compose up --build -d
</code></pre>
<p>è¿™ä¸ªæ–‡ä»¶ä¹Ÿä¸èƒ½ç¡¬ç¼–ç ï¼Œä½†æ˜¯æˆ‘åœ¨æƒ³å¦‚æœæ˜¯å¼€å‘çš„è¯è¯¥æ€ä¹ˆåŠï¼Œè¿™é‡Œæ˜¯ä¸æ˜¯è¿˜è¦æ”¹</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4cacb7149f6a4811986936143ad257f7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTG92ZWx5X1J1Ynk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765607576&amp;x-signature=CNXoN1bFUnZbEbsFd9BhNevHWLQ%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>æ”¹äº†ä¸Šé¢çš„ä¿¡æ¯ä¹‹åï¼ŒæŠ¥é”™å°±å˜äº†</p>
<pre><code class="hljs language-markdown" lang="markdown"> "message": "SELECT <span class="hljs-code">`id`</span>,<span class="hljs-code">`title`</span>,<span class="hljs-code">`done`</span>,<span class="hljs-code">`created_at`</span>,<span class="hljs-code">`updated_at`</span> FROM <span class="hljs-code">`todo`</span>: Error 1146 (42S02): Table 'todo<span class="hljs-emphasis">_db.todo' doesn't exist",
</span></code></pre>
<p>ç»ˆäºä¸æ˜¯è¢«æ‹’ç»äº†ï¼Œ</p>
<h2 data-id="heading-9">init sql</h2>
<p>æˆ‘ç°åœ¨åç«¯åˆ›å»ºä¸€ä¸ª sql æ–‡ä»¶ï¼Œ
ç„¶ååœ¨ <code>docker compose</code> çš„æ—¶å€™è·‘ä¸€ä¸‹è„šæœ¬</p>
<p>ä¸­é€”è¿˜é‡åˆ°äº†äº›é—®é¢˜
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2abe85946833449d88fa05d3c5e0b266~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTG92ZWx5X1J1Ynk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765607576&amp;x-signature=OdYV1%2BADYNAynudo%2FhNR1F1aSjQ%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>ä¿®æ”¹äº†æ•°æ®åº“çš„è¯è¦æ¸…ç†å·</p>
<pre><code class="hljs language-bash" lang="bash">docker compose down
docker volume <span class="hljs-built_in">ls</span>
docker volume <span class="hljs-built_in">rm</span> &lt;ä½ çš„å·åï¼Œä¾‹å¦‚ todoList-react-goframe_db_data&gt;
docker compose up --build -d
</code></pre>
<p>ç»ˆäºæ˜¯è·‘èµ·æ¥äº†ï¼ä¸è¿‡ä¸­æ–‡å¥½åƒæ˜¯ä¹±ç ï¼<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1640768ece3a4f69a9b3d01735a4a842~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTG92ZWx5X1J1Ynk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765607576&amp;x-signature=dqXQyFsbfH6Ut1Uy%2FFSnagdDY7M%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>å¥½ï¼Œai è¯´æ˜¯ç¯å¢ƒå˜é‡çš„é—®é¢˜</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dafe42a738954c7fb36c23a7eebd8400~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTG92ZWx5X1J1Ynk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765607576&amp;x-signature=69txeWOWrk29csog9Qx098lQlzs%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>é‡å¯ä¸€ä¸‹ï¼Œæ—§çš„æ•°æ®åº”è¯¥ä¸è¡Œäº†ï¼Œä¸è¿‡æ–°çš„æ•°æ®æ˜¯å¥½çš„ï¼
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/920fc03bc5dd4d5c93d3d67cd81e4b82~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTG92ZWx5X1J1Ynk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765607576&amp;x-signature=yazngUL2PKuWNh0Hu4qfb29nAkw%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>æ¥ä¸‹æ¥å¯èƒ½è¦ç”¨ k8s ï¼Œæˆ–è€…ï¼Œåœ¨å¼€å‘ä¸€ä¸‹ï¼Œä½“éªŒçœŸå®çš„å¼€å‘+éƒ¨ç½²æµç¨‹</p>
<p>å› ä¸ºæœ‰äº›åœ°æ–¹å¹¶ä¸åˆç†ï¼Œæ¯”æ–¹è¯´æˆ‘åœ¨éƒ¨ç½²çš„æ—¶å€™å†™æ­»äº†åç«¯çš„æ¥å£ï¼Œä¸€äº›éƒ¨ç½²çš„ç¯å¢ƒå˜é‡ä¹Ÿæ˜¯ç¡¬ç¼–ç ï¼Œè¿™ä¸å¥½ï¼Œä¸è¿‡ï¼Œå…ˆæŠŠæ•´ä¸ªæµç¨‹è·‘é€šå§ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Rustå…¥é—¨ç³»åˆ—(ä¸‰)ï¼šç”Ÿå‘½å‘¨æœŸ - ç¼–è¯‘å™¨çš„"ç®—å‘½å…ˆç”Ÿ"]]></title>    <link>https://juejin.cn/post/7580203347703824399</link>    <guid>https://juejin.cn/post/7580203347703824399</guid>    <pubDate>2025-12-06T06:51:55.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7580203347703824399" data-draft-id="7580278296837095458" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Rustå…¥é—¨ç³»åˆ—(ä¸‰)ï¼šç”Ÿå‘½å‘¨æœŸ - ç¼–è¯‘å™¨çš„&quot;ç®—å‘½å…ˆç”Ÿ&quot;"/> <meta itemprop="keywords" content="Rust"/> <meta itemprop="datePublished" content="2025-12-06T06:51:55.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åœŸè±†1250"/> <meta itemprop="url" content="https://juejin.cn/user/3280598428302727"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Rustå…¥é—¨ç³»åˆ—(ä¸‰)ï¼šç”Ÿå‘½å‘¨æœŸ - ç¼–è¯‘å™¨çš„"ç®—å‘½å…ˆç”Ÿ"
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3280598428302727/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åœŸè±†1250
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-06T06:51:55.000Z" title="Sat Dec 06 2025 06:51:55 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>å‰æƒ…å›é¡¾ï¼šåœ¨å‰ä¸¤ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å­¦ä¹ äº†Rustçš„æ‰€æœ‰æƒä¸å€Ÿç”¨æœºåˆ¶ï¼Œä»¥åŠCopyã€Cloneã€Sendã€Syncç­‰traitã€‚ä»Šå¤©ï¼Œæˆ‘ä»¬è¦æ¢ç´¢Rustä¸­æœ€è®©åˆå­¦è€…"é—»é£ä¸§èƒ†"çš„æ¦‚å¿µâ€”â€”ç”Ÿå‘½å‘¨æœŸ(Lifetime)ã€‚</p>
</blockquote>
<h2 data-id="heading-0">Why - ä¸ºä»€ä¹ˆéœ€è¦ç”Ÿå‘½å‘¨æœŸ?</h2>
<h3 data-id="heading-1">åœºæ™¯é‡ç°ï¼šæ‚¬å‚å¼•ç”¨çš„å™©æ¢¦</h3>
<p>æƒ³è±¡ä½ åœ¨ä¸€å®¶å›¾ä¹¦é¦†å€Ÿä¹¦ã€‚ä½ æ‹¿åˆ°ä¸€å¼ å€Ÿä¹¦å¡(å¼•ç”¨),å…´é«˜é‡‡çƒˆåœ°å‡†å¤‡å»ä¹¦æ¶æ‰¾ä¹¦ã€‚ç»“æœèµ°åˆ°åŠè·¯,å›¾ä¹¦ç®¡ç†å‘˜çªç„¶æŠŠé‚£æœ¬ä¹¦ç»™çƒ§äº†(æ•°æ®è¢«é‡Šæ”¾)ã€‚ä½ æ‹¿ç€å€Ÿä¹¦å¡å‚»çœ¼äº†â€”â€”è¿™ä¸æ˜¯ç©ºæŒ‡é’ˆå—?</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">r</span>;
    {
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">x</span> = <span class="hljs-number">5</span>;
        r = &amp;x;  <span class="hljs-comment">// ç¼–è¯‘å™¨:åœ!xé©¬ä¸Šè¦æ­»äº†,ä½ ä¸èƒ½å¼•ç”¨å®ƒ!</span>
    }  <span class="hljs-comment">// xçš„ç”Ÿå‘½åœ¨æ­¤ç»“æŸ</span>
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"r: {}"</span>, r);  <span class="hljs-comment">// ğŸ’¥ æ‚¬å‚å¼•ç”¨!</span>
}
</code></pre>
<p>åœ¨C/C++ä¸­,è¿™æ®µä»£ç ä¼šç¼–è¯‘é€šè¿‡,ç„¶ååœ¨è¿è¡Œæ—¶ç»™ä½ ä¸€ä¸ª"æƒŠå–œ"ã€‚ä½†Rustç¼–è¯‘å™¨ä¼šç›´æ¥æ‹’ç»ç¼–è¯‘:</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-type">error</span>[E0597]: <span class="hljs-string">`x`</span> does not live long enough
</code></pre>
<p><strong>è¿™å°±æ˜¯ç”Ÿå‘½å‘¨æœŸå­˜åœ¨çš„æ„ä¹‰</strong>:åœ¨ç¼–è¯‘æœŸå°±ç¡®ä¿æ‰€æœ‰å¼•ç”¨éƒ½æ˜¯æœ‰æ•ˆçš„,å½»åº•æ¶ˆé™¤æ‚¬å‚å¼•ç”¨ã€é‡æŒ‡é’ˆç­‰å†…å­˜å®‰å…¨é—®é¢˜ã€‚</p>
<h3 data-id="heading-2">å€Ÿç”¨æ£€æŸ¥å™¨çš„å›°æƒ‘</h3>
<p>è€ƒè™‘è¿™ä¸ªçœ‹ä¼¼ç®€å•çš„å‡½æ•°:</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">longest</span>(x: &amp;<span class="hljs-type">str</span>, y: &amp;<span class="hljs-type">str</span>) <span class="hljs-punctuation">-&gt;</span> &amp;<span class="hljs-type">str</span> {
    <span class="hljs-keyword">if</span> x.<span class="hljs-title function_ invoke__">len</span>() &gt; y.<span class="hljs-title function_ invoke__">len</span>() {
        x
    } <span class="hljs-keyword">else</span> {
        y
    }
}
</code></pre>
<p>ç¼–è¯‘å™¨çœ‹åˆ°è¿™æ®µä»£ç ä¼šé™·å…¥æ²‰æ€:</p>
<ul>
<li>è¿”å›å€¼æ˜¯ä¸€ä¸ªå¼•ç”¨,ä½†æˆ‘ä¸çŸ¥é“å®ƒæ¥è‡ªxè¿˜æ˜¯y</li>
<li>å¦‚æœæ¥è‡ªx,é‚£è¿”å›å€¼çš„ç”Ÿå‘½å‘¨æœŸåº”è¯¥è·Ÿxä¸€æ ·</li>
<li>å¦‚æœæ¥è‡ªy,é‚£è¿”å›å€¼çš„ç”Ÿå‘½å‘¨æœŸåº”è¯¥è·Ÿyä¸€æ ·</li>
<li>ä½†æˆ‘ä¸èƒ½åœ¨ç¼–è¯‘æ—¶ç¡®å®šä¼šèµ°å“ªä¸ªåˆ†æ”¯...</li>
</ul>
<p>ç¼–è¯‘å™¨:æˆ‘å¤ªéš¾äº†ğŸ˜­</p>
<p>è¿™æ—¶å°±éœ€è¦æˆ‘ä»¬æ˜¾å¼åœ°å‘Šè¯‰ç¼–è¯‘å™¨ç”Ÿå‘½å‘¨æœŸå…³ç³»ã€‚</p>
<h2 data-id="heading-3">What - ç”Ÿå‘½å‘¨æœŸåˆ°åº•æ˜¯ä»€ä¹ˆ?</h2>
<h3 data-id="heading-4">ç”Ÿå‘½å‘¨æœŸçš„æœ¬è´¨</h3>
<p>ç”Ÿå‘½å‘¨æœŸä¸æ˜¯ä»€ä¹ˆç„å­¦,å®ƒå°±æ˜¯<strong>å¼•ç”¨ä¿æŒæœ‰æ•ˆçš„ä½œç”¨åŸŸèŒƒå›´</strong>ã€‚å¯ä»¥æŠŠå®ƒæƒ³è±¡æˆ:</p>
<ul>
<li><strong>ç”Ÿå‘½å‘¨æœŸæ ‡æ³¨</strong>(<code>'a</code>ã€<code>'b</code>ç­‰):åƒç»™å¼•ç”¨è´´ä¸Šæœ‰æ•ˆæœŸæ ‡ç­¾</li>
<li><strong>å€Ÿç”¨æ£€æŸ¥å™¨</strong>:åƒä¸€ä¸ªä¸¥æ ¼çš„è´¨æ£€å‘˜,ç¡®ä¿æ²¡æœ‰è¿‡æœŸå¼•ç”¨è¢«ä½¿ç”¨</li>
</ul>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">string1</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">"long string"</span>);
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">result</span>;
    {
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">string2</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">"xyz"</span>);
        result = <span class="hljs-title function_ invoke__">longest</span>(string1.<span class="hljs-title function_ invoke__">as_str</span>(), string2.<span class="hljs-title function_ invoke__">as_str</span>());
        <span class="hljs-comment">// resultçš„ç”Ÿå‘½å‘¨æœŸä¸èƒ½è¶…è¿‡string2</span>
    }  <span class="hljs-comment">// string2åœ¨è¿™é‡Œç»“æŸ</span>
    <span class="hljs-comment">// println!("{}", result);  // ğŸ’¥ string2å·²ç»ä¸åœ¨äº†!</span>
}
</code></pre>
<h3 data-id="heading-5">ç”Ÿå‘½å‘¨æœŸæ ‡æ³¨è¯­æ³•</h3>
<pre><code class="hljs language-rust" lang="rust">&amp;<span class="hljs-type">i32</span>        <span class="hljs-comment">// æ™®é€šå¼•ç”¨</span>
&amp;<span class="hljs-symbol">'a</span> <span class="hljs-type">i32</span>     <span class="hljs-comment">// å¸¦ç”Ÿå‘½å‘¨æœŸæ ‡æ³¨çš„å¼•ç”¨</span>
&amp;<span class="hljs-symbol">'a</span> <span class="hljs-keyword">mut</span> <span class="hljs-type">i32</span> <span class="hljs-comment">// å¸¦ç”Ÿå‘½å‘¨æœŸæ ‡æ³¨çš„å¯å˜å¼•ç”¨</span>
</code></pre>
<p><code>'a</code>è¯»ä½œ"tick a",å°±åƒç»™å¼•ç”¨è´´äº†ä¸ªæ ‡ç­¾:"å˜¿,æˆ‘çš„æœ‰æ•ˆæœŸæ˜¯'a"ã€‚</p>
<h2 data-id="heading-6">How - å¦‚ä½•æ­£ç¡®ä½¿ç”¨ç”Ÿå‘½å‘¨æœŸ?</h2>
<h3 data-id="heading-7">1. å‡½æ•°ä¸­çš„ç”Ÿå‘½å‘¨æœŸæ ‡æ³¨</h3>
<p>å›åˆ°ä¹‹å‰çš„<code>longest</code>å‡½æ•°:</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">longest</span>&lt;<span class="hljs-symbol">'a</span>&gt;(x: &amp;<span class="hljs-symbol">'a</span> <span class="hljs-type">str</span>, y: &amp;<span class="hljs-symbol">'a</span> <span class="hljs-type">str</span>) <span class="hljs-punctuation">-&gt;</span> &amp;<span class="hljs-symbol">'a</span> <span class="hljs-type">str</span> {
    <span class="hljs-keyword">if</span> x.<span class="hljs-title function_ invoke__">len</span>() &gt; y.<span class="hljs-title function_ invoke__">len</span>() {
        x
    } <span class="hljs-keyword">else</span> {
        y
    }
}
</code></pre>
<p>è¿™ä¸ªæ ‡æ³¨å‘Šè¯‰ç¼–è¯‘å™¨:</p>
<ul>
<li><code>x</code>å’Œ<code>y</code>éƒ½åœ¨ç”Ÿå‘½å‘¨æœŸ<code>'a</code>å†…æœ‰æ•ˆ</li>
<li>è¿”å›å€¼ä¹Ÿåœ¨ç”Ÿå‘½å‘¨æœŸ<code>'a</code>å†…æœ‰æ•ˆ</li>
<li>å®é™…ä¸Š<code>'a</code>æ˜¯<code>x</code>å’Œ<code>y</code>ç”Ÿå‘½å‘¨æœŸçš„<strong>äº¤é›†</strong>ï¼ˆè¾ƒçŸ­çš„é‚£ä¸ªï¼‰</li>
</ul>
<p>ç”¨å¤§ç™½è¯è¯´å°±æ˜¯:"è¿”å›å€¼çš„æœ‰æ•ˆæœŸä¸ä¼šè¶…è¿‡ä¸¤ä¸ªå‚æ•°ä¸­æœ€çŸ­çš„é‚£ä¸ª"ã€‚</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">string1</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">"long string is long"</span>);
    
    {
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">string2</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">"xyz"</span>);
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">result</span> = <span class="hljs-title function_ invoke__">longest</span>(string1.<span class="hljs-title function_ invoke__">as_str</span>(), string2.<span class="hljs-title function_ invoke__">as_str</span>());
        <span class="hljs-built_in">println!</span>(<span class="hljs-string">"The longest string is {}"</span>, result);
        <span class="hljs-comment">// âœ… åœ¨string2çš„ä½œç”¨åŸŸå†…ä½¿ç”¨result,å®Œå…¨OK</span>
    }
}
</code></pre>
<h3 data-id="heading-8">2. ç”Ÿå‘½å‘¨æœŸçœç•¥è§„åˆ™</h3>
<p>å¥½æ¶ˆæ¯!å¤§å¤šæ•°æƒ…å†µä¸‹ä¸éœ€è¦æ‰‹åŠ¨æ ‡æ³¨ç”Ÿå‘½å‘¨æœŸ,ç¼–è¯‘å™¨ä¼šè‡ªåŠ¨æ¨å¯¼ã€‚è¿™å¾—ç›Šäºä¸‰æ¡<strong>ç”Ÿå‘½å‘¨æœŸçœç•¥è§„åˆ™</strong>:</p>
<p><strong>è§„åˆ™1</strong>: æ¯ä¸ªå¼•ç”¨å‚æ•°éƒ½æœ‰è‡ªå·±çš„ç”Ÿå‘½å‘¨æœŸ</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-comment">// ä½ å†™çš„</span>
<span class="hljs-keyword">fn</span> <span class="hljs-title function_">first_word</span>(s: &amp;<span class="hljs-type">str</span>) <span class="hljs-punctuation">-&gt;</span> &amp;<span class="hljs-type">str</span> {

<span class="hljs-comment">// ç¼–è¯‘å™¨ç†è§£çš„</span>
<span class="hljs-keyword">fn</span> <span class="hljs-title function_">first_word</span>&lt;<span class="hljs-symbol">'a</span>&gt;(s: &amp;<span class="hljs-symbol">'a</span> <span class="hljs-type">str</span>) <span class="hljs-punctuation">-&gt;</span> &amp;<span class="hljs-type">str</span> {
</code></pre>
<p><strong>è§„åˆ™2</strong>: å¦‚æœåªæœ‰ä¸€ä¸ªè¾“å…¥ç”Ÿå‘½å‘¨æœŸå‚æ•°,å®ƒè¢«èµ‹äºˆæ‰€æœ‰è¾“å‡ºç”Ÿå‘½å‘¨æœŸ</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-comment">// ä½ å†™çš„</span>
<span class="hljs-keyword">fn</span> <span class="hljs-title function_">first_word</span>(s: &amp;<span class="hljs-type">str</span>) <span class="hljs-punctuation">-&gt;</span> &amp;<span class="hljs-type">str</span> {

<span class="hljs-comment">// ç¼–è¯‘å™¨ç†è§£çš„</span>
<span class="hljs-keyword">fn</span> <span class="hljs-title function_">first_word</span>&lt;<span class="hljs-symbol">'a</span>&gt;(s: &amp;<span class="hljs-symbol">'a</span> <span class="hljs-type">str</span>) <span class="hljs-punctuation">-&gt;</span> &amp;<span class="hljs-symbol">'a</span> <span class="hljs-type">str</span> {
</code></pre>
<p><strong>è§„åˆ™3</strong>: å¦‚æœæœ‰å¤šä¸ªè¾“å…¥ç”Ÿå‘½å‘¨æœŸå‚æ•°,ä½†å…¶ä¸­ä¸€ä¸ªæ˜¯<code>&amp;self</code>æˆ–<code>&amp;mut self</code>,é‚£ä¹ˆ<code>self</code>çš„ç”Ÿå‘½å‘¨æœŸè¢«èµ‹äºˆæ‰€æœ‰è¾“å‡ºç”Ÿå‘½å‘¨æœŸ</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">impl</span>&lt;<span class="hljs-symbol">'a</span>&gt; ImportantExcerpt&lt;<span class="hljs-symbol">'a</span>&gt; {
    <span class="hljs-comment">// ä½ å†™çš„</span>
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">announce_and_return_part</span>(&amp;<span class="hljs-keyword">self</span>, announcement: &amp;<span class="hljs-type">str</span>) <span class="hljs-punctuation">-&gt;</span> &amp;<span class="hljs-type">str</span> {
        <span class="hljs-built_in">println!</span>(<span class="hljs-string">"Attention: {}"</span>, announcement);
        <span class="hljs-keyword">self</span>.part
    }
    
    <span class="hljs-comment">// ç¼–è¯‘å™¨ç†è§£çš„(selfçš„ç”Ÿå‘½å‘¨æœŸèµ‹ç»™è¿”å›å€¼)</span>
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">announce_and_return_part</span>&lt;<span class="hljs-symbol">'b</span>&gt;(&amp;<span class="hljs-symbol">'a</span> <span class="hljs-keyword">self</span>, announcement: &amp;<span class="hljs-symbol">'b</span> <span class="hljs-type">str</span>) <span class="hljs-punctuation">-&gt;</span> &amp;<span class="hljs-symbol">'a</span> <span class="hljs-type">str</span> {
        <span class="hljs-built_in">println!</span>(<span class="hljs-string">"Attention: {}"</span>, announcement);
        <span class="hljs-keyword">self</span>.part
    }
}
</code></pre>
<h3 data-id="heading-9">3. ç»“æ„ä½“ä¸­çš„ç”Ÿå‘½å‘¨æœŸ</h3>
<p>ç»“æ„ä½“ä¸­åŒ…å«å¼•ç”¨æ—¶,å¿…é¡»æ ‡æ³¨ç”Ÿå‘½å‘¨æœŸ:</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">ImportantExcerpt</span>&lt;<span class="hljs-symbol">'a</span>&gt; {
    part: &amp;<span class="hljs-symbol">'a</span> <span class="hljs-type">str</span>,
}

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">novel</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">"Call me Ishmael. Some years ago..."</span>);
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">first_sentence</span> = novel.<span class="hljs-title function_ invoke__">split</span>(<span class="hljs-string">'.'</span>).<span class="hljs-title function_ invoke__">next</span>().<span class="hljs-title function_ invoke__">expect</span>(<span class="hljs-string">"Could not find a '.'"</span>);
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">excerpt</span> = ImportantExcerpt {
        part: first_sentence,
    };
    <span class="hljs-comment">// excerptçš„ç”Ÿå‘½å‘¨æœŸä¸èƒ½è¶…è¿‡novel</span>
}
</code></pre>
<p>è¿™ä¸ªæ ‡æ³¨æ„å‘³ç€:<code>ImportantExcerpt</code>çš„å®ä¾‹ä¸èƒ½æ¯”å®ƒå¼•ç”¨çš„<code>part</code>æ´»å¾—æ›´ä¹…ã€‚</p>
<h3 data-id="heading-10">4. å¤šä¸ªç”Ÿå‘½å‘¨æœŸå‚æ•°</h3>
<p>æœ‰æ—¶éœ€è¦ä¸åŒçš„ç”Ÿå‘½å‘¨æœŸå‚æ•°:</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">announce</span>&lt;<span class="hljs-symbol">'a</span>, <span class="hljs-symbol">'b</span>&gt;(x: &amp;<span class="hljs-symbol">'a</span> <span class="hljs-type">str</span>, y: &amp;<span class="hljs-symbol">'b</span> <span class="hljs-type">str</span>) <span class="hljs-punctuation">-&gt;</span> &amp;<span class="hljs-symbol">'a</span> <span class="hljs-type">str</span> {
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"Announcement: {}"</span>, y);
    x  <span class="hljs-comment">// åªè¿”å›x,æ‰€ä»¥è¿”å›å€¼ç”Ÿå‘½å‘¨æœŸåªè·Ÿ'aå…³è”</span>
}
</code></pre>
<h3 data-id="heading-11">5. é™æ€ç”Ÿå‘½å‘¨æœŸ <code>'static</code></h3>
<p><code>'static</code>æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„ç”Ÿå‘½å‘¨æœŸ,è¡¨ç¤º"æ´»åˆ°ç¨‹åºç»“æŸ":</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">s</span>: &amp;<span class="hljs-symbol">'static</span> <span class="hljs-type">str</span> = <span class="hljs-string">"I have a static lifetime."</span>;
<span class="hljs-comment">// å­—ç¬¦ä¸²å­—é¢é‡å­˜å‚¨åœ¨ç¨‹åºçš„äºŒè¿›åˆ¶æ–‡ä»¶ä¸­,æ°¸è¿œæœ‰æ•ˆ</span>
</code></pre>
<p><strong>æ³¨æ„</strong>:ä¸è¦æ»¥ç”¨<code>'static</code>!çœ‹åˆ°ç”Ÿå‘½å‘¨æœŸé”™è¯¯å°±åŠ <code>'static</code>æ˜¯æ–°æ‰‹å¸¸çŠ¯çš„é”™è¯¯ã€‚</p>
<h2 data-id="heading-12">å®æˆ˜æ¼”ç»ƒ:å¸¸è§æ¨¡å¼</h2>
<h3 data-id="heading-13">æ¨¡å¼1: è¿”å›å¼•ç”¨</h3>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-comment">// âŒ é”™è¯¯:è¿”å›å±€éƒ¨å˜é‡çš„å¼•ç”¨</span>
<span class="hljs-keyword">fn</span> <span class="hljs-title function_">dangle</span>() <span class="hljs-punctuation">-&gt;</span> &amp;<span class="hljs-type">str</span> {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">s</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">"hello"</span>);
    &amp;s
}  <span class="hljs-comment">// såœ¨è¿™é‡Œè¢«é‡Šæ”¾,è¿”å›æ‚¬å‚å¼•ç”¨</span>

<span class="hljs-comment">// âœ… æ­£ç¡®:è¿”å›æ‰€æœ‰æƒ</span>
<span class="hljs-keyword">fn</span> <span class="hljs-title function_">no_dangle</span>() <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span> {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">s</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">"hello"</span>);
    s
}
</code></pre>
<h3 data-id="heading-14">æ¨¡å¼2: ç»“æ„ä½“æ–¹æ³•</h3>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Book</span>&lt;<span class="hljs-symbol">'a</span>&gt; {
    title: &amp;<span class="hljs-symbol">'a</span> <span class="hljs-type">str</span>,
    author: &amp;<span class="hljs-symbol">'a</span> <span class="hljs-type">str</span>,
}

<span class="hljs-keyword">impl</span>&lt;<span class="hljs-symbol">'a</span>&gt; Book&lt;<span class="hljs-symbol">'a</span>&gt; {
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">new</span>(title: &amp;<span class="hljs-symbol">'a</span> <span class="hljs-type">str</span>, author: &amp;<span class="hljs-symbol">'a</span> <span class="hljs-type">str</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-keyword">Self</span> {
        Book { title, author }
    }
    
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">get_title</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> &amp;<span class="hljs-type">str</span> {
        <span class="hljs-comment">// çœç•¥äº†ç”Ÿå‘½å‘¨æœŸ,ç¼–è¯‘å™¨è‡ªåŠ¨æ¨å¯¼ä¸º&amp;'a str</span>
        <span class="hljs-keyword">self</span>.title
    }
}
</code></pre>
<h3 data-id="heading-15">æ¨¡å¼3: ç”Ÿå‘½å‘¨æœŸè¾¹ç•Œ</h3>
<p>ç»“åˆæ³›å‹ä½¿ç”¨:</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> std::fmt::Display;

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">longest_with_announcement</span>&lt;<span class="hljs-symbol">'a</span>, T&gt;(
    x: &amp;<span class="hljs-symbol">'a</span> <span class="hljs-type">str</span>,
    y: &amp;<span class="hljs-symbol">'a</span> <span class="hljs-type">str</span>,
    ann: T,
) <span class="hljs-punctuation">-&gt;</span> &amp;<span class="hljs-symbol">'a</span> <span class="hljs-type">str</span>
<span class="hljs-keyword">where</span>
    T: Display,
{
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"Announcement: {}"</span>, ann);
    <span class="hljs-keyword">if</span> x.<span class="hljs-title function_ invoke__">len</span>() &gt; y.<span class="hljs-title function_ invoke__">len</span>() {
        x
    } <span class="hljs-keyword">else</span> {
        y
    }
}
</code></pre>
<h2 data-id="heading-16">é¿å‘æŒ‡å—</h2>
<h3 data-id="heading-17">å‘1: è¿‡åº¦ä½¿ç”¨ <code>'static</code></h3>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-comment">// âŒ é”™è¯¯æ€è·¯</span>
<span class="hljs-keyword">fn</span> <span class="hljs-title function_">bad_fix</span>&lt;<span class="hljs-symbol">'a</span>&gt;(x: &amp;<span class="hljs-symbol">'a</span> <span class="hljs-type">str</span>) <span class="hljs-punctuation">-&gt;</span> &amp;<span class="hljs-symbol">'static</span> <span class="hljs-type">str</span> {
    x  <span class="hljs-comment">// ğŸ’¥ ç”Ÿå‘½å‘¨æœŸä¸åŒ¹é…!</span>
}

<span class="hljs-comment">// âœ… æ­£ç¡®æ€è·¯</span>
<span class="hljs-keyword">fn</span> <span class="hljs-title function_">good_fix</span>&lt;<span class="hljs-symbol">'a</span>&gt;(x: &amp;<span class="hljs-symbol">'a</span> <span class="hljs-type">str</span>) <span class="hljs-punctuation">-&gt;</span> &amp;<span class="hljs-symbol">'a</span> <span class="hljs-type">str</span> {
    x
}
</code></pre>
<h3 data-id="heading-18">å‘2: æ··æ·†ç”Ÿå‘½å‘¨æœŸå’Œä½œç”¨åŸŸ</h3>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">r</span>;                <span class="hljs-comment">// ---------+-- 'a</span>
                          <span class="hljs-comment">//          |</span>
    {                     <span class="hljs-comment">//          |</span>
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">x</span> = <span class="hljs-number">5</span>;        <span class="hljs-comment">// -+-- 'b  |</span>
        r = &amp;x;           <span class="hljs-comment">//  |       |</span>
    }                     <span class="hljs-comment">// -+       |</span>
                          <span class="hljs-comment">//          |</span>
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"r: {}"</span>, r); <span class="hljs-comment">//          |</span>
}                         <span class="hljs-comment">// ---------+</span>
</code></pre>
<p><code>'b</code>æ¯”<code>'a</code>çŸ­,æ‰€ä»¥<code>r</code>ä¸èƒ½å¼•ç”¨<code>x</code>ã€‚</p>
<h3 data-id="heading-19">å‘3: ç»“æ„ä½“çš„è‡ªå¼•ç”¨</h3>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-comment">// âŒ è¿™ä¸ªä¸èƒ½ç›´æ¥ç¼–è¯‘</span>
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">SelfRef</span>&lt;<span class="hljs-symbol">'a</span>&gt; {
    value: <span class="hljs-type">String</span>,
    pointer: &amp;<span class="hljs-symbol">'a</span> <span class="hljs-type">String</span>,  <span class="hljs-comment">// æƒ³å¼•ç”¨è‡ªå·±çš„value</span>
}
</code></pre>
<p>è‡ªå¼•ç”¨éœ€è¦ä½¿ç”¨<code>Pin</code>ç­‰é«˜çº§æŠ€å·§,åˆå­¦è€…å»ºè®®é¿å…ã€‚</p>
<h2 data-id="heading-20">ç”Ÿå‘½å‘¨æœŸçš„å“²å­¦æ€è€ƒ</h2>
<p>ç”Ÿå‘½å‘¨æœŸæœ¬è´¨ä¸Šæ˜¯<strong>æ‰€æœ‰æƒç³»ç»Ÿçš„å»¶ä¼¸</strong>:</p>
<ul>
<li><strong>æ‰€æœ‰æƒ</strong>:ç¡®ä¿èµ„æºæœ‰ä¸”åªæœ‰ä¸€ä¸ªä¸»äºº</li>
<li><strong>å€Ÿç”¨</strong>:å…è®¸ä¸´æ—¶è®¿é—®èµ„æº</li>
<li><strong>ç”Ÿå‘½å‘¨æœŸ</strong>:ç¡®ä¿å€Ÿç”¨åœ¨èµ„æºæœ‰æ•ˆæœŸå†…</li>
</ul>
<p>å®ƒä»¬å…±åŒæ„æˆäº†Rustå†…å­˜å®‰å…¨çš„é“ä¸‰è§’ã€‚</p>
<h2 data-id="heading-21">å°ç»“</h2>
<p>ç”Ÿå‘½å‘¨æœŸæ˜¯Rustçš„"æ€æ‰‹é”",ä¹Ÿæ˜¯åˆå­¦è€…çš„"æ‹¦è·¯è™"ã€‚ä½†è®°ä½:</p>
<ol>
<li><strong>ç”Ÿå‘½å‘¨æœŸæ˜¯ç¼–è¯‘æœŸæ¦‚å¿µ</strong>,è¿è¡Œæ—¶æ²¡æœ‰æ€§èƒ½å¼€é”€</li>
<li><strong>å¤§å¤šæ•°æƒ…å†µä¸éœ€è¦æ‰‹åŠ¨æ ‡æ³¨</strong>,æ„Ÿè°¢ç”Ÿå‘½å‘¨æœŸçœç•¥è§„åˆ™</li>
<li><strong>ç¼–è¯‘å™¨é”™è¯¯æ˜¯ä½ çš„æœ‹å‹</strong>,å®ƒé˜»æ­¢ä½ çŠ¯é”™</li>
<li><strong>å®è·µæ˜¯æœ€å¥½çš„è€å¸ˆ</strong>,å¤šå†™å¤šæ”¹å°±èƒ½æŒæ¡</li>
</ol>
<p>å½“ä½ ä¹ æƒ¯äº†ç”Ÿå‘½å‘¨æœŸ,ä½ ä¼šå‘ç°å®ƒå°±åƒä¸€ä½ä¸¥æ ¼ä½†è´Ÿè´£çš„è€å¸ˆâ€”â€”è™½ç„¶ä¸¥å‰,ä½†ç¡®å®è®©ä½ å†™å‡ºæ›´å®‰å…¨çš„ä»£ç ã€‚</p>
<p>ä¸‹ä¸€ç¯‡æˆ‘ä»¬å°†æ¢ç´¢Rustçš„é”™è¯¯å¤„ç†æœºåˆ¶â€”â€”å¦‚ä½•ä¼˜é›…åœ°å¤„ç†<code>Result</code>å’Œ<code>Option</code>ã€‚Stay tuned!</p>
<hr/>
<p><strong>ç»ƒä¹ é¢˜</strong>:è¯•ç€ç†è§£å¹¶ä¿®å¤ä»¥ä¸‹ä»£ç çš„ç”Ÿå‘½å‘¨æœŸé—®é¢˜</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">string1</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">"abcd"</span>);
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">result</span>;
    {
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">string2</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">"xyz"</span>);
        result = <span class="hljs-title function_ invoke__">longest</span>(string1.<span class="hljs-title function_ invoke__">as_str</span>(), string2.<span class="hljs-title function_ invoke__">as_str</span>());
    }
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"The longest string is {}"</span>, result);
}

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">longest</span>&lt;<span class="hljs-symbol">'a</span>&gt;(x: &amp;<span class="hljs-symbol">'a</span> <span class="hljs-type">str</span>, y: &amp;<span class="hljs-symbol">'a</span> <span class="hljs-type">str</span>) <span class="hljs-punctuation">-&gt;</span> &amp;<span class="hljs-symbol">'a</span> <span class="hljs-type">str</span> {
    <span class="hljs-keyword">if</span> x.<span class="hljs-title function_ invoke__">len</span>() &gt; y.<span class="hljs-title function_ invoke__">len</span>() { x } <span class="hljs-keyword">else</span> { y }
}
</code></pre>
<p>æç¤º:é—®é¢˜å‡ºåœ¨å“ªé‡Œ?å¦‚ä½•è°ƒæ•´ä»£ç ç»“æ„æ¥ä¿®å¤?</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ‰‹å†™ Promiseï¼šæ·±å…¥ç†è§£ JavaScript å¼‚æ­¥ç¼–ç¨‹çš„æ ¸å¿ƒ]]></title>    <link>https://juejin.cn/post/7580208715275976746</link>    <guid>https://juejin.cn/post/7580208715275976746</guid>    <pubDate>2025-12-06T05:35:06.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7580208715275976746" data-draft-id="7580208715275960362" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ‰‹å†™ Promiseï¼šæ·±å…¥ç†è§£ JavaScript å¼‚æ­¥ç¼–ç¨‹çš„æ ¸å¿ƒ"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,Promise"/> <meta itemprop="datePublished" content="2025-12-06T05:35:06.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="1024è‚¥å®…"/> <meta itemprop="url" content="https://juejin.cn/user/588993964030574"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ‰‹å†™ Promiseï¼šæ·±å…¥ç†è§£ JavaScript å¼‚æ­¥ç¼–ç¨‹çš„æ ¸å¿ƒ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/588993964030574/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    1024è‚¥å®…
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-06T05:35:06.000Z" title="Sat Dec 06 2025 05:35:06 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h4 data-id="heading-0">å¼•è¨€</h4>
<p>åœ¨ç°ä»£ JavaScript å¼€å‘ä¸­ï¼Œ<code>Promise</code>æ˜¯å¤„ç†å¼‚æ­¥æ“ä½œçš„åŸºçŸ³ã€‚ä»å›è°ƒåœ°ç‹±é“ <code>async/await</code> çš„ä¼˜é›…ï¼Œ<code>Promise</code> æ‰®æ¼”äº†å…³é”®è§’è‰²ã€‚ä½†æ˜¯ï¼Œä½ çœŸçš„ç†è§£ <code>Promise</code> æ˜¯å¦‚ä½•å·¥ä½œçš„å—?</p>
<p>é€šè¿‡æ‰‹å†™ä¸€ä¸ªç¬¦åˆ <code>Promise/A+</code> è§„èŒƒçš„ <code>Promise</code>, æˆ‘ä»¬ä¸ä»…èƒ½æ·±å…¥ç†è§£å¼‚æ­¥ç¼–ç¨‹çš„æœºåˆ¶ï¼Œè¿˜èƒ½æŒæ¡ JavaScript ä¸­è®¸å¤šæ ¸å¿ƒæ¦‚å¿µ: å¾®ä»»åŠ¡ã€äº‹ä»¶å¾ªç¯ã€çŠ¶æ€æœºç­‰ã€‚æ›´é‡è¦çš„æ˜¯ï¼Œè¿™åœ¨é¢è¯•ä¸­æ˜¯å¿…è€ƒçš„é«˜é¢‘é¢˜ç›®ï¼</p>
<p>æœ¬æ–‡å°†å¸¦ä½ ä»é›¶å®ç°ä¸€ä¸ªå®Œæ•´çš„ <code>Promise</code>ï¼Œå¹¶æ·±å…¥æ¢è®¨å…¶è®¾è®¡åŸç†å’Œå®ç°ç»†èŠ‚ã€‚</p>
<h4 data-id="heading-1">ä¸€ã€Promiseçš„æ ¸å¿ƒæ¦‚å¿µ</h4>
<h5 data-id="heading-2">1.1 Promiseçš„ä¸‰ç§çŠ¶æ€</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// Promiseçš„ä¸‰ç§çŠ¶æ€</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">PENDING</span> = <span class="hljs-string">'pending'</span>;
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">FULFILLED</span> = <span class="hljs-string">'fulfilled'</span>;
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">REJECTED</span> = <span class="hljs-string">'rejected'</span>;
</code></pre>
<h5 data-id="heading-3">1.2 Promise/A+è§„èŒƒè¦ç‚¹</h5>
<ol>
<li><code>Promise</code>å¿…é¡»å¤„äºä¸‰ç§çŠ¶æ€ä¹‹ä¸€: pendingã€fulfilledã€rejected</li>
<li>çŠ¶æ€ä¸€æ—¦æ”¹å˜ï¼Œå°±ä¸èƒ½å†æ¬¡æ”¹å˜(ä¸å¯é€†æ€§)</li>
<li><code>then</code>æ–¹æ³•å¿…é¡»è¿”å›ä¸€ä¸ªæ–°çš„ <code>Promise</code></li>
<li><code>then</code>æ–¹æ³•å¯ä»¥è¢«åŒä¸€ä¸ª<code>Promise</code>è°ƒç”¨å¤šæ¬¡</li>
<li>å€¼ç©¿é€(value penetration)</li>
<li>é”™è¯¯å†’æ³¡(error bubbling)</li>
</ol>
<h4 data-id="heading-4">äºŒã€åŸºç¡€Promiseçš„å®ç°</h4>
<h5 data-id="heading-5">2.1 åŸºç¡€éª¨æ¶</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyPromise</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">executor</span>) {
    <span class="hljs-comment">// åˆå§‹çŠ¶æ€</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = <span class="hljs-string">"PENDING"</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span> = <span class="hljs-literal">undefined</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">reason</span> = <span class="hljs-literal">undefined</span>;

    <span class="hljs-comment">// ç”¨äºå­˜å‚¨ then æ–¹æ³•çš„å›è°ƒå‡½æ•°</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">onFulfilledCallbacks</span> = [];
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">onRejectedCallbacks</span> = [];

    <span class="hljs-comment">// æ‰§è¡Œå™¨å‡½æ•°</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">resolve</span> = (<span class="hljs-params">value</span>) =&gt; {
      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> === <span class="hljs-string">"PENDING"</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = <span class="hljs-string">"FULFILLED"</span>;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span> = value;
        <span class="hljs-comment">// æ‰§è¡Œæ‰€æœ‰æˆåŠŸå›è°ƒ</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">onFulfilledCallbacks</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">callback</span>) =&gt;</span> <span class="hljs-title function_">callback</span>());
      }
    };

    <span class="hljs-keyword">const</span> <span class="hljs-title function_">reject</span> = (<span class="hljs-params">reason</span>) =&gt; {
      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> === <span class="hljs-string">"PENDING"</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = <span class="hljs-string">"REJECTED"</span>;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">reason</span> = reason;
        <span class="hljs-comment">// æ‰§è¡Œæ‰€æœ‰å¤±è´¥å›è°ƒ</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">onRejectedCallbacks</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">callback</span>) =&gt;</span> <span class="hljs-title function_">callback</span>());
      }
    };

    <span class="hljs-keyword">try</span> {
      <span class="hljs-title function_">executor</span>(resolve, reject);
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-title function_">reject</span>(error);
    }
  }

  <span class="hljs-title function_">then</span>(<span class="hljs-params">onFulfilled, onRejected</span>) {
    <span class="hljs-comment">// åŸºç¡€å®ç°ï¼Œåç»­ä¼šå®Œå–„</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> === <span class="hljs-string">"FULFILLED"</span>) {
      <span class="hljs-title function_">onFulfilled</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span>);
    }
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> === <span class="hljs-string">"REJECTED"</span>) {
      <span class="hljs-title function_">onRejected</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">reason</span>);
    }
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> === <span class="hljs-string">"PENDING"</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">onFulfilledCallbacks</span>.<span class="hljs-title function_">push</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">onFulfilled</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span>));
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">onRejectedCallbacks</span>.<span class="hljs-title function_">push</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">onRejected</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">reason</span>));
    }
  }
}

<span class="hljs-comment">// åŸºç¡€ä½¿ç”¨</span>
<span class="hljs-keyword">const</span> promise = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyPromise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">resolve</span>(<span class="hljs-string">"success"</span>);
  }, <span class="hljs-number">1000</span>);
});

promise.<span class="hljs-title function_">then</span>(
  <span class="hljs-function">(<span class="hljs-params">value</span>) =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"æˆåŠŸ:"</span>, value),
  <span class="hljs-function">(<span class="hljs-params">reason</span>) =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"å¤±è´¥:"</span>, reason)
);
<span class="hljs-comment">// æˆåŠŸ: success</span>
</code></pre>
<h4 data-id="heading-6">ä¸‰ã€å®Œæ•´Promiseå®ç°(ç¬¦åˆPromise/A+è§„èŒƒ)</h4>
<h5 data-id="heading-7">3.1 å®Œæ•´çš„MyPromiseç±»</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å®šä¹‰Promiseçš„ä¸‰ç§çŠ¶æ€</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">PENDING</span> = <span class="hljs-string">"pending"</span>;
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">FULFILLED</span> = <span class="hljs-string">"fulfilled"</span>;
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">REJECTED</span> = <span class="hljs-string">"rejected"</span>;

<span class="hljs-comment">// åˆ¤æ–­æ˜¯å¦ä¸ºå‡½æ•°</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">isFunction</span> = (<span class="hljs-params">fn</span>) =&gt; <span class="hljs-keyword">typeof</span> fn === <span class="hljs-string">"function"</span>;

<span class="hljs-comment">// å¤„ç†thenæ–¹æ³•ä¸­çš„å›è°ƒï¼Œç¡®ä¿æ€»æ˜¯å¼‚æ­¥æ‰§è¡Œ</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">nextTick</span> = (<span class="hljs-params">fn</span>) =&gt; {
  <span class="hljs-comment">// ä½¿ç”¨å¾®ä»»åŠ¡(ä¼˜å…ˆ)æˆ–å®ä»»åŠ¡</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> process !== <span class="hljs-string">"undefined"</span> &amp;&amp; process.<span class="hljs-property">nextTick</span>) {
    process.<span class="hljs-title function_">nextTick</span>(fn); <span class="hljs-comment">// NodeJSç¯å¢ƒ</span>
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-title class_">MutationObserver</span> !== <span class="hljs-string">"undefined"</span>) {
    <span class="hljs-comment">// æµè§ˆå™¨ç¯å¢ƒä½¿ç”¨ MutationObserver æ¨¡æ‹Ÿå¾®ä»»åŠ¡</span>
    <span class="hljs-keyword">let</span> counter = <span class="hljs-number">1</span>;
    <span class="hljs-keyword">const</span> observer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MutationObserver</span>(fn);
    <span class="hljs-keyword">const</span> textNode = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createTextNode</span>(<span class="hljs-title class_">String</span>(counter));
    observer.<span class="hljs-title function_">observe</span>(textNode, { <span class="hljs-attr">characterData</span>: <span class="hljs-literal">true</span> });
    counter = (counter + <span class="hljs-number">1</span>) % <span class="hljs-number">2</span>;
    textNode.<span class="hljs-property">data</span> = <span class="hljs-title class_">String</span>(counter);
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-built_in">setTimeout</span>(fn, <span class="hljs-number">0</span>); <span class="hljs-comment">// é™çº§åˆ°å®ä»»åŠ¡</span>
  }
};

<span class="hljs-comment">// å¤„ç†Promiseè§£æè¿‡ç¨‹(Promise Resolution Procedure)</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">resolvePromise</span>(<span class="hljs-params">promise, x, resolve, reject</span>) {
  <span class="hljs-comment">// é˜²æ­¢å¾ªç¯å¼•ç”¨</span>
  <span class="hljs-keyword">if</span> (promise === x) {
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">TypeError</span>(<span class="hljs-string">"Chaining cycle detected for promise"</span>));
  }

  <span class="hljs-comment">// æ ‡è®°æ˜¯å¦å·²è°ƒç”¨, é˜²æ­¢å¤šæ¬¡è°ƒç”¨</span>
  <span class="hljs-keyword">let</span> called = <span class="hljs-literal">false</span>;

  <span class="hljs-keyword">if</span> (x !== <span class="hljs-literal">null</span> &amp;&amp; (<span class="hljs-keyword">typeof</span> x === <span class="hljs-string">"object"</span> || <span class="hljs-keyword">typeof</span> x === <span class="hljs-string">"function"</span>)) {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-comment">// è·å– then æ–¹æ³•</span>
      <span class="hljs-keyword">const</span> then = x.<span class="hljs-property">then</span>;

      <span class="hljs-comment">// å¦‚æœthenæ˜¯å‡½æ•°,åˆ™è®¤ä¸ºxæ˜¯ä¸€ä¸ªthenableå¯¹è±¡</span>
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> then === <span class="hljs-string">"function"</span>) {
        then.<span class="hljs-title function_">call</span>(
          x,
          <span class="hljs-function">(<span class="hljs-params">y</span>) =&gt;</span> {
            <span class="hljs-keyword">if</span> (called) <span class="hljs-keyword">return</span>;
            called = <span class="hljs-literal">true</span>;
            <span class="hljs-comment">// é€’å½’è§£æï¼Œç›´åˆ°å¾—åˆ°éPromiseå€¼</span>
            <span class="hljs-title function_">resolvePromise</span>(promise, x, resolve, reject);
          },
          <span class="hljs-function">(<span class="hljs-params">r</span>) =&gt;</span> {
            <span class="hljs-keyword">if</span> (called) <span class="hljs-keyword">return</span>;
            called = <span class="hljs-literal">true</span>;
            <span class="hljs-title function_">reject</span>(r);
          }
        );
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-comment">// å¦‚æœ then ä¸æ˜¯å‡½æ•°ï¼Œç›´æ¥resolve x</span>
        <span class="hljs-title function_">resolve</span>(x);
      }
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-keyword">if</span> (called) <span class="hljs-keyword">return</span>;
      called = <span class="hljs-literal">true</span>;
      <span class="hljs-title function_">reject</span>(error);
    }
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// å¦‚æœxä¸æ˜¯å¯¹è±¡æˆ–å‡½æ•°, ç›´æ¥resolve x</span>
    <span class="hljs-title function_">resolve</span>(x);
  }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">MyPromise</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">executor</span>) {
    <span class="hljs-comment">// çŠ¶æ€</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = <span class="hljs-variable constant_">PENDING</span>;
    <span class="hljs-comment">// æˆåŠŸå€¼</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span> = <span class="hljs-literal">undefined</span>;
    <span class="hljs-comment">// å¤±è´¥å€¼</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">reason</span> = <span class="hljs-literal">undefined</span>;

    <span class="hljs-comment">// å­˜å‚¨å›è°ƒå‡½æ•°</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">onFulfilledCallbacks</span> = [];
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">onRejectedCallbacks</span> = [];

    <span class="hljs-comment">// å®šä¹‰resolveå‡½æ•°</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">resolve</span> = (<span class="hljs-params">value</span>) =&gt; {
      <span class="hljs-comment">// åªæœ‰ pending çŠ¶æ€å¯ä»¥æ”¹å˜</span>
      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> !== <span class="hljs-variable constant_">PENDING</span>) <span class="hljs-keyword">return</span>;

      <span class="hljs-comment">// å¦‚æœvalueæ˜¯ä¸€ä¸ªPromise, åˆ™ç­‰å¾…è¯¥Promiseå®Œæˆ</span>
      <span class="hljs-keyword">if</span> (value <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">MyPromise</span>) {
        value.<span class="hljs-title function_">then</span>(resolve, reject);
        <span class="hljs-keyword">return</span>;
      }

      <span class="hljs-comment">// å¼‚æ­¥æ‰§è¡Œ</span>
      <span class="hljs-title function_">nextTick</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> !== <span class="hljs-variable constant_">PENDING</span>) <span class="hljs-keyword">return</span>;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = <span class="hljs-variable constant_">FULFILLED</span>;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span> = value;
        <span class="hljs-comment">// æ‰§è¡Œæ‰€æœ‰æˆåŠŸå›è°ƒ</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">onFulfilledCallbacks</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">callback</span>) =&gt;</span> <span class="hljs-title function_">callback</span>());
      });
    };

    <span class="hljs-comment">// å®šä¹‰rejectå‡½æ•°</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">reject</span> = (<span class="hljs-params">reason</span>) =&gt; {
      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> !== <span class="hljs-variable constant_">PENDING</span>) <span class="hljs-keyword">return</span>;

      <span class="hljs-title function_">nextTick</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> !== <span class="hljs-variable constant_">PENDING</span>) <span class="hljs-keyword">return</span>;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = <span class="hljs-variable constant_">REJECTED</span>;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">reason</span> = reason;
        <span class="hljs-comment">// æ‰§è¡Œæ‰€æœ‰å¤±è´¥å›è°ƒ</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">onRejectedCallbacks</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">callback</span>) =&gt;</span> <span class="hljs-title function_">callback</span>());
      });
    };

    <span class="hljs-comment">// æ‰§è¡Œexecutor</span>
    <span class="hljs-keyword">try</span> {
      <span class="hljs-title function_">executor</span>(resolve, reject);
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-title function_">reject</span>(error);
    }
  }

  <span class="hljs-comment">// thenæ–¹æ³•</span>
  <span class="hljs-title function_">then</span>(<span class="hljs-params">onFulfilled, onRejected</span>) {
    <span class="hljs-comment">// å€¼ç©¿é€: å¦‚æœå‚æ•°ä¸æ˜¯å‡½æ•°ï¼Œåˆ™åˆ›å»ºä¸€ä¸ªå‡½æ•°ç›´æ¥ä¼ é€’å€¼</span>
    onFulfilled = <span class="hljs-title function_">isFunction</span>(onFulfilled) ? onFulfilled : <span class="hljs-function">(<span class="hljs-params">value</span>) =&gt;</span> value;
    onRejected = <span class="hljs-title function_">isFunction</span>(onRejected)
      ? onRejected
      : <span class="hljs-function">(<span class="hljs-params">reason</span>) =&gt;</span> {
          <span class="hljs-keyword">throw</span> reason;
        };

    <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªæ–°çš„Promise</span>
    <span class="hljs-keyword">const</span> promise2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyPromise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
      <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleFulfilled</span> = (<span class="hljs-params"/>) =&gt; {
        <span class="hljs-title function_">nextTick</span>(<span class="hljs-function">() =&gt;</span> {
          <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">const</span> x = <span class="hljs-title function_">onFulfilled</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span>);
            <span class="hljs-title function_">resolvePromise</span>(promise2, x, resolve, reject);
          } <span class="hljs-keyword">catch</span> (error) {
            <span class="hljs-title function_">reject</span>(error);
          }
        });
      };

      <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleRejected</span> = (<span class="hljs-params"/>) =&gt; {
        <span class="hljs-title function_">nextTick</span>(<span class="hljs-function">() =&gt;</span> {
          <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">const</span> x = <span class="hljs-title function_">onRejected</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">reason</span>);
            <span class="hljs-title function_">resolvePromise</span>(promise2, x, resolve, reject);
          } <span class="hljs-keyword">catch</span> (error) {
            <span class="hljs-title function_">reject</span>(error);
          }
        });
      };

      <span class="hljs-comment">// æ ¹æ®å½“å‰çŠ¶æ€æ‰§è¡Œä¸åŒçš„é€»è¾‘</span>
      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> === <span class="hljs-variable constant_">FULFILLED</span>) {
        <span class="hljs-title function_">handleFulfilled</span>();
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> === <span class="hljs-variable constant_">REJECTED</span>) {
        <span class="hljs-title function_">handleRejected</span>();
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-comment">// PENDINGçŠ¶æ€ï¼Œå°†å›è°ƒå­˜å‚¨èµ·æ¥</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">onFulfilledCallbacks</span>.<span class="hljs-title function_">push</span>(handleFulfilled);
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">onRejectedCallbacks</span>.<span class="hljs-title function_">push</span>(handleRejected);
      }
    });

    <span class="hljs-keyword">return</span> promise2;
  }

  <span class="hljs-comment">// catchæ–¹æ³•</span>
  <span class="hljs-keyword">catch</span>(onRejected) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">then</span>(<span class="hljs-literal">null</span>, onRejected);
  }

  <span class="hljs-comment">// finallyæ–¹æ³•</span>
  <span class="hljs-title function_">finally</span>(<span class="hljs-params">onFinally</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">then</span>(
      <span class="hljs-function">(<span class="hljs-params">value</span>) =&gt;</span> <span class="hljs-title class_">MyPromise</span>.<span class="hljs-title function_">resolve</span>(<span class="hljs-title function_">onFinally</span>()).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> value),
      <span class="hljs-function">(<span class="hljs-params">reason</span>) =&gt;</span>
        <span class="hljs-title class_">MyPromise</span>.<span class="hljs-title function_">resolve</span>(<span class="hljs-title function_">onFinally</span>()).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {
          <span class="hljs-keyword">throw</span> reason;
        })
    );
  }

  <span class="hljs-comment">// é™æ€æ–¹æ³•: resolve</span>
  <span class="hljs-keyword">static</span> <span class="hljs-title function_">resolve</span>(<span class="hljs-params">value</span>) {
    <span class="hljs-comment">// å¦‚æœå·²ç»æ˜¯Promiseå®ä¾‹ï¼Œç›´æ¥è¿”å›</span>
    <span class="hljs-keyword">if</span> (value <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">MyPromise</span>) {
      <span class="hljs-keyword">return</span> value;
    }

    <span class="hljs-comment">// å¦‚æœæ˜¯thenableå¯¹è±¡</span>
    <span class="hljs-keyword">if</span> (value &amp;&amp; <span class="hljs-keyword">typeof</span> value.<span class="hljs-property">then</span> === <span class="hljs-string">"function"</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyPromise</span>(value.<span class="hljs-property">then</span>);
    }

    <span class="hljs-comment">// å…¶ä»–æƒ…å†µ</span>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyPromise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> <span class="hljs-title function_">resolve</span>(value));
  }

  <span class="hljs-comment">// é™æ€æ–¹æ³•: reject</span>
  <span class="hljs-keyword">static</span> <span class="hljs-title function_">reject</span>(<span class="hljs-params">reason</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyPromise</span>(<span class="hljs-function">(<span class="hljs-params">_, reject</span>) =&gt;</span> <span class="hljs-title function_">reject</span>(reason));
  }

  <span class="hljs-comment">// é™æ€æ–¹æ³•: all</span>
  <span class="hljs-keyword">static</span> <span class="hljs-title function_">all</span>(<span class="hljs-params">promises</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyPromise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
      <span class="hljs-keyword">if</span> (!<span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(promises)) {
        <span class="hljs-keyword">return</span> <span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">TypeError</span>(<span class="hljs-string">"Argument must be an array"</span>));
      }

      <span class="hljs-keyword">const</span> results = [];
      <span class="hljs-keyword">let</span> completedCount = <span class="hljs-number">0</span>;

      <span class="hljs-keyword">if</span> (promises.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-title function_">resolve</span>(results);
      }

      <span class="hljs-keyword">const</span> <span class="hljs-title function_">processResult</span> = (<span class="hljs-params">index, value</span>) =&gt; {
        results[index] = value;
        completedCount++;

        <span class="hljs-keyword">if</span> (completedCount === promises.<span class="hljs-property">length</span>) {
          <span class="hljs-title function_">resolve</span>(results);
        }
      };

      promises.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">promise, index</span>) =&gt;</span> {
        <span class="hljs-title class_">MyPromise</span>.<span class="hljs-title function_">resolve</span>(promise).<span class="hljs-title function_">then</span>(
          <span class="hljs-function">(<span class="hljs-params">value</span>) =&gt;</span> <span class="hljs-title function_">processResult</span>(index, value),
          reject <span class="hljs-comment">// ä»»ä½•ä¸€ä¸ªå¤±è´¥ï¼Œæ•´ä¸ªPromiseå°±å¤±è´¥</span>
        );
      });
    });
  }

  <span class="hljs-comment">// é™æ€æ–¹æ³•: race</span>
  <span class="hljs-keyword">static</span> <span class="hljs-title function_">race</span>(<span class="hljs-params">promises</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyPromise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
      <span class="hljs-keyword">if</span> (!<span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(promises)) {
        <span class="hljs-keyword">return</span> <span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">TypeError</span>(<span class="hljs-string">"Argument must be an array"</span>));
      }

      promises.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">promise</span>) =&gt;</span> {
        <span class="hljs-title class_">MyPromise</span>.<span class="hljs-title function_">resolve</span>(promise).<span class="hljs-title function_">then</span>(resolve, reject);
      });
    });
  }

  <span class="hljs-comment">// é™æ€æ–¹æ³•: allSettled</span>
  <span class="hljs-keyword">static</span> <span class="hljs-title function_">allSettled</span>(<span class="hljs-params">promises</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyPromise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
      <span class="hljs-keyword">if</span> (!<span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(promises)) {
        <span class="hljs-keyword">return</span> <span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">TypeError</span>(<span class="hljs-string">"Argument must be an array"</span>));
      }

      <span class="hljs-keyword">const</span> results = [];
      <span class="hljs-keyword">let</span> completedCount = <span class="hljs-number">0</span>;

      <span class="hljs-keyword">if</span> (promises.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-title function_">resolve</span>(results);
      }

      <span class="hljs-keyword">const</span> <span class="hljs-title function_">processResult</span> = (<span class="hljs-params">index, status, value</span>) =&gt; {
        results[index] = {
          status,
          [status === <span class="hljs-string">"fulfilled"</span> ? <span class="hljs-string">"value"</span> : <span class="hljs-string">"reason"</span>]: value,
        };
        completedCount++;

        <span class="hljs-keyword">if</span> (completedCount === promises.<span class="hljs-property">length</span>) {
          <span class="hljs-title function_">resolve</span>(results);
        }
      };

      promises.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">promise, index</span>) =&gt;</span> {
        <span class="hljs-title class_">MyPromise</span>.<span class="hljs-title function_">resolve</span>(promise).<span class="hljs-title function_">then</span>(
          <span class="hljs-function">(<span class="hljs-params">value</span>) =&gt;</span> <span class="hljs-title function_">processResult</span>(index, <span class="hljs-string">"fulfilled"</span>, value),
          <span class="hljs-function">(<span class="hljs-params">reason</span>) =&gt;</span> <span class="hljs-title function_">processResult</span>(index, <span class="hljs-string">"rejected"</span>, reason)
        );
      });
    });
  }

  <span class="hljs-comment">// é™æ€æ–¹æ³•: any</span>
  <span class="hljs-keyword">static</span> <span class="hljs-title function_">any</span>(<span class="hljs-params">promises</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyPromise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
      <span class="hljs-keyword">if</span> (!<span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(promises)) {
        <span class="hljs-keyword">return</span> <span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">TypeError</span>(<span class="hljs-string">"Argument must be an array"</span>));
      }

      <span class="hljs-keyword">const</span> errors = [];
      <span class="hljs-keyword">let</span> rejectedCount = <span class="hljs-number">0</span>;

      <span class="hljs-keyword">if</span> (promises.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">AggregateError</span>([], <span class="hljs-string">"All promises were rejected"</span>));
      }

      promises.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">promise, index</span>) =&gt;</span> {
        <span class="hljs-title class_">MyPromise</span>.<span class="hljs-title function_">resolve</span>(promise).<span class="hljs-title function_">then</span>(resolve, <span class="hljs-function">(<span class="hljs-params">reason</span>) =&gt;</span> {
          errors[index] = reason;
          rejectedCount++;

          <span class="hljs-keyword">if</span> (rejectedCount === promises.<span class="hljs-property">length</span>) {
            <span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">AggregateError</span>(errors, <span class="hljs-string">"All promises were rejected"</span>));
          }
        });
      });
    });
  }
}
</code></pre>
<h4 data-id="heading-8">å››ã€æµ‹è¯•ç”¨ä¾‹</h4>
<h5 data-id="heading-9">4.1 åŸºç¡€åŠŸèƒ½æµ‹è¯•</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"=== åŸºç¡€åŠŸèƒ½æµ‹è¯• ==="</span>);

<span class="hljs-comment">// æµ‹è¯•1: åŸºç¡€å¼‚æ­¥æ“ä½œ</span>
<span class="hljs-keyword">const</span> p1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyPromise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">resolve</span>(<span class="hljs-string">"success"</span>), <span class="hljs-number">100</span>);
});

p1.<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">value</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"æµ‹è¯•1:"</span>, value); <span class="hljs-comment">// success</span>
});

<span class="hljs-comment">// æµ‹è¯•2: é“¾å¼è°ƒç”¨</span>
<span class="hljs-keyword">const</span> p2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyPromise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> <span class="hljs-title function_">resolve</span>(<span class="hljs-number">1</span>));

p2.<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">value</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"æµ‹è¯•2-1:"</span>, value); <span class="hljs-comment">// 1</span>
  <span class="hljs-keyword">return</span> value + <span class="hljs-number">1</span>;
})
  .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">value</span>) =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"æµ‹è¯•2-2:"</span>, value); <span class="hljs-comment">// 2</span>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyPromise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> <span class="hljs-title function_">resolve</span>(value + <span class="hljs-number">1</span>));
  })
  .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">value</span>) =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"æµ‹è¯•2-3:"</span>, value); <span class="hljs-comment">// 3</span>
  });

<span class="hljs-comment">// æµ‹è¯•3: é”™è¯¯å¤„ç†</span>
<span class="hljs-keyword">const</span> p3 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyPromise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
  <span class="hljs-title function_">reject</span>(<span class="hljs-string">"error"</span>);
});

p3.<span class="hljs-title function_">then</span>(
  <span class="hljs-function">(<span class="hljs-params">value</span>) =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"ä¸ä¼šæ‰§è¡Œ"</span>),
  <span class="hljs-function">(<span class="hljs-params">reason</span>) =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"æµ‹è¯•3:"</span>, reason) <span class="hljs-comment">// error</span>
).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"æµ‹è¯•3-catch:"</span>, error);
});

<span class="hljs-comment">// æµ‹è¯•4: å€¼ç©¿é€</span>
<span class="hljs-keyword">const</span> p4 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyPromise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> <span class="hljs-title function_">resolve</span>(<span class="hljs-string">"value"</span>));

p4.<span class="hljs-title function_">then</span>()
  .<span class="hljs-title function_">then</span>()
  .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">value</span>) =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"æµ‹è¯•4:"</span>, value)); <span class="hljs-comment">// value</span>
</code></pre>
<h5 data-id="heading-10">4.2 é™æ€æ–¹æ³•æµ‹è¯•</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'\n=== é™æ€æ–¹æ³•æµ‹è¯• ==='</span>);

<span class="hljs-comment">// Promise.all</span>
<span class="hljs-title class_">MyPromise</span>.<span class="hljs-title function_">all</span>([
    <span class="hljs-title class_">MyPromise</span>.<span class="hljs-title function_">resolve</span>(<span class="hljs-number">1</span>),
    <span class="hljs-title class_">MyPromise</span>.<span class="hljs-title function_">resolve</span>(<span class="hljs-number">2</span>),
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyPromise</span>(<span class="hljs-function"><span class="hljs-params">resolve</span> =&gt;</span> <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">resolve</span>(<span class="hljs-number">3</span>), <span class="hljs-number">100</span>))
]).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">values</span> =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Promise.all:'</span>, values); <span class="hljs-comment">// [1, 2, 3]</span>
});

<span class="hljs-comment">// Promise.race</span>
<span class="hljs-title class_">MyPromise</span>.<span class="hljs-title function_">race</span>([
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyPromise</span>(<span class="hljs-function"><span class="hljs-params">resolve</span> =&gt;</span> <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">resolve</span>(<span class="hljs-string">'fast'</span>), <span class="hljs-number">50</span>)),
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyPromise</span>(<span class="hljs-function"><span class="hljs-params">resolve</span> =&gt;</span> <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">resolve</span>(<span class="hljs-string">'slow'</span>), <span class="hljs-number">100</span>))
]).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">value</span> =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Promise.race:'</span>, value); <span class="hljs-comment">// fast</span>
});

<span class="hljs-comment">// Promise.allSettled</span>
<span class="hljs-title class_">MyPromise</span>.<span class="hljs-title function_">allSettled</span>([
    <span class="hljs-title class_">MyPromise</span>.<span class="hljs-title function_">resolve</span>(<span class="hljs-number">1</span>),
    <span class="hljs-title class_">MyPromise</span>.<span class="hljs-title function_">reject</span>(<span class="hljs-string">'error'</span>),
    <span class="hljs-title class_">MyPromise</span>.<span class="hljs-title function_">resolve</span>(<span class="hljs-number">3</span>)
]).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">results</span> =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Promise.allSettled:'</span>, results);
    <span class="hljs-comment">// [</span>
    <span class="hljs-comment">//   { status: 'fulfilled', value: 1 },</span>
    <span class="hljs-comment">//   { status: 'rejected', reason: 'error' },</span>
    <span class="hljs-comment">//   { status: 'fulfilled', value: 3 }</span>
    <span class="hljs-comment">// ]</span>
});
</code></pre>
<h5 data-id="heading-11">4.3 ç¬¦åˆPromise/A+è§„èŒƒçš„æµ‹è¯•</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"\n=== Promise/A+ è§„èŒƒæµ‹è¯• ==="</span>);

<span class="hljs-comment">// æµ‹è¯• then æ–¹æ³•è¢«å¤šæ¬¡è°ƒç”¨</span>
<span class="hljs-keyword">const</span> p = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyPromise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> {
  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">resolve</span>(<span class="hljs-string">"multi-call"</span>), <span class="hljs-number">50</span>);
});

p.<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">value</span>) =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"ç¬¬ä¸€æ¬¡è°ƒç”¨:"</span>, value));
p.<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">value</span>) =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"ç¬¬äºŒæ¬¡è°ƒç”¨:"</span>, value));
p.<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">value</span>) =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"ç¬¬ä¸‰æ¬¡è°ƒç”¨:"</span>, value));

<span class="hljs-comment">// æµ‹è¯• then æ–¹æ³•çš„å¼‚æ­¥ç‰¹æ€§</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"åŒæ­¥ä»£ç å¼€å§‹"</span>);
<span class="hljs-keyword">new</span> <span class="hljs-title class_">MyPromise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> <span class="hljs-title function_">resolve</span>(<span class="hljs-string">"async"</span>)).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">value</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"å¼‚æ­¥å›è°ƒ:"</span>, value);
});
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"åŒæ­¥ä»£ç ç»“æŸ"</span>);
<span class="hljs-comment">// è¾“å‡ºé¡ºåºï¼š</span>
<span class="hljs-comment">// åŒæ­¥ä»£ç å¼€å§‹</span>
<span class="hljs-comment">// åŒæ­¥ä»£ç ç»“æŸ</span>
<span class="hljs-comment">// å¼‚æ­¥å›è°ƒ: async</span>

<span class="hljs-comment">// æµ‹è¯•å¾ªç¯å¼•ç”¨</span>
<span class="hljs-keyword">const</span> p5 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyPromise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> <span class="hljs-title function_">resolve</span>(<span class="hljs-number">1</span>));
<span class="hljs-keyword">const</span> p6 = p5.<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> p6);

p6.<span class="hljs-title function_">then</span>(
  <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"ä¸ä¼šæ‰§è¡Œ"</span>),
  <span class="hljs-function">(<span class="hljs-params">reason</span>) =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"å¾ªç¯å¼•ç”¨é”™è¯¯:"</span>, reason <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">TypeError</span>) <span class="hljs-comment">// true</span>
);
</code></pre>
<h5 data-id="heading-12">4.4 å¤æ‚åœºæ™¯æµ‹è¯•</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"\n=== å¤æ‚åœºæ™¯æµ‹è¯• ==="</span>);

<span class="hljs-comment">// åœºæ™¯1: æ··åˆ Promise å’Œæ™®é€šå€¼</span>
<span class="hljs-title class_">MyPromise</span>.<span class="hljs-title function_">all</span>([
  <span class="hljs-number">1</span>, <span class="hljs-comment">// æ™®é€šå€¼</span>
  <span class="hljs-title class_">MyPromise</span>.<span class="hljs-title function_">resolve</span>(<span class="hljs-number">2</span>),
  <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyPromise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">resolve</span>(<span class="hljs-number">3</span>), <span class="hljs-number">100</span>)),
]).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">values</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"æ··åˆç±»å‹:"</span>, values); <span class="hljs-comment">// [1, 2, 3]</span>
});

<span class="hljs-comment">// åœºæ™¯2: åµŒå¥— Promise</span>
<span class="hljs-keyword">const</span> nested = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyPromise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> {
  <span class="hljs-title function_">resolve</span>(
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyPromise</span>(<span class="hljs-function">(<span class="hljs-params">innerResolve</span>) =&gt;</span> {
      <span class="hljs-title function_">innerResolve</span>(<span class="hljs-string">"deep value"</span>);
    })
  );
});

nested.<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">value</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"åµŒå¥— Promise:"</span>, value); <span class="hljs-comment">// deep value</span>
});

<span class="hljs-comment">// åœºæ™¯3: thenable å¯¹è±¡</span>
<span class="hljs-keyword">const</span> thenable = {
  <span class="hljs-attr">then</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">resolve, reject</span>) {
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">resolve</span>(<span class="hljs-string">"thenable"</span>), <span class="hljs-number">50</span>);
  },
};

<span class="hljs-title class_">MyPromise</span>.<span class="hljs-title function_">resolve</span>(thenable).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">value</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Thenable å¯¹è±¡:"</span>, value); <span class="hljs-comment">// thenable</span>
});

<span class="hljs-comment">// åœºæ™¯4: finally æ–¹æ³•</span>
<span class="hljs-keyword">new</span> <span class="hljs-title class_">MyPromise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> <span class="hljs-title function_">resolve</span>(<span class="hljs-string">"finally test"</span>))
  .<span class="hljs-title function_">finally</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"finally æ‰§è¡Œäº†"</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">MyPromise</span>.<span class="hljs-title function_">resolve</span>(<span class="hljs-string">"å»¶è¿Ÿ"</span>);
  })
  .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">value</span>) =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"finally åçš„å€¼:"</span>, value); <span class="hljs-comment">// finally test</span>
  });
</code></pre>
<h4 data-id="heading-13">äº”ã€Promiseçš„æ ¸å¿ƒåŸç†åˆ†æ</h4>
<h5 data-id="heading-14">5.1 çŠ¶æ€æœºçš„å®ç°</h5>
<p><code>Promise</code>æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªçŠ¶æ€æœº, åŒ…å«ä¸‰ç§çŠ¶æ€:</p>
<ul>
<li><strong>pending:</strong> åˆå§‹çŠ¶æ€</li>
<li><strong>fulfilled:</strong> æ“ä½œæˆåŠŸå®Œæˆ</li>
<li><strong>rejected:</strong> æ“ä½œå¤±è´¥</li>
</ul>
<p>çŠ¶æ€è½¬æ¢æ˜¯ä¸å¯é€†çš„ï¼Œè¿™æ˜¯é€šè¿‡å†…éƒ¨çŠ¶æ€å˜é‡å’Œæ§åˆ¶é€»è¾‘å®ç°çš„ã€‚</p>
<h5 data-id="heading-15">5.2 å¼‚æ­¥è°ƒåº¦çš„å®ç°</h5>
<p>åŸç”Ÿçš„<code>Promise</code>ä½¿ç”¨å¾®ä»»åŠ¡(<code>microtask</code>)é˜Ÿåˆ—, è€Œæˆ‘ä»¬ä½¿ç”¨<code>nextTick</code>å‡½æ•°æ¥æ¨¡æ‹Ÿ:</p>
<ul>
<li>NodeJSç¯å¢ƒ: <code>process.nextTick</code></li>
<li>æµè§ˆå™¨ç¯å¢ƒ: <code>MutationObserver</code>æˆ–<code>setTimeout</code>
è¿™ç§å¼‚æ­¥è°ƒåº¦ç¡®ä¿äº†:</li>
</ul>
<ol>
<li><code>then</code>æ–¹æ³•çš„å›è°ƒæ€»æ˜¯åœ¨å½“å‰æ‰§è¡Œæ ˆç»“æŸåæ‰§è¡Œ</li>
<li>ç¬¦åˆ<code>Promise/A+</code>è§„èŒƒä¸­çš„å¼‚æ­¥è¦æ±‚</li>
</ol>
<h5 data-id="heading-16">5.3 é“¾å¼è°ƒç”¨çš„å®ç°</h5>
<p>é“¾å¼è°ƒç”¨çš„å…³é”®åœ¨äº<code>then</code>æ–¹æ³•æ€»æ˜¯è¿”å›ä¸€ä¸ªæ–°çš„<code>Promise</code>ã€‚è¿™é€šè¿‡ä»¥ä¸‹æ­¥éª¤å®ç°:</p>
<ol>
<li>åˆ›å»ºæ–°çš„Promise(<code>promise2</code>)</li>
<li>åœ¨é€‚å½“çš„æ—¶æœº(çŠ¶æ€æ”¹å˜æ—¶)æ‰§è¡Œå›è°ƒ</li>
<li>é€šè¿‡<code>resolvePromise</code>å¤„ç†å›è°ƒçš„è¿”å›å€¼</li>
</ol>
<h5 data-id="heading-17">5.4 Promiseè§£æè¿‡ç¨‹</h5>
<p><code>resolvePromise</code>å‡½æ•°æ˜¯<code>Promise</code>å®ç°ä¸­æœ€å¤æ‚çš„éƒ¨åˆ†ï¼Œå®ƒå¤„ç†äº†:</p>
<ol>
<li>å¾ªç¯å¼•ç”¨æ£€æµ‹</li>
<li><code>thenable</code>å¯¹è±¡çš„å¤„ç†</li>
<li>é€’å½’è§£æ</li>
<li>é˜²æ­¢å¤šæ¬¡è°ƒç”¨</li>
</ol>
<h4 data-id="heading-18">å…­ã€å¸¸è§é¢è¯•é¢˜å®ç°</h4>
<h5 data-id="heading-19">6.1 å®ç°Promise.all</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title class_">Promise</span>.<span class="hljs-property">myAll</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">promises</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (!<span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(promises)) {
      <span class="hljs-keyword">return</span> <span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">TypeError</span>(<span class="hljs-string">"Argument must be an array"</span>));
    }

    <span class="hljs-keyword">let</span> results = [];
    <span class="hljs-keyword">let</span> count = <span class="hljs-number">0</span>;

    <span class="hljs-keyword">if</span> (promises.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-title function_">resolve</span>(results);
    }

    promises.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">promise, index</span>) =&gt;</span> {
      <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(promise).<span class="hljs-title function_">then</span>(
        <span class="hljs-function">(<span class="hljs-params">value</span>) =&gt;</span> {
          results[index] = value;
          count++;

          <span class="hljs-keyword">if</span> (count === promises.<span class="hljs-property">length</span>) {
            <span class="hljs-title function_">resolve</span>(results);
          }
        },
        reject <span class="hljs-comment">// ä»»ä½•ä¸€ä¸ªå¤±è´¥å°±æ•´ä½“å¤±è´¥</span>
      );
    });
  });
};
</code></pre>
<h5 data-id="heading-20">6.2 å®ç°Promise.race</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title class_">Promise</span>.<span class="hljs-property">myRace</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">promises</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (!<span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(promises)) {
      <span class="hljs-keyword">return</span> <span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">TypeError</span>(<span class="hljs-string">"Argument must be an array"</span>));
    }

    promises.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">promise</span>) =&gt;</span> {
      <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(promise).<span class="hljs-title function_">then</span>(resolve, reject);
    });
  });
};
</code></pre>
<h5 data-id="heading-21">6.3 å®ç°Promiseè¶…æ—¶æ§åˆ¶</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title class_">Promise</span>.<span class="hljs-property">withTimeout</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">promise, timeout, timeoutMessage = <span class="hljs-string">"Timeout"</span></span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">race</span>([
    promise,
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">_, reject</span>) =&gt;</span> {
      <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(timeoutMessage)), timeout);
    }),
  ]);
};
<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">const</span> fetchData = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> {
  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">resolve</span>(<span class="hljs-string">"data"</span>), <span class="hljs-number">2000</span>);
});

<span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">withTimeout</span>(fetchData, <span class="hljs-number">1000</span>, <span class="hljs-string">"Request timeout"</span>)
  .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"æˆåŠŸ:"</span>, data))
  .<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"å¤±è´¥:"</span>, error.<span class="hljs-property">message</span>));
<span class="hljs-comment">// å¤±è´¥: Request timeout</span>
</code></pre>
<h5 data-id="heading-22">6.4 å®ç°Promiseé‡è¯•æœºåˆ¶</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title class_">Promise</span>.<span class="hljs-property">retry</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">fn, times, delay = <span class="hljs-number">1000</span></span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">attempt</span> = (<span class="hljs-params">remaining</span>) =&gt; {
      <span class="hljs-title function_">fn</span>()
        .<span class="hljs-title function_">then</span>(resolve)
        .<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> {
          <span class="hljs-keyword">if</span> (remaining &lt;= <span class="hljs-number">1</span>) {
            <span class="hljs-title function_">reject</span>(error);
          } <span class="hljs-keyword">else</span> {
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`é‡è¯•,å‰©ä½™æ¬¡æ•°: <span class="hljs-subst">${remaining - <span class="hljs-number">1</span>}</span>`</span>);
            <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">attempt</span>(remaining - <span class="hljs-number">1</span>), delay);
          }
        });
    };

    <span class="hljs-title function_">attempt</span>(times);
  });
};

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">let</span> attemptCount = <span class="hljs-number">0</span>;
<span class="hljs-keyword">const</span> <span class="hljs-title function_">unstableOperation</span> = (<span class="hljs-params"/>) =&gt; {
  attemptCount++;
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`ç¬¬ <span class="hljs-subst">${attemptCount}</span> æ¬¡å°è¯•`</span>);
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() &gt; <span class="hljs-number">0.3</span>) {
      <span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">"éšæœºå¤±è´¥"</span>));
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-title function_">resolve</span>(<span class="hljs-string">"æˆåŠŸï¼"</span>);
    }
  });
};

<span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">retry</span>(unstableOperation, <span class="hljs-number">5</span>, <span class="hljs-number">500</span>)
  .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">result</span>) =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"æœ€ç»ˆç»“æœ:"</span>, result))
  .<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"æœ€ç»ˆå¤±è´¥:"</span>, error.<span class="hljs-property">message</span>));
</code></pre>
<h4 data-id="heading-23">ä¸ƒã€æ€§èƒ½ä¼˜åŒ–å’Œæ³¨æ„äº‹é¡¹</h4>
<h5 data-id="heading-24">7.1 å†…å­˜æ³„æ¼é¢„é˜²</h5>
<p>åœ¨<code>Promise</code>å®ç°ä¸­è¦æ³¨æ„:</p>
<ol>
<li>åŠæ—¶æ¸…ç†å›è°ƒæ•°ç»„: æ‰§è¡Œå®Œå›è°ƒåå¯ä»¥æ¸…ç©ºæ•°ç»„</li>
<li>é¿å…å¾ªç¯å¼•ç”¨: åœ¨<code>resolvePromise</code>ä¸­æ£€æµ‹</li>
<li>ä½¿ç”¨<code>WeakMap</code>å­˜å‚¨å…ƒæ•°æ®(å¯é€‰)</li>
</ol>
<h5 data-id="heading-25">7.2 é”™è¯¯å¤„ç†æœ€ä½³å®è·µ</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä¸å¥½çš„åšæ³•</span>
promise.<span class="hljs-title function_">then</span>(
    successHandler,
    errorHandler <span class="hljs-comment">// æ— æ³•æ•è· successHandler ä¸­çš„é”™è¯¯</span>
);

<span class="hljs-comment">// å¥½çš„åšæ³•</span>
promise
    .<span class="hljs-title function_">then</span>(successHandler)
    .<span class="hljs-title function_">catch</span>(errorHandler); <span class="hljs-comment">// å¯ä»¥æ•è·é“¾ä¸­æ‰€æœ‰é”™è¯¯</span>

<span class="hljs-comment">// æˆ–è€…åœ¨ then ä¸­åŒæ—¶å¤„ç†</span>
promise.<span class="hljs-title function_">then</span>(
    <span class="hljs-function"><span class="hljs-params">value</span> =&gt;</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">return</span> <span class="hljs-title function_">successHandler</span>(value);
        } <span class="hljs-keyword">catch</span> (error) {
            <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(error);
        }
    },
    errorHandler
);
</code></pre>
<h5 data-id="heading-26">7.3 æ‰¹é‡å¤„ç†ä¼˜åŒ–</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä¼˜åŒ–å¤§é‡ Promise çš„å¤„ç†</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">PromiseBatch</span> {
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params">concurrency = <span class="hljs-number">5</span></span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">concurrency</span> = concurrency;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">queue</span> = [];
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">running</span> = <span class="hljs-number">0</span>;
    }
    
    <span class="hljs-title function_">add</span>(<span class="hljs-params">promiseFactory</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">queue</span>.<span class="hljs-title function_">push</span>({
                promiseFactory,
                resolve,
                reject
            });
            <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">run</span>();
        });
    }
    
    <span class="hljs-title function_">run</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">while</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">running</span> &lt; <span class="hljs-variable language_">this</span>.<span class="hljs-property">concurrency</span> &amp;&amp; <span class="hljs-variable language_">this</span>.<span class="hljs-property">queue</span>.<span class="hljs-property">length</span>) {
            <span class="hljs-keyword">const</span> task = <span class="hljs-variable language_">this</span>.<span class="hljs-property">queue</span>.<span class="hljs-title function_">shift</span>();
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">running</span>++;
            
            task.<span class="hljs-title function_">promiseFactory</span>()
                .<span class="hljs-title function_">then</span>(task.<span class="hljs-property">resolve</span>)
                .<span class="hljs-title function_">catch</span>(task.<span class="hljs-property">reject</span>)
                .<span class="hljs-title function_">finally</span>(<span class="hljs-function">() =&gt;</span> {
                    <span class="hljs-variable language_">this</span>.<span class="hljs-property">running</span>--;
                    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">run</span>();
                });
        }
    }
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">const</span> batch = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PromiseBatch</span>(<span class="hljs-number">3</span>);
<span class="hljs-keyword">const</span> results = [];

<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {
    batch.<span class="hljs-title function_">add</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function"><span class="hljs-params">resolve</span> =&gt;</span> {
            <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`ä»»åŠ¡ <span class="hljs-subst">${i}</span> å®Œæˆ`</span>);
                <span class="hljs-title function_">resolve</span>(i);
            }, <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * <span class="hljs-number">1000</span>);
        });
    }).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">result</span> =&gt;</span> results.<span class="hljs-title function_">push</span>(result));
}
</code></pre>
<h4 data-id="heading-27">å…«ã€ç°ä»£JavaScriptä¸­çš„Promiseç›¸å…³ç‰¹æ€§</h4>
<h5 data-id="heading-28">8.1 async/awaitçš„å®ç°åŸç†</h5>
<p><code>async/await</code>æœ¬è´¨ä¸Šæ˜¯ <code>Generator</code> å‡½æ•°å’Œ<code>Promise</code>çš„è¯­æ³•ç³–:</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// async/awaitçš„è¿‘ä¼¼å®ç°</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">asyncToGenerator</span>(<span class="hljs-params">generatorFunc</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> (<span class="hljs-params">...args</span>) {
    <span class="hljs-keyword">const</span> generator = generatorFunc.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, args);

    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
      <span class="hljs-keyword">function</span> <span class="hljs-title function_">step</span>(<span class="hljs-params">key, arg</span>) {
        <span class="hljs-keyword">let</span> result;
        <span class="hljs-keyword">try</span> {
          result = generator[key](arg);
        } <span class="hljs-keyword">catch</span> (error) {
          <span class="hljs-keyword">return</span> <span class="hljs-title function_">reject</span>(error);
        }

        <span class="hljs-keyword">const</span> { value, done } = result;

        <span class="hljs-keyword">if</span> (done) {
          <span class="hljs-keyword">return</span> <span class="hljs-title function_">resolve</span>(value);
        } <span class="hljs-keyword">else</span> {
          <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(value).<span class="hljs-title function_">then</span>(
            <span class="hljs-function">(<span class="hljs-params">val</span>) =&gt;</span> <span class="hljs-title function_">step</span>(<span class="hljs-string">"next"</span>, val),
            <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> <span class="hljs-title function_">step</span>(<span class="hljs-string">"throw"</span>, err)
          );
        }
      }

      <span class="hljs-title function_">step</span>(<span class="hljs-string">"next"</span>);
    });
  };
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">const</span> asyncFunc = <span class="hljs-title function_">asyncToGenerator</span>(<span class="hljs-keyword">function</span>* () {
  <span class="hljs-keyword">const</span> result1 = <span class="hljs-keyword">yield</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(<span class="hljs-number">1</span>);
  <span class="hljs-keyword">const</span> result2 = <span class="hljs-keyword">yield</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(result1 + <span class="hljs-number">1</span>);
  <span class="hljs-keyword">return</span> result2 + <span class="hljs-number">1</span>;
});

<span class="hljs-title function_">asyncFunc</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">value</span>) =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(value)); <span class="hljs-comment">// 3</span>
</code></pre>
<h5 data-id="heading-29">8.2 Promiseä¸ç”Ÿæˆå™¨çš„é…åˆ</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// è‡ªåŠ¨æ‰§è¡Œ Generator å‡½æ•°</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">runGenerator</span>(<span class="hljs-params">genFunc</span>) {
  <span class="hljs-keyword">const</span> generator = <span class="hljs-title function_">genFunc</span>();

  <span class="hljs-keyword">function</span> <span class="hljs-title function_">handle</span>(<span class="hljs-params">result</span>) {
    <span class="hljs-keyword">if</span> (result.<span class="hljs-property">done</span>) <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(result.<span class="hljs-property">value</span>);

    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(result.<span class="hljs-property">value</span>)
      .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> <span class="hljs-title function_">handle</span>(generator.<span class="hljs-title function_">next</span>(res)))
      .<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> <span class="hljs-title function_">handle</span>(generator.<span class="hljs-keyword">throw</span>(err)));
  }

  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">handle</span>(generator.<span class="hljs-title function_">next</span>());
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(error);
  }
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-title function_">runGenerator</span>(<span class="hljs-keyword">function</span>* () {
  <span class="hljs-keyword">const</span> a = <span class="hljs-keyword">yield</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(<span class="hljs-number">1</span>);
  <span class="hljs-keyword">const</span> b = <span class="hljs-keyword">yield</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(<span class="hljs-number">2</span>);
  <span class="hljs-keyword">return</span> a + b;
}).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">result</span>) =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(result)); <span class="hljs-comment">// 3</span>
</code></pre>
<h4 data-id="heading-30">ä¹ã€æ€»ç»“ä¸æœ€ä½³å®è·µ</h4>
<h5 data-id="heading-31">9.1 æ ¸å¿ƒè¦ç‚¹æ€»ç»“</h5>
<ol>
<li><strong><code>Promise</code>æ˜¯çŠ¶æ€æœº:</strong> ä¸‰ç§çŠ¶æ€ï¼Œä¸å¯é€†è½¬æ¢</li>
<li><strong><code>then</code>æ–¹æ³•è¿”å›æ–°<code>Promise</code>:</strong> å®ç°é“¾å¼è°ƒç”¨çš„å…³é”®</li>
<li><strong>å¼‚æ­¥æ‰§è¡Œ:</strong> å›è°ƒæ€»æ˜¯åœ¨å½“å‰æ‰§è¡Œæ ˆç»“æŸåæ‰§è¡Œ</li>
<li><strong>é”™è¯¯å†’æ³¡:</strong> é”™è¯¯ä¼šæ²¿ç€<code>Promise</code>é“¾ä¼ é€’</li>
<li><strong>å€¼ç©¿é€:</strong> éå‡½æ•°å‚æ•°ä¼šè¢«å¿½ç•¥</li>
</ol>
<h5 data-id="heading-32">9.2 æ‰‹å†™Promiseçš„ä»·å€¼</h5>
<ol>
<li><strong>æ·±å…¥ç†è§£å¼‚æ­¥æœºåˆ¶:</strong> ç†è§£å¾®ä»»åŠ¡ã€äº‹ä»¶å¾ªç¯</li>
<li><strong>æŒæ¡è®¾è®¡æ¨¡å¼:</strong> çŠ¶æ€æœºã€è§‚å¯Ÿè€…æ¨¡å¼</li>
<li><strong>æå‡ä»£ç è´¨é‡:</strong> æ›´å¥½çš„é”™è¯¯å¤„ç†ã€ä»£ç ç»„ç»‡</li>
<li><strong>é¢è¯•ä¼˜åŠ¿:</strong> é«˜é¢‘é¢è¯•é¢˜ï¼Œå±•ç¤ºæ‰å®çš„åŸºç¡€</li>
</ol>
<h5 data-id="heading-33">9.3 å®é™…å¼€å‘å»ºè®®</h5>
<ol>
<li><strong>æ€»æ˜¯è¿”å›Promise:</strong> ç¡®ä¿å‡½æ•°çš„ä¸€è‡´æ€§</li>
<li><strong>é¿å…åµŒå¥—:</strong> ä½¿ç”¨é“¾å¼è°ƒç”¨æˆ–<code>async/await</code></li>
<li><strong>å¤„ç†æ‰€æœ‰é”™è¯¯:</strong> ä½¿ç”¨<code>catch</code>æˆ–<code>try-catch</code></li>
<li><strong>åˆç†ä½¿ç”¨é™æ€æ–¹æ³•:</strong> <code>all</code>ã€<code>race</code>ã€<code>allSettled</code>ç­‰</li>
</ol>
<h5 data-id="heading-34">9.4 è¿›ä¸€æ­¥å­¦ä¹ æ–¹å‘</h5>
<ol>
<li><strong>æºç é˜…è¯»:</strong> é˜…è¯»åŸç”Ÿ<code>Promise</code>çš„æºç å®ç°</li>
<li><strong>å¼‚æ­¥ç¼–ç¨‹æ¨¡å¼:</strong> å­¦ä¹ <code>RxJS</code>ã€<code>async/await</code>ç­‰</li>
<li><strong>æ€§èƒ½ä¼˜åŒ–:</strong> å­¦ä¹ <code>Promise</code>çš„æ€§èƒ½ä¼˜åŒ–æŠ€å·§</li>
<li><strong>æ¡†æ¶é›†æˆ:</strong> å­¦ä¹ å¦‚ä½•åœ¨æ¡†æ¶ä¸­åˆç†ä½¿ç”¨<code>Promise</code></li>
</ol>
<h4 data-id="heading-35">ç»“è¯­</h4>
<p>é€šè¿‡æ‰‹å†™<code>Promise</code>, æˆ‘ä»¬ä¸ä»…æŒæ¡äº†ä¸€ä¸ªé‡è¦çš„JavaScriptç‰¹æ€§ï¼Œæ›´é‡è¦çš„æ˜¯ç†è§£äº†å¼‚æ­¥ç¼–ç¨‹çš„æ ¸å¿ƒæ€æƒ³ã€‚<code>Promise</code>çš„è®¾è®¡ä½“ç°äº†è®¸å¤šä¼˜ç§€çš„è½¯ä»¶è®¾è®¡åŸ: å•ä¸€èŒè´£ã€å¼€é—­åŸåˆ™ã€ä¾èµ–å€’ç½®ç­‰ã€‚</p>
<p>åœ¨å®é™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬å¯èƒ½ä¸ä¼šç»å¸¸éœ€è¦è‡ªå·±å®ç°<code>Promise</code>ï¼Œä½†ç†è§£å…¶åŸç†èƒ½è®©æˆ‘ä»¬æ›´å¥½åœ°ä½¿ç”¨å®ƒï¼Œé¿å…å¸¸è§çš„é™·é˜±ï¼Œå†™å‡ºæ›´å¥å£®çš„å¼‚æ­¥ä»£ç ã€‚</p>
<p>è®°ä½ï¼Œ<code>Promise</code>ä¸æ˜¯ç»ˆç‚¹ï¼Œè€Œæ˜¯å¼‚æ­¥ç¼–ç¨‹çš„èµ·ç‚¹ã€‚éšç€JavaScriptçš„å‘å±•ï¼Œæˆ‘ä»¬æœ‰äº†<code>async/await</code>ã€<code>Generator</code>ã€<code>Observable</code>ç­‰æ›´å¤šå¼ºå¤§çš„å·¥å…·ã€‚ä½†<code>Promise</code>ä½œä¸ºåŸºç¡€ï¼Œå®ƒçš„è®¾è®¡æ€æƒ³å’Œå®ç°åŸç†æ°¸è¿œå€¼å¾—æˆ‘ä»¬æ·±å…¥å­¦ä¹ å’Œç†è§£ã€‚</p>
<h5 data-id="heading-36">å»¶ä¼¸é˜…è¯»</h5>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fpromisesaplus.com%2F" target="_blank" title="https://promisesaplus.com/" ref="nofollow noopener noreferrer">Promise/A+ è§„èŒƒ</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FJavaScript%2FReference%2FGlobal_Objects%2FPromise" target="_blank" title="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Promise" ref="nofollow noopener noreferrer">MDN: Promise</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fv8.dev%2Fblog%2Ffast-async" target="_blank" title="https://v8.dev/blog/fast-async" ref="nofollow noopener noreferrer">V8 Promise æºç è§£æ</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fgetify%2FYou-Dont-Know-JS%2Fblob%2F1st-ed%2Fasync%252520%252526%252520performance%2Fch3.md" target="_blank" title="https://github.com/getify/You-Dont-Know-JS/blob/1st-ed/async%2520%2526%2520performance/ch3.md" ref="nofollow noopener noreferrer">JavaScript å¼‚æ­¥ç¼–ç¨‹çš„æ¼”è¿›</a></li>
</ul>
<p>å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¸®åŠ©ä½ æ·±å…¥ç†è§£<code>Promise</code>ï¼å¦‚æœæœ‰ä»»ä½•é—®é¢˜æˆ–å»ºè®®ï¼Œæ¬¢è¿è®¨è®ºäº¤æµã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Gopher å¸¦ä½ å­¦ DDDï¼šä¸€å¥—ä¸çƒ§è„‘çš„ä¸šåŠ¡å»ºæ¨¡æŒ‡å—]]></title>    <link>https://juejin.cn/post/7580216638110679055</link>    <guid>https://juejin.cn/post/7580216638110679055</guid>    <pubDate>2025-12-06T05:39:23.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7580216638110679055" data-draft-id="7580202945147813903" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Gopher å¸¦ä½ å­¦ DDDï¼šä¸€å¥—ä¸çƒ§è„‘çš„ä¸šåŠ¡å»ºæ¨¡æŒ‡å—"/> <meta itemprop="keywords" content="æ¶æ„,é¢†åŸŸé©±åŠ¨è®¾è®¡"/> <meta itemprop="datePublished" content="2025-12-06T05:39:23.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ²¡å¤šå°‘é€»è¾‘"/> <meta itemprop="url" content="https://juejin.cn/user/2717648475395325"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Gopher å¸¦ä½ å­¦ DDDï¼šä¸€å¥—ä¸çƒ§è„‘çš„ä¸šåŠ¡å»ºæ¨¡æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2717648475395325/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ²¡å¤šå°‘é€»è¾‘
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-06T05:39:23.000Z" title="Sat Dec 06 2025 05:39:23 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    5
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æ˜¯å¦è§‰å¾— DDDï¼ˆé¢†åŸŸé©±åŠ¨è®¾è®¡ï¼‰çš„æ¦‚å¿µæ™¦æ¶©éš¾æ‡‚ï¼Ÿåˆ«æ‹…å¿ƒï¼Œè¿™ç¯‡æŒ‡å—ä¸ºä½ æç‚¼äº† DDD çš„æ ¸å¿ƒæ¦‚å¿µï¼Œæ‹’ç»çƒ§è„‘ï¼Œä¸»æ‰“è½»æ¾æ˜“æ‡‚ã€‚æˆ‘ä»¬å°† DDD çš„å­¦ä¹ ä¹‹æ—…åˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µï¼š<strong>ç†å¿µã€æˆ˜æœ¯ã€æˆ˜ç•¥</strong>ã€‚è®©æˆ‘ä»¬è·Ÿéš Gopher çš„è„šæ­¥ï¼Œä¸€èµ·æ¢ç´¢ä¸šåŠ¡å»ºæ¨¡çš„ä¸–ç•Œå§ï¼</p>
<hr/>
<h2 data-id="heading-0">ç¬¬ä¸€éƒ¨åˆ†ï¼šç†å¿µç¯‡ (The Philosophy)</h2>
<p>åœ¨å¼€å§‹å†™ä»£ç ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆçŸ«æ­£æ€ç»´ã€‚DDD é¦–å…ˆæ˜¯ä¸€ç§è®¾è®¡æ€æƒ³ï¼Œå…¶æ¬¡æ‰æ˜¯æŠ€æœ¯æ¨¡å¼ã€‚</p>
<h3 data-id="heading-1">â‘  ä¸ºä»€ä¹ˆéœ€è¦ DDDï¼Ÿ</h3>
<p><strong>ä¸€å¥è¯æ¦‚å¿µ</strong>ï¼šDDD æ˜¯ç”¨ä¸šåŠ¡æ¨¡å‹å¯¹æŠ—å¤æ‚æ€§çš„è®¾è®¡æ–¹æ³•ã€‚</p>
<ul>
<li>
<p><strong>å®ƒæ˜¯ä»€ä¹ˆï¼Ÿ</strong><br/>
è®©ç³»ç»Ÿä¸¥æ ¼å›´ç»•<strong>ä¸šåŠ¡æ¨¡å‹</strong>æ„å»ºï¼Œè€Œä¸æ˜¯æ¯«æ— ç« æ³•åœ°â€œä¹±é•¿â€ã€é ä»£ç â€œç¡¬å †â€ã€‚</p>
</li>
<li>
<p><strong>ä¸ºä»€ä¹ˆéœ€è¦å®ƒï¼Ÿ</strong><br/>
å¦‚æœæ²¡æœ‰ DDDï¼Œéšç€ä¸šåŠ¡å‘å±•ï¼Œç³»ç»Ÿæœ€ç»ˆä¼šå˜æˆä¸€ä¸ªæ··ä¹±çš„æ³¥æ½­â€”â€”é«˜è€¦åˆã€é”™è¯¯é¢‘å‡ºã€ä¸”æéš¾ç»´æŠ¤ã€‚</p>
</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ea34ec2dc24c4d9088444a07a19bf287~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rKh5aSa5bCR6YC76L6R:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765604545&amp;x-signature=YDs4uEIRc3taE%2FfNfxsGXTCzkS0%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-2">â‘¡ é¢†åŸŸï¼ˆDomainï¼‰</h3>
<p><strong>ä¸€å¥è¯æ¦‚å¿µ</strong>ï¼šé¢†åŸŸæ˜¯ç³»ç»Ÿè¦å¤„ç†çš„ä¸šåŠ¡ä¸–ç•Œã€‚</p>
<ul>
<li>
<p><strong>å®ƒæ˜¯ä»€ä¹ˆï¼Ÿ</strong><br/>
å®ƒåŒ…å«äº†ä¸šåŠ¡é‡Œæ‰€æœ‰çš„æœ¯è¯­ã€æµç¨‹å’Œè§„åˆ™ã€‚å®ƒæ˜¯æˆ‘ä»¬æ‰€æœ‰è®¾è®¡çš„èµ·ç‚¹ã€‚</p>
</li>
<li>
<p><strong>ä¸ºä»€ä¹ˆéœ€è¦å®ƒï¼Ÿ</strong><br/>
å¦‚æœä¸æ·±å…¥ç†è§£é¢†åŸŸï¼Œæ¨¡å‹å°±ä¼šè·‘åï¼Œç³»ç»Ÿè‡ªç„¶ä¹Ÿå°±è¶Šå†™è¶Šé”™ã€‚</p>
</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/177ae8c6382444b1ac28c51ffcd3dd60~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rKh5aSa5bCR6YC76L6R:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765604545&amp;x-signature=xIW3jrcl3dSJ7rUff%2FWNlz2Cvw8%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-3">â‘¢ é€šç”¨è¯­è¨€ï¼ˆUbiquitous Languageï¼‰</h3>
<p><strong>ä¸€å¥è¯æ¦‚å¿µ</strong>ï¼šå›¢é˜Ÿå¿…é¡»ä½¿ç”¨ä¸€è‡´çš„ä¸šåŠ¡è¯­è¨€ã€‚</p>
<ul>
<li>
<p><strong>å®ƒæ˜¯ä»€ä¹ˆï¼Ÿ</strong><br/>
ç¡®ä¿éœ€æ±‚åˆ†æã€æ¶æ„è®¾è®¡ã€ä»£ç å®ç°ä¸­ä½¿ç”¨å®Œå…¨ç›¸åŒçš„æœ¯è¯­ã€‚</p>
</li>
<li>
<p><strong>ä¸ºä»€ä¹ˆéœ€è¦å®ƒï¼Ÿ</strong><br/>
å¦‚æœè¯­è¨€ä¸ç»Ÿä¸€ï¼Œä¼šå¯¼è‡´æ¨¡å‹ä¸ä¸€è‡´ï¼Œä»è€Œäº§ç”Ÿå¤§é‡çš„ Bug å’Œæ²Ÿé€šè¯¯è§£ã€‚</p>
</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/17fcdf368ed44a549e5f4330d5243eb4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rKh5aSa5bCR6YC76L6R:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765604545&amp;x-signature=%2B69r9UQiGZihcN9J6itJ59VFcOw%3D" alt="image.png" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-4">ç¬¬äºŒéƒ¨åˆ†ï¼šæˆ˜æœ¯ç¯‡ (Tactical Design)</h2>
<p>å½“ç†è§£äº†ä¸šåŠ¡é¢†åŸŸåï¼Œæˆ‘ä»¬éœ€è¦å…·ä½“çš„â€œç§¯æœ¨â€æ¥å°†æ¨¡å‹è½åœ°åˆ°ä»£ç ä¸­ã€‚</p>
<h3 data-id="heading-5">â‘£ å®ä½“ï¼ˆEntityï¼‰</h3>
<p><strong>ä¸€å¥è¯æ¦‚å¿µ</strong>ï¼šå®ä½“å…³æ³¨â€œå®ƒæ˜¯è°â€ï¼Œè€Œä¸æ˜¯â€œé•¿ä»€ä¹ˆæ ·â€ã€‚</p>
<ul>
<li>
<p><strong>å®ƒæ˜¯ä»€ä¹ˆï¼Ÿ</strong><br/>
å®ä½“æ‹¥æœ‰å”¯ä¸€çš„ IDï¼Œå¹¶ä¸”å…¶çŠ¶æ€ä¼šéšæ—¶é—´å‘ç”Ÿå˜åŒ–ã€‚</p>
</li>
<li>
<p><strong>ä¸ºä»€ä¹ˆéœ€è¦å®ƒï¼Ÿ</strong><br/>
å¦‚æœæ²¡æœ‰å®ä½“ï¼Œæˆ‘ä»¬å°†æ— æ³•è¿½è¸ªå¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸï¼Œæ•°æ®ç®¡ç†ä¹Ÿä¼šå˜å¾—æ··ä¹±ã€‚</p>
</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c7dbff3711bf46aaa1ac897b4ea41989~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rKh5aSa5bCR6YC76L6R:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765604545&amp;x-signature=s63xvZbad1ELen6p1hzZO6uMDM8%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-6">â‘¤ å€¼å¯¹è±¡ï¼ˆValue Objectï¼‰</h3>
<p><strong>ä¸€å¥è¯æ¦‚å¿µ</strong>ï¼šå€¼å¯¹è±¡è¡¨è¾¾â€œæ˜¯ä»€ä¹ˆâ€ï¼Œä¸è¡¨è¾¾â€œæ˜¯è°â€ã€‚</p>
<ul>
<li>
<p><strong>å®ƒæ˜¯ä»€ä¹ˆï¼Ÿ</strong><br/>
å€¼å¯¹è±¡æ²¡æœ‰ IDï¼Œå®ƒæ˜¯ä¸å¯å˜çš„ï¼Œæˆ‘ä»¬é€šè¿‡å…¶å†…å®¹æ¥åˆ¤æ–­æ˜¯å¦ç›¸ç­‰ã€‚</p>
</li>
<li>
<p><strong>ä¸ºä»€ä¹ˆéœ€è¦å®ƒï¼Ÿ</strong><br/>
ä½¿ç”¨å€¼å¯¹è±¡å¯ä»¥é¿å…æ— æ„ä¹‰çš„èº«ä»½ç»´æŠ¤ï¼Œé™ä½ç³»ç»Ÿå¤æ‚åº¦ï¼ŒåŒæ—¶æé«˜å®‰å…¨æ€§ï¼ˆå› ä¸ºä¸å¯å˜ï¼‰ã€‚</p>
</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/535f5d98695c4be6876d7c53fc8f0066~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rKh5aSa5bCR6YC76L6R:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765604545&amp;x-signature=axv5m%2BEcxehqkQ2anuxO5hgXK6o%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-7">â‘¥ èšåˆï¼ˆAggregateï¼‰</h3>
<p><strong>ä¸€å¥è¯æ¦‚å¿µ</strong>ï¼šèšåˆæ˜¯ä¸šåŠ¡çš„ä¸€è‡´æ€§ä¿æŠ¤è¾¹ç•Œã€‚</p>
<ul>
<li>
<p><strong>å®ƒæ˜¯ä»€ä¹ˆï¼Ÿ</strong><br/>
èšåˆç”±ä¸€ä¸ª<strong>èšåˆæ ¹</strong>æ¥æ§åˆ¶å†…éƒ¨çš„æ‰€æœ‰å¯¹è±¡ï¼Œç¡®ä¿å¤–ç•Œåªèƒ½é€šè¿‡èšåˆæ ¹ä¸å†…éƒ¨äº¤äº’ï¼Œä»è€Œä¿è¯æ•°æ®çš„ä¸€è‡´æ€§ã€‚</p>
</li>
<li>
<p><strong>ä¸ºä»€ä¹ˆéœ€è¦å®ƒï¼Ÿ</strong><br/>
å¦‚æœæ²¡æœ‰èšåˆï¼Œå†…éƒ¨å¯¹è±¡å¯èƒ½è¢«ä»»æ„ä¿®æ”¹ï¼Œå¯¼è‡´æ•°æ®ä¸å†ä¸€è‡´ï¼Œä¸šåŠ¡è§„åˆ™å¤±æ•ˆã€‚</p>
</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0d80f995691e4e2f9ded5463bf06daf3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rKh5aSa5bCR6YC76L6R:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765604545&amp;x-signature=bHqarMf4aG6u2aehHkuBHblTbx4%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-8">â‘¦ é¢†åŸŸæœåŠ¡ï¼ˆDomain Serviceï¼‰</h3>
<p><strong>ä¸€å¥è¯æ¦‚å¿µ</strong>ï¼šè·¨å®ä½“çš„ä¸šåŠ¡åŠ¨ä½œå±äºé¢†åŸŸæœåŠ¡ã€‚</p>
<ul>
<li>
<p><strong>å®ƒæ˜¯ä»€ä¹ˆï¼Ÿ</strong><br/>
ç”¨äºæ‰¿è½½é‚£äº›æ— æ³•å•çº¯å±äºæŸä¸ªå®ä½“æˆ–å€¼å¯¹è±¡çš„ä¸šåŠ¡è¡Œä¸ºã€‚</p>
</li>
<li>
<p><strong>ä¸ºä»€ä¹ˆéœ€è¦å®ƒï¼Ÿ</strong><br/>
å¦‚æœä¸å°†è¿™äº›è¡Œä¸ºå‰¥ç¦»å‡ºæ¥ï¼Œå®ä½“ç±»ä¼šå˜å¾—è‡ƒè‚¿ã€èŒè´£æ··ä¹±ä¸”éš¾ä»¥ç»´æŠ¤ã€‚</p>
</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dcbb230e2217460c85b8aca558be7f61~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rKh5aSa5bCR6YC76L6R:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765604545&amp;x-signature=TN9zHmDKctzZ1AeVaB9tPOILIWk%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-9">â‘§ é¢†åŸŸäº‹ä»¶ï¼ˆDomain Eventï¼‰</h3>
<p><strong>ä¸€å¥è¯æ¦‚å¿µ</strong>ï¼šé¢†åŸŸäº‹ä»¶è®°å½•â€œå·²ç»å‘ç”Ÿçš„ä¸šåŠ¡äº‹å®â€ã€‚</p>
<ul>
<li>
<p><strong>å®ƒæ˜¯ä»€ä¹ˆï¼Ÿ</strong><br/>
ç”¨äºé€šçŸ¥ç³»ç»Ÿçš„å…¶ä»–éƒ¨åˆ†æŸä¸ªäº‹æƒ…å·²ç»å‘ç”Ÿã€‚</p>
</li>
<li>
<p><strong>ä¸ºä»€ä¹ˆéœ€è¦å®ƒï¼Ÿ</strong><br/>
é€šè¿‡äº‹ä»¶é©±åŠ¨ï¼Œå¯ä»¥æœ‰æ•ˆåœ°è§£è€¦ç³»ç»Ÿï¼Œæå¤§åœ°æå‡ç³»ç»Ÿçš„æ‰©å±•æ€§ã€‚</p>
</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/50dfdc3d47164edfbc403652ec664896~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rKh5aSa5bCR6YC76L6R:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765604545&amp;x-signature=8nSi8kvEfBtADYfWJWo6ncPydlg%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-10">â‘¨ ä»“å‚¨ï¼ˆRepositoryï¼‰</h3>
<p><strong>ä¸€å¥è¯æ¦‚å¿µ</strong>ï¼šä»“å‚¨ä»¥èšåˆä¸ºå•ä½è¯»å†™æ•°æ®ã€‚</p>
<ul>
<li>
<p><strong>å®ƒæ˜¯ä»€ä¹ˆï¼Ÿ</strong><br/>
å®ƒè´Ÿè´£éšè—æ•°æ®åº“çš„å…·ä½“æŠ€æœ¯ç»†èŠ‚ï¼Œä¿æŒé¢†åŸŸå±‚çš„çº¯å‡€ã€‚</p>
</li>
<li>
<p><strong>ä¸ºä»€ä¹ˆéœ€è¦å®ƒï¼Ÿ</strong><br/>
å¦‚æœç›´æ¥ä½¿ç”¨ DAOï¼Œå¾€å¾€å¾—åˆ°çš„æ˜¯ç¢ç‰‡åŒ–çš„æ•°æ®ï¼Œä¸šåŠ¡å±‚å¿…é¡»è‡ªå·±æ‹¼æ¥ï¼Œè¿™ä½¿å¾—ç³»ç»Ÿè„†å¼±ä¸”å®¹æ˜“å‡ºé”™ã€‚</p>
</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cf260be3fa8a4c3dafeaa98a6dea0d09~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rKh5aSa5bCR6YC76L6R:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765604545&amp;x-signature=S%2BX%2BWKxmlyXZGyfU1QiBe408LH0%3D" alt="image.png" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-11">ç¬¬ä¸‰éƒ¨åˆ†ï¼šæˆ˜ç•¥ä¸æ¶æ„ç¯‡ (Strategic &amp; Architecture)</h2>
<p>å½“ç³»ç»Ÿå˜å¤§æ—¶ï¼Œæˆ‘ä»¬éœ€è¦ä»æ›´é«˜çš„è§†è§’æ¥åˆ’åˆ†è¾¹ç•Œå’Œç»„ç»‡æ¶æ„ã€‚</p>
<h3 data-id="heading-12">â‘© é™ç•Œä¸Šä¸‹æ–‡ï¼ˆBounded Contextï¼‰</h3>
<p><strong>ä¸€å¥è¯æ¦‚å¿µ</strong>ï¼šé™ç•Œä¸Šä¸‹æ–‡ä¸ºä¸šåŠ¡æ¨¡å‹è®¾å®šè¯­ä¹‰è¾¹ç•Œã€‚</p>
<ul>
<li>
<p><strong>å®ƒæ˜¯ä»€ä¹ˆï¼Ÿ</strong><br/>
æ¯ä¸ªä¸Šä¸‹æ–‡å†…éƒ¨éƒ½æœ‰è‡ªå·±ç‹¬ç«‹çš„ä¸šåŠ¡è¯­è¨€ä¸æ¨¡å‹ï¼Œäº’ä¸å¹²æ‰°ã€‚</p>
</li>
<li>
<p><strong>ä¸ºä»€ä¹ˆéœ€è¦å®ƒï¼Ÿ</strong><br/>
å¦‚æœæ²¡æœ‰é™ç•Œä¸Šä¸‹æ–‡ï¼Œä¸åŒä¸šåŠ¡çš„æ¦‚å¿µä¼šæ··æ·†åœ¨ä¸€èµ·ï¼Œå¯¼è‡´æ¨¡å‹æ‰­æ›²ï¼Œç³»ç»Ÿæéš¾ç»´æŠ¤ã€‚</p>
</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b06a1f2e3695425180dfd6c764b4836e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rKh5aSa5bCR6YC76L6R:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765604545&amp;x-signature=SBtj1elyIWDVtZK1%2F84%2FQNuHASs%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-13">â‘ª ä¸Šä¸‹æ–‡æ˜ å°„ï¼ˆContext Mapï¼‰</h3>
<p><strong>ä¸€å¥è¯æ¦‚å¿µ</strong>ï¼šä¸Šä¸‹æ–‡æ˜ å°„å®šä¹‰é¢†åŸŸä¹‹é—´å¦‚ä½•åä½œã€‚</p>
<ul>
<li>
<p><strong>å®ƒæ˜¯ä»€ä¹ˆï¼Ÿ</strong><br/>
æç»˜äº†ä¸åŒä¸Šä¸‹æ–‡ä¹‹é—´çš„ä¾èµ–å…³ç³»ä¸äº¤æµæ–¹å¼ï¼ˆå¦‚é˜²è…å±‚ã€å®¢æˆ·-ä¾›åº”è€…ç­‰ï¼‰ã€‚</p>
</li>
<li>
<p><strong>ä¸ºä»€ä¹ˆéœ€è¦å®ƒï¼Ÿ</strong><br/>
å¦‚æœæ²¡æœ‰æ¸…æ™°çš„æ˜ å°„ï¼Œå›¢é˜Ÿé—´çš„åˆä½œä¼šå˜å¾—æ··ä¹±ï¼Œç³»ç»Ÿé›†æˆä¹Ÿä¼šéå¸¸å›°éš¾ã€‚</p>
</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f525662de0854ce79526c5b7488f69a4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rKh5aSa5bCR6YC76L6R:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765604545&amp;x-signature=xY5xW1%2BkRr%2Bavuz0T5972qf6Ofk%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-14">â‘« DDD åˆ†å±‚æ¶æ„ï¼ˆLayered Architectureï¼‰</h3>
<p><strong>ä¸€å¥è¯æ¦‚å¿µ</strong>ï¼šåˆ†å±‚æ¶æ„ä¿æŠ¤é¢†åŸŸæ¨¡å‹ä¸è¢«æŠ€æœ¯ç»†èŠ‚æ±¡æŸ“ã€‚</p>
<ul>
<li>
<p><strong>å®ƒæ˜¯ä»€ä¹ˆï¼Ÿ</strong><br/>
å°†ç³»ç»Ÿåˆ†ä¸ºåº”ç”¨å±‚ã€é¢†åŸŸå±‚ã€åŸºç¡€è®¾æ–½å±‚ï¼Œè®©æ¯ä¸€å±‚å„å¸å…¶èŒã€‚</p>
</li>
<li>
<p><strong>ä¸ºä»€ä¹ˆéœ€è¦å®ƒï¼Ÿ</strong><br/>
å¦‚æœæ²¡æœ‰åˆ†å±‚ï¼Œä¸šåŠ¡é€»è¾‘ä¸æŠ€æœ¯ä»£ç æ··æ‚ï¼Œä¼šå¯¼è‡´ä»£ç æ•£ä¹±ï¼Œæ— æ³•ç»´æŠ¤ã€‚</p>
</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a4699217f9804fc6950965c7890817f1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rKh5aSa5bCR6YC76L6R:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765604545&amp;x-signature=uOZKTk4XWmT4TIbORrOrWEfYCiw%3D" alt="image.png" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-15">æ€»ç»“</h2>
<p><strong>ä¸€å¥è¯æ€»ç»“</strong>ï¼šDDD è®©è½¯ä»¶éšä¸šåŠ¡ä¸€èµ·æˆé•¿ã€‚</p>
<p><strong>æ ¸å¿ƒæ„ä¹‰</strong>ï¼š
æ‰€æœ‰ DDD çš„æ¦‚å¿µï¼ˆå®ä½“ã€èšåˆã€ä¸Šä¸‹æ–‡ç­‰ï¼‰éƒ½æ˜¯å…±åŒå›´ç»•â€œä¸šåŠ¡æ¨¡å‹â€æ„å»ºç³»ç»Ÿçš„å·¥å…·ã€‚åªæœ‰ä¸šåŠ¡æ¨¡å‹æ­£ç¡®ï¼Œç³»ç»Ÿæ‰èƒ½çœŸæ­£åšåˆ°é•¿æœŸå¯ç»´æŠ¤ã€å¯æ¼”è¿›ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/486cb3f19adc4763a04f441e035201d8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rKh5aSa5bCR6YC76L6R:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765604545&amp;x-signature=iYZZow1NRCCyBmtVNNYfu5gsyYM%3D" alt="image.png" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[springCloudGateway+Nacosæ³¨å†Œä¸è½¬å‘Netty+WebSocket]]></title>    <link>https://juejin.cn/post/7580282751627411497</link>    <guid>https://juejin.cn/post/7580282751627411497</guid>    <pubDate>2025-12-06T03:45:32.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7580282751627411497" data-draft-id="7580282751627362345" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="springCloudGateway+Nacosæ³¨å†Œä¸è½¬å‘Netty+WebSocket"/> <meta itemprop="keywords" content="Spring Boot"/> <meta itemprop="datePublished" content="2025-12-06T03:45:32.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ–°æ‰‹ç¨‹åºå‘˜å¤§å¤§"/> <meta itemprop="url" content="https://juejin.cn/user/2025732284102551"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            springCloudGateway+Nacosæ³¨å†Œä¸è½¬å‘Netty+WebSocket
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2025732284102551/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ–°æ‰‹ç¨‹åºå‘˜å¤§å¤§
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-06T03:45:32.000Z" title="Sat Dec 06 2025 03:45:32 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åŠŸèƒ½ä»‹ç»ï¼šä½¿ç”¨nacosçš„ç½‘å…³æ¥è½¬å‘æœåŠ¡</p>
<p>ä½¿ç”¨åœºæ™¯ï¼šä¾‹å¦‚ï¼Œåœ¨å®‰å“å£³ä¸­åªæœ‰åç«¯ç½‘å…³æ¥å£æœ‰åšæ˜ å°„å¯ä»¥æ­£å¸¸è®¿é—®ï¼Œå…¶ä½™åœ°å€éƒ½æ— æ³•è®¿é—®ï¼Œæ‰€ä»¥minioçš„é¢„è§ˆï¼Œæ¶ˆæ¯æ¨¡å—websocketéƒ½éœ€é€šè¿‡ç½‘å…³æ¥è½¬å‘ã€‚</p>
<p>1-minioé€šè¿‡åç«¯æ¥å£è°ƒç”¨ï¼Œç„¶åè¿”å›äºŒè¿›åˆ¶æ¥å®ç°é¢„è§ˆ</p>
<p>2-websocketæ˜¯é€šè¿‡å°†æœåŠ¡æ³¨å†Œåˆ°nacosä¸­ï¼Œèµ°ç½‘å…³è½¬å‘æ¥å®ç°</p>
<p>pomé…ç½®</p>
<pre><code class="hljs language-java" lang="java">        &lt;dependency&gt;
            &lt;groupId&gt;com.alibaba.nacos&lt;/groupId&gt;
            &lt;artifactId&gt;nacos-client&lt;/artifactId&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;com.alibaba.cloud&lt;/groupId&gt;
            &lt;artifactId&gt;spring-cloud-starter-alibaba-nacos-discovery&lt;/artifactId&gt;
        &lt;/dependency&gt;
</code></pre>
<p>nacosé…ç½®</p>
<pre><code class="hljs language-java" lang="java">#v2<span class="hljs-number">.3</span><span class="hljs-number">.4_1</span>
im:
  tcpsocket:
    port: <span class="hljs-number">31111</span>
  websocket:
    port: <span class="hljs-number">31112</span>
  application:
    # Nettyåº”ç”¨åç§°
    name: mall-im-netty
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8c20b6bfb60340538612e3a68d7303df~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5omL56iL5bqP5ZGY5aSn5aSn:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765597532&amp;x-signature=%2FIcTobc0qhB2Bt2nzBjYxZm9dHQ%3D" alt="image.png" loading="lazy"/></p>
<p>3-javaä»£ç å¦‚ä¸‹</p>
<p>å¼€å¤´é…ç½®</p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-comment">/**
     * Nettyåº”ç”¨åç§°
     */</span>
    <span class="hljs-meta">@Value("${im.application.name}")</span>
    <span class="hljs-keyword">private</span> String nettyName;
    <span class="hljs-meta">@Resource</span>
    <span class="hljs-keyword">private</span> NacosDiscoveryProperties nacosDiscoveryProperties;
    <span class="hljs-meta">@Value("${spring.cloud.nacos.config.username}")</span>
    <span class="hljs-keyword">private</span> String nacosUsername;
    <span class="hljs-meta">@Value("${spring.cloud.nacos.config.password}")</span>
    <span class="hljs-keyword">private</span> String nacosPassword;
    <span class="hljs-keyword">private</span> Channel channel;
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/012406b7d9644181b0bd0f1f1df9233b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5omL56iL5bqP5ZGY5aSn5aSn:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765597532&amp;x-signature=1pTr%2BggEL4CTqiWZT6Ss3%2B%2BZODM%3D" alt="image.png" loading="lazy"/>
æœåŠ¡æ³¨å†Œæ ¸å¿ƒä»£ç </p>
<pre><code class="hljs language-java" lang="java">  <span class="hljs-comment">/**
     * å°†NettyæœåŠ¡æ³¨å†Œè¿›Nacos
     *
     * <span class="hljs-doctag">@param</span> nettyName æœåŠ¡åç§°
     * <span class="hljs-doctag">@param</span> nettyPort æœåŠ¡ç«¯å£å·
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">registerNamingService</span><span class="hljs-params">(String nettyName, Integer nettyPort)</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-type">Properties</span> <span class="hljs-variable">properties</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Properties</span>();
            properties.setProperty(PropertyKeyConst.SERVER_ADDR, nacosDiscoveryProperties.getServerAddr());
            properties.setProperty(PropertyKeyConst.NAMESPACE, nacosDiscoveryProperties.getNamespace());
            properties.setProperty(PropertyKeyConst.USERNAME, nacosUsername);
            properties.setProperty(PropertyKeyConst.PASSWORD, nacosPassword);
            <span class="hljs-type">NamingService</span> <span class="hljs-variable">namingService</span> <span class="hljs-operator">=</span> NamingFactory.createNamingService(properties);
            <span class="hljs-type">InetAddress</span> <span class="hljs-variable">address</span> <span class="hljs-operator">=</span> InetAddress.getLocalHost();
            namingService.registerInstance(nettyName, nacosDiscoveryProperties.getGroup(), address.getHostAddress(), nettyPort);
        } <span class="hljs-keyword">catch</span> (Exception e) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(e);
        }
    }
</code></pre>
<p>å®Œæ•´çš„websorcetæ³¨å†Œåˆ°nacosçš„ä»£ç å¦‚ä¸‹</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.fjean.modules.imserver.netty.ws;
 
<span class="hljs-keyword">import</span> com.alibaba.cloud.nacos.NacosDiscoveryProperties;
<span class="hljs-keyword">import</span> com.alibaba.nacos.api.PropertyKeyConst;
<span class="hljs-keyword">import</span> com.alibaba.nacos.api.naming.NamingFactory;
<span class="hljs-keyword">import</span> com.alibaba.nacos.api.naming.NamingService;
<span class="hljs-keyword">import</span> com.fjean.modules.imserver.netty.IMChannelHandler;
<span class="hljs-keyword">import</span> com.fjean.modules.imserver.netty.IMServer;
<span class="hljs-keyword">import</span> com.fjean.modules.imserver.netty.ws.endecode.MessageProtocolDecoder;
<span class="hljs-keyword">import</span> com.fjean.modules.imserver.netty.ws.endecode.MessageProtocolEncoder;
<span class="hljs-keyword">import</span> io.netty.bootstrap.ServerBootstrap;
<span class="hljs-keyword">import</span> io.netty.channel.*;
<span class="hljs-keyword">import</span> io.netty.channel.nio.NioEventLoopGroup;
<span class="hljs-keyword">import</span> io.netty.channel.socket.nio.NioServerSocketChannel;
<span class="hljs-keyword">import</span> io.netty.handler.codec.http.HttpObjectAggregator;
<span class="hljs-keyword">import</span> io.netty.handler.codec.http.HttpServerCodec;
<span class="hljs-keyword">import</span> io.netty.handler.codec.http.websocketx.WebSocketServerProtocolHandler;
<span class="hljs-keyword">import</span> io.netty.handler.ssl.SslContext;
<span class="hljs-keyword">import</span> io.netty.handler.ssl.SslContextBuilder;
<span class="hljs-keyword">import</span> io.netty.handler.ssl.util.SelfSignedCertificate;
<span class="hljs-keyword">import</span> io.netty.handler.stream.ChunkedWriteHandler;
<span class="hljs-keyword">import</span> io.netty.handler.timeout.IdleStateHandler;
<span class="hljs-keyword">import</span> lombok.extern.slf4j.Slf4j;
<span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Value;
<span class="hljs-keyword">import</span> org.springframework.boot.autoconfigure.condition.ConditionalOnProperty;
<span class="hljs-keyword">import</span> org.springframework.scheduling.annotation.Async;
<span class="hljs-keyword">import</span> org.springframework.stereotype.Component;
 
<span class="hljs-keyword">import</span> javax.annotation.PreDestroy;
<span class="hljs-keyword">import</span> javax.annotation.Resource;
<span class="hljs-keyword">import</span> javax.net.ssl.SSLException;
<span class="hljs-keyword">import</span> java.net.InetAddress;
<span class="hljs-keyword">import</span> java.security.cert.CertificateException;
<span class="hljs-keyword">import</span> java.util.Properties;
<span class="hljs-keyword">import</span> java.util.concurrent.TimeUnit;
 
<span class="hljs-comment">/**
 * WSæœåŠ¡å™¨,ç”¨äºè¿æ¥ç½‘é¡µçš„å®¢æˆ·ç«¯,åè®®æ ¼å¼: ç›´æ¥IMSendInfoçš„JSONåºåˆ—åŒ–
 *
 * <span class="hljs-doctag">@author</span> Blue
 * <span class="hljs-doctag">@date</span> 2022-11-20
 */</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-meta">@ConditionalOnProperty(prefix = "websocket", value = "enable", havingValue = "true", matchIfMissing = true)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">WebSocketServer</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">IMServer</span> {
 
    <span class="hljs-meta">@Value("${im.websocket.port:8878}")</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> port;
    <span class="hljs-comment">/**
     * Nettyåº”ç”¨åç§°
     */</span>
    <span class="hljs-meta">@Value("${im.application.name}")</span>
    <span class="hljs-keyword">private</span> String nettyName;
 
    <span class="hljs-meta">@Value("${spring.cloud.nacos.config.username}")</span>
    <span class="hljs-keyword">private</span> String nacosUsername;
    <span class="hljs-meta">@Value("${spring.cloud.nacos.config.password}")</span>
    <span class="hljs-keyword">private</span> String nacosPassword;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">volatile</span> <span class="hljs-type">boolean</span> <span class="hljs-variable">ready</span> <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>;
 
    <span class="hljs-keyword">private</span> EventLoopGroup bossGroup;
    <span class="hljs-keyword">private</span> EventLoopGroup workGroup;
 
    <span class="hljs-meta">@Resource</span>
    <span class="hljs-keyword">private</span> NacosDiscoveryProperties nacosDiscoveryProperties;
 
    <span class="hljs-keyword">private</span> Channel channel;
 
 
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isReady</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> ready;
    }
 
    <span class="hljs-meta">@Async</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">start</span><span class="hljs-params">()</span> {
        <span class="hljs-type">ServerBootstrap</span> <span class="hljs-variable">bootstrap</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ServerBootstrap</span>();
        bossGroup = <span class="hljs-keyword">new</span> <span class="hljs-title class_">NioEventLoopGroup</span>();
        workGroup = <span class="hljs-keyword">new</span> <span class="hljs-title class_">NioEventLoopGroup</span>();
        <span class="hljs-comment">// è®¾ç½®ä¸ºä¸»ä»çº¿ç¨‹æ¨¡å‹</span>
        bootstrap.group(bossGroup, workGroup)
                <span class="hljs-comment">// è®¾ç½®æœåŠ¡ç«¯NIOé€šä¿¡ç±»å‹</span>
                .channel(NioServerSocketChannel.class)
                <span class="hljs-comment">// ä½¿ç”¨æœ¬åœ°åœ°å€ï¼Œç»‘å®šç«¯å£å·</span>
                .localAddress(port)
                <span class="hljs-comment">// è®¾ç½®ChannelPipelineï¼Œä¹Ÿå°±æ˜¯ä¸šåŠ¡èŒè´£é“¾ï¼Œç”±å¤„ç†çš„Handlerä¸²è”è€Œæˆï¼Œç”±ä»çº¿ç¨‹æ± å¤„ç†</span>
                .childHandler(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ChannelInitializer</span>&lt;Channel&gt;() {
                    <span class="hljs-comment">// æ·»åŠ å¤„ç†çš„Handlerï¼Œé€šå¸¸åŒ…æ‹¬æ¶ˆæ¯ç¼–è§£ç ã€ä¸šåŠ¡å¤„ç†ï¼Œä¹Ÿå¯ä»¥æ˜¯æ—¥å¿—ã€æƒé™ã€è¿‡æ»¤ç­‰</span>
                    <span class="hljs-meta">@Override</span>
                    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">initChannel</span><span class="hljs-params">(Channel ch)</span> <span class="hljs-keyword">throws</span> CertificateException, SSLException {
                        <span class="hljs-comment">// è·å–èŒè´£é“¾</span>
                        <span class="hljs-type">ChannelPipeline</span> <span class="hljs-variable">pipeline</span> <span class="hljs-operator">=</span> ch.pipeline();
                        pipeline.addLast(<span class="hljs-keyword">new</span> <span class="hljs-title class_">IdleStateHandler</span>(<span class="hljs-number">60</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, TimeUnit.SECONDS));
                        pipeline.addLast(<span class="hljs-string">"http-codec"</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">HttpServerCodec</span>());
                        pipeline.addLast(<span class="hljs-string">"aggregator"</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">HttpObjectAggregator</span>(<span class="hljs-number">65535</span>));
                        pipeline.addLast(<span class="hljs-string">"http-chunked"</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">ChunkedWriteHandler</span>());
                        pipeline.addLast(<span class="hljs-keyword">new</span> <span class="hljs-title class_">WebSocketServerProtocolHandler</span>(<span class="hljs-string">"/im"</span>));
                        pipeline.addLast(<span class="hljs-string">"encode"</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">MessageProtocolEncoder</span>());
                        pipeline.addLast(<span class="hljs-string">"decode"</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">MessageProtocolDecoder</span>());
                        pipeline.addLast(<span class="hljs-string">"handler"</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">IMChannelHandler</span>());
                    }
                })
                <span class="hljs-comment">// bootstrap è¿˜å¯ä»¥è®¾ç½®TCPå‚æ•°ï¼Œæ ¹æ®éœ€è¦å¯ä»¥åˆ†åˆ«è®¾ç½®ä¸»çº¿ç¨‹æ± å’Œä»çº¿ç¨‹æ± å‚æ•°ï¼Œæ¥ä¼˜åŒ–æœåŠ¡ç«¯æ€§èƒ½ã€‚</span>
                <span class="hljs-comment">// å…¶ä¸­ä¸»çº¿ç¨‹æ± ä½¿ç”¨optionæ–¹æ³•æ¥è®¾ç½®ï¼Œä»çº¿ç¨‹æ± ä½¿ç”¨childOptionæ–¹æ³•è®¾ç½®ã€‚</span>
                <span class="hljs-comment">// backlogè¡¨ç¤ºä¸»çº¿ç¨‹æ± ä¸­åœ¨å¥—æ¥å£æ’é˜Ÿçš„æœ€å¤§æ•°é‡ï¼Œé˜Ÿåˆ—ç”±æœªè¿æ¥é˜Ÿåˆ—ï¼ˆä¸‰æ¬¡æ¡æ‰‹æœªå®Œæˆçš„ï¼‰å’Œå·²è¿æ¥é˜Ÿåˆ—</span>
                .option(ChannelOption.SO_BACKLOG, <span class="hljs-number">5</span>)
                <span class="hljs-comment">// è¡¨ç¤ºè¿æ¥ä¿æ´»ï¼Œç›¸å½“äºå¿ƒè·³æœºåˆ¶ï¼Œé»˜è®¤ä¸º7200s</span>
                .childOption(ChannelOption.SO_KEEPALIVE, <span class="hljs-literal">true</span>);
        <span class="hljs-comment">// æŠŠnettyæ³¨å†Œåˆ°nacosæœåŠ¡ä¸­</span>
        registerNamingService(nettyName, port);
 
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// ç»‘å®šç«¯å£ï¼Œå¯åŠ¨selectçº¿ç¨‹ï¼Œè½®è¯¢ç›‘å¬channeläº‹ä»¶ï¼Œç›‘å¬åˆ°äº‹ä»¶ä¹‹åå°±ä¼šäº¤ç»™ä»çº¿ç¨‹æ± å¤„ç†</span>
            channel = bootstrap.bind(port).sync().channel();
            <span class="hljs-comment">// å°±ç»ªæ ‡å¿—</span>
            <span class="hljs-built_in">this</span>.ready = <span class="hljs-literal">true</span>;
            log.info(<span class="hljs-string">"websocket server åˆå§‹åŒ–å®Œæˆ,ç«¯å£ï¼š{}"</span>, port);
            <span class="hljs-comment">// ç­‰å¾…æœåŠ¡ç«¯å£å…³é—­</span>
            <span class="hljs-comment">//channel.closeFuture().sync();</span>
        } <span class="hljs-keyword">catch</span> (InterruptedException e) {
            log.info(<span class="hljs-string">"websocket server åˆå§‹åŒ–å¼‚å¸¸"</span>, e);
        }
    }
 
    <span class="hljs-meta">@PreDestroy</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">stop</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">if</span> (bossGroup != <span class="hljs-literal">null</span> &amp;&amp; !bossGroup.isShuttingDown() &amp;&amp; !bossGroup.isShutdown()) {
            bossGroup.shutdownGracefully();
        }
        <span class="hljs-keyword">if</span> (workGroup != <span class="hljs-literal">null</span> &amp;&amp; !workGroup.isShuttingDown() &amp;&amp; !workGroup.isShutdown()) {
            workGroup.shutdownGracefully();
        }
        <span class="hljs-built_in">this</span>.ready = <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">if</span> (channel != <span class="hljs-literal">null</span>) {
            channel.close();
        }
        log.info(<span class="hljs-string">"websocket server åœæ­¢"</span>);
    }
 
    <span class="hljs-comment">/**
     * å°†NettyæœåŠ¡æ³¨å†Œè¿›Nacos
     *
     * <span class="hljs-doctag">@param</span> nettyName æœåŠ¡åç§°
     * <span class="hljs-doctag">@param</span> nettyPort æœåŠ¡ç«¯å£å·
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">registerNamingService</span><span class="hljs-params">(String nettyName, Integer nettyPort)</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-type">Properties</span> <span class="hljs-variable">properties</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Properties</span>();
            properties.setProperty(PropertyKeyConst.SERVER_ADDR, nacosDiscoveryProperties.getServerAddr());
            properties.setProperty(PropertyKeyConst.NAMESPACE, nacosDiscoveryProperties.getNamespace());
            properties.setProperty(PropertyKeyConst.USERNAME, nacosUsername);
            properties.setProperty(PropertyKeyConst.PASSWORD, nacosPassword);
            <span class="hljs-type">NamingService</span> <span class="hljs-variable">namingService</span> <span class="hljs-operator">=</span> NamingFactory.createNamingService(properties);
            <span class="hljs-type">InetAddress</span> <span class="hljs-variable">address</span> <span class="hljs-operator">=</span> InetAddress.getLocalHost();
            namingService.registerInstance(nettyName, nacosDiscoveryProperties.getGroup(), address.getHostAddress(), nettyPort);
        } <span class="hljs-keyword">catch</span> (Exception e) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(e);
        }
    }
 
}
</code></pre>
<p>éœ€è¦ç»´æŠ¤çš„sqlå¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java">-- æ›´æ–°å†…å®¹
-- <span class="hljs-number">1.</span>æ–°å¢imçš„ç½‘å…³è·¯ç”±åä¸ºï¼šeqds-im
-- <span class="hljs-number">2.</span>é€šè¿‡ç½‘å…³è½¬å‘nettyï¼Œå®ç°é›¶ä¿¡ä»»å¹³å°çš„websocketè¿æ¥
-- æ–°å¢ç½‘å…³è·¯ç”±ï¼Œå¤‡æ³¨ï¼šç½‘å…³è·¯ç”±ä»æ•°æ®åº“æ–°å¢ï¼Œéœ€è¦ç™»å½•ç®¡ç†å‘˜è´¦å·-åœ¨åç«¯-è¿ç»´ä¸­å¿ƒ-è¿è¡Œç›‘æ§-è·¯ç”±ç½‘å…³ï¼Œæ‰¾åˆ°è·¯ç”±åä¸ºeqds-imï¼Œç„¶åé‡æ–°ä¿å­˜
-- æ³¨æ„ï¼Œä¸€å®šè¦eqds-imä¸€å®šè¦ç‚¹å‡»ç¼–è¾‘ï¼Œç„¶åé‡æ–°ä¿å­˜ï¼Œæ‰èƒ½ç”Ÿæ•ˆï¼ï¼ï¼
INSERT INTO `sys_gateway_route` (`id`, `router_id`, `name`, `uri`, `predicates`, `filters`, `retryable`, `strip_prefix`, `persistable`, `show_api`, `status`, `create_by`, `create_time`, `update_by`, `update_time`, `sys_org_code`, `module_name`) VALUES (<span class="hljs-string">'1899728591772602370'</span>, <span class="hljs-string">'eqds-im'</span>, <span class="hljs-string">'eqds-im'</span>, <span class="hljs-string">'lb:ws://mall-im-netty'</span>, <span class="hljs-string">'[{\"args\":[\"/im/**\"],\"name\":\"Path\"}]'</span>, <span class="hljs-string">'[]'</span>, NULL, <span class="hljs-number">1</span>, NULL, NULL, <span class="hljs-number">1</span>, <span class="hljs-string">'owner'</span>, <span class="hljs-string">'2025-03-12 15:46:06'</span>, NULL, NULL, NULL, NULL);
</code></pre>
<p>å‚è€ƒç½‘ç«™ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2Fqq_33858213%2Farticle%2Fdetails%2F134465384" title="https://blog.csdn.net/qq_33858213/article/details/134465384" target="_blank" ref="nofollow noopener noreferrer">springCloudGateway+Nacosæ³¨å†Œä¸è½¬å‘Netty+WebSocket_nettyæ³¨å†Œåˆ°nacos-CSDNåšå®¢</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Java æ¥å…¥ Pinecone æ­å»ºçŸ¥è¯†åº“è¸©å‘å®è®°]]></title>    <link>https://juejin.cn/post/7580263284337164329</link>    <guid>https://juejin.cn/post/7580263284337164329</guid>    <pubDate>2025-12-06T04:46:55.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7580263284337164329" data-draft-id="7580263284337147945" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Java æ¥å…¥ Pinecone æ­å»ºçŸ¥è¯†åº“è¸©å‘å®è®°"/> <meta itemprop="keywords" content="åç«¯,Java"/> <meta itemprop="datePublished" content="2025-12-06T04:46:55.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ©™åºå‘˜å°ç«™"/> <meta itemprop="url" content="https://juejin.cn/user/1546375522426169"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Java æ¥å…¥ Pinecone æ­å»ºçŸ¥è¯†åº“è¸©å‘å®è®°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1546375522426169/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ©™åºå‘˜å°ç«™
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-06T04:46:55.000Z" title="Sat Dec 06 2025 04:46:55 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»19åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€å¼•è¨€ï¼šä¸ºä»€ä¹ˆè¦åšçŸ¥è¯†åº“</h2>
<p>åœ¨æ„å»ºåšå®¢ã€çŸ¥è¯†ç³»ç»Ÿæˆ– AI æœç´¢åŠ©æ‰‹æ—¶ï¼Œä¸€ä¸ªæ ¸å¿ƒéœ€æ±‚æ˜¯â€”â€”<strong>è®© AI èƒ½ç†è§£ä½ çš„ä¸šåŠ¡çŸ¥è¯†ï¼Œå¹¶èƒ½å‡†ç¡®æ£€ç´¢</strong>ã€‚</p>
<p>å¾ˆå¤šåŒå­¦ç¬¬ä¸€ååº”æ˜¯ç›´æ¥è®© AI è¯»æ•°æ®åº“ã€æŸ¥ ESï¼Œä½†è¿™æ ·åšæœ‰æ˜æ˜¾å¼Šç«¯ï¼š</p>
<ul>
<li>ES/Mysql æŸ¥è¯¢çš„æ˜¯ç»“æ„åŒ–å†…å®¹ï¼Œ<strong>æ— æ³•è¡¨è¾¾è¯­ä¹‰ç›¸ä¼¼åº¦</strong>ï¼ˆåŒ¹é…ä¸ä¸Šç”¨æˆ·æ¨¡ç³Šé—®é¢˜ï¼‰</li>
<li>agent ç›´è¿æ•°æ®åº“ï¼Œ<strong>æˆæœ¬é«˜ã€é€Ÿåº¦æ…¢ã€ç»´æŠ¤å¤æ‚</strong></li>
</ul>
<p>å¦‚æœæ˜¯æœåŠ¡ç«¯é¡¹ç›®ï¼Œç”¨ Java æœ€è‡ªç„¶ä¸è¿‡ï¼šç»Ÿä¸€æŠ€æœ¯æ ˆã€ç»´æŠ¤çœå¿ƒã€æ€§èƒ½ç¨³å®šã€‚</p>
<p>è€Œ Pinecone åˆ™æ˜¯å½“å‰æœ€è½»é‡ã€æœ€ç¨³å®šã€è´¹ç”¨å¯æ§çš„å‘é‡æ•°æ®åº“ï¼Œå°¤å…¶å®ƒè‡ªå¸¦çš„ embedding æœåŠ¡ï¼Œ<strong>çœå»äº† OpenAI çš„ Token èŠ±è´¹</strong>ï¼Œé€‚åˆä¸ªäººå¼€å‘è€…æˆ–ä¸­å°é¡¹ç›®ã€‚äºæ˜¯ä¾¿æœ‰äº†è¿™ç¯‡è¸©å‘æ€»ç»“ï¼Œå¸Œæœ›ä½ èƒ½å°‘èµ°å¼¯è·¯ã€‚</p>
<hr/>
<h2 data-id="heading-1">äºŒã€ç¯å¢ƒä¸å‰ç½®æ¡ä»¶</h2>
<h3 data-id="heading-2">1. <strong>Pinecone è´¦å· &amp; API Key</strong></h3>
<p>æ³¨å†Œå®Œæˆåï¼Œä½ ä¼šè·å¾—ä¸€ä¸ª API Keyã€‚è¯·åŠ¡å¿…æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š</p>
<ul>
<li><strong>ä¸è¦å°† API Key ä»¥æ˜æ–‡å½¢å¼å†™å…¥ä»“åº“</strong></li>
<li><strong>ç”Ÿäº§ç¯å¢ƒè¯·ä½¿ç”¨ Vault æˆ–ç¯å¢ƒå˜é‡è¿›è¡Œç®¡ç†</strong></li>
</ul>
<p>åœ¨ Pinecone å…è´¹è®¡åˆ’ä¸­ï¼Œä½ å¯ä»¥è·å¾—ä»¥ä¸‹èµ„æºï¼š</p>
<ul>
<li>2 GB å­˜å‚¨ç©ºé—´ï¼ˆå¯¹åšå®¢å†…å®¹å®Œå…¨å¤Ÿç”¨ï¼‰</li>
<li>æ¯æœˆ 100 ä¸‡è¯»å–å•å…ƒã€200 ä¸‡å†™å…¥å•å…ƒ</li>
<li>æœ€å¤š 5 ä¸ª serverless index</li>
<li>æ¯ä¸ª index æœ€å¤š 100 ä¸ª namespace</li>
<li>æ— é™æˆå‘˜æƒé™</li>
</ul>
<hr/>
<h3 data-id="heading-3">2. åˆ›å»º Index</h3>
<p>è¿™é‡Œæœ‰ä¸€ä¸ªå…³é”®ç‚¹ï¼šå¦‚æœåˆ›å»º Index æ—¶ embedding é€‰æ‹©äº† <em>OpenAI</em> æˆ– <em>Custom</em>ï¼Œä½ å°†æ— æ³•ä½¿ç”¨ Pinecone çš„å…è´¹ embedding æœåŠ¡ã€‚</p>
<p>æ­£ç¡®åšæ³•æ˜¯ï¼š<strong>åœ¨åˆ›å»º Index æ—¶é€‰æ‹©å†…ç½®embedding æ¨¡å¼</strong>ã€‚</p>
<p>Pinecone å½“å‰æä¾›ä¸‰ç§ embedding æ¨¡å‹ï¼š</p>
<ul>
<li><strong>llama-text-embed-v2</strong>ï¼ˆæ¨èï¼Œæ”¯æŒçš„ tokenä¸º2048ï¼‰</li>
<li><strong>multilingual-e5-large</strong>ï¼ˆæ”¯æŒ507tokenï¼‰</li>
<li><strong>pinecone-sparse-english-v0</strong>ï¼ˆ512 tokensï¼Œè€Œä¸”åªæ”¯æŒè‹±æ–‡æ–‡æœ¬ï¼‰</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/949aa96758b749ffb6aab0afec12c950~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5qmZ5bqP5ZGY5bCP56uZ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765601215&amp;x-signature=WHSvqQx3%2FN%2FS4x9VsgnxzALzkH4%3D" alt="image-20251206104318152" loading="lazy"/></p>
<p>æˆ‘é€‰æ‹© <strong>llama-text-embed-v2</strong>ï¼Œå› ä¸ºå®ƒèƒ½å¤Ÿå¤„ç†æ›´é•¿çš„æ–‡æœ¬ï¼Œç‰¹åˆ«é€‚åˆåšå®¢ç±»å†…å®¹çš„å‘é‡åŒ–ã€‚</p>
<hr/>
<h2 data-id="heading-4">ä¸‰ã€Java é¡¹ç›®ä¾èµ–ï¼ˆMaven/Gradleï¼‰</h2>
<p>Pinecone è™½ç„¶æä¾›äº†å®˜æ–¹ Java SDKï¼Œä½†å®é™…è¸©ä¸‹æ¥ï¼Œéå¸¸ä¸æ¨èåœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨ï¼Œå°¤å…¶æ˜¯å¯¹ä¸­å°å‹é¡¹ç›®æˆ–è€ç‰ˆæœ¬ Spring Boot é¡¹ç›®æ¥è¯´å‘ç‚¹ä¸å°‘ã€‚</p>
<p>ä¸ºä»€ä¹ˆè¿™ä¹ˆè¯´ï¼Ÿä¸»è¦é—®é¢˜æœ‰ä»¥ä¸‹å‡ ä¸ªï¼š</p>
<h3 data-id="heading-5">1. <strong>Spring Boot Starter æœ€ä½è¦æ±‚ 3.x</strong></h3>
<p>å®˜æ–¹ Pinecone SDK çš„ä¾èµ–é“¾åŸºäº Spring WebFluxï¼Œå¹¶ä¸”å†…éƒ¨ä¾èµ–çš„ HttpClientã€reactor ä½“ç³»éƒ½æ˜¯ <strong>Spring Boot 3.x</strong> æ‰èƒ½å…¼å®¹çš„ã€‚</p>
<p>å¦‚æœä½ ä½¿ç”¨çš„æ˜¯ï¼š</p>
<ul>
<li>Spring Boot <strong>2.7.X</strong></li>
<li>Spring Boot <strong>2.6.X</strong> æˆ–æ›´è€</li>
</ul>
<p>é‚£ä¹ˆç»“æœé€šå¸¸æ˜¯ï¼š</p>
<ul>
<li>å¯åŠ¨ç›´æ¥æŠ¥é”™ï¼Œå³ç¼–è¯‘æ— æ³•é€šè¿‡</li>
<li>json æˆ– HttpClient ç‰ˆæœ¬å†²çªï¼Œå®˜æ–¹ä¾èµ–ç‰ˆæœ¬å¯ä»¥åœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fpinecone-io%2Fpinecone-java-client%2Fblob%2Fmain%2Fbuild.gradle" target="_blank" title="https://github.com/pinecone-io/pinecone-java-client/blob/main/build.gradle" ref="nofollow noopener noreferrer">github.com/pinecone-ioâ€¦</a> ä¸­çœ‹åˆ°</li>
<li>è¿˜å¯èƒ½å‡ºç°è¿è¡Œæ—¶ NoSuchMethodErrorå¼‚å¸¸</li>
</ul>
<blockquote>
<p>å¦‚æœæ·»åŠ å®˜æ–¹SDKå‡ºç°ä»¥ä¸‹é”™è¯¯ï¼š</p>
<pre><code class="hljs language-sh" lang="sh">org.springframework.web.util.NestedServletException: Handler dispatch failed; nested exception is java.lang.NoSuchMethodError at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1087) ~[spring-webmvc-5.3.31.jar:5.3.31] at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965) ~[spring-webmvc-5.3.31.jar:5.3.31] at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.31.jar:5.3.31] at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) ~[spring-webmvc-5.3.31.jar:5.3.31] at javax.servlet.http.HttpServlet.service(HttpServlet.java:517) ~[jakarta.servlet-api-4.0.4.jar:4.0.4] at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.31.jar:5.3.31]
</code></pre>
<p>é‚£ç‰ˆæœ¬å°±æ˜¯ä¸ä¸€è‡´å¯¼è‡´</p>
</blockquote>
<p><strong>ç»“è®ºï¼šSpring Boot 2.x åŸºæœ¬æ— æ³•æ— ç—›é›†æˆå®˜æ–¹ SDKã€‚</strong></p>
<hr/>
<h3 data-id="heading-6">2. <strong>SDK å†…éƒ¨ HttpClient ä¸ Spring 2.x å­˜åœ¨å†²çª</strong></h3>
<p>Pinecone SDK é»˜è®¤ä½¿ç”¨ Java HttpClient + Reactor è¿›è¡Œè¯·æ±‚å°è£…ã€‚
ä½†æ˜¯ Spring Boot 2.x ä½¿ç”¨çš„ Tomcat/Netty ç‰ˆæœ¬è¾ƒè€ï¼Œå¯¼è‡´å†²çªé—®é¢˜ä¸€å †ï¼Œæ¯”å¦‚ï¼š</p>
<ul>
<li><code>java.lang.NoSuchMethodError: HttpClient.create()</code></li>
<li><code>reactor.netty.http.client.HttpClientConfig</code> ç‰ˆæœ¬ä¸å…¼å®¹</li>
<li>WebClient åº•å±‚è¡Œä¸ºå¼‚å¸¸</li>
</ul>
<p>ä½ å¦‚æœç¡¬æ¥ SDKï¼Œå¾ˆå¯èƒ½ä¼šé™·å…¥æ— ä¼‘æ­¢çš„â€œå‡çº§ä¸€å †åº“ â†’ å¦ä¸€ä¸ªåº“åˆå†²çªâ€çš„æ­»å¾ªç¯ã€‚</p>
<hr/>
<h3 data-id="heading-7">3. <strong>Java 8 é¡¹ç›®å¾ˆéš¾ä½¿ç”¨ SDK</strong></h3>
<p>Pinecone SDK è¦æ±‚çš„æœ€ä½ Java ç‰ˆæœ¬é€šå¸¸åœ¨ï¼š</p>
<ul>
<li>Java <strong>11</strong></li>
<li>æˆ–ç”šè‡³ Java <strong>17</strong></li>
</ul>
<p>å¦‚æœä½ çš„å…¬å¸é¡¹ç›®è¿˜åœåœ¨ Java 8ï¼Œé‚£ä¹ˆä¸¤ä¸ªå­—ï¼š</p>
<blockquote>
<p>åˆ«ç”¨ã€‚</p>
</blockquote>
<p>ä¸ä»…å¯åŠ¨ä¸äº†ï¼Œè¿˜ä¼šé‡åˆ° ClassFile major version ä¸å…¼å®¹çš„é—®é¢˜ã€‚</p>
<hr/>
<h3 data-id="heading-8">4. æ¨èåšæ³•ï¼š<strong>å®Œå…¨æ”¾å¼ƒ SDKï¼Œç›´æ¥ç”¨ HTTP æ¥å£</strong></h3>
<p>è¿™æ˜¯è¸©å‘åæ€»ç»“å‡ºæ¥æœ€ç¨³å®šã€æœ€é€šç”¨çš„æ–¹æ¡ˆï¼š</p>
<ul>
<li>å…¼å®¹æ‰€æœ‰ Spring Boot ç‰ˆæœ¬ï¼ˆ2.xã€3.x éƒ½èƒ½ç”¨ï¼‰</li>
<li>å…¼å®¹ Java 8 ~ Java 21</li>
<li>ä¾èµ–å¯æ§ï¼Œä¸ä¼šå¼•å…¥é‡å‹çš„ Reactor/Netty</li>
<li>æ˜“äºè°ƒè¯•å’Œæ‰©å±•</li>
<li>æ€§èƒ½ä¹Ÿå®Œå…¨å¤Ÿç”¨</li>
</ul>
<p>ä½ åªéœ€è¦ä¸¤ä¸ªå·¥å…·ï¼š</p>
<ul>
<li><strong>RestTemplate</strong>ï¼ˆSpring Boot 2.xï¼‰</li>
<li><strong>WebClient</strong>ï¼ˆSpring Boot 3.x æ¨èï¼‰</li>
</ul>
<hr/>
<h2 data-id="heading-9">å››ã€Embeddingï¼šæ¨¡å‹é€‰æ‹©ä¸é€Ÿç‡é™åˆ¶</h2>
<p>åœ¨æ¥å…¥ Pinecone æ„å»ºçŸ¥è¯†åº“æ—¶ï¼ŒEmbedding æ˜¯æ•´ä¸ªæµç¨‹ä¸­æœ€å®¹æ˜“è¸©å‘ã€å´åˆæœ€å…³é”®çš„ä¸€ç¯ã€‚Embedding çš„é€‰æ‹©ä¼šç›´æ¥å½±å“ï¼š</p>
<ul>
<li>å‘é‡ç»´åº¦ï¼ˆå½±å“å­˜å‚¨æˆæœ¬ &amp; æŸ¥è¯¢é€Ÿåº¦ï¼‰</li>
<li>å¬å›æ•ˆæœï¼ˆå†³å®šæ£€ç´¢æ˜¯å¦ç²¾å‡†ï¼‰</li>
<li>å†™å…¥é€Ÿç‡é™åˆ¶ï¼ˆRLï¼‰</li>
<li>Token é™åˆ¶ï¼ˆèƒ½ä¸èƒ½å¡ä¸‹å¤§æ®µæ–‡ç« ï¼‰</li>
</ul>
<p>ä¸ºäº†é¿å…åå¤è¯•é”™ï¼Œè¿™é‡Œæ€»ç»“æˆ‘åœ¨å®æˆ˜ä¸­è¸©è¿‡çš„å‘å’Œæœ€ç»ˆçš„æœ€ä½³å®è·µã€‚</p>
<h3 data-id="heading-10">1. Pinecone æä¾›çš„ Embedding ç±»å‹</h3>
<p>Pinecone ç›®å‰ä¸»è¦æä¾›ä»¥ä¸‹ç±»å‹çš„å‘é‡åŒ–æ¨¡å‹ï¼š</p>
<ul>
<li><strong>æ–‡æœ¬æ¨¡å‹</strong>ï¼ˆtext embeddingï¼‰</li>
<li><strong>å¤šæ¨¡æ€æ¨¡å‹</strong>ï¼ˆimage + text embeddingï¼‰</li>
<li><strong>ç¨€ç–/æ··åˆæ¨¡å‹</strong>ï¼ˆsparse + dense ç»„åˆï¼Œå¦‚æ£€ç´¢ç½‘é¡µæ›´å¼ºï¼‰</li>
</ul>
<p>ä¸åŒæ¨¡å‹å¯¹åº”ä¸åŒç»´åº¦ï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li><code>llama-text-embed-v2</code>: 1024 ç»´</li>
<li><code>multilingual-e5-large</code>: 1024 ç»´ï¼ˆæ”¯æŒå¤šè¯­è¨€ï¼‰</li>
<li><code>pinecone-sparse-english-v0</code>: ç¨€ç–å‘é‡ï¼Œé€‚åˆç½‘é¡µç±»æ£€ç´¢</li>
</ul>
<p>å¦‚æœä½ åªåšâ€œåšå®¢å†…å®¹çŸ¥è¯†åº“â€â€œæŠ€æœ¯æ–‡æ¡£æ£€ç´¢â€â€œRAG é—®ç­”â€ï¼Œ<strong>æ–‡æœ¬æ¨¡å‹å®Œå…¨è¶³å¤Ÿ</strong>ã€‚</p>
<h3 data-id="heading-11">2. ä¸ºä»€ä¹ˆå¼ºçƒˆæ¨èä½¿ç”¨ Pinecone å†…ç½® Embedding</h3>
<p>å¾ˆå¤šäººå–œæ¬¢ç”¨ OpenAIã€Gemini æˆ–è‡ªè®­ç»ƒ embeddingï¼Œä½†çœŸæ­£è¸©è¿‡å‘åå°±ä¼šå‘ç°ï¼š</p>
<h4 data-id="heading-12"><strong>ï¼ˆ1ï¼‰çœé’±ï¼ˆæå…¶å…³é”®ï¼‰</strong></h4>
<ul>
<li>OpenAI embedding æŒ‰ Token è®¡è´¹</li>
<li>Gemini embedding æŒ‰å­—ç¬¦/API è°ƒç”¨è®¡è´¹</li>
<li>Pinecone å†…ç½® embedding <strong>å…è´¹</strong>ï¼ˆåœ¨å…è´¹é¢åº¦å†…å®Œå…¨å¤Ÿç”¨ï¼‰</li>
</ul>
<p>å¦‚æœä½ çš„çŸ¥è¯†åº“æœ‰ï¼š</p>
<ul>
<li>200 ç¯‡åšå®¢</li>
<li>æ¯ç¯‡å‡ åƒå­—</li>
</ul>
<p>ç”¨ OpenAI/DeepSeek ç”Ÿæˆ embedding è´¹ç”¨å¯èƒ½è¦å‡ å—ç”šè‡³å‡ åå—ï¼Œè€Œ Pinecone å†…ç½®åˆ™æ˜¯ï¼š</p>
<blockquote>
<p>0 å…ƒ</p>
</blockquote>
<p>RAG å°é¡¹ç›®å®Œå…¨æ²¡å¿…è¦èŠ±è¿™ç¬”é’±ã€‚</p>
<h4 data-id="heading-13"><strong>ï¼ˆ2ï¼‰é¿å…è·¨æœåŠ¡å»¶è¿Ÿ &amp; å¤æ‚åº¦</strong></h4>
<p>å¦‚æœä½ åˆ†ä¸¤æ­¥åšï¼š</p>
<ol>
<li>æ–‡æœ¬ â†’ å¤–éƒ¨ embedding æœåŠ¡</li>
<li>embedding â†’ Pinecone å†™å…¥</li>
</ol>
<p>ä½ ä¼šé‡åˆ°ï¼š</p>
<ul>
<li>å¤šä¸€æ¬¡ç½‘ç»œè¯·æ±‚ï¼ˆæ›´æ…¢ï¼‰</li>
<li>å¤šä¸€å±‚æŠ¥é”™ï¼ˆæ›´éš¾ debugï¼‰</li>
<li>å¤šä¸€å±‚å®‰å…¨é…ç½®ï¼ˆAPI Keyã€è¶…æ—¶ã€Token é™åˆ¶ï¼‰</li>
</ul>
<p>å†…ç½® embedding åˆ™æ˜¯ï¼š</p>
<blockquote>
<p>ä¸€æ¬¡è¯·æ±‚ â†’ ç›´æ¥ç”Ÿæˆ embedding â†’ è‡ªåŠ¨å†™å…¥ Pinecone</p>
</blockquote>
<p>æ•´ä½“é“¾è·¯ç®€å•åˆ°æ²¡æ³•å†ç®€å•ã€‚</p>
<h4 data-id="heading-14"><strong>ï¼ˆ3ï¼‰é€‚é…åº¦é«˜ï¼Œä¸ä¼šè¸©ç»´åº¦é”™è¯¯</strong></h4>
<p>ä½¿ç”¨å¤–éƒ¨ embedding æ—¶æœ€å®¹æ˜“è¸©å‘ï¼š</p>
<ul>
<li>å†™å…¥æ—¶ä½ çš„å‘é‡ç»´åº¦ä¸º 1536</li>
<li>ç´¢å¼•åˆ›å»ºæ—¶ç»´åº¦è®¾ç½®ä¸º 1024</li>
<li>â†’ Pinecone ç›´æ¥æŠ¥é”™ï¼šdimension mismatch</li>
</ul>
<p>ä½†ä½¿ç”¨ <strong>Pinecone å†…ç½® embedding</strong> æ—¶ï¼š</p>
<ul>
<li>ç»´åº¦è‡ªåŠ¨åŒ¹é…</li>
<li>ä½ æ ¹æœ¬ä¸éœ€è¦æ‰‹åŠ¨æŒ‡å®š dim</li>
</ul>
<p>ä¿è¯ 100% æ­£ç¡®ã€‚</p>
<h3 data-id="heading-15">3. é€Ÿç‡é™åˆ¶ï¼ˆRate Limitï¼‰æ³¨æ„äº‹é¡¹</h3>
<p>Pinecone çš„å…è´¹é¢åº¦è™½ç„¶è¶³å¤Ÿç”¨ï¼Œä½†é€Ÿç‡é™åˆ¶ï¼ˆRLï¼‰ä¾ç„¶éœ€è¦ç‰¹åˆ«æ³¨æ„ï¼š</p>
<ul>
<li>æ¯åˆ†é’Ÿ <strong>æ•°ç™¾åˆ°æ•°åƒ</strong> embedding é™åˆ¶ï¼ˆè§†æ¨¡å‹è€Œå®šï¼‰</li>
<li>å†™å…¥å‘é‡ï¼ˆupsertï¼‰ä¹Ÿæœ‰ RL</li>
<li>æ‰¹é‡å†™å…¥è¿‡å¤§æ—¶ä¼šå‡ºç° <strong>429 Too Many Requests</strong></li>
</ul>
<p>å®æˆ˜å»ºè®®ï¼š</p>
<ul>
<li><strong>æ‰¹é‡å†™å…¥ 50 ~ 100 æ¡ä¸ºæœ€ä½³</strong></li>
<li>é‡åˆ° 429 è‡ªåŠ¨é‡è¯•ï¼ˆå¸¦æŒ‡æ•°é€€é¿ï¼‰</li>
<li>é•¿æ–‡æœ¬å…ˆåˆ‡ chunkï¼ˆ200~500 å­—ä¸€æ®µï¼‰</li>
</ul>
<p>åç»­ç« èŠ‚æˆ‘ä¼šæä¾›ä¸€ä¸ªï¼š</p>
<blockquote>
<p>Java ç‰ˆ æ‰¹é‡å†™å…¥ + RL è‡ªåŠ¨é€€é¿ çš„å®Œæ•´å¯è¿è¡Œä»£ç </p>
</blockquote>
<p>è¿™æ˜¯æˆ‘éªŒè¯è¿‡çš„æœ€ç¨³å®šæ–¹æ¡ˆï¼Œèƒ½ç¡®ä¿å†™å…¥ç¨³å®šä¸”ä¸è¢«é™æµã€‚</p>
<h3 data-id="heading-16">4. æœ€ä½³ç»“è®º</h3>
<p>å¦‚æœä½ æƒ³å¿«é€Ÿæ­å»º Pinecone çŸ¥è¯†åº“</p>
<blockquote>
<p><strong>ç›´æ¥ä½¿ç”¨ Pinecone çš„å†…ç½® embedding</strong></p>
</blockquote>
<p>åŸå› å¾ˆç®€å•ï¼š</p>
<ul>
<li>ä¾¿å®œï¼ˆç”šè‡³å…è´¹ï¼‰</li>
<li>æ•ˆæœè¶³å¤Ÿå¥½</li>
<li>ç»´åº¦ä¸ä¼šè¸©å‘</li>
<li>å¤§å¤§ç®€åŒ–å·¥ç¨‹å¤æ‚åº¦</li>
<li>æ›´é€‚åˆåšå®¢ç±»å†…å®¹æ£€ç´¢</li>
</ul>
<hr/>
<h2 data-id="heading-17">äº”ã€Pinecone æ ¸å¿ƒæ¦‚å¿µ</h2>
<p>Pinecone çœ‹èµ·æ¥ç®€å• â€”â€” å­˜å‘é‡ã€æŸ¥ç›¸ä¼¼ã€‚ä½†è¦æŠŠå®ƒç”¨ç¨³å®šã€å¯ç»´æŠ¤ï¼Œè¿˜è¦ç†è§£å‡ ä¸ªæ ¸å¿ƒæ¦‚å¿µåŠå®ƒä»¬ä¹‹é—´çš„ç›¸äº’å…³ç³»ã€‚ä¸‹é¢æŠŠæ¯ä¸ªæ¦‚å¿µæ‹†å¼€è®²ï¼Œå¹¶åˆ—å‡ºå¸¸è§å‘ä¸å»ºè®®ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8502fab75db147e2871d48b3c6a2b7f1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5qmZ5bqP5ZGY5bCP56uZ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765601215&amp;x-signature=htLk%2B1WJX7gkjC7GDV46LcX2Ovk%3D" alt="image-20251206104039143" loading="lazy"/></p>
<h3 data-id="heading-18">1. indexï¼ˆç´¢å¼•ï¼‰</h3>
<p><strong>å®šä¹‰</strong>ï¼šPinecone ä¸­æœ€é¡¶å±‚çš„å­˜å‚¨å•å…ƒï¼Œç±»ä¼¼å…³ç³»å‹æ•°æ®åº“ä¸­çš„ä¸€å¼ è¡¨ã€‚ä¸€ä¸ª index å­˜å‚¨ä¸€ç±»å‘é‡ï¼Œåˆ›å»ºæ—¶éœ€è¦æŒ‡å®šç´¢å¼•ç±»å‹ï¼ˆserverless / provisionedï¼‰ã€metricã€dimensionï¼ˆå¦‚æœä¸æ˜¯å†…ç½® embedding åˆ™éœ€è¦ï¼‰ç­‰å±æ€§ã€‚</p>
<p><strong>å»ºè®®</strong>ï¼š</p>
<ul>
<li>å°å‹é¡¹ç›®ä¼˜å…ˆä½¿ç”¨ <strong>serverless index</strong>ï¼Œå…è¿ç»´ã€æŒ‰é‡ä»˜è´¹ã€å¼€ç®±å³ç”¨ã€‚</li>
<li>ç”Ÿäº§çº§åˆ«ä¸”æœ‰æ˜ç¡® QPS éœ€æ±‚ï¼Œå¯è€ƒè™‘ <strong>provisioned indexï¼ˆpodsï¼‰</strong> ä»¥è·å¾—ç¨³å®šçš„ååã€‚</li>
</ul>
<p><strong>å¸¸è§å‘</strong>ï¼š</p>
<ul>
<li>åœ¨åˆ›å»º index æ—¶æŒ‡å®šäº†é”™è¯¯çš„ metricï¼ˆæ¯”å¦‚è·ç¦»åº¦é‡ä½ æƒ³ç”¨ä½™å¼¦ä½†é€‰äº†æ¬§æ°ï¼‰ï¼Œä¼šå½±å“æ£€ç´¢ç»“æœè´¨é‡ã€‚</li>
</ul>
<h3 data-id="heading-19">2. dimensionï¼ˆå‘é‡ç»´åº¦ï¼‰</h3>
<p><strong>å®šä¹‰</strong>ï¼šæ¯ä¸ªå‘é‡çš„é•¿åº¦ï¼ˆä¾‹å¦‚ 1024ã€1536 ç­‰ï¼‰ï¼Œå¿…é¡»ä¸ embedding æœåŠ¡è¾“å‡ºçš„ç»´åº¦å®Œå…¨ä¸€è‡´ã€‚</p>
<p><strong>å»ºè®®</strong>ï¼š</p>
<ul>
<li>å¦‚æœä½¿ç”¨ <strong>Pinecone å†…ç½® embedding</strong>ï¼Œç»´åº¦é€šå¸¸ç”±æœåŠ¡å†³å®šï¼Œ<strong>ä¸éœ€è¦æ‰‹åŠ¨è®¾ç½®</strong>ï¼Œåˆ›å»º index æ—¶é€‰å¥½å†…ç½®æ¨¡å‹å¯¹åº”çš„é…ç½®å³å¯ã€‚</li>
<li>å¦‚æœä½ ç”¨ <strong>å¤–éƒ¨ embeddingï¼ˆOpenAI/å…¶ä»–ï¼‰</strong>ï¼Œåˆ›å»º index æ—¶å¿…é¡»æ‰‹åŠ¨è®¾ç½®ä¸ embedding è¾“å‡ºç›¸åŒçš„ dimensionã€‚</li>
</ul>
<p><strong>å¸¸è§å‘</strong>ï¼š</p>
<ul>
<li>æœ€å¸¸è§çš„é”™è¯¯å°±æ˜¯ <strong>dimension mismatch</strong>ï¼šå†™å…¥å‘é‡æŠ¥é”™ï¼Œæç¤ºç»´åº¦ä¸ä¸€è‡´ã€‚æ’æŸ¥æ­¥éª¤ï¼š
<ol>
<li>æ‰“å° embedding è¾“å‡ºçš„å‘é‡é•¿åº¦ï¼ˆ<code>vector.length</code>ï¼‰</li>
<li>ç¡®è®¤ index çš„ dimensionï¼ˆæ§åˆ¶å°æˆ– API æŸ¥çœ‹ï¼‰</li>
<li>è‹¥ä¸ä¸€è‡´ï¼Œé‡å»º index æˆ–è°ƒæ•´ embeddingã€‚</li>
</ol>
</li>
</ul>
<p>ç¤ºä¾‹é”™è¯¯ä¿¡æ¯ï¼š</p>
<p>400 Bad Request: Upsert failed: dimension mismatch (expected 1024, got 1536)</p>
<h3 data-id="heading-20">3. namespaceï¼ˆå‘½åç©ºé—´ï¼‰</h3>
<p><strong>å®šä¹‰</strong>ï¼šé€»è¾‘åˆ†åŒºï¼Œç”¨æ¥æŠŠåŒä¸€ index ä¸‹çš„æ•°æ®æŒ‰ä¸šåŠ¡æˆ–ç±»å‹åˆ†ç»„ï¼ˆä¾‹å¦‚ <code>articles</code>ã€<code>images</code>ã€<code>attachments</code>ï¼‰ã€‚namespace åœ¨æŸ¥è¯¢æ—¶å¯ä»¥ä½œä¸ºè¿‡æ»¤èŒƒå›´ï¼Œä»è€Œé¿å…è·¨ä¸šåŠ¡æ±¡æŸ“å¬å›ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cad760d35c7e46a3adb14d22c1cfc164~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5qmZ5bqP5ZGY5bCP56uZ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765601215&amp;x-signature=00MA4Ly7VCvO1iD4hxaQTi%2BwxWc%3D" alt="image-20251206104109898" loading="lazy"/></p>
<p><strong>å»ºè®®</strong>ï¼š</p>
<ul>
<li>ä½¿ç”¨ namespace åšè¯­ä¹‰/ä¸šåŠ¡éš”ç¦»ï¼Œä¾¿äºåšå¤šç§Ÿæˆ·æˆ–å¤šç”¨é€”æ£€ç´¢ã€‚</li>
<li>ä¸è¦æŠŠå®Œå…¨ä¸åŒç”¨é€”çš„æ•°æ®ï¼ˆæ¯”å¦‚ç”¨æˆ·å¯¹è¯ä¸é™æ€æ–‡æ¡£ï¼‰æ··æ”¾åœ¨åŒä¸€ namespace ä¸‹ã€‚</li>
</ul>
<p><strong>å¸¸è§å‘</strong>ï¼š</p>
<ul>
<li>å¿˜è®°åœ¨æŸ¥è¯¢æ—¶æŒ‡å®š namespaceï¼Œå¯¼è‡´å¬å›ç»“æœé‡Œæ··å…¥å…¶ä»–ä¸šåŠ¡çš„æ•°æ®ã€‚</li>
<li>namespace åç§°ä¸è¦éšæ„æ›´æ”¹ï¼›å¦‚æœæ”¹åï¼Œæ—§æ•°æ®ä¸ä¼šè‡ªåŠ¨è¿ç§»ã€‚</li>
</ul>
<h3 data-id="heading-21">4. topKï¼ˆè¿”å›æ•°é‡ï¼‰ä¸è¿‡æ»¤ï¼ˆfilterï¼‰</h3>
<p><strong>topK</strong>ï¼šæ£€ç´¢æ—¶è¿”å›çš„ç›¸ä¼¼å‘é‡æ•°é‡ï¼Œé€šå¸¸é…åˆ <code>score_threshold</code> æˆ–åå¤„ç†è¿‡æ»¤ä½¿ç”¨ã€‚</p>
<p><strong>å»ºè®®</strong>ï¼š</p>
<ul>
<li>åˆå§‹å»ºè®® <code>topK=5~10</code>ï¼Œç”¨äºå¿«é€ŸéªŒè¯æ£€ç´¢è´¨é‡ã€‚</li>
<li>ç”Ÿäº§æŸ¥è¯¢å¯ä»¥å…ˆç”¨è¾ƒå¤§çš„ <code>topK</code>ï¼ˆå¦‚ 50ï¼‰ï¼Œå†åœ¨æœåŠ¡ä¾§åŸºäº <code>metadata</code> åšäºŒæ¬¡è¿‡æ»¤/é‡æ’åºã€‚</li>
</ul>
<p><strong>Filteringï¼ˆåŸºäº metadata çš„è¿‡æ»¤ï¼‰</strong>ï¼š</p>
<ul>
<li>Pinecone æ”¯æŒåœ¨æŸ¥è¯¢æ—¶ä¼ å…¥ <code>filter</code> æ¡ä»¶ï¼ˆç­‰åŒäº SQL çš„ WHEREï¼‰ï¼Œå¯ä»¥æŒ‰ <code>source</code>, <code>lang</code>, <code>docType</code> ç­‰å­—æ®µç­›é€‰å¬å›ç»“æœã€‚</li>
<li>ä½¿ç”¨ filter å¯ä»¥åœ¨ä¿è¯ç›¸ä¼¼åº¦å¬å›çš„åŒæ—¶ï¼Œå‰”é™¤ä¸ç›¸å…³çš„ä¸šåŠ¡æ•°æ®ã€‚</li>
</ul>
<p>æˆ‘ä»¬åœ¨pineconeçš„ç´¢å¼•ç®¡ç†é¢æ¿å¯ä»¥å¯¹æˆ‘ä»¬ç´¢å¼•ä¸­å·²æœ‰æ•°æ®è¿›è¡Œæœç´¢æµ‹è¯•ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6d80dbfbaf7941ffad22874b9e33091e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5qmZ5bqP5ZGY5bCP56uZ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765601215&amp;x-signature=XQk1dyRHyTIHZ8dSAnQkfTgzVKE%3D" alt="image-20251206104619560" loading="lazy"/></p>
<h3 data-id="heading-22">5. metricï¼ˆç›¸ä¼¼åº¦/è·ç¦»åº¦é‡ï¼‰</h3>
<p><strong>å¸¸è§é€‰é¡¹</strong>ï¼š<code>cosine</code>ï¼ˆä½™å¼¦ç›¸ä¼¼åº¦ï¼‰ã€<code>dotproduct</code>ã€<code>euclidean</code>ï¼ˆæ¬§æ°è·ç¦»ï¼‰ã€‚</p>
<p><strong>å»ºè®®</strong>ï¼š</p>
<ul>
<li>æ–‡æœ¬è¯­ä¹‰æ£€ç´¢å¸¸ç”¨ <code>cosine</code> æˆ– <code>dotproduct</code>ã€‚</li>
<li>ä¸è¦ç›²ç›®åˆ‡æ¢ï¼Œåˆ‡æ¢åéœ€è¦é‡æ–°è¯„ä¼°å¬å›æ•ˆæœå¹¶å¯èƒ½éœ€è¦é‡å»ºç´¢å¼•ã€‚</li>
</ul>
<h3 data-id="heading-23">6. replicationã€shardingï¼ˆå‰¯æœ¬ä¸åˆ†ç‰‡ï¼‰</h3>
<p><strong>ä½œç”¨</strong>ï¼šæå‡å¯ç”¨æ€§ä¸ååã€‚å¯¹äº serverless æ¨¡å¼ï¼ŒPinecone éšå¼ç®¡ç†ï¼›å¯¹äº provisioned æ¨¡å¼ï¼Œä½ å¯ä»¥é…ç½® pods/replicas æ¥è·å¾—æ›´é«˜çš„æ€§èƒ½ä¸å®¹é”™ã€‚</p>
<blockquote>
<h3 data-id="heading-24">ä¸€äº›å®æˆ˜å»ºè®®ä¸æ’æŸ¥æŠ€å·§</h3>
<ul>
<li><strong>ç°åœºéªŒè¯ embedding ç»´åº¦</strong>ï¼šåœ¨æŠŠå‘é‡å†™å…¥å‰ï¼Œåœ¨ä»£ç é‡Œæ‰“å° <code>vector.size()</code>ï¼Œå¹¶åœ¨æ§åˆ¶å°ç¡®è®¤ index dimension æ˜¯å¦ä¸€è‡´ã€‚</li>
<li><strong>ä»å°æ‰¹é‡å¼€å§‹</strong>ï¼šå¼€å‘å’Œæµ‹è¯•é˜¶æ®µç”¨ <code>batchSize=50</code> æˆ–æ›´å°ï¼Œç¡®è®¤é“¾è·¯åå†æ‰©å®¹åˆ° 100/200ã€‚</li>
<li><strong>ä½¿ç”¨ metadata åšç¬¬äºŒæ¬¡è¿‡æ»¤</strong>ï¼šå³ä¾¿ topK è¿”å›ç»“æœå¾ˆå¤šï¼Œä¹Ÿåœ¨æœåŠ¡ç«¯ç”¨ metadata åšé‡æ’åºï¼Œé¿å…æŠŠä¸ç›¸å…³æ–‡æ¡£å±•ç¤ºç»™ç”¨æˆ·ã€‚</li>
<li><strong>å‘½åè§„èŒƒ</strong>ï¼šindex åç§°ã€namespaceã€metadata å­—æ®µéƒ½ä½¿ç”¨ç»Ÿä¸€å‘½åè§„èŒƒï¼Œä¾¿äºè¿ç»´å’ŒæŸ¥è¯¢ã€‚</li>
</ul>
<h3 data-id="heading-25">å¸¸è§æŠ¥é”™ä¸å¦‚ä½•å®šä½</h3>
<ul>
<li><code>dimension mismatch</code> â†’ æŸ¥çœ‹ embedding è¾“å‡ºé•¿åº¦ä¸ index dimension æ˜¯å¦ä¸€è‡´ã€‚</li>
<li><code>429 Too Many Requests</code> â†’ é™ä½æ‰¹é‡å†™å…¥é‡ã€å¢åŠ é‡è¯•ä¸é€€é¿ã€‚</li>
<li><code>403 Forbidden</code> / <code>401 Unauthorized</code> â†’ API Key å¼‚å¸¸æˆ–æƒé™é—®é¢˜ã€‚</li>
<li>æŸ¥è¯¢ç»“æœå‘½ä¸­ç‡ä½ â†’ æ£€æŸ¥ embedding æ¨¡å‹æ˜¯å¦é€‚é…ä½ çš„æ–‡æœ¬é•¿åº¦å’Œè¯­è¨€ï¼Œæ˜¯å¦éœ€è¦åšæ–‡æœ¬é¢„å¤„ç†ï¼ˆå» stopwordsã€æŠ½å–é‡ç‚¹å¥ï¼‰ã€‚</li>
</ul>
</blockquote>
<p>æ€»ç»“ï¼šç†è§£å¹¶æ­£ç¡®é…ç½® indexã€dimensionã€namespaceã€metric ä¸ topKï¼Œæ˜¯æ­å»ºç¨³å®šå‘é‡æ£€ç´¢ç³»ç»Ÿçš„åŸºç¡€ã€‚å¾ˆå¤šç¥ç§˜é—®é¢˜ï¼Œå…¶å®éƒ½æ¥è‡ªè¿™å‡ ä¸ªå‚æ•°ä¹‹ä¸€é…ç½®é”™è¯¯æˆ–ä¸åŒ¹é…</p>
<hr/>
<h2 data-id="heading-26">å…­ã€Java æ¥å…¥æ–¹å¼ï¼ˆHTTP å®ç°ï¼‰</h2>
<p>ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹å¦‚ä¸‹ï¼Œè¿™é‡Œæˆ‘ä»¬åªæ˜¯ç”¨åˆ°jacksonå’Œhttpclientï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Slf4j</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PineconeRestService</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> RestTemplate restTemplate;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> ObjectMapper objectMapper;
    <span class="hljs-meta">@Value("${pinecone.api.key:}")</span>
    <span class="hljs-keyword">private</span> String apiKey;
    <span class="hljs-meta">@Value("${pinecone.index.host:}")</span>
    <span class="hljs-keyword">private</span> String indexHost;
    <span class="hljs-meta">@Value("${pinecone.namespace:}")</span>
    <span class="hljs-keyword">private</span> String namespace;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">PineconeRestService</span><span class="hljs-params">()</span> {
        <span class="hljs-built_in">this</span>.restTemplate = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RestTemplate</span>();
        restTemplate.getMessageConverters().removeIf(c -&gt; c <span class="hljs-keyword">instanceof</span> StringHttpMessageConverter);
        restTemplate.getMessageConverters().add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">StringHttpMessageConverter</span>(StandardCharsets.UTF_8));
        <span class="hljs-built_in">this</span>.objectMapper = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ObjectMapper</span>();
    }

    <span class="hljs-comment">/**
     * Upsertæ–‡æœ¬æ•°æ®åˆ°Pinecone (è®©Pineconeè‡ªåŠ¨å¤„ç†æ–‡æœ¬åˆ°å‘é‡çš„è½¬æ¢)
     *
     * <span class="hljs-doctag">@param</span> id       è®°å½•ID
     * <span class="hljs-doctag">@param</span> text     æ–‡æœ¬å†…å®¹
     * <span class="hljs-doctag">@param</span> metadata å…ƒæ•°æ®
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">upsertText</span><span class="hljs-params">(String id, String text, Map&lt;String, String&gt; metadata)</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// ä½¿ç”¨æ­£ç¡®çš„URLæ ¼å¼</span>
            <span class="hljs-type">String</span> <span class="hljs-variable">url</span> <span class="hljs-operator">=</span> String.format(<span class="hljs-string">"https://%s/records/namespaces/%s/upsert"</span>, indexHost, namespace);

            <span class="hljs-comment">// æ„é€ è®°å½•å¯¹è±¡ï¼Œç¬¦åˆæŒ‡å®šçš„ç»“æ„</span>
            Map&lt;String, Object&gt; record = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
            record.put(<span class="hljs-string">"_id"</span>, id);
            record.put(<span class="hljs-string">"chunk_text"</span>, text);

            <span class="hljs-comment">// æ·»åŠ å…ƒæ•°æ®å­—æ®µåˆ°è®°å½•ä¸­</span>
            <span class="hljs-keyword">if</span> (metadata != <span class="hljs-literal">null</span> &amp;&amp; !metadata.isEmpty()) {
                <span class="hljs-keyword">for</span> (Map.Entry&lt;String, String&gt; entry : metadata.entrySet()) {
                    record.put(entry.getKey(), entry.getValue());
                }
            }

            <span class="hljs-comment">// å‘é€è¯·æ±‚</span>
            <span class="hljs-type">HttpHeaders</span> <span class="hljs-variable">headers</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HttpHeaders</span>();
            headers.setContentType(MediaType.valueOf(<span class="hljs-string">"application/x-ndjson"</span>));
            headers.set(<span class="hljs-string">"Api-Key"</span>, apiKey);
            <span class="hljs-comment">// æ·»åŠ APIç‰ˆæœ¬å¤´</span>
            headers.set(<span class="hljs-string">"X-Pinecone-Api-Version"</span>, <span class="hljs-string">"2025-10"</span>);

            HttpEntity&lt;String&gt; requestEntity = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HttpEntity</span>&lt;&gt;(JsonUtils.objectToJson(record), headers);

            ResponseEntity&lt;String&gt; response = restTemplate.exchange(url, HttpMethod.POST, requestEntity, String.class);

            <span class="hljs-keyword">if</span> (response.getStatusCode().is2xxSuccessful()) {
                log.info(<span class="hljs-string">"Successfully upserted text with id: {}"</span>, id);
            } <span class="hljs-keyword">else</span> {
                log.error(<span class="hljs-string">"Failed to upsert text with id: {}, status: {}"</span>, id, response.getStatusCode());
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"Failed to upsert text to Pinecone, status: "</span> + response.getStatusCode());
            }
        } <span class="hljs-keyword">catch</span> (Exception e) {
            log.error(<span class="hljs-string">"Failed to upsert text with id: {}"</span>, id, e);
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"Failed to upsert text to Pinecone"</span>, e);
        }
    }

    <span class="hljs-comment">/**
     * ä½¿ç”¨æ–‡æœ¬è¿›è¡ŒæŸ¥è¯¢ (è®©Pineconeè‡ªåŠ¨å¤„ç†æ–‡æœ¬åˆ°å‘é‡çš„è½¬æ¢)
     *
     * <span class="hljs-doctag">@param</span> queryText æŸ¥è¯¢æ–‡æœ¬
     * <span class="hljs-doctag">@param</span> topK      è¿”å›ç»“æœæ•°é‡
     * <span class="hljs-doctag">@return</span> ç›¸ä¼¼è®°å½•çš„å…ƒæ•°æ®åˆ—è¡¨
     */</span>
    <span class="hljs-keyword">public</span> List&lt;Map&lt;String, Object&gt;&gt; <span class="hljs-title function_">queryByText</span><span class="hljs-params">(String queryText, <span class="hljs-type">int</span> topK)</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// ä½¿ç”¨æ­£ç¡®çš„æœç´¢URL</span>
            <span class="hljs-type">String</span> <span class="hljs-variable">url</span> <span class="hljs-operator">=</span> String.format(<span class="hljs-string">"https://%s/records/namespaces/%s/search"</span>, indexHost, namespace);

            <span class="hljs-comment">// æ„é€ è¯·æ±‚ä½“</span>
            Map&lt;String, Object&gt; query = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
            query.put(<span class="hljs-string">"inputs"</span>, Collections.singletonMap(<span class="hljs-string">"text"</span>, queryText));
            query.put(<span class="hljs-string">"top_k"</span>, topK);
            Map&lt;String, Object&gt; requestBody = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
            requestBody.put(<span class="hljs-string">"query"</span>, query);
            List&lt;String&gt; fields = Lists.newArrayList(<span class="hljs-string">"type"</span>, <span class="hljs-string">"path"</span>);
            fields.addAll(Lists.newArrayList(<span class="hljs-string">"summary"</span>, <span class="hljs-string">"publishTime"</span>, <span class="hljs-string">"title"</span>));
            fields.addAll(Lists.newArrayList(<span class="hljs-string">"description"</span>, <span class="hljs-string">"name"</span>, <span class="hljs-string">"takeTime"</span>));
            fields.addAll(Lists.newArrayList(<span class="hljs-string">"label"</span>, <span class="hljs-string">"name"</span>, <span class="hljs-string">"mediaType"</span>));
            requestBody.put(<span class="hljs-string">"fields"</span>, fields);

            <span class="hljs-comment">// å‘é€è¯·æ±‚</span>
            <span class="hljs-type">HttpHeaders</span> <span class="hljs-variable">headers</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HttpHeaders</span>();
            headers.setContentType(MediaType.APPLICATION_JSON);
            headers.setAccept(List.of(MediaType.APPLICATION_JSON));
            headers.set(<span class="hljs-string">"Api-Key"</span>, apiKey);
            <span class="hljs-comment">// æ·»åŠ APIç‰ˆæœ¬å¤´</span>
            headers.set(<span class="hljs-string">"X-Pinecone-Api-Version"</span>, <span class="hljs-string">"2025-10"</span>);
            HttpEntity&lt;Map&lt;String, Object&gt;&gt; requestEntity =
                    <span class="hljs-keyword">new</span> <span class="hljs-title class_">HttpEntity</span>&lt;&gt;(requestBody, headers);
            log.info(<span class="hljs-string">"Sending query to Pinecone: {}"</span>, objectMapper.writeValueAsString(requestBody));
            ResponseEntity&lt;PineconeQueryResponse&gt; response = restTemplate.exchange(url, HttpMethod.POST, requestEntity, PineconeQueryResponse.class);

            <span class="hljs-keyword">if</span> (response.getStatusCode().is2xxSuccessful()) {
                <span class="hljs-comment">// è§£æå“åº”</span>
                <span class="hljs-type">PineconeQueryResponse</span> <span class="hljs-variable">responseBody</span> <span class="hljs-operator">=</span> response.getBody();
                <span class="hljs-keyword">assert</span> responseBody != <span class="hljs-literal">null</span>;
                List&lt;Map&lt;String, Object&gt;&gt; results = responseBody.getResult().getHits().stream().map(PineconeQueryResponse.Match::getFields).collect(Collectors.toList());
                log.info(<span class="hljs-string">"Successfully searched {} records from Pinecone"</span>, results.size());
                <span class="hljs-keyword">return</span> results;
            } <span class="hljs-keyword">else</span> {
                log.error(<span class="hljs-string">"Failed to search records from Pinecone, status: {}"</span>, response.getStatusCode());
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"Failed to search records from Pinecone, status: "</span> + response.getStatusCode());
            }
        } <span class="hljs-keyword">catch</span> (Exception e) {
            log.error(<span class="hljs-string">"Failed to search records from Pinecone"</span>, e);
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"Failed to search records from Pinecone"</span>, e);
        }
    }
}
</code></pre>
<p>å½“ç„¶é™¤äº†è¿™ä¸ªä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜éœ€è¦å®ç°æˆ‘ä»¬çš„langchainè°ƒç”¨é“¾ã€‚</p>
<hr/>
<h2 data-id="heading-27"><strong>1. çŸ¥è¯†åº“é—®ç­”ï¼ˆRAGï¼‰å®ç°æ–¹å¼</strong></h2>
<p>å½“ AI åˆ¤æ–­éœ€è¦æ£€ç´¢çŸ¥è¯†åº“æ—¶ï¼ˆå¦‚è¿”å› <code>[VECTOR_SEARCH:xxx]</code>ï¼‰ï¼ŒJava è¿›å…¥ RAG æµç¨‹ã€‚</p>
<h3 data-id="heading-28"><strong>ä¸»è¦æµç¨‹</strong></h3>
<ol>
<li>AiResponseParser ä» LLM è¿”å›çš„æ–‡æœ¬ä¸­è§£æå‡ºæœç´¢æŒ‡ä»¤</li>
<li>è§¦å‘ Pinecone æ£€ç´¢</li>
<li>è¿”å›å‘é‡å¬å›çš„å†…å®¹ç»™ LLMï¼Œè®©å…¶ç”Ÿæˆæœ€ç»ˆæ€»ç»“</li>
</ol>
<h3 data-id="heading-29"><strong>å…³é”®ç»„ä»¶</strong></h3>

























<table><thead><tr><th>ç»„ä»¶</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td><strong>AiResponseParser</strong></td><td>æ£€æµ‹æ˜¯å¦åŒ…å« <code>[VECTOR_SEARCH:keyword]</code> æŒ‡ä»¤</td></tr><tr><td><strong>AiSearchService</strong></td><td>è´Ÿè´£è°ƒç”¨ PineconeRestService æ‰§è¡Œè¯­ä¹‰æ£€ç´¢</td></tr><tr><td><strong>PineconeRestService</strong></td><td>Java ç›´æ¥è°ƒç”¨ Pinecone REST API</td></tr><tr><td><strong>AdvancedAiSearchChain</strong></td><td>å°è£…å…³é”®è¯æå– â†’ æ£€ç´¢ â†’ å†æ€»ç»“æ•´å¥—æµç¨‹</td></tr></tbody></table>
<h3 data-id="heading-30"><strong>æ”¯æŒçš„æ£€ç´¢ç±»å‹</strong></h3>
<ul>
<li><code>[RECENT_POSTS]</code> æœ€è¿‘æ–‡ç« </li>
<li><code>[POPULAR_POSTS]</code> çƒ­é—¨æ–‡ç« </li>
<li><code>[LIKED_POSTS]</code> ç‚¹èµæœ€å¤šæ–‡ç« </li>
<li><code>[VECTOR_SEARCH:keyword]</code> è¯­ä¹‰æœç´¢ï¼ˆæ ¸å¿ƒ RAG åŠŸèƒ½ï¼‰</li>
<li>æ”¯æŒåˆ†é¡µï¼š<code>[TYPE,PAGE_SIZE:x,PAGE_NUM:y]</code></li>
</ul>
<h3 data-id="heading-31"><strong>çŸ¥è¯†åº“å†…å®¹ç±»å‹</strong></h3>
<ul>
<li>æ–‡ç« ï¼šæ ‡é¢˜ã€ç®€ä»‹ã€æ—¶é—´</li>
<li>é™„ä»¶ï¼šåç§°ã€åª’ä½“ç±»å‹</li>
<li>å›¾ç‰‡ï¼šåç§°ã€æè¿°ã€æ‹æ‘„æ—¶é—´</li>
</ul>
<p><strong>æ‰€æœ‰å†…å®¹éƒ½è‡ªåŠ¨åŒæ­¥è¿› Pinecone</strong>ï¼ˆæ–‡ç« /é™„ä»¶/ç…§ç‰‡ä¸‰ç§äº‹ä»¶ç›‘å¬å™¨ + å®šæ—¶ä»»åŠ¡ï¼‰ã€‚</p>
<hr/>
<h2 data-id="heading-32"><strong>2. Java ç«¯å®Œæ•´è°ƒç”¨é“¾æ€»ç»“</strong></h2>
<p>ä¸‹é¢æ˜¯é›†æˆåçš„ç»Ÿä¸€è°ƒç”¨é“¾ï¼ˆå·²å»æ‰ç»†èŠ‚ï¼Œåªä¿ç•™å…³é”®èŠ‚ç‚¹ï¼‰ï¼š</p>
<ol>
<li>ç”¨æˆ·è¯·æ±‚è¿›å…¥ Controller</li>
<li>AdvancedAiSearchChain æ„å»ºç³»ç»Ÿæç¤ºè¯</li>
<li>OpenAiAdapterService â†’ æ‹¼æ¥å†å² â†’ è°ƒ OpenAI Chat</li>
<li>AiResponseParser åˆ¤æ–­æ˜¯å¦éœ€è¦æ£€ç´¢</li>
<li>å¦‚éœ€è¦ â†’ PineconeRestService æ‰§è¡Œå‘é‡æœç´¢</li>
<li>å¾—åˆ°æœç´¢ç»“æœåå†æ¬¡è°ƒç”¨ OpenAI ç”Ÿæˆæ€»ç»“</li>
<li>Controller ä»¥ SSE æµå½¢å¼è¿”å›æœ€ç»ˆç­”æ¡ˆ</li>
</ol>
<p>å®Œæ•´çš„è°ƒç”¨æµç¨‹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant U as User
    participant C as Controller
    participant A as AdvancedAiSearchChain
    participant O as OpenAiAdapterService
    participant H as HistoryManager
    participant P as AiResponseParser

    U-&gt;&gt;C: POST /chat-stream {question, sessionId}
    C-&gt;&gt;A: executeWithAutoSearch()&lt;br&gt;-è°ƒç”¨RAG
    A-&gt;&gt;A: generateEnhancedSystemPrompt()&lt;br&gt;-è·å–æç¤ºè¯
    A-&gt;&gt;O: aiChat()-è°ƒç”¨OpenAPIè¿ç»­å¯¹è¯
    O-&gt;&gt;H: getHistory(sessionId)&lt;br&gt;-è·å–å†å²å¯¹è¯
    H--&gt;&gt;O: è¿”å›å†å²å¯¹è¯
    O-&gt;&gt;OpenAI: APIè°ƒç”¨
    OpenAI--&gt;&gt;O: APIè¿”å›
    O-&gt;&gt;H: ä¿å­˜åˆ°å†å²å¯¹è¯
    O--&gt;&gt;A: AIå“åº”
    A-&gt;&gt;P: æ£€æŸ¥AIå“åº”ç»“æœ
    alt åŒ…å«æœç´¢æŒ‡ä»¤
        P--&gt;&gt;A: å‘ç°æŒ‡ä»¤
        A-&gt;&gt;A: performSearch()-æ‰§è¡Œæœç´¢
        A-&gt;&gt;Pinecone: AiSearchService
        Pinecone--&gt;&gt;A: æœç´¢ç»“æœ
        A-&gt;&gt;O: è°ƒç”¨AIå¯¹æœç´¢ç»“æœæ€»ç»“
        O-&gt;&gt;OpenAI: æ€»ç»“è¯·æ±‚
        OpenAI--&gt;&gt;O: æ€»ç»“å“åº”
        O--&gt;&gt;A: å“åº”æ ¼å¼åŒ–
    end
    A--&gt;&gt;C: ç›¸åº”å®Œæˆ
    C--&gt;&gt;U: SSE response
</code></pre>
<hr/>
<h3 data-id="heading-33"><strong>3. å¦‚ä½•è§¦å‘çŸ¥è¯†åº“æœç´¢ï¼ˆç¤ºä¾‹ï¼‰</strong></h3>
<p>ç”¨æˆ·é—®ï¼š</p>
<blockquote>
<p>â€œä½ èƒ½ä»‹ç»ä¸€ä¸‹æœºå™¨å­¦ä¹ å—ï¼Ÿâ€</p>
</blockquote>
<p>LLM å¯èƒ½å›åº”ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp">[<span class="hljs-meta">VECTOR_SEARCH:æœºå™¨å­¦ä¹ </span>]
</code></pre>
<p>Java æ”¶åˆ°åè§£ææŒ‡ä»¤ â†’ Pinecone æ£€ç´¢ â†’ å°†å¬å›å†…å®¹å†æ¬¡å‘ç»™ LLM â†’ ç”Ÿæˆæœ€ç»ˆå›ç­”ã€‚</p>
<hr/>
<h2 data-id="heading-34">ä¸ƒã€æ•°æ®å»ºæ¨¡ï¼šå¦‚ä½•è®¾è®¡ metadata</h2>
<p>åœ¨æ„å»ºçŸ¥è¯†åº“ï¼ˆç‰¹åˆ«æ˜¯é¢å‘åšå®¢ç³»ç»Ÿçš„ RAG ç®¡é“ï¼‰æ—¶ï¼Œæ•°æ®å»ºæ¨¡æ˜¯æœ€å®¹æ˜“è¢«å¿½è§†å´æœ€å…³é”®çš„éƒ¨åˆ†ã€‚è‰¯å¥½çš„æ•°æ®æ¨¡å‹ä¸ä»…å½±å“å‘é‡å¬å›çš„å‡†ç¡®æ€§ï¼Œä¹Ÿç›´æ¥å†³å®šäº†åç»­æç¤ºè¯å·¥ç¨‹ï¼ˆPrompt Engineeringï¼‰çš„çµæ´»åº¦å’Œå¯æ§æ€§ã€‚</p>
<p>å¯¹äºåšå®¢æ¥è¯´ï¼Œä¸»è¦çš„çŸ¥è¯†æ¥æºä¸€èˆ¬åŒ…æ‹¬ä¸‰ç±»ï¼š<strong>æ–‡ç« ã€é™„ä»¶ã€å›¾ç‰‡</strong>ã€‚ä¸åŒèµ„æºç±»å‹åœ¨æ‹†åˆ†ã€è¡¨å¾ï¼ˆembeddingï¼‰å’Œç´¢å¼•æ—¶éƒ½ä¼šé‡‡ç”¨ä¸åŒçš„ç­–ç•¥ï¼Œå› æ­¤éœ€è¦è®¾è®¡ä¸€å¥—ç»Ÿä¸€ä¸”å¯æ‰©å±•çš„ metadata ç»“æ„æ¥æè¿°æ¯ä¸ª chunk çš„æ¥æºä¸å±æ€§ã€‚</p>
<h3 data-id="heading-35">1. æ–‡æœ¬å—chunk-textè®¾è®¡</h3>
<hr/>
<h4 data-id="heading-36"><strong>1. æ–‡æœ¬å†…å®¹ï¼ˆæ–‡ç« ï¼‰çš„ chunk-text è®¾è®¡</strong></h4>
<p>åšå®¢æ–‡ç« é€šå¸¸æ˜¯ç»“æ„åŒ–çš„é•¿æ–‡æœ¬ï¼Œå› æ­¤éœ€è¦é€šè¿‡åˆ†æ®µæ‹†åˆ†ç­–ç•¥ï¼Œå°†æ–‡ç« æ‹†æˆå¤šä¸ªå¯æ£€ç´¢çš„å†…å®¹ç‰‡æ®µã€‚å¸¸ç”¨æ‹†åˆ†æ–¹å¼åŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>æŒ‰æ®µè½æ‹†åˆ†</strong>ï¼šæ ¹æ® Markdown æˆ– HTML çš„æ®µè½ç»“æ„è¿›è¡Œåˆ‡ç‰‡ï¼Œä¿æŒè¯­ä¹‰å®Œæ•´æ€§ã€‚</li>
<li><strong>æŒ‰æ ‡é¢˜å±‚çº§æ‹†åˆ†</strong>ï¼šä¾‹å¦‚æŒ‰ç…§ h1/h2/h3 ä½œä¸ºè¾¹ç•Œï¼Œå°†æ–‡ç« è‡ªç„¶åˆ†å—ã€‚</li>
<li><strong>æŒ‰å›ºå®šé•¿åº¦æ‹†åˆ†</strong>ï¼šä¾‹å¦‚æ¯ 300ï½500 å­—ä¸€æ®µï¼Œå¹¶åŠ å…¥é‡å ï¼ˆoverlapï¼‰ä»¥é¿å…è¯­ä¹‰æ–­è£‚ã€‚</li>
</ul>
<p>è¿™æ ·åšçš„ä¼˜ç‚¹æ˜¯æé«˜å‘é‡æ£€ç´¢çš„å¬å›è´¨é‡ï¼Œè®© RAG èƒ½åœ¨æ›´ç»†ç²’åº¦çš„ç‰‡æ®µä¸­æ‰¾åˆ°é—®é¢˜å¯¹åº”çš„çŸ¥è¯†ç‚¹ã€‚è¿™é‡Œæˆ‘ä»¬å¯ä»¥ç›´æ¥æŒ‰æ®µè½æ‹†åˆ†ï¼Œè¿™æ ·æˆ‘ä»¬èƒ½å¤Ÿæ›´å¥½æ§åˆ¶æ–‡æœ¬å¤§å°ï¼Œä½†æ˜¯è¦æ³¨æ„è¾“å…¥çš„tokené™åˆ¶ï¼Œå¦‚æœæˆ‘ä»¬é€‰ç”¨çš„embeddingæ˜¯å†…åµŒçš„æ¨¡å‹ï¼Œé‚£ä¹ˆæ®µè½å¤§å°å°±ä¸èƒ½è¶…è¿‡1024ï¼Œå¦‚æœè¶…è¿‡æˆ‘ä»¬å°±è¦åšæˆªæ–­æˆ–è€…æå‰é¢„å¤„ç†å†å†™å…¥</p>
<hr/>
<h4 data-id="heading-37"><strong>2. é™„ä»¶ï¼ˆPDF/æ–‡æ¡£ç­‰ï¼‰çš„ chunk-text è®¾è®¡</strong></h4>
<p>é™„ä»¶æ˜¯åšå®¢çŸ¥è¯†åº“å¸¸è§ä½†å®¹æ˜“å¿½è§†çš„éƒ¨åˆ†ï¼Œå®ƒä»¬é€šå¸¸åŒ…å«é¢å¤–çš„æŠ€æœ¯å›¾è¡¨ã€æ–‡æ¡£æˆ–å¤–é“¾èµ„æ–™ã€‚é™„ä»¶æ–‡æœ¬çš„ chunk-text ä¸€èˆ¬æ¥è‡ªï¼š</p>
<ul>
<li>å¯¹æ–‡ä»¶å†…å®¹çš„ <strong>æ‘˜è¦æå–</strong>ï¼ˆå¦‚ PDFâ†’æ–‡æœ¬â†’æ‘˜è¦ï¼‰</li>
<li>å¯¹éæ–‡æœ¬æ–‡ä»¶è¿›è¡Œ <strong>OCR æå–</strong>ï¼ˆå¦‚æˆªå›¾ç±»æ–‡æ¡£ï¼‰</li>
<li>æˆ–è€…ç›´æ¥ä¿ç•™éƒ¨åˆ†å…³é”®é¡µä½œä¸º embedding å†…å®¹</li>
</ul>
<p>ç”±äºé™„ä»¶é€šå¸¸è¾ƒé•¿ï¼Œä½†ç”¨æˆ·æé—®æ—¶å¾ˆå°‘ç›´æ¥å¼•ç”¨é™„ä»¶åŸæ–‡ï¼Œå› æ­¤ä½¿ç”¨æ‘˜è¦ä½œä¸º chunk-text èƒ½å¤§å¹…å‡å°‘ç´¢å¼•å™ªéŸ³ã€‚</p>
<hr/>
<h4 data-id="heading-38"><strong>3. å›¾ç‰‡çš„ chunk-text è®¾è®¡ï¼šAI ç”Ÿæˆ alt æè¿°</strong></h4>
<p>ä¸ºäº†è®© RAG èƒ½çœŸæ­£ç†è§£å›¾ç‰‡ï¼Œéœ€è¦å°†å›¾ç‰‡è½¬åŒ–ä¸ºå¯ç”¨äºå‘é‡æ¨¡å‹çš„æ–‡å­—æè¿°ã€‚é€šå¸¸çš„åšæ³•æ˜¯ï¼š</p>
<ul>
<li>ä½¿ç”¨è§†è§‰æ¨¡å‹ï¼ˆå¦‚ GPT-4oã€Gemini Vision ç­‰ï¼‰ç”Ÿæˆ <strong>alt æè¿°</strong></li>
<li>å¯è¡¥å……æ£€æµ‹ï¼šå›¾ç‰‡ä¸»é¢˜ã€åœºæ™¯ã€ç‰©ä½“ã€æ ‡ç­¾</li>
<li>å¯¹æŠ€æœ¯ç±»å›¾ç‰‡ï¼Œè¿˜å¯ä»¥è‡ªåŠ¨è¯†åˆ«ä»£ç æ®µã€æ¶æ„å›¾æ¨¡å—ç­‰</li>
</ul>
<p>è¿™æ ·ï¼Œå›¾ç‰‡ä¹Ÿèƒ½åƒæ–‡æœ¬ä¸€æ ·å‚ä¸æ£€ç´¢ï¼Œå¹¶åœ¨å›ç­”ä¸­å¼•ç”¨æ¥æºã€‚</p>
<hr/>
<h3 data-id="heading-39">2. <strong>Metadata çš„å­—æ®µè®¾è®¡</strong></h3>
<p>ä¸ºäº†è®©æ‰€æœ‰ chunk èƒ½è¢«ç»Ÿä¸€ç´¢å¼•å¹¶åœ¨æç¤ºè¯ä¸­å¼•ç”¨ï¼Œéœ€è¦ä¸ºæ¯ä¸€æ¡å‘é‡æ•°æ®è®¾è®¡ metadataã€‚å¸¸è§å­—æ®µåŒ…æ‹¬ï¼š</p>
<h4 data-id="heading-40">1. <strong>åŸºç¡€æ¥æºä¿¡æ¯</strong></h4>
<ul>
<li><strong>sourceUrl</strong>ï¼šå†…å®¹çš„åŸå§‹æ¥æºï¼Œä¾‹å¦‚åšå®¢æ–‡ç« é“¾æ¥ï¼Œç”¨äºå›ç­”æ—¶å¼•ç”¨ã€‚</li>
<li><strong>articleId</strong>ï¼šæ–‡ç« å”¯ä¸€ IDï¼Œä¾¿äºå¯¹æ–‡ç« åšæ‰¹é‡æ›´æ–°/é‡å»ºç´¢å¼•ã€‚</li>
<li><strong>fileType</strong>ï¼šç±»å‹æ ‡è¯†ï¼Œå¦‚ <code>"article" | "attachment" | "image"</code>ã€‚</li>
<li><strong>chunkIndex</strong>ï¼šå½“å‰ chunk åœ¨æ•´ç¯‡æ–‡ç« ä¸­çš„åˆ†æ®µåºå·ï¼ˆä¾¿äºä¸Šä¸‹æ–‡æ‹¼æ¥ï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-41">2. <strong>èµ„æºç›¸å…³ä¿¡æ¯</strong></h4>
<ul>
<li><strong>title</strong>ï¼šå¯¹åº”çš„æ–‡ç« æ ‡é¢˜ã€‚</li>
<li><strong>fileName</strong>ï¼šå¦‚æœæ˜¯é™„ä»¶åˆ™è®°å½•æ–‡ä»¶åã€‚</li>
<li><strong>imageCategory</strong>ï¼šå¯¹å›¾ç‰‡è¿›è¡Œè‡ªåŠ¨åˆ†ç±»ï¼Œå¦‚ <code>"diagram"</code>, <code>"photo"</code>, <code>"screenshot"</code>, <code>"code-snippet"</code>ã€‚</li>
</ul>
<h4 data-id="heading-42">3. <strong>å†…å®¹ç»´åº¦ä¿¡æ¯</strong></h4>
<ul>
<li><strong>createdTime / updatedTime</strong>ï¼šç”¨äºç‰ˆæœ¬æ§åˆ¶å’Œè‡ªåŠ¨é‡å»ºã€‚</li>
<li><strong>tags / categories</strong>ï¼šä¸åšå®¢æ ‡ç­¾ä½“ç³»ä¸€è‡´ï¼Œæå‡æ£€ç´¢ç›¸å…³æ€§ã€‚</li>
<li><strong>language</strong>ï¼šå¯¹å¤šè¯­è¨€åšå®¢ç‰¹åˆ«æœ‰ç”¨ã€‚</li>
</ul>
<h4 data-id="heading-43">4.metadata åœ¨ RAG ä¸­çš„ä½œç”¨</h4>
<p>è¿™äº› metadata å­—æ®µçš„æ„ä¹‰ä½“ç°åœ¨åç»­çš„æç¤ºè¯å·¥ç¨‹ä¸­ï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li>ç”¨ <code>sourceUrl</code> åœ¨å›ç­”æœ«å°¾æä¾›å‚è€ƒæ¥æº</li>
<li>ç”¨ <code>imageCategory</code> åˆ¤æ–­æ˜¯å¦éœ€è¦é™„å¸¦å›¾ç‰‡æè¿°</li>
<li>ç”¨ <code>fileType</code> æ§åˆ¶å›ç­”å¼•ç”¨çš„èŒƒå›´ï¼ˆåªå¼•ç”¨æ–‡ç« ï¼Œä¸å¼•ç”¨å›¾ç‰‡æˆ–é™„ä»¶ï¼‰</li>
<li>ç”¨ <code>chunkIndex</code> è®© LLM è‡ªåŠ¨æ‹¼æ¥ç›¸é‚»æ®µè½ï¼Œé™ä½æ–­è£‚æ„Ÿ</li>
</ul>
<p>æœ€ç»ˆæ•ˆæœæ˜¯è®© RAG ä¸åªæ˜¯â€œæœç´¢æœ€ç›¸ä¼¼çš„æ®µè½â€ï¼Œè€Œæ˜¯çœŸæ­£ä½œä¸ºä¸€ä¸ªâ€œç»“æ„åŒ–çš„çŸ¥è¯†åº“â€å‚ä¸å›ç­”ã€‚</p>
<hr/>
<h2 data-id="heading-44">å…«ã€è¸©å‘å®è®°ï¼ˆé‡ç‚¹ï¼‰</h2>
<h3 data-id="heading-45">1. JSON è§£æé”™è¯¯ï¼ˆJacksonï¼‰</h3>
<p>Pinecone å®˜æ–¹æ–‡æ¡£çš„ Curl ç¤ºä¾‹é‡Œï¼š</p>
<ul>
<li><strong>Upsert è¯·æ±‚éœ€è¦ String è½¬ä¹‰</strong>ï¼ˆå¦åˆ™ 400ï¼‰</li>
<li><strong>Query è¯·æ±‚è¿”å› JSON å¯¹è±¡ï¼Œä¸èƒ½ç”¨ String æ¥æ”¶</strong></li>
</ul>
<p>å¦åˆ™ä¼šæŠ¥ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-title class_">Cannot</span> deserialize value <span class="hljs-keyword">of</span> <span class="hljs-keyword">type</span> <span class="hljs-string">`java.lang.String`</span> <span class="hljs-keyword">from</span> <span class="hljs-title class_">Object</span> value
</code></pre>
<h3 data-id="heading-46">2. SpringBoot 2.7 çš„ UTF-8 ç¼–ç é—®é¢˜</h3>
<p>ä¸€å®šè¦ç¡®ä¿ï¼š</p>
<ul>
<li>HttpMessageConverter ç”¨ UTF-8</li>
<li>æ—¥å¿—è¾“å‡ºä¸è¦ä¹±ç </li>
</ul>
<h3 data-id="heading-47">3. æœ¬åœ°/ç”Ÿäº§ç½‘ç»œå·®å¼‚</h3>
<p>æœåŠ¡å™¨ä¸é€š Pinecone åŸŸåä¼šè¸©å¤§å‘ï¼š</p>
<ul>
<li>è¦å¼€é˜²ç«å¢™å‡ºç«™</li>
<li>æœ‰äº›æœåŠ¡å™¨éœ€è¦ç»‘å®š DNS</li>
</ul>
<h3 data-id="heading-48">4. httpclient ç‰ˆæœ¬å†²çª</h3>
<p>Spring Boot 2.x è‡ªå¸¦ HttpClient å¤ªè€ï¼ŒPinecone SDK å†…éƒ¨ç‰ˆæœ¬å¤ªæ–°ï¼Œå¯¼è‡´ï¼š</p>
<ul>
<li>NoSuchMethodError</li>
<li>Method not found</li>
<li>ClassCastException</li>
</ul>
<p>æœ€ç»ˆç»“è®ºï¼š<strong>ä¸è¦ç”¨ SDKï¼</strong></p>
<hr/>
<h2 data-id="heading-49">ä¹ã€æ€§èƒ½ä¼˜åŒ–ä¸æˆæœ¬æ§åˆ¶</h2>
<ul>
<li>å…è´¹é¢åº¦æœ‰é™ï¼Œembedding å¾ˆè´µï¼Œè¯·ä¿å®ˆè°ƒç”¨</li>
<li>ä¸è¦æŠŠå…¨æ–‡å†™å…¥å‘é‡åº“ï¼Œè¦éµå¾ªï¼š<strong>â€œæ‘˜è¦ä¸ºä¸»ï¼Œå…¨æ–‡ä¸ºè¾…â€</strong></li>
<li>æ§åˆ¶ chunk å¤§å°ï¼Œä¸€èˆ¬ 200-300 token æœ€å¥½ï¼Œ</li>
</ul>
<hr/>
<h2 data-id="heading-50">åã€æµ‹è¯•ä¸ç›‘æ§</h2>
<ul>
<li><strong>å…ˆå†™å…¥å‡ åæ¡æ•°æ®</strong>ï¼šå»ºè®®ä½¿ç”¨æœ¬åœ°æˆ–é¢„å‘å¸ƒç¯å¢ƒï¼Œé€šè¿‡è„šæœ¬æˆ–ç®€å•çš„å¾ªç¯å†™å…¥ï¼Œå°†æ–‡ç« ã€å›¾ç‰‡æè¿°ã€é™„ä»¶è¯´æ˜ç­‰å¤šç±»å‹æ•°æ®å„å‡†å¤‡ä¸€äº›ã€‚è¿™æ ·å¯ä»¥æå‰éªŒè¯ metadata ç»“æ„ã€å‘é‡ç»´åº¦ã€ç¼–ç ã€è¯·æ±‚ä½“æ ¼å¼æ˜¯å¦æ­£ç¡®ã€‚</li>
<li><strong>å¢é‡é“¾è·¯æµ‹è¯•å†™å…¥</strong>ï¼šå®é™…é¡¹ç›®ä¸­ï¼Œå†å²æ•°æ®ä¸€æ¬¡æ€§å†™å…¥åªæ˜¯ç¬¬ä¸€æ­¥ï¼Œæ›´å…³é”®çš„æ˜¯åç»­çš„â€œæ–°å¢æˆ–æ›´æ–°æ•°æ®â€æ˜¯å¦èƒ½è¢«æ­£å¸¸åŒæ­¥åˆ° Pineconeã€‚å› æ­¤å¯ä»¥é€šè¿‡æ¨¡æ‹ŸçœŸå®ä¸šåŠ¡é“¾è·¯è¿›è¡Œæµ‹è¯•ï¼Œä¾‹å¦‚ï¼š
<ul>
<li>æ–°å¢æ–‡ç«  â†’ è§¦å‘äº‹ä»¶ â†’ ç”Ÿæˆ embedding â†’ å†™å…¥ Pinecone</li>
<li>ä¿®æ”¹æ–‡ç«  â†’ å¯¹æ¯”å·®å¼‚ â†’ æ›´æ–° metadata ä¸å‘é‡</li>
<li>åˆ é™¤æ–‡ç«  â†’ æ¸…ç†å¯¹åº” namespace æˆ–åˆ é™¤å‘é‡
é€šè¿‡å®Œæ•´èµ°ä¸€æ¬¡ä¸šåŠ¡é“¾è·¯ï¼Œå¯ä»¥éªŒè¯å‘é‡ç”Ÿæˆã€å†™å…¥ã€æ›´æ–°ã€æŸ¥è¯¢çš„å®Œæ•´é—­ç¯ã€‚</li>
</ul>
</li>
<li><strong>æ„å»ºç®€å•æµ‹è¯•ï¼šæ ¹æ®å…³é”®è¯æœç´¢æ˜¯å¦èƒ½å‘½ä¸­</strong>ï¼šå‡†å¤‡å¤šä¸ªè¯­ä¹‰æ¥è¿‘ä½†å­—é¢ä¸åŒçš„å…³é”®è¯ï¼ˆä¾‹å¦‚ï¼š"éƒ¨ç½²"ã€"å‘å¸ƒ"ã€"ä¸Šçº¿"ï¼‰ã€‚å¦‚æœ Pinecone èƒ½å‘½ä¸­æ–‡ç« ï¼Œåˆ™è¯´æ˜ embedding + retrieval æ˜¯æœ‰æ•ˆçš„ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-51">åä¸€ã€éƒ¨ç½²ä¸è¿ç»´</h2>
<h3 data-id="heading-52">1. å†å²æ•°æ®è¿ç§»</h3>
<p>å»ºè®®æ‰¹é‡å†™å…¥ï¼Œä½†å¿…é¡»æ§åˆ¶ QPSï¼Œå¦åˆ™ Pinecone ä¼šè¿”å› 429ã€‚</p>
<h3 data-id="heading-53">2. å¢é‡åŒæ­¥</h3>
<ul>
<li>
<p>JPA â†’ å¯ä»¥é€šè¿‡ save/update äº‹ä»¶ç›‘å¬åŒæ­¥</p>
<p>ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> Photo <span class="hljs-title function_">create</span><span class="hljs-params">(Photo photo)</span> {
        <span class="hljs-type">Photo</span> <span class="hljs-variable">createdPhoto</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">super</span>.create(photo);
        
        <span class="hljs-comment">// Publish photo updated event</span>
        eventPublisher.publishEvent(<span class="hljs-keyword">new</span> <span class="hljs-title class_">PhotoUpdatedEvent</span>(<span class="hljs-built_in">this</span>, createdPhoto));
        
        <span class="hljs-keyword">return</span> createdPhoto;
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> Photo <span class="hljs-title function_">update</span><span class="hljs-params">(Photo photo)</span> {
        <span class="hljs-type">Photo</span> <span class="hljs-variable">updatedPhoto</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">super</span>.update(photo);
        
        <span class="hljs-comment">// Publish photo updated event</span>
        eventPublisher.publishEvent(<span class="hljs-keyword">new</span> <span class="hljs-title class_">PhotoUpdatedEvent</span>(<span class="hljs-built_in">this</span>, updatedPhoto));
        
        <span class="hljs-keyword">return</span> updatedPhoto;
    }
</code></pre>
</li>
<li>
<p>MyBatis â†’ AOP æ‹¦æˆªä¿®æ”¹æ“ä½œ</p>
</li>
</ul>
<hr/>
<h2 data-id="heading-54">åäºŒã€ç»“è®ºï¼šæœ€ä½³å®è·µæ±‡æ€»</h2>
<p>æœ€åæˆ‘ä»¬å®ç°çš„æ•ˆæœå¦‚ä¸‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/17171a1c91b84d7bbd4f214f292d77f8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5qmZ5bqP5ZGY5bCP56uZ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765601215&amp;x-signature=9ePpVJ7M55ICEqtnpkhIlWlSW1Y%3D" alt="image-20251206114529949" loading="lazy"/></p>
<p>æ€»ç»“ï¼š</p>
<ul>
<li>Spring Boot 2.x ä¸è¦ç”¨ SDKï¼Œå…¨éƒ¨ç”¨ HTTP</li>
<li>Pinecone embedding å¾ˆé¦™ä¸”ä¾¿å®œ</li>
<li>ä¸è¦å…¨æ–‡åŒæ­¥ï¼Œä¿è¯ chunk ç²¾ç®€</li>
<li>é‡åˆ° JSON é”™è¯¯æ—¶ä¼˜å…ˆæ’æŸ¥ï¼šåºåˆ—åŒ–æ ¼å¼ + UTF-8</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€Oracleå…¥é—¨åˆ°åˆ åº“è·‘è·¯-08ã€‘æ ¸å¿ƒæŠ€èƒ½ï¼šç”¨æˆ·å’Œæƒé™ç®¡ç†]]></title>    <link>https://juejin.cn/post/7580188321324564486</link>    <guid>https://juejin.cn/post/7580188321324564486</guid>    <pubDate>2025-12-06T04:50:39.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7580188321324564486" data-draft-id="7580282751627542569" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€Oracleå…¥é—¨åˆ°åˆ åº“è·‘è·¯-08ã€‘æ ¸å¿ƒæŠ€èƒ½ï¼šç”¨æˆ·å’Œæƒé™ç®¡ç†"/> <meta itemprop="keywords" content="æ•°æ®åº“,Oracle"/> <meta itemprop="datePublished" content="2025-12-06T04:50:39.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é›¶æ—¥å¤±çœ è€…"/> <meta itemprop="url" content="https://juejin.cn/user/3411111810444068"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€Oracleå…¥é—¨åˆ°åˆ åº“è·‘è·¯-08ã€‘æ ¸å¿ƒæŠ€èƒ½ï¼šç”¨æˆ·å’Œæƒé™ç®¡ç†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3411111810444068/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é›¶æ—¥å¤±çœ è€…
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-06T04:50:39.000Z" title="Sat Dec 06 2025 04:50:39 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ç”¨æˆ·ç®¡ç†</h2>
<p>Oracleæ•°æ®åº“ä¸­çš„ç”¨æˆ·æ˜¯è®¿é—®æ•°æ®åº“çš„è´¦æˆ·ï¼Œæ¯ä¸ªç”¨æˆ·éƒ½æœ‰è‡ªå·±çš„ç”¨æˆ·åå’Œå¯†ç ã€‚</p>
<h3 data-id="heading-1">åˆ›å»ºç”¨æˆ·</h3>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- åˆ›å»ºåŸºæœ¬ç”¨æˆ·</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">USER</span> john IDENTIFIED <span class="hljs-keyword">BY</span> password123;

<span class="hljs-comment">-- åˆ›å»ºå…·æœ‰æ›´å¤šå±æ€§çš„ç”¨æˆ·</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">USER</span> alice IDENTIFIED <span class="hljs-keyword">BY</span> securepass
  <span class="hljs-keyword">DEFAULT</span> TABLESPACE users
  TEMPORARY TABLESPACE temp
  QUOTA <span class="hljs-number">100</span>M <span class="hljs-keyword">ON</span> users
  ACCOUNT UNLOCK;

<span class="hljs-comment">-- åˆ›å»ºå¸¦æœ‰é…ç½®æ–‡ä»¶çš„ç”¨æˆ·</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">USER</span> bob IDENTIFIED <span class="hljs-keyword">BY</span> pass456
  PROFILE app_profile
  <span class="hljs-keyword">DEFAULT</span> TABLESPACE data_ts
  TEMPORARY TABLESPACE temp_ts
  QUOTA UNLIMITED <span class="hljs-keyword">ON</span> data_ts;
</code></pre>
<h3 data-id="heading-2">ä¿®æ”¹ç”¨æˆ·</h3>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- ä¿®æ”¹ç”¨æˆ·å¯†ç </span>
<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">USER</span> john IDENTIFIED <span class="hljs-keyword">BY</span> newpassword;

<span class="hljs-comment">-- ä¿®æ”¹é»˜è®¤è¡¨ç©ºé—´</span>
<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">USER</span> john <span class="hljs-keyword">DEFAULT</span> TABLESPACE users_data;

<span class="hljs-comment">-- ä¿®æ”¹ä¸´æ—¶è¡¨ç©ºé—´</span>
<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">USER</span> john TEMPORARY TABLESPACE temp_ts;

<span class="hljs-comment">-- è®¾ç½®è¡¨ç©ºé—´é…é¢</span>
<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">USER</span> john QUOTA <span class="hljs-number">50</span>M <span class="hljs-keyword">ON</span> users;
<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">USER</span> john QUOTA UNLIMITED <span class="hljs-keyword">ON</span> users_data;

<span class="hljs-comment">-- é”å®š/è§£é”ç”¨æˆ·è´¦æˆ·</span>
<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">USER</span> john ACCOUNT LOCK;
<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">USER</span> john ACCOUNT UNLOCK;

<span class="hljs-comment">-- è®¾ç½®é…ç½®æ–‡ä»¶</span>
<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">USER</span> john PROFILE secure_profile;

<span class="hljs-comment">-- è®¾ç½®å¯†ç è¿‡æœŸ</span>
<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">USER</span> john PASSWORD EXPIRE;
</code></pre>
<h3 data-id="heading-3">åˆ é™¤ç”¨æˆ·</h3>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- åˆ é™¤ç”¨æˆ·ï¼ˆä¸åˆ é™¤å¯¹è±¡ï¼‰</span>
<span class="hljs-keyword">DROP</span> <span class="hljs-keyword">USER</span> john;

<span class="hljs-comment">-- åˆ é™¤ç”¨æˆ·åŠå…¶æ‰€æœ‰å¯¹è±¡</span>
<span class="hljs-keyword">DROP</span> <span class="hljs-keyword">USER</span> alice CASCADE;
</code></pre>
<h2 data-id="heading-4">4.2 è§’è‰²ç®¡ç†</h2>
<p>è§’è‰²æ˜¯ä¸€ç»„æƒé™çš„é›†åˆï¼Œå¯ä»¥åˆ†é…ç»™ç”¨æˆ·æˆ–å…¶ä»–è§’è‰²ï¼Œç®€åŒ–æƒé™ç®¡ç†ã€‚</p>
<h3 data-id="heading-5">é¢„å®šä¹‰è§’è‰²</h3>
<p>Oracleæä¾›äº†ä¸€äº›é¢„å®šä¹‰çš„è§’è‰²ï¼š</p>
<ul>
<li><strong>CONNECT</strong>ï¼šå…è®¸ç”¨æˆ·è¿æ¥åˆ°æ•°æ®åº“</li>
<li><strong>RESOURCE</strong>ï¼šå…è®¸ç”¨æˆ·åˆ›å»ºè¡¨ã€åºåˆ—ã€è¿‡ç¨‹ç­‰å¯¹è±¡</li>
<li><strong>DBA</strong>ï¼šæ•°æ®åº“ç®¡ç†å‘˜è§’è‰²ï¼Œæ‹¥æœ‰å‡ ä¹æ‰€æœ‰æƒé™</li>
</ul>
<h3 data-id="heading-6">åˆ›å»ºè§’è‰²</h3>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- åˆ›å»ºåŸºæœ¬è§’è‰²</span>
<span class="hljs-keyword">CREATE</span> ROLE app_user;

<span class="hljs-comment">-- åˆ›å»ºå¸¦æœ‰å¯†ç ä¿æŠ¤çš„è§’è‰²</span>
<span class="hljs-keyword">CREATE</span> ROLE secure_role IDENTIFIED <span class="hljs-keyword">BY</span> role_password;

<span class="hljs-comment">-- åˆ›å»ºåº”ç”¨ç¨‹åºè§’è‰²</span>
<span class="hljs-keyword">CREATE</span> ROLE hr_manager;
<span class="hljs-keyword">CREATE</span> ROLE finance_user;
<span class="hljs-keyword">CREATE</span> ROLE it_support;
</code></pre>
<h3 data-id="heading-7">ç®¡ç†è§’è‰²</h3>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- ä¸ºè§’è‰²æˆäºˆæƒé™</span>
<span class="hljs-keyword">GRANT</span> <span class="hljs-keyword">CREATE</span> SESSION, <span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span>, <span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">VIEW</span> <span class="hljs-keyword">TO</span> app_user;
<span class="hljs-keyword">GRANT</span> <span class="hljs-keyword">SELECT</span>, <span class="hljs-keyword">INSERT</span>, <span class="hljs-keyword">UPDATE</span>, <span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">ON</span> employees <span class="hljs-keyword">TO</span> hr_manager;
<span class="hljs-keyword">GRANT</span> <span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">ON</span> salaries <span class="hljs-keyword">TO</span> finance_user;

<span class="hljs-comment">-- ä¸ºè§’è‰²æˆäºˆå…¶ä»–è§’è‰²</span>
<span class="hljs-keyword">GRANT</span> app_user <span class="hljs-keyword">TO</span> hr_manager;

<span class="hljs-comment">-- å°†è§’è‰²åˆ†é…ç»™ç”¨æˆ·</span>
<span class="hljs-keyword">GRANT</span> app_user <span class="hljs-keyword">TO</span> john;
<span class="hljs-keyword">GRANT</span> hr_manager <span class="hljs-keyword">TO</span> alice;
<span class="hljs-keyword">GRANT</span> finance_user <span class="hljs-keyword">TO</span> bob;

<span class="hljs-comment">-- è®¾ç½®é»˜è®¤è§’è‰²</span>
<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">USER</span> john <span class="hljs-keyword">DEFAULT</span> ROLE app_user;
<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">USER</span> alice <span class="hljs-keyword">DEFAULT</span> ROLE <span class="hljs-keyword">ALL</span>;  <span class="hljs-comment">-- æ‰€æœ‰è§’è‰²éƒ½æ˜¯é»˜è®¤è§’è‰²</span>
<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">USER</span> bob <span class="hljs-keyword">DEFAULT</span> ROLE <span class="hljs-keyword">NONE</span>;   <span class="hljs-comment">-- æ²¡æœ‰é»˜è®¤è§’è‰²</span>

<span class="hljs-comment">-- å¯ç”¨è§’è‰²ï¼ˆéœ€è¦æ—¶æ‰‹åŠ¨å¯ç”¨ï¼‰</span>
<span class="hljs-keyword">SET</span> ROLE secure_role IDENTIFIED <span class="hljs-keyword">BY</span> role_password;

<span class="hljs-comment">-- ç¦ç”¨è§’è‰²</span>
<span class="hljs-keyword">SET</span> ROLE <span class="hljs-keyword">NONE</span>;  <span class="hljs-comment">-- ç¦ç”¨æ‰€æœ‰éé»˜è®¤è§’è‰²</span>
</code></pre>
<h3 data-id="heading-8">åˆ é™¤è§’è‰²</h3>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- åˆ é™¤è§’è‰²</span>
<span class="hljs-keyword">DROP</span> ROLE app_user;
</code></pre>
<h2 data-id="heading-9">4.3 ç³»ç»Ÿæƒé™ç®¡ç†</h2>
<p>ç³»ç»Ÿæƒé™å…è®¸ç”¨æˆ·æ‰§è¡Œç‰¹å®šçš„æ•°æ®åº“æ“ä½œï¼Œå¦‚åˆ›å»ºè¡¨ã€ç´¢å¼•ç­‰ã€‚</p>
<h3 data-id="heading-10">å¸¸ç”¨ç³»ç»Ÿæƒé™</h3>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- è¿æ¥ç›¸å…³æƒé™</span>
<span class="hljs-keyword">CREATE</span> SESSION          <span class="hljs-comment">-- è¿æ¥åˆ°æ•°æ®åº“</span>
<span class="hljs-keyword">ALTER</span> SESSION           <span class="hljs-comment">-- æ›´æ”¹ä¼šè¯è®¾ç½®</span>

<span class="hljs-comment">-- å¯¹è±¡åˆ›å»ºæƒé™</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span>            <span class="hljs-comment">-- åˆ›å»ºè¡¨</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">VIEW</span>             <span class="hljs-comment">-- åˆ›å»ºè§†å›¾</span>
<span class="hljs-keyword">CREATE</span> SEQUENCE         <span class="hljs-comment">-- åˆ›å»ºåºåˆ—</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">PROCEDURE</span>        <span class="hljs-comment">-- åˆ›å»ºå­˜å‚¨è¿‡ç¨‹</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TRIGGER</span>          <span class="hljs-comment">-- åˆ›å»ºè§¦å‘å™¨</span>
<span class="hljs-keyword">CREATE</span> INDEX            <span class="hljs-comment">-- åˆ›å»ºç´¢å¼•</span>
<span class="hljs-keyword">CREATE</span> CLUSTER          <span class="hljs-comment">-- åˆ›å»ºç°‡</span>
<span class="hljs-keyword">CREATE</span> SYNONYM          <span class="hljs-comment">-- åˆ›å»ºåŒä¹‰è¯</span>
<span class="hljs-keyword">CREATE</span> DATABASE LINK    <span class="hljs-comment">-- åˆ›å»ºæ•°æ®åº“é“¾æ¥</span>

<span class="hljs-comment">-- ç®¡ç†æƒé™</span>
<span class="hljs-keyword">ALTER</span> DATABASE          <span class="hljs-comment">-- ä¿®æ”¹æ•°æ®åº“</span>
<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">SYSTEM</span>            <span class="hljs-comment">-- ä¿®æ”¹ç³»ç»Ÿå‚æ•°</span>
AUDIT <span class="hljs-keyword">SYSTEM</span>            <span class="hljs-comment">-- å®¡è®¡ç³»ç»Ÿæ“ä½œ</span>

<span class="hljs-comment">-- ç”¨æˆ·ç®¡ç†æƒé™</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">USER</span>             <span class="hljs-comment">-- åˆ›å»ºç”¨æˆ·</span>
<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">USER</span>              <span class="hljs-comment">-- ä¿®æ”¹ç”¨æˆ·</span>
<span class="hljs-keyword">DROP</span> <span class="hljs-keyword">USER</span>               <span class="hljs-comment">-- åˆ é™¤ç”¨æˆ·</span>
</code></pre>
<h3 data-id="heading-11">æˆäºˆå’Œæ’¤é”€ç³»ç»Ÿæƒé™</h3>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- æˆäºˆç³»ç»Ÿæƒé™ç»™ç”¨æˆ·</span>
<span class="hljs-keyword">GRANT</span> <span class="hljs-keyword">CREATE</span> SESSION, <span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> <span class="hljs-keyword">TO</span> john;
<span class="hljs-keyword">GRANT</span> <span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">PROCEDURE</span>, <span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TRIGGER</span> <span class="hljs-keyword">TO</span> alice;

<span class="hljs-comment">-- æˆäºˆç³»ç»Ÿæƒé™ç»™è§’è‰²</span>
<span class="hljs-keyword">GRANT</span> <span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">VIEW</span>, <span class="hljs-keyword">CREATE</span> SEQUENCE <span class="hljs-keyword">TO</span> app_user;

<span class="hljs-comment">-- æˆäºˆç®¡ç†å‘˜æƒé™</span>
<span class="hljs-keyword">GRANT</span> DBA <span class="hljs-keyword">TO</span> bob;

<span class="hljs-comment">-- æ’¤é”€ç³»ç»Ÿæƒé™</span>
<span class="hljs-keyword">REVOKE</span> <span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> <span class="hljs-keyword">FROM</span> john;
<span class="hljs-keyword">REVOKE</span> DBA <span class="hljs-keyword">FROM</span> bob;

<span class="hljs-comment">-- æˆäºˆæ‰€æœ‰æƒé™ï¼ˆè°¨æ…ä½¿ç”¨ï¼‰</span>
<span class="hljs-keyword">GRANT</span> <span class="hljs-keyword">ALL</span> PRIVILEGES <span class="hljs-keyword">TO</span> admin_user;
</code></pre>
<h2 data-id="heading-12">4.4 å¯¹è±¡æƒé™ç®¡ç†</h2>
<p>å¯¹è±¡æƒé™æ§åˆ¶ç”¨æˆ·å¯¹ç‰¹å®šæ•°æ®åº“å¯¹è±¡ï¼ˆå¦‚è¡¨ã€è§†å›¾ã€è¿‡ç¨‹ç­‰ï¼‰çš„è®¿é—®ã€‚</p>
<h3 data-id="heading-13">å¯¹è±¡æƒé™ç±»å‹</h3>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- è¡¨å’Œè§†å›¾æƒé™</span>
<span class="hljs-keyword">SELECT</span>      <span class="hljs-comment">-- æŸ¥è¯¢æ•°æ®</span>
<span class="hljs-keyword">INSERT</span>      <span class="hljs-comment">-- æ’å…¥æ•°æ®</span>
<span class="hljs-keyword">UPDATE</span>      <span class="hljs-comment">-- æ›´æ–°æ•°æ®</span>
<span class="hljs-keyword">DELETE</span>      <span class="hljs-comment">-- åˆ é™¤æ•°æ®</span>
<span class="hljs-keyword">REFERENCES</span>  <span class="hljs-comment">-- åˆ›å»ºå¤–é”®å¼•ç”¨</span>
<span class="hljs-keyword">ALTER</span>       <span class="hljs-comment">-- ä¿®æ”¹è¡¨ç»“æ„</span>
INDEX       <span class="hljs-comment">-- åˆ›å»ºç´¢å¼•</span>
<span class="hljs-keyword">ALL</span>         <span class="hljs-comment">-- æ‰€æœ‰æƒé™</span>

<span class="hljs-comment">-- è¿‡ç¨‹ã€å‡½æ•°ã€åŒ…æƒé™</span>
<span class="hljs-keyword">EXECUTE</span>     <span class="hljs-comment">-- æ‰§è¡Œç¨‹åºå•å…ƒ</span>

<span class="hljs-comment">-- åºåˆ—æƒé™</span>
<span class="hljs-keyword">SELECT</span>      <span class="hljs-comment">-- æŸ¥è¯¢åºåˆ—å½“å‰å€¼</span>
<span class="hljs-keyword">ALTER</span>       <span class="hljs-comment">-- ä¿®æ”¹åºåˆ—</span>

<span class="hljs-comment">-- ç›®å½•æƒé™</span>
READ        <span class="hljs-comment">-- è¯»å–ç›®å½•ä¸­çš„æ–‡ä»¶</span>
WRITE       <span class="hljs-comment">-- å†™å…¥ç›®å½•ä¸­çš„æ–‡ä»¶</span>
</code></pre>
<h3 data-id="heading-14">æˆäºˆå’Œæ’¤é”€å¯¹è±¡æƒé™</h3>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- æˆäºˆè¡¨æƒé™</span>
<span class="hljs-keyword">GRANT</span> <span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">ON</span> employees <span class="hljs-keyword">TO</span> john;
<span class="hljs-keyword">GRANT</span> <span class="hljs-keyword">INSERT</span>, <span class="hljs-keyword">UPDATE</span> <span class="hljs-keyword">ON</span> departments <span class="hljs-keyword">TO</span> alice;
<span class="hljs-keyword">GRANT</span> <span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">ON</span> job_history <span class="hljs-keyword">TO</span> hr_manager;
<span class="hljs-keyword">GRANT</span> <span class="hljs-keyword">ALL</span> <span class="hljs-keyword">ON</span> salaries <span class="hljs-keyword">TO</span> finance_manager;

<span class="hljs-comment">-- æˆäºˆè§†å›¾æƒé™</span>
<span class="hljs-keyword">GRANT</span> <span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">ON</span> emp_view <span class="hljs-keyword">TO</span> app_user;

<span class="hljs-comment">-- æˆäºˆè¿‡ç¨‹æƒé™</span>
<span class="hljs-keyword">GRANT</span> <span class="hljs-keyword">EXECUTE</span> <span class="hljs-keyword">ON</span> calculate_bonus <span class="hljs-keyword">TO</span> hr_manager;

<span class="hljs-comment">-- æˆäºˆåºåˆ—æƒé™</span>
<span class="hljs-keyword">GRANT</span> <span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">ON</span> emp_seq <span class="hljs-keyword">TO</span> app_user;

<span class="hljs-comment">-- æˆäºˆåˆ—çº§æƒé™</span>
<span class="hljs-keyword">GRANT</span> <span class="hljs-keyword">UPDATE</span> (salary, commission_pct) <span class="hljs-keyword">ON</span> employees <span class="hljs-keyword">TO</span> hr_manager;

<span class="hljs-comment">-- æ’¤é”€å¯¹è±¡æƒé™</span>
<span class="hljs-keyword">REVOKE</span> <span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">ON</span> employees <span class="hljs-keyword">FROM</span> john;
<span class="hljs-keyword">REVOKE</span> <span class="hljs-keyword">INSERT</span>, <span class="hljs-keyword">UPDATE</span> <span class="hljs-keyword">ON</span> departments <span class="hljs-keyword">FROM</span> alice;
<span class="hljs-keyword">REVOKE</span> <span class="hljs-keyword">EXECUTE</span> <span class="hljs-keyword">ON</span> calculate_bonus <span class="hljs-keyword">FROM</span> hr_manager;

<span class="hljs-comment">-- æˆäºˆæƒé™æ—¶å…è®¸æˆæƒç»™å…¶ä»–ç”¨æˆ·</span>
<span class="hljs-keyword">GRANT</span> <span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">ON</span> employees <span class="hljs-keyword">TO</span> john <span class="hljs-keyword">WITH</span> <span class="hljs-keyword">GRANT</span> OPTION;

<span class="hljs-comment">-- æ’¤é”€æƒé™åŠå…¶æˆäºˆçš„æƒé™</span>
<span class="hljs-keyword">REVOKE</span> <span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">ON</span> employees <span class="hljs-keyword">FROM</span> john CASCADE;
</code></pre>
<h2 data-id="heading-15">4.5 å®¡è®¡åŠŸèƒ½</h2>
<p>å®¡è®¡åŠŸèƒ½ç”¨äºè·Ÿè¸ªå’Œè®°å½•æ•°æ®åº“ä¸­çš„é‡è¦æ“ä½œã€‚</p>
<h3 data-id="heading-16">å¯ç”¨å®¡è®¡</h3>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- å¯ç”¨æ ‡å‡†å®¡è®¡</span>
AUDIT POLICY ora_logon_failures;  <span class="hljs-comment">-- å®¡è®¡ç™»å½•å¤±è´¥</span>

<span class="hljs-comment">-- å®¡è®¡ç‰¹å®šæ“ä½œ</span>
AUDIT <span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> <span class="hljs-keyword">BY</span> hr;
AUDIT <span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">ANY</span> <span class="hljs-keyword">TABLE</span> <span class="hljs-keyword">BY</span> dba_user;
AUDIT <span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">ON</span> hr.employees <span class="hljs-keyword">BY</span> ACCESS;

<span class="hljs-comment">-- å®¡è®¡ç³»ç»Ÿæƒé™</span>
AUDIT <span class="hljs-keyword">CREATE</span> SESSION;
AUDIT <span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">SYSTEM</span>;

<span class="hljs-comment">-- å®¡è®¡å¯¹è±¡æƒé™</span>
AUDIT <span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">ON</span> hr.employees <span class="hljs-keyword">BY</span> ACCESS;
</code></pre>
<h3 data-id="heading-17">æŸ¥çœ‹å®¡è®¡è®°å½•</h3>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- æŸ¥çœ‹å®¡è®¡è®°å½•</span>
<span class="hljs-keyword">SELECT</span> username, <span class="hljs-type">timestamp</span>, action_name, returncode
<span class="hljs-keyword">FROM</span> dba_audit_trail
<span class="hljs-keyword">WHERE</span> <span class="hljs-type">timestamp</span> <span class="hljs-operator">&gt;</span> SYSDATE <span class="hljs-operator">-</span> <span class="hljs-number">1</span>
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> <span class="hljs-type">timestamp</span> <span class="hljs-keyword">DESC</span>;

<span class="hljs-comment">-- æŸ¥çœ‹ç™»å½•å®¡è®¡</span>
<span class="hljs-keyword">SELECT</span> userid, userhost, <span class="hljs-type">timestamp</span>, returncode
<span class="hljs-keyword">FROM</span> dba_audit_session
<span class="hljs-keyword">WHERE</span> <span class="hljs-type">timestamp</span> <span class="hljs-operator">&gt;</span> SYSDATE <span class="hljs-operator">-</span> <span class="hljs-number">1</span>
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> <span class="hljs-type">timestamp</span> <span class="hljs-keyword">DESC</span>;

<span class="hljs-comment">-- æŸ¥çœ‹å¯¹è±¡å®¡è®¡</span>
<span class="hljs-keyword">SELECT</span> owner, obj_name, action_name, <span class="hljs-type">timestamp</span>, username
<span class="hljs-keyword">FROM</span> dba_audit_object
<span class="hljs-keyword">WHERE</span> <span class="hljs-type">timestamp</span> <span class="hljs-operator">&gt;</span> SYSDATE <span class="hljs-operator">-</span> <span class="hljs-number">1</span>
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> <span class="hljs-type">timestamp</span> <span class="hljs-keyword">DESC</span>;
</code></pre>
<h3 data-id="heading-18">ç®¡ç†å®¡è®¡</h3>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- åœæ­¢å®¡è®¡</span>
NOAUDIT <span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> <span class="hljs-keyword">BY</span> hr;
NOAUDIT <span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">ON</span> hr.employees;

<span class="hljs-comment">-- åˆ é™¤å®¡è®¡è®°å½•</span>
<span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> sys.aud$ <span class="hljs-keyword">WHERE</span> <span class="hljs-type">timestamp</span># <span class="hljs-operator">&lt;</span> SYSDATE <span class="hljs-operator">-</span> <span class="hljs-number">30</span>;

<span class="hljs-comment">-- æŸ¥çœ‹å½“å‰å®¡è®¡è®¾ç½®</span>
<span class="hljs-keyword">SELECT</span> audit_option, success, failure <span class="hljs-keyword">FROM</span> dba_stmt_audit_opts;
<span class="hljs-keyword">SELECT</span> privilege, success, failure <span class="hljs-keyword">FROM</span> dba_priv_audit_opts;
<span class="hljs-keyword">SELECT</span> owner, object_name, object_type, sel, ins, upd, del
<span class="hljs-keyword">FROM</span> dba_obj_audit_opts;
</code></pre>
<h2 data-id="heading-19">4.6 é…ç½®æ–‡ä»¶ç®¡ç†</h2>
<p>é…ç½®æ–‡ä»¶ç”¨äºé™åˆ¶ç”¨æˆ·èµ„æºä½¿ç”¨å’Œå¯†ç ç®¡ç†ã€‚</p>
<h3 data-id="heading-20">åˆ›å»ºé…ç½®æ–‡ä»¶</h3>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- åˆ›å»ºåŸºæœ¬é…ç½®æ–‡ä»¶</span>
<span class="hljs-keyword">CREATE</span> PROFILE app_profile LIMIT
  SESSIONS_PER_USER <span class="hljs-number">5</span>
  CPU_PER_SESSION <span class="hljs-number">10000</span>
  CPU_PER_CALL <span class="hljs-number">1000</span>
  CONNECT_TIME <span class="hljs-number">480</span>
  IDLE_TIME <span class="hljs-number">30</span>
  LOGICAL_READS_PER_SESSION <span class="hljs-number">1000000</span>
  PRIVATE_SGA <span class="hljs-number">100</span>K
  FAILED_LOGIN_ATTEMPTS <span class="hljs-number">3</span>
  PASSWORD_LOCK_TIME <span class="hljs-number">1</span>
  PASSWORD_LIFE_TIME <span class="hljs-number">90</span>
  PASSWORD_GRACE_TIME <span class="hljs-number">7</span>
  PASSWORD_REUSE_TIME <span class="hljs-number">365</span>
  PASSWORD_REUSE_MAX <span class="hljs-number">5</span>
  PASSWORD_VERIFY_FUNCTION verify_function;

<span class="hljs-comment">-- åˆ›å»ºä¸¥æ ¼çš„é…ç½®æ–‡ä»¶</span>
<span class="hljs-keyword">CREATE</span> PROFILE secure_profile LIMIT
  FAILED_LOGIN_ATTEMPTS <span class="hljs-number">3</span>
  PASSWORD_LOCK_TIME <span class="hljs-number">1</span><span class="hljs-operator">/</span><span class="hljs-number">24</span>  <span class="hljs-comment">-- é”å®š1å°æ—¶</span>
  PASSWORD_LIFE_TIME <span class="hljs-number">60</span>
  PASSWORD_GRACE_TIME <span class="hljs-number">5</span>
  PASSWORD_REUSE_TIME <span class="hljs-number">365</span>
  PASSWORD_REUSE_MAX UNLIMITED
  PASSWORD_VERIFY_FUNCTION ora12c_strong_verify_function;
</code></pre>
<h3 data-id="heading-21">ç®¡ç†é…ç½®æ–‡ä»¶</h3>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- ä¿®æ”¹é…ç½®æ–‡ä»¶</span>
<span class="hljs-keyword">ALTER</span> PROFILE app_profile LIMIT
  SESSIONS_PER_USER <span class="hljs-number">10</span>
  CPU_PER_SESSION <span class="hljs-number">20000</span>;

<span class="hljs-comment">-- å°†é…ç½®æ–‡ä»¶åˆ†é…ç»™ç”¨æˆ·</span>
<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">USER</span> john PROFILE app_profile;

<span class="hljs-comment">-- æŸ¥çœ‹é…ç½®æ–‡ä»¶ä¿¡æ¯</span>
<span class="hljs-keyword">SELECT</span> profile, resource_name, limit
<span class="hljs-keyword">FROM</span> dba_profiles
<span class="hljs-keyword">WHERE</span> profile <span class="hljs-operator">=</span> <span class="hljs-string">'APP_PROFILE'</span>
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> resource_name;

<span class="hljs-comment">-- åˆ é™¤é…ç½®æ–‡ä»¶</span>
<span class="hljs-keyword">DROP</span> PROFILE old_profile;
</code></pre>
<h2 data-id="heading-22">4.7 æœ¬ç« å°ç»“</h2>
<p>æœ¬ç« è¯¦ç»†ä»‹ç»äº†Oracleæ•°æ®åº“ä¸­çš„ç”¨æˆ·å’Œæƒé™ç®¡ç†ï¼ŒåŒ…æ‹¬ç”¨æˆ·ç®¡ç†ã€è§’è‰²ç®¡ç†ã€ç³»ç»Ÿæƒé™ã€å¯¹è±¡æƒé™ã€å®¡è®¡åŠŸèƒ½å’Œé…ç½®æ–‡ä»¶ç®¡ç†ã€‚æŒæ¡è¿™äº›å®‰å…¨ç›¸å…³çš„æŠ€èƒ½å¯¹äºä¿æŠ¤æ•°æ®åº“å®‰å…¨å’Œå®ç°ç²¾ç»†åŒ–æƒé™æ§åˆ¶éå¸¸é‡è¦ã€‚</p>
<h2 data-id="heading-23">ç»ƒä¹ é¢˜</h2>
<ol>
<li>åˆ›å»ºä¸€ä¸ªæ–°ç”¨æˆ·ï¼Œè®¾ç½®é»˜è®¤è¡¨ç©ºé—´å’Œé…é¢ï¼Œå¹¶ä¸ºå…¶åˆ†é…CONNECTå’ŒRESOURCEè§’è‰²</li>
<li>åˆ›å»ºä¸€ä¸ªè§’è‰²ï¼Œæˆäºˆè¯¥è§’è‰²å¯¹employeesè¡¨çš„SELECTã€INSERTã€UPDATEæƒé™ï¼Œç„¶åå°†è§’è‰²åˆ†é…ç»™ç”¨æˆ·</li>
<li>ä¸ºç‰¹å®šç”¨æˆ·æˆäºˆå¯¹æŸä¸ªè¡¨çš„åˆ—çº§æƒé™ï¼Œåªå…è®¸å…¶æ›´æ–°ç‰¹å®šåˆ—</li>
<li>åˆ›å»ºä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œé™åˆ¶ç”¨æˆ·åŒæ—¶è¿æ¥æ•°å’Œå¯†ç ç”Ÿå‘½å‘¨æœŸï¼Œå¹¶å°†å…¶åˆ†é…ç»™ç”¨æˆ·</li>
<li>å¯ç”¨å®¡è®¡åŠŸèƒ½ï¼Œè·Ÿè¸ªç‰¹å®šç”¨æˆ·çš„ç™»å½•å’Œé‡è¦è¡¨çš„æ“ä½œ</li>
<li>åˆ›å»ºä¸€ä¸ªå®‰å…¨çš„é…ç½®æ–‡ä»¶ï¼Œå®ç°å¼ºå¯†ç ç­–ç•¥å’Œç™»å½•å¤±è´¥é”å®šæœºåˆ¶</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ­å»ºLinuxæºç é˜…è¯»ç¯å¢ƒ]]></title>    <link>https://juejin.cn/post/7580208715275943978</link>    <guid>https://juejin.cn/post/7580208715275943978</guid>    <pubDate>2025-12-06T05:11:25.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7580208715275943978" data-draft-id="7580287383787372587" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ­å»ºLinuxæºç é˜…è¯»ç¯å¢ƒ"/> <meta itemprop="keywords" content="Linux"/> <meta itemprop="datePublished" content="2025-12-06T05:11:25.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è°¢æŸæ¸…å¿ƒå¯¡æ¬²"/> <meta itemprop="url" content="https://juejin.cn/user/1313289092474601"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ­å»ºLinuxæºç é˜…è¯»ç¯å¢ƒ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1313289092474601/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è°¢æŸæ¸…å¿ƒå¯¡æ¬²
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-06T05:11:25.000Z" title="Sat Dec 06 2025 05:11:25 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">è´­ä¹°æœåŠ¡å™¨/ä½¿ç”¨è™šæ‹Ÿæœº(ubuntu 24)</h3>
<p>è¿™é‡Œå¯ä»¥å»æ‰¾æœåŠ¡å™¨æ•™ç¨‹/è™šæ‹Ÿæœºæ•™ç¨‹</p>
<h3 data-id="heading-1">æ‹‰å–Linuxä»£ç å¹¶ç¼–è¯‘</h3>
<ol>
<li>åˆ°<code>/home</code>æ–‡ä»¶ä¸‹åˆ›å»ºæ–‡ä»¶å¤¹<code>/Linux</code></li>
</ol>
<pre><code class="hljs language-shell" lang="shell">cd /home
mkdir Linux
</code></pre>
<ol start="2">
<li>åˆ°è¾¾<code>/Linux</code>æ–‡ä»¶å¤¹ä¸‹æ‹‰å–Linuxæºç ,è¿™é‡Œé€‰æ‹©çš„æ˜¯linux-6.17.10ï¼Œå¦‚æœæœ‰éœ€è¦å¯ä»¥å»ä¸‹è½½<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.kernel.org%2F" target="_blank" title="https://www.kernel.org/" ref="nofollow noopener noreferrer">ç½‘ç«™</a>é€‰æ‹©è‡ªå·±éœ€è¦çš„ç‰ˆæœ¬<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/906b04d5d81c49ce98992b376295ede0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LCi5p-Q5riF5b-D5a-h5qyy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765602685&amp;x-signature=hlAY%2FF6omwe7JIyYEtt%2BXpomvns%3D" alt="" loading="lazy"/></li>
</ol>
<pre><code class="hljs language-shell" lang="shell">cd Linux
<span class="hljs-meta prompt_">#</span><span class="bash">å¦‚æœæ‹‰ä¸ä¸‹æ¥å¯ä»¥ç”¨æœ¬æœºä¸‹è½½åä¼ åˆ°æœåŠ¡å™¨/è™šæ‹Ÿæœºä¸­ï¼ˆæŒ‚æ¢¯å­é€Ÿåº¦å—ï¼‰</span>
wget https://cdn.kernel.org/pub/linux/kernel/v6.x/linux-6.17.10.tar.xz 
</code></pre>
<ol start="3">
<li>è§£å‹å‹ç¼©æ–‡ä»¶</li>
</ol>
<pre><code class="hljs language-shell" lang="shell">tar -xf linux-6.17.10.tar.xz
</code></pre>
<ol start="4">
<li>åˆ°è§£å‹åçš„æ–‡ä»¶</li>
</ol>
<pre><code class="hljs language-shell" lang="shell">cd linux-6.17.10
</code></pre>
<ol start="5">
<li>å®‰è£…ç¼–è¯‘Linuxæ‰€éœ€è¦çš„åŒ…å’Œæ’ä»¶</li>
</ol>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_">#</span><span class="bash">å®‰è£…å¯¹åº”æ’ä»¶ä¾¿äºé˜…è¯»æºç </span>
apt install bear
apt install clangd
<span class="hljs-meta prompt_">#</span><span class="bash">å®‰è£…ç¼–è¯‘æ—¶å¯¹åº”åŒ…ï¼ˆå¦‚æœ‰ç¼ºå¤±å¯è‡ªè¡Œæœç´¢éœ€è¦åŒ…å®‰è£…å³å¯ï¼‰</span>
apt-get install flex 
apt-get install libelf-dev
</code></pre>
<ol start="6">
<li>ç¼–è¯‘Linux</li>
</ol>
<pre><code class="hljs language-shell" lang="shell">bear -- make defconfig
bear -- make -j 4 #è¿™é‡Œçš„4è¡¨ç¤ºæ ¸å¿ƒæ•°ï¼Œæˆ‘ç”¨çš„æ˜¯4h4gæ‰€ä»¥ä½¿ç”¨4ä¸ªæ ¸å¿ƒï¼Œåˆ†é…çš„è¶Šå¤šé€Ÿåº¦è¶Šå¿«
</code></pre>
<p>ç¼–è¯‘æˆåŠŸ</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a85307fa3f754b02aed2ef1693a1c596~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LCi5p-Q5riF5b-D5a-h5qyy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765602685&amp;x-signature=v%2BveUIc4dRGw6ecXeNxQy9xupj4%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-2">VSCodeè¿æ¥æœåŠ¡å™¨</h3>
<ol>
<li>å®‰è£…ä¸‹åˆ—æ’ä»¶ï¼ˆCline,Copilotä¸ºAIæ’ä»¶ï¼Œç”¨äºç®€åŒ–é˜…è¯»æºç çš„ï¼‰</li>
</ol>
<p>æœ¬åœ°ä¸‹åªéœ€è¦å®‰è£…1ï¼ˆå…¶ä½™çœ‹æƒ…å†µå®‰è£…ï¼‰</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d96a1fa4d4f94623a7d84b3715556a4b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LCi5p-Q5riF5b-D5a-h5qyy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765602685&amp;x-signature=CkCGMO6i18u7DEnUTB6l5XBfD0c%3D" alt="" loading="lazy"/></p>
<ol start="2">
<li>é…ç½®sshæ–‡ä»¶</li>
</ol>
<p>å…ˆåˆ°å·¦ä¸‹è§’ç‚¹å‡»è¿æ¥</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fa0728fc98804445b6960f9e096f5ef7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LCi5p-Q5riF5b-D5a-h5qyy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765602685&amp;x-signature=0xl9nkK%2BRHjeK2LscyWU8opKtaw%3D" alt="" loading="lazy"/></p>
<p>ç‚¹å‡»è¿æ¥åˆ°ä¸»æœº</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/87e20e0c59f848c591ff531557174d3e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LCi5p-Q5riF5b-D5a-h5qyy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765602685&amp;x-signature=DIqAn2CtoXpb%2Fdz6vsACDNDUkUE%3D" alt="" loading="lazy"/></p>
<p>æ·»åŠ æ–°çš„sshä¸»æœº</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/521ceb575dff4c63b5fa1f5b63a1f78e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LCi5p-Q5riF5b-D5a-h5qyy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765602685&amp;x-signature=gyMiHJRtfU%2FQ49hOrATPM6QxyoI%3D" alt="" loading="lazy"/></p>
<p>å¡«å†™ip(ubuntuç³»ç»Ÿä½¿ç”¨<code>ifconfig</code>å‘½ä»¤è·å–ip)</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d1a05f8ae52c420abed98fd48800959d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LCi5p-Q5riF5b-D5a-h5qyy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765602685&amp;x-signature=gj97k1BkNAmBbwRxgCV3MVkjnWM%3D" alt="" loading="lazy"/></p>
<p>é€‰æ‹©æ›´æ–°çš„é…ç½®æ–‡ä»¶</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/443e2c26883344dd8e011758ed276b63~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LCi5p-Q5riF5b-D5a-h5qyy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765602685&amp;x-signature=pjagM%2FYs2sRww3ChJxgT9l%2BbPkM%3D" alt="" loading="lazy"/></p>
<p>å¡«å†™é…ç½®æ–‡ä»¶ï¼ˆæ³¨æ„ä¿å­˜ï¼Œvscodeä¸ä¼šè‡ªåŠ¨ä¿å­˜ï¼‰</p>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_"># </span><span class="bash">æ›¿æ¢ä¸ºå®é™…IPåœ°å€</span>
Host xxx.xxx.xxx.xxx
<span class="hljs-meta prompt_">  # </span><span class="bash">è‡ªå®šä¹‰ä¸»æœºå</span>
  HostName 
<span class="hljs-meta prompt_">  # </span><span class="bash">æ›¿æ¢ä¸ºå®é™…ç”¨æˆ·å</span>
  User ubuntu 
<span class="hljs-meta prompt_">  # </span><span class="bash">æ›¿æ¢ä¸ºå®é™…ç«¯å£å·</span>
  Port 22
<span class="hljs-meta prompt_">  # </span><span class="bash">æ›¿æ¢ä¸ºå®é™…å¯†é’¥æ–‡ä»¶è·¯å¾„ï¼ˆæœåŠ¡å™¨æ‰éœ€è¦ï¼‰</span>
  IdentityFile "C:\Users\DELL\Downloads\xiadong.pem"

</code></pre>
<p>æœ€åè¿æ¥ä¸»æœºé€‰æ‹©<code>Linux</code>,ç¡®è®¤å¯†ç </p>
<ol start="3">
<li>é…ç½®æ’ä»¶ï¼ˆç‰¹åˆ«æ˜¯clangdï¼‰</li>
</ol>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7e83044a31444f35aa37d013c7879b8e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LCi5p-Q5riF5b-D5a-h5qyy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765602685&amp;x-signature=SpIXj2Xl3MPdkD%2BybXqKTYoZ1gY%3D" alt="" loading="lazy"/></p>
<p>ä¸€å®šè¦åœ¨sshä¸‹å®‰è£…è¿œç¨‹æ’ä»¶</p>
<h3 data-id="heading-3">å‚è€ƒè§†é¢‘</h3>
<ol>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV17y421B7Pb%2F%3Fspm_id_from%3D333.337.search-card.all.click%26vd_source%3Dd5ab96f661b726a4de909ef44486bcfd" target="_blank" title="https://www.bilibili.com/video/BV17y421B7Pb/?spm_id_from=333.337.search-card.all.click&amp;vd_source=d5ab96f661b726a4de909ef44486bcfd" ref="nofollow noopener noreferrer">vscode+clangdé«˜æ•ˆå¿«é€Ÿé˜…è¯»linuxå†…æ ¸æºç </a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1bFNSeREvV%2F%3Fspm_id_from%3D333.337.search-card.all.click%26vd_source%3Dd5ab96f661b726a4de909ef44486bcfd" target="_blank" title="https://www.bilibili.com/video/BV1bFNSeREvV/?spm_id_from=333.337.search-card.all.click&amp;vd_source=d5ab96f661b726a4de909ef44486bcfd" ref="nofollow noopener noreferrer">å¸¦ä½ ç¼–è¯‘å†…æ ¸ï¼Œæ‰‹æ“è‡ªå·±çš„Linuxå‘è¡Œç‰ˆï¼</a>å‰2åˆ†é’Ÿ</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å½»åº•ææ‡‚ JavaScript çš„ thisï¼šä»é™·é˜±åˆ°è§£å†³æ–¹æ¡ˆ]]></title>    <link>https://juejin.cn/post/7580251192330403886</link>    <guid>https://juejin.cn/post/7580251192330403886</guid>    <pubDate>2025-12-06T03:51:41.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7580251192330403886" data-draft-id="7579814711853629450" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å½»åº•ææ‡‚ JavaScript çš„ thisï¼šä»é™·é˜±åˆ°è§£å†³æ–¹æ¡ˆ"/> <meta itemprop="keywords" content="JavaScript"/> <meta itemprop="datePublished" content="2025-12-06T03:51:41.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è°è¨€è¥¿è¥¿é‡Œ"/> <meta itemprop="url" content="https://juejin.cn/user/332466136029851"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å½»åº•ææ‡‚ JavaScript çš„ thisï¼šä»é™·é˜±åˆ°è§£å†³æ–¹æ¡ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/332466136029851/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è°è¨€è¥¿è¥¿é‡Œ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-06T03:51:41.000Z" title="Sat Dec 06 2025 03:51:41 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€ï¼šä¸ºä»€ä¹ˆè¦å•ç‹¬è®¨è®ºJSä¸­çš„ <code>this</code>ï¼Ÿ</h2>
<p>JS ä¸­çš„ <code>this</code> ä¹‹æ‰€ä»¥éœ€è¦è¢«å•ç‹¬æ‹¿å‡ºæ¥è®¨è®ºï¼Œæ˜¯å› ä¸ºå®ƒåœ¨è¡Œä¸ºä¸Šä¸å…¶ä»–ä¾‹å¦‚  Javaã€C++ç­‰ ä¸»æµç¼–ç¨‹è¯­è¨€ä¸­çš„ <code>this</code> æœ‰æœ¬è´¨åŒºåˆ«ã€‚</p>
<h3 data-id="heading-1">ä¸å¦¨æ¥çœ‹ä¸ªç®€å•å¯¹ç…§</h3>
<p>ä¸‹é¢æ˜¯ä¸€æ®µ C++ å®ä¾‹å¯¹è±¡çš„ä»£ç ï¼š</p>
<pre><code class="hljs language-c++" lang="c++"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span> { 
    <span class="hljs-keyword">public</span>: std::string name = <span class="hljs-string">"Alice"</span>;
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">sayName</span><span class="hljs-params">()</span> </span>{ 
        std::cout &lt;&lt; <span class="hljs-keyword">this</span>-&gt;name &lt;&lt; std::endl;
        } 
    }; 
    
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    Person p;
    std::string name = <span class="hljs-string">"Bob"</span>;
    p.<span class="hljs-built_in">sayName</span>(); 
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p>åªè¦äº†è§£è¿‡<code>this</code>å°±å¿…ç„¶çŸ¥é“è¿™é‡Œæœ€åçš„è¿è¡Œç»“æœæ˜¯</p>
<pre><code class="hljs language-bash" lang="bash">Alice
</code></pre>
<hr/>
<p>ä½†æ˜¯å¦‚æœæ˜¯ä¸€ä¸ªç±»ä¼¼çš„ JavaScript ä»£ç ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">var</span> bar = {
    myName : <span class="hljs-string">'Alice'</span>,
    <span class="hljs-attr">printName</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(myName);
    } 
}

myName = <span class="hljs-string">"Bob"</span>
bar.<span class="hljs-title function_">printName</span>();
</code></pre>
<p>æœ€åå¾—åˆ°çš„ç»“æœç«Ÿç„¶æ˜¯</p>
<pre><code class="hljs language-bash" lang="bash">Bob
</code></pre>
<p>è€Œè¿™å°±æ˜¯ JS çš„ <code>this</code> çš„ç‰¹æ®Šä¹‹å¤„äº†ï¼Œæ¥ä¸‹æ¥ä¸å¦¨ä¸æˆ‘ä¸€åŒé‡æ–°å®¡è§†ä¸€ä¸‹è¿™ä½é™Œç”Ÿçš„è€æœ‹å‹ <code>this</code> äº†ã€‚</p>
<h2 data-id="heading-2">ä¸€ã€ <strong>JS ä½œè€…æŒ–ä¸‹çš„ä¸€ä¸ªé™·é˜±</strong></h2>
<h3 data-id="heading-3">æ—©æœŸ JavaScript æ²¡æœ‰â€œç±»â€</h3>
<p>åœ¨ ES6 ä¹‹å‰ï¼ŒJavaScript <strong>å¹¶æ²¡æœ‰ <code>class</code> å…³é”®å­—</strong>ï¼Œä¹Ÿæ²¡æœ‰åŸç”Ÿçš„é¢å‘å¯¹è±¡è¯­æ³•ã€‚<br/>
æ‰€ä»¥å¼€å‘è€…åªèƒ½é€šè¿‡ <strong>æ„é€ å‡½æ•° +Â thisÂ +Â prototype</strong> çš„æ–¹æ³•æ¥å®ç°ç±»ä¼¼ OOP çš„æ•ˆæœï¼Œä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// æ™®é€šå‡½æ•°å½“ â€œæ„é€ å‡½æ•°â€ ä½¿ç”¨</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Person</span>(<span class="hljs-params">name</span>) {
  <span class="hljs-comment">// ç”¨ this ç»™å®ä¾‹ç»‘å®šå±æ€§</span>
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;
}

<span class="hljs-comment">// å†ä½¿ç”¨ prototype æ¥å…±äº«æ–¹æ³•</span>
<span class="hljs-title class_">Person</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">sayHi</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"ä½ å¥½ï¼Œæˆ‘æ˜¯"</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>);
};

<span class="hljs-keyword">const</span> alice = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-string">"Alice"</span>);
alice.<span class="hljs-title function_">sayHi</span>();
</code></pre>
<blockquote>
<p>è¿™é‡Œ <code>this</code> ä¸å…¶ä»–è¯­è¨€ <code>this</code> ç”¨æ³•å¹¶æ²¡æœ‰å·®åˆ«</p>
</blockquote>
<p>ä½†é—®é¢˜åœ¨äºï¼Œå½“æˆ‘ä»¬å°†å¯¹è±¡ä¸­çš„æ–¹æ³•ä¼ åˆ°å…¶ä»–å˜é‡ä¸­æ—¶</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> foo = alice.<span class="hljs-property">sayHi</span>; <span class="hljs-comment">// åˆæ³•çš„</span>
<span class="hljs-title function_">foo</span>();
</code></pre>
<p>æœ€åè¿è¡Œçš„ç»“æœå´æ˜¯ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b91a1eaefa0c457cab034b8c3790a3bb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LCO6KiA6KW_6KW_6YeM:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765597900&amp;x-signature=M0XBC4FdCbV%2Bvtoi%2FvlHkdTrw20%3D" alt="image.png" loading="lazy"/></p>
<p>æˆ‘ä»¬åŸæœ¬çš„æœŸæœ›æ˜¯ <code>alice.sayHi</code>Â æ˜¯Â <code>alice</code>Â çš„æ–¹æ³•ï¼Œä¸ç®¡æ€ä¹ˆä¼ ã€æ€ä¹ˆç”¨ï¼Œthis éƒ½åº”è¯¥æŒ‡å‘ aliceï¼Œä½†æ˜¯åœ¨è¿™é‡Œæˆ‘ä»¬çš„<code>this</code> å±…ç„¶â€œä¸¢äº†â€ã€‚</p>
<p>è¿™å°±å’Œ â€œ<code>this</code> åº”è¯¥æŒ‡å‘æ‰€å±å¯¹è±¡â€ çš„æœŸæœ›å‘ç”Ÿäº†å†²çªã€‚</p>
<hr/>
<h3 data-id="heading-4">é™·é˜±ï¼š<code>this</code> çš„æŒ‡å‘æ˜¯ç”±å‡½æ•°çš„ <strong>è°ƒç”¨æ–¹å¼</strong> å†³å®šçš„</h3>
<h4 data-id="heading-5">ä¾‹å¦‚ï¼š</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">var</span> bar = {
    <span class="hljs-attr">myName</span>: <span class="hljs-string">"XIXI"</span>,
    <span class="hljs-attr">printName</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(myName);     
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(bar.<span class="hljs-property">myName</span>);  
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">myName</span>); 
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>);       
    }
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">foo</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> bar.<span class="hljs-property">printName</span>
}

<span class="hljs-keyword">let</span> myName = <span class="hljs-string">'Bob'</span>
<span class="hljs-keyword">let</span> _printName = <span class="hljs-title function_">foo</span>();

<span class="hljs-comment">// è®¿é—®å¯¹è±¡è°ƒç”¨</span>
bar.<span class="hljs-title function_">printName</span>();
<span class="hljs-comment">// æ™®é€šå‡½æ•°è°ƒç”¨</span>
<span class="hljs-title function_">_printName</span>(); 
</code></pre>
<p>åœ¨è¿™é‡Œä¸¤æ¬¡è°ƒç”¨ printName() å‡½æ•°çœ‹ä¼¼æ˜¯ç›¸åŒçš„ï¼Œä½†æ˜¯å®é™…è¿è¡Œç»“æœä¼šäº§ç”Ÿåå·®ï¼Œä¸å¦¨å•ç‹¬å±•ç¤ºä¿©æ¬¡è°ƒç”¨çš„è¿è¡Œç»“æœæ¥å¯¹æ¯”ä¸€ä¸‹ã€‚</p>
<ul>
<li><strong>bar.printName() è®¿é—®å¯¹è±¡è°ƒç”¨</strong></li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/63e0da017c394bb8a6618ad1c1ac0810~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LCO6KiA6KW_6KW_6YeM:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765597900&amp;x-signature=t0HkM%2FKRu4N7AKb1Bg9jzDEzzHU%3D" alt="image.png" loading="lazy"/></p>
<ul>
<li><strong>_printName() æ™®é€šå‡½æ•°è°ƒç”¨</strong></li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1f498b32882945da81d7d7e0cbc0186d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LCO6KiA6KW_6KW_6YeM:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765597900&amp;x-signature=%2FyQtMjMmrM%2Fq%2BOCqiMwYfIsUGbU%3D" alt="image.png" loading="lazy"/></p>
<p>ä¸éš¾å‘ç°ï¼Œå‰ä¸¤ä¸ªè¾“å‡ºéƒ½æ˜¯ <code>Bob</code> å’Œ <code>XIXI</code></p>
<ul>
<li>è¿è¡Œ<code>console.log(myName)</code>: æ²¡æœ‰æ¶‰åŠ <code>this</code> ï¼Œè¿™æ—¶<code>myName</code>å°±å˜æˆ<strong>è‡ªç”±å˜é‡</strong>ï¼Œæ²¿ç€ ä½œç”¨åŸŸé“¾ï¼ˆprintName -&gt; å…¨å±€ä½œç”¨åŸŸï¼‰æŸ¥æ‰¾åˆ°äº†å…¨å±€ä½œç”¨åŸŸä¸­çš„ <code>let myName = Bob</code></li>
<li>è¿è¡Œ<code>console.log(bar.myName)</code>: æŒ‡å®šäº† <code>this</code> æŒ‡å‘ <code>bar</code>ï¼Œæ­¤æ—¶<code>myName</code>ä¹Ÿå°±é¡ºç†æˆç« çš„æ‰¾åˆ°äº†barä¸­çš„ <code>myName: "XIXI"</code></li>
</ul>
<p>ä½†æ˜¯åä¸¤è€…å·®åˆ«å°±å¾ˆå¤§äº†</p>
<ul>
<li>è¿è¡Œ<code>console.log(this.myName)</code>ï¼šé€šè¿‡åç»­<code>console.log(this)</code>èƒ½çœ‹åˆ°ï¼Œåœ¨è®¿é—®å¯¹è±¡ä¸­<code>this</code>æ˜¯æŒ‡å‘<code>barå¯¹è±¡</code>ï¼Œä½†æ˜¯åœ¨æ™®é€šå‡½æ•°è°ƒç”¨ä¸­<code>this</code>çš„æŒ‡å‘å´æ˜¯<code>window</code>ã€‚</li>
</ul>
<blockquote>
<p>è¿™é‡Œå°±æ˜¯ JS ä¸­ <code>this</code> çš„æ¼æ´ï¼š</p>
<ul>
<li>è°ƒç”¨å¯¹è±¡å†…çš„å‡½æ•°ï¼Œthis å°±æŒ‡å‘åœ¨å¯¹è±¡ä¸­</li>
<li>let ç”³æ˜çš„å˜é‡ï¼Œä¸ä¼šæŒ‚è½½åœ¨å…¨å±€windowå¯¹è±¡ä¸Š</li>
</ul>
<p>ä¸å¥½çš„åœ°æ–¹ï¼š</p>
<ul>
<li>var ç”³æ˜çš„å˜é‡ï¼Œä¼šæŒ‚è½½åœ¨å…¨å±€windowå¯¹è±¡ä¸Š</li>
<li>å½“å‡½æ•°æ²¡æœ‰è°ƒç”¨å¯¹è±¡ï¼Œå°±æ˜¯æ™®é€šå‡½æ•°ï¼Œthis å°±æŒ‡å‘å…¨å±€å¯¹è±¡ï¼ˆwindowï¼‰</li>
</ul>
</blockquote>
<p>æ ¹æ®ä¸Šè¿°çš„å·®å¼‚ï¼Œæˆ‘ä»¬å†æ¥é‡æ–°å®¡è§†ä¸€ä¸‹è°ƒç”¨ç»“æœ</p>
<ul>
<li>è®¿é—®å¯¹è±¡è°ƒç”¨ï¼š<code>this</code> -&gt; <code>bar</code>ï¼Œæ‰€ä»¥<code>this.myName</code>ä¹Ÿå°±æ˜¯<code>XIXI</code></li>
<li>æ™®é€šå‡½æ•°è°ƒç”¨ï¼š<code>this</code> -&gt; <code>window</code>ï¼Œæ‰€ä»¥<code>window.myName</code>å°±æ˜¯<code>Bob</code>ï¼Œå¯¹å—ï¼Ÿåˆ«å¿˜äº†<code>let</code>ç”³æ˜æ˜¯ä¸ä¼šæŒ‚è½½åœ¨<code>window</code> ä¸Šçš„ï¼Œæ‰€ä»¥æœ€åç»“æœåº”å½“æ˜¯<code>undefined</code></li>
</ul>
<h3 data-id="heading-6">å¯¼è‡´çš„åæœï¼š</h3>
<p>æ ¹æ®ä¸Šæ–‡æˆ‘ä»¬çŸ¥é“ï¼Œåœ¨ä¸¤ç§æƒ…å†µä¸‹ä¼šæœ‰æ•°æ®ä¼šä¸ window äº§ç”Ÿç‰µè¿ï¼Œä¹Ÿå°±æ˜¯ <code>varç”³æ˜å˜é‡</code> å’Œ <code>æ™®é€šå‡½æ•°è°ƒç”¨</code></p>
<p>å¦‚æœåœ¨ä»£ç ä¸­å¤§é‡ä½¿ç”¨ var ç”³æ˜ï¼Œä¹Ÿå°±éš¾å…ä¼šäº§ç”Ÿ <strong>var ç”³æ˜çš„å˜é‡å</strong> ä¼šä¸ <strong>æ™®é€šå‡½æ•°å</strong> å†²çª</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">bar</span>(<span class="hljs-params"/>) {}
<span class="hljs-keyword">var</span> bar = <span class="hljs-number">123</span>;
</code></pre>
<p>è¿™ä¸ªæ—¶å€™è°ƒç”¨ <code>bar</code>å°±ä¼šå¯¼è‡´åé¢çš„<code>bar = 123</code>å°†å‰é¢çš„<code>bar() {}</code>è¦†ç›–äº†ã€‚</p>
<p>æ‰€ä»¥<strong>å¤šæ¬¡ä½¿ç”¨varä¼šå¯¼è‡´å¾ˆå¤šå†²çªä¸”éš¾ç®¡ç†ï¼ˆå…¨å±€å˜é‡çš„æ±¡æŸ“ï¼‰ï¼Œå°†windowæ±¡æŸ“äº†</strong></p>
<h2 data-id="heading-7">è§£å†³é™·é˜±ï¼Ÿ</h2>
<h3 data-id="heading-8">1. <strong>ä½¿ç”¨ä¸¥æ ¼æ¨¡å¼ï¼ˆ'use strict'ï¼‰</strong></h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-meta">'use strict'</span>;
<span class="hljs-keyword">function</span> <span class="hljs-title function_">foo</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">x</span> = <span class="hljs-number">1</span>;
}
</code></pre>
<h3 data-id="heading-9">2. <strong>ä½¿ç”¨ç®­å¤´å‡½æ•°ï¼ˆæ— è‡ªå·±çš„ <code>this</code>ï¼‰</strong></h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Counter</span> {
  <span class="hljs-keyword">constructor</span>() {
    <span class="hljs-keyword">this</span>.count = <span class="hljs-number">0</span>;
  }
  <span class="hljs-comment">// ç®­å¤´å‡½æ•°ç»§æ‰¿å¤–å±‚ this</span>
  handleClick = () =&gt; {
    <span class="hljs-keyword">this</span>.count++;
  }
}
</code></pre>
<h2 data-id="heading-10">äºŒã€èƒŒæ™¯çŸ¥è¯† â€”â€” JS çš„æ‰§è¡Œæ¨¡å‹ä¸ä½œç”¨åŸŸæœºåˆ¶</h2>
<h3 data-id="heading-11">ä»£ç æ‰§è¡Œçš„ä¸‰ä¸ªé˜¶æ®µ</h3>
<p>ç¼–è¯‘é˜¶æ®µ -&gt; åˆ›å»ºæ‰§è¡Œä¸Šä¸‹æ–‡ -&gt; æ‰§è¡Œé˜¶æ®µ</p>

























<table><thead><tr><th>é˜¶æ®µ</th><th>ä¸»è¦ä½œç”¨</th><th>ä¸ <code>this</code> çš„å…³ç³»</th></tr></thead><tbody><tr><td><strong>ç¼–è¯‘é˜¶æ®µ</strong></td><td>è¯æ³•åˆ†æã€ä½œç”¨åŸŸæ”¶é›†ã€å˜é‡/å‡½æ•°æå‡</td><td><code>this</code> ä¸å‚ä¸</td></tr><tr><td><strong>åˆ›å»ºæ‰§è¡Œä¸Šä¸‹æ–‡</strong></td><td>æ„å»ºå˜é‡ç¯å¢ƒå’Œè¯æ³•ç¯å¢ƒ</td><td><code>this</code> æœªç»‘å®š</td></tr><tr><td><strong>æ‰§è¡Œé˜¶æ®µ</strong></td><td>é€è¡Œæ‰§è¡Œè¯­å¥ã€å‡½æ•°è°ƒç”¨ã€è¡¨è¾¾å¼æ±‚å€¼</td><td><code>this</code> æ ¹æ®è°ƒç”¨æ–¹å¼åŠ¨æ€ç»‘å®š</td></tr></tbody></table>
<h3 data-id="heading-12">è¯æ³•ä½œç”¨åŸŸ ä¸ åŠ¨æ€ <code>this</code> å¯¹æ¯”</h3>
<ul>
<li>
<p><strong>è‡ªç”±å˜é‡æŸ¥æ‰¾</strong>ï¼šæ²¿ç€ä½œç”¨åŸŸé“¾å‘ä¸ŠæŸ¥æ‰¾ï¼ˆç¼–è¯‘æ—¶ç¡®å®šï¼‰</p>
</li>
<li>
<p><strong><code>this</code> æŸ¥æ‰¾</strong>ï¼šå–å†³äºå‡½æ•°å¦‚ä½•è¢«è°ƒç”¨ï¼ˆè¿è¡Œæ—¶å†³å®šï¼‰</p>
</li>
</ul>
<h5 data-id="heading-13">å¯¹æ¯”ç¤ºä¾‹ï¼š</h5>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> obj = {
  <span class="hljs-attr">name</span>: <span class="hljs-string">'XIXI'</span>,
  <span class="hljs-title function_">myName</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>); <span class="hljs-comment">// this åŠ¨æ€ç»‘å®š</span>
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">foo</span>(<span class="hljs-params"/>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(name); <span class="hljs-comment">// name æ˜¯è‡ªç”±å˜é‡ï¼Œèµ°è¯æ³•ä½œç”¨åŸŸ</span>
    }
  }
};
</code></pre>
<hr/>
<h2 data-id="heading-14">ä¸‰ã€<code>this</code> çš„äº”ç§ç»‘å®šè§„åˆ™ï¼ˆç”±å¼ºåˆ°å¼±ï¼‰</h2>
<h3 data-id="heading-15">1. æ˜¾å¼ç»‘å®šï¼š<code>call</code> / <code>apply</code> / <code>bind</code></h3>
<p>ä¼˜å…ˆçº§æœ€é«˜ï¼Œç”±å¼€å‘è€…<strong>ä¸»åŠ¨æŒ‡å®š <code>this</code> å€¼</strong></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">let</span> bar = {
  <span class="hljs-attr">myName</span>: <span class="hljs-string">"æå®¢é‚¦"</span>,
  <span class="hljs-attr">test1</span>: <span class="hljs-number">1</span>
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">foo</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">myName</span> = <span class="hljs-string">"æå®¢æ—¶é—´"</span>;
}
<span class="hljs-comment">// .call() æˆ– .apply() æˆ– .bind() å°† this æŒ‡å®šä¸º bar</span>
foo.<span class="hljs-title function_">call</span>(bar)
foo.<span class="hljs-title function_">apply</span>(bar)
foo.<span class="hljs-title function_">bind</span>(bar)
</code></pre>
<h3 data-id="heading-16">2. <code>new</code> ç»‘å®š</h3>
<p>ä½¿ç”¨ <code>new</code> æ„é€ å‡½æ•°æ—¶ï¼Œ<code>this</code> æŒ‡å‘<strong>æ–°åˆ›å»ºçš„å®ä¾‹å¯¹è±¡</strong></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">CreateObj</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// new CreateObj()å†…éƒ¨ä½¿ç”¨æ­¥éª¤ï¼š</span>
  <span class="hljs-comment">// 1. var temObj = {}</span>
  <span class="hljs-comment">// 2. CreateObj.call(temObj) å°† this å¼ºåˆ¶æŒ‡å‘ temObj</span>
  <span class="hljs-comment">// 3. temObj.__proto__ = CreateObj.prototype  å°†æ–°å¯¹è±¡çš„åŸå‹é“¾ï¼Œè¿æ¥åˆ°æ„é€ å‡½æ•°çš„ prototype ä¸Š</span>
  <span class="hljs-comment">// 4. return temObj  è¿”è¿˜åˆ›å»ºçš„æ–°å¯¹è±¡</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>)
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = <span class="hljs-string">"æå®¢æ—¶é—´"</span>
}
<span class="hljs-comment">// å¦‚æœè¿™é‡Œæ²¡æœ‰ä½¿ç”¨ newï¼Œé‚£ä¹ˆ this å°±ä¼šé»˜è®¤æŒ‡å‘å…¨å±€å®šä¹‰åŸŸä¸­çš„ window</span>
<span class="hljs-keyword">var</span> myObj = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CreateObj</span>();
</code></pre>
<h3 data-id="heading-17">3. éšå¼ç»‘å®šï¼ˆå¯¹è±¡æ–¹æ³•è°ƒç”¨ï¼‰</h3>
<p>å‡½æ•°ä½œä¸ºå¯¹è±¡å±æ€§è¢«è°ƒç”¨ â†’ <code>this</code> æŒ‡å‘è¯¥å¯¹è±¡</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> obj = {
    <span class="hljs-attr">name</span>: <span class="hljs-string">"XIXI"</span>,
    <span class="hljs-attr">sayName</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>);  <span class="hljs-comment">// this === obj</span>
    }
};

obj.<span class="hljs-title function_">sayName</span>();  <span class="hljs-comment">// this æŒ‡å‘ obj</span>
</code></pre>
<ul>
<li><strong>é™·é˜±</strong>ï¼šæ–¹æ³•èµ‹å€¼ç»™å˜é‡åä¸¢å¤±ç»‘å®š
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> obj = { 
 <span class="hljs-attr">name</span>: <span class="hljs-string">'XIXI'</span>, 
 <span class="hljs-title function_">say</span>(<span class="hljs-params"/>) { 
     <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>); 
 } 
};
obj.<span class="hljs-title function_">say</span>(); <span class="hljs-comment">// XIXI</span>
<span class="hljs-keyword">const</span> f = obj.<span class="hljs-property">say</span>;
<span class="hljs-title function_">f</span>(); <span class="hljs-comment">// undefinedï¼ˆä¸¥æ ¼æ¨¡å¼ä¸‹ä¸º TypeErrorï¼‰</span>
</code></pre>
</li>
</ul>
<h3 data-id="heading-18">4. é»˜è®¤ç»‘å®šï¼ˆæ™®é€šå‡½æ•°è°ƒç”¨ï¼‰</h3>
<ul>
<li>
<p><strong>éä¸¥æ ¼æ¨¡å¼</strong>ï¼š<code>this</code> æŒ‡å‘å…¨å±€å¯¹è±¡ï¼ˆæµè§ˆå™¨ä¸­ä¸º <code>window</code>ï¼‰</p>
</li>
<li>
<p><strong>ä¸¥æ ¼æ¨¡å¼ï¼ˆ'use strict'ï¼‰</strong> ï¼š<code>this</code> ä¸º <code>undefined</code></p>
</li>
</ul>
<h3 data-id="heading-19">5. ç®­å¤´å‡½æ•°</h3>
<p>ç®­å¤´å‡½æ•°<strong>ä¸ç»‘å®š <code>this</code></strong>ï¼Œè€Œæ˜¯<strong>ç»§æ‰¿å¤–å±‚è¯æ³•ä½œç”¨åŸŸçš„ <code>this</code></strong></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> obj = {
  <span class="hljs-attr">name</span>: <span class="hljs-string">'Bob'</span>,
  <span class="hljs-title function_">foo</span>(<span class="hljs-params"/>) {
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>); <span class="hljs-comment">// "Bob"</span>
    }, <span class="hljs-number">100</span>);
  }
};
</code></pre>
<blockquote>
<p><strong>ç»‘å®šä¼˜å…ˆçº§æ€»ç»“</strong>ï¼š<br/>
<code>new</code> &gt; <code>call/apply/bind</code> &gt; å¯¹è±¡æ–¹æ³• &gt; æ™®é€šå‡½æ•°</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[HarmonyOSä¸­é«˜å¾·åœ°å›¾ç¬¬ä¸€ç¯‡ï¼šé«˜å¾·åœ°å›¾SDKé›†æˆä¸åˆå§‹åŒ–]]></title>    <link>https://juejin.cn/post/7580270531469508654</link>    <guid>https://juejin.cn/post/7580270531469508654</guid>    <pubDate>2025-12-06T04:20:36.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7580270531469508654" data-draft-id="7580259796668334126" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="HarmonyOSä¸­é«˜å¾·åœ°å›¾ç¬¬ä¸€ç¯‡ï¼šé«˜å¾·åœ°å›¾SDKé›†æˆä¸åˆå§‹åŒ–"/> <meta itemprop="keywords" content="HarmonyOS"/> <meta itemprop="datePublished" content="2025-12-06T04:20:36.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§é›·ç¥"/> <meta itemprop="url" content="https://juejin.cn/user/1688498113884839"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            HarmonyOSä¸­é«˜å¾·åœ°å›¾ç¬¬ä¸€ç¯‡ï¼šé«˜å¾·åœ°å›¾SDKé›†æˆä¸åˆå§‹åŒ–
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1688498113884839/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§é›·ç¥
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-06T04:20:36.000Z" title="Sat Dec 06 2025 04:20:36 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    6
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ç¬¬ä¸€ç¯‡ï¼šé«˜å¾·åœ°å›¾SDKé›†æˆä¸åˆå§‹åŒ–</h2>
<p>æœ¬ç¯‡æ•™ç¨‹å°†å¸¦ä½ å®Œæˆé«˜å¾·åœ°å›¾HarmonyOS SDKçš„é›†æˆé…ç½®ï¼Œè¿™æ˜¯åç»­æ‰€æœ‰åŠŸèƒ½çš„åŸºç¡€ã€‚</p>
<h3 data-id="heading-1">å­¦ä¹ ç›®æ ‡</h3>
<ul>
<li>äº†è§£é«˜å¾·åœ°å›¾SDKçš„ç»„æˆæ¨¡å—</li>
<li>å®ŒæˆSDKçš„å®‰è£…å’Œé…ç½®</li>
<li>ç”³è¯·å¹¶é…ç½®API Key</li>
<li>å®ç°éšç§æ”¿ç­–åˆè§„è°ƒç”¨</li>
</ul>
<h3 data-id="heading-2">1. SDKæ¨¡å—ä»‹ç»</h3>
<p>é«˜å¾·åœ°å›¾HarmonyOS SDKä¸»è¦åŒ…å«ä»¥ä¸‹æ¨¡å—ï¼š</p>






























<table><thead><tr><th>æ¨¡å—</th><th>åŒ…å</th><th>åŠŸèƒ½</th></tr></thead><tbody><tr><td>åœ°å›¾SDK</td><td><code>@amap/amap_lbs_map3d</code></td><td>åœ°å›¾æ˜¾ç¤ºã€æ ‡è®°ã€è¦†ç›–ç‰©ç­‰</td></tr><tr><td>æœç´¢SDK</td><td><code>@amap/amap_lbs_search</code></td><td>POIæœç´¢ã€è·¯çº¿è§„åˆ’ã€åœ°ç†ç¼–ç ç­‰</td></tr><tr><td>å®šä½SDK</td><td><code>@amap/amap_lbs_location</code></td><td>é«˜ç²¾åº¦å®šä½ï¼ˆå¯é€‰ï¼‰</td></tr><tr><td>å…¬å…±æ¨¡å—</td><td><code>@amap/amap_lbs_common</code></td><td>éšç§æ”¿ç­–ã€å…¬å…±ç±»å‹å®šä¹‰</td></tr></tbody></table>
<h3 data-id="heading-3">2. å®‰è£…SDK</h3>
<h4 data-id="heading-4">2.1 ä¿®æ”¹æ ¹ç›®å½• oh-package.json5</h4>
<p>åœ¨é¡¹ç›®æ ¹ç›®å½•çš„ <code>oh-package.json5</code> ä¸­æ·»åŠ ä¾èµ–ï¼š</p>
<pre><code class="hljs language-json5" lang="json5">{
  "modelVersion": "6.0.0",
  "description": "é«˜å¾·åœ°å›¾å¼€å‘æ•™ç¨‹",
  "dependencies": {
    "@amap/amap_lbs_map3d": "^2.1.0",
    "@amap/amap_lbs_search": "^1.0.8",
    "@amap/amap_lbs_common": "^1.0.3"
  }
}
</code></pre>
<h4 data-id="heading-5">2.2 ä¿®æ”¹entryæ¨¡å— oh-package.json5</h4>
<p>åœ¨ <code>entry/oh-package.json5</code> ä¸­æ·»åŠ ä¾èµ–ï¼š</p>
<pre><code class="hljs language-json5" lang="json5">{
  "name": "entry",
  "version": "1.0.0",
  "description": "é«˜å¾·åœ°å›¾å¼€å‘æ•™ç¨‹",
  "main": "",
  "author": "",
  "license": "",
  "dependencies": {
    "@amap/amap_lbs_map3d": "^2.1.0",
    "@amap/amap_lbs_search": "^1.0.8",
    "@amap/amap_lbs_common": "^1.0.3"
  }
}
</code></pre>
<h4 data-id="heading-6">2.3 åŒæ­¥ä¾èµ–</h4>
<p>ç‚¹å‡»DevEco Studioå³ä¸Šè§’çš„ <code>Sync Now</code> æŒ‰é’®ï¼Œæˆ–ä½¿ç”¨å‘½ä»¤ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">ohpm install
</code></pre>
<h3 data-id="heading-7">3. ç”³è¯·API Key</h3>
<h4 data-id="heading-8">3.1 æ³¨å†Œé«˜å¾·å¼€å‘è€…è´¦å·</h4>
<ol>
<li>è®¿é—® <a href="https://link.juejin.cn?target=https%3A%2F%2Flbs.amap.com%2F" target="_blank" title="https://lbs.amap.com/" ref="nofollow noopener noreferrer">é«˜å¾·å¼€æ”¾å¹³å°</a></li>
<li>ç‚¹å‡»å³ä¸Šè§’ã€Œæ³¨å†Œã€åˆ›å»ºè´¦å·</li>
<li>å®Œæˆå®åè®¤è¯ï¼ˆä¸ªäººå¼€å‘è€…/ä¼ä¸šå¼€å‘è€…ï¼‰</li>
</ol>
<h4 data-id="heading-9">3.2 åˆ›å»ºåº”ç”¨</h4>
<ol>
<li>ç™»å½•åè¿›å…¥ã€Œæ§åˆ¶å°ã€</li>
<li>ç‚¹å‡»ã€Œåº”ç”¨ç®¡ç†ã€â†’ã€Œæˆ‘çš„åº”ç”¨ã€â†’ã€Œåˆ›å»ºæ–°åº”ç”¨ã€</li>
<li>å¡«å†™åº”ç”¨åç§°å’Œç±»å‹</li>
</ol>
<h4 data-id="heading-10">3.3 æ·»åŠ Key</h4>
<ol>
<li>åœ¨åˆ›å»ºçš„åº”ç”¨ä¸‹ç‚¹å‡»ã€Œæ·»åŠ Keyã€</li>
<li>é€‰æ‹©æœåŠ¡å¹³å°ï¼š<strong>HarmonyOS</strong></li>
<li>å¡«å†™å¿…è¦ä¿¡æ¯ï¼š
<ul>
<li><strong>Keyåç§°</strong>: è‡ªå®šä¹‰åç§°</li>
<li><strong>Package Name</strong>: ä¸<code>build-profile.json5</code>ä¸­çš„<code>bundleName</code>ä¸€è‡´</li>
<li><strong>SHA256æŒ‡çº¹</strong>: ç­¾åè¯ä¹¦çš„SHA256æŒ‡çº¹</li>
</ul>
</li>
</ol>
<h4 data-id="heading-11">3.4 è·å–ç­¾åè¯ä¹¦æŒ‡çº¹</h4>
<p>åœ¨DevEco Studioä¸­ï¼š</p>
<ol>
<li>æ‰“å¼€ <code>Build</code> â†’ <code>Generate Key and CSR</code></li>
<li>åˆ›å»ºæˆ–é€‰æ‹©å·²æœ‰çš„ç­¾åè¯ä¹¦</li>
<li>æŸ¥çœ‹è¯ä¹¦è¯¦æƒ…è·å–SHA256æŒ‡çº¹</li>
</ol>
<p>æˆ–ä½¿ç”¨å‘½ä»¤è¡Œï¼š</p>
<pre><code class="hljs language-bash" lang="bash">keytool -list -v -keystore your_keystore.p12 -storepass your_password
</code></pre>
<h3 data-id="heading-12">4. é…ç½®API Key</h3>
<h4 data-id="heading-13">4.1 åˆ›å»ºå¸¸é‡é…ç½®æ–‡ä»¶</h4>
<p>åˆ›å»ºæ–‡ä»¶ <code>entry/src/main/ets/common/Constants.ets</code>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">/**
 * åº”ç”¨å¸¸é‡é…ç½®
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Constants</span> {
  <span class="hljs-comment">/**
   * é«˜å¾·åœ°å›¾API Key
   * è¯·æ›¿æ¢ä¸ºä½ åœ¨é«˜å¾·å¼€æ”¾å¹³å°ç”³è¯·çš„Key
   */</span>
  <span class="hljs-keyword">static</span> <span class="hljs-keyword">readonly</span> <span class="hljs-attr">AMAP_API_KEY</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">"ä½ çš„API_Key"</span>;
  
  <span class="hljs-comment">/**
   * é»˜è®¤åœ°å›¾ä¸­å¿ƒç‚¹ï¼ˆåŒ—äº¬å¤©å®‰é—¨ï¼‰
   */</span>
  <span class="hljs-keyword">static</span> <span class="hljs-keyword">readonly</span> <span class="hljs-attr">DEFAULT_CENTER_LAT</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">39.909187</span>;
  <span class="hljs-keyword">static</span> <span class="hljs-keyword">readonly</span> <span class="hljs-attr">DEFAULT_CENTER_LNG</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">116.397451</span>;
  
  <span class="hljs-comment">/**
   * é»˜è®¤ç¼©æ”¾çº§åˆ«
   */</span>
  <span class="hljs-keyword">static</span> <span class="hljs-keyword">readonly</span> <span class="hljs-attr">DEFAULT_ZOOM</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">15</span>;
}
</code></pre>
<h3 data-id="heading-14">5. é…ç½®éšç§æ”¿ç­–ï¼ˆå¿…é¡»ï¼‰</h3>
<p>æ ¹æ®å›½å®¶æ³•è§„è¦æ±‚ï¼Œä½¿ç”¨é«˜å¾·SDKå‰å¿…é¡»è¿›è¡Œéšç§æ”¿ç­–åˆè§„é…ç½®ã€‚</p>
<h4 data-id="heading-15">5.1 åœ¨EntryAbilityä¸­é…ç½®</h4>
<p>ä¿®æ”¹ <code>entry/src/main/ets/entryability/EntryAbility.ets</code>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">AbilityConstant</span>, <span class="hljs-title class_">UIAbility</span>, <span class="hljs-title class_">Want</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;
<span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-variable language_">window</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">MapsInitializer</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@amap/amap_lbs_map3d'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ServiceSettings</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@amap/amap_lbs_search'</span>;
<span class="hljs-keyword">import</span> { 
  <span class="hljs-title class_">AMapPrivacyShowStatus</span>, 
  <span class="hljs-title class_">AMapPrivacyInfoStatus</span>, 
  <span class="hljs-title class_">AMapPrivacyAgreeStatus</span> 
} <span class="hljs-keyword">from</span> <span class="hljs-string">'@amap/amap_lbs_common'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Constants</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'../common/Constants'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EntryAbility</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">UIAbility</span> {
  <span class="hljs-title function_">onCreate</span>(<span class="hljs-attr">want</span>: <span class="hljs-title class_">Want</span>, <span class="hljs-attr">launchParam</span>: <span class="hljs-title class_">AbilityConstant</span>.<span class="hljs-property">LaunchParam</span>): <span class="hljs-built_in">void</span> {
    hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'EntryAbility'</span>, <span class="hljs-string">'Ability onCreate'</span>);
    
    <span class="hljs-comment">// åˆå§‹åŒ–é«˜å¾·åœ°å›¾SDK</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">initAMapSDK</span>();
  }

  <span class="hljs-comment">/**
   * åˆå§‹åŒ–é«˜å¾·åœ°å›¾SDK
   */</span>
  <span class="hljs-keyword">private</span> <span class="hljs-title function_">initAMapSDK</span>(): <span class="hljs-built_in">void</span> {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-comment">// 1. è®¾ç½®éšç§æ”¿ç­–åˆè§„ï¼ˆå¿…é¡»åœ¨åˆå§‹åŒ–ä¹‹å‰è°ƒç”¨ï¼‰</span>
      <span class="hljs-comment">// åœ°å›¾SDKéšç§æ”¿ç­–</span>
      <span class="hljs-title class_">MapsInitializer</span>.<span class="hljs-title function_">updatePrivacyShow</span>(
        <span class="hljs-title class_">AMapPrivacyShowStatus</span>.<span class="hljs-property">DidShow</span>,      <span class="hljs-comment">// å·²å‘ç”¨æˆ·å±•ç¤ºéšç§æ”¿ç­–</span>
        <span class="hljs-title class_">AMapPrivacyInfoStatus</span>.<span class="hljs-property">DidContain</span>    <span class="hljs-comment">// éšç§æ”¿ç­–ä¸­åŒ…å«é«˜å¾·SDKè¯´æ˜</span>
      );
      <span class="hljs-title class_">MapsInitializer</span>.<span class="hljs-title function_">updatePrivacyAgree</span>(
        <span class="hljs-title class_">AMapPrivacyAgreeStatus</span>.<span class="hljs-property">DidAgree</span>     <span class="hljs-comment">// ç”¨æˆ·å·²åŒæ„éšç§æ”¿ç­–</span>
      );
      
      <span class="hljs-comment">// æœç´¢SDKéšç§æ”¿ç­–</span>
      <span class="hljs-title class_">ServiceSettings</span>.<span class="hljs-title function_">updatePrivacyShow</span>(
        <span class="hljs-title class_">AMapPrivacyShowStatus</span>.<span class="hljs-property">DidShow</span>,
        <span class="hljs-title class_">AMapPrivacyInfoStatus</span>.<span class="hljs-property">DidContain</span>,
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>
      );
      <span class="hljs-title class_">ServiceSettings</span>.<span class="hljs-title function_">updatePrivacyAgree</span>(
        <span class="hljs-title class_">AMapPrivacyAgreeStatus</span>.<span class="hljs-property">DidAgree</span>,
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>
      );
      
      <span class="hljs-comment">// 2. è®¾ç½®API Key</span>
      <span class="hljs-title class_">MapsInitializer</span>.<span class="hljs-title function_">setApiKey</span>(<span class="hljs-title class_">Constants</span>.<span class="hljs-property">AMAP_API_KEY</span>);
      
      <span class="hljs-comment">// 3. å¼€å¯è°ƒè¯•æ¨¡å¼ï¼ˆå‘å¸ƒæ—¶å»ºè®®å…³é—­ï¼‰</span>
      <span class="hljs-title class_">MapsInitializer</span>.<span class="hljs-title function_">setDebugMode</span>(<span class="hljs-literal">true</span>);
      
      hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'EntryAbility'</span>, <span class="hljs-string">'AMap SDK initialized successfully'</span>);
    } <span class="hljs-keyword">catch</span> (error) {
      hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'EntryAbility'</span>, <span class="hljs-string">'AMap SDK init failed: '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(error));
    }
  }

  <span class="hljs-title function_">onWindowStageCreate</span>(<span class="hljs-attr">windowStage</span>: <span class="hljs-variable language_">window</span>.<span class="hljs-property">WindowStage</span>): <span class="hljs-built_in">void</span> {
    hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'EntryAbility'</span>, <span class="hljs-string">'Ability onWindowStageCreate'</span>);

    windowStage.<span class="hljs-title function_">loadContent</span>(<span class="hljs-string">'pages/Index'</span>, <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
      <span class="hljs-keyword">if</span> (err.<span class="hljs-property">code</span>) {
        hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'EntryAbility'</span>, <span class="hljs-string">'Failed to load content: '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(err));
        <span class="hljs-keyword">return</span>;
      }
      hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'EntryAbility'</span>, <span class="hljs-string">'Content loaded successfully'</span>);
    });
  }

  <span class="hljs-title function_">onForeground</span>(): <span class="hljs-built_in">void</span> {
    hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'EntryAbility'</span>, <span class="hljs-string">'Ability onForeground'</span>);
  }

  <span class="hljs-title function_">onBackground</span>(): <span class="hljs-built_in">void</span> {
    hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'EntryAbility'</span>, <span class="hljs-string">'Ability onBackground'</span>);
  }

  <span class="hljs-title function_">onDestroy</span>(): <span class="hljs-built_in">void</span> {
    hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'EntryAbility'</span>, <span class="hljs-string">'Ability onDestroy'</span>);
  }
}
</code></pre>
<h3 data-id="heading-16">6. é…ç½®æƒé™</h3>
<p>ä¿®æ”¹ <code>entry/src/main/module.json5</code>ï¼Œæ·»åŠ å¿…è¦æƒé™ï¼š</p>
<pre><code class="hljs language-json5" lang="json5">{
  "module": {
    "name": "entry",
    "type": "entry",
    // ... å…¶ä»–é…ç½®
    
    "requestPermissions": [
      {
        "name": "ohos.permission.INTERNET",
        "reason": "$string:permission_internet_reason",
        "usedScene": {
          "abilities": ["EntryAbility"],
          "when": "always"
        }
      },
      {
        "name": "ohos.permission.LOCATION",
        "reason": "$string:permission_location_reason",
        "usedScene": {
          "abilities": ["EntryAbility"],
          "when": "inuse"
        }
      },
      {
        "name": "ohos.permission.APPROXIMATELY_LOCATION",
        "reason": "$string:permission_location_reason",
        "usedScene": {
          "abilities": ["EntryAbility"],
          "when": "inuse"
        }
      }
    ]
  }
}
</code></pre>
<h4 data-id="heading-17">6.1 æ·»åŠ æƒé™è¯´æ˜å­—ç¬¦ä¸²</h4>
<p>åœ¨ <code>entry/src/main/resources/base/element/string.json</code> ä¸­æ·»åŠ ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"string"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"permission_internet_reason"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"value"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ç”¨äºåŠ è½½åœ°å›¾æ•°æ®å’Œè¿›è¡Œç½‘ç»œè¯·æ±‚"</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"permission_location_reason"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"value"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ç”¨äºè·å–æ‚¨çš„ä½ç½®ä¿¡æ¯ï¼Œæä¾›å®šä½æœåŠ¡"</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-18">7. éªŒè¯é…ç½®</h3>
<p>åˆ›å»ºä¸€ä¸ªç®€å•çš„æµ‹è¯•é¡µé¢éªŒè¯SDKæ˜¯å¦é…ç½®æˆåŠŸã€‚</p>
<p>åœ¨ <code>entry/src/main/ets/pages/Index.ets</code> ä¸­ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">MapsInitializer</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@amap/amap_lbs_map3d'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Constants</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'../common/Constants'</span>;

<span class="hljs-meta">@Entry</span>
<span class="hljs-meta">@Component</span>
struct <span class="hljs-title class_">Index</span> {
  <span class="hljs-meta">@State</span> <span class="hljs-attr">sdkVersion</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'æ£€æµ‹ä¸­...'</span>;
  <span class="hljs-meta">@State</span> <span class="hljs-attr">initStatus</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'æ£€æµ‹ä¸­...'</span>;

  <span class="hljs-title function_">aboutToAppear</span>(): <span class="hljs-built_in">void</span> {
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">checkSDKStatus</span>();
  }

  <span class="hljs-keyword">private</span> <span class="hljs-title function_">checkSDKStatus</span>(): <span class="hljs-built_in">void</span> {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-comment">// æ£€æŸ¥API Keyæ˜¯å¦å·²è®¾ç½®</span>
      <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Constants</span>.<span class="hljs-property">AMAP_API_KEY</span> &amp;&amp; <span class="hljs-title class_">Constants</span>.<span class="hljs-property">AMAP_API_KEY</span> !== <span class="hljs-string">'ä½ çš„API_Key'</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">initStatus</span> = <span class="hljs-string">'âœ… SDKé…ç½®æˆåŠŸ'</span>;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">sdkVersion</span> = <span class="hljs-string">'é«˜å¾·åœ°å›¾SDKå·²å°±ç»ª'</span>;
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">initStatus</span> = <span class="hljs-string">'âŒ è¯·é…ç½®API Key'</span>;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">sdkVersion</span> = <span class="hljs-string">'è¯·åœ¨Constants.etsä¸­è®¾ç½®AMAP_API_KEY'</span>;
      }
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">initStatus</span> = <span class="hljs-string">'âŒ SDKåˆå§‹åŒ–å¤±è´¥'</span>;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">sdkVersion</span> = <span class="hljs-title class_">String</span>(error);
    }
  }

  <span class="hljs-title function_">build</span>(<span class="hljs-params"/>) {
    <span class="hljs-title class_">Column</span>() {
      <span class="hljs-title class_">Text</span>(<span class="hljs-string">'é«˜å¾·åœ°å›¾SDKé…ç½®æ£€æµ‹'</span>)
        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">24</span>)
        .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Bold</span>)
        .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">top</span>: <span class="hljs-number">50</span>, <span class="hljs-attr">bottom</span>: <span class="hljs-number">30</span> })

      <span class="hljs-title class_">Column</span>() {
        <span class="hljs-title class_">Text</span>(<span class="hljs-string">'åˆå§‹åŒ–çŠ¶æ€'</span>)
          .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">16</span>)
          .<span class="hljs-title function_">fontColor</span>(<span class="hljs-string">'#666'</span>)
        <span class="hljs-title class_">Text</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">initStatus</span>)
          .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">18</span>)
          .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Medium</span>)
          .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">top</span>: <span class="hljs-number">8</span> })
      }
      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'90%'</span>)
      .<span class="hljs-title function_">padding</span>(<span class="hljs-number">20</span>)
      .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#f5f5f5'</span>)
      .<span class="hljs-title function_">borderRadius</span>(<span class="hljs-number">12</span>)
      .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">bottom</span>: <span class="hljs-number">20</span> })

      <span class="hljs-title class_">Column</span>() {
        <span class="hljs-title class_">Text</span>(<span class="hljs-string">'SDKä¿¡æ¯'</span>)
          .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">16</span>)
          .<span class="hljs-title function_">fontColor</span>(<span class="hljs-string">'#666'</span>)
        <span class="hljs-title class_">Text</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">sdkVersion</span>)
          .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">14</span>)
          .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">top</span>: <span class="hljs-number">8</span> })
      }
      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'90%'</span>)
      .<span class="hljs-title function_">padding</span>(<span class="hljs-number">20</span>)
      .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#f5f5f5'</span>)
      .<span class="hljs-title function_">borderRadius</span>(<span class="hljs-number">12</span>)

      <span class="hljs-title class_">Text</span>(<span class="hljs-string">'å®Œæˆé…ç½®åï¼Œè¯·ç»§ç»­å­¦ä¹ ä¸‹ä¸€ç¯‡æ•™ç¨‹'</span>)
        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">14</span>)
        .<span class="hljs-title function_">fontColor</span>(<span class="hljs-string">'#999'</span>)
        .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">top</span>: <span class="hljs-number">40</span> })
    }
    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)
    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)
    .<span class="hljs-title function_">justifyContent</span>(<span class="hljs-title class_">FlexAlign</span>.<span class="hljs-property">Start</span>)
  }
}
</code></pre>
<h3 data-id="heading-19">8. è¿è¡Œæµ‹è¯•</h3>
<ol>
<li>è¿æ¥çœŸæœºæˆ–å¯åŠ¨æ¨¡æ‹Ÿå™¨</li>
<li>ç‚¹å‡»è¿è¡ŒæŒ‰é’®</li>
<li>æŸ¥çœ‹é¡µé¢ä¸Šçš„çŠ¶æ€æ˜¾ç¤º</li>
<li>å¦‚æœæ˜¾ç¤º"SDKé…ç½®æˆåŠŸ"ï¼Œè¯´æ˜é…ç½®å®Œæˆ</li>
</ol>
<h3 data-id="heading-20">å¸¸è§é—®é¢˜</h3>
<h4 data-id="heading-21">Q1: å®‰è£…ä¾èµ–å¤±è´¥ï¼Ÿ</h4>
<p>A: æ£€æŸ¥ç½‘ç»œè¿æ¥ï¼Œç¡®ä¿ohpmæºå¯è®¿é—®ã€‚ä¹Ÿå¯ä»¥å°è¯•æ¸…é™¤ç¼“å­˜åé‡æ–°å®‰è£…ã€‚</p>
<h4 data-id="heading-22">Q2: API Keyæ— æ•ˆï¼Ÿ</h4>
<p>A: æ£€æŸ¥ä»¥ä¸‹å‡ ç‚¹ï¼š</p>
<ul>
<li>Keyæ˜¯å¦å·²å¯ç”¨</li>
<li>Package Nameæ˜¯å¦ä¸é¡¹ç›®bundleNameä¸€è‡´</li>
<li>SHA256æŒ‡çº¹æ˜¯å¦æ­£ç¡®</li>
</ul>
<h4 data-id="heading-23">Q3: éšç§æ”¿ç­–å¿…é¡»è°ƒç”¨å—ï¼Ÿ</h4>
<p>A: æ˜¯çš„ï¼Œè¿™æ˜¯é«˜å¾·SDKçš„åˆè§„è¦æ±‚ï¼Œä¸è°ƒç”¨å°†æ— æ³•æ­£å¸¸ä½¿ç”¨SDKåŠŸèƒ½ã€‚</p>
<h3 data-id="heading-24">æœ¬ç¯‡å°ç»“</h3>
<p>æœ¬ç¯‡æ•™ç¨‹æˆ‘ä»¬å®Œæˆäº†ï¼š</p>
<ul>
<li>âœ… é«˜å¾·åœ°å›¾SDKçš„å®‰è£…</li>
<li>âœ… API Keyçš„ç”³è¯·å’Œé…ç½®</li>
<li>âœ… éšç§æ”¿ç­–çš„åˆè§„è°ƒç”¨</li>
<li>âœ… å¿…è¦æƒé™çš„å£°æ˜</li>
</ul>
<p>ä¸‹ä¸€ç¯‡æˆ‘ä»¬å°†å­¦ä¹ å¦‚ä½•æ˜¾ç¤ºç¬¬ä¸€ä¸ªåœ°å›¾ç•Œé¢ã€‚
<a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.huawei.com%2Fconsumer%2Fcn%2Ftraining%2FclassDetail%2Ffd34ff9286174e848d34cde7f512ce22%3Ftype%3D1%253Fha_source%253Dhmosclass%26ha_sourceId%3D89000248" target="_blank" title="https://developer.huawei.com/consumer/cn/training/classDetail/fd34ff9286174e848d34cde7f512ce22?type=1%3Fha_source%3Dhmosclass&amp;ha_sourceId=89000248" ref="nofollow noopener noreferrer">developer.huawei.com/consumer/cnâ€¦</a></p>
<h3 data-id="heading-25">æºä»£ç åœ°å€</h3>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgitcode.com%2Fdaleishen%2Fgaodehmjiaocheng.git" target="_blank" title="https://gitcode.com/daleishen/gaodehmjiaocheng.git" ref="nofollow noopener noreferrer">gitcode.com/daleishen/gâ€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[HarmonyOSä¸­å¼€å‘é«˜å¾·åœ°å›¾ç¬¬äº”ç¯‡ï¼šå®šä½è“ç‚¹åŠŸèƒ½]]></title>    <link>https://juejin.cn/post/7580233527285088306</link>    <guid>https://juejin.cn/post/7580233527285088306</guid>    <pubDate>2025-12-06T04:26:12.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7580233527285088306" data-draft-id="7580259796668366894" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="HarmonyOSä¸­å¼€å‘é«˜å¾·åœ°å›¾ç¬¬äº”ç¯‡ï¼šå®šä½è“ç‚¹åŠŸèƒ½"/> <meta itemprop="keywords" content="HarmonyOS"/> <meta itemprop="datePublished" content="2025-12-06T04:26:12.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§é›·ç¥"/> <meta itemprop="url" content="https://juejin.cn/user/1688498113884839"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            HarmonyOSä¸­å¼€å‘é«˜å¾·åœ°å›¾ç¬¬äº”ç¯‡ï¼šå®šä½è“ç‚¹åŠŸèƒ½
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1688498113884839/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§é›·ç¥
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-06T04:26:12.000Z" title="Sat Dec 06 2025 04:26:12 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ç¬¬äº”ç¯‡ï¼šå®šä½è“ç‚¹åŠŸèƒ½</h2>
<p>æœ¬ç¯‡æ•™ç¨‹å°†å­¦ä¹ å¦‚ä½•åœ¨åœ°å›¾ä¸Šæ˜¾ç¤ºç”¨æˆ·å½“å‰ä½ç½®ï¼ˆå®šä½è“ç‚¹ï¼‰ï¼ŒåŒ…æ‹¬æƒé™ç”³è¯·ã€å®šä½æ ·å¼è‡ªå®šä¹‰ç­‰ã€‚</p>
<h3 data-id="heading-1">å­¦ä¹ ç›®æ ‡</h3>
<ul>
<li>ç”³è¯·å®šä½æƒé™</li>
<li>æ˜¾ç¤ºå®šä½è“ç‚¹</li>
<li>è‡ªå®šä¹‰å®šä½è“ç‚¹æ ·å¼</li>
<li>ç†è§£ä¸åŒçš„å®šä½æ¨¡å¼</li>
</ul>
<h3 data-id="heading-2">1. å®šä½æƒé™é…ç½®</h3>
<h4 data-id="heading-3">1.1 module.json5 æƒé™å£°æ˜</h4>
<pre><code class="hljs language-json5" lang="json5">{
  "module": {
    "requestPermissions": [
      {
        "name": "ohos.permission.LOCATION",
        "reason": "$string:permission_location_reason",
        "usedScene": {
          "abilities": ["EntryAbility"],
          "when": "inuse"
        }
      },
      {
        "name": "ohos.permission.APPROXIMATELY_LOCATION",
        "reason": "$string:permission_location_reason",
        "usedScene": {
          "abilities": ["EntryAbility"],
          "when": "inuse"
        }
      }
    ]
  }
}
</code></pre>
<h4 data-id="heading-4">1.2 æƒé™è¯´æ˜</h4>

















<table><thead><tr><th>æƒé™</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>ohos.permission.LOCATION</code></td><td>ç²¾ç¡®å®šä½æƒé™</td></tr><tr><td><code>ohos.permission.APPROXIMATELY_LOCATION</code></td><td>æ¨¡ç³Šå®šä½æƒé™</td></tr></tbody></table>
<p><strong>æ³¨æ„</strong>: ç”³è¯·ç²¾ç¡®å®šä½æ—¶å¿…é¡»åŒæ—¶ç”³è¯·æ¨¡ç³Šå®šä½æƒé™ã€‚</p>
<h3 data-id="heading-5">2. å®šä½æ¨¡å¼è¯´æ˜</h3>
<p><code>MyLocationStyle</code> æä¾›äº†å¤šç§å®šä½æ¨¡å¼ï¼š</p>


















































<table><thead><tr><th>æ¨¡å¼</th><th>å¸¸é‡</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>åªå±•ç¤º</td><td><code>LOCATION_TYPE_SHOW</code></td><td>åªæ˜¾ç¤ºä½ç½®ï¼Œä¸ç§»åŠ¨åœ°å›¾</td></tr><tr><td>å®šä½ä¸€æ¬¡</td><td><code>LOCATION_TYPE_LOCATE</code></td><td>å®šä½ä¸€æ¬¡å¹¶ç§»åŠ¨åˆ°è¯¥ä½ç½®</td></tr><tr><td>è·Ÿéš</td><td><code>LOCATION_TYPE_FOLLOW</code></td><td>æŒç»­è·Ÿéšä½ç½®ç§»åŠ¨</td></tr><tr><td>åœ°å›¾æ—‹è½¬</td><td><code>LOCATION_TYPE_MAP_ROTATE</code></td><td>åœ°å›¾éšæ‰‹æœºæ–¹å‘æ—‹è½¬</td></tr><tr><td>å®šä½ç‚¹æ—‹è½¬</td><td><code>LOCATION_TYPE_LOCATION_ROTATE</code></td><td>å®šä½ç‚¹éšæ–¹å‘æ—‹è½¬</td></tr><tr><td>è·Ÿéšä¸ç§»ä¸­å¿ƒ</td><td><code>LOCATION_TYPE_FOLLOW_NO_CENTER</code></td><td>è·Ÿéšä½†ä¸ç§»åŠ¨åœ°å›¾ä¸­å¿ƒ</td></tr><tr><td>åœ°å›¾æ—‹è½¬ä¸ç§»ä¸­å¿ƒ</td><td><code>LOCATION_TYPE_MAP_ROTATE_NO_CENTER</code></td><td>åœ°å›¾æ—‹è½¬ä½†ä¸ç§»ä¸­å¿ƒ</td></tr><tr><td>å®šä½ç‚¹æ—‹è½¬ä¸ç§»ä¸­å¿ƒ</td><td><code>LOCATION_TYPE_LOCATION_ROTATE_NO_CENTER</code></td><td>å®šä½ç‚¹æ—‹è½¬ä½†ä¸ç§»ä¸­å¿ƒ</td></tr></tbody></table>
<h3 data-id="heading-6">3. å®Œæ•´ä»£ç ç¤ºä¾‹</h3>
<p>åˆ›å»ºæ–‡ä»¶ <code>entry/src/main/ets/pages/Demo04_Location.ets</code>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> {
  <span class="hljs-title class_">AMap</span>,
  <span class="hljs-title class_">MapView</span>,
  <span class="hljs-title class_">MapViewComponent</span>,
  <span class="hljs-title class_">MapViewManager</span>,
  <span class="hljs-title class_">MapViewCreateCallback</span>,
  <span class="hljs-title class_">CameraUpdateFactory</span>,
  <span class="hljs-title class_">LatLng</span>,
  <span class="hljs-title class_">MyLocationStyle</span>,
  <span class="hljs-title class_">BitmapDescriptorFactory</span>,
  <span class="hljs-title class_">OnLocationChangedListener</span>
} <span class="hljs-keyword">from</span> <span class="hljs-string">'@amap/amap_lbs_map3d'</span>;
<span class="hljs-keyword">import</span> { abilityAccessCtrl, bundleManager, common, <span class="hljs-title class_">Permissions</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;
<span class="hljs-keyword">import</span> { geoLocationManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.LocationKit'</span>;

<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">MAP_VIEW_NAME</span> = <span class="hljs-string">'LocationDemo'</span>;

<span class="hljs-comment">// è·å–åº”ç”¨ä¸Šä¸‹æ–‡</span>
<span class="hljs-keyword">let</span> <span class="hljs-attr">globalContext</span>: <span class="hljs-title class_">Context</span>;

<span class="hljs-comment">/**
 * å®šä½æ¨¡å¼é€‰é¡¹
 */</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">LocationModeOption</span> {
  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">mode</span>: <span class="hljs-built_in">number</span>;
}

<span class="hljs-meta">@Entry</span>
<span class="hljs-meta">@Component</span>
struct <span class="hljs-title class_">Demo04</span>_Location {
  <span class="hljs-keyword">private</span> <span class="hljs-attr">mapView</span>: <span class="hljs-title class_">MapView</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-literal">undefined</span>;
  <span class="hljs-keyword">private</span> <span class="hljs-attr">aMap</span>: <span class="hljs-title class_">AMap</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-literal">undefined</span>;
  <span class="hljs-keyword">private</span> <span class="hljs-attr">locationStyle</span>: <span class="hljs-title class_">MyLocationStyle</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyLocationStyle</span>();
  <span class="hljs-keyword">private</span> <span class="hljs-attr">locationIntervalId</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;
  
  <span class="hljs-meta">@State</span> <span class="hljs-attr">isMapReady</span>: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">false</span>;
  <span class="hljs-meta">@State</span> <span class="hljs-attr">hasLocationPermission</span>: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">false</span>;
  <span class="hljs-meta">@State</span> <span class="hljs-attr">isLocationEnabled</span>: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">false</span>;
  <span class="hljs-meta">@State</span> <span class="hljs-attr">currentMode</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'åªå±•ç¤º'</span>;
  <span class="hljs-meta">@State</span> <span class="hljs-attr">locationInfo</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'ç­‰å¾…å®šä½...'</span>;
  <span class="hljs-meta">@State</span> <span class="hljs-attr">permissionStatus</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'æ£€æŸ¥æƒé™ä¸­...'</span>;
  
  <span class="hljs-comment">// å®šä½æ¨¡å¼é€‰é¡¹</span>
  <span class="hljs-keyword">private</span> <span class="hljs-attr">locationModes</span>: <span class="hljs-title class_">LocationModeOption</span>[] = [
    { <span class="hljs-attr">name</span>: <span class="hljs-string">'åªå±•ç¤º'</span>, <span class="hljs-attr">mode</span>: <span class="hljs-title class_">MyLocationStyle</span>.<span class="hljs-property">LOCATION_TYPE_SHOW</span> },
    { <span class="hljs-attr">name</span>: <span class="hljs-string">'å®šä½ä¸€æ¬¡'</span>, <span class="hljs-attr">mode</span>: <span class="hljs-title class_">MyLocationStyle</span>.<span class="hljs-property">LOCATION_TYPE_LOCATE</span> },
    { <span class="hljs-attr">name</span>: <span class="hljs-string">'è·Ÿéš'</span>, <span class="hljs-attr">mode</span>: <span class="hljs-title class_">MyLocationStyle</span>.<span class="hljs-property">LOCATION_TYPE_FOLLOW</span> },
    { <span class="hljs-attr">name</span>: <span class="hljs-string">'åœ°å›¾æ—‹è½¬'</span>, <span class="hljs-attr">mode</span>: <span class="hljs-title class_">MyLocationStyle</span>.<span class="hljs-property">LOCATION_TYPE_MAP_ROTATE</span> },
    { <span class="hljs-attr">name</span>: <span class="hljs-string">'å®šä½ç‚¹æ—‹è½¬'</span>, <span class="hljs-attr">mode</span>: <span class="hljs-title class_">MyLocationStyle</span>.<span class="hljs-property">LOCATION_TYPE_LOCATION_ROTATE</span> }
  ];

  <span class="hljs-keyword">private</span> <span class="hljs-attr">mapViewCreateCallback</span>: <span class="hljs-title class_">MapViewCreateCallback</span> = 
    <span class="hljs-function">(<span class="hljs-params">mapview: MapView | <span class="hljs-literal">undefined</span>, mapViewName: <span class="hljs-built_in">string</span> | <span class="hljs-literal">undefined</span></span>) =&gt;</span> {
      <span class="hljs-keyword">if</span> (!mapview || mapViewName !== <span class="hljs-variable constant_">MAP_VIEW_NAME</span>) <span class="hljs-keyword">return</span>;

      <span class="hljs-variable language_">this</span>.<span class="hljs-property">mapView</span> = mapview;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">mapView</span>.<span class="hljs-title function_">onCreate</span>();
      
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">mapView</span>.<span class="hljs-title function_">getMapAsync</span>(<span class="hljs-keyword">async</span> (<span class="hljs-attr">map</span>: <span class="hljs-title class_">AMap</span>) =&gt; {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">aMap</span> = map;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">isMapReady</span> = <span class="hljs-literal">true</span>;
        
        <span class="hljs-comment">// å¯ç”¨ç¼©æ”¾æ§ä»¶</span>
        map.<span class="hljs-title function_">getUiSettings</span>()?.<span class="hljs-title function_">setZoomControlsEnabled</span>(<span class="hljs-literal">true</span>);
        
        <span class="hljs-comment">// æ£€æŸ¥æƒé™å¹¶é…ç½®å®šä½</span>
        <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">checkAndRequestPermission</span>();
      });
    };

  <span class="hljs-comment">/**
   * æ£€æŸ¥å¹¶è¯·æ±‚å®šä½æƒé™
   */</span>
  <span class="hljs-keyword">private</span> <span class="hljs-keyword">async</span> <span class="hljs-title function_">checkAndRequestPermission</span>(): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt; {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> <span class="hljs-attr">permission</span>: <span class="hljs-title class_">Permissions</span> = <span class="hljs-string">'ohos.permission.LOCATION'</span>;
      <span class="hljs-keyword">const</span> grantStatus = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">checkAccessToken</span>(permission);
      
      <span class="hljs-keyword">if</span> (grantStatus === abilityAccessCtrl.<span class="hljs-property">GrantStatus</span>.<span class="hljs-property">PERMISSION_GRANTED</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">hasLocationPermission</span> = <span class="hljs-literal">true</span>;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">permissionStatus</span> = <span class="hljs-string">'âœ… å®šä½æƒé™å·²æˆäºˆ'</span>;
        <span class="hljs-comment">// é…ç½®å®šä½</span>
        <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">configureLocation</span>();
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">permissionStatus</span> = <span class="hljs-string">'â³ æ­£åœ¨è¯·æ±‚æƒé™...'</span>;
        <span class="hljs-comment">// è¯·æ±‚æƒé™</span>
        <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">requestPermissions</span>();
      }
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'[Location] Permission check failed:'</span>, error);
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">permissionStatus</span> = <span class="hljs-string">'âŒ æƒé™æ£€æŸ¥å¤±è´¥'</span>;
    }
  }

  <span class="hljs-comment">/**
   * æ£€æŸ¥æƒé™çŠ¶æ€
   */</span>
  <span class="hljs-keyword">private</span> <span class="hljs-keyword">async</span> <span class="hljs-title function_">checkAccessToken</span>(<span class="hljs-attr">permission</span>: <span class="hljs-title class_">Permissions</span>): <span class="hljs-title class_">Promise</span>&lt;abilityAccessCtrl.<span class="hljs-property">GrantStatus</span>&gt; {
    <span class="hljs-keyword">const</span> atManager = abilityAccessCtrl.<span class="hljs-title function_">createAtManager</span>();
    <span class="hljs-keyword">let</span> grantStatus = abilityAccessCtrl.<span class="hljs-property">GrantStatus</span>.<span class="hljs-property">PERMISSION_DENIED</span>;
    
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> bundleInfo = <span class="hljs-keyword">await</span> bundleManager.<span class="hljs-title function_">getBundleInfoForSelf</span>(
        bundleManager.<span class="hljs-property">BundleFlag</span>.<span class="hljs-property">GET_BUNDLE_INFO_WITH_APPLICATION</span>
      );
      <span class="hljs-keyword">const</span> tokenId = bundleInfo.<span class="hljs-property">appInfo</span>.<span class="hljs-property">accessTokenId</span>;
      grantStatus = <span class="hljs-keyword">await</span> atManager.<span class="hljs-title function_">checkAccessToken</span>(tokenId, permission);
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'[Location] Check token failed:'</span>, error);
    }
    
    <span class="hljs-keyword">return</span> grantStatus;
  }

  <span class="hljs-comment">/**
   * è¯·æ±‚æƒé™
   */</span>
  <span class="hljs-keyword">private</span> <span class="hljs-keyword">async</span> <span class="hljs-title function_">requestPermissions</span>(): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt; {
    <span class="hljs-keyword">const</span> <span class="hljs-attr">permissions</span>: <span class="hljs-title class_">Permissions</span>[] = [
      <span class="hljs-string">'ohos.permission.APPROXIMATELY_LOCATION'</span>,
      <span class="hljs-string">'ohos.permission.LOCATION'</span>
    ];
    
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> context = <span class="hljs-title function_">getContext</span>(<span class="hljs-variable language_">this</span>) <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;
      <span class="hljs-keyword">const</span> atManager = abilityAccessCtrl.<span class="hljs-title function_">createAtManager</span>();
      
      <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> atManager.<span class="hljs-title function_">requestPermissionsFromUser</span>(context, permissions);
      
      <span class="hljs-keyword">const</span> allGranted = result.<span class="hljs-property">authResults</span>.<span class="hljs-title function_">every</span>(<span class="hljs-function"><span class="hljs-params">status</span> =&gt;</span> status === <span class="hljs-number">0</span>);
      
      <span class="hljs-keyword">if</span> (allGranted) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">hasLocationPermission</span> = <span class="hljs-literal">true</span>;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">permissionStatus</span> = <span class="hljs-string">'âœ… å®šä½æƒé™å·²æˆäºˆ'</span>;
        <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">configureLocation</span>();
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">hasLocationPermission</span> = <span class="hljs-literal">false</span>;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">permissionStatus</span> = <span class="hljs-string">'âŒ ç”¨æˆ·æ‹’ç»äº†å®šä½æƒé™'</span>;
      }
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'[Location] Request permission failed:'</span>, error);
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">permissionStatus</span> = <span class="hljs-string">'âŒ æƒé™è¯·æ±‚å¤±è´¥'</span>;
    }
  }

  <span class="hljs-comment">/**
   * é…ç½®å®šä½è“ç‚¹
   */</span>
  <span class="hljs-keyword">private</span> <span class="hljs-keyword">async</span> <span class="hljs-title function_">configureLocation</span>(): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt; {
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">aMap</span>) <span class="hljs-keyword">return</span>;
    
    <span class="hljs-keyword">try</span> {
      <span class="hljs-comment">// è®¾ç½®å®šä½æ ·å¼</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">locationStyle</span>.<span class="hljs-title function_">myLocationType</span>(<span class="hljs-title class_">MyLocationStyle</span>.<span class="hljs-property">LOCATION_TYPE_SHOW</span>);
      
      <span class="hljs-comment">// è‡ªå®šä¹‰å®šä½å›¾æ ‡ï¼ˆå¯é€‰ï¼‰</span>
      <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">const</span> icon = <span class="hljs-keyword">await</span> <span class="hljs-title class_">BitmapDescriptorFactory</span>.<span class="hljs-title function_">fromRawfilePath</span>(
          globalContext,
          <span class="hljs-string">'location_icon.png'</span>
        );
        <span class="hljs-keyword">if</span> (icon) {
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">locationStyle</span>.<span class="hljs-title function_">myLocationIcon</span>(icon);
        }
      } <span class="hljs-keyword">catch</span> (e) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'[Location] Using default location icon'</span>);
      }
      
      <span class="hljs-comment">// è®¾ç½®ç²¾åº¦åœˆæ ·å¼</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">locationStyle</span>.<span class="hljs-title function_">strokeColor</span>(<span class="hljs-number">0x800000FF</span>);  <span class="hljs-comment">// è¾¹æ¡†é¢œè‰²ï¼ˆå¸¦é€æ˜åº¦çš„è“è‰²ï¼‰</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">locationStyle</span>.<span class="hljs-title function_">strokeWidth</span>(<span class="hljs-number">2</span>);            <span class="hljs-comment">// è¾¹æ¡†å®½åº¦</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">locationStyle</span>.<span class="hljs-title function_">radiusFillColor</span>(<span class="hljs-number">0x200000FF</span>); <span class="hljs-comment">// å¡«å……é¢œè‰²</span>
      
      <span class="hljs-comment">// åº”ç”¨æ ·å¼</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">aMap</span>.<span class="hljs-title function_">setMyLocationStyle</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">locationStyle</span>);
      
      <span class="hljs-comment">// è®¾ç½®å®šä½æ•°æ®æº</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">aMap</span>.<span class="hljs-title function_">setLocationSource</span>(<span class="hljs-variable language_">this</span>);
      
      <span class="hljs-comment">// å¯ç”¨å®šä½å›¾å±‚</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">aMap</span>.<span class="hljs-title function_">setMyLocationEnabled</span>(<span class="hljs-literal">true</span>);
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">isLocationEnabled</span> = <span class="hljs-literal">true</span>;
      
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">locationInfo</span> = <span class="hljs-string">'å®šä½å·²å¯ç”¨ï¼Œç­‰å¾…ä½ç½®æ›´æ–°...'</span>;
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'[Location] Location configured successfully'</span>);
      
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'[Location] Configure location failed:'</span>, error);
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">locationInfo</span> = <span class="hljs-string">'å®šä½é…ç½®å¤±è´¥'</span>;
    }
  }

  <span class="hljs-comment">/**
   * LocationSourceæ¥å£å®ç° - æ¿€æ´»å®šä½
   */</span>
  <span class="hljs-title function_">activate</span>(<span class="hljs-attr">listener</span>: <span class="hljs-title class_">OnLocationChangedListener</span>): <span class="hljs-built_in">void</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'[Location] activate called'</span>);
    
    <span class="hljs-comment">// ä½¿ç”¨ç³»ç»Ÿå®šä½è·å–ä½ç½®</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">startSystemLocation</span>(listener);
  }

  <span class="hljs-comment">/**
   * LocationSourceæ¥å£å®ç° - åœç”¨å®šä½
   */</span>
  <span class="hljs-title function_">deactivate</span>(): <span class="hljs-built_in">void</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'[Location] deactivate called'</span>);
    
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">locationIntervalId</span> &gt; <span class="hljs-number">0</span>) {
      <span class="hljs-built_in">clearInterval</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">locationIntervalId</span>);
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">locationIntervalId</span> = <span class="hljs-number">0</span>;
    }
  }

  <span class="hljs-comment">/**
   * å¯åŠ¨ç³»ç»Ÿå®šä½
   */</span>
  <span class="hljs-keyword">private</span> <span class="hljs-title function_">startSystemLocation</span>(<span class="hljs-attr">listener</span>: <span class="hljs-title class_">OnLocationChangedListener</span>): <span class="hljs-built_in">void</span> {
    <span class="hljs-comment">// å®šä½è¯·æ±‚é…ç½®</span>
    <span class="hljs-keyword">const</span> <span class="hljs-attr">requestInfo</span>: geoLocationManager.<span class="hljs-property">CurrentLocationRequest</span> = {
      <span class="hljs-attr">priority</span>: geoLocationManager.<span class="hljs-property">LocationRequestPriority</span>.<span class="hljs-property">FIRST_FIX</span>,
      <span class="hljs-attr">scenario</span>: geoLocationManager.<span class="hljs-property">LocationRequestScenario</span>.<span class="hljs-property">UNSET</span>,
      <span class="hljs-attr">maxAccuracy</span>: <span class="hljs-number">100</span>
    };
    
    <span class="hljs-comment">// è·å–å½“å‰ä½ç½®</span>
    geoLocationManager.<span class="hljs-title function_">getCurrentLocation</span>(requestInfo)
      .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">location: geoLocationManager.Location</span>) =&gt;</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'[Location] Got location:'</span>, location.<span class="hljs-property">latitude</span>, location.<span class="hljs-property">longitude</span>);
        
        <span class="hljs-comment">// è½¬æ¢ä¸ºé«˜å¾·å®šä½æ ¼å¼</span>
        <span class="hljs-keyword">const</span> <span class="hljs-attr">amapLocation</span>: geoLocationManager.<span class="hljs-property">Location</span> = {
          <span class="hljs-attr">latitude</span>: location.<span class="hljs-property">latitude</span>,
          <span class="hljs-attr">longitude</span>: location.<span class="hljs-property">longitude</span>,
          <span class="hljs-attr">altitude</span>: location.<span class="hljs-property">altitude</span>,
          <span class="hljs-attr">accuracy</span>: location.<span class="hljs-property">accuracy</span>,
          <span class="hljs-attr">speed</span>: location.<span class="hljs-property">speed</span>,
          <span class="hljs-attr">direction</span>: location.<span class="hljs-property">direction</span>,
          <span class="hljs-attr">timeStamp</span>: location.<span class="hljs-property">timeStamp</span>,
          <span class="hljs-attr">timeSinceBoot</span>: location.<span class="hljs-property">timeSinceBoot</span>,
          <span class="hljs-attr">altitudeAccuracy</span>: location.<span class="hljs-property">altitudeAccuracy</span> || <span class="hljs-number">0</span>,
          <span class="hljs-attr">speedAccuracy</span>: location.<span class="hljs-property">speedAccuracy</span> || <span class="hljs-number">0</span>,
          <span class="hljs-attr">directionAccuracy</span>: location.<span class="hljs-property">directionAccuracy</span> || <span class="hljs-number">0</span>,
          <span class="hljs-attr">uncertaintyOfTimeSinceBoot</span>: location.<span class="hljs-property">uncertaintyOfTimeSinceBoot</span> || <span class="hljs-number">0</span>,
          <span class="hljs-attr">sourceType</span>: location.<span class="hljs-property">sourceType</span> || <span class="hljs-number">1</span>
        };
        
        <span class="hljs-comment">// æ›´æ–°ä½ç½®åˆ°åœ°å›¾</span>
        listener.<span class="hljs-title function_">onLocationChanged</span>(amapLocation);
        
        <span class="hljs-comment">// æ›´æ–°UIæ˜¾ç¤º</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">locationInfo</span> = <span class="hljs-string">`ç»åº¦: <span class="hljs-subst">${location.longitude.toFixed(<span class="hljs-number">6</span>)}</span>\nçº¬åº¦: <span class="hljs-subst">${location.latitude.toFixed(<span class="hljs-number">6</span>)}</span>\nç²¾åº¦: <span class="hljs-subst">${location.accuracy?.toFixed(<span class="hljs-number">0</span>) || <span class="hljs-string">'æœªçŸ¥'</span>}</span>ç±³`</span>;
        
        <span class="hljs-comment">// ç§»åŠ¨åœ°å›¾åˆ°å½“å‰ä½ç½®</span>
        <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">aMap</span>) {
          <span class="hljs-keyword">const</span> latLng = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LatLng</span>(location.<span class="hljs-property">latitude</span>, location.<span class="hljs-property">longitude</span>);
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">aMap</span>.<span class="hljs-title function_">moveCamera</span>(<span class="hljs-title class_">CameraUpdateFactory</span>.<span class="hljs-title function_">newLatLngZoom</span>(latLng, <span class="hljs-number">16</span>));
        }
      })
      .<span class="hljs-keyword">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'[Location] Get location failed:'</span>, error.<span class="hljs-property">message</span>);
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">locationInfo</span> = <span class="hljs-string">'è·å–ä½ç½®å¤±è´¥: '</span> + error.<span class="hljs-property">message</span>;
        
        <span class="hljs-comment">// ä½¿ç”¨æ¨¡æ‹Ÿä½ç½®ï¼ˆå¼€å‘æµ‹è¯•ç”¨ï¼‰</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">useSimulatedLocation</span>(listener);
      });
    
    <span class="hljs-comment">// è®¾ç½®å®šæ—¶æ›´æ–°ï¼ˆå¯é€‰ï¼‰</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">locationIntervalId</span> === <span class="hljs-number">0</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">locationIntervalId</span> = <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> {
        geoLocationManager.<span class="hljs-title function_">getCurrentLocation</span>(requestInfo)
          .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">location</span>) =&gt;</span> {
            <span class="hljs-keyword">const</span> <span class="hljs-attr">amapLocation</span>: geoLocationManager.<span class="hljs-property">Location</span> = {
              <span class="hljs-attr">latitude</span>: location.<span class="hljs-property">latitude</span>,
              <span class="hljs-attr">longitude</span>: location.<span class="hljs-property">longitude</span>,
              <span class="hljs-attr">altitude</span>: location.<span class="hljs-property">altitude</span>,
              <span class="hljs-attr">accuracy</span>: location.<span class="hljs-property">accuracy</span>,
              <span class="hljs-attr">speed</span>: location.<span class="hljs-property">speed</span>,
              <span class="hljs-attr">direction</span>: location.<span class="hljs-property">direction</span>,
              <span class="hljs-attr">timeStamp</span>: location.<span class="hljs-property">timeStamp</span>,
              <span class="hljs-attr">timeSinceBoot</span>: location.<span class="hljs-property">timeSinceBoot</span>,
              <span class="hljs-attr">altitudeAccuracy</span>: location.<span class="hljs-property">altitudeAccuracy</span> || <span class="hljs-number">0</span>,
              <span class="hljs-attr">speedAccuracy</span>: location.<span class="hljs-property">speedAccuracy</span> || <span class="hljs-number">0</span>,
              <span class="hljs-attr">directionAccuracy</span>: location.<span class="hljs-property">directionAccuracy</span> || <span class="hljs-number">0</span>,
              <span class="hljs-attr">uncertaintyOfTimeSinceBoot</span>: location.<span class="hljs-property">uncertaintyOfTimeSinceBoot</span> || <span class="hljs-number">0</span>,
              <span class="hljs-attr">sourceType</span>: location.<span class="hljs-property">sourceType</span> || <span class="hljs-number">1</span>
            };
            listener.<span class="hljs-title function_">onLocationChanged</span>(amapLocation);
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">locationInfo</span> = <span class="hljs-string">`ç»åº¦: <span class="hljs-subst">${location.longitude.toFixed(<span class="hljs-number">6</span>)}</span>\nçº¬åº¦: <span class="hljs-subst">${location.latitude.toFixed(<span class="hljs-number">6</span>)}</span>\nç²¾åº¦: <span class="hljs-subst">${location.accuracy?.toFixed(<span class="hljs-number">0</span>) || <span class="hljs-string">'æœªçŸ¥'</span>}</span>ç±³`</span>;
          })
          .<span class="hljs-keyword">catch</span>(<span class="hljs-function">() =&gt;</span> {});
      }, <span class="hljs-number">5000</span>);
    }
  }

  <span class="hljs-comment">/**
   * ä½¿ç”¨æ¨¡æ‹Ÿä½ç½®ï¼ˆå¼€å‘æµ‹è¯•ç”¨ï¼‰
   */</span>
  <span class="hljs-keyword">private</span> <span class="hljs-title function_">useSimulatedLocation</span>(<span class="hljs-attr">listener</span>: <span class="hljs-title class_">OnLocationChangedListener</span>): <span class="hljs-built_in">void</span> {
    <span class="hljs-comment">// æ¨¡æ‹ŸåŒ—äº¬ä½ç½®</span>
    <span class="hljs-keyword">const</span> <span class="hljs-attr">simulatedLocation</span>: geoLocationManager.<span class="hljs-property">Location</span> = {
      <span class="hljs-attr">latitude</span>: <span class="hljs-number">39.909187</span>,
      <span class="hljs-attr">longitude</span>: <span class="hljs-number">116.397451</span>,
      <span class="hljs-attr">altitude</span>: <span class="hljs-number">50</span>,
      <span class="hljs-attr">accuracy</span>: <span class="hljs-number">100</span>,
      <span class="hljs-attr">speed</span>: <span class="hljs-number">0</span>,
      <span class="hljs-attr">direction</span>: <span class="hljs-number">0</span>,
      <span class="hljs-attr">timeStamp</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>(),
      <span class="hljs-attr">timeSinceBoot</span>: <span class="hljs-number">0</span>,
      <span class="hljs-attr">altitudeAccuracy</span>: <span class="hljs-number">0</span>,
      <span class="hljs-attr">speedAccuracy</span>: <span class="hljs-number">0</span>,
      <span class="hljs-attr">directionAccuracy</span>: <span class="hljs-number">0</span>,
      <span class="hljs-attr">uncertaintyOfTimeSinceBoot</span>: <span class="hljs-number">0</span>,
      <span class="hljs-attr">sourceType</span>: <span class="hljs-number">1</span>
    };
    
    listener.<span class="hljs-title function_">onLocationChanged</span>(simulatedLocation);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">locationInfo</span> = <span class="hljs-string">`[æ¨¡æ‹Ÿ] ç»åº¦: <span class="hljs-subst">${simulatedLocation.longitude.toFixed(<span class="hljs-number">6</span>)}</span>\nçº¬åº¦: <span class="hljs-subst">${simulatedLocation.latitude.toFixed(<span class="hljs-number">6</span>)}</span>`</span>;
    
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">aMap</span>) {
      <span class="hljs-keyword">const</span> latLng = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LatLng</span>(simulatedLocation.<span class="hljs-property">latitude</span>, simulatedLocation.<span class="hljs-property">longitude</span>);
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">aMap</span>.<span class="hljs-title function_">moveCamera</span>(<span class="hljs-title class_">CameraUpdateFactory</span>.<span class="hljs-title function_">newLatLngZoom</span>(latLng, <span class="hljs-number">16</span>));
    }
  }

  <span class="hljs-comment">/**
   * åˆ‡æ¢å®šä½æ¨¡å¼
   */</span>
  <span class="hljs-keyword">private</span> <span class="hljs-title function_">setLocationMode</span>(<span class="hljs-attr">option</span>: <span class="hljs-title class_">LocationModeOption</span>): <span class="hljs-built_in">void</span> {
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">aMap</span>) <span class="hljs-keyword">return</span>;
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">locationStyle</span>.<span class="hljs-title function_">myLocationType</span>(option.<span class="hljs-property">mode</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">aMap</span>.<span class="hljs-title function_">setMyLocationStyle</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">locationStyle</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentMode</span> = option.<span class="hljs-property">name</span>;
    
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'[Location] Mode changed to:'</span>, option.<span class="hljs-property">name</span>);
  }

  <span class="hljs-comment">/**
   * åˆ‡æ¢å®šä½å¼€å…³
   */</span>
  <span class="hljs-keyword">private</span> <span class="hljs-title function_">toggleLocation</span>(): <span class="hljs-built_in">void</span> {
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">aMap</span>) <span class="hljs-keyword">return</span>;
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">isLocationEnabled</span> = !<span class="hljs-variable language_">this</span>.<span class="hljs-property">isLocationEnabled</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">aMap</span>.<span class="hljs-title function_">setMyLocationEnabled</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">isLocationEnabled</span>);
    
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">isLocationEnabled</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">locationInfo</span> = <span class="hljs-string">'å®šä½å·²å…³é—­'</span>;
    }
  }

  <span class="hljs-title function_">aboutToAppear</span>(): <span class="hljs-built_in">void</span> {
    globalContext = <span class="hljs-title function_">getContext</span>(<span class="hljs-variable language_">this</span>).<span class="hljs-title function_">getApplicationContext</span>();
    <span class="hljs-title class_">MapViewManager</span>.<span class="hljs-title function_">getInstance</span>()
      .<span class="hljs-title function_">registerMapViewCreatedCallback</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">mapViewCreateCallback</span>);
  }

  <span class="hljs-title function_">aboutToDisappear</span>(): <span class="hljs-built_in">void</span> {
    <span class="hljs-comment">// åœæ­¢å®šä½æ›´æ–°</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">locationIntervalId</span> &gt; <span class="hljs-number">0</span>) {
      <span class="hljs-built_in">clearInterval</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">locationIntervalId</span>);
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">locationIntervalId</span> = <span class="hljs-number">0</span>;
    }
    
    <span class="hljs-comment">// å…³é—­å®šä½</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">aMap</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">aMap</span>.<span class="hljs-title function_">setMyLocationEnabled</span>(<span class="hljs-literal">false</span>);
    }
    
    <span class="hljs-title class_">MapViewManager</span>.<span class="hljs-title function_">getInstance</span>()
      .<span class="hljs-title function_">unregisterMapViewCreatedCallback</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">mapViewCreateCallback</span>);
    
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">mapView</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">mapView</span>.<span class="hljs-title function_">onDestroy</span>();
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">mapView</span> = <span class="hljs-literal">undefined</span>;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">aMap</span> = <span class="hljs-literal">undefined</span>;
    }
  }

  <span class="hljs-title function_">build</span>(<span class="hljs-params"/>) {
    <span class="hljs-title class_">Column</span>() {
      <span class="hljs-comment">// æ ‡é¢˜æ </span>
      <span class="hljs-title class_">Row</span>() {
        <span class="hljs-title class_">Text</span>(<span class="hljs-string">'å®šä½è“ç‚¹åŠŸèƒ½'</span>)
          .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">18</span>)
          .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Bold</span>)
          .<span class="hljs-title function_">fontColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">White</span>)
      }
      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)
      .<span class="hljs-title function_">height</span>(<span class="hljs-number">50</span>)
      .<span class="hljs-title function_">padding</span>({ <span class="hljs-attr">left</span>: <span class="hljs-number">16</span> })
      .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#03A9F4'</span>)

      <span class="hljs-comment">// åœ°å›¾åŒºåŸŸ</span>
      <span class="hljs-title class_">Stack</span>() {
        <span class="hljs-title class_">MapViewComponent</span>({ <span class="hljs-attr">mapViewName</span>: <span class="hljs-variable constant_">MAP_VIEW_NAME</span> })
          .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)
          .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)
        
        <span class="hljs-comment">// çŠ¶æ€ä¿¡æ¯é¢æ¿</span>
        <span class="hljs-title class_">Column</span>() {
          <span class="hljs-title class_">Text</span>(<span class="hljs-string">'å®šä½çŠ¶æ€'</span>)
            .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">12</span>)
            .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Bold</span>)
            .<span class="hljs-title function_">fontColor</span>(<span class="hljs-string">'#333'</span>)
          <span class="hljs-title class_">Text</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">permissionStatus</span>)
            .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">11</span>)
            .<span class="hljs-title function_">fontColor</span>(<span class="hljs-string">'#666'</span>)
            .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">top</span>: <span class="hljs-number">4</span> })
          <span class="hljs-title class_">Text</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">locationInfo</span>)
            .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">11</span>)
            .<span class="hljs-title function_">fontColor</span>(<span class="hljs-string">'#666'</span>)
            .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">top</span>: <span class="hljs-number">4</span> })
          <span class="hljs-title class_">Text</span>(<span class="hljs-string">`å½“å‰æ¨¡å¼: <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.currentMode}</span>`</span>)
            .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">11</span>)
            .<span class="hljs-title function_">fontColor</span>(<span class="hljs-string">'#2196F3'</span>)
            .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">top</span>: <span class="hljs-number">4</span> })
        }
        .<span class="hljs-title function_">padding</span>(<span class="hljs-number">10</span>)
        .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'rgba(255,255,255,0.95)'</span>)
        .<span class="hljs-title function_">borderRadius</span>(<span class="hljs-number">8</span>)
        .<span class="hljs-title function_">position</span>({ <span class="hljs-attr">x</span>: <span class="hljs-number">10</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">10</span> })
        .<span class="hljs-title function_">alignItems</span>(<span class="hljs-title class_">HorizontalAlign</span>.<span class="hljs-property">Start</span>)
      }
      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)
      .<span class="hljs-title function_">layoutWeight</span>(<span class="hljs-number">1</span>)

      <span class="hljs-comment">// æ§åˆ¶é¢æ¿</span>
      <span class="hljs-title class_">Column</span>() {
        <span class="hljs-comment">// å®šä½å¼€å…³</span>
        <span class="hljs-title class_">Row</span>() {
          <span class="hljs-title class_">Text</span>(<span class="hljs-string">'å®šä½è“ç‚¹'</span>)
            .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">14</span>)
            .<span class="hljs-title function_">fontColor</span>(<span class="hljs-string">'#333'</span>)
          <span class="hljs-title class_">Blank</span>()
          <span class="hljs-title class_">Toggle</span>({ <span class="hljs-attr">type</span>: <span class="hljs-title class_">ToggleType</span>.<span class="hljs-property">Switch</span>, <span class="hljs-attr">isOn</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">isLocationEnabled</span> })
            .<span class="hljs-title function_">enabled</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">hasLocationPermission</span>)
            .<span class="hljs-title function_">onChange</span>(<span class="hljs-function">(<span class="hljs-params">isOn: <span class="hljs-built_in">boolean</span></span>) =&gt;</span> {
              <span class="hljs-variable language_">this</span>.<span class="hljs-property">isLocationEnabled</span> = isOn;
              <span class="hljs-variable language_">this</span>.<span class="hljs-property">aMap</span>?.<span class="hljs-title function_">setMyLocationEnabled</span>(isOn);
            })
        }
        .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)
        .<span class="hljs-title function_">height</span>(<span class="hljs-number">44</span>)
        .<span class="hljs-title function_">padding</span>({ <span class="hljs-attr">left</span>: <span class="hljs-number">12</span>, <span class="hljs-attr">right</span>: <span class="hljs-number">12</span> })
        .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">White</span>)
        .<span class="hljs-title function_">borderRadius</span>(<span class="hljs-number">8</span>)
        .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">bottom</span>: <span class="hljs-number">8</span> })

        <span class="hljs-comment">// å®šä½æ¨¡å¼é€‰æ‹©</span>
        <span class="hljs-title class_">Text</span>(<span class="hljs-string">'å®šä½æ¨¡å¼'</span>)
          .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">14</span>)
          .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Bold</span>)
          .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)
          .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">bottom</span>: <span class="hljs-number">8</span> })

        <span class="hljs-title class_">Flex</span>({ <span class="hljs-attr">wrap</span>: <span class="hljs-title class_">FlexWrap</span>.<span class="hljs-property">Wrap</span> }) {
          <span class="hljs-title class_">ForEach</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">locationModes</span>, <span class="hljs-function">(<span class="hljs-params">option: LocationModeOption</span>) =&gt;</span> {
            <span class="hljs-title class_">Button</span>(option.<span class="hljs-property">name</span>)
              .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">11</span>)
              .<span class="hljs-title function_">height</span>(<span class="hljs-number">32</span>)
              .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">currentMode</span> === option.<span class="hljs-property">name</span> ? <span class="hljs-string">'#03A9F4'</span> : <span class="hljs-string">'#e0e0e0'</span>)
              .<span class="hljs-title function_">fontColor</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">currentMode</span> === option.<span class="hljs-property">name</span> ? <span class="hljs-title class_">Color</span>.<span class="hljs-property">White</span> : <span class="hljs-string">'#333'</span>)
              .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">right</span>: <span class="hljs-number">6</span>, <span class="hljs-attr">bottom</span>: <span class="hljs-number">6</span> })
              .<span class="hljs-title function_">enabled</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">hasLocationPermission</span> &amp;&amp; <span class="hljs-variable language_">this</span>.<span class="hljs-property">isLocationEnabled</span>)
              .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setLocationMode</span>(option))
          })
        }

        <span class="hljs-comment">// é‡æ–°å®šä½æŒ‰é’®</span>
        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'é‡æ–°å®šä½'</span>)
          .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)
          .<span class="hljs-title function_">height</span>(<span class="hljs-number">40</span>)
          .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">top</span>: <span class="hljs-number">8</span> })
          .<span class="hljs-title function_">enabled</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">hasLocationPermission</span>)
          .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">configureLocation</span>())
      }
      .<span class="hljs-title function_">padding</span>(<span class="hljs-number">12</span>)
      .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#f5f5f5'</span>)
    }
    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)
    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)
  }
}
</code></pre>
<h3 data-id="heading-7">4. MyLocationStyle å®Œæ•´API</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyLocationStyle</span> {
  <span class="hljs-comment">// è®¾ç½®å®šä½æ¨¡å¼</span>
  <span class="hljs-title function_">myLocationType</span>(<span class="hljs-attr">type</span>: <span class="hljs-built_in">number</span>): <span class="hljs-title class_">MyLocationStyle</span>;
  
  <span class="hljs-comment">// è®¾ç½®å®šä½å›¾æ ‡</span>
  <span class="hljs-title function_">myLocationIcon</span>(<span class="hljs-attr">icon</span>: <span class="hljs-title class_">BitmapDescriptor</span>): <span class="hljs-title class_">MyLocationStyle</span>;
  
  <span class="hljs-comment">// è®¾ç½®å®šä½é—´éš”ï¼ˆæ¯«ç§’ï¼‰</span>
  <span class="hljs-title function_">interval</span>(<span class="hljs-attr">interval</span>: <span class="hljs-built_in">number</span>): <span class="hljs-title class_">MyLocationStyle</span>;
  
  <span class="hljs-comment">// ç²¾åº¦åœˆè¾¹æ¡†é¢œè‰²</span>
  <span class="hljs-title function_">strokeColor</span>(<span class="hljs-attr">color</span>: <span class="hljs-built_in">number</span>): <span class="hljs-title class_">MyLocationStyle</span>;
  
  <span class="hljs-comment">// ç²¾åº¦åœˆè¾¹æ¡†å®½åº¦</span>
  <span class="hljs-title function_">strokeWidth</span>(<span class="hljs-attr">width</span>: <span class="hljs-built_in">number</span>): <span class="hljs-title class_">MyLocationStyle</span>;
  
  <span class="hljs-comment">// ç²¾åº¦åœˆå¡«å……é¢œè‰²</span>
  <span class="hljs-title function_">radiusFillColor</span>(<span class="hljs-attr">color</span>: <span class="hljs-built_in">number</span>): <span class="hljs-title class_">MyLocationStyle</span>;
  
  <span class="hljs-comment">// æ˜¯å¦æ˜¾ç¤ºç²¾åº¦åœˆ</span>
  <span class="hljs-title function_">showMyLocation</span>(<span class="hljs-attr">show</span>: <span class="hljs-built_in">boolean</span>): <span class="hljs-title class_">MyLocationStyle</span>;
}
</code></pre>
<h3 data-id="heading-8">5. é¢œè‰²å€¼è¯´æ˜</h3>
<p>é«˜å¾·åœ°å›¾ä½¿ç”¨ARGBæ ¼å¼çš„é¢œè‰²å€¼ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// æ ¼å¼: 0xAARRGGBB</span>
<span class="hljs-comment">// AA: é€æ˜åº¦ (00=å®Œå…¨é€æ˜, FF=å®Œå…¨ä¸é€æ˜)</span>
<span class="hljs-comment">// RR: çº¢è‰²</span>
<span class="hljs-comment">// GG: ç»¿è‰²</span>
<span class="hljs-comment">// BB: è“è‰²</span>

<span class="hljs-comment">// ç¤ºä¾‹</span>
<span class="hljs-number">0x800000FF</span>  <span class="hljs-comment">// åŠé€æ˜è“è‰²</span>
<span class="hljs-number">0x200000FF</span>  <span class="hljs-comment">// è¾ƒé€æ˜çš„è“è‰²</span>
<span class="hljs-number">0xFF00FF00</span>  <span class="hljs-comment">// ä¸é€æ˜ç»¿è‰²</span>
</code></pre>
<h3 data-id="heading-9">6. å®ç”¨æŠ€å·§</h3>
<h4 data-id="heading-10">6.1 åˆ¤æ–­å®šä½æœåŠ¡æ˜¯å¦å¯ç”¨</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { geoLocationManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.LocationKit'</span>;

<span class="hljs-keyword">const</span> isEnabled = geoLocationManager.<span class="hljs-title function_">isLocationEnabled</span>();
<span class="hljs-keyword">if</span> (!isEnabled) {
  <span class="hljs-comment">// æç¤ºç”¨æˆ·å¼€å¯å®šä½æœåŠ¡</span>
}
</code></pre>
<h4 data-id="heading-11">6.2 å¼•å¯¼ç”¨æˆ·å¼€å¯æƒé™</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;

<span class="hljs-comment">// è·³è½¬åˆ°åº”ç”¨è®¾ç½®é¡µé¢</span>
<span class="hljs-keyword">const</span> context = <span class="hljs-title function_">getContext</span>(<span class="hljs-variable language_">this</span>) <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;
<span class="hljs-keyword">const</span> <span class="hljs-attr">want</span>: common.<span class="hljs-property">Want</span> = {
  <span class="hljs-attr">bundleName</span>: <span class="hljs-string">'com.huawei.hmos.settings'</span>,
  <span class="hljs-attr">abilityName</span>: <span class="hljs-string">'com.huawei.hmos.settings.MainAbility'</span>,
  <span class="hljs-attr">uri</span>: <span class="hljs-string">'application_info_entry'</span>,
  <span class="hljs-attr">parameters</span>: {
    <span class="hljs-attr">pushParams</span>: context.<span class="hljs-property">abilityInfo</span>.<span class="hljs-property">bundleName</span>
  }
};
context.<span class="hljs-title function_">startAbility</span>(want);
</code></pre>
<h3 data-id="heading-12">æœ¬ç¯‡å°ç»“</h3>
<p>æœ¬ç¯‡æ•™ç¨‹æˆ‘ä»¬å­¦ä¹ äº†ï¼š</p>
<ul>
<li>âœ… å®šä½æƒé™çš„ç”³è¯·å’Œæ£€æŸ¥</li>
<li>âœ… å®šä½è“ç‚¹çš„æ˜¾ç¤ºä¸é…ç½®</li>
<li>âœ… å¤šç§å®šä½æ¨¡å¼çš„åˆ‡æ¢</li>
<li>âœ… è‡ªå®šä¹‰å®šä½è“ç‚¹æ ·å¼</li>
<li>âœ… LocationSourceæ¥å£å®ç°</li>
</ul>
<p>ä¸‹ä¸€ç¯‡æˆ‘ä»¬å°†å­¦ä¹ POIæœç´¢åŠŸèƒ½ã€‚</p>
<p>ç­çº§
<a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.huawei.com%2Fconsumer%2Fcn%2Ftraining%2FclassDetail%2Ffd34ff9286174e848d34cde7f512ce22%3Ftype%3D1%253Fha_source%253Dhmosclass%26ha_sourceId%3D89000248" target="_blank" title="https://developer.huawei.com/consumer/cn/training/classDetail/fd34ff9286174e848d34cde7f512ce22?type=1%3Fha_source%3Dhmosclass&amp;ha_sourceId=89000248" ref="nofollow noopener noreferrer">developer.huawei.com/consumer/cnâ€¦</a></p>
<p>æºç åœ°å€
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgitcode.com%2Fdaleishen%2Fgaodehmjiaocheng.git" target="_blank" title="https://gitcode.com/daleishen/gaodehmjiaocheng.git" ref="nofollow noopener noreferrer">gitcode.com/daleishen/gâ€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ‰‹å†™ä¸€ä¸ªwebpackæ’ä»¶ï¼ˆpluginï¼‰]]></title>    <link>https://juejin.cn/post/7580280096058720283</link>    <guid>https://juejin.cn/post/7580280096058720283</guid>    <pubDate>2025-12-06T04:41:52.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7580280096058720283" data-draft-id="7580280096058703899" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ‰‹å†™ä¸€ä¸ªwebpackæ’ä»¶ï¼ˆpluginï¼‰"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-06T04:41:52.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°æ˜è®°è´¦ç°¿_å¾®ä¿¡å°ç¨‹åº"/> <meta itemprop="url" content="https://juejin.cn/user/1901536389893546"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ‰‹å†™ä¸€ä¸ªwebpackæ’ä»¶ï¼ˆpluginï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1901536389893546/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°æ˜è®°è´¦ç°¿_å¾®ä¿¡å°ç¨‹åº
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-06T04:41:52.000Z" title="Sat Dec 06 2025 04:41:52 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(1turn)}}.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#36ace1;background-image:linear-gradient(90deg,rgba(217,234,251,.25) 3%,transparent 0),linear-gradient(1turn,rgba(217,234,251,.25) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{color:#36ace1}.markdown-body h1:before,.markdown-body h2:before,.markdown-body h3:before,.markdown-body h4:before,.markdown-body h5:before,.markdown-body h6:before{content:"";display:block;position:absolute;left:0;top:0;bottom:0;margin:auto;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAF8UlEQVRIS71Wa2wUVRT+7r0zu9t2t/RBaSioPCpYbIUfaEIQUogSAwZDAlUSGwgg/CBATExMCJH1D2hIfOEjFEUEhViCgBgIUCH44OkjPAMGBVqhpUCfW3Zn5z7MuQOE0hYxMdxJdmd25s53vnO+851leMCLPWA8/CfA2TsvL8n7q+nTFfNLG+4VqInHOeJLDQMzdz/3r4DGGDb9lxu+aPcE7U61JHDMDePcuv0O21ShugOefqDdtBie3Dk6K/O+Ab+qOjJiz7Ahv6c8hbDDwRiQlgYGDOcaWyEcjg8On+j71IpJndjGt9XO+jM7+pkywNvbazIfercieSdoJ4bE5sWjyZqMpDdeaQNXMNC34ME3LV8B56+1w3AOgk+EXe/Ub6uiLB6XdH/G/mYjeBCcFwnt3zQqWt4t4NjjnhzQ1CGkBhwOCMFAB71U0qsYgRlwBtQ1tiEJAy44OBdQUmFK3aWS06NLT+ukZAQoKCCjsfbDmk6p78RwX3ncWffmIj8U4kh6GpEwh+9rGy23LDU4GBrrm9DsuDYIGMAYIC/EUNQ7Cq1hn+WM2TI8f+jEyCmvjfn1FssuojHx6tDkyZOaCzr8TNpASzDAk8amlRIrEylcSGsYrcGIstIYWhgDDIM2BiGH3ywFkGAC1U9n38bpVqWGdk6r4HMWrZZaG1D5KLn0qYyBEAKnG1otAxLR8L7Z9nfP13CJHQ/ST4vK8sVHe8JsU0U6uO5hlexo8PI7vNDQomwoBRAwpSmtgJAAztS3QLsOsmBQlBtFJMQhlbbPUBBUR7o2hqHVddLbRsfCPQJ+u3TPw8uGl1yklAlHIJZKo3//XEhlLCtifPFyM7xwCI/lZ8IKTTBbS7pPLIggZZsSQ+zXbT4UYSsnet3UMM5HPT5LGbrDGYQroClyT2Jwnyj9aN949e8mDCwuRFoqKxRHUJ21BSDRELuQYGhvbMVV32Dp2RuxcfHSRBfAYTsbU9nJdFj5EiLkglHkRInC1xoxKbH9hQJIaTDvxxTCUddWl4wg0dCCtqSPDmoVx4Eitpxh64ZtsT6b5ie6pPRkfF90TllxOzEwmipMKRRgHODGgCuJkqIcvDdC2BZ5Y+tlHHMzkAKghbAxcQqQDiKrFBxhqg5MHTivS1tQ+sdsvaQl5Yd6yfdRXNQLsQwXnq/AQFLXEIIjzBSuNaaR0SuEtkQKl9IKjAsbJaWfzo1USDsM6zceDJfeVGgnhhN2N7YOyo5kJz1pa2AbgfrO1gRwXW6vSRQNtddR+EhvKGmseskgTtY2Q7kucYWWgToPHzyUyXry0iXfnBtfl5f/PaWPvPNW/zkOAQegJHltFE5dSaCskHqPVEnqpMAMEgkPtR1pKxyh/N0/vTToubtH1G3RmLjhM8ubKXfWB2mRa9ySOaWS2uT8lTZ0cI6I52Ngv7zAbW9mQVm1cpytu441P38XeXTlQu+e46nyh+bjLkMZRU0MCYTCJWZSG1y7cBWNURpxBlxqFBfEwGnGGhaYPSNwhpSv4DK+/vPynBk9MqRIiOWs8a2WJTm9a+cgh6SaMIMz9W1WjYHHMtv0wSmZdWB9gdsya/rcYVg7JoffCdqlD6ceTpiY59tM0PhJp5WNvra+BQkejCMyBarr8KKYDcZi8sDaCDKYFIGRk+FnSVXzyTO9JxBwF8DLc1dlLn65ooNEYN0fBsu21fTvL6PXnhxXlnLIqqhYYBian4lQ2Lk9ogiALsimiLC1QYfhlV1Hnxh7JfcMqxrpd7U2GFa5t9nOd7Kr+kg4uWvnCpromlJeXlq3Os3ZLOlrZBmNQf1ybVqpxhbA7mRIOCy1+esDOWhIyDv/+3Q7LRbsqH+rKRJ+nba+/+WW7II1s9vvVBuNr7KNF1WUM1bSt5f1Vq01jUVkKfnx8uoti3Or5rbd9782M61azJz/rFywYU/OyKqK1p5G2MS1Z18tGFDwTkvIxcK9RwaMP3a9/tbc62lPj/Nw5B9ey9Ehy/MY4oEqelgNleuyCgdXJlmc3fO5Ll56r5f+n/f+AWFf9jvBgaHpAAAAAElFTkSuQmCC);animation:spin 2s linear 1s infinite}.markdown-body h1{position:relative;font-size:30px;padding:12px 38px;margin:30px 0}.markdown-body h1:before{width:30px;height:30px;background-size:30px 30px}.markdown-body h2{position:relative;font-size:24px;padding:12px 36px;margin:28px 0}.markdown-body h2:before{width:28px;height:28px;background-size:28px 28px}.markdown-body h3{position:relative;font-size:18px;padding:4px 32px;margin:26px 0}.markdown-body h3:before{width:24px;height:24px;background-size:24px 24px}.markdown-body h4{position:relative;padding:4px 28px;font-size:16px;margin:22px 0}.markdown-body h4:before{width:20px;height:20px;background-size:20px 20px}.markdown-body h5{position:relative;padding:4px 26px;font-size:15px;margin:20px 0}.markdown-body h5:before{width:18px;height:18px;background-size:18px 18px}.markdown-body h6{position:relative;padding:4px 22px;font-size:14px;margin:16px 0}.markdown-body h6:before{width:16px;height:16px;background-size:16px 16px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{position:relative;width:98%;height:1px;border:none;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,#36ace1,#dff0fe,#36ace1);overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:50px;height:24px;background:#fff;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAYAAACpSkzOAAAEgElEQVRIS72Va0xbZRjH/z2FcimbchEQFDYRCIRAAWFQ2MaCXBwmUxYDLGGEcRFkH9wmk04zG0Bo2dwNIisERANqhjqdEmhd4nRbuwpsXDYWLLoRgeG4Chu9QHvMOQ0dpTAKH3y/tDnv8/5/z/Oc//scBv6nxdgoJ14gVYPEuITHdTdHY12gRIH0T0KljlqwthqUFHGtzAEsxqwLtPvkdc+FeeI3BgMeAMEhdOqR1mM7xswBrgmKE8pfIUhtm7fbZsft/i7wc98MtrUFxmbU6ByYgFwxjtFp5Q+WpF1mCy9wajXoqqD4E91saOf603e+5B7t99xTkyZJEiKJAl2DE9Xio1HvrBS8IuhVwVUP503swdJ9QWAw1izaoDs6pQT/655BMS9yy3KYiUoM/7adu7NmtnQfx5zWm8Q8Ui3gyGcddyU8rv/STRNQouDGP5/mhTubX4dpPv3DMzh1qS9LwuPWr+i63WVyn5QYj/4d/i4bqmbpoQ+auvBlQYghX6PE4wTSOzV5EUYlb5Q4MDqLk9/3cMRF27spDSNQamUnWZ4ebNB+OKNCyYVeFCZ5wZ5tiePN/UiP2YoQL0cUX+iFt4sNUiLdcaVvHJLecQiWnKVE8s5LvxAXRWeYgHLre0hecgAN0sxr0XBZgbJUP6OiLnaM4ivZCBrzOWBZEIY9rY5E8pl2nM0KMzzLq5aPiXmRzgbQm2VyR8KGGK/ICAFB6IusbvsDwhRf+n/jtSHc/nsGgjR9V6/1TyLa1wGU+FtnO1CbHQTHTSzIFJOYJ1jwcGLTccMTcyhp7oW4KFJ/SV4/IScrc55kQj07WNuOn94Lpw8kCm/Qv3W5HLjbWxsyfuNUO1TzWjAJBloKt2FBS+Jz6ShiA12NupBdLWugQcmn28lPMkONNql3U5cTSD9Lq+qEUqPFt++G0aKL687wDAqb+pAU7IKCuK2493AOPQ9UCNpib6T1tkg+RZ9KKJcNn8sJc1vac8o16jklLWLuOiDqwvHUIKPw7vtTON+iCDKkl/Cx9FeSYET5um1mHt6jN0Dz9ftwYjORudNjTdaBmi7kxvvA1d6Gjs0X/Q5Sp3tMEMSHre9HnDEZAPFCWUNVdliGJVPvqEP1Hbh4yPj9LadSY6fu6gPsCX+B3mq7NYLv2od8fj4aoViMNQGFijos/XVMTXGavgUisQIle71hwVx9KFEutLVjw8GORTuxoEbeJS7iPrmQyy/sIj2hQpqYHO7ZGs95nnZS4y8K8Pfqrb58UZ+IlKqbqNgfQm8da+pC9xjLqo8foFkau2qaCeXSyvzXfA9SDrp1bxJ/DU/jSJKXEWdBR2J/9U0UpwXTFZ/+8S76h/71FvO4A8sTeuqQThDKalOiPLN3BbhiYlaNsm964elkCztrC4xMqeDqYIus2JdB3cbS5l4MTag44qJt9GxbF4gKThRKY59lW13+KCUQ1pZMEwHKviKx4pFSqXzxCn/X9Gr2NO+zw+cTiTbxmUyCqH3GlsWg2kRNhOnHmhlrFkIvHTZt1borWvMCmRnwH4usn58STiycAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center}.markdown-body del{color:#36ace1}.markdown-body code{font-family:Menlo,Monaco,Consolas,Courier New,monospace;word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#282c34;color:#4ec9b0;padding:.24em .46em;margin:0 4px}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-family:Menlo,Monaco,Consolas,Courier New,monospace;font-size:12px;border-radius:10px;padding:15px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#4ec9b0;background:#282c34}.markdown-body a{text-decoration:none;color:#409eff;border-bottom:1px solid #409eff}.markdown-body a:active,.markdown-body a:hover{color:#007bff;border-bottom:1px solid #007bff}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{position:relative;padding:8px 26px;background-color:rgba(54,172,225,.75);margin:16px 0;border-left:4px solid #409eff;border-radius:5px}.markdown-body blockquote:before{content:"â";top:10px;left:8px;color:#409eff;font-size:20px;line-height:1;font-weight:700;position:absolute;opacity:.7}.markdown-body blockquote:after{content:"â";font-size:20px;position:absolute;right:8px;bottom:0;color:#409eff;opacity:.7}.markdown-body blockquote&gt;p{color:#fff}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>ç†Ÿæ‚‰ vue å’Œ react çš„å°ä¼™ä¼´ä»¬éƒ½çŸ¥é“ï¼Œåœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ä¼šæœ‰å„ç§ç”Ÿå‘½å‘¨æœŸé’©å­ï¼Œå…¶å®webpackä¹Ÿä¸ä¾‹å¤–ï¼Œåœ¨ä½¿ç”¨webpackçš„æ—¶å€™ï¼Œæˆ‘ä»¬æœ‰æ—¶å€™éœ€è¦åœ¨ webpack æ„å»ºæµç¨‹ä¸­å¼•å…¥è‡ªå®šä¹‰çš„è¡Œä¸ºï¼Œè¿™ä¸ªæ—¶å€™å°±å¯ä»¥åœ¨ hooks é’©å­ä¸­æ·»åŠ è‡ªå·±çš„æ–¹æ³•ã€‚</p>
</blockquote>
<h3 data-id="heading-0">åˆ›å»ºæ’ä»¶</h3>
<p>webpack åŠ è½½ webpack.config.js ä¸­æ‰€æœ‰é…ç½®ï¼Œæ­¤æ—¶ webpack åˆ›å»º compiler å¯¹è±¡ï¼Œéå†æ‰€æœ‰ plugins ä¸­æ’ä»¶ï¼Œè°ƒç”¨æ’ä»¶çš„ apply æ–¹æ³•ï¼Œæ‰§è¡Œå‰©ä¸‹ç¼–è¯‘æµç¨‹ï¼ˆè§¦å‘å„ä¸ª hooks äº‹ä»¶ï¼‰ï¼Œå…·ä½“ä½¿ç”¨ä»€ä¹ˆé’©å­å’Œé’©å­æ˜¯åŒæ­¥è¿˜æ˜¯å¼‚æ­¥ï¼Œè¯·ç§»æ­¥<a href="https://link.juejin.cn?target=https%3A%2F%2Fwebpack.docschina.org%2Fapi%2Fcompiler-hooks%2F%23hooks" target="_blank" title="https://webpack.docschina.org/api/compiler-hooks/#hooks" ref="nofollow noopener noreferrer">compiler é’©å­</a></p>
<ol>
<li>åˆ›å»ºä¸€ä¸ª JavaScript å‘½åå‡½æ•°æˆ– JavaScript ç±»</li>
<li>åœ¨æ’ä»¶å‡½æ•°çš„ prototype ä¸Šå®šä¹‰ä¸€ä¸ª apply æ–¹æ³•</li>
<li>ç»‘å®šåˆ° webpack è‡ªèº«çš„äº‹ä»¶é’©å­ä¸Š</li>
<li>å¯¼å‡ºè¿™ä¸ªJavaScript å‘½åå‡½æ•°æˆ– JavaScript ç±»</li>
<li>åœ¨ webpack.config.js æ–‡ä»¶ä¸­å¼•å…¥å¹¶è°ƒç”¨æ–¹æ³•</li>
</ol>
<h3 data-id="heading-1">è‡ªå®šä¹‰ banner-webpack-plugin</h3>
<p>è‡ªå®šä¹‰ banner-webpack-plugin æ’ä»¶ï¼Œè¯¥æ’ä»¶ä¼šåœ¨æ¯ä¸€ä¸ªæ‰“åŒ…åçš„ js ã€css æ–‡ä»¶ç¬¬ä¸€è¡Œæ·»åŠ æ³¨é‡Šï¼Œå…ˆçœ‹æ•ˆæœå›¾ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/87cb2f2193c94165aac17835a8952857~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5piO6K6w6LSm57C_X-W-ruS_oeWwj-eoi-W6jw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765600912&amp;x-signature=p3%2Bghq4K0FeG2MN3MTNyDkJ2EtI%3D" alt="Snipaste_2023-05-22_21-09-41.png" loading="lazy"/></p>
<ul>
<li>emit é’©å­æ˜¯è¾“å‡º asset åˆ° output ç›®å½•ä¹‹å‰æ‰§è¡Œ</li>
<li>è·å–å³å°†è¾“å‡ºçš„èµ„æºæ–‡ä»¶ï¼šcompilation.assets</li>
<li>éå† assetsï¼Œåªå¤„ç†jså’Œcssèµ„æºï¼Œå…¶ä»–æ–‡ä»¶ä¸å¤„ç†</li>
<li>é€šè¿‡ content = entcompilation.assets[filename].source() è·å–åŸæ¥å†…å®¹</li>
<li>æ‹¼æ¥ä¸Šæ³¨é‡Š content = prefix + content</li>
<li>ä¿®æ”¹èµ„æºçš„ source å’Œ size</li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// plugins/banner-webpack-plugin.js</span>

<span class="hljs-keyword">class</span> <span class="hljs-title class_">BannerWebpackPlugin</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">options = {}</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span> = options;
  }

  <span class="hljs-title function_">apply</span>(<span class="hljs-params">compiler</span>) {
    <span class="hljs-comment">// åœ¨èµ„æºè¾“å‡ºä¹‹å‰è§¦å‘</span>
    compiler.<span class="hljs-property">hooks</span>.<span class="hljs-property">emit</span>.<span class="hljs-title function_">tap</span>(<span class="hljs-string">"BannerWebpackPlugin"</span>, <span class="hljs-function">(<span class="hljs-params">compilation</span>) =&gt;</span> {
      <span class="hljs-keyword">const</span> extensions = [<span class="hljs-string">"css"</span>, <span class="hljs-string">"js"</span>];
      <span class="hljs-keyword">const</span> prefix = <span class="hljs-string">`/*
          * Author: <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.options.author}</span>
          * Build Time: <span class="hljs-subst">${<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>()}</span>
          */
          `</span>;
      <span class="hljs-comment">// è·å–å³å°†è¾“å‡ºçš„èµ„æºæ–‡ä»¶ï¼šcompilation.assets</span>
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> filename <span class="hljs-keyword">in</span> compilation.<span class="hljs-property">assets</span>) {
        <span class="hljs-keyword">if</span> (compilation.<span class="hljs-property">assets</span>.<span class="hljs-title function_">hasOwnProperty</span>(filename)) {
          <span class="hljs-comment">// å°†æ–‡ä»¶åè¿›è¡Œåˆ‡å‰²</span>
          <span class="hljs-keyword">const</span> splitted = filename.<span class="hljs-title function_">split</span>(<span class="hljs-string">"."</span>);
          <span class="hljs-comment">// è·å–æ–‡ä»¶æ‰©å±•å</span>
          <span class="hljs-keyword">const</span> extension = splitted[splitted.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>];
          <span class="hljs-comment">// åªå¤„ç†jså’Œcssèµ„æºï¼Œå…¶ä»–æ–‡ä»¶ä¸å¤„ç†</span>
          <span class="hljs-keyword">if</span> (extensions.<span class="hljs-title function_">includes</span>(extension)) {
            <span class="hljs-keyword">const</span> asset = compilation.<span class="hljs-property">assets</span>[filename];
            <span class="hljs-comment">// è·å–åŸæ¥å†…å®¹</span>
            <span class="hljs-keyword">let</span> content = asset.<span class="hljs-title function_">source</span>();
            <span class="hljs-comment">// æ‹¼æ¥ä¸Šæ³¨é‡Š</span>
            content = prefix + content;
            <span class="hljs-comment">// ä¿®æ”¹èµ„æº</span>
            compilation.<span class="hljs-property">assets</span>[filename] = {
              <span class="hljs-comment">// æœ€ç»ˆèµ„æºè¾“å‡ºæ—¶ï¼Œè°ƒç”¨sourceæ–¹æ³•ï¼Œsourceæ–¹æ³•çš„è¿”å›å€¼å°±æ˜¯èµ„æºçš„å…·ä½“å†…å®¹</span>
              <span class="hljs-attr">source</span>: <span class="hljs-function">() =&gt;</span> content,
              <span class="hljs-comment">// èµ„æºå¤§å°</span>
              <span class="hljs-attr">size</span>: <span class="hljs-function">() =&gt;</span> content.<span class="hljs-property">length</span>,
            };
          }
        }
      }
    });
  }
}
<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = <span class="hljs-title class_">BannerWebpackPlugin</span>;
</code></pre>
<h4 data-id="heading-2">è°ƒç”¨ BannerWebpackPlugin</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// config/webpack.config.js</span>

<span class="hljs-comment">// å¼•å…¥æ’ä»¶</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">BannerWebpackPlugin</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">'../plugins/banner-webpack-plugin'</span>);
<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">plugins</span>: [
    <span class="hljs-comment">// è°ƒç”¨æ’ä»¶</span>
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">BannerWebpackPlugin</span>({
      <span class="hljs-attr">author</span>: <span class="hljs-string">"å°å°æ„¿æœ›"</span>,
    }),
  ],
};
</code></pre>
<h3 data-id="heading-3">è‡ªå®šä¹‰ take-time-webpack-plugin</h3>
<p>è‡ªå®šä¹‰ take-time-webpack-plugin æ’ä»¶ï¼Œè¯¥æ’ä»¶è¾“å‡º "webpack æ„å»ºæ­£åœ¨å¯åŠ¨ï¼"ï¼Œæ‰“åŒ…å®Œæˆåè¾“å‡º webpack æ„å»ºå·²å®Œæˆï¼æ€»è€—æ—¶ { time } msï¼Œå…ˆçœ‹æ•ˆæœå›¾ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0148eaa9df134e5c8c6fa4772c27fa39~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5piO6K6w6LSm57C_X-W-ruS_oeWwj-eoi-W6jw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765600912&amp;x-signature=eXrQbIcLmyFqgZAmbOhYmRVns%2Bg%3D" alt="Snipaste_2023-05-01_15-46-05.png" loading="lazy"/></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// plugins/take-time-webpack-plugin.js</span>

<span class="hljs-comment">// ä¸€ä¸ªå‘½åçš„ Javascript æ–¹æ³• æˆ– JavaScript ç±»</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">TakeTimeWebpackPlugin</span> {
  time = <span class="hljs-number">0</span>;
  <span class="hljs-comment">// åŸå‹ä¸Šéœ€è¦å®šä¹‰ apply çš„æ–¹æ³•</span>
  <span class="hljs-title function_">apply</span>(<span class="hljs-params">compiler</span>) {
    <span class="hljs-comment">// ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°ï¼Œæ˜¯ç”± compiler æš´éœ²</span>
    <span class="hljs-comment">// é€šè¿‡ compiler è·å– webpack å†…éƒ¨çš„é’©å­ï¼Œè·å– Webpack æ‰“åŒ…è¿‡ç¨‹ä¸­çš„å„ä¸ªé˜¶æ®µ</span>
    compiler.<span class="hljs-property">hooks</span>.<span class="hljs-property">environment</span>.<span class="hljs-title function_">tap</span>(<span class="hljs-string">"TakeTimeWebpackPlugin"</span>, <span class="hljs-function">(<span class="hljs-params">compilation</span>) =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"\x1B[36m"</span>, <span class="hljs-string">"webpack æ„å»ºæ­£åœ¨å¯åŠ¨ï¼"</span>);
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">time</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">getTime</span>();
    });
    <span class="hljs-comment">// é€šè¿‡ compiler è·å– webpack å†…éƒ¨çš„é’©å­ï¼Œè·å– Webpack æ‰“åŒ…è¿‡ç¨‹ä¸­çš„å„ä¸ªé˜¶æ®µ</span>
    compiler.<span class="hljs-property">hooks</span>.<span class="hljs-property">afterEmit</span>.<span class="hljs-title function_">tapAsync</span>(<span class="hljs-string">"TakeTimeWebpackPlugin"</span>, <span class="hljs-function">(<span class="hljs-params">compilation, callback</span>) =&gt;</span> {
      <span class="hljs-keyword">const</span> nowTime = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">getTime</span>();
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">time</span> = nowTime - <span class="hljs-variable language_">this</span>.<span class="hljs-property">time</span>;
      <span class="hljs-keyword">const</span> str = <span class="hljs-string">`webpack æ„å»ºå·²å®Œæˆï¼æ€»è€—æ—¶ <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.time}</span> ms`</span>
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"\x1B[32m"</span>, str);
      <span class="hljs-comment">// åˆ†ä¸ºåŒæ­¥å’Œå¼‚æ­¥çš„é’©å­ï¼Œå¼‚æ­¥é’©å­åœ¨åŠŸèƒ½å®Œæˆåï¼Œå¿…é¡»æ‰§è¡Œå¯¹åº”çš„å›è°ƒ</span>
      <span class="hljs-title function_">callback</span>();
    });
  }
}
<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = <span class="hljs-title class_">TakeTimeWebpackPlugin</span>;
</code></pre>
<h4 data-id="heading-4">è°ƒç”¨ TakeTimeWebpackPlugin</h4>
<p>åœ¨ config/webpack.config.js æ–‡ä»¶ä¸­å¼•å…¥å¹¶æ‰§è¡Œ TakeTimeWebpackPlugin</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// config/webpack.config.js</span>

<span class="hljs-comment">// å¼•å…¥æ’ä»¶</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">TakeTimeWebpackPlugin</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">'../plugins/take-time-webpack-plugin'</span>);
<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">plugins</span>: [
    <span class="hljs-comment">// è°ƒç”¨æ’ä»¶</span>
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">TakeTimeWebpackPlugin</span>(),
  ],
};
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‰ç«¯ä¸‹è½½å¤šä¸ªæ–‡ä»¶/æµè§ˆå™¨æ‰¹é‡ä¸‹è½½æ–‡ä»¶]]></title>    <link>https://juejin.cn/post/7580208715275993130</link>    <guid>https://juejin.cn/post/7580208715275993130</guid>    <pubDate>2025-12-06T05:46:37.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7580208715275993130" data-draft-id="7579229538792243206" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‰ç«¯ä¸‹è½½å¤šä¸ªæ–‡ä»¶/æµè§ˆå™¨æ‰¹é‡ä¸‹è½½æ–‡ä»¶"/> <meta itemprop="keywords" content="æµè§ˆå™¨,å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-06T05:46:37.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é­‚ç¥ˆæ¢¦"/> <meta itemprop="url" content="https://juejin.cn/user/1841010886858137"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‰ç«¯ä¸‹è½½å¤šä¸ªæ–‡ä»¶/æµè§ˆå™¨æ‰¹é‡ä¸‹è½½æ–‡ä»¶
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1841010886858137/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é­‚ç¥ˆæ¢¦
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-06T05:46:37.000Z" title="Sat Dec 06 2025 05:46:37 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">èƒŒæ™¯</h2>
<p>ä½¿ç”¨ä»¥ä¸‹ç®€å•çš„ä¸‹è½½æ–¹æ³•æ—¶ï¼Œä¼šå‘ç°åªæœ‰ç¬¬ä¸€ä¸ªæ–‡ä»¶è¢«ä¸‹è½½äº†ï¼Œè€Œä¸”æ²¡æœ‰ä»»ä½•æç¤ºã€‚</p>
<blockquote>
<p>ç”¨çš„Edgeï¼Œä½¿ç”¨ä»¥ä¸‹æ–¹æ³•ä¸‹è½½å¤šä¸ªæ–‡ä»¶æ²¡æœ‰ä»»ä½•æç¤ºã€‚<br/>
å¦‚æœç”¨è¿‡alistï¼Œä¼šå‘ç°é‚£é‡Œé¢çš„æ‰¹é‡ä¸‹è½½ä¹Ÿæ˜¯ä¸ªæ®‹åºŸåŠŸèƒ½ã€‚<br/>
åç»­çš„æ–¹æ³•ä¸»è¦æ˜¯é’ˆå¯¹äºæ²¡æœ‰æç¤ºçš„é—®é¢˜ã€‚</p>
</blockquote>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> a = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'a'</span>)
a.<span class="hljs-property">href</span> = url
a.<span class="hljs-property">download</span> = filename  <span class="hljs-comment">// æŒ‡å®šæ–‡ä»¶å</span>
<span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">appendChild</span>(a)
a.<span class="hljs-title function_">click</span>()
<span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">removeChild</span>(a)
</code></pre>
<h2 data-id="heading-1">åŸå› </h2>
<p>æµè§ˆå™¨å‡ºäºå®‰å…¨æˆ–ç”¨æˆ·ä½“éªŒé™åˆ¶ï¼Œé˜»æ­¢äº†â€œéç”¨æˆ·ç›´æ¥è§¦å‘â€çš„å¤šæ¬¡è‡ªåŠ¨ä¸‹è½½ã€‚<br/>
å•æ¬¡clickå¯¹åº”ä¸€æ¬¡ä¸‹è½½ï¼Œæµè§ˆå™¨å‘ç°ä½ åªç‚¹äº†ä¸€æ¬¡æŒ‰é’®ï¼Œå´è§¦å‘å¤šæ¬¡ä¸‹è½½ï¼Œäºæ˜¯é˜»æ­¢ã€‚</p>
<blockquote>
<p>å°¤å…¶æ˜¯ä½¿ç”¨å¦‚ä¸Šç®€å•ä»£ç ä¸‹è½½æ—¶ï¼Œå±…ç„¶è¿æç¤ºéƒ½æ²¡æœ‰è·³å‡ºæ¥ã€‚</p>
</blockquote>
<h2 data-id="heading-2">è§£å†³</h2>
<p>ä»»ä½•ä¸€ç§è§£å†³åŠæ³•éƒ½éœ€è¦ç”¨æˆ·åœ¨æµè§ˆå™¨ä¸Šå…è®¸ä¸‹è½½å¤šä¸ªæ–‡ä»¶ï¼Œé™¤éä½ æŠŠå¤šä¸ªæ–‡ä»¶æ‰“æˆå‹ç¼©åŒ…ï¼Œé¿å¼€è¿™ä¸ªé—®é¢˜ã€‚</p>
<h3 data-id="heading-3">ç›´æ¥ä¸‹è½½</h3>
<p>é€šè¿‡setTimeoutå¯ä»¥è§¦å‘æµè§ˆå™¨ä¸‹è½½å¤šä¸ªæ–‡ä»¶çš„æç¤ºã€‚</p>
<blockquote>
<p>ä¸è·³å‡ºä¸‹è½½å¤šæ–‡ä»¶çš„æç¤ºä¸æ˜¯æˆ‘çè¯´çš„ï¼Œæˆ‘é‡åˆ°è¿™ç§æƒ…å†µå¾ˆå¤šæ¬¡ï¼Œä¸‹é¢çš„è¿™ç§å»¶æ—¶ä¸‹è½½å¯ä»¥ç»•è¿‡è¿™ä¸ªé—®é¢˜ã€‚</p>
</blockquote>
<p>å¦‚æœåœ¨100msä»¥å†…ï¼Œä¾ç„¶åªä¸‹è½½ä¸€ä¸ªæ–‡ä»¶ã€‚ï¼ˆæˆ‘æ²¡è¯¦ç»†æµ‹è¿‡ï¼Œ200æ˜¯å¯ä»¥çš„ï¼‰
å½“ä¸ä½¿ç”¨setTimeoutæ—¶ï¼Œä¼šä½¿å¾—æµè§ˆå™¨å®Œå…¨ä¸è·³å‡ºå¤šæ–‡ä»¶ä¸‹è½½çš„æç¤ºï¼Œå¯¼è‡´ç”¨æˆ·ä¸ä¼šæˆæƒ
æœ€ç»ˆåæœå°±æ˜¯åªä¸‹è½½ç¬¬ä¸€ä¸ªæ–‡ä»¶</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> a = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'a'</span>)
  a.<span class="hljs-property">href</span> = url  <span class="hljs-comment">// ç›´æ¥ä½¿ç”¨åŸå§‹URLï¼Œè€ŒéBlob URL</span>
  a.<span class="hljs-property">download</span> = filename  <span class="hljs-comment">// æŒ‡å®šæ–‡ä»¶å</span>
  <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">appendChild</span>(a)
  a.<span class="hljs-title function_">click</span>()
  <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">removeChild</span>(a)
}, timeout)
timeout += <span class="hljs-number">200</span>
</code></pre>
<p>æ‰€æœ‰æ–‡ä»¶éƒ½å¼€å§‹ä¸‹è½½åï¼Œåº”è¯¥æ¸…ç©ºtimeoutã€‚</p>
<h3 data-id="heading-4">fetch + Blobï¼ˆæ¨èï¼‰</h3>
<p>ä¼˜ç‚¹ï¼šå¯¹äºè·¨åŸŸèµ„æºï¼Œä¹Ÿèƒ½å¤Ÿå®ç°è‡ªå®šä¹‰å‘½åã€‚</p>
<blockquote>
<p>è¿™ç§æ–¹å¼çš„ä¸»è¦ç¼ºç‚¹åœ¨äºç”¨æˆ·æ— æ³•çœ‹åˆ°ä¸‹è½½çš„è¿›åº¦æ¡ï¼Œå› ä¸ºæ²¡æœ‰è°ƒç”¨æµè§ˆå™¨çš„ä¸‹è½½å™¨è¿›è¡Œä¸‹è½½
æˆ–è€…è¯´éœ€è¦æ‰‹åŠ¨å®ç°ä¸‹è½½è¿›åº¦æ˜¾ç¤ºåŠŸèƒ½</p>
</blockquote>
<pre><code class="hljs language-js" lang="js"><span class="hljs-title function_">fetch</span>(url)
  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> res.<span class="hljs-title function_">blob</span>())
  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">blob</span> =&gt;</span> {
    <span class="hljs-keyword">const</span> url = <span class="hljs-variable constant_">URL</span>.<span class="hljs-title function_">createObjectURL</span>(blob);
    <span class="hljs-keyword">const</span> a = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'a'</span>);
    a.<span class="hljs-property">href</span> = url;
    a.<span class="hljs-property">download</span> = filename; <span class="hljs-comment">// âœ… ç”Ÿæ•ˆï¼å› ä¸ºæ˜¯ Blob URL</span>
    a.<span class="hljs-title function_">click</span>();
    <span class="hljs-variable constant_">URL</span>.<span class="hljs-title function_">revokeObjectURL</span>(url);
    <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">removeChild</span>(a)
  });
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[LiveData "æ•°æ®å€’çŒ"ï¼šä¸€ä¸ªæµè¡Œçš„é”™è¯¯æ¦‚å¿µ]]></title>    <link>https://juejin.cn/post/7580259796668383278</link>    <guid>https://juejin.cn/post/7580259796668383278</guid>    <pubDate>2025-12-06T04:30:46.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7580259796668383278" data-draft-id="7580259796668350510" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="LiveData &quot;æ•°æ®å€’çŒ&quot;ï¼šä¸€ä¸ªæµè¡Œçš„é”™è¯¯æ¦‚å¿µ"/> <meta itemprop="keywords" content="Android,Android Jetpack"/> <meta itemprop="datePublished" content="2025-12-06T04:30:46.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æœªæ¥çŒ«å’ªèŠ±"/> <meta itemprop="url" content="https://juejin.cn/user/1081575169340526"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            LiveData "æ•°æ®å€’çŒ"ï¼šä¸€ä¸ªæµè¡Œçš„é”™è¯¯æ¦‚å¿µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1081575169340526/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æœªæ¥çŒ«å’ªèŠ±
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-06T04:30:46.000Z" title="Sat Dec 06 2025 04:30:46 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    7
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>åœ¨ Android å¼€å‘ç¤¾åŒºä¸­ï¼Œä¸çŸ¥ä»ä½•æ—¶å¼€å§‹ï¼Œ"æ•°æ®å€’çŒ"è¿™ä¸ªè¯å·²ç»è¢«å¹¿æ³›ä¼ æ’­ï¼Œå¯èƒ½æ˜¯å› ä¸ºå‰å‡ å¹´æœ‰ä¸ª å‰²éŸ­èœçš„ Android å¸ƒé“å¸ˆçš„æ–‡ç« å½±å“çš„ï¼Œè®¸å¤šå¼€å‘è€…è®¤ä¸ºè¿™æ˜¯ LiveData çš„ä¸€ä¸ªè®¾è®¡ç¼ºé™·ã€‚ä½†äº‹å®ä¸Šï¼Œè¿™æ˜¯å¯¹ LiveData è®¾è®¡ç†å¿µçš„æ ¹æœ¬æ€§è¯¯è§£ã€‚æœ¬æ–‡å°†ä»è®¾è®¡åŸç†ã€ä½¿ç”¨åœºæ™¯å’Œæ¶æ„è§’åº¦ï¼Œç³»ç»Ÿåœ°çº æ­£è¿™ä¸ªé”™è¯¯æ¦‚å¿µã€‚</p>
<h2 data-id="heading-1">ä»€ä¹ˆæ˜¯æ‰€è°“çš„"æ•°æ®å€’çŒ"</h2>
<p>"æ•°æ®å€’çŒ"è¿™ä¸ªæœ¯è¯­æè¿°çš„æ˜¯ï¼šå½“ä¸€ä¸ªæ–°çš„ Observer è®¢é˜… LiveData æ—¶ï¼Œä¼šç«‹å³æ”¶åˆ°æœ€åä¸€æ¬¡ <code>setValue()</code> çš„å€¼ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">SharedViewModel</span> : <span class="hljs-type">ViewModel</span>() {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> _message = MutableLiveData&lt;String&gt;()
    <span class="hljs-keyword">val</span> message: LiveData&lt;String&gt; = _message
    
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">sendMessage</span><span class="hljs-params">(text: <span class="hljs-type">String</span>)</span></span> {
        _message.value = text
    }
}

<span class="hljs-comment">// Fragment A</span>
viewModel.sendMessage(<span class="hljs-string">"Hello"</span>)

<span class="hljs-comment">// Fragment Bï¼ˆç¨åè®¢é˜…ï¼‰</span>
viewModel.message.observe(viewLifecycleOwner) { msg -&gt;
    <span class="hljs-comment">// ä¼šç«‹å³æ”¶åˆ° "Hello"ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„"æ•°æ®å€’çŒ"</span>
    showToast(msg)
}
</code></pre>
<p>è®¸å¤šå¼€å‘è€…è®¤ä¸ºè¿™æ˜¯ä¸€ä¸ªéœ€è¦"ä¿®å¤"çš„é—®é¢˜ï¼Œä½†å®é™…ä¸Šï¼Œ<strong>è¿™æ˜¯ LiveData æœ€æ ¸å¿ƒçš„è®¾è®¡ç‰¹æ€§ä¹‹ä¸€</strong>ã€‚</p>
<h2 data-id="heading-2">ä¸ºä»€ä¹ˆè¿™ä¸æ˜¯é—®é¢˜ï¼Œè€Œæ˜¯ç‰¹æ€§</h2>
<h3 data-id="heading-3">1. LiveData çš„è®¾è®¡ç›®æ ‡</h3>
<p>LiveData çš„è®¾è®¡å‚è€ƒäº†å“åº”å¼ç¼–ç¨‹ä¸­çš„ <strong>BehaviorSubject</strong>ï¼Œå…¶æ ¸å¿ƒç‰¹ç‚¹å°±æ˜¯ï¼š</p>
<blockquote>
<p><strong>æ–°çš„è®¢é˜…è€…ä¼šç«‹å³è·å¾—æœ€æ–°çš„çŠ¶æ€</strong></p>
</blockquote>
<p>è¿™ä¸ªè®¾è®¡æ˜¯ä¸ºäº†è§£å†³ Android å¼€å‘ä¸­çš„æ ¸å¿ƒé—®é¢˜ï¼š</p>
<h4 data-id="heading-4">é…ç½®å˜æ›´æ—¶çš„çŠ¶æ€æ¢å¤</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">UserProfileViewModel</span> : <span class="hljs-type">ViewModel</span>() {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> _userProfile = MutableLiveData&lt;User&gt;()
    <span class="hljs-keyword">val</span> userProfile: LiveData&lt;User&gt; = _userProfile
    
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">loadUser</span><span class="hljs-params">(userId: <span class="hljs-type">String</span>)</span></span> {
        viewModelScope.launch {
            <span class="hljs-keyword">val</span> user = repository.getUser(userId)
            _userProfile.value = user <span class="hljs-comment">// åŠ è½½å®Œæˆï¼Œæ›´æ–°çŠ¶æ€</span>
        }
    }
}

<span class="hljs-comment">// Activity</span>
<span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreate</span><span class="hljs-params">(savedInstanceState: <span class="hljs-type">Bundle</span>?)</span></span> {
    <span class="hljs-keyword">super</span>.onCreate(savedInstanceState)
    
    <span class="hljs-comment">// é¦–æ¬¡åˆ›å»ºæ—¶åŠ è½½æ•°æ®</span>
    <span class="hljs-keyword">if</span> (savedInstanceState == <span class="hljs-literal">null</span>) {
        viewModel.loadUser(<span class="hljs-string">"123"</span>)
    }
    
    <span class="hljs-comment">// è®¢é˜…æ•°æ®</span>
    viewModel.userProfile.observe(<span class="hljs-keyword">this</span>) { user -&gt;
        <span class="hljs-comment">// åœºæ™¯1ï¼šé¦–æ¬¡åˆ›å»º - ç­‰å¾…æ•°æ®åŠ è½½å®Œæˆåæ˜¾ç¤º</span>
        <span class="hljs-comment">// åœºæ™¯2ï¼šå±å¹•æ—‹è½¬é‡å»º - ç«‹å³æ˜¾ç¤ºå·²åŠ è½½çš„æ•°æ®ï¼ˆæ‰€è°“çš„"å€’çŒ"ï¼‰</span>
        displayUser(user)
    }
}
</code></pre>
<p><strong>å¦‚æœæ²¡æœ‰è¿™ä¸ª"å€’çŒ"ç‰¹æ€§ï¼Œå±å¹•æ—‹è½¬åä½ çš„ UI å°†æ˜¯ç©ºç™½çš„</strong>ï¼Œå› ä¸ºæ–°çš„ Observer æ”¶ä¸åˆ°ä¹‹å‰å·²ç»åŠ è½½å¥½çš„æ•°æ®ã€‚</p>
<h3 data-id="heading-5">2. çŠ¶æ€ç®¡ç† vs äº‹ä»¶åˆ†å‘</h3>
<p>é—®é¢˜çš„æ ¹æºåœ¨äºï¼š<strong>å¾ˆå¤šå¼€å‘è€…æŠŠ LiveData å½“æˆäº†äº‹ä»¶æ€»çº¿ï¼ˆEventBusï¼‰æ¥ä½¿ç”¨</strong>ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// âŒ é”™è¯¯ç”¨æ³•ï¼šå°† LiveData ç”¨äºä¸€æ¬¡æ€§äº‹ä»¶</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MyViewModel</span> : <span class="hljs-type">ViewModel</span>() {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> _showToast = MutableLiveData&lt;String&gt;()
    <span class="hljs-keyword">val</span> showToast: LiveData&lt;String&gt; = _showToast
    
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onButtonClick</span><span class="hljs-params">()</span></span> {
        _showToast.value = <span class="hljs-string">"æ“ä½œæˆåŠŸ"</span>
    }
}

<span class="hljs-comment">// Fragment</span>
viewModel.showToast.observe(viewLifecycleOwner) { message -&gt;
    Toast.makeText(context, message, Toast.LENGTH_SHORT).show()
}
</code></pre>
<p>è¿™ä¸ªåœºæ™¯çš„é—®é¢˜æ˜¯ï¼š</p>
<ul>
<li>ç”¨æˆ·ç‚¹å‡»æŒ‰é’® â†’ æ˜¾ç¤º Toast âœ“</li>
<li>æ—‹è½¬å±å¹• â†’ å†æ¬¡æ˜¾ç¤º Toast âœ—ï¼ˆè¿™å°±æ˜¯æ‰€è°“çš„"æ•°æ®å€’çŒ"é—®é¢˜ï¼‰</li>
</ul>
<p>ä½†è¿™ä¸æ˜¯ LiveData çš„é—®é¢˜ï¼Œ<strong>è€Œæ˜¯ä½¿ç”¨åœºæ™¯é€‰é”™äº†</strong>ã€‚</p>
<h3 data-id="heading-6">3. æ­£ç¡®ç†è§£ï¼šState vs Event</h3>
<p>Android æ¶æ„ç»„ä»¶çš„è®¾è®¡å“²å­¦æ˜ç¡®åŒºåˆ†äº†ä¸¤ä¸ªæ¦‚å¿µï¼š</p>























<table><thead><tr><th>æ¦‚å¿µ</th><th>ç‰¹ç‚¹</th><th>é€‚ç”¨å·¥å…·</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td><strong>Stateï¼ˆçŠ¶æ€ï¼‰</strong></td><td>æŒä¹…çš„ã€å¯é‡å¤æ¶ˆè´¹çš„</td><td>LiveData</td><td>ç”¨æˆ·ä¿¡æ¯ã€åˆ—è¡¨æ•°æ®ã€åŠ è½½çŠ¶æ€</td></tr><tr><td><strong>Eventï¼ˆäº‹ä»¶ï¼‰</strong></td><td>ä¸€æ¬¡æ€§çš„ã€æ¶ˆè´¹åå¤±æ•ˆ</td><td>Channel/SharedFlow</td><td>æ˜¾ç¤º Toastã€å¯¼èˆªè·³è½¬</td></tr></tbody></table>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// âœ… æ­£ç¡®ç”¨æ³•ï¼šLiveData ç®¡ç†çŠ¶æ€</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">UserProfileViewModel</span> : <span class="hljs-type">ViewModel</span>() {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> _uiState = MutableLiveData&lt;UiState&gt;()
    <span class="hljs-keyword">val</span> uiState: LiveData&lt;UiState&gt; = _uiState
    
    <span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UiState</span>(
        <span class="hljs-keyword">val</span> user: User? = <span class="hljs-literal">null</span>,
        <span class="hljs-keyword">val</span> isLoading: <span class="hljs-built_in">Boolean</span> = <span class="hljs-literal">false</span>,
        <span class="hljs-keyword">val</span> error: String? = <span class="hljs-literal">null</span>
    )
}

<span class="hljs-comment">// UI å±‚</span>
viewModel.uiState.observe(viewLifecycleOwner) { state -&gt;
    <span class="hljs-comment">// çŠ¶æ€æ˜¯å¯ä»¥é‡å¤æ¸²æŸ“çš„</span>
    binding.progressBar.isVisible = state.isLoading
    state.user?.let { displayUser(it) }
    state.error?.let { showError(it) }
}
</code></pre>
<h2 data-id="heading-7">å¦‚ä½•æ­£ç¡®å¤„ç†ä¸€æ¬¡æ€§äº‹ä»¶</h2>
<p>å¦‚æœä½ ç¡®å®éœ€è¦å¤„ç†ä¸€æ¬¡æ€§äº‹ä»¶ï¼ˆå¦‚æ˜¾ç¤º Toastã€å¯¼èˆªè·³è½¬ï¼‰ï¼Œè¿™é‡Œæœ‰å‡ ä¸ªæ­£ç¡®çš„æ–¹æ¡ˆï¼š</p>
<h3 data-id="heading-8">æ–¹æ¡ˆ 1ï¼šä½¿ç”¨ Kotlin Flowï¼ˆæ¨èï¼‰</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyViewModel</span> : <span class="hljs-type">ViewModel</span>() {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> _events = Channel&lt;UiEvent&gt;()
    <span class="hljs-keyword">val</span> events = _events.receiveAsFlow()
    
    <span class="hljs-keyword">sealed</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UiEvent</span> {
        <span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ShowToast</span>(<span class="hljs-keyword">val</span> message: String) : UiEvent()
        <span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Navigate</span>(<span class="hljs-keyword">val</span> route: String) : UiEvent()
    }
    
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onSaveClick</span><span class="hljs-params">()</span></span> {
        viewModelScope.launch {
            <span class="hljs-comment">// ä¸šåŠ¡é€»è¾‘</span>
            _events.send(UiEvent.ShowToast(<span class="hljs-string">"ä¿å­˜æˆåŠŸ"</span>))
        }
    }
}

<span class="hljs-comment">// UI å±‚</span>
lifecycleScope.launch {
    viewModel.events.collect { event -&gt;
        <span class="hljs-keyword">when</span> (event) {
            <span class="hljs-keyword">is</span> UiEvent.ShowToast -&gt; showToast(event.message)
            <span class="hljs-keyword">is</span> UiEvent.Navigate -&gt; navigateTo(event.route)
        }
    }
}
</code></pre>
<h3 data-id="heading-9">æ–¹æ¡ˆ 2ï¼šçŠ¶æ€ + æ¶ˆè´¹æ ‡è®°</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UiState</span>(
    <span class="hljs-keyword">val</span> successMessage: String? = <span class="hljs-literal">null</span>,
    <span class="hljs-keyword">val</span> messageConsumed: <span class="hljs-built_in">Boolean</span> = <span class="hljs-literal">false</span>
)

<span class="hljs-keyword">class</span> <span class="hljs-title class_">MyViewModel</span> : <span class="hljs-type">ViewModel</span>() {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> _uiState = MutableLiveData(UiState())
    <span class="hljs-keyword">val</span> uiState: LiveData&lt;UiState&gt; = _uiState
    
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onSaveClick</span><span class="hljs-params">()</span></span> {
        _uiState.value = _uiState.value?.copy(
            successMessage = <span class="hljs-string">"ä¿å­˜æˆåŠŸ"</span>,
            messageConsumed = <span class="hljs-literal">false</span>
        )
    }
    
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onMessageShown</span><span class="hljs-params">()</span></span> {
        _uiState.value = _uiState.value?.copy(messageConsumed = <span class="hljs-literal">true</span>)
    }
}

<span class="hljs-comment">// UI å±‚</span>
viewModel.uiState.observe(viewLifecycleOwner) { state -&gt;
    <span class="hljs-keyword">if</span> (state.successMessage != <span class="hljs-literal">null</span> &amp;&amp; !state.messageConsumed) {
        showToast(state.successMessage)
        viewModel.onMessageShown()
    }
}
</code></pre>
<h3 data-id="heading-10">æ–¹æ¡ˆ 3ï¼šGoogle å®˜æ–¹çš„ Event åŒ…è£…ç±»</h3>
<p>å¦‚æœä½ å¿…é¡»ä½¿ç”¨ LiveData å¤„ç†äº‹ä»¶ï¼Œå¯ä»¥ä½¿ç”¨ Google å®˜æ–¹ç¤ºä¾‹ä¸­çš„ Event ç±»ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Event</span>&lt;<span class="hljs-type">out T</span>&gt;(<span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> content: T) {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> hasBeenHandled = <span class="hljs-literal">false</span>
    
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getContentIfNotHandled</span><span class="hljs-params">()</span></span>: T? {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">if</span> (hasBeenHandled) {
            <span class="hljs-literal">null</span>
        } <span class="hljs-keyword">else</span> {
            hasBeenHandled = <span class="hljs-literal">true</span>
            content
        }
    }
    
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">peekContent</span><span class="hljs-params">()</span></span>: T = content
}

<span class="hljs-comment">// ä½¿ç”¨</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MyViewModel</span> : <span class="hljs-type">ViewModel</span>() {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> _toastEvent = MutableLiveData&lt;Event&lt;String&gt;&gt;()
    <span class="hljs-keyword">val</span> toastEvent: LiveData&lt;Event&lt;String&gt;&gt; = _toastEvent
    
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onSaveClick</span><span class="hljs-params">()</span></span> {
        _toastEvent.value = Event(<span class="hljs-string">"ä¿å­˜æˆåŠŸ"</span>)
    }
}

<span class="hljs-comment">// UI å±‚</span>
viewModel.toastEvent.observe(viewLifecycleOwner) { event -&gt;
    event.getContentIfNotHandled()?.let { message -&gt;
        showToast(message)
    }
}
</code></pre>
<h2 data-id="heading-11">UnPeek-LiveData çš„é—®é¢˜</h2>
<p>æŸ Android å¸ƒé“å¸ˆæœ‰ä¸ª UnPeek-LiveData åº“è¯•å›¾"ä¿®å¤"è¿™ä¸ªæ‰€è°“çš„"æ•°æ®å€’çŒ"é—®é¢˜ï¼Œä½†å®é™…ä¸Šå¼•å…¥äº†æ›´å¤šé—®é¢˜ï¼š</p>
<h3 data-id="heading-12">1. è¿èƒŒè®¾è®¡åˆè¡·</h3>
<p>LiveData è¢«è®¾è®¡ä¸ºçŠ¶æ€å®¹å™¨ï¼ŒUnPeek-LiveData å°†å…¶æ”¹é€ ä¸ºäº‹ä»¶åˆ†å‘å™¨ï¼Œè¿™æ˜¯åœ¨å¯¹æŠ—æ¡†æ¶çš„æœ¬è´¨è®¾è®¡ã€‚</p>
<h3 data-id="heading-13">2. å¢åŠ å¤æ‚åº¦</h3>
<p>ä¸ºäº†å®ç°"é˜²å€’çŒ"ï¼Œè¯¥åº“ä½¿ç”¨äº†ï¼š</p>
<ul>
<li>ç‰ˆæœ¬å·æœºåˆ¶è·Ÿè¸ªæ¶ˆè´¹çŠ¶æ€</li>
<li>åå°„ä¿®æ”¹ LiveData å†…éƒ¨çŠ¶æ€</li>
<li>è‡ªå®šä¹‰çš„å»¶æ—¶æ¸…ç†é€»è¾‘</li>
</ul>
<p>è¿™äº›éƒ½å¢åŠ äº†ç»´æŠ¤æˆæœ¬å’Œæ½œåœ¨çš„ bugã€‚</p>
<h3 data-id="heading-14">3. æ¶æ„æ··ä¹±</h3>
<p>ä½œè€…å»ºè®®å°† LiveData ç”¨äº"é¢†åŸŸå±‚"äº‹ä»¶åˆ†å‘ï¼ŒObservableField ç”¨äº"è¡¨ç°å±‚"çŠ¶æ€ç®¡ç†ã€‚ä½†è¿™å®Œå…¨é¢ å€’äº† Android æ¶æ„ç»„ä»¶çš„è®¾è®¡ï¼š</p>
<pre><code class="hljs language-java" lang="java">âŒ é”™è¯¯çš„æ¶æ„ç†è§£ï¼š
UI <span class="hljs-title function_">Layer</span> <span class="hljs-params">(ObservableField)</span> 
    â†‘
Domain <span class="hljs-title function_">Layer</span> <span class="hljs-params">(UnPeek-LiveData)</span>

âœ… æ­£ç¡®çš„æ¶æ„ï¼š
UI <span class="hljs-title function_">Layer</span> <span class="hljs-params">(LiveData/StateFlow <span class="hljs-keyword">for</span> State, Channel <span class="hljs-keyword">for</span> Events)</span>
    â†‘
Domain <span class="hljs-title function_">Layer</span> <span class="hljs-params">(Flow/Coroutines)</span>
    â†‘
Data <span class="hljs-title function_">Layer</span> <span class="hljs-params">(Repository)</span>
</code></pre>
<h2 data-id="heading-15">æ­£ç¡®çš„æ¶æ„å®è·µ</h2>
<h3 data-id="heading-16">å®Œæ•´ç¤ºä¾‹ï¼šç”¨æˆ·æ³¨å†Œæµç¨‹</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// ViewModel</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">RegisterViewModel</span> : <span class="hljs-type">ViewModel</span>() {
    <span class="hljs-comment">// çŠ¶æ€ï¼šä½¿ç”¨ LiveData</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> _uiState = MutableLiveData&lt;RegisterState&gt;()
    <span class="hljs-keyword">val</span> uiState: LiveData&lt;RegisterState&gt; = _uiState
    
    <span class="hljs-comment">// äº‹ä»¶ï¼šä½¿ç”¨ Channel</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> _events = Channel&lt;RegisterEvent&gt;()
    <span class="hljs-keyword">val</span> events = _events.receiveAsFlow()
    
    <span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RegisterState</span>(
        <span class="hljs-keyword">val</span> isLoading: <span class="hljs-built_in">Boolean</span> = <span class="hljs-literal">false</span>,
        <span class="hljs-keyword">val</span> emailError: String? = <span class="hljs-literal">null</span>,
        <span class="hljs-keyword">val</span> passwordError: String? = <span class="hljs-literal">null</span>
    )
    
    <span class="hljs-keyword">sealed</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RegisterEvent</span> {
        <span class="hljs-keyword">object</span> NavigateToHome : RegisterEvent()
        <span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ShowError</span>(<span class="hljs-keyword">val</span> message: String) : RegisterEvent()
    }
    
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">register</span><span class="hljs-params">(email: <span class="hljs-type">String</span>, password: <span class="hljs-type">String</span>)</span></span> {
        viewModelScope.launch {
            <span class="hljs-comment">// æ›´æ–°åŠ è½½çŠ¶æ€</span>
            _uiState.value = RegisterState(isLoading = <span class="hljs-literal">true</span>)
            
            <span class="hljs-keyword">try</span> {
                repository.register(email, password)
                <span class="hljs-comment">// å‘é€ä¸€æ¬¡æ€§å¯¼èˆªäº‹ä»¶</span>
                _events.send(RegisterEvent.NavigateToHome)
            } <span class="hljs-keyword">catch</span> (e: Exception) {
                <span class="hljs-comment">// æ›´æ–°é”™è¯¯çŠ¶æ€</span>
                _uiState.value = RegisterState(
                    isLoading = <span class="hljs-literal">false</span>,
                    emailError = <span class="hljs-keyword">if</span> (e <span class="hljs-keyword">is</span> InvalidEmailException) e.message <span class="hljs-keyword">else</span> <span class="hljs-literal">null</span>
                )
                <span class="hljs-comment">// å‘é€ä¸€æ¬¡æ€§é”™è¯¯æç¤ºäº‹ä»¶</span>
                _events.send(RegisterEvent.ShowError(e.message ?: <span class="hljs-string">"æ³¨å†Œå¤±è´¥"</span>))
            }
        }
    }
}

<span class="hljs-comment">// Activity/Fragment</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">RegisterFragment</span> : <span class="hljs-type">Fragment</span>() {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onViewCreated</span><span class="hljs-params">(view: <span class="hljs-type">View</span>, savedInstanceState: <span class="hljs-type">Bundle</span>?)</span></span> {
        <span class="hljs-keyword">super</span>.onViewCreated(view, savedInstanceState)
        
        <span class="hljs-comment">// è§‚å¯ŸçŠ¶æ€ï¼ˆå¯é‡å¤æ¶ˆè´¹ï¼Œæ—‹è½¬å±å¹•åä¿æŒï¼‰</span>
        viewModel.uiState.observe(viewLifecycleOwner) { state -&gt;
            binding.progressBar.isVisible = state.isLoading
            binding.emailInput.error = state.emailError
            binding.passwordInput.error = state.passwordError
        }
        
        <span class="hljs-comment">// æ”¶é›†äº‹ä»¶ï¼ˆä¸€æ¬¡æ€§æ¶ˆè´¹ï¼‰</span>
        viewLifecycleOwner.lifecycleScope.launch {
            viewModel.events.collect { event -&gt;
                <span class="hljs-keyword">when</span> (event) {
                    <span class="hljs-keyword">is</span> RegisterEvent.NavigateToHome -&gt; {
                        findNavController().navigate(R.id.homeFragment)
                    }
                    <span class="hljs-keyword">is</span> RegisterEvent.ShowError -&gt; {
                        Snackbar.make(binding.root, event.message, Snackbar.LENGTH_LONG).show()
                    }
                }
            }
        }
        
        binding.registerButton.setOnClickListener {
            viewModel.register(
                binding.emailInput.text.toString(),
                binding.passwordInput.text.toString()
            )
        }
    }
}
</code></pre>
<h2 data-id="heading-17">æ€»ç»“</h2>
<ol>
<li>
<p><strong>LiveData çš„"ç²˜æ€§"è¡Œä¸ºä¸æ˜¯ bugï¼Œè€Œæ˜¯æ ¸å¿ƒç‰¹æ€§</strong>ï¼Œç”¨äºä¿è¯é…ç½®å˜æ›´æ—¶çš„çŠ¶æ€ä¸€è‡´æ€§ã€‚</p>
</li>
<li>
<p><strong>"æ•°æ®å€’çŒ"æ˜¯ä¸€ä¸ªä¼ªå‘½é¢˜</strong>ï¼Œé—®é¢˜çš„æ ¹æºæ˜¯å¼€å‘è€…æ··æ·†äº†"çŠ¶æ€"å’Œ"äº‹ä»¶"çš„æ¦‚å¿µã€‚</p>
</li>
<li>
<p><strong>æ­£ç¡®çš„åšæ³•æ˜¯</strong>ï¼š</p>
<ul>
<li>ç”¨ LiveData/StateFlow ç®¡ç†çŠ¶æ€ï¼ˆå¯é‡å¤æ¶ˆè´¹ï¼‰</li>
<li>ç”¨ Channel/SharedFlow å¤„ç†äº‹ä»¶ï¼ˆä¸€æ¬¡æ€§æ¶ˆè´¹ï¼‰</li>
</ul>
</li>
<li>
<p><strong>ä¸è¦ä½¿ç”¨ UnPeek-LiveData ç±»çš„"é˜²å€’çŒ"åº“</strong>ï¼Œå®ƒä»¬æ˜¯åœ¨ç”¨é”™è¯¯çš„æ–¹å¼è§£å†³ä¸å­˜åœ¨çš„é—®é¢˜ã€‚</p>
</li>
<li>
<p><strong>éµå¾ª Android å®˜æ–¹æ¶æ„æŒ‡å—</strong>ï¼Œé€‰æ‹©æ­£ç¡®çš„å·¥å…·å¤„ç†æ­£ç¡®çš„åœºæ™¯ã€‚</p>
</li>
</ol>
<h2 data-id="heading-18">å‚è€ƒèµ„æ–™</h2>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.com%2Ftopic%2Flibraries%2Farchitecture%2Flivedata" target="_blank" title="https://developer.android.com/topic/libraries/architecture/livedata" ref="nofollow noopener noreferrer">Android Architecture Components - LiveData</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.com%2Ftopic%2Farchitecture" target="_blank" title="https://developer.android.com/topic/architecture" ref="nofollow noopener noreferrer">Guide to app architecture</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.com%2Fkotlin%2Fflow%2Fstateflow-and-sharedflow" target="_blank" title="https://developer.android.com/kotlin/flow/stateflow-and-sharedflow" ref="nofollow noopener noreferrer">StateFlow and SharedFlow</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fmedium.com%2Fandroiddevelopers%2Fviewmodels-and-livedata-patterns-antipatterns-21efaef74a54" target="_blank" title="https://medium.com/androiddevelopers/viewmodels-and-livedata-patterns-antipatterns-21efaef74a54" ref="nofollow noopener noreferrer">ViewModels and LiveData: Patterns + AntiPatterns</a></li>
</ul>
<hr/>
<p><strong>è®°ä½ï¼šå½“å·¥å…·ä¸ç¬¦åˆä½ çš„éœ€æ±‚æ—¶ï¼Œåº”è¯¥é€‰æ‹©æ­£ç¡®çš„å·¥å…·ï¼Œè€Œä¸æ˜¯æ”¹é€ å·¥å…·ã€‚</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ï¼ˆ7ï¼‰Kotlin/Js For Harmonyâ€”â€”ArkTs å¼€å‘æ¶æ„]]></title>    <link>https://juejin.cn/post/7580277964340953098</link>    <guid>https://juejin.cn/post/7580277964340953098</guid>    <pubDate>2025-12-06T05:18:18.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7580277964340953098" data-draft-id="7571191453126000666" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ï¼ˆ7ï¼‰Kotlin/Js For Harmonyâ€”â€”ArkTs å¼€å‘æ¶æ„"/> <meta itemprop="keywords" content="HarmonyOS"/> <meta itemprop="datePublished" content="2025-12-06T05:18:18.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="h5"/> <meta itemprop="url" content="https://juejin.cn/user/1063982984602830"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ï¼ˆ7ï¼‰Kotlin/Js For Harmonyâ€”â€”ArkTs å¼€å‘æ¶æ„
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1063982984602830/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    h5
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-06T05:18:18.000Z" title="Sat Dec 06 2025 05:18:18 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ¬ç« æˆ‘ä»¬è®¨è®ºå¦‚ä½•åŸºäºä¸Šä¸€ç« èŠ‚ä»‹ç»çš„å·¥å…·ï¼Œå®ç°é¸¿è’™ä¸Šçš„å“åº”å¼æ¶æ„ã€‚</p>
<p>æˆ‘ä»¬åŸºäºåŸºäºMVVM æ¶æ„ï¼Œä¸»è¦è®¨è®ºVMã€‚</p>
<h2 data-id="heading-0">Flow + Transformer</h2>
<p>ViewModelçš„æ ¸å¿ƒæ€æƒ³æ˜¯flow + transformer
flow æ˜¯å“åº”å¼æ•°æ®çš„åŸºç¡€ï¼Œtransformer è´Ÿè´£æ•°æ®è½¬æ¢ã€‚</p>
<p>ä¸¾ä¸ªæ —å­ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript">
<span class="hljs-keyword">class</span> <span class="hljs-title class_">BaseViewModel</span> {
	<span class="hljs-keyword">protected</span> <span class="hljs-keyword">readonly</span> viewModelScope = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scope</span>()
}


<span class="hljs-keyword">interface</span> <span class="hljs-title class_">MyModel</span> {
	<span class="hljs-attr">nameColor</span>: <span class="hljs-built_in">string</span>
	<span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">MyModelTransformer</span>{
	
	<span class="hljs-keyword">async</span> <span class="hljs-title function_">transform</span>(<span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>, <span class="hljs-attr">isLogin</span>: <span class="hljs-built_in">boolean</span>): <span class="hljs-title class_">MyModel</span> {
		<span class="hljs-keyword">return</span> {
			<span class="hljs-attr">name</span>: name,
			<span class="hljs-attr">nameColor</span>: isLogin ? <span class="hljs-title class_">Color</span>.<span class="hljs-property">Black</span> : <span class="hljs-title class_">Color</span>.<span class="hljs-property">Grey</span>
		}

	}

}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">MyViewModel</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">BaseViewModel</span> {
	<span class="hljs-keyword">private</span> _nameFlow = <span class="hljs-title function_">mutableStateFlow</span>(<span class="hljs-string">''</span>)
	<span class="hljs-keyword">private</span> _isLoginFlow = <span class="hljs-title function_">mutableStateFlow</span>(<span class="hljs-literal">false</span>)

	<span class="hljs-keyword">readonly</span> <span class="hljs-attr">modelFlow</span>: <span class="hljs-title class_">Flow</span>&lt;<span class="hljs-title class_">MyModel</span>&gt;

	<span class="hljs-keyword">private</span> transfomer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyModelTransformer</span>()

	<span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
		<span class="hljs-variable language_">super</span>()

		<span class="hljs-variable language_">this</span>.<span class="hljs-property">modelFlow</span> = <span class="hljs-title function_">combine2</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">_nameFlow</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">_isLoginFlow</span>, 
			<span class="hljs-keyword">async</span> (<span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>, <span class="hljs-attr">isLogin</span>: <span class="hljs-built_in">string</span>) =&gt; { <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">transfomer</span>.<span class="hljs-title function_">transform</span>(name, isLogin)}
		)
		.<span class="hljs-title function_">stateIn</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">viewModelScope</span>, { name : <span class="hljs-string">''</span>, <span class="hljs-attr">nameColor</span>: <span class="hljs-string">''</span>})
	}

	<span class="hljs-title function_">updateIsLogin</span>(<span class="hljs-params">isLogin: <span class="hljs-built_in">boolean</span></span>) {
		<span class="hljs-variable language_">this</span>.<span class="hljs-property">_isLoginFlow</span>.<span class="hljs-property">value</span> = isLogin
	}

	<span class="hljs-title function_">updateName</span>(<span class="hljs-params">name: <span class="hljs-built_in">string</span></span>) {
		<span class="hljs-variable language_">this</span>.<span class="hljs-property">_nameFlow</span>.<span class="hljs-property">value</span> = name
	}

}


<span class="hljs-meta">@ComponentV2</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MyComponent</span> {
	<span class="hljs-keyword">private</span> scope = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scope</span>()
	<span class="hljs-keyword">private</span> viewModel = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyViewModel</span>()

	<span class="hljs-meta">@Local</span> <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>
	<span class="hljs-meta">@Local</span> <span class="hljs-attr">nameColor</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>

	<span class="hljs-title function_">aboutToAppear</span>(<span class="hljs-params"/>){
		<span class="hljs-variable language_">this</span>.<span class="hljs-property">scope</span>.<span class="hljs-title function_">launch</span>(<span class="hljs-keyword">async</span> (abortSignal) =&gt; {
			<span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">viewModel</span>.<span class="hljs-property">modelFlow</span>.<span class="hljs-title function_">collect</span>(<span class="hljs-title function_">async</span>(myModel) =&gt; {
				<span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = myModel.<span class="hljs-property">name</span>
				<span class="hljs-variable language_">this</span>.<span class="hljs-property">nameColor</span> = myModel.<span class="hljs-property">nameColor</span>
			})
		})

	}


	<span class="hljs-title function_">build</span>(<span class="hljs-params"/>){

		<span class="hljs-title class_">Text</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>).<span class="hljs-title function_">fontColor</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">nameColor</span>)
		.<span class="hljs-title function_">onClick</span>(<span class="hljs-function">()=&gt;</span>{
			<span class="hljs-variable language_">this</span>.<span class="hljs-property">viewModel</span>.<span class="hljs-title function_">updateName</span>(<span class="hljs-string">`name<span class="hljs-subst">${util.generateRandomUUID()}</span>`</span>)
		})

	}

}

</code></pre>
<p>ä¸Šé¢è¿™ä¸ªå°demoæ¯”è¾ƒæ¸…æ™°çš„å±•ç¤ºäº†å“åº”å¼æ¶æ„çš„æ ·å­ã€‚
æ¯æ¬¡è°ƒç”¨viewModel.updateNameéƒ½ä¼šè§¦å‘_nameFlowå‘å°„æ–°å€¼ï¼Œè¿›è€Œè§¦å‘transformer.transform,ç”Ÿæˆä¸€ä¸ªæ–°çš„MyModel,
UI å±‚ç›‘å¬modelFlow,å»ç›¸åº”çš„æ›´æ–°æ•°æ®ã€‚</p>
<p>ç”¨flowçš„ä¼˜åŠ¿æ˜¯å¯ä»¥éå¸¸æ–¹ä¾¿çš„æµå¼å¤„ç†æ•°æ®ï¼Œä¸­é—´æä¾›äº†å¤šç§æ“ä½œç¬¦ã€‚
å°†æ•°æ®è½¬æ¢æŠ½è±¡æˆtransformerçš„ä¼˜åŠ¿æ˜¯å¯ä»¥æ–¹ä¾¿çš„åšå•å…ƒæµ‹è¯•ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦ä¿è¯transformeræ˜¯æ— çŠ¶æ€çš„ï¼Œå³ç¡®å®šçš„è¾“å…¥å¯¹åº”ç¡®å®šçš„è¾“å‡ºã€‚</p>
<h2 data-id="heading-1">UiModel Mapping</h2>
<p>ä¸Šè¿°ä¾‹å­æ¯”è¾ƒç®€å•ï¼Œå¦‚æœæˆ‘ä»¬æ˜¯ä¸€ä¸ªå¤æ‚çš„åˆ—è¡¨ï¼Œåˆ—è¡¨çš„æ¯ä¸€ä¸ªItem éƒ½æœ‰ä»–è‡ªå·±çš„çŠ¶æ€ï¼Œé‚£è¿™äº›çŠ¶æ€è¯¥æ€æ ·ç»´æŠ¤ï¼Ÿ
å¦‚æœç”¨Composeçš„è¯ï¼Œ<code>remember</code> å¤©ç„¶çš„å¯ä»¥åšè¿™ä¸ªäº‹æƒ…ï¼Œä½†æ˜¯ArkUIä¸­æ²¡æœ‰ç±»ä¼¼çš„æ“ä½œç¬¦ï¼Œè¯¥å¦‚ä½•åšå‘¢ï¼Ÿ</p>
<p>ä¸ºäº†ä¸ä¸¢çŠ¶æ€ï¼Œæˆ‘ä»¬éœ€è¦è‡ªå·±ç»´æŠ¤æ•°æ®åˆ°UiModelçš„æ˜ å°„ï¼Œâ€œåŒä¸€ä¸ªæ•°æ®â€ï¼Œæ°¸è¿œæ˜ å°„åˆ°åŒä¸€ä¸ªUiModelå¯¹è±¡ï¼Œè¿™æ ·æˆ‘ä»¬åœ¨UIä¸Šå°±å¯ä»¥æ–¹ä¾¿çš„ä½¿ç”¨å¯¹åº”çš„UiModel é‡Œï¼Œè€Œä¸æ€•Component åˆ’å‡ºå±å¹•é”€æ¯åçŠ¶æ€ä¸¢å¤±ã€‚
æ³¨æ„ï¼Œâ€œåŒä¸€ä¸ªæ•°æ®â€æˆ‘è¿™é‡Œä½¿ç”¨äº†å¼•å·ï¼Œå¦‚ä½•ç†è§£â€åŒä¸€ä¸ªâ€œå‘¢ï¼Ÿä¸åŒåœºæ™¯æœ‰ä¸åŒçš„å«ä¹‰ï¼Œæ¯”å¦‚ä¸€ä¸ªæ¶ˆæ¯åˆ—è¡¨ï¼Œé‚£å¯ä»¥ç”¨æ¶ˆæ¯id æ¥åˆ¤æ–­æ˜¯ä¸æ˜¯â€åŒä¸€ä¸ªæ•°æ®â€œï¼ŒåŒä¸€ä¸ªæ¶ˆæ¯id,æ°¸è¿œéƒ½ä½¿ç”¨åŒä¸€ä¸ªUiModelã€‚</p>
<p>ä¿è¯è¿™æ ·çš„æ˜ å°„å…³ç³»è¿˜æœ‰ä¸€ä¸ªå¾ˆé‡è¦çš„å¥½å¤„ï¼šåœ¨Listä¸­ï¼ŒListItem ç»‘å®šçš„æ˜¯å›ºå®šçš„UiModelï¼Œå› æ­¤æ•°æ®æ›´æ–°æ—¶æ— éœ€æ¯æ¬¡éƒ½é‡å»ºListItemã€‚</p>
<p>åœ¨List å†…ä½¿ç”¨ï¼Œå³é…åˆLazyForEachä½¿ç”¨æ—¶ï¼ŒkeyGenerator çš„è¿”å›å€¼åº”è¯¥æ˜¯UiModelçš„å†…å­˜åœ°å€ï¼Œä¿è¯åŒä¸€ä¸ªUiModelå¯¹è±¡ï¼Œä¸ä¼šé‡æ–°åˆ›å»ºListItemã€‚
ä½†æ˜¯æˆ‘ä»¬æ˜¯æ— æ³•ç›´æ¥è®¿é—®åˆ°js å¯¹è±¡çš„å†…å­˜åœ°å€çš„ï¼Œjs ä¸­ä¹Ÿæ²¡æœ‰æä¾›å¯¹è±¡hashCodeçš„æ–¹æ³•ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥ç»™æ¯ä¸ªå¯¹è±¡åŠ ä¸€ä¸ªè‡ªå¢çš„Idï¼Œè¿™é‡Œå«union_id,äºæ˜¯UiModelä¼šå˜æˆè¿™æ ·ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyUiModel</span> {
	<span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-variable constant_">UNION_ID</span> = <span class="hljs-number">0</span>
	<span class="hljs-keyword">readonly</span> unionId = <span class="hljs-string">`MyUiModel_<span class="hljs-subst">${MyUiModel.UNION_ID++}</span>`</span>

}
</code></pre>
<p>è¿™æ ·ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨unionId æ¥æŒ‡ä»£å¯¹è±¡çš„å”¯ä¸€æ€§ï¼Œæ‰€ä»¥LazyForEach å¯ä»¥è¿™æ ·å†™ï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">List</span>(){
	
	<span class="hljs-built_in">LazyForEach</span>(this.dataSource, (item: MyUiModel, index)=&gt; {
	   <span class="hljs-built_in">ListItem</span>(){
	   	  <span class="hljs-comment">// UI ä»£ç </span>
	   }
	}, (item: MyUiModel, index) =&gt; item<span class="hljs-selector-class">.unionId</span>)

}

</code></pre>
<p>ä¸ºäº†ç»´æŠ¤UiModel çš„ç¨³å®šæ˜ å°„ï¼Œç°åœ¨æä¾›ä¸€ä¸ªåŸºç¡€å·¥å…·ç±» ModelStore, ä½œä¸ºUiModel çš„é€šç”¨ç®¡ç†å·¥å…·ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ModelStore</span>&lt;T&gt; {
  <span class="hljs-keyword">readonly</span> map = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>&lt;<span class="hljs-built_in">string</span>, T&gt;()

  <span class="hljs-title function_">getOrCreate</span>(<span class="hljs-attr">id</span>: <span class="hljs-built_in">string</span>, <span class="hljs-attr">factory</span>: <span class="hljs-function">(<span class="hljs-params">id: <span class="hljs-built_in">string</span></span>) =&gt;</span> T): T {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">map</span>.<span class="hljs-title function_">has</span>(id)) {
      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">map</span>.<span class="hljs-title function_">get</span>(id)!
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">const</span> model = <span class="hljs-title function_">factory</span>(id)
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">map</span>.<span class="hljs-title function_">set</span>(id, model)
      <span class="hljs-keyword">return</span> model
    }
  }

  <span class="hljs-title function_">tryGet</span>(<span class="hljs-attr">id</span>: <span class="hljs-built_in">string</span>): <span class="hljs-title class_">Nullable</span>&lt;T&gt; {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">map</span>.<span class="hljs-title function_">get</span>(id)
  }

  <span class="hljs-title function_">clear</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">map</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">model</span> =&gt;</span> {
      <span class="hljs-keyword">const</span> clearFunc = (model <span class="hljs-keyword">as</span> <span class="hljs-title class_">IClearable</span>).<span class="hljs-property">clear</span>
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> clearFunc === <span class="hljs-string">'function'</span>) {
        (model <span class="hljs-keyword">as</span> <span class="hljs-title class_">IClearable</span>).<span class="hljs-title function_">clear</span>()
      }
    })
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">map</span>.<span class="hljs-title function_">clear</span>()
  }
}
</code></pre>
<p>ä½¿ç”¨çš„æ—¶å€™éå¸¸ç®€å•ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyUiModel</span> {
	<span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-variable constant_">UNION_ID</span> = <span class="hljs-number">0</span>
	<span class="hljs-keyword">readonly</span> unionId = <span class="hljs-string">`MyUiModel_<span class="hljs-subst">${MyUiModel.UNION_ID++}</span>`</span>
	<span class="hljs-keyword">readonly</span> <span class="hljs-attr">id</span>: <span class="hljs-built_in">string</span>

	name = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DistinctState</span>(<span class="hljs-string">''</span>)

	<span class="hljs-title function_">constructor</span>(<span class="hljs-params">id: <span class="hljs-built_in">string</span></span>) {
    	<span class="hljs-variable language_">super</span>()
    	<span class="hljs-variable language_">this</span>.<span class="hljs-property">id</span> = id
  	}

	<span class="hljs-keyword">static</span> <span class="hljs-title function_">newInstance</span>(<span class="hljs-attr">id</span>: <span class="hljs-built_in">string</span>) : <span class="hljs-title class_">MyUiModel</span>{
		<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyUiModel</span>(id)
	}

	<span class="hljs-keyword">static</span> <span class="hljs-title function_">makeId</span>(<span class="hljs-attr">data</span>: <span class="hljs-title class_">Data</span>): <span class="hljs-built_in">string</span> {
		<span class="hljs-keyword">return</span> <span class="hljs-string">`MyUiModel_<span class="hljs-subst">${data.id}</span>`</span>
	}

	<span class="hljs-title function_">update</span>(<span class="hljs-params">data: Data</span>) {
		<span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>.<span class="hljs-title function_">update</span>(data.<span class="hljs-property">name</span>)
	}

}

<span class="hljs-comment">// ä½¿ç”¨</span>


<span class="hljs-keyword">const</span> modelStore = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ModelStore</span>()

<span class="hljs-comment">//å‡è®¾è¿™æ˜¯æ•°æ®</span>
<span class="hljs-comment">//interface Data {</span>
<span class="hljs-comment">//	id: stirng</span>
<span class="hljs-comment">//	name: string</span>
<span class="hljs-comment">//}</span>

<span class="hljs-keyword">const</span> <span class="hljs-attr">data</span>: <span class="hljs-title class_">Data</span> = {<span class="hljs-attr">id</span>: <span class="hljs-string">'1'</span>, name : <span class="hljs-string">'Sean'</span>} 

<span class="hljs-keyword">const</span> myUiModel = <span class="hljs-variable language_">this</span>.<span class="hljs-property">modelStore</span>.<span class="hljs-title function_">getOrCreate</span>(<span class="hljs-title class_">MyUiModel</span>.<span class="hljs-title function_">makeId</span>(data.<span class="hljs-property">id</span>), <span class="hljs-title class_">MyUiModel</span>.<span class="hljs-property">newInstance</span>)
myUiModel.<span class="hljs-title function_">update</span>(data)

</code></pre>
<h2 data-id="heading-2">æœ€ç»ˆç‰ˆæœ¬</h2>
<p>å°†ä¸Šè¿°æ‰€æœ‰ä¸œè¥¿ç»„åˆèµ·æ¥ï¼Œå°±å®ç°äº†æˆ‘ä»¬çš„æœ€ç»ˆç‰ˆæœ¬å•¦ï¼Œæ¥çœ‹ä¸€ä¸‹æ•´ä½“çš„æ¶æ„ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">//å‡è®¾è¿™æ˜¯æ•°æ®</span>
<span class="hljs-comment">//interface Data {</span>
<span class="hljs-comment">//	id: stirng</span>
<span class="hljs-comment">//	name: string</span>
<span class="hljs-comment">//}</span>

<span class="hljs-keyword">class</span> <span class="hljs-title class_">BaseViewModel</span> {
	<span class="hljs-keyword">protected</span> <span class="hljs-keyword">readonly</span> viewModelScope = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scope</span>()
}


<span class="hljs-keyword">class</span> <span class="hljs-title class_">MyUiModel</span> {
	<span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-variable constant_">UNION_ID</span> = <span class="hljs-number">0</span>
	<span class="hljs-keyword">readonly</span> unionId = <span class="hljs-string">`MyUiModel_<span class="hljs-subst">${MyUiModel.UNION_ID++}</span>`</span>
	<span class="hljs-keyword">readonly</span> <span class="hljs-attr">id</span>: <span class="hljs-built_in">string</span>

	<span class="hljs-keyword">readonly</span> name = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DistinctState</span>(<span class="hljs-string">''</span>)
	<span class="hljs-keyword">readonly</span> nameColor = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DistinctState</span>(<span class="hljs-string">''</span>)

	<span class="hljs-title function_">constructor</span>(<span class="hljs-params">id: <span class="hljs-built_in">string</span></span>) {
    	<span class="hljs-variable language_">super</span>()
    	<span class="hljs-variable language_">this</span>.<span class="hljs-property">id</span> = id
  	}

	<span class="hljs-keyword">static</span> <span class="hljs-title function_">newInstance</span>(<span class="hljs-attr">id</span>: <span class="hljs-built_in">string</span>) : <span class="hljs-title class_">MyUiModel</span>{
		<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyUiModel</span>(id)
	}

	<span class="hljs-keyword">static</span> <span class="hljs-title function_">makeId</span>(<span class="hljs-attr">data</span>: <span class="hljs-title class_">Data</span>): <span class="hljs-built_in">string</span> {
		<span class="hljs-keyword">return</span> <span class="hljs-string">`MyUiModel_<span class="hljs-subst">${data.id}</span>`</span>
	}

	<span class="hljs-title function_">update</span>(<span class="hljs-params">name: <span class="hljs-built_in">string</span>, nameColor: <span class="hljs-built_in">string</span></span>) {
		<span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>.<span class="hljs-title function_">update</span>(name)
		<span class="hljs-variable language_">this</span>.<span class="hljs-property">nameColor</span>.<span class="hljs-title function_">update</span>(nameColor)
	}

}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">MyModelTransformer</span>{
	<span class="hljs-keyword">async</span> <span class="hljs-title function_">transform</span>(<span class="hljs-attr">dataList</span>: <span class="hljs-title class_">Data</span>[], <span class="hljs-attr">isLogin</span>: <span class="hljs-built_in">boolean</span>, <span class="hljs-attr">modelStore</span>: <span class="hljs-title class_">ModelStore</span>&lt;<span class="hljs-title class_">MyUiModel</span>&gt;): <span class="hljs-title class_">MyModel</span> {
		<span class="hljs-keyword">const</span> <span class="hljs-attr">result</span>: <span class="hljs-title class_">MyUiModel</span>[] = []
		<span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> data <span class="hljs-keyword">of</span> dataList) {
			<span class="hljs-keyword">const</span> uiModel = modelStore.<span class="hljs-title function_">getOrCreate</span>(<span class="hljs-title class_">MyUiModel</span>.<span class="hljs-title function_">makeId</span>(data), <span class="hljs-title class_">MyUiModel</span>.<span class="hljs-property">newInstance</span>)

			uiModel.<span class="hljs-title function_">update</span>(data.<span class="hljs-property">name</span>, isLogin ? <span class="hljs-title class_">Color</span>.<span class="hljs-property">Black</span> : <span class="hljs-title class_">Color</span>.<span class="hljs-property">Grey</span>)
			result.<span class="hljs-title function_">push</span>(uiModel)

		}
		<span class="hljs-keyword">return</span> result

	}

}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">MyViewModel</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">BaseViewModel</span> {
	<span class="hljs-keyword">private</span> _dataListFlow = mutableStateFlow&lt;<span class="hljs-title class_">Data</span>[]&gt;([])
	<span class="hljs-keyword">private</span> _isLoginFlow = <span class="hljs-title function_">mutableStateFlow</span>(<span class="hljs-literal">false</span>)

	<span class="hljs-keyword">readonly</span> <span class="hljs-attr">modelFlow</span>: <span class="hljs-title class_">Flow</span>&lt;<span class="hljs-title class_">MyUiModel</span>[]&gt;

	<span class="hljs-keyword">private</span> transfomer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyModelTransformer</span>()
	<span class="hljs-keyword">private</span> modelStore = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ModelStore</span>&lt;<span class="hljs-title class_">MyUiModel</span>&gt;()

	<span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
		<span class="hljs-variable language_">super</span>()

		<span class="hljs-variable language_">this</span>.<span class="hljs-property">modelFlow</span> = <span class="hljs-title function_">combine2</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">_dataListFlow</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">_isLoginFlow</span>, 
			<span class="hljs-keyword">async</span> (<span class="hljs-attr">dataList</span>: <span class="hljs-title class_">Data</span>[], <span class="hljs-attr">isLogin</span>: <span class="hljs-built_in">string</span>) =&gt; { <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">transfomer</span>.<span class="hljs-title function_">transform</span>(
			dataList, isLoginï¼Œ <span class="hljs-variable language_">this</span>.<span class="hljs-property">modelStore</span>)}
		)
		.<span class="hljs-title function_">stateIn</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">viewModelScope</span>, [])
	}

	<span class="hljs-title function_">updateIsLogin</span>(<span class="hljs-params">isLogin: <span class="hljs-built_in">boolean</span></span>) {
		<span class="hljs-variable language_">this</span>.<span class="hljs-property">_isLoginFlow</span>.<span class="hljs-property">value</span> = isLogin
	}

	<span class="hljs-title function_">updateData</span>(<span class="hljs-params">dataList: Data[]</span>) {
		<span class="hljs-variable language_">this</span>.<span class="hljs-property">_dataListFlow</span>.<span class="hljs-property">value</span> = dataList
	}

}


<span class="hljs-comment">// UI </span>
<span class="hljs-meta">@ComponentV2</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MyComponent</span> {
	<span class="hljs-keyword">private</span> scope = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scope</span>()
	<span class="hljs-keyword">private</span> viewModel = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyViewModel</span>()

	<span class="hljs-keyword">private</span> dataSource = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyUiModelDataSource</span>()

	<span class="hljs-title function_">aboutToAppear</span>(<span class="hljs-params"/>){
		<span class="hljs-variable language_">this</span>.<span class="hljs-property">scope</span>.<span class="hljs-title function_">launch</span>(<span class="hljs-keyword">async</span> (abortSignal) =&gt; {
			<span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">viewModel</span>.<span class="hljs-property">modelFlow</span>.<span class="hljs-title function_">collect</span>(<span class="hljs-title function_">async</span>(myModeList) =&gt; {
				<span class="hljs-variable language_">this</span>.<span class="hljs-property">dataSource</span>.<span class="hljs-title function_">submit</span>(myModeList)
			})
		})

	}


	<span class="hljs-title function_">build</span>(<span class="hljs-params"/>){
		<span class="hljs-title class_">List</span>(){
			<span class="hljs-title class_">LazyForEach</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">dataSource</span>, <span class="hljs-function">(<span class="hljs-params">item: MyUiModel, index</span>)=&gt;</span> {
	   			<span class="hljs-title class_">ListItem</span>(){
	   	 		 	<span class="hljs-title class_">Text</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>.<span class="hljs-property">state</span>).<span class="hljs-title function_">fontColor</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">nameColor</span>.<span class="hljs-property">state</span>)
	   			}
			}, <span class="hljs-function">(<span class="hljs-params">item: MyUiModel, index</span>) =&gt;</span> item.<span class="hljs-property">unionId</span>)
		}
	}

}

</code></pre>
<p>è¿™å¥—æ¶æ„è¿˜å¯ä»¥ç»§ç»­ä¼˜åŒ–ï¼Œæ¯”å¦‚ï¼Œå°†MyUiModel å¯¹åº”çš„Ui æ ·å¼ä¹Ÿæ”¾åˆ°UiModel å†…ï¼Œè¿™æ ·æ•°æ®æè¿°ä¸Uiæè¿°å°±ä¼šå†…èšåˆ°ä¸€ä¸ªç±»ä¸­ï¼Œ
MyComponent ç›¸å½“äºä¸€ä¸ªå£³ï¼Œæ²¡æœ‰ä»»ä½•Uiç»†èŠ‚ï¼Œä¼˜åŒ–åçš„MyUiModelå¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript">
<span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">CellBuildContext</span>&lt;T&gt; {
	<span class="hljs-attr">data</span>: T
	<span class="hljs-attr">context</span>: <span class="hljs-title class_">CellBuildContext</span> <span class="hljs-comment">// è¿™é‡Œæ”¾ç»™UIç”¨çš„contextä¿¡æ¯</span>
} 

<span class="hljs-keyword">class</span> <span class="hljs-title class_">MyUiModel</span> {
	<span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-variable constant_">UNION_ID</span> = <span class="hljs-number">0</span>
	<span class="hljs-keyword">readonly</span> unionId = <span class="hljs-string">`MyUiModel_<span class="hljs-subst">${MyUiModel.UNION_ID++}</span>`</span>
	<span class="hljs-keyword">readonly</span> <span class="hljs-attr">id</span>: <span class="hljs-built_in">string</span>

	<span class="hljs-keyword">readonly</span> name = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DistinctState</span>(<span class="hljs-string">''</span>)
	<span class="hljs-keyword">readonly</span> nameColor = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DistinctState</span>(<span class="hljs-string">''</span>)

 	<span class="hljs-keyword">readonly</span> cellBuilder = <span class="hljs-title function_">wrapBuilder</span>(<span class="hljs-title class_">Builder</span>)


	<span class="hljs-title function_">constructor</span>(<span class="hljs-params">id: <span class="hljs-built_in">string</span></span>) {
    	<span class="hljs-variable language_">super</span>()
    	<span class="hljs-variable language_">this</span>.<span class="hljs-property">id</span> = id
  	}

	<span class="hljs-keyword">static</span> <span class="hljs-title function_">newInstance</span>(<span class="hljs-attr">id</span>: <span class="hljs-built_in">string</span>) : <span class="hljs-title class_">MyUiModel</span>{
		<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyUiModel</span>(id)
	}

	<span class="hljs-keyword">static</span> <span class="hljs-title function_">makeId</span>(<span class="hljs-attr">data</span>: <span class="hljs-title class_">Data</span>): <span class="hljs-built_in">string</span> {
		<span class="hljs-keyword">return</span> <span class="hljs-string">`MyUiModel_<span class="hljs-subst">${data.id}</span>`</span>
	}

	<span class="hljs-title function_">update</span>(<span class="hljs-params">name: <span class="hljs-built_in">string</span>, nameColor: <span class="hljs-built_in">string</span></span>) {
		<span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>.<span class="hljs-title function_">update</span>(name)
		<span class="hljs-variable language_">this</span>.<span class="hljs-property">nameColor</span>.<span class="hljs-title function_">update</span>(nameColor)
	}

}

<span class="hljs-meta">@Builder</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Builder</span>(<span class="hljs-params">ctx: CellBuildContext&lt;MyUiModel&gt;</span>) {
	<span class="hljs-title class_">Text</span>(ctx.<span class="hljs-property">data</span>.<span class="hljs-property">name</span>.<span class="hljs-property">state</span>).<span class="hljs-title function_">fontColor</span>(ctx.<span class="hljs-property">data</span>.<span class="hljs-property">nameColor</span>.<span class="hljs-property">state</span>)	
}

</code></pre>
<p>UI ä¼šå˜æˆè¿™æ ·ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@ComponentV2</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MyComponent</span> {
	<span class="hljs-keyword">private</span> scope = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scope</span>()
	<span class="hljs-keyword">private</span> viewModel = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyViewModel</span>()

	<span class="hljs-keyword">private</span> dataSource = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyUiModelDataSource</span>()

	<span class="hljs-title function_">aboutToAppear</span>(<span class="hljs-params"/>){
		<span class="hljs-variable language_">this</span>.<span class="hljs-property">scope</span>.<span class="hljs-title function_">launch</span>(<span class="hljs-keyword">async</span> (abortSignal) =&gt; {
			<span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">viewModel</span>.<span class="hljs-property">modelFlow</span>.<span class="hljs-title function_">collect</span>(<span class="hljs-title function_">async</span>(myModeList) =&gt; {
				<span class="hljs-variable language_">this</span>.<span class="hljs-property">dataSource</span>.<span class="hljs-title function_">submit</span>(myModeList)
			})
		})

	}


	<span class="hljs-title function_">build</span>(<span class="hljs-params"/>){
		<span class="hljs-title class_">List</span>(){
			<span class="hljs-title class_">LazyForEach</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">dataSource</span>, <span class="hljs-function">(<span class="hljs-params">item: MyUiModel, index</span>)=&gt;</span> {
	   			<span class="hljs-title class_">ListItem</span>(){
	   	 		 	item.<span class="hljs-property">cellBuilder</span>.<span class="hljs-title function_">builder</span>({
	   	 		 		<span class="hljs-attr">data</span>: item
	   	 		 		<span class="hljs-attr">context</span>: {} <span class="hljs-keyword">as</span> <span class="hljs-title class_">CellBuildContext</span> <span class="hljs-comment">// è¿™é‡Œæ”¾ç»™UIç”¨çš„contextä¿¡æ¯</span>
	   	 		 	})
	   			}
			}, <span class="hljs-function">(<span class="hljs-params">item: MyUiModel, index</span>) =&gt;</span> item.<span class="hljs-property">unionId</span>)
		}
	}

}
</code></pre>
<hr/>
<p>å…³äºã€ŒArkTs å¼€å‘æ¶æ„ã€çš„ä»‹ç»å°±å‘Šä¸€æ®µè½äº†ï¼Œå¦‚æœå¤§å®¶åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­æœ‰ä»»ä½•é—®é¢˜ï¼Œæ¬¢è¿ç•™è¨€è®¨è®ºã€‚
<strong>Androidå·¥ç¨‹å¸ˆçš„kmp(kotlin/js) for harmonyå¼€å‘æŒ‡å—</strong> è¿™ä¸€ç³»åˆ—æ–‡ç« æ—¨åœ¨ç³»ç»Ÿæ€§çš„æä¾›ä¸€å¥—å®Œæ•´çš„<strong>Kotlin/Js For Harmony</strong>çš„è§£å†³æ–¹æ¡ˆã€‚åç»­ç³»åˆ—æ–‡ç« ä¼šä»‹ç»å¦‚ä½•å¤ç”¨ViewModelï¼Œåºåˆ—åŒ–å¡é¡¿ä¼˜åŒ–ï¼Œé¸¿è’™å¼€å‘å¥—ä»¶ï¼Œæ¶æ„è®¾è®¡æ€è·¯ç­‰ç­‰ï¼Œæ¬¢è¿å…³æ³¨ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[AI Coding å…¥é—¨æ•™ç¨‹ç³»åˆ—ï¼šäºŒã€Trae çš„æ ¸å¿ƒåŠŸèƒ½å…¥é—¨]]></title>    <link>https://juejin.cn/post/7580287383787356203</link>    <guid>https://juejin.cn/post/7580287383787356203</guid>    <pubDate>2025-12-06T05:08:01.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7580287383787356203" data-draft-id="7580204190028480518" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="AI Coding å…¥é—¨æ•™ç¨‹ç³»åˆ—ï¼šäºŒã€Trae çš„æ ¸å¿ƒåŠŸèƒ½å…¥é—¨"/> <meta itemprop="keywords" content="Trae"/> <meta itemprop="datePublished" content="2025-12-06T05:08:01.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="äº”å·å‚æˆ¿"/> <meta itemprop="url" content="https://juejin.cn/user/1731066903142492"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            AI Coding å…¥é—¨æ•™ç¨‹ç³»åˆ—ï¼šäºŒã€Trae çš„æ ¸å¿ƒåŠŸèƒ½å…¥é—¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1731066903142492/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    äº”å·å‚æˆ¿
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-06T05:08:01.000Z" title="Sat Dec 06 2025 05:08:01 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>ç›®æ ‡</strong>ï¼šæŒæ¡Traeçš„æ ¸å¿ƒAIåŠŸèƒ½ï¼ŒåŒ…æ‹¬<strong>Builderæ¨¡å¼</strong>ï¼ˆä»0åˆ°1ç”Ÿæˆé¡¹ç›®ï¼‰ã€<strong>æ™ºèƒ½é—®ç­”</strong>ï¼ˆè§£å†³ä»£ç é—®é¢˜ï¼‰ã€<strong>ä»£ç è‡ªåŠ¨è¡¥å…¨</strong>ï¼ˆæå‡ç¼–å†™æ•ˆç‡ï¼‰ã€‚</p>
<h3 data-id="heading-0"><strong>ä¸€ã€ Builderæ¨¡å¼ï¼šç”¨è‡ªç„¶è¯­è¨€ç”Ÿæˆå®Œæ•´é¡¹ç›®</strong>â€‹</h3>
<p><strong>åŠŸèƒ½è¯´æ˜</strong>ï¼šBuilderæ¨¡å¼æ˜¯Traeçš„â€œé‡è¦åŠŸèƒ½â€ï¼Œåªéœ€è¾“å…¥è‡ªç„¶è¯­è¨€éœ€æ±‚ï¼ˆå¦‚â€œç”Ÿæˆä¸€ä¸ªPythonè´ªåƒè›‡æ¸¸æˆâ€ï¼‰ï¼ŒAIä¼šè‡ªåŠ¨å®Œæˆ<strong>ä»£ç ç”Ÿæˆã€ä¾èµ–å®‰è£…ã€æ–‡ä»¶åˆ›å»º</strong>ç­‰å…¨æµç¨‹ï¼Œæ— éœ€æ‰‹åŠ¨é…ç½®ã€‚</p>
<p><strong>æ“ä½œæ­¥éª¤ï¼ˆä»¥â€œç”Ÿæˆå¤©æ°”å¡ç‰‡HTMLâ€ä¸ºä¾‹ï¼‰</strong> ï¼š</p>
<ol>
<li>
<p>åœ¨ç”µè„‘ä¸Šæ–°å»ºä¸€ä¸ªç©ºæ–‡ä»¶å¤¹ï¼ˆå¦‚â€œweather-cardâ€ï¼‰ï¼Œç”¨Traeæ‰“å¼€è¯¥æ–‡ä»¶å¤¹ï¼›</p>
</li>
<li>
<p>ç‚¹å‡»å³ä¾§AIåŠ©æ‰‹é¢æ¿çš„â€œ@Builderâ€æŒ‰é’®</p>
</li>
<li>
<p>è¾“å…¥éœ€æ±‚ï¼šâ€œå¸®æˆ‘åˆ¶ä½œä¸€å¼ æ‹Ÿæ€é£æ ¼çš„å¡ç‰‡ï¼Œå±•ç¤ºä¸Šæµ·ä»Šå¤©çš„å¤©æ°”ï¼Œä»¥htmlæ–‡ä»¶è¾“å‡ºâ€ï¼›</p>
</li>
</ol>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/86adeee071194aada00ac2df8e7cfd5d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LqU5Y-35Y6C5oi_:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765602481&amp;x-signature=Dt4Ow48gohl0UHlHHtVakUSpReo%3D" alt="image.png" loading="lazy"/></p>
<ol start="7">
<li>AIä¼šè‡ªåŠ¨ç”Ÿæˆä»£ç ï¼Œæ˜¾ç¤ºåœ¨ä¸­é—´ç¼–è¾‘åŒºï¼Œç‚¹å‡»â€œè¿è¡Œâ€æŒ‰é’®å³å¯åœ¨æµè§ˆå™¨ä¸­æŸ¥çœ‹æ•ˆæœã€‚</li>
</ol>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/90838a493c464fc2b9fae243ba3fba17~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LqU5Y-35Y6C5oi_:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765602481&amp;x-signature=TrTN4q8eoCsAWi6sFGBvJEnWQf4%3D" alt="image.png" loading="lazy"/></p>
<p><strong>é¿å‘æŒ‡å—</strong>ï¼š</p>
<ul>
<li>éœ€æ±‚æè¿°è¶Šå…·ä½“ï¼Œç”Ÿæˆçš„ä»£ç è¶Šç¬¦åˆé¢„æœŸï¼ˆå¦‚â€œæ‹Ÿæ€é£æ ¼â€éœ€æ˜ç¡®â€œåœ†è§’ã€é˜´å½±ã€æµ…è‰²èƒŒæ™¯â€ï¼‰ï¼›</li>
<li>è‹¥ç”Ÿæˆçš„ä»£ç æœ‰è¯¯ï¼Œå¯ç›´æ¥åœ¨ç¼–è¾‘åŒºä¿®æ”¹ï¼ŒAIä¼šè‡ªåŠ¨å­¦ä¹ ä½ çš„ä¿®æ”¹ä¹ æƒ¯ã€‚</li>
</ul>
<h3 data-id="heading-1"><strong>äºŒã€ æ™ºèƒ½é—®ç­”ï¼šè§£å†³ä»£ç é—®é¢˜çš„â€œéšèº«è€å¸ˆâ€</strong> â€‹</h3>
<p><strong>åŠŸèƒ½è¯´æ˜</strong>ï¼šå³ä¾§AIåŠ©æ‰‹é¢æ¿æ”¯æŒ<strong>è‡ªç„¶è¯­è¨€æé—®</strong>ï¼Œå¯è§£å†³â€œä»£ç æŠ¥é”™ã€é€»è¾‘ä¼˜åŒ–ã€è¯­æ³•è§£é‡Šâ€ç­‰é—®é¢˜ï¼Œç”šè‡³èƒ½â€œçœ‹æ‡‚â€ç»ˆç«¯æŠ¥é”™ä¿¡æ¯ã€‚<strong>æ“ä½œæ­¥éª¤ï¼ˆä»¥â€œä¿®å¤Pythonç¼©è¿›é”™è¯¯â€ä¸ºä¾‹ï¼‰</strong> ï¼š</p>
<ol>
<li>åœ¨ç¼–è¾‘åŒºç¼–å†™ä¸€æ®µæœ‰ç¼©è¿›é”™è¯¯çš„Pythonä»£ç ï¼ˆå¦‚<code>if True: print("Hello")</code>ï¼Œç¼©è¿›ä¸ä¸€è‡´ï¼‰ï¼›</li>
</ol>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0b7046002d384caca383d3ac817852ea~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LqU5Y-35Y6C5oi_:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765602481&amp;x-signature=kH3VQAoH%2BtjFglrWqWvVjBmgaYs%3D" alt="image.png" loading="lazy"/></p>
<ol start="3">
<li>é€‰ä¸­é”™è¯¯çš„ä»£ç è¡Œï¼Œå³é”®é€‰æ‹©â€œæ·»åŠ åˆ°å¯¹è¯â€</li>
</ol>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3a8583ce55914f30a7c939400e552b60~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LqU5Y-35Y6C5oi_:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765602481&amp;x-signature=GJ2cHoIShC4sIge1islF%2F2J8yO8%3D" alt="image.png" loading="lazy"/></p>
<ol start="5">
<li>è¾“å…¥é—®é¢˜ï¼šâ€œè¿™æ®µä»£ç ä¸ºä»€ä¹ˆæŠ¥é”™ï¼Ÿâ€ï¼ŒAIä¼šè‡ªåŠ¨åˆ†æé”™è¯¯åŸå› ï¼ˆâ€œç¼©è¿›ä¸ä¸€è‡´â€ï¼‰ï¼Œå¹¶ç»™å‡ºä¿®å¤æ–¹æ¡ˆï¼ˆè°ƒæ•´ç¼©è¿›ä¸º4ä¸ªç©ºæ ¼ï¼‰ã€‚</li>
</ol>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f574ab98b3994c6a8977331b56ed2b04~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LqU5Y-35Y6C5oi_:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765602481&amp;x-signature=hcgizyVbwDL%2B7oyiOxorl3bbRm0%3D" alt="image.png" loading="lazy"/></p>
<p><strong>æŠ€å·§æç¤º</strong>ï¼š</p>
<ul>
<li>ç›´æ¥æ‹–æ‹½ç»ˆç«¯æŠ¥é”™ä¿¡æ¯åˆ°AIå¯¹è¯æ¡†ï¼ŒAIä¼šå¿«é€Ÿå®šä½é—®é¢˜ï¼ˆæ— éœ€å¤åˆ¶ç²˜è´´ï¼‰ï¼›</li>
<li>å¯ä»¥ä¸Šä¼ æœ¬åœ°æ–‡æ¡£ï¼ˆå¦‚æŠ€æœ¯æ‰‹å†ŒPDFï¼‰ï¼Œè®©AIå­¦ä¹ åè§£ç­”ç›¸å…³é—®é¢˜ã€‚</li>
</ul>
<h3 data-id="heading-2"><strong>ä¸‰ã€ ä»£ç è‡ªåŠ¨è¡¥å…¨ï¼šå†™ä»£ç çš„â€œåŠ é€Ÿé”®â€</strong> â€‹</h3>
<p><strong>åŠŸèƒ½è¯´æ˜</strong>ï¼šTraeæ”¯æŒ<strong>ä¸Šä¸‹æ–‡æ„ŸçŸ¥çš„ä»£ç è¡¥å…¨</strong>ï¼Œè¾“å…¥ä¸­æ–‡æ³¨é‡Šæˆ–ä»£ç ç‰‡æ®µæ—¶ï¼ŒAIä¼šè‡ªåŠ¨è¡¥å…¨å‡½æ•°æˆ–ä»£ç å—ï¼Œå¤§å¹…æå‡ç¼–å†™æ•ˆç‡ã€‚<strong>æ“ä½œæ­¥éª¤ï¼ˆä»¥â€œç”Ÿæˆè®¡ç®—ç§¯åˆ†å‡½æ•°â€ä¸ºä¾‹ï¼‰</strong> ï¼š</p>
<ol>
<li>åœ¨ç¼–è¾‘åŒºè¾“å…¥ä¸­æ–‡æ³¨é‡Šï¼šâ€œ// è®¡ç®—ç”¨æˆ·ç§¯åˆ†â€ï¼›</li>
</ol>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3c8b18ac90694433b37a8a62afffc738~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LqU5Y-35Y6C5oi_:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765602481&amp;x-signature=d5E4m2tozY9jwebPcAQF1IxHNz0%3D" alt="image.png" loading="lazy"/></p>
<ol start="2">
<li>æŒ‰ä¸‹<code>Tab</code>é”®ï¼ŒAIä¼šè‡ªåŠ¨ç”Ÿæˆç±»ä¼¼ä»£ç </li>
</ol>
<pre><code class="hljs language-js" lang="js">def <span class="hljs-title function_">calculate_points</span>(score):
    <span class="hljs-keyword">if</span> score &gt;= <span class="hljs-number">90</span>:
        <span class="hljs-keyword">return</span> <span class="hljs-number">100</span>
    elif score &gt;= <span class="hljs-number">80</span>:
        <span class="hljs-keyword">return</span> <span class="hljs-number">80</span>
    elif score &gt;= <span class="hljs-number">70</span>:
        <span class="hljs-keyword">return</span> <span class="hljs-number">60</span>
    elif score &gt;= <span class="hljs-number">60</span>:
        <span class="hljs-keyword">return</span> <span class="hljs-number">40</span>
    <span class="hljs-attr">else</span>:
        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>
</code></pre>
<p><strong>æŠ€å·§æç¤º</strong>ï¼š</p>
<ul>
<li>æ”¯æŒæ‹¼éŸ³çº é”™ï¼ˆå¦‚è¾“å…¥â€œjifenâ€ï¼ŒAIä¼šè”æƒ³â€œç§¯åˆ†â€ï¼‰ï¼›</li>
<li>å¯ä»¥è‡ªå®šä¹‰â€œä»£ç ç‰‡æ®µåº“â€ï¼Œå°†å¸¸ç”¨ä»£ç ï¼ˆå¦‚<code>for</code>å¾ªç¯ã€<code>if</code>è¯­å¥ï¼‰ä¿å­˜ä¸ºç‰‡æ®µï¼Œå¿«é€Ÿè°ƒç”¨ã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[fridaåŸºç¡€ soç¯‡ï¼ˆä¸€ï¼‰]]></title>    <link>https://juejin.cn/post/7580210602078928930</link>    <guid>https://juejin.cn/post/7580210602078928930</guid>    <pubDate>2025-12-06T04:37:35.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7580210602078928930" data-draft-id="7580216638110007311" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="fridaåŸºç¡€ soç¯‡ï¼ˆä¸€ï¼‰"/> <meta itemprop="keywords" content="é€†å‘"/> <meta itemprop="datePublished" content="2025-12-06T04:37:35.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Jevely5400"/> <meta itemprop="url" content="https://juejin.cn/user/3386151542461320"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            fridaåŸºç¡€ soç¯‡ï¼ˆä¸€ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3386151542461320/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Jevely5400
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-06T04:37:35.000Z" title="Sat Dec 06 2025 04:37:35 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">è·å–process id</h3>
<p>Process.id</p>
<h3 data-id="heading-1">è·å–å·²åŠ è½½çš„so</h3>
<p>Process.enumerateModules()</p>
<h3 data-id="heading-2">è·å–soçš„å…·ä½“ä¿¡æ¯</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">var</span> process_obj_Module_Arr = <span class="hljs-title class_">Process</span>.<span class="hljs-title function_">enumerateModules</span>();
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> index = <span class="hljs-number">0</span>; index &lt; process_obj_Module_Arr.<span class="hljs-property">length</span>; index++) {
    <span class="hljs-keyword">const</span> element = process_obj_Module_Arr[index];

    <span class="hljs-keyword">if</span>(element.<span class="hljs-property">path</span>.<span class="hljs-title function_">indexOf</span>(<span class="hljs-string">"c_project"</span>)!=-<span class="hljs-number">1</span>){
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(element.<span class="hljs-property">name</span>)
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(element.<span class="hljs-property">base</span>)
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(element.<span class="hljs-property">size</span>)
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(element.<span class="hljs-property">path</span>)
    }

}
</code></pre>
<h3 data-id="heading-3">è·å–å•ç‹¬ä¸€ä¸ªsoå†…çš„æ–¹æ³•è¯¦æƒ…</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> hooks = <span class="hljs-title class_">Module</span>.<span class="hljs-title function_">load</span>(<span class="hljs-string">"/data/app/~~wq4OApPMRngT8iCxA8RE9w==/c_project-F3_SK7jww3YPIqvUgDkEsw==/base.apk!/lib/arm64-v8a/libc_project.so"</span>);
<span class="hljs-keyword">var</span> imports = hooks.<span class="hljs-title function_">enumerateImports</span>();
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> index = <span class="hljs-number">0</span>; index &lt; imports.<span class="hljs-property">length</span>; index++) {
    <span class="hljs-keyword">const</span> element = imports[index];
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(element.<span class="hljs-property">type</span>)
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(element.<span class="hljs-property">name</span>)
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(element.<span class="hljs-property">module</span>)
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(element.<span class="hljs-property">address</span>)
}
</code></pre>
<h3 data-id="heading-4">é€šè¿‡æ–¹æ³•æ‰¾åˆ°soåœ°å€</h3>
<p>Module.findExportByName(null,"strstr")</p>
<h3 data-id="heading-5">é€šè¿‡soåœ°å€æ‰¾åˆ°soä¿¡æ¯</h3>
<p>Process.findModuleByAddress("0x72c194c030")</p>
<h3 data-id="heading-6">æ‰¾åˆ°soçš„åŸºåœ°å€</h3>
<p>Module.findBaseAddress("libc_project.so")</p>
<h3 data-id="heading-7">æ ¹æ®æ¨¡å—åç§°å’Œpatternåç§°æ‰¾åˆ°idaä¸Šçš„åœ°å€</h3>
<p>æ‰¾åˆ°soåœ°å€å’Œpatternåœ°å€åï¼Œæœ€åå¯ä»¥ä½¿ç”¨è®¡ç®—çš„HexåŠŸèƒ½ï¼Œç›¸å‡ï¼Œå°±å¯ä»¥å¾—åˆ°idaä¸­æ–¹æ³•çš„åœ°å€</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">var</span> pattern = <span class="hljs-string">"FF C3 01 D1 FD 7B 06 A9"</span>;

<span class="hljs-comment">//æ‰¾åˆ°æ¨¡å—åœ°å€</span>
<span class="hljs-keyword">var</span> model = <span class="hljs-title class_">Process</span>.<span class="hljs-title function_">findModuleByName</span>(<span class="hljs-string">"libc_project.so"</span>);

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"model address = "</span>,model.<span class="hljs-property">base</span>)

<span class="hljs-comment">//é€šè¿‡scanæ–¹æ³•æ‰¾åˆ°patternåŒ¹é…çš„åœ°å€</span>
<span class="hljs-title class_">Memory</span>. <span class="hljs-title function_">scan</span>(model.<span class="hljs-property">base</span>, model.<span class="hljs-property">size</span>,pattern,{
    <span class="hljs-attr">onMatch</span>:<span class="hljs-keyword">function</span>(<span class="hljs-params">address, size</span>){
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"find: address = "</span>,address.<span class="hljs-title function_">toString</span>())
        
        <span class="hljs-comment">//idaåœ°å€</span>
        <span class="hljs-keyword">var</span> result = model.<span class="hljs-property">base</span> - address.<span class="hljs-title function_">toString</span>()
    },
    <span class="hljs-attr">onError</span>:<span class="hljs-keyword">function</span>(<span class="hljs-params">reason</span>){
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"fail:"</span>,reason)
    },
    <span class="hljs-attr">onComplete</span>:<span class="hljs-keyword">function</span>(<span class="hljs-params"/>){
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"finish"</span>)
    }
})
</code></pre>
<h3 data-id="heading-8">ç”³è¯·10é•¿åº¦çš„å†…å­˜ï¼Œå¹¶æ‰“å°å‡ºæ¥</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">//ç”³è¯·å†…å­˜ï¼Œé•¿åº¦ä¸º10</span>
<span class="hljs-keyword">var</span> r = <span class="hljs-title class_">Memory</span>.<span class="hljs-title function_">alloc</span>(<span class="hljs-number">10</span>);

<span class="hljs-comment">//ç”¨hexdumpæ‰“å°</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">hexdump</span>(r,{
    <span class="hljs-attr">offset</span>:<span class="hljs-number">0</span>,<span class="hljs-comment">//åç§»</span>
    <span class="hljs-attr">length</span>:<span class="hljs-number">10</span>,<span class="hljs-comment">//é•¿åº¦</span>
    <span class="hljs-attr">header</span>:<span class="hljs-literal">true</span>,<span class="hljs-comment">//å¤´éƒ¨</span>
    <span class="hljs-attr">ansi</span>:<span class="hljs-literal">true</span><span class="hljs-comment">//æ˜¯å¦æœ‰é¢œè‰²</span>
}));
</code></pre>
<h3 data-id="heading-9">ç”³è¯·utf-8çš„å†…å­˜</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">var</span> r = <span class="hljs-title class_">Memory</span>.<span class="hljs-title function_">allocUtf8String</span>(<span class="hljs-string">"jevely"</span>)
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">hexdump</span>(r,{
    <span class="hljs-attr">offset</span>:<span class="hljs-number">0</span>,
    <span class="hljs-attr">length</span>:<span class="hljs-number">10</span>,
    <span class="hljs-attr">header</span>:<span class="hljs-literal">true</span>,
    <span class="hljs-attr">ansi</span>:<span class="hljs-literal">true</span>
}));
</code></pre>
<h3 data-id="heading-10">è¯»å–utf-8å†…å­˜</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Memory</span>.<span class="hljs-title function_">readUtf8String</span>(r));
</code></pre>
<h3 data-id="heading-11">å¤åˆ¶å†…å­˜</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">var</span> r = <span class="hljs-title class_">Memory</span>.<span class="hljs-title function_">allocUtf8String</span>(<span class="hljs-string">"jevely"</span>)

<span class="hljs-comment">//ç”³è¯·æ–°çš„å†…å­˜</span>
<span class="hljs-keyword">var</span> newaddress = <span class="hljs-title class_">Memory</span>.<span class="hljs-title function_">alloc</span>(<span class="hljs-number">10</span>)
<span class="hljs-comment">//å¤åˆ¶é•¿åº¦ä¸º10çš„å†…å­˜</span>
<span class="hljs-title class_">Memory</span>.<span class="hljs-title function_">copy</span>(newaddress,r,<span class="hljs-number">10</span>)
<span class="hljs-comment">//æ‰“å°</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">hexdump</span>(newaddress))
</code></pre>
<h3 data-id="heading-12">å¾€å†…å­˜å†™ä¸œè¥¿</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">//å°†stringè½¬ä¸º16è¿›åˆ¶</span>
<span class="hljs-keyword">var</span> arr = [<span class="hljs-number">0x6a</span>, <span class="hljs-number">0x65</span>, <span class="hljs-number">0x76</span>, <span class="hljs-number">0x65</span>, <span class="hljs-number">0x6c</span>, <span class="hljs-number">0x79</span>];
<span class="hljs-comment">//ç”³è¯·å†…å­˜</span>
<span class="hljs-keyword">const</span> r = <span class="hljs-title class_">Memory</span>.<span class="hljs-title function_">alloc</span>(arr.<span class="hljs-property">length</span>);
<span class="hljs-comment">//å°†å†…å®¹å†™å…¥å†…å­˜</span>
<span class="hljs-title class_">Memory</span>.<span class="hljs-title function_">writeByteArray</span>(r,arr);
<span class="hljs-comment">//æ‰“å°</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">hexdump</span>(r,{
    <span class="hljs-attr">offset</span>:<span class="hljs-number">0</span>,
    <span class="hljs-attr">length</span>:arr.<span class="hljs-property">length</span>,
    <span class="hljs-attr">header</span>:<span class="hljs-literal">true</span>,
    <span class="hljs-attr">ansi</span>:<span class="hljs-literal">true</span>
}))
</code></pre>
<h3 data-id="heading-13">è¯»å–å†…å­˜å†…å®¹</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">var</span> result = <span class="hljs-title class_">Memory</span>.<span class="hljs-title function_">readByteArray</span>(r,arr.<span class="hljs-property">length</span>)
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(result)
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[AIå¤§æ¨¡å‹Â·ç™½çš®ä¹¦ | AI æ™ºèƒ½ä½“æ‰‹å†Œ-è°·æ­Œ]]></title>    <link>https://juejin.cn/post/7580251192330731566</link>    <guid>https://juejin.cn/post/7580251192330731566</guid>    <pubDate>2025-12-06T05:54:15.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7580251192330731566" data-draft-id="7580259796668579886" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="AIå¤§æ¨¡å‹Â·ç™½çš®ä¹¦ | AI æ™ºèƒ½ä½“æ‰‹å†Œ-è°·æ­Œ"/> <meta itemprop="keywords" content="Agent,LLM,ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2025-12-06T05:54:15.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="AIå¤§æ¨¡å‹"/> <meta itemprop="url" content="https://juejin.cn/user/3817967696221534"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            AIå¤§æ¨¡å‹Â·ç™½çš®ä¹¦ | AI æ™ºèƒ½ä½“æ‰‹å†Œ-è°·æ­Œ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3817967696221534/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    AIå¤§æ¨¡å‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-06T05:54:15.000Z" title="Sat Dec 06 2025 05:54:15 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#383838;font-size:15px;line-height:30px;letter-spacing:2px;word-break:break-word;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;scroll-behavior:smooth;background-image:linear-gradient(0deg,transparent 24%,rgba(201,195,195,.329) 25%,hsla(0,8%,80.4%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent),linear-gradient(90deg,transparent 24%,rgba(204,196,196,.226) 25%,hsla(0,4%,66.1%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent);background-color:#fff;background-size:50px 50px;padding-bottom:60px}.markdown-body ::selection{color:#fff;background-color:#a862ea}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin:24px 0 12px;color:#a862ea}.markdown-body h1{line-height:2;font-size:1.4em}.markdown-body h1~p:first-of-type:first-letter{color:#a862ea;float:left;font-size:2em;margin-right:.4em;font-weight:bolder}.markdown-body h2{font-size:1.2em}.markdown-body h3{font-size:1.1em}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;padding-left:.2em}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#a862ea}.markdown-body ol li.task-list-item,.markdown-body ul li.task-list-item{list-style:none}.markdown-body ol li.task-list-item ol,.markdown-body ol li.task-list-item ul,.markdown-body ul li.task-list-item ol,.markdown-body ul li.task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:10px}.markdown-body a,.markdown-body code,.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6,.markdown-body li,.markdown-body p{opacity:.85;vertical-align:baseline;transition:all .1s ease}.markdown-body a:hover,.markdown-body code:hover,.markdown-body h1:hover,.markdown-body h2:hover,.markdown-body h3:hover,.markdown-body h4:hover,.markdown-body h5:hover,.markdown-body h6:hover,.markdown-body li:hover,.markdown-body p:hover{opacity:1}.markdown-body a{display:inline-block;color:#a862ea;cursor:pointer;text-decoration:none;position:relative}.markdown-body a:after{content:"";position:absolute;width:98%;height:1px;bottom:0;left:0;transform:scaleX(0);background-color:#a862ea;transform-origin:bottom right;transition:transform .3s ease-in-out}.markdown-body a:hover:after{transform:scaleX(1);transform-origin:bottom left}.markdown-body a:active,.markdown-body a:link{color:#a862ea}.markdown-body img{max-width:100%;user-select:none;margin:1em 0;transition:transform .2s ease 0s;background-color:#f8f5ff;box-shadow:0 0 10px #e7daff}.markdown-body img:hover{opacity:1;box-shadow:0 0 20px #e7daff;transform:translateY(-1px)}.markdown-body blockquote{padding:.5em 1em;margin:12px 0;border-top-left-radius:2px;border-bottom-left-radius:2px;border-left:3px solid #a862ea;background-color:#f8f5ff}.markdown-body blockquote&gt;p{margin:0}.markdown-body .math{font-style:italic;margin:12px 0;padding:.5em 1em;background-color:#f8f5ff}.markdown-body .math&gt;p{margin:0}.markdown-body code{padding:2px .4em;overflow-x:auto;color:#a862ea;font-weight:700;word-break:break-word;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;background-color:#f8f5ff}.markdown-body pre{margin:2em 0}.markdown-body pre&gt;code{display:block;padding:1.5em;word-break:normal;font-size:.9em;font-style:normal;font-weight:400;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;line-height:18px;color:#383838;border-radius:2px;scroll-behavior:smooth;box-shadow:0 0 10px #e7daff}.markdown-body pre&gt;code:hover{box-shadow:0 0 20px #e7daff}.markdown-body pre&gt;code::-webkit-scrollbar{height:6px;background-color:#f8f5ff}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:#e7daff;border-bottom-left-radius:3px;border-bottom-right-radius:3px}.markdown-body hr{margin:2em 0;border-top:1px solid #a862ea}.markdown-body table{width:100%;font-size:12px;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{color:#a862ea;background:#f8f5ff}.markdown-body td,.markdown-body th{padding:.5em;border:1px solid #e7daff}.markdown-body tr{background-color:#f8f5ff}@media (max-width:720px){.markdown-body{font-size:12px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æœ¬æ–‡è¾ƒé•¿ï¼Œå»ºè®®ç‚¹èµæ”¶è—ã€‚æ›´å¤šAIå¤§æ¨¡å‹åº”ç”¨å¼€å‘å­¦ä¹ è§†é¢‘åŠèµ„æ–™ï¼Œåœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fhy.zhipoai.cn%2F" target="_blank" title="https://hy.zhipoai.cn/" ref="nofollow noopener noreferrer">æ™ºæ³ŠAI</a>ã€‚</p>
</blockquote>
<h3 data-id="heading-0">AI æ™ºèƒ½ä½“æ‰‹å†Œ-è°·æ­Œ</h3>
<p>æœ¬æ‰‹å†Œã€ŠAIæ™ºèƒ½ä½“æ‰‹å†Œã€‹ç”±Google Cloudå‘å¸ƒï¼Œæ—¨åœ¨å±•ç¤ºå¦‚ä½•åˆ©ç”¨AIæ™ºèƒ½ä½“æå‡ä¼ä¸šæ•ˆç‡ä¸åˆ›æ–°èƒ½åŠ›ã€‚æ‰‹å†Œå¼ºè°ƒï¼ŒAIæ™ºèƒ½ä½“å¹¶éä¼ ç»Ÿè‡ªåŠ¨åŒ–å·¥å…·æˆ–èŠå¤©æœºå™¨äººï¼Œè€Œæ˜¯èƒ½å¤Ÿæ‰§è¡Œå¤æ‚å·¥ä½œæµã€ç†è§£å¤šæºä¿¡æ¯å¹¶ä»£è¡¨å‘˜å·¥å®Œæˆä»»åŠ¡çš„é«˜çº§æ™ºèƒ½ç³»ç»Ÿã€‚é¢„è®¡åˆ°2028å¹´ï¼Œ33%çš„ä¼ä¸šè½¯ä»¶å°†é›†æˆæ™ºèƒ½ä½“AIï¼Œæ˜¾è‘—æ¨åŠ¨å·¥ä½œæ¨¡å¼çš„æ™ºèƒ½åŒ–è½¬å‹ã€‚</p>
<p>Â·Â·Â·</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1811ed826e614426add96c93b5c4d757~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765605255&amp;x-signature=M8auDJoaXjjshldj%2BT%2Bevr%2BtvEM%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-1">éƒ¨åˆ†å†…å®¹ é¢„è§ˆ</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f7643581b94844d48f2a0175ac7b52d5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765605255&amp;x-signature=Xi8Kot%2BzFzAbFj4aAUEac27ZyEk%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1ddf23752eb7499d8bfc0c96f09ca3bc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765605255&amp;x-signature=0WTSZxYfJADPZjHqiBMSFY1VDMM%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/336abd11a1a64982b1152259f9e82244~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765605255&amp;x-signature=e3c6sr8REs3SkdwBAaR0lHtBsxI%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ad13bd5c1bbf4aadbba234d17458cee6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765605255&amp;x-signature=Ruab3hwauxqE5NaonLBNot1HAsQ%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a8f12c0305144b37a7190f08d3480fbf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765605255&amp;x-signature=%2B52AOhvmWevazqVPZNcZCoF8dVI%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b843447147b0442082fa39e5fc1aa696~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765605255&amp;x-signature=plrUC5mN%2BFRLPOAre3y3U%2F6MJFQ%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/af47ca10521d48aebd5b3f24fe685899~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765605255&amp;x-signature=qMXBS6q2%2FnniGeXOIkFLdXdLQM4%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/042486828ca942fdbee230fb7c0f342a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765605255&amp;x-signature=htyQozbHh2jf%2FYG%2Fn%2BC9%2BGbFklc%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d15f98deddb24d17ac339f7445b8d124~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765605255&amp;x-signature=YmYq5phk87aFZmA1aXw%2BYzfvB%2Bw%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/094d57dce6f64eb28fcce6f1b4e116e7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765605255&amp;x-signature=q4n33jFtvFiMGv5fVG4oDqpV70w%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d31ff024f9a94c91b8ff2297fc2d37ac~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765605255&amp;x-signature=Bcp%2BlnKcLmuerBm5h1XecpnVJ%2FU%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bfa1e828ee4c433ea45b26374f09e50f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765605255&amp;x-signature=R89HkFdb1UF1UinozUKwD35IlBU%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d12e41d17ba540299310b79b61dc227d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765605255&amp;x-signature=jNXJJ3dlAMOod%2BH4Y0plb8sktDE%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cbf9d3751bcf4c3cbbd0e1f94dab6809~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765605255&amp;x-signature=VAp8irAmiN9i1NK0G0r7MT%2Fz%2Fxo%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/77d59b6650cd46e8b11aee6bdbf85190~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765605255&amp;x-signature=IYHrLAiFVfzKhHjROjGnDedYs5U%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b36e8a4a60524dc09b516fadd000876c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765605255&amp;x-signature=Z54cQ6WeSrUZrzot2A4%2By0loB%2Bo%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e9295751a46f4269946812584a2b64d1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765605255&amp;x-signature=XMG6LKbaM30ERHhItfD5HeOjBc0%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/168db7bd76734143b5f72c122ee9d83f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765605255&amp;x-signature=li3IL9hj2wHzhpdedtUfMdW1mUU%3D" alt="" loading="lazy"/></p>
<p>......</p>
<p>æ–‡â”‚Google Cloudå‘å¸ƒ</p>
<p><strong>æœ¬æŠ¥å‘Šå…±è®¡ï¼š46é¡µã€‚</strong></p>
<h2 data-id="heading-2">å­¦ä¹ èµ„æºæ¨è</h2>
<p>å¦‚æœä½ æƒ³æ›´æ·±å…¥åœ°å­¦ä¹ å¤§æ¨¡å‹ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›éå¸¸æœ‰ä»·å€¼çš„å­¦ä¹ èµ„æºï¼Œè¿™äº›èµ„æºå°†å¸®åŠ©ä½ ä»ä¸åŒè§’åº¦å­¦ä¹ å¤§æ¨¡å‹ï¼Œæå‡ä½ çš„å®è·µèƒ½åŠ›ã€‚</p>
<blockquote>
<p>æœ¬æ–‡è¾ƒé•¿ï¼Œå»ºè®®ç‚¹èµæ”¶è—ã€‚æ›´å¤šAIå¤§æ¨¡å‹åº”ç”¨å¼€å‘å­¦ä¹ è§†é¢‘åŠèµ„æ–™ï¼Œåœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fhy.zhipoai.cn%2F" target="_blank" title="https://hy.zhipoai.cn/" ref="nofollow noopener noreferrer">æ™ºæ³ŠAI</a>ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¤§æ¨¡å‹ä»å…¥é—¨åˆ°å®è·µï¼Œæœ€è¢«è¯»è€…è®¤å¯çš„å‡ æœ¬ä¹¦å°±åœ¨è¿™é‡Œï¼]]></title>    <link>https://juejin.cn/post/7580259796668596270</link>    <guid>https://juejin.cn/post/7580259796668596270</guid>    <pubDate>2025-12-06T05:59:54.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7580259796668596270" data-draft-id="7580280096058966043" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¤§æ¨¡å‹ä»å…¥é—¨åˆ°å®è·µï¼Œæœ€è¢«è¯»è€…è®¤å¯çš„å‡ æœ¬ä¹¦å°±åœ¨è¿™é‡Œï¼"/> <meta itemprop="keywords" content="Agent,LLM,ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2025-12-06T05:59:54.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="AIå¤§æ¨¡å‹"/> <meta itemprop="url" content="https://juejin.cn/user/3817967696221534"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¤§æ¨¡å‹ä»å…¥é—¨åˆ°å®è·µï¼Œæœ€è¢«è¯»è€…è®¤å¯çš„å‡ æœ¬ä¹¦å°±åœ¨è¿™é‡Œï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3817967696221534/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    AIå¤§æ¨¡å‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-06T05:59:54.000Z" title="Sat Dec 06 2025 05:59:54 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#383838;font-size:15px;line-height:30px;letter-spacing:2px;word-break:break-word;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;scroll-behavior:smooth;background-image:linear-gradient(0deg,transparent 24%,rgba(201,195,195,.329) 25%,hsla(0,8%,80.4%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent),linear-gradient(90deg,transparent 24%,rgba(204,196,196,.226) 25%,hsla(0,4%,66.1%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent);background-color:#fff;background-size:50px 50px;padding-bottom:60px}.markdown-body ::selection{color:#fff;background-color:#a862ea}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin:24px 0 12px;color:#a862ea}.markdown-body h1{line-height:2;font-size:1.4em}.markdown-body h1~p:first-of-type:first-letter{color:#a862ea;float:left;font-size:2em;margin-right:.4em;font-weight:bolder}.markdown-body h2{font-size:1.2em}.markdown-body h3{font-size:1.1em}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;padding-left:.2em}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#a862ea}.markdown-body ol li.task-list-item,.markdown-body ul li.task-list-item{list-style:none}.markdown-body ol li.task-list-item ol,.markdown-body ol li.task-list-item ul,.markdown-body ul li.task-list-item ol,.markdown-body ul li.task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:10px}.markdown-body a,.markdown-body code,.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6,.markdown-body li,.markdown-body p{opacity:.85;vertical-align:baseline;transition:all .1s ease}.markdown-body a:hover,.markdown-body code:hover,.markdown-body h1:hover,.markdown-body h2:hover,.markdown-body h3:hover,.markdown-body h4:hover,.markdown-body h5:hover,.markdown-body h6:hover,.markdown-body li:hover,.markdown-body p:hover{opacity:1}.markdown-body a{display:inline-block;color:#a862ea;cursor:pointer;text-decoration:none;position:relative}.markdown-body a:after{content:"";position:absolute;width:98%;height:1px;bottom:0;left:0;transform:scaleX(0);background-color:#a862ea;transform-origin:bottom right;transition:transform .3s ease-in-out}.markdown-body a:hover:after{transform:scaleX(1);transform-origin:bottom left}.markdown-body a:active,.markdown-body a:link{color:#a862ea}.markdown-body img{max-width:100%;user-select:none;margin:1em 0;transition:transform .2s ease 0s;background-color:#f8f5ff;box-shadow:0 0 10px #e7daff}.markdown-body img:hover{opacity:1;box-shadow:0 0 20px #e7daff;transform:translateY(-1px)}.markdown-body blockquote{padding:.5em 1em;margin:12px 0;border-top-left-radius:2px;border-bottom-left-radius:2px;border-left:3px solid #a862ea;background-color:#f8f5ff}.markdown-body blockquote&gt;p{margin:0}.markdown-body .math{font-style:italic;margin:12px 0;padding:.5em 1em;background-color:#f8f5ff}.markdown-body .math&gt;p{margin:0}.markdown-body code{padding:2px .4em;overflow-x:auto;color:#a862ea;font-weight:700;word-break:break-word;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;background-color:#f8f5ff}.markdown-body pre{margin:2em 0}.markdown-body pre&gt;code{display:block;padding:1.5em;word-break:normal;font-size:.9em;font-style:normal;font-weight:400;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;line-height:18px;color:#383838;border-radius:2px;scroll-behavior:smooth;box-shadow:0 0 10px #e7daff}.markdown-body pre&gt;code:hover{box-shadow:0 0 20px #e7daff}.markdown-body pre&gt;code::-webkit-scrollbar{height:6px;background-color:#f8f5ff}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:#e7daff;border-bottom-left-radius:3px;border-bottom-right-radius:3px}.markdown-body hr{margin:2em 0;border-top:1px solid #a862ea}.markdown-body table{width:100%;font-size:12px;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{color:#a862ea;background:#f8f5ff}.markdown-body td,.markdown-body th{padding:.5em;border:1px solid #e7daff}.markdown-body tr{background-color:#f8f5ff}@media (max-width:720px){.markdown-body{font-size:12px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æœ¬æ–‡è¾ƒé•¿ï¼Œå»ºè®®ç‚¹èµæ”¶è—ã€‚æ›´å¤šAIå¤§æ¨¡å‹åº”ç”¨å¼€å‘å­¦ä¹ è§†é¢‘åŠèµ„æ–™ï¼Œåœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fhy.zhipoai.cn%2F" target="_blank" title="https://hy.zhipoai.cn/" ref="nofollow noopener noreferrer">æ™ºæ³ŠAI</a>ã€‚</p>
</blockquote>
<p>å¤§æ¨¡å‹æŠ€æœ¯å‘å±•è¿…é€Ÿï¼Œä¿¡æ¯æ›´æ–°èŠ‚å¥è¿œè¶…ä¸ªäººçš„å­¦ä¹ é€Ÿåº¦ã€‚å¯¹äºæƒ³å…¥é—¨ã€æƒ³æ·±å…¥ï¼Œæˆ–å·²ç»å¼€å§‹ç”¨ AI åšäº‹çš„äººï¼Œæ›´éœ€è¦ä¸€æ¡æ¸…æ™°ã€å¯é çš„å­¦ä¹ è·¯å¾„ã€‚</p>
<p>ä»Šå¤©è¿™ä»½ä¹¦å•ï¼ŒæŒ‰å­¦ä¹ é˜¶æ®µä¸å®é™…éœ€æ±‚è¿›è¡Œæ•´ç†ï¼šä»å»ºç«‹å¤§æ¨¡å‹åŸºç¡€è®¤çŸ¥ï¼Œåˆ°ç†è§£åº•å±‚åŸç†ï¼Œå†åˆ°åº”ç”¨å¼€å‘ã€å·¥ç¨‹è½åœ°ä¸æ±‚èŒé¢è¯•ï¼Œæ¶µç›–å¤§æ¨¡å‹å­¦ä¹ çš„æ–¹æ–¹é¢é¢ã€‚ä½ å¯ä»¥ä»ä»»ä½•ä¸€ä¸ªä¸ä½ å½“å‰ç›®æ ‡æœ€æ¥è¿‘çš„éƒ¨åˆ†å¼€å§‹é˜…è¯»ï¼Œä¹Ÿå¯ä»¥é¡ºç€ç»“æ„é€æ­¥è¿›é˜¶ã€‚</p>
<p><strong>å¤§æ¨¡å‹å…¥é—¨</strong></p>
<p>é€‚åˆåˆšæ¥è§¦å¤§æ¨¡å‹ï¼Œå¸Œæœ›å¿«é€Ÿå»ºç«‹å…¨å±€è®¤çŸ¥å’ŒåŸºæœ¬åŠ¨æ‰‹èƒ½åŠ›çš„è¯»è€…ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2e6d54de44024cec840eadf4326bb084~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765605594&amp;x-signature=iW0t3T9jw6fva4JPZDdczHO2DYg%3D" alt="" loading="lazy"/></p>
<p>ã€Šå¤§æ¨¡å‹æŠ€æœ¯30è®²ã€‹</p>
<p>å¡å·´æ–¯è’‚å®‰Â·æ‹‰æ–½å¡ï½œè‘—</p>
<p>å¶æ–‡æ»” ï½œ è¯‘</p>
<p>GitHub é¡¹ç›® LLMs-from-scratchï¼ˆstaræ•°44kï¼‰ä½œè€…ã€å¤§æ¨¡å‹ç‹¬è§’å…½å…¬å¸ Lightning AI å·¥ç¨‹å¸ˆå€¾åŠ›æ‰“é€ ï¼Œå…¨ä¹¦é‡‡ç”¨ç‹¬ç‰¹çš„ä¸€é—®ä¸€ç­”å¼é£æ ¼ï¼Œæ¢è®¨äº†å½“ä»Šæœºå™¨å­¦ä¹ å’Œäººå·¥æ™ºèƒ½é¢†åŸŸä¸­æœ€é‡è¦çš„ 30 ä¸ªé—®é¢˜ï¼Œæ—¨åœ¨å¸®åŠ©è¯»è€…äº†è§£æœ€æ–°çš„æŠ€æœ¯è¿›å±•ã€‚</p>
<p>å†…å®¹å…±åˆ†ä¸ºäº”ä¸ªéƒ¨åˆ†ï¼šç¥ç»ç½‘ç»œä¸æ·±åº¦å­¦ä¹ ã€è®¡ç®—æœºè§†è§‰ã€è‡ªç„¶è¯­è¨€å¤„ç†ã€ç”Ÿäº§ä¸éƒ¨ç½²ã€é¢„æµ‹æ€§èƒ½ä¸æ¨¡å‹è¯„æµ‹ã€‚æ¯ä¸€ç« éƒ½å›´ç»•ä¸€ä¸ªé—®é¢˜å±•å¼€ï¼Œä¸ä»…é’ˆå¯¹é—®é¢˜åšå‡ºäº†ç›¸åº”çš„è§£é‡Šï¼Œå¹¶é…æœ‰è‹¥å¹²å›¾è¡¨ï¼Œè¿˜ç»™å‡ºäº†ç»ƒä¹ ä¾›è¯»è€…æ£€éªŒè‡ªèº«æ˜¯å¦å·²ç†è§£æ‰€å­¦å†…å®¹ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5b261416fdb84e5a8c529014071d4de2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765605594&amp;x-signature=QembgO5EfN63px%2FD%2B6qSk0HFn%2Fk%3D" alt="" loading="lazy"/></p>
<p>ã€Šå¤§æ¨¡å‹åº”ç”¨å¼€å‘æç®€å…¥é—¨ï¼šåŸºäºGPT-4å’ŒChatGPTï¼ˆç¬¬2ç‰ˆï¼‰ã€‹Â </p>
<p>å¥¥åˆ©ç»´è€¶Â·å¡åŸƒæœ—ï¼Œ[æ³•] ç›ä¸½â€“è‰¾ä¸½æ–¯Â·å¸ƒè±ç‰¹ | è‘—</p>
<p>ä½•æ–‡æ–¯ | è¯‘</p>
<p>æ·±å—è¯»è€…å–œçˆ±çš„å¤§æ¨¡å‹åº”ç”¨å¼€å‘å›¾ä¹¦å‡çº§ç‰ˆï¼Œä½œè€…ä¸ºåˆå­¦è€…æä¾›äº†ä¸€ä»½æ¸…æ™°ã€å…¨é¢çš„â€œæœ€å°å¯ç”¨çŸ¥è¯†â€ï¼Œå¸¦é¢†ä½ å¿«é€Ÿäº†è§£ GPT-4 å’Œ ChatGPT çš„å·¥ä½œåŸç†åŠä¼˜åŠ¿ï¼Œå¹¶åœ¨æ­¤åŸºç¡€ä¸Šä½¿ç”¨æµè¡Œçš„ Python ç¼–ç¨‹è¯­è¨€æ„å»ºå¤§æ¨¡å‹åº”ç”¨ã€‚</p>
<p>å‡çº§ç‰ˆåœ¨æ—§ç‰ˆçš„åŸºç¡€ä¸Šè¿›è¡Œäº†å…¨é¢æ›´æ–°ï¼Œèå…¥äº†å¤§æ¨¡å‹åº”ç”¨å¼€å‘çš„æœ€æ–°è¿›å±•ï¼Œæ¯”å¦‚ RAGã€GPT-4 æ–°ç‰¹æ€§çš„åº”ç”¨è§£æç­‰ã€‚éšä¹¦èµ  DeepSeek Ã— Dify åº”ç”¨å¼€å‘æ¡ˆä¾‹ï¼Œä¹¦ä¸­è¿˜æä¾›äº†å¤§é‡ç®€å•æ˜“å­¦çš„ç¤ºä¾‹ï¼Œå¸®ä½ ç†è§£ç›¸å…³æ¦‚å¿µå¹¶å°†å…¶åº”ç”¨åœ¨è‡ªå·±çš„é¡¹ç›®ä¸­ã€‚</p>
<p><strong>å¤§æ¨¡å‹åº•å±‚åŸç†ä¸æ¶æ„</strong></p>
<p>é€‚åˆå¸Œæœ›ç†è§£ Transformerã€è®­ç»ƒæµç¨‹ã€åº•å±‚æ•°å­¦/å·¥ç¨‹çš„äººã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5c1ca120792248399964da9341a8ba97~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765605594&amp;x-signature=9Q%2B%2FQ8s0ck10LjMijtTbwZy9AtQ%3D" alt="" loading="lazy"/></p>
<p>ã€Šå›¾è§£å¤§æ¨¡å‹ï¼šç”Ÿæˆå¼AIåŸç†ä¸å®æˆ˜ã€‹</p>
<p>[æ²™ç‰¹] æ°ä¼ŠÂ·é˜¿æ‹‰é©¬å°”ï¼Œ[è·] é©¬å°”æ»•Â·æ ¼é²æ»•å¤šæ–¯ç‰¹ | è‘—</p>
<p>æåšæ° | è¯‘</p>
<p>å¤‡å—å…³æ³¨çš„å¤§æ¨¡å‹â€œè¢‹é¼ ä¹¦â€ï¼Œå…¨ä¹¦é€šè¿‡ 300 å¹…å…¨å½©æ’å›¾ï¼Œä»¥æè‡´è§†è§‰åŒ–çš„æ–¹å¼å‘ˆç°å¤§æ¨¡å‹çš„æ ¸å¿ƒåŸç†ä¸å·¥ç¨‹å®ç°ï¼Œè¦†ç›–ä»åº•å±‚æœºåˆ¶ã€åº”ç”¨å¼€å‘åˆ°æ€§èƒ½ä¼˜åŒ–çš„å®Œæ•´é“¾æ¡ã€‚å†…å®¹ç»“åˆçœŸå®æ•°æ®é›†ã€å®ç”¨é¡¹ç›®ä¸å…¸å‹åœºæ™¯ï¼Œæ³¨é‡å®æ“æ€§ã€‚</p>
<p>ç‰¹åˆ«æ”¶å½• 18 å¹…å›¾ç²¾è§£ DeepSeek åº•å±‚åŸç†ï¼Œç´§è·Ÿå‰æ²¿ã€‚é…å¥—èµ„æºåŒ…æ‹¬ä¸€é”®è¿è¡Œä»£ç ã€200 é“å¤§æ¨¡å‹é¢è¯•é¢˜åŠå¤§é‡æ‹“å±•è§†é¢‘/æ–‡ç« èµ„æ–™ï¼ŒåŠ©ä½ å…¨é¢æŒæ¡å¤§æ¨¡å‹ç†è®ºä¸å®è·µï¼Œæ˜¯å…¥é—¨è¿›é˜¶ä¸æ±‚èŒå¤‡æˆ˜çš„ç†æƒ³ä¹‹é€‰ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/85081ffe0d75457a881ed3fbdfc1d756~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765605594&amp;x-signature=iaP7HKxVdyHDCDv75IUziLeq56c%3D" alt="" loading="lazy"/></p>
<p>ã€Šä»é›¶æ„å»ºå¤§æ¨¡å‹ã€‹</p>
<p>å¡å·´æ–¯è’‚å®‰Â·æ‹‰æ–½å¡ï½œè‘—</p>
<p>è¦ƒç«‹æ³¢ï¼Œå†¯éªéª‹ï¼Œåˆ˜ä¹¾ï½œè¯‘</p>
<p>è±†ç“£è¯„åˆ† 9.5ï¼Œä»é›¶å¼€å§‹æ„å»ºå¤§æ¨¡å‹çš„æœ€ä½³æŒ‡å—ï¼Œç”±ç•…é”€ä¹¦ä½œå®¶å¡å·´æ–¯è’‚å®‰â€¢æ‹‰æ–½å¡æ’°å†™ï¼Œé€šè¿‡æ¸…æ™°çš„æ–‡å­—ã€å›¾è¡¨å’Œå®ä¾‹ï¼Œé€æ­¥æŒ‡å¯¼è¯»è€…åˆ›å»ºè‡ªå·±çš„å¤§æ¨¡å‹ã€‚åœ¨æœ¬ä¹¦ä¸­ï¼Œè¯»è€…å°†å­¦ä¹ å¦‚ä½•è§„åˆ’å’Œç¼–å†™å¤§æ¨¡å‹çš„å„ä¸ªç»„æˆéƒ¨åˆ†ã€ä¸ºå¤§æ¨¡å‹è®­ç»ƒå‡†å¤‡é€‚å½“çš„æ•°æ®é›†ã€è¿›è¡Œé€šç”¨è¯­æ–™åº“çš„é¢„è®­ç»ƒï¼Œä»¥åŠå®šåˆ¶ç‰¹å®šä»»åŠ¡çš„å¾®è°ƒã€‚</p>
<p><strong>åº”ç”¨å¼€å‘ä¸æ¡†æ¶å®æˆ˜</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/65076f62b91b48be966ad67d1fa325cd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765605594&amp;x-signature=ICwsRjOswuajgcjxMhgluW29Ca4%3D" alt="" loading="lazy"/></p>
<p>ç”±ä¸šå†…çŸ¥åAIä¸“å®¶ã€å‰è‹±ä¼Ÿè¾¾å·¥ç¨‹å¸ˆï¼Œç•…é”€ä¹¦ä½œè€… Chip Huyen æ’°å†™ã€‚ å…¨ä¹¦ç³»ç»Ÿé˜è¿°äº†â€œAIå·¥ç¨‹â€çš„æ ¸å¿ƒæ–¹æ³•â€”â€”å¦‚ä½•åŸºäºç°æˆçš„åŸºç¡€æ¨¡å‹ï¼ˆLLMã€LMMï¼‰æ„å»ºé«˜æ•ˆã€å®ç”¨çš„AIåº”ç”¨ã€‚ä¹¦ä¸­æä¾›äº†å®Œæ•´çš„ AI å·¥ç¨‹æ¡†æ¶ï¼Œæ¶µç›–æ¨¡å‹é€‰æ‹©ä¸è¯„ä¼°ã€æç¤ºå·¥ç¨‹ã€RAG ä¸æ™ºèƒ½ä½“ã€å¾®è°ƒç­–ç•¥ã€æ•°æ®é›†å·¥ç¨‹ã€æ¨ç†ä¼˜åŒ–åŠ AI å·¥ç¨‹æ¶æ„ç­‰å…³é”®ç¯èŠ‚ï¼Œå¸®åŠ©å¼€å‘è€…åœ¨å¤æ‚çš„ AI ç”Ÿæ€ä¸­åšå‡ºç§‘å­¦çš„æŠ€æœ¯å†³ç­–ã€‚</p>
<p><strong>å¤§æ¨¡å‹æ±‚èŒé¢è¯•</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/914f193649d34df1bcd728ab826196b8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765605594&amp;x-signature=RoxrkCfjJvSN%2BWgt1dY%2B3o7nHjA%3D" alt="" loading="lazy"/></p>
<p>ã€Šç™¾é¢å¤§æ¨¡å‹ã€‹</p>
<p>åŒ…æ¢¦è›Ÿï¼Œåˆ˜å¦‚æ—¥ï¼Œæœ±ä¿Šè¾¾ | è‘—</p>
<p>æœ¬ä¹¦æŒ‰â€œäºŒæ˜Ÿåˆ°äº”æ˜Ÿâ€éš¾åº¦ä½“ç³»ï¼Œç²¾é€‰çº¦ 100 é“å¤§æ¨¡å‹é¢è¯•é«˜é¢‘çœŸé¢˜ï¼Œè¦†ç›– MoEã€é¢„è®­ç»ƒã€SFTã€PEFTã€RLHFã€DPOã€RAGã€æ™ºèƒ½ä½“ç­‰æ ¸å¿ƒè€ƒç‚¹ï¼Œé…å¥—é¢˜ç›®ç›®å½•ï¼Œä¾¿äºé«˜æ•ˆæŸ¥æ¼è¡¥ç¼ºã€‚</p>
<p>ç”± AI é¢†åŸŸå¤§ Vâ€œåŒ…åŒ…å¤§äººâ€é¢†è¡”ï¼Œç¾å›¢æŠ€æœ¯ä¸“å®¶ä¸åŒ—èˆªæ–°ç”Ÿä»£å¼ºå¼ºè”åˆç¼–å†™ï¼Œå†…å®¹ä¸“ä¸šæƒå¨ã€‚è· ACL Fellow åˆ˜ç¾¤ã€å‘¨æ˜ï¼Œã€Šæ·±åº¦å¼ºåŒ–å­¦ä¹ ã€‹ä½œè€…ç‹æ ‘æ£®å’Œé»å½§å›ç­‰ 8 ä½ä¸šå†…å¤§å’–è”åˆæ¨èï¼Œæ˜¯å¤§æ¨¡å‹æ±‚èŒè€…çš„å®æˆ˜å®å…¸ã€‚</p>
<h2 data-id="heading-0">å­¦ä¹ èµ„æºæ¨è</h2>
<p>å¦‚æœä½ æƒ³æ›´æ·±å…¥åœ°å­¦ä¹ å¤§æ¨¡å‹ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›éå¸¸æœ‰ä»·å€¼çš„å­¦ä¹ èµ„æºï¼Œè¿™äº›èµ„æºå°†å¸®åŠ©ä½ ä»ä¸åŒè§’åº¦å­¦ä¹ å¤§æ¨¡å‹ï¼Œæå‡ä½ çš„å®è·µèƒ½åŠ›ã€‚</p>
<blockquote>
<p>æœ¬æ–‡è¾ƒé•¿ï¼Œå»ºè®®ç‚¹èµæ”¶è—ã€‚æ›´å¤šAIå¤§æ¨¡å‹åº”ç”¨å¼€å‘å­¦ä¹ è§†é¢‘åŠèµ„æ–™ï¼Œåœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fhy.zhipoai.cn%2F" target="_blank" title="https://hy.zhipoai.cn/" ref="nofollow noopener noreferrer">æ™ºæ³ŠAI</a>ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Flutter: go_router å…¥é—¨]]></title>    <link>https://juejin.cn/post/7580280096059031579</link>    <guid>https://juejin.cn/post/7580280096059031579</guid>    <pubDate>2025-12-06T06:03:27.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7580280096059031579" data-draft-id="7579673620941045810" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Flutter: go_router å…¥é—¨"/> <meta itemprop="keywords" content="Flutter"/> <meta itemprop="datePublished" content="2025-12-06T06:03:27.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="renxhui"/> <meta itemprop="url" content="https://juejin.cn/user/1292681403181944"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Flutter: go_router å…¥é—¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1292681403181944/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    renxhui
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-06T06:03:27.000Z" title="Sat Dec 06 2025 06:03:27 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Flutter: go_router å…¥é—¨ï¼ˆé¢å‘ Android å¼€å‘è€…ï¼‰</h2>
<blockquote>
<p>ç›®æ ‡ï¼šç”¨ Android çš„è·¯ç”±æ€ç»´ï¼Œå¿«é€Ÿä¸Šæ‰‹ Flutter çš„ go_routerï¼Œä»ä¾èµ–å¼•å…¥ â†’ åˆå§‹åŒ– â†’ è·¯ç”±å®šä¹‰ â†’ å¯¼èˆªä¸å‚æ•° â†’ å®ˆå«/é‡å®šå‘ â†’ åµŒå¥—è·¯ç”±/ShellRoute â†’ é”™è¯¯é¡µä¸æ·±é“¾ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-1">1. ä¾èµ–å¼•å…¥ï¼ˆpubspec.yamlï¼‰</h3>
<p>ä½ çš„é¡¹ç›®å·²å­˜åœ¨ <code>go_router</code>ï¼ˆç‰ˆæœ¬å¯èƒ½è¾ƒä½ï¼‰ã€‚å»ºè®®ä¸ç°æœ‰é¡¹ç›®ç‰ˆæœ¬ä¿æŒä¸€è‡´ï¼›è‹¥æ–°å»ºå·¥ç¨‹ï¼Œå¯ä½¿ç”¨è¾ƒæ–°ç‰ˆæœ¬ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">dependencies:</span>
  <span class="hljs-attr">go_router:</span> <span class="hljs-string">^14.2.0</span>   <span class="hljs-comment"># æˆ–ä¸ä½ é¡¹ç›®ä¸€è‡´çš„ç‰ˆæœ¬</span>
</code></pre>
<pre><code class="hljs language-bash" lang="bash">flutter pub get
</code></pre>
<hr/>
<h3 data-id="heading-2">2. åˆå§‹åŒ– Routerï¼ˆåœ¨åº”ç”¨å…¥å£ï¼‰</h3>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">import</span> <span class="hljs-string">'package:flutter/material.dart'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'package:go_router/go_router.dart'</span>;

<span class="hljs-keyword">void</span> main() =&gt; runApp(<span class="hljs-keyword">const</span> MyApp());

<span class="hljs-keyword">final</span> GoRouter _router = GoRouter(
  initialLocation: <span class="hljs-string">'/'</span>,
  routes: &lt;RouteBase&gt;[
    GoRoute(
      path: <span class="hljs-string">'/'</span>,
      name: <span class="hljs-string">'home'</span>,
      builder: (context, state) =&gt; <span class="hljs-keyword">const</span> HomePage(),
      routes: &lt;RouteBase&gt;[
        GoRoute(
          path: <span class="hljs-string">'detail/:id'</span>, <span class="hljs-comment">// å®Œæ•´è·¯å¾„ï¼š/detail/:id</span>
          name: <span class="hljs-string">'detail'</span>,
          builder: (context, state) {
            <span class="hljs-keyword">final</span> id = state.pathParameters[<span class="hljs-string">'id'</span>]; <span class="hljs-comment">// è·¯å¾„å‚æ•°</span>
            <span class="hljs-keyword">final</span> msg = state.uri.queryParameters[<span class="hljs-string">'msg'</span>]; <span class="hljs-comment">// æŸ¥è¯¢å‚æ•°</span>
            <span class="hljs-keyword">final</span> extra = state.extra <span class="hljs-keyword">as</span> <span class="hljs-built_in">String?</span>; <span class="hljs-comment">// é¢å¤–å¯¹è±¡</span>
            <span class="hljs-keyword">return</span> DetailPage(id: id ?? <span class="hljs-string">'0'</span>, msg: msg, extra: extra);
          },
        ),
      ],
    ),
  ],
  errorBuilder: (context, state) =&gt; ErrorPage(error: state.error),
);

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyApp</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span> </span>{
  <span class="hljs-keyword">const</span> MyApp({<span class="hljs-keyword">super</span>.key});
  <span class="hljs-meta">@override</span>
  Widget build(BuildContext context) {
    <span class="hljs-keyword">return</span> MaterialApp.router(
      routerConfig: _router, <span class="hljs-comment">// æ–°å†™æ³•ï¼ˆæ—§ç‰ˆå¯ç”¨ routeInformationParser/Delegateï¼‰</span>
      debugShowCheckedModeBanner: <span class="hljs-keyword">false</span>,
      theme: ThemeData.light(),
    );
  }
}
</code></pre>
<hr/>
<h3 data-id="heading-3">3. é¡µé¢ä¸å¯¼èˆªï¼ˆå¸¸ç”¨ APIï¼‰</h3>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// HomePage â†’ å¯¼èˆªåˆ°è¯¦æƒ…</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">HomePage</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span> </span>{
  <span class="hljs-keyword">const</span> HomePage({<span class="hljs-keyword">super</span>.key});
  <span class="hljs-meta">@override</span>
  Widget build(BuildContext context) {
    <span class="hljs-keyword">return</span> Scaffold(
      appBar: AppBar(title: <span class="hljs-keyword">const</span> Text(<span class="hljs-string">'Home'</span>)),
      body: Center(
        child: Column(
          mainAxisSize: MainAxisSize.min,
          children: [
            ElevatedButton(
              onPressed: () {
                <span class="hljs-comment">// è·¯å¾„å¯¼èˆªï¼ˆå¸¦è·¯å¾„å‚æ•°ä¸æŸ¥è¯¢å‚æ•°ï¼‰</span>
                context.go(<span class="hljs-string">'/detail/100?msg=hello'</span>);
              },
              child: <span class="hljs-keyword">const</span> Text(<span class="hljs-string">'Go Detail (path + query)'</span>),
            ),
            ElevatedButton(
              onPressed: () {
                <span class="hljs-comment">// å‘½åå¯¼èˆª + å‚æ•° + extra</span>
                context.pushNamed(
                  <span class="hljs-string">'detail'</span>,
                  pathParameters: {<span class="hljs-string">'id'</span>: <span class="hljs-string">'200'</span>},
                  queryParameters: {<span class="hljs-string">'msg'</span>: <span class="hljs-string">'from-named'</span>},
                  extra: <span class="hljs-string">'EXTRA_PAYLOAD'</span>,
                );
              },
              child: <span class="hljs-keyword">const</span> Text(<span class="hljs-string">'Push Detail (named + extra)'</span>),
            ),
          ],
        ),
      ),
    );
  }
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DetailPage</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span> </span>{
  <span class="hljs-keyword">final</span> <span class="hljs-built_in">String</span> id;
  <span class="hljs-keyword">final</span> <span class="hljs-built_in">String?</span> msg;
  <span class="hljs-keyword">final</span> <span class="hljs-built_in">String?</span> extra;
  <span class="hljs-keyword">const</span> DetailPage({<span class="hljs-keyword">super</span>.key, <span class="hljs-keyword">required</span> <span class="hljs-keyword">this</span>.id, <span class="hljs-keyword">this</span>.msg, <span class="hljs-keyword">this</span>.extra});
  <span class="hljs-meta">@override</span>
  Widget build(BuildContext context) {
    <span class="hljs-keyword">return</span> Scaffold(
      appBar: AppBar(title: Text(<span class="hljs-string">'Detail #<span class="hljs-subst">$id</span>'</span>)),
      body: Center(child: Text(<span class="hljs-string">'msg=<span class="hljs-subst">$msg</span>, extra=<span class="hljs-subst">$extra</span>'</span>)),
    );
  }
}
</code></pre>
<ul>
<li><code>context.go()</code>ï¼šæ›¿æ¢å¼å¯¼èˆªï¼ˆç›¸å½“äº Android çš„ replace/clearTopï¼‰ã€‚</li>
<li><code>context.push()</code>ï¼šå…¥æ ˆå¯¼èˆªï¼ˆç±»ä¼¼ startActivity å…¥æ ˆï¼‰ã€‚</li>
<li><code>context.pop()</code>ï¼šè¿”å›ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-4">4. å‚æ•°ä¼ é€’ï¼ˆè·¯å¾„/æŸ¥è¯¢/extraï¼‰</h3>
<ul>
<li>è·¯å¾„å‚æ•°ï¼šè·¯ç”±å®šä¹‰ <code>path: 'detail/:id'</code>ï¼Œè¯»å– <code>state.pathParameters['id']</code>ã€‚</li>
<li>æŸ¥è¯¢å‚æ•°ï¼š<code>/detail/1?msg=hi</code>ï¼Œè¯»å– <code>state.uri.queryParameters['msg']</code>ã€‚</li>
<li>Extraï¼šé€‚åˆä¼ å¯¹è±¡ï¼ˆæ¯”å¦‚å¤æ‚å®ä½“ï¼‰ï¼Œè¯»å– <code>state.extra</code> å¹¶åšç±»å‹æ–­è¨€ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-5">5. å®ˆå«ä¸é‡å®šå‘ï¼ˆAuthã€ç‰ˆæœ¬å¼•å¯¼ç­‰ï¼‰</h3>
<p>æœ€ç®€ç¤ºä¾‹ï¼ˆç™»å½•æ€å®ˆå«ï¼‰ï¼š</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AuthState</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">ChangeNotifier</span> </span>{
  <span class="hljs-built_in">bool</span> loggedIn = <span class="hljs-keyword">false</span>;
}
<span class="hljs-keyword">final</span> auth = AuthState();

<span class="hljs-keyword">final</span> GoRouter router = GoRouter(
  refreshListenable: auth, <span class="hljs-comment">// ç™»å½•æ€å˜åŒ–æ—¶è§¦å‘é‡å®šå‘</span>
  routes: [
    GoRoute(path: <span class="hljs-string">'/'</span>, builder: (_, __) =&gt; <span class="hljs-keyword">const</span> HomePage()),
    GoRoute(path: <span class="hljs-string">'/login'</span>, builder: (_, __) =&gt; <span class="hljs-keyword">const</span> LoginPage()),
    GoRoute(path: <span class="hljs-string">'/profile'</span>, builder: (_, __) =&gt; <span class="hljs-keyword">const</span> ProfilePage()),
  ],
  redirect: (context, state) {
    <span class="hljs-keyword">final</span> loggingIn = state.matchedLocation == <span class="hljs-string">'/login'</span>;
    <span class="hljs-keyword">if</span> (!auth.loggedIn &amp;&amp; !loggingIn) {
      <span class="hljs-comment">// æœªç™»å½•è®¿é—®å—é™é¡µ â†’ é‡å®šå‘åˆ° /login</span>
      <span class="hljs-keyword">return</span> <span class="hljs-string">'/login'</span>;
    }
    <span class="hljs-keyword">if</span> (auth.loggedIn &amp;&amp; loggingIn) {
      <span class="hljs-comment">// å·²ç™»å½•ä¸è¯¥å†çœ‹åˆ°ç™»å½•é¡µ â†’ å›é¦–é¡µ</span>
      <span class="hljs-keyword">return</span> <span class="hljs-string">'/'</span>;
    }
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>; <span class="hljs-comment">// ä¸é‡å®šå‘</span>
  },
);
</code></pre>
<p>è¦ç‚¹ï¼š</p>
<ul>
<li><code>refreshListenable</code> å¯ä»¥ç›‘å¬çŠ¶æ€å˜åŒ–ï¼ˆå¦‚ç™»å½•æ€å˜æ›´ï¼Œè‡ªåŠ¨è§¦å‘è·¯ç”±åˆ·æ–°/é‡å®šå‘ï¼‰ã€‚</li>
<li><code>redirect</code> è¿”å› <code>String?</code>ï¼Œè¿”å›éç©ºå­—ç¬¦ä¸²è¡¨ç¤ºé‡å®šå‘ç›®çš„åœ°ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-6">6. åµŒå¥—è·¯ç”±ä¸ ShellRouteï¼ˆåº•éƒ¨å¯¼èˆªï¼‰</h3>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">final</span> router = GoRouter(
  routes: [
    ShellRoute(
      builder: (context, state, child) {
        <span class="hljs-keyword">return</span> Scaffold(
          body: child,
          bottomNavigationBar: BottomNavigationBar(
            currentIndex: _indexByLocation(state.matchedLocation),
            onTap: (i) =&gt; _goTab(context, i),
            items: <span class="hljs-keyword">const</span> [
              BottomNavigationBarItem(icon: Icon(Icons.home), label: <span class="hljs-string">'Home'</span>),
              BottomNavigationBarItem(icon: Icon(Icons.person), label: <span class="hljs-string">'Me'</span>),
            ],
          ),
        );
      },
      routes: [
        GoRoute(path: <span class="hljs-string">'/'</span>, builder: (_, __) =&gt; <span class="hljs-keyword">const</span> HomePage()),
        GoRoute(path: <span class="hljs-string">'/me'</span>, builder: (_, __) =&gt; <span class="hljs-keyword">const</span> MePage()),
      ],
    ),
  ],
);

<span class="hljs-built_in">int</span> _indexByLocation(<span class="hljs-built_in">String</span> loc) =&gt; loc.startsWith(<span class="hljs-string">'/me'</span>) ? <span class="hljs-number">1</span> : <span class="hljs-number">0</span>;
<span class="hljs-keyword">void</span> _goTab(BuildContext ctx, <span class="hljs-built_in">int</span> i) {
  <span class="hljs-keyword">if</span> (i == <span class="hljs-number">0</span>) ctx.go(<span class="hljs-string">'/'</span>); <span class="hljs-keyword">else</span> ctx.go(<span class="hljs-string">'/me'</span>);
}
</code></pre>
<ul>
<li><code>ShellRoute</code> å…è®¸å…±äº«å¤–å±‚ UIï¼ˆå¦‚ BottomNavigationBarï¼‰ï¼Œå†…éƒ¨åˆ‡æ¢å­è·¯ç”±ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-7">7. é”™è¯¯é¡µä¸ 404</h3>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ErrorPage</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span> </span>{
  <span class="hljs-keyword">final</span> Exception? error;
  <span class="hljs-keyword">const</span> ErrorPage({<span class="hljs-keyword">super</span>.key, <span class="hljs-keyword">this</span>.error});
  <span class="hljs-meta">@override</span>
  Widget build(BuildContext context) {
    <span class="hljs-keyword">return</span> Scaffold(
      appBar: AppBar(title: <span class="hljs-keyword">const</span> Text(<span class="hljs-string">'Error'</span>)),
      body: Center(child: Text(<span class="hljs-string">'Oops: <span class="hljs-subst">${error?.toString() ?? <span class="hljs-string">'Not Found'</span>}</span>'</span>)),
    );
  }
}
</code></pre>
<hr/>
<h3 data-id="heading-8">8. æ·±åº¦é“¾æ¥ï¼ˆDeep Linkï¼‰ä¸ Web æ”¯æŒ</h3>
<ul>
<li><code>MaterialApp.router</code> + <code>GoRouter</code> å¤©ç„¶æ”¯æŒ Web URLã€‚</li>
<li>ç§»åŠ¨ç«¯å¯ç»“åˆå¹³å°é€šé“/ç¬¬ä¸‰æ–¹åº“æ¥å…¥ URI Scheme æˆ– App Linksï¼Œç„¶å <code>context.go()</code> åˆ°ç›®æ ‡è·¯å¾„ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-9">9. å¸¸è§æ’é”™æ¸…å•</h3>
<ul>
<li>â€œé¡µé¢ä¸åˆ·æ–°/å®ˆå«ä¸ç”Ÿæ•ˆâ€ï¼šç¡®è®¤ <code>refreshListenable</code> æ­£ç¡®ä¼ å…¥å¹¶åœ¨çŠ¶æ€å˜åŒ–æ—¶è°ƒç”¨ <code>notifyListeners()</code>ã€‚</li>
<li>â€œå‚æ•°ä¸ºç©º/æ‹¿ä¸åˆ°â€ï¼šè·¯å¾„å‚æ•°ç”¨ <code>pathParameters</code>ï¼ŒæŸ¥è¯¢å‚æ•°ç”¨ <code>state.uri.queryParameters</code>ï¼Œå¯¹è±¡ç”¨ <code>extra</code>ã€‚</li>
<li>â€œè¿”å›è¡Œä¸ºå¼‚å¸¸â€ï¼šåˆç†åŒºåˆ† <code>go</code>ï¼ˆæ›¿æ¢ï¼‰ä¸ <code>push</code>ï¼ˆå…¥æ ˆï¼‰ï¼Œæ ˆç»“æ„ä¸è¿”å›é”®è¡Œä¸ºä¼šä¸åŒã€‚</li>
<li>â€œåµŒå¥—è·¯ç”±æ‰¾ä¸åˆ°é¡µâ€ï¼šç¡®è®¤çˆ¶å­ <code>routes</code> åµŒå¥—å…³ç³»ä¸ <code>path</code> å†™æ³•ï¼ˆå­è·¯å¾„ä¸è¦ä»¥æ–œæ èµ·å§‹æ—¶ä¼šæ‹¼æ¥åˆ°çˆ¶è·¯å¾„åï¼‰ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-10">10. æœ€å°æ¨¡æ¿ï¼ˆå¯ç›´æ¥å¤åˆ¶ï¼‰</h3>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">final</span> router = GoRouter(
  routes: [
    GoRoute(path: <span class="hljs-string">'/'</span>, builder: (_, __) =&gt; <span class="hljs-keyword">const</span> HomePage(), routes: [
      GoRoute(path: <span class="hljs-string">'detail/:id'</span>, builder: (_, s) =&gt; DetailPage(id: s.pathParameters[<span class="hljs-string">'id'</span>] ?? <span class="hljs-string">'0'</span>)),
    ]),
  ],
);

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">HomePage</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span> </span>{
  <span class="hljs-keyword">const</span> HomePage({<span class="hljs-keyword">super</span>.key});
  <span class="hljs-meta">@override</span>
  Widget build(BuildContext context) =&gt; Scaffold(
        appBar: AppBar(title: <span class="hljs-keyword">const</span> Text(<span class="hljs-string">'Home'</span>)),
        body: Center(
          child: ElevatedButton(
            onPressed: () =&gt; context.push(<span class="hljs-string">'/detail/1?msg=hello'</span>),
            child: <span class="hljs-keyword">const</span> Text(<span class="hljs-string">'Go Detail'</span>),
          ),
        ),
      );
}
</code></pre>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Redis æ€§èƒ½éª¤é™50%ï¼Ÿè¿™5ä¸ªéšè—é…ç½®é™·é˜±ä½ å¯èƒ½ä»æœªæ³¨æ„è¿‡]]></title>    <link>https://juejin.cn/post/7580203347703480335</link>    <guid>https://juejin.cn/post/7580203347703480335</guid>    <pubDate>2025-12-06T04:16:43.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7580203347703480335" data-draft-id="7580216638110531599" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Redis æ€§èƒ½éª¤é™50%ï¼Ÿè¿™5ä¸ªéšè—é…ç½®é™·é˜±ä½ å¯èƒ½ä»æœªæ³¨æ„è¿‡"/> <meta itemprop="keywords" content="åç«¯,å‰ç«¯,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-06T04:16:43.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿æ©™çš„ç™¾å®ç®±"/> <meta itemprop="url" content="https://juejin.cn/user/1638743356481367"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Redis æ€§èƒ½éª¤é™50%ï¼Ÿè¿™5ä¸ªéšè—é…ç½®é™·é˜±ä½ å¯èƒ½ä»æœªæ³¨æ„è¿‡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1638743356481367/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿æ©™çš„ç™¾å®ç®±
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-06T04:16:43.000Z" title="Sat Dec 06 2025 04:16:43 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>Redis æ€§èƒ½éª¤é™50%ï¼Ÿè¿™5ä¸ªéšè—é…ç½®é™·é˜±ä½ å¯èƒ½ä»æœªæ³¨æ„è¿‡</strong></h2>
<h3 data-id="heading-1">å¼•è¨€</h3>
<p>Redis ä½œä¸ºé«˜æ€§èƒ½çš„å†…å­˜æ•°æ®åº“ï¼Œè¢«å¹¿æ³›åº”ç”¨äºç¼“å­˜ã€æ¶ˆæ¯é˜Ÿåˆ—ã€å®æ—¶ç»Ÿè®¡ç­‰åœºæ™¯ã€‚ç„¶è€Œï¼Œå³ä½¿æ˜¯æœ€æœ‰ç»éªŒçš„å¼€å‘è€…ï¼Œä¹Ÿå¯èƒ½å› ä¸ºä¸€äº›çœ‹ä¼¼å¾®ä¸è¶³é“çš„é…ç½®é—®é¢˜ï¼Œå¯¼è‡´ Redis çš„æ€§èƒ½çªç„¶ä¸‹é™50%ç”šè‡³æ›´å¤šã€‚è¿™äº›â€œéšè—é™·é˜±â€å¾€å¾€åœ¨é»˜è®¤é…ç½®ä¸­æ½œä¼ï¼Œæˆ–åœ¨ç‰¹å®šä¸šåŠ¡åœºæ™¯ä¸‹è¢«æ„å¤–è§¦å‘ã€‚</p>
<p>æœ¬æ–‡å°†æ·±å…¥å‰–æ5ä¸ªå®¹æ˜“è¢«å¿½è§†çš„ Redis é…ç½®é™·é˜±ï¼Œç»“åˆåŸç†åˆ†æä¸å®æˆ˜æ¡ˆä¾‹ï¼Œå¸®åŠ©ä½ è§„é¿æ€§èƒ½é£é™©ã€‚æ— è®ºä½ æ˜¯è¿ç»´å·¥ç¨‹å¸ˆè¿˜æ˜¯å¼€å‘äººå‘˜ï¼Œè¿™äº›çŸ¥è¯†éƒ½èƒ½è®©ä½ æ›´é«˜æ•ˆåœ°é©¾é©­ Redisã€‚</p>
<hr/>
<h3 data-id="heading-2">ä¸»ä½“</h3>
<h4 data-id="heading-3">1. <code>maxmemory-policy</code>ï¼šæ·˜æ±°ç­–ç•¥é€‰é”™ï¼Œååé‡ç›´æ¥è…°æ–©</h4>
<p><strong>é—®é¢˜ç°è±¡</strong>ï¼š<br/>
Redis å†…å­˜å ç”¨æ¥è¿‘ä¸Šé™æ—¶ï¼Œå†™å…¥æ€§èƒ½çªç„¶ä¸‹é™50%ï¼Œä½† CPU å’Œç½‘ç»œå‡æ— ç“¶é¢ˆã€‚</p>
<p><strong>æ ¹å› åˆ†æ</strong>ï¼š<br/>
Redis çš„ <code>maxmemory-policy</code> å†³å®šäº†å†…å­˜æ»¡æ—¶çš„æ•°æ®æ·˜æ±°ç­–ç•¥ã€‚é»˜è®¤ç­–ç•¥ <code>noeviction</code> ä¼šæ‹’ç»æ‰€æœ‰å†™å…¥è¯·æ±‚ï¼Œè€Œ <code>allkeys-lru</code> æˆ– <code>volatile-lru</code> ä¼šè§¦å‘ä¸»åŠ¨æ·˜æ±°ã€‚å¦‚æœé€‰æ‹©ä¸å½“ï¼ˆå¦‚è¯¯ç”¨ <code>allkeys-random</code>ï¼‰ï¼Œå¯èƒ½å¯¼è‡´é¢‘ç¹æ·˜æ±°çƒ­æ•°æ®ï¼Œå¼•å‘ç¼“å­˜å‘½ä¸­ç‡æš´è·Œå’Œååé‡éª¤é™ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<ul>
<li><strong>ç¼“å­˜åœºæ™¯</strong>ï¼šä¼˜å…ˆä½¿ç”¨ <code>allkeys-lru</code>ï¼ˆåŸºäºè®¿é—®é¢‘ç‡æ·˜æ±°ï¼‰ã€‚</li>
<li><strong>æŒä¹…åŒ–å…³é”®æ•°æ®</strong>ï¼šä½¿ç”¨ <code>volatile-lru</code> å¹¶ä»…ä¸ºä¸´æ—¶æ•°æ®è®¾ç½® TTLã€‚</li>
<li><strong>ç›‘æ§æŒ‡æ ‡</strong>ï¼šå…³æ³¨ <code>evicted_keys</code> å’Œ <code>cache_hit_ratio</code>ï¼Œç¡®ä¿æ·˜æ±°è¡Œä¸ºå¯æ§ã€‚</li>
</ul>
<h4 data-id="heading-4">2. <code>repl-backlog-size</code>ï¼šä¸»ä»å¤åˆ¶ç§¯å‹ä¸è¶³å¼•å‘çš„é›ªå´©</h4>
<p><strong>é—®é¢˜ç°è±¡</strong>ï¼š<br/>
ä¸»ä»åˆ‡æ¢åï¼Œä»èŠ‚ç‚¹é•¿æ—¶é—´æ— æ³•å®ŒæˆåŒæ­¥ï¼Œå®¢æˆ·ç«¯è¯·æ±‚è¶…æ—¶æ¿€å¢ã€‚</p>
<p><strong>æ ¹å› åˆ†æ</strong>ï¼š<br/>
ä¸»ä»å¤åˆ¶çš„ <code>repl-backlog-size</code>ï¼ˆé»˜è®¤ä¸º1MBï¼‰å†³å®šäº†å¤åˆ¶ç§¯å‹ç¼“å†²åŒºå¤§å°ã€‚å¦‚æœç½‘ç»œé—ªæ–­æˆ–ä»èŠ‚ç‚¹é‡å¯ï¼Œç§¯å‹åŒºè¿‡å°ä¼šå¯¼è‡´å…¨é‡åŒæ­¥ï¼ˆSYNCï¼‰é¢‘ç¹è§¦å‘ï¼Œæ¶ˆè€—ä¸»èŠ‚ç‚¹èµ„æºå’Œå¸¦å®½ã€‚åœ¨é«˜å†™å…¥åœºæ™¯ä¸­ï¼Œ1MBçš„ç§¯å‹å¯èƒ½ä»…èƒ½æ”¯æ’‘å‡ ç§’çš„æ•°æ®ä¸¢å¤±å®¹é”™ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<ul>
<li><strong>è°ƒæ•´å…¬å¼</strong>ï¼š<code>repl-backlog-size = (å¹³å‡å†™å…¥é€Ÿç‡ Ã— æœ€å¤§å®¹å¿æ–­è¿æ—¶é—´) Ã— 2</code><br/>
ä¾‹å¦‚ï¼šè‹¥å†™å…¥é€Ÿç‡10MB/sï¼Œå®¹å¿5ç§’æ–­è¿ï¼Œåˆ™è‡³å°‘è®¾ç½®ä¸º100MBã€‚</li>
<li><strong>åŠ¨æ€è°ƒæ•´</strong>ï¼šé€šè¿‡ <code>CONFIG SET repl-backlog-size</code> åœ¨çº¿æ‰©å®¹æ— éœ€é‡å¯ã€‚</li>
</ul>
<h4 data-id="heading-5">3. <code>client-output-buffer-limit</code>ï¼šå¤§Keyè®¢é˜…å‹å®æœåŠ¡ç«¯</h4>
<p><strong>é—®é¢˜ç°è±¡</strong>ï¼š<br/>
Redis çªå‘é«˜å»¶è¿Ÿï¼Œæ—¥å¿—ä¸­å‡ºç°å¤§é‡ <code>Client output buffer limits reached</code> è­¦å‘Šã€‚</p>
<p><strong>æ ¹å› åˆ†æ</strong>ï¼š<br/>
æ­¤å‚æ•°é™åˆ¶å®¢æˆ·ç«¯è¾“å‡ºç¼“å†²åŒºï¼ˆå¦‚è®¢é˜…ã€MONITORå‘½ä»¤ï¼‰ã€‚è‹¥å®¢æˆ·ç«¯æ¶ˆè´¹è¿‡æ…¢ï¼ˆå¦‚è®¢é˜…äº†å¤§Keyçš„ Pub/Subï¼‰ï¼Œç¼“å†²åŒºç§¯å‹ä¼šå¯¼è‡´æœåŠ¡ç«¯å¼ºåˆ¶æ–­å¼€è¿æ¥æˆ–é˜»å¡å…¶ä»–è¯·æ±‚ã€‚é»˜è®¤å€¼é€šå¸¸è¿‡ä½ï¼ˆå¦‚æ™®é€šå®¢æˆ·ç«¯8MBï¼‰ã€‚</p>
<p><strong>ä¼˜åŒ–å»ºè®®</strong>ï¼š</p>
<pre><code class="hljs language-plaintext" lang="plaintext">client-output-buffer-limit pubsub 256mb 128mb 60
client-output-buffer-limit replica 512mb 256mb 300
</code></pre>
<ul>
<li><strong>Pub/Subåœºæ™¯</strong>ï¼šæ ¹æ®æ¶ˆæ¯é€Ÿç‡å’Œæ¶ˆè´¹èƒ½åŠ›è°ƒæ•´é˜ˆå€¼ä¸ç¡¬é™æ—¶é—´ã€‚</li>
<li><strong>ç›‘æ§å‘½ä»¤</strong>ï¼šå®šæœŸæ£€æŸ¥ <code>CLIENT LIST</code> ä¸­çš„ <code>omem</code>ï¼ˆè¾“å‡ºç¼“å†²åŒºå ç”¨ï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-6">4. <code>THPï¼ˆé€æ˜å¤§é¡µï¼‰</code>ï¼šLinuxå†…æ ¸çš„â€œå¥½å¿ƒåŠåäº‹â€</h4>
<p><strong>é—®é¢˜ç°è±¡</strong>ï¼š<br/>
Redis QPSæ³¢åŠ¨å‰§çƒˆï¼Œå¶ç°é•¿è¾¾æ•°ç™¾æ¯«ç§’çš„å»¶è¿Ÿæ¯›åˆºã€‚</p>
<p>*<em>æ ¹å› åˆ†æ</em></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[React å²è¯—çº§æ¼æ´ï¼š SSR Server Action åè®®å¯¼è‡´æœåŠ¡å™¨è¿œç¨‹ä»£ç æ‰§è¡Œ]]></title>    <link>https://juejin.cn/post/7580270531469574190</link>    <guid>https://juejin.cn/post/7580270531469574190</guid>    <pubDate>2025-12-06T04:24:57.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7580270531469574190" data-draft-id="7580251192330453038" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="React å²è¯—çº§æ¼æ´ï¼š SSR Server Action åè®®å¯¼è‡´æœåŠ¡å™¨è¿œç¨‹ä»£ç æ‰§è¡Œ"/> <meta itemprop="keywords" content="React.js,Next.js,æ¶æ„"/> <meta itemprop="datePublished" content="2025-12-06T04:24:57.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Stirner"/> <meta itemprop="url" content="https://juejin.cn/user/3474112476887933"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            React å²è¯—çº§æ¼æ´ï¼š SSR Server Action åè®®å¯¼è‡´æœåŠ¡å™¨è¿œç¨‹ä»£ç æ‰§è¡Œ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3474112476887933/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Stirner
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-06T04:24:57.000Z" title="Sat Dec 06 2025 04:24:57 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>Next.js åœ¨ App Router ä¸­å¼•å…¥çš„ Server Actions åŠŸèƒ½æå¤§åœ°ç®€åŒ–äº†å‰åç«¯äº¤äº’æµç¨‹ï¼Œä½†å…¶åº•å±‚ä½¿ç”¨çš„é€šä¿¡åè®®â€”â€”React Flight åè®®ï¼Œæ›¾è¢«å‘ç°å­˜åœ¨ä¸¥é‡çš„å®‰å…¨æ¼æ´ã€‚è¯¥æ¼æ´å…è®¸æ”»å‡»è€…é€šè¿‡ç²¾å¿ƒæ„é€ çš„æ•°æ®åŒ…ï¼Œç»•è¿‡å®‰å…¨æ£€æŸ¥ï¼Œæœ€ç»ˆåœ¨æœåŠ¡å™¨ç«¯å®ç°<strong>è¿œç¨‹ä»£ç æ‰§è¡Œ (RCE)</strong> ã€‚</p>
<h2 data-id="heading-0">Server Actions ä¸ Flight åè®®æœºåˆ¶</h2>
<p>ä¸ºäº†ç†è§£æ¼æ´ï¼Œé¦–å…ˆéœ€è¦äº†è§£ Server Actions çš„è¿è¡Œæœºåˆ¶ã€‚</p>
<h3 data-id="heading-1">Server Actions çš„è®¾è®¡åˆè¡·</h3>
<p>åœ¨ Next.js 13+ ä¸­ï¼ŒServer Actions å…è®¸å¼€å‘è€…å®šä¹‰æœåŠ¡ç«¯å‡½æ•°ï¼Œå¹¶ç›´æ¥åœ¨å®¢æˆ·ç«¯ç»„ä»¶ä¸­è°ƒç”¨ï¼Œæ— éœ€æ˜¾å¼åˆ›å»º API è·¯ç”±ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// app/actions.js</span>
<span class="hljs-string">'use server'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">submitForm</span>(<span class="hljs-params">formData</span>) {
  <span class="hljs-comment">// è¯¥å‡½æ•°åœ¨æœåŠ¡ç«¯è¿è¡Œ</span>
  <span class="hljs-keyword">await</span> db.<span class="hljs-property">users</span>.<span class="hljs-title function_">create</span>({ <span class="hljs-attr">name</span>: formData.<span class="hljs-title function_">get</span>(<span class="hljs-string">'name'</span>) })
  <span class="hljs-keyword">return</span> { <span class="hljs-attr">success</span>: <span class="hljs-literal">true</span> }
}

<span class="hljs-comment">// app/page.jsx (å®¢æˆ·ç«¯ç»„ä»¶)</span>
<span class="hljs-keyword">import</span> { submitForm } <span class="hljs-keyword">from</span> <span class="hljs-string">'./actions'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Page</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">action</span>=<span class="hljs-string">{submitForm}</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"name"</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"submit"</span>&gt;</span>æäº¤<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span></span>
  )
}
</code></pre>
<h3 data-id="heading-2">åº•å±‚é€šä¿¡ï¼šFlight åè®®</h3>
<p>å½“ç”¨æˆ·è§¦å‘ä¸Šè¿°è¡¨å•æ—¶ï¼Œæµè§ˆå™¨å¹¶éå‘é€æ™®é€šçš„ JSON è¯·æ±‚ï¼Œè€Œæ˜¯é€šè¿‡ <strong>React Flight åè®®</strong>è¿›è¡Œé€šä¿¡ã€‚æµç¨‹å¦‚ä¸‹ï¼š</p>
<ol>
<li><strong>åºåˆ—åŒ–</strong>ï¼šReact å°†å®¢æˆ·ç«¯æ•°æ®åºåˆ—åŒ–ä¸º Flight åè®®æ ¼å¼ã€‚</li>
<li><strong>ä¼ è¾“</strong>ï¼šé€šè¿‡ HTTP POST è¯·æ±‚å‘é€ï¼Œè¯·æ±‚å¤´åŒ…å« <code>Next-Action</code> æ ‡è¯†ç¬¦ã€‚</li>
<li><strong>ååºåˆ—åŒ–</strong>ï¼šNext.js æœåŠ¡ç«¯æ¥æ”¶è¯·æ±‚ï¼Œè§£æ Flight æ ¼å¼æ•°æ®ï¼Œè¿˜åŸå‚æ•°ã€‚</li>
<li><strong>æ‰§è¡Œä¸å“åº”</strong>ï¼šæ‰§è¡ŒæœåŠ¡ç«¯å‡½æ•°ï¼Œå¹¶å°†ç»“æœå†æ¬¡é€šè¿‡ Flight åè®®ç¼–ç è¿”å›ç»™å®¢æˆ·ç«¯ã€‚</li>
</ol>
<p>Flight åè®®çš„æ•°æ®ç»“æ„ï¼š</p>
<p>Flight åè®®å°†æ•°æ®æ‹†åˆ†ä¸ºå¤šä¸ª Chunk (å—)ã€‚Chunk ä¹‹é—´å¯ä»¥é€šè¿‡ ID äº’ç›¸å¼•ç”¨ï¼Œç‰¹æ®Šæ•°æ®ç±»å‹ä½¿ç”¨ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>å‰ç¼€è¡¨ç¤ºï¼ˆå¦‚</mtext></mrow><annotation encoding="application/x-tex">å‰ç¼€è¡¨ç¤ºï¼ˆå¦‚</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord cjk_fallback">å‰ç¼€è¡¨ç¤ºï¼ˆå¦‚</span></span></span></span></span>D ä»£è¡¨ Dateï¼Œ$K ä»£è¡¨ FormDataï¼‰ã€‚</p>
<p>æ¼æ´çš„æ ¸å¿ƒï¼Œæ­£æ˜¯å‡ºç°åœ¨æœåŠ¡ç«¯<strong>è§£æå’Œååºåˆ—åŒ–</strong>è¿™äº› Chunk çš„è¿‡ç¨‹ä¸­ã€‚</p>
<h2 data-id="heading-3">æ¼æ´æˆå› ï¼šæ”»å‡»é“¾çš„ä¸‰ç¯</h2>
<p>è¯¥ RCE æ¼æ´çš„åˆ©ç”¨è¿‡ç¨‹å¹¶éå•ä¸€ç¼ºé™·å¯¼è‡´ï¼Œè€Œæ˜¯ä¸²è”äº†ä¸‰ä¸ªé€»è¾‘æ¼æ´ã€‚</p>
<h3 data-id="heading-4">ç¬¬ä¸€ç¯ï¼šå¼•ç”¨è§£æä¸­çš„è·¯å¾„éå†</h3>
<p>Flight åè®®å…è®¸ä½¿ç”¨å†’å· <code>:</code> å¯¹å¼•ç”¨å¯¹è±¡çš„å±æ€§è¿›è¡ŒåµŒå¥—è®¿é—®ã€‚ä¾‹å¦‚ï¼Œ<code>$0:users:0:name</code> è¡¨ç¤ºè®¿é—® Chunk 0 ä¸­ <code>users</code> æ•°ç»„ç¬¬ 0 é¡¹çš„ <code>name</code> å±æ€§ã€‚</p>
<p>æœåŠ¡ç«¯è§£æé€»è¾‘çš„ç®€åŒ–ä¼ªä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// æœåŠ¡ç«¯è§£æé€»è¾‘ç¤ºæ„</span>
<span class="hljs-keyword">let</span> value = chunk.<span class="hljs-property">value</span>;
<span class="hljs-keyword">const</span> path = reference.<span class="hljs-title function_">split</span>(<span class="hljs-string">':'</span>); <span class="hljs-comment">// åˆ†å‰²è·¯å¾„</span>
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">1</span>; i &lt; path.<span class="hljs-property">length</span>; i++) {
  value = value[path[i]]; <span class="hljs-comment">// é€å±‚è®¿é—®å±æ€§</span>
}
</code></pre>
<p><strong>æ¼æ´ç‚¹</strong>ï¼šæœåŠ¡ç«¯å¹¶æœªå¯¹è·¯å¾„ä¸­çš„å±æ€§åè¿›è¡Œè¿‡æ»¤æˆ–ç™½åå•éªŒè¯ã€‚</p>
<p>è¿™æ„å‘³ç€æ”»å‡»è€…å¯ä»¥æ„é€ ç‰¹æ®Šè·¯å¾„æ¥è®¿é—® JavaScript å¯¹è±¡çš„åŸå‹é“¾å±æ€§ï¼š</p>
<ul>
<li><code>$0:__proto__:then</code>ï¼šè®¿é—®åŸå‹é“¾ä¸Šçš„ <code>then</code> æ–¹æ³•ã€‚</li>
<li><code>$0:constructor:constructor</code>ï¼šè·å–å¯¹è±¡çš„æ„é€ å‡½æ•°çš„æ„é€ å‡½æ•°ï¼Œå³ <strong><code>Function</code> æ„é€ å‡½æ•°</strong>ã€‚</li>
</ul>
<h3 data-id="heading-5">ç¬¬äºŒç¯ï¼šä¼ªé€  Chunk æ³¨å…¥</h3>
<p>åœ¨ React å†…éƒ¨å®ç°ä¸­ï¼ŒChunk è¢«è§†ä¸ºä¸€ç§ç±»ä¼¼ Promise çš„å¯¹è±¡ã€‚æœåŠ¡ç«¯åœ¨è§£ææ—¶ï¼Œä¼šæ£€æŸ¥å¯¹è±¡çš„ <code>status</code> å±æ€§ã€‚å¦‚æœ <code>status</code> æ ‡è®°ä¸ºå®ŒæˆçŠ¶æ€ï¼ˆå¦‚ <code>"resolved_model"</code>ï¼‰ï¼ŒæœåŠ¡ç«¯ä¼šç›´æ¥è§£æå…¶å†…å®¹ï¼Œè€Œä¸ä¼šéªŒè¯è¯¥å¯¹è±¡æ˜¯å¦ç”±ç³»ç»Ÿç”Ÿæˆã€‚</p>
<p>æ”»å‡»è€…å¯ä»¥æ„é€ ä¸€ä¸ª<strong>ä¼ªé€ çš„ Chunk å¯¹è±¡</strong>ä½œä¸º Payload å‘é€ç»™æœåŠ¡å™¨ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"status"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"resolved_model"</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// ä¼ªè£…æˆå·²è§£æçŠ¶æ€</span>
  <span class="hljs-attr">"value"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"..."</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"_response"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-comment">// æ³¨å…¥æ¶æ„çš„å†…éƒ¨ Response å¯¹è±¡</span>
    <span class="hljs-attr">"_prefix"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"æ¶æ„ä»£ç å­—ç¬¦ä¸²"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"_formData"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"get"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"å¾…æ›¿æ¢çš„å‡½æ•°å ä½ç¬¦"</span> <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>ç”±äºç¼ºä¹ä¸¥æ ¼çš„ç±»å‹éªŒè¯ï¼ŒæœåŠ¡ç«¯ä¼šæ¥çº³è¿™ä¸ªä¼ªé€ çš„å¯¹è±¡åŠå…¶åŒ…å«çš„æ¶æ„å†…éƒ¨å±æ€§ <code>_response</code>ã€‚</p>
<h3 data-id="heading-6">ç¬¬ä¸‰ç¯ï¼šFunction æ„é€ å‡½æ•°æ³¨å…¥ä¸ä»£ç æ‰§è¡Œ</h3>
<p>æ”»å‡»è€…çš„æœ€ç»ˆç›®æ ‡æ˜¯åˆ©ç”¨ä¸Šè¿°ä¸¤ä¸ªæ¼æ´ï¼Œå°†ä»£ç å­—ç¬¦ä¸²è½¬æ¢ä¸ºå¯æ‰§è¡Œå‡½æ•°ã€‚</p>
<ol>
<li><strong>æ›¿æ¢å…³é”®æ–¹æ³•</strong>ï¼šæ”»å‡»è€…åˆ©ç”¨ç¬¬ä¸€ç¯çš„â€œè·¯å¾„éå†â€ï¼Œå°†ä¼ªé€  Chunk ä¸­ <code>_response._formData.get</code> çš„å€¼æŒ‡å‘ <code>$1:constructor:constructor</code>ï¼ˆå³ <code>Function</code> æ„é€ å‡½æ•°ï¼‰ã€‚</li>
<li><strong>è§¦å‘æ‰§è¡Œ</strong>ï¼šæ”»å‡»è€…åœ¨ Payload ä¸­åŒ…å«ä¸€ä¸ª <code>$B</code> (Blob) ç±»å‹çš„å¼•ç”¨ã€‚</li>
</ol>
<p>å½“æœåŠ¡ç«¯è§£æ <code>$B</code> ç±»å‹å¼•ç”¨æ—¶ï¼Œä¼šæ‰§è¡Œå¦‚ä¸‹é€»è¾‘ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// React æºç é€»è¾‘ç®€åŒ–</span>
<span class="hljs-keyword">case</span> <span class="hljs-string">'B'</span>: {
  <span class="hljs-keyword">const</span> prefix = response.<span class="hljs-property">_prefix</span>; <span class="hljs-comment">// æ”»å‡»è€…æ³¨å…¥çš„ä»£ç å­—ç¬¦ä¸²</span>
  <span class="hljs-keyword">const</span> blobKey = prefix + id;
  
  <span class="hljs-comment">// å…³é”®ç‚¹ï¼šè°ƒç”¨ _formData.get</span>
  <span class="hljs-comment">// æ­¤æ—¶ get å·²è¢«æ›¿æ¢ä¸º Function æ„é€ å‡½æ•°</span>
  <span class="hljs-keyword">const</span> backingEntry = response.<span class="hljs-property">_formData</span>.<span class="hljs-title function_">get</span>(blobKey);
  
  <span class="hljs-keyword">return</span> backingEntry;
}
</code></pre>
<p>ä¸Šè¿°ä»£ç å®é™…ä¸Šç­‰æ•ˆäºæ‰§è¡Œäº†ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">new</span> <span class="hljs-title class_">Function</span>(<span class="hljs-string">"æ¶æ„ä»£ç å­—ç¬¦ä¸²..."</span>)
</code></pre>
<p>è¿™ä¼šåˆ›å»ºä¸€ä¸ªåŒ¿åå‡½æ•°ï¼Œå…¶å‡½æ•°ä½“å³ä¸ºæ”»å‡»è€…æ³¨å…¥çš„ä»£ç ã€‚éšåï¼Œè¯¥å‡½æ•°è¢«ä½œä¸º Promise çš„å›è°ƒæ‰§è¡Œï¼Œä»è€Œåœ¨æœåŠ¡å™¨ç«¯å®Œæˆäº†<strong>è¿œç¨‹ä»£ç æ‰§è¡Œ (RCE)</strong> ã€‚</p>
<h2 data-id="heading-7">æ”»å‡»æµç¨‹æ€»ç»“</h2>
<p>æ•´ä¸ªæ”»å‡»è¿‡ç¨‹å¯ä»¥æ¦‚æ‹¬ä¸ºä»¥ä¸‹æ­¥éª¤ï¼š</p>
<ol>
<li><strong>æ„é€  Payload</strong>ï¼šæ”»å‡»è€…å‘é€åŒ…å«ä¼ªé€  Chunk çš„æ¶æ„æ•°æ®åŒ…ã€‚</li>
<li><strong>åŸå‹é“¾æ±¡æŸ“</strong>ï¼šåˆ©ç”¨è·¯å¾„éå†æ¼æ´ï¼ˆ<code>__proto__</code>ï¼‰ï¼ŒåŠ«æŒ Promise è§£æè¿‡ç¨‹ã€‚</li>
<li><strong>æ„é€ å‡½æ•°æ›¿æ¢</strong>ï¼šåˆ©ç”¨è·¯å¾„éå†è·å– <code>Function</code> æ„é€ å‡½æ•°ï¼Œæ›¿æ¢æ‰å†…éƒ¨çš„ <code>_formData.get</code> æ–¹æ³•ã€‚</li>
<li><strong>ä¼ªé€ å¯¹è±¡æ³¨å…¥</strong>ï¼šæœåŠ¡å™¨ååºåˆ—åŒ–ä¼ªé€ çš„ Chunkï¼ŒåŠ è½½æ¶æ„çš„ <code>_response</code> å¯¹è±¡ã€‚</li>
<li><strong>ä»£ç ç¼–è¯‘ä¸æ‰§è¡Œ</strong>ï¼šæœåŠ¡å™¨å¤„ç† Blob å¼•ç”¨æ—¶ï¼Œé”™è¯¯åœ°è°ƒç”¨ <code>Function</code> æ„é€ å‡½æ•°ï¼Œå°†æ¶æ„å­—ç¬¦ä¸²ç¼–è¯‘ä¸ºå‡½æ•°å¹¶åœ¨æœåŠ¡ç«¯æ‰§è¡Œã€‚</li>
</ol>
<h2 data-id="heading-8">æ€»ç»“</h2>
<p>é˜²å¾¡æªæ–½ï¼š
<a href="https://link.juejin.cn?target=https%3A%2F%2Freact.dev%2Fblog%2F2025%2F12%2F03%2Fcritical-security-vulnerability-in-react-server-components" target="_blank" title="https://react.dev/blog/2025/12/03/critical-security-vulnerability-in-react-server-components" ref="nofollow noopener noreferrer">react.dev/blog/2025/1â€¦</a>
æ‰“å¼€è¿™ç¯‡æ–‡ç« å¤åˆ¶è¿› cursor è¯Šæ–­é¡¹ç›®çš„package.json ç”Ÿæˆä¾èµ–å‡çº§å‘½ä»¤</p>
<p>è¯„è®ºï¼š è¿™æ˜¯ FE å‘å±•è‡³ä»Šå¯¹å…¨çƒäº’è”ç½‘å½±å“æœ€å¤§çš„ Bugï¼Œæ— æ•°ä¸€é”®éƒ¨ç½²åˆ° Vercel ï¼ŒNetlify, Cloudflare çš„ NextJS ç½‘ç«™éƒ½æ˜¯ç›´æ¥æš´éœ²çš„å¯æ”»å‡»ç«¯ç‚¹ã€‚</p>
<p><strong>æ‰€å¹¸ NextJS è¿™ä¸€å¥—çº¯ FaaS æ–¹æ¡ˆå…¶å®ç§æœ‰åŒ–éƒ¨ç½²åˆ°è‡ªå·±æœåŠ¡å™¨å¹¶ä¸æ–¹ä¾¿ï¼Œæ‰€ä»¥äº’è”ç½‘ä¸Šå¤§éƒ¨åˆ†éƒ½æ˜¯éƒ¨ç½²åˆ° Vercel è‡ªå·±æœåŠ¡æˆ–å…è´¹ FaaSå¹³å°çš„ï¼Œä¹Ÿæ˜¯è‡ªæˆ‘å¾—ä¹‹è‡ªæˆ‘å¤±ä¹‹äº†ã€‚</strong></p>
<p><strong>åå¤„å°±æ˜¯å…è´¹çš„ FaaS æœåŠ¡è¢«å½±å“æœ€å¤§ï¼Œæ¯”å¦‚ CloudFlare åœ¨å¤„ç†æœ¬é—®é¢˜æ—¶ 2025/12/5 åˆå‡ºç°äº†å…¨çƒå®•æœºã€‚è™½ç„¶æˆ‘æ˜¯ CF ç²‰ï¼Œä½†è¿™ä¸ªæ´—ä¸äº†ï¼Œè‚¡ä»·è¿˜æœ‰ä¸‹è·Œç©ºé—´ã€‚</strong></p>
<p>é™„ WAF ä¾§å¦‚ä½•é…ç½®</p>
<h2 data-id="heading-9">Cloudflare WAF ä¸­å®‰å…¨æ‹¦æˆª</h2>
<p>å½“ WAF è¯•å›¾ä½¿ç”¨åŒ…å«å¤§é‡å›æº¯çš„æ­£åˆ™è¡¨è¾¾å¼ï¼ˆReDoS é£é™©ï¼‰å»åŒ¹é…ä¸€ä¸ªæå…¶å¤æ‚çš„æ¶æ„ Payload æ—¶ï¼ŒCPU ä¼šè¢«ç¬é—´å æ»¡ã€‚å¯¹äº Next.js è¿™ä¸ªæ¼æ´ï¼Œæ”»å‡» Payload ç»“æ„å¤æ‚ä¸”åµŒå¥—æ·±ï¼Œå¦‚æœæˆ‘ä»¬è¯•å›¾ç”¨æ­£åˆ™å»ç²¾å‡†åŒ¹é…æ•´ä¸ª JSON ç»“æ„ï¼Œææ˜“é‡è¹ˆè¦†è¾™ã€‚</p>
<h3 data-id="heading-10">é…ç½®æ€è·¯</h3>
<p>æˆ‘ä»¬ä¸éœ€è¦è§£ææ•´ä¸ª JSONï¼Œåªéœ€è¦æŠ“ä½æ”»å‡»é“¾ä¸­<strong>å¿…ä¸å¯å°‘</strong>çš„ç‰¹å¾å­—ç¬¦ä¸²ã€‚</p>
<ul>
<li>
<p><strong>æµé‡ç­›é€‰</strong>ï¼šä»…æ£€æŸ¥å¸¦æœ‰ <code>Next-Action</code> è¯·æ±‚å¤´çš„ <code>POST</code> è¯·æ±‚ã€‚è¿™èƒ½è¿‡æ»¤æ‰ 99% çš„æ™®é€šæµé‡ï¼Œæå¤§é™ä½ WAF è´Ÿè½½ã€‚</p>
</li>
<li>
<p><strong>ç‰¹å¾è¯†åˆ«</strong>ï¼š</p>
<ul>
<li><code>__proto__</code>ï¼šè¿™æ˜¯åŸå‹é“¾æ±¡æŸ“çš„æ ¸å¿ƒï¼Œæ­£å¸¸ä¸šåŠ¡ä¸­å‡ ä¹ä¸å¯èƒ½åœ¨è¡¨å• Key ä¸­å‡ºç°æ­¤å­—ç¬¦ä¸²ã€‚</li>
<li><code>constructor</code>ï¼šè¿™æ˜¯è·å– Function æ„é€ å‡½æ•°çš„å…³é”®ã€‚ä¸ºäº†é˜²æ­¢è¯¯æ€ï¼ˆå¦‚ç”¨æˆ·è¾“å…¥ "constructor" å•è¯ï¼‰ï¼Œå»ºè®®åŒ¹é…å¸¦å†’å·çš„å¼•ç”¨æ ¼å¼ï¼ˆ<code>:constructor</code> æˆ– <code>"constructor"</code>ï¼‰ï¼Œä½†åœ¨é«˜å±æ—¶æœŸï¼Œé˜»æ–­è£¸å­—ç¬¦ä¸²æ˜¯æ›´ç¨³å¦¥çš„é€‰æ‹©ã€‚</li>
</ul>
</li>
</ul>
<h3 data-id="heading-11">Cloudflare WAF é…ç½®æ­¥éª¤</h3>
<ol>
<li>ç™»å½• Cloudflare æ§åˆ¶å°ï¼Œè¿›å…¥ç›®æ ‡åŸŸåçš„ <strong>Security (å®‰å…¨æ€§)</strong> &gt; <strong>WAF (Web åº”ç”¨ç¨‹åºé˜²ç«å¢™)</strong> ã€‚</li>
<li>ç‚¹å‡» <strong>Create rule (åˆ›å»ºè§„åˆ™)</strong> ã€‚</li>
<li>ç‚¹å‡» <strong>Edit expression (ç¼–è¾‘è¡¨è¾¾å¼)</strong> ï¼Œåˆ‡æ¢åˆ°è¡¨è¾¾å¼æ¨¡å¼ã€‚</li>
<li>å°†ä¸‹æ–¹çš„è¡¨è¾¾å¼ç²˜è´´è¿›å»ï¼š</li>
</ol>
<pre><code class="hljs language-bash" lang="bash">(http.request.method eq <span class="hljs-string">"POST"</span> and any(http.request.headers.names[*] eq <span class="hljs-string">"next-action"</span>) and (http.request.body contains <span class="hljs-string">"__proto__"</span> or http.request.body contains <span class="hljs-string">":constructor"</span>))
</code></pre>
<h3 data-id="heading-12">è§„åˆ™è¯¦è§£ä¸å®‰å…¨æ€§åˆ†æ</h3>
<ul>
<li>
<p><code>http.request.method eq "POST"</code>ï¼š</p>
<ul>
<li>é™åˆ¶ä»…æ£€æµ‹ POST è¯·æ±‚ã€‚</li>
</ul>
</li>
<li>
<p><code>any(http.request.headers.names[*] eq "next-action")</code>ï¼š</p>
<ul>
<li>è¿™æ˜¯ Next.js Server Actions çš„ç‰¹å¾æŒ‡çº¹ã€‚å¦‚æœä¸åŒ…å«æ­¤å¤´ï¼Œè¯´æ˜ä¸æ˜¯ Server Action è¯·æ±‚ï¼Œç›´æ¥æ”¾è¡Œã€‚</li>
</ul>
</li>
<li>
<p><code>http.request.body contains "__proto__"</code>ï¼š</p>
<ul>
<li>ä½¿ç”¨ <code>contains</code> è¿ç®—ç¬¦ã€‚åº•å±‚å®ç°é€šå¸¸æ˜¯ BM ç®—æ³•æˆ–ç±»ä¼¼çš„é«˜æ•ˆå­—ç¬¦ä¸²æŸ¥æ‰¾ç®—æ³•ï¼Œæ—¶é—´å¤æ‚åº¦æ¥è¿‘ O(n)ï¼Œ<strong>ä¸å­˜åœ¨å›æº¯é£é™©</strong>ï¼Œä¸ä¼šå¯¼è‡´ CPU é£™å‡ã€‚</li>
</ul>
</li>
<li>
<p><code>http.request.body contains ":constructor"</code>ï¼š</p>
<ul>
<li>è¿™é‡ŒåŠ äº†ä¸€ä¸ªå†’å· <code>:</code>ã€‚åœ¨ Flight åè®®ä¸­ï¼Œå¼•ç”¨é€šå¸¸é€šè¿‡å†’å·åˆ†éš”ï¼ˆå¦‚ <code>$1:constructor:constructor</code>ï¼‰ã€‚åŠ ä¸Šå†’å·å¯ä»¥æœ‰æ•ˆé¿å…è¯¯ä¼¤æ­£æ–‡ä¸­åŒ…å« "constructor"ï¼ˆå»ºç­‘å•†ï¼‰ç­‰æ™®é€šå•è¯çš„æäº¤ï¼ŒåŒæ—¶åˆèƒ½ç²¾å‡†å‘½ä¸­æ”»å‡» Payloadã€‚</li>
</ul>
</li>
</ul>
<h3 data-id="heading-13">ä¸ºä»€ä¹ˆä¸è¦ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ï¼Ÿ</h3>
<p><strong>é”™è¯¯ç¤ºèŒƒï¼ˆè¯·å‹¿åœ¨ WAF ä¸­ä½¿ç”¨ï¼‰ï¼š</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å±é™©ï¼šè¯•å›¾åŒ¹é… JSON ç»“æ„çš„æ­£åˆ™</span>
Body matches <span class="hljs-string">".*"</span>.*__proto__.*<span class="hljs-string">".*"</span>
</code></pre>
<p>è¿™ç§åŒ…å« <code>.*</code> çš„è´ªå©ªåŒ¹é…ï¼Œåœ¨é¢å¯¹æ”»å‡»è€…å‘é€çš„è¶…é•¿ã€ç•¸å½¢ JSON æ•°æ®æ—¶ï¼Œä¼šå¯¼è‡´ WAF å¼•æ“è¿›è¡Œæµ·é‡çš„å›æº¯è®¡ç®—ã€‚å¯¹äºæ— æ³•æ›´æ–°ä»£ç çš„æ—§é¡¹ç›®ï¼Œä½¿ç”¨ä¸Šè¿°çš„ç®€å•å­—ç¬¦ä¸²åŒ¹é…ï¼ˆString Matchingï¼‰æ˜¯æœ€ç¨³å¥çš„â€œè™šæ‹Ÿè¡¥ä¸â€æ–¹æ¡ˆã€‚</p>
<p><strong>é…ç½®å»ºè®®</strong>ï¼šè®¾ç½®å¥½è§„åˆ™åï¼Œå»ºè®®å…ˆå°†åŠ¨ä½œè®¾ç½®ä¸º <strong>Log (è®°å½•)</strong> è§‚å¯Ÿä¸€æ®µæ—¶é—´ï¼Œç¡®è®¤æ²¡æœ‰è¯¯æ‹¦æˆªæ­£å¸¸ä¸šåŠ¡åï¼Œå†è°ƒæ•´ä¸º <strong>Block (é˜»æ–­)</strong> ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[jsé˜²æŠ–æŠ€æœ¯:ä»åŸç†åˆ°å®è·µï¼Œå¦‚ä½•è§£å†³é«˜é¢‘äº‹ä»¶å¯¼è‡´çš„æ€§èƒ½éš¾é¢˜]]></title>    <link>https://juejin.cn/post/7580216638109548559</link>    <guid>https://juejin.cn/post/7580216638109548559</guid>    <pubDate>2025-12-05T18:49:41.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7580216638109548559" data-draft-id="7579702046954946603" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="jsé˜²æŠ–æŠ€æœ¯:ä»åŸç†åˆ°å®è·µï¼Œå¦‚ä½•è§£å†³é«˜é¢‘äº‹ä»¶å¯¼è‡´çš„æ€§èƒ½éš¾é¢˜"/> <meta itemprop="keywords" content="JavaScript,å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-05T18:49:41.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Neptune1"/> <meta itemprop="url" content="https://juejin.cn/user/1030661718147776"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            jsé˜²æŠ–æŠ€æœ¯:ä»åŸç†åˆ°å®è·µï¼Œå¦‚ä½•è§£å†³é«˜é¢‘äº‹ä»¶å¯¼è‡´çš„æ€§èƒ½éš¾é¢˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1030661718147776/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Neptune1
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-05T18:49:41.000Z" title="Fri Dec 05 2025 18:49:41 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-05
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{line-height:1.75;font-family:-apple-system-font,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei UI,Microsoft YaHei,Arial,sans-serif;letter-spacing:2px;background-image:linear-gradient(90deg,rgba(50,0,0,.05) 3%,transparent 0),linear-gradient(1turn,rgba(50,0,0,.05) 3%,transparent 0);background-size:20px 20px;background-position:50%;word-break:break-word;font-weight:400;font-size:15px;overflow-x:hidden;color:#333}.markdown-body h1{font-size:23px;margin-bottom:5px;font-weight:700;padding-left:10px;border-left:5px solid #773098}.markdown-body h2{font-size:19px;font-weight:700;padding-left:10px;border-left:5px solid #916dd5}.markdown-body h3{font-size:17px;font-weight:700;padding-left:10px;border-left:5px solid #d89cf6}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{font-size:14px;margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{display:block;max-width:100%;margin:1em 0;border-radius:6px;box-shadow:2px 4px 7px #999;user-select:none}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{padding:.2em .5em;font-weight:700;font-family:-apple-system-font,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei UI,Microsoft YaHei,Arial,sans-serif;font-size:1em;color:#916dd5;word-break:break-word;overflow-x:auto;background-color:none;border-radius:2px}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;font-family:-apple-system-font,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei UI,Microsoft YaHei,Arial,sans-serif;font-weight:400;font-size:.9em;padding:16px 12px;margin:0;color:#333;word-break:normal;overflow-x:auto;background:#f8f8f8;scroll-behavior:smooth}.markdown-body a{text-decoration:none;color:#916dd5;font-weight:700;border-bottom:1px solid #916dd5}.markdown-body a:active,.markdown-body a:hover{color:#773098}.markdown-body table{display:inline-block!important;font-size:14px;width:auto;max-width:100%;overflow:auto;border:1px solid #916dd5;border-collapse:collapse}.markdown-body thead{background-color:#916dd5;color:#fff;text-align:left}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px;border:1px solid #916dd5}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #d89cf6;background-color:#f4eeff}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0;line-height:26px}.markdown-body ol,.markdown-body ul{padding-left:28px;list-style-type:circle}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body b,.markdown-body strong{color:#916dd5;font-weight:700}.markdown-body b:before,.markdown-body strong:before{content:"ã€Œ"}.markdown-body b:after,.markdown-body strong:after{content:"ã€"}.markdown-body em,.markdown-body i{color:#916dd5}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="github-gist">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#fff;color:#333}.hljs-comment,.hljs-meta{color:#969896}.hljs-emphasis,.hljs-quote,.hljs-strong,.hljs-template-variable,.hljs-variable{color:#df5000}.hljs-keyword,.hljs-selector-tag,.hljs-type{color:#d73a49}.hljs-attribute,.hljs-bullet,.hljs-literal,.hljs-symbol{color:#0086b3}.hljs-name,.hljs-section{color:#63a35c}.hljs-tag{color:#333}.hljs-attr,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-id,.hljs-selector-pseudo,.hljs-title{color:#6f42c1}.hljs-addition{color:#55a532;background-color:#eaffea}.hljs-deletion{color:#bd2c00;background-color:#ffecec}.hljs-link{text-decoration:underline}.hljs-number{color:#005cc5}.hljs-string{color:#032f62}</style><p>åœ¨å¼€å‘åº”ç”¨æ—¶ï¼Œå„ä½ç¨‹åºå¼€å‘è€…ä»¬æ˜¯å¦é‡åˆ°ä¸€ä¸ªæ€§èƒ½é—®é¢˜ï¼Œå°±æ˜¯å½“ç”¨æˆ·ç½‘ç»œå¡é¡¿æ—¶ï¼Œç‚¹å‡»ä¸€ä¸ªæŒ‰é’®çŸ­æ—¶é—´å†…æ²¡ååº”åç–¯ç‹‚ç‚¹å‡»è¯¥æŒ‰é’®ï¼Œé¢‘ç¹å‘åç«¯å‘é€è¯·æ±‚ï¼Œæˆ–è€…ç–¯ç‹‚è¾“å…¥æœç´¢æ¡†å¯¼è‡´é¡µé¢å¡é¡¿ï¼Œé¢‘ç¹è°ƒæ•´çª—å£å¤§å°å¯¼è‡´é‡æ’é‡ç»˜æš´å¢ç­‰å¸¸è§çš„æ€§èƒ½é—®é¢˜ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€ é˜²æŠ–çš„å®šä¹‰</h2>
<p>æ­¤æ—¶èªæ˜çš„ä½ æ˜¯å¦èƒ½æƒ³åˆ°ä¸€ä¸ªè§£å†³æ–¹æ³•ï¼Œé‚£å°±æ˜¯ï¼Œ<strong>æˆ‘ä»¬ä½•ä¸å¦‚è®¾ç½®ä¸€ä¸ªå®šæ—¶å™¨ï¼Œå½“è¯¥äº‹ä»¶è¢«è§¦å‘æ—¶ï¼Œæˆ‘ä»¬å¹¶ä¸ç«‹å³æ‰§è¡Œè¿™ä¸ªå‡½æ•°ï¼Œè€Œæ˜¯ç­‰å¾…ä¸€å°æ®µæ—¶é—´å†è§¦å‘ï¼Œä¸”å½“åœ¨ç­‰å¾…çš„æ—¶é—´å†…æ²¡æœ‰è¢«è§¦å‘ï¼Œä¾¿æ‰§è¡Œä¸€æ¬¡</strong></p>
<p>æƒ³è±¡ä½ åœ¨åç”µæ¢¯çš„æ—¶å€™ï¼Œå½“ä½ è¿›å…¥æ—¶ï¼Œç”µæ¢¯ä¸ä¼šç«‹å³å…³é—­ï¼Œè€Œæ˜¯ä¼šç­‰å¾…åé¢çš„äººå…¨éƒ¨è¿›å…¥åå†å…³é—­ï¼ˆæŠŠæ¯ä¸€æ¬¡ç‚¹å‡»æƒ³è±¡æˆæŒ‰ä¸€æ¬¡ç”µæ¢¯æŒ‰é’®ï¼Œæ¯ä¸€æ¬¡æŒ‰æŒ‰é’®éƒ½ä¼šé‡ç½®ç­‰å¾…æ—¶é—´ï¼‰</p>
<p>æ­¤æ—¶ä½ å°±æ˜ç™½äº†è§£å†³é¢‘ç”¨æˆ·é¢‘ç¹å‘èµ·è¯·æ±‚å¯¼è‡´çš„æ€§èƒ½é—®é¢˜çš„è§£å†³æ–¹æ³•ï¼š<strong>é˜²æŠ–</strong></p>
<p><strong>é˜²æŠ–</strong> ï¼šåœ¨äº‹ä»¶è¢«é¢‘ç¹æ‰§è¡Œæ—¶ï¼Œå‡½æ•°å¹¶ä¸ç«‹å³æ‰§è¡Œï¼Œè€Œæ˜¯åœ¨æœ€åä¸€æ¬¡è§¦å‘åç­‰å¾…æŒ‡å®šçš„å»¶è¿Ÿæ—¶é—´ï¼Œè‹¥å»¶è¿ŸæœŸé—´æ— æ–°çš„è§¦å‘ï¼Œæ–¹æ‰æ‰§è¡Œä¸€æ¬¡</p>
<h2 data-id="heading-1">äºŒã€é˜²æŠ–çš„å®ç°é€»è¾‘</h2>
<p>æˆ‘ä»¬å…ˆå‡è®¾åœ¨htmlç•Œé¢ä¸­ï¼Œæˆ‘ä»¬æ·»åŠ äº†ä¸€ä¸ªbuttonæŒ‰é’®ï¼Œä¸”å°†å…¶idå‘½åä¸ºbtnï¼Œæ­¤æ—¶æˆ‘ä»¬æƒ³è¦ä¸ºå…¶æ·»åŠ ä¸€ä¸ªç‚¹å‡»äº‹ä»¶ï¼Œä½¿å…¶æ¯ç‚¹å‡»ä¸€æ¬¡ä¾¿è¾“å‡ºä¸€æ¬¡helloï¼Œæˆ‘ä»¬éœ€è¦å†™ä¸‹å¦‚ä¸‹jsä»£ç </p>
<h4 data-id="heading-2">1.å®ç°å…·æœ‰æ‰“å°åŠŸèƒ½çš„ç‚¹å‡»äº‹ä»¶</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> btn = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'btn'</span>)
<span class="hljs-keyword">function</span> <span class="hljs-title function_">ptn</span>(<span class="hljs-params"/>){
   <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'hello'</span>)
   }
btn.<span class="hljs-title function_">addEventListenner</span>(<span class="hljs-string">'click'</span>,ptn)
</code></pre>
<p>ä½†æ˜¯ä½ ä¼šå‘ç°ï¼Œå°†ä½ å¸¦å…¥ç–¯ç‹‚ç‚¹å‡»è¯¥æŒ‰é’®çš„ç”¨æˆ·ï¼Œä½ å°±ä¼šå‘ç°ï¼Œæ­¤æ—¶å‰ç«¯ä¼šç–¯ç‹‚æ‰“å°helloï¼Œè‹¥ä¸èƒ½è§£å†³è¿™ä¸ªé—®é¢˜åˆ™ä¸èƒ½è§£å†³ç›¸ä¼¼çš„å‰ç«¯ç–¯ç‹‚å‘åç«¯å‘é€è¯·æ±‚çš„é—®é¢˜ã€‚</p>
<h4 data-id="heading-3">2.å®ç°å»¶è¿Ÿæ‰“å°ï¼ˆï¼Ÿä¸æˆåŠŸï¼‰</h4>
<p>é‚£ä½ æ­¤æ—¶æƒ³åˆ°äº†æœ‰ä¸€ä¸ªå‡½æ•°<strong>setTimeout()</strong>,è¯¶ï¼Œè¿™ä¸ªå‡½æ•°å¥½åƒå¯ä»¥èµ·åˆ°ä¸€ç§å»¶è¿Ÿçš„æ•ˆæœï¼Œæˆ–è®¸å¯ä»¥æ·»åŠ è¯·æ±‚çš„é—´éš”ï¼Ÿè®©æˆ‘ä»¬çœ‹çœ‹</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> btn = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'btn'</span>)
<span class="hljs-keyword">function</span> <span class="hljs-title function_">ptn</span>(<span class="hljs-params"/>){
   <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'hello'</span>)
   }
<span class="hljs-keyword">function</span> <span class="hljs-title function_">debounce</span>(<span class="hljs-params">fn,wait</span>){
   <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span>(<span class="hljs-params"/>){
       <span class="hljs-built_in">setTimeout</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"/>){
          <span class="hljs-title function_">fn</span>()
       
       },wait)
      }

   }   
   
btn.<span class="hljs-title function_">addEventListenner</span>(<span class="hljs-string">'click'</span>,<span class="hljs-title function_">debounce</span>(ptn,<span class="hljs-number">1000</span>))
</code></pre>
<p>æ­¤æ—¶ä½ æ…¢æ…¢åœ°ç‚¹å‡ æ¬¡ï¼Œä½ æˆ–è®¸ä¼šå‘ç°ï¼Œè¯¶ï¼Œæˆ‘å¥½åƒå®ç°äº†è¿™ä¸ªåŠŸèƒ½ï¼Œæ¯è¿‡ä¸€ç§’æ‰ä¼šæ‰“å°ä¸€æ¬¡helloï¼Œä½†æ˜¯ä½†æ˜¯ä¸€æ—¦ä½ è¿ç»­å¿«é€Ÿåœ°çš„ç‚¹å‡»ï¼Œä½ å°±ä¼šæƒŠå¥‡çš„å‘ç°ã€‚</p>
<p>å•Šï¼Ÿä¸ºä»€ä¹ˆåœ¨æˆ‘åœä¸‹æ¥çš„æ—¶å€™è¿˜ä¼šç»§ç»­æ‰“å°helloï¼Œè€Œä¸”å¥½åƒæ‰“å°çš„é—´éš”ä¸å¯èƒ½æœ‰ä¸€ç§’</p>
<h4 data-id="heading-4">å¤±è´¥åŸå› </h4>
<p>æ²¡é”™ï¼Œå› ä¸ºå•çº¯ä½¿ç”¨setTimeoutè€Œæœªä½¿ç”¨é—­åŒ…æ¥ä¿æŒçŠ¶æ€ï¼ˆè‹¥æƒ³äº†è§£é—­åŒ…ï¼Œè¯·å‚è€ƒå¾€æœŸæ–‡ç« <a href="https://juejin.cn/post/7572762535716667433" target="_blank" title="https://juejin.cn/post/7572762535716667433">ã€Šjsä¸­ä½œç”¨åŸŸåŠé—­åŒ…çš„æ¦‚å¿µä¸åŸºç¡€åº”ç”¨ã€‹</a>å¯¼è‡´æ¯æ¬¡ç‚¹å‡»éƒ½åˆ›å»ºäº†ä¸€ä¸ªæ‰“å°äº‹ä»¶ï¼Œäº‹ä»¶å‡½æ•°é¢‘ç¹è§¦å‘ï¼Œé—´éš”æ—¶é—´æ— æ³•ä¿è¯ï¼Œè¿™ç§è¢«ç§°ä¸º<strong>é˜²æŠ–å¤±æ•ˆ</strong>æˆ–<strong>é˜²æŠ–å‡½æ•°æœªèƒ½å®ç°</strong></p>
<h4 data-id="heading-5">3.ä½¿ç”¨é—­åŒ…è§£å†³æœªèƒ½æ›´æ–°å®šæ—¶å™¨çš„</h4>
<p>æˆ‘ä»¬çŸ¥é“ï¼Œé—­åŒ…å¯ä»¥èµ·åˆ°ä¸€ä¸ªä¿å­˜å¤–éƒ¨å‡½æ•°çš„å˜é‡ï¼Œå»¶è¿Ÿé”€æ¯çš„ä½œç”¨</p>
<h5 data-id="heading-6">ä½¿ç”¨é—­åŒ…å¤„ç†åçš„ä»£ç </h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> btn = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'btn'</span>)

<span class="hljs-keyword">function</span> <span class="hljs-title function_">debounce</span>(<span class="hljs-params">ptn,wait</span>){

   <span class="hljs-keyword">var</span> time 
   
   <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span>(<span class="hljs-params"/>){
   
      <span class="hljs-built_in">clearTimeout</span>(time)
      
      time = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"/>){
      
         <span class="hljs-title function_">ptn</span>() 
         
      },wait)   
   }
   
   }  
   <span class="hljs-keyword">function</span> <span class="hljs-title function_">ptn</span>(<span class="hljs-params"/>){
   <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'hello'</span>)
   
   }
   
btn.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>,<span class="hljs-title function_">debounce</span>(ptn,<span class="hljs-number">1000</span>))
</code></pre>
<p>ç»è¿‡æ£€éªŒåï¼Œä½ å‘ç°ï¼Œä½ æˆåŠŸé€šè¿‡é—­åŒ…å®ç°äº†â€˜â€˜helloâ€™â€™çš„å»¶è¿Ÿæ‰“å°æ•ˆæœï¼ŒåŒæ ·çš„ï¼Œä¹Ÿå¯ä»¥åº”ç”¨åœ¨è§£å†³ç”¨æˆ·å¤§é‡æäº¤ç­‰æ“ä½œå¯¼è‡´çš„å¤§é‡è®¡ç®—æˆ–å¸ƒå±€æ“ä½œï¼ŒèŠ‚çœäº†æœåŠ¡å™¨çš„ç®—åŠ›</p>
<h3 data-id="heading-7">æ‰©å±•</h3>
<h4 data-id="heading-8">ä¸€ã€æ·»åŠ é˜²æŠ–å‡½æ•°å¯¼è‡´thisæœ¬åº”çš„æŒ‡å‘æ”¹å˜</h4>
<p>ä¸Šè¿°ä»£ç è™½ç„¶æ˜¯å®Œæˆäº†é˜²æŠ–çš„åŸºæœ¬åŠŸèƒ½ï¼šâ€˜é¢‘ç¹è§¦å‘ï¼Œåªæ‰§è¡Œæœ€åä¸€æ¬¡â€™ï¼Œä½†æ˜¯ä½ æˆ–è®¸ä¸çŸ¥é“çš„æ˜¯ï¼Œè¿™ä»½ä»£ç ä»æœ‰ç¼ºé™·ï¼Œè¯•è¯•ä»”ç»†è§‚å¯Ÿä¸€ä¸‹è¿™ä»½ä»£ç ï¼Œ<strong>æ·»åŠ é˜²æŠ–</strong>å†è¿è¡Œå<strong>ptn</strong>å†…çš„<strong>this</strong>æŒ‡å‘ä¼¼ä¹å‘ç”Ÿäº†æ”¹å˜</p>
<p>æ²¡é”™ï¼Œåœ¨<code>btn.addEventListener('click',debounce(ptn,1000))</code>çš„è¿è¡Œæ—¶ï¼Œå‡½æ•°ä½“è¢«<strong>btn</strong>è°ƒç”¨æ—¶ï¼Œå…¶å†…éƒ¨çš„<strong>ptn</strong>å‡½æ•°åœ¨è¢«è°ƒç”¨æ—¶ï¼Œæ˜¯ç‹¬ç«‹è°ƒç”¨çš„ï¼Œè€Œæˆ‘ä»¬çŸ¥é“ï¼Œå½“ä¸€ä¸ªå‡½æ•°è¢«ç‹¬ç«‹è°ƒç”¨æ—¶ï¼Œå…¶<code>this</code>æ˜¯æŒ‡å‘<code>window</code>å…¨å±€çš„ã€‚</p>
<p>ä½†æ˜¯ä½†æ˜¯ï¼Œåœ¨æˆ‘ä»¬æ·»åŠ è¿™ä¸ªé˜²æŠ–å‡½æ•°å‰ï¼Œæˆ‘ä»¬æ˜¯è¿™æ ·å®ç°è¿™ä¸ªç‚¹å‡»äº‹ä»¶çš„<code>btn.addEventListenner('click',ptn)</code>ï¼Œæ­¤æ—¶<code>ptn</code>è¢«<code>addEventListenner</code>è§¦å‘ï¼Œå‡ºç°éšå¼ç»‘å®šï¼Œ<code>this</code>åº”è¯¥æ˜¯æŒ‡å‘<code>btn</code>çš„ã€‚</p>
<p>è€Œåœ¨æˆ‘ä»¬æ·»åŠ é˜²æŠ–å‡½æ•°åï¼Œå´å¯¼è‡´<code>ptn</code>å‡½æ•°çš„thisæŒ‡å‘äº†<code>window</code>å…¨å±€å¯¹è±¡ï¼Œé‚£æˆ‘ä»¬æ­¤æ—¶å°±åšäº†ä¸€ä»¶å¾ˆç³Ÿç³•çš„äº‹æƒ…ï¼Œæ˜¾ç„¶æˆ‘ä»¬éœ€è¦å°†å®ƒçš„<code>this</code>æŒ‡å›ç»™<code>btn</code>ã€‚</p>
<p><strong>æ–¹æ³•ä¸€</strong></p>
<blockquote>
<p>é€šè¿‡æå‰ä¿å­˜å‡½æ•°å†…thisæŒ‡å‘çš„btnï¼Œä½¿ç”¨callå‡½æ•°æ§åˆ¶å…¶thisæŒ‡å›btn</p>
</blockquote>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> btn = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'btn'</span>)

<span class="hljs-keyword">function</span> <span class="hljs-title function_">debounce</span>(<span class="hljs-params">ptn,wait</span>){

   <span class="hljs-keyword">var</span> time 
   
   <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span>(<span class="hljs-params"/>){
      <span class="hljs-keyword">const</span> _this = <span class="hljs-variable language_">this</span>
   
      <span class="hljs-built_in">clearTimeout</span>(time)
      
      time = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"/>){
         
         ptn.<span class="hljs-title function_">call</span>(_this) 
         
      },wait)   
   }
   
   }  
   <span class="hljs-keyword">function</span> <span class="hljs-title function_">ptn</span>(<span class="hljs-params"/>){
   <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'hello'</span>)
   
   }
   
btn.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>,<span class="hljs-title function_">debounce</span>(ptn,<span class="hljs-number">1000</span>))
</code></pre>
<p><strong>æ–¹æ³•äºŒ</strong></p>
<blockquote>
<p>é€šè¿‡åˆ©ç”¨ç®­å¤´å‡½æ•°æ²¡æœ‰thiså¯¹è±¡ï¼Œå…¶å†…éƒ¨çš„thisæ˜¯æŒ‡å‘btnè¿™ä¸€ç‰¹ç‚¹ï¼Œä½¿ç”¨callå‡½æ•°æ§åˆ¶å…¶thisæŒ‡å›btn</p>
</blockquote>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> btn = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'btn'</span>)

<span class="hljs-keyword">function</span> <span class="hljs-title function_">debounce</span>(<span class="hljs-params">ptn,wait</span>){

   <span class="hljs-keyword">var</span> time 
   
   <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span>(<span class="hljs-params"/>){
   
      <span class="hljs-built_in">clearTimeout</span>(time)
      
      time = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
         
         ptn.<span class="hljs-title function_">call</span>(<span class="hljs-variable language_">this</span>) 
         
      },wait)   
   }
   
   }  
   <span class="hljs-keyword">function</span> <span class="hljs-title function_">ptn</span>(<span class="hljs-params"/>){
   <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'hello'</span>)
   
   }
   
btn.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>,<span class="hljs-title function_">debounce</span>(ptn,<span class="hljs-number">1000</span>))
</code></pre>
<p>äºŒã€é—æ¼<code>addEventListener</code>æä¾›çš„eventäº‹ä»¶å‚æ•°</p>
<p>å½“æˆ‘ä»¬ä½¿ç”¨<code>addEventListener</code>è§¦å‘ä¸€ä¸ªå‡½æ•°æ—¶ï¼Œä¼šé»˜è®¤å‘å…¶å†…éƒ¨ä¼ å…¥ä¸€ä¸ªäº‹ä»¶å‡½æ•°<strong>eventå¯¹è±¡ä»¥åŠå…¶å®ƒå¯¹è±¡</strong>ï¼Œç”¨äºè®°å½•äº‹ä»¶å‘ç”Ÿçš„è¯¦æƒ…</p>
<p>è€Œæˆ‘ä»¬é—æ¼äº†å‘é˜²æŠ–å‡½æ•°å†…éƒ¨æ¥å—è¿™ä¸ª<strong>eventå¯¹è±¡ä»¥åŠå…¶å®ƒçš„å¯¹è±¡</strong>ï¼Œä»¥åŠå°†å…¶æä¾›ç»™åŸæœ¬è¢«è°ƒç”¨çš„ptnå‡½æ•°ï¼Œæ­¤æ—¶æˆ‘ä»¬éœ€è¦ä¸ºå…¶æ¥å—è¿™ä¸ª<strong>eventå¯¹è±¡ä»¥åŠå…¶å®ƒçš„å¯¹è±¡</strong>ï¼Œä»¥åŠå°†å…¶æä¾›ç»™åŸæœ¬è¢«è°ƒç”¨çš„ptnå‡½æ•°ã€‚</p>
<blockquote>
<p>é€šè¿‡...argæ¥å—åŠç»“æ„å‘å…¶å†…éƒ¨ä¼ é€’</p>
</blockquote>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> btn = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'btn'</span>)

<span class="hljs-keyword">function</span> <span class="hljs-title function_">debounce</span>(<span class="hljs-params">ptn,wait</span>){

   <span class="hljs-keyword">var</span> time 
   
   <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span>(<span class="hljs-params">...arg</span>){
   
      <span class="hljs-built_in">clearTimeout</span>(time)
      
      time = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
         
         ptn.<span class="hljs-title function_">call</span>(<span class="hljs-variable language_">this</span>,...arg) 
         
      },wait)   
   }
   
   }  
   <span class="hljs-keyword">function</span> <span class="hljs-title function_">ptn</span>(<span class="hljs-params"/>){
   <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'hello'</span>)
   
   }
   
btn.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>,<span class="hljs-title function_">debounce</span>(ptn,<span class="hljs-number">1000</span>))

</code></pre>
<p><strong>åˆ°æ­¤ï¼Œjsé˜²æŠ–æŠ€æœ¯ä»‹ç»ä¸ºæ­¢ï¼Œç‚¹èµ+å…³æ³¨ï¼Œåç»­ç»§ç»­æä¾›å®æˆ˜æ¼”ç¤ºé¢˜å‹</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[CSSä¸­å¸¸ä½¿ç”¨çš„å‡½æ•°]]></title>    <link>https://juejin.cn/post/7580198093154910254</link>    <guid>https://juejin.cn/post/7580198093154910254</guid>    <pubDate>2025-12-06T01:10:22.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7580198093154910254" data-draft-id="7580198093154811950" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="CSSä¸­å¸¸ä½¿ç”¨çš„å‡½æ•°"/> <meta itemprop="keywords" content="å‰ç«¯,CSS"/> <meta itemprop="datePublished" content="2025-12-06T01:10:22.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å†™ä»£ç çš„çš®ç­è‰‡"/> <meta itemprop="url" content="https://juejin.cn/user/4196178024218520"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            CSSä¸­å¸¸ä½¿ç”¨çš„å‡½æ•°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4196178024218520/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å†™ä»£ç çš„çš®ç­è‰‡
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-06T01:10:22.000Z" title="Sat Dec 06 2025 01:10:22 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>é™¤äº†Â <code>clamp()</code>ï¼ŒCSS è¿˜æœ‰å¾ˆå¤šåŠŸèƒ½å¼ºå¤§çš„å‡½æ•°ã€‚ä»¥ä¸‹æ˜¯åˆ†ç±»ä»‹ç»ï¼š</p>
<h2 data-id="heading-0">ä¸€ã€<strong>å°ºå¯¸ä¸è®¡ç®—ç›¸å…³å‡½æ•°</strong></h2>
<h3 data-id="heading-1">1.Â <strong>min()</strong> Â - å–æœ€å°å€¼</h3>
<p>css</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.element</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-built_in">min</span>(<span class="hljs-number">50%</span>, <span class="hljs-number">500px</span>); <span class="hljs-comment">/* å–50%å’Œ500pxä¸­çš„è¾ƒå°å€¼ */</span>
  <span class="hljs-attribute">padding</span>: <span class="hljs-built_in">min</span>(<span class="hljs-number">2vw</span>, <span class="hljs-number">20px</span>);
}
</code></pre>
<h3 data-id="heading-2">2.Â <strong>max()</strong> Â - å–æœ€å¤§å€¼</h3>
<p>css</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.element</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-built_in">max</span>(<span class="hljs-number">300px</span>, <span class="hljs-number">50%</span>); <span class="hljs-comment">/* è‡³å°‘300px */</span>
  <span class="hljs-attribute">font-size</span>: <span class="hljs-built_in">max</span>(<span class="hljs-number">1rem</span>, <span class="hljs-number">12px</span>);
}
</code></pre>
<h3 data-id="heading-3">3.Â <strong>calc()</strong> Â - æ•°å­¦è®¡ç®—</h3>
<p>css</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* åŸºæœ¬è®¡ç®— */</span>
<span class="hljs-selector-class">.element</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-built_in">calc</span>(<span class="hljs-number">100%</span> - <span class="hljs-number">2rem</span>);
  <span class="hljs-attribute">height</span>: <span class="hljs-built_in">calc</span>(<span class="hljs-number">50vh</span> + <span class="hljs-number">100px</span>);
}

<span class="hljs-comment">/* å¤æ‚è®¡ç®— */</span>
<span class="hljs-selector-class">.grid-item</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-built_in">calc</span>((<span class="hljs-number">100%</span> - <span class="hljs-number">3</span> * <span class="hljs-number">20px</span>) / <span class="hljs-number">4</span>); <span class="hljs-comment">/* 4åˆ—ç½‘æ ¼ */</span>
}

<span class="hljs-comment">/* åµŒå¥—è®¡ç®— */</span>
<span class="hljs-selector-class">.element</span> {
  <span class="hljs-attribute">font-size</span>: <span class="hljs-built_in">calc</span>(<span class="hljs-built_in">var</span>(--base-size) * <span class="hljs-number">1.2</span>);
}
</code></pre>
<h3 data-id="heading-4">4.Â <strong>fit-content()</strong> Â - å†…å®¹é€‚åº”</h3>
<p>css</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.container</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-built_in">fit-content</span>(<span class="hljs-number">500px</span>); <span class="hljs-comment">/* ä¸è¶…è¿‡500pxçš„å†…å®¹å®½åº¦ */</span>
  <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span> auto;
}

<span class="hljs-comment">/* è¡¨æ ¼åˆ—è‡ªé€‚åº” */</span>
<span class="hljs-selector-tag">td</span> {
  <span class="hljs-attribute">width</span>: fit-content;
}
</code></pre>
<h2 data-id="heading-5">äºŒã€<strong>clamp() å‡½æ•°è¯¦è§£</strong></h2>
<h3 data-id="heading-6"><strong>è¯­æ³•</strong></h3>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-built_in">clamp</span>(min, preferred, max)
</code></pre>
<ul>
<li><strong>min</strong>ï¼šæœ€å°å€¼ï¼ˆä¸‹é™ï¼‰</li>
<li><strong>preferred</strong>ï¼šé¦–é€‰å€¼ï¼ˆé€šå¸¸ä½¿ç”¨ç›¸å¯¹å•ä½ï¼‰</li>
<li><strong>max</strong>ï¼šæœ€å¤§å€¼ï¼ˆä¸Šé™ï¼‰</li>
</ul>
<h3 data-id="heading-7"><strong>å·¥ä½œåŸç†</strong></h3>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* å®é™…å€¼ä¼šåœ¨è¿™ä¸ªèŒƒå›´å†…ï¼šmin â‰¤ preferred â‰¤ max */</span>
<span class="hljs-attribute">width</span>: <span class="hljs-built_in">clamp</span>(<span class="hljs-number">200px</span>, <span class="hljs-number">50%</span>, <span class="hljs-number">800px</span>);
<span class="hljs-comment">/* æ„æ€æ˜¯ï¼šå®½åº¦æœ€å°200pxï¼Œé¦–é€‰50%è§†å£å®½åº¦ï¼Œæœ€å¤§800px */</span>
</code></pre>
<h2 data-id="heading-8"><strong>å®é™…åº”ç”¨ç¤ºä¾‹</strong></h2>
<h3 data-id="heading-9"><strong>1. å“åº”å¼å­—ä½“å¤§å°</strong></h3>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* å­—ä½“åœ¨16px-24pxä¹‹é—´ï¼Œé¦–é€‰3vwï¼ˆè§†å£å®½åº¦çš„3%ï¼‰ */</span>
<span class="hljs-selector-class">.font-responsive</span> {
  <span class="hljs-attribute">font-size</span>: <span class="hljs-built_in">clamp</span>(<span class="hljs-number">16px</span>, <span class="hljs-number">3vw</span>, <span class="hljs-number">24px</span>);
}

<span class="hljs-comment">/* æ ‡é¢˜å“åº”å¼ */</span>
<span class="hljs-selector-tag">h1</span> {
  <span class="hljs-attribute">font-size</span>: <span class="hljs-built_in">clamp</span>(<span class="hljs-number">2rem</span>, <span class="hljs-number">5vw</span>, <span class="hljs-number">3.5rem</span>);
}
</code></pre>
<h3 data-id="heading-10"><strong>2. å“åº”å¼å®¹å™¨å®½åº¦</strong></h3>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.container</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-built_in">clamp</span>(<span class="hljs-number">300px</span>, <span class="hljs-number">80%</span>, <span class="hljs-number">1200px</span>);
  <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span> auto;
}

<span class="hljs-comment">/* å›¾ç‰‡è‡ªé€‚åº” */</span>
<span class="hljs-selector-tag">img</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-built_in">clamp</span>(<span class="hljs-number">150px</span>, <span class="hljs-number">50%</span>, <span class="hljs-number">600px</span>);
  <span class="hljs-attribute">height</span>: auto;
}
</code></pre>
<h2 data-id="heading-11">ä¸‰ã€<strong>æ¸å˜ä¸å›¾åƒå‡½æ•°</strong></h2>
<h3 data-id="heading-12">1.Â <strong>linear-gradient()</strong> Â - çº¿æ€§æ¸å˜</h3>
<p>css</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* åŸºæœ¬æ¸å˜ */</span>
<span class="hljs-selector-class">.gradient-1</span> {
  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">linear-gradient</span>(<span class="hljs-number">45deg</span>, red, blue);
}

<span class="hljs-comment">/* å¤šè‰²æ¸å˜ */</span>
<span class="hljs-selector-class">.gradient-2</span> {
  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">linear-gradient</span>(
    to right,
    red <span class="hljs-number">0%</span>,
    orange <span class="hljs-number">25%</span>,
    yellow <span class="hljs-number">50%</span>,
    green <span class="hljs-number">75%</span>,
    blue <span class="hljs-number">100%</span>
  );
}

<span class="hljs-comment">/* é€æ˜æ¸å˜ */</span>
<span class="hljs-selector-class">.gradient-3</span> {
  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">linear-gradient</span>(
    to bottom,
    transparent,
    <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0.5</span>)
  );
}
</code></pre>
<h3 data-id="heading-13">2.Â <strong>radial-gradient()</strong> Â - å¾„å‘æ¸å˜</h3>
<p>css</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* åœ†å½¢æ¸å˜ */</span>
<span class="hljs-selector-class">.radial-1</span> {
  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">radial-gradient</span>(circle, red, yellow, green);
}

<span class="hljs-comment">/* æ¤­åœ†æ¸å˜ */</span>
<span class="hljs-selector-class">.radial-2</span> {
  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">radial-gradient</span>(
    ellipse at center,
    red <span class="hljs-number">0%</span>,
    blue <span class="hljs-number">100%</span>
  );
}

<span class="hljs-comment">/* é‡å¤å¾„å‘æ¸å˜ */</span>
<span class="hljs-selector-class">.radial-3</span> {
  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">repeating-radial-gradient</span>(
    circle,
    red,
    red <span class="hljs-number">10px</span>,
    blue <span class="hljs-number">10px</span>,
    blue <span class="hljs-number">20px</span>
  );
}
</code></pre>
<h3 data-id="heading-14">3.Â <strong>conic-gradient()</strong> Â - é”¥å½¢æ¸å˜</h3>
<p>css</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* è‰²è½® */</span>
<span class="hljs-selector-class">.conic-1</span> {
  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">conic-gradient</span>(
    red, yellow, lime, aqua, blue, magenta, red
  );
}

<span class="hljs-comment">/* é¥¼å›¾æ•ˆæœ */</span>
<span class="hljs-selector-class">.pie-chart</span> {
  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">conic-gradient</span>(
    red <span class="hljs-number">0%</span> <span class="hljs-number">33%</span>,
    yellow <span class="hljs-number">33%</span> <span class="hljs-number">66%</span>,
    blue <span class="hljs-number">66%</span> <span class="hljs-number">100%</span>
  );
}
</code></pre>
<h3 data-id="heading-15">4.Â <strong>image-set()</strong> Â - å“åº”å¼å›¾åƒ</h3>
<p>css</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* æ ¹æ®åˆ†è¾¨ç‡åŠ è½½ä¸åŒå›¾ç‰‡ */</span>
<span class="hljs-selector-class">.responsive-bg</span> {
  <span class="hljs-attribute">background-image</span>: <span class="hljs-built_in">image-set</span>(
    <span class="hljs-string">"image-low.jpg"</span> <span class="hljs-number">1</span>x,
    <span class="hljs-string">"image-high.jpg"</span> <span class="hljs-number">2</span>x,
    <span class="hljs-string">"image-ultra.jpg"</span> <span class="hljs-number">3</span>x
  );
}

<span class="hljs-comment">/* æ ¼å¼æ”¯æŒ */</span>
<span class="hljs-selector-class">.optimized-bg</span> {
  <span class="hljs-attribute">background-image</span>: <span class="hljs-built_in">image-set</span>(
    <span class="hljs-string">"image.avif"</span> <span class="hljs-built_in">type</span>(<span class="hljs-string">"image/avif"</span>),
    <span class="hljs-string">"image.webp"</span> <span class="hljs-built_in">type</span>(<span class="hljs-string">"image/webp"</span>),
    <span class="hljs-string">"image.jpg"</span> <span class="hljs-built_in">type</span>(<span class="hljs-string">"image/jpeg"</span>)
  );
}
</code></pre>
<h2 data-id="heading-16">å››ã€<strong>å˜æ¢ä¸åŠ¨ç”»å‡½æ•°</strong></h2>
<h3 data-id="heading-17">1.Â <strong>translate() / translateX() / translateY()</strong></h3>
<p>css</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.element</span> {
  <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translate</span>(<span class="hljs-number">50px</span>, <span class="hljs-number">100px</span>);
  <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateX</span>(<span class="hljs-number">100px</span>);
  <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateY</span>(<span class="hljs-number">50%</span>);
}

<span class="hljs-comment">/* 3Då˜æ¢ */</span>
<span class="hljs-selector-class">.element-3d</span> {
  <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translate3d</span>(<span class="hljs-number">100px</span>, <span class="hljs-number">50px</span>, <span class="hljs-number">20px</span>);
}
</code></pre>
<h3 data-id="heading-18">2.Â <strong>scale() / scaleX() / scaleY()</strong></h3>
<p>css</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* ç¼©æ”¾ */</span>
<span class="hljs-selector-class">.element</span> {
  <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">scale</span>(<span class="hljs-number">1.5</span>);          <span class="hljs-comment">/* æ•´ä½“æ”¾å¤§1.5å€ */</span>
  <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">scale</span>(<span class="hljs-number">1.2</span>, <span class="hljs-number">0.8</span>);     <span class="hljs-comment">/* å®½æ”¾å¤§ï¼Œé«˜ç¼©å° */</span>
  <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">scaleX</span>(<span class="hljs-number">2</span>);           <span class="hljs-comment">/* æ°´å¹³æ”¾å¤§2å€ */</span>
}
</code></pre>
<h3 data-id="heading-19">3.Â <strong>rotate()</strong></h3>
<p>css</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* æ—‹è½¬ */</span>
<span class="hljs-selector-class">.element</span> {
  <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">rotate</span>(<span class="hljs-number">45deg</span>);      <span class="hljs-comment">/* 45åº¦æ—‹è½¬ */</span>
  <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">rotate</span>(<span class="hljs-number">1turn</span>);      <span class="hljs-comment">/* 360åº¦æ—‹è½¬ */</span>
  <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">rotate3d</span>(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">45deg</span>); <span class="hljs-comment">/* 3Dæ—‹è½¬ */</span>
}
</code></pre>
<h3 data-id="heading-20">4.Â <strong>matrix() / matrix3d()</strong></h3>
<p>css</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* çŸ©é˜µå˜æ¢ï¼ˆç»„åˆæ‰€æœ‰å˜æ¢ï¼‰ */</span>
<span class="hljs-selector-class">.complex-transform</span> {
  <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">matrix</span>(<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">100</span>, <span class="hljs-number">50</span>);
  <span class="hljs-comment">/* ç­‰åŒäºï¼štranslate(100px, 50px) */</span>
}
</code></pre>
<h3 data-id="heading-21">5.Â <strong>cubic-bezier()</strong> Â - è´å¡å°”æ›²çº¿</h3>
<p>css</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* è‡ªå®šä¹‰ç¼“åŠ¨å‡½æ•° */</span>
<span class="hljs-selector-class">.animation</span> {
  <span class="hljs-attribute">animation</span>: move <span class="hljs-number">2s</span> <span class="hljs-built_in">cubic-bezier</span>(<span class="hljs-number">0.68</span>, -<span class="hljs-number">0.55</span>, <span class="hljs-number">0.27</span>, <span class="hljs-number">1.55</span>);
  <span class="hljs-attribute">transition</span>: all <span class="hljs-number">0.3s</span> <span class="hljs-built_in">cubic-bezier</span>(<span class="hljs-number">0.4</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.2</span>, <span class="hljs-number">1</span>);
}

<span class="hljs-comment">/* é¢„è®¾æ›²çº¿ */</span>
<span class="hljs-selector-class">.ease-in-out</span> { <span class="hljs-attribute">transition-timing-function</span>: ease-in-out; }
<span class="hljs-selector-class">.custom-ease</span> { <span class="hljs-attribute">transition-timing-function</span>: <span class="hljs-built_in">cubic-bezier</span>(<span class="hljs-number">0.4</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.2</span>, <span class="hljs-number">1</span>); }
</code></pre>
<h3 data-id="heading-22">6.Â <strong>steps()</strong> Â - æ­¥è¿›åŠ¨ç”»</h3>
<p>css</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* é€å¸§åŠ¨ç”» */</span>
<span class="hljs-selector-class">.sprite-animation</span> {
  <span class="hljs-attribute">animation</span>: walk <span class="hljs-number">1s</span> <span class="hljs-built_in">steps</span>(<span class="hljs-number">8</span>) infinite;
}

<span class="hljs-comment">/* æ‰“å­—æœºæ•ˆæœ */</span>
<span class="hljs-selector-class">.typewriter</span> {
  <span class="hljs-attribute">animation</span>: typing <span class="hljs-number">3s</span> <span class="hljs-built_in">steps</span>(<span class="hljs-number">40</span>) forwards;
}
</code></pre>
<h2 data-id="heading-23">äº”ã€<strong>æ»¤é•œæ•ˆæœå‡½æ•°</strong></h2>
<h3 data-id="heading-24">1.Â <strong>blur()</strong> Â - æ¨¡ç³Š</h3>
<p>css</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.blur-effect</span> {
  <span class="hljs-attribute">filter</span>: <span class="hljs-built_in">blur</span>(<span class="hljs-number">5px</span>);
  backdrop-<span class="hljs-attribute">filter</span>: <span class="hljs-built_in">blur</span>(<span class="hljs-number">10px</span>); <span class="hljs-comment">/* èƒŒæ™¯æ¨¡ç³Š */</span>
}
</code></pre>
<h3 data-id="heading-25">2.Â <strong>brightness()</strong> Â - äº®åº¦</h3>
<p>css</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.image</span> {
  <span class="hljs-attribute">filter</span>: <span class="hljs-built_in">brightness</span>(<span class="hljs-number">150%</span>); <span class="hljs-comment">/* å˜äº® */</span>
  <span class="hljs-attribute">filter</span>: <span class="hljs-built_in">brightness</span>(<span class="hljs-number">50%</span>);  <span class="hljs-comment">/* å˜æš— */</span>
}
</code></pre>
<h3 data-id="heading-26">3.Â <strong>contrast()</strong> Â - å¯¹æ¯”åº¦</h3>
<p>css</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.photo</span> {
  <span class="hljs-attribute">filter</span>: <span class="hljs-built_in">contrast</span>(<span class="hljs-number">200%</span>); <span class="hljs-comment">/* å¢åŠ å¯¹æ¯”åº¦ */</span>
}
</code></pre>
<h3 data-id="heading-27">4.Â <strong>drop-shadow()</strong> Â - é˜´å½±</h3>
<p>css</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* æ¯” box-shadow æ›´ç¬¦åˆå…ƒç´ å½¢çŠ¶ */</span>
<span class="hljs-selector-class">.icon</span> {
  <span class="hljs-attribute">filter</span>: <span class="hljs-built_in">drop-shadow</span>(<span class="hljs-number">2px</span> <span class="hljs-number">2px</span> <span class="hljs-number">4px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0.5</span>));
}

<span class="hljs-comment">/* å¤šé‡é˜´å½± */</span>
<span class="hljs-selector-class">.text</span> {
  <span class="hljs-attribute">filter</span>: 
    <span class="hljs-built_in">drop-shadow</span>(<span class="hljs-number">1px</span> <span class="hljs-number">1px</span> <span class="hljs-number">0</span> white)
    <span class="hljs-built_in">drop-shadow</span>(-<span class="hljs-number">1px</span> -<span class="hljs-number">1px</span> <span class="hljs-number">0</span> white);
}
</code></pre>
<h3 data-id="heading-28">5.Â <strong>ç»„åˆæ»¤é•œ</strong></h3>
<p>css</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.instagram-filter</span> {
  <span class="hljs-attribute">filter</span>: 
    <span class="hljs-built_in">brightness</span>(<span class="hljs-number">1.2</span>)
    <span class="hljs-built_in">contrast</span>(<span class="hljs-number">1.1</span>)
    <span class="hljs-built_in">saturate</span>(<span class="hljs-number">1.3</span>)
    <span class="hljs-built_in">sepia</span>(<span class="hljs-number">0.1</span>);
}
</code></pre>
<h2 data-id="heading-29">å…­ã€<strong>å¸ƒå±€ä¸ç½‘æ ¼å‡½æ•°</strong></h2>
<h3 data-id="heading-30">1.Â <strong>minmax()</strong> Â - ç½‘æ ¼å°ºå¯¸èŒƒå›´</h3>
<p>css</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.grid-container</span> {
  <span class="hljs-attribute">display</span>: grid;
  <span class="hljs-attribute">grid-template-columns</span>: <span class="hljs-built_in">repeat</span>(auto-fit, <span class="hljs-built_in">minmax</span>(<span class="hljs-number">200px</span>, <span class="hljs-number">1</span>fr));
}

<span class="hljs-comment">/* å¤æ‚çš„ç½‘æ ¼å¸ƒå±€ */</span>
<span class="hljs-selector-class">.layout</span> {
  <span class="hljs-attribute">grid-template-columns</span>: 
    <span class="hljs-built_in">minmax</span>(<span class="hljs-number">200px</span>, <span class="hljs-number">300px</span>)
    <span class="hljs-built_in">minmax</span>(auto, <span class="hljs-number">1</span>fr)
    <span class="hljs-built_in">minmax</span>(<span class="hljs-number">150px</span>, <span class="hljs-number">200px</span>);
}
</code></pre>
<h3 data-id="heading-31">2.Â <strong>repeat()</strong> Â - é‡å¤æ¨¡å¼</h3>
<p>css</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.grid</span> {
  <span class="hljs-attribute">display</span>: grid;
  <span class="hljs-attribute">grid-template-columns</span>: <span class="hljs-built_in">repeat</span>(<span class="hljs-number">3</span>, <span class="hljs-number">1</span>fr); <span class="hljs-comment">/* é‡å¤3æ¬¡ */</span>
  <span class="hljs-attribute">grid-template-rows</span>: <span class="hljs-built_in">repeat</span>(auto-fill, <span class="hljs-built_in">minmax</span>(<span class="hljs-number">100px</span>, auto));
}

<span class="hljs-comment">/* å‘½åç½‘æ ¼çº¿ */</span>
<span class="hljs-selector-class">.complex-grid</span> {
  <span class="hljs-attribute">grid-template-columns</span>: 
    [sidebar-start] <span class="hljs-number">250px</span> [sidebar-end content-start] 
    <span class="hljs-built_in">repeat</span>(<span class="hljs-number">2</span>, [col] <span class="hljs-number">1</span>fr)
    [content-end];
}
</code></pre>
<h3 data-id="heading-32">3.Â <strong>fit-content()</strong> Â - ç½‘æ ¼å°ºå¯¸</h3>
<p>css</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.grid-item</span> {
  <span class="hljs-attribute">grid-column</span>: <span class="hljs-number">1</span> / <span class="hljs-built_in">fit-content</span>(<span class="hljs-number">500px</span>);
}
</code></pre>
<h2 data-id="heading-33">ä¸ƒã€<strong>å…¶ä»–å®ç”¨å‡½æ•°</strong></h2>
<h3 data-id="heading-34">1.Â <strong>var()</strong> Â - CSS å˜é‡</h3>
<p>css</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-pseudo">:root</span> {
  <span class="hljs-attr">--primary-color</span>: <span class="hljs-number">#3498db</span>;
  <span class="hljs-attr">--spacing</span>: <span class="hljs-number">1rem</span>;
  <span class="hljs-attr">--font-family</span>: <span class="hljs-string">'Roboto'</span>, sans-serif;
}

<span class="hljs-selector-class">.element</span> {
  <span class="hljs-attribute">color</span>: <span class="hljs-built_in">var</span>(--primary-color);
  <span class="hljs-attribute">padding</span>: <span class="hljs-built_in">var</span>(--spacing);
  <span class="hljs-attribute">font-family</span>: <span class="hljs-built_in">var</span>(--font-family);
  
  <span class="hljs-comment">/* é»˜è®¤å€¼ */</span>
  <span class="hljs-attribute">margin</span>: <span class="hljs-built_in">var</span>(--custom-margin, <span class="hljs-number">10px</span>);
}
</code></pre>
<h3 data-id="heading-35">2.Â <strong>attr()</strong> Â - å±æ€§å€¼</h3>
<p>css</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* æ˜¾ç¤º data-* å±æ€§å€¼ */</span>
<span class="hljs-selector-class">.tooltip</span><span class="hljs-selector-pseudo">::after</span> {
  <span class="hljs-attribute">content</span>: <span class="hljs-built_in">attr</span>(data-tooltip);
}

<span class="hljs-comment">/* é…åˆè®¡æ•°å™¨ */</span>
<span class="hljs-selector-class">.item</span><span class="hljs-selector-pseudo">::before</span> {
  <span class="hljs-attribute">content</span>: <span class="hljs-built_in">attr</span>(data-index);
}

<span class="hljs-comment">/* åŠ¨æ€æ ·å¼ */</span>
<span class="hljs-selector-class">.progress</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-built_in">attr</span>(data-progress percent);
}
</code></pre>
<h3 data-id="heading-36">3.Â <strong>counter() / counters()</strong> Â - è®¡æ•°å™¨</h3>
<p>css</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* è‡ªåŠ¨ç¼–å· */</span>
<span class="hljs-selector-tag">ol</span> {
  <span class="hljs-attribute">counter-reset</span>: section;
}

<span class="hljs-selector-tag">li</span><span class="hljs-selector-pseudo">::before</span> {
  <span class="hljs-attribute">counter-increment</span>: section;
  <span class="hljs-attribute">content</span>: <span class="hljs-built_in">counter</span>(section) <span class="hljs-string">". "</span>;
}

<span class="hljs-comment">/* åµŒå¥—è®¡æ•°å™¨ */</span>
<span class="hljs-selector-tag">ol</span> <span class="hljs-selector-tag">ol</span> {
  <span class="hljs-attribute">counter-reset</span>: subsection;
}

<span class="hljs-selector-tag">li</span> <span class="hljs-selector-tag">li</span><span class="hljs-selector-pseudo">::before</span> {
  <span class="hljs-attribute">counter-increment</span>: subsection;
  <span class="hljs-attribute">content</span>: <span class="hljs-built_in">counter</span>(section) <span class="hljs-string">"."</span> <span class="hljs-built_in">counter</span>(subsection) <span class="hljs-string">" "</span>;
}
</code></pre>
<h3 data-id="heading-37">4.Â <strong>url()</strong> Â - èµ„æºè·¯å¾„</h3>
<p>css</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* å›¾ç‰‡ */</span>
<span class="hljs-selector-class">.background</span> {
  <span class="hljs-attribute">background-image</span>: <span class="hljs-built_in">url</span>(<span class="hljs-string">"image.jpg"</span>);
  <span class="hljs-attribute">background-image</span>: <span class="hljs-built_in">url</span>(<span class="hljs-string">"data:image/svg+xml,..."</span>); <span class="hljs-comment">/* å†…è”SVG */</span>
}

<span class="hljs-comment">/* å­—ä½“ */</span>
<span class="hljs-keyword">@font-face</span> {
  <span class="hljs-attribute">font-family</span>: <span class="hljs-string">'CustomFont'</span>;
  <span class="hljs-attribute">src</span>: <span class="hljs-built_in">url</span>(<span class="hljs-string">'font.woff2'</span>) <span class="hljs-built_in">format</span>(<span class="hljs-string">'woff2'</span>);
}

<span class="hljs-comment">/* å…‰æ ‡ */</span>
<span class="hljs-selector-class">.custom-cursor</span> {
  <span class="hljs-attribute">cursor</span>: <span class="hljs-built_in">url</span>(<span class="hljs-string">'cursor.png'</span>), auto;
}
</code></pre>
<h3 data-id="heading-38">5.Â <strong>env()</strong> Â - ç¯å¢ƒå˜é‡</h3>
<p>css</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* å®‰å…¨åŒºåŸŸï¼ˆé€‚é…åˆ˜æµ·å±ï¼‰ */</span>
<span class="hljs-selector-class">.safe-area</span> {
  <span class="hljs-attribute">padding-top</span>: <span class="hljs-built_in">env</span>(safe-area-inset-top);
  <span class="hljs-attribute">padding-bottom</span>: <span class="hljs-built_in">env</span>(safe-area-inset-bottom);
  <span class="hljs-attribute">padding-left</span>: <span class="hljs-built_in">env</span>(safe-area-inset-left);
  <span class="hljs-attribute">padding-right</span>: <span class="hljs-built_in">env</span>(safe-area-inset-right);
}

<span class="hljs-comment">/* è§†å£å•ä½ */</span>
<span class="hljs-selector-class">.full-height</span> {
  <span class="hljs-attribute">height</span>: <span class="hljs-built_in">calc</span>(<span class="hljs-number">100vh</span> - <span class="hljs-built_in">env</span>(safe-area-inset-top) - <span class="hljs-built_in">env</span>(safe-area-inset-bottom));
}
</code></pre>
<h2 data-id="heading-39">å…«ã€<strong>å‡½æ•°ç»„åˆä½¿ç”¨ç¤ºä¾‹</strong></h2>
<h3 data-id="heading-40">å¤æ‚å“åº”å¼è®¾è®¡</h3>
<p>css</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-pseudo">:root</span> {
  <span class="hljs-attr">--min-width</span>: <span class="hljs-number">320px</span>;
  <span class="hljs-attr">--max-width</span>: <span class="hljs-number">1200px</span>;
  <span class="hljs-attr">--fluid-scale</span>: <span class="hljs-built_in">min</span>(<span class="hljs-built_in">max</span>(<span class="hljs-built_in">var</span>(--min-width), <span class="hljs-number">100vw</span>), <span class="hljs-built_in">var</span>(--max-width));
}

<span class="hljs-selector-class">.container</span> {
  <span class="hljs-comment">/* ç»„åˆå¤šä¸ªå‡½æ•° */</span>
  <span class="hljs-attribute">width</span>: <span class="hljs-built_in">clamp</span>(
    <span class="hljs-built_in">var</span>(--min-width),
    <span class="hljs-built_in">calc</span>(<span class="hljs-number">100vw</span> - <span class="hljs-number">2</span> * <span class="hljs-built_in">var</span>(--spacing)),
    <span class="hljs-built_in">var</span>(--max-width)
  );
  
  <span class="hljs-attribute">padding</span>: <span class="hljs-built_in">var</span>(--spacing);
  
  <span class="hljs-comment">/* å“åº”å¼å­—ä½“ */</span>
  <span class="hljs-attribute">font-size</span>: <span class="hljs-built_in">clamp</span>(
    <span class="hljs-number">1rem</span>,
    <span class="hljs-built_in">calc</span>(<span class="hljs-number">0.5rem</span> + <span class="hljs-number">1vw</span>),
    <span class="hljs-number">1.5rem</span>
  );
  
  <span class="hljs-comment">/* å“åº”å¼æ¸å˜èƒŒæ™¯ */</span>
  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">linear-gradient</span>(
    to bottom right,
    <span class="hljs-built_in">hsl</span>(<span class="hljs-built_in">calc</span>(<span class="hljs-number">220</span> + <span class="hljs-built_in">var</span>(--hue-adjust)) <span class="hljs-number">70%</span> <span class="hljs-number">50%</span> / <span class="hljs-number">0.9</span>),
    <span class="hljs-built_in">hsl</span>(<span class="hljs-built_in">calc</span>(<span class="hljs-number">280</span> + <span class="hljs-built_in">var</span>(--hue-adjust)) <span class="hljs-number">60%</span> <span class="hljs-number">40%</span> / <span class="hljs-number">0.8</span>)
  );
  
  <span class="hljs-comment">/* åŠ¨æ€é˜´å½± */</span>
  <span class="hljs-attribute">box-shadow</span>: 
    <span class="hljs-number">0</span> <span class="hljs-built_in">calc</span>(<span class="hljs-number">2px</span> + <span class="hljs-number">0.1vw</span>) <span class="hljs-built_in">calc</span>(<span class="hljs-number">4px</span> + <span class="hljs-number">0.2vw</span>) 
    <span class="hljs-built_in">color-mix</span>(in srgb, currentColor <span class="hljs-number">20%</span>, transparent);
}
</code></pre>
<h3 data-id="heading-41">ç°ä»£æŒ‰é’®ç»„ä»¶</h3>
<p>css</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.button</span> {
  <span class="hljs-comment">/* å°ºå¯¸å“åº”å¼ */</span>
  <span class="hljs-attribute">padding</span>: <span class="hljs-built_in">clamp</span>(<span class="hljs-number">0.5rem</span>, <span class="hljs-number">2vw</span>, <span class="hljs-number">1rem</span>) <span class="hljs-built_in">clamp</span>(<span class="hljs-number">1rem</span>, <span class="hljs-number">4vw</span>, <span class="hljs-number">2rem</span>);
  
  <span class="hljs-comment">/* é¢œè‰²åŠ¨æ€ */</span>
  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">color-mix</span>(
    in srgb, 
    <span class="hljs-built_in">var</span>(--primary-color) 
    <span class="hljs-built_in">calc</span>(<span class="hljs-built_in">var</span>(--hover, <span class="hljs-number">0</span>) * <span class="hljs-number">20%</span>), 
    black
  );
  
  <span class="hljs-comment">/* äº¤äº’æ•ˆæœ */</span>
  <span class="hljs-attribute">transition</span>: all <span class="hljs-number">0.3s</span> <span class="hljs-built_in">cubic-bezier</span>(<span class="hljs-number">0.4</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.2</span>, <span class="hljs-number">1</span>);
  
  <span class="hljs-comment">/* æ‚¬åœçŠ¶æ€ */</span>
  &amp;<span class="hljs-selector-pseudo">:hover</span> {
    <span class="hljs-attr">--hover</span>: <span class="hljs-number">1</span>;
    <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateY</span>(<span class="hljs-built_in">calc</span>(-<span class="hljs-number">1</span> * <span class="hljs-built_in">var</span>(--hover, <span class="hljs-number">0</span>) * <span class="hljs-number">2px</span>));
    <span class="hljs-attribute">filter</span>: <span class="hljs-built_in">brightness</span>(<span class="hljs-number">1.1</span>) <span class="hljs-built_in">drop-shadow</span>(<span class="hljs-number">0</span> <span class="hljs-number">4px</span> <span class="hljs-number">8px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0.2</span>));
  }
}
</code></pre>
<h2 data-id="heading-42">åã€<strong>æµè§ˆå™¨æ”¯æŒä¸å›é€€æ–¹æ¡ˆ</strong></h2>
<h3 data-id="heading-43">æ¸è¿›å¢å¼ºç­–ç•¥</h3>
<p>css</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* 1. åŸºç¡€æ ·å¼ */</span>
<span class="hljs-selector-class">.element</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">90%</span>;
  <span class="hljs-attribute">max-width</span>: <span class="hljs-number">800px</span>;
  <span class="hljs-attribute">min-width</span>: <span class="hljs-number">300px</span>;
}

<span class="hljs-comment">/* 2. ä½¿ç”¨ @supports æ£€æµ‹æ”¯æŒ */</span>
<span class="hljs-keyword">@supports</span> (<span class="hljs-attribute">width</span>: clamp(<span class="hljs-number">300px</span>, <span class="hljs-number">90%</span>, <span class="hljs-number">800px</span>)) {
  <span class="hljs-selector-class">.element</span> {
    <span class="hljs-attribute">width</span>: <span class="hljs-built_in">clamp</span>(<span class="hljs-number">300px</span>, <span class="hljs-number">90%</span>, <span class="hljs-number">800px</span>);
  }
}

<span class="hljs-comment">/* 3. ä½¿ç”¨ CSS å˜é‡æä¾›å›é€€ */</span>
<span class="hljs-selector-pseudo">:root</span> {
  <span class="hljs-attr">--fluid-width</span>: <span class="hljs-number">90%</span>;
}

<span class="hljs-keyword">@supports</span> (<span class="hljs-attribute">width</span>: clamp(<span class="hljs-number">300px</span>, var(--fluid-width), <span class="hljs-number">800px</span>)) {
  <span class="hljs-selector-class">.element</span> {
    <span class="hljs-attr">--fluid-width</span>: <span class="hljs-built_in">min</span>(<span class="hljs-built_in">max</span>(<span class="hljs-number">300px</span>, <span class="hljs-number">90%</span>), <span class="hljs-number">800px</span>);
    <span class="hljs-attribute">width</span>: <span class="hljs-built_in">var</span>(--fluid-width);
  }
}
</code></pre>
<h2 data-id="heading-44"><strong>æ€»ç»“å¯¹æ¯”è¡¨</strong></h2>















































<table><thead><tr><th>å‡½æ•°ç±»åˆ«</th><th>æ ¸å¿ƒå‡½æ•°</th><th>ä¸»è¦ç”¨é€”</th><th>å…¼å®¹æ€§</th></tr></thead><tbody><tr><td><strong>å°ºå¯¸è®¡ç®—</strong></td><td>clamp(), min(), max(), calc()</td><td>å“åº”å¼å°ºå¯¸</td><td>ä¼˜ç§€</td></tr><tr><td><strong>æ¸å˜èƒŒæ™¯</strong></td><td>linear-gradient(), radial-gradient()</td><td>èƒŒæ™¯æ•ˆæœ</td><td>ä¼˜ç§€</td></tr><tr><td><strong>å˜æ¢åŠ¨ç”»</strong></td><td>translate(), rotate(), cubic-bezier()</td><td>åŠ¨ç”»æ•ˆæœ</td><td>ä¼˜ç§€</td></tr><tr><td><strong>æ»¤é•œæ•ˆæœ</strong></td><td>blur(), drop-shadow()</td><td>è§†è§‰æ•ˆæœ</td><td>è‰¯å¥½</td></tr><tr><td><strong>ç½‘æ ¼å¸ƒå±€</strong></td><td>minmax(), repeat()</td><td>å¸ƒå±€ç³»ç»Ÿ</td><td>ä¼˜ç§€</td></tr><tr><td><strong>å˜é‡å‡½æ•°</strong></td><td>var(), attr(), counter()</td><td>åŠ¨æ€å†…å®¹</td><td>ä¼˜ç§€</td></tr></tbody></table>
<p>ç°ä»£ CSS å‡½æ•°å¤§å¤§å¢å¼ºäº†æ ·å¼è¡¨è¾¾èƒ½åŠ›ï¼Œå‡å°‘äº† JavaScript çš„ä¾èµ–ï¼Œæ˜¯æ„å»ºç°ä»£å“åº”å¼ Web åº”ç”¨çš„é‡è¦å·¥å…·ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Flutter PopScope:iOSå·¦æ»‘è¿”å›å¤±æ•ˆåˆ†æä¸æ–¹æ¡ˆæ¢è®¨]]></title>    <link>https://juejin.cn/post/7580259796667629614</link>    <guid>https://juejin.cn/post/7580259796667629614</guid>    <pubDate>2025-12-06T01:47:33.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7580259796667629614" data-draft-id="7580270531469017134" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Flutter PopScope:iOSå·¦æ»‘è¿”å›å¤±æ•ˆåˆ†æä¸æ–¹æ¡ˆæ¢è®¨"/> <meta itemprop="keywords" content="Flutter"/> <meta itemprop="datePublished" content="2025-12-06T01:47:33.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="stringwu"/> <meta itemprop="url" content="https://juejin.cn/user/4046654395135800"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Flutter PopScope:iOSå·¦æ»‘è¿”å›å¤±æ•ˆåˆ†æä¸æ–¹æ¡ˆæ¢è®¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4046654395135800/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    stringwu
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-06T01:47:33.000Z" title="Sat Dec 06 2025 01:47:33 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ¬æ–‡å‘å¸ƒäºå…¬ä¼—å·ï¼šç§»åŠ¨å¼€å‘é‚£äº›äº‹ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2F0wGrh7wZm3dHnz8OkDiedA" target="_blank" title="https://mp.weixin.qq.com/s/0wGrh7wZm3dHnz8OkDiedA" ref="nofollow noopener noreferrer">Flutter PopScope:iOSå·¦æ»‘è¿”å›å¤±æ•ˆåˆ†æä¸æ–¹æ¡ˆæ¢è®¨</a></p>
<h2 data-id="heading-0">1 èƒŒæ™¯</h2>
<p>åœ¨<code>Flutter</code> 3.10ç‰ˆæœ¬ä¸­ï¼Œ<code>WillPopScope</code>è¢«å¼ƒç”¨å¹¶æ›¿æ¢ä¸ºæ›´ç°ä»£åŒ–ã€åŠŸèƒ½æ›´å¼ºå¤§çš„<code>PopScope</code>ç»„ä»¶ã€‚<code>PopScope</code>ä¸»è¦ç”¨äºæ‹¦æˆªç”¨æˆ·å°è¯•é€€å‡ºå½“å‰è·¯ç”±çš„å„ç§æ“ä½œï¼ˆå¦‚<code>Android</code>çš„è¿”å›é”®ã€<code>AppBar</code>çš„è¿”å›ç®­å¤´ã€ä»¥åŠ<code>iOS</code>çš„å±å¹•è¾¹ç¼˜å·¦æ»‘æ‰‹åŠ¿ï¼‰ã€‚</p>
<p><code>PopScope</code>çš„æ ¸å¿ƒå±æ€§æœ‰ä¸¤ä¸ªï¼š</p>
<ul>
<li><code>canPop</code>ï¼šä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè®¾ç½®ä¸º <code>false</code> æ—¶ï¼Œä¼šé˜»æ­¢è·¯ç”±é€€å‡ºã€‚</li>
<li><code>onPopInvokedWithResult</code>ï¼šå½“å°è¯•é€€å‡ºè·¯ç”±æ—¶è§¦å‘çš„å›è°ƒï¼Œå¹¶è¿”å›æ˜¯å¦æˆåŠŸé€€å‡ºï¼ˆå³<code>didPop</code>ï¼‰ã€‚</li>
</ul>
<p>åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œç¬”è€…å‘ç°äº†ä¸€ä¸ªæ˜¾è‘—çš„å¹³å°å·®å¼‚ï¼š</p>
<ul>
<li><strong>Android/å…¶å®ƒå¹³å°ï¼š</strong> å½“æˆ‘è®¾ç½® <code>canPop = false</code> å¹¶å°è¯•ä½¿ç”¨è¿”å›é”®æˆ–è¿”å›ç®­å¤´æ—¶ï¼Œ<code>onPopInvokedWithResult</code> <strong>ä¼š</strong>è¢«è°ƒç”¨ã€‚</li>
<li><strong>iOSï¼š</strong> å½“æˆ‘è®¾ç½® <code>canPop = false</code> å¹¶å°è¯•ä½¿ç”¨<strong>å±å¹•è¾¹ç¼˜å·¦æ»‘æ‰‹åŠ¿ (Edge Swipe Gesture)</strong> æ—¶ï¼Œ<code>onPopInvokedWithResult</code> <strong>ä¸ä¼š</strong>è¢«è°ƒç”¨ï¼Œå¹¶ä¸”å·¦æ»‘æ‰‹åŠ¿ä¼šè¢«ç³»ç»Ÿå®Œå…¨å¿½ç•¥ï¼Œå¯¼è‡´åº”ç”¨çœ‹èµ·æ¥â€œå¡ä½â€äº†ï¼Œæ²¡æœ‰æä¾›ä»»ä½•ç”¨æˆ·åé¦ˆã€‚</li>
</ul>
<p>è¿™æ— ç–‘æ˜¯ä¸€ä¸ªä¸¥é‡çš„é—®é¢˜ï¼Œå®ƒå¯¼è‡´æˆ‘ä»¬åœ¨iOSä¸Šæ— æ³•é€šè¿‡<code>PopScope</code>æ¥æ•è·å·¦æ»‘æ‰‹åŠ¿å¹¶æ‰§è¡Œè‡ªå®šä¹‰é€»è¾‘ï¼ˆå¦‚å¼¹å‡ºâ€œæ˜¯å¦ä¿å­˜â€å¯¹è¯æ¡†ï¼‰ã€‚</p>
<p>ä¸€ä¸ªå…¸å‹çš„ä½¿ç”¨ç¤ºä¾‹ä¸ºï¼š</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">PopScope</span>(
    <span class="hljs-attribute">canPop</span>: false,
    <span class="hljs-attribute">onPopInvokedWithResult</span>: (value, _) {
    	<span class="hljs-comment">// åœ¨iOSå¹³å°è¿™é‡Œæ°¸è¿œä¸ä¼šè¢«å›è°ƒ</span>
        <span class="hljs-selector-tag">if</span> (!value) {
          <span class="hljs-comment">// do custom action here</span>
          }
          return;
     },
     <span class="hljs-attribute">child</span>: <span class="hljs-built_in">Container</span>())
</code></pre>
<h2 data-id="heading-1">2 å¤±æ•ˆåŸå› åˆ†æ</h2>
<h3 data-id="heading-2">2.1 PopScopeå¤±æ•ˆåŸå› </h3>
<p><code>PopScope</code>ç»„ä»¶æ˜¯é€šè¿‡ <strong><code>Platform Navigator</code></strong> ä¸åŸç”Ÿå¹³å°çš„è¿”å›äº‹ä»¶æœºåˆ¶è¿›è¡Œé€šä¿¡çš„, ä¸»è¦è´Ÿè´£ç›‘å¬å’Œé˜»æ­¢ <code>Navigator.pop()</code> è°ƒç”¨æˆ–ç³»ç»Ÿè§¦å‘çš„ è¿”å›æ“ä½œï¼ˆ<code>Android</code> è¿”å›é”®ï¼Œæˆ–è€… <code>iOS</code> çš„å·¦æ»‘è¿”å›ï¼‰ã€‚</p>
<p>ä½†<code>iOS</code> å·¦æ»‘æœ‰ç‰¹æ®Šæ€§ï¼š iOS çš„å·¦æ»‘æ‰‹åŠ¿ï¼ˆ<code>Interactive Pop Gesture</code>ï¼‰æ˜¯ç‹¬ç«‹äº <code>Flutter Navigator</code> è¿è¡Œçš„åŸç”Ÿæ‰‹åŠ¿ã€‚å½“è¿™ä¸ªæ‰‹åŠ¿è¢«å¯åŠ¨æ—¶ï¼Œå¦‚æœå®ƒå‘ç° <code>PopScope</code> è®¾ç½®äº† <code>canPop: false</code>ï¼Œå®ƒä¼šç®€å•åœ°å–æ¶ˆæ‰‹åŠ¿å¹¶åœæ­¢ï¼Œè€Œä¸ä¼šå‘ <code>Flutter çš„ Navigator</code> å‘é€ä¸€ä¸ªæ˜ç¡®çš„å¼¹å‡ºï¼ˆPopï¼‰è¯·æ±‚ã€‚</p>
<p>å› æ­¤ï¼Œ<code>onPopInvokedWithResult</code> å›è°ƒè‡ªç„¶ä¸ä¼šè¢«è§¦å‘ï¼Œå› ä¸ºå®ƒåªåœ¨ <code>Flutter</code> æ¥æ”¶åˆ° <code>Navigator.pop()</code> è°ƒç”¨æˆ–ç³»ç»Ÿè¿”å›é”®äº‹ä»¶æ—¶è§¦å‘ã€‚</p>
<ul>
<li><strong>Androidï¼š</strong> Androidçš„è¿”å›é”®äº‹ä»¶ï¼ˆ<code>Back Button Event</code>ï¼‰æ˜¯ä¸€ä¸ª<strong>æ˜ç¡®çš„ã€å¯æ‹¦æˆªçš„</strong>ç³»ç»Ÿäº‹ä»¶ï¼Œå®ƒä¼šç›´æ¥ä¼ é€’ç»™<code>Flutter</code>å¼•æ“ï¼Œå¼•æ“ç»§è€Œè§¦å‘<code>PopScope</code>çš„å›è°ƒã€‚</li>
<li><strong>iOS (å·¦æ»‘æ‰‹åŠ¿)ï¼š</strong> iOSçš„å·¦æ»‘è¿”å›æ‰‹åŠ¿ï¼ˆ<code>Interactive Pop Gesture</code>ï¼‰æ˜¯ç”±<code>UINavigationController</code>ç®¡ç†çš„ã€‚</li>
</ul>
<p>åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œå½“ä¸€ä¸ªFlutter Viewï¼ˆ<code>FlutterViewController</code>ï¼‰è¢«æ¨å…¥åˆ°åŸç”Ÿå¯¼èˆªæ ˆä¸­æ—¶ï¼š</p>
<ul>
<li>å¦‚æœè®¾ç½®äº† <code>canPop = false</code>ï¼ŒFlutterå¼•æ“ä¼šé€šçŸ¥åŸç”Ÿå±‚â€œå½“å‰è·¯ç”±ä¸å¯é€€å‡ºâ€ã€‚</li>
<li>åœ¨iOSä¸Šï¼Œè¿™ä¸ªé€šçŸ¥<strong>åªé˜»æ­¢</strong>äº†<strong>ç³»ç»Ÿå°è¯•è‡ªåŠ¨æ‰§è¡Œ Pop æ“ä½œ</strong>ï¼Œä½†<strong>æ²¡æœ‰</strong>å°†â€œç”¨æˆ·è¿›è¡Œäº†å·¦æ»‘æ‰‹åŠ¿â€è¿™ä¸€<strong>æ‰‹åŠ¿è¾“å…¥äº‹ä»¶</strong>è½¬åŒ–ä¸ºä¸€ä¸ªé€šç”¨çš„â€œPop å°è¯•â€äº‹ä»¶å¹¶ä¼ ç»™<code>PopScope</code>ã€‚ç›¸åï¼Œç³»ç»Ÿåªæ˜¯ç®€å•åœ°<strong>ç¦ç”¨äº†</strong>è¿™ä¸ªæ‰‹åŠ¿çš„é»˜è®¤è¡Œä¸ºï¼Œå¹¶æœªå‘ä¸Šå±‚æŠ¥å‘Šä»»ä½•äº‹ä»¶ã€‚</li>
</ul>
<p>ç®€è€Œè¨€ä¹‹ï¼Œ<strong>Androidä¼ é€’çš„æ˜¯ä¸€ä¸ªâ€œæ„å›¾â€</strong>ï¼ˆè¿”å›é”®è¢«æŒ‰ä¸‹ï¼‰ï¼Œè€Œ<strong>iOSä¼ é€’çš„æ˜¯ä¸€ä¸ªâ€œæ‰‹åŠ¿â€ï¼Œä¸”å½“æ‰‹åŠ¿è¢«ç¦ç”¨æ—¶ï¼Œè¿™ä¸ªâ€œæ„å›¾â€å°±ä»æœªäº§ç”Ÿã€‚</strong></p>
<h3 data-id="heading-3">2.2 æºç åˆ†æ</h3>
<p>é€šè¿‡åˆ†æ<code>Flutter</code>æºç ï¼Œæˆ‘ä»¬å‘ç°é—®é¢˜çš„æ ¸å¿ƒåœ¨äº <code>ModalRoute</code> çš„ <code>popGestureEnabled</code> å±æ€§åˆ¤æ–­é€»è¾‘ã€‚å½“ <code>PopScope.canPop</code> è®¾ç½®ä¸º<code>false</code> æ—¶ï¼Œè·¯ç”±çš„<code>popDisposition </code>ä¼šè¢«è®¾ç½®ä¸º <code>RoutePopDisposition.doNotPop</code> ï¼Œè¿™ä¼šå¯¼è‡´ <code>popGestureEnabled</code> å˜ä¸º <code>false </code>ï¼Œä»è€Œç¦ç”¨iOSçš„ä¾§æ»‘æ‰‹åŠ¿è¯†åˆ«ã€‚</p>
<p>å…·ä½“æ¥è¯´ï¼Œåœ¨ <code>CupertinoBackGestureDetector</code> ä¸­ï¼Œæœ‰ä¸€ä¸ª <code>enabledCallback</code> å›è°ƒç”¨äºæ§åˆ¶æ‰‹åŠ¿æ£€æµ‹å™¨çš„å¯ç”¨çŠ¶æ€ã€‚å½“ <code>enabledCallback</code> è¿”å› <code>false </code>æ—¶ï¼Œæ‰‹åŠ¿æ£€æµ‹å™¨ä¸ä¼šè®°å½•è§¦æ‘¸èµ·ç‚¹ï¼Œåç»­çš„ä¸€ç³»åˆ—æ‰‹åŠ¿ç›‘å¬æ–¹æ³•éƒ½ä¸ä¼šè¢«è§¦å‘ã€‚</p>
<h2 data-id="heading-4">3 å¦‚ä½•è§£å†³ï¼Ÿ</h2>
<p>è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬ä¸èƒ½ç­‰å¾…Flutterå¼•æ“å»æ•è·ä¸€ä¸ªå®ƒæ ¹æœ¬æ²¡æ”¶åˆ°çš„äº‹ä»¶ã€‚æˆ‘ä»¬å¿…é¡»åœ¨<strong>åŸç”ŸiOSå±‚</strong>å·¥ä½œï¼Œ<strong>ä¸»åŠ¨æ‹¦æˆª</strong>è¿™ä¸ªå·¦æ»‘æ‰‹åŠ¿ï¼Œå¹¶åœ¨æ‹¦æˆªæˆåŠŸåï¼Œ<strong>æ‰‹åŠ¨åœ°</strong>å°†å…¶ä½œä¸ºä¸€ä¸ªäº‹ä»¶å‘é€ç»™Flutterã€‚</p>
<p>æˆ‘ä»¬çš„ç›®æ ‡æ˜¯ï¼šå½“ç”¨æˆ·åœ¨å±å¹•è¾¹ç¼˜å·¦æ»‘æ—¶ï¼Œå³ä½¿<code>canPop</code>ä¸º<code>false</code>ï¼Œä¹Ÿè¦è§¦å‘<code>onPopInvokedWithResult</code>ã€‚è¿™é‡Œé‡‡ç”¨äº†åœ¨åŸç”Ÿå±‚é¢æ‹¦æˆªå·¦æ»‘çš„æ‰‹åŠ¿ï¼Œå¹¶ä¼ é€’ç»™<code>Flutter</code>å±‚çš„æ–¹æ¡ˆã€‚</p>
<p>è¿™é‡Œåœ¨åŸç”Ÿçš„æ ¸å¿ƒä»£ç ä¸ºï¼š</p>
<pre><code class="hljs language-swift" lang="swift">  <span class="hljs-comment">/// å¦‚æœéœ€è¦ï¼Œè®¾ç½®å·¦æ»‘è¿”å›æ‰‹åŠ¿æ‹¦æˆª(åœ¨è¿™ä¸ªpluginåˆå§‹åŒ–æ—¶è°ƒç”¨)</span>
  <span class="hljs-comment">///</span>
  <span class="hljs-comment">/// è¯¥æ–¹æ³•ä¼šæ£€æŸ¥ rootViewController çš„ç±»å‹ï¼š</span>
  <span class="hljs-comment">/// - å¦‚æœæ˜¯ UINavigationControllerï¼Œç›´æ¥ä½¿ç”¨</span>
  <span class="hljs-comment">/// - å¦‚æœæ˜¯ FlutterViewControllerï¼Œä¼šåˆ›å»ºæˆ–ä½¿ç”¨ç°æœ‰çš„ NavigationController</span>
  <span class="hljs-keyword">private</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">setupInteractivePopGestureIfNeeded</span>() {
  <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> window <span class="hljs-operator">=</span> <span class="hljs-type">UIApplication</span>.shared.windows.first,
         <span class="hljs-keyword">let</span> rootViewController <span class="hljs-operator">=</span> window.rootViewController <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">return</span>
            }

        <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> navController <span class="hljs-operator">=</span> rootViewController <span class="hljs-keyword">as?</span> <span class="hljs-type">UINavigationController</span> {
                <span class="hljs-comment">// ç›´æ¥ä½¿ç”¨ç°æœ‰çš„ NavigationController</span>
                <span class="hljs-keyword">self</span>.navigationController <span class="hljs-operator">=</span> navController
         } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> flutterVC <span class="hljs-operator">=</span> rootViewController <span class="hljs-keyword">as?</span> <span class="hljs-type">FlutterViewController</span> {
                <span class="hljs-comment">// å¦‚æœ FlutterViewController å·²ç»æœ‰ navigationControllerï¼Œç›´æ¥ä½¿ç”¨</span>
                <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> existingNavController <span class="hljs-operator">=</span> flutterVC.navigationController {
                    <span class="hljs-keyword">self</span>.navigationController <span class="hljs-operator">=</span> existingNavController
                } <span class="hljs-keyword">else</span> {
                    <span class="hljs-comment">// å¦åˆ™åˆ›å»ºæ–°çš„ NavigationController å¹¶å°è£… FlutterViewController</span>
                    <span class="hljs-comment">// å…ˆå°† window.rootViewController è®¾ç½®ä¸º nilï¼Œé¿å…è§†å›¾å±‚æ¬¡å†²çª</span>
                    window.rootViewController <span class="hljs-operator">=</span> <span class="hljs-literal">nil</span>
                    <span class="hljs-keyword">let</span> newNavController <span class="hljs-operator">=</span> <span class="hljs-type">UINavigationController</span>(rootViewController: flutterVC)
                    <span class="hljs-keyword">self</span>.navigationController <span class="hljs-operator">=</span> newNavController
                    <span class="hljs-comment">// å†è®¾ç½®æ–°çš„ NavigationController ä¸º rootViewController</span>
                    window.rootViewController <span class="hljs-operator">=</span> newNavController
                }
         }
    setupInteractivePopGesture()
  }


  <span class="hljs-comment">/// è®¾ç½®å·¦æ»‘è¿”å›æ‰‹åŠ¿çš„æ‹¦æˆª</span>
  <span class="hljs-comment">///</span>
  <span class="hljs-comment">/// ä¿å­˜åŸå§‹çš„æ‰‹åŠ¿è¯†åˆ«å™¨ä»£ç†ï¼Œç„¶åå°†è‡ªå·±è®¾ç½®ä¸ºæ–°çš„ä»£ç†ï¼Œä»¥ä¾¿æ‹¦æˆªæ‰‹åŠ¿äº‹ä»¶</span>
  <span class="hljs-keyword">private</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">setupInteractivePopGesture</span>() {
    <span class="hljs-comment">// ä¿å­˜åŸå§‹çš„ä»£ç†</span>
    <span class="hljs-keyword">self</span>.originalDelegate <span class="hljs-operator">=</span> <span class="hljs-keyword">self</span>.navigationController<span class="hljs-operator">?</span>.interactivePopGestureRecognizer<span class="hljs-operator">?</span>.delegate
    
    <span class="hljs-comment">// è®¾ç½®è‡ªå·±ä¸ºä»£ç†</span>
    <span class="hljs-keyword">self</span>.navigationController<span class="hljs-operator">?</span>.interactivePopGestureRecognizer<span class="hljs-operator">?</span>.delegate <span class="hljs-operator">=</span> <span class="hljs-keyword">self</span>
  }

    <span class="hljs-comment">/// æ§åˆ¶æ‰‹åŠ¿è¯†åˆ«å™¨æ˜¯å¦åº”è¯¥å¼€å§‹è¯†åˆ«æ‰‹åŠ¿</span>
  <span class="hljs-comment">///</span>
  <span class="hljs-comment">/// å½“æ£€æµ‹åˆ°å·¦æ»‘è¿”å›æ‰‹åŠ¿æ—¶ï¼Œä¼šé€šçŸ¥ Flutter å±‚å¤„ç†ï¼Œå¹¶è¿”å› false é˜»æ­¢ç³»ç»Ÿé»˜è®¤è¡Œä¸º</span>
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">gestureRecognizerShouldBegin</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">gestureRecognizer</span>: <span class="hljs-type">UIGestureRecognizer</span>) -&gt; <span class="hljs-type">Bool</span> {
    <span class="hljs-comment">// æ£€æµ‹åˆ°ç³»ç»Ÿå·¦æ»‘æ‰‹åŠ¿ï¼Œå‘é€äº‹ä»¶ç»™ Flutter  å…³é”®ç‚¹ï¼šå½“å‘ç°æ˜¯å¯¹åº”äº‹ä»¶æ—¶ï¼Œå‘é€ç»™Flutterå±‚</span>
    <span class="hljs-keyword">if</span> gestureRecognizer <span class="hljs-operator">==</span> <span class="hljs-keyword">self</span>.navigationController<span class="hljs-operator">?</span>.interactivePopGestureRecognizer {
      channel<span class="hljs-operator">?</span>.invokeMethod(<span class="hljs-string">"onSystemBackGesture"</span>, arguments: <span class="hljs-literal">nil</span>)
      <span class="hljs-comment">// è¿”å› false é˜»æ­¢ç³»ç»Ÿé»˜è®¤çš„è¿”å›è¡Œä¸ºï¼Œç”± Flutter å±‚å¤„ç†</span>
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
    }
    
    <span class="hljs-comment">// å…¶ä»–æ‰‹åŠ¿äº¤ç”±åŸæ¥çš„ä»£ç†å¤„ç†</span>
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> originalDelegate <span class="hljs-operator">=</span> <span class="hljs-keyword">self</span>.originalDelegate {
      <span class="hljs-keyword">return</span> originalDelegate.gestureRecognizerShouldBegin<span class="hljs-operator">?</span>(gestureRecognizer) <span class="hljs-operator">??</span> <span class="hljs-literal">true</span>
    }
    
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
  }
</code></pre>
<p>è€Œåœ¨<code>Flutter</code>å±‚ï¼Œåˆ™ç›‘å¬å¯¹åº”çš„æ–¹æ³•å›è°ƒå°±å¯ä»¥ï¼š</p>
<pre><code class="hljs language-dart" lang="dart">  <span class="hljs-comment">/// <span class="markdown">å¤„ç†æ¥è‡ªåŸç”Ÿç«¯çš„æ–¹æ³•è°ƒç”¨</span></span>
  Future&lt;<span class="hljs-built_in">dynamic</span>&gt; _handleMethodCall(MethodCall call) <span class="hljs-keyword">async</span> {
    <span class="hljs-keyword">switch</span> (call.method) {
      <span class="hljs-keyword">case</span> <span class="hljs-string">'onSystemBackGesture'</span>:
        <span class="hljs-comment">// å½“æ¥æ”¶åˆ°ç³»ç»Ÿè¿”å›æ‰‹åŠ¿æ—¶</span>
        debugPrint(<span class="hljs-string">'PopscopeIos: onSystemBackGesture pop'</span>);
        <span class="hljs-comment">// 1. å¦‚æœè®¾ç½®äº†è‡ªåŠ¨å¤„ç†å¯¼èˆªï¼Œå°è¯•è°ƒç”¨ maybePop()</span>
        <span class="hljs-keyword">if</span> (_autoHandleNavigation) {
          <span class="hljs-keyword">final</span> navigator = _navigatorKey?.currentState;
          <span class="hljs-keyword">if</span> (navigator != <span class="hljs-keyword">null</span>) {
          	<span class="hljs-comment">// å…³é”®ç‚¹2ï¼š è¿™é‡Œå…¶å®å°±æ˜¯è°ƒç”¨å¯¼èˆªçš„api: Navigator.maybePop(context);</span>
            <span class="hljs-keyword">await</span> navigator.maybePop();
          } <span class="hljs-keyword">else</span> {
            debugPrint(<span class="hljs-string">'PopscopeIos: NavigatorState is null, cannot pop'</span>);
          }
        }
        
        <span class="hljs-comment">// 2. è°ƒç”¨ç”¨æˆ·è‡ªå®šä¹‰å›è°ƒï¼ˆæ— è®ºæ˜¯å¦è‡ªåŠ¨å¤„ç†ï¼‰</span>
        _onSystemBackGesture?.call();
        <span class="hljs-keyword">break</span>;
      <span class="hljs-keyword">default</span>:
        <span class="hljs-keyword">throw</span> MissingPluginException(<span class="hljs-string">'æœªå®ç°çš„æ–¹æ³•: <span class="hljs-subst">${call.method}</span>'</span>);
    }
  }
</code></pre>
<p>å½“è°ƒç”¨äº†<code>Navigator.maybePop(context)</code>çš„æ–¹æ³•åï¼Œä¸ç®¡ä½ <code>PopScope</code>é‡Œçš„<code>canPop</code>çš„å€¼è®¾ç½®ä¸ºä»€ä¹ˆï¼Œå¯¹åº”çš„å›è°ƒæ–¹æ³•<code>onPopInvokedWithResult</code>éƒ½ä¼šè¢«è°ƒç”¨äº†ï¼›</p>
<p>è¿™ä¸ªåº“å¯¹åº”çš„ä»£ç æ”¾åœ¨github:<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FWoodJim%2Fpopscope_ios" target="_blank" title="https://github.com/WoodJim/popscope_ios" ref="nofollow noopener noreferrer">github.com/WoodJim/popâ€¦</a></p>
<h2 data-id="heading-5">4 æ€»ç»“</h2>
<p>é€šè¿‡åœ¨åŸç”ŸiOSå±‚é¢ä¸Šä»‹å…¥ï¼Œæˆ‘ä»¬æˆåŠŸåœ°å°†iOSçš„<strong>å·¦æ»‘æ‰‹åŠ¿äº‹ä»¶</strong>æ‰‹åŠ¨è½¬åŒ–ä¸ºä¸€ä¸ª<strong>Flutterå¯è¯†åˆ«çš„ Pop äº‹ä»¶</strong>ï¼Œä»è€Œå¼¥è¡¥äº†åŸç”Ÿå’Œæ¡†æ¶ä¹‹é—´çš„å·®å¼‚ã€‚</p>
<p>ç°åœ¨ï¼Œæ— è®ºæ˜¯Androidçš„è¿”å›é”®è¿˜æ˜¯iOSçš„å·¦æ»‘æ‰‹åŠ¿ï¼Œå½“<code>PopScope</code>çš„<code>canPop</code>è®¾ç½®ä¸º<code>false</code>æ—¶ï¼Œ<code>onPopInvokedWithResult</code>å›è°ƒéƒ½èƒ½<strong>å¯é åœ°</strong>è¢«è§¦å‘ï¼Œç¡®ä¿äº†è·¨å¹³å°ä¸€è‡´çš„ç”¨æˆ·ä½“éªŒï¼Œè®©å¼€å‘è€…èƒ½å¤ŸçœŸæ­£æ— å¿§åœ°å¤„ç†è·¯ç”±æ‹¦æˆªé€»è¾‘ã€‚</p>
<p>ä½†è¿™ä¸ªæ–¹æ¡ˆæœ‰ä¸ªè‡´å‘½çš„ç¼ºç‚¹ï¼š<strong>åªèƒ½ä¿è¯æœ‰å›è°ƒï¼Œæ— æ³•åšåˆ°è·Ÿæ‰‹çš„å·¦æ»‘æ•ˆæœ</strong>ï¼Œå¦‚æœæƒ³åšåˆ°å¾ˆä¸æ»‘çš„è·Ÿæ‰‹çš„å¤„ç†ï¼Œè¿˜æ˜¯éœ€è¦å»ç ”ç©¶<code>CupertinoPageTransitionsBuilder</code> ç›¸å…³çš„ä»£ç æ¥çœ‹å¦‚ä½•å®ç°ï¼Œä½†å½“é¡¹ç›®ä½¿ç”¨<code>GetX</code>æ¥åšè·¯ç”±æ—¶ï¼Œå¥½åƒä¸ç®¡æ€æ ·è®¾ç½®è¿™ä¸ª<code>CupertinoPageTransitionsBuilder</code>éƒ½æ— æ³•ç”Ÿæ•ˆã€‚</p>
<p>å¦‚æœå¤§å®¶æœ‰å…¶ä»–æ›´å¥½çš„æ–¹æ¡ˆçš„è¯ï¼Œæ¬¢è¿ä¸€èµ·æ¢è®¨ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é›¶ç¡¬ä»¶äº¤äº’ï¼šå¦‚ä½•ç”¨çº¯å‰ç«¯æŠŠæ‘„åƒå¤´å˜æˆ 4000 ä¸ªç²’å­çš„é­”æ³•æ£’ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7580208715275550762</link>    <guid>https://juejin.cn/post/7580208715275550762</guid>    <pubDate>2025-12-06T02:58:40.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7580208715275550762" data-draft-id="7580208715275534378" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é›¶ç¡¬ä»¶äº¤äº’ï¼šå¦‚ä½•ç”¨çº¯å‰ç«¯æŠŠæ‘„åƒå¤´å˜æˆ 4000 ä¸ªç²’å­çš„é­”æ³•æ£’ï¼Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯,ç®—æ³•"/> <meta itemprop="datePublished" content="2025-12-06T02:58:40.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å…”å­é›¶1024"/> <meta itemprop="url" content="https://juejin.cn/user/3743194047592062"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é›¶ç¡¬ä»¶äº¤äº’ï¼šå¦‚ä½•ç”¨çº¯å‰ç«¯æŠŠæ‘„åƒå¤´å˜æˆ 4000 ä¸ªç²’å­çš„é­”æ³•æ£’ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3743194047592062/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å…”å­é›¶1024
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-06T02:58:40.000Z" title="Sat Dec 06 2025 02:58:40 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    7
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{line-height:1.75;font-family:-apple-system-font,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei UI,Microsoft YaHei,Arial,sans-serif;letter-spacing:2px;background-image:linear-gradient(90deg,rgba(50,0,0,.05) 3%,transparent 0),linear-gradient(1turn,rgba(50,0,0,.05) 3%,transparent 0);background-size:20px 20px;background-position:50%;word-break:break-word;font-weight:400;font-size:15px;overflow-x:hidden;color:#333}.markdown-body h1{font-size:23px;margin-bottom:5px;font-weight:700;padding-left:10px;border-left:5px solid #773098}.markdown-body h2{font-size:19px;font-weight:700;padding-left:10px;border-left:5px solid #916dd5}.markdown-body h3{font-size:17px;font-weight:700;padding-left:10px;border-left:5px solid #d89cf6}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{font-size:14px;margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{display:block;max-width:100%;margin:1em 0;border-radius:6px;box-shadow:2px 4px 7px #999;user-select:none}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{padding:.2em .5em;font-weight:700;font-family:-apple-system-font,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei UI,Microsoft YaHei,Arial,sans-serif;font-size:1em;color:#916dd5;word-break:break-word;overflow-x:auto;background-color:none;border-radius:2px}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;font-family:-apple-system-font,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei UI,Microsoft YaHei,Arial,sans-serif;font-weight:400;font-size:.9em;padding:16px 12px;margin:0;color:#333;word-break:normal;overflow-x:auto;background:#f8f8f8;scroll-behavior:smooth}.markdown-body a{text-decoration:none;color:#916dd5;font-weight:700;border-bottom:1px solid #916dd5}.markdown-body a:active,.markdown-body a:hover{color:#773098}.markdown-body table{display:inline-block!important;font-size:14px;width:auto;max-width:100%;overflow:auto;border:1px solid #916dd5;border-collapse:collapse}.markdown-body thead{background-color:#916dd5;color:#fff;text-align:left}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px;border:1px solid #916dd5}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #d89cf6;background-color:#f4eeff}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0;line-height:26px}.markdown-body ol,.markdown-body ul{padding-left:28px;list-style-type:circle}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body b,.markdown-body strong{color:#916dd5;font-weight:700}.markdown-body b:before,.markdown-body strong:before{content:"ã€Œ"}.markdown-body b:after,.markdown-body strong:after{content:"ã€"}.markdown-body em,.markdown-body i{color:#916dd5}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="github-gist">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#fff;color:#333}.hljs-comment,.hljs-meta{color:#969896}.hljs-emphasis,.hljs-quote,.hljs-strong,.hljs-template-variable,.hljs-variable{color:#df5000}.hljs-keyword,.hljs-selector-tag,.hljs-type{color:#d73a49}.hljs-attribute,.hljs-bullet,.hljs-literal,.hljs-symbol{color:#0086b3}.hljs-name,.hljs-section{color:#63a35c}.hljs-tag{color:#333}.hljs-attr,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-id,.hljs-selector-pseudo,.hljs-title{color:#6f42c1}.hljs-addition{color:#55a532;background-color:#eaffea}.hljs-deletion{color:#bd2c00;background-color:#ffecec}.hljs-link{text-decoration:underline}.hljs-number{color:#005cc5}.hljs-string{color:#032f62}</style><p>å…³é”®è¯ï¼šVue 3 / Three.js / MediaPipe / AI / WebGL / åˆ›æ„ç¼–ç¨‹ / å‰ç«¯å·¥ç¨‹åŒ–</p>
<h2 data-id="heading-0">å¼•è¨€ï¼šå½“å“ˆåˆ©æ³¢ç‰¹çš„é­”æ³•æ£’å˜æˆäº†ä¸€è¡Œ URL</h2>
<p>æƒ³è±¡è¿™æ ·ä¸€ä¸ªåœºæ™¯ï¼š</p>
<p>ä½ ä¸éœ€è¦è´­ä¹°æ˜‚è´µçš„ Apple Vision Proï¼Œä¹Ÿä¸éœ€è¦æˆ´ä¸Šç¬¨é‡çš„ VR å¤´ç›”ï¼Œç”šè‡³ä¸éœ€è¦å®‰è£…ä»»ä½• Appã€‚
ä½ åªéœ€è¦æ‰“å¼€ä¸€ä¸ªç½‘é¡µï¼Œå…è®¸æ‘„åƒå¤´æƒé™ï¼Œå¯¹ç€å±å¹•ä¼¸å‡ºæ‰‹ã€‚</p>
<p><strong>æ¡æ‹³ï¼Œå±å¹•ä¸Š 4000 ä¸ªåŸæœ¬æ¼‚æµ®çš„ç²’å­ç¬é—´å‘ä¸­å¿ƒåç¼©ï¼Œèšé›†æˆä¸€ä¸ªç´§å¯†çš„èƒ½é‡çƒï¼›</strong>
<strong>å¼ æ‰‹ï¼Œè¿™äº›ç²’å­ä»¿ä½›å—åˆ°å†²å‡»ï¼Œç¬é—´å‘å››å‘¨ç‚¸è£‚ï¼Œå¦‚åŒçƒŸèŠ±èˆ¬ç»šçƒ‚ï¼›</strong>
<strong>æŒ¥åŠ¨ï¼Œç²’å­æµéšç€ä½ çš„æŒ‡å°–èµ·èˆï¼Œä»åœ°çƒå˜æˆçˆ±å¿ƒï¼Œä»çˆ±å¿ƒå˜æˆåœŸæ˜Ÿã€‚</strong></p>
<p>è¿™å°±æ˜¯æˆ‘æœ€è¿‘åšçš„ä¸€ä¸ªå¼€æºå°é¡¹ç›® â€”â€” <strong>Hand Controlled 3D Particles</strong>ã€‚</p>
<p>åœ¨è¿‡å»ï¼Œè¿™ç§çº§åˆ«çš„ä½“æ„Ÿäº¤äº’å¾€å¾€æ„å‘³ç€ï¼šä¸“ä¸šçš„æ·±åº¦æ‘„åƒå¤´ï¼ˆKinectï¼‰ã€é«˜æ€§èƒ½çš„æœ¬åœ°æ˜¾å¡ã€ä»¥åŠå¤æ‚çš„ C++/Unity å¼€å‘ç¯å¢ƒã€‚
ä½†ç°åœ¨ï¼Œ<strong>å¾—ç›Šäº Web AI å’Œ WebGL çš„è¿›åŒ–ï¼Œæˆ‘ä»¬ç”¨çº¯å‰ç«¯æŠ€æœ¯å°±èƒ½å¤åˆ»è¿™ç§é­”æ³•ã€‚</strong></p>
<h2 data-id="heading-1">ä¸€ã€æ•ˆæœï¼šæŒ‡å°–ä¸Šçš„ç²’å­å®‡å®™</h2>
<p>åœ¨è¿™ä¸ªé¡¹ç›®é‡Œï¼Œä½ çš„æ‰‹å°±æ˜¯æ§åˆ¶ä¸€åˆ‡çš„é¥æ§å™¨ã€‚</p>
<h3 data-id="heading-2">1. å®æ—¶æ‰‹åŠ¿è¯†åˆ«</h3>
<p>åŸºäº Google MediaPipe Hands æ¨¡å‹ï¼Œæµè§ˆå™¨èƒ½ä»¥æƒŠäººçš„é€Ÿåº¦ï¼ˆ60fps+ï¼‰æ•æ‰ä½ æ‰‹éƒ¨çš„ 21 ä¸ªå…³é”®ç‚¹ã€‚
è¿™ä¸æ˜¯ç®€å•çš„"åŠ¨é‡æ£€æµ‹"ï¼Œè€Œæ˜¯çœŸæ­£çš„"éª¨éª¼è¯†åˆ«"ï¼š</p>
<ul>
<li><strong>æ‹‡æŒ‡ä¸é£ŸæŒ‡æåˆ/é è¿‘</strong> â†’ è§¦å‘å¼•åŠ›åœº</li>
<li><strong>æ‰‹æŒå®Œå…¨å¼ å¼€</strong> â†’ è§¦å‘æ–¥åŠ›åœº</li>
<li><strong>å·¦å³æ‰‹åŠ¿åˆ‡æ¢</strong> â†’ åˆ‡æ¢ 3D æ¨¡å‹å½¢æ€</li>
</ul>
<h3 data-id="heading-3">2. è§†è§‰å½¢æ€æ¼”å˜</h3>
<p>ç²’å­ä¸ä»…ä»…æ˜¯æ•£ä¹±çš„ç‚¹ï¼Œå®ƒä»¬æŒ‰ç…§æ•°å­¦å…¬å¼æ’åˆ—æˆ 5 ç§å½¢æ€ï¼š</p>
<ul>
<li><strong>Earthï¼ˆåœ°çƒï¼‰</strong>ï¼šç»å…¸çš„ Fibonacci çƒé¢åˆ†å¸ƒ</li>
<li><strong>Heartï¼ˆçˆ±å¿ƒï¼‰</strong>ï¼šæµªæ¼«çš„å¿ƒå½¢æ•°å­¦æ›²çº¿</li>
<li><strong>Saturnï¼ˆåœŸæ˜Ÿï¼‰</strong>ï¼šå¸¦å…‰ç¯çš„è¡Œæ˜Ÿç³»ç»Ÿ</li>
<li><strong>Treeï¼ˆåœ£è¯æ ‘ï¼‰</strong>ï¼šåœ†é”¥èºæ—‹åˆ†å¸ƒ</li>
<li><strong>Fireworksï¼ˆçƒŸèŠ±ï¼‰</strong>ï¼šå®Œå…¨éšæœºçš„çˆ†ç‚¸æ•ˆæœ</li>
</ul>
<p>è¿™ä¸€åˆ‡ï¼Œéƒ½è¿è¡Œåœ¨ä¸€ä¸ªæ™®é€šçš„ Chrome æµè§ˆå™¨é‡Œã€‚</p>
<h2 data-id="heading-4">äºŒã€æŠ€æœ¯è§£æ„ï¼šä¸‰é©¾é©¬è½¦å¦‚ä½•ååŒï¼Ÿ</h2>
<p>æ•´ä¸ªé¡¹ç›®ä½¿ç”¨ <strong>Vue 3 + TypeScript</strong> æ„å»ºï¼Œæ ¸å¿ƒé€»è¾‘å…¶å®éå¸¸ç®€å•ï¼Œä¸»è¦ä¾èµ–ä¸‰ä¸ªæŠ€æœ¯çš„æœ‰æœºç»“åˆã€‚</p>
<h3 data-id="heading-5">1. The Eye: MediaPipe Hands</h3>
<p>è¿™æ˜¯ Google å¼€æºçš„è½»é‡çº§æœºå™¨å­¦ä¹ æ¨¡å‹ã€‚å®ƒçš„ç‰¹ç‚¹æ˜¯ï¼š<strong>å¿«ï¼Œæå¿«ã€‚</strong>
å®ƒä¸éœ€è¦å°†è§†é¢‘æµä¸Šä¼ åˆ°äº‘ç«¯å¤„ç†ï¼Œè€Œæ˜¯ç›´æ¥åœ¨æµè§ˆå™¨ç«¯ï¼ˆWASMï¼‰åˆ©ç”¨ GPU åŠ é€Ÿæ¨ç†ã€‚</p>
<p>æ ¸å¿ƒé€»è¾‘åªéœ€è¦å…³æ³¨ä¸¤ä¸ªå…³é”®ç‚¹ï¼š</p>
<ul>
<li><strong>Landmark 4 (æ‹‡æŒ‡å°–)</strong></li>
<li><strong>Landmark 8 (é£ŸæŒ‡å°–)</strong></li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// è®¡ç®—æ‹‡æŒ‡å’Œé£ŸæŒ‡çš„æ¬§å‡ é‡Œå¾—è·ç¦»</span>
<span class="hljs-keyword">const</span> distance = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sqrt</span>(
  (thumbTip.<span class="hljs-property">x</span> - indexTip.<span class="hljs-property">x</span>) ** <span class="hljs-number">2</span> + 
  (thumbTip.<span class="hljs-property">y</span> - indexTip.<span class="hljs-property">y</span>) ** <span class="hljs-number">2</span>
)

<span class="hljs-comment">// è®¾å®šé˜ˆå€¼è¿›è¡ŒçŠ¶æ€åˆ¤æ–­</span>
<span class="hljs-keyword">if</span> (distance &lt; <span class="hljs-number">0.08</span>) {
  <span class="hljs-comment">// è§¦å‘"æ¡æ‹³/æ”¶ç¼©"çŠ¶æ€</span>
  <span class="hljs-title function_">emit</span>(<span class="hljs-string">'contract'</span>)
} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (distance &gt; <span class="hljs-number">0.16</span>) {
  <span class="hljs-comment">// è§¦å‘"å¼ å¼€/çˆ†ç‚¸"çŠ¶æ€</span>
  <span class="hljs-title function_">emit</span>(<span class="hljs-string">'explode'</span>)
}
</code></pre>
<p>ç®€å•çš„é«˜ä¸­æ•°å­¦ï¼Œå°±èƒ½æŠŠè¿ç»­çš„æ¨¡æ‹Ÿä¿¡å·è½¬åŒ–ä¸ºç¦»æ•£çš„äº¤äº’æŒ‡ä»¤ã€‚</p>
<h3 data-id="heading-6">2. The Canvas: Three.js ç²’å­ç³»ç»Ÿ</h3>
<p>4000 ä¸ªç²’å­åœ¨ Three.js ä¸­å¹¶ä¸æ˜¯ 4000 ä¸ªç‹¬ç«‹çš„ Meshï¼ˆé‚£æ ·æµè§ˆå™¨ä¼šå¡æ­»ï¼‰ï¼Œè€Œæ˜¯ä¸€ä¸ª <code>THREE.Points</code> ç³»ç»Ÿã€‚
æ‰€æœ‰çš„ç²’å­å…±äº«ä¸€ä¸ª Geometryï¼Œé€šè¿‡ BufferAttribute æ¥ç®¡ç†æ¯ä¸ªç²’å­çš„ä½ç½®ã€‚</p>
<p>ä¸åŒå½¢æ€çš„åˆ‡æ¢ï¼Œæœ¬è´¨ä¸Šæ˜¯<strong>ç›®æ ‡ä½ç½®ï¼ˆTarget Positionï¼‰çš„è®¡ç®—</strong>ã€‚æ¯”å¦‚å¿ƒå½¢æ›²çº¿ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å¿ƒå½¢å‚æ•°æ–¹ç¨‹</span>
<span class="hljs-keyword">const</span> x = <span class="hljs-number">16</span> * <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">pow</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sin</span>(t), <span class="hljs-number">3</span>)
<span class="hljs-keyword">const</span> y = <span class="hljs-number">13</span> * <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">cos</span>(t) - <span class="hljs-number">5</span> * <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">cos</span>(<span class="hljs-number">2</span> * t) - <span class="hljs-number">2</span> * <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">cos</span>(<span class="hljs-number">3</span> * t) - <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">cos</span>(<span class="hljs-number">4</span> * t)
<span class="hljs-keyword">const</span> z = t * <span class="hljs-number">2</span> <span class="hljs-comment">// å¢åŠ ä¸€ç‚¹åšåº¦</span>
</code></pre>
<h3 data-id="heading-7">3. The Motion: ç®€å•çš„ç‰©ç†æ’å€¼</h3>
<p>ä¸ºäº†è®©åŠ¨ç”»çœ‹èµ·æ¥è‡ªç„¶ï¼Œç²’å­ä¸æ˜¯"ç¬ç§»"åˆ°æ–°ä½ç½®çš„ï¼Œè€Œæ˜¯æ¯ä¸€å¸§éƒ½å‘ç›®æ ‡ä½ç½®"æ»‘è¡Œ"ä¸€ç‚¹ç‚¹ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ¯ä¸€å¸§çš„æ¸²æŸ“å¾ªç¯ä¸­</span>
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; particleCount; i++) {
  <span class="hljs-comment">// å½“å‰ä½ç½® += (ç›®æ ‡ä½ç½® - å½“å‰ä½ç½®) * é˜»å°¼ç³»æ•°</span>
  positions[i] += (targetPositions[i] - positions[i]) * <span class="hljs-number">0.08</span>
}
</code></pre>
<p>è¿™ä¸ªç®€å•çš„å…¬å¼ï¼ˆLerpï¼Œçº¿æ€§æ’å€¼ï¼‰èµ‹äºˆäº†ç²’å­é‡é‡æ„Ÿå’Œæƒ¯æ€§ã€‚</p>
<h2 data-id="heading-8">ä¸‰ã€Web AI çš„å¯ç¤ºï¼šç®—åŠ›ä¸‹æ²‰ä¸éšç§çº¢åˆ©</h2>
<p>åšå®Œè¿™ä¸ªé¡¹ç›®ï¼Œæˆ‘æœ‰å‡ ä¸ªå…³äº Web æŠ€æœ¯æ¼”è¿›çš„å¼ºçƒˆæ„Ÿå—ã€‚</p>
<h3 data-id="heading-9">1. ç®—åŠ›æ­£åœ¨å‘ç«¯ä¾§å›æµ</h3>
<p>åœ¨äº‘è®¡ç®—ä¸»å¯¼çš„åå¹´é‡Œï¼Œæˆ‘ä»¬ä¹ æƒ¯äº†æŠŠä¸€åˆ‡ä¸¢ç»™æœåŠ¡å™¨ã€‚ä½† MediaPipe è¿™ç±» Web AI æŠ€æœ¯çš„æˆç†Ÿï¼Œæ ‡å¿—ç€<strong>ç«¯ä¾§ç®—åŠ›çš„è§‰é†’</strong>ã€‚
ç°åœ¨çš„æ‰‹æœºå’Œç¬”è®°æœ¬æ˜¾å¡è¶³å¤Ÿå¼ºå¤§ï¼Œå¯ä»¥åœ¨æµè§ˆå™¨é‡Œè·‘ç™¾äº¿å‚æ•°ä»¥ä¸‹çš„å°æ¨¡å‹ã€‚
è¿™æ„å‘³ç€ï¼š<strong>é›¶å»¶è¿Ÿçš„äº¤äº’ä½“éªŒ</strong>ã€‚ä½ çš„æ‰‹ä¸€åŠ¨ï¼Œç²’å­ç«‹é©¬è·Ÿç€åŠ¨ï¼Œä¸éœ€è¦ç­‰å¾…ç½‘ç»œè¯·æ±‚å¾€è¿”ã€‚</p>
<h3 data-id="heading-10">2. éšç§æ˜¯æœ€å¤§çš„æŠ¤åŸæ²³</h3>
<p>ç”¨æˆ·è¶Šæ¥è¶Šä»‹æ„"ä¸Šä¼ æ‘„åƒå¤´è§†é¢‘"ã€‚
çº¯å‰ç«¯å®ç°çš„ AI æœ‰ä¸€ä¸ªå¤©ç„¶ä¼˜åŠ¿ï¼š<strong>æ‰€æœ‰è®¡ç®—éƒ½åœ¨æœ¬åœ°å‘ç”Ÿ</strong>ã€‚
è§†é¢‘æµåªåœ¨å†…å­˜é‡Œæµè½¬ï¼Œä»æœªç¦»å¼€è¿‡ç”¨æˆ·çš„è®¾å¤‡ã€‚è¿™ç§"éšç§å®‰å…¨æ„Ÿ"æ˜¯äº‘ç«¯ AI API æ— æ³•æ¯”æ‹Ÿçš„ã€‚</p>
<h3 data-id="heading-11">3. åˆ›æ„çš„é—¨æ§›åœ¨æŒ‡æ•°çº§é™ä½</h3>
<p>äº”å¹´å‰ï¼Œåšè¿™ä¸ªæ•ˆæœéœ€è¦æ‡‚ OpenCVã€æ‡‚ C++ã€æ‡‚ Shader ç¼–ç¨‹ã€‚
ç°åœ¨ï¼Œä½ åªéœ€è¦ä¼šå†™ JavaScriptï¼Œè°ƒå‡ ä¸ª npm åŒ…ã€‚
<strong>æŠ€æœ¯åœ¨å˜å¾—è¶Šæ¥è¶Šå¹³æ°‘åŒ–ï¼ˆDemocratizationï¼‰ï¼Œè¿™è®©å¼€å‘è€…èƒ½æŠŠç²¾åŠ›ä»"æ€ä¹ˆå®ç°"è½¬ç§»åˆ°"åšä»€ä¹ˆå¥½ç©çš„ä¸œè¥¿"ä¸Šã€‚</strong></p>
<h2 data-id="heading-12">å››ã€æœªæ¥ï¼šè¿˜å¯ä»¥æ€ä¹ˆç©ï¼Ÿ</h2>
<p>è¿™ä¸ª Demo åªæ˜¯ä¸€ä¸ªèµ·ç‚¹ï¼Œå®ƒå±•ç¤ºäº† Web äº¤äº’çš„ä¸€ç§æ–°èŒƒå¼â€”â€”<strong>è‡ªç„¶ç”¨æˆ·ç•Œé¢ï¼ˆNUIï¼‰</strong>ã€‚</p>
<p>åŸºäºè¿™ä¸ªæ¶å­ï¼Œæˆ‘ä»¬å®Œå…¨å¯ä»¥æ‰©å±•å‡ºæ›´å¤šç©æ³•ï¼š</p>
<ul>
<li><strong>WebAR è¥é”€</strong>ï¼šåœ¨ç”µå•†é¡µé¢ï¼Œç”¨æ‰‹åŠ¿"éš”ç©º"æ—‹è½¬å•†å“æ¨¡å‹ï¼›</li>
<li><strong>æ— æ¥è§¦å±•ç¤º</strong>ï¼šåœ¨åšç‰©é¦†æˆ–å±•å…çš„å¤§å±ä¸Šï¼Œè§‚ä¼—æŒ¥æ‰‹å°±èƒ½ç¿»é¡µã€ç¼©æ”¾å±•å“ï¼›</li>
<li><strong>éŸ³ä¹å¯è§†åŒ–</strong>ï¼šè®©ç²’å­ä¸ä»…ä»…è·Ÿéšæ‰‹åŠ¿ï¼Œè¿˜éšç€èƒŒæ™¯éŸ³ä¹çš„é¢‘è°±è·³åŠ¨ï¼›</li>
<li><strong>å¤šäººè¿œç¨‹äº’åŠ¨</strong>ï¼šç»“åˆ WebRTCï¼Œè®©å¼‚åœ°çš„ä¸¤ä¸ªäººé€šè¿‡æ‰‹åŠ¿å…±åŒæ§åˆ¶åŒä¸€ä¸ª 3D åœºæ™¯ã€‚</li>
</ul>
<h2 data-id="heading-13">äº”ã€æœ€å</h2>
<p>é¡¹ç›®å·²å¼€æºï¼Œæ¬¢è¿ Fork ç©è€ï¼Œæˆ–è€…ç›´æ¥ç‚¹ä¸ª Star â­ï¸ã€‚</p>
<p><strong>GitHub</strong>: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fwangmiaozero%2Fhand-controlled-particles" target="_blank" title="https://github.com/wangmiaozero/hand-controlled-particles" ref="nofollow noopener noreferrer">github.com/wangmiaozerâ€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Git Pull ç­–ç•¥å®Œå…¨æŒ‡å—ï¼šMergeã€Rebaseã€Fast-forward æ·±åº¦å¯¹æ¯”]]></title>    <link>https://juejin.cn/post/7580263284336525353</link>    <guid>https://juejin.cn/post/7580263284336525353</guid>    <pubDate>2025-12-05T17:09:51.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7580263284336525353" data-draft-id="7580208715275305002" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Git Pull ç­–ç•¥å®Œå…¨æŒ‡å—ï¼šMergeã€Rebaseã€Fast-forward æ·±åº¦å¯¹æ¯”"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-05T17:09:51.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ¯›å‘æµ“å¯†çš„å¥³çŒ´å­"/> <meta itemprop="url" content="https://juejin.cn/user/817692381560461"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Git Pull ç­–ç•¥å®Œå…¨æŒ‡å—ï¼šMergeã€Rebaseã€Fast-forward æ·±åº¦å¯¹æ¯”
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/817692381560461/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ¯›å‘æµ“å¯†çš„å¥³çŒ´å­
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-05T17:09:51.000Z" title="Fri Dec 05 2025 17:09:51 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-05
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    7
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>åœ¨ä½¿ç”¨ Git è¿›è¡Œç‰ˆæœ¬æ§åˆ¶æ—¶ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šé‡åˆ°è¿™æ ·çš„é”™è¯¯æç¤ºï¼š</p>
<pre><code class="hljs language-vbnet" lang="vbnet"><span class="hljs-symbol">fatal:</span> Need <span class="hljs-keyword">to</span> specify how <span class="hljs-keyword">to</span> reconcile divergent branches.
</code></pre>
<p>è¿™ä¸ªé”™è¯¯é€šå¸¸å‘ç”Ÿåœ¨æ‰§è¡Œ <code>git pull</code> æ—¶ï¼Œæœ¬åœ°åˆ†æ”¯å’Œè¿œç¨‹åˆ†æ”¯å‡ºç°äº†åˆ†æ­§ã€‚Git éœ€è¦ä½ æ˜ç¡®æŒ‡å®šå¦‚ä½•å¤„ç†è¿™ç§åˆ†æ­§ã€‚æœ¬æ–‡å°†æ·±å…¥è§£æ Git çš„å››ç§ pull ç­–ç•¥ï¼Œå¸®åŠ©ä½ æ ¹æ®å®é™…åœºæ™¯é€‰æ‹©æœ€åˆé€‚çš„æ–¹æ¡ˆã€‚</p>
<hr/>
<h2 data-id="heading-1">å››ç§ Pull ç­–ç•¥æ¦‚è§ˆ</h2>








































<table><thead><tr><th>ç­–ç•¥</th><th>é…ç½®å‘½ä»¤</th><th>å†å²å›¾ç‰¹å¾</th><th>é€‚ç”¨åœºæ™¯</th><th>æ ¸å¿ƒç‰¹ç‚¹</th></tr></thead><tbody><tr><td><strong>Mergeï¼ˆåˆå¹¶ï¼‰</strong></td><td><code>git config pull.rebase false</code></td><td>æœ‰åˆ†å‰å’Œåˆå¹¶ç‚¹</td><td>å›¢é˜Ÿåä½œé¡¹ç›®</td><td>å®‰å…¨ã€ä¿ç•™å®Œæ•´å†å²</td></tr><tr><td><strong>Rebaseï¼ˆå˜åŸºï¼‰</strong></td><td><code>git config pull.rebase true</code></td><td>çº¿æ€§å†å²</td><td>ä¸ªäººåŠŸèƒ½åˆ†æ”¯</td><td>å†å²æ¸…æ™°ã€ä¼šæ”¹å†™æäº¤</td></tr><tr><td><strong>Fast-forward Only</strong></td><td><code>git config pull.ff only</code></td><td>ä¸¥æ ¼çº¿æ€§</td><td>ä¸¥æ ¼æµç¨‹æ§åˆ¶</td><td>æœ€ä¸¥æ ¼ã€ä¸å…è®¸åˆ†æ­§</td></tr><tr><td><strong>é»˜è®¤è¡Œä¸º</strong></td><td>æ— é…ç½®</td><td>å–å†³äºé€‰æ‹©</td><td>ä¸´æ—¶ä½¿ç”¨</td><td>çµæ´»ä½†éœ€æ‰‹åŠ¨é€‰æ‹©</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-2">ä¸€ã€Mergeï¼ˆåˆå¹¶ï¼‰ç­–ç•¥</h2>
<h3 data-id="heading-3">å·¥ä½œåŸç†</h3>
<p>Merge ç­–ç•¥æ˜¯ Git æœ€ä¼ ç»Ÿã€æœ€å®‰å…¨çš„åˆå¹¶æ–¹å¼ã€‚å½“æœ¬åœ°å’Œè¿œç¨‹åˆ†æ”¯å‡ºç°åˆ†æ­§æ—¶ï¼ŒGit ä¼šåˆ›å»ºä¸€ä¸ªåˆå¹¶æäº¤ï¼ˆmerge commitï¼‰ï¼Œå°†ä¸¤ä¸ªåˆ†æ”¯çš„å†å²æ•´åˆåœ¨ä¸€èµ·ï¼ŒåŒæ—¶ä¿ç•™æ‰€æœ‰åˆ†æ”¯ä¿¡æ¯ã€‚</p>
<h3 data-id="heading-4">ç¤ºä¾‹åœºæ™¯</h3>
<p>å‡è®¾ä½ æ­£åœ¨å¼€å‘ä¸€ä¸ªåŠŸèƒ½ï¼Œæœ¬åœ°æœ‰æäº¤ Cï¼Œè€Œè¿œç¨‹æœ‰å…¶ä»–äººæäº¤çš„ Dï¼š</p>
<pre><code class="hljs language-sql" lang="sql">åˆå§‹çŠ¶æ€ï¼š
æœ¬åœ°åˆ†æ”¯:  A<span class="hljs-comment">---B---C (ä½ çš„æäº¤)</span>
è¿œç¨‹åˆ†æ”¯:  A<span class="hljs-comment">---B---D (åˆ«äººçš„æäº¤)</span>

æ‰§è¡Œ git pull (ä½¿ç”¨ <span class="hljs-keyword">merge</span> ç­–ç•¥):
ç»“æœ:      A<span class="hljs-comment">---B---C---M</span>
                \     <span class="hljs-operator">/</span>
                 D<span class="hljs-comment">---â”˜</span>
</code></pre>
<p>åˆå¹¶åï¼Œå†å²å›¾ä¸­ä¼šæ˜¾ç¤ºä¸€ä¸ªåˆå¹¶ç‚¹ Mï¼Œæ¸…æ¥šåœ°è®°å½•äº†åˆ†æ”¯çš„åˆå¹¶è¿‡ç¨‹ã€‚</p>
<h3 data-id="heading-5">é€‚ç”¨åœºæ™¯</h3>
<ul>
<li>âœ… <strong>å›¢é˜Ÿåä½œé¡¹ç›®</strong>ï¼šå¤šäººåŒæ—¶å¼€å‘åŒä¸€åˆ†æ”¯</li>
<li>âœ… <strong>éœ€è¦å®Œæ•´å†å²</strong>ï¼šè¦æ±‚ä¿ç•™æ‰€æœ‰åˆ†æ”¯å’Œåˆå¹¶ä¿¡æ¯</li>
<li>âœ… <strong>ä»£ç å®¡æŸ¥æµç¨‹</strong>ï¼šéœ€è¦è¿½è¸ªä»£ç çš„æ¥æºå’Œåˆå¹¶è·¯å¾„</li>
<li>âœ… <strong>ç”Ÿäº§ç¯å¢ƒ</strong>ï¼šéœ€è¦å®‰å…¨å¯é çš„åˆå¹¶æ–¹å¼</li>
</ul>
<h3 data-id="heading-6">ä¼˜ç‚¹</h3>
<ol>
<li><strong>å®‰å…¨æ€§é«˜</strong>ï¼šä¸ä¼šä¸¢å¤±ä»»ä½•æäº¤ï¼Œæ‰€æœ‰å†å²éƒ½è¢«ä¿ç•™</li>
<li><strong>ä¿¡æ¯å®Œæ•´</strong>ï¼šä¿ç•™å®Œæ•´çš„åˆ†æ”¯ä¿¡æ¯ï¼Œä¾¿äºè¿½è¸ªå’Œå®¡è®¡</li>
<li><strong>å†²çªå¤„ç†ç®€å•</strong>ï¼šåªéœ€è§£å†³ä¸€æ¬¡å†²çªå³å¯å®Œæˆåˆå¹¶</li>
<li><strong>é€‚åˆåä½œ</strong>ï¼šå¤šäººåä½œæ—¶ä¸ä¼šé€ æˆæ··ä¹±</li>
</ol>
<h3 data-id="heading-7">ç¼ºç‚¹</h3>
<ol>
<li><strong>äº§ç”Ÿåˆå¹¶æäº¤</strong>ï¼šä¼šåˆ›å»ºé¢å¤–çš„åˆå¹¶æäº¤ï¼Œå¯èƒ½è®©å†å²å›¾å˜å¾—å¤æ‚</li>
<li><strong>å†å²ä¸å¤Ÿçº¿æ€§</strong>ï¼šæäº¤å†å²ä¸æ˜¯ä¸€æ¡ç›´çº¿ï¼Œå¯èƒ½å½±å“å¯è¯»æ€§</li>
<li><strong>æäº¤è®°å½•å¢å¤š</strong>ï¼šåˆå¹¶æäº¤ä¼šå¢åŠ æäº¤è®°å½•çš„æ•°é‡</li>
</ol>
<h3 data-id="heading-8">é…ç½®æ–¹æ³•</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä»…å¯¹å½“å‰ä»“åº“ç”Ÿæ•ˆ</span>
git config pull.rebase <span class="hljs-literal">false</span>

<span class="hljs-comment"># å…¨å±€é…ç½®ï¼ˆæ‰€æœ‰ä»“åº“ï¼‰</span>
git config --global pull.rebase <span class="hljs-literal">false</span>
</code></pre>
<hr/>
<h2 data-id="heading-9">äºŒã€Rebaseï¼ˆå˜åŸºï¼‰ç­–ç•¥</h2>
<h3 data-id="heading-10">å·¥ä½œåŸç†</h3>
<p>Rebase ç­–ç•¥ä¼šå°†ä½ çš„æœ¬åœ°æäº¤"é‡æ–°åº”ç”¨"åˆ°è¿œç¨‹æœ€æ–°æäº¤ä¹‹ä¸Šï¼Œåˆ›å»ºä¸€ä¸ªçº¿æ€§çš„æäº¤å†å²ã€‚è¿™ä¸ªè¿‡ç¨‹ä¼šæ”¹å†™æäº¤å†å²ï¼Œç”Ÿæˆæ–°çš„æäº¤å¯¹è±¡ï¼ˆcommit hash ä¼šæ”¹å˜ï¼‰ã€‚</p>
<h3 data-id="heading-11">ç¤ºä¾‹åœºæ™¯</h3>
<p>åŒæ ·çš„æƒ…å†µï¼Œä½¿ç”¨ rebase ç­–ç•¥ï¼š</p>
<pre><code class="hljs language-less" lang="less">åˆå§‹çŠ¶æ€ï¼š
æœ¬åœ°åˆ†æ”¯:  <span class="hljs-selector-tag">A</span><span class="hljs-selector-tag">---B---C</span> (ä½ çš„æäº¤)
è¿œç¨‹åˆ†æ”¯:  <span class="hljs-selector-tag">A</span><span class="hljs-selector-tag">---B---D</span> (åˆ«äººçš„æäº¤)

æ‰§è¡Œ <span class="hljs-selector-tag">git</span> <span class="hljs-selector-tag">pull</span> (ä½¿ç”¨ rebase ç­–ç•¥):
ç»“æœ:      <span class="hljs-selector-tag">A</span><span class="hljs-selector-tag">---B---D---C</span>' (C'æ˜¯é‡æ–°åº”ç”¨çš„æäº¤ï¼Œhashå·²æ”¹å˜)
</code></pre>
<p>å¯ä»¥çœ‹åˆ°ï¼Œæäº¤å†å²å˜æˆäº†ä¸€æ¡ç›´çº¿ï¼ŒC è¢«é‡æ–°åº”ç”¨ä¸º C'ï¼Œæ”¾åœ¨äº† D ä¹‹åã€‚</p>
<h3 data-id="heading-12">é€‚ç”¨åœºæ™¯</h3>
<ul>
<li>âœ… <strong>ä¸ªäººåŠŸèƒ½åˆ†æ”¯</strong>ï¼šåœ¨è‡ªå·±çš„åˆ†æ”¯ä¸Šå¼€å‘ï¼Œæœªæ¨é€åˆ°å…±äº«åˆ†æ”¯</li>
<li>âœ… <strong>è¿½æ±‚çº¿æ€§å†å²</strong>ï¼šå¸Œæœ›æäº¤å†å²ä¿æŒçº¿æ€§ï¼Œä¾¿äºé˜…è¯»</li>
<li>âœ… <strong>ä»£ç å®¡æŸ¥å‰æ•´ç†</strong>ï¼šåœ¨æäº¤ PR/MR å‰æ•´ç†æäº¤å†å²</li>
<li>âœ… <strong>ä¸ªäººé¡¹ç›®</strong>ï¼šä¸éœ€è¦è€ƒè™‘å¤šäººåä½œçš„æƒ…å†µ</li>
</ul>
<h3 data-id="heading-13">ä¼˜ç‚¹</h3>
<ol>
<li><strong>å†å²æ¸…æ™°</strong>ï¼šæäº¤å†å²å‘ˆçº¿æ€§ï¼Œæ˜“äºé˜…è¯»å’Œç†è§£</li>
<li><strong>æ— åˆå¹¶æäº¤</strong>ï¼šä¸ä¼šäº§ç”Ÿé¢å¤–çš„åˆå¹¶æäº¤</li>
<li><strong>æäº¤è®°å½•ç®€æ´</strong>ï¼šæäº¤å†å²æ›´åŠ æ•´æ´</li>
</ol>
<h3 data-id="heading-14">ç¼ºç‚¹</h3>
<ol>
<li><strong>æ”¹å†™å†å²</strong>ï¼šä¼šæ”¹å˜æäº¤çš„ hash å€¼ï¼Œå¯èƒ½å½±å“å·²å»ºç«‹çš„å¼•ç”¨</li>
<li><strong>éœ€è¦å¼ºåˆ¶æ¨é€</strong>ï¼šå¦‚æœæäº¤å·²æ¨é€ï¼Œéœ€è¦ä½¿ç”¨ <code>git push --force</code></li>
<li><strong>åä½œé£é™©</strong>ï¼šå¤šäººåä½œæ—¶å¯èƒ½é€ æˆæ··ä¹±ï¼Œä¸æ¨èåœ¨å…±äº«åˆ†æ”¯ä½¿ç”¨</li>
<li><strong>å†²çªå¤„ç†å¤æ‚</strong>ï¼šå¯èƒ½éœ€è¦å¤šæ¬¡è§£å†³å†²çªï¼ˆæ¯ä¸ªæäº¤éƒ½å¯èƒ½é‡åˆ°å†²çªï¼‰</li>
</ol>
<h3 data-id="heading-15">âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹</h3>
<p><strong>ä¸è¦åœ¨å·²æ¨é€åˆ°å…±äº«åˆ†æ”¯çš„æäº¤ä¸Šä½¿ç”¨ rebaseï¼</strong></p>
<p>å¦‚æœæäº¤å·²ç»æ¨é€åˆ°è¿œç¨‹å¹¶è¢«å…¶ä»–äººä½¿ç”¨ï¼Œä½¿ç”¨ rebase ä¼šæ”¹å†™å†å²ï¼Œå¯èƒ½å¯¼è‡´ï¼š</p>
<ul>
<li>å…¶ä»–å¼€å‘è€…çš„æœ¬åœ°ä»“åº“å‡ºç°æ··ä¹±</li>
<li>éœ€è¦å¼ºåˆ¶æ¨é€ï¼Œå¯èƒ½è¦†ç›–å…¶ä»–äººçš„å·¥ä½œ</li>
<li>ç ´åå›¢é˜Ÿåä½œæµç¨‹</li>
</ul>
<h3 data-id="heading-16">é…ç½®æ–¹æ³•</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä»…å¯¹å½“å‰ä»“åº“ç”Ÿæ•ˆ</span>
git config pull.rebase <span class="hljs-literal">true</span>

<span class="hljs-comment"># å…¨å±€é…ç½®ï¼ˆæ‰€æœ‰ä»“åº“ï¼‰</span>
git config --global pull.rebase <span class="hljs-literal">true</span>
</code></pre>
<hr/>
<h2 data-id="heading-17">ä¸‰ã€Fast-forward Onlyï¼ˆä»…å¿«è¿›ï¼‰ç­–ç•¥</h2>
<h3 data-id="heading-18">å·¥ä½œåŸç†</h3>
<p>Fast-forward Only ç­–ç•¥åªå…è®¸"å¿«è¿›"åˆå¹¶ã€‚è¿™æ„å‘³ç€æœ¬åœ°åˆ†æ”¯å¿…é¡»æ˜¯è¿œç¨‹åˆ†æ”¯çš„å‰ç¼€ï¼ˆæœ¬åœ°åˆ†æ”¯çš„æ‰€æœ‰æäº¤éƒ½åœ¨è¿œç¨‹åˆ†æ”¯çš„å†å²ä¸­ï¼‰ã€‚å¦‚æœå­˜åœ¨åˆ†æ­§ï¼Œpull æ“ä½œä¼šç›´æ¥å¤±è´¥ï¼Œè¦æ±‚ä½ å…ˆå¤„ç†åˆ†æ­§ã€‚</p>
<h3 data-id="heading-19">ç¤ºä¾‹åœºæ™¯</h3>
<p><strong>æˆåŠŸæƒ…å†µï¼ˆå¯ä»¥å¿«è¿›ï¼‰ï¼š</strong></p>
<pre><code class="hljs language-sql" lang="sql">æœ¬åœ°åˆ†æ”¯:  A<span class="hljs-comment">---B---C</span>
è¿œç¨‹åˆ†æ”¯:  A<span class="hljs-comment">---B---C---D</span>

æ‰§è¡Œ git pull (ä½¿ç”¨ fast<span class="hljs-operator">-</span>forward <span class="hljs-keyword">only</span>):
ç»“æœ:      A<span class="hljs-comment">---B---C---D âœ… (æˆåŠŸï¼Œå¯ä»¥å¿«è¿›)</span>
</code></pre>
<p><strong>å¤±è´¥æƒ…å†µï¼ˆå­˜åœ¨åˆ†æ­§ï¼‰ï¼š</strong></p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">æœ¬åœ°åˆ†æ”¯:  A---B---C (ä½ çš„æäº¤)</span>
<span class="hljs-section">è¿œç¨‹åˆ†æ”¯:  A---B---D (åˆ«äººçš„æäº¤)</span>

æ‰§è¡Œ git pull (ä½¿ç”¨ fast-forward only):
<span class="hljs-section">ç»“æœ:      âŒ å¤±è´¥ï¼éœ€è¦å…ˆå¤„ç†åˆ†æ­§</span>
</code></pre>
<h3 data-id="heading-20">é€‚ç”¨åœºæ™¯</h3>
<ul>
<li>âœ… <strong>ä¸¥æ ¼çš„ä»£ç å®¡æŸ¥æµç¨‹</strong>ï¼šè¦æ±‚æ‰€æœ‰åˆå¹¶éƒ½å¿…é¡»æ˜¯å¿«è¿›çš„</li>
<li>âœ… <strong>ä¸»åˆ†æ”¯ä¿æŠ¤</strong>ï¼šç»´æŠ¤ä¸»åˆ†æ”¯ï¼ˆå¦‚ main/masterï¼‰çš„ä¸¥æ ¼æ€§</li>
<li>âœ… <strong>å¼ºåˆ¶åŒæ­¥</strong>ï¼šè¦æ±‚å¼€å‘è€…å¿…é¡»å…ˆåŒæ­¥è¿œç¨‹ä»£ç å†æäº¤</li>
<li>âœ… <strong>CI/CD æµç¨‹</strong>ï¼šé…åˆè‡ªåŠ¨åŒ–æµç¨‹ï¼Œç¡®ä¿ä»£ç è´¨é‡</li>
</ul>
<h3 data-id="heading-21">ä¼˜ç‚¹</h3>
<ol>
<li><strong>å†å²æœ€å¹²å‡€</strong>ï¼šç¡®ä¿æäº¤å†å²ä¸¥æ ¼çº¿æ€§ï¼Œæ²¡æœ‰ä»»ä½•åˆ†å‰</li>
<li><strong>å¼ºåˆ¶è§„èŒƒ</strong>ï¼šå¼ºåˆ¶å¼€å‘è€…ä¿æŒä»£ç åŒæ­¥ï¼Œé¿å…æ„å¤–çš„åˆå¹¶æäº¤</li>
<li><strong>æµç¨‹æ¸…æ™°</strong>ï¼šæ˜ç¡®çš„å·¥ä½œæµç¨‹ï¼Œå‡å°‘æ··ä¹±</li>
</ol>
<h3 data-id="heading-22">ç¼ºç‚¹</h3>
<ol>
<li><strong>ä¸å¤Ÿçµæ´»</strong>ï¼šé‡åˆ°åˆ†æ­§æ—¶å¿…é¡»å…ˆæ‰‹åŠ¨å¤„ç†ï¼ˆä½¿ç”¨ rebase æˆ– mergeï¼‰</li>
<li><strong>å¢åŠ å¤æ‚åº¦</strong>ï¼šå¯èƒ½éœ€è¦é¢å¤–çš„æ­¥éª¤æ¥å¤„ç†åˆ†æ­§</li>
<li><strong>å¯èƒ½å¤±è´¥</strong>ï¼špull æ“ä½œå¯èƒ½å¤±è´¥ï¼Œéœ€è¦å¼€å‘è€…ä¸»åŠ¨å¤„ç†</li>
</ol>
<h3 data-id="heading-23">é…ç½®æ–¹æ³•</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä»…å¯¹å½“å‰ä»“åº“ç”Ÿæ•ˆ</span>
git config pull.ff only

<span class="hljs-comment"># å…¨å±€é…ç½®ï¼ˆæ‰€æœ‰ä»“åº“ï¼‰</span>
git config --global pull.ff only
</code></pre>
<hr/>
<h2 data-id="heading-24">å››ã€é»˜è®¤è¡Œä¸ºï¼ˆæœªé…ç½®ï¼‰</h2>
<h3 data-id="heading-25">å·¥ä½œåŸç†</h3>
<p>å¦‚æœä½ æ²¡æœ‰é…ç½®ä»»ä½• pull ç­–ç•¥ï¼ŒGit çš„è¡Œä¸ºå–å†³äºç‰ˆæœ¬ï¼š</p>
<ul>
<li><strong>Git 2.27+</strong>ï¼šä¼šæç¤ºä½ é€‰æ‹©å¦‚ä½•å¤„ç†åˆ†æ­§</li>
<li><strong>æ—§ç‰ˆæœ¬</strong>ï¼šå¯èƒ½é»˜è®¤ä½¿ç”¨ merge æˆ–æ ¹æ®æƒ…å†µè‡ªåŠ¨é€‰æ‹©</li>
</ul>
<h3 data-id="heading-26">é€‚ç”¨åœºæ™¯</h3>
<ul>
<li>âœ… <strong>ä¸´æ—¶ä½¿ç”¨</strong>ï¼šä¸ç¡®å®šä½¿ç”¨å“ªç§ç­–ç•¥æ—¶</li>
<li>âœ… <strong>çµæ´»éœ€æ±‚</strong>ï¼šä¸åŒæƒ…å†µéœ€è¦ä¸åŒç­–ç•¥</li>
<li>âœ… <strong>å­¦ä¹ é˜¶æ®µ</strong>ï¼šæƒ³äº†è§£ä¸åŒç­–ç•¥çš„æ•ˆæœ</li>
</ul>
<h3 data-id="heading-27">ä¼˜ç‚¹</h3>
<ul>
<li><strong>çµæ´»</strong>ï¼šå¯ä»¥æ ¹æ®å…·ä½“æƒ…å†µé€‰æ‹©æœ€åˆé€‚çš„ç­–ç•¥</li>
</ul>
<h3 data-id="heading-28">ç¼ºç‚¹</h3>
<ul>
<li><strong>éœ€è¦æ‰‹åŠ¨é€‰æ‹©</strong>ï¼šæ¯æ¬¡é‡åˆ°åˆ†æ­§éƒ½éœ€è¦æ‰‹åŠ¨æŒ‡å®š</li>
<li><strong>å¯èƒ½å¿˜è®°é…ç½®</strong>ï¼šå®¹æ˜“å¿˜è®°é…ç½®å¯¼è‡´æ“ä½œå¤±è´¥</li>
<li><strong>ä¸å¤Ÿè‡ªåŠ¨åŒ–</strong>ï¼šæ— æ³•å®ç°è‡ªåŠ¨åŒ–æµç¨‹</li>
</ul>
<hr/>
<h2 data-id="heading-29">å®é™…ä½¿ç”¨å»ºè®®</h2>
<h3 data-id="heading-30">1. å›¢é˜Ÿåä½œé¡¹ç›®ï¼ˆæ¨èï¼šMergeï¼‰</h3>
<pre><code class="hljs language-bash" lang="bash">git config pull.rebase <span class="hljs-literal">false</span>
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆé€‰æ‹© Mergeï¼Ÿ</strong></p>
<ul>
<li>å›¢é˜Ÿåä½œä¸­æœ€å®‰å…¨å¯é çš„æ–¹å¼</li>
<li>ä¿ç•™å®Œæ•´çš„å†å²è®°å½•ï¼Œä¾¿äºè¿½è¸ªå’Œå®¡è®¡</li>
<li>ä¸ä¼šæ”¹å†™å·²æ¨é€çš„æäº¤ï¼Œé¿å…å½±å“å…¶ä»–å¼€å‘è€…</li>
<li>å†²çªå¤„ç†ç›¸å¯¹ç®€å•ï¼Œåªéœ€è§£å†³ä¸€æ¬¡</li>
</ul>
<h3 data-id="heading-31">2. ä¸ªäººåŠŸèƒ½åˆ†æ”¯ï¼ˆå¯é€‰ï¼šRebaseï¼‰</h3>
<pre><code class="hljs language-bash" lang="bash">git config pull.rebase <span class="hljs-literal">true</span>
</code></pre>
<p><strong>ä½¿ç”¨å‰æï¼š</strong></p>
<ul>
<li>âš ï¸ <strong>ä»…ç”¨äºæœªæ¨é€çš„æäº¤</strong></li>
<li>âš ï¸ <strong>ä»…åœ¨è‡ªå·±çš„åŠŸèƒ½åˆ†æ”¯ä¸Šä½¿ç”¨</strong></li>
<li>âš ï¸ <strong>åˆå¹¶åˆ°ä¸»åˆ†æ”¯å‰å¯ä»¥æ•´ç†æäº¤å†å²</strong></li>
</ul>
<h3 data-id="heading-32">3. ä¸¥æ ¼æµç¨‹æ§åˆ¶ï¼ˆå¯é€‰ï¼šFast-forward Onlyï¼‰</h3>
<pre><code class="hljs language-bash" lang="bash">git config pull.ff only
</code></pre>
<p><strong>é€‚ç”¨æ¡ä»¶ï¼š</strong></p>
<ul>
<li>éœ€è¦é…åˆä¸¥æ ¼çš„ä»£ç å®¡æŸ¥æµç¨‹</li>
<li>å›¢é˜Ÿæœ‰æ˜ç¡®çš„å·¥ä½œæµç¨‹è§„èŒƒ</li>
<li>ä¸»åˆ†æ”¯éœ€è¦ä¿æŒä¸¥æ ¼çš„çº¿æ€§å†å²</li>
</ul>
<h3 data-id="heading-33">å…¨å±€è®¾ç½® vs æœ¬åœ°è®¾ç½®</h3>
<p><strong>å…¨å±€è®¾ç½®ï¼ˆæ¨èç”¨äºä¸ªäººåå¥½ï¼‰ï¼š</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># è®¾ç½®å…¨å±€é»˜è®¤ç­–ç•¥</span>
git config --global pull.rebase <span class="hljs-literal">false</span>
</code></pre>
<p><strong>æœ¬åœ°è®¾ç½®ï¼ˆæ¨èç”¨äºé¡¹ç›®è§„èŒƒï¼‰ï¼š</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä»…å¯¹å½“å‰ä»“åº“ç”Ÿæ•ˆ</span>
git config pull.rebase <span class="hljs-literal">false</span>
</code></pre>
<p><strong>å»ºè®®ï¼š</strong></p>
<ul>
<li>ä¸ªäººåå¥½ä½¿ç”¨å…¨å±€è®¾ç½®</li>
<li>é¡¹ç›®è§„èŒƒä½¿ç”¨æœ¬åœ°è®¾ç½®ï¼ˆå¯ä»¥æäº¤åˆ°ä»“åº“çš„ <code>.git/config</code>ï¼‰</li>
</ul>
<hr/>
<h2 data-id="heading-34">å®ç”¨æŠ€å·§</h2>
<h3 data-id="heading-35">æŸ¥çœ‹å½“å‰é…ç½®</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æŸ¥çœ‹å½“å‰ä»“åº“çš„ pull ç­–ç•¥é…ç½®</span>
git config pull.rebase
git config pull.ff

<span class="hljs-comment"># æŸ¥çœ‹å…¨å±€é…ç½®</span>
git config --global pull.rebase
git config --global pull.ff

<span class="hljs-comment"># æŸ¥çœ‹æ‰€æœ‰ç›¸å…³é…ç½®</span>
git config --list | grep pull
</code></pre>
<h3 data-id="heading-36">ä¸´æ—¶è¦†ç›–é…ç½®</h3>
<p>å³ä½¿é…ç½®äº†é»˜è®¤ç­–ç•¥ï¼Œä¹Ÿå¯ä»¥åœ¨å•æ¬¡æ“ä½œæ—¶ä¸´æ—¶è¦†ç›–ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä¸´æ—¶ä½¿ç”¨ rebaseï¼ˆå³ä½¿é…ç½®äº† mergeï¼‰</span>
git pull --rebase

<span class="hljs-comment"># ä¸´æ—¶ä½¿ç”¨ mergeï¼ˆå³ä½¿é…ç½®äº† rebaseï¼‰</span>
git pull --no-rebase

<span class="hljs-comment"># ä¸´æ—¶ä½¿ç”¨ fast-forward only</span>
git pull --ff-only
</code></pre>
<h3 data-id="heading-37">å¤„ç†å·²å‡ºç°çš„åˆ†æ­§</h3>
<p>å¦‚æœå·²ç»é‡åˆ°äº†åˆ†æ­§é”™è¯¯ï¼Œå¯ä»¥è¿™æ ·å¤„ç†ï¼š</p>
<p><strong>æ–¹æ³• 1ï¼šä½¿ç”¨ mergeï¼ˆæ¨èï¼‰</strong></p>
<pre><code class="hljs language-bash" lang="bash">git pull --no-rebase
<span class="hljs-comment"># æˆ–</span>
git pull --merge
</code></pre>
<p><strong>æ–¹æ³• 2ï¼šä½¿ç”¨ rebaseï¼ˆéœ€è°¨æ…ï¼‰</strong></p>
<pre><code class="hljs language-bash" lang="bash">git pull --rebase
</code></pre>
<p><strong>æ–¹æ³• 3ï¼šå…ˆ fetch å†å†³å®š</strong></p>
<pre><code class="hljs language-bash" lang="bash">git fetch origin
git <span class="hljs-built_in">log</span> HEAD..origin/develop  <span class="hljs-comment"># æŸ¥çœ‹è¿œç¨‹çš„æ–°æäº¤</span>
git merge origin/develop       <span class="hljs-comment"># æˆ– git rebase origin/develop</span>
</code></pre>
<hr/>
<h2 data-id="heading-38">æ€»ç»“</h2>
<p>é€‰æ‹©åˆé€‚çš„ Git pull ç­–ç•¥å–å†³äºä½ çš„å·¥ä½œåœºæ™¯å’Œå›¢é˜Ÿè§„èŒƒï¼š</p>






























<table><thead><tr><th>åœºæ™¯</th><th>æ¨èç­–ç•¥</th><th>åŸå› </th></tr></thead><tbody><tr><td><strong>å›¢é˜Ÿåä½œé¡¹ç›®</strong></td><td>Merge</td><td>å®‰å…¨ã€å¯é ã€ä¿ç•™å®Œæ•´å†å²</td></tr><tr><td><strong>ä¸ªäººåŠŸèƒ½åˆ†æ”¯</strong></td><td>Rebase</td><td>ä¿æŒå†å²çº¿æ€§ã€æäº¤å‰æ•´ç†</td></tr><tr><td><strong>ä¸¥æ ¼æµç¨‹æ§åˆ¶</strong></td><td>Fast-forward Only</td><td>å¼ºåˆ¶è§„èŒƒã€ä¿æŒä¸»åˆ†æ”¯å¹²å‡€</td></tr><tr><td><strong>çµæ´»éœ€æ±‚</strong></td><td>ä¸é…ç½®</td><td>æ ¹æ®æƒ…å†µæ‰‹åŠ¨é€‰æ‹©</td></tr></tbody></table>
<h3 data-id="heading-39">æ ¸å¿ƒè¦ç‚¹</h3>
<ol>
<li><strong>å›¢é˜Ÿåä½œä¼˜å…ˆä½¿ç”¨ Merge</strong>ï¼šæœ€å®‰å…¨å¯é ï¼Œé€‚åˆå¤§å¤šæ•°åœºæ™¯</li>
<li><strong>Rebase ä»…ç”¨äºæœªæ¨é€çš„æäº¤</strong>ï¼šé¿å…å½±å“å…¶ä»–å¼€å‘è€…</li>
<li><strong>Fast-forward Only éœ€è¦é…åˆæµç¨‹</strong>ï¼šç¡®ä¿å›¢é˜Ÿæœ‰æ˜ç¡®çš„å·¥ä½œè§„èŒƒ</li>
<li><strong>å¯ä»¥ä¸´æ—¶è¦†ç›–é…ç½®</strong>ï¼šæ ¹æ®å…·ä½“æƒ…å†µçµæ´»è°ƒæ•´</li>
</ol>
<h3 data-id="heading-40">æœ€ä½³å®è·µ</h3>
<ul>
<li>âœ… å›¢é˜Ÿé¡¹ç›®ç»Ÿä¸€ä½¿ç”¨ Merge ç­–ç•¥</li>
<li>âœ… ä¸ªäººåˆ†æ”¯å¯ä»¥ä½¿ç”¨ Rebase æ•´ç†æäº¤</li>
<li>âœ… ä¸»åˆ†æ”¯ä½¿ç”¨ Fast-forward Only ä¿æŒä¸¥æ ¼æ€§</li>
<li>âœ… é…ç½®å†™å…¥é¡¹ç›®æ–‡æ¡£ï¼Œç¡®ä¿å›¢é˜Ÿæˆå‘˜äº†è§£</li>
</ul>
<p>å¸Œæœ›æœ¬æ–‡èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å’Œä½¿ç”¨ Git çš„ pull ç­–ç•¥ï¼Œé€‰æ‹©æœ€é€‚åˆä½ é¡¹ç›®éœ€æ±‚çš„æ–¹æ¡ˆï¼</p>
<hr/>
<h2 data-id="heading-41">å‚è€ƒèµ„æº</h2>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgit-scm.com%2Fdocs%2Fgit-pull" target="_blank" title="https://git-scm.com/docs/git-pull" ref="nofollow noopener noreferrer">Git å®˜æ–¹æ–‡æ¡£ - git-pull</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgit-scm.com%2Fdocs%2Fgit-config" target="_blank" title="https://git-scm.com/docs/git-config" ref="nofollow noopener noreferrer">Git å®˜æ–¹æ–‡æ¡£ - git-config</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgit-scm.com%2Fbook%2Fzh%2Fv2%2FGit-%25E5%2588%2586%25E6%2594%25AF-%25E5%2588%2586%25E6%2594%25AF%25E7%259A%2584%25E6%2596%25B0%25E5%25BB%25BA%25E4%25B8%258E%25E5%2590%2588%25E5%25B9%25B6" target="_blank" title="https://git-scm.com/book/zh/v2/Git-%E5%88%86%E6%94%AF-%E5%88%86%E6%94%AF%E7%9A%84%E6%96%B0%E5%BB%BA%E4%B8%8E%E5%90%88%E5%B9%B6" ref="nofollow noopener noreferrer">Pro Git ä¹¦ç± - åˆ†æ”¯çš„åˆå¹¶</a></li>
</ul>
<hr/>
<p>å¦‚æœä½ è§‰å¾—è¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©ï¼Œæ¬¢è¿ç‚¹èµã€æ”¶è—å’Œåˆ†äº«ï¼å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºè®¨è®ºã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[openEuler AI å¼€å‘ç¯å¢ƒæ­å»º - Python/Anaconda/Jupyter å®Œæ•´æŒ‡å—]]></title>    <link>https://juejin.cn/post/7580263284336476201</link>    <guid>https://juejin.cn/post/7580263284336476201</guid>    <pubDate>2025-12-05T16:12:22.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7580263284336476201" data-draft-id="7580263284336459817" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="openEuler AI å¼€å‘ç¯å¢ƒæ­å»º - Python/Anaconda/Jupyter å®Œæ•´æŒ‡å—"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-05T16:12:22.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°é­”å¥³åƒåƒé±¼"/> <meta itemprop="url" content="https://juejin.cn/user/4253360991250333"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            openEuler AI å¼€å‘ç¯å¢ƒæ­å»º - Python/Anaconda/Jupyter å®Œæ•´æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4253360991250333/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°é­”å¥³åƒåƒé±¼
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-05T16:12:22.000Z" title="Fri Dec 05 2025 16:12:22 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-05
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>åœ¨äººå·¥æ™ºèƒ½å¿«é€Ÿå‘å±•çš„ä»Šå¤©ï¼Œæ­å»ºä¸€ä¸ªç¨³å®šã€é«˜æ•ˆçš„ AI å¼€å‘ç¯å¢ƒæ˜¯æ¯ä¸ªå¼€å‘è€…çš„å¿…å¤‡æŠ€èƒ½ã€‚æœ¬æ–‡å°†å¸¦ä½ åœ¨ openEuler 25.09 æ“ä½œç³»ç»Ÿä¸Šä»é›¶å¼€å§‹æ­å»ºå®Œæ•´çš„ AI å¼€å‘ç¯å¢ƒã€‚
é‡è¦æç¤ºï¼šæœ¬æ•™ç¨‹ä¸“é—¨é’ˆå¯¹ openEuler 25.09 ç‰ˆæœ¬ç¼–å†™ï¼Œé•œåƒæºé…ç½®å·²é’ˆå¯¹è¯¥ç‰ˆæœ¬ä¼˜åŒ–ã€‚</p>
<h3 data-id="heading-1">ä¸ºä»€ä¹ˆé€‰æ‹© openEulerï¼Ÿ</h3>
<p>openEuler æ˜¯ä¸€æ¬¾å¼€æºã€å…è´¹çš„ä¼ä¸šçº§ æ“ä½œç³»ç»Ÿï¼Œå…·æœ‰ä»¥ä¸‹æ˜¾è‘—ä¼˜åŠ¿ï¼š
âœ… æ€§èƒ½å“è¶Š - é’ˆå¯¹ ARM å’Œ x86 æ¶æ„æ·±åº¦ä¼˜åŒ–ï¼ŒAI è®¡ç®—æ€§èƒ½è¡¨ç°å‡ºè‰²
âœ… ç¨³å®šå¯é  - ä¼ä¸šçº§å†…æ ¸ï¼Œé•¿æœŸæ”¯æŒç‰ˆæœ¬ï¼ˆLTSï¼‰ä¿è¯ç³»ç»Ÿç¨³å®šæ€§
âœ… ç”Ÿæ€ä¸°å¯Œ - å®Œç¾æ”¯æŒä¸»æµ AI æ¡†æ¶ï¼ˆTensorFlowã€PyTorchã€PaddlePaddleï¼‰
âœ… åŒ…ç®¡ç†å…ˆè¿› - dnf/yum åŒ…ç®¡ç†å™¨ï¼Œè½¯ä»¶å®‰è£…ä¾¿æ·é«˜æ•ˆ</p>
<h3 data-id="heading-2">å®éªŒç¯å¢ƒ</h3>
<ul>
<li>æ“ä½œç³»ç»Ÿ: openEuler 25.09 (æ–°ç‰ˆ)</li>
<li>ISO æ–‡ä»¶: openEuler-25.09-x86_64-dvd.iso</li>
<li>ç¡¬ä»¶é…ç½®:
<ul>
<li>CPU: 2æ ¸åŠä»¥ä¸Š</li>
<li>å†…å­˜: 4GB åŠä»¥ä¸Šï¼ˆæ¨è 6GBï¼‰</li>
<li>ç¡¬ç›˜: 40GB å¯ç”¨ç©ºé—´</li>
</ul>
</li>
<li>ç½‘ç»œ: èƒ½å¤Ÿè®¿é—®äº’è”ç½‘</li>
<li>æƒé™: å…·æœ‰ sudo æƒé™çš„æ™®é€šç”¨æˆ·</li>
</ul>
<hr/>
<h2 data-id="heading-3">ä¸€ã€ç³»ç»Ÿå‡†å¤‡ä¸åŸºç¡€ç¯å¢ƒé…ç½®</h2>
<p>åœ¨å¼€å§‹æ­å»º AI å¼€å‘ç¯å¢ƒä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆå‡†å¤‡å¥½ openEuler ç³»ç»Ÿçš„åŸºç¡€ç¯å¢ƒã€‚</p>
<h3 data-id="heading-4">1.1 ç³»ç»Ÿæ›´æ–°ä¸å¼€å‘å·¥å…·å®‰è£…</h3>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦æ›´æ–°ç³»ç»Ÿå¹¶å®‰è£…ç¼–è¯‘ Python æ‰€éœ€çš„å¼€å‘å·¥å…·åŒ…ã€‚
<strong>æ­¥éª¤ 1ï¼šæ£€æŸ¥ç³»ç»Ÿç‰ˆæœ¬</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æŸ¥çœ‹ç³»ç»Ÿç‰ˆæœ¬</span>
<span class="hljs-built_in">cat</span> /etc/os-release

<span class="hljs-comment"># æŸ¥çœ‹å†…æ ¸ç‰ˆæœ¬</span>
<span class="hljs-built_in">uname</span> -r
</code></pre>
<p><strong>æ­¥éª¤ 2ï¼šæ›´æ–°ç³»ç»Ÿè½¯ä»¶åŒ…</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ›´æ–°è½¯ä»¶åŒ…ç´¢å¼•</span>
sudo dnf makecache

<span class="hljs-comment"># æ›´æ–°æ‰€æœ‰å·²å®‰è£…çš„è½¯ä»¶åŒ…</span>
sudo dnf update -y
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4310dcbc313a4e6394978a0ea27c177f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP6a2U5aWz5Y2D5Y2D6bG8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765555941&amp;x-signature=F85VIOHyKXF7rTpRJA3euc4ZP%2Bk%3D" alt="image.png" loading="lazy"/></p>
<p><strong>è¯´æ˜</strong>ï¼šdnf æ˜¯ openEuler çš„åŒ…ç®¡ç†å™¨ã€‚makecache å‘½ä»¤ä¼šåˆ·æ–°è½¯ä»¶æºç¼“å­˜ï¼Œupdate -y ä¼šè‡ªåŠ¨ç¡®è®¤æ›´æ–°æ‰€æœ‰è½¯ä»¶åŒ…ã€‚è¿™ä¸ªè¿‡ç¨‹å¯èƒ½éœ€è¦ 3-5 åˆ†é’Ÿï¼Œå–å†³äºä½ çš„ç½‘ç»œé€Ÿåº¦ã€‚
<strong>æ­¥éª¤ 3ï¼šå®‰è£…å¼€å‘å·¥å…·ç»„</strong></p>
<pre><code class="hljs language-perl" lang="perl"><span class="hljs-comment"># å®‰è£…å¼€å‘å·¥å…·ç»„ï¼ˆåŒ…å« gccã€g++ã€make ç­‰ï¼‰</span>
sudo dnf groupinstall <span class="hljs-string">"Development Tools"</span> -<span class="hljs-keyword">y</span>

<span class="hljs-comment"># å®‰è£… Python ç¼–è¯‘æ‰€éœ€çš„ä¾èµ–åº“</span>
sudo dnf install -<span class="hljs-keyword">y</span> \\
    zlib-devel \\
    bzip2-devel \\
    openssl-devel \\
    ncurses-devel \\
    sqlite-devel \\
    <span class="hljs-keyword">readline</span>-devel \\
    tk-devel \\
    gdbm-devel \\
    libffi-devel \\
    xz-devel \\
    libuuid-devel \\
    wget \\
    curl \\
    git \\
    vim
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/040e29d7c57a49daa73f882c82812cf6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP6a2U5aWz5Y2D5Y2D6bG8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765555941&amp;x-signature=z2AiFnnBVqp0xK0waDZMO4D%2BNFI%3D" alt="image.png" loading="lazy"/></p>
<p><strong>è¯´æ˜</strong>ï¼š</p>
<ul>
<li>Development Tools æ˜¯ä¸€ä¸ªè½¯ä»¶åŒ…ç»„ï¼ŒåŒ…å«äº†ç¼–è¯‘è½¯ä»¶æ‰€éœ€çš„åŸºç¡€å·¥å…·</li>
<li>åé¢åˆ—å‡ºçš„åº“éƒ½æ˜¯ç¼–è¯‘ Python æ—¶å¿…éœ€çš„ä¾èµ–</li>
<li>\ ç¬¦å·è¡¨ç¤ºå‘½ä»¤æ¢è¡Œï¼Œå¯ä»¥è®©é•¿å‘½ä»¤æ›´æ˜“è¯»</li>
<li>è¿™ä¸ªå®‰è£…è¿‡ç¨‹å¤§çº¦éœ€è¦ 2-3 åˆ†é’Ÿ
<strong>æ­¥éª¤ 4ï¼šéªŒè¯å®‰è£…</strong></li>
</ul>

<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ£€æŸ¥ gcc ç‰ˆæœ¬</span>
gcc --version

<span class="hljs-comment"># æ£€æŸ¥ git ç‰ˆæœ¬</span>
git --version

<span class="hljs-comment"># æ£€æŸ¥ curl ç‰ˆæœ¬</span>
curl --version
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ead345a750fe4055a0a958b4fe64034c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP6a2U5aWz5Y2D5Y2D6bG8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765555941&amp;x-signature=sNwTNWbsD%2FcTiLDbM3iofdAzshs%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-5">1.2 é…ç½®å›½å†…é•œåƒæºåŠ é€Ÿï¼ˆopenEuler 25.09 ä¸“ç”¨ï¼‰</h3>
<p>ä¸ºäº†æé«˜è½¯ä»¶ä¸‹è½½é€Ÿåº¦ï¼Œæˆ‘ä»¬é…ç½®å›½å†…çš„é•œåƒæºã€‚
é‡è¦æç¤ºï¼šopenEuler 25.09 æ˜¯åˆ›æ–°ç‰ˆæœ¬ï¼Œéƒ¨åˆ†å›½å†…é•œåƒæºå¯èƒ½å°šæœªå®Œå…¨åŒæ­¥ã€‚ï¿½ï¿½ï¿½ä»¬æä¾›å¤šä¸ªé•œåƒæºæ–¹æ¡ˆä¾›é€‰æ‹©ã€‚
å£°æ˜ï¼š
ä»¥ä¸‹æ–¹æ³•é€‰æ‹©ä¸€ä¸ªå°±è¡Œ å› ä¸ºå¾ˆå¤šæºæœ‰æ—¶å€™é“¾æ¥ä¸ä¸Š æˆ‘éƒ½æ”¾åœ¨ä¸‹æ–¹è®©å¤§å®¶å»è¯•è¯•</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/afeef2ec881a4fc5bb524f2ed57fb75b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP6a2U5aWz5Y2D5Y2D6bG8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765555941&amp;x-signature=UzxWIvsu49na1Q6c2KBw2SGV6BA%3D" alt="image.png" loading="lazy"/></p>
<p><strong>æ–¹æ¡ˆä¸€ï¼šä½¿ç”¨åä¸ºäº‘é•œåƒæºï¼ˆæ¨èï¼‰</strong></p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># å¤‡ä»½åŸæœ‰çš„ repo é…ç½®</span>
sudo cp -r /etc/yum.repos.d /etc/yum.repos.d.backup

<span class="hljs-comment"># åˆ›å»ºæ–°çš„é…ç½®æ–‡ä»¶</span>
sudo tee /etc/yum.repos.d/openEuler.repo &gt; /dev/null &lt;&lt;'EOF'
<span class="hljs-section">[OS]</span>
<span class="hljs-attr">name</span>=OS
<span class="hljs-attr">baseurl</span>=https://repo.huaweicloud.com/openeuler/openEuler-<span class="hljs-number">25.09</span>/OS/<span class="hljs-variable">$basearch</span>/
<span class="hljs-attr">enabled</span>=<span class="hljs-number">1</span>
<span class="hljs-attr">gpgcheck</span>=<span class="hljs-number">1</span>
<span class="hljs-attr">gpgkey</span>=https://repo.huaweicloud.com/openeuler/openEuler-<span class="hljs-number">25.09</span>/OS/<span class="hljs-variable">$basearch</span>/RPM-GPG-KEY-openEuler

<span class="hljs-section">[everything]</span>
<span class="hljs-attr">name</span>=everything
<span class="hljs-attr">baseurl</span>=https://repo.huaweicloud.com/openeuler/openEuler-<span class="hljs-number">25.09</span>/everything/<span class="hljs-variable">$basearch</span>/
<span class="hljs-attr">enabled</span>=<span class="hljs-number">1</span>
<span class="hljs-attr">gpgcheck</span>=<span class="hljs-number">1</span>
<span class="hljs-attr">gpgkey</span>=https://repo.huaweicloud.com/openeuler/openEuler-<span class="hljs-number">25.09</span>/everything/<span class="hljs-variable">$basearch</span>/RPM-GPG-KEY-openEuler

<span class="hljs-section">[EPOL]</span>
<span class="hljs-attr">name</span>=EPOL
<span class="hljs-attr">baseurl</span>=https://repo.huaweicloud.com/openeuler/openEuler-<span class="hljs-number">25.09</span>/EPOL/main/<span class="hljs-variable">$basearch</span>/
<span class="hljs-attr">enabled</span>=<span class="hljs-number">1</span>
<span class="hljs-attr">gpgcheck</span>=<span class="hljs-number">1</span>
<span class="hljs-attr">gpgkey</span>=https://repo.huaweicloud.com/openeuler/openEuler-<span class="hljs-number">25.09</span>/OS/<span class="hljs-variable">$basearch</span>/RPM-GPG-KEY-openEuler

<span class="hljs-section">[update]</span>
<span class="hljs-attr">name</span>=update
<span class="hljs-attr">baseurl</span>=https://repo.huaweicloud.com/openeuler/openEuler-<span class="hljs-number">25.09</span>/update/<span class="hljs-variable">$basearch</span>/
<span class="hljs-attr">enabled</span>=<span class="hljs-number">1</span>
<span class="hljs-attr">gpgcheck</span>=<span class="hljs-number">1</span>
<span class="hljs-attr">gpgkey</span>=https://repo.huaweicloud.com/openeuler/openEuler-<span class="hljs-number">25.09</span>/OS/<span class="hljs-variable">$basearch</span>/RPM-GPG-KEY-openEuler
EOF
</code></pre>
<p><strong>æ–¹æ¡ˆäºŒï¼šä½¿ç”¨æ¸…åå¤§å­¦é•œåƒæº</strong></p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># å¤‡ä»½åŸæœ‰çš„ repo é…ç½®</span>
sudo cp -r /etc/yum.repos.d /etc/yum.repos.d.backup

<span class="hljs-comment"># åˆ›å»ºæ–°çš„é…ç½®æ–‡ä»¶</span>
sudo tee /etc/yum.repos.d/openEuler.repo &gt; /dev/null &lt;&lt;'EOF'
<span class="hljs-section">[OS]</span>
<span class="hljs-attr">name</span>=OS
<span class="hljs-attr">baseurl</span>=https://mirrors.tuna.tsinghua.edu.cn/openeuler/openEuler-<span class="hljs-number">25.09</span>/OS/<span class="hljs-variable">$basearch</span>/
<span class="hljs-attr">enabled</span>=<span class="hljs-number">1</span>
<span class="hljs-attr">gpgcheck</span>=<span class="hljs-number">1</span>
<span class="hljs-attr">gpgkey</span>=https://mirrors.tuna.tsinghua.edu.cn/openeuler/openEuler-<span class="hljs-number">25.09</span>/OS/<span class="hljs-variable">$basearch</span>/RPM-GPG-KEY-openEuler

<span class="hljs-section">[everything]</span>
<span class="hljs-attr">name</span>=everything
<span class="hljs-attr">baseurl</span>=https://mirrors.tuna.tsinghua.edu.cn/openeuler/openEuler-<span class="hljs-number">25.09</span>/everything/<span class="hljs-variable">$basearch</span>/
<span class="hljs-attr">enabled</span>=<span class="hljs-number">1</span>
<span class="hljs-attr">gpgcheck</span>=<span class="hljs-number">1</span>
<span class="hljs-attr">gpgkey</span>=https://mirrors.tuna.tsinghua.edu.cn/openeuler/openEuler-<span class="hljs-number">25.09</span>/everything/<span class="hljs-variable">$basearch</span>/RPM-GPG-KEY-openEuler

<span class="hljs-section">[EPOL]</span>
<span class="hljs-attr">name</span>=EPOL
<span class="hljs-attr">baseurl</span>=https://mirrors.tuna.tsinghua.edu.cn/openeuler/openEuler-<span class="hljs-number">25.09</span>/EPOL/main/<span class="hljs-variable">$basearch</span>/
<span class="hljs-attr">enabled</span>=<span class="hljs-number">1</span>
<span class="hljs-attr">gpgcheck</span>=<span class="hljs-number">1</span>
<span class="hljs-attr">gpgkey</span>=https://mirrors.tuna.tsinghua.edu.cn/openeuler/openEuler-<span class="hljs-number">25.09</span>/OS/<span class="hljs-variable">$basearch</span>/RPM-GPG-KEY-openEuler

<span class="hljs-section">[update]</span>
<span class="hljs-attr">name</span>=update
<span class="hljs-attr">baseurl</span>=https://mirrors.tuna.tsinghua.edu.cn/openeuler/openEuler-<span class="hljs-number">25.09</span>/update/<span class="hljs-variable">$basearch</span>/
<span class="hljs-attr">enabled</span>=<span class="hljs-number">1</span>
<span class="hljs-attr">gpgcheck</span>=<span class="hljs-number">1</span>
<span class="hljs-attr">gpgkey</span>=https://mirrors.tuna.tsinghua.edu.cn/openeuler/openEuler-<span class="hljs-number">25.09</span>/OS/<span class="hljs-variable">$basearch</span>/RPM-GPG-KEY-openEuler
EOF
</code></pre>
<p><strong>æ–¹æ¡ˆä¸‰ï¼šä½¿ç”¨é˜¿é‡Œäº‘é•œåƒæº</strong></p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># å¤‡ä»½åŸæœ‰çš„ repo é…ç½®</span>
sudo cp -r /etc/yum.repos.d /etc/yum.repos.d.backup

<span class="hljs-comment"># åˆ›å»ºæ–°çš„é…ç½®æ–‡ä»¶</span>
sudo tee /etc/yum.repos.d/openEuler.repo &gt; /dev/null &lt;&lt;'EOF'
<span class="hljs-section">[OS]</span>
<span class="hljs-attr">name</span>=OS
<span class="hljs-attr">baseurl</span>=https://mirrors.aliyun.com/openeuler/openEuler-<span class="hljs-number">25.09</span>/OS/<span class="hljs-variable">$basearch</span>/
<span class="hljs-attr">enabled</span>=<span class="hljs-number">1</span>
<span class="hljs-attr">gpgcheck</span>=<span class="hljs-number">1</span>
<span class="hljs-attr">gpgkey</span>=https://mirrors.aliyun.com/openeuler/openEuler-<span class="hljs-number">25.09</span>/OS/<span class="hljs-variable">$basearch</span>/RPM-GPG-KEY-openEuler

<span class="hljs-section">[everything]</span>
<span class="hljs-attr">name</span>=everything
<span class="hljs-attr">baseurl</span>=https://mirrors.aliyun.com/openeuler/openEuler-<span class="hljs-number">25.09</span>/everything/<span class="hljs-variable">$basearch</span>/
<span class="hljs-attr">enabled</span>=<span class="hljs-number">1</span>
<span class="hljs-attr">gpgcheck</span>=<span class="hljs-number">1</span>
<span class="hljs-attr">gpgkey</span>=https://mirrors.aliyun.com/openeuler/openEuler-<span class="hljs-number">25.09</span>/everything/<span class="hljs-variable">$basearch</span>/RPM-GPG-KEY-openEuler

<span class="hljs-section">[EPOL]</span>
<span class="hljs-attr">name</span>=EPOL
<span class="hljs-attr">baseurl</span>=https://mirrors.aliyun.com/openeuler/openEuler-<span class="hljs-number">25.09</span>/EPOL/main/<span class="hljs-variable">$basearch</span>/
<span class="hljs-attr">enabled</span>=<span class="hljs-number">1</span>
<span class="hljs-attr">gpgcheck</span>=<span class="hljs-number">1</span>
<span class="hljs-attr">gpgkey</span>=https://mirrors.aliyun.com/openeuler/openEuler-<span class="hljs-number">25.09</span>/OS/<span class="hljs-variable">$basearch</span>/RPM-GPG-KEY-openEuler

<span class="hljs-section">[update]</span>
<span class="hljs-attr">name</span>=update
<span class="hljs-attr">baseurl</span>=https://mirrors.aliyun.com/openeuler/openEuler-<span class="hljs-number">25.09</span>/update/<span class="hljs-variable">$basearch</span>/
<span class="hljs-attr">enabled</span>=<span class="hljs-number">1</span>
<span class="hljs-attr">gpgcheck</span>=<span class="hljs-number">1</span>
<span class="hljs-attr">gpgkey</span>=https://mirrors.aliyun.com/openeuler/openEuler-<span class="hljs-number">25.09</span>/OS/<span class="hljs-variable">$basearch</span>/RPM-GPG-KEY-openEuler
EOF
</code></pre>
<p><strong>æ­¥éª¤ï¼šæ¸…é™¤ç¼“å­˜å¹¶æµ‹è¯•</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># æ¸…é™¤æ—§çš„ç¼“å­˜</span>
sudo dnf clean <span class="hljs-built_in">all</span>

<span class="hljs-comment"># ç”Ÿæˆæ–°çš„ç¼“å­˜</span>
sudo dnf makecache

<span class="hljs-comment"># æµ‹è¯•é•œåƒæº</span>
sudo dnf repolist
</code></pre>
<p>ä½ åº”è¯¥çœ‹åˆ°ç±»ä¼¼è¿™æ ·çš„è¾“å‡ºï¼š</p>
<pre><code class="hljs language-sql" lang="sql">[root<span class="hljs-variable">@openEuler</span> redis]# sudo dnf repolist
repo id                                                                          repo name
EPOL                                                                             EPOL
OS                                                                               OS
everything                                                                       everything
mysql57                                                                          MySQL <span class="hljs-number">5.7</span> <span class="hljs-keyword">Local</span> Repository <span class="hljs-keyword">for</span> openEuler
<span class="hljs-keyword">update</span>                                                                           <span class="hljs-keyword">update</span>
</code></pre>
<p><strong>æ•…éšœæ’æŸ¥</strong>ï¼š</p>
<ul>
<li>å¦‚æœé‡åˆ° 403 é”™è¯¯ï¼Œè¯´æ˜è¯¥é•œåƒæºå°šæœªåŒæ­¥ openEuler 25.09ï¼Œè¯·å°è¯•å…¶ä»–é•œåƒæº</li>
<li>å¦‚æœé‡åˆ° 404 é”™è¯¯ï¼Œè¯´æ˜è·¯å¾„ä¸å­˜åœ¨ï¼Œæ£€æŸ¥ç‰ˆæœ¬å·æ˜¯å¦æ­£ç¡®</li>
<li>åä¸ºäº‘é•œåƒæºé€šå¸¸æ˜¯æœ€æ–°æœ€å…¨çš„ï¼Œå»ºè®®ä¼˜å…ˆä½¿ç”¨
<strong>æ­¥éª¤ï¼šç¦ç”¨ GPG æ£€æŸ¥ï¼ˆå¦‚æœé‡åˆ° GPG å¯†é’¥é—®é¢˜ï¼‰</strong></li>
</ul>

<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å¦‚æœé‡åˆ° GPG å¯†é’¥éªŒè¯å¤±è´¥ï¼Œå¯ä»¥ä¸´æ—¶ç¦ç”¨</span>
sudo sed -i <span class="hljs-string">'s/gpgcheck=1/gpgcheck=0/g'</span> /etc/yum.repos.d/openEuler.repo

<span class="hljs-comment"># é‡æ–°ç”Ÿæˆç¼“å­˜</span>
sudo dnf clean all
sudo dnf makecache
</code></pre>
<p><strong>å®‰å…¨æç¤º</strong>ï¼šç¦ç”¨ GPG æ£€æŸ¥ä¼šé™ä½å®‰å…¨æ€§ï¼Œä»…åœ¨æµ‹è¯•ç¯å¢ƒæˆ–æ— æ³•è·å–å¯†é’¥æ—¶ä½¿ç”¨ã€‚</p>
<hr/>
<h2 data-id="heading-6">äºŒã€Python å¤šç‰ˆæœ¬ç®¡ç†ç¯å¢ƒæ­å»º</h2>
<p>åœ¨ AI å¼€å‘ä¸­ï¼Œä¸åŒé¡¹ç›®å¯èƒ½éœ€è¦ä¸åŒç‰ˆæœ¬çš„ Pythonã€‚ä½¿ç”¨ pyenv å¯ä»¥è½»æ¾ç®¡ç†å¤šä¸ª Python ç‰ˆæœ¬ã€‚</p>
<h3 data-id="heading-7">2.1 å®‰è£…å’Œé…ç½® pyenv</h3>
<p>pyenv æ˜¯ä¸€ä¸ªä¼˜ç§€çš„ Python ç‰ˆæœ¬ç®¡ç†å·¥å…·ã€‚
<strong>æ­¥éª¤ 1ï¼šä½¿ç”¨è‡ªåŠ¨å®‰è£…è„šæœ¬å®‰è£… pyenv</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä¸‹è½½å¹¶æ‰§è¡Œ pyenv å®‰è£…è„šæœ¬</span>
curl https://pyenv.run | bash
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1165ebab3a4a45f8a95a9199a0b3c3d5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP6a2U5aWz5Y2D5Y2D6bG8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765555941&amp;x-signature=qTHVqJ%2F6i5Kq9fB5K7inRguh1bI%3D" alt="image.png" loading="lazy"/></p>
<p><strong>è¯´æ˜</strong>ï¼šè¿™ä¸ªè„šæœ¬ä¼šè‡ªåŠ¨ä¸‹è½½ pyenv åŠå…¶æ’ä»¶åˆ° ~/.pyenv ç›®å½•ã€‚å®‰è£…è¿‡ç¨‹å¤§çº¦éœ€è¦ 1-2 åˆ†é’Ÿã€‚
<strong>æ­¥éª¤ 2ï¼šé…ç½®ç¯å¢ƒå˜é‡</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ£€æŸ¥å½“å‰ä½¿ç”¨çš„ Shell</span>
<span class="hljs-built_in">echo</span> <span class="hljs-variable">$SHELL</span>

<span class="hljs-comment"># å¦‚æœæ˜¯ bashï¼ˆå¤§å¤šæ•°æƒ…å†µï¼‰</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">'export PYENV_ROOT="$HOME/.pyenv"'</span> &gt;&gt; ~/.bashrc
<span class="hljs-built_in">echo</span> <span class="hljs-string">'export PATH="$PYENV_ROOT/bin:$PATH"'</span> &gt;&gt; ~/.bashrc
<span class="hljs-built_in">echo</span> <span class="hljs-string">'eval "$(pyenv init --path)"'</span> &gt;&gt; ~/.bashrc
<span class="hljs-built_in">echo</span> <span class="hljs-string">'eval "$(pyenv init -)"'</span> &gt;&gt; ~/.bashrc

<span class="hljs-comment"># é‡æ–°åŠ è½½é…ç½®æ–‡ä»¶</span>
<span class="hljs-built_in">source</span> ~/.bashrc
</code></pre>
<p><strong>è¯´æ˜</strong>ï¼š</p>
<ul>
<li>PYENV_ROOT æŒ‡å®š pyenv çš„å®‰è£…ç›®å½•</li>
<li>PATH æ·»åŠ  pyenv çš„å¯æ‰§è¡Œæ–‡ä»¶è·¯å¾„</li>
<li>pyenv init åˆå§‹åŒ– pyenv ç¯å¢ƒ
<strong>æ­¥éª¤ 3ï¼šéªŒè¯ pyenv å®‰è£…</strong></li>
</ul>

<pre><code class="hljs language-perl" lang="perl"><span class="hljs-comment"># æŸ¥çœ‹ pyenv ç‰ˆæœ¬</span>
pyenv --version

<span class="hljs-comment"># æŸ¥çœ‹å¯å®‰è£…çš„ Python ç‰ˆæœ¬ï¼ˆåˆ—å‡ºéƒ¨åˆ†ï¼‰</span>
pyenv install --list | <span class="hljs-keyword">grep</span> <span class="hljs-string">"  3\\.[89]"</span>
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/10e938046cf44b8fb9fd689f3cfaa0c1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP6a2U5aWz5Y2D5Y2D6bG8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765555941&amp;x-signature=C9xeIDYjmz6SbxnopYq2RtOCuRU%3D" alt="image.png" loading="lazy"/></p>
<p><strong>æ­¥éª¤ 4ï¼šé…ç½® pyenv ä½¿ç”¨å›½å†…é•œåƒåŠ é€Ÿ</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åˆ›å»º pyenv ç¼“å­˜ç›®å½•</span>
<span class="hljs-built_in">mkdir</span> -p ~/.pyenv/cache

<span class="hljs-comment"># é…ç½®ä½¿ç”¨æ·˜å®é•œåƒï¼ˆæ¨èï¼‰</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">'export PYTHON_BUILD_MIRROR_URL="https://registry.npmmirror.com/-/binary/python/"'</span> &gt;&gt; ~/.bashrc
<span class="hljs-built_in">source</span> ~/.bashrc
</code></pre>
<p><strong>è¯´æ˜</strong>ï¼šä½¿ç”¨å›½å†…é•œåƒå¯ä»¥å¤§å¤§åŠ å¿« Python çš„ä¸‹è½½é€Ÿåº¦ã€‚</p>
<h3 data-id="heading-8">2.2 å®‰è£…å¤šä¸ª Python ç‰ˆæœ¬</h3>
<p>ç°åœ¨æˆ‘ä»¬å®‰è£…å‡ ä¸ªå¸¸ç”¨çš„ Python ç‰ˆæœ¬ã€‚
<strong>æ­¥éª¤ 1ï¼šå®‰è£… Python 3.10ï¼ˆæ¨èï¼‰</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å®‰è£… Python 3.10.13</span>
pyenv install 3.10.13
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6e09fa4d61b3465398687318c4764ccd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP6a2U5aWz5Y2D5Y2D6bG8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765555941&amp;x-signature=jaQ68uPfliTJm4bHy6oABITS3yI%3D" alt="image.png" loading="lazy"/></p>
<p><strong>è¯´æ˜</strong>ï¼š</p>
<ul>
<li>è¿™ä¸ªè¿‡ç¨‹ä¼šä¸‹è½½ Python æºä»£ç å¹¶ç¼–è¯‘ï¼Œå¤§çº¦éœ€è¦ 5-10 åˆ†é’Ÿ</li>
<li>ä½ ä¼šçœ‹åˆ°ç¼–è¯‘è¿‡ç¨‹çš„è¾“å‡ºä¿¡æ¯</li>
<li>å¦‚æœé‡åˆ°é”™è¯¯ï¼Œæ£€æŸ¥å‰é¢çš„ä¾èµ–åº“æ˜¯å¦éƒ½å·²å®‰è£…</li>
</ul>
<p><strong>æ­¥éª¤ 2ï¼šè®¾ç½®å…¨å±€é»˜è®¤ Python ç‰ˆæœ¬</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># è®¾ç½® Python 3.10 ä¸ºå…¨å±€é»˜è®¤ç‰ˆæœ¬</span>
pyenv global 3.10.13

<span class="hljs-comment"># éªŒè¯å½“å‰ Python ç‰ˆæœ¬</span>
python --version
python3 --version

<span class="hljs-comment"># æŸ¥çœ‹ Python è·¯å¾„</span>
<span class="hljs-built_in">which</span> python
</code></pre>
<p>ä½ åº”è¯¥çœ‹åˆ°ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/96b0e501600d4cb7b9c64be6743fa56a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP6a2U5aWz5Y2D5Y2D6bG8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765555941&amp;x-signature=W61YiLB%2BJ2bWs70orsHb44aMNKk%3D" alt="image.png" loading="lazy"/></p>
<p><strong>æ­¥éª¤ 3ï¼šé…ç½® pip ä½¿ç”¨å›½å†…é•œåƒ</strong></p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># åˆ›å»º pip é…ç½®ç›®å½•</span>
mkdir -p ~/.pip

<span class="hljs-comment"># é…ç½®ä½¿ç”¨æ¸…åå¤§å­¦ PyPI é•œåƒ</span>
cat &gt; ~/.pip/pip.conf &lt;&lt;'EOF'
<span class="hljs-section">[global]</span>
<span class="hljs-attr">index-url</span> = https://pypi.tuna.tsinghua.edu.cn/simple
<span class="hljs-attr">trusted-host</span> = pypi.tuna.tsinghua.edu.cn

<span class="hljs-section">[install]</span>
<span class="hljs-attr">trusted-host</span> = pypi.tuna.tsinghua.edu.cn
EOF

<span class="hljs-comment"># éªŒè¯é…ç½®</span>
pip config list
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/450115f6671b476380b2f75b57d4e43c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP6a2U5aWz5Y2D5Y2D6bG8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765555941&amp;x-signature=CQGerhNvsoedmpjTRhSKwok5Rj8%3D" alt="image.png" loading="lazy"/></p>
<p><strong>æ­¥éª¤ 4ï¼šå‡çº§ pip å’Œå®‰è£…åŸºç¡€å·¥å…·</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å‡çº§ pip åˆ°æœ€æ–°ç‰ˆæœ¬</span>
pip install --upgrade pip

<span class="hljs-comment"># å®‰è£…å¸¸ç”¨çš„ Python å·¥å…·</span>
pip install --upgrade setuptools wheel

<span class="hljs-comment"># éªŒè¯å®‰è£…</span>
pip --version
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7506977a188548a6b5312fbf429b806d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP6a2U5aWz5Y2D5Y2D6bG8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765555941&amp;x-signature=LFEYYc%2FJPGJbbQdjSS6zm48Sh0E%3D" alt="image.png" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-9">ä¸‰ã€Anaconda ç§‘å­¦è®¡ç®—ç¯å¢ƒéƒ¨ç½²</h2>
<p>Anaconda æ˜¯ä¸€ä¸ªä¸“ä¸ºç§‘å­¦è®¡ç®—å’Œæ•°æ®åˆ†æè®¾è®¡çš„ Python å‘è¡Œç‰ˆï¼Œéå¸¸é€‚åˆ AI å¼€å‘ã€‚</p>
<h3 data-id="heading-10">3.1 å®‰è£… Miniconda</h3>
<p>æˆ‘ä»¬é€‰æ‹©å®‰è£… Anaconda çš„è½»é‡çº§ç‰ˆæœ¬ Minicondaã€‚
<strong>æ­¥éª¤ 1ï¼šä¸‹è½½ Miniconda å®‰è£…è„šæœ¬</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åˆ›å»ºä¸‹è½½ç›®å½•</span>
<span class="hljs-built_in">mkdir</span> -p ~/Downloads
<span class="hljs-built_in">cd</span> ~/Downloads

<span class="hljs-comment"># ä¸‹è½½ wget https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-x86_64.sh</span>
</code></pre>
<p>è¿™é‡Œæˆ‘è¯•è¿‡å¾ˆå¤šæºéƒ½æŠ¥é”™äº† å°±ç”¨æˆ‘ä¸Šè¾¹çš„å¯ä»¥</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d7b466d47b5244b5bc6b80d2f3ecf969~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP6a2U5aWz5Y2D5Y2D6bG8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765555941&amp;x-signature=WqGxoXWBjpbFOxt7IFNCjKecJNE%3D" alt="image.png" loading="lazy"/></p>
<p><strong>è¯´æ˜</strong>ï¼š</p>
<ul>
<li>ä½¿ç”¨æ¸…åé•œåƒä¸‹è½½é€Ÿåº¦å¾ˆå¿«ï¼Œæ–‡ä»¶å¤§å°çº¦ 90MB</li>
<li>ä¸‹è½½æ—¶é—´å¤§çº¦ 1-2 åˆ†é’Ÿ
<strong>æ­¥éª¤ 2ï¼šå®‰è£… Miniconda</strong></li>
</ul>

<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ·»åŠ æ‰§è¡Œæƒé™</span>
<span class="hljs-built_in">chmod</span> +x Miniconda3-latest-Linux-x86_64.sh

<span class="hljs-comment"># è¿è¡Œå®‰è£…è„šæœ¬</span>
bash Miniconda3-latest-Linux-x86_64.sh
</code></pre>
<p>å®‰è£…è¿‡ç¨‹ä¸­ä¼šå‡ºç°ä»¥ä¸‹æç¤ºï¼ŒæŒ‰ç…§è¯´æ˜æ“ä½œï¼š</p>
<ol>
<li>è®¸å¯åè®®ï¼šæŒ‰ Enter é”®æŸ¥çœ‹ï¼Œç„¶åè¾“å…¥ yes åŒæ„</li>
<li>å®‰è£…ä½ç½®ï¼šé»˜è®¤æ˜¯ ~/miniconda3ï¼Œç›´æ¥æŒ‰ Enter ç¡®è®¤</li>
<li>åˆå§‹åŒ– condaï¼šè¾“å…¥ yes è®©å®‰è£…ç¨‹åºè‡ªåŠ¨é…ç½®ç¯å¢ƒå˜é‡</li>
</ol>
<p>ä¸Šè¿°çš„ä¸‰ä¸ª yes å›è½¦ yes å¾ˆé‡è¦ è®°å¾—åˆ«å‡ºé”™</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dcb09c89c772405b847ac1fd7e51f7ff~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP6a2U5aWz5Y2D5Y2D6bG8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765555941&amp;x-signature=wUyd7Kuc3OmkUYvU2baW9WeLFMw%3D" alt="image.png" loading="lazy"/></p>
<p><strong>æ­¥éª¤ 3ï¼šæ¿€æ´» conda ç¯å¢ƒ</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># é‡æ–°åŠ è½½ shell é…ç½®</span>
<span class="hljs-built_in">source</span> ~/.bashrc

<span class="hljs-comment"># éªŒè¯ conda å®‰è£…</span>
conda --version

<span class="hljs-comment"># æŸ¥çœ‹ conda ä¿¡æ¯</span>
conda info
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0759fba17ddb4c11a98088214ae6076f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP6a2U5aWz5Y2D5Y2D6bG8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765555941&amp;x-signature=Wdz3gbLHfQwWDfyRjGZxRbf5kwo%3D" alt="image.png" loading="lazy"/></p>
<p><strong>æ­¥éª¤ 4ï¼šé…ç½® conda ä½¿ç”¨å›½å†…é•œåƒ</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># é…ç½®æ¸…åå¤§å­¦ Anaconda é•œåƒ</span>
<span class="hljs-built_in">cat</span> &gt; ~/.condarc &lt;&lt;<span class="hljs-string">'EOF'</span>
channels:
  - defaults
show_channel_urls: <span class="hljs-literal">true</span>
default_channels:
  - https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/main
  - https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/r
  - https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/msys2
custom_channels:
  conda-forge: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud
  pytorch: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud
EOF

<span class="hljs-comment"># æ¸…é™¤ç¼“å­˜</span>
conda clean -i

<span class="hljs-comment"># éªŒè¯é…ç½®</span>
<span class="hljs-built_in">cat</span> ~/.condarc
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5129feab94fc4a64927b90e7d78e782c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP6a2U5aWz5Y2D5Y2D6bG8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765555941&amp;x-signature=CpNX7hGtuoJ1Xpqmv6Tg%2FOf0fXo%3D" alt="image.png" loading="lazy"/></p>
<p><strong>æ­¥éª¤ 5ï¼šæ›´æ–° conda å’ŒåŸºç¡€åŒ…</strong></p>
<pre><code class="hljs language-r" lang="r"><span class="hljs-comment"># æ›´æ–° conda æœ¬èº«</span>
conda update <span class="hljs-operator">-</span>n base <span class="hljs-operator">-</span><span class="hljs-built_in">c</span> defaults conda <span class="hljs-operator">-</span>y

<span class="hljs-comment"># æ›´æ–°æ‰€æœ‰åŸºç¡€åŒ…</span>
conda update <span class="hljs-operator">-</span><span class="hljs-operator">-</span><span class="hljs-built_in">all</span> <span class="hljs-operator">-</span>y
</code></pre>
<p>è¿™äº›å›¾æˆ‘å°±ä¸åº”è¯¥æˆªå›¾äº† å¾ˆç®€å•çš„ æŒ‰ç…§æˆ‘çš„æ–¹å¼æ“ä½œå³å¯</p>
<h3 data-id="heading-11">3.2 åˆ›å»º AI å¼€å‘ç¯å¢ƒ</h3>
<p>ä½¿ç”¨ conda åˆ›å»ºç‹¬ç«‹çš„è™šæ‹Ÿç¯å¢ƒï¼Œå¯ä»¥é¿å…ä¸åŒé¡¹ç›®ä¹‹é—´çš„ä¾èµ–å†²çªã€‚
<strong>æ­¥éª¤ 1ï¼šåˆ›å»º AI å¼€å‘ç¯å¢ƒ</strong></p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># åˆ›å»ºåä¸º ai-dev çš„ç¯å¢ƒï¼Œä½¿ç”¨ Python 3.10</span>
conda create -n ai-dev <span class="hljs-attr">python</span>=<span class="hljs-number">3.10</span> -y

<span class="hljs-comment"># æ¿€æ´»ç¯å¢ƒ</span>
conda activate ai-dev

<span class="hljs-comment"># éªŒè¯ç¯å¢ƒ</span>
python --version
which python
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d2252512c2004e0c8ac391355b8502e7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP6a2U5aWz5Y2D5Y2D6bG8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765555941&amp;x-signature=n%2BMrL%2BzQL5YBV09zpH1gswgIyL0%3D" alt="image.png" loading="lazy"/></p>
<p>è¿™é‡Œæˆ‘ä¹Ÿæ˜¯é†‰äº† è§£å†³äº†å‡ ä¸ªå°æ—¶éƒ½æ²¡å¤„ç†
æˆ‘å»ºè®®ç”¨ pip å»å®‰è£… ä¸è¦ç”¨ conda å»å®‰è£…
<strong>æ­¥éª¤ 2ï¼šå®‰è£…å¸¸ç”¨ç§‘å­¦è®¡ç®—åº“</strong></p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-meta"># é…ç½® pip ä½¿ç”¨é˜¿é‡Œäº‘é•œåƒ</span>
pip config <span class="hljs-keyword">set</span> <span class="hljs-keyword">global</span>.index-url https:<span class="hljs-comment">//mirrors.aliyun.com/pypi/simple/</span>

<span class="hljs-meta"># å®‰è£…æ‰€æœ‰éœ€è¦çš„åº“</span>
pip install numpy pandas matplotlib scikit-learn jupyter

<span class="hljs-meta"># éªŒè¯å®‰è£…</span>
python -c <span class="hljs-string">"import numpy; import pandas; import matplotlib; import sklearn; print('âœ… æ‰€æœ‰åº“å®‰è£…æˆåŠŸï¼')"</span>
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bd96c3bfbb1440578626de41d5711446~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP6a2U5aWz5Y2D5Y2D6bG8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765555941&amp;x-signature=5Mdm5k1X6Styqv2XoV2dJ%2F4LtGE%3D" alt="image.png" loading="lazy"/></p>
<p>æ˜¾ç¤ºå…¨éƒ¨å®‰è£…æˆåŠŸ å°±ç®—å®Œæˆäº†</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/845ec2c6c72a4fd7abd2d0800775847b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP6a2U5aWz5Y2D5Y2D6bG8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765555941&amp;x-signature=FXEb%2F5zIyPWgwUq4tI5BxzON3lI%3D" alt="image.png" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-12">å››ã€Jupyter Notebook äº¤äº’å¼å¼€å‘ç¯å¢ƒ</h2>
<p>è¿™ä¸ªæ­¥éª¤ æˆ‘çš„è®¾å¤‡ æœ‰ç‚¹å°é—®é¢˜åšä¸äº†
Jupyter Notebook æ˜¯ AI å¼€å‘ä¸­æœ€å¸¸ç”¨çš„äº¤äº’å¼å¼€å‘å·¥å…·ã€‚</p>
<h3 data-id="heading-13">4.1 é…ç½® Jupyter Notebook</h3>
<p>æˆ‘ä»¬å°†é…ç½® Jupyter Notebookï¼Œä½¿å…¶æ”¯æŒè¿œç¨‹è®¿é—®å’Œå¯†ç ä¿æŠ¤ã€‚
<strong>æ­¥éª¤ 1ï¼šç”Ÿæˆ Jupyter é…ç½®æ–‡ä»¶</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ç¡®ä¿åœ¨ ai-dev ç¯å¢ƒä¸­</span>
conda activate ai-dev

<span class="hljs-comment"># ç”Ÿæˆé…ç½®æ–‡ä»¶</span>
jupyter notebook --generate-config
</code></pre>
<p><strong>æ­¥éª¤ 2ï¼šç”Ÿæˆè®¿é—®å¯†ç </strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä½¿ç”¨ Python ç”Ÿæˆå¯†ç å“ˆå¸Œ</span>
python -c <span class="hljs-string">"from jupyter_server.auth import passwd; print(passwd())"</span>
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1a1d1f4915b64869a6621c9606541595~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP6a2U5aWz5Y2D5Y2D6bG8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765555941&amp;x-signature=PcgvOEkPlRornkpqhGok0eGc3wo%3D" alt="image.png" loading="lazy"/></p>
<p>ç³»ç»Ÿä¼šæç¤ºä½ è¾“å…¥å¯†ç ï¼ˆè¾“å…¥æ—¶ä¸æ˜¾ç¤ºï¼‰ï¼Œç„¶åè¾“å‡ºå¯†ç å“ˆå¸Œå€¼ã€‚
<strong>æ­¥éª¤ 3ï¼šç¼–è¾‘ Jupyter é…ç½®æ–‡ä»¶</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä½¿ç”¨ vim ç¼–è¾‘é…ç½®æ–‡ä»¶</span>
vim ~/.jupyter/jupyter_notebook_config.py
</code></pre>
<p>åœ¨æ–‡ä»¶æœ«å°¾æ·»åŠ ä»¥ä¸‹é…ç½®ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># Jupyter Notebook é…ç½®</span>

<span class="hljs-comment"># å…è®¸è¿œç¨‹è®¿é—®</span>
<span class="hljs-attr">c.NotebookApp.ip</span> = <span class="hljs-string">'0.0.0.0'</span>

<span class="hljs-comment"># è®¾ç½®ç«¯å£</span>
<span class="hljs-attr">c.NotebookApp.port</span> = <span class="hljs-number">8888</span>

<span class="hljs-comment"># ä¸è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨</span>
<span class="hljs-attr">c.NotebookApp.open_browser</span> = <span class="hljs-literal">False</span>

<span class="hljs-comment"># è®¾ç½®å¯†ç ï¼ˆæ›¿æ¢ä¸ºä½ åˆšæ‰ç”Ÿæˆçš„å“ˆå¸Œå€¼ï¼‰</span>
<span class="hljs-attr">c.NotebookApp.password</span> = <span class="hljs-string">'argon2:$argon2id$v=19$m=10240,t=10,p=8$xxxxxxxxxxxxx'</span>

<span class="hljs-comment"># è®¾ç½®å·¥ä½œç›®å½•</span>
<span class="hljs-attr">c.NotebookApp.notebook_dir</span> = <span class="hljs-string">'/home/user/jupyter_notebooks'</span>

<span class="hljs-comment"># ç¦ç”¨ä»¤ç‰Œè®¤è¯ï¼ˆå·²ç»ä½¿ç”¨å¯†ç ï¼‰</span>
<span class="hljs-attr">c.NotebookApp.token</span> = <span class="hljs-string">''</span>
<span class="hljs-attr">c.NotebookApp.password_required</span> = <span class="hljs-literal">True</span>
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7b21983569294de9a1b4de6fa93902c8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP6a2U5aWz5Y2D5Y2D6bG8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765555941&amp;x-signature=%2FA37Yuytt1496N5oCoZT6W9uHUA%3D" alt="image.png" loading="lazy"/>
<strong>æ­¥éª¤ 4ï¼šåˆ›å»º Jupyter å·¥ä½œç›®å½•å¹¶å¯åŠ¨</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åˆ›å»ºå·¥ä½œç›®å½•</span>
<span class="hljs-built_in">mkdir</span> -p ~/jupyter_notebooks

<span class="hljs-comment"># è¿›å…¥ç›®å½•</span>
<span class="hljs-built_in">cd</span> ~/jupyter_notebooks

<span class="hljs-comment"># å¯åŠ¨ Jupyter Notebook</span>
jupyter notebook
</code></pre>
<p>è¿™æ ·è¡¨ç¤ºå¯åŠ¨æˆåŠŸ ç»¿è‰² å¦‚æœçº¢è‰²æŠ¥é”™çš„è¯ å°±å¦ç®—</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/05634b783d874645ad302a05d52d036c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP6a2U5aWz5Y2D5Y2D6bG8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765555941&amp;x-signature=EFQbSPjFK3X5UxnCg4tdS9Hu6c4%3D" alt="image.png" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-14">äº”ã€AI æ¡†æ¶å®‰è£…ä¸éªŒè¯</h2>
<p>ç°åœ¨æˆ‘ä»¬å®‰è£…ä¸»æµçš„æ·±åº¦å­¦ä¹ æ¡†æ¶ TensorFlow å’Œ PyTorchã€‚</p>
<h3 data-id="heading-15">5.1 å®‰è£… TensorFlowï¼ˆCPU ç‰ˆæœ¬ï¼‰</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ç¡®ä¿åœ¨ ai-dev ç¯å¢ƒä¸­</span>
conda activate ai-dev

<span class="hljs-comment"># å®‰è£… TensorFlow CPU ç‰ˆæœ¬</span>
pip install tensorflow-cpu

<span class="hljs-comment"># æˆ–è€…ä½¿ç”¨ conda å®‰è£…ï¼ˆæ¨èï¼‰</span>
conda install tensorflow -y
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2ae55a82150d41919bfb3f8e53f1b1bd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP6a2U5aWz5Y2D5Y2D6bG8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765555941&amp;x-signature=AxQ20npxrbEJf%2BK6h575FAro%2FcQ%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ea80c4bd2f174ed695230cd1050fad10~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP6a2U5aWz5Y2D5Y2D6bG8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765555941&amp;x-signature=jN%2FraKrd9j3gLRrYyfl4j3KvH%2F4%3D" alt="image.png" loading="lazy"/></p>
<p><strong>éªŒè¯ TensorFlow å®‰è£…</strong></p>
<pre><code class="hljs language-scss" lang="scss"># æŸ¥çœ‹ TensorFlow ç‰ˆæœ¬
python -c "import tensorflow as tf; <span class="hljs-built_in">print</span>('TensorFlow ç‰ˆæœ¬:', tf.__version__)"

# ç®€å•æµ‹è¯•
python -c "import tensorflow as tf; <span class="hljs-built_in">print</span>('<span class="hljs-number">2</span> + <span class="hljs-number">2</span> =', tf.add(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>)<span class="hljs-selector-class">.numpy</span>())"
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/efb4b3a207c54271b34d79760719a53f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP6a2U5aWz5Y2D5Y2D6bG8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765555941&amp;x-signature=RnpAAOTPfM4%2FLv6IoTry84COEyo%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-16">5.2 å®‰è£… PyTorchï¼ˆCPU ç‰ˆæœ¬ï¼‰</h3>
<pre><code class="hljs language-perl" lang="perl"><span class="hljs-comment"># ç¡®ä¿åœ¨ ai-dev ç¯å¢ƒä¸­</span>
pip activate ai-dev

<span class="hljs-comment"># å®‰è£… PyTorch CPU ç‰ˆæœ¬</span>
pip install torch torchvision torchaudio --<span class="hljs-keyword">index</span>-url https:<span class="hljs-regexp">//d</span>ownload.pytorch.org/whl/cpu

<span class="hljs-comment"># æˆ–è€…ä½¿ç”¨ conda å®‰è£…ï¼ˆæ¨èï¼‰</span>
pip  install pytorch torchvision torchaudio cpuonly -c pytorch -<span class="hljs-keyword">y</span>
</code></pre>
<p><strong>éªŒè¯ PyTorch å®‰è£…</strong></p>
<pre><code class="hljs language-scss" lang="scss"># æŸ¥çœ‹ PyTorch ç‰ˆæœ¬
python -c "import torch; <span class="hljs-built_in">print</span>('PyTorch ç‰ˆæœ¬:', torch.__version__)"

# ç®€å•æµ‹è¯•
python -c "import torch; <span class="hljs-built_in">print</span>('<span class="hljs-number">2</span> + <span class="hljs-number">2</span> =', torch.tensor(<span class="hljs-number">2</span>) + torch<span class="hljs-selector-class">.tensor</span>(<span class="hljs-number">2</span>))"
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bae879b6d1ca416ea92a9a869a01f4c0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP6a2U5aWz5Y2D5Y2D6bG8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765555941&amp;x-signature=vevCsEX5KpF0boni%2BR9rETgdiQA%3D" alt="image.png" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-17">æ€»ç»“ä¸åç»­</h2>
<h3 data-id="heading-18">ç¯å¢ƒæ­å»ºæ€»ç»“</h3>
<p>æ­å–œï¼ä½ å·²ç»åœ¨ openEuler 25.09 ä¸ŠæˆåŠŸæ­å»ºäº†å®Œæ•´çš„ AI å¼€å‘ç¯å¢ƒã€‚
âœ… ç³»ç»Ÿå‡†å¤‡ - æ›´æ–°ç³»ç»Ÿã€å®‰è£…å¼€å‘å·¥å…·ã€é…ç½®å›½å†…é•œåƒæº
âœ… Python ç®¡ç† - ä½¿ç”¨ pyenv ç®¡ç† Python ç‰ˆæœ¬
âœ… Anaconda ç¯å¢ƒ - å®‰è£… Miniconda å’Œå¸¸ç”¨ç§‘å­¦è®¡ç®—åº“
âœ… Jupyter é…ç½® - é…ç½®è¿œç¨‹è®¿é—®å’Œå¯†ç ä¿æŠ¤
âœ… AI æ¡†æ¶ - å®‰è£… TensorFlow å’Œ PyTorch å¹¶éªŒè¯</p>
<h3 data-id="heading-19">openEuler 25.09 ç‰¹åˆ«è¯´æ˜</h3>
<p>openEuler 25.09 æ˜¯åˆ›æ–°ç‰ˆæœ¬ï¼Œå…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š</p>
<ul>
<li>æœ€æ–°æŠ€æœ¯æ ˆ - åŒ…å«æœ€æ–°çš„è½¯ä»¶åŒ…å’Œå†…æ ¸ç‰ˆæœ¬</li>
<li>å¿«é€Ÿè¿­ä»£ - æ›´æ–°é¢‘ç‡é«˜ï¼Œèƒ½å¤Ÿå¿«é€Ÿä½“éªŒæ–°ç‰¹æ€§</li>
<li>ç¤¾åŒºæ´»è·ƒ - å¼€å‘è€…ç¤¾åŒºç§¯æå‚ä¸ï¼Œé—®é¢˜å“åº”å¿«</li>
<li>é€‚åˆå¼€å‘ - é€‚åˆå¼€å‘å’Œæµ‹è¯•ç¯å¢ƒï¼Œä¸å»ºè®®ç”¨äºç”Ÿäº§ç¯å¢ƒ</li>
</ul>
<hr/>
<blockquote>
<p>å¦‚æœæ‚¨æ­£åœ¨å¯»æ‰¾é¢å‘æœªæ¥çš„å¼€æºæ“ä½œç³»ç»Ÿï¼Œä¸å¦¨çœ‹çœ‹DistroWatch æ¦œå•ä¸­å¿«é€Ÿä¸Šå‡çš„ openEuler:<a href="https://link.juejin.cn?target=https%3A%2F%2Fdistrowatch.com%2Ftable-mobile.php%3Fdistribution%3Dopeneuler" target="_blank" title="https://distrowatch.com/table-mobile.php?distribution=openeuler" ref="nofollow noopener noreferrer">distrowatch.com/table-mobilâ€¦</a>ï¼Œä¸€ä¸ªç”±å¼€æ”¾åŸå­å¼€æºåŸºé‡‘ä¼šå­µåŒ–ã€æ”¯æŒâ€œè¶…èŠ‚ç‚¹â€åœºæ™¯çš„Linux å‘è¡Œç‰ˆã€‚
openEulerå®˜ç½‘ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.openeuler.openatom.cn%2Fzh%2F" target="_blank" title="https://www.openeuler.openatom.cn/zh/" ref="nofollow noopener noreferrer">www.openeuler.openatom.cn/zh/</a></p>
</blockquote>
<h2 data-id="heading-20">ğŸš€å†™åœ¨æœ€å</h2>
<blockquote>
<p><strong>å¸Œæœ›æˆ‘çš„åˆ†äº«èƒ½å¤Ÿå¸®åŠ©åˆ°æ›´å¤šçš„äººï¼Œå¦‚æœè§‰å¾—æˆ‘çš„åˆ†äº«æœ‰å¸®åŠ©çš„è¯ï¼Œè¯·å¤§å®¶ä¸€é”®ä¸‰è¿æ”¯æŒä¸€ä¸‹å“¦~</strong>
<strong>â¤ï¸åŸåˆ›ä¸æ˜“ï¼ŒæœŸå¾…ä½ çš„å…³æ³¨ä¸æ”¯æŒ~
ç‚¹èµğŸ‘+æ”¶è—â­ï¸+è¯„è®ºâœï¸
ğŸ˜Šä¹‹åæˆ‘ä¼šç»§ç»­æ›´æ–°å‰ç«¯å­¦ä¹ å°çŸ¥è¯†ï¼Œå…³æ³¨æˆ‘ä¸è¿·è·¯~</strong></p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€è§£å¯†æºç ã€‘ è½»é‡ GrapghRAG - LightRAG æ–‡æ¡£è§£æå·¥ç¨‹å®è·µ]]></title>    <link>https://juejin.cn/post/7580216638110220303</link>    <guid>https://juejin.cn/post/7580216638110220303</guid>    <pubDate>2025-12-06T02:10:02.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7580216638110220303" data-draft-id="7580216638110154767" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€è§£å¯†æºç ã€‘ è½»é‡ GrapghRAG - LightRAG æ–‡æ¡£è§£æå·¥ç¨‹å®è·µ"/> <meta itemprop="keywords" content="LLM,Agent,æºç "/> <meta itemprop="datePublished" content="2025-12-06T02:10:02.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¸¸å…ˆæ£®"/> <meta itemprop="url" content="https://juejin.cn/user/4388906148043879"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€è§£å¯†æºç ã€‘ è½»é‡ GrapghRAG - LightRAG æ–‡æ¡£è§£æå·¥ç¨‹å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4388906148043879/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¸¸å…ˆæ£®
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-06T02:10:02.000Z" title="Sat Dec 06 2025 02:10:02 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»21åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€</h2>
<p>ä¼ ç»Ÿ RAG ä¾èµ–æ–‡æœ¬ç›¸ä¼¼åº¦æ£€ç´¢ï¼Œåœ¨å¤„ç†å¤æ‚å¤šè·³æ¨ç†ä¸è·¨æ–‡æ¡£ä¿¡æ¯æ•´åˆæ—¶å¾€å¾€è¡¨ç°ä¸ä½³ã€‚ä¸ºçªç ´è¿™ä¸€ç“¶é¢ˆï¼Œä¸šç•Œå¼€å§‹æ¢ç´¢åŸºäºçŸ¥è¯†å›¾è°±çš„ GraphRAG æ–¹æ¡ˆï¼Œé€šè¿‡æ„å»ºå®ä½“å…³ç³»å›¾è°±å¢å¼ºæ¨¡å‹çš„è¯­ä¹‰ç†è§£èƒ½åŠ›ã€‚ç„¶è€Œï¼Œä¼ ç»Ÿ GraphRAG æ–¹æ¡ˆé€šå¸¸è®¾è®¡å¾—è¿‡äºâ€œæ²‰é‡â€â€”â€”éœ€è¦ä¾èµ– Neo4jã€JanusGraph ç­‰ä¸“ä¸šå›¾æ•°æ®åº“ï¼Œé¢„å®šä¹‰å¤æ‚æœ¬ä½“ï¼Œè¿˜æ¶‰åŠå¤šé˜¶æ®µçš„å›¾è°±æ„å»ºæµç¨‹ï¼Œåœ¨å®é™…è½åœ°æ—¶é¢ä¸´é«˜æ˜‚çš„å¤æ‚åº¦ä¸é—¨æ§›ã€‚</p>
<p>åœ¨æ­¤èƒŒæ™¯ä¸‹ï¼ŒLightRAG ä½œä¸ºâ€œè½»é‡çº§ GraphRAG å®ç°â€åº”è¿è€Œç”Ÿã€‚</p>
<p>å®ƒåœ¨ä¿ç•™ GraphRAG æ ¸å¿ƒæ€æƒ³ï¼ˆå®ä½“â†’å…³ç³»â†’å›¾è°±â†’æ¨ç†ï¼‰çš„åŒæ—¶ï¼Œé€šè¿‡åˆ›æ–°çš„æç®€æ¶æ„å¤§å¹…å‹ç¼©äº†ç³»ç»Ÿå¤æ‚åº¦ã€‚ä¸ä¼ ç»Ÿ GraphRAG ä¾èµ–ä¸“ä¸šåˆ†å¸ƒå¼å›¾æ•°æ®åº“ä¸åŒï¼ŒLightRAG é‡‡ç”¨ NetworkX è¿™ä¸€è½»é‡çº§å†…å­˜å›¾è®¡ç®—åº“ä½œä¸ºå­˜å‚¨åç«¯ï¼Œä½¿å…¶èƒ½å¤Ÿåœ¨å•æœºç¯å¢ƒä¸‹æµç•…è¿è¡Œï¼Œé¿å…äº†å¤æ‚çš„åŸºç¡€è®¾æ–½ä¾èµ–ã€‚ç›¸è¾ƒäºæ™®é€š RAGï¼Œå®ƒæä¾›äº†æ›´å¼ºå¤§çš„ä¿¡æ¯ç»„ç»‡ä¸æ¨ç†èƒ½åŠ›ï¼›ç›¸æ¯”ä¼ ç»Ÿ GraphRAGï¼Œå®ƒæ˜¾è‘—é™ä½äº†éƒ¨ç½²ä¸ç»´æŠ¤é—¨æ§›ã€‚</p>
<p>ç»¼åˆæ¥çœ‹ï¼ŒLightRAG å…·å¤‡ä¸‰å¤§æ ¸å¿ƒä¼˜åŠ¿ï¼š</p>
<ul>
<li>
<p>æ›´æ™ºèƒ½çš„æ£€ç´¢æœºåˆ¶ï¼šä¸ä»…åŸºäºå†…å®¹ç›¸ä¼¼åº¦åŒ¹é…ï¼Œæ›´èƒ½åˆ©ç”¨å®ä½“å…³ç³»ä¸è¯­ä¹‰å›¾è°±å®ç°ç²¾å‡†çš„å¤šè·³æ¨ç†ï¼Œæ˜¾è‘—æå‡ç­”æ¡ˆè´¨é‡ã€‚</p>
</li>
<li>
<p>æç®€çš„å·¥ç¨‹æ¶æ„ï¼šé‡‡ç”¨ NetworkX + æœ¬åœ°å‘é‡åº“çš„è½»é‡ç»„åˆï¼Œæ— éœ€éƒ¨ç½²ä¸“ä¸šå›¾æ•°æ®åº“ï¼Œå¤§å¹…ç®€åŒ–æŠ€æœ¯æ ˆå’Œç»´æŠ¤æˆæœ¬ã€‚</p>
</li>
<li>
<p>çµæ´»çš„å¢é‡æ›´æ–°ï¼šåŸºäºæ–‡æ¡£çº§çš„å¼‚æ­¥æµæ°´çº¿è®¾è®¡ï¼Œæ”¯æŒçŸ¥è¯†å›¾è°±çš„å®æ—¶æ„å»ºä¸åŠ¨æ€æ‰©å±•ï¼Œå®Œç¾é€‚åº”æŒç»­æ¼”åŒ–çš„çŸ¥è¯†åº“åœºæ™¯ã€‚</p>
</li>
</ul>
<p>å‡­å€Ÿè¿™äº›ç‰¹æ€§ï¼ŒLightRAG å·²æˆä¸ºå½“å‰æœ€å…·å·¥ç¨‹å¯è¡Œæ€§çš„ GraphRAG æ–¹æ¡ˆä¹‹ä¸€ï¼Œè®©â€œå›¾è°±å¢å¼ºæ£€ç´¢â€èƒ½å¤Ÿä»¥çœŸæ­£åŠ¡å®ã€ä½ä¾èµ–çš„æ–¹å¼åº”ç”¨äºå®é™…ä¸šåŠ¡åœºæ™¯ä¸­ã€‚</p>
<h2 data-id="heading-1">çœæµç‰ˆ</h2>
<h3 data-id="heading-2">åŸºç¡€æµç¨‹</h3>
<p>ä¸‹é¢è¿™å¼ æµç¨‹å›¾æ€»ç»“äº† LightRAG ä» æ–‡æ¡£å…¥åº“ â†’ æ–‡æ¡£åˆ‡åˆ† â†’ å®ä½“å…³ç³»æŠ½å– â†’ çŸ¥è¯†å›¾è°±åˆå¹¶ çš„å®Œæ•´å¤„ç†é“¾è·¯ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  æ–‡æ¡£å…¥åº“ä»»åŠ¡å¤„ç†ï¼ˆå…¥å£ï¼‰             
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
<span class="hljs-code">                â”‚
                â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      è·å–å¾…å¤„ç†/å¤±è´¥çš„æ–‡æ¡£       
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      æ ¡éªŒæ–‡æ¡£çŠ¶æ€ä¸ä¸€è‡´æ€§        
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  å¹¶å‘è°ƒåº¦æ¯ä¸ªæ–‡æ¡£ï¼ˆä½¿ç”¨å¹¶å‘ä¸ä¿¡å·é‡é™åˆ¶ï¼‰        
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â–¼
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ã€å•æ–‡æ¡£å¤„ç†æµç¨‹ã€‘
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
                â”‚
                â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      æ ‡è®°æ–‡æ¡£ä¸ºâ€œå¤„ç†ä¸­â€          
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      é˜¶æ®µ 1ï¼šæ–‡æ¡£åˆ‡åˆ†ä¸º chunks  
       - è§£ææ–‡æœ¬               
       - å­˜å‚¨åˆ†å—å†…å®¹            
       - å»ºç«‹æ–‡æ¡£ä¸åˆ†å—æ˜ å°„     
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      é˜¶æ®µ 2ï¼šæŠ½å–å®ä½“ä¸å…³ç³»    
       - è¯†åˆ«é‡è¦å®ä½“           
       - è¯†åˆ«å®ä½“ä¹‹é—´çš„å…³ç³»     
       - ç”ŸæˆåµŒå…¥å‘é‡           
       - å­˜å…¥å‘é‡åº“             
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      é˜¶æ®µ 3ï¼šåˆå¹¶çŸ¥è¯†å›¾è°±      
       - åˆå¹¶å®ä½“èŠ‚ç‚¹           
       - åˆå¹¶å…³ç³»è¾¹             
       - æ›´æ–°èŠ‚ç‚¹æƒé‡           
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      æ›´æ–°æ–‡æ¡£çŠ¶æ€ï¼ˆæˆåŠŸ/å¤±è´¥ï¼‰ 
      è®°å½•é”™è¯¯ä¿¡æ¯ï¼ˆå¦‚æœ‰ï¼‰      
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â–¼
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ã€å…¥åº“ä»»åŠ¡ç»“æŸé€»è¾‘ã€‘
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
                â”‚
                â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      ç­‰å¾…æ‰€æœ‰æ–‡æ¡£å¤„ç†å®Œæˆ     
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      è‹¥ä»æœ‰å¾…å¤„ç†ä»»åŠ¡åˆ™ç»§ç»­   
      ï¼ˆä¾‹å¦‚ï¼šæ–°å¢æˆ–é‡è¯•ä»»åŠ¡ï¼‰ 
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</span>
</code></pre>
<h3 data-id="heading-3">è®¾è®¡äº®ç‚¹</h3>
<p><strong>1. Gleaning Promptï¼šåœ¨æœ€å°è´Ÿæ‹…ä¸‹æœ€å¤§åŒ–æ¨¡å‹æŠ½å–èƒ½åŠ›</strong>
LightRAG å¼•å…¥è½»é‡ä½†é«˜æ•ˆçš„â€œä¿¡æ¯æç‚¼â€ Promptï¼Œæ—¢å‡å°‘æ¨¡å‹ Hallucinationï¼Œåˆæå‡ç»“æ„åŒ–æŠ½å–è´¨é‡ã€‚</p>
<p><strong>2. è‡ªå»ºç¼“å­˜æœºåˆ¶å‡å°‘é‡å¤ LLM è°ƒç”¨</strong>
å¯¹æ¯ä¸ª chunk æŠ½å–åš hash ç¼“å­˜ï¼Œè®©é‡å¤ä»»åŠ¡å‡ ä¹é›¶æˆæœ¬ï¼Œç‰¹åˆ«é€‚åˆå¢é‡æ›´æ–°å’Œæ‰¹é‡æ–‡æ¡£å¤„ç†ã€‚</p>
<p><strong>3. å›¾è°±ä¸¤é˜¶æ®µåˆå¹¶ç­–ç•¥ï¼ˆèŠ‚ç‚¹ â†’ å…³ç³»ï¼‰</strong>
å…ˆåˆå¹¶èŠ‚ç‚¹ï¼Œå†åˆå¹¶è¾¹ï¼Œé¿å…å›¾è°±è¢«é”™è¯¯å…³ç³»æ±¡æŸ“ï¼Œä¹Ÿæ›´ä¾¿äºåç»­æ‰©å±•å’Œç‰ˆæœ¬åŒ–ç®¡ç†ã€‚</p>
<p><strong>4. æ–‡æ¡£çº§ä¸ chunk çº§å¹¶å‘åŒå±‚ä¼˜åŒ–</strong>
æ–‡æ¡£ä¹‹é—´æœ‰ semaphoreï¼Œchunk å†…éƒ¨ä¹Ÿæ”¯æŒå¿«é€Ÿå¤„ç†ï¼Œä½¿æ•´ä¸ªç³»ç»Ÿæ›´è½»é‡ã€æ›´å¿«ã€æ›´ç¨³å®šã€‚</p>
<h2 data-id="heading-4">æ‰‹æ’•ç‰ˆ</h2>
<h3 data-id="heading-5">1. ä¸Šä¼ æ–‡ä»¶</h3>
<h4 data-id="heading-6">1.1 ä¸Šä¼ æ–‡ä»¶å‰ç½®æ£€æŸ¥</h4>
<p>å¯¹ä¸Šä¼ çš„æ–‡ä»¶åä»¥åŠä¸Šä¼ æ–‡ä»¶å¤¹è·¯å¾„è¿›è¡Œæ ¡éªŒï¼Œé˜²æ­¢è·¯å¾„ç©¿è¶Šæ”»å‡»ã€æ–‡ä»¶åç±»å‹æ£€æŸ¥ã€é‡å¤ä¸Šä¼ æ£€æŸ¥ï¼ˆä¸Šä¼ ä¸­ï¼Œå·²ä¸Šä¼ ï¼‰ã€‚</p>
<h5 data-id="heading-7">1.1.1 é˜²æ­¢è·¯å¾„ç©¿è¶Šæ”»å‡»</h5>
<p>å¯¹æ–‡ä»¶è¿›è¡ŒåŸºç¡€æ ¡éªŒï¼Œæ–‡ä»¶åï¼Œæ–‡ä»¶å¤¹ä¸èƒ½ä¸ºç©ºï¼Œé€šè¿‡ä¸€ç³»åˆ—ç­–ç•¥é˜²æ­¢è·¯å¾„ç©¿è¶Šæ”»å‡»ï¼Œè¿”å›å®‰å…¨çš„æ–‡ä»¶è·¯å¾„ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">sanitize_filename</span>(<span class="hljs-params">filename: <span class="hljs-built_in">str</span>, input_dir: Path</span>) -&gt; <span class="hljs-built_in">str</span>:
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> filename <span class="hljs-keyword">or</span> <span class="hljs-keyword">not</span> filename.strip():
        aise HTTPException(status_code=<span class="hljs-number">400</span>, detail=<span class="hljs-string">"Filename cannot be empty"</span>)
    clean_name = filename.replace(<span class="hljs-string">"/"</span>, <span class="hljs-string">""</span>).replace(<span class="hljs-string">"\\"</span>, <span class="hljs-string">""</span>)
    clean_name = clean_name.replace(<span class="hljs-string">".."</span>, <span class="hljs-string">""</span>)
    clean_name = <span class="hljs-string">""</span>.join(c <span class="hljs-keyword">for</span> c <span class="hljs-keyword">in</span> clean_name <span class="hljs-keyword">if</span> <span class="hljs-built_in">ord</span>(c) &gt;= <span class="hljs-number">32</span> <span class="hljs-keyword">and</span> c != <span class="hljs-string">"\x7f"</span>)
    clean_name = clean_name.strip().strip(<span class="hljs-string">"."</span>)
    ...
</code></pre>
<h5 data-id="heading-8">1.1.2 æ–‡ä»¶åç±»å‹æ£€æŸ¥</h5>
<p>å¯¹ä¸Šä¼ çš„æ–‡ä»¶åè¿›è¡Œç±»å‹æ£€æŸ¥ï¼Œåˆ¤æ–­æ˜¯å¦ä¸ºæ”¯æŒçš„æ–‡ä»¶ç±»å‹ã€‚</p>
<pre><code class="hljs language-python" lang="python"> supported_extensions: <span class="hljs-built_in">tuple</span> = (
    <span class="hljs-string">".txt"</span>,
    <span class="hljs-string">".md"</span>,
    <span class="hljs-string">".pdf"</span>,
    <span class="hljs-string">".docx"</span>,
    ...
)
<span class="hljs-keyword">def</span> <span class="hljs-title function_">is_supported_file</span>(<span class="hljs-params">self, filename: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">bool</span>:
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">any</span>(filename.lower().endswith(ext) <span class="hljs-keyword">for</span> ext <span class="hljs-keyword">in</span> self.supported_extensions)
</code></pre>
<h5 data-id="heading-9">1.1.3 é‡å¤ä¸Šä¼ æ£€æŸ¥</h5>
<p>æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å·²å­˜åœ¨ï¼ŒçŠ¶æ€ä¸ºä¸Šä¼ ä¸­ï¼Œå·²ä¸Šä¼ çš„æ–‡ä»¶ï¼Œé˜²æ­¢é‡å¤ä¸Šä¼ ã€‚</p>
<pre><code class="hljs language-python" lang="python">existing_doc_data = <span class="hljs-keyword">await</span> rag.doc_status.get_doc_by_file_path(safe_filename)
<span class="hljs-keyword">if</span> existing_doc_data:
    <span class="hljs-comment"># Get document status information for error message</span>
    status = existing_doc_data.get(<span class="hljs-string">"status"</span>, <span class="hljs-string">"unknown"</span>)
</code></pre>
<h3 data-id="heading-10">2. è§£ææ–‡ä»¶</h3>
<p>å°†ä¸€ä¸ªä¸Šä¼ åçš„æ–‡ä»¶è§£ææˆçº¯æ–‡æœ¬å†…å®¹ï¼Œç„¶åæŠŠè§£æåçš„æ–‡æœ¬æŠ•é€’ï¼ˆenqueueï¼‰åˆ° LightRAG çš„å¼‚æ­¥å¤„ç†é˜Ÿåˆ—é‡Œã€‚</p>
<h4 data-id="heading-11">2.1 æå–æ–‡ä»¶å†…å®¹</h4>
<p>è¯»å–æ–‡ä»¶å†…å®¹ï¼Œå¹¶åŠå…¶è¯¦ç»†çš„è®°å½•è¯»å–æ–‡ä»¶é”™è¯¯åœºæ™¯çš„å¼‚å¸¸ä¿¡æ¯ï¼ŒåŒ…æ‹¬è¯»å–å„ç±»å‹æ–‡ä»¶ç‰¹æœ‰é”™è¯¯åœºæ™¯çš„å¼‚å¸¸ä¿¡æ¯ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">async</span> <span class="hljs-keyword">with</span> aiofiles.<span class="hljs-built_in">open</span>(file_path, <span class="hljs-string">"rb"</span>) <span class="hljs-keyword">as</span> f:
    file = <span class="hljs-keyword">await</span> f.read()
</code></pre>
<p>æ ¹æ®ä¸åŒæ–‡ä»¶ç±»å‹ï¼Œé‡‡ç”¨ä¸åŒçš„æ–‡æœ¬æå–æ–¹æ¡ˆã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">match</span> ext:
    <span class="hljs-keyword">case</span> .txt / .md / .html / ç­‰æ–‡æœ¬æ–‡ä»¶ â†’ UTF-<span class="hljs-number">8</span> è§£ç 
    <span class="hljs-keyword">case</span> .pdf â†’ PDF æå–æ–‡æœ¬
    <span class="hljs-keyword">case</span> .docx â†’ Word æŠ½å–æ–‡æœ¬
    <span class="hljs-keyword">case</span> .pptx â†’ PPT æŠ½å–æ–‡æœ¬
    <span class="hljs-keyword">case</span> .xlsx â†’ Excel æŠ½å–æ–‡æœ¬
    <span class="hljs-keyword">case</span> _ â†’ ä¸æ”¯æŒçš„æ ¼å¼é”™è¯¯
</code></pre>
<h4 data-id="heading-12">2.2 è§£ææ–‡ä»¶å†…å®¹</h4>
<p>å¯¹äºæ‰€æœ‰æ–‡ä»¶ä¼˜å…ˆä½¿ç”¨ Docling æ¡†æ¶è¿›è¡Œæ–‡æœ¬è§£æï¼Œè‹¥ç”¨æˆ·æœªé…ç½® DOCLING è§£æå™¨ï¼Œåˆ™æ ¹æ®æ–‡ä»¶ç±»å‹ï¼Œé‡‡ç”¨ä¸åŒçš„æ–‡æœ¬è§£ææ–¹æ¡ˆã€‚</p>








































<table><thead><tr><th>æ–‡ä»¶ç±»å‹</th><th>ä½¿ç”¨å¼•æ“ / åº“</th><th>è§£ææ–¹å¼</th></tr></thead><tbody><tr><td><code>.txt</code> <code>.md</code> <code>.html</code> <code>.htm</code> <code>.tex</code> <code>.json</code> <code>.xml</code> <code>.yaml</code> <code>.yml</code> <code>.rtf</code> <code>.odt</code> <code>.epub</code> <code>.csv</code> <code>.log</code> <code>.conf</code> <code>.ini</code> <code>.properties</code> <code>.sql</code> <code>.bat</code> <code>.sh</code> <code>.c</code> <code>.cpp</code> <code>.py</code> <code>.java</code> <code>.js</code> <code>.ts</code> <code>.swift</code> <code>.go</code> <code>.rb</code> <code>.php</code> <code>.css</code> <code>.scss</code> <code>.less</code></td><td>æ— ï¼ˆUTF-8 decodeï¼‰</td><td>ä½¿ç”¨ <code>file.decode("utf-8")</code> è·å–çº¯æ–‡æœ¬å†…å®¹</td></tr><tr><td><code>.pdf</code></td><td>Docling æˆ– PyPDF</td><td>Doclingï¼šè½¬æ¢ä¸º Markdownï¼›PyPDFï¼šé€é¡µ <code>extract_text()</code></td></tr><tr><td><code>.docx</code></td><td>Docling æˆ– python-docx</td><td>Doclingï¼šè½¬æ¢ä¸º Markdownï¼›python-docxï¼šéå† <code>paragraphs</code> æ‹¼æ¥æ–‡æœ¬</td></tr><tr><td><code>.pptx</code></td><td>Docling æˆ– python-pptx</td><td>Doclingï¼šè½¬æ¢ä¸º Markdownï¼›python-pptxï¼šéå† slides/shapes æå– <code>text</code></td></tr><tr><td><code>.xlsx</code></td><td>Docling æˆ– openpyxl</td><td>Doclingï¼šè½¬æ¢ä¸º Markdownï¼›openpyxlï¼šéå† sheet/rows æ‹¼æ¥æ–‡æœ¬</td></tr><tr><td><strong>å…¶ä»–æœªçŸ¥ç±»å‹</strong></td><td>ä¸æ”¯æŒ</td><td>â€”</td></tr></tbody></table>
<h4 data-id="heading-13">2.3 å­˜å‚¨æ–‡ä»¶æ•°æ®</h4>
<p>å­˜å‚¨è§£æåçš„æ–‡ä»¶å†…å®¹åˆ° KV Store ä¸­ï¼Œé»˜è®¤ä½¿ç”¨çš„ KV Store æ˜¯æœ¬åœ°çš„ JSON æ–‡ä»¶å½¢å¼ã€‚</p>
<pre><code class="hljs language-python" lang="python">full_docs_data = {
    doc_id: {
        <span class="hljs-string">"content"</span>: contents[doc_id][<span class="hljs-string">"content"</span>],
        <span class="hljs-string">"file_path"</span>: contents[doc_id][<span class="hljs-string">"file_path"</span>],
    }
    <span class="hljs-keyword">for</span> doc_id <span class="hljs-keyword">in</span> new_docs.keys()
}
<span class="hljs-keyword">await</span> self.full_docs.upsert(full_docs_data)
</code></pre>
<h4 data-id="heading-14">2.4 åˆ†è¯</h4>
<p>é»˜è®¤ä½¿ç”¨ Tiktoken tokenizer è¿›è¡Œåˆ†è¯ï¼Œæ¨¡å‹é»˜è®¤ä½¿ç”¨ gpt-4o-miniã€‚æŒ‰ç…§å›ºå®šé•¿åº¦ + è¯­ä¹‰ç¬¦å·åˆ†è¯ï¼Œå¹¶è®¾ç½®é‡å æ ‡è®°æ•°é‡ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">chunking_by_token_size</span>(<span class="hljs-params">
    tokenizer: Tokenizer,
    content: <span class="hljs-built_in">str</span>,
    split_by_character: <span class="hljs-built_in">str</span> | <span class="hljs-literal">None</span> = <span class="hljs-literal">None</span>,
    split_by_character_only: <span class="hljs-built_in">bool</span> = <span class="hljs-literal">False</span>,
    overlap_token_size: <span class="hljs-built_in">int</span> = <span class="hljs-number">128</span>,
    max_token_size: <span class="hljs-built_in">int</span> = <span class="hljs-number">1024</span>,
</span>) 

<span class="hljs-comment"># - `tokenizer`: A Tokenizer instance to use for tokenization.</span>
<span class="hljs-comment"># - `content`: The text to be split into chunks.</span>
<span class="hljs-comment"># - `split_by_character`: The character to split the text on. If None, the text is split into chunks of `chunk_token_size` tokens.</span>
<span class="hljs-comment"># - `split_by_character_only`: If True, the text is split only on the specified character.</span>
<span class="hljs-comment"># - `chunk_token_size`: The maximum number of tokens per chunk.</span>
<span class="hljs-comment"># - `chunk_overlap_token_size`: The number of overlapping tokens between consecutive chunks.</span>

</code></pre>
<h4 data-id="heading-15">2.5 å­˜å‚¨æ•°æ®</h4>
<p>å°† chunks æ•°æ®å­˜å‚¨åˆ°å‘é‡æ•°æ®åº“ä¸­ã€‚å‘é‡æ•°æ®åº“é»˜è®¤ä½¿ç”¨ NanoVectorDBStorageã€‚</p>
<pre><code class="hljs language-python" lang="python">chunks_vdb_task = asyncio.create_task(
    self.chunks_vdb.upsert(chunks)
)
</code></pre>
<h3 data-id="heading-16">3. æå–æ–‡ä»¶å®ä½“</h3>
<h4 data-id="heading-17">3.1 å•ä¸ª chunk å®ä½“æå–</h4>
<p>å¯¹æ¯ä¸ª chunk é€šè¿‡è°ƒç”¨ LLMï¼ˆå¸¦ç¼“å­˜ï¼‰æŠ½å–å®ä½“å’Œå®ä½“å…³ç³»ï¼Œå…¶ä¸­æœ‰å‡ ä¸ªé‡è¦çš„æå–å‚æ•°ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># ä½¿ç”¨å…¨å±€é…ç½®ä¸­çš„ LLM æ¨¡å‹å‡½æ•°</span>
use_llm_func = global_config[<span class="hljs-string">"llm_model_func"</span>]
<span class="hljs-comment"># æœ€å¤§æŠ½å–æ¬¡æ•°ï¼Œé»˜è®¤ 1 æ¬¡</span>
entity_extract_max_gleaning = global_config[<span class="hljs-string">"entity_extract_max_gleaning"</span>]
<span class="hljs-comment"># è¯­è¨€</span>
language = global_config[<span class="hljs-string">"addon_params"</span>].get(<span class="hljs-string">"language"</span>)
<span class="hljs-comment"># å®ä½“ç±»å‹ï¼Œé»˜è®¤æ‰€æœ‰ç±»å‹</span>
entity_types = global_config[<span class="hljs-string">"addon_params"</span>].get(<span class="hljs-string">"entity_types"</span>)
</code></pre>
<p>å…¶ä¸­ LightRAG æ”¯æŒçš„å®ä½“ç±»å‹æœ‰ï¼š</p>
<pre><code class="hljs language-python" lang="python">DEFAULT_ENTITY_TYPES = [
    <span class="hljs-string">"Person"</span>,
    <span class="hljs-string">"Creature"</span>,
    <span class="hljs-string">"Organization"</span>,
    <span class="hljs-string">"Location"</span>,
    <span class="hljs-string">"Event"</span>,
    <span class="hljs-string">"Concept"</span>,
    <span class="hljs-string">"Method"</span>,
    <span class="hljs-string">"Content"</span>,
    <span class="hljs-string">"Data"</span>,
    <span class="hljs-string">"Artifact"</span>,
    <span class="hljs-string">"NaturalObject"</span>,
]
</code></pre>
<h4 data-id="heading-18">3.1.1 æ„å»º Prompt</h4>
<p>ä¸€å…±ä¼šæ„å»ºä¸‰ä¸ª promptï¼Œåˆ†åˆ«æ˜¯ï¼šå…¬ç”¨ system prompt åˆæ¬¡æŠ½å– promptå’Œé‡å¤æŠ½å–ï¼ˆgleaningï¼‰promptã€‚</p>
<p><strong>1ï¼‰system prompt</strong></p>











































































<table><thead><tr><th>æ¨¡å—åç§°</th><th>ä¸­æ–‡è¯´æ˜ï¼ˆä½œç”¨ï¼‰</th><th>Prompt åŸæ–‡ç¤ºä¾‹ç‰‡æ®µï¼ˆå¯¹åº”æ¨¡å—ï¼‰</th></tr></thead><tbody><tr><td><strong>è§’è‰²è®¾å®šï¼ˆRoleï¼‰</strong></td><td>è§„å®šæ¨¡å‹æ‰®æ¼”â€œçŸ¥è¯†å›¾è°±ä¸“å®¶â€ï¼Œç¡®ä¿è¾“å‡ºä¸“ä¸šæ€§å¹¶é¿å…é—²èŠæˆ–å‘æŒ¥ã€‚</td><td><code>You are a Knowledge Graph Specialist responsible for extracting entities and relationships from the input text.</code></td></tr><tr><td><strong>å®ä½“æŠ½å–è§„åˆ™ï¼šè¯†åˆ«ä¸ç»“æ„è¦æ±‚</strong></td><td>å®šä¹‰å¦‚ä½•è¯†åˆ«å®ä½“ã€å®ä½“çš„å‘½åè§„èŒƒã€å­—æ®µå†…å®¹è¦æ±‚ï¼ˆåç§°ã€ç±»å‹ã€æè¿°ï¼‰ã€‚</td><td><code>Identify clearly defined and meaningful entitiesâ€¦ extract: entity_name, entity_type, entity_description</code></td></tr><tr><td><strong>å®ä½“è¾“å‡ºæ ¼å¼è§„èŒƒ</strong></td><td>æ˜ç¡®å®ä½“è¾“å‡ºå¿…é¡»åŒ…å« 4 ä¸ªå­—æ®µï¼Œå¹¶ç”¨ <code>{tuple_delimiter}</code> åˆ†éš”ï¼›æŒ‡å®šç¬¬ä¸€å­—æ®µå¿…é¡»æ˜¯ <code>entity</code>ã€‚</td><td><code>Format: entity{tuple_delimiter}entity_name{tuple_delimiter}entity_type{tuple_delimiter}entity_description</code></td></tr><tr><td><strong>å…³ç³»æŠ½å–è§„åˆ™ï¼šè¯†åˆ«ä¸æ‹†åˆ†</strong></td><td>å®šä¹‰å¦‚ä½•è¯†åˆ«å…³ç³»ã€å¦‚ä½•å°†å¤šå…ƒå…³ç³»æ‹†åˆ†ä¸ºäºŒå…ƒå…³ç³»ï¼Œé¿å…é—æ¼å¤æ‚å…³ç³»ã€‚</td><td><code>If a single statement describes a relationship involving more than two entitiesâ€¦ decompose into multiple binary relationship pairs</code></td></tr><tr><td><strong>å…³ç³»å­—æ®µè¦æ±‚</strong></td><td>è¦æ±‚ sourceã€targetã€relationship_keywordsã€relationship_description å››å¤§å­—æ®µï¼›å…³é”®è¯ç”¨é€—å·åˆ†éš”ã€‚</td><td><code>relationship_keywords: One or more high-level keywordsâ€¦ separated by a comma ','</code></td></tr><tr><td><strong>å…³ç³»è¾“å‡ºæ ¼å¼è§„èŒƒ</strong></td><td>æ˜ç¡®å…³ç³»è¾“å‡ºå¿…é¡»åŒ…å« 5 ä¸ªå­—æ®µï¼Œç¬¬ä¸€å­—æ®µå¿…é¡»æ˜¯ <code>relation</code>ã€‚</td><td><code>Format: relation{tuple_delimiter}source_entity{tuple_delimiter}target_entity{tuple_delimiter}relationship_keywords{tuple_delimiter}relationship_description</code></td></tr><tr><td><strong>åˆ†éš”ç¬¦ä½¿ç”¨è§„èŒƒï¼ˆDelimiter Protocolï¼‰</strong></td><td>å¼ºåˆ¶ç¦æ­¢åœ¨å­—æ®µå†…å®¹ä¸­ä½¿ç”¨ <code>{tuple_delimiter}</code>ï¼›æä¾›æ­£ç¡®/é”™è¯¯ç¤ºä¾‹è¯´æ˜ã€‚</td><td><code>Incorrect Example: ... Tokyo&lt; location &gt;Tokyo ...</code><br/><code>Correct Example: entity{tuple_delimiter}Tokyo{tuple_delimiter}location...</code></td></tr><tr><td><strong>å…³ç³»æ–¹å‘æ€§ä¸å»é‡è§„åˆ™</strong></td><td>æŒ‡å®šå…³ç³»è§†ä¸ºæ— å‘ï¼Œé˜²æ­¢é‡å¤è¾“å‡º Aâ†’B å’Œ Bâ†’Aã€‚</td><td><code>Treat all relationships as undirectedâ€¦ Avoid outputting duplicate relationships.</code></td></tr><tr><td><strong>è¾“å‡ºé¡ºåºè¦æ±‚</strong></td><td>å¿…é¡»å…ˆå®ä½“å†å…³ç³»ï¼›å…³ç³»å†…éƒ¨æŒ‰é‡è¦æ€§æ’åºã€‚</td><td><code>Output all extracted entities first, followed by all extracted relationships.</code></td></tr><tr><td><strong>å®¢è§‚æ€§ä¸ç¬¬ä¸‰äººç§°è¦æ±‚</strong></td><td>ç¦æ­¢ä½¿ç”¨â€œthis articleâ€â€œIâ€ç­‰ä»£è¯ï¼Œé¿å…å«ç³Šå®ä½“äº§ç”Ÿã€‚</td><td><code>avoid using pronouns such as 'this article', 'I', 'he/she'</code></td></tr><tr><td><strong>è¯­è¨€ä¸ä¸“æœ‰åè¯è§„åˆ™</strong></td><td>è¦æ±‚è¾“å‡ºè¯­è¨€ä¸º <code>{language}</code>ï¼›ä¸“æœ‰åè¯å¿…é¡»ä¿ç•™åŸæ–‡ã€‚</td><td><code>Proper nouns â€¦ should be retained in their original language</code></td></tr><tr><td><strong>ç»“æŸä¿¡å·</strong></td><td>æœ€åä¸€è¡Œå¿…é¡»è¾“å‡º <code>{completion_delimiter}</code>ï¼Œæ–¹ä¾¿ç¨‹åºæ£€æµ‹è¾“å‡ºç»“æŸã€‚</td><td><code>Output the literal string {completion_delimiter} only afterâ€¦</code></td></tr><tr><td><strong>ç¤ºä¾‹ï¼ˆExamplesï¼‰</strong></td><td>few-shot ç¤ºä¾‹å¸®åŠ©æ¨¡å‹å­¦ä¹ æ­£ç¡®æ ¼å¼å’Œæ‰€éœ€è¾“å‡ºé£æ ¼ã€‚</td><td><code>{examples}</code></td></tr></tbody></table>
<p><strong>2ï¼‰åˆæ¬¡æŠ½å– promptï¼ˆuser promptï¼‰</strong></p>



































<table><thead><tr><th>æ¨¡å—åç§°</th><th>ä¸­æ–‡è¯´æ˜ï¼ˆä½œç”¨ï¼‰</th><th>Prompt åŸæ–‡ç¤ºä¾‹ç‰‡æ®µï¼ˆå¯¹åº”æ¨¡å—ï¼‰</th></tr></thead><tbody><tr><td><strong>ä»»åŠ¡å£°æ˜ï¼ˆTaskï¼‰</strong></td><td>è¡¨æ˜ç”¨æˆ·å¸Œæœ›æ¨¡å‹æ‰§è¡Œå®ä½“å’Œå…³ç³»æŠ½å–ä»»åŠ¡ã€‚</td><td><code>Extract entities and relationships from the input textâ€¦</code></td></tr><tr><td><strong>å¿…é¡»ä¸¥æ ¼éµå¾ªæ ¼å¼è¦æ±‚</strong></td><td>å¼ºè°ƒè¾“å‡ºå¿…é¡»ç¬¦åˆ system prompt è§„å®šçš„æ‰€æœ‰æ ¼å¼ã€‚</td><td><code>Strict Adherence to Formatâ€¦ including output order, field delimitersâ€¦</code></td></tr><tr><td><strong>ä»…è¾“å‡ºå†…å®¹ï¼ˆç¦æ­¢è§£é‡Šï¼‰</strong></td><td>ç¦æ­¢è¾“å‡ºä»»ä½•ä»‹ç»æ€§è¯­è¨€ã€è¯„æ³¨æˆ–è§£é‡Šï¼Œç¡®ä¿ä¾¿äºç¨‹åºè§£æã€‚</td><td><code>Output only the extracted list of entities and relationships. Do not include anyâ€¦</code></td></tr><tr><td><strong>å®Œæˆä¿¡å·ï¼ˆç»“æŸæ ‡è®°ï¼‰</strong></td><td>è¾“å‡ºå®Œæˆæ—¶å¿…é¡»åŠ ä¸Š <code>{completion_delimiter}</code>ã€‚</td><td><code>Output {completion_delimiter} as the final lineâ€¦</code></td></tr><tr><td><strong>è¯­è¨€è¦æ±‚</strong></td><td>è¾“å‡ºè¯­è¨€å¿…é¡»ä¸º <code>{language}</code>ï¼Œä¸“æœ‰åè¯ä¸å¾—ç¿»è¯‘ã€‚</td><td><code>Ensure the output language is {language}. Proper nouns must be kept in their original language.</code></td></tr></tbody></table>
<p><strong>3ï¼‰é‡å¤æŠ½å–ï¼ˆgleaningï¼‰promptï¼ˆuser promptï¼‰</strong></p>








































<table><thead><tr><th>æ¨¡å—</th><th>ä¸­æ–‡ä½œç”¨è¯´æ˜</th><th>åŸæ–‡ç¤ºä¾‹</th></tr></thead><tbody><tr><td><strong>ä»»åŠ¡å£°æ˜</strong></td><td>è¡¨ç¤ºæœ¬æ¬¡ä»»åŠ¡æ˜¯â€œè¡¥æ¼/ä¿®æ­£â€è€Œä¸æ˜¯é‡æ–°æŠ½å–ã€‚</td><td><code>identify and extract any missed or incorrectly formatted entities and relationships</code></td></tr><tr><td><strong>ä»…è¡¥å……ç¼ºå¤±é¡¹</strong></td><td>é¿å…é‡å¤è¾“å‡ºå·²æ­£ç¡®ç”Ÿæˆçš„å®ä½“æˆ–å…³ç³»ã€‚</td><td><code>Do NOT re-output entities and relationships that were correctlyâ€¦</code></td></tr><tr><td><strong>æ ¼å¼è¦æ±‚é‡ç”³</strong></td><td>å¼ºåˆ¶ä¿æŒ entity / relation å­—æ®µæ•°é‡ã€é¡ºåºä¸€è‡´ã€‚</td><td><code>Output a total of 4 fieldsâ€¦ Output a total of 5 fieldsâ€¦</code></td></tr><tr><td><strong>ä»…è¾“å‡ºå†…å®¹</strong></td><td>åŒæ ·ç¦æ­¢è§£é‡Šæ€§æ–‡å­—ã€‚</td><td><code>Output only the extracted listâ€¦</code></td></tr><tr><td><strong>å®Œæˆä¿¡å·</strong></td><td>å¿…é¡»åŠ å…¥ <code>{completion_delimiter}</code>ã€‚</td><td><code>Output {completion_delimiter} as the final lineâ€¦</code></td></tr><tr><td><strong>è¯­è¨€è¦æ±‚</strong></td><td>å¼ºåˆ¶è¾“å‡º <code>{language}</code>ï¼Œä¸“æœ‰åè¯ä¿æŒåŸæ–‡ã€‚</td><td><code>Ensure the output language is {language}.â€¦ kept in their original language.</code></td></tr></tbody></table>
<h5 data-id="heading-19">3.1.2 ä½¿ç”¨ LLM æå–ï¼ˆè‡ªå»ºç¼“å­˜æœºåˆ¶ï¼‰</h5>
<p>ä½¿ç”¨ LLM è¿›è¡Œå®ä½“æŠ½å–å’Œå…³ç³»æŠ½å–ï¼Œä¸ºäº†é¿å…é‡å¤æŠ½å–æµªè´¹ tokenï¼ŒLightRAG åœ¨æ­¤è®¾è®¡äº†ç¼“å­˜æœºåˆ¶ï¼Œé»˜è®¤ä½¿ç”¨æœ¬åœ° json æ–‡ä»¶è¿›è¡Œç¼“å­˜ç®¡ç†ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">use_llm_func_with_cache</span>(<span class="hljs-params">
    user_prompt: <span class="hljs-built_in">str</span>,
    use_llm_func: <span class="hljs-built_in">callable</span>,
    llm_response_cache: <span class="hljs-string">"BaseKVStorage | None"</span> = <span class="hljs-literal">None</span>,
    system_prompt: <span class="hljs-built_in">str</span> | <span class="hljs-literal">None</span> = <span class="hljs-literal">None</span>,
    max_tokens: <span class="hljs-built_in">int</span> = <span class="hljs-literal">None</span>,
    history_messages: <span class="hljs-built_in">list</span>[<span class="hljs-built_in">dict</span>[<span class="hljs-built_in">str</span>, <span class="hljs-built_in">str</span>]] = <span class="hljs-literal">None</span>,
    cache_type: <span class="hljs-built_in">str</span> = <span class="hljs-string">"extract"</span>,
    chunk_id: <span class="hljs-built_in">str</span> | <span class="hljs-literal">None</span> = <span class="hljs-literal">None</span>,
    cache_keys_collector: <span class="hljs-built_in">list</span> = <span class="hljs-literal">None</span>,
</span>) -&gt; <span class="hljs-built_in">tuple</span>[<span class="hljs-built_in">str</span>, <span class="hljs-built_in">int</span>]:
</code></pre>
<p>å…ˆæ¸…æ´— prompt å’Œ history messagesï¼ˆå¦‚æœè¯¥å‚æ•°ä¸ä¸º Noneï¼‰ï¼Œç„¶åæ„é€ å®Œæ•´çš„ promptï¼Œsystem prompt + user prompt + history messages</p>
<pre><code class="hljs language-python" lang="python">prompt_parts = []
<span class="hljs-keyword">if</span> safe_user_prompt:
    prompt_parts.append(safe_user_prompt)
<span class="hljs-keyword">if</span> safe_system_prompt:
    prompt_parts.append(safe_system_prompt)
<span class="hljs-keyword">if</span> history:
    prompt_parts.append(history)
_prompt = <span class="hljs-string">"\n"</span>.join(prompt_parts)
</code></pre>
<p>å¯¹æœ€ç»ˆçš„ prompt è¿›è¡Œ hashï¼Œä»ç¼“å­˜ä¸­è·å–ç¼“å­˜ç»“æœã€‚å¦‚æœå‘½ä¸­ç›´æ¥è¿”å›ç¼“å­˜ç»“æ„</p>
<pre><code class="hljs language-python" lang="python">arg_hash = compute_args_hash(_prompt)
cache_key = generate_cache_key(<span class="hljs-string">"default"</span>, cache_type, arg_hash)
cached_result = <span class="hljs-keyword">await</span> handle_cache(
    llm_response_cache,
    arg_hash,
    _prompt,
    <span class="hljs-string">"default"</span>,
    cache_type=cache_type,
)
<span class="hljs-keyword">if</span> cached_result:
    content, timestamp = cached_result
    logger.debug(<span class="hljs-string">f"Found cache for <span class="hljs-subst">{arg_hash}</span>"</span>)
    statistic_data[<span class="hljs-string">"llm_cache"</span>] += <span class="hljs-number">1</span>

    <span class="hljs-comment"># Add cache key to collector if provided</span>
    <span class="hljs-keyword">if</span> cache_keys_collector <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span>:
        cache_keys_collector.append(cache_key)

    <span class="hljs-keyword">return</span> content, timestamp
</code></pre>
<p>æ— å‘½ä¸­ä»»ä½•ç¼“å­˜ï¼Œè°ƒç”¨ LLM è¿›è¡Œæå–åå­˜å…¥ç¼“å­˜ä¸­ã€‚</p>
<pre><code class="hljs language-python" lang="python">res = <span class="hljs-keyword">await</span> use_llm_func(
    safe_user_prompt, system_prompt=safe_system_prompt, **kwargs
)
...
<span class="hljs-keyword">await</span> save_to_cache(
    llm_response_cache,
    CacheData(
        args_hash=arg_hash,
        content=res,
        prompt=_prompt,
        cache_type=cache_type,
        chunk_id=chunk_id,
    ),
)
</code></pre>
<h5 data-id="heading-20">3.1.3 äºŒæ¬¡æŠ½å–è¡¥å……</h5>
<p>å¦‚æœ entity_extract_max_gleaning å¤§äº 0ï¼Œè¯´æ˜éœ€è¦è¡¥å……æŠ½å–ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">if</span> entity_extract_max_gleaning &gt; <span class="hljs-number">0</span>:
    glean_result, timestamp = <span class="hljs-keyword">await</span> use_llm_func_with_cache(
        entity_continue_extraction_user_prompt,
        use_llm_func,
        system_prompt=entity_extraction_system_prompt,
        llm_response_cache=llm_response_cache,
        history_messages=history,
        cache_type=<span class="hljs-string">"extract"</span>,
        chunk_id=chunk_key,
        cache_keys_collector=cache_keys_collector,
    )
</code></pre>
<h5 data-id="heading-21">3.1.4 å®ä½“ç»“æ„è½¬æ¢</h5>
<p>æŠŠ LLM è¾“å‡ºçš„æ–‡æœ¬æ ¼å¼ç»“æœï¼ˆå®ä½“ + å…³ç³»ï¼‰è§£ææˆç»“æ„åŒ–çš„æ•°æ®ï¼šnodes å’Œ edges</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">_process_extraction_result</span>(<span class="hljs-params">
    result: <span class="hljs-built_in">str</span>,
    chunk_key: <span class="hljs-built_in">str</span>,
    timestamp: <span class="hljs-built_in">int</span>,
    file_path: <span class="hljs-built_in">str</span> = <span class="hljs-string">"unknown_source"</span>,
    tuple_delimiter: <span class="hljs-built_in">str</span> = <span class="hljs-string">"&lt;|#|&gt;"</span>,
    completion_delimiter: <span class="hljs-built_in">str</span> = <span class="hljs-string">"&lt;|COMPLETE|&gt;"</span>,
</span>) -&gt; <span class="hljs-built_in">tuple</span>[<span class="hljs-built_in">dict</span>, <span class="hljs-built_in">dict</span>]:
</code></pre>
<p>ä»¥ä¸‹æ ¹æ®ä»£ç æ¨æµ‹çš„ç®€å•åœºæ™¯ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// LLM è¾“å‡º</span>
entity&lt;|#|&gt; ä¹”å¸ƒæ–¯ &lt;|#|&gt; äººç‰©
entity&lt;|#|&gt; è‹¹æœå…¬å¸ &lt;|#|&gt; ä¼ä¸š
relation&lt;|#|&gt; è‹¹æœå…¬å¸ &lt;|#|&gt; åˆ›ç«‹ &lt;|#|&gt; ä¹”å¸ƒæ–¯
&lt;|<span class="hljs-variable constant_">COMPLETE</span>|&gt;

<span class="hljs-comment">// nodes</span>
{
  <span class="hljs-string">"ä¹”å¸ƒæ–¯"</span>: [
    {
      <span class="hljs-string">"entity_name"</span>: <span class="hljs-string">"ä¹”å¸ƒæ–¯"</span>,
      <span class="hljs-string">"entity_type"</span>: <span class="hljs-string">"äººç‰©"</span>,
      <span class="hljs-string">"file_path"</span>: <span class="hljs-string">"doc1.pdf"</span>
    }
  ],
  <span class="hljs-string">"è‹¹æœå…¬å¸"</span>: [
    {
      <span class="hljs-string">"entity_name"</span>: <span class="hljs-string">"è‹¹æœå…¬å¸"</span>,
      <span class="hljs-string">"entity_type"</span>: <span class="hljs-string">"ä¼ä¸š"</span>
    }
  ]
}

<span class="hljs-comment">// edges</span>
{
  [<span class="hljs-string">"è‹¹æœå…¬å¸"</span>, <span class="hljs-string">"ä¹”å¸ƒæ–¯"</span>]: [
    {
      <span class="hljs-string">"src_id"</span>: <span class="hljs-string">"è‹¹æœå…¬å¸"</span>,
      <span class="hljs-string">"relation"</span>: <span class="hljs-string">"åˆ›ç«‹"</span>,
      <span class="hljs-string">"tgt_id"</span>: <span class="hljs-string">"ä¹”å¸ƒæ–¯"</span>
    }
  ]
}
</code></pre>
<h4 data-id="heading-22">3.2 å¹¶å‘å¤„ç†æ‰€æœ‰ chunk å®ä½“æå–</h4>
<p>3.1 ä¸­ä»‹ç»äº†å•ä¸ª chunk çš„å®ä½“æŠ½å–æµç¨‹ï¼Œåœ¨ LightRAG ä¸­ï¼Œä¼šå¹¶å‘å¤„ç†æ‰€æœ‰ chunk çš„å®ä½“æŠ½å–ï¼Œé»˜è®¤æ˜¯ 4 ä¸ª chunk å¹¶å‘å¤„ç†ã€‚</p>
<pre><code class="hljs language-python" lang="python">chunk_max_async = global_config.get(<span class="hljs-string">"llm_model_max_async"</span>, <span class="hljs-number">4</span>)
semaphore = asyncio.Semaphore(chunk_max_async)

<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">_process_with_semaphore</span>(<span class="hljs-params">chunk</span>):
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">with</span> semaphore:
        <span class="hljs-comment"># Check for cancellation before processing chunk</span>
        <span class="hljs-keyword">if</span> pipeline_status <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span> <span class="hljs-keyword">and</span> pipeline_status_lock <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span>:
            <span class="hljs-keyword">async</span> <span class="hljs-keyword">with</span> pipeline_status_lock:
                <span class="hljs-keyword">if</span> pipeline_status.get(<span class="hljs-string">"cancellation_requested"</span>, <span class="hljs-literal">False</span>):
                    <span class="hljs-keyword">raise</span> PipelineCancelledException(
                        <span class="hljs-string">"User cancelled during chunk processing"</span>
                    )

        <span class="hljs-keyword">try</span>:
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> _process_single_content(chunk)
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            chunk_id = chunk[<span class="hljs-number">0</span>]  <span class="hljs-comment"># Extract chunk_id from chunk[0]</span>
            prefixed_exception = create_prefixed_exception(e, chunk_id)
            <span class="hljs-keyword">raise</span> prefixed_exception <span class="hljs-keyword">from</span> e

tasks = []
<span class="hljs-keyword">for</span> c <span class="hljs-keyword">in</span> ordered_chunks:
    task = asyncio.create_task(_process_with_semaphore(c))
    tasks.append(task)
</code></pre>
<h3 data-id="heading-23">4. åˆå¹¶çŸ¥è¯†å›¾è°±ï¼ˆå…³é”®ï¼‰</h3>
<p>é‡‡ç”¨ç»å…¸å›¾æ•°æ®åº“ä¸¤é˜¶æ®µåˆå¹¶æ³•ï¼Œå…ˆåˆå¹¶æ‰€æœ‰å®ä½“ï¼ˆèŠ‚ç‚¹ï¼‰ï¼Œå†åˆå¹¶æ‰€æœ‰å…³ç³»ï¼ˆè¾¹ï¼‰ã€‚å› ä¸ºå…³ç³»ï¼ˆè¾¹ï¼‰å¼•ç”¨äº†å®ä½“ï¼ˆèŠ‚ç‚¹ï¼‰ï¼Œæ‰€ä»¥å¿…é¡»å…ˆåˆå¹¶å®ä½“ï¼ˆèŠ‚ç‚¹ï¼‰ã€‚</p>
<p>ä¸¤é˜¶æ®µåˆå¹¶æ³•èƒ½å¤Ÿé¿å…ä»¥ä¸‹åœºæ™¯ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-tag">A</span> â†’ <span class="hljs-selector-tag">B</span>ï¼Œå…³ç³»ä¸­å‡ºç° <span class="hljs-selector-tag">B</span>

ä½† <span class="hljs-selector-tag">B</span> çš„å®ä½“è¿˜æ²¡æœ‰è¢«å†™å…¥

å…³ç³» upsert ä¼šå¤±è´¥
</code></pre>
<h4 data-id="heading-24">4.1 èšåˆæ‰€æœ‰èŠ‚ç‚¹ / è¾¹</h4>
<p>æŠŠå¤šä¸ª chunk ä¸­åŒåå®ä½“æ”¾ä¸€èµ·ã€‚æŒ‰ç…§è¾¹ key æ’åºï¼Œå®ç°æ— å‘å›¾çš„åˆå¹¶ã€‚ä¾‹å¦‚ ("A","B") å’Œ ("B","A") ä¼šå½’ä¸ºåŒä¸€æ¡è¾¹ã€‚</p>
<pre><code class="hljs language-python" lang="python">all_nodes = defaultdict(<span class="hljs-built_in">list</span>)
all_edges = defaultdict(<span class="hljs-built_in">list</span>)

<span class="hljs-keyword">for</span> maybe_nodes, maybe_edges <span class="hljs-keyword">in</span> chunk_results:
    <span class="hljs-keyword">for</span> entity_name, entities <span class="hljs-keyword">in</span> maybe_nodes.items():
        all_nodes[entity_name].extend(entities)

    <span class="hljs-keyword">for</span> edge_key, edges <span class="hljs-keyword">in</span> maybe_edges.items():
        sorted_edge_key = <span class="hljs-built_in">tuple</span>(<span class="hljs-built_in">sorted</span>(edge_key))
        all_edges[sorted_edge_key].extend(edges)

</code></pre>
<h4 data-id="heading-25">4.2 åˆå¹¶å…¨éƒ¨å®ä½“ï¼ˆèŠ‚ç‚¹ï¼‰</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">_merge_nodes_then_upsert</span>(<span class="hljs-params">
    entity_name: <span class="hljs-built_in">str</span>,
    nodes_data: <span class="hljs-built_in">list</span>[<span class="hljs-built_in">dict</span>],
    knowledge_graph_inst: BaseGraphStorage,
    entity_vdb: BaseVectorStorage | <span class="hljs-literal">None</span>,
    global_config: <span class="hljs-built_in">dict</span>,
    pipeline_status: <span class="hljs-built_in">dict</span> = <span class="hljs-literal">None</span>,
    pipeline_status_lock=<span class="hljs-literal">None</span>,
    llm_response_cache: BaseKVStorage | <span class="hljs-literal">None</span> = <span class="hljs-literal">None</span>,
    entity_chunks_storage: BaseKVStorage | <span class="hljs-literal">None</span> = <span class="hljs-literal">None</span>,
</span>):
</code></pre>
<h5 data-id="heading-26">4.2.1 ä»å½“å‰çŸ¥è¯†å›¾è°±ä¸­è·å–å®ä½“</h5>
<p>é€šè¿‡å®ä½“åç§°ä»å½“å‰çŸ¥è¯†å›¾è°±ä¸­è·å–å®ä½“ä¿¡æ¯ã€‚</p>
<pre><code class="hljs language-python" lang="python">already_node = <span class="hljs-keyword">await</span> knowledge_graph_inst.get_node(entity_name)
<span class="hljs-keyword">if</span> already_node:
    already_entity_types.append(already_node[<span class="hljs-string">"entity_type"</span>])
    already_source_ids.extend(already_node[<span class="hljs-string">"source_id"</span>].split(GRAPH_FIELD_SEP))
    already_file_paths.extend(already_node[<span class="hljs-string">"file_path"</span>].split(GRAPH_FIELD_SEP))
    already_description.extend(already_node[<span class="hljs-string">"description"</span>].split(GRAPH_FIELD_SEP))
</code></pre>
<h5 data-id="heading-27">4.2.2 åˆå¹¶å®ä½“æ‰€å…³è”çš„ chunk åˆ—è¡¨</h5>
<p>åˆå¹¶æ–°çš„ chunk id åˆ—è¡¨åˆ°å·²å­˜åœ¨çš„åˆ—è¡¨ä¸­ã€‚</p>
<pre><code class="hljs language-python" lang="python">full_source_ids = merge_source_ids(existing_full_source_ids, new_source_ids)
</code></pre>
<h5 data-id="heading-28">4.2.3 è£å‰ª chunk åˆ—è¡¨é•¿åº¦</h5>
<p>æ”¯æŒ KEEP å’Œ FIFO ç­–ç•¥ï¼Œé»˜è®¤é‡‡ç”¨ KEEP ç­–ç•¥ã€‚ä¸ºäº†ä¿è¯åç»­æ‘˜è¦ç¯èŠ‚ä¸Šä¸‹æ–‡æº¢å‡ºé—®é¢˜ï¼Œé»˜è®¤é™åˆ¶æ¯ä¸ªå®ä½“æœ€å¤šå…³è” 300 ä¸ª chunkã€‚</p>
<ul>
<li>KEEP ç­–ç•¥ï¼šä¿æ—§å»æ–°ï¼Œä¿ç•™æ‰€æœ‰å…³è”çš„ chunk idï¼Œä½†å¯¹æ–°åŠ å…¥ä½†è¶…é™çš„ chunk åç»­ä¸ä¼šè¿›è¡Œæ‘˜è¦ã€‚</li>
<li>FIFO ç­–ç•¥ï¼šä¿æ–°å»æ—§ï¼ŒæŒ‰é¡ºåºä¿ç•™å…³è”çš„ chunk idï¼Œè¶…é™çš„ chunk ä¼šè¢«å…ˆè¿›å…ˆå‡ºçš„ç­–ç•¥ä¸¢å¼ƒã€‚</li>
</ul>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">if</span> limit_method == SOURCE_IDS_LIMIT_METHOD_KEEP:
    allowed_source_ids = <span class="hljs-built_in">set</span>(source_ids)
    filtered_nodes = []
    <span class="hljs-keyword">for</span> dp <span class="hljs-keyword">in</span> nodes_data:
        source_id = dp.get(<span class="hljs-string">"source_id"</span>)
        <span class="hljs-comment"># Skip descriptions sourced from chunks dropped by the limitation cap</span>
        <span class="hljs-keyword">if</span> (
            source_id
            <span class="hljs-keyword">and</span> source_id <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> allowed_source_ids
            <span class="hljs-keyword">and</span> source_id <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> existing_full_source_ids
        ):
            <span class="hljs-keyword">continue</span>
        filtered_nodes.append(dp)
    nodes_data = filtered_nodes
<span class="hljs-keyword">else</span>:  <span class="hljs-comment"># In FIFO mode, keep all nodes - truncation happens at source_ids level only</span>
    nodes_data = <span class="hljs-built_in">list</span>(nodes_data)

<span class="hljs-keyword">if</span> (
    limit_method == SOURCE_IDS_LIMIT_METHOD_KEEP
    <span class="hljs-keyword">and</span> <span class="hljs-built_in">len</span>(existing_full_source_ids) &gt;= max_source_limit
    <span class="hljs-keyword">and</span> <span class="hljs-keyword">not</span> nodes_data
):
    <span class="hljs-keyword">if</span> already_node:
        logger.info(
            <span class="hljs-string">f"Skipped `<span class="hljs-subst">{entity_name}</span>`: KEEP old chunks <span class="hljs-subst">{already_source_ids}</span>/<span class="hljs-subst">{<span class="hljs-built_in">len</span>(full_source_ids)}</span>"</span>
        )
        existing_node_data = <span class="hljs-built_in">dict</span>(already_node)
        <span class="hljs-keyword">return</span> existing_node_data
</code></pre>
<h5 data-id="heading-29">4.2.4 åˆå¹¶å®ä½“ description</h5>
<p>ä¼ å…¥çš„å•ä¸ªå®ä½“å¯èƒ½å…³è”å¤šä¸ª chunkï¼ŒåŒæ—¶å¯¹åº”å¤šä¸ª descriptionã€‚</p>
<p>éœ€è¦å¯¹å¤šä¸ª description å»é‡åæŒ‰æ—¶é—´æ’åºï¼Œåå°†æ’åºçš„ description åˆ—è¡¨ä¸çŸ¥è¯†å›¾è°±ä¸­å·²å­˜åœ¨çš„ç›¸åŒå®ä½“ description åˆå¹¶ã€‚</p>
<pre><code class="hljs language-python" lang="python">description_list = already_description + sorted_descriptions
</code></pre>
<h5 data-id="heading-30">4.2.5 ç”Ÿæˆæœ€ç»ˆæ‘˜è¦ description</h5>
<p>å°†åˆå¹¶åçš„å¤šä¸ªå®ä½“ description ä¼ å…¥ LLM è¿›è¡Œæ‘˜è¦ï¼Œç”Ÿæˆæœ€ç»ˆçš„ descriptionã€‚</p>
<pre><code class="hljs language-python" lang="python">description, llm_was_used = <span class="hljs-keyword">await</span> _handle_entity_relation_summary(
    <span class="hljs-string">"Entity"</span>,
    entity_name,
    description_list,
    GRAPH_FIELD_SEP,
    global_config,
    llm_response_cache,
)
</code></pre>
<h5 data-id="heading-31">4.2.6 åˆå¹¶å®ä½“æºæ–‡ä»¶è·¯å¾„</h5>
<p>ä¼ å…¥çš„å•ä¸ªå®ä½“å¯èƒ½å…³è”å¤šä¸ª chunkï¼ŒåŒæ—¶å¯¹åº”å¤šä¸ªæºæ–‡ä»¶è·¯å¾„ã€‚éœ€è¦å¯¹å¤šä¸ªæºæ–‡ä»¶è·¯å¾„å»é‡ååˆå¹¶ï¼Œç”Ÿæˆæœ€ç»ˆçš„æºæ–‡ä»¶è·¯å¾„åˆ—è¡¨ã€‚ä¸åˆå¹¶ chunk åˆ—è¡¨ç±»ä¼¼ï¼Œä¹Ÿéœ€è¦é™åˆ¶é•¿åº¦ï¼Œé»˜è®¤é‡‡ç”¨ KEEP ç­–ç•¥ã€‚</p>
<h5 data-id="heading-32">4.2.7 æ›´æ–°å›¾æ•°æ®åº“å®ä½“ä¿¡æ¯</h5>
<p>å…¶ä¸­é™¤äº†å®ä½“åç§°ï¼Œè¿˜åŒ…å«å®ä½“ idã€ç±»å‹ã€æè¿°ã€æºæ–‡ä»¶è·¯å¾„ã€åˆ›å»ºæ—¶é—´ã€æˆªæ–­ä¿¡æ¯ç­‰ã€‚</p>
<pre><code class="hljs language-python" lang="python">node_data = <span class="hljs-built_in">dict</span>(
    entity_id=entity_name,
    entity_type=entity_type,
    description=description,
    source_id=source_id,
    file_path=file_path,
    created_at=<span class="hljs-built_in">int</span>(time.time()),
    truncate=truncation_info,
)
<span class="hljs-keyword">await</span> knowledge_graph_inst.upsert_node(
    entity_name,
    node_data=node_data,
)
</code></pre>
<h5 data-id="heading-33">4.2.8 æ›´æ–°å‘é‡æ•°æ®åº“ä¿¡æ¯</h5>
<p>å°†å®ä½“åç§°ï¼Œæ‘˜è¦æ·»åŠ åˆ°å‘é‡æ•°æ®åº“ä¸­ç”¨äºå¬å›ã€‚</p>
<pre><code class="hljs language-python" lang="python">entity_vdb_id = compute_mdhash_id(<span class="hljs-built_in">str</span>(entity_name), prefix=<span class="hljs-string">"ent-"</span>)
entity_content = <span class="hljs-string">f"<span class="hljs-subst">{entity_name}</span>\n<span class="hljs-subst">{description}</span>"</span>
data_for_vdb = {
    entity_vdb_id: {
        <span class="hljs-string">"entity_name"</span>: entity_name,
        <span class="hljs-string">"entity_type"</span>: entity_type,
        <span class="hljs-string">"content"</span>: entity_content,
        <span class="hljs-string">"source_id"</span>: source_id,
        <span class="hljs-string">"file_path"</span>: file_path,
    }
}
<span class="hljs-keyword">await</span> safe_vdb_operation_with_exception(
    operation=<span class="hljs-keyword">lambda</span> payload=data_for_vdb: entity_vdb.upsert(payload),
    operation_name=<span class="hljs-string">"entity_upsert"</span>,
    entity_name=entity_name,
    max_retries=<span class="hljs-number">3</span>,
    retry_delay=<span class="hljs-number">0.1</span>,
)
</code></pre>
<h5 data-id="heading-34">4.2.9 è¿”å›æœ€ç»ˆå®ä½“èŠ‚ç‚¹ä¿¡æ¯</h5>
<pre><code class="hljs language-python" lang="python">node_data = <span class="hljs-built_in">dict</span>(
    entity_id=entity_name,
    entity_type=entity_type,
    description=description,
    source_id=source_id,
    file_path=file_path,
    created_at=<span class="hljs-built_in">int</span>(time.time()),
    truncate=truncation_info,
)
<span class="hljs-keyword">return</span> node_data
</code></pre>
<h4 data-id="heading-35">4.3 åˆå¹¶å…¨éƒ¨å…³ç³»ï¼ˆè¾¹ï¼‰</h4>
<p>å…¶ä¸­ src_id å’Œ tgt_id åˆ†åˆ«ä¸ºå…³ç³»çš„æºèŠ‚ç‚¹å’Œç›®æ ‡èŠ‚ç‚¹ï¼Œedge_data ä¸ºèŠ‚ç‚¹ä¹‹é—´çš„å…³ç³»ç‰‡æ®µåˆ—è¡¨ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">_merge_edges_then_upsert</span>(<span class="hljs-params">
    src_id: <span class="hljs-built_in">str</span>,
    tgt_id: <span class="hljs-built_in">str</span>,
    edges_data: <span class="hljs-built_in">list</span>[<span class="hljs-built_in">dict</span>],
    knowledge_graph_inst: BaseGraphStorage,
    relationships_vdb: BaseVectorStorage | <span class="hljs-literal">None</span>,
    entity_vdb: BaseVectorStorage | <span class="hljs-literal">None</span>,
    global_config: <span class="hljs-built_in">dict</span>,
    pipeline_status: <span class="hljs-built_in">dict</span> = <span class="hljs-literal">None</span>,
    pipeline_status_lock=<span class="hljs-literal">None</span>,
    llm_response_cache: BaseKVStorage | <span class="hljs-literal">None</span> = <span class="hljs-literal">None</span>,
    added_entities: <span class="hljs-built_in">list</span> = <span class="hljs-literal">None</span>,  <span class="hljs-comment"># New parameter to track entities added during edge processing</span>
    relation_chunks_storage: BaseKVStorage | <span class="hljs-literal">None</span> = <span class="hljs-literal">None</span>,
    entity_chunks_storage: BaseKVStorage | <span class="hljs-literal">None</span> = <span class="hljs-literal">None</span>,
</span>):
</code></pre>
<h5 data-id="heading-36">4.3.1 ä»å½“å‰çŸ¥è¯†å›¾è°±ä¸­è·å–å·²æœ‰å…³ç³»</h5>
<p>é€šè¿‡èŠ‚ç‚¹ä»å½“å‰çŸ¥è¯†åº“ä¸­è·å–å·²æœ‰å…³ç³»ä¿¡æ¯ï¼Œè‹¥èŠ‚ç‚¹ä¹‹é—´å­˜åœ¨å·²æœ‰å…³ç³»ï¼Œåˆ™æå–å…³ç³»ç›¸å…³ä¿¡æ¯</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># 1. Get existing edge data from graph storage</span>
<span class="hljs-keyword">if</span> <span class="hljs-keyword">await</span> knowledge_graph_inst.has_edge(src_id, tgt_id):
    already_edge = <span class="hljs-keyword">await</span> knowledge_graph_inst.get_edge(src_id, tgt_id)
    <span class="hljs-comment"># Handle the case where get_edge returns None or missing fields</span>
    <span class="hljs-keyword">if</span> already_edge:
        <span class="hljs-comment"># Get weight with default 1.0 if missing</span>
        already_weights.append(already_edge.get(<span class="hljs-string">"weight"</span>, <span class="hljs-number">1.0</span>))

        <span class="hljs-comment"># Get source_id with empty string default if missing or None</span>
        <span class="hljs-keyword">if</span> already_edge.get(<span class="hljs-string">"source_id"</span>) <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span>:
            already_source_ids.extend(
                already_edge[<span class="hljs-string">"source_id"</span>].split(GRAPH_FIELD_SEP)
            )
        <span class="hljs-comment"># Get file_path with empty string default if missing or None</span>
        <span class="hljs-keyword">if</span> already_edge.get(<span class="hljs-string">"file_path"</span>) <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span>:
            already_file_paths.extend(
                already_edge[<span class="hljs-string">"file_path"</span>].split(GRAPH_FIELD_SEP)
            )
        <span class="hljs-comment"># Get description with empty string default if missing or None</span>
        <span class="hljs-keyword">if</span> already_edge.get(<span class="hljs-string">"description"</span>) <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span>:
            already_description.extend(
                already_edge[<span class="hljs-string">"description"</span>].split(GRAPH_FIELD_SEP)
            )
        <span class="hljs-comment"># Get keywords with empty string default if missing or None</span>
        <span class="hljs-keyword">if</span> already_edge.get(<span class="hljs-string">"keywords"</span>) <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span>:
            already_keywords.extend(
                split_string_by_multi_markers(
                    already_edge[<span class="hljs-string">"keywords"</span>], [GRAPH_FIELD_SEP]
                )
            )
</code></pre>
<h5 data-id="heading-37">4.3.2 åˆå¹¶ source id åˆ—è¡¨</h5>
<p>è·å–æ‰€æœ‰å…³ç³»ç‰‡æ®µä¸­çš„ source_id åˆ—è¡¨ï¼Œåˆå¹¶åˆ°å·²å­˜åœ¨çš„ source_id åˆ—è¡¨ä¸­ã€‚</p>
<pre><code class="hljs language-python" lang="python">new_source_ids = [dp[<span class="hljs-string">"source_id"</span>] <span class="hljs-keyword">for</span> dp <span class="hljs-keyword">in</span> edges_data <span class="hljs-keyword">if</span> dp.get(<span class="hljs-string">"source_id"</span>)]
full_source_ids = merge_source_ids(existing_full_source_ids, new_source_ids)
</code></pre>
<h5 data-id="heading-38">4.3.3 è£å‰ª edges_data åˆ—è¡¨</h5>
<p>å’Œ 4.2.3 è£å‰ª chunk åˆ—è¡¨é•¿åº¦ ç±»ä¼¼ï¼Œä¸ºäº†é˜²æ­¢åç»­é€šè¿‡ LLM è¿›è¡Œæ‘˜è¦å‡ºç°ä¸Šä¸‹æ–‡æº¢å‡ºï¼Œéœ€è¦é™åˆ¶ edges_data åˆ—è¡¨é•¿åº¦ï¼Œæ”¯æŒ KEEP å’Œ FIFO ç­–ç•¥ï¼Œé»˜è®¤é‡‡ç”¨ KEEP ç­–ç•¥ã€‚</p>
<pre><code class="hljs language-python" lang="python"> <span class="hljs-keyword">if</span> limit_method == SOURCE_IDS_LIMIT_METHOD_KEEP:
    allowed_source_ids = <span class="hljs-built_in">set</span>(source_ids)
    filtered_edges = []
    <span class="hljs-keyword">for</span> dp <span class="hljs-keyword">in</span> edges_data:
        source_id = dp.get(<span class="hljs-string">"source_id"</span>)
        <span class="hljs-comment"># Skip relationship fragments sourced from chunks dropped by keep oldest cap</span>
        <span class="hljs-keyword">if</span> (
            source_id
            <span class="hljs-keyword">and</span> source_id <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> allowed_source_ids
            <span class="hljs-keyword">and</span> source_id <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> existing_full_source_ids
        ):
            <span class="hljs-keyword">continue</span>
        filtered_edges.append(dp)
    edges_data = filtered_edges
<span class="hljs-keyword">else</span>:  <span class="hljs-comment"># In FIFO mode, keep all edges - truncation happens at source_ids level only</span>
    edges_data = <span class="hljs-built_in">list</span>(edges_data)

<span class="hljs-comment"># 5. Check if we need to skip summary due to source_ids limit</span>
<span class="hljs-keyword">if</span> (
    limit_method == SOURCE_IDS_LIMIT_METHOD_KEEP
    <span class="hljs-keyword">and</span> <span class="hljs-built_in">len</span>(existing_full_source_ids) &gt;= max_source_limit
    <span class="hljs-keyword">and</span> <span class="hljs-keyword">not</span> edges_data
):
    <span class="hljs-keyword">if</span> already_edge:
        logger.info(
            <span class="hljs-string">f"Skipped `<span class="hljs-subst">{src_id}</span>`~`<span class="hljs-subst">{tgt_id}</span>`: KEEP old chunks  <span class="hljs-subst">{already_source_ids}</span>/<span class="hljs-subst">{<span class="hljs-built_in">len</span>(full_source_ids)}</span>"</span>
        )
        existing_edge_data = <span class="hljs-built_in">dict</span>(already_edge)
        <span class="hljs-keyword">return</span> existing_edge_data
    <span class="hljs-keyword">else</span>:
        logger.error(
            <span class="hljs-string">f"Internal Error: already_node missing for `<span class="hljs-subst">{src_id}</span>`~`<span class="hljs-subst">{tgt_id}</span>`"</span>
        )
        <span class="hljs-keyword">raise</span> ValueError(
            <span class="hljs-string">f"Internal Error: already_node missing for `<span class="hljs-subst">{src_id}</span>`~`<span class="hljs-subst">{tgt_id}</span>`"</span>
        )
</code></pre>
<h5 data-id="heading-39">4.3.4 åˆå¹¶ç›¸å…³å­—æ®µ</h5>
<p>åˆå¹¶æ‰€æœ‰å…³ç³»ç‰‡æ®µä¸­çš„ç›¸å…³å­—æ®µï¼ŒåŒ…æ‹¬ source_id, weight, keywords, description, file_path ç­‰ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># 6.1 Finalize source_id</span>
source_id = GRAPH_FIELD_SEP.join(source_ids)

<span class="hljs-comment"># 6.2 Finalize weight by summing new edges and existing weights</span>
weight = <span class="hljs-built_in">sum</span>([dp[<span class="hljs-string">"weight"</span>] <span class="hljs-keyword">for</span> dp <span class="hljs-keyword">in</span> edges_data] + already_weights)

<span class="hljs-comment"># 6.2 Finalize keywords by merging existing and new keywords</span>
all_keywords = <span class="hljs-built_in">set</span>()
<span class="hljs-comment"># Process already_keywords (which are comma-separated)</span>
<span class="hljs-keyword">for</span> keyword_str <span class="hljs-keyword">in</span> already_keywords:
    <span class="hljs-keyword">if</span> keyword_str:  <span class="hljs-comment"># Skip empty strings</span>
        all_keywords.update(k.strip() <span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> keyword_str.split(<span class="hljs-string">","</span>) <span class="hljs-keyword">if</span> k.strip())
<span class="hljs-comment"># Process new keywords from edges_data</span>
<span class="hljs-keyword">for</span> edge <span class="hljs-keyword">in</span> edges_data:
    <span class="hljs-keyword">if</span> edge.get(<span class="hljs-string">"keywords"</span>):
        all_keywords.update(
            k.strip() <span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> edge[<span class="hljs-string">"keywords"</span>].split(<span class="hljs-string">","</span>) <span class="hljs-keyword">if</span> k.strip()
        )
<span class="hljs-comment"># Join all unique keywords with commas</span>
keywords = <span class="hljs-string">","</span>.join(<span class="hljs-built_in">sorted</span>(all_keywords))

<span class="hljs-comment"># 7. Deduplicate by description, keeping first occurrence in the same document</span>
unique_edges = {}
<span class="hljs-keyword">for</span> dp <span class="hljs-keyword">in</span> edges_data:
    description_value = dp.get(<span class="hljs-string">"description"</span>)
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> description_value:
        <span class="hljs-keyword">continue</span>
    <span class="hljs-keyword">if</span> description_value <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> unique_edges:
        unique_edges[description_value] = dp

<span class="hljs-comment"># Sort description by timestamp, then by description length (largest to smallest) when timestamps are the same</span>
sorted_edges = <span class="hljs-built_in">sorted</span>(
    unique_edges.values(),
    key=<span class="hljs-keyword">lambda</span> x: (x.get(<span class="hljs-string">"timestamp"</span>, <span class="hljs-number">0</span>), -<span class="hljs-built_in">len</span>(x.get(<span class="hljs-string">"description"</span>, <span class="hljs-string">""</span>))),
)
sorted_descriptions = [dp[<span class="hljs-string">"description"</span>] <span class="hljs-keyword">for</span> dp <span class="hljs-keyword">in</span> sorted_edges]

<span class="hljs-comment"># Combine already_description with sorted new descriptions</span>
description_list = already_description + sorted_descriptions
<span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> description_list:
    logger.error(<span class="hljs-string">f"Relation <span class="hljs-subst">{src_id}</span>~<span class="hljs-subst">{tgt_id}</span> has no description"</span>)
    <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">f"Relation <span class="hljs-subst">{src_id}</span>~<span class="hljs-subst">{tgt_id}</span> has no description"</span>)
</code></pre>
<h5 data-id="heading-40">4.3.5 å¯¹ description åˆ—è¡¨è¿›è¡Œæ‘˜è¦</h5>
<pre><code class="hljs language-python" lang="python">description, llm_was_used = <span class="hljs-keyword">await</span> _handle_entity_relation_summary(
    <span class="hljs-string">"Relation"</span>,
    <span class="hljs-string">f"(<span class="hljs-subst">{src_id}</span>, <span class="hljs-subst">{tgt_id}</span>)"</span>,
    description_list,
    GRAPH_FIELD_SEP,
    global_config,
    llm_response_cache,
)
</code></pre>
<h5 data-id="heading-41">4.3.6 æ·»åŠ /æ›´æ–° å›¾æ•°æ®åº“å’Œå‘é‡æ•°æ®åº“ä¸­çš„å®ä½“ä¿¡æ¯</h5>
<p>å¦‚æœå®ä½“ä¸å­˜åœ¨ï¼Œåˆ™æ·»åŠ åˆ°å›¾æ•°æ®åº“å’Œå‘é‡æ•°æ®åº“ä¸­ï¼›å¦‚æœå®ä½“å·²å­˜åœ¨ï¼Œåˆ™æ›´æ–°å›¾æ•°æ®åº“å’Œå‘é‡æ•°æ®åº“ä¸­çš„å®ä½“ä¿¡æ¯ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># graph db</span>
node_data = {
    <span class="hljs-string">"entity_id"</span>: need_insert_id,
    <span class="hljs-string">"source_id"</span>: source_id,
    <span class="hljs-string">"description"</span>: description,
    <span class="hljs-string">"entity_type"</span>: <span class="hljs-string">"UNKNOWN"</span>,
    <span class="hljs-string">"file_path"</span>: file_path,
    <span class="hljs-string">"created_at"</span>: node_created_at,
    <span class="hljs-string">"truncate"</span>: <span class="hljs-string">""</span>,
}
<span class="hljs-keyword">await</span> knowledge_graph_inst.upsert_node(need_insert_id, node_data=node_data)
...
<span class="hljs-comment"># vdb</span>
vdb_data = {
    entity_vdb_id: {
        <span class="hljs-string">"content"</span>: entity_content,
        <span class="hljs-string">"entity_name"</span>: need_insert_id,
        <span class="hljs-string">"source_id"</span>: source_id,
        <span class="hljs-string">"entity_type"</span>: <span class="hljs-string">"UNKNOWN"</span>,
        <span class="hljs-string">"file_path"</span>: file_path,
    }
}
<span class="hljs-keyword">await</span> safe_vdb_operation_with_exception(
    operation=<span class="hljs-keyword">lambda</span> payload=vdb_data: entity_vdb.upsert(payload),
    operation_name=<span class="hljs-string">"added_entity_upsert"</span>,
    entity_name=need_insert_id,
    max_retries=<span class="hljs-number">3</span>,
    retry_delay=<span class="hljs-number">0.1</span>,
)
</code></pre>
<h5 data-id="heading-42">4.3.7 æ·»åŠ /æ›´æ–° å›¾æ•°æ®åº“å’Œå‘é‡æ•°æ®åº“ä¸­çš„å…³ç³»ä¿¡æ¯</h5>
<p>å¦‚æœå…³ç³»ä¸å­˜åœ¨ï¼Œåˆ™æ·»åŠ åˆ°å›¾æ•°æ®åº“å’Œå‘é‡æ•°æ®åº“ä¸­ï¼›å¦‚æœå…³ç³»å·²å­˜åœ¨ï¼Œåˆ™æ›´æ–°å›¾æ•°æ®åº“å’Œå‘é‡æ•°æ®åº“ä¸­çš„å…³ç³»ä¿¡æ¯ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># graph db</span>
<span class="hljs-keyword">await</span> knowledge_graph_inst.upsert_edge(
    src_id,
    tgt_id,
    edge_data=<span class="hljs-built_in">dict</span>(
        weight=weight,
        description=description,
        keywords=keywords,
        source_id=source_id,
        file_path=file_path,
        created_at=edge_created_at,
        truncate=truncation_info,
    ),
)
<span class="hljs-comment"># vdb</span>
vdb_data = {
    rel_vdb_id: {
        <span class="hljs-string">"src_id"</span>: src_id,
        <span class="hljs-string">"tgt_id"</span>: tgt_id,
        <span class="hljs-string">"source_id"</span>: source_id,
        <span class="hljs-string">"content"</span>: rel_content,
        <span class="hljs-string">"keywords"</span>: keywords,
        <span class="hljs-string">"description"</span>: description,
        <span class="hljs-string">"weight"</span>: weight,
        <span class="hljs-string">"file_path"</span>: file_path,
    }
}
<span class="hljs-keyword">await</span> safe_vdb_operation_with_exception(
    operation=<span class="hljs-keyword">lambda</span> payload=vdb_data: relationships_vdb.upsert(payload),
    operation_name=<span class="hljs-string">"relationship_upsert"</span>,
    entity_name=<span class="hljs-string">f"<span class="hljs-subst">{src_id}</span>-<span class="hljs-subst">{tgt_id}</span>"</span>,
    max_retries=<span class="hljs-number">3</span>,
    retry_delay=<span class="hljs-number">0.2</span>,
)
</code></pre>
<h5 data-id="heading-43">4.3.8 è¿”å›æœ€ç»ˆå…³ç³»ä¿¡æ¯</h5>
<pre><code class="hljs language-python" lang="python">edge_data = <span class="hljs-built_in">dict</span>(
    src_id=src_id,
    tgt_id=tgt_id,
    description=description,
    keywords=keywords,
    source_id=source_id,
    file_path=file_path,
    created_at=edge_created_at,
    truncate=truncation_info,
    weight=weight,
)
eturn edge_data
</code></pre>
<h4 data-id="heading-44">4.3 KV å­˜å‚¨æ‰€æœ‰å®ä½“ï¼ˆèŠ‚ç‚¹ï¼‰å’Œå…³ç³»ï¼ˆè¾¹ï¼‰ä¿¡æ¯</h4>
<p>å°†æ‰€æœ‰å®ä½“ï¼ˆèŠ‚ç‚¹ï¼‰å’Œå…³ç³»ï¼ˆè¾¹ï¼‰ä¿¡æ¯å­˜å‚¨åˆ° KV æ•°æ®åº“ä¸­ï¼Œç”¨äºå¿«é€ŸæŸ¥è¯¢å’Œå±•ç¤ºã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># store entities</span>
<span class="hljs-keyword">await</span> full_entities_storage.upsert(
    {
        doc_id: {
            <span class="hljs-string">"entity_names"</span>: <span class="hljs-built_in">list</span>(final_entity_names),
            <span class="hljs-string">"count"</span>: <span class="hljs-built_in">len</span>(final_entity_names),
        }
    }
)
<span class="hljs-comment"># store relations</span>
<span class="hljs-keyword">await</span> full_relations_storage.upsert(
    {
        doc_id: {
            <span class="hljs-string">"relation_pairs"</span>: [
                <span class="hljs-built_in">list</span>(pair) <span class="hljs-keyword">for</span> pair <span class="hljs-keyword">in</span> final_relation_pairs
            ],
            <span class="hljs-string">"count"</span>: <span class="hljs-built_in">len</span>(final_relation_pairs),
        }
    }
)
</code></pre>
<h3 data-id="heading-45">5. æ–‡æ¡£æœ€ç»ˆçŠ¶æ€æ›´æ–°</h3>
<p>æ›´æ–°æ–‡æ¡£çš„æœ€ç»ˆçŠ¶æ€ä¸ºå·²å¤„ç†ï¼ˆPROCESSEDï¼‰æˆ–å¤±è´¥ï¼ˆFAILEDï¼‰ï¼Œå¹¶è®°å½•å¤„ç†çš„ chunk æ•°é‡ã€å¤„ç†æ—¶é—´ã€æ–‡æ¡£æ‘˜è¦ç­‰ä¿¡æ¯ã€‚</p>
<pre><code class="hljs language-python" lang="python">self.doc_status.upsert(
    {
        doc_id: {
            <span class="hljs-string">"status"</span>: DocStatus.PROCESSED,
            <span class="hljs-string">"chunks_count"</span>: <span class="hljs-built_in">len</span>(chunks),
            <span class="hljs-string">"chunks_list"</span>: <span class="hljs-built_in">list</span>(chunks.keys()),
            <span class="hljs-string">"content_summary"</span>: status_doc.content_summary,
            <span class="hljs-string">"content_length"</span>: status_doc.content_length,
            <span class="hljs-string">"created_at"</span>: status_doc.created_at,
            <span class="hljs-string">"updated_at"</span>: datetime.now(
                timezone.utc
            ).isoformat(),
            <span class="hljs-string">"file_path"</span>: file_path,
            <span class="hljs-string">"track_id"</span>: status_doc.track_id,  <span class="hljs-comment"># Preserve existing track_id</span>
            <span class="hljs-string">"metadata"</span>: {
                <span class="hljs-string">"processing_start_time"</span>: processing_start_time,
                <span class="hljs-string">"processing_end_time"</span>: processing_end_time,
            },
        }
    }
)
</code></pre>
<h2 data-id="heading-46">å°¾è¨€</h2>
<p>è‡³æ­¤ï¼Œæˆ‘ä»¬å·²å®Œæ•´æ‹†è§£äº† LightRAG æ–‡æ¡£è§£æçš„å…¨æµç¨‹ã€‚è¿™å¥—è®¾è®¡ç¡®ä¿äº†å…¶åœ¨â€œè½»é‡â€çš„å®šä½ä¸‹ï¼Œä¾ç„¶èƒ½æ„å»ºä¸€ä¸ªæ‰©å±•æ€§å¼ºã€ç®¡æ§ç²¾ç»†ã€æˆæœ¬å¯æ§çš„ GraphRAG å…¥åº“ç®¡çº¿ã€‚</p>
<p>ç„¶è€Œï¼Œä¼˜è´¨çš„æ–‡æ¡£å…¥åº“åªæ˜¯ RAG ç³»ç»Ÿçš„â€œç”Ÿäº§ä¾§â€ï¼Œæ˜¯æ”¯æ’‘é«˜æ•ˆå¬å›çš„åŸºçŸ³ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†è½¬å‘è‡³å…³é‡è¦çš„â€œæ¶ˆè´¹ä¾§â€â€”â€”æ–‡æœ¬å¬å›ã€‚å¦‚æœæ‚¨å…³å¿ƒ LightRAG åœ¨çœŸå®é—®ç­”ä¸­çš„å®æˆ˜èƒ½åŠ›ï¼Œä¸‹ä¸€ç¯‡ç« å°†æ˜¯å†³å®šæ€§çš„å±•ç°ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Goland é€šè¿‡ ACP è¿æ¥ Claude Code]]></title>    <link>https://juejin.cn/post/7580204190028857350</link>    <guid>https://juejin.cn/post/7580204190028857350</guid>    <pubDate>2025-12-06T03:28:08.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7580204190028857350" data-draft-id="7580263284336918569" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Goland é€šè¿‡ ACP è¿æ¥ Claude Code"/> <meta itemprop="keywords" content="Claude,äººå·¥æ™ºèƒ½,JetBrains"/> <meta itemprop="datePublished" content="2025-12-06T03:28:08.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="overstarry"/> <meta itemprop="url" content="https://juejin.cn/user/3192637495444632"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Goland é€šè¿‡ ACP è¿æ¥ Claude Code
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3192637495444632/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    overstarry
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-06T03:28:08.000Z" title="Sat Dec 06 2025 03:28:08 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>2025å¹´12æœˆ5æ—¥ï¼ŒJetBrains å®˜æ–¹æ­£å¼æ¨å‡ºäº†å¯¹ ACP åè®®çš„æ­£å¼æ”¯æŒï¼Œå¯ä»¥é€šè¿‡ä¸‹è½½å„ä¸ª JetBrains IDE çš„<code>2025.3 Release Candidate build</code>ç‰ˆæœ¬æ¥ä½¿ç”¨ ACP åè®®ã€‚</p>
<h2 data-id="heading-1">é…ç½®</h2>
<p>åœ¨æœ¬æ–‡ä¸­å°†ä»¥ Goland IDE ä¸ºä¾‹ï¼Œä»‹ç»å¦‚ä½•é€šè¿‡ ACP åè®®è¿æ¥ Claude Codeã€‚</p>
<h3 data-id="heading-2">å®‰è£… Goland 2025.3 Release Candidate build</h3>
<p>åœ¨ Toolbox å®‰è£… Goland 2025.3 Release Candidate ç‰ˆæœ¬ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d911f7d7e13848519f07e99b4f4c725f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgb3ZlcnN0YXJyeQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765596488&amp;x-signature=RV2Y59jBJQGDidTLaeWn%2BNW2xBI%3D" alt="goland-toolbox-rc-version.png" loading="lazy"/></p>
<h3 data-id="heading-3">é…ç½®</h3>
<ol>
<li>æ‰“å¼€ AI Chat å·¥å…·çª—å£,ç›®å‰éœ€è¦ç™»å½•æ‰èƒ½ä½¿ç”¨ AI Chat åŠŸèƒ½,å®˜æ–¹åç»­ä¼šè¿›è¡Œè°ƒæ•´ã€‚åœ¨é€‰é¡¹å¡é€‰æ‹©é…ç½® ACP ä»£ç†,ä¼šåˆ›å»ºæ‰“å¼€<code>~/.jetbrains/acp.json</code> æ–‡ä»¶ã€‚</li>
</ol>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/609923586b9f4b4dbb41e6b4b3366167~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgb3ZlcnN0YXJyeQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765596488&amp;x-signature=cPiAbOVkWSQ2%2BLVKVmasjKH%2Fq14%3D" alt="goland-acp-config-window.png" loading="lazy"/></p>
<ol start="2">
<li>å®‰è£…é…ç½® Claude Code ACP ä»£ç†</li>
</ol>
<p>ä½¿ç”¨ <code> pnpm install @zed-industries/claude-code-acp</code> å®‰è£… claude-code-acpã€‚</p>
<p>ä¿®æ”¹ <code>~/.jetbrains/acp.json</code> æ–‡ä»¶ï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š</p>
<pre><code class="hljs language-css" lang="css">{
    "agent_servers": {
        "Claude <span class="hljs-selector-tag">Code</span> Agent": {
            "command": <span class="hljs-string">"pnpx"</span>,
            <span class="hljs-string">"args"</span>: [
                <span class="hljs-string">"@zed-industries/claude-code-acp"</span>
            ],
        }
    }
}
</code></pre>
<p>3.  é…ç½®å®Œåœ¨ Chatç•Œé¢é€‰æ‹© Claude Code Agent</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b306299aba8e433082965df433cbc133~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgb3ZlcnN0YXJyeQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765596488&amp;x-signature=3XllhlCbmVtAY8%2BZRQs5jkU8LaI%3D" alt="goland-select-claude-agent.png" loading="lazy"/></p>
<p>å°è¯•ä½¿ç”¨ Claude Code Agent è¿›è¡Œä»£ç ç”Ÿæˆå’Œè°ƒè¯•,å¯ä»¥é¡ºåˆ©çœ‹åˆ° Claude Code Agent çš„å“åº”ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fb7ba729999e4a318dc6633abbae6722~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgb3ZlcnN0YXJyeQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765596488&amp;x-signature=P4LdchOWNX%2BM5ospXpXMg1FZwfA%3D" alt="goland-claude-agent-response.png" loading="lazy"/></p>
<h2 data-id="heading-4">æ€»ç»“</h2>
<p>é€šè¿‡ ACP åè®®è¿æ¥ Claude Code Agentï¼Œå¯ä»¥æ–¹ä¾¿åœ°åœ¨ Goland ä¸­ä½¿ç”¨ Claude Code è¿›è¡Œä»£ç ç”Ÿæˆå’Œè°ƒè¯•ã€‚</p>
<h2 data-id="heading-5">å‚è€ƒ</h2>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.jetbrains.com%2Fai%2F2025%2F12%2Fbring-your-own-ai-agent-to-jetbrains-ides%2F" target="_blank" title="https://blog.jetbrains.com/ai/2025/12/bring-your-own-ai-agent-to-jetbrains-ides/" ref="nofollow noopener noreferrer">blog.jetbrains.com/ai/2025/12/â€¦</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.jetbrains.com%2Fhelp%2Fai-assistant%2Facp.html" target="_blank" title="https://www.jetbrains.com/help/ai-assistant/acp.html" ref="nofollow noopener noreferrer">www.jetbrains.com/help/ai-assâ€¦</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fagentclientprotocol.com%2Foverview%2Fintroduction" target="_blank" title="https://agentclientprotocol.com/overview/introduction" ref="nofollow noopener noreferrer">agentclientprotocol.com/overview/inâ€¦</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fagentclientprotocol.com%2Foverview%2Fagents" target="_blank" title="https://agentclientprotocol.com/overview/agents" ref="nofollow noopener noreferrer">agentclientprotocol.com/overview/agâ€¦</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fzed-industries%2Fclaude-code-acp" target="_blank" title="https://github.com/zed-industries/claude-code-acp" ref="nofollow noopener noreferrer">github.com/zed-industrâ€¦</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Midscene.js åˆå°è¯•]]></title>    <link>https://juejin.cn/post/7580204190028873734</link>    <guid>https://juejin.cn/post/7580204190028873734</guid>    <pubDate>2025-12-06T03:32:23.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7580204190028873734" data-draft-id="7580208715275780138" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Midscene.js åˆå°è¯•"/> <meta itemprop="keywords" content="LLM,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-06T03:32:23.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="overstarry"/> <meta itemprop="url" content="https://juejin.cn/user/3192637495444632"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Midscene.js åˆå°è¯•
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3192637495444632/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    overstarry
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-06T03:32:23.000Z" title="Sat Dec 06 2025 03:32:23 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä»‹ç»</h2>
<p>Midscene.js æ˜¯ä¸€ä¸ªå¼€æºçš„ AI æ“ä½œåŠ©æ‰‹ï¼Œé€‚ç”¨äº Webã€ç§»åŠ¨ç«¯ã€è‡ªåŠ¨åŒ–å’Œæµ‹è¯•ã€‚</p>
<h3 data-id="heading-1">ç‰¹æ€§</h3>
<h4 data-id="heading-2">é€šè¿‡è‡ªç„¶è¯­è¨€æè¿°ç›®æ ‡å’Œæ­¥éª¤ï¼Œè‡ªåŠ¨ç”Ÿæˆ UI è‡ªåŠ¨åŒ–è„šæœ¬</h4>
<ul>
<li>æè¿°ä½ çš„ç›®æ ‡å’Œæ­¥éª¤ï¼ŒMidscene ä¼šä¸ºä½ è§„åˆ’å’Œæ“ä½œç”¨æˆ·ç•Œé¢ã€‚</li>
<li>æ”¯æŒ JavaScript SDK å’Œ YAML ä¸¤ç§è„šæœ¬æ ¼å¼</li>
</ul>
<h4 data-id="heading-3">è·¨å¹³å°æ”¯æŒ</h4>
<ul>
<li>ç½‘é¡µè‡ªåŠ¨åŒ–ï¼šé›†æˆ Puppeteerã€Playwright æˆ–æ¡¥æ¥æ¨¡å¼æ§åˆ¶æ¡Œé¢æµè§ˆå™¨</li>
<li>Android è‡ªåŠ¨åŒ–ï¼šé€šè¿‡ adb æ§åˆ¶æœ¬åœ°è®¾å¤‡</li>
<li>iOS è‡ªåŠ¨åŒ–ï¼šé€šè¿‡ WebDriverAgent æ§åˆ¶æœ¬åœ°è®¾å¤‡</li>
</ul>
<h4 data-id="heading-4">è¾…åŠ©å·¥å…·</h4>
<ul>
<li>æä¾›å¯è§†åŒ–æµ‹è¯•æŠ¥å‘Šå’Œ Playground ç¯å¢ƒï¼Œä¾¿äºè°ƒè¯•å’Œå›æ”¾</li>
<li>æ”¯æŒè„šæœ¬ç¼“å­˜ï¼Œæå‡æ‰§è¡Œæ•ˆç‡</li>
<li>å¼€æ”¾ MCP åè®®ï¼Œå…è®¸å…¶ä»– MCP Client ç›´æ¥è°ƒç”¨ï¼ˆæ”¯æŒ Web å’Œ Androidï¼‰</li>
</ul>
<h4 data-id="heading-5">ä¸‰å¤§ API ç±»å‹</h4>
<ul>
<li>äº¤äº’ APIï¼šæ“ä½œç”¨æˆ·ç•Œé¢å…ƒç´ </li>
<li>æ•°æ®æå– APIï¼šä» UI å’Œ DOM ä¸­æå–æ•°æ®</li>
<li>å®ç”¨ APIï¼šæä¾› aiAssert() æ–­è¨€ã€aiLocate() å®šä½ã€aiWaitFor() ç­‰å¾…ç­‰è¾…åŠ©å‡½æ•°</li>
</ul>
<h3 data-id="heading-6">æ¨¡å‹é€‰æ‹©</h3>
<p>æ¨¡å‹æœ€å¥½ä½¿ç”¨æ”¯æŒè§†è§‰çš„æ¨¡å‹ï¼Œå¦‚: gemini, claude, UI-TARS ç­‰æ¨¡å‹ã€‚æœ¬æ–‡çš„æ¡ˆä¾‹ä¼šä½¿ç”¨ Doubao-1.5-UI-TARS è¿›è¡Œä»‹ç»ã€‚</p>
<p>Doubao-1.5-UI-TARS æ˜¯å­—èŠ‚è·³åŠ¨å¼€æºçš„ä¸€æ¬¾åŸç”Ÿé¢å‘å›¾å½¢ç•Œé¢äº¤äº’ï¼ˆGUIï¼‰çš„ Agent æ¨¡å‹ã€‚é€šè¿‡æ„ŸçŸ¥ã€æ¨ç†å’Œè¡ŒåŠ¨ç­‰ç±»äººçš„èƒ½åŠ›ï¼Œä¸ GUI è¿›è¡Œæ— ç¼äº¤äº’ï¼Œéå¸¸é€‚åˆ Midscene.js ä½¿ç”¨ã€‚</p>
<h2 data-id="heading-7">ä½¿ç”¨</h2>
<p>æ¥ä¸‹æ¥ä¼šæ¼”ç¤ºå¦‚ä½•ä½¿ç”¨ Midscene.js,æœ¬ç¯‡æ–‡ç« åªä»‹ç» MCP è¿›è¡Œæ“ä½œçš„æ–¹æ³•ï¼Œå…¶ä»–çš„æ–¹æ³•æ„Ÿå…´è¶£çš„è¯»è€…å¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£ã€‚</p>
<p>æ“ä½œç¯å¢ƒä½¿ç”¨ zed è¿æ¥ Midscene mcpï¼Œmcpé…ç½®å¦‚ä¸‹:</p>
<pre><code class="hljs language-json" lang="json">    <span class="hljs-attr">"mcp-midscene"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"enabled"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"command"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"cmd"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"args"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"/c"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"pnpx"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"@midscene/mcp"</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"env"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"MIDSCENE_MODEL_NAME"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"doubao-seed-1-6-vision-250815"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"OPENAI_API_KEY"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">""</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"MCP_SERVER_REQUEST_TIMEOUT"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"800000"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"MIDSCENE_USE_DOUBAO_VISION"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"1"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"OPENAI_BASE_URL"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://ark.cn-beijing.volces.com/api/v3"</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
</code></pre>
<p>é…ç½®å®Œ mcp server åï¼Œåœ¨æµè§ˆå™¨æ‰©å±•ä¸­æ‰“å¼€æ¡¥æ¥æ¨¡å¼ï¼Œè®¾ç½®å…è®¸è¿æ¥ï¼Œç„¶ååœ¨ç¼–è¾‘å™¨è¾“å…¥ <code>ä½¿ç”¨  midsceneæ‰“å¼€ https://jasminides.com/ï¼Œç”Ÿæˆç½‘ç«™çš„Playwright è‡ªåŠ¨åŒ–æµ‹è¯•ç”¨ä¾‹ï¼Œæµ‹è¯•ä»¥ä¸‹åŠŸèƒ½:æ–‡ç« çš„æ‰“å¼€å…³é—­ï¼Œtagé¡µçš„åŠŸèƒ½ï¼Œæœç´¢é¡µçš„åŠŸèƒ½ï¼Œrssé¡µçš„åŠŸèƒ½ï¼Œå°†ç”Ÿæˆçš„ç”¨ä¾‹ä¿å­˜åˆ°ut.tsæ–‡ä»¶ä¸­</code> è¿‡äº†ä¸€ä¼šä»»åŠ¡æ‰§è¡Œå®Œï¼Œå¯ä»¥çœ‹åˆ°ä»£ç é¡ºåˆ©ç”Ÿæˆã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dffef00f69dd466389931c690662c96f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgb3ZlcnN0YXJyeQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765596743&amp;x-signature=%2Bj8scDLnxCw%2Br3Pu5r4alGtRe%2Fg%3D" alt="image-1.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/365bf806a65445bfb29033ff7d762238~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgb3ZlcnN0YXJyeQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765596743&amp;x-signature=GSd9S%2BtEq6MMZ4egwGFbn4HR134%3D" alt="image-2.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/436763d5a4a849ccafe403650a784a13~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgb3ZlcnN0YXJyeQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765596743&amp;x-signature=f1sCrXc04g92kPda7hqiC%2FCIrk4%3D" alt="image-3.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ec1900c2de2341d8ae3ebddb7c3fd9a1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgb3ZlcnN0YXJyeQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765596743&amp;x-signature=iCgxHHMpYtYKb3IM2hQ%2Fw1%2BTkHo%3D" alt="image-4.png" loading="lazy"/></p>
<h2 data-id="heading-8">è¯„ä»·</h2>
<p>é€šè¿‡å¯¹ midscene çš„ç®€å•è¯•ç”¨ï¼Œä¸ªäººè¯„ä»·æ˜¯æœªæ¥å¯æœŸï¼Œç”±äºå—é™äºå½“å‰åŸºç¡€æ¨¡å‹çš„é™åˆ¶ï¼ŒåŠŸèƒ½è¿˜æœ‰è®¸å¤šé—®é¢˜ï¼Œä½†æ€»ä½“ä¸Šè¿˜æ˜¯éå¸¸æœ‰æ½œåŠ›çš„ã€‚</p>
<h2 data-id="heading-9">å‚è€ƒ</h2>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fmidscenejs.com%2Fzh%2F" target="_blank" title="https://midscenejs.com/zh/" ref="nofollow noopener noreferrer">midscenejs.com/zh/</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fweb-infra-dev%2Fmidscene" target="_blank" title="https://github.com/web-infra-dev/midscene" ref="nofollow noopener noreferrer">github.com/web-infra-dâ€¦</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fhuggingface.co%2FByteDance-Seed%2FUI-TARS-72B-SFT" target="_blank" title="https://huggingface.co/ByteDance-Seed/UI-TARS-72B-SFT" ref="nofollow noopener noreferrer">huggingface.co/ByteDance-Sâ€¦</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç”¨Renovateå¤„ç†Private Submodules]]></title>    <link>https://juejin.cn/post/7580196545288437814</link>    <guid>https://juejin.cn/post/7580196545288437814</guid>    <pubDate>2025-12-05T17:26:14.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7580196545288437814" data-draft-id="7580208715275321386" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç”¨Renovateå¤„ç†Private Submodules"/> <meta itemprop="keywords" content="GitHub,CI/CD"/> <meta itemprop="datePublished" content="2025-12-05T17:26:14.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="sijiaoh"/> <meta itemprop="url" content="https://juejin.cn/user/502900856203354"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç”¨Renovateå¤„ç†Private Submodules
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/502900856203354/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    sijiaoh
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-05T17:26:14.000Z" title="Fri Dec 05 2025 17:26:14 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-05
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    9
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Renovateä¸æ”¯æŒPrivate Submodule</h2>
<p>Renovateè¿è¡Œæ—¶ä¼šè‡ªå·±cloneä»“åº“ï¼ŒGitHub Actionsä¸­cloneçš„Submoduleä¸ä¼šè¢«ä½¿ç”¨ã€‚</p>
<p>è€Œä¸”é—æ†¾çš„æ˜¯ï¼Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.renovatebot.com%2Fconfiguration-options%2F%23clonesubmodules" target="_blank" title="https://docs.renovatebot.com/configuration-options/#clonesubmodules" ref="nofollow noopener noreferrer">cloneSubmodules</a>é…ç½®æ˜ç¡®è¯´æ˜ä¸æ”¯æŒPrivate Submoduleï¼š</p>
<blockquote>
<p>Important: private submodules aren't supported by Renovate, unless the underlying <code>ssh</code> layer already has the correct permissions.</p>
</blockquote>
<p>è¿™å¯¹äºé€šè¿‡è·¯å¾„å¼•ç”¨Submoduleçš„åŒ…ç®¡ç†å·¥å…·æ¥è¯´æ˜¯ä¸ªé—®é¢˜ã€‚è™½ç„¶å¯ä»¥é€‰æ‹©æ”¾å¼ƒä½¿ç”¨Submoduleï¼Œä½†æˆ‘ä¸å¸Œæœ›å› ä¸ºRenovateçš„é™åˆ¶è€Œæ”¹å˜é¡¹ç›®ç»“æ„ã€‚</p>
<p>å°è¯•äº†å„ç§æ–¹æ³•åï¼Œç»ˆäºæ‰¾åˆ°äº†è§£å†³æ–¹æ¡ˆï¼Œåœ¨æ­¤åˆ†äº«ã€‚</p>
<h2 data-id="heading-1">éœ€æ±‚</h2>
<ul>
<li>å¸Œæœ›ä½¿ç”¨GitHub Appè®¤è¯è€ŒéPersonal access tokenã€‚
<ul>
<li>ä¸æƒ³åœ¨å…¬å¸é¡¹ç›®ä½¿ç”¨ä¸ªäººPATã€‚</li>
</ul>
</li>
<li>Submoduleæœ‰å¤šä¸ªï¼ŒSSHå’ŒHTTPæ··ç”¨ã€‚
<ul>
<li>å®˜æ–¹æ–‡æ¡£ä¸­æåˆ°çš„SSHå±‚è§£å†³æ–¹æ¡ˆä¸è¶³ä»¥æ»¡è¶³éœ€æ±‚ã€‚</li>
</ul>
</li>
</ul>
<p>Dependabotä¼¼ä¹ä¹Ÿä¸æ”¯æŒPersonal access tokenè®¤è¯ã€‚</p>
<h2 data-id="heading-2">Self-hosted Renovate</h2>
<p>ä¹‹å‰ä¸€ç›´ä½¿ç”¨Mendæ‰˜ç®¡çš„<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fapps%2Frenovate" target="_blank" title="https://github.com/apps/renovate" ref="nofollow noopener noreferrer">Renovate GitHub App</a>ï¼Œä½†è¿™æ¬¡çš„é…ç½®éœ€è¦åˆ‡æ¢åˆ°Self-hostedï¼Œè¿™é‡Œä½¿ç”¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Frenovatebot%2Fgithub-action" target="_blank" title="https://github.com/renovatebot/github-action" ref="nofollow noopener noreferrer">GitHub Action Renovate</a>ã€‚</p>
<h2 data-id="heading-3">é…ç½®</h2>
<h3 data-id="heading-4">GitHub App</h3>
<p>éœ€è¦æŒ‰ç…§<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.renovatebot.com%2Fmodules%2Fplatform%2Fgithub%2F%23running-as-a-github-app" target="_blank" title="https://docs.renovatebot.com/modules/platform/github/#running-as-a-github-app" ref="nofollow noopener noreferrer">RenovateæŒ‡å®šçš„æƒé™</a>è¿›è¡Œæˆæƒï¼š</p>

















































<table><thead><tr><th>Permission</th><th>Scope</th></tr></thead><tbody><tr><td>Checks</td><td><code>read</code> + <code>write</code></td></tr><tr><td>Commit statuses</td><td><code>read</code> + <code>write</code></td></tr><tr><td>Contents</td><td><code>read</code> + <code>write</code></td></tr><tr><td>Issues</td><td><code>read</code> + <code>write</code></td></tr><tr><td>Pull requests</td><td><code>read</code> + <code>write</code></td></tr><tr><td>Workflows</td><td><code>read</code> + <code>write</code></td></tr><tr><td>Administration</td><td><code>read</code></td></tr><tr><td>Dependabot alerts</td><td><code>read</code></td></tr><tr><td>Members</td><td><code>read</code></td></tr><tr><td>Metadata</td><td><code>read</code></td></tr></tbody></table>
<p>å®‰è£…åå¦‚éœ€ä¿®æ”¹æƒé™ï¼Œéœ€è¦åœ¨å®‰è£…ç•Œé¢æ‰¹å‡†æ–°å¢çš„æƒé™ã€‚</p>
<h3 data-id="heading-5">GitHub Repository</h3>
<p>é¦–å…ˆç¦ç”¨ç°æœ‰çš„Renovate GitHub Appã€‚ç„¶ååœ¨Actions secrets and variablesä¸­æ·»åŠ ä»¥ä¸‹å€¼ï¼Œä¾›Renovate Actionä½¿ç”¨ï¼š</p>




















<table><thead><tr><th>ç±»å‹</th><th>å€¼</th><th>åç§°</th></tr></thead><tbody><tr><td>Variables</td><td>App ID</td><td>GH_APP_ID</td></tr><tr><td>Secrets</td><td>Private key</td><td>GH_APP_PRIVATE_KEY</td></tr></tbody></table>
<h3 data-id="heading-6">GitHub Actions</h3>
<p>å°†ä»¥ä¸‹å†…å®¹ä¿å­˜ä¸º<code>.github/workflows/renovate.yml</code>ï¼š</p>
<pre><code class="hljs language-yml" lang="yml"><span class="hljs-attr">name:</span> <span class="hljs-string">Renovate</span>
<span class="hljs-attr">on:</span>
  <span class="hljs-attr">schedule:</span>
    <span class="hljs-comment"># æ¯15åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">cron:</span> <span class="hljs-string">"0/15 * * * *"</span>
  <span class="hljs-attr">workflow_dispatch:</span>
<span class="hljs-attr">jobs:</span>
  <span class="hljs-attr">renovate:</span>
    <span class="hljs-attr">runs-on:</span> <span class="hljs-string">ubuntu-latest</span>
    <span class="hljs-attr">steps:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Generate</span> <span class="hljs-string">github</span> <span class="hljs-string">token</span>
        <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/create-github-app-token@v1</span>
        <span class="hljs-attr">id:</span> <span class="hljs-string">app-token</span>
        <span class="hljs-attr">with:</span>
          <span class="hljs-attr">app-id:</span> <span class="hljs-string">${{</span> <span class="hljs-string">vars.GH_APP_ID</span> <span class="hljs-string">}}</span>
          <span class="hljs-attr">private-key:</span> <span class="hljs-string">${{</span> <span class="hljs-string">secrets.GH_APP_PRIVATE_KEY</span> <span class="hljs-string">}}</span>
          <span class="hljs-attr">owner:</span> <span class="hljs-string">${{</span> <span class="hljs-string">github.repository_owner</span> <span class="hljs-string">}}</span>

      <span class="hljs-bullet">-</span> <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/checkout@v4</span>
        <span class="hljs-attr">with:</span>
          <span class="hljs-attr">submodules:</span> <span class="hljs-string">"recursive"</span>
          <span class="hljs-attr">token:</span> <span class="hljs-string">${{</span> <span class="hljs-string">steps.app-token.outputs.token</span> <span class="hljs-string">}}</span>
          <span class="hljs-attr">persist-credentials:</span> <span class="hljs-literal">false</span>

      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Self-hosted</span> <span class="hljs-string">Renovate</span>
        <span class="hljs-attr">uses:</span> <span class="hljs-string">renovatebot/github-action@v41.0.13</span>
        <span class="hljs-attr">with:</span>
          <span class="hljs-attr">configurationFile:</span> <span class="hljs-string">self_hosted_renovate.js</span>
          <span class="hljs-attr">token:</span> <span class="hljs-string">${{</span> <span class="hljs-string">steps.app-token.outputs.token</span> <span class="hljs-string">}}</span>
          <span class="hljs-attr">env-regex:</span> <span class="hljs-string">"^(?:RENOVATE_\\w+|LOG_LEVEL|GITHUB_COM_TOKEN|NODE_OPTIONS|GIT_CONFIG_\\w+)$"</span>
        <span class="hljs-attr">env:</span>
          <span class="hljs-attr">GIT_CONFIG_COUNT:</span> <span class="hljs-string">"2"</span>
          <span class="hljs-attr">GIT_CONFIG_KEY_0:</span> <span class="hljs-string">"url.https://x-access-token:$<span class="hljs-template-variable">{{ steps.app-token.outputs.token }}</span>@github.com/.insteadOf"</span>
          <span class="hljs-attr">GIT_CONFIG_VALUE_0:</span> <span class="hljs-string">"https://github.com/"</span>
          <span class="hljs-attr">GIT_CONFIG_KEY_1:</span> <span class="hljs-string">"url.https://x-access-token:$<span class="hljs-template-variable">{{ steps.app-token.outputs.token }}</span>@github.com/.insteadOf"</span>
          <span class="hljs-attr">GIT_CONFIG_VALUE_1:</span> <span class="hljs-string">"git@github.com:"</span>
</code></pre>
<p>å…³é”®åœ¨äºenvéƒ¨åˆ†çš„<code>GIT_CONFIG_*</code>ã€‚å®ƒåˆ©ç”¨Gitçš„<code>url.&lt;base&gt;.insteadOf</code>é…ç½®ï¼Œå°†ä»¥<code>https://github.com/</code>æˆ–<code>git@github.com:</code>å¼€å¤´çš„URLè‡ªåŠ¨æ›¿æ¢ä¸ºå¸¦æœ‰tokençš„URLã€‚</p>
<p>è¿™æ ·Renovateåœ¨clone Submoduleæ—¶ä¼šè‡ªåŠ¨é™„å¸¦è®¤è¯ä¿¡æ¯ã€‚è¿™ä¸å®˜æ–¹æ–‡æ¡£æåˆ°çš„"sshå±‚è§£å†³æ–¹æ¡ˆ"ç±»ä¼¼ï¼Œéƒ½æ˜¯åœ¨Renovateå¤–éƒ¨è§£å†³è®¤è¯é—®é¢˜ã€‚</p>
<h3 data-id="heading-7">Renovate configuration</h3>
<p>å°†ä»¥ä¸‹å†…å®¹<strong>ç¼–è¾‘å</strong>ä¿å­˜ä¸º<code>self_hosted_renovate.js</code>ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">dependencyDashboard</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">onboarding</span>: <span class="hljs-literal">false</span>,
  <span class="hljs-attr">requireConfig</span>: <span class="hljs-string">"optional"</span>,
  <span class="hljs-attr">branchPrefix</span>: <span class="hljs-string">"self-hosted-renovate/"</span>,
  <span class="hljs-comment">// å¦‚æœç°æœ‰Renovateåˆ†æ”¯å¯¼è‡´é—®é¢˜ï¼Œå–æ¶ˆæ³¨é‡Šæ­¤è¡Œã€‚</span>
  <span class="hljs-comment">// branchPrefixOld: "ignore-old-renovate/",</span>
  <span class="hljs-attr">platform</span>: <span class="hljs-string">"github"</span>,
  <span class="hljs-attr">repositories</span>: [
    <span class="hljs-comment">// ç¼–è¾‘ä¸ºç›®æ ‡ä»“åº“å¹¶å–æ¶ˆæ³¨é‡Šã€‚</span>
    <span class="hljs-comment">// "org_name/repository"</span>
  ],
  <span class="hljs-attr">cloneSubmodules</span>: <span class="hljs-literal">true</span>,
};
</code></pre>
<h2 data-id="heading-8">æœ€å</h2>
<p>å¦‚æœæœ‰æ›´ä¼˜é›…çš„è§£å†³æ–¹æ¡ˆï¼Œæ¬¢è¿åˆ†äº«ã€‚</p>
<p>åŸæ–‡: <a href="https://link.juejin.cn?target=https%3A%2F%2Fsijiaoh.com%2Fzh%2Fposts%2Frenovate-private-submodules%2F" target="_blank" title="https://sijiaoh.com/zh/posts/renovate-private-submodules/" ref="nofollow noopener noreferrer">sijiaoh.com/zh/posts/reâ€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item>  </channel></rss>