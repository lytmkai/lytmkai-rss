<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>æ˜é‡‘æ–‡ç« æ¨è</title>      <link>https://juejin.cn/recommended?sort=newest</link>      <description>ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</description>      <generator>python juejin_recom.py @Pi20</generator>      <item>    <title><![CDATA[RuoYi-Cloud å®Œå…¨è§£å‰–ï¼šTRAE AI ç»˜åˆ¶çš„æ¶æ„è“å›¾]]></title>    <link>https://juejin.cn/post/7577201863721418752</link>    <guid>https://juejin.cn/post/7577201863721418752</guid>    <pubDate>2025-11-27T01:31:52.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577201863721418752" data-draft-id="7576859594360635392" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="RuoYi-Cloud å®Œå…¨è§£å‰–ï¼šTRAE AI ç»˜åˆ¶çš„æ¶æ„è“å›¾"/> <meta itemprop="keywords" content="Trae"/> <meta itemprop="datePublished" content="2025-11-27T01:31:52.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤©å¤©æ‘¸é±¼çš„javaå·¥ç¨‹å¸ˆ"/> <meta itemprop="url" content="https://juejin.cn/user/3109843365802925"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            RuoYi-Cloud å®Œå…¨è§£å‰–ï¼šTRAE AI ç»˜åˆ¶çš„æ¶æ„è“å›¾
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3109843365802925/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤©å¤©æ‘¸é±¼çš„javaå·¥ç¨‹å¸ˆ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-27T01:31:52.000Z" title="Thu Nov 27 2025 01:31:52 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1.  RuoYi-Cloud å®Œå…¨è§£å‰–ï¼šTRAE AI ç»˜åˆ¶çš„æ¶æ„è“å›¾</h2>
<hr/>
<blockquote>
<p>ğŸ§‘â€ğŸ’» ä½œè€…ï¼šå¤©å¤©æ‘¸é±¼çš„javaå·¥ç¨‹å¸ˆ<br/>
ğŸ é¡¹ç›®ï¼šRuoYi-Cloud å¾®æœåŠ¡æ¡†æ¶åˆ†ææ–‡æ¡£è‡ªåŠ¨ç”Ÿæˆ<br/>
ğŸ›  å…³é”®è¯ï¼šTRAEã€AIåŠ©æ‰‹ã€é¡¹ç›®æ–‡æ¡£ç”Ÿæˆã€æ¶æ„å¯è§†åŒ–ã€å¾®æœåŠ¡åˆ†æ\</p>
</blockquote>
<hr/>
<h3 data-id="heading-1">ğŸ§­ å…ˆçœ‹æœ€ç»ˆç»“æœï¼šä¸ªäººè§‰å¾—è¿˜æ˜¯å¾ˆä¸é”™çš„</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/db72381b08d14a3aa1786055a6361687~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSp5aSp5pG46bG855qEamF2YeW3peeoi-W4iA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764811912&amp;x-signature=R6WJBODDM7u0LquKJLX98YxrV2E%3D" alt="deepseek_mermaid_20251125_3d1b66.png" loading="lazy"/></p>
<hr/>
<h3 data-id="heading-2">ğŸ§­ å†™åœ¨å‰é¢ï¼šé¡¹ç›®è¶Šå¤§ï¼Œæ–‡æ¡£è¶Šé‡è¦ï¼ŒAI èƒ½å¸®ä¸Šå¿™å—ï¼Ÿ</h3>
<p>ä½œä¸ºä¸€ä¸ªåšäº† 8 å¹´ Java çš„â€œè€å…µâ€ï¼Œæˆ‘å·²ç»ä¹ æƒ¯äº†æ‰“å¼€ä¸€ä¸ªé¡¹ç›®å…ˆ <code>cd</code> åˆ° <code>backend/</code>ï¼Œç„¶åä» <code>pom.xml</code> ä¸€è·¯æ‘¸åˆ° <code>controller</code>ï¼Œé ç»éªŒçŒœç»“æ„ã€é ç›´è§‰æ‰¾å…¥å£ã€‚</p>
<p>ä½†éšç€é¡¹ç›®è¶Šæ¥è¶Šå¤§ã€å›¢é˜Ÿè¶Šæ¥è¶Šå¤šäººï¼Œé â€œç»éªŒæ‘¸ç´¢â€è¿™å¥—ä½“ç³»å·²ç»è¶Šæ¥è¶ŠåƒåŠ›ã€‚<strong>é¡¹ç›®æ–‡æ¡£çš„ç¼ºå¤±ã€æ¶æ„å›¾çš„ä¸å…¨ã€æ¨¡å—å…³ç³»ä¸æ¸…æ¥š</strong>ï¼Œæˆä¸ºäº†æˆ‘ä»¬ onboardingï¼ˆæ¥æ‰‹é¡¹ç›®ï¼‰æ—¶æœ€å¤§çš„éšœç¢ã€‚</p>
<p>è¿™æ¬¡å€Ÿ TRAE SOLO æŠ€æœ¯å¤§å¥–èµ›çš„æœºä¼šï¼Œæˆ‘å°è¯•ç”¨ TRAE AI å·¥å…·é“¾ï¼Œ<strong>è‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªä¸­å¤§å‹å¾®æœåŠ¡é¡¹ç›®ï¼ˆRuoYi-Cloudï¼‰</strong> çš„ï¼š</p>
<ul>
<li>ğŸ§¾ é¡¹ç›®ä»‹ç»æ–‡æ¡£</li>
<li>ğŸ§± æ¶æ„ç»„ä»¶å…³ç³»å›¾</li>
<li>ğŸ§© æ¨¡å—ç»“æ„è¯´æ˜</li>
<li>ğŸ” æƒé™é…ç½®ä¸è·¯ç”±è®¾è®¡åˆ†æ</li>
</ul>
<p>æœ€ç»ˆï¼Œæˆ‘ç”¨ AI æˆåŠŸå®Œæˆäº†å¯¹ RuoYi-Cloud çš„å®Œæ•´æ–‡æ¡£å’Œæ¶æ„å›¾ç”Ÿæˆï¼Œæ•ˆæœè¿œè¶…é¢„æœŸã€‚</p>
<hr/>
<h3 data-id="heading-3">ğŸ” ç›®æ ‡é¡¹ç›®ï¼šRuoYi-Cloud å¾®æœåŠ¡æƒé™ç³»ç»Ÿ</h3>
<p>å¦‚æœä½ åšè¿‡ Spring Cloud é¡¹ç›®ï¼Œä½ å¤§æ¦‚ç‡å¬è¿‡ RuoYi-Cloudï¼Œè¿™æ˜¯ä¸€ä¸ªéå¸¸æˆç†Ÿçš„å¼€æºå¾®æœåŠ¡æƒé™å¹³å°ï¼Œé‡‡ç”¨ Spring Cloud Alibaba æŠ€æœ¯æ ˆï¼Œå…·å¤‡å®Œæ•´çš„ï¼š</p>
<ul>
<li>ç”¨æˆ·æƒé™ç®¡ç†</li>
<li>èœå•è·¯ç”±ç³»ç»Ÿ</li>
<li>å¾®æœåŠ¡æ³¨å†Œä¸é…ç½®</li>
<li>Docker ä¸€é”®éƒ¨ç½²èƒ½åŠ›</li>
</ul>
<p>ä½†å®ƒæ–‡æ¡£ä¸æ˜¯å¾ˆå…¨ï¼Œæ¨¡å—åˆå¤šï¼Œ<strong>ä¸€ä¸Šæ¥å°±æœ‰åå‡ ä¸ªæœåŠ¡ + å‰ç«¯ä»£ç </strong>ï¼Œæ–°äººæ¥æ‰‹å¾ˆå®¹æ˜“æ‡µã€‚</p>
<hr/>
<h3 data-id="heading-4">ğŸ§  æˆ‘çš„åˆ†æç­–ç•¥ï¼šäº¤ç»™ AI æ¥â€œå•ƒâ€é¡¹ç›®</h3>
<p>è¿™æ¬¡æˆ‘æ²¡æœ‰å†æ‰‹åŠ¨å»ç¿»æ¯ä¸€å±‚ä»£ç ï¼Œè€Œæ˜¯å°è¯•ç”¨ TRAE çš„ AI æ™ºèƒ½åˆ†æèƒ½åŠ›ï¼Œæ¥â€œè‡ªåŠ¨å®Œæˆâ€ä»¥ä¸‹ä»»åŠ¡ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/38ecdf5c3dff4aa59b0826ead222bf3a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSp5aSp5pG46bG855qEamF2YeW3peeoi-W4iA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764811912&amp;x-signature=pzhQm530DoHzNHLrzbuXgaghuYc%3D" alt="image.png" loading="lazy"/></p>
<p>å¦‚å›¾æ‰€ç¤ºï¼ŒTRAE ä¸ºæˆ‘ç”Ÿæˆäº†ä¸€å¥—æ¸…æ™°çš„ä»»åŠ¡æ¸…å•ï¼š</p>
<ol>
<li>æŸ¥çœ‹ <code>README.md</code>ï¼Œäº†è§£é¡¹ç›®ä»‹ç»</li>
<li>åˆ†æé¡¹ç›®ç»“æ„ï¼Œç†æ¸…æ¨¡å—å…³ç³»</li>
<li>ç”Ÿæˆè¯¦ç»†ä»‹ç»æ–‡æ¡£</li>
<li>åˆ›å»ºé¡¹ç›®æ¶æ„ç»“æ„å›¾</li>
<li>åˆ†ææ ¸å¿ƒé…ç½®æ–‡ä»¶</li>
<li>æŸ¥çœ‹ä¸šåŠ¡ä»£ç å®ç°</li>
<li>æŸ¥çœ‹å‰ç«¯ç»“æ„å’Œæƒé™é€»è¾‘</li>
</ol>
<hr/>
<h3 data-id="heading-5">âœ¨ æœ€ç»ˆæˆæœï¼šæ–‡æ¡£ + æ¶æ„å›¾ + æ¨¡å—è¯´æ˜ï¼Œä¸€åº”ä¿±å…¨</h3>
<p>ç»è¿‡ä¸€è½®åˆ†æï¼ŒTRAE è‡ªåŠ¨ä¸ºæˆ‘ç”Ÿæˆäº†ä»¥ä¸‹å†…å®¹ï¼š
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ce1ff3a458c945a1beeb62399d06b22a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSp5aSp5pG46bG855qEamF2YeW3peeoi-W4iA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764811912&amp;x-signature=DBbmIHfxf9i8pCtpFB412pqnKPE%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-6">âœ… ä¸€ä»½å®Œæ•´çš„é¡¹ç›®ä»‹ç»æ–‡æ¡£ï¼š</h4>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f635e5053d7146ecac7d72b873ab8689~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSp5aSp5pG46bG855qEamF2YeW3peeoi-W4iA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764811912&amp;x-signature=LNqavDUMF8HbWdQNeVsgF%2Be3%2Bxo%3D" alt="image.png" loading="lazy"/></p>
<ul>
<li>é¡¹ç›®æ¦‚è¿°ä¸æ ¸å¿ƒåŠŸèƒ½</li>
<li>åç«¯æŠ€æœ¯æ ˆ + å‰ç«¯æŠ€æœ¯æ ˆ</li>
<li>ç³»ç»Ÿæ¶æ„ä¸æ¨¡å—åˆ’åˆ†</li>
<li>ç”¨æˆ·ç®¡ç†ã€èœå•æƒé™ã€è®¤è¯æˆæƒé€»è¾‘</li>
<li>Docker ç¯å¢ƒéƒ¨ç½²è¯´æ˜</li>
</ul>
<p>æ–‡ä»¶åï¼š<code>project_documentation.md</code></p>
<h4 data-id="heading-7">âœ… ä¸€å¼ å¯è§†åŒ–çš„ç³»ç»Ÿæ¶æ„å›¾</h4>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9842e1b5a92e4c1f88c7c3b8611f46b8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSp5aSp5pG46bG855qEamF2YeW3peeoi-W4iA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764811912&amp;x-signature=RoB54BcByQy4c9v7shBbiHXfSxw%3D" alt="deepseek_mermaid_20251125_b587a6.png" loading="lazy"/></p>
<ul>
<li>å¾®æœåŠ¡æ¨¡å—ä¾èµ–å…³ç³»</li>
<li>æ ¸å¿ƒåŠŸèƒ½æ¨¡å—åˆ†å¸ƒå›¾</li>
<li>å‰åç«¯è°ƒç”¨æµç¨‹å›¾</li>
<li>æƒé™è®¤è¯æµç¨‹å›¾</li>
</ul>
<p>æ–‡ä»¶åï¼š<code>system_architecture.md</code></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e4350142b67143c38d30930b3f0ac8a7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSp5aSp5pG46bG855qEamF2YeW3peeoi-W4iA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764811912&amp;x-signature=O199sdtwthKkHymR3xtGgaotniM%3D" alt="deepseek_mermaid_20251125_1929da.png" loading="lazy"/>
ä½ å¯ä»¥çœ‹åˆ°ï¼Œåœ¨ç³»ç»Ÿå·¦ä¾§æˆ‘å®Œæ•´åˆ†æäº† RuoYi-Cloud çš„æ¨¡å—ç»“æ„ï¼Œåœ¨å³ä¾§çš„ TRAE ç•Œé¢ä¸­ï¼Œä»»åŠ¡è¿›åº¦è¢«è‡ªåŠ¨è¿½è¸ªï¼Œå¹¶ä¸”æ¯å®Œæˆä¸€ä¸ªé˜¶æ®µï¼ŒAI éƒ½ä¼šè‡ªåŠ¨ç”Ÿæˆå†…å®¹å¹¶å›å¡«ä¸Šä¸‹æ–‡ã€‚</p>
<hr/>
<h3 data-id="heading-8">ğŸ§© é¡¹ç›®ç»“æ„åˆ†æäº®ç‚¹</h3>
<p>åœ¨æ–‡æ¡£ä¸­ï¼ŒAI å¯¹æ¨¡å—åšäº†éå¸¸ç»†è‡´çš„æ‹†è§£ï¼š</p>
<h4 data-id="heading-9">ğŸŒ å¾®æœåŠ¡æ ¸å¿ƒæ¨¡å—</h4>
<ul>
<li><code>ruoyi-auth</code>ï¼šè®¤è¯ä¸­å¿ƒ</li>
<li><code>ruoyi-gateway</code>ï¼šç½‘å…³è·¯ç”±æœåŠ¡</li>
<li><code>ruoyi-system</code>ï¼šæ ¸å¿ƒä¸šåŠ¡æ¨¡å—ï¼ˆç”¨æˆ·/è§’è‰²/èœå•ï¼‰</li>
<li><code>ruoyi-job</code>ï¼šå®šæ—¶ä»»åŠ¡æœåŠ¡</li>
<li><code>ruoyi-gen</code>ï¼šä»£ç ç”Ÿæˆæ¨¡å—</li>
</ul>
<h4 data-id="heading-10">ğŸ§± å…¬å…±ä¾èµ–æ¨¡å—</h4>
<ul>
<li><code>ruoyi-common-core</code>ï¼šåŸºç¡€å·¥å…·ç±»</li>
<li><code>ruoyi-common-security</code>ï¼šæƒé™ç›¸å…³å°è£…</li>
<li><code>ruoyi-common-redis</code>ï¼šRedis å°è£…</li>
</ul>
<h4 data-id="heading-11">ğŸ“Š å‰ç«¯ç»“æ„åˆ†æ</h4>
<ul>
<li>Vue 2.6 + Element UI</li>
<li>Vuex çŠ¶æ€ç®¡ç†</li>
<li>Axios è¯·æ±‚å°è£…</li>
<li>æƒé™é€»è¾‘åŸºäºè·¯ç”±å®ˆå«ï¼ˆ<code>permission.js</code>ï¼‰</li>
</ul>
<hr/>
<h3 data-id="heading-12">ğŸ§¾ æ–‡æ¡£å†…å®¹æ‘˜å½•</h3>
<p>ç”Ÿæˆçš„ <code>project_documentation.md</code> ä¸­å†…å®¹éå¸¸å®Œæ•´ã€‚ä»¥ä¸‹æ˜¯éƒ¨åˆ†æ–‡æ¡£ç»“æ„ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section">## 1. é¡¹ç›®æ¦‚è¿°</span>
RuoYi-Cloud æ˜¯ä¸€å¥—åŸºäº Spring Cloud Alibaba çš„å¾®æœåŠ¡æ¶æ„æƒé™ç®¡ç†ç³»ç»Ÿ...

<span class="hljs-section">## 2. æŠ€æœ¯æ ˆ</span>
<span class="hljs-bullet">-</span> åç«¯ï¼šSpring Bootã€Nacosã€Sentinelã€MyBatis-Plusã€Redisã€MySQL
<span class="hljs-bullet">-</span> å‰ç«¯ï¼šVue 2.xã€Element UIã€Axiosã€Vuex

<span class="hljs-section">## 3. ç³»ç»Ÿæ¶æ„</span>
<span class="hljs-bullet">-</span> ruoyi-authï¼šè®¤è¯ä¸­å¿ƒ
<span class="hljs-bullet">-</span> ruoyi-systemï¼šæ ¸å¿ƒä¸šåŠ¡
<span class="hljs-bullet">-</span> ruoyi-gatewayï¼šAPI ç½‘å…³

<span class="hljs-section">## 4. æ ¸å¿ƒåŠŸèƒ½æ¨¡å—</span>
<span class="hljs-section">### ç”¨æˆ·ç®¡ç†</span>
<span class="hljs-bullet">-</span> GET /user/listï¼šåˆ†é¡µæŸ¥è¯¢ç”¨æˆ·
<span class="hljs-bullet">-</span> PUT /user/resetPwdï¼šé‡ç½®å¯†ç 

<span class="hljs-section">### èœå•ç®¡ç†</span>
<span class="hljs-bullet">-</span> GET /menu/treeselectï¼šè·å–èœå•æ ‘
<span class="hljs-bullet">-</span> GET /menu/getRoutersï¼šç”Ÿæˆå‰ç«¯è·¯ç”±
</code></pre>
<hr/>
<h3 data-id="heading-13">ğŸ§  æˆ‘çš„æ”¶è·ï¼šAI ä¸åªæ˜¯â€œå†™ä»£ç â€ï¼Œæ›´æ˜¯â€œå¸®ä½ ç†è§£ç³»ç»Ÿâ€</h3>
<p>å¾ˆå¤šäººå¯¹ AI çš„è®¤çŸ¥è¿˜åœç•™åœ¨â€œè®©å®ƒå†™ä¸ªå·¥å…·ç±»â€â€œè®©å®ƒç”Ÿæˆä¸ªæ¥å£â€ï¼Œä½†æˆ‘è¿™æ¬¡æœ€å¤§çš„æ„Ÿå—æ˜¯ï¼š</p>
<blockquote>
<p><strong>AI å¯ä»¥æˆä¸ºæˆ‘ä»¬ç†è§£ç³»ç»Ÿç»“æ„ã€æ¢³ç†æ¶æ„ã€ç”Ÿæˆæ–‡æ¡£çš„å¾—åŠ›åŠ©æ‰‹ã€‚</strong></p>
</blockquote>
<p>å®ƒä¸æ˜¯â€œæ›¿ä»£ä½ å†™æ–‡æ¡£â€ï¼Œè€Œæ˜¯è®©ä½ â€œæœ‰èƒ½åŠ›å†™å¾—æ›´å¿«ã€å†™å¾—æ›´å…¨ã€å†™å¾—æ›´ä¸“ä¸šâ€ã€‚</p>
<hr/>
<h3 data-id="heading-14">ğŸ§© é€‚ç”¨åœºæ™¯ï¼šä¸ä»…æ˜¯ RuoYiï¼Œä¹Ÿé€‚ç”¨äºä½ ä»¬çš„é¡¹ç›®</h3>
<p>å¦‚æœä½ å›¢é˜Ÿä¹Ÿæœ‰ä»¥ä¸‹æƒ…å†µï¼š</p>
<ul>
<li>æ¥æ‰‹ä¸€ä¸ªåˆ«äººç•™ä¸‹çš„è€é¡¹ç›®</li>
<li>æƒ³è¡¥æ–‡æ¡£ä½†æ²¡äººæ„¿æ„å†™</li>
<li>æƒ³æ¢³ç†æ¶æ„ä½†æ²¡äººæå¾—æ¸…æ¥š</li>
<li>è·¨éƒ¨é—¨åä½œæ—¶æ²Ÿé€šæˆæœ¬é«˜</li>
</ul>
<p>é‚£ä¹ˆæˆ‘å¼ºçƒˆæ¨èä½ è¯•è¯• TRAE çš„æ–‡æ¡£ç”Ÿæˆèƒ½åŠ›ã€‚å°¤å…¶æ˜¯å¯¹ Java å¾®æœåŠ¡æ¶æ„é¡¹ç›®ï¼Œå®ƒçš„ç†è§£èƒ½åŠ›å·²ç»éå¸¸æˆç†Ÿã€‚</p>
<hr/>
<h3 data-id="heading-15">ğŸš€ æ€»ç»“ï¼šæœªæ¥çš„å¼€å‘è€…ï¼Œä¸åªæ˜¯å†™ä»£ç çš„äºº</h3>
<p>è¿™æ¬¡æˆ‘ç”¨ TRAE AI æˆåŠŸå®Œæˆäº†å¯¹ä¸€ä¸ªä¼ä¸šçº§å¾®æœåŠ¡é¡¹ç›®çš„ç»“æ„åˆ†æã€æ–‡æ¡£ç”Ÿæˆå’Œæ¶æ„å›¾ç»˜åˆ¶ï¼ŒçœŸæ­£åšåˆ°äº†â€œ<strong>ä¸€é”®äº†è§£é¡¹ç›®å…¨è²Œ</strong>â€ã€‚</p>
<p>æˆ‘ä¹Ÿæ›´åŠ åšä¿¡ï¼šæœªæ¥çš„å¼€å‘è€…ï¼Œä¸åªæ˜¯å†™ä»£ç çš„äººï¼Œæ›´æ˜¯èƒ½é©¾é©­å·¥å…·ã€ç†è§£ç³»ç»Ÿã€è®²æ¸…æ¥šæ¶æ„çš„äººã€‚</p>
<hr/>
<p>ğŸ§  å·¥å…·ï¼šTRAE AIåŠ©æ‰‹ + Mermaid æ¶æ„å›¾ç”Ÿæˆ + Markdown æ–‡æ¡£ç”Ÿæˆå™¨</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä½¿ç”¨ç®€å• JSON + è‡ªå®šä¹‰ t å‡½æ•°å®ç°è½»é‡å¤šè¯­è¨€å›½é™…åŒ–ï¼ˆæ— éœ€ next-intlï¼‰]]></title>    <link>https://juejin.cn/post/7576918517237809202</link>    <guid>https://juejin.cn/post/7576918517237809202</guid>    <pubDate>2025-11-27T03:11:55.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576918517237809202" data-draft-id="7577189654471901210" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä½¿ç”¨ç®€å• JSON + è‡ªå®šä¹‰ t å‡½æ•°å®ç°è½»é‡å¤šè¯­è¨€å›½é™…åŒ–ï¼ˆæ— éœ€ next-intlï¼‰"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,Trae"/> <meta itemprop="datePublished" content="2025-11-27T03:11:55.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜çˆ±é’“é±¼"/> <meta itemprop="url" content="https://juejin.cn/user/2799775299157614"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä½¿ç”¨ç®€å• JSON + è‡ªå®šä¹‰ t å‡½æ•°å®ç°è½»é‡å¤šè¯­è¨€å›½é™…åŒ–ï¼ˆæ— éœ€ next-intlï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2799775299157614/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜çˆ±é’“é±¼
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-27T03:11:55.000Z" title="Thu Nov 27 2025 03:11:55 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>åœ¨ Next.js å¼€å‘å›½é™…åŒ–ï¼ˆi18nï¼‰é¡¹ç›®æ—¶ï¼Œè®¸å¤šäººä¼šç›´æ¥å®‰è£… next-intlã€react-intlã€i18next è¿™æ ·çš„é‡é‡çº§åº“ã€‚
ä½†å¯¹äºä¸€äº›ç»“æ„ç®€å•ã€åªéœ€è¦åŸºç¡€æ–‡æœ¬ç¿»è¯‘çš„ç½‘ç«™æ¥è¯´ï¼Œä½¿ç”¨è¿™äº›åº“åè€Œä¼šå¸¦æ¥é¢å¤–çš„å¤æ‚æ€§ã€‚</p>
</blockquote>
<p>å¦‚æœä½ åªæƒ³è®©é¡¹ç›®æ”¯æŒï¼š</p>
<p>âœ” æ ‡é¢˜å¤šè¯­è¨€
âœ” æŒ‰é’®å¤šè¯­è¨€
âœ” æ–‡æ¡ˆå¤šè¯­è¨€
âœ” æ‰©å±•çµæ´»ã€æ— éœ€å¤æ‚é…ç½®</p>
<p>é‚£ä¹ˆä½ å®Œå…¨å¯ä»¥è‡ªå·±å†™ä¸€ä¸ª <strong>è¶…è½»é‡ i18n æ–¹æ¡ˆ</strong>ã€‚</p>
<p>ä»Šå¤©æˆ‘ä»¬æ¥ä»‹ç»ä¸€ä¸ªéå¸¸ç®€å•ã€æ–¹ä¾¿æ‰©å±•ã€å¯åœ¨ä»»ä½•ç¯å¢ƒä½¿ç”¨çš„å¤šè¯­è¨€å®ç°æ–¹å¼ï¼š
<strong>åŸºäº JSON è¯­è¨€åŒ… + t() ç¿»è¯‘å‡½æ•°ã€‚</strong></p>
<hr/>
<h2 data-id="heading-0">ç›®å½•ç»“æ„ï¼šç®€å•ã€æ¸…æ™°ã€å¯æ‰©å±•</h2>
<p>é¦–å…ˆåœ¨é¡¹ç›®ä¸­æ–°å»º <code>i18n</code> æ–‡ä»¶å¤¹ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">/i18n
  â”œâ”€ en.json
  â”œâ”€ de.json
  â”œâ”€ fr.json
</code></pre>
<p>å†…å®¹ä¾‹å¦‚ï¼š</p>
<h3 data-id="heading-1">en.json</h3>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"hotTags"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Hot Tags"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"hotArticles"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Hot Articles"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"latestNews"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Latest News"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-2">de.json</h3>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"hotTags"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Beliebte Tags"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"hotArticles"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Beliebte Artikel"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"latestNews"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Neueste Nachrichten"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-3">fr.json</h3>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"hotTags"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Tags Populaires"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"hotArticles"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Articles Populaires"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"latestNews"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"DerniÃ¨res Nouvelles"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<hr/>
<h2 data-id="heading-4">è‡ªå®šä¹‰ t() ç¿»è¯‘å‡½æ•°</h2>
<p>è¿™ä¸€å°æ®µä»£ç å°±æ˜¯æ•´ä¸ªå¤šè¯­è¨€ç³»ç»Ÿçš„æ ¸å¿ƒï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> en <span class="hljs-keyword">from</span> <span class="hljs-string">"@/i18n/en.json"</span>;
<span class="hljs-keyword">import</span> de <span class="hljs-keyword">from</span> <span class="hljs-string">"@/i18n/de.json"</span>;
<span class="hljs-keyword">import</span> fr <span class="hljs-keyword">from</span> <span class="hljs-string">"@/i18n/fr.json"</span>;

<span class="hljs-keyword">const</span> locales = { en, de, fr };

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">t</span>(<span class="hljs-params">locale: <span class="hljs-built_in">string</span>, key: <span class="hljs-built_in">string</span></span>): <span class="hljs-built_in">string</span> {
  <span class="hljs-keyword">const</span> dict =
    (locales <span class="hljs-keyword">as</span> <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">string</span>&gt;&gt;)[locale] || locales[<span class="hljs-string">"en"</span>];

  <span class="hljs-keyword">return</span> dict[key] ?? key;
}
</code></pre>
<h3 data-id="heading-5">å·¥ä½œåŸç†</h3>
<ol>
<li>æ ¹æ®ä¼ å…¥çš„ localeï¼ˆ<code>en</code> / <code>de</code> / <code>fr</code>ï¼‰é€‰æ‹©å¯¹åº”å­—å…¸</li>
<li>å¦‚æœæ‰¾ä¸åˆ°è¯­è¨€ï¼Œè‡ªåŠ¨ä½¿ç”¨è‹±æ–‡ä½œä¸º fallback</li>
<li>å¦‚æœ key ä¸å­˜åœ¨ï¼ŒåŸæ ·è¿”å› keyï¼ˆæ–¹ä¾¿è°ƒè¯•ï¼‰</li>
</ol>
<h3 data-id="heading-6">ç±»å‹å®‰å…¨ï¼ˆè§£å†³ TS æŠ¥é”™ï¼‰</h3>
<p>ä¸Šé¢ä»£ç ä½¿ç”¨äº†ï¼š</p>
<pre><code class="hljs language-ts" lang="ts">(locales <span class="hljs-keyword">as</span> <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">string</span>&gt;&gt;)
</code></pre>
<p>è®© TypeScript æ˜ç¡®çŸ¥é“å­—å…¸æ˜¯ï¼š</p>
<ul>
<li>key: è¯­è¨€ä»£ç </li>
<li>value: æ–‡æœ¬æ˜ å°„è¡¨ï¼ˆé”®å€¼å¯¹ï¼‰</li>
</ul>
<p>è¿™æ ·å°±ä¸ä¼šå‡ºç°ï¼š</p>
<blockquote>
<p>ã€Œå…ƒç´ éšå¼å…·æœ‰ any ç±»å‹ã€</p>
</blockquote>
<hr/>
<h2 data-id="heading-7">åœ¨é¡µé¢ä¸­ä½¿ç”¨</h2>
<p>ç¤ºä¾‹ï¼š
ä½ åœ¨é¦–é¡µ HomePage ä¸­ä¼ å…¥ localeï¼š</p>
<pre><code class="hljs language-tsx" lang="tsx">&lt;h2 className=<span class="hljs-string">"text-2xl font-bold"</span>&gt;
  {<span class="hljs-title function_">t</span>(locale, <span class="hljs-string">"hotTags"</span>)}
&lt;/h2&gt;
</code></pre>
<p>æ¸²æŸ“æ•ˆæœå°†æ ¹æ®è¯­è¨€ä¸åŒè‡ªåŠ¨å˜åŒ–ï¼š</p>
<ul>
<li>English â†’ Hot Tags</li>
<li>Deutsch â†’ Beliebte Tags</li>
<li>FranÃ§ais â†’ Tags Populaires</li>
</ul>
<p>æ— éœ€é¢å¤–åº“ï¼Œæ— éœ€å¤æ‚é…ç½®ã€‚</p>
<hr/>
<h2 data-id="heading-8">ä¼˜ç‚¹æ€»ç»“</h2>





























<table><thead><tr><th>ç‰¹ç‚¹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>æè½»é‡</td><td>æ— éœ€å®‰è£…ä»»ä½• i18n åº“</td></tr><tr><td>çº¯ JSON æ–‡ä»¶</td><td>éæŠ€æœ¯äººå‘˜ä¹Ÿèƒ½ç›´æ¥ç¼–è¾‘</td></tr><tr><td>å®Œå…¨å¯æ§</td><td>ä¸ä¼šè¢«ç¬¬ä¸‰æ–¹åº“çš„ API æˆ–å¤æ‚è¡Œä¸ºæŸç¼š</td></tr><tr><td>æ˜“æ‰©å±•</td><td>æƒ³åŠ è¯­è¨€ï¼ŸåŠ ä¸ª JSON æ–‡ä»¶å³å¯</td></tr><tr><td>æ˜“ç»´æŠ¤</td><td>é”®å€¼ç»“æ„ç®€å•ä¸å®¹æ˜“å‡ºé”™</td></tr></tbody></table>
<p>é€‚åˆç”¨åœ¨ï¼š</p>
<ul>
<li>ä¼ä¸šå®˜ç½‘</li>
<li>å±•ç¤ºæ€§ç½‘ç«™</li>
<li>CMS æ–‡ç« ç½‘ç«™ï¼ˆå¦‚ Strapi + Next.jsï¼‰</li>
<li>SEO å‹å¥½çš„å¤šè¯­è¨€ç«™ç‚¹</li>
<li>éœ€è¦å¿«é€Ÿä¸Šçº¿ MVP çš„é¡¹ç›®</li>
</ul>
<hr/>
<h2 data-id="heading-9">è¿˜èƒ½è¿›ä¸€æ­¥å¢å¼ºï¼</h2>
<p>è¦æ˜¯ä½ æƒ³æ‰©å±•æˆæ›´å¼ºçš„å›½é™…åŒ–ç³»ç»Ÿï¼Œä½ è¿˜å¯ä»¥åŠ å…¥ï¼š</p>
<h3 data-id="heading-10">âœ” æ”¯æŒåµŒå¥— keyï¼ˆå¦‚ <code>home.title</code>ï¼‰</h3>
<h3 data-id="heading-11">âœ” æ”¯æŒå˜é‡æ’å€¼ï¼ˆå¦‚ <code>Hello {{name}}</code>ï¼‰</h3>
<h3 data-id="heading-12">âœ” è‡ªåŠ¨æ£€æµ‹æµè§ˆå™¨è¯­è¨€</h3>
<h3 data-id="heading-13">âœ” æœåŠ¡ç«¯è‡ªåŠ¨æ³¨å…¥ localeï¼ˆNext.js App Routerï¼‰</h3>
<p>æˆ‘å¯ä»¥è¿›ä¸€æ­¥ä¸ºä½ å‡çº§æˆ <strong>å®Œæ•´ç®€æ˜“ç‰ˆ i18n æ¡†æ¶</strong>ã€‚</p>
<hr/>
<h2 data-id="heading-14">æœ€å</h2>
<p>è¿™ç§æ–¹å¼ç®€å•å´éå¸¸å®ç”¨ï¼Œç‰¹åˆ«é€‚åˆ
å·²ç»æœ‰åç«¯ï¼ˆä¾‹å¦‚ Strapiï¼‰ + å‰ç«¯ Next.js ç»“æ„çš„å¤šè¯­è¨€ç«™ç‚¹ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[çŸ¥è¯†åº“ï¼ˆKnowledge Baseï¼‰ä¸çŸ¥è¯†å›¾è°±ï¼ˆKnowledge Graphï¼‰åˆ°åº•è¯¥æ€ä¹ˆé€‰ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7576923573778399274</link>    <guid>https://juejin.cn/post/7576923573778399274</guid>    <pubDate>2025-11-27T03:21:02.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576923573778399274" data-draft-id="7576923573778202666" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="çŸ¥è¯†åº“ï¼ˆKnowledge Baseï¼‰ä¸çŸ¥è¯†å›¾è°±ï¼ˆKnowledge Graphï¼‰åˆ°åº•è¯¥æ€ä¹ˆé€‰ï¼Ÿ"/> <meta itemprop="keywords" content="AIGC"/> <meta itemprop="datePublished" content="2025-11-27T03:21:02.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¥‡èˆç²¾é€‰"/> <meta itemprop="url" content="https://juejin.cn/user/4388906147515367"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            çŸ¥è¯†åº“ï¼ˆKnowledge Baseï¼‰ä¸çŸ¥è¯†å›¾è°±ï¼ˆKnowledge Graphï¼‰åˆ°åº•è¯¥æ€ä¹ˆé€‰ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4388906147515367/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¥‡èˆç²¾é€‰
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-27T03:21:02.000Z" title="Thu Nov 27 2025 03:21:02 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p><strong>æ‘˜è¦</strong>ï¼šåœ¨å¤§æ¨¡å‹å¹»è§‰é¢‘å‘çš„ä»Šå¤©ï¼ŒRAG æ¶æ„æˆä¸ºæ•‘å‘½ç¨»è‰ã€‚ä½†é¢å¯¹â€œçŸ¥è¯†åº“â€ä¸â€œçŸ¥è¯†å›¾è°±â€ä¸¤å¤§æŠ€æœ¯è·¯çº¿ï¼Œå¼€å‘è€…è¯¥å¦‚ä½•æŠ‰æ‹©ï¼Ÿæœ¬æ–‡æ·±åº¦è§£æä¸¤è€…çš„å®šä¹‰ã€åŒºåˆ«ä¸èåˆè¶‹åŠ¿ï¼ŒåŠ©ä½ æ„å»ºæ›´èªæ˜çš„ AI ç³»ç»Ÿã€‚</p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6fd4bda76d9149f8b29c9dfb8820d379~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aWH6Iie57K-6YCJ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764818461&amp;x-signature=UYtBwzlAibO9jYPpfKIaw26u8bM%3D" alt="å°é¢å›¾ç¤ºä¾‹" loading="lazy"/></p>
<hr/>
<p>åœ¨å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰é‡å¡‘æŠ€æœ¯ç‰ˆå›¾çš„ä»Šå¤©ï¼Œâ€œå¹»è§‰ï¼ˆHallucinationï¼‰â€é—®é¢˜ä¾ç„¶æ˜¯æ‚¬åœ¨ä¼ä¸šçº§åº”ç”¨å¤´é¡¶çš„è¾¾æ‘©å…‹åˆ©æ–¯ä¹‹å‰‘ã€‚ä¸ºäº†è§£å†³è¿™ä¸€é—®é¢˜ï¼Œæ£€ç´¢å¢å¼ºç”Ÿæˆï¼ˆRAGï¼‰æ¶æ„åº”è¿è€Œç”Ÿï¼Œè€Œ RAG çš„æ ¸å¿ƒåœ¨äºâ€œå¤–éƒ¨çŸ¥è¯†â€çš„æœ‰æ•ˆå­˜å‚¨ä¸æ£€ç´¢ã€‚</p>
<p>åœ¨è¿™ä¸ªèƒŒæ™¯ä¸‹ï¼Œä¸¤ä¸ªæ¦‚å¿µé¢‘ç¹å‡ºç°åœ¨æŠ€æœ¯æ¶æ„å›¾ä¸­ï¼š<strong>çŸ¥è¯†åº“ï¼ˆKnowledge Base, KBï¼‰</strong> å’Œ <strong>çŸ¥è¯†å›¾è°±ï¼ˆKnowledge Graph, KGï¼‰</strong>ã€‚</p>
<p>å¾ˆå¤šå¼€å‘è€…åœ¨é€‰å‹æ—¶ä¼šæ„Ÿåˆ°å›°æƒ‘ï¼šå®ƒä»¬ç©¶ç«Ÿæœ‰ä½•åŒºåˆ«ï¼Ÿæ˜¯äº’æ–¥çš„æ›¿ä»£å…³ç³»ï¼Œè¿˜æ˜¯äº’è¡¥çš„æ­æ¡£ï¼Ÿæœ¬æ–‡å°†ä»æŠ€æœ¯åŸç†ã€åº”ç”¨åœºæ™¯åŠè½åœ°å®è·µä¸‰ä¸ªç»´åº¦ï¼Œä¸ºæ‚¨æ·±åº¦æ‹†è§£è¿™ä¸¤å¤§çŸ¥è¯†ç®¡ç†æ”¯æŸ±ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€ æ ¸å¿ƒæ¦‚å¿µæ‹†è§£</h2>
<h3 data-id="heading-1">1. çŸ¥è¯†åº“ï¼ˆKnowledge Baseï¼‰ï¼šå¹¿ä¹‰çš„çŸ¥è¯†å®¹å™¨</h3>
<p>åœ¨ä¼ ç»Ÿå®šä¹‰ä¸­ï¼ŒçŸ¥è¯†åº“æ˜¯ç”¨äºçŸ¥è¯†ç®¡ç†çš„ä¿¡æ¯é›†åˆã€‚ä½†åœ¨å½“ä»Šçš„ AI è¯­å¢ƒä¸‹ï¼ˆç‰¹åˆ«æ˜¯ RAG æ¶æ„ä¸­ï¼‰ï¼Œå½“æˆ‘ä»¬è°ˆè®ºâ€œçŸ¥è¯†åº“â€æ—¶ï¼Œé€šå¸¸æŒ‡çš„æ˜¯<strong>åŸºäºå‘é‡æ£€ç´¢ï¼ˆVector Searchï¼‰çš„éç»“æ„åŒ–æ•°æ®å­˜å‚¨</strong>ã€‚</p>
<ul>
<li><strong>æ ¸å¿ƒé€»è¾‘</strong>ï¼šå°†æ–‡æ¡£ï¼ˆPDFã€Wikiã€Markdownï¼‰åˆ‡åˆ†æˆç‰‡æ®µï¼ˆChunksï¼‰ï¼Œé€šè¿‡ Embedding æ¨¡å‹è½¬åŒ–ä¸ºé«˜ç»´å‘é‡ï¼Œå­˜å‚¨åœ¨å‘é‡æ•°æ®åº“ä¸­ã€‚</li>
<li><strong>æ£€ç´¢æ–¹å¼</strong>ï¼šè®¡ç®—â€œè¯­ä¹‰ç›¸ä¼¼åº¦â€ã€‚ä¾‹å¦‚ï¼Œç”¨æˆ·é—®â€œè‹¹æœæ€ä¹ˆå–ï¼Ÿâ€ï¼Œç³»ç»Ÿèƒ½åŒ¹é…åˆ°â€œçº¢å¯Œå£«ä»·æ ¼ä¼˜æƒ â€çš„ç‰‡æ®µï¼Œå› ä¸ºå®ƒä»¬åœ¨å‘é‡ç©ºé—´è·ç¦»ç›¸è¿‘ã€‚</li>
<li><strong>ç‰¹ç‚¹</strong>ï¼šæ¨¡ç³ŠåŒ¹é…ã€æ„å»ºé€Ÿåº¦å¿«ã€é€‚åˆå¤„ç†æµ·é‡éç»“æ„åŒ–æ–‡æœ¬ã€‚</li>
</ul>
<h3 data-id="heading-2">2. çŸ¥è¯†å›¾è°±ï¼ˆKnowledge Graphï¼‰ï¼šä¸‡ç‰©äº’è”çš„è¯­ä¹‰ç½‘ç»œ</h3>
<p>çŸ¥è¯†å›¾è°±æœ¬è´¨ä¸Šæ˜¯ä¸€ç§<strong>åŸºäºå›¾æ•°æ®ç»“æ„ï¼ˆGraph Data Structureï¼‰çš„çŸ¥è¯†è¡¨ç¤ºæ–¹æ³•</strong>ã€‚å®ƒç”±èŠ‚ç‚¹ï¼ˆEntitiesï¼‰å’Œè¾¹ï¼ˆRelationshipsï¼‰ç»„æˆï¼Œä»¥â€œä¸»-è°“-å®¾â€çš„ä¸‰å…ƒç»„å½¢å¼ï¼ˆå¦‚ <code>&lt;åŸƒéš†Â·é©¬æ–¯å…‹, æ˜¯CEO, ç‰¹æ–¯æ‹‰&gt;</code>ï¼‰æè¿°ä¸–ç•Œã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cb173897465e475aa8e334dda94947e0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aWH6Iie57K-6YCJ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764818461&amp;x-signature=8cOnFnZPvZXrTFZEZXTf7QlH7T0%3D" alt="çŸ¥è¯†å›¾è°±ç¤ºæ„å›¾" loading="lazy"/></p>
<ul>
<li><strong>æ ¸å¿ƒé€»è¾‘</strong>ï¼šé€šè¿‡ä¿¡æ¯æŠ½å–ï¼ˆInformation Extractionï¼‰æŠ€æœ¯ï¼Œä»æ•°æ®ä¸­æç‚¼å®ä½“ä¸å…³ç³»ï¼Œæ„å»ºä¸€å¼ ç½‘çŠ¶çš„æ‹“æ‰‘ç»“æ„ã€‚</li>
<li><strong>æ£€ç´¢æ–¹å¼</strong>ï¼šå›¾éå†ï¼ˆGraph Traversalï¼‰ä¸å­å›¾åŒ¹é…ã€‚ä¾‹å¦‚ï¼ŒæŸ¥è¯¢â€œé©¬æ–¯å…‹ç®¡ç†çš„å…¬å¸æœ‰å“ªäº›ï¼Ÿâ€ï¼Œç³»ç»Ÿä¼šæ²¿ç€â€œCEOâ€è¿™æ¡è¾¹æ‰¾åˆ°æ‰€æœ‰å…³è”èŠ‚ç‚¹ã€‚</li>
<li><strong>ç‰¹ç‚¹</strong>ï¼šç²¾ç¡®åŒ¹é…ã€å…·å¤‡æ¨ç†èƒ½åŠ›ã€ç»“æ„åŒ–ç¨‹åº¦é«˜ã€é€‚åˆå¤„ç†å¤æ‚å…³ç³»ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-3">äºŒã€ æ·±åº¦å¯¹æ¯”ï¼šå¤šç»´åº¦çš„æŠ€æœ¯åšå¼ˆ</h2>
<p>ä¸ºäº†æ›´ç›´è§‚åœ°ç†è§£ä¸¤è€…çš„å·®å¼‚ï¼Œæˆ‘ä»¬ä»ä»¥ä¸‹äº”ä¸ªç»´åº¦è¿›è¡Œå¯¹æ¯”ï¼š</p>








































<table><thead><tr><th align="left">ç»´åº¦</th><th align="left">çŸ¥è¯†åº“ (Vector-based KB)</th><th align="left">çŸ¥è¯†å›¾è°± (Knowledge Graph)</th></tr></thead><tbody><tr><td align="left"><strong>æ•°æ®ç»“æ„</strong></td><td align="left">é«˜ç»´å‘é‡ç©ºé—´ï¼ˆæ‰å¹³åŒ–ï¼‰</td><td align="left">èŠ‚ç‚¹ä¸è¾¹çš„æ‹“æ‰‘ç½‘ç»œï¼ˆç»“æ„åŒ–ï¼‰</td></tr><tr><td align="left"><strong>æ„å»ºæˆæœ¬</strong></td><td align="left"><strong>ä½</strong>ï¼šåˆ‡ç‰‡ + Embedding å³å¯</td><td align="left"><strong>é«˜</strong>ï¼šéœ€è¦ Schema è®¾è®¡ã€å®ä½“è¯†åˆ«ã€å…³ç³»æŠ½å–</td></tr><tr><td align="left"><strong>æŸ¥è¯¢é€»è¾‘</strong></td><td align="left">è¯­ä¹‰ç›¸ä¼¼åº¦ï¼ˆæ¨¡ç³ŠåŒ¹é…ï¼‰</td><td align="left">é€»è¾‘æŸ¥è¯¢ä¸å¤šè·³éå†ï¼ˆç²¾ç¡®åŒ¹é…ï¼‰</td></tr><tr><td align="left"><strong>æ¨ç†èƒ½åŠ›</strong></td><td align="left">å¼±ï¼ˆä¾èµ– LLM ä¸Šä¸‹æ–‡ç†è§£ï¼‰</td><td align="left"><strong>å¼º</strong>ï¼ˆå…·å¤‡ä¼ é€’æ€§ã€å½’çº³æ€§æ¨ç†èƒ½åŠ›ï¼‰</td></tr><tr><td align="left"><strong>å¯è§£é‡Šæ€§</strong></td><td align="left">é»‘ç›’ï¼ˆå‘é‡è·ç¦»éš¾ä»¥ç›´è§‚è§£é‡Šï¼‰</td><td align="left"><strong>ç™½ç›’</strong>ï¼ˆè·¯å¾„æ¸…æ™°ï¼Œå¯è¿½æº¯ï¼‰</td></tr><tr><td align="left"><strong>æ›´æ–°ç»´æŠ¤</strong></td><td align="left">ç®€å•ï¼ˆå¢åˆ æ–‡æ¡£ç‰‡æ®µï¼‰</td><td align="left">å¤æ‚ï¼ˆéœ€ç»´æŠ¤å›¾ç»“æ„çš„å®Œæ•´æ€§ä¸ä¸€è‡´æ€§ï¼‰</td></tr></tbody></table>
<p><strong>ä¸€å¥è¯æ€»ç»“</strong>ï¼šçŸ¥è¯†åº“èƒœåœ¨<strong>å¹¿åº¦ä¸æ•ˆç‡</strong>ï¼ŒçŸ¥è¯†å›¾è°±èƒœåœ¨<strong>ç²¾åº¦ä¸æ·±åº¦</strong>ã€‚</p>
<hr/>
<h2 data-id="heading-4">ä¸‰ã€ å…¸å‹åº”ç”¨åœºæ™¯</h2>
<h3 data-id="heading-5">1. é€‚åˆä½¿ç”¨çŸ¥è¯†åº“ï¼ˆKBï¼‰çš„åœºæ™¯</h3>
<ul>
<li><strong>ä¼ä¸šå†…éƒ¨æ–‡æ¡£é—®ç­”</strong>ï¼šå‘˜å·¥æŸ¥è¯¢ HR æ”¿ç­–ã€IT æ“ä½œæ‰‹å†Œã€‚è¿™ç±»æ•°æ®é€šå¸¸æ˜¯éç»“æ„åŒ–çš„æ–‡æœ¬ï¼Œè¯­ä¹‰æœç´¢èƒ½å¿«é€Ÿå®šä½ç›¸å…³æ®µè½ã€‚</li>
<li><strong>é•¿æ–‡æœ¬è¾…åŠ©å†™ä½œ</strong>ï¼šå¯»æ‰¾ç›¸å…³çš„å†å²æ–‡ç« æˆ–ç´ æã€‚</li>
<li><strong>åˆçº§æ™ºèƒ½å®¢æœ</strong>ï¼šåŸºäº FAQ åˆ—è¡¨çš„å¿«é€Ÿå“åº”ã€‚</li>
</ul>
<h3 data-id="heading-6">2. é€‚åˆä½¿ç”¨çŸ¥è¯†å›¾è°±ï¼ˆKGï¼‰çš„åœºæ™¯</h3>
<ul>
<li><strong>é‡‘èé£æ§ä¸åæ¬ºè¯ˆ</strong>ï¼šé€šè¿‡åˆ†æå€Ÿæ¬¾äººä¹‹é—´çš„å…³è”å…³ç³»ï¼ˆå¦‚å…±åŒè”ç³»äººã€æ‹…ä¿é“¾ï¼‰ï¼Œå‘ç°éšè”½çš„æ¬ºè¯ˆå›¢ä¼™ã€‚è¿™æ˜¯å‘é‡æœç´¢æ— æ³•åšåˆ°çš„ã€‚</li>
<li><strong>ä¾›åº”é“¾ç®¡ç†</strong>ï¼šåˆ†æé›¶éƒ¨ä»¶çŸ­ç¼ºå¯¹ä¸‹æ¸¸äº§å“çš„çº§è”å½±å“ï¼ˆå›¾çš„ä¼ å¯¼æ€§ï¼‰ã€‚</li>
<li><strong>ç²¾å‡†æ¨èç³»ç»Ÿ</strong>ï¼šä¸ä»…æ¨èå•†å“ï¼Œè¿˜èƒ½è§£é‡Šâ€œä¸ºä»€ä¹ˆæ¨èâ€ï¼ˆå› ä¸ºä½ è´­ä¹°äº† Aï¼ŒA ä¸ B å±äºåŒç³»åˆ—ï¼‰ã€‚</li>
<li><strong>å¤æ‚å¤šè·³é—®ç­”ï¼ˆMulti-hop QAï¼‰</strong>ï¼šä¾‹å¦‚â€œé©¬æ–¯å…‹ç¬¬ä¸€ä»»å¦»å­çš„èŒä¸šæ˜¯ä»€ä¹ˆï¼Ÿâ€è¿™éœ€è¦å…ˆæ‰¾åˆ°å¦»å­ï¼Œå†æŸ¥æ‰¾å…¶èŒä¸šï¼Œå›¾è°±çš„éå†èƒ½åŠ›åœ¨æ­¤å…·æœ‰å‹å€’æ€§ä¼˜åŠ¿ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-7">å››ã€ æŠ€æœ¯å®ç°æ¦‚è§ˆ</h2>
<h3 data-id="heading-8">1. æ•°æ®å»ºæ¨¡ä¸å­˜å‚¨</h3>
<ul>
<li>
<p><strong>KB æ–¹æ¡ˆ</strong>ï¼š</p>
<ul>
<li><strong>å·¥å…·é“¾</strong>ï¼šLangChain / LlamaIndex (æ•°æ®å¤„ç†), OpenAI / HuggingFace (Embedding)ã€‚</li>
<li><strong>å­˜å‚¨</strong>ï¼šPinecone, Milvus, Weaviate, æˆ– PostgreSQL (pgvector)ã€‚</li>
<li><strong>å…³é”®ç‚¹</strong>ï¼šChunking Strategyï¼ˆåˆ‡ç‰‡ç­–ç•¥ï¼‰ç›´æ¥å½±å“æ£€ç´¢è´¨é‡ã€‚</li>
</ul>
</li>
<li>
<p><strong>KG æ–¹æ¡ˆ</strong>ï¼š</p>
<ul>
<li><strong>å·¥å…·é“¾</strong>ï¼šDeepDive (æŠ½å–), SpaCy (NER)ã€‚</li>
<li><strong>å­˜å‚¨</strong>ï¼šNeo4j (å±æ€§å›¾), NebulaGraph (å¤§è§„æ¨¡åˆ†å¸ƒå¼), JanusGraphã€‚</li>
<li><strong>å…³é”®ç‚¹</strong>ï¼šOntology Designï¼ˆæœ¬ä½“è®¾è®¡ï¼‰ï¼Œå³å®šä¹‰æ•°æ®ä¸–ç•Œçš„â€œéª¨æ¶â€ã€‚</li>
</ul>
</li>
</ul>
<h3 data-id="heading-9">2. èåˆè¶‹åŠ¿ï¼šGraphRAG</h3>
<p>å•çº¯çš„å‘é‡æ£€ç´¢å­˜åœ¨â€œåˆ‡ç‰‡ä¸¢å¤±ä¸Šä¸‹æ–‡â€çš„é—®é¢˜ï¼Œè€Œå•çº¯çš„å›¾è°±æ„å»ºæˆæœ¬è¿‡é«˜ã€‚ç›®å‰çš„ä¸šç•Œè¶‹åŠ¿æ˜¯ <strong>GraphRAG</strong>â€”â€”å°†ä¸¤è€…ç»“åˆã€‚<strong>å¾®è½¯ç ”ç©¶é™¢ï¼ˆMicrosoft Researchï¼‰åœ¨ 2024 å¹´å‘å¸ƒçš„ GraphRAG é¡¹ç›®</strong>æ­£æ˜¯è¿™ä¸€æ–¹å‘çš„é‡Œç¨‹ç¢‘å¼å·¥ä½œã€‚</p>
<ul>
<li><strong>åŸç†</strong>ï¼šåˆ©ç”¨ LLM æå–æ–‡æœ¬ä¸­çš„å…³é”®å®ä½“æ„å»ºå±€éƒ¨å­å›¾ï¼Œå­˜å‚¨åœ¨å›¾æ•°æ®åº“ä¸­ï¼›åŒæ—¶ä¿ç•™æ–‡æœ¬å‘é‡ã€‚</li>
<li><strong>ä¼˜åŠ¿</strong>ï¼šåœ¨å›ç­”â€œæ€»ç»“å…¨ä¹¦ä¸»æ—¨â€æˆ–â€œåˆ†æäººç‰©å…³ç³»â€è¿™ç±»å®è§‚é—®é¢˜æ—¶ï¼Œå›¾è°±èƒ½æä¾›å…¨å±€ç»“æ„ä¿¡æ¯ï¼Œå¼¥è¡¥å‘é‡æ£€ç´¢è¿‡äºå¾®è§‚çš„ç¼ºé™·ã€‚</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/58b4732e07794d069aecceb2b61e7a7d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aWH6Iie57K-6YCJ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764818461&amp;x-signature=WHhYuH8NBsp6hQ%2FpYrTJ%2FboFbZc%3D" alt="GraphRAG" loading="lazy"/>
ï¼ˆGraphRAGï¼‰</p>
<hr/>
<h2 data-id="heading-10">äº”ã€ å®è·µå»ºè®®ä¸è½åœ°æ¡ˆä¾‹</h2>
<p>å¯¹äºå¤§å¤šæ•°åˆåˆ›å›¢é˜Ÿæˆ–ä» 0 åˆ° 1 çš„é¡¹ç›®ï¼Œæˆ‘çš„å»ºè®®éµå¾ª <strong>â€œå…ˆåƒµåŒ–ï¼Œåä¼˜åŒ–â€</strong> çš„è·¯å¾„ï¼š</p>
<h3 data-id="heading-11">é˜¶æ®µä¸€ï¼šå¿«é€Ÿå†·å¯åŠ¨ï¼ˆVector KBï¼‰</h3>
<p><strong>åœºæ™¯</strong>ï¼šæŸç”µå•†æ­å»ºå”®åæœºå™¨äººã€‚
<strong>åšæ³•</strong>ï¼šç›´æ¥å°†äº§å“æ‰‹å†Œã€é€€æ¢è´§æ”¿ç­– PDF å¯¼å…¥å‘é‡æ•°æ®åº“ã€‚
<strong>æ”¶ç›Š</strong>ï¼š1-2 å‘¨å³å¯ä¸Šçº¿ï¼Œè§£å†³ 80% çš„å¸¸è§è¯­ä¹‰åŒ¹é…é—®é¢˜ã€‚</p>
<h3 data-id="heading-12">é˜¶æ®µäºŒï¼šç²¾åº¦è°ƒä¼˜ï¼ˆHybrid Searchï¼‰</h3>
<p><strong>åœºæ™¯</strong>ï¼šç”¨æˆ·åé¦ˆæœä¸åˆ°ç‰¹å®šå‹å·å‚æ•°ã€‚
<strong>åšæ³•</strong>ï¼šå¼•å…¥å…³é”®è¯æœç´¢ï¼ˆBM25ï¼‰ä¸å‘é‡æœç´¢ç»“åˆï¼Œç¡®ä¿ä¸“æœ‰åè¯çš„ç²¾ç¡®åŒ¹é…ã€‚</p>
<h3 data-id="heading-13">é˜¶æ®µä¸‰ï¼šå¼•å…¥å›¾è°±ï¼ˆKnowledge Graphï¼‰</h3>
<p><strong>åœºæ™¯</strong>ï¼šéœ€è¦å¤„ç†â€œå…¼å®¹æ€§â€å’¨è¯¢ï¼Œå¦‚â€œé•œå¤´ A èƒ½ä¸èƒ½è£…åœ¨ç›¸æœº B ä¸Šï¼Ÿâ€ã€‚
<strong>åšæ³•</strong>ï¼šæ„å»ºå°è§„æ¨¡å›¾è°±ï¼Œå®šä¹‰ <code>&lt;é•œå¤´, é€‚é…å¡å£, å¡å£å‹å·&gt;</code> å’Œ <code>&lt;ç›¸æœº, é€‚é…å¡å£, å¡å£å‹å·&gt;</code> çš„å…³ç³»ã€‚
<strong>æ”¶ç›Š</strong>ï¼šåˆ©ç”¨å›¾çš„é€»è¾‘æ¨ç†èƒ½åŠ›ï¼Œç»™å‡º 100% å‡†ç¡®çš„å…¼å®¹æ€§å›ç­”ï¼Œé¿å… LLM èƒ¡ç¼–ä¹±é€ ã€‚</p>
<hr/>
<h2 data-id="heading-14">ç»“è¯­</h2>
<p>çŸ¥è¯†åº“èµ‹äºˆäº† AI <strong>â€œåšå­¦â€</strong> çš„åº•è‰²ï¼Œè€ŒçŸ¥è¯†å›¾è°±åˆ™æ³¨å…¥äº† <strong>â€œé€»è¾‘â€</strong> çš„çµé­‚ã€‚</p>
<p>åœ¨å®é™…å·¥ç¨‹ä¸­ï¼Œä¸è¦ä¸ºäº†ç”¨å›¾è°±è€Œç”¨å›¾è°±ã€‚ä»ä¸šåŠ¡ç—›ç‚¹å‡ºå‘ï¼Œä»¥ä½æˆæœ¬çš„å‘é‡çŸ¥è¯†åº“èµ·æ­¥ï¼Œåœ¨éœ€è¦å¤„ç†å¤æ‚å…³è”ä¸ä¸¥è°¨æ¨ç†çš„æ·±æ°´åŒºï¼Œå†å¼•å…¥çŸ¥è¯†å›¾è°±è¿™ä¸€é‡å‹æ­¦å™¨ã€‚ä¸¤è€…çš„æœ‰æœºç»“åˆï¼Œæ‰æ˜¯é€šå¾€ä¸‹ä¸€ä»£è®¤çŸ¥æ™ºèƒ½çš„å¿…ç»ä¹‹è·¯ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åˆè¢« Cursor çƒ§äº† 1 ä¸‡å—ï¼Œæˆ‘éº»äº†ã€‚ã€‚ã€‚]]></title>    <link>https://juejin.cn/post/7577189654472065050</link>    <guid>https://juejin.cn/post/7577189654472065050</guid>    <pubDate>2025-11-27T03:21:39.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577189654472065050" data-draft-id="7576929700841701385" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åˆè¢« Cursor çƒ§äº† 1 ä¸‡å—ï¼Œæˆ‘éº»äº†ã€‚ã€‚ã€‚"/> <meta itemprop="keywords" content="API,AIç¼–ç¨‹,Cursor"/> <meta itemprop="datePublished" content="2025-11-27T03:21:39.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜é±¼çš®"/> <meta itemprop="url" content="https://juejin.cn/user/2444938365386621"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åˆè¢« Cursor çƒ§äº† 1 ä¸‡å—ï¼Œæˆ‘éº»äº†ã€‚ã€‚ã€‚
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2444938365386621/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜é±¼çš®
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-27T03:21:39.000Z" title="Thu Nov 27 2025 03:21:39 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯ç¨‹åºå‘˜é±¼çš®ã€‚è¿™æ®µæ—¶é—´å›½å¤–çš„å¤§æ¨¡å‹çœŸæ˜¯ç«åˆ°ä¸è¡Œï¼Œåƒæ–°å‡ºçš„ Gemini 3.0 å’Œ Claude Opus 4.5ï¼Œå¤©å¤©æœ€å¼ºã€å¤©å¤©ç‚¸è£‚ï¼Œæçš„æˆ‘å·²ç»æœ‰äº›éº»äº†ã€‚ã€‚ã€‚</p>
<p>çš„ç¡®ç›®å‰å›½å¤–çš„å¤§æ¨¡å‹åœ¨ç¼–ç¨‹èƒ½åŠ›ä¸Šæ˜¯é¢†å…ˆçš„ï¼Œä½† <strong>ä¸ä¸€å®šæ˜¯æœ€é€‚åˆå’±ä»¬çš„</strong>ã€‚</p>
<p>å¤§å¤šæ•°åŒå­¦ç”¨ AI æ–‡æœ¬æ¨¡å‹æ— éå°± 2 ä¸ªç›®çš„å˜›ï¼š</p>
<ul>
<li>è‡ªå·±ç”¨æ¥å†™ä»£ç </li>
<li>å¯¹å¤–æä¾› AI åº”ç”¨</li>
</ul>
<p>å…ˆè¯´è¯´ç¬¬ä¸€ä¸ªåœºæ™¯ï¼Œåƒæˆ‘ä»¬å›¢é˜Ÿè™½ç„¶ä¹Ÿåœ¨ç”¨ Cursor å»å¤„ç†å¤æ‚ä»»åŠ¡ï¼Œä½†æ˜¯å‰æ®µæ—¶é—´åˆšåˆšåˆ†äº«è¿‡è´¦å•ï¼Œä»·æ ¼çœŸæ˜¯å¤ªè´µäº†ï¼Œæ‰ä¸€ä¸ªå¤šæœˆå°±èŠ±äº† <strong>1 ä¸‡å¤š</strong>ï¼æˆ‘æ•´ä¸ªäººéƒ½éº»äº†ã€‚ã€‚ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9e4f24a1af48405ba62c03f2eba97649~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764818499&amp;x-signature=MoQ5e%2BPYB5Cv9eHIvRraFClp3l0%3D" alt="" loading="lazy"/></p>
<p>é™¤äº†è´¹ç”¨è´µä¹‹å¤–ï¼Œå›½å¤–çš„å¤§æ¨¡å‹åœ¨å¾ˆå¤šä»»åŠ¡çš„å¤„ç†é€Ÿåº¦ä¸Šæ˜¯ä¸å¦‚å›½å†…å¤§æ¨¡å‹çš„ï¼Œå¾ˆå®¹æ˜“æŠŠç®€å•çš„ä»»åŠ¡æå¤æ‚ï¼Œè´¹æ—¶åˆè´¹é’±ã€‚ä¹‹å‰å›½å†…çš„ GLM-4.6 å‘å¸ƒçš„æ—¶å€™ï¼Œæˆ‘ä¹Ÿä¸“é—¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2F8Gr__biKvaiaJqAu-8k6Ag" target="_blank" title="https://mp.weixin.qq.com/s/8Gr__biKvaiaJqAu-8k6Ag" ref="nofollow noopener noreferrer">å†™æ–‡ç« åšè¿‡å¯¹æ¯”</a>ï¼Œè®©å®ƒå’Œ Claude ä¸€å†³é«˜ä¸‹ï¼Œä¸€èµ·åšä¸ªåŒ…å«å®Œæ•´å‰åç«¯ä»£ç çš„å·¥å…·ç½‘ç«™ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ea523681ac5a42e58dcf2b73324c0537~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764818499&amp;x-signature=IdySvjVzo9sz%2Fa8Yp23dMIPfgeA%3D" alt="null" loading="lazy"/></p>
<p>ç»“æœ GLM-4.6 ä¸ä»…é€Ÿåº¦æœ€å¿«ï¼Œè€Œä¸”åŠŸèƒ½å®ç°æœ€å®Œæ•´ï¼Œç†è§£äº†æˆ‘çš„éœ€æ±‚ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c7ee66026a804411ae6ab308a164970c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764818499&amp;x-signature=4f%2B6Fk%2Fsw6R2aC0Q1BkYaqSK1Bk%3D" alt="" loading="lazy"/></p>
<p>å†è¯´è¯´ç¬¬äºŒä¸ªåœºæ™¯ â€”â€” å¯¹å¤–æä¾› AI åº”ç”¨ï¼Œä¹Ÿå°±æ˜¯è®©è‡ªå·±çš„ç¨‹åºé€šè¿‡ API æ¥å…¥ AI å¤§æ¨¡å‹ã€‚</p>
<p>æˆ‘ä»¬å›¢é˜Ÿä¹Ÿåšè¿‡å¾ˆå¤š AI åº”ç”¨ï¼Œä½†æ˜¯ç”¨çš„ä¸€ç›´æ˜¯å›½å†…å¤§æ¨¡å‹çš„ APIï¼</p>
<p>åŸå› å¾ˆç®€å•ï¼Œä¸ä»…èƒ½å¤Ÿæ»¡è¶³éœ€æ±‚ï¼Œè€Œä¸” <strong>æ›´å¿«ã€æ›´ç¨³å®šã€æ›´ä¾¿å®œ</strong>ã€‚æ‰€ä»¥å›½å¤–å¤§æ¨¡å‹å¹å¾—å†å¤©èŠ±ä¹±å ï¼Œæˆ‘ä¾ç„¶å»ºè®®å¤§å®¶ä½¿ç”¨å›½å†…å¤§æ¨¡å‹çš„ APIã€‚</p>
<p>æ¯”å¦‚æœ€è¿‘å¾ˆç«çš„ GLM-4.6 æ¨¡å‹ï¼Œåœ¨çœŸå®ç¼–ç¨‹ã€é•¿ä¸Šä¸‹æ–‡å¤„ç†ã€æ¨ç†èƒ½åŠ›ã€ä¿¡æ¯æœç´¢ã€å†™ä½œèƒ½åŠ›ä¸æ™ºèƒ½ä½“åº”ç”¨ç­‰å¤šä¸ªæ–¹é¢å®ç°å…¨é¢æå‡ã€‚ä»–ä»¬æ–°æ¨å‡ºçš„ Coding Plan å¥—é¤ï¼Œæ›´æ˜¯èƒ½å¤Ÿä»¥ Claude Code 1/7 çš„ä»·æ ¼ï¼Œäº«å— Claude Pro å¥—é¤çš„ 3 å€ç”¨é‡ï¼ŒåŒæ—¶èƒ½å¤Ÿåœ¨ä»£ç èƒ½åŠ›ä¸Šå¯¹é½ Claude Sonnet 4ã€‚</p>
<p>ä¹‹å‰æˆ‘å·²ç»ç»™å¤§å®¶åˆ†äº«è¿‡å¾ˆå¤šä¸ªäººä½¿ç”¨ AI çš„æŠ€å·§ï¼Œä»Šå¤©è¿™ç¯‡æ–‡ç« å°±ä¸»è¦åˆ†äº«å¤§æ¨¡å‹ API çš„ä½¿ç”¨æ•™ç¨‹ï¼Œæˆ‘å°†ä»¥å›½å†…æ™ºè°±æœ€æ–°æ——èˆ°çš„ GLM-4.6 æ¨¡å‹ä¸ºä¾‹ï¼Œæ‰‹æŠŠæ‰‹å¸¦ä½ å­¦ä¼š 3 å¤§ä½¿ç”¨ API çš„åœºæ™¯ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€API æ¥å…¥å¼€å‘å·¥å…·</h2>
<p>ä¸‹é¢ä»¥æµè¡Œçš„ Cursor å’Œ Claude Code ä¸ºä¾‹ï¼Œæ¥æ¼”ç¤ºå¦‚ä½•å°†å›½å†…å¤§æ¨¡å‹ GLM-4.6 çš„ API æ¥å…¥å¼€å‘å·¥å…·ã€‚</p>
<h3 data-id="heading-1">Cursor æ¥å…¥ GLM</h3>
<p>é¦–å…ˆæ‰“å¼€ Cursor çš„è®¾ç½®ç•Œé¢ï¼Œè¿›å…¥æ¨¡å‹è®¾ç½®ï¼Œç„¶åæ·»åŠ è‡ªå®šä¹‰æ¨¡å‹ï¼Œæ³¨æ„åç§°ä¸€å®šè¦æ˜¯å¤§å†™çš„ <code>GLM-4.6</code>ï¼</p>
<p>æ·»åŠ æ¨¡å‹åï¼Œéœ€è¦è¦†ç›– OpenAI çš„ API Key ä¸ºä½ è‡ªå·±çš„ã€åŒæ—¶è¦†ç›– OpenAI çš„è¯·æ±‚åœ°å€ä¸º <code>https://open.bigmodel.cn/api/coding/paas/v4</code>ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3ffda27525d94678b25307557b7282d2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764818499&amp;x-signature=mPqIPl9kfNagZTHX4kAFWAwFgNY%3D" alt="" loading="lazy"/></p>
<p>å¯ä»¥åœ¨æ™ºè°± AI å¼€æ”¾å¹³å°è·å–åˆ° API Keyï¼Œæ³¨æ„ä¸è¦æ³„éœ²ï¼</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1f24a4a6ab9a42818d29ec38093ea38c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764818499&amp;x-signature=C1yLsmvxdMhKM%2FizyBJ%2FfUGhbuk%3D" alt="" loading="lazy"/></p>
<p>ç„¶åï¼Œå°±å¯ä»¥åœ¨å¯¹è¯ç•Œé¢é€‰æ‹© GLM-4.6 å¤§æ¨¡å‹ï¼Œæ„‰å¿«ä½¿ç”¨äº†~</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8c468c6423bf47c1bca02e004755702e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764818499&amp;x-signature=igEa5xGskWRjmS45dhZCWxgdp7w%3D" alt="" loading="lazy"/></p>
<p>å›½å†…æ¨¡å‹çš„è¾“å‡ºé€Ÿåº¦å¾ˆå¿«ï¼Œå®æµ‹ä¸‹æ¥ç»“æœä¹Ÿæ¯”è¾ƒé è°±ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9f43a45494f242a88bf916de5d426c38~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764818499&amp;x-signature=MjaAz0rMrvBF6UPN5W84oqQnTrs%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-2">Claude Code æ¥å…¥ GLM</h3>
<p>ç»™ Claude Code æ¥å…¥ GLM ä¹Ÿå¾ˆç®€å•ï¼Œ1 åˆ†é’Ÿæå®šã€‚</p>
<p>é¦–å…ˆä¸€è¡Œå‘½ä»¤å®‰è£… Claude Codeï¼š</p>
<pre><code class="hljs language-bash" lang="bash">npmÂ installÂ -gÂ @anthropic-ai/claude-code
</code></pre>
<p>ç„¶åæ‰§è¡Œ <code>claude</code> å‘½ä»¤æ‰“å¼€ç¨‹åºï¼Œé»˜è®¤æ˜¯éœ€è¦ç™»å½• Claude è´¦å·çš„ï¼Œå¦åˆ™æ— æ³•ä½¿ç”¨ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c651cbb4f12e4536a5b4eea477666f91~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764818499&amp;x-signature=i9aSiYPLyO5NGLhEVHHLcFJkRwk%3D" alt="" loading="lazy"/></p>
<p>ä¸è¿‡æ²¡å…³ç³»ï¼Œè®©æˆ‘ä»¬æŠŠå®ƒèƒŒåçš„ AI å¤§æ¨¡å‹æ¢æˆå›½å†…çš„ã€‚é¦–å…ˆè¿›å…¥ <code>{ç”¨æˆ·ç›®å½•}/.claude</code> ç›®å½•ï¼Œåˆ›å»ºä¸€ä¸ª <code>settings.json</code> é…ç½®æ–‡ä»¶ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f02f972202f648e291d4f20acfa730af~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764818499&amp;x-signature=5DmTsAFyNxRXJYLLDqRYy3zcHWw%3D" alt="" loading="lazy"/></p>
<p>ç„¶åä¿®æ”¹é…ç½®æ–‡ä»¶ä¸­çš„å†…å®¹å¦‚ä¸‹ï¼Œè®°å¾—æ›¿æ¢æˆä½ è‡ªå·±çš„ API Keyï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/388e426792d747ad9cb69cf30c3d9a6d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764818499&amp;x-signature=B0pn0oqBmnOlmEU5Rc3LHzm8mnA%3D" alt="" loading="lazy"/></p>
<p>æ¥ä¸‹æ¥å°±å¯ä»¥æ„‰å¿«åœ°ä½¿ç”¨äº†~</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4d22b890080b4640a52dde2383d26ae9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764818499&amp;x-signature=YJKgvyHQIwWVSUJnYoHSzlX1O%2Fs%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-3">äºŒã€API æ¥å…¥æ–°é¡¹ç›®</h2>
<p>æ¥ä¸‹æ¥è®©æˆ‘ä»¬å­¦ä¹ å¦‚ä½•åˆ©ç”¨å¤§æ¨¡å‹ API å¼€å‘ä¸€ä¸ªå…¨æ–°çš„ AI åº”ç”¨ã€‚ä»¥ Java é¡¹ç›®ä¸ºä¾‹ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸»æµçš„ Spring AI æ¡†æ¶æ¥å¼€å‘ AI åº”ç”¨ã€‚</p>
<p>é¦–å…ˆåˆ©ç”¨ IDEA åˆ›å»ºä¸€ä¸ª Spring Boot é¡¹ç›®ï¼Œæ³¨æ„ JDK ç‰ˆæœ¬æœ€å¥½é€‰æ‹© 21ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ad4f564e0fe7454e95f396e1f41c546c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764818499&amp;x-signature=RPjX11c1WI1We8%2F1N0N0nvcYyus%3D" alt="" loading="lazy"/></p>
<p>ç„¶åé€‰æ‹© Spring Boot 3.x çš„ç‰ˆæœ¬ï¼ˆæš‚æ—¶ä¸è¦ä½¿ç”¨ 4ï¼‰ä»¥åŠéœ€è¦çš„ä¾èµ–ã€‚</p>
<p>Spring AI å·²ç»å…¼å®¹äº†æ™ºè°±ç³»åˆ—çš„å¤§æ¨¡å‹ï¼ˆåŒ…æ‹¬ GLM-4.6ï¼‰ï¼Œåªéœ€è¦å‹¾é€‰ <code>ZhipuAI</code> ä¾èµ–å°±å¥½ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/adf177e26d82468fa1c0ed6e937e2a7e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764818499&amp;x-signature=FMxdHonAYgWwfC3vaSadvaMQqfo%3D" alt="" loading="lazy"/></p>
<p>åˆ›å»ºæ–°é¡¹ç›®å®Œæˆåï¼Œæˆ‘ä»¬å¯ä»¥å‚è€ƒ Spring AI å®˜æ–¹æ–‡æ¡£æ¥ä¿®æ”¹ <code>application.yml</code> é…ç½®æ–‡ä»¶ï¼Œå¡«å†™å¯¹æ¥æ™ºè°± AI æ‰€éœ€çš„é…ç½®ã€‚</p>
<p>å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.spring.io%2Fspring-ai%2Freference%2Fapi%2Fchat%2Fzhipuai-chat.html" target="_blank" title="https://docs.spring.io/spring-ai/reference/api/chat/zhipuai-chat.html" ref="nofollow noopener noreferrer">docs.spring.io/spring-ai/râ€¦</a></p>
<p>æ¯”å¦‚ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">spring:</span>
<span class="hljs-attr">application:</span>
Â  <span class="hljs-string">name:</span>Â <span class="hljs-string">yupi-ai-project</span>
<span class="hljs-attr">ai:</span>
Â  <span class="hljs-attr">zhipuai:</span>
Â  Â  <span class="hljs-string">api-key:</span>Â <span class="hljs-string">&lt;Your</span> <span class="hljs-string">API</span> <span class="hljs-string">Key&gt;</span>
Â  Â  <span class="hljs-attr">chat:</span>
Â  Â  Â  <span class="hljs-string">base-url:</span>Â <span class="hljs-string">https://open.bigmodel.cn/api/coding/paas</span>
Â  Â  Â  <span class="hljs-attr">options:</span>
Â  Â  Â  Â  <span class="hljs-string">model:</span>Â <span class="hljs-string">glm-4.6</span>
</code></pre>
<p>æ³¨æ„ï¼Œä¸Šè¿°ä»£ç ä¸­çš„ <code>base-url</code> å¦‚æœä¸å¡«å†™ï¼Œé»˜è®¤ä¸º <code>https://open.bigmodel.cn/api/paas</code>ï¼›å¦‚æœä½ è¦ä½¿ç”¨ Coding Plan çš„ä¼˜æƒ å¥—é¤åŒ…ï¼Œéœ€è¦æ›¿æ¢ä¸º <code>https://open.bigmodel.cn/api/coding/paas</code>ï¼ˆä¸­é—´å¤šåŠ äº†ä¸ª codingï¼‰ã€‚</p>
<p>å¡«å†™å¥½é…ç½®åï¼Œè®©æˆ‘ä»¬å†™ä¸€ä¸ªå•å…ƒæµ‹è¯•æ–‡ä»¶ï¼Œç›´æ¥ä½¿ç”¨è‡ªåŠ¨æ³¨å…¥çš„ ChatModel ç±»å‹çš„ Beanï¼Œç„¶åè°ƒç”¨ ChatModel æä¾›çš„ call æ–¹æ³•å’Œ AI å¯¹è¯ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@SpringBootTest</span>
<span class="hljs-keyword">class</span>Â <span class="hljs-title class_">YupiAiProjectApplicationTests</span>Â {
â€‹
Â  Â <span class="hljs-meta">@Resource</span>
Â  Â <span class="hljs-keyword">private</span>Â <span class="hljs-title class_">ChatModel</span>Â zhiPuAiChatModel;
â€‹
Â  Â <span class="hljs-meta">@Test</span>
Â  Â <span class="hljs-built_in">void</span>Â <span class="hljs-title function_">contextLoads</span>(<span class="hljs-params"/>) {
Â  Â  Â  Â <span class="hljs-title class_">String</span>Â contentÂ =Â zhiPuAiChatModel.<span class="hljs-title function_">call</span>(<span class="hljs-string">"ä½ å¥½ï¼Œæˆ‘æ˜¯ç¨‹åºå‘˜é±¼çš®"</span>);
Â  Â  Â  Â <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(content);
Â  }
â€‹
}
</code></pre>
<p>ç›´æ¥è¿è¡Œå•å…ƒæµ‹è¯•ï¼Œä¸€æ¬¡ AI å¯¹è¯å°±å®Œæˆäº†ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fb6b4755f6de41aab7e2efe06dcab589~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764818499&amp;x-signature=HtXdACVT8ShkbcsVTmHDxEGFdRs%3D" alt="" loading="lazy"/></p>
<p>å°† AI æ¥å…¥é¡¹ç›®å°±æ˜¯è¿™ä¹ˆç®€å•~ è€Œä¸”å› ä¸ºæˆ‘ä»¬ç”¨çš„æ˜¯ Spring AI æ¡†æ¶ï¼Œä½ å¯ä»¥äº«å—æ¡†æ¶æä¾›çš„å„ç§é«˜çº§èƒ½åŠ›ï¼Œæ¯”å¦‚å¯¹è¯è®°å¿†ã€RAGã€å·¥å…·è°ƒç”¨ã€å¯è§‚æµ‹æ€§ç­‰ç­‰ã€‚</p>
<h2 data-id="heading-4">ä¸‰ã€API æ¥å…¥å·²æœ‰é¡¹ç›®</h2>
<p>å¦‚æœä½ çš„é¡¹ç›®å·²ç»ä½¿ç”¨äº† AI å¼€å‘æ¡†æ¶ã€æˆ–è€… Open AI å¤§æ¨¡å‹ï¼Œåªéœ€ 1 åˆ†é’Ÿå°±èƒ½æ›¿æ¢ä¸ºå›½å†…çš„å¤§æ¨¡å‹ APIã€‚</p>
<p>ä»¥æˆ‘å½“æ—¶å¸¦å¤§å®¶ä» 0 å¼€å§‹åšçš„ã€å¯¹æ ‡å¤§å‚çš„ <strong>AI é›¶ä»£ç ç”Ÿæˆé¡¹ç›®</strong> ä¸ºä¾‹ï¼Œè¿™ä¸ªé¡¹ç›®ä½¿ç”¨ Java ä¸»æµçš„ AI åº”ç”¨å¼€å‘æ¡†æ¶ LangChain4jã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/55afbbe8efd54f6aa14d7790207dcd21~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764818499&amp;x-signature=j7eplPQZYL%2FUr9CVLSVqUuS8uyo%3D" alt="" loading="lazy"/></p>
<p>é¡¹ç›®ä»£ç æ˜¯ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fliyupi%2Fyu-ai-code-mother" target="_blank" title="https://github.com/liyupi/yu-ai-code-mother" ref="nofollow noopener noreferrer">å®Œå…¨å¼€æº</a> çš„ï¼Œå¤§å®¶å¯ä»¥ç›´æ¥ä¸‹è½½å­¦ä¹ ï¼Œä¹Ÿæ¬¢è¿åˆ°ç¼–ç¨‹å¯¼èˆªå­¦ä¹ æ•´ä¸ªé¡¹ç›®çš„å®Œæ•´æ•™ç¨‹ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/734ca96e3f0747f4a50e7b901126fef7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764818499&amp;x-signature=PhpvywZyJW9f%2F3kfdyhCQdMGPJQ%3D" alt="" loading="lazy"/></p>
<p>ä¹‹å‰è¿™ä¸ªé¡¹ç›®æ¥å…¥çš„æ˜¯ DeepSeekï¼Œç°åœ¨å¦‚æœè¦æ¥å…¥ç¼–ç¨‹èƒ½åŠ›æ›´å¿«æ›´å¼ºçš„ GLM-4.6ï¼Œåªéœ€è¦æ›´æ”¹ä¸€ä¸‹é…ç½®æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">langchain4j:
open-ai:
Â  reasoning-streaming-chat-model:
Â  Â  base-url:Â https:<span class="hljs-comment">//open.bigmodel.cn/api/coding/paas/v4</span>
Â  Â  api-key:Â &lt;Your API Key&gt;
Â  Â  model-name:Â glm<span class="hljs-number">-4.6</span>
Â  Â  max-tokens:Â <span class="hljs-number">32768</span>
Â  Â  temperature:Â <span class="hljs-number">0.1</span>
</code></pre>
<p>å…¶ä¸­ï¼Œå¦‚æœä½ è¦ç”Ÿæˆæ›´å¤æ‚çš„é¡¹ç›®ï¼Œmax-tokens å¯ä»¥è°ƒå¤§ç‚¹ï¼ŒGLM-4.6 æœ‰ 200K è¶…é•¿ä¸Šä¸‹æ–‡çª—å£ï¼Œå†™å‡ åä¸ªé¡µé¢éƒ½ä¸æˆé—®é¢˜ã€‚</p>
<p>ç„¶åä¾æ¬¡å¯åŠ¨åç«¯å’Œå‰ç«¯é¡¹ç›®ï¼Œè¾“å…¥æç¤ºè¯ï¼Œæ¯”å¦‚è®© AI åˆ¶ä½œä¸€ä¸ªç²¾ç¾çš„ä½œå“å±•ç¤ºç½‘ç«™ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/57f78230fb20454fbb0fa02d83a17c73~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764818499&amp;x-signature=EvcT%2FTBI5LYR6QelUegxhwgF4kk%3D" alt="" loading="lazy"/></p>
<p>å¤§æ¦‚ 3 ~ 4 åˆ†é’Ÿå·¦å³ï¼ŒGLM-4.6 å®Œæˆäº†ä»»åŠ¡ï¼Œç”Ÿæˆçš„ç½‘ç«™æ•ˆæœè¿˜æ˜¯ç›¸å½“ä¸é”™çš„ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/469d1879133448f2b3620d9139c51737~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764818499&amp;x-signature=epN25f%2FSyomB9%2B5Xc6QZvB%2BNkwM%3D" alt="" loading="lazy"/></p>
<p>ä¹‹å‰è¿™ä¸ªé¡¹ç›®æˆ‘ä½¿ç”¨çš„æ˜¯ DeepSeek-V3.2-Exp æ¨¡å‹ï¼Œç”¨åŒæ ·çš„æç¤ºè¯ï¼Œéœ€è¦èŠ±è´¹ 6 ~ 8 åˆ†é’Ÿå·¦å³ï¼Œåšå‡ºæ¥çš„æ•ˆæœå¦‚å›¾ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ff7f09cffcd94e2ab64ec124c6ff5498~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764818499&amp;x-signature=o5BD99eGYeg6PRk%2Bq8AoCwQVxCY%3D" alt="" loading="lazy"/></p>
<p>æ˜¾ç„¶æ— è®ºæ˜¯é€Ÿåº¦ä¸Šï¼Œè¿˜æ˜¯æ•ˆæœä¸Šï¼ŒGLM-4.6 éƒ½æ›´èƒœä¸€ç­¹ã€‚</p>
<p>ä¸ºæ¶ˆé™¤å¶ç„¶æ€§ï¼Œæˆ‘è¿™è¾¹æŒ‘é€‰äº†å‡ ä¸ªæ¡ˆä¾‹ï¼Œè¿›è¡Œäº†æ›´å¤šå¯¹æ¯”ã€‚</p>
<p>1ï¼‰å…ˆæ˜¯ç»å…¸çš„ä¸ªäººåšå®¢ç½‘ç«™ï¼ŒäºŒè€…åšå‡ºçš„æ•ˆæœå·®ä¸å¤šï¼ŒGLM-4.6 æ›´ç°ä»£ã€DeepSeek æ›´ç®€çº¦ä¼ ç»Ÿï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/85e608840dca456a91ad83eccfb2364e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764818499&amp;x-signature=hloJ%2Bf%2FJ7RAip3ZS36Vc5Cj2iTw%3D" alt="" loading="lazy"/></p>
<p>2ï¼‰ç„¶åæ˜¯ä¸€ä¸ªå®‡å®™å¤§çˆ†ç‚¸ 3D åŠ¨ç”»æ¼”ç¤ºï¼Œè¿™é‡Œæ˜¾ç„¶ GLM-4.6 æ›´ä¸“æ³¨äº â€œåšåŠ¨ç”»æ•ˆæœâ€ï¼Œè€Œ DeepSeek åšçš„æ›´åƒæ˜¯ä¸€ä¸ªçŸ¥è¯†ç§‘æ™®ç½‘ç«™ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f962195acd5d4111ba7a6431d85fb173~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764818499&amp;x-signature=ZpUTG%2B6G24U6foG7XO3CYa0r1vo%3D" alt="" loading="lazy"/></p>
<p>å’±å°±æ˜¯è¯´ï¼ŒDeepSeek åšçš„è¿™ä¸ª â€œå®‡å®™è†¨èƒ€â€ æ–¹æ ¼åŠ¨ç”»çœŸçš„ç»™æˆ‘çœ‹ç¬‘äº†ã€‚</p>
<p>3ï¼‰ç„¶åæ˜¯åšä¸€ä¸ªå¾®ä¿¡ UI åŸå‹å›¾ï¼Œè¿™æ¬¡æˆ‘è¦æŠŠ Gemini 3 æ‹‰è¿›æ¥ä¸€èµ·å¯¹æ¯”ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/eaf38be521c140caa322fd019be60121~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764818499&amp;x-signature=Y%2Foti2E1wzYR70qYdOpXNYW5i%2Fw%3D" alt="" loading="lazy"/></p>
<p>Gemini 3 çš„è¿˜åŸåº¦æ˜¯æœ€é«˜çš„ï¼Œå…¶æ¬¡æ˜¯ GLM-4.6ï¼Œè€Œ DeepSeek æ ¹æœ¬å°±æ²¡æœ‰åšèŠå¤©é¡µé¢ã€‚ä¸è¿‡è¿™é‡Œæˆ‘ç”¨çš„æ˜¯ Gemini 3 çš„ Canvas æ¨¡å¼ï¼Œæœ‰äº›å›¾æ ‡ä¼šè‡ªå·±ç»˜åˆ¶ï¼Œè€Œå›½å†…çš„å¤§æ¨¡å‹ç›´æ¥ç”¨ Emoji æ¥ä»£æ›¿å›¾æ ‡äº†ï¼Œæ‰€ä»¥é€¼çœŸåº¦å·®äº†ä¸€æˆªã€‚</p>
<p>4ï¼‰æœ€åæ˜¯æˆ‘æœ€å–œæ¬¢è®© AI åšçš„æ¡ˆä¾‹ â€”â€” ä»¿åšä¸€ä¸ªçŸ¥åçš„æµ·å¤–è§†é¢‘ç½‘ç«™ï¼Œæ¥éªŒè¯ AI çš„ç†è§£èƒ½åŠ›ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/32384a40e4074d2a9bee5027a4f6347f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764818499&amp;x-signature=yIvuMaN3Wzhw0q2Iv%2FFkll7lZgE%3D" alt="" loading="lazy"/></p>
<p>è¿™æŠŠæˆ‘è§‰å¾— GLM-4.6 çš„æ•ˆæœæ›´å¥½ä¸€äº›ï¼Œå¢å¼ºäº† â€œçœ‹è§†é¢‘â€ çš„ä½“éªŒï¼Œæœ‰å¾ˆå¤šè§†é¢‘çš„åˆ†ç±»ï¼›è€Œ DeepSeek è€ƒè™‘åˆ°äº†ä¸Šä¼ è§†é¢‘ã€‚åˆ°åº•å“ªä¸ªæ›´ç¬¦åˆç°ä»£è§†é¢‘ç½‘ç«™çš„ç‰¹ç‚¹ï¼Œæˆ‘ç›¸ä¿¡å¤§å®¶å¿ƒé‡Œæœ‰ç­”æ¡ˆã€‚</p>
<h2 data-id="heading-5">å°¾å£°</h2>
<p>OKï¼Œä»¥ä¸Šå°±æ˜¯å‡ ç§å›½å†…å¤§æ¨¡å‹ API çš„ä½¿ç”¨æ–¹æ³•ï¼Œå­¦åˆ°çš„æœ‹å‹ä»¬ç‚¹ä¸ªèµå§~</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1927afe221584eb8a9312b66e50e126f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764818499&amp;x-signature=6nXj70BlnlZj9dMStS6XbwlkLfQ%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-6">æ›´å¤š</h2>
<p>ğŸ’» ç¼–ç¨‹å­¦ä¹ äº¤æµï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fliyupi%2Fcode-nav" target="_blank" title="https://github.com/liyupi/code-nav" ref="nofollow noopener noreferrer">ç¼–ç¨‹å¯¼èˆª</a> ğŸ“ƒ ç®€å†å¿«é€Ÿåˆ¶ä½œï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fliyupi%2Flaoyujianli" target="_blank" title="https://github.com/liyupi/laoyujianli" ref="nofollow noopener noreferrer">è€é±¼ç®€å†</a> âœï¸ é¢è¯•åˆ·é¢˜ç¥å™¨ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fliyupi%2Fmianshiya" target="_blank" title="https://github.com/liyupi/mianshiya" ref="nofollow noopener noreferrer">é¢è¯•é¸­</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ‰“é€ ä¸€ä¸ªå¯å®šåˆ¶å·¥ä½œæµçš„æ¡Œé¢å¥³å‹]]></title>    <link>https://juejin.cn/post/7577171133432709161</link>    <guid>https://juejin.cn/post/7577171133432709161</guid>    <pubDate>2025-11-27T03:13:52.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577171133432709161" data-draft-id="7576955345377968191" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ‰“é€ ä¸€ä¸ªå¯å®šåˆ¶å·¥ä½œæµçš„æ¡Œé¢å¥³å‹"/> <meta itemprop="keywords" content="Electron"/> <meta itemprop="datePublished" content="2025-11-27T03:13:52.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¥‡èˆç²¾é€‰"/> <meta itemprop="url" content="https://juejin.cn/user/4388906147515367"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ‰“é€ ä¸€ä¸ªå¯å®šåˆ¶å·¥ä½œæµçš„æ¡Œé¢å¥³å‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4388906147515367/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¥‡èˆç²¾é€‰
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-27T03:13:52.000Z" title="Thu Nov 27 2025 03:13:52 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>ä½ æ˜¯å¦æƒ³è¿‡æ‹¥æœ‰ä¸€ä¸ªå¯ä»¥è‡ªå®šä¹‰è¡Œä¸ºçš„æ¡Œé¢è™šæ‹Ÿè§’è‰²ï¼Ÿæœ¬æ–‡å°†å¸¦ä½ ä»é›¶å¼€å§‹ï¼Œæ‰“é€ ä¸€ä¸ªåŸºäº Live2D çš„æ¡Œé¢å¥³å‹ï¼Œå¹¶èµ‹äºˆå¥¹å¯å®šåˆ¶çš„å·¥ä½œæµèƒ½åŠ›ã€‚é€šè¿‡ Electron + LangGraph çš„ç»„åˆï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªæ—¢å¯çˆ±åˆæ™ºèƒ½çš„æ¡Œé¢åº”ç”¨ã€‚</p>
</blockquote>
<p>é€šè¿‡æœ¬é¡¹ç›®ï¼Œä½ èƒ½å¾—åˆ°ä»€ä¹ˆï¼š</p>
<ol>
<li><strong>ä¸€ä½å¸¸é©»æ¡Œé¢çš„è™šæ‹Ÿå¥³å‹</strong>ï¼šä½¿ç”¨ Live2D æŠ€æœ¯æ‰“é€ çš„å¯çˆ±è§’è‰²ï¼Œå¯ä»¥å¸¸é©»æ¡Œé¢ï¼Œé™ªä¼´ä½ çš„å·¥ä½œæ—¶å…‰</li>
<li><strong>å¯å®šåˆ¶çš„å·¥ä½œæµç³»ç»Ÿ</strong>ï¼šé€šè¿‡ LangGraph æ„å»ºçš„å·¥ä½œæµå¼•æ“ï¼Œè®©è™šæ‹Ÿè§’è‰²èƒ½å¤Ÿæ‰§è¡Œå„ç§è‡ªå®šä¹‰ä»»åŠ¡å’Œé€»è¾‘</li>
<li><strong>æ¨¡æ¿ç®¡ç†ç³»ç»Ÿ</strong>ï¼šå¯ä»¥ä¿å­˜ã€å¤ç”¨å’Œåˆ†äº«å·¥ä½œæµæ¨¡æ¿ï¼Œæé«˜å·¥ä½œæ•ˆç‡</li>
<li><strong>é«˜åº¦å¯æ‰©å±•çš„æ¶æ„</strong>ï¼šæ¨¡å—åŒ–è®¾è®¡ï¼Œå¯ä»¥è½»æ¾æ·»åŠ æ–°çš„æ­¥éª¤ç±»å‹ã€é›†æˆ AI å¯¹è¯ã€æ–‡ä»¶æ“ä½œç­‰åŠŸèƒ½</li>
</ol>
<h2 data-id="heading-0">é¡¹ç›®æ¦‚è§ˆ</h2>
<p>åœ¨å¼€å§‹ä¹‹å‰ï¼Œè®©æˆ‘ä»¬å…ˆäº†è§£ä¸€ä¸‹æ•´ä¸ªé¡¹ç›®çš„æ¶æ„ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ç”¨æˆ·äº¤äº’å±‚                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚  Live2D æ¨¡å‹ â”‚         â”‚  å·¥ä½œæµç®¡ç†  â”‚                â”‚
â”‚  â”‚   (æ¡Œé¢å¥³å‹)  â”‚         â”‚   ç•Œé¢       â”‚               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†•
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Electron åº”ç”¨å±‚                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚  Express æœåŠ¡ â”‚         â”‚  BrowserWindowâ”‚             â”‚
â”‚  â”‚  (é™æ€èµ„æº)   â”‚         â”‚  (å·¥ä½œæµUI)  â”‚               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†•
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 å·¥ä½œæµæœåŠ¡å±‚                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚  FastAPI     â”‚         â”‚  LangGraph   â”‚              â”‚
â”‚  â”‚  (REST API)  â”‚         â”‚  (å·¥ä½œæµå¼•æ“) â”‚               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<p>æ•´ä¸ªç³»ç»Ÿåˆ†ä¸ºä¸‰ä¸ªå±‚æ¬¡ï¼š</p>
<ol>
<li><strong>ç”¨æˆ·äº¤äº’å±‚</strong>ï¼šLive2D æ¨¡å‹äº¤äº’å’Œå·¥ä½œæµç®¡ç†ç•Œé¢</li>
<li><strong>Electron åº”ç”¨å±‚</strong>ï¼šæ¡Œé¢åº”ç”¨æ¡†æ¶å’Œèµ„æºæœåŠ¡</li>
<li><strong>å·¥ä½œæµæœåŠ¡å±‚</strong>ï¼šåç«¯ API å’Œå·¥ä½œæµæ‰§è¡Œå¼•æ“</li>
</ol>
<hr/>
<h2 data-id="heading-1">ç¬¬ä¸€æ­¥ï¼šè·å– Live2D å…è´¹æ¨¡å‹</h2>
<p>Live2D å®˜æ–¹æä¾›äº†ä¸°å¯Œçš„å…è´¹ç¤ºä¾‹æ¨¡å‹ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ä¸‹è½½ä½¿ç”¨ã€‚</p>
<h3 data-id="heading-2">è®¿é—®ä¸‹è½½é¡µé¢</h3>
<p>æ‰“å¼€ Live2D å®˜æ–¹ç¤ºä¾‹æ•°æ®é›†é¡µé¢ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.live2d.com%2Fzh-CHS%2Flearn%2Fsample%2F" target="_blank" title="https://www.live2d.com/zh-CHS/learn/sample/" ref="nofollow noopener noreferrer">www.live2d.com/zh-CHS/learâ€¦</a></p>
<p>åœ¨è¿™ä¸ªé¡µé¢ä¸Šï¼Œä½ å¯ä»¥çœ‹åˆ°å¤šä¸ªå…è´¹æ¨¡å‹ï¼ŒåŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>Haru</strong>ï¼šä¸€ä¸ªå¯çˆ±çš„å¥³å­©è§’è‰²</li>
<li><strong>Nito</strong>ï¼šäºŒå¤´èº«å¡é€šè§’è‰²</li>
</ul>
<h3 data-id="heading-3">ä¸‹è½½æ¨¡å‹æ–‡ä»¶</h3>
<p>é€‰æ‹©ä¸€ä¸ªä½ å–œæ¬¢çš„æ¨¡å‹ï¼ˆæ¨èä» <strong>Haru</strong> å¼€å§‹ï¼‰ï¼Œä¸‹è½½ FREE ç‰ˆæœ¬ã€‚ä¸‹è½½åçš„æ–‡ä»¶ç»“æ„é€šå¸¸å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">haru/
â”œâ”€â”€ haru_greeter_t05.moc3          <span class="hljs-comment"># æ¨¡å‹æ•°æ®æ–‡ä»¶</span>
â”œâ”€â”€ haru_greeter_t05.physics3.json <span class="hljs-comment"># ç‰©ç†æ•ˆæœé…ç½®</span>
â”œâ”€â”€ haru_greeter_t05.pose3.json    <span class="hljs-comment"># å§¿åŠ¿é…ç½®</span>
â”œâ”€â”€ haru_greeter_t05.cdi3.json     <span class="hljs-comment"># æ˜¾ç¤ºè¾…åŠ©æ–‡ä»¶</span>
â”œâ”€â”€ index.json                      <span class="hljs-comment"># æ¨¡å‹ç´¢å¼•æ–‡ä»¶</span>
â”œâ”€â”€ texture_00.png                  <span class="hljs-comment"># çº¹ç†è´´å›¾</span>
â”œâ”€â”€ texture_01.png                  <span class="hljs-comment"># çº¹ç†è´´å›¾</span>
â””â”€â”€ motion/                         <span class="hljs-comment"># åŠ¨ä½œæ–‡ä»¶å¤¹</span>
    â”œâ”€â”€ haru_g_idle.motion3.json   <span class="hljs-comment"># å¾…æœºåŠ¨ä½œ</span>
    â””â”€â”€ ...                         <span class="hljs-comment"># å…¶ä»–åŠ¨ä½œæ–‡ä»¶</span>
</code></pre>
<h3 data-id="heading-4">æ”¾ç½®æ¨¡å‹æ–‡ä»¶</h3>
<p>å°†ä¸‹è½½çš„æ¨¡å‹æ–‡ä»¶å¤¹æ”¾åˆ°é¡¹ç›®çš„ <code>electron/live2d/model/</code> ç›®å½•ä¸‹ï¼Œä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">electron/
â””â”€â”€ live2d/
    â””â”€â”€ model/
        â””â”€â”€ haru/          <span class="hljs-comment"># ä½ ä¸‹è½½çš„æ¨¡å‹æ–‡ä»¶å¤¹</span>
            â”œâ”€â”€ index.json
            â””â”€â”€ ...
</code></pre>
<hr/>
<h2 data-id="heading-5">ç¬¬äºŒæ­¥ï¼šåˆå§‹åŒ– Electron + Live2D é¡¹ç›®</h2>
<h3 data-id="heading-6">é¡¹ç›®ç»“æ„</h3>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ª Electron é¡¹ç›®ï¼Œå¹¶é›†æˆ Live2D æ˜¾ç¤ºåŠŸèƒ½ã€‚è¿™é‡Œä½¿ç”¨ live2d-widget <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fstevenjoezhang%2Flive2d-widget" target="_blank" title="https://github.com/stevenjoezhang/live2d-widget" ref="nofollow noopener noreferrer">github.com/stevenjoezhâ€¦</a> é¡¹ç›®çš„æ„å»ºå·¥ç¨‹é›†æˆ Live2Dã€‚</p>
<h3 data-id="heading-7">æ·»åŠ æ„å»ºå·¥ç¨‹</h3>
<p>å°†ä¸‹è½½ <code>live2d-widget</code> å·¥ç¨‹æ”¾åˆ°ä»¥ä¸‹ç›®å½•ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">electron/
â””â”€â”€ live2d/
<span class="hljs-code">    â””â”€â”€ live2d-widget/
</span></code></pre>
<h3 data-id="heading-8">å®‰è£…ä¾èµ–</h3>
<p>åœ¨ <code>electron</code> ç›®å½•ä¸‹åˆ›å»º <code>package.json</code>ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"wenko"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"version"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"1.0.0"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"main"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"main.js"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"scripts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"start"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"electron ."</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"dependencies"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"electron"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^latest"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"express"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^4.18.0"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>ç„¶åè¿è¡Œï¼š</p>
<pre><code class="hljs language-bash" lang="bash">npm install
</code></pre>
<h3 data-id="heading-9">åˆ›å»ºä¸»çª—å£</h3>
<p>åˆ›å»º <code>index.html</code> æ–‡ä»¶ï¼Œç”¨äºæ˜¾ç¤º Live2D æ¨¡å‹ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span> /&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Wenko<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"wenko_wifu"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"http://localhost:8080/live2d/live2d-widget/dist/autoload.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<p>è¿™é‡Œæˆ‘ä»¬é€šè¿‡ <code>localhost:8080</code> æ¥åŠ è½½ Live2D çš„èµ„æºæ–‡ä»¶ï¼Œè¿™ä¸ªæœåŠ¡æˆ‘ä»¬ä¼šåœ¨ä¸‹ä¸€æ­¥åˆ›å»ºã€‚</p>
<h3 data-id="heading-10">live2d-widget é¡¹ç›®å’Œ Live2D æ¨¡å‹æœ‰ä»€ä¹ˆå…³ç³»ï¼Ÿ</h3>
<p><code>live2d-widget</code> é¡¹ç›®ä¸åŒ…æ‹¬ä»»ä½•æ¨¡å‹ï¼Œä»…è´Ÿè´£åœ¨ç½‘é¡µä¸­åŠ è½½å’Œè¿è¡Œ <code>Live2D</code> æ¨¡å‹ã€‚å…·ä½“é€»è¾‘å¯å‚è€ƒ <code>autoload.js</code> ã€‚</p>
<hr/>
<h2 data-id="heading-11">ç¬¬ä¸‰æ­¥ï¼šé…ç½® Express é™æ€èµ„æºæœåŠ¡</h2>
<p>ä¸ºäº†è®© Live2D æ¨¡å‹æ–‡ä»¶èƒ½å¤Ÿæ­£å¸¸åŠ è½½ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ Electron ä¸»è¿›ç¨‹ä¸­å¯åŠ¨ä¸€ä¸ª Express æœåŠ¡å™¨æ¥æä¾›é™æ€æ–‡ä»¶æœåŠ¡ã€‚</p>
<h3 data-id="heading-12">ä¿®æ”¹ main.js</h3>
<p>æ‰“å¼€ <code>electron/main.js</code>ï¼Œæ·»åŠ  Express æœåŠ¡å™¨ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> { app, <span class="hljs-title class_">BrowserWindow</span> } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'electron'</span>);
<span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">'path'</span>);
<span class="hljs-keyword">const</span> express = <span class="hljs-built_in">require</span>(<span class="hljs-string">'express'</span>);

<span class="hljs-comment">// åˆ›å»º Express æœåŠ¡å™¨æä¾› live2d é™æ€æ–‡ä»¶è®¿é—®</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">createStaticServer</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> expressApp = <span class="hljs-title function_">express</span>();
  <span class="hljs-keyword">const</span> port = <span class="hljs-number">8080</span>;
  
  <span class="hljs-comment">// æä¾› live2d ç›®å½•çš„é™æ€æ–‡ä»¶è®¿é—®</span>
  expressApp.<span class="hljs-title function_">use</span>(<span class="hljs-string">'/live2d'</span>, express.<span class="hljs-title function_">static</span>(path.<span class="hljs-title function_">join</span>(__dirname, <span class="hljs-string">'live2d'</span>)));
  
  expressApp.<span class="hljs-title function_">listen</span>(port, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Static server running on http://localhost:<span class="hljs-subst">${port}</span>`</span>);
  });
}

<span class="hljs-comment">// å¯åŠ¨é™æ€æ–‡ä»¶æœåŠ¡å™¨</span>
<span class="hljs-title function_">createStaticServer</span>();

<span class="hljs-comment">// åˆ›å»º Electron çª—å£</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">createWindow</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> mainWindow = <span class="hljs-keyword">new</span> <span class="hljs-title class_">BrowserWindow</span>({
    <span class="hljs-attr">width</span>: <span class="hljs-number">350</span>,
    <span class="hljs-attr">height</span>: <span class="hljs-number">400</span>,
    <span class="hljs-attr">frame</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">transparent</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">webPreferences</span>: {
      <span class="hljs-attr">nodeIntegration</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">contextIsolation</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">webSecurity</span>: <span class="hljs-literal">false</span>
    }
  });

  mainWindow.<span class="hljs-title function_">loadFile</span>(<span class="hljs-string">'index.html'</span>);
}

app.<span class="hljs-title function_">whenReady</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title function_">createWindow</span>();
});
</code></pre>
<h3 data-id="heading-13">å·¥ä½œæµç¨‹</h3>
<pre><code class="hljs language-bash" lang="bash">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Electron å¯åŠ¨   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”œâ”€â”€&gt; å¯åŠ¨ Express æœåŠ¡å™¨ (ç«¯å£ 8080)
         â”‚    â””â”€â”€&gt; æä¾› /live2d/* é™æ€èµ„æº
         â”‚
         â””â”€â”€&gt; åˆ›å»º BrowserWindow
              â””â”€â”€&gt; åŠ è½½ index.html
                   â””â”€â”€&gt; é€šè¿‡ http://localhost:8080/live2d/... åŠ è½½æ¨¡å‹
</code></pre>
<h3 data-id="heading-14">ä¸ºä»€ä¹ˆéœ€è¦ Express æœåŠ¡å™¨ï¼Ÿ</h3>
<p>Live2D çš„æ¨¡å‹æ–‡ä»¶ï¼ˆ<code>.moc3</code>ã€<code>.json</code>ã€<code>.png</code> ç­‰ï¼‰éœ€è¦é€šè¿‡ HTTP åè®®åŠ è½½ã€‚è™½ç„¶ Electron æ”¯æŒ <code>file://</code> åè®®ï¼Œä½†æŸäº›æƒ…å†µä¸‹ä¼šé‡åˆ°è·¨åŸŸé—®é¢˜ã€‚ä½¿ç”¨ Express æä¾› HTTP æœåŠ¡å¯ä»¥ï¼š</p>
<ol>
<li><strong>é¿å…è·¨åŸŸé—®é¢˜</strong>ï¼šç»Ÿä¸€ä½¿ç”¨ HTTP åè®®</li>
<li><strong>ä¾¿äºè°ƒè¯•</strong>ï¼šå¯ä»¥åœ¨æµè§ˆå™¨ä¸­ç›´æ¥è®¿é—®èµ„æº</li>
<li><strong>çµæ´»é…ç½®</strong>ï¼šå¯ä»¥æ·»åŠ ç¼“å­˜ã€å‹ç¼©ç­‰ä¸­é—´ä»¶</li>
</ol>
<hr/>
<h2 data-id="heading-15">ç¬¬å››æ­¥ï¼šæ„å»ºå·¥ä½œæµç³»ç»Ÿ</h2>
<p>ç°åœ¨ï¼Œè®©æˆ‘ä»¬ä¸ºæ¡Œé¢å¥³å‹æ·»åŠ "å¤§è„‘"â€”â€”ä¸€ä¸ªå¯å®šåˆ¶çš„å·¥ä½œæµç³»ç»Ÿã€‚</p>
<h3 data-id="heading-16">åˆå§‹åŒ– LangGraph é¡¹ç›®</h3>
<p>åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»º <code>workflow</code> ç›®å½•ï¼Œå¹¶åˆå§‹åŒ– Python é¡¹ç›®ï¼š</p>
<p><strong>é¦–å…ˆå®‰è£… uv</strong>ï¼ˆå¦‚æœè¿˜æ²¡æœ‰å®‰è£…ï¼‰ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">curl -LsSf https://astral.sh/uv/install.sh | sh
</code></pre>
<p><strong>ç„¶ååˆå§‹åŒ–é¡¹ç›®</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">mkdir</span> workflow
<span class="hljs-built_in">cd</span> workflow

<span class="hljs-comment"># ä½¿ç”¨ uv åˆå§‹åŒ–é¡¹ç›®</span>
uv init

<span class="hljs-comment"># æ·»åŠ ä¾èµ–</span>
uv add langgraph langgraph-cli fastapi uvicorn httpx pydantic python-dotenv
</code></pre>
<h3 data-id="heading-17">é¡¹ç›®ç»“æ„</h3>
<pre><code class="hljs language-bash" lang="bash">workflow/
â”œâ”€â”€ main.py          <span class="hljs-comment"># FastAPI åº”ç”¨å…¥å£</span>
â”œâ”€â”€ executor.py      <span class="hljs-comment"># å·¥ä½œæµæ‰§è¡Œå™¨</span>
â”œâ”€â”€ steps.py         <span class="hljs-comment"># æ­¥éª¤å®šä¹‰</span>
â”œâ”€â”€ graph.py         <span class="hljs-comment"># LangGraph å›¾å®šä¹‰</span>
â”œâ”€â”€ control_steps.py <span class="hljs-comment"># æ§åˆ¶æµæ­¥éª¤ï¼ˆIf/Then/Elseï¼‰</span>
â””â”€â”€ pyproject.toml   <span class="hljs-comment"># é¡¹ç›®é…ç½®</span>
</code></pre>
<h3 data-id="heading-18">æ ¸å¿ƒç»„ä»¶è§£æ</h3>
<h4 data-id="heading-19">1. steps.py - æ­¥éª¤å®šä¹‰</h4>
<p><code>steps.py</code> å®šä¹‰äº†æ‰€æœ‰å¯ç”¨çš„å·¥ä½œæµæ­¥éª¤ã€‚æ¯ä¸ªæ­¥éª¤éƒ½æ˜¯ä¸€ä¸ªç±»ï¼Œç»§æ‰¿è‡ª <code>Step</code> åŸºç±»ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Step</span>(<span class="hljs-title class_ inherited__">ABC</span>):
    <span class="hljs-string">"""æ­¥éª¤åŸºç±»"""</span>
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, step_type: <span class="hljs-built_in">str</span>, params: <span class="hljs-type">Dict</span>[<span class="hljs-built_in">str</span>, <span class="hljs-type">Any</span>]</span>):
        self.step_type = step_type
        self.params = params
    
<span class="hljs-meta">    @abstractmethod</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">execute</span>(<span class="hljs-params">self, context: StepContext</span>) -&gt; <span class="hljs-type">Any</span>:
        <span class="hljs-string">"""æ‰§è¡Œæ­¥éª¤"""</span>
        <span class="hljs-keyword">pass</span>
</code></pre>
<p><strong>æ­¥éª¤ç±»å‹ç¤ºä¾‹</strong>ï¼š</p>
<ul>
<li>
<p><strong>SetVar</strong>ï¼šè®¾ç½®å˜é‡</p>
<pre><code class="hljs language-python" lang="python">{
  <span class="hljs-string">"type"</span>: <span class="hljs-string">"SetVar"</span>,
  <span class="hljs-string">"params"</span>: {
    <span class="hljs-string">"key"</span>: <span class="hljs-string">"greeting"</span>,
    <span class="hljs-string">"value"</span>: <span class="hljs-string">"Hello, World!"</span>
  }
}
</code></pre>
</li>
<li>
<p><strong>GetVar</strong>ï¼šè·å–å˜é‡</p>
<pre><code class="hljs language-python" lang="python">{
  <span class="hljs-string">"type"</span>: <span class="hljs-string">"GetVar"</span>,
  <span class="hljs-string">"params"</span>: {
    <span class="hljs-string">"key"</span>: <span class="hljs-string">"greeting"</span>
  }
}
</code></pre>
</li>
<li>
<p><strong>EchoInput</strong>ï¼šå›æ˜¾è¾“å…¥</p>
<pre><code class="hljs language-python" lang="python">{
  <span class="hljs-string">"type"</span>: <span class="hljs-string">"EchoInput"</span>,
  <span class="hljs-string">"params"</span>: {
    <span class="hljs-string">"input_key"</span>: <span class="hljs-string">"user_input"</span>,
    <span class="hljs-string">"output_key"</span>: <span class="hljs-string">"response"</span>
  }
}
</code></pre>
</li>
</ul>
<p><strong>æ­¥éª¤æ³¨å†Œè¡¨</strong>ï¼š</p>
<p>æ‰€æœ‰æ­¥éª¤éƒ½æ³¨å†Œåœ¨ <code>STEP_REGISTRY</code> ä¸­ï¼Œæ–¹ä¾¿åŠ¨æ€åˆ›å»ºï¼š</p>
<pre><code class="hljs language-python" lang="python">STEP_REGISTRY = {
    <span class="hljs-string">'EchoInput'</span>: EchoInputStep,
    <span class="hljs-string">'SetVar'</span>: SetVarStep,
    <span class="hljs-string">'GetVar'</span>: GetVarStep,
    <span class="hljs-comment"># ... æ›´å¤šæ­¥éª¤ç±»å‹</span>
}
</code></pre>
<h4 data-id="heading-20">2. executor.py - å·¥ä½œæµæ‰§è¡Œå™¨</h4>
<p><code>executor.py</code> è´Ÿè´£æ‰§è¡Œå·¥ä½œæµæ­¥éª¤åºåˆ—ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">WorkflowExecutor</span>:
    <span class="hljs-string">"""å·¥ä½œæµæ‰§è¡Œå™¨"""</span>
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">execute</span>(<span class="hljs-params">self, steps: <span class="hljs-type">List</span>[<span class="hljs-type">Dict</span>], initial_context: <span class="hljs-type">Dict</span> = <span class="hljs-literal">None</span></span>):
        <span class="hljs-comment"># åˆ›å»ºä¸Šä¸‹æ–‡</span>
        context = StepContext(initial_context <span class="hljs-keyword">or</span> {})
        
        <span class="hljs-comment"># ä¾æ¬¡æ‰§è¡Œæ¯ä¸ªæ­¥éª¤</span>
        <span class="hljs-keyword">for</span> step_config <span class="hljs-keyword">in</span> steps:
            step_type = step_config.get(<span class="hljs-string">'type'</span>)
            step_params = step_config.get(<span class="hljs-string">'params'</span>, {})
            
            <span class="hljs-comment"># ä»æ³¨å†Œè¡¨åˆ›å»ºæ­¥éª¤å®ä¾‹</span>
            step = create_step(step_type, step_params)
            
            <span class="hljs-comment"># æ‰§è¡Œæ­¥éª¤</span>
            result = step.execute(context)
        
        <span class="hljs-keyword">return</span> {
            <span class="hljs-string">'success'</span>: <span class="hljs-literal">True</span>,
            <span class="hljs-string">'result'</span>: context.variables
        }
</code></pre>
<p><strong>æ‰§è¡Œæµç¨‹</strong>ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="hljs-string">â”‚</span>  <span class="hljs-string">å·¥ä½œæµè¯·æ±‚</span>      <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>  {               <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>    <span class="hljs-attr">steps:</span> [<span class="hljs-string">...</span>], <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>    <span class="hljs-attr">context:</span> {}   <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>  }               <span class="hljs-string">â”‚</span>
<span class="hljs-string">â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
         <span class="hljs-string">â”‚</span>
         <span class="hljs-string">v</span>
<span class="hljs-string">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="hljs-string">â”‚</span>  <span class="hljs-string">WorkflowExecutorâ”‚</span>
<span class="hljs-string">â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
         <span class="hljs-string">â”‚</span>
         <span class="hljs-string">v</span>
<span class="hljs-string">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>      <span class="hljs-string">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="hljs-string">â”‚</span>  <span class="hljs-string">StepContext</span>    <span class="hljs-string">â”‚&lt;â”€â”€â”€â”€â”€â”‚</span>  <span class="hljs-string">å˜é‡å­˜å‚¨</span>     <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>  <span class="hljs-string">(ä¸Šä¸‹æ–‡)</span>        <span class="hljs-string">â”‚</span>      <span class="hljs-string">â”‚</span>  <span class="hljs-string">variables</span>   <span class="hljs-string">â”‚</span>
<span class="hljs-string">â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>      <span class="hljs-string">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
         <span class="hljs-string">â”‚</span>
         <span class="hljs-string">v</span>
<span class="hljs-string">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="hljs-string">â”‚</span>  <span class="hljs-string">éå†æ­¥éª¤åˆ—è¡¨</span>                        <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>  <span class="hljs-string">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>  <span class="hljs-string">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>        <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>  <span class="hljs-string">â”‚</span> <span class="hljs-string">Step</span> <span class="hljs-number">1</span>   <span class="hljs-string">â”‚â†’</span> <span class="hljs-string">â”‚</span> <span class="hljs-string">Step</span> <span class="hljs-number">2</span>   <span class="hljs-string">â”‚â†’</span> <span class="hljs-string">...</span>   <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>  <span class="hljs-string">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>  <span class="hljs-string">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>        <span class="hljs-string">â”‚</span>
<span class="hljs-string">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
         <span class="hljs-string">â”‚</span>
         <span class="hljs-string">v</span>
<span class="hljs-string">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="hljs-string">â”‚</span>  <span class="hljs-string">è¿”å›æ‰§è¡Œç»“æœ</span>    <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>  {               <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>    <span class="hljs-attr">success:</span> <span class="hljs-literal">true</span>,<span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>    <span class="hljs-attr">result:</span> {<span class="hljs-string">...</span>} <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>  }               <span class="hljs-string">â”‚</span>
<span class="hljs-string">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre>
<h4 data-id="heading-21">3. main.py - REST API æ¥å£</h4>
<p><code>main.py</code> ä½¿ç”¨ FastAPI æä¾› RESTful APIï¼š</p>
<p><strong>æ ¸å¿ƒæ¥å£</strong>ï¼š</p>
<ol>
<li>
<p><strong>æ‰§è¡Œå·¥ä½œæµ</strong> - <code>POST /run</code></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-meta">@app.post(<span class="hljs-params"><span class="hljs-string">"/run"</span>, response_model=WorkflowResponse</span>)</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">run_workflow</span>(<span class="hljs-params">request: WorkflowRequest</span>):
    executor = WorkflowExecutor()
    result = executor.execute(
        steps=request.steps,
        initial_context=request.initial_context <span class="hljs-keyword">or</span> {}
    )
    <span class="hljs-keyword">return</span> result
</code></pre>
</li>
<li>
<p><strong>æ¨¡æ¿ç®¡ç†æ¥å£</strong>ï¼š</p>
<ul>
<li><code>POST /templates</code> - åˆ›å»ºæ¨¡æ¿</li>
<li><code>GET /templates</code> - åˆ—å‡ºæ‰€æœ‰æ¨¡æ¿</li>
<li><code>GET /templates/{id}</code> - è·å–æ¨¡æ¿è¯¦æƒ…</li>
<li><code>PUT /templates/{id}</code> - æ›´æ–°æ¨¡æ¿</li>
<li><code>DELETE /templates/{id}</code> - åˆ é™¤æ¨¡æ¿</li>
<li><code>GET /templates/search/{query}</code> - æœç´¢æ¨¡æ¿</li>
<li><code>POST /templates/{id}/execute</code> - æ‰§è¡Œæ¨¡æ¿</li>
</ul>
</li>
<li>
<p><strong>ç³»ç»Ÿæ¥å£</strong>ï¼š</p>
<ul>
<li><code>GET /health</code> - å¥åº·æ£€æŸ¥</li>
<li><code>GET /steps</code> - è·å–æ­¥éª¤æ³¨å†Œè¡¨</li>
</ul>
</li>
</ol>
<p><strong>API è°ƒç”¨ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ‰§è¡Œå·¥ä½œæµ</span>
curl -X POST http://localhost:8002/run \
  -H <span class="hljs-string">"Content-Type: application/json"</span> \
  -d <span class="hljs-string">'{
    "steps": [
      {
        "type": "SetVar",
        "params": {"key": "name", "value": "Wenko"}
      },
      {
        "type": "EchoInput",
        "params": {"input_key": "name", "output_key": "greeting"}
      }
    ],
    "initial_context": {}
  }'</span>
</code></pre>
<h3 data-id="heading-22">å¯åŠ¨æœåŠ¡</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">cd</span> workflow
uv run python main.py
</code></pre>
<p>æœåŠ¡å¯åŠ¨åï¼Œè®¿é—® <code>http://localhost:8002/docs</code> å¯ä»¥çœ‹åˆ°è‡ªåŠ¨ç”Ÿæˆçš„ API æ–‡æ¡£ã€‚</p>
<hr/>
<h2 data-id="heading-23">ç¬¬äº”æ­¥ï¼šæ„å»ºå·¥ä½œæµç®¡ç†ç•Œé¢</h2>
<p>æœ€åï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªå‹å–„çš„ç•Œé¢æ¥ç®¡ç†æ¨¡æ¿å’Œæ‰§è¡Œå·¥ä½œæµã€‚</p>
<h3 data-id="heading-24">ä¿®æ”¹ main.js æ·»åŠ å·¥ä½œæµçª—å£</h3>
<p>åœ¨ <code>electron/main.js</code> ä¸­æ·»åŠ å¿«æ·é”®ç›‘å¬ï¼Œæ‰“å¼€å·¥ä½œæµç®¡ç†çª—å£ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">ipcMain.<span class="hljs-title function_">on</span>(<span class="hljs-string">'wenko_shortcut'</span>, <span class="hljs-keyword">async</span> (event, data) =&gt; {
  <span class="hljs-comment">// å¤„ç†å¿«æ·é”®äº‹ä»¶: action: open</span>
  <span class="hljs-keyword">const</span> { action } = data;
  <span class="hljs-keyword">if</span> (action === <span class="hljs-string">'open'</span>) {
    <span class="hljs-keyword">const</span> shortcutWindow = <span class="hljs-keyword">new</span> <span class="hljs-title class_">BrowserWindow</span>({
      <span class="hljs-attr">width</span>: <span class="hljs-number">1200</span>,
      <span class="hljs-attr">height</span>: <span class="hljs-number">800</span>,
      <span class="hljs-attr">title</span>: <span class="hljs-string">'Workflow API æµ‹è¯•å·¥å…·'</span>,
      <span class="hljs-attr">icon</span>: path.<span class="hljs-title function_">join</span>(__dirname, <span class="hljs-string">'assets'</span>, <span class="hljs-string">'favicon.ico'</span>),
      <span class="hljs-attr">frame</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">transparent</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">alwaysOnTop</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">resizable</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">hasShadow</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">fullscreenable</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">skipTaskbar</span>: <span class="hljs-literal">false</span>,    <span class="hljs-comment">// åœ¨ä»»åŠ¡æ æ˜¾ç¤º</span>
      <span class="hljs-attr">webPreferences</span>: {
        <span class="hljs-attr">preload</span>: path.<span class="hljs-title function_">join</span>(__dirname, <span class="hljs-string">'preload.js'</span>),
        <span class="hljs-attr">nodeIntegration</span>: <span class="hljs-literal">false</span>,
        <span class="hljs-attr">contextIsolation</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">webSecurity</span>: <span class="hljs-literal">false</span>  <span class="hljs-comment">// å…³é—­åŒæºç­–ç•¥å’Œ CSP æ£€æŸ¥ï¼Œæ–¹ä¾¿å¼€å‘åŠ è½½ä»»æ„è„šæœ¬</span>
      }
    });
    shortcutWindow.<span class="hljs-title function_">loadFile</span>(<span class="hljs-string">'workflow.html'</span>);
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">'Unknown action:'</span>, action);
  }
});

</code></pre>
<h3 data-id="heading-25">workflow.html åŠŸèƒ½æ¨¡å—</h3>
<p><code>workflow.html</code> ä½¿ç”¨ React + Ant Design æ„å»ºï¼ŒåŒ…å«ä»¥ä¸‹åŠŸèƒ½ï¼š</p>
<h4 data-id="heading-26">1. å·¥ä½œæµæ‰§è¡Œæ ‡ç­¾é¡µ</h4>
<pre><code class="hljs language-scss" lang="scss">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å·¥ä½œæµæ‰§è¡Œ                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  å·¥ä½œæµæ­¥éª¤ (JSON)                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ <span class="hljs-selector-attr">[                            â”‚  â”‚â”‚  â”‚   {<span class="hljs-string">"type"</span>: <span class="hljs-string">"SetVar"</span>, ...}    â”‚  â”‚â”‚  â”‚ ]</span>                            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                      â”‚
â”‚  åˆå§‹ä¸Šä¸‹æ–‡ (JSON, å¯é€‰)              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ {"key": <span class="hljs-string">"value"</span>}              â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                      â”‚
â”‚  â˜‘ è°ƒè¯•æ¨¡å¼                          â”‚
â”‚                                      â”‚
â”‚  <span class="hljs-selector-attr">[æ‰§è¡Œå·¥ä½œæµ]</span> <span class="hljs-selector-attr">[åŠ è½½ç¤ºä¾‹]</span> <span class="hljs-selector-attr">[æ¸…ç©º]</span>      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h4 data-id="heading-27">2. æ¨¡æ¿ç®¡ç†æ ‡ç­¾é¡µ</h4>
<pre><code class="hljs language-css" lang="css">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ¨¡æ¿ç®¡ç†                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  <span class="hljs-selector-attr">[+ åˆ›å»ºæ–°æ¨¡æ¿]</span>                      â”‚
â”‚                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ æ¨¡æ¿åç§°                        â”‚  â”‚
â”‚  â”‚ æè¿°ï¼šè¿™æ˜¯ä¸€ä¸ªç¤ºä¾‹æ¨¡æ¿...        â”‚  â”‚
â”‚  â”‚ æ ‡ç­¾ï¼š<span class="hljs-selector-attr">[åŸºç¡€]</span> <span class="hljs-selector-attr">[ç¤ºä¾‹]</span>              â”‚  â”‚
â”‚  â”‚ <span class="hljs-selector-attr">[æŸ¥çœ‹]</span> <span class="hljs-selector-attr">[æ‰§è¡Œ]</span> <span class="hljs-selector-attr">[ç¼–è¾‘]</span> <span class="hljs-selector-attr">[åˆ é™¤]</span>     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h4 data-id="heading-28">3. æ­¥éª¤æ³¨å†Œè¡¨æ ‡ç­¾é¡µ</h4>
<p>æ˜¾ç¤ºæ‰€æœ‰å¯ç”¨çš„æ­¥éª¤ç±»å‹ï¼š</p>
<pre><code class="hljs language-css" lang="css">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ­¥éª¤æ³¨å†Œè¡¨                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  <span class="hljs-selector-attr">[åˆ·æ–°æ­¥éª¤åˆ—è¡¨]</span>                      â”‚
â”‚                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚EchoInputâ”‚ â”‚SetVarâ”‚ â”‚GetVarâ”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚FetchURLâ”‚ â”‚ParseJSONâ”‚ â”‚...â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h3 data-id="heading-29">æ¨¡æ¿æ‰§è¡Œæµç¨‹</h3>
<p>å½“ç”¨æˆ·ç‚¹å‡»"æ‰§è¡Œ"æŒ‰é’®æ—¶ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç”¨æˆ·ç‚¹å‡»æ‰§è¡Œ    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         v
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å¼¹å‡ºå¯¹è¯æ¡†      â”‚
â”‚  è®©ç”¨æˆ·è¾“å…¥ä¸Šä¸‹æ–‡â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         v
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  è°ƒç”¨ API        â”‚
â”‚  POST /templates/â”‚
â”‚  {<span class="hljs-built_in">id</span>}/execute    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         v
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ˜¾ç¤ºæ‰§è¡Œç»“æœ    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<hr/>
<h2 data-id="heading-30">å®Œæ•´ç³»ç»Ÿæ¶æ„</h2>
<p>ç°åœ¨ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹æ•´ä¸ªç³»ç»Ÿæ˜¯å¦‚ä½•åä½œçš„ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ç”¨æˆ·æ“ä½œæµç¨‹                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            v
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  <span class="hljs-number">1.</span> å¯åŠ¨ <span class="hljs-title class_">Electron</span> åº”ç”¨              â”‚
        â”‚     - æ˜¾ç¤º <span class="hljs-title class_">Live2D</span> æ¨¡å‹             â”‚
        â”‚     - å¯åŠ¨ <span class="hljs-title class_">Express</span> é™æ€æœåŠ¡         â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        v
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  <span class="hljs-number">2.</span> ä¸ <span class="hljs-title class_">Live2D</span> æ¨¡å‹äº¤äº’æ‰“å¼€ç®¡ç†ç•Œé¢     â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        v
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  <span class="hljs-number">3.</span> åœ¨å·¥ä½œæµç•Œé¢ä¸­ï¼š                â”‚
        â”‚     - åˆ›å»º/ç¼–è¾‘æ¨¡æ¿                 â”‚
        â”‚     - æ‰§è¡Œå·¥ä½œæµ                    â”‚
        â”‚     - æŸ¥çœ‹æ­¥éª¤æ³¨å†Œè¡¨                â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        v
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  <span class="hljs-number">4.</span> å‰ç«¯è°ƒç”¨ <span class="hljs-title class_">FastAPI</span>                â”‚
        â”‚     <span class="hljs-attr">http</span>:<span class="hljs-comment">//localhost:8002/...       â”‚</span>
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        v
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  <span class="hljs-number">5.</span> <span class="hljs-title class_">FastAPI</span> å¤„ç†è¯·æ±‚                â”‚
        â”‚     - è§£æ <span class="hljs-title class_">JSON</span>                     â”‚
        â”‚     - è°ƒç”¨ <span class="hljs-title class_">WorkflowExecutor</span>         â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        v
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  <span class="hljs-number">6.</span> <span class="hljs-title class_">WorkflowExecutor</span> æ‰§è¡Œæ­¥éª¤      â”‚
        â”‚     - åˆ›å»º <span class="hljs-title class_">StepContext</span>             â”‚
        â”‚     - éå†æ­¥éª¤åˆ—è¡¨                 â”‚
        â”‚     - æ‰§è¡Œæ¯ä¸ªæ­¥éª¤                 â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        v
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  <span class="hljs-number">7.</span> è¿”å›æ‰§è¡Œç»“æœ                    â”‚
        â”‚     - æˆåŠŸ/å¤±è´¥çŠ¶æ€                 â”‚
        â”‚     - ä¸Šä¸‹æ–‡å˜é‡                    â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        v
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  <span class="hljs-number">8.</span> å‰ç«¯æ˜¾ç¤ºç»“æœ                    â”‚
        â”‚     - æˆåŠŸæç¤º                     â”‚
        â”‚     - ç»“æœ <span class="hljs-title class_">JSON</span> å±•ç¤º               â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<hr/>
<h2 data-id="heading-31">ä½¿ç”¨ç¤ºä¾‹</h2>
<h3 data-id="heading-32">ç¤ºä¾‹ 1ï¼šç®€å•çš„é—®å€™å·¥ä½œæµ</h3>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"steps"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"SetVar"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"params"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"key"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"name"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"value"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Wenko"</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"TemplateReplace"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"params"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"template"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ä½ å¥½ï¼Œ{{name}}ï¼ä»Šå¤©è¿‡å¾—æ€ä¹ˆæ ·ï¼Ÿ"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"template_key"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"output_key"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"greeting"</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"initial_context"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>æ‰§è¡Œç»“æœï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"success"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"result"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Wenko"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"greeting"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ä½ å¥½ï¼ŒWenkoï¼ä»Šå¤©è¿‡å¾—æ€ä¹ˆæ ·ï¼Ÿ"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<hr/>
<h2 data-id="heading-33">æ€»ç»“</h2>
<p>é€šè¿‡æœ¬æ–‡ï¼Œæˆ‘ä»¬å®Œæˆäº†ä¸€ä¸ªå®Œæ•´çš„å¯å®šåˆ¶å·¥ä½œæµæ¡Œé¢å¥³å‹ç³»ç»Ÿï¼š</p>
<ol>
<li>âœ… <strong>Live2D æ¨¡å‹é›†æˆ</strong>ï¼šä»å®˜ç½‘ä¸‹è½½å…è´¹æ¨¡å‹å¹¶é›†æˆåˆ° Electron</li>
<li>âœ… <strong>é™æ€èµ„æºæœåŠ¡</strong>ï¼šä½¿ç”¨ Express æä¾›æ¨¡å‹æ–‡ä»¶è®¿é—®</li>
<li>âœ… <strong>å·¥ä½œæµå¼•æ“</strong>ï¼šåŸºäº LangGraph æ„å»ºå¯æ‰©å±•çš„å·¥ä½œæµç³»ç»Ÿ</li>
<li>âœ… <strong>REST API</strong>ï¼šæä¾›å®Œæ•´çš„æ¨¡æ¿ç®¡ç†å’Œæ‰§è¡Œæ¥å£</li>
<li>âœ… <strong>ç®¡ç†ç•Œé¢</strong>ï¼šå‹å¥½çš„ Web ç•Œé¢ç”¨äºæ¨¡æ¿ç®¡ç†</li>
</ol>
<p>è¿™ä¸ªç³»ç»Ÿå…·æœ‰å¾ˆå¼ºçš„æ‰©å±•æ€§ï¼š</p>
<ul>
<li>å¯ä»¥æ·»åŠ æ›´å¤šæ­¥éª¤ç±»å‹ï¼ˆå¦‚ AI å¯¹è¯ã€æ–‡ä»¶æ“ä½œç­‰ï¼‰</li>
<li>å¯ä»¥é›†æˆæ›´å¤š Live2D æ¨¡å‹å’ŒåŠ¨ä½œ</li>
<li>å¯ä»¥æ·»åŠ æ•°æ®åº“æŒä¹…åŒ–æ¨¡æ¿</li>
<li>å¯ä»¥å®ç°å·¥ä½œæµä¸ Live2D æ¨¡å‹çš„è”åŠ¨ï¼ˆæ ¹æ®å·¥ä½œæµç»“æœè§¦å‘æ¨¡å‹åŠ¨ä½œï¼‰</li>
</ul>
<p>å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¸®åŠ©ä½ æ‰“é€ å±äºè‡ªå·±çš„æ™ºèƒ½æ¡Œé¢å¥³å‹ï¼ğŸš€</p>
<hr/>
<h2 data-id="heading-34">å‚è€ƒèµ„æº</h2>
<ul>
<li>Live2D å®˜æ–¹ç¤ºä¾‹æ•°æ®é›† <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.live2d.com%2Fzh-CHS%2Flearn%2Fsample%2F" target="_blank" title="https://www.live2d.com/zh-CHS/learn/sample/" ref="nofollow noopener noreferrer">www.live2d.com/zh-CHS/learâ€¦</a></li>
<li>live2d-widget é¡¹ç›® <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fstevenjoezhang%2Flive2d-widget" target="_blank" title="https://github.com/stevenjoezhang/live2d-widget" ref="nofollow noopener noreferrer">github.com/stevenjoezhâ€¦</a></li>
<li>LangGraph å®˜æ–¹æ–‡æ¡£ <a href="https://link.juejin.cn?target=https%3A%2F%2Flangchain-ai.github.io%2Flanggraph%2F" target="_blank" title="https://langchain-ai.github.io/langgraph/" ref="nofollow noopener noreferrer">langchain-ai.github.io/langgraph/</a></li>
<li>FastAPI å®˜æ–¹æ–‡æ¡£ <a href="https://link.juejin.cn?target=https%3A%2F%2Ffastapi.tiangolo.com%2F" target="_blank" title="https://fastapi.tiangolo.com/" ref="nofollow noopener noreferrer">fastapi.tiangolo.com/</a></li>
<li>Electron å®˜æ–¹æ–‡æ¡£ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.electronjs.org%2F" target="_blank" title="https://www.electronjs.org/" ref="nofollow noopener noreferrer">www.electronjs.org/</a></li>
<li>æœ¬é¡¹ç›®ä»“åº“ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fdaijinru%2Fwenko" target="_blank" title="https://github.com/daijinru/wenko" ref="nofollow noopener noreferrer">github.com/daijinru/weâ€¦</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[RAG ç³»ç»Ÿæ¶æ„è®¾è®¡æ¨¡å¼ä»‹ç»]]></title>    <link>https://juejin.cn/post/7576955345378181183</link>    <guid>https://juejin.cn/post/7576955345378181183</guid>    <pubDate>2025-11-27T03:31:18.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576955345378181183" data-draft-id="7576953459543851062" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="RAG ç³»ç»Ÿæ¶æ„è®¾è®¡æ¨¡å¼ä»‹ç»"/> <meta itemprop="keywords" content="LLM,Agent,ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2025-11-27T03:31:18.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§æ¨¡å‹æ•™ç¨‹"/> <meta itemprop="url" content="https://juejin.cn/user/1145012233707299"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            RAG ç³»ç»Ÿæ¶æ„è®¾è®¡æ¨¡å¼ä»‹ç»
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1145012233707299/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§æ¨¡å‹æ•™ç¨‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-27T03:31:18.000Z" title="Thu Nov 27 2025 03:31:18 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»14åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#383838;font-size:15px;line-height:30px;letter-spacing:2px;word-break:break-word;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;scroll-behavior:smooth;background-image:linear-gradient(0deg,transparent 24%,rgba(201,195,195,.329) 25%,hsla(0,8%,80.4%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent),linear-gradient(90deg,transparent 24%,rgba(204,196,196,.226) 25%,hsla(0,4%,66.1%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent);background-color:#fff;background-size:50px 50px;padding-bottom:60px}.markdown-body ::selection{color:#fff;background-color:#a862ea}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin:24px 0 12px;color:#a862ea}.markdown-body h1{line-height:2;font-size:1.4em}.markdown-body h1~p:first-of-type:first-letter{color:#a862ea;float:left;font-size:2em;margin-right:.4em;font-weight:bolder}.markdown-body h2{font-size:1.2em}.markdown-body h3{font-size:1.1em}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;padding-left:.2em}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#a862ea}.markdown-body ol li.task-list-item,.markdown-body ul li.task-list-item{list-style:none}.markdown-body ol li.task-list-item ol,.markdown-body ol li.task-list-item ul,.markdown-body ul li.task-list-item ol,.markdown-body ul li.task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:10px}.markdown-body a,.markdown-body code,.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6,.markdown-body li,.markdown-body p{opacity:.85;vertical-align:baseline;transition:all .1s ease}.markdown-body a:hover,.markdown-body code:hover,.markdown-body h1:hover,.markdown-body h2:hover,.markdown-body h3:hover,.markdown-body h4:hover,.markdown-body h5:hover,.markdown-body h6:hover,.markdown-body li:hover,.markdown-body p:hover{opacity:1}.markdown-body a{display:inline-block;color:#a862ea;cursor:pointer;text-decoration:none;position:relative}.markdown-body a:after{content:"";position:absolute;width:98%;height:1px;bottom:0;left:0;transform:scaleX(0);background-color:#a862ea;transform-origin:bottom right;transition:transform .3s ease-in-out}.markdown-body a:hover:after{transform:scaleX(1);transform-origin:bottom left}.markdown-body a:active,.markdown-body a:link{color:#a862ea}.markdown-body img{max-width:100%;user-select:none;margin:1em 0;transition:transform .2s ease 0s;background-color:#f8f5ff;box-shadow:0 0 10px #e7daff}.markdown-body img:hover{opacity:1;box-shadow:0 0 20px #e7daff;transform:translateY(-1px)}.markdown-body blockquote{padding:.5em 1em;margin:12px 0;border-top-left-radius:2px;border-bottom-left-radius:2px;border-left:3px solid #a862ea;background-color:#f8f5ff}.markdown-body blockquote&gt;p{margin:0}.markdown-body .math{font-style:italic;margin:12px 0;padding:.5em 1em;background-color:#f8f5ff}.markdown-body .math&gt;p{margin:0}.markdown-body code{padding:2px .4em;overflow-x:auto;color:#a862ea;font-weight:700;word-break:break-word;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;background-color:#f8f5ff}.markdown-body pre{margin:2em 0}.markdown-body pre&gt;code{display:block;padding:1.5em;word-break:normal;font-size:.9em;font-style:normal;font-weight:400;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;line-height:18px;color:#383838;border-radius:2px;scroll-behavior:smooth;box-shadow:0 0 10px #e7daff}.markdown-body pre&gt;code:hover{box-shadow:0 0 20px #e7daff}.markdown-body pre&gt;code::-webkit-scrollbar{height:6px;background-color:#f8f5ff}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:#e7daff;border-bottom-left-radius:3px;border-bottom-right-radius:3px}.markdown-body hr{margin:2em 0;border-top:1px solid #a862ea}.markdown-body table{width:100%;font-size:12px;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{color:#a862ea;background:#f8f5ff}.markdown-body td,.markdown-body th{padding:.5em;border:1px solid #e7daff}.markdown-body tr{background-color:#f8f5ff}@media (max-width:720px){.markdown-body{font-size:12px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æœ¬æ–‡è¾ƒé•¿ï¼Œå»ºè®®ç‚¹èµæ”¶è—ã€‚æ›´å¤šAIå¤§æ¨¡å‹åº”ç”¨å¼€å‘å­¦ä¹ è§†é¢‘åŠèµ„æ–™ï¼Œåœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fhy.zhipoai.cn%2F" target="_blank" title="https://hy.zhipoai.cn/" ref="nofollow noopener noreferrer">æ™ºæ³ŠAI</a>ã€‚</p>
</blockquote>
<p>åœ¨æ¨¡å—åŒ–RAGï¼ˆRetrieval-Augmented Generationï¼‰è®¾è®¡ä¸­ï¼Œå„ç§æ“ä½œæ¨¡å¼é€šè¿‡æ¨¡å—åŒ–çš„æ–¹å¼ååŒå·¥ä½œï¼Œå½¢æˆäº†ä¸€ä¸ªåä¸ºÂ <strong>RAGæµ</strong>Â çš„å·¥ä½œæµç¨‹ã€‚è¿™ä¸ªÂ <strong>RAGæµ</strong>Â å¯ä»¥è¢«è§†ä¸ºç”±å¤šä¸ªå­å‡½æ•°ç»„æˆçš„å›¾å½¢ç»“æ„ã€‚é€šè¿‡æ§åˆ¶é€»è¾‘ï¼Œè¿™äº›å­å‡½æ•°ä¼šæŒ‰é¢„å®šçš„é¡ºåºæ‰§è¡Œï¼ŒåŒæ—¶ä¹Ÿèƒ½æ ¹æ®éœ€æ±‚è¿›è¡Œæ¡ä»¶åˆ¤æ–­ã€åˆ†æ”¯æˆ–å¾ªç¯ã€‚</p>
<p>è¿™ç§æ¨¡å—åŒ–ç‰¹æ€§è®©RAGç³»ç»Ÿèƒ½å¤Ÿçµæ´»åº”å¯¹ä¸åŒçš„åº”ç”¨åœºæ™¯ï¼Œå¹¶ä¸”æå‡äº†ç³»ç»Ÿçš„è®¾è®¡æ•ˆç‡å’Œæ‰©å±•æ€§ã€‚åœ¨åˆ†æç°æœ‰çš„RAGæ–¹æ³•æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œæ¨¡å—åŒ–çš„ç»“æ„ä½¿å¾—RAGç³»ç»Ÿå¯ä»¥åœ¨å¤„ç†å¤æ‚ä»»åŠ¡æ—¶æ›´å…·é€‚åº”æ€§ã€‚</p>
<p><strong>æœ¬ç« å°†è¯¦ç»†ä»‹ç»å‡ ç§å¸¸è§çš„Â <strong>RAGæ¨¡å¼</strong>ï¼ŒåŒ…æ‹¬ï¼š</strong></p>
<ul>
<li><strong>çº¿æ€§æ¨¡å¼</strong>ï¼šåœ¨è¿™ä¸ªæ¨¡å¼ä¸‹ï¼Œå„ä¸ªæ¨¡å—æŒ‰é¡ºåºä¾æ¬¡æ‰§è¡Œï¼Œæ¯ä¸ªæ­¥éª¤çš„è¾“å‡ºä½œä¸ºä¸‹ä¸€ä¸ªæ­¥éª¤çš„è¾“å…¥ï¼Œé€‚ç”¨äºé¡ºåºæ€§è¾ƒå¼ºçš„ä»»åŠ¡ã€‚</li>
<li><strong>æ¡ä»¶æ¨¡å¼</strong>ï¼šæ ¹æ®ç‰¹å®šçš„æ¡ä»¶ï¼Œé€‰æ‹©æ€§åœ°æ‰§è¡Œä¸åŒçš„æ¨¡å—æ“ä½œã€‚è¿™ä¸ªæ¨¡å¼èƒ½å¤Ÿå¤„ç†å…·æœ‰åˆ†æ”¯æˆ–é€‰æ‹©æ€§çš„ä»»åŠ¡ã€‚</li>
<li><strong>åˆ†æ”¯æ¨¡å¼</strong>ï¼šä¸æ¡ä»¶æ¨¡å¼ç±»ä¼¼ï¼Œä½†å®ƒæ›´å¤šåœ°ç”¨äºä»»åŠ¡ä¸­æ¶‰åŠå¤šä¸ªå¹¶è¡Œå¤„ç†è·¯å¾„çš„åœºæ™¯ã€‚</li>
<li><strong>å¾ªç¯æ¨¡å¼</strong>ï¼šå½“æŸäº›æ“ä½œéœ€è¦é‡å¤æ‰§è¡Œæ—¶ï¼Œå¾ªç¯æ¨¡å¼ä¾¿ä¼šæ´¾ä¸Šç”¨åœºã€‚å®ƒé€‚åˆé‚£äº›éœ€è¦åå¤å¤„ç†ç›¸ä¼¼ä»»åŠ¡çš„åº”ç”¨ã€‚</li>
</ul>
<p>é€šè¿‡è¿™äº›æ¨¡å¼çš„ç»“åˆï¼ŒRAGç³»ç»Ÿä¸ä»…èƒ½å¤Ÿé«˜æ•ˆåœ°å¤„ç†å¤šæ ·åŒ–çš„ä»»åŠ¡éœ€æ±‚ï¼Œè¿˜å¯ä»¥åœ¨é¢å¯¹å¤æ‚ä»»åŠ¡æ—¶ä¿æŒçµæ´»æ€§ä¸æ‰©å±•æ€§ã€‚</p>
<h2 data-id="heading-0">1 çº¿æ€§æ¨¡å¼</h2>
<p>åœ¨Â <strong>RAGç³»ç»Ÿ</strong>Â ä¸­ï¼Œ<strong>çº¿æ€§æ¨¡å¼</strong>Â æ˜¯æœ€ç®€å•ä¸”æœ€å¸¸è§çš„å·¥ä½œæµæ¨¡å¼ã€‚å…¶æ ¸å¿ƒæµç¨‹åŒ…æ‹¬å‡ ä¸ªä¸»è¦æ¨¡å—ï¼š<strong>é¢„æ£€ç´¢ï¼ˆPre-Retrievalï¼‰</strong> ã€<strong>æ£€ç´¢</strong>ã€<strong>åæ£€ç´¢ï¼ˆPost-Retrievalï¼‰</strong> Â å’ŒÂ <strong>ç”Ÿæˆæ¨¡å—</strong>ã€‚è¿™äº›æ¨¡å—æŒ‰é¡ºåºä¾æ¬¡è¿›è¡Œå¤„ç†ï¼Œå¦‚å›¾ç¤ºã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå½“é¢„æ£€ç´¢å’Œæ£€ç´¢åå¤„ç†æ¨¡å—ç¼ºå¤±æ—¶ï¼Œçº¿æ€§æ¨¡å¼ä¼šç®€åŒ–ä¸ºä¸€ç§ç§°ä¸ºÂ <strong>æœ´ç´ æ£€ç´¢å¢å¼ºç”Ÿæˆï¼ˆNaive RAGï¼‰</strong> Â çš„åŸºæœ¬èŒƒå¼ï¼Œä»…åŒ…å«æ£€ç´¢å’Œç”Ÿæˆè¿‡ç¨‹ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/916860248a544c5883deea38e4fb77a2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764819077&amp;x-signature=TIsdJRXvvLFI8GuilrKrPDEJoyY%3D" alt="" loading="lazy"/></p>
<p>ä¸ºäº†æå‡ç”Ÿæˆçš„è´¨é‡ï¼Œå¸¸è§çš„çº¿æ€§RAGæµé€šè¿‡ä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ä¼˜åŒ–ï¼š</p>
<ul>
<li><strong>é¢„æ£€ç´¢é˜¶æ®µ</strong>ï¼šè¿™ä¸€é˜¶æ®µå¼•å…¥äº†æŸ¥è¯¢å˜æ¢æ¨¡å—ï¼Œé€šå¸¸é‡‡ç”¨æŸ¥è¯¢é‡å†™æˆ–è€…éšå¼æ–‡æ¡£æ‰©å±•ï¼ˆHyDEï¼‰ç­‰æ“ä½œç¬¦ã€‚é€šè¿‡è¿™äº›å˜æ¢ï¼ŒæŸ¥è¯¢èƒ½å¤Ÿæ›´å¥½åœ°é€‚åº”æ£€ç´¢éœ€æ±‚ï¼Œæé«˜æ£€ç´¢çš„ç›¸å…³æ€§ã€‚</li>
<li><strong>æ£€ç´¢é˜¶æ®µ</strong>ï¼šåœ¨è¿™ä¸€é˜¶æ®µï¼Œç³»ç»Ÿé€šè¿‡æ£€ç´¢å·¥å…·ï¼ˆå¦‚BM25ï¼‰ä»å¤–éƒ¨çŸ¥è¯†åº“ä¸­è·å–ä¸é‡å†™åçš„æŸ¥è¯¢é«˜åº¦ç›¸å…³çš„æ–‡æ¡£æˆ–ä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚</li>
<li><strong>åæ£€ç´¢é˜¶æ®µ</strong>ï¼šæ£€ç´¢ç»“æœè¿›ä¸€æ­¥ä¼˜åŒ–ï¼Œé€šå¸¸é€šè¿‡æ’åºæ¨¡å—å¯¹æ£€ç´¢çš„ç»“æœè¿›è¡Œè°ƒæ•´ï¼Œä½¿å¾—æœ€ç»ˆé€‰å‡ºçš„æ–‡æ¡£æœ€èƒ½æ»¡è¶³ç”Ÿæˆéœ€æ±‚ã€‚</li>
<li><strong>ç”Ÿæˆæ¨¡å—</strong>ï¼šæœ€ç»ˆï¼Œé€šè¿‡ç”Ÿæˆæ¨¡å‹ï¼ˆä¾‹å¦‚GPTæˆ–T5ç­‰ï¼‰å¤„ç†ä¼˜åŒ–åçš„æ–‡æ¡£ä¸Šä¸‹æ–‡ï¼Œäº§ç”Ÿé«˜è´¨é‡çš„å›ç­”æˆ–ç”Ÿæˆå†…å®¹ã€‚</li>
</ul>
<p>ä¸€ä¸ªå…¸å‹çš„çº¿æ€§RAGæµæ¨¡å¼æ˜¯ï¼šâ€œ<strong>é‡å†™-æ£€ç´¢-é˜…è¯»ï¼ˆRewrite-Retrieve-Readï¼ŒRRRï¼‰</strong> â€æ–¹æ³•ã€‚è¯¥æ–¹æ³•åœ¨é¢„æ£€ç´¢é˜¶æ®µå¼•å…¥äº†ä¸€ä¸ªæŸ¥è¯¢é‡å†™æ¨¡å—ã€‚è¿™ä¸ªæ¨¡å—åŸºäºÂ <strong>T5-large</strong>Â æ¨¡å‹çš„å¾®è°ƒç‰ˆæœ¬ï¼Œå¹¶é€šè¿‡å¼ºåŒ–å­¦ä¹ æ¡†æ¶è¿›è¡Œä¼˜åŒ–ï¼Œå°†æŸ¥è¯¢é‡å†™è¿‡ç¨‹å»ºæ¨¡ä¸ºÂ <strong>é©¬å°”å¯å¤«å†³ç­–è¿‡ç¨‹ï¼ˆMDPï¼‰</strong> ã€‚</p>
<p>åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼ŒæŸ¥è¯¢é‡å†™æ¨¡å—çš„è¾“å‡ºè´¨é‡è¢«è§†ä¸ºå¥–åŠ±ä¿¡å·ï¼Œå¼ºåŒ–å­¦ä¹ ç®—æ³•é€šè¿‡ç­–ç•¥æ¢¯åº¦æ–¹æ³•æ¥è°ƒæ•´å’Œä¼˜åŒ–ç”Ÿæˆçš„æŸ¥è¯¢ï¼Œä»è€Œç¡®ä¿æŸ¥è¯¢æ›´ç¬¦åˆæ£€ç´¢ä»»åŠ¡çš„éœ€æ±‚ã€‚è¿™ç§æ–¹å¼æå‡äº†æ£€ç´¢çš„æ•ˆç‡ï¼Œå¹¶è¿›ä¸€æ­¥æ”¹å–„äº†ç”Ÿæˆç»“æœçš„æ•ˆæœã€‚</p>
<p>åœ¨æ£€ç´¢é˜¶æ®µï¼Œ<strong>RRRæ–¹æ³•</strong>ä½¿ç”¨äº†ç¨€ç–ç¼–ç æ¨¡å‹ï¼ˆå¦‚<strong>BM25</strong>ï¼‰è¿›è¡Œæ£€ç´¢ï¼Œä»å¤–éƒ¨çŸ¥è¯†åº“ä¸­è·å–ä¸é‡å†™åçš„æŸ¥è¯¢ç›¸å…³çš„æ–‡æ¡£ï¼Œè¿›ä¸€æ­¥å¢å¼ºäº†ç³»ç»Ÿç”Ÿæˆå†…å®¹çš„å‡†ç¡®æ€§å’Œå¯é æ€§ã€‚</p>
<p>é€šè¿‡è¿™æ ·çš„è®¾è®¡ï¼Œçº¿æ€§æ¨¡å¼çš„RAGæµä¸ä»…æé«˜äº†ç”Ÿæˆè´¨é‡ï¼Œè¿˜èƒ½åœ¨å®é™…åº”ç”¨ä¸­å®ç°é«˜æ•ˆçš„çŸ¥è¯†æå–å’Œç”Ÿæˆã€‚</p>
<h2 data-id="heading-1">2 æ¡ä»¶æ¨¡å¼</h2>
<p><strong>æ¡ä»¶æ¨¡å¼</strong>Â æ˜¯ä¸€ç§çµæ´»çš„Â <strong>RAGæµæ¨¡å¼</strong>ï¼Œå…¶æ ¸å¿ƒç‰¹ç‚¹æ˜¯åœ¨ä¸åŒçš„æ¡ä»¶ä¸‹é€‰æ‹©ä¸åŒçš„å·¥ä½œæµï¼Œä»¥ä¾¿é’ˆå¯¹ç‰¹å®šåœºæ™¯è¿›è¡Œä¼˜åŒ–ã€‚è¿™ç§æ¨¡å¼çš„å…³é”®åœ¨äºä¸€ä¸ªÂ <strong>è·¯ç”±æ¨¡å—ï¼ˆRouting Moduleï¼‰</strong> ï¼Œè¯¥æ¨¡å—æ ¹æ®è¾“å…¥é—®é¢˜çš„ç‰¹æ€§åŠ¨æ€é€‰æ‹©æ¥ä¸‹æ¥çš„å¤„ç†æµç¨‹ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0bb8991ca548429b9ac79f7a5fd56527~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764819077&amp;x-signature=q5Tdoaw6g9BJq27Q7Q4lfoQiEwQ%3D" alt="" loading="lazy"/></p>
<p>å…·ä½“æ¥è¯´ï¼Œå½“ç³»ç»Ÿæ¥æ”¶åˆ°ä¸åŒç±»å‹çš„é—®é¢˜æ—¶ï¼Œå®ƒä¼šæ ¹æ®é¢„è®¾çš„æ¡ä»¶æˆ–è§„åˆ™å†³å®šå¦‚ä½•å¤„ç†ã€‚ä¾‹å¦‚ï¼Œå¯¹äºæ¶‰åŠä¸¥è‚ƒè®®é¢˜ã€æ”¿æ²»è¯é¢˜æˆ–å¨±ä¹å†…å®¹ç­‰ä¸åŒç±»å‹çš„é—®é¢˜ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨åˆ‡æ¢åˆ°ä¸åŒçš„å¤„ç†æµç¨‹ã€‚è¿™ç§åŠ¨æ€è·¯ç”±æœºåˆ¶æ˜¾è‘—æå‡äº†ç³»ç»Ÿå¤„ç†å¤šæ ·åŒ–ä»»åŠ¡çš„èƒ½åŠ›ï¼Œä½¿å¾—ç³»ç»Ÿèƒ½å¤Ÿçµæ´»åº”å¯¹å„ç§å¤æ‚åœºæ™¯ã€‚</p>
<p><strong>æ¡ä»¶æ¨¡å¼çš„åˆ†æ”¯æµ</strong>Â ä¸»è¦ä½“ç°åœ¨ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š</p>
<ul>
<li><strong>æ£€ç´¢æ¥æº</strong>ï¼šç³»ç»Ÿä¼šæ ¹æ®é—®é¢˜çš„æ€§è´¨é€‰æ‹©ä¸åŒçš„æ£€ç´¢æ¥æºã€‚ä¾‹å¦‚ï¼Œå¯¹äºä¸¥è‚ƒé—®é¢˜ï¼Œç³»ç»Ÿå¯èƒ½ä¼šé€‰æ‹©æ›´å¯é çš„ã€æƒå¨æ€§çš„æ¥æºï¼Œè€Œå¯¹äºå¨±ä¹æ€§é—®é¢˜ï¼Œåˆ™å¯èƒ½é€‰æ‹©æ›´å¤šå…ƒæˆ–åˆ›æ„æ€§çš„èµ„æ–™ã€‚</li>
<li><strong>æµç¨‹é€‰æ‹©</strong>ï¼šé’ˆå¯¹ä¸åŒä»»åŠ¡çš„éœ€æ±‚ï¼Œæ¡ä»¶æ¨¡å¼å¯èƒ½ä¼šè°ƒæ•´æµç¨‹çš„ç»†èŠ‚ï¼Œæ§åˆ¶æ¨¡å—çš„é¡ºåºã€æ‰§è¡Œçš„æ“ä½œï¼Œç”šè‡³æ˜¯å¦è¿›è¡Œä¸€äº›åå¤„ç†ã€‚</li>
<li><strong>æ¨¡å‹é…ç½®</strong>ï¼šä¸åŒç±»å‹çš„é—®é¢˜å¯èƒ½éœ€è¦ä¸åŒçš„æ¨¡å‹é…ç½®ã€‚æ¯”å¦‚ï¼Œä¸¥è‚ƒé—®é¢˜å¯èƒ½ä½¿ç”¨æ›´ç²¾ç¡®ã€ä¿å®ˆçš„æ¨¡å‹ï¼Œè€Œå¨±ä¹ç±»é—®é¢˜åˆ™å¯èƒ½ä½¿ç”¨æ›´å…·åˆ›æ„æ€§å’Œç”Ÿæˆè‡ªç”±åº¦çš„æ¨¡å‹ã€‚</li>
<li><strong>æç¤ºè®¾è®¡</strong>ï¼šæ ¹æ®ä»»åŠ¡çš„æ€§è´¨ï¼Œç³»ç»Ÿçš„æç¤ºè®¾è®¡ï¼ˆPrompt Designï¼‰ä¹Ÿä¼šæœ‰æ‰€ä¸åŒã€‚å¯¹äºä¸¥è‚ƒé—®é¢˜ï¼Œæç¤ºå¯èƒ½ä¼šæ›´ä¸ºè§„èŒƒå’Œä¸¥æ ¼ï¼Œè€Œå¯¹äºå¨±ä¹ç±»é—®é¢˜ï¼Œæç¤ºå¯èƒ½ä¼šæ›´å…·å¼€æ”¾æ€§å’Œçµæ´»æ€§ã€‚</li>
</ul>
<p>ä¸¾ä¸ªä¾‹å­ï¼Œå¯¹äºä¸¥è‚ƒæ€§è¾ƒé«˜çš„é—®é¢˜ï¼ˆå¦‚æ³•å¾‹ã€å¥åº·ã€æ”¿æ²»ç­‰ï¼‰ï¼Œç³»ç»Ÿå¯èƒ½ä¼šé€‰æ‹©æ›´åŠ å¯é çš„æ£€ç´¢æ¥æºï¼Œå¹¶å¯¹ç”Ÿæˆçš„å†…å®¹è®¾ç½®ä¸¥æ ¼çš„çº¦æŸï¼Œç¡®ä¿ä¿¡æ¯çš„å‡†ç¡®æ€§å’Œæƒå¨æ€§ã€‚è€Œå¯¹äºå¨±ä¹ç±»çš„é—®é¢˜ï¼ˆå¦‚ç”µå½±ã€æ¸¸æˆã€æç¬‘ç­‰ï¼‰ï¼Œç³»ç»Ÿåˆ™å¯ä»¥å®¹å¿æ›´å¤šçš„åˆ›æ„å’Œä¸æ‹˜ä¸€æ ¼çš„ç”Ÿæˆï¼Œæä¾›å¯Œæœ‰å¨±ä¹æ€§å’Œè¶£å‘³æ€§çš„å›ç­”ã€‚</p>
<p>é€šè¿‡è¿™ç§æ–¹å¼ï¼Œ<strong>æ¡ä»¶æ¨¡å¼</strong>Â èƒ½å¤Ÿæ ¹æ®ä»»åŠ¡çš„éœ€æ±‚åŠ¨æ€è°ƒæ•´Â <strong>RAG</strong>Â å„ä¸ªç»„ä»¶ï¼Œç¡®ä¿ç”Ÿæˆçš„å›ç­”æ—¢ç¬¦åˆåœºæ™¯éœ€æ±‚ï¼Œåˆä¿æŒé«˜ç›¸å…³æ€§å’Œå‡†ç¡®æ€§ã€‚è¿™ç§çµæ´»æ€§ä½¿å¾—Â <strong>æ¡ä»¶æ¨¡å¼</strong>Â åœ¨å¤„ç†å¤šæ ·åŒ–ã€å¤æ‚æ€§é«˜çš„ä»»åŠ¡æ—¶å…·æœ‰æ˜¾è‘—çš„ä¼˜åŠ¿ï¼Œèƒ½å¤Ÿæœ‰æ•ˆæå‡ç³»ç»Ÿçš„é€‚åº”èƒ½åŠ›å’Œè¾“å‡ºè´¨é‡ã€‚</p>
<h2 data-id="heading-2">3 åˆ†æ”¯æ¨¡å¼</h2>
<p><strong>åˆ†æ”¯æ¨¡å¼</strong>Â æ˜¯Â <strong>RAGï¼ˆRetrieval-Augmented Generationï¼‰</strong> Â ç³»ç»Ÿä¸­ä¸€ç§å¢åŠ ç»“æœå¤šæ ·æ€§å’Œé²æ£’æ€§çš„é‡è¦è®¾è®¡æ–¹å¼ã€‚å®ƒé€šè¿‡å¹¶è¡Œè¿è¡Œå¤šä¸ªåˆ†æ”¯ï¼Œæ¥ç”Ÿæˆå¤šæ ·åŒ–çš„ç»“æœï¼Œä»è€Œæå‡ç³»ç»Ÿçš„æ€§èƒ½å’Œå‡†ç¡®æ€§ã€‚</p>
<p>å…·ä½“æ¥è¯´ï¼Œ<strong>åˆ†æ”¯æ¨¡å¼</strong>Â åœ¨æŸä¸ªæ¨¡å—ä¸­ç”Ÿæˆå¤šä¸ªå¹¶è¡Œçš„åˆ†æ”¯ï¼Œæ¯ä¸ªåˆ†æ”¯å¯ä»¥ç‹¬ç«‹æ‰§è¡Œç›¸åŒæˆ–ä¸åŒçš„Â <strong>RAGæµç¨‹</strong>ã€‚è¿™äº›åˆ†æ”¯é€šå¸¸ç”±å¤šä¸ªå¤„ç†æ¨¡å—ç»„æˆï¼Œæ¯ä¸ªæ¨¡å—ç”Ÿæˆå„è‡ªçš„ç»“æœã€‚ç„¶åï¼Œè¿™äº›åˆ†æ”¯çš„ç»“æœä¼šé€šè¿‡ä¸€ä¸ªÂ <strong>èšåˆå‡½æ•°</strong>Â åˆå¹¶æˆä¸€ä¸ªä¸­é—´è¾“å‡ºç»“æœã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œåˆå¹¶åçš„ç»“æœä¸ä¸€å®šæ„å‘³ç€æµç¨‹çš„ç»“æŸï¼Œå®ƒä»¬è¿˜å¯ä»¥ä¼ é€’åˆ°åç»­æ¨¡å—ï¼ˆå¦‚éªŒè¯æ¨¡å—ï¼‰è¿›è¡Œè¿›ä¸€æ­¥å¤„ç†ã€‚æ•´ä½“æµç¨‹ä»ç”Ÿæˆå¤šä¸ªåˆ†æ”¯ã€ç‹¬ç«‹å¤„ç†ã€åˆ°ç»“æœèšåˆï¼Œå½¢æˆäº†ä¸€ä¸ªå®Œæ•´çš„æµæ°´çº¿ã€‚</p>
<p>ä¸<strong>æ¡ä»¶æ¨¡å¼</strong>ä¸åŒï¼Œ<strong>åˆ†æ”¯æ¨¡å¼</strong>Â çš„ç‰¹ç‚¹åœ¨äºåŒæ—¶å¹¶è¡Œè¿è¡Œå¤šä¸ªåˆ†æ”¯ï¼Œè€Œä¸æ˜¯ä»å¤šä¸ªé€‰é¡¹ä¸­é€‰æ‹©ä¸€ä¸ªåˆ†æ”¯ã€‚è¿™ä½¿å¾—åˆ†æ”¯æ¨¡å¼èƒ½å¤ŸåŒæ—¶ä»å¤šä¸ªè§’åº¦è¿›è¡Œå¤„ç†ï¼Œç”Ÿæˆæ›´åŠ ä¸°å¯Œå’Œå¤šæ ·åŒ–çš„ç»“æœã€‚</p>
<h4 data-id="heading-3">åˆ†æ”¯æ¨¡å¼çš„ç»“æ„ç±»å‹</h4>
<p>æ ¹æ®ä»»åŠ¡éœ€æ±‚ï¼Œ<strong>åˆ†æ”¯æ¨¡å¼</strong>Â å¯ä»¥è®¾è®¡ä¸ºä¸åŒçš„ç»“æ„ï¼Œé€šå¸¸åˆ†ä¸ºä¸¤ç§ç±»å‹ï¼š</p>
<ul>
<li>
<p><strong>é¢„æ£€ç´¢åˆ†æ”¯æ¨¡å¼ï¼ˆPre-Retrieval Branchingï¼‰</strong> è¿™ç§æ¨¡å¼é€šè¿‡ç”Ÿæˆå¤šä¸ªå­æŸ¥è¯¢å¹¶å¹¶è¡Œæ£€ç´¢ï¼Œæ—¨åœ¨æé«˜æ£€ç´¢çš„å…¨é¢æ€§å’Œç”Ÿæˆç»“æœçš„å¤šæ ·æ€§ã€‚å…·ä½“æµç¨‹æ˜¯ï¼Œé¦–å…ˆé€šè¿‡æŸ¥è¯¢æ‰©å±•æ¨¡å—å°†åˆå§‹æŸ¥è¯¢æ‰©å±•ä¸ºå¤šä¸ªå­æŸ¥è¯¢ã€‚æ¯ä¸ªå­æŸ¥è¯¢ç„¶åé€šè¿‡æ£€ç´¢æ¨¡å—è·å–ç›¸å…³æ–‡æ¡£ï¼Œå½¢æˆæ–‡æ¡£é›†åˆã€‚è¿™äº›æ–‡æ¡£å’Œç›¸åº”çš„å­æŸ¥è¯¢ä¸€åŒé€å…¥ç”Ÿæˆæ¨¡å—ï¼Œäº§ç”Ÿå¤šä¸ªç­”æ¡ˆé›†åˆã€‚æœ€ç»ˆï¼Œæ‰€æœ‰ç”Ÿæˆçš„ç­”æ¡ˆé€šè¿‡èåˆæ¨¡å—è¿›è¡Œæ•´åˆï¼Œå½¢æˆæœ€ç»ˆçš„ç»“æœã€‚</p>
<p>è¿™ç§æ¨¡å¼çš„ä¼˜åŠ¿åœ¨äºï¼Œå®ƒèƒ½å¤Ÿä»å¤šä¸ªè§’åº¦æŒ–æ˜æ½œåœ¨ä¿¡æ¯ï¼Œå¢å¼ºç”Ÿæˆç»“æœçš„è¦†ç›–åº¦å’Œå‡†ç¡®æ€§ã€‚å®ƒç‰¹åˆ«é€‚ç”¨äºéœ€è¦å¹¿æ³›æœç´¢å’Œå¤šè§’åº¦ç”Ÿæˆçš„ä»»åŠ¡ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c70b9c7cd42e49d79ecd013ac9fb7777~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764819077&amp;x-signature=wGS%2FkFuRSa2YbxdbMRosS0%2FPC08%3D" alt="" loading="lazy"/></p>
</li>
<li>
<p><strong>åæ£€ç´¢åˆ†æ”¯æ¨¡å¼ï¼ˆPost-Retrieval Branchingï¼‰</strong> è¯¥æ¨¡å¼ä»å•ä¸€æŸ¥è¯¢å¼€å§‹ï¼Œé¦–å…ˆé€šè¿‡æ£€ç´¢æ¨¡å—è·å–å¤šä¸ªæ–‡æ¡£å—ã€‚ç„¶åï¼Œæ¯ä¸ªæ–‡æ¡£å—è¢«ç‹¬ç«‹é€å…¥ç”Ÿæˆæ¨¡å—è¿›è¡Œå¤„ç†ï¼Œç”Ÿæˆå¯¹åº”çš„ç»“æœé›†åˆã€‚è¿™äº›ç»“æœæœ€ç»ˆä¼šé€šè¿‡åˆå¹¶æ¨¡å—æ•´åˆï¼Œå½¢æˆæœ€ç»ˆè¾“å‡ºã€‚</p>
<p>ä¸é¢„æ£€ç´¢åˆ†æ”¯æ¨¡å¼ä¸åŒï¼Œåæ£€ç´¢åˆ†æ”¯æ¨¡å¼çš„ç‰¹ç‚¹åœ¨äºï¼Œå®ƒé€šè¿‡å•ä¸€æŸ¥è¯¢è¿›è¡Œæ£€ç´¢ï¼Œè€Œå¹¶è¡Œç”Ÿæˆåˆ™é›†ä¸­åœ¨å¯¹ä¸åŒæ–‡æ¡£å—çš„ç‹¬ç«‹å¤„ç†ä¸Šã€‚è¿™ä¸ªæ¨¡å¼éå¸¸é€‚åˆé‚£äº›éœ€è¦ä»åŒä¸€æŸ¥è¯¢ç»“æœä¸­æŒ–æ˜å¤šè§’åº¦ä¿¡æ¯çš„åœºæ™¯ï¼Œèƒ½æ›´å¥½åœ°åˆ©ç”¨æ£€ç´¢åˆ°çš„å†…å®¹ï¼Œæå‡ç”Ÿæˆç»“æœçš„å¤šæ ·æ€§å’Œè´¨é‡ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/65acc7536587464f8ee0417e3206d768~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764819077&amp;x-signature=qArkwsRjpn91ubzOaRak1FNoFtk%3D" alt="" loading="lazy"/></p>
</li>
</ul>
<h4 data-id="heading-4">åˆ†æ”¯æ¨¡å¼çš„ä¼˜åŠ¿</h4>
<p>é€šè¿‡å¹¶è¡Œæ‰§è¡Œå¤šä¸ªåˆ†æ”¯ï¼Œåˆ†æ”¯æ¨¡å¼èƒ½å¤Ÿä»å¤šä¸ªè§’åº¦ç”Ÿæˆå’Œæ•´åˆä¿¡æ¯ï¼Œæå¤§åœ°æå‡äº†ç³»ç»Ÿçš„ç”Ÿæˆèƒ½åŠ›å’Œç»“æœè´¨é‡ã€‚å®ƒç‰¹åˆ«é€‚åˆäºå¤„ç†å¤æ‚åœºæ™¯å’Œå¤šä»»åŠ¡éœ€æ±‚ï¼Œå¯ä»¥ä¸ºä¸åŒçš„åº”ç”¨åœºæ™¯æä¾›æ›´åŠ å¤šæ ·å’Œç²¾å‡†çš„ç­”æ¡ˆã€‚å› æ­¤ï¼Œåˆ†æ”¯æ¨¡å¼åœ¨Â <strong>å¤šä»»åŠ¡å¤„ç†</strong>Â å’ŒÂ <strong>å¤æ‚åœºæ™¯</strong>Â ä¸­å…·æœ‰æ˜¾è‘—çš„ä¼˜åŠ¿ã€‚</p>
<h2 data-id="heading-5">4 å¾ªç¯æ¨¡å¼</h2>
<p><strong>å¾ªç¯æ¨¡å¼</strong>Â æ˜¯Â <strong>RAGï¼ˆRetrieval-Augmented Generationï¼‰</strong> Â ç³»ç»Ÿä¸­ä¸€ç§é‡è¦çš„è®¾è®¡æ–¹å¼ï¼Œå…¶æ ¸å¿ƒç‰¹ç‚¹æ˜¯æ£€ç´¢ä¸ç”Ÿæˆæ­¥éª¤ä¹‹é—´çš„ç›¸äº’ä¾èµ–æ€§ã€‚é€šè¿‡å¼•å…¥ä¸€ä¸ªÂ <strong>è°ƒåº¦æ¨¡å—</strong>Â æ¥æ§åˆ¶æµç¨‹ï¼Œå¾ªç¯æ¨¡å¼ç¡®ä¿ç³»ç»Ÿå¯ä»¥æ ¹æ®ä»»åŠ¡éœ€æ±‚åœ¨ä¸åŒæ¨¡å—ä¹‹é—´é‡å¤æ‰§è¡ŒæŸäº›æ“ä½œã€‚è¿™ä½¿å¾—å¾ªç¯æ¨¡å¼å¯ä»¥ä¸æ–­ä¼˜åŒ–æµç¨‹ä¸­çš„æ­¥éª¤ï¼Œæå‡ä»»åŠ¡çš„æœ€ç»ˆæ•ˆæœã€‚</p>
<h4 data-id="heading-6">å¾ªç¯æ¨¡å¼çš„åŸºæœ¬åŸç†</h4>
<p>å¾ªç¯æ¨¡å¼å¯ä»¥æŠ½è±¡ä¸ºä¸€ä¸ªÂ <strong>æœ‰å‘å›¾</strong>ï¼Œå›¾ä¸­çš„èŠ‚ç‚¹ä»£è¡¨ç³»ç»Ÿä¸­çš„å„ä¸ªæ¨¡å—ï¼Œè¾¹åˆ™è¡¨ç¤ºæ¨¡å—ä¹‹é—´çš„æ§åˆ¶æµæˆ–æ•°æ®æµã€‚å½“æŸä¸ªæ¨¡å—çš„è¾“å‡ºèƒ½å¤Ÿè¿”å›åˆ°ä¹‹å‰çš„æ¨¡å—æ—¶ï¼Œç³»ç»Ÿå°±å½¢æˆäº†ä¸€ä¸ªÂ <strong>å¾ªç¯ç»“æ„</strong>ã€‚è¿™æ ·çš„è®¾è®¡è®©ç³»ç»Ÿå¯ä»¥æ ¹æ®éœ€è¦åœ¨æŸäº›æ­¥éª¤ä¹‹é—´æ¥å›å¾ªç¯ï¼Œä»¥ä¸æ–­ä¼˜åŒ–ç»“æœï¼Œç›´åˆ°è¾¾åˆ°ç†æƒ³çš„æ•ˆæœã€‚</p>
<h4 data-id="heading-7">åˆ¤æ–­æ¨¡å—</h4>
<p>åœ¨å¾ªç¯æ¨¡å¼ä¸­ï¼Œ<strong>åˆ¤æ–­æ¨¡å—ï¼ˆJudge Moduleï¼‰</strong> Â èµ·åˆ°äº†å…³é”®ä½œç”¨ã€‚å®ƒç”¨äºå†³å®šç³»ç»Ÿæ˜¯å¦éœ€è¦è¿”å›åˆ°å‰ä¸€ä¸ªæ¨¡å—ï¼Œæˆ–è€…æ˜¯å¦ç»§ç»­å‘ä¸‹æ‰§è¡Œã€‚ä¾‹å¦‚ï¼Œåœ¨æ¯ä¸€æ¬¡ç”Ÿæˆæˆ–æ£€ç´¢ä¹‹åï¼Œåˆ¤æ–­æ¨¡å—å¯ä»¥æ ¹æ®å½“å‰çš„è¾“å‡ºç»“æœã€å†å²æ•°æ®ã€æŸ¥è¯¢å’Œæ£€ç´¢åˆ°çš„æ–‡æ¡£æ¥å†³å®šæ˜¯å¦ç»§ç»­è¿­ä»£ã€‚å¦‚æœå†³å®šè¿”å›ï¼Œæµç¨‹å°±ä¼šè¿›è¡Œå¾ªç¯ï¼›å¦‚æœå†³å®šä¸è¿”å›ï¼Œæµç¨‹åˆ™ç»§ç»­å‘å‰æ‰§è¡Œã€‚è¿™æ ·ï¼Œç³»ç»Ÿèƒ½å¤Ÿæ ¹æ®å½“å‰ä»»åŠ¡çš„æƒ…å†µåŠ¨æ€è°ƒæ•´æ•´ä¸ªæµç¨‹ã€‚</p>
<h4 data-id="heading-8">å¾ªç¯æ¨¡å¼çš„ç±»å‹</h4>
<p>å¾ªç¯æ¨¡å¼å¯ä»¥è¿›ä¸€æ­¥ç»†åˆ†ä¸ºä¸‰ç§ç±»å‹ï¼š<strong>è¿­ä»£å‹å¾ªç¯æ¨¡å¼</strong>ã€<strong>é€’å½’å‹å¾ªç¯æ¨¡å¼</strong>Â å’ŒÂ <strong>è‡ªé€‚åº”å‹ï¼ˆä¸»åŠ¨å‹ï¼‰å¾ªç¯æ¨¡å¼</strong>ã€‚æ¯ç§æ¨¡å¼éƒ½é€‚ç”¨äºä¸åŒçš„åœºæ™¯ï¼Œæä¾›äº†çµæ´»çš„å¤„ç†æ–¹å¼ã€‚</p>
<ol>
<li>
<p><strong>è¿­ä»£å‹å¾ªç¯æ¨¡å¼</strong> è¿­ä»£å‹å¾ªç¯æ¨¡å¼é€šè¿‡å¤šæ¬¡æ‰§è¡Œæ£€ç´¢å’Œç”Ÿæˆæ“ä½œï¼Œåœ¨æ¯æ¬¡è¿­ä»£ä¸­é€æ­¥ä¼˜åŒ–ç»“æœã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œåœ¨æ¯ä¸€æ­¥è¿­ä»£ä¸­ï¼Œç³»ç»Ÿæ ¹æ®å½“å‰çš„æŸ¥è¯¢å’Œä¹‹å‰çš„è¾“å‡ºç»“æœæ¥æ£€ç´¢ç›¸å…³æ–‡æ¡£ï¼Œç„¶åä½¿ç”¨è¿™äº›æ–‡æ¡£ç”Ÿæˆæ–°çš„è¾“å‡ºã€‚è¿­ä»£è¿‡ç¨‹é€šå¸¸ä¼šè®¾ç½®ä¸€ä¸ªÂ <strong>æœ€å¤§è¿­ä»£æ¬¡æ•°çš„é™åˆ¶</strong>ï¼Œä»¥é¿å…å‡ºç°æ— é™å¾ªç¯ã€‚åœ¨æ¯æ¬¡è¿­ä»£åï¼Œåˆ¤æ–­æ¨¡å—ä¼šæ ¹æ®å½“å‰çš„ç”Ÿæˆç»“æœã€å†å²è¾“å‡ºã€æŸ¥è¯¢å’Œæ£€ç´¢åˆ°çš„æ–‡æ¡£æ¥å†³å®šæ˜¯å¦ç»§ç»­è¿­ä»£ã€‚è¿­ä»£å‹æ¨¡å¼éå¸¸é€‚åˆé‚£äº›éœ€è¦é€æ­¥æ”¶é›†ä¿¡æ¯å¹¶åŠ¨æ€è°ƒæ•´çš„ä»»åŠ¡ï¼Œèƒ½å¤Ÿé€æ¸å®Œå–„å¯¹å¤æ‚é—®é¢˜çš„å›ç­”ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/15f29b8a03dc41b3a660080b41c88dfc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764819077&amp;x-signature=h9rCC0U58soi%2FNZb2dshiKhMfFE%3D" alt="" loading="lazy"/></p>
</li>
<li>
<p><strong>é€’å½’å‹å¾ªç¯æ¨¡å¼</strong> é€’å½’å‹å¾ªç¯æ¨¡å¼åˆ™æ˜¯ä¸€ç§å…·æœ‰æ˜æ˜¾ä¾èµ–æ€§å’Œå±‚æ¬¡æ€§çš„æ£€ç´¢æ–¹å¼ï¼Œå¦‚å›¾æ‰€ç¤ºã€‚æ¯ä¸€æ­¥æ“ä½œéƒ½ä¾èµ–äºå‰ä¸€æ­¥çš„è¾“å‡ºï¼Œå¹¶é€šè¿‡ä¸æ–­æ·±åŒ–æ£€ç´¢è¿‡ç¨‹ï¼Œé€æ­¥è·å–æ›´æ·±å…¥çš„ä¿¡æ¯ã€‚é€’å½’å‹æ¨¡å¼é€šå¸¸éµå¾ªç±»ä¼¼Â <strong>æ ‘çŠ¶ç»“æ„</strong>Â çš„æ¨¡å¼ï¼Œæ¯æ¬¡æ£€ç´¢ä¼šåŸºäºæ”¹å†™åçš„æŸ¥è¯¢è¿›ä¸€æ­¥å±•å¼€ï¼Œä»¥ç²¾ç¡®å®šä½æ‰€éœ€çš„çŸ¥è¯†ã€‚é€’å½’å‹æ£€ç´¢å…·æœ‰æ˜ç¡®çš„Â <strong>é€€å‡ºæœºåˆ¶</strong>ï¼Œä»¥ç¡®ä¿åœ¨è¾¾åˆ°ç»ˆæ­¢æ¡ä»¶æ—¶æµç¨‹åœæ­¢ï¼Œä»è€Œé¿å…æ— é™é€’å½’ã€‚æ­¤æ¨¡å¼é€‚ç”¨äºéœ€è¦åˆ†æ­¥æ¨ç†æˆ–é€å±‚åˆ†æçš„ä»»åŠ¡ï¼Œèƒ½å¤Ÿæ·±å…¥æŒ–æ˜ç›¸å…³ä¿¡æ¯å¹¶ç”Ÿæˆé«˜è´¨é‡çš„å›ç­”ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4fbb2086ecc7407b89d4130e43ec960c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764819077&amp;x-signature=xh4QZTOLAZx5cYdN6IOyRK1%2FvKw%3D" alt="" loading="lazy"/></p>
</li>
<li>
<p><strong>è‡ªé€‚åº”å‹ï¼ˆä¸»åŠ¨å‹ï¼‰å¾ªç¯æ¨¡å¼</strong> è‡ªé€‚åº”å‹å¾ªç¯æ¨¡å¼æ˜¯ä¸€ç§è¶…è¶Šä¼ ç»Ÿè¢«åŠ¨æ£€ç´¢çš„æ–¹å¼ï¼Œå¾—ç›Šäºå¤§è¯­è¨€æ¨¡å‹å¼ºå¤§çš„èƒ½åŠ›ã€‚å¦‚å›¾9.16æ‰€ç¤ºï¼Œè‡ªé€‚åº”å‹æ¨¡å¼çš„æ ¸å¿ƒæ€æƒ³æ˜¯é€šè¿‡æ™ºèƒ½ä½“çš„æ–¹å¼åŠ¨æ€è°ƒæ•´æ£€ç´¢æµç¨‹ï¼Œä¸»åŠ¨å†³å®šä½•æ—¶è¿›è¡Œæ£€ç´¢ï¼Œä½•æ—¶ç»ˆæ­¢æµç¨‹å¹¶ç”Ÿæˆæœ€ç»ˆç»“æœã€‚è¿™ç§æ¨¡å¼ä¸ä¼ ç»Ÿçš„å›ºå®šæµç¨‹ä¸åŒï¼Œå…·æœ‰æ›´é«˜çš„Â <strong>çµæ´»æ€§</strong>Â å’ŒÂ <strong>æ™ºèƒ½æ€§</strong>ã€‚å®ƒèƒ½å¤Ÿå®æ—¶æ ¹æ®ä»»åŠ¡çš„éœ€æ±‚è°ƒæ•´ç­–ç•¥ï¼Œåˆ¤æ–­æœ€ä½³çš„æ‰§è¡Œè·¯å¾„ã€‚è‡ªé€‚åº”å‹æ£€ç´¢é€šå¸¸é€šè¿‡ä¸¤ç§æ–¹æ³•æ¥è¿›ä¸€æ­¥ç»†åˆ†ï¼šä¸€æ˜¯Â <strong>åŸºäºæç¤º</strong>Â çš„æ–¹æ³•ï¼Œé€šè¿‡è®¾è®¡åŠ¨æ€æç¤ºæ¥å¼•å¯¼æ¨¡å‹çš„æ£€ç´¢ï¼›äºŒæ˜¯Â <strong>åŸºäºæŒ‡ä»¤å¾®è°ƒ</strong>Â çš„æ–¹æ³•ï¼Œé€šè¿‡å¾®è°ƒæ¨¡å‹æ¥å®ç°æ›´ç²¾å‡†çš„æ£€ç´¢æ§åˆ¶ã€‚è‡ªé€‚åº”å‹æ¨¡å¼ç‰¹åˆ«é€‚ç”¨äºå¤æ‚ä»»åŠ¡æˆ–åŠ¨æ€ä¿¡æ¯éœ€æ±‚çš„åœºæ™¯ï¼Œèƒ½å¤Ÿæå‡æ£€ç´¢æ•ˆç‡å’Œç”Ÿæˆè´¨é‡ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/289c41411a194189bf37cfe537788a27~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764819077&amp;x-signature=0M4UhUQCz5hbNMlL02uVZ27IJo4%3D" alt="" loading="lazy"/></p>
</li>
</ol>
<h4 data-id="heading-9">å¾ªç¯æ¨¡å¼çš„ä¼˜åŠ¿</h4>
<p>é€šè¿‡å¼•å…¥å¾ªç¯ç»“æ„ï¼Œ<strong>å¾ªç¯æ¨¡å¼</strong>Â èƒ½å¤Ÿè®©ç³»ç»Ÿåœ¨æ£€ç´¢ä¸ç”Ÿæˆçš„è¿‡ç¨‹ä¸­ä¸æ–­ä¼˜åŒ–ï¼Œé€æ­¥æå‡ä»»åŠ¡çš„å®Œæˆæ•ˆæœã€‚æ— è®ºæ˜¯Â <strong>è¿­ä»£å‹</strong>Â çš„é€æ­¥æ”¹è¿›ï¼Œè¿˜æ˜¯Â <strong>é€’å½’å‹</strong>Â çš„æ·±åº¦æ¨ç†ï¼Œæˆ–æ˜¯Â <strong>è‡ªé€‚åº”å‹</strong>Â çš„æ™ºèƒ½æ§åˆ¶ï¼Œå¾ªç¯æ¨¡å¼éƒ½ä¸ºÂ <strong>RAG</strong>Â ç³»ç»Ÿæä¾›äº†å¼ºå¤§çš„çµæ´»æ€§å’Œå¤„ç†èƒ½åŠ›ï¼Œèƒ½å¤Ÿåœ¨é¢å¯¹å¤æ‚é—®é¢˜æ—¶è¿›è¡Œæ›´ç²¾ç¡®çš„è°ƒæ•´å’Œä¼˜åŒ–ï¼Œä»è€Œæå‡ç”Ÿæˆç»“æœçš„è´¨é‡å’Œå‡†ç¡®æ€§ã€‚</p>
<h3 data-id="heading-10">å­¦ä¹ èµ„æºæ¨è</h3>
<p>å¦‚æœä½ æƒ³æ›´æ·±å…¥åœ°å­¦ä¹ å¤§æ¨¡å‹ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›éå¸¸æœ‰ä»·å€¼çš„å­¦ä¹ èµ„æºï¼Œè¿™äº›èµ„æºå°†å¸®åŠ©ä½ ä»ä¸åŒè§’åº¦å­¦ä¹ å¤§æ¨¡å‹ï¼Œæå‡ä½ çš„å®è·µèƒ½åŠ›ã€‚</p>
<blockquote>
<p>æœ¬æ–‡è¾ƒé•¿ï¼Œå»ºè®®ç‚¹èµæ”¶è—ã€‚æ›´å¤šAIå¤§æ¨¡å‹åº”ç”¨å¼€å‘å­¦ä¹ è§†é¢‘åŠèµ„æ–™ï¼Œåœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fhy.zhipoai.cn%2F" target="_blank" title="https://hy.zhipoai.cn/" ref="nofollow noopener noreferrer">æ™ºæ³ŠAI</a>ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[LangGraph4j LangChain4j JAVA å¤šAgentç¼–æ’è¯¦è§£]]></title>    <link>https://juejin.cn/post/7577201863724924928</link>    <guid>https://juejin.cn/post/7577201863724924928</guid>    <pubDate>2025-11-27T03:00:03.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577201863724924928" data-draft-id="7576867727719858211" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="LangGraph4j LangChain4j JAVA  å¤šAgentç¼–æ’è¯¦è§£ "/> <meta itemprop="keywords" content="åç«¯,Java"/> <meta itemprop="datePublished" content="2025-11-27T03:00:03.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="zhengzizhe"/> <meta itemprop="url" content="https://juejin.cn/user/159867906828928"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            LangGraph4j LangChain4j JAVA  å¤šAgentç¼–æ’è¯¦è§£ 
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/159867906828928/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    zhengzizhe
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-27T03:00:03.000Z" title="Thu Nov 27 2025 03:00:03 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    25
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">LangGraph4j å¤šAgentç¼–æ’è¯¦è§£ï¼šä¸ºä»€ä¹ˆè¿™ä¹ˆåšï¼Œæ€ä¹ˆåš</h2>
<h3 data-id="heading-1">å¼•è¨€</h3>
<p>åœ¨å¤šAgentç³»ç»Ÿä¸­ï¼Œå¦‚ä½•åè°ƒå¤šä¸ªAI AgentååŒå®Œæˆå¤æ‚ä»»åŠ¡æ˜¯ä¸€ä¸ªæ ¸å¿ƒæŒ‘æˆ˜ã€‚æœ¬æ–‡æ·±å…¥è§£æåŸºäºLangGraph4jçš„å¤šAgentç¼–æ’ç³»ç»Ÿï¼Œé‡ç‚¹é˜è¿°<strong>ä¸ºä»€ä¹ˆé€‰æ‹©è¿™ç§æ¶æ„</strong>ä»¥åŠ<strong>å¦‚ä½•å…·ä½“å®ç°</strong>ã€‚</p>
<hr/>
<h3 data-id="heading-2">ä¸€ã€ä¸ºä»€ä¹ˆé€‰æ‹©LangGraph4jï¼Ÿ</h3>
<h4 data-id="heading-3">1.1 å¤šAgentç¼–æ’çš„æ ¸å¿ƒæŒ‘æˆ˜</h4>
<p>åœ¨æ„å»ºå¤šAgentç³»ç»Ÿæ—¶ï¼Œæˆ‘ä»¬é¢ä¸´ä»¥ä¸‹æ ¸å¿ƒé—®é¢˜ï¼š</p>
<ol>
<li><strong>ä»»åŠ¡ä¾èµ–ç®¡ç†</strong>ï¼šä»»åŠ¡Açš„è¾“å‡ºæ˜¯ä»»åŠ¡Bçš„è¾“å…¥ï¼Œå¦‚ä½•ç¡®ä¿æ‰§è¡Œé¡ºåºï¼Ÿ</li>
<li><strong>å¹¶è¡Œæ‰§è¡Œä¼˜åŒ–</strong>ï¼šæ— ä¾èµ–çš„ä»»åŠ¡å¦‚ä½•å¹¶è¡Œæ‰§è¡Œä»¥æé«˜æ•ˆç‡ï¼Ÿ</li>
<li><strong>çŠ¶æ€å…±äº«</strong>ï¼šå¤šä¸ªAgentå¦‚ä½•å…±äº«ä¸­é—´ç»“æœå’Œä¸Šä¸‹æ–‡ï¼Ÿ</li>
<li><strong>é”™è¯¯å¤„ç†</strong>ï¼šæŸä¸ªAgentå¤±è´¥æ—¶ï¼Œå¦‚ä½•ä¸å½±å“å…¶ä»–Agentï¼Ÿ</li>
<li><strong>æµç¨‹å¯è§†åŒ–</strong>ï¼šå¦‚ä½•æ¸…æ™°åœ°è¡¨è¾¾å¤æ‚çš„æ‰§è¡Œæµç¨‹ï¼Ÿ</li>
</ol>
<h4 data-id="heading-4">1.2 LangGraph4jçš„è§£å†³æ–¹æ¡ˆ</h4>
<p><strong>LangGraph4j</strong>åŸºäº**çŠ¶æ€å›¾ï¼ˆStateGraphï¼‰**çš„æ¦‚å¿µï¼Œå®Œç¾è§£å†³äº†ä¸Šè¿°é—®é¢˜ï¼š</p>
<ul>
<li><strong>å›¾ç»“æ„</strong>ï¼šç”¨èŠ‚ç‚¹ï¼ˆNodeï¼‰è¡¨ç¤ºAgentï¼Œç”¨è¾¹ï¼ˆEdgeï¼‰è¡¨ç¤ºä¾èµ–å…³ç³»ï¼Œç›´è§‚æ¸…æ™°</li>
<li><strong>çŠ¶æ€ç®¡ç†</strong>ï¼šé€šè¿‡<code>WorkspaceState</code>ç»Ÿä¸€ç®¡ç†æ‰€æœ‰ä¸­é—´æ•°æ®ï¼Œå®ç°Agenté—´çš„æ•°æ®ä¼ é€’</li>
<li><strong>è‡ªåŠ¨è°ƒåº¦</strong>ï¼šæ¡†æ¶è‡ªåŠ¨æ ¹æ®ä¾èµ–å…³ç³»è°ƒåº¦æ‰§è¡Œï¼Œæ”¯æŒå¹¶è¡Œå’Œä¸²è¡Œæ··åˆ</li>
<li><strong>é”™è¯¯éš”ç¦»</strong>ï¼šæ¯ä¸ªèŠ‚ç‚¹ç‹¬ç«‹æ‰§è¡Œï¼Œå¤±è´¥ä¸å½±å“å…¶ä»–èŠ‚ç‚¹</li>
</ul>
<p><strong>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬é€‰æ‹©LangGraph4j</strong>ï¼šå®ƒæä¾›äº†å£°æ˜å¼çš„ç¼–æ’æ–¹å¼ï¼Œè®©æˆ‘ä»¬ä¸“æ³¨äºä¸šåŠ¡é€»è¾‘è€Œéæ‰§è¡Œç»†èŠ‚ã€‚</p>
<hr/>
<h3 data-id="heading-5">äºŒã€ä¸ºä»€ä¹ˆé‡‡ç”¨Supervisor-Workeræ¨¡å¼ï¼Ÿ</h3>
<h4 data-id="heading-6">2.1 è®¾è®¡åŠ¨æœº</h4>
<p>ä¼ ç»Ÿçš„å¤šAgentç³»ç»Ÿå¾€å¾€å­˜åœ¨ä»¥ä¸‹é—®é¢˜ï¼š</p>
<ul>
<li><strong>ç¡¬ç¼–ç æµç¨‹</strong>ï¼šä»»åŠ¡æµç¨‹å†™æ­»åœ¨ä»£ç ä¸­ï¼Œæ— æ³•åŠ¨æ€è°ƒæ•´</li>
<li><strong>ç¼ºä¹æ™ºèƒ½è§„åˆ’</strong>ï¼šæ— æ³•æ ¹æ®ä»»åŠ¡ç‰¹ç‚¹æ™ºèƒ½åˆ†é…Agent</li>
<li><strong>æ‰©å±•æ€§å·®</strong>ï¼šæ–°å¢Agentéœ€è¦ä¿®æ”¹ä»£ç </li>
</ul>
<h4 data-id="heading-7">2.2 Supervisor-Workeræ¨¡å¼çš„ä¼˜åŠ¿</h4>
<p>æˆ‘ä»¬é‡‡ç”¨<strong>Supervisor-Workeræ¨¡å¼</strong>ï¼Œæ ¸å¿ƒæ€æƒ³æ˜¯ï¼š</p>
<pre><code class="hljs">Supervisorï¼ˆä¸»ç®¡Agentï¼‰
  â†“ åˆ†æç”¨æˆ·è¯·æ±‚ï¼Œç”Ÿæˆä»»åŠ¡è®¡åˆ’
TaskPlanï¼ˆä»»åŠ¡è®¡åˆ’ï¼‰
  â†“ åŒ…å«ä»»åŠ¡åˆ—è¡¨å’Œä¾èµ–å…³ç³»
Workersï¼ˆå·¥ä½œè€…Agentï¼‰
  â†“ æ‰§è¡Œå…·ä½“ä»»åŠ¡
ç»“æœæ±‡æ€»
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡ï¼Ÿ</strong></p>
<ol>
<li><strong>åŠ¨æ€è§„åˆ’</strong>ï¼šSupervisoræ ¹æ®ç”¨æˆ·è¯·æ±‚å’Œå¯ç”¨AgentåŠ¨æ€ç”Ÿæˆè®¡åˆ’ï¼Œæ— éœ€ç¡¬ç¼–ç </li>
<li><strong>èŒè´£åˆ†ç¦»</strong>ï¼šSupervisorè´Ÿè´£"æ€è€ƒ"ï¼ˆè§„åˆ’ï¼‰ï¼ŒWorkerè´Ÿè´£"æ‰§è¡Œ"ï¼ˆå¹²æ´»ï¼‰</li>
<li><strong>æ˜“äºæ‰©å±•</strong>ï¼šæ–°å¢Workeråªéœ€æ³¨å†Œï¼ŒSupervisorä¼šè‡ªåŠ¨è¯†åˆ«å¹¶ä½¿ç”¨</li>
<li><strong>æ™ºèƒ½è°ƒåº¦</strong>ï¼šSupervisoräº†è§£æ¯ä¸ªWorkerçš„èƒ½åŠ›ï¼Œå¯ä»¥åšå‡ºæœ€ä¼˜åˆ†é…</li>
</ol>
<h4 data-id="heading-8">2.3 å…·ä½“å®ç°ï¼šOrchestratorç±»</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Orchestrator</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> ServiceNode supervisorNode;      <span class="hljs-comment">// ä¸»ç®¡èŠ‚ç‚¹</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> List&lt;ServiceNode&gt; workerNodes;   <span class="hljs-comment">// å·¥ä½œè€…èŠ‚ç‚¹åˆ—è¡¨</span>
    
    <span class="hljs-comment">/**
     * æ‰§è¡Œæµç¨‹ï¼šè§„åˆ’ â†’ æ„å»ºå›¾ â†’ æ‰§è¡Œ
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">execute</span><span class="hljs-params">(String userRequest, UserContext userContext)</span> {
        <span class="hljs-comment">// Step 1: Supervisorç”Ÿæˆä»»åŠ¡è®¡åˆ’</span>
        <span class="hljs-type">TaskPlan</span> <span class="hljs-variable">taskPlan</span> <span class="hljs-operator">=</span> plan(userRequest, userContext);
        
        <span class="hljs-comment">// Step 2: æ ¹æ®è®¡åˆ’æ„å»ºæ‰§è¡Œå›¾</span>
        CompiledGraph&lt;WorkspaceState&gt; graph = buildGraph(taskPlan, userContext);
        
        <span class="hljs-comment">// Step 3: æ‰§è¡Œå›¾</span>
        graph.invoke(init);
    }
}
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆåˆ†ä¸‰æ­¥ï¼Ÿ</strong></p>
<ul>
<li><strong>plan()</strong>ï¼šè®©Supervisorç†è§£éœ€æ±‚å¹¶è§„åˆ’ï¼Œè¿™æ˜¯"æ€è€ƒ"é˜¶æ®µ</li>
<li><strong>buildGraph()</strong>ï¼šå°†è®¡åˆ’è½¬æ¢ä¸ºå¯æ‰§è¡Œçš„å›¾ç»“æ„ï¼Œè¿™æ˜¯"å‡†å¤‡"é˜¶æ®µ</li>
<li><strong>invoke()</strong>ï¼šå®é™…æ‰§è¡Œï¼Œè¿™æ˜¯"è¡ŒåŠ¨"é˜¶æ®µ</li>
</ul>
<p>è¿™ç§åˆ†ç¦»ä½¿å¾—æ¯ä¸ªé˜¶æ®µèŒè´£æ¸…æ™°ï¼Œæ˜“äºæµ‹è¯•å’Œç»´æŠ¤ã€‚</p>
<hr/>
<h3 data-id="heading-9">ä¸‰ã€å¦‚ä½•å®ç°ä»»åŠ¡è§„åˆ’ï¼Ÿ</h3>
<h4 data-id="heading-10">3.1 ä¸ºä»€ä¹ˆéœ€è¦ä»»åŠ¡è§„åˆ’ï¼Ÿ</h4>
<p>ç”¨æˆ·è¯·æ±‚å¾€å¾€æ˜¯æ¨¡ç³Šçš„ï¼Œæ¯”å¦‚"å¸®æˆ‘å†™ä¸€ä»½å¸‚åœºåˆ†ææŠ¥å‘Š"ã€‚Supervisoréœ€è¦ï¼š</p>
<ol>
<li><strong>ç†è§£éœ€æ±‚</strong>ï¼šåˆ†æç”¨æˆ·çœŸæ­£æƒ³è¦ä»€ä¹ˆ</li>
<li><strong>ä»»åŠ¡åˆ†è§£</strong>ï¼šå°†å¤æ‚ä»»åŠ¡æ‹†è§£ä¸ºå¯æ‰§è¡Œçš„å­ä»»åŠ¡</li>
<li><strong>åˆ†é…Agent</strong>ï¼šæ ¹æ®ä»»åŠ¡ç‰¹ç‚¹é€‰æ‹©åˆé€‚çš„Worker</li>
<li><strong>å»ºç«‹ä¾èµ–</strong>ï¼šç¡®å®šä»»åŠ¡é—´çš„æ‰§è¡Œé¡ºåº</li>
</ol>
<h4 data-id="heading-11">3.2 å¦‚ä½•å®ç°ï¼šplan()æ–¹æ³•è¯¦è§£</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> TaskPlan <span class="hljs-title function_">plan</span><span class="hljs-params">(String userRequest, UserContext userContext)</span> {
    <span class="hljs-comment">// 1. æ„å»ºè§„åˆ’æç¤ºè¯</span>
    <span class="hljs-comment">// ä¸ºä»€ä¹ˆéœ€è¦è¿™äº›ä¿¡æ¯ï¼Ÿ</span>
    <span class="hljs-comment">// - userRequest: ç”¨æˆ·çš„å…·ä½“éœ€æ±‚</span>
    <span class="hljs-comment">// - subAgents: å¯ç”¨çš„Workeråˆ—è¡¨åŠå…¶èƒ½åŠ›ï¼Œè®©SupervisorçŸ¥é“"è°èƒ½åšä»€ä¹ˆ"</span>
    <span class="hljs-comment">// - chatHistory: å†å²å¯¹è¯ï¼Œæä¾›ä¸Šä¸‹æ–‡è®°å¿†</span>
    <span class="hljs-type">String</span> <span class="hljs-variable">planningPrompt</span> <span class="hljs-operator">=</span> <span class="hljs-string">"""
        {
          "userRequest": "%s",
          "subAgents": %s,
          "chatHistory": %s
        }
        """</span>.formatted(userRequest, subWorkersDesc(), historyContext);
    
    <span class="hljs-comment">// 2. è°ƒç”¨Supervisor AIç”Ÿæˆè®¡åˆ’</span>
    <span class="hljs-comment">// ä¸ºä»€ä¹ˆç”¨æµå¼è°ƒç”¨ï¼Ÿ</span>
    <span class="hljs-comment">// - å¯ä»¥å®æ—¶åé¦ˆè§„åˆ’è¿›åº¦</span>
    <span class="hljs-comment">// - æ”¯æŒé•¿æ–‡æœ¬ç”Ÿæˆ</span>
    <span class="hljs-type">TokenStream</span> <span class="hljs-variable">chat</span> <span class="hljs-operator">=</span> supAi.chat(planningPrompt);
    
    <span class="hljs-comment">// 3. ç­‰å¾…å®Œæ•´å“åº”</span>
    <span class="hljs-type">CountDownLatch</span> <span class="hljs-variable">latch</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">CountDownLatch</span>(<span class="hljs-number">1</span>);
    <span class="hljs-type">StringBuilder</span> <span class="hljs-variable">builder</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuilder</span>();
    
    chat.onCompleteResponse(e -&gt; {
        builder.append(e.aiMessage().text());
        latch.countDown();
    });
    chat.start();
    latch.await();
    
    <span class="hljs-comment">// 4. è§£æJSONä¸ºTaskPlanå¯¹è±¡</span>
    <span class="hljs-comment">// ä¸ºä»€ä¹ˆè¿”å›JSONï¼Ÿ</span>
    <span class="hljs-comment">// - ç»“æ„åŒ–æ•°æ®ï¼Œæ˜“äºè§£æ</span>
    <span class="hljs-comment">// - Supervisorå¯ä»¥æ˜ç¡®æŒ‡å®šä»»åŠ¡IDã€ä¾èµ–å…³ç³»ç­‰</span>
    <span class="hljs-type">String</span> <span class="hljs-variable">response</span> <span class="hljs-operator">=</span> builder.toString();
    <span class="hljs-type">TaskPlan</span> <span class="hljs-variable">taskPlan</span> <span class="hljs-operator">=</span> JSON.parseObject(response, TaskPlan.class);
    
    <span class="hljs-keyword">return</span> taskPlan;
}
</code></pre>
<h4 data-id="heading-12">3.3 TaskPlançš„ç»“æ„è®¾è®¡</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Data</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TaskPlan</span> {
    <span class="hljs-keyword">private</span> String summary;        <span class="hljs-comment">// è®¡åˆ’æ‘˜è¦ï¼šä¸ºä»€ä¹ˆéœ€è¦ï¼Ÿè®©ç”¨æˆ·çŸ¥é“Supervisorç†è§£äº†ä»€ä¹ˆ</span>
    <span class="hljs-keyword">private</span> Integer totalTasks;     <span class="hljs-comment">// æ€»ä»»åŠ¡æ•°ï¼šä¸ºä»€ä¹ˆéœ€è¦ï¼Ÿç”¨äºè¿›åº¦è·Ÿè¸ª</span>
    <span class="hljs-keyword">private</span> List&lt;Task&gt; tasks;      <span class="hljs-comment">// ä»»åŠ¡åˆ—è¡¨ï¼šæ ¸å¿ƒæ•°æ®</span>
}

<span class="hljs-meta">@Data</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Task</span> {
    <span class="hljs-keyword">private</span> String id;                    <span class="hljs-comment">// ä»»åŠ¡IDï¼šä¸ºä»€ä¹ˆéœ€è¦ï¼Ÿç”¨äºä¾èµ–å…³ç³»æ ‡è¯†</span>
    <span class="hljs-keyword">private</span> String title;                 <span class="hljs-comment">// ä»»åŠ¡æ ‡é¢˜ï¼šä¸ºä»€ä¹ˆéœ€è¦ï¼Ÿä¾¿äºç†è§£å’Œè°ƒè¯•</span>
    <span class="hljs-keyword">private</span> String description;           <span class="hljs-comment">// ä»»åŠ¡æè¿°ï¼šä¸ºä»€ä¹ˆéœ€è¦ï¼ŸWorkeréœ€è¦çŸ¥é“å…·ä½“åšä»€ä¹ˆ</span>
    <span class="hljs-keyword">private</span> String agentId;               <span class="hljs-comment">// è´Ÿè´£çš„Agent IDï¼šä¸ºä»€ä¹ˆéœ€è¦ï¼ŸæŒ‡å®šæ‰§è¡Œè€…</span>
    <span class="hljs-keyword">private</span> TaskInputs inputs;            <span class="hljs-comment">// è¾“å…¥é…ç½®ï¼šä¸ºä»€ä¹ˆéœ€è¦ï¼Ÿå®šä¹‰æ•°æ®æ¥æº</span>
    <span class="hljs-keyword">private</span> ExecutionStrategy executionStrategy;  <span class="hljs-comment">// æ‰§è¡Œç­–ç•¥ï¼šä¸ºä»€ä¹ˆéœ€è¦ï¼Ÿæ§åˆ¶è¾“å‡ºæ–¹å¼</span>
}

<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TaskInputs</span> {
    <span class="hljs-keyword">private</span> Boolean fromUser;          <span class="hljs-comment">// æ˜¯å¦æ¥è‡ªç”¨æˆ·ï¼šä¸ºä»€ä¹ˆéœ€è¦ï¼ŸåŒºåˆ†æ•°æ®æ¥æº</span>
    <span class="hljs-keyword">private</span> List&lt;String&gt; fromTask;     <span class="hljs-comment">// ä¾èµ–çš„ä»»åŠ¡IDåˆ—è¡¨ï¼šä¸ºä»€ä¹ˆéœ€è¦ï¼Ÿå®šä¹‰æ‰§è¡Œé¡ºåº</span>
}
</code></pre>
<p><strong>è®¾è®¡è¦ç‚¹</strong>ï¼š</p>
<ul>
<li><code>fromTask</code>åˆ—è¡¨å®šä¹‰äº†ä¾èµ–å…³ç³»ï¼Œè¿™æ˜¯æ„å»ºæ‰§è¡Œå›¾çš„å…³é”®</li>
<li><code>agentId</code>æŒ‡å®šæ‰§è¡Œè€…ï¼Œç¡®ä¿ä»»åŠ¡åˆ†é…ç»™æ­£ç¡®çš„Worker</li>
<li><code>executionStrategy</code>æ§åˆ¶æ˜¯å¦æµå¼è¾“å‡ºï¼Œå¹³è¡¡ç”¨æˆ·ä½“éªŒå’Œæ€§èƒ½</li>
</ul>
<hr/>
<h3 data-id="heading-13">å››ã€å¦‚ä½•æ„å»ºæ‰§è¡Œå›¾ï¼Ÿ</h3>
<h4 data-id="heading-14">4.1 ä¸ºä»€ä¹ˆéœ€è¦GraphBuilderï¼Ÿ</h4>
<p>TaskPlanåªæ˜¯æ•°æ®ç»“æ„ï¼Œéœ€è¦è½¬æ¢ä¸ºå¯æ‰§è¡Œçš„å›¾ã€‚GraphBuilderçš„ä½œç”¨æ˜¯ï¼š</p>
<ol>
<li><strong>åˆ›å»ºèŠ‚ç‚¹</strong>ï¼šä¸ºæ¯ä¸ªä»»åŠ¡åˆ›å»ºæ‰§è¡ŒèŠ‚ç‚¹</li>
<li><strong>å»ºç«‹è¾¹</strong>ï¼šæ ¹æ®ä¾èµ–å…³ç³»è¿æ¥èŠ‚ç‚¹</li>
<li><strong>å¤„ç†å…¥å£å‡ºå£</strong>ï¼šè¿æ¥STARTå’ŒENDèŠ‚ç‚¹</li>
</ol>
<h4 data-id="heading-15">4.2 å¦‚ä½•å®ç°ï¼šGraphBuilder.build()è¯¦è§£</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> CompiledGraph&lt;WorkspaceState&gt; <span class="hljs-title function_">build</span><span class="hljs-params">(
    TaskPlan taskPlan,
    Map&lt;String, ServiceNode&gt; workersByID,
    UserContext userContext
)</span> <span class="hljs-keyword">throws</span> GraphStateException {
    
    <span class="hljs-comment">// ========== ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºçŠ¶æ€å›¾ ==========</span>
    <span class="hljs-comment">// ä¸ºä»€ä¹ˆéœ€è¦çŠ¶æ€å›¾ï¼Ÿ</span>
    <span class="hljs-comment">// - çŠ¶æ€å›¾æ˜¯LangGraph4jçš„æ ¸å¿ƒæŠ½è±¡</span>
    <span class="hljs-comment">// - WorkspaceState::new æ˜¯çŠ¶æ€å·¥å‚æ–¹æ³•ï¼Œç”¨äºåˆ›å»ºåˆå§‹çŠ¶æ€</span>
    StateGraph&lt;WorkspaceState&gt; graph = <span class="hljs-keyword">new</span> <span class="hljs-title class_">StateGraph</span>&lt;&gt;(WorkspaceState::<span class="hljs-keyword">new</span>);
    
    <span class="hljs-comment">// ========== ç¬¬äºŒæ­¥ï¼šä¸ºæ¯ä¸ªä»»åŠ¡åˆ›å»ºèŠ‚ç‚¹ ==========</span>
    <span class="hljs-comment">// ä¸ºä»€ä¹ˆéœ€è¦èŠ‚ç‚¹ï¼Ÿ</span>
    <span class="hljs-comment">// - èŠ‚ç‚¹æ˜¯å›¾çš„æ‰§è¡Œå•å…ƒï¼Œæ¯ä¸ªèŠ‚ç‚¹å¯¹åº”ä¸€ä¸ªAgentä»»åŠ¡</span>
    <span class="hljs-keyword">for</span> (Task task : taskPlan.getTasks()) {
        <span class="hljs-comment">// 1. åˆ›å»ºæ‰§è¡Œå™¨ï¼šä¸ºä»€ä¹ˆéœ€è¦æ‰§è¡Œå™¨ï¼Ÿ</span>
        <span class="hljs-comment">// - æ‰§è¡Œå™¨å°è£…äº†å…·ä½“çš„æ‰§è¡Œé€»è¾‘ï¼ˆè°ƒç”¨AIã€å¤„ç†ç»“æœç­‰ï¼‰</span>
        <span class="hljs-comment">// - ExecutorFactoryæ ¹æ®ç­–ç•¥åˆ›å»ºä¸åŒç±»å‹çš„æ‰§è¡Œå™¨ï¼ˆé™é»˜/æµå¼ï¼‰</span>
        <span class="hljs-type">TaskExecutor</span> <span class="hljs-variable">executor</span> <span class="hljs-operator">=</span> ExecutorFactory.create(
            task, 
            workersByID.get(task.getAgentId()),  <span class="hljs-comment">// æ ¹æ®agentIdæ‰¾åˆ°å¯¹åº”çš„ServiceNode</span>
            userContext
        );
        
        <span class="hljs-comment">// 2. æ·»åŠ èŠ‚ç‚¹åˆ°å›¾ï¼šä¸ºä»€ä¹ˆç”¨å¼‚æ­¥æ‰§è¡Œï¼Ÿ</span>
        <span class="hljs-comment">// - CompletableFuture.supplyAsync()å®ç°çœŸæ­£çš„å¼‚æ­¥æ‰§è¡Œ</span>
        <span class="hljs-comment">// - æ— ä¾èµ–çš„ä»»åŠ¡å¯ä»¥å¹¶è¡Œæ‰§è¡Œï¼Œæé«˜æ•ˆç‡</span>
        <span class="hljs-comment">// - executorServiceæ˜¯çº¿ç¨‹æ± ï¼Œç®¡ç†çº¿ç¨‹èµ„æº</span>
        graph.addNode(task.getId(), state -&gt; {
            <span class="hljs-keyword">return</span> CompletableFuture.supplyAsync(() -&gt; {
                <span class="hljs-keyword">try</span> {
                    log.debug(<span class="hljs-string">"å¼‚æ­¥æ‰§è¡ŒèŠ‚ç‚¹: taskId={}, thread={}"</span>, 
                        task.getId(), Thread.currentThread().getName());
                    <span class="hljs-comment">// executor.apply(state)æ‰§è¡Œä»»åŠ¡ï¼Œè¿”å›æ›´æ–°åçš„çŠ¶æ€</span>
                    <span class="hljs-keyword">return</span> executor.apply(state);
                } <span class="hljs-keyword">catch</span> (Exception e) {
                    log.error(<span class="hljs-string">"èŠ‚ç‚¹æ‰§è¡Œå¼‚å¸¸: taskId={}"</span>, task.getId(), e);
                    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"èŠ‚ç‚¹æ‰§è¡Œå¤±è´¥: taskId="</span> + task.getId(), e);
                }
            }, executorService);
        });
    }
    
    <span class="hljs-comment">// ========== ç¬¬ä¸‰æ­¥ï¼šå»ºç«‹ä¾èµ–å…³ç³»ï¼ˆæ·»åŠ è¾¹ï¼‰==========</span>
    <span class="hljs-comment">// ä¸ºä»€ä¹ˆéœ€è¦è¾¹ï¼Ÿ</span>
    <span class="hljs-comment">// - è¾¹å®šä¹‰äº†èŠ‚ç‚¹é—´çš„ä¾èµ–å…³ç³»å’Œæ‰§è¡Œé¡ºåº</span>
    <span class="hljs-comment">// - LangGraph4jä¼šæ ¹æ®è¾¹è‡ªåŠ¨è°ƒåº¦æ‰§è¡Œ</span>
    Map&lt;String, Task.TaskInputs&gt; inputMap = taskPlan.getTasks().stream()
        .collect(Collectors.toMap(Task::getId, Task::getInputs));
    
    Set&lt;String&gt; allTargets = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashSet</span>&lt;&gt;();
    <span class="hljs-keyword">for</span> (Map.Entry&lt;String, Task.TaskInputs&gt; entry : inputMap.entrySet()) {
        <span class="hljs-type">String</span> <span class="hljs-variable">taskId</span> <span class="hljs-operator">=</span> entry.getKey();
        Task.<span class="hljs-type">TaskInputs</span> <span class="hljs-variable">inputs</span> <span class="hljs-operator">=</span> entry.getValue();
        
        <span class="hljs-comment">// å¦‚æœä»»åŠ¡æœ‰å‰ç½®ä¾èµ–ï¼Œæ·»åŠ è¾¹</span>
        <span class="hljs-keyword">if</span> (inputs != <span class="hljs-literal">null</span> &amp;&amp; inputs.getFromTask() != <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">for</span> (String fromTask : inputs.getFromTask()) {
                <span class="hljs-comment">// æ·»åŠ è¾¹ï¼šfromTask â†’ taskId</span>
                <span class="hljs-comment">// è¿™æ„å‘³ç€taskIdå¿…é¡»ç­‰å¾…fromTaskå®Œæˆåæ‰èƒ½æ‰§è¡Œ</span>
                graph.addEdge(fromTask, taskId);
                allTargets.add(taskId);  <span class="hljs-comment">// è®°å½•æœ‰å‰ç½®ä¾èµ–çš„èŠ‚ç‚¹</span>
            }
        }
    }
    
    <span class="hljs-comment">// ========== ç¬¬å››æ­¥ï¼šè¿æ¥STARTå’ŒEND ==========</span>
    <span class="hljs-comment">// ä¸ºä»€ä¹ˆéœ€è¦STARTå’ŒENDï¼Ÿ</span>
    <span class="hljs-comment">// - STARTæ˜¯å›¾çš„å…¥å£ï¼ŒENDæ˜¯å›¾çš„å‡ºå£</span>
    <span class="hljs-comment">// - LangGraph4jéœ€è¦çŸ¥é“ä»å“ªé‡Œå¼€å§‹ï¼Œåˆ°å“ªé‡Œç»“æŸ</span>
    
    <span class="hljs-comment">// æ‰¾åˆ°æ ¹èŠ‚ç‚¹ï¼ˆæ— å‰ç½®ä¾èµ–çš„èŠ‚ç‚¹ï¼‰</span>
    Set&lt;String&gt; allNodes = inputMap.keySet();
    List&lt;String&gt; rootNodes = allNodes.stream()
        .filter(node -&gt; !allTargets.contains(node))  <span class="hljs-comment">// ä¸åœ¨allTargetsä¸­çš„èŠ‚ç‚¹å°±æ˜¯æ ¹èŠ‚ç‚¹</span>
        .toList();
    
    <span class="hljs-comment">// ä¸ºä»€ä¹ˆå¯èƒ½æœ‰å¤šä¸ªæ ¹èŠ‚ç‚¹ï¼Ÿ</span>
    <span class="hljs-comment">// - å¤šä¸ªç‹¬ç«‹çš„ä»»åŠ¡å¯ä»¥åŒæ—¶å¼€å§‹</span>
    <span class="hljs-comment">// - ä¾‹å¦‚ï¼šä»»åŠ¡Aå’Œä»»åŠ¡Béƒ½åªä¾èµ–ç”¨æˆ·è¾“å…¥ï¼Œå¯ä»¥å¹¶è¡Œæ‰§è¡Œ</span>
    <span class="hljs-keyword">if</span> (rootNodes.isEmpty()) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">GraphStateException</span>(<span class="hljs-string">"ä»»åŠ¡å›¾ä¸­æ²¡æœ‰æ‰¾åˆ°å…¥å£ä»»åŠ¡"</span>);
    }
    
    <span class="hljs-comment">// è¿æ¥STARTåˆ°æ‰€æœ‰æ ¹èŠ‚ç‚¹</span>
    <span class="hljs-keyword">for</span> (String root : rootNodes) {
        graph.addEdge(StateGraph.START, root);
    }
    
    <span class="hljs-comment">// æ‰¾åˆ°å¶å­èŠ‚ç‚¹ï¼ˆæ— åç»­èŠ‚ç‚¹çš„èŠ‚ç‚¹ï¼‰</span>
    Set&lt;String&gt; nodesWithTargets = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashSet</span>&lt;&gt;();
    <span class="hljs-keyword">for</span> (Task task : taskPlan.getTasks()) {
        <span class="hljs-keyword">if</span> (task.getInputs() != <span class="hljs-literal">null</span> &amp;&amp; task.getInputs().getFromTask() != <span class="hljs-literal">null</span>) {
            nodesWithTargets.addAll(task.getInputs().getFromTask());
        }
    }
    
    List&lt;String&gt; leafNodes = allNodes.stream()
        .filter(node -&gt; !nodesWithTargets.contains(node))
        .toList();
    
    <span class="hljs-comment">// è¿æ¥æ‰€æœ‰å¶å­èŠ‚ç‚¹åˆ°END</span>
    <span class="hljs-keyword">for</span> (String leaf : leafNodes) {
        graph.addEdge(leaf, StateGraph.END);
    }
    
    <span class="hljs-comment">// ========== ç¬¬äº”æ­¥ï¼šç¼–è¯‘å›¾ ==========</span>
    <span class="hljs-comment">// ä¸ºä»€ä¹ˆéœ€è¦ç¼–è¯‘ï¼Ÿ</span>
    <span class="hljs-comment">// - ç¼–è¯‘ä¼šä¼˜åŒ–å›¾ç»“æ„ï¼Œæ£€æŸ¥é”™è¯¯</span>
    <span class="hljs-comment">// - ç¼–è¯‘åçš„å›¾æ‰èƒ½æ‰§è¡Œ</span>
    <span class="hljs-keyword">return</span> graph.compile();
}
</code></pre>
<h4 data-id="heading-16">4.3 æ‰§è¡Œå›¾ç¤ºä¾‹</h4>
<p>å‡è®¾Supervisorç”Ÿæˆäº†ä»¥ä¸‹è®¡åˆ’ï¼š</p>
<ul>
<li>Task1ï¼ˆResearcherï¼‰ï¼šæ£€ç´¢èµ„æ–™ï¼Œä¾èµ–ç”¨æˆ·è¾“å…¥</li>
<li>Task2ï¼ˆAnalystï¼‰ï¼šåˆ†ææ•°æ®ï¼Œä¾èµ–Task1</li>
<li>Task3ï¼ˆWriterï¼‰ï¼šå†™æŠ¥å‘Šï¼Œä¾èµ–Task2</li>
</ul>
<p>æ„å»ºçš„å›¾ç»“æ„ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">START</span> â†’ Task1 â†’ Task2 â†’ Task3 â†’ <span class="hljs-keyword">END</span>
</code></pre>
<p>å¦‚æœTask1å’ŒTask4éƒ½åªä¾èµ–ç”¨æˆ·è¾“å…¥ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">START</span> â†’ Task1 â”€â”
      â†’ Task4 â”€â”¼â†’ Task5 â†’ <span class="hljs-keyword">END</span>
</code></pre>
<p>è¿™æ ·Task1å’ŒTask4å¯ä»¥å¹¶è¡Œæ‰§è¡Œã€‚</p>
<hr/>
<h3 data-id="heading-17">äº”ã€å¦‚ä½•æ‰§è¡Œä»»åŠ¡ï¼Ÿ</h3>
<h4 data-id="heading-18">5.1 ä¸ºä»€ä¹ˆéœ€è¦TaskExecutorï¼Ÿ</h4>
<p>ä¸åŒçš„ä»»åŠ¡æœ‰ä¸åŒçš„æ‰§è¡Œéœ€æ±‚ï¼š</p>
<ul>
<li><strong>é™é»˜ä»»åŠ¡</strong>ï¼šåå°å¤„ç†ï¼Œç»“æœåªä¿å­˜åˆ°stateï¼Œä¸å‘ç”¨æˆ·è¾“å‡º</li>
<li><strong>æµå¼ä»»åŠ¡</strong>ï¼šå®æ—¶å‘ç”¨æˆ·è¾“å‡ºï¼Œæä¾›æ›´å¥½çš„äº¤äº’ä½“éªŒ</li>
</ul>
<h4 data-id="heading-19">5.2 å¦‚ä½•å®ç°ï¼šæ‰§è¡Œå™¨æ¨¡å¼</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æ‰§è¡Œå™¨æ¥å£ï¼šä¸ºä»€ä¹ˆéœ€è¦æ¥å£ï¼Ÿ</span>
<span class="hljs-comment">// - ç»Ÿä¸€æ‰§è¡Œè§„èŒƒ</span>
<span class="hljs-comment">// - æ”¯æŒå¤šç§å®ç°ï¼ˆé™é»˜/æµå¼ï¼‰</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">TaskExecutor</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">NodeAction</span>&lt;WorkspaceState&gt; {
    Task <span class="hljs-title function_">getTask</span><span class="hljs-params">()</span>;
    ServiceNode <span class="hljs-title function_">getServiceNode</span><span class="hljs-params">()</span>;
}

<span class="hljs-comment">// å·¥å‚æ–¹æ³•ï¼šä¸ºä»€ä¹ˆç”¨å·¥å‚æ¨¡å¼ï¼Ÿ</span>
<span class="hljs-comment">// - æ ¹æ®ç­–ç•¥åŠ¨æ€åˆ›å»ºæ‰§è¡Œå™¨</span>
<span class="hljs-comment">// - éšè—åˆ›å»ºç»†èŠ‚</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> TaskExecutor <span class="hljs-title function_">create</span><span class="hljs-params">(Task task, ServiceNode serviceNode, UserContext userContext)</span> {
    <span class="hljs-type">ExecutionStrategy</span> <span class="hljs-variable">strategy</span> <span class="hljs-operator">=</span> task.getExecutionStrategy();
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">switch</span> (strategy) {
        <span class="hljs-keyword">case</span> SILENT -&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">SilentExecutor</span>(task, serviceNode, userContext);
        <span class="hljs-keyword">case</span> STREAMING -&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">StreamingExecutor</span>(task, serviceNode, userContext);
        <span class="hljs-keyword">default</span> -&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">SilentExecutor</span>(task, serviceNode, userContext);
    };
}
</code></pre>
<h4 data-id="heading-20">5.3 SilentExecutorå®ç°è¯¦è§£</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SilentExecutor</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">BaseTaskExecutor</span> {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> Map&lt;String, Object&gt; <span class="hljs-title function_">apply</span><span class="hljs-params">(WorkspaceState state)</span> {
        <span class="hljs-comment">// 1. å‘é€ä»»åŠ¡å¼€å§‹äº‹ä»¶ï¼šä¸ºä»€ä¹ˆéœ€è¦ï¼Ÿ</span>
        <span class="hljs-comment">// - è®©ç”¨æˆ·çŸ¥é“ä»»åŠ¡è¿›åº¦</span>
        <span class="hljs-comment">// - æä¾›å¯è§‚æµ‹æ€§</span>
        userContext.emit(TaskStatusEvent.builder()
            .type(EventType.TASK_START)
            .taskId(task.getId())
            .build());
        
        <span class="hljs-comment">// 2. è·å–ä»»åŠ¡è¾“å…¥ï¼šä¸ºä»€ä¹ˆéœ€è¦ï¼Ÿ</span>
        <span class="hljs-comment">// - ä»stateä¸­è·å–ç”¨æˆ·è¾“å…¥å’Œä¾èµ–ä»»åŠ¡çš„ç»“æœ</span>
        <span class="hljs-comment">// - ç»„è£…æˆå®Œæ•´çš„è¾“å…¥æ•°æ®</span>
        Map&lt;String, Object&gt; taskInput = getTaskInput(state);
        
        <span class="hljs-comment">// 3. è°ƒç”¨AIæœåŠ¡ï¼šä¸ºä»€ä¹ˆç”¨æµå¼è°ƒç”¨ï¼Ÿ</span>
        <span class="hljs-comment">// - å³ä½¿ä¸å‘ç”¨æˆ·è¾“å‡ºï¼Œæµå¼è°ƒç”¨ä¹Ÿèƒ½æä¾›æ›´å¥½çš„é”™è¯¯å¤„ç†</span>
        <span class="hljs-comment">// - å¯ä»¥å®æ—¶ç›‘æ§AIå“åº”</span>
        <span class="hljs-type">TokenStream</span> <span class="hljs-variable">tokenStream</span> <span class="hljs-operator">=</span> aiService.chat(Json.toJson(taskInput));
        
        <span class="hljs-comment">// 4. ç­‰å¾…å®Œæˆå¹¶æ”¶é›†ç»“æœ</span>
        <span class="hljs-type">StringBuilder</span> <span class="hljs-variable">resultBuilder</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuilder</span>();
        <span class="hljs-type">CountDownLatch</span> <span class="hljs-variable">latch</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">CountDownLatch</span>(<span class="hljs-number">1</span>);
        
        tokenStream.onCompleteResponse(e -&gt; {
            resultBuilder.append(e.aiMessage().text());
            latch.countDown();
        });
        tokenStream.start();
        latch.await();
        
        <span class="hljs-comment">// 5. ä¿å­˜ç»“æœåˆ°stateï¼šä¸ºä»€ä¹ˆéœ€è¦ï¼Ÿ</span>
        <span class="hljs-comment">// - åç»­ä»»åŠ¡å¯ä»¥ä»stateä¸­è·å–è¿™ä¸ªç»“æœ</span>
        <span class="hljs-comment">// - å®ç°ä»»åŠ¡é—´çš„æ•°æ®ä¼ é€’</span>
        Map&lt;String, Object&gt; stateUpdate = saveTaskResult(state, resultBuilder.toString());
        
        <span class="hljs-comment">// 6. å‘é€å®Œæˆäº‹ä»¶</span>
        userContext.emit(TaskStatusEvent.builder()
            .type(EventType.TASK_COMPLETE)
            .taskId(task.getId())
            .build());
        
        <span class="hljs-keyword">return</span> stateUpdate;  <span class="hljs-comment">// è¿”å›æ›´æ–°åçš„çŠ¶æ€</span>
    }
}
</code></pre>
<h4 data-id="heading-21">5.4 çŠ¶æ€ä¼ é€’æœºåˆ¶</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// åœ¨BaseTaskExecutorä¸­</span>
<span class="hljs-keyword">protected</span> Map&lt;String, Object&gt; <span class="hljs-title function_">getTaskInput</span><span class="hljs-params">(WorkspaceState state)</span> {
    Map&lt;String, Object&gt; taskInput = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
    
    <span class="hljs-comment">// 1. è·å–ç”¨æˆ·è¾“å…¥ï¼šä¸ºä»€ä¹ˆéœ€è¦ï¼Ÿ</span>
    <span class="hljs-comment">// - æŸäº›ä»»åŠ¡éœ€è¦ç›´æ¥ä½¿ç”¨ç”¨æˆ·è¾“å…¥</span>
    Optional&lt;String&gt; userMessage = state.userMessage();
    <span class="hljs-keyword">if</span> (userMessage.isPresent()) {
        taskInput.put(<span class="hljs-string">"userMessage"</span>, userMessage.get());
    }
    
    <span class="hljs-comment">// 2. è·å–ä¾èµ–ä»»åŠ¡çš„è¾“å‡ºï¼šä¸ºä»€ä¹ˆéœ€è¦ï¼Ÿ</span>
    <span class="hljs-comment">// - ä»»åŠ¡å¯èƒ½ä¾èµ–å…¶ä»–ä»»åŠ¡çš„ç»“æœ</span>
    <span class="hljs-comment">// - é€šè¿‡taskIdä»stateä¸­è·å–</span>
    <span class="hljs-type">TaskInputs</span> <span class="hljs-variable">inputs</span> <span class="hljs-operator">=</span> task.getInputs();
    <span class="hljs-keyword">if</span> (inputs != <span class="hljs-literal">null</span> &amp;&amp; inputs.getFromTask() != <span class="hljs-literal">null</span>) {
        <span class="hljs-keyword">for</span> (String fromTaskId : inputs.getFromTask()) {
            Optional&lt;Map&lt;String, Object&gt;&gt; fromTaskResult = state.value(fromTaskId);
            <span class="hljs-keyword">if</span> (fromTaskResult.isPresent()) {
                <span class="hljs-comment">// å°†ä¾èµ–ä»»åŠ¡çš„ç»“æœæ·»åŠ åˆ°è¾“å…¥ä¸­</span>
                taskInput.put(fromTaskId, fromTaskResult.get());
            }
        }
    }
    
    <span class="hljs-keyword">return</span> taskInput;
}

<span class="hljs-comment">// ä¿å­˜ä»»åŠ¡ç»“æœï¼šä¸ºä»€ä¹ˆéœ€è¦ï¼Ÿ</span>
<span class="hljs-comment">// - åç»­ä»»åŠ¡å¯ä»¥é€šè¿‡taskIdè·å–è¿™ä¸ªç»“æœ</span>
<span class="hljs-comment">// - å®ç°ä»»åŠ¡é—´çš„æ•°æ®ä¼ é€’</span>
<span class="hljs-keyword">protected</span> Map&lt;String, Object&gt; <span class="hljs-title function_">saveTaskResult</span><span class="hljs-params">(WorkspaceState state, String result)</span> {
    Map&lt;String, Object&gt; stateUpdate = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
    <span class="hljs-comment">// ä»¥taskIdä¸ºkeyä¿å­˜ç»“æœï¼Œè¿™æ ·ä¾èµ–ä»»åŠ¡å¯ä»¥é€šè¿‡taskIdè·å–</span>
    stateUpdate.put(task.getId(), result);
    <span class="hljs-keyword">return</span> stateUpdate;
}
</code></pre>
<hr/>
<h3 data-id="heading-22">å…­ã€å®Œæ•´æ‰§è¡Œæµç¨‹</h3>
<h4 data-id="heading-23">6.1 ç”¨æˆ·è¯·æ±‚åˆ°ç»“æœè¿”å›</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@PostMapping("/execute")</span>
<span class="hljs-keyword">public</span> Flux&lt;TaskStatusEvent&gt; <span class="hljs-title function_">execute</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> TaskExecuteRequest request)</span> {
    <span class="hljs-comment">// 1. æ„å»ºAgentç³»ç»Ÿï¼šä¸ºä»€ä¹ˆéœ€è¦ï¼Ÿ</span>
    <span class="hljs-comment">// - ä»æ•°æ®åº“åŠ è½½é…ç½®ï¼Œåˆå§‹åŒ–AIæœåŠ¡</span>
    <span class="hljs-comment">// - æ„å»ºOrchestratorå®ä¾‹</span>
    taskExecuteService.buildArmory(request.getOrchestratorId());
    
    <span class="hljs-comment">// 2. è·å–Orchestratorï¼šä¸ºä»€ä¹ˆéœ€è¦ï¼Ÿ</span>
    <span class="hljs-comment">// - OrchestratoråŒ…å«äº†Supervisorå’ŒWorkerçš„é…ç½®</span>
    <span class="hljs-type">Orchestrator</span> <span class="hljs-variable">orchestrator</span> <span class="hljs-operator">=</span> taskExecuteService.getOrchestrator(request.getOrchestratorId());
    
    <span class="hljs-comment">// 3. åˆ›å»ºç”¨æˆ·ä¸Šä¸‹æ–‡ï¼šä¸ºä»€ä¹ˆéœ€è¦ï¼Ÿ</span>
    <span class="hljs-comment">// - ç®¡ç†SSEäº‹ä»¶æµ</span>
    <span class="hljs-comment">// - æä¾›ç”¨æˆ·IDå’Œä¼šè¯IDç”¨äºè®°å¿†</span>
    <span class="hljs-type">UserContext</span> <span class="hljs-variable">userContext</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UserContext</span>();
    userContext.setUserId(request.getUserId());
    userContext.setSessionId(request.getSessionId());
    
    <span class="hljs-comment">// 4. å¯åŠ¨äº‹ä»¶åˆ†å‘å™¨ï¼šä¸ºä»€ä¹ˆéœ€è¦ï¼Ÿ</span>
    <span class="hljs-comment">// - å°†ä»»åŠ¡æ‰§è¡Œè¿‡ç¨‹ä¸­çš„äº‹ä»¶æ¨é€ç»™å‰ç«¯</span>
    <span class="hljs-comment">// - å®ç°å®æ—¶åé¦ˆ</span>
    userContext.startEventDispatcher(emitter);
    
    <span class="hljs-comment">// 5. å¼‚æ­¥æ‰§è¡Œï¼šä¸ºä»€ä¹ˆå¼‚æ­¥ï¼Ÿ</span>
    <span class="hljs-comment">// - ä¸é˜»å¡HTTPè¯·æ±‚çº¿ç¨‹</span>
    <span class="hljs-comment">// - é€šè¿‡SSEæµå¼è¿”å›ç»“æœ</span>
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; {
        orchestrator.execute(request.getMessage(), userContext);
        userContext.complete();
    }).start();
    
    <span class="hljs-keyword">return</span> Flux.create(emitter -&gt; {
        <span class="hljs-comment">// SSEäº‹ä»¶æµ</span>
    });
}
</code></pre>
<h4 data-id="heading-24">6.2 æ‰§è¡Œæ—¶åºå›¾</h4>
<pre><code class="hljs language-scss" lang="scss">ç”¨æˆ·è¯·æ±‚
  â†“
Controller<span class="hljs-selector-class">.execute</span>()
  â†“
TaskExecuteService<span class="hljs-selector-class">.buildArmory</span>()  <span class="hljs-selector-attr">[æ„å»ºAgentç³»ç»Ÿ]</span>
  â†“
Orchestrator<span class="hljs-selector-class">.execute</span>()
  â”œâ”€â†’ <span class="hljs-built_in">plan</span>()                      <span class="hljs-selector-attr">[Supervisorç”Ÿæˆè®¡åˆ’]</span>
  â”‚     â”œâ”€â†’ æ„å»ºæç¤ºè¯
  â”‚     â”œâ”€â†’ è°ƒç”¨Supervisor AI
  â”‚     â””â”€â†’ è§£æTaskPlan
  â”‚
  â”œâ”€â†’ <span class="hljs-built_in">buildGraph</span>()                <span class="hljs-selector-attr">[æ„å»ºæ‰§è¡Œå›¾]</span>
  â”‚     â”œâ”€â†’ åˆ›å»ºStateGraph
  â”‚     â”œâ”€â†’ æ·»åŠ èŠ‚ç‚¹ï¼ˆTaskExecutorï¼‰
  â”‚     â”œâ”€â†’ æ·»åŠ è¾¹ï¼ˆä¾èµ–å…³ç³»ï¼‰
  â”‚     â””â”€â†’ ç¼–è¯‘å›¾
  â”‚
  â””â”€â†’ graph<span class="hljs-selector-class">.invoke</span>()              <span class="hljs-selector-attr">[æ‰§è¡Œå›¾]</span>
        â”œâ”€â†’ START â†’ æ ¹èŠ‚ç‚¹
        â”œâ”€â†’ å¹¶è¡Œæ‰§è¡Œæ— ä¾èµ–ä»»åŠ¡
        â”œâ”€â†’ ç­‰å¾…ä¾èµ–å®Œæˆ
        â”œâ”€â†’ æ‰§è¡Œåç»­ä»»åŠ¡
        â””â”€â†’ å¶å­èŠ‚ç‚¹ â†’ END
</code></pre>
<hr/>
<h3 data-id="heading-25">ä¸ƒã€è®¾è®¡è¦ç‚¹æ€»ç»“</h3>
<h4 data-id="heading-26">7.1 ä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡ï¼Ÿ</h4>
<ol>
<li><strong>çŠ¶æ€å›¾æ¨¡å¼</strong>ï¼šç”¨å›¾ç»“æ„è¡¨è¾¾å¤æ‚çš„æ‰§è¡Œæµç¨‹ï¼Œç›´è§‚æ¸…æ™°</li>
<li><strong>Supervisor-Workeræ¨¡å¼</strong>ï¼šèŒè´£åˆ†ç¦»ï¼ŒSupervisorè§„åˆ’ï¼ŒWorkeræ‰§è¡Œ</li>
<li><strong>å¼‚æ­¥æ‰§è¡Œ</strong>ï¼šæé«˜æ•ˆç‡ï¼Œæ”¯æŒå¹¶è¡Œæ‰§è¡Œæ— ä¾èµ–ä»»åŠ¡</li>
<li><strong>çŠ¶æ€ç®¡ç†</strong>ï¼šé€šè¿‡WorkspaceStateç»Ÿä¸€ç®¡ç†æ•°æ®ï¼Œå®ç°ä»»åŠ¡é—´ä¼ é€’</li>
<li><strong>äº‹ä»¶é©±åŠ¨</strong>ï¼šé€šè¿‡äº‹ä»¶ç³»ç»Ÿæä¾›å¯è§‚æµ‹æ€§</li>
</ol>
<h4 data-id="heading-27">7.2 å…³é”®å®ç°æŠ€å·§</h4>
<ol>
<li><strong>ä¾èµ–è§£æ</strong>ï¼šé€šè¿‡<code>fromTask</code>åˆ—è¡¨è‡ªåŠ¨æ„å»ºä¾èµ–å…³ç³»</li>
<li><strong>æ ¹èŠ‚ç‚¹è¯†åˆ«</strong>ï¼šæ‰¾åˆ°æ— å‰ç½®ä¾èµ–çš„èŠ‚ç‚¹ä½œä¸ºå…¥å£</li>
<li><strong>å¶å­èŠ‚ç‚¹è¯†åˆ«</strong>ï¼šæ‰¾åˆ°æ— åç»­èŠ‚ç‚¹çš„èŠ‚ç‚¹ä½œä¸ºå‡ºå£</li>
<li><strong>çŠ¶æ€ä¼ é€’</strong>ï¼šä»¥taskIdä¸ºkeyä¿å­˜ç»“æœï¼Œä¾èµ–ä»»åŠ¡é€šè¿‡taskIdè·å–</li>
<li><strong>é”™è¯¯éš”ç¦»</strong>ï¼šæ¯ä¸ªèŠ‚ç‚¹ç‹¬ç«‹æ‰§è¡Œï¼Œå¤±è´¥ä¸å½±å“å…¶ä»–èŠ‚ç‚¹</li>
</ol>
<hr/>
<h3 data-id="heading-28">æ€»ç»“</h3>
<p>æœ¬æ–‡æ·±å…¥è§£æäº†åŸºäºLangGraph4jçš„å¤šAgentç¼–æ’ç³»ç»Ÿï¼Œé‡ç‚¹é˜è¿°äº†ï¼š</p>
<ol>
<li><strong>ä¸ºä»€ä¹ˆé€‰æ‹©LangGraph4j</strong>ï¼šè§£å†³ä»»åŠ¡ä¾èµ–ã€å¹¶è¡Œæ‰§è¡Œã€çŠ¶æ€å…±äº«ç­‰æ ¸å¿ƒé—®é¢˜</li>
<li><strong>ä¸ºä»€ä¹ˆé‡‡ç”¨Supervisor-Workeræ¨¡å¼</strong>ï¼šå®ç°åŠ¨æ€è§„åˆ’ã€èŒè´£åˆ†ç¦»ã€æ˜“äºæ‰©å±•</li>
<li><strong>å¦‚ä½•å®ç°ä»»åŠ¡è§„åˆ’</strong>ï¼šSupervisoråˆ†æéœ€æ±‚ï¼Œç”Ÿæˆç»“æ„åŒ–çš„TaskPlan</li>
<li><strong>å¦‚ä½•æ„å»ºæ‰§è¡Œå›¾</strong>ï¼šGraphBuilderå°†TaskPlanè½¬æ¢ä¸ºå¯æ‰§è¡Œçš„StateGraph</li>
<li><strong>å¦‚ä½•æ‰§è¡Œä»»åŠ¡</strong>ï¼šTaskExecutorå°è£…æ‰§è¡Œé€»è¾‘ï¼Œæ”¯æŒé™é»˜å’Œæµå¼ä¸¤ç§æ¨¡å¼</li>
</ol>
<p>é€šè¿‡è¿™ç§è®¾è®¡ï¼Œæˆ‘ä»¬å®ç°äº†<strong>å£°æ˜å¼çš„å¤šAgentç¼–æ’</strong>ï¼Œè®©å¤æ‚çš„å¤šAgentåä½œå˜å¾—ç®€å•å¯æ§ã€‚</p>
<hr/>
<p><strong>å…³é”®ä»£ç ä½ç½®</strong>ï¼š</p>
<ul>
<li><code>Orchestrator.java</code>: ç¼–æ’å™¨æ ¸å¿ƒé€»è¾‘</li>
<li><code>GraphBuilder.java</code>: å›¾æ„å»ºå®ç°</li>
<li><code>TaskExecutor.java</code>: ä»»åŠ¡æ‰§è¡Œå™¨æ¥å£</li>
<li><code>WorkspaceState.java</code>: çŠ¶æ€ç®¡ç†</li>
<li><code>TaskExecuteController.java</code>: REST APIå…¥å£</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸš€ å‘Šåˆ«æ‰‹å†™æ³¨é‡Šï¼Laravel è‡ªå®šä¹‰å‘½ä»¤åˆ›å»ºæ¨¡å‹æ—¶è‡ªåŠ¨ç”Ÿæˆ @property å±æ€§æç¤º]]></title>    <link>https://juejin.cn/post/7576923573778268202</link>    <guid>https://juejin.cn/post/7576923573778268202</guid>    <pubDate>2025-11-27T03:01:28.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576923573778268202" data-draft-id="7576888607481020435" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸš€ å‘Šåˆ«æ‰‹å†™æ³¨é‡Šï¼Laravel è‡ªå®šä¹‰å‘½ä»¤åˆ›å»ºæ¨¡å‹æ—¶è‡ªåŠ¨ç”Ÿæˆ @property å±æ€§æç¤º"/> <meta itemprop="keywords" content="Laravel"/> <meta itemprop="datePublished" content="2025-11-27T03:01:28.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¾äº†ä¸ªæ—§"/> <meta itemprop="url" content="https://juejin.cn/user/1385831726583448"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸš€ å‘Šåˆ«æ‰‹å†™æ³¨é‡Šï¼Laravel è‡ªå®šä¹‰å‘½ä»¤åˆ›å»ºæ¨¡å‹æ—¶è‡ªåŠ¨ç”Ÿæˆ @property å±æ€§æç¤º
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1385831726583448/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¾äº†ä¸ªæ—§
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-27T03:01:28.000Z" title="Thu Nov 27 2025 03:01:28 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    8
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p><strong>å‰è¨€</strong></p>
<p>åœ¨ Laravel å¼€å‘ä¸­ï¼ŒEloquent Model æ˜¯æˆ‘ä»¬æœ€å¸¸ç”¨çš„ç»„ä»¶ã€‚é€šè¿‡ <code>php artisan make:model</code> åˆ›å»ºæ¨¡å‹åï¼Œæœ€å¤´ç–¼çš„å¾€å¾€æ˜¯ IDEï¼ˆå¦‚ PhpStorm æˆ– VSCodeï¼‰æ— æ³•è¯†åˆ«æ•°æ®åº“å­—æ®µï¼Œå¯¼è‡´æ²¡æœ‰ä»£ç æç¤ºã€‚</p>
<p>è™½ç„¶æœ‰ <code>laravel-ide-helper</code> è¿™æ ·çš„ç¥å™¨ï¼Œä½†æ¯æ¬¡æ–°å»ºæ¨¡å‹åéƒ½è¦è¿è¡Œä¸€é <code>ide-helper:models</code> æ€»æ„Ÿè§‰ä¸å¤Ÿâ€œä¸æ»‘â€ã€‚</p>
<p><strong>å¦‚æœèƒ½åœ¨æ‰§è¡Œ <code>make:model</code> çš„é‚£ä¸€ç¬é—´ï¼Œç›´æ¥è¿æ¥æ•°æ®åº“ï¼ŒæŠŠè¡¨ç»“æ„è¯»å–å‡ºæ¥ï¼Œè‡ªåŠ¨ç”Ÿæˆ <code>@property</code> æ³¨é‡Šï¼Œå²‚ä¸ç¾å“‰ï¼Ÿ</strong></p>
<p>ä»Šå¤©å°±åˆ†äº«ä¸€ä¸ªå®æˆ˜ä¸­çš„è‡ªå®šä¹‰ Commandï¼Œå®ç°â€œæ¨¡å‹åˆ›å»ºå³è‡ªåŠ¨æ‹¥æœ‰è¡¥å…¨â€ã€‚</p>
</blockquote>
<h2 data-id="heading-0">ğŸ¤” ç—›ç‚¹åˆ†æ</h2>
<p>é€šå¸¸æˆ‘ä»¬åˆ›å»ºä¸€ä¸ª User æ¨¡å‹ï¼Œç”Ÿæˆçš„æ–‡ä»¶æ˜¯ç©ºçš„ï¼š</p>
<p>PHP</p>
<pre><code class="hljs language-scala" lang="scala"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Model</span></span>
{
    use <span class="hljs-type">HasFactory</span>;
}
</code></pre>
<p>æˆ‘ä»¬åœ¨å†™ä»£ç æ—¶ <code>$user-&gt;...</code> åé¢ä¸€ç‰‡ç©ºç™½ã€‚ä¸ºäº†æœ‰æç¤ºï¼Œæˆ‘ä»¬éœ€è¦æ‰‹åŠ¨å»æ•°æ®åº“çœ‹å­—æ®µï¼Œç„¶åå†™æˆè¿™æ ·ï¼š</p>
<p>PHP</p>
<pre><code class="hljs language-scala" lang="scala"><span class="hljs-comment">/**
 * @property int $id
 * @property string $name
 * @property string $email
 * @property \Illuminate\Support\Carbon $created_at
 */</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Model</span> </span>{ ... }
</code></pre>
<p>è¿™ä¸ªè¿‡ç¨‹ç¹çä¸”å®¹æ˜“å‡ºé”™ã€‚ä¸‹é¢çš„ä»£ç å°†æŠŠè¿™ä¸ªè¿‡ç¨‹è‡ªåŠ¨åŒ–ã€‚</p>
<h2 data-id="heading-1">ğŸ’» æ ¸å¿ƒä»£ç å®ç°</h2>
<p>æ–°å»ºä¸€ä¸ªå‘½ä»¤æ–‡ä»¶ <code>app/Console/Commands/MakeModelWithProperties.php</code> (ç±»åå¯è‡ªå®š)ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<p>PHP</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-meta">&lt;?php</span>

<span class="hljs-keyword">namespace</span> <span class="hljs-title class_">App</span>\<span class="hljs-title class_">Console</span>\<span class="hljs-title class_">Commands</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">Illuminate</span>\<span class="hljs-title">Console</span>\<span class="hljs-title">GeneratorCommand</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Illuminate</span>\<span class="hljs-title">Contracts</span>\<span class="hljs-title">Filesystem</span>\<span class="hljs-title">FileNotFoundException</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Illuminate</span>\<span class="hljs-title">Support</span>\<span class="hljs-title">Facades</span>\<span class="hljs-title">DB</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Illuminate</span>\<span class="hljs-title">Support</span>\<span class="hljs-title">Facades</span>\<span class="hljs-title">Schema</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Illuminate</span>\<span class="hljs-title">Support</span>\<span class="hljs-title">Str</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Console</span>\<span class="hljs-title">Input</span>\<span class="hljs-title">InputOption</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MakeModelWithProperties</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">GeneratorCommand</span>
</span>{
    <span class="hljs-comment">// è¦†ç›–åŸç”Ÿå‘½ä»¤ï¼Œæˆ–è€…å–ä¸ªåˆ«åå¦‚ make:model:plus</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-variable">$name</span> = <span class="hljs-string">'make:model'</span>; 
    
    <span class="hljs-keyword">protected</span> <span class="hljs-variable">$description</span> = <span class="hljs-string">'åˆ›å»ºåŒ…å« @property æ³¨é‡Šçš„ Eloquent æ¨¡å‹ç±»'</span>;
    
    <span class="hljs-keyword">protected</span> <span class="hljs-variable">$type</span> = <span class="hljs-string">'Model'</span>;

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">handle</span>(<span class="hljs-params"/>): <span class="hljs-title">void</span>
    </span>{
        <span class="hljs-comment">// 1. å¤„ç†æ•°æ®åº“è¿æ¥</span>
        <span class="hljs-variable">$conn</span> = <span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-title function_ invoke__">normalizeConnectionOption</span>(<span class="hljs-variable">$this</span>-&gt;<span class="hljs-title function_ invoke__">option</span>(<span class="hljs-string">'connection'</span>));
        <span class="hljs-keyword">if</span> (!<span class="hljs-variable">$conn</span>) {
            <span class="hljs-variable">$conn</span> = <span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-title function_ invoke__">promptForConnection</span>();
        }
        <span class="hljs-variable language_">$this</span>-&gt;input-&gt;<span class="hljs-title function_ invoke__">setOption</span>(<span class="hljs-string">'connection'</span>, <span class="hljs-variable">$conn</span>);

        <span class="hljs-comment">// 2. è°ƒç”¨çˆ¶ç±»é€»è¾‘ç”Ÿæˆæ–‡ä»¶</span>
        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">parent</span>::<span class="hljs-title function_ invoke__">handle</span>() === <span class="hljs-literal">false</span> &amp;&amp; !<span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-title function_ invoke__">option</span>(<span class="hljs-string">'force'</span>)) {
            <span class="hljs-keyword">return</span>;
        }

        <span class="hljs-comment">// 3. å¤„ç†å¯é€‰å‚æ•° (Migration, Factory ç­‰)</span>
        <span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-title function_ invoke__">handleOptionalGenerators</span>();
    }

    <span class="hljs-comment">/**
     * æ ¸å¿ƒé€»è¾‘ï¼šåœ¨æ„å»ºç±»æ—¶æ³¨å…¥æ³¨é‡Š
     */</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">buildClass</span>(<span class="hljs-params"><span class="hljs-variable">$name</span></span>)
    </span>{
        <span class="hljs-variable">$stub</span> = <span class="hljs-built_in">parent</span>::<span class="hljs-title function_ invoke__">buildClass</span>(<span class="hljs-variable">$name</span>);

        <span class="hljs-variable">$table</span> = <span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-title function_ invoke__">inferTableName</span>(<span class="hljs-variable">$name</span>);
        <span class="hljs-variable">$connection</span> = (<span class="hljs-keyword">string</span>)<span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-title function_ invoke__">option</span>(<span class="hljs-string">'connection'</span>);
        
        <span class="hljs-comment">// ç”Ÿæˆ PHPDoc</span>
        <span class="hljs-variable">$propertiesDoc</span> = <span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-title function_ invoke__">generatePropertiesDoc</span>(<span class="hljs-variable">$table</span>, <span class="hljs-variable">$connection</span>);

        <span class="hljs-comment">// æ›¿æ¢ Stub ä¸­çš„å ä½ç¬¦ï¼Œæˆ–è€…é€šè¿‡æ­£åˆ™æ’å…¥åˆ° class å®šä¹‰ä¹‹å‰</span>
        <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Str</span>::<span class="hljs-title function_ invoke__">contains</span>(<span class="hljs-variable">$stub</span>, <span class="hljs-string">'{{ propertiesDoc }}'</span>)) {
            <span class="hljs-variable">$stub</span> = <span class="hljs-title function_ invoke__">str_replace</span>(<span class="hljs-string">'{{ propertiesDoc }}'</span>, <span class="hljs-variable">$propertiesDoc</span>, <span class="hljs-variable">$stub</span>);
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-comment">// é»˜è®¤ stub æ²¡æœ‰å ä½ç¬¦ï¼Œä½¿ç”¨æ­£åˆ™å¼ºæ’</span>
            <span class="hljs-variable">$stub</span> = <span class="hljs-title function_ invoke__">preg_replace</span>(<span class="hljs-string">'/(\n\s*class\s+[^\s]+\s+extends)/'</span>, <span class="hljs-string">"\n/**\n<span class="hljs-subst">{$propertiesDoc}</span>\n */<span class="hljs-subst">$1</span>"</span>, <span class="hljs-variable">$stub</span>, <span class="hljs-number">1</span>);
        }

        <span class="hljs-comment">// è‡ªåŠ¨æ³¨å…¥è¡¨åå’Œä¸»é”®</span>
        <span class="hljs-variable">$primaryKey</span> = <span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-title function_ invoke__">getPrimaryKeyColumn</span>(<span class="hljs-variable">$table</span>, <span class="hljs-variable">$connection</span>) ?? <span class="hljs-string">'id'</span>;
        <span class="hljs-comment">// ... (æ­¤å¤„çœç•¥éƒ¨åˆ†æ›¿æ¢é€»è¾‘ï¼Œè§†å…·ä½“ Stub è€Œå®š)</span>

        <span class="hljs-keyword">return</span> <span class="hljs-variable">$stub</span>;
    }

    <span class="hljs-comment">/**
     * ç”Ÿæˆå±æ€§æ³¨é‡Šæ–‡æ¡£
     */</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">generatePropertiesDoc</span>(<span class="hljs-params"><span class="hljs-keyword">string</span> <span class="hljs-variable">$table</span>, <span class="hljs-keyword">string</span> <span class="hljs-variable">$connection</span></span>)
    </span>{
        <span class="hljs-keyword">try</span> {
            <span class="hljs-variable">$schema</span> = <span class="hljs-title class_">Schema</span>::<span class="hljs-title function_ invoke__">connection</span>(<span class="hljs-variable">$connection</span>);
            <span class="hljs-keyword">if</span> (<span class="hljs-variable">$schema</span>-&gt;<span class="hljs-title function_ invoke__">hasTable</span>(<span class="hljs-variable">$table</span>)) {
                <span class="hljs-variable">$columns</span> = <span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-title function_ invoke__">getColumnsMeta</span>(<span class="hljs-variable">$table</span>, <span class="hljs-variable">$connection</span>);
                
                <span class="hljs-comment">// è·å–è¡¨æ³¨é‡Š</span>
                <span class="hljs-variable">$prefix</span> = <span class="hljs-title function_ invoke__">config</span>(<span class="hljs-string">"database.connections.<span class="hljs-subst">$connection</span>.prefix"</span>) ?? <span class="hljs-string">''</span>;
                <span class="hljs-variable">$tableStatus</span> = DB::<span class="hljs-title function_ invoke__">connection</span>(<span class="hljs-variable">$connection</span>)-&gt;<span class="hljs-title function_ invoke__">select</span>(<span class="hljs-string">"SHOW TABLE STATUS WHERE NAME = ?"</span>, [<span class="hljs-variable">$prefix</span> . <span class="hljs-variable">$table</span>]);
                <span class="hljs-variable">$tableComment</span> = <span class="hljs-variable">$tableStatus</span>[<span class="hljs-number">0</span>]-&gt;Comment ?? <span class="hljs-string">''</span>;

                <span class="hljs-variable">$lines</span> = [];
                <span class="hljs-keyword">if</span> (<span class="hljs-variable">$tableComment</span>) <span class="hljs-variable">$lines</span>[] = <span class="hljs-string">' * '</span> . <span class="hljs-variable">$tableComment</span>;
                
                <span class="hljs-keyword">foreach</span> (<span class="hljs-variable">$columns</span> <span class="hljs-keyword">as</span> <span class="hljs-variable">$col</span>) {
                    <span class="hljs-variable">$phpType</span> = <span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-title function_ invoke__">mapDbTypeToPhpType</span>(<span class="hljs-variable">$col</span>[<span class="hljs-string">'type'</span>], <span class="hljs-variable">$col</span>[<span class="hljs-string">'name'</span>]);
                    <span class="hljs-variable">$nullable</span> = <span class="hljs-variable">$col</span>[<span class="hljs-string">'nullable'</span>] ? <span class="hljs-string">'|null'</span> : <span class="hljs-string">''</span>;
                    <span class="hljs-variable">$comment</span> = <span class="hljs-variable">$col</span>[<span class="hljs-string">'comment'</span>] ? <span class="hljs-string">' '</span> . <span class="hljs-variable">$col</span>[<span class="hljs-string">'comment'</span>] : <span class="hljs-string">''</span>;
                    <span class="hljs-variable">$lines</span>[] = <span class="hljs-string">" * @property <span class="hljs-subst">{$phpType}</span><span class="hljs-subst">{$nullable}</span> $<span class="hljs-subst">{$col['name']}</span><span class="hljs-subst">{$comment}</span>"</span>;
                }
                <span class="hljs-keyword">return</span> <span class="hljs-title function_ invoke__">implode</span>(<span class="hljs-string">"\n"</span>, <span class="hljs-variable">$lines</span>);
            }
            <span class="hljs-keyword">return</span> <span class="hljs-string">' *'</span>;
        } <span class="hljs-keyword">catch</span> (\<span class="hljs-built_in">Throwable</span> <span class="hljs-variable">$e</span>) {
            <span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-title function_ invoke__">warn</span>(<span class="hljs-string">'è·å–è¡¨ä¿¡æ¯å¤±è´¥: '</span> . <span class="hljs-variable">$e</span>-&gt;<span class="hljs-title function_ invoke__">getMessage</span>());
            <span class="hljs-keyword">return</span> <span class="hljs-string">' *'</span>;
        }
    }

    <span class="hljs-comment">/**
     * è·å–åˆ—å…ƒæ•°æ® (ç›´æ¥æŸ¥è¯¢ information_schema ä»¥è·å–æ›´è¯¦ç»†ä¿¡æ¯)
     */</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getColumnsMeta</span>(<span class="hljs-params"><span class="hljs-keyword">string</span> <span class="hljs-variable">$table</span>, <span class="hljs-keyword">string</span> <span class="hljs-variable">$connection</span></span>): <span class="hljs-title">array</span>
    </span>{
        <span class="hljs-variable">$conn</span> = DB::<span class="hljs-title function_ invoke__">connection</span>(<span class="hljs-variable">$connection</span>);
        <span class="hljs-variable">$prefix</span> = <span class="hljs-title function_ invoke__">config</span>(<span class="hljs-string">"database.connections.<span class="hljs-subst">$connection</span>.prefix"</span>) ?? <span class="hljs-string">''</span>;

        <span class="hljs-variable">$rows</span> = <span class="hljs-variable">$conn</span>-&gt;<span class="hljs-title function_ invoke__">select</span>(
            <span class="hljs-string">'select COLUMN_NAME as name, DATA_TYPE as type, IS_NULLABLE as nullable, COLUMN_COMMENT as comment 
             from information_schema.columns 
             where table_schema = database() and table_name = ? order by ORDINAL_POSITION'</span>,
            [<span class="hljs-variable">$prefix</span> . <span class="hljs-variable">$table</span>]
        );

        <span class="hljs-keyword">return</span> <span class="hljs-title function_ invoke__">array_map</span>(function (<span class="hljs-variable">$r</span>) {
            <span class="hljs-keyword">return</span> [
                <span class="hljs-string">'name'</span>     =&gt; <span class="hljs-variable">$r</span>-&gt;name,
                <span class="hljs-string">'type'</span>     =&gt; <span class="hljs-title function_ invoke__">strtolower</span>(<span class="hljs-variable">$r</span>-&gt;type),
                <span class="hljs-string">'nullable'</span> =&gt; <span class="hljs-title function_ invoke__">strtoupper</span>(<span class="hljs-variable">$r</span>-&gt;nullable ?? <span class="hljs-string">'YES'</span>) === <span class="hljs-string">'YES'</span>,
                <span class="hljs-string">'comment'</span>  =&gt; <span class="hljs-variable">$r</span>-&gt;comment ?? <span class="hljs-string">''</span>,
            ];
        }, <span class="hljs-variable">$rows</span>);
    }

    <span class="hljs-comment">/**
     * æ•°æ®åº“ç±»å‹æ˜ å°„åˆ° PHP ç±»å‹
     */</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">mapDbTypeToPhpType</span>(<span class="hljs-params">?<span class="hljs-keyword">string</span> <span class="hljs-variable">$dbType</span>, <span class="hljs-keyword">string</span> <span class="hljs-variable">$column</span></span>): <span class="hljs-title">string</span>
    </span>{
        <span class="hljs-keyword">if</span> (<span class="hljs-title function_ invoke__">in_array</span>(<span class="hljs-variable">$column</span>, [<span class="hljs-string">'created_at'</span>, <span class="hljs-string">'updated_at'</span>, <span class="hljs-string">'deleted_at'</span>])) {
            <span class="hljs-keyword">return</span> <span class="hljs-string">'\Illuminate\Support\Carbon'</span>;
        }

        <span class="hljs-keyword">return</span> <span class="hljs-keyword">match</span> (<span class="hljs-literal">true</span>) {
            <span class="hljs-title function_ invoke__">str_contains</span>(<span class="hljs-variable">$dbType</span>, <span class="hljs-string">'int'</span>) =&gt; <span class="hljs-string">'int'</span>,
            <span class="hljs-title function_ invoke__">in_array</span>(<span class="hljs-variable">$dbType</span>, [<span class="hljs-string">'decimal'</span>, <span class="hljs-string">'float'</span>, <span class="hljs-string">'double'</span>]) =&gt; <span class="hljs-string">'float'</span>,
            <span class="hljs-title function_ invoke__">in_array</span>(<span class="hljs-variable">$dbType</span>, [<span class="hljs-string">'json'</span>]) =&gt; <span class="hljs-string">'array'</span>,
            <span class="hljs-title function_ invoke__">in_array</span>(<span class="hljs-variable">$dbType</span>, [<span class="hljs-string">'date'</span>, <span class="hljs-string">'datetime'</span>, <span class="hljs-string">'timestamp'</span>]) =&gt; <span class="hljs-string">'\Illuminate\Support\Carbon'</span>,
            <span class="hljs-keyword">default</span> =&gt; <span class="hljs-string">'string'</span>,
        };
    }

    <span class="hljs-comment">// ... å…¶ä»–è¾…åŠ©å‡½æ•°å¦‚ inferTableName, promptForConnection ç­‰è¯·å‚è€ƒå®Œæ•´æºç </span>
    
    <span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getStub</span>(<span class="hljs-params"/>)
    </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-title function_ invoke__">resolveStubPath</span>(<span class="hljs-string">'/stubs/model.stub'</span>);
    }
}
</code></pre>
<h2 data-id="heading-2">ğŸ¯ æ•ˆæœæ¼”ç¤º</h2>
<p>å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ª <code>users</code> è¡¨ï¼Œç»“æ„å¦‚ä¸‹ï¼š</p>
<ul>
<li><code>id</code>: bigint (PK)</li>
<li><code>username</code>: varchar, comment 'ç”¨æˆ·å'</li>
<li><code>is_active</code>: tinyint</li>
<li><code>created_at</code>: timestamp</li>
</ul>
<p>åœ¨å‘½ä»¤è¡Œæ‰§è¡Œï¼š</p>
<p>Bash</p>
<pre><code class="hljs language-ini" lang="ini">php artisan make:model User <span class="hljs-attr">--connection</span>=mysql
</code></pre>
<p>ç”Ÿæˆçš„ä»£ç å°†è‡ªåŠ¨å˜ä¸ºï¼š</p>
<p>PHP</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-meta">&lt;?php</span>

<span class="hljs-keyword">namespace</span> <span class="hljs-title class_">App</span>\<span class="hljs-title class_">Models</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">Illuminate</span>\<span class="hljs-title">Database</span>\<span class="hljs-title">Eloquent</span>\<span class="hljs-title">Model</span>;

<span class="hljs-comment">/**
 * ç”¨æˆ·è¡¨
 * <span class="hljs-doctag">@property</span> int $id
 * <span class="hljs-doctag">@property</span> string $username ç”¨æˆ·å
 * <span class="hljs-doctag">@property</span> int $is_active
 * <span class="hljs-doctag">@property</span> \Illuminate\Support\Carbon|null $created_at
 * <span class="hljs-doctag">@property</span> \Illuminate\Support\Carbon|null $updated_at
 */</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Model</span>
</span>{
    <span class="hljs-comment">// ...</span>
}
</code></pre>
<p>ç°åœ¨ï¼Œä½ åœ¨ Controller é‡Œè¾“å…¥ <code>$user-&gt;</code>ï¼ŒIDE ç«‹åˆ»å°±ä¼šåˆ—å‡º <code>username</code> å’Œ <code>is_active</code>ï¼Œå¼€å‘æ•ˆç‡ç¬é—´æå‡ï¼</p>
<h2 data-id="heading-3">ğŸ’¡ å®ç°ç»†èŠ‚è§£æ</h2>
<ol>
<li>
<p>æ­£åˆ™æ›¿æ¢ vs Stub å ä½ç¬¦ï¼š</p>
<p>Laravel é»˜è®¤çš„ model.stub å¹¶æ²¡æœ‰ {{ propertiesDoc }} å ä½ç¬¦ã€‚ä»£ç ä¸­åšäº†ä¸€ä¸ªå…¼å®¹å¤„ç†ï¼š</p>
<ul>
<li>å¦‚æœä½ å‘å¸ƒäº† stubs (<code>php artisan stub:publish</code>) å¹¶åœ¨é‡Œé¢åŠ äº†å ä½ç¬¦ï¼Œå®ƒä¼šç²¾å‡†æ›¿æ¢ã€‚</li>
<li>å¦‚æœæ²¡æœ‰ï¼Œå®ƒä¼šç”¨æ­£åˆ™ <code>preg_replace</code> å¼ºè¡ŒæŠŠæ³¨é‡Šæ’å…¥åˆ° <code>class Xxx extends</code> çš„ä¸Šæ–¹ã€‚</li>
</ul>
</li>
<li>
<p>å¤šæ€ä¸Pivotæ”¯æŒï¼š</p>
<p>ä»£ç ä¸­ä¿ç•™äº†å¯¹ --pivot å’Œ --morph-pivot çš„æ”¯æŒï¼Œç¡®ä¿ç”Ÿæˆä¸­é—´è¡¨æ¨¡å‹æ—¶ä¹Ÿèƒ½æ­£å¸¸å·¥ä½œã€‚</p>
</li>
</ol>
<h2 data-id="heading-4">ğŸ“¦ å¦‚ä½•åœ¨ä½ çš„é¡¹ç›®ä¸­ä½¿ç”¨</h2>
<ol>
<li>åœ¨ <code>app/Console/Commands</code> ä¸‹æ–°å»º <code>MakeModelCommand.php</code>ã€‚</li>
<li>å°†ä¸Šè¿°ä»£ç ï¼ˆåŠå¿…è¦çš„ importï¼‰ç²˜è´´è¿›å»ã€‚</li>
<li>åœ¨ <code>app/Console/Kernel.php</code> ä¸­æ³¨å†Œï¼ˆLaravel 11 å¯å¿½ç•¥ï¼Œä¼šè‡ªåŠ¨å‘ç°ï¼‰ã€‚</li>
<li>ç¡®ä¿ä½ çš„æ•°æ®åº“å·²ç»å»ºå¥½è¡¨ï¼ˆå› ä¸ºå®ƒæ˜¯<strong>Database First</strong>é€»è¾‘ï¼Œå…ˆæœ‰è¡¨ï¼Œåç”Ÿæˆå¸¦æ³¨é‡Šçš„æ¨¡å‹ï¼‰ã€‚</li>
</ol>
<hr/>
<p><em>Happy Coding!</em> ğŸš€</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å•æœºå‹æµ‹ä»ç™¾åˆ°ä¸‰åƒï¼šä¸€æ¬¡çŸ­é“¾è·³è½¬æœåŠ¡çš„å…¨é“¾è·¯æ€§èƒ½ä¼˜åŒ–å®æˆ˜]]></title>    <link>https://juejin.cn/post/7576923573778382890</link>    <guid>https://juejin.cn/post/7576923573778382890</guid>    <pubDate>2025-11-27T03:13:32.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576923573778382890" data-draft-id="7574916588719210538" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å•æœºå‹æµ‹ä»ç™¾åˆ°ä¸‰åƒï¼šä¸€æ¬¡çŸ­é“¾è·³è½¬æœåŠ¡çš„å…¨é“¾è·¯æ€§èƒ½ä¼˜åŒ–å®æˆ˜"/> <meta itemprop="keywords" content="åç«¯,æ€§èƒ½ä¼˜åŒ–"/> <meta itemprop="datePublished" content="2025-11-27T03:13:32.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è™å­_layor"/> <meta itemprop="url" content="https://juejin.cn/user/1109832819826707"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å•æœºå‹æµ‹ä»ç™¾åˆ°ä¸‰åƒï¼šä¸€æ¬¡çŸ­é“¾è·³è½¬æœåŠ¡çš„å…¨é“¾è·¯æ€§èƒ½ä¼˜åŒ–å®æˆ˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1109832819826707/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è™å­_layor
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-27T03:13:32.000Z" title="Thu Nov 27 2025 03:13:32 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h5 data-id="heading-0">ä¸€ã€é¡¹ç›®èƒŒæ™¯ä¸åˆå§‹é—®é¢˜</h5>
<p>æœ¬é¡¹ç›®çš„æ ¸å¿ƒåŠŸèƒ½æ˜¯æä¾›çŸ­é“¾è·³è½¬æœåŠ¡ã€‚é™¤äº†åŸºæœ¬çš„è·³è½¬ï¼Œè¿˜éœ€è¦ç²¾ç¡®è®°å½•æ¯ä¸€æ¬¡ç‚¹å‡»äº‹ä»¶ï¼ŒåŒ…æ‹¬æ¥æºã€è®¾å¤‡ã€IP ç­‰ä¿¡æ¯ã€‚</p>
<ul>
<li><strong>éƒ¨ç½²æ¶æ„</strong>: é¡¹ç›®å‰åç«¯åœ¨æœ¬åœ°è¿è¡Œï¼ŒRedis éƒ¨ç½²åœ¨è¿œç¨‹äº‘æœåŠ¡å™¨ï¼ŒMySQL åœ¨æœ¬åœ°ã€‚</li>
<li><strong>æ€§èƒ½ç—›ç‚¹</strong>: åˆå§‹è®¾è®¡ä¸­ï¼Œæ¯æ¬¡è·³è½¬ (<code>302 Redirect</code>) éƒ½ä¼šåŒæ­¥æ‰§è¡Œä¸¤æ¬¡æ•°æ®åº“å†™æ“ä½œï¼ˆå¢åŠ å½“æ—¥ç‚¹å‡»æ•°å’Œæ€»ç‚¹å‡»æ•°ï¼‰ï¼Œå¯¼è‡´ä¸¥é‡çš„æ€§èƒ½ç“¶é¢ˆã€‚</li>
<li><strong>æŠ€æœ¯è€ƒé‡</strong>: ä¹‹æ‰€ä»¥æœªä½¿ç”¨ Dockerï¼Œæ˜¯å› ä¸ºåœ¨å½“æ—¶çš„ç¯å¢ƒä¸‹ï¼Œå®¹å™¨ç½‘ç»œå¸¦æ¥çš„é¢å¤–å¼€é”€ï¼ˆç‰¹åˆ«æ˜¯è®¿é—®è¿œç«¯ Redis çš„ 58ms RTTï¼‰è¢«è®¤ä¸ºæ˜¯ä¸å¯æ¥å—çš„ã€‚</li>
</ul>
<ol>
<li>åˆå§‹åŒæ­¥å†™æ“ä½œ</li>
</ol>
<pre><code class="hljs language-Java" lang="Java">    <span class="hljs-meta">@Async</span>
Â  Â  <span class="hljs-meta">@Transactional</span>
Â  Â  <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">recordClick</span><span class="hljs-params">(String shortCode)</span> {
        <span class="hljs-comment">//å½“æ—¥ç‚¹å‡»æ•°</span>
Â  Â  Â  Â dailyClickRepo.incrementClick(shortCode);
Â  Â  Â  Â  <span class="hljs-comment">//æ€»æ•°å¢åŠ ä¸€æ¬¡</span>
Â  Â  Â  Â  shortUrlRepository.incrementClickCount(shortCode);
Â  Â  }
</code></pre>
<p>2.è®°å½•ç‚¹å‡»äº‹ä»¶ï¼Œè§£æç”¨æˆ·ä¿¡æ¯</p>
<pre><code class="hljs language-Java" lang="Java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">recordClickEvent</span><span class="hljs-params">(String shortCode, HttpServletRequest request)</span> {
    <span class="hljs-type">String</span> <span class="hljs-variable">referer</span> <span class="hljs-operator">=</span> request.getHeader(<span class="hljs-string">"Referer"</span>);
    <span class="hljs-type">String</span> <span class="hljs-variable">ua</span> <span class="hljs-operator">=</span> request.getHeader(<span class="hljs-string">"User-Agent"</span>);
    <span class="hljs-type">String</span> <span class="hljs-variable">ip</span> <span class="hljs-operator">=</span> extractIp(request);
    <span class="hljs-type">String</span> <span class="hljs-variable">host</span> <span class="hljs-operator">=</span> extractHost(referer);
    <span class="hljs-type">String</span> <span class="hljs-variable">device</span> <span class="hljs-operator">=</span> detectDevice(ua);
    clickRecorderService.recordClickEvent(shortCode, referer, ua, ip, host, device);
}
</code></pre>
<h3 data-id="heading-1">äºŒã€å‹æµ‹å¯¹æ¯”</h3>
<p><strong>1.æ³¨é‡Šä¸¤æ¬¡å†™æ“ä½œ</strong></p>
<p>å‹æµ‹ç»“æœæ˜¾ç¤ºï¼š</p>
<ul>
<li><strong>ååé‡ (RPS)</strong> : ç¨³å®šä¸”é«˜ã€‚</li>
<li><strong>å»¶è¿Ÿ (http_req_duration)</strong> : P95 çº¦ 3.07msï¼Œå¹³å‡çº¦ 1.15msã€‚</li>
<li><strong>é”™è¯¯ç‡</strong>: å‡ ä¹ä¸º 0ã€‚</li>
<li><strong>ç»“è®º</strong>: æ— å†™æ“ä½œæ—¶ï¼Œè·³è½¬æ¥å£æ€§èƒ½æä½³ï¼Œç“¶é¢ˆæ˜ç¡®æŒ‡å‘å†™æ“ä½œã€‚</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a9499e53a0bc43f5875e8ebb3ead6ad2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6JmO5a2QX2xheW9y:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764818011&amp;x-signature=GtBP64zFi038u79xFEza1smf78M%3D" alt="å›¾ç‰‡.png" loading="lazy"/></p>
<p><strong>2.å¯ç”¨åŒæ­¥å†™æ“ä½œ</strong></p>
<p>å‹æµ‹ç»“æœæ˜¾ç¤ºï¼š</p>
<ul>
<li><strong>ååé‡ (RPS)</strong> : æ˜æ˜¾ä¸‹é™ã€‚</li>
<li><strong>å»¶è¿Ÿ (http_req_duration)</strong> : P95 é£™å‡è‡³çº¦ 1956msï¼Œæœ€å¤§å»¶è¿Ÿè¾¾ 7181msã€‚TTFB (Time To First Byte) P95 ä¹Ÿè¾¾åˆ°äº†çº¦ 3 ç§’ã€‚</li>
<li><strong>é”™è¯¯ç‡</strong>: ä»æ¥è¿‘ 0ï¼Œè¯´æ˜åŠŸèƒ½æ­£ç¡®ï¼Œä½†æ€§èƒ½ä¸¥é‡å—æŸã€‚</li>
<li><strong>ç»“è®º</strong>: åŒæ­¥å†™æ“ä½œæˆä¸ºæ€§èƒ½ç“¶é¢ˆã€‚é¢‘ç¹çš„è¿œç¨‹ Redis å†™å…¥å’Œæœ¬åœ° MySQL æ›´æ–°ï¼Œåœ¨çƒ­ç‚¹è·¯å¾„ä¸Šé€ æˆæ˜¾è‘—çš„â€œå†™æ”¾å¤§â€æ•ˆåº”å’Œèµ„æºäº‰ç”¨ï¼ˆå¦‚è¿æ¥æ± ã€ç£ç›˜ IOï¼‰ï¼Œæ‹–æ…¢äº†æ•´ä¸ªå“åº”è¿‡ç¨‹ã€‚
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/272a9fbeda9e458cbd9d32014d3272b7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6JmO5a2QX2xheW9y:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764818011&amp;x-signature=pkmhWfp%2FIZZ7SAUjqdkkhWhY9Zc%3D" alt="å›¾ç‰‡.png" loading="lazy"/></li>
</ul>
<h3 data-id="heading-2">ä¸‰ã€ä¼˜åŒ–</h3>
<p>é’ˆå¯¹ä¸Šè¿°é—®é¢˜ï¼Œæˆ‘ä»¬é‡‡å–äº†å¾ªåºæ¸è¿›çš„ä¼˜åŒ–æªæ–½ã€‚</p>
<h6 data-id="heading-3"><strong>ç¬¬ä¸€é˜¶æ®µï¼šå¼‚æ­¥è§£è€¦å†™æ“ä½œ</strong></h6>
<p><strong>é—®é¢˜</strong>: ä¸»æµç¨‹è¢«åŒæ­¥å†™æ“ä½œé˜»å¡ã€‚ <strong>ä¼˜åŒ–</strong>: åˆ©ç”¨ Spring çš„ <code>@Async</code> æ³¨è§£ï¼Œå°†å†™æ“ä½œç§»å‡ºä¸»çº¿ç¨‹ã€‚ <strong>å®ç°</strong>:</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä¼˜åŒ–å‰ï¼šåŒæ­¥å†™å…¥ï¼ˆé˜»å¡ï¼‰</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">recordClick</span><span class="hljs-params">(String shortCode)</span> {
    dailyClickRepo.incrementClick(shortCode);
    shortUrlRepository.incrementClickCount(shortCode);
}

<span class="hljs-comment">// ä¼˜åŒ–åï¼šå¼‚æ­¥å†™å…¥ï¼ˆä¸é˜»å¡ï¼‰</span>
<span class="hljs-meta">@Async</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">recordClick</span><span class="hljs-params">(String shortCode)</span> {
    dailyClickRepo.incrementClick(shortCode);
    shortUrlRepository.incrementClickCount(shortCode);
}
</code></pre>
<p>é…ç½®çº¿ç¨‹æ± ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@SpringBootApplication</span>
<span class="hljs-meta">@EnableAsync</span>
<span class="hljs-meta">@EnableScheduling</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TinyFlowApplication</span> {
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> Executor <span class="hljs-title function_">taskExecutor</span><span class="hljs-params">()</span> {
        <span class="hljs-type">ThreadPoolTaskExecutor</span> <span class="hljs-variable">executor</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadPoolTaskExecutor</span>();
        executor.setCorePoolSize(<span class="hljs-number">32</span>);    <span class="hljs-comment">// é»˜è®¤å¾ˆå°ï¼Œæ‰©å®¹</span>
        executor.setMaxPoolSize(<span class="hljs-number">128</span>);
        executor.setQueueCapacity(<span class="hljs-number">20000</span>);
        executor.setThreadNamePrefix(<span class="hljs-string">"async-"</span>);
        executor.initialize();
        <span class="hljs-keyword">return</span> executor;
    }
}
</code></pre>
<p><strong>æ•ˆæœ</strong>: ä¸»æµç¨‹ç«‹å³è¿”å›ï¼Œç”¨æˆ·æ„ŸçŸ¥å»¶è¿Ÿå¤§å¹…é™ä½ã€‚ä½†æ•°æ®åº“å†™å‹åŠ›ä¾ç„¶å­˜åœ¨ã€‚</p>
<h6 data-id="heading-4"><strong>ç¬¬äºŒé˜¶æ®µï¼šRedis åŸå­è®¡æ•°</strong></h6>
<p><strong>é—®é¢˜</strong>: æ•°æ®åº“å†™å…¥é¢‘ç‡è¿‡é«˜ã€‚ <strong>ä¼˜åŒ–</strong>: å°†è®¡æ•°æ“ä½œä¸‹æ²‰åˆ°é«˜æ€§èƒ½çš„ Redisï¼Œåˆ©ç”¨å…¶åŸå­è‡ªå¢æŒ‡ä»¤ã€‚ <strong>å®ç°</strong>:</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä½¿ç”¨ Redis åŸå­è®¡æ•°</span>
<span class="hljs-meta">@Async</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">recordClick</span><span class="hljs-params">(String shortCode)</span> {
    <span class="hljs-comment">// Redis åŸå­è‡ªå¢</span>
    redisTemplate.opsForValue().increment(<span class="hljs-string">"click:daily:"</span> + shortCode, <span class="hljs-number">1</span>);
    redisTemplate.opsForValue().increment(<span class="hljs-string">"click:total:"</span> + shortCode, <span class="hljs-number">1</span>);
}
</code></pre>
<p><strong>æ•ˆæœï¼š</strong> Â æ•°æ®åº“å†™å…¥é¢‘ç‡å¤§å¹…é™ä½ï¼ŒRedis æ‰¿æ‹…è®¡æ•°å‹åŠ›</p>
<hr/>
<h6 data-id="heading-5"><strong>ç¬¬ä¸‰é˜¶æ®µï¼šå†…å­˜ç¼“å†²ä¸å®šæ—¶æ‰¹é‡åˆ·åº“</strong></h6>
<p><strong>é—®é¢˜</strong>: Redis å†™å…¥è™½å¿«ï¼Œä½†ä»éœ€æœ€ç»ˆæŒä¹…åŒ–åˆ°æ•°æ®åº“ã€‚</p>
<p><strong>ä¼˜åŒ–</strong>: åœ¨åº”ç”¨å†…å­˜ä¸­ç´¯ç§¯è®¡æ•°å˜æ›´ï¼Œé€šè¿‡å®šæ—¶ä»»åŠ¡æ‰¹é‡æ›´æ–°æ•°æ®åº“ã€‚</p>
<p><strong>å®ç°</strong>:</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ShortUrlService</span> {
    <span class="hljs-comment">// å†…å­˜ç´¯åŠ å™¨ï¼ˆåŸå­è®¡æ•°ï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> ConcurrentHashMap&lt;String, AtomicLong&gt; clickBuffer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcurrentHashMap</span>&lt;&gt;();
    
    <span class="hljs-comment">// å¼‚æ­¥å†™å…¥ï¼ˆä¸é˜»å¡ä¸»æµç¨‹ï¼‰</span>
    <span class="hljs-meta">@Async</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">recordClick</span><span class="hljs-params">(String shortCode)</span> {
        clickBuffer.computeIfAbsent(shortCode, k -&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">AtomicLong</span>(<span class="hljs-number">0</span>)).incrementAndGet();
    }
    
    <span class="hljs-comment">// å®šæ—¶æ‰¹é‡åˆ·åº“ï¼ˆæ¯2ç§’ï¼‰</span>
    <span class="hljs-meta">@Scheduled(fixedRate = 2000)</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">flushClicksToDB</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">if</span> (clickBuffer.isEmpty()) <span class="hljs-keyword">return</span>;
        
        <span class="hljs-comment">// å¿«ç…§å¹¶é‡ç½®è®¡æ•°å™¨ï¼ˆé¿å…å¹¶å‘é—®é¢˜ï¼‰</span>
        Map&lt;String, Long&gt; snapshot = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
        clickBuffer.forEach((code, count) -&gt; {
            <span class="hljs-type">long</span> <span class="hljs-variable">value</span> <span class="hljs-operator">=</span> count.getAndSet(<span class="hljs-number">0</span>);  <span class="hljs-comment">// åŸå­è¯»å–å¹¶é‡ç½®</span>
            <span class="hljs-keyword">if</span> (value &gt; <span class="hljs-number">0</span>) snapshot.put(code, value);
        });
        
        <span class="hljs-comment">// æ‰¹é‡æ›´æ–°æ•°æ®åº“ï¼ˆå‡å°‘è¿æ¥æ¶ˆè€—ï¼‰</span>
        <span class="hljs-keyword">for</span> (Map.Entry&lt;String, Long&gt; entry : snapshot.entrySet()) {
            dailyClickRepo.incrementClick(entry.getKey(), entry.getValue());
            shortUrlRepository.incrementClickCount(entry.getKey(), entry.getValue());
        }
    }
}
</code></pre>
<p><strong>æ•ˆæœï¼š</strong> Â æ•°æ®åº“å†™å…¥ä»"æ¯æ¬¡è¯·æ±‚"å˜ä¸º"æ¯2ç§’æ‰¹é‡"ï¼Œæ•ˆç‡å¤§å¹…æå‡</p>
<hr/>
<h6 data-id="heading-6"><strong>ç¬¬å››é˜¶æ®µï¼šå¼•å…¥æœ¬åœ°ç¼“å­˜ (Caffeine)</strong></h6>
<p><strong>é—®é¢˜</strong>: æŸ¥è¯¢é•¿é“¾æ—¶ï¼Œå³ä¾¿ä½¿ç”¨äº† Redisï¼Œè·¨å…¬ç½‘è®¿é—®ä»æœ‰ 10ms çº§åˆ«çš„å»¶è¿Ÿã€‚</p>
<p><strong>ä¼˜åŒ–</strong>: åœ¨åº”ç”¨æœ¬åœ°å¼•å…¥é«˜æ€§èƒ½ç¼“å­˜ Caffeineï¼Œæ„å»º L1 (æœ¬åœ°) + L2 (Redis) + L3 (DB) ä¸‰çº§ç¼“å­˜ä½“ç³»ã€‚</p>
<p><strong>å®ç°</strong>:</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ç®€å• HashMap ç¼“å­˜</span>
<span class="hljs-keyword">private</span> Map&lt;String, String&gt; localCache = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcurrentHashMap</span>&lt;&gt;();

<span class="hljs-keyword">public</span> String <span class="hljs-title function_">getLongUrlByShortCode</span><span class="hljs-params">(String shortCode)</span> {
    <span class="hljs-comment">// L1: æœ¬åœ° HashMap ç¼“å­˜</span>
    <span class="hljs-type">String</span> <span class="hljs-variable">cachedUrl</span> <span class="hljs-operator">=</span> localCache.get(shortCode);
    <span class="hljs-keyword">if</span> (cachedUrl != <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span> cachedUrl;
    
    <span class="hljs-comment">// L2: Redis ç¼“å­˜</span>
    <span class="hljs-comment">// L3: æ•°æ®åº“</span>
}
</code></pre>
<p><strong>æ•ˆæœï¼š</strong> Â æœ¬åœ°ç¼“å­˜å‘½ä¸­åå“åº”æ—¶é—´ä» 10msçº§é™è‡³æ¯«ç§’çº§</p>
<hr/>
<h6 data-id="heading-7"><strong>ç¬¬äº”é˜¶æ®µï¼šè¿æ¥æ± ä¼˜åŒ– + ç¼“å­˜é¢„çƒ­</strong></h6>
<p><strong>é—®é¢˜</strong>: é«˜å¹¶å‘ä¸‹å¯èƒ½å‡ºç°è¿æ¥æ± è€—å°½ï¼Œå†·å¯åŠ¨æ—¶ç¼“å­˜æœªå‘½ä¸­å¯¼è‡´å»¶è¿Ÿå°–åˆºã€‚ <strong>ä¼˜åŒ–</strong>:</p>
<ol>
<li><strong>æ‰©å¤§è¿æ¥æ± </strong>: å¢åŠ æ•°æ®åº“å’Œ Redis è¿æ¥æ± çš„æœ€å¤§è¿æ¥æ•°ã€‚</li>
<li><strong>ç¼“å­˜é¢„çƒ­</strong>: åº”ç”¨å¯åŠ¨æ—¶ä¸»åŠ¨åŠ è½½çƒ­ç‚¹æ•°æ®åˆ° L1 ç¼“å­˜ã€‚</li>
</ol>
<p><strong>å®ç°</strong>:</p>
<ol>
<li>æ‰©å¤§è¿æ¥æ± é…ç½®</li>
</ol>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># è¿æ¥æ± ä¼˜åŒ–</span>
<span class="hljs-attr">spring:</span>
  <span class="hljs-attr">datasource:</span>
    <span class="hljs-attr">hikari:</span>
      <span class="hljs-attr">maximum-pool-size:</span> <span class="hljs-number">50</span>  
  <span class="hljs-attr">data:</span>
    <span class="hljs-attr">redis:</span>
      <span class="hljs-attr">lettuce:</span>
        <span class="hljs-attr">pool:</span>
          <span class="hljs-attr">max-active:</span> <span class="hljs-number">400</span>  
          
<span class="hljs-attr">server:</span>
  <span class="hljs-attr">tomcat:</span>
    <span class="hljs-attr">threads:</span>
      <span class="hljs-attr">max:</span> <span class="hljs-number">400</span>            
</code></pre>
<ol start="2">
<li>å®ç°ç¼“å­˜é¢„çƒ­æœºåˆ¶</li>
</ol>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ShortUrlService</span> {
    <span class="hljs-meta">@Value("${cache.warmup.enabled:true}")</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> warmupEnabled;
    
    <span class="hljs-meta">@Value("${cache.warmup.size:1000}")</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> warmupSize;
    
    <span class="hljs-meta">@PostConstruct</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">warmupCache</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">if</span> (!warmupEnabled) <span class="hljs-keyword">return</span>;
        
        <span class="hljs-keyword">try</span> {
            log.info(<span class="hljs-string">"Starting cache warmup, loading top {} hot URLs..."</span>, warmupSize);
            <span class="hljs-type">Pageable</span> <span class="hljs-variable">topN</span> <span class="hljs-operator">=</span> PageRequest.of(<span class="hljs-number">0</span>, warmupSize);
            Page&lt;ShortUrl&gt; hotUrls = shortUrlRepository.findAll(topN);
            
            <span class="hljs-type">int</span> <span class="hljs-variable">loaded</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
            <span class="hljs-keyword">for</span> (ShortUrl url : hotUrls.getContent()) {
                localCache.put(url.getShortCode(), url.getLongUrl());
                loaded++;
            }
            
            log.info(<span class="hljs-string">"Cache warmup completed: {} URLs loaded to L1 cache"</span>, loaded);
        } <span class="hljs-keyword">catch</span> (Exception e) {
            log.error(<span class="hljs-string">"Cache warmup failed: {}"</span>, e.getMessage(), e);
        }
    }
}
</code></pre>
<p><strong>æ•ˆæœï¼š</strong> Â ç³»ç»Ÿç¨³å®šæ€§æå‡ï¼Œå†·å¯åŠ¨ä¸å†æ…¢</p>
<hr/>
<h4 data-id="heading-8">ç¬¬å…­é˜¶æ®µï¼šæœ¬åœ°ç¼“å­˜å‡çº§ä¸º Caffeine</h4>
<p><strong>é—®é¢˜ï¼š</strong> Â HashMap æ— æ·˜æ±°ç­–ç•¥ï¼Œå¯èƒ½å†…å­˜æº¢å‡º</p>
<p><strong>ä¼˜åŒ–ï¼š</strong> Â ä½¿ç”¨ Caffeine æ›¿ä»£ HashMap</p>
<p><strong>å®ç°</strong>:</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// CacheConfig.java</span>
<span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CacheConfig</span> {
    <span class="hljs-meta">@Bean("localUrlCache")</span>
    <span class="hljs-keyword">public</span> Cache&lt;String, String&gt; <span class="hljs-title function_">localUrlCache</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> Caffeine.newBuilder()
            .maximumSize(<span class="hljs-number">10000</span>)
            .expireAfterWrite(<span class="hljs-number">10</span>, TimeUnit.MINUTES)
            .build();
    }
}

<span class="hljs-comment">// ShortUrlService.java</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ShortUrlService</span> {
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-meta">@Qualifier("localUrlCache")</span>
    <span class="hljs-keyword">private</span> Cache&lt;String, String&gt; localCache;
    
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getLongUrlByShortCode</span><span class="hljs-params">(String shortCode)</span> {
        <span class="hljs-comment">// L1: æœ¬åœ°ç¼“å­˜ï¼ˆæ¯«ç§’çº§å“åº”ï¼‰</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">cachedUrl</span> <span class="hljs-operator">=</span> localCache.getIfPresent(shortCode);
        <span class="hljs-keyword">if</span> (cachedUrl != <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span> cachedUrl;
        
        <span class="hljs-comment">// L2: Redis ç¼“å­˜ï¼ˆç½‘ç»œå»¶è¿Ÿï¼‰</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">redisUrl</span> <span class="hljs-operator">=</span> redisTemplate.opsForValue().get(<span class="hljs-string">"short_url:"</span> + shortCode);
        <span class="hljs-keyword">if</span> (redisUrl != <span class="hljs-literal">null</span>) {
            localCache.put(shortCode, redisUrl);
            <span class="hljs-keyword">return</span> redisUrl;
        }
        
        <span class="hljs-comment">// L3: æ•°æ®åº“ï¼ˆæœ€æ…¢ï¼‰</span>
        <span class="hljs-type">ShortUrl</span> <span class="hljs-variable">shortUrl</span> <span class="hljs-operator">=</span> shortUrlRepository.findByShortCode(shortCode);
        <span class="hljs-keyword">if</span> (shortUrl != <span class="hljs-literal">null</span>) {
            <span class="hljs-type">String</span> <span class="hljs-variable">longUrl</span> <span class="hljs-operator">=</span> shortUrl.getLongUrl();
            redisTemplate.opsForValue().set(<span class="hljs-string">"short_url:"</span> + shortCode, longUrl, Duration.ofHours(<span class="hljs-number">24</span>));
            localCache.put(shortCode, longUrl);
            <span class="hljs-keyword">return</span> longUrl;
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }
}

</code></pre>
<p><strong>æ•ˆæœï¼š</strong> Â è‡ªåŠ¨æ·˜æ±°å†·æ•°æ®ï¼Œæ”¯æŒç»Ÿè®¡ä¿¡æ¯ï¼Œæ›´ä¸“ä¸šçš„ç¼“å­˜ç®¡ç†</p>
<hr/>
<h4 data-id="heading-9">ç¬¬ä¸ƒé˜¶æ®µï¼šç²¾ç»†åŒ–è°ƒä¼˜</h4>
<p><strong>é—®é¢˜</strong>: ç³»ç»Ÿä»æœ‰ä¼˜åŒ–ç©ºé—´ï¼Œä¸”éœ€è¦é˜²æ­¢çªå‘æµé‡æ‰“å®ç³»ç»Ÿã€‚ <strong>ä¼˜åŒ–</strong>:</p>
<ol>
<li><strong>å‚æ•°å¾®è°ƒ</strong>: æ ¹æ®å‹æµ‹åé¦ˆï¼Œè¿›ä¸€æ­¥ç²¾ç»†è°ƒæ•´è¿æ¥æ± ã€çº¿ç¨‹æ± ã€Tomcat çº¿ç¨‹æ•°ç­‰å‚æ•°ã€‚</li>
<li><strong>å®æ–½é™æµ</strong>: ä½¿ç”¨ Resilience4j ç­‰ç»„ä»¶ï¼Œåœ¨å…¥å£å¤„é™åˆ¶è¯·æ±‚é€Ÿç‡ï¼Œä¿æŠ¤ä¸‹æ¸¸æœåŠ¡ã€‚</li>
</ol>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># ç²¾ç»†åŒ–é…ç½®</span>
<span class="hljs-attr">spring:</span>
  <span class="hljs-attr">datasource:</span>
    <span class="hljs-attr">hikari:</span>
      <span class="hljs-attr">maximum-pool-size:</span> <span class="hljs-number">100</span>  <span class="hljs-comment"># 50 â†’ 100</span>
  <span class="hljs-attr">data:</span>
    <span class="hljs-attr">redis:</span>
      <span class="hljs-attr">lettuce:</span>
        <span class="hljs-attr">pool:</span>
          <span class="hljs-attr">max-active:</span> <span class="hljs-number">600</span>   <span class="hljs-comment"># 400 â†’ 600</span>
          
<span class="hljs-attr">resilience4j:</span>
  <span class="hljs-attr">ratelimiter:</span>
    <span class="hljs-attr">instances:</span>
      <span class="hljs-attr">redirectLimit:</span>
        <span class="hljs-attr">limitForPeriod:</span> <span class="hljs-number">3000</span>  <span class="hljs-comment"># åŸºäºå®æµ‹è°ƒæ•´</span>
</code></pre>
<p><strong>æ•ˆæœï¼š</strong> Â ç³»ç»Ÿèƒ½ç¨³å®šæ”¯æ’‘ 3000 QPSï¼Œæ€§èƒ½è¾¾åˆ°æœ€ä¼˜çŠ¶æ€</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/151ac836dc794abaaf153223e0cce4a0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6JmO5a2QX2xheW9y:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764818011&amp;x-signature=e9Vzc7OsWwz3r5dqHjE5sXvXxMg%3D" alt="image.png" loading="lazy"/>
å¦‚æœä¸é™æµï¼ŒæŠŠqpsæåˆ°5000çš„æ•ˆæœï¼šå¹¶ä¸ç¨³å®šï¼Œæ‰€ä»¥æˆ‘å…ˆæµè‡³3000qpsä¿æŠ¤ç³»ç»Ÿæ­£å¸¸è¿è¡Œã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dbbfc74f2b4943f6b39e590f9420a363~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6JmO5a2QX2xheW9y:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764818011&amp;x-signature=b%2BFMILb6k7oagBKNEJPtMZjK1wo%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-10"><strong>æ€»ç»“</strong>ï¼š</h2>
<p><strong>å¯¹æ¯”ä¼˜åŒ–å‰ï¼š</strong></p>



































<table><thead><tr><th>æŒ‡æ ‡</th><th>ä¼˜åŒ–å‰</th><th>ä¼˜åŒ–åï¼ˆ3000 QPSï¼‰</th><th>æå‡</th></tr></thead><tbody><tr><td>P95 å»¶è¿Ÿ</td><td>~1956ms</td><td><strong>8.05ms</strong></td><td><strong>é™ä½ 99.6%</strong></td></tr><tr><td>æœ€å¤§å»¶è¿Ÿ</td><td>~7181ms</td><td>585ms</td><td><strong>é™ä½ 91.8%</strong></td></tr><tr><td>å¤±è´¥ç‡</td><td>0%</td><td>0%</td><td>ä¿æŒç¨³å®š</td></tr><tr><td>ååé‡</td><td>100-500 QPS</td><td><strong>ç¨³å®š3000 QPS</strong></td><td><strong>æå‡ 500%</strong></td></tr></tbody></table>
<hr/>
<p>å…³é”®çš„ä¼˜åŒ–ï¼š</p>
<ol>
<li><strong>å¼‚æ­¥è§£è€¦</strong>: å°†è€—æ—¶æ“ä½œç§»å‡ºä¸»æµç¨‹ã€‚</li>
<li><strong>çº¿ç¨‹æ± è°ƒä¼˜</strong>: ä¸ºå¼‚æ­¥ä»»åŠ¡é…ç½®åˆé€‚çš„çº¿ç¨‹æ± ã€‚</li>
<li><strong>è®¡æ•°ä¸‹æ²‰</strong>: åˆ©ç”¨ Redis åŸå­æ“ä½œæ›¿ä»£æ•°æ®åº“å†™å…¥ã€‚</li>
<li><strong>æ‰¹é‡åˆ·ç›˜</strong>: å°†é«˜é¢‘å†™åˆå¹¶ä¸ºä½é¢‘æ‰¹é‡å†™ã€‚</li>
<li><strong>æœ¬åœ°ç¼“å­˜ (Caffeine)</strong> : æ„å»ºå¤šçº§ç¼“å­˜ä½“ç³»ï¼Œæè‡´å‹ç¼©è¯»å»¶è¿Ÿã€‚</li>
<li><strong>ç¼“å­˜é¢„çƒ­</strong>: æ¶ˆé™¤å†·å¯åŠ¨å»¶è¿Ÿå°–åˆºã€‚</li>
<li><strong>è¿æ¥æ± /Tomcat è°ƒä¼˜</strong>: æå‡é«˜å¹¶å‘æ‰¿è½½åŠ›ã€‚</li>
<li><strong>é™æµä¿æŠ¤</strong>: ä¿éšœç³»ç»Ÿç¨³å®šæ€§ã€‚</li>
</ol>
<p>åç»­çš„ä¼˜åŒ–æ–¹å‘ï¼Œåç»­æ›´æ–°ï¼š</p>
<ul>
<li>JVMè°ƒä¼˜+ç›‘æ§</li>
<li>ç†”æ–­å™¨</li>
<li>æ¶ˆæ¯é˜Ÿåˆ—</li>
<li>æ°´å¹³æ‰©å±•</li>
<li>è¯»å†™åˆ†ç¦»</li>
<li>å‹æµ‹æŠ¥å‘Š</li>
</ul>
<hr/>
<h6 data-id="heading-11">å†™åœ¨æœ€å:</h6>
<p>è¿™æ˜¯ä½œè€…ç¬¬ä¸€æ¬¡è®°å½•è°ƒä¼˜ï¼Œä¸­é—´ä¹Ÿå‡ºç°äº†è®¸å¤šé—®é¢˜ï¼Œæ€§èƒ½ä¼˜åŒ–ä¹Ÿä¸æ˜¯ç¨³å®šæå‡çš„ï¼Œä½†ä¸»è¦è¿˜æ˜¯ä¸Šå‡çš„è¶‹åŠ¿ï¼Œæ²¡æœ‰è®°å½•é‚£ä¹ˆå®Œæ•´å¹³æ»‘çš„ä¼˜åŒ–è¿‡ç¨‹ï¼Œåªèƒ½å¤§æ¦‚çš„ä¼˜åŒ–å¯ä»¥ä»¥å›¾ç‰‡çš„å½¢å¼å±•ç¤ºï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/744b1849c33a446b86b91cfe0b91a8d1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6JmO5a2QX2xheW9y:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764818011&amp;x-signature=P7liwRsGp%2BePWcHwlPOANHJ4Ur4%3D" alt="image.png" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æˆ‘ç”¨ Chrome æ‰©å±•éªŒè¯äº† MCP çš„å®‰å…¨é£é™©ï¼Œç»“æœå‘ç°]]></title>    <link>https://juejin.cn/post/7576953459543834678</link>    <guid>https://juejin.cn/post/7576953459543834678</guid>    <pubDate>2025-11-27T03:21:11.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576953459543834678" data-draft-id="7576935292428255274" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æˆ‘ç”¨ Chrome æ‰©å±•éªŒè¯äº† MCP çš„å®‰å…¨é£é™©ï¼Œç»“æœå‘ç°"/> <meta itemprop="keywords" content="MCP,Chrome"/> <meta itemprop="datePublished" content="2025-11-27T03:21:11.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¥‡èˆç²¾é€‰"/> <meta itemprop="url" content="https://juejin.cn/user/4388906147515367"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æˆ‘ç”¨ Chrome æ‰©å±•éªŒè¯äº† MCP çš„å®‰å…¨é£é™©ï¼Œç»“æœå‘ç°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4388906147515367/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¥‡èˆç²¾é€‰
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-27T03:21:11.000Z" title="Thu Nov 27 2025 03:21:11 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>ä½œä¸ºä¸€åå‰ç«¯å¼€å‘ï¼Œæˆ‘æƒ³æ¢ç´¢æµè§ˆå™¨èƒ½å’Œ MCP æœåŠ¡äº¤äº’åˆ°ä»€ä¹ˆç¨‹åº¦ã€‚å— Koi.ai æ–‡ç« å¯å‘åšäº†ä¸ª Chrome æ‰©å±•ï¼Œæ„å¤–å‘ç°ï¼š<strong>å‰ç«¯ä¸æœ¬åœ° MCP çš„äº¤äº’åœºæ™¯æ¯”æƒ³è±¡çš„è¦æœ‰é™ï¼Œä½†è¿™ä¸ªæ¢ç´¢è¿‡ç¨‹æ­ç¤ºäº†æ›´å¤šæœ‰è¶£çš„æŠ€æœ¯å¯èƒ½æ€§</strong>ã€‚</p>
<h2 data-id="heading-1">èµ·å› ï¼šä¸€ä¸ªæœ‰è¶£çš„æŠ€æœ¯é—®é¢˜</h2>
<p>ä½œä¸ºä¸€åå‰ç«¯å¼€å‘å·¥ç¨‹å¸ˆï¼Œæˆ‘æœ€è¿‘ä¸€ç›´åœ¨å…³æ³¨ MCP (Model Context Protocol) è¿™ä¸ªæ–°å…´åè®®ã€‚å®ƒè®© AI åº”ç”¨èƒ½å¤Ÿä¸å„ç§å·¥å…·å’Œæ•°æ®æºäº¤äº’ï¼Œä¸ºå‰ç«¯é¢†åŸŸå¸¦æ¥äº†å¾ˆå¤šæ–°çš„æƒ³è±¡ç©ºé—´ã€‚</p>
<p>æŸå¤©è¯»åˆ° Koi.ai çš„ä¸€ç¯‡ç ”ç©¶æ–‡ç«  <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.koi.ai%2Fblog%2Ftrust-me-im-local-chrome-extensions-mcp-and-the-sandbox-escape" target="_blank" title="https://www.koi.ai/blog/trust-me-im-local-chrome-extensions-mcp-and-the-sandbox-escape" ref="nofollow noopener noreferrer">Trust Me, I'm Local: Chrome Extensions, MCP, and the Sandbox Escape</a>ï¼Œæ–‡ç« ä»å®‰å…¨è§’åº¦æŒ‡å‡º Chrome æ‰©å±•å¯ä»¥è®¿é—®æœ¬åœ°è¿è¡Œçš„ MCP æœåŠ¡å™¨ã€‚ä½†å¯¹æˆ‘æ¥è¯´ï¼Œè¿™ä¸ªæŠ€æœ¯ç»†èŠ‚å¼•å‘äº†æ›´å¤šå…³äºå‰ç«¯èƒ½åŠ›è¾¹ç•Œçš„æ€è€ƒï¼š</p>
<p><strong>æˆ‘æƒ³æ¢ç´¢çš„é—®é¢˜</strong>ï¼š</p>
<ul>
<li>å‰ç«¯ï¼ˆChrome æ‰©å±•ï¼‰èƒ½å’Œ MCP äº¤äº’åˆ°ä»€ä¹ˆç¨‹åº¦ï¼Ÿ</li>
<li>è¿™ç§äº¤äº’æœºåˆ¶èƒ½å¸¦æ¥ä»€ä¹ˆæ ·çš„è§£å†³æ–¹æ¡ˆï¼Ÿ</li>
<li>æµè§ˆå™¨æ²™ç®±å’Œæœ¬åœ°æœåŠ¡çš„è¾¹ç•Œåœ¨å“ªé‡Œï¼Ÿ</li>
<li>æ˜¯å¦å­˜åœ¨å‰ç«¯ç›´æ¥è°ƒç”¨æœ¬åœ° MCP çš„å®ç”¨åœºæ™¯ï¼Ÿ</li>
</ul>
<h3 data-id="heading-2">åŸæ–‡çš„å®‰å…¨è§†è§’</h3>
<p>ç®€å•ä»‹ç»ä¸€ä¸‹åŸæ–‡èƒŒæ™¯ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.koi.ai%2F" target="_blank" title="https://www.koi.ai/" ref="nofollow noopener noreferrer">Koi.ai</a> æ˜¯ä¸€å®¶ä¸“æ³¨äºè½¯ä»¶ä¾›åº”é“¾å®‰å…¨çš„å…¬å¸ï¼Œä»–ä»¬çš„ç ”ç©¶å›¢é˜Ÿå‘ç° Chrome æ‰©å±•å¯ä»¥æ‰«æå¹¶è¿æ¥åˆ°æœ¬åœ° MCP æœåŠ¡å™¨ã€‚å¦‚æœæœåŠ¡å™¨æ— è®¤è¯ï¼Œå¯èƒ½è®¿é—®æ–‡ä»¶ç³»ç»Ÿã€Slack ç­‰æ•æ„Ÿèµ„æºã€‚æ–‡ç« çš„æ ¸å¿ƒè§‚ç‚¹æ˜¯ï¼š</p>
<blockquote>
<p>"ä»»ä½• Chrome æ‰©å±•éƒ½å¯ä»¥åˆ©ç”¨è¿™ä¸ªã€‚ä¸éœ€è¦ç‰¹æ®Šæƒé™ã€‚"</p>
</blockquote>
<p><strong>ä½†ä½œä¸ºå‰ç«¯å¼€å‘ï¼Œæˆ‘çš„ç¬¬ä¸€ååº”ä¸æ˜¯"è¿™å¾ˆå±é™©"ï¼Œè€Œæ˜¯"è¿™å¾ˆæœ‰è¶£"</strong> â€”â€”è¿™ä¸æ­£å¥½è¯´æ˜å‰ç«¯æŠ€æœ¯æ ˆæœ‰äº†æ–°çš„èƒ½åŠ›è¾¹ç•Œå—ï¼Ÿå¸¦ç€æŠ€æœ¯æ¢ç´¢çš„å¥½å¥‡å¿ƒï¼Œæˆ‘å†³å®šï¼š</p>
<ol>
<li>åŠ¨æ‰‹å®ç°ä¸€ä¸ª Chrome æ‰©å±•æ¢ç´¢è¿™ä¸ªè¾¹ç•Œ</li>
<li>äº†è§£å‰ç«¯ä¸ MCP äº¤äº’çš„æŠ€æœ¯ç»†èŠ‚</li>
<li>è¯„ä¼°è¿™ç§äº¤äº’æ¨¡å¼çš„å®ç”¨ä»·å€¼</li>
<li>é¡ºä¾¿è€ƒè™‘ä¸€ä¸‹å®‰å…¨æ€§é—®é¢˜</li>
</ol>
<h2 data-id="heading-3">å®è·µï¼šåŠ¨æ‰‹æ¢ç´¢å‰ç«¯ä¸ MCP çš„è¾¹ç•Œ</h2>
<p>ä½œä¸ºå‰ç«¯å¼€å‘ï¼Œæœ€å¥½çš„å­¦ä¹ æ–¹å¼å°±æ˜¯åŠ¨æ‰‹åšã€‚æˆ‘èŠ±äº†å‡ å¤©æ—¶é—´å®ç°äº†ä¸€ä¸ª Chrome æ‰©å±•ï¼š</p>
<p><strong>æŠ€æœ¯å®ç°</strong>ï¼š</p>
<ul>
<li>Chrome Extension Manifest V3ï¼ˆå‰ç«¯æ ‡å‡†ï¼‰</li>
<li>åå° Service Worker æ‰«ææœ¬åœ°ç«¯å£</li>
<li>Fetch API æ¢æµ‹ SSE å’Œ Streamable HTTP ç«¯ç‚¹</li>
<li>JSON-RPC 2.0 åè®®äº¤äº’</li>
<li>æµ‹è¯•ç”¨çš„ MCP æœåŠ¡å™¨ï¼ˆExpress.jsï¼‰</li>
</ul>
<p><strong>æ‰«æé€»è¾‘</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å°è¯•è¿æ¥ localhost çš„å¸¸è§ç«¯å£</span>
<span class="hljs-keyword">const</span> ports = [<span class="hljs-number">3000</span>, <span class="hljs-number">3001</span>, <span class="hljs-number">5173</span>, <span class="hljs-number">8080</span>, ...];
<span class="hljs-keyword">const</span> endpoints = [<span class="hljs-string">'/sse'</span>, <span class="hljs-string">'/mcp'</span>, <span class="hljs-string">'/api/mcp'</span>];

<span class="hljs-comment">// 1. å°è¯• SSE è¿æ¥</span>
<span class="hljs-keyword">const</span> sseResponse = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">`http://localhost:<span class="hljs-subst">${port}</span>/sse`</span>, {
  <span class="hljs-attr">method</span>: <span class="hljs-string">'GET'</span>,
  <span class="hljs-attr">headers</span>: {<span class="hljs-string">'Accept'</span>: <span class="hljs-string">'text/event-stream'</span>}
});
<span class="hljs-keyword">if</span> (sseResponse.<span class="hljs-property">headers</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">'content-type'</span>)?.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'text/event-stream'</span>)) {
  <span class="hljs-keyword">const</span> sessionId = sseResponse.<span class="hljs-property">headers</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">'x-session-id'</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Found SSE MCP server with session:'</span>, sessionId);
}

<span class="hljs-comment">// 2. å°è¯• Streamable HTTP è¿æ¥</span>
<span class="hljs-keyword">const</span> httpResponse = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">`http://localhost:<span class="hljs-subst">${port}</span>/mcp`</span>, {
  <span class="hljs-attr">method</span>: <span class="hljs-string">'POST'</span>,
  <span class="hljs-attr">headers</span>: {<span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json'</span>},
  <span class="hljs-attr">body</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({
    <span class="hljs-attr">jsonrpc</span>: <span class="hljs-string">'2.0'</span>,
    <span class="hljs-attr">method</span>: <span class="hljs-string">'initialize'</span>,
    <span class="hljs-attr">params</span>: {
      <span class="hljs-attr">protocolVersion</span>: <span class="hljs-string">'2024-11-05'</span>,
      <span class="hljs-attr">capabilities</span>: {},
      <span class="hljs-attr">clientInfo</span>: {<span class="hljs-attr">name</span>: <span class="hljs-string">'Scanner'</span>, <span class="hljs-attr">version</span>: <span class="hljs-string">'1.0.0'</span>}
    },
    <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>
  })
});
<span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> httpResponse.<span class="hljs-title function_">json</span>();
<span class="hljs-keyword">if</span> (data.<span class="hljs-property">jsonrpc</span> === <span class="hljs-string">'2.0'</span> &amp;&amp; data.<span class="hljs-property">result</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Found HTTP MCP server:'</span>, data.<span class="hljs-property">result</span>.<span class="hljs-property">serverInfo</span>);
}
</code></pre>
<p>æµ‹è¯•å¾ˆæˆåŠŸï¼æ‰©å±•å®Œç¾æ£€æµ‹åˆ°äº†æµ‹è¯•æœåŠ¡å™¨ï¼Œå‰ç«¯å¯ä»¥æµç•…åœ°å®Œæˆï¼šæ‰«ææœ¬åœ°ç«¯å£ â†’ å»ºç«‹ MCP è¿æ¥ â†’ è·å–å·¥å…·åˆ—è¡¨ â†’ è°ƒç”¨ MCP å·¥å…·ã€‚</p>
<p><strong>æŠ€æœ¯éªŒè¯å®Œæˆï¼šå‰ç«¯ç¡®å®å¯ä»¥å’Œæœ¬åœ° MCP äº¤äº’ï¼</strong></p>
<h2 data-id="heading-4">å‘ç°ï¼šä½†å®é™…åœºæ™¯è¿œæ¯”æƒ³è±¡çš„æœ‰é™</h2>
<p>å°±åœ¨æˆ‘å‡†å¤‡ä¸ºè¿™ä¸ª"æ–°èƒ½åŠ›"å…´å¥‹æ—¶ï¼Œä¸€ä¸ªé—®é¢˜è®©æˆ‘å†·é™ä¸‹æ¥ï¼š<strong>ä½œä¸ºå‰ç«¯å¼€å‘ï¼Œæˆ‘ä»¬çœŸçš„ä¼šåœ¨ localhost è¿è¡Œ HTTP æ¨¡å¼çš„ MCP æœåŠ¡å™¨å—ï¼Ÿ</strong></p>
<p>è¿™ä¸ªé—®é¢˜å¼•å‘äº†æˆ‘å¯¹ MCP å®é™…éƒ¨ç½²æ¨¡å¼çš„æ€è€ƒã€‚è®©æˆ‘å…ˆè§£é‡Šä¸€ä¸‹ MCP æ”¯æŒçš„ä¸‰ç§ä¼ è¾“æ–¹å¼ã€‚</p>
<h3 data-id="heading-5">MCP çš„ä¸‰ç§ä¼ è¾“æ¨¡å¼è¯¦è§£</h3>
<p>MCP åè®®è®¾è®¡ä¸Šæ”¯æŒä¸‰ç§ä¼ è¾“æ–¹å¼ï¼Œæ¯ç§éƒ½æœ‰ä¸åŒçš„ä½¿ç”¨åœºæ™¯ï¼š</p>
<h4 data-id="heading-6">1. stdio æ¨¡å¼ï¼ˆä¸»æµæ–¹å¼ï¼‰</h4>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"mcpServers"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"filesystem"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"command"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"npx"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"args"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"-y"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"@modelcontextprotocol/server-filesystem"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"/path"</span><span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>ç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li>é€šè¿‡æ ‡å‡†è¾“å…¥è¾“å‡ºé€šä¿¡</li>
<li>ä½œä¸ºå­è¿›ç¨‹è¿è¡Œï¼Œä¸å¼€æ”¾ç½‘ç»œç«¯å£</li>
<li><strong>Chrome æ‰©å±•å®Œå…¨æ— æ³•è®¿é—®</strong> âœ…</li>
<li>è¿™æ˜¯ Claude Desktop ç­‰ä¸»æµåº”ç”¨çš„æ ‡å‡†é…ç½®</li>
</ul>
<p><strong>å®‰å…¨æ€§</strong>ï¼šé«˜ - å¤©ç„¶éš”ç¦»ï¼ŒChrome æ‰«æä¸åˆ°</p>
<h4 data-id="heading-7">2. Server-Sent Events (SSE) æ¨¡å¼</h4>
<p><strong>ç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li>GET è¯·æ±‚å»ºç«‹ SSE è¿æ¥ï¼ŒæœåŠ¡å™¨å¯æ¨é€äº‹ä»¶</li>
<li>POST è¯·æ±‚å‘é€ JSON-RPC æ¶ˆæ¯ï¼ˆåŒå‘é€šä¿¡ï¼‰</li>
<li>éœ€è¦å¼€æ”¾ HTTP ç«¯å£ï¼Œä½¿ç”¨ session ID ç®¡ç†è¿æ¥</li>
</ul>
<h4 data-id="heading-8">3. Streamable HTTP æ¨¡å¼</h4>
<p><strong>ç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li>åŸºäºæ ‡å‡† HTTP POST è¯·æ±‚ï¼Œä½¿ç”¨ JSON-RPC 2.0 åè®®</li>
<li>æ— çŠ¶æ€è®¾è®¡ï¼Œæ¯æ¬¡è¯·æ±‚ç‹¬ç«‹ï¼ˆæ— éœ€ sessionï¼‰</li>
<li>æ›´ç®€å•ç›´æ¥ï¼Œæ˜“äºéƒ¨ç½²å’Œé›†æˆ</li>
</ul>
<h3 data-id="heading-9">å…³é”®å‘ç°ï¼šç½‘ç»œæ¨¡å¼å®é™…éƒ¨ç½²åœ¨å“ªï¼Ÿ</h3>
<p>ç†è§£äº†ä¸‰ç§ä¼ è¾“æ¨¡å¼åï¼Œä¸€ä¸ªæ›´é‡è¦çš„é—®é¢˜æµ®ç°å‡ºæ¥ï¼š<strong>SSE å’Œ Streamable HTTP è¿™ä¸¤ç§ç½‘ç»œä¼ è¾“æ¨¡å¼ï¼Œåœ¨å®é™…é¡¹ç›®ä¸­æ˜¯æ€ä¹ˆéƒ¨ç½²çš„ï¼Ÿ</strong></p>
<p><strong>æƒ…å†µ Aï¼šç”Ÿäº§éƒ¨ç½²ï¼ˆå¸¸è§ï¼‰</strong></p>
<ul>
<li>éƒ¨ç½²åœ¨è¿œç¨‹æœåŠ¡å™¨ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fmcp.example.com%25EF%25BC%2589" target="_blank" title="https://mcp.example.com%EF%BC%89" ref="nofollow noopener noreferrer">mcp.example.comï¼‰</a></li>
<li>æœ‰è®¤è¯æœºåˆ¶ï¼ˆAPI Keyã€OAuth ç­‰ï¼‰</li>
<li>Chrome æ‰«æä¸åˆ°ï¼ˆä¸åœ¨ localhostï¼‰</li>
</ul>
<p><strong>æƒ…å†µ Bï¼šæœ¬åœ°å¼€å‘æµ‹è¯•ï¼ˆè¾ƒå°‘ï¼‰</strong></p>
<ul>
<li>localhost:3001</li>
<li>å¯èƒ½æ— è®¤è¯ï¼ˆä¸ºäº†æ–¹ä¾¿æµ‹è¯•ï¼‰</li>
<li>Chrome å¯ä»¥æ‰«æ</li>
<li><strong>ä½†é€šå¸¸æ˜¯ä¸´æ—¶çš„ï¼Œå¼€å‘æµ‹è¯•å®Œå°±å…³é—­</strong></li>
</ul>
<h3 data-id="heading-10">å®é™…ä½¿ç”¨åœºæ™¯åˆ†æ</h3>

































<table><thead><tr><th>åœºæ™¯</th><th>ä¼ è¾“æ¨¡å¼</th><th>æ™®éæ€§</th><th>Chrome å¯è®¿é—®</th><th>å®é™…é£é™©</th></tr></thead><tbody><tr><td>Claude Desktop ç­‰</td><td>stdio</td><td>â­â­â­â­â­</td><td>âŒ</td><td>æ— </td></tr><tr><td>è¿œç¨‹ MCP æœåŠ¡</td><td>SSE/HTTP</td><td>â­â­â­</td><td>âŒ</td><td>æ— </td></tr><tr><td>æœ¬åœ°å¼€å‘æµ‹è¯•</td><td>SSE/HTTP</td><td>â­</td><td>âœ…</td><td>ä½</td></tr></tbody></table>
<p><strong>æ³¨</strong>ï¼šæ™®éæ€§åŸºäº MCP å®˜æ–¹æ¨èå’Œä¸»æµå·¥å…·çš„å®é™…é‡‡ç”¨æƒ…å†µï¼Œéç²¾ç¡®ç»Ÿè®¡æ•°æ®ã€‚</p>
<p>çœ‹åˆ°è¿™ä¸ªè¡¨æ ¼ï¼Œç­”æ¡ˆå¾ˆæ˜æ˜¾ï¼š<strong>çœŸæ­£èƒ½è¢« Chrome æ‰©å±•è®¿é—®åˆ°çš„æœ¬åœ° MCP åœºæ™¯éå¸¸å°‘è§</strong>ã€‚åŸæ–‡æè¿°çš„å®‰å…¨é£é™©ï¼Œåœ¨å®é™…ä¸­å‘ç”Ÿçš„æ¦‚ç‡å¾ˆä½ã€‚</p>
<p>è¿™è®©æˆ‘æ„è¯†åˆ°ï¼šè™½ç„¶æŠ€æœ¯ä¸ŠéªŒè¯äº†å‰ç«¯å¯ä»¥å’Œæœ¬åœ° MCP äº¤äº’ï¼Œä½†å®ç”¨åœºæ™¯ç¡®å®æœ‰é™ã€‚<strong>é‚£è¿™ä¸ªé¡¹ç›®è¿˜æœ‰æ„ä¹‰å—ï¼Ÿ</strong></p>
<h2 data-id="heading-11">è½¬å‹ï¼šä» MCP æ¢ç´¢åˆ°å¼€å‘ç¯å¢ƒå·¥å…·</h2>
<p>ç­”æ¡ˆæ˜¯æœ‰çš„ï¼å½“æˆ‘è·³å‡ºæœ€åˆ"å‰ç«¯è¿æ¥ MCP"çš„è®¾å®šï¼Œé‡æ–°å®¡è§†æ‰‹ä¸Šçš„ä»£ç æ—¶ï¼Œå‘ç°äº†æ–°çš„ä»·å€¼ç‚¹ã€‚</p>
<p><strong>ä»</strong>ï¼šæ¢ç´¢å‰ç«¯ä¸ MCP çš„äº¤äº’è¾¹ç•Œ<br/>
<strong>åˆ°</strong>ï¼šå¼€å‘ç¯å¢ƒæœåŠ¡å‘ç°å·¥å…·</p>
<p>æƒ³æƒ³çœ‹ï¼Œä½œä¸ºå‰ç«¯å¼€å‘ï¼Œæˆ‘ä»¬çš„æ—¥å¸¸å·¥ä½œä¸­ç»å¸¸ä¼šé‡åˆ°è¿™æ ·çš„æƒ…å†µï¼š</p>
<ul>
<li>åŒæ—¶è¿è¡Œå¤šä¸ªå¼€å‘æœåŠ¡å™¨ï¼ˆViteã€webpack-dev-serverï¼‰</li>
<li>æœ¬åœ°å¯åŠ¨æ•°æ®åº“ï¼ˆMongoDBã€Redisï¼‰</li>
<li>å¼€å¯å„ç§è°ƒè¯•ç«¯å£</li>
<li>å¿˜è®°å…³é—­æµ‹è¯•æœåŠ¡</li>
</ul>
<p>è€Œæˆ‘æ‰‹ä¸Šè¿™ä¸ªæ‰«æå™¨ï¼Œæ°å¥½å¯ä»¥å¸®åŠ©è§£å†³è¿™äº›é—®é¢˜ï¼š</p>
<ul>
<li>æ‰«æå¹¶åˆ—å‡ºæ‰€æœ‰æœ¬åœ°è¿è¡Œçš„å¼€å‘æœåŠ¡</li>
<li>è¯†åˆ«æœåŠ¡ç±»å‹ï¼ˆæ ¹æ®ç«¯å£å’Œå“åº”ï¼‰</li>
<li>æé†’å¯èƒ½çš„å®‰å…¨é£é™©</li>
<li>ç”Ÿæˆæœ¬åœ°æœåŠ¡æ¸…å•</li>
</ul>
<p><strong>è¿™æ¬¡æ¢ç´¢çš„æ”¶è·ï¼š</strong></p>
<p><strong>æŠ€æœ¯å±‚é¢</strong>ï¼š</p>
<ul>
<li>ç†è§£äº†æµè§ˆå™¨æ‰©å±•çš„èƒ½åŠ›è¾¹ç•Œ</li>
<li>æŒæ¡äº† Chrome Extension API</li>
<li>å®è·µäº† MCP åè®®ç»†èŠ‚</li>
<li>å­¦ä¼šäº†ç«¯å£æ‰«æçš„å‰ç«¯å®ç°</li>
</ul>
<p><strong>å®ç”¨å±‚é¢</strong>ï¼š</p>
<ul>
<li>å¿«é€ŸæŸ¥çœ‹æœ¬åœ°è¿è¡Œäº†å“ªäº›æœåŠ¡</li>
<li>æ¸…ç†è¢«é—å¿˜çš„æµ‹è¯•æœåŠ¡</li>
<li>å›¢é˜Ÿå…±äº«å¼€å‘ç¯å¢ƒé…ç½®</li>
</ul>
<p>è™½ç„¶å’Œæœ€åˆ"æ¢ç´¢å‰ç«¯ MCP èƒ½åŠ›"çš„ç›®æ ‡ä¸åŒï¼Œä½†è¿™ä¸ªæ–¹å‘æ˜¾ç„¶æ›´å®ç”¨ã€‚è¿™è®©æˆ‘æƒ³èµ·äº†ä¸€ä¸ªè¯ï¼š<strong>Pivot</strong>ï¼ˆæˆ˜ç•¥è½¬å‘ï¼‰â€”â€”ä¿ç•™å·²æœ‰æˆæœï¼Œæ‰¾åˆ°æ–°çš„ä»·å€¼ç‚¹ã€‚</p>
<h2 data-id="heading-12">æ‹“å±•ï¼šå›½å†…æ™ºèƒ½ä½“çš„å®‰å…¨è®¾è®¡å¯¹æ¯”</h2>
<p>æ—¢ç„¶èŠåˆ°äº† MCP çš„å®‰å…¨æ€§ï¼Œä½œä¸ºå›½å†…å¼€å‘è€…ï¼Œæˆ‘ä¹Ÿæƒ³èŠèŠå›½å†…æ™ºèƒ½ä½“å¹³å°åœ¨æ¶æ„å®‰å…¨ä¸Šçš„å·®å¼‚ã€‚</p>
<h3 data-id="heading-13">å¿«é€Ÿå¯¹æ¯”</h3>









































<table><thead><tr><th>å¹³å°</th><th>éƒ¨ç½²æ¨¡å¼</th><th>æœ¬åœ°é›†æˆ</th><th>å®‰å…¨ç‰¹ç‚¹</th></tr></thead><tbody><tr><td>å­—èŠ‚è±†åŒ…</td><td>äº‘ç«¯ä¸ºä¸»</td><td>è¾ƒå°‘</td><td>ä¼ä¸šçº§æƒé™</td></tr><tr><td>ç™¾åº¦æ–‡å¿ƒ</td><td>äº‘ç«¯ + ç§æœ‰åŒ–</td><td>ä¸­ç­‰</td><td>å®Œå–„å®¡è®¡</td></tr><tr><td>é˜¿é‡Œé€šä¹‰</td><td>äº‘ç«¯ + æœ¬åœ°</td><td>æ”¯æŒ</td><td>ä¾èµ–é…ç½®</td></tr><tr><td>æ™ºè°±æ¸…è¨€</td><td>API + æœ¬åœ°</td><td>æ”¯æŒ</td><td>ä¼ä¸šæ–¹æ¡ˆ</td></tr><tr><td><strong>çº³ç±³AI</strong></td><td><strong>æœ¬åœ°ä¼˜å…ˆ</strong></td><td><strong>å®Œæ•´</strong></td><td><strong>å®‰å…¨åŸºå› </strong> âœ…</td></tr></tbody></table>
<h3 data-id="heading-14">çº³ç±³AIçš„å·®å¼‚åŒ–ä¼˜åŠ¿</h3>
<p>é€šè¿‡è¿™æ¬¡ MCP å®‰å…¨æ¢ç´¢ï¼Œæˆ‘å‘ç°<strong>çº³ç±³AI</strong>åœ¨æ¶æ„è®¾è®¡ä¸Šæœ‰äº›ä¸åŒçš„æ€è€ƒï¼š</p>
<p><strong>æ ¸å¿ƒè®¾è®¡ç†å¿µ</strong>ï¼š</p>
<ul>
<li><strong>é»˜è®¤ stdio é€šä¿¡</strong>ï¼šå’Œ Claude ä¸€æ ·ï¼Œä¼˜å…ˆç”¨è¿›ç¨‹é—´é€šä¿¡ï¼Œé¿å…ç½‘ç»œæš´éœ²é£é™©</li>
<li><strong>å®Œå…¨ç§æœ‰åŒ–éƒ¨ç½²</strong>ï¼šä¼ä¸šå¯å†…ç½‘éƒ¨ç½²ï¼Œæ•°æ®ä¸å‡ºè¾¹ç•Œï¼Œæ»¡è¶³åˆè§„è¦æ±‚</li>
<li><strong>ç»†ç²’åº¦æƒé™æ§åˆ¶</strong>ï¼šæ¯ä¸ªå·¥å…·éƒ½æœ‰æ˜ç¡®æƒé™èŒƒå›´ï¼Œæ”¯æŒå¤šå±‚è®¤è¯ï¼ˆAPI Keyã€OAuthã€SSOï¼‰</li>
<li><strong>å®‰å…¨å®¡è®¡å®Œæ•´</strong>ï¼šæ‰€æœ‰å·¥å…·è°ƒç”¨éƒ½æœ‰æ—¥å¿—ï¼Œå†…ç½®é…ç½®å®¡è®¡å·¥å…·</li>
</ul>
<p><strong>ä¸ºä»€ä¹ˆå€¼å¾—å…³æ³¨</strong>ï¼š</p>
<ol>
<li>ä»è®¾è®¡ä¹‹åˆå°±è€ƒè™‘æœ¬åœ°å®‰å…¨ï¼ˆè€Œä¸æ˜¯äº‹åè¡¥æ•‘ï¼‰</li>
<li>æ—¢æœ‰å›½é™…åŒ–çš„æŠ€æœ¯æ ‡å‡†ï¼ˆå¦‚é»˜è®¤ stdioï¼‰ï¼Œåˆé€‚é…ä¸­å›½ä¼ä¸šéœ€æ±‚</li>
<li>å¼€å‘è€…ç”Ÿæ€å‹å¥½ï¼Œæä¾›å®‰å…¨é…ç½®æ¨¡æ¿å’Œæœ€ä½³å®è·µ</li>
</ol>
<p><strong>ä¸€å¥è¯æ€»ç»“</strong>ï¼šåœ¨ MCP å®‰å…¨é—®é¢˜æ—¥ç›Šå—å…³æ³¨çš„ä»Šå¤©ï¼Œ<strong>çº³ç±³AI</strong>è¿™ç§"å®‰å…¨ä¼˜å…ˆ"çš„è®¾è®¡ç†å¿µï¼Œæ¯”"åŠŸèƒ½ä¼˜å…ˆï¼Œå®‰å…¨åè¡¥"æ›´å€¼å¾—ä¿¡èµ–ã€‚</p>
<h2 data-id="heading-15">æ€»ç»“ï¼šä¸€æ¬¡å®Œæ•´çš„æŠ€æœ¯æ¢ç´¢</h2>
<h3 data-id="heading-16">å…³äºå‰ç«¯ä¸ MCP çš„äº¤äº’</h3>
<p>å›åˆ°æœ€åˆçš„é—®é¢˜ï¼šå‰ç«¯èƒ½å’Œ MCP äº¤äº’åˆ°ä»€ä¹ˆç¨‹åº¦ï¼Ÿ</p>
<p><strong>æŠ€æœ¯éªŒè¯çš„ç»“æœ</strong>ï¼š</p>
<ul>
<li>âœ… Chrome æ‰©å±•å¯ä»¥è®¿é—® localhost çš„ MCP æœåŠ¡å™¨</li>
<li>âœ… å¯ä»¥é€šè¿‡ Fetch API å‘é€ JSON-RPC è¯·æ±‚</li>
<li>âœ… å¯ä»¥å»ºç«‹ SSE è¿æ¥æ¥æ”¶äº‹ä»¶</li>
<li>âœ… å¯ä»¥è°ƒç”¨ MCP æä¾›çš„å·¥å…·</li>
</ul>
<p><strong>å®é™…ä¸Šå—é™çš„</strong>ï¼š</p>
<ul>
<li>âŒ MCP å®˜æ–¹æ¨èå¹¶è¢«ä¸»æµå·¥å…·é‡‡ç”¨çš„æ˜¯ stdio æ¨¡å¼ï¼ˆå‰ç«¯æ— æ³•è®¿é—®ï¼‰</li>
<li>âŒ HTTP æ¨¡å¼ä¸»è¦åœ¨è¿œç¨‹ï¼ˆæœ‰ CORS å’Œè®¤è¯ï¼‰</li>
<li>âŒ æœ¬åœ° HTTP æ¨¡å¼è¾ƒå°‘è§ï¼ˆä¸»è¦ç”¨äºå¼€å‘æµ‹è¯•ï¼Œä¸”ä¸´æ—¶ï¼‰</li>
<li>âŒ ç¼ºå°‘å®ç”¨çš„å‰ç«¯ç›´è¿æœ¬åœ° MCP åœºæ™¯</li>
</ul>
<h3 data-id="heading-17">è¿™æ¬¡æ¢ç´¢çš„æ”¶è·</h3>
<p>è™½ç„¶æœ€åˆ"å‰ç«¯ç›´è¿æœ¬åœ° MCP"çš„è®¾æƒ³åœºæ™¯æœ‰é™ï¼Œä½†è¿™æ¬¡æ¢ç´¢æœ¬èº«å¾ˆæœ‰ä»·å€¼ï¼š</p>
<p><strong>æŠ€æœ¯æ”¶è·</strong>ï¼š</p>
<ul>
<li>æ·±å…¥ç†è§£äº† MCP åè®®ï¼ˆä¸‰ç§ä¼ è¾“æ¨¡å¼ï¼‰</li>
<li>å­¦ä¼šäº†æµè§ˆå™¨ä¸­çš„ç«¯å£æ‰«æå®ç°</li>
<li>ç†è§£äº†æµè§ˆå™¨å®‰å…¨æ¨¡å‹çš„è¾¹ç•Œ</li>
</ul>
<p><strong>å®ç”¨äº§å‡º</strong>ï¼š</p>
<ul>
<li>å¼€å‘ç¯å¢ƒæœåŠ¡å‘ç°å·¥å…·</li>
<li>å¯ä»¥å¸®åŠ©å›¢é˜Ÿç®¡ç†æœ¬åœ°æœåŠ¡</li>
<li>å¯ä»¥ä½œä¸º MCP å¼€å‘è°ƒè¯•å·¥å…·</li>
</ul>
<p><strong>æ€ç»´å±‚é¢</strong>ï¼š</p>
<ul>
<li>å­¦ä¼šä»å¤šä¸ªè§†è§’çœ‹å¾…åŒä¸€ä¸ªæŠ€æœ¯ç°è±¡</li>
<li>ç†è§£æŠ€æœ¯å¯è¡Œæ€§å’Œå®é™…ä»·å€¼çš„åŒºåˆ«</li>
<li>æŒæ¡äº† Pivotï¼ˆè°ƒæ•´æ–¹å‘ï¼‰çš„æ–¹æ³•</li>
<li>åŸ¹å…»äº†æ‰¹åˆ¤æ€§æ€è€ƒæŠ€æœ¯æ–‡ç« çš„èƒ½åŠ›</li>
</ul>
<hr/>
<h2 data-id="heading-18">é¡¹ç›®å¼€æº</h2>
<p><strong>GitHub ä»“åº“</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fdonghai88%2Fmcp-security-scanner" target="_blank" title="https://github.com/donghai88/mcp-security-scanner" ref="nofollow noopener noreferrer">github.com/donghai88/mâ€¦</a></p>
<p>å®Œæ•´ä»£ç å·²å¼€æºï¼ŒåŒ…å« Chrome æ‰©å±•ã€æµ‹è¯• MCP æœåŠ¡å™¨ã€‚æ¬¢è¿ Forkã€Star æˆ–æ Issue è®¨è®ºï¼</p>
<p><strong>æ¬¢è¿å‰ç«¯åŒå­¦äº¤æµ</strong>ï¼š</p>
<ul>
<li>ä½ æ€ä¹ˆçœ‹å‰ç«¯ä¸ MCP çš„é›†æˆï¼Ÿæœ‰æ²¡æœ‰å¥½çš„å®è·µæ¡ˆä¾‹ï¼Ÿ</li>
<li>ä½ é‡åˆ°è¿‡ç±»ä¼¼"æŠ€æœ¯å¯è¡Œä½†åœºæ™¯æœ‰é™"çš„æ¢ç´¢å—ï¼Ÿ</li>
<li>å¯¹è¿™ä¸ªé¡¹ç›®æœ‰ä»€ä¹ˆæ”¹è¿›å»ºè®®æˆ–æ–°æƒ³æ³•ï¼Ÿ</li>
</ul>
<hr/>
<p><strong>å‚è€ƒèµ„æ–™</strong>ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.koi.ai%2Fblog%2Ftrust-me-im-local-chrome-extensions-mcp-and-the-sandbox-escape" target="_blank" title="https://www.koi.ai/blog/trust-me-im-local-chrome-extensions-mcp-and-the-sandbox-escape" ref="nofollow noopener noreferrer">Koi.ai - Trust Me, I'm Local</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fspec.modelcontextprotocol.io%2F" target="_blank" title="https://spec.modelcontextprotocol.io/" ref="nofollow noopener noreferrer">MCP Protocol Specification</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.chrome.com%2Fdocs%2Fextensions%2Fdevelop%2Fconcepts%2Fsecurity" target="_blank" title="https://developer.chrome.com/docs/extensions/develop/concepts/security" ref="nofollow noopener noreferrer">Chrome Extension Security</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fn.cn" target="_blank" title="https://n.cn" ref="nofollow noopener noreferrer">çº³ç±³AI å®˜ç½‘</a></li>
</ul>
<hr/>
<p><strong>å£°æ˜</strong>ï¼š</p>
<ul>
<li>æœ¬æ–‡ä»å‰ç«¯å¼€å‘è§†è§’æ¢è®¨ MCP æŠ€æœ¯ï¼Œè¡¥å……äº† Koi.ai åŸæ–‡çš„å®‰å…¨ç ”ç©¶è§†è§’</li>
<li>æ„Ÿè°¢åŸä½œè€… Yuval Ronen çš„ç ”ç©¶å·¥ä½œï¼Œä¸ºæŠ€æœ¯ç¤¾åŒºæä¾›äº†å®è´µçš„å®‰å…¨æ´å¯Ÿ</li>
<li>å¯¹å›½å†…æ™ºèƒ½ä½“å¹³å°çš„è¯„ä»·åŸºäºå…¬å¼€ä¿¡æ¯å’Œä¸ªäººä½¿ç”¨ä½“éªŒ</li>
</ul>
<p><strong>æˆ‘ç›¸ä¿¡æŠ€æœ¯æ¢ç´¢éœ€è¦å¤šå…ƒè§†è§’â€”â€”å®‰å…¨ç ”ç©¶å‘˜çœ‹åˆ°é£é™©ï¼Œå¼€å‘è€…çœ‹åˆ°å¯èƒ½æ€§ï¼Œäº§å“äººçœ‹åˆ°ä»·å€¼ã€‚è¿™äº›è§†è§’äº’è¡¥ï¼Œæ‰èƒ½è®©æŠ€æœ¯ç”Ÿæ€æ›´å¥åº·ã€‚æ¬¢è¿ä¸åŒèƒŒæ™¯çš„åŒå­¦ä¸€èµ·è®¨è®ºï¼</strong> ğŸ¤</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Apache Doris ä¸­çš„ Data Traitï¼šæ€§èƒ½æé€Ÿ 2 å€çš„ç§˜å¯†æ­¦å™¨]]></title>    <link>https://juejin.cn/post/7576928310788423732</link>    <guid>https://juejin.cn/post/7576928310788423732</guid>    <pubDate>2025-11-27T03:43:52.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576928310788423732" data-draft-id="7577201863725318144" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Apache Doris ä¸­çš„ Data Traitï¼šæ€§èƒ½æé€Ÿ 2 å€çš„ç§˜å¯†æ­¦å™¨"/> <meta itemprop="keywords" content="åç«¯,æ•°æ®åº“,Apache"/> <meta itemprop="datePublished" content="2025-11-27T03:43:52.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="SelectDB"/> <meta itemprop="url" content="https://juejin.cn/user/3189021726222904"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Apache Doris ä¸­çš„ Data Traitï¼šæ€§èƒ½æé€Ÿ 2 å€çš„ç§˜å¯†æ­¦å™¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3189021726222904/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    SelectDB
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-27T03:43:52.000Z" title="Thu Nov 27 2025 03:43:52 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨æ•°æ®åº“ç³»ç»Ÿçš„æ ¸å¿ƒå±‚ï¼ŒæŸ¥è¯¢ä¼˜åŒ–å™¨å¦‚åŒä¸€ä½ç²¾æ˜çš„ç­–ç•¥å®¶ï¼Œä¸æ–­åˆ†ææ•°æ®ç‰¹å¾å¹¶åˆ¶å®šæœ€ä¼˜æ‰§è¡Œè®¡åˆ’ã€‚Apache Doris ä½œä¸ºä¸€æ¬¾é«˜æ€§èƒ½çš„ MPP åˆ†æå‹æ•°æ®åº“ï¼Œå…¶ä¼˜åŒ–å™¨å†…ç½®çš„ Data Trait åˆ†ææœºåˆ¶ï¼Œé€šè¿‡æŒ–æ˜æ•°æ®å†…åœ¨çš„ç»Ÿè®¡ç‰¹å¾å’Œè¯­ä¹‰çº¦æŸï¼Œä¸ºæŸ¥è¯¢ä¼˜åŒ–æä¾›äº†åŸºç¡€è®¾æ–½ã€‚è®©æˆ‘ä»¬ä¸€èµ·æ¥æ¢ç´¢è¿™ä¸ªå¼ºå¤§çš„åŠŸèƒ½ï¼</p>
<h2 data-id="heading-0">ä»€ä¹ˆæ˜¯ Data Traitï¼Ÿ</h2>
<p>æƒ³è±¡ä¸€ä¸‹ï¼Œå¦‚æœä½ èƒ½æå‰çŸ¥é“æ•°æ®çš„ â€œæ€§æ ¼ç‰¹å¾â€ï¼Œæ˜¯ä¸æ˜¯å°±èƒ½æ›´èªæ˜åœ°å¤„ç†å®ƒä»¬ï¼ŸData Trait æ­£æ˜¯è¿™æ ·ä¸€ç§å¯¹æŸ¥è¯¢æ•°æ®å’Œä¸­é—´ç»“æœçš„ â€œæ€§æ ¼æè¿°â€ã€‚åœ¨ Doris ä¸­ï¼Œå®ƒç›®å‰å®ç°äº†å››ç§å…³é”®ç‰¹å¾ï¼š</p>
<ol>
<li>å”¯ä¸€æ€§ï¼ˆUniquenessï¼‰ï¼šæ•°æ®çš„ â€œèº«ä»½è¯â€ â€œåœ¨è¿™ä¸ªä¸–ç•Œä¸Šï¼Œæˆ‘æ˜¯ç‹¬ä¸€æ— äºŒçš„ï¼â€â€”â€” å½“æŸåˆ—æ•°æ®è¿™æ · â€œå®£ç§°â€ æ—¶ï¼Œå®ƒå°±å…·æœ‰å”¯ä¸€æ€§ç‰¹å¾ã€‚æ•°å­¦ä¸Šè¡¨ç¤ºä¸ºï¼šNDVï¼ˆä¸åŒå€¼çš„æ•°é‡ï¼‰ = è¡¨çš„æ€»è¡Œæ•°ã€‚</li>
<li>å‡åŒ€æ€§ï¼ˆUniformityï¼‰ï¼šæ•°æ®çš„ â€œå¤åˆ¶ç²˜è´´â€ â€œæˆ‘ä»¬å…¨éƒ½ä¸€æ ·ï¼â€â€”â€” å½“ä¸€åˆ—æ•°æ®éƒ½æ˜¯ç›¸åŒå€¼æ—¶ï¼Œå®ƒå°±å±•ç°å‡ºå‡åŒ€æ€§ã€‚å…·ä½“æŒ‡éç©ºä¸åŒå€¼æ•°é‡ä¸è¶…è¿‡ 1ã€‚ æœ‰è¶£äº‹å®ï¼šè¿™ç§åˆ—å°±åƒå†›é˜Ÿçš„åˆ¶æœï¼Œæ•´é½åˆ’ä¸€ï¼Œä¼˜åŒ–å™¨çœ‹åˆ°å®ƒä»¬å¯ä»¥é‡‡å–ç‰¹æ®Šå¤„ç†ç­–ç•¥ã€‚</li>
<li>ç­‰å€¼é›†ï¼ˆEqual Setï¼‰ï¼šæ•°æ®çš„ â€œåŒèƒèƒâ€ â€œæˆ‘ä»¬å½¢å½±ä¸ç¦»ï¼Œæ°¸è¿œç›¸åŒï¼â€â€”â€” å½“ä¸¤åˆ—æ•°æ®åœ¨æ‰€æœ‰è¡Œä¸­éƒ½å®Œç¾åŒ¹é…æ—¶ï¼ˆåŒ…æ‹¬ NULL å€¼ï¼‰ï¼Œå®ƒä»¬å°±æ„æˆç­‰å€¼é›†ã€‚ Doris çš„ç­‰å€¼é›†åˆ¤æ–­æ˜¯ NULL æ•æ„Ÿçš„ï¼ŒNULL â‰  NULL å“¦ï¼</li>
<li>å‡½æ•°ä¾èµ–ï¼ˆFunctional Dependencyï¼‰ï¼šæ•°æ®çš„ â€œå› æœå…³ç³»â€ â€œåªè¦çŸ¥é“ Xï¼Œå°±å¿…ç„¶çŸ¥é“ Yï¼â€â€”â€” å½“ä¸€ç»„åˆ—ï¼ˆXï¼‰èƒ½å”¯ä¸€å†³å®šå¦ä¸€ç»„åˆ—ï¼ˆYï¼‰çš„å€¼æ—¶ï¼Œå°±å­˜åœ¨å‡½æ•°ä¾èµ–ã€‚ X ç§°ä¸ºå†³å®šå› ç´ ï¼ˆDeterminantï¼‰ï¼ŒY ç§°ä¸ºè¢«å†³å®šå› ç´ ï¼ˆDependecyï¼‰ å®šä¹‰å¦‚ä¸‹ï¼š âˆ€Xï¼Œ Y âŠ† Rï¼Œ X â†’ Y â‡” âˆ€t1ï¼Œ t2 âˆˆ Rï¼Œ t1 [X] = t2 [X] â‡’ t1 [Y] = t2 [Y] å…¶ä¸­ï¼Œt [X] è¡¨ç¤ºå…ƒç»„ t åœ¨å±æ€§é›† X ä¸Šçš„æŠ•å½±ã€‚</li>
</ol>
<h2 data-id="heading-1">Data Trait çš„è¡¨ç¤º</h2>
<h3 data-id="heading-2">å”¯ä¸€æ€§</h3>
<p>å”¯ä¸€æ€§ä½¿ç”¨ UniqueDescription æè¿°ï¼Œ æƒ³è±¡ä¸€ä¸ªå…¬å¸çš„å‘˜å·¥ç®¡ç†ç³»ç»Ÿï¼š</p>
<ul>
<li>ç‹¬ç«‹å”¯ä¸€æ€§ï¼ˆslotsï¼‰ï¼šå°±åƒæ¯ä¸ªå‘˜å·¥çš„å·¥ç‰Œ IDï¼ˆå¦‚ 101ã€102ï¼‰ï¼Œè¿™äº›å€¼åœ¨æ•´ä¸ªå…¬å¸å†…æ˜¯ç‹¬ä¸€æ— äºŒçš„</li>
<li>è”åˆå”¯ä¸€æ€§ï¼ˆslotSetsï¼‰ï¼šä¾‹å¦‚â€œéƒ¨é—¨+å§“åâ€çš„ç»„åˆï¼Œå•ç‹¬çœ‹éƒ¨é—¨å¯èƒ½é‡å¤ï¼ˆå¤šä¸ªç ”å‘éƒ¨å‘˜å·¥ï¼‰ï¼Œå•ç‹¬çœ‹å§“åä¹Ÿå¯èƒ½é‡å¤ï¼ˆåŒåå‘˜å·¥ï¼‰ï¼Œä½†â€œç ”å‘éƒ¨+å¼ ä¸‰â€çš„ç»„åˆåœ¨å…¨å…¬å¸æ˜¯å”¯ä¸€çš„</li>
</ul>
<h3 data-id="heading-3">å‡åŒ€æ€§</h3>
<p>å‡åŒ€æ€§ä½¿ç”¨ UniformDescription æè¿°ï¼Œ åŒ…æ‹¬ï¼š</p>
<ul>
<li>å·²çŸ¥å€¼çš„å‡åŒ€åˆ—ï¼ˆæœ‰å…·ä½“ valueï¼‰ï¼š
<ul>
<li>æ¯”å¦‚æŸ¥è¯¢ WHERE department='ç ”å‘éƒ¨'ï¼Œè¿™æ—¶ department åˆ—åœ¨ç»“æœé›†ä¸­æ‰€æœ‰å€¼éƒ½æ˜¯â€œç ”å‘éƒ¨â€</li>
<li>ç±»ä¼¼ SELECT 1 as const_value ä¸­çš„ const_value åˆ—ï¼Œæ‰€æœ‰è¡Œéƒ½æ˜¯ 1</li>
</ul>
</li>
<li>æœªçŸ¥å€¼çš„å‡åŒ€åˆ—ï¼ˆæ— å…·ä½“ valueï¼‰ï¼š
<ul>
<li>ä¾‹å¦‚ LIMIT 1 åçš„æ‰€æœ‰åˆ—ï¼Œè™½ç„¶çŸ¥é“å®ƒä»¬å€¼ç›¸åŒï¼Œä½†ä¸ç¡®å®šå…·ä½“æ˜¯ä»€ä¹ˆå€¼</li>
</ul>
</li>
</ul>
<h3 data-id="heading-4">ç­‰å€¼é›†</h3>
<p>ç­‰å€¼é›†é‡‡ç”¨å¹¶æŸ¥é›†ï¼ˆä¸€ç§é«˜æ•ˆçš„æ•°æ®ç»“æ„ï¼‰æ¥ç®¡ç†ï¼Œå°±åƒå®¶æ—å…³ç³»ç½‘ï¼š</p>
<p>æ¯ä¸ªæ•°æ®åˆ—æœ€åˆéƒ½æ˜¯ç‹¬ç«‹çš„â€œä¸ªä½“â€ï¼Œ å½“å‘ç°ä¸¤åˆ—å€¼å®Œå…¨ç›¸åŒæ—¶ï¼ˆå¦‚å­˜åœ¨è°“è¯ a = bï¼‰ï¼Œå®ƒä»¬å°±è¢«åˆ’å½’åˆ°åŒä¸€ä¸ªå®¶æ—ï¼Œæœ€ç»ˆæ‰€æœ‰ç›¸ç­‰çš„åˆ—ä¼šå½¢æˆä¸€æ£µæ£µâ€œå®¶æ—æ ‘â€ï¼Œæ ‘ä¸­çš„æˆå‘˜å½¼æ­¤ç­‰ä»·ã€‚</p>
<h3 data-id="heading-5">å‡½æ•°ä¾èµ–</h3>
<p>å‡½æ•°ä¾èµ–å…³ç³»ä½¿ç”¨æœ‰å‘å›¾å®ç°ï¼Œ å°±åƒå…¬å¸æ±‡æŠ¥å…³ç³»ï¼š</p>
<ul>
<li>èŠ‚ç‚¹ï¼šä»£è¡¨ä¸€ç»„æ•°æ®åˆ—ï¼ˆå¦‚å‘˜å·¥ IDã€éƒ¨é—¨ ID ç­‰ï¼‰</li>
<li>è¾¹ï¼ˆ â†’ ï¼‰ï¼šè¡¨ç¤ºå†³å®šå…³ç³»ï¼Œæ¯”å¦‚ï¼š
<ul>
<li>å‘˜å·¥ ID â†’ å‘˜å·¥å§“åï¼ˆçŸ¥é“ ID å°±èƒ½ç¡®å®šå§“åï¼‰</li>
<li>éƒ¨é—¨ ID+é¡¹ç›® ID â†’ é¡¹ç›®ç»ç†ï¼ˆè”åˆå†³å®šï¼‰</li>
</ul>
</li>
</ul>
<p>è¿™ä¸ªå…³ç³»ç½‘å…·æœ‰ä¼ é€’æ€§ï¼šå¦‚æœ Aâ†’B ä¸” Bâ†’Cï¼Œé‚£ä¹ˆ Aâ†’C</p>
<h2 data-id="heading-6">Data Trait æ˜¯å¦‚ä½•æ¨å¯¼å‡ºæ¥çš„ï¼Ÿ</h2>
<ol>
<li>é€å±‚è°ƒæŸ¥ï¼šä»æŸ¥è¯¢è®¡åˆ’çš„æœ€åº•å±‚å¼€å§‹ï¼Œæ¯ä¸ªå¤„ç†èŠ‚ç‚¹ï¼ˆå¦‚æ‰«æã€è¿‡æ»¤ã€è¿æ¥ç­‰ï¼‰éƒ½ä¼šæ ¹æ®è‡ªèº«ç‰¹ç‚¹ç”Ÿæˆå¯¹åº”çš„æ•°æ®ç‰¹å¾æŠ¥å‘Š</li>
<li>æ‡’åŠ è½½æœºåˆ¶ï¼šåªæœ‰å½“ä¼˜åŒ–å™¨çœŸæ­£éœ€è¦è¿™äº›ç‰¹å¾æ—¶æ‰ä¼šè¿›è¡Œè®¡ç®—ï¼Œé¿å…ä¸å¿…è¦çš„åˆ†æå·¥ä½œ</li>
<li>ç‰¹å¾åˆæˆï¼šé«˜å±‚èŠ‚ç‚¹ä¼šç»¼åˆä¸‹å±‚èŠ‚ç‚¹çš„ç‰¹å¾ä¿¡æ¯ï¼Œå¹¶ç»“åˆè‡ªèº«æ“ä½œç‰¹ç‚¹ï¼Œç”Ÿæˆæ–°çš„ç‰¹å¾æè¿°ã€‚ åŒæ—¶ï¼ŒData Trait ä¹‹é—´ä¹Ÿå¯ä»¥ç›¸äº’æ¨å¯¼ï¼šå…·æœ‰ unique å±æ€§çš„ slot èƒ½å†³å®šæ‰€æœ‰å…¶ä»– slotï¼›å…·æœ‰ uniform å±æ€§çš„ slot ä¾èµ–äºæ‰€æœ‰å…¶ä»–çš„ slotï¼›ç›¸ç­‰çš„ slot äº’ç›¸ä¾èµ–ï¼›ç›¸ç­‰çš„ slot å…·æœ‰ç›¸åŒçš„ Unique å±æ€§å’Œ Uniform å±æ€§ã€‚</li>
</ol>
<h3 data-id="heading-7">Data Trait çš„æ¨å¯¼è¿‡ç¨‹ç¤ºä¾‹</h3>
<pre><code class="hljs language-SQL" lang="SQL"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> employees (
    emp_id <span class="hljs-type">INT</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
    emp_name <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>),
    email <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>),
    dept_id <span class="hljs-type">INT</span>,
    salary <span class="hljs-type">DECIMAL</span>(<span class="hljs-number">10</span>,<span class="hljs-number">2</span>),
    hire_date <span class="hljs-type">DATE</span>
) <span class="hljs-keyword">UNIQUE</span> KEY(emp_id) DISTRIBUTED <span class="hljs-keyword">BY</span> HASH(emp_id) PROPERTIES(<span class="hljs-string">'replication_num'</span><span class="hljs-operator">=</span><span class="hljs-string">'1'</span>);

<span class="hljs-keyword">SELECT</span> dept_id, <span class="hljs-built_in">COUNT</span>(<span class="hljs-operator">*</span>) <span class="hljs-keyword">AS</span> emp_count <span class="hljs-keyword">FROM</span> employees
<span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> dept_id;
</code></pre>
<p>ä»¥ä¸Šé¢çš„ SQL ä¸ºä¾‹ï¼Œè¯´æ˜ä¸€ä¸‹ DATA TRAIT çš„æ¨å¯¼è¿‡ç¨‹ï¼ŒæŸ¥è¯¢è®¡åˆ’å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-Java" lang="Java">[Aggregate]
   |
[Scan]
</code></pre>
<h4 data-id="heading-8">åŸºè¡¨æ‰«æå±‚</h4>
<p>å½“æ‰«æ employees è¡¨æ—¶ï¼Œä¼˜åŒ–å™¨å‘ç°ï¼š</p>
<ul>
<li>å”¯ä¸€æ ‡è¯†ï¼šemp_id æ˜¯ UNIQUE KEYï¼Œå…·æœ‰å”¯ä¸€æ€§ç‰¹å¾</li>
<li>å‡½æ•°ä¾èµ–ï¼šç”±äº emp_id æ˜¯ UNIQUE KEYï¼Œå®ƒå¯ä»¥å†³å®šè¡¨ä¸­æ‰€æœ‰å…¶ä»–åˆ—çš„å€¼ï¼ˆçŸ¥é“å‘˜å·¥ ID å°±èƒ½ç¡®å®šä»–çš„éƒ¨é—¨ã€å§“åç­‰ä¿¡æ¯ï¼‰</li>
</ul>
<h4 data-id="heading-9">èšåˆæ“ä½œå±‚</h4>
<p>è¿›è¡Œ GROUP BY èšåˆæ—¶ï¼Œæ•°æ®ç‰¹å¾å‘ç”Ÿäº†è½¬å˜ï¼š</p>
<ul>
<li>å”¯ä¸€æ€§å˜åŒ–
<ul>
<li>æ–°å¢çš„ç‰¹æ€§ï¼šdept_id æ˜¯åˆ†ç»„é”®ï¼Œå…·æœ‰å”¯ä¸€æ€§ç‰¹å¾ï¼›</li>
<li>ä¸¢å¤±çš„ç‰¹æ€§ï¼šåŸæœ¬ emp_id çš„å”¯ä¸€æ€§ä¸å†æœ‰æ•ˆï¼Œå› ä¸ºå¤šè¡Œæ•°æ®è¢«æŠ˜å æˆäº†åˆ†ç»„å½¢å¼ã€‚</li>
</ul>
</li>
<li>å‡½æ•°ä¾èµ–å˜åŒ–
<ul>
<li>æ–°å¢çš„å…³ç³»ï¼šç°åœ¨ dept_id æˆä¸ºæ–°çš„â€œå†³å®šå› ç´ â€ï¼Œå¯ä»¥ç¡®å®šè¯¥éƒ¨é—¨çš„å‘˜å·¥æ•°é‡ emp_countï¼ˆå°±åƒçŸ¥é“éƒ¨é—¨ç¼–å·å°±èƒ½æŸ¥åˆ°è¯¥éƒ¨é—¨çš„äººæ•°ç»Ÿè®¡ï¼‰</li>
<li>ä¸¢å¤±çš„å…³ç³»ï¼šåŸå…ˆåŸºäº emp_id çš„æ‰€æœ‰å‡½æ•°ä¾èµ–éƒ½å¤±æ•ˆäº†ï¼Œå› ä¸ºå‘˜å·¥çº§åˆ«çš„ä¿¡æ¯å·²è¢«èšåˆæ“ä½œæŠ˜å ã€‚</li>
</ul>
</li>
</ul>
<h2 data-id="heading-10">Data Trait å¦‚ä½•ä¼˜åŒ–æŸ¥è¯¢ï¼Ÿé­”æ³•èˆ¬çš„è§„åˆ™åº”ç”¨</h2>
<p>ä¸‹é¢é€šè¿‡å®Œæ•´ç¤ºä¾‹æ¼”ç¤º Data Trait å¦‚ä½•åœ¨å®é™…æŸ¥è¯¢ä¼˜åŒ–ä¸­å‘æŒ¥ä½œç”¨ã€‚å…ˆä»å»ºè¡¨å¼€å§‹ï¼Œé€æ­¥å±•ç¤ºä¼˜åŒ–å™¨å¦‚ä½•åˆ©ç”¨æ•°æ®ç‰¹å¾è¿›è¡Œä¼˜åŒ–ã€‚</p>
<h3 data-id="heading-11">å‡†å¤‡æµ‹è¯•ç¯å¢ƒ</h3>
<p>å»ºè¡¨è¯­å¥å’Œæ’å…¥æ•°æ® SQL å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-SQL" lang="SQL"><span class="hljs-comment">-- å‘˜å·¥è¡¨ï¼ˆåŒ…å«å”¯ä¸€IDï¼‰</span>
<span class="hljs-keyword">DROP</span> <span class="hljs-keyword">TABLE</span> IF <span class="hljs-keyword">EXISTS</span> employees;
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> employees (
    emp_id <span class="hljs-type">INT</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
    emp_name <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>),
    email <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>),
    dept_id <span class="hljs-type">INT</span>,
    salary <span class="hljs-type">DECIMAL</span>(<span class="hljs-number">10</span>,<span class="hljs-number">2</span>),
    hire_date <span class="hljs-type">DATE</span>
) <span class="hljs-keyword">UNIQUE</span> KEY(emp_id) DISTRIBUTED <span class="hljs-keyword">BY</span> HASH(emp_id) PROPERTIES(<span class="hljs-string">'replication_num'</span><span class="hljs-operator">=</span><span class="hljs-string">'1'</span>);

<span class="hljs-comment">-- éƒ¨é—¨è¡¨ï¼ˆåŒ…å«å”¯ä¸€IDï¼‰</span>
<span class="hljs-keyword">DROP</span> <span class="hljs-keyword">TABLE</span> IF <span class="hljs-keyword">EXISTS</span> departments;
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> departments (
    dept_id <span class="hljs-type">INT</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
    dept_name <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>),
    location <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>)
) <span class="hljs-keyword">UNIQUE</span> KEY(dept_id) DISTRIBUTED <span class="hljs-keyword">BY</span> HASH(dept_id) PROPERTIES(<span class="hljs-string">'replication_num'</span><span class="hljs-operator">=</span><span class="hljs-string">'1'</span>);

<span class="hljs-comment">-- è®¢å•è¡¨ï¼ˆåŒ…å«å”¯ä¸€IDï¼‰</span>
<span class="hljs-keyword">DROP</span> <span class="hljs-keyword">TABLE</span> IF <span class="hljs-keyword">EXISTS</span> orders;
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> orders (
    order_id <span class="hljs-type">INT</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
    customer_id <span class="hljs-type">INT</span>,
    order_date <span class="hljs-type">DATE</span>,
    amount <span class="hljs-type">DECIMAL</span>(<span class="hljs-number">10</span>,<span class="hljs-number">2</span>)
) <span class="hljs-keyword">UNIQUE</span> KEY(order_id) DISTRIBUTED <span class="hljs-keyword">BY</span> HASH(order_id) PROPERTIES(<span class="hljs-string">'replication_num'</span><span class="hljs-operator">=</span><span class="hljs-string">'1'</span>);


<span class="hljs-comment">-- æ’å…¥æµ‹è¯•æ•°æ®</span>
<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> departments <span class="hljs-keyword">SELECT</span> number, concat(<span class="hljs-string">'name'</span>,<span class="hljs-built_in">cast</span>(number <span class="hljs-keyword">as</span> string)), concat(<span class="hljs-string">'location'</span>, <span class="hljs-built_in">cast</span>(number <span class="hljs-keyword">as</span> string)) <span class="hljs-keyword">from</span> numbers("number"<span class="hljs-operator">=</span>"30");

<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> employees <span class="hljs-keyword">SELECT</span> number, concat(<span class="hljs-string">'name'</span>,<span class="hljs-built_in">cast</span>(number <span class="hljs-keyword">as</span> string)), concat(<span class="hljs-string">'email'</span>,<span class="hljs-built_in">cast</span>(number <span class="hljs-keyword">as</span> string)),number <span class="hljs-operator">%</span> <span class="hljs-number">30</span>, number, <span class="hljs-string">'2025-01-01'</span> <span class="hljs-keyword">from</span> numbers("number" <span class="hljs-operator">=</span> "100000000");

<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> orders <span class="hljs-keyword">VALUES</span>
(<span class="hljs-number">1001</span>, <span class="hljs-number">5001</span>, <span class="hljs-string">'2023-01-10'</span>, <span class="hljs-number">999.99</span>),
(<span class="hljs-number">1002</span>, <span class="hljs-number">5001</span>, <span class="hljs-string">'2023-02-15'</span>, <span class="hljs-number">1499.99</span>),
(<span class="hljs-number">1003</span>, <span class="hljs-number">5002</span>, <span class="hljs-string">'2023-01-20'</span>, <span class="hljs-number">799.99</span>),
(<span class="hljs-number">1004</span>, <span class="hljs-number">5003</span>, <span class="hljs-string">'2023-03-05'</span>, <span class="hljs-number">2499.99</span>);
</code></pre>
<h3 data-id="heading-12">Data Trait ä¼˜åŒ–å®æˆ˜æ¼”ç¤º</h3>
<h4 data-id="heading-13">æ ¹æ®è¿æ¥é”®å”¯ä¸€æ€§æ¶ˆé™¤è¿æ¥ï¼ˆELIMINATE_JOIN_BY_UKï¼‰</h4>
<p>åœºæ™¯ï¼šåœ¨è¿›è¡Œ left join æ—¶ï¼Œå³è¡¨çš„è¿æ¥é”®æ˜¯å”¯ä¸€çš„ï¼ˆå…è®¸å­˜åœ¨å¤šä¸ª NULL å€¼ï¼‰ï¼Œä¸”æŸ¥è¯¢åªéœ€è¦å·¦è¡¨æ•°æ®æ—¶...</p>
<p>é­”æ³•ï¼šç›´æ¥å»æ‰è¿™ä¸ª Joinï¼å› ä¸ºå³è¡¨è¦ä¹ˆåŒ¹é…ä¸€è¡Œï¼Œè¦ä¹ˆä¸åŒ¹é…ï¼Œä¸å½±å“å·¦è¡¨æ•°æ®å®Œæ•´æ€§ã€‚</p>
<p>ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-SQL" lang="SQL"><span class="hljs-comment">-- åŸå§‹æŸ¥è¯¢</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">COUNT</span>(emp_id) <span class="hljs-keyword">FROM</span> (
<span class="hljs-keyword">SELECT</span> e.emp_id
<span class="hljs-keyword">FROM</span> employees e
<span class="hljs-keyword">LEFT</span> <span class="hljs-keyword">OUTER</span> <span class="hljs-keyword">JOIN</span> departments d <span class="hljs-keyword">ON</span> e.dept_id <span class="hljs-operator">=</span> d.dept_id) t;

<span class="hljs-comment">-- ä¼˜åŒ–åç­‰æ•ˆæŸ¥è¯¢</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">COUNT</span>(emp_id) <span class="hljs-keyword">FROM</span> employees e;
</code></pre>
<p>å…³é—­ ELIMINATE_JOIN_BY_UK ä¼˜åŒ–æ—¶ï¼ˆä½¿ç”¨ set disable_nereids_rules = 'ELIMINATE_JOIN_BY_UK'å…³é—­ä¼˜åŒ–ï¼‰ï¼Œæ‰§è¡Œæ—¶é—´ä¸º 0.1secï¼Œ åœ¨å¼€å¯ ELIMINATE_JOIN_BY_UK ä¼˜åŒ–æ—¶ï¼Œæ‰§è¡Œæ—¶é—´ä¸º 0.05secï¼Œ<strong>æ€§èƒ½æå‡äº† 100%</strong>ã€‚</p>
<h4 data-id="heading-14">æ ¹æ®å”¯ä¸€æ€§æ¶ˆé™¤å†—ä½™èšåˆé”®ï¼ˆELIMINATE_GROUP_BYï¼‰</h4>
<p>åœºæ™¯ï¼š å½“ Group By Key åˆ—ä¸­å­˜åœ¨å…·æœ‰ unique å¹¶ä¸”éç©ºå±æ€§çš„åˆ—æ—¶...</p>
<p>é­”æ³•ï¼šå¯ä»¥ç›´æ¥æŠŠ Group By åˆ é™¤</p>
<pre><code class="hljs language-SQL" lang="SQL"><span class="hljs-comment">--åŸå§‹æŸ¥è¯¢</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">COUNT</span>(c2) <span class="hljs-keyword">FROM</span> 
(<span class="hljs-keyword">SELECT</span> emp_id c1, <span class="hljs-built_in">sum</span>(salary) c2 <span class="hljs-keyword">from</span> employees <span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> emp_id, emp_name) t;

<span class="hljs-comment">-- ä¼˜åŒ–åç­‰æ•ˆæŸ¥è¯¢</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">COUNT</span>(c2) <span class="hljs-keyword">FROM</span> 
(<span class="hljs-keyword">SELECT</span> emp_id c1, salary c2 <span class="hljs-keyword">from</span> employees) t;
</code></pre>
<p>åœ¨å…³é—­ ELIMINATE_GROUP_BY ä¼˜åŒ–æ—¶ï¼Œæ‰§è¡Œæ—¶é—´ä¸º 0.96secï¼Œ åœ¨å¼€å¯ ELIMINATE_GROUP_BY ä¼˜åŒ–æ—¶ï¼Œ  SQL çš„æ‰§è¡Œæ—¶é—´æ˜¯ 0.08secï¼Œ <strong>æ€§èƒ½æå‡äº† 1100%</strong>ã€‚</p>
<h4 data-id="heading-15">æ¶ˆé™¤å­˜åœ¨ä¾èµ–å…³ç³»çš„èšåˆé”®ï¼ˆELIMINATE_GROUP_BY_KEYï¼‰</h4>
<p>åœºæ™¯ï¼šGroup By å¤šåˆ—ï¼Œå¹¶ä¸”è¿™äº›åˆ—ä¸­å…·æœ‰å‡½æ•°ä¾èµ–å…³ç³»</p>
<p>é­”æ³•ï¼šä½¿ç”¨å‡½æ•°ä¾èµ–ä¸­è¢«å†³å®šçš„ slot å¯ä»¥åœ¨ Group By Key åˆ—ä¸­è¢«æ¶ˆé™¤ã€‚</p>
<p>ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-SQL" lang="SQL"><span class="hljs-comment">--æ¡ˆä¾‹1: æ ¹æ®å‡½æ•°æä¾›çš„å‡½æ•°ä¾èµ–æ¶ˆé™¤</span>
<span class="hljs-comment">-- email -&gt; SUBSTR(email, 1, INSTR(email, '@')-1)</span>
<span class="hljs-comment">-- åŸå§‹æŸ¥è¯¢</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">count</span>(email) <span class="hljs-keyword">FROM</span> (<span class="hljs-keyword">SELECT</span> email
<span class="hljs-keyword">FROM</span> employees
<span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> email, SUBSTR(email, INSTR(email, <span class="hljs-string">'l'</span>)<span class="hljs-operator">+</span><span class="hljs-number">1</span>)) t;
<span class="hljs-comment">-- ä¼˜åŒ–åç­‰æ•ˆæŸ¥è¯¢</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">count</span>(email) <span class="hljs-keyword">FROM</span> (<span class="hljs-keyword">SELECT</span> email
<span class="hljs-keyword">FROM</span> employees
<span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> email) t;

<span class="hljs-comment">--æ¡ˆä¾‹2: æ ¹æ®ç­‰å€¼é›†æä¾›çš„å‡½æ•°ä¾èµ–æ¶ˆé™¤</span>
<span class="hljs-comment">-- åŸå§‹æŸ¥è¯¢</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">COUNT</span>(<span class="hljs-operator">*</span>) 
<span class="hljs-keyword">FROM</span> employees e 
<span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> departments d <span class="hljs-keyword">ON</span> e.dept_id <span class="hljs-operator">=</span> d.dept_id 
<span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> e.dept_id, d.dept_id;
<span class="hljs-comment">-- ä¼˜åŒ–åç­‰æ•ˆæŸ¥è¯¢</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">COUNT</span>(<span class="hljs-operator">*</span>) 
<span class="hljs-keyword">FROM</span> employees e 
<span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> departments d <span class="hljs-keyword">ON</span> e.dept_id <span class="hljs-operator">=</span> d.dept_id 
<span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> e.dept_id;
</code></pre>
<p>ä»¥æ¡ˆä¾‹ 1 ä¸ºä¾‹ï¼Œåœ¨å…³é—­ ELIMINATE_GROUP_BY_KEY ä¼˜åŒ–æ—¶ï¼Œæ‰§è¡Œæ—¶é—´ä¸º 2.11sï¼Œ åœ¨å¼€å¯ ELIMINATE_GROUP_BY_KEY ä¼˜åŒ–æ—¶ï¼ŒSQL çš„æ‰§è¡Œæ—¶é—´ä¸º 1.41secï¼Œ <strong>æ€§èƒ½æå‡äº† 50%</strong>ã€‚</p>
<h4 data-id="heading-16">æ¶ˆé™¤å‡ä¸€åˆ—çš„èšåˆé”®ï¼ˆELIMINATE_GROUP_BY_KEY_BY_UNIFORMï¼‰</h4>
<p>åœºæ™¯ï¼šGroup By çš„åˆ—æ‰€æœ‰å€¼éƒ½ç›¸åŒ...</p>
<p>é­”æ³•ï¼šç›´æ¥å»æ‰ Group Byï¼Œå› ä¸ºæ‰€æœ‰è¡Œéƒ½å±äºåŒä¸€ç»„ã€‚</p>
<p>ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-SQL" lang="SQL"><span class="hljs-comment">-- åŸå§‹æŸ¥è¯¢</span>
<span class="hljs-keyword">SELECT</span> hire_date, <span class="hljs-built_in">max</span>(salary) <span class="hljs-keyword">FROM</span> employees <span class="hljs-keyword">WHERE</span> hire_date<span class="hljs-operator">=</span><span class="hljs-string">'2025-01-01'</span> <span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> dept_id,hire_date;

<span class="hljs-comment">-- ä¼˜åŒ–åç­‰æ•ˆæŸ¥è¯¢</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-string">'2025-01-01'</span>, <span class="hljs-built_in">max</span>(salary) <span class="hljs-keyword">FROM</span> employees <span class="hljs-keyword">WHERE</span> hire_date<span class="hljs-operator">=</span><span class="hljs-string">'2025-01-01'</span> <span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> dept_id;
</code></pre>
<p>åœ¨å…³é—­ ELIMINATE_GROUP_BY_KEY_BY_UNIFORM ä¼˜åŒ–æ—¶ï¼Œæ‰§è¡Œæ—¶é—´ä¸º 0.15secï¼Œåœ¨å¼€å¯ ELIMINATE_GROUP_BY_KEY_BY_UNIFORM ä¼˜åŒ–æ—¶ï¼ŒSQL çš„æ‰§è¡Œæ—¶é—´æ˜¯ 0.11secï¼Œ<strong>æ€§èƒ½æå‡äº† 36%</strong>ã€‚</p>
<h4 data-id="heading-17">æ¶ˆé™¤æ— æ„ä¹‰æ’åºï¼ˆELIMINATE_ORDER_BY_KEYï¼‰</h4>
<p>åœºæ™¯ï¼šæŒ‰å”¯ä¸€é”®æ’åºï¼Œ æˆ–è€…æ’åºé”®ä¸­åŒ…å«å…·æœ‰å‡½æ•°ä¾èµ–æ—¶ã€‚</p>
<p>é­”æ³•ï¼šå»æ‰è¿™ä¸ª Order Byï¼Œå› ä¸ºæ•°æ®å·²ç»è‡ªç„¶æœ‰åºï¼Œ å»æ‰å‡½æ•°ä¾èµ–ä¸­è¢«å†³å®šçš„ Keyã€‚</p>
<p>ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-SQL" lang="SQL"><span class="hljs-comment">-- æ¡ˆä¾‹1ï¼šå”¯ä¸€æ€§æ¨å¯¼çš„å‡½æ•°ä¾èµ–ç®€åŒ–</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">sum</span>(c1) <span class="hljs-keyword">FROM</span>
(<span class="hljs-keyword">SELECT</span> emp_id c1, emp_name c2
<span class="hljs-keyword">FROM</span> employees
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> emp_id,emp_name,email,dept_id,salary,hire_date
LIMIT <span class="hljs-number">1000000</span>) t;
<span class="hljs-comment">-- ä¼˜åŒ–åç­‰æ•ˆæŸ¥è¯¢</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">sum</span>(c1) <span class="hljs-keyword">FROM</span>
(<span class="hljs-keyword">SELECT</span> emp_id c1, emp_name c2
<span class="hljs-keyword">FROM</span> employees
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> emp_id
LIMIT <span class="hljs-number">1000000</span>) t;

<span class="hljs-comment">-- æ¡ˆä¾‹2ï¼šè¡¨è¾¾å¼æ¨å¯¼çš„å‡½æ•°ä¾èµ–ç®€åŒ–</span>
<span class="hljs-keyword">SELECT</span> hire_date, <span class="hljs-built_in">EXTRACT</span>(<span class="hljs-keyword">YEAR</span> <span class="hljs-keyword">FROM</span> hire_date), <span class="hljs-built_in">EXTRACT</span>(<span class="hljs-keyword">MONTH</span> <span class="hljs-keyword">FROM</span> hire_date)
<span class="hljs-keyword">FROM</span> employees
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> hire_date, <span class="hljs-built_in">EXTRACT</span>(<span class="hljs-keyword">YEAR</span> <span class="hljs-keyword">FROM</span> hire_date), <span class="hljs-built_in">EXTRACT</span>(<span class="hljs-keyword">MONTH</span> <span class="hljs-keyword">FROM</span> hire_date);
<span class="hljs-comment">-- ä¼˜åŒ–åç­‰æ•ˆæŸ¥è¯¢</span>
<span class="hljs-keyword">SELECT</span> hire_date, <span class="hljs-built_in">EXTRACT</span>(<span class="hljs-keyword">YEAR</span> <span class="hljs-keyword">FROM</span> hire_date), <span class="hljs-built_in">EXTRACT</span>(<span class="hljs-keyword">MONTH</span> <span class="hljs-keyword">FROM</span> hire_date)
<span class="hljs-keyword">FROM</span> employees
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> hire_date;

<span class="hljs-comment">-- æ¡ˆä¾‹3: å¤šåˆ—è¡¨è¾¾å¼ä¾èµ–ç®€åŒ–</span>
<span class="hljs-keyword">SELECT</span> emp_name
<span class="hljs-keyword">FROM</span> employees 
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> emp_name, email, CONCAT(emp_name, <span class="hljs-string">' '</span>, email);
<span class="hljs-comment">-- ä¼˜åŒ–åç­‰æ•ˆæŸ¥è¯¢</span>
<span class="hljs-keyword">SELECT</span> emp_name
<span class="hljs-keyword">FROM</span> employees 
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> emp_name, email;

<span class="hljs-comment">-- æ¡ˆä¾‹4: æ ¹æ®å‡åŒ€æ€§æ¶ˆé™¤</span>
<span class="hljs-keyword">SELECT</span> emp_name 
<span class="hljs-keyword">FROM</span> employees 
<span class="hljs-keyword">WHERE</span> emp_id <span class="hljs-operator">=</span> <span class="hljs-number">101</span> 
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> emp_id;
<span class="hljs-comment">--ä¼˜åŒ–åç­‰æ•ˆæŸ¥è¯¢</span>
<span class="hljs-keyword">SELECT</span> emp_name 
<span class="hljs-keyword">FROM</span> employees 
<span class="hljs-keyword">WHERE</span> emp_id <span class="hljs-operator">=</span> <span class="hljs-number">101</span>;
</code></pre>
<p>ä»¥æ¡ˆä¾‹ 1 ä¸ºä¾‹ï¼Œåœ¨å…³é—­ <code>ELIMINATE_ORDER_BY_KEY</code> ä¼˜åŒ–æ—¶ï¼ŒSQL çš„æ‰§è¡Œæ—¶é—´æ˜¯ 0.37secï¼Œ åœ¨å¼€å¯ <code>ELIMINATE_ORDER_BY_KEY</code> ä¼˜åŒ–æ—¶ï¼ŒSQL çš„æ‰§è¡Œæ—¶é—´æ˜¯ 0.13secï¼Œ<strong>æ€§èƒ½æå‡äº† 185%</strong>ã€‚</p>
<h4 data-id="heading-18">ä¼˜åŒ–æ•ˆæœå¯¹æ¯”</h4>
<p>äº”ä¸ªä¼˜åŒ–è§„åˆ™çš„æ•ˆæœå¯¹æ¯”å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œè“è‰²ä»£è¡¨å…³é—­ä¼˜åŒ–è§„åˆ™çš„ SQL æ‰§è¡Œæ—¶é—´ï¼Œæ©™è‰²ä»£è¡¨å¼€å¯ä¼˜åŒ–è§„åˆ™çš„ SQL æ‰§è¡Œæ—¶é—´ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ea8a27647e434065920052215e13b51a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VsZWN0REI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764819831&amp;x-signature=Sd9Mzc1DeYr8Ddv4VJp0xlGCLt4%3D" alt="ä¼˜åŒ–æ•ˆæœå¯¹æ¯”.png" loading="lazy"/></p>
<h2 data-id="heading-19">æœ€ä½³å®è·µ</h2>
<h3 data-id="heading-20">å»ºè®®åšæ³•ï¼šä¸ºæ‰€æœ‰å”¯ä¸€é”®åˆ—æ·»åŠ æ˜ç¡®çš„ UNIQUE çº¦æŸ</h3>
<p>æ— è®ºåˆ—æ˜¯å¦ä¸ºä¸»é”®ï¼Œåªè¦å…·æœ‰å”¯ä¸€æ€§ç‰¹å¾ï¼ˆåŒ…æ‹¬ä¸šåŠ¡å”¯ä¸€é”®ã€ç»„åˆå”¯ä¸€é”®å’Œå¤–é”®å…³è”åˆ—ï¼‰ï¼Œéƒ½åº”é€šè¿‡ UNIQUE çº¦æŸæ˜ç¡®å®šä¹‰ã€‚</p>
<pre><code class="hljs language-SQL" lang="SQL"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> orders (
    order_id <span class="hljs-type">INT</span>,
    order_code <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">20</span>));
<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> orders <span class="hljs-keyword">ADD</span> <span class="hljs-keyword">CONSTRAINT</span> orders_uk <span class="hljs-keyword">UNIQUE</span> (order_id);
</code></pre>
<p>ä¼˜åŒ–æ”¶ç›Šï¼šå¸®åŠ©ä¼˜åŒ–å™¨è¯†åˆ«å”¯ä¸€æ€§ç‰¹å¾ï¼Œå®ç° Join æ¶ˆé™¤ã€Group By ç®€åŒ–ç­‰ä¼˜åŒ–ã€‚</p>
<h3 data-id="heading-21">å»ºè®®åšæ³•ï¼šåˆç†ä½¿ç”¨ NOT NULL çº¦æŸ</h3>
<p>å¯¹ä¸šåŠ¡ä¸Šä¸å…è®¸ä¸ºç©ºçš„åˆ—æ·»åŠ  NOT NULLï¼Œå› ä¸ºä¸Šé¢æåˆ°çš„ä¸€äº›ä¼˜åŒ–è§„åˆ™ï¼Œæ˜¯è¦æ±‚ slot å”¯ä¸€ä¸”éç©ºæˆ–è€…å‡åŒ€ä¸”éç©ºæ‰èƒ½åº”ç”¨ï¼Œ æ·»åŠ  NOT NULL å¯ä»¥é¿å… NULL å€¼å¯¹ä¼˜åŒ–çš„å¹²æ‰°ã€‚</p>
<pre><code class="hljs language-Java" lang="Java">CREATE TABLE <span class="hljs-title function_">products</span> <span class="hljs-params">(
    product_id INT NOT NULL,
    product_name VARCHAR(<span class="hljs-number">100</span>)</span> NOT NULL);
</code></pre>
<h3 data-id="heading-22">é¿å…åšæ³•ï¼šè¿‡åº¦ä½¿ç”¨ SELECT *</h3>
<pre><code class="hljs language-SQL" lang="SQL"><span class="hljs-comment">-- åº”é¿å…çš„å†™æ³•</span>
explain logical plan
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> 
<span class="hljs-keyword">FROM</span> employees e
<span class="hljs-keyword">LEFT</span> <span class="hljs-keyword">OUTER</span> <span class="hljs-keyword">JOIN</span> departments d <span class="hljs-keyword">ON</span> e.dept_id <span class="hljs-operator">=</span> d.dept_id;

<span class="hljs-comment">-- æ¨èå†™æ³•</span>
explain logical plan
<span class="hljs-keyword">SELECT</span> e.<span class="hljs-operator">*</span> 
<span class="hljs-keyword">FROM</span> employees e
<span class="hljs-keyword">LEFT</span> <span class="hljs-keyword">OUTER</span> <span class="hljs-keyword">JOIN</span> departments d <span class="hljs-keyword">ON</span> e.dept_id <span class="hljs-operator">=</span> d.dept_id;
</code></pre>
<p>é—®é¢˜åŸå› ï¼šä¾‹å¦‚ï¼Œä¼˜åŒ–è§„åˆ™ ELIMINATE_JOIN_BY_UK èƒ½å¤Ÿåº”ç”¨çš„æ¡ä»¶ä¹‹ä¸€æ˜¯æŠ•å½±åˆ—ä¸­åªå‡ºç° LEFT OUTER JOIN å·¦è¡¨çš„åˆ—ï¼Œ æ‰€ä»¥å½“æ‚¨åªéœ€è¦å·¦è¡¨æ•°æ®æ—¶ï¼ŒSELECT * çš„ä½¿ç”¨ä¼šé˜»ç¢ä¼˜åŒ–å™¨åº”ç”¨ä¼˜åŒ–è§„åˆ™ã€‚</p>
<h3 data-id="heading-23">é¿å…åšæ³•ï¼šé¿å…å†—ä½™çš„åˆ†ç»„é”®å’Œæ’åºé”®</h3>
<pre><code class="hljs language-SQL" lang="SQL"><span class="hljs-comment">-- å†—ä½™åˆ†ç»„åˆ—ï¼ˆå³ä½¿ç”¨è€…çŸ¥é“product_idå†³å®šproduct_nameï¼Œä½†æ˜¯æ•°æ®åº“ç³»ç»Ÿæœªè¯†åˆ«æ­¤ä¾èµ–ï¼Œæ­¤æ—¶product_nameä¸ºå†—ä½™ï¼Œå¯ä»¥åˆ é™¤ï¼‰</span>
<span class="hljs-keyword">SELECT</span> product_id, product_name
<span class="hljs-keyword">FROM</span> products
<span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> product_id, product_name;
</code></pre>
<p>é€šè¿‡ä¸»åŠ¨é¿å…å†—ä½™çš„åˆ†ç»„é”®å’Œæ’åºé”®ï¼Œå³ä½¿æŸäº›å‡½æ•°ä¾èµ–æ— æ³•è¢«ç³»ç»Ÿè‡ªåŠ¨è¯†åˆ«ï¼Œæ‚¨ä»ç„¶å¯ä»¥æé«˜æŸ¥è¯¢æ‰§è¡Œæ•ˆç‡ï¼Œ å‡å°‘èµ„æºæ¶ˆè€—ï¼Œ ä¿æŒä»£ç ç®€æ´æ€§ã€‚</p>
<h2 data-id="heading-24">æ€»ç»“å’Œå±•æœ›</h2>
<p>Data Trait é€šè¿‡å››å¤§æ ¸å¿ƒç‰¹å¾ï¼ˆå”¯ä¸€æ€§ã€å‡åŒ€æ€§ã€ç­‰å€¼é›†ã€å‡½æ•°ä¾èµ–ï¼‰ä¸ºæŸ¥è¯¢ä¼˜åŒ–å™¨æä¾›äº†æ·±åº¦çš„æ•°æ®è®¤çŸ¥èƒ½åŠ›ï¼š</p>
<ul>
<li><strong>æ•°æ®ç‰¹å¾è¯†åˆ«</strong>ï¼šç²¾ç¡®æ•æ‰æ•°æ®çš„æœ¬è´¨å±æ€§ï¼Œå¦‚ä¸»é”®å”¯ä¸€æ€§ã€å¸¸é‡åˆ—å‡åŒ€æ€§ç­‰</li>
<li><strong>æŸ¥è¯¢è¯­ä¹‰ç†è§£</strong>ï¼šè§£æ SQL æ“ä½œèƒŒåçš„çœŸå®æ•°æ®å…³ç³»ï¼Œè¯†åˆ«å†—ä½™æ“ä½œ</li>
<li><strong>ä¼˜åŒ–å†³ç­–æ”¯æŒ</strong>ï¼šä¸ºæŸ¥è¯¢é‡å†™ã€è®¡åˆ’é€‰æ‹©ç­‰ä¼˜åŒ–æä¾›ç†è®ºä¾æ®</li>
</ul>
<p>Data Trait çš„è®¾è®¡é‡‡ç”¨äº†é«˜åº¦æ¨¡å—åŒ–çš„æ¶æ„ï¼Œä¸ºæœªæ¥çš„åŠŸèƒ½æ‰©å±•é¢„ç•™äº†å……åˆ†ç©ºé—´ã€‚ç‰¹åˆ«æ˜¯åœ¨ Uniform ç‰¹å¾çš„æ‰©å±•æ–¹é¢ï¼Œè®¡åˆ’å¼•å…¥æ›´ç²¾ç»†åŒ–çš„å–å€¼åˆ†å¸ƒæè¿°èƒ½åŠ›ã€‚å½“å‰ Uniform ä¸»è¦è®°å½•åˆ—å€¼å®Œå…¨å‡åŒ€ï¼ˆå•ä¸€å€¼ï¼‰çš„æƒ…å†µï¼Œä¸‹ä¸€æ­¥å°†æ‰©å±•ä¸ºæ”¯æŒè®°å½•æœ‰é™ç¦»æ•£å€¼çš„åœºæ™¯ã€‚ä¾‹å¦‚å½“æŸ¥è¯¢åŒ…å« WHERE status IN ï¼ˆ'active'ï¼Œ'pending'ï¼‰è¿™æ ·çš„ IN è°“è¯è¿‡æ»¤æ—¶ï¼Œä¼˜åŒ–å™¨å¯ä»¥ç²¾ç¡®è·çŸ¥ status åˆ—åœ¨æ­¤æŸ¥è¯¢ä¸Šä¸‹æ–‡ä¸­åªæœ‰ 2 ä¸ªå¯èƒ½çš„å–å€¼ã€‚è¿™ç§æ‰©å±•åçš„ Uniform ç‰¹å¾å°†ä¸ºä¼˜åŒ–å™¨å¸¦æ¥æ›´ä¸°å¯Œçš„å†³ç­–ä¾æ®ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Amazon BedrockåŠ©åŠ›é£ä¹¦æ·±è¯ºç”µå•†å¹¿å‘Šåˆ†ç±»]]></title>    <link>https://juejin.cn/post/7576907627018092595</link>    <guid>https://juejin.cn/post/7576907627018092595</guid>    <pubDate>2025-11-27T03:47:17.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576907627018092595" data-draft-id="7576918517237153842" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Amazon BedrockåŠ©åŠ›é£ä¹¦æ·±è¯ºç”µå•†å¹¿å‘Šåˆ†ç±»"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-11-27T03:47:17.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="äºšé©¬é€Šäº‘å¼€å‘è€…"/> <meta itemprop="url" content="https://juejin.cn/user/2850395271209496"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Amazon BedrockåŠ©åŠ›é£ä¹¦æ·±è¯ºç”µå•†å¹¿å‘Šåˆ†ç±»
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2850395271209496/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    äºšé©¬é€Šäº‘å¼€å‘è€…
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-27T03:47:17.000Z" title="Thu Nov 27 2025 03:47:17 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»16åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bcc59044cf43480fb3a1d998778739ac~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764820113&amp;x-signature=isiwpbbUx7tp5WWhzaC6LT2j7ME%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-0">é¡¹ç›®èƒŒæ™¯</h2>
<p>é£ä¹¦æ·±è¯ºæ˜¯ä¸­å›½é¢†å…ˆçš„å‡ºæµ·æ•°å­—è¥é”€ä¼ä¸šï¼Œä¸“æ³¨ä¸ºä¸­å›½ä¼ä¸šæä¾›ä¸€ç«™å¼æµ·å¤–æ•°å­—è¥é”€è§£å†³æ–¹æ¡ˆï¼Œæ¯å¹´ç®¡ç†300äº¿äººæ°‘å¸å¹¿å‘Šé¢„ç®—ï¼ŒæœåŠ¡è¿‘10ä¸‡å®¶ä¼ä¸šå‡ºæµ·ï¼Œäº§å“é”€å¾€å…¨çƒ230å¤šä¸ªå›½å®¶å’Œåœ°åŒºã€‚å…¶ä¸­Datahub æ˜¯é£ä¹¦æ·±è¯ºæŠ€æœ¯äº§å“äº‹ä¸šç¾¤æ•°æ®ä¸­å°éƒ¨é—¨ï¼Œä¾æ‰˜é£ä¹¦æ·±è¯ºç‹¬å®¶èµ„æºæ„å»ºçš„è¡Œä¸šå¤§æ•°æ®åº•åº§ï¼Œå¤šå¹´æ¥ä¸ºå…¬å¸å¤šéƒ¨é—¨æä¾›æ”¯æ’‘æœåŠ¡ã€‚ç”µå•†å¹¿å‘Šè¡Œä¸šåˆ†ç±»ä½œä¸ºæ•°æ®åŸºç¡€èƒ½åŠ›å»ºè®¾çš„ä¸€éƒ¨åˆ†ï¼Œåœ¨è¡Œä¸šbenchmarkã€è´¦æˆ·/ç«™ç‚¹/ç­¾çº¦ä¸»ä½“çš„è¡Œä¸šåˆ¤æ–­ç­‰åœºæ™¯ä¸­èµ·åˆ°å…³é”®ä½œç”¨ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Faws.amazon.com%2Fcn%2Fbedrock%2F" target="_blank" title="https://aws.amazon.com/cn/bedrock/" ref="nofollow noopener noreferrer">Amazon Bedrock</a>Â æ˜¯ä¸€é¡¹å®Œå…¨æ‰˜ç®¡çš„æœåŠ¡ï¼Œé€šè¿‡ API æä¾›æ¥è‡ªAmazonã€ AI21 Labsã€Anthropicã€Cohereã€Metaã€Mistral AIã€Stability AI ç­‰é¢†å…ˆäººå·¥æ™ºèƒ½å…¬å¸çš„é«˜æ€§èƒ½åŸºç¡€æ¨¡å‹ï¼ˆFMï¼‰ï¼Œå¹¶æä¾›é€šè¿‡å®‰å…¨æ€§ã€éšç§æ€§å’Œè´Ÿè´£ä»»çš„äººå·¥æ™ºèƒ½æ„å»ºç”Ÿæˆå¼äººå·¥æ™ºèƒ½åº”ç”¨ç¨‹åºæ‰€éœ€çš„ä¸€ç³»åˆ—å¹¿æ³›åŠŸèƒ½ã€‚</p>
<p>2024å¹´ä»¥å‰ï¼Œé£ä¹¦æ·±è¯ºå¹¿å‘Šåˆ†ç±»çš„æŠ€æœ¯æ–¹æ¡ˆä¸»è¦ä¾æ‰˜äºè‡ªè¡Œè®­ç»ƒçš„æ·±åº¦å­¦ä¹ æ¨¡å‹ã€‚ä¸ºæå‡æ¨¡å‹å­¦ä¹ æ•ˆç‡å¹¶é™ä½æ¨¡å‹è¿­ä»£æˆæœ¬ï¼Œ2024å¹´èµ·ï¼Œä»ä¼ ç»Ÿæ·±åº¦å­¦ä¹ æ¨¡å¼åˆ‡æ¢ä¸ºå¤šæ¨¡æ€å¤§è¯­è¨€æ¨¡å‹è¯†åˆ«æ¨¡å¼ï¼Œé‡‡ç”¨ç”±äºšé©¬é€Šäº‘ç§‘æŠ€æä¾›çš„ Claude Sonnet 3.5/3.7 ä»¥åŠNovaæ¨¡å‹ï¼Œè¾¾æˆäº†åŒæ­¥é™æœ¬å’Œå‡†ç¡®è¯†åˆ«çš„ç›®æ ‡ã€‚</p>
<blockquote>
<p>ğŸ“¢é™æ—¶æ’æ’­ï¼šæ— éœ€ç®¡ç†åŸºç¡€è®¾æ–½ï¼Œåˆ©ç”¨äºšé©¬é€ŠæŠ€æœ¯ä¸ç”Ÿæ€ï¼Œå¿«é€Ÿé›†æˆä¸éƒ¨ç½²ç”Ÿæˆå¼AIæ¨¡å‹èƒ½åŠ›ã€‚</p>
<p>âœ¨ ç²¾å¿ƒè®¾è®¡ï¼Œæ—¨åœ¨å¼•å¯¼æ‚¨æ·±å…¥æ¢ç´¢Amazon Bedrockçš„æ¨¡å‹é€‰æ‹©ä¸è°ƒç”¨ã€æ¨¡å‹è‡ªåŠ¨åŒ–è¯„ä¼°ä»¥åŠå®‰å…¨å›´æ (Guardrail)ç­‰é‡è¦åŠŸèƒ½ã€‚</p>
<p>â©å¿«å¿«ç‚¹å‡»è¿›å…¥ã€Š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdev.amazoncloud.cn%2Fexperience%2Fcloudlab%3Fid%3D6695e4c5e1432f239fae485f%26visitfrom%3D3P_Juejinhead_0606%26sc_medium%3Downed%26sc_campaign%3Dcloudlab%26sc_channel%3D3P_Juejinhead_0606" target="_blank" title="https://dev.amazoncloud.cn/experience/cloudlab?id=6695e4c5e1432f239fae485f&amp;visitfrom=3P_Juejinhead_0606&amp;sc_medium=owned&amp;sc_campaign=cloudlab&amp;sc_channel=3P_Juejinhead_0606" ref="nofollow noopener noreferrer">å¤šæ¨¡ä¸€ç«™é€š â€”â€” Amazon Bedrock ä¸Šçš„åŸºç¡€æ¨¡å‹åˆä½“éªŒ</a>ã€‹å®éªŒæ„å»ºæ— é™, æ¢ç´¢å¯ç¨‹ï¼</p>
</blockquote>
<h2 data-id="heading-1">è§£å†³æ–¹æ¡ˆè®¾è®¡</h2>
<h3 data-id="heading-2">å¹¿å‘Šåˆ†ç±»ä»»åŠ¡</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1f4e06854ee14fd2a2564a2f63efce5e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764820113&amp;x-signature=TL69olCldQ22Z2GtEQOlzJLLUXw%3D" alt="" loading="lazy"/></p>
<p>å¹¿å‘Šåˆ†ç±»ä»»åŠ¡æ¶‰åŠåˆ†æå„ç§å¹¿å‘Šç´ æï¼ˆå›¾åƒã€è§†é¢‘ã€æ–‡æœ¬ï¼‰å¹¶å°†å…¶åˆ†ç±»åˆ°ç‰¹å®šçš„è¡Œä¸šç±»åˆ«ä¸­ã€‚è¿™æœ‰åŠ©äºæ›´å¥½åœ°ç†è§£å¸‚åœºç»†åˆ†ã€ç«äº‰å¯¹æ‰‹åˆ†æå’Œæœ‰é’ˆå¯¹æ€§çš„å¹¿å‘Šç­–ç•¥ã€‚</p>
<p>è€Œå¹¿å‘Šç´ ææ¥æºäºä¸åŒçš„å¹¿å‘Šå®¢æˆ·ï¼Œæœ‰ç€ä¸åŒçš„ç±»å‹ä¸é£æ ¼ã€‚å¹¿å‘Šç´ æç”±äºæŠ•æ”¾çš„æ¸ é“ï¼ŒæŠ•æ”¾çš„å±•ç¤ºä½ç½®ä¸åŒï¼Œæœ‰ç€ä¸åŒçš„ç±»å‹å’Œå°ºå¯¸å¤§å°ã€‚ä¸ºäº†æ–¹ä¾¿ä¸‹æ¸¸ä¸šåŠ¡ç³»ç»Ÿè¿›è¡Œåˆ†æï¼Œéœ€è¦å¯¹è¿™äº›ä¸åŒçš„å¹¿å‘Šç´ æè¿›è¡Œç»Ÿä¸€å¤„ç†ï¼Œå› æ­¤éœ€è¦å¼•å…¥ç»Ÿä¸€çš„åˆ†ç±»ç±»ç›®ï¼Œç„¶åä½¿ç”¨å¤šæ¨¡æ€æ¨¡å‹å¯¹å¹¿å‘Šç´ æè¿›è¡Œå¤„ç†ï¼Œå½’ç±»åˆ°ç»Ÿä¸€çš„åˆ†ç±»ç±»ç›®ä¸­ã€‚</p>
<h3 data-id="heading-3">è¯¦ç»†è§£å†³æ–¹æ¡ˆ</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2dde3ac6588d47e084f2ccb63aa1202a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764820113&amp;x-signature=RcVQslKu3znsGR5GI0WSaUszriA%3D" alt="" loading="lazy"/></p>
<p>æˆ‘ä»¬çš„è§£å†³æ–¹æ¡ˆé‡‡ç”¨ä¸‰é˜¶æ®µæµæ°´çº¿æ¶æ„ï¼Œå……åˆ†å‘æŒ¥äºšé©¬é€Šäº‘ç§‘æŠ€ç”Ÿæˆå¼AIæœåŠ¡çš„ä¼˜åŠ¿ï¼Œå®ç°ä»åŸå§‹ç´ æåˆ°ç²¾å‡†åˆ†ç±»çš„å…¨æµç¨‹è‡ªåŠ¨åŒ–å¤„ç†ã€‚è¿™ç§ä¸‰é˜¶æ®µæ¶æ„è®¾è®¡æ—¢ä¿è¯äº†å¤„ç†æ•ˆç‡ï¼Œåˆç¡®ä¿äº†åˆ†ç±»ç²¾åº¦ï¼Œä¸ºé£ä¹¦æ·±è¯ºçš„å¹¿å‘Šä¸šåŠ¡æä¾›äº†å¼ºæœ‰åŠ›çš„æŠ€æœ¯æ”¯æ’‘ã€‚</p>
<h4 data-id="heading-4">ç¬¬ä¸€é˜¶æ®µï¼šæ•°æ®è¾“å…¥ä¸é¢„å¤„ç†</h4>
<p>å¹¿å‘Šç³»ç»Ÿçš„å…¥å£ç¯èŠ‚ï¼Œç³»ç»Ÿé¦–å…ˆæ¥æ”¶æ¥è‡ªå®¢æˆ·çš„å¤šæ ·åŒ–å¹¿å‘Šç´ æï¼ŒåŒ…æ‹¬è§†é¢‘ã€å›¾ç‰‡å’Œæ–‡æœ¬ç­‰ä¸åŒç±»å‹ã€‚éšåï¼Œé€šè¿‡æ™ºèƒ½è·¯ç”±æŠ€æœ¯è‡ªåŠ¨è¯†åˆ«å¹¶åˆ†ç±»è¿™äº›ç´ æçš„ç±»å‹ï¼Œä¸ºæ¯ç§ç´ æç¡®å®šæœ€åˆé€‚çš„å¤„ç†è·¯å¾„ã€‚æ¥ä¸‹æ¥ï¼Œç³»ç»Ÿå¯¹å„ç§æ ¼å¼çš„ç´ ææ‰§è¡Œæ ‡å‡†åŒ–é¢„å¤„ç†æ“ä½œï¼Œå¦‚è§†é¢‘é•¿åº¦è°ƒæ•´ã€æ ¼å¼è½¬æ¢ã€å°ºå¯¸è°ƒæ•´ã€æˆ–æ–‡æœ¬è§„èŒƒåŒ–ç­‰ï¼Œæœ€ç»ˆå°†æ‰€æœ‰ç´ æè½¬åŒ–ä¸ºç»Ÿä¸€çš„æ•°æ®æ ¼å¼ï¼Œä¸ºåç»­çš„åˆ†æå’Œå¤„ç†é˜¶æ®µå¥ å®šåŸºç¡€ã€‚</p>
<p><strong>Amazon Novaæ¨¡å‹ç³»åˆ—å¯¹äºå›¾ç‰‡å’Œè§†é¢‘çš„è¦æ±‚</strong></p>
<p>Amazon Nova æ¨¡å‹é…å¤‡äº†æ–°é¢–çš„è§†è§‰åŠŸèƒ½ï¼Œä½¿è¯¥æ¨¡å‹èƒ½å¤Ÿç†è§£å’Œåˆ†æå›¾åƒå’Œè§†é¢‘ã€‚æä¾›çš„å›¾åƒæˆ–è§†é¢‘è´¨é‡è¶Šé«˜ï¼Œæ¨¡å‹å‡†ç¡®ç†è§£åª’ä½“æ–‡ä»¶ä¸­ä¿¡æ¯çš„æœºä¼šå°±è¶Šå¤§ã€‚ç¡®ä¿å›¾åƒæˆ–è§†é¢‘æ¸…æ™°ï¼Œä¸”æ²¡æœ‰è¿‡å¤šçš„æ¨¡ç³Šæˆ–åƒç´ åŒ–ï¼Œä»¥ä¿è¯æ›´å‡†ç¡®çš„ç»“æœã€‚å¦‚æœå›¾åƒæˆ–è§†é¢‘å¸§åŒ…å«é‡è¦çš„æ–‡æœ¬ä¿¡æ¯ï¼Œè¯·ç¡®è®¤æ–‡æœ¬æ¸…æ™°ä¸”ä¸è¦å¤ªå°ã€‚é¿å…ä»…ä»…ä¸ºäº†æ”¾å¤§æ–‡æœ¬è€Œå‰ªæ‰å…³é”®è§†è§‰ä¸Šä¸‹æ–‡ã€‚</p>
<p>Amazon Nova æ¨¡å‹å…è®¸æ‚¨åœ¨æœ‰æ•ˆè½½è·ä¸­åŒ…å«å¤šå¼ å›¾åƒã€‚<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.aws.amazon.com%2Fnova%2Flatest%2Fuserguide%2Fprompting-video-understanding.html" target="_blank" title="https://docs.aws.amazon.com/nova/latest/userguide/prompting-video-understanding.html" ref="nofollow noopener noreferrer">æ€»æœ‰æ•ˆè½½è·å¤§å°ä¸èƒ½è¶…è¿‡ 25 MB</a>ã€‚Amazon Nova æ¨¡å‹å¯ä»¥åˆ†æä¼ é€’çš„å›¾åƒå¹¶å›ç­”é—®é¢˜ã€å¯¹å›¾åƒè¿›è¡Œåˆ†ç±»ä»¥åŠæ ¹æ®æä¾›çš„è¯´æ˜æ±‡æ€»å›¾åƒã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/465c6e47c15b40a6914ebb90ed34deaf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764820113&amp;x-signature=9gp3eDWUY4d0nnWHfbXqPYeqNlg%3D" alt="" loading="lazy"/></p>
<p>AmazonÂ  Nova æ¨¡å‹å…è®¸æ‚¨åœ¨æœ‰æ•ˆè½½è·ä¸­åŒ…å«å•ä¸ªè§†é¢‘ï¼Œå¯é‡‡ç”¨ base64 æ ¼å¼æä¾›ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ Amazon S3 URI æä¾›ã€‚<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.aws.amazon.com%2Fnova%2Flatest%2Fuserguide%2Fmodalities-video.html" target="_blank" title="https://docs.aws.amazon.com/nova/latest/userguide/modalities-video.html" ref="nofollow noopener noreferrer">ä½¿ç”¨ base64Â  æ–¹æ³•æ—¶ï¼Œæ€»æœ‰æ•ˆè½½è·å¤§å°å¿…é¡»åœ¨ 25 MB ä»¥å†…</a>ã€‚ä½†æ˜¯ï¼Œæ‚¨å¯ä»¥æŒ‡å®š Amazon S3 URI æ¥ç†è§£å›¾åƒã€è§†é¢‘å’Œæ–‡æ¡£ã€‚ä½¿ç”¨ Amazon S3Â  è®©æ‚¨èƒ½å¤Ÿåˆ©ç”¨è¯¥æ¨¡å‹å¤„ç†æ›´å¤§çš„æ–‡ä»¶å’Œå¤šä¸ªåª’ä½“æ–‡ä»¶ï¼Œè€Œä¸å—æ•´ä½“æœ‰æ•ˆè½½è·å¤§å°é™åˆ¶çº¦æŸã€‚Amazon NovaÂ  å¯ä»¥åˆ†æè¾“å…¥è§†é¢‘å¹¶å›ç­”é—®é¢˜ã€å¯¹è§†é¢‘è¿›è¡Œåˆ†ç±»ï¼Œå¹¶æ ¹æ®æä¾›çš„è¯´æ˜æ±‡æ€»è§†é¢‘ä¸­çš„ä¿¡æ¯ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/765392e5d4784e1f827b5cdeedd419ad~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764820113&amp;x-signature=fPSA%2BDyl0TyXO8%2FXQ8KeijUviqo%3D" alt="" loading="lazy"/><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6fc4b49dae9f49e0898464144a310ce7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764820113&amp;x-signature=FxtXMYJaClNBhWoERcYskf2VL%2FM%3D" alt="" loading="lazy"/></p>
<p>é’ˆå¯¹ä¸æ»¡è¶³Novaå¤„ç†æ¡ä»¶çš„å›¾ç‰‡æˆ–è§†é¢‘ï¼Œå¯å…ˆè¿›è¡Œé¢„å¤„ç†ï¼Œå°†å…¶æ ¼å¼åŒ–ä¸ºNovaå¯æ¥å—çš„åª’ä½“æ ¼å¼å’Œå¤§å°ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨FFmpegå¯¹æœ¬åœ°æ–‡ä»¶è¿›è¡Œé¢„å¤„ç†çš„ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-python" lang="python">Python
<span class="hljs-keyword">import</span> ffmpeg
<span class="hljs-keyword">import</span> os

<span class="hljs-keyword">def</span> <span class="hljs-title function_">transform_video</span>(<span class="hljs-params">file_name</span>):

    <span class="hljs-comment"># è·å–æ–‡ä»¶å¤§å°ï¼ˆä»¥å­—èŠ‚ä¸ºå•ä½ï¼‰</span>
    file_size_bytes = os.path.getsize(file_name)
    <span class="hljs-comment"># å°†æ–‡ä»¶å¤§å°è½¬æ¢ä¸ºåˆé€‚çš„å•ä½ï¼ˆä¾‹å¦‚ MBï¼‰</span>
    file_size_mb = file_size_bytes / (<span class="hljs-number">1024</span> * <span class="hljs-number">1024</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f'è§†é¢‘æ–‡ä»¶å¤§å°ä¸º: <span class="hljs-subst">{file_size_mb:<span class="hljs-number">.2</span>f}</span> MB'</span>)
    
    <span class="hljs-comment"># æŒ‡å®šæ–°çš„è¾“å‡ºæ–‡ä»¶è·¯å¾„å’Œåç§°</span>
    output_filename = os.path.splitext(os.path.basename(file_name))[<span class="hljs-number">0</span>] + <span class="hljs-string">'_proccessed.mp4'</span>
    output_path = <span class="hljs-string">"media/"</span> + output_filename

    <span class="hljs-comment"># æ£€æŸ¥è¾“å‡ºæ–‡ä»¶æ˜¯å¦å·²å­˜åœ¨</span>
    <span class="hljs-keyword">if</span> os.path.isfile(output_path):
        <span class="hljs-comment"># å¦‚æœæ–‡ä»¶å­˜åœ¨,åˆ™åˆ é™¤æ—§æ–‡ä»¶</span>
        os.remove(output_path)

    <span class="hljs-comment"># å¦‚æœè§†é¢‘æ–‡ä»¶è¿‡å¤§ï¼Œè¶…è¿‡25MBï¼Œåˆ™å‹ç¼©ä¸€ä¸‹</span>
    <span class="hljs-keyword">if</span> file_size_mb &gt; <span class="hljs-number">25</span>:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f'è§†é¢‘æ–‡ä»¶å¤§äº25MBï¼Œéœ€è¦å‹ç¼©\n'</span>)
        <span class="hljs-keyword">try</span>:
            probe = ffmpeg.probe(file_name)

            <span class="hljs-comment"># æ£€æŸ¥è§†é¢‘æµæ˜¯å¦å­˜åœ¨</span>
            video_stream = <span class="hljs-built_in">next</span>((stream <span class="hljs-keyword">for</span> stream <span class="hljs-keyword">in</span> probe[<span class="hljs-string">'streams'</span>] <span class="hljs-keyword">if</span> stream[<span class="hljs-string">'codec_type'</span>] == <span class="hljs-string">'video'</span>), <span class="hljs-literal">None</span>)
            <span class="hljs-keyword">if</span> video_stream <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:
                <span class="hljs-built_in">print</span>(<span class="hljs-string">f"<span class="hljs-subst">{file_name}</span> does not contain a video stream."</span>)
            <span class="hljs-keyword">else</span>:
                <span class="hljs-comment"># è·å–è§†é¢‘åˆ†è¾¨ç‡</span>
                video_width = video_stream[<span class="hljs-string">'width'</span>]
                video_height = video_stream[<span class="hljs-string">'height'</span>]
                <span class="hljs-built_in">print</span>(<span class="hljs-string">f"Original Video resolution: <span class="hljs-subst">{video_width}</span>x<span class="hljs-subst">{video_height}</span>"</span>)

                <span class="hljs-comment"># è®¡ç®—æ–°çš„åˆ†è¾¨ç‡(é•¿å®½å„ä¸ºåŸæ¥çš„ä¸€åŠ)</span>
                new_width = video_width // <span class="hljs-number">2</span>
                new_height = video_height // <span class="hljs-number">2</span>

                <span class="hljs-comment"># è®¾ç½®ffmpegæµ</span>
                stream = ffmpeg.<span class="hljs-built_in">input</span>(file_name)

                <span class="hljs-comment"># è®¾ç½®è§†é¢‘ç¼–ç å™¨å’Œåˆ†è¾¨ç‡</span>
                stream = ffmpeg.<span class="hljs-built_in">filter</span>(stream, <span class="hljs-string">'scale'</span>, new_width, new_height)
                stream = ffmpeg.output(stream, output_path, vcodec=<span class="hljs-string">'libx264'</span>, acodec=<span class="hljs-string">'aac'</span>, f=<span class="hljs-string">'mp4'</span>, crf=<span class="hljs-number">23</span>, preset=<span class="hljs-string">'veryfast'</span>)

                <span class="hljs-comment"># è¿è¡Œ FFmpeg å‘½ä»¤</span>
                ffmpeg.run(stream, overwrite_output=<span class="hljs-literal">True</span>)
                <span class="hljs-built_in">print</span>(<span class="hljs-string">f'è§†é¢‘å‹ç¼©æˆåŠŸ,è¾“å‡ºæ–‡ä»¶: <span class="hljs-subst">{output_path}</span>'</span>)

        <span class="hljs-keyword">except</span> ffmpeg.Error <span class="hljs-keyword">as</span> e:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"Error: <span class="hljs-subst">{e.stderr}</span>"</span>, e.stdout)

    <span class="hljs-comment"># å¦‚æœè§†é¢‘æ ¼æ–‡ä»¶ç¼–ç ä¸º Novaä¸æ”¯æŒçš„ç±»å‹ï¼Œå°è¯•è½¬ä¸º Nova æ”¯æŒçš„ç¼–ç H264</span>
    <span class="hljs-keyword">else</span>:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f'è§†é¢‘æ–‡ä»¶å¤§å°OKï¼Œç›´æ¥è½¬æˆH264'</span>)

        <span class="hljs-comment"># è®¾ç½®ffmpegæµ</span>
        stream = ffmpeg.<span class="hljs-built_in">input</span>(file_name)
        stream = ffmpeg.output(stream, output_path, vcodec=<span class="hljs-string">'libx264'</span>, acodec=<span class="hljs-string">'aac'</span>, f=<span class="hljs-string">'mp4'</span>)

        <span class="hljs-comment"># è¿è¡Œffmpegå‘½ä»¤</span>
        ffmpeg.run(stream)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f'Video converted to H.264 and saved as <span class="hljs-subst">{output_path}</span>'</span>)
    
    <span class="hljs-comment"># è¿”å›æ–°çš„å¤„ç†åçš„æ–‡ä»¶å…¨è·¯å¾„</span>
    <span class="hljs-keyword">return</span> output_path
</code></pre>
<h4 data-id="heading-5">ç¬¬äºŒé˜¶æ®µï¼šå¤šæ¨¡æ€ç†è§£</h4>
<p>åœ¨ç¬¬ä¸€é˜¶æ®µï¼Œä½¿ç”¨å¤šæ¨¡æ€å¤§è¯­è¨€æ¨¡å‹å¯¹å¹¿å‘Šç´ æå†…å®¹è¿›è¡Œæè¿°ï¼Œæ¥æ”¶è§†é¢‘ã€å›¾ç‰‡ã€æ–‡æœ¬ä¸‰ç§ä¸»è¦ç±»å‹çš„ç´ æã€‚å¤§è¯­è¨€æ¨¡å‹èƒ½å¤Ÿå¤„ç†å¹¶ç†è§£è¿™äº›å†…å®¹ï¼Œå¹¶ç”Ÿæˆå†…å®¹æè¿°ä¸æ€»ç»“æ–‡æœ¬ã€‚</p>
<p>Amazon Novaæ¨¡å‹èƒ½å¤Ÿå¤„ç†æ–‡æœ¬ã€å›¾åƒã€è§†é¢‘ç­‰å¤šç§æ¨¡æ€çš„æ•°æ®ï¼Œå¯ä»¥ç›´æ¥è¾“å‡ºç»¼åˆæè¿°ã€‚ç³»ç»Ÿèƒ½å¤Ÿè¯†åˆ«è¿™äº›ä¸åŒç±»å‹çš„ç´ æï¼Œå¹¶è¿›è¡Œåˆæ­¥çš„å†…å®¹ç†è§£å’Œç‰¹å¾æå–ã€‚æˆ‘ä»¬å¯ä»¥å°†å¹¿å‘Šç´ æç›´æ¥è¾“å…¥åˆ°Novaæ¨¡å‹å¯¹è§†é¢‘ã€å›¾åƒå†…å®¹è¿›è¡Œç†è§£ã€‚</p>
<p>Novaé€šè¿‡sdkå¯ä»¥èƒ½å¤Ÿç›´æ¥å¤„ç†è§†é¢‘ç‰‡æ®µï¼Œä¾‹å¦‚é’ˆå¯¹æœ¬åœ°è§†é¢‘ç†è§£ï¼Œä½¿ç”¨åˆ°çš„å‚è€ƒæç¤ºè¯å’Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">Python
import base64
import boto3
import json

def video_understanding(file_name):
    <span class="hljs-comment"># Create a Bedrock Runtime client in the AWS Region of your choice.</span>
    <span class="hljs-attr">client</span> = boto3.client(
        "bedrock-runtime",
        <span class="hljs-attr">region_name</span>=<span class="hljs-string">"us-east-1"</span>,
    )

    <span class="hljs-attr">MODEL_ID</span> = <span class="hljs-string">"us.amazon.nova-lite-v1:0"</span>

    <span class="hljs-comment"># Open the image you'd like to use and encode it as a Base64 string.</span>
    with open(file_name, "rb") as video_file:
        <span class="hljs-attr">binary_data</span> = video_file.read()
        <span class="hljs-attr">base_64_encoded_data</span> = base64.b64encode(binary_data)
        <span class="hljs-attr">base64_string</span> = base_64_encoded_data.decode(<span class="hljs-string">"utf-8"</span>)
    <span class="hljs-comment"># Define your system prompt(s).</span>
    <span class="hljs-attr">system_list</span>= [
        {
            <span class="hljs-string">"text"</span>: <span class="hljs-string">"You are a expert to understand advertising video materials."</span>
        }
    ]
    <span class="hljs-comment"># Define a "user" message including both the image and a text prompt.</span>
    <span class="hljs-attr">message_list</span> = [
        {
            <span class="hljs-string">"role"</span>: <span class="hljs-string">"user"</span>,
            <span class="hljs-string">"content"</span>: [
                {
                    <span class="hljs-string">"video"</span>: {
                        <span class="hljs-string">"format"</span>: <span class="hljs-string">"mp4"</span>,
                        <span class="hljs-string">"source"</span>: {<span class="hljs-string">"bytes"</span>: base64_string},
                    }
                },
                {
                    <span class="hljs-string">"text"</span>: <span class="hljs-string">"Please understand and describe the information in the video, focusing on the product info to classify the product. Within 100 words."</span>
                },
            ],
        }
    ]
    <span class="hljs-comment"># Configure the inference parameters.</span>
    <span class="hljs-attr">inf_params</span> = {<span class="hljs-string">"maxTokens"</span>: <span class="hljs-number">3000</span>, <span class="hljs-string">"topP"</span>: <span class="hljs-number">0.1</span>, <span class="hljs-string">"topK"</span>: <span class="hljs-number">20</span>, <span class="hljs-string">"temperature"</span>: <span class="hljs-number">0.3</span>}

    <span class="hljs-attr">native_request</span> = {
        "schemaVersion": "messages-v1",
        "messages": message_list,
        "system": system_list,
        "inferenceConfig": inf_params,
    }
    <span class="hljs-comment"># Invoke the model and extract the response body.</span>
    <span class="hljs-attr">response</span> = client.invoke_model(modelId=MODEL_ID, body=json.dumps(native_request))
    <span class="hljs-attr">model_response</span> = json.loads(response[<span class="hljs-string">"body"</span>].read())
    <span class="hljs-comment"># Pretty print the response JSON.</span>
    print("<span class="hljs-section">[Full Response]</span>")
    print(json.dumps(model_response, <span class="hljs-attr">indent</span>=<span class="hljs-number">2</span>))
    <span class="hljs-comment"># Print the text content for easy readability.</span>
    <span class="hljs-attr">content_text</span> = model_response[<span class="hljs-string">"output"</span>][<span class="hljs-string">"message"</span>][<span class="hljs-string">"content"</span>][<span class="hljs-number">0</span>][<span class="hljs-string">"text"</span>]
    print("\n<span class="hljs-section">[Response Content Text]</span>")
    print(content_text)
    
    return content_text
</code></pre>
<p>é’ˆå¯¹è§†é¢‘æ–‡ä»¶è¿‡å¤§ï¼ˆå¤§äº25MBï¼‰ï¼Œæˆ–è€…æ–‡ä»¶å·²ä¿å­˜åœ¨Amazon S3ä¸­çš„è§†é¢‘ï¼Œå¯ç›´æ¥æŒ‡å®šå…¶æ¥æºä¸ºS3ï¼Œæ— é¡»æœ¬åœ°å†ä¸‹è½½ï¼Œç›´æ¥è¯»å–S3å¹¶ç†è§£çš„ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">Python
import base64
import boto3
import json

def video_understanding_for_s3(s3_uri):
    
    <span class="hljs-comment"># åˆ›å»º STS å®¢æˆ·ç«¯</span>
    <span class="hljs-attr">sts_client</span> = boto3.client(<span class="hljs-string">'sts'</span>)

    <span class="hljs-comment"># è·å–è´¦æˆ· ID</span>
    <span class="hljs-attr">account_id</span> = sts_client.get_caller_identity()[<span class="hljs-string">'Account'</span>]
    
    
    <span class="hljs-comment"># Create a Bedrock Runtime client in the AWS Region of your choice.</span>
    <span class="hljs-attr">client</span> = boto3.client(
        "bedrock-runtime",
        <span class="hljs-attr">region_name</span>=<span class="hljs-string">"us-east-1"</span>,
    )

    <span class="hljs-attr">MODEL_ID</span> = <span class="hljs-string">"us.amazon.nova-lite-v1:0"</span>
    <span class="hljs-comment"># Define your system prompt(s).</span>
    <span class="hljs-attr">system_list</span> = [
        {
            <span class="hljs-string">"text"</span>: <span class="hljs-string">"You are a expert to understand advertising video materials."</span>
        }
    ]
    <span class="hljs-comment"># Define a "user" message including both the image and a text prompt.</span>
    <span class="hljs-attr">message_list</span> = [
        {
            <span class="hljs-string">"role"</span>: <span class="hljs-string">"user"</span>,
            <span class="hljs-string">"content"</span>: [
                {
                    <span class="hljs-string">"video"</span>: {
                        <span class="hljs-string">"format"</span>: <span class="hljs-string">"mp4"</span>,
                        <span class="hljs-string">"source"</span>: {
                            <span class="hljs-string">"s3Location"</span>: {
                                <span class="hljs-string">"uri"</span>: f<span class="hljs-string">"{s3_uri}"</span>, 
                                <span class="hljs-string">"bucketOwner"</span>: f<span class="hljs-string">"{account_id}"</span>
                            }
                        }
                    }
                },
                {
                    <span class="hljs-string">"text"</span>: <span class="hljs-string">"Please understand and describe the information in the video, focusing on the product info to classify the product. Within 100 words."</span>
                }
            ]
        }
    ]
    <span class="hljs-comment"># Configure the inference parameters.</span>
    <span class="hljs-attr">inf_params</span> = {<span class="hljs-string">"maxTokens"</span>: <span class="hljs-number">300</span>, <span class="hljs-string">"topP"</span>: <span class="hljs-number">0.1</span>, <span class="hljs-string">"topK"</span>: <span class="hljs-number">20</span>, <span class="hljs-string">"temperature"</span>: <span class="hljs-number">0.3</span>}

    <span class="hljs-attr">native_request</span> = {
        "schemaVersion": "messages-v1",
        "messages": message_list,
        "system": system_list,
        "inferenceConfig": inf_params,
    }
    <span class="hljs-comment"># Invoke the model and extract the response body.</span>
    <span class="hljs-attr">response</span> = client.invoke_model(modelId=MODEL_ID, body=json.dumps(native_request))
    <span class="hljs-attr">model_response</span> = json.loads(response[<span class="hljs-string">"body"</span>].read())
    <span class="hljs-comment"># Pretty print the response JSON.</span>
    print("<span class="hljs-section">[Full Response]</span>")
    print(json.dumps(model_response, <span class="hljs-attr">indent</span>=<span class="hljs-number">2</span>))
    <span class="hljs-comment"># Print the text content for easy readability.</span>
    <span class="hljs-attr">content_text</span> = model_response[<span class="hljs-string">"output"</span>][<span class="hljs-string">"message"</span>][<span class="hljs-string">"content"</span>][<span class="hljs-number">0</span>][<span class="hljs-string">"text"</span>]
    print("\n<span class="hljs-section">[Response Content Text]</span>")
    print(content_text)
    return content_text
</code></pre>
<h4 data-id="heading-6">ç¬¬ä¸‰é˜¶æ®µï¼šå¤šæ¨¡æ€åˆ†ç±»</h4>
<p>ç³»ç»Ÿå¯¹é¢„å¤„ç†å®Œæˆçš„ç´ æè¿›è¡Œæ·±åº¦åˆ†æï¼Œå°†å¹¿å‘Šå›¾ç‰‡å†…å®¹ä¸ç›¸åº”çš„å¹¿å‘Šè¯­æ–‡æœ¬è¿›è¡Œæ™ºèƒ½å…³è”å’Œè”åˆåˆ†æï¼Œä»è€Œè·å–æ›´å…¨é¢çš„è¯­ä¹‰ç†è§£ã€‚éšåï¼Œè¿™äº›å…³è”æ•°æ®é€šè¿‡æ ‡â€å››çº§åˆ†ç±»æ¨¡å‹â€çš„ç²¾ç»†åŒ–å¤„ç†æµç¨‹ï¼Œå±‚å±‚é€’è¿›åœ°è¿›è¡Œç±»åˆ«åˆ’åˆ†å’Œç‰¹å¾æå–ï¼Œæœ€ç»ˆç”Ÿæˆè¯¦å°½çš„è§†é¢‘ç†è§£å†…å®¹æ–‡æœ¬ï¼Œå®Œæˆå¯¹å¹¿å‘Šç´ æçš„å…¨æ–¹ä½åˆ†ç±»æ ‡æ³¨ ï¼Œä¸ºåç»­çš„ç²¾å‡†æŠ•æ”¾å¥ å®šæ•°æ®åŸºç¡€ã€‚</p>
<h5 data-id="heading-7">å››çº§åˆ†ç±»æ¨¡å‹</h5>
<p>ç”µå•†å¹¿å‘Šç´ æå­˜åœ¨å¤šç§å“ç±»ï¼Œä»¥åŠå¤§ç±»ä¸­åŒ…å«å¤šçº§å­åˆ†ç±»çš„åµŒå¥—åˆ†ç±»ç»“æ„ï¼Œä¸ºäº†è·Ÿå„ä¸»æµç”µå•†å¹³å°è¡”æ¥ï¼ŒåŒæ—¶ä¾¿äºSKUç®¡ç†ï¼Œç°å°†æ‰€æœ‰ç´ æç»Ÿä¸€å½’ä¸ºå››çº§åˆ†ç±»:</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0c1c94fff50f45d5931a38f017fe88b9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764820113&amp;x-signature=6l0wL%2Bft1MiwxHmYO7T7FH0VkxU%3D" alt="" loading="lazy"/></p>
<p>é’ˆå¯¹åŸå§‹çš„åˆ†ç±»ï¼Œéœ€è¦å¯¹å…¶æ ¼å¼åŒ–ï¼Œä»¥ä¾¿äºåç»­è¾“å…¥ç»™LLMè¿›è¡Œå¤„ç†ã€‚ä»¥ä¸‹ä¸ºä¸¤ç§å¸¸è§çš„å¤„ç†æ–¹å¼ï¼š</p>
<h5 data-id="heading-8">å¤šçº§åˆ†ç±»-å¸¦IDå·</h5>
<pre><code class="hljs language-css" lang="css">JSON
<span class="hljs-selector-attr">[  {    <span class="hljs-string">"category_id"</span>: <span class="hljs-string">"1"</span>,    <span class="hljs-string">"name"</span>: <span class="hljs-string">"æœè£…"</span>,    <span class="hljs-string">"children"</span>: [      {        <span class="hljs-string">"category_id"</span>: <span class="hljs-string">"1-1"</span>,        <span class="hljs-string">"name"</span>: <span class="hljs-string">"å¥³è£…"</span>,        <span class="hljs-string">"children"</span>: [          {            <span class="hljs-string">"category_id"</span>: <span class="hljs-string">"1-1-1"</span>,            <span class="hljs-string">"name"</span>: <span class="hljs-string">"å¥³è£…è£™è£…"</span>          },          {            <span class="hljs-string">"category_id"</span>: <span class="hljs-string">"1-1-2"</span>,            <span class="hljs-string">"name"</span>: <span class="hljs-string">"å¥³è£…Tæ¤"</span>          },          {            <span class="hljs-string">"category_id"</span>: <span class="hljs-string">"1-1-3"</span>,            <span class="hljs-string">"name"</span>: <span class="hljs-string">"å¥³è£…å¤–å¥—/å¤§è¡£"</span>          },          {            <span class="hljs-string">"category_id"</span>: <span class="hljs-string">"1-1-4"</span>,            <span class="hljs-string">"name"</span>: <span class="hljs-string">"å¥³è£…è£¤è£…/ç‰›ä»”è£¤"</span>          },          {            <span class="hljs-string">"category_id"</span>: <span class="hljs-string">"1-1-5"</span>,            <span class="hljs-string">"name"</span>: <span class="hljs-string">"å¥³è£…è¥¿æœ/å¥—è£…"</span>          },          {            <span class="hljs-string">"category_id"</span>: <span class="hljs-string">"1-1-6"</span>,            <span class="hljs-string">"name"</span>: <span class="hljs-string">"å¥³è£…è¡¬è¡«"</span>          },          {            <span class="hljs-string">"category_id"</span>: <span class="hljs-string">"1-1-7"</span>,            <span class="hljs-string">"name"</span>: <span class="hljs-string">"å¥³è£…æ¯›è¡£/å«è¡£"</span>          },          {            <span class="hljs-string">"category_id"</span>: <span class="hljs-string">"1-1-8"</span>,            <span class="hljs-string">"name"</span>: <span class="hljs-string">"å¥³è£…ç¡è¡£/å®¶å±…æœ"</span>          },          {            <span class="hljs-string">"category_id"</span>: <span class="hljs-string">"1-1-9"</span>,            <span class="hljs-string">"name"</span>: <span class="hljs-string">"å¥³è£…ä¸è¢œ/è¢œå­"</span>          },          {            <span class="hljs-string">"category_id"</span>: <span class="hljs-string">"1-1-10"</span>,            <span class="hljs-string">"name"</span>: <span class="hljs-string">"å¥³è£…-å…¶ä»–"</span>          }        ]</span>
      },
      ...
</code></pre>
<h5 data-id="heading-9">å¤šçº§åˆ†ç±»-ä¸å¸¦IDå·</h5>
<pre><code class="hljs language-css" lang="css">JSON
<span class="hljs-selector-attr">[  {    <span class="hljs-string">"name"</span>: <span class="hljs-string">"æœè£…"</span>,    <span class="hljs-string">"children"</span>: [      {        <span class="hljs-string">"name"</span>: <span class="hljs-string">"å¥³è£…"</span>,        <span class="hljs-string">"children"</span>: [          {            <span class="hljs-string">"name"</span>: <span class="hljs-string">"å¥³è£…è£™è£…"</span>          },          {            <span class="hljs-string">"name"</span>: <span class="hljs-string">"å¥³è£…Tæ¤"</span>          },          {            <span class="hljs-string">"name"</span>: <span class="hljs-string">"å¥³è£…å¤–å¥—/å¤§è¡£"</span>          },          {            <span class="hljs-string">"name"</span>: <span class="hljs-string">"å¥³è£…è£¤è£…/ç‰›ä»”è£¤"</span>          },          {            <span class="hljs-string">"name"</span>: <span class="hljs-string">"å¥³è£…è¥¿æœ/å¥—è£…"</span>          },          {            <span class="hljs-string">"name"</span>: <span class="hljs-string">"å¥³è£…è¡¬è¡«"</span>          },          {            <span class="hljs-string">"name"</span>: <span class="hljs-string">"å¥³è£…æ¯›è¡£/å«è¡£"</span>          },          {            <span class="hljs-string">"name"</span>: <span class="hljs-string">"å¥³è£…ç¡è¡£/å®¶å±…æœ"</span>          },          {            <span class="hljs-string">"name"</span>: <span class="hljs-string">"å¥³è£…ä¸è¢œ/è¢œå­"</span>          },          {            <span class="hljs-string">"name"</span>: <span class="hljs-string">"å¥³è£…-å…¶ä»–"</span>          }        ]</span>
      },
      ...
</code></pre>
<p>ç”±äºLLMå·²å…·å¤‡å¾ˆå¼ºçš„ç†è§£èƒ½åŠ›ï¼Œä»¥ä¸Šä¸¤ç§æ–¹å¼å¯¹äºLLMçš„ç†è§£ç²¾åº¦æ— è¾ƒå¤§å·®å¼‚ã€‚â€å¤šçº§åˆ†ç±»-å¸¦IDå·â€çš„æ–¹å¼ï¼Œç”±äºä¿ç•™äº†IDå·ï¼Œä¾¿äºåŒé™¤LLMä¹‹å¤–çš„å…¶ä»–ä¸šåŠ¡ä»£ç ç›¸è¡”æ¥ï¼›â€å¤šçº§åˆ†ç±»-ä¸å¸¦IDå·â€çš„æ–¹å¼åˆ™æ›´ç®€æ´ï¼Œä¾¿äºèŠ‚çœLLM input tokenæ•°ã€‚å¯æŒ‰ç…§å®é™…éœ€æ±‚çµæ´»é€‰æ‹©ã€‚</p>
<p>å› Claude Sonnetç³»åˆ—æ¨¡å‹å…·å¤‡æ›´å¼ºçš„é€»è¾‘æ¨ç†èƒ½åŠ›ï¼Œå› æ­¤ä½¿ç”¨Claude 3.7 Sonnetæ¨¡å‹åšæœ€åçš„åˆ†ç±»å¤„ç†ã€‚åŒæ—¶ï¼Œè€ƒè™‘åˆ°å››çº§åˆ†ç±»åœ¨æ¯æ¬¡è°ƒç”¨LLMæ—¶ï¼Œéƒ½ä¸ä¼šå˜ï¼Œå› æ­¤å¯ä»¥è€ƒè™‘åˆ©ç”¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.aws.amazon.com%2Fbedrock%2Flatest%2Fuserguide%2Fprompt-caching.html" target="_blank" title="https://docs.aws.amazon.com/bedrock/latest/userguide/prompt-caching.html" ref="nofollow noopener noreferrer">Bedrcok Prompt CachingåŠŸèƒ½</a>ï¼Œå°†å…¶åˆ†ç±»åˆ—è¡¨è¿›è¡Œç¼“å­˜ï¼Œä»¥ä¾¿åŠ å¿«æ¨ç†é€Ÿåº¦ï¼ŒåŒæ—¶èŠ‚çœå¤§é‡çš„input tokenæ¶ˆè€—ã€‚</p>
<p>ä½¿ç”¨Claude 3.7 Sonnetæ¨¡å‹åšåˆ†ç±»çš„å‚è€ƒæç¤ºè¯å’Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">Python
from botocore.config import Config
import json
import re

<span class="hljs-comment">#role æ–¹å¼åˆå§‹åŒ–bedrock</span>
<span class="hljs-attr">config</span> = Config(read_timeout=<span class="hljs-number">1000</span>) <span class="hljs-comment"># second</span>
<span class="hljs-attr">bedrock_runtime</span> = boto3.client(<span class="hljs-string">'bedrock-runtime'</span>, config=config)

def generate_message(bedrock_runtime, model_id, system_prompt, messages, max_tokens):

    <span class="hljs-attr">body</span>=json.dumps(
        {
            "anthropic_version": "bedrock-2023-05-31",
            "max_tokens": max_tokens,
            "temperature": 0.1,
            "top_k": 20,
            "top_p": 0.9,
            "system": system_prompt,
            "messages": messages
        }
    )  
    
<span class="hljs-comment">#     print(body)</span>
    <span class="hljs-attr">response</span> = bedrock_runtime.invoke_model(body=body, modelId=model_id)
    <span class="hljs-attr">response_body</span> = json.loads(response.get(<span class="hljs-string">'body'</span>).read())
   
    return response_body


def video_classify(content):

    <span class="hljs-comment"># æ‰“å¼€æ–‡ä»¶å¹¶è¯»å–4çº§åˆ†ç±»æ ¼å¼åŒ–å¥½çš„JSONæ•°æ®</span>
    with open('category_no_id.json', 'r', <span class="hljs-attr">encoding</span>=<span class="hljs-string">'utf-8'</span>) as f:
        <span class="hljs-attr">data</span> = json.load(f)

    <span class="hljs-comment"># å°†JSONæ•°æ®è½¬æ¢ä¸ºå­—ç¬¦ä¸²,å¹¶å»é™¤æ‰€æœ‰ç©ºç™½å­—ç¬¦</span>
    <span class="hljs-attr">category_json</span> = re.sub(r<span class="hljs-string">'\s+'</span>, <span class="hljs-string">''</span>, json.dumps(data, ensure_ascii=<span class="hljs-literal">False</span>,separators=(<span class="hljs-string">','</span>, <span class="hljs-string">':'</span>)))
   
    <span class="hljs-attr">prompt</span>=f<span class="hljs-string">'''
        &lt;class&gt;
        {category_json}
        &lt;/class&gt;
        &lt;instruction&gt;
        1. ä½ çš„ä»»åŠ¡æ˜¯å°†ç»™å®šçš„å¹¿å‘Šè§†é¢‘æè¿°&lt;video_description&gt;ï¼Œå‡†ç¡®åˆ†ç±»åˆ°&lt;class&gt;é¢„å®šä¹‰çš„1çº§ï¼Œ2çº§å’Œ3çº§ç±»åˆ«ä¸­ã€‚
        2. ä»ä¸Šè¿°&lt;class&gt;ç±»åˆ«ä¸­é€‰æ‹©æœ€åŒ¹é…çš„1çº§ï¼Œ2çº§å’Œ3çº§å­ç±»åˆ«ï¼Œéœ€è¦1ï¼Œ2ï¼Œ3çº§åˆ†ç±»éƒ½éœ€è¦ç»™å‡ºï¼Œå¦‚æœæ— æ³•ç¡®å®šåˆ†ç±»ï¼Œå›ç­”"0"ã€‚
        3. è¯·å›å¤å®Œæ•´åˆ†ç±»ï¼ŒåŒ…æ‹¬IDï¼Œä¸éœ€è¦å…¶ä»–è§£é‡Šã€‚
        4. ç›´æ¥ç»™å‡ºç­”æ¡ˆï¼Œæ— éœ€å‰è¨€ã€‚
        &lt;/instruction&gt;
        &lt;output_format&gt;
        æœè£…|å¥³è£…|å¥³è£…è£™è£…
        &lt;/output_format&gt;'''</span>
    
    <span class="hljs-attr">text_video</span> = f<span class="hljs-string">''' 
        &lt;video_description&gt;
        {content}
        &lt;/video_description&gt;
    '''</span>

    <span class="hljs-comment"># ä½¿ç”¨prompt cachingåŠŸèƒ½ï¼Œå°†ä¸å˜çš„åˆ†ç±»åˆ—è¡¨cachingä½</span>
    <span class="hljs-attr">prompt_final</span> = [{<span class="hljs-string">"type"</span>: <span class="hljs-string">"text"</span>,<span class="hljs-string">"text"</span>: prompt, <span class="hljs-string">"cache_control"</span>: {<span class="hljs-string">"type"</span>: <span class="hljs-string">"ephemeral"</span>}}, {<span class="hljs-string">"type"</span>: <span class="hljs-string">"text"</span>,<span class="hljs-string">"text"</span>: text_video}]

    <span class="hljs-comment"># model_id='anthropic.claude-3-5-sonnet-20240620-v1:0'</span>
    <span class="hljs-attr">model_id</span> = <span class="hljs-string">"us.anthropic.claude-3-7-sonnet-20250219-v1:0"</span>
    <span class="hljs-attr">system_prompt</span> = <span class="hljs-string">"ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„å¹¿å‘Šè§†é¢‘å†…å®¹åˆ†ç±»æœºå™¨äºº,ä¸“é—¨è´Ÿè´£åˆ†æå’Œåˆ†ç±»å¹¿å‘Šè§†é¢‘ã€‚"</span>
    <span class="hljs-attr">max_tokens</span> = <span class="hljs-number">1000</span>
    <span class="hljs-attr">user_message</span> =  {<span class="hljs-string">"role"</span>: <span class="hljs-string">"user"</span>, <span class="hljs-string">"content"</span>: prompt_final}
    <span class="hljs-attr">messages</span> = [user_message]
    <span class="hljs-comment"># print(messages)</span>
    <span class="hljs-attr">response</span> = generate_message(bedrock_runtime, model_id, system_prompt, messages, max_tokens)
    print(response)
    return response<span class="hljs-section">['content']</span><span class="hljs-section">[0]</span><span class="hljs-section">['text']</span>
</code></pre>
<h4 data-id="heading-10">ç»“æœè¯„ä¼°</h4>
<p>é€šè¿‡ä»¥ä¸Šæ–¹æ¡ˆï¼Œæˆ‘ä»¬è¿›è¡Œäº†ä¸€ç³»åˆ—å®éªŒéªŒè¯ï¼Œä½¿ç”¨å¤šæ¨¡æ€Nova Proæ¨¡å‹è¿›è¡Œè§†é¢‘ç†è§£ + Claude 3.7 Sonnetè¿›è¡Œæ ‡ç­¾åˆ†ç±»ï¼Œå¹¶ä¸ä¹‹å‰ä¼ ç»Ÿçš„æœºå™¨å­¦ä¹ æ–¹æ³•è¿›è¡Œäº†å¯¹æ¯”ã€‚åœ¨æ¢ç´¢å¤§å‹æ¨¡å‹èƒ½åŠ›è¾¹ç•Œçš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å¾—å‡ºäº†ä¸€ä¸ªå…³é”®ç»“è®ºï¼šå¤§å‹æ¨¡å‹å¹¶éæ— æ‰€ä¸èƒ½ã€‚å®ƒä»¬èƒ½å¤Ÿå°†æˆç»©è¾ƒå·®çš„åç§‘å­¦ç”Ÿæå‡è‡³ä¸­ä¸Šç­‰æ°´å¹³ï¼Œä½¿ä»–ä»¬çš„è¡¨ç°æ›´åŠ å‡è¡¡ï¼Œä½†ä¸èƒ½ç›´æ¥å°†å·®å­¦ç”Ÿè½¬å˜ä¸ºé¡¶å°–å­¦ç”Ÿã€‚</p>
<p>å®éªŒæ•°æ®æ˜¾ç¤ºï¼Œåœ¨å›¾åƒå¤„ç†æ–¹é¢ï¼ŒåŒæ ·çš„å›¾åƒå’Œè§†é¢‘æ ·æœ¬ï¼Œåœ¨Claude 3.7æ¨¡å‹ä¸‹çš„è¯†åˆ«å‡†ç¡®æ€§ä»ä¼ ç»Ÿæœºå™¨å­¦ä¹ æ–¹æ³•çš„44.5%æå‡è‡³85%ã€‚æ­¤å¤–ï¼ŒClaude 3.7åœ¨æ¨ç†ä»»åŠ¡ä¸Šä¹Ÿè¡¨ç°å‡ºæ˜æ˜¾çš„å‡†ç¡®æ€§æå‡ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤æ‚æ¨ç†èƒ½åŠ›æ–¹é¢ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2c780b98368c4b239ccb4b4391583643~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764820113&amp;x-signature=8MjpNPOWtXaY4QkYoGAYLFXJZrE%3D" alt="" loading="lazy"/></p>
<p>ä¸ºéªŒè¯è¿™äº›å‘ç°çš„ç¨³å®šæ€§ï¼Œæˆ‘ä»¬æ”¶é›†äº†ä¸€ä¸ªæœˆå†…çš„ 1.1ä¸‡æ¡æ•°æ®è¿›è¡ŒéªŒè¯ï¼Œè¿™äº›æ•°æ®åŒ…æ‹¬äº†å„ç§å„æ ·çš„å•†å“ç»†åˆ†å“ç±»ã€‚åœ¨éšæœºæŠ½å–çš„103ä¸ªåˆ†ç±»ä¸­ï¼Œçº¦90.3%(93ä¸ª)å‘ˆç°ä¸Šå‡è¶‹åŠ¿ï¼Œä»…9.7%(10ä¸ª)å‘ˆç°ä¸‹é™è¶‹åŠ¿ï¼Œè¿›ä¸€æ­¥è¯å®äº†å¤§å‹æ¨¡å‹åœ¨æ¶‰åŠä¼—å¤šå•†å“å“ç±»çš„åˆ†ç±»ä»»åŠ¡ä¸­ï¼Œæ— é¡»ä»»ä½•æå‰è®­ç»ƒï¼Œåœ¨ç»å¤§éƒ¨åˆ†çš„åˆ†ç±»ä»»åŠ¡ä¸­ï¼Œè¡¨ç°éƒ½ä¼˜äºä¼ ç»Ÿæœºå™¨å­¦ä¹ æ–¹æ³•ï¼Œè¡¨ç°å‡ºå¾ˆå¥½çš„å‡†ç¡®ç‡ä¸ç¨³å®šæ€§ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/aab4ec64a1f34879bb0b102db6657f29~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764820113&amp;x-signature=rIBcwSAewf1a6vgpSGKsrYNk%2Ff4%3D" alt="" loading="lazy"/><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d9bd8fbb872643fe805d0acd8c5a3195~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764820113&amp;x-signature=ccvfuCdO33C%2FwdBGWntd75yv%2B5U%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-11">æ¨¡å‹å¯æŒç»­æ€§ä¿éšœ</h3>
<p>åœ¨æ¨¡å‹ä¸Šçº¿åï¼Œæˆ‘ä»¬éœ€è¦æŒç»­å…³æ³¨æ¨¡å‹çš„è¿è¡ŒçŠ¶å†µï¼Œè¦è¾¾åˆ°å¦‚ä¸‹ç›®æ ‡ï¼š</p>
<ul>
<li>è‡ªåŠ¨åŒ–ç›‘æ§ï¼šå‡å°‘äººå·¥å¹²é¢„ï¼Œé€šè¿‡æœºå™¨å®æ—¶æ£€æµ‹å¼‚å¸¸ã€‚</li>
<li>é•¿æœŸç¨³å®šæ€§ï¼šç¡®ä¿çº¿ä¸Šç»“æœçš„å¯é æ€§ï¼Œé¿å…å› æ•°æ®æ›´æ–°é€ æˆåå·®ã€‚</li>
<li>å¿«é€Ÿå“åº”ï¼šå‘ç°å¼‚å¸¸æ—¶èƒ½è‡ªåŠ¨å‘Šè­¦æˆ–è§¦å‘å›æ»šæœºåˆ¶ã€‚</li>
</ul>
<p>æˆ‘ä»¬é‡‡ç”¨ABBï¼ˆA-B-Bï¼‰ç›‘æ§ç­–ç•¥ï¼Œé€šè¿‡éƒ¨ç½²ä¸€ä¸ªä¸»æ¨¡å‹ï¼ˆAï¼‰å’Œä¸¤ä¸ªæ¬¡æ¨¡å‹ï¼ˆB1ã€B2ï¼‰æ¥ç¡®ä¿åˆ†ç±»ç»“æœçš„å¯é æ€§ã€‚è¿™ç§ç­–ç•¥åŸºäºæ¨¡å‹é›†æˆçš„æ€æƒ³ï¼Œé€šè¿‡å¤šæ¨¡å‹ä¸€è‡´æ€§æ£€æŸ¥æ¥æé«˜æ•´ä½“ç³»ç»Ÿçš„å‡†ç¡®æ€§å’Œç¨³å®šæ€§ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0c2d1367a3614f35a76f3d5c1c7f325c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764820113&amp;x-signature=gcyot%2F2E0J5e42HTAlZWaFhmjg4%3D" alt="" loading="lazy"/></p>
<p>é€šè¿‡ä»¥ä¸Šç­–ç•¥ï¼Œå®ç°ä¸åŒç±»å‹ç´ æï¼Œå¯ä»¥è°ƒç”¨åœ¨å„è‡ªç±»å‹ä¸Šè¡¨ç°æœ€ä½³ä¹‹æ¨¡å‹ï¼Œä»¥è¾¾åˆ°å¼ºå¼ºè”åˆçš„æ•ˆæœã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3bdd3f9d86a4462d95bf17245fb24d43~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764820113&amp;x-signature=HRk0jJWjyGEjOri9uLDCI3uaSoA%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-12">æ€»ç»“ä¸å±•æœ›</h2>
<p>é£ä¹¦æ·±è¯ºé€šè¿‡å¼•å…¥åŸºäº Amazon Bedrockå¹³å°æä¾›çš„Claudeä¸Novaå¤šæ¨¡æ€ç”Ÿæˆå¼AIè§£å†³æ–¹æ¡ˆï¼ŒæˆåŠŸå®ç°äº†ç”µå•†å¹¿å‘Šåˆ†ç±»çš„æŠ€æœ¯å‡çº§ã€‚å®éªŒæ•°æ®éªŒè¯äº†åŸºäºç”Ÿæˆå¼AIè§£å†³æ–¹æ¡ˆçš„å“è¶Šæ€§èƒ½ï¼Œå‡†ç¡®ç‡ä»ä¼ ç»Ÿæœºå™¨å­¦ä¹ æ–¹æ³•çš„44.5%æå‡è‡³85%ï¼Œåœ¨1.1ä¸‡æ¡æ•°æ®çš„éªŒè¯ä¸­ï¼Œ90.3%çš„åˆ†ç±»å‘ˆç°ä¸Šå‡è¶‹åŠ¿ã€‚ç‰¹åˆ«æ˜¯Amazon Novaæ¨¡å‹åœ¨è§†é¢‘ç†è§£æ–¹é¢çš„å‡ºè‰²è¡¨ç°ï¼Œä»¥åŠClaude 3.7 Sonnetåœ¨å¤æ‚æ¨ç†ä»»åŠ¡ä¸Šçš„ä¼˜å¼‚èƒ½åŠ›ï¼Œä¸ºé¡¹ç›®æˆåŠŸæä¾›äº†å…³é”®æ”¯æ’‘ã€‚é€šè¿‡ABBç›‘æ§ç­–ç•¥ï¼Œç³»ç»Ÿè¿è¡Œç¨³å®šæ€§å¾—åˆ°äº†æœ‰æ•ˆä¿éšœï¼ŒåŒæ—¶å®ç°äº†é™æœ¬å¢æ•ˆçš„åŒé‡ç›®æ ‡ã€‚</p>
<p>æœªæ¥ï¼Œé£ä¹¦æ·±è¯ºå°†ç»§ç»­æ·±åŒ–ä¸äºšé©¬é€Šäº‘ç§‘æŠ€çš„åˆä½œï¼Œæ¢ç´¢Amazon Bedrockå¹³å°æ›´å¤šå‰æ²¿AIèƒ½åŠ›ï¼Œè¿›ä¸€æ­¥æ‰“é€ å‚ç›´è¡Œä¸šä¸“å®¶æ¨¡å‹ï¼Œå®Œå–„åŸºäºäºšé©¬é€Šäº‘ç§‘æŠ€çš„MLOpsæµç¨‹ï¼Œå¢å¼ºå¤šæ¨¡æ€å†…å®¹ç†è§£èƒ½åŠ›ï¼Œä¸ºå®¢æˆ·æä¾›æ›´é«˜æ€§ä»·æ¯”ã€å¯æ‰©å±•ã€å°‘å¹²é¢„çš„æ™ºèƒ½å†…å®¹ç†è§£ä¸­å°ï¼ŒåŠ©åŠ›ä¸­å›½ä¼ä¸šåœ¨å…¨çƒå¸‚åœºå–å¾—æ›´å¤§æˆåŠŸã€‚</p>
<p>*<em>å‰è¿°ç‰¹å®šäºšé©¬é€Šäº‘ç§‘æŠ€ç”Ÿæˆå¼äººå·¥æ™ºèƒ½ç›¸å…³çš„æœåŠ¡ç›®å‰åœ¨äºšé©¬é€Šäº‘ç§‘æŠ€æµ·å¤–åŒºåŸŸå¯ç”¨ã€‚äºšé©¬é€Šäº‘ç§‘æŠ€ä¸­å›½åŒºåŸŸç›¸å…³äº‘æœåŠ¡ç”±è¥¿äº‘æ•°æ®å’Œå…‰ç¯æ–°ç½‘è¿è¥ï¼Œå…·ä½“ä¿¡æ¯ä»¥ä¸­å›½åŒºåŸŸå®˜ç½‘ä¸ºå‡†ã€‚</em></p>
<p><strong>æœ¬ç¯‡ä½œè€…</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dab5ba5f098443c488a90519fddfd6ce~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764820113&amp;x-signature=Eb5tD5Dga44Lva5h3hp2mYvcQ2I%3D" alt="" loading="lazy"/></p>
<blockquote>
<p>æœ¬æœŸæœ€æ–°å®éªŒã€Š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdev.amazoncloud.cn%2Fexperience%2Fcloudlab%3Fid%3D6695e4c5e1432f239fae485f%26visitfrom%3D3P_Juejintail_0415%26sc_medium%3Downed%26sc_campaign%3Dcloudlab%26sc_channel%3D3P_Juejintail_0415" target="_blank" title="https://dev.amazoncloud.cn/experience/cloudlab?id=6695e4c5e1432f239fae485f&amp;visitfrom=3P_Juejintail_0415&amp;sc_medium=owned&amp;sc_campaign=cloudlab&amp;sc_channel=3P_Juejintail_0415" ref="nofollow noopener noreferrer">å¤šæ¨¡ä¸€ç«™é€š â€”â€” Amazon Bedrock ä¸Šçš„åŸºç¡€æ¨¡å‹åˆä½“éªŒ</a>ã€‹</p>
<p>âœ¨ ç²¾å¿ƒè®¾è®¡ï¼Œæ—¨åœ¨å¼•å¯¼æ‚¨æ·±å…¥æ¢ç´¢Amazon Bedrockçš„æ¨¡å‹é€‰æ‹©ä¸è°ƒç”¨ã€æ¨¡å‹è‡ªåŠ¨åŒ–è¯„ä¼°ä»¥åŠå®‰å…¨å›´æ (Guardrail)ç­‰é‡è¦åŠŸèƒ½ã€‚æ— éœ€ç®¡ç†åŸºç¡€è®¾æ–½ï¼Œåˆ©ç”¨äºšé©¬é€ŠæŠ€æœ¯ä¸ç”Ÿæ€ï¼Œå¿«é€Ÿé›†æˆä¸éƒ¨ç½²ç”Ÿæˆå¼AIæ¨¡å‹èƒ½åŠ›ã€‚</p>
<p>â©ï¸[<a href="https://link.juejin.cn?target=https%3A%2F%2Fdev.amazoncloud.cn%2Fexperience%2Fcloudlab%3Fid%3D6695e4c5e1432f239fae485f%26visitfrom%3D3P_Juejintail_0415%26sc_medium%3Downed%26sc_campaign%3Dcloudlab%26sc_channel%3D3P_Juejintail_0415" target="_blank" title="https://dev.amazoncloud.cn/experience/cloudlab?id=6695e4c5e1432f239fae485f&amp;visitfrom=3P_Juejintail_0415&amp;sc_medium=owned&amp;sc_campaign=cloudlab&amp;sc_channel=3P_Juejintail_0415" ref="nofollow noopener noreferrer">ç‚¹å‡»è¿›å…¥å®éªŒ</a>] å³åˆ»å¼€å¯ AI å¼€å‘ä¹‹æ—…æ„å»ºæ— é™, æ¢ç´¢å¯ç¨‹ï¼</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[JavaScript ä½œç”¨åŸŸï¼šä»æ‰§è¡Œæœºåˆ¶åˆ°å—çº§ä½œç”¨åŸŸçš„æ¼”è¿›]]></title>    <link>https://juejin.cn/post/7577201863721353216</link>    <guid>https://juejin.cn/post/7577201863721353216</guid>    <pubDate>2025-11-27T01:23:08.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577201863721353216" data-draft-id="7576894778572374051" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="JavaScript ä½œç”¨åŸŸï¼šä»æ‰§è¡Œæœºåˆ¶åˆ°å—çº§ä½œç”¨åŸŸçš„æ¼”è¿›"/> <meta itemprop="keywords" content="JavaScript"/> <meta itemprop="datePublished" content="2025-11-27T01:23:08.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="3ç§’ä¸€ä¸ªå¤§"/> <meta itemprop="url" content="https://juejin.cn/user/2373184444182659"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            JavaScript ä½œç”¨åŸŸï¼šä»æ‰§è¡Œæœºåˆ¶åˆ°å—çº§ä½œç”¨åŸŸçš„æ¼”è¿›
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2373184444182659/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    3ç§’ä¸€ä¸ªå¤§
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-27T01:23:08.000Z" title="Thu Nov 27 2025 01:23:08 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">JavaScript ä½œç”¨åŸŸï¼šä»æ‰§è¡Œæœºåˆ¶åˆ°å—çº§ä½œç”¨åŸŸçš„æ¼”è¿›</h2>
<p>åœ¨ JavaScript ä¸­ï¼Œä½œç”¨åŸŸæ˜¯æ§åˆ¶å˜é‡å’Œå‡½æ•°å¯è§æ€§ä¸ç”Ÿå‘½å‘¨æœŸçš„æ ¸å¿ƒæœºåˆ¶ã€‚ç†è§£ä½œç”¨åŸŸä¸ä»…èƒ½å¸®åŠ©æˆ‘ä»¬å†™å‡ºæ›´å¯é¢„æµ‹çš„ä»£ç ï¼Œè¿˜èƒ½è§„é¿å› å˜é‡æå‡ã€ä½œç”¨åŸŸæ±¡æŸ“ç­‰é—®é¢˜å¯¼è‡´çš„ bugsã€‚æœ¬æ–‡å°†ç»“åˆå…·ä½“ä»£ç ç¤ºä¾‹ï¼Œä»æ‰§è¡Œæœºåˆ¶ã€å˜é‡æå‡åˆ°å—çº§ä½œç”¨åŸŸçš„å®ç°ï¼Œå…¨é¢è§£æ JavaScript ä½œç”¨åŸŸçš„æ ¸å¿ƒæ¦‚å¿µã€‚</p>
<h3 data-id="heading-1">ä¸€ã€ä½œç”¨åŸŸçš„æœ¬è´¨ï¼šå˜é‡çš„ "ç”Ÿå­˜è§„åˆ™"</h3>
<p>ä½œç”¨åŸŸæŒ‡çš„æ˜¯ç¨‹åºä¸­å®šä¹‰å˜é‡çš„åŒºåŸŸï¼Œå®ƒå†³å®šäº†å˜é‡åœ¨å“ªäº›åœ°æ–¹å¯ä»¥è¢«è®¿é—®ï¼ˆå¯è§æ€§ï¼‰ï¼Œä»¥åŠå˜é‡ä¼šå­˜åœ¨å¤šä¹…ï¼ˆç”Ÿå‘½å‘¨æœŸï¼‰ã€‚JavaScript ä¸­æœ‰ä¸‰ç§ä¸»è¦çš„ä½œç”¨åŸŸç±»å‹ï¼š</p>
<ul>
<li><strong>å…¨å±€ä½œç”¨åŸŸ</strong>ï¼šåœ¨ä»£ç çš„ä»»ä½•åœ°æ–¹éƒ½èƒ½è®¿é—®ï¼Œç”Ÿå‘½å‘¨æœŸä¸é¡µé¢ä¸€è‡´ï¼ˆé¡µé¢å…³é—­å‰å§‹ç»ˆå­˜åœ¨ï¼‰ã€‚</li>
<li><strong>å‡½æ•°å±€éƒ¨ä½œç”¨åŸŸ</strong>ï¼šä»…åœ¨å‡½æ•°å†…éƒ¨å¯è®¿é—®ï¼Œç”Ÿå‘½å‘¨æœŸéšå‡½æ•°æ‰§è¡Œç»“æŸè€Œé”€æ¯ã€‚</li>
<li><strong>å—çº§ä½œç”¨åŸŸ</strong>ï¼šES6 æ–°å¢ï¼Œåœ¨Â <code>{}</code>Â åŒ…è£¹çš„å—ï¼ˆå¦‚Â <code>if</code>ã€<code>for</code>ã€å•ç‹¬çš„Â <code>{}</code>Â ç­‰ï¼‰å†…éƒ¨ç”Ÿæ•ˆï¼Œç”Ÿå‘½å‘¨æœŸéšå—æ‰§è¡Œç»“æŸè€Œé”€æ¯ã€‚</li>
</ul>
<h3 data-id="heading-2">äºŒã€JS æ‰§è¡Œæœºåˆ¶ï¼šç¼–è¯‘ä¸æ‰§è¡Œçš„ "ä¸¤æ­¥èµ°"</h3>
<p>JavaScript å¼•æ“ï¼ˆå¦‚ V8ï¼‰æ‰§è¡Œä»£ç åˆ†ä¸º<strong>ç¼–è¯‘</strong>å’Œ<strong>æ‰§è¡Œ</strong>ä¸¤ä¸ªé˜¶æ®µï¼Œè¿™ä¸€è¿‡ç¨‹ç›´æ¥å½±å“ä½œç”¨åŸŸçš„è¡¨ç°ï¼š</p>
<ol>
<li><strong>ç¼–è¯‘é˜¶æ®µ</strong>ï¼šå¼•æ“ä¼šæ‰«æä»£ç ï¼Œç¡®å®šå˜é‡å’Œå‡½æ•°çš„å£°æ˜ä½ç½®ï¼Œåˆ›å»ºæ‰§è¡Œä¸Šä¸‹æ–‡ï¼ˆåŒ…å«å˜é‡ç¯å¢ƒã€è¯æ³•ç¯å¢ƒç­‰ä¿¡æ¯ï¼‰ã€‚</li>
<li><strong>æ‰§è¡Œé˜¶æ®µ</strong>ï¼šå¼•æ“æŒ‰é¡ºåºæ‰§è¡Œä»£ç ï¼Œå¤„ç†å˜é‡èµ‹å€¼ã€å‡½æ•°è°ƒç”¨ç­‰æ“ä½œï¼Œä¾èµ–ç¼–è¯‘é˜¶æ®µåˆ›å»ºçš„æ‰§è¡Œä¸Šä¸‹æ–‡ã€‚</li>
</ol>
<p>æ‰§è¡Œä¸Šä¸‹æ–‡æ˜¯ä½œç”¨åŸŸçš„å…·ä½“è½½ä½“ï¼Œæ¯ä¸ªå‡½æ•°è°ƒç”¨éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„æ‰§è¡Œä¸Šä¸‹æ–‡å¹¶å‹å…¥è°ƒç”¨æ ˆï¼Œæ‰§è¡Œå®Œæˆåå‡ºæ ˆå¹¶é”€æ¯ï¼ˆå˜é‡éšä¹‹å›æ”¶ï¼‰ã€‚</p>
<h3 data-id="heading-3">ä¸‰ã€å˜é‡æå‡ï¼šè®¾è®¡ç¼ºé™·ä¸ç°è±¡</h3>
<p>æ—©æœŸ JavaScriptï¼ˆES5 åŠä¹‹å‰ï¼‰å­˜åœ¨ "å˜é‡æå‡"ï¼ˆhoistingï¼‰ç‰¹æ€§ï¼šå˜é‡å’Œå‡½æ•°çš„å£°æ˜ä¼šè¢« "æå‡" åˆ°å…¶ä½œç”¨åŸŸçš„é¡¶éƒ¨ï¼Œä½†èµ‹å€¼ä¸ä¼šã€‚è¿™æ˜¯ JS è®¾è®¡åˆæœŸä¸ºç®€åŒ–å®ç°ç•™ä¸‹çš„ç¼ºé™·ï¼Œå¯èƒ½å¯¼è‡´ä¸ç›´è§‰ä¸ç¬¦çš„ç»“æœã€‚</p>
<h4 data-id="heading-4">ä»£ç ç¤ºä¾‹ï¼šå˜é‡æå‡çš„è¡¨ç°</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title function_">showName</span>(); <span class="hljs-comment">// è¾“å‡ºï¼š"å‡½æ•°showName æ‰§è¡Œäº†"</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(myname); <span class="hljs-comment">// è¾“å‡ºï¼šundefinedï¼ˆå˜é‡å£°æ˜æå‡ï¼Œèµ‹å€¼æœªæå‡ï¼‰</span>

<span class="hljs-keyword">var</span> myname = <span class="hljs-string">"è·¯é£"</span>; <span class="hljs-comment">// å˜é‡å£°æ˜è¢«æå‡åˆ°ä½œç”¨åŸŸé¡¶éƒ¨</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">showName</span>(<span class="hljs-params"/>) { <span class="hljs-comment">// å‡½æ•°æ•´ä½“è¢«æå‡</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å‡½æ•°showName æ‰§è¡Œäº†'</span>);
}
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8aa9d5a771ea44c6b059929fa2568078~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgM-enkuS4gOS4quWkpw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764811388&amp;x-signature=7Z0ndEVQvEVvoAVCZ%2BKi7m5DV70%3D" alt="image.png" loading="lazy"/></p>
<p><strong>è§£é‡Š</strong>ï¼š</p>
<ul>
<li>å‡½æ•°Â <code>showName</code>Â çš„å£°æ˜è¢«å®Œæ•´æå‡ï¼Œå› æ­¤å¯ä»¥åœ¨å®šä¹‰å‰è°ƒç”¨ã€‚</li>
<li><code>var</code>Â å£°æ˜çš„Â <code>myname</code>Â è¢«æå‡åˆ°ä½œç”¨åŸŸé¡¶éƒ¨ï¼Œä½†èµ‹å€¼Â <code>="è·¯é£"</code>Â ç•™åœ¨åŸåœ°ï¼Œå› æ­¤æ‰§è¡ŒÂ <code>console.log(myname)</code>Â æ—¶ä¸ºÂ <code>undefined</code>ã€‚</li>
</ul>
<h3 data-id="heading-5">å››ã€å…¨å±€ä½œç”¨åŸŸä¸å‡½æ•°å±€éƒ¨ä½œç”¨åŸŸ</h3>
<h4 data-id="heading-6">1. å…¨å±€ä½œç”¨åŸŸ</h4>
<p>åœ¨å‡½æ•°å¤–å£°æ˜çš„å˜é‡å±äºå…¨å±€ä½œç”¨åŸŸï¼Œå¯åœ¨ä»»ä½•åœ°æ–¹è®¿é—®ã€‚</p>
<h4 data-id="heading-7">2. å‡½æ•°å±€éƒ¨ä½œç”¨åŸŸ</h4>
<p>åœ¨å‡½æ•°å†…ç”¨Â <code>var</code>/<code>let</code>/<code>const</code>Â å£°æ˜çš„å˜é‡å±äºå±€éƒ¨ä½œç”¨åŸŸï¼Œä»…åœ¨å‡½æ•°å†…å¯è§ã€‚</p>
<h4 data-id="heading-8">ä»£ç ç¤ºä¾‹ï¼šå…¨å±€ä¸å±€éƒ¨ä½œç”¨åŸŸ</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">var</span> globalVar = <span class="hljs-string">"æˆ‘æ˜¯å…¨å±€å˜é‡"</span>; <span class="hljs-comment">// å…¨å±€ä½œç”¨åŸŸ</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">myFunction</span>(<span class="hljs-params"/>){
    <span class="hljs-keyword">var</span> localVar = <span class="hljs-string">"æˆ‘æ˜¯å±€éƒ¨å˜é‡"</span>; <span class="hljs-comment">// å‡½æ•°å±€éƒ¨ä½œç”¨åŸŸ</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(globalVar); <span class="hljs-comment">// è¾“å‡ºï¼š"æˆ‘æ˜¯å…¨å±€å˜é‡"ï¼ˆå¯è®¿é—®å…¨å±€å˜é‡ï¼‰</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(localVar); <span class="hljs-comment">// è¾“å‡ºï¼š"æˆ‘æ˜¯å±€éƒ¨å˜é‡"ï¼ˆå¯è®¿é—®å±€éƒ¨å˜é‡ï¼‰</span>
}
<span class="hljs-title function_">myFunction</span>();
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(globalVar); <span class="hljs-comment">// è¾“å‡ºï¼š"æˆ‘æ˜¯å…¨å±€å˜é‡"ï¼ˆå…¨å±€å¯è§ï¼‰</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(localVar); <span class="hljs-comment">// æŠ¥é”™ï¼šlocalVar is not definedï¼ˆå±€éƒ¨å˜é‡å¤–éƒ¨ä¸å¯è§ï¼‰</span>
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ed65cea1ada04afc9981769141994e9d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgM-enkuS4gOS4quWkpw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764811388&amp;x-signature=XoAqNEoqXM366ZtVtvkW7C2z6ho%3D" alt="image.png" loading="lazy"/></p>
<p><strong>è§£é‡Š</strong>ï¼š</p>
<ul>
<li><code>globalVar</code>Â åœ¨å…¨å±€ä½œç”¨åŸŸå£°æ˜ï¼Œå› æ­¤å‡½æ•°å†…å¤–éƒ½å¯è®¿é—®ã€‚</li>
<li><code>localVar</code>Â åœ¨Â <code>myFunction</code>Â å†…éƒ¨å£°æ˜ï¼Œå±äºå±€éƒ¨ä½œç”¨åŸŸï¼Œå‡½æ•°å¤–éƒ¨è®¿é—®ä¼šæŠ¥é”™ã€‚</li>
</ul>
<h3 data-id="heading-9">äº”ã€å—çº§ä½œç”¨åŸŸï¼šES6 çš„æ”¹è¿›</h3>
<p>ES5 ä¸æ”¯æŒå—çº§ä½œç”¨åŸŸï¼Œ<code>var</code>Â å£°æ˜çš„å˜é‡ä¼š "ç©¿é€"Â <code>if</code>ã€<code>for</code>Â ç­‰å—ç»“æ„ï¼Œå¯¼è‡´å˜é‡æ±¡æŸ“ã€‚ES6 å¼•å…¥Â <code>let</code>Â å’ŒÂ <code>const</code>ï¼Œæ­£å¼æ”¯æŒå—çº§ä½œç”¨åŸŸï¼Œå˜é‡ä»…åœ¨Â <code>{}</code>Â å†…éƒ¨æœ‰æ•ˆã€‚</p>
<h4 data-id="heading-10">1. var æ— å—çº§ä½œç”¨åŸŸçš„é—®é¢˜</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">var</span> name = <span class="hljs-string">"æµè¤"</span>; <span class="hljs-comment">// å…¨å±€å˜é‡</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">showName</span>(<span class="hljs-params"/>){
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(name); <span class="hljs-comment">// è¾“å‡ºï¼šundefinedï¼ˆvarå£°æ˜çš„nameè¢«æå‡åˆ°å‡½æ•°é¡¶éƒ¨ï¼‰</span>
    <span class="hljs-keyword">if</span>(<span class="hljs-literal">true</span>){ 
        <span class="hljs-keyword">var</span> name = <span class="hljs-string">"å¤§å‚çš„è‹—å­"</span>; <span class="hljs-comment">// varæ— å—çº§ä½œç”¨åŸŸï¼Œå£°æ˜è¢«æå‡åˆ°å‡½æ•°ä½œç”¨åŸŸ</span>
    }
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(name); <span class="hljs-comment">// è¾“å‡ºï¼š"å¤§å‚çš„è‹—å­"ï¼ˆå—å†…èµ‹å€¼å½±å“å‡½æ•°å†…å˜é‡ï¼‰</span>
}
<span class="hljs-title function_">showName</span>();
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bb1f6e848f8f4520b287994321b00ecd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgM-enkuS4gOS4quWkpw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764811388&amp;x-signature=U9HS%2FNx4wOFVLyKvHdGGMXvEI6I%3D" alt="image.png" loading="lazy"/></p>
<p><strong>è§£é‡Š</strong>ï¼š<code>var</code>Â å£°æ˜çš„Â <code>name</code>Â ä¼šè¢«æå‡åˆ°Â <code>showName</code>Â å‡½æ•°ä½œç”¨åŸŸé¡¶éƒ¨ï¼ˆè€Œéå—çº§ä½œç”¨åŸŸï¼‰ï¼Œå› æ­¤ç¬¬ä¸€æ¬¡æ‰“å°æ—¶å˜é‡å·²å£°æ˜ä½†æœªèµ‹å€¼ï¼ˆ<code>undefined</code>ï¼‰ï¼Œå—å†…èµ‹å€¼åå‡½æ•°å†…çš„Â <code>name</code>Â è¢«è¦†ç›–ã€‚</p>
<h4 data-id="heading-11">2. let æ”¯æŒå—çº§ä½œç”¨åŸŸ</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">let</span> name = <span class="hljs-string">"æµè¤"</span>; <span class="hljs-comment">// å…¨å±€å˜é‡</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">showName</span>(<span class="hljs-params"/>){
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(name); <span class="hljs-comment">// è¾“å‡ºï¼šæµè¤</span>
    <span class="hljs-keyword">if</span>(<span class="hljs-literal">false</span>){ 
        <span class="hljs-keyword">let</span> name = <span class="hljs-string">"å¤§å‚çš„è‹—å­"</span>; <span class="hljs-comment">// letæœ‰å—çº§ä½œç”¨åŸŸï¼Œä»…åœ¨ifå—å†…æœ‰æ•ˆ</span>
    }
}
<span class="hljs-title function_">showName</span>();
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/412cc6d543254760aacd72d1eb9a4824~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgM-enkuS4gOS4quWkpw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764811388&amp;x-signature=rfx3mKhxsDlL5Qv73FeVoIk4OjM%3D" alt="image.png" loading="lazy"/></p>
<p><strong>è§£é‡Š</strong>ï¼š<code>let</code>Â å£°æ˜çš„Â <code>name</code>Â è¢«é™åˆ¶åœ¨Â <code>if</code>Â å—çº§ä½œç”¨åŸŸå†…ï¼Œå‡½æ•°ä½œç”¨åŸŸä¸­ä¸å­˜åœ¨è¯¥å˜é‡ã€‚ä½†ç”±äº "æš‚æ—¶æ€§æ­»åŒº"ï¼ˆlet å˜é‡å£°æ˜å‰ä¸å¯è®¿é—®ï¼‰ï¼Œå‡½æ•°å†…æ‰“å°Â <code>name</code>Â æ—¶ä¼šå‘ä¸ŠæŸ¥æ‰¾å…¨å±€Â <code>name</code>ã€‚</p>
<h4 data-id="heading-12">3. æš‚æ—¶æ€§æ­»åŒº</h4>
<pre><code class="hljs language-ini" lang="ini">let <span class="hljs-attr">name</span> = <span class="hljs-string">'æµè¤'</span><span class="hljs-comment">;</span>
{
    console.log(name)<span class="hljs-comment">; // æŠ¥é”™ï¼šCannot access 'name' before initialization</span>
    let <span class="hljs-attr">name</span> = <span class="hljs-string">'å¤§å‚çš„è‹—å­'</span><span class="hljs-comment">; // letå£°æ˜è§¦å‘æš‚æ—¶æ€§æ­»åŒº</span>
}
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6ee41e75d4dc4c528c8ff37aaa08244f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgM-enkuS4gOS4quWkpw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764811388&amp;x-signature=ItrpEkjhEux3AzXIXhzDkZ%2FRBJo%3D" alt="image.png" loading="lazy"/></p>
<p><strong>è§£é‡Š</strong>ï¼šå—å†…ç”¨Â <code>let</code>Â å£°æ˜Â <code>name</code>Â åï¼Œæ•´ä¸ªå—ä¼šå½¢æˆ "æš‚æ—¶æ€§æ­»åŒº"ï¼Œåœ¨Â <code>let</code>Â å£°æ˜å‰è®¿é—®Â <code>name</code>Â ä¼šç›´æ¥æŠ¥é”™ï¼ˆå³ä½¿å¤–éƒ¨æœ‰åŒåå…¨å±€å˜é‡ï¼‰ã€‚è¿™é¿å…äº†å˜é‡æå‡å¯¼è‡´çš„æ„å¤–è¦†ç›–ã€‚</p>
<h3 data-id="heading-13">å…­ã€for å¾ªç¯ä¸­çš„å—çº§ä½œç”¨åŸŸ</h3>
<p><code>for</code>Â å¾ªç¯æ˜¯å—çº§ä½œç”¨åŸŸçš„å…¸å‹åœºæ™¯ï¼Œ<code>let</code>Â å’ŒÂ <code>var</code>Â çš„è¡¨ç°å·®å¼‚æ˜¾è‘—ï¼š</p>
<pre><code class="hljs language-css" lang="css">function foo() {
    // è‹¥ç”¨<span class="hljs-selector-tag">var</span>å£°æ˜<span class="hljs-selector-tag">i</span>ï¼š
    // for(<span class="hljs-selector-tag">var</span> <span class="hljs-selector-tag">i</span>=<span class="hljs-number">0</span>;<span class="hljs-selector-tag">i</span>&lt;<span class="hljs-number">7</span>;<span class="hljs-selector-tag">i</span>++){} 
    // console<span class="hljs-selector-class">.log</span>(<span class="hljs-selector-tag">i</span>); // è¾“å‡º<span class="hljs-number">7</span>ï¼ˆ<span class="hljs-selector-tag">var</span>æ— å—çº§ä½œç”¨åŸŸï¼Œ<span class="hljs-selector-tag">i</span>æ³„æ¼åˆ°å‡½æ•°ä½œç”¨åŸŸï¼‰

    // ç”¨letå£°æ˜<span class="hljs-selector-tag">i</span>ï¼š
    for(let <span class="hljs-selector-tag">i</span>=<span class="hljs-number">0</span>;<span class="hljs-selector-tag">i</span>&lt;<span class="hljs-number">7</span>;<span class="hljs-selector-tag">i</span>++){} 
    console<span class="hljs-selector-class">.log</span>(<span class="hljs-selector-tag">i</span>); // æŠ¥é”™ï¼š<span class="hljs-selector-tag">i</span> is not definedï¼ˆleté™åˆ¶<span class="hljs-selector-tag">i</span>åœ¨forå—å†…ï¼‰
}
foo();
</code></pre>
<p><strong>è§£é‡Š</strong>ï¼š</p>
<ul>
<li><code>var</code>Â å£°æ˜çš„Â <code>i</code>Â ä¼šç©¿é€Â <code>for</code>Â å¾ªç¯å—ï¼Œæ³„æ¼åˆ°å‡½æ•°ä½œç”¨åŸŸï¼Œå¾ªç¯ç»“æŸåä»å¯è®¿é—®ï¼ˆå€¼ä¸º 7ï¼‰ã€‚</li>
<li><code>let</code>Â å£°æ˜çš„Â <code>i</code>Â è¢«é™åˆ¶åœ¨Â <code>for</code>Â å—çº§ä½œç”¨åŸŸå†…ï¼Œå¾ªç¯å¤–è®¿é—®ä¼šæŠ¥é”™ï¼Œé¿å…äº†å˜é‡æ³„æ¼ã€‚</li>
</ul>
<h3 data-id="heading-14">ä¸ƒã€æ‰§è¡Œä¸Šä¸‹æ–‡è§†è§’ï¼švar ä¸ let çš„ "ä¸€å›½ä¸¤åˆ¶"</h3>
<p>ES6 ä¸ºäº†å…¼å®¹æ—§ä»£ç ï¼Œé‡‡ç”¨äº† "ä¸€å›½ä¸¤åˆ¶" çš„å¤„ç†æ–¹å¼ï¼šåœ¨æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­ï¼Œ<code>var</code>Â å’ŒÂ <code>let</code>Â è¢«åˆ†åˆ«å­˜å‚¨åœ¨ä¸åŒåŒºåŸŸï¼š</p>
<ul>
<li><strong>å˜é‡ç¯å¢ƒ</strong>ï¼šå­˜å‚¨Â <code>var</code>Â å£°æ˜çš„å˜é‡ï¼ˆæ”¯æŒå˜é‡æå‡ï¼Œæ— å—çº§ä½œç”¨åŸŸï¼‰ã€‚</li>
<li><strong>è¯æ³•ç¯å¢ƒ</strong>ï¼šå­˜å‚¨Â <code>let</code>/<code>const</code>Â å£°æ˜çš„å˜é‡ï¼ˆæ”¯æŒå—çº§ä½œç”¨åŸŸï¼Œæœ‰æš‚æ—¶æ€§æ­»åŒºï¼‰ï¼Œå†…éƒ¨ç»´æŠ¤ä¸€ä¸ªæ ˆç»“æ„ï¼Œå—çº§ä½œç”¨åŸŸæ‰§è¡Œæ—¶å…¥æ ˆï¼Œæ‰§è¡Œå®Œå‡ºæ ˆã€‚</li>
</ul>
<h4 data-id="heading-15">ä»£ç ç¤ºä¾‹ï¼švar ä¸ let çš„ä½œç”¨åŸŸæ··åˆ</h4>
<pre><code class="hljs language-ini" lang="ini">function foo (){
    var <span class="hljs-attr">a</span> = <span class="hljs-number">1</span><span class="hljs-comment">; // å­˜å‚¨åœ¨å˜é‡ç¯å¢ƒï¼ˆå‡½æ•°ä½œç”¨åŸŸï¼‰</span>
    let <span class="hljs-attr">b</span> = <span class="hljs-number">2</span><span class="hljs-comment">; // å­˜å‚¨åœ¨è¯æ³•ç¯å¢ƒï¼ˆå‡½æ•°ä½œç”¨åŸŸï¼‰</span>
    {
        let <span class="hljs-attr">b</span> = <span class="hljs-number">3</span><span class="hljs-comment">; // è¯æ³•ç¯å¢ƒæ ˆé¡¶ï¼ˆå—çº§ä½œç”¨åŸŸï¼‰</span>
        var <span class="hljs-attr">c</span> = <span class="hljs-number">4</span><span class="hljs-comment">; // å˜é‡ç¯å¢ƒï¼ˆå‡½æ•°ä½œç”¨åŸŸï¼Œç©¿é€å—ï¼‰</span>
        let <span class="hljs-attr">d</span> = <span class="hljs-number">5</span><span class="hljs-comment">; // è¯æ³•ç¯å¢ƒæ ˆé¡¶ï¼ˆå—çº§ä½œç”¨åŸŸï¼‰</span>
        console.log(a)<span class="hljs-comment">; // 1ï¼ˆè®¿é—®å˜é‡ç¯å¢ƒçš„aï¼‰</span>
        console.log(b)<span class="hljs-comment">; // 3ï¼ˆè®¿é—®è¯æ³•ç¯å¢ƒæ ˆé¡¶çš„bï¼‰</span>
    }
    console.log(b)<span class="hljs-comment">; // 2ï¼ˆè¯æ³•ç¯å¢ƒæ ˆé¡¶å‡ºæ ˆï¼Œè®¿é—®å‡½æ•°ä½œç”¨åŸŸçš„bï¼‰</span>
    console.log(c)<span class="hljs-comment">; // 4ï¼ˆå˜é‡ç¯å¢ƒçš„cï¼Œå—å¤–å¯è®¿é—®ï¼‰</span>
    console.log(d)<span class="hljs-comment">; // æŠ¥é”™ï¼šd is not definedï¼ˆè¯æ³•ç¯å¢ƒæ ˆé¡¶å‡ºæ ˆï¼Œdå·²é”€æ¯ï¼‰</span>
}
foo()<span class="hljs-comment">;</span>
</code></pre>
<p><strong>è§£é‡Š</strong>ï¼š</p>
<ul>
<li><code>var</code>Â å£°æ˜çš„Â <code>a</code>Â å’ŒÂ <code>c</code>Â å­˜å‚¨åœ¨å˜é‡ç¯å¢ƒï¼Œå±äºå‡½æ•°ä½œç”¨åŸŸï¼Œå—å†…å¤–å‡å¯è®¿é—®ã€‚</li>
<li><code>let</code>Â å£°æ˜çš„Â <code>b</code>ï¼ˆå‡½æ•°å†…ï¼‰å’ŒÂ <code>b</code>ï¼ˆå—å†…ï¼‰ã€<code>d</code>Â å­˜å‚¨åœ¨è¯æ³•ç¯å¢ƒçš„æ ˆç»“æ„ä¸­ï¼šå—æ‰§è¡Œæ—¶ï¼Œå—å†…Â <code>b</code>Â å’ŒÂ <code>d</code>Â å…¥æ ˆï¼Œä¼˜å…ˆè®¿é—®æ ˆé¡¶å˜é‡ï¼›å—æ‰§è¡Œå®Œåæ ˆé¡¶å‡ºæ ˆï¼Œå‡½æ•°å†…çš„Â <code>b</code>Â æ¢å¤å¯è§ï¼Œ<code>d</code>Â åˆ™è¢«é”€æ¯ã€‚</li>
</ul>
<h3 data-id="heading-16">å…«ã€æ€»ç»“</h3>
<p>JavaScript ä½œç”¨åŸŸçš„å‘å±•åæ˜ äº†è¯­è¨€çš„è¿›åŒ–ï¼šä» ES5 ä»…æœ‰å…¨å±€å’Œå‡½æ•°ä½œç”¨åŸŸã€ä¾èµ–å˜é‡æå‡çš„ç®€å•è®¾è®¡ï¼Œåˆ° ES6 å¼•å…¥å—çº§ä½œç”¨åŸŸã€é€šè¿‡Â <code>let</code>/<code>const</code>Â è§£å†³å˜é‡æ±¡æŸ“é—®é¢˜ã€‚æ ¸å¿ƒè¦ç‚¹åŒ…æ‹¬ï¼š</p>
<ol>
<li>ä½œç”¨åŸŸæ§åˆ¶å˜é‡çš„å¯è§æ€§å’Œç”Ÿå‘½å‘¨æœŸï¼ˆå…¨å±€ã€å‡½æ•°ã€å—çº§ï¼‰ã€‚</li>
<li>å˜é‡æå‡æ˜¯ ES5 çš„è®¾è®¡ç¼ºé™·ï¼Œ<code>var</code>Â å£°æ˜çš„å˜é‡ä¼šè¢«æå‡åˆ°ä½œç”¨åŸŸé¡¶éƒ¨ã€‚</li>
<li>ES6 çš„Â <code>let</code>/<code>const</code>Â é€šè¿‡å—çº§ä½œç”¨åŸŸå’Œæš‚æ—¶æ€§æ­»åŒºè§£å†³äº†å˜é‡æå‡çš„é—®é¢˜ã€‚</li>
<li>æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­çš„å˜é‡ç¯å¢ƒï¼ˆ<code>var</code>ï¼‰å’Œè¯æ³•ç¯å¢ƒï¼ˆ<code>let</code>/<code>const</code>ï¼‰å®ç°äº†æ–°æ—§ç‰¹æ€§çš„å…¼å®¹ã€‚</li>
<li>åœ¨å®é™…å¼€å‘ä¸­ï¼Œå»ºè®®ä¼˜å…ˆä½¿ç”¨Â <code>let</code>/<code>const</code>Â æ›¿ä»£Â <code>var</code>ï¼Œåˆ©ç”¨å—çº§ä½œç”¨åŸŸå‡å°‘å˜é‡æ±¡æŸ“ï¼Œå†™å‡ºæ›´å¯é çš„ä»£ç ã€‚</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vue3ä½¿ç”¨vuedraggableå®ç°æ‹–æ‹½æ’åº]]></title>    <link>https://juejin.cn/post/7576859594360487936</link>    <guid>https://juejin.cn/post/7576859594360487936</guid>    <pubDate>2025-11-27T01:21:08.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576859594360487936" data-draft-id="7576867727719022627" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vue3ä½¿ç”¨vuedraggableå®ç°æ‹–æ‹½æ’åº"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-27T01:21:08.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¦é‡"/> <meta itemprop="url" content="https://juejin.cn/user/2612889042300814"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vue3ä½¿ç”¨vuedraggableå®ç°æ‹–æ‹½æ’åº
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2612889042300814/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¦é‡
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-27T01:21:08.000Z" title="Thu Nov 27 2025 01:21:08 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#2b2b2b;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(159,219,252,.15) 3%,transparent 0),linear-gradient(1turn,rgba(159,219,252,.15) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin-top:35px;margin-bottom:10px;color:#4dd0e1}.markdown-body h1{font-size:30px;text-align:center;position:relative;width:max-content;margin:0 auto}.markdown-body h1:before{position:absolute;content:"";z-index:-1;top:-20px;height:100%;width:100px;left:0;right:0;margin:0 auto;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADsAAAA6CAYAAAAOeSEWAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAABkLSURBVGhDtZoHnJ1llcbP3Om9ZiYzmfSQhCQQIbRQVQKI9CYC68qKriJK0UXcZRcINqStIoiIqKCi1NACQihBWiCkkJ5MJlMyvd7p7d759v989/sy34yTbIj48Atz71ff855znvOc971xDrB/EtoGI7a9Z8Aq+wZML0mNj7dE95NZ1OKsj1dHo1GbnJpss9OTbWJyonvun4VP1Njuoagtb+m0it4By0iIt8LEeMvkr8XFWcfgkA1gYDLf47i2PzpsyU7UspKSLDoctagTZ7Vc08MzClMS7awJ2ZaflBB78CeET8TYla1dtrKt2w5KS7YCDGzEoz2RqKUmhGw6x2bhuXyOp2BoRXef1Q1E7Lj8TIsMD1sbxu1kcnYSAX1810RMTUmyMB7f2j1gC7NS7byinNiL/kH8Q8a+2NRh77b32El56VaPAe0YeGR2mh2bm+FdMRqP1rbZe+3dFsHT35qcb/Oz0rwzo7Gxs9feYPLS4kM2h8lawee5hPmlJXneFQeGAzJ2F564v7rFzi7Msu3d/Xgjzq5g8ArX8VCNN2vJ28daey0zZJabmGCLslP5HOf+Oygr3UzDGOf+JxrauXfQjslJt+dbuuyMgiwmk+sPAB/b2Lt2NdoMZnuY21qHIvbvUyZ4Z0ZQiXGrWjvsmPxsK4R0nmHA8ZCTQvxVQn5eRipklIBtcVbV1WtHYsjati47ZWKuTUpP9Z4yGk/xDBGe3v1mW4/dOrvYO7P/2G9jRSjf31FnXyaUXiB8r51WaJkM3kcfOSa2FR6qarIenooTLQHPLcC4mYThyw1tVpKWYlVERlZ8nC3Oz3Jzdn1nn5uvQ8OOHYvhR/CvsqffJbkCkZTvcYZ6Z0WTfTovw5Y1dtjXp+TbFPhgf7FfxpYxuMfr2uwo8rEtMmwXF+d6Z8wGmIR2PLyjo8cqOFffP2SLGexJEJCP9R29thkPXlpa4A5Y3w/jmuVNYYwO2QkY7WMtz3mVcE1hkualJdmSolzX8GnpKd4VZq80d1o7zN0RdWxGaqItgbn3B/+vsasgh/UMNBOvzYMZDxtDKp289KGaVguFQvb1yQWWwuB97GaSXqUUnVaYbSUwrDCEBz/C2CM8EhNrP13fbkeSh3OJgCAe2N1CWXKsGOc6TOr5U4q8MwYhDtkTda02MyPN+nnGBQEH7A37NHYz5KOZVv08qyjbSseEzKauPnsMj98wc6Ibcj5UUv7M8QWZTE52jEwGOVaD8U1Dw1YNWX0qM8VKyb80L/TrOPYOzH4KBJQTrK8M7+7KZjuM63sHBt17FubGoibCuf+tarWFGUmuwWeT8/vCXo1tZOYeZcazCaez8MwEzzM+HqhqtiJI5twxL1jeGLYk7jmKMF1JOCbg6Qj5nAdRqX7q3BYm8VAmQvW1lfcMc58IT95uIA3q+gftrDHPXUXJWkVEHJme5Bp5UmHsvIZ/O3l8ECE/FWcsItX2hr0ae8O2Wjs+J43QTbOZzGYQ/7Wtxq6eXjRK3r0By4YJ6Ty8EiYSJqcm2eGeV4Pox/ANENJR49RiEdfqcLflUJrEBZqgxYHrBjn2ExFURqKdVETN9YirJxKxR2rbrYeQv5ISmB6IsiDGNfZGWPeMgkzr58xnPaJ5p6XDZPKz4T77wayJ7jGhhXLwanOHTWBgq5n5q6YUwNJ7l3kKcRl7OJ7fF56l1GzvHbSD8dghTPi0wIRfv6XafjJ3ssv0PnZQ7nZx/etwzO1zJ3lHR2OETTw8x0tOx1AN3De0D7YV+63oGthjaJQ5Ur7eVVZjcdGInUyuaT73ZWg3efV8fZs7cc2E777Qi5eunVbghvPPymrt/krKGfcLd8ybYjdxrK6333Z09rjHZkNuLYzz0uIc+xWCZzz8nbHbe4dsY1e/XUOY+nimvtUaSazv4jXhaQasSbmYmpuenGwHZ8TKggSEQm08rMD7ahBOoExcMqXQegjnZ+CEvaEa1ZQUQkt39dj0zDS7krq+ARmpdws/nlNqD9WFbWN7l5u3wr9MyrcXKUsqWy3jTOaoML4DdaQ83YIoT4VYpEXvYQZLmbX5SLohBrgOj186Kc/iKTUPUhq+Rrm5ekOl3TWv1Mr6hqwbY0VOQXwEo+Moq4Z47q5qsU489G944LyJOW4LOLZOKtT/iI6+nGe/0dhuEd4ltj2NmiuCU4hnk5fHIi7+RK4uTEu0e+s7rAiRcw1CYy3OejvcYz+eXeI9MYY9nu3lYZl0KavJJ7Vjibzgjp319rUZE20j7CkJqFr5JQYgQ39f3eQaKpQk0afy8nl4uBzvjUUTRk7k3iebOm0pabDiyFn2XGu3dRME41CGVeBVqSiVnc6hIUpekp1VjHLDSOEcQlui5W/U8C7IKREjv1Gabw3wRwUTvpv7jybPtzHmIPZ49q6KRjuccqBQVCOtGvqXhrCFUUXJzOYSHt7Kw5Ix9H08dSje1o1JyL73IYXpEMmE5CRbw6wuykx2pR+Pd6/J4JpLiJKV6N9OnrcQNfQ0Zem6qQX2MmFXyWTE+DMO0kGx4e08DEjnXbsYuOq7niHB8jdY/wQ8Srm2XCZZUrOakF1CY5EKX0h93Tu/1J4kRdbDMT8MamgZK9xe3uDcvrPe++Y4f61rcZr7B53rN1c5N2ytcV5rCrvHt3T2Og19g+5nH7dvq3bqunr4NOwgK2MHA1jeEDuG7HNuLmtw7qpocl5t6nCPvdTQ7v4N4u3WTqeyu9cZHIo4f6lqdFoHh7wzMbzDeeGv3Hvzjlrnh2W1zofhHuftxpFn3VFe7zxS0+p0DlKVPbhhvBxhvwiFMgfP+mjHA08gEC4pybeLyK1iZldh8zC5VJQyUl8l59KZ0WJk2xaiYWxNrkXXJhA8r3PvZRur7ZZZRfadaRPsfiTmX9HGajC2tXd6V8dQTMhX0h8rNdJx9Ra8F8SbRNLzhPRnJmTZIUTYueTyWxyr7uv3rjC3OkzE8495oS+4xq6D5WoI0bO5WVCOSerl8rIeBrOI/Hkaw6ME5W1zSuzx2la3CRdWi3zIG+FDBvUp9LMgI/vggUmE7KkT81yGvOOgEYa/aUahhRAF5xLec3OzbF1r2O17BbVxIi7hzJIC64IYhXdJA+nh/5xVbOmE9J0QqjSxWk0pp37M2YEtgjS8GpimACu7xkqxdKJ6fEXyYl2Lre0ZtC8yELVewtWUnbfCPIhrvgDFz8WI5yhJKgcnFMZWEFrwhgzo5uWDDDA1oGSOzcu0xfx7vTlsv6posIMpJ6cGWPiw/BxL4PU7vbrpjgf8bMdu5OYwOdhm83DARUSa0ELknYIeEAaILuWxlhGa0M8+EuJCrpJT+ymENhN60pXBxa3LZ5TsucnlGaCmIEQ4Evru91yuz0xMtKaeXluI5zdh9Mm8vAlBn4aR07X64EH3vEKdXQkZJXPP/JxMvNRpLxEtHZ5RQgmNewnpouvVTpYTHdfOnmy5kFUGnpRTfEhXD9DiBdFFJB0/YWS9aj6pmc89r0BaQmgTRkgI+EsdKsYasJZOBF+QqTH474NK7LbyBvf7W+RgOxNyxfQY2/2hrp2+NkroxrzrQ55fSZkpJIa28znCgF6rb7H1hOSslATyvNflAh9pvHcX3lVE/Ya8FjTJIexa2Rq77nfU96unTnD7aME3+TAm6BFKYrPnqCNIqV5sq0ZGCiEV+Db+qWMQqpFgb5KPx48R6omeDl2EuP9DTYt9iGA/f1KBS1w/La+H4ktsSmLItvZHXLUkrCeflVtJ9DVVg1H7+sxiGvVM975rZpfabuqHVhuP5F1vewav5O8GamUe91yDanoYw47FWzC929O+DJnKA2opFY1Rjru5CE7kOcO0jJtQVUIynzuZEMeb+1CEOFXN8iFSGeRpCm1BTlJxVg49Azm819SO7Bu0axEbwn27GuxMck+TMQHDP8fn48gfDVIL4R8xKVPJ73MQBUIfA/Z54LMw5vmlE+w+VFo2A78X/SsyPA/RMD0z3e2qVLtfo7aeBslpMX0N0TEnLcUlKym1jyBFqSohmYntI5enBhYB9CY/2kNarhwJhNiMtRGyWnkQdKaCFyQwgydjyNUw4VchKxXv2/DoKdC+lkQbCX1NlKCGvJiBJkSGbCus6jfo4yGBNySgr+u7e20BCsxdVAcFlJ/tHd32+cIsNxSXUULUUx+dg/d47g7OPYFw2MxkSuyMwLHVTI6PBN6dS8Sppw45zHJSgDXV3aQzmz40Z6fDgBfiAXU0uZxby2zejee+j3eltoQMzhV6qSBogXwrEXDj7ElWxUQ8RrnSaoU0dxIsKaiMvMykXTu90NqJsGHP4z78SdLigUrLKat32nFwy/E07pfDFRdQ/7N5r57pQ1482uvWhMGhQcviGkVrKDUp0ToCxfhQal5n4Hs/g1jOgH4LWdwFOd1b1WzHET4vLZppv+Czjxo840OrDlG8jAJzv2tp5mLK1dsU/lfIOeWy5NxFxfl2BoYImlQtx9QF6mJRQKBsQYYuO2yaLYPBUXvu/VqYPxtHhNy7Y4hCkNLGPtKSklzCVKSHtMQxcqm5Kw1DhI2PTGZtcGDAvoLQ/u7MifYtWFBlxz2H9zo8RkwKzC5UYiG+p44ccqE62YAxLeT/TOpf8MXx8Qk0IJFRY1Go+viQVJpE5Ehjf49xfAZeqGIy/7us3nqxwQfCkjZypPxobVr/6YpQHIalUvuCyEwbSXC9PC8QnkFcXlrgLpoLIhIfKuaqlQkYIAwQnr/f3eyu7KttOw2lNpv8/BPHyjzVNER3o72gvEBKqRMTflndbP8BMweRDyeciEj5bFayFXqTLzheivgYJC0jwzwHa0MDDEotm48ndze5BBBElAnxxcRYHAFh3FfZaA9UNRmC354kNwUx8eHkmVj5dcTE5ZMnuEyr1QqlhtaJLuOYZv4v3KNo0TKrGPUZ1NILPKuWcvVn5Trv10SMB6h0j/ARMnlOuafCBIfnSWEx/Raif3HDzofYMM31dOyY9LBaLK3TjoX2fEqT4+2qaUVWSTQvyM6wC8nNJyEetXIyuLKrx04P7MKNnbJZlKUtNAIHo7i2dA/YU3Vtdi5l6jCepXy8hOedSSSsI8/HQg5Q+gxTKXwkMHkbESo+hjG0lbRRzQ3Fc5LOzDuFhs3Ptumpie7ilRDhlEJOq/hjsZljCxjkt7fWuPS/EekpXMggJQIk0G+eN9Xu2VmHWIkJe0nJRN4ptBBit2yutG9ML7J1DHAxebiAMrZ4VZlduqGS8I2tJc2iborUxmIN79c+kTovFxivPvrcSaP3n7RSKYTUmKt4N3rMOcw4JOneD3sP956jNaMglIeTER5Xbdlt15Tm2W10NEsYrA/N5JLCHHsR9tSqwxq08G3bqm1ZTbOtagnbo6SLvH/VzBL7W7jPzqFea0LmMLFzUuLtdwumuO3i1Vtq7OK15Xgw3l1PDmIXak+6QBEkvB9YJIzBcc/L20JIYaSZ/qAzVm5Ut4oowk3QehC+N3xo/1wTqt7zsYawfX9no9XjqdPXVLhrwyo/wucJYQkE1e4j8rLcBuHUItQQKqgMXb6LGvxFQlXw33AdZLR0V5P9Fr29lP73scNnosoyvdWPv4fPJ+uJrLVtMakqaL1M1cTvv0OLIZE6wk2a2IcIRUQh+DaejpdcXepBa7bKDRGM9PIVxTl2EwarZ72rooVuY4RQtMypdk6e1lLLehhY2lt7QEd7WxlCDvdIli6E9B4+ZIodmZEMccUGqgiZOqru9tkR3iJ8nCcXRWRZCSPMLPEjlx2LjQL1OM5qKAm+vhSuRqSfV5Ttrg8FdWcrnhMqCTex7DEM6qTsVEuM1+8hovaHQ6e6a1Fz0xLd3nUt4ToWWuzWNkhcoAIIjUx2ZpxjLzWF9+SYmngR1lok4TEoJxGfuijhI/7OICoFmadl2llcL9b1oRVJtbD+JLlv1KrhHG5811t9ELbzgk14ICUwqE+TDzftqHPz98vUSy3jSIwP8dCpkNqLDPTx+rArz4T5qLG3G2PrvJKKPoLBWE501NC3ilUX5mVjVIb9nIbgWcpPMiSXjbcL8K62UkR86m1/yfkSeMaHFuK04X0CE3J6SWzFUxw0BSNHlSzi3RmIRJwHq5udO3c16quLp6sbnffbupxbt+12vzOrzuvNHc7ycRbIxuJHgYU7YSASdQgxp7qz2ynv6HJeqW91doa7nLruXof+17sqhhu31Xif9o7HalqczV29Dnrb/f5EXZvzdH27U98/6LR5i3N0UM5zjHU71/lwjRWWltU5CAIn7F1MqLp/r9hQ5RoaxG+qmrxP4yNKcfsFLwuiprffeb2l03m2scO5h3Or2rudzjGrhk8x4Cqu2xcexilBvNEcdi5Yu4tKF3Ue4tzPy+td5/1md4tzw5iJ27NuXEYobYUdlb8z6GTWkdxaCvk2zHjd5mpKQ459mv5TkAp6mQb9Aq9HHQ8S6mrZnuc6vUG6WHusIhCJGNXl9byvnJyaiE7+Eoz8c5TYNQiUveENGpJpcIJ+biS8R0+rlcazGNs7pKB+zPLTOSX2KNWhlDAf4r2Spj72JORB5OyHULX+dlD/FOky/HFy5ygYU0sey/i8moeqdunXK1qC3RuaMOYHlI/raQMl3M+EeTV5WxD3Km8a8PkM8nr648sQ9+esKbf5e/nxiKBfAOQkxbv3SU9LYmqPV9V/Pn+V20VwTyVjTqCI6edEQUOFUXs9WmfSll8DyX2dt7GlnwkswaM3l9XZ0oNK3MTXbxpOV2sGk69s6XCJw4cY8KbyRrt9TrHt7Bm0rRBQe1+fHUWNfaapU0KbqxzbORC1M/LS3dJwIl3KOrwykQG/E+61q+isgniztdOKqNOziDgZqZIzFwPvqGiyg5NCtoCqoG5NxHhPZTOsnORulKskjoKMDeLuXQ3OmnC3syxARFXdfc57LR3OrdtrvSOOs55rnqhtcdoGhpxHdjc5EfJUuHZTlftX+G15rXPlhkrnLe59F7Lz8VGHdg8c5y2OLeMZ126qduq9XC3v7nd+FchLvYPJd15gPCu8XQnh/qpm59WGVudZzvvQO97kXTcGxhnEuJvR39tWY8cwK4uhcikk4a3Gdstg9l5B2t0wfaTdWkEou5vCPOV5PH73vFL3+DfXltnh6OxjkJD6Wd5F3g88tMe6CW/7YmI99VIL4u0oqUK8ocW4d8hFrXMVoOQU8s3U97MnjvDD/XRYkyhHM1MT3GVZQR2Tdv70U8EbA5vlo+CaPAaaSWoZXm50otGodxQ6L6txGKxzw5ZYORrBsPPrykZKQIy1n8bTjwb2fO4Te3ue7x6KOKvaYns1wtIddd4nx3mwot55qyl2360cp81zurg+CGqwU8v4/Of5uAVvPgObrwvHomY8jOtZ4fXWLnefdHVXv9044+8ZklCx75DXwcV1Sb27y+vInUQEuVYSaMgRJYfAwtoj0raFxIUW1A8nz35f02qLc9Lc9lG7CBkwtUR7bf+A+5uL6ehnH9Lat+5sIEfj3Cbj3NKRvP7Rjlo7FSmqavKvpSP8MRZ7NVbQYLSkqlC9ZW4sPH18gBTcORjrhMWmQWzFmK2UsvO90qQ1oZcI8UhkCLZPtRqMy0NirobAvjIpb4/sW06qKGyPR2oGIdlazjOOTk+kLYzaaYGSp63Wz6HsXsQ51wd+LTAuZOy+8GBNq7tF+IOdDU4kENJthNID5YRafZtzZ3mDs9LbRgzixcZ2l1h83OKFbDmEd0/FiFp7DWHgp0AQGzq6nf8hPF+oa3EehOz0ziCWcm4NpBRMhX1hn571oR9wqVVSDVPtUi32sQ0vbu7scZdY9aOt2ZSEL9BEBIW+dv20AKDd9/ep09oimYqHpyImkKDuRllS4PrlHNuIqDmCJmNJQba7q1joEaUQJuR/WdXsLrJrq/L6cdJsPOyXscJ7GLKqo8cOpqhrO//yQG6oS3kZwS9xPkRB3wi7diFMtDN+PLk5m1ath+8f0Fy80dbjhvVXub+U5mEqeal27UP+dWpPlknNxW79Ak6/7Tg3UMOF52j1xA1qK7Trd6nXC+8P9ttYQcumIonLSnJtBdJNa77axw1C2x3qR4Wqnj73x9f6MbV+CCYFBZO6y51aSh3gzVrsmwzJnULEbCJC1oZ7vIZ/9Iqmfvn2u5oWO5n8fApxcuWUApum5diPgY9lrA9EtvUNOzYf8vqAcJPsU5iOh7XtXQgt2uZhjKU2amF7HQyfEYWcZk5yQ1RDKNrLcq02k/9IGmldrB93KiokPw8EB2SsoKWXO5FmxXhlckqi+3vEUvLqwok5PHVkIWAszlqzy1p54zuLpnPZ3q9bod08JlLSb5DrNxDm38Sbvsg5EBywsT7oH+3XNW3uasGirFSrxRNdCllKiPZHZzJYLZb5qEcpae3pxMCuu9oibS5/QCOiLcYUrp+MmtJeURjFdVlxzqiae6D4h40NQt54HyGv3JRo10aVfv8YhtC0pSlVKcPFuxIXahr08mzCO4VzMlLSsZuomZ+RaucU0rXsw/sfF5+osUFonWob/7TrLdaUgdpV93fl9X+VIC0Y6tek2uI8OD3J5gT2Vj9ZmP0f4IM4iY7RQ5gAAAAASUVORK5CYII=) no-repeat 50%;background-size:64px 64px;opacity:.84}.markdown-body h1:after{position:absolute;content:"";width:150%;left:-25%;height:50%;bottom:12px;border-radius:50%;background:linear-gradient(transparent 80%,rgba(77,208,225,.8));background-size:400% 200%;opacity:.6;animation:h1Animate 6s linear infinite}@keyframes h1Animate{0%{background-position:100% 100%}50%{background-position:100% 50%}to{background-position:100% 100%}}.markdown-body h2{display:block;border-bottom:4px solid #4dd0e1;position:relative;font-size:24px;padding:12px 32px;margin:30px 0}.markdown-body h2:before{width:24px;height:24px;left:0;top:0;margin:auto;background-size:24px 24px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADGklEQVRYR81X32vTYBQ999s6mFjQgQ+DrbHiVFZYU4cDcQ/6pGhTFVYFEXGi82H+Bz448UnEF1Fx9ccEEcXpZE3d5tP2ooKiTacTHaLNpigMHDgnU9tcSbrWrkwWR0sbyEOSe885ObnfvV8IRT6oyPwoLQHBx+OVM5WJvSyEVAhnBOjt7yU/+/rr6r6l8TMO+F/EN0JQhICqQpD/xaRpcpAc9tS+M+9lBCia/oqBamK+zeDuQogQZaKJk3wcQjxSva7tGQGB2Ke1zIk3DNyMyNL+QpCnMQOaPsDAVuGAp9cjvbYc8Ec/bCYSg0zoiHilk1tHxqsqEsYlML4kjIpT/eurJxRNPweQU5VdrWaOEo1fgKAVbBgXIz73kF3R/ph+ghgdzMYWM29eAWlBJqgZaFlFYtC6nhWpaDqnSGlIlV1WjJ3DloDNgyNLncudqgX//Ucg3LxuStHGuhi8pqKCW3rqV342rwFjRznKm+/LNaN2yC237ThgF2wxcfMLeP6+ncrKzoPoKTGeLQbYbg4TNoC5iZPJY5HGVRdSNZAWYBclD3FzBQzrR8hACAKdzBzKA/4/IYioDQaOskBbpEG6PO8qKKSAEi3CnEb0Pw4oMf0OmKbTDWqh3Lw6EIiNBZi5lxh3wz4puBD5ovqAMvxhHSdFKxE1CQe3m/07TeTX4lcJdAhE+1Sv65Z5P/ByvIGTRowIZ9igbtXnmrOsbTvgj+kHBNMuBu9OdVw8EeU4nC1A0cYmAHZOTRrLhra4Z8ywnSN6vZHAFTA2WnnMfQB3qz73ddsOZM8CACFDIPSgQXqebXEgqgeZcAeEe6pXasm1f8ew3igMtAHWac0Uc/jYdyAaP0xEBwFsmgUPqbJ0NE2UKj4EGcahiOzuyhagaHpnmtgcVgTcCMuua7YdyAHbA3ArQNscVFbb4635aD6fnYaTvxxi9UNP7ddMXaRWVBdAcaLk6bDXPZCNZ9uBXEsDUX1T2Cc9yjig6Z0EHg3LK8/aqf6MwJKchkXfks1+0+JtSq3qLPa23BRR1B+T/6nkfMaW1r9hPt/MLtYfTLEpP+T9FNoAAAAASUVORK5CYII=)}.markdown-body h2:after,.markdown-body h2:before{content:"";display:block;position:absolute;bottom:0}.markdown-body h2:after{right:0;width:400px;height:10px;border-top-right-radius:24px;background:linear-gradient(90deg,#fff,#4dd0e1);max-width:50vw}.markdown-body h3{margin:30px 0;font-size:18px;position:relative;padding:4px 32px;width:max-content}.markdown-body h3:before{border-bottom:2px solid #4dd0e1;width:100%;content:"";display:block;height:28px;position:absolute;left:0;top:0;bottom:-2px;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);background-repeat:no-repeat;animation:h3AnimationBefore 2s infinite alternate}@keyframes h3AnimationBefore{0%{width:28px}25%{width:100%}50%{width:100%}to{width:100%}}.markdown-body h3:after{content:"";display:block;width:28px;height:28px;position:absolute;border:2px solid #4dd0e1;border-radius:50%;right:-15px;top:0;bottom:0;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);animation:h3AnimationAfter 2s infinite alternate}@keyframes h3AnimationAfter{0%{transform:rotate(0)}10%{transform:rotate(0)}50%{transform:rotate(-1turn)}to{transform:rotate(-1turn)}}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin:22px 0;letter-spacing:2px;font-size:14px;word-spacing:2px}.markdown-body img{max-width:80%;border-radius:6px;display:block;margin:20px auto!important;object-fit:contain;box-shadow:0 0 16px hsla(0,0%,43.1%,.45)}.markdown-body figcaption{display:block;font-size:13px;color:#2b2b2b}.markdown-body figcaption:before{content:"";background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAGFBMVEVHcExAuPtAuPpAuPtAuPpAuPtAvPxAuPokzOX5AAAAB3RSTlMAkDLqNegkoiUM7wAAAGBJREFUKM9jYBhcgMkBTUDVBE1BeDGqEtXychNUBeXlKEqACsrLQxB8lnCQQClCiWt5OYoSiAIkJVAF5eVBqAqAShTAAs7l5ShKWMwRAmAlSArASpAVgJUkCqIAscESHwCVVjMBK9JnbQAAAABJRU5ErkJggg==);display:inline-block;width:18px;height:18px;background-size:18px;background-repeat:no-repeat;background-position:50%;margin-right:5px;margin-bottom:-5px}.markdown-body hr{border:none;border-top:1px solid #4dd0e1;margin-top:32px;margin-bottom:32px}.markdown-body del{color:#4dd0e1}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(77,208,225,.08);color:#26c6da;padding:.195em .4em}.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#4dd0e1;border-bottom:1px solid #4dd0e1;font-weight:400;text-decoration:none;margin:0 4px}.markdown-body a:active,.markdown-body a:hover{background-color:rgba(77,208,225,.1)}.markdown-body strong{color:#26c6da}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{font-style:normal;color:#4dd0e1;font-weight:700}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(77,208,225,.05)}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{margin:2em 0;padding:24px 32px;border-left:4px solid #26c6da;background:rgba(77,208,225,.15);position:relative}.markdown-body blockquote:before{content:"â";top:8px;left:8px;color:#4dd0e1;font-size:30px;line-height:1;font-weight:700;position:absolute;opacity:.7}.markdown-body blockquote:after{content:"â";font-size:30px;position:absolute;right:8px;bottom:0;color:#4dd0e1;opacity:.7}.markdown-body blockquote p{color:#595959;line-height:2}.markdown-body ol,.markdown-body ul{color:#595959;padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">å®‰è£…ä¾èµ–</h3>
<pre><code class="hljs language-npm" lang="npm">npm install vuedraggable@next
</code></pre>
<h3 data-id="heading-1">å¼•å…¥ç»„ä»¶</h3>
<pre><code class="hljs language-vue" lang="vue">import draggable from 'vuedraggable'
</code></pre>
<h3 data-id="heading-2">åŸºç¡€ç”¨æ³•</h3>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
    &lt;draggable v-model="innerList" item-key="props" handle=".sort-icon" :disabled="false" :animation="300"&gt;
        &lt;template #item="{ element }"&gt;
            &lt;div class="flexAlign"&gt;
                &lt;div class="sort-icon" style="margin-right: 5px;cursor: pointer;font-size: 18px;"&gt;â ¿&lt;/div&gt;
                {{ element.label }}
            &lt;/div&gt;
        &lt;/template&gt;
    &lt;/draggable&gt;
&lt;/template&gt;

&lt;script setup&gt;
    import draggable from 'vuedraggable';
    const innerList = ref([
        {label:"åç§°"}
    ])
&lt;/script&gt;
</code></pre>
<h3 data-id="heading-3">å¸¸ç”¨å±æ€§è¯´æ˜</h3>













































<table><thead><tr><th>å±æ€§å</th><th>ç±»å‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>â€‹<code>v-model</code>â€‹</td><td>Array</td><td>ç»‘å®šæ•°ç»„ï¼Œæ‹–æ‹½åè‡ªåŠ¨æ›´æ–°é¡ºåº</td></tr><tr><td>â€‹<code>item-key</code>â€‹</td><td>String</td><td>æ¯ä¸ª item çš„å”¯ä¸€ key</td></tr><tr><td>â€‹<code>tag</code>â€‹</td><td>String</td><td>æ¸²æŸ“çš„å®¹å™¨æ ‡ç­¾ï¼Œé»˜è®¤<code>div</code>â€‹</td></tr><tr><td>â€‹<code>group</code>â€‹</td><td>String/Object</td><td>åˆ†ç»„è®¾ç½®ï¼Œæ”¯æŒè·¨åˆ—è¡¨æ‹–æ‹½</td></tr><tr><td>â€‹<code>disabled</code>â€‹</td><td>Boolean</td><td>æ˜¯å¦ç¦ç”¨æ‹–æ‹½</td></tr><tr><td>â€‹<code>handle</code>â€‹</td><td>String</td><td>æ‹–æ‹½æ‰‹æŸ„é€‰æ‹©å™¨</td></tr><tr><td>â€‹<code>animation</code>â€‹</td><td>Number</td><td>æ‹–æ‹½çš„åŠ¨ç”»è¿‡æ¸¡æ—¶é—´</td></tr></tbody></table>
<h3 data-id="heading-4">äº‹ä»¶å</h3>



































<table><thead><tr><th>äº‹ä»¶å</th><th>è¯´æ˜</th><th>å‚æ•°</th></tr></thead><tbody><tr><td>â€‹<code>@start</code>â€‹</td><td>æ‹–æ‹½å¼€å§‹</td><td>â€‹<code>event</code>â€‹</td></tr><tr><td>â€‹<code>@end</code>â€‹</td><td>æ‹–æ‹½å®Œæˆ</td><td>â€‹<code>event</code>â€‹</td></tr><tr><td>â€‹<code>@change</code>â€‹</td><td>åˆ—è¡¨é¡ºåºå‘ç”Ÿå˜åŒ–</td><td>â€‹<code>{ moved: { oldIndex, newIndex } }</code>â€‹</td></tr><tr><td>â€‹<code>@add</code>â€‹</td><td>ä»åˆ«çš„åˆ—è¡¨æ·»åŠ åˆ°å½“å‰</td><td>â€‹<code>event</code>â€‹</td></tr><tr><td>â€‹<code>@remove</code>â€‹</td><td>å½“å‰åˆ—è¡¨è¢«ç§»é™¤å…ƒç´ </td><td>â€‹<code>event</code>â€‹</td></tr></tbody></table>
<h2 data-id="heading-5">å®æˆ˜è¿›é˜¶åœºæ™¯</h2>
<h3 data-id="heading-6">æ‹–æ‹½æ‰‹æŸ„é™åˆ¶ï¼ˆåªèƒ½é€šè¿‡å›¾æ ‡æ‹–åŠ¨ï¼‰</h3>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">draggable</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"list"</span> <span class="hljs-attr">item-key</span>=<span class="hljs-string">"id"</span> <span class="hljs-attr">handle</span>=<span class="hljs-string">".sort-icon"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">template</span> #<span class="hljs-attr">item</span>=<span class="hljs-string">"{ element }"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"sort-icon"</span>&gt;</span>â ¿<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
      {{ element.name }}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">draggable</span>&gt;</span>
</code></pre>
<hr/>
<h3 data-id="heading-7">ç¦ç”¨æŸé¡¹æ‹–åŠ¨</h3>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">draggable</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"list"</span> <span class="hljs-attr">item-key</span>=<span class="hljs-string">"id"</span> <span class="hljs-attr">:move</span>=<span class="hljs-string">"checkMove"</span> @<span class="hljs-attr">change</span>=<span class="hljs-string">"logChange"</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">draggable</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">const</span> <span class="hljs-title function_">checkMove</span> = (<span class="hljs-params">e</span>) =&gt; {
  <span class="hljs-keyword">return</span> !e.<span class="hljs-property">draggedContext</span>.<span class="hljs-property">element</span>.<span class="hljs-property">fixed</span>
}
<span class="hljs-keyword">const</span> <span class="hljs-title function_">logChange</span> = (<span class="hljs-params">e</span>) =&gt; <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(e)
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<hr/>
<h3 data-id="heading-8">è·¨åˆ—è¡¨æ‹–æ‹½</h3>
<pre><code class="hljs language-ini" lang="ini">&lt;draggable <span class="hljs-attr">v-model</span>=<span class="hljs-string">"list1"</span> item-key=<span class="hljs-string">"id"</span> group=<span class="hljs-string">"all"</span>&gt;
  ...
&lt;/draggable&gt;

&lt;draggable <span class="hljs-attr">v-model</span>=<span class="hljs-string">"list2"</span> item-key=<span class="hljs-string">"id"</span> group=<span class="hljs-string">"all"</span>&gt;
  ...
&lt;/draggable&gt;
</code></pre>
<p>ä¹Ÿå¯ä»¥ä½¿ç”¨å¯¹è±¡æ–¹å¼æ›´çµæ´»æ§åˆ¶ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">group="{</span> <span class="hljs-attr">name:</span> <span class="hljs-string">'all'</span><span class="hljs-string">,</span> <span class="hljs-attr">pull:</span> <span class="hljs-literal">true</span><span class="hljs-string">,</span> <span class="hljs-attr">put:</span> <span class="hljs-literal">true</span> <span class="hljs-string">}"</span>
</code></pre>
<hr/>
<h3 data-id="heading-9">åµŒå¥—æ‹–æ‹½ï¼ˆå¦‚æ ‘å½¢ç»“æ„ï¼‰</h3>
<pre><code class="hljs language-ini" lang="ini">&lt;draggable <span class="hljs-attr">v-model</span>=<span class="hljs-string">"tabList"</span> item-key=<span class="hljs-string">"id"</span>&gt;
  &lt;template <span class="hljs-comment">#item="{ element }"&gt;</span>
    &lt;div&gt;{{ element.name }}&lt;/div&gt;
    &lt;draggable
      <span class="hljs-attr">v-if</span>=<span class="hljs-string">"element.children"</span>
      <span class="hljs-attr">v-model</span>=<span class="hljs-string">"element.children"</span>
      <span class="hljs-attr">item-key</span>=<span class="hljs-string">"id"</span>
      :<span class="hljs-attr">group</span>=<span class="hljs-string">"{ name: 'all' }"</span>
    &gt;
      &lt;template <span class="hljs-comment">#item="{ element }"&gt;</span>
        &lt;div <span class="hljs-attr">class</span>=<span class="hljs-string">"child"</span>&gt;{{ element.name }}&lt;/div&gt;
      &lt;/template&gt;
    &lt;/draggable&gt;
  &lt;/template&gt;
&lt;/draggable&gt;
</code></pre>
<hr/>
<h2 data-id="heading-10">ç¤ºä¾‹ï¼šæ‹–æ‹½åä¿å­˜é¡ºåº</h2>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"save"</span>&gt;</span>ä¿å­˜é¡ºåº<span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">draggable</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"list"</span> <span class="hljs-attr">item-key</span>=<span class="hljs-string">"id"</span> @<span class="hljs-attr">end</span>=<span class="hljs-string">"save"</span> /&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">const</span> <span class="hljs-title function_">save</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ–°é¡ºåº:'</span>, list.<span class="hljs-property">value</span>.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">i</span> =&gt;</span> i.<span class="hljs-property">id</span>))
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<hr/>
<h2 data-id="heading-11">å¸¸è§é—®é¢˜æ’æŸ¥</h2>
<ol>
<li>
<p><strong>æ‹–ä¸åŠ¨ï¼Ÿ</strong></p>
<ul>
<li>æ˜¯å¦è®¾ç½®äº†Â <code>item-key</code>â€‹</li>
<li>æ˜¯å¦è¢« CSS è¦†ç›–äº†äº‹ä»¶ï¼ˆä¾‹å¦‚ overflowã€positionï¼‰</li>
<li>æ˜¯å¦å¯ç”¨äº†Â <code>disabled</code>â€‹ å±æ€§</li>
</ul>
</li>
<li>
<p><strong>æ‹–åŠ¨å¼‚å¸¸ï¼ˆé—ªçƒ/è·³åŠ¨ï¼‰ï¼Ÿ</strong></p>
<ul>
<li>ç¡®ä¿å­é¡¹å…·æœ‰ç¨³å®šçš„Â <code>key</code>â€‹</li>
<li>ä¸è¦åœ¨æ‹–æ‹½ä¸­æ“ä½œ DOM</li>
</ul>
</li>
<li>
<p><strong>æ ·å¼å¡Œé™·ï¼Ÿ</strong></p>
<ul>
<li>æ·»åŠ å¿…è¦çš„Â <code>min-height</code>â€‹ã€<code>border</code>â€‹ ä¿æŒå¸ƒå±€æ­£å¸¸</li>
</ul>
</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vue æ·±åº¦é€‰æ‹©å™¨ `:deep` ä½¿ç”¨è¯´æ˜]]></title>    <link>https://juejin.cn/post/7577171133432135721</link>    <guid>https://juejin.cn/post/7577171133432135721</guid>    <pubDate>2025-11-27T02:07:05.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577171133432135721" data-draft-id="7576893180081668138" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vue æ·±åº¦é€‰æ‹©å™¨ `:deep` ä½¿ç”¨è¯´æ˜"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-27T02:07:05.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é“¶æœˆæµè‹"/> <meta itemprop="url" content="https://juejin.cn/user/2242659452206279"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vue æ·±åº¦é€‰æ‹©å™¨ `:deep` ä½¿ç”¨è¯´æ˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2242659452206279/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é“¶æœˆæµè‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-27T02:07:05.000Z" title="Thu Nov 27 2025 02:07:05 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Vue æ·±åº¦é€‰æ‹©å™¨ <code>:deep</code> ä½¿ç”¨è¯´æ˜</h2>
<h3 data-id="heading-1">ä¸€ã€åŸºæœ¬æ¦‚å¿µ</h3>
<h4 data-id="heading-2">1. ä»€ä¹ˆæ˜¯ <code>:deep</code>ï¼Ÿ</h4>
<p><code>:deep</code> æ˜¯ Vue 3 æä¾›çš„<strong>æ·±åº¦é€‰æ‹©å™¨</strong>ï¼ˆDeep Selectorï¼‰ï¼Œç”¨äºåœ¨ <code>scoped</code> æ ·å¼ä¸­ç©¿é€åˆ°å­ç»„ä»¶çš„å…ƒç´ ã€‚</p>
<h4 data-id="heading-3">2. ä¸ºä»€ä¹ˆéœ€è¦ <code>:deep</code>ï¼Ÿ</h4>
<p>åœ¨ Vue ä¸­ï¼Œ<code>&lt;style scoped&gt;</code> ä¼šä¸ºæ¯ä¸ªç»„ä»¶çš„æ ·å¼æ·»åŠ å”¯ä¸€çš„ <code>data-v-*</code> å±æ€§ï¼Œç¡®ä¿æ ·å¼åªä½œç”¨äºå½“å‰ç»„ä»¶ã€‚ä½†æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦ä¿®æ”¹å­ç»„ä»¶ï¼ˆç‰¹åˆ«æ˜¯ç¬¬ä¸‰æ–¹ç»„ä»¶åº“å¦‚ Element Plusï¼‰çš„æ ·å¼ï¼Œè¿™æ—¶å°±éœ€è¦ä½¿ç”¨ <code>:deep</code> æ¥ç©¿é€æ ·å¼ä½œç”¨åŸŸã€‚</p>
<h3 data-id="heading-4">äºŒã€å·¥ä½œåŸç†</h3>
<h4 data-id="heading-5">1. Scoped æ ·å¼çš„ä½œç”¨æœºåˆ¶</h4>
<p><strong>æ™®é€š scoped æ ·å¼ï¼š</strong></p>
<pre><code class="hljs language-vue" lang="vue">&lt;style lang="scss" scoped&gt;
.my-class {
    color: red;
}
&lt;/style&gt;
</code></pre>
<p><strong>ç¼–è¯‘åï¼š</strong></p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-attr">[data-v-7ba5bd90]</span> <span class="hljs-selector-class">.my-class</span><span class="hljs-selector-attr">[data-v-7ba5bd90]</span> {
    <span class="hljs-attribute">color</span>: red;
}
</code></pre>
<ul>
<li>åªä¼šåŒ¹é…å½“å‰ç»„ä»¶å†…çš„ <code>.my-class</code></li>
<li>ä¸ä¼šåŒ¹é…å­ç»„ä»¶ä¸­çš„å…ƒç´ </li>
</ul>
<h4 data-id="heading-6">2. ä½¿ç”¨ <code>:deep</code> ç©¿é€æ ·å¼</h4>
<pre><code class="hljs language-vue" lang="vue">&lt;style lang="scss" scoped&gt;
:deep {
    .el-form-item__content {
        align-items: self-start;
    }
}
&lt;/style&gt;
</code></pre>
<p><strong>ç¼–è¯‘åï¼š</strong></p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-attr">[data-v-7ba5bd90]</span> <span class="hljs-selector-class">.el-form-item__content</span> {
    <span class="hljs-attribute">align-items</span>: self-start;
}
</code></pre>
<ul>
<li>é€‰æ‹©å™¨ä¸­çš„ <code>.el-form-item__content</code> <strong>ä¸ä¼šè¢«æ·»åŠ </strong> <code>data-v-*</code> å±æ€§</li>
<li>å¯ä»¥åŒ¹é…å­ç»„ä»¶ä¸­çš„ <code>.el-form-item__content</code> å…ƒç´ </li>
</ul>
<h4 data-id="heading-7">3. å…³é”®åŒºåˆ«å¯¹æ¯”</h4>























<table><thead><tr><th>æ–¹å¼</th><th>ç¼–è¯‘å‰</th><th>ç¼–è¯‘å</th><th>èƒ½å¦åŒ¹é…å­ç»„ä»¶</th></tr></thead><tbody><tr><td>æ™®é€š scoped</td><td><code>.my-class { }</code></td><td><code>[data-v-xxx] .my-class[data-v-xxx] { }</code></td><td>âŒ å¦</td></tr><tr><td>ä½¿ç”¨ <code>:deep</code></td><td><code>:deep { .my-class { } }</code></td><td><code>[data-v-xxx] .el-form-item__content { }</code></td><td>âœ… æ˜¯</td></tr></tbody></table>
<h3 data-id="heading-8">ä¸‰ã€å®é™…åº”ç”¨åœºæ™¯</h3>
<h4 data-id="heading-9">1. ä¿®æ”¹ Element Plus ç»„ä»¶æ ·å¼</h4>
<p><strong>åœºæ™¯ï¼š</strong> ä¿®æ”¹è¡¨æ ¼æœç´¢è¡¨å•ä¸­è¡¨å•é¡¹çš„å¯¹é½æ–¹å¼</p>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
    &lt;zh-table&gt;
        &lt;!-- zh-table å†…éƒ¨ä½¿ç”¨ Element Plus çš„ el-form-item --&gt;
    &lt;/zh-table&gt;
&lt;/template&gt;

&lt;style lang="scss" scoped&gt;
:deep {
    .el-form-item__content {
        align-items: self-start; /* é¡¶éƒ¨å¯¹é½ */
    }
}
&lt;/style&gt;
</code></pre>
<p><strong>DOM ç»“æ„ï¼š</strong></p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-comment">&lt;!-- index.vue çš„æ ¹å…ƒç´  --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">data-v-7ba5bd90</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- zh-table ç»„ä»¶ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">data-v-abc123</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">el-form</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">el-form-item</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"el-form-item__content"</span>&gt;</span>
                    <span class="hljs-comment">&lt;!-- ğŸ‘ˆ è¢«åŒ¹é…åˆ° --&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> /&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">el-form-item</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">el-form</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<p><strong>CSS åŒ¹é…è¿‡ç¨‹ï¼š</strong></p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* ç¼–è¯‘åçš„é€‰æ‹©å™¨ */</span>
<span class="hljs-selector-attr">[data-v-7ba5bd90]</span> <span class="hljs-selector-class">.el-form-item__content</span> {
    <span class="hljs-attribute">align-items</span>: self-start;
}

<span class="hljs-comment">/* åŒ¹é…è¿‡ç¨‹ï¼š
   1. æ‰¾åˆ°å¸¦æœ‰ data-v-7ba5bd90 çš„å…ƒç´ ï¼ˆindex.vue çš„æ ¹å…ƒç´ ï¼‰
   2. åœ¨è¯¥å…ƒç´ çš„åä»£ä¸­æŸ¥æ‰¾ .el-form-item__content
   3. æ‰¾åˆ°å­ç»„ä»¶ä¸­çš„ .el-form-item__content å…ƒç´ 
   4. åº”ç”¨æ ·å¼
*/</span>
</code></pre>
<h4 data-id="heading-10">2. ä¿®æ”¹ç¬¬ä¸‰æ–¹ç»„ä»¶åº“æ ·å¼</h4>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
    &lt;el-input /&gt;
&lt;/template&gt;

&lt;style lang="scss" scoped&gt;
:deep {
    .el-input__wrapper {
        border-radius: 6px;
        background-color: #f5f5f5;
    }

    .el-input__inner {
        height: auto;
        color: #000000e0;
    }
}
&lt;/style&gt;
</code></pre>
<h4 data-id="heading-11">3. åµŒå¥—ä½¿ç”¨ <code>:deep</code></h4>
<pre><code class="hljs language-vue" lang="vue">&lt;style lang="scss" scoped&gt;
.zh-default-input {
    :deep {
        .el-input__wrapper {
            border-radius: 6px !important;
        }
        .el-input__inner {
            height: auto;
        }
    }
}
&lt;/style&gt;
</code></pre>
<p><strong>ç¼–è¯‘åï¼š</strong></p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-attr">[data-v-xxx]</span> <span class="hljs-selector-class">.zh-default-input</span> <span class="hljs-selector-class">.el-input__wrapper</span> {
    <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">6px</span> <span class="hljs-meta">!important</span>;
}
<span class="hljs-selector-attr">[data-v-xxx]</span> <span class="hljs-selector-class">.zh-default-input</span> <span class="hljs-selector-class">.el-input__inner</span> {
    <span class="hljs-attribute">height</span>: auto;
}
</code></pre>
<h3 data-id="heading-12">å››ã€è¯­æ³•è¯´æ˜</h3>
<h4 data-id="heading-13">1. åŸºæœ¬è¯­æ³•</h4>
<pre><code class="hljs language-scss" lang="scss">:<span class="hljs-built_in">deep</span>(é€‰æ‹©å™¨) {
    æ ·å¼è§„åˆ™
}

<span class="hljs-comment">// æˆ–è€…ä½¿ç”¨å—è¯­æ³•</span>
:deep {
    é€‰æ‹©å™¨ {
        æ ·å¼è§„åˆ™
    }
}
</code></pre>
<h4 data-id="heading-14">2. ä¸¤ç§å†™æ³•å¯¹æ¯”</h4>
<p><strong>å†™æ³•1ï¼šå‡½æ•°å¼ï¼ˆæ¨èï¼‰</strong></p>
<pre><code class="hljs language-scss" lang="scss">:<span class="hljs-built_in">deep</span>(.el-form-item__content) {
    <span class="hljs-attribute">align-items</span>: self-start;
}
</code></pre>
<p><strong>å†™æ³•2ï¼šå—è¯­æ³•</strong></p>
<pre><code class="hljs language-scss" lang="scss">:deep {
    <span class="hljs-selector-class">.el-form-item__content</span> {
        <span class="hljs-attribute">align-items</span>: self-start;
    }
}
</code></pre>
<p><strong>ä¸¤ç§å†™æ³•ç¼–è¯‘ç»“æœç›¸åŒ</strong>ï¼Œå—è¯­æ³•æ›´æ¸…æ™°æ˜“è¯»ã€‚</p>
<h4 data-id="heading-15">3. ç»„åˆä½¿ç”¨</h4>
<pre><code class="hljs language-scss" lang="scss">:deep {
    <span class="hljs-selector-class">.el-input__wrapper</span>,
    <span class="hljs-selector-class">.el-textarea__inner</span> {
        <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">6px</span> <span class="hljs-meta">!important</span>;
    }

    <span class="hljs-selector-class">.el-input</span><span class="hljs-selector-class">.is-disabled</span> <span class="hljs-selector-class">.el-input__wrapper</span> {
        <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#fafafa</span>;
    }
}
</code></pre>
<h3 data-id="heading-16">äº”ã€ä¸ºä»€ä¹ˆèƒ½æ‰¾åˆ°å­ç»„ä»¶ä¸­çš„å…ƒç´ ï¼Ÿ</h3>
<h4 data-id="heading-17">1. CSS é€‰æ‹©å™¨çš„ä½œç”¨åŸŸ</h4>
<p><code>:deep</code> ç”Ÿæˆçš„é€‰æ‹©å™¨æ˜¯<strong>åä»£é€‰æ‹©å™¨</strong>ï¼ˆDescendant Selectorï¼‰ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-attr">[data-v-7ba5bd90]</span> <span class="hljs-selector-class">.el-form-item__content</span>
</code></pre>
<p>è¿™ä¸ªé€‰æ‹©å™¨è¡¨ç¤ºï¼š</p>
<ul>
<li>åœ¨ <code>data-v-7ba5bd90</code> å…ƒç´ çš„åä»£ä¸­</li>
<li>æŸ¥æ‰¾ <code>.el-form-item__content</code> å…ƒç´ </li>
<li><strong>ä¸é™åˆ¶å±‚çº§</strong>ï¼Œå¯ä»¥åŒ¹é…ä»»æ„æ·±åº¦çš„åä»£</li>
</ul>
<h4 data-id="heading-18">2. DOM æ ‘ç»“æ„</h4>
<pre><code class="hljs language-css" lang="css">index<span class="hljs-selector-class">.vue</span> (data-v-<span class="hljs-number">7</span>ba5bd90)          â† æ ·å¼ä½œç”¨åŸŸçš„æ ¹
â””â”€â”€ zh-<span class="hljs-selector-tag">table</span> (data-v-abc123)         â† å­ç»„ä»¶
    â””â”€â”€ SearchForm                   â† å­ç»„ä»¶çš„å­ç»„ä»¶
        â””â”€â”€ el-<span class="hljs-selector-tag">form</span>                  â† Element Plus ç»„ä»¶
            â””â”€â”€ el-<span class="hljs-selector-tag">form</span>-item
                â””â”€â”€ <span class="hljs-selector-class">.el-form-item__content</span>  â† è¢«åŒ¹é…åˆ°
</code></pre>
<h4 data-id="heading-19">3. æ ·å¼ç©¿é€æœºåˆ¶</h4>
<ul>
<li><code>:deep</code> è®©é€‰æ‹©å™¨ä¸­çš„ç›®æ ‡ç±»<strong>ä¸è¢«æ·»åŠ </strong> <code>data-v-*</code> å±æ€§</li>
<li>å› æ­¤å¯ä»¥åŒ¹é…åˆ°å­ç»„ä»¶ä¸­çš„åŒåç±»</li>
<li>é€šè¿‡åä»£é€‰æ‹©å™¨åœ¨ DOM æ ‘ä¸­æŸ¥æ‰¾åŒ¹é…çš„å…ƒç´ </li>
</ul>
<h3 data-id="heading-20">å…­ã€æµè§ˆå™¨ä¸­çš„å®é™…æ•ˆæœ</h3>
<h4 data-id="heading-21">1. å®é™… DOM ç»“æ„</h4>
<pre><code class="hljs language-html" lang="html"><span class="hljs-comment">&lt;!-- æµè§ˆå™¨æ¸²æŸ“åçš„ DOM --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">data-v-7ba5bd90</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"..."</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">data-v-abc123</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"table-search"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"el-form table-search--left"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"el-form-item"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"el-form-item__content"</span>&gt;</span>
                    <span class="hljs-comment">&lt;!-- ğŸ‘ˆ è¢«åŒ¹é… --&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"el-input__inner"</span> /&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<h4 data-id="heading-22">2. CSS è§„åˆ™åº”ç”¨</h4>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* ç¼–è¯‘åçš„ CSS */</span>
<span class="hljs-selector-attr">[data-v-7ba5bd90]</span> <span class="hljs-selector-class">.el-form-item__content</span> {
    <span class="hljs-attribute">align-items</span>: self-start;
}
</code></pre>
<p><strong>åŒ¹é…è¿‡ç¨‹ï¼š</strong></p>
<ol>
<li>æµè§ˆå™¨æ‰¾åˆ°æ‰€æœ‰å¸¦æœ‰ <code>data-v-7ba5bd90</code> å±æ€§çš„å…ƒç´ </li>
<li>åœ¨è¿™äº›å…ƒç´ çš„åä»£ä¸­æŸ¥æ‰¾ <code>.el-form-item__content</code></li>
<li>æ‰¾åˆ°åŒ¹é…çš„å…ƒç´ å¹¶åº”ç”¨æ ·å¼</li>
</ol>
<h3 data-id="heading-23">ä¸ƒã€æ³¨æ„äº‹é¡¹</h3>
<h4 data-id="heading-24">1. ä½œç”¨åŸŸé™åˆ¶</h4>
<p><code>:deep</code> ä»ç„¶å—åˆ°çˆ¶ç»„ä»¶ scoped çš„ä½œç”¨åŸŸé™åˆ¶ï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">/* âœ… æ­£ç¡®ï¼šå¯ä»¥åŒ¹é…å­ç»„ä»¶ */</span>
:deep {
    <span class="hljs-selector-class">.el-form-item__content</span> {
        <span class="hljs-attribute">align-items</span>: self-start;
    }
}

<span class="hljs-comment">/* âŒ é”™è¯¯ï¼šæ— æ³•åŒ¹é…å­ç»„ä»¶ */</span>
<span class="hljs-selector-class">.el-form-item__content</span> {
    <span class="hljs-attribute">align-items</span>: self-start; <span class="hljs-comment">/* åªä¼šåŒ¹é…å½“å‰ç»„ä»¶ */</span>
}
</code></pre>
<h4 data-id="heading-25">2. æ€§èƒ½è€ƒè™‘</h4>
<p><code>:deep</code> é€‰æ‹©å™¨ä¼šéå†æ•´ä¸ª DOM æ ‘ï¼Œåº”è¯¥ï¼š</p>
<ul>
<li>âœ… <strong>æ¨è</strong>ï¼šä½¿ç”¨å…·ä½“çš„é€‰æ‹©å™¨ï¼Œå‡å°‘åŒ¹é…èŒƒå›´</li>
</ul>
<pre><code class="hljs language-scss" lang="scss">:deep {
    <span class="hljs-selector-class">.el-form-item__content</span> {  <span class="hljs-comment">/* å…·ä½“ç±»å */</span>
        ...
    }
}
</code></pre>
<ul>
<li>âš ï¸ <strong>é¿å…</strong>ï¼šä½¿ç”¨è¿‡äºå®½æ³›çš„é€‰æ‹©å™¨</li>
</ul>
<pre><code class="hljs language-scss" lang="scss">:deep {
    <span class="hljs-selector-tag">div</span> {  <span class="hljs-comment">/* å¤ªå®½æ³›ï¼Œå¯èƒ½å½±å“å¾ˆå¤šå…ƒç´  */</span>
        ...
    }
}
</code></pre>
<h4 data-id="heading-26">3. ä¼˜å…ˆçº§é—®é¢˜</h4>
<p><code>:deep</code> ç”Ÿæˆçš„æ ·å¼ä¼˜å…ˆçº§å¯èƒ½ä¸å¤Ÿé«˜ï¼Œå¿…è¦æ—¶ä½¿ç”¨ <code>!important</code>ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">:deep {
    <span class="hljs-selector-class">.el-input__wrapper</span> {
        <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">6px</span> <span class="hljs-meta">!important</span>; <span class="hljs-comment">/* ç¡®ä¿è¦†ç›–é»˜è®¤æ ·å¼ */</span>
    }
}
</code></pre>
<h4 data-id="heading-27">4. æ›¿ä»£æ–¹æ¡ˆ</h4>
<p>å¦‚æœåªéœ€è¦ä¿®æ”¹å°‘é‡æ ·å¼ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ï¼š</p>
<p><strong>æ–¹æ¡ˆ1ï¼šä¸ä½¿ç”¨ scoped</strong></p>
<pre><code class="hljs language-vue" lang="vue">&lt;style lang="scss"&gt;
/* ä¸ä½¿ç”¨ scopedï¼Œæ ·å¼ä¼šå…¨å±€ç”Ÿæ•ˆ */
.el-form-item__content {
    align-items: self-start;
}
&lt;/style&gt;
</code></pre>
<p><strong>æ–¹æ¡ˆ2ï¼šä½¿ç”¨å…¨å±€æ ·å¼æ–‡ä»¶</strong></p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// styles/element.scss</span>
<span class="hljs-selector-class">.el-form-item__content</span> {
    <span class="hljs-attribute">align-items</span>: self-start;
}
</code></pre>
<h3 data-id="heading-28">å…«ã€å¸¸è§ä½¿ç”¨åœºæ™¯</h3>
<h4 data-id="heading-29">1. ä¿®æ”¹ Element Plus ç»„ä»¶æ ·å¼</h4>
<pre><code class="hljs language-vue" lang="vue">&lt;style lang="scss" scoped&gt;
:deep {
    .el-button {
        border-radius: 6px;
    }

    .el-input__wrapper {
        background-color: #f5f5f5;
    }

    .el-select__wrapper {
        border-radius: 6px;
    }
}
&lt;/style&gt;
</code></pre>
<h4 data-id="heading-30">2. ä¿®æ”¹è‡ªå®šä¹‰ç»„ä»¶æ ·å¼</h4>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
    &lt;zh-table&gt;
        &lt;!-- éœ€è¦ä¿®æ”¹ zh-table å†…éƒ¨çš„æ ·å¼ --&gt;
    &lt;/zh-table&gt;
&lt;/template&gt;

&lt;style lang="scss" scoped&gt;
:deep {
    .table-search {
        padding: 16px;
    }

    .el-form-item {
        margin-bottom: 0;
    }
}
&lt;/style&gt;
</code></pre>
<h4 data-id="heading-31">3. å“åº”å¼æ ·å¼ç©¿é€</h4>
<pre><code class="hljs language-scss" lang="scss">:deep {
    <span class="hljs-selector-class">.el-form-item__content</span> {
        <span class="hljs-keyword">@media</span> (<span class="hljs-attribute">max-width</span>: <span class="hljs-number">768px</span>) {
            <span class="hljs-attribute">flex-direction</span>: column;
        }
    }
}
</code></pre>
<h3 data-id="heading-32">ä¹ã€Vue 2 vs Vue 3</h3>
<h4 data-id="heading-33">Vue 2 è¯­æ³•</h4>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">/* Vue 2 ä½¿ç”¨ /deep/ æˆ– &gt;&gt;&gt; */</span>
/deep/ <span class="hljs-selector-class">.el-form-item__content</span> {
    <span class="hljs-attribute">align-items</span>: self-start;
}

<span class="hljs-comment">/* æˆ–è€… */</span>
&gt;&gt;&gt; <span class="hljs-selector-class">.el-form-item__content</span> {
    <span class="hljs-attribute">align-items</span>: self-start;
}
</code></pre>
<h4 data-id="heading-34">Vue 3 è¯­æ³•</h4>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">/* Vue 3 ä½¿ç”¨ :deep() */</span>
:<span class="hljs-built_in">deep</span>(.el-form-item__content) {
    <span class="hljs-attribute">align-items</span>: self-start;
}

<span class="hljs-comment">/* æˆ–è€…å—è¯­æ³• */</span>
:deep {
    <span class="hljs-selector-class">.el-form-item__content</span> {
        <span class="hljs-attribute">align-items</span>: self-start;
    }
}
</code></pre>
<h3 data-id="heading-35">åã€æ€»ç»“</h3>
<h4 data-id="heading-36"><code>:deep</code> çš„æ ¸å¿ƒè¦ç‚¹</h4>
<ol>
<li><strong>ä½œç”¨</strong>ï¼šç©¿é€ scoped æ ·å¼ï¼Œä¿®æ”¹å­ç»„ä»¶æ ·å¼</li>
<li><strong>åŸç†</strong>ï¼šç¼–è¯‘æ—¶ä¸ä¸ºç›®æ ‡é€‰æ‹©å™¨æ·»åŠ  <code>data-v-*</code> å±æ€§</li>
<li><strong>æœºåˆ¶</strong>ï¼šé€šè¿‡åä»£é€‰æ‹©å™¨åœ¨ DOM æ ‘ä¸­æŸ¥æ‰¾åŒ¹é…å…ƒç´ </li>
<li><strong>ä½¿ç”¨</strong>ï¼šåœ¨éœ€è¦ä¿®æ”¹å­ç»„ä»¶æ ·å¼æ—¶ä½¿ç”¨</li>
<li><strong>æ³¨æ„</strong>ï¼šåˆç†ä½¿ç”¨ï¼Œé¿å…è¿‡åº¦ç©¿é€å½±å“æ€§èƒ½</li>
</ol>
<h4 data-id="heading-37">æœ€ä½³å®è·µ</h4>
<ol>
<li>âœ… ä¼˜å…ˆä½¿ç”¨å…·ä½“çš„é€‰æ‹©å™¨</li>
<li>âœ… åªåœ¨å¿…è¦æ—¶ä½¿ç”¨ <code>:deep</code></li>
<li>âœ… æ³¨æ„æ ·å¼ä¼˜å…ˆçº§</li>
<li>âœ… é¿å…è¿‡åº¦ç©¿é€å½±å“æ€§èƒ½</li>
<li>âœ… è€ƒè™‘ä½¿ç”¨å…¨å±€æ ·å¼æ–‡ä»¶ä½œä¸ºæ›¿ä»£æ–¹æ¡ˆ</li>
</ol>
<h4 data-id="heading-38">é€‚ç”¨åœºæ™¯</h4>
<ul>
<li>ä¿®æ”¹ç¬¬ä¸‰æ–¹ç»„ä»¶åº“ï¼ˆå¦‚ Element Plusï¼‰çš„æ ·å¼</li>
<li>ä¿®æ”¹è‡ªå®šä¹‰å­ç»„ä»¶çš„æ ·å¼</li>
<li>éœ€è¦ä¿æŒ scoped æ ·å¼éš”ç¦»çš„åŒæ—¶ä¿®æ”¹å­ç»„ä»¶</li>
</ul>
<p><code>:deep</code> æ˜¯ Vue 3 ä¸­å¤„ç†æ ·å¼ç©¿é€çš„æ ‡å‡†æ–¹å¼ï¼Œç†è§£å…¶å·¥ä½œåŸç†æœ‰åŠ©äºæ›´å¥½åœ°ä½¿ç”¨å’Œè°ƒè¯•æ ·å¼ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¿˜æ‰"å‘è¯·æ±‚"ï¼Œå£°æ˜ä½ è¦çš„æ•°æ®ï¼šTanStack Query å¸¦æ¥çš„æ€ç»´é©å‘½]]></title>    <link>https://juejin.cn/post/7576914798056439860</link>    <guid>https://juejin.cn/post/7576914798056439860</guid>    <pubDate>2025-11-27T02:38:07.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576914798056439860" data-draft-id="7576928310787784756" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¿˜æ‰&quot;å‘è¯·æ±‚&quot;ï¼Œå£°æ˜ä½ è¦çš„æ•°æ®ï¼šTanStack Query å¸¦æ¥çš„æ€ç»´é©å‘½"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-27T02:38:07.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="OLong"/> <meta itemprop="url" content="https://juejin.cn/user/1072754539366318"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¿˜æ‰"å‘è¯·æ±‚"ï¼Œå£°æ˜ä½ è¦çš„æ•°æ®ï¼šTanStack Query å¸¦æ¥çš„æ€ç»´é©å‘½
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1072754539366318/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    OLong
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-27T02:38:07.000Z" title="Thu Nov 27 2025 02:38:07 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å£°æ˜ä½ è¦çš„æ•°æ®</h2>
<p><strong>ä½¿ç”¨ TanStack Query åï¼Œä½ ä¸å†éœ€è¦"å‘è¯·æ±‚"ï¼Œä½ åªæ˜¯åœ¨"å£°æ˜æ•°æ®"ã€‚</strong></p>
<p><strong>æ›´é‡è¦çš„æ˜¯ï¼šä½ ä¸å†éœ€è¦"ç®¡ç†çŠ¶æ€"ï¼Œåªéœ€è¦"æ¶ˆè´¹æ•°æ®"ã€‚</strong></p>
<p>è¿™æ˜¯ä¸€æ¬¡æ€ç»´èŒƒå¼çš„æ ¹æœ¬è½¬å˜ï¼š</p>
<ul>
<li><strong>ä¼ ç»Ÿæ–¹å¼</strong>ï¼šä½ åœ¨ç®¡ç†"è¯·æ±‚çš„è¿‡ç¨‹"å’Œ"çŠ¶æ€çš„ç”Ÿå‘½å‘¨æœŸ" - ä»€ä¹ˆæ—¶å€™å‘ã€æ€ä¹ˆå‘ã€å¤±è´¥äº†æ€ä¹ˆåŠã€è¦ä¸è¦é‡è¯•ã€loading/error/data æ€ä¹ˆæ›´æ–°</li>
<li><strong>TanStack Query</strong>ï¼šä½ åœ¨å£°æ˜"æ•°æ®çš„éœ€æ±‚" - æˆ‘éœ€è¦è¿™ä¸ªæ•°æ®ï¼Œå‰©ä¸‹çš„è‡ªåŠ¨å¤„ç†</li>
</ul>
<p><strong>å…·ä½“æ”¹å˜ï¼š</strong></p>





































<table><thead><tr><th>ä¼ ç»Ÿæ–¹å¼</th><th>TanStack Query</th></tr></thead><tbody><tr><td>100 è¡Œä»£ç ç®¡ç†ä¸€ä¸ªè¯·æ±‚</td><td>20 è¡Œä»£ç å®ç°æ›´å¤šåŠŸèƒ½</td></tr><tr><td>æ‰‹åŠ¨å®šä¹‰ useState ç®¡ç† loadingã€errorã€data</td><td>è‡ªåŠ¨æä¾›å®Œæ•´çŠ¶æ€ï¼Œæ— éœ€æ‰‹åŠ¨ç®¡ç†</td></tr><tr><td>æ¯ä¸ªç»„ä»¶éƒ½è¦å†™ loading/error é€»è¾‘</td><td>çŠ¶æ€è‡ªåŠ¨åŒæ­¥ï¼Œå†™ä¸€æ¬¡åˆ°å¤„ç”¨</td></tr><tr><td>å¤šç»„ä»¶é‡å¤å‘è¯·æ±‚</td><td>è‡ªåŠ¨å»é‡å’Œå…±äº«ç¼“å­˜</td></tr><tr><td>æ‰‹å†™å®šæ—¶åˆ·æ–°é€»è¾‘</td><td>é…ç½®å³å¯è‡ªåŠ¨æ›´æ–°</td></tr><tr><td>å¤æ‚çš„ä¹è§‚æ›´æ–°å’Œå›æ»š</td><td>å†…ç½®ä¹è§‚æ›´æ–°æœºåˆ¶</td></tr><tr><td>éœ€è¦ Redux/Context ç®¡ç†æœåŠ¡å™¨æ•°æ®</td><td>å†…ç½®æœåŠ¡å™¨çŠ¶æ€ç®¡ç†</td></tr></tbody></table>
<p><strong>ç»“æœï¼šä»£ç é‡å‡å°‘ 80%ï¼ŒçŠ¶æ€ç®¡ç†å¤æ‚åº¦é™ä½ 90%ï¼Œä½†åŠŸèƒ½æ›´å¼ºå¤§ã€æ›´å¯é ã€‚</strong></p>
<p>ä½ ä»"è¯·æ±‚çš„æ¬è¿å·¥"å˜æˆ"æ•°æ®çš„æ¶ˆè´¹è€…"ï¼Œå¯ä»¥å°†æ›´å¤šç²¾åŠ›ä¸“æ³¨äºæ„å»ºå‡ºè‰²çš„ç”¨æˆ·ä½“éªŒã€‚</p>
<hr/>
<h3 data-id="heading-1">ä¼ ç»Ÿå¼€å‘çš„å›°å¢ƒï¼šçŠ¶æ€ç®¡ç†çš„å™©æ¢¦</h3>
<p>å½“æˆ‘ä»¬è°ˆè®ºå‰ç«¯æ•°æ®è·å–æ—¶ï¼Œè„‘æµ·ä¸­æ€»æ˜¯æµ®ç°è¿™æ ·çš„ç”»é¢ï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// ç»„ä»¶æŒ‚è½½æ—¶å‘è¯·æ±‚</span>
function <span class="hljs-built_in">UserProfile</span>() {
  const <span class="hljs-selector-attr">[user, setUser]</span> = <span class="hljs-built_in">useState</span>(null)
  const <span class="hljs-selector-attr">[loading, setLoading]</span> = <span class="hljs-built_in">useState</span>(false)
  const <span class="hljs-selector-attr">[error, setError]</span> = <span class="hljs-built_in">useState</span>(null)
  
  <span class="hljs-built_in">useEffect</span>(() =&gt; {
    <span class="hljs-built_in">setLoading</span>(true)
    <span class="hljs-built_in">setError</span>(null)
    
    <span class="hljs-built_in">fetch</span>('/api/user')
      <span class="hljs-selector-class">.then</span>(res =&gt; res.json())
      <span class="hljs-selector-class">.then</span>(data =&gt; {
        setUser(data)
        <span class="hljs-built_in">setLoading</span>(false)
      })
      <span class="hljs-selector-class">.catch</span>(err =&gt; {
        setError(err)
        <span class="hljs-built_in">setLoading</span>(false)
      })
  }, <span class="hljs-selector-attr">[]</span>)
  
  if (loading) return &lt;<span class="hljs-selector-tag">div</span>&gt;Loading...&lt;/<span class="hljs-selector-tag">div</span>&gt;
  if (error) return &lt;<span class="hljs-selector-tag">div</span>&gt;Error: {error<span class="hljs-selector-class">.message</span>}&lt;/<span class="hljs-selector-tag">div</span>&gt;
  
  return &lt;<span class="hljs-selector-tag">div</span>&gt;{user?<span class="hljs-selector-class">.name</span>}&lt;/<span class="hljs-selector-tag">div</span>&gt;
}
</code></pre>
<p>è¿™é‡Œæœ‰ä¸¤ä¸ªæ ¹æ·±è’‚å›ºçš„æ€ç»´æ¨¡å¼ï¼š</p>
<ol>
<li><strong>æˆ‘ä»¬åœ¨"å‘è¯·æ±‚"</strong></li>
<li><strong>æˆ‘ä»¬åœ¨"ç®¡ç†çŠ¶æ€"</strong> - loadingã€errorã€data ä¸‰ä¸ªçŠ¶æ€è¦æ‰‹åŠ¨å®šä¹‰ã€æ‰‹åŠ¨æ›´æ–°ã€æ‰‹åŠ¨åŒæ­¥</li>
</ol>
<p>æ¯ä¸ªè¯·æ±‚éƒ½éœ€è¦ï¼š</p>
<ul>
<li>å®šä¹‰ 3 ä¸ª useState</li>
<li>åœ¨è¯·æ±‚å‰åæ›´æ–°è¿™äº›çŠ¶æ€</li>
<li>å¤„ç†å„ç§è¾¹ç•Œæƒ…å†µï¼ˆå–æ¶ˆè¯·æ±‚ã€ç»„ä»¶å¸è½½ã€ç«æ€æ¡ä»¶...ï¼‰</li>
<li>åœ¨ JSX é‡Œå†™ä¸€å †æ¡ä»¶æ¸²æŸ“</li>
</ul>
<p><strong>ä¸€ä¸ªç®€å•çš„æ•°æ®è·å–ï¼Œå°±è¦å†™ 20+ è¡Œæ ·æ¿ä»£ç ã€‚</strong></p>
<p>æ›´å¯æ€•çš„æ˜¯ï¼Œå¦‚æœå¤šä¸ªç»„ä»¶éœ€è¦åŒæ ·çš„æ•°æ®ï¼Œä½ è¦ä¹ˆï¼š</p>
<ul>
<li>æŠŠçŠ¶æ€æå‡åˆ°çˆ¶ç»„ä»¶ï¼ˆç»„ä»¶ç»“æ„è¢«ç»‘æ¶ï¼‰</li>
<li>ç”¨ Context ä¼ é€’ï¼ˆæ ·æ¿ä»£ç æ›´å¤šï¼‰</li>
<li>ç”¨ Redux/MobXï¼ˆå¼•å…¥æ•´ä¸ªçŠ¶æ€ç®¡ç†åº“ï¼‰</li>
</ul>
<p><strong>ä½†è¿™çœŸçš„æ˜¯æˆ‘ä»¬åº”è¯¥å…³å¿ƒçš„å—ï¼Ÿæˆ‘ä»¬çœŸæ­£éœ€è¦çš„åªæ˜¯é‚£ä¸ªæ•°æ®è€Œå·²ã€‚</strong></p>
<h3 data-id="heading-2">èŒƒå¼è½¬å˜ï¼šä»"å‘è¯·æ±‚+ç®¡ç†çŠ¶æ€"åˆ°"è®¿é—®æ•°æ®"</h3>
<p><strong>TanStack Query å¸¦æ¥çš„æœ€å¤§æ€ç»´è½¬å˜æ˜¯ï¼š</strong></p>
<ol>
<li><strong>ä½ ä¸å†éœ€è¦"å‘è¯·æ±‚"ï¼Œä½ åªæ˜¯åœ¨"å£°æ˜æ•°æ®"</strong></li>
<li><strong>ä½ ä¸å†éœ€è¦"ç®¡ç†çŠ¶æ€"ï¼Œä½ åªæ˜¯åœ¨"æ¶ˆè´¹æ•°æ®"</strong></li>
</ol>
<p>çœ‹çœ‹è¿™æ®µä»£ç ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">UserProfile</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> { <span class="hljs-attr">data</span>: user, isLoading, error } = <span class="hljs-title function_">useQuery</span>({
    <span class="hljs-attr">queryKey</span>: [<span class="hljs-string">'user'</span>],
    <span class="hljs-attr">queryFn</span>: fetchUser
  })
  
  <span class="hljs-keyword">if</span> (isLoading) <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Loading...<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  <span class="hljs-keyword">if</span> (error) <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Error: {error.message}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{user?.name}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
}
</code></pre>
<p>æ³¨æ„åˆ°äº†å—ï¼Ÿ</p>
<ul>
<li>âœ… æ²¡æœ‰ <code>useEffect</code>ï¼Œæ²¡æœ‰æ‰‹åŠ¨è°ƒç”¨ fetch</li>
<li>âœ… æ²¡æœ‰ <code>useState</code>ï¼Œæ²¡æœ‰æ‰‹åŠ¨ç®¡ç† loadingã€errorã€data</li>
<li>âœ… çŠ¶æ€è‡ªåŠ¨ç®¡ç†ï¼Œè‡ªåŠ¨æ›´æ–°ï¼Œè‡ªåŠ¨åŒæ­¥</li>
</ul>
<p><strong>ä½ åªæ˜¯åœ¨è¯´ï¼š"æˆ‘éœ€è¦ç”¨æˆ·æ•°æ®"ï¼Œç„¶åç›´æ¥ç”¨ã€‚</strong></p>
<p>è‡³äºè¿™ä¸ªæ•°æ®ï¼š</p>
<ul>
<li>ä»å“ªæ¥ï¼ˆç¼“å­˜ï¼Ÿç½‘ç»œï¼Ÿï¼‰</li>
<li>ä»€ä¹ˆæ—¶å€™æ¥ï¼ˆç°åœ¨ï¼Ÿç¨åï¼Ÿï¼‰</li>
<li>çŠ¶æ€å¦‚ä½•æ›´æ–°ï¼ˆloading â†’ successï¼Ÿloading â†’ errorï¼Ÿï¼‰</li>
<li>è¿‡æœŸäº†è¦ä¸è¦æ›´æ–°</li>
<li>å¤±è´¥äº†è¦ä¸è¦é‡è¯•</li>
</ul>
<p><strong>è¿™äº›éƒ½ä¸å†æ˜¯ä½ çš„è´Ÿæ‹…ï¼ŒTanStack Query ä¼šå¸®ä½ å¤„ç†ã€‚</strong></p>
<blockquote>
<p>ä¸ç”¨å†™ useStateï¼Œä¸ç”¨å†™çŠ¶æ€æ›´æ–°é€»è¾‘ï¼Œä¸ç”¨æ‹…å¿ƒçŠ¶æ€ä¸åŒæ­¥ã€‚æˆ‘åªæ˜¯éœ€è¦è¿™ä¸ªæ•°æ®ï¼ŒçŠ¶æ€ç®¡ç†å’Œæˆ‘æœ‰ä»€ä¹ˆå…³ç³»ï¼Ÿ</p>
</blockquote>
<h3 data-id="heading-3">æ•°æ®çš„"å­˜åœ¨æ€§"è€Œé"è·å–è¿‡ç¨‹"å’Œ"çŠ¶æ€ç®¡ç†"</h3>
<p>ä¼ ç»Ÿæ–¹å¼è®©æˆ‘ä»¬é™·å…¥äº†"è¿‡ç¨‹å¼æ€ç»´"ï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// æˆ‘ä»¬å…³å¿ƒçš„æ˜¯"è¿‡ç¨‹"å’Œ"çŠ¶æ€"</span>
<span class="hljs-number">1</span>. å®šä¹‰çŠ¶æ€ï¼š<span class="hljs-built_in">useState</span>(loading), <span class="hljs-built_in">useState</span>(error), <span class="hljs-built_in">useState</span>(data)
<span class="hljs-number">2</span>. å‘èµ·è¯·æ±‚ï¼š<span class="hljs-built_in">setLoading</span>(true)
<span class="hljs-number">3</span>. ç­‰å¾…å“åº”
<span class="hljs-number">4</span>. å¤„ç†ç»“æœï¼š<span class="hljs-built_in">setLoading</span>(false), <span class="hljs-built_in">setData</span>() æˆ– <span class="hljs-built_in">setError</span>()
<span class="hljs-number">5</span>. åœ¨ JSX ä¸­æ ¹æ®çŠ¶æ€æ¡ä»¶æ¸²æŸ“
</code></pre>
<p><strong>è¿™å°±åƒä½ è¦å–ä¸€æ¯å’–å•¡ï¼Œå´è¦è‡ªå·±ç®¡ç†å’–å•¡æœºçš„æ¯ä¸€ä¸ªé›¶ä»¶çŠ¶æ€ã€‚</strong></p>
<p>è€Œ TanStack Query è®©æˆ‘ä»¬å›å½’"å£°æ˜å¼æ€ç»´"ï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// æˆ‘ä»¬å…³å¿ƒçš„æ˜¯"ç»“æœ"</span>
<span class="hljs-keyword">const</span> { data, isLoading, <span class="hljs-type">error</span> } = useQuery([<span class="hljs-string">'user'</span>], fetchUser)
<span class="hljs-comment">// "ç”¨æˆ·æ•°æ®åº”è¯¥å­˜åœ¨ï¼Œè¯·ç»™æˆ‘"</span>
<span class="hljs-comment">// çŠ¶æ€ï¼ŸTanStack Query è‡ªåŠ¨ç®¡ç†</span>
</code></pre>
<p><strong>è¿™å°±åƒä½ èµ°è¿›å’–å•¡åº—ï¼Œåªéœ€è¦è¯´"æˆ‘è¦ä¸€æ¯å’–å•¡"ï¼Œå’–å•¡å¸ˆä¼šå¤„ç†æ‰€æœ‰ç»†èŠ‚ã€‚</strong></p>
<p>å¯¹æ¯”ï¼š</p>





























<table><thead><tr><th>ä¼ ç»Ÿæ–¹å¼</th><th>TanStack Query</th></tr></thead><tbody><tr><td>ä½ æ˜¯"çŠ¶æ€ç®¡ç†å‘˜"</td><td>ä½ æ˜¯"æ•°æ®æ¶ˆè´¹è€…"</td></tr><tr><td>æ‰‹åŠ¨å®šä¹‰ loading/error/data</td><td>è‡ªåŠ¨æä¾›ï¼Œç›´æ¥ç”¨</td></tr><tr><td>æ‰‹åŠ¨æ›´æ–°æ¯ä¸ªçŠ¶æ€</td><td>è‡ªåŠ¨æ›´æ–°ï¼ŒçŠ¶æ€åŒæ­¥</td></tr><tr><td>æ‹…å¿ƒçŠ¶æ€ä¸ä¸€è‡´</td><td>çŠ¶æ€å§‹ç»ˆä¸€è‡´</td></tr><tr><td>æ¯ä¸ªç»„ä»¶é‡å¤å†™çŠ¶æ€é€»è¾‘</td><td>å†™ä¸€æ¬¡ï¼Œåˆ°å¤„ç”¨</td></tr></tbody></table>
<h3 data-id="heading-4">å®é™…åœºæ™¯ï¼šå¨åŠ›æ˜¾ç°</h3>
<h4 data-id="heading-5">åœºæ™¯ä¸€ï¼šå¤šç»„ä»¶å…±äº«æ•°æ®ï¼ˆçŠ¶æ€åŒæ­¥å™©æ¢¦ï¼‰</h4>
<p><strong>ä¼ ç»Ÿæ–¹å¼çš„å™©æ¢¦</strong>ï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// ç»„ä»¶ A</span>
function <span class="hljs-built_in">ComponentA</span>() {
  const <span class="hljs-selector-attr">[user, setUser]</span> = <span class="hljs-built_in">useState</span>(null)
  const <span class="hljs-selector-attr">[loading, setLoading]</span> = <span class="hljs-built_in">useState</span>(false)
  
  <span class="hljs-built_in">useEffect</span>(() =&gt; {
    <span class="hljs-built_in">setLoading</span>(true)
    <span class="hljs-built_in">fetchUser</span>()<span class="hljs-selector-class">.then</span>(data =&gt; {
      setUser(data)
      <span class="hljs-built_in">setLoading</span>(false)
    })
  }, <span class="hljs-selector-attr">[]</span>)
  
  return &lt;<span class="hljs-selector-tag">div</span>&gt;{user?<span class="hljs-selector-class">.name</span>}&lt;/<span class="hljs-selector-tag">div</span>&gt;
}

<span class="hljs-comment">// ç»„ä»¶ Bï¼ˆåŒæ ·çš„æ•°æ®ï¼ï¼‰</span>
function <span class="hljs-built_in">ComponentB</span>() {
  const <span class="hljs-selector-attr">[user, setUser]</span> = <span class="hljs-built_in">useState</span>(null)  <span class="hljs-comment">// åˆå®šä¹‰ä¸€æ¬¡çŠ¶æ€</span>
  const <span class="hljs-selector-attr">[loading, setLoading]</span> = <span class="hljs-built_in">useState</span>(false)
  
  <span class="hljs-built_in">useEffect</span>(() =&gt; {
    <span class="hljs-built_in">setLoading</span>(true)
    <span class="hljs-built_in">fetchUser</span>()<span class="hljs-selector-class">.then</span>(data =&gt; {  // åˆå‘äº†ä¸€æ¬¡è¯·æ±‚
      setUser(data)
      <span class="hljs-built_in">setLoading</span>(false)
    })
  }, <span class="hljs-selector-attr">[]</span>)
  
  return &lt;<span class="hljs-selector-tag">div</span>&gt;{user?<span class="hljs-selector-class">.email</span>}&lt;/<span class="hljs-selector-tag">div</span>&gt;
}

<span class="hljs-comment">// é—®é¢˜ï¼š</span>
<span class="hljs-comment">// 1. å‘äº†ä¸¤æ¬¡è¯·æ±‚</span>
<span class="hljs-comment">// 2. å®šä¹‰äº†ä¸¤å¥—çŠ¶æ€</span>
<span class="hljs-comment">// 3. å¦‚æœ A æ›´æ–°äº†æ•°æ®ï¼ŒB ä¸ä¼šåŒæ­¥</span>
<span class="hljs-comment">// 4. éœ€è¦ç”¨ Context æˆ–çŠ¶æ€ç®¡ç†åº“æ¥è§£å†³</span>

<span class="hljs-comment">// ä½ éœ€è¦ï¼š</span>
<span class="hljs-comment">// - Context ä¼ é€’æ•°æ®ï¼ˆå†™ä¸€å † Providerï¼‰</span>
<span class="hljs-comment">// - æˆ–è€…çŠ¶æ€æå‡ï¼ˆç ´åç»„ä»¶ç»“æ„ï¼‰</span>
<span class="hljs-comment">// - æˆ–è€… Redux/MobXï¼ˆå¼•å…¥æ•´ä¸ªçŠ¶æ€ç®¡ç†ä½“ç³»ï¼‰</span>
</code></pre>
<blockquote>
<p>ä¸ºäº†å…±äº«ä¸€ä¸ªæ•°æ®ï¼Œè¦å¼•å…¥æ•´ä¸ªçŠ¶æ€ç®¡ç†åº“ï¼Ÿè¿™ä¹Ÿå¤ªé‡äº†å§...</p>
</blockquote>
<p><strong>TanStack Query çš„ä¼˜é›…</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç»„ä»¶ A</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">ComponentA</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> { <span class="hljs-attr">data</span>: user } = <span class="hljs-title function_">useQuery</span>([<span class="hljs-string">'user'</span>], fetchUser)
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{user?.name}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
}

<span class="hljs-comment">// ç»„ä»¶ Bï¼ˆè‡ªåŠ¨å…±äº«ï¼ï¼‰</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">ComponentB</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> { <span class="hljs-attr">data</span>: user } = <span class="hljs-title function_">useQuery</span>([<span class="hljs-string">'user'</span>], fetchUser)
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{user?.email}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
}

<span class="hljs-comment">// ç»“æœï¼š</span>
<span class="hljs-comment">// âœ… åªå‘ä¸€æ¬¡è¯·æ±‚</span>
<span class="hljs-comment">// âœ… ä¸éœ€è¦å®šä¹‰ä»»ä½• useState</span>
<span class="hljs-comment">// âœ… æ•°æ®è‡ªåŠ¨å…±äº«</span>
<span class="hljs-comment">// âœ… A ç»„ä»¶æ›´æ–°æ•°æ®ï¼ŒB ç»„ä»¶è‡ªåŠ¨åŒæ­¥</span>
<span class="hljs-comment">// âœ… ä¸éœ€è¦ Contextã€Providerã€Redux</span>
</code></pre>
<blockquote>
<p>åŒä¸€ä¸ª queryKeyï¼Œè‡ªåŠ¨å…±äº«æ•°æ®å’ŒçŠ¶æ€ã€‚ä¸ç”¨å†™ useStateï¼Œä¸ç”¨æ‹…å¿ƒçŠ¶æ€ä¸åŒæ­¥ï¼Œå°±è¿™ä¹ˆç®€å•ã€‚</p>
</blockquote>
<h4 data-id="heading-6">åœºæ™¯äºŒï¼šæ•°æ®è¿‡æœŸæ›´æ–°</h4>
<p><strong>ä¼ ç»Ÿæ–¹å¼</strong>ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">// 30ç§’åæ•°æ®å¯èƒ½è¿‡æœŸäº†ï¼Œéœ€è¦é‡æ–°è·å–å—ï¼Ÿ</span>
<span class="hljs-comment">// ç”¨æˆ·åˆ‡æ¢æ ‡ç­¾é¡µå›æ¥ï¼Œéœ€è¦åˆ·æ–°å—ï¼Ÿ</span>
<span class="hljs-comment">// ç½‘ç»œé‡è¿äº†ï¼Œéœ€è¦æ›´æ–°å—ï¼Ÿ</span>

<span class="hljs-comment">// ä½ éœ€è¦è‡ªå·±å†™å®šæ—¶å™¨ã€ç›‘å¬å™¨ã€é‡è¯•é€»è¾‘â€¦â€¦</span>
</code></pre>
<p><strong>TanStack Query</strong>ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">const</span> { <span class="hljs-keyword">data</span> } = useQuery([<span class="hljs-string">'user'</span>], fetchUser, {
  staleTime: <span class="hljs-number">30000</span>,  <span class="hljs-comment">// 30ç§’å†…æ˜¯æ–°é²œçš„</span>
  refetchOnWindowFocus: <span class="hljs-literal">true</span>,  <span class="hljs-comment">// çª—å£èšç„¦æ—¶æ›´æ–°</span>
  refetchOnReconnect: <span class="hljs-literal">true</span>,  <span class="hljs-comment">// é‡è¿æ—¶æ›´æ–°</span>
})

<span class="hljs-comment">// å°±è¿™æ ·ã€‚å…¶ä»–çš„éƒ½è‡ªåŠ¨å¤„ç†ã€‚</span>
</code></pre>
<h4 data-id="heading-7">åœºæ™¯ä¸‰ï¼šä¹è§‚æ›´æ–°</h4>
<p><strong>ä¼ ç»Ÿæ–¹å¼</strong>ï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// ç‚¹èµåŠŸèƒ½</span>
const handleLike = async () =&gt; {
  <span class="hljs-comment">// å…ˆæ›´æ–°UI</span>
  <span class="hljs-built_in">setLikes</span>(likes + <span class="hljs-number">1</span>)
  
  try {
    await <span class="hljs-built_in">likePost</span>(postId)
  } catch (error) {
    <span class="hljs-comment">// å¤±è´¥äº†è¦å›æ»š</span>
    <span class="hljs-built_in">setLikes</span>(likes - <span class="hljs-number">1</span>)
    <span class="hljs-comment">// ä½†è¿™æ—¶ likes å¯èƒ½å·²ç»è¢«å…¶ä»–æ“ä½œæ”¹å˜äº†...</span>
  }
}
</code></pre>
<p><strong>TanStack Query</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> mutation = <span class="hljs-title function_">useMutation</span>(likePost, {
  <span class="hljs-attr">onMutate</span>: <span class="hljs-keyword">async</span> (postId) =&gt; {
    <span class="hljs-comment">// ä¹è§‚æ›´æ–°</span>
    queryClient.<span class="hljs-title function_">setQueryData</span>([<span class="hljs-string">'post'</span>, postId], <span class="hljs-function"><span class="hljs-params">old</span> =&gt;</span> ({
      ...old,
      <span class="hljs-attr">likes</span>: old.<span class="hljs-property">likes</span> + <span class="hljs-number">1</span>
    }))
  },
  <span class="hljs-attr">onError</span>: <span class="hljs-function">(<span class="hljs-params">err, variables, context</span>) =&gt;</span> {
    <span class="hljs-comment">// è‡ªåŠ¨å›æ»šåˆ°ä¹‹å‰çš„æ•°æ®</span>
    queryClient.<span class="hljs-title function_">setQueryData</span>([<span class="hljs-string">'post'</span>, postId], context.<span class="hljs-property">previousPost</span>)
  }
})

<span class="hljs-comment">// å¤±è´¥è‡ªåŠ¨å›æ»šï¼Œä¸éœ€è¦æ‰‹åŠ¨ç®¡ç†</span>
</code></pre>
<h3 data-id="heading-8">å¿ƒæ™ºæ¨¡å‹çš„è½¬å˜</h3>
<p>ä½¿ç”¨ TanStack Query åï¼Œä½ çš„æ€è€ƒæ–¹å¼ä¼šå‘ç”Ÿæ ¹æœ¬å˜åŒ–ï¼š</p>
<p><strong>ä»¥å‰æ€è€ƒ</strong>ï¼š</p>
<ul>
<li>âŒ "æˆ‘éœ€è¦åœ¨è¿™é‡Œå‘ä¸ªè¯·æ±‚"</li>
<li>âŒ "æˆ‘è¦å®šä¹‰ loadingã€errorã€data ä¸‰ä¸ªçŠ¶æ€"</li>
<li>âŒ "è¯·æ±‚å‰è®¾ç½® loading=trueï¼Œå®Œæˆåè®¾ç½® loading=false"</li>
<li>âŒ "è¦ä¸è¦æ˜¾ç¤º loadingï¼Ÿ"</li>
<li>âŒ "æ•°æ®è¿‡æœŸäº†è¦é‡æ–°è¯·æ±‚å—ï¼Ÿ"</li>
<li>âŒ "å¤šä¸ªç»„ä»¶çš„çŠ¶æ€æ€ä¹ˆåŒæ­¥ï¼Ÿ"</li>
</ul>
<p><strong>ç°åœ¨æ€è€ƒ</strong>ï¼š</p>
<ul>
<li>âœ… "æˆ‘éœ€è¦è¿™ä¸ªæ•°æ®"</li>
<li>âœ… "è¿™ä¸ªæ•°æ®çš„æ–°é²œåº¦è¦æ±‚æ˜¯ä»€ä¹ˆï¼Ÿ"</li>
<li>âœ… "æ•°æ®å˜åŒ–æ—¶ UI åº”è¯¥å¦‚ä½•å“åº”ï¼Ÿ"</li>
</ul>
<p>ä½ ä»"è¯·æ±‚çš„æ¬è¿å·¥"å’Œ"çŠ¶æ€çš„ç®¡ç†å‘˜"å˜æˆäº†"æ•°æ®çš„æ¶ˆè´¹è€…"ã€‚</p>
<h3 data-id="heading-9">ä»£ç å¯¹æ¯”ï¼šä¸€ç›®äº†ç„¶</h3>
<h4 data-id="heading-10">ä¼ ç»Ÿæ–¹å¼ï¼ˆ100è¡Œä»£ç ï¼‰</h4>
<pre><code class="hljs language-scss" lang="scss">function <span class="hljs-built_in">TodoList</span>() {
  const <span class="hljs-selector-attr">[todos, setTodos]</span> = <span class="hljs-built_in">useState</span>([])
  const <span class="hljs-selector-attr">[loading, setLoading]</span> = <span class="hljs-built_in">useState</span>(false)
  const <span class="hljs-selector-attr">[error, setError]</span> = <span class="hljs-built_in">useState</span>(null)
  
  <span class="hljs-comment">// åˆå§‹åŠ è½½</span>
  <span class="hljs-built_in">useEffect</span>(() =&gt; {
    <span class="hljs-built_in">fetchTodos</span>()
  }, <span class="hljs-selector-attr">[]</span>)
  
  <span class="hljs-comment">// å®šæœŸåˆ·æ–°</span>
  <span class="hljs-built_in">useEffect</span>(() =&gt; {
    const interval = <span class="hljs-built_in">setInterval</span>(fetchTodos, <span class="hljs-number">30000</span>)
    return () =&gt; <span class="hljs-built_in">clearInterval</span>(interval)
  }, <span class="hljs-selector-attr">[]</span>)
  
  <span class="hljs-comment">// çª—å£èšç„¦åˆ·æ–°</span>
  <span class="hljs-built_in">useEffect</span>(() =&gt; {
    const handleFocus = () =&gt; <span class="hljs-built_in">fetchTodos</span>()
    window<span class="hljs-selector-class">.addEventListener</span>('focus', handleFocus)
    return () =&gt; window<span class="hljs-selector-class">.removeEventListener</span>('focus', handleFocus)
  }, <span class="hljs-selector-attr">[]</span>)
  
  const fetchTodos = async () =&gt; {
    <span class="hljs-built_in">setLoading</span>(true)
    try {
      const data = await <span class="hljs-built_in">fetch</span>('/api/todos')<span class="hljs-selector-class">.then</span>(r =&gt; r.json())
      <span class="hljs-built_in">setTodos</span>(data)
      <span class="hljs-built_in">setError</span>(null)
    } catch (err) {
      <span class="hljs-built_in">setError</span>(err.message)
    } finally {
      <span class="hljs-built_in">setLoading</span>(false)
    }
  }
  
  const addTodo = async (text) =&gt; {
    try {
      const newTodo = await <span class="hljs-built_in">fetch</span>('/api/todos', {
        method: 'POST',
        body: JSON.stringify({ text })
      })<span class="hljs-selector-class">.then</span>(r =&gt; r.json())
      
      <span class="hljs-built_in">setTodos</span>([...todos, newTodo])
    } catch (err) {
      <span class="hljs-built_in">setError</span>(err.message)
    }
  }
  
  if (loading) return &lt;<span class="hljs-selector-tag">div</span>&gt;Loading...&lt;/<span class="hljs-selector-tag">div</span>&gt;
  if (error) return &lt;<span class="hljs-selector-tag">div</span>&gt;Error: {error}&lt;/<span class="hljs-selector-tag">div</span>&gt;
  
  return (
    &lt;div&gt;
      {todos.map(todo =&gt; &lt;TodoItem key={todo.id} todo={todo} /&gt;)}
    &lt;/<span class="hljs-selector-tag">div</span>&gt;
  )
}
</code></pre>
<h4 data-id="heading-11">TanStack Query æ–¹å¼ï¼ˆ20è¡Œä»£ç ï¼‰</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">TodoList</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> { <span class="hljs-attr">data</span>: todos } = <span class="hljs-title function_">useQuery</span>([<span class="hljs-string">'todos'</span>], fetchTodos, {
    <span class="hljs-attr">staleTime</span>: <span class="hljs-number">30000</span>,
    <span class="hljs-attr">refetchOnWindowFocus</span>: <span class="hljs-literal">true</span>,
  })
  
  <span class="hljs-keyword">const</span> addTodoMutation = <span class="hljs-title function_">useMutation</span>(addTodo, {
    <span class="hljs-attr">onSuccess</span>: <span class="hljs-function">() =&gt;</span> {
      queryClient.<span class="hljs-title function_">invalidateQueries</span>([<span class="hljs-string">'todos'</span>])
    }
  })
  
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      {todos?.map(todo =&gt; <span class="hljs-tag">&lt;<span class="hljs-name">TodoItem</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{todo.id}</span> <span class="hljs-attr">todo</span>=<span class="hljs-string">{todo}</span> /&gt;</span>)}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )
}
</code></pre>
<p>ä»£ç é‡å‡å°‘ 80%ï¼Œä½†åŠŸèƒ½æ›´å¼ºå¤§ã€æ›´å¯é ã€‚</p>
<h3 data-id="heading-12">æ·±å±‚ä»·å€¼ï¼šæ¶æ„å±‚é¢çš„æå‡</h3>
<p>ä½¿ç”¨ TanStack Query ä¸ä»…ä»…æ˜¯ä»£ç æ›´ç®€æ´ï¼Œå®ƒè¿˜å¸¦æ¥æ¶æ„å±‚é¢çš„å¥½å¤„ï¼š</p>
<h4 data-id="heading-13">1. <strong>æœåŠ¡å™¨çŠ¶æ€ä¸å®¢æˆ·ç«¯çŠ¶æ€åˆ†ç¦»</strong></h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// æœåŠ¡å™¨çŠ¶æ€ï¼ˆTanStack Query ç®¡ç†ï¼Œä¸éœ€è¦ä½ å†™ useStateï¼‰</span>
<span class="hljs-keyword">const</span> { <span class="hljs-keyword">data</span>: user } = useQuery([<span class="hljs-string">'user'</span>], fetchUser)

<span class="hljs-comment">// å®¢æˆ·ç«¯çŠ¶æ€ï¼ˆReact ç®¡ç†ï¼Œè¿™æ‰éœ€è¦ useStateï¼‰</span>
<span class="hljs-keyword">const</span> [isModalOpen, setIsModalOpen] = useState(<span class="hljs-literal">false</span>)
</code></pre>
<p><strong>å…³é”®æ´å¯Ÿ</strong>ï¼šæœåŠ¡å™¨æ•°æ®æ ¹æœ¬ä¸åº”è¯¥ç”¨ useState ç®¡ç†ï¼</p>
<ul>
<li>æœåŠ¡å™¨æ•°æ®ï¼šéœ€è¦ç¼“å­˜ã€æ›´æ–°ã€åŒæ­¥ã€é‡è¯• â†’ TanStack Query</li>
<li>å®¢æˆ·ç«¯ UI çŠ¶æ€ï¼šåªåœ¨æœ¬åœ°ï¼Œç»„ä»¶å¸è½½å°±æ¶ˆå¤± â†’ useState</li>
</ul>
<p>èŒè´£æ¸…æ™°ï¼Œä¸å†æ··ä¹±ã€‚</p>
<blockquote>
<p>ä¹‹å‰ç”¨ useState ç®¡ç†æœåŠ¡å™¨æ•°æ®ï¼Œå°±åƒç”¨èºä¸åˆ€é’‰é’‰å­ï¼Œå·¥å…·ç”¨é”™äº†ã€‚</p>
</blockquote>
<h4 data-id="heading-14">2. <strong>å‘Šåˆ«çŠ¶æ€ç®¡ç†æ ·æ¿ä»£ç </strong></h4>
<p><strong>ä¼ ç»Ÿæ–¹å¼éœ€è¦çš„çŠ¶æ€ç®¡ç†ä»£ç ï¼š</strong></p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// æ¯ä¸ªæ•°æ®è·å–éƒ½è¦å†™è¿™äº›</span>
const <span class="hljs-selector-attr">[data, setData]</span> = <span class="hljs-built_in">useState</span>(null)
const <span class="hljs-selector-attr">[loading, setLoading]</span> = <span class="hljs-built_in">useState</span>(false)
const <span class="hljs-selector-attr">[error, setError]</span> = <span class="hljs-built_in">useState</span>(null)

<span class="hljs-comment">// è¯·æ±‚å‰</span>
<span class="hljs-built_in">setLoading</span>(true)
<span class="hljs-built_in">setError</span>(null)

<span class="hljs-comment">// è¯·æ±‚æˆåŠŸ</span>
<span class="hljs-built_in">setData</span>(result)
<span class="hljs-built_in">setLoading</span>(false)

<span class="hljs-comment">// è¯·æ±‚å¤±è´¥</span>
<span class="hljs-built_in">setError</span>(err)
<span class="hljs-built_in">setLoading</span>(false)

<span class="hljs-comment">// æ¡ä»¶æ¸²æŸ“</span>
if (loading) return &lt;Loading /&gt;
if (error) return &lt;Error error={error} /&gt;
</code></pre>
<p><strong>TanStack Queryï¼š</strong></p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// ä¸€è¡Œæå®š</span>
<span class="hljs-keyword">const</span> { data, isLoading, <span class="hljs-type">error</span> } = useQuery([<span class="hljs-string">'key'</span>], fetcher)

<span class="hljs-comment">// æ¡ä»¶æ¸²æŸ“ï¼ˆå¯é€‰ï¼‰</span>
<span class="hljs-keyword">if</span> (isLoading) <span class="hljs-keyword">return</span> &lt;Loading /&gt;
<span class="hljs-keyword">if</span> (<span class="hljs-type">error</span>) <span class="hljs-keyword">return</span> &lt;Error <span class="hljs-type">error</span>={<span class="hljs-type">error</span>} /&gt;
</code></pre>
<p>ä½ ä¸éœ€è¦å†™ Reduxã€MobXã€Zustand æ¥ç®¡ç†æœåŠ¡å™¨æ•°æ®ï¼ŒTanStack Query å°±æ˜¯ä½ çš„æœåŠ¡å™¨çŠ¶æ€ç®¡ç†å™¨ã€‚</p>
<p>è€Œä¸”ï¼Œå®ƒæ¯” Redux æ›´ç®€å•ã€æ›´å¼ºå¤§ã€æ›´è‡ªåŠ¨åŒ–ã€‚</p>
<h4 data-id="heading-15">3. <strong>æ€§èƒ½ä¼˜åŒ–è‡ªåŠ¨åŒ–</strong></h4>
<ul>
<li>è¯·æ±‚å»é‡</li>
<li>å¹¶è¡Œè¯·æ±‚ä¼˜åŒ–</li>
<li>çª—å£èšç„¦æ—¶æ›´æ–°</li>
<li>åå°æ•°æ®é¢„å–</li>
<li>è¿™äº›éƒ½æ˜¯å¼€ç®±å³ç”¨</li>
</ul>
<h4 data-id="heading-16">4. <strong>æ›´å¥½çš„ç”¨æˆ·ä½“éªŒ</strong></h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">const</span> { <span class="hljs-keyword">data</span>, isLoading, isFetching } = useQuery([<span class="hljs-string">'user'</span>], fetchUser)

<span class="hljs-comment">// isLoading: é¦–æ¬¡åŠ è½½</span>
<span class="hljs-comment">// isFetching: åå°æ›´æ–°</span>
<span class="hljs-comment">// å¯ä»¥æ˜¾ç¤º"æ­£åœ¨åˆ·æ–°"è€Œä¸æ˜¯æ•´ä¸ªé¡µé¢é‡æ–°åŠ è½½</span>
</code></pre>
<h3 data-id="heading-17">ç»“è¯­ï¼šæ€ç»´çš„è·ƒè¿</h3>
<p><strong>TanStack Query æœ€å¤§çš„ä»·å€¼ä¸æ˜¯å®ƒçš„ APIï¼Œè€Œæ˜¯å®ƒæ”¹å˜äº†æˆ‘ä»¬å¯¹æ•°æ®è·å–å’ŒçŠ¶æ€ç®¡ç†çš„è®¤çŸ¥ã€‚</strong></p>
<p>ä»"æˆ‘è¦å‘è¯·æ±‚ + æˆ‘è¦ç®¡ç†çŠ¶æ€"åˆ°"æˆ‘è¦æ•°æ®"ï¼Œè¿™æ˜¯ä¸€æ¬¡æ€ç»´çš„è·ƒè¿ã€‚</p>
<p>å°±åƒä»å‘½ä»¤å¼ç¼–ç¨‹åˆ°å£°æ˜å¼ç¼–ç¨‹ï¼Œä»æ‰‹åŠ¨æ¡£åˆ°è‡ªåŠ¨æ¡£ï¼Œä½ ä¸éœ€è¦å…³å¿ƒåº•å±‚çš„æ¯ä¸€ä¸ªé½¿è½®å¦‚ä½•è½¬åŠ¨ï¼Œä½ åªéœ€è¦è¯´å‡ºä½ çš„ç›®çš„åœ°ã€‚</p>
<p><strong>å½“ä½ ä¸å†çº ç»“äº"è¯·æ±‚"å’Œ"çŠ¶æ€"ï¼Œä½ ä¼šå‘ç°è‡ªå·±æœ‰æ›´å¤šç²¾åŠ›ä¸“æ³¨äºçœŸæ­£é‡è¦çš„äº‹æƒ…ï¼šæ„å»ºå‡ºè‰²çš„ç”¨æˆ·ä½“éªŒã€‚</strong></p>
<hr/>
<p><strong>å¼€å§‹ä½¿ç”¨ TanStack Queryï¼Œå¿˜æ‰"å‘è¯·æ±‚"å’Œ"ç®¡ç†çŠ¶æ€"è¿™ä¸¤ä¸ªæ¦‚å¿µå§ã€‚ä½ åªéœ€è¦è®°ä½ï¼š</strong></p>
<blockquote>
<p>"æˆ‘éœ€è¦è¿™ä¸ªæ•°æ®" â€” è¯·æ±‚æ€ä¹ˆå‘ã€çŠ¶æ€æ€ä¹ˆç®¡ï¼Œäº¤ç»™ TanStack Queryã€‚</p>
</blockquote>
<pre><code class="hljs language-bash" lang="bash">npm install @tanstack/react-query
</code></pre>
<p>ä½ çš„å‰ç«¯å¼€å‘ä½“éªŒï¼Œå³å°†ç„•ç„¶ä¸€æ–°ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[React + ECharts åŠ¨æ€æŠ˜çº¿å›¾å®ç°]]></title>    <link>https://juejin.cn/post/7576953459543474230</link>    <guid>https://juejin.cn/post/7576953459543474230</guid>    <pubDate>2025-11-27T02:39:16.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576953459543474230" data-draft-id="7576923573777694762" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="React + ECharts åŠ¨æ€æŠ˜çº¿å›¾å®ç°"/> <meta itemprop="keywords" content="React.js,å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-27T02:39:16.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºåª›ing"/> <meta itemprop="url" content="https://juejin.cn/user/1546328016433971"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            React + ECharts åŠ¨æ€æŠ˜çº¿å›¾å®ç°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1546328016433971/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºåª›ing
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-27T02:39:16.000Z" title="Thu Nov 27 2025 02:39:16 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä¸Šå‘¨é¡¹ç›®æ¥åˆ°ä¸€ä¸ªæ–°çš„éœ€æ±‚ï¼Œå®ç°ä¸€ä¸ª<strong>æ¯3ç§’</strong>åŠ¨æ€æ›´æ–°æ•°æ®Â çš„æŠ˜çº¿å›¾ï¼Œåˆšå¼€å§‹æœ‰ç‚¹æ‡µé€¼äº†ï¼Œechartså¦‚ä½•èƒ½åšæˆåŠ¨æ€çš„ï¼Œæœ€ç»ˆå®ç°çš„æ•ˆæœå¦‚ä¸‹ï¼š</p>
<ul>
<li>Â å›¾è¡¨ä¸æ–­å‘å·¦å¹³æ»‘æ»šåŠ¨</li>
<li>Â xAxis å§‹ç»ˆä¿æŒ 180 ä¸ªç‚¹çš„æ»‘åŠ¨çª—å£</li>
<li>Â ç¬¬ä¸€æ¬¡åŠ è½½ä¸€æ‰¹å†å²æ•°æ®ï¼Œä¹‹åæ¯ 3 ç§’è¿½åŠ æ–°æ•°æ®</li>
<li>Â æ–°æ—§æ•°æ®æ— ç¼è¡”æ¥</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fb0b5e464bd34b9ea614788c7781acce~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5aqbaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764815956&amp;x-signature=hXN3sWbGqc3YkC9oRcMJBdOiOK0%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-0">å®ç°æ€è·¯ï¼š</h2>
<ol>
<li>åˆå§‹åŒ–é˜¶æ®µï¼šåˆ›å»º ECharts å®ä¾‹</li>
<li>ç¬¬ä¸€æ¬¡æ•°æ®åŠ è½½ï¼ˆloadDataï¼‰ï¼šå¡«æ»¡ 180 ç‚¹çª—å£</li>
<li>å®šæ—¶æ›´æ–°ï¼ˆsmoothAdvanceï¼‰ï¼šæ¯ 3 ç§’æ»‘åŠ¨çª—å£</li>
<li>å›¾è¡¨æ¸²æŸ“ï¼ˆupdateChartï¼‰</li>
<li>å›¾è¡¨è‡ªé€‚åº”ï¼ˆResizeObserverï¼‰</li>
</ol>
<h2 data-id="heading-1">é‡åˆ°çš„é—®é¢˜ï¼š</h2>
<p>1.Â ç¬¬ä¸€æ¬¡åˆå§‹åŒ–æ•°æ®çš„æœ€åä¸€ä¸ªç‚¹å’Œåç»­ç¬¬ä¸€ä¸ªç‚¹ä¹‹é—´æ–­è£‚ï¼ˆä¸è¿çº¿ï¼‰</p>
<p>2.Â ç¬¬ä¸€æ¬¡åˆå§‹åŒ–æ•°æ®çš„æœ€åçš„è¿æ¥ç‚¹è·Ÿ3såæ›´æ–°æ•°æ®çš„ç¬¬ä¸€ä¸ªç‚¹çš„è¿æ¥çº¿Tooltipæ˜¾ç¤ºundifiend</p>
<h2 data-id="heading-2">ä»£ç å®ç°å¦‚ä¸‹ï¼š</h2>
<h3 data-id="heading-3">åˆå§‹åŒ–é˜¶æ®µï¼šåˆ›å»º ECharts å®ä¾‹</h3>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">const</span> <span class="hljs-string">initChart</span> <span class="hljs-string">=</span> <span class="hljs-string">()</span> <span class="hljs-string">=&gt;</span> {  
    <span class="hljs-string">if</span> <span class="hljs-string">(!chartRef.current)</span> <span class="hljs-string">return;</span>  
    <span class="hljs-string">chartInstance.current</span> <span class="hljs-string">=</span> <span class="hljs-string">echarts.init(chartRef.current);</span>  

    <span class="hljs-string">chartInstance.current.setOption(</span>{  
        <span class="hljs-attr">title:</span> {<span class="hljs-attr">text:</span> <span class="hljs-string">labelList.realTime_rx_or_tx_rate</span>, <span class="hljs-attr">left:</span> <span class="hljs-string">"center"</span>},  
        <span class="hljs-attr">tooltip:</span> {  
            <span class="hljs-attr">trigger:</span> <span class="hljs-string">"axis"</span>,  
            <span class="hljs-attr">formatter:</span> <span class="hljs-string">params</span> <span class="hljs-string">=&gt;</span> {  
               <span class="hljs-string">//é¿å…Tooltipæ˜¾ç¤ºundifiend</span>
                <span class="hljs-string">const</span> <span class="hljs-string">validParams</span> <span class="hljs-string">=</span> <span class="hljs-string">params.filter(p</span> <span class="hljs-string">=&gt;</span> <span class="hljs-string">p.data</span> <span class="hljs-type">!=</span> <span class="hljs-literal">null</span> <span class="hljs-string">&amp;&amp;</span> <span class="hljs-type">!Number.isNaN(p.data));</span>  
                <span class="hljs-string">if</span> <span class="hljs-string">(!validParams.length)</span> <span class="hljs-string">return</span> <span class="hljs-string">""</span><span class="hljs-string">;</span>  
                <span class="hljs-string">let</span> <span class="hljs-string">text</span> <span class="hljs-string">=</span> <span class="hljs-string">`$</span>{<span class="hljs-string">params</span>[<span class="hljs-number">0</span>]<span class="hljs-string">.axisValue</span>}<span class="hljs-string">&lt;br/&gt;`;</span>  
                <span class="hljs-string">validParams.forEach(item</span> <span class="hljs-string">=&gt;</span> {  
                    <span class="hljs-string">text</span> <span class="hljs-string">+=</span> <span class="hljs-string">`$</span>{<span class="hljs-string">item.marker</span>}<span class="hljs-string">$</span>{<span class="hljs-string">item.seriesName</span>}<span class="hljs-string">:</span> <span class="hljs-string">$</span>{<span class="hljs-string">formatSpeedForStats(item.data</span>, <span class="hljs-string">"bit"</span><span class="hljs-string">)</span>}<span class="hljs-string">&lt;br/&gt;`;</span>  
                }<span class="hljs-string">);</span>  
                <span class="hljs-string">return</span> <span class="hljs-string">text;</span>  
            }  
        },  
        <span class="hljs-attr">grid:</span> {<span class="hljs-attr">left:</span> <span class="hljs-number">120</span>, <span class="hljs-attr">right:</span> <span class="hljs-number">20</span>, <span class="hljs-attr">bottom:</span> <span class="hljs-number">40</span>, <span class="hljs-attr">top:</span> <span class="hljs-number">80</span>},  
        <span class="hljs-attr">xAxis:</span> {<span class="hljs-attr">type:</span> <span class="hljs-string">"category"</span>, <span class="hljs-attr">boundaryGap:</span> <span class="hljs-literal">false</span>, <span class="hljs-attr">data:</span> []},  
        <span class="hljs-attr">yAxis:</span> {  
            <span class="hljs-attr">type:</span> <span class="hljs-string">"value"</span>,  
            <span class="hljs-attr">axisLabel:</span> {  
                <span class="hljs-attr">formatter:</span> <span class="hljs-string">value</span> <span class="hljs-string">=&gt;</span> <span class="hljs-string">formatSpeedForStats(value</span>, <span class="hljs-string">"bit"</span><span class="hljs-string">)</span>  
            },  
            <span class="hljs-attr">splitLine:</span> {<span class="hljs-attr">lineStyle:</span> {<span class="hljs-attr">type:</span> <span class="hljs-string">"dashed"</span>}}  
        },  
        <span class="hljs-attr">series:</span> [  
            {  
                <span class="hljs-attr">name:</span> <span class="hljs-string">labelList.tx</span>,  
                <span class="hljs-attr">type:</span> <span class="hljs-string">"line"</span>,  
                <span class="hljs-attr">smooth:</span> <span class="hljs-literal">false</span>,  
                <span class="hljs-attr">showSymbol:</span> <span class="hljs-literal">false</span>,  
                <span class="hljs-attr">connectNulls:</span> <span class="hljs-literal">true</span>,  
                <span class="hljs-attr">areaStyle:</span> {<span class="hljs-attr">color:</span> <span class="hljs-string">"rgba(0, 180, 0, 0.2)"</span>},  
                <span class="hljs-attr">lineStyle:</span> {<span class="hljs-attr">color:</span> <span class="hljs-string">"#00c853"</span>, <span class="hljs-attr">width:</span> <span class="hljs-number">2</span>},  
                <span class="hljs-attr">data:</span> []  
            },  
            {  
                <span class="hljs-attr">name:</span> <span class="hljs-string">labelList.rx</span>,  
                <span class="hljs-attr">type:</span> <span class="hljs-string">"line"</span>,  
                <span class="hljs-attr">smooth:</span> <span class="hljs-literal">false</span>,  
                <span class="hljs-attr">showSymbol:</span> <span class="hljs-literal">false</span>,  
                <span class="hljs-attr">connectNulls:</span> <span class="hljs-literal">true</span>,  
                <span class="hljs-attr">areaStyle:</span> {<span class="hljs-attr">color:</span> <span class="hljs-string">"rgba(0, 102, 255, 0.2)"</span>},  
                <span class="hljs-attr">lineStyle:</span> {<span class="hljs-attr">color:</span> <span class="hljs-string">"#0066ff"</span>, <span class="hljs-attr">width:</span> <span class="hljs-number">2</span>},  
                <span class="hljs-attr">data:</span> []  
            }  
        ]  
    }<span class="hljs-string">);</span>  
}<span class="hljs-string">;</span>
</code></pre>
<p>Â </p>
<pre><code class="hljs language-ini" lang="ini">echartsæ•°æ®å¤„ç†æ–¹æ³•

const <span class="hljs-attr">processDataPoints</span> = result =&gt; {  
    if (!*Array*.isArray(result) || result.length &lt; 2) return {newTimeData: <span class="hljs-section">[]</span>, newTxData: <span class="hljs-section">[]</span>, newRxData: <span class="hljs-section">[]</span>}<span class="hljs-comment">;  </span>

    const <span class="hljs-attr">newTimeData</span> = []<span class="hljs-comment">;  </span>
    const <span class="hljs-attr">newTxData</span> = []<span class="hljs-comment">;  </span>
    const <span class="hljs-attr">newRxData</span> = []<span class="hljs-comment">;  </span>

    for (let <span class="hljs-attr">i</span> = <span class="hljs-number">1</span><span class="hljs-comment">; i &lt; result.length; i++) {  </span>
        const <span class="hljs-section">[t2, rx2, , tx2]</span> = result<span class="hljs-section">[i]</span><span class="hljs-comment">;  </span>
        const <span class="hljs-section">[t1, rx1, , tx1]</span> = result<span class="hljs-section">[i - 1]</span><span class="hljs-comment">;  </span>

        const <span class="hljs-attr">txRate</span> = ((tx2 - tx1) * <span class="hljs-number">8</span>) / <span class="hljs-number">1024</span> / (t2 - t1)<span class="hljs-comment">;  </span>
        const <span class="hljs-attr">rxRate</span> = ((rx2 - rx1) * <span class="hljs-number">8</span>) / <span class="hljs-number">1024</span> / (t2 - t1)<span class="hljs-comment">;  </span>
        const <span class="hljs-attr">timeStr</span> = new *Date*(t2 * <span class="hljs-number">1000</span>).toLocaleTimeString(<span class="hljs-string">"zh-CN"</span>, {hour12: <span class="hljs-literal">false</span>})<span class="hljs-comment">;  </span>

        newTimeData.push(timeStr)<span class="hljs-comment">;  </span>
        newTxData.push(parseFloat(txRate.toFixed(2)))<span class="hljs-comment">;  </span>
        newRxData.push(parseFloat(rxRate.toFixed(2)))<span class="hljs-comment">;  </span>
    }  

    return {newTimeData, newTxData, newRxData}<span class="hljs-comment">;  </span>
}<span class="hljs-comment">;</span>
</code></pre>
<p>Â </p>
<h3 data-id="heading-4">ç¬¬ä¸€æ¬¡æ•°æ®åŠ è½½:å¡«æ»¡180ç‚¹çª—å£</h3>
<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-attr">loadData</span> = async () =&gt; {  
    try {  
        const <span class="hljs-attr">res</span> = await *api*.request({  
            luci: {  
                getRealtimeStats: {mode: "interface", device}  
            }  
        })<span class="hljs-comment">;  </span>

        const <span class="hljs-attr">result</span> = res?.result<span class="hljs-comment">;  </span>


        const {newTimeData, newTxData, newRxData} = processDataPoints(result)<span class="hljs-comment">;  </span>

        // åˆå§‹åŒ–ç”¨Â NaN å¡«å……ï¼Œé¿å…æŠ˜çº¿æ–­è£‚  
        const <span class="hljs-attr">fullTime</span> = *Array*(TOTAL_POINTS).fill(<span class="hljs-string">""</span>)<span class="hljs-comment">;  </span>
        const <span class="hljs-attr">fullTx</span> = *Array*(TOTAL_POINTS).fill(*NaN*)<span class="hljs-comment">;  </span>
        const <span class="hljs-attr">fullRx</span> = *Array*(TOTAL_POINTS).fill(*NaN*)<span class="hljs-comment">;  </span>

        const <span class="hljs-attr">len</span> = newTimeData.length<span class="hljs-comment">;  </span>
        const <span class="hljs-attr">start</span> = TOTAL_POINTS - len<span class="hljs-comment">;  </span>

        for (let <span class="hljs-attr">i</span> = <span class="hljs-number">0</span><span class="hljs-comment">; i &lt; len; i++) {  </span>
            fullTime<span class="hljs-section">[start + i]</span> = newTimeData<span class="hljs-section">[i]</span><span class="hljs-comment">;  </span>
            fullTx<span class="hljs-section">[start + i]</span> = newTxData<span class="hljs-section">[i]</span><span class="hljs-comment">;  </span>
            fullRx<span class="hljs-section">[start + i]</span> = newRxData<span class="hljs-section">[i]</span><span class="hljs-comment">;  </span>
        }  
        setTimeData(fullTime)<span class="hljs-comment">;  </span>
        setTxData(fullTx)<span class="hljs-comment">;  </span>
        setRxData(fullRx)<span class="hljs-comment">;  </span>
    } catch (err) {  
        *console*.error(err)<span class="hljs-comment">;  </span>
    }  
}<span class="hljs-comment">;</span>
</code></pre>
<h3 data-id="heading-5">å®šæ—¶æ›´æ–°ï¼šæ¯3sæ»‘åŠ¨çª—å£ åˆ é™¤æ—§çš„ä¸‰ä¸ªç‚¹ï¼Œæ·»åŠ æœ€æ–°ç‚¹</h3>
<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-attr">smoothAdvance</span> = async () =&gt; {  
    try {  
        const <span class="hljs-attr">res</span> = await *api*.request({  
            luci: {  
                getRealtimeStats: {mode: "interface", device}  
            }  
        })<span class="hljs-comment">;  </span>

        const <span class="hljs-attr">result</span> = res?.result<span class="hljs-comment">;  </span>
               const {newTimeData, newTxData, newRxData} = processDataPoints(result.slice(-4))<span class="hljs-comment">;  </span>
        setTimeData(<span class="hljs-attr">prev</span> =&gt; {  
            const <span class="hljs-attr">kept</span> = prev.slice(<span class="hljs-number">3</span>)<span class="hljs-comment">;  </span>
            const <span class="hljs-attr">lastTime</span> = kept[kept.length - <span class="hljs-number">1</span>]<span class="hljs-comment">;</span>
            
            //é¿å…é‡å¤ç‚¹

            const <span class="hljs-attr">filtered</span> = newTimeData.filter(t =&gt; t !== lastTime)<span class="hljs-comment">;  </span>

            return <span class="hljs-section">[...kept, ...filtered]</span><span class="hljs-comment">;  </span>
        })<span class="hljs-comment">;  </span>
      

        //nullå€¼ç”¨Â NaN å¡«å……ï¼Œé¿å…æŠ˜çº¿æ–­è£‚ åŒæ—¶é¿å…åœ¨è¿çº¿è§¦å‘tooltipæ˜¾ç¤ºï¼ˆåº”è¯¥åœ¨æ¯ä¸ªç‚¹æ˜¾ç¤ºï¼‰
      
        setTxData(<span class="hljs-attr">prev</span> =&gt; {  
            const <span class="hljs-attr">kept</span> = prev.slice(<span class="hljs-number">3</span>).map(v =&gt; (v == null ? <span class="hljs-string">"NaN"</span> : v))<span class="hljs-comment">;  </span>
            return <span class="hljs-section">[...kept, ...newTxData]</span><span class="hljs-comment">;  </span>
        })<span class="hljs-comment">;  </span>

        setRxData(<span class="hljs-attr">prev</span> =&gt; {  
            const <span class="hljs-attr">kept</span> = prev.slice(<span class="hljs-number">3</span>).map(v =&gt; (v == null ? <span class="hljs-string">"NaN"</span>: v))<span class="hljs-comment">;  </span>
            return <span class="hljs-section">[...kept, ...newRxData]</span><span class="hljs-comment">;  </span>
        })<span class="hljs-comment">;  </span>
    } catch (e) {  
        *console*.error("smoothAdvance error:", e)<span class="hljs-comment">;  </span>
    }  
}<span class="hljs-comment">;</span>
</code></pre>
<p>Â </p>
<h3 data-id="heading-6">å›¾è¡¨æ¸²æŸ“ åªæ›´æ–°åæ ‡è½´ æ•°æ®æ•°ç»„</h3>
<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-attr">updateChart</span> = (timeArr, txArr, rxArr) =&gt; {  
    if (!chartInstance.current) return<span class="hljs-comment">;  </span>
    chartInstance.current.setOption(  
        {  
            xAxis: {data: timeArr},  
            series: <span class="hljs-section">[{data: txArr}, {data: rxArr}]</span>  
        },  
        false  
    )<span class="hljs-comment">;  </span>
}<span class="hljs-comment">;</span>

useEffect(() =&gt; {  
    if (chartInstance.current) {  
        updateChart(timeData, txData, rxData)<span class="hljs-comment">;  </span>
    }  
}, <span class="hljs-section">[timeData, txData, rxData]</span>)<span class="hljs-comment">;</span>
</code></pre>
<p>Â </p>
<h3 data-id="heading-7">å›¾è¡¨è‡ªé€‚åº” (ResizeObserver)</h3>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">useEffect</span>(() =&gt; {  
    const observer = new <span class="hljs-built_in">ResizeObserver</span>(() =&gt; {  
        chartInstance<span class="hljs-selector-class">.current</span>?<span class="hljs-selector-class">.resize</span>();  
    });  
    if (chartRef.current) observer<span class="hljs-selector-class">.observe</span>(chartRef.current);  
    return () =&gt; observer<span class="hljs-selector-class">.disconnect</span>();  
}, <span class="hljs-selector-attr">[]</span>);
</code></pre>
<p>Â </p>
<h3 data-id="heading-8">å›¾è¡¨åˆå§‹åŒ–æ¸²æŸ“ï¼ˆç¬¬ä¸€æ¬¡åŠ è½½æ•°æ®æ¸²æŸ“ï¼‰</h3>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">useEffect</span>(() =&gt; {  
  if (!chartInstance.current) <span class="hljs-built_in">initChart</span>();  
    <span class="hljs-built_in">loadData</span>();  
    const timer = <span class="hljs-built_in">setInterval</span>(smoothAdvance, <span class="hljs-number">3000</span>);  
    return () =&gt; <span class="hljs-built_in">clearInterval</span>(timer);  
}, <span class="hljs-selector-attr">[]</span>);
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[tså­¦ä¹ D1---è¶…åŸºç¡€è¯­æ³•å¯¼å…¥]]></title>    <link>https://juejin.cn/post/7576907627017699379</link>    <guid>https://juejin.cn/post/7576907627017699379</guid>    <pubDate>2025-11-27T02:46:45.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576907627017699379" data-draft-id="7576863819982913545" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="tså­¦ä¹ D1---è¶…åŸºç¡€è¯­æ³•å¯¼å…¥"/> <meta itemprop="keywords" content="TypeScript"/> <meta itemprop="datePublished" content="2025-11-27T02:46:45.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="çˆ±æ³¡è„šçš„é¸¡è…¿"/> <meta itemprop="url" content="https://juejin.cn/user/4466663535419179"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            tså­¦ä¹ D1---è¶…åŸºç¡€è¯­æ³•å¯¼å…¥
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4466663535419179/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    çˆ±æ³¡è„šçš„é¸¡è…¿
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-27T02:46:45.000Z" title="Thu Nov 27 2025 02:46:45 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>åœ¨è·Ÿç»ƒå°å…”é²œçš„æ—¶å€™å‘ç°å¸¸ç”¨tsè¯­æ³•æ¥å®šä¹‰æ¥å£è¿”å›çš„æ•°æ®ç±»å‹ï¼Œæ‰€ä»¥æ¥è¡¥ä¹ ä¸€ä¸‹tsè¯­æ³•</strong></p>
<h2 data-id="heading-0">1.jsæ˜¯ä¸€ç§å¼±è„šæœ¬æ–‡ä»¶ï¼Œæ•°æ®ç±»å‹å®šä¹‰å’Œä½¿ç”¨ä¸ä¸¥æ ¼ï¼Œæ‰€ä»¥ä¾¿äºåæœŸç»´æŠ¤ï¼Œå°±è¯ç”Ÿäº†ts</h2>
<h3 data-id="heading-1">2.ç¼–å†™</h3>
<h3 data-id="heading-2">2.1 tsä¼šä»¥ç»™å‡ºçš„å˜é‡ç±»å‹åˆå§‹å€¼è¿›è¡Œå˜é‡ç±»å‹å®šä¹‰ï¼ˆtsçš„ç±»å‹çº¦æŸåŠŸèƒ½+ç±»å‹æ¨æ–­ï¼‰</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/29571c0857544c1b899ccefab3069846~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54ix5rOh6ISa55qE6bih6IW_:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764816405&amp;x-signature=NCxo1E%2FM3Gwq0wNqKfyhS6W3QRg%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-3">2.2 tsçš„ç±»å‹æ³¨è§£</h3>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// 1.ä½¿ç”¨ç±»å‹æ³¨è§£ï¼Œåœ¨å˜é‡ååŠ â€˜ï¼šâ€™çš„ç¬¦å·ï¼ŒæŒ‡å®šå˜é‡çš„ç±»å‹</span>
<span class="hljs-keyword">let</span> <span class="hljs-attr">str</span>:<span class="hljs-built_in">string</span>=<span class="hljs-string">'abc'</span>

<span class="hljs-comment">// 2.æˆ–è€…å…ˆé¢„å£°æ˜ä¸€ä¸ªå˜é‡,ä¹‹åéœ€è¦ä½¿ç”¨çš„æ—¶å€™å†è¿›è¡Œèµ‹å€¼</span>
<span class="hljs-keyword">let</span> <span class="hljs-attr">num</span>:<span class="hljs-built_in">number</span>
num=<span class="hljs-number">123</span>

</code></pre>
<h3 data-id="heading-4">2.3 tsçš„ç±»å‹æ–­è¨€</h3>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">let</span> numArr=[<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>]
<span class="hljs-keyword">const</span> result=numArr.<span class="hljs-title function_">find</span>(<span class="hljs-function"><span class="hljs-params">item</span>=&gt;</span>item&gt;<span class="hljs-number">2</span>)
<span class="hljs-comment">// ç»“åˆunArrä¸­çš„å…ƒç´ ï¼Œè¿™é‡Œçš„â€˜item=&gt;item&gt;2â€™æœ‰å¯èƒ½ä¸æˆç«‹ï¼Œ</span>
<span class="hljs-comment">// ä¼šè¢«åˆ¤å®šä¸ºundefinedç±»å‹ï¼Œæ‰€ä»¥resultä¼šæ ‡çº¢</span>
result*<span class="hljs-number">5</span>
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/570cb435b63449cc9b69633968f17a12~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54ix5rOh6ISa55qE6bih6IW_:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764816405&amp;x-signature=1fX9eFYoHLfHsmo5FWFM3fIhouA%3D" alt="image.png" loading="lazy"/><br/>
<strong>å¦‚æœä½ æƒ³ç­›é€‰æ‰undefinedçš„æƒ…å†µï¼Œå°±éœ€è¦ä½¿ç”¨ç±»å‹æ–­è¨€â€˜as numberâ€™,æ–­è¨€ä¸ºä¸€ä¸ªæ•°å€¼ç±»å‹</strong></p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">let</span> numArr=[<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>]
<span class="hljs-keyword">const</span> result=numArr.<span class="hljs-title function_">find</span>(<span class="hljs-function"><span class="hljs-params">item</span>=&gt;</span>item&gt;<span class="hljs-number">2</span>) <span class="hljs-keyword">as</span> <span class="hljs-built_in">number</span>
<span class="hljs-comment">// ç»“åˆunArrä¸­çš„å…ƒç´ ï¼Œè¿™é‡Œçš„â€˜item=&gt;item&gt;2â€™æœ‰å¯èƒ½ä¸æˆç«‹ï¼Œ</span>
<span class="hljs-comment">// ä¼šè¢«åˆ¤å®šä¸ºundefinedç±»å‹ï¼Œæ‰€ä»¥resultä¼šæ ‡çº¢</span>
result*<span class="hljs-number">5</span>
</code></pre>
<h3 data-id="heading-5">2.4 tsçš„åŸºç¡€ç±»å‹å’Œè”åˆç±»å‹</h3>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// 1.tsçš„åŸºç¡€ç±»å‹</span>
<span class="hljs-keyword">let</span> <span class="hljs-attr">v1</span>:<span class="hljs-built_in">string</span>=<span class="hljs-string">'abc'</span>
<span class="hljs-keyword">let</span> <span class="hljs-attr">v2</span>:<span class="hljs-built_in">number</span>=<span class="hljs-number">123</span>
<span class="hljs-keyword">let</span> <span class="hljs-attr">v3</span>:<span class="hljs-built_in">boolean</span>=<span class="hljs-literal">true</span>
<span class="hljs-keyword">let</span> <span class="hljs-attr">nu</span>:<span class="hljs-literal">null</span>=<span class="hljs-literal">null</span>
<span class="hljs-keyword">let</span> <span class="hljs-attr">ud</span>:<span class="hljs-literal">undefined</span>=<span class="hljs-literal">undefined</span>

<span class="hljs-comment">// 2.tsçš„è”åˆç±»å‹</span>
<span class="hljs-comment">// 2.1é€šè¿‡ç«–çº¿çš„æ–¹å¼æ¥å®šä¹‰è”åˆç±»å‹(å¦‚v4ï¼šå¯ä»¥èµ‹å€¼stringæˆ–è€…number)</span>
<span class="hljs-keyword">let</span> <span class="hljs-attr">v4</span>:<span class="hljs-built_in">string</span>|<span class="hljs-built_in">number</span>=<span class="hljs-number">123</span>

<span class="hljs-comment">// 2.2 å¸Œæœ›è¿™ä¸ªæ•°å€¼åªèƒ½è¢«é™å®šä¸ºä»¥ä¸‹å‡ ä¸ªæ•°å€¼ä¹‹ä¸€</span>
<span class="hljs-keyword">let</span> <span class="hljs-attr">v5</span>:<span class="hljs-number">1</span>|<span class="hljs-number">2</span>|<span class="hljs-number">3</span>=<span class="hljs-number">1</span>  <span class="hljs-comment">// èµ‹å€¼æˆåŠŸ</span>
<span class="hljs-keyword">let</span> <span class="hljs-attr">v6</span>:<span class="hljs-number">1</span>|<span class="hljs-number">2</span>|<span class="hljs-number">3</span>=<span class="hljs-number">4</span>  <span class="hljs-comment">// error 4ä¸æ˜¯v6çš„æˆå‘˜</span>

<span class="hljs-comment">// 3.tsçš„æ•°ç»„</span>
<span class="hljs-comment">// é€šè¿‡ç±»å‹æ¥çº¦æŸæ•°ç»„ä¸­çš„ç±»å‹</span>
<span class="hljs-keyword">let</span> <span class="hljs-attr">v7</span>:<span class="hljs-built_in">number</span>[]=[<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>]
<span class="hljs-keyword">let</span> <span class="hljs-attr">v8</span>:<span class="hljs-title class_">Array</span>&lt;<span class="hljs-built_in">string</span>&gt;=[<span class="hljs-string">'a'</span>,<span class="hljs-string">'b'</span>,<span class="hljs-string">'c'</span>]

<span class="hljs-comment">// 4.tsçš„å…ƒç»„</span>
<span class="hljs-comment">// 4.1å…ƒç»„ç±»å‹å…è®¸è¡¨ç¤ºä¸€ä¸ªå·²çŸ¥å…ƒç´ æ•°é‡å’Œç±»å‹çš„æ•°ç»„ï¼Œå„å…ƒç´ çš„ç±»å‹ä¸å¿…ç›¸åŒ</span>
<span class="hljs-keyword">let</span> <span class="hljs-attr">v9</span>:[<span class="hljs-built_in">string</span>,<span class="hljs-built_in">number</span>]=[<span class="hljs-string">'a'</span>,<span class="hljs-number">1</span>]
<span class="hljs-comment">// 4.2 å–å‡ºå…ƒç¥–å€¼</span>
v9[<span class="hljs-number">0</span>] <span class="hljs-comment">//è¾“å‡ºa</span>

<span class="hljs-comment">// 4.3 è®©ä¸€äº›å…ƒç¥–ä¸­çš„å…ƒç´ ä¸ºå¯é€‰çš„</span>
<span class="hljs-keyword">let</span> <span class="hljs-attr">v10</span>:[<span class="hljs-built_in">string</span>,<span class="hljs-built_in">number</span>,<span class="hljs-built_in">boolean</span>?]=[<span class="hljs-string">'a'</span>,<span class="hljs-number">1</span>]   <span class="hljs-comment">// ï¼Ÿè¡¨ç¤ºå¯é€‰</span>


<span class="hljs-comment">// 5.tsçš„æšä¸¾</span>
<span class="hljs-comment">//åœ¨jsä¸­å°±æ˜¯å°†å…¶ç¼–è¯‘ä¸ºé”®ã€å€¼çš„å½¢å¼</span>
<span class="hljs-keyword">enum</span> <span class="hljs-title class_">MyEnum</span>{   <span class="hljs-comment">// æšä¸¾ç±»å‹</span>
    a,
    b,
    c
}
<span class="hljs-comment">// 5.1 è®¿é—®æšä¸¾ç±»å‹çš„ä¸¤ç§æ–¹å¼</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">MyEnum</span>.<span class="hljs-property">a</span>)
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">MyEnum</span>[<span class="hljs-number">0</span>])  <span class="hljs-comment">//ç­‰äºMyEnum.a</span>
</code></pre>
<h3 data-id="heading-6">2.5 tsçš„å‡½æ•°</h3>
<h4 data-id="heading-7">2.5.1 void</h4>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// 6. voidç±»å‹(å½“å‡½æ•°æ²¡æœ‰è¿”å›å€¼çš„æ—¶å€™ï¼Œè¿”å›å€¼å°±æ˜¯undefinedï¼Œæ‰€ä»¥å‡½æ•°è¿”å›å€¼ç±»å‹ä¸ºvoid)</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">fn</span>(<span class="hljs-params"/>):<span class="hljs-built_in">void</span>{  <span class="hljs-comment">// voidç±»å‹è¡¨ç¤ºæ²¡æœ‰ä»»ä½•è¿”å›å€¼</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'void'</span>)
}
</code></pre>
<h4 data-id="heading-8">2.5.2 ç»™å‡½æ•°çš„å‚æ•°åˆ†é…ç±»å‹</h4>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">function</span> <span class="hljs-title function_">MyFn</span>(<span class="hljs-params">a:<span class="hljs-built_in">number</span>,b:<span class="hljs-built_in">string</span></span>){
<span class="hljs-keyword">return</span> a+b;
}
</code></pre>
<h4 data-id="heading-9">2.5.3 ç»™å‡½æ•°çš„è¿”å›å€¼åˆ†é…ç±»å‹ï¼ˆç”¨äºä¸¥æ ¼è§„èŒƒå‡½æ•°è¿”å›å€¼ç±»å‹ï¼‰</h4>
<h5 data-id="heading-10">2.5.3.1</h5>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">function</span> <span class="hljs-title function_">MyFn</span>(<span class="hljs-params">a:<span class="hljs-built_in">number</span>,b:<span class="hljs-built_in">string</span></span>):<span class="hljs-built_in">number</span>{   <span class="hljs-comment">//æŠ¥é”™ï¼Œå› ä¸ºè¿™é‡Œè¿”å›å€¼ç±»å‹ä¸æ˜¯number</span>
<span class="hljs-keyword">return</span> a+b; 
}
## <span class="hljs-string">``</span><span class="hljs-string">`
#### 2.5.3.2
`</span><span class="hljs-string">``</span>ts
<span class="hljs-keyword">function</span> <span class="hljs-title function_">MyFn</span>(<span class="hljs-params">a:<span class="hljs-built_in">number</span>,b:<span class="hljs-built_in">string</span></span>):<span class="hljs-built_in">number</span>{
<span class="hljs-keyword">return</span> <span class="hljs-number">100</span>;
}
</code></pre>
<h5 data-id="heading-11">2.5.3.3 å°†å‚æ•°è®¾ç½®ä¸ºå¯é€‰ï¼ˆå’ŒES6æœ‰ç‚¹åƒï¼‰</h5>
<p><strong>æ³¨æ„ï¼›å¯é€‰å‚æ•°å†™åœ¨å¿…é€‰å‚æ•°å·¦ä¾§ï¼ˆåé¢ï¼‰</strong></p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">function</span> <span class="hljs-title function_">MyFn</span>(<span class="hljs-params">a:<span class="hljs-built_in">number</span>,b?:<span class="hljs-built_in">string</span></span>):<span class="hljs-built_in">number</span>{
<span class="hljs-keyword">return</span> <span class="hljs-number">100</span>;
}
</code></pre>
<h5 data-id="heading-12">2.5.3.4 å‰©ä½™å‚æ•°</h5>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">function</span> <span class="hljs-title function_">MyFn</span>(<span class="hljs-params">a:<span class="hljs-built_in">number</span>,b?:<span class="hljs-built_in">string</span>, ...rest:<span class="hljs-built_in">number</span>[]</span>):<span class="hljs-built_in">number</span>{
<span class="hljs-keyword">return</span> <span class="hljs-number">100</span>;
}

<span class="hljs-keyword">const</span> f=<span class="hljs-title class_">MyFn</span>(<span class="hljs-number">20</span>,<span class="hljs-string">'abc'</span>,<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">6</span>,<span class="hljs-number">7</span>) <span class="hljs-comment">//1,2,3,4,5,6,7å°±æ˜¯å‰©ä½™å‡½æ•°' ...rest:number[]'çš„å®å‚</span>
</code></pre>
<h3 data-id="heading-13">2.6 tsçš„æ¥å£</h3>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// å®šä¹‰ä¸€ä¸ªæ¥å£</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">Obj</span>{
    <span class="hljs-attr">name</span>:<span class="hljs-built_in">string</span>,
    <span class="hljs-attr">age</span>:<span class="hljs-built_in">number</span>
}

<span class="hljs-comment">// ä½¿ç”¨æ¥å£çš„æ—¶å€™å¿…é¡»è¦æœ‰nameå’Œage</span>
<span class="hljs-keyword">const</span> <span class="hljs-attr">obj</span>:<span class="hljs-title class_">Obj</span> = {
    <span class="hljs-attr">name</span>:<span class="hljs-string">'å¼ ä¸‰'</span>,
    <span class="hljs-attr">age</span>:<span class="hljs-number">18</span>
}
</code></pre>
<h3 data-id="heading-14">2.7 tsçš„typeï¼ˆç±»å‹åˆ«åï¼‰---å¾ˆå¸¸ç”¨</h3>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">type</span> <span class="hljs-title class_">MyuserName</span>=<span class="hljs-built_in">string</span>|<span class="hljs-built_in">number</span>
<span class="hljs-keyword">let</span> <span class="hljs-attr">username</span>:<span class="hljs-title class_">MyuserName</span>=<span class="hljs-string">"123"</span>
</code></pre>
<h3 data-id="heading-15">2.8 tsçš„æ³›å‹---å¾ˆå¸¸ç”¨</h3>
<p><strong>å®šä¹‰ä¸€ä¸ªç»“æ„ä½“ï¼Œä½†æ˜¯æƒ³é€‚é…å¤šä¸­æ•°æ®ç±»å‹ï¼Œå¯ä»¥ä½¿ç”¨æ³›å‹</strong></p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">function</span> myFn&lt;T&gt;(<span class="hljs-attr">a</span>:T,<span class="hljs-attr">b</span>:T):T[]{
    <span class="hljs-keyword">return</span> [a,b];
}
<span class="hljs-comment">// ä½¿ç”¨æ•°å€¼ç±»å‹è¿›è¡Œå¤„ç†</span>
myFn&lt;<span class="hljs-built_in">number</span>&gt;(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>)
<span class="hljs-comment">// ä½¿ç”¨å­—ç¬¦ä¸²ç±»å‹è¿›è¡Œå¤„ç†</span>
myFn&lt;<span class="hljs-built_in">string</span>&gt;(<span class="hljs-string">'1'</span>,<span class="hljs-string">'2'</span>)
<span class="hljs-comment">// æˆ–è€…ä¸æ‰‹åŠ¨å®šä¹‰ç±»å‹ï¼Œå› ä¸ºåœ¨tsä¸­å‡½æ•°myFn()ä¼šè‡ªåŠ¨è¿›è¡Œç±»å‹æ¨å¯¼</span>
<span class="hljs-title function_">myFn</span>(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>)  <span class="hljs-comment">//è‡ªåŠ¨å°†ç±»å‹åˆ¤å®šä¸ºnumber</span>
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å€ŸåŠ© Let's Encrypt èŠ‚çœ SSL è¯ä¹¦è´¹ç”¨]]></title>    <link>https://juejin.cn/post/7577171133432905769</link>    <guid>https://juejin.cn/post/7577171133432905769</guid>    <pubDate>2025-11-27T03:59:01.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577171133432905769" data-draft-id="7577171133432873001" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å€ŸåŠ© Let's Encrypt èŠ‚çœ SSL è¯ä¹¦è´¹ç”¨"/> <meta itemprop="keywords" content="DevOps,åç«¯"/> <meta itemprop="datePublished" content="2025-11-27T03:59:01.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="mzlogin"/> <meta itemprop="url" content="https://juejin.cn/user/1890815727118414"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å€ŸåŠ© Let's Encrypt èŠ‚çœ SSL è¯ä¹¦è´¹ç”¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1890815727118414/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    mzlogin
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-27T03:59:01.000Z" title="Thu Nov 27 2025 03:59:01 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å‘æœåŠ¡å•†è´­ä¹°ä¸€å¼ å¸¸è§çš„ DV é€šé…ç¬¦ SSL è¯ä¹¦ï¼Œé€šå¸¸æ¯å¹´ä»·æ ¼åœ¨æ•°ç™¾è‡³ä¸€åƒå¤šå…ƒäººæ°‘å¸ä¸ç­‰ï¼›è‹¥åä¸‹æœ‰å¤šä¸ªåŸŸåéœ€è¦ä½¿ç”¨è¯ä¹¦ï¼Œæ€»è´¹ç”¨æ¯å¹´å¯èƒ½è¾¾åˆ°æ•°åƒå…ƒã€‚</p>
<p>åœ¨å½“å‰å¼ºè°ƒé™æœ¬å¢æ•ˆçš„ç¯å¢ƒä¸‹ï¼Œè‹¥è¯„ä¼°åè®¤ä¸ºå…è´¹è¯ä¹¦èƒ½å¤Ÿæ»¡è¶³éœ€æ±‚ï¼Œå°å…¬å¸å’Œä¸ªäººç½‘ç«™å³å¯èŠ‚çœç›¸åº”æˆæœ¬ã€‚</p>
<h2 data-id="heading-0">Let's Encrypt ç®€ä»‹</h2>
<p>Let's Encrypt æ˜¯ä¸€å®¶å…è´¹ã€å¼€æ”¾ã€è‡ªåŠ¨åŒ–çš„å…¬ç›Šæ€§è¯ä¹¦é¢å‘æœºæ„ï¼ˆCAï¼‰ï¼Œç”±äº’è”ç½‘å®‰å…¨ç ”ç©¶ç»„ï¼ˆISRGï¼‰è¿ä½œï¼Œå±äºéè¥åˆ©ç»„ç»‡ã€‚å…¶ç›®æ ‡æ˜¯æ¨å¹¿ HTTPS çš„åº”ç”¨ï¼Œä¸ºæ„å»ºæ›´å®‰å…¨ã€å°Šé‡éšç§çš„äº’è”ç½‘æä¾›å…è´¹è€Œä¾¿æ·çš„æ”¯æŒã€‚</p>
<h2 data-id="heading-1">æ“ä½œæ–¹æ³•</h2>
<p>æ ¹æ®ä¸åŒä½¿ç”¨ç¯å¢ƒï¼ŒLet's Encrypt æä¾›å¤šç§éªŒè¯ä¸è·å–è¯ä¹¦çš„æ–¹å¼ã€‚å¸¸ç”¨å·¥å…·æ˜¯ Certbotï¼Œè¯¦è§æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Feff-certbot.readthedocs.io%2Fen%2Fstable%2F" target="_blank" title="https://eff-certbot.readthedocs.io/en/stable/" ref="nofollow noopener noreferrer">eff-certbot.readthedocs.io/en/stable/</a>ã€‚</p>
<p>åœ¨éƒ¨åˆ†ç¯å¢ƒä¸­ï¼Œå¯é…ç½®å·¥å…·å®šæœŸè‡ªåŠ¨ç»­æœŸï¼Œå‡å°‘ç»´æŠ¤å·¥ä½œã€‚</p>
<p>ç”±äºæœåŠ¡å™¨ç¯å¢ƒè¾ƒä¸ºè€æ—§ï¼Œä¸”éœ€è¦å°†è¯ä¹¦ä¸Šä¼ è‡³é˜¿é‡Œäº‘å¹¶éƒ¨ç½²åˆ°å¤šä¸ªäº‘æœåŠ¡ï¼Œæœ¬æ–‡æš‚é‡‡ç”¨â€œæœ¬åœ°ç”Ÿæˆè¯ä¹¦â€”æ‰‹åŠ¨ä¸Šä¼ ä¸æ›´æ–°â€çš„æ–¹å¼ã€‚</p>
<h3 data-id="heading-2">0x01 åœ¨æœ¬åœ°ç”Ÿæˆè¯ä¹¦</h3>
<p>æœ¬æ–‡ä½¿ç”¨ Docker è¿è¡Œ Certbotï¼Œå‚è§æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Feff-certbot.readthedocs.io%2Fen%2Fstable%2Finstall.html%23alternative-1-docker" target="_blank" title="https://eff-certbot.readthedocs.io/en/stable/install.html#alternative-1-docker" ref="nofollow noopener noreferrer">eff-certbot.readthedocs.io/en/stable/iâ€¦</a>ã€‚</p>
<p>ç”Ÿæˆé€šé…ç¬¦è¯ä¹¦çš„ç¤ºä¾‹å‘½ä»¤å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">docker run -it --<span class="hljs-built_in">rm</span> --name certbot \
  -v <span class="hljs-string">'/Users/mazhuang/some/path/letsencrypt:/etc/letsencrypt'</span> \
  certbot/certbot certonly \
  --preferred-challenges dns \
  --manual \
  --server https://acme-v02.api.letsencrypt.org/directory \
  --key-type rsa --rsa-key-size 2048
</code></pre>
<ul>
<li><code>--preferred-challenges dns</code>ï¼šä½¿ç”¨ DNS æ–¹å¼è¿›è¡ŒåŸŸåéªŒè¯ï¼›</li>
<li><code>--manual</code>ï¼šä»¥äº¤äº’å¼æ–¹å¼è¿›è¡Œè¯¢é—®ä¸æ“ä½œï¼›</li>
<li><code>--key-type rsa --rsa-key-size 2048</code>ï¼šç”Ÿæˆ 2048 ä½ RSA ç§é’¥ï¼ˆéƒ¨åˆ†é˜¿é‡Œäº‘æœåŠ¡ä¸æ”¯æŒé»˜è®¤çš„ ECC è¯ä¹¦ï¼‰ã€‚</li>
</ul>
<p>æ‰§è¡Œåä¼šä¾æ¬¡è¯¢é—®é‚®ç®±ã€åè®®æˆæƒã€åŸŸåç­‰ä¿¡æ¯ï¼Œéšåæç¤ºæ·»åŠ  DNS TXT è®°å½•ä»¥å®ŒæˆåŸŸåæ‰€æœ‰æƒéªŒè¯ï¼ŒæŒ‰æç¤ºæ“ä½œå³å¯ã€‚</p>
<p>ç”ŸæˆæˆåŠŸåï¼Œè¯ä¹¦ä¸ç§é’¥ä¿å­˜åœ¨æŒ‚è½½çš„æœ¬åœ°ç›®å½•ä¸­ï¼Œä¾‹å¦‚ä¸Šè¿°å‘½ä»¤ä¸­çš„ <code>/Users/mazhuang/some/path/letsencrypt/archive/{domain name}</code>ã€‚å„æ–‡ä»¶çš„è¯´æ˜å¯å‚è€ƒï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Feff-certbot.readthedocs.io%2Fen%2Fstable%2Fusing.html%23where-certs" target="_blank" title="https://eff-certbot.readthedocs.io/en/stable/using.html#where-certs" ref="nofollow noopener noreferrer">eff-certbot.readthedocs.io/en/stable/uâ€¦</a>ã€‚</p>
<h3 data-id="heading-3">0x02 ä¸Šä¼ å’Œéƒ¨ç½²è¯ä¹¦</h3>
<p>å°†è¯ä¹¦ä¸Šä¼ åˆ°é˜¿é‡Œäº‘çš„æ•°å­—è¯ä¹¦ç®¡ç†æœåŠ¡ã€‚å¯ä½¿ç”¨å…¶ä¸€é”®éƒ¨ç½²åŠŸèƒ½ï¼ˆä»˜è´¹ï¼‰ï¼Œæˆ–åœ¨å„äº‘æœåŠ¡ä¸­æ‰‹åŠ¨é€‰æ‹©ä½¿ç”¨è¯¥è¯ä¹¦ï¼ˆå…è´¹ï¼‰ï¼ŒæŒ‰éœ€å–ç”¨ã€‚</p>
<h3 data-id="heading-4">0x03 å®šæœŸæ›´æ–°è¯ä¹¦</h3>
<p>Let's Encrypt é¢å‘çš„è¯ä¹¦æœ‰æ•ˆæœŸä¸º 90 å¤©ï¼Œå»ºè®®åœ¨åˆ°æœŸå‰ 30 å¤©å†…æ›´æ–°ã€‚å¯é‡å¤æ­¥éª¤ 0x01 ç”Ÿæˆæ–°è¯ä¹¦ï¼Œç„¶åä¸Šä¼ å¹¶éƒ¨ç½²ã€‚</p>
<h2 data-id="heading-5">æ³¨æ„äº‹é¡¹</h2>
<p>éƒ¨åˆ†æä¸ºè€æ—§çš„å¹³å°æœ‰å¯èƒ½ä¸æ”¯æŒ Let's Encrypt é¢å‘çš„è¯ä¹¦ï¼Œå»ºè®®è¯„ä¼°åå†å†³å®šæ˜¯å¦ä½¿ç”¨ï¼Œå…·ä½“çš„å…¼å®¹æƒ…å†µå¯ä»¥å‚è€ƒï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fletsencrypt.org%2Fzh-cn%2Fdocs%2Fcertificate-compatibility%2F" target="_blank" title="https://letsencrypt.org/zh-cn/docs/certificate-compatibility/" ref="nofollow noopener noreferrer">letsencrypt.org/zh-cn/docs/â€¦</a> ã€‚</p>
<p>æ¯”å¦‚æˆ‘è¿™è¾¹å°±é‡åˆ°äº†å› ä¸ºä½¿ç”¨çš„æ˜¯ JDK 8 çš„ä½äº 141 çš„ç‰ˆæœ¬ï¼Œéƒ¨ç½²å®Œè¯ä¹¦åï¼Œå‘ç° xxl-job å®šæ—¶ä»»åŠ¡æ‰§è¡Œå™¨æ²¡æœ‰æ³¨å†Œä¸Šï¼ŒæŠ¥é”™ <code>sun.security.validator.ValidatorException: PKIX path building failed</code>ã€‚</p>
<p>è§£å†³æ–¹æ³•ï¼š</p>
<ol>
<li>
<p>ä¸‹è½½ ISRG Root X1 è¯ä¹¦</p>
<p>åœ¨è¿™é‡Œå¯ä»¥æ‰¾åˆ°ï¼š <a href="https://link.juejin.cn?target=https%3A%2F%2Fletsencrypt.org%2Fcertificates%2F" target="_blank" title="https://letsencrypt.org/certificates/" ref="nofollow noopener noreferrer">letsencrypt.org/certificateâ€¦</a></p>
<pre><code class="hljs language-sh" lang="sh"><span class="hljs-built_in">cd</span> /opt
get https://letsencrypt.org/certs/isrgrootx1.pem
</code></pre>
</li>
<li>
<p>å¯¼å…¥è¯ä¹¦åˆ° JDK çš„ cacerts ä¸­</p>
<pre><code class="hljs language-sh" lang="sh">keytool -trustcacerts -keystore <span class="hljs-string">"/opt/jdk/jre/lib/security/cacerts"</span> -storepass changeit -noprompt -importcert -<span class="hljs-built_in">alias</span> lets-encrypt-x1 -file <span class="hljs-string">"/opt/isrgrootx1.pem"</span>
</code></pre>
</li>
<li>
<p>é‡å¯æœåŠ¡</p>
</li>
</ol>
<h2 data-id="heading-6">å°ç»“</h2>
<p>ä»¥ä¸Šæ­¥éª¤ç®€å•ã€æˆæœ¬ä¸ºé›¶ã€‚å¯¹å°å…¬å¸å’Œä¸ªäººç½‘ç«™è€Œè¨€ï¼Œæ˜¯èŠ‚çœ SSL è¯ä¹¦è´¹ç”¨çš„å¯è¡Œæ–¹æ¡ˆã€‚</p>
<p>è‹¥ç¯å¢ƒå…è®¸ï¼Œå»ºè®®é…ç½®è‡ªåŠ¨åŒ–ç»­æœŸï¼Œè¿›ä¸€æ­¥é™ä½ç»´æŠ¤æˆæœ¬ï¼ŒæŒ‰éœ€é‡‡ç”¨ã€‚</p>
<h2 data-id="heading-7">å‚è€ƒé“¾æ¥</h2>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fletsencrypt.org%2Fzh-cn%2F" target="_blank" title="https://letsencrypt.org/zh-cn/" ref="nofollow noopener noreferrer">letsencrypt.org/zh-cn/</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Feff-certbot.readthedocs.io%2Fen%2Fstable%2F" target="_blank" title="https://eff-certbot.readthedocs.io/en/stable/" ref="nofollow noopener noreferrer">eff-certbot.readthedocs.io/en/stable/</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¼€å‘ Flutter Plugin ä¹‹ åˆå§‹é…ç½®]]></title>    <link>https://juejin.cn/post/7576929700841717769</link>    <guid>https://juejin.cn/post/7576929700841717769</guid>    <pubDate>2025-11-27T03:21:37.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576929700841717769" data-draft-id="7576928016900587530" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¼€å‘ Flutter Plugin ä¹‹ åˆå§‹é…ç½®"/> <meta itemprop="keywords" content="Flutter"/> <meta itemprop="datePublished" content="2025-11-27T03:21:37.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="zondaçš„åœ°ç›˜"/> <meta itemprop="url" content="https://juejin.cn/user/3474112472422190"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¼€å‘ Flutter Plugin ä¹‹ åˆå§‹é…ç½®
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3474112472422190/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    zondaçš„åœ°ç›˜
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-27T03:21:37.000Z" title="Thu Nov 27 2025 03:21:37 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æœ¬æ–‡ä»¥ Android ä¸ºä¾‹ï¼Œå…·ä½“å¯ä»¥å‚è€ƒ<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.flutter.dev%2Fpackages-and-plugins%2Fdeveloping-packages" target="_blank" title="https://docs.flutter.dev/packages-and-plugins/developing-packages" ref="nofollow noopener noreferrer">å®˜ç½‘</a></p>
</blockquote>
<h2 data-id="heading-0">åˆ›å»ºå‘½ä»¤</h2>
<pre><code class="hljs language-ini" lang="ini">flutter create \
  --org com.get.aaid \
  --project-name get_aaid_plugin \
  <span class="hljs-attr">--platforms</span>=android,ios \
  <span class="hljs-attr">--android-language</span>=kotlin \
  <span class="hljs-attr">--ios-language</span>=swift \
  <span class="hljs-attr">--template</span>=plugin \
  get_aaid_plugin
</code></pre>
<h2 data-id="heading-1">ä½¿ç”¨ example çš„ gradle ç¯å¢ƒï¼Œç¼–å†™å’Œç¼–è¯‘æ’ä»¶ä»£ç </h2>
<h4 data-id="heading-2">é…ç½® example/android/settings.gradle</h4>
<ul>
<li>åœ¨è¯¥æ–‡ä»¶åº•éƒ¨åŠ å…¥ä»£ç :</li>
</ul>
<pre><code class="hljs language-php" lang="php"><span class="hljs-keyword">include</span> <span class="hljs-string">':get_aaid_plugin'</span>
<span class="hljs-title function_ invoke__">project</span>(<span class="hljs-string">':get_aaid_plugin'</span>).projectDir = <span class="hljs-title function_ invoke__">file</span>(<span class="hljs-string">'../../android'</span>)
</code></pre>
<h4 data-id="heading-3">é…ç½® android/build.gradle</h4>
<ol>
<li>åœ¨è¯¥æ–‡ä»¶é¡¶éƒ¨åŠ å…¥ä»£ç ï¼š</li>
</ol>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">group</span> = <span class="hljs-string">"com.get.aaid.get_aaid_plugin"</span>
<span class="hljs-attr">version</span> = <span class="hljs-string">"1.0-SNAPSHOT"</span>

def <span class="hljs-attr">localProperties</span> = new Properties()
def <span class="hljs-attr">localPropertiesFile</span> = rootProject.file(<span class="hljs-string">'local.properties'</span>)
if (localPropertiesFile.exists()) {
    localPropertiesFile.withReader('UTF-8') { reader -&gt;
        localProperties.load(reader)
    }
}
def <span class="hljs-attr">flutterRoot</span> = localProperties.getProperty(<span class="hljs-string">'flutter.sdk'</span>)

... ...

</code></pre>
<ol start="2">
<li>åœ¨è¯¥æ–‡ä»¶åŠ å…¥ä¾èµ–ï¼š</li>
</ol>
<pre><code class="hljs language-bash" lang="bash">dependencies {
    compileOnly files(<span class="hljs-string">"<span class="hljs-variable">$flutterRoot</span>/bin/cache/artifacts/engine/android-arm/flutter.jar"</span>)
    compileOnly <span class="hljs-string">'androidx.annotation:annotation:1.8.0'</span>
    
... ...

</code></pre>
<blockquote>
<p>å¦‚æœè¿˜æ˜¯æŠ¥çº¢ï¼Œæ‰§è¡Œ (fvm) flutter precache å³å¯</p>
</blockquote>
<h2 data-id="heading-4">Flutter å·¥ç¨‹å¼•å…¥ pigeons å³å¯å¼€å§‹ç¼–å†™æ’ä»¶å…·ä½“ä»£ç </h2>
<ul>
<li>å¸¸ç”¨å‘½ä»¤</li>
</ul>
<pre><code class="hljs language-arduino" lang="arduino">dart run pigeon --input pigeons/messages.dart
</code></pre>
<ul>
<li>å‚è€ƒç¤ºä¾‹</li>
</ul>
<blockquote>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fpub.dev%2Fpackages%2Fpigeon" target="_blank" title="https://pub.dev/packages/pigeon" ref="nofollow noopener noreferrer">pub åœ°å€</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fpackages%2Fblob%2Fmain%2Fpackages%2Fpigeon%2Fexample%2FREADME.md" target="_blank" title="https://github.com/flutter/packages/blob/main/packages/pigeon/example/README.md" ref="nofollow noopener noreferrer">github ç¤ºä¾‹</a></p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ¢ç§˜æ–°ä¸€ä»£å‘é‡å­˜å‚¨æ ¼å¼Lance-format (åä¸€) Scanner ä¸æŸ¥è¯¢æ‰§è¡Œ]]></title>    <link>https://juejin.cn/post/7577171133432447017</link>    <guid>https://juejin.cn/post/7577171133432447017</guid>    <pubDate>2025-11-27T02:35:16.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577171133432447017" data-draft-id="7576935292428058666" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ¢ç§˜æ–°ä¸€ä»£å‘é‡å­˜å‚¨æ ¼å¼Lance-format (åä¸€) Scanner ä¸æŸ¥è¯¢æ‰§è¡Œ"/> <meta itemprop="keywords" content="æ¶æ„"/> <meta itemprop="datePublished" content="2025-11-27T02:35:16.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¯­è½å¿ƒç”Ÿ"/> <meta itemprop="url" content="https://juejin.cn/user/2875978147955741"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ¢ç§˜æ–°ä¸€ä»£å‘é‡å­˜å‚¨æ ¼å¼Lance-format (åä¸€) Scanner ä¸æŸ¥è¯¢æ‰§è¡Œ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2875978147955741/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¯­è½å¿ƒç”Ÿ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-27T02:35:16.000Z" title="Thu Nov 27 2025 02:35:16 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ç¬¬11ç« ï¼šScanner ä¸æŸ¥è¯¢æ‰§è¡Œ</h2>
<h3 data-id="heading-1">ğŸ¯ æ ¸å¿ƒæ¦‚è§ˆ</h3>
<p>Scanner æ˜¯ Lance çš„æŸ¥è¯¢æ‰§è¡Œå¼•æ“ï¼Œè´Ÿè´£å°†ç”¨æˆ·çš„æŸ¥è¯¢è½¬æ¢ä¸ºé«˜æ•ˆçš„æ‰§è¡Œè®¡åˆ’ã€‚æœ¬ç« è®²è§£ Scanner çš„æ„å»ºå™¨æ¨¡å¼ã€æŠ•å½±ä¸‹æ¨å’Œè°“è¯ä¸‹æ¨ç­‰ä¼˜åŒ–æŠ€æœ¯ã€‚</p>
<hr/>
<h3 data-id="heading-2">ğŸ“Š ç¬¬ä¸€éƒ¨åˆ†ï¼šScanner çš„æ¶æ„è®¾è®¡</h3>
<h4 data-id="heading-3">What - Scanner æ˜¯ä»€ä¹ˆï¼Ÿ</h4>
<p><strong>å®šä¹‰</strong>ï¼šScanner æ˜¯ä¸€ä¸ªæ„å»ºå™¨æ¨¡å¼çš„æŸ¥è¯¢æ‰§è¡Œå™¨ï¼Œæ”¯æŒçµæ´»çš„æŸ¥è¯¢é…ç½®å’Œä¼˜åŒ–ã€‚</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">pub</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">Scanner</span> {
    dataset: Arc&lt;Dataset&gt;,
    projection: <span class="hljs-type">Option</span>&lt;<span class="hljs-type">Vec</span>&lt;<span class="hljs-type">String</span>&gt;&gt;,    <span class="hljs-comment">// é€‰æ‹©çš„åˆ—</span>
    filters: <span class="hljs-type">Vec</span>&lt;FilterExpr&gt;,           <span class="hljs-comment">// WHERE æ¡ä»¶</span>
    limit: <span class="hljs-type">Option</span>&lt;<span class="hljs-type">usize</span>&gt;,               <span class="hljs-comment">// LIMIT</span>
    offset: <span class="hljs-type">Option</span>&lt;<span class="hljs-type">usize</span>&gt;,              <span class="hljs-comment">// OFFSET</span>
    index_hints: <span class="hljs-type">Vec</span>&lt;IndexHint&gt;,        <span class="hljs-comment">// ç´¢å¼•æç¤º</span>
}

<span class="hljs-keyword">impl</span> <span class="hljs-title class_">Scanner</span> {
    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">project</span>(<span class="hljs-keyword">mut</span> <span class="hljs-keyword">self</span>, columns: <span class="hljs-type">Vec</span>&lt;<span class="hljs-type">String</span>&gt;) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-keyword">Self</span> {
        <span class="hljs-keyword">self</span>.projection = <span class="hljs-title function_ invoke__">Some</span>(columns);
        <span class="hljs-keyword">self</span>
    }
    
    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">filter</span>(<span class="hljs-keyword">mut</span> <span class="hljs-keyword">self</span>, expr: FilterExpr) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-keyword">Self</span> {
        <span class="hljs-keyword">self</span>.filters.<span class="hljs-title function_ invoke__">push</span>(expr);
        <span class="hljs-keyword">self</span>
    }
    
    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">limit</span>(<span class="hljs-keyword">mut</span> <span class="hljs-keyword">self</span>, limit: <span class="hljs-type">usize</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-keyword">Self</span> {
        <span class="hljs-keyword">self</span>.limit = <span class="hljs-title function_ invoke__">Some</span>(limit);
        <span class="hljs-keyword">self</span>
    }
    
    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">try_into_stream</span>(<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;<span class="hljs-keyword">impl</span> <span class="hljs-title class_">Stream</span>&lt;Item = <span class="hljs-type">Result</span>&lt;RecordBatch&gt;&gt;&gt; {
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">plan</span> = <span class="hljs-keyword">self</span>.<span class="hljs-title function_ invoke__">build_execution_plan</span>()?;
        plan.<span class="hljs-title function_ invoke__">execute</span>().<span class="hljs-keyword">await</span>
    }
}
</code></pre>
<h4 data-id="heading-4">Why - ä¸ºä»€ä¹ˆéœ€è¦ Scannerï¼Ÿ</h4>
<h5 data-id="heading-5">é—®é¢˜ï¼šä¸ä¼˜åŒ–çš„æ‰«æ</h5>
<pre><code class="hljs language-sql" lang="sql">ç®€å•æ–¹æ¡ˆï¼š
scan() {
    <span class="hljs-keyword">for</span> <span class="hljs-keyword">each</span> fragment {
        read <span class="hljs-keyword">all</span> columns
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">all</span> <span class="hljs-keyword">rows</span>
    }
}

æ€§èƒ½é—®é¢˜ï¼š
âœ— è¯»å–ä¸éœ€è¦çš„åˆ—ï¼ˆæµªè´¹ IOï¼‰
âœ— ä¸è¿‡æ»¤è¡Œï¼ˆæµªè´¹å†…å­˜ï¼‰
âœ— ä¸ä½¿ç”¨ç´¢å¼•ï¼ˆæ…¢é€Ÿæ‰«æï¼‰

ç¤ºä¾‹ï¼š
<span class="hljs-keyword">SELECT</span> id, name <span class="hljs-keyword">FROM</span> users <span class="hljs-keyword">WHERE</span> age <span class="hljs-operator">&gt;</span> <span class="hljs-number">30</span>

ç®€å•æ–¹æ¡ˆï¼šè¯»å–æ‰€æœ‰ <span class="hljs-number">100</span> åˆ—ï¼Œç„¶åè¿‡æ»¤
é«˜æ•ˆæ–¹æ¡ˆï¼š
<span class="hljs-number">1.</span> è¯†åˆ«åªéœ€è¦ id, name åˆ—
<span class="hljs-number">2.</span> è¿‡æ»¤ age <span class="hljs-operator">&gt;</span> <span class="hljs-number">30</span>
<span class="hljs-number">3.</span> ä½¿ç”¨ age ä¸Šçš„ç´¢å¼•ï¼ˆå¦‚æœæœ‰ï¼‰
æ€§èƒ½æå‡ï¼š<span class="hljs-number">100</span> å€
</code></pre>
<h4 data-id="heading-6">How - Scanner çš„ä¼˜åŒ–ç­–ç•¥</h4>
<h5 data-id="heading-7">1. æŠ•å½±ä¸‹æ¨ï¼ˆProjection Pushdownï¼‰</h5>
<pre><code class="hljs language-bash" lang="bash">ä¼ ç»Ÿåšæ³•ï¼š
SELECT <span class="hljs-built_in">id</span>, name FROM <span class="hljs-built_in">users</span>
    â†“
è¯»å–æ‰€æœ‰åˆ— [<span class="hljs-built_in">id</span>, name, age, email, phone, ...]
    â†“
å†…å­˜ä¸­é€‰æ‹© <span class="hljs-built_in">id</span>, name

é—®é¢˜ï¼šæµªè´¹ IO

Lance ä¼˜åŒ–ï¼š
SELECT <span class="hljs-built_in">id</span>, name FROM <span class="hljs-built_in">users</span>
    â†“
ç¼–è¯‘å™¨åˆ†æï¼šåªéœ€è¦ <span class="hljs-built_in">id</span>, name
    â†“
å‘Šè¯‰æ–‡ä»¶è¯»å–å™¨ï¼šåªè¯»è¿™ä¸¤åˆ—
    â†“
ç£ç›˜ä¸Šè·³è¿‡å…¶ä»–åˆ—
</code></pre>
<p><strong>å®ç°ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">impl</span> <span class="hljs-title class_">Scanner</span> {
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">build_execution_plan</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;ExecutionPlan&gt; {
        <span class="hljs-comment">// è¯†åˆ«éœ€è¦çš„åˆ—</span>
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">required_columns</span> = <span class="hljs-keyword">match</span> &amp;<span class="hljs-keyword">self</span>.projection {
            <span class="hljs-title function_ invoke__">Some</span>(cols) =&gt; cols.<span class="hljs-title function_ invoke__">clone</span>(),
            <span class="hljs-literal">None</span> =&gt; <span class="hljs-keyword">self</span>.dataset.<span class="hljs-title function_ invoke__">schema</span>().<span class="hljs-title function_ invoke__">all_columns</span>(),
        };
        
        <span class="hljs-comment">// ä¸ºäº†è¿‡æ»¤ï¼Œå¯èƒ½éœ€è¦é¢å¤–çš„åˆ—</span>
        <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">columns_for_filter</span> = required_columns.<span class="hljs-title function_ invoke__">clone</span>();
        <span class="hljs-keyword">for</span> <span class="hljs-variable">filter</span> <span class="hljs-keyword">in</span> &amp;<span class="hljs-keyword">self</span>.filters {
            columns_for_filter.<span class="hljs-title function_ invoke__">extend</span>(filter.<span class="hljs-title function_ invoke__">required_columns</span>());
        }
        
        <span class="hljs-comment">// å»é‡</span>
        columns_for_filter.<span class="hljs-title function_ invoke__">sort</span>();
        columns_for_filter.<span class="hljs-title function_ invoke__">dedup</span>();
        
        <span class="hljs-comment">// åˆ›å»ºè¯»å–è®¡åˆ’ï¼Œåªè¯»è¿™äº›åˆ—</span>
        <span class="hljs-title function_ invoke__">Ok</span>(ExecutionPlan::Project {
            columns: columns_for_filter,
            filters: <span class="hljs-keyword">self</span>.filters.<span class="hljs-title function_ invoke__">clone</span>(),
        })
    }
}
</code></pre>
<p><strong>æ€§èƒ½å¯¹æ¯”</strong>ï¼š</p>
<pre><code class="hljs language-diff" lang="diff">1000 ä¸‡è¡Œï¼Œ100 åˆ—çš„è¡¨

æŸ¥è¯¢ï¼šSELECT col_1, col_2 FROM table WHERE col_5 &gt; 100

æ— æŠ•å½±ä¸‹æ¨ï¼š
<span class="hljs-deletion">- è¯»å–æ‰€æœ‰åˆ—ï¼š1GB Ã— 100 = 100GB</span>
<span class="hljs-deletion">- è¿‡æ»¤ï¼šåœ¨å†…å­˜ä¸­è¿‡æ»¤</span>
<span class="hljs-deletion">- æ€§èƒ½ï¼šéœ€è¦ 100GB I/O</span>

æœ‰æŠ•å½±ä¸‹æ¨ï¼š
<span class="hljs-deletion">- è¯»å– col_1, col_2, col_5ï¼š1GB Ã— 3 = 3GB</span>
<span class="hljs-deletion">- è¿‡æ»¤ï¼šåœ¨ç£ç›˜è¯»å–æ—¶åº”ç”¨</span>
<span class="hljs-deletion">- æ€§èƒ½ï¼šåªéœ€è¦ 3GB I/O</span>
<span class="hljs-deletion">- æ€§èƒ½æå‡ï¼š33 å€</span>
</code></pre>
<h5 data-id="heading-8">2. è°“è¯ä¸‹æ¨ï¼ˆPredicate Pushdownï¼‰</h5>
<pre><code class="hljs language-ini" lang="ini">ä¼ ç»Ÿåšæ³•ï¼š
WHERE age &gt; 30 AND <span class="hljs-attr">city</span> = <span class="hljs-string">'NYC'</span>
    â†“
è¯»å–æ‰€æœ‰æ•°æ®
    â†“
å†…å­˜ä¸­åº”ç”¨è¿‡æ»¤

é—®é¢˜ï¼šè¯»äº†ä¸éœ€è¦çš„è¡Œ

Lance ä¼˜åŒ–ï¼š
WHERE age &gt; 30 AND <span class="hljs-attr">city</span> = <span class="hljs-string">'NYC'</span>
    â†“
æ£€æŸ¥æ˜¯å¦æœ‰ç´¢å¼•ï¼š
- age æœ‰ BTree ç´¢å¼•
- city æœ‰ Bitmap ç´¢å¼•
    â†“
ä½¿ç”¨ç´¢å¼•å¿«é€Ÿè·å–å€™é€‰è¡Œ
    â†“
åªè¯»è¿™äº›å€™é€‰è¡Œçš„æ•°æ®
</code></pre>
<p><strong>å®ç°ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">impl</span> <span class="hljs-title class_">Scanner</span> {
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">apply_predicate_pushdown</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;<span class="hljs-type">Vec</span>&lt;<span class="hljs-type">u32</span>&gt;&gt; {
        <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">candidates</span> = (<span class="hljs-number">0</span>..<span class="hljs-keyword">self</span>.dataset.<span class="hljs-title function_ invoke__">row_count</span>()).collect::&lt;<span class="hljs-type">Vec</span>&lt;_&gt;&gt;();
        
        <span class="hljs-keyword">for</span> <span class="hljs-variable">filter</span> <span class="hljs-keyword">in</span> &amp;<span class="hljs-keyword">self</span>.filters {
            <span class="hljs-comment">// å°è¯•ä½¿ç”¨ç´¢å¼•</span>
            <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">Some</span>(index) = <span class="hljs-keyword">self</span>.dataset.<span class="hljs-title function_ invoke__">get_index</span>(&amp;filter.column) {
                <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">matching</span> = index.<span class="hljs-title function_ invoke__">search</span>(&amp;filter.value)?;
                candidates.<span class="hljs-title function_ invoke__">retain</span>(|id| matching.<span class="hljs-title function_ invoke__">contains</span>(id));
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-comment">// æ— ç´¢å¼•ï¼Œéœ€è¦å…¨æ‰«ææ­¤åˆ—</span>
                <span class="hljs-comment">// å»¶è¿Ÿåˆ°å®é™…è¯»å–æ—¶</span>
            }
        }
        
        <span class="hljs-title function_ invoke__">Ok</span>(candidates)
    }
}
</code></pre>
<hr/>
<h3 data-id="heading-9">ğŸ—ï¸ ç¬¬äºŒéƒ¨åˆ†ï¼šæ„å»ºå™¨æ¨¡å¼è¯¦è§£</h3>
<h4 data-id="heading-10">é“¾å¼è°ƒç”¨</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># Python ä¸­çš„æ„å»ºå™¨æ¨¡å¼</span>
results = dataset.scan() \
    .select([<span class="hljs-string">"id"</span>, <span class="hljs-string">"name"</span>, <span class="hljs-string">"age"</span>]) \  <span class="hljs-comment"># æŠ•å½±</span>
    .where(<span class="hljs-string">"age &gt; 30"</span>) \              <span class="hljs-comment"># è¿‡æ»¤ 1</span>
    .where(<span class="hljs-string">"city = 'NYC'"</span>) \          <span class="hljs-comment"># è¿‡æ»¤ 2</span>
    .limit(<span class="hljs-number">10</span>) \                      <span class="hljs-comment"># é™åˆ¶</span>
    .offset(<span class="hljs-number">5</span>) \                      <span class="hljs-comment"># åç§»</span>
    .to_pandas()                      <span class="hljs-comment"># æ‰§è¡Œ</span>
</code></pre>
<h4 data-id="heading-11">å†…éƒ¨è½¬æ¢</h4>
<pre><code class="hljs language-scss" lang="scss">ç”¨æˆ·è°ƒç”¨ï¼š<span class="hljs-built_in">scan</span>()<span class="hljs-selector-class">.select</span>([...])<span class="hljs-selector-class">.where</span>(...)<span class="hljs-selector-class">.limit</span>(<span class="hljs-number">10</span>)

å†…éƒ¨çŠ¶æ€è½¬æ¢ï¼š

<span class="hljs-number">1</span>. <span class="hljs-built_in">scan</span>()
   Scanner { projection: None, filters: [], limit: None }

<span class="hljs-number">2</span>. <span class="hljs-selector-class">.select</span>(["id", "name"])
   Scanner { projection: <span class="hljs-built_in">Some</span>([<span class="hljs-string">"id"</span>, <span class="hljs-string">"name"</span>]), filters: [], limit: None }

<span class="hljs-number">3</span>. <span class="hljs-selector-class">.where</span>("age &gt; <span class="hljs-number">30</span>")
   Scanner { projection: <span class="hljs-built_in">Some</span>([<span class="hljs-string">"id"</span>, <span class="hljs-string">"name"</span>]), filters: [age &gt; <span class="hljs-number">30</span>], limit: None }

<span class="hljs-number">4</span>. <span class="hljs-selector-class">.limit</span>(<span class="hljs-number">10</span>)
   Scanner { projection: <span class="hljs-built_in">Some</span>([<span class="hljs-string">"id"</span>, <span class="hljs-string">"name"</span>]), filters: [age &gt; <span class="hljs-number">30</span>], limit: <span class="hljs-built_in">Some</span>(<span class="hljs-number">10</span>) }

<span class="hljs-number">5</span>. <span class="hljs-selector-class">.to_pandas</span>()  <span class="hljs-comment">// æ‰§è¡Œ</span>
   æ„å»ºæ‰§è¡Œè®¡åˆ’ â†’ æ‰§è¡Œ â†’ è½¬æ¢ä¸º Pandas
</code></pre>
<h4 data-id="heading-12">ä¼˜åŒ–é‡æ’</h4>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">impl</span> <span class="hljs-title class_">Scanner</span> {
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">optimize_filters</span>(&amp;<span class="hljs-keyword">mut</span> <span class="hljs-keyword">self</span>) {
        <span class="hljs-comment">// ä¼˜åŒ– 1ï¼šè°“è¯é‡æ’ï¼ˆé«˜é€‰æ‹©æ€§çš„æ”¾å‰é¢ï¼‰</span>
        <span class="hljs-keyword">self</span>.filters.<span class="hljs-title function_ invoke__">sort_by_key</span>(|f| {
            <span class="hljs-comment">// ä¼°è®¡é€‰æ‹©æ€§ï¼ˆè¿”å›çš„è¡Œæ•°ç™¾åˆ†æ¯”ï¼‰</span>
            <span class="hljs-keyword">self</span>.<span class="hljs-title function_ invoke__">estimate_selectivity</span>(f)
        });
        
        <span class="hljs-comment">// ä¼˜åŒ– 2ï¼šåˆå¹¶ç›¸åŒåˆ—çš„è¿‡æ»¤</span>
        <span class="hljs-keyword">self</span>.filters = <span class="hljs-keyword">self</span>.<span class="hljs-title function_ invoke__">merge_filters_on_same_column</span>(&amp;<span class="hljs-keyword">self</span>.filters);
        
        <span class="hljs-comment">// ä¼˜åŒ– 3ï¼šæ£€æŸ¥å¯ä»¥ç”¨ç´¢å¼•çš„è¿‡æ»¤</span>
        <span class="hljs-keyword">self</span>.<span class="hljs-title function_ invoke__">identify_index_compatible_filters</span>();
    }
}
</code></pre>
<hr/>
<h3 data-id="heading-13">ğŸ’¡ ç¬¬ä¸‰éƒ¨åˆ†ï¼šæŸ¥è¯¢ä¼˜åŒ–å®ä¾‹</h3>
<h4 data-id="heading-14">ä¾‹å­ 1ï¼šç®€å•æŸ¥è¯¢</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> lance

users = lance.<span class="hljs-built_in">open</span>(<span class="hljs-string">"users.lance"</span>)

<span class="hljs-comment"># æŸ¥è¯¢</span>
results = users.scan() \
    .select([<span class="hljs-string">"id"</span>, <span class="hljs-string">"name"</span>]) \
    .where(<span class="hljs-string">"age &gt; 30"</span>) \
    .to_pandas()

<span class="hljs-comment"># Scanner æ‰§è¡Œè®¡åˆ’ï¼š</span>
<span class="hljs-comment"># 1. è¯†åˆ«éœ€è¦çš„åˆ—ï¼š{id, name, age}</span>
<span class="hljs-comment"># 2. æ£€æŸ¥è¿‡æ»¤æ¡ä»¶ï¼šage &gt; 30</span>
<span class="hljs-comment">#    - age æœ‰ BTree ç´¢å¼•</span>
<span class="hljs-comment">#    - ä½¿ç”¨ç´¢å¼•è·å–å€™é€‰è¡Œ</span>
<span class="hljs-comment"># 3. è¯»å–è®¡åˆ’ï¼š</span>
<span class="hljs-comment">#    - ä½¿ç”¨ç´¢å¼•æ‰¾å‡º age &gt; 30 çš„è¡Œ</span>
<span class="hljs-comment">#    - ä»ç£ç›˜è¯»å–è¿™äº›è¡Œçš„ id, name, age åˆ—</span>
<span class="hljs-comment">#    - è¿‡æ»¤ age &gt; 30</span>
<span class="hljs-comment">#    - æŠ•å½± id, name</span>
<span class="hljs-comment"># 4. æ‰§è¡Œ</span>

<span class="hljs-comment"># æ€§èƒ½ï¼š</span>
<span class="hljs-comment"># 100ä¸‡è¡Œè¡¨ï¼Œåªè¿”å›10ä¸‡è¡Œ</span>
<span class="hljs-comment"># æ— ä¼˜åŒ–ï¼šè¯» 100ä¸‡è¡Œ Ã— 3åˆ— = 3GB I/O</span>
<span class="hljs-comment"># æœ‰ä¼˜åŒ–ï¼šè¯» 10ä¸‡è¡Œ Ã— 3åˆ— = 300MB I/O</span>
<span class="hljs-comment"># æå‡ï¼š10 å€</span>
</code></pre>
<h4 data-id="heading-15">ä¾‹å­ 2ï¼šå‘é‡æœç´¢ + è¿‡æ»¤</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np

products = lance.<span class="hljs-built_in">open</span>(<span class="hljs-string">"products.lance"</span>)

<span class="hljs-comment"># å‘é‡æœç´¢ + æ ‡é‡è¿‡æ»¤</span>
query = np.random.rand(<span class="hljs-number">768</span>).astype(np.float32)

results = products.search(query, k=<span class="hljs-number">100</span>) \
    .where(<span class="hljs-string">"price &lt; 500 AND category = 'electronics'"</span>) \
    .to_pandas()

<span class="hljs-comment"># Scanner æ‰§è¡Œè®¡åˆ’ï¼š</span>
<span class="hljs-comment"># 1. å‘é‡æœç´¢ï¼ˆä½¿ç”¨ IVF_PQ ç´¢å¼•ï¼‰</span>
<span class="hljs-comment">#    - å¾—åˆ° 1000 ä¸ªå€™é€‰ï¼ˆk Ã— 10ï¼‰</span>
<span class="hljs-comment"># 2. æ ‡é‡è¿‡æ»¤</span>
<span class="hljs-comment">#    - ä½¿ç”¨ price BTree ç´¢å¼•</span>
<span class="hljs-comment">#    - ä½¿ç”¨ category Bitmap ç´¢å¼•</span>
<span class="hljs-comment">#    - å¾—åˆ° 200 ä¸ªå€™é€‰</span>
<span class="hljs-comment"># 3. ç²¾ç¡®è·ç¦»è®¡ç®—å’Œæ’åº</span>
<span class="hljs-comment">#    - è®¡ç®— 200 ä¸ªå‘é‡çš„ç²¾ç¡®è·ç¦»</span>
<span class="hljs-comment">#    - è¿”å›å‰ 100 ä¸ª</span>

<span class="hljs-comment"># æ€§èƒ½ï¼š</span>
<span class="hljs-comment"># 1000ä¸‡å•†å“ï¼Œè¿”å› 100 ä¸ª</span>
<span class="hljs-comment"># æ— ç´¢å¼•ï¼šæ‰«æ 1000ä¸‡ï¼Œè®¡ç®—è·ç¦»</span>
<span class="hljs-comment"># æœ‰ç´¢å¼•ï¼šæ‰«æ 1000ï¼ˆå‘é‡ç´¢å¼•ï¼‰ï¼Œ200ï¼ˆæ ‡é‡ï¼‰ï¼Œè®¡ç®— 200</span>
<span class="hljs-comment"># æå‡ï¼š50 å€ï¼ˆå‘é‡ï¼‰+ 5 å€ï¼ˆæ ‡é‡ï¼‰= 250 å€</span>
</code></pre>
<hr/>
<h3 data-id="heading-16">ğŸ“Š æ‰§è¡Œæµç¨‹ç¤ºæ„</h3>
<pre><code class="hljs language-ini" lang="ini">ç”¨æˆ·æŸ¥è¯¢
    â†“
Scanner æ„å»º
    â†“
ä¼˜åŒ–å™¨åˆ†æ
â”œâ”€ æŠ•å½±åˆ†æï¼šéœ€è¦å“ªäº›åˆ—
â”œâ”€ è¿‡æ»¤åˆ†æï¼šå¯ç”¨çš„ç´¢å¼•
â””â”€ æˆæœ¬ä¼°è®¡ï¼šé€‰æ‹©æœ€ä¼˜æ‰§è¡Œè·¯å¾„
    â†“
æ‰§è¡Œè®¡åˆ’ç”Ÿæˆ
â”œâ”€ ç´¢å¼•æ‰«æï¼ˆå¦‚æœæœ‰ç´¢å¼•ï¼‰
â”œâ”€ åˆ—è¯»å–ï¼ˆæŠ•å½±ä¸‹æ¨ï¼‰
â”œâ”€ è¿‡æ»¤åº”ç”¨ï¼ˆè°“è¯ä¸‹æ¨ï¼‰
â””â”€ ç»“æœå¤„ç†ï¼ˆæ’åºã€èšåˆï¼‰
    â†“
å¹¶è¡Œæ‰§è¡Œ
â”œâ”€ Fragment 1: <span class="hljs-section">[æ‰§è¡Œè®¡åˆ’]</span>
â”œâ”€ Fragment 2: <span class="hljs-section">[æ‰§è¡Œè®¡åˆ’]</span>
â””â”€ Fragment N: <span class="hljs-section">[æ‰§è¡Œè®¡åˆ’]</span>
    â†“
åˆå¹¶ç»“æœ
    â†“
è¿”å›ç»™ç”¨æˆ·
</code></pre>
<hr/>
<h3 data-id="heading-17">ğŸ“š æ€»ç»“</h3>
<p>Scanner é€šè¿‡ä»¥ä¸‹æœºåˆ¶å®ç°é«˜æ•ˆæŸ¥è¯¢ï¼š</p>
<ol>
<li><strong>æŠ•å½±ä¸‹æ¨</strong>ï¼šåªè¯»éœ€è¦çš„åˆ—</li>
<li><strong>è°“è¯ä¸‹æ¨</strong>ï¼šå°½æ—©è¿‡æ»¤è¡Œ</li>
<li><strong>ç´¢å¼•åˆ©ç”¨</strong>ï¼šä½¿ç”¨å¯ç”¨çš„ç´¢å¼•åŠ é€Ÿ</li>
<li><strong>æˆæœ¬ä¼˜åŒ–</strong>ï¼šé€‰æ‹©æœ€ä¼˜çš„æ‰§è¡Œè®¡åˆ’</li>
<li><strong>å¹¶è¡Œæ‰§è¡Œ</strong>ï¼šå¤š Fragment å¹¶è¡Œå¤„ç†</li>
</ol>
<p>ä¸‹ä¸€ç« å°†è®²è§£æ•°æ®å†™å…¥æµç¨‹ï¼Œå³æ•°æ®å¦‚ä½•è¿›å…¥ Lanceã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¿å§†çº§ï¼Oracleâ†’è¾¾æ¢¦é›¶åœæœºè¿ç§»æ”»ç•¥ï¼Œ5 æ­¥æ“ä½œï¼Œä¸šåŠ¡é›¶å½±å“ï¼]]></title>    <link>https://juejin.cn/post/7576923573778104362</link>    <guid>https://juejin.cn/post/7576923573778104362</guid>    <pubDate>2025-11-27T02:36:23.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576923573778104362" data-draft-id="7577171133432430633" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¿å§†çº§ï¼Oracleâ†’è¾¾æ¢¦é›¶åœæœºè¿ç§»æ”»ç•¥ï¼Œ5 æ­¥æ“ä½œï¼Œä¸šåŠ¡é›¶å½±å“ï¼"/> <meta itemprop="keywords" content="æ•°æ®åº“,ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2025-11-27T02:36:23.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="NineData"/> <meta itemprop="url" content="https://juejin.cn/user/1684900320129816"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¿å§†çº§ï¼Oracleâ†’è¾¾æ¢¦é›¶åœæœºè¿ç§»æ”»ç•¥ï¼Œ5 æ­¥æ“ä½œï¼Œä¸šåŠ¡é›¶å½±å“ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1684900320129816/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    NineData
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-27T02:36:23.000Z" title="Thu Nov 27 2025 02:36:23 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>è·ç¦» 2027 å¹´è¾¾æˆ 100% ä¿¡åˆ›æ›¿ä»£çš„æ—¶é—´ç›®æ ‡ä»…å‰© 2 å¹´ä¸åˆ°çš„æ—¶é—´ï¼Œè¿˜åœ¨ä½¿ç”¨ Oracle çš„ä¼ä¸šï¼Œéœ€è¦å°½å¿«æä¸Šæ—¥ç¨‹äº†ã€‚æœ¬æ–‡é’ˆå¯¹ä½¿ç”¨ Oracle çš„ä¼ä¸šï¼Œä»‹ç»å¦‚ä½•è½»æ¾å®ç° Oracle åˆ°è¾¾æ¢¦æ•°æ®åº“çš„ä¸åœæœºè¿ç§»ã€‚</p>
<p>çœŸæ­£åšè¿‡ Oracle &gt; è¾¾æ¢¦è¿ç§»çš„äººéƒ½çŸ¥é“ï¼Œæœ€å¤§çš„æŒ‘æˆ˜ä¸åœ¨å·¥å…·ï¼Œè€Œæ˜¯è´¯ç©¿äº†è°ƒç ”ã€è¯„ä¼°ã€æ–¹æ¡ˆé€‰æ‹©ã€è¯­æ³•æ”¹é€ ã€åˆ†æ‰¹è¿ç§»ã€å®æ—¶åŒæ­¥ã€æ ¡éªŒã€è°ƒä¼˜åœ¨å†…çš„å¤æ‚å·¥ç¨‹ã€‚è¿™ä½¿å¾—è¿ç§»è¿‡ç¨‹ä¸­çš„ä¸ç¡®å®šå› ç´ æå¤šã€‚</p>
<p>å¹¶ä¸” Oracle æ™®éç”¨ä½œä¼ä¸šçš„çº¿ä¸Šä¸šåŠ¡æ”¯æ’‘ï¼Œ<strong>ä¸ºäº†ä¸å½±å“ä¸šåŠ¡è¿è¡Œï¼Œè¿ç§»å¿…é¡»åšåˆ°ä¸åœæœºã€å¯å›æ»šã€æ•°æ®ä¸€è‡´æ€§å¼ºã€é£é™©å¯æ§ã€‚</strong></p>
<p>åŸºäºä¸Šè¿°æŒ‘æˆ˜ï¼ŒNineData åœ¨è¿‘æœŸå·²å®Œå…¨æ”¯æŒäº† Oracle åˆ°è¾¾æ¢¦æ•°æ®åº“çš„ä¸åœæœºè¿ç§»ï¼åªè¦ä½ â€œæƒ³è¿â€ï¼Œå°±é©¬ä¸Šâ€œèƒ½è¿â€ï¼NineData å·²ç»æ›¿ä½ è§£å†³äº†å‡ ä¹æ‰€æœ‰çš„æŠ€æœ¯éš¾é¢˜ã€‚</p>
<h2 data-id="heading-0">NineData æ›¿ä½ è§£å†³äº†å“ªäº›é—®é¢˜ï¼Ÿ</h2>
<p>é¦–å…ˆæ¥è°ˆä¸€ä¸‹ NineData çš„ä»·å€¼ï¼Œåœ¨ä» Oracle è¿ç§»åˆ°è¾¾æ¢¦è¿™ä»¶äº‹æƒ…ä¸Šï¼ŒNineData æŠŠæœªæ¥éœ€è¦å‡ ä¸ªæœˆã€ç”šè‡³åŠå¹´æ‰èƒ½å®Œæˆçš„è¿ç§»å·¥ä½œï¼Œå‹ç¼©åˆ°å‡ å¤©ç”šè‡³å‡ å°æ—¶ï¼ˆæŒ‰æ•°æ®é‡è®¡ï¼‰ï¼Œå¹¶ä¸”ä¸æ¯«ä¸å½±å“çº¿ä¸Šä¸šåŠ¡ã€‚</p>
<p>ä¸‹é¢æ˜¯ NineData ä¸ºä½ è§£å†³çš„æ ¸å¿ƒé—®é¢˜ï¼š</p>
<ul>
<li><strong>å…¨è‡ªåŠ¨ç»“æ„è½¬æ¢</strong>ï¼šé€šè¿‡å†…éƒ¨å®šä¹‰çš„è§„åˆ™ï¼Œå…¨è‡ªåŠ¨å®Œæˆ Oracle åˆ°è¾¾æ¢¦çš„å­—æ®µç»“æ„è½¬æ¢ã€‚æ— éœ€æ‰‹åŠ¨åœ¨ç›®æ ‡å»ºè¡¨ã€‚</li>
<li><strong>TB çº§æ•°æ®çš„å…¨é‡å¿«é€Ÿè¿ç§»</strong>ï¼šé€šè¿‡å¤šåˆ†ç‰‡å¹¶è¡Œä¼ è¾“ä¼˜åŒ–ä¼ è¾“é€Ÿåº¦ï¼Œå¹¶æ”¯æŒæ–­ç‚¹ç»­ä¼ åŠŸèƒ½ï¼Œå®ç°æµ·é‡æ•°æ®ç¨³å®šè¿ç§»ã€‚</li>
<li><strong>è¿ç§»è¿‡ç¨‹é›¶åœæœº</strong>ï¼šåŸºäºæºç«¯æ—¥å¿—å®æ—¶æ•è·æ–°å¢æ•°æ®ï¼Œå¹¶åŒæ­¥è‡³ç›®æ ‡ã€‚å¯¹æºç«¯å½±å“å‡ ä¹ä¸º 0ï¼Œä¸å½±å“ä¸šåŠ¡ã€‚</li>
<li><strong>å…¨è‡ªåŠ¨ä¸€è‡´æ€§éªŒè¯</strong>ï¼šè¿ç§»å®Œæˆåï¼Œå¯¹æºç«¯å’Œç›®æ ‡ç«¯çš„æ•°æ®æ‰§è¡Œå…¨é‡ä¸€è‡´æ€§å¯¹æ¯”ï¼Œå·®å¼‚å®šä½åˆ°è¡Œã€åˆ—çº§åˆ«ï¼Œå¹¶æä¾›å¯ç›´æ¥æ‰§è¡Œçš„ä¿®å¤ SQLã€‚</li>
<li><strong>ä»»åŠ¡ç›‘æ§ä¸å¤±è´¥å‘Šè­¦</strong>ï¼šæä¾›å…¨é“¾è·¯ä»»åŠ¡ç›‘æ§ + å¤±è´¥å‘Šè­¦ä½“ç³»ï¼Œè¿ç§»è¿‡ç¨‹ä¸­ä»»ä½•å¼‚å¸¸ï¼Œä½ éƒ½å¯ä»¥ç¬¬ä¸€æ—¶é—´çŸ¥é“ï¼Œä»¥ç¬¬ä¸€æ—¶é—´è¿›è¡Œä¿®å¤ã€‚</li>
<li><strong>å…¨å›¾å½¢åŒ–æ“ä½œç•Œé¢</strong>ï¼šæ‰€æœ‰è¿ç§»è„šæœ¬å’Œæµç¨‹é€šé€šå›¾å½¢åŒ–ï¼Œå¯¹è±¡é…ç½®ã€ç›‘æ§å¤§å±ã€ä¸€é”®å¯åœã€é”™è¯¯å‘Šè­¦ç­‰ç­‰ï¼Œåšåˆ°æœ‰æ‰‹å°±ä¼šç”¨ã€‚</li>
</ul>
<h2 data-id="heading-1">æ“ä½œç¤ºä¾‹</h2>
<p>ç®€å•å‡ ä¸ªæ­¥éª¤å³å¯å®Œæˆå¤åˆ¶ä»»åŠ¡çš„é…ç½®ã€‚</p>
<ol>
<li>é€‰æ‹©æºå’Œç›®æ ‡æ•°æ®æºï¼Œå¼€å¯å¢é‡å¤åˆ¶ã€‚</li>
</ol>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d43aa833d0c54ca98a70c787e06cb0c7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTmluZURhdGE=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764815783&amp;x-signature=3X%2FB8c9fCP47ZOesl07VIZnyKGU%3D" alt="DM_001.PNG" loading="lazy"/></p>
<ol start="2">
<li>é€‰æ‹©éœ€è¦å¤åˆ¶çš„æ•°æ®åº“å¯¹è±¡ï¼ˆSchema/åº“/è¡¨/åˆ—ï¼‰ã€‚</li>
</ol>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2536450893434e17865fb8d1fe7da7ac~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTmluZURhdGE=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764815783&amp;x-signature=WstBTfJdfOVO5fmkTrPEoFOyaL4%3D" alt="DM_002.PNG" loading="lazy"/></p>
<ol start="3">
<li>é…ç½®æ˜ å°„å…³ç³»ã€‚</li>
</ol>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9089140904774456b80661289854b118~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTmluZURhdGE=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764815783&amp;x-signature=5%2B9%2FpANYO7bb0eMfqE%2FTGset%2Ba8%3D" alt="DM_003.PNG" loading="lazy"/></p>
<ol start="4">
<li>ç³»ç»Ÿè‡ªåŠ¨é¢„æ£€æŸ¥ã€‚</li>
</ol>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0615dfd028df4fa5a0ce964023471f03~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTmluZURhdGE=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764815783&amp;x-signature=zdPf3rPMIOGLdQPI6kp%2BW0Hlx98%3D" alt="DM_004.PNG" loading="lazy"/></p>
<ol start="5">
<li>å®æ—¶å¤åˆ¶ä»»åŠ¡å¯åŠ¨æˆåŠŸï¼</li>
</ol>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6258c75819394d8cbe0a37b4c354c59c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTmluZURhdGE=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764815783&amp;x-signature=yG%2FNbMwdN84qqNd07ylHmhukNqM%3D" alt="DM_005.PNG" loading="lazy"/></p>
<p>è‡³æ­¤ï¼Œé…ç½®å·¥ä½œå·²ç»å…¨éƒ¨å®Œæˆï¼Â å‰©ä¸‹çš„å°±äº¤ç»™ NineData ä¼šè‡ªåŠ¨å®Œæˆï¼Œç„¶ååœ¨ä¸šåŠ¡ä½å³°æœŸæ‰‹åŠ¨åˆ‡æ¢ä¸šåŠ¡å³å¯ã€‚</p>
<h2 data-id="heading-2">å®‰å…¨ä¸åˆè§„</h2>
<p>åœ¨å›½äº§åŒ–è¿ç§»ä¸­ï¼Œæ•°æ®å®‰å…¨æ°¸è¿œæ˜¯ç¬¬ä¸€ä½çš„ã€‚</p>
<p>ä» Oracle è¯»å–æ•°æ®ã€ä¼ è¾“æ•°æ®ã€å†™å…¥è¾¾æ¢¦æ•°æ®åº“ï¼Œå†åˆ°æœ€ç»ˆåˆ‡æ¢ï¼Œæ¯ä¸€ä¸ªç¯èŠ‚éƒ½å¿…é¡»åšåˆ°å®‰å…¨å¯æ§ã€æœ€å°æƒé™ã€å…¨ç¨‹å¯è¿½æº¯ã€‚</p>
<p>NineData é’ˆå¯¹ Oracle &gt; è¾¾æ¢¦è¿ç§»åœºæ™¯ï¼Œæ„å»ºäº†å¤šå±‚å®‰å…¨ä½“ç³»ï¼Œç¡®ä¿æ•´ä¸ªè¿ç§»è¿‡ç¨‹ç¨³å¦¥å¯é ï¼š</p>
<ul>
<li><strong>æ•°æ®ä¼ è¾“å…¨ç¨‹åŠ å¯†</strong>ï¼šæ— è®ºæ˜¯è·¨ IDCã€è·¨äº‘ï¼Œè¿˜æ˜¯æœ¬åœ°ç½‘ç»œè¿ç§»ï¼Œéƒ½ç¡®ä¿æ•°æ®ä¸è¢«çªƒå–ã€ç¯¡æ”¹ã€‚</li>
<li><strong>éš”ç¦»å¼ä»»åŠ¡ç®¡ç†</strong>ï¼šåªæœ‰å…·å¤‡ç›®æ ‡æ•°æ®æºå¯¹åº”è®¿é—®æƒé™çš„è§’è‰²æ‰èƒ½åˆ›å»ºã€ä¿®æ”¹è¿ç§»ä»»åŠ¡ï¼Œé¿å…â€œè¯¯æ“ä½œâ€å’Œâ€œè¶Šæƒæ“ä½œâ€ã€‚</li>
<li><strong>å…¨é“¾è·¯å®¡è®¡</strong>ï¼šä»ç»“æ„è½¬æ¢ã€æ•°æ®è¿ç§»åˆ°å¢é‡åŒæ­¥ï¼Œæ‰€æœ‰æ“ä½œå‡å¯è¿½è¸ªå’Œå›æ”¾ï¼Œæ»¡è¶³é‡‘èã€æ”¿åŠ¡ç­‰å¯¹å®¡è®¡åˆè§„çš„ä¸¥è‹›è¦æ±‚ã€‚</li>
</ul>
<p>å…¬å¸å±‚é¢ï¼ŒNineData å·²é€šè¿‡å¤šé¡¹å›½é™…ä¸å›½å†…æƒå¨å®‰å…¨è®¤è¯ï¼š</p>
<p>âœ… ISO/IEC 27001 ä¿¡æ¯å®‰å…¨ç®¡ç†ä½“ç³»è®¤è¯</p>
<p>âœ… ISO/IEC 27017 äº‘å®‰å…¨ç®¡ç†ä½“ç³»è®¤è¯</p>
<p>âœ… ISO/IEC 20000 ä¿¡æ¯æŠ€æœ¯æœåŠ¡ç®¡ç†ä½“ç³»è®¤è¯</p>
<p>âœ… ISO 9001 è´¨é‡ç®¡ç†ä½“ç³»è®¤è¯</p>
<p>âœ… å›½å®¶ç½‘ç»œå®‰å…¨ç­‰çº§ä¿æŠ¤ä¸‰çº§ï¼ˆç­‰ä¿ä¸‰çº§ï¼‰è®¤è¯</p>
<p>è¿™äº›è®¤è¯ç¡®ä¿ä½ åœ¨è¿›è¡Œæ•°æ®è¿ç§»æ—¶ï¼Œä¸ä»…æµç¨‹å®‰å…¨ã€æ•°æ®å®‰å…¨ï¼Œè€Œä¸”å¹³å°æœ¬èº«ä¹Ÿå…·å¤‡ä¸¥æ ¼çš„è¡Œä¸šçº§å®‰å…¨ä¿è¯ã€‚æ— è®ºæ•°æ®è§„æ¨¡å¤šå¤§ï¼Œéƒ½èƒ½æ”¾å¿ƒã€å®‰å¿ƒã€åˆè§„åœ°å®Œæˆå…³é”®æ•°æ®çš„è¿ç§»ä¸åˆ‡æ¢ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ¢ç§˜æ–°ä¸€ä»£å‘é‡å­˜å‚¨æ ¼å¼Lance-format (åäºŒ) æ•°æ®å†™å…¥æµç¨‹]]></title>    <link>https://juejin.cn/post/7576888607481085971</link>    <guid>https://juejin.cn/post/7576888607481085971</guid>    <pubDate>2025-11-27T02:38:18.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576888607481085971" data-draft-id="7576923573778120746" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ¢ç§˜æ–°ä¸€ä»£å‘é‡å­˜å‚¨æ ¼å¼Lance-format (åäºŒ) æ•°æ®å†™å…¥æµç¨‹"/> <meta itemprop="keywords" content="æ¶æ„"/> <meta itemprop="datePublished" content="2025-11-27T02:38:18.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¯­è½å¿ƒç”Ÿ"/> <meta itemprop="url" content="https://juejin.cn/user/2875978147955741"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ¢ç§˜æ–°ä¸€ä»£å‘é‡å­˜å‚¨æ ¼å¼Lance-format (åäºŒ) æ•°æ®å†™å…¥æµç¨‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2875978147955741/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¯­è½å¿ƒç”Ÿ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-27T02:38:18.000Z" title="Thu Nov 27 2025 02:38:18 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ç¬¬12ç« ï¼šæ•°æ®å†™å…¥æµç¨‹</h2>
<h3 data-id="heading-1">ğŸ¯ æ ¸å¿ƒæ¦‚è§ˆ</h3>
<p>å†™å…¥æ˜¯æ•°æ®è¿›å…¥ Lance çš„å…³é”®è·¯å¾„ã€‚æœ¬ç« è¯¦è§£ WriteParams é…ç½®ã€æ‰¹é‡å†™å…¥ä¼˜åŒ–ã€äº‹åŠ¡å¤„ç†å’Œæäº¤æœºåˆ¶ã€‚</p>
<hr/>
<h3 data-id="heading-2">ğŸ“Š ç¬¬ä¸€éƒ¨åˆ†ï¼šWriteParams é…ç½®</h3>
<h4 data-id="heading-3">What - WriteParams æ˜¯ä»€ä¹ˆï¼Ÿ</h4>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">pub</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">WriteParams</span> {
    <span class="hljs-comment">/// æœ€å¤§è¡Œæ•°/Fragment</span>
    <span class="hljs-keyword">pub</span> max_rows_per_file: <span class="hljs-type">u32</span>,
    
    <span class="hljs-comment">/// æœ€å¤§å­—èŠ‚æ•°/Fragment  </span>
    <span class="hljs-keyword">pub</span> max_bytes_per_file: <span class="hljs-type">u64</span>,
    
    <span class="hljs-comment">/// å†™å…¥æ¨¡å¼</span>
    <span class="hljs-keyword">pub</span> mode: WriteMode,  <span class="hljs-comment">// Create, Append, Overwrite</span>
    
    <span class="hljs-comment">/// å¹¶å‘å†™å…¥ Fragment æ•°</span>
    <span class="hljs-keyword">pub</span> max_concurrent_writes: <span class="hljs-type">usize</span>,
    
    <span class="hljs-comment">/// ç¼–ç é…ç½®</span>
    <span class="hljs-keyword">pub</span> encoding_config: EncodingConfig,
}

<span class="hljs-keyword">pub</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">WriteMode</span> {
    Create,      <span class="hljs-comment">// åˆ›å»ºæ–°æ•°æ®é›†</span>
    Append,      <span class="hljs-comment">// è¿½åŠ åˆ°ç°æœ‰æ•°æ®é›†</span>
    Overwrite,   <span class="hljs-comment">// è¦†ç›–ç°æœ‰æ•°æ®é›†</span>
}
</code></pre>
<h4 data-id="heading-4">Why - WriteParams ä¸ºä»€ä¹ˆé‡è¦ï¼Ÿ</h4>
<pre><code class="hljs language-makefile" lang="makefile">æ€§èƒ½å½±å“åˆ†æï¼š

åœºæ™¯ï¼šå†™å…¥ 1 äº¿è¡Œæ•°æ®

é…ç½® Aï¼ˆé»˜è®¤ï¼‰ï¼š
<span class="hljs-section">max_rows_per_file: 1000000</span>
<span class="hljs-section">max_bytes_per_file: 256MB</span>

Fragment æ•°ï¼š~100 ä¸ª
å†™å…¥æ—¶é—´ï¼š~10 åˆ†é’Ÿ
å†…å­˜ä½¿ç”¨ï¼š~1GB

é…ç½® Bï¼ˆå° Fragmentï¼‰ï¼š
<span class="hljs-section">max_rows_per_file: 100000</span>
<span class="hljs-section">max_bytes_per_file: 25MB</span>

Fragment æ•°ï¼š~1000 ä¸ª
å†™å…¥æ—¶é—´ï¼š~15 åˆ†é’Ÿï¼ˆæ›´å¤šå¼€é”€ï¼‰
å†…å­˜ä½¿ç”¨ï¼š~100MBï¼ˆæ›´ä½ï¼‰
æŸ¥è¯¢æ—¶é—´ï¼šæ›´å¿«ï¼ˆæ›´å°çš„ç¼“å­˜ï¼‰

é…ç½® Cï¼ˆå¤§ Fragmentï¼‰ï¼š
<span class="hljs-section">max_rows_per_file: 10000000</span>
<span class="hljs-section">max_bytes_per_file: 2.5GB</span>

Fragment æ•°ï¼š~10 ä¸ª
å†™å…¥æ—¶é—´ï¼š~5 åˆ†é’Ÿï¼ˆæ›´å¿«ï¼‰
å†…å­˜ä½¿ç”¨ï¼š~5GB
æŸ¥è¯¢æ—¶é—´ï¼šå¯èƒ½æ›´æ…¢ï¼ˆç¼“å­˜å‹åŠ›ï¼‰

é€‰æ‹©æ ‡å‡†ï¼š
- å®æ—¶æ•°æ®ï¼šå° Fragmentï¼ˆæ–¹ä¾¿æ›´æ–°ï¼‰
- æ‰¹é‡æ•°æ®ï¼šå¤§ Fragmentï¼ˆå†™å…¥å¿«ï¼‰
</code></pre>
<hr/>
<h3 data-id="heading-5">ğŸ—ï¸ ç¬¬äºŒéƒ¨åˆ†ï¼šæ‰¹é‡å†™å…¥ä¼˜åŒ–</h3>
<h4 data-id="heading-6">å†™å…¥æµç¨‹</h4>
<pre><code class="hljs language-arduino" lang="arduino">ç”¨æˆ·æä¾›æ•°æ®ï¼ˆPandas DataFrame / Arrow Tableï¼‰
    â†“
è½¬æ¢ä¸º RecordBatch æµ
    â†“
å¯åŠ¨ Transaction
    â†“
åˆ†é… WriteBuffer
    â†“
é€ batch å¤„ç†ï¼š
â”œâ”€ æ¥æ”¶ batchï¼ˆå¯èƒ½å‡ åƒè¡Œï¼‰
â”œâ”€ ç´¯ç§¯åˆ° bufferï¼ˆ<span class="hljs-number">1</span>M è¡Œæˆ– <span class="hljs-number">256</span>MBï¼‰
â”œâ”€ buffer æ»¡æ—¶
â”‚  â”œâ”€ ç¼–ç æ•°æ®
â”‚  â”œâ”€ å‹ç¼©
â”‚  â”œâ”€ å†™å…¥æ–‡ä»¶
â”‚  â”œâ”€ åˆ›å»º Fragment å…ƒæ•°æ®
â”‚  â””â”€ æ¸…ç©º buffer
â””â”€ ç»§ç»­æ¥æ”¶
    â†“
æ‰€æœ‰æ•°æ®å¤„ç†å®Œ
    â†“
Flush æœ€åçš„ buffer
    â†“
åˆ›å»º Manifest
    â†“
åŸå­æäº¤
</code></pre>
<h4 data-id="heading-7">ç¼–ç ä¼˜åŒ–</h4>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">pub</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">WriteBuffer</span> {
    <span class="hljs-comment">/// æ¯åˆ—çš„åŸå§‹æ•°æ®</span>
    columns: <span class="hljs-type">Vec</span>&lt;<span class="hljs-type">Vec</span>&lt;<span class="hljs-type">u8</span>&gt;&gt;,
    
    <span class="hljs-comment">/// ç´¯ç§¯çš„è¡Œæ•°</span>
    row_count: <span class="hljs-type">usize</span>,
    
    <span class="hljs-comment">/// å®¹é‡é™åˆ¶</span>
    capacity: <span class="hljs-type">usize</span>,
}

<span class="hljs-keyword">impl</span> <span class="hljs-title class_">WriteBuffer</span> {
    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">flush</span>(&amp;<span class="hljs-keyword">mut</span> <span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;DataFile&gt; {
        <span class="hljs-comment">// æ­¥éª¤ 1ï¼šä¸ºæ¯åˆ—é€‰æ‹©ç¼–ç </span>
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">encoders</span> = <span class="hljs-keyword">self</span>.<span class="hljs-title function_ invoke__">choose_encoders</span>();
        
        <span class="hljs-comment">// æ­¥éª¤ 2ï¼šå¹¶è¡Œç¼–ç æ¯åˆ—</span>
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">encoded_columns</span> = futures::future::<span class="hljs-title function_ invoke__">join_all</span>(
            encoders.<span class="hljs-title function_ invoke__">iter</span>().<span class="hljs-title function_ invoke__">enumerate</span>().<span class="hljs-title function_ invoke__">map</span>(|(i, encoder)| {
                encoder.<span class="hljs-title function_ invoke__">encode</span>(&amp;<span class="hljs-keyword">self</span>.columns[i])
            })
        ).<span class="hljs-keyword">await</span>;
        
        <span class="hljs-comment">// æ­¥éª¤ 3ï¼šæ‹¼æ¥ç¼–ç åçš„æ•°æ®</span>
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">file_data</span> = <span class="hljs-title function_ invoke__">combine_encoded_columns</span>(&amp;encoded_columns)?;
        
        <span class="hljs-comment">// æ­¥éª¤ 4ï¼šå†™å…¥å¯¹è±¡å­˜å‚¨</span>
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">file_path</span> = <span class="hljs-built_in">format!</span>(<span class="hljs-string">"data/{}.lance"</span>, <span class="hljs-keyword">self</span>.next_file_id);
        <span class="hljs-keyword">self</span>.store.<span class="hljs-title function_ invoke__">put</span>(&amp;file_path, file_data).<span class="hljs-keyword">await</span>?;
        
        <span class="hljs-comment">// æ­¥éª¤ 5ï¼šæ¸…ç©º buffer</span>
        <span class="hljs-keyword">self</span>.<span class="hljs-title function_ invoke__">reset</span>();
        
        <span class="hljs-title function_ invoke__">Ok</span>(DataFile { path: file_path, row_count: <span class="hljs-keyword">self</span>.row_count })
    }
    
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">choose_encoders</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Vec</span>&lt;<span class="hljs-type">Box</span>&lt;<span class="hljs-keyword">dyn</span> ColumnDataEncoder&gt;&gt; {
        <span class="hljs-keyword">self</span>.columns.<span class="hljs-title function_ invoke__">iter</span>().<span class="hljs-title function_ invoke__">enumerate</span>().<span class="hljs-title function_ invoke__">map</span>(|(i, col_data)| {
            <span class="hljs-comment">// åˆ†æåˆ—çš„ç»Ÿè®¡ä¿¡æ¯</span>
            <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">stats</span> = <span class="hljs-title function_ invoke__">analyze_column</span>(col_data);
            
            <span class="hljs-comment">// é€‰æ‹©æœ€ä¼˜ç¼–ç </span>
            <span class="hljs-keyword">match</span> &amp;<span class="hljs-keyword">self</span>.schema.fields[i].data_type {
                DataType::Int64 =&gt; {
                    <span class="hljs-keyword">if</span> stats.cardinality &lt; <span class="hljs-number">0.01</span> {
                        <span class="hljs-type">Box</span>::<span class="hljs-title function_ invoke__">new</span>(DictionaryEncoder::<span class="hljs-title function_ invoke__">new</span>())
                    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> stats.is_monotonic {
                        <span class="hljs-type">Box</span>::<span class="hljs-title function_ invoke__">new</span>(DeltaEncoder::<span class="hljs-title function_ invoke__">new</span>())
                    } <span class="hljs-keyword">else</span> {
                        <span class="hljs-type">Box</span>::<span class="hljs-title function_ invoke__">new</span>(BitpackingEncoder::<span class="hljs-title function_ invoke__">new</span>(stats.bit_width))
                    }
                }
                DataType::Utf8 =&gt; {
                    <span class="hljs-keyword">if</span> stats.cardinality &lt; <span class="hljs-number">0.1</span> {
                        <span class="hljs-type">Box</span>::<span class="hljs-title function_ invoke__">new</span>(DictionaryEncoder::<span class="hljs-title function_ invoke__">new</span>())
                    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> stats.is_sorted {
                        <span class="hljs-type">Box</span>::<span class="hljs-title function_ invoke__">new</span>(PrefixEncoder::<span class="hljs-title function_ invoke__">new</span>())
                    } <span class="hljs-keyword">else</span> {
                        <span class="hljs-type">Box</span>::<span class="hljs-title function_ invoke__">new</span>(RawEncoder::<span class="hljs-title function_ invoke__">new</span>())
                    }
                }
                _ =&gt; <span class="hljs-type">Box</span>::<span class="hljs-title function_ invoke__">new</span>(RawEncoder::<span class="hljs-title function_ invoke__">new</span>()),
            }
        }).<span class="hljs-title function_ invoke__">collect</span>()
    }
}
</code></pre>
<hr/>
<h3 data-id="heading-8">ğŸ’« ç¬¬ä¸‰éƒ¨åˆ†ï¼šäº‹åŠ¡ä¸æäº¤æœºåˆ¶</h3>
<h4 data-id="heading-9">å†™å…¥äº‹åŠ¡</h4>
<pre><code class="hljs language-bash" lang="bash">Transaction ç”Ÿå‘½å‘¨æœŸï¼š

BEGIN WRITE
    â†“
åˆ›å»ºä¸´æ—¶å·¥ä½œç©ºé—´
    â†“
å†™å…¥æ•°æ®æ–‡ä»¶åˆ°ä¸´æ—¶ä½ç½®
    â”œâ”€ data/_tmp/fragment_0.lance
    â”œâ”€ data/_tmp/fragment_1.lance
    â””â”€ data/_tmp/fragment_N.lance
    â†“
éªŒè¯æ•°æ®ï¼ˆå¯é€‰ï¼‰
    â”œâ”€ æ£€æŸ¥æ•°æ®å®Œæ•´æ€§
    â”œâ”€ æ£€æŸ¥ Schema å…¼å®¹æ€§
    â””â”€ æ£€æŸ¥çº¦æŸï¼ˆå¦‚æœæœ‰ï¼‰
    â†“
åˆ›å»ºæ–° Manifest
    â”œâ”€ æŒ‡å‘æ–°çš„ Fragment æ–‡ä»¶
    â”œâ”€ æ›´æ–°ç‰ˆæœ¬å·
    â””â”€ è®°å½•æ—¶é—´æˆ³
    â†“
æäº¤ï¼š
â”œâ”€ 1. å°†ä¸´æ—¶æ•°æ®æ–‡ä»¶åŸå­é‡å‘½å
â”œâ”€ 2. å†™å…¥æ–° Manifest
â”œâ”€ 3. æ›´æ–° _latest æŒ‡é’ˆ
â””â”€ 4. æˆåŠŸè¿”å›
    â†“
å¦‚æœå¤±è´¥ï¼Œæ¸…ç†ä¸´æ—¶æ–‡ä»¶
</code></pre>
<h4 data-id="heading-10">æäº¤å¤„ç†å™¨</h4>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">pub</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">CommitHandler</span> {
    store: Arc&lt;<span class="hljs-keyword">dyn</span> ObjectStore&gt;,
    lock_manager: Arc&lt;<span class="hljs-keyword">dyn</span> LockManager&gt;,
}

<span class="hljs-keyword">impl</span> <span class="hljs-title class_">CommitHandler</span> {
    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">commit_write</span>(
        &amp;<span class="hljs-keyword">self</span>,
        manifest: Manifest,
        temp_files: <span class="hljs-type">Vec</span>&lt;<span class="hljs-type">String</span>&gt;,
    ) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;<span class="hljs-type">u64</span>&gt; {
        <span class="hljs-comment">// æ­¥éª¤ 1ï¼šè·å–åˆ†å¸ƒå¼é”</span>
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">_lock</span> = <span class="hljs-keyword">self</span>.lock_manager.<span class="hljs-title function_ invoke__">acquire_lock</span>().<span class="hljs-keyword">await</span>?;
        
        <span class="hljs-comment">// æ­¥éª¤ 2ï¼šè¯»å–å½“å‰ç‰ˆæœ¬</span>
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">current_version</span> = <span class="hljs-keyword">self</span>.<span class="hljs-title function_ invoke__">read_current_version</span>().<span class="hljs-keyword">await</span>?;
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">new_version</span> = current_version + <span class="hljs-number">1</span>;
        
        <span class="hljs-comment">// æ­¥éª¤ 3ï¼šé‡å‘½åä¸´æ—¶æ–‡ä»¶</span>
        <span class="hljs-keyword">for</span> <span class="hljs-variable">temp_file</span> <span class="hljs-keyword">in</span> &amp;temp_files {
            <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">final_path</span> = temp_file.<span class="hljs-title function_ invoke__">replace</span>(<span class="hljs-string">"_tmp/"</span>, <span class="hljs-string">""</span>);
            <span class="hljs-keyword">self</span>.store.<span class="hljs-title function_ invoke__">move_object</span>(temp_file, &amp;final_path).<span class="hljs-keyword">await</span>?;
        }
        
        <span class="hljs-comment">// æ­¥éª¤ 4ï¼šå†™å…¥ Manifest</span>
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">manifest_path</span> = <span class="hljs-built_in">format!</span>(<span class="hljs-string">"_versions/{}.manifest"</span>, new_version);
        <span class="hljs-keyword">self</span>.store.<span class="hljs-title function_ invoke__">put</span>(&amp;manifest_path, manifest.<span class="hljs-title function_ invoke__">serialize</span>()).<span class="hljs-keyword">await</span>?;
        
        <span class="hljs-comment">// æ­¥éª¤ 5ï¼šæ›´æ–°æœ€æ–°ç‰ˆæœ¬æŒ‡é’ˆ</span>
        <span class="hljs-keyword">self</span>.store.<span class="hljs-title function_ invoke__">put</span>(<span class="hljs-string">"_latest"</span>, new_version.<span class="hljs-title function_ invoke__">to_string</span>().<span class="hljs-title function_ invoke__">into</span>()).<span class="hljs-keyword">await</span>?;
        
        <span class="hljs-comment">// æ­¥éª¤ 6ï¼šé‡Šæ”¾é”</span>
        <span class="hljs-title function_ invoke__">drop</span>(_lock);
        
        <span class="hljs-title function_ invoke__">Ok</span>(new_version)
    }
}
</code></pre>
<hr/>
<h3 data-id="heading-11">ğŸ“Š å†™å…¥æ€§èƒ½ä¼˜åŒ–</h3>
<h4 data-id="heading-12">æ‰¹é‡å¤§å°çš„å½±å“</h4>
<pre><code class="hljs language-diff" lang="diff">å†™å…¥ 1GB æ•°æ®çš„æ€§èƒ½å¯¹æ¯”ï¼š

Batch å¤§å°å¤ªå°ï¼ˆ1000 è¡Œï¼‰ï¼š
<span class="hljs-deletion">- é¢‘ç¹ç¼–ç ã€å‹ç¼©ã€å†™å…¥</span>
<span class="hljs-deletion">- ç³»ç»Ÿå¼€é”€å¤§</span>
<span class="hljs-deletion">- æ—¶é—´ï¼š2 åˆ†é’Ÿ</span>

Batch å¤§å°åˆé€‚ï¼ˆ100K è¡Œï¼‰ï¼š
<span class="hljs-deletion">- ç¼–ç ã€å‹ç¼©æ•ˆç‡é«˜</span>
<span class="hljs-deletion">- ç³»ç»Ÿå¼€é”€å‡è¡¡</span>
<span class="hljs-deletion">- æ—¶é—´ï¼š10 ç§’</span>

Batch å¤§å°å¤ªå¤§ï¼ˆ10M è¡Œï¼‰ï¼š
<span class="hljs-deletion">- å†…å­˜å ç”¨é«˜ï¼ˆå¯èƒ½ 10GB+ï¼‰</span>
<span class="hljs-deletion">- å¯èƒ½ OOM</span>
<span class="hljs-deletion">- æ—¶é—´ï¼š5 ç§’ï¼ˆä½†å¯èƒ½å¤±è´¥ï¼‰</span>

æ¨èï¼š100K-1M è¡Œ/batch
</code></pre>
<h4 data-id="heading-13">å¹¶å‘å†™å…¥</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> lance
<span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd
<span class="hljs-keyword">from</span> concurrent.futures <span class="hljs-keyword">import</span> ThreadPoolExecutor

<span class="hljs-comment"># å¹¶å‘å†™å…¥å¤šä¸ª Fragment</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">write_partition</span>(<span class="hljs-params">df_partition</span>):
    dataset = lance.<span class="hljs-built_in">open</span>(<span class="hljs-string">"data.lance"</span>, mode=<span class="hljs-string">"append"</span>)
    dataset.add(df_partition)

<span class="hljs-comment"># åˆ†å‰²æ•°æ®ä¸º 10 ä¸ªåˆ†åŒº</span>
partitions = [df[i::<span class="hljs-number">10</span>] <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>)]

<span class="hljs-comment"># å¹¶å‘å†™å…¥</span>
<span class="hljs-keyword">with</span> ThreadPoolExecutor(max_workers=<span class="hljs-number">4</span>) <span class="hljs-keyword">as</span> executor:
    futures = [executor.submit(write_partition, p) <span class="hljs-keyword">for</span> p <span class="hljs-keyword">in</span> partitions]
    <span class="hljs-keyword">for</span> f <span class="hljs-keyword">in</span> futures:
        f.result()

<span class="hljs-comment"># æ€§èƒ½ï¼š</span>
<span class="hljs-comment"># ä¸²è¡Œï¼š10 Ã— 1åˆ†é’Ÿ = 10 åˆ†é’Ÿ</span>
<span class="hljs-comment"># å¹¶å‘ï¼ˆ4 workersï¼‰ï¼š10 åˆ†é’Ÿ / 4 â‰ˆ 2.5 åˆ†é’Ÿ</span>
<span class="hljs-comment"># ä½†æ³¨æ„ï¼šå¹¶å‘å†™å…¥éœ€è¦äº‹åŠ¡éš”ç¦»</span>
</code></pre>
<hr/>
<h3 data-id="heading-14">ğŸ’¡ æœ€ä½³å®è·µ</h3>
<h4 data-id="heading-15">ä½•æ—¶ä½¿ç”¨å“ªç§ WriteMode</h4>
<pre><code class="hljs language-ini" lang="ini">WriteMode::Create
ç”¨é€”ï¼šåˆ›å»ºæ–°æ•°æ®é›†
ç¤ºä¾‹ï¼š
  <span class="hljs-attr">dataset</span> = lance.write_dataset(df, <span class="hljs-string">"new.lance"</span>, mode=<span class="hljs-string">"create"</span>)
æ€§èƒ½ï¼šæœ€å¿«ï¼ˆæ— éœ€è¯»å–ç°æœ‰ç‰ˆæœ¬ï¼‰

WriteMode::Append
ç”¨é€”ï¼šæ·»åŠ æ–°æ•°æ®
ç¤ºä¾‹ï¼š
  <span class="hljs-attr">dataset</span> = lance.open(<span class="hljs-string">"existing.lance"</span>)
  dataset.add(new_df)
æ€§èƒ½ï¼šè¾ƒå¿«ï¼ˆåªéœ€è¯»å–æœ€æ–°ç‰ˆæœ¬ï¼‰
æ³¨æ„ï¼šè‡ªåŠ¨åˆ›å»ºæ–° Fragment

WriteMode::Overwrite
ç”¨é€”ï¼šæ›¿æ¢æ‰€æœ‰æ•°æ®
ç¤ºä¾‹ï¼š
  <span class="hljs-attr">dataset</span> = lance.write_dataset(df, <span class="hljs-string">"data.lance"</span>, mode=<span class="hljs-string">"overwrite"</span>)
æ€§èƒ½ï¼šæœ€æ…¢ï¼ˆéœ€è¦åˆ é™¤æ—§ç‰ˆæœ¬çš„æ–‡ä»¶ï¼‰
æ³¨æ„ï¼šæ—§ç‰ˆæœ¬å˜æˆä¸å¯è®¿é—®çš„åƒåœ¾æ•°æ®ï¼ˆå¯é…ç½®æ¸…ç†ï¼‰
</code></pre>
<h4 data-id="heading-16">å¤„ç†å¤§æ–‡ä»¶</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> lance

<span class="hljs-comment"># æ–¹æ³• 1ï¼šåˆ†å—è¯»å–å’Œå†™å…¥</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">write_large_csv_incremental</span>(<span class="hljs-params">csv_path, output_path</span>):
    chunks = pd.read_csv(csv_path, chunksize=<span class="hljs-number">100000</span>)
    
    <span class="hljs-keyword">for</span> i, chunk <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(chunks):
        <span class="hljs-keyword">if</span> i == <span class="hljs-number">0</span>:
            dataset = lance.write_dataset(chunk, output_path, mode=<span class="hljs-string">"create"</span>)
        <span class="hljs-keyword">else</span>:
            dataset = lance.<span class="hljs-built_in">open</span>(output_path)
            dataset.add(chunk)

<span class="hljs-comment"># æ–¹æ³• 2ï¼šä½¿ç”¨æµå¼ APIï¼ˆå¦‚æœæ”¯æŒï¼‰</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">write_large_parquet_streaming</span>(<span class="hljs-params">parquet_path, output_path</span>):
    reader = pd.read_parquet(parquet_path, engine=<span class="hljs-string">"pyarrow"</span>)
    dataset = lance.write_dataset(reader, output_path, mode=<span class="hljs-string">"create"</span>)
</code></pre>
<hr/>
<h3 data-id="heading-17">ğŸ“š æ€»ç»“</h3>
<p>æ•°æ®å†™å…¥æ˜¯ Lance çš„å…³é”®æ“ä½œï¼š</p>
<ol>
<li><strong>WriteParams é…ç½®</strong>ï¼šå½±å“ Fragment å¤§å°å’Œæ•°é‡</li>
<li><strong>æ‰¹é‡ä¼˜åŒ–</strong>ï¼šç¼–ç ã€å‹ç¼©çš„è‡ªåŠ¨é€‰æ‹©</li>
<li><strong>äº‹åŠ¡ä¿è¯</strong>ï¼šACID å±æ€§çš„å®ç°</li>
<li><strong>å¹¶å‘å¤„ç†</strong>ï¼šå¤š Fragment çš„å¹¶è¡Œå†™å…¥</li>
<li><strong>æ€§èƒ½è°ƒä¼˜</strong>ï¼šBatch å¤§å°ã€å¹¶å‘æ•°çš„é€‰æ‹©</li>
</ol>
<p>ä¸‹ä¸€ç« å°†è®¨è®ºæ•°æ®æ›´æ–°å’Œ Schema æ¼”åŒ–ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Claude Agent Skillsï¼šå°† Workflow æ‰“è¿›æŠ€èƒ½åŒ…]]></title>    <link>https://juejin.cn/post/7576953459543457846</link>    <guid>https://juejin.cn/post/7576953459543457846</guid>    <pubDate>2025-11-27T02:37:37.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576953459543457846" data-draft-id="7577171133432463401" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Claude Agent Skillsï¼šå°† Workflow æ‰“è¿›æŠ€èƒ½åŒ…"/> <meta itemprop="keywords" content="Agent,Claude"/> <meta itemprop="datePublished" content="2025-11-27T02:37:37.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¥‡èˆç²¾é€‰"/> <meta itemprop="url" content="https://juejin.cn/user/4388906147515367"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Claude Agent Skillsï¼šå°† Workflow æ‰“è¿›æŠ€èƒ½åŒ…
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4388906147515367/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¥‡èˆç²¾é€‰
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-27T02:37:37.000Z" title="Thu Nov 27 2025 02:37:37 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»13åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨è¿™ä¸ª AI æŠ€æœ¯è“¬å‹ƒå‘å±•çš„æ—¶ä»£ï¼Œæ¯å¤©éƒ½æœ‰æ–°ä¸œè¥¿ã€‚æ¯æ¬¡æµè§ˆç¤¾äº¤åª’ä½“ï¼Œæ€»èƒ½çœ‹åˆ°è‡ªåª’ä½“å’Œ KOL ä»¬æåŠ›çš„é¼“å¹ç€æ–°äº§å“ã€æ–°æŠ€æœ¯ï¼Œæ»¡å£ã€Œé©å‘½ã€å’Œã€Œæœªæ¥ã€ï¼Œèµ·åˆçœŸçš„ç»™æˆ‘æ•´ FOMO äº†ï¼Œä½†åæ¥è¶Šæ¥è¶Šæ„Ÿè§‰åˆ°åŒçƒ¦ï¼Œã€ŒFunction Callingã€ã€ã€ŒTool Useã€ã€ã€ŒMCPã€ã€ã€ŒAgentã€ã€ã€ŒAgentic AIã€ â€¦â€¦ è¿˜æœ‰ä¸€å¤§å †åˆ«çš„ AI æœ¯è¯­ï¼Œä½ å¾ˆéš¾åˆ†æ¸…è¿™äº›æ¦‚å¿µåˆ°åº•ä»£è¡¨äº†æŠ€æœ¯çš„å®è´¨çªç ´ï¼Œè¿˜æ˜¯åŒä¸€ä»¶äº‹è¢«è¥é”€è¯æœ¯åå¤åŒ…è£…ï¼Œè·Ÿå‰ç«¯ç«çš„é‚£äº›å¹´å¦‚å‡ºä¸€è¾™ï¼Œä¸ç¦è®©äººæ„Ÿå¹ AI é¢†åŸŸçš„æ¦‚å¿µä¹Ÿæ˜¯é€šè´§è†¨èƒ€äº†ã€‚</p>
<p>åœ¨ 10 æœˆä¸­æ—¬ï¼ŒAnthropic  æ‚„ç„¶æ¨å‡ºäº† Agent Skillsï¼ˆåç®€ç§° Skillsï¼‰ï¼Œä¸å‡ºæ„å¤–ï¼ŒæŠ€æœ¯ç¤¾åŒºåˆç‚¸é”…äº†ã€‚æœ‰äººå‘å‡ºè´¨ç–‘ï¼Œè®¤ä¸ºåˆåœ¨ç‚’æ¦‚å¿µï¼Œä¹Ÿæœ‰äººè®¤ä¸º Skills è™½ç„¶ç®€å•ï¼Œä½†å´æ˜¯æ¯” MCP è¿˜è¦å¼ºå¤§çš„ç©æ„ã€‚</p>
<p>æœ€è¿‘æˆ‘èŠ±äº†äº›æ—¶é—´æ·±å…¥ç ”ç©¶ Skillsï¼ŒæŸ¥é˜…å®˜æ–¹æ–‡æ¡£ï¼Œçœ‹äº†äº› Youtube è§†é¢‘ï¼ŒåŠ¨æ‰‹å†™äº†å‡ ä¸ªç¤ºä¾‹ã€‚ç»“è®ºæ˜¯å®ƒæ²¡æœ‰æŸäº› KOL å¹å¾—é‚£ä¹ˆç¥ï¼Œä½†ç¡®å®æœ‰å…¶ç‹¬åˆ°ä¹‹å¤„ã€‚è€Œè¿™èƒŒåï¼Œæ½œè—ç€ Anthropic è¯•å›¾åœ¨ MCP åè¿›ä¸€æ­¥æ ‡å‡†åŒ– LLM åº”ç”¨çš„é‡å¿ƒã€‚</p>
<p>æœ¬æ–‡å°†åˆ†äº«æˆ‘å¯¹ Skills çš„ç†è§£å’Œæ€è€ƒï¼Œå¸Œæœ›èƒ½ä¸ºæƒ³è¦äº†è§£è¿™é¡¹æŠ€æœ¯çš„æœ‹å‹æä¾›ä¸€äº›å‚è€ƒï¼Œæœ‰è¯´çš„ä¸å¯¹çš„åœ°æ–¹æ¬¢è¿å¤§å®¶æ‰¹è¯„æŒ‡æ­£ã€‚</p>
<h2 data-id="heading-0">Why Skillsï¼Ÿ</h2>
<p>å®é™…ä¸Šæˆ‘è®¤ä¸º Skill æƒ³è¦è§£å†³çš„é—®é¢˜å¾ˆç®€å•ï¼Œè§£å†³ Prompt Engineering çš„å¤ç”¨é—®é¢˜ã€‚</p>
<p>è¯•æƒ³è¿™æ ·ä¸€ä¸ªåœºæ™¯ï¼Œä½ ç»å¸¸å†™æŠ€æœ¯æ–‡ç« ï¼Œæ¯æ¬¡éƒ½è¦æé†’ AIï¼š</p>
<ul>
<li>ç”¨è½»æ¾çš„è¯­æ°”ï¼Œä¸è¦è¾“å‡ºå¤ªå¤šåƒåˆ—è¡¨ä¸€æ ·çš„ç»“æ„åŒ–æ•°æ®</li>
<li>å¤šç”¨ä»£ç ç¤ºä¾‹ï¼Œå°‘è®²æŠ½è±¡æ¦‚å¿µ</li>
<li>æ¯æ®µä¸è¶…è¿‡ 300 å­—</li>
</ul>
<p>è¯´å®åœ¨è¿™è¿˜æ˜¯æŒºéº»çƒ¦çš„ï¼Œä½†æ˜¯åˆç†ä½¿ç”¨ AI æˆ‘ä»¬çš„è¿˜æ˜¯èƒ½åšçš„åˆ°çš„ï¼Œä½†æ˜¯ä½ æ³¨æ„åˆ°äº†å—ï¼Ÿè¿™ä¸ª Workflow å¾ˆéš¾è¿ç§»åˆ°ä½ çš„ä¸‹ä¸€æ¬¡ AI å¯¹è¯ä¸­ï¼Œå› ä¸ºè¿™äº› Prompt ä½ è¦é‡æ–°è¾“å…¥ä¸€éã€‚</p>
<p>Anthropic ç»™å‡ºçš„è§£æ³•å°±æ˜¯ Skillsï¼ŒSkills å°±æ˜¯æŠŠåšæŸäº›é‡å¤æ€§ä»»åŠ¡çš„ Promptã€èµ„æºæ–‡ä»¶ï¼ˆè„šæœ¬ã€çŸ¥è¯†åº“ä¹‹ç±»çš„ï¼‰æ‰“åŒ…åœ¨ä¸€èµ·ï¼Œåœ¨ä½ çš„ä¸‹ä¸€æ¬¡å¯¹è¯ä¸­ï¼Œåƒã€ŒTool Useã€ä¸€æ ·æŒ‰éœ€è½½å…¥ï¼Œæ¨¡å‹è‡ªä¸»å†³å®šæ˜¯å¦æŒ‰ç…§ä½ ç»™å‡ºçš„ Skills è¡ŒåŠ¨ã€‚å˜¿ï¼Œå¦‚æœèƒ½å¤ŸæŒ‰ç…§é¢„æœŸè§¦å‘ï¼Œæˆ‘ä»¬çš„ workflow å°±èƒ½å˜çš„æ›´ç®€å•å¥½ç”¨ï¼Œä¸ç”¨å‡†å¤‡é‚£ä¹ˆå¤šæç¤ºè¯äº†å¯¹å§ï½</p>
<p>å½“ç„¶ Skills ä½œä¸º Anthropic ä¹Ÿå¯ä»¥åœ¨ç¤¾åŒºåˆ†äº«ï¼Œå°±åƒ MCP åˆšå‡ºæ¥å°±æœ‰äº†ä¸€å † MCP Hubï¼Œç°åœ¨ä¹Ÿå‡ºç°äº†å¾ˆå¤š Skills Hubã€‚</p>
<p>ä»æŠ€æœ¯è§’åº¦çœ‹ï¼ŒSkills ç¡®å®æœ‰ç”¨ï¼Œä½†åˆ«é«˜ä¼°å®ƒã€‚æœ‰äººè¯´ Skills ä¼šé©äº† n8nã€Dify è¿™äº› Agent å¹³å°çš„å‘½ï¼Œæˆ‘æ˜¯ä¸å¤ªä¿¡çš„ã€‚Skills æœ¬è´¨ä¸Šå°±æ˜¯æŠŠä½ çš„ Prompt å’Œ workflow æ‰“ä¸ªåŒ…ï¼Œè®©å®ƒèƒ½å¤ç”¨ã€‚è¿™è§£å†³çš„æ˜¯ä¸æƒ³æ¯æ¬¡éƒ½é‡å¤è¾“å…¥æŒ‡ä»¤çš„é—®é¢˜ã€‚ä½† n8nã€Dify è¿™äº›å¹³å°è§£å†³çš„æ˜¯ä»€ä¹ˆï¼Ÿæ˜¯è¦æŠŠåå‡ ä¸ªæ­¥éª¤ä¸²èµ·æ¥ï¼Œä¸­é—´è¿˜æœ‰æ¡ä»¶åˆ¤æ–­ã€é”™è¯¯å¤„ç†ã€å®šæ—¶è§¦å‘è¿™ç§å¤æ‚ç¼–æ’é—®é¢˜ã€‚è¿™ä¿©æ ¹æœ¬ä¸æ˜¯ä¸€ä¸ªç»´åº¦çš„ä¸œè¥¿ã€‚</p>
<p>Skills é€‚åˆé‚£ç§é‡å¤æ€§çš„ã€ç›¸å¯¹æ ‡å‡†åŒ–çš„å•ä¸ªä»»åŠ¡ï¼Œæ¯”å¦‚ä»£ç å®¡æŸ¥ã€æŒ‰è§„èŒƒç”Ÿæˆæ–‡æ¡£ã€æ£€æŸ¥æ•°æ®æ ¼å¼è¿™ç§ã€‚ä½ å®šä¹‰å¥½è§„åˆ™ï¼Œä»¥åæ¯æ¬¡ Claude è‡ªåŠ¨æŒ‰è¿™å¥—è§„åˆ™æ¥ï¼ŒæŒºæ–¹ä¾¿ã€‚ä½†è¦æ˜¯ä½ çš„å·¥ä½œæµç¨‹æ˜¯å¤šæ­¥éª¤ã€å¤šæœåŠ¡çš„ååŒï¼ŒSkills å°±ç©ä¸è½¬äº†ã€‚è€Œä¸”è¿™äº› Agent å¹³å°æœ‰å¯è§†åŒ–ç•Œé¢ï¼ŒéæŠ€æœ¯äººå‘˜ä¹Ÿèƒ½é…ç½®ï¼ŒSkills ä½ è¿˜å¾—å†™ä»£ç æ‰“åŒ…ï¼Œé—¨æ§›æ‘†åœ¨é‚£ã€‚</p>
<p>æ‰€ä»¥åˆ«è¢«è¥é”€è¯æœ¯å¿½æ‚ äº†ã€‚Skills ç¡®å®é™ä½äº†ä¸€äº›ç®€å•åœºæ™¯çš„é—¨æ§›ï¼Œä»¥å‰å¯èƒ½è¦æ­ä¸ªå° Agent çš„äº‹ï¼Œç°åœ¨ä¸€ä¸ª Skill å°±æå®šã€‚ä½†å®ƒä¸æ˜¯ä»€ä¹ˆé©å‘½æ€§çš„ä¸œè¥¿ï¼Œæ›´ä¸å¯èƒ½æŠŠè¿™äº›å¹³å°å¹²æ‰ï¼Œé¡¶å¤šç®—ä¸ªè¡¥å……ã€‚</p>
<h3 data-id="heading-1">Skills vs MCP</h3>
<p>å¾ˆå¤šäººæä¸æ¸…æ¥šä¸ºä½•æœ‰äº† MCP è¿˜éœ€è¦ Skillsï¼Œè¿™é‡Œæ’ä¸€æ®µè§£é‡Šä¸‹ã€‚</p>
<p>å®é™…ä¸Šä¸¤è€…çš„æ ¸å¿ƒç›®æ ‡ä¸ä¸€è‡´ï¼ŒMCP çš„ç›®æ ‡æ˜¯å¸®åŠ© AI è¿æ¥å¤–éƒ¨ä¸–ç•Œï¼Œè¯»å–å¤–éƒ¨ä¸–ç•Œçš„æ•°æ®ï¼Œå‘å¤–éƒ¨ä¸–ç•Œè¾“å‡ºå½±å“ï¼ŒAnthropic å°†å…¶æè¿°ä¸ºã€ŒUSB Hubã€ï¼Œå¼ºè°ƒçš„è¿æ¥èƒ½åŠ›ã€‚è€Œ Skills çš„ç›®æ ‡æ˜¯å°è£…ç‰¹å®šé¢†åŸŸçš„çŸ¥è¯†å’Œ workflowï¼Œä¸“æ³¨äºæ‰§è¡Œç‰¹å®šä»»åŠ¡ï¼Œè¦æ¯”å–»çš„è¯ä¹Ÿæ˜¯ã€Œç‘å£«å†›åˆ€ã€ã€‚è¿™ä¿©ä¸€ä¸ªä¸»å¤–ï¼Œä¸€ä¸ªä¸»å†…ï¼Œæ˜¯å¯ä»¥é…åˆä½¿ç”¨çš„ã€‚</p>
<h3 data-id="heading-2">Skills vs Projects</h3>
<p>è¿˜æœ‰ä¸€ä¸ªç›¸è¿‘çš„åŠŸèƒ½å«åš Projectsï¼Œåœ¨ Claude å’Œ ChatGPT ä¸Šéƒ½æœ‰ç±»ä¼¼åŠŸèƒ½ï¼Œç®€å•æ¥è¯´å°±æ˜¯å¯ä»¥åˆ›å»ºä¸€ä¸ª workspaceï¼Œæˆ‘ä»¬æŠŠåšæŸä»¶äº‹ï¼ˆæ¯”å¦‚å†™ç°åœ¨çš„è¿™ç¯‡æ–‡ç« ï¼‰ä½œä¸ºç›®æ ‡ï¼Œå°†å®Œæˆè¿™ä»¶äº‹çš„ Prompt å’Œ Context èšæ‹¢åœ¨ä¸€èµ·ï¼ŒAI ä¼šè®°ä½é¡¹ç›®èƒŒæ™¯ï¼Œå’Œå½“å‰çš„è¿›åº¦ï¼Œå¸®æˆ‘ä»¬å»¶ç»­æ€è·¯ï¼Œä¸ç”¨æ¯æ¬¡é‡æ–°è§£é‡Šæˆ‘ä»¬ä¸Šæ¬¡èŠåˆ°å“ªäº†ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d69d641d3c3e49fa99430057a046d0bb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aWH6Iie57K-6YCJ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764815857&amp;x-signature=lbNw9h%2Fp3XOt3YNs4rVqHIvAh4A%3D" alt="" loading="lazy"/></p>
<p>ä½† Skills èšç„¦åœ¨ã€Œåšäº‹çš„æ–¹æ³•ã€ï¼Œæ›´åƒæ˜¯ä¸€å¥—å¯å¤ç”¨çš„ workflowã€‚å®ƒä¸å…³å¿ƒä½ åœ¨åšå“ªä¸ªé¡¹ç›®ï¼Œè€Œæ˜¯å¸®ä½ ä¿æŒç»Ÿä¸€çš„åšäº‹é£æ ¼æˆ–æ ‡å‡†ã€‚è€Œä¸” Projects é€šå¸¸æ˜¯ä¸ªäººç”¨çš„ï¼Œæ²¡æ³•ç›´æ¥åˆ†äº«ï¼›Skills åˆ™å¯ä»¥æ‰“åŒ…æˆæ¨¡æ¿ï¼Œåˆ†äº«ç»™å›¢é˜Ÿä¸€èµ·ç”¨ã€‚</p>
<p>ä»è¿™ä¸ªè§’åº¦çœ‹ï¼ŒProjects ç®¡é¡¹ç›®ï¼ŒSkills ç®¡æ–¹æ³•ï¼Œä¸€ä¸ªæ˜¯å·¥ä½œç©ºé—´ï¼Œä¸€ä¸ªæ˜¯å·¥å…·ç®±ã€‚</p>
<h2 data-id="heading-3">ä»€ä¹ˆæ˜¯ Skillsï¼Ÿ</h2>
<p>è¯´äº†è¿™ä¹ˆå¤šï¼ŒSkills åˆ°åº•é•¿ä»€ä¹ˆæ ·ï¼Ÿå®ƒæ˜¯å¦‚ä½•å®ç°ã€ŒPrompt å¤ç”¨ã€å’Œã€ŒæŒ‰éœ€åŠ è½½ã€çš„ï¼Ÿæ¥ä¸‹æ¥æˆ‘ä»¬çœ‹çœ‹ Skills çš„æŠ€æœ¯ç»†èŠ‚ã€‚</p>
<p>å¦‚å‰æ–‡æ‰€è¯´ Skills å®é™…ä¸Šå°±æ˜¯åŒ…å«äº† Prompt å’Œèµ„æºæ–‡ä»¶çš„åŒ…ï¼Œç”¨äºå‘ŠçŸ¥ AI å¦‚ä½•å®Œæˆç‰¹å®šä»»åŠ¡ï¼Œå¹¶åœ¨ä¸åŒä¼šè¯ä¹‹é—´å¤ç”¨ï¼Œå…¶åŸºæœ¬ç»“æ„æ˜¯è¿™æ ·çš„ï¼š</p>
<pre><code class="hljs language-perl" lang="perl"><span class="hljs-keyword">my</span>-skill.zip
  â””â”€â”€ <span class="hljs-keyword">my</span>-skill/
      â”œâ”€â”€ SKILL.md ï¼ˆå¿…è¦ï¼‰
      â””â”€â”€ resources/ï¼ˆéå¿…è¦çš„å…¶ä»–æ–‡ä»¶ï¼‰
</code></pre>
<p>Anthropic è§„å®š Skill åŒ…å¿…é¡»æ˜¯ä¸€ä¸ª zip åŒ…ï¼Œä¸”é‡Œé¢åŒ…å«ä¸€ä¸ªåŒåçš„æ–‡ä»¶å¤¹ï¼Œæ–‡ä»¶å¤¹é‡Œé¢æ‰æ˜¯å…·ä½“å†…å®¹ï¼Œå…¶ä¸­çš„ <code>SKILL.md</code> ä¹Ÿæ˜¯å¿…é¡»çš„æè¿°äº† Skill çš„åŸºæœ¬ä¿¡æ¯ï¼Œå¹¶ä¸”é‡Œé¢å†…å®¹ä¹Ÿæœ‰ç‰¹æ®Šçš„è§„å®šï¼Œè€Œå…¶ä»–æ–‡ä»¶å°±è‡ªå·±æ ¹æ®éœ€æ±‚éšæ„æ·»åŠ å°±å¥½äº†ã€‚</p>
<p><code>SKILL.md</code> ç±»ä¼¼è¿™æ ·ï¼š</p>
<pre><code class="hljs language-md" lang="md">---
name: your-skill-name
<span class="hljs-section">description: Brief description of what this Skill does and when to use it
---</span>

<span class="hljs-section"># Your Skill Name</span>

<span class="hljs-section">## Instructions</span>
[Clear, step-by-step guidance for Claude to follow]

<span class="hljs-section">## Examples</span>
[Concrete examples of using this Skill]
</code></pre>
<p>å¯ä»¥çœ‹åˆ° <code>SKILL.md</code>  åˆ†ä¸¤éƒ¨åˆ†ï¼Œä¸€éƒ¨åˆ†æ˜¯ YAML çš„å¤´éƒ¨ï¼Œç”¨äºå­˜å‚¨å…ƒæ•°æ®ï¼Œå…¶ <code>name</code> å’Œ <code>description</code> æ˜¯å¿…é¡»çš„ã€‚ä¸‹åŠéƒ¨åˆ†çš„ Markdown å°±å¯ä»¥éšæ„å‘æŒ¥äº†ã€‚</p>
<p>Claude ä¸º Skills æä¾›äº†ä»£ç æ‰§è¡Œç¯å¢ƒã€‚åœ¨ Claude.ai ä¸­æ˜¯éš”ç¦»çš„è™šæ‹Ÿæœºï¼Œè€Œåœ¨ Claude Code ä¸­åˆ™æ˜¯ç›´æ¥åœ¨ç”¨æˆ·çš„æœ¬åœ°ç¯å¢ƒæ‰§è¡Œï¼Œå¹¶æä¾›äº†ä¸€å¥—å«åš <strong>æ¸è¿›å¼æŠ«éœ²</strong>ï¼ˆprogressive disclosureï¼‰ çš„è°ƒç”¨ç­–ç•¥æ¥æ§åˆ¶ Contextã€‚
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/100273e8dad44f4395aff7b8c9b1743d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aWH6Iie57K-6YCJ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764815857&amp;x-signature=qVXR6d3BvY39Dfo3RhUfCnmSML4%3D" alt="" loading="lazy"/></p>
<ol>
<li>Level 1: - å…ƒæ•°æ® (å§‹ç»ˆåŠ è½½)ï¼šä¹Ÿå°±æ˜¯æˆ‘ä»¬åˆšåˆšè¯´çš„  <code>SKILL.md</code> ä¸­çš„ YAML å¤´ï¼Œä¼šåœ¨ Claude å¯åŠ¨æ—¶è½½å…¥å¹¶é™„åŠ åœ¨ System Prompt ä¸­ï¼Œå’Œã€ŒTool Useã€å·®ä¸å¤š</li>
<li>Level 2 - æŒ‡ä»¤ï¼ˆè°ƒç”¨æ—¶åŠ è½½ï¼‰ï¼šä¹Ÿå°±æ˜¯æˆ‘ä»¬åˆšåˆšè¯´çš„  <code>SKILL.md</code> ä¸­çš„ Markdown éƒ¨åˆ†ï¼Œå½“ Claude ç¡®è®¤è¦è°ƒç”¨æŸä¸ª Skillï¼Œå°±ä¼šè½½å…¥å…¨éƒ¨çš„ <code>SKILL.md</code> å†…å®¹</li>
<li>Level 3 - èµ„æºæ–‡ä»¶æˆ–ä»£ç ï¼ˆæŒ‰éœ€åŠ è½½ï¼‰ï¼šå½“æŒ‡ä»¤è®© Claude é‡‡å–äº†æŸäº›è¡Œä¸ºè¦è®¿é—®è¿™äº›æ–‡ä»¶æˆ–æ˜¯æ‰§è¡Œä»£ç æ—¶ï¼Œæ‰ä¼šè½½å…¥è¿™äº›èµ„æºæ–‡ä»¶</li>
</ol>
<p>Anthropic åœ¨ Claude ä¸Šæä¾›äº†ä¸€äº›é¢„åˆ¶çš„æŠ€èƒ½å¯ä»¥å¼€å¯ï¼Œä¹Ÿæ”¯æŒç”¨æˆ·è‡ªå·±ä¸Šä¼  zip åŒ…æ¥ä½¿ç”¨ï¼š
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f9dc55a0f6be4470af78fb9f6555324b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aWH6Iie57K-6YCJ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764815857&amp;x-signature=4Ui31fwf%2Fwq%2FyWDcgvlQtY3O7Pc%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-4">å®æˆ˜å¼€å‘</h2>
<p>ç†è§£äº† Skills çš„åŸç†ï¼Œæœ€å¥½çš„å­¦ä¹ æ–¹å¼å°±æ˜¯åŠ¨æ‰‹å†™ä¸€ä¸ªã€‚è™½è¯´æˆ‘ä»¬å¯ä»¥ç›´æ¥è®© Claude æ ¹æ®è§„èŒƒä¸ºæˆ‘ä»¬åˆ›å»ºä¸€ä¸ª Skillï¼ˆç¡®å®å¾ˆæ–¹ä¾¿ï¼‰ï¼Œä½†è‡ªå·±ä»é›¶å¼€å§‹å†™ä¸€éï¼Œèƒ½æ›´æ·±å…¥ç†è§£ Skills çš„è®¾è®¡æ€æƒ³ã€‚</p>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå®ç”¨çš„ Skillï¼š<strong>ä¸Šä¼ å›¾åºŠåŠ©æ‰‹</strong> ï¼šå¹³æ—¶åœ¨å†™å®ŒæŠ€æœ¯æ–‡ç« ä¹‹åï¼Œå‘å¸ƒçš„è¿‡ç¨‹å…¶å®æŒºéº»çƒ¦çš„ï¼Œå› ä¸ºæˆ‘ç»å¸¸ä½¿ç”¨ Ulysses å†™ä½œï¼Œå¯¼å‡ºä¸º Markdown åï¼Œå¾ˆå¤šå›¾ç‰‡å¼•ç”¨å®é™…æ˜¯åœ¨æœ¬åœ°çš„ï¼Œå¦‚æœè¦å‘å¸ƒä¸€èˆ¬è¿˜æ˜¯è¦ä¸Šä¼ åˆ°å›¾åºŠä¸Šæ‰èƒ½ç›´æ¥ç”¨ã€‚å¦å¤–ï¼Œæˆ‘å¼•ç”¨çš„ä¸€äº›å›¾ç‰‡çš„æ ¼å¼å¾ˆå¤šåœ°æ–¹ä¸æ”¯æŒï¼Œéœ€è¦ç»Ÿä¸€æˆ png æ¥ä¸Šä¼ ã€‚</p>
<p>æˆ‘ä»¬çš„ç›®å½•ç»“æ„æ˜¯è¿™æ ·ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">article-publisher/
â”œâ”€â”€ SKILL.md                      <span class="hljs-comment"># Skill å®šä¹‰å’Œå·¥ä½œæµç¨‹</span>
â””â”€â”€ scripts/
    â””â”€â”€ upload_images.py      <span class="hljs-comment"># ä¸Šä¼ å›¾ç‰‡åˆ°å›¾åºŠè„šæœ¬</span>
</code></pre>
<p>é¦–å…ˆï¼Œåˆ›å»º <code>SKILL.md</code>ï¼Œè§„å®šæ•´ä¸ªæŠ€èƒ½çš„å®šä¹‰å’Œæ‰§è¡Œæ­¥éª¤ã€‚è¿™é‡Œæˆ‘ç”¨äº†æ¯”è¾ƒç›´ç™½çš„å†™æ³•ï¼Œè™½ç„¶ä¸å®Œå…¨ç¬¦åˆå®˜æ–¹çš„æœ€ä½³å®è·µï¼ˆåé¢ä¼šè¯´ä¸ºä»€ä¹ˆï¼‰ï¼Œä½†ä¸ºäº†ç¨³å®šæ€§åšäº†ä¸€äº›å¦¥åï¼š</p>
<pre><code class="hljs language-md" lang="md">---
name: upload-article-images
<span class="hljs-section">description: Upload local images from Markdown files to image hosting. When user says "ä¸Šä¼ å›¾åºŠ" or "upload images", immediately run the script at ~/.claude/skills/upload-article-images/scripts/upload<span class="hljs-emphasis">_images.py
---

# Upload Article Images

To upload images from a Markdown file, execute:

`bash
python3 ~/.claude/skills/upload-article-images/scripts/upload_</span>images.py <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">markdown_file_path</span>&gt;</span></span>
`

## Critical: What NOT to do

- Do NOT read the Markdown file first
- Do NOT list or check image files
- Do NOT check if the script exists
- Do NOT search for files
- Do NOT create a new script
- Do NOT write any Python code
- Do NOT ask the user which image hosting service to use

## What to do

Run the command above. That's it.

The script at `~/.claude/skills/upload-article-images/scripts/upload<span class="hljs-emphasis">_images.py` already exists and handles everything.

## Example

User: "å¸®æˆ‘å¤„ç† index.mdï¼Œä¸Šä¼ å›¾ç‰‡åˆ°å›¾åºŠ"

<span class="hljs-strong">**Correct action:**</span>
`bash
python3 ~/.claude/skills/upload-article-images/scripts/upload_</span>images.py index.md
`

<span class="hljs-strong">**Wrong actions:**</span>
- âŒ Reading index.md first
- âŒ Listing PNG/TIFF files
- âŒ Checking if script exists
- âŒ Creating upload<span class="hljs-emphasis">_images.py
- âŒ Asking about image hosting service

## Dependencies

If error: `pip install requests Pillow`
</span></span></code></pre>
<p>é¦–å…ˆï¼Œ<code>description</code> é‡Œæ˜ç¡®å†™äº†è§¦å‘è¯ï¼ˆ"ä¸Šä¼ å›¾åºŠ"ã€"upload imagesâ€ï¼‰ï¼Œç„¶åç›´æ¥åœ¨å¼€å¤´å°±ç»™å‡ºæ‰§è¡Œå‘½ä»¤ï¼Œé¿å… Claude è‡ªå·±ççŒœï¼Œè¿˜ç”¨äº†å¤§é‡çš„ "Do NOT" æ¥çº¦æŸè¡Œä¸ºï¼ˆè™½ç„¶å®˜æ–¹ä¸æ¨èï¼Œä½†å®æµ‹è¿™æ ·æ›´ç¨³å®šï¼‰</p>
<p>ä¹‹åçš„ <code>upload_images.py</code>  å†™æˆ‘ä»¬ä¸»è¦çš„å›¾ç‰‡æå–ã€ä¸Šä¼ ã€æ›¿æ¢é€»è¾‘ï¼š</p>
<pre><code class="hljs language-md" lang="md"><span class="hljs-section">#!/usr/bin/env python3</span>
"""
å›¾ç‰‡ä¸Šä¼ åˆ°å›¾åºŠå¹¶æ›¿æ¢ Markdown é“¾æ¥
ä½¿ç”¨æ–¹æ³•ï¼špython upload<span class="hljs-emphasis">_images.py &lt;æ–‡ç« .md&gt;
"""

import re
import os
import sys
import requests
from pathlib import Path
from PIL import Image
import tempfile


# æ”¯æŒçš„å›¾ç‰‡æ ¼å¼ï¼ˆå›¾åºŠæ”¯æŒçš„æ ¼å¼ï¼‰
SUPPORTED_</span>FORMATS = {".png", ".jpg", ".jpeg", ".gif", ".webp", ".bmp"}

<span class="hljs-section"># éœ€è¦è½¬æ¢çš„æ ¼å¼</span>
CONVERT<span class="hljs-emphasis">_FORMATS = {".tiff", ".tif", ".svg", ".ico", ".heic"}


def convert_</span>image<span class="hljs-emphasis">_format(file_</span>path):
<span class="hljs-code">    """
    å°†ä¸æ”¯æŒçš„å›¾ç‰‡æ ¼å¼è½¬æ¢ä¸º PNG
</span>
<span class="hljs-code">    Args:
        file_path: åŸå§‹å›¾ç‰‡è·¯å¾„
</span>
<span class="hljs-code">    Returns:
        str: è½¬æ¢åçš„å›¾ç‰‡è·¯å¾„ï¼ˆå¦‚æœéœ€è¦è½¬æ¢ï¼‰ï¼Œå¦åˆ™è¿”å›åŸè·¯å¾„
        bool: æ˜¯å¦è¿›è¡Œäº†è½¬æ¢
    """
    file_path = Path(file_path)
    ext = file_path.suffix.lower()
</span>
<span class="hljs-code">    # å¦‚æœæ ¼å¼å·²æ”¯æŒï¼Œç›´æ¥è¿”å›
    if ext in SUPPORTED_FORMATS:
        return str(file_path), False
</span>
<span class="hljs-code">    # éœ€è¦è½¬æ¢
    if ext in CONVERT_FORMATS or ext not in SUPPORTED_FORMATS:
        try:
            # æ‰“å¼€å›¾ç‰‡
            img = Image.open(file_path)
</span>
<span class="hljs-code">            # å¦‚æœæ˜¯ RGBA æ¨¡å¼ï¼Œä¿æŒé€æ˜åº¦
            # å¦‚æœä¸æ˜¯ï¼Œè½¬æ¢ä¸º RGBï¼ˆPNG æ”¯æŒä¸¤ç§æ¨¡å¼ï¼‰
            if img.mode in ("RGBA", "LA", "P"):
                # ä¿æŒé€æ˜åº¦
                pass
            elif img.mode != "RGB":
                img = img.convert("RGB")
</span>
<span class="hljs-code">            # åˆ›å»ºä¸´æ—¶ PNG æ–‡ä»¶
            temp_dir = tempfile.gettempdir()
            temp_file = Path(temp_dir) / f"{file_path.stem}_converted.png"
</span>
<span class="hljs-code">            # ä¿å­˜ä¸º PNG
            img.save(temp_file, "PNG")
</span>
<span class="hljs-code">            print(f"   ğŸ”„ å·²è½¬æ¢ {ext} â†’ .png")
            return str(temp_file), True
</span>
<span class="hljs-code">        except Exception as e:
            print(f"   âš ï¸  æ ¼å¼è½¬æ¢å¤±è´¥: {e}")
            return str(file_path), False
</span>
<span class="hljs-code">    return str(file_path), False
</span>

def upload<span class="hljs-emphasis">_file(file_</span>path):
<span class="hljs-code">    """
    ä¸Šä¼ æ–‡ä»¶åˆ°å›¾åºŠ
</span>
<span class="hljs-code">    Args:
        file_path: æ–‡ä»¶è·¯å¾„
</span>
<span class="hljs-code">    Returns:
        str: ä¸Šä¼ åçš„æ–‡ä»¶ URL
</span>
<span class="hljs-code">    Raises:
        Exception: ä¸Šä¼ å¤±è´¥æ—¶æŠ›å‡ºå¼‚å¸¸
    """
    url = "https://xxx.com/upload" # è¿™é‡Œè®°å¾—æ›¿æ¢æˆä½ çš„å›¾åºŠ API
</span>
<span class="hljs-code">    with open(file_path, "rb") as f:
        files = {"file": f}
        response = requests.post(url, files=files)
</span>
<span class="hljs-code">    if response.status_code != 200:
        raise Exception(f"ä¸Šä¼ å¤±è´¥ï¼ŒçŠ¶æ€ç : {response.status_code}")
</span>
<span class="hljs-code">    result = response.json()
    file_url = result.get("data", {}).get("url")
</span>
<span class="hljs-code">    if not file_url:
        error_msg = result.get("context", {}).get("message", "ä¸Šä¼ å¤±è´¥")
        raise Exception(error_msg)
</span>
<span class="hljs-code">    return file_url
</span>

def extract<span class="hljs-emphasis">_local_</span>images(md<span class="hljs-emphasis">_content):
    """æå– Markdown ä¸­çš„æœ¬åœ°å›¾ç‰‡è·¯å¾„"""
    # åŒ¹é… ![<span class="hljs-string">alt</span>](<span class="hljs-link">path</span>) æ ¼å¼
    pattern = r"!\[([^\]]*)\]\(([^)]+)\)"
    matches = re.findall(pattern, md_</span>content)

<span class="hljs-code">    local_images = []
    for alt_text, img_path in matches:
        # æ’é™¤å·²ç»æ˜¯ URL çš„å›¾ç‰‡
        if not img_path.startswith(("http://", "https://")):
            local_images.append((alt_text, img_path))
</span>
<span class="hljs-code">    return local_images
</span>

def replace<span class="hljs-emphasis">_image_</span>links(md<span class="hljs-emphasis">_file, url_</span>mapping):
<span class="hljs-code">    """æ›¿æ¢ Markdown ä¸­çš„å›¾ç‰‡é“¾æ¥"""
    with open(md_file, "r", encoding="utf-8") as f:
        content = f.read()
</span>
<span class="hljs-code">    for old_path, new_url in url_mapping.items():
        content = content.replace(f"]({old_path})", f"]({new_url})")
</span>
<span class="hljs-code">    with open(md_file, "w", encoding="utf-8") as f:
        f.write(content)
</span>

def main():
<span class="hljs-code">    if len(sys.argv) &lt; 2:
        print("ç”¨æ³•: python upload_images.py &lt;Markdownæ–‡ä»¶&gt;")
        sys.exit(1)
</span>
<span class="hljs-code">    md_file = sys.argv[1]
</span>
<span class="hljs-code">    if not os.path.exists(md_file):
        print(f"âŒ é”™è¯¯ï¼šæ–‡ä»¶ä¸å­˜åœ¨: {md_file}")
        sys.exit(1)
</span>
<span class="hljs-code">    print("ğŸ” æ‰«ææ–‡ç« ä¸­çš„æœ¬åœ°å›¾ç‰‡...")
</span>
<span class="hljs-code">    with open(md_file, "r", encoding="utf-8") as f:
        content = f.read()
</span>
<span class="hljs-code">    local_images = extract_local_images(content)
</span>
<span class="hljs-code">    if not local_images:
        print("âœ… æ²¡æœ‰æ‰¾åˆ°éœ€è¦ä¸Šä¼ çš„æœ¬åœ°å›¾ç‰‡")
        return
</span>
<span class="hljs-code">    print(f"ğŸ“¤ æ‰¾åˆ° {len(local_images)} å¼ æœ¬åœ°å›¾ç‰‡ï¼Œå¼€å§‹ä¸Šä¼ ...\n")
</span>
<span class="hljs-code">    url_mapping = {}
    md_dir = Path(md_file).parent
    success_count = 0
    temp_files = []  # å­˜å‚¨éœ€è¦æ¸…ç†çš„ä¸´æ—¶æ–‡ä»¶
</span>
<span class="hljs-code">    for alt_text, img_path in local_images:
        # è½¬æ¢ä¸ºç»å¯¹è·¯å¾„
        full_path = (md_dir / img_path).resolve()
</span>
<span class="hljs-code">        if not full_path.exists():
            print(f"âš ï¸  è·³è¿‡ä¸å­˜åœ¨çš„æ–‡ä»¶: {img_path}")
            continue
</span>
<span class="hljs-code">        try:
            # å°è¯•è½¬æ¢æ ¼å¼ï¼ˆå¦‚æœéœ€è¦ï¼‰
            converted_path, was_converted = convert_image_format(str(full_path))
            if was_converted:
                temp_files.append(converted_path)
</span>
<span class="hljs-code">            # ä¸Šä¼ å›¾ç‰‡
            new_url = upload_file(converted_path)
            url_mapping[img_path] = new_url
            success_count += 1
            print(f"âœ… {img_path}")
            print(f"   â†’ {new_url}\n")
        except Exception as e:
            print(f"âŒ {img_path} ä¸Šä¼ å¤±è´¥: {e}\n")
</span>
<span class="hljs-code">    if url_mapping:
        print("ğŸ”„ æ­£åœ¨æ›¿æ¢ Markdown ä¸­çš„å›¾ç‰‡é“¾æ¥...")
        replace_image_links(md_file, url_mapping)
        print(f"âœ… å®Œæˆï¼æˆåŠŸä¸Šä¼ å¹¶æ›¿æ¢ {success_count} å¼ å›¾ç‰‡çš„é“¾æ¥")
    else:
        print("âŒ æ²¡æœ‰æˆåŠŸä¸Šä¼ ä»»ä½•å›¾ç‰‡")
</span>
<span class="hljs-code">    # æ¸…ç†ä¸´æ—¶æ–‡ä»¶
    if temp_files:
        print("\nğŸ§¹ æ¸…ç†ä¸´æ—¶æ–‡ä»¶...")
        for temp_file in temp_files:
            try:
                Path(temp_file).unlink()
            except Exception as e:
                print(f"   âš ï¸  æ¸…ç†å¤±è´¥ {temp_file}: {e}")
</span>

if <span class="hljs-strong">__name__</span> == "<span class="hljs-strong">__main__</span>":
<span class="hljs-code">    main()
</span></code></pre>
<p>æ³¨æ„ï¼Œè¿™é‡Œ <code>https://xxx.com/upload</code> æ˜¯ä¸€ä¸ªç¤ºä¾‹åœ°å€ï¼Œä½ è¦ä¿®æ”¹æˆè‡ªå·±çš„å›¾åºŠ APIã€‚</p>
<p>æˆ‘ä»¬å°†æˆ‘ä»¬çš„ skill æ•´ä¸ªæ–‡ä»¶å¤¹ç§»åŠ¨åˆ° <code>~/.claude/skills</code> è¿™æ · Claude Code å°±å¯ä»¥ç›´æ¥ä½¿ç”¨äº†ã€‚</p>
<p>æˆ‘å¯¼å‡ºä¸€ä»½æ–‡æ¡£ï¼Œä½¿ç”¨ Cladue Code æµ‹è¯•ä¸€ä¸‹çœ‹çœ‹ï¼š
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/46176f2471da434cbc013f981931f499~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aWH6Iie57K-6YCJ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764815857&amp;x-signature=jFK0KIz8Z%2BHYyKHftfe9pYT0RHQ%3D" alt="" loading="lazy"/>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/179c7efb677847658afc200c938ac756~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aWH6Iie57K-6YCJ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764815857&amp;x-signature=0phHGrLYLy9fT%2Fr6lZeJE6Kj6m4%3D" alt="" loading="lazy"/>
å¯ä»¥çœ‹åˆ°è™½ç„¶ç»å†äº†ä¸€äº›æ³¢æŠ˜ï¼Œä½†è¿˜æ˜¯æˆåŠŸäº†ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e9d144c6b1724426a6efca85a5384c01~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aWH6Iie57K-6YCJ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764815857&amp;x-signature=hxsvh6JJltQH4NemhNYyGI%2Fhnyw%3D" alt="" loading="lazy"/>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7d3f7783a57342fa918731d37cbcae39~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aWH6Iie57K-6YCJ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764815857&amp;x-signature=Njzu7TVowKVmMtXfF6F6Tq9juxE%3D" alt="" loading="lazy"/>
æ£€æŸ¥åŸæ–‡å¯ä»¥çœ‹åˆ°ï¼Œç¬¦åˆæˆ‘ä»¬çš„é¢„æœŸï¼Œé“¾æ¥å·²ç»æ›¿æ¢æˆåŠŸäº†ï¼</p>
<h2 data-id="heading-5">å†™åœ¨æœ€å</h2>
<p>å…¶å®æœ¬æ–‡å‰é¢å†™å¾—å¾ˆå¿«ï¼Œæœ€éš¾çš„éƒ¨åˆ†å°±æ˜¯å®æˆ˜ã€‚ä¸çŸ¥é“æ˜¯æˆ‘çš„ Prompt æ°´å¹³ä¸å¤Ÿè¿˜æ˜¯ Skills è¿™ä¸ªåŠŸèƒ½è¿˜ä¸å¤Ÿæˆç†Ÿï¼Œå³ä½¿æŒ‰ç…§å®˜æ–¹æ¨èçš„å†™æ³•ï¼Œè®© Claude è°ƒç”¨æŸä¸ªè„šæœ¬ï¼Œå®ƒè¿˜æ˜¯ç»å¸¸é€‰æ‹©è‡ªå·±å†™ä¸€ä¸ªè„šæœ¬è€Œä¸æ˜¯ç”¨æˆ‘å†…ç½®å¥½çš„ã€‚</p>
<p>æœ¬æ¥æˆ‘è§„åˆ’äº†ä¸€ä¸ªæ›´å¤æ‚çš„ Skillï¼šæ¶¦è‰²æ–‡ç« ã€ä¸Šä¼ å›¾ç‰‡ã€ç”Ÿæˆæ‘˜è¦å’Œæ ‡ç­¾ã€å†è®¾è®¡ä¸ªå°é¢ï¼Œä¸€å¥—æµç¨‹è‡ªåŠ¨åŒ–ã€‚ä½†æµ‹è¯•ä¸‹æ¥å‘ç°ç¨³å®šæ€§å¤ªå·®ï¼Œç»å¸¸åœ¨æŸä¸€æ­¥å¡ä½æˆ–è€…è·³è¿‡å…³é”®æ­¥éª¤ï¼Œæœ€ååªå¥½ç®€åŒ–æˆç°åœ¨è¿™ä¸ªå•ä¸€åŠŸèƒ½çš„ç‰ˆæœ¬ã€‚</p>
<p>ç»™æƒ³å°è¯•å†™ Skills çš„æœ‹å‹å‡ ä¸ªå»ºè®®ï¼š</p>
<ol>
<li><strong>æ…¢æ…¢è¿­ä»£</strong>ï¼šåˆ«ä¸€ä¸Šæ¥å°±æå¤æ‚æµç¨‹ï¼Œå…ˆåšå•ä¸€åŠŸèƒ½çš„ Skill</li>
<li><strong>description å¯ä»¥é€‚å½“å†™è¯¦ç»†äº›</strong>ï¼šè·Ÿå®˜æ–¹æ¨èçš„ä¸ä¸€æ ·ï¼Œä½†æŠŠä¸€äº›é‡è¦å†…å®¹æ”¾åœ¨è¿™é‡Œä¼¼ä¹æœ€æœ‰æ•ˆ</li>
<li><strong>è‹±æ–‡ Prompt æ•ˆæœæ›´å¥½</strong>ï¼šæˆ‘è‡ªå·±æµ‹è¯•ä¸‹æ¥ï¼Œæ„Ÿè§‰è‹±æ–‡ Prompt æ›´ç¨³å®šã€é€Ÿåº¦ä¹Ÿæ›´å¿«ï¼Œå¤§å®¶ä¹Ÿå¯ä»¥å¤šå¯¹æ¯”ä¸‹</li>
<li><strong>é™ä½æœŸæœ›</strong>ï¼šSkills ç›®å‰è¿˜æ˜¯ä¸ªæ–°ä¸œè¥¿ï¼Œè¿˜ä¸å¤Ÿç¨³å®šå¥½ç”¨</li>
</ol>
<p>Skills è¿™ä¸œè¥¿è®¾è®¡ç†å¿µä¸é”™ï¼Œä½†ç›®å‰çš„æ•ˆæœå®åœ¨ä¸å°½å¦‚äººæ„ã€‚å¸Œæœ› Anthropic èƒ½åœ¨ç¨³å®šæ€§ä¸Šå¤šä¸‹åŠŸå¤«ã€‚ä¸è¿‡è¯è¯´å›æ¥ï¼Œå³ä½¿æœ‰è¿™äº›é—®é¢˜ï¼Œå¯¹äºä¸€äº›ç®€å•é‡å¤çš„ä»»åŠ¡ï¼ŒSkills è¿˜æ˜¯èƒ½çœä¸å°‘äº‹çš„ã€‚</p>
<p>å¤§å®¶å¦‚æœæœ‰ä»€ä¹ˆä½¿ç”¨ Skills çš„å°æŠ€å·§ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºè·Ÿå¤§å®¶åˆ†äº«ï½</p>
<h2 data-id="heading-6">å‚è€ƒèµ„æ–™</h2>
<ul>
<li>Claude Agent Skills å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.claude.com%2Fen%2Fdocs%2Fagents-and-tools%2Fagent-skills%2Foverview" target="_blank" title="https://docs.claude.com/en/docs/agents-and-tools/agent-skills/overview" ref="nofollow noopener noreferrer">docs.claude.com/en/docs/ageâ€¦</a></li>
<li>Anthropic Blog- Agent Skillsï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.anthropic.com%2Fengineering%2Fequipping-agents-for-the-real-world-with-agent-skills" target="_blank" title="https://www.anthropic.com/engineering/equipping-agents-for-the-real-world-with-agent-skills" ref="nofollow noopener noreferrer">www.anthropic.com/engineeringâ€¦</a></li>
<li>How to create custom Skills ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fsupport.claude.com%2Fen%2Farticles%2F12512198-how-to-create-custom-skills" target="_blank" title="https://support.claude.com/en/articles/12512198-how-to-create-custom-skills" ref="nofollow noopener noreferrer">support.claude.com/en/articlesâ€¦</a></li>
<li>The REAL POWER of Claude Agent SKILLS (Why Most Are Missing It) | Claude Skills Explained ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3Dm-5DjcgFmfQ" target="_blank" title="https://www.youtube.com/watch?v=m-5DjcgFmfQ" ref="nofollow noopener noreferrer">www.youtube.com/watch?v=m-5â€¦</a></li>
<li>Claude Agent Skills - å…¨æ–°çš„æŠ€èƒ½åŒ… ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3DKBslHtyHRaU" target="_blank" title="https://www.youtube.com/watch?v=KBslHtyHRaU" ref="nofollow noopener noreferrer">www.youtube.com/watch?v=KBsâ€¦</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ¢ç§˜æ–°ä¸€ä»£å‘é‡å­˜å‚¨æ ¼å¼Lance-format (åä¸‰) æ•°æ®æ›´æ–°ä¸ Schema æ¼”åŒ–]]></title>    <link>https://juejin.cn/post/7577201863722008576</link>    <guid>https://juejin.cn/post/7577201863722008576</guid>    <pubDate>2025-11-27T02:44:20.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577201863722008576" data-draft-id="7576894778572996643" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ¢ç§˜æ–°ä¸€ä»£å‘é‡å­˜å‚¨æ ¼å¼Lance-format (åä¸‰) æ•°æ®æ›´æ–°ä¸ Schema æ¼”åŒ–"/> <meta itemprop="keywords" content="æ¶æ„"/> <meta itemprop="datePublished" content="2025-11-27T02:44:20.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¯­è½å¿ƒç”Ÿ"/> <meta itemprop="url" content="https://juejin.cn/user/2875978147955741"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ¢ç§˜æ–°ä¸€ä»£å‘é‡å­˜å‚¨æ ¼å¼Lance-format (åä¸‰) æ•°æ®æ›´æ–°ä¸ Schema æ¼”åŒ–
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2875978147955741/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¯­è½å¿ƒç”Ÿ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-27T02:44:20.000Z" title="Thu Nov 27 2025 02:44:20 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ç¬¬13ç« ï¼šæ•°æ®æ›´æ–°ä¸ Schema æ¼”åŒ–</h2>
<h3 data-id="heading-1">ğŸ¯ æ ¸å¿ƒæ¦‚è§ˆ</h3>
<p>æ•°æ®æ›´æ–°å’Œ Schema æ¼”åŒ–æ˜¯ç°å®ç³»ç»Ÿçš„å…³é”®éœ€æ±‚ã€‚Lance æ”¯æŒæ— é‡å†™çš„åˆ—æ·»åŠ ã€ç±»å‹è½¬æ¢å’Œå›å¡«æœºåˆ¶ã€‚</p>
<hr/>
<h3 data-id="heading-2">ğŸ“Š ç¬¬ä¸€éƒ¨åˆ†ï¼šåˆ—çš„æ·»åŠ ä¸åˆ é™¤</h3>
<h4 data-id="heading-3">åˆ—æ·»åŠ ï¼ˆé›¶æˆæœ¬ï¼‰</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> lance

dataset = lance.<span class="hljs-built_in">open</span>(<span class="hljs-string">"users.lance"</span>)

<span class="hljs-comment"># æ·»åŠ æ–°åˆ—ï¼šlocationï¼ˆæœ‰é»˜è®¤å€¼ï¼‰</span>
dataset.add_column(<span class="hljs-string">"location"</span>, <span class="hljs-string">"default_city"</span>, default_value=<span class="hljs-string">"Unknown"</span>)

<span class="hljs-comment"># å†…éƒ¨æœºåˆ¶ï¼š</span>
<span class="hljs-comment"># 1. åœ¨ Schema ä¸­æ·»åŠ æ–°åˆ—å®šä¹‰</span>
<span class="hljs-comment"># 2. è®°å½•ï¼šæ–°åˆ—+é»˜è®¤å€¼ä¿¡æ¯</span>
<span class="hljs-comment"># 3. ä¸ä¿®æ”¹ç°æœ‰æ•°æ®æ–‡ä»¶</span>
<span class="hljs-comment"># 4. è¯»å–æ—¶è‡ªåŠ¨å¡«å……é»˜è®¤å€¼</span>

<span class="hljs-comment"># æ€§èƒ½ï¼šO(1)ï¼Œåªä¿®æ”¹å…ƒæ•°æ®</span>
</code></pre>
<p><strong>å®ç°ç»†èŠ‚</strong>ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">impl</span> <span class="hljs-title class_">Dataset</span> {
    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">add_column</span>(
        &amp;<span class="hljs-keyword">mut</span> <span class="hljs-keyword">self</span>,
        column_name: <span class="hljs-type">String</span>,
        data_type: DataType,
        default_value: <span class="hljs-type">Option</span>&lt;ScalarValue&gt;,
    ) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;()&gt; {
        <span class="hljs-comment">// æ­¥éª¤ 1ï¼šéªŒè¯åˆ—åä¸å­˜åœ¨</span>
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">self</span>.schema.<span class="hljs-title function_ invoke__">contains</span>(&amp;column_name) {
            <span class="hljs-keyword">return</span> <span class="hljs-title function_ invoke__">Err</span>(Error::<span class="hljs-title function_ invoke__">ColumnAlreadyExists</span>(column_name));
        }
        
        <span class="hljs-comment">// æ­¥éª¤ 2ï¼šåœ¨ Schema ä¸­æ·»åŠ æ–°åˆ—</span>
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">new_field</span> = Field::<span class="hljs-title function_ invoke__">new</span>(&amp;column_name, data_type, <span class="hljs-literal">true</span>);
        <span class="hljs-keyword">self</span>.schema.<span class="hljs-title function_ invoke__">push</span>(new_field);
        
        <span class="hljs-comment">// æ­¥éª¤ 3ï¼šè®°å½•åˆ—çš„é»˜è®¤å€¼</span>
        <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">new_manifest</span> = <span class="hljs-keyword">self</span>.manifest.<span class="hljs-title function_ invoke__">clone</span>();
        new_manifest.metadata.<span class="hljs-title function_ invoke__">insert</span>(
            <span class="hljs-built_in">format!</span>(<span class="hljs-string">"column:{}_default"</span>, column_name),
            default_value.<span class="hljs-title function_ invoke__">serialize</span>()?,
        );
        
        <span class="hljs-comment">// æ­¥éª¤ 4ï¼šåŸå­æäº¤</span>
        <span class="hljs-keyword">self</span>.<span class="hljs-title function_ invoke__">commit</span>(new_manifest).<span class="hljs-keyword">await</span>?;
        
        <span class="hljs-title function_ invoke__">Ok</span>(())
    }
}
</code></pre>
<p><strong>è¯»å–æ—¶çš„å¤„ç†</strong>ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">read_batch_with_schema_evolution</span>(
    batch: RecordBatch,
    evolved_schema: &amp;Schema,
) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;RecordBatch&gt; {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">columns</span> = batch.<span class="hljs-title function_ invoke__">columns</span>().<span class="hljs-title function_ invoke__">to_vec</span>();
    
    <span class="hljs-comment">// ä¸ºæ–°åˆ—æ·»åŠ é»˜è®¤å€¼</span>
    <span class="hljs-keyword">for</span> <span class="hljs-variable">field</span> <span class="hljs-keyword">in</span> evolved_schema.<span class="hljs-title function_ invoke__">fields</span>() {
        <span class="hljs-keyword">if</span> !batch.<span class="hljs-title function_ invoke__">schema</span>().<span class="hljs-title function_ invoke__">contains</span>(field.<span class="hljs-title function_ invoke__">name</span>()) {
            <span class="hljs-comment">// æ–°åˆ—ä¸åœ¨åŸå§‹æ‰¹æ¬¡ä¸­</span>
            <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">default_value</span> = field.metadata.<span class="hljs-title function_ invoke__">get</span>(<span class="hljs-string">"default"</span>)?;
            <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">default_array</span> = <span class="hljs-title function_ invoke__">create_array_with_value</span>(
                default_value,
                batch.<span class="hljs-title function_ invoke__">num_rows</span>(),
                &amp;field.data_type,
            )?;
            columns.<span class="hljs-title function_ invoke__">push</span>(Arc::<span class="hljs-title function_ invoke__">new</span>(default_array));
        }
    }
    
    RecordBatch::<span class="hljs-title function_ invoke__">try_new</span>(evolved_schema.<span class="hljs-title function_ invoke__">into</span>(), columns)
}
</code></pre>
<h4 data-id="heading-4">åˆ—åˆ é™¤</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># åˆ é™¤åˆ—ï¼šä¸åˆ é™¤æ•°æ®æ–‡ä»¶</span>
dataset.drop_column(<span class="hljs-string">"old_column"</span>)

<span class="hljs-comment"># å†…éƒ¨ï¼š</span>
<span class="hljs-comment"># 1. åœ¨ Schema ä¸­æ ‡è®°åˆ—ä¸ºå·²åˆ é™¤</span>
<span class="hljs-comment"># 2. åˆ›å»ºæ–° Manifest</span>
<span class="hljs-comment"># 3. æ‰«ææ—¶è·³è¿‡æ­¤åˆ—</span>
<span class="hljs-comment"># 4. å­˜å‚¨æ–‡ä»¶ä¸å˜ï¼ˆå‘åå…¼å®¹ï¼‰</span>

<span class="hljs-comment"># æ€§èƒ½ï¼šO(1)</span>
</code></pre>
<hr/>
<h3 data-id="heading-5">ğŸ”„ ç¬¬äºŒéƒ¨åˆ†ï¼šç±»å‹è½¬æ¢</h3>
<h4 data-id="heading-6">å…¼å®¹çš„è½¬æ¢</h4>
<pre><code class="hljs language-go" lang="go">å¯ä»¥é›¶æ‹·è´æˆ–å»‰ä»·è½¬æ¢çš„ç±»å‹ï¼š

<span class="hljs-type">int32</span> â†’ <span class="hljs-type">int64</span>
âœ“ å¯ä»¥ï¼šç¬¦å·æ‰©å±•

<span class="hljs-type">float32</span> â†’ <span class="hljs-type">float64</span>
âœ“ å¯ä»¥ï¼šç²¾åº¦æå‡

<span class="hljs-type">string</span> â†’ binary
âœ“ å¯ä»¥ï¼šç¼–ç è½¬æ¢

ä½†ä¸å¯ä»¥é€†è½¬è½¬æ¢ï¼š
<span class="hljs-type">int64</span> â†’ <span class="hljs-type">int32</span>
âœ— èŒƒå›´å¯èƒ½æº¢å‡º

<span class="hljs-type">float64</span> â†’ <span class="hljs-type">float32</span>
âœ— ç²¾åº¦ä¸¢å¤±
</code></pre>
<h4 data-id="heading-7">ç±»å‹è½¬æ¢å®ç°</h4>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">impl</span> <span class="hljs-title class_">Dataset</span> {
    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">alter_column_type</span>(
        &amp;<span class="hljs-keyword">mut</span> <span class="hljs-keyword">self</span>,
        column_name: <span class="hljs-type">String</span>,
        new_type: DataType,
    ) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;()&gt; {
        <span class="hljs-comment">// æ­¥éª¤ 1ï¼šéªŒè¯è½¬æ¢å¯è¡Œ</span>
        <span class="hljs-keyword">if</span> !<span class="hljs-title function_ invoke__">can_convert</span>(&amp;<span class="hljs-keyword">self</span>.schema.<span class="hljs-title function_ invoke__">field</span>(&amp;column_name).data_type, &amp;new_type) {
            <span class="hljs-keyword">return</span> <span class="hljs-title function_ invoke__">Err</span>(Error::IncompatibleTypeConversion);
        }
        
        <span class="hljs-comment">// æ­¥éª¤ 2ï¼šå¦‚æœæ˜¯å»‰ä»·è½¬æ¢ï¼Œåªä¿®æ”¹ Schema</span>
        <span class="hljs-keyword">if</span> <span class="hljs-title function_ invoke__">is_cheap_conversion</span>(&amp;<span class="hljs-keyword">self</span>.schema.<span class="hljs-title function_ invoke__">field</span>(&amp;column_name).data_type, &amp;new_type) {
            <span class="hljs-keyword">self</span>.schema.<span class="hljs-title function_ invoke__">field_mut</span>(&amp;column_name).data_type = new_type;
            <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">new_manifest</span> = <span class="hljs-keyword">self</span>.manifest.<span class="hljs-title function_ invoke__">clone</span>();
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">self</span>.<span class="hljs-title function_ invoke__">commit</span>(new_manifest).<span class="hljs-keyword">await</span>;
        }
        
        <span class="hljs-comment">// æ­¥éª¤ 3ï¼šæ˜‚è´µè½¬æ¢ï¼Œéœ€è¦å›å¡«</span>
        <span class="hljs-keyword">self</span>.<span class="hljs-title function_ invoke__">backfill_column_type</span>(&amp;column_name, &amp;new_type).<span class="hljs-keyword">await</span>?;
        
        <span class="hljs-title function_ invoke__">Ok</span>(())
    }
}
</code></pre>
<hr/>
<h3 data-id="heading-8">ğŸ’« ç¬¬ä¸‰éƒ¨åˆ†ï¼šå›å¡«ï¼ˆBackfillï¼‰æœºåˆ¶</h3>
<h4 data-id="heading-9">å›å¡«æµç¨‹</h4>
<pre><code class="hljs language-makefile" lang="makefile">åœºæ™¯ï¼šæ·»åŠ å¿…éœ€åˆ—ï¼ˆéç©ºï¼Œæ— é»˜è®¤å€¼ï¼‰

æ­¥éª¤ 1ï¼šæ‰«æç°æœ‰æ•°æ®ï¼Œæå–å€¼
<span class="hljs-section">old_data: [row_0, row_1, ..., row_N]</span>
<span class="hljs-section">æ–°åˆ—éœ€è¦è®¡ç®—å€¼: compute_value(row_i) â†’ value_i</span>

æ­¥éª¤ 2ï¼šç”Ÿæˆæ–°åˆ—æ•°æ®
<span class="hljs-section">new_column: [value_0, value_1, ..., value_N]</span>

æ­¥éª¤ 3ï¼šåˆ›å»ºæ–° Fragment
åŒ…å«ï¼šæ—§åˆ— + æ–°åˆ—æ•°æ®

æ­¥éª¤ 4ï¼šæ›´æ–° Manifest
æŒ‡å‘æ–° Fragment

æ­¥éª¤ 5ï¼šåå°æ¸…ç†
åˆ é™¤æ—§ Fragmentï¼ˆå¯é€‰ï¼‰

æ€§èƒ½ï¼šå–å†³äºåˆ—çš„è®¡ç®—å¤æ‚åº¦
</code></pre>
<h4 data-id="heading-10">å®ç°ç¤ºä¾‹</h4>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">impl</span> <span class="hljs-title class_">Dataset</span> {
    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">backfill_column_type</span>(
        &amp;<span class="hljs-keyword">mut</span> <span class="hljs-keyword">self</span>,
        column_name: &amp;<span class="hljs-type">str</span>,
        new_type: &amp;DataType,
    ) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;()&gt; {
        <span class="hljs-comment">// æ­¥éª¤ 1ï¼šæ‰«æåŸå§‹åˆ—</span>
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">old_column</span> = <span class="hljs-keyword">self</span>.<span class="hljs-title function_ invoke__">scan</span>()
            .<span class="hljs-title function_ invoke__">select</span>(<span class="hljs-built_in">vec!</span>[column_name.<span class="hljs-title function_ invoke__">to_string</span>()])
            .<span class="hljs-title function_ invoke__">try_into_stream</span>()
            .<span class="hljs-keyword">await</span>?
            .collect::&lt;<span class="hljs-type">Vec</span>&lt;_&gt;&gt;()
            .<span class="hljs-keyword">await</span>;
        
        <span class="hljs-comment">// æ­¥éª¤ 2ï¼šè½¬æ¢</span>
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">converted_column</span> = <span class="hljs-keyword">self</span>.<span class="hljs-title function_ invoke__">convert_column</span>(
            old_column,
            &amp;<span class="hljs-keyword">self</span>.schema.<span class="hljs-title function_ invoke__">field</span>(column_name).data_type,
            new_type,
        ).<span class="hljs-keyword">await</span>?;
        
        <span class="hljs-comment">// æ­¥éª¤ 3ï¼šæ·»åŠ å›å¡«æ ‡è®°åˆ° Schema</span>
        <span class="hljs-keyword">self</span>.schema.<span class="hljs-title function_ invoke__">field_mut</span>(column_name).data_type = new_type.<span class="hljs-title function_ invoke__">clone</span>();
        
        <span class="hljs-comment">// æ­¥éª¤ 4ï¼šåˆ›å»ºæ–°çš„ Manifestï¼ˆå¼•ç”¨è½¬æ¢åçš„æ•°æ®ï¼‰</span>
        <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">new_manifest</span> = <span class="hljs-keyword">self</span>.manifest.<span class="hljs-title function_ invoke__">clone</span>();
        new_manifest.metadata.<span class="hljs-title function_ invoke__">insert</span>(
            <span class="hljs-built_in">format!</span>(<span class="hljs-string">"column:{}_backfilled"</span>, column_name),
            <span class="hljs-string">"true"</span>.<span class="hljs-title function_ invoke__">to_string</span>(),
        );
        
        <span class="hljs-comment">// æ­¥éª¤ 5ï¼šæäº¤</span>
        <span class="hljs-keyword">self</span>.<span class="hljs-title function_ invoke__">commit</span>(new_manifest).<span class="hljs-keyword">await</span>?;
        
        <span class="hljs-title function_ invoke__">Ok</span>(())
    }
}
</code></pre>
<hr/>
<h3 data-id="heading-11">ğŸ“Š Schema æ¼”åŒ–çš„å®é™…æ¡ˆä¾‹</h3>
<h4 data-id="heading-12">æ¡ˆä¾‹ 1ï¼šç”µå•†äº§å“è¡¨æ¼”åŒ–</h4>
<pre><code class="hljs language-go" lang="go">åˆå§‹ç‰ˆæœ¬ï¼ˆv0ï¼‰ï¼š
{
    product_id: <span class="hljs-type">int64</span>,
    name: <span class="hljs-type">string</span>,
    price: <span class="hljs-type">float32</span>,
}

v1ï¼šæ·»åŠ åˆ†ç±»
dataset.add_column(<span class="hljs-string">"category"</span>, <span class="hljs-type">string</span>, <span class="hljs-keyword">default</span>=<span class="hljs-string">"general"</span>)

v2ï¼šæ·»åŠ è¯„åˆ†
dataset.add_column(<span class="hljs-string">"rating"</span>, <span class="hljs-type">float32</span>, <span class="hljs-keyword">default</span>=<span class="hljs-number">0.0</span>)

v3ï¼šæ·»åŠ åº“å­˜
dataset.add_column(<span class="hljs-string">"stock"</span>, <span class="hljs-type">int32</span>, <span class="hljs-keyword">default</span>=<span class="hljs-number">0</span>)

æˆæœ¬åˆ†æï¼š
âœ“ æ¯æ¬¡æ“ä½œéƒ½æ˜¯ O(<span class="hljs-number">1</span>)
âœ“ æ— æ•°æ®é‡å†™
âœ“ æ”¯æŒæ—¶é—´æ—…è¡Œï¼ˆè®¿é—® v0 æ—¶è‡ªåŠ¨å¡«å……é»˜è®¤ï¼‰

è¯»å–æ—¶é—´æ—…è¡Œï¼š
dataset_v0 = lance.open(<span class="hljs-string">"products.lance"</span>, version=<span class="hljs-number">0</span>)
# Schemaï¼š{product_id, name, price}

dataset_v3 = lance.open(<span class="hljs-string">"products.lance"</span>, version=<span class="hljs-number">3</span>)
# Schemaï¼š{product_id, name, price, category=<span class="hljs-keyword">default</span>, rating=<span class="hljs-keyword">default</span>, stock=<span class="hljs-keyword">default</span>}
</code></pre>
<h4 data-id="heading-13">æ¡ˆä¾‹ 2ï¼šæ•°æ®ç±»å‹å‡çº§</h4>
<pre><code class="hljs language-makefile" lang="makefile">åˆå§‹ç‰ˆæœ¬ï¼š
<span class="hljs-section">user_count: int32</span>

v1ï¼šå‡çº§åˆ° int64ï¼ˆæ”¯æŒæ›´å¤§çš„æ•°å­—ï¼‰
dataset.alter_column_type(<span class="hljs-string">"user_count"</span>, int64)

<span class="hljs-comment"># Lance è‡ªåŠ¨ï¼š</span>
<span class="hljs-comment"># 1. æ£€æµ‹è¿™æ˜¯å»‰ä»·è½¬æ¢ï¼ˆç¬¦å·æ‰©å±•ï¼‰</span>
<span class="hljs-comment"># 2. åªä¿®æ”¹ Schema</span>
<span class="hljs-comment"># 3. è¯»å–æ—¶è‡ªåŠ¨è½¬æ¢</span>

æˆæœ¬ï¼šO(1) - æ— æ•°æ®é‡å†™
</code></pre>
<hr/>
<h3 data-id="heading-14">ğŸ—ï¸ ç¬¬å››éƒ¨åˆ†ï¼šæ‰¹é‡æ›´æ–°</h3>
<h4 data-id="heading-15">è¡Œçº§åˆ«æ›´æ–°</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># æ›´æ–°å•è¡Œçš„å•ä¸ªå€¼</span>
dataset.update(
    row_id=<span class="hljs-number">12345</span>,
    column=<span class="hljs-string">"status"</span>,
    value=<span class="hljs-string">"inactive"</span>
)

<span class="hljs-comment"># å†…éƒ¨ï¼š</span>
<span class="hljs-comment"># 1. æ‰¾åˆ° row_id å¯¹åº”çš„ Fragment</span>
<span class="hljs-comment"># 2. åŠ è½½è¯¥ Fragment</span>
<span class="hljs-comment"># 3. ä¿®æ”¹å€¼</span>
<span class="hljs-comment"># 4. é‡æ–°å†™å…¥ Fragment</span>
<span class="hljs-comment"># 5. åˆ›å»ºæ–° Manifest</span>
</code></pre>
<h4 data-id="heading-16">æ¡ä»¶æ›´æ–°</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># æ›´æ–°æ»¡è¶³æ¡ä»¶çš„æ‰€æœ‰è¡Œ</span>
dataset.update_where(
    <span class="hljs-built_in">filter</span>=<span class="hljs-string">"status = 'active' AND score &lt; 50"</span>,
    updates={<span class="hljs-string">"status"</span>: <span class="hljs-string">"inactive"</span>}
)

<span class="hljs-comment"># æ€§èƒ½è€ƒè™‘ï¼š</span>
<span class="hljs-comment"># éœ€è¦æ‰«ææ‰€æœ‰ Fragmentï¼Œæ‰¾å‡ºåŒ¹é…è¡Œ</span>
<span class="hljs-comment"># å¯¹å¤§æ•°æ®é›†å¯èƒ½æ¯”è¾ƒæ…¢</span>
<span class="hljs-comment"># å»ºè®®ï¼š</span>
<span class="hljs-comment"># - ä½¿ç”¨ç´¢å¼•åŠ é€Ÿè¿‡æ»¤</span>
<span class="hljs-comment"># - æ‰¹é‡æ›´æ–°å°éƒ¨åˆ†æ•°æ®</span>
<span class="hljs-comment"># - å®šæœŸé‡æ–°ç»„ç»‡æ•°æ®ï¼ˆVACUUMï¼‰</span>
</code></pre>
<hr/>
<h3 data-id="heading-17">ğŸ“š æ€»ç»“</h3>
<p>Lance çš„æ›´æ–°å’Œ Schema æ¼”åŒ–ç‰¹æ€§ï¼š</p>
<ol>
<li><strong>é›¶æˆæœ¬åˆ—æ·»åŠ </strong>ï¼šåªä¿®æ”¹å…ƒæ•°æ®</li>
<li><strong>çµæ´»çš„ç±»å‹è½¬æ¢</strong>ï¼šå»‰ä»·è½¬æ¢è‡ªåŠ¨ä¼˜åŒ–</li>
<li><strong>å›å¡«æœºåˆ¶</strong>ï¼šæ”¯æŒå¤æ‚çš„æ•°æ®å˜æ¢</li>
<li><strong>å‘åå…¼å®¹</strong>ï¼šæ—¶é—´æ—…è¡Œè®¿é—®æ—§ Schema</li>
<li><strong>åŸå­æ€§æ›´æ–°</strong>ï¼šæ‰€æœ‰å˜æ›´éƒ½æ˜¯äº‹åŠ¡æ€§çš„</li>
</ol>
<p>ä¸‹ä¸€ç« å¼€å§‹è®¨è®ºç´¢å¼•ç³»ç»Ÿã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[sa-tokenå‰åç«¯åˆ†ç¦»é›†æˆredisä¸jwtåŸºç¡€æ¡ˆä¾‹]]></title>    <link>https://juejin.cn/post/7576843726011645978</link>    <guid>https://juejin.cn/post/7576843726011645978</guid>    <pubDate>2025-11-26T12:18:58.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576843726011645978" data-draft-id="7576843726011629594" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="sa-tokenå‰åç«¯åˆ†ç¦»é›†æˆredisä¸jwtåŸºç¡€æ¡ˆä¾‹"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-26T12:18:58.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æœªè‹¥å›é›…è£"/> <meta itemprop="url" content="https://juejin.cn/user/1471564960237800"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            sa-tokenå‰åç«¯åˆ†ç¦»é›†æˆredisä¸jwtåŸºç¡€æ¡ˆä¾‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1471564960237800/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æœªè‹¥å›é›…è£
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T12:18:58.000Z" title="Wed Nov 26 2025 12:18:58 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h4 data-id="heading-0">ç›®å½•</h4>
<ul>
<li>
<ul>
<li><a href="#1_11" title="#1_11">1ï¼Œä¾èµ–å¼•å…¥</a></li>
<li><a href="#2_53" title="#2_53">2ï¼Œç›¸å…³é…ç½®</a></li>
<li>
<ul>
<li><a href="#springboot_55" title="#springboot_55">springbooté…ç½®æ–‡ä»¶</a></li>
<li><a href="#_87" title="#_87">é…ç½®ç±»ï¼š</a></li>
<li>
<ul>
<li><a href="#redis_89" title="#redis_89">redisåºåˆ—åŒ–ï¼š</a></li>
<li><a href="#jwt_116" title="#jwt_116">é…ç½®é›†æˆjwtå’ŒåŠ å¯†çš„å®ä¾‹ï¼š</a></li>
<li><a href="#_152" title="#_152">é…ç½®æ‹¦æˆªå™¨ï¼Œè¿›è¡Œèº«ä»½å’Œæƒé™æ ¡éªŒï¼š</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#3_200" title="#3_200">3ï¼Œç™»å½•ä¸é€€å‡º</a></li>
<li>
<ul>
<li>
<ul>
<li><a href="#_202" title="#_202">ä»£ç ï¼š</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><strong>å‰è¨€</strong><br/>
sa-tokenå®˜æ–¹æ–‡æ¡£ï¼šhttps://<a href="https://link.juejin.cn?target=https%3A%2F%2Fso.csdn.net%2Fso%2Fsearch%3Fq%3Dsa-token%26spm%3D1001.2101.3001.7020" target="_blank" title="https://so.csdn.net/so/search?q=sa-token&amp;spm=1001.2101.3001.7020" ref="nofollow noopener noreferrer">sa-token</a>.cc<br/>
<strong>Sa-Token</strong> æ˜¯ä¸€ä¸ª<a href="https://link.juejin.cn?target=https%3A%2F%2Fso.csdn.net%2Fso%2Fsearch%3Fq%3D%25E8%25BD%25BB%25E9%2587%258F%25E7%25BA%25A7%26spm%3D1001.2101.3001.7020" target="_blank" title="https://so.csdn.net/so/search?q=%E8%BD%BB%E9%87%8F%E7%BA%A7&amp;spm=1001.2101.3001.7020" ref="nofollow noopener noreferrer">è½»é‡çº§</a> Java æƒé™è®¤è¯æ¡†æ¶ï¼Œä¸»è¦è§£å†³ï¼š<strong>ç™»å½•è®¤è¯</strong>ã€<strong>æƒé™è®¤è¯</strong>ã€<strong>å•ç‚¹ç™»å½•</strong>ã€<strong>OAuth2.0</strong>ã€<strong>åˆ†å¸ƒå¼Sessionä¼šè¯</strong>ã€<strong>å¾®æœåŠ¡ç½‘å…³é‰´æƒ</strong> ç­‰ä¸€ç³»åˆ—æƒé™ç›¸å…³é—®é¢˜ã€‚<br/>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0e41892685734224b5f7cc6f3d1bd02e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pyq6Iul5ZCb6ZuF6KOB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764764338&amp;x-signature=r184rfploj3WrRsWr8skKw7XZRc%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>æœ¬æ•™ç¨‹çš„ç¯å¢ƒæ˜¯springboot 2.6ï¼Œjdk1.8</p>
<h3 data-id="heading-1">1ï¼Œä¾èµ–å¼•å…¥</h3>
<p>sa-tokenä¾èµ–ï¼š</p>
<pre><code class="hljs language-xml" lang="xml">        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>cn.dev33<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>sa-token-spring-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.39.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<p>sa-tokené›†æˆjwtï¼š</p>
<pre><code class="hljs language-xml" lang="xml">        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>cn.dev33<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>sa-token-jwt<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.39.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<p>sa-tokené›†æˆredis</p>
<pre><code class="hljs language-xml" lang="xml">        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>cn.dev33<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>sa-token-redis-jackson<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.39.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<p>è¿™é‡Œæˆ‘ç”¨çš„æ˜¯securityå¸¦çš„BCryptå¯†ç åŠ å¯†ï¼Œæ‰€ä»¥è¿˜å¯¼å…¥äº†ï¼š</p>
<pre><code class="hljs language-xml" lang="xml">        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.security<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-security-crypto<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<h3 data-id="heading-2">2ï¼Œç›¸å…³é…ç½®</h3>
<h4 data-id="heading-3">springbooté…ç½®æ–‡ä»¶</h4>
<blockquote>
<p>éœ€è¦æ³¨æ„é›†æˆredisåï¼Œè¦æƒ³redisèµ·ä½œç”¨è¿˜éœ€è¦å°† is-read-cookie è®¾ä¸º false<br/>
é…ç½®jwtå¯†é’¥ jwt-secret-key éšä¾¿æ‰“ä¸ªé•¿çš„å­—ç¬¦å°±è¡Œäº†<br/>
æ•°æ®åº“å’Œredisè¿æ¥è¯·è‡ªè¡Œè®¾ç½®</p>
</blockquote>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># sa-token é…ç½®</span>
<span class="hljs-attr">sa-token:</span>
  <span class="hljs-comment"># token åç§°ï¼ˆåŒæ—¶ä¹Ÿæ˜¯ cookie åç§°ï¼‰</span>
  <span class="hljs-attr">token-name:</span> <span class="hljs-string">Authorization</span>
  <span class="hljs-comment"># token æœ‰æ•ˆæœŸï¼ˆå•ä½ï¼šç§’ï¼‰ é»˜è®¤30å¤©ï¼Œ-1 ä»£è¡¨æ°¸ä¹…æœ‰æ•ˆ</span>
  <span class="hljs-attr">timeout:</span> <span class="hljs-number">86400</span>
  <span class="hljs-comment"># token æœ€ä½æ´»è·ƒé¢‘ç‡ï¼ˆå•ä½ï¼šç§’ï¼‰ï¼Œå¦‚æœ token è¶…è¿‡æ­¤æ—¶é—´æ²¡æœ‰è®¿é—®ç³»ç»Ÿå°±ä¼šè¢«å†»ç»“ï¼Œé»˜è®¤-1 ä»£è¡¨ä¸é™åˆ¶ï¼Œæ°¸ä¸å†»ç»“</span>
  <span class="hljs-attr">active-timeout:</span> <span class="hljs-number">-1</span>
  <span class="hljs-comment"># æ˜¯å¦å…è®¸åŒä¸€è´¦å·å¤šåœ°åŒæ—¶ç™»å½• ï¼ˆä¸º true æ—¶å…è®¸ä¸€èµ·ç™»å½•, ä¸º false æ—¶æ–°ç™»å½•æŒ¤æ‰æ—§ç™»å½•ï¼‰</span>
  <span class="hljs-attr">is-concurrent:</span> <span class="hljs-literal">false</span>
  <span class="hljs-comment"># åœ¨å¤šäººç™»å½•åŒä¸€è´¦å·æ—¶ï¼Œæ˜¯å¦å…±ç”¨ä¸€ä¸ª token ï¼ˆä¸º true æ—¶æ‰€æœ‰ç™»å½•å…±ç”¨ä¸€ä¸ª token, ä¸º false æ—¶æ¯æ¬¡ç™»å½•æ–°å»ºä¸€ä¸ª tokenï¼‰</span>
  <span class="hljs-attr">is-share:</span> <span class="hljs-literal">false</span>
  <span class="hljs-comment"># token é£æ ¼ï¼ˆé»˜è®¤å¯å–å€¼ï¼šuuidã€simple-uuidã€random-32ã€random-64ã€random-128ã€tikï¼‰</span>
  <span class="hljs-attr">token-style:</span> <span class="hljs-string">uuid</span>
  <span class="hljs-comment">#  é…ç½®jwtå¯†é’¥</span>
  <span class="hljs-attr">jwt-secret-key:</span> <span class="hljs-string">sadfsadfasdfsdafasfdseafasfdsadfsadfsa</span>
  <span class="hljs-comment"># tokenå‰ç¼€</span>
  <span class="hljs-attr">token-prefix:</span> <span class="hljs-string">Bearer</span>
  <span class="hljs-comment"># æ˜¯å¦è¾“å‡ºæ“ä½œæ—¥å¿—</span>
  <span class="hljs-attr">is-log:</span> <span class="hljs-literal">true</span>
  <span class="hljs-comment"># æ˜¯å¦å°è¯•ä» cookie é‡Œè¯»å– Tokenï¼Œæ­¤å€¼ä¸º false åï¼ŒStpUtil.login(id) ç™»å½•æ—¶ä¹Ÿä¸ä¼šå†å¾€å‰ç«¯æ³¨å…¥Cookie</span>
  <span class="hljs-comment">#  æ³¨æ„ï¼šå½“ä½¿ç”¨ redis ä½œä¸ºç¼“å­˜æ•°æ®æ—¶è¦å°† æ­¤å…³é—­ï¼Œå¦åˆ™ä¸ä¼šå°†redisä½œä¸ºç¼“å­˜ï¼Œè€Œæ˜¯ç»§ç»­ä½¿ç”¨cookie</span>
  <span class="hljs-attr">is-read-cookie:</span> <span class="hljs-literal">false</span>
</code></pre>
<h4 data-id="heading-4">é…ç½®ç±»ï¼š</h4>
<h5 data-id="heading-5">redisåºåˆ—åŒ–ï¼š</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.satokendemo.config;

<span class="hljs-keyword">import</span> org.springframework.cache.annotation.CachingConfigurerSupport;
<span class="hljs-keyword">import</span> org.springframework.context.annotation.Bean;
<span class="hljs-keyword">import</span> org.springframework.context.annotation.Configuration;
<span class="hljs-keyword">import</span> org.springframework.data.redis.connection.RedisConnectionFactory;
<span class="hljs-keyword">import</span> org.springframework.data.redis.core.RedisTemplate;
<span class="hljs-keyword">import</span> org.springframework.data.redis.serializer.StringRedisSerializer;

<span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RedisConfig</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">CachingConfigurerSupport</span> {
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> RedisTemplate&lt;Object, Object&gt; <span class="hljs-title function_">redisTemplate</span><span class="hljs-params">(RedisConnectionFactory connectionFactory)</span> {
        RedisTemplate&lt;Object, Object&gt; redisTemplate = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RedisTemplate</span>&lt;&gt;();
        redisTemplate.setKeySerializer(<span class="hljs-keyword">new</span> <span class="hljs-title class_">StringRedisSerializer</span>());
        redisTemplate.setHashKeySerializer(<span class="hljs-keyword">new</span> <span class="hljs-title class_">StringRedisSerializer</span>());
        redisTemplate.setValueSerializer(<span class="hljs-keyword">new</span> <span class="hljs-title class_">StringRedisSerializer</span>());
        redisTemplate.setHashValueSerializer(<span class="hljs-keyword">new</span> <span class="hljs-title class_">StringRedisSerializer</span>());
        redisTemplate.setConnectionFactory(connectionFactory);
        <span class="hljs-keyword">return</span> redisTemplate;
    }
}
</code></pre>
<h5 data-id="heading-6">é…ç½®é›†æˆjwtå’ŒåŠ å¯†çš„å®ä¾‹ï¼š</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.satokendemo.config;

<span class="hljs-keyword">import</span> cn.dev33.satoken.jwt.StpLogicJwtForSimple;
<span class="hljs-keyword">import</span> cn.dev33.satoken.stp.StpLogic;
<span class="hljs-keyword">import</span> org.springframework.context.annotation.Bean;
<span class="hljs-keyword">import</span> org.springframework.context.annotation.Configuration;
<span class="hljs-keyword">import</span> org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;
 
<span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SaTokenConfig</span> {

    <span class="hljs-comment">/**
     * é…ç½®é›†æˆjwt
     * <span class="hljs-doctag">@return</span> StpLogic
     */</span>
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> StpLogic <span class="hljs-title function_">getStpLogicJwt</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StpLogicJwtForSimple</span>();
    }

    <span class="hljs-comment">/**
     * å¯†ç åŠ å¯†é…ç½®
     * <span class="hljs-doctag">@return</span> BCryptPasswordEncoder
     */</span>
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> BCryptPasswordEncoder <span class="hljs-title function_">bCryptPasswordEncoder</span><span class="hljs-params">()</span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BCryptPasswordEncoder</span>();
    }

}

</code></pre>
<h5 data-id="heading-7">é…ç½®æ‹¦æˆªå™¨ï¼Œè¿›è¡Œèº«ä»½å’Œæƒé™æ ¡éªŒï¼š</h5>
<blockquote>
<p>è¯¥é…ç½®çš„ä½œç”¨æ˜¯ä¸æ‹¦æˆªç™»å½•ï¼Œæ³¨å†Œå’Œä¸€äº›æ–‡æ¡£æ¥å£ï¼Œå³åŒ¿åè®¿é—®ã€‚<br/>
å…¶å®ƒçš„æ¥å£éƒ½æ‹¦æˆªï¼Œå¹¶è¿›è¡Œæ˜¯å¦ç™»å½•çš„æ ¡éªŒï¼Œæœªç™»å½•çš„ç”¨æˆ·å°†æ— æ³•è®¿é—®ã€‚</p>
</blockquote>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.satokendemo.config;

<span class="hljs-keyword">import</span> cn.dev33.satoken.fun.SaParamFunction;
<span class="hljs-keyword">import</span> cn.dev33.satoken.interceptor.SaInterceptor;
<span class="hljs-keyword">import</span> cn.dev33.satoken.stp.StpUtil;
<span class="hljs-keyword">import</span> org.springframework.context.annotation.Configuration;
<span class="hljs-keyword">import</span> org.springframework.web.servlet.config.annotation.InterceptorRegistry;
<span class="hljs-keyword">import</span> org.springframework.web.servlet.config.annotation.WebMvcConfigurer;
 
<span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">WebMVCConfig</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">WebMvcConfigurer</span> {

    <span class="hljs-comment">/**
     * é…ç½®saTokençš„èº«ä»½æƒé™æ‹¦æˆªå™¨
     *
     * <span class="hljs-doctag">@param</span> registry
     */</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addInterceptors</span><span class="hljs-params">(InterceptorRegistry registry)</span> {
        registry.addInterceptor(<span class="hljs-keyword">new</span> <span class="hljs-title class_">SaInterceptor</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">SaParamFunction</span>&lt;Object&gt;() {
                    <span class="hljs-comment">// æ˜¯å¦ç™»å½•</span>
                    <span class="hljs-meta">@Override</span>
                    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">(Object o)</span> {
                        <span class="hljs-comment">// è°ƒç”¨sa-tokenæä¾›çš„æ–¹æ³•ï¼Œæ ¡éªŒç”¨æˆ·èº«ä»½ç™»å½•</span>
                  <span class="hljs-comment">// è¯¥æ“ä½œçš„å®˜ç½‘æ–‡æ¡£åœ°å€ï¼šhttps://sa-token.cc/doc.html#/use/route-check</span>
                        StpUtil.checkLogin();
                    }
                }))
                <span class="hljs-comment">// å°†æ‰€æœ‰è·¯å¾„éƒ½æ‹¦æˆª</span>
                .addPathPatterns(<span class="hljs-string">"/**"</span>)
                <span class="hljs-comment">// æ’é™¤ä¸æ‹¦æˆªçš„è·¯å¾„</span>
                .excludePathPatterns(
                        <span class="hljs-string">"/sysUser/login"</span>,
                        <span class="hljs-string">"/sysUser/register"</span>,
                        <span class="hljs-string">"/doc.html"</span>,
                        <span class="hljs-string">"/webjars/**"</span>,
                        <span class="hljs-string">"/swagger-resources"</span>
                );
    }
}
</code></pre>
<h3 data-id="heading-8">3ï¼Œç™»å½•ä¸é€€å‡º</h3>
<h5 data-id="heading-9">ä»£ç ï¼š</h5>
<blockquote>
<p>StpUtil.login()ï¼š sa-tokençš„ç™»å½•æ–¹æ³•ï¼Œé‡Œé¢å¡«å…¥ç”¨æˆ·å”¯ä¸€æ ‡è¯†ï¼Œä¸€èˆ¬ä¸ºç”¨æˆ·idã€‚å› ä¸ºé›†æˆäº†redisæ‰€ä»¥ç™»å½•æ—¶ä¼šå°†ä¼šè¯ä¿¡æ¯å­˜å…¥redisä¸­ã€‚åŒæ—¶ç”Ÿæˆtokenã€‚tokenè¿‡æœŸåredisä¸­çš„æ•°æ®ä¹Ÿä¼šè¢«åˆ é™¤<br/>
StpUtil.getTokenValue()ï¼šè·å–tokençš„æ–¹æ³•ï¼Œç™»å½•ä¹‹åè°ƒç”¨ï¼Œè¿”å›tokenï¼Œå› ä¸ºå·²ç»é›†æˆäº†jwtï¼Œæ‰€ä»¥è¿”å›çš„æ˜¯ jwt tokenã€‚<br/>
StpUtil.logout()ï¼šé€€å‡ºç™»å½•çš„æ–¹æ³•ï¼Œè°ƒç”¨åtokenå°†å¤±æ•ˆï¼Œä¸”rediså­˜å‚¨çš„ä¿¡æ¯ä¹Ÿå°†è¢«åˆ é™¤<br/>
è·å–ç™»å½•ç”¨æˆ·çš„idæ–¹æ³•ï¼š<br/>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4fab0141a6bc477ebed78ec008637560~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pyq6Iul5ZCb6ZuF6KOB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764764338&amp;x-signature=9CZKQFs8akrhCaB0KxEKm86FO2I%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
</blockquote>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.satokendemo.controller;

<span class="hljs-keyword">import</span> cn.dev33.satoken.stp.StpUtil;
<span class="hljs-keyword">import</span> com.satokendemo.result.Result;
<span class="hljs-keyword">import</span> lombok.RequiredArgsConstructor;
<span class="hljs-keyword">import</span> org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;
<span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.*;

<span class="hljs-keyword">import</span> java.util.Map;

<span class="hljs-meta">@RestController</span>
<span class="hljs-meta">@RequiredArgsConstructor</span>
<span class="hljs-meta">@RequestMapping("sysUser")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SysUserController</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> BCryptPasswordEncoder bCryptPasswordEncoder;
    
    <span class="hljs-comment">// ç™»å½•æ¥å£</span>
    <span class="hljs-meta">@PostMapping("/login")</span>
    <span class="hljs-keyword">public</span> Result&lt;String&gt; <span class="hljs-title function_">login</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> Map&lt;String,String&gt; sysUser)</span> {

         <span class="hljs-keyword">if</span> (!sysUser.containsKey(<span class="hljs-string">"username"</span>) || !sysUser.containsKey(<span class="hljs-string">"password"</span>)){
             <span class="hljs-keyword">return</span> Result.error(<span class="hljs-number">401</span>,<span class="hljs-string">"ç”¨æˆ·åæˆ–å¯†ç ä¸ºç©º"</span>);
         }
        <span class="hljs-type">String</span> <span class="hljs-variable">username</span> <span class="hljs-operator">=</span> <span class="hljs-string">"admin"</span>;
        <span class="hljs-comment">// ä½¿ç”¨ BCrypt åŠ å¯†åçš„ 123456</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">password</span> <span class="hljs-operator">=</span> <span class="hljs-string">"$2a$10$QIVz.q.uRrqYiiKzK60jGetU/mRWrgPzVoxesgUen3tDVXsfmKB0K"</span>;
        <span class="hljs-keyword">if</span> (sysUser.get(<span class="hljs-string">"username"</span>).equals(<span class="hljs-string">"admin"</span>)&amp;&amp; bCryptPasswordEncoder.matches(sysUser.get(<span class="hljs-string">"password"</span>),<span class="hljs-string">"$2a$10$QIVz.q.uRrqYiiKzK60jGetU/mRWrgPzVoxesgUen3tDVXsfmKB0K"</span>)){
            StpUtil.login(<span class="hljs-number">1000</span>); <span class="hljs-comment">// è¿™é‡Œè¾“å…¥ç”¨æˆ·id</span>
            <span class="hljs-keyword">return</span> Result.success(StpUtil.getTokenValue());
        }
        <span class="hljs-keyword">return</span> Result.error(<span class="hljs-number">401</span>,<span class="hljs-string">"ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯"</span>);
    }
    
    <span class="hljs-comment">// é€€å‡ºç™»å½•æ¥å£</span>
    <span class="hljs-meta">@PostMapping("/logout")</span>
    <span class="hljs-keyword">public</span> Result&lt;String&gt; <span class="hljs-title function_">logout</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// è°ƒç”¨sa-tokençš„é€€å‡ºç™»å½•æ–¹æ³•</span>
        StpUtil.logout();
        <span class="hljs-keyword">return</span> Result.success(<span class="hljs-string">"é€€å‡ºæˆåŠŸ"</span>);
    }

}
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[metrics-server éƒ¨ç½²æŠ¥é”™]]></title>    <link>https://juejin.cn/post/7576888607479513107</link>    <guid>https://juejin.cn/post/7576888607479513107</guid>    <pubDate>2025-11-26T13:37:54.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576888607479513107" data-draft-id="7576871248706174995" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="metrics-server éƒ¨ç½²æŠ¥é”™"/> <meta itemprop="keywords" content="è¿ç»´"/> <meta itemprop="datePublished" content="2025-11-26T13:37:54.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="èƒœä¼¼ä»£ç ä»”"/> <meta itemprop="url" content="https://juejin.cn/user/394039350009241"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            metrics-server éƒ¨ç½²æŠ¥é”™
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/394039350009241/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    èƒœä¼¼ä»£ç ä»”
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T13:37:54.000Z" title="Wed Nov 26 2025 13:37:54 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    7
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">é—®é¢˜è¡¨ç°</h2>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-type">E1126</span> <span class="hljs-number">07</span>:<span class="hljs-number">37</span>:<span class="hljs-number">20.876269</span>       <span class="hljs-number">1</span> scraper.go:<span class="hljs-number">149</span>] <span class="hljs-string">"Failed to scrape node"</span> err<span class="hljs-operator">=</span><span class="hljs-string">"Get <span class="hljs-subst">\"</span>https://192.168.174.135:10250/metrics/resource<span class="hljs-subst">\"</span>: tls: failed to verify certificate: x509: cannot validate certificate for 192.168.174.135 because it doesn't contain any IP SANs"</span> node<span class="hljs-operator">=</span><span class="hljs-string">"server-06"</span>
<span class="hljs-type">E1126</span> <span class="hljs-number">07</span>:<span class="hljs-number">37</span>:<span class="hljs-number">20.881132</span>       <span class="hljs-number">1</span> scraper.go:<span class="hljs-number">149</span>] <span class="hljs-string">"Failed to scrape node"</span> err<span class="hljs-operator">=</span><span class="hljs-string">"Get <span class="hljs-subst">\"</span>https://192.168.174.136:10250/metrics/resource<span class="hljs-subst">\"</span>: tls: failed to verify certificate: x509: cannot validate certificate for 192.168.174.136 because it doesn't contain any IP SANs"</span> node<span class="hljs-operator">=</span><span class="hljs-string">"server-07"</span>
<span class="hljs-type">E1126</span> <span class="hljs-number">07</span>:<span class="hljs-number">37</span>:<span class="hljs-number">20.886884</span>       <span class="hljs-number">1</span> scraper.go:<span class="hljs-number">149</span>] <span class="hljs-string">"Failed to scrape node"</span> err<span class="hljs-operator">=</span><span class="hljs-string">"Get <span class="hljs-subst">\"</span>https://192.168.174.133:10250/metrics/resource<span class="hljs-subst">\"</span>: tls: failed to verify certificate: x509: cannot validate certificate for 192.168.174.133 because it doesn't contain any IP SANs"</span> node<span class="hljs-operator">=</span><span class="hljs-string">"server-04"</span>
<span class="hljs-type">E1126</span> <span class="hljs-number">07</span>:<span class="hljs-number">37</span>:<span class="hljs-number">20.891583</span>       <span class="hljs-number">1</span> scraper.go:<span class="hljs-number">149</span>] <span class="hljs-string">"Failed to scrape node"</span> err<span class="hljs-operator">=</span><span class="hljs-string">"Get <span class="hljs-subst">\"</span>https://192.168.174.134:10250/metrics/resource<span class="hljs-subst">\"</span>: tls: failed to verify certificate: x509: cannot validate certificate for 192.168.174.134 because it doesn't contain any IP SANs"</span> node<span class="hljs-operator">=</span><span class="hljs-string">"server-05"</span>
<span class="hljs-type">I1126</span> <span class="hljs-number">07</span>:<span class="hljs-number">37</span>:<span class="hljs-number">24.595189</span>       <span class="hljs-number">1</span> server.go:<span class="hljs-number">192</span>] <span class="hljs-string">"Failed probe"</span> probe<span class="hljs-operator">=</span><span class="hljs-string">"metric-storage-ready"</span> err<span class="hljs-operator">=</span><span class="hljs-string">"no metrics to serve"</span>
<span class="hljs-type">I1126</span> <span class="hljs-number">07</span>:<span class="hljs-number">37</span>:<span class="hljs-number">34.596509</span>       <span class="hljs-number">1</span> server.go:<span class="hljs-number">192</span>] <span class="hljs-string">"Failed probe"</span> probe<span class="hljs-operator">=</span><span class="hljs-string">"metric-storage-ready"</span> err<span class="hljs-operator">=</span><span class="hljs-string">"no metrics to serve"</span>
<span class="hljs-type">E1126</span> <span class="hljs-number">07</span>:<span class="hljs-number">37</span>:<span class="hljs-number">35.842888</span>       <span class="hljs-number">1</span> scraper.go:<span class="hljs-number">149</span>] <span class="hljs-string">"Failed to scrape node"</span> err<span class="hljs-operator">=</span><span class="hljs-string">"Get <span class="hljs-subst">\"</span>https://192.168.174.131:10250/metrics/resource<span class="hljs-subst">\"</span>: tls: failed to verify certificate: x509: cannot validate certificate for 192.168.174.131 because it doesn't contain any IP SANs"</span> node<span class="hljs-operator">=</span><span class="hljs-string">"server-03"</span>
<span class="hljs-type">E1126</span> <span class="hljs-number">07</span>:<span class="hljs-number">37</span>:<span class="hljs-number">35.843603</span>       <span class="hljs-number">1</span> scraper.go:<span class="hljs-number">149</span>] <span class="hljs-string">"Failed to scrape node"</span> err<span class="hljs-operator">=</span><span class="hljs-string">"Get <span class="hljs-subst">\"</span>https://192.168.174.136:10250/metrics/resource<span class="hljs-subst">\"</span>: tls: failed to verify certificate: x509: cannot validate certificate for 192.168.174.136 because it doesn't contain any IP SANs"</span> node<span class="hljs-operator">=</span><span class="hljs-string">"server-07"</span>
<span class="hljs-type">E1126</span> <span class="hljs-number">07</span>:<span class="hljs-number">37</span>:<span class="hljs-number">35.865009</span>       <span class="hljs-number">1</span> scraper.go:<span class="hljs-number">149</span>] <span class="hljs-string">"Failed to scrape node"</span> err<span class="hljs-operator">=</span><span class="hljs-string">"Get <span class="hljs-subst">\"</span>https://192.168.174.137:10250/metrics/resource<span class="hljs-subst">\"</span>: tls: failed to verify certificate: x509: cannot validate certificate for 192.168.174.137 because it doesn't contain any IP SANs"</span> node<span class="hljs-operator">=</span><span class="hljs-string">"server-08"</span>
<span class="hljs-type">E1126</span> <span class="hljs-number">07</span>:<span class="hljs-number">37</span>:<span class="hljs-number">35.869804</span>       <span class="hljs-number">1</span> scraper.go:<span class="hljs-number">149</span>] <span class="hljs-string">"Failed to scrape node"</span> err<span class="hljs-operator">=</span><span class="hljs-string">"Get <span class="hljs-subst">\"</span>https://192.168.174.135:10250/metrics/resource<span class="hljs-subst">\"</span>: tls: failed to verify certificate: x509: cannot validate certificate for 192.168.174.135 because it doesn't contain any IP SANs"</span> node<span class="hljs-operator">=</span><span class="hljs-string">"server-06"</span>
<span class="hljs-type">E1126</span> <span class="hljs-number">07</span>:<span class="hljs-number">37</span>:<span class="hljs-number">35.875473</span>       <span class="hljs-number">1</span> scraper.go:<span class="hljs-number">149</span>] <span class="hljs-string">"Failed to scrape node"</span> err<span class="hljs-operator">=</span><span class="hljs-string">"Get <span class="hljs-subst">\"</span>https://192.168.174.133:10250/metrics/resource<span class="hljs-subst">\"</span>: tls: failed to verify certificate: x509: cannot validate certificate for 192.168.174.133 because it doesn't contain any IP SANs"</span> node<span class="hljs-operator">=</span><span class="hljs-string">"server-04"</span>
<span class="hljs-type">E1126</span> <span class="hljs-number">07</span>:<span class="hljs-number">37</span>:<span class="hljs-number">35.880808</span>       <span class="hljs-number">1</span> scraper.go:<span class="hljs-number">149</span>] <span class="hljs-string">"Failed to scrape node"</span> err<span class="hljs-operator">=</span><span class="hljs-string">"Get <span class="hljs-subst">\"</span>https://192.168.174.134:10250/metrics/resource<span class="hljs-subst">\"</span>: tls: failed to verify certificate: x509: cannot validate certificate for 192.168.174.134 because it doesn't contain any IP SANs"</span> node<span class="hljs-operator">=</span><span class="hljs-string">"server-05"</span>
</code></pre>
<h2 data-id="heading-1">é—®é¢˜è§£é‡Š</h2>
<p>æ§åˆ¶å¹³é¢èŠ‚ç‚¹åˆå§‹åŒ–æˆ–è€… join ä»¥åŠå·¥ä½œèŠ‚ç‚¹ join éƒ½æ˜¯è‡ªç­¾ kubelet server ç«¯çš„è¯ä¹¦ï¼Œç¬¬ä¸‰æ–¹ç»„ä»¶è¯·æ±‚ kubelet è·å–ä¿¡æ¯æ—¶ TLS æ¡æ‰‹æ ¡éªŒ kubelet server è¯ä¹¦æ—¶ï¼Œå‘ç°è¯·æ±‚çš„ ip ä¸åœ¨è¯ä¹¦çš„ sans ä¸­ï¼Œåˆ™æ— æ³•é€šè¿‡è¯ä¹¦æ ¡éªŒï¼ŒTLS æ¡æ‰‹å¤±è´¥ã€‚æœ‰ä¸ªé…ç½®å¯ä»¥å°† kubelet server è¯ä¹¦æ”¹ä¸ºè¯·æ±‚ Kubernetes CA ç­¾å‘</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># é»˜è®¤è¡Œä¸ºï¼ˆæ²¡æœ‰ serverTLSBootstrapï¼‰</span>
kubelet å¯åŠ¨
  â†“
è‡ªå·±ç”Ÿæˆè¯ä¹¦ï¼ˆè‡ªç­¾åï¼‰
  â†“
Issuer: <span class="hljs-attr">CN</span> = server-<span class="hljs-number">03</span>-ca@<span class="hljs-number">1764041318</span>  <span class="hljs-comment"># âŒ è‡ªå·±ç­¾å‘è‡ªå·±</span>
Subject: <span class="hljs-attr">CN</span> = server-<span class="hljs-number">03</span>@<span class="hljs-number">1764041318</span>
  â†“
å…¶ä»–ç»„ä»¶ä¸ä¿¡ä»»è¿™ä¸ªè¯ä¹¦
  â†“
éœ€è¦ --kubelet-insecure-tls è·³è¿‡éªŒè¯
</code></pre>
<p>é…ç½® serverTLSBootstrap ä¸º true å</p>
<pre><code class="hljs language-ini" lang="ini">kubelet å¯åŠ¨
  â†“
ä¸å†è‡ªå·±ç”Ÿæˆè¯ä¹¦
  â†“
è€Œæ˜¯è¯·æ±‚ Kubernetes CA ç­¾å‘
  â†“
Issuer: <span class="hljs-attr">CN</span> = kubernetes  <span class="hljs-comment"># âœ… ç”±å¯ä¿¡ CA ç­¾å‘</span>
Subject: <span class="hljs-attr">CN</span> = system:node:server-<span class="hljs-number">03</span>, O = system:nodes
  â†“
æ‰€æœ‰ç»„ä»¶éƒ½ä¿¡ä»»è¿™ä¸ªè¯ä¹¦
  â†“
ä¸éœ€è¦ --kubelet-insecure-tls

</code></pre>
<h2 data-id="heading-2">è§£å†³æ–¹æ¡ˆ</h2>
<p>ç¼–è¾‘æ¯ä¸ªèŠ‚ç‚¹çš„ kubelet é…ç½®ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ç¼–è¾‘ kubelet é…ç½®</span>
vim /var/lib/kubelet/config.yaml
</code></pre>
<p>æ·»åŠ æˆ–ä¿®æ”¹ï¼š</p>
<pre><code class="hljs language-vbnet" lang="vbnet"><span class="hljs-symbol">serverTLSBootstrap:</span> <span class="hljs-literal">true</span>
</code></pre>
<p>é‡å¯ kubelet</p>
<pre><code class="hljs">systemctl restart kubelet
</code></pre>
<p>åœ¨ä¸»èŠ‚ç‚¹æ‰¹å‡† CSR è¯·æ±‚</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-meta"># æŸ¥çœ‹å¾…æ‰¹å‡†çš„ CSR</span>
kubectl <span class="hljs-keyword">get</span> csr

<span class="hljs-meta"># æ‰¹å‡†æ‰€æœ‰å¾…å¤„ç†çš„ CSR</span>
kubectl <span class="hljs-keyword">get</span> csr | grep Pending | awk <span class="hljs-string">'{print $1}'</span> | xargs kubectl certificate approve
</code></pre>
<h2 data-id="heading-3">é—®é¢˜è§£å†³</h2>
<p>metrics-server èƒ½æ­£å¸¸è·å–åˆ°èŠ‚ç‚¹æŒ‡æ ‡</p>
<pre><code class="hljs language-vbscript" lang="vbscript">root@<span class="hljs-built_in">server</span><span class="hljs-number">-03</span>:~# kubectl top nodes
NAME        CPU(cores)   CPU(%)   MEMORY(bytes)   MEMORY(%)   
<span class="hljs-built_in">server</span><span class="hljs-number">-03</span>   <span class="hljs-number">108</span>m         <span class="hljs-number">5</span>%       <span class="hljs-number">1054</span>Mi          <span class="hljs-number">27</span>%         
<span class="hljs-built_in">server</span><span class="hljs-number">-04</span>   <span class="hljs-number">110</span>m         <span class="hljs-number">5</span>%       <span class="hljs-number">828</span>Mi           <span class="hljs-number">21</span>%         
<span class="hljs-built_in">server</span><span class="hljs-number">-05</span>   <span class="hljs-number">98</span>m          <span class="hljs-number">4</span>%       <span class="hljs-number">907</span>Mi           <span class="hljs-number">24</span>%         
<span class="hljs-built_in">server</span><span class="hljs-number">-06</span>   <span class="hljs-number">26</span>m          <span class="hljs-number">1</span>%       <span class="hljs-number">392</span>Mi           <span class="hljs-number">10</span>%         
<span class="hljs-built_in">server</span><span class="hljs-number">-07</span>   <span class="hljs-number">18</span>m          <span class="hljs-number">0</span>%       <span class="hljs-number">369</span>Mi           <span class="hljs-number">9</span>%          
<span class="hljs-built_in">server</span><span class="hljs-number">-08</span>   <span class="hljs-number">20</span>m          <span class="hljs-number">1</span>%       <span class="hljs-number">367</span>Mi           <span class="hljs-number">9</span>% 
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»ThreadLocalåˆ°ScopedValueï¼šJavaä¸Šä¸‹æ–‡ç®¡ç†çš„æ¶æ„æ¼”è¿›ä¸å®æˆ˜æŒ‡å—]]></title>    <link>https://juejin.cn/post/7576841976928567332</link>    <guid>https://juejin.cn/post/7576841976928567332</guid>    <pubDate>2025-11-26T12:28:18.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576841976928567332" data-draft-id="7576859345935056950" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»ThreadLocalåˆ°ScopedValueï¼šJavaä¸Šä¸‹æ–‡ç®¡ç†çš„æ¶æ„æ¼”è¿›ä¸å®æˆ˜æŒ‡å—"/> <meta itemprop="keywords" content="åç«¯,Java"/> <meta itemprop="datePublished" content="2025-11-26T12:28:18.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="zhaomy2025"/> <meta itemprop="url" content="https://juejin.cn/user/3604620165777321"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»ThreadLocalåˆ°ScopedValueï¼šJavaä¸Šä¸‹æ–‡ç®¡ç†çš„æ¶æ„æ¼”è¿›ä¸å®æˆ˜æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3604620165777321/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    zhaomy2025
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T12:28:18.000Z" title="Wed Nov 26 2025 12:28:18 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»18åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æ¢ç´¢Javaå¹¶å‘ç¼–ç¨‹ä¸­ä¸Šä¸‹æ–‡ç®¡ç†çš„èŒƒå¼é©å‘½ï¼Œç†è§£ä»çº¿ç¨‹ç»‘å®šåˆ°ä½œç”¨åŸŸç»‘å®šçš„è®¾è®¡å“²å­¦è½¬å˜,æŒæ¡Java 25æ­£å¼ç‰ˆçš„å®Œæ•´æŠ€æœ¯ç”Ÿæ€</p>
</blockquote>
<h2 data-id="heading-0">æŠ€æœ¯èƒŒæ™¯ä¸é—®é¢˜åˆ†æ</h2>
<p>åœ¨ç°ä»£Javaåº”ç”¨æ¶æ„ä¸­ï¼Œä¸Šä¸‹æ–‡ä¼ é€’ä¸€ç›´æ˜¯æ„å»ºå¯ç»´æŠ¤ã€é«˜æ€§èƒ½å¹¶å‘ç³»ç»Ÿçš„æ ¸å¿ƒæŒ‘æˆ˜ã€‚éšç€å¾®æœåŠ¡æ¶æ„å’Œå“åº”å¼ç¼–ç¨‹çš„æ™®åŠï¼Œè¿™ä¸€æŒ‘æˆ˜å˜å¾—æ›´åŠ å¤æ‚ã€‚</p>
<h3 data-id="heading-1">ThreadLocalçš„æ¶æ„å±€é™æ€§</h3>
<p>ThreadLocalè‡ªJava 1.2å¼•å…¥ä»¥æ¥ï¼Œæˆä¸ºä¸Šä¸‹æ–‡ç®¡ç†çš„æ ‡å‡†æ–¹æ¡ˆï¼Œä½†å…¶è®¾è®¡ä¸Šçš„å±€é™æ€§åœ¨å¤§è§„æ¨¡åˆ†å¸ƒå¼ç³»ç»Ÿä¸­æš´éœ²æ— é—ï¼š</p>
<p><strong>æ¶æ„è§†è§’ä¸‹çš„ThreadLocalç¼ºé™·åˆ†æ</strong>ï¼š</p>









































<table><thead><tr><th align="left">é—®é¢˜ç»´åº¦</th><th align="left">ThreadLocalè¡¨ç°</th><th align="left">æ¶æ„å½±å“</th><th align="left">ä¸¥é‡ç¨‹åº¦</th></tr></thead><tbody><tr><td align="left">å†…å­˜ç®¡ç†</td><td align="left">ç”Ÿå‘½å‘¨æœŸä¸çº¿ç¨‹ç»‘å®šï¼Œæ— æ³•è‡ªåŠ¨æ¸…ç†</td><td align="left">çº¿ç¨‹æ± ç¯å¢ƒä¸­å¯¼è‡´æŒç»­å†…å­˜æ³„éœ²ï¼ŒGCå‹åŠ›å¢å¤§</td><td align="left">âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸</td></tr><tr><td align="left">å¹¶å‘æ¨¡å‹é€‚é…</td><td align="left">ä¸ç°ä»£å¹¶å‘æ¨¡å‹ï¼ˆè™šæ‹Ÿçº¿ç¨‹ã€ç»“æ„åŒ–å¹¶å‘ï¼‰ä¸å…¼å®¹</td><td align="left">é˜»ç¢åº”ç”¨è¿ç§»åˆ°Project Loomå¸¦æ¥çš„æ€§èƒ½ä¼˜åŠ¿</td><td align="left">âš ï¸âš ï¸âš ï¸âš ï¸</td></tr><tr><td align="left">çº¿ç¨‹å®‰å…¨</td><td align="left">ä¾èµ–å¼€å‘è€…æ‰‹åŠ¨ç»´æŠ¤ä¸å¯å˜æ€§</td><td align="left">å¢åŠ å¹¶å‘é”™è¯¯é£é™©ï¼Œç ´åç³»ç»Ÿç¨³å®šæ€§</td><td align="left">âš ï¸âš ï¸âš ï¸âš ï¸</td></tr><tr><td align="left">ç»„åˆæ€§</td><td align="left">ç¼ºä¹ç»“æ„åŒ–çš„ä¸Šä¸‹æ–‡ç»„åˆæœºåˆ¶</td><td align="left">ä»£ç å¤æ‚åº¦é«˜ï¼Œéš¾ä»¥ç»´æŠ¤å¤šç»´åº¦ä¸Šä¸‹æ–‡</td><td align="left">âš ï¸âš ï¸âš ï¸âš ï¸</td></tr><tr><td align="left">å¯è§‚æµ‹æ€§</td><td align="left">ä¸Šä¸‹æ–‡ä¼ æ’­è·¯å¾„éš¾ä»¥è¿½è¸ªå’Œè°ƒè¯•</td><td align="left">ç”Ÿäº§ç¯å¢ƒé—®é¢˜å®šä½å›°éš¾ï¼Œå¢åŠ è¿ç»´æˆæœ¬</td><td align="left">âš ï¸âš ï¸âš ï¸</td></tr></tbody></table>
<blockquote>
<p>ThreadLocalç”Ÿå‘½å‘¨æœŸä¸çº¿ç¨‹ç»‘å®šï¼Œè€Œçº¿ç¨‹æ± ä¸­çº¿ç¨‹é•¿æœŸå­˜æ´»ï¼Œå¯¼è‡´ThreadLocalä¸èƒ½è‡ªåŠ¨æ¸…ç†ï¼Œé€ æˆ<strong>å†…å­˜æ³„éœ²</strong>ï¼›å› æ­¤éœ€è¦æ‰‹åŠ¨è°ƒç”¨ <code>remove()</code>æ˜¾å¼æ¸…ç†ï¼Œä½†å®¹æ˜“åœ¨å¼‚å¸¸åˆ†æ”¯ä¸­é—æ¼ï¼Œå­˜åœ¨<strong>ç”Ÿå‘½å‘¨æœŸç®¡ç†å¤æ‚é—®é¢˜</strong>ï¼›çº¿ç¨‹é‡ç”¨åŒæ—¶ä¹Ÿä¼šå¯¼è‡´å‰ä¸€ä¸ªä»»åŠ¡çš„ <code>ThreadLocal</code>å€¼<strong>æ±¡æŸ“</strong>åä¸€ä¸ªä»»åŠ¡</p>
</blockquote>
<blockquote>
<p>ThreadLocal çš„ã€Œçº¿ç¨‹å®‰å…¨ã€æ˜¯åŸºäºå‰¯æœ¬éš”ç¦»çš„ï¼Œä»…å½“å­˜å‚¨çš„å¯¹è±¡æ˜¯ã€Œä¸å¯å˜å¯¹è±¡ã€æ—¶ï¼Œæ‰èƒ½çœŸæ­£ä¿è¯ã€Œçº¿ç¨‹å®‰å…¨ä¸”ä¸å¯ç¯¡æ”¹ã€ï¼›è‹¥å­˜å‚¨ã€Œå¯å˜å¯¹è±¡ã€ï¼Œåˆ™ï¼š
çº¿ç¨‹å†…éƒ¨ä¿®æ”¹ä¼šç ´åè¯¥çº¿ç¨‹å†…çš„å‰¯æœ¬ä¸€è‡´æ€§ï¼›
çº¿ç¨‹å¤–éƒ¨æ‹¿åˆ°å‰¯æœ¬å¼•ç”¨åï¼Œä¼šç›´æ¥ç ´åçº¿ç¨‹éš”ç¦»ï¼Œå¯¼è‡´è·¨çº¿ç¨‹ç¯¡æ”¹ã€‚</p>
</blockquote>

<h3 data-id="heading-2">ThreadLocalçš„ä»£ç ç¤ºä¾‹</h3>
<pre><code class="hljs language-java" lang="java">
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ThreadLocalProblems</span> {

  <span class="hljs-comment">// é—®é¢˜1ï¼šå†…å­˜æ³„éœ²é£é™©</span>
  <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> ThreadLocal&lt;DatabaseConnection&gt; connectionHolder =
      <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadLocal</span>&lt;&gt;() {
          <span class="hljs-meta">@Override</span>
          <span class="hljs-keyword">protected</span> DatabaseConnection <span class="hljs-title function_">initialValue</span><span class="hljs-params">()</span> {
              <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DatabaseConnection</span>(); <span class="hljs-comment">// æ°¸è¿œä¸ä¼šè‡ªåŠ¨æ¸…ç†</span>
          }
      };

  <span class="hljs-comment">// é—®é¢˜2ï¼šçº¿ç¨‹æ± ä¸­çš„å€¼æ±¡æŸ“</span>
  <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> ThreadLocal&lt;String&gt; userContext = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadLocal</span>&lt;&gt;();
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">demonstrateProblems</span><span class="hljs-params">()</span> {
      <span class="hljs-type">ExecutorService</span> <span class="hljs-variable">executor</span> <span class="hljs-operator">=</span> Executors.newFixedThreadPool(<span class="hljs-number">10</span>);
      executor.submit(() -&gt; {
          userContext.set(<span class="hljs-string">"user123"</span>);
          processRequest(); <span class="hljs-comment">// åç»­ä»»åŠ¡å¯èƒ½çœ‹åˆ°è¿™ä¸ªå€¼</span>
      });
      executor.submit(() -&gt; {
          <span class="hljs-type">String</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> userContext.get(); <span class="hljs-comment">// å¯èƒ½å¾—åˆ°"user123"ï¼</span>
          System.out.println(<span class="hljs-string">"Unexpected user: "</span> + user);
      });
  }

    <span class="hljs-comment">// é—®é¢˜3ï¼šThreadLocal å€¼å¯ä»¥è¢«ä»»æ„ä¿®æ”¹ï¼Œç ´åçº¿ç¨‹å®‰å…¨</span>
    <span class="hljs-comment">// 3.1 çº¿ç¨‹å†…éƒ¨ä¿®æ”¹ä¼šç ´åè¯¥çº¿ç¨‹å†…çš„å‰¯æœ¬ä¸€è‡´æ€§ï¼Œå°¤å…¶æ˜¯ç»è¿‡å¤šå±‚è°ƒç”¨åï¼Œè¯¯ä¿®æ”¹éš¾ä»¥å‘ç°ï¼ˆé—®é¢˜5ï¼šä¸Šä¸‹æ–‡ä¼ æ’­è·¯å¾„éš¾ä»¥è¿½è¸ªå’Œè°ƒè¯•ï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> ThreadLocal&lt;List&lt;String&gt;&gt; userRoles = ThreadLocal.withInitial(ArrayList::<span class="hljs-keyword">new</span>);
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        List&lt;String&gt; roles = userRoles.get();
        roles.add(<span class="hljs-string">"USER"</span>);
        System.out.println(roles); <span class="hljs-comment">// è®¾ç½® USER è§’è‰²</span>
        otherMethod(roles); <span class="hljs-comment">// è°ƒç”¨å…¶ä»–æ–¹æ³•ï¼Œä¿®æ”¹ roles</span>
        System.out.println(userRoles.get()); <span class="hljs-comment">// [ADMIN] â€” è¢«æ„å¤–ä¿®æ”¹ï¼</span>
    }
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">otherMethod</span><span class="hljs-params">(List&lt;String&gt; roles)</span> {
        roles.clear();
        roles.add(<span class="hljs-string">"ADMIN"</span>);
    }
    <span class="hljs-comment">// 3.2 å¯¹è±¡å¼•ç”¨æ³„éœ²åˆ°å…¶ä»–çº¿ç¨‹</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> ThreadLocal&lt;UserSession&gt; session =
            ThreadLocal.withInitial(() -&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">UserSession</span>(<span class="hljs-string">"default"</span>));
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> InterruptedException {
        <span class="hljs-type">UserSession</span> <span class="hljs-variable">currentSession</span> <span class="hljs-operator">=</span> session.get();
        <span class="hljs-comment">// ä¸»çº¿ç¨‹é»˜è®¤ä¼šè¯ ID ä¸º default</span>
        System.out.println(<span class="hljs-string">"Main thread now: "</span> + currentSession.getUserId());
        <span class="hljs-type">Thread</span> <span class="hljs-variable">t</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; {
            System.out.println(<span class="hljs-string">"New thread sees: "</span> + currentSession.getUserId());
            <span class="hljs-comment">// åœ¨å…¶ä»–çº¿ç¨‹ä¸­ä¿®æ”¹ä¼šè¯ ID</span>
            currentSession.setUserId(<span class="hljs-string">"hacked_by_other_thread"</span>);
        });
        t.start();
        t.join();
        <span class="hljs-comment">// ä¸»çº¿ç¨‹å†æ¬¡è·å–ä¼šè¯ IDï¼Œå·²è¢«ä¿®æ”¹ä¸º hacked_by_other_thread</span>
        System.out.println(<span class="hljs-string">"Main thread now: "</span> + LeakyContext.getSession().getUserId());
    }

    <span class="hljs-comment">// é—®é¢˜4ï¼šå¤æ‚çš„å¤šå±‚ä¸Šä¸‹æ–‡ä¼ é€’</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">complexContextChain</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">try</span> {
            userContext.set(<span class="hljs-string">"user1"</span>);
            transactionContext.set(<span class="hljs-string">"tx1"</span>);
            localeContext.set(<span class="hljs-string">"en_US"</span>);
            <span class="hljs-comment">// æ¯å±‚éƒ½éœ€è¦æ‰‹åŠ¨æ¸…ç†</span>
        } <span class="hljs-keyword">finally</span> {
            userContext.remove();
            transactionContext.remove();
            localeContext.remove();
        }
    }
}
</code></pre>
<h2 data-id="heading-3">æ¼”è¿›è·¯çº¿è¯¦è§£ï¼šScopedValueçš„è®¾è®¡å“²å­¦</h2>
<p>ScopedValueä»£è¡¨äº†Javaä¸Šä¸‹æ–‡ç®¡ç†ä»"çº¿ç¨‹ç»‘å®š"åˆ°"ä½œç”¨åŸŸç»‘å®š"çš„æ ¹æœ¬æ€§è½¬å˜ï¼Œè¿™ä¸ä»…æ˜¯APIçš„å˜æ›´ï¼Œæ›´æ˜¯è®¾è®¡å“²å­¦çš„æ¼”è¿›ã€‚</p>
<h3 data-id="heading-4">Javaä¸Šä¸‹æ–‡ç®¡ç†çš„æ¼”è¿›æ—¶é—´çº¿</h3>
<pre><code class="hljs language-scss" lang="scss">Java <span class="hljs-number">1.2</span> (<span class="hljs-number">1998</span>) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Java <span class="hljs-number">25</span> (<span class="hljs-number">2024</span>)
    â”‚                                                 â”‚
    â”‚ ThreadLocalå¼•å…¥                                 â”‚ ScopedValueæ­£å¼ç‰ˆ
    â”‚ çº¿ç¨‹ç»‘å®šä¸Šä¸‹æ–‡                                  â”‚ ä½œç”¨åŸŸç»‘å®šä¸Šä¸‹æ–‡
    â”‚                                                 â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Java <span class="hljs-number">20</span> (<span class="hljs-number">2023</span>) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â”‚ ScopedValueå­µåŒ– (JEP <span class="hljs-number">429</span>)
                      â”‚
                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Java <span class="hljs-number">21</span>-<span class="hljs-number">24</span>
                                         â”‚
                                         â”‚ é¢„è§ˆç‰ˆè¿­ä»£ä¼˜åŒ–
</code></pre>
<p><strong>Java 20ï¼šå­µåŒ–æœŸæ¢ç´¢</strong></p>
<ul>
<li><strong>Java 20ï¼šJEP 429å­µåŒ–</strong></li>
</ul>
<p><strong>Java 21-24ï¼šé¢„è§ˆç‰ˆ</strong></p>
<ul>
<li><strong>Java 21ï¼šJEP 446é¢„è§ˆ</strong>ï¼Œæ—  API å˜æ›´</li>
<li><strong>Java 22ï¼šJEP 464ç¬¬äºŒæ¬¡é¢„è§ˆ</strong>ï¼Œæ—  API å˜æ›´</li>
<li><strong>Java 23ï¼šJEP 481ç¬¬ä¸‰æ¬¡é¢„è§ˆ</strong>ï¼Œ<code>ScopedValue.callWhere</code> æ–¹æ³•çš„æ“ä½œå‚æ•°ç±»å‹ç°åœ¨æ”¹ä¸ºä¸€ä¸ªæ–°çš„å‡½æ•°å¼æ¥å£ï¼Œè¿™ä½¿å¾— Java ç¼–è¯‘å™¨èƒ½å¤Ÿæ¨æ–­æ˜¯å¦å¯èƒ½æŠ›å‡ºå—æ£€å¼‚å¸¸ã€‚åŸºäºè¿™ä¸€æ”¹åŠ¨ï¼Œ<code>ScopedValue.getWhere</code> æ–¹æ³•ä¸å†éœ€è¦ï¼Œç°å·²è¢«ç§»é™¤</li>
<li><strong>Java 24ï¼šJEP 487ç¬¬å››æ¬¡é¢„è§ˆ</strong>ï¼Œç§»é™¤äº† <code>ScopedValue</code> ç±»ä¸­çš„ <code>callWhere</code> å’Œ <code>runWhere</code> æ–¹æ³•ï¼Œä½¿ API ä¿æŒå®Œå…¨æµç•…çš„é“¾å¼è°ƒç”¨ç‰¹æ€§ã€‚ç°åœ¨ä½¿ç”¨ä¸€ä¸ªæˆ–å¤šä¸ªç»‘å®šä½œç”¨åŸŸå€¼çš„å”¯ä¸€æ–¹å¼æ˜¯é€šè¿‡ <code>ScopedValue.Carrier.call</code> å’Œ <code>ScopedValue.Carrier.run</code> æ–¹æ³•</li>
</ul>
<p><strong>Java 25ï¼šæ­£å¼ç‰ˆå‘å¸ƒ</strong></p>
<ul>
<li><strong>Java 25ï¼šJEP 464æ­£å¼ç‰ˆ</strong>ï¼Œ<code>ScopedValue.orElse</code> æ–¹æ³•ä¸å†æ¥å— <code>null</code>ä½œä¸ºå…¶å‚æ•°</li>
</ul>
<h3 data-id="heading-5">ScopedValueçš„æ ¸å¿ƒè®¾è®¡åŸåˆ™</h3>
<ol>
<li><strong>ä½œç”¨åŸŸè¯­ä¹‰ä¼˜å…ˆ</strong>ï¼šä¸Šä¸‹æ–‡ç»‘å®šåˆ°ä»£ç å—è€Œéçº¿ç¨‹ï¼Œç¬¦åˆå‡½æ•°å¼ç¼–ç¨‹çš„èµ„æºç®¡ç†æ€æƒ³</li>
<li><strong>è‡ªåŠ¨ç”Ÿå‘½å‘¨æœŸç®¡ç†</strong>ï¼šJVMä¿è¯ä½œç”¨åŸŸé€€å‡ºæ—¶è‡ªåŠ¨æ¸…ç†ï¼Œä»æ ¹æœ¬ä¸Š<strong>é¿å…å†…å­˜æ³„éœ²</strong></li>
<li><strong>ç»“æ„åŒ–å¹¶å‘é›†æˆ</strong>ï¼šä¸è™šæ‹Ÿçº¿ç¨‹å’Œç»“æ„åŒ–å¹¶å‘APIæ— ç¼åä½œ</li>
<li><strong>ä¸å¯å˜æ€§ä¿è¯</strong>ï¼šå€¼ä¸€æ—¦è®¾ç½®ä¸å¯ä¿®æ”¹ï¼Œæä¾›çº¿ç¨‹å®‰å…¨ä¿éšœ</li>
<li><strong>ç»„åˆæ€§è®¾è®¡</strong>ï¼šæ”¯æŒä¼˜é›…çš„ä¸Šä¸‹æ–‡ç»„åˆå’ŒåµŒå¥—</li>
</ol>
<p>ScopedValueçš„è®¾è®¡ä½“ç°äº†Javaå¹³å°å¯¹ç°ä»£åº”ç”¨æ¶æ„éœ€æ±‚çš„æ·±åˆ»ç†è§£ã€‚è¿™ä¸æ˜¯ç®€å•çš„APIæ›¿æ¢ï¼Œè€Œæ˜¯Javaå›¢é˜Ÿå¯¹"å¦‚ä½•æ›´å¥½åœ°æ”¯æŒå¤§è§„æ¨¡åˆ†å¸ƒå¼ç³»ç»Ÿ"è¿™ä¸€é—®é¢˜çš„ç³»ç»Ÿæ€è€ƒã€‚</p>
<h2 data-id="heading-6">æ ¸å¿ƒAPI</h2>
<p>åˆ›å»º</p>
<ul>
<li>ScopedValue.newInstance(): åˆ›å»ºæ–°çš„ ScopedValue å®ä¾‹</li>
<li>ScopedValue.withInitial():</li>
</ul>
<p>ç»‘å®šä¸æ‰§è¡ŒAPI</p>
<ul>
<li>ScopedValue.where(key, value)</li>
<li>ScopedValue.where(bindings)</li>
<li>ScopedValue.Carrier.where(key, value)</li>
<li>ScopedValue.Carrier.run(() -&gt; {...})</li>
<li>ScopedValue.Carrier.call(() -&gt; {...})</li>
</ul>
<blockquote>
<p>ScopedValue.where(key, value) è¿”å› ScopedValue.Carrierï¼Œå¯ä»¥é“¾å¼è°ƒç”¨
ScopedValue.where(key, value).run(() -&gt; {...}): åœ¨æ–°ä½œç”¨åŸŸä¸­ç»‘å®šå€¼å¹¶æ‰§è¡Œä»£ç å—
ScopedValue.where(key, value).call(() -&gt; {...}): åœ¨æ–°ä½œç”¨åŸŸä¸­ç»‘å®šå€¼å¹¶æ‰§è¡Œä»£ç å—
ScopedValue.where(bindings).run(() -&gt; {...}): åœ¨æ–°ä½œç”¨åŸŸä¸­ç»‘å®šå€¼å¹¶æ‰§è¡Œä»£ç å—
ScopedValue.where(bindings).call(() -&gt; {...}): åœ¨æ–°ä½œç”¨åŸŸä¸­ç»‘å®šå€¼å¹¶æ‰§è¡Œä»£ç å—
ScopedValue.where(key1, value1).where(key2, value2).call(() -&gt; {...}): åœ¨æ–°ä½œç”¨åŸŸä¸­ç»‘å®šå€¼å¹¶æ‰§è¡Œä»£ç å—</p>
</blockquote>
<p>çŠ¶æ€æŸ¥è¯¢API</p>
<ul>
<li>ScopedValue.isBound(key): åˆ¤æ–­ã€Œå½“å‰çº¿ç¨‹çš„ä½œç”¨åŸŸæ ˆä¸­ï¼Œæ˜¯å¦å·²ç»‘å®šè¯¥ ScopedValue å®ä¾‹ã€</li>
<li>ScopedValue.get(key): è·å–å½“å‰çº¿ç¨‹ä½œç”¨åŸŸæ ˆä¸­ç»‘å®šçš„ ScopedValue å€¼</li>
<li>get()ï¼š: è·å–å½“å‰çº¿ç¨‹ä½œç”¨åŸŸæ ˆä¸­ç»‘å®šçš„ ScopedValue å€¼</li>
</ul>
<p>å·¥å…·æ–¹æ³•API</p>
<ul>
<li>orElse(key, defaultValue): å¦‚æœå½“å‰çº¿ç¨‹ä½œç”¨åŸŸæ ˆä¸­æœªç»‘å®šè¯¥ ScopedValue å®ä¾‹ï¼Œåˆ™è¿”å› defaultValue</li>
<li>orElseGet(key, supplier): å¦‚æœå½“å‰çº¿ç¨‹ä½œç”¨åŸŸæ ˆä¸­æœªç»‘å®šè¯¥ ScopedValue å®ä¾‹ï¼Œåˆ™é€šè¿‡ supplier å‡½æ•°è·å–å€¼</li>
</ul>
<p>æ³¨æ„ï¼š</p>
<ul>
<li>ScopedValueä¸€èˆ¬æ”¾åœ¨ç±»çš„é™æ€å­—æ®µä¸­ï¼Œç¡®ä¿åœ¨å½“å‰ç±»çš„æ‰€æœ‰æ–¹æ³•ä¸­éƒ½å¯ä»¥è®¿é—®åˆ°</li>
</ul>
<h2 data-id="heading-7">æ ¸å¿ƒåŸç†ä¸æ¶æ„è§£æ</h2>
<h3 data-id="heading-8">ä¸‰å¤§æ ¸å¿ƒåŸåˆ™</h3>
<p>ScopedValue å¹¶é ThreadLocal çš„ç®€å•æ›¿ä»£ï¼Œè€Œæ˜¯ JVM ä¸ºã€Œè™šæ‹Ÿçº¿ç¨‹ï¼ˆVirtual Threadï¼‰ã€é‡èº«è®¾è®¡çš„ä¸Šä¸‹æ–‡ä¼ é€’æœºåˆ¶ï¼Œå…¶è®¾è®¡éµå¾ªä¸‰å¤§æ ¸å¿ƒåŸåˆ™ï¼š</p>
<ul>
<li>ä½œç”¨åŸŸç»‘å®šï¼ˆScope-Boundï¼‰ï¼šä¸Šä¸‹æ–‡ä»…åœ¨ call() æ–¹æ³•å®šä¹‰çš„ä½œç”¨åŸŸå†…æœ‰æ•ˆï¼Œæ‰§è¡Œå®Œæ¯•è‡ªåŠ¨æ¸…ç†ï¼ˆå¤©ç„¶é¿å…å†…å­˜æ³„æ¼ï¼‰</li>
<li>é«˜æ•ˆä¼ æ’­ï¼ˆEfficient Propagationï¼‰ï¼šé€‚é…è™šæ‹Ÿçº¿ç¨‹çš„ M:N è°ƒåº¦æ¨¡å‹ï¼Œä¸Šä¸‹æ–‡ä¼ é€’æ— éœ€æ‹·è´ï¼Œä»…é€šè¿‡å¼•ç”¨å…³è”å®ç°çˆ¶å­çº¿ç¨‹ï¼ˆè™šæ‹Ÿçº¿ç¨‹ï¼‰çš„ç»§æ‰¿</li>
<li>ä¸å¯å˜æ€§ï¼ˆImmutabilityï¼‰ï¼šScopedValue å®ä¾‹ä¸å¯ä¿®æ”¹ï¼ˆæ—  set æ–¹æ³•ï¼‰ï¼Œç»‘å®šçš„å€¼ä»…åœ¨å½“å‰ä½œç”¨åŸŸå†…æœ‰æ•ˆï¼Œå­ä½œç”¨åŸŸæ— æ³•ç¯¡æ”¹çˆ¶ä½œç”¨åŸŸçš„å€¼</li>
</ul>
<h3 data-id="heading-9">ä¸‰å¤§å…³é”®ç»„ä»¶çš„è¯¦ç»†è®¾è®¡ï¼ˆæ¶æ„å±‚é¢æ‹†è§£ï¼‰</h3>
<h4 data-id="heading-10">ç»‘å®šç®¡ç†å™¨ï¼ˆBinding Managerï¼‰ï¼šä½œç”¨åŸŸçš„ â€œåˆ›å»º - æŸ¥æ‰¾ - æ¸…ç†â€ ä¸­æ¢</h4>
<ul>
<li>è®¾è®¡ç›®æ ‡ï¼šæ›¿ä»£ ThreadLocal çš„ ThreadLocalMapï¼Œè§£å†³ã€Œçº¿ç¨‹çº§å­˜å‚¨å¯¼è‡´çš„å†…å­˜å†—ä½™ã€é—®é¢˜ï¼Œå®ç°ã€Œä½œç”¨åŸŸçº§å­˜å‚¨ã€ã€‚</li>
<li>æ ¸å¿ƒè®¾è®¡ç»†èŠ‚ï¼š
<ul>
<li>æ•°æ®ç»“æ„ï¼šJVM å±‚é¢ç»´æŠ¤ã€Œçº¿ç¨‹ç§æœ‰ä½œç”¨åŸŸæ ˆï¼ˆScope Stackï¼‰ã€ï¼Œæ¯ä¸ªçº¿ç¨‹ï¼ˆåŒ…æ‹¬è™šæ‹Ÿçº¿ç¨‹ï¼‰éƒ½æœ‰ä¸€ä¸ªç‹¬ç«‹çš„æ ˆï¼Œæ ˆå…ƒç´ æ˜¯ã€Œç»‘å®šé›†åˆï¼ˆBindingSetï¼‰ã€ã€‚
<ul>
<li>BindingSetï¼šæœ¬è´¨æ˜¯ä¸€ä¸ªè½»é‡çº§å“ˆå¸Œè¡¨ï¼ˆæˆ–æ•°ç»„ï¼ŒåŸºäº ScopedValue.id ç´¢å¼•ï¼‰ï¼Œå­˜å‚¨å½“å‰ä½œç”¨åŸŸå†…æ‰€æœ‰ ScopedValue çš„ã€Œid - valueã€æ˜ å°„ï¼›</li>
<li>æ ˆç»“æ„ç‰¹æ€§ï¼š<code>ScopedValue.where().call()</code> æ–¹æ³•è°ƒç”¨æ—¶ï¼Œåˆ›å»ºæ–°çš„ BindingSet å‹å…¥æ ˆé¡¶ï¼›call() æ‰§è¡Œå®Œæ¯•ï¼ˆæ— è®ºæ­£å¸¸è¿”å›è¿˜æ˜¯å¼‚å¸¸ï¼‰ï¼Œè‡ªåŠ¨å¼¹å‡ºæ ˆé¡¶ BindingSet å¹¶é”€æ¯ï¼ˆå¤©ç„¶æ¸…ç†ï¼Œæ— å†…å­˜æ³„æ¼ï¼‰ã€‚</li>
</ul>
</li>
<li>id åˆ†é…æœºåˆ¶ï¼š
<ul>
<li>ç®€åŒ–æ¨¡å‹ä¸­çš„ allocateId() æ˜¯ JVM å±‚é¢çš„å…¨å±€å”¯ä¸€ ID ç”Ÿæˆå™¨ï¼ˆåŸºäºåŸå­ç±»è‡ªå¢ï¼‰ï¼Œç¡®ä¿æ¯ä¸ª ScopedValue å®ä¾‹çš„ id å…¨å±€å”¯ä¸€ï¼›</li>
<li>æŸ¥æ‰¾æ—¶ç›´æ¥é€šè¿‡ id ç´¢å¼• BindingSetï¼ˆO (1) å¤æ‚åº¦ï¼‰ï¼Œæ¯” ThreadLocalMap çš„å“ˆå¸Œå†²çªå¤„ç†æ›´é«˜æ•ˆã€‚</li>
</ul>
</li>
</ul>
</li>
<li>ä¼˜åŠ¿ï¼š
<ul>
<li>æ—  GC å‹åŠ›ï¼šé€€å‡ºä½œç”¨åŸŸå³é‡Šæ”¾ï¼Œæ— éœ€å¼±å¼•ç”¨æ¸…ç†</li>
<li>æ— å†…å­˜æ³„æ¼ï¼šä¸åƒ ThreadLocal éœ€è¦æ‰‹åŠ¨ remove()</li>
</ul>
</li>
</ul>
<h4 data-id="heading-11">ä¸Šä¸‹æ–‡ä¼ æ’­æœºåˆ¶ï¼ˆContext Propagationï¼‰ï¼šè™šæ‹Ÿçº¿ç¨‹çš„ â€œæ— æ‹·è´ç»§æ‰¿â€</h4>
<ul>
<li>è®¾è®¡ç›®æ ‡ï¼šé€‚é…è™šæ‹Ÿçº¿ç¨‹çš„ M:N è°ƒåº¦ï¼ˆå¤šä¸ªè™šæ‹Ÿçº¿ç¨‹æ˜ å°„åˆ°å°‘é‡è½½ä½“çº¿ç¨‹ï¼‰ï¼Œè§£å†³ ThreadLocal ä¸Šä¸‹æ–‡åˆ‡æ¢æ—¶çš„ã€Œæ‹·è´å¼€é”€ã€å’Œã€Œä¸€è‡´æ€§é—®é¢˜ã€ã€‚</li>
<li>æ ¸å¿ƒè®¾è®¡ç»†èŠ‚ï¼š
<ul>
<li>çˆ¶å­ä½œç”¨åŸŸç»§æ‰¿æ¨¡å‹ï¼š
<ul>
<li>å½“è™šæ‹Ÿçº¿ç¨‹ A è°ƒç”¨ <code>ScopedValue.call()</code> åˆ›å»ºä½œç”¨åŸŸåï¼Œè‹¥åœ¨è¯¥ä½œç”¨åŸŸå†…åˆ›å»ºå­è™šæ‹Ÿçº¿ç¨‹ Bï¼ŒJVM ä¼šè®© B çš„ã€Œä½œç”¨åŸŸæ ˆã€ç»§æ‰¿ A çš„æ ˆï¼ˆå…±äº«çˆ¶æ ˆçš„ BindingSet å¼•ç”¨ï¼Œè€Œéæ‹·è´ï¼‰ï¼›</li>
<li>å­çº¿ç¨‹ B å¯æ–°å¢è‡ªå·±çš„ BindingSetï¼ˆå‹å…¥æ ˆé¡¶ï¼‰ï¼Œä½†ä¿®æ”¹ä»…åœ¨è‡ªèº«ä½œç”¨åŸŸå†…æœ‰æ•ˆï¼Œä¸ä¼šå½±å“çˆ¶çº¿ç¨‹ A çš„ä¸Šä¸‹æ–‡ï¼ˆæ ˆéš”ç¦»ç‰¹æ€§ï¼‰ã€‚</li>
</ul>
</li>
<li>è™šæ‹Ÿçº¿ç¨‹è°ƒåº¦çš„ä¸Šä¸‹æ–‡ä¸€è‡´æ€§ï¼š
<ul>
<li>è™šæ‹Ÿçº¿ç¨‹åˆ‡æ¢æ—¶ï¼ˆä»è½½ä½“çº¿ç¨‹ X è¿ç§»åˆ°è½½ä½“çº¿ç¨‹ Yï¼‰ï¼Œæ— éœ€æ‹·è´ ScopedValue çš„ä¸Šä¸‹æ–‡ â€”â€” å› ä¸ºã€Œä½œç”¨åŸŸæ ˆã€æ˜¯è™šæ‹Ÿçº¿ç¨‹ç§æœ‰æ•°æ®ï¼Œä¸è½½ä½“çº¿ç¨‹è§£è€¦ï¼›</li>
<li>JVM åœ¨è°ƒåº¦è™šæ‹Ÿçº¿ç¨‹æ—¶ï¼Œä¼šè‡ªåŠ¨å°†å…¶ã€Œä½œç”¨åŸŸæ ˆã€ä¸å½“å‰è½½ä½“çº¿ç¨‹å…³è”ï¼Œç¡®ä¿ ScopedValue.get() èƒ½æ­£ç¡®æ‰¾åˆ°å½“å‰æ ˆé¡¶çš„ BindingSetã€‚</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 data-id="heading-12">å†…å­˜å±éšœï¼ˆMemory Barrierï¼‰ï¼šä½œç”¨åŸŸçš„ â€œå¯è§æ€§ä¸åŸå­æ€§ä¿éšœâ€</h4>
<ul>
<li>è®¾è®¡ç›®æ ‡ï¼šè§£å†³ã€Œä½œç”¨åŸŸé€€å‡ºæ—¶çš„èµ„æºé‡Šæ”¾å¯è§æ€§ã€å’Œã€Œä¸å¯å˜æ€§çš„çº¿ç¨‹å®‰å…¨ã€é—®é¢˜ï¼Œé¿å…æŒ‡ä»¤é‡æ’åºå¯¼è‡´çš„ä¸Šä¸‹æ–‡é”™ä¹±ã€‚</li>
<li>æ ¸å¿ƒè®¾è®¡ç»†èŠ‚ï¼š
<ul>
<li>ä½œç”¨åŸŸåˆ‡æ¢çš„å†…å­˜å±éšœï¼š
<ul>
<li>å½“ call() æ–¹æ³•æ‰§è¡Œ ScopeStack.push() æ—¶ï¼ŒJVM æ’å…¥ã€Œå†™å±éšœã€ï¼Œç¡®ä¿ BindingSet çš„ç»‘å®šæ“ä½œï¼ˆputï¼‰å¯¹åç»­ get() æ“ä½œå¯è§ï¼›</li>
<li>å½“æ‰§è¡Œ ScopeStack.pop() æ—¶ï¼Œæ’å…¥ã€Œè¯»å±éšœã€ï¼Œç¡®ä¿æ‰€æœ‰çº¿ç¨‹ï¼ˆåŒ…æ‹¬åˆ‡æ¢åçš„è½½ä½“çº¿ç¨‹ï¼‰éƒ½èƒ½æ„ŸçŸ¥åˆ°ã€Œå½“å‰ä½œç”¨åŸŸå·²å¤±æ•ˆã€ï¼Œé¿å…å‡ºç°ã€Œä½œç”¨åŸŸå·²é€€å‡ºä½†ä»èƒ½è¯»å–æ—§å€¼ã€çš„è„è¯»ã€‚</li>
</ul>
</li>
</ul>
</li>
<li>ä¸å¯å˜æ€§çš„åº•å±‚ä¿éšœï¼š
<ul>
<li>ScopedValue å®ä¾‹è¢«è®¾è®¡ä¸º finalï¼ˆæ—  set æ–¹æ³•ï¼‰ï¼Œç»‘å®šçš„å€¼ä¸€æ—¦å­˜å…¥ BindingSetï¼Œå°±æ— æ³•è¢«ä¿®æ”¹ï¼ˆBindingSet æ˜¯åªè¯»ç»“æ„ï¼Œä»…å…è®¸ put ä¸€æ¬¡ï¼‰ï¼›</li>
<li>å†…å­˜å±éšœç¦æ­¢ã€Œç»‘å®šæ“ä½œã€ä¸ã€Œæ‰§è¡Œç›®æ ‡é€»è¾‘ã€çš„æŒ‡ä»¤é‡æ’åºï¼Œç¡®ä¿ç›®æ ‡é€»è¾‘æ‰§è¡Œæ—¶ï¼ŒScopedValue çš„å€¼å·²å®Œå…¨ç»‘å®šã€‚</li>
</ul>
</li>
<li>å¼‚å¸¸åœºæ™¯çš„åŸå­æ¸…ç†ï¼š
<ul>
<li>è‹¥ call() ä¸­çš„ç›®æ ‡é€»è¾‘æŠ›å‡ºå¼‚å¸¸ï¼Œfinally å—çš„ pop() ä»ä¼šæ‰§è¡Œï¼Œé…åˆå†…å­˜å±éšœï¼Œç¡®ä¿ BindingSet è¢«åŸå­æ€§é”€æ¯ï¼Œé¿å…éƒ¨åˆ†ç»‘å®šæ®‹ç•™ã€‚</li>
</ul>
</li>
</ul>
<h3 data-id="heading-13">æ ¸å¿ƒè®¾è®¡ä¸ ThreadLocal çš„å…³é”®å·®å¼‚ï¼ˆæ¶æ„ä¼˜åŠ¿æ€»ç»“ï¼‰</h3>








































<table><thead><tr><th align="left">è®¾è®¡ç»´åº¦</th><th align="left">ThreadLocal</th><th align="left">ScopedValue</th></tr></thead><tbody><tr><td align="left">å­˜å‚¨ç²’åº¦</td><td align="left">çº¿ç¨‹çº§ï¼ˆæ¯ä¸ªçº¿ç¨‹ä¸€ä¸ª ThreadLocalMapï¼‰</td><td align="left">ä½œç”¨åŸŸçº§ï¼ˆæ¯ä¸ªä½œç”¨åŸŸä¸€ä¸ª BindingSetï¼‰</td></tr><tr><td align="left">æ¸…ç†æœºåˆ¶</td><td align="left">æ‰‹åŠ¨ remove() æˆ–çº¿ç¨‹é”€æ¯ï¼ˆæ˜“æ³„æ¼ï¼‰</td><td align="left">ä½œç”¨åŸŸé€€å‡ºè‡ªåŠ¨å¼¹æ ˆï¼ˆæ— æ³„æ¼ï¼‰</td></tr><tr><td align="left">ä¸Šä¸‹æ–‡ä¼ æ’­</td><td align="left">çº¿ç¨‹å‰¯æœ¬æ‹·è´ï¼ˆè™šæ‹Ÿçº¿ç¨‹åˆ‡æ¢å¼€é”€å¤§ï¼‰</td><td align="left">çˆ¶å­ä½œç”¨åŸŸå¼•ç”¨å…±äº«ï¼ˆæ— æ‹·è´ï¼‰</td></tr><tr><td align="left">ä¸å¯å˜æ€§ä¿éšœ</td><td align="left">æ— ï¼ˆå­˜å‚¨å¯å˜å¯¹è±¡æ˜“è¢«ç¯¡æ”¹ï¼‰</td><td align="left">å¤©ç„¶æ”¯æŒï¼ˆæ—  set æ–¹æ³•ï¼ŒBindingSet åªè¯»ï¼‰</td></tr><tr><td align="left">å†…å­˜å¼€é”€</td><td align="left">é«˜ï¼ˆç™¾ä¸‡è™šæ‹Ÿçº¿ç¨‹å¯¹åº”ç™¾ä¸‡ Mapï¼‰</td><td align="left">ä½ï¼ˆBindingSet éšä½œç”¨åŸŸå¤ç”¨é”€æ¯ï¼‰</td></tr><tr><td align="left">åº•å±‚ä¾èµ–</td><td align="left">åº”ç”¨å±‚å“ˆå¸Œè¡¨ï¼ˆThreadLocalMapï¼‰</td><td align="left">JVM å±‚é¢ä½œç”¨åŸŸæ ˆ + å†…å­˜å±éšœ</td></tr></tbody></table>
<h2 data-id="heading-14">ScopedValue çš„åº”ç”¨åœºæ™¯ä¸æ ¸å¿ƒç‰¹æ€§å®è·µ</h2>
<h3 data-id="heading-15">é€’å½’è°ƒç”¨ä¸å¤æ‚åµŒå¥—åœºæ™¯ä¸‹çš„ScopedValueè¡Œä¸º</h3>
<p>åœ¨é€’å½’è°ƒç”¨å’Œå¤æ‚åµŒå¥—ä½œç”¨åŸŸåœºæ™¯ä¸‹ï¼ŒScopedValueå±•ç°å‡ºå“è¶Šçš„è®¾è®¡ä¼˜åŠ¿ï¼Œè¿™æ˜¯ä¼ ç»ŸThreadLocaléš¾ä»¥å®ç°çš„ï¼š</p>
<ol>
<li><strong>é€’å½’è°ƒç”¨ä¸­çš„ä½œç”¨åŸŸéš”ç¦»</strong>ï¼š</li>
</ol>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// é€’å½’è°ƒç”¨ä¸­çš„ScopedValueè¡Œä¸ºç¤ºä¾‹</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RecursiveScopedValueExample</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> ScopedValue&lt;Integer&gt; DEPTH = ScopedValue.newInstance();
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-title function_">calculateFactorial</span><span class="hljs-params">(<span class="hljs-type">int</span> n)</span> {
        <span class="hljs-comment">// è®¾ç½®å½“å‰é€’å½’æ·±åº¦</span>
        <span class="hljs-type">int</span> <span class="hljs-variable">currentDepth</span> <span class="hljs-operator">=</span> DEPTH.get() == <span class="hljs-literal">null</span> ? <span class="hljs-number">1</span> : DEPTH.get() + <span class="hljs-number">1</span>;
        <span class="hljs-keyword">return</span> ScopedValue.where(DEPTH, currentDepth)
                          .call(() -&gt; {
            System.out.println(<span class="hljs-string">"é€’å½’æ·±åº¦: "</span> + DEPTH.get());
            <span class="hljs-keyword">if</span> (n &lt;= <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;
            <span class="hljs-keyword">return</span> n * calculateFactorial(n - <span class="hljs-number">1</span>);
        });
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">int</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> calculateFactorial(<span class="hljs-number">5</span>);
        System.out.println(<span class="hljs-string">"5! = "</span> + result);
        <span class="hljs-comment">// è¾“å‡ºå°†æ˜¾ç¤ºæ¯ä¸ªé€’å½’å±‚çº§çš„ç‹¬ç«‹ä½œç”¨åŸŸå’Œæ·±åº¦å€¼</span>
    }
}
</code></pre>
<ol>
<li><strong>æ·±åº¦åµŒå¥—çš„æ€§èƒ½ç¨³å®šæ€§ï¼šO(1) æ ˆæ“ä½œ vs O(n) å“ˆå¸ŒæŸ¥æ‰¾</strong></li>
</ol>
<p>ScopedValueåœ¨JVMå±‚é¢é‡‡ç”¨äº†æ ˆå¼ç®¡ç†æœºåˆ¶ï¼ŒåµŒå¥—æ—¶ä»…éœ€å‹å…¥ / å¼¹å‡ºä½œç”¨åŸŸæ ˆï¼ŒæŸ¥æ‰¾é€šè¿‡ id ç´¢å¼•ç›´æ¥å®šä½ï¼Œæ—¶é—´å¤æ‚åº¦ O(1)ï¼Œå³ä½¿åœ¨æ·±åº¦åµŒå¥—åœºæ™¯ä¸‹ä¹Ÿèƒ½ä¿æŒé«˜æ•ˆçš„æŸ¥æ‰¾å’Œæ¸…ç†æ€§èƒ½ã€‚è€Œ ThreadLocal åœ¨æ·±åº¦åµŒå¥—æ—¶éœ€éå† ThreadLocalMapï¼ˆå¯èƒ½è§¦å‘ rehashï¼‰ï¼Œæœ€å O(n)ã€‚æµ‹è¯•è¡¨æ˜ï¼Œå³ä½¿åœ¨1000å±‚åµŒå¥—çš„æç«¯åœºæ™¯ä¸‹ï¼ŒScopedValue çš„æŸ¥æ‰¾è€—æ—¶å’Œå†…å­˜å ç”¨å¢é•¿è¿œä½äº ThreadLocalã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// å¤šå±‚åµŒå¥—ä½œç”¨åŸŸæ€§èƒ½æµ‹è¯•</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">nestedScopesPerformance</span><span class="hljs-params">()</span> {
    <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">MAX_DEPTH</span> <span class="hljs-operator">=</span> <span class="hljs-number">1000</span>;
    ScopedValue&lt;Integer&gt; LEVEL = ScopedValue.newInstance();

    <span class="hljs-comment">// é€’å½’åˆ›å»ºåµŒå¥—ä½œç”¨åŸŸ</span>
    Consumer&lt;Integer&gt; createNestedScopes = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Consumer</span>&lt;Integer&gt;() {
        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">accept</span><span class="hljs-params">(Integer depth)</span> {
            <span class="hljs-keyword">if</span> (depth &gt;= MAX_DEPTH) <span class="hljs-keyword">return</span>;
            ScopedValue.where(LEVEL, depth + <span class="hljs-number">1</span>)
                      .run(() -&gt; {
                <span class="hljs-keyword">assert</span> LEVEL.get() == depth + <span class="hljs-number">1</span>;
                <span class="hljs-built_in">this</span>.accept(depth + <span class="hljs-number">1</span>);
            });
        }
    };
  
    <span class="hljs-comment">// å¼€å§‹æµ‹è¯•</span>
    <span class="hljs-type">long</span> <span class="hljs-variable">startTime</span> <span class="hljs-operator">=</span> System.nanoTime();
    createNestedScopes.accept(<span class="hljs-number">0</span>);
    <span class="hljs-type">long</span> <span class="hljs-variable">endTime</span> <span class="hljs-operator">=</span> System.nanoTime();
    System.out.println(<span class="hljs-string">"åˆ›å»º"</span> + MAX_DEPTH + <span class="hljs-string">"å±‚åµŒå¥—ä½œç”¨åŸŸè€—æ—¶: "</span> + (endTime - startTime) / <span class="hljs-number">1_000_000</span> + <span class="hljs-string">"ms"</span>);
}
</code></pre>
<ol>
<li><strong>å±€éƒ¨è¦†ç›–ä¸å…¨å±€ä¸Šä¸‹æ–‡ä¿æŒï¼šå£°æ˜å¼ä¸Šä¸‹æ–‡åˆ‡æ¢</strong></li>
</ol>
<p>åœ¨å¤æ‚ä¸šåŠ¡æµç¨‹ä¸­ï¼ŒScopedValueæ”¯æŒä¸´æ—¶è¦†ç›–ä¸Šä¸‹æ–‡å€¼ï¼Œé€€å‡ºä½œç”¨åŸŸåè‡ªåŠ¨æ¢å¤åŸå€¼ï¼Œä¸å½±å“å¤–å±‚ä½œç”¨åŸŸã€‚
æ¶æ„ä»·å€¼ï¼š</p>
<ul>
<li>é¿å…åˆ›å»ºå¤šä¸ª ThreadLocal å˜é‡æ¥æ¨¡æ‹Ÿâ€œæ¨¡å¼åˆ‡æ¢â€ï¼›</li>
<li>ä¸Šä¸‹æ–‡å˜æ›´èŒƒå›´ç²¾ç¡®é™å®šåœ¨ä»£ç å—å†…ï¼Œæå‡å¯è¯»æ€§ä¸å¯ç»´æŠ¤æ€§ï¼›</li>
<li>å¤©ç„¶æ”¯æŒ AOP å¼çš„æ¨ªåˆ‡å…³æ³¨ç‚¹ï¼ˆå¦‚å®¡è®¡ã€é™æµã€å¤šç§Ÿæˆ·ï¼‰ã€‚</li>
</ul>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">businessWorkflow</span><span class="hljs-params">()</span> {
    ScopedValue&lt;String&gt; USER_CONTEXT = ScopedValue.newInstance();
    ScopedValue&lt;String&gt; OPERATION_MODE = ScopedValue.newInstance();
    <span class="hljs-comment">// è®¾ç½®å…¨å±€ä¸Šä¸‹æ–‡</span>
    ScopedValue.where(USER_CONTEXT, <span class="hljs-string">"admin"</span>)
              .where(OPERATION_MODE, <span class="hljs-string">"normal"</span>)
              .run(() -&gt; {
        System.out.println(<span class="hljs-string">"å…¨å±€ä¸Šä¸‹æ–‡: "</span> + USER_CONTEXT.get() + <span class="hljs-string">", "</span> + OPERATION_MODE.get());
        executeStandardOperation();
        <span class="hljs-comment">// ä»…è¦†ç›– MODEï¼ŒUSER ä¿æŒä¸å˜</span>
        ScopedValue.where(OPERATION_MODE, <span class="hljs-string">"elevated"</span>)
                  .run(() -&gt; {
            System.out.println(<span class="hljs-string">"ç‰¹æ®Šæ“ä½œä¸Šä¸‹æ–‡: "</span> + USER_CONTEXT.get() + <span class="hljs-string">", "</span> + OPERATION_MODE.get());
            executeSpecialOperation();
        });
        <span class="hljs-comment">// è‡ªåŠ¨æ¢å¤ä¸º normal æ¨¡å¼</span>
        System.out.println(<span class="hljs-string">"æ¢å¤å…¨å±€ä¸Šä¸‹æ–‡: "</span> + USER_CONTEXT.get() + <span class="hljs-string">", "</span> + OPERATION_MODE.get());
    });
}
</code></pre>
<h3 data-id="heading-16">ç»“æ„åŒ–å¹¶å‘ä¸ ScopedValue çš„ååŒåº”ç”¨</h3>
<p>ScopedValue ä¸ Java ç»“æ„åŒ–å¹¶å‘ï¼ˆStructuredTaskScopeï¼‰çš„ååŒï¼Œæ˜¯æ–°ä¸€ä»£å¹¶å‘æ¨¡å‹çš„æ ¸å¿ƒä¼˜åŠ¿ â€”â€” ç»“æ„åŒ–å¹¶å‘çš„ â€œä»»åŠ¡çˆ¶å­å…³ç³»â€ ä¸ ScopedValue çš„ â€œä½œç”¨åŸŸç»§æ‰¿â€ å¤©ç„¶å¥‘åˆï¼Œå®ç°ä¸Šä¸‹æ–‡çš„è‡ªåŠ¨ä¼ æ’­ä¸å®‰å…¨æ¸…ç†ï¼Œè¿™æ˜¯ ThreadLocal æ— æ³•å®ç°çš„ï¼ˆThreadLocal éœ€æ‰‹åŠ¨é…ç½®çº¿ç¨‹æ± ä¸Šä¸‹æ–‡ä¼ é€’ï¼Œä¸”æ˜“å› ä»»åŠ¡å–æ¶ˆå¯¼è‡´æ³„æ¼ï¼‰ã€‚
æ ¸å¿ƒååŒç‰¹æ€§ï¼š</p>
<ul>
<li>å­ä»»åŠ¡è‡ªåŠ¨ç»§æ‰¿ä¸Šä¸‹æ–‡ï¼šç»“æ„åŒ–å¹¶å‘ä¸­ï¼Œfork åˆ›å»ºçš„å­ä»»åŠ¡ä¼šè‡ªåŠ¨ç»§æ‰¿çˆ¶ä»»åŠ¡çš„ ScopedValue ä¸Šä¸‹æ–‡ï¼Œæ— éœ€æ‰‹åŠ¨ä¼ é€’å‚æ•°æˆ–ç»‘å®šçº¿ç¨‹ã€‚</li>
<li>ä»»åŠ¡å–æ¶ˆ / å¼‚å¸¸æ—¶çš„ä¸Šä¸‹æ–‡æ¸…ç†ï¼šå½“ StructuredTaskScope å–æ¶ˆå­ä»»åŠ¡æˆ–æŠ›å‡ºå¼‚å¸¸æ—¶ï¼Œå­ä»»åŠ¡å¯¹åº”çš„ ScopedValue ä½œç”¨åŸŸä¼šéšä»»åŠ¡ç»ˆæ­¢è‡ªåŠ¨æ¸…ç†ï¼Œæ— å†…å­˜æ®‹ç•™ã€‚</li>
<li>ä¸Šä¸‹æ–‡ä¸€è‡´æ€§ä¿éšœï¼šæ‰€æœ‰å­ä»»åŠ¡å…±äº«åŒä¸€çˆ¶ä¸Šä¸‹æ–‡ï¼Œä¸”å­ä»»åŠ¡çš„å±€éƒ¨è¦†ç›–ä¸ä¼šå½±å“å…¶ä»–å­ä»»åŠ¡æˆ–çˆ¶ä»»åŠ¡ã€‚</li>
</ul>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ç»“æ„åŒ–å¹¶å‘ä¸ScopedValueçš„ååŒå·¥ä½œ</span>
<span class="hljs-keyword">public</span> String <span class="hljs-title function_">processOrder</span><span class="hljs-params">(String orderId)</span> {
    <span class="hljs-comment">// è®¾ç½®å…¨å±€è¿½è¸ªä¸Šä¸‹æ–‡</span>
    <span class="hljs-keyword">return</span> ScopedValue.where(TRACE_ID, generateTraceId())
                     .where(ORDER_ID, orderId)
                     .call(() -&gt; {
        <span class="hljs-keyword">try</span> (<span class="hljs-type">var</span> <span class="hljs-variable">scope</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StructuredTaskScope</span>.ShutdownOnFailure()) {
            <span class="hljs-comment">// å¹¶è¡Œä»»åŠ¡è‡ªåŠ¨ç»§æ‰¿ä¸Šä¸‹æ–‡</span>
            Subtask&lt;CustomerInfo&gt; customerTask = scope.fork(<span class="hljs-built_in">this</span>::fetchCustomerInfo);
            Subtask&lt;InventoryStatus&gt; inventoryTask = scope.fork(<span class="hljs-built_in">this</span>::checkInventory);
            Subtask&lt;PaymentResult&gt; paymentTask = scope.fork(<span class="hljs-built_in">this</span>::processPayment);

            scope.join(); <span class="hljs-comment">// ç­‰å¾…æ‰€æœ‰å­ä»»åŠ¡å®Œæˆ</span>

            <span class="hljs-comment">// æ„å»ºå“åº”ï¼Œæ‰€æœ‰ä»»åŠ¡å…±äº«ç›¸åŒä¸Šä¸‹æ–‡</span>
            <span class="hljs-keyword">return</span> buildOrderResponse(
                customerTask.get(),
                inventoryTask.get(),
                paymentTask.get()
            );
        }
    });
}
</code></pre>
<h3 data-id="heading-17">å¼‚å¸¸åœºæ™¯ä¸‹çš„ ScopedValueï¼šæ¸…ç†æœºåˆ¶ä¸ä¸Šä¸‹æ–‡ç¨³å®šæ€§</h3>
<p>ScopedValue åœ¨å¼‚å¸¸å¤„ç†ä¸Šçš„æ ¸å¿ƒä¼˜åŠ¿çš„æ˜¯ â€œè¯­è¨€çº§åˆ«çš„èµ„æºæ¸…ç†ä¿éšœâ€â€”â€” æ— è®ºæ­£å¸¸æ‰§è¡Œã€å¼‚å¸¸æŠ›å‡ºè¿˜æ˜¯ä»»åŠ¡å–æ¶ˆï¼Œä½œç”¨åŸŸé€€å‡ºæ—¶éƒ½ä¼šè‡ªåŠ¨æ¸…ç†ç»‘å®šå€¼ï¼Œä»æ ¹æœ¬ä¸Šè§£å†³ ThreadLocal ä¾èµ–æ‰‹åŠ¨ remove() å¯¼è‡´çš„å†…å­˜æ³„æ¼é—®é¢˜ã€‚å…¶è¡Œä¸ºç‰¹æ€§å¯åˆ†ä¸ºä¸‰ç±»åœºæ™¯ï¼š</p>
<ol>
<li><strong>å•ä½œç”¨åŸŸå¼‚å¸¸ï¼šå¯é çš„è‡ªåŠ¨æ¸…ç†</strong></li>
</ol>
<p>æ— è®ºæ‰§è¡Œè¿‡ç¨‹ä¸­æ˜¯å¦å‘ç”Ÿå¼‚å¸¸ï¼ŒScopedValueéƒ½ä¼šåœ¨ä½œç”¨åŸŸé€€å‡ºæ—¶è‡ªåŠ¨æ¸…ç†ç»‘å®šçš„å€¼ã€‚è¿™æ˜¯é€šè¿‡JVMçº§åˆ«çš„try-with-resourcesç±»ä¼¼æœºåˆ¶å®ç°çš„ï¼Œç¡®ä¿ä¸ä¼šå‘ç”Ÿå†…å­˜æ³„æ¼ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// å•ä½œç”¨åŸŸå¼‚å¸¸æ¸…ç†ç¤ºä¾‹</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">processWithException</span><span class="hljs-params">()</span> {
    <span class="hljs-comment">// æ— é»˜è®¤å€¼çš„ ScopedValueï¼šä½œç”¨åŸŸé€€å‡ºå get() æŠ› NoSuchElementException</span>
    ScopedValue&lt;String&gt; SESSION_ID = ScopedValue.newInstance();
    <span class="hljs-comment">// æœ‰é»˜è®¤å€¼çš„ ScopedValueï¼šä½œç”¨åŸŸé€€å‡ºå get() è¿”å›é»˜è®¤å€¼</span>
    ScopedValue&lt;String&gt; APP_MODE = ScopedValue.withInitial(() -&gt; <span class="hljs-string">"default"</span>);

    <span class="hljs-keyword">try</span> {
        ScopedValue.where(SESSION_ID, <span class="hljs-string">"abc123"</span>)
        .where(APP_MODE, <span class="hljs-string">"production"</span>)
        .run(() -&gt; {
            <span class="hljs-comment">// æ¨¡æ‹Ÿä¸šåŠ¡é€»è¾‘</span>
            System.out.println(<span class="hljs-string">"æ‰§è¡Œä¸­ï¼š"</span> + SESSION_ID.get() + <span class="hljs-string">", "</span> + APP_MODE.get());

            <span class="hljs-comment">// æ¨¡æ‹Ÿä¸šåŠ¡å¼‚å¸¸</span>
            <span class="hljs-keyword">if</span> (<span class="hljs-literal">true</span>) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"ä¸šåŠ¡å¤„ç†å¤±è´¥"</span>);

            <span class="hljs-comment">// ä»¥ä¸‹ä»£ç ä¸ä¼šæ‰§è¡Œ</span>
            System.out.println(<span class="hljs-string">"This won't be executed"</span>);
        });
    } <span class="hljs-keyword">catch</span> (Exception e) {
        System.out.println(<span class="hljs-string">"æ•è·åˆ°å¼‚å¸¸: "</span> + e.getMessage());
        <span class="hljs-comment">// æ— é»˜è®¤å€¼çš„ ScopedValue æŠ›å¼‚å¸¸</span>
        <span class="hljs-keyword">try</span> {
            SESSION_ID.get();
        } <span class="hljs-keyword">catch</span> (NoSuchElementException ex) {
            System.out.println(<span class="hljs-string">"éªŒè¯ï¼šå¼‚å¸¸å‘ç”ŸåScopedValueå·²è¢«æ­£ç¡®æ¸…ç†"</span>);
        }
        <span class="hljs-comment">// æœ‰é»˜è®¤å€¼çš„ ScopedValue è¿”å›é»˜è®¤å€¼</span>
        System.out.println(<span class="hljs-string">"éªŒè¯2ï¼šæœ‰é»˜è®¤å€¼çš„ ScopedValue è¿”å›é»˜è®¤å€¼ï¼š"</span> + APP_MODE.get());
    }
}
</code></pre>
<ol>
<li><strong>åµŒå¥—ä½œç”¨åŸŸå¼‚å¸¸ï¼šä¸Šä¸‹æ–‡éš”ç¦»ä¸æ¢å¤</strong>
åµŒå¥—ä½œç”¨åŸŸä¸­ï¼Œå†…å±‚ä½œç”¨åŸŸæŠ›å‡ºå¼‚å¸¸åï¼Œä»…ä¼šæ¸…ç†å†…å±‚ç»‘å®šå€¼ï¼Œå¤–å±‚ä½œç”¨åŸŸçš„ä¸Šä¸‹æ–‡ä¿æŒä¸å˜ â€”â€” ä½“ç° â€œæ ˆå¼éš”ç¦»â€ ç‰¹æ€§ï¼Œå†…å±‚ä¿®æ”¹ä¸ä¼šæ±¡æŸ“å¤–å±‚ã€‚</li>
</ol>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// åµŒå¥—ä½œç”¨åŸŸå¼‚å¸¸ï¼šå†…å±‚æ¸…ç†ä¸å½±å“å¤–å±‚</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">nestedScopesWithException</span><span class="hljs-params">()</span> {
    ScopedValue&lt;String&gt; REQUEST_ID = ScopedValue.newInstance();
    ScopedValue&lt;String&gt; USER_ID = ScopedValue.newInstance();

    <span class="hljs-keyword">try</span> {
        ScopedValue.where(REQUEST_ID, <span class="hljs-string">"req-123"</span>)
                  .where(USER_ID, <span class="hljs-string">"user-456"</span>)
                  .run(() -&gt; {
            System.out.println(<span class="hljs-string">"å¤–å±‚ä½œç”¨åŸŸ: "</span> + REQUEST_ID.get() + <span class="hljs-string">", "</span> + USER_ID.get());

            <span class="hljs-comment">// åµŒå¥—ä½œç”¨åŸŸï¼šä¸´æ—¶è¦†ç›– USER_ID</span>
            <span class="hljs-keyword">try</span> {
                ScopedValue.where(USER_ID, <span class="hljs-string">"user-modified"</span>)
                          .run(() -&gt; {
                    System.out.println(<span class="hljs-string">"å†…å±‚ä½œç”¨åŸŸ: "</span> + REQUEST_ID.get() + <span class="hljs-string">", "</span> + USER_ID.get());
                    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"å†…å±‚å¼‚å¸¸"</span>);
                });
            } <span class="hljs-keyword">catch</span> (Exception e) {
                System.out.println(<span class="hljs-string">"å†…å±‚å¼‚å¸¸è¢«æ•è·: "</span> + e.getMessage());
                <span class="hljs-comment">// éªŒè¯å†…å±‚ä½œç”¨åŸŸé€€å‡ºåï¼Œå¤–å±‚ä½œç”¨åŸŸçš„å€¼æ¢å¤</span>
                System.out.println(<span class="hljs-string">"å¤–å±‚ä½œç”¨åŸŸæ¢å¤: "</span> + REQUEST_ID.get() + <span class="hljs-string">", "</span> + USER_ID.get());
            }
        });
    } <span class="hljs-keyword">catch</span> (Exception e) {
        System.out.println(<span class="hljs-string">"å¤–å±‚å¼‚å¸¸: "</span> + e.getMessage());
    }
}
</code></pre>
<ol>
<li><strong>ä¸ThreadLocalçš„æ ¹æœ¬åŒºåˆ«</strong>
ThreadLocalä¾èµ–å¼€å‘è€…åœ¨finallyå—ä¸­æ˜¾å¼æ¸…ç†ï¼Œè€ŒScopedValueé€šè¿‡è¯­è¨€çº§åˆ«çš„è®¾è®¡ç¡®ä¿æ— è®ºä½•ç§å¼‚å¸¸è·¯å¾„éƒ½ä¼šæ‰§è¡Œæ¸…ç†æ“ä½œã€‚è¿™ä»æ ¹æœ¬ä¸Šè§£å†³äº†ThreadLocalåœ¨å¼‚å¸¸åœºæ™¯ä¸‹çš„å†…å­˜æ³„æ¼é—®é¢˜ã€‚</li>
</ol>
<p>ä»æ¶æ„è®¾è®¡è§’åº¦çœ‹ï¼ŒScopedValueçš„å¼‚å¸¸å¤„ç†æœºåˆ¶ä½“ç°äº†"é˜²å¾¡å¼ç¼–ç¨‹"çš„æœ€ä½³å®è·µï¼Œå°†èµ„æºç®¡ç†ä¸ä¸šåŠ¡é€»è¾‘åˆ†ç¦»ï¼Œå‡å°‘äº†äººä¸ºé”™è¯¯çš„å¯èƒ½æ€§ã€‚è¿™åœ¨é«˜å¯ç”¨ç³»ç»Ÿè®¾è®¡ä¸­å°¤ä¸ºé‡è¦ï¼Œå¯ä»¥æ˜¾è‘—æé«˜ç³»ç»Ÿçš„ç¨³å®šæ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</p>
<h2 data-id="heading-18">å®è·µæŒ‡å¯¼ä¸è¿ç§»ç­–ç•¥</h2>
<h3 data-id="heading-19">ä»ThreadLocalåˆ°ScopedValueçš„ä¸‰é˜¶æ®µè¿ç§»</h3>
<p>åŸºäºæˆ‘ä»¬åœ¨å¤šä¸ªå¤§å‹é¡¹ç›®ä¸­çš„å®è·µç»éªŒï¼Œæ¨èé‡‡ç”¨ä»¥ä¸‹è¿ç§»ç­–ç•¥ï¼š</p>
<p><strong>é˜¶æ®µ1ï¼šè¯„ä¼°ä¸å‡†å¤‡ï¼ˆ1-2å‘¨ï¼‰</strong></p>
<ul>
<li>å®¡è®¡ç°æœ‰ThreadLocalä½¿ç”¨åœºæ™¯ï¼ŒæŒ‰é£é™©ç­‰çº§åˆ†ç±»</li>
<li>è¯†åˆ«ThreadLocalæ¸…ç†ä¸å®Œæ•´çš„ä»£ç è·¯å¾„</li>
<li>å»ºç«‹æ€§èƒ½åŸºå‡†æµ‹è¯•ï¼Œä¸ºè¿ç§»æ•ˆæœæä¾›å¯¹æ¯”ä¾æ®</li>
</ul>
<p><strong>é˜¶æ®µ2ï¼šå¢é‡æ›¿æ¢ï¼ˆ2-4å‘¨ï¼‰</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// è¿ç§»ç¤ºä¾‹ï¼šWebè¿‡æ»¤å™¨ä¸Šä¸‹æ–‡ç®¡ç†</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">WebContextFilter</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Filter</span> {
    <span class="hljs-comment">// æ—§æ–¹æ¡ˆï¼šThreadLocal</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> ThreadLocal&lt;WebContext&gt; CONTEXT_TL = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadLocal</span>&lt;&gt;();

    <span class="hljs-comment">// æ–°æ–¹æ¡ˆï¼šScopedValue</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> ScopedValue&lt;WebContext&gt; CONTEXT_SV = ScopedValue.newInstance();

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doFilter</span><span class="hljs-params">(ServletRequest request, ServletResponse response, FilterChain chain)</span> 
            <span class="hljs-keyword">throws</span> IOException, ServletException {

        <span class="hljs-type">WebContext</span> <span class="hljs-variable">context</span> <span class="hljs-operator">=</span> createContext(request);

        <span class="hljs-comment">// æ–¹æ¡ˆAï¼šå®Œå…¨ThreadLocalï¼ˆè¿ç§»å‰ï¼‰</span>
        <span class="hljs-keyword">try</span> {
            CONTEXT_TL.set(context);
            chain.doFilter(request, response);
        } <span class="hljs-keyword">finally</span> {
            CONTEXT_TL.remove(); <span class="hljs-comment">// æ‰‹åŠ¨æ¸…ç†ï¼Œå®¹æ˜“é—æ¼</span>
        }

        <span class="hljs-comment">// æ–¹æ¡ˆBï¼šå®Œå…¨ScopedValueï¼ˆè¿ç§»åï¼‰</span>
        <span class="hljs-keyword">try</span> {
        ScopedValue.where(CONTEXT_SV, context).call(() -&gt; {
            chain.doFilter(request, response);
            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        });
        } <span class="hljs-keyword">catch</span> (IOException | ServletException | e) {
            <span class="hljs-keyword">throw</span> e; <span class="hljs-comment">// ä¿æŒåŸç±»å‹</span>
        } <span class="hljs-keyword">catch</span> (RuntimeException e) {
            <span class="hljs-keyword">throw</span> e; <span class="hljs-comment">// æ˜¾å¼é€ä¼ ï¼Œé˜²æ­¢è¢«ä¸‹ä¸€åˆ†æ”¯åŒ…è£…</span>
        } <span class="hljs-keyword">catch</span> (Exception e) {
            <span class="hljs-comment">// ç†è®ºä¸Šä¸ä¼šå‘ç”Ÿï¼ˆdoFilter åªæŠ›å‡º IOException/ServletExceptionï¼‰</span>
            <span class="hljs-comment">// ä½†ä¸ºæ»¡è¶³ç¼–è¯‘å™¨è¦æ±‚ï¼Œéœ€å¤„ç†</span>
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ServletException</span>(<span class="hljs-string">"Unexpected checked exception in filter"</span>, e);
        }<span class="hljs-comment">// è‡ªåŠ¨æ¸…ç†ï¼Œæ— éœ€try-finally</span>
    }
}
</code></pre>
<p><strong>é˜¶æ®µ3ï¼šä¼˜åŒ–ä¸å¼ºåŒ–ï¼ˆæŒç»­è¿›è¡Œï¼‰</strong></p>
<ul>
<li>åˆ©ç”¨ScopedValueçš„ç»“æ„åŒ–ç‰¹æ€§é‡æ„ä»£ç </li>
<li>å¼•å…¥æ›´ä¸°å¯Œçš„ä¸Šä¸‹æ–‡å¯¹è±¡æ¨¡å‹</li>
<li>å®ç°AOPåˆ‡é¢è‡ªåŠ¨ç®¡ç†ä½œç”¨åŸŸ</li>
</ul>
<h3 data-id="heading-20">ä¼ä¸šçº§æœ€ä½³å®è·µ</h3>
<p>åœ¨é‡‘èã€ç”µå•†ç­‰é«˜å¹¶å‘é¢†åŸŸçš„å®è·µä¸­ï¼Œæˆ‘ä»¬æ€»ç»“å‡ºä»¥ä¸‹æœ€ä½³å®è·µï¼š</p>
<ol>
<li><strong>ä¸Šä¸‹æ–‡åˆ†å±‚è®¾è®¡</strong>ï¼šæŒ‰åŠŸèƒ½é¢†åŸŸåˆ’åˆ†ä½œç”¨åŸŸå€¼ï¼Œé¿å…å•ä¸€å…¨å±€ä¸Šä¸‹æ–‡</li>
</ol>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æ¨èï¼šåˆ†å±‚ä¸Šä¸‹æ–‡è®¾è®¡</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ContextLayers</span> {
    <span class="hljs-comment">// æ ¸å¿ƒå±‚ï¼šå®‰å…¨ä¸èº«ä»½</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> ScopedValue&lt;UserPrincipal&gt; SECURITY_CONTEXT = ScopedValue.newInstance();

    <span class="hljs-comment">// ä¸šåŠ¡å±‚ï¼šè¯·æ±‚ä¸äº‹åŠ¡</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> ScopedValue&lt;RequestContext&gt; REQUEST_CONTEXT = ScopedValue.newInstance();

    <span class="hljs-comment">// æŠ€æœ¯å±‚ï¼šè¿½è¸ªä¸ç›‘æ§</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> ScopedValue&lt;TraceContext&gt; TRACE_CONTEXT = ScopedValue.newInstance();
}
</code></pre>
<ol>
<li><strong>å¼‚å¸¸å¤„ç†å¢å¼º</strong>ï¼šç»“åˆä½œç”¨åŸŸå€¼å®ç°æ›´ä¸°å¯Œçš„å¼‚å¸¸ä¸Šä¸‹æ–‡</li>
</ol>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// å¼‚å¸¸å¤„ç†å¢å¼º</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EnhancedExceptionHandler</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">HandlerExceptionResolver</span> {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> ModelAndView <span class="hljs-title function_">resolveException</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response, 
                                        Object handler, Exception ex)</span> {
        <span class="hljs-comment">// ä»ä½œç”¨åŸŸå€¼è·å–ä¸Šä¸‹æ–‡ä¿¡æ¯ä¸°å¯Œå¼‚å¸¸</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">requestId</span> <span class="hljs-operator">=</span> RequestContext.REQUEST_ID.orElse(<span class="hljs-string">"unknown"</span>);
        <span class="hljs-type">String</span> <span class="hljs-variable">userId</span> <span class="hljs-operator">=</span> SecurityContext.USER_ID.orElse(<span class="hljs-string">"anonymous"</span>);
        log.error(<span class="hljs-string">"Request {} by user {} failed: {}"</span>, requestId, userId, ex.getMessage(), ex);
        <span class="hljs-comment">// æ„å»ºåŒ…å«ä¸Šä¸‹æ–‡ä¿¡æ¯çš„é”™è¯¯å“åº”</span>
        <span class="hljs-keyword">return</span> buildErrorResponse(request, response, ex, requestId, userId);
    }
}
</code></pre>
<h2 data-id="heading-21">æ¶æ„å½±å“ä¸æ€§èƒ½è¯„ä¼°</h2>
<h3 data-id="heading-22">å¯¹åº”ç”¨æ¶æ„çš„æ·±è¿œå½±å“</h3>
<p>ScopedValueçš„å¼•å…¥å¯¹Javaåº”ç”¨æ¶æ„äº§ç”Ÿäº†å¤šæ–¹é¢çš„ç§¯æå½±å“ï¼š</p>
<ol>
<li><strong>å¾®æœåŠ¡å¯è§‚æµ‹æ€§æå‡</strong>ï¼šé€šè¿‡æ ‡å‡†åŒ–çš„ä¸Šä¸‹æ–‡ä¼ é€’ï¼Œç®€åŒ–åˆ†å¸ƒå¼è¿½è¸ªå®ç°</li>
<li><strong>è™šæ‹Ÿçº¿ç¨‹æ€§èƒ½å……åˆ†å‘æŒ¥</strong>ï¼šé¿å…ThreadLocalåœ¨çº¿ç¨‹æ± ä¸­ç§¯ç´¯å¯¼è‡´çš„å†…å­˜é—®é¢˜</li>
<li><strong>ä»£ç è´¨é‡ä¸å¯ç»´æŠ¤æ€§</strong>ï¼šæ˜ç¡®çš„ä½œç”¨åŸŸè¾¹ç•Œä½¿ä»£ç ç»“æ„æ›´æ¸…æ™°</li>
<li><strong>æ¶æ„æ¼”è¿›æ”¯æŒ</strong>ï¼šä¸ºå“åº”å¼ç¼–ç¨‹å’Œäº‹ä»¶é©±åŠ¨æ¶æ„æä¾›æ›´å¥½çš„ä¸Šä¸‹æ–‡ç®¡ç†æ”¯æŒ</li>
</ol>
<h2 data-id="heading-23">æœªæ¥å±•æœ›</h2>
<p>å±•æœ›æœªæ¥ï¼ŒScopedValueçš„å‘å±•æ–¹å‘å¯èƒ½åŒ…æ‹¬ï¼š</p>
<ol>
<li><strong>APIè¿›ä¸€æ­¥ç®€åŒ–</strong>ï¼šæ›´æµç•…çš„é“¾å¼è°ƒç”¨å’Œå£°æ˜å¼ç”¨æ³•</li>
<li><strong>ç¼–è¯‘æœŸä¼˜åŒ–</strong>ï¼šJITç¼–è¯‘å™¨å¯¹ScopedValueè®¿é—®çš„ä¸“é—¨ä¼˜åŒ–</li>
<li><strong>å¯è§†åŒ–è°ƒè¯•å·¥å…·</strong>ï¼šIDEå’Œç›‘æ§å·¥å…·å¯¹ä½œç”¨åŸŸçš„å¯è§†åŒ–æ”¯æŒ</li>
<li><strong>æ‰©å±•åˆ°æ›´å¤šåœºæ™¯</strong>ï¼šå¦‚å“åº”å¼æµå¤„ç†ã€è®¡ç®—å¼•æ“ç­‰</li>
</ol>
<p>ä»æ¶æ„æ¼”è¿›çš„è§’åº¦çœ‹ï¼ŒScopedValueä»£è¡¨äº†Javaå‘æ›´ç°ä»£ã€æ›´å®‰å…¨ã€æ›´é«˜æ•ˆçš„å¹¶å‘æ¨¡å‹è¿ˆè¿›çš„é‡è¦ä¸€æ­¥ã€‚å®ƒä¸ä»…ä»…æ˜¯å¯¹ThreadLocalçš„æ›¿ä»£ï¼Œæ›´æ˜¯å¯¹Javaå¹³å°å¦‚ä½•æ”¯æŒäº‘åŸç”Ÿåº”ç”¨çš„æ·±åº¦æ€è€ƒã€‚</p>
<h2 data-id="heading-24">ç»“è¯­</h2>
<p>ScopedValueçš„å¼•å…¥æ ‡å¿—ç€Javaä¸Šä¸‹æ–‡ç®¡ç†çš„èŒƒå¼é©å‘½ï¼Œä»çº¿ç¨‹ç»‘å®šè½¬å‘ä½œç”¨åŸŸç»‘å®šï¼Œä»æ‰‹åŠ¨ç®¡ç†è½¬å‘è‡ªåŠ¨ç”Ÿå‘½å‘¨æœŸç®¡ç†ã€‚è¿™ä¸€è½¬å˜ä¸ä»…è§£å†³äº†ThreadLocalçš„å†å²é—ç•™é—®é¢˜ï¼Œæ›´ä¸ºæ„å»ºä¸‹ä¸€ä»£é«˜æ€§èƒ½ã€å¯ç»´æŠ¤çš„Javaåº”ç”¨æä¾›äº†åšå®åŸºç¡€ã€‚</p>
<p>å¯¹äºç³»ç»Ÿæ¶æ„å¸ˆå’ŒæŠ€æœ¯å†³ç­–è€…è€Œè¨€ï¼Œå°½æ—©è§„åˆ’ä»ThreadLocalåˆ°ScopedValueçš„è¿ç§»ï¼Œå°†ä¸ºåº”ç”¨å¸¦æ¥æ˜¾è‘—çš„æ€§èƒ½ã€ç¨³å®šæ€§å’Œå¯ç»´æŠ¤æ€§æå‡ã€‚è®©æˆ‘ä»¬æ‹¥æŠ±è¿™ä¸€æŠ€æœ¯æ¼”è¿›ï¼Œæ„å»ºæ›´åŠ é«˜æ•ˆã€å¯é çš„Javaåº”ç”¨æ¶æ„ã€‚</p>
<h2 data-id="heading-25">å‚è€ƒèµ„æ–™</h2>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fopenjdk.org%2Fjeps%2F429" target="_blank" title="https://openjdk.org/jeps/429" ref="nofollow noopener noreferrer">JEP 429: Scoped Values (Incubator)</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fopenjdk.org%2Fjeps%2F446" target="_blank" title="https://openjdk.org/jeps/446" ref="nofollow noopener noreferrer">JEP 446: Scoped Values (Preview)</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fopenjdk.org%2Fjeps%2F464" target="_blank" title="https://openjdk.org/jeps/464" ref="nofollow noopener noreferrer">JEP 464: Scoped Values (Second Preview)</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fopenjdk.org%2Fjeps%2F481" target="_blank" title="https://openjdk.org/jeps/481" ref="nofollow noopener noreferrer">JEP 481: Scoped Values (Third Preview)</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fopenjdk.org%2Fjeps%2F487" target="_blank" title="https://openjdk.org/jeps/487" ref="nofollow noopener noreferrer">JEP 487: Scoped Values (Fourth Preview)</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fopenjdk.org%2Fjeps%2F506" target="_blank" title="https://openjdk.org/jeps/506" ref="nofollow noopener noreferrer">JEP 506: Scoped Values</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç¾å›¢é¢è¯•ï¼šMySQLä¸ºä»€ä¹ˆèƒ½å¤Ÿåœ¨å¤§æ•°æ®é‡ã€é«˜å¹¶å‘çš„ä¸šåŠ¡ä¸­ç¨³å®šè¿è¡Œ?]]></title>    <link>https://juejin.cn/post/7577001324416729138</link>    <guid>https://juejin.cn/post/7577001324416729138</guid>    <pubDate>2025-11-26T14:05:56.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577001324416729138" data-draft-id="7576843726011940890" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç¾å›¢é¢è¯•ï¼šMySQLä¸ºä»€ä¹ˆèƒ½å¤Ÿåœ¨å¤§æ•°æ®é‡ã€é«˜å¹¶å‘çš„ä¸šåŠ¡ä¸­ç¨³å®šè¿è¡Œ?"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-26T14:05:56.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ±Ÿå°åŒ—"/> <meta itemprop="url" content="https://juejin.cn/user/2612095358872583"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç¾å›¢é¢è¯•ï¼šMySQLä¸ºä»€ä¹ˆèƒ½å¤Ÿåœ¨å¤§æ•°æ®é‡ã€é«˜å¹¶å‘çš„ä¸šåŠ¡ä¸­ç¨³å®šè¿è¡Œ?
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2612095358872583/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ±Ÿå°åŒ—
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T14:05:56.000Z" title="Wed Nov 26 2025 14:05:56 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>MySQLæ˜¯äº’è”ç½‘å…¬å¸ç”¨å¾—æœ€å¤šçš„æ•°æ®åº“ï¼Œè€ŒInnoDBåˆ™æ˜¯MySQLç”Ÿæ€ä¸­æœ€å¸¸è§çš„å­˜å‚¨å¼•æ“ã€‚</p>
<blockquote>
<p>å®ƒä¸ºä»€ä¹ˆèƒ½å¤Ÿåœ¨å¤§æ•°æ®é‡ã€é«˜å¹¶å‘çš„äº’è”ç½‘ä¸šåŠ¡ä¸­ç¨³å®šè¿è¡Œï¼Ÿ</p>
</blockquote>
<p>ä»Šå¤©æˆ‘ä»¬æ¥èŠèŠInnoDBçš„å¹¶å‘æ§åˆ¶ã€é”æœºåˆ¶å’ŒMVCCâ€”â€”ä»åŸºç¡€æ¦‚å¿µåˆ°å†…æ ¸è®¾è®¡çš„å®Œæ•´é€»è¾‘ã€‚</p>
<p>è¿™ç¯‡æ–‡ç« ç¨é•¿ä¸€äº›ï¼Œå»ºè®®æ”¶è—åæ…¢æ…¢å“è¯»ã€‚</p>
<h2 data-id="heading-1">å¹¶å‘æ§åˆ¶ï¼šä¸ºä»€ä¹ˆæ•°æ®åº“éœ€è¦å®ƒï¼Ÿ</h2>
<p>æƒ³è±¡ä¸€ä¸ªåœºæ™¯ï¼š</p>
<p>å¤šä¸ªè¯·æ±‚åŒæ—¶å¯¹åŒä¸€æ¡æ•°æ®è¿›è¡Œæ“ä½œã€‚å¦‚æœæ²¡æœ‰ä»»ä½•ä¿æŠ¤æªæ–½ï¼Œç»“æœä¼šæ˜¯æ··ä¹±çš„â€”â€”æŸä¸ªçº¿ç¨‹è¿˜åœ¨ä¿®æ”¹æ•°æ®ï¼Œå¦ä¸€ä¸ªçº¿ç¨‹å·²ç»å¼€å§‹è¯»å–ï¼Œæœ€åå¯¼è‡´æ•°æ®ä¸ä¸€è‡´ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cadf38e5a7de46049878cb50a76606ac~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rGf5bCP5YyX:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764770755&amp;x-signature=dTwt%2BDBd%2Fb0DRky5NZvySn41%2BBs%3D" alt="" loading="lazy"/></p>
<p><strong>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæ•°æ®åº“å¿…é¡»æœ‰å¹¶å‘æ§åˆ¶æœºåˆ¶ã€‚</strong></p>
<p>ä»æŠ€æœ¯è§’åº¦çœ‹ï¼Œä¿è¯æ•°æ®ä¸€è‡´æ€§çš„æ–¹æ³•é€šå¸¸æœ‰ä¸¤ç±»ï¼š</p>
<ul>
<li>ä¸€æ˜¯ç”¨<strong>é”</strong>æ¥é˜»æ­¢å†²çªæ“ä½œ</li>
<li>äºŒæ˜¯ç”¨<strong>æ•°æ®å¤šç‰ˆæœ¬</strong>æ¥è®©ä¸åŒæ“ä½œå¹¶è¡Œè¿›è¡Œã€‚</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/032f1a5be3f14e80b8864e64fc9759ef~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rGf5bCP5YyX:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764770755&amp;x-signature=uLzumBigNS%2FFh%2Bg6fcy112EHHEU%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-2">ä»æ™®é€šé”åˆ°è¯»å†™é”çš„è¿›åŒ–</h2>
<p>æœ€æœ´ç´ çš„æƒ³æ³•å°±æ˜¯ç”¨ä¸€æŠŠé”æŠŠä¸´ç•ŒåŒºé”æ­»ï¼š</p>
<blockquote>
<p>æ“ä½œæ•°æ®å‰åŠ é”ï¼Œæ“ä½œå®Œåé‡Šæ”¾ã€‚</p>
</blockquote>
<p>ä½†è¿™æ ·åšå¤ªç²—æš´äº†â€”â€”å³ä½¿åªæ˜¯è¯»å–æ•°æ®ï¼Œä¹Ÿè¦ç­‰å¾…å†™æ“ä½œå®Œæˆï¼Œæ‰€æœ‰æ“ä½œæœ¬è´¨ä¸Šå˜æˆäº†ä¸²è¡Œã€‚</p>
<p>è¿™æ˜¾ç„¶ä¸å¤Ÿã€‚åæ¥äººä»¬æƒ³åˆ°äº†<strong>å…±äº«é”</strong>å’Œ<strong>æ’ä»–é”</strong>çš„åŒºåˆ†ï¼š</p>
<ul>
<li>è¯»å–æ•°æ®æ—¶åŠ å…±äº«é”ï¼ˆSé”ï¼‰ï¼Œå¤šä¸ªè¯»æ“ä½œå¯ä»¥åŒæ—¶è¿›è¡Œ</li>
<li>ä¿®æ”¹æ•°æ®æ—¶åŠ æ’ä»–é”ï¼ˆXé”ï¼‰ï¼Œè°éƒ½å¾—ç­‰</li>
</ul>
<p>è¿™æ ·å°±å®ç°äº†"<strong>è¯»è¯»å¹¶è¡Œ</strong>"çš„ç›®æ ‡ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/00852a9257774c42b2168d56eb5e4950~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rGf5bCP5YyX:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764770755&amp;x-signature=eWTlS9Z0ANQWz2DRBpT3rK3zPM8%3D" alt="" loading="lazy"/></p>
<p>ä½†é—®é¢˜ä¾ç„¶å­˜åœ¨ï¼š</p>
<blockquote>
<p>ä¸€æ—¦æŸä¸ªå†™æ“ä½œå¼€å§‹æ‰§è¡Œï¼Œæ‰€æœ‰è¯»æ“ä½œå°±å¿…é¡»é˜»å¡ã€‚å¯¹åº”åˆ°æ•°æ®åº“å±‚é¢ï¼Œå°±æ˜¯å†™äº‹åŠ¡æœªæäº¤æ—¶ï¼Œç›¸å…³æ•°æ®çš„selectä¼šè¢«æŒ¡ä½ã€‚</p>
</blockquote>
<p><strong>èƒ½ä¸èƒ½è¿›ä¸€æ­¥çªç ´è¿™ä¸ªç“¶é¢ˆå‘¢ï¼Ÿ</strong></p>
<blockquote>
<p><strong>æœ€è¿‘æ— æ„é—´è·å¾—ä¸€ä»½é˜¿é‡Œå¤§ä½¬å†™çš„åˆ·é¢˜ç¬”è®°ï¼Œä¸€ä¸‹å­æ‰“é€šäº†æˆ‘çš„ä»»ç£äºŒè„‰ï¼Œè¿›å¤§å‚åŸæ¥æ²¡é‚£ä¹ˆéš¾ã€‚
è¿™æ˜¯å¤§ä½¬å†™çš„</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fcxykk.com%2F%23zhuanlan" target="_blank" title="https://cxykk.com/#zhuanlan" ref="nofollow noopener noreferrer">7701é¡µçš„BATå¤§ä½¬å†™çš„åˆ·é¢˜ç¬”è®°ï¼Œè®©æˆ‘offeræ‹¿åˆ°æ‰‹è½¯</a></p>
</blockquote>
<h2 data-id="heading-3">æ•°æ®å¤šç‰ˆæœ¬ï¼šè¯»å†™çœŸæ­£å¹¶è¡Œçš„é’¥åŒ™</h2>
<p>è¿™é‡Œå¼•å‡ºäº†ä¸€ä¸ªä¼˜é›…çš„ideaâ€”â€”<strong>æ•°æ®å¤šç‰ˆæœ¬</strong>ã€‚æ ¸å¿ƒæ€æƒ³å¾ˆç®€å•ï¼š</p>
<p>å†™æ“ä½œä¸è¦ç›´æ¥ä¿®æ”¹åŸæ•°æ®ï¼Œè€Œæ˜¯å¤åˆ¶ä¸€ä»½æ–°ç‰ˆæœ¬æ¥ä¿®æ”¹ã€‚è¿™æ ·ï¼Œå¹¶å‘çš„è¯»æ“ä½œä»ç„¶å¯ä»¥è¯»å–æ—§ç‰ˆæœ¬çš„æ•°æ®ã€‚å†™æ“ä½œä¹Ÿä¸ä¼šè¢«è¯»é˜»å¡ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4c9ee0d919d942688f61958457cf595e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rGf5bCP5YyX:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764770755&amp;x-signature=ZbI89llK01m7QsnB493ic3ZsKKo%3D" alt="æ•°æ®å¤šç‰ˆæœ¬ç¤ºæ„å›¾" loading="lazy"/></p>
<p>æƒ³è±¡è¿™æ ·ä¸€ä¸ªè¿‡ç¨‹ï¼š</p>
<p>T1æ—¶åˆ»ï¼ŒæŸä¸ªå†™æ“ä½œå¼€å§‹ï¼Œå®ƒå…‹éš†äº†ä¸€ä»½æ•°æ®ï¼ˆç‰ˆæœ¬V1ï¼‰ï¼Œå¼€å§‹ä¿®æ”¹ã€‚</p>
<p>T2æ—¶åˆ»ï¼Œä¸€ä¸ªè¯»æ“ä½œåˆ°è¾¾ï¼Œå®ƒè¯»å–çš„ä»æ˜¯åŸç‰ˆæœ¬V0çš„æ•°æ®ã€‚</p>
<p>T3æ—¶åˆ»åˆæ¥äº†ä¸€ä¸ªè¯»ï¼Œç…§æ ·è¯»V0ã€‚ç›´åˆ°å†™æ“ä½œæäº¤ï¼Œæ–°ç‰ˆæœ¬æ‰ä¼šå˜æˆ"å½“å‰ç‰ˆæœ¬"ã€‚</p>
<p>è¿™å°±æ˜¯<strong>è¯»å†™å¹¶è¡Œ</strong>çš„ç§˜è¯€ã€‚</p>
<p>å¹¶å‘èƒ½åŠ›çš„æ¼”è¿›å°±è¿™æ ·å±•å¼€äº†ï¼šæ™®é€šé”åšä¸åˆ°å¹¶è¡Œ â†’ è¯»å†™é”å®ç°è¯»è¯»å¹¶è¡Œ â†’ å¤šç‰ˆæœ¬æŠ€æœ¯å®ç°è¯»å†™å¹¶è¡Œã€‚</p>
<p>è¿™ä¸ªæ€è·¯æ¯”å…·ä½“çš„æŠ€æœ¯ç»†èŠ‚æ›´é‡è¦ã€‚</p>
<h2 data-id="heading-4">å®ç°å¤šç‰ˆæœ¬çš„åŸºç¡€ï¼šredoæ—¥å¿—ä¸undoæ—¥å¿—</h2>
<p>åœ¨InnoDBçœŸæ­£å¦‚ä½•åˆ©ç”¨å¤šç‰ˆæœ¬ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦ç†è§£ä¸¤æ ·ä¸œè¥¿ï¼šredoæ—¥å¿—å’Œundoæ—¥å¿—ã€‚</p>
<h3 data-id="heading-5">redoæ—¥å¿—çš„ä¸¤ä¸ªä½¿å‘½</h3>
<p>äº‹åŠ¡æäº¤åï¼Œæ•°æ®å¿…é¡»ä¿è¯åˆ·åˆ°ç£ç›˜ã€‚ä½†æ¯æ¬¡éƒ½ç›´æ¥å†™ç£ç›˜å¤ªä½æ•ˆäº†â€”â€”ç£ç›˜éšæœºå†™æ˜¯æ€§èƒ½æ€æ‰‹ã€‚</p>
<p>èªæ˜çš„åŠæ³•æ˜¯ï¼šå…ˆæŠŠä¿®æ”¹æ“ä½œå†™åˆ°redoæ—¥å¿—ï¼ˆè¿™æ˜¯é¡ºåºå†™ï¼Œå¿«å¾—å¤šï¼‰ï¼Œç„¶åå®šæœŸå°†æ•°æ®åˆ·åˆ°ç£ç›˜ã€‚è¿™æ ·æ—¢ä¿è¯äº†ACIDç‰¹æ€§ï¼Œåˆå¤§å¹…æé«˜äº†ååé‡ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/777ee4b7583a4269a3b68db71f589fc1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rGf5bCP5YyX:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764770755&amp;x-signature=v2rhgJl6AwzrZ2orH7r7JoFYX4o%3D" alt="" loading="lazy"/></p>
<p>å¦‚æœæ•°æ®åº“ä¸­é€”å´©æºƒï¼Œé‡å¯æ—¶å¯ä»¥é‡æ–°æ‰§è¡Œredoæ—¥å¿—é‡Œçš„æ“ä½œï¼Œç¡®ä¿æ‰€æœ‰å·²æäº¤çš„äº‹åŠ¡éƒ½è¢«æŒä¹…åŒ–ã€‚ç®€è¨€ä¹‹ï¼Œ<strong>redoæ—¥å¿—ä¿æŠ¤å·²æäº¤äº‹åŠ¡</strong>ã€‚</p>
<h3 data-id="heading-6">undoæ—¥å¿—çš„è§’è‰²</h3>
<p>undoæ—¥å¿—åšçš„äº‹ç›¸åã€‚å½“äº‹åŠ¡ä¿®æ”¹æ•°æ®æ—¶ï¼Œä¿®æ”¹å‰çš„æ—§ç‰ˆæœ¬è¢«å­˜å…¥undoæ—¥å¿—ã€‚å¦‚æœäº‹åŠ¡éœ€è¦å›æ»šï¼Œæˆ–æ•°æ®åº“å´©æºƒéœ€è¦æ¢å¤ï¼Œè¿™äº›æ—§ç‰ˆæœ¬æ•°æ®å°±æ´¾ä¸Šç”¨åœºäº†ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5d0c7fd705a644e2989a5da147c4cc0d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rGf5bCP5YyX:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764770755&amp;x-signature=oHnFJtzLni14upIPhWGHh8Q6qf0%3D" alt="" loading="lazy"/></p>
<p>å…·ä½“æ¥è¯´ï¼Œinsertæ“ä½œçš„undoè®°å½•æ–°æ•°æ®çš„ä¸»é”®ï¼Œdeleteå’Œupdateçš„undoè®°å½•å®Œæ•´çš„æ—§æ•°æ®è¡Œã€‚å›æ»šæ—¶ç›´æ¥ç”¨è¿™äº›æ—§ç‰ˆæœ¬æ¢å¤å°±è¡Œã€‚</p>
<p><strong>undoæ—¥å¿—çš„çœŸæ­£å¦™ç”¨</strong>ï¼Œæ˜¯ä¸ºMVCCæä¾›äº†æ—§ç‰ˆæœ¬æ•°æ®çš„æ¥æºã€‚</p>
<h3 data-id="heading-7">å›æ»šæ®µï¼šundoçš„ä»“åº“</h3>
<p>å­˜å‚¨undoæ—¥å¿—çš„åœ°æ–¹å«<strong>å›æ»šæ®µ</strong>ã€‚æˆ‘ä»¬ç”¨ä¸€ä¸ªä¾‹å­æ¥çœ‹å®ƒå¦‚ä½•å·¥ä½œã€‚</p>
<p>å‡è®¾æœ‰ä¸ªè¡¨ <code>t(id PK, name)</code>ï¼Œåˆå§‹æ•°æ®æ˜¯ï¼š</p>
<pre><code class="hljs">1, xiaobei
2, zhangsan
3, lisi
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/27c6a2998fed48849794fe76cc9f458a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rGf5bCP5YyX:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764770755&amp;x-signature=aTUDOcPoa8gCnlioLdiYjuqfPV0%3D" alt="åˆå§‹æ•°æ®" loading="lazy"/></p>
<p>ç°åœ¨å¯åŠ¨ä¸€ä¸ªäº‹åŠ¡æ‰§è¡Œäº†å‡ ä¸ªæ“ä½œä½†è¿˜æœªæäº¤ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">start</span> trx;
<span class="hljs-keyword">delete</span> (<span class="hljs-number">1</span>, xiaobei);
<span class="hljs-keyword">update</span> (<span class="hljs-number">3</span>, lisi) <span class="hljs-keyword">to</span> (<span class="hljs-number">3</span>, xxx);
<span class="hljs-keyword">insert</span> (<span class="hljs-number">4</span>, wangwu);
</code></pre>
<p>æ­¤æ—¶å›æ»šæ®µä¸­ä¼šå‡ºç°è¿™äº›è®°å½•ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/07663477e2a84e6283df03531c1d00d8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rGf5bCP5YyX:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764770755&amp;x-signature=yuO%2F5ETm06TgcO0m1oIugIjZbKU%3D" alt="äº‹åŠ¡æœªæäº¤æ—¶å›æ»šæ®µ" loading="lazy"/></p>
<ul>
<li>deleteä¹‹å‰çš„ <code>(1, shenjian)</code> è¿›å…¥å›æ»šæ®µ</li>
<li>updateä¹‹å‰çš„ <code>(3, lisi)</code> è¿›å…¥å›æ»šæ®µ</li>
<li>insertçš„æ–°PK <code>4</code> ä¹Ÿè¿›å»äº†</li>
</ul>
<p>å¦‚æœäº‹åŠ¡è¦å›æ»šï¼Œè¿™äº›undoæ•°æ®å°±ä¼šè¢«ç”¨ä¸Šï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4b7edc8c2cad47349c4b3a421b35cd5a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rGf5bCP5YyX:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764770755&amp;x-signature=jB10dZ%2FyCAgkwyQDzwxyQ6CLYIY%3D" alt="å›æ»šæˆåŠŸ" loading="lazy"/></p>
<p>è¢«åˆ çš„è¡Œæ¢å¤äº†ï¼Œè¢«æ”¹çš„è¡Œæ¢å¤äº†ï¼Œæ–°æ’å…¥çš„è¡Œè¢«åˆ æ‰äº†ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fd6faed3238b4de58a16715b76fc2ad6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rGf5bCP5YyX:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764770755&amp;x-signature=uZ8DEVhCQpHKRoix25AjZ3QiGuo%3D" alt="å›æ»šæˆåŠŸ" loading="lazy"/></p>
<p>ä¸€åˆ‡å›åˆ°åŸç‚¹ã€‚</p>
<h2 data-id="heading-8">InnoDBçš„MVCCï¼šå¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶çš„çœŸé¢ç›®</h2>
<p>InnoDBä¹‹æ‰€ä»¥èƒ½åœ¨äº’è”ç½‘çš„é«˜å¹¶å‘åœºæ™¯ä¸­è¡¨ç°å‡ºè‰²ï¼Œæ ¹æœ¬åŸå› å°±æ˜¯<strong>MVCCï¼ˆå¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ï¼‰</strong>ã€‚å®ƒé€šè¿‡è®©äº‹åŠ¡è¯»å–æ—§ç‰ˆæœ¬æ•°æ®ï¼Œä»è€Œå¤§å¹…é™ä½é”å†²çªã€‚</p>
<p>InnoDBå†…æ ¸ç»™æ¯ä¸€è¡Œæ•°æ®éƒ½åŠ äº†ä¸‰ä¸ªéšè—å±æ€§ï¼š</p>
<ul>
<li><strong>DB_TRX_ID</strong>ï¼ˆ6å­—èŠ‚ï¼‰ï¼šæœ€åä¿®æ”¹è¿™è¡Œæ•°æ®çš„äº‹åŠ¡ID</li>
<li><strong>DB_ROLL_PTR</strong>ï¼ˆ7å­—èŠ‚ï¼‰ï¼šæŒ‡å‘å›æ»šæ®µä¸­undoæ—¥å¿—çš„æŒ‡é’ˆ</li>
<li><strong>DB_ROW_ID</strong>ï¼ˆ6å­—èŠ‚ï¼‰ï¼šå•è°ƒé€’å¢çš„è¡Œå·</li>
</ul>
<p>è¿™æ ·è®¾è®¡çœ‹ä¼¼ç®€å•ï¼Œå®é™…ä¸Šå¨åŠ›å·¨å¤§ã€‚å›æ»šæ®µé‡Œçš„æ•°æ®æ˜¯å†å²å¿«ç…§ï¼Œæ°¸ä¸ä¿®æ”¹ã€‚å› æ­¤selectè¯­å¥å¯ä»¥æ”¾å¿ƒåœ°å»è¯»å–å®ƒä»¬ï¼Œå®Œå…¨ä¸éœ€è¦åŠ é”ã€‚</p>
<p>è¿™ç§ä¸åŠ é”çš„ä¸€è‡´æ€§è¯»å°±å«<strong>å¿«ç…§è¯»</strong>ã€‚å®ƒæ˜¯InnoDBå¹¶å‘é«˜çš„æ ¸å¿ƒç§˜å¯†ã€‚æ‰€è°“ä¸€è‡´æ€§ï¼Œæ˜¯æŒ‡äº‹åŠ¡è¯»åˆ°çš„æ•°æ®è¦ä¹ˆæ˜¯äº‹åŠ¡å¼€å§‹å‰å°±å­˜åœ¨çš„ï¼ˆæ¥è‡ªå…¶ä»–å·²æäº¤äº‹åŠ¡ï¼‰ï¼Œè¦ä¹ˆæ˜¯äº‹åŠ¡è‡ªå·±æ’å…¥æˆ–ä¿®æ”¹çš„ã€‚</p>
<h3 data-id="heading-9">ä»€ä¹ˆæ˜¯å¿«ç…§è¯»ï¼Ÿ</h3>
<p>é™¤éä½ æ˜¾å¼åŠ é”ï¼Œå¦åˆ™æ™®é€šçš„selectéƒ½æ˜¯å¿«ç…§è¯»ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> t <span class="hljs-keyword">where</span> id <span class="hljs-operator">&gt;</span> <span class="hljs-number">2</span>;
</code></pre>
<p>æ˜¾å¼åŠ é”çš„è¯»å°±ä¸åŒäº†ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> t <span class="hljs-keyword">where</span> id <span class="hljs-operator">&gt;</span> <span class="hljs-number">2</span> lock <span class="hljs-keyword">in</span> share mode;
<span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> t <span class="hljs-keyword">where</span> id <span class="hljs-operator">&gt;</span> <span class="hljs-number">2</span> <span class="hljs-keyword">for</span> <span class="hljs-keyword">update</span>;
</code></pre>
<p>è¿™ä¸¤ç§ä¼šåŠ ä¸Šå…±äº«é”æˆ–æ’ä»–é”ï¼Œæˆä¸ºå½“å‰è¯»ï¼ˆcurrent readï¼‰ã€‚å®ƒä»¬ä¼šå’Œäº‹åŠ¡çš„éš”ç¦»çº§åˆ«äº§ç”Ÿå¤æ‚çš„äº¤äº’ã€‚å…·ä½“æ€ä¹ˆå·¥ä½œçš„ï¼Œæˆ‘ä»¬åé¢å†å±•å¼€ã€‚</p>
<h2 data-id="heading-10">è¦ç‚¹å›é¡¾</h2>
<ul>
<li>å¹¶å‘æ§åˆ¶çš„ä¸¤ä¸ªæ€è·¯æ˜¯é”å’Œå¤šç‰ˆæœ¬ã€‚ä¸‰ä¸ªé˜¶æ®µåˆ†åˆ«æ˜¯ï¼šæ™®é€šé”ï¼ˆä¸²è¡Œï¼‰â†’ è¯»å†™é”ï¼ˆè¯»è¯»å¹¶è¡Œï¼‰â†’ å¤šç‰ˆæœ¬ï¼ˆè¯»å†™å¹¶è¡Œï¼‰</li>
<li>redoæ—¥å¿—é€šè¿‡é¡ºåºå†™ä¼˜åŒ–äº†æŒä¹…åŒ–æ€§èƒ½ï¼Œä¿æŠ¤å·²æäº¤äº‹åŠ¡</li>
<li>undoæ—¥å¿—ä¸ºå›æ»šæä¾›äº†åŸºç¡€ï¼ŒåŒæ—¶ä¹Ÿæ˜¯MVCCçš„æ•°æ®æº</li>
<li>InnoDBä¾é å­˜å‚¨åœ¨å›æ»šæ®µä¸­çš„æ—§ç‰ˆæœ¬æ•°æ®ï¼Œå®ç°äº†å¿«ç…§è¯»è¿™ç§ä¸åŠ é”çš„ä¸€è‡´æ€§è¯»</li>
<li>æ™®é€šselectå°±æ˜¯å¿«ç…§è¯»ï¼Œè¿™æ˜¯InnoDBé«˜å¹¶å‘çš„æ ¸å¿ƒåŸå› </li>
</ul>
<p><strong>æ¶æ„å¸ˆå°åŒ—</strong> è‡´åŠ›äºä»å¾®è§‚åŸç†ã€ä¸­è§‚å®è·µã€å®è§‚æ–¹æ³•è®ºä¸‰ä¸ªç»´åº¦è®²é€æŠ€æœ¯ã€‚å¸Œæœ›ä½ æœ‰æ‰€æ”¶è·ã€‚æ¬¢è¿å…³æ³¨ï¼Œæˆ‘ä»¬ä¸€èµ·æˆé•¿</p>
<h3 data-id="heading-11">MySQLå†…æ ¸ç›¸å…³æ–‡ç« :</h3>
<p>ã€Š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FstN7PBXpMq4bJqoQJuE7SQ" target="_blank" title="https://mp.weixin.qq.com/s/stN7PBXpMq4bJqoQJuE7SQ" ref="nofollow noopener noreferrer">ç¨‹åºå‘˜å¿…çŸ¥ï¼šMySQLä¸ºä»€ä¹ˆæ–­ç”µåæ•°æ®è¿˜èƒ½æ¢å¤ï¼Ÿ</a>ã€‹</p>
<p>ã€Š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2Fi2qb4G3tsz6nMiTCB8Owhg" target="_blank" title="https://mp.weixin.qq.com/s/i2qb4G3tsz6nMiTCB8Owhg" ref="nofollow noopener noreferrer">ä¸ºä»€ä¹ˆä½ çš„SQLæŸ¥è¯¢è¿˜åœ¨å‚»å‚»åœ°countï¼Ÿ</a>ã€‹</p>
<p>ã€Š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2F0TIjCilMc8GEpRbQC0gzkQ" target="_blank" title="https://mp.weixin.qq.com/s/0TIjCilMc8GEpRbQC0gzkQ" ref="nofollow noopener noreferrer">é¢è¯•å®˜é—®ï¼šMySQL èƒ½ç”¨ Docker éƒ¨ç½²å—ï¼Ÿç­”é”™ç›´æ¥æŒ‚ï¼</a>ã€‹</p>
<p>ã€Š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FNcuwZY3TXaDcuB_3M-xuDw" target="_blank" title="https://mp.weixin.qq.com/s/NcuwZY3TXaDcuB_3M-xuDw" ref="nofollow noopener noreferrer">é˜¿é‡Œé¢è¯•ï¼šä¸ºå•¥MySQLä¸å»ºè®®ç”¨DELETEåˆ æ•°æ®ï¼Ÿ</a>ã€‹</p>
<p>ã€Š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2Fgk-cMsr2_x6s7Zp0RYkvWg" target="_blank" title="https://mp.weixin.qq.com/s/gk-cMsr2_x6s7Zp0RYkvWg" ref="nofollow noopener noreferrer">ä¸ºä»€ä¹ˆæ•°æ®åº“èƒ½è¾¹è·‘è¾¹å¤‡ä»½?MySQLå¤‡ä»½è¿™ä¸ªå‘,90%çš„ç¨‹åºå‘˜éƒ½æ‰è¿‡</a>ã€‹</p>
<h3 data-id="heading-12">æœ€åè¯´ä¸€å¥(æ±‚å…³æ³¨ï¼Œæ±‚èµï¼Œåˆ«ç™½å«–æˆ‘)</h3>
<blockquote>
<p><strong>æœ€è¿‘æ— æ„é—´è·å¾—ä¸€ä»½é˜¿é‡Œå¤§ä½¬å†™çš„åˆ·é¢˜ç¬”è®°ï¼Œä¸€ä¸‹å­æ‰“é€šäº†æˆ‘çš„ä»»ç£äºŒè„‰ï¼Œè¿›å¤§å‚åŸæ¥æ²¡é‚£ä¹ˆéš¾ã€‚
è¿™æ˜¯å¤§ä½¬å†™çš„</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fcxykk.com%2F%23zhuanlan" target="_blank" title="https://cxykk.com/#zhuanlan" ref="nofollow noopener noreferrer">7701é¡µçš„BATå¤§ä½¬å†™çš„åˆ·é¢˜ç¬”è®°ï¼Œè®©æˆ‘offeræ‹¿åˆ°æ‰‹è½¯</a></p>
</blockquote>
<p>æœ¬æ–‡ï¼Œå·²æ”¶å½•äºï¼Œæˆ‘çš„æŠ€æœ¯ç½‘ç«™ <a href="https://link.juejin.cn?target=https%3A%2F%2Fcxykk.com%2F%23java-concurrent" target="_blank" title="https://cxykk.com/#java-concurrent" ref="nofollow noopener noreferrer">cxykk.comï¼šç¨‹åºå‘˜ç¼–ç¨‹èµ„æ–™ç«™</a>ï¼Œæœ‰å¤§å‚å®Œæ•´é¢ç»ï¼Œå·¥ä½œæŠ€æœ¯ï¼Œæ¶æ„å¸ˆæˆé•¿ä¹‹è·¯ï¼Œç­‰ç»éªŒåˆ†äº«</p>
<h3 data-id="heading-13">æ±‚ä¸€é”®ä¸‰è¿ï¼šç‚¹èµã€åˆ†äº«ã€æ”¶è—</h3>
<p>ç‚¹èµå¯¹æˆ‘çœŸçš„éå¸¸é‡è¦ï¼åœ¨çº¿æ±‚èµï¼ŒåŠ ä¸ªå…³æ³¨æˆ‘ä¼šéå¸¸æ„Ÿæ¿€ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[SpringGateway-MVCå¯¹SSEè½¬å‘å‡ºç°é˜»å¡å“åº”é—®é¢˜çš„åˆ†æå’Œè§£å†³]]></title>    <link>https://juejin.cn/post/7576859345935532086</link>    <guid>https://juejin.cn/post/7576859345935532086</guid>    <pubDate>2025-11-26T15:00:50.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576859345935532086" data-draft-id="7576867727718449187" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="SpringGateway-MVCå¯¹SSEè½¬å‘å‡ºç°é˜»å¡å“åº”é—®é¢˜çš„åˆ†æå’Œè§£å†³"/> <meta itemprop="keywords" content="Spring Cloud,Spring,Kotlin"/> <meta itemprop="datePublished" content="2025-11-26T15:00:50.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="KotlinKUGè´µå·"/> <meta itemprop="url" content="https://juejin.cn/user/2946346893987704"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            SpringGateway-MVCå¯¹SSEè½¬å‘å‡ºç°é˜»å¡å“åº”é—®é¢˜çš„åˆ†æå’Œè§£å†³
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2946346893987704/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    KotlinKUGè´µå·
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T15:00:50.000Z" title="Wed Nov 26 2025 15:00:50 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    11
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;color:rgba(46,36,36,.87);overflow-x:hidden}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{margin-bottom:5px;font-size:30px;font-weight:500}.markdown-body h1:before{content:"#";margin-right:10px;color:#1976d2}.markdown-body h2{font-size:28px;font-weight:400;border-left:5px solid #454545;margin-top:20px;padding-left:10px;transition:all .3s ease-in-out}.markdown-body h2:hover{border-color:#1976d2}.markdown-body h3{font-size:24px;font-weight:400;margin-top:15px;padding-bottom:0}.markdown-body h4{font-size:20px;font-weight:500}.markdown-body h5{font-size:16px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body h2:first-letter,.markdown-body h3:first-letter,.markdown-body p:first-letter{text-transform:capitalize}.markdown-body em{text-emphasis:dot;text-emphasis-position:under}.markdown-body img{display:block;margin:0 auto!important;max-width:100%;border-radius:2px;box-shadow:0 2px 4px -1px rgba(0,0,0,.2),0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12)!important}.markdown-body hr{position:relative;width:98%;height:1px;border:none;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,#ddd,#999,#ddd);overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background:#fff;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center}.markdown-body code{font-weight:900;word-break:break-word;border-radius:2px;overflow-x:auto;font-size:.87em;padding:.065em .4em;background-color:#fbe5e1;color:#c0341d}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border-radius:0 4px}.markdown-body pre&gt;code{font-weight:400;font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{margin:0 4px;text-decoration:none;color:#027fff;transition:all .3s ease-in-out;padding-bottom:4px;border-bottom:2px solid transparent}.markdown-body a:after{content:"";display:inline-block;width:18px;height:18px;margin-left:4px;vertical-align:middle;background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMiIgaGVpZ2h0PSIyMiI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIiBzdHJva2U9IiMwMjdGRkYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCI+PHBhdGggZD0iTTkuODE1IDYuNDQ4bDEuOTM2LTEuOTM2YzEuMzM3LTEuMzM2IDMuNTgtMS4yNTkgNS4wMTMuMTczIDEuNDMyIDEuNDMyIDEuNTEgMy42NzYuMTczIDUuMDEzbC0xLjQ1MiAxLjQ1Mi0uOTY4Ljk2OGMtMS4zMzcgMS4zMzYtMy41ODEgMS4yNTktNS4wMTMtLjE3MyIvPjxwYXRoIGQ9Ik0xMS4yNjcgMTUuMzY3bC0xLjkzNiAxLjkzNmMtMS4zMzYgMS4zMzctMy41OCAxLjI2LTUuMDEyLS4xNzMtMS40MzItMS40MzItMS41MS0zLjY3Ni0uMTczLTUuMDEybDEuNDUyLTEuNDUyLjk2OC0uOTY4YzEuMzM2LTEuMzM3IDMuNTgtMS4yNiA1LjAxMi4xNzMiLz48L2c+PC9zdmc+);background-size:cover;background-repeat:no-repeat}.markdown-body a:hover{border-color:#027fff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body a.footnote-backref:after,.markdown-body a.footnote-ref:after,.markdown-body sup a:after{display:none!important}.markdown-body table{margin:0 auto 10px;font-size:12px;width:auto;max-width:100%;overflow:auto;border:2px solid #c6c6c6}.markdown-body table img{box-shadow:none!important}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body del{color:rgba(0,0,0,.6)}.markdown-body blockquote{position:relative;color:#666;padding:5px 23px 1px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:hsla(0,0%,78.4%,.12);transition:all .2s ease-in-out}.markdown-body blockquote:hover{border-color:#1976d2}.markdown-body blockquote:after,.markdown-body blockquote:before{position:absolute;font-size:24px;font-weight:800;line-height:24px;color:#cbcbcb;opacity:.6}.markdown-body blockquote:before{content:"â€œ";top:4px;left:6px}.markdown-body blockquote:after{content:"â€";right:8px;bottom:-8px}.markdown-body blockquote&gt;p,.markdown-body blockquote blockquote{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body details{outline:none;border:none;border-left:4px solid #1976d2;padding-left:10px;margin-left:4px}.markdown-body details summary{cursor:pointer;border:none;outline:none;background:#fff;margin:0 -17px}.markdown-body details summary:hover::-webkit-details-marker{color:#1976d2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="a11y-dark">.hljs-comment,.hljs-quote{color:#d4d0ab}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#ffa07a}.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#f5ab35}.hljs-attribute{color:gold}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:#abe338}.hljs-section,.hljs-title{color:#00e0e0}.hljs-keyword,.hljs-selector-tag{color:#dcc6e0}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#2b2b2b;color:#f8f8f2}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}@media screen and (-ms-high-contrast:active){.hljs-addition,.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-comment,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-quote,.hljs-string,.hljs-symbol,.hljs-type{color:highlight}.hljs-keyword,.hljs-selector-tag{font-weight:700}}</style><h2 data-id="heading-0">å‰è¨€:</h2>
<p>æœ€è¿‘åœ¨ç»™å…¬å¸æ­å»ºä¸€äº›å¤ç”¨çš„åŸºç¡€æœåŠ¡ï¼Œç»™ä¸»ä¸šåŠ¡é›†æˆç½‘å…³æ¥è¿›è¡Œè¯·æ±‚è½¬å‘æ—¶é‡åˆ°äº†<code>SSE</code>å‡ºç°äº†å“åº”æµå¾—ç­‰å¾…<code>sseEmitter.complete()</code>åæ‰ä¼šä¸€æ¬¡æ€§å…¨éƒ¨å“åº”ï¼Œå¯¼è‡´<code>SSE</code>è¯·æ±‚åœ¨ç½‘ç»œé“¾è·¯ä¸­å˜æˆä¸€ä¸ªå“åº”é˜»å¡è¯·æ±‚ã€‚</p>
<h2 data-id="heading-1">ä¾èµ–ç‰ˆæœ¬</h2>
<p><code>SpringCloud:2025.0.0</code> å¯¹åº”çš„<code>SpringCloudGatewayServerWebMVC:4.3.0</code></p>
<h2 data-id="heading-2">ä»£ç é…ç½®</h2>
<blockquote>
<p>ä¸Šæ¸¸ç®€å•çš„ç½‘å…³</p>
</blockquote>
<pre><code class="hljs language-yml" lang="yml"><span class="hljs-attr">spring:</span>
  <span class="hljs-attr">cloud:</span>
    <span class="hljs-attr">gateway:</span>
      <span class="hljs-attr">server:</span>
        <span class="hljs-attr">webmvc:</span>
          <span class="hljs-attr">routes:</span>
            <span class="hljs-bullet">-</span> <span class="hljs-attr">id:</span> <span class="hljs-string">bs-notify</span>
              <span class="hljs-attr">uri:</span> <span class="hljs-string">http://127.0.0.1:8082</span>
              <span class="hljs-attr">predicates:</span>
                <span class="hljs-bullet">-</span> <span class="hljs-string">Path=/api/bs/notify/**</span>
              <span class="hljs-attr">filters:</span>
                <span class="hljs-bullet">-</span> <span class="hljs-string">StripPrefix=3</span>
</code></pre>
<blockquote>
<p>ä¸‹æ¸¸æœåŠ¡API</p>
</blockquote>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">//ä¸€ä¸ªé—´éš”å‘é€çš„sseè¯·æ±‚</span>
<span class="hljs-meta">@GetMapping(<span class="hljs-string">"subscribe"</span>)</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">subscribe</span><span class="hljs-params">()</span></span>: SseEmitter = UTF8SseEmitter(<span class="hljs-number">0</span>).also {sseEmitter -&gt;
    CoroutineScope(Dispatchers.IO).launch {
        <span class="hljs-keyword">var</span> count = <span class="hljs-number">0</span>
        <span class="hljs-keyword">while</span> (isActive) {
            sseEmitter.send(<span class="hljs-string">"ä½ å¥½<span class="hljs-subst">${count++}</span>"</span>)
            <span class="hljs-keyword">if</span> (count == <span class="hljs-number">4</span>) {
                sseEmitter.complete()
                <span class="hljs-keyword">return</span><span class="hljs-symbol">@launch</span>
            }
            delay(<span class="hljs-number">1.</span>seconds)
        }
    }
}

<span class="hljs-comment">//å¸¦ä¸Šå­—ç¬¦é›†å£°æ˜é¿å…ä¸€äº›å®¢æˆ·ç«¯æ²¡æœ‰è‡ªåŠ¨å¤„ç†ï¼Œä¸­æ–‡ä¹±ç </span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">UTF8SseEmitter</span>(timeout: <span class="hljs-built_in">Long</span>) : SseEmitter(timeout) {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">extendResponse</span><span class="hljs-params">(outputMessage: <span class="hljs-type">ServerHttpResponse</span>)</span></span> {
        <span class="hljs-keyword">super</span>.extendResponse(outputMessage)
        outputMessage.headers.contentType = MediaType(MediaType.TEXT_EVENT_STREAM, StandardCharsets.UTF_8)
    }
}
</code></pre>
<h2 data-id="heading-3">åŸå› åˆ†æå’Œè¯Šæ–­</h2>
<h3 data-id="heading-4">çŒœæµ‹åŸå› </h3>
<p>å‡ºç°é—®é¢˜åè®¤ä¸ºå¯èƒ½Gatewayä¸æ˜¯Webfluxçš„ç‰ˆæœ¬æ‰€ä»¥åœ¨è½¬å‘æ—¶ä¼šè¿›è¡Œé˜»å¡ç­‰å¾…ä¸‹æ¸¸å®Œå…¨å“åº”åæ‰å“åº”ï¼Œä½†æ˜¯è€ƒè™‘åˆ°<code>2025.0.0</code>çš„ç‰ˆæœ¬ä¸­çš„Gateway-MVCå¹¶æ²¡æœ‰å¾ˆè€æ‰€ä»¥åº”è¯¥ä¼šé€‚é…è¿™ç§ä¸æ˜¯å¾ˆç½•è§çš„äº‹ä»¶æµçš„åœºæ™¯æ‰å¯¹ï¼Œç„¶åä¸ŠGatewayçš„Issuesä¸­æœç´ å‘ç°äº†<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fspring-cloud%2Fspring-cloud-gateway%2Fissues%2F3410" target="_blank" title="https://github.com/spring-cloud/spring-cloud-gateway/issues/3410" ref="nofollow noopener noreferrer">Server Side event Responses from a server behind Spring-cloud-gateway-server-mvc Â· Issue #3410 Â· spring-cloud/spring-cloud-gateway</a>è¿™ä¸ª24å¹´7æœˆçš„Issueå¹¶ä¸”å·²ç»è§£å†³äº†ã€‚</p>
<p>åœ¨æ­¤Issueä¸­å¾—çŸ¥MVCç‰ˆæœ¬æœ¬èº«ç¡®å®ä¼šé˜»å¡ç­‰å¾…å“åº”ä½“ç¼“å†²åŒºå†™å…¥å®Œæˆæ‰å“åº”ï¼Œæ‰€ä»¥ä¼šå‡ºç°ä¸å…¼å®¹æƒ…å†µï¼Œæ¯”å¦‚ä¸Šè¿°çš„SSEé˜»å¡é—®é¢˜ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/76773924eab349aea3878c2c7070212f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgS290bGluS1VH6LS15bee:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764774603&amp;x-signature=cZIyGP0umF%2F5ejurtmkFfd%2B8r2o%3D" alt="QQ_1764163888926.png" loading="lazy"/></p>
<h3 data-id="heading-5">è¯å®çŒœæµ‹</h3>
<p>åœ¨æœ€ä¸‹æ–¹èƒ½æ‰¾åˆ°<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fspring-cloud%2Fspring-cloud-gateway%2Fcommit%2F6a1b21f58bbaff0ae8d9d31d69062c7228536e92" target="_blank" title="https://github.com/spring-cloud/spring-cloud-gateway/commit/6a1b21f58bbaff0ae8d9d31d69062c7228536e92" ref="nofollow noopener noreferrer">Adds flushing after each buffer write in RestClientProxyExchange in câ€¦ Â· spring-cloud/spring-cloud-gateway@6a1b21f</a>çš„æäº¤ï¼Œå¹¶ä¸”åœ¨4.16æ ‡è®°å·²ç»å®Œæˆ</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7d60a2a4bb7645898fc3cbb34ce63a94~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgS290bGluS1VH6LS15bee:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764774603&amp;x-signature=AYIbKtnpEWkxS1sORO2HDF67wKU%3D" alt="QQ_1764164872780.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d303ca374b47437587db47b08c410e1c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgS290bGluS1VH6LS15bee:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764774603&amp;x-signature=XLsRHAzZEjf2wIDlmBWtrxTb3HE%3D" alt="QQ_1764164930479.png" loading="lazy"/>
æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¹‹å‰çš„mvcç‰ˆæœ¬å®é™…ä¸Šæ˜¯é€šè¿‡<code>StreamUtils.copy(inputStream, httpServletResponse.getOutputStream())</code>é˜»å¡çš„ç­‰å¾…ä¸‹æ¸¸å“åº”å®Œæˆåæ‰ç½‘ä¸Šæ¸¸è¿›è¡Œè½¬å‘å›å®¢æˆ·ç«¯ï¼Œä¿®å¤æ˜¯åˆ›å»ºäº†ä¸€ä¸ª<code>HttpUtils</code>ç±»å°è£…äº†å“åº”æ“ä½œ å¯¹å“åº”è¿›è¡Œäº†ç®€å•çš„è¯†åˆ«åˆ†æµï¼Œå¦‚æœä¸‹æ¸¸å“åº”ä¸­æ˜¯SSEçš„Content-Typeåˆ™è¿›è¡Œåˆ·æ–°å¼çš„å®æ—¶å†™å…¥</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-title function_">copyResponseBodyWithFlushing</span><span class="hljs-params">(InputStream inputStream, OutputStream outputStream)</span> <span class="hljs-keyword">throws</span> IOException {
		<span class="hljs-type">int</span> readBytes;
		<span class="hljs-type">var</span> <span class="hljs-variable">totalReadBytes</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
		<span class="hljs-type">var</span> <span class="hljs-variable">buffer</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">byte</span>[BUFFER_SIZE];

		<span class="hljs-keyword">while</span> ((readBytes = inputStream.read(buffer)) != -<span class="hljs-number">1</span>) {
			outputStream.write(buffer, <span class="hljs-number">0</span>, readBytes);
			outputStream.flush();
			<span class="hljs-keyword">if</span> (totalReadBytes &lt; Integer.MAX_VALUE) {
				<span class="hljs-keyword">try</span> {
					totalReadBytes = Math.addExact(totalReadBytes, readBytes);
				}
				<span class="hljs-keyword">catch</span> (ArithmeticException e) {
					totalReadBytes = Integer.MAX_VALUE;
				}
			}
		}
                
		outputStream.flush();
                
		<span class="hljs-keyword">return</span> totalReadBytes;
	}
</code></pre>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fspring-cloud%2Fspring-cloud-gateway%2Fpull%2F3486" target="_blank" title="https://github.com/spring-cloud/spring-cloud-gateway/pull/3486" ref="nofollow noopener noreferrer">pull/3486</a>åœ¨è¿™ä¸ªIssueså…³è”çš„pullå†å²ä¸­æˆ‘ä»¬æ‰¾åˆ°äº†æœ€ç»ˆçš„ç‰ˆæœ¬ï¼Œ
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fspring-cloud%2Fspring-cloud-gateway%2Fcommit%2F5b73fdb5fe46555b1918c5173050bcc47c016c6a" target="_blank" title="https://github.com/spring-cloud/spring-cloud-gateway/commit/5b73fdb5fe46555b1918c5173050bcc47c016c6a" ref="nofollow noopener noreferrer">5b73fdb</a>ä¸­é‡æ„æŠ½è±¡äº†å‡ºäº†ä¸€ä¸ª<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fspring-cloud%2Fspring-cloud-gateway%2Fblob%2F4.1.x%2Fspring-cloud-gateway-server-mvc%2Fsrc%2Fmain%2Fjava%2Forg%2Fspringframework%2Fcloud%2Fgateway%2Fserver%2Fmvc%2Fcommon%2FAbstractProxyExchange.java" target="_blank" title="https://github.com/spring-cloud/spring-cloud-gateway/blob/4.1.x/spring-cloud-gateway-server-mvc/src/main/java/org/springframework/cloud/gateway/server/mvc/common/AbstractProxyExchange.java" ref="nofollow noopener noreferrer">AbstractProxyExchange.java</a>ç»Ÿä¸€ä»£ç†æ“ä½œçš„ç±»ï¼Œå¹¶ä¸”åˆ›å»ºäº†<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fspring-cloud%2Fspring-cloud-gateway%2Fblob%2F4.1.x%2Fspring-cloud-gateway-server-mvc%2Fsrc%2Fmain%2Fjava%2Forg%2Fspringframework%2Fcloud%2Fgateway%2Fserver%2Fmvc%2Fconfig%2FGatewayMvcProperties.java" target="_blank" title="https://github.com/spring-cloud/spring-cloud-gateway/blob/4.1.x/spring-cloud-gateway-server-mvc/src/main/java/org/springframework/cloud/gateway/server/mvc/config/GatewayMvcProperties.java" ref="nofollow noopener noreferrer">GatewayMvcProperties.java</a>é…ç½®ï¼Œç»Ÿä¸€äº†æµå“åº”ç±»å‹çš„ç®¡ç†ï¼Œå¹¶ä¸æ˜¯ä¹‹å‰å†™æ­»çš„<code>equals</code></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">protected</span> <span class="hljs-type">int</span> <span class="hljs-title function_">copyResponseBody</span><span class="hljs-params">(ClientHttpResponse clientResponse, InputStream inputStream, OutputStream outputStream)</span> <span class="hljs-keyword">throws</span> IOException {
    Assert.notNull(clientResponse, <span class="hljs-string">"No ClientResponse specified"</span>);
    Assert.notNull(inputStream, <span class="hljs-string">"No InputStream specified"</span>);
    Assert.notNull(outputStream, <span class="hljs-string">"No OutputStream specified"</span>);

    <span class="hljs-type">int</span> transferredBytes;

    <span class="hljs-keyword">if</span> (properties.getStreamingMediaTypes().contains(clientResponse.getHeaders().getContentType())) {
       transferredBytes = copyResponseBodyWithFlushing(inputStream, outputStream);
    }
    <span class="hljs-keyword">else</span> {
       transferredBytes = StreamUtils.copy(inputStream, outputStream);
    }

    <span class="hljs-keyword">return</span> transferredBytes;
}
</code></pre>
<h3 data-id="heading-6">è¯Šæ–­é—®é¢˜æ‰€åœ¨</h3>
<p>è‡³æ­¤ï¼Œæµå¼å“åº”çš„é€‚é…å°±å·²ç»ç»“æŸäº†ã€‚ä½†æ˜¯ä¸ºä»€ä¹ˆæˆ‘å“åº”çš„æ—¶å€™ä¹Ÿæœ‰SSEçš„Content-Typeæ— æ³•è¢«è¯†åˆ«å‘¢ï¼Ÿé€šè¿‡Debugå‘ç°<code>streamingMediaTypes</code>ä¸­çš„æµå“åº”ç±»å‹å®šä¹‰æ˜¯é»˜è®¤çš„<code>MediaType.TEXT_EVENT_STREAM</code>,æˆ‘çš„Content-Typeå¤šäº†ä¸ªUTF8çš„ç¼–ç å£°æ˜ï¼Œæ‰€ä»¥è¿˜æ˜¯èµ°çš„<code>StreamUtils.copy(inputStream, outputStream)</code>ï¼Œå¯èƒ½å½“æ—¶é€‚é…çš„æ—¶å€™æ²¡è€ƒè™‘Content-typeä¸­è¿˜æœ‰åˆ«å‚æ•°çš„æƒ…å†µï¼Œå°±æ¯”å¦‚åé¢è¿˜æœ‰ä¸ªå­—ç¬¦é›†çš„ç¼–ç å£°æ˜ã€‚ğŸ¤ª</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8c1fe8c68c404c4e8a7279812978eda6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgS290bGluS1VH6LS15bee:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764774603&amp;x-signature=oGjBP5Hg5ifCm7It19QPzic2KgY%3D" alt="QQ_1764166402641.png" loading="lazy"/>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9e5acec4e5974249899aea8499d7a78f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgS290bGluS1VH6LS15bee:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764774603&amp;x-signature=MsnLTgnuMUUSBWr7FEaTb2x09ME%3D" alt="b8f58a22cad3d0f291a045cfbb38da0f.png" loading="lazy"/></p>
<h2 data-id="heading-7">è§£å†³åŠæ³•</h2>
<h3 data-id="heading-8">å¦¥å <strong>(ä¸æ¨è)</strong></h3>
<p>å’Œ<code>MediaType.TEXT_EVENT_STREAM</code>å®šä¹‰å¯¹åº”ï¼Œä¸å¸¦ä¸Šå­—ç¬¦é›†ç¼–ç å‚æ•°å»é€‚é…ç±»å‹</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@GetMapping(<span class="hljs-string">"subscribe"</span>)</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">subscribe</span><span class="hljs-params">()</span></span>: SseEmitter = SseEmitter(<span class="hljs-number">0</span>).also {sseEmitter -&gt;
    CoroutineScope(Dispatchers.IO).launch {
        <span class="hljs-keyword">var</span> count = <span class="hljs-number">0</span>
        <span class="hljs-keyword">while</span> (isActive) {
            sseEmitter.send(<span class="hljs-string">"ä½ å¥½<span class="hljs-subst">${count++}</span>"</span>)
            delay(<span class="hljs-number">1.</span>seconds)
            <span class="hljs-keyword">if</span> (count == <span class="hljs-number">4</span>) {
                sseEmitter.complete()
                <span class="hljs-keyword">return</span><span class="hljs-symbol">@launch</span>
            }
        }
    }
}
</code></pre>
<p>ç¼ºç‚¹æ˜¯æ¯”å¦‚ç›´æ¥æµè§ˆå™¨è®¿é—®apiçš„æ—¶å€™æ²¡æœ‰æ‰‹åŠ¨å‘ŠçŸ¥ç¼–ç ä¼šå¯¼è‡´é¢„è§ˆçš„æ—¶å€™ä¸­æ–‡ä¹±ç 
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3ba1002179e44000818070be3cbfb03b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgS290bGluS1VH6LS15bee:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764774603&amp;x-signature=j2nxEklYNYsYmjJAkRzUBiAmsZM%3D" alt="image.png" loading="lazy"/>
å¼€å‘ä¸­å‰ç«¯<code>EventSource</code>ä¼šè‡ªåŠ¨è¿›è¡Œç¼–ç è®¾ç½®å»é€‚é…ä¸­æ–‡ä¸ä¼šå—å½±å“ï¼Œç§»åŠ¨ç«¯å¯ä»¥æ‹¿åˆ°æ•°æ®åæ‰‹åŠ¨æŒ‡å®šç¼–ç ï¼Œä¸è¿‡è¿™éƒ½ä¸æ˜¯å¥½çš„ç»“æœï¼Œåªæ˜¯å¯¹äºåšWebå¼€å‘æ¥è¯´å¯ä»¥è‡ªé€‚åº”æ‰€ä»¥å¼€å‘ä¸­æ˜¯å¦æœ‰ç¼–ç å£°æ˜å¯èƒ½æ„ŸçŸ¥ä¸å¼ºï¼Œå¹¶ä¸”å°†å­—ç¬¦ç¼–ç çš„è´£ä»»äº¤ç»™å®¢æˆ·ç«¯å»çŒœæµ‹éƒ½æ˜¯ä¸å¯é çš„</p>
<h3 data-id="heading-9">åŠæ³•2ï¼šè¦†ç›– <strong>(æ¨è)</strong></h3>
<p>æˆ‘ä»¬ä¸Šé¢æåˆ°äº†åˆ¤æ–­æ˜¯å¦æ˜¯æµå“åº”å®é™…ä¸Šæ˜¯é€šè¿‡è·å–<code>streamingMediaTypes</code>åˆ¤æ–­çš„ï¼Œä»–ä½äºé…ç½®ç±»ä¸­ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥è¿›è¡Œè¦†ç›–ï¼Œåœ¨ä¸Šæ¸¸ç½‘å…³ä¸­è‡ªå®šä¹‰å“åº”æµç±»å‹æ¥é€‚åº”ä¸‹æ¸¸</p>
<blockquote>
<p>ä¸Šæ¸¸è‡ªå®šä¹‰å“åº”æµç±»å‹</p>
</blockquote>
<pre><code class="hljs language-yml" lang="yml"><span class="hljs-attr">gateway:</span>
  <span class="hljs-attr">server:</span>
    <span class="hljs-attr">webmvc:</span>
      <span class="hljs-attr">routes:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">id:</span> <span class="hljs-string">bs-notify</span>
          <span class="hljs-attr">uri:</span> <span class="hljs-string">http://127.0.0.1:8082</span>
          <span class="hljs-attr">predicates:</span>
            <span class="hljs-bullet">-</span> <span class="hljs-string">Path=/api/bs/notify/**</span>
          <span class="hljs-attr">filters:</span>
            <span class="hljs-bullet">-</span> <span class="hljs-string">StripPrefix=3</span>
      <span class="hljs-attr">streaming-media-types:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">text/event-stream;charset=UTF-8</span>
</code></pre>
<blockquote>
<p>ä¸‹æ¸¸ä¿æŒUTF8çš„SseEmitterä¸å˜</p>
</blockquote>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@GetMapping(<span class="hljs-string">"subscribe"</span>)</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">subscribe</span><span class="hljs-params">()</span></span>: SseEmitter = UTF8SseEmitter(<span class="hljs-number">0</span>).also {sseEmitter -&gt;
    CoroutineScope(Dispatchers.IO).launch {
        <span class="hljs-keyword">var</span> count = <span class="hljs-number">0</span>
        <span class="hljs-keyword">while</span> (isActive) {
            sseEmitter.send(<span class="hljs-string">"ä½ å¥½<span class="hljs-subst">${count++}</span>"</span>)
            delay(<span class="hljs-number">1.</span>seconds)
            <span class="hljs-keyword">if</span> (count == <span class="hljs-number">4</span>) {
                sseEmitter.complete()
                <span class="hljs-keyword">return</span><span class="hljs-symbol">@launch</span>
            }
        }
    }
}
</code></pre>
<p>è§£å†³äº†çš„ä¸æ”¹å˜ä¸‹æ¸¸ä»£ç æ—¶æä¾›äº†çµæ´»çš„å®šä¹‰çš„å¹¶ä¸”å®¢æˆ·ç«¯å¯ä»¥æ˜¾å¼çš„è·å–åˆ°å­—ç¬¦é›†ç¼–ç 
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/74f71d5afa9f4e0d98fcf2c8db85c4c6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgS290bGluS1VH6LS15bee:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764774603&amp;x-signature=a1Lnup9dkCb%2FmMAla%2BwcMt2Wb2g%3D" alt="QQ_1764167811245.png" loading="lazy"/></p>
<h2 data-id="heading-10">è¡ç”Ÿ</h2>
<p>åœ¨ç¾¤é‡Œå’Œç¾¤å‹åˆ†äº«è¿™ä¸ªé—®é¢˜åæœ‰ç¾¤å‹æ‰¾åˆ°äº†å¦ä¸€ä¸ªæœ‰è¶£çš„Issue <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fspring-cloud%2Fspring-cloud-gateway%2Fissues%2F3948" target="_blank" title="https://github.com/spring-cloud/spring-cloud-gateway/issues/3948" ref="nofollow noopener noreferrer">github.com/spring-clouâ€¦</a> ï¼Œç›®å‰ç›¸å¯¹å¥½çš„åŠæ³•å°±æ˜¯é€šè¿‡è¦†ç›–è‡ªå®šä¹‰çš„æ–¹å¼æ¥è¿›è¡Œé€‚é…ï¼Œè¿™ä¸ªIssueä¸­æåˆ°äº†å…³äº<code>MediaType</code>æœ¬èº«ä¼šæœ‰ä¸€äº›åˆ«çš„å‚æ•°ï¼Œæ¯”å¦‚å­—ç¬¦é›†å£°æ˜ï¼Œåšäº†ä¸€ä¸ªæ›´çµæ´»çš„å“åº”ç±»å‹é€‚é…<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fspring-cloud%2Fspring-cloud-gateway%2Fpull%2F3969" target="_blank" title="https://github.com/spring-cloud/spring-cloud-gateway/pull/3969" ref="nofollow noopener noreferrer">fix: improve media type comparison for streaming responses #3948 by jerolba Â· Pull Request #3969 Â· spring-cloud/spring-cloud-gateway</a></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isStreamingMediaType</span><span class="hljs-params">(List&lt;MediaType&gt; streamingMediaTypes, MediaType mediaType)</span> {
		<span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> streamingMediaType : streamingMediaTypes) {
			<span class="hljs-keyword">if</span> (streamingMediaType.equalsTypeAndSubtype(mediaType)) {
				<span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
			}
		}
		<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
	}
</code></pre>
<p>æŠŠåŸæœ¬Listçš„<code>Contains</code>æ¯”è¾ƒè¿™ç§è¾ƒä¸ºç²—æš´çš„æ–¹å¼æ”¹ä¸ºä½¿ç”¨<code>equalsTypeAndSubtype</code>è¿›è¡Œåª’ä½“ç±»å‹åŒ¹é…ï¼Œå¿½ç•¥åé¢çš„å‚æ•°ï¼Œå¯¹äºè¿™ç§å­—ç¬¦é›†å£°æ˜çš„å†…å®¹æ¥è¯´ä¼šå¾ˆæ–¹ä¾¿ï¼Œå› ä¸ºæœ¬èº«çš„<code>streamingMediaTypes</code>ä¸­é»˜è®¤å®šä¹‰å°±åŒ…å«äº†å¤§éƒ¨åˆ†çš„å“åº”ç±»å‹ï¼Œä¸ç”¨å»å› ä¸ºå¤šå‚æ•°å°±è¦ç›´æ¥æ•´ä¸ªè¦†ç›–çš„å»é€‚é…ï¼Œ</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Groovy + Spring AIï¼šç”¨åŠ¨æ€è¯­æ³•è§£é” AI å¼€å‘ â€œä¸æ»‘ä½“éªŒâ€]]></title>    <link>https://juejin.cn/post/7576856418470821898</link>    <guid>https://juejin.cn/post/7576856418470821898</guid>    <pubDate>2025-11-26T14:50:10.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576856418470821898" data-draft-id="7576863819982028809" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Groovy + Spring AIï¼šç”¨åŠ¨æ€è¯­æ³•è§£é” AI å¼€å‘ â€œä¸æ»‘ä½“éªŒâ€"/> <meta itemprop="keywords" content="Groovy"/> <meta itemprop="datePublished" content="2025-11-26T14:50:10.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ˜Ÿç«1024"/> <meta itemprop="url" content="https://juejin.cn/user/3353967687906576"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Groovy + Spring AIï¼šç”¨åŠ¨æ€è¯­æ³•è§£é” AI å¼€å‘ â€œä¸æ»‘ä½“éªŒâ€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3353967687906576/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ˜Ÿç«1024
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T14:50:10.000Z" title="Wed Nov 26 2025 14:50:10 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    6
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>Spring AI ä½œä¸º Java ç”Ÿæ€çš„ AI å¼€å‘åˆ©å™¨ï¼Œæå¤§é™ä½äº† AI æ¨¡å‹é›†æˆé—¨æ§›ï¼Œä½†åœ¨å®é™…è½åœ°ä¸­ï¼Œé™æ€ç±»å‹çº¦æŸã€è¯­æ³•ç¹çç­‰é—®é¢˜ä»å›°æ‰°ç€å¼€å‘è€…ï¼šJDK 21+ æ‰æ”¯æŒçš„æ–‡å­—æ¨¡æ¿ã€AI è¿”å›ä¸ç¡®å®šæ€§å¯¼è‡´çš„ç±»å‹é€‚é…éš¾é¢˜ã€é‡å¤æ¨¡æ¿æ„å»ºå†—ä½™ç­‰ç—›ç‚¹ï¼Œè®©â€œé«˜æ•ˆé›†æˆ AIâ€å¤§æ‰“æŠ˜æ‰£ã€‚è€Œ Groovy å‡­å€ŸåŠ¨æ€ç±»å‹ã€çµæ´»è¯­æ³•ã€æ— ç¼å…¼å®¹ Java çš„ç‰¹æ€§ï¼Œæ°å¥½èƒ½ç²¾å‡†ç ´è§£è¿™äº›ç—›ç‚¹ï¼Œè®© Spring AI å¼€å‘æ›´ç®€æ´ã€æ›´çµæ´»ã€æ›´é€‚é… AI åœºæ™¯çš„ä¸ç¡®å®šæ€§ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€å‰ç½®å‡†å¤‡</h2>
<p>åŸºäº Spring AI 1.1.0ï¼ˆæœ€æ–°ç¨³å®šç‰ˆæœ¬ï¼‰ï¼ŒGroovy 4.x å¯æ— ç¼å…¼å®¹ï¼Œç¯å¢ƒæ­å»ºä»…éœ€ 3 æ­¥ï¼Œæ¯” Java å¼€å‘å°‘å»ç±»å‹é…ç½®å†—ä½™ã€‚</p>
<h3 data-id="heading-1">1. ä¾èµ–é…ç½®ï¼ˆMaven ç¤ºä¾‹ï¼ŒGradle åŒç†ï¼‰</h3>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"UTF-8"</span>?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">project</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://maven.apache.org/POM/4.0.0"</span>
         <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>
         <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">modelVersion</span>&gt;</span>4.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">modelVersion</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- Spring Boot çˆ¶ä¾èµ–ï¼Œç»Ÿä¸€ç®¡ç† Spring Boot ç‰ˆæœ¬ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">parent</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.5.8<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">relativePath</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">parent</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.example<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>groovy-spring-ai-demo<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- ç»Ÿä¸€ç®¡ç† Spring AI ç‰ˆæœ¬ï¼ˆç­‰æ•ˆ Gradle çš„ dependencyManagementï¼‰ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependencyManagement</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.ai<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-ai-bom<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.1.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">type</span>&gt;</span>pom<span class="hljs-tag">&lt;/<span class="hljs-name">type</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>import<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependencyManagement</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- Groovy æ ¸å¿ƒä¾èµ–ï¼ˆç­‰æ•ˆ Gradle çš„ implementationï¼‰ --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.codehaus.groovy<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>groovy-all<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>4.0.29<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">type</span>&gt;</span>pom<span class="hljs-tag">&lt;/<span class="hljs-name">type</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- Spring Boot åŸºç¡€ä¾èµ– --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- Spring AI OpenAI ç»„ä»¶ --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.ai<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-ai-openai<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- æµ‹è¯•ä¾èµ–ï¼ˆç­‰æ•ˆ Gradle çš„ testImplementationï¼‰ --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>test<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">build</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">plugins</span>&gt;</span>
            <span class="hljs-comment">&lt;!-- Groovy ç¼–è¯‘æ’ä»¶ï¼ˆGradle ä¸­ groovy æ’ä»¶çš„ç­‰æ•ˆå®ç°ï¼‰ --&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.codehaus.gmavenplus<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>gmavenplus-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.13.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">executions</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">execution</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">goals</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">goal</span>&gt;</span>compile<span class="hljs-tag">&lt;/<span class="hljs-name">goal</span>&gt;</span> <span class="hljs-comment">&lt;!-- ç¼–è¯‘ Groovy æºç  --&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">goal</span>&gt;</span>testCompile<span class="hljs-tag">&lt;/<span class="hljs-name">goal</span>&gt;</span> <span class="hljs-comment">&lt;!-- ç¼–è¯‘ Groovy æµ‹è¯•æºç  --&gt;</span>
                        <span class="hljs-tag">&lt;/<span class="hljs-name">goals</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">execution</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">executions</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span>
            <span class="hljs-comment">&lt;!-- Spring Boot æ‰“åŒ…æ’ä»¶ï¼ˆç”Ÿæˆå¯æ‰§è¡Œ JARï¼‰ --&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">mainClass</span>&gt;</span>com.example.GroovySpringAiApplication<span class="hljs-tag">&lt;/<span class="hljs-name">mainClass</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">plugins</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">build</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- é…ç½® Java ç‰ˆæœ¬ï¼ˆç­‰æ•ˆ Gradle çš„ java é…ç½®å—ï¼‰ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">maven.compiler.source</span>&gt;</span>17<span class="hljs-tag">&lt;/<span class="hljs-name">maven.compiler.source</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">maven.compiler.target</span>&gt;</span>17<span class="hljs-tag">&lt;/<span class="hljs-name">maven.compiler.target</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="hljs-tag">&lt;/<span class="hljs-name">project.build.sourceEncoding</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">project</span>&gt;</span>
</code></pre>
<h3 data-id="heading-2">2. API Key é…ç½®ï¼ˆapplication.groovyï¼‰</h3>
<p>Groovy é…ç½®æ–‡ä»¶æ”¯æŒåŠ¨æ€é€»è¾‘ï¼Œæ— éœ€ç¡¬ç¼–ç ï¼Œæ¯” YAML æ›´çµæ´»ï¼š</p>
<pre><code class="hljs language-groovy" lang="groovy">// è¯»å–ç¯å¢ƒå˜é‡ï¼Œé¿å…å¯†é’¥æ³„éœ²
spring.ai.openai.api-key = System.getenv("SPRING_AI_OPENAI_API_KEY")
spring.ai.openai.chat {
    model = "gpt-3.5-turbo"
    temperature = 0.6
    max-tokens = 2048
}
</code></pre>
<h3 data-id="heading-3">3. å¯åŠ¨ç±»ï¼ˆæç®€å†™æ³•ï¼‰</h3>
<pre><code class="hljs language-groovy" lang="groovy">import org.springframework.boot.SpringApplication
import org.springframework.boot.autoconfigure.SpringBootApplication

@SpringBootApplication
class GroovySpringAiApplication {
    static void main(String[] args) {
        SpringApplication.run(GroovySpringAiApplication, args)
    }
}
</code></pre>
<h2 data-id="heading-4">äºŒã€æ ¸å¿ƒç—›ç‚¹ç ´è§£</h2>
<h3 data-id="heading-5">ç—›ç‚¹ 1ï¼šPrompt æ¨¡æ¿é€‚é…å—é™â€”â€”Java éœ€ JDK 21+ æ”¯æŒï¼ŒGroovy å¤©ç”Ÿå…¼å®¹</h3>
<p>Java ä¸­æ„å»ºåŠ¨æ€ Prompt æ¨¡æ¿ï¼Œéœ€ä¾èµ– JDK 21 çš„æ–‡æœ¬å—æ’å€¼ï¼ˆ<code>STR."..."</code>ï¼‰ï¼Œä½ç‰ˆæœ¬ JDK åªèƒ½ç”¨ <code>String.format()</code> æˆ–å­—ç¬¦ä¸²æ‹¼æ¥ï¼Œä»£ç å†—ä½™ä¸”æ˜“å‡ºé”™ï¼›è€Œ Groovy åŸç”Ÿæ”¯æŒå­—ç¬¦ä¸²æ¨¡æ¿ï¼Œæ— éœ€ä¾èµ–é«˜ç‰ˆæœ¬ JDKï¼Œä¸”è¯­æ³•æ›´ç®€æ´ã€‚</p>
<h4 data-id="heading-6">Groovy è§£å†³æ–¹æ¡ˆï¼šåŠ¨æ€å­—ç¬¦ä¸²æ¨¡æ¿ + é—­åŒ…æ„å»º Prompt</h4>
<pre><code class="hljs language-groovy" lang="groovy">import org.springframework.ai.chat.ChatClient
import org.springframework.beans.factory.annotation.Autowired
import org.springframework.stereotype.Service

@Service
class PromptService {

    @Autowired
    ChatClient chatClient

    // åœºæ™¯ï¼šæ„å»ºå¸¦åŠ¨æ€å‚æ•°çš„ RAG æ£€ç´¢ Prompt
    def ragPrompt(String userQuery, List&lt;String&gt; contextDocs) {
        // 1. Groovy å­—ç¬¦ä¸²æ¨¡æ¿ï¼šç›´æ¥åµŒå…¥å˜é‡å’Œè¡¨è¾¾å¼ï¼Œæ— éœ€æ‹¼æ¥
        def systemPrompt = """
            ä½ æ˜¯çŸ¥è¯†åº“åŠ©æ‰‹ï¼ŒåŸºäºä»¥ä¸‹ä¸Šä¸‹æ–‡å›ç­”ç”¨æˆ·é—®é¢˜ï¼š
            ${contextDocs.join("\n\n")}
            è§„åˆ™ï¼šä»…ç”¨ä¸Šä¸‹æ–‡ä¿¡æ¯å›ç­”ï¼Œä¸ç¼–é€ å†…å®¹ï¼›å›ç­”ç®€æ´æ˜äº†ã€‚
        """

        // 2. é—­åŒ…å¿«é€Ÿæ„å»ºç»“æ„åŒ– Promptï¼ˆæ¯” Java é“¾å¼è°ƒç”¨æ›´ç›´è§‚ï¼‰
        def response = chatClient.prompt {
            system(systemPrompt)
            user(userQuery)
        }.call()

        return response.content
    }
}
</code></pre>
<p><strong>ä¼˜åŠ¿å¯¹æ¯”</strong>ï¼š</p>

























<table><thead><tr><th>ç‰¹æ€§</th><th>Javaï¼ˆJDK &lt; 21ï¼‰</th><th>Groovy</th></tr></thead><tbody><tr><td>æ¨¡æ¿è¯­æ³•</td><td>éœ€ç”¨ <code>String.format()</code>ï¼Œå ä½ç¬¦æ˜“æ··ä¹±</td><td>ç›´æ¥ <code>$å˜é‡</code> æˆ– <code>${è¡¨è¾¾å¼}</code>ï¼Œç›´è§‚ç®€æ´</td></tr><tr><td>å¤šè¡Œ Prompt</td><td>éœ€æ‰‹åŠ¨æ‹¼æ¥ <code>+</code> æˆ–æ–‡æœ¬å—ï¼Œæ ¼å¼æ˜“ä¹±</td><td>ä¸‰å¼•å· <code>"""</code> åŸç”Ÿæ”¯æŒï¼Œä¿ç•™æ¢è¡Œå’Œæ ¼å¼</td></tr><tr><td>ä½ç‰ˆæœ¬ JDK å…¼å®¹æ€§</td><td>ä¸æ”¯æŒæ–‡æœ¬æ’å€¼ï¼Œæ¨¡æ¿æ„å»ºç¹ç</td><td>å…¨ç‰ˆæœ¬å…¼å®¹ï¼Œæ— éœ€å‡çº§ JDK</td></tr></tbody></table>
<h3 data-id="heading-7">ç—›ç‚¹ 2ï¼šAI è¿”å›ä¸ç¡®å®šæ€§â€”â€”é™æ€ç±»å‹é€‚é…éš¾ï¼Œåˆ¤å®šé€»è¾‘å†—ä½™</h3>
<p>AI æ¨¡å‹è¿”å›ç»“æœå­˜åœ¨ä¸¤å¤§ä¸ç¡®å®šæ€§ï¼šä¸€æ˜¯æ ¼å¼ä¸ç¡®å®šï¼ˆå¦‚æœ‰æ—¶è¿”å› JSONã€æœ‰æ—¶è¿”å›çº¯æ–‡æœ¬ï¼‰ï¼ŒäºŒæ˜¯å†…å®¹ä¸ç¡®å®šï¼ˆå¦‚å¯é€‰å­—æ®µå¯èƒ½ç¼ºå¤±ï¼‰ã€‚Java é™æ€ç±»å‹éœ€æå‰å®šä¹‰å®ä½“ç±»ï¼Œä¸€æ—¦è¿”å›æ ¼å¼ä¸ç¬¦å°±ä¼šæŠ›å‡ºè§£æå¼‚å¸¸ï¼›ä¸”åˆ¤å®šè¿”å›ç±»å‹éœ€å†™å¤§é‡ <code>instanceof</code> æˆ–å­—ç¬¦ä¸²åŒ¹é…é€»è¾‘ï¼Œä»£ç è‡ƒè‚¿ã€‚</p>
<h4 data-id="heading-8">Groovy è§£å†³æ–¹æ¡ˆï¼šåŠ¨æ€ç±»å‹ + ç®€æ´åˆ¤å®šé€»è¾‘</h4>
<pre><code class="hljs language-groovy" lang="groovy">import org.springframework.ai.chat.ChatResponse
import groovy.json.JsonSlurper

@Service
class AiResponseService {

    private final JsonSlurper jsonSlurper = new JsonSlurper()

    // å¤„ç† AI åŠ¨æ€è¿”å›ï¼ˆæ”¯æŒ JSON/çº¯æ–‡æœ¬ä¸¤ç§æ ¼å¼ï¼‰
    def processDynamicResponse(ChatResponse response) {
        def content = response.content.trim()

        // 1. åŠ¨æ€åˆ¤å®šè¿”å›æ ¼å¼ï¼ˆGroovy ç®€æ´è¯­æ³•æ›¿ä»£ Java å†—é•¿é€»è¾‘ï¼‰
        if (content.startsWith("{") &amp;&amp; content.endsWith("}")) {
            // 2. åŠ¨æ€è§£æ JSONï¼Œæ— éœ€å®ä½“ç±»ï¼ˆé€‚é…å­—æ®µç¼ºå¤±åœºæ™¯ï¼‰
            def json = jsonSlurper.parseText(content)
            return [
                type: "json",
                data: json,
                message: json.message ?: "é»˜è®¤æç¤º" // ç©ºå€¼é»˜è®¤ç¬¦ï¼Œé¿å… NPE
            ]
        } else {
            // 3. çº¯æ–‡æœ¬å¤„ç†ï¼ŒåŠ¨æ€æå–å…³é”®ä¿¡æ¯
            return [
                type: "text",
                data: content,
                keywords: content.findAll(~/(Groovy|Spring AI|å‘é‡å­˜å‚¨)/) // æ­£åˆ™å¿«é€Ÿæå–
            ]
        }
    }
}
</code></pre>
<p><strong>æ ¸å¿ƒä¼˜åŠ¿</strong>ï¼š</p>
<ul>
<li>åŠ¨æ€ç±»å‹é€‚é…ï¼šæ— éœ€å®šä¹‰ <code>AiResponse</code> å®ä½“ç±»ï¼Œç”¨ Map ç›´æ¥æ¥æ”¶åŠ¨æ€ç»“æœï¼Œå­—æ®µç¼ºå¤±ä¸ä¼šæŠ¥é”™ï¼›</li>
<li>ç©ºå€¼å®‰å…¨å¤„ç†ï¼š<code>json.message ?: "é»˜è®¤æç¤º"</code> æ›¿ä»£ Java <code>if (json.getMessage() != null) </code>åˆ¤å®šï¼›</li>
<li>åˆ¤å®šé€»è¾‘ç®€åŒ–ï¼šæ­£åˆ™åŒ¹é…ã€å­—ç¬¦ä¸²åˆ¤æ–­ç”¨ä¸€è¡Œä»£ç å®Œæˆï¼Œæ¯” Java å°‘ 50% å†—ä½™ã€‚</li>
</ul>
<h3 data-id="heading-9">ç—›ç‚¹ 3ï¼šé‡å¤æ¨¡æ¿ä¸å‚æ•°é…ç½®â€”â€”Java éœ€å¤šç±»å°è£…ï¼ŒGroovy DSL ä¸€é”®è§£å†³</h3>
<p>Spring AI å¼€å‘ä¸­ï¼Œä¸åŒåœºæ™¯ï¼ˆå¦‚ RAGã€ç¿»è¯‘ã€æ‘˜è¦ï¼‰éœ€é‡å¤æ„å»ºç›¸ä¼¼ Prompt æ¨¡æ¿ï¼Œä¸”æ¨¡å‹å‚æ•°ï¼ˆå¦‚ <code>temperature</code>ã€<code>maxTokens</code>ï¼‰éœ€çµæ´»è°ƒæ•´ã€‚Java éœ€åˆ›å»ºå¤šä¸ªæ¨¡æ¿ç±»æˆ– Builder ç±»ï¼Œè€Œ Groovy å¯é€šè¿‡ DSL ï¼ˆé¢†åŸŸç‰¹å®šè¯­è¨€ï¼‰å°è£…é€šç”¨é€»è¾‘ï¼Œå®ç°â€œä¸€é”®å¤ç”¨+åŠ¨æ€é…ç½®â€ã€‚</p>
<h4 data-id="heading-10">Groovy è§£å†³æ–¹æ¡ˆï¼šDSL å°è£…é€šç”¨ Prompt æ¨¡æ¿</h4>
<pre><code class="hljs language-groovy" lang="groovy">@Service
class AiTemplateService {

    @Autowired
    ChatClient chatClient

    // å®šä¹‰ DSLï¼šå°è£…é€šç”¨ Prompt æ¨¡æ¿ï¼Œæ”¯æŒåŠ¨æ€å‚æ•°é…ç½®
    def aiCall(String templateType, Map params = [:]) {
        // é€šç”¨å‚æ•°é»˜è®¤å€¼ï¼ˆGroovy å¯é€‰å‚æ•°ï¼Œæ— éœ€é‡è½½ï¼‰
        def temp = params.temperature ?: 0.6
        def maxTokens = params.maxTokens ?: 1024

        // æ¨¡æ¿è·¯ç”±ï¼ˆGroovy switch æ”¯æŒåŒºé—´ã€å­—ç¬¦ä¸²åŒ¹é…ï¼Œæ¯” Java å¼ºå¤§ï¼‰
        def (systemPrompt, userPrompt) = switch (templateType) {
            case "summary":
                def text = params.text
                ["ä½ æ˜¯æ–‡æœ¬æ‘˜è¦åŠ©æ‰‹ï¼Œæ€»ç»“éœ€æ§åˆ¶åœ¨ 30 å­—å†…", "æ€»ç»“ï¼š$text"]
                break
            case "translate":
                def text = params.text
                def targetLang = params.targetLang ?: "ä¸­æ–‡"
                ["ä½ æ˜¯ç¿»è¯‘åŠ©æ‰‹ï¼Œç²¾å‡†ç¿»è¯‘ä¸º $targetLangï¼Œæ— é¢å¤–è§£é‡Š", "ç¿»è¯‘ï¼š$text"]
                break
            case "rag":
                def context = params.context
                def query = params.query
                ["åŸºäºä¸Šä¸‹æ–‡å›ç­”ï¼š$context", query]
                break
        }

        // åŠ¨æ€è°ƒæ•´æ¨¡å‹å‚æ•°
        def response = chatClient.prompt {
            system(systemPrompt)
            user(userPrompt)
            options {
                temperature(temp)
                maxTokens(maxTokens)
            }
        }.call()

        return response.content
    }
}
</code></pre>
<p><strong>ä½¿ç”¨ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-comment">// 1. è°ƒç”¨æ‘˜è¦æ¨¡æ¿</span>
<span class="hljs-selector-tag">def</span> <span class="hljs-selector-tag">summary</span> = <span class="hljs-selector-tag">aiTemplateService</span><span class="hljs-selector-class">.aiCall</span>(<span class="hljs-string">"summary"</span>, [<span class="hljs-attribute">text</span>: <span class="hljs-string">"Groovy æ˜¯ Java åŠ¨æ€å¢å¼ºç‰ˆï¼Œæ”¯æŒç®€æ´è¯­æ³•å’Œå‡½æ•°å¼ç¼–ç¨‹"</span>])
<span class="hljs-comment">// 2. è°ƒç”¨ç¿»è¯‘æ¨¡æ¿ï¼ˆæŒ‡å®šç›®æ ‡è¯­è¨€å’Œæ¸©åº¦ï¼‰</span>
<span class="hljs-selector-tag">def</span> <span class="hljs-selector-tag">translate</span> = <span class="hljs-selector-tag">aiTemplateService</span><span class="hljs-selector-class">.aiCall</span>(<span class="hljs-string">"translate"</span>, [<span class="hljs-attribute">text</span>: <span class="hljs-string">"Spring AI is powerful"</span>, <span class="hljs-attribute">targetLang</span>: <span class="hljs-string">"è‹±æ–‡"</span>, <span class="hljs-attribute">temperature</span>: <span class="hljs-number">0.3</span>])
</code></pre>
<p><strong>ä¼˜åŠ¿</strong>ï¼šç”¨ DSL å°è£…é‡å¤é€»è¾‘ï¼Œæ–°å¢æ¨¡æ¿åªéœ€æ·»åŠ  <code>case</code> åˆ†æ”¯ï¼Œæ— éœ€åˆ›å»ºæ–°ç±»ï¼›å‚æ•°æ”¯æŒé»˜è®¤å€¼ï¼Œè°ƒç”¨æ›´çµæ´»ï¼Œæ¯” Java å‡å°‘ 60% æ¨¡æ¿ä»£ç ã€‚</p>
<h3 data-id="heading-11">ç—›ç‚¹ 4ï¼šå‘é‡å­˜å‚¨æ–‡æ¡£å¤„ç†ç¹çâ€”â€”Java å¾ªç¯å†—ä½™ï¼ŒGroovy é›†åˆä¸€é”®æå®š</h3>
<p>Spring AI å‘é‡å­˜å‚¨ï¼ˆå¦‚ Pineconeã€Chromaï¼‰éœ€å°†åŸå§‹æ–‡æœ¬è½¬ä¸º <code>Document</code> å¯¹è±¡ï¼ŒJava éœ€é€šè¿‡ <code>for</code> å¾ªç¯éå†ã€æ‰‹åŠ¨è®¾ç½®å±æ€§ï¼Œä»£ç å†—ä½™ï¼›ä¸”ç›¸ä¼¼æ€§æŸ¥è¯¢ç»“æœå¤„ç†éœ€å¤šæ­¥ Stream æ“ä½œï¼Œå¯è¯»æ€§å·®ã€‚</p>
<h4 data-id="heading-12">Groovy è§£å†³æ–¹æ¡ˆï¼šé›†åˆé—­åŒ… + åŠ¨æ€å±æ€§èµ‹å€¼</h4>
<pre><code class="hljs language-groovy" lang="groovy">import org.springframework.ai.document.Document
import org.springframework.ai.pinecone.PineconeVectorStore
import org.springframework.beans.factory.annotation.Autowired

@Service
class VectorStoreService {

    @Autowired
    PineconeVectorStore vectorStore

    // æ‰¹é‡æ·»åŠ æ–‡æ¡£åˆ°å‘é‡åº“ï¼ˆä¸€è¡Œå®Œæˆè½¬æ¢ï¼‰
    def batchAddDocs(List&lt;String&gt; texts, Map&lt;String, String&gt; commonMeta = [:]) {
        // Groovy é›†åˆ collect é—­åŒ…ï¼šæ›¿ä»£ Java for å¾ªç¯ï¼Œå¿«é€Ÿè½¬ä¸º Document
        def docs = texts.collect { text -&gt;
            new Document(
                id: UUID.randomUUID().toString(),
                content: text,
                metadata: commonMeta + [createTime: new Date().format("yyyy-MM-dd HH:mm:ss")] // å…ƒæ•°æ®åˆå¹¶
            )
        }
        vectorStore.add(docs)
        return docs.size()
    }

    // ç›¸ä¼¼æ€§æŸ¥è¯¢ + ç»“æœè¿‡æ»¤
    def searchSimilar(String query, int topK = 3) {
        // æŸ¥è¯¢ç»“æœå¤„ç†ï¼šè¿‡æ»¤ç›¸ä¼¼åº¦ä½äº 0.7 çš„æ–‡æ¡£
        def results = vectorStore.similaritySearch(query, topK)
            .findAll { it.metadata.similarityScore &gt;= 0.7 } // é—­åŒ…è¿‡æ»¤ï¼Œæ¯” Java Stream ç®€æ´
            .collect { doc -&gt;
                [
                    id: doc.id,
                    content: doc.content.take(100), // æˆªå–å‰ 100 å­—
                    score: doc.metadata.similarityScore
                ]
            }
        return results
    }
}
</code></pre>
<h2 data-id="heading-13">ä¸‰ã€å®æˆ˜è½åœ°ï¼šRAG æ£€ç´¢å¢å¼ºæµç¨‹ç¤ºä¾‹</h2>
<p>ç»“åˆä»¥ä¸Šç—›ç‚¹è§£å†³æ–¹æ¡ˆï¼Œå®ç°ä¸€ä¸ªâ€œæ–‡æ¡£å…¥åº“â†’ç›¸ä¼¼æ£€ç´¢â†’AI å›ç­”â€çš„å®Œæ•´ RAG æµç¨‹ï¼Œä½“ç° Groovy + Spring AI çš„ä¸æ»‘å¼€å‘ä½“éªŒï¼š</p>
<pre><code class="hljs language-groovy" lang="groovy">import org.springframework.boot.CommandLineRunner
import org.springframework.beans.factory.annotation.Autowired
import org.springframework.boot.SpringApplication
import org.springframework.boot.autoconfigure.SpringBootApplication

@SpringBootApplication
class GroovySpringAiRagApplication implements CommandLineRunner {

    @Autowired
    VectorStoreService vectorStoreService

    @Autowired
    AiTemplateService aiTemplateService

    static void main(String[] args) {
        SpringApplication.run(GroovySpringAiRagApplication, args)
    }

    @Override
    void run(String... args) throws Exception {
        // 1. å‡†å¤‡çŸ¥è¯†åº“æ–‡æ¡£
        def knowledgeDocs = [
            "Groovy æ”¯æŒåŠ¨æ€ç±»å‹ï¼Œç”¨ def å…³é”®å­—å£°æ˜å˜é‡ï¼Œæ— éœ€æŒ‡å®šå…·ä½“ç±»å‹",
            "Spring AI 1.0.0-M7 æ”¯æŒ OpenAIã€Pinecone ç­‰ç»„ä»¶ï¼Œéœ€å¼•å…¥ spring-ai-bom ç»Ÿä¸€ç‰ˆæœ¬",
            "Groovy å­—ç¬¦ä¸²æ¨¡æ¿æ”¯æŒ $å˜é‡ å’Œ ${è¡¨è¾¾å¼}ï¼Œæ— éœ€æ‹¼æ¥å­—ç¬¦ä¸²"
        ]

        // 2. æ‰¹é‡æ·»åŠ æ–‡æ¡£åˆ°å‘é‡åº“
        def docCount = vectorStoreService.batchAddDocs(knowledgeDocs, [source: "groovy-spring-ai-docs"])
        println("æˆåŠŸå…¥åº“ $docCount æ¡çŸ¥è¯†åº“æ–‡æ¡£")

        // 3. ç”¨æˆ·æŸ¥è¯¢
        def userQuery = "Groovy å¦‚ä½•ç®€åŒ– Spring AI çš„ Prompt æ„å»ºï¼Ÿ"

        // 4. ç›¸ä¼¼æ£€ç´¢ï¼ˆè·å–ç›¸å…³ä¸Šä¸‹æ–‡ï¼‰
        def similarDocs = vectorStoreService.searchSimilar(userQuery)
        def context = similarDocs.collect { it.content }.join("\n\n")
        println("æ£€ç´¢åˆ°ç›¸å…³æ–‡æ¡£ï¼š\n$context")

        // 5. è°ƒç”¨ AI ç”Ÿæˆå›ç­”ï¼ˆä½¿ç”¨ RAG æ¨¡æ¿ï¼‰
        def aiAnswer = aiTemplateService.aiCall("rag", [context: context, query: userQuery])
        println("\nAI å›ç­”ï¼š\n$aiAnswer")
    }
}
</code></pre>
<p><strong>è¿è¡Œç»“æœ</strong>ï¼š</p>
<pre><code class="hljs language-ruby" lang="ruby">æˆåŠŸå…¥åº“ <span class="hljs-number">3</span> æ¡çŸ¥è¯†åº“æ–‡æ¡£
æ£€ç´¢åˆ°ç›¸å…³æ–‡æ¡£ï¼š
<span class="hljs-title class_">Groovy</span> å­—ç¬¦ä¸²æ¨¡æ¿æ”¯æŒ <span class="hljs-variable">$å˜</span>é‡ å’Œ <span class="hljs-variable">${</span>è¡¨è¾¾å¼}ï¼Œæ— éœ€æ‹¼æ¥å­—ç¬¦ä¸²

<span class="hljs-variable constant_">AI</span> å›ç­”ï¼š
<span class="hljs-title class_">Groovy</span> å¯é€šè¿‡å­—ç¬¦ä¸²æ¨¡æ¿ç›´æ¥åµŒå…¥ <span class="hljs-variable">$å˜</span>é‡ æˆ– <span class="hljs-variable">${</span>è¡¨è¾¾å¼} æ„å»º <span class="hljs-title class_">Prompt</span>ï¼Œæ— éœ€æ‹¼æ¥ï¼›è¿˜èƒ½å€ŸåŠ©é—­åŒ…å¿«é€Ÿæ„å»ºç»“æ„åŒ– <span class="hljs-title class_">Prompt</span>ï¼ˆå« system å’Œ user æŒ‡ä»¤ï¼‰ï¼Œæ¯” <span class="hljs-title class_">Java</span> æ›´ç®€æ´ï¼Œä¸”æ— éœ€ä¾èµ–é«˜ç‰ˆæœ¬ <span class="hljs-variable constant_">JDK</span>ã€‚
</code></pre>
<h2 data-id="heading-14">å››ã€å°ç»“</h2>
<p>å¯¹äº Java å¼€å‘è€…è€Œè¨€ï¼ŒGroovy å­¦ä¹ æˆæœ¬æä½ï¼Œä¸”å®Œå…¨å…¼å®¹ Spring AI ç”Ÿæ€ï¼Œæ— éœ€é‡æ„ç°æœ‰ä»£ç å³å¯æ— ç¼é›†æˆã€‚æ— è®ºæ˜¯å¿«é€ŸéªŒè¯ AI æ¨¡å‹èƒ½åŠ›ã€æ­å»º RAG æ£€ç´¢ç³»ç»Ÿï¼Œè¿˜æ˜¯å¼€å‘å¤æ‚å¤šæ¨¡å‹åº”ç”¨ï¼ŒGroovy + Spring AI éƒ½èƒ½è®© AI å¼€å‘ä»â€œç¹çé€‚é…â€å˜ä¸ºâ€œä¸æ»‘è½åœ°â€ï¼Œæ˜¯ Java ç”Ÿæ€ä¸‹ AI å·¥ç¨‹åŒ–çš„é«˜æ•ˆç»„åˆã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[MyBatis-Plus æºç é˜…è¯»ï¼ˆä¸‰ï¼‰æ¡ä»¶æ„é€ å™¨åŸç†æ·±åº¦å‰–æ]]></title>    <link>https://juejin.cn/post/7576859594359963648</link>    <guid>https://juejin.cn/post/7576859594359963648</guid>    <pubDate>2025-11-26T15:00:04.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576859594359963648" data-draft-id="7576856418469740554" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="MyBatis-Plus æºç é˜…è¯»ï¼ˆä¸‰ï¼‰æ¡ä»¶æ„é€ å™¨åŸç†æ·±åº¦å‰–æ"/> <meta itemprop="keywords" content="Java,æºç é˜…è¯»"/> <meta itemprop="datePublished" content="2025-11-26T15:00:04.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="SheepHappy"/> <meta itemprop="url" content="https://juejin.cn/user/1647486891997692"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            MyBatis-Plus æºç é˜…è¯»ï¼ˆä¸‰ï¼‰æ¡ä»¶æ„é€ å™¨åŸç†æ·±åº¦å‰–æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1647486891997692/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    SheepHappy
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T15:00:04.000Z" title="Wed Nov 26 2025 15:00:04 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æ¥ä¸Šç¯‡<a href="https://juejin.cn/post/7569886315196743731" target="_blank" title="https://juejin.cn/post/7569886315196743731">MyBatis-Plus æºç é˜…è¯»ï¼ˆäºŒï¼‰ä»£ç ç”Ÿæˆå™¨åŸç†æ·±åº¦å‰–æ</a>ï¼Œæœ¬æ–‡æˆ‘ä»¬èšç„¦ MP ä¸­é«˜é¢‘ä½¿ç”¨çš„<strong>æ¡ä»¶æ„é€ å™¨ï¼ˆWrapperï¼‰</strong> ï¼Œä» SQL é…ç½®ã€æºç ç»“æ„åˆ°æ‰§è¡Œæµç¨‹ï¼Œé€å±‚æ‹†è§£å…¶å·¥ä½œåŸç†ã€‚</p>
<h2 data-id="heading-0">ç¯å¢ƒ</h2>
<ul>
<li>æ ¸å¿ƒä¾èµ–ï¼šmybatis-plus-spring-boot3-starter 3.5.14</li>
<li>åŸºç¡€æ¡†æ¶ï¼šSpring Boot 3.5.6</li>
<li>JDK ç‰ˆæœ¬ï¼š17</li>
<li>å¼€å‘å·¥å…·ï¼šIntelliJ IDEA</li>
</ul>
<h2 data-id="heading-1">Wrapper æ˜¯ä»€ä¹ˆï¼Ÿ</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fbaomidou.com%2Fguides%2Fwrapper%2F" target="_blank" title="https://baomidou.com/guides/wrapper/" ref="nofollow noopener noreferrer">æ¡ä»¶æ„é€ å™¨ | MyBatis-Plus å®˜æ–¹æ–‡æ¡£ã€‚</a></p>
<p>å…ˆå›é¡¾å®˜æ–¹å®šä¹‰ï¼šWrapper æ˜¯ MP æä¾›çš„<strong>æ¡ä»¶æ„é€ å·¥å…·ç±»</strong>ï¼Œæ”¯æŒé“¾å¼è°ƒç”¨æ„é€  SQL æŸ¥è¯¢æ¡ä»¶ï¼Œæ— éœ€æ‰‹åŠ¨æ‹¼æ¥å­—ç¬¦ä¸²ï¼Œæ—¢æå‡å¼€å‘æ•ˆç‡ï¼Œåˆèƒ½è§„é¿ SQL æ³¨å…¥é£é™©ã€‚</p>
<p>ä¸¾ä¸ªç›´è§‚ä¾‹å­ï¼š</p>
<pre><code class="hljs language-java" lang="java">QueryWrapper&lt;User&gt; qw = <span class="hljs-keyword">new</span> <span class="hljs-title class_">QueryWrapper</span>&lt;User&gt;()
        .ge(<span class="hljs-string">"id"</span>, <span class="hljs-number">3</span>)
        .eq(<span class="hljs-string">"name"</span>, <span class="hljs-string">"happy"</span>)
        .last(<span class="hljs-string">"limit 1"</span>);
        
userMapper.selectList(qw);
</code></pre>
<p>æœ€ç»ˆç”Ÿæˆçš„ SQLï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">SELECT</span> 
id,name,password,<span class="hljs-type">date</span>,delete_timestamp 
<span class="hljs-keyword">FROM</span> <span class="hljs-keyword">user</span> 
<span class="hljs-keyword">WHERE</span> (id <span class="hljs-operator">&gt;=</span> <span class="hljs-number">3</span> <span class="hljs-keyword">AND</span> name <span class="hljs-operator">=</span> <span class="hljs-string">'happy'</span>) 
limit <span class="hljs-number">1</span>
</code></pre>
<p>ç›¸æ¯”ä¼ ç»Ÿ MyBatis éœ€è¦ç¼–å†™ XML / æ³¨è§£ SQLï¼ŒWrapper å®ç°äº†<strong>åŠ¨æ€æ¡ä»¶çš„ â€œæ— æ„ŸçŸ¥â€ æ„å»º</strong>â€”â€” è¿™èƒŒåçš„é€»è¾‘æ­£æ˜¯æœ¬æ–‡è¦æ‹†è§£çš„é‡ç‚¹ã€‚</p>
<h2 data-id="heading-2">æºç åˆ†æï¼šä» SQL é…ç½®åˆ°æ¡ä»¶æ„é€ </h2>
<h3 data-id="heading-3">å®šä½ selectList çš„ SQL æ¨¡æ¿</h3>
<p><code>userMapper.selectList(qw)</code>Â æœ€ç»ˆè°ƒç”¨çš„æ˜¯Â <code>BaseMapper#selectList(Wrapper&lt;T&gt;)</code>ï¼Œè€Œè¯¥æ–¹æ³•çš„ SQL æ¨¡æ¿æ¥è‡ª MP çš„å†…ç½®æ³¨å…¥é€»è¾‘ã€‚ï¼ˆå‚è€ƒ<a href="https://juejin.cn/post/7567040496049422355" target="_blank" title="https://juejin.cn/post/7567040496049422355">MyBatis-Plus æºç é˜…è¯»ï¼ˆä¸€ï¼‰CRUD æ–¹æ³•è‡ªåŠ¨ç”ŸæˆåŸç†æ·±åº¦å‰–æ</a>ï¼‰</p>
<p>åœ¨Â <code>SelectList#injectMappedStatement</code>Â æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬èƒ½çœ‹åˆ°æ ¸å¿ƒ SQL é…ç½®ã€‚
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/16d03ee45750421a96a81b14be21e714~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2hlZXBIYXBweQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764774004&amp;x-signature=HkTF2Z9YyBzE0CiROBUg8zeVsBE%3D" alt="image.png" loading="lazy"/></p>
<p>ä¸‹é¢æ˜¯ SQL æ¨¡æ¿æ ¼å¼åŒ–åçš„å†…å®¹ã€‚</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="xml">
   <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">"ew != null and ew.sqlFirst != null"</span>&gt;</span>${ew.sqlFirst}<span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span>
    SELECT 
   <span class="hljs-tag">&lt;<span class="hljs-name">choose</span>&gt;</span>
       <span class="hljs-tag">&lt;<span class="hljs-name">when</span> <span class="hljs-attr">test</span>=<span class="hljs-string">"ew != null and ew.sqlSelect != null"</span>&gt;</span>${ew.sqlSelect}<span class="hljs-tag">&lt;/<span class="hljs-name">when</span>&gt;</span>
       <span class="hljs-tag">&lt;<span class="hljs-name">otherwise</span>&gt;</span>
            id,
            name,
            password,
            date,
            delete_timestamp
       <span class="hljs-tag">&lt;/<span class="hljs-name">otherwise</span>&gt;</span>
   <span class="hljs-tag">&lt;/<span class="hljs-name">choose</span>&gt;</span>
    FROM user 
   <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">"ew != null"</span>&gt;</span>
       <span class="hljs-tag">&lt;<span class="hljs-name">bind</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"_sgEs_"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"ew.sqlSegment != null and ew.sqlSegment != ''"</span> /&gt;</span>
       <span class="hljs-tag">&lt;<span class="hljs-name">where</span>&gt;</span>
           <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">"ew.entity != null"</span>&gt;</span>
               <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">"ew.entity.id != null"</span>&gt;</span>id=#{ew.entity.id}<span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span>
               <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">"ew.entity['name'] != null"</span>&gt;</span>AND name=#{ew.entity.name}<span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span>
               <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">"ew.entity['password'] != null"</span>&gt;</span>AND password=#{ew.entity.password}<span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span>
               <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">"ew.entity['date'] != null"</span>&gt;</span>AND date=#{ew.entity.date}<span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span>
               <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">"ew.entity['deleteTimestamp'] != null"</span>&gt;</span>AND delete_timestamp=#{ew.entity.deleteTimestamp}<span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span>
           <span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span>
           <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">"_sgEs_ and ew.nonEmptyOfNormal"</span>&gt;</span>AND ${ew.sqlSegment}<span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span>
       <span class="hljs-tag">&lt;/<span class="hljs-name">where</span>&gt;</span>
       <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">"_sgEs_ and ew.emptyOfNormal"</span>&gt;</span>${ew.sqlSegment}<span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span>
   <span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">"ew != null and ew.sqlComment != null"</span>&gt;</span>${ew.sqlComment}<span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span>
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p>å…³é”®è§‚å¯Ÿï¼š</p>
<ul>
<li><code>ew</code>Â æ˜¯ Wrapper å¯¹è±¡åœ¨ SQL æ¨¡æ¿ä¸­çš„åˆ«åï¼ˆé€šè¿‡Â <code>@Param("ew")</code>Â æ³¨å…¥ï¼‰ï¼›</li>
<li>ç¬¬ 25 è¡Œï¼Œ<code>${ew.sqlSegment}</code>Â æ˜¯ Wrapper æ„é€ çš„æ¡ä»¶æ ¸å¿ƒ â€”â€”<strong>æˆ‘ä»¬å†™çš„ ge/eq ç­‰æ–¹æ³•ï¼Œæœ€ç»ˆéƒ½ä¼šè½¬åŒ–ä¸º sqlSegment çš„å†…å®¹</strong>ã€‚</li>
</ul>
<p>è¡¥å……è¯´æ˜ï¼š</p>
<ul>
<li><code>_sgEs_</code>ï¼šåˆ¤æ–­ sqlSegment æ˜¯å¦éç©ºï¼›</li>
<li><code>ew.nonEmptyOfNormal</code>ï¼šæ ‡è®°æ˜¯å¦åŒ…å«æ™®é€šæŸ¥è¯¢æ¡ä»¶ï¼ˆå¦‚ ge/eqï¼‰ï¼›</li>
</ul>
<h3 data-id="heading-4">Wrapper ä»£ç åˆ†æ</h3>
<p>ä¸‹é¢æ˜¯ <code>Wrapper</code> ç±»ç®€å•çš„ç»§æ‰¿å…³ç³»
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/803e2a22bfb446cd8a2a33d09fbcb1b3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2hlZXBIYXBweQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764774004&amp;x-signature=y2l8l964KVs%2FTXjyI4aFkBFwAVY%3D" alt="Wrapper ç®€å•çš„ç»§æ‰¿å…³ç³».png" loading="lazy"/>
<code>AbstractWrapper</code>Â çš„æ³›å‹è®¾è®¡å€¼å¾—å…³æ³¨ï¼š</p>
<ul>
<li><code>T</code>ï¼šå®ä½“ç±»ç±»å‹ï¼ˆå¦‚ <code>User</code>ï¼‰ï¼›</li>
<li><code>R</code>ï¼šæ•°æ®åº“åˆ—åçš„è¡¨è¾¾ç±»å‹ï¼ˆQueryWrapper ä¸º <code>String</code>ï¼ŒLambdaQueryWrapper ä¸º <code>SFunction</code>ï¼‰ï¼›</li>
<li><code>Children</code>ï¼šå­ç±»è‡ªèº«ç±»å‹ï¼ˆåœ¨æœ¬ä¾‹ä¸­ä¸º <code>QueryWrapper&lt;User&gt;</code>ï¼‰ã€‚</li>
</ul>
<p>æœ¬æ–‡ä»¥Â <code>QueryWrapper</code>Â ä¸ºä¾‹åˆ†æï¼ˆLambdaQueryWrapper ä»…å­—æ®µè§£æé€»è¾‘ä¸åŒï¼Œæ ¸å¿ƒåŸç†ä¸€è‡´ï¼‰ã€‚</p>
<h3 data-id="heading-5">æ„é€ æ¡ä»¶æ—¶å‘ç”Ÿäº†ä»€ä¹ˆ?</h3>
<h4 data-id="heading-6">ç¬¬ä¸€ä¸ªæ¡ä»¶ ge</h4>
<p>ä»¥ <code>.ge("id", 3)</code> ä¸ºä¾‹ï¼Œå‘ç°ä¼šè¿›å…¥<code>com.baomidou.mybatisplus.core.conditions.AbstractWrapper#ge</code>æ–¹æ³•ã€‚æœ€åå°† 3 ä¸ª <code>ISqlSegment</code> çš„å®ç°ç±»æ·»åŠ åˆ° <code>AbstractWrapper</code> ç±»çš„ <code>expression</code> å˜é‡é‡Œã€‚</p>
<p><code>experssion</code> çš„ç±»å‹ä¸º<code> MergeSegments</code>ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MergeSegments</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">ISqlSegment</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">NormalSegmentList</span> <span class="hljs-variable">normal</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">NormalSegmentList</span>();
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">GroupBySegmentList</span> <span class="hljs-variable">groupBy</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">GroupBySegmentList</span>();
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">HavingSegmentList</span> <span class="hljs-variable">having</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HavingSegmentList</span>();
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">OrderBySegmentList</span> <span class="hljs-variable">orderBy</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">OrderBySegmentList</span>();
    <span class="hljs-comment">// ...</span>
</code></pre>
<p>åƒ <code>ge</code>ã€<code>eq</code> è¿™æ ·çš„æ¡ä»¶éƒ½æ˜¯æ·»åŠ åˆ° <code>NormalSegmentList</code> é‡Œé¢çš„ã€‚</p>
<p>é‚£ <code>ISqlSegment</code> åˆæ˜¯ä»€ä¹ˆï¼Ÿ</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@FunctionalInterface</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">ISqlSegment</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Serializable</span> {

    <span class="hljs-comment">/**
     * SQL ç‰‡æ®µ
     */</span>
    String <span class="hljs-title function_">getSqlSegment</span><span class="hljs-params">()</span>;

}
</code></pre>
<p>å…¶å®å°±æ˜¯ mp å®šä¹‰çš„ä¸€ä¸ªå‡½æ•°å¼æ¥å£ï¼Œç”¨äºè¿”å› sql ç‰‡æ®µã€‚</p>
<p>åœ¨ä¸Šé¢çš„ä»£ç ä¸­6ï¼Œ<code>.ge("id", 3)</code>è¿™ä¸ªä»£ç æ·»åŠ çš„ä¸‰ä¸ª <code>ISqlSegment</code> çš„å†…å®¹åˆ†åˆ«ä¸º <code>id</code>, <code>&gt;=</code> å’Œ <code>#{ew.paramNameValuePairs.MPGENVAL1}</code></p>
<p>æ³¨æ„ï¼Œç¬¬ä¸‰ä¸ª <code>ISqlSegment</code> è¿”å›çš„å†…å®¹ä¸æ˜¯ <code>3</code> è€Œæ˜¯ä¸€ä¸ªé¢„ç¼–è¯‘çš„å˜é‡ <code>ew.paramNameValuePairs.MPGENVAL1</code>ï¼Œå¹¶ä¸”åœ¨ç”Ÿæˆè¿™ä¸ª <code>ISqlSegment</code> çš„æ—¶å€™ä¼šè°ƒç”¨ <code>com.baomidou.mybatisplus.core.conditions.AbstractWrapper#formatParam</code> æ–¹æ³•ï¼Œå°†å®é™…çš„å‚æ•°å€¼å­˜å…¥ <code>paramNameValuePairs</code> å˜é‡ã€‚åœ¨ä¸Šé¢ä¾‹å­ä¸­ï¼Œå‚æ•°åä¸º <code>MPGENVAL1</code>ï¼Œå€¼ä¸º <code>3</code>ã€‚</p>
<h4 data-id="heading-7">ç¬¬äºŒä¸ªæ¡ä»¶ eq</h4>
<p>å½“è°ƒç”¨Â <code>.eq("name", "happy")</code>Â æ—¶ï¼ŒMP ä¼šè‡ªåŠ¨åœ¨ä¸¤ä¸ªæ¡ä»¶é—´æ·»åŠ Â <code>AND</code>Â è¿æ¥ç¬¦.</p>
<p>å› æ­¤ï¼Œ<code>.ge().eq()</code>Â æœ€ç»ˆç”Ÿæˆçš„ç‰‡æ®µåºåˆ—ä¸ºï¼š<code>id</code>Â â†’Â <code>&gt;=</code>Â â†’Â <code>#{...MPGENVAL1}</code>Â â†’Â <code>AND</code>Â â†’Â <code>name</code>Â â†’Â <code>=</code>Â â†’Â <code>#{...MPGENVAL2}</code></p>
<h4 data-id="heading-8">ç¬¬ä¸‰ä¸ªæ¡ä»¶ last</h4>
<p><code>.last("limit 1")</code>Â æ›´ç®€å• â€”â€” ç›´æ¥å°†å­—ç¬¦ä¸²èµ‹å€¼ç»™Â <code>AbstractWrapper</code>Â çš„Â <code>lastSql</code>Â å±æ€§ï¼Œæœ€ç»ˆåœ¨ SQL æ¨¡æ¿æœ«å°¾æ‹¼æ¥ã€‚</p>
<h4 data-id="heading-9">sqlSegment çš„æœ€ç»ˆç”Ÿæˆ</h4>
<p>å½“æ‰€æœ‰çš„æ¡ä»¶æ„é€ å®Œæˆä¹‹åï¼Œæˆ‘ä»¬æ„é€ çš„ <code>queryWrapper</code> é€šè¿‡ <code>getSqlSegment()</code> æ–¹æ³•è·å–åˆ°çš„å†…å®¹åº”è¯¥å°±æ˜¯</p>
<pre><code class="hljs language-sql" lang="sql">(id <span class="hljs-operator">&gt;=</span> #{ew.paramNameValuePairs.MPGENVAL1} 
<span class="hljs-keyword">AND</span> 
name <span class="hljs-operator">=</span> #{ew.paramNameValuePairs.MPGENVAL2}) 
limit <span class="hljs-number">1</span>
</code></pre>
<h3 data-id="heading-10">SQL æ¨¡æ¿ä¸æ¡ä»¶çš„æœ€ç»ˆèåˆ</h3>
<p>Wrapper æ„é€ çš„æ¡ä»¶æœ€ç»ˆè¦ä¸ SQL æ¨¡æ¿ç»“åˆï¼Œè¿™ä¸€æ­¥ç”± MyBatis çš„åŠ¨æ€ SQL å¼•æ“å®Œæˆï¼ˆæ ¸å¿ƒåœ¨Â <code>DynamicSqlSource#getBoundSql</code>ï¼‰</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DynamicSqlSource</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">SqlSource</span> {

  <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Configuration configuration;
  <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> SqlNode rootSqlNode;

  <span class="hljs-keyword">public</span> <span class="hljs-title function_">DynamicSqlSource</span><span class="hljs-params">(Configuration configuration, SqlNode rootSqlNode)</span> {
    <span class="hljs-built_in">this</span>.configuration = configuration;
    <span class="hljs-built_in">this</span>.rootSqlNode = rootSqlNode;
  }

  <span class="hljs-meta">@Override</span>
  <span class="hljs-keyword">public</span> BoundSql <span class="hljs-title function_">getBoundSql</span><span class="hljs-params">(Object parameterObject)</span> {
    <span class="hljs-type">DynamicContext</span> <span class="hljs-variable">context</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DynamicContext</span>(configuration, parameterObject);
    <span class="hljs-comment">// 1. å°† ${} çš„å†…å®¹è½¬æ¢ä¸ºå®é™…å†…å®¹ï¼Œ</span>
    <span class="hljs-comment">// ä¾‹å¦‚ ${ew.sqlSegment} è½¬æ¢ä¸º (id &gt;= #{ew.paramNameValuePairs.MPGENVAL1} AND name = #{ew.paramNameValuePairs.MPGENVAL2}) limit 1</span>
    rootSqlNode.apply(context); 
    <span class="hljs-type">SqlSourceBuilder</span> <span class="hljs-variable">sqlSourceParser</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SqlSourceBuilder</span>(configuration);
    Class&lt;?&gt; parameterType = parameterObject == <span class="hljs-literal">null</span> ? Object.class : parameterObject.getClass();
    <span class="hljs-comment">// 2. å¤„ç† #{} è¿™æ ·çš„é¢„ç¼–è¯‘å†…å®¹</span>
    <span class="hljs-comment">// ä¾‹å¦‚ (id &gt;= #{ew.paramNameValuePairs.MPGENVAL1} AND name = #{ew.paramNameValuePairs.MPGENVAL2}) limit 1 è½¬æ¢ä¸º (id &gt;=? AND name = ?) limit 1</span>
    <span class="hljs-type">SqlSource</span> <span class="hljs-variable">sqlSource</span> <span class="hljs-operator">=</span> sqlSourceParser.parse(context.getSql(), parameterType, context.getBindings());
    <span class="hljs-type">BoundSql</span> <span class="hljs-variable">boundSql</span> <span class="hljs-operator">=</span> sqlSource.getBoundSql(parameterObject);
    context.getBindings().forEach(boundSql::setAdditionalParameter);
    <span class="hljs-keyword">return</span> boundSql;
  }

}
</code></pre>
<h2 data-id="heading-11">æ€»ç»“</h2>
<p>é€šè¿‡åˆ†æï¼Œæˆ‘ä»¬ç†æ¸…äº† Wrapper çš„æ ¸å¿ƒé€»è¾‘ï¼š<strong>ä»¥é“¾å¼è°ƒç”¨æ”¶é›†æ¡ä»¶ç‰‡æ®µ â†’ å­˜å‚¨ä¸ºé¢„ç¼–è¯‘å ä½ç¬¦å½¢å¼ â†’ æ‹¼æ¥ä¸º sqlSegment â†’ ä¸ MyBatis åŠ¨æ€ SQL èåˆç”Ÿæˆæœ€ç»ˆ SQL</strong></p>
<p>é™¤äº†æœ¬æ–‡åˆ†æçš„åŸºç¡€æ¡ä»¶æ„é€ ï¼ŒWrapper è¿˜æ”¯æŒï¼š</p>
<ul>
<li><code>select("id", "name")</code>ï¼šé€šè¿‡Â <code>sqlSelect</code>Â æŒ‡å®šæŸ¥è¯¢å­—æ®µï¼›</li>
<li><code>orderByAsc("id")</code>ï¼šé€šè¿‡Â <code>orderBy</code>Â å®¹å™¨æ„é€ æ’åºæ¡ä»¶ï¼›</li>
<li><code>lambda()</code>ï¼šLambdaQueryWrapper é€šè¿‡è§£æÂ <code>User::getId</code>Â è·å–å­—æ®µåï¼Œé¿å…ç¡¬ç¼–ç ã€‚</li>
</ul>
<p>è¿™äº›åŠŸèƒ½çš„åº•å±‚é€»è¾‘ä¸æœ¬æ–‡åˆ†æçš„æ¡ä»¶æ„é€ ä¸€è‡´ â€”â€” éƒ½æ˜¯é€šè¿‡Â <code>ISqlSegment</code>Â ç‰‡æ®µå®¹å™¨å’ŒåŠ¨æ€æ‹¼æ¥å®ç°ã€‚</p>
<h2 data-id="heading-12">ç»“è¯­</h2>
<p>Wrapper æœ¬è´¨æ˜¯ MP ä¸ºå¼€å‘è€…å°è£…çš„ â€œåŠ¨æ€ SQL æ„å»º DSLâ€ï¼Œå®ƒå°†å¤æ‚çš„æ¡ä»¶æ‹¼æ¥é€»è¾‘éšè—åœ¨é“¾å¼è°ƒç”¨èƒŒåï¼Œæ—¢ç®€åŒ–äº†ä»£ç ï¼Œåˆä¿è¯äº†å®‰å…¨æ€§ã€‚ç†è§£å…¶åŸç†åï¼Œæ— è®ºæ˜¯è‡ªå®šä¹‰æ¡ä»¶æ„é€ å™¨ï¼Œè¿˜æ˜¯æ’æŸ¥å¤æ‚æ¡ä»¶çš„æ‹¼æ¥é—®é¢˜ï¼Œéƒ½ä¼šæ›´åŠ å¾—å¿ƒåº”æ‰‹ã€‚</p>
<p>å¦‚æœè¿™ç¯‡æ–‡ç« å¯¹ä½ ç†è§£ã€Œæ¡ä»¶æ„é€ å™¨åŸç†ã€æœ‰å¸®åŠ©ï¼Œéº»çƒ¦<strong>ç‚¹èµ + å…³æ³¨</strong>æ”¯æŒä¸€ä¸‹ï½ ä½ çš„è®¤å¯å°±æ˜¯æˆ‘æŒç»­è¾“å‡ºæºç è§£æç³»åˆ—çš„æœ€å¤§åŠ¨åŠ›ï¼â¤ï¸â¤ï¸â¤ï¸ğŸ¤©ğŸ¤©ğŸ¤©ğŸš€ğŸš€ğŸš€</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fbinaryyang%2Fmp-test" target="_blank" title="https://github.com/binaryyang/mp-test" ref="nofollow noopener noreferrer">æºç åœ°å€</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ·±å…¥ç†è§£ JavaScript åŸå‹æœºåˆ¶ï¼šä»â€œå¦‚ä½•æ‹¿åˆ°å°ç±³ SU7â€è¯´èµ·]]></title>    <link>https://juejin.cn/post/7576821684252360747</link>    <guid>https://juejin.cn/post/7576821684252360747</guid>    <pubDate>2025-11-26T11:03:14.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576821684252360747" data-draft-id="7576859345934811190" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ·±å…¥ç†è§£ JavaScript åŸå‹æœºåˆ¶ï¼šä»â€œå¦‚ä½•æ‹¿åˆ°å°ç±³ SU7â€è¯´èµ·"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2025-11-26T11:03:14.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”Ÿæ¤°ä¸ç»’æ‹¿é“"/> <meta itemprop="url" content="https://juejin.cn/user/4185180725584116"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ·±å…¥ç†è§£ JavaScript åŸå‹æœºåˆ¶ï¼šä»â€œå¦‚ä½•æ‹¿åˆ°å°ç±³ SU7â€è¯´èµ·
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4185180725584116/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”Ÿæ¤°ä¸ç»’æ‹¿é“
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T11:03:14.000Z" title="Wed Nov 26 2025 11:03:14 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    10
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p><strong>â€œå­”å­æ˜¯éŸ©å›½äººï¼Ÿâ€â€”â€”JS çš„åŸå‹é“¾ä¸æ˜¯è¡€ç¼˜ï¼Œè€Œæ˜¯å§”æ‰˜ã€‚</strong></p>
</blockquote>
<p>åœ¨å‰ç«¯å¼€å‘ä¸­ï¼ŒJavaScript çš„åŸå‹ï¼ˆprototypeï¼‰æœºåˆ¶å¸¸å¸¸è®©äººå›°æƒ‘åˆç€è¿·ã€‚å®ƒä¸åƒ Javaã€C++ é‚£æ ·åŸºäºâ€œç±»â€çš„ç»§æ‰¿ï¼Œè€Œæ˜¯ä¸€ç§<strong>åŸºäºåŸå‹çš„å§”æ‰˜å¼é¢å‘å¯¹è±¡æ¨¡å‹</strong>ã€‚ä»Šå¤©ï¼Œæˆ‘ä»¬å°±ç”¨ä¸€ä¸ªè½»æ¾çš„ä¾‹å­â€”â€”â€œå¦‚ä½•æ‹¿åˆ°ä¸€è¾†å°ç±³ SU7â€â€”â€”æ¥æ­å¼€åŸå‹æœºåˆ¶çš„ç¥ç§˜é¢çº±ã€‚</p>
<hr/>
<h2 data-id="heading-0">ä¸€ã€æ„é€ å‡½æ•°ï¼šé€ è½¦çš„ç¬¬ä¸€æ­¥</h2>
<p>å‡è®¾ä½ æƒ³æ‹¥æœ‰ä¸€è¾†å°ç±³ SU7ï¼Œé¦–å…ˆå¾—æœ‰ä¸ªâ€œé€ è½¦è“å›¾â€ã€‚åœ¨ JS ä¸­ï¼Œè¿™ä¸ªè“å›¾å°±æ˜¯<strong>æ„é€ å‡½æ•°</strong>ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">Javascript
ç¼–è¾‘
1function Car(color) {
2    <span class="hljs-attr">this.color</span> = color<span class="hljs-comment">;</span>
3}
</code></pre>
<p>å½“ä½ æ‰§è¡Œ <code>new Car('éœå…‰ç´«')</code> æ—¶ï¼ŒJS å¼•æ“ä¼šï¼š</p>
<ol>
<li>åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼›</li>
<li>å°†Â <code>this</code>Â æŒ‡å‘è¿™ä¸ªæ–°å¯¹è±¡ï¼›</li>
<li>æ‰§è¡Œæ„é€ å‡½æ•°ä¸­çš„ä»£ç ï¼ˆå¦‚è®¾ç½®Â <code>color</code>ï¼‰ï¼›</li>
<li>è¿”å›è¿™ä¸ªæ–°å¯¹è±¡ã€‚</li>
</ol>
<p>æ­¤æ—¶ï¼Œä½ å¾—åˆ°äº†ä¸€è¾†â€œç‹¬å±äºä½ â€çš„ SU7ï¼Œé¢œè‰²æ˜¯éœå…‰ç´«ã€‚</p>
<p>ä½†é—®é¢˜æ¥äº†ï¼š<strong>æ¯è¾†è½¦éƒ½è¦æœ‰ drive æ–¹æ³•ã€é•¿å®½é«˜å‚æ•°å—ï¼Ÿ</strong> å¦‚æœæ¯ä¸ªå®ä¾‹éƒ½å­˜ä¸€ä»½ï¼Œå²‚ä¸æµªè´¹å†…å­˜ï¼Ÿ</p>
<hr/>
<h2 data-id="heading-1">äºŒã€prototypeï¼šå…±äº«çš„â€œå…¬å…±é…ç½®â€</h2>
<p>äºæ˜¯ JS å¼•å…¥äº† <strong>prototypeï¼ˆåŸå‹ï¼‰</strong> â€”â€”æ‰€æœ‰å®ä¾‹å…±äº«çš„æ–¹æ³•å’Œå±æ€§å­˜æ”¾åœ°ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title class_">Javascript</span>
ç¼–è¾‘
1Car.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> = {
<span class="hljs-number">2</span>    <span class="hljs-attr">name</span>: <span class="hljs-string">'su7'</span>,
<span class="hljs-number">3</span>    <span class="hljs-attr">height</span>: <span class="hljs-number">1.4</span>,
<span class="hljs-number">4</span>    <span class="hljs-attr">weight</span>: <span class="hljs-number">1.5</span>,
<span class="hljs-number">5</span>    <span class="hljs-attr">long</span>: <span class="hljs-number">4800</span>,
<span class="hljs-number">6</span>    <span class="hljs-title function_">drive</span>(<span class="hljs-params"/>) {
<span class="hljs-number">7</span>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'drive, ä¸‹èµ›é“'</span>);
<span class="hljs-number">8</span>    }
<span class="hljs-number">9</span>};
</code></pre>
<p>ç°åœ¨ï¼Œæ— è®ºä½ åˆ›å»ºå¤šå°‘è¾† SU7ï¼Œå®ƒä»¬éƒ½<strong>å…±äº«åŒä¸€ä»½åŸå‹å¯¹è±¡</strong>ã€‚è°ƒç”¨ <code>car1.drive()</code> æ—¶ï¼ŒJS ä¼šåœ¨ <code>car1</code> è‡ªèº«æ‰¾ä¸åˆ° <code>drive</code>ï¼Œå°±æ²¿ç€ <code>__proto__</code> é“¾å‘ä¸ŠæŸ¥æ‰¾ï¼Œæœ€ç»ˆåœ¨ <code>Car.prototype</code> ä¸Šæ‰¾åˆ°ã€‚</p>
<blockquote>
<p>âœ… <strong>å…³é”®ç‚¹</strong>ï¼š</p>
<ul>
<li>å®ä¾‹å±æ€§ï¼ˆå¦‚Â <code>color</code>ï¼‰å­˜åœ¨å®ä¾‹è‡ªèº«ï¼›</li>
<li>å…±äº«æ–¹æ³•/å±æ€§ï¼ˆå¦‚Â <code>drive</code>,Â <code>name</code>ï¼‰å­˜åœ¨åŸå‹ä¸Šï¼›</li>
<li>æŸ¥æ‰¾é¡ºåºï¼š<strong>å®ä¾‹ â†’ åŸå‹ â†’ åŸå‹çš„åŸå‹ â†’ â€¦ â†’ Object.prototype â†’ null</strong></li>
</ul>
</blockquote>
<hr/>
<h2 data-id="heading-2">ä¸‰ã€åŸå‹é“¾çš„æœ¬è´¨ï¼šå§”æ‰˜ï¼Œè€Œéç»§æ‰¿</h2>
<p>å¾ˆå¤šäººè¯¯ä»¥ä¸º JS æ˜¯â€œç±»ç»§æ‰¿â€ï¼Œå…¶å®å®ƒæ˜¯<strong>å¯¹è±¡å§”æ‰˜</strong>ã€‚</p>
<ul>
<li>ä¼ ç»Ÿ OOPï¼ˆå¦‚ Javaï¼‰ï¼šå­ç±»â€œç»§æ‰¿â€çˆ¶ç±»ï¼Œå½¢æˆè¡€ç¼˜å…³ç³»ã€‚</li>
<li>JS åŸå‹å¼ OOPï¼šå¯¹è±¡â€œå§”æ‰˜â€ç»™å¦ä¸€ä¸ªå¯¹è±¡ï¼Œè¯´ï¼šâ€œä½ æœ‰è¿™æ–¹æ³•å—ï¼Ÿå€Ÿæˆ‘ç”¨ç”¨ã€‚â€</li>
</ul>
<p>æ¯”å¦‚ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">Javascript
ç¼–è¾‘
1var <span class="hljs-attr">obj</span> = {}<span class="hljs-comment">;</span>
2console.log(obj.toString())<span class="hljs-comment">; // èƒ½è°ƒç”¨ï¼</span>
</code></pre>
<p><code>obj</code> è‡ªå·±æ²¡æœ‰ <code>toString</code>ï¼Œä½†å®ƒé€šè¿‡ <code>__proto__</code> å§”æ‰˜ç»™äº† <code>Object.prototype</code>ï¼Œäºæ˜¯æˆåŠŸè°ƒç”¨ã€‚</p>
<p>è¿™ç§è®¾è®¡æ›´çµæ´»ï¼šä½ å¯ä»¥éšæ—¶ä¿®æ”¹åŸå‹ï¼Œæ‰€æœ‰å®ä¾‹ç«‹å³â€œæ„ŸçŸ¥â€åˆ°å˜åŒ–ï¼ˆé™¤éå®ä¾‹è‡ªå·±è¦†ç›–äº†è¯¥å±æ€§ï¼‰ã€‚</p>
<hr/>
<h2 data-id="heading-3">å››ã€constructor ä¸åŸå‹çš„â€œåŒå‘ç»‘å®šâ€</h2>
<p>æ¯ä¸ªå‡½æ•°éƒ½æœ‰ <code>prototype</code> å±æ€§ï¼Œè€Œ <code>prototype</code> å¯¹è±¡é»˜è®¤æœ‰ä¸€ä¸ª <code>constructor</code> å±æ€§ï¼ŒæŒ‡å›æ„é€ å‡½æ•°ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">Javascript
ç¼–è¾‘
<span class="hljs-attr">1Car.prototype.constructor</span> === Car<span class="hljs-comment">; // true</span>
</code></pre>
<p>ä½†æ³¨æ„ï¼å¦‚æœä½ <strong>ç›´æ¥é‡å†™æ•´ä¸ª prototype</strong>ï¼ˆå¦‚ <code>Car.prototype = { ... }</code>ï¼‰ï¼Œè¿™ä¸ªé“¾æ¥ä¼šè¢«åˆ‡æ–­ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">Javascript
ç¼–è¾‘
<span class="hljs-attr">1Car.prototype</span> = { drive() {} }<span class="hljs-comment">;</span>
2console.log(<span class="hljs-attr">Car.prototype.constructor</span> === Car)<span class="hljs-comment">; // false! ç°åœ¨æ˜¯ Object</span>
</code></pre>
<p>ä¿®å¤æ–¹å¼ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title class_">Javascript</span>
ç¼–è¾‘
1Car.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> = {
<span class="hljs-number">2</span>    <span class="hljs-attr">constructor</span>: <span class="hljs-title class_">Car</span>, <span class="hljs-comment">// æ‰‹åŠ¨ä¿®å¤</span>
<span class="hljs-number">3</span>    <span class="hljs-title function_">drive</span>(<span class="hljs-params"/>) { <span class="hljs-comment">/*...*/</span> }
<span class="hljs-number">4</span>};
</code></pre>
<p>æˆ–è€…ä½¿ç”¨ <code>Object.defineProperty</code> è®¾ç½®ä¸å¯æšä¸¾çš„ <code>constructor</code>ã€‚</p>
<hr/>
<h2 data-id="heading-4">äº”ã€å¤šå±‚åŸå‹é“¾ï¼šAnimal â†’ Person â†’ su</h2>
<p>JS æ”¯æŒ<strong>åŸå‹é“¾çš„åµŒå¥—</strong>ï¼Œæ¨¡æ‹Ÿâ€œå¤šçº§ç»§æ‰¿â€ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title class_">Javascript</span>
ç¼–è¾‘
1<span class="hljs-keyword">function</span> <span class="hljs-title function_">Animal</span>(<span class="hljs-params"/>) {}
2Animal.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">species</span> = <span class="hljs-string">'åŠ¨ç‰©'</span>;
<span class="hljs-number">3</span>
4<span class="hljs-keyword">function</span> <span class="hljs-title function_">Person</span>(<span class="hljs-params"/>) {}
5Person.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Animal</span>(); <span class="hljs-comment">// Person å§”æ‰˜ç»™ Animal å®ä¾‹</span>
<span class="hljs-number">6</span>
7<span class="hljs-keyword">var</span> su = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>();
8<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(su.<span class="hljs-property">species</span>); <span class="hljs-comment">// 'åŠ¨ç‰©'</span>
</code></pre>
<p>è¿™é‡Œ <code>su.__proto__</code> æ˜¯ <code>Person.prototype</code>ï¼ˆå³ä¸€ä¸ª <code>Animal</code> å®ä¾‹ï¼‰ï¼Œè€Œ <code>Animal</code> å®ä¾‹çš„ <code>__proto__</code> åˆæŒ‡å‘ <code>Animal.prototype</code>ï¼Œæœ€ç»ˆé€šå‘ <code>Object.prototype</code>ã€‚</p>
<blockquote>
<p>ğŸŒŸ è¿™å°±æ˜¯ä¸ºä»€ä¹ˆ <code>su.toString()</code> ä¾ç„¶æœ‰æ•ˆâ€”â€”åŸå‹é“¾ä¸€è·¯å‘ä¸Šï¼Œç›´åˆ° <code>Object.prototype</code>ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-5">å…­ã€æ€è€ƒï¼šä¸ºä»€ä¹ˆ JS é€‰æ‹©åŸå‹ï¼Ÿ</h2>
<ul>
<li><strong>åŠ¨æ€æ€§</strong>ï¼šè¿è¡Œæ—¶å¯ä¿®æ”¹åŸå‹ï¼Œè¡Œä¸ºå®æ—¶ç”Ÿæ•ˆï¼›</li>
<li><strong>è½»é‡</strong>ï¼šæ— éœ€é¢„å®šä¹‰â€œç±»â€ï¼Œå¯¹è±¡å¯è‡ªç”±æ‰©å±•ï¼›</li>
<li><strong>å“²å­¦å·®å¼‚</strong>ï¼šJS è®¤ä¸ºâ€œå¯¹è±¡ä¹‹é—´å¯ä»¥äº’ç›¸å­¦ä¹ â€ï¼Œè€Œéâ€œå¿…é¡»å‡ºè‡ªæŸä¸ªæ¨¡æ¿â€ã€‚</li>
</ul>
<p>æ­£å¦‚é“å®¶æ€æƒ³ï¼šâ€œä¸Šå–„è‹¥æ°´ï¼Œæ°´å–„åˆ©ä¸‡ç‰©è€Œä¸äº‰ã€‚â€<br/>
JS çš„åŸå‹é“¾ï¼Œä¹Ÿæ˜¯ä¸€ç§â€œæ— ä¸ºè€Œæ²»â€çš„å§”æ‰˜ä¹‹é“ã€‚</p>
<hr/>
<h2 data-id="heading-6">ç»“è¯­</h2>
<p>ä¸‹æ¬¡å½“ä½ å†™ä¸‹ <code>new Car()</code> æ—¶ï¼Œä¸å¦¨æƒ³æƒ³ï¼š<br/>
ä½ ä¸ä»…åˆ›å»ºäº†ä¸€ä¸ªå¯¹è±¡ï¼Œè¿˜å¼€å¯äº†ä¸€æ®µ<strong>æ²¿ç€åŸå‹é“¾å‘ä¸Šå§”æ‰˜çš„æ—…ç¨‹</strong>ã€‚<br/>
è€Œé‚£è¾†å°ç±³ SU7ï¼Œæˆ–è®¸ä¸åœ¨å±•å…ï¼Œè€Œåœ¨ <code>Car.prototype</code> çš„æ·±å¤„ï¼Œé™é™ç­‰å¾…è¢«â€œé©±åŠ¨â€ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ææ‡‚è™šæ‹Ÿåˆ—è¡¨å®ç°åŸç†ä¸æ­¥éª¤]]></title>    <link>https://juejin.cn/post/7576676694784884770</link>    <guid>https://juejin.cn/post/7576676694784884770</guid>    <pubDate>2025-11-26T12:31:34.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576676694784884770" data-draft-id="7576556950332571648" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ææ‡‚è™šæ‹Ÿåˆ—è¡¨å®ç°åŸç†ä¸æ­¥éª¤"/> <meta itemprop="keywords" content="å‰ç«¯,Vue.js"/> <meta itemprop="datePublished" content="2025-11-26T12:31:34.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¹è§‚çš„ç”¨æˆ·"/> <meta itemprop="url" content="https://juejin.cn/user/1240661432993518"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ææ‡‚è™šæ‹Ÿåˆ—è¡¨å®ç°åŸç†ä¸æ­¥éª¤
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1240661432993518/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¹è§‚çš„ç”¨æˆ·
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T12:31:34.000Z" title="Wed Nov 26 2025 12:31:34 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body .octicon{display:inline-block;fill:currentColor;vertical-align:text-bottom}.markdown-body .anchor{float:left;line-height:1;margin-left:-20px;padding-right:4px}.markdown-body .anchor:focus{outline:none}.markdown-body h1 .octicon-link,.markdown-body h2 .octicon-link,.markdown-body h3 .octicon-link,.markdown-body h4 .octicon-link,.markdown-body h5 .octicon-link,.markdown-body h6 .octicon-link{color:#1b1f23;vertical-align:middle;visibility:hidden}.markdown-body h1:hover .anchor,.markdown-body h2:hover .anchor,.markdown-body h3:hover .anchor,.markdown-body h4:hover .anchor,.markdown-body h5:hover .anchor,.markdown-body h6:hover .anchor{text-decoration:none}.markdown-body h1:hover .anchor .octicon-link,.markdown-body h2:hover .anchor .octicon-link,.markdown-body h3:hover .anchor .octicon-link,.markdown-body h4:hover .anchor .octicon-link,.markdown-body h5:hover .anchor .octicon-link,.markdown-body h6:hover .anchor .octicon-link{visibility:visible}.markdown-body h1:hover .anchor .octicon-link:before,.markdown-body h2:hover .anchor .octicon-link:before,.markdown-body h3:hover .anchor .octicon-link:before,.markdown-body h4:hover .anchor .octicon-link:before,.markdown-body h5:hover .anchor .octicon-link:before,.markdown-body h6:hover .anchor .octicon-link:before{width:16px;height:16px;content:" ";display:inline-block;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' aria-hidden='true'%3E%3Cpath fill-rule='evenodd' d='M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z'/%3E%3C/svg%3E")}.markdown-body{-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;color:#24292e;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;font-size:16px;line-height:1.5;word-wrap:break-word}.markdown-body details{display:block}.markdown-body summary{display:list-item}.markdown-body a{background-color:initial}.markdown-body a:active,.markdown-body a:hover{outline-width:0}.markdown-body strong{font-weight:inherit;font-weight:bolder}.markdown-body h1{margin:.67em 0}.markdown-body img{border-style:none}.markdown-body code,.markdown-body kbd,.markdown-body pre{font-family:monospace,monospace;font-size:1em}.markdown-body hr{box-sizing:initial;overflow:visible}.markdown-body input{font:inherit;margin:0;overflow:visible}.markdown-body [type=checkbox]{box-sizing:border-box;padding:0}.markdown-body *{box-sizing:border-box}.markdown-body input{font-family:inherit;font-size:inherit;line-height:inherit}.markdown-body a{color:#0366d6;text-decoration:none}.markdown-body a:hover{text-decoration:underline}.markdown-body strong{font-weight:600}.markdown-body hr{height:0;margin:15px 0;overflow:hidden;background:transparent;border-bottom:1px solid #dfe2e5}.markdown-body hr:after,.markdown-body hr:before{display:table;content:""}.markdown-body hr:after{clear:both}.markdown-body table{border-spacing:0;border-collapse:collapse}.markdown-body td,.markdown-body th{padding:0}.markdown-body details summary{cursor:pointer}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin-top:0;margin-bottom:0}.markdown-body h1{font-size:32px}.markdown-body h1,.markdown-body h2{font-weight:600}.markdown-body h2{font-size:24px}.markdown-body h3{font-size:20px}.markdown-body h3,.markdown-body h4{font-weight:600}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:14px}.markdown-body h5,.markdown-body h6{font-weight:600}.markdown-body h6{font-size:12px}.markdown-body p{margin-top:0;margin-bottom:10px}.markdown-body blockquote{margin:0}.markdown-body ol,.markdown-body ul{padding-left:0;margin-top:0;margin-bottom:0}.markdown-body ol ol,.markdown-body ul ol{list-style-type:lower-roman}.markdown-body ol ol ol,.markdown-body ol ul ol,.markdown-body ul ol ol,.markdown-body ul ul ol{list-style-type:lower-alpha}.markdown-body dd{margin-left:0}.markdown-body code,.markdown-body pre{font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:12px}.markdown-body pre{margin-top:0;margin-bottom:0}.markdown-body input::-webkit-inner-spin-button,.markdown-body input::-webkit-outer-spin-button{margin:0;-webkit-appearance:none;appearance:none}.markdown-body :checked+.radio-label{position:relative;z-index:1;border-color:#0366d6}.markdown-body .border{border:1px solid #e1e4e8!important}.markdown-body .border-0{border:0!important}.markdown-body .border-bottom{border-bottom:1px solid #e1e4e8!important}.markdown-body .rounded-1{border-radius:3px!important}.markdown-body .bg-white{background-color:#fff!important}.markdown-body .bg-gray-light{background-color:#fafbfc!important}.markdown-body .text-gray-light{color:#6a737d!important}.markdown-body .pl-3,.markdown-body .px-3{padding-left:16px!important}.markdown-body .px-3{padding-right:16px!important}.markdown-body .f6{font-size:12px!important}.markdown-body .lh-condensed{line-height:1.25!important}.markdown-body .text-bold{font-weight:600!important}.markdown-body .pl-c{color:#6a737d}.markdown-body .pl-c1,.markdown-body .pl-s .pl-v{color:#005cc5}.markdown-body .pl-e,.markdown-body .pl-en{color:#6f42c1}.markdown-body .pl-s .pl-s1,.markdown-body .pl-smi{color:#24292e}.markdown-body .pl-ent{color:#22863a}.markdown-body .pl-k{color:#d73a49}.markdown-body .pl-pds,.markdown-body .pl-s,.markdown-body .pl-s .pl-pse .pl-s1,.markdown-body .pl-sr,.markdown-body .pl-sr .pl-cce,.markdown-body .pl-sr .pl-sra,.markdown-body .pl-sr .pl-sre{color:#032f62}.markdown-body .pl-smw,.markdown-body .pl-v{color:#e36209}.markdown-body .pl-bu{color:#b31d28}.markdown-body .pl-ii{color:#fafbfc;background-color:#b31d28}.markdown-body .pl-c2{color:#fafbfc;background-color:#d73a49}.markdown-body .pl-c2:before{content:"^M"}.markdown-body .pl-sr .pl-cce{font-weight:700;color:#22863a}.markdown-body .pl-ml{color:#735c0f}.markdown-body .pl-mh,.markdown-body .pl-mh .pl-en,.markdown-body .pl-ms{font-weight:700;color:#005cc5}.markdown-body .pl-mi{font-style:italic;color:#24292e}.markdown-body .pl-mb{font-weight:700;color:#24292e}.markdown-body .pl-md{color:#b31d28;background-color:#ffeef0}.markdown-body .pl-mi1{color:#22863a;background-color:#f0fff4}.markdown-body .pl-mc{color:#e36209;background-color:#ffebda}.markdown-body .pl-mi2{color:#f6f8fa;background-color:#005cc5}.markdown-body .pl-mdr{font-weight:700;color:#6f42c1}.markdown-body .pl-ba{color:#586069}.markdown-body .pl-sg{color:#959da5}.markdown-body .pl-corl{text-decoration:underline;color:#032f62}.markdown-body .mb-0{margin-bottom:0!important}.markdown-body .my-2{margin-bottom:8px!important;margin-top:8px!important}.markdown-body .pl-0{padding-left:0!important}.markdown-body .py-0{padding-top:0!important;padding-bottom:0!important}.markdown-body .pl-1{padding-left:4px!important}.markdown-body .pl-2{padding-left:8px!important}.markdown-body .py-2{padding-top:8px!important;padding-bottom:8px!important}.markdown-body .pl-3{padding-left:16px!important}.markdown-body .pl-4{padding-left:24px!important}.markdown-body .pl-5{padding-left:32px!important}.markdown-body .pl-6{padding-left:40px!important}.markdown-body .pl-7{padding-left:48px!important}.markdown-body .pl-8{padding-left:64px!important}.markdown-body .pl-9{padding-left:80px!important}.markdown-body .pl-10{padding-left:96px!important}.markdown-body .pl-11{padding-left:112px!important}.markdown-body .pl-12{padding-left:128px!important}.markdown-body hr{border-bottom-color:#eee}.markdown-body kbd{display:inline-block;padding:3px 5px;font:11px SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;line-height:10px;color:#444d56;vertical-align:middle;background-color:#fafbfc;border:1px solid #d1d5da;border-radius:3px;box-shadow:inset 0 -1px 0 #d1d5da}.markdown-body:after,.markdown-body:before{display:table;content:""}.markdown-body:after{clear:both}.markdown-body&gt;:first-child{margin-top:0!important}.markdown-body&gt;:last-child{margin-bottom:0!important}.markdown-body a:not([href]){color:inherit;text-decoration:none}.markdown-body blockquote,.markdown-body details,.markdown-body dl,.markdown-body ol,.markdown-body p,.markdown-body pre,.markdown-body table,.markdown-body ul{margin-top:0;margin-bottom:16px}.markdown-body hr{height:.25em;padding:0;margin:24px 0;background-color:#e1e4e8;border:0}.markdown-body blockquote{padding:0 1em;color:#6a737d;border-left:.25em solid #dfe2e5}.markdown-body blockquote&gt;:first-child{margin-top:0}.markdown-body blockquote&gt;:last-child{margin-bottom:0}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin-top:24px;margin-bottom:16px;font-weight:600;line-height:1.25}.markdown-body h1{font-size:2em}.markdown-body h1,.markdown-body h2{padding-bottom:.3em;border-bottom:1px solid #eaecef}.markdown-body h2{font-size:1.5em}.markdown-body h3{font-size:1.25em}.markdown-body h4{font-size:1em}.markdown-body h5{font-size:.875em}.markdown-body h6{font-size:.85em;color:#6a737d}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:0;margin-bottom:0}.markdown-body li{word-wrap:break-all}.markdown-body li&gt;p{margin-top:16px}.markdown-body li+li{margin-top:.25em}.markdown-body dl{padding:0}.markdown-body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:600}.markdown-body dl dd{padding:0 16px;margin-bottom:16px}.markdown-body table{display:block;width:100%;overflow:auto}.markdown-body table th{font-weight:600}.markdown-body table td,.markdown-body table th{padding:6px 13px;border:1px solid #dfe2e5}.markdown-body table tr{background-color:#fff;border-top:1px solid #c6cbd1}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}.markdown-body img{max-width:100%;box-sizing:initial;background-color:#fff}.markdown-body img[align=right]{padding-left:20px}.markdown-body img[align=left]{padding-right:20px}.markdown-body code{padding:.2em .4em;margin:0;font-size:85%;background-color:rgba(27,31,35,.05);border-radius:3px}.markdown-body pre{word-wrap:normal}.markdown-body pre&gt;code{padding:0;margin:0;font-size:100%;word-break:normal;white-space:pre;background:transparent;border:0}.markdown-body .highlight{margin-bottom:16px}.markdown-body .highlight pre{margin-bottom:0;word-break:normal}.markdown-body .highlight pre,.markdown-body pre{padding:16px;overflow:auto;font-size:85%;line-height:1.45;background-color:#f6f8fa;border-radius:3px}.markdown-body pre code{display:inline;max-width:auto;padding:0;margin:0;overflow:visible;line-height:inherit;word-wrap:normal;background-color:initial;border:0}.markdown-body .commit-tease-sha{display:inline-block;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:90%;color:#444d56}.markdown-body .full-commit .btn-outline:not(:disabled):hover{color:#005cc5;border-color:#005cc5}.markdown-body .blob-wrapper{overflow-x:auto;overflow-y:hidden}.markdown-body .blob-wrapper-embedded{max-height:240px;overflow-y:auto}.markdown-body .blob-num{width:1%;min-width:50px;padding-right:10px;padding-left:10px;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:12px;line-height:20px;color:rgba(27,31,35,.3);text-align:right;white-space:nowrap;vertical-align:top;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.markdown-body .blob-num:hover{color:rgba(27,31,35,.6)}.markdown-body .blob-num:before{content:attr(data-line-number)}.markdown-body .blob-code{position:relative;padding-right:10px;padding-left:10px;line-height:20px;vertical-align:top}.markdown-body .blob-code-inner{overflow:visible;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:12px;color:#24292e;word-wrap:normal;white-space:pre}.markdown-body .pl-token.active,.markdown-body .pl-token:hover{cursor:pointer;background:#ffea7f}.markdown-body .tab-size[data-tab-size="1"]{-moz-tab-size:1;tab-size:1}.markdown-body .tab-size[data-tab-size="2"]{-moz-tab-size:2;tab-size:2}.markdown-body .tab-size[data-tab-size="3"]{-moz-tab-size:3;tab-size:3}.markdown-body .tab-size[data-tab-size="4"]{-moz-tab-size:4;tab-size:4}.markdown-body .tab-size[data-tab-size="5"]{-moz-tab-size:5;tab-size:5}.markdown-body .tab-size[data-tab-size="6"]{-moz-tab-size:6;tab-size:6}.markdown-body .tab-size[data-tab-size="7"]{-moz-tab-size:7;tab-size:7}.markdown-body .tab-size[data-tab-size="8"]{-moz-tab-size:8;tab-size:8}.markdown-body .tab-size[data-tab-size="9"]{-moz-tab-size:9;tab-size:9}.markdown-body .tab-size[data-tab-size="10"]{-moz-tab-size:10;tab-size:10}.markdown-body .tab-size[data-tab-size="11"]{-moz-tab-size:11;tab-size:11}.markdown-body .tab-size[data-tab-size="12"]{-moz-tab-size:12;tab-size:12}.markdown-body .task-list-item{list-style-type:none}.markdown-body .task-list-item+.task-list-item{margin-top:3px}.markdown-body .task-list-item input{margin:0 .2em .25em -1.6em;vertical-align:middle}</style><style data-highlight="" data-highlight-key="an-old-hope">.hljs-comment,.hljs-quote{color:#b6b18b}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#eb3c54}.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#e7ce56}.hljs-attribute{color:#ee7c2b}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:#4fb4d7}.hljs-section,.hljs-title{color:#78bb65}.hljs-keyword,.hljs-selector-tag{color:#b45ea4}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#1c1d21;color:#c0c5ce}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><code>è™šæ‹Ÿåˆ—è¡¨å·²ç»è¯´çƒ‚äº†ï¼Œæ­¤ç¯‡æ–‡ç« ä»…ä½œè®°å½•ä½¿ç”¨ï¼Œé€šä¿—çš„æ‹†è§£æ¯ä¸€æ­¥çš„é€»è¾‘å’Œæ¯ä¸€ä¸ªå˜é‡çš„æ„ä¹‰ã€‚</code></p>
<h3 data-id="heading-0">ä¸€ã€åŸç†å’ŒåŸºæœ¬æ„æˆ</h3>
<p>é¦–å…ˆï¼Œè™šæ‹Ÿæ»šåŠ¨å°±æ˜¯ä¸ºäº†è§£å†³æ¸²æŸ“å¤§é‡æ•°æ®åˆ°é¡µé¢ä¸Šé€ æˆçš„æ€§èƒ½é—®é¢˜ï¼Œä¸€åƒä¸ªdomå…ƒç´ åŒæ—¶æ¸²æŸ“åˆ°é¡µé¢ä¸Šå¿…ç„¶å‡ºç°å¡é¡¿ï¼Œä½†æ˜¯ä¸€åƒæ¡æˆ–è€…ä¸€ä¸‡æ¡çœŸçš„æ¸²æŸ“å‡ºæ¥äº†ï¼Œä¸€èˆ¬çš„æ˜¾ç¤ºå™¨ä¹Ÿæ˜¯æ˜¾ç¤ºä¸å‡ºæ¥çš„ï¼Œé‚£æˆ‘ä»¬èƒ½ä¸èƒ½åªæ¸²æŸ“å¯è§†åŒºåŸŸä¸­å‡ºç°çš„æ•°æ®ç¼©å°æ¸²æŸ“æ•°æ®é‡å‘¢ï¼Œæ¯”å¦‚æˆ‘çš„å¯è§†åŒºåŸŸåªèƒ½å±•ç¤ºåæ¡ï¼Œé‚£æˆ‘æŠŠè¿™åæ¡æ‹¿å‡ºæ¥åªæ¸²æŸ“è¿™åæ¡ä¸å°±å¥½äº†ã€‚é‚£è¿™ç§è™šæ‹Ÿåˆ—è¡¨å°±åº”è¿è€Œç”Ÿäº†ã€‚</p>
<p>ä»–çš„ç»“æ„å¦‚ä¸‹å›¾ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/91f69f4706f847e297765ab579296ff7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LmQ6KeC55qE55So5oi3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764765093&amp;x-signature=wU2mvPPfukMpVNEhiFI0e8C25tw%3D" alt="image.png" loading="lazy"/></p>
<p>æ²¡çœ‹æ‡‚æ²¡å…³ç³»ï¼Œå®ƒçš„ç»“æ„ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-js" lang="js">&lt;template&gt;
 &lt;!-- å¯è§†åŒºåŸŸ --&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"virtua_main"</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- è™šæ‹Ÿå…ƒç´  --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"occupy_pace"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
     <span class="hljs-comment">&lt;!-- å†…å®¹åŒºåŸŸ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"virtua_content"</span>&gt;</span>
     
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"virtua_item"</span>&gt;</span>
        item1
      <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/template&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.virtua_main</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">500px</span>;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">500px</span>;
  <span class="hljs-attribute">overflow-y</span>: auto;
  <span class="hljs-attribute">position</span>: relative;
  <span class="hljs-attribute">background</span>: greenyellow;
  <span class="hljs-attribute">color</span>: red;
}

<span class="hljs-selector-class">.virtua_content</span> {
  <span class="hljs-attribute">position</span>: absolute;
  <span class="hljs-attribute">top</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">left</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
}

<span class="hljs-selector-class">.virtua_item</span> {
  <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#e0e0e0</span>;
  <span class="hljs-attribute">box-sizing</span>: border-box;
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></span>
</code></pre>
<p>é¦–å…ˆæ˜ç¡®ï¼Œå¯è§†åŒºåŸŸï¼ˆvirtua_mainï¼‰çš„é«˜åº¦æ˜¯å›ºå®šçš„ï¼Œè¶…å‡ºé«˜åº¦å‡ºç°æ»šåŠ¨æ¡ï¼Œæ‰€ä»¥éœ€è¦ä¸€ä¸ªè™šæ‹Ÿå…ƒç´ ï¼ˆoccupy_paceï¼‰æ’‘èµ·é«˜åº¦ä»è€Œæ˜¾ç¤ºæ»šåŠ¨æ¡ï¼Œè€Œä¸”æ»šåŠ¨é«˜åº¦è¦ä¸æ•°æ®æ¡æ•°ç›¸åŒ¹é…ã€‚å†…å®¹åŒºåŸŸï¼ˆvirtua_contentï¼‰é€šè¿‡ç»å¯¹å®šä½è¦†ç›–åœ¨è™šæ‹Ÿå…ƒç´ ä¹‹ä¸Šã€‚</p>
<h3 data-id="heading-1">äºŒã€éœ€è¦æ€è€ƒçš„å‡ ä¸ªæ•°å­—</h3>
<p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œåªæœ‰å¯è§†åŒºåŸŸçš„é«˜åº¦æ˜¯å›ºå®šçš„ï¼Œé‚£ä¹ˆå†…å®¹åŒºåŸŸçš„é«˜åº¦å‘¢ï¼Œè™šæ‹Ÿå…ƒç´ çš„é«˜åº¦å‘¢ï¼›ä¸‹é¢åˆ—é˜µï¼š</p>
<blockquote>
<p>å†…å®¹åŒºåŸŸçš„é«˜åº¦ = è¦å±•ç¤ºçš„æ¡æ•° * æ¯ä¸€æ¡å†…å®¹çš„é«˜åº¦</p>
<p>è™šæ‹Ÿå…ƒç´ çš„é«˜åº¦ = éœ€è¦æ¸²æŸ“æ•°ç»„çš„æ€»é•¿åº¦ * æ¯ä¸€æ¡å†…å®¹çš„é«˜åº¦</p>
<p>æˆªå–å±•ç¤ºå†…å®¹æ•°æ®å¼€å§‹çš„ç´¢å¼• = æ»šåŠ¨æ¡ç§»åŠ¨çš„é«˜åº¦ / æ¯ä¸€æ¡å†…å®¹çš„é«˜åº¦</p>
<p>æˆªå–å±•ç¤ºå†…å®¹æ•°æ®ç»“æŸçš„ç´¢å¼• = æˆªå–å±•ç¤ºå†…å®¹æ•°æ®å¼€å§‹çš„ç´¢å¼• + è¦å±•ç¤ºçš„æ¡æ•°</p>
</blockquote>
<h3 data-id="heading-2">ä¸‰ã€ä»£ç å®ç°åŸºç¡€é€»è¾‘</h3>
<p>è™½ç„¶ä½†æ˜¯é‚£æˆ‘è¿˜æ˜¯ä¸çŸ¥é“ï¼Œè¦å±•ç¤ºçš„æ¡æ•°ã€æ¯ä¸€æ¡å†…å®¹çš„é«˜åº¦ã€æ»šåŠ¨æ¡ç§»åŠ¨çš„é«˜åº¦ã€éœ€è¦æ¸²æŸ“æ•°ç»„çš„æ€»é•¿åº¦ä»å“ªé‡Œæ¥å‘¢ï¼Ÿé‚£è¿˜æ˜¯ç›´æ¥ä¸Šä»£ç å§ğŸ™„ğŸ™„ğŸ™„</p>
<pre><code class="hljs language-js" lang="js">&lt;template&gt;
  &lt;!-- å¯è§†åŒºåŸŸ --&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"virtua_main"</span> @<span class="hljs-attr">scroll</span>=<span class="hljs-string">"onScroll"</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- è™šæ‹Ÿå…ƒç´  --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"occupy_pace"</span> <span class="hljs-attr">:style</span>=<span class="hljs-string">"{ height: virtualHeight }"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- å†…å®¹åŒºåŸŸ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>
      <span class="hljs-attr">class</span>=<span class="hljs-string">"virtua_content"</span>
      <span class="hljs-attr">:style</span>=<span class="hljs-string">"{ height: contentHeight, '--row-height': rowHeight + 'px' }"</span>
    &gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"virtua_item"</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">"item in visibleItems"</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">"item.id"</span>&gt;</span>
        {{ item.label }}
      <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/template&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { ref } <span class="hljs-keyword">from</span> <span class="hljs-string">"vue"</span>;
<span class="hljs-comment">//æ¨¡æ‹Ÿä¸€åƒæ¡æ•°æ®</span>
<span class="hljs-keyword">const</span> allList = <span class="hljs-title function_">ref</span>(
  <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>({ <span class="hljs-attr">length</span>: <span class="hljs-number">1000</span> }).<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">_, index</span>) =&gt;</span> ({
    <span class="hljs-attr">id</span>: index,
    <span class="hljs-attr">label</span>: <span class="hljs-string">`Item <span class="hljs-subst">${index + <span class="hljs-number">1</span>}</span>`</span>,
  }))
);
<span class="hljs-comment">//å¯è§†åŒºåŸŸæ˜¾ç¤ºæ¡æ•°</span>
<span class="hljs-keyword">const</span> showSize = <span class="hljs-title function_">ref</span>(<span class="hljs-number">10</span>);
<span class="hljs-comment">//æ¯è¡Œé«˜åº¦</span>
<span class="hljs-keyword">const</span> rowHeight = <span class="hljs-title function_">ref</span>(<span class="hljs-number">50</span>);
<span class="hljs-comment">//å½“å‰æ»šåŠ¨é«˜åº¦</span>
<span class="hljs-keyword">const</span> scrollTop = <span class="hljs-title function_">ref</span>(<span class="hljs-number">0</span>);
<span class="hljs-comment">//è™šæ‹Ÿå…ƒç´ é«˜åº¦</span>
<span class="hljs-keyword">const</span> virtualHeight = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">return</span> allList.<span class="hljs-property">value</span>.<span class="hljs-property">length</span> * rowHeight.<span class="hljs-property">value</span> + <span class="hljs-string">"px"</span>;
});
<span class="hljs-comment">//å†…å®¹åŒºé«˜åº¦</span>
<span class="hljs-keyword">const</span> contentHeight = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">return</span> showSize.<span class="hljs-property">value</span> * rowHeight.<span class="hljs-property">value</span> + <span class="hljs-string">"px"</span>;
});
<span class="hljs-comment">//æˆªå–å±•ç¤ºå†…å®¹æ•°æ®å¼€å§‹çš„ç´¢å¼•</span>
<span class="hljs-keyword">const</span> startIndex = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-comment">//å¼€å§‹çš„ç´¢å¼•è¦è€ƒè™‘è¾¹ç•Œé—®é¢˜ï¼Œä¸èƒ½æ¯”0å°ï¼ŒåŒæ—¶ä¸èƒ½å¤§äºæ•°æ®æ€»é•¿åº¦å‡æ˜¾ç¤ºæ¡æ•°</span>
  <span class="hljs-comment">//ä½¿ç”¨floorå‘ä¸‹å–æ•´æ•°</span>
  <span class="hljs-keyword">const</span> index = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(scrollTop.<span class="hljs-property">value</span> / rowHeight.<span class="hljs-property">value</span>);
  <span class="hljs-keyword">const</span> maxStartIndex = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(<span class="hljs-number">0</span>, allList.<span class="hljs-property">value</span>.<span class="hljs-property">length</span> - showSize.<span class="hljs-property">value</span>);
  <span class="hljs-keyword">return</span> <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(index, maxStartIndex);
});
<span class="hljs-comment">//æˆªå–å±•ç¤ºå†…å®¹æ•°æ®ç»“æŸçš„ç´¢å¼•</span>
<span class="hljs-keyword">const</span> endIndex = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-comment">//ä¹Ÿæœ‰è¾¹ç•Œé—®é¢˜ï¼Œä¸èƒ½å¤§äºæ•°æ®æ€»é•¿åº¦</span>
  <span class="hljs-keyword">return</span> <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(startIndex.<span class="hljs-property">value</span> + showSize.<span class="hljs-property">value</span>, allList.<span class="hljs-property">value</span>.<span class="hljs-property">length</span>);
});
<span class="hljs-comment">//å†…å®¹åŒºåŸŸå±•ç¤ºçš„æ•°æ®,ä»æ‰€æœ‰æ•°æ®ä¸­æˆªå–showSizeæ¡</span>
<span class="hljs-keyword">const</span> visibleItems = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">return</span> allList.<span class="hljs-property">value</span>.<span class="hljs-title function_">slice</span>(startIndex.<span class="hljs-property">value</span>, endIndex.<span class="hljs-property">value</span>);
});
<span class="hljs-comment">//æ»šåŠ¨äº‹ä»¶</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">onScroll</span> = (<span class="hljs-params">event</span>) =&gt; {
  <span class="hljs-comment">//å°†æ–°çš„æ»šåŠ¨ä½ç½®èµ‹å€¼ç»™scrollTopï¼Œé©±åŠ¨æ›´æ–°startIndexï¼ŒendIndexå’ŒvisibleItems</span>
  scrollTop.<span class="hljs-property">value</span> = event.<span class="hljs-property">target</span>.<span class="hljs-property">scrollTop</span>;
};
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.virtua_main</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">300px</span>;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">500px</span>;
  <span class="hljs-attribute">overflow-y</span>: auto;
  <span class="hljs-attribute">position</span>: relative;
  <span class="hljs-attribute">background</span>: <span class="hljs-number">#e0e0e0</span>;
  <span class="hljs-attribute">color</span>: red;
}

<span class="hljs-selector-class">.virtua_content</span> {
  <span class="hljs-attribute">position</span>: absolute;
  <span class="hljs-attribute">top</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">left</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
}

<span class="hljs-selector-class">.virtua_item</span> {
  <span class="hljs-attribute">height</span>: <span class="hljs-built_in">var</span>(--row-height);
  <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#000</span>;
  <span class="hljs-attribute">box-sizing</span>: border-box;
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></span>

</code></pre>
<p>è¿™æ ·æ›´ç›´è§‚çš„å›ç­”äº†æ•°æ®ä»å“ªæ¥ã€å¦‚ä½•è®¡ç®—ã€å¦‚ä½•ä½¿ç”¨ã€ä½•æ—¶æ›´æ–°çš„é—®é¢˜ã€‚<strong>ä½†æ˜¯ä½†æ˜¯ä½†æ˜¯</strong>å¦‚æœè¿™æ ·å†™äº†ä¹‹åä¼šå‘ç°ä¸€ä¸ªé—®é¢˜ï¼Œå†…å®¹æ•°æ®ç¡®å®ä¸€ç›´åœ¨å˜ï¼Œä½†æ˜¯å†…å®¹åŒºåŸŸæ€ä¹ˆä¸Šå»äº†ï¼Œä½ç½®ä¸å¯¹ï¼Œå¦‚å›¾ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/675513e1dfb64b7fb5233902181188d1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LmQ6KeC55qE55So5oi3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764765093&amp;x-signature=lQXkxIZDogAD0qMDbcDJl1QWjVw%3D" alt="å˜»å˜»å˜».gif" loading="lazy"/></p>
<p>ä¸Šå›¾å‡ºç°çš„åŸå› æ˜¯å› ä¸ºè™½ç„¶å†…å®¹åŒºåŸŸå·²ç»å¼€å¯äº†å®šä½ï¼Œä½†æ˜¯å®ƒå¤„äºvirtua_mainçš„æ»šåŠ¨ç©ºé—´ä¹‹ä¸­ï¼Œæ‰€ä»¥ä¹Ÿä¼šéšç€æ»šåŠ¨ï¼Œé‚£è¿™æ ·ï¼Œæ—¢ç„¶ä»–è¦å‘ä¸Šæ»šåŠ¨ï¼Œé‚£æˆ‘ä»¬å°±å†åŠ ä¸€æ­¥ï¼Œæ‰‹åŠ¨é€šè¿‡transform:translateY()æŠŠä»–çºµå‘å‘ä¸‹ç§»åŠ¨ï¼Œé‚£ä¹ˆåº”è¯¥ç§»åŠ¨çš„è·ç¦»æ€ä¹ˆè®¡ç®—å‘¢ï¼Œç†ä¸€ç†ï¼Œ<code>æ¯”å¦‚å½“å‰ä»0åˆ°19å±•ç¤ºäº†10æ¡ï¼Œæˆ‘ä»¬å‘ä¸‹æ»šåŠ¨åˆ°1æ­¤æ—¶0éšè—äº†ï¼Œé‚£ä»–æ˜¯ä¸æ˜¯å°±å‘ä¸Šæ»šåŠ¨äº†1 * rowHeightçš„è·ç¦»å‘¢ï¼Œ1æ˜¯å½“å‰åˆ‡å‰²æ•°æ®çš„å¼€å§‹ç´¢å¼•ï¼Œç”±æ­¤æ¨æ–­ ä½ç§»è·ç¦» = startIndex * rowHeight==</code>ã€‚</p>
<p><code>åœ¨æ»šåŠ¨äº‹ä»¶å¢åŠ è¿™ä¹ˆä¸€è¡Œ</code></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">//é€šè¿‡refçš„æ–¹å¼å–åˆ°å†…å®¹åŒºåŸŸ</span>
<span class="hljs-keyword">const</span> virtuaContent = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">null</span>)
<span class="hljs-comment">//æ»šåŠ¨äº‹ä»¶</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">onScroll</span> = (<span class="hljs-params">event</span>) =&gt; {
  <span class="hljs-comment">//å°†æ–°çš„æ»šåŠ¨ä½ç½®èµ‹å€¼ç»™scrollTopï¼Œé©±åŠ¨æ›´æ–°startIndexï¼ŒendIndexå’ŒvisibleItems</span>
  scrollTop.<span class="hljs-property">value</span> = event.<span class="hljs-property">target</span>.<span class="hljs-property">scrollTop</span>;
  <span class="hljs-comment">//å‘ä¸‹ä½ç§»æ©ç›–ç©ºç™½</span>
  virtuaContent.<span class="hljs-property">value</span>.<span class="hljs-property">style</span>.<span class="hljs-property">transform</span> = <span class="hljs-string">`translateY(<span class="hljs-subst">${
    startIndex.value * rowHeight.value
  }</span>px)`</span>;
};
</code></pre>
<p>ç›®å‰ä¸ºæ­¢ï¼Œå®Œæˆäº†ä¸€ä¸ªåŸºç¡€çš„è™šæ‹Ÿæ»šåŠ¨ã€‚</p>
<h3 data-id="heading-3">å››ã€ç»†èŠ‚é—®é¢˜</h3>
<h4 data-id="heading-4">1.ç©ºç™½</h4>
<p>å¤§å®¶æ˜¯å¦æƒ³è¿‡ï¼Œå¦‚æœæˆ‘æ»šåŠ¨é«˜åº¦æŒªåˆ°äº†ä¸€ä¸ªä¸èƒ½æ•´é™¤rowHeightçš„æ•°å­—æ€ä¹ˆåŠï¼Œå½“ç„¶æˆ‘ä»¬ä½¿ç”¨äº†<code>Math.floor</code>å‘ä¸‹å–æ•´ï¼Œæ¯”å¦‚æˆ‘æŒªåŠ¨åˆ°äº†624ï¼Œæˆ‘è®¾ç½®çš„rowHeightæ˜¯50ï¼Œ<code>startIndex = 624 / 50</code>ç»“æœæ˜¯12.48,<code>Math.floor(12.48)</code>å¾—å‡º12ï¼Œå¾ˆå¥½æ•°å­—æ²¡æœ‰é—®é¢˜ï¼Œä½†æ˜¯æˆ‘ä»¬ä½¿ç”¨<code>transform</code>è¿›è¡Œä½ç§»æ˜¯ç”¨12 * 50å¾—600ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘å‘ä¸Šæ»šåŠ¨äº†624pxä½†æ˜¯å‘ä¸‹å´ä½ç§»äº†600pxï¼Œé‚£å°¾éƒ¨è‡ªç„¶ä¼šå‡ºç°24pxçš„ç©ºç™½ï¼Œå¦‚å›¾ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/aed9c9bb90474d248a568fd0424e4ac9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LmQ6KeC55qE55So5oi3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764765093&amp;x-signature=IGhixRpJcgz67PSvtBVxqaEbI4s%3D" alt="image.png" loading="lazy"/></p>
<blockquote>
<p>ä¸¤ç§è§£å†³æ–¹æ¡ˆ</p>
</blockquote>
<p>å…¶ä¸€ï¼Œç®€å•ç²—æš´ï¼Œç®—ä½ç§»è·ç¦»ç›´æ¥ç”¨scrollTopï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">//é€šè¿‡refçš„æ–¹å¼å–åˆ°å†…å®¹åŒºåŸŸ</span>
<span class="hljs-keyword">const</span> virtuaContent = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">null</span>)
<span class="hljs-comment">//æ»šåŠ¨äº‹ä»¶</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">onScroll</span> = (<span class="hljs-params">event</span>) =&gt; {
  <span class="hljs-comment">//å°†æ–°çš„æ»šåŠ¨ä½ç½®èµ‹å€¼ç»™scrollTopï¼Œé©±åŠ¨æ›´æ–°startIndexï¼ŒendIndexå’ŒvisibleItems</span>
  scrollTop.<span class="hljs-property">value</span> = event.<span class="hljs-property">target</span>.<span class="hljs-property">scrollTop</span>;
  <span class="hljs-comment">//å‘ä¸‹ä½ç§»æ©ç›–ç©ºç™½</span>
  virtuaContent.<span class="hljs-property">value</span>.<span class="hljs-property">style</span>.<span class="hljs-property">transform</span> = <span class="hljs-string">`translateY(<span class="hljs-subst">${
    (scrollTop.value / rowHeight.value) * rowHeight.value
  }</span>px)`</span>;
};
</code></pre>
<p>å…¶äºŒã€æ›´ç®€å•æ›´ç²—æš´ï¼Œå°¾éƒ¨å¤šåˆ‡å‡ æ¡æ•°æ®ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">//å®šä¹‰ç¼“å†²æ•°æ®å¤§å°</span>
<span class="hljs-keyword">const</span> buffer = <span class="hljs-number">3</span>;
<span class="hljs-comment">//æˆªå–å±•ç¤ºå†…å®¹æ•°æ®ç»“æŸçš„ç´¢å¼•</span>
<span class="hljs-keyword">const</span> endIndex = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-comment">//ä¹Ÿæœ‰è¾¹ç•Œé—®é¢˜ï¼Œä¸èƒ½å¤§äºæ•°æ®æ€»é•¿åº¦</span>
  <span class="hljs-comment">//æ¯æ¬¡å¤šåŠ è½½bufferæ¡æ•°æ®</span>
  <span class="hljs-keyword">return</span> <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(
    startIndex.<span class="hljs-property">value</span> + showSize.<span class="hljs-property">value</span> + buffer,
    allList.<span class="hljs-property">value</span>.<span class="hljs-property">length</span>
  );
});
</code></pre>
<blockquote>
<p>è¿™ä¸¤ç§æ–¹å¼éƒ½èƒ½ç”¨ï¼Œä½†ä½¿ç”¨ scrollTop ä¼šäº§ç”ŸåŠè¡Œé«˜åº¦ç©ºç™½ï¼Œéœ€è¦ buffer è¡¥é½</p>
</blockquote>
<h4 data-id="heading-5">2.åŠ è½½æ›´å¤š</h4>
<p>æˆ‘ä»¬åšåˆ°è¿™é‡ŒåŸºæœ¬èƒ½ç”¨äº†ï¼Œä½†æ˜¯éƒ½è¯´äº†å¤§æ•°æ®é‡äº†ï¼Œåªæœ‰ä¸€åƒæ¡å—ï¼Œæˆ‘æœ‰åä¸‡æ¡ï¼ä¸€ç™¾ä¸‡ï¼ä½†æ˜¯ä¸€ä¸ªæ¥å£è¿”å›ç»™ä½ è¿™ä¸ªè¯·æ±‚çš„æ—¶é—´æ˜¯ä¸æ˜¯æœ‰ç‚¹é•¿å‘¢ï¼Œé‚£ä¹ˆä¸€é¡µä¸€åƒæ¡æ‹‰åˆ°åº•éƒ¨ç»§ç»­åŠ è½½æ˜¯ä¸æ˜¯æå¥½çš„å‘¢ï¼Œå¦‚æœå†åŠ ä¸€ä¸ªç­‰å¾…æ•ˆæœæ˜¯ä¸æ˜¯æå¥½çš„å‘¢ã€‚å¦‚æœé©¬ä¸Šæ»‘åˆ°åº•éƒ¨å°±å‘é€è¯·æ±‚åˆ°åº•éƒ¨æ—¶æ•°æ®å·²ç»åŠ è½½å‡ºæ¥äº†æ˜¯ä¸æ˜¯å ªç§°å®Œç¾ï¼Œé‚£æˆ‘ä»¬æ¥å®ç°ä»–ã€‚</p>
<p>æƒ³ä¸€æƒ³ï¼Œæˆ‘ä»¬å¦‚ä½•æ¥åˆ¤æ–­è¦åˆ°åº•éƒ¨æˆ–è€…å³å°†åˆ°åº•éƒ¨äº†å‘¢ï¼Œæœ‰å°ä¼™ä¼´è¯´å¦‚æœscrollTopå¦‚æœå¤§äºç­‰äºè™šæ‹Ÿå…ƒç´ çš„æ€»é«˜ä¸å°±è¯´æ˜åˆ°åº•äº†å—ï¼Œno scrollTopå¯ä»¥ç†è§£ä¸ºè™šæ‹Ÿå…ƒç´ é¡¶éƒ¨åˆ°å¯è§†åŒºåŸŸé¡¶éƒ¨çš„è·ç¦»ï¼Œè¿˜å·®ä¸€ä¸ªå¯è§†åŒºåŸŸçš„é«˜åº¦ï¼Œæ‰€ä»¥ï¼Œ<code>scrollTop + clientHeight &gt;= virtualHeight</code>æ‰è¯´æ˜åˆ°åº•äº†ï¼Œæ­¤æ—¶èµ°è¿‡æ¥ä¸€ä¸ªè€ä¼™ä¼´é—®ï¼Œé‚£æˆ‘æ€ä¹ˆæ‰èƒ½å®ç°å³å°†åˆ°åº•æ—¶å°±å‘é€æ±‚æƒ…å‘¢ï¼Œé—®å¾—å¥½,æ¯”å¦‚æˆ‘ä»¬æƒ³è·ç¦»åº•éƒ¨100pxæ—¶å°±å‘é€è¯·æ±‚ï¼Œæˆ‘ä»¬åªè¦å†åŠ 100å°±å¥½äº†å‘€ï¼Œåˆåˆåˆæ¥äº†ä¸ªå°ä¸œè¥¿é—®åŠ è½½æ•ˆæœå‘¢ï¼Œé—®çš„ä¹Ÿå¥½ï¼Œä½†æ˜¯æ²¡æœ‰åˆšæ‰å¥½ï¼Œç­”ï¼šåªè¦åœ¨å†…å®¹åŒºæœ€ä¸‹æ–¹åŠ ä¸€æ¡å†…å®¹ç”¨ä¸€ä¸ªçŠ¶æ€æ¥æ§åˆ¶å®ƒçš„æ˜¾éšå°±å¥½äº†å‘€ã€‚å®Œæ•´ç‰ˆå¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-js" lang="js">&lt;template&gt;
  {{ <span class="hljs-string">`startindex:<span class="hljs-subst">${startIndex}</span>`</span> }}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{{
    <span class="hljs-string">`endIndex:<span class="hljs-subst">${endIndex}</span>`</span>
  }}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{{ <span class="hljs-string">`scrollTop:<span class="hljs-subst">${scrollTop}</span>`</span> }}
  {{ currentPage }}
  &lt;!-- å¯è§†åŒºåŸŸ --&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"virtua_main"</span> @<span class="hljs-attr">scroll</span>=<span class="hljs-string">"onScroll"</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- è™šæ‹Ÿå…ƒç´  --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"occupy_pace"</span> <span class="hljs-attr">:style</span>=<span class="hljs-string">"{ height: virtualHeight }"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- å†…å®¹åŒºåŸŸ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>
      <span class="hljs-attr">class</span>=<span class="hljs-string">"virtua_content"</span>
      <span class="hljs-attr">ref</span>=<span class="hljs-string">"virtuaContent"</span>
      <span class="hljs-attr">:style</span>=<span class="hljs-string">"{ height: contentHeight, '--row-height': rowHeight + 'px' }"</span>
    &gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"virtua_item"</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">"item in visibleItems"</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">"item.id"</span>&gt;</span>
        {{ item.label }}
      <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">"loading"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"virtua_item loading-indicator"</span>&gt;</span>åŠ è½½ä¸­ã€‚ã€‚ã€‚<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/template&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { ref } <span class="hljs-keyword">from</span> <span class="hljs-string">"vue"</span>;
<span class="hljs-comment">//æ¨¡æ‹Ÿä¸€åƒæ¡æ•°æ®</span>
<span class="hljs-keyword">const</span> allList = <span class="hljs-title function_">ref</span>(
  <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>({ <span class="hljs-attr">length</span>: <span class="hljs-number">1000</span> }).<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">_, index</span>) =&gt;</span> ({
    <span class="hljs-attr">id</span>: index,
    <span class="hljs-attr">label</span>: <span class="hljs-string">`Item <span class="hljs-subst">${index + <span class="hljs-number">1</span>}</span>`</span>,
  }))
);
<span class="hljs-comment">//å†…å®¹åŒºåŸŸå…ƒç´ </span>
<span class="hljs-keyword">const</span> virtuaContent = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">null</span>);
<span class="hljs-comment">//å¯è§†åŒºåŸŸæ˜¾ç¤ºæ¡æ•°</span>
<span class="hljs-keyword">const</span> showSize = <span class="hljs-title function_">ref</span>(<span class="hljs-number">10</span>);
<span class="hljs-comment">//æ¯è¡Œé«˜åº¦</span>
<span class="hljs-keyword">const</span> rowHeight = <span class="hljs-title function_">ref</span>(<span class="hljs-number">50</span>);
<span class="hljs-comment">//å½“å‰æ»šåŠ¨é«˜åº¦</span>
<span class="hljs-keyword">const</span> scrollTop = <span class="hljs-title function_">ref</span>(<span class="hljs-number">0</span>);
<span class="hljs-comment">//è™šæ‹Ÿå…ƒç´ é«˜åº¦</span>
<span class="hljs-keyword">const</span> virtualHeight = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">return</span> allList.<span class="hljs-property">value</span>.<span class="hljs-property">length</span> * rowHeight.<span class="hljs-property">value</span> + <span class="hljs-string">"px"</span>;
});
<span class="hljs-comment">//å†…å®¹åŒºé«˜åº¦</span>
<span class="hljs-keyword">const</span> contentHeight = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">return</span> showSize.<span class="hljs-property">value</span> * rowHeight.<span class="hljs-property">value</span> + <span class="hljs-string">"px"</span>;
});
<span class="hljs-comment">//æˆªå–å±•ç¤ºå†…å®¹æ•°æ®å¼€å§‹çš„ç´¢å¼•</span>
<span class="hljs-keyword">const</span> startIndex = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-comment">//å¼€å§‹çš„ç´¢å¼•è¦è€ƒè™‘è¾¹ç•Œé—®é¢˜ï¼Œä¸èƒ½æ¯”0å°ï¼ŒåŒæ—¶ä¸èƒ½å¤§äºæ•°æ®æ€»é•¿åº¦å‡æ˜¾ç¤ºæ¡æ•°</span>
  <span class="hljs-keyword">const</span> index = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(scrollTop.<span class="hljs-property">value</span> / rowHeight.<span class="hljs-property">value</span>);
  <span class="hljs-keyword">const</span> maxStartIndex = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(<span class="hljs-number">0</span>, allList.<span class="hljs-property">value</span>.<span class="hljs-property">length</span> - showSize.<span class="hljs-property">value</span>);
  <span class="hljs-keyword">return</span> <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(index, maxStartIndex);
});
<span class="hljs-comment">//å®šä¹‰ç¼“å†²æ•°æ®å¤§å°</span>
<span class="hljs-keyword">const</span> buffer = <span class="hljs-number">3</span>;
<span class="hljs-comment">//æˆªå–å±•ç¤ºå†…å®¹æ•°æ®ç»“æŸçš„ç´¢å¼•</span>
<span class="hljs-keyword">const</span> endIndex = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-comment">//ä¹Ÿæœ‰è¾¹ç•Œé—®é¢˜ï¼Œä¸èƒ½å¤§äºæ•°æ®æ€»é•¿åº¦</span>
  <span class="hljs-comment">//æ¯æ¬¡å¤šåŠ è½½bufferæ¡æ•°æ®</span>
  <span class="hljs-keyword">return</span> <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(
    startIndex.<span class="hljs-property">value</span> + showSize.<span class="hljs-property">value</span> + buffer,
    allList.<span class="hljs-property">value</span>.<span class="hljs-property">length</span>
  );
});
<span class="hljs-comment">//å†…å®¹åŒºåŸŸå±•ç¤ºçš„æ•°æ®,ä»æ‰€æœ‰æ•°æ®ä¸­æˆªå–showSizeæ¡</span>
<span class="hljs-keyword">const</span> visibleItems = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">return</span> allList.<span class="hljs-property">value</span>.<span class="hljs-title function_">slice</span>(startIndex.<span class="hljs-property">value</span>, endIndex.<span class="hljs-property">value</span>);
});
<span class="hljs-comment">//è®°å½•å½“å‰é¡µï¼Œæ¨¡æ‹ŸçŠ¶æ€ä¸‹æ²¡å•¥ç”¨ï¼ŒçœŸå®æƒ…å†µä¸‹è¦å‘é€ç»™åç«¯ä¸€èˆ¬è¿˜è¦å¸¦ä¸€ä¸ªpageSize</span>
<span class="hljs-keyword">const</span> currentPage = <span class="hljs-title function_">ref</span>(<span class="hljs-number">1</span>);
<span class="hljs-comment">//å®šä¹‰åŠ è½½çŠ¶æ€</span>
<span class="hljs-keyword">const</span> loading = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">false</span>);
<span class="hljs-comment">//å®šä¹‰è·ç¦»ä¸‹è¾¹ç•Œå¤šå°‘åƒç´ æ—¶è§¦å‘åŠ è½½æ›´å¤š</span>
<span class="hljs-keyword">const</span> loadMoreThreshold = <span class="hljs-number">100</span>;
<span class="hljs-comment">//æ¨¡æ‹Ÿä¸€ä¸ªåŠ è½½æ›´å¤šæ•°æ®å‡½æ•°</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">loadMoreData</span> = (<span class="hljs-params"/>) =&gt; {
  loading.<span class="hljs-property">value</span> = <span class="hljs-literal">true</span>;
  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">//æ¨¡æ‹Ÿç½‘ç»œè¯·æ±‚</span>
    allList.<span class="hljs-property">value</span>.<span class="hljs-title function_">push</span>(
      ...<span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>({ <span class="hljs-attr">length</span>: <span class="hljs-number">1000</span> }).<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">_, index</span>) =&gt;</span> ({
        <span class="hljs-attr">id</span>: allList.<span class="hljs-property">value</span>.<span class="hljs-property">length</span> + index,
        <span class="hljs-attr">label</span>: <span class="hljs-string">`Item <span class="hljs-subst">${allList.value.length + index + <span class="hljs-number">1</span>}</span>`</span>,
      }))
    );
    currentPage.<span class="hljs-property">value</span>++;
    loading.<span class="hljs-property">value</span> = <span class="hljs-literal">false</span>;
    scrollTop.<span class="hljs-property">value</span> -= <span class="hljs-number">10</span>;
  }, <span class="hljs-number">200</span>);
};
<span class="hljs-comment">//æ»šåŠ¨äº‹ä»¶</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">onScroll</span> = (<span class="hljs-params">event</span>) =&gt; {
  <span class="hljs-keyword">const</span> target = event.<span class="hljs-property">target</span>;
  <span class="hljs-comment">//å°†æ–°çš„æ»šåŠ¨ä½ç½®èµ‹å€¼ç»™scrollTopï¼Œé©±åŠ¨æ›´æ–°startIndexï¼ŒendIndexå’ŒvisibleItems</span>
  scrollTop.<span class="hljs-property">value</span> = target.<span class="hljs-property">scrollTop</span>;
  virtuaContent.<span class="hljs-property">value</span>.<span class="hljs-property">style</span>.<span class="hljs-property">transform</span> = <span class="hljs-string">`translateY(<span class="hljs-subst">${
    startIndex.value * rowHeight.value
  }</span>px)`</span>;
  <span class="hljs-comment">//åˆ¤æ–­æ˜¯å¦è§¦åº•</span>
  <span class="hljs-keyword">const</span> isBoundary =
    target.<span class="hljs-property">scrollTop</span> + target.<span class="hljs-property">clientHeight</span> + loadMoreThreshold &gt;=
    virtualHeight.<span class="hljs-property">value</span>.<span class="hljs-title function_">replace</span>(<span class="hljs-string">"px"</span>, <span class="hljs-string">""</span>);

  <span class="hljs-keyword">if</span> (isBoundary &amp;&amp; !loading.<span class="hljs-property">value</span>) {
    <span class="hljs-title function_">loadMoreData</span>();
  }
};
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.virtua_main</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">300px</span>;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">500px</span>;
  <span class="hljs-attribute">overflow-y</span>: auto;
  <span class="hljs-attribute">position</span>: relative;
  <span class="hljs-attribute">background</span>: <span class="hljs-number">#e0e0e0</span>;
  <span class="hljs-attribute">color</span>: red;
}

<span class="hljs-selector-class">.virtua_content</span> {
  <span class="hljs-attribute">position</span>: absolute;
  <span class="hljs-attribute">top</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">left</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
}

<span class="hljs-selector-class">.virtua_item</span> {
  <span class="hljs-attribute">height</span>: <span class="hljs-built_in">var</span>(--row-height);
  <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#000</span>;
  <span class="hljs-attribute">box-sizing</span>: border-box;
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></span>
</code></pre>
<h3 data-id="heading-6">å››ã€ç»“è¯­</h3>
<p>è¿™ä¸ªä»£ç å¾ˆåŸºç¡€ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå®ƒè¿ç”¨åˆ°ä¸šåŠ¡åœºæ™¯ä¸­ï¼Œå°è£…ä¸€ä¸ªç»„ä»¶ï¼Œæˆ–è€…æŠŠè®¡ç®—é€»è¾‘æŠ½ç¦»å‡ºhooksï¼Œè¿˜æœ‰å¯ä»¥æ”¹ä¸ºåŠ¨æ€é«˜åº¦çš„ç‰ˆæœ¬ï¼Œå¹¶ä¸”æ»šåŠ¨äº‹ä»¶åº”è¯¥æ·»åŠ é˜²æŠ–ã€‚æœ‰äº›åœ°æ–¹å¯ä»¥æ›´ä¸ºç²¾ç®€ï¼Œä½†æ˜¯ä¸ºäº†ä¸€äº›å¥½å…„å¼Ÿèƒ½çœ‹çš„æ›´æ˜ç™½æ‰€ä»¥è¿™æ ·å†™äº†ã€‚
ä»£ç ä¸­è¿˜éšè—äº†ä¸€äº›bugï¼Œè€ä¼™å­ä»¬å¦‚æœå‘ç°äº†å¯ä»¥ç»™æˆ‘ç•™è¨€ï¼Œå› ä¸ºç¬¬ä¸€æ¬¡å†™è¿™ä¹ˆé•¿çš„æ–‡ç« ï¼Œæ–‡ä¸­å¦‚æœæœ‰äº›é€»è¾‘ä¸ä¸¥è°¨æˆ–è€…é”™è¯¯ã€è¿˜æœ‰å¯ä»¥æœ‰ä¼˜åŒ–çš„åœ°æ–¹ï¼Œä¹Ÿæ¬¢è¿ç•™è¨€æŒ‡æ­£ä¸€èµ·äº¤æµã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vue 3 å®šæ—¶å™¨æ¸…ç†çš„æœ€ä½³å®è·µ]]></title>    <link>https://juejin.cn/post/7576867727718481955</link>    <guid>https://juejin.cn/post/7576867727718481955</guid>    <pubDate>2025-11-26T12:45:07.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576867727718481955" data-draft-id="7576867727718465571" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vue 3 å®šæ—¶å™¨æ¸…ç†çš„æœ€ä½³å®è·µ"/> <meta itemprop="keywords" content="JavaScript,Vue.js"/> <meta itemprop="datePublished" content="2025-11-26T12:45:07.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ–°æ™¨437"/> <meta itemprop="url" content="https://juejin.cn/user/3957868231143133"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vue 3 å®šæ—¶å™¨æ¸…ç†çš„æœ€ä½³å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3957868231143133/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ–°æ™¨437
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T12:45:07.000Z" title="Wed Nov 26 2025 12:45:07 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Vue 3 å®šæ—¶å™¨æ¸…ç†çš„æœ€ä½³å®è·µ</h2>
<p>åœ¨ Vue 3 ä¸­ï¼Œæ¸…ç†å®šæ—¶å™¨çš„æœ€ä½³ä½ç½®å–å†³äºç»„ä»¶çš„ä½¿ç”¨åœºæ™¯å’Œå®šæ—¶å™¨çš„ç”¨é€”ã€‚æˆ‘å°†è®¾è®¡ä¸€ä¸ªç›´è§‚çš„ç¤ºä¾‹æ¥æ¼”ç¤ºä¸åŒç”Ÿå‘½å‘¨æœŸé’©å­ä¸­å®šæ—¶å™¨çš„æ¸…ç†æ–¹å¼ã€‚è®¾è®¡çš„å®šæ—¶å™¨æˆªå›¾å¦‚ä¸‹</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/114e1d2854464c0dbd60f597f55c6f09~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pmoNDM3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764765907&amp;x-signature=FBDpS%2F3A9eWbpFx1kOoDj1qL27s%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-1">è®¾è®¡æ€è·¯</h3>
<ul>
<li>å±•ç¤ºä¸åŒç”Ÿå‘½å‘¨æœŸé’©å­ä¸­å®šæ—¶å™¨çš„åˆ›å»ºå’Œæ¸…ç†</li>
<li>æä¾›å¯è§†åŒ–ç•Œé¢å±•ç¤ºå®šæ—¶å™¨çŠ¶æ€</li>
<li>å…è®¸ç”¨æˆ·æ‰‹åŠ¨åˆ›å»ºå’Œæ¸…ç†å®šæ—¶å™¨</li>
<li>æ¼”ç¤ºç»„ä»¶å¸è½½æ—¶çš„è‡ªåŠ¨æ¸…ç†</li>
</ul>
<h3 data-id="heading-2">åŠŸèƒ½è¯´æ˜</h3>
<p>è¿™ä¸ªç¤ºä¾‹æ¼”ç¤ºäº†åœ¨ Vue 3 ä¸­ç®¡ç†å®šæ—¶å™¨çš„æœ€ä½³å®è·µï¼š</p>
<ol>
<li>
<p><strong>å®šæ—¶å™¨åˆ›å»ºå’Œæ¸…ç†</strong>ï¼š</p>
<ul>
<li>åœ¨ <code>onMounted</code> é’©å­ä¸­åˆ›å»ºå®šæ—¶å™¨</li>
<li>åœ¨ <code>onUnmounted</code> é’©å­ä¸­æ¸…ç†å®šæ—¶å™¨ï¼ˆå¿…é¡»ï¼‰</li>
<li>ä¹Ÿå¯åœ¨ <code>onBeforeUnmount</code> ä¸­æ¸…ç†</li>
</ul>
</li>
<li>
<p><strong>ç”Ÿå‘½å‘¨æœŸæ¼”ç¤º</strong>ï¼š</p>
<ul>
<li>é€šè¿‡åˆ‡æ¢å­ç»„ä»¶æ˜¾ç¤º/éšè—æ¥æ¼”ç¤ºç»„ä»¶å¸è½½æ—¶çš„å®šæ—¶å™¨æ¸…ç†</li>
<li>åœ¨æ§åˆ¶å°è¾“å‡ºç”Ÿå‘½å‘¨æœŸäº‹ä»¶</li>
</ul>
</li>
<li>
<p><strong>æ‰‹åŠ¨ç®¡ç†</strong>ï¼š</p>
<ul>
<li>æä¾›æ‰‹åŠ¨åˆ›å»ºå’Œæ¸…ç†å®šæ—¶å™¨çš„åŠŸèƒ½</li>
<li>æ˜¾ç¤ºæ‰€æœ‰æ´»åŠ¨å®šæ—¶å™¨çš„çŠ¶æ€å’Œè¿›åº¦</li>
</ul>
</li>
<li>
<p><strong>æœ€ä½³å®è·µä»£ç ç¤ºä¾‹</strong>ï¼š</p>
<ul>
<li>å±•ç¤ºåœ¨ Vue 3 ç»„ä»¶ä¸­æ­£ç¡®ç®¡ç†å®šæ—¶å™¨çš„ä»£ç æ¨¡å¼</li>
</ul>
</li>
</ol>
<p>è¿™ä¸ªç¤ºä¾‹å¼ºè°ƒäº†åœ¨ Vue 3 ä¸­ï¼Œæ— è®ºå®šæ—¶å™¨æ˜¯åœ¨å“ªä¸ªç”Ÿå‘½å‘¨æœŸåˆ›å»ºçš„ï¼Œéƒ½å¿…é¡»åœ¨ <code>onUnmounted</code> æˆ– <code>onBeforeUnmount</code> ä¸­æ¸…ç†ï¼Œä»¥é˜²æ­¢å†…å­˜æ³„æ¼ã€‚</p>
<h3 data-id="heading-3">æœ€ç»ˆå®ç°ä»£ç </h3>
<pre><code class="hljs language-html" lang="html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"zh-CN"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Vue 3 å®šæ—¶å™¨ç”Ÿå‘½å‘¨æœŸç®¡ç†<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://unpkg.com/vue@3/dist/vue.global.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
        * {
            <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>;
            <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span>;
            <span class="hljs-attribute">box-sizing</span>: border-box;
            <span class="hljs-attribute">font-family</span>: <span class="hljs-string">'Segoe UI'</span>, Tahoma, Geneva, Verdana, sans-serif;
        }
        
        <span class="hljs-selector-tag">body</span> {
            <span class="hljs-attribute">background</span>: <span class="hljs-built_in">linear-gradient</span>(<span class="hljs-number">135deg</span>, <span class="hljs-number">#1a2a6c</span>, <span class="hljs-number">#b21f1f</span>, <span class="hljs-number">#fdbb2d</span>);
            <span class="hljs-attribute">color</span>: <span class="hljs-number">#fff</span>;
            <span class="hljs-attribute">min-height</span>: <span class="hljs-number">100vh</span>;
            <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span>;
        }
        
        <span class="hljs-selector-class">.container</span> {
            <span class="hljs-attribute">max-width</span>: <span class="hljs-number">1200px</span>;
            <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span> auto;
            <span class="hljs-attribute">background</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.7</span>);
            <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">15px</span>;
            <span class="hljs-attribute">padding</span>: <span class="hljs-number">30px</span>;
            <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">10px</span> <span class="hljs-number">30px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.5</span>);
        }
        
        <span class="hljs-selector-tag">header</span> {
            <span class="hljs-attribute">text-align</span>: center;
            <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">30px</span>;
        }
        
        <span class="hljs-selector-tag">h1</span> {
            <span class="hljs-attribute">font-size</span>: <span class="hljs-number">2.5rem</span>;
            <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">10px</span>;
            <span class="hljs-attribute">text-shadow</span>: <span class="hljs-number">2px</span> <span class="hljs-number">2px</span> <span class="hljs-number">4px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.5</span>);
        }
        
        <span class="hljs-selector-class">.subtitle</span> {
            <span class="hljs-attribute">font-size</span>: <span class="hljs-number">1.2rem</span>;
            <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0.8</span>;
            <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">20px</span>;
        }
        
        <span class="hljs-selector-class">.content</span> {
            <span class="hljs-attribute">display</span>: grid;
            <span class="hljs-attribute">grid-template-columns</span>: <span class="hljs-number">1</span>fr <span class="hljs-number">1</span>fr;
            <span class="hljs-attribute">gap</span>: <span class="hljs-number">30px</span>;
        }
        
        <span class="hljs-keyword">@media</span> (<span class="hljs-attribute">max-width</span>: <span class="hljs-number">768px</span>) {
            <span class="hljs-selector-class">.content</span> {
                <span class="hljs-attribute">grid-template-columns</span>: <span class="hljs-number">1</span>fr;
            }
        }
        
        <span class="hljs-selector-class">.card</span> {
            <span class="hljs-attribute">background</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">0.1</span>);
            <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">10px</span>;
            <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span>;
            <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">20px</span>;
        }
        
        <span class="hljs-selector-class">.card</span> <span class="hljs-selector-tag">h2</span> {
            <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">15px</span>;
            <span class="hljs-attribute">color</span>: <span class="hljs-number">#fdbb2d</span>;
            <span class="hljs-attribute">border-bottom</span>: <span class="hljs-number">1px</span> solid <span class="hljs-built_in">rgba</span>(<span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">0.2</span>);
            <span class="hljs-attribute">padding-bottom</span>: <span class="hljs-number">10px</span>;
        }
        
        <span class="hljs-selector-class">.timer-controls</span> {
            <span class="hljs-attribute">display</span>: flex;
            <span class="hljs-attribute">flex-wrap</span>: wrap;
            <span class="hljs-attribute">gap</span>: <span class="hljs-number">15px</span>;
            <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">20px</span>;
        }
        
        <span class="hljs-selector-class">.control-group</span> {
            <span class="hljs-attribute">flex</span>: <span class="hljs-number">1</span>;
            <span class="hljs-attribute">min-width</span>: <span class="hljs-number">200px</span>;
        }
        
        <span class="hljs-selector-tag">label</span> {
            <span class="hljs-attribute">display</span>: block;
            <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">8px</span>;
            <span class="hljs-attribute">font-weight</span>: <span class="hljs-number">600</span>;
        }
        
        <span class="hljs-selector-tag">input</span>, select, <span class="hljs-selector-tag">button</span> {
            <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
            <span class="hljs-attribute">padding</span>: <span class="hljs-number">12px</span>;
            <span class="hljs-attribute">border</span>: none;
            <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">5px</span>;
            <span class="hljs-attribute">font-size</span>: <span class="hljs-number">1rem</span>;
        }
        
        <span class="hljs-selector-tag">input</span>, select {
            <span class="hljs-attribute">background</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">0.9</span>);
        }
        
        <span class="hljs-selector-tag">button</span> {
            <span class="hljs-attribute">background</span>: <span class="hljs-number">#4CAF50</span>;
            <span class="hljs-attribute">color</span>: white;
            <span class="hljs-attribute">cursor</span>: pointer;
            <span class="hljs-attribute">transition</span>: all <span class="hljs-number">0.3s</span>;
            <span class="hljs-attribute">font-weight</span>: bold;
            <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">10px</span>;
        }
        
        <span class="hljs-selector-tag">button</span><span class="hljs-selector-pseudo">:hover</span> {
            <span class="hljs-attribute">background</span>: <span class="hljs-number">#45a049</span>;
            <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateY</span>(-<span class="hljs-number">2px</span>);
            <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">5px</span> <span class="hljs-number">15px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.3</span>);
        }
        
        <span class="hljs-selector-class">.danger-btn</span> {
            <span class="hljs-attribute">background</span>: <span class="hljs-number">#f44336</span>;
        }
        
        <span class="hljs-selector-class">.danger-btn</span><span class="hljs-selector-pseudo">:hover</span> {
            <span class="hljs-attribute">background</span>: <span class="hljs-number">#d32f2f</span>;
        }
        
        <span class="hljs-selector-class">.warning-btn</span> {
            <span class="hljs-attribute">background</span>: <span class="hljs-number">#ff9800</span>;
        }
        
        <span class="hljs-selector-class">.warning-btn</span><span class="hljs-selector-pseudo">:hover</span> {
            <span class="hljs-attribute">background</span>: <span class="hljs-number">#f57c00</span>;
        }
        
        <span class="hljs-selector-class">.timer-list</span> {
            <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">20px</span>;
        }
        
        <span class="hljs-selector-class">.timer-item</span> {
            <span class="hljs-attribute">display</span>: flex;
            <span class="hljs-attribute">justify-content</span>: space-between;
            <span class="hljs-attribute">align-items</span>: center;
            <span class="hljs-attribute">background</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">0.1</span>);
            <span class="hljs-attribute">padding</span>: <span class="hljs-number">15px</span>;
            <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">10px</span>;
            <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">8px</span>;
            <span class="hljs-attribute">transition</span>: all <span class="hljs-number">0.3s</span>;
        }
        
        <span class="hljs-selector-class">.timer-item</span><span class="hljs-selector-pseudo">:hover</span> {
            <span class="hljs-attribute">background</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">0.15</span>);
            <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateX</span>(<span class="hljs-number">5px</span>);
        }
        
        <span class="hljs-selector-class">.timer-info</span> {
            <span class="hljs-attribute">flex</span>: <span class="hljs-number">1</span>;
        }
        
        <span class="hljs-selector-class">.timer-id</span> {
            <span class="hljs-attribute">font-weight</span>: bold;
            <span class="hljs-attribute">font-size</span>: <span class="hljs-number">1.1rem</span>;
        }
        
        <span class="hljs-selector-class">.timer-details</span> {
            <span class="hljs-attribute">display</span>: flex;
            <span class="hljs-attribute">gap</span>: <span class="hljs-number">15px</span>;
            <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">5px</span>;
            <span class="hljs-attribute">font-size</span>: <span class="hljs-number">0.9rem</span>;
            <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0.8</span>;
        }
        
        <span class="hljs-selector-class">.timer-actions</span> {
            <span class="hljs-attribute">display</span>: flex;
            <span class="hljs-attribute">gap</span>: <span class="hljs-number">10px</span>;
        }
        
        <span class="hljs-selector-class">.timer-actions</span> <span class="hljs-selector-tag">button</span> {
            <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>;
            <span class="hljs-attribute">padding</span>: <span class="hljs-number">8px</span> <span class="hljs-number">15px</span>;
            <span class="hljs-attribute">width</span>: auto;
        }
        
        <span class="hljs-selector-class">.status</span> {
            <span class="hljs-attribute">padding</span>: <span class="hljs-number">5px</span> <span class="hljs-number">10px</span>;
            <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">20px</span>;
            <span class="hljs-attribute">font-size</span>: <span class="hljs-number">0.8rem</span>;
            <span class="hljs-attribute">font-weight</span>: bold;
        }
        
        <span class="hljs-selector-class">.status-active</span> {
            <span class="hljs-attribute">background</span>: <span class="hljs-number">#4CAF50</span>;
        }
        
        <span class="hljs-selector-class">.status-cleared</span> {
            <span class="hljs-attribute">background</span>: <span class="hljs-number">#f44336</span>;
        }
        
        <span class="hljs-selector-class">.lifecycle-info</span> {
            <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">30px</span>;
            <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span>;
            <span class="hljs-attribute">background</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.3</span>);
            <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">10px</span>;
        }
        
        <span class="hljs-selector-class">.lifecycle-info</span> <span class="hljs-selector-tag">h3</span> {
            <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">15px</span>;
            <span class="hljs-attribute">color</span>: <span class="hljs-number">#fdbb2d</span>;
        }
        
        <span class="hljs-selector-class">.lifecycle-info</span> <span class="hljs-selector-tag">ul</span> {
            <span class="hljs-attribute">padding-left</span>: <span class="hljs-number">20px</span>;
            <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">15px</span>;
        }
        
        <span class="hljs-selector-class">.lifecycle-info</span> <span class="hljs-selector-tag">li</span> {
            <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">8px</span>;
            <span class="hljs-attribute">line-height</span>: <span class="hljs-number">1.5</span>;
        }
        
        <span class="hljs-selector-class">.highlight</span> {
            <span class="hljs-attribute">color</span>: <span class="hljs-number">#fdbb2d</span>;
            <span class="hljs-attribute">font-weight</span>: bold;
        }
        
        <span class="hljs-selector-class">.component-demo</span> {
            <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">30px</span>;
            <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span>;
            <span class="hljs-attribute">border</span>: <span class="hljs-number">2px</span> dashed <span class="hljs-built_in">rgba</span>(<span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">0.3</span>);
            <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">10px</span>;
        }
        
        <span class="hljs-selector-class">.toggle-btn</span> {
            <span class="hljs-attribute">background</span>: <span class="hljs-number">#2196F3</span>;
            <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
        }
        
        <span class="hljs-selector-class">.toggle-btn</span><span class="hljs-selector-pseudo">:hover</span> {
            <span class="hljs-attribute">background</span>: <span class="hljs-number">#0b7dda</span>;
        }
        
        <span class="hljs-selector-class">.stats</span> {
            <span class="hljs-attribute">display</span>: flex;
            <span class="hljs-attribute">justify-content</span>: space-between;
            <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">30px</span>;
            <span class="hljs-attribute">padding-top</span>: <span class="hljs-number">20px</span>;
            <span class="hljs-attribute">border-top</span>: <span class="hljs-number">1px</span> solid <span class="hljs-built_in">rgba</span>(<span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">0.2</span>);
        }
        
        <span class="hljs-selector-class">.stat-box</span> {
            <span class="hljs-attribute">text-align</span>: center;
            <span class="hljs-attribute">flex</span>: <span class="hljs-number">1</span>;
        }
        
        <span class="hljs-selector-class">.stat-value</span> {
            <span class="hljs-attribute">font-size</span>: <span class="hljs-number">2rem</span>;
            <span class="hljs-attribute">font-weight</span>: bold;
            <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">5px</span>;
        }
        
        <span class="hljs-selector-class">.stat-label</span> {
            <span class="hljs-attribute">font-size</span>: <span class="hljs-number">0.9rem</span>;
            <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0.8</span>;
        }
        
        <span class="hljs-selector-class">.empty-state</span> {
            <span class="hljs-attribute">text-align</span>: center;
            <span class="hljs-attribute">padding</span>: <span class="hljs-number">40px</span>;
            <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0.7</span>;
        }
        
        <span class="hljs-selector-class">.pulse</span> {
            <span class="hljs-attribute">animation</span>: pulse <span class="hljs-number">2s</span> infinite;
        }
        
        <span class="hljs-keyword">@keyframes</span> pulse {
            <span class="hljs-number">0%</span> { <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">scale</span>(<span class="hljs-number">1</span>); }
            <span class="hljs-number">50%</span> { <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">scale</span>(<span class="hljs-number">1.05</span>); }
            <span class="hljs-number">100%</span> { <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">scale</span>(<span class="hljs-number">1</span>); }
        }
        
        <span class="hljs-selector-class">.progress-bar</span> {
            <span class="hljs-attribute">height</span>: <span class="hljs-number">5px</span>;
            <span class="hljs-attribute">background</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">0.2</span>);
            <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">5px</span>;
            <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">10px</span>;
            <span class="hljs-attribute">overflow</span>: hidden;
        }
        
        <span class="hljs-selector-class">.progress</span> {
            <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;
            <span class="hljs-attribute">background</span>: <span class="hljs-number">#4CAF50</span>;
            <span class="hljs-attribute">width</span>: <span class="hljs-number">0%</span>;
            <span class="hljs-attribute">transition</span>: width <span class="hljs-number">0.5s</span>;
        }
        
        <span class="hljs-selector-class">.code-block</span> {
            <span class="hljs-attribute">background</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.5</span>);
            <span class="hljs-attribute">padding</span>: <span class="hljs-number">15px</span>;
            <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">5px</span>;
            <span class="hljs-attribute">font-family</span>: monospace;
            <span class="hljs-attribute">margin</span>: <span class="hljs-number">15px</span> <span class="hljs-number">0</span>;
            <span class="hljs-attribute">overflow-x</span>: auto;
        }
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"app"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"container"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">header</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Vue 3 å®šæ—¶å™¨ç”Ÿå‘½å‘¨æœŸç®¡ç†<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"subtitle"</span>&gt;</span>æ¼”ç¤ºåœ¨ä¸åŒç”Ÿå‘½å‘¨æœŸé’©å­ä¸­åˆ›å»ºå’Œæ¸…ç†å®šæ—¶å™¨çš„æœ€ä½³å®è·µ<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">header</span>&gt;</span>
            
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"content"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card"</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>å®šæ—¶å™¨æ§åˆ¶é¢æ¿<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"timer-controls"</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"control-group"</span>&gt;</span>
                                <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">"timerType"</span>&gt;</span>å®šæ—¶å™¨ç±»å‹<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
                                <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"timerType"</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"timerType"</span>&gt;</span>
                                    <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"timeout"</span>&gt;</span>setTimeout (ä¸€æ¬¡æ€§)<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
                                    <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"interval"</span>&gt;</span>setInterval (é‡å¤)<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
                                <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span>
                            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                            
                            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"control-group"</span>&gt;</span>
                                <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">"timerDuration"</span>&gt;</span>æŒç»­æ—¶é—´ (æ¯«ç§’)<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
                                <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"number"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"timerDuration"</span> <span class="hljs-attr">v-model.number</span>=<span class="hljs-string">"timerDuration"</span> <span class="hljs-attr">min</span>=<span class="hljs-string">"100"</span> <span class="hljs-attr">max</span>=<span class="hljs-string">"100000"</span>&gt;</span>
                            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                            
                            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"control-group"</span>&gt;</span>
                                <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">"timerMessage"</span>&gt;</span>å®šæ—¶å™¨æ¶ˆæ¯<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
                                <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"timerMessage"</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"timerMessage"</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"è¾“å…¥å®šæ—¶å™¨æ‰§è¡Œæ—¶æ˜¾ç¤ºçš„æ¶ˆæ¯"</span>&gt;</span>
                            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                        
                        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"addTimer"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"pulse"</span>&gt;</span>æ·»åŠ å®šæ—¶å™¨<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"clearAllTimers"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"danger-btn"</span>&gt;</span>æ¸…ç†æ‰€æœ‰å®šæ—¶å™¨<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                    
                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card"</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>æ´»åŠ¨å®šæ—¶å™¨ ({{ activeTimersCount }})<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"timer-list"</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">"activeTimers.length === 0"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"empty-state"</span>&gt;</span>
                                æš‚æ— æ´»åŠ¨å®šæ—¶å™¨
                            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-else</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">"timer in activeTimers"</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">"timer.id"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"timer-item"</span>&gt;</span>
                                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"timer-info"</span>&gt;</span>
                                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"timer-id"</span>&gt;</span>å®šæ—¶å™¨ #{{ timer.id }}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"timer-details"</span>&gt;</span>
                                        <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>ç±»å‹: {{ timer.type === 'timeout' ? 'setTimeout' : 'setInterval' }}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
                                        <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>æŒç»­æ—¶é—´: {{ timer.duration }}ms<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
                                        <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>æ¶ˆæ¯: "{{ timer.message }}"<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
                                    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"progress-bar"</span>&gt;</span>
                                        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"progress"</span> <span class="hljs-attr">:style</span>=<span class="hljs-string">"{ width: timer.progress + '%' }"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                                    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"timer-actions"</span>&gt;</span>
                                    <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"status status-active"</span>&gt;</span>æ´»åŠ¨<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
                                    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"danger-btn"</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"clearTimer(timer.id)"</span>&gt;</span>æ¸…ç†<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
                                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                
                <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card"</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>ç”Ÿå‘½å‘¨æœŸæ¼”ç¤º<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"lifecycle-info"</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>Vue 3 å®šæ—¶å™¨æ¸…ç†æœ€ä½³å®è·µ<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
                                <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"highlight"</span>&gt;</span>onMounted<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span> - åœ¨ç»„ä»¶æŒ‚è½½ååˆ›å»ºå®šæ—¶å™¨<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
                                <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"highlight"</span>&gt;</span>onUnmounted<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span> - åœ¨ç»„ä»¶å¸è½½å‰æ¸…ç†å®šæ—¶å™¨ï¼ˆå¿…é¡»ï¼‰<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
                                <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"highlight"</span>&gt;</span>onBeforeUnmount<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span> - åœ¨ç»„ä»¶å¸è½½å‰æ¸…ç†å®šæ—¶å™¨çš„æ›¿ä»£æ–¹æ¡ˆ<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
                                <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"highlight"</span>&gt;</span>watchEffect<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span> - å“åº”å¼åœ°åˆ›å»ºå’Œæ¸…ç†å®šæ—¶å™¨<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
                                <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"highlight"</span>&gt;</span>æ‰‹åŠ¨æ¸…ç†<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span> - åœ¨éœ€è¦æ—¶æ‰‹åŠ¨æ¸…ç†ç‰¹å®šå®šæ—¶å™¨<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
                            <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
                            
                            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"code-block"</span>&gt;</span>
// æœ€ä½³å®è·µç¤ºä¾‹<span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span>
import { onMounted, onUnmounted, ref } from 'vue'<span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span>

const timerId = ref(null)<span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span>

onMounted(() =&gt; {<span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span>
<span class="hljs-symbol">&amp;nbsp;</span><span class="hljs-symbol">&amp;nbsp;</span>// åˆ›å»ºå®šæ—¶å™¨<span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span>
<span class="hljs-symbol">&amp;nbsp;</span><span class="hljs-symbol">&amp;nbsp;</span>timerId.value = setInterval(() =&gt; {<span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span>
<span class="hljs-symbol">&amp;nbsp;</span><span class="hljs-symbol">&amp;nbsp;</span><span class="hljs-symbol">&amp;nbsp;</span><span class="hljs-symbol">&amp;nbsp;</span>// å®šæ—¶å™¨é€»è¾‘<span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span>
<span class="hljs-symbol">&amp;nbsp;</span><span class="hljs-symbol">&amp;nbsp;</span>}, 1000)<span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span>
})<span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span>

onUnmounted(() =&gt; {<span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span>
<span class="hljs-symbol">&amp;nbsp;</span><span class="hljs-symbol">&amp;nbsp;</span>// æ¸…ç†å®šæ—¶å™¨<span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span>
<span class="hljs-symbol">&amp;nbsp;</span><span class="hljs-symbol">&amp;nbsp;</span>if (timerId.value) {<span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span>
<span class="hljs-symbol">&amp;nbsp;</span><span class="hljs-symbol">&amp;nbsp;</span><span class="hljs-symbol">&amp;nbsp;</span><span class="hljs-symbol">&amp;nbsp;</span>clearInterval(timerId.value)<span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span>
<span class="hljs-symbol">&amp;nbsp;</span><span class="hljs-symbol">&amp;nbsp;</span>}<span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span>
})
                            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                        
                        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"component-demo"</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>ç»„ä»¶å¸è½½æ¼”ç¤º<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>ç‚¹å‡»æŒ‰é’®åˆ‡æ¢å­ç»„ä»¶æ˜¾ç¤º/éšè—ï¼Œè§‚å¯Ÿæ§åˆ¶å°è¾“å‡º<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"toggle-btn"</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"toggleComponent"</span>&gt;</span>
                                {{ showChildComponent ? 'éšè—' : 'æ˜¾ç¤º' }}å­ç»„ä»¶
                            <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
                            
                            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">"showChildComponent"</span>&gt;</span>
                                <span class="hljs-tag">&lt;<span class="hljs-name">child-component</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">child-component</span>&gt;</span>
                            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                    
                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"stats"</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"stat-box"</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"stat-value"</span>&gt;</span>{{ activeTimersCount }}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"stat-label"</span>&gt;</span>æ´»åŠ¨å®šæ—¶å™¨<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"stat-box"</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"stat-value"</span>&gt;</span>{{ clearedTimersCount }}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"stat-label"</span>&gt;</span>å·²æ¸…ç†å®šæ—¶å™¨<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"stat-box"</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"stat-value"</span>&gt;</span>{{ totalTimersCount }}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"stat-label"</span>&gt;</span>æ€»å®šæ—¶å™¨<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
        <span class="hljs-keyword">const</span> { createApp, ref, onMounted, onUnmounted, computed, onBeforeUnmount } = <span class="hljs-title class_">Vue</span>;
        
        <span class="hljs-comment">// å­ç»„ä»¶æ¼”ç¤ºç”Ÿå‘½å‘¨æœŸ</span>
        <span class="hljs-keyword">const</span> <span class="hljs-title class_">ChildComponent</span> = {
            <span class="hljs-attr">template</span>: <span class="hljs-string">`
                &lt;div class="card" style="margin-top: 15px;"&gt;
                    &lt;h3&gt;å­ç»„ä»¶ç”Ÿå‘½å‘¨æœŸæ¼”ç¤º&lt;/h3&gt;
                    &lt;p&gt;ç»„ä»¶çŠ¶æ€: &lt;span style="color: #4CAF50;"&gt;å·²æŒ‚è½½&lt;/span&gt;&lt;/p&gt;
                    &lt;p&gt;å®šæ—¶å™¨ID: {{ timerId || 'æ— ' }}&lt;/p&gt;
                    &lt;p&gt;è®¡æ—¶: {{ count }} ç§’&lt;/p&gt;
                    &lt;button class="warning-btn" @click="stopTimer"&gt;åœæ­¢å®šæ—¶å™¨&lt;/button&gt;
                &lt;/div&gt;
            `</span>,
            <span class="hljs-title function_">setup</span>(<span class="hljs-params"/>) {
                <span class="hljs-keyword">const</span> timerId = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">null</span>);
                <span class="hljs-keyword">const</span> count = <span class="hljs-title function_">ref</span>(<span class="hljs-number">0</span>);
                
                <span class="hljs-comment">// åœ¨ onMounted ä¸­åˆ›å»ºå®šæ—¶å™¨</span>
                <span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> {
                    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å­ç»„ä»¶å·²æŒ‚è½½ï¼Œåˆ›å»ºå®šæ—¶å™¨'</span>);
                    timerId.<span class="hljs-property">value</span> = <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> {
                        count.<span class="hljs-property">value</span>++;
                        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`å­ç»„ä»¶å®šæ—¶å™¨æ‰§è¡Œ: <span class="hljs-subst">${count.value}</span> ç§’`</span>);
                    }, <span class="hljs-number">1000</span>);
                });
                
                <span class="hljs-comment">// åœ¨ onUnmounted ä¸­æ¸…ç†å®šæ—¶å™¨ (æœ€ä½³å®è·µ)</span>
                <span class="hljs-title function_">onUnmounted</span>(<span class="hljs-function">() =&gt;</span> {
                    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å­ç»„ä»¶å³å°†å¸è½½ï¼Œæ¸…ç†å®šæ—¶å™¨'</span>);
                    <span class="hljs-keyword">if</span> (timerId.<span class="hljs-property">value</span>) {
                        <span class="hljs-built_in">clearInterval</span>(timerId.<span class="hljs-property">value</span>);
                        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å®šæ—¶å™¨å·²æ¸…ç†'</span>);
                    }
                });
                
                <span class="hljs-comment">// ä¹Ÿå¯ä»¥åœ¨ onBeforeUnmount ä¸­æ¸…ç†</span>
                <span class="hljs-title function_">onBeforeUnmount</span>(<span class="hljs-function">() =&gt;</span> {
                    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'onBeforeUnmount: æ¸…ç†å®šæ—¶å™¨'</span>);
                });
                
                <span class="hljs-keyword">const</span> <span class="hljs-title function_">stopTimer</span> = (<span class="hljs-params"/>) =&gt; {
                    <span class="hljs-keyword">if</span> (timerId.<span class="hljs-property">value</span>) {
                        <span class="hljs-built_in">clearInterval</span>(timerId.<span class="hljs-property">value</span>);
                        timerId.<span class="hljs-property">value</span> = <span class="hljs-literal">null</span>;
                        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ‰‹åŠ¨åœæ­¢å®šæ—¶å™¨'</span>);
                    }
                };
                
                <span class="hljs-keyword">return</span> {
                    timerId,
                    count,
                    stopTimer
                };
            }
        };
        
        <span class="hljs-keyword">const</span> app = <span class="hljs-title function_">createApp</span>({
            <span class="hljs-attr">components</span>: {
                <span class="hljs-title class_">ChildComponent</span>
            },
            <span class="hljs-title function_">setup</span>(<span class="hljs-params"/>) {
                <span class="hljs-comment">// å®šæ—¶å™¨æ•°æ®</span>
                <span class="hljs-keyword">const</span> timers = <span class="hljs-title function_">ref</span>([]);
                <span class="hljs-keyword">const</span> timerIdCounter = <span class="hljs-title function_">ref</span>(<span class="hljs-number">1</span>);
                <span class="hljs-keyword">const</span> timerType = <span class="hljs-title function_">ref</span>(<span class="hljs-string">'timeout'</span>);
                <span class="hljs-keyword">const</span> timerDuration = <span class="hljs-title function_">ref</span>(<span class="hljs-number">3000</span>);
                <span class="hljs-keyword">const</span> timerMessage = <span class="hljs-title function_">ref</span>(<span class="hljs-string">'å®šæ—¶å™¨å·²è§¦å‘ï¼'</span>);
                <span class="hljs-keyword">const</span> showChildComponent = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">false</span>);
                
                <span class="hljs-comment">// è®¡ç®—å±æ€§</span>
                <span class="hljs-keyword">const</span> activeTimers = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> 
                    timers.<span class="hljs-property">value</span>.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">t</span> =&gt;</span> t.<span class="hljs-property">status</span> === <span class="hljs-string">'active'</span>)
                );
                
                <span class="hljs-keyword">const</span> activeTimersCount = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> activeTimers.<span class="hljs-property">value</span>.<span class="hljs-property">length</span>);
                
                <span class="hljs-keyword">const</span> clearedTimersCount = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> 
                    timers.<span class="hljs-property">value</span>.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">t</span> =&gt;</span> t.<span class="hljs-property">status</span> === <span class="hljs-string">'cleared'</span>).<span class="hljs-property">length</span>
                );
                
                <span class="hljs-keyword">const</span> totalTimersCount = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> timers.<span class="hljs-property">value</span>.<span class="hljs-property">length</span>);
                
                <span class="hljs-comment">// æ·»åŠ å®šæ—¶å™¨</span>
                <span class="hljs-keyword">const</span> <span class="hljs-title function_">addTimer</span> = (<span class="hljs-params"/>) =&gt; {
                    <span class="hljs-keyword">if</span> (timerDuration.<span class="hljs-property">value</span> &lt; <span class="hljs-number">100</span>) {
                        <span class="hljs-title function_">alert</span>(<span class="hljs-string">'è¯·è¾“å…¥æœ‰æ•ˆçš„æŒç»­æ—¶é—´ï¼ˆè‡³å°‘100æ¯«ç§’ï¼‰'</span>);
                        <span class="hljs-keyword">return</span>;
                    }
                    
                    <span class="hljs-keyword">const</span> timerId = timerIdCounter.<span class="hljs-property">value</span>++;
                    <span class="hljs-keyword">let</span> timerRef;
                    
                    <span class="hljs-comment">// åˆ›å»ºå®šæ—¶å™¨å¯¹è±¡</span>
                    <span class="hljs-keyword">const</span> timerObj = {
                        <span class="hljs-attr">id</span>: timerId,
                        <span class="hljs-attr">type</span>: timerType.<span class="hljs-property">value</span>,
                        <span class="hljs-attr">duration</span>: timerDuration.<span class="hljs-property">value</span>,
                        <span class="hljs-attr">message</span>: timerMessage.<span class="hljs-property">value</span>,
                        <span class="hljs-attr">status</span>: <span class="hljs-string">'active'</span>,
                        <span class="hljs-attr">startTime</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>(),
                        <span class="hljs-attr">progress</span>: <span class="hljs-number">0</span>
                    };
                    
                    <span class="hljs-comment">// æ ¹æ®ç±»å‹è®¾ç½®å®šæ—¶å™¨</span>
                    <span class="hljs-keyword">if</span> (timerType.<span class="hljs-property">value</span> === <span class="hljs-string">'timeout'</span>) {
                        timerRef = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
                            <span class="hljs-title function_">handleTimerCompletion</span>(timerId);
                            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`å®šæ—¶å™¨ #<span class="hljs-subst">${timerId}</span>: <span class="hljs-subst">${timerMessage.value}</span>`</span>);
                        }, timerDuration.<span class="hljs-property">value</span>);
                        
                        timerObj.<span class="hljs-property">ref</span> = timerRef;
                    } <span class="hljs-keyword">else</span> {
                        timerRef = <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> {
                            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`å®šæ—¶å™¨ #<span class="hljs-subst">${timerId}</span>: <span class="hljs-subst">${timerMessage.value}</span>`</span>);
                        }, timerDuration.<span class="hljs-property">value</span>);
                        
                        timerObj.<span class="hljs-property">ref</span> = timerRef;
                    }
                    
                    timers.<span class="hljs-property">value</span>.<span class="hljs-title function_">push</span>(timerObj);
                    <span class="hljs-title function_">updateProgressBars</span>();
                };
                
                <span class="hljs-comment">// å¤„ç†å®šæ—¶å™¨å®Œæˆ</span>
                <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleTimerCompletion</span> = (<span class="hljs-params">timerId</span>) =&gt; {
                    <span class="hljs-keyword">const</span> timer = timers.<span class="hljs-property">value</span>.<span class="hljs-title function_">find</span>(<span class="hljs-function"><span class="hljs-params">t</span> =&gt;</span> t.<span class="hljs-property">id</span> === timerId);
                    <span class="hljs-keyword">if</span> (timer) {
                        timer.<span class="hljs-property">status</span> = <span class="hljs-string">'completed'</span>;
                    }
                };
                
                <span class="hljs-comment">// æ¸…ç†å•ä¸ªå®šæ—¶å™¨</span>
                <span class="hljs-keyword">const</span> <span class="hljs-title function_">clearTimer</span> = (<span class="hljs-params">timerId</span>) =&gt; {
                    <span class="hljs-keyword">const</span> timer = timers.<span class="hljs-property">value</span>.<span class="hljs-title function_">find</span>(<span class="hljs-function"><span class="hljs-params">t</span> =&gt;</span> t.<span class="hljs-property">id</span> === timerId);
                    <span class="hljs-keyword">if</span> (timer &amp;&amp; timer.<span class="hljs-property">status</span> === <span class="hljs-string">'active'</span>) {
                        <span class="hljs-keyword">if</span> (timer.<span class="hljs-property">type</span> === <span class="hljs-string">'timeout'</span>) {
                            <span class="hljs-built_in">clearTimeout</span>(timer.<span class="hljs-property">ref</span>);
                        } <span class="hljs-keyword">else</span> {
                            <span class="hljs-built_in">clearInterval</span>(timer.<span class="hljs-property">ref</span>);
                        }
                        timer.<span class="hljs-property">status</span> = <span class="hljs-string">'cleared'</span>;
                        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`å®šæ—¶å™¨ #<span class="hljs-subst">${timerId}</span> å·²æ¸…ç†`</span>);
                    }
                };
                
                <span class="hljs-comment">// æ¸…ç†æ‰€æœ‰å®šæ—¶å™¨</span>
                <span class="hljs-keyword">const</span> <span class="hljs-title function_">clearAllTimers</span> = (<span class="hljs-params"/>) =&gt; {
                    <span class="hljs-keyword">if</span> (timers.<span class="hljs-property">value</span>.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) {
                        <span class="hljs-title function_">alert</span>(<span class="hljs-string">'æ²¡æœ‰æ´»åŠ¨å®šæ—¶å™¨å¯æ¸…ç†'</span>);
                        <span class="hljs-keyword">return</span>;
                    }
                    
                    <span class="hljs-keyword">if</span> (<span class="hljs-title function_">confirm</span>(<span class="hljs-string">`ç¡®å®šè¦æ¸…ç†æ‰€æœ‰ <span class="hljs-subst">${timers.value.length}</span> ä¸ªå®šæ—¶å™¨å—ï¼Ÿ`</span>)) {
                        timers.<span class="hljs-property">value</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">timer</span> =&gt;</span> {
                            <span class="hljs-keyword">if</span> (timer.<span class="hljs-property">status</span> === <span class="hljs-string">'active'</span>) {
                                <span class="hljs-keyword">if</span> (timer.<span class="hljs-property">type</span> === <span class="hljs-string">'timeout'</span>) {
                                    <span class="hljs-built_in">clearTimeout</span>(timer.<span class="hljs-property">ref</span>);
                                } <span class="hljs-keyword">else</span> {
                                    <span class="hljs-built_in">clearInterval</span>(timer.<span class="hljs-property">ref</span>);
                                }
                                timer.<span class="hljs-property">status</span> = <span class="hljs-string">'cleared'</span>;
                            }
                        });
                        
                        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ‰€æœ‰å®šæ—¶å™¨å·²æ¸…ç†'</span>);
                    }
                };
                
                <span class="hljs-comment">// æ›´æ–°è¿›åº¦æ¡</span>
                <span class="hljs-keyword">const</span> <span class="hljs-title function_">updateProgressBars</span> = (<span class="hljs-params"/>) =&gt; {
                    <span class="hljs-keyword">const</span> activeTimersList = timers.<span class="hljs-property">value</span>.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">t</span> =&gt;</span> t.<span class="hljs-property">status</span> === <span class="hljs-string">'active'</span>);
                    
                    activeTimersList.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">timer</span> =&gt;</span> {
                        <span class="hljs-keyword">const</span> elapsed = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() - timer.<span class="hljs-property">startTime</span>;
                        <span class="hljs-keyword">const</span> progress = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(<span class="hljs-number">100</span>, (elapsed / timer.<span class="hljs-property">duration</span>) * <span class="hljs-number">100</span>);
                        timer.<span class="hljs-property">progress</span> = progress;
                        
                        <span class="hljs-comment">// å¦‚æœæ˜¯intervalç±»å‹ï¼Œè¿›åº¦æ¡ä¼šå¾ªç¯</span>
                        <span class="hljs-keyword">if</span> (timer.<span class="hljs-property">type</span> === <span class="hljs-string">'interval'</span> &amp;&amp; progress &gt;= <span class="hljs-number">100</span>) {
                            timer.<span class="hljs-property">startTime</span> = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
                        }
                    });
                };
                
                <span class="hljs-comment">// åˆ‡æ¢å­ç»„ä»¶æ˜¾ç¤º</span>
                <span class="hljs-keyword">const</span> <span class="hljs-title function_">toggleComponent</span> = (<span class="hljs-params"/>) =&gt; {
                    showChildComponent.<span class="hljs-property">value</span> = !showChildComponent.<span class="hljs-property">value</span>;
                };
                
                <span class="hljs-comment">// è®¾ç½®ä¸€ä¸ªå®šæ—¶å™¨æ¥æ›´æ–°è¿›åº¦æ¡</span>
                <span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> {
                    <span class="hljs-built_in">setInterval</span>(updateProgressBars, <span class="hljs-number">100</span>);
                });
                
                <span class="hljs-keyword">return</span> {
                    timers,
                    timerType,
                    timerDuration,
                    timerMessage,
                    showChildComponent,
                    activeTimers,
                    activeTimersCount,
                    clearedTimersCount,
                    totalTimersCount,
                    addTimer,
                    clearTimer,
                    clearAllTimers,
                    toggleComponent
                };
            }
        });
        
        app.<span class="hljs-title function_">mount</span>(<span class="hljs-string">'#app'</span>);
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Electron çš„æ‰“åŒ…]]></title>    <link>https://juejin.cn/post/7576853741757923362</link>    <guid>https://juejin.cn/post/7576853741757923362</guid>    <pubDate>2025-11-26T12:50:57.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576853741757923362" data-draft-id="7576894778571571235" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Electron çš„æ‰“åŒ…"/> <meta itemprop="keywords" content="Electron"/> <meta itemprop="datePublished" content="2025-11-26T12:50:57.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸€åƒæŸ¯æ©˜"/> <meta itemprop="url" content="https://juejin.cn/user/2010369939736343"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Electron çš„æ‰“åŒ…
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2010369939736343/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸€åƒæŸ¯æ©˜
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T12:50:57.000Z" title="Wed Nov 26 2025 12:50:57 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{position:relative;word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#333}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:30px;margin-bottom:5px}.markdown-body h2{font-size:24px;display:inline-block;font-weight:700;background:#ef7060;color:#fff;padding:6px 8px 0 0;border-top-right-radius:6px;margin-right:2px;box-shadow:6px 3px 0 0 rgba(239,112,96,.2)}.markdown-body h2:before{content:" ";display:inline-block;width:8px}.markdown-body h2:after{content:" ";position:absolute;display:block;width:calc(100% - 50px);border-bottom:3px solid #ef7060}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #3e3e3e;margin-top:32px;margin-bottom:32px;height:1px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(27,31,35,.05);color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:JetBranins Mono,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px;background-color:#fdfdfd}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#fdfdfd}.markdown-body a{text-decoration:none;font-weight:700;color:#ef7060;border-bottom:1px solid #ef7060}.markdown-body a:active,.markdown-body a:hover{color:#ef2d26}.markdown-body table tr td,.markdown-body table tr th{border:1px solid #ccc;padding:5px 10px}.markdown-body table{display:block!important;width:auto;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{background:#f0f0f0;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#f8f8f8}.markdown-body blockquote{margin-inline-start:0;margin-inline-end:0;border-left:3px solid #ef7060;background:#fff9f9;padding:1px 20px;margin-top:20px}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atelier-sulphurpool-dark">.hljs-comment,.hljs-quote{color:#898ea4}.hljs-attribute,.hljs-link,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#c94922}.hljs-built_in,.hljs-builtin-name,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#c76b29}.hljs-bullet,.hljs-string,.hljs-symbol{color:#ac9739}.hljs-section,.hljs-title{color:#3d8fd1}.hljs-keyword,.hljs-selector-tag{color:#6679cc}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#202746;color:#979db4}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>Electron Forge æ˜¯ Electron apps ä¸€ä½“åŒ–çš„ æ‰“åŒ…å’Œåˆ†å‘å·¥å…·ï¼ŒåŠå°†å¼€å‘å¥½çš„ Electron åº”ç”¨æ‰“åŒ…ä¸ºå¯å®‰è£…ï¼Œå¯æ‰§è¡Œçš„æ–‡ä»¶ï¼Œæœ€ç»ˆäº¤ä»˜ç»™ç»ˆç«¯ç”¨æˆ·çš„æ ¸å¿ƒè¿‡ç¨‹</p>
</blockquote>
<h2 data-id="heading-0">å¦‚ä½•æ‰“åŒ…ï¼ˆmac ä¸ºğŸŒ°ï¼‰</h2>
<ol>
<li>å®‰è£… Electron Forge's CLI åˆ° <code>devDependencies</code>ï¼Œå¹¶ä¸”ä½¿ç”¨è„šæœ¬å°†é¡¹ç›®å¯¼å…¥åˆ° Forge ä¸­</li>
</ol>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// å®‰è£… Electron Forge's CLI åˆ° `devDependencies`</span>
npm install --save-dev @electron-forge/cli

<span class="hljs-comment">// å°†é¡¹ç›®å¯¼å…¥åˆ° Forge ä¸­</span>
npx electron-forge <span class="hljs-keyword">import</span>
</code></pre>
<p>ä¸€æ—¦å°†é¡¹ç›®å¯¼å…¥åˆ° Forge çš„è„šæœ¬å®Œæˆäº†ï¼ŒForge å°†ä¼šæ·»åŠ ä¸€äº›è„šæœ¬åˆ° yourÂ <code>package.json</code> ä¸­</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">//...</span>
<span class="hljs-string">"scripts"</span>: {
    <span class="hljs-string">"start"</span>: <span class="hljs-string">"electron-forge start"</span>,
    <span class="hljs-string">"package"</span>: <span class="hljs-string">"electron-forge package"</span>,
    <span class="hljs-string">"make"</span>: <span class="hljs-string">"electron-forge make"</span>
},
<span class="hljs-comment">//...</span>
</code></pre>
<ol start="2">
<li>åˆ›å»ºåˆ†å‘æ–‡ä»¶</li>
</ol>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// æ‰§è¡Œè¿™ä¸ªè„šæœ¬çš„æ—¶å€™å°†ä¼šæ ¹æ®å½“å‰ç³»ç»Ÿæ¥æ‰“åŒ…å¯¹åº”çš„å¯è¿è¡Œæ–‡ä»¶ï¼Œ</span>
<span class="hljs-comment">// æ¯”å¦‚ mac åœ¨é¡¹ç›®çš„ out/make/zip/darwin/arm64/$packageName-darwin-arm64-1.0.0.zip ä¸­</span>
pnpm run make
</code></pre>
<ol start="4">
<li>æ‰“å¼€å¯¹åº”çš„æ–‡ä»¶å¤¹ï¼Œè§£å‹ zip æ–‡ä»¶ï¼ŒåŒå‡»æ–‡ä»¶å³å¯</li>
</ol>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/646b1e9236fb48bc9a6bfba7f5e21d21~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5Y2D5p-v5qmY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764767152&amp;x-signature=%2FDn8QvrNaVGE2EDu2Tbvztsaqns%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c70d5c7dac6342da8e007ac8735d5f86~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5Y2D5p-v5qmY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764767152&amp;x-signature=Hqbg3ELMr0sl8sRuwTkpGW%2FcSDM%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-1">æ‰“åŒ…çš„é—®é¢˜</h2>
<ol>
<li>æ‰“åŒ…ä¸åŒçš„æ ¼å¼æ¥é€‚åº”ä¸åŒçš„æœºå™¨</li>
</ol>
<p>ç­”ï¼šä½¿ç”¨ GitHub Actions / CI ç”Ÿæˆåœ¨ä¸åŒçš„ runner ç”Ÿæˆä¸åŒçš„åŒ…ï¼Œæ¯”å¦‚ Windows çš„å°±ä½¿ç”¨ Windows çš„ runner</p>
<ol start="2">
<li>å¦‚ä½•è‡ªå®šä¹‰ icon
ç­”ï¼šç›´æ¥å‚è€ƒ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.electronforge.io%2Fguides%2Fcreate-and-add-icons%23windows-and-macos" target="_blank" title="https://www.electronforge.io/guides/create-and-add-icons#windows-and-macos" ref="nofollow noopener noreferrer">www.electronforge.io/guides/creaâ€¦</a> ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯è¦ä¸ºä¸åŒçš„ç³»ç»Ÿå‡†å¤‡ä¸åŒçš„ icon åç¼€ï¼Œé…ç½®çš„æ—¶å€™ä¸è¦æŒ‡å®š icon çš„åç¼€</li>
</ol>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// æ¯”å¦‚æˆ‘æ˜¯å°†æ–‡ä»¶æ”¾åˆ° public/images ä¸­</span>
public
  - images
     - icon.<span class="hljs-property">icns</span>
     - icon.<span class="hljs-property">xxx</span>

<span class="hljs-comment">// forge.config.js</span>
<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-comment">// ...</span>
  <span class="hljs-attr">packagerConfig</span>: {
    <span class="hljs-attr">icon</span>: <span class="hljs-string">'public/images/icon'</span> <span class="hljs-comment">// no file extension required</span>
  }
  <span class="hljs-comment">// ...</span>
};
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9f71b548009249ac8b00110f37e500fc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5Y2D5p-v5qmY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764767152&amp;x-signature=5y2DZFm9xdV5m725zLNc88sLjP4%3D" alt="image.png" loading="lazy"/></p>
<p>æœ€ç»ˆç»“æœ</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d0179565939b441a9723f169c30726a8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5Y2D5p-v5qmY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764767152&amp;x-signature=oylrNqwdywqIR7jXplbeoviVpFA%3D" alt="image.png" loading="lazy"/></p>
<ol start="3">
<li>æ€ä¹ˆä»£ç ç­¾å
ä»£ç ç­¾åæ˜¯å‘å¸ƒæ¡Œé¢åº”ç”¨ç¨‹åºçš„é‡è¦ç¯èŠ‚ï¼Œå¹¶ä¸”åœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.electronjs.org%2Fdocs%2Flatest%2Ftutorial%2Ftutorial-publishing-updating" target="_blank" title="https://www.electronjs.org/docs/latest/tutorial/tutorial-publishing-updating" ref="nofollow noopener noreferrer">è‡ªåŠ¨æ›´æ–°æ­¥éª¤</a>ä¸­æ˜¯å¿…ä¸å¯å°‘çš„ï¼Œéœ€è¦å»å¯¹åº”çš„ç³»ç»Ÿç”³è¯·ä¸åŒçš„è®¤è¯æ–¹å¼ï¼ŒmacOS çš„ TEAM_ID éœ€è¦é’±ï¼Œå¦‚æœ‰éœ€è¦è‡ªè¡Œç”³è¯·</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ·±å…¥ JavaScript äº‹ä»¶æœºåˆ¶ï¼šä»å†’æ³¡åˆ°äº‹ä»¶å§”æ‰˜çš„é«˜æ•ˆå®è·µ]]></title>    <link>https://juejin.cn/post/7576838095519563827</link>    <guid>https://juejin.cn/post/7576838095519563827</guid>    <pubDate>2025-11-26T12:57:02.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576838095519563827" data-draft-id="7576853741757956130" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ·±å…¥ JavaScript äº‹ä»¶æœºåˆ¶ï¼šä»å†’æ³¡åˆ°äº‹ä»¶å§”æ‰˜çš„é«˜æ•ˆå®è·µ"/> <meta itemprop="keywords" content="JavaScript"/> <meta itemprop="datePublished" content="2025-11-26T12:57:02.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Zyx2007"/> <meta itemprop="url" content="https://juejin.cn/user/3924597867554890"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ·±å…¥ JavaScript äº‹ä»¶æœºåˆ¶ï¼šä»å†’æ³¡åˆ°äº‹ä»¶å§”æ‰˜çš„é«˜æ•ˆå®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3924597867554890/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Zyx2007
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T12:57:02.000Z" title="Wed Nov 26 2025 12:57:02 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨å‰ç«¯å¼€å‘ä¸­ï¼Œç”¨æˆ·ä¸é¡µé¢çš„æ¯ä¸€æ¬¡ç‚¹å‡»ã€æ»šåŠ¨æˆ–è¾“å…¥ï¼ŒèƒŒåéƒ½ä¾èµ–äºä¸€å¥—ç²¾å¯†è€Œå¼ºå¤§çš„äº‹ä»¶ç³»ç»Ÿã€‚JavaScript çš„äº‹ä»¶æœºåˆ¶ä¸ä»…æ˜¯äº¤äº’åŠŸèƒ½çš„æ ¸å¿ƒï¼Œæ›´æ˜¯ç†è§£ DOM è¡Œä¸ºã€ä¼˜åŒ–æ€§èƒ½çš„å…³é”®ã€‚æœ¬æ–‡å°†å¸¦ä½ æ·±å…¥å‰–æäº‹ä»¶çš„ä¼ æ’­è¿‡ç¨‹ï¼Œå¹¶å±•ç¤ºå¦‚ä½•é€šè¿‡äº‹ä»¶å§”æ‰˜æ˜¾è‘—æå‡ä»£ç æ•ˆç‡ã€‚</p>
<h2 data-id="heading-0">äº‹ä»¶çš„ç”Ÿå‘½å‘¨æœŸï¼šæ•è·ã€ç›®æ ‡ä¸å†’æ³¡</h2>
<p>å½“ç”¨æˆ·ç‚¹å‡»é¡µé¢ä¸Šçš„ä¸€ä¸ªå…ƒç´ æ—¶ï¼Œäº‹ä»¶å¹¶éåªåœ¨è¯¥å…ƒç´ ä¸Šâ€œå‘ç”Ÿâ€ä¸€æ¬¡ï¼Œè€Œæ˜¯æ²¿ç€ DOM æ ‘ç»å†ä¸‰ä¸ªé˜¶æ®µï¼š</p>
<ol>
<li><strong>æ•è·é˜¶æ®µï¼ˆCaptureï¼‰</strong> ï¼šäº‹ä»¶ä» <code>document</code> æ ¹èŠ‚ç‚¹å¼€å§‹ï¼Œé€å±‚å‘ä¸‹ä¼ é€’ï¼Œç›´åˆ°ç›®æ ‡å…ƒç´ çš„çˆ¶çº§ã€‚</li>
<li><strong>ç›®æ ‡é˜¶æ®µï¼ˆTargetï¼‰</strong> ï¼šäº‹ä»¶åˆ°è¾¾å®é™…è¢«ç‚¹å‡»çš„å…ƒç´ ï¼ˆå³ <code>event.target</code>ï¼‰ã€‚</li>
<li><strong>å†’æ³¡é˜¶æ®µï¼ˆBubbleï¼‰</strong> ï¼šäº‹ä»¶ä»ç›®æ ‡å…ƒç´ å‘ä¸Šå›æº¯ï¼Œä¾æ¬¡ç»è¿‡å…¶ç¥–å…ˆèŠ‚ç‚¹ï¼Œç›´è‡³ <code>document</code>ã€‚</li>
</ol>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬é€šè¿‡ <code>addEventListener</code> æ³¨å†Œçš„ç›‘å¬å™¨ä¼šåœ¨<strong>å†’æ³¡é˜¶æ®µ</strong>è§¦å‘ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'parent'</span>).<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'parent click'</span>);
});
<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'child'</span>).<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'child click'</span>);
});
</code></pre>
<p>æ­¤æ—¶ç‚¹å‡»è“è‰²å­å…ƒç´ ï¼ˆ<code>#child</code>ï¼‰ï¼Œæ§åˆ¶å°ä¼šä¾æ¬¡è¾“å‡ºï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">child click
parent click
</code></pre>
<p>è¿™æ˜¯å› ä¸ºäº‹ä»¶å…ˆåœ¨å­å…ƒç´ è§¦å‘ï¼ˆç›®æ ‡é˜¶æ®µï¼‰ï¼Œéšåâ€œå†’æ³¡â€åˆ°çˆ¶å…ƒç´ ã€‚</p>
<p>è‹¥å¸Œæœ›åœ¨æ•è·é˜¶æ®µæ‰§è¡Œé€»è¾‘ï¼Œå¯ä¼ å…¥ç¬¬ä¸‰ä¸ªå‚æ•° <code>true</code>ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">element.<span class="hljs-built_in">addEventListener</span>(<span class="hljs-string">'click'</span>, handler, <span class="hljs-literal">true</span>); <span class="hljs-comment">// æ•è·é˜¶æ®µ</span>
</code></pre>
<p>ä½†ç»å¤§å¤šæ•°åœºæ™¯ä¸‹ï¼Œå†’æ³¡å·²è¶³å¤Ÿä½¿ç”¨ã€‚</p>
<h2 data-id="heading-1">é˜»æ­¢äº‹ä»¶ä¼ æ’­ï¼šç²¾å‡†æ§åˆ¶è¡Œä¸º</h2>
<p>æœ‰æ—¶ï¼Œæˆ‘ä»¬ä¸å¸Œæœ›äº‹ä»¶ç»§ç»­å‘ä¸Šå†’æ³¡ã€‚ä¾‹å¦‚ï¼Œç‚¹å‡»å­å…ƒç´ æ—¶ä»…æ‰§è¡Œå…¶è‡ªèº«é€»è¾‘ï¼Œè€Œä¸è§¦å‘çˆ¶å®¹å™¨çš„å“åº”ã€‚è¿™æ—¶å¯è°ƒç”¨ <code>event.stopPropagation()</code>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'child'</span>).<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
    event.<span class="hljs-title function_">stopPropagation</span>(); <span class="hljs-comment">// é˜»æ­¢å†’æ³¡</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'child click'</span>);
});
</code></pre>
<p>ç°åœ¨ç‚¹å‡»å­å…ƒç´ ï¼Œåªä¼šè¾“å‡º <code>child click</code>ï¼Œçˆ¶å…ƒç´ çš„ç›‘å¬å™¨ä¸å†è¢«è§¦å‘ã€‚è¿™ç§æ§åˆ¶èƒ½åŠ›å¯¹äºæ¨¡æ€æ¡†ã€ä¸‹æ‹‰èœå•ç­‰ç»„ä»¶è‡³å…³é‡è¦ï¼Œèƒ½æœ‰æ•ˆé¿å…â€œç©¿é€ç‚¹å‡»â€é—®é¢˜ã€‚</p>
<h2 data-id="heading-2">äº‹ä»¶å§”æ‰˜ï¼šæ€§èƒ½ä¸ç»´æŠ¤æ€§çš„åŒèµ¢ç­–ç•¥</h2>
<p>ä¼ ç»Ÿåšæ³•ä¸­ï¼Œè‹¥è¦ä¸ºå¤šä¸ªç›¸ä¼¼å…ƒç´ ï¼ˆå¦‚åˆ—è¡¨é¡¹ï¼‰ç»‘å®šç‚¹å‡»äº‹ä»¶ï¼Œå¾€å¾€ä¼šéå†æ¯ä¸ªèŠ‚ç‚¹å•ç‹¬æ³¨å†Œç›‘å¬å™¨ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">// ä¸æ¨èï¼šä¸ºæ¯ä¸ª &lt;li&gt; å•ç‹¬ç»‘å®š
const <span class="hljs-attr">items</span> = document.querySelectorAll(<span class="hljs-string">'#list li'</span>)<span class="hljs-comment">;</span>
items.forEach(<span class="hljs-attr">item</span> =&gt; {
    item.addEventListener('click', () =&gt; {
        console.log(item.textContent)<span class="hljs-comment">;</span>
    })<span class="hljs-comment">;</span>
})<span class="hljs-comment">;</span>
</code></pre>
<p>è¿™ç§æ–¹å¼å­˜åœ¨ä¸¤ä¸ªæ˜æ˜¾ç¼ºé™·ï¼š</p>
<ul>
<li><strong>å†…å­˜å¼€é”€å¤§</strong>ï¼šæ¯ä¸ªå…ƒç´ éƒ½æŒæœ‰ä¸€ä¸ªç‹¬ç«‹çš„ç›‘å¬å‡½æ•°å¼•ç”¨ï¼›</li>
<li><strong>åŠ¨æ€å†…å®¹æ— æ³•è¦†ç›–</strong>ï¼šåç»­é€šè¿‡ JavaScript æ–°å¢çš„ <code>&lt;li&gt;</code> ä¸ä¼šè‡ªåŠ¨ç»‘å®šäº‹ä»¶ã€‚</li>
</ul>
<p>è€Œ<strong>äº‹ä»¶å§”æ‰˜ï¼ˆEvent Delegationï¼‰</strong> å·§å¦™åœ°åˆ©ç”¨äº†äº‹ä»¶å†’æ³¡ç‰¹æ€§ï¼Œå°†ç›‘å¬å™¨ç»Ÿä¸€æŒ‚è½½åˆ°çˆ¶å®¹å™¨ä¸Šï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'list'</span>).<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (event.<span class="hljs-property">target</span>.<span class="hljs-property">tagName</span> === <span class="hljs-string">'LI'</span>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(event.<span class="hljs-property">target</span>.<span class="hljs-property">textContent</span>);
    }
});
</code></pre>
<p>æ— è®ºåˆ—è¡¨ä¸­æœ‰å¤šå°‘é¡¹ï¼Œç”šè‡³æœªæ¥åŠ¨æ€æ·»åŠ æ–°é¡¹ï¼Œéƒ½åªéœ€<strong>ä¸€ä¸ªç›‘å¬å™¨</strong>å³å¯å¤„ç†æ‰€æœ‰ç‚¹å‡»ã€‚<code>event.target</code> å§‹ç»ˆæŒ‡å‘å®é™…è¢«ç‚¹å‡»çš„å…ƒç´ ï¼Œä»è€Œå®ç°ç²¾å‡†è¯†åˆ«ã€‚</p>
<p>è¿™ç§æ¨¡å¼ä¸ä»…èŠ‚çœå†…å­˜ï¼Œè¿˜æå¤§æå‡äº†ä»£ç çš„å¯ç»´æŠ¤æ€§â€”â€”æ–°å¢æˆ–åˆ é™¤å­å…ƒç´ æ—¶ï¼Œæ— éœ€é‡æ–°ç»‘å®šäº‹ä»¶ã€‚</p>
<h2 data-id="heading-3">ä¸ºä»€ä¹ˆäº‹ä»¶å¿…é¡»ç»‘å®šåˆ°å•ä¸ª DOM èŠ‚ç‚¹ï¼Ÿ</h2>
<p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œ<code>addEventListener</code> åªèƒ½ä½œç”¨äº<strong>å•ä¸ª DOM å…ƒç´ </strong>ï¼Œä¸èƒ½ç›´æ¥åº”ç”¨äº NodeList æˆ– HTMLCollectionã€‚è¿™ä¹Ÿæ˜¯ä¸ºä½•æ—©æœŸå¼€å‘è€…å¸¸è¯¯å†™ï¼š</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// é”™è¯¯ï¼querySelectorAll è¿”å›çš„æ˜¯ç±»æ•°ç»„ï¼Œæ²¡æœ‰ addEventListener æ–¹æ³•</span>
<span class="hljs-built_in">document</span>.<span class="hljs-built_in">querySelectorAll</span>(<span class="hljs-string">'li'</span>).addEventListener(<span class="hljs-string">'click'</span>, handler); <span class="hljs-comment">// æŠ¥é”™</span>
</code></pre>
<p>æ­£ç¡®çš„åšæ³•è¦ä¹ˆéå†ç»‘å®šï¼ˆä½æ•ˆï¼‰ï¼Œè¦ä¹ˆé‡‡ç”¨äº‹ä»¶å§”æ‰˜ï¼ˆé«˜æ•ˆï¼‰ã€‚è¿™ä¹Ÿä»ä¾§é¢å°è¯äº†äº‹ä»¶å§”æ‰˜çš„ä¼˜è¶Šæ€§ã€‚</p>
<h2 data-id="heading-4">å¼‚æ­¥ä¸æ³¨å†Œæ—¶æœº</h2>
<p>JavaScript äº‹ä»¶æ˜¯å…¸å‹çš„å¼‚æ­¥æœºåˆ¶ï¼šç›‘å¬å™¨éœ€<strong>æå‰æ³¨å†Œ</strong>ï¼Œå¾…ç”¨æˆ·äº¤äº’å‘ç”Ÿæ—¶æ‰è¢«è°ƒç”¨ã€‚è¿™æ„å‘³ç€ï¼š</p>
<ul>
<li>äº‹ä»¶å¤„ç†å‡½æ•°ä¸ä¼šç«‹å³æ‰§è¡Œï¼›</li>
<li>è‹¥åœ¨ DOM å°šæœªåŠ è½½å®Œæˆæ—¶å°è¯•ç»‘å®šï¼Œå¯èƒ½å› å…ƒç´ ä¸å­˜åœ¨è€Œå¤±è´¥ã€‚</li>
</ul>
<p>å› æ­¤ï¼Œé€šå¸¸å°†äº‹ä»¶ç»‘å®šä»£ç ç½®äº <code>DOMContentLoaded</code> ä¹‹åï¼Œæˆ–ä½¿ç”¨ç°ä»£æ¡†æ¶çš„ç”Ÿå‘½å‘¨æœŸé’©å­ç¡®ä¿ DOM å°±ç»ªã€‚</p>
<h2 data-id="heading-5">æ€»ç»“ï¼šæ„å»ºå¥å£®äº¤äº’çš„åŸºçŸ³</h2>
<p>JavaScript çš„äº‹ä»¶æœºåˆ¶è¿œä¸æ­¢â€œç‚¹å‡»ä¸€ä¸‹å¼¹ä¸ªçª—â€é‚£ä¹ˆç®€å•ã€‚ç†è§£æ•è·ä¸å†’æ³¡çš„æµç¨‹ï¼ŒæŒæ¡ <code>stopPropagation</code> çš„ä½¿ç”¨æ—¶æœºï¼Œå–„ç”¨äº‹ä»¶å§”æ‰˜ä¼˜åŒ–æ€§èƒ½ï¼Œæ˜¯æ¯ä¸€ä½å‰ç«¯å¼€å‘è€…è¿›é˜¶çš„å¿…ç»ä¹‹è·¯ã€‚</p>
<p>åœ¨å®é™…é¡¹ç›®ä¸­ï¼š</p>
<ul>
<li>å¯¹äºé™æ€ã€å°‘é‡å…ƒç´ ï¼Œå¯ç›´æ¥ç»‘å®šï¼›</li>
<li>å¯¹äºåˆ—è¡¨ã€è¡¨æ ¼ã€åŠ¨æ€å†…å®¹ï¼Œ<strong>ä¼˜å…ˆä½¿ç”¨äº‹ä»¶å§”æ‰˜</strong>ï¼›</li>
<li>åœ¨éœ€è¦éš”ç¦»è¡Œä¸ºçš„åµŒå¥—ç»„ä»¶ä¸­ï¼Œåˆç†ä½¿ç”¨ <code>stopPropagation</code> é¿å…å¹²æ‰°ã€‚</li>
</ul>
<p>äº‹ä»¶ç³»ç»Ÿå¦‚åŒåŸå¸‚çš„äº¤é€šç½‘ç»œâ€”â€”çœ‹ä¼¼æ— å½¢ï¼Œå´æ”¯æ’‘ç€æ•´ä¸ªç•Œé¢çš„æµç•…è¿è½¬ã€‚æŒæ¡å…¶è§„åˆ™ï¼Œä½ ä¾¿èƒ½åœ¨å¤æ‚çš„äº¤äº’éœ€æ±‚ä¸­æ¸¸åˆƒæœ‰ä½™ï¼Œå†™å‡ºæ—¢é«˜æ•ˆåˆç¨³å®šçš„å‰ç«¯ä»£ç ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Webpacké«˜çº§ä¹‹å¸¸ç”¨é…ç½®é¡¹]]></title>    <link>https://juejin.cn/post/7576843726011924506</link>    <guid>https://juejin.cn/post/7576843726011924506</guid>    <pubDate>2025-11-26T13:59:30.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576843726011924506" data-draft-id="7577001324416696370" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Webpacké«˜çº§ä¹‹å¸¸ç”¨é…ç½®é¡¹"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,é¢è¯•"/> <meta itemprop="datePublished" content="2025-11-26T13:59:30.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç§€ç§€ä¸åªä¼šå‰ç«¯"/> <meta itemprop="url" content="https://juejin.cn/user/1410009035452887"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Webpacké«˜çº§ä¹‹å¸¸ç”¨é…ç½®é¡¹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1410009035452887/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç§€ç§€ä¸åªä¼šå‰ç«¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T13:59:30.000Z" title="Wed Nov 26 2025 13:59:30 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¸¸ç”¨é…ç½®é¡¹â€”â€”Mode</h2>
<p>é»˜è®¤å€¼æ˜¯ productionï¼ˆä»€ä¹ˆéƒ½ä¸è®¾ç½®çš„æƒ…å†µä¸‹ï¼‰ï¼›å¯é€‰å€¼æœ‰ï¼š'none' | 'development' | 'production'ã€‚</p>
<ul>
<li>developmentï¼šä¼šå°† DefinePlugin ä¸­ process.env.NODE_ENV çš„å€¼è®¾ç½®ä¸º developmentï¼Œä¸ºæ¨¡å—å’Œ chunk å¯ç”¨æœ‰æ•ˆçš„åã€‚</li>
<li>productionï¼šä¼šå°† DefinePlugin ä¸­ process.env.NODE_ENV çš„å€¼è®¾ç½®ä¸º productionï¼Œä¸ºæ¨¡å—å’Œ chunk å¯ç”¨ç¡®å®šæ€§çš„æ··æ·†åç§°ã€‚</li>
<li>noneï¼šä¸ä½¿ç”¨ä»»ä½•é»˜è®¤ä¼˜åŒ–é€‰é¡¹</li>
</ul>
<h2 data-id="heading-1">å¸¸ç”¨é…ç½®é¡¹â€”â€”Source Map</h2>
<h3 data-id="heading-2">ä¸€ã€å¦‚ä½•åœ¨ Webpack ä¸­å¯ç”¨ Source Map</h3>
<p>åœ¨ <code>webpack.config.js</code> ä¸­ï¼Œé€šè¿‡é…ç½® <code>devtool</code> é€‰é¡¹æ¥æ§åˆ¶æ˜¯å¦ç”Ÿæˆ source map ä»¥åŠç”Ÿæˆçš„ç±»å‹ï¼š</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-comment">// ...</span>
  <span class="hljs-attr">devtool</span>: <span class="hljs-string">'source-map'</span>, <span class="hljs-comment">// æˆ–å…¶ä»–å€¼</span>
};
</code></pre>
<h3 data-id="heading-3">äºŒã€å¸¸è§çš„ <code>devtool</code> é€‰é¡¹åŠå…¶åŒºåˆ«</h3>
<blockquote>
<p>ğŸ’¡ â€‹<strong>å®è·µå»ºè®®</strong>â€‹ï¼š</p>
<ul>
<li>â€‹<strong>å¼€å‘/æµ‹è¯•ç¯å¢ƒ</strong>â€‹ï¼šå¸¸ç”¨ <code>eval-cheap-module-source-map</code>ï¼ˆé€Ÿåº¦å¿« + èƒ½å®šä½åˆ°åŸå§‹æ¨¡å—ï¼‰</li>
<li>â€‹<strong>ç”Ÿäº§ç¯å¢ƒ</strong>â€‹ï¼š
<ul>
<li>å¦‚æœéœ€è¦é”™è¯¯ç›‘æ§ï¼ˆå¦‚ Sentryï¼‰ï¼Œå¯ä½¿ç”¨ <code>hidden-source-map</code> æˆ– <code>nosources-source-map</code>
<ul>
<li>é€šè¿‡ <code>sentry-cli</code> å°† <code>.map</code> æ–‡ä»¶ä¸Šä¼ åˆ° Sentry</li>
<li>ç”¨æˆ·æŠ¥é”™æ—¶ï¼ŒSentry åˆ©ç”¨ source map è‡ªåŠ¨è¿˜åŸåŸå§‹é”™è¯¯ä½ç½®</li>
</ul>
</li>
<li>ä¸€èˆ¬ä¸ç›´æ¥æš´éœ²å®Œæ•´ <code>source-map</code>ï¼Œä»¥é˜²æºç æ³„éœ²</li>
</ul>
</li>
</ul>
</blockquote>
<h3 data-id="heading-4">ä¸‰ã€Source Map çš„å·¥ä½œåŸç†ç®€è¿°</h3>
<ol>
<li>Webpack åœ¨æ‰“åŒ…æ—¶æ ¹æ® <code>devtool</code> é…ç½®ç”Ÿæˆ <code>.map</code> æ–‡ä»¶ï¼ˆå¦‚ <code>main.js.map</code>ï¼‰</li>
<li>åœ¨è¾“å‡ºçš„ bundle æ–‡ä»¶ï¼ˆè½¬æ¢åçš„æ–‡ä»¶ï¼‰æœ«å°¾æ·»åŠ ä¸€è¡Œé­”æ³•æ³¨é‡Šï¼š</li>
</ol>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-comment">//# sourceMappingURL=main.js.map</span>
</code></pre>
<ol start="3">
<li>æµè§ˆå™¨ DevTools è‡ªåŠ¨åŠ è½½è¯¥ <code>.map</code> æ–‡ä»¶ï¼Œå¹¶å°†å‹ç¼©ä»£ç æ˜ å°„å›åŸå§‹æºç </li>
<li>å¼€å‘è€…å¯ä»¥åœ¨ DevTools ä¸­åƒè°ƒè¯•åŸå§‹ä»£ç ä¸€æ ·è®¾ç½®æ–­ç‚¹ã€æŸ¥çœ‹å˜é‡ç­‰</li>
</ol>
<h2 data-id="heading-5">å¸¸ç”¨é…ç½®é¡¹â€”â€”Babelã€Browserslistã€<strong>Polyfill</strong></h2>
<p>è§ä¹‹å‰çš„æ–‡ç« ï¼šã€Šèº«ä¸ºå¤§å‚å‰ç«¯çš„ä½ ï¼Œä¸èƒ½ä¸çŸ¥é“ Babel + Polyfillï¼ã€‹</p>
<h2 data-id="heading-6">å¸¸ç”¨é…ç½®é¡¹â€”â€”devServer</h2>
<p>ä½ æœ‰æ²¡æœ‰æƒ³è¿‡ä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¹²å‰ç«¯çš„ï¼Œä¸ºä»€ä¹ˆè¦åœ¨æ„å»ºå·¥ä½œå†…åµŒä¸€ä¸ªæœåŠ¡å™¨ï¼ˆdevServerï¼‰ã€‚</p>
<p>åŸå› å…¶å®æœ‰è¿™ä¹ˆä¸¤ä¸ªï¼š</p>
<ol>
<li>æ–‡ä»¶å˜åŒ–æ—¶å®Œæˆè‡ªåŠ¨æ„å»º</li>
<li>å¯åŠ¨ä¸€ä¸ªæœåŠ¡æŸ¥çœ‹é¡µé¢å±•ç¤ºï¼ˆæœ€æœ€ä¹‹å‰æˆ‘ä»¬å­¦ html çš„æ—¶å€™ä¹Ÿæ˜¯é€šè¿‡ live server å¯åŠ¨çš„ä¸€ä¸ªå†…ç½®æœåŠ¡å™¨æŸ¥çœ‹é¡µé¢ï¼‰</li>
</ol>
<blockquote>
<p>webpack-dev-server åœ¨ç¼–è¯‘ä¹‹åä¸ä¼šå†™å…¥åˆ°ä»»ä½•è¾“å‡ºæ–‡ä»¶ï¼Œè€Œæ˜¯å°† bundle æ–‡ä»¶ä¿ç•™åœ¨å†…å­˜ä¸­ã€‚</p>
</blockquote>
<p>å¸¸è§é…ç½®ï¼š</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-attr">devServer</span>: {
  <span class="hljs-attr">host</span>: <span class="hljs-string">'0.0.0.0'</span>, <span class="hljs-comment">// å…è®¸å¤–éƒ¨è®¿é—®ï¼ˆå¦‚æ‰‹æœºè°ƒè¯•ï¼‰</span>
  <span class="hljs-attr">port</span>: <span class="hljs-number">3000</span>,
  <span class="hljs-attr">open</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// å¯åŠ¨åè‡ªåŠ¨æ‰“å¼€é»˜è®¤æµè§ˆå™¨</span>
  <span class="hljs-attr">hot</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// å¯ç”¨ HMRï¼ˆæ¨¡å—çƒ­æ›´æ–°ï¼‰</span>
  <span class="hljs-attr">static</span>: { <span class="hljs-comment">// æŒ‡å®šé™æ€èµ„æºç›®å½•ï¼ˆå¦‚ public æ–‡ä»¶å¤¹ï¼‰</span>
    <span class="hljs-attr">directory</span>: path.<span class="hljs-title function_">join</span>(__dirname, <span class="hljs-string">'public'</span>), <span class="hljs-comment">// é™æ€èµ„æºæ ¹ç›®å½•</span>
    <span class="hljs-attr">publicPath</span>: <span class="hljs-string">'/'</span>, <span class="hljs-comment">// è®¿é—®è·¯å¾„å‰ç¼€</span>
    <span class="hljs-attr">watch</span>: <span class="hljs-literal">true</span>,     <span class="hljs-comment">// ç›‘å¬å˜åŒ–å¹¶åˆ·æ–°</span>
  },
  <span class="hljs-attr">compress</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// æ˜¯å¦ä¸ºé™æ€æ–‡ä»¶å¼€å¯ gzipå‹ç¼©ï¼Œé»˜è®¤ä¸ºfalse</span>
  <span class="hljs-attr">proxy</span>: { <span class="hljs-comment">// ä¸€èˆ¬ç”¨äºå¼€å‘ç¯å¢ƒåå‘ä»£ç†é¿å…CORS</span>
    <span class="hljs-string">'/api'</span>: {
      <span class="hljs-attr">target</span>: <span class="hljs-string">'http://localhost:8080'</span>,
      <span class="hljs-attr">changeOrigin</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// æ”¹å˜è¯·æ±‚å¤´ä¸­çš„ host</span>
      <span class="hljs-attr">pathRewrite</span>: {
        <span class="hljs-string">'^/api'</span>: <span class="hljs-string">''</span>, <span class="hljs-comment">// é‡å†™è·¯å¾„ï¼Œå»æ‰ /api å‰ç¼€</span>
      },
    },
  },
  <span class="hljs-attr">historyApiFallback</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// è§£å†³SPAé¡µé¢åœ¨è·¯ç”±è·³è½¬ä¹‹åï¼Œè¿›è¡Œé¡µé¢åˆ·æ–°æ—¶ï¼Œè¿”å›404çš„é”™è¯¯</span>
}
</code></pre>
<blockquote>
<ul>
<li>é»˜è®¤ <code>localhost</code>ï¼ˆä»…æœ¬æœºè®¿é—®ï¼‰ï¼Œè¿™é‡Œæˆ‘ä»¬åœ¨å®é™…å¼€å‘ä¸­å¯èƒ½ä¼šé‡åˆ°ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯åç«¯åŒå­¦æ— æ³•é€šè¿‡æˆ‘ä»¬é¡¹ç›®çš„ ip åœ°å€è®¿é—®ï¼Œè¿™æ˜¯å› ä¸ºä½ å’Œä»–çš„ä¸»æœºå¤„äºåŒä¸€ç½‘æ®µ</li>
<li>è®¾ä¸º <code>'0.0.0.0'</code> å¯å±€åŸŸç½‘è®¿é—®ï¼ˆå¸¸ç”¨äºçœŸæœºè°ƒè¯•ï¼‰</li>
</ul>
</blockquote>
<blockquote>
<ul>
<li><code>hot: true</code>ï¼šæ”¯æŒ HMRï¼Œè‹¥å¤±è´¥åˆ™ fallback åˆ°é¡µé¢åˆ·æ–°</li>
<li><code>hotOnly: true</code>ï¼šä»… HMRï¼Œç¼–è¯‘å¤±è´¥ä¸åˆ·æ–°é¡µé¢ï¼ˆhot: true ç¼–è¯‘å¤±è´¥ä¼šé‡æ–°åˆ·æ–°æ•´ä¸ªé¡µé¢ï¼‰</li>
</ul>
</blockquote>
<h2 data-id="heading-7">å¸¸ç”¨é…ç½®â€”â€”å“ˆå¸Œ</h2>
<p>åœ¨æˆ‘ä»¬ç»™æ‰“åŒ…çš„æ–‡ä»¶è¿›è¡Œå‘½åçš„æ—¶å€™ï¼Œä¼šä½¿ç”¨ placeholder å ä½ç¬¦ï¼Œè¿™é‡Œè¯¦ç»†è¯´è¯´å ä½ç¬¦çš„è¿™å‡ ä¸ªå±æ€§ï¼š</p>
<blockquote>
<p>hash æœ¬èº«æ˜¯é€šè¿‡ MD4 çš„æ•£åˆ—å‡½æ•°å¤„ç†åï¼Œç”Ÿæˆä¸€ä¸ª 128 ä½çš„ hash å€¼ï¼ˆ32 ä¸ªåå…­è¿›åˆ¶ï¼‰</p>
</blockquote>
<ul>
<li>hash å€¼çš„ç”Ÿæˆå’Œæ•´ä¸ªé¡¹ç›®æœ‰å…³ç³»ï¼š
<ul>
<li>æ¯”å¦‚æˆ‘ä»¬ç°åœ¨æœ‰ä¸¤ä¸ªå…¥å£ index.js å’Œ main.jsï¼›</li>
<li>å®ƒä»¬åˆ†åˆ«ä¼šè¾“å‡ºåˆ°ä¸åŒçš„ bundle æ–‡ä»¶ä¸­ï¼Œå¹¶ä¸”åœ¨æ–‡ä»¶åç§°ä¸­æˆ‘ä»¬æœ‰ä½¿ç”¨ hashï¼›</li>
<li>è¿™ä¸ªæ—¶å€™ï¼Œå¦‚æœä¿®æ”¹äº† index.js æ–‡ä»¶ä¸­çš„å†…å®¹ï¼Œé‚£ä¹ˆ hash ä¼šå‘ç”Ÿå˜åŒ–ï¼Œä¸¤ä¸ªæ–‡ä»¶çš„åç§°éƒ½ä¼šå‘ç”Ÿå˜åŒ–ï¼›</li>
</ul>
</li>
<li>chunkhash å¯ä»¥æœ‰æ•ˆçš„è§£å†³ä¸Šé¢çš„é—®é¢˜ï¼Œå®ƒä¼šæ ¹æ®ä¸åŒçš„å…¥å£è¿›è¡Œå€Ÿæ¥è§£ææ¥ç”Ÿæˆ hash å€¼ï¼š
<ul>
<li>æ¯”å¦‚æˆ‘ä»¬ä¿®æ”¹äº† index.jsï¼Œé‚£ä¹ˆ main.js çš„ chunkhash æ˜¯ä¸ä¼šå‘ç”Ÿæ”¹å˜çš„ï¼›</li>
</ul>
</li>
<li>contenthash è¡¨ç¤ºç”Ÿæˆçš„æ–‡ä»¶ hash åç§°ï¼Œåªå’Œå†…å®¹æœ‰å…³ç³»ï¼š
<ul>
<li>æ¯”å¦‚æˆ‘ä»¬çš„ index.jsï¼Œå¼•å…¥äº†ä¸€ä¸ª style.cssï¼Œstyle.css æœ‰è¢«æŠ½å–åˆ°ä¸€ä¸ªç‹¬ç«‹çš„ css æ–‡ä»¶ä¸­ï¼›</li>
<li>è¿™ä¸ª css æ–‡ä»¶åœ¨å‘½åæ—¶ï¼Œå¦‚æœæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯ chunkhashï¼Œé‚£ä¹ˆå½“ index.js æ–‡ä»¶çš„å†…å®¹å‘ç”Ÿå˜åŒ–æ—¶ï¼Œcss æ–‡ä»¶çš„å‘½åä¹Ÿä¼šå‘ç”Ÿå˜åŒ–ï¼›</li>
<li>è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ contenthashï¼Œä¸å½±å“ css æ–‡ä»¶å</li>
</ul>
</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è°·æ­Œè¿™æœ¬ 68 é¡µæç¤ºè¯æ‰‹å†Œï¼Œæ‰æ˜¯ Gemini 3 Pro çš„å®Œå…¨ä½“ã€Œé™„å®˜æ–¹å†…åŠŸå¿ƒæ³•ã€]]></title>    <link>https://juejin.cn/post/7576955345377984575</link>    <guid>https://juejin.cn/post/7576955345377984575</guid>    <pubDate>2025-11-27T02:57:43.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576955345377984575" data-draft-id="7576935292428222506" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è°·æ­Œè¿™æœ¬ 68 é¡µæç¤ºè¯æ‰‹å†Œï¼Œæ‰æ˜¯ Gemini 3 Pro çš„å®Œå…¨ä½“ã€Œé™„å®˜æ–¹å†…åŠŸå¿ƒæ³•ã€"/> <meta itemprop="keywords" content="LLM,Agent,ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2025-11-27T02:57:43.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="AIå¤§æ¨¡å‹"/> <meta itemprop="url" content="https://juejin.cn/user/3817967696221534"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è°·æ­Œè¿™æœ¬ 68 é¡µæç¤ºè¯æ‰‹å†Œï¼Œæ‰æ˜¯ Gemini 3 Pro çš„å®Œå…¨ä½“ã€Œé™„å®˜æ–¹å†…åŠŸå¿ƒæ³•ã€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3817967696221534/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    AIå¤§æ¨¡å‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-27T02:57:43.000Z" title="Thu Nov 27 2025 02:57:43 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#383838;font-size:15px;line-height:30px;letter-spacing:2px;word-break:break-word;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;scroll-behavior:smooth;background-image:linear-gradient(0deg,transparent 24%,rgba(201,195,195,.329) 25%,hsla(0,8%,80.4%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent),linear-gradient(90deg,transparent 24%,rgba(204,196,196,.226) 25%,hsla(0,4%,66.1%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent);background-color:#fff;background-size:50px 50px;padding-bottom:60px}.markdown-body ::selection{color:#fff;background-color:#a862ea}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin:24px 0 12px;color:#a862ea}.markdown-body h1{line-height:2;font-size:1.4em}.markdown-body h1~p:first-of-type:first-letter{color:#a862ea;float:left;font-size:2em;margin-right:.4em;font-weight:bolder}.markdown-body h2{font-size:1.2em}.markdown-body h3{font-size:1.1em}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;padding-left:.2em}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#a862ea}.markdown-body ol li.task-list-item,.markdown-body ul li.task-list-item{list-style:none}.markdown-body ol li.task-list-item ol,.markdown-body ol li.task-list-item ul,.markdown-body ul li.task-list-item ol,.markdown-body ul li.task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:10px}.markdown-body a,.markdown-body code,.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6,.markdown-body li,.markdown-body p{opacity:.85;vertical-align:baseline;transition:all .1s ease}.markdown-body a:hover,.markdown-body code:hover,.markdown-body h1:hover,.markdown-body h2:hover,.markdown-body h3:hover,.markdown-body h4:hover,.markdown-body h5:hover,.markdown-body h6:hover,.markdown-body li:hover,.markdown-body p:hover{opacity:1}.markdown-body a{display:inline-block;color:#a862ea;cursor:pointer;text-decoration:none;position:relative}.markdown-body a:after{content:"";position:absolute;width:98%;height:1px;bottom:0;left:0;transform:scaleX(0);background-color:#a862ea;transform-origin:bottom right;transition:transform .3s ease-in-out}.markdown-body a:hover:after{transform:scaleX(1);transform-origin:bottom left}.markdown-body a:active,.markdown-body a:link{color:#a862ea}.markdown-body img{max-width:100%;user-select:none;margin:1em 0;transition:transform .2s ease 0s;background-color:#f8f5ff;box-shadow:0 0 10px #e7daff}.markdown-body img:hover{opacity:1;box-shadow:0 0 20px #e7daff;transform:translateY(-1px)}.markdown-body blockquote{padding:.5em 1em;margin:12px 0;border-top-left-radius:2px;border-bottom-left-radius:2px;border-left:3px solid #a862ea;background-color:#f8f5ff}.markdown-body blockquote&gt;p{margin:0}.markdown-body .math{font-style:italic;margin:12px 0;padding:.5em 1em;background-color:#f8f5ff}.markdown-body .math&gt;p{margin:0}.markdown-body code{padding:2px .4em;overflow-x:auto;color:#a862ea;font-weight:700;word-break:break-word;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;background-color:#f8f5ff}.markdown-body pre{margin:2em 0}.markdown-body pre&gt;code{display:block;padding:1.5em;word-break:normal;font-size:.9em;font-style:normal;font-weight:400;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;line-height:18px;color:#383838;border-radius:2px;scroll-behavior:smooth;box-shadow:0 0 10px #e7daff}.markdown-body pre&gt;code:hover{box-shadow:0 0 20px #e7daff}.markdown-body pre&gt;code::-webkit-scrollbar{height:6px;background-color:#f8f5ff}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:#e7daff;border-bottom-left-radius:3px;border-bottom-right-radius:3px}.markdown-body hr{margin:2em 0;border-top:1px solid #a862ea}.markdown-body table{width:100%;font-size:12px;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{color:#a862ea;background:#f8f5ff}.markdown-body td,.markdown-body th{padding:.5em;border:1px solid #e7daff}.markdown-body tr{background-color:#f8f5ff}@media (max-width:720px){.markdown-body{font-size:12px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æœ¬æ–‡è¾ƒé•¿ï¼Œå»ºè®®ç‚¹èµæ”¶è—ã€‚æ›´å¤šAIå¤§æ¨¡å‹åº”ç”¨å¼€å‘å­¦ä¹ è§†é¢‘åŠèµ„æ–™ï¼Œåœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fhy.zhipoai.cn%2F" target="_blank" title="https://hy.zhipoai.cn/" ref="nofollow noopener noreferrer">æ™ºæ³ŠAI</a>ã€‚</p>
</blockquote>
<p>Gemini 3 Pro å¿…é¡»æ˜¯æœ€è¿‘æœ€çƒ­è®®çš„è¯é¢˜ã€‚æ˜¨å¤©åœ¨ä¸€ä¸ªå¤§ä½¬çš„è¯„è®ºåŒºçœ‹åˆ°æœ‰å¥½å‡ ä¸ªäººç•™è¨€è¯´ï¼šâ€œGemini 3 Pro è€ç†è§£é”™æ„æ€â€ã€‚</p>
<p>æˆ‘æƒ³å¯èƒ½ä¸æ˜¯å®ƒç†è§£ä¸äº†ï¼Œæ˜¯æˆ‘ä»¬è¡¨è¾¾å¾—ä¸å¤Ÿæ¸…æ¥šã€‚</p>
<p>å¦‚æœåªèƒ½æ¨èä¸€ä»½å…³äº Gemini 3 Pro çš„è¿›é˜¶æŒ‡å—ï¼Œæˆ‘ä¼šæ¯«ä¸çŠ¹è±«åœ°é€‰æ‹©è¿™ä¸€ä»½ï¼š<strong>è°·æ­Œå®˜æ–¹ 68 é¡µæç¤ºè¯å·¥ç¨‹æ‰‹å†Œã€‚</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/627c1cda0a84457faaed81909c0c14c7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764817063&amp;x-signature=4j%2FTS8UuU0%2BBys6%2B3Tfc7hL8bc0%3D" alt="" loading="lazy"/></p>
<p>å®ƒè§£å†³äº†ä¸€ä¸ªæœ€æ ¸å¿ƒçš„é—®é¢˜ï¼š<strong>å¦‚ä½•è®© AI ç²¾å‡†ç†è§£ä½ çš„æ„å›¾ï¼Œä¸å†â€œèƒ¡è¨€ä¹±è¯­â€ã€‚</strong></p>
<p>å¾ˆå¤šæ—¶å€™ï¼Œä½ è§‰å¾— Gemini 3 Pro ä¸å¥½ç”¨ï¼Œå…¶å®æ˜¯å› ä¸ºä½ æ²¡æŒæ¡é‚£æŠŠâ€œé’¥åŒ™â€ã€‚è¿™ä»½æ–‡æ¡£é‡Œè—ç€è®© AI æ™ºå•†ç¿»å€çš„ç§˜å¯†ã€‚</p>
<p>æˆ‘ä¸ºä½ æç‚¼äº†æ‰‹å†Œä¸­çš„<strong>åå¤§æ ¸å¿ƒå¿ƒæ³•</strong>ã€‚æ–‡æœ«é™„ç”µå­ä¹¦åŸä»¶ä¸‹è½½åœ°å€ï¼Œå»ºè®®å…ˆé©¬åçœ‹ã€‚</p>
<h2 data-id="heading-0">åæ¡æœ€é‡è¦çš„æç¤ºå·¥ç¨‹â€œå¿ƒæ³•â€</h2>
<h3 data-id="heading-1">1. å±•ç¤ºä¾‹å­ï¼šå‘Šè¯‰æ¨¡å‹â€œç…§è¿™ä¸ªæ ·å­åšâ€</h3>
<p>(One-shot / Few-shot)</p>
<p><strong>è§£é‡Šï¼š</strong> Â è¿™æ˜¯æœ€é‡è¦ã€æœ€å¼ºå¤§çš„æ•™å­¦å·¥å…·ã€‚ä¸å…¶åªç»™æ¨¡å‹æŒ‡ä»¤ï¼Œä¸å¦‚ç›´æ¥ç»™å®ƒçœ‹ä½ æƒ³è¦çš„æ ¼å¼å’Œé£æ ¼çš„å®Œæˆç¤ºä¾‹ã€‚æ¨¡å‹ä¼šæ¨¡ä»¿ä½ æä¾›çš„æ¨¡å¼æ¥ç”Ÿæˆç»“æœã€‚</p>
<p><strong>æ“ä½œï¼š</strong></p>
<ul>
<li>æä¾›ä¸€ä¸ªï¼ˆå•æ¬¡æç¤ºï¼ŒOne-shotï¼‰æˆ–å¤šä¸ªï¼ˆå‡ æ¬¡æç¤ºï¼ŒFew-shotï¼‰é«˜è´¨é‡çš„è¾“å…¥/è¾“å‡ºç¤ºä¾‹ã€‚</li>
<li>æ³¨æ„ï¼šå¦‚æœä½ åœ¨åšåˆ†ç±»ä»»åŠ¡ï¼ˆä¾‹å¦‚ï¼šæƒ…æ„Ÿæ˜¯â€œç§¯æâ€è¿˜æ˜¯â€œæ¶ˆæâ€ï¼‰ï¼Œè¯·åŠ¡å¿…æ‰“ä¹±ç¤ºä¾‹ä¸­ç±»åˆ«çš„é¡ºåºï¼Œé˜²æ­¢æ¨¡å‹ä»…ä»…è®°ä½é¡ºåºï¼Œè€Œä¸æ˜¯çœŸæ­£å­¦ä¼šåˆ†ç±»ã€‚</li>
</ul>
<h3 data-id="heading-2">2. ä¿æŒç®€æ´æ˜äº†ï¼šè¦æœ‰æ˜ç¡®çš„ä¿¡æ¯</h3>
<p><strong>è§£é‡Šï¼š</strong> Â æç¤ºåº”è¯¥ç®€æ´ã€æ¸…æ™°ã€æ˜“äºç†è§£ã€‚å¦‚æœæç¤ºå¯¹ä½ æ¥è¯´å·²ç»å¾ˆå›°æƒ‘äº†ï¼Œé‚£ä¹ˆæ¨¡å‹ä¹Ÿå¯èƒ½ä¼šæ„Ÿåˆ°å›°æƒ‘ã€‚é¿å…ä½¿ç”¨å¤æ‚çš„è¯è¯­æˆ–æä¾›ä¸ä»»åŠ¡æ— å…³çš„ä¸å¿…è¦ä¿¡æ¯ã€‚</p>
<p><strong>æ“ä½œï¼š</strong></p>
<ul>
<li>ä½¿ç”¨æè¿°å…·ä½“è¡ŒåŠ¨çš„åŠ¨è¯æ¥æŒ‡å¯¼æ¨¡å‹ï¼ˆä¾‹å¦‚ï¼šæå–ã€åˆ†ç±»ã€ç”Ÿæˆã€æ€»ç»“ï¼‰ã€‚</li>
<li>Â <strong>ä¸å¥½ï¼š</strong> Â â€œæˆ‘ç°åœ¨åœ¨çº½çº¦ï¼Œå’Œä¸¤ä¸ªä¸‰å²çš„å­©å­ä¸€èµ·ï¼Œå‘Šè¯‰æˆ‘ä¸€äº›å¥½åœ°æ–¹ã€‚â€</li>
<li>Â <strong>æ›´å¥½ï¼š</strong> Â â€œæ‰®æ¼”ä¸€åæ—…è¡Œå‘å¯¼ã€‚æè¿°ä¸€äº›é€‚åˆä¸‰å²å­©å­æ¸¸ç©çš„çº½çº¦æ›¼å“ˆé¡¿çš„å¥½åœ°æ–¹â€ã€‚</li>
</ul>
<h3 data-id="heading-3">3. å…·ä½“è¯´æ˜ä½ æƒ³è¦ä»€ä¹ˆç»“æœ</h3>
<p><strong>è§£é‡Šï¼š</strong> Â å¯¹æ¨¡å‹çš„æœŸæœ›è¾“å‡ºè¦å…·ä½“ã€æ˜ç¡®ã€‚ä¸è¦åªç»™ä¸€ä¸ªç¬¼ç»Ÿçš„æŒ‡ä»¤ï¼Œè¦ç»™å‡ºå…·ä½“çš„ç»†èŠ‚è¦æ±‚ï¼Œè¿™æ ·èƒ½å¸®åŠ©æ¨¡å‹é›†ä¸­æ³¨æ„åŠ›ï¼Œæé«˜æ•´ä½“å‡†ç¡®æ€§ã€‚</p>
<p><strong>æ“ä½œï¼š</strong></p>
<ul>
<li>Â <strong>ä¸è¦ï¼š</strong> Â â€œå†™ä¸€ç¯‡å…³äºæ¸¸æˆæœºçš„åšå®¢æ–‡ç« ã€‚â€</li>
<li>Â <strong>è¦åšï¼š</strong> Â â€œç”Ÿæˆä¸€ç¯‡ 3 ä¸ªæ®µè½çš„åšå®¢æ–‡ç« ï¼Œå†…å®¹å…³äº 5 ä¸ªé¡¶çº§æ¸¸æˆæœºã€‚æ–‡ç« å¿…é¡»æ˜¯ä¿¡æ¯ä¸°å¯Œä¸”å¼•äººå…¥èƒœçš„ï¼Œå¹¶ä»¥å¯¹è¯å¼çš„é£æ ¼å†™æˆâ€ã€‚</li>
</ul>
<h3 data-id="heading-4">4. ä¼˜å…ˆä½¿ç”¨â€œè¦åšä»€ä¹ˆâ€ï¼Œå°‘è¯´â€œä¸è¦åšä»€ä¹ˆâ€</h3>
<p><strong>è§£é‡Šï¼š</strong> Â å°½é‡ä½¿ç”¨æ­£å‘çš„æŒ‡å¯¼æ€§æŒ‡ä»¤ï¼ˆå‘Šè¯‰æ¨¡å‹åº”è¯¥åšä»€ä¹ˆï¼‰ï¼Œè€Œä¸æ˜¯è´Ÿé¢çš„é™åˆ¶ï¼ˆå‘Šè¯‰æ¨¡å‹ä¸åº”è¯¥åšä»€ä¹ˆï¼‰ã€‚è¿™ä¸æˆ‘ä»¬è‡ªå·±äº¤æµçš„æ—¶å€™åçˆ±æ­£é¢æŒ‡ä»¤çš„ä¹ æƒ¯ä¸€è‡´ã€‚</p>
<p><strong>æ“ä½œï¼š</strong></p>
<ul>
<li>Â <strong>æŒ‡ä»¤ä¼˜å…ˆï¼š</strong> Â æ¸…æ™°åœ°è¯´æ˜ä½ æƒ³è¦çš„ç»“æœï¼ˆä¾‹å¦‚ï¼šâ€œåªè®¨è®ºæ¸¸æˆæœºã€åˆ¶é€ å•†ã€å¹´ä»½å’Œæ€»é”€é‡â€ï¼‰ã€‚</li>
<li>Â <strong>é™åˆ¶æ¬¡ä¹‹ï¼š</strong> Â é™åˆ¶ï¼ˆä¾‹å¦‚ï¼šâ€œä¸è¦åˆ—å‡ºæ¸¸æˆåç§°â€ï¼‰ä»…åœ¨ç‰¹å®šæƒ…å†µä¸‹ä½¿ç”¨ï¼Œä¾‹å¦‚æ¶‰åŠå®‰å…¨ã€æ¸…æ™°åº¦æˆ–ä¸¥æ ¼çš„æ ¼å¼è¦æ±‚æ—¶ã€‚</li>
</ul>
<h3 data-id="heading-5">5. ç»™æ¨¡å‹è®¾å®šèº«ä»½å’ŒèƒŒæ™¯ï¼ˆè§’è‰²ã€æƒ…å¢ƒæç¤ºï¼‰</h3>
<p><strong>è§£é‡Šï¼š</strong> Â ç»™æ¨¡å‹ä¸€ä¸ªâ€œäººè®¾â€æˆ–â€œèƒŒæ™¯â€ï¼Œè¿™èƒ½å¸®åŠ©å®ƒä»¥æ­£ç¡®çš„è¯­æ°”ã€é£æ ¼å’Œä¸“ä¸šçŸ¥è¯†æ¥å›ç­”é—®é¢˜ã€‚</p>
<p><strong>æ“ä½œï¼š</strong></p>
<ul>
<li>Â <strong>è§’è‰²æç¤ºï¼š</strong> Â èµ‹äºˆæ¨¡å‹ä¸€ä¸ªèº«ä»½ï¼ˆä¾‹å¦‚ï¼šâ€œæˆ‘å¸Œæœ›ä½ æ‰®æ¼”ä¸€ä½å¹½é»˜çš„æ—…è¡Œå‘å¯¼â€ï¼‰ã€‚</li>
<li>Â <strong>æƒ…å¢ƒæç¤ºï¼š</strong> Â æä¾›ä¸ä»»åŠ¡ç›¸å…³çš„å…·ä½“èƒŒæ™¯ä¿¡æ¯ï¼ˆä¾‹å¦‚ï¼šâ€œæƒ…å¢ƒï¼šä½ æ­£åœ¨ä¸ºä¸€ä¸ªå…³äº 80 å¹´ä»£å¤å¤è¡—æœºæ¸¸æˆçš„åšå®¢å†™æ–‡ç« â€ï¼‰ã€‚</li>
<li>è¿™å°±åƒç»™æ¼”å‘˜ä¸€ä¸ªå‰§æœ¬å’Œè§’è‰²è¯´æ˜ï¼Œç¡®ä¿ä»–ä»¬çš„è¡¨æ¼”ç¬¦åˆé¢„æœŸã€‚</li>
</ul>
<h3 data-id="heading-6">6. å¼•å¯¼æ¨¡å‹é€æ­¥æ€è€ƒï¼ˆæ€ç»´é“¾ CoT ä¸å›é€€æç¤ºï¼‰</h3>
<p><strong>è§£é‡Šï¼š</strong> Â å¯¹äºå¤æ‚çš„ä»»åŠ¡ï¼ˆæ¯”å¦‚æ¨ç†ã€æ•°å­¦é¢˜æˆ–ä»£ç ç”Ÿæˆï¼‰ï¼Œä¸è¦ç›´æ¥è¦æ±‚æ¨¡å‹ç»™ç­”æ¡ˆï¼Œè€Œæ˜¯è¦æ±‚å®ƒâ€œä¸€æ­¥ä¸€æ­¥åœ°æ€è€ƒâ€ã€‚è¿™èƒ½æé«˜å¤æ‚é—®é¢˜çš„å‡†ç¡®æ€§ã€‚</p>
<p><strong>æ“ä½œï¼š</strong></p>
<ul>
<li>Â <strong>æ€ç»´é“¾ (CoT)ï¼š</strong> Â  åœ¨æç¤ºæœ«å°¾åŠ ä¸Š<code>è®©æˆ‘ä»¬ä¸€æ­¥ä¸€æ­¥åœ°æ€è€ƒ</code>Â ã€‚</li>
<li>Â <strong>å›é€€æç¤º (Step-back)ï¼š</strong> Â é¼“åŠ±æ¨¡å‹å…ˆæ€è€ƒä¸€ä¸ªæ›´ä¸€èˆ¬ã€æ›´æŠ½è±¡çš„åŸç†æˆ–é—®é¢˜ï¼Œç„¶ååˆ©ç”¨è¿™ä¸ªæ¿€æ´»çš„èƒŒæ™¯çŸ¥è¯†æ¥è§£å†³å…·ä½“çš„ä»»åŠ¡ï¼Œä»è€Œæé«˜æ´å¯ŸåŠ›ã€‚</li>
<li>Â <strong>æ³¨æ„ï¼š</strong> Â æ¨ç†ä»»åŠ¡é€šå¸¸ä¹Ÿå¯ä»¥ç›´æ¥å‘Šè¯‰æ¨¡å‹<code>ä½ åœ¨æ¨ç†</code>ã€‚</li>
</ul>
<h3 data-id="heading-7">7. å°è¯•ç»“æ„åŒ–è¾“å‡ºæ ¼å¼ï¼ˆä½¿ç”¨ JSON æˆ– XMLï¼‰</h3>
<p><strong>è§£é‡Šï¼š</strong> Â å¯¹äºæ•°æ®æå–ã€åˆ†ç±»æˆ–æ’åºç­‰éåˆ›æ„æ€§ä»»åŠ¡ï¼Œè¦æ±‚æ¨¡å‹è¿”å›ç»“æ„åŒ–æ ¼å¼ï¼ˆå¦‚ JSON æˆ– XMLï¼‰çš„æ•°æ®ã€‚</p>
<p><strong>æ“ä½œï¼š</strong></p>
<ul>
<li>è¦æ±‚è¿”å› JSON æ ¼å¼æœ€å¤§çš„å¥½å¤„åœ¨äºï¼šå®ƒå¼ºåˆ¶æ¨¡å‹åˆ›å»ºç»“æ„ï¼Œå¹¶ä¸”å¯ä»¥æå¤§åœ°é™åˆ¶æ¨¡å‹èƒ¡ç¼–ä¹±é€ ï¼ˆé™åˆ¶å¹»è§‰ï¼‰ã€‚</li>
<li>å¦‚æœè¾“å‡ºè¢«æˆªæ–­å¯¼è‡´ JSON æ— æ•ˆï¼Œå¯ä»¥ä½¿ç”¨åƒ json-repair è¿™æ ·çš„å·¥å…·æ¥å°è¯•è‡ªåŠ¨ä¿®å¤ã€‚</li>
</ul>
<h3 data-id="heading-8">8. è°ƒæ•´é…ç½®æ¥æ§åˆ¶â€œåˆ›é€ åŠ›â€</h3>
<p><strong>è§£é‡Šï¼š</strong> Â æç¤ºå·¥ç¨‹ä¸ä»…æ˜¯å†™å¥½æç¤ºè¯ï¼Œè¿˜éœ€è¦è°ƒæ•´æ¨¡å‹çš„â€œæ—‹é’®â€æ¥æ§åˆ¶è¾“å‡ºçš„éšæœºæ€§å’Œå¤šæ ·æ€§ã€‚</p>
<p><strong>æ“ä½œï¼š</strong></p>
<ul>
<li>Â <strong>ä½æ¸©åº¦ (0 - 0.2)ï¼š</strong> Â é€‚ç”¨äºéœ€è¦ç¡®å®šæ€§ã€äº‹å®æ€§æˆ–ä¸¥æ ¼é€»è¾‘çš„ä»»åŠ¡ï¼ˆå¦‚æ•°å­¦é¢˜æˆ–æ•°æ®æå–ï¼‰ã€‚</li>
<li>Â <strong>é«˜æ¸©åº¦ (0.9)ï¼š</strong> Â é€‚ç”¨äºéœ€è¦å¤šæ ·æ€§æˆ–åˆ›é€ æ€§çš„ä»»åŠ¡ï¼ˆå¦‚å†™æ•…äº‹æˆ–å¤´è„‘é£æš´ï¼‰ã€‚</li>
<li>æ³¨æ„ï¼šå…¶å®åƒ Gemini ï¼Œæˆ‘ä»¬æ—¥å¸¸å¯¹è¯æ—¶ï¼Œè¿™ä¸ªæ˜¯ä¸å¯è§ä¹Ÿä¸å¯è°ƒæ•´çš„ï¼Œå¤§æ¨¡å‹ä¼šè‡ªå·±æ ¹æ®æƒ…å†µè¿›è¡Œè°ƒæ•´ã€‚</li>
</ul>
<h3 data-id="heading-9">9. æ˜ç¡®æ§åˆ¶å›ç­”çš„é•¿åº¦</h3>
<p><strong>è§£é‡Šï¼š</strong> Â æ§åˆ¶æ¨¡å‹ç”Ÿæˆæ–‡æœ¬çš„é•¿åº¦ï¼Œå¯ä»¥èŠ‚çœè®¡ç®—èµ„æºã€æé«˜é€Ÿåº¦å¹¶é™ä½æˆæœ¬ã€‚</p>
<p><strong>æ“ä½œï¼š</strong></p>
<ul>
<li>åœ¨æ¨¡å‹é…ç½®ä¸­è®¾ç½®æœ€å¤§ Token é™åˆ¶ã€‚</li>
<li>åœ¨æç¤ºä¸­æ˜ç¡®è¦æ±‚ï¼ˆå¦‚ï¼šâ€œç”¨ä¸€æ¡æ¨æ–‡çš„é•¿åº¦è§£é‡Šé‡å­ç‰©ç†å­¦â€ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-10">10. è¯¦ç»†è®°å½•æ¯ä¸€æ¬¡å°è¯•</h3>
<p><strong>è§£é‡Šï¼š</strong> Â æç¤ºå·¥ç¨‹æ˜¯ä¸€ä¸ªè¿­ä»£çš„è¿‡ç¨‹ï¼Œä½ éœ€è¦ä¸æ–­å°è¯•å’Œä¼˜åŒ–ã€‚åƒç§‘å­¦å®¶åšå®éªŒä¸€æ ·ï¼Œä½ éœ€è¦å®Œæ•´è®°å½•æ‰€æœ‰ç»†èŠ‚ï¼Œè¿™æ ·ä½ æ‰èƒ½å­¦ä¹ ã€è°ƒè¯•ï¼Œå¹¶åœ¨æœªæ¥å†æ¬¡ä½¿ç”¨ã€‚</p>
<p><strong>æ“ä½œï¼š</strong></p>
<ul>
<li>è®°å½•å†…å®¹åŒ…æ‹¬ï¼šæç¤ºçš„åç§°å’Œç›®æ ‡ã€ä½¿ç”¨çš„æ¨¡å‹ç‰ˆæœ¬ã€å®Œæ•´çš„æç¤ºæ–‡æœ¬ã€æ‰€æœ‰çš„é…ç½®ä»¥åŠè¾“å‡ºç»“æœã€‚</li>
<li>ä½¿ç”¨ç»“æ„åŒ–çš„æ–¹å¼ï¼ˆå¦‚è¡¨æ ¼ï¼‰æ¥ç®¡ç†è¿™äº›è®°å½•ï¼Œä»¥ä¾¿åœ¨æ¨¡å‹æ›´æ–°æˆ–éœ€è¦é‡æ–°æµ‹è¯•æ—¶ï¼Œå¯ä»¥è½»æ¾è¿½æº¯ã€‚</li>
</ul>
<h2 data-id="heading-11">å­¦ä¹ èµ„æºæ¨è</h2>
<p>å¦‚æœä½ æƒ³æ›´æ·±å…¥åœ°å­¦ä¹ å¤§æ¨¡å‹ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›éå¸¸æœ‰ä»·å€¼çš„å­¦ä¹ èµ„æºï¼Œè¿™äº›èµ„æºå°†å¸®åŠ©ä½ ä»ä¸åŒè§’åº¦å­¦ä¹ å¤§æ¨¡å‹ï¼Œæå‡ä½ çš„å®è·µèƒ½åŠ›ã€‚</p>
<blockquote>
<p>æœ¬æ–‡è¾ƒé•¿ï¼Œå»ºè®®ç‚¹èµæ”¶è—ã€‚æ›´å¤šAIå¤§æ¨¡å‹åº”ç”¨å¼€å‘å­¦ä¹ è§†é¢‘åŠèµ„æ–™ï¼Œåœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fhy.zhipoai.cn%2F" target="_blank" title="https://hy.zhipoai.cn/" ref="nofollow noopener noreferrer">æ™ºæ³ŠAI</a>ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[iOS Audioåå°æ¨¡å¼ä¸‹èƒ½å¦æ‰§è¡ŒéAudioé€»è¾‘]]></title>    <link>https://juejin.cn/post/7576867727719890979</link>    <guid>https://juejin.cn/post/7576867727719890979</guid>    <pubDate>2025-11-27T03:02:59.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576867727719890979" data-draft-id="7577201863721746432" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="iOS Audioåå°æ¨¡å¼ä¸‹èƒ½å¦æ‰§è¡ŒéAudioé€»è¾‘"/> <meta itemprop="keywords" content="iOS,Swift"/> <meta itemprop="datePublished" content="2025-11-27T03:02:59.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="songgeb"/> <meta itemprop="url" content="https://juejin.cn/user/3122268752587006"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            iOS Audioåå°æ¨¡å¼ä¸‹èƒ½å¦æ‰§è¡ŒéAudioé€»è¾‘
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3122268752587006/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    songgeb
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-27T03:02:59.000Z" title="Thu Nov 27 2025 03:02:59 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æµ‹è¯•è®¾å¤‡ï¼šiPhone 13mini / iOS 26</p>
<h3 data-id="heading-0">éªŒè¯æ–¹æ³•</h3>
<ol>
<li>å¼€å¯<code>Audio, AirPlay, and Picture in Picture</code>æ¨¡å¼ï¼Œæ’­æ”¾å£°éŸ³</li>
<li>æ‰§è¡Œä¸å£°éŸ³æ— å…³çš„ä»£ç å’Œç½‘ç»œè¯·æ±‚é€»è¾‘ï¼Œå¹¶å†™å…¥æ—¥å¿—æ–‡ä»¶ï¼Œä»£ç å¦‚ä¸‹æ‰€ç¤º</li>
<li>è®©Appè¿›å…¥åå°ï¼ŒAppæŒç»­æ’­æ”¾å£°éŸ³ï¼Œè¿‡ä¸€æ®µæ—¶é—´ï¼ˆ5åˆ†é’Ÿï¼‰å›åˆ°Appå‰å°ï¼Œæ£€æŸ¥æ—¥å¿—æ–‡ä»¶ä¸­æ˜¯å¦é¢„æœŸå†…å®¹</li>
</ol>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">private</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">test</span>() {
    <span class="hljs-keyword">var</span> sum <span class="hljs-operator">=</span> <span class="hljs-number">0</span>
    timer<span class="hljs-operator">?</span>.invalidate()
    timer <span class="hljs-operator">=</span> <span class="hljs-type">YYTimer</span>(timeInterval: <span class="hljs-number">1</span>, repeats: <span class="hljs-literal">true</span>, block: { t <span class="hljs-keyword">in</span>
        sum <span class="hljs-operator">+=</span> <span class="hljs-number">1</span>
                
        <span class="hljs-comment">// éªŒè¯ä»£ç æ‰§è¡Œ</span>
        <span class="hljs-type">DDLogInfo</span>(<span class="hljs-string">"[BackgroundTest] Timer fired. Sum: <span class="hljs-subst">\(sum)</span>"</span>)
                
        <span class="hljs-comment">// éªŒè¯ç½‘ç»œè¯·æ±‚</span>
        <span class="hljs-keyword">let</span> url <span class="hljs-operator">=</span> <span class="hljs-type">URL</span>(string: <span class="hljs-string">"https://www.baidu.com"</span>)<span class="hljs-operator">!</span>
        <span class="hljs-type">URLSession</span>.shared.dataTask(with: url) { <span class="hljs-keyword">_</span>, response, error <span class="hljs-keyword">in</span>
            <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> error <span class="hljs-operator">=</span> error {
                <span class="hljs-type">DDLogInfo</span>(<span class="hljs-string">"[BackgroundTest] Network failed: <span class="hljs-subst">\(error.localizedDescription)</span>"</span>)
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> httpResponse <span class="hljs-operator">=</span> response <span class="hljs-keyword">as?</span> <span class="hljs-type">HTTPURLResponse</span> {
                <span class="hljs-type">DDLogInfo</span>(<span class="hljs-string">"[BackgroundTest] Network success. Status: <span class="hljs-subst">\(httpResponse.statusCode)</span>"</span>)
            }
        }.resume()
    })
}

</code></pre>
<p>æ—¥å¿—ç»“æœï¼š</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-number">2025</span><span class="hljs-selector-tag">-11-27</span> <span class="hljs-number">10</span>:<span class="hljs-number">23</span>:<span class="hljs-number">13.575</span> <span class="hljs-selector-attr">[INFO]</span> <span class="hljs-selector-attr">[BackgroundTest]</span> <span class="hljs-selector-tag">Timer</span> <span class="hljs-selector-tag">fired</span>. <span class="hljs-selector-tag">Sum</span>: <span class="hljs-number">5</span>
<span class="hljs-number">2025</span><span class="hljs-selector-tag">-11-27</span> <span class="hljs-number">10</span>:<span class="hljs-number">23</span>:<span class="hljs-number">13.612</span> <span class="hljs-selector-attr">[INFO]</span> <span class="hljs-selector-attr">[BackgroundTest]</span> <span class="hljs-selector-tag">Network</span> <span class="hljs-selector-tag">success</span>. <span class="hljs-selector-tag">Status</span>: <span class="hljs-number">200</span>
<span class="hljs-number">2025</span><span class="hljs-selector-tag">-11-27</span> <span class="hljs-number">10</span>:<span class="hljs-number">23</span>:<span class="hljs-number">14.008</span> <span class="hljs-selector-attr">[INFO]</span> <span class="hljs-selector-tag">Report</span> <span class="hljs-selector-tag">OnlineStatus</span> <span class="hljs-selector-tag">background</span>, <span class="hljs-selector-tag">badge</span> <span class="hljs-selector-tag">number</span> <span class="hljs-number">1</span> <span class="hljs-comment">// è¿›å…¥åå°</span>
<span class="hljs-number">2025</span><span class="hljs-selector-tag">-11-27</span> <span class="hljs-number">10</span>:<span class="hljs-number">23</span>:<span class="hljs-number">14.582</span> <span class="hljs-selector-attr">[INFO]</span> <span class="hljs-selector-attr">[BackgroundTest]</span> <span class="hljs-selector-tag">Timer</span> <span class="hljs-selector-tag">fired</span>. <span class="hljs-selector-tag">Sum</span>: <span class="hljs-number">6</span>
<span class="hljs-number">2025</span><span class="hljs-selector-tag">-11-27</span> <span class="hljs-number">10</span>:<span class="hljs-number">23</span>:<span class="hljs-number">14.612</span> <span class="hljs-selector-attr">[INFO]</span> <span class="hljs-selector-attr">[BackgroundTest]</span> <span class="hljs-selector-tag">Network</span> <span class="hljs-selector-tag">success</span>. <span class="hljs-selector-tag">Status</span>: <span class="hljs-number">200</span>
<span class="hljs-number">2025</span><span class="hljs-selector-tag">-11-27</span> <span class="hljs-number">10</span>:<span class="hljs-number">23</span>:<span class="hljs-number">15.586</span> <span class="hljs-selector-attr">[INFO]</span> <span class="hljs-selector-attr">[BackgroundTest]</span> <span class="hljs-selector-tag">Timer</span> <span class="hljs-selector-tag">fired</span>. <span class="hljs-selector-tag">Sum</span>: <span class="hljs-number">7</span>
<span class="hljs-number">2025</span><span class="hljs-selector-tag">-11-27</span> <span class="hljs-number">10</span>:<span class="hljs-number">23</span>:<span class="hljs-number">15.622</span> <span class="hljs-selector-attr">[INFO]</span> <span class="hljs-selector-attr">[BackgroundTest]</span> <span class="hljs-selector-tag">Network</span> <span class="hljs-selector-tag">success</span>. <span class="hljs-selector-tag">Status</span>: <span class="hljs-number">200</span>
.....<span class="hljs-comment">//çœç•¥</span>
<span class="hljs-number">2025</span><span class="hljs-selector-tag">-11-27</span> <span class="hljs-number">10</span>:<span class="hljs-number">28</span>:<span class="hljs-number">19.578</span> <span class="hljs-selector-attr">[INFO]</span> <span class="hljs-selector-attr">[BackgroundTest]</span> <span class="hljs-selector-tag">Timer</span> <span class="hljs-selector-tag">fired</span>. <span class="hljs-selector-tag">Sum</span>: <span class="hljs-number">311</span>
<span class="hljs-number">2025</span><span class="hljs-selector-tag">-11-27</span> <span class="hljs-number">10</span>:<span class="hljs-number">28</span>:<span class="hljs-number">19.610</span> <span class="hljs-selector-attr">[INFO]</span> <span class="hljs-selector-attr">[BackgroundTest]</span> <span class="hljs-selector-tag">Network</span> <span class="hljs-selector-tag">success</span>. <span class="hljs-selector-tag">Status</span>: <span class="hljs-number">200</span>
<span class="hljs-number">2025</span><span class="hljs-selector-tag">-11-27</span> <span class="hljs-number">10</span>:<span class="hljs-number">28</span>:<span class="hljs-number">20.579</span> <span class="hljs-selector-attr">[INFO]</span> <span class="hljs-selector-attr">[BackgroundTest]</span> <span class="hljs-selector-tag">Timer</span> <span class="hljs-selector-tag">fired</span>. <span class="hljs-selector-tag">Sum</span>: <span class="hljs-number">312</span>
<span class="hljs-number">2025</span><span class="hljs-selector-tag">-11-27</span> <span class="hljs-number">10</span>:<span class="hljs-number">28</span>:<span class="hljs-number">20.611</span> <span class="hljs-selector-attr">[INFO]</span> <span class="hljs-selector-attr">[BackgroundTest]</span> <span class="hljs-selector-tag">Network</span> <span class="hljs-selector-tag">success</span>. <span class="hljs-selector-tag">Status</span>: <span class="hljs-number">200</span>
<span class="hljs-number">2025</span><span class="hljs-selector-tag">-11-27</span> <span class="hljs-number">10</span>:<span class="hljs-number">28</span>:<span class="hljs-number">21.574</span> <span class="hljs-selector-attr">[INFO]</span> <span class="hljs-selector-attr">[BackgroundTest]</span> <span class="hljs-selector-tag">Timer</span> <span class="hljs-selector-tag">fired</span>. <span class="hljs-selector-tag">Sum</span>: <span class="hljs-number">313</span>
<span class="hljs-number">2025</span><span class="hljs-selector-tag">-11-27</span> <span class="hljs-number">10</span>:<span class="hljs-number">28</span>:<span class="hljs-number">21.602</span> <span class="hljs-selector-attr">[INFO]</span> <span class="hljs-selector-attr">[BackgroundTest]</span> <span class="hljs-selector-tag">Network</span> <span class="hljs-selector-tag">success</span>. <span class="hljs-selector-tag">Status</span>: <span class="hljs-number">200</span>
<span class="hljs-number">2025</span><span class="hljs-selector-tag">-11-27</span> <span class="hljs-number">10</span>:<span class="hljs-number">28</span>:<span class="hljs-number">22.449</span> <span class="hljs-selector-attr">[INFO]</span> <span class="hljs-selector-tag">Report</span> <span class="hljs-selector-tag">OnlineStatus</span> <span class="hljs-selector-tag">foreground</span>                 <span class="hljs-comment">// å›åˆ°å‰å°</span>
<span class="hljs-number">2025</span><span class="hljs-selector-tag">-11-27</span> <span class="hljs-number">10</span>:<span class="hljs-number">28</span>:<span class="hljs-number">22.573</span> <span class="hljs-selector-attr">[INFO]</span> <span class="hljs-selector-attr">[BackgroundTest]</span> <span class="hljs-selector-tag">Timer</span> <span class="hljs-selector-tag">fired</span>. <span class="hljs-selector-tag">Sum</span>: <span class="hljs-number">314</span>
<span class="hljs-number">2025</span><span class="hljs-selector-tag">-11-27</span> <span class="hljs-number">10</span>:<span class="hljs-number">28</span>:<span class="hljs-number">22.600</span> <span class="hljs-selector-attr">[INFO]</span> <span class="hljs-selector-attr">[BackgroundTest]</span> <span class="hljs-selector-tag">Network</span> <span class="hljs-selector-tag">success</span>. <span class="hljs-selector-tag">Status</span>: <span class="hljs-number">200</span>
</code></pre>
<h3 data-id="heading-1">ç»“è®º</h3>
<ul>
<li>å¼€å¯<code>Audio, AirPlay, and Picture in Picture</code>æ¨¡å¼ï¼Œå¼€å¯å£°éŸ³ï¼Œè¿›å…¥åå°ï¼Œå¯ä»¥æ­£å¸¸æ‰§è¡Œä¸å£°éŸ³æ— å…³çš„ä»£ç é€»è¾‘å’Œç½‘ç»œè¯·æ±‚</li>
</ul>
<blockquote>
<p>æ³¨ï¼šä»…ä¸ºæµ‹è¯•ç»“æœï¼Œä¸æ’é™¤ç³»ç»Ÿä¼šåšä»»ä½•å½¢å¼çš„æ‹¦æˆªæˆ–ä¸­æ–­</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Angularå¼€å‘è€…å¿…çœ‹ï¼šæ·±åº¦è§£æå•å…ƒæµ‹è¯•æ ¸å¿ƒæŠ€å·§ä¸æœ€ä½³å®è·µ]]></title>    <link>https://juejin.cn/post/7576859594360471552</link>    <guid>https://juejin.cn/post/7576859594360471552</guid>    <pubDate>2025-11-27T01:21:00.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576859594360471552" data-draft-id="7570243451725725723" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Angularå¼€å‘è€…å¿…çœ‹ï¼šæ·±åº¦è§£æå•å…ƒæµ‹è¯•æ ¸å¿ƒæŠ€å·§ä¸æœ€ä½³å®è·µ"/> <meta itemprop="keywords" content="Angular.js,å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2025-11-27T01:21:00.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="DevUIå›¢é˜Ÿ"/> <meta itemprop="url" content="https://juejin.cn/user/712139267650141"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Angularå¼€å‘è€…å¿…çœ‹ï¼šæ·±åº¦è§£æå•å…ƒæµ‹è¯•æ ¸å¿ƒæŠ€å·§ä¸æœ€ä½³å®è·µ
            <!----> <!----></h1> <div class="container team-follow" data-v-d326b38e="" data-v-61fb5e44=""><div class="left" data-v-d326b38e=""><a href="/team/6930890095402844163/posts" data-v-d326b38e=""><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6975547f58f744ae8fa9c79ba0a60c3b~tplv-k3u1fbpfcp-watermark.image" class="icon" data-v-d326b38e=""/></a> <div class="content" data-v-d326b38e=""><div style="display: flex" data-v-d326b38e=""><a href="/team/6930890095402844163/posts" data-v-d326b38e=""><p class="title-line" data-v-d326b38e=""><span title="DevUIå›¢é˜Ÿ" class="title" data-v-d326b38e="">DevUIå›¢é˜Ÿ</span> <img src="//lf-web-assets.juejin.cn/obj/juejin-web/xitu_juejin_web/255e400027b783cbad76dc41527e7695.svg" alt="team icon" class="team-icon" data-v-d326b38e=""/></p></a></div> <div class="meta-box team" data-v-d326b38e="" data-v-61fb5e44=""><time datetime="2025-11-27T01:21:00.000Z" title="Thu Nov 27 2025 01:21:00 GMT+0000 (Coordinated Universal Time)" class="time" data-v-d326b38e="" data-v-61fb5e44="">
                2025-11-27
              </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-d326b38e="" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-d326b38e="" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-d326b38e="" data-v-61fb5e44=""/></svg> <span class="views-count" style="display:none;" data-v-d326b38e="" data-v-61fb5e44="">
                7
              </span> <span class="read-time" data-v-d326b38e="" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-d326b38e="" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-d326b38e="" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-d326b38e="" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-d326b38e="" data-v-61fb5e44=""/></svg>
                é˜…è¯»6åˆ†é’Ÿ
              </span> <!----> <!----></div></div></div> <button class="jj-follow-button follow-btn" style="display:none;" data-v-b60b2868="" data-v-d326b38e=""><span data-v-b60b2868="" data-v-d326b38e=""><i class="byte-icon byte-icon--plus" data-v-d326b38e=""><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 48 48"><path fill="none" d="M0 0h48v48H0z"/><path d="M24.7 4c.4 0 .6 0 .8.1.2.1.3.2.4.4.1.2.1.3.1.8V22h16.7c.4 0 .6 0 .8.1.2.1.3.2.4.4.1.2.1.3.1.8v1.4c0 .4 0 .6-.1.8-.1.2-.2.3-.4.4-.2.1-.3.1-.8.1H26v16.7c0 .4 0 .6-.1.8-.1.2-.2.3-.4.4-.2.1-.3.1-.8.1h-1.4c-.4 0-.6 0-.8-.1-.2-.1-.3-.2-.4-.4-.1-.2-.1-.3-.1-.8V26H5.3c-.4 0-.6 0-.8-.1-.2-.1-.3-.2-.4-.4-.1-.2-.1-.3-.1-.8v-1.4c0-.4 0-.6.1-.8.1-.2.2-.3.4-.4.2-.1.3-.1.8-.1H22V5.3c0-.4 0-.6.1-.8.1-.2.2-.3.4-.4.2-.1.3-.1.8-.1h1.4z"/></svg></i>
        å…³æ³¨
      </span></button></div> <div class="team-user block-hidden" data-v-61fb5e44=""><div class="avatar jj-avatar avatar" data-v-03256cc6="" data-v-61fb5e44=""><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8AQMAAAAAMksxAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAA5JREFUKM9jGAWjAAcAAAIcAAE27nY6AAAAAElFTkSuQmCC" alt="avatar" class="lazy avatar-img" data-v-5244ef91="" data-v-03256cc6=""/> </div> <!----> <span class="position ellipsis" data-v-61fb5e44="">
              å‰ç«¯è§£å†³æ–¹æ¡ˆé›† @åä¸º
            </span></div> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æ„Ÿè°¢DevUIç¤¾åŒºè´¡çŒ®è€… <strong><a href="https://juejin.cn/user/649151231836217" target="_blank" title="https://juejin.cn/user/649151231836217">tian_ya</a></strong> æä¾›çš„ä¼˜è´¨å¥½æ–‡ï¼</p>
</blockquote>
<h2 data-id="heading-0">Angularå¼€å‘è€…å¿…çœ‹ï¼šæ·±åº¦è§£æå•å…ƒæµ‹è¯•æ ¸å¿ƒæŠ€å·§ä¸æœ€ä½³å®è·µ</h2>
<h3 data-id="heading-1">ä¸€ã€å‰è¨€</h3>
<p><strong>1. ä»€ä¹ˆæ˜¯å•å…ƒæµ‹è¯•</strong></p>
<ul>
<li>å®šä¹‰ï¼šå•å…ƒæµ‹è¯•æ˜¯é’ˆå¯¹è½¯ä»¶ä¸­çš„æœ€å°å¯æµ‹è¯•å•å…ƒï¼ˆå¦‚å‡½æ•°ã€æ–¹æ³•æˆ–ç±»ï¼‰è¿›è¡Œçš„æµ‹è¯•ï¼Œä»¥éªŒè¯å…¶æ˜¯å¦ç¬¦åˆé¢„æœŸã€‚</li>
<li>ç›®æ ‡ï¼šç¡®ä¿ä»£ç çš„æ­£ç¡®æ€§ã€å¯é æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</li>
<li>ä¸åŒæµ‹è¯•é˜¶æ®µçš„åŒºåˆ«ï¼š
<ul>
<li>å•å…ƒæµ‹è¯•ï¼šæµ‹è¯•ä»£ç çš„æœ€å°å•å…ƒã€‚</li>
<li>é›†æˆæµ‹è¯•ï¼šæµ‹è¯•ä¸åŒæ¨¡å—ä¹‹é—´çš„äº¤äº’ã€‚</li>
<li>ç³»ç»Ÿæµ‹è¯•ï¼šæ•´ä½“ç³»ç»Ÿæ˜¯å¦æ»¡è¶³éœ€æ±‚ã€‚</li>
<li>éªŒæ”¶æµ‹è¯•ï¼šä»ç”¨æˆ·è§’åº¦æµ‹è¯•åŠŸèƒ½æ˜¯å¦ç¬¦åˆéœ€æ±‚ã€‚</li>
</ul>
</li>
</ul>
<p><strong>2. ä¸ºä»€ä¹ˆéœ€è¦å•å…ƒæµ‹è¯•</strong></p>
<ul>
<li>æå‡ä»£ç è´¨é‡ï¼šé€šè¿‡è‡ªåŠ¨åŒ–æµ‹è¯•å‘ç°æ½œåœ¨çš„bugã€‚</li>
<li>æ”¯æŒé‡æ„å®‰å…¨ï¼šç¡®ä¿ä»£ç è¡Œä¸ºåœ¨é‡æ„åä¿æŒä¸€è‡´ã€‚</li>
</ul>
<h3 data-id="heading-2">äºŒã€Angularçš„å•å…ƒæµ‹è¯•</h3>
<p><strong>1. é…ç½® Karma + Jasmineæµ‹è¯•ç¯å¢ƒ</strong></p>
<p>ä½¿ç”¨ Angular CLI åˆ›å»ºé¡¹ç›®æ—¶ï¼Œé»˜è®¤å·²é›†æˆ Jasmine å’Œ Karmaã€‚</p>
<ul>
<li>Karmaï¼šä¸ºå‰ç«¯è‡ªåŠ¨åŒ–æµ‹è¯•æä¾›äº†è·¨æµè§ˆå™¨æµ‹è¯•çš„èƒ½åŠ›ï¼Œé›†æˆåƒ<code>Jasmine</code>ç­‰æµ‹è¯•æ¡†æ¶ï¼Œå¯åŠ¨ä¸€ä¸ªWebæœåŠ¡å™¨å°†æµ‹è¯•è„šæœ¬æ”¾åˆ°æµè§ˆå™¨ä¸­æ‰§è¡Œã€‚è¿˜æœ‰ä¸€äº›å…¶ä»–æ¯”å¦‚ç”Ÿæˆä»£ç è¦†ç›–ç‡çš„æŠ¥å‘Šç­‰åŠŸèƒ½ã€‚</li>
<li>Jasmineï¼šä¸€ä¸ª JavaScript æµ‹è¯•æ¡†æ¶ï¼Œå®ƒä¸ä¾èµ–äºæµè§ˆå™¨ã€dom æˆ–å…¶å®ƒ JavaScript æ¡†æ¶ã€‚</li>
</ul>
<p>é…ç½®æ–‡ä»¶ï¼š</p>
<ul>
<li><code>karma.conf.js</code>ï¼šKarma é…ç½®æ–‡ä»¶ï¼Œæ§åˆ¶æµè§ˆå™¨å¯åŠ¨ã€æµ‹è¯•æŠ¥å‘Šç”Ÿæˆç­‰ï¼›</li>
<li><code>test.ts</code>ï¼šå…¥å£æ–‡ä»¶ï¼Œç”¨äºåŠ è½½æ‰€æœ‰æµ‹è¯•æ–‡ä»¶ï¼›</li>
<li><code>tsconfig.spec.json</code>ï¼šç¼–è¯‘æµ‹è¯•æ–‡ä»¶æ‰€éœ€çš„ TypeScript é…ç½®ã€‚</li>
</ul>
<p><strong>2. ç¼–å†™å•å…ƒæµ‹è¯•ç”¨ä¾‹</strong></p>
<p>åˆ›å»ºä¸€ä¸ª<code>.spec.ts</code>åç¼€çš„æµ‹è¯•æ–‡ä»¶ï¼Œå†™ä¸€ä¸ªç®€å•çš„æµ‹è¯•ç”¨ä¾‹ï¼Œå¦‚ä¸‹ï¼š</p>
<p>demo.spec.ts</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-title function_">describe</span>(<span class="hljs-string">'Demo UT'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title function_">it</span>(<span class="hljs-string">'1+1=2'</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">expect</span>(<span class="hljs-number">1</span> + <span class="hljs-number">1</span>).<span class="hljs-title function_">toBe</span>(<span class="hljs-number">2</span>);
  });
});
</code></pre>
<p>æ¨èä½¿ç”¨AIè‡ªåŠ¨ç”ŸæˆåŸºç¡€æµ‹è¯•ç”¨ä¾‹ï¼Œå‡å°‘é‡å¤åŠ³åŠ¨ï¼Œæé«˜æ•ˆç‡ã€‚</p>
<p>æç¤ºè¯</p>
<pre><code class="hljs language-md" lang="md">ä¸ºæ–‡ä»¶ï¼šsrc\app\demo.ts ç”ŸæˆUTç”¨ä¾‹ã€‚

å‘½åæ–¹å¼ï¼š
<span class="hljs-bullet">-</span> æµ‹è¯•å¥—å‘½åï¼š[æ–‡ä»¶å]ï¼›
<span class="hljs-bullet">-</span> å†…å±‚æµ‹è¯•å¥—å‘½åï¼š[æ–¹æ³•å]ï¼›
<span class="hljs-bullet">-</span> ç”¨ä¾‹å‘½åï¼šåœºæ™¯[åºå·]ï¼š[åœºæ™¯å]

æµ‹è¯•æ–‡ä»¶ä¿å­˜è·¯å¾„ï¼šå½“å‰æ–‡ä»¶è·¯å¾„ä¸‹
</code></pre>
<p><strong>3. è¿è¡Œæµ‹è¯•</strong></p>
<p>è¿è¡Œä¸‹é¢å‘½ä»¤ï¼Œé»˜è®¤ä¼šæ‰“å¼€æµè§ˆå™¨å¹¶å®æ—¶è¿è¡Œæ‰€æœ‰æµ‹è¯•ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">ng <span class="hljs-built_in">test</span>
</code></pre>
<p>ä¹Ÿå¯æŒ‡å®šå‚æ•°è¿è¡Œå•ä¸ªå•å…ƒæµ‹è¯•æ–‡ä»¶ï¼Œé€‚ç”¨äºè°ƒè¯•ç‰¹å®šç»„ä»¶æˆ–æœåŠ¡ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">ng <span class="hljs-built_in">test</span> --include src/app/demo.spec.ts
</code></pre>
<p>æµè§ˆå™¨é¡µé¢ä¸Šä¼šæ˜¾ç¤ºæ‰€æœ‰ç”¨ä¾‹çš„æ‰§è¡Œç»“æœã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/02428f77cdf84d0e90859846013b823c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRGV2VUnlm6LpmJ8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764811834&amp;x-signature=Us5wRSRYRcMF7tO5gvlftmfA6Q0%3D" alt="test-result.png" loading="lazy"/></p>
<h3 data-id="heading-3">ä¸‰ã€Jasmine æ¡†æ¶å…¥é—¨</h3>
<p><strong>1. æ ¸å¿ƒæ¦‚å¿µ</strong></p>





























<table><thead><tr><th>æ¦‚å¿µ</th><th>æè¿°</th></tr></thead><tbody><tr><td>describe()</td><td>å®šä¹‰ä¸€ç»„ç›¸å…³çš„æµ‹è¯•ç”¨ä¾‹ï¼ˆæµ‹è¯•å¥—ä»¶ï¼‰</td></tr><tr><td>it()</td><td>å®šä¹‰å•ä¸ªæµ‹è¯•ç”¨ä¾‹ï¼ˆè§„æ ¼ï¼‰</td></tr><tr><td>beforeEach() / afterEach()</td><td>æ¯æ¬¡æ‰§è¡Œæµ‹è¯•å‰åè¿è¡Œçš„åˆå§‹åŒ–/æ¸…ç†ä»£ç </td></tr><tr><td>beforeAll() / afterAll()</td><td>æ•´ä¸ªæµ‹è¯•å¥—ä»¶å¼€å§‹å‰/ç»“æŸåè¿è¡Œä¸€æ¬¡</td></tr><tr><td>expect()</td><td>æ–­è¨€è¡¨è¾¾å¼ï¼Œåˆ¤æ–­å®é™…å€¼ä¸æœŸæœ›å€¼æ˜¯å¦ä¸€è‡´</td></tr></tbody></table>
<p>å¸¸ç”¨æ–­è¨€æ–¹æ³•å¦‚ä¸‹ï¼š</p>
<p><strong>å€¼ç›¸ç­‰æ€§æ–­è¨€</strong></p>
<ul>
<li><code>toBe(expected)</code>ï¼šåˆ¤æ–­ä¸¤ä¸ªå€¼æ˜¯å¦ä¸¥æ ¼ç›¸ç­‰ï¼ˆ<code>===</code>ï¼‰ã€‚</li>
<li><code>toEqual(expected)</code>ï¼šåˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡æˆ–å€¼æ˜¯å¦ç›¸ç­‰ã€‚</li>
<li><code>not</code>ï¼šä¸å…¶ä»–åŒ¹é…å™¨ä½¿ç”¨ï¼Œè¡¨ç¤ºä¸ç¬¦åˆè¯¥æ¡ä»¶ã€‚</li>
</ul>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-title function_">expect</span>(<span class="hljs-number">1</span>).<span class="hljs-title function_">toBe</span>(<span class="hljs-number">1</span>); <span class="hljs-comment">// success</span>

<span class="hljs-title function_">expect</span>({ <span class="hljs-attr">a</span>: <span class="hljs-number">1</span> }).<span class="hljs-property">not</span>.<span class="hljs-title function_">toBe</span>({ <span class="hljs-attr">a</span>: <span class="hljs-number">1</span> }); <span class="hljs-comment">// success</span>
<span class="hljs-title function_">expect</span>({ <span class="hljs-attr">a</span>: <span class="hljs-number">1</span> }).<span class="hljs-title function_">toEqual</span>({ <span class="hljs-attr">a</span>: <span class="hljs-number">1</span> }); <span class="hljs-comment">// success</span>

<span class="hljs-title function_">expect</span>(<span class="hljs-number">0</span>).<span class="hljs-property">not</span>.<span class="hljs-title function_">toBe</span>(<span class="hljs-literal">null</span>); <span class="hljs-comment">// success</span>
</code></pre>
<p><strong>çœŸå‡å€¼å’Œå®šä¹‰æ€§æ–­è¨€</strong></p>
<ul>
<li><code>toBeDefined()</code>:æ–­è¨€å€¼å·²å®šä¹‰ã€‚</li>
<li><code>toBeUndefined()</code>:æ–­è¨€å€¼æœªå®šä¹‰ã€‚</li>
<li><code>toBeNull()</code>:æ–­è¨€å€¼ä¸º nullã€‚</li>
<li><code>toBeTruthy()</code>:æ–­è¨€å€¼ä¸ºçœŸå€¼ã€‚</li>
<li><code>toBeFalsy()</code>:æ–­è¨€å€¼ä¸ºå‡å€¼ã€‚</li>
</ul>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-title function_">expect</span>(<span class="hljs-number">0</span>).<span class="hljs-title function_">toBeDefined</span>(); <span class="hljs-comment">// success</span>

<span class="hljs-title function_">expect</span>(<span class="hljs-literal">undefined</span>).<span class="hljs-title function_">toBeUndefined</span>(); <span class="hljs-comment">// success</span>

<span class="hljs-title function_">expect</span>(<span class="hljs-literal">null</span>).<span class="hljs-title function_">toBeNull</span>(); <span class="hljs-comment">// success</span>

<span class="hljs-title function_">expect</span>(<span class="hljs-number">1</span>).<span class="hljs-title function_">toBeTruthy</span>(); <span class="hljs-comment">// success</span>
<span class="hljs-title function_">expect</span>(<span class="hljs-literal">true</span>).<span class="hljs-title function_">toBeTruthy</span>(); <span class="hljs-comment">// success</span>
<span class="hljs-title function_">expect</span>({}).<span class="hljs-title function_">toBeTruthy</span>(); <span class="hljs-comment">// success</span>

<span class="hljs-title function_">expect</span>(<span class="hljs-number">0</span>).<span class="hljs-title function_">toBeFalsy</span>(); <span class="hljs-comment">// success</span>
<span class="hljs-title function_">expect</span>(<span class="hljs-string">''</span>).<span class="hljs-title function_">toBeFalsy</span>(); <span class="hljs-comment">// success</span>
<span class="hljs-title function_">expect</span>(<span class="hljs-literal">false</span>).<span class="hljs-title function_">toBeFalsy</span>(); <span class="hljs-comment">// success</span>
<span class="hljs-title function_">expect</span>(<span class="hljs-title class_">NaN</span>).<span class="hljs-title function_">toBeFalsy</span>(); <span class="hljs-comment">// success</span>
</code></pre>
<p><strong>æ•°å€¼èŒƒå›´æ–­è¨€</strong></p>
<ul>
<li><code>toBeLessThan(number)</code>: æ–­è¨€å€¼å°äºæŒ‡å®šçš„æ•°å­—ã€‚</li>
<li><code>toBeGreaterThan(number)</code>: æ–­è¨€å€¼å¤§äºæŒ‡å®šçš„æ•°å­—ã€‚</li>
</ul>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-title function_">expect</span>(<span class="hljs-number">5</span>).<span class="hljs-title function_">toBeLessThan</span>(<span class="hljs-number">10</span>); <span class="hljs-comment">// success</span>

<span class="hljs-title function_">expect</span>(<span class="hljs-number">10</span>).<span class="hljs-title function_">toBeGreaterThan</span>(<span class="hljs-number">5</span>); <span class="hljs-comment">// success</span>
</code></pre>
<p><strong>å…¶ä»–å¸¸ç”¨æ–­è¨€</strong></p>
<ul>
<li><code>toContain(item)</code>: æ–­è¨€æ•°ç»„æˆ–å­—ç¬¦ä¸²ä¸­åŒ…å«æŸä¸ªå…ƒç´ æˆ–å­ä¸²ã€‚</li>
<li><code>toBeCloseTo(number, precision)</code>: æ–­è¨€åœ¨æŒ‡å®šçš„ç²¾åº¦èŒƒå›´å†…ç›¸ä¼¼ã€‚</li>
<li><code>toMatch(RegExp)</code>: æ–­è¨€ç¬¦åˆæ­£åˆ™è¡¨è¾¾å¼ã€‚</li>
<li><code>toThrow()</code>: æ–­è¨€å‡½æ•°æ‰§è¡Œæ—¶æŠ›å‡ºé”™è¯¯ã€‚</li>
</ul>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-title function_">expect</span>([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]).<span class="hljs-title function_">toContain</span>(<span class="hljs-number">2</span>); <span class="hljs-comment">// success</span>

<span class="hljs-title function_">expect</span>(<span class="hljs-number">1.24</span>).<span class="hljs-title function_">toBeCloseTo</span>(<span class="hljs-number">1</span>, <span class="hljs-number">0.24</span>); <span class="hljs-comment">//success</span>

<span class="hljs-title function_">expect</span>(<span class="hljs-string">'123'</span>).<span class="hljs-title function_">toMatch</span>(<span class="hljs-regexp">/\d+/</span>); <span class="hljs-comment">// success</span>

<span class="hljs-title function_">expect</span>(<span class="hljs-function">() =&gt;</span> { <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(); }).<span class="hljs-title function_">toThrow</span>(); <span class="hljs-comment">// success</span>
</code></pre>
<p><strong>2. Mock ä¸ Spy</strong></p>
<ul>
<li><strong>Mock</strong>ï¼šåˆ›å»ºæ¨¡æ‹Ÿå¯¹è±¡ï¼Œä»£æ›¿å®é™…ä¾èµ–ã€‚</li>
</ul>
<p>ä½¿ç”¨<code>jasmine.createSpy()</code>åˆ›å»ºæ¨¡æ‹Ÿå‡½æ•°ï¼Œç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> mockService = jasmine.<span class="hljs-title function_">createSpyObj</span>(<span class="hljs-string">'Service'</span>, [<span class="hljs-string">'methodName'</span>]);
</code></pre>
<ul>
<li><strong>Spy</strong>ï¼šç›‘è§†æ–¹æ³•è°ƒç”¨ï¼Œè®°å½•è°ƒç”¨æ¬¡æ•°ã€å‚æ•°ç­‰ã€‚</li>
</ul>
<p>ä½¿ç”¨ <code>spyOn()</code> æ–¹æ³•æ¥åˆ›å»ºä¸€ä¸ªSpyå¯¹è±¡ï¼Œè¯¥å¯¹è±¡ä¼šç›‘æ§æŒ‡å®šçš„æ–¹æ³•ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> myObject = {
  <span class="hljs-attr">myMethod</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">arg</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-string">'real return'</span>;
  }
};
<span class="hljs-title function_">spyOn</span>(myObject, <span class="hljs-string">'myMethod'</span>);
</code></pre>
<p>æ¨¡æ‹Ÿæ–¹æ³•è¡Œä¸ºï¼š</p>
<ul>
<li><code>and.returnValue()</code>: è®©Spyåœ¨è¢«è°ƒç”¨æ—¶è¿”å›ä¸€ä¸ªé¢„è®¾çš„å€¼ã€‚</li>
</ul>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-title function_">spyOn</span>(myObject, <span class="hljs-string">'myMethod'</span>).<span class="hljs-property">and</span>.<span class="hljs-title function_">returnValue</span>(<span class="hljs-string">'fake return'</span>);
</code></pre>
<ul>
<li><code>and.callFake()</code>: æä¾›ä¸€ä¸ªæ¨¡æ‹Ÿå‡½æ•°ï¼Œè¯¥å‡½æ•°å°†ä»£æ›¿åŸå§‹å‡½æ•°æ‰§è¡Œã€‚</li>
</ul>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-title function_">spyOn</span>(myObject, <span class="hljs-string">'myMethod'</span>).<span class="hljs-property">and</span>.<span class="hljs-title function_">callFake</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">arg</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-string">'mocked: '</span> + arg;
});
</code></pre>
<ul>
<li><code>and.throwError()</code>: æ¨¡æ‹ŸæŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ã€‚</li>
</ul>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-title function_">spyOn</span>(myObject, <span class="hljs-string">'myMethod'</span>).<span class="hljs-property">and</span>.<span class="hljs-title function_">throwError</span>(<span class="hljs-string">'Something went wrong'</span>);
</code></pre>
<p>éªŒè¯è°ƒç”¨ï¼šåœ¨æµ‹è¯•ä¸­è°ƒç”¨è¢«Spyçš„å‡½æ•°åï¼Œå¯ä»¥ä½¿ç”¨Spyå¯¹è±¡çš„æ–¹æ³•æ¥éªŒè¯å®ƒçš„è¡Œä¸ºï¼Œä¾‹å¦‚ï¼š</p>





















<table><thead><tr><th>æ–¹æ³•</th><th>æè¿°</th></tr></thead><tbody><tr><td>toHaveBeenCalled()</td><td>æ£€æŸ¥å‡½æ•°æ˜¯å¦è¢«è°ƒç”¨è¿‡</td></tr><tr><td>toHaveBeenCalledTimes(number)</td><td>æ£€æŸ¥å‡½æ•°è¢«è°ƒç”¨çš„æ¬¡æ•°</td></tr><tr><td>toHaveBeenCalledWith(arg1, arg2, ...)</td><td>æ£€æŸ¥å‡½æ•°æ˜¯å¦ç”¨ç‰¹å®šçš„å‚æ•°è¢«è°ƒç”¨è¿‡</td></tr></tbody></table>
<ul>
<li><strong>ä¾èµ–æ³¨å…¥</strong>ï¼šåˆ©ç”¨Angular çš„TestBed æ¥åˆ›å»ºä¸€ä¸ªéš”ç¦»çš„æµ‹è¯•ç¯å¢ƒï¼Œå¹¶æä¾›æ¨¡æ‹Ÿçš„ä¾èµ–é¡¹ã€‚
<ul>
<li><code>TestBed.configureTestingModule</code>: é…ç½®æµ‹è¯•æ¨¡å—</li>
<li><code>TestBed.inject</code>ï¼šè·å–å’Œæµ‹è¯•éœ€è¦æ³¨å…¥çš„æœåŠ¡ã€‚</li>
</ul>
</li>
</ul>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">TestBed</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/core/testing'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">MyComponent</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./my.component'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">MyService</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./my.service'</span>; <span class="hljs-comment">// ä½ çš„æœåŠ¡</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">MockMyService</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./mock-my.service'</span>; <span class="hljs-comment">// MockæœåŠ¡</span>

<span class="hljs-title function_">describe</span>(<span class="hljs-string">'MyComponent'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">let</span> <span class="hljs-attr">component</span>: <span class="hljs-title class_">MyComponent</span>;
  <span class="hljs-keyword">let</span> <span class="hljs-attr">service</span>: <span class="hljs-title class_">MyService</span>; <span class="hljs-comment">// å®é™…æœåŠ¡ç±»å‹</span>

  <span class="hljs-title function_">beforeEach</span>(<span class="hljs-keyword">async</span> () =&gt; {
    <span class="hljs-keyword">await</span> <span class="hljs-title class_">TestBed</span>.<span class="hljs-title function_">configureTestingModule</span>({
      <span class="hljs-attr">declarations</span>: [<span class="hljs-title class_">MyComponent</span>],
      <span class="hljs-attr">providers</span>: [
        <span class="hljs-comment">// æä¾› Mock æœåŠ¡</span>
        { <span class="hljs-attr">provide</span>: <span class="hljs-title class_">MyService</span>, <span class="hljs-attr">useClass</span>: <span class="hljs-title class_">MockMyService</span> }
      ]
    }).<span class="hljs-title function_">compileComponents</span>();

    service = <span class="hljs-title class_">TestBed</span>.<span class="hljs-title function_">inject</span>(<span class="hljs-title class_">MyService</span>); <span class="hljs-comment">// ä½¿ç”¨ TestBed.inject è·å– Mock æœåŠ¡</span>
  });

  <span class="hljs-title function_">it</span>(<span class="hljs-string">'should create'</span>, <span class="hljs-function">() =&gt;</span> {
    component = <span class="hljs-title class_">TestBed</span>.<span class="hljs-title function_">createComponent</span>(<span class="hljs-title class_">MyComponent</span>).<span class="hljs-property">componentInstance</span>;
    <span class="hljs-title function_">expect</span>(component).<span class="hljs-title function_">toBeTruthy</span>();
  });

  <span class="hljs-title function_">it</span>(<span class="hljs-string">'should call service method'</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">// å‡è®¾ MockMyService æœ‰ä¸€ä¸ª getData æ–¹æ³•</span>
    <span class="hljs-title function_">spyOn</span>(service, <span class="hljs-string">'getData'</span>).<span class="hljs-property">and</span>.<span class="hljs-title function_">returnValue</span>(<span class="hljs-string">'mock data'</span>);

    component.<span class="hljs-title function_">ngOnInit</span>(); <span class="hljs-comment">// è§¦å‘ä¾èµ–æ³¨å…¥çš„æœåŠ¡æ–¹æ³•</span>

    <span class="hljs-title function_">expect</span>(service.<span class="hljs-property">getData</span>).<span class="hljs-title function_">toHaveBeenCalled</span>(); <span class="hljs-comment">// éªŒè¯æœåŠ¡æ–¹æ³•æ˜¯å¦è¢«è°ƒç”¨</span>
    <span class="hljs-title function_">expect</span>(component.<span class="hljs-property">data</span>).<span class="hljs-title function_">toBe</span>(<span class="hljs-string">'mock data'</span>); <span class="hljs-comment">// éªŒè¯ç»„ä»¶æ˜¯å¦æ­£ç¡®ä½¿ç”¨äº†æœåŠ¡è¿”å›çš„æ•°æ®</span>
  });
});
</code></pre>
<p><strong>3. å¼‚æ­¥æµ‹è¯•å¤„ç†</strong></p>
<ul>
<li>ä½¿ç”¨ <code>done()</code> å›è°ƒ</li>
</ul>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// Promise</span>
<span class="hljs-title function_">it</span>(<span class="hljs-string">'åº”å¼‚æ­¥è·å–æ•°æ®'</span>, <span class="hljs-function">(<span class="hljs-params">done: DoneFn</span>) =&gt;</span> {
  <span class="hljs-title function_">fetchData</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> {
    <span class="hljs-title function_">expect</span>(data).<span class="hljs-title function_">toEqual</span>(<span class="hljs-string">'expected result'</span>);
    <span class="hljs-title function_">done</span>();
  });
});

<span class="hljs-comment">// Observable</span>
<span class="hljs-title function_">it</span>(<span class="hljs-string">'åº”ä½¿ç”¨Observableè·å–æ•°æ®'</span>, <span class="hljs-function">(<span class="hljs-params">done: DoneFn</span>) =&gt;</span> {
  <span class="hljs-title function_">queryData</span>().<span class="hljs-title function_">subscribe</span>({
    <span class="hljs-attr">next</span>: <span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {
      <span class="hljs-title function_">expect</span>(data).<span class="hljs-title function_">toBe</span>(<span class="hljs-string">'expected result'</span>);
    },
    <span class="hljs-attr">complete</span>: <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-title function_">done</span>();
    },
  });
});
</code></pre>
<ul>
<li>ä½¿ç”¨ async/await å¤„ç†Promise</li>
</ul>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-title function_">it</span>(<span class="hljs-string">'åº”è¯¥ä½¿ç”¨ async/await è·å–æ•°'</span>, <span class="hljs-keyword">async</span> () =&gt; {
  <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchData</span>();
  <span class="hljs-title function_">expect</span>(data).<span class="hljs-title function_">toEqual</span>(<span class="hljs-string">'expected result'</span>);
});
</code></pre>
<h3 data-id="heading-4">å››ã€æµ‹è¯•è¦†ç›–ç‡</h3>
<p><strong>1. æµ‹è¯•è¦†ç›–ç‡çš„æ¦‚å¿µ</strong></p>
<p>æµ‹è¯•è¦†ç›–ç‡æ˜¯æŒ‡æµ‹è¯•ç”¨ä¾‹æ‰§è¡Œè¿‡ç¨‹ä¸­è®¿é—®åˆ°çš„æºä»£ç è¡Œæ•°å æ€»ä»£ç çš„æ¯”ä¾‹ï¼Œç”¨æ¥è¡¡é‡æµ‹è¯•ç”¨ä¾‹è¦†ç›–ä»£ç çš„ç¨‹åº¦ã€‚</p>
<p>é«˜è¦†ç›–ç‡ç¡®ä¿ä»£ç çš„å…³é”®éƒ¨åˆ†è¢«å……åˆ†æµ‹è¯•ï¼Œæœ‰åŠ©äºå‘ç°æ½œåœ¨ç¼ºé™·ã€‚</p>
<p><strong>2. é…ç½®è¦†ç›–ç‡æ’ä»¶</strong></p>
<ul>
<li>å®‰è£…æ’ä»¶ï¼š</li>
</ul>
<pre><code class="hljs language-bash" lang="bash">npm install karma-coverage --save-dev
</code></pre>
<ul>
<li>ä¿®æ”¹é…ç½®æ–‡ä»¶<code>karma.conf.js</code>ï¼Œæ·»åŠ ä»¥ä¸‹é…ç½®ï¼š</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">config</span>) {
  config.<span class="hljs-title function_">set</span>({
    <span class="hljs-attr">plugins</span>: [
      <span class="hljs-built_in">require</span>(<span class="hljs-string">'karma-coverage'</span>)
    ],
    <span class="hljs-attr">reporters</span>: [<span class="hljs-string">'progress'</span>, <span class="hljs-string">'coverage'</span>],
    <span class="hljs-attr">coverageReporter</span>: {
      <span class="hljs-attr">type</span>: <span class="hljs-string">'html'</span>,
      <span class="hljs-attr">dir</span>: <span class="hljs-string">'coverage/'</span>
    }
  });
};
</code></pre>
<p><strong>3. è§£è¯»è¦†ç›–ç‡æŠ¥å‘Š</strong></p>
<ul>
<li>ç”ŸæˆæŠ¥å‘Šï¼šè¿è¡Œå‘½ä»¤</li>
</ul>
<pre><code class="hljs language-bash" lang="bash">ng <span class="hljs-built_in">test</span> --code-coverage
</code></pre>
<p>å¦‚æœå¸Œæœ›æ¯æ¬¡è¿è¡Œ<code>ng test</code>éƒ½åŒæ­¥åˆ·æ–°è¦†ç›–ç‡ï¼Œå¯ä»¥ä¿®æ”¹<code>angular.json</code>ä¸­çš„<code>architect.test.options</code>æ·»åŠ é…ç½®ï¼š<code>"codeCoverage": true</code></p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-attr">"options"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"main"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"src/test.ts"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"polyfills"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-string">"zone.js"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-string">"zone.js/testing"</span>
  <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"tsConfig"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"tsconfig.spec.json"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"karmaConfig"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"karma.conf.js"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"codeCoverage"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
  ...
<span class="hljs-punctuation">}</span>
</code></pre>
<ul>
<li>æŸ¥çœ‹æŠ¥å‘Šï¼šåœ¨<code>coverage</code>ç›®å½•ä¸‹æ‰“å¼€<code>index.html</code>ï¼Œåˆ†æå“ªäº›ä»£ç æœªè¢«è¦†ç›–ã€‚
<ul>
<li>è¡Œè¦†ç›–ç‡ï¼ˆLinesï¼‰</li>
<li>åˆ†æ”¯è¦†ç›–ç‡ï¼ˆBranchesï¼‰</li>
<li>å‡½æ•°è¦†ç›–ç‡ï¼ˆFunctionsï¼‰</li>
<li>è¯­å¥è¦†ç›–ç‡ï¼ˆStatementsï¼‰</li>
</ul>
</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/26f728b1780943cabb4d49582063aa5f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRGV2VUnlm6LpmJ8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764811834&amp;x-signature=iAfIEn0hwZ%2BWKekz3dzawjQimgg%3D" alt="coverage.png" loading="lazy"/></p>
<h3 data-id="heading-5">åŠ å…¥æˆ‘ä»¬</h3>
<blockquote>
<p>DevUIå›¢é˜Ÿé‡ç£…æ¨å‡º~<strong>å‰ç«¯æ™ºèƒ½åŒ–åœºæ™¯è§£å†³æ–¹æ¡ˆMateChat</strong>ï¼Œä¸ºé¡¹ç›®æ·»åŠ æ™ºèƒ½åŒ–åŠ©æ‰‹~</p>
<p>æºç ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgitcode.com%2FDevCloudFE%2FMateChat%2Foverview" target="_blank" title="https://gitcode.com/DevCloudFE/MateChat/overview" ref="nofollow noopener noreferrer">gitcode.com/DevCloudFE/â€¦</a>ï¼ˆæ¬¢è¿star~ï¼‰</p>
<p>å®˜ç½‘ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmatechat.gitcode.com" target="_blank" title="https://matechat.gitcode.com" ref="nofollow noopener noreferrer">matechat.gitcode.com</a></p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸŒ åŠ¨æ€ç½‘ç»œç¯å¢ƒä¸‹çš„ WebAIGC æ–­ç‚¹ç»­ä¼ ä¸å®¹é”™æŠ€æœ¯]]></title>    <link>https://juejin.cn/post/7577171133431693353</link>    <guid>https://juejin.cn/post/7577171133431693353</guid>    <pubDate>2025-11-27T01:22:48.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577171133431693353" data-draft-id="7577189654471098394" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸŒ åŠ¨æ€ç½‘ç»œç¯å¢ƒä¸‹çš„ WebAIGC æ–­ç‚¹ç»­ä¼ ä¸å®¹é”™æŠ€æœ¯"/> <meta itemprop="keywords" content="å‰ç«¯,äººå·¥æ™ºèƒ½,AIGC"/> <meta itemprop="datePublished" content="2025-11-27T01:22:48.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="LeonGao"/> <meta itemprop="url" content="https://juejin.cn/user/3976252950591149"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸŒ åŠ¨æ€ç½‘ç»œç¯å¢ƒä¸‹çš„ WebAIGC æ–­ç‚¹ç»­ä¼ ä¸å®¹é”™æŠ€æœ¯
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3976252950591149/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    LeonGao
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-27T01:22:48.000Z" title="Thu Nov 27 2025 01:22:48 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body blockquote&gt;:first-child{margin-top:0}.markdown-body blockquote&gt;:last-child{margin-bottom:0}.markdown-body{overflow:hidden;line-height:1.75;font-size:15px;background-image:linear-gradient(90deg,rgba(72,42,10,.05) 5%,rgba(72,42,10,0) 0),linear-gradient(1turn,rgba(72,42,10,.05) 5%,rgba(72,42,10,0) 0);background-size:20px 20px;background-position:50%;padding-top:0!important}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{position:relative;display:flex;border-bottom:5px solid #6d4e00;line-height:35px;letter-spacing:1px;font-size:25px;padding-left:25px;color:#664900;text-shadow:1px 1px 1px #8a6200;padding-bottom:0}.markdown-body h1:before{content:"";display:flex;position:absolute;left:0;top:3px;bottom:0;margin:auto;width:20px;height:20px;background-size:20px 20px;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAQlBMVEVHcEwlRnqtZBj76q4lRnolRnolRnolRnolRnokRnr/gGtrVUeLXDBKTl+hYSHasW7Ik0zs0JG4dCvUdEE0SW+rYxrLQJfjAAAACnRSTlMA////0H/xUaMi5MCoTwAACfVJREFUeNrtnQl3qygUgJ9GXAqosfL//+pgmgXwXmRNJGdu55xO+6rx8+6I8O9fehmGriN93zdN07bVXdpW/ih/SbpuGP6dXbpOXv7z2i3S9ISck2eQOnAhMHG64VQQbmrAaM4B05GmipaGdB+m6BNQPBXzMYtKR3EPbB/RS5eY4g+lIW9WBqnySCvVMrzRpqqs0g9nwVg5p1KYlHEchRT5bftp+y3n6xlQDjAkABtrKULU9f377ev+4/1/NiT+URRiZRhrcZP6WLa/Gq005BORaqXsdYEuHPIP798ZxSyt6d5sVfxJESRCsvB32lfXwhRjnUBGmKXNoJQe04VIASJqRC/9G7yDsyQMiloYz+0pHYghEoPISAGgpDSvHsCoMwmA0mfjSG5UOsqah2RodkljzMkhZZdamiEDB8+Nsbk9T04yGNljDXGOZZ6u0+Tj9DuvbyNJBuPO0ABtLNPlJtfZJ4CNNCWJoY8gddwxNpm9YrHh9DEkBoeMud4Kma8XRZaYpBJOYvg59U9wOsblMvmGrzQe30dyqFZ1dxPfO0FT5BOdw989THVs4q1TFk+iN4PMu7CaLpd4EJOExNaJLE4d0xQKYpJ0cY5Ozcwwu6WOu2cs9TUYxPB4b4fvLRzTUXbT1HH7y0BnB0j6CAehkPFfFzd1TMsi6sU1/P4VM9NiISHBlYnBMR+kad075sXlmMehj1twnfTUqJH4GJfqIKte7S72emPnHbdiYHIB0e6ATjKq1UoTaFh6wBL2csMIVo9fH/v6QRHAgoxrOHQQxG/36tC1ODmGOeBGBRmXalgcdhDQ1xF1vI6a3DF2d4r7G1enOUgNOshlFq7qUCxrca9ldiCam7ilxRbP6JbOYsYtfLFmkcXEgLG1DN/6eroxHjqh5bh+Uw27e1oWVK7pN+AqwzUcq/UYTPw8nWufLFBHN2zcxLRYlmGPs6rA2Wy0uJe/E7TknbHIa1WH1bLA8DAj3JpxET+FCNCWZ5uNT6jxTPZK/1mXoCBeKlGLRT2lP69XN3XdqqCojKX1ZVda6iD2McjeXSHa0I+AHd2InGAJgjRVM6gOBfygDrarRJnho6eQBbrns+HkcNUCWtYClJa66qFgPbqqZEBTCOAgRqxCOhQBWpZeIC6QBq91hEoI5unTjsMsK9DCFigY9WNn19hgVCrELalrTw6WnYMYzjHhQ2/7G2xTx1HvwpzSe4cVi5ORQQwMW9+72FU5L4gGsa6Yu1RcDeIhs64Qs8izt0vGH+n9/IKaIlYpM2UqkYOrwwq5CgBjWpyGtxaonxe4KaJ3hx+7O0HaqVkxLBPj8FmBVmjNevIUFhUuDmMq5NDV9RwyPe/95IvxAhG7ymqxHGE5sZJL2kPLUhUinkXfrnFwGFwXD99djNLSFh/meXEb2B6Oyiwm0I7BC+OlTlOVPk9K8CIYzu5YHwKDTI6XAo5lz3WEqEXwQRKhh5cyLa6D81P4PXBw984as9YaGXHwx4Ba8rmOldUat/BHt9cQ38AaljnBdCJqs60OcXVDJZP//ZwSWtV9FpHNtgg22KuYx/U2tB5Mcp1TYOiphNhiFjgWeJ3DL2OZpuuUisIoUyzZEJ76I+LmyqWdv8LwnEiwMYczihjxeqtBsuFJSTg2oD1ETQx4v6D1VleSZW1xCwvAfVGWpQ069kgrQksAUW2rReYzsboIjSABuDQX0QJwB9cnZVgWVgE31vrklAJnEmVObykgYCk/VGX5OlpuKb5eiovUAvJ2tMstw0kIkNdpiSA91K6XA6K8CVCyr4PePhTo65q3DyX7OpTbSVk1PB62mhJ9HSpSqtKaESxsFRm0tLBVcvTV+vbBrLRK4hC7aitN9B0ZpX6vNMgjGIt5ZdmMv32KrmprD1afsPd4FEhThK0+WfTl3kpd482AGvG3jQdZK1+t8ireDswhofigRb3fxfI/4jj+xkffUX/1ccxxhEP9qyyBEH9Cx9vhf8TB7eiSpBHjZVSa4whQMJC1TqIR6q8RERtjOr2ID0yx3oYi0oAIvZCPz4eG64p3ObuREeOHUIR3MBVJwq9yll5P7KHdiPBOiOoRa/AjXz21J3k04l+i8OjErj4kaXWQiIVO/EvA+KLRAEnUVomtjPd6SvR3RLoeMT54nKFH1EqtkkEGFaQuTlSQrsxhRiOIt51S/Ho8B11+FUlwRaHnU4utEI38/mgSjRJ8PhWEtN6Z6WcncQOU4efjKoh3zfi7/+DfhPrwOZ9a/iYBiVJJxPlei3CqIDTYEqAPFow5/c71fAdVIwmo4n+cTIGbr2n9NULAE5ifcNNS63hvEOFk0wxYnICBBZ0I9xERBVILF0uggNdxuOkR4S6ngvgPmArzHv4KpMKGQFjQ+Rw6q9dC6R6dgZaJF7RVWIH0BTY9h+fz0ohHOyLuy+He/hN4GUR3/RxcBx2f76izarI9CaXmzRmhNQuSfIgJkva5GzN6HJbhQxCNsDGDSh56plmef6sg2eaXPsYBt5W+H6VE6omG6hOS1w4hiTWiThbJ1YO+RSO1vrpMlomf6nhQGz0m7qT6W04XOUHyzhZ4rkG+0hxL66oDW9mnPWyL3TMmssxyQUwr01CHX7b2OvUIaqS48TnMtAoEQTQixJeAlDfSiGmk/l8jpwIpTyFqOfeNIHWBooC036ERtUQp2tm/CKT5jjySbxTlvUVj2yhjvyWDVL3yfKRojXwLSEWUp7q0PBAKPp7m5YGoT3WH7wAZ1BeOywNZv3Gak/LIqriwxbQ5jaTcsEW1eb+FvoWo+zr5V/IUOvNtsapU2zJXSyj0xVB13sPfq0kkZA7dubIIKXIlJ8Cy7u+BN22RVcr+peOuxHdcBbA04FAVmEoEtO5vX55K4KVZS1QJvBBzU1rgUl8JapBNYIowLoZtD9NWRTWKqqe36L48BSz8QPH9epqqIDehlh2UuqocEmrdV7AvhuRoM74m80yeDIEX3ppreNN235FxV58DNjhswn5K8zK21+5ctjut6NmUIoy9tVvitnHr2VDM3ahtW8KQ/Vbsp9GGiWHfk8skyTSFz9/HdxhHe4uR/RxX/mG1SGXwypcDJNmCMfucZ/C1CuCQUbiBUDYbe7tiRkZX8GIat50d+wqR1fdN7ygGzrHrcN4kGFHK02cil5M6INgQVsvnNz77T5PqUFYJJInYmIBplJfP5On4eiOwYfhuCD44oLyYVs43rI1rk3H7usttzq8Qo3j84vavN9mOkAeuq8dHEd9NtCVKX51Oen+MM6IEYvz5StOehKLpIjD+nKU5AQWJpLizdB+1sb5LQvFRxbSJVGHmSdK/0WWaPguEYmcSJ68aWkK6rAw6jwSSCmrTWVHT96R7HwHANEgqybVJL+E2vE2q7Uu91Gr73SbbNUvZDtiOlCeIv4r/AI+0XUwz1lvcAAAAAElFTkSuQmCC")}.markdown-body h2{position:relative;padding:0 0 0 20px;font-size:20px;font-weight:700;color:#614500}.markdown-body h2:before{content:"";position:absolute;top:3px;bottom:0;left:0;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAQlBMVEVHcEwlRnqtZBj76q4lRnolRnolRnolRnolRnokRnr/gGtrVUeLXDBKTl+hYSHasW7Ik0zs0JG4dCvUdEE0SW+rYxrLQJfjAAAACnRSTlMA////0H/xUaMi5MCoTwAACfVJREFUeNrtnQl3qygUgJ9GXAqosfL//+pgmgXwXmRNJGdu55xO+6rx8+6I8O9fehmGriN93zdN07bVXdpW/ih/SbpuGP6dXbpOXv7z2i3S9ISck2eQOnAhMHG64VQQbmrAaM4B05GmipaGdB+m6BNQPBXzMYtKR3EPbB/RS5eY4g+lIW9WBqnySCvVMrzRpqqs0g9nwVg5p1KYlHEchRT5bftp+y3n6xlQDjAkABtrKULU9f377ev+4/1/NiT+URRiZRhrcZP6WLa/Gq005BORaqXsdYEuHPIP798ZxSyt6d5sVfxJESRCsvB32lfXwhRjnUBGmKXNoJQe04VIASJqRC/9G7yDsyQMiloYz+0pHYghEoPISAGgpDSvHsCoMwmA0mfjSG5UOsqah2RodkljzMkhZZdamiEDB8+Nsbk9T04yGNljDXGOZZ6u0+Tj9DuvbyNJBuPO0ABtLNPlJtfZJ4CNNCWJoY8gddwxNpm9YrHh9DEkBoeMud4Kma8XRZaYpBJOYvg59U9wOsblMvmGrzQe30dyqFZ1dxPfO0FT5BOdw989THVs4q1TFk+iN4PMu7CaLpd4EJOExNaJLE4d0xQKYpJ0cY5Ozcwwu6WOu2cs9TUYxPB4b4fvLRzTUXbT1HH7y0BnB0j6CAehkPFfFzd1TMsi6sU1/P4VM9NiISHBlYnBMR+kad075sXlmMehj1twnfTUqJH4GJfqIKte7S72emPnHbdiYHIB0e6ATjKq1UoTaFh6wBL2csMIVo9fH/v6QRHAgoxrOHQQxG/36tC1ODmGOeBGBRmXalgcdhDQ1xF1vI6a3DF2d4r7G1enOUgNOshlFq7qUCxrca9ldiCam7ilxRbP6JbOYsYtfLFmkcXEgLG1DN/6eroxHjqh5bh+Uw27e1oWVK7pN+AqwzUcq/UYTPw8nWufLFBHN2zcxLRYlmGPs6rA2Wy0uJe/E7TknbHIa1WH1bLA8DAj3JpxET+FCNCWZ5uNT6jxTPZK/1mXoCBeKlGLRT2lP69XN3XdqqCojKX1ZVda6iD2McjeXSHa0I+AHd2InGAJgjRVM6gOBfygDrarRJnho6eQBbrns+HkcNUCWtYClJa66qFgPbqqZEBTCOAgRqxCOhQBWpZeIC6QBq91hEoI5unTjsMsK9DCFigY9WNn19hgVCrELalrTw6WnYMYzjHhQ2/7G2xTx1HvwpzSe4cVi5ORQQwMW9+72FU5L4gGsa6Yu1RcDeIhs64Qs8izt0vGH+n9/IKaIlYpM2UqkYOrwwq5CgBjWpyGtxaonxe4KaJ3hx+7O0HaqVkxLBPj8FmBVmjNevIUFhUuDmMq5NDV9RwyPe/95IvxAhG7ymqxHGE5sZJL2kPLUhUinkXfrnFwGFwXD99djNLSFh/meXEb2B6Oyiwm0I7BC+OlTlOVPk9K8CIYzu5YHwKDTI6XAo5lz3WEqEXwQRKhh5cyLa6D81P4PXBw984as9YaGXHwx4Ba8rmOldUat/BHt9cQ38AaljnBdCJqs60OcXVDJZP//ZwSWtV9FpHNtgg22KuYx/U2tB5Mcp1TYOiphNhiFjgWeJ3DL2OZpuuUisIoUyzZEJ76I+LmyqWdv8LwnEiwMYczihjxeqtBsuFJSTg2oD1ETQx4v6D1VleSZW1xCwvAfVGWpQ069kgrQksAUW2rReYzsboIjSABuDQX0QJwB9cnZVgWVgE31vrklAJnEmVObykgYCk/VGX5OlpuKb5eiovUAvJ2tMstw0kIkNdpiSA91K6XA6K8CVCyr4PePhTo65q3DyX7OpTbSVk1PB62mhJ9HSpSqtKaESxsFRm0tLBVcvTV+vbBrLRK4hC7aitN9B0ZpX6vNMgjGIt5ZdmMv32KrmprD1afsPd4FEhThK0+WfTl3kpd482AGvG3jQdZK1+t8ireDswhofigRb3fxfI/4jj+xkffUX/1ccxxhEP9qyyBEH9Cx9vhf8TB7eiSpBHjZVSa4whQMJC1TqIR6q8RERtjOr2ID0yx3oYi0oAIvZCPz4eG64p3ObuREeOHUIR3MBVJwq9yll5P7KHdiPBOiOoRa/AjXz21J3k04l+i8OjErj4kaXWQiIVO/EvA+KLRAEnUVomtjPd6SvR3RLoeMT54nKFH1EqtkkEGFaQuTlSQrsxhRiOIt51S/Ho8B11+FUlwRaHnU4utEI38/mgSjRJ8PhWEtN6Z6WcncQOU4efjKoh3zfi7/+DfhPrwOZ9a/iYBiVJJxPlei3CqIDTYEqAPFow5/c71fAdVIwmo4n+cTIGbr2n9NULAE5ifcNNS63hvEOFk0wxYnICBBZ0I9xERBVILF0uggNdxuOkR4S6ngvgPmArzHv4KpMKGQFjQ+Rw6q9dC6R6dgZaJF7RVWIH0BTY9h+fz0ohHOyLuy+He/hN4GUR3/RxcBx2f76izarI9CaXmzRmhNQuSfIgJkva5GzN6HJbhQxCNsDGDSh56plmef6sg2eaXPsYBt5W+H6VE6omG6hOS1w4hiTWiThbJ1YO+RSO1vrpMlomf6nhQGz0m7qT6W04XOUHyzhZ4rkG+0hxL66oDW9mnPWyL3TMmssxyQUwr01CHX7b2OvUIaqS48TnMtAoEQTQixJeAlDfSiGmk/l8jpwIpTyFqOfeNIHWBooC036ERtUQp2tm/CKT5jjySbxTlvUVj2yhjvyWDVL3yfKRojXwLSEWUp7q0PBAKPp7m5YGoT3WH7wAZ1BeOywNZv3Gak/LIqriwxbQ5jaTcsEW1eb+FvoWo+zr5V/IUOvNtsapU2zJXSyj0xVB13sPfq0kkZA7dubIIKXIlJ8Cy7u+BN22RVcr+peOuxHdcBbA04FAVmEoEtO5vX55K4KVZS1QJvBBzU1rgUl8JapBNYIowLoZtD9NWRTWKqqe36L48BSz8QPH9epqqIDehlh2UuqocEmrdV7AvhuRoM74m80yeDIEX3ppreNN235FxV58DNjhswn5K8zK21+5ctjut6NmUIoy9tVvitnHr2VDM3ahtW8KQ/Vbsp9GGiWHfk8skyTSFz9/HdxhHe4uR/RxX/mG1SGXwypcDJNmCMfucZ/C1CuCQUbiBUDYbe7tiRkZX8GIat50d+wqR1fdN7ygGzrHrcN4kGFHK02cil5M6INgQVsvnNz77T5PqUFYJJInYmIBplJfP5On4eiOwYfhuCD44oLyYVs43rI1rk3H7usttzq8Qo3j84vavN9mOkAeuq8dHEd9NtCVKX51Oen+MM6IEYvz5StOehKLpIjD+nKU5AQWJpLizdB+1sb5LQvFRxbSJVGHmSdK/0WWaPguEYmcSJ68aWkK6rAw6jwSSCmrTWVHT96R7HwHANEgqybVJL+E2vE2q7Uu91Gr73SbbNUvZDtiOlCeIv4r/AI+0XUwz1lvcAAAAAElFTkSuQmCC");background-size:100% 100%;background-repeat:no-repeat;width:15px;height:15px;margin:auto}.markdown-body h3{width:100%;text-align:left;margin:20px 10px 0 0;font-size:18px;font-weight:700;display:inline-block;padding-left:10px;padding-bottom:0;border-left:5px solid #8f6600;color:#614500}.markdown-body h4,.markdown-body h5,.markdown-body h6{font-weight:700;color:#a37400}.markdown-body h4{font-size:17px}.markdown-body h5,.markdown-body h6{display:flex;align-items:center}.markdown-body h5:after,.markdown-body h6:after{display:inline-block;border:2px solid #fff6e0;color:rgba(189,134,0,.5);border-radius:50%;text-align:center;margin-left:5px}.markdown-body h5{font-size:14px}.markdown-body h5:after{content:"5";width:15px;height:15px;line-height:15px;font-size:13px}.markdown-body h6{font-size:12px}.markdown-body h6:after{content:"6";width:13px;height:13px;line-height:13px;font-size:12px}.markdown-body p{color:#412c0c;letter-spacing:1px;font-weight:400;margin-bottom:16px}.markdown-body img{max-width:100%;display:block;margin:auto}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#755300;font-weight:400;border-bottom:1px solid #755300;font-weight:bolder;text-decoration:none}.markdown-body table{width:100%!important;margin:0;font-size:12px;width:auto;max-width:100%;overflow:auto;border-collapse:collapse;border-spacing:0}.markdown-body table img{box-shadow:none}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body thead tr th{text-align:center}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px;box-sizing:border-box;border:1px solid rgba(72,42,10,.1)}.markdown-body blockquote{position:relative;text-size-adjust:100%;line-height:25px;font-weight:400;border-radius:10px;font-style:normal;text-align:left;box-sizing:inherit;border:1px solid #ffd87a;background-color:rgba(189,134,0,.5);margin:20px 0;padding:20px}.markdown-body blockquote p{color:#fff6e0;letter-spacing:2px;margin:0}.markdown-body blockquote:after,.markdown-body blockquote:before{position:absolute;color:#cc9100;font-size:34px;font-weight:700}.markdown-body blockquote:before{content:"â";top:8px;left:5px}.markdown-body blockquote:after{content:"â";right:5px;bottom:-5px}.markdown-body strong{color:#c28a00;font-weight:bolder}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{color:#c28a00}.markdown-body em strong{font-style:normal;color:#c28a00;background-color:#8a6200}.markdown-body s{color:#c28a00}.markdown-body hr{border-top:1px solid #805b00}.markdown-body code,.markdown-body li code,.markdown-body p code{color:#996d00;background-color:rgba(130,98,0,.3)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit;color:#858585;font-family:bold;letter-spacing:1px}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection,.markdown-body img::selection{color:rgba(189,134,0,.5);background-color:#fff}.markdown-body a::selection,.markdown-body b::selection,.markdown-body del::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:transparent}.markdown-body pre&gt;code::selection{background-color:rgba(189,134,0,.5)}.markdown-body .math .math-inline::selection,.markdown-body blockquote::selection,.markdown-body ol::selection,.markdown-body p::selection,.markdown-body strong::selection,.markdown-body table::selection,.markdown-body ul::selection{background-color:rgba(189,134,0,.5)}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸ§  ä¸€ã€å‰è¨€ï¼šå½“ç½‘ç»œåƒçŒ«ä¸€æ ·åå¤æ¨ªè·³</h2>
<p>åœ¨ç†æƒ³ä¸–ç•Œä¸­ï¼ŒWebAIGCï¼ˆWeb-based AI Generated Contentï¼‰ç³»ç»Ÿåº”å½“ <strong>ä¸èˆ¬é¡ºæ»‘</strong> â€”â€” æ— è®ºä½ è®©æ¨¡å‹ç”Ÿæˆé•¿ç¯‡å°è¯´è¿˜æ˜¯ä»£ç ç‰‡æ®µï¼Œå®ƒéƒ½åº”ç¨³å®šå¦‚å±±ã€‚<br/>
ç„¶è€Œç°å®æƒ…å†µå¾€å¾€æ˜¯ï¼š</p>
<blockquote>
<p>â€œç”¨æˆ·è¾“å…¥ promptï¼ŒAI åˆšæ‰“ç®—è¾“å‡ºçµé­‚ä¸€å‡»ï¼ŒWi-Fi é—ªäº†ä¸‹çº¢ç¯ã€‚â€</p>
</blockquote>
<p>äºæ˜¯ï¼Œ<strong>æ–­ç‚¹ç»­ä¼ </strong>ï¼ˆResume from breakpointï¼‰å’Œ <strong>å®¹é”™æœºåˆ¶</strong>ï¼ˆFault toleranceï¼‰å°±åƒç½‘ç»œä¸–ç•Œçš„æ•‘èµä¹‹å…‰ï¼Œæˆä¸º WebAIGC ç³»ç»Ÿçš„â€œç»­å‘½èŠ¯ç‰‡â€ã€‚</p>
<hr/>
<h2 data-id="heading-1">ğŸš€ äºŒã€æ–­ç‚¹ç»­ä¼ ï¼šä¸åšè¢«æ–­ç½‘æ‰“æ–­çš„æ¢¦æƒ³å®¶</h2>
<p>æ–­ç‚¹ç»­ä¼ çš„æœ¬è´¨å°±æ˜¯ï¼š<br/>
<strong>â€œä½ æŒ‚äº†æ²¡å…³ç³»ï¼Œå›æ¥æ¥ç€å¹²ã€‚â€</strong></p>
<h3 data-id="heading-2">ğŸ§© åº•å±‚åŸç†æµ…æ</h3>
<p>ç½‘ç»œä¼ è¾“çš„æ•°æ®å¹¶éä¸€æ¬¡æ¬å®¶ï¼Œè€Œæ˜¯ä¸€æ¬¡æ¬¡â€œæ‰“åŒ…å‘è´§â€â€”â€”æ•°æ®è¢«åˆ†ä¸ºå¤šä¸ª <em>æ•°æ®å—ï¼ˆchunksï¼‰</em> ã€‚<br/>
å½“æŸä¸ª chunk æ²¡é€è¾¾æ—¶ï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“ <strong>ç¡®åˆ‡æ–­åœ¨ç¬¬å‡ å—</strong>ï¼Œç„¶ååªé‡æ–°å‘é€é‚£ä¹‹åçš„éƒ¨åˆ†ï¼Œè€Œéé‡å¤´å†æ¥ã€‚</p>
<p>æ¢å¥è¯è¯´ï¼Œæ–­ç‚¹ç»­ä¼ çš„çµé­‚æ˜¯ä¸‰ä¸ªå­—ï¼š</p>
<blockquote>
<p><strong>è®°å¾—æˆ‘ï¼</strong></p>
</blockquote>
<h3 data-id="heading-3">ğŸ” æ ¸å¿ƒæ­¥éª¤ï¼ˆä¼ªæŠ€æœ¯ + çµé­‚æ¯”å–»ï¼‰</h3>
<ol>
<li><strong>åˆ‡ç‰‡ï¼ˆchunkingï¼‰</strong><br/>
å°±åƒæŠŠæ•´æœ¬å°è¯´åˆ†ç« èŠ‚å‘å‡ºå»ï¼Œåˆ«ä¸€é¡µé¡µç©ºè¿ã€‚</li>
<li><strong>æ ‡è®°ä½ç½®ï¼ˆcheckpointï¼‰</strong><br/>
æ¯ä¸ª chunk è®°å½•è‡ªå·±çš„â€œé¡µç â€ï¼Œä»¥ä¾›æ„å¤–æ¢å¤ã€‚</li>
<li><strong>çŠ¶æ€æŒä¹…åŒ–ï¼ˆpersistenceï¼‰</strong><br/>
å°±ç®—æµè§ˆå™¨çˆ†ç‚¸ã€JS å´©æºƒï¼Œé¡µç ä¹Ÿè¦å­˜åœ¨æœ¬åœ°å­˜å‚¨ï¼ˆæ¯”å¦‚ <code>localStorage</code>ï¼‰ã€‚</li>
<li><strong>ç»­ä¼ ï¼ˆresumeï¼‰</strong><br/>
ç½‘ç»œæ¢å¤åï¼Œä»…ç»­ä¼ æœªå®Œæˆéƒ¨åˆ†ã€‚<br/>
å°±åƒå’–å•¡æ´’äº†ä¸€åŠï¼Œè°è¿˜ä»ç¬¬ä¸€å£é‡æ–°å–ï¼Ÿ</li>
</ol>
<hr/>
<h3 data-id="heading-4">ğŸ§ª å®æˆ˜æ¼”ç¤ºï¼šJS æ–­ç‚¹ç»­ä¼ çš„æ ¸å¿ƒæ€æƒ³</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ¨¡æ‹Ÿ WebAIGC ä¸Šä¼ æˆ–æ•°æ®ç”Ÿæˆè¿‡ç¨‹ä¸­çš„æ–­ç‚¹ç»­ä¼ </span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">WebAIGCTransfer</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">file</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">file</span> = file;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">chunkSize</span> = <span class="hljs-number">1024</span> * <span class="hljs-number">512</span>; <span class="hljs-comment">// æ¯ç‰‡ 512KB</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">uploadedIndex</span> = <span class="hljs-title class_">Number</span>(<span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">'uploadedIndex'</span>)) || <span class="hljs-number">0</span>;
  }

  <span class="hljs-keyword">async</span> <span class="hljs-title function_">uploadChunk</span>(<span class="hljs-params">index</span>) {
    <span class="hljs-keyword">const</span> start = index * <span class="hljs-variable language_">this</span>.<span class="hljs-property">chunkSize</span>;
    <span class="hljs-keyword">const</span> end = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">file</span>.<span class="hljs-property">size</span>, start + <span class="hljs-variable language_">this</span>.<span class="hljs-property">chunkSize</span>);
    <span class="hljs-keyword">const</span> blob = <span class="hljs-variable language_">this</span>.<span class="hljs-property">file</span>.<span class="hljs-title function_">slice</span>(start, end);
    
    <span class="hljs-comment">// æ¨¡æ‹Ÿç½‘ç»œéšæœºå¤±è´¥</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() &lt; <span class="hljs-number">0.2</span>) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">"ğŸŒ©ï¸ ç½‘ç»œæŠ–åŠ¨"</span>);

    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`ğŸš€ ä¸Šä¼ ç¬¬ <span class="hljs-subst">${index + <span class="hljs-number">1</span>}</span> ç‰‡`</span>);
    <span class="hljs-comment">// è¿™é‡Œåº”æ˜¯ä¸Šä¼ é€»è¾‘ï¼Œå¦‚ fetch/post</span>
    <span class="hljs-keyword">await</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function"><span class="hljs-params">r</span> =&gt;</span> <span class="hljs-built_in">setTimeout</span>(r, <span class="hljs-number">200</span>)); <span class="hljs-comment">// æ¨¡æ‹Ÿå»¶è¿Ÿ</span>
    
    <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">'uploadedIndex'</span>, index + <span class="hljs-number">1</span>);
  }

  <span class="hljs-keyword">async</span> <span class="hljs-title function_">start</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">while</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">uploadedIndex</span> * <span class="hljs-variable language_">this</span>.<span class="hljs-property">chunkSize</span> &lt; <span class="hljs-variable language_">this</span>.<span class="hljs-property">file</span>.<span class="hljs-property">size</span>) {
      <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">uploadChunk</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">uploadedIndex</span>);
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">uploadedIndex</span>++;
      } <span class="hljs-keyword">catch</span> (err) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">`âš ï¸ ä¸Šä¼ å¤±è´¥ï¼š<span class="hljs-subst">${err.message}</span>ï¼Œå°†è‡ªåŠ¨é‡è¯•...`</span>);
        <span class="hljs-keyword">await</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function"><span class="hljs-params">r</span> =&gt;</span> <span class="hljs-built_in">setTimeout</span>(r, <span class="hljs-number">1000</span>));
      }
    }
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"âœ… ä¸Šä¼ å®Œæˆ"</span>);
    <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">removeItem</span>(<span class="hljs-string">'uploadedIndex'</span>);
  }
}
</code></pre>
<blockquote>
<p>ğŸ§¬ <strong>è§£è¯»ï¼š</strong><br/>
è¿™ä¸ª demo çš„çµé­‚æ˜¯ï¼š</p>
<ul>
<li><strong>â€œä¸Šä¼ è®°å½•æˆ‘â€</strong> â€”â€” æœ¬åœ°æŒä¹…åŒ–ä¸Šä¼ è¿›åº¦ï¼›</li>
<li><strong>â€œå¤±è´¥ä¸åŠ¨æ‘‡â€</strong> â€”â€” å³ä½¿æŠ–åŠ¨ï¼Œç­‰å¾…ã€é‡è¯•ã€ç»­èˆªã€‚</li>
</ul>
</blockquote>
<hr/>
<h2 data-id="heading-5">âš™ï¸ ä¸‰ã€å®¹é”™ï¼šä¼˜é›…åœ°é¢å¯¹æ··ä¹±</h2>
<p>å½“æ–­ç‚¹ç»­ä¼ æ˜¯â€œè®°å¿†åŠ›â€ï¼Œå®¹é”™æœºåˆ¶å°±æ˜¯â€œæŠ—æ‰“å‡»èƒ½åŠ›â€ã€‚</p>
<h3 data-id="heading-6">ğŸ’£ ç½‘ç»œçš„ä¸‰å¤§æ€æ‰‹</h3>
<ol>
<li>å»¶è¿Ÿï¼ˆLatencyï¼‰<br/>
â€”â€” è®©å“åº”æ…¢å¾—åƒ 56k æ‹¨å·ä¸Šä¸–çºªã€‚</li>
<li>ä¸¢åŒ…ï¼ˆPacket Lossï¼‰<br/>
â€”â€” æ®µè½ç¼ºé¡µï¼Œè¿˜å¾—çŒœå‰§æƒ…ã€‚</li>
<li>æ–­è¿ï¼ˆDisconnectionï¼‰<br/>
â€”â€” â€œAI æ­£åœ¨æ€è€ƒ...â€ ç„¶åå°±æ²¡äº†ã€‚</li>
</ol>
<h3 data-id="heading-7">ğŸ›¡ï¸ å®¹é”™çš„æ ¸å¿ƒå“²å­¦</h3>
<blockquote>
<p>â€œå¤±è´¥ä¸æ˜¯ bugï¼Œæ˜¯æ—¥å¸¸ã€‚â€</p>
</blockquote>
<p>ä¸ºæ­¤ï¼Œæˆ‘ä»¬æ„å»ºå¤šå±‚é˜²å¾¡ç»“æ„ï¼š</p>
<ul>
<li><strong>è¯·æ±‚è¶…æ—¶é‡è¯•</strong>ï¼šè¶…è¿‡ 3 ç§’å°±è‡ªåŠ¨å†æ¥ä¸€æ¬¡ã€‚</li>
<li><strong>å¤šå‰¯æœ¬ç¼“å­˜</strong>ï¼šå³ä½¿ä¸»é€šé“æŒ‚äº†ï¼Œä»ç¼“å­˜ä¹Ÿèƒ½æ¢å¤ã€‚</li>
<li><strong>ä»»åŠ¡æ—¥å¿—è®°å½•</strong>ï¼šä»»ä½•å¤±è´¥éƒ½å¯è¿½è¸ªï¼Œè€Œä¸æ˜¯â€œå‡­æ„Ÿè§‰ä¿®å¤â€ã€‚</li>
<li><strong>æŒ‡æ•°é€€é¿æœºåˆ¶</strong>ï¼šæ¯æ¬¡é‡è¯•çš„ç­‰å¾…æ—¶é—´æˆå€å¢é•¿ï¼Œé¿å…â€œç–¯æŠ¢çº¿â€ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-8">ğŸ’¡ JS å®¹é”™å®ç°ç¤ºä¾‹</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">robustFetch</span>(<span class="hljs-params">url, options = {}, retries = <span class="hljs-number">3</span>, delay = <span class="hljs-number">1000</span></span>) {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(url, options);
    <span class="hljs-keyword">if</span> (!response.<span class="hljs-property">ok</span>) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">"ğŸš« çŠ¶æ€å¼‚å¸¸ï¼š"</span> + response.<span class="hljs-property">status</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> response.<span class="hljs-title function_">json</span>();
  } <span class="hljs-keyword">catch</span> (err) {
    <span class="hljs-keyword">if</span> (retries &gt; <span class="hljs-number">0</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">`âš™ï¸ è¯·æ±‚å¤±è´¥ï¼š<span class="hljs-subst">${err.message}</span>ï¼Œ<span class="hljs-subst">${delay}</span>ms åé‡è¯•...`</span>);
      <span class="hljs-keyword">await</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function"><span class="hljs-params">r</span> =&gt;</span> <span class="hljs-built_in">setTimeout</span>(r, delay));
      <span class="hljs-keyword">return</span> <span class="hljs-title function_">robustFetch</span>(url, options, retries - <span class="hljs-number">1</span>, delay * <span class="hljs-number">2</span>); <span class="hljs-comment">// æŒ‡æ•°é€€é¿</span>
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"ğŸ’€ å¤šæ¬¡é‡è¯•å¤±è´¥ï¼Œç»ˆæ­¢ä»»åŠ¡ã€‚"</span>);
      <span class="hljs-keyword">throw</span> err;
    }
  }
}
</code></pre>
<blockquote>
<p>ğŸ§© å°ç»“ï¼šè¿™æ®µä»£ç èƒ½åœ¨ç½‘ç»œâ€œå¶å°”æŠ½é£â€æ—¶ä¿æŒä¼˜é›…ï¼Œç»ä¸ä¸€é”® panicã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-9">ğŸ§­ å››ã€WebAIGC çš„æ™ºèƒ½è‡ªæ„ˆ</h2>
<p>ä¸€ä¸ªçœŸæ­£æˆç†Ÿçš„ AI ç”Ÿæˆç³»ç»Ÿï¼Œä¼šæœ‰ç‚¹ç±»ä¼¼æ¤ç‰©ï¼š</p>
<p><em>èƒ½æ„ŸçŸ¥ä¼¤å®³ï¼Œèƒ½æ¢å¤è‡ªå·±ã€‚</em></p>
<p>æˆ‘ä»¬å¯ä»¥å¼•å…¥ <strong>å®æ—¶å¥åº·ç›‘æµ‹ï¼ˆhealth monitoringï¼‰</strong> æ¨¡å—ï¼Œæ¯”å¦‚ï¼š</p>
<ul>
<li>æ£€æµ‹æ•°æ®æµå»¶è¿Ÿæ³¢åŠ¨ï¼›</li>
<li>å½“æ¨¡å‹è¾“å‡ºå¼‚å¸¸ä¸­æ­¢æ—¶ï¼Œæ™ºèƒ½åœ°å›æ»šåˆ°æœ€è¿‘çš„æ–­ç‚¹ï¼›</li>
<li>å½“å¤šæ¬¡ä¸­æ–­æ—¶ï¼Œç³»ç»Ÿè‡ªæˆ‘è°ƒæ•´ chunk å¤§å°æˆ–å¹¶å‘ç­–ç•¥ã€‚</li>
</ul>
<blockquote>
<p>åœ¨ AI å±‚é¢ï¼Œè¿™å°±åƒæ¨¡å‹æ‡‚å¾—â€œç»§ç»­ä¸Šä¸€å¥è¯çš„è¯­å¢ƒâ€ï¼Œ<br/>
åœ¨å·¥ç¨‹å±‚é¢ï¼Œå°±æ˜¯æ‡‚å¾—â€œä»æ–­ç‚¹ç»§ç»­ç”Ÿæˆä½ çš„è‰ºæœ¯åˆ›æ„â€ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-10">ğŸ­ äº”ã€æ€»ç»“ï¼šå½“ç½‘ç»œåŠ¨è¡æ—¶ï¼Œç³»ç»Ÿè¯¥æ€æ ·ç¬‘ç€é‡æ¥ï¼Ÿ</h2>

























<table><thead><tr><th>åŠŸèƒ½ç‚¹</th><th>æ¯”å–»</th><th>æŠ€æœ¯æ ¸å¿ƒ</th></tr></thead><tbody><tr><td>æ–­ç‚¹ç»­ä¼ </td><td>ç¿»ä¹¦ä»æŠ˜è§’é¡µç»§ç»­çœ‹</td><td>Chunk + Checkpoint + Storage</td></tr><tr><td>å®¹é”™æœºåˆ¶</td><td>ä¸æ€•æ‘”çš„ä¿¡å·ä¾ </td><td>Retry + Timeout + Recovery</td></tr><tr><td>è‡ªæ„ˆç³»ç»Ÿ</td><td>ä¼šä¿®è‡ªå·±èº«çš„æœºå™¨</td><td>Monitor + Adapt + Rebalance</td></tr></tbody></table>
<blockquote>
<p>ğŸŒ± <strong>æŠ€æœ¯ä¹Ÿå¯ä»¥ä¼˜é›…</strong>ï¼š<br/>
å°±åƒè¯—äººä¸æ€•çº¸å¼ æ¹¿äº†ï¼Œå¼€å‘è€…ä¹Ÿä¸æ€•ç½‘ç»œæŠ–äº†ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åå¹´å¼€å‘å‘Šè¯‰ä½ ä»€ä¹ˆæ˜¯â€œçƒ‚ä»£ç â€]]></title>    <link>https://juejin.cn/post/7576867727719268387</link>    <guid>https://juejin.cn/post/7576867727719268387</guid>    <pubDate>2025-11-27T01:24:15.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576867727719268387" data-draft-id="7573592952243830836" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åå¹´å¼€å‘å‘Šè¯‰ä½ ä»€ä¹ˆæ˜¯â€œçƒ‚ä»£ç â€"/> <meta itemprop="keywords" content="æ¶æ„"/> <meta itemprop="datePublished" content="2025-11-27T01:24:15.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="RockByte"/> <meta itemprop="url" content="https://juejin.cn/user/1046390797768519"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åå¹´å¼€å‘å‘Šè¯‰ä½ ä»€ä¹ˆæ˜¯â€œçƒ‚ä»£ç â€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1046390797768519/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    RockByte
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-27T01:24:15.000Z" title="Thu Nov 27 2025 01:24:15 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{position:relative;word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;color:#282d36}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:30px;margin-bottom:5px;color:#2f845e}.markdown-body h2{font-size:22px;display:inline-block;font-weight:700;background:#2f845e;color:#fff;padding:6px 8px 0 0;border-top-right-radius:6px;margin-right:2px;box-shadow:6px 3px 0 0 rgba(47,132,194,.2)}.markdown-body h2:before{content:" ";display:inline-block;width:8px}.markdown-body h2:after{content:" ";position:absolute;display:block;width:calc(100% - 32px);border-bottom:3px solid #2f845e}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%;box-shadow:6px 6px 6px #888}.markdown-body hr{border:none;border-top:1px solid rgba(66,185,131,.15);margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#f6ffed;color:#52c41a;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:16px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#262626;border:1px solid #2f845e;border-top:8px solid #2f845e;background:linear-gradient(180deg,rgba(66,185,131,.1),transparent)!important}.markdown-body pre&gt;code.hljs[lang]:before{top:8px!important;color:#2f845e!important}.markdown-body pre&gt;code.language-awesome_error{border:1px solid #ff4d4f!important;border-left-width:8px;font-size:14px;font-weight:700;padding:15px 12px 15px 16px;margin:0;word-break:normal;white-space:break-spaces;display:block;overflow-x:auto;color:#ff4d4f!important;background:#fff2f0!important}.markdown-body pre&gt;code.language-awesome_error:before{content:"!"!important;position:absolute!important;top:50%!important;left:-9px!important;transform:translateY(-14px)!important;background:#ff4d4f!important;color:#fff!important;border:2px solid #fff!important;display:flex;align-items:center;justify-content:center;width:22px;height:22px;border-radius:100%;font-weight:700;font-family:Dosis,Source Sans Pro,Helvetica Neue,Arial,sans-serif;font-size:16px}.markdown-body pre&gt;code.language-awesome_warn{border:1px solid #ffc46f!important;border-left-width:8px;font-size:14px;font-weight:700;padding:15px 12px 15px 16px;margin:0;word-break:normal;white-space:break-spaces;display:block;overflow-x:auto;color:#ffc46f!important;background:#fffbe6!important}.markdown-body pre&gt;code.language-awesome_warn:before{content:"â˜‚"!important;position:absolute;top:50%!important;left:-9px!important;transform:translateY(-14px)!important;background:#ffc46f!important;color:#fff!important;border:2px solid #fff!important;display:flex;align-items:center;justify-content:center;width:22px;height:22px;border-radius:100%;font-weight:700;font-family:Dosis,Source Sans Pro,Helvetica Neue,Arial,sans-serif;font-size:16px}.markdown-body pre&gt;code.language-awesome_success{border:1px solid #52c41a!important;border-left-width:8px;font-size:14px;font-weight:700;padding:15px 12px 15px 16px;margin:0;word-break:normal;white-space:break-spaces;display:block;overflow-x:auto;color:#52c41a!important;background:#f6ffed!important}.markdown-body pre&gt;code.language-awesome_success:before{content:"âœ“"!important;position:absolute!important;top:50%!important;left:-9px!important;transform:translateY(-14px)!important;background:#52c41a!important;color:#fff!important;border:2px solid #fff!important;display:flex;align-items:center;justify-content:center;width:22px;height:22px;border-radius:100%;font-weight:700;font-family:Dosis,Source Sans Pro,Helvetica Neue,Arial,sans-serif;font-size:16px}.markdown-body pre&gt;code.language-awesome_info{border:1px solid #1890ff!important;border-left-width:8px;font-size:14px;font-weight:700;padding:15px 12px 15px 16px;margin:0;word-break:normal;white-space:break-spaces;display:block;overflow-x:auto;color:#1890ff!important;background:#e6f7ff!important}.markdown-body pre&gt;code.language-awesome_info:before{content:"i"!important;position:absolute!important;top:50%!important;left:-9px!important;transform:translateY(-14px)!important;background:#1890ff!important;color:#fff!important;border:2px solid #fff!important;display:flex;align-items:center;justify-content:center;width:22px;height:22px;border-radius:100%;font-weight:700;font-family:Dosis,Source Sans Pro,Helvetica Neue,Arial,sans-serif;font-size:16px}.markdown-body strong{background-color:inherit;color:#2f845e}.markdown-body em{background-color:inherit;color:#949415}.markdown-body a{text-decoration:none;color:#2f8e54;border-bottom:1px solid #3f9e64}.markdown-body a:active,.markdown-body a:hover{color:#3f9e64}.markdown-body a[class^=footnote]{margin-left:4px}.markdown-body a:before{content:"â¤ "}.markdown-body table{font-size:12px;width:100%;max-width:100%;overflow:auto;border:2px solid #2f8e54}.markdown-body thead{background:#2f8e54;color:#fff;text-align:left;font-weight:700}.markdown-body tr:nth-child(2n){background-color:rgba(153,255,188,.1)}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:22px}.markdown-body td{min-width:120px}.markdown-body blockquote{padding:1px 22px;margin:22px 0;border-left:6px solid #2f845e;background-color:rgba(66,185,131,.1);border-radius:2px}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#2f845e}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px;color:#282d36}.markdown-body del{color:#2f845e}.markdown-body input[type=checkbox]:checked:before{content:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA/klEQVQ4T72TMU7DQBBF318XdFR06egQEnAXRINEGlqgowoIR8AF4AZOZ4JEGq5AC5EixBU4A55BNrEVHAcSBTHlaubt37/zxZKlcn7n6mDPXJvz8IJ89HzWu8t7C8D2dfsY52ae4apHnLx0ktsCsHXZjiUuFgG40x2eJ/H/AhztB+zDUTpLwWj8jGkzxSHiHaMPrDQC8sMoilKzLAUqiKQjmb+ZuAdW80tmelCHODoNgSfP7AFprTTaRTzsJN1GEyuIZ7uW6TEEHwCtyV/6EVBKJHhfzgC0Xv/iXwEFBF4FG0378bd7sPQq5xK/hSnk6sdlX3mZrKkwLZKBeu8n9XuWEUE7X+YAAAAASUVORK5CYII=);position:relative;top:-1px;left:-1px}.markdown-body .math .katex{font-family:Menlo,Monaco,Consolas,Courier New,monospace;word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#f6ffed;color:#52c41a;font-size:.87em;padding:.065em .4em}@media (max-width:720px){.markdown-body h1{font-size:22px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="xcode">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#fff;color:#000}.xml .hljs-meta{color:silver}.hljs-comment,.hljs-quote{color:#007400}.hljs-attribute,.hljs-keyword,.hljs-literal,.hljs-name,.hljs-selector-tag,.hljs-tag{color:#aa0d91}.hljs-template-variable,.hljs-variable{color:#3f6e74}.hljs-code,.hljs-meta-string,.hljs-string{color:#c41a16}.hljs-link,.hljs-regexp{color:#0e0eff}.hljs-bullet,.hljs-number,.hljs-symbol,.hljs-title{color:#1c00cf}.hljs-meta,.hljs-section{color:#643820}.hljs-built_in,.hljs-builtin-name,.hljs-class .hljs-title,.hljs-params,.hljs-type{color:#5c2699}.hljs-attr{color:#836c28}.hljs-subst{color:#000}.hljs-formula{background-color:#eee;font-style:italic}.hljs-addition{background-color:#baeeba}.hljs-deletion{background-color:#ffc8bd}.hljs-selector-class,.hljs-selector-id{color:#9b703f}.hljs-doctag,.hljs-strong{font-weight:700}.hljs-emphasis{font-style:italic}</style><p>â€œçƒ‚ä»£ç â€è¿™ä¸ªè¯´æ³•åœ¨ä»£ç è¯„å®¡å’Œç½‘ç»œè®ºå›ä¸­ä¸€ç›´è¢«é¢‘ç¹æåŠã€‚ä½†å®ƒç©¶ç«Ÿæ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿè¿™æ˜¯ä¸€ä¸ªå…¸å‹çš„æ¨¡ç³Šæœ¯è¯­ä¾‹å­ï¼Œè¿™ç±»æœ¯è¯­å¶å°”åœ¨å¼€å‘è€…åœˆå­ä¸­æµä¼ ï¼Œå´æ²¡æœ‰å¤ªå¤šæ˜ç¡®çš„ç•Œå®šã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c25513346bc84abaacd2fa292eeb05d0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUm9ja0J5dGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764811454&amp;x-signature=D4J%2B8IiL49SI8DONd6cs363YHyg%3D" alt="1.png" loading="lazy"/></p>
<p><em>ç”šè‡³ç»å¸¸åªæ˜¯åœ¨è¯„è®ºåŒºè¯´å¯¹æ–¹çš„ä»£ç æ˜¯çƒ‚ä»£ç ï¼</em></p>
<p>æˆ‘ä»¬æ”¶é›†äº†å…³äºè¿™ä¸ªé—®é¢˜çš„å„ç§è§‚ç‚¹ã€è¡¡é‡æ ‡å‡†ä»¥åŠä»£ç é£é™©ï¼Œä½ å¯ä»¥å€ŸåŠ©è¿™äº›å†…å®¹æ¥æ¢è®¨å¯¹ä½ çš„å›¢é˜Ÿè€Œè¨€ï¼Œä»€ä¹ˆæ ·çš„ä»£ç è´¨é‡ç®—æ˜¯â€œçƒ‚â€çš„ï¼Œä»¥åŠå¦‚ä½•å»æ”¹è¿›ã€‚</p>
<h2 data-id="heading-0">ä»€ä¹ˆæ˜¯çƒ‚ä»£ç </h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/11d04c37fff74205af427b6a5132056e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUm9ja0J5dGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764811454&amp;x-signature=LU%2BuRGuR7wfTY%2BL7qwSi5UvDkmM%3D" alt="1.jpg" loading="lazy"/></p>
<p>â€œçƒ‚ä»£ç â€ æ˜¯ä¸€ä¸ªé€šç”¨æœ¯è¯­ï¼Œå¼€å‘äººå‘˜ã€é¡¹ç›®ç»ç†å’Œå…¶ä»–åˆ©ç›Šç›¸å…³è€…ç”¨å®ƒæ¥ç¬¼ç»Ÿåœ°æŒ‡ä»£ä¸€ç³»åˆ—ç¼–ç é—®é¢˜ â€”â€” Bugã€å¼‚å‘³ã€å®‰å…¨é—®é¢˜ç­‰ï¼Œè¿™äº›é—®é¢˜ä¼šå¯¼è‡´ä»£ç çš„å¯è¯»æ€§ã€å¯ç»´æŠ¤æ€§å’Œå¯æ‰©å±•æ€§è¾ƒå·®ã€‚å®ƒå¹¶éä»…ä»…æŒ‡é‚£äº›å­˜åœ¨é—®é¢˜æˆ–ä¸èƒ½æ­£å¸¸è¿è¡Œçš„ä»£ç åº“ã€‚</p>
<p>åœ¨ä¸åŒæƒ…å†µä¸‹ï¼Œçƒ‚ä»£ç æ¶µç›–äº†ä»»ä½•æœªé’ˆå¯¹æ€§èƒ½å’Œç»´æŠ¤è¿›è¡Œä¼˜åŒ–çš„ä»£ç ï¼Œä»ä»¤äººå›°æƒ‘çš„å˜é‡ååˆ°å ç”¨è¿‡å¤šå†…å­˜è¿›è¡Œå¾ªç¯æ“ä½œçš„å‡½æ•°éƒ½åŒ…æ‹¬åœ¨å†…ã€‚</p>
<p>å¦‚æœä½ çš„ä»£ç å­˜åœ¨ä»¥ä¸‹æƒ…å†µï¼Œå°±å¯èƒ½è¢«æè¿°ä¸ºçƒ‚ä»£ç ï¼š</p>
<ul>
<li>åœ¨ä»£ç å®¡æŸ¥æœŸé—´ä»–äººéš¾ä»¥ç†è§£ã€‚</li>
<li>éšç€æ—¶é—´æ¨ç§»éš¾ä»¥ç»´æŠ¤æˆ–æ‰©å±•ã€‚</li>
<li>ç¼–å†™æ—¶æ²¡æœ‰æ­£ç¡®çš„æ ·å¼å’Œæ ¼å¼ã€‚</li>
<li>æ²¡æœ‰è¯¦ç»†çš„æ³¨é‡Šè¯´æ˜ã€‚</li>
<li>å®¹æ˜“å‡ºç°æ¼æ´å’Œæ•…éšœã€‚</li>
<li>å­˜åœ¨å®‰å…¨éšæ‚£ï¼Œæ˜“é­å—æ”»å‡»ã€‚</li>
</ul>
<p>æˆ‘ä»¬å°†æ›´æ·±å…¥åœ°æ¢è®¨ä¸Šè¿°æ¯ä¸€ç‚¹ï¼Œä½†å¿…é¡»æ‰¿è®¤ï¼Œæ²¡æœ‰å“ªä¸ªä»£ç åº“æ˜¯å®Œç¾æ— ç¼ºçš„ã€‚æœ‰äº›æ—¶å€™ï¼Œè®¸å¯è¯çš„å…¼å®¹æ€§é—®é¢˜è¦ä¼˜å…ˆäºæ ·å¼æ›´æ”¹ï¼Œæˆ–è€…å®‰å…¨æ¼æ´æ¯”å…¶ä»–é—®é¢˜æ›´ä¸ºé‡è¦ã€‚çƒ‚ä»£ç çš„å®šä¹‰æ˜¯å› æƒ…å†µè€Œå¼‚çš„ï¼Œä¼šéšç€ç¯å¢ƒå˜åŒ–è€Œå˜åŒ–ã€‚å°½ç®¡å¦‚æ­¤ï¼Œè¿˜æ˜¯æœ‰ä¸€äº›å¸¸è§è­¦ç¤ºä¿¡å·è¡¨æ˜ä»£ç è´¨é‡æ¬ ä½³ã€‚</p>
<p>ä¸‹é¢è®©æˆ‘ä»¬æ¥çœ‹çœ‹å…¶ä¸­æ¯”è¾ƒé‡è¦çš„ä¸€äº›ï¼š</p>
<h3 data-id="heading-1">éš¾ä»¥ç†è§£</h3>
<pre><code class="hljs language-Kotlin" lang="Kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">magicMethod</span><span class="hljs-params">(x: <span class="hljs-type">Int</span>, y: <span class="hljs-type">String</span>, z: <span class="hljs-type">Boolean</span>)</span></span> = <span class="hljs-keyword">when</span> {
    x &gt; <span class="hljs-number">10</span> &amp;&amp; y.contains(<span class="hljs-string">"test"</span>) -&gt; <span class="hljs-keyword">if</span> (z) <span class="hljs-string">"A"</span> <span class="hljs-keyword">else</span> <span class="hljs-string">"B"</span>
    x &lt; <span class="hljs-number">0</span> || y.isEmpty() -&gt; <span class="hljs-string">"C"</span>
    <span class="hljs-keyword">else</span> -&gt; { globalCounter += x; <span class="hljs-string">"D"</span> }
}
</code></pre>
<p><em>è¿™æ®µä»£ç æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ</em></p>
<p>æ— è®ºæ˜¯åŒäº‹å¯¹ä½ çš„ä»£ç è¿›è¡Œå®¡æ ¸ï¼Œè¿˜æ˜¯è¦å¯¹ä»£ç è¿›è¡Œä¿®æ”¹ï¼Œä»–ä»¬éƒ½å¿…é¡»æ¸…æ¥šä»£ç ä¸­æ¯ä¸ªéƒ¨åˆ†çš„å«ä¹‰ã€‚åƒä½¿ç”¨ <code>x1</code>ã€<code>yz</code> æˆ– <code>data</code> è¿™ç±»å˜é‡åï¼Œä¼šè®©ä½ çš„ä»£ç åº“éš¾ä»¥è§£è¯»ã€‚åŒæ ·ï¼Œä¸€ä¸ªåä¸º <code>xyzService</code> çš„æ–‡ä»¶ï¼Œå¦‚æœæ··ç”¨äº†å¤šç§ç¼©è¿›é£æ ¼ï¼Œä¸”æ‰€æœ‰åŠŸèƒ½éƒ½å†™åœ¨ä¸€ä¸ªåä¸º <code>doStuff</code>ã€é•¿è¾¾ <strong>500</strong> è¡Œçš„å‡½æ•°é‡Œï¼Œè¿™æ ·çš„ä»£ç æ—¢éš¾ä»¥é˜…è¯»ï¼Œä¹Ÿä¸ä¾¿å¤„ç†ã€‚</p>
<h3 data-id="heading-2">éš¾ä»¥ç»´æŠ¤</h3>
<pre><code class="hljs language-Kotlin" lang="Kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">DataHandler</span> {
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">process</span><span class="hljs-params">(userId: <span class="hljs-type">String</span>, callback: (<span class="hljs-type">String</span>) -&gt; <span class="hljs-type">Unit</span>)</span></span> {
        <span class="hljs-comment">// ç½‘ç»œè¯·æ±‚ + æ•°æ®åº“ + æ ¼å¼åŒ–æ··åˆ</span>
        <span class="hljs-keyword">val</span> request = Request.Builder().url(<span class="hljs-string">"https://api.com/user/<span class="hljs-variable">$userId</span>"</span>).build()
        httpClient.newCall(request).enqueue(<span class="hljs-keyword">object</span> : Callback {
            <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onResponse</span><span class="hljs-params">(call: <span class="hljs-type">Call</span>, response: <span class="hljs-type">Response</span>)</span></span> {
                <span class="hljs-keyword">val</span> <span class="hljs-keyword">data</span> = response.body?.string() ?: <span class="hljs-string">""</span>
                <span class="hljs-comment">// æ•°æ®æ ¼å¼åŒ–é€»è¾‘</span>
                <span class="hljs-keyword">val</span> formatted = <span class="hljs-keyword">data</span>.replace(<span class="hljs-string">"\n"</span>, <span class="hljs-string">"\\n"</span>).let { 
                    <span class="hljs-comment">// ...å¤æ‚çš„JSONå¤„ç†å’Œä¸šåŠ¡é€»è¾‘</span>
                }
                <span class="hljs-comment">// ç›´æ¥æ“ä½œæ•°æ®åº“</span>
                db.insertData(mapOf(<span class="hljs-string">"user"</span> to userId, <span class="hljs-string">"data"</span> to formatted))
                <span class="hljs-comment">// ...è¿”å›æ ¼å¼åŒ–ç»“æœ</span>
                callback(formatForDisplay(formatted, userId))
            }
            <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onFailure</span><span class="hljs-params">(call: <span class="hljs-type">Call</span>, e: <span class="hljs-type">IOException</span>)</span></span> {
                <span class="hljs-comment">// ...é”™è¯¯å¤„ç†å’Œæ•°æ®åº“è®°å½•</span>
                db.insertError(mapOf(<span class="hljs-string">"error"</span> to e.message, <span class="hljs-string">"user"</span> to userId))
                callback(<span class="hljs-string">"Error: <span class="hljs-subst">${e.message}</span>"</span>)
            }
        })
    }
}
</code></pre>
<p><em>æƒ³è±¡ä¸€ä¸‹å¦‚æœè®©ä½ åœ¨è¿™äº›ä»£ç ä¸­æ›´æ”¹bugï¼</em></p>
<p>å½“ä»£ç éš¾ä»¥ç†è§£æ—¶ï¼Œç»´æŠ¤èµ·æ¥ä¹Ÿä¼šå›°éš¾é‡é‡ã€‚ä¾‹å¦‚ï¼Œè‹¥æœ‰ä¸€ä¸ªå‡½æ•°æ—¢è¦å¤„ç†ç½‘ç»œè¯·æ±‚ï¼Œåˆè¦è´Ÿè´£æ•°æ®åº“é€»è¾‘ä»¥åŠæ•°æ®æ ¼å¼åŒ–ï¼Œé‚£ä¹ˆå¯¹ä»£ç è¿›è¡Œä»»ä½•ç»†å¾®æ”¹åŠ¨éƒ½å¯èƒ½å¯¼è‡´å…¶æ— æ³•æ­£å¸¸è¿è¡Œã€‚æ­¤å¤–ï¼Œç”±äºåŸå§‹å·¥ä½œä¸­å·å·¥å‡æ–™ï¼Œå½“éœ€è¦å¯¹ä»£ç è¿›è¡Œé‡æ„æ—¶ï¼Œç¼–å†™è´¨é‡æ¬ ä½³çš„é—ç•™ä»£ç åº“ä¼šå¯¼è‡´é«˜æ˜‚çš„æŠ€æœ¯å€ºã€‚</p>
<h3 data-id="heading-3">éš¾ä»¥æ‰©å±•</h3>
<pre><code class="hljs language-Kotlin" lang="Kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">DataProcessor</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> cache = arrayOfNulls&lt;String&gt;(<span class="hljs-number">100</span>) <span class="hljs-comment">// å›ºå®šå¤§å°</span>
    
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">process</span><span class="hljs-params">(<span class="hljs-keyword">data</span>: <span class="hljs-type">String</span>)</span></span>: String {
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">data</span>.length &gt; <span class="hljs-number">50</span>) <span class="hljs-keyword">return</span> <span class="hljs-keyword">data</span>.substring(<span class="hljs-number">0</span>, <span class="hljs-number">50</span>)
        <span class="hljs-keyword">for</span> (i <span class="hljs-keyword">in</span> <span class="hljs-number">0.</span><span class="hljs-number">.3</span>) { <span class="hljs-comment">// å›ºå®š4ä¸ªçº¿ç¨‹</span>
            <span class="hljs-comment">// ...å¤„ç†é€»è¾‘</span>
        }
        <span class="hljs-comment">// ç¡¬ç¼–ç æ•°æ®åº“åœ°å€</span>
        <span class="hljs-keyword">val</span> connection = DriverManager.getConnection(<span class="hljs-string">"jdbc:sqlite:fixed.db"</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-string">"processed: <span class="hljs-variable">$data</span>"</span>
    }
    
    <span class="hljs-keyword">companion</span> <span class="hljs-keyword">object</span> {
        <span class="hljs-keyword">const</span> <span class="hljs-keyword">val</span> MAX_SIZE = <span class="hljs-number">100</span>
        <span class="hljs-keyword">const</span> <span class="hljs-keyword">val</span> THREAD_COUNT = <span class="hljs-number">4</span>
    }
}
</code></pre>
<p><em>ä¸€æ—¦æœ‰æ–°çš„å˜åŒ–ï¼Œä¸Šé¢è¿™æ®µä»£ç å¾ˆéš¾æ‰©å±•ï¼</em></p>
<p>ä¼˜è´¨çš„ä»£ç åº”å…·å¤‡é€‚åº”æ€§ï¼Œèƒ½å¤Ÿåœ¨åŠŸèƒ½ä¸Šå®ç°æ‰©å±•ï¼Œåœ¨ä¸å½±å“æ€§èƒ½çš„å‰æä¸‹å¤„ç†æ›´å¤šæµé‡æˆ–æ•°æ®ã€‚éš¾ä»¥æ‰©å±•çš„ä»£ç å¯èƒ½æ˜¯çƒ‚ä»£ç ï¼Œå› ä¸ºéšç€æ—¶é—´æ¨ç§»ï¼Œå®ƒä¼šå¼•å‘æ€§èƒ½é—®é¢˜ï¼Œè¿˜å¯èƒ½å¯¼è‡´ç»´æŠ¤æµç¨‹å˜é•¿ã€‚</p>
<h3 data-id="heading-4">ä¸å®‰å…¨</h3>
<pre><code class="hljs language-Kotlin" lang="Kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">login</span><span class="hljs-params">(username: <span class="hljs-type">String</span>, password: <span class="hljs-type">String</span>)</span></span> {
    <span class="hljs-comment">// ç›´æ¥æ‹¼æ¥SQLï¼Œæ˜“å—æ³¨å…¥æ”»å‡»</span>
    <span class="hljs-keyword">val</span> query = <span class="hljs-string">"SELECT * FROM users WHERE name='<span class="hljs-variable">$username</span>' AND pass='<span class="hljs-variable">$password</span>'"</span>
    <span class="hljs-keyword">val</span> result = db.rawQuery(query, <span class="hljs-literal">null</span>)
    
    <span class="hljs-comment">// å¯†ç æ˜æ–‡å­˜å‚¨</span>
    <span class="hljs-keyword">if</span> (result.count &gt; <span class="hljs-number">0</span>) {
        savePassword(username, password) <span class="hljs-comment">// å±é™©ï¼</span>
    }
    
    <span class="hljs-comment">// æœªéªŒè¯è¾“å…¥</span>
    <span class="hljs-keyword">val</span> file = File(<span class="hljs-string">"/data/<span class="hljs-variable">$username</span>"</span>) <span class="hljs-comment">// è·¯å¾„ç©¿è¶Šæ¼æ´</span>
    file.writeText(password)
}
</code></pre>
<p>ä»£ç ä¸­ä¸€äº›ç®€å•çš„é”™è¯¯å’Œé—®é¢˜å¯èƒ½ä¼šå¯¼è‡´å­˜åœ¨æ¼æ´ï¼Œè¿›è€Œå¼•å‘å®‰å…¨éšæ‚£ã€‚ä»£ç ä¸å®‰å…¨çš„åŸå› å¯èƒ½å¤šç§å¤šæ ·ï¼Œä¾‹å¦‚å°†ç”¨æˆ·è¾“å…¥ç›´æ¥æ’å…¥ <strong>SQL</strong> æŸ¥è¯¢è¯­å¥ä¸­ï¼Œå´æ²¡æœ‰è¿›è¡Œæ•°æ®å‡€åŒ–å¤„ç†ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ¶æ„ç”¨æˆ·é€šè¿‡ç®€å•çš„è¾“å…¥æ“ä½œå°±å¯èƒ½è·å–æ‰€æœ‰ç”¨æˆ·æ•°æ®ã€‚</p>
<p>å®é™…é¡¹ç›®ä¸­ï¼Œé™¤äº†é‡è§†ä»£ç è´¨é‡ä¹‹å¤–ï¼Œæˆ‘ä»¬ä¹Ÿåº”è¯¥å…³æ³¨å®‰å…¨é—®é¢˜ï¼Œå› ä¸ºä¸å®‰å…¨çš„ä»£ç å°±æ˜¯çƒ‚ä»£ç ï¼Œå°¤å…¶æ˜¯åœ¨äººå·¥æ™ºèƒ½è“¬å‹ƒå‘å±•çš„å½“ä¸‹ã€‚</p>
<h3 data-id="heading-5">å®¹æ˜“å‡ºé”™</h3>
<pre><code class="hljs language-Kotlin" lang="Kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">removeInvalidItems</span><span class="hljs-params">(items: <span class="hljs-type">MutableList</span>&lt;<span class="hljs-type">String</span>&gt;)</span></span>: List&lt;String&gt; {
    <span class="hljs-keyword">for</span> (i <span class="hljs-keyword">in</span> items.indices) {
        <span class="hljs-keyword">if</span> (items[i].isEmpty()) {
            items.removeAt(i) <span class="hljs-comment">// åˆ é™¤å…ƒç´ åç´¢å¼•å¤±æ•ˆ</span>
        }
    }
    
    <span class="hljs-comment">// æˆ–è€…ä½¿ç”¨è¿­ä»£å™¨åˆ é™¤</span>
    items.iterator().forEach { item -&gt;
        <span class="hljs-keyword">if</span> (item.length &lt; <span class="hljs-number">3</span>) {
            items.remove(item) <span class="hljs-comment">// è¿­ä»£è¿‡ç¨‹ä¸­ä¿®æ”¹é›†åˆ</span>
        }
    }
    
    <span class="hljs-keyword">return</span> items
}
</code></pre>
<p><em>å¤šæ•° Java/Kotlin å¼€å‘è€…ä¸€å®šç¢°åˆ°è¿‡åœ¨å¾ªç¯ä¸­åˆ é™¤å…ƒç´ çš„é—®é¢˜ã€‚</em></p>
<p>å¦‚æœä½ çš„ä»£ç æ²¡æœ‰è€ƒè™‘åˆ°æ½œåœ¨é—®é¢˜ï¼Œé‚£å®ƒå¯èƒ½å°±æ˜¯çƒ‚ä»£ç ã€‚ä»»ä½•æ²¡æœ‰è€ƒè™‘åˆ°æ— æ•ˆç”¨æˆ·è¾“å…¥ã€å¾ªç¯ã€æ•°ç»„æˆ–å…¶ä»–å¯èƒ½é—®é¢˜çš„ä»£ç åº“ï¼Œåœ¨ä¸å¯é¿å…åœ°å‡ºç°æ•…éšœæ—¶éƒ½å¯èƒ½å¼•å‘é—®é¢˜ï¼Œå°¤å…¶æ˜¯å½“é—®é¢˜åœ¨ â€œæ½œä¼â€ ä¸€æ®µæ—¶é—´åæ‰å‡ºç°çš„æ—¶å€™ã€‚</p>
<h3 data-id="heading-6">æ•ˆç‡ä¸é«˜</h3>
<pre><code class="hljs language-Kotlin" lang="Kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">findDuplicates</span><span class="hljs-params">(list: <span class="hljs-type">List</span>&lt;<span class="hljs-type">Int</span>&gt;)</span></span>: List&lt;<span class="hljs-built_in">Int</span>&gt; {
    <span class="hljs-keyword">val</span> result = mutableListOf&lt;<span class="hljs-built_in">Int</span>&gt;()
    <span class="hljs-keyword">for</span> (i <span class="hljs-keyword">in</span> list.indices) {
        <span class="hljs-keyword">for</span> (j <span class="hljs-keyword">in</span> list.indices) { <span class="hljs-comment">// O(nÂ²) å¤æ‚åº¦</span>
            <span class="hljs-keyword">if</span> (i != j &amp;&amp; list[i] == list[j] &amp;&amp; !result.contains(list[i])) {
                result.add(list[i])
            }
        }
    }
    <span class="hljs-keyword">return</span> result
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">inefficientSort</span><span class="hljs-params">(list: <span class="hljs-type">List</span>&lt;<span class="hljs-type">Int</span>&gt;)</span></span>: List&lt;<span class="hljs-built_in">Int</span>&gt; {
    <span class="hljs-keyword">return</span> list.sorted().reversed().sorted() <span class="hljs-comment">// å¤šä½™çš„æ’åºæ“ä½œ</span>
}
</code></pre>
<p><em>å¯¹äº†ï¼Œå¦‚æœä½ å¯¹é›†åˆçš„å¤„ç†ç‰¹åˆ«å¤šï¼Œå¯ä»¥çœ‹çœ‹<a href="https://juejin.cn/post/7573504290067349519" target="_blank" title="https://juejin.cn/post/7573504290067349519">è¿™é‡Œ</a>ã€‚</em></p>
<p>æ€§èƒ½é—®é¢˜ä¼šå¯¼è‡´ä»£ç è´¨é‡ä¸ä½³ï¼Œæ¯”å¦‚åœ¨ <code>for</code> å¾ªç¯ä¸­ï¼Œå¯¹å…¶ä¸­çš„æ¯ä¸€é¡¹éƒ½è¿›è¡Œæ•°æ®åº“è°ƒç”¨ã€‚è¿™å¯èƒ½ä¼šå¢åŠ é¡µé¢åŠ è½½æ‰€éœ€çš„æ—¶é—´ï¼Œç”šè‡³å¯¼è‡´è¶…æ—¶ã€‚</p>
<p>åç››é¡¿å¤§å­¦çš„<a href="https://link.juejin.cn?target=https%3A%2F%2Fdl.acm.org%2Fdoi%2F10.1145%2F3132847.3132954" target="_blank" title="https://dl.acm.org/doi/10.1145/3132847.3132954" ref="nofollow noopener noreferrer">ä¸€é¡¹ç ”ç©¶</a>å±•ç¤ºäº†ä½æ•ˆæ•°æ®åº“æŸ¥è¯¢çš„å½±å“ã€‚è¯¥ç ”ç©¶å‘ç°ï¼Œä¿®å¤è¿™ç±»é—®é¢˜å¯ä½¿ç½‘é¡µå“åº”æ—¶é—´ç¼©çŸ­ <strong>98%</strong>ã€‚</p>
<h3 data-id="heading-7">ä¸éµå®ˆå›¢é˜Ÿçº¦å®š</h3>
<pre><code class="hljs language-Kotlin" lang="Kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">processData</span><span class="hljs-params">(input:<span class="hljs-type">String</span>)</span></span>{
<span class="hljs-keyword">var</span> result= mutableListOf&lt;String&gt;()
        <span class="hljs-keyword">for</span>(item <span class="hljs-keyword">in</span> input.split(<span class="hljs-string">","</span>)){
<span class="hljs-keyword">if</span>(item.isNotEmpty()){
result.add(item.trim())
                }
        }
<span class="hljs-keyword">val</span> output= result.joinToString(<span class="hljs-string">","</span>)<span class="hljs-comment">//å˜é‡å‘½åä¸ä¸€è‡´</span>
<span class="hljs-keyword">return</span> output
}<span class="hljs-comment">// ç¼©è¿›æ··ä¹±ï¼Œè¡Œé•¿åº¦è¶…é™ï¼Œç¼ºå°‘ç©ºè¡Œåˆ†éš”</span>
</code></pre>
<p><em>ä½ å¯èƒ½ä¼šè¯´ç°åœ¨çš„ä»£ç æ ¼å¼åŒ–ä¸å¯èƒ½å‡ºç°è¿™ç§é—®é¢˜ï¼Œæˆ‘ä¸¾å¾—ä¾‹å­ç¡®å®æ˜¯ä¸ªæç«¯ï¼Œä½†æ˜¯ä½ ä¸€å®šç¢°åˆ°è¿‡ä¸åŒå¼€å‘è€…ä¸åŒçš„æ ¼å¼åŒ–é£æ ¼çš„ä»£ç ï¼</em></p>
<p>å½“ä»£ç ä¸éµå¾ªå…¬è®¤çš„å·¥ä½œæµç¨‹å’Œé£æ ¼è§„èŒƒæ—¶ï¼Œå³ä½¿ä»£ç èƒ½å¤Ÿè¿è¡Œï¼Œä¹Ÿä¼šè¿«ä½¿ä½ çš„å›¢é˜Ÿæˆå‘˜æ”¾æ…¢é€Ÿåº¦ï¼Œæ¢³ç†å·®å¼‚å¹¶çŒœæµ‹ä»£ç æ„å›¾ã€‚è¿™å¯èƒ½ä¼šå¯¼è‡´å¤§é‡çš„æŠ€æœ¯å€ºåŠ¡ã€‚ä¾‹å¦‚ï¼Œé€‰æ‹©ä½¿ç”¨æ°´å¹³ç¼©è¿›è¿˜æ˜¯å‚ç›´ç¼©è¿›ã€è®¾å®šä»£ç è¡Œçš„é•¿åº¦ã€æˆ–æ˜¯å°½æ—©ç¡®å®šä½¿ç”¨å˜é‡çš„æ–¹æ³•ã€‚</p>
<h2 data-id="heading-8">ä»å®è·µä¸­å®šä¹‰çƒ‚ä»£ç </h2>
<p>å®šä¹‰çƒ‚ä»£ç å’Œå¥½ä»£ç ï¼Œæœ‰åŠ©äºæé«˜è¾“å‡ºçš„è´¨é‡å’Œæ•ˆç‡ã€‚å®ƒç¡®ä¿ä»£ç ç¬¦åˆé¢„æœŸç”¨é€”ï¼Œæœ‰åŠ©äºå›¢é˜Ÿæ›´è½»æ¾åœ°åä½œï¼Œå‡å°‘æŠ€æœ¯å€ºåŠ¡ï¼Œå¹¶æ¨åŠ¨å¼€å‘å‡ºä»¥æ€§èƒ½ä¸ºå¯¼å‘ã€å…¼é¡¾é•¿æœŸä½¿ç”¨å’Œå¯æ‰©å±•æ€§çš„ä»£ç ã€‚</p>
<p>å¯¹äºå‚ä¸é¡¹ç›®çš„æ¯ä¸ªäººæ¥è¯´ï¼Œäº†è§£åœ¨ç‰¹å®šæƒ…å†µä¸‹çƒ‚ä»£ç çš„æ ·å­è‡³å…³é‡è¦ã€‚åœ¨ä¸€ä¸ªé¡¹ç›®ä¸­è¢«è§†ä¸ºçƒ‚ä»£ç çš„æƒ…å†µï¼Œåœ¨å¦ä¸€ä¸ªé¡¹ç›®ä¸­å¯èƒ½è¢«è®¤ä¸ºæ˜¯å¯ä»¥æ¥å—çš„ã€‚èƒ½å¤ŸåŒºåˆ†ä¸¤è€…å¯ä»¥ä½¿é¢„æœŸæ›´åŠ æ¸…æ™°ï¼Œè®©å¼€å‘äººå‘˜æ›´å¥½åœ°ç†è§£ä»€ä¹ˆæ˜¯çƒ‚ä»£ç ã€‚</p>
<p>ä¸ºçƒ‚ä»£ç ä¸‹å®šä¹‰ï¼Œè¿˜æœ‰åŠ©äºå¼€å‘äººå‘˜åœ¨éœ€è¦æé«˜æ•æ·æ€§æ—¶ï¼Œæ˜ç™½åº”è¯¥é¿å…å“ªäº›æƒ…å†µã€‚ä¾‹å¦‚ï¼Œå½“éœ€è¦è€ƒè™‘æ—¶é—´é™åˆ¶æ—¶ï¼Œä»–ä»¬åº”è¯¥æ˜ç¡®é¿å¼€å“ªäº›æ“ä½œä»¥ä¿æŒè¾ƒé«˜çš„ä»£ç è´¨é‡ï¼Ÿ</p>
<h2 data-id="heading-9">çƒ‚ä»£ç çš„å½±å“</h2>
<p>æˆ‘ä»¬ç¨å¾®è°ˆåˆ°äº†çƒ‚ä»£ç æ˜¯å¦‚ä½•å½±å“ä½ æ‰©å±•äº§å“ã€ç»´æŠ¤ä»£ç åº“ä»¥åŠè®©å›¢é˜Ÿæ­£å¸¸å·¥ä½œçš„èƒ½åŠ›ã€‚ä½†ç°åœ¨è®©æˆ‘ä»¬æ›´è¯¦ç»†åœ°æ¢è®¨ä¸€ä¸‹çƒ‚ä»£ç ä¼šå¯¹ä½ çš„ä¸šåŠ¡äº§ç”Ÿå“ªäº›é‡å¤§å½±å“ï¼š</p>
<ul>
<li>
<p><strong>é™ä½å¯æ‰©å±•æ€§</strong>ï¼šåœ¨æµ‹è¯•æœŸé—´çœ‹ä¼¼æ²¡é—®é¢˜çš„æœªä¼˜åŒ–å¾ªç¯æˆ–é˜»å¡è°ƒç”¨ï¼Œå½“ç”¨æˆ·æµé‡å¢åŠ æ—¶å¯èƒ½ä¼šå¯¼è‡´ç³»ç»Ÿå´©æºƒã€‚åœ¨äº§å“ä¸Šçº¿å‰è¿˜èƒ½æ­£å¸¸è¿è¡Œçš„ä»£ç ï¼Œæ°æ°åœ¨ä½ æœ€éœ€è¦å®ƒçš„æ—¶å€™çªç„¶å‡ºé—®é¢˜äº†ã€‚</p>
</li>
<li>
<p><strong>æŠ€æœ¯å€º</strong>ï¼šçƒ‚ä»£ç ä¼šä½¿å¾—ä¿®å¤é—®é¢˜æˆ–å¯¹ä»£ç åº“è¿›è¡Œæœªæ¥æ›´æ”¹å˜å¾—å›°éš¾ä¸”æˆæœ¬æ›´é«˜ã€‚2022 å¹´å¼€å±•çš„ä¸€é¡¹ç ”ç©¶å‘ç°ï¼Œä¿®å¤æŠ€æœ¯å€ºé—®é¢˜æ¶ˆè€—çš„æ—¶é—´å¤šè¾¾å¼€å‘æ€»æ—¶é—´çš„ <strong>25%</strong>ã€‚</p>
</li>
<li>
<p><strong>æŸå®³ç”Ÿäº§åŠ›</strong>ï¼šçƒ‚ä»£ç ä¼šæµªè´¹å®è´µçš„æ—¶é—´ï¼Œå½±å“ç”Ÿäº§åŠ›ã€‚è¿™ä½“ç°åœ¨å®ƒä¼šå¯¼è‡´å¼€å‘äººå‘˜èŠ±è´¹æ›´å¤šæ—¶é—´å»è§£è¯»ä»£ç ï¼Œæˆ–è€…åœ¨æ›´æ–°å’Œç»´æŠ¤é‚£äº›å¤æ‚ä»£ç æ—¶è€—è´¹æ›´å¤šæ—¶é—´ã€‚æ­¤å¤–ï¼Œç”±äºä»£ç å¤æ‚æ€§å¢åŠ ï¼Œè´¨é‡ä¿è¯å‘¨æœŸå¯èƒ½ä¼šå˜é•¿ï¼Œä»é•¿è¿œæ¥çœ‹ï¼Œä¿®å¤ä»£ç é—®é¢˜ä¹Ÿä¼šå˜å¾—æ›´åŠ å¤æ‚ã€è€—æ—¶ã€‚</p>
</li>
<li>
<p><strong>æŸå®³ç”¨æˆ·ä¿¡ä»»</strong>ï¼šçƒ‚ä»£ç ä¼šç›´æ¥å½±å“ç”¨æˆ·ä½“éªŒã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªå¯¼è‡´ä¸ªäººæ•°æ®æ³„éœ²æˆ–åœ¨ç»“è´¦æ—¶å¯¼è‡´ç¨‹åºå´©æºƒçš„æ¼æ´ï¼Œå¯èƒ½ä¼šè®©ä½ æ•°æœˆæ¥è·å–å®¢æˆ·çš„åŠªåŠ›ä»˜è¯¸ä¸œæµã€‚ç”¨æˆ·å¯¹ç³Ÿç³•ç»å†çš„è®°å¿†è¿œæ¯”ç¾å¥½ç»å†æ·±åˆ»å¾—å¤šã€‚</p>
</li>
<li>
<p><strong>äººæ‰æµå¤±</strong>ï¼šç•™ä½ä¼˜ç§€çš„å¼€å‘äººæ‰ä¹Ÿä¸ä»£ç åº“çš„è´¨é‡ç›´æ¥ç›¸å…³ã€‚é¡¶å°–çš„å·¥ç¨‹å¸ˆä¸æ„¿æ„å¤„ç†æ»¡æ˜¯é—®é¢˜çš„ä»£ç åº“ï¼Œå› ä¸ºåœ¨è¿™æ ·çš„ä»£ç åº“ä¸­ï¼Œæ‰“å¼€æ¯ä¸ªæ–‡ä»¶éƒ½å¯èƒ½ä¼šå‘ç°æ–°çš„ä¸€å †é—®é¢˜ã€‚</p>
</li>
</ul>
<p><em>ä¸Šè¿°çƒ‚ä»£ç çš„å½±å“ä¸­ï¼Œå‰ä¸‰æ¡æ˜¯æœ€ç›´è§‚çš„ï¼Œä¹Ÿæ˜¯èƒ½ç«‹å³åæ˜ å‡ºæ¥çš„ã€‚è€Œåé¢ä¸¤æ¡å½±å“ï¼Œå¯èƒ½ä¸ä»…ä»…æ˜¯çƒ‚ä»£ç å¯¼è‡´çš„ã€‚</em></p>
<h2 data-id="heading-10">å¦‚ä½•å°‘å†™çƒ‚ä»£ç </h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3fb5a3f0a6384c8f87d175099161fe78~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUm9ja0J5dGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764811454&amp;x-signature=HAVmEFsQiJT2MXtbUSG3AuaDDS0%3D" alt="2.jpg" loading="lazy"/></p>
<p>æœ‰å¾ˆå¤šæ–¹æ³•å¯ä»¥å¸®åŠ©ä½ å°‘å†™çƒ‚ä»£ç ï¼ŒåŒ…æ‹¬ï¼š</p>
<ul>
<li>
<p><strong>æ˜ç¡®ä»»åŠ¡</strong>ï¼šå…ˆè®¾è®¡ï¼Œä¸è¦é©¬ä¸Šå¼€å§‹ç¼–ç ã€‚é€€ä¸€æ­¥ï¼Œå¤šæé—®é¢˜ï¼Œç¡®ä¿ä½ å®Œå…¨ç†è§£ä»»åŠ¡è¦æ±‚ã€‚æ’°å†™é—®é¢˜æ€»ç»“ä¹Ÿæœ‰åŠ©äºæ¢³ç†é¢„æœŸçš„è¾“å…¥ã€è¾“å‡ºå’Œé™åˆ¶æ¡ä»¶ï¼Œå°†æŠ½è±¡æ¦‚å¿µè½¬åŒ–ä¸ºåˆ‡å®çš„ç›®æ ‡ã€‚</p>
</li>
<li>
<p><strong>é€‰æ‹©ç®€å•æ–¹æ¡ˆ</strong>ï¼šä»Šå¤©çœ‹ä¼¼çœæ—¶çš„å·§å¦™ç®—æ³•ï¼Œæ˜å¤©å¯èƒ½ä¼šè€—è´¹æ›´å¤šæ—¶é—´ã€‚å¦‚æœä½ ä¸èƒ½åœ¨ä¸€åˆ†é’Ÿå†…è§£é‡Šæ¸…æ¥šä½ çš„ä»£ç ï¼Œé‚£å°±è€ƒè™‘ä¸ä»–äººåä½œé‡å†™ã€‚åç»­æœ‰ä¼˜åŒ–çš„æ—¶é—´å†æ…¢æ…¢ä¼˜åŒ–ä»£ç ï¼Œä¸è¦æ€¥äºæ±‚æˆã€‚ä¸è¦è¿‡æ—©ä¼˜åŒ–ã€‚</p>
</li>
<li>
<p><strong>é¿å…é‡å¤</strong>ï¼šé¿å…é‡å¤ä»£ç ã€‚å½“ä½ å¤åˆ¶ä»£ç è¡Œæ—¶ï¼Œä¹Ÿå¤åˆ¶äº†å…¶ä¸­çš„é”™è¯¯å’Œå…¶ä»–é—®é¢˜ï¼Œè¿™å¯èƒ½å¯¼è‡´éœ€è¦åœ¨å¤šä¸ªåœ°æ–¹èŠ±è´¹å¤§é‡æ—¶é—´è¿›è¡Œä¿®å¤ã€‚éµå¾ª â€œä¸‰æ¬¡åŸåˆ™â€ â€”â€” å¦‚æœä½ ç¼–å†™ç›¸ä¼¼ä»£ç è¶…è¿‡ä¸¤æ¬¡ï¼Œå°±å°†å…¶è½¬åŒ–ä¸ºä¸€ä¸ªå¯å¤ç”¨çš„å‡½æ•°ã€‚</p>
</li>
<li>
<p><strong>ç¼–å†™çŸ­å°ç²¾æ‚çš„å‡½æ•°</strong>ï¼šç¡®ä¿ä½ çš„å‡½æ•°å®ç°å…¶é¢„æœŸåŠŸèƒ½ï¼Œä¸è¦æ‰¿æ‹…è¿‡å¤šèŒè´£ã€‚å°æ®µä»£ç æ›´æ˜“äºç†è§£å’Œæµ‹è¯•ã€‚å‡½æ•°è¡Œæ•°å°½é‡æ§åˆ¶åœ¨ <code>30</code> è¡Œä»¥å†…ï¼Œæ¯ä¸ªå‡½æ•°åªåšä¸€ä»¶äº‹ã€‚</p>
</li>
<li>
<p><strong>ç”¨æœ‰æ„ä¹‰çš„å‘½å</strong>ï¼šä»£ç åº“ä¸­çš„å‘½åè¦æ˜“äºç†è§£ã€‚ç”±äºä»£ç é˜…è¯»è¿‡ç¨‹ä¸­äººä»¬ç»å¸¸çœ‹åˆ°è¿™äº›åç§°ï¼Œæ‰€ä»¥å˜é‡ã€å‡½æ•°å’Œå…¶ä»–æ ‡è¯†ç¬¦çš„å‘½åè¦è®©ä»»ä½•é˜…è¯»ä»£ç çš„äººéƒ½èƒ½æ¸…æ¥šå…¶å«ä¹‰å’Œç”¨é€”ã€‚</p>
</li>
<li>
<p><strong>å®šæœŸæµ‹è¯•</strong>ï¼šç¼–å†™æ£€æŸ¥æ•´ä½“è¡Œä¸ºçš„æµ‹è¯•ç”¨ä¾‹ï¼Œä»¥åŠé’ˆå¯¹å…³é”®ç®—æ³•çš„é’ˆå¯¹æ€§æµ‹è¯•ã€‚å®šæœŸæµ‹è¯•ä½¿ä½ èƒ½å¤Ÿæ”¾å¿ƒåœ°é‡æ„ä»£ç ï¼Œå› ä¸ºä½ çŸ¥é“å¦‚æœå‡ºç°é—®é¢˜ï¼Œå¯ä»¥å›æ»šåˆ°ä¸Šä¸€ä¸ªç‰ˆæœ¬ã€‚</p>
</li>
<li>
<p><strong>ä½¿ç”¨é™æ€ä»£ç åˆ†æå·¥å…·å’ŒåŒè¡Œè¯„å®¡</strong>ï¼šé™æ€ä»£ç åˆ†æå·¥å…·å¯ä»¥æ£€æŸ¥ä»£ç ä¸­çš„é—®é¢˜ï¼Œä¾‹å¦‚æœªä½¿ç”¨çš„å˜é‡ã€æ— æ³•è§¦åŠçš„åˆ†æ”¯æˆ–å®‰å…¨é£é™©ã€‚å°†è¿™äº›æ£€æŸ¥ä¸åŒè¡Œè¯„å®¡ç›¸ç»“åˆï¼Œå½¢æˆä¸€ä¸ªæ›´ä¸¥æ ¼çš„è¯„å®¡ä½“ç³»ï¼Œè®©æ¯ä¸ªäººéƒ½å¯¹ä»£ç è´¨é‡è´Ÿè´£ã€‚</p>
</li>
<li>
<p><strong>éµå¾ªç»Ÿä¸€çš„ä»£ç é£æ ¼</strong>ï¼šå°±å†…éƒ¨ä»£ç é£æ ¼æŒ‡å—è¾¾æˆå…±è¯†ï¼Œå¹¶ä¸¥æ ¼éµå®ˆã€‚ä»£ç é£æ ¼ä¸€è‡´å¯ä»¥ä½¿å¼€å‘äººå‘˜ä¸“æ³¨äºä»£ç åŠŸèƒ½ï¼Œè€Œä¸å¿…çº ç»“äºä»£ç å¤–è§‚ã€‚</p>
</li>
<li>
<p><strong>ä¼˜å…ˆè€ƒè™‘å®‰å…¨æ€§</strong>ï¼šéªŒè¯è¾“å…¥ï¼Œå¯¹è¾“å‡ºè¿›è¡Œç¼–ç ï¼Œå¦¥å–„å¤„ç† API å¯†é’¥å’Œå¯†ç ç­‰æœºå¯†ä¿¡æ¯ï¼Œå¯ä½¿ç”¨ç¯å¢ƒå˜é‡æˆ–æœºå¯†ç®¡ç†å·¥å…·å®‰å…¨å­˜å‚¨ã€‚ä»£ç è¯„å®¡æ—¶ï¼Œè¦ç•™æ„æ³¨å…¥æ”»å‡»å’Œç«äº‰æ¡ä»¶ç­‰é—®é¢˜ã€‚</p>
</li>
<li>
<p><strong>è®°å½•å†³ç­–ä¾æ®</strong>ï¼šæ¨¡æ£±ä¸¤å¯çš„åœ°æ–¹å®¹æ˜“äº§ç”Ÿçƒ‚ä»£ç ã€‚è®°å½•é‡‡ç”¨æŸç§æ–¹æ³•çš„ç†ç”±ã€‚ä¸ºä»€ä¹ˆé€‰æ‹©ä¹è§‚é”è€Œéæ‚²è§‚é”ï¼Ÿä¸ºä»€ä¹ˆæœåŠ¡è¦å¼‚æ­¥è€ŒéåŒæ­¥å¤„ç†äº‹ä»¶ï¼Ÿ</p>
</li>
<li>
<p><strong>é€æ­¥é‡æ„</strong>ï¼šä»é›¶å¼€å§‹é‡å»ºå¯èƒ½ä¼šå¼•å…¥æ–°çš„é”™è¯¯ï¼Œå¯¼è‡´ç”Ÿäº§å»¶è¿Ÿã€‚è¯¸å¦‚ä»£ç æ¸…ç†ã€æ›¿æ¢é—ç•™æ¨¡å¼ä»¥åŠä¼˜åŒ–ç¼“æ…¢çš„æ•°æ®åº“æŸ¥è¯¢ç­‰é€æ­¥é‡æ„è¿‡ç¨‹é€šå¸¸å¹²æ‰°è¾ƒå°ï¼ŒåŒæ—¶ä¹Ÿæ›´å®¹æ˜“åœ¨è¿‡ç¨‹ä¸­å‘ç°ç¼–ç é—®é¢˜ã€‚</p>
</li>
</ul>
<h2 data-id="heading-11">æ€»ç»“</h2>
<p>çƒ‚ä»£ç æ˜¯ä¸€ä¸ªé—®é¢˜ï¼Œå¯èƒ½ä¼šç»™å¼€å‘å›¢é˜Ÿã€é¡¹ç›®ä¹ƒè‡³æ›´å¹¿æ³›çš„å•†ä¸šé¢†åŸŸå¸¦æ¥ä»£ä»·é«˜æ˜‚çš„é—®é¢˜ã€‚æ¶ˆé™¤çƒ‚ä»£ç è¯­ä¹‰ä¸Šçš„æ¨¡ç³Šæ€§ï¼Œäº†è§£å…¶è¡¨ç°å½¢å¼ï¼Œæœ‰åŠ©äºä½ æ›´æ—©å‘ç°é—®é¢˜ã€æ›´è½»æ¾åœ°ä¿®å¤é—®é¢˜ï¼Œå¹¶é™ä½çƒ‚ä»£ç å¯¹é¡¹ç›®çš„å½±å“ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¤§æ•°æ®-165 Apache Kylin Cube7 å®æˆ˜ï¼šèšåˆç»„/RowKey/ç¼–ç ä¸ä½“ç§¯ç²¾åº¦å¯¹æ¯”]]></title>    <link>https://juejin.cn/post/7576863819982602249</link>    <guid>https://juejin.cn/post/7576863819982602249</guid>    <pubDate>2025-11-27T01:22:32.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576863819982602249" data-draft-id="7576894999095640091" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¤§æ•°æ®-165 Apache Kylin Cube7 å®æˆ˜ï¼šèšåˆç»„/RowKey/ç¼–ç ä¸ä½“ç§¯ç²¾åº¦å¯¹æ¯”"/> <meta itemprop="keywords" content="åç«¯,å¤§æ•°æ®,Apache Kylin"/> <meta itemprop="datePublished" content="2025-11-27T01:22:32.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ­¦å­åº·"/> <meta itemprop="url" content="https://juejin.cn/user/149189314230039"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¤§æ•°æ®-165 Apache Kylin Cube7 å®æˆ˜ï¼šèšåˆç»„/RowKey/ç¼–ç ä¸ä½“ç§¯ç²¾åº¦å¯¹æ¯”
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/149189314230039/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ­¦å­åº·
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-27T01:22:32.000Z" title="Thu Nov 27 2025 01:22:32 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">TL;DR</h2>
<ul>
<li>åœºæ™¯ï¼šç”± Cube4 å…‹éš†å‡º Cube7ï¼ˆç»´åº¦å‡ä¸º Normalï¼‰ï¼Œå¯¹æ¯”ä½“ç§¯ã€ç²¾åº¦ï¼Œå¹¶æ¢³ç†èšåˆç»„ä¸ RowKey å®æ“è¦ç‚¹ã€‚</li>
<li>ç»“è®ºï¼šåœ¨åŒç­‰æ•°æ®é‡ä¸‹ï¼Œç»´åº¦æ•°â†‘â†’ Cuboid æŒ‡æ•°çº§â†‘â†’ å­˜å‚¨ä¸æ„å»ºæˆæœ¬æ˜¾è‘—â†‘ï¼›ç”¨èšåˆç»„ + Mandatory/Hierarchy/Joint å¯æ§å¤æ‚åº¦ã€‚</li>
<li>äº§å‡ºï¼šå®æµ‹ size &amp; CubeStatsReader ç»“æœã€RowKey/ç¼–ç /ShardBy çš„å·¥ç¨‹åŒ–å»ºè®®ä¸å¸¸è§é”™è¯¯é€ŸæŸ¥å¡ã€‚</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/969a26d45fb64aa3bbdda5c03aaba96a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764811352&amp;x-signature=rv14Sgo66niAjp90OPKHixGt8ns%3D" alt="å¤§æ•°æ®-165 Apache Kylin Cube7 å®æˆ˜ï¼šèšåˆç»„/RowKey/ç¼–ç ä¸ä½“ç§¯ç²¾åº¦å¯¹æ¯”" loading="lazy"/></p>
<h2 data-id="heading-1">ç‰ˆæœ¬çŸ©é˜µ</h2>

























<table><thead><tr><th>é¡¹</th><th>å·²éªŒè¯</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>Cube4 vs Cube7 ä½“ç§¯å¯¹æ¯”ï¼ˆå°æ ·æœ¬ï¼‰</td><td>âœ…</td><td>å®æµ‹ï¼šcube-4 125 è¡Œâ‰ˆ22KBï¼›cube-7 15 è¡Œâ‰ˆ9KBï¼›æ®æ­¤æ¨æ–­åŒé‡çº§æ•°æ®ä¸‹ï¼Œç»´åº¦æ›´å¤šçš„ Cube7 ä½“ç§¯ä¼šæ›´å¤§ï¼ˆCuboid æŒ‡æ•°çº§ï¼‰ã€‚æ ·æœ¬å°ï¼Œä»…ä½œè¶‹åŠ¿å‚è€ƒã€‚</td></tr><tr><td>CubeStatsReader è¯»å–ï¼ˆç²¾åº¦/ç¨€ç–åº¦/è¡Œæ•°åˆ†å¸ƒï¼‰</td><td>âœ…</td><td>å‘½ä»¤è¡Œå·²è·‘é€šå¹¶æœ‰æˆªå›¾ï¼›ç”¨äºäº†è§£ Cuboid åˆ†å¸ƒä¸æ„å»ºè´¨é‡ã€‚</td></tr><tr><td>Cube7 ç»´åº¦å±æ€§å‡ä¸º Normal</td><td>âœ…</td><td>æ¥æºäºå»ºæ¨¡é…ç½®ä¸æˆªå›¾è¯´æ˜ã€‚</td></tr></tbody></table>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7d7f1b14aaaf414680b8d0d9ce3d0ce9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764811352&amp;x-signature=Z4gf22U897g27vS%2F2cxUNQR%2BFW0%3D" alt="Apache Kylin" loading="lazy"/></p>
<h2 data-id="heading-2">å®šä¹‰Cube7</h2>
<p>çœç•¥Modelç­‰æ“ä½œã€‚
æ„å»ºå‰é¢Cube4ç±»ä¼¼çš„Cube7ï¼Œä»…åœ¨ç»´åº¦å®šä¹‰æœ‰åŒºåˆ«ã€‚(æˆ‘è¿™é‡Œæ˜¯Clone Cube4ï¼Œç„¶åä¿®æ”¹çš„)
wzk_test_kylin_cube_7çš„å­—æ®µä¸­ï¼Œéƒ½æ˜¯Normalï¼š
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3102a718a04a4df39b579828d80bcf72~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764811352&amp;x-signature=6RSELqAXtlSyf4QcRVutBwSu5H4%3D" alt="Kylin Cube" loading="lazy"/>
ç”Ÿæˆçš„å¦‚ä¸‹å›¾ï¼š
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/969d37f9a52d47aeaa51f4a70e55aea0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764811352&amp;x-signature=QyIW7IseWj6MeAAhMkjUH%2FLay%2F4%3D" alt="Cube Designer" loading="lazy"/></p>
<h2 data-id="heading-3">æ„å»ºCube7</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f8ba5cee16cd4d07b09ac2ce6f3d2b67~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764811352&amp;x-signature=s8WVVAH8c%2FJD3ADL3SWeplSdm64%3D" alt="Kylin Cube æ„å»º" loading="lazy"/></p>
<h2 data-id="heading-4">å¤§å°å¯¹æ¯”</h2>
<p>æŸ¥çœ‹Sizeçš„å¯¹æ¯”ï¼š
ç”±äºä¹‹å‰æ•°æ®å¤ªå¤šè·‘çš„å¤ªæ…¢ï¼Œæˆ‘çš„ cube-4 æ˜¯125æ¡æ•°æ®å ç”¨22KBï¼Œæˆ‘çš„cube-7æ˜¯15æ¡å ç”¨9KBã€‚
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0c6b618c657f43bb8c9e65b48ba2ecb9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764811352&amp;x-signature=HgiN4JJsZMIpBIMK72QD4bA9b0c%3D" alt="Kylin å¤§å°å¯¹æ¯”" loading="lazy"/>
ç²—ç•¥å¯ä»¥ä¼°è®¡å‡ºæ¥ï¼Œcube-7çš„å¤§å°è¦æ¯”cube-4çš„å¤§å°å¤§å¾ˆå¤šï¼ˆå¦‚æœåŒæ•°æ®é‡çš„è¯ï¼‰</p>
<h2 data-id="heading-5">ç²¾åº¦å¯¹æ¯”</h2>
<h3 data-id="heading-6">wzk_kylin_test_cube_4</h3>
<pre><code class="hljs language-shell" lang="shell">kylin.sh org.apache.kylin.engine.mr.common.CubeStatsReader wzk_kylin_test_cube_4
</code></pre>
<p>å¯¹åº”çš„ä¿¡æ¯å¦‚ä¸‹ï¼š
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/54f60a17c25946d9bf5760965c451ad7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764811352&amp;x-signature=H%2FjNOOLlaBmg4%2FbOCVMPQ9olvIg%3D" alt="Cuboid æ‰§è¡Œç»“æœ" loading="lazy"/></p>
<h3 data-id="heading-7">wzk_kylin_test_cube_7</h3>
<pre><code class="hljs language-shell" lang="shell">kylin.sh org.apache.kylin.engine.mr.common.CubeStatsReader wzk_kylin_test_cube_7
</code></pre>
<p>å¯¹åº”çš„ä¿¡æ¯å¦‚ä¸‹ï¼š
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a0923761d09e4d9793ed4eb7cf554ee0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764811352&amp;x-signature=0vPmMbsuCOhdapkbOCAvNngSWUU%3D" alt="wzk_kylin_test_cube_7" loading="lazy"/></p>
<h2 data-id="heading-8">èšåˆç»„</h2>
<p>éšç€ç»´åº¦æ•°ç›®çš„å¢åŠ ï¼ŒCuboidçš„æ•°é‡ä¼šçˆ†ç‚¸å¼çš„å¢é•¿ï¼Œä¸ºäº†ç¼“è§£Cubeçš„æ„å»ºå‹åŠ›ï¼ŒApache Kylin å¼•å…¥äº†ä¸€ç³»åˆ—é«˜çº§çš„è®¾ç½®ï¼Œå¸®åŠ©ç”¨æˆ·ç­›é€‰å‡ºçœŸæ­£éœ€è¦çš„Cuboidï¼ˆæœ¬è´¨æ˜¯è¦å‡å°‘Cubeæ„å»ºè¿‡ç¨‹ä¸­çš„é¢„è®¡ç®—ï¼‰ï¼Œè¿™äº›é«˜çº§è®¾ç½®åŒ…æ‹¬ï¼š</p>
<ul>
<li>èšåˆç»„ï¼ˆAggregation Groupï¼‰</li>
<li>å¼ºåˆ¶ç»´åº¦ï¼ˆMandatory Dimensionï¼‰</li>
<li>å±‚çº§ç»´åº¦ï¼ˆHierachy Dimensionï¼‰</li>
<li>è”åˆç»´åº¦ï¼ˆJoint Dimensionï¼‰</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/60c586b1e4554ae4bbca6f54189c46bd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764811352&amp;x-signature=7LYHiIIblR98nVc%2BvGXdTJeSmKo%3D" alt="Cube Designer" loading="lazy"/></p>
<p>é»˜è®¤Kylinä¼šæŠŠæ‰€æœ‰ç»´åº¦æ”¾åœ¨åŒä¸€ä¸ªèšåˆç»„ä¸­
å¦‚æœç»´åº¦æ•°è¾ƒå¤šï¼ˆå¦‚ç»´åº¦æ•°&gt;15ï¼‰ï¼Œå»ºè®®ç”¨æˆ·æ ¹æ®æŸ¥è¯¢çš„ä¹ æƒ¯å’Œæ¨¡å¼ï¼Œå°†ç»´åº¦åˆ†å¸ƒåˆ°å¤šä¸ªèšåˆç»„ä¸­ã€‚é€šè¿‡ä½¿ç”¨å¤šä¸ªèšåˆç»„ï¼Œå¯ä»¥å¤§å¤§é™ä½Cubeä¸­çš„Cuboidæ•°é‡ã€‚
å¦‚ä¸€ä¸ªCubeæœ‰ï¼ˆM+Nï¼‰ä¸ªç»´åº¦ï¼š</p>
<ul>
<li>è¿™äº›ç»´åº¦æ”¾åœ¨ä¸€ä¸ªèšåˆç»„ä¸­ï¼Œé»˜è®¤æœ‰2^(M+N)ä¸ªCuboid</li>
<li>å°†è¿™äº›ç»´åº¦åˆ†ä¸ºä¸¤ä¸ªä¸ç›¸äº¤çš„èšåˆç»„ï¼Œç¬¬ä¸€ä¸ªç»„æœ‰Mä¸ªç»´åº¦ï¼Œç¬¬äºŒä¸ªç»„æœ‰Nä¸ªç»´åº¦ã€‚é‚£ä¹ˆCuboidçš„æ€»æ•°ä¸ºï¼ˆ2^M + 2^Nï¼‰ä¸ªç»´åº¦</li>
<li>ä¸€ä¸ªç»´åº¦å¯ä»¥å‡ºç°åœ¨å¤šä¸ªèšåˆç»„ä¸­</li>
</ul>
<p>åœ¨å•ä¸ªç»„åˆç»„ä¸­ï¼Œå¯ä»¥å¯¹ç»´åº¦è®¾ç½®ä¸€äº›é«˜çº§å±æ€§ï¼ŒåŒ…æ‹¬å¼ºåˆ¶æ€ç»´ã€å±‚çº§ç»´åº¦ã€è”åˆç»´åº¦ã€‚ä¸€ä¸ªç»´åº¦åªèƒ½å‡ºç°åœ¨ä¸€ä¸ªå±æ€§ç»„ä¸­ã€‚
æ„å»ºNä¸ªç»´åº¦çš„Cubeä¼šç”Ÿæˆçš„2^Nä¸ªCuboidï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œæ„å»ºä¸€ä¸ª4ä¸ªç»´åº¦ï¼ˆAã€Bã€Cã€Dï¼‰çš„Cubeï¼Œéœ€è¦ç”Ÿæˆ16ä¸ªCuboidã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/26aed751717447f89f47daeac924ead3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764811352&amp;x-signature=QGQnes0LcKWDZLwbPoj6y8aXh8Q%3D" alt="Cubeçš„ç»´åº¦æè¿°" loading="lazy"/></p>
<p>æ ¹æ®ç”¨æˆ·å…³æ³¨çš„ç»´åº¦ç»„åˆï¼Œå¯ä»¥ç»´åº¦åˆ’åˆ†ä¸åŒçš„ç»„åˆç±»ï¼Œè¿™äº›ç»„åˆç±»åœ¨Kylinä¸­è¢«ç§°ä¸ºèšåˆç»„ï¼Œå¦‚ç”¨æˆ·ä»…ä»…å…³æ³¨ç»´åº¦ABç»„åˆå’Œç»´åº¦CDç»„åˆï¼Œé‚£ä¹ˆè¯¥Cubeåˆ™å¯ä»¥è¢«åˆ†åŒ–æˆä¸¤ä¸ªèšåˆç»„ï¼Œåˆ†åˆ«æ˜¯èšåˆç»„ABå’Œèšåˆç»„CDã€‚ç”Ÿæˆçš„Cuboidæ•°ç›®ä»16ä¸ªç¼©å‡ä¸º8ä¸ªã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/df5c47db88124d3f8dceb8cf997b3deb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764811352&amp;x-signature=pTjNIv%2FiRRh7W5FoPxXhSDBaNMY%3D" alt="Kylin Cube ä¼˜åŒ–ç»“æœ" loading="lazy"/>
ç”¨æˆ·å…³å¿ƒçš„èšåˆç»„ä¹‹é—´å¯èƒ½åŒ…å«ç›¸åŒçš„ç»´åº¦ï¼Œå¦‚èšåˆç»„ABCå’Œèšåˆç»„BCDéƒ½åŒ…å«ç»´åº¦Bå’Œç»´åº¦Cï¼Œè¿™äº›èšåˆç»„ä¹‹é—´ä¼šè¡ç”Ÿç›¸åŒçš„Cuboidã€‚èšåˆç»„ABCä¼šäº§ç”ŸCuboid BCï¼Œèšåˆç»„BCDä¹Ÿä¼šäº§ç”ŸCuboid BCã€‚
è¿™äº›Cuboidä¸ä¼šé‡å¤ç”Ÿæˆï¼Œä¸€ä»½Cuboidä¸ºè¿™äº›èšåˆç»„æ‰€å…±æœ‰ã€‚
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a85084431e0642859f5d1c45c4073e58~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764811352&amp;x-signature=2S0FUqGPhi1zmgbqPN5JLkJfGeA%3D" alt="Kylin Cuboidç»´åº¦ç»„åˆ" loading="lazy"/>
æœ‰äº†èšåˆç»„å°±å¯ä»¥ç²—ç²’åº¦çš„å¯¹Cuboidè¿›è¡Œç­›é€‰ï¼Œè·å–è‡ªå·±æƒ³è¦çš„ç»´åº¦ç»„åˆã€‚Kylinçš„å»ºæ¨¡éœ€è¦ä¸šåŠ¡ä¸“å®¶å‚æ•°ã€‚</p>
<h3 data-id="heading-9">å¼ºåˆ¶ç»´åº¦(Mandatory Dimension)</h3>
<p>å¼ºåˆ¶/å¿…è¦ ç»´åº¦ï¼šæŒ‡çš„æ˜¯é‚£äº›æ€»ä¼šå‡ºç°åœ¨Whereæ¡ä»¶æˆ–Group Byè¯­å¥ä¸­çš„ç»´åº¦ã€‚
é€šè¿‡æŒ‡å®šæŸäº›ç»´åº¦ä¸ºå¼ºåˆ¶ç»´åº¦ï¼ŒKylinä¸é¢„è®¡ç®—é‚£äº›ä¸åŒ…å«æ­¤ç»´åº¦çš„Cuboidï¼Œä»è€Œå‡å°‘è®¡ç®—é‡ã€‚
ç»´åº¦Aæ˜¯å¼ºåˆ¶ç»´åº¦ï¼Œé‚£ä¹ˆç”Ÿæˆçš„Cubeå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œç»´åº¦æ•°ä»16å˜æˆ9ã€‚</p>
<h3 data-id="heading-10">å±‚çº§ç»´åº¦(Hierachy Dimension)</h3>
<p>å±‚çº§ç»´åº¦ï¼šæ˜¯æŒ‡ä¸€ç»„æœ‰å±‚çº§å…³ç³»çš„ç»´åº¦
ç»´åº¦ä¸­å¸¸å¸¸ä¼šå‡ºç°å…·æœ‰å±‚çº§å…³ç³»çš„ç»´åº¦ï¼Œä¾‹å¦‚ï¼šå›½å®¶ã€çœä»½ã€åŸå¸‚è¿™ä¸‰ä¸ªç»´åº¦ï¼Œä»ä¸Šè€Œä¸‹æ¥è¯´ï¼šå›½å®¶/çœä»½/åŸå¸‚ä¹‹é—´åˆ†åˆ«æ˜¯ä¸€å¯¹å¤šçš„å…³ç³»ã€‚å‡è®¾ç»´åº¦Aä»£è¡¨å›½å®¶ï¼Œç»´åº¦Bä»£è¡¨çœä»½ï¼Œç»´åº¦Cä»£è¡¨åŸå¸‚ï¼ŒABCä¸‰ä¸ªç»´åº¦å¯ä»¥è¢«è®¾ç½®ä¸ºå±‚çº§ç»´åº¦</p>
<p>Cuboid[A,C,D] = Cuboid[A,B,C,D], Cuboid[B,D] = Cuboid[A,B,D]ï¼Œå› è€ŒCuboid[A,C,D] å’Œ Cuboid[B,D] å°±ä¸å¿…é‡å¤å­˜å‚¨ã€‚</p>
<h3 data-id="heading-11">è”åˆç»´åº¦(Joint Dimension)</h3>
<p>è”åˆç»´åº¦ï¼šæ˜¯å°†å¤šä¸ªç»´åº¦è§†ä½œä¸€ä¸ªç»´åº¦ï¼Œåœ¨è¿›è¡Œç»„åˆè®¡ç®—çš„æ—¶å€™ï¼Œå®ƒä»¬è¦ä¹ˆä¸€èµ·å‡ºç°ï¼Œè¦ä¹ˆå‡ä¸å‡ºç°ã€‚
é€šå¸¸é€‚ç”¨äºä»¥ä¸‹å‡ ç§æƒ…å½¢ï¼š</p>
<ul>
<li>æ€»æ˜¯åœ¨ä¸€èµ·æŸ¥è¯¢çš„ç»´åº¦</li>
<li>å½¼æ­¤ä¹‹é—´æœ‰ä¸€å®šæ˜ å°„å…³ç³»ï¼Œå¦‚USER_IDå’ŒEMAIL</li>
<li>åŸºæ•°å¾ˆä½çš„ç»´åº¦ï¼Œå¦‚æ€§åˆ«ã€å¸ƒå°”ç±»å‹çš„å±æ€§</li>
</ul>
<p>ç»´åº¦çš„åŸºæ•°ï¼šç»´åº¦æœ‰å¤šå°‘ä¸ªä¸åŒçš„å€¼ã€‚
è”åˆç»´åº¦å¹¶ä¸å…³å¿ƒç»´åº¦ä¹‹é—´å„ç§ç»†èŠ‚çš„ç»„åˆæ–¹å¼ï¼Œå¦‚ç”¨æˆ·æŸ¥è¯¢è¯­å¥ä¸­ä»…ä»…ä¼šå‡ºç°GROUP BY Aï¼ŒBï¼ŒCï¼Œè€Œä¸ä¼šå‡ºç°GROUP BY Aã€Bæˆ–è€…GROUP BY Cç­‰ç­‰è¿™ç»†åŒ–çš„ç»´åº¦ç»„åˆã€‚è¿™ä¸€ç±»é—®é¢˜å°±æ˜¯è”åˆç»´åº¦æ‰€è§£å†³çš„é—®é¢˜ã€‚</p>
<p>ä¾‹å¦‚å°†Aã€Bã€Cå®šä¹‰ä¸ºè”åˆç»´åº¦ï¼ŒApache Kylinå°±ä»…ä»…æ„å»ºCuboid ABCï¼Œè€ŒCuboid ABã€BCã€Aç­‰ç­‰Cuboidéƒ½ä¸ä¼šè¢«ç”Ÿæˆï¼Œæœ€ç»ˆCubeç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºçš„ï¼ŒCuboidæ•°ç›®ä»16å‡å°‘åˆ°4ï¼š</p>
<h3 data-id="heading-12">æ€»ç»“å†…å®¹</h3>
<ul>
<li>åœ¨å•ä¸ªèšåˆç»„ä¸­ï¼Œå¯ä»¥å¯¹ç»´åº¦è¿›è¡Œè®¾ç½®ï¼ŒåŒ…æ‹¬å¼ºåˆ¶ç»´åº¦ã€å±‚çº§ç»´åº¦ã€è”åˆç»´åº¦ã€‚</li>
<li>å¼ºåˆ¶ç»´åº¦ï¼šæŒ‡çš„æ˜¯é‚£äº›æ€»ä¼šå‡ºç°åœ¨Whereæ¡ä»¶æˆ–è€…GROUP BYå­å¥ä¸­çš„ç»´åº¦</li>
<li>å±‚çº§ç»´åº¦ï¼šä¸€ç»„å…·æœ‰å±‚çº§å…³ç³»çš„ç»´åº¦ï¼ˆå¦‚ï¼šå›½å®¶ã€çœã€å¸‚ï¼‰</li>
<li>è”åˆç»´åº¦ï¼šå°†å¤šä¸ªç»´åº¦çœ‹æˆä¸€ä¸ªè§’åº¦ï¼Œè¦ä¹ˆä¸€èµ·å‡ºç°ï¼Œè¦ä¹ˆéƒ½ä¸å‡ºç°</li>
</ul>
<h2 data-id="heading-13">RowKeys</h2>
<p>ç®€å•çš„è¯´Cuboidçš„ç»´åº¦ä¼šæ˜ å°„ä¸ºHBaseçš„Rowkeyï¼ŒCuboidçš„æŒ‡æ ‡ä¼šæ˜ å°„ä¸ºHBaseçš„Valueã€‚
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b710629413934a32be1c46fbad567810~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764811352&amp;x-signature=4dwOvMl0oGk32Y%2FCARL1nt9Kij0%3D" alt="Cuboidçš„æŒ‡æ ‡ä¼šæ˜ å°„ä¸ºHBaseçš„Value" loading="lazy"/></p>
<ul>
<li>å¦‚ä¸Šå›¾åŸå§‹è¡¨æ‰€ç¤ºï¼šHiveè¡¨æœ‰ä¸¤ä¸ªç»´åº¦åˆ—yearã€cityï¼Œæœ‰ä¸€ä¸ªæŒ‡æ ‡åˆ— priceã€‚</li>
<li>å¦‚ä¸Šå›¾é¢„èšåˆè¡¨æ‰€ç¤ºï¼šæˆ‘ä»¬å…·ä½“è¦è®¡ç®—çš„æ˜¯yearå’Œcityè¿™ä¸¤ä¸ªç»´åº¦æ‰€æœ‰ç»´åº¦ç»„åˆï¼ˆå³4ä¸ªcuboidï¼‰ä¸‹çš„sum(prices)æŒ‡æ ‡ï¼Œè¿™ä¸ªæŒ‡æ ‡çš„å…·ä½“è®¡ç®—è¿‡ç¨‹å°±ç”±MapReduceå®Œæˆçš„ã€‚</li>
<li>å¦‚ä¸Šå›¾çš„å­—å…¸ç¼–ç æ‰€ç¤ºï¼šä¸ºäº†èŠ‚çœå­˜å‚¨èµ„æºï¼ŒKylinå¯¹ç»´åº¦å€¼è¿›è¡Œäº†å­—å…¸ç¼–ç ï¼Œå›¾ä¸­å°†beijingå’Œshanghaiä¾æ¬¡ç¼–ç 0å’Œ1ã€‚</li>
<li>å¦‚ä¸Šå›¾HBase KVå­˜å‚¨æ‰€ç¤ºï¼šåœ¨è®¡ç®—Cuboidè¿‡ç¨‹ä¸­ï¼Œä¼šå°†Hiveè¡¨çš„æ•°æ®è½¬æ¢ä¸ºHBaseçš„KVå½¢å¼ã€‚Rowkeyçš„å…·ä½“æ ¼å¼æ˜¯ Cuboid id + å…·ä½“çš„ç»´åº¦å€¼ï¼ˆæœ€æ–°çš„Rowkeyä¸­ä¸ºäº†å¹¶å‘æŸ¥è¯¢è¿˜åŠ å…¥äº†Shard Keyï¼‰ï¼Œä»¥é¢„èšåˆè¡¨å†…å®¹çš„ç¬¬2è¡Œä¸ºåˆ—ï¼Œå…¶ç»´åº¦ç»„åˆæ˜¯ï¼ˆyearï¼Œcityï¼‰ï¼Œæ‰€ä»¥Cuboid idå°±æ˜¯00000011ï¼ŒCuboidæ˜¯8ä½ï¼Œå…·ä½“ç»´åº¦å€¼æ˜¯1994å’Œshanghaiï¼Œæ‰€ä»¥ç¼–ç åçš„ç»´åº¦å€¼å¯¹åº”ä¸Šå›¾çš„å­—å…¸ç¼–ç ä¹Ÿæ˜¯11ï¼Œæ‰€ä»¥HBaseçš„Rowkeyå°±æ˜¯00000011ï¼Œå¯¹åº”HBase Valueå°±æ˜¯sum(price)çš„å…·ä½“å€¼ã€‚</li>
<li>æ‰€æœ‰çš„Cuboidè®¡ç®—å®Œæˆåï¼Œä¼šå°†Cuboidè½¬æ¢ä¸ºHBaseçš„KeyValueæ ¼å¼ç”ŸæˆHBaseçš„HFileï¼Œæœ€åå°†HFile Loadè¿›Cubeå¯¹åº”çš„HBaseè¡¨ä¸­ã€‚</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b8155635e0d0460a931c5010d4ead6c7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764811352&amp;x-signature=PkGQAeD8NA4DHHUTAHB45BwH0dA%3D" alt="Rowkeys" loading="lazy"/></p>
<h3 data-id="heading-14">ç¼–ç </h3>
<p>Kyelinä»¥Key-Valueçš„æ–¹å¼å°†Cubeå­˜å‚¨åˆ°HBaseä¸­ï¼ŒHBaseçš„Keyå°±æ˜¯Rowkeyï¼Œæ˜¯ç”±å„ç»´åº¦çš„å€¼æ‹¼æ¥è€Œæˆçš„ï¼Œä¸ºäº†æ›´é«˜æ•ˆçš„çš„å­˜å‚¨è¿™äº›å€¼ï¼ŒKylinä¼šå¯¹å®ƒä»¬è¿›è¡Œç¼–ç å’Œå‹ç¼©ï¼Œæ¯ä¸ªç»´åº¦å‡å¯ä»¥é€‰æ‹©åˆé€‚çš„ç¼–ç æ–¹å¼ï¼Œä¸ºäº†æ›´æç¬‘å­˜å‚¨è¿™äº›å€¼ï¼ŒKylinä¼šå¯¹å®ƒä»¬è¿›è¡Œç¼–ç å’Œå‹ç¼©ï¼Œæ¯ä¸ªç»´åº¦å‡å¯ä»¥é€‰æ‹©åˆé€‚çš„ç¼–ç æ–¹å¼ï¼Œé»˜è®¤é‡‡ç”¨çš„æ˜¯å­—å…¸ï¼ˆDictionaryï¼‰ç¼–ç æŠ€æœ¯ã€‚å­—æ®µæ”¯æŒçš„åŸºæœ¬ç¼–ç ç±»å‹å¦‚ä¸‹ï¼š</p>
<ul>
<li>Dictionary å­—å…¸ç¼–ç å°†æ‰€æœ‰æ­¤ç»´åº¦ä¸‹çš„å€¼æ„æˆä¸€å¼ æ˜ å°„è¡¨ï¼Œä»è€Œå¤§å¤§èŠ‚çº¦å­˜å‚¨ç©ºé—´ï¼Œé€‚ç”¨äºå¤§éƒ¨åˆ†å­—æ®µï¼Œé»˜è®¤æ¨èä½¿ç”¨ã€‚Dictionaryäº§ç”Ÿçš„ç¼–ç éå¸¸ç´§å‡‘ï¼Œå°¤å…¶åœ¨ç»´åº¦çš„å€¼åŸºæ•°å°ä¸”é•¿åº¦å¤§çš„æƒ…å†µä¸‹ï¼Œä½†åœ¨è¶…é«˜åŸºæƒ…å†µä¸‹ï¼Œå¯èƒ½å¼•èµ·å†…å­˜ä¸è¶³çš„é—®é¢˜ï¼Œåœ¨Kylinä¸­å­—å…¸ç¼–ç å…è®¸çš„åŸºæ•°ä¸Šé™é»˜è®¤æ˜¯500ä¸‡ï¼ˆç”±å‚æ•°kylin.dictionay.max.cardinalityé…ç½®ï¼‰</li>
<li>booleanï¼šé€‚ç”¨äºå­—æ®µä¸ºï¼štureã€falseã€TUREã€FALSEã€tã€fã€Tã€Fã€yesã€noã€YESã€NOã€yã€nã€Yã€Nã€1ã€0</li>
<li>dateï¼šé€‚ç”¨äºå­—æ®µä¸ºæ—¥æœŸå­—ç¬¦ï¼Œæ”¯æŒçš„æ ¼å¼åŒ…æ‹¬yyyyMMddã€yyyy-MM-ddã€yyyy-MM-dd HH:mm:ss.SSS</li>
<li>timeï¼šé€‚ç”¨äºå­—æ®µä¸ºæ—¶é—´æˆ³å­—ç¬¦ï¼Œæ”¯æŒèŒƒå›´ä¸º[1970-01-01 00:00:00],[2038-01-09 03:14:07]ï¼Œæ¯«ç§’éƒ¨åˆ†ä¼šè¢«å¿½ç•¥ï¼Œtimeç¼–ç é€‚ç”¨äºtimeã€datetimeã€timestampç­‰ç±»å‹</li>
<li>fix_lengthï¼šä½¿ç”¨è¶…é«˜åŸºç¯å¢ƒï¼Œå°†é€‰å–å­—æ®µçš„å‰Nä¸ªå­—èŠ‚ä¸ºç¼–ç å€¼ï¼Œå½“Nå°äºå­—æ®µé•¿åº¦ï¼Œä¼šé€ æˆå­—æ®µé˜¶æ®µï¼Œå½“Nè¾ƒå¤§æ—¶ï¼Œé€ æˆRowKeyè¿‡é•¿ï¼ŒæŸ¥è¯¢æ€§èƒ½ä¸‹é™ï¼Œåªé€‚ç”¨äºvarcharã€nvarcharç±»å‹</li>
<li>fixed_length_hexï¼šé€‚ç”¨äºå­—æ®µä¸ºåå…­è¿›åˆ¶å­—ç¬¦ï¼Œæ¯”å¦‚1A2BFFæˆ–è€…FF00FFï¼Œæ¯ä¸¤ä¸ªå­—ç¬¦éœ€è¦ä¸€ä¸ªå­—èŠ‚ï¼Œåªé€‚ç”¨äºvarcharæˆ–nvarcharç±»å‹</li>
</ul>
<h3 data-id="heading-15">é¡ºåº</h3>
<p>å„ç»´åº¦åœ¨RowKeysä¸­çš„é¡ºåºï¼Œå¯¹äºæŸ¥è¯¢çš„æ€§èƒ½ä¼šäº§ç”Ÿè¾ƒæ˜æ˜¾çš„å½±å“ï¼Œåœ¨è¿™é‡Œç”¨æˆ·å¯ä»¥æ ¹æ®æŸ¥è¯¢çš„æ¨¡å¼å’Œä¹ æƒ¯ï¼Œé€šè¿‡æ‹–æ‹½çš„æ–¹å¼è°ƒæ•´å„ä¸ªç»´åº¦åœ¨RowKeysä¸Šçš„é¡ºåºï¼Œæ¨èçš„é¡ºåºä¸ºï¼š</p>
<ul>
<li>Mandatory ç»´åº¦</li>
<li>where è¿‡æ»¤æ¡ä»¶ä¸­å‡ºç°é¢‘ç‡è¾ƒå¤šçš„ç»´åº¦</li>
<li>é«˜åŸºæ•°ç»´åº¦</li>
<li>ä½åŸºæ•°ç»´åº¦æ”¾åé¢</li>
<li>ä¸å¸¸ç”¨çš„ç»´åº¦æ”¾åœ¨åé¢
è¿™æ ·åšçš„å¥½å¤„æ˜¯ï¼Œå……åˆ†åˆ©ç”¨è¿‡æ»¤æ¡ä»¶æ¥ç¼©å°åœ¨HBaseä¸­æ‰«æçš„èŒƒå›´ï¼Œä»è€Œæé«˜æŸ¥è¯¢çš„æ•ˆç‡ã€‚</li>
</ul>
<h3 data-id="heading-16">åˆ†ç‰‡</h3>
<p>æŒ‡å®šShardByçš„åˆ—ï¼Œæ˜ç»†æ•°æ®å°†æŒ‰ç…§è¯¥åˆ—çš„å€¼åˆ†ç‰‡ï¼Œæ²¡æœ‰æŒ‡å®šçš„ShardByçš„åˆ—ï¼Œåˆ™é»˜è®¤æ ¹æ®æ‰€æœ‰åˆ—ä¸­çš„æ•°æ®è¿›è¡Œåˆ†ç‰‡ï¼Œé€‰æ‹©é€‚å½“çš„ShardByåˆ—ï¼Œå¯ä»¥ä½¿æ˜ç»†æ•°æ®è¾ƒä¸ºå‡åŒ€çš„åˆ†æ•£åœ¨å¤šä¸ªæ•°æ®ç‰‡ä¸Šï¼Œæé«˜å¹¶è¡Œæ€§ï¼Œè¿›è€Œè·å¾—æ›´ç†æƒ³çš„æŸ¥è¯¢ã€‚
å»ºè®®é€‰æ‹©åŸºæ•°è¾ƒå¤§çš„åˆ—ä½œä¸ºShardByåˆ—ï¼Œä»¥é¿å…æ•°æ®åˆ†æ•£ä¸å‡åŒ€ã€‚</p>
<h2 data-id="heading-17">é”™è¯¯é€ŸæŸ¥</h2>





















































<table><thead><tr><th>ç—‡çŠ¶</th><th>æ ¹å› </th><th>å®šä½</th><th>ä¿®å¤</th></tr></thead><tbody><tr><td>æ„å»ºææ…¢æˆ–å¡åœ¨ Cuboid è®¡ç®—</td><td>ç»´åº¦å…¨è¿›ä¸€ç»„â†’Cuboid æŒ‡æ•°çº§çˆ†ç‚¸</td><td>æ„å»ºæ—¥å¿—ä¸­ Cuboid æšä¸¾/Planner ä»»åŠ¡å †ç§¯</td><td>æŒ‰æŸ¥è¯¢æ¨¡å¼æ‹†åˆ†èšåˆç»„ï¼›è®¾ç½® Mandatory/Hierarchy/Joint ä»¥è£å‰ª Cuboidï¼›å¿…è¦æ—¶å‡å°‘ç»´åº¦</td></tr><tr><td>æŸ¥è¯¢æ…¢ã€æ‰«æé‡è¿‡å¤§</td><td>RowKey é¡ºåºä¸å½“ï¼Œé«˜é¢‘è¿‡æ»¤ç»´åº¦é å</td><td>æŸ¥è¯¢ Profile/HBase Scanner è¯»é‡é«˜</td><td>å°† Mandatory ä¸é«˜é¢‘ where ç»´åº¦å‰ç½®ï¼›é«˜åŸºåœ¨å‰ä½åŸºåœ¨åï¼›æ£€æŸ¥æ˜¯å¦å‘½ä¸­ç›®æ ‡ Cuboid</td></tr><tr><td>å‘½ä¸­ç‡ä½ã€é¢‘ç¹è½åˆ°æ˜ç»†æ‰«æ</td><td>Mandatory é…ç½®é”™è¯¯æˆ–ç¼ºå¤±</td><td>Explain/æŸ¥è¯¢è®¡åˆ’æœªå‘½ä¸­é¢„è®¡ç®— Cuboid</td><td>ä¿®æ­£ Mandatory ä¸èšåˆç»„ï¼›è¡¥é½å¸¸ç”¨ç»„åˆä¸º Joint/Hierarchyï¼›é‡å»º Cube</td></tr><tr><td>å­—å…¸ç¼–ç æ„å»º OOM æˆ–å¤±è´¥</td><td>ç»´åº¦åŸºæ•°è¿‡é«˜ï¼Œå­—å…¸å†…å­˜å‹åŠ›å¤§</td><td>æ„å»º Job æ—¥å¿—â€œtoo many values/OOMâ€</td><td>æå‡å­—å…¸åŸºæ•°ä¸Šé™å‚æ•°æˆ–æ”¹ç”¨ fixed_length/hexï¼›åšç»´åº¦å»å™ª/å½’å¹¶ï¼›å¿…è¦æ—¶åˆ†æ¡¶æˆ–é™ç»´</td></tr><tr><td>Region çƒ­ç‚¹ã€æŸ¥è¯¢æŠ–åŠ¨</td><td>ShardBy é€‰é”™/å€¾æ–œï¼ˆæ—¶é—´ç­‰ï¼‰</td><td>HBase RegionServer è´Ÿè½½/çƒ­ç‚¹ç›‘æ§</td><td>é€‰é«˜åŸºåˆ—åš ShardByï¼›å¢å¤§åˆ†ç‰‡æ•°ï¼›å¯¹å€¾æ–œç»´åº¦åšæ•£åˆ—æˆ–èŒƒå›´åˆ‡åˆ†</td></tr><tr><td>CubeStatsReader è¿è¡ŒæŠ¥é”™/æ‰¾ä¸åˆ°ç±»</td><td>ç¯å¢ƒå˜é‡/JAR è·¯å¾„ä¸ä¸€è‡´</td><td>æ‰§è¡Œæ—¥å¿—ä¸­ ClassNotFound/è„šæœ¬è·¯å¾„</td><td>ä½¿ç”¨ bin/kylin.sh å¹¶ç¡®è®¤ JAVA_HOME/KYLIN_HOMEï¼›å¯¹é½ Kylin ç‰ˆæœ¬ä¸ä¾èµ–</td></tr><tr><td>HFile Load å¤±è´¥æˆ–æƒé™å¼‚å¸¸</td><td>HDFS ç©ºé—´/ACL/è·¯å¾„æƒé™é—®é¢˜</td><td>NameNode/DataNode/HDFS æ—¥å¿—</td><td>æ‰©å®¹æˆ–æ¸…ç†ç©ºé—´ï¼›ä¿® ACL/ç›®å½•æƒé™ï¼›é‡è¯• Load æˆ–é‡æ–°è§¦å‘æ„å»º</td></tr></tbody></table>
<h2 data-id="heading-18">å…¶ä»–ç³»åˆ—</h2>
<h3 data-id="heading-19">ğŸš€ AIç¯‡æŒç»­æ›´æ–°ä¸­ï¼ˆé•¿æœŸæ›´æ–°ï¼‰</h3>
<p><strong>AIç‚¼ä¸¹æ—¥å¿—-29 - å­—èŠ‚è·³åŠ¨ DeerFlow æ·±åº¦ç ”ç©¶æ¡†<em>æ–œä½“æ ·å¼</em>æ¶ ç§æœ‰éƒ¨ç½² æµ‹è¯•ä¸Šæ‰‹ æ¶æ„ç ”ç©¶</strong>ï¼ŒæŒç»­æ‰“é€ å®ç”¨AIå·¥å…·æŒ‡å—ï¼
<strong>AIç ”ç©¶-127 Qwen2.5-Omni æ·±è§£ï¼šThinker-Talker åŒæ ¸ã€TMRoPE ä¸æµå¼è¯­éŸ³</strong></p>
<h3 data-id="heading-20">ğŸ’» Javaç¯‡æŒç»­æ›´æ–°ä¸­ï¼ˆé•¿æœŸæ›´æ–°ï¼‰</h3>
<p><strong>Java-174 FastFDS ä»å•æœºåˆ°åˆ†å¸ƒå¼æ–‡ä»¶å­˜å‚¨ï¼šå®æˆ˜ä¸æ¶æ„å–èˆ</strong>
MyBatis å·²å®Œç»“ï¼ŒSpring å·²å®Œç»“ï¼ŒNginxå·²å®Œç»“ï¼ŒTomcatå·²å®Œç»“ï¼Œåˆ†å¸ƒå¼æœåŠ¡å·²å®Œç»“ï¼ŒDubboå·²å®Œç»“ï¼ŒMySQLå·²å®Œç»“ï¼ŒMongoDBå·²å®Œç»“ï¼ŒNeo4jå·²å®Œç»“ï¼ŒFastDFS æ­£åœ¨æ›´æ–°ï¼Œæ·±å…¥æµ…å‡ºåŠ©ä½ æ‰“ç‰¢åŸºç¡€ï¼</p>
<h3 data-id="heading-21">ğŸ“Š å¤§æ•°æ®æ¿å—å·²å®Œæˆå¤šé¡¹å¹²è´§æ›´æ–°ï¼ˆ300ç¯‡ï¼‰ï¼š</h3>
<p>åŒ…æ‹¬ Hadoopã€Hiveã€Kafkaã€Flinkã€ClickHouseã€Elasticsearch ç­‰äºŒåä½™é¡¹æ ¸å¿ƒç»„ä»¶ï¼Œè¦†ç›–ç¦»çº¿+å®æ—¶æ•°ä»“å…¨æ ˆï¼
<strong>å¤§æ•°æ®-278 Spark MLib - åŸºç¡€ä»‹ç» æœºå™¨å­¦ä¹ ç®—æ³• æ¢¯åº¦æå‡æ ‘ GBDTæ¡ˆä¾‹ è¯¦è§£</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Claude Code CLI UI]]></title>    <link>https://juejin.cn/post/7576894999095836699</link>    <guid>https://juejin.cn/post/7576894999095836699</guid>    <pubDate>2025-11-27T01:24:59.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576894999095836699" data-draft-id="7576888607480463379" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Claude Code CLI UI"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,å…¨æ ˆ,AIGC"/> <meta itemprop="datePublished" content="2025-11-27T01:24:59.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="LeonGao"/> <meta itemprop="url" content="https://juejin.cn/user/3976252950591149"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Claude Code CLI UI
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3976252950591149/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    LeonGao
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-27T01:24:59.000Z" title="Thu Nov 27 2025 01:24:59 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body blockquote&gt;:first-child{margin-top:0}.markdown-body blockquote&gt;:last-child{margin-bottom:0}.markdown-body{overflow:hidden;line-height:1.75;font-size:15px;background-image:linear-gradient(90deg,rgba(72,42,10,.05) 5%,rgba(72,42,10,0) 0),linear-gradient(1turn,rgba(72,42,10,.05) 5%,rgba(72,42,10,0) 0);background-size:20px 20px;background-position:50%;padding-top:0!important}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{position:relative;display:flex;border-bottom:5px solid #6d4e00;line-height:35px;letter-spacing:1px;font-size:25px;padding-left:25px;color:#664900;text-shadow:1px 1px 1px #8a6200;padding-bottom:0}.markdown-body h1:before{content:"";display:flex;position:absolute;left:0;top:3px;bottom:0;margin:auto;width:20px;height:20px;background-size:20px 20px;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAQlBMVEVHcEwlRnqtZBj76q4lRnolRnolRnolRnolRnokRnr/gGtrVUeLXDBKTl+hYSHasW7Ik0zs0JG4dCvUdEE0SW+rYxrLQJfjAAAACnRSTlMA////0H/xUaMi5MCoTwAACfVJREFUeNrtnQl3qygUgJ9GXAqosfL//+pgmgXwXmRNJGdu55xO+6rx8+6I8O9fehmGriN93zdN07bVXdpW/ih/SbpuGP6dXbpOXv7z2i3S9ISck2eQOnAhMHG64VQQbmrAaM4B05GmipaGdB+m6BNQPBXzMYtKR3EPbB/RS5eY4g+lIW9WBqnySCvVMrzRpqqs0g9nwVg5p1KYlHEchRT5bftp+y3n6xlQDjAkABtrKULU9f377ev+4/1/NiT+URRiZRhrcZP6WLa/Gq005BORaqXsdYEuHPIP798ZxSyt6d5sVfxJESRCsvB32lfXwhRjnUBGmKXNoJQe04VIASJqRC/9G7yDsyQMiloYz+0pHYghEoPISAGgpDSvHsCoMwmA0mfjSG5UOsqah2RodkljzMkhZZdamiEDB8+Nsbk9T04yGNljDXGOZZ6u0+Tj9DuvbyNJBuPO0ABtLNPlJtfZJ4CNNCWJoY8gddwxNpm9YrHh9DEkBoeMud4Kma8XRZaYpBJOYvg59U9wOsblMvmGrzQe30dyqFZ1dxPfO0FT5BOdw989THVs4q1TFk+iN4PMu7CaLpd4EJOExNaJLE4d0xQKYpJ0cY5Ozcwwu6WOu2cs9TUYxPB4b4fvLRzTUXbT1HH7y0BnB0j6CAehkPFfFzd1TMsi6sU1/P4VM9NiISHBlYnBMR+kad075sXlmMehj1twnfTUqJH4GJfqIKte7S72emPnHbdiYHIB0e6ATjKq1UoTaFh6wBL2csMIVo9fH/v6QRHAgoxrOHQQxG/36tC1ODmGOeBGBRmXalgcdhDQ1xF1vI6a3DF2d4r7G1enOUgNOshlFq7qUCxrca9ldiCam7ilxRbP6JbOYsYtfLFmkcXEgLG1DN/6eroxHjqh5bh+Uw27e1oWVK7pN+AqwzUcq/UYTPw8nWufLFBHN2zcxLRYlmGPs6rA2Wy0uJe/E7TknbHIa1WH1bLA8DAj3JpxET+FCNCWZ5uNT6jxTPZK/1mXoCBeKlGLRT2lP69XN3XdqqCojKX1ZVda6iD2McjeXSHa0I+AHd2InGAJgjRVM6gOBfygDrarRJnho6eQBbrns+HkcNUCWtYClJa66qFgPbqqZEBTCOAgRqxCOhQBWpZeIC6QBq91hEoI5unTjsMsK9DCFigY9WNn19hgVCrELalrTw6WnYMYzjHhQ2/7G2xTx1HvwpzSe4cVi5ORQQwMW9+72FU5L4gGsa6Yu1RcDeIhs64Qs8izt0vGH+n9/IKaIlYpM2UqkYOrwwq5CgBjWpyGtxaonxe4KaJ3hx+7O0HaqVkxLBPj8FmBVmjNevIUFhUuDmMq5NDV9RwyPe/95IvxAhG7ymqxHGE5sZJL2kPLUhUinkXfrnFwGFwXD99djNLSFh/meXEb2B6Oyiwm0I7BC+OlTlOVPk9K8CIYzu5YHwKDTI6XAo5lz3WEqEXwQRKhh5cyLa6D81P4PXBw984as9YaGXHwx4Ba8rmOldUat/BHt9cQ38AaljnBdCJqs60OcXVDJZP//ZwSWtV9FpHNtgg22KuYx/U2tB5Mcp1TYOiphNhiFjgWeJ3DL2OZpuuUisIoUyzZEJ76I+LmyqWdv8LwnEiwMYczihjxeqtBsuFJSTg2oD1ETQx4v6D1VleSZW1xCwvAfVGWpQ069kgrQksAUW2rReYzsboIjSABuDQX0QJwB9cnZVgWVgE31vrklAJnEmVObykgYCk/VGX5OlpuKb5eiovUAvJ2tMstw0kIkNdpiSA91K6XA6K8CVCyr4PePhTo65q3DyX7OpTbSVk1PB62mhJ9HSpSqtKaESxsFRm0tLBVcvTV+vbBrLRK4hC7aitN9B0ZpX6vNMgjGIt5ZdmMv32KrmprD1afsPd4FEhThK0+WfTl3kpd482AGvG3jQdZK1+t8ireDswhofigRb3fxfI/4jj+xkffUX/1ccxxhEP9qyyBEH9Cx9vhf8TB7eiSpBHjZVSa4whQMJC1TqIR6q8RERtjOr2ID0yx3oYi0oAIvZCPz4eG64p3ObuREeOHUIR3MBVJwq9yll5P7KHdiPBOiOoRa/AjXz21J3k04l+i8OjErj4kaXWQiIVO/EvA+KLRAEnUVomtjPd6SvR3RLoeMT54nKFH1EqtkkEGFaQuTlSQrsxhRiOIt51S/Ho8B11+FUlwRaHnU4utEI38/mgSjRJ8PhWEtN6Z6WcncQOU4efjKoh3zfi7/+DfhPrwOZ9a/iYBiVJJxPlei3CqIDTYEqAPFow5/c71fAdVIwmo4n+cTIGbr2n9NULAE5ifcNNS63hvEOFk0wxYnICBBZ0I9xERBVILF0uggNdxuOkR4S6ngvgPmArzHv4KpMKGQFjQ+Rw6q9dC6R6dgZaJF7RVWIH0BTY9h+fz0ohHOyLuy+He/hN4GUR3/RxcBx2f76izarI9CaXmzRmhNQuSfIgJkva5GzN6HJbhQxCNsDGDSh56plmef6sg2eaXPsYBt5W+H6VE6omG6hOS1w4hiTWiThbJ1YO+RSO1vrpMlomf6nhQGz0m7qT6W04XOUHyzhZ4rkG+0hxL66oDW9mnPWyL3TMmssxyQUwr01CHX7b2OvUIaqS48TnMtAoEQTQixJeAlDfSiGmk/l8jpwIpTyFqOfeNIHWBooC036ERtUQp2tm/CKT5jjySbxTlvUVj2yhjvyWDVL3yfKRojXwLSEWUp7q0PBAKPp7m5YGoT3WH7wAZ1BeOywNZv3Gak/LIqriwxbQ5jaTcsEW1eb+FvoWo+zr5V/IUOvNtsapU2zJXSyj0xVB13sPfq0kkZA7dubIIKXIlJ8Cy7u+BN22RVcr+peOuxHdcBbA04FAVmEoEtO5vX55K4KVZS1QJvBBzU1rgUl8JapBNYIowLoZtD9NWRTWKqqe36L48BSz8QPH9epqqIDehlh2UuqocEmrdV7AvhuRoM74m80yeDIEX3ppreNN235FxV58DNjhswn5K8zK21+5ctjut6NmUIoy9tVvitnHr2VDM3ahtW8KQ/Vbsp9GGiWHfk8skyTSFz9/HdxhHe4uR/RxX/mG1SGXwypcDJNmCMfucZ/C1CuCQUbiBUDYbe7tiRkZX8GIat50d+wqR1fdN7ygGzrHrcN4kGFHK02cil5M6INgQVsvnNz77T5PqUFYJJInYmIBplJfP5On4eiOwYfhuCD44oLyYVs43rI1rk3H7usttzq8Qo3j84vavN9mOkAeuq8dHEd9NtCVKX51Oen+MM6IEYvz5StOehKLpIjD+nKU5AQWJpLizdB+1sb5LQvFRxbSJVGHmSdK/0WWaPguEYmcSJ68aWkK6rAw6jwSSCmrTWVHT96R7HwHANEgqybVJL+E2vE2q7Uu91Gr73SbbNUvZDtiOlCeIv4r/AI+0XUwz1lvcAAAAAElFTkSuQmCC")}.markdown-body h2{position:relative;padding:0 0 0 20px;font-size:20px;font-weight:700;color:#614500}.markdown-body h2:before{content:"";position:absolute;top:3px;bottom:0;left:0;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAQlBMVEVHcEwlRnqtZBj76q4lRnolRnolRnolRnolRnokRnr/gGtrVUeLXDBKTl+hYSHasW7Ik0zs0JG4dCvUdEE0SW+rYxrLQJfjAAAACnRSTlMA////0H/xUaMi5MCoTwAACfVJREFUeNrtnQl3qygUgJ9GXAqosfL//+pgmgXwXmRNJGdu55xO+6rx8+6I8O9fehmGriN93zdN07bVXdpW/ih/SbpuGP6dXbpOXv7z2i3S9ISck2eQOnAhMHG64VQQbmrAaM4B05GmipaGdB+m6BNQPBXzMYtKR3EPbB/RS5eY4g+lIW9WBqnySCvVMrzRpqqs0g9nwVg5p1KYlHEchRT5bftp+y3n6xlQDjAkABtrKULU9f377ev+4/1/NiT+URRiZRhrcZP6WLa/Gq005BORaqXsdYEuHPIP798ZxSyt6d5sVfxJESRCsvB32lfXwhRjnUBGmKXNoJQe04VIASJqRC/9G7yDsyQMiloYz+0pHYghEoPISAGgpDSvHsCoMwmA0mfjSG5UOsqah2RodkljzMkhZZdamiEDB8+Nsbk9T04yGNljDXGOZZ6u0+Tj9DuvbyNJBuPO0ABtLNPlJtfZJ4CNNCWJoY8gddwxNpm9YrHh9DEkBoeMud4Kma8XRZaYpBJOYvg59U9wOsblMvmGrzQe30dyqFZ1dxPfO0FT5BOdw989THVs4q1TFk+iN4PMu7CaLpd4EJOExNaJLE4d0xQKYpJ0cY5Ozcwwu6WOu2cs9TUYxPB4b4fvLRzTUXbT1HH7y0BnB0j6CAehkPFfFzd1TMsi6sU1/P4VM9NiISHBlYnBMR+kad075sXlmMehj1twnfTUqJH4GJfqIKte7S72emPnHbdiYHIB0e6ATjKq1UoTaFh6wBL2csMIVo9fH/v6QRHAgoxrOHQQxG/36tC1ODmGOeBGBRmXalgcdhDQ1xF1vI6a3DF2d4r7G1enOUgNOshlFq7qUCxrca9ldiCam7ilxRbP6JbOYsYtfLFmkcXEgLG1DN/6eroxHjqh5bh+Uw27e1oWVK7pN+AqwzUcq/UYTPw8nWufLFBHN2zcxLRYlmGPs6rA2Wy0uJe/E7TknbHIa1WH1bLA8DAj3JpxET+FCNCWZ5uNT6jxTPZK/1mXoCBeKlGLRT2lP69XN3XdqqCojKX1ZVda6iD2McjeXSHa0I+AHd2InGAJgjRVM6gOBfygDrarRJnho6eQBbrns+HkcNUCWtYClJa66qFgPbqqZEBTCOAgRqxCOhQBWpZeIC6QBq91hEoI5unTjsMsK9DCFigY9WNn19hgVCrELalrTw6WnYMYzjHhQ2/7G2xTx1HvwpzSe4cVi5ORQQwMW9+72FU5L4gGsa6Yu1RcDeIhs64Qs8izt0vGH+n9/IKaIlYpM2UqkYOrwwq5CgBjWpyGtxaonxe4KaJ3hx+7O0HaqVkxLBPj8FmBVmjNevIUFhUuDmMq5NDV9RwyPe/95IvxAhG7ymqxHGE5sZJL2kPLUhUinkXfrnFwGFwXD99djNLSFh/meXEb2B6Oyiwm0I7BC+OlTlOVPk9K8CIYzu5YHwKDTI6XAo5lz3WEqEXwQRKhh5cyLa6D81P4PXBw984as9YaGXHwx4Ba8rmOldUat/BHt9cQ38AaljnBdCJqs60OcXVDJZP//ZwSWtV9FpHNtgg22KuYx/U2tB5Mcp1TYOiphNhiFjgWeJ3DL2OZpuuUisIoUyzZEJ76I+LmyqWdv8LwnEiwMYczihjxeqtBsuFJSTg2oD1ETQx4v6D1VleSZW1xCwvAfVGWpQ069kgrQksAUW2rReYzsboIjSABuDQX0QJwB9cnZVgWVgE31vrklAJnEmVObykgYCk/VGX5OlpuKb5eiovUAvJ2tMstw0kIkNdpiSA91K6XA6K8CVCyr4PePhTo65q3DyX7OpTbSVk1PB62mhJ9HSpSqtKaESxsFRm0tLBVcvTV+vbBrLRK4hC7aitN9B0ZpX6vNMgjGIt5ZdmMv32KrmprD1afsPd4FEhThK0+WfTl3kpd482AGvG3jQdZK1+t8ireDswhofigRb3fxfI/4jj+xkffUX/1ccxxhEP9qyyBEH9Cx9vhf8TB7eiSpBHjZVSa4whQMJC1TqIR6q8RERtjOr2ID0yx3oYi0oAIvZCPz4eG64p3ObuREeOHUIR3MBVJwq9yll5P7KHdiPBOiOoRa/AjXz21J3k04l+i8OjErj4kaXWQiIVO/EvA+KLRAEnUVomtjPd6SvR3RLoeMT54nKFH1EqtkkEGFaQuTlSQrsxhRiOIt51S/Ho8B11+FUlwRaHnU4utEI38/mgSjRJ8PhWEtN6Z6WcncQOU4efjKoh3zfi7/+DfhPrwOZ9a/iYBiVJJxPlei3CqIDTYEqAPFow5/c71fAdVIwmo4n+cTIGbr2n9NULAE5ifcNNS63hvEOFk0wxYnICBBZ0I9xERBVILF0uggNdxuOkR4S6ngvgPmArzHv4KpMKGQFjQ+Rw6q9dC6R6dgZaJF7RVWIH0BTY9h+fz0ohHOyLuy+He/hN4GUR3/RxcBx2f76izarI9CaXmzRmhNQuSfIgJkva5GzN6HJbhQxCNsDGDSh56plmef6sg2eaXPsYBt5W+H6VE6omG6hOS1w4hiTWiThbJ1YO+RSO1vrpMlomf6nhQGz0m7qT6W04XOUHyzhZ4rkG+0hxL66oDW9mnPWyL3TMmssxyQUwr01CHX7b2OvUIaqS48TnMtAoEQTQixJeAlDfSiGmk/l8jpwIpTyFqOfeNIHWBooC036ERtUQp2tm/CKT5jjySbxTlvUVj2yhjvyWDVL3yfKRojXwLSEWUp7q0PBAKPp7m5YGoT3WH7wAZ1BeOywNZv3Gak/LIqriwxbQ5jaTcsEW1eb+FvoWo+zr5V/IUOvNtsapU2zJXSyj0xVB13sPfq0kkZA7dubIIKXIlJ8Cy7u+BN22RVcr+peOuxHdcBbA04FAVmEoEtO5vX55K4KVZS1QJvBBzU1rgUl8JapBNYIowLoZtD9NWRTWKqqe36L48BSz8QPH9epqqIDehlh2UuqocEmrdV7AvhuRoM74m80yeDIEX3ppreNN235FxV58DNjhswn5K8zK21+5ctjut6NmUIoy9tVvitnHr2VDM3ahtW8KQ/Vbsp9GGiWHfk8skyTSFz9/HdxhHe4uR/RxX/mG1SGXwypcDJNmCMfucZ/C1CuCQUbiBUDYbe7tiRkZX8GIat50d+wqR1fdN7ygGzrHrcN4kGFHK02cil5M6INgQVsvnNz77T5PqUFYJJInYmIBplJfP5On4eiOwYfhuCD44oLyYVs43rI1rk3H7usttzq8Qo3j84vavN9mOkAeuq8dHEd9NtCVKX51Oen+MM6IEYvz5StOehKLpIjD+nKU5AQWJpLizdB+1sb5LQvFRxbSJVGHmSdK/0WWaPguEYmcSJ68aWkK6rAw6jwSSCmrTWVHT96R7HwHANEgqybVJL+E2vE2q7Uu91Gr73SbbNUvZDtiOlCeIv4r/AI+0XUwz1lvcAAAAAElFTkSuQmCC");background-size:100% 100%;background-repeat:no-repeat;width:15px;height:15px;margin:auto}.markdown-body h3{width:100%;text-align:left;margin:20px 10px 0 0;font-size:18px;font-weight:700;display:inline-block;padding-left:10px;padding-bottom:0;border-left:5px solid #8f6600;color:#614500}.markdown-body h4,.markdown-body h5,.markdown-body h6{font-weight:700;color:#a37400}.markdown-body h4{font-size:17px}.markdown-body h5,.markdown-body h6{display:flex;align-items:center}.markdown-body h5:after,.markdown-body h6:after{display:inline-block;border:2px solid #fff6e0;color:rgba(189,134,0,.5);border-radius:50%;text-align:center;margin-left:5px}.markdown-body h5{font-size:14px}.markdown-body h5:after{content:"5";width:15px;height:15px;line-height:15px;font-size:13px}.markdown-body h6{font-size:12px}.markdown-body h6:after{content:"6";width:13px;height:13px;line-height:13px;font-size:12px}.markdown-body p{color:#412c0c;letter-spacing:1px;font-weight:400;margin-bottom:16px}.markdown-body img{max-width:100%;display:block;margin:auto}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#755300;font-weight:400;border-bottom:1px solid #755300;font-weight:bolder;text-decoration:none}.markdown-body table{width:100%!important;margin:0;font-size:12px;width:auto;max-width:100%;overflow:auto;border-collapse:collapse;border-spacing:0}.markdown-body table img{box-shadow:none}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body thead tr th{text-align:center}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px;box-sizing:border-box;border:1px solid rgba(72,42,10,.1)}.markdown-body blockquote{position:relative;text-size-adjust:100%;line-height:25px;font-weight:400;border-radius:10px;font-style:normal;text-align:left;box-sizing:inherit;border:1px solid #ffd87a;background-color:rgba(189,134,0,.5);margin:20px 0;padding:20px}.markdown-body blockquote p{color:#fff6e0;letter-spacing:2px;margin:0}.markdown-body blockquote:after,.markdown-body blockquote:before{position:absolute;color:#cc9100;font-size:34px;font-weight:700}.markdown-body blockquote:before{content:"â";top:8px;left:5px}.markdown-body blockquote:after{content:"â";right:5px;bottom:-5px}.markdown-body strong{color:#c28a00;font-weight:bolder}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{color:#c28a00}.markdown-body em strong{font-style:normal;color:#c28a00;background-color:#8a6200}.markdown-body s{color:#c28a00}.markdown-body hr{border-top:1px solid #805b00}.markdown-body code,.markdown-body li code,.markdown-body p code{color:#996d00;background-color:rgba(130,98,0,.3)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit;color:#858585;font-family:bold;letter-spacing:1px}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection,.markdown-body img::selection{color:rgba(189,134,0,.5);background-color:#fff}.markdown-body a::selection,.markdown-body b::selection,.markdown-body del::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:transparent}.markdown-body pre&gt;code::selection{background-color:rgba(189,134,0,.5)}.markdown-body .math .math-inline::selection,.markdown-body blockquote::selection,.markdown-body ol::selection,.markdown-body p::selection,.markdown-body strong::selection,.markdown-body table::selection,.markdown-body ul::selection{background-color:rgba(189,134,0,.5)}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ğŸ‘‰ åˆ©ç”¨å‘½ä»¤è¡Œï¼ˆCLIï¼‰ç•Œé¢æˆ– TUIï¼ˆText-based User Interfaceï¼‰ ä¸ Anthropic çš„ Claude Code æ¨¡å‹è¿›è¡Œäº¤äº’çš„ä¸€ä¸ªå¼€å‘è€…å·¥å…·ã€‚</p>
<hr/>
<h2 data-id="heading-0">ğŸ§© Claude Code CLI UI å…¨è§£æ</h2>
<p><em>â€”â€”å½“å‘½ä»¤è¡Œé‡ä¸Š AIï¼Œç»ˆç«¯ä¹Ÿæœ‰äº†çµé­‚</em></p>
<hr/>
<h3 data-id="heading-1">ğŸŒ‹ ä¸€ã€èƒŒæ™¯ï¼šå‘½ä»¤è¡Œçš„æµªæ¼«ä¸ç†æ™º</h3>
<p>åœ¨å›¾å½¢åŒ– IDE è¿˜æ²¡è¯ç”Ÿä¹‹å‰ï¼Œ<br/>
ç¨‹åºå‘˜å’Œæœºå™¨çš„äº¤æµå®Œå…¨é æ–‡å­—ä¸å‘½ä»¤ã€‚</p>
<p>åæ¥äººç±»é€ å‡ºäº† VSCodeã€Web IDEã€Notebookâ€¦â€¦<br/>
ä½†ä¾æ—§æœ‰äººåçˆ±é‚£é»‘åº•ç»¿å­—çš„ä¸–ç•Œã€‚<br/>
å› ä¸ºåœ¨é‚£å„¿ï¼Œ<strong>ä½ å’Œ AI ä¹‹é—´ï¼Œåªæœ‰å…‰æ ‡åœ¨é—ªçƒã€‚</strong></p>
<p>äºæ˜¯å°±è¡ç”Ÿå‡ºäº† â€œClaude Code CLI UIâ€ è¿™æ ·çš„å·¥å…·ï¼Œ<br/>
è®©ä½ èƒ½åœ¨å‘½ä»¤è¡Œä¸­ä¼˜é›…åœ°ä¸ Claude æ¨¡å‹å¯¹è¯ç¼–ç ã€‚</p>
<hr/>
<h3 data-id="heading-2">âš™ï¸ äºŒã€Claude Code CLI æ˜¯ä»€ä¹ˆ</h3>
<p>ç®€å•æ¥è¯´ï¼Œå®ƒæ˜¯ä¸€ä¸ªï¼š</p>
<blockquote>
<p><strong>â€œåœ¨ç»ˆç«¯ä¸­ä¸ Claude AI æ¨¡å‹äº¤è°ˆã€ç¼–å†™ã€è°ƒè¯•ã€æ‰§è¡Œä»£ç â€çš„å‘½ä»¤è¡Œå®¢æˆ·ç«¯ã€‚</strong></p>
</blockquote>
<p>é€šå¸¸å¯ä»¥ç»“åˆ Anthropic çš„ API ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥é€šè¿‡æœ¬åœ°ä»£ç†è¿æ¥ã€‚</p>
<p>CLI ç‰ˆæœ¬çš„å¥½å¤„ï¼š</p>
<ul>
<li>ğŸš€ æ›´å¿«ï¼šæ—  GUI æ¸²æŸ“å¼€é”€</li>
<li>ğŸ§  æ›´ä¸“æ³¨ï¼šåªçœ‹ç»ˆç«¯ï¼Œä¸åˆ†å¿ƒ</li>
<li>âš™ï¸ æ›´è‡ªåŠ¨åŒ–ï¼šè„šæœ¬åŒ–é›†æˆåˆ° CI/CD æµç¨‹ä¸­</li>
</ul>
<hr/>
<h3 data-id="heading-3">ğŸ”¬ ä¸‰ã€åº•å±‚å·¥ä½œæœºåˆ¶</h3>
<p>ä»æ¶æ„è§’åº¦çœ‹ï¼Œå®ƒå¤§è‡´åˆ†ä¸ºä¸‰ä¸ªæ¨¡å—ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       User Terminal     â”‚  â†  ç”¨æˆ·è¾“å…¥å‘½ä»¤/é—®é¢˜
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚       CLI Interface     â”‚  â†  è§£æå‘½ä»¤å‚æ•° (Node.js / Python)
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   Claude API Connector  â”‚  â†  è°ƒç”¨ Anthropic SDK / <span class="hljs-attribute">REST</span> API
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚        Output Render    â”‚  â†  æ§åˆ¶å°æµå¼è¾“å‡ºï¼Œå«è¯­æ³•é«˜äº®ã€ä»£ç å—
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<p>æ•°æ®æµå°±åƒï¼š</p>
<blockquote>
<p>ç”¨æˆ·è¾“å…¥ â†’ CLI æ‰“åŒ… â†’ å‘é€ API è¯·æ±‚ â†’ Claude åˆ†æå¹¶ç”Ÿæˆ â†’ æ§åˆ¶å°æµå¼æ¸²æŸ“ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-4">ğŸ’¡ å››ã€å…¸å‹äº¤äº’ä½“éªŒ</h3>
<p>ä¾‹å¦‚å‘½ä»¤è¡Œè¾“å…¥å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">claude code <span class="hljs-string">"ç”¨JavaScriptå†™ä¸ªæ–­ç‚¹ç»­ä¼ ç¤ºä¾‹"</span>
</code></pre>
<p>CLI å·¥å…·å°±ä¼šï¼š</p>
<ol>
<li>å°† prompt å°è£…ä¸ºè¯·æ±‚ï¼›</li>
<li>è°ƒç”¨ Claude çš„ <code>/messages</code> æ¥å£ï¼›</li>
<li>æµå¼è¿”å›è¾“å‡ºï¼›</li>
<li>åœ¨ç»ˆç«¯å®æ—¶æ‰“å°å¸¦è¯­æ³•é«˜äº®çš„ç»“æœã€‚</li>
</ol>
<hr/>
<h4 data-id="heading-5">ğŸ¨ UI æ ·å¼å±•ç¤ºï¼ˆNode.js + CLI æ¸²æŸ“ä¾‹å­ï¼‰</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-meta">#!/usr/bin/env node</span>
<span class="hljs-keyword">import</span> readline <span class="hljs-keyword">from</span> <span class="hljs-string">'readline'</span>;
<span class="hljs-keyword">import</span> fetch <span class="hljs-keyword">from</span> <span class="hljs-string">'node-fetch'</span>; <span class="hljs-comment">// éœ€ node &gt; 18 æˆ– polyfill</span>

<span class="hljs-keyword">const</span> rl = readline.<span class="hljs-title function_">createInterface</span>({
  <span class="hljs-attr">input</span>: process.<span class="hljs-property">stdin</span>,
  <span class="hljs-attr">output</span>: process.<span class="hljs-property">stdout</span>,
  <span class="hljs-attr">prompt</span>: <span class="hljs-string">'\x1b[36mClaude&gt; \x1b[0m'</span>
});

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">askClaude</span>(<span class="hljs-params">promptText</span>) {
  <span class="hljs-keyword">const</span> resp = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'https://api.anthropic.com/v1/messages'</span>, {
    <span class="hljs-attr">method</span>: <span class="hljs-string">'POST'</span>,
    <span class="hljs-attr">headers</span>: {
      <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json'</span>,
      <span class="hljs-string">'x-api-key'</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">CLAUDE_API_KEY</span>
    },
    <span class="hljs-attr">body</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({
      <span class="hljs-attr">model</span>: <span class="hljs-string">'claude-3.5-sonnet'</span>,
      <span class="hljs-attr">max_tokens</span>: <span class="hljs-number">500</span>,
      <span class="hljs-attr">messages</span>: [{ <span class="hljs-attr">role</span>: <span class="hljs-string">'user'</span>, <span class="hljs-attr">content</span>: promptText }]
    })
  });

  <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> resp.<span class="hljs-title function_">json</span>();
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'\n\x1b[33mAI:\x1b[0m'</span>, data.<span class="hljs-property">content</span>[<span class="hljs-number">0</span>].<span class="hljs-property">text</span>);
}

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ğŸ¤– æ¬¢è¿ä½¿ç”¨ Claude Code CLIï¼Œå¼€å§‹ä½ çš„ä»£ç å¯¹è¯~\n'</span>);
rl.<span class="hljs-title function_">prompt</span>();

rl.<span class="hljs-title function_">on</span>(<span class="hljs-string">'line'</span>, <span class="hljs-keyword">async</span> (line) =&gt; {
  <span class="hljs-keyword">if</span> (line.<span class="hljs-title function_">trim</span>().<span class="hljs-title function_">toLowerCase</span>() === <span class="hljs-string">'exit'</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ğŸ‘‹ å†è§ï¼Œä»£ç ä¸æ­¢äºç»ˆç«¯ã€‚'</span>);
    process.<span class="hljs-title function_">exit</span>(<span class="hljs-number">0</span>);
  }
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">askClaude</span>(line.<span class="hljs-title function_">trim</span>());
  rl.<span class="hljs-title function_">prompt</span>();
});
</code></pre>
<blockquote>
<p>ğŸ§© <strong>è§£è¯»</strong></p>
<ul>
<li>æ§åˆ¶å° prompt å¸¦é¢œè‰²ï¼ˆä½¿ç”¨ ANSI è½¬ä¹‰ç¬¦ï¼‰</li>
<li>é€šè¿‡ Anthropic API å‘èµ·äº¤äº’</li>
<li>è‡ªå¸¦å¯¹è¯è®°å¿†å¾ªç¯</li>
<li>è‡ªåŠ¨æ”¯æŒ â€œæµå¼ä»£ç è¾“å‡ºâ€ æ•ˆæœ</li>
</ul>
</blockquote>
<hr/>
<h3 data-id="heading-6">ğŸ§™â€â™‚ï¸ äº”ã€CLI UI çš„é­”æ³•å‡çº§</h3>
<p>å¦‚æœä½ æƒ³è®©å®ƒæ›´â€œåƒ UIâ€ï¼Œå¯ä»¥ç”¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fvadimdemedes%2Fink" target="_blank" title="https://github.com/vadimdemedes/ink" ref="nofollow noopener noreferrer">Ink</a> æˆ– <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fchjj%2Fblessed" target="_blank" title="https://github.com/chjj/blessed" ref="nofollow noopener noreferrer">Blessed</a> ç­‰åº“ç”ŸæˆåŠ¨æ€ TUIï¼š</p>
<ul>
<li><strong>å¤šçª—å£å¸ƒå±€</strong>ï¼šå·¦ä¾§æ˜¾ç¤º prompt å†å²ï¼Œå³ä¾§æ˜¾ç¤ºè¾“å‡ºï¼›</li>
<li><strong>æµå¼ä»£ç æ¸²æŸ“</strong>ï¼šå­—ç¬¦é€å­— appearingï¼ˆåˆ¶é€ å†™ä»£ç çš„å¿«æ„Ÿï¼‰ï¼›</li>
<li><strong>é”®ç›˜å¿«æ·é”®æ”¯æŒ</strong>ï¼š<code>Ctrl + R</code> é‡æ–°ç”Ÿæˆã€<code>Ctrl + S</code> ä¿å­˜è¾“å‡ºã€‚</li>
</ul>
<p>è¿™æ ·ä¸€æ¥ï¼Œä½ å°±èƒ½åƒåœ¨ç»ˆç«¯â€œç©æ¸¸æˆâ€ä¸€æ ·ä¸ Claude ç¼–ç¨‹äº¤äº’ã€‚</p>
<hr/>
<h3 data-id="heading-7">ğŸ§­ å…­ã€å»¶å±•åœºæ™¯</h3>






























<table><thead><tr><th>åœºæ™¯</th><th>æè¿°</th><th>å·¥å…·æ•´åˆ</th></tr></thead><tbody><tr><td>ğŸ§© ä»£ç åŠ©æ‰‹</td><td>å®æ—¶ç”Ÿæˆä¸è§£é‡Šä»£ç </td><td>CLI + Claude</td></tr><tr><td>ğŸ”¨ æ„å»ºè„šæœ¬</td><td>è®© Claude å†™ Shell / Terraform è„šæœ¬</td><td>CLI + Shell Integration</td></tr><tr><td>ğŸ“š å­¦ä¹ æ¨¡å¼</td><td>CLI è‡ªåŠ¨ä¿å­˜èŠå¤©ä¸Šä¸‹æ–‡ä¸º Markdown æ•™ç¨‹</td><td>Claude + File Logger</td></tr><tr><td>âš¡ ç¦»çº¿å¢å¼º</td><td>é…åˆæœ¬åœ°ç¼“å­˜+ç»­ä¼ æœºåˆ¶</td><td>Redis / SQLite æ–­ç‚¹ç»­ä¼ </td></tr></tbody></table>
<hr/>
<h3 data-id="heading-8">ğŸ“œ ä¸ƒã€æ€»ç»“</h3>

























<table><thead><tr><th>ç‰¹æ€§</th><th>æ„ä¹‰</th></tr></thead><tbody><tr><td>ğŸ’¡ ç®€æ´</td><td>æ— éœ€å¤æ‚ç•Œé¢ï¼Œä¸åˆ†å¿ƒ</td></tr><tr><td>âš™ï¸ å¯è‡ªåŠ¨åŒ–</td><td>å¯åµŒå…¥ä»»ä½•å¼€å‘æµç¨‹</td></tr><tr><td>ğŸ” å¯å¤ç”¨æ€§</td><td>æ”¯æŒä¸Šä¸‹æ–‡è®°å¿†å’Œæ–‡ä»¶äº¤äº’</td></tr><tr><td>ğŸ¨ ç¾è§‚å¯å®šåˆ¶</td><td>æ”¯æŒå½©è‰²æµå¼ UI ä¸å‘½ä»¤çƒ­é”®</td></tr></tbody></table></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä½ çš„IDEAè¿˜ç¼ºä»€ä¹ˆï¼Ÿæˆ‘ç¦»ä¸å¼€çš„è¿™ä¸¤æ¬¾æ•ˆç‡æ’ä»¶æ¨è]]></title>    <link>https://juejin.cn/post/7576863819982749705</link>    <guid>https://juejin.cn/post/7576863819982749705</guid>    <pubDate>2025-11-27T01:36:47.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576863819982749705" data-draft-id="7576844295434928137" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä½ çš„IDEAè¿˜ç¼ºä»€ä¹ˆï¼Ÿæˆ‘ç¦»ä¸å¼€çš„è¿™ä¸¤æ¬¾æ•ˆç‡æ’ä»¶æ¨è"/> <meta itemprop="keywords" content="åç«¯,Java,ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2025-11-27T01:36:47.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="SimonKing"/> <meta itemprop="url" content="https://juejin.cn/user/4001878056904584"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä½ çš„IDEAè¿˜ç¼ºä»€ä¹ˆï¼Ÿæˆ‘ç¦»ä¸å¼€çš„è¿™ä¸¤æ¬¾æ•ˆç‡æ’ä»¶æ¨è
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4001878056904584/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    SimonKing
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-27T01:36:47.000Z" title="Thu Nov 27 2025 01:36:47 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>å…³æ³¨æˆ‘çš„å…¬ä¼—å·ï¼šã€ç¼–ç¨‹æœèŠ±å¤•æ‹¾ã€‘ï¼Œå¯è·å–é¦–å‘å†…å®¹ã€‚</p>
</blockquote>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8e72adc7f0124c399ada3384a4bd80e0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2ltb25LaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764812206&amp;x-signature=LTWq96KYjBUA7tmupAcJfm5bOQE%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-0">01 å¼•è¨€</h2>
<p>åœ¨æ—¥å¸¸Javaå¼€å‘ä¸­ï¼Œä½ æ˜¯å¦æ›¾ä¸ºå¯»æ‰¾ä¸€ä¸ªMavenä¾èµ–è€Œåå¤åˆ‡æ¢æµè§ˆå™¨ï¼Ÿæ˜¯å¦æ›¾ä¸ºå­—æ®µçš„å‘½åè€Œè€—è´¹å¤§é‡æ—¶é—´ï¼Ÿ</p>
<p>ä»Šå¤©ï¼Œå°±ä¸ºå¤§å®¶ä»‹ç»ä¸¤æ¬¾èƒ½å½»åº•è§£å†³è¿™äº›ç—›ç‚¹çš„IDEAç¥å™¨â€”â€”Maven Searchä¸Easy  Namingã€‚å®ƒä»¬èƒ½ä»â€œä¾èµ–ç®¡ç†â€å’Œâ€œå‘½åç”Ÿæˆâ€ä¸¤ä¸ªç»´åº¦ï¼Œæå¤§æå‡ä½ çš„å¼€å‘æ•ˆç‡ä¸ä»£ç è§„èŒƒæ€§ï¼Œè®©ä½ ä»æ­¤å‘Šåˆ«é‡å¤åŠ³åŠ¨ï¼Œå°†ç²¾åŠ›ä¸“æ³¨äºæ ¸å¿ƒä¸šåŠ¡é€»è¾‘ã€‚</p>
<h2 data-id="heading-1">02 Maven Search</h2>
<h3 data-id="heading-2">2.1 ç®€ä»‹</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c3ff48bc6b7a47438978eb33556d9265~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2ltb25LaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764812206&amp;x-signature=8JDGspFCgud2ACe7Ts3HV5NLnnc%3D" alt="" loading="lazy"/></p>
<p>Maven Search æ˜¯ä¸€æ¬¾ä¸“é—¨ç”¨äºåœ¨ IDEA å†…éƒ¨å¿«é€Ÿæœç´¢å’Œæ·»åŠ  Maven ä¾èµ–çš„æ’ä»¶ã€‚å®ƒæ¶ˆé™¤äº†å¼€å‘è€…åœ¨â€œé¡¹ç›® -&gt; æµè§ˆå™¨ -&gt; æœç´¢ -&gt; å¤åˆ¶ -&gt; ç²˜è´´â€è¿™ä¸ªç¹çæµç¨‹ä¸­çš„å¤šä¸ªæ­¥éª¤ï¼Œè®©ä½ æ— éœ€ç¦»å¼€ <code>IDE</code> å°±èƒ½å®Œæˆä¾èµ–æŸ¥æ‰¾å’Œæ·»åŠ ã€‚</p>
<p><code>Maven Search</code>å†…ç½®çš„è¿æ¥ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmvn.coderead.cn%2F" target="_blank" title="https://mvn.coderead.cn/" ref="nofollow noopener noreferrer">mvn.coderead.cn/</a></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/95a2281537644fb3a1d9bdfa9671806a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2ltb25LaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764812206&amp;x-signature=jw9GbpjejsQd32crdSk6nayqh9k%3D" alt="" loading="lazy"/></p>
<p>ä¸­å¤®ä»“åº“åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fcentral.sonatype.com%2F" target="_blank" title="https://central.sonatype.com/" ref="nofollow noopener noreferrer">central.sonatype.com/</a></p>
<h3 data-id="heading-3">2.2 ä½¿ç”¨</h3>
<p>ç›´æ¥åœ¨ IDEA çš„æ’ä»¶å¸‚åœºï¼ˆ<code>Plugins</code>ï¼‰ä¸­æœç´¢ â€œMaven Searchâ€ å¹¶å®‰è£…å³å¯ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3edddba2f7f54ee3b4d6604484989e34~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2ltb25LaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764812206&amp;x-signature=vB0oC4%2FyxJQLzvbaMKHJ14%2FfyxY%3D" alt="" loading="lazy"/></p>
<p><strong>å·¥å…·çª—å£ä½¿ç”¨</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/122f527849f64c07bbd04f02d1423a5e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2ltb25LaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764812206&amp;x-signature=qwTgq29RV7qO8Kpy4WG3DdXpS%2Bo%3D" alt="" loading="lazy"/></p>
<p><strong>å¿«æ·é”®</strong></p>
<p><code>Ctrl+Shift+M</code>å³å¯å‡ºç°æœç´¢çª—å£ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/55e1457563154712a1d64e14fac17c09~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2ltb25LaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764812206&amp;x-signature=QuWsBkYKMjzXxdQMh5i1Nh8hM1M%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-4">03 Easy Naming</h2>
<h3 data-id="heading-5">3.1 ç®€ä»‹</h3>
<p>å®˜ç½‘åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.icanshock.fun%2F" target="_blank" title="https://www.icanshock.fun/" ref="nofollow noopener noreferrer">www.icanshock.fun/</a></p>
<p><code>Easy Naming</code>æ˜¯ä¸€æ¬¾ä¸“ä¸ºå¼€å‘è€…è®¾è®¡çš„æ™ºèƒ½å˜é‡å‘½åå·¥å…·ã€‚å‘Šåˆ«å‘½åçƒ¦æ¼,ä¸€é”®ç”Ÿæˆé©¼å³°ã€ä¸‹åˆ’çº¿ç­‰å¤šç§é£æ ¼çš„è§„èŒƒå‘½å,æå‡ä»£ç å¯è¯»æ€§ä¸å›¢é˜Ÿåä½œæ•ˆç‡ã€‚å®ƒçš„æ ¸å¿ƒåŠŸèƒ½éå¸¸ç®€å•çº¯ç²¹ï¼šå¿«é€Ÿã€å‡†ç¡®åœ°åœ¨ä¸åŒå‘½åé£æ ¼ï¼ˆå¦‚è›‡å½¢å‘½åã€é©¼å³°å‘½åï¼‰ä¹‹é—´è¿›è¡Œè½¬æ¢ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/19f42cc1e4a344d6bc92ce28a979be8b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2ltb25LaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764812206&amp;x-signature=nIDZSonBPy0kXjVc12fq01H17T0%3D" alt="" loading="lazy"/></p>
<p>åº•å±‚é€šè¿‡æ¥å…¥å¤§æ¨¡å‹ï¼ŒåŒºåˆ«äºä¼ ç»Ÿçš„æœºå™¨ç¿»è¯‘ã€‚è¿˜å¯ä»¥é…ç½®å±äºè‡ªå·±çš„å¤§æ¨¡å‹ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a1414fb5514c4245b77a856b51d30622~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2ltb25LaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764812206&amp;x-signature=7iS9iQh6l1DwMWS6yZwv3sM5OMc%3D" alt="" loading="lazy"/></p>
<p>åŒæ—¶æä¾›IDEAæ’ä»¶ï¼Œç®€ç›´æ˜¯å˜é‡å‘½åå›°éš¾ç—‡ç¨‹åºå‘˜çš„ç¦éŸ³ã€‚</p>
<p>æ’ä»¶åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fplugins.jetbrains.com%2Fplugin%2F27609-easy-naming" target="_blank" title="https://plugins.jetbrains.com/plugin/27609-easy-naming" ref="nofollow noopener noreferrer">plugins.jetbrains.com/plugin/2760â€¦</a></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7f49c778b1d745b189e3b4a1805e94cb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2ltb25LaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764812206&amp;x-signature=S9%2Bhv84Ldct%2BBzBPBvXr7rXItqc%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-6">3.2 ä½¿ç”¨</h3>
<p>ç›´æ¥åœ¨æ’ä»¶å¸‚åœºæœç´¢<code>Easy Naming</code>å³å¯ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/602ec8f797414056a52a4c244d2e6847~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2ltb25LaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764812206&amp;x-signature=t7Eo0lEBa%2FwhmP7A8SNZVWED7g8%3D" alt="" loading="lazy"/></p>
<p>å®‰è£…å®Œä¹‹åï¼Œå°±ä¼šå‡ºç°<code>var</code>è¿™æ ·çš„å›¾æ ‡ã€‚ç‚¹å¼€ä¹‹åï¼Œå°±å¯ä»¥è¾“å…¥å˜é‡ï¼Œ<code>å›è½¦</code>å³å¯æŸ¥çœ‹ç»“æœã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0718c1aca9b540cb9af2715e7635f920~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2ltb25LaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764812206&amp;x-signature=YwuRcX4FnQSRM981HKbLqCzciP4%3D" alt="" loading="lazy"/></p>
<p>é€šè¿‡ç‚¹å‡»<code>æ ¼å¼è½¬åŒ–</code>å¯ä»¥åˆ‡æ¢ä¸åŒçš„å‘½åé£æ ¼ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a83c4cd261e047f192722527c0e27de9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2ltb25LaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764812206&amp;x-signature=XXDqOUpGcEaUIFCpzBvFbXtICh0%3D" alt="" loading="lazy"/></p>
<p>ä»æ’ä»¶çš„é…ç½®å¯ä»¥çœ‹å‡ºï¼Œé»˜è®¤çš„æ¨¡å‹æ˜¯<code>deepseek</code>:</p>
<p><img alt="è½¬å­˜å¤±è´¥ï¼Œå»ºè®®ç›´æ¥ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶" src="" loading="lazy"/></p>
<p>é™¤äº†å‘½åä¹‹åï¼Œè¿˜å¯ä»¥ç”Ÿæˆæ–¹æ³•çš„æ³¨é‡Šç­‰ã€‚å…¶ä»–çš„ä½¿ç”¨æ–¹å¼ï¼Œè¯¦è§æ’ä»¶çš„ä½¿ç”¨è¯´æ˜ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f729c9a2fe804f3da5e041ac3b12090b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2ltb25LaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764812206&amp;x-signature=id7AvAqxgs0d7OEWuBOTCvwpr%2Fw%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-7">04 å°ç»“</h2>
<p><code>Maven Search</code>å’Œ<code>Easy Naming</code>æ˜¯æ¯ä¸€ä½Javaå¼€å‘è€…å·¥å…·ç®±ä¸­éƒ½åº”é…å¤‡çš„â€œæ•ˆç‡åŒé›„â€ã€‚<code>Maven Search</code>è®©ä½ åœ¨<code>IDE</code>å†…ä¸€é”®æœç´¢å’Œæ·»èµ·æ¥éå¸¸å‘æ›´æ–¹ä¾¿åŠ ä¾èµ–ï¼Œå‘Šåˆ«æ‰‹åŠ¨è¾“å…¥çš„ç¹çä¸é”™è¯¯ï¼›<code>Easy Naming</code>å‘Šåˆ«å‘½åçƒ¦æ¼ï¼Œå–å˜é‡åæœ‰æ›´å¤šçš„é€‰æ‹©ã€‚</p>
<p>ç±»ä¼¼çš„<code>Idea</code>æ’ä»¶è¿˜æœ‰å¾ˆå¤šï¼Œä½†æ˜¯è¿™ä¸¤æ¬¾è§£å†³å°ç¼–çš„ç‡ƒçœ‰ä¹‹æ€¥ï¼Œä¹Ÿå¾ˆä¸æ„æ€ï¼Œå°±åˆ†äº«ç»™å¤§å®¶ä¸€èµ·ç©ï¼ä½ è¿˜ç”¨äº†ä»€ä¹ˆè¿˜ç©çš„æ’ä»¶ï¼Œè¯„è®ºåŒºç§€ä¸€ç§€ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸ”¥100+ å¤©ï¼Œå·²å…¨é¢æ”¯æŒé¸¿è’™ï¼uView Pro è¿‘æœŸæ›´æ–°ç›˜ç‚¹åŠæœªæ¥è®¡åˆ’]]></title>    <link>https://juejin.cn/post/7576859594360766464</link>    <guid>https://juejin.cn/post/7576859594360766464</guid>    <pubDate>2025-11-27T01:42:12.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576859594360766464" data-draft-id="7573521516325208091" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸ”¥100+ å¤©ï¼Œå·²å…¨é¢æ”¯æŒé¸¿è’™ï¼uView Pro è¿‘æœŸæ›´æ–°ç›˜ç‚¹åŠæœªæ¥è®¡åˆ’"/> <meta itemprop="keywords" content="å‰ç«¯,uni-app,HarmonyOS"/> <meta itemprop="datePublished" content="2025-11-27T01:42:12.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‰ç«¯æ¢¦å·¥å‚"/> <meta itemprop="url" content="https://juejin.cn/user/4230576472589976"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸ”¥100+ å¤©ï¼Œå·²å…¨é¢æ”¯æŒé¸¿è’™ï¼uView Pro è¿‘æœŸæ›´æ–°ç›˜ç‚¹åŠæœªæ¥è®¡åˆ’
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4230576472589976/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‰ç«¯æ¢¦å·¥å‚
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-27T01:42:12.000Z" title="Thu Nov 27 2025 01:42:12 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>uView Pro å¼€æºè¿‘ä¸‰ä¸ªæœˆä»¥æ¥ï¼Œæ”¶åˆ°äº†è‰¯å¥½çš„åé¦ˆå’Œè¿­ä»£ã€‚ç›®å‰ uView Pro å·²ç»è¿­ä»£äº† 40+ ä¸ªç‰ˆæœ¬ï¼Œå¹³å‡æ¯ä¸¤å¤©å°±ä¼šå‘å¸ƒç‰ˆæœ¬ï¼Œä¸»è¦æ˜¯ä¼˜åŒ–æ€§èƒ½ã€æ–°å¢\å¢å¼ºç»„ä»¶åŠŸèƒ½ã€bugä¿®å¤ã€å…¼å®¹æ€§å®Œå–„ç­‰ã€‚</p>
<p>æ‰€ä»¥ç›®å‰ uView Pro åœ¨ç¨³å®šæ€§ã€åŠŸèƒ½æ€§ä¸è·¨å¹³å°å…¼å®¹æ€§æ–¹é¢å·²ç»æœ‰äº†è‰¯å¥½çš„è¡¨ç°ã€‚ä¸»è¦å®ç°äº† APPã€é¸¿è’™ã€å¾®ä¿¡ã€æ”¯ä»˜å®ã€å¤´æ¡ç­‰å°ç¨‹åºå¹³å°çš„å…¼å®¹ï¼Œåç»­ä¹Ÿä¼šç»§ç»­è¿›è¡Œè¿­ä»£ã€‚</p>
<p>æœ¬æ–‡åŸºäºæœ€è¿‘çš„ changelog æ±‡æ€»ï¼Œé¢å‘å¼€å‘è€…ä¸é¡¹ç›®è´¡çŒ®è€…ï¼Œç³»ç»Ÿä»‹ç»æ–°å¢ç»„ä»¶ã€å…³é”®ä¿®å¤ã€å·¥å…·èƒ½åŠ›ä»¥åŠå¦‚ä½•åœ¨é¡¹ç›®ä¸­å¿«é€Ÿä½“éªŒè¿™äº›ç‰¹æ€§ï¼Œå¹¶æä¾›ç¤ºä¾‹ä»£ç ä¸èµ„æºé“¾æ¥ï¼Œæ–¹ä¾¿ä½ åœ¨å®é™…å·¥ç¨‹ä¸­è½åœ°ä½¿ç”¨ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7312958ca6cb48678110e98d6de51881~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5qKm5bel5Y6C:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764812531&amp;x-signature=hMnvT6wiHBqLHq%2FDXBxrTb9KXMI%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-0">ä¸€ã€æ€»ä½“æ¦‚è§ˆ</h2>
<p>ç›®å‰æœ€æ–°ç‰ˆæœ¬ï¼ˆ0.3.16 åŠæ­¤å‰è‹¥å¹²å°ç‰ˆæœ¬ï¼‰è¦†ç›–ä¸‰å¤§æ–¹å‘ï¼š</p>
<ul>
<li>å¹³å°å…¼å®¹ä¸ bug ä¿®å¤ï¼šé€‚é…æ›´å¤šå°ç¨‹åºå¹³å°ï¼ˆåŒ…æ‹¬é¸¿è’™/å„å°ç¨‹åºæ”¯æŒçš„å®Œå–„ï¼‰ï¼Œä¿®å¤äº† canvas æ¸²æŸ“ã€è¡¨å•å“åº”ã€picker åˆå§‹åŒ–ã€ç»„ä»¶å…¼å®¹æ€§ç­‰è‹¥å¹²è·¨ç«¯é—®é¢˜ã€‚</li>
<li>æ–°ç»„ä»¶ä¸ç”¨æˆ·ä½“éªŒä¼˜åŒ–ï¼šæ¨å‡ºå¹¶å¢å¼ºè‹¥å¹²ç‰¹è‰²ç»„ä»¶ï¼Œå¦‚ <code>u-fab</code>ï¼ˆæ‚¬æµ®æŒ‰é’®ï¼‰ã€<code>u-text</code>ã€<code>u-loading-popup</code>ã€<code>u-textarea</code>ã€<code>u-safe-bottom</code>ã€<code>u-status-bar</code>ã€<code>u-root-portal</code>ï¼Œä»¥æ»¡è¶³å¸¸è§ UI åœºæ™¯éœ€æ±‚ã€‚</li>
<li>å·¥å…·é“¾ä¸æ¡†æ¶èƒ½åŠ›ï¼šå¢å¼º <code>http</code> æ’ä»¶ä¸ <code>useCompRelation</code>ï¼ˆç»„ä»¶å…³ç³»ç®¡ç† Hooksï¼‰ï¼Œä½¿ä¸šåŠ¡å±‚ç½‘ç»œè¯·æ±‚ä¸å¤æ‚ç»„ä»¶åä½œæ›´ä¾¿æ·ã€‚</li>
</ul>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬æŠŠé‡ç‚¹æ”¾åœ¨æ–°å¢ä¸ä¼˜åŒ–çš„åŠŸèƒ½ã€ç¤ºä¾‹ä½¿ç”¨ä»¥åŠå·¥ç¨‹å®è·µå»ºè®®ä¸Šã€‚</p>
<p>è¯¦æƒ…å¯æŸ¥çœ‹å®˜ç½‘åŠè¿‘æœŸæ›´æ–°æ—¥å¿—ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fuviewpro.cn%2F" target="_blank" title="https://uviewpro.cn/" ref="nofollow noopener noreferrer">uviewpro.cn/</a></p>
<h2 data-id="heading-1">äºŒã€äº®ç‚¹åŠŸèƒ½ä¸æ–°å¢ç»„ä»¶ï¼ˆé€ä¸ªæ‹†è§£ï¼‰</h2>
<h3 data-id="heading-2">1) u-fabï¼ˆæ‚¬æµ®æŒ‰é’®ï¼‰</h3>
<p>ç®€ä»‹ï¼š<code>u-fab</code> æ˜¯é¢å‘ç§»åŠ¨ç«¯å¸¸è§çš„æ‚¬æµ®æ“ä½œå…¥å£ï¼Œæ”¯æŒå¤šç§é¢„è®¾å®šä½ã€æ‹–åŠ¨å¸è¾¹ï¼ˆ<code>autoStick</code>ï¼‰ä»¥åŠ <code>gap</code> å±æ€§çš„ç²¾ç»†åŒ–é…ç½®ã€‚è¯¥ç»„ä»¶åœ¨äº¤äº’ä¸æ— éšœç¢ä½“éªŒä¸Šè¿›è¡Œäº†å¢å¼ºï¼Œèƒ½å…¼å®¹å¤šç«¯å¸ƒå±€å·®å¼‚ã€‚</p>
<p>ä¸»è¦ç‰¹æ€§ï¼š</p>
<ul>
<li>é¢„è®¾ positionï¼ˆå¦‚å³ä¸‹ã€å·¦ä¸‹ã€å³ä¸­ç­‰ï¼‰ä¾¿äºåœ¨ä¸åŒ UI å¸ƒå±€ä¸­å¿«é€Ÿæ”¾ç½®ã€‚</li>
<li>æ”¯æŒ gap çš„å¯¹è±¡å¼é…ç½®ï¼ˆtop/right/bottom/leftï¼‰ï¼Œä½¿ demo ä¸çœŸå®é¡¹ç›®å…¼å®¹æ€§æ›´å¥½ã€‚</li>
<li>autoStickï¼šæ‹–åŠ¨åè‡ªåŠ¨å¸è¾¹ï¼Œæå‡äº¤äº’ä½“éªŒã€‚</li>
</ul>
<p>ç¤ºä¾‹ï¼š</p>
<p>ç¤ºä¾‹ï¼ˆVue 3 Composition APIï¼‰ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
	<span class="hljs-tag">&lt;<span class="hljs-name">u-fab</span> <span class="hljs-attr">position</span>=<span class="hljs-string">"right-bottom"</span> <span class="hljs-attr">:gap</span>=<span class="hljs-string">"gapObj"</span> <span class="hljs-attr">:draggable</span>=<span class="hljs-string">"true"</span> <span class="hljs-attr">:autoStick</span>=<span class="hljs-string">"true"</span>&gt;</span>
		<span class="hljs-tag">&lt;<span class="hljs-name">template</span> #<span class="hljs-attr">default</span>&gt;</span>
			<span class="hljs-tag">&lt;<span class="hljs-name">u-button</span> <span class="hljs-attr">shape</span>=<span class="hljs-string">"circle"</span> <span class="hljs-attr">size</span>=<span class="hljs-string">"mini"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"primary"</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"onFabClick"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">u-icon</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"thumb-up"</span> <span class="hljs-attr">size</span>=<span class="hljs-string">"40"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">u-icon</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">u-button</span>&gt;</span>
		<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
	<span class="hljs-tag">&lt;/<span class="hljs-name">u-fab</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"ts"</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { ref } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>;
<span class="hljs-keyword">const</span> gapObj = { <span class="hljs-attr">top</span>: <span class="hljs-number">20</span>, <span class="hljs-attr">right</span>: <span class="hljs-number">16</span>, <span class="hljs-attr">bottom</span>: <span class="hljs-number">16</span>, <span class="hljs-attr">left</span>: <span class="hljs-number">16</span> };
<span class="hljs-keyword">function</span> <span class="hljs-title function_">onFabClick</span>(<span class="hljs-params"/>) {
	uni.<span class="hljs-title function_">showToast</span>({ <span class="hljs-attr">title</span>: <span class="hljs-string">'æ‚¬æµ®æŒ‰é’®ç‚¹å‡»'</span> });
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p>å»ºè®®ï¼šåœ¨ç§»åŠ¨ç«¯åº”ç»“åˆ safe areaï¼ˆå¦‚ <code>u-safe-bottom</code>ï¼‰ä¸é¡µé¢å¸¸é©»æŒ‰é’®å¸ƒå±€è°¨æ…ä½¿ç”¨ <code>u-fab</code>ï¼Œé¿å…é®æŒ¡å…³é”®å†…å®¹ã€‚</p>
<p>æ›´å¤šç”¨æ³•è¯·å‚è€ƒæ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fuviewpro.cn%2Fzh%2Fcomponents%2Ffab.html" target="_blank" title="https://uviewpro.cn/zh/components/fab.html" ref="nofollow noopener noreferrer">uviewpro.cn/zh/componenâ€¦</a></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b9ff3f1fc10149a6baf27e7599608a1b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5qKm5bel5Y6C:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764812531&amp;x-signature=9jde7FInlTkBsWc4rEg3Xco%2B9i4%3D" alt="12.png" loading="lazy"/></p>
<h3 data-id="heading-3">2) u-text</h3>
<p>ç®€ä»‹ï¼š<code>u-text</code> æä¾›æ›´çµæ´»çš„æ–‡å­—æ ·å¼ä¸æ’æ§½æ”¯æŒï¼Œèƒ½åœ¨é•¿æ–‡æœ¬ã€å¯Œæ–‡æœ¬å±•ç¤ºåœºæ™¯ä¸­æ›¿ä»£å¸¸è§„æ ‡ç­¾å¹¶ç»Ÿä¸€æ ·å¼æ§åˆ¶ã€‚</p>
<p>ä¸»è¦ç‰¹æ€§ï¼š</p>
<ul>
<li>æ”¯æŒé»˜è®¤æ’æ§½ä¸å¤šç§æ–‡æœ¬æˆªæ–­/æ¢è¡Œç­–ç•¥ã€‚</li>
<li>æ›´å‹å¥½çš„æ ·å¼ç©¿é€èƒ½åŠ›ï¼Œæ–¹ä¾¿ä¸»é¢˜åŒ–ã€‚</li>
</ul>
<p>ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-comment">&lt;!-- ä¸»é¢˜é¢œè‰²æ–‡å­— --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">u-text</span> <span class="hljs-attr">text</span>=<span class="hljs-string">"ä¸»è‰²æ–‡å­—"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"primary"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">u-text</span>&gt;</span>

<span class="hljs-comment">&lt;!-- æ‹¨æ‰“ç”µè¯ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">u-text</span> <span class="hljs-attr">mode</span>=<span class="hljs-string">"phone"</span> <span class="hljs-attr">text</span>=<span class="hljs-string">"15019479320"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">u-text</span>&gt;</span>

<span class="hljs-comment">&lt;!-- æ—¥æœŸæ ¼å¼åŒ– --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">u-text</span> <span class="hljs-attr">mode</span>=<span class="hljs-string">"date"</span> <span class="hljs-attr">text</span>=<span class="hljs-string">"1612959739"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">u-text</span>&gt;</span>

<span class="hljs-comment">&lt;!-- è¶…é“¾æ¥ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">u-text</span> <span class="hljs-attr">mode</span>=<span class="hljs-string">"link"</span> <span class="hljs-attr">text</span>=<span class="hljs-string">"Go to uView Pro docs"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://uviewpro.cn"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">u-text</span>&gt;</span>

<span class="hljs-comment">&lt;!-- å§“åè„±æ• --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">u-text</span> <span class="hljs-attr">mode</span>=<span class="hljs-string">"name"</span> <span class="hljs-attr">text</span>=<span class="hljs-string">"å¼ ä¸‰ä¸‰"</span> <span class="hljs-attr">format</span>=<span class="hljs-string">"encrypt"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">u-text</span>&gt;</span>

<span class="hljs-comment">&lt;!-- æ˜¾ç¤ºé‡‘é¢ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">u-text</span> <span class="hljs-attr">mode</span>=<span class="hljs-string">"price"</span> <span class="hljs-attr">text</span>=<span class="hljs-string">"728732.32"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">u-text</span>&gt;</span>

<span class="hljs-comment">&lt;!-- é»˜è®¤æ’æ§½ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">u-text</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"desc"</span>&gt;</span>è¿™æ˜¯ä¸€ä¸ªç¤ºä¾‹æ–‡æœ¬ï¼Œæ”¯æŒè‡ªå®šä¹‰æ’æ§½ä¸æ ·å¼<span class="hljs-tag">&lt;/<span class="hljs-name">u-text</span>&gt;</span>

</code></pre>
<p>æ›´å¤šç”¨æ³•è¯·å‚è€ƒæ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fuviewpro.cn%2Fzh%2Fcomponents%2Ftext.html" target="_blank" title="https://uviewpro.cn/zh/components/text.html" ref="nofollow noopener noreferrer">uviewpro.cn/zh/componenâ€¦</a></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/156c377563f5497d810498dc0f56abcb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5qKm5bel5Y6C:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764812531&amp;x-signature=Zpise3PPwzO2kKn7yathh657iL0%3D" alt="9.png" loading="lazy"/></p>
<h3 data-id="heading-4">3) u-loading-popup</h3>
<p>ç®€ä»‹ï¼šä¸€ä¸ªå¯é…ç½®çš„åŠ è½½å¼¹çª—ç»„ä»¶ï¼Œæ”¯æŒå¤šç§åŠ è½½é£æ ¼ä¸é®ç½©é…ç½®ï¼Œæ–¹ä¾¿æ›¿ä»£é¡¹ç›®ä¸­æ•£è½çš„ loading é€»è¾‘ã€‚</p>
<p>ç¤ºä¾‹ï¼ˆæœ€å°ç”¨æ³•ï¼‰ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-comment">&lt;!-- é»˜è®¤çºµå‘åŠ è½½ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">u-loading-popup</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"loading"</span> <span class="hljs-attr">text</span>=<span class="hljs-string">"æ­£åœ¨åŠ è½½..."</span> /&gt;</span>
<span class="hljs-comment">&lt;!-- æ¨ªå‘åŠ è½½ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">u-loading-popup</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"loading"</span> <span class="hljs-attr">direction</span>=<span class="hljs-string">"horizontal"</span> <span class="hljs-attr">text</span>=<span class="hljs-string">"æ­£åœ¨åŠ è½½..."</span> /&gt;</span>
</code></pre>
<p>æ›´å¤šç”¨æ³•è¯·å‚è€ƒæ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fuviewpro.cn%2Fzh%2Fcomponents%2FloadingPopup.html" target="_blank" title="https://uviewpro.cn/zh/components/loadingPopup.html" ref="nofollow noopener noreferrer">uviewpro.cn/zh/componenâ€¦</a></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3f95dbc95d5844e09c405e253fe68acd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5qKm5bel5Y6C:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764812531&amp;x-signature=vJF1vxrbTGenz%2BNIGiZ8f9IuYhI%3D" alt="11.png" loading="lazy"/></p>
<h3 data-id="heading-5">4) u-textarea</h3>
<p>ç®€ä»‹ï¼šç‹¬ç«‹çš„ <code>u-textarea</code> ç»„ä»¶ä» <code>u-input</code> ä¸­æ‹†åˆ†è€Œæ¥ï¼Œå¢å¼ºäº†å­—æ•°ç»Ÿè®¡ã€ä¼¸ç¼©ã€å’Œç‹¬ç«‹æ ·å¼æ§åˆ¶èƒ½åŠ›ï¼Œæ»¡è¶³å¤æ‚è¡¨å•ä¸é•¿æ–‡æœ¬è¾“å…¥åœºæ™¯ã€‚</p>
<p>ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-comment">&lt;!-- å­—æ•°ç»Ÿè®¡ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">u-textarea</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"content"</span> <span class="hljs-attr">:maxlength</span>=<span class="hljs-string">"500"</span> <span class="hljs-attr">count</span> /&gt;</span>

<span class="hljs-comment">&lt;!-- è‡ªåŠ¨é«˜åº¦ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">u-textarea</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"content"</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"è¯·è¾“å…¥å†…å®¹"</span> <span class="hljs-attr">autoHeight</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">u-textarea</span>&gt;</span>
</code></pre>
<p>æ›´å¤šç”¨æ³•è¯·å‚è€ƒæ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fuviewpro.cn%2Fzh%2Fcomponents%2Ftextarea.html" target="_blank" title="https://uviewpro.cn/zh/components/textarea.html" ref="nofollow noopener noreferrer">uviewpro.cn/zh/componenâ€¦</a></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/db5f9e62248d41b2a51fcabcfe7d4f06~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5qKm5bel5Y6C:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764812531&amp;x-signature=DF5Ipln2xgZOmYVCfv2uCCRH7ws%3D" alt="13.png" loading="lazy"/></p>
<h3 data-id="heading-6">5) u-safe-bottom ä¸ u-status-bar</h3>
<p>ç”¨é€”ï¼šä¸è®¾å¤‡å®‰å…¨åŒºï¼ˆnotch/safeareaï¼‰ç›¸å…³çš„å¸ƒå±€ç»„ä»¶ï¼Œç”¨æ¥ä¿è¯åº•éƒ¨/çŠ¶æ€æ çš„å±•ç¤ºåœ¨ä¸åŒå¹³å°ä¸Šéƒ½ä¸ä¼šè¢«é®æŒ¡æˆ–é”™ä½ã€‚é€‚é…äº†å¤šç«¯å·®å¼‚ï¼ˆiOSã€Androidã€ä¸åŒå°ç¨‹åºå®¿ä¸»ï¼‰ã€‚</p>
<p>å¦‚æœæœ‰éœ€è¦ï¼Œæ‚¨å¯ä»¥åœ¨ä»»ä½•åœ°æ–¹å¼•ç”¨å®ƒï¼Œå®ƒä¼šè‡ªåŠ¨åˆ¤æ–­åœ¨å¹¶ä¸”åœ¨ IPhone X ç­‰æœºå‹çš„æ—¶å€™ï¼Œç»™å…ƒç´ åŠ ä¸Šä¸€ä¸ªé€‚å½“ åº•éƒ¨å†…è¾¹è·ï¼Œåœ¨ APP ä¸Šï¼Œå³ä½¿æ‚¨ä¿ç•™äº†åŸç”Ÿå®‰å…¨åŒºå ä½(offsetè®¾ç½®ä¸ºauto)ï¼Œä¹Ÿä¸ä¼šå¯¼è‡´åº•éƒ¨å‡ºç°åŒå€çš„ç©ºç™½åŒºåŸŸï¼Œä¹Ÿå³ APP ä¸Š offset è®¾ç½®ä¸º auto æ—¶ã€‚</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">view</span>&gt;</span>
    ......
    <span class="hljs-tag">&lt;<span class="hljs-name">u-safe-bottom</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">u-safe-bottom</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
</code></pre>
<p>æ›´å¤šç”¨æ³•è¯·å‚è€ƒæ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fuviewpro.cn%2Fzh%2Fcomponents%2FsafeAreaInset.html" target="_blank" title="https://uviewpro.cn/zh/components/safeAreaInset.html" ref="nofollow noopener noreferrer">uviewpro.cn/zh/componenâ€¦</a></p>
<h3 data-id="heading-7">6) u-root-portal</h3>
<p>ç®€ä»‹ï¼šæä¾›å°†èŠ‚ç‚¹ä¼ é€åˆ°æ ¹èŠ‚ç‚¹çš„èƒ½åŠ›ï¼ˆPortal æ¨¡å¼ï¼‰ï¼Œé€‚ç”¨äºæ¨¡æ€ã€å…¨å±€æµ®å±‚ç­‰éœ€è¦è„±ç¦»å½“å‰ dom å±‚çº§çš„åœºæ™¯ï¼Œå…¼å®¹å¤šç«¯å®ç°ç»†èŠ‚ã€‚</p>
<p>æ ¹èŠ‚ç‚¹ä¼ é€ç»„ä»¶ä»…æ”¯æŒå¾®ä¿¡å°ç¨‹åºã€æ”¯ä»˜å®å°ç¨‹åºã€APPå’ŒH5å¹³å°ï¼Œç»„ä»¶ä¼šè‡ªåŠ¨æ ¹æ®å¹³å°é€‰æ‹©åˆé€‚çš„å®ç°æ–¹å¼ï¼š</p>
<p>è¿™ç±»åœºæ™¯æœ€å¸¸è§çš„ä¾‹å­å°±æ˜¯å…¨å±çš„æ¨¡æ€æ¡†ã€‚ç†æƒ³æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¸Œæœ›è§¦å‘æ¨¡æ€æ¡†çš„æŒ‰é’®å’Œæ¨¡æ€æ¡†æœ¬èº«çš„ä»£ç æ˜¯åœ¨åŒä¸€ä¸ªå•æ–‡ä»¶ç»„ä»¶ä¸­ï¼Œå› ä¸ºå®ƒä»¬éƒ½ä¸ç»„ä»¶çš„å¼€å…³çŠ¶æ€æœ‰å…³ã€‚</p>
<pre><code class="hljs language-HTML" lang="HTML"><span class="hljs-tag">&lt;<span class="hljs-name">u-button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"primary"</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"show = true"</span>&gt;</span>æ˜¾ç¤ºå¼¹çª—<span class="hljs-tag">&lt;/<span class="hljs-name">u-button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">u-root-portal</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">"show"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">view</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"modal"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">view</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"modal-content"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">text</span>&gt;</span>è¿™æ˜¯ä¸€ä¸ªå…¨å±€å¼¹çª—<span class="hljs-tag">&lt;/<span class="hljs-name">text</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">u-button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"show = false"</span>&gt;</span>å…³é—­<span class="hljs-tag">&lt;/<span class="hljs-name">u-button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">u-root-portal</span>&gt;</span>
</code></pre>
<p>æ›´å¤šç”¨æ³•è¯·å‚è€ƒæ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fuviewpro.cn%2Fzh%2Fcomponents%2FrootPortal.html" target="_blank" title="https://uviewpro.cn/zh/components/rootPortal.html" ref="nofollow noopener noreferrer">uviewpro.cn/zh/componenâ€¦</a></p>
<h3 data-id="heading-8">7) è‡ªå®šä¹‰ä¸»é¢˜</h3>
<p>uView Pro ç›®å‰å¯ä»¥è‡ªå®šä¸»é¢˜è‰²ï¼Œå­—ä½“é¢œè‰²ï¼Œè¾¹æ¡†é¢œè‰²ç­‰ï¼Œæ‰€æœ‰ç»„ä»¶å†…éƒ¨çš„æ ·å¼ï¼Œéƒ½åŸºäºåŒä¸€å¥—ä¸»é¢˜ï¼Œæ¯”å¦‚æ‚¨ä¿®æ”¹äº†primaryä¸»é¢˜è‰²ï¼Œæ‰€æœ‰ç”¨åˆ°äº†primaryé¢œè‰² çš„ç»„ä»¶éƒ½ä¼šå—å½±å“ã€‚</p>
<p>ç”±äº uView å®˜æ–¹ç‰ˆæœ¬ï¼Œç»„ä»¶å†…éƒ¨å­˜åœ¨è®¸å¤šç¡¬ç¼–ç é¢œè‰²é…ç½®ï¼Œæ— æ³•åŠ¨æ€æ ¹æ® <code>scss</code> å˜é‡ï¼Œç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥ç»Ÿä¸€è·Ÿéšä¸»é¢˜é…ç½®äº†ã€‚</p>
<p>é€šè¿‡å®˜ç½‘ä¸»é¢˜é¢œè‰²é…ç½®å®Œåï¼Œåœ¨é¡µé¢åº•éƒ¨ä¸‹è½½æ–‡ä»¶ï¼Œä¼šå¾—åˆ°ä¸€ä¸ªåä¸º<code>uview-pro.theme.scss</code>å’Œ<code>uview-pro.theme.ts</code>çš„æ–‡ä»¶ã€‚</p>
<p>é…ç½® scss å˜é‡</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">/* uni.scss */</span>
<span class="hljs-keyword">@import</span> <span class="hljs-string">'uview-pro/theme.scss'</span>;
</code></pre>
<p>é…ç½® ts å˜é‡</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// main.ts</span>
<span class="hljs-keyword">import</span> { createSSRApp } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./App.vue'</span>
<span class="hljs-keyword">import</span> theme <span class="hljs-keyword">from</span> <span class="hljs-string">'@/common/uview-pro.theme'</span>
<span class="hljs-keyword">import</span> uViewPro <span class="hljs-keyword">from</span> <span class="hljs-string">'uview-pro'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">createApp</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> app = <span class="hljs-title function_">createSSRApp</span>(<span class="hljs-title class_">App</span>)
  <span class="hljs-comment">// å¼•å…¥uView Pro ä¸»åº“ï¼ŒåŠthemeä¸»é¢˜</span>
  app.<span class="hljs-title function_">use</span>(uViewPro, { theme })
  <span class="hljs-keyword">return</span> {
    app
  }
}
</code></pre>
<p>ä»¥ä¸Šæ­¥éª¤å®Œæˆä¹‹åï¼Œæ‰€æœ‰é¢œè‰²å‡è·Ÿéšä¸»é¢˜è‰²ã€‚</p>
<p>æ›´å¤šç”¨æ³•è¯·å‚è€ƒæ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fuviewpro.cn%2Fzh%2Fguide%2Ftheme.html" target="_blank" title="https://uviewpro.cn/zh/guide/theme.html" ref="nofollow noopener noreferrer">uviewpro.cn/zh/guide/thâ€¦</a></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/79877cd89bf344c0a73b913712293892~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5qKm5bel5Y6C:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764812531&amp;x-signature=GvLHqALYtszObw3Mo8dQzaI6YJ4%3D" alt="8.png" loading="lazy"/></p>
<h3 data-id="heading-9">8) è‡ªå®šä¹‰æ ·å¼</h3>
<p>uView Pro é»˜è®¤æä¾›äº†ä¸€å¥—ç¾è§‚ä¸”ç»Ÿä¸€çš„ç»„ä»¶æ ·å¼ï¼Œä½†åœ¨å®é™…é¡¹ç›®å¼€å‘ä¸­ï¼Œå¾€å¾€éœ€è¦æ ¹æ®ä¸šåŠ¡éœ€æ±‚è¿›è¡Œä¸ªæ€§åŒ–å®šåˆ¶ã€‚å‚è€ƒè‡ªå®šä¹‰ä¸»é¢˜ã€‚</p>
<p>ç„¶è€Œï¼Œå¦‚æœä»…æ˜¯éœ€è¦è¦†ç›–ç»„ä»¶çš„é»˜è®¤æ ·å¼ï¼Œæˆ–å¢åŠ æ ·å¼ï¼ŒuView Pro åˆ™æ”¯æŒä¸¤ç§ä¸»æµçš„è‡ªå®šä¹‰æ ·å¼æ–¹å¼ï¼Œçµæ´»æ»¡è¶³å„ç§åœºæ™¯ï¼š</p>
<p>ç›®å‰ï¼Œæ‰€æœ‰ç»„ä»¶å‡æ”¯æŒ <code>custom-class</code> æ ·å¼ç©¿é€å’Œ <code>custom-style</code> å†…è”æ ·å¼</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">view</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"my-page"</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- custom-class æ ·å¼ç©¿é€ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">u-button</span> <span class="hljs-attr">custom-class</span>=<span class="hljs-string">"my-btn"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">u-button</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- è‡ªå®šä¹‰å†…è”æ ·å¼ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">u-button</span>
        <span class="hljs-attr">custom-style</span>=<span class="hljs-string">"background: linear-gradient(90deg,#2979ff,#00c6ff);color:#fff;border-radius:8px;"</span>
    &gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">u-button</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"scss"</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.my-page</span> {
  :<span class="hljs-built_in">deep</span>(.my-btn) {
    <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#2979ff</span>;
    <span class="hljs-attribute">color</span>: <span class="hljs-number">#fff</span>;
    <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">8px</span>;
  }
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>

</code></pre>
<p>æ›´å¤šç”¨æ³•è¯·å‚è€ƒæ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fuviewpro.cn%2Fzh%2Fguide%2Fstyle.html" target="_blank" title="https://uviewpro.cn/zh/guide/style.html" ref="nofollow noopener noreferrer">uviewpro.cn/zh/guide/stâ€¦</a></p>
<h2 data-id="heading-10">ä¸‰ã€å·¥å…·é“¾æ”¹è¿›ä¸æ–°èƒ½åŠ›</h2>
<h3 data-id="heading-11">1) http æ’ä»¶ï¼ˆhttpPluginï¼‰</h3>
<p>ç®€ä»‹ï¼šæä¾›ç»Ÿä¸€çš„è¯·æ±‚å°è£…ï¼Œæ”¯æŒ TypeScriptã€Vue3ã€ç»„åˆå¼ APIï¼Œæ’ä»¶åŒ–ã€å…¨å±€é…ç½®ã€è¯·æ±‚/å“åº”æ‹¦æˆªå™¨ã€è¯·æ±‚å…ƒä¿¡æ¯ç±»å‹ï¼ˆtoast/loading çµæ´»æ§åˆ¶ï¼‰ï¼Œå¼€ç®±å³ç”¨ï¼Œä¾¿äºåœ¨é¡¹ç›®ä¸­è¿›è¡Œå…¨å±€åŒ–ç½‘ç»œç®¡ç†ã€‚ã€‚</p>
<p>ç¤ºä¾‹ï¼šåŸºæœ¬è¯·æ±‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> { http } <span class="hljs-keyword">from</span> <span class="hljs-string">'uview-pro'</span>

<span class="hljs-comment">// GET</span>
http.<span class="hljs-title function_">get</span>(<span class="hljs-string">'/api/user'</span>, { <span class="hljs-attr">id</span>: <span class="hljs-number">1</span> }).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> {
  <span class="hljs-comment">/* ... */</span>
})

<span class="hljs-comment">// POST</span>
http.<span class="hljs-title function_">post</span>(<span class="hljs-string">'/api/login'</span>, { <span class="hljs-attr">username</span>: <span class="hljs-string">'xx'</span>, <span class="hljs-attr">password</span>: <span class="hljs-string">'xx'</span> }).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> {
  <span class="hljs-comment">/* ... */</span>
})

<span class="hljs-comment">// PUT/DELETE</span>
http.<span class="hljs-title function_">put</span>(<span class="hljs-string">'/api/user/1'</span>, { <span class="hljs-attr">name</span>: <span class="hljs-string">'new'</span> })
http.<span class="hljs-title function_">delete</span>(<span class="hljs-string">'/api/user/1'</span>)
</code></pre>
<p>é«˜çº§ï¼šæ”¯æŒè¯·æ±‚æ‹¦æˆªå™¨ã€å…¨å±€é”™è¯¯å¤„ç†ä¸ meta é…ç½®ï¼Œé€‚åˆæ¥å…¥é‰´æƒã€é‡è¯•ã€é™æµç­‰ç­–ç•¥ã€‚</p>
<p>æœ€ä½³å®è·µï¼šå®šä¹‰æ‹¦æˆªå™¨é…ç½® =&gt; æ³¨å†Œæ‹¦æˆªå™¨ =&gt; ç»Ÿä¸€ API ç®¡ç†</p>
<p>å®šä¹‰æ‹¦æˆªå™¨é…ç½®</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> <span class="hljs-keyword">type</span> { <span class="hljs-title class_">RequestConfig</span>, <span class="hljs-title class_">RequestInterceptor</span>, <span class="hljs-title class_">RequestMeta</span>, <span class="hljs-title class_">RequestOptions</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'uview-pro'</span>
<span class="hljs-keyword">import</span> { useUserStore } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/store'</span>

<span class="hljs-comment">// å…¨å±€è¯·æ±‚é…ç½®</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-attr">httpRequestConfig</span>: <span class="hljs-title class_">RequestConfig</span> = {
  baseUrl,
  <span class="hljs-attr">header</span>: {
    <span class="hljs-string">'content-type'</span>: <span class="hljs-string">'application/json'</span>
  },
  <span class="hljs-attr">meta</span>: {
    <span class="hljs-attr">originalData</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">toast</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">loading</span>: <span class="hljs-literal">true</span>
  }
}

<span class="hljs-comment">// å…¨å±€è¯·æ±‚/å“åº”æ‹¦æˆªå™¨</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-attr">httpInterceptor</span>: <span class="hljs-title class_">RequestInterceptor</span> = {
  <span class="hljs-attr">request</span>: <span class="hljs-function">(<span class="hljs-params">config: RequestOptions</span>) =&gt;</span> {
    <span class="hljs-comment">// è¯·æ±‚æ‹¦æˆª</span>
    <span class="hljs-keyword">return</span> config
  },
  <span class="hljs-attr">response</span>: <span class="hljs-function">(<span class="hljs-params">response: <span class="hljs-built_in">any</span></span>) =&gt;</span> {
    <span class="hljs-comment">// å“åº”æ‹¦æˆª</span>
    <span class="hljs-keyword">return</span> response.<span class="hljs-property">data</span>
  }
}
</code></pre>
<p>æ³¨å†Œæ‹¦æˆªå™¨ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { createSSRApp } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> uViewPro, { httpPlugin } <span class="hljs-keyword">from</span> <span class="hljs-string">'uview-pro'</span>
<span class="hljs-keyword">import</span> { httpInterceptor, httpRequestConfig } <span class="hljs-keyword">from</span> <span class="hljs-string">'http.interceptor'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">createApp</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> app = <span class="hljs-title function_">createSSRApp</span>(<span class="hljs-title class_">App</span>)

  <span class="hljs-comment">// æ³¨å†ŒuView-pro</span>
  app.<span class="hljs-title function_">use</span>(uViewPro)

  <span class="hljs-comment">// æ³¨å†Œhttpæ’ä»¶</span>
  app.<span class="hljs-title function_">use</span>(httpPlugin, {
    <span class="hljs-attr">interceptor</span>: httpInterceptor,
    <span class="hljs-attr">requestConfig</span>: httpRequestConfig
  })

  <span class="hljs-keyword">return</span> { app }
}
</code></pre>
<p>ç»Ÿä¸€ API ç®¡ç†</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// api/index.ts</span>
<span class="hljs-keyword">import</span> { http } <span class="hljs-keyword">from</span> <span class="hljs-string">'uview-pro'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">login</span> = data =&gt; http.<span class="hljs-title function_">post</span>(<span class="hljs-string">'/api/login'</span>, data,  { <span class="hljs-attr">meta</span>: { <span class="hljs-attr">loading</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">toast</span>: <span class="hljs-literal">true</span> } })
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">getUser</span> = id =&gt; http.<span class="hljs-title function_">get</span>(<span class="hljs-string">'/api/user'</span>, { id },  { <span class="hljs-attr">meta</span>: { <span class="hljs-attr">loading</span>: <span class="hljs-literal">false</span> } })
</code></pre>
<p>ä»¥ä¸Šç¤ºä¾‹ä¸ºç»å…¸æœ€ä½³å®è·µï¼Œæ›´å¤šç”¨æ³•è¯·æŸ¥çœ‹ http æ’ä»¶æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fuviewpro.cn%2Fzh%2Ftools%2Fhttp.html" target="_blank" title="https://uviewpro.cn/zh/tools/http.html" ref="nofollow noopener noreferrer">uviewpro.cn/zh/tools/htâ€¦</a></p>
<h3 data-id="heading-12">2) useCompRelationï¼ˆç»„ä»¶å…³ç³»ç®¡ç† Hooksï¼‰</h3>
<p>ç›®çš„ï¼šæ›¿ä»£ä¼ ç»Ÿçš„ <code>provide/inject</code> åœ¨å¤šå¹³å°ï¼ˆå°¤å…¶æ˜¯ä¸€äº›å°ç¨‹åºå®¿ä¸»ï¼‰å¯èƒ½å­˜åœ¨çš„å…¼å®¹é—®é¢˜ï¼Œæä¾›æ›´å¯é çš„çˆ¶å­ç»„ä»¶è¿æ¥å’Œäº‹ä»¶å¹¿æ’­æœºåˆ¶ã€‚</p>
<p>åº”ç”¨åœºæ™¯ï¼šå¤æ‚è¡¨å•ã€çº§è”èœå•ã€å¸¦æœ‰å­é¡¹åŠ¨æ€å¢åˆ çš„ç»„ä»¶é›†åˆç­‰ã€‚</p>
<p>çˆ¶ç»„ä»¶ç¤ºä¾‹ï¼ˆä¼ªä»£ç ï¼‰ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> { useParent } <span class="hljs-keyword">from</span> <span class="hljs-string">'uview-pro'</span>;

<span class="hljs-keyword">const</span> { children, broadcast } = <span class="hljs-title function_">useParent</span>(<span class="hljs-string">'u-dropdown'</span>);

<span class="hljs-comment">// å¹¿æ’­è°ƒç”¨å­ç»„ä»¶å‡½æ•°</span>
<span class="hljs-title function_">broadcast</span>(<span class="hljs-string">'childFunctionName'</span>, { payload });

<span class="hljs-comment">// æ”¶é›†æ‰€æœ‰å­ç»„ä»¶æŒ‡å®šå€¼</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">getChildrenValues</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">let</span> <span class="hljs-attr">values</span>: <span class="hljs-built_in">any</span>[] = [];
    children.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">child: <span class="hljs-built_in">any</span></span>) =&gt;</span> {
        <span class="hljs-keyword">if</span> (child.<span class="hljs-property">getExposed</span>?.()?.<span class="hljs-property">isChecked</span>.<span class="hljs-property">value</span>) {
            values.<span class="hljs-title function_">push</span>(child.<span class="hljs-property">getExposed</span>?.()?.<span class="hljs-property">name</span>);
        }
    });
}
</code></pre>
<p>å­ç»„ä»¶ç¤ºä¾‹ï¼ˆä¼ªä»£ç ï¼‰ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> { parentExposed, emitToParent } = <span class="hljs-title function_">useChildren</span>(<span class="hljs-string">'u-dropdown-item'</span>, <span class="hljs-string">'u-dropdown'</span>);

<span class="hljs-comment">// è§¦å‘çˆ¶ç»„ä»¶çš„å‡½æ•°</span>
<span class="hljs-title function_">emitToParent</span>(<span class="hljs-string">'parentFunctionName'</span>);

<span class="hljs-comment">// è·å–çˆ¶ç»„ä»¶çš„å˜é‡</span>
<span class="hljs-keyword">const</span> activeColor = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> parentExposed.<span class="hljs-property">value</span>?.<span class="hljs-property">activeColor</span>);
</code></pre>
<p>æ›´å¤šç”¨æ³•è¯·å‚è€ƒç»„ä»¶æºç ï¼š<code>useCompRelation.ts</code></p>
<h3 data-id="heading-13">3) æä¾› llms.txt</h3>
<p><code>llms.txt</code>çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Œä¸€èˆ¬å®ƒç”¨æ¥å‘Šè¯‰å¤§æ¨¡å‹æ˜¯å¦å…è®¸æŠ“å–ç½‘ç«™æ•°æ®ç”¨äºè®­ç»ƒçš„æ–‡ä»¶ï¼Œç±»ä¼¼äº <code>robots.txt</code> æ§åˆ¶çˆ¬è™«æƒé™ï¼Œå› æ­¤ uView Pro ä¹Ÿæä¾›äº†å³æ—¶æ›´æ–°çš„ <code>llms.txt</code> æ–‡ä»¶ï¼Œä¾¿äºè®­ç»ƒå¤§æ¨¡å‹ï¼Œæ›´å¥½çš„ä¸ºæˆ‘ä»¬æœåŠ¡ï¼Œé“¾æ¥å¦‚ä¸‹ï¼š</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fuviewpro.cn%2Fllms.txt" target="_blank" title="https://uviewpro.cn/llms.txt" ref="nofollow noopener noreferrer">uviewpro.cn/llms.txt</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fuviewpro.cn%2Fllms-full.txt" target="_blank" title="https://uviewpro.cn/llms-full.txt" ref="nofollow noopener noreferrer">uviewpro.cn/llms-full.tâ€¦</a></p>
<h2 data-id="heading-14">å››ã€å¤šè„šæ‰‹æ¶æ”¯æŒ</h2>
<h3 data-id="heading-15">1) create-uni</h3>
<p>create-uni æä¾›ä¸€é”®ç”Ÿæˆã€æ¨¡æ¿ä¸°å¯Œçš„é¡¹ç›®å¼•å¯¼èƒ½åŠ›ï¼Œæ—¨åœ¨å¢å¼º uni-app ç³»åˆ—äº§å“çš„å¼€å‘ä½“éªŒï¼Œå®˜ç½‘ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Funi-helper.cn%2Fcreate-uni%2Fcore" target="_blank" title="https://uni-helper.cn/create-uni/core" ref="nofollow noopener noreferrer">uni-helper.cn/create-uni/â€¦</a></p>
<pre><code class="hljs language-bash" lang="bash">pnpm create uni &lt;é¡¹ç›®åç§°&gt; --ts -m pinia -m unocss -u uview-pro -e
</code></pre>
<p>è¡¨ç¤ºï¼š</p>
<ul>
<li>å¯ç”¨ TypeScript</li>
<li>é›†æˆ ESLint ä»£ç è§„èŒƒ</li>
<li>å¯ç”¨ pinia</li>
<li>é›†æˆ unocss</li>
<li>é€‰æ‹© uview-proç»„ä»¶åº“</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9ce4788f195e4c4fbdf3124dbab6657b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5qKm5bel5Y6C:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764812531&amp;x-signature=a6Ktxup1SKTbf%2F1RbAA8Aw9MKzQ%3D" alt="6.png" loading="lazy"/></p>
<p>å¦‚æœä½ æƒ³ç”¨ create-uni äº¤äº’å¼åˆ›å»ºä¸€ä¸ªé¡¹ç›®ï¼Œè¯·æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">pnpm create uni
</code></pre>
<p>è¿›å…¥äº¤äº’å¼é€‰æ‹©ç•Œé¢ï¼Œé€‰æ‹© <code>uView Pro</code> æ¨¡æ¿æˆ–ç»„ä»¶ï¼Œå…¶ä»–çš„ç›¸å…³æ’ä»¶å¯æŒ‰éœ€é€‰æ‹©ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/29aaed2884434a89b66340e269258e41~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5qKm5bel5Y6C:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764812531&amp;x-signature=NfutR9LjaDIhivI8kruB4LK0L%2BQ%3D" alt="2.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4f8e4453c55340b68ec2cc2e1bc65893~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5qKm5bel5Y6C:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764812531&amp;x-signature=F5z7AFvapZbja2GpGx84Kiaxc9k%3D" alt="image.png" loading="lazy"/></p>
<p>ä½¿ç”¨ create-uni å¿«é€Ÿåˆ›å»º <code>uView Pro Starter</code> å¯åŠ¨æ¨¡æ¿ï¼Œè¯·æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">pnpm create uni &lt;é¡¹ç›®åç§°&gt; -t uview-pro-starter
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/001fa7d3f50f4bcd9254ff81cf75a5f0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5qKm5bel5Y6C:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764812531&amp;x-signature=soLsez%2FTol5ZutrfsYcwKNshVx4%3D" alt="4.png" loading="lazy"/></p>
<p>ä½¿ç”¨ create-uni å¿«é€Ÿåˆ›å»º <code>uView Pro</code> å®Œæ•´ç»„ä»¶æ¼”ç¤ºæ¨¡æ¿ï¼Œè¯·æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">pnpm create uni &lt;é¡¹ç›®åç§°&gt; -t uview-pro-demo
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/aaa7060e2eec4db99d50cdac867e4f7c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5qKm5bel5Y6C:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764812531&amp;x-signature=3CDhmCRbzVqXvSsaVH4MnLdSIQw%3D" alt="5.png" loading="lazy"/></p>
<h3 data-id="heading-16">2) unibest</h3>
<p>unibest æ˜¯ç›®å‰æœ€ç«çš„ uni-app è„šæ‰‹æ¶ï¼Œå®ƒæ˜¯è²é¸½å¤§ä½¬è”åŒä¼—å¤š uni-app å¼€å‘è€…å…±åŒè´¡çŒ®çš„ uni-app æ¡†æ¶ï¼Œé›†æˆäº†æœ€æ–°æŠ€æœ¯æ ˆå’Œå¼€å‘å·¥å…·ï¼Œå®˜ç½‘ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Funibest.tech%2F" target="_blank" title="https://unibest.tech/" ref="nofollow noopener noreferrer">unibest.tech/</a></p>
<p>å¦‚æœä½ æƒ³ç”¨ unibest å’Œ uView Pro æ¥åˆ›å»ºé¡¹ç›®ï¼Œè¯·æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p>
<p>ä¸€è¡Œä»£ç åˆ›å»ºé¡¹ç›®ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">pnpm create unibest &lt;é¡¹ç›®åç§°&gt; -t base-uview-pro
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/263db75fe3174d428697fe8b72f7663a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5qKm5bel5Y6C:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764812531&amp;x-signature=1a1rhpWOExGKO25vgHng%2BEBhy88%3D" alt="1.png" loading="lazy"/></p>
<p>äº¤äº’å¼åˆ›å»ºé¡¹ç›®ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">pnpm create unibest
</code></pre>
<p>é€‰æ‹© <code>base-uview-pro</code> æ¨¡æ¿ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/87817ca652df44f2940641f7018f1160~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5qKm5bel5Y6C:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764812531&amp;x-signature=5dSqasGSjQs1bbd23Q58iXeIdFw%3D" alt="3.png" loading="lazy"/></p>
<h3 data-id="heading-17">3) å®˜æ–¹cli</h3>
<p>ç¬¬ä¸€ç§ï¼šåˆ›å»ºä»¥ javascript å¼€å‘çš„å·¥ç¨‹</p>
<pre><code class="hljs language-bash" lang="bash">npx degit dcloudio/uni-preset-vue<span class="hljs-comment">#vite my-vue3-project</span>
</code></pre>
<p>ç¬¬äºŒç§ï¼šåˆ›å»ºä»¥ typescript å¼€å‘çš„å·¥ç¨‹</p>
<pre><code class="hljs language-bash" lang="bash">npx degit dcloudio/uni-preset-vue<span class="hljs-comment">#vite-ts my-vue3-project</span>
</code></pre>
<p>å¼•å…¥uviewâ€”proç»„ä»¶åº“å³å¯ï¼Œä¸å†è¿‡å¤šä»‹ç»ï¼Œå¯å‚è€ƒå¿«é€Ÿé…ç½®ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fuviewpro.cn%2Fzh%2Fcomponents%2Fsetting.html" target="_blank" title="https://uviewpro.cn/zh/components/setting.html" ref="nofollow noopener noreferrer">uviewpro.cn/zh/componenâ€¦</a></p>
<h2 data-id="heading-18">äº”ã€è¿‘æœŸä¿®å¤è‹¥å¹²å…³é”®é—®é¢˜</h2>
<ul>
<li>u-circle-progress çš„ canvas æ¸²æŸ“é—®é¢˜å·²ä¿®å¤ï¼Œè§£å†³äº†å¾®ä¿¡å°ç¨‹åº canvas 2D åœ¨ä¸åŒå¹³å°ä¸Šä¸‹æ–‡å·®å¼‚å¯¼è‡´çš„ç»˜åˆ¶å¼‚å¸¸ã€‚</li>
<li>u-form ç›¸å…³å¤šä¸ªä¿®å¤ï¼šå¤„ç† model æ›¿æ¢å¯¼è‡´æ ¡éªŒå¤±æ•ˆã€resetFields ä¿®å¤ã€u-form-item æ ·å¼ä¸å…‰æ ‡é—®é¢˜ä¿®å¤ï¼Œæå‡è¡¨å•åœ¨å°ç¨‹åºç«¯å…¼å®¹æ€§ã€‚</li>
<li>pickerã€index-listã€popup ç­‰ç»„ä»¶çš„è·¨ç«¯å…¼å®¹ä¿®å¤ï¼Œå‡å°‘åœ¨å¤´æ¡/æ”¯ä»˜å®/å¾®ä¿¡ç­‰å®¿ä¸»ä¸Šçš„å·®å¼‚è¡¨ç°ã€‚</li>
</ul>
<p>è¿™äº›ä¿®å¤çš„ç»¼åˆæ•ˆæœæ˜¯ï¼šåœ¨å¤šç«¯ä½¿ç”¨ uViewâ€‘Pro æ„å»ºé¡µé¢æ—¶ï¼Œå‡ºç°çš„å¹³å°å·®å¼‚ä¸è¾¹ç¼˜ bug å¤§å¹…å‡å°‘ï¼Œå¼€å‘æˆæœ¬é™ä½ã€‚</p>
<h2 data-id="heading-19">å…­ã€è·¨å¹³å°æ”¯æŒè¯´æ˜</h2>
<p>å½“å‰ uViewâ€‘Pro å·²å…¼å®¹å¹¶åœ¨ä»¥ä¸‹å¹³å°è¿›è¡Œé€‚é…ä¸æµ‹è¯•ï¼š</p>
<ul>
<li>é¸¿è’™ï¼ˆHarmonyOSï¼‰</li>
<li>Androidï¼ˆåŸç”Ÿåº”ç”¨åŠ WebViewï¼‰</li>
<li>iOSï¼ˆåŸç”Ÿåº”ç”¨åŠ WebViewï¼‰</li>
<li>å¾®ä¿¡å°ç¨‹åº</li>
<li>æ”¯ä»˜å®å°ç¨‹åº</li>
<li>å¤´æ¡å°ç¨‹åº</li>
</ul>
<p>åç»­ä»ç„¶ä¼šå¯¹å¤šç«¯å°ç¨‹åºå…¼å®¹æ€§çš„æŒç»­æŠ•å…¥ï¼Œå¾ˆå¤šä¿®å¤ç›´æ¥é’ˆå¯¹å®¿ä¸»å·®å¼‚å±•å¼€ï¼ˆä¾‹å¦‚ Canvas è¡Œä¸ºã€provide/inject å®ç°å·®å¼‚ã€æ ·å¼å·®å¼‚ç­‰ï¼‰ã€‚</p>
<p>è¿‘æœŸåœ¨é¸¿è’™6.0ç³»ç»Ÿä¸Šè¿è¡ŒuView Proæºç ï¼Œæ•ˆæœè¿˜ä¸é”™ï¼Œå¦‚ä¸‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/53b3e9f1d36443d79d1bb9133458fd5f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5qKm5bel5Y6C:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764812531&amp;x-signature=L2RPF0FyxZSvsv399QRSUctDVnI%3D" alt="7.png" loading="lazy"/></p>
<h2 data-id="heading-20">ä¸ƒã€æœªæ¥è®¡åˆ’</h2>
<p>æ ¹æ®è§„åˆ’ï¼Œæœªæ¥å‡ ä¸ªæ–¹å‘åŒ…æ‹¬ï¼š</p>
<ul>
<li>æŒç»­ä¼˜åŒ–ç°æœ‰ç»„ä»¶ï¼Œæ–°å¢ç»„ä»¶ï¼Œæå‡ç”¨æˆ·ä½“éªŒï¼›</li>
<li>å›½é™…åŒ–ï¼ˆi18nï¼‰æ”¯æŒï¼šç»Ÿä¸€ç»„ä»¶çš„è¯­è¨€åˆ‡æ¢èƒ½åŠ›ï¼Œæ–¹ä¾¿å¤šè¯­è¨€äº§å“çº¿æ¥å…¥ï¼›</li>
<li>æš—é»‘æ¨¡å¼ï¼ˆDark Modeï¼‰ï¼šä¸è¿è¡Œæ—¶ä¸»é¢˜åˆ‡æ¢èƒ½åŠ›ç»“åˆï¼Œæä¾›æš—è‰²çš®è‚¤ä¸€é”®åˆ‡æ¢ä½“éªŒï¼›</li>
<li>ä¼˜åŒ–ç°æœ‰å¹³å°å…¼å®¹æ€§ï¼Œæ‰©å±•æ›´å¤šå¹³å°çš„é€‚é…æµ‹è¯•ï¼ˆä¿æŒå¯¹å°ç¨‹åºå®¿ä¸»çš„å…¼å®¹ä¿®å¤ï¼‰ï¼›</li>
<li>uni-app x æ”¯æŒï¼šç›®å‰è¿˜åœ¨è°ƒç ”ä¸­ï¼›</li>
<li>mcp æ”¯æŒã€‚</li>
</ul>
<h2 data-id="heading-21">å…«ã€ç»“è¯­</h2>
<p>å¦‚æœä½ åœ¨é¡¹ç›®ä¸­ä½¿ç”¨åˆ°ä»¥ä¸Šç»„ä»¶æˆ–å·¥å…·ï¼Œå¹¶å¸Œæœ›å‚ä¸è´¡çŒ®ï¼Œè¯·å‚è€ƒä»“åº“çš„è´¡çŒ®æŒ‡å—ã€‚æ¬¢è¿æ issueã€æäº¤ PRï¼Œæˆ–åœ¨æ’ä»¶å¸‚åœºä¸ç¤¾åŒºä¸­åé¦ˆä½¿ç”¨ä½“éªŒã€‚</p>
<ul>
<li>Githubï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fanyup%2FuView-Pro" target="_blank" title="https://github.com/anyup/uView-Pro" ref="nofollow noopener noreferrer">github.com/anyup/uViewâ€¦</a></li>
<li>Giteeï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Fanyup%2FuView-Pro" target="_blank" title="https://gitee.com/anyup/uView-Pro" ref="nofollow noopener noreferrer">gitee.com/anyup/uViewâ€¦</a></li>
<li>å¿«é€Ÿå¯åŠ¨ä»“åº“ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fanyup%2FuView-Pro-Starter" target="_blank" title="https://github.com/anyup/uView-Pro-Starter" ref="nofollow noopener noreferrer">github.com/anyup/uViewâ€¦</a></li>
<li>æ’ä»¶å¸‚åœºï¼ˆDCloudï¼‰ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fext.dcloud.net.cn%2Fplugin%3Fid%3D24633" target="_blank" title="https://ext.dcloud.net.cn/plugin?id=24633" ref="nofollow noopener noreferrer">ext.dcloud.net.cn/plugin?id=2â€¦</a></li>
<li>å®˜ç½‘ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fuviewpro.cn" target="_blank" title="https://uviewpro.cn" ref="nofollow noopener noreferrer">uviewpro.cn</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é€‚ç”¨äº iOS å¼€å‘è€…çš„ Flutter 3.38ï¼šXcode ä¸ Swift é›†æˆæ–°æŠ€å·§]]></title>    <link>https://juejin.cn/post/7576863819982929929</link>    <guid>https://juejin.cn/post/7576863819982929929</guid>    <pubDate>2025-11-27T01:51:32.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576863819982929929" data-draft-id="7575367791274000422" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é€‚ç”¨äº iOS å¼€å‘è€…çš„ Flutter 3.38ï¼šXcode ä¸ Swift é›†æˆæ–°æŠ€å·§"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-27T01:51:32.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="JarvanMo"/> <meta itemprop="url" content="https://juejin.cn/user/2348212565845704"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é€‚ç”¨äº iOS å¼€å‘è€…çš„ Flutter 3.38ï¼šXcode ä¸ Swift é›†æˆæ–°æŠ€å·§
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2348212565845704/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    JarvanMo
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-27T01:51:32.000Z" title="Thu Nov 27 2025 01:51:32 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>Flutter 3.38 è®© iOS é›†æˆæ¯”ä»¥å¾€ä»»ä½•æ—¶å€™éƒ½æ›´é¡ºç•…ã€‚</strong> å…¨æ–°çš„ Xcode å·¥å…·é“¾ã€æ›´å‡ºè‰²çš„ Swift äº’æ“ä½œæ€§ï¼Œä»¥åŠçœŸæ­£å®ç”¨çš„åŸç”Ÿæ’ä»¶æ¨¡å¼ã€‚ä»¥ä¸‹æ˜¯ iOS å¼€å‘è€…éœ€è¦äº†è§£çš„å…³é”®ä¿¡æ¯ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7288a6468ef04fa29c3ac19fef16c8fb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmFydmFuTW8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764813091&amp;x-signature=uzVEVSdjh0MH%2BovQIfc1vz9n%2B7w%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-0">ğŸ é’ˆå¯¹ Swift å¼€å‘è€…çš„ç¦éŸ³ï¼šFlutter 3.38 å¸¦æ¥çš„æ”¹å˜</h2>
<p>æ‚¨å·²ç»ä½¿ç”¨ Swift å¼€å‘äº†è®¸å¤šå‡ºè‰²çš„ iOS åº”ç”¨ã€‚æ‚¨å¯èƒ½ä¼šè§‰å¾— Flutter æ˜¯ä¸€ä¸ªæœ‰é£é™©çš„é¢å¤–æ¡†æ¶ï¼Œéœ€è¦å­¦ä¹ æ›´å¤šä¸œè¥¿ï¼Œè¿˜å¯èƒ½å¸¦æ¥å¯æ€•çš„å…¼å®¹æ€§é—®é¢˜ã€‚</p>
<p><strong>ä½† Flutter 3.38 æ”¹å˜äº†è¿™ç§çœ‹æ³•ã€‚</strong> æ–°ç‰ˆæœ¬é’ˆå¯¹ iOS çš„å·¥å…·é“¾æ˜¯çœŸæ­£<strong>é¡¶çº§</strong>çš„ã€‚Xcode é›†æˆè¿è¡Œè‰¯å¥½ã€‚Swift äº’æ“ä½œä¸å†è®©äººè§‰å¾—æ˜¯â€œæŠ•æœºå–å·§â€çš„æ–¹æ¡ˆã€‚Dart å¯ä»¥<strong>å’Œå¹³åœ°ä¸æ‚¨ç°æœ‰çš„åŸç”Ÿä»£ç å…±å­˜</strong>ã€‚</p>
<h3 data-id="heading-1">ğŸ› ï¸ Xcode é›†æˆï¼šå®å®åœ¨åœ¨çš„æ”¹è¿›</h3>
<p>æœ‰äº† Flutter 3.38ï¼Œç”ŸæˆåŸç”Ÿçš„ Xcode é¡¹ç›®<strong>ä¸å†åƒæ˜¯ä¸€ç§ä¸´æ—¶çš„è§£å†³æ–¹æ¡ˆ</strong>ã€‚è¿è¡Œ <code>flutter create</code> åˆ›å»ºçš„ iOS é¡¹ç›®ç°åœ¨<strong>ç¬¦åˆæœ€æ–°çš„ Apple å®è·µè§„èŒƒ</strong>ã€‚CocoaPods ä¾èµ–é¡¹å¾—åˆ°äº†å¦¥å–„ç®¡ç†ï¼Œæ„å»ºè®¾ç½®ä¹Ÿéµå¾ª Xcode çš„çº¦å®šã€‚</p>
<p><strong>æœ€å¤§çš„äº®ç‚¹ï¼šå¿«é€Ÿå¢é‡æ„å»º</strong></p>
<p>Dart ç¼–è¯‘æ­¥éª¤ä¸å†ç‹¬ç«‹è¿è¡Œï¼Œè€Œæ˜¯<strong>æ·±åº¦é›†æˆåˆ° Xcode çš„æ„å»ºç®¡é“ä¸­</strong>ã€‚è¿™ä½¿å¾—åœ¨æ¨¡æ‹Ÿå™¨ä¸Šä½¿ç”¨ <strong><code>Cmd+R</code> çš„è¿­ä»£å‘¨æœŸæ›´å¿«</strong>ã€‚å¯¹äºå¤§å‹é¡¹ç›®ï¼Œè¿­ä»£æ—¶é—´å°†åŠ å¿« <strong>20% è‡³ 30%</strong> ã€‚</p>
<p>æ„å»ºç¼“å­˜ä¹Ÿå˜å¾—æ›´æ™ºèƒ½ã€‚Xcode èƒ½å¤Ÿè¯†åˆ« Dart çš„ç¼–è¯‘äº§ç‰©ï¼Œå› æ­¤<strong>é‡å»ºæ—¶ä¸ä¼šç ´åæ‰€æœ‰å†…å®¹</strong>ã€‚å†·æ„å»ºï¼ˆé¦–æ¬¡æ„å»ºï¼‰ä»ç„¶éœ€è¦ä¸€äº›æ—¶é—´ï¼ˆè¿™æ˜¯è·¨å¹³å°çš„ç‰¹æ€§ï¼‰ï¼Œä½†çƒ­é‡å»ºçš„é€Ÿåº¦ç¡®å®éå¸¸å¿«ã€‚</p>
<h3 data-id="heading-2">ğŸ•Šï¸ Swift-to-Dart äº’æ“ä½œæ€§ï¼šå‡å°‘æ ·æ¿ä»£ç </h3>
<p>å¹³å°é€šé“ï¼ˆPlatform Channelsï¼‰ä¸€ç›´ä»¥æ¥éƒ½æ˜¯åŸç”Ÿ iOS å’Œ Flutter ä¹‹é—´çš„è¿æ¥æ–¹å¼ã€‚<strong>3.38 ç‰ˆæœ¬æ˜¾è‘—ç²¾ç®€äº†è¿™ä¸€è¿‡ç¨‹ã€‚</strong></p>
<p><strong>Pigeon</strong>ï¼š</p>
<p>è¿™æ˜¯ Flutter çš„ä»£ç ç”Ÿæˆå·¥å…·ï¼Œå¯å¼€ç®±å³ç”¨åœ°ç”Ÿæˆç±»å‹å®‰å…¨çš„ Swift APIã€‚æ‚¨æ— éœ€æ‰‹åŠ¨ç¼–å†™ MethodChannel çš„æ ·æ¿ä»£ç ï¼Œåªéœ€åœ¨ Dart ä¸­å®šä¹‰ä¸€æ¬¡ API æ¥å£ï¼Œç„¶åè®© Pigeon å®Œæˆå…¶ä½™çš„ç”Ÿæˆå·¥ä½œã€‚</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// Define your API once  </span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BatteryApi</span> </span>{  
<span class="hljs-meta">@async</span>  
Future&lt;<span class="hljs-built_in">int</span>&gt; getBatteryLevel();  
  
<span class="hljs-meta">@async</span>  
Future&lt;<span class="hljs-built_in">bool</span>&gt; isLowPowerMode();  
}
</code></pre>
<p>Pigeon å¯ä»¥ç”Ÿæˆç±»å‹å®‰å…¨çš„ Swift ä»£ç å’Œ Dart æ¥å£å­˜æ ¹ã€‚è¿™æ„å‘³ç€ä¸å†æœ‰åºåˆ—åŒ– Bugã€‚æ‚¨æ— éœ€å†çŒœæµ‹åŸç”Ÿå±‚éœ€è¦ä»€ä¹ˆæ•°æ®ç±»å‹ã€‚</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// Generated Swift automatically conforms to your API</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">BatteryPlugin</span>: <span class="hljs-title class_">NSObject</span>, <span class="hljs-title class_">FlutterPlugin</span>, <span class="hljs-title class_">BatteryApi</span> {
  <span class="hljs-keyword">func</span> <span class="hljs-title function_">getBatteryLevel</span>(<span class="hljs-params">completion</span>: <span class="hljs-keyword">@escaping</span> (<span class="hljs-type">Result</span>&lt;<span class="hljs-type">Int</span>, <span class="hljs-type">Error</span>&gt;) -&gt; <span class="hljs-type">Void</span>) {
    <span class="hljs-keyword">let</span> device <span class="hljs-operator">=</span> <span class="hljs-type">UIDevice</span>.current
    device.isBatteryMonitoringEnabled <span class="hljs-operator">=</span> <span class="hljs-literal">true</span>
    <span class="hljs-keyword">let</span> level <span class="hljs-operator">=</span> <span class="hljs-type">Int</span>(device.batteryLevel <span class="hljs-operator">*</span> <span class="hljs-number">100</span>)
    completion(.success(level))
  }
}
</code></pre>
<h2 data-id="heading-3">ğŸš€ Pigeon çš„å®ç”¨æ€§ä¸æ’ä»¶å¼€å‘æ¨¡å¼</h2>
<p><strong>è¿™ç¡®å®éå¸¸å®ç”¨ã€‚</strong> é¿å…äº†è¿è¡Œæ—¶æ„å¤–ã€‚<strong>ç±»å‹ä¸åŒ¹é…</strong>çš„é—®é¢˜ä¼šåœ¨<strong>ç¼–è¯‘æ—¶</strong>å°±è¢« Xcode æ£€æµ‹å‡ºæ¥ã€‚</p>
<h3 data-id="heading-4">æ’ä»¶å¼€å‘æ¨¡å¼ (Native Plugin Development Patterns)</h3>
<p><strong>æ’ä»¶æ¨¡æ¿</strong>åŠŸèƒ½åœ¨ 3.38 ç‰ˆæœ¬ä¸­å¼•å…¥ï¼Œå®ƒåˆ©ç”¨ <strong>Swift æœ€ä½³å®è·µ</strong>æ¥å¸®åŠ© iOS å¼€å‘è€…æ„å»ºè‡ªå®šä¹‰æ’ä»¶ã€‚ä½¿ç”¨å‘½ä»¤ <code>flutter create --template=plugin</code> ä¼šåˆ›å»ºä¸€ä¸ªç»„ç»‡ç»“æ„æ­£ç¡®çš„æ’ä»¶ï¼Œå¹¶é™„å¸¦ä¸€ä¸ªç¤ºä¾‹åº”ç”¨ã€‚</p>
<p><strong>æ¶æ„ç¬¦åˆ Apple çš„æ ‡å‡†</strong>ï¼šå®ƒå…¼å®¹ Swift Package Managerã€Frameworks å’Œ CocoaPodsã€‚æ‚¨çš„æ’ä»¶å¯ä»¥å…¼å®¹æ ‡å‡†çš„ Flutter é¡¹ç›®ï¼Œä¹Ÿèƒ½<strong>å…¼å®¹ç°æœ‰çš„åŸç”Ÿ iOS åº”ç”¨</strong>ã€‚</p>
<p><strong>æ‰€æœ‰ç”Ÿæˆçš„ä»£ç éƒ½ä¿è¯ä¸ä¼šè§¦å‘ç©ºå®‰å…¨é—®é¢˜ã€‚</strong> å‘Šåˆ«å¯é€‰å€¼ï¼ˆOptional Valueï¼‰çš„åœ°ç‹±ã€‚ç”Ÿæˆçš„æ¥å£ä»åº•å±‚å¼€å§‹å°±æ˜¯<strong>å®Œå…¨ç±»å‹åŒ–</strong>çš„ã€‚</p>
<hr/>
<h2 data-id="heading-5">ğŸ’¡ å®é™…é›†æˆå»ºè®® (Real-World Integration Advice)</h2>
<p><strong>ä»å°å¤„ç€æ‰‹ã€‚</strong> Flutter å¹¶éæ€»æ˜¯æœ€ä½³é€‰æ‹©â€”â€”ä¸è¦ç”¨å®ƒé‡å†™æ•´ä¸ª iOS åº”ç”¨ã€‚ç›¸åï¼Œè®© Flutter åªåšä¸€ä»¶äº‹â€”â€”æ¯”å¦‚ä¸€ä¸ªæ–°çš„ Tab é¡µé¢ã€ä¸€ä¸ªæ¨¡æ€æµç¨‹ï¼Œæˆ–æ˜¯ä¸€ä¸ª<strong>ç‹¬ç«‹å°é—­çš„æ¨¡å—</strong>ã€‚é€šè¿‡å¹³å°é€šé“è®¿é—®æ‚¨ç°æœ‰çš„ Swift ä»£ç ã€‚</p>
<p><strong>åœ¨ Xcode ä¸­è¿›è¡Œæ€§èƒ½åˆ†æã€‚</strong> ä½¿ç”¨ Instrumentsï¼ˆå¦‚ Time Profilerï¼‰æ¥åˆ†æå†…å­˜ã€CPU å’Œ FPSã€‚è™½ç„¶ Flutter æä¾›äº†ä¸é”™çš„æ€§èƒ½ï¼Œä½†æ‚¨ä»éœ€è¦åŠæ—©å‘ç°è¾¹ç¼˜æƒ…å†µã€‚</p>
<p><strong>åœ¨çœŸå®è®¾å¤‡ä¸Šæµ‹è¯•ã€‚</strong> æ¨¡æ‹Ÿå™¨çš„æ€§èƒ½å…·æœ‰è¯¯å¯¼æ€§ã€‚iOS 17 åŠä»¥ä¸Šç‰ˆæœ¬åœ¨è¡Œä¸ºä¸Šä¸æ¨¡æ‹Ÿå™¨æœ‰æ‰€ä¸åŒã€‚åœ¨çœŸå®è®¾å¤‡ä¸Šæµ‹è¯•å¯ä»¥ç«‹å³å‘ç°è¿™äº›é—®é¢˜ã€‚</p>
<hr/>
<h2 data-id="heading-6">ğŸ¯ iOS å¼€å‘è€…çš„è§†è§’ (The iOS Developerâ€™s Perspective)</h2>
<p><strong>Flutter 3.38 å°Šé‡æ‚¨çš„ iOS æŠ€èƒ½ã€‚</strong> å®ƒä¸è¦æ±‚æ‚¨æ”¾å¼ƒåŸç”Ÿå¼€å‘ã€‚å®ƒåœ¨ä¸è¦æ±‚æ‚¨â€œå­¤æ³¨ä¸€æ·â€ï¼ˆAll Inï¼‰çš„æƒ…å†µä¸‹ï¼Œä¸ºæ‚¨æä¾›äº†<strong>ç”Ÿäº§åŠ›ä¸Šçš„æå‡</strong>ã€‚</p>
<p><strong>è¿™æ˜¯ä¸€æ¬¡å®å®åœ¨åœ¨çš„èƒœåˆ©ã€‚</strong></p>
<h3 data-id="heading-7">æ ¸å¿ƒè¦ç‚¹ (Key Takeaways)</h3>
<ul>
<li><strong>ç”Ÿäº§å°±ç»ªå’Œ Apple è§„èŒƒï¼š</strong> Xcode é›†æˆç¬¦åˆ Apple çº¦å®šã€‚</li>
<li><strong>æ„å»ºç®¡é“é›†æˆï¼š</strong> åŸç”Ÿæ„å»ºç®¡é“é›†æˆå°†å¢é‡æ„å»ºé€Ÿåº¦<strong>æå‡ 20% è‡³ 30%</strong> ã€‚</li>
<li><strong>Pigeon è‡ªåŠ¨å®ç°ç±»å‹å®‰å…¨ï¼š</strong> é€šè¿‡ Pigeon è‡ªåŠ¨ç”Ÿæˆç±»å‹å®‰å…¨çš„ Swift-Dart æ¡¥æ¥ã€‚</li>
<li><strong>æ’ä»¶æ¨¡æ¿ï¼š</strong> å¼€ç®±å³ç”¨çš„ iOS æœ€ä½³å®è·µæ’ä»¶æ¨¡æ¿ã€‚</li>
<li><strong>ç©ºå®‰å…¨ï¼š</strong> æœç»å¹³å°é€šé“åºåˆ—åŒ–ç›¸å…³çš„ Bugã€‚</li>
<li><strong>å¾ªåºæ¸è¿›ï¼š</strong> è¿ç§»åˆ°æ–°æŠ€æœ¯é€šå¸¸æ˜¯æ¸è¿›çš„â€”â€”ä¸€æ¬¡åªé›†æˆä¸€ä¸ªæœåŠ¡ã€‚</li>
<li><strong>é›†æˆéšœç¢å·²æ¶ˆé™¤ã€‚</strong> åœ¨æ‚¨çš„ä¸‹ä¸€ä¸ªåŠŸèƒ½ä¸­è¯•ç”¨ä¸€ä¸‹å§ã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ¢ç§˜æ–°ä¸€ä»£å‘é‡å­˜å‚¨æ ¼å¼Lance-format (ä¸€)Lance é¡¹ç›®æ¦‚è§ˆä¸è®¾è®¡ç†å¿µ]]></title>    <link>https://juejin.cn/post/7576935292427567146</link>    <guid>https://juejin.cn/post/7576935292427567146</guid>    <pubDate>2025-11-27T01:49:02.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576935292427567146" data-draft-id="7576923573777596458" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ¢ç§˜æ–°ä¸€ä»£å‘é‡å­˜å‚¨æ ¼å¼Lance-format (ä¸€)Lance é¡¹ç›®æ¦‚è§ˆä¸è®¾è®¡ç†å¿µ"/> <meta itemprop="keywords" content="æ¶æ„"/> <meta itemprop="datePublished" content="2025-11-27T01:49:02.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¯­è½å¿ƒç”Ÿ"/> <meta itemprop="url" content="https://juejin.cn/user/2875978147955741"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ¢ç§˜æ–°ä¸€ä»£å‘é‡å­˜å‚¨æ ¼å¼Lance-format (ä¸€)Lance é¡¹ç›®æ¦‚è§ˆä¸è®¾è®¡ç†å¿µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2875978147955741/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¯­è½å¿ƒç”Ÿ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-27T01:49:02.000Z" title="Thu Nov 27 2025 01:49:02 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ç¬¬ä¸€ç« ï¼šLance é¡¹ç›®æ¦‚è§ˆä¸è®¾è®¡ç†å¿µ</h2>
<h3 data-id="heading-1">æ ¸å¿ƒæ¦‚è§ˆ</h3>
<p>Lance æ˜¯ä¸€ä¸ªé¢å‘å¤šæ¨¡æ€ AI å·¥ä½œæµçš„åˆ—å¼æ•°æ®æ ¼å¼ã€‚å®ƒè§£å†³çš„æ ¹æœ¬é—®é¢˜æ˜¯ï¼š<strong>å¦‚ä½•åœ¨ç»Ÿä¸€çš„å­˜å‚¨æ ¼å¼ä¸­ï¼Œé«˜æ•ˆåœ°æ”¯æŒå‘é‡æœç´¢ã€éšæœºè®¿é—®ã€SQL æŸ¥è¯¢å’Œå¤šæ¨¡æ€æ•°æ®å­˜å‚¨</strong>ã€‚</p>
<p>æƒ³è±¡æ‚¨åœ¨æ„å»ºä¸€ä¸ªè§†é¢‘æ¨èç³»ç»Ÿï¼š</p>
<ul>
<li>éœ€è¦å­˜å‚¨è§†é¢‘å…ƒæ•°æ®ï¼ˆæ ‡é¢˜ã€æè¿°ã€æ ‡ç­¾ï¼‰</li>
<li>éœ€è¦å­˜å‚¨è§†é¢‘çš„å‘é‡åµŒå…¥ç”¨äºç›¸ä¼¼åº¦æœç´¢</li>
<li>éœ€è¦å­˜å‚¨åŸå§‹è§†é¢‘æ•°æ®ï¼ˆBLOBï¼‰</li>
<li>éœ€è¦åœ¨è¿™äº›æ•°æ®ä¸Šæ‰§è¡Œå¤æ‚çš„ SQL æŸ¥è¯¢å’Œå‘é‡æœç´¢</li>
</ul>
<p>Lance å°±æ˜¯ä¸ºè¿™æ ·çš„åœºæ™¯è®¾è®¡çš„ã€‚</p>
<h3 data-id="heading-2">Lance ä¸»æ¶æ„è®¾è®¡</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TB
    subgraph "åº”ç”¨å±‚ Application Layer"
        A1["Python API&lt;br/&gt;(PyLance)"]
        A2["Java API&lt;br/&gt;(JNI)"]
        A3["Rust API"]
    end
    
    subgraph "æŸ¥è¯¢å¼•æ“å±‚ Query Engine"
        B1["DataFusion é›†æˆ&lt;br/&gt;lance-datafusion"]
        B2["SQL æŸ¥è¯¢&lt;br/&gt;è§£æä¸è§„åˆ’"]
        B3["Scanner&lt;br/&gt;æŸ¥è¯¢æ‰§è¡Œ"]
    end
    
    subgraph "æ•°æ®é›†å±‚ Dataset Layer"
        C1["Dataset&lt;br/&gt;ç‰ˆæœ¬ç®¡ç†"]
        C2["Transaction&lt;br/&gt;äº‹åŠ¡å¤„ç†"]
        C3["Fragment&lt;br/&gt;æ•°æ®åˆ†ç‰‡"]
        C4["Schema&lt;br/&gt;æ¼”åŒ–ç®¡ç†"]
    end
    
    subgraph "ç´¢å¼•å±‚ Index Layer"
        D1["å‘é‡ç´¢å¼•&lt;br/&gt;IVF/HNSW/FLAT"]
        D2["æ ‡é‡ç´¢å¼•&lt;br/&gt;BTree/Bitmap"]
        D3["å…¨æ–‡ç´¢å¼•&lt;br/&gt;Tantivy"]
    end
    
    subgraph "è¡¨ç®¡ç†å±‚ Table Layer"
        E1["Manifest&lt;br/&gt;lance-table"]
        E2["Commit åè®®&lt;br/&gt;ç‰ˆæœ¬æ§åˆ¶"]
        E3["RowID ç³»ç»Ÿ&lt;br/&gt;è¡Œåœ°å€ç®¡ç†"]
    end
    
    subgraph "å­˜å‚¨å±‚ Storage Layer"
        F1["æ–‡ä»¶æ ¼å¼&lt;br/&gt;lance-file"]
        F2["ç¼–ç å™¨&lt;br/&gt;lance-encoding"]
        F3["IO è°ƒåº¦&lt;br/&gt;lance-io"]
    end
    
    subgraph "æ ¸å¿ƒå±‚ Core Layer"
        G1["ç±»å‹ç³»ç»Ÿ&lt;br/&gt;lance-core"]
        G2["ç¼“å­˜ç®¡ç†"]
        G3["Arrow é›†æˆ&lt;br/&gt;lance-arrow"]
    end
    
    subgraph "å¯¹è±¡å­˜å‚¨ Object Storage"
        H1["S3"]
        H2["Azure Blob"]
        H3["GCS"]
        H4["æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿ"]
    end
    
    A1 --&gt; B1
    A2 --&gt; B1
    A3 --&gt; C1
    B1 --&gt; B3
    B2 --&gt; B1
    B3 --&gt; C1
    C1 --&gt; C2
    C1 --&gt; C3
    C1 --&gt; C4
    C1 --&gt; D1
    C1 --&gt; D2
    C3 --&gt; E1
    C2 --&gt; E2
    C1 --&gt; E3
    D1 --&gt; F1
    D2 --&gt; F1
    D3 --&gt; F1
    E1 --&gt; F1
    E2 --&gt; F1
    E3 --&gt; F1
    F1 --&gt; F2
    F1 --&gt; F3
    F2 --&gt; G1
    F3 --&gt; G1
    G1 --&gt; G3
    F3 --&gt; H1
    F3 --&gt; H2
    F3 --&gt; H3
    F3 --&gt; H4
</code></pre>
<h3 data-id="heading-3">æ ¸å¿ƒåŠŸèƒ½æ—¶åºå›¾</h3>
<h4 data-id="heading-4">1. æ•°æ®å†™å…¥æµç¨‹</h4>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant User
    participant Dataset
    participant Transaction
    participant Writer
    participant Encoder
    participant ObjectStore
    participant Manifest
    
    User-&gt;&gt;Dataset: write_dataset(data, uri)
    Dataset-&gt;&gt;Transaction: begin_transaction()
    Transaction-&gt;&gt;Writer: create_writer(schema)
    
    loop æ¯ä¸ª RecordBatch
        Writer-&gt;&gt;Encoder: encode_batch(batch)
        Encoder-&gt;&gt;Encoder: é€‰æ‹©ç¼–ç æ–¹å¼
        Encoder-&gt;&gt;ObjectStore: write_data_file()
        ObjectStore--&gt;&gt;Encoder: ç¡®è®¤å†™å…¥
    end
    
    Writer-&gt;&gt;Dataset: è¿”å› Fragments
    Dataset-&gt;&gt;Manifest: create_new_version()
    Manifest-&gt;&gt;ObjectStore: write_manifest()
    Dataset-&gt;&gt;Transaction: commit()
    Transaction-&gt;&gt;ObjectStore: åŸå­æ€§æäº¤
    Transaction--&gt;&gt;User: è¿”å›æ–°ç‰ˆæœ¬
</code></pre>
<h4 data-id="heading-5">2. æ•°æ®æ‰«ææµç¨‹</h4>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant User
    participant Scanner
    participant Dataset
    participant Fragment
    participant FileReader
    participant Decoder
    participant Cache
    
    User-&gt;&gt;Scanner: scan().project([columns])
    Scanner-&gt;&gt;Scanner: build_execution_plan()
    Scanner-&gt;&gt;Dataset: get_fragments()
    Dataset--&gt;&gt;Scanner: Fragmentåˆ—è¡¨
    
    loop æ¯ä¸ª Fragment
        Scanner-&gt;&gt;Fragment: open_reader()
        Fragment-&gt;&gt;FileReader: create_reader()
        FileReader-&gt;&gt;Cache: check_cache()
        
        alt ç¼“å­˜å‘½ä¸­
            Cache--&gt;&gt;FileReader: è¿”å›ç¼“å­˜æ•°æ®
        else ç¼“å­˜æœªå‘½ä¸­
            FileReader-&gt;&gt;Decoder: decode_page()
            Decoder-&gt;&gt;Decoder: è§£å‹ä¸è§£ç 
            Decoder--&gt;&gt;FileReader: RecordBatch
            FileReader-&gt;&gt;Cache: store_cache()
        end
        
        FileReader--&gt;&gt;Scanner: RecordBatch
    end
    
    Scanner--&gt;&gt;User: Stream&lt;RecordBatch&gt;
</code></pre>
<h4 data-id="heading-6">3. å‘é‡ç´¢å¼•åˆ›å»ºæµç¨‹</h4>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant User
    participant Dataset
    participant IndexBuilder
    participant KMeans
    participant Quantizer
    participant IVFStorage
    participant ObjectStore
    
    User-&gt;&gt;Dataset: create_index(column, IVF_PQ)
    Dataset-&gt;&gt;IndexBuilder: build_index()
    IndexBuilder-&gt;&gt;Dataset: scan_vectors()
    Dataset--&gt;&gt;IndexBuilder: å‘é‡æ•°æ®æµ
    
    IndexBuilder-&gt;&gt;KMeans: train_centroids(vectors, k)
    KMeans-&gt;&gt;KMeans: è¿­ä»£èšç±»
    KMeans--&gt;&gt;IndexBuilder: è´¨å¿ƒåˆ—è¡¨
    
    IndexBuilder-&gt;&gt;Quantizer: train_pq(vectors)
    Quantizer-&gt;&gt;Quantizer: å­¦ä¹  codebooks
    Quantizer--&gt;&gt;IndexBuilder: PQ æ¨¡å‹
    
    IndexBuilder-&gt;&gt;IndexBuilder: assign_to_partitions()
    
    loop æ¯ä¸ªåˆ†åŒº
        IndexBuilder-&gt;&gt;Quantizer: quantize_vectors()
        Quantizer--&gt;&gt;IndexBuilder: PQ codes
        IndexBuilder-&gt;&gt;IVFStorage: write_partition()
        IVFStorage-&gt;&gt;ObjectStore: æŒä¹…åŒ–
    end
    
    IndexBuilder-&gt;&gt;Dataset: update_index_metadata()
    Dataset-&gt;&gt;ObjectStore: æ›´æ–° Manifest
    Dataset--&gt;&gt;User: ç´¢å¼•åˆ›å»ºå®Œæˆ
</code></pre>
<h4 data-id="heading-7">4. å‘é‡æœç´¢æµç¨‹</h4>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant User
    participant Scanner
    participant VectorIndex
    participant IVF
    participant Quantizer
    participant PostFilter
    participant Ranker
    
    User-&gt;&gt;Scanner: nearest(query, k=10)
    Scanner-&gt;&gt;VectorIndex: search(query_vector)
    
    VectorIndex-&gt;&gt;IVF: compute_distances_to_centroids()
    IVF--&gt;&gt;VectorIndex: æ’åºçš„åˆ†åŒºåˆ—è¡¨
    
    VectorIndex-&gt;&gt;VectorIndex: select_nprobes(nprobes)
    
    loop å¯¹äºæ¯ä¸ªé€‰ä¸­çš„åˆ†åŒº
        VectorIndex-&gt;&gt;IVF: load_partition()
        IVF-&gt;&gt;Quantizer: approximate_distances()
        Quantizer--&gt;&gt;IVF: è¿‘ä¼¼è·ç¦»åˆ—è¡¨
        IVF-&gt;&gt;Ranker: add_candidates()
    end
    
    Ranker-&gt;&gt;Ranker: top_k_selection()
    Ranker-&gt;&gt;PostFilter: refine_distances()
    PostFilter-&gt;&gt;PostFilter: è®¡ç®—ç²¾ç¡®è·ç¦»
    PostFilter--&gt;&gt;Scanner: æœ€ç»ˆ Top-K ç»“æœ
    Scanner--&gt;&gt;User: RecordBatch with scores
</code></pre>
<h4 data-id="heading-8">5. äº‹åŠ¡æäº¤æµç¨‹</h4>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant Client
    participant Transaction
    participant CommitHandler
    participant DynamoDB
    participant ObjectStore
    participant Manifest
    
    Client-&gt;&gt;Transaction: commit_changes()
    Transaction-&gt;&gt;Transaction: validate_operations()
    Transaction-&gt;&gt;Manifest: build_new_manifest()
    Manifest--&gt;&gt;Transaction: manifest_data
    
    Transaction-&gt;&gt;CommitHandler: begin_commit()
    
    alt ä½¿ç”¨ DynamoDB é”
        CommitHandler-&gt;&gt;DynamoDB: acquire_lock(dataset_id)
        DynamoDB--&gt;&gt;CommitHandler: lock_acquired
    else ä½¿ç”¨æ–‡ä»¶é”
        CommitHandler-&gt;&gt;ObjectStore: create_lock_file()
        ObjectStore--&gt;&gt;CommitHandler: lock_acquired
    end
    
    CommitHandler-&gt;&gt;ObjectStore: write_manifest(version_n)
    ObjectStore--&gt;&gt;CommitHandler: write_success
    
    CommitHandler-&gt;&gt;ObjectStore: update_latest_pointer()
    ObjectStore--&gt;&gt;CommitHandler: update_success
    
    alt ä½¿ç”¨ DynamoDB é”
        CommitHandler-&gt;&gt;DynamoDB: release_lock()
    else ä½¿ç”¨æ–‡ä»¶é”
        CommitHandler-&gt;&gt;ObjectStore: delete_lock_file()
    end
    
    CommitHandler--&gt;&gt;Transaction: commit_success
    Transaction--&gt;&gt;Client: è¿”å›æ–°ç‰ˆæœ¬å·
</code></pre>
<hr/>
<h3 data-id="heading-9">ç¬¬ä¸€éƒ¨åˆ†ï¼šLance çš„å®šä½ä¸åº”ç”¨åœºæ™¯</h3>
<h4 data-id="heading-10">What - Lance æ˜¯ä»€ä¹ˆï¼Ÿ</h4>
<p><strong>å®šä¹‰</strong>ï¼šLance æ˜¯ä¸€ä¸ª Apache è®¸å¯çš„ã€å¼€æºçš„åˆ—å¼æ•°æ®æ ¼å¼å’Œè¡¨æ ¼å¼ï¼ˆLakehouse Formatï¼‰ã€‚</p>
<p>æ ¸å¿ƒç‰¹ç‚¹ï¼š</p>
<ul>
<li><strong>åˆ—å¼å­˜å‚¨</strong>ï¼šæŒ‰åˆ—è€Œéè¡Œå­˜å‚¨æ•°æ®ï¼Œé€‚åˆåˆ†æå‹æŸ¥è¯¢</li>
<li><strong>å‘é‡åŸç”Ÿæ”¯æŒ</strong>ï¼šå†…ç½®å‘é‡ç´¢å¼•å’Œæœç´¢èƒ½åŠ›</li>
<li><strong>å¤šæ¨¡æ€æ•°æ®</strong>ï¼šæ”¯æŒå›¾åƒã€è§†é¢‘ã€éŸ³é¢‘ã€æ–‡æœ¬ã€å‘é‡ç­‰æ··åˆå­˜å‚¨</li>
<li><strong>ACID äº‹åŠ¡</strong>ï¼šæ”¯æŒåŸå­æ€§æ›´æ–°å’Œç‰ˆæœ¬æ§åˆ¶</li>
</ul>
<h4 data-id="heading-11">Why - ä¸ºä»€ä¹ˆéœ€è¦ Lanceï¼Ÿ</h4>
<h5 data-id="heading-12">é—®é¢˜èƒŒæ™¯</h5>
<p>ä¼ ç»Ÿæ•°æ®æ ¼å¼å­˜åœ¨çš„ç—›ç‚¹ï¼š</p>















































<table><thead><tr><th>åŠŸèƒ½éœ€æ±‚</th><th>Parquet</th><th>ORC</th><th>Iceberg</th><th>Lance</th></tr></thead><tbody><tr><td>éšæœºè®¿é—®é€Ÿåº¦</td><td>â­</td><td>â­</td><td>â­â­</td><td>â­â­â­â­â­</td></tr><tr><td>å‘é‡æœç´¢æ”¯æŒ</td><td>âŒ</td><td>âŒ</td><td>âŒ</td><td>âœ…</td></tr><tr><td>å¤šæ¨¡æ€æ”¯æŒ</td><td>å·®</td><td>å·®</td><td>å·®</td><td>âœ…</td></tr><tr><td>Schema æ¼”åŒ–</td><td>å›°éš¾</td><td>å›°éš¾</td><td>âœ…</td><td>âœ…</td></tr><tr><td>ç‰ˆæœ¬æ§åˆ¶</td><td>éœ€è¦å¤–éƒ¨ç³»ç»Ÿ</td><td>éœ€è¦å¤–éƒ¨ç³»ç»Ÿ</td><td>âœ…</td><td>âœ…</td></tr></tbody></table>
<p><strong>ä¸ºä»€ä¹ˆé€‰æ‹© Lanceï¼Ÿ</strong></p>
<ol>
<li><strong>100 å€éšæœºè®¿é—®é€Ÿåº¦æå‡</strong>ï¼šParquet ä¸º 100ns/éšæœºè®¿é—®ï¼ŒLance ä¸º 1nsï¼Œå¯¹äº ML è®­ç»ƒè‡³å…³é‡è¦</li>
<li><strong>å‘é‡æœç´¢åŠ é€Ÿ</strong>ï¼šå†…ç½® IVF-PQã€HNSW ç­‰ç´¢å¼•ï¼Œæ¯«ç§’çº§æŸ¥è¯¢</li>
<li><strong>é›¶æ‹·è´ç‰ˆæœ¬æ§åˆ¶</strong>ï¼šæ— éœ€æ•°æ®å¤åˆ¶å³å¯å®ç°ç‰ˆæœ¬ç®¡ç†å’Œæ—¶é—´æ—…è¡Œ</li>
<li><strong>å¤šæ¨¡æ€ä¸€ä½“åŒ–</strong>ï¼šåœ¨åŒä¸€æ ¼å¼ä¸­å­˜å‚¨ç»“æ„åŒ–æ•°æ®å’Œéç»“æ„åŒ–æ•°æ®</li>
</ol>
<h4 data-id="heading-13">How - Lance å¦‚ä½•è§£å†³è¿™äº›é—®é¢˜ï¼Ÿ</h4>
<h5 data-id="heading-14">æ ¸å¿ƒè®¾è®¡åŸåˆ™</h5>
<pre><code class="hljs language-python" lang="python">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Lance çš„å››å¤§è®¾è®¡æ”¯æŸ±                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ <span class="hljs-number">1</span>ï¸âƒ£ é«˜æ•ˆçš„åˆ—å¼å­˜å‚¨                                        â”‚
â”‚    â†’ é€šè¿‡å¤šç§ç¼–ç ï¼ˆBitpackingã€<span class="hljs-type">Dict</span>ã€RLEï¼‰æœ€å°åŒ–å­˜å‚¨    â”‚
â”‚    â†’ æ”¯æŒå¿«é€Ÿåˆ—æ‰«æå’Œéšæœºè®¿é—®                            â”‚
â”‚                                                          â”‚
â”‚ <span class="hljs-number">2</span>ï¸âƒ£ å‘é‡åŸç”Ÿèƒ½åŠ›                                         â”‚
â”‚    â†’ å†…ç½®å‘é‡ç´¢å¼•å’Œé‡åŒ–æŠ€æœ¯                             â”‚
â”‚    â†’ æ”¯æŒæ··åˆæœç´¢ï¼ˆå‘é‡+SQLï¼‰                            â”‚
â”‚                                                          â”‚
â”‚ <span class="hljs-number">3</span>ï¸âƒ£ çµæ´»çš„ç‰ˆæœ¬ç®¡ç†                                       â”‚
â”‚    â†’ Manifest + Fragment è®¾è®¡                           â”‚
â”‚    â†’ æ— é”å¹¶å‘æ›´æ–°                                       â”‚
â”‚                                                          â”‚
â”‚ <span class="hljs-number">4</span>ï¸âƒ£ äº‘åŸç”Ÿæ¶æ„                                          â”‚
â”‚    â†’ åŸºäºå¯¹è±¡å­˜å‚¨ï¼ˆS3/GCS/Azureï¼‰                       â”‚
â”‚    â†’ åˆ†å¸ƒå¼è®¡ç®—å‹å¥½                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<hr/>
<h3 data-id="heading-15">ç¬¬äºŒéƒ¨åˆ†ï¼šä¸å…¶ä»–æ ¼å¼çš„å¯¹æ¯”ä¼˜åŠ¿</h3>
<h4 data-id="heading-16">Parquet ä¸ Lance çš„å·®å¼‚</h4>
<p><strong>åœºæ™¯ 1ï¼šæœºå™¨å­¦ä¹ è®­ç»ƒ</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># Parquet çš„é—®é¢˜ï¼šéœ€è¦é¡ºåºè¯»å–å¤§éƒ¨åˆ†æ•°æ®</span>
<span class="hljs-comment"># è®­ç»ƒä¸€ä¸ª 1000 ä¸‡è¡Œçš„æ•°æ®é›†ï¼Œä½†æ¯æ¬¡è¿­ä»£åªéœ€è¦ 100 è¡Œ</span>
<span class="hljs-comment"># - è¯»å– Parquetï¼šå¿…é¡»æ‰«ææ•´ä¸ªæ–‡ä»¶ï¼Œæ€§èƒ½ä½</span>

<span class="hljs-comment"># Lance çš„ä¼˜åŠ¿ï¼šæ”¯æŒéšæœºè¡Œè®¿é—®</span>
dataset = lance.<span class="hljs-built_in">open</span>(<span class="hljs-string">"features.lance"</span>)
<span class="hljs-comment"># ç›´æ¥è·å–ç¬¬ 5000ã€8000ã€12000 è¡Œï¼Œæ— éœ€å…¨æ‰«æ</span>
rows = dataset.take([<span class="hljs-number">5000</span>, <span class="hljs-number">8000</span>, <span class="hljs-number">12000</span>])
</code></pre>
<p><strong>åœºæ™¯ 2ï¼šå¤šæ¨¡æ€å­˜å‚¨</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># éœ€è¦å­˜å‚¨ï¼šæ–‡æœ¬ + å›¾åƒå‘é‡ + åŸå§‹å›¾åƒ</span>
<span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd
<span class="hljs-keyword">import</span> lance

df = pd.DataFrame({
    <span class="hljs-string">'text'</span>: [<span class="hljs-string">'A cat sleeping'</span>, <span class="hljs-string">'A dog running'</span>, ...],
    <span class="hljs-string">'image_vector'</span>: [[<span class="hljs-number">0.1</span>, <span class="hljs-number">0.2</span>, <span class="hljs-number">0.3</span>, ...], ...],  <span class="hljs-comment"># å‘é‡åµŒå…¥</span>
    <span class="hljs-string">'image_blob'</span>: [image_bytes_1, image_bytes_2, ...],  <span class="hljs-comment"># åŸå§‹å›¾åƒ</span>
})

<span class="hljs-comment"># Lance åŸç”Ÿæ”¯æŒè¿™ç§æ··åˆå­˜å‚¨</span>
dataset = lance.write_dataset(df, <span class="hljs-string">"multimodal.lance"</span>)
</code></pre>
<p><strong>åœºæ™¯ 3ï¼šå®æ—¶ç‰¹å¾æ›´æ–°</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># éœ€è¦ä¸æ–­æ›´æ–°ç‰¹å¾å€¼ï¼ŒåŒæ—¶ä¿æŒç‰ˆæœ¬å†å²</span>
<span class="hljs-comment"># Iceberg éœ€è¦é‡å†™å¤§é‡æ–‡ä»¶</span>
<span class="hljs-comment"># Lance åªéœ€è¿½åŠ æ–° Fragment + æ›´æ–° Manifest</span>

dataset = lance.<span class="hljs-built_in">open</span>(<span class="hljs-string">"features.lance"</span>)
dataset.add_column(<span class="hljs-string">"new_feature"</span>, values)  <span class="hljs-comment"># åŸå­æ€§æ·»åŠ </span>
<span class="hljs-comment"># è‡ªåŠ¨ç‰ˆæœ¬æ§åˆ¶ï¼Œå¯å›æº¯åˆ°ä»»ä½•å†å²ç‰ˆæœ¬</span>
</code></pre>
<h4 data-id="heading-17">ä¸ Iceberg çš„å·®å¼‚</h4>



































<table><thead><tr><th>æ–¹é¢</th><th>Iceberg</th><th>Lance</th></tr></thead><tbody><tr><td>è®¾è®¡ç›®æ ‡</td><td>æ•°æ®æ¹–ã€è¡¨ç®¡ç†</td><td>å‘é‡æœç´¢ã€ML å·¥ä½œæµ</td></tr><tr><td>å‘é‡æ”¯æŒ</td><td>æ— åŸç”Ÿæ”¯æŒ</td><td>å†…ç½®ç´¢å¼•å’Œé‡åŒ–</td></tr><tr><td>éšæœºè®¿é—®</td><td>éœ€è¦é¢å¤–ä¼˜åŒ–</td><td>å†…ç½®ä¼˜åŒ–</td></tr><tr><td>å­¦ä¹ æ›²çº¿</td><td>é™¡å³­</td><td>å¹³ç¼“</td></tr><tr><td>ç”Ÿæ€æ”¯æŒ</td><td>æ›´å®Œå–„ï¼ˆSparkã€Flinkï¼‰</td><td>æ­£åœ¨å¿«é€Ÿå‘å±•</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-18">ç¬¬ä¸‰éƒ¨åˆ†ï¼šæ•´ä½“æ¶æ„è®¾è®¡æ€æƒ³</h3>
<h4 data-id="heading-19">åˆ†å±‚æ¶æ„æ¨¡å‹</h4>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TB
    subgraph "åº”ç”¨å±‚ Application"
        A1["Python API"]
        A2["Java API"]
        A3["SQL Interface"]
    end
    
    subgraph "æŸ¥è¯¢å¼•æ“å±‚ Query Engine"
        B1["DataFusion"]
        B2["Scanner"]
        B3["Index Planner"]
    end
    
    subgraph "æ•°æ®ç®¡ç†å±‚ Data Management"
        C1["Dataset"]
        C2["Transaction"]
        C3["Version Control"]
    end
    
    subgraph "ç´¢å¼•åŠ é€Ÿå±‚ Index Acceleration"
        D1["å‘é‡ç´¢å¼•&lt;br/&gt;IVF/HNSW"]
        D2["æ ‡é‡ç´¢å¼•&lt;br/&gt;BTree/Bitmap"]
    end
    
    subgraph "å­˜å‚¨ç¼–ç å±‚ Storage &amp; Encoding"
        E1["File Format"]
        E2["Compression"]
        E3["Encoding"]
    end
    
    subgraph "å¯¹è±¡å­˜å‚¨ Object Storage"
        F["S3/GCS/Local"]
    end
    
    A1 --&gt; B1
    A2 --&gt; B1
    A3 --&gt; B1
    B1 --&gt; B2
    B1 --&gt; B3
    B2 --&gt; C1
    B3 --&gt; C1
    C1 --&gt; C2
    C1 --&gt; C3
    C1 --&gt; D1
    C1 --&gt; D2
    D1 --&gt; E1
    D2 --&gt; E1
    E1 --&gt; E2
    E2 --&gt; E3
    E3 --&gt; F
</code></pre>
<h4 data-id="heading-20">æ ¸å¿ƒè®¾è®¡æ€æƒ³è§£æ</h4>
<h5 data-id="heading-21">1. <strong>æ¨¡å—åŒ–ä¸å…³æ³¨ç‚¹åˆ†ç¦»</strong></h5>
<p>Lance éµå¾ªä¸¥æ ¼çš„åˆ†å±‚è®¾è®¡ï¼š</p>
<pre><code class="hljs language-sql" lang="sql">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  åº”ç”¨å±‚ï¼šæä¾›ç”¨æˆ·å‹å¥½çš„ APIï¼ˆPythonã€Javaã€<span class="hljs-keyword">SQL</span>ï¼‰         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  æŸ¥è¯¢å±‚ï¼šè´Ÿè´£æŸ¥è¯¢è§„åˆ’ã€ä¼˜åŒ–ã€æ‰§è¡Œ                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  æ•°æ®å±‚ï¼šDatasetã€Transactionã€ç‰ˆæœ¬ç®¡ç†                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ç´¢å¼•å±‚ï¼šå‘é‡ç´¢å¼•ã€æ ‡é‡ç´¢å¼•çš„æ„å»ºå’ŒæŸ¥è¯¢                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  å­˜å‚¨å±‚ï¼šæ–‡ä»¶æ ¼å¼ã€ç¼–ç ã€å‹ç¼©ã€IO è°ƒåº¦                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  åŸºç¡€è®¾æ–½ï¼šå¯¹è±¡å­˜å‚¨ã€ç¼“å­˜ã€çº¿ç¨‹ç®¡ç†                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<p><strong>ä¼˜åŠ¿</strong>ï¼š</p>
<ul>
<li>æ¯å±‚å¯ç‹¬ç«‹ä¼˜åŒ–å’Œæ‰©å±•</li>
<li>æ¸…æ™°çš„æ¥å£è¾¹ç•Œä¾¿äºç†è§£å’Œç»´æŠ¤</li>
<li>ä¾¿äºæ–°åŠŸèƒ½çš„æ·»åŠ ï¼ˆå¦‚æ–°çš„ç´¢å¼•ç±»å‹ï¼‰</li>
</ul>
<h5 data-id="heading-22">2. <strong>å¼‚æ­¥ä¼˜å…ˆè®¾è®¡</strong></h5>
<p>Lance å¤§é‡ä½¿ç”¨ Rust çš„å¼‚æ­¥ç¼–ç¨‹ï¼ˆtokio è¿è¡Œæ—¶ï¼‰ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-comment">// ä¸é˜»å¡ IO çš„å†™å…¥</span>
<span class="hljs-keyword">await</span> dataset.<span class="hljs-title function_ invoke__">write</span>(data);

<span class="hljs-comment">// å¹¶å‘è¯»å–å¤šä¸ª Fragment</span>
<span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">futures</span> = fragments
    .<span class="hljs-title function_ invoke__">iter</span>()
    .<span class="hljs-title function_ invoke__">map</span>(|f| f.<span class="hljs-title function_ invoke__">read_async</span>())
    .collect::&lt;<span class="hljs-type">Vec</span>&lt;_&gt;&gt;();
futures::future::<span class="hljs-title function_ invoke__">join_all</span>(futures).<span class="hljs-keyword">await</span>;
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆï¼Ÿ</strong></p>
<ul>
<li>I/O ä¸å†é˜»å¡è®¡ç®—çº¿ç¨‹</li>
<li>å•ä¸ªçº¿ç¨‹å¯å¤„ç†æ•°åƒä¸ªå¹¶å‘è¯·æ±‚</li>
<li>åœ¨äº‘ç¯å¢ƒä¸­è¡¨ç°ä¼˜å¼‚</li>
</ul>
<h5 data-id="heading-23">3. <strong>é›¶æ‹·è´ä¸ Arrow åŸç”Ÿ</strong></h5>
<p>Lance ä¸ Apache Arrow æ·±åº¦é›†æˆï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-comment">// æ•°æ®ä»æ–‡ä»¶è§£ç ç›´æ¥å˜æˆ Arrow RecordBatch</span>
<span class="hljs-comment">// æ— éœ€ä¸­é—´è½¬æ¢æˆ–æ‹·è´</span>
<span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">batch</span>: RecordBatch = decoder.<span class="hljs-title function_ invoke__">decode</span>().<span class="hljs-keyword">await</span>?;

<span class="hljs-comment">// RecordBatch å¯ç›´æ¥ä¼ é€’ç»™ NumPyã€Pandasã€Polars</span>
<span class="hljs-comment">// å…±äº«å†…å­˜åœ°å€ï¼Œé›¶æ‹·è´</span>
</code></pre>
<h5 data-id="heading-24">4. <strong>ç´¢å¼•é€æ˜åŒ–</strong></h5>
<p>ç´¢å¼•å¯¹ç”¨æˆ·å®Œå…¨é€æ˜ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># ç”¨æˆ·ç¼–å†™ç®€å•çš„æŸ¥è¯¢</span>
results = dataset.search(query_vector, k=<span class="hljs-number">10</span>)

<span class="hljs-comment"># å†…éƒ¨è‡ªåŠ¨é€‰æ‹©æœ€ä¼˜ç´¢å¼•</span>
<span class="hljs-comment"># - å¦‚æœæœ‰å‘é‡ç´¢å¼• â†’ ä½¿ç”¨ IVF/HNSW</span>
<span class="hljs-comment"># - å¦‚æœæœ‰æ ‡é‡ç´¢å¼• â†’ ä½¿ç”¨è°“è¯ä¸‹æ¨</span>
<span class="hljs-comment"># - å¦åˆ™ â†’ å…¨è¡¨æ‰«æ</span>
</code></pre>
<hr/>
<h3 data-id="heading-25">å®æˆ˜åœºæ™¯ç¤ºä¾‹</h3>
<h4 data-id="heading-26">åœºæ™¯ 1ï¼šç”µå•†æ¨èç³»ç»Ÿ</h4>
<p><strong>éœ€æ±‚</strong>ï¼š</p>
<ul>
<li>å­˜å‚¨ 1 äº¿ä¸ªå•†å“ï¼ˆIDã€åç§°ã€æè¿°ã€ä»·æ ¼ã€åˆ†ç±»ï¼‰</li>
<li>æ¯ä¸ªå•†å“æœ‰ 768 ç»´å‘é‡åµŒå…¥</li>
<li>éœ€è¦åŸºäºå‘é‡çš„ç›¸ä¼¼å•†å“æ¨è</li>
<li>éœ€è¦åŸºäºä»·æ ¼ã€åˆ†ç±»çš„æ ‡é‡è¿‡æ»¤</li>
</ul>
<p><strong>Lance è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> lance
<span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd
<span class="hljs-keyword">from</span> lance.vector_search <span class="hljs-keyword">import</span> IVF_PQ

<span class="hljs-comment"># 1. åˆå§‹æ•°æ®åŠ è½½</span>
products = pd.read_csv(<span class="hljs-string">"products.csv"</span>)
dataset = lance.write_dataset(products, <span class="hljs-string">"products.lance"</span>)

<span class="hljs-comment"># 2. åˆ›å»ºå‘é‡ç´¢å¼•åŠ é€Ÿæœç´¢</span>
dataset.create_index(<span class="hljs-string">"vector"</span>, index_type=IVF_PQ(num_partitions=<span class="hljs-number">256</span>))

<span class="hljs-comment"># 3. æ¨èæŸ¥è¯¢ï¼ˆå‘é‡ + SQLï¼‰</span>
query_vector = embed_text(<span class="hljs-string">"é«˜ç«¯è¿åŠ¨é‹"</span>)
results = dataset.search(
    query_vector,
    k=<span class="hljs-number">100</span>,
    where=<span class="hljs-string">"price &lt; 500 AND category == 'é‹ç±»'"</span>,  <span class="hljs-comment"># æ ‡é‡è¿‡æ»¤</span>
    metric=<span class="hljs-string">"cosine"</span>
)
<span class="hljs-comment"># æ¯«ç§’çº§è¿”å›æœ€ç›¸å…³çš„ 100 ä¸ªå•†å“</span>
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆ Lance ä¼˜äº Elasticsearchï¼Ÿ</strong></p>
<ul>
<li>æ›´ç´§å‡‘çš„å­˜å‚¨ï¼ˆç¼–ç ä¼˜åŒ–ï¼‰</li>
<li>æ›´å¿«çš„å‘é‡æœç´¢ï¼ˆPQ é‡åŒ–ï¼‰</li>
<li>åŸç”Ÿ SQL æ”¯æŒï¼ˆæ— éœ€å†™ JSON æŸ¥è¯¢ï¼‰</li>
<li>æ›´ä½çš„å­¦ä¹ æˆæœ¬</li>
</ul>
<h4 data-id="heading-27">åœºæ™¯ 2ï¼šç”Ÿç‰©ä¿¡æ¯å­¦åˆ†æ</h4>
<p><strong>éœ€æ±‚</strong>ï¼š</p>
<ul>
<li>å­˜å‚¨åŸºå› åºåˆ—æ•°æ®ï¼ˆè¶…å¤§ BLOBï¼‰</li>
<li>å­˜å‚¨ DNA åºåˆ—çš„å‘é‡åŒ–è¡¨ç¤º</li>
<li>æ”¯æŒç›¸ä¼¼æ€§æœç´¢å’Œç»Ÿè®¡åˆ†æ</li>
</ul>
<p><strong>Lance ä¼˜åŠ¿</strong>ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># å­˜å‚¨åŸå§‹ DNA åºåˆ— + å‘é‡åŒ–è¡¨ç¤º</span>
dna_data = pd.DataFrame({
    <span class="hljs-string">'gene_id'</span>: [<span class="hljs-string">'BRCA1'</span>, <span class="hljs-string">'TP53'</span>, ...],
    <span class="hljs-string">'sequence'</span>: [dna_seq_1, dna_seq_2, ...],  <span class="hljs-comment"># è¶…å¤§å­—ç¬¦ä¸²</span>
    <span class="hljs-string">'embedding'</span>: [vec1, vec2, ...],  <span class="hljs-comment"># 768 ç»´å‘é‡</span>
    <span class="hljs-string">'properties'</span>: [prop1, prop2, ...]  <span class="hljs-comment"># å…ƒæ•°æ®</span>
})

dataset = lance.write_dataset(dna_data, <span class="hljs-string">"dna.lance"</span>)

<span class="hljs-comment"># ç›´æ¥æ”¯æŒæ··åˆæŸ¥è¯¢</span>
results = dataset.search(
    query_embedding,
    k=<span class="hljs-number">10</span>,
    where=<span class="hljs-string">"properties.organism == 'human'"</span>
)
</code></pre>
<hr/>
<h3 data-id="heading-28">æ ¸å¿ƒå·¥ä½œæµæ¦‚è§ˆ</h3>
<h4 data-id="heading-29">ä¸€ä¸ªå®Œæ•´çš„ Lance ä½¿ç”¨å‘¨æœŸ</h4>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant User
    participant Python API
    participant Dataset
    participant Index
    participant Storage
    
    User-&gt;&gt;Python API: 1. åˆ›å»ºæ•°æ®é›†
    Python API-&gt;&gt;Dataset: write_dataset(data)
    Dataset-&gt;&gt;Storage: å†™å…¥æ–‡ä»¶
    
    User-&gt;&gt;Python API: 2. åˆ›å»ºç´¢å¼•
    Python API-&gt;&gt;Dataset: create_index()
    Dataset-&gt;&gt;Index: æ„å»ºå‘é‡ç´¢å¼•
    Index-&gt;&gt;Storage: ä¿å­˜ç´¢å¼•
    
    User-&gt;&gt;Python API: 3. æ‰§è¡ŒæŸ¥è¯¢
    Python API-&gt;&gt;Dataset: search(query)
    Dataset-&gt;&gt;Index: ä½¿ç”¨ç´¢å¼•åŠ é€Ÿ
    Index-&gt;&gt;Storage: è¯»å–æ•°æ®
    Python API--&gt;&gt;User: è¿”å›ç»“æœ
    
    User-&gt;&gt;Python API: 4. æ›´æ–°æ•°æ®
    Python API-&gt;&gt;Dataset: add_column()/update()
    Dataset-&gt;&gt;Storage: åŸå­æ€§æäº¤
    Dataset--&gt;&gt;User: æ–°ç‰ˆæœ¬å·
</code></pre>
<hr/>
<h3 data-id="heading-30">å…³é”®è®¾è®¡å†³ç­–æ€»ç»“</h3>








































<table><thead><tr><th>å†³ç­–</th><th>åŸå› </th><th>æƒè¡¡</th></tr></thead><tbody><tr><td><strong>Rust å®ç°</strong></td><td>æ€§èƒ½ã€å†…å­˜å®‰å…¨</td><td>å¼€å‘æ•ˆç‡ç¨ä½</td></tr><tr><td><strong>Async First</strong></td><td>é«˜å¹¶å‘ã€äº‘åŸç”Ÿ</td><td>ç¼–ç¨‹å¤æ‚åº¦å¢åŠ </td></tr><tr><td><strong>åˆ—å¼å­˜å‚¨</strong></td><td>æ‰«ææ€§èƒ½ã€å‹ç¼©ç‡</td><td>ä¸é€‚åˆè¡Œçº§æ›´æ–°</td></tr><tr><td><strong>å¤šç§ç¼–ç </strong></td><td>é€‚åº”ä¸åŒæ•°æ®ç±»å‹</td><td>ç¼–ç /è§£ç å¼€é”€</td></tr><tr><td><strong>å‘é‡ç´¢å¼•</strong></td><td>ML å·¥ä½œæµå¿…éœ€</td><td>ç´¢å¼•æ„å»ºæˆæœ¬</td></tr><tr><td><strong>é›¶æ‹·è´è®¾è®¡</strong></td><td>å‡å°‘å†…å­˜å ç”¨</td><td>ä¾èµ– Arrow å…¼å®¹æ€§</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-31">æ€»ç»“</h3>
<p>Lance é€šè¿‡ä»¥ä¸‹åˆ›æ–°è§£å†³äº† AI æ—¶ä»£çš„æ•°æ®å­˜å‚¨éš¾é¢˜ï¼š</p>
<ol>
<li><strong>æ€§èƒ½ä¼˜å…ˆ</strong>ï¼š100 å€éšæœºè®¿é—®ã€æ¯«ç§’çº§å‘é‡æœç´¢</li>
<li><strong>åŠŸèƒ½å…¨é¢</strong>ï¼šå‘é‡ã€SQLã€å¤šæ¨¡æ€åœ¨ä¸€ä¸ªç³»ç»Ÿä¸­</li>
<li><strong>ç”¨æˆ·å‹å¥½</strong>ï¼šè‡ªåŠ¨ç´¢å¼•é€‰æ‹©ã€é€æ˜çš„ä¼˜åŒ–</li>
<li><strong>ç”Ÿäº§å°±ç»ª</strong>ï¼šACID äº‹åŠ¡ã€ç‰ˆæœ¬æ§åˆ¶ã€äº‘æ”¯æŒ</li>
</ol>
<p>åœ¨æ¥ä¸‹æ¥çš„ç« èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†æ·±å…¥æ¢è®¨ Lance çš„å†…éƒ¨å®ç°ç»†èŠ‚ï¼Œä»é¡¹ç›®ç»“æ„ã€æ•°æ®æ¨¡å‹ã€æ–‡ä»¶æ ¼å¼ã€åˆ°ç´¢å¼•å’ŒæŸ¥è¯¢å¼•æ“ï¼Œå…¨é¢ç†è§£è¿™ä¸ªå¼ºå¤§çš„ç³»ç»Ÿæ˜¯å¦‚ä½•è¿ä½œçš„ã€‚</p>
<hr/>
<h3 data-id="heading-32">å…³é”®æ¦‚å¿µé€Ÿè®°</h3>
<ul>
<li><strong>åˆ—å¼å­˜å‚¨</strong>ï¼šæŒ‰åˆ—è€Œéè¡Œç»„ç»‡æ•°æ®</li>
<li><strong>å‘é‡ç´¢å¼•</strong>ï¼šåŠ é€Ÿå‘é‡ç›¸ä¼¼æ€§æœç´¢çš„æ•°æ®ç»“æ„</li>
<li><strong>IVF-PQ</strong>ï¼šä¹˜ç§¯é‡åŒ–çš„å€’æ’æ–‡ä»¶ï¼ŒLance ä¸­å¸¸ç”¨çš„ç´¢å¼•æ–¹å¼</li>
<li><strong>Manifest</strong>ï¼šè®°å½•æ•°æ®é›†ç‰ˆæœ¬ä¿¡æ¯çš„å…ƒæ•°æ®æ–‡ä»¶</li>
<li><strong>Fragment</strong>ï¼šæ•°æ®é›†ä¸­çš„æ•°æ®åˆ†ç‰‡å•ä½</li>
<li><strong>é›¶æ‹·è´</strong>ï¼šæ•°æ®åœ¨å†…å­˜ä¸­ä¼ é€’è€Œæ— éœ€å¤åˆ¶</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item>  </channel></rss>