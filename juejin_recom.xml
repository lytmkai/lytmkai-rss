<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>æ˜é‡‘æ–‡ç« æ¨è</title>      <link>https://juejin.cn/recommended?sort=newest</link>      <description>ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</description>      <generator>python juejin_recom.py @Pi20</generator>      <item>    <title><![CDATA[Sentinelä¸Envoyé™æµï¼šå®šä½ã€å®ç°ä¸åœºæ™¯çš„æ·±åº¦å¯¹æ¯”]]></title>    <link>https://juejin.cn/post/7603004323870162987</link>    <guid>https://juejin.cn/post/7603004323870162987</guid>    <pubDate>2026-02-05T00:12:05.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603004323870162987" data-draft-id="7602816610932195391" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Sentinelä¸Envoyé™æµï¼šå®šä½ã€å®ç°ä¸åœºæ™¯çš„æ·±åº¦å¯¹æ¯”"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-02-05T00:12:05.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ITæ©˜å­çš®"/> <meta itemprop="url" content="https://juejin.cn/user/3148645291002232"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Sentinelä¸Envoyé™æµï¼šå®šä½ã€å®ç°ä¸åœºæ™¯çš„æ·±åº¦å¯¹æ¯”
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3148645291002232/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ITæ©˜å­çš®
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-05T00:12:05.000Z" title="Thu Feb 05 2026 00:12:05 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-05
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿæ¶æ„ä¸­ï¼Œ<strong>æµé‡æ²»ç†</strong>æ˜¯ä¿éšœæœåŠ¡ç¨³å®šæ€§ã€å¼¹æ€§çš„æ ¸å¿ƒç¯èŠ‚ã€‚Sentinelå’ŒEnvoyä½œä¸ºäº‘åŸç”Ÿæ—¶ä»£æµé‡æ²»ç†çš„æ˜æ˜Ÿå·¥å…·ï¼Œè™½éƒ½å…·å¤‡é™æµèƒ½åŠ›ï¼Œä½†åœ¨è®¾è®¡ç†å¿µã€æŠ€æœ¯å®ç°ã€é€‚ç”¨åœºæ™¯ä¸Šå­˜åœ¨æ˜¾è‘—å·®å¼‚ã€‚æœ¬æ–‡ä»æ ¸å¿ƒå®šä½ã€é™æµæœºåˆ¶ã€ç”Ÿæ€é›†æˆç­‰ç»´åº¦å±•å¼€åˆ†æï¼Œå¸®åŠ©è¯»è€…ç†è§£ä¸¤è€…çš„æœ¬è´¨åŒºåˆ«ã€‚</p>
<h3 data-id="heading-0">ä¸€ã€æ ¸å¿ƒå®šä½ï¼šåº”ç”¨å±‚ vs åŸºç¡€è®¾æ–½å±‚çš„æµé‡æ²»ç†</h3>
<h4 data-id="heading-1">Sentinelï¼šèšç„¦åº”ç”¨å±‚çš„ç¨³å®šæ€§â€œå®ˆæŠ¤è€…â€</h4>
<p>Sentinel æ˜¯é˜¿é‡Œå·´å·´å¼€æºçš„<strong>åº”ç”¨å±‚æµé‡æ²»ç†æ¡†æ¶</strong>ï¼Œæ ¸å¿ƒä»¥ <strong>â€œæµé‡â€ä¸ºåˆ‡å…¥ç‚¹</strong>ï¼Œè¦†ç›–<strong>æµé‡æ§åˆ¶ã€ç†”æ–­é™çº§ã€ç³»ç»Ÿè´Ÿè½½ä¿æŠ¤</strong>ä¸‰å¤§ç»´åº¦ï¼Œç›®æ ‡æ˜¯è§£å†³å¾®æœåŠ¡åœºæ™¯ä¸‹çš„ç¨³å®šæ€§ç—›ç‚¹ï¼ˆå¦‚é›ªå´©ã€è¿‡è½½ã€çƒ­ç‚¹è¯·æ±‚æ´ªå³°ï¼‰ã€‚</p>
<ul>
<li>æŠ€æœ¯å±æ€§ï¼šæ·±åº¦ç»‘å®šåº”ç”¨è¿›ç¨‹ï¼ˆé€šè¿‡ Java SDKã€Go SDK ç­‰å¤šè¯­è¨€æ”¯æŒï¼‰ï¼Œå±äº<strong>ä¸šåŠ¡ä¾§æµé‡æ²»ç†ä¸­é—´ä»¶</strong>ï¼Œéœ€åµŒå…¥ä¸šåŠ¡ä»£ç ï¼ˆæˆ–é€šè¿‡å­—èŠ‚ç å¢å¼ºã€æ¡†æ¶é›†æˆï¼‰ç”Ÿæ•ˆã€‚</li>
<li>å…¸å‹åœºæ™¯ï¼šç”µå•†ç§’æ€æ¥å£çš„ QPS é™æµã€ä¸‹æ¸¸æœåŠ¡ç†”æ–­ï¼ˆé˜²æ­¢ DB è¿æ¥æ± æ‰“æ»¡æ‹–å®è‡ªèº«ï¼‰ã€ç³»ç»Ÿè´Ÿè½½è¿‡é«˜æ—¶çš„è‡ªåŠ¨é™çº§ï¼ˆå¦‚è®¢å•æœåŠ¡ CPU 100% æ—¶æ‹’ç»éæ ¸å¿ƒè¯·æ±‚ï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-2">Envoyï¼šèšç„¦åŸºç¡€è®¾æ–½å±‚çš„æµé‡â€œè°ƒåº¦å‘˜â€</h4>
<p>Envoy æ˜¯äº‘åŸç”Ÿæ—¶ä»£<strong>Service Mesh æ¶æ„çš„æ•°æ®å¹³é¢æ ¸å¿ƒç»„ä»¶</strong>ï¼Œå®šä½ä¸º <strong>â€œæ™ºèƒ½ä»£ç†â€</strong> ï¼Œä¸»æ‰“<strong>å…¨ç”Ÿå‘½å‘¨æœŸçš„æµé‡ç®¡ç†</strong>ï¼ˆè·¯ç”±ã€è´Ÿè½½å‡è¡¡ã€é™æµã€è§‚æµ‹ç­‰ï¼‰ï¼Œæ˜¯å¾®æœåŠ¡é›†ç¾¤â€œæµé‡é«˜é€Ÿå…¬è·¯â€çš„ç®¡ç†è€…ã€‚</p>
<ul>
<li>æŠ€æœ¯å±æ€§ï¼šä»¥ Sidecar æ¨¡å¼è¿è¡Œï¼ˆä¸ä¸šåŠ¡ Pod å…±äº«ç½‘ç»œå‘½åç©ºé—´ï¼‰ï¼Œå±äº<strong>åŸºç¡€è®¾æ–½å±‚æµé‡æ²»ç†å·¥å…·</strong>ï¼Œå¯¹ä¸šåŠ¡ä»£ç é€æ˜ï¼ˆä»…éœ€åœ¨ç½‘æ ¼é…ç½®ä¸­å£°æ˜æµé‡è§„åˆ™ï¼‰ã€‚</li>
<li>å…¸å‹åœºæ™¯ï¼šå¤šé›†ç¾¤é—´ä¸œè¥¿å‘æµé‡çš„å…¨å±€ QPS é™åˆ¶ã€ç°åº¦å‘å¸ƒæ—¶çš„æµé‡åˆ‡åˆ†ï¼ˆéƒ¨åˆ†æµé‡åˆ°æ–°ç‰ˆæœ¬æœåŠ¡ï¼‰ã€å—åŒ—å‘æµé‡çš„ mTLS åŠ å¯†+é™æµï¼ˆä¿éšœå…¥å£ç½‘å…³å®‰å…¨ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-3">äºŒã€é™æµå®ç°ï¼šè¿›ç¨‹å†…ç»†ç²’åº¦ vs ç½‘ç»œå±‚åŠ¨æ€åŒ–</h3>
<p>é™æµèƒ½åŠ›çš„å·®å¼‚ï¼Œæœ¬è´¨æ˜¯ <strong>â€œåœ¨å“ªé‡Œé™æµâ€å’Œâ€œæ€ä¹ˆé™æµâ€</strong> çš„åŒºåˆ«ã€‚</p>
<h4 data-id="heading-4">1. èµ„æºç²’åº¦ï¼šåº”ç”¨å†…ç»†èŠ‚ vs é›†ç¾¤çº§æŠ½è±¡</h4>
<ul>
<li>Sentinelï¼šæ”¯æŒ<strong>æ–¹æ³•çº§ã€æ¥å£çº§ç”šè‡³è‡ªå®šä¹‰èµ„æº</strong>çš„é™æµã€‚ä¾‹å¦‚ï¼šå¯å¯¹æŸ Java æ–¹æ³• <code>OrderService.createOrder()</code>å•ç‹¬é…ç½® QPS é™æµè§„åˆ™ï¼Œä¹Ÿèƒ½åŸºäºâ€œç”¨æˆ· IDï¼ˆçƒ­ç‚¹å‚æ•°ï¼‰â€åšç²¾ç»†åŒ–æµæ§ï¼ˆé˜²æ­¢æ¶æ„åˆ·å•ï¼‰ã€‚èµ„æºç²’åº¦æ¸—é€åˆ°ä¸šåŠ¡é€»è¾‘å±‚ï¼Œé€‚åˆå¯¹â€œå•ä¸ªæœåŠ¡å†…éƒ¨ç¯èŠ‚â€çš„ç²¾å‡†ç®¡æ§ã€‚</li>
<li>Envoyï¼šé™æµç²’åº¦åå‘<strong>åŸºç¡€è®¾æ–½å±‚æŠ½è±¡</strong>ï¼Œå¦‚ HTTP è¯·æ±‚çº§ã€Upstream é›†ç¾¤çº§ã€‚ä¾‹å¦‚ï¼šå¯¹ <code>product-service</code>è¿™ä¸ª Upstream é›†ç¾¤æ•´ä½“é…ç½®æ¯ç§’ 1000 æ¬¡è¯·æ±‚çš„é™åˆ¶ï¼Œæˆ–å¯¹ <code>/api/v1/users</code>è·¯å¾„çš„æ‰€æœ‰è¯·æ±‚åšé™æµã€‚èµ„æºç²’åº¦å¯¹åº”â€œç½‘ç»œè¯·æ±‚â€æˆ–â€œæœåŠ¡é›†ç¾¤â€ï¼Œæ›´é€‚åˆå…¨å±€æµé‡çš„å®è§‚è°ƒæ§ã€‚</li>
</ul>
<h4 data-id="heading-5">2. ç®—æ³•ä¸è§„åˆ™ï¼šå†…ç½®ä¸°å¯Œæ€§ vs åŠ¨æ€å¯æ‰©å±•æ€§</h4>
<ul>
<li>Sentinel å†…ç½®<strong>ä»¤ç‰Œæ¡¶ã€æ¼æ¡¶ã€æ»‘åŠ¨çª—å£ã€çƒ­ç‚¹å‚æ•°é™æµ</strong>ç­‰ç®—æ³•ï¼Œä¸”æä¾›<strong>è§„åˆ™åŠ¨æ€æ¨é€</strong>ï¼ˆå¯¹æ¥ Nacos/Apollo ç­‰é…ç½®ä¸­å¿ƒï¼‰ã€‚å¼€å‘è€…å¯é€šè¿‡ç®€å•é…ç½®ï¼ˆå¦‚ <code>FlowRule</code>ï¼‰å¿«é€Ÿå®ç°â€œå•æœº QPS ä¸è¶…è¿‡ 500â€â€œé›†ç¾¤æ€» QPS ä¸è¶…è¿‡ 5000â€ç­‰è§„åˆ™ï¼Œç”šè‡³æ”¯æŒè‡ªå®šä¹‰æµæ§ç®—æ³•ï¼ˆé€šè¿‡ SPI æ‰©å±•ï¼‰ã€‚</li>
<li>Envoy çš„é™æµä¾èµ– <strong>HTTP Filterï¼ˆå¦‚ <code>envoy.filters.http.local_ratelimit</code>ï¼‰</strong> â€‹ æˆ– <strong>Redis å¤–ç½®é™æµ</strong>ï¼ˆåˆ†å¸ƒå¼åœºæ™¯ï¼‰ï¼Œç®—æ³•ä»¥<strong>ä»¤ç‰Œæ¡¶</strong>ä¸ºæ ¸å¿ƒï¼ˆé€šè¿‡ <code>rate_limit</code>ç­–ç•¥é…ç½®å¡«å……é€Ÿç‡ã€çªå‘å®¹é‡ï¼‰ã€‚è§„åˆ™é€šè¿‡ xDS APIï¼ˆå¦‚ <code>envoy.config.route.v3.RouteConfiguration</code>ï¼‰åŠ¨æ€ä¸‹å‘ï¼Œé€‚åˆå¤§è§„æ¨¡é›†ç¾¤çš„é›†ä¸­å¼ç­–ç•¥ç®¡ç†ï¼Œä½†å¯¹â€œè‡ªå®šä¹‰å¤æ‚ç®—æ³•â€çš„æ”¯æŒéœ€ä¾èµ–æ‰©å±• Filterã€‚</li>
</ul>
<h4 data-id="heading-6">3. ç”Ÿæ•ˆå±‚é¢ï¼šåº”ç”¨å†…æ‹¦æˆª vs ç½‘ç»œå±‚ä»£ç†</h4>
<ul>
<li>Sentinel çš„é™æµé€»è¾‘<strong>åœ¨åº”ç”¨è¿›ç¨‹å†…æ‰§è¡Œ</strong>ï¼šè¯·æ±‚è¿›å…¥ä¸šåŠ¡æ–¹æ³•å‰ï¼Œä¼šå…ˆç»è¿‡ Sentinel çš„æµé‡ç»Ÿè®¡ã€è§„åˆ™åˆ¤æ–­ï¼Œè‹¥è§¦å‘é™æµåˆ™ç›´æ¥æŠ›å‡º BlockExceptionï¼ˆæˆ–æ‰§è¡Œ fallback é€»è¾‘ï¼‰ã€‚è¿™ç§â€œè¿›ç¨‹å†…æ‹¦æˆªâ€å¯¹å»¶è¿Ÿå½±å“æå°ï¼Œä½†éœ€ä¸šåŠ¡æ–¹æ˜¾å¼å¼•å…¥ SDKã€‚</li>
<li>Envoy çš„é™æµé€»è¾‘<strong>åœ¨ç½‘ç»œä»£ç†å±‚æ‰§è¡Œ</strong>ï¼šè¯·æ±‚åˆ°è¾¾ Envoy Sidecar åï¼Œç”±ä»£ç†æ ¹æ®é…ç½®çš„è·¯ç”±è§„åˆ™åŒ¹é…é™æµç­–ç•¥ï¼Œå†å†³å®šæ˜¯å¦è½¬å‘åˆ°åç«¯æœåŠ¡ã€‚è¿™ç§â€œé€æ˜ä»£ç†â€æ¨¡å¼å¯¹ä¸šåŠ¡æ— ä¾µå…¥ï¼Œä½†ä¼šå¼•å…¥å°‘é‡ç½‘ç»œå»¶è¿Ÿï¼ˆä»£ç†å±‚å¤„ç†å¼€é”€ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-7">ä¸‰ã€ç”Ÿæ€ä¸é›†æˆï¼šå‚ç›´æ·±è€• vs äº‘åŸç”ŸååŒ</h3>
<p>ç”Ÿæ€å’Œé›†æˆæ–¹å¼å†³å®šäº†å·¥å…·çš„è½åœ°æˆæœ¬ä¸é€‚ç”¨èŒƒå›´ã€‚</p>
<h4 data-id="heading-8">Sentinelï¼šç»‘å®šå¾®æœåŠ¡ç”Ÿæ€ï¼Œæ·±è€• Java æŠ€æœ¯æ ˆ</h4>
<ul>
<li>ç”Ÿæ€ç»‘å®šï¼šæ·±åº¦é›†æˆ Spring Cloud Alibabaã€Dubboã€gRPC ç­‰å›½å†…ä¸»æµå¾®æœåŠ¡æ¡†æ¶ï¼Œç”šè‡³æä¾› Spring Boot Starter ç®€åŒ–æ¥å…¥ã€‚å¯¹äºâ€œå·²æœ‰å¾®æœåŠ¡æ¶æ„ã€éœ€å¿«é€Ÿå¢å¼ºç¨³å®šæ€§â€çš„å›¢é˜Ÿï¼ŒSentinel æ˜¯â€œå³æ’å³ç”¨â€çš„é€‰æ‹©ã€‚</li>
<li>å¤šè¯­è¨€æ”¯æŒï¼šé™¤ Java å¤–ï¼Œè¿˜æ¨å‡º Goã€C++ã€Python ç­‰è¯­è¨€çš„ SDKï¼Œä½†åœ¨ç”Ÿæ€æˆç†Ÿåº¦å’Œç¤¾åŒºæ´»è·ƒåº¦ä¸Šï¼ŒJava ç‰ˆæœ¬å ç»å¯¹ä¸»å¯¼ï¼ˆé€‚åˆä»¥ Java ä¸ºæ ¸å¿ƒæŠ€æœ¯æ ˆçš„ä¼ä¸šï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-9">Envoyï¼šé”šå®šäº‘åŸç”Ÿï¼Œæ”¯æ’‘ Service Mesh å…¨å±€æ²»ç†</h4>
<ul>
<li>ç”Ÿæ€ååŒï¼šä½œä¸º Service Mesh çš„â€œæ ‡å‡†æ•°æ®å¹³é¢â€ï¼ŒEnvoy ä¸ Istioï¼ˆæ§åˆ¶å¹³é¢ï¼‰æ·±åº¦æ•´åˆï¼Œé€šè¿‡ xDS API å®ç°é…ç½®åŠ¨æ€åŒ–ã€æœåŠ¡ç½‘æ ¼è‡ªåŠ¨åŒ–ã€‚åœ¨ Kubernetes é›†ç¾¤ä¸­ï¼ŒEnvoy é€šå¸¸ä»¥ Sidecar å½¢å¼æ³¨å…¥ Podï¼Œæˆä¸ºâ€œæµé‡æ²»ç†çš„äº‹å®æ ‡å‡†â€ã€‚</li>
<li>è·¨è¯­è¨€æ™®æƒ ï¼šç”±äºå·¥ä½œåœ¨ç½‘ç»œå±‚ï¼ŒEnvoy å¯¹ä¸šåŠ¡è¯­è¨€æ— æ„ŸçŸ¥ï¼ˆæ— è®ºåç«¯æ˜¯ Javaã€Go è¿˜æ˜¯ Python æœåŠ¡ï¼Œéƒ½èƒ½ç»Ÿä¸€æ²»ç†æµé‡ï¼‰ã€‚è¿™ç§â€œåŸºç¡€è®¾æ–½å±‚é€šç”¨â€ç‰¹æ€§ï¼Œä½¿å…¶æˆä¸ºå¤šè¯­è¨€å¾®æœåŠ¡é›†ç¾¤çš„æµé‡æ²»ç†é¦–é€‰ã€‚</li>
</ul>
<h3 data-id="heading-10">å››ã€åœºæ™¯é€‰æ‹©ï¼šä½•æ—¶é€‰ Sentinelï¼Ÿä½•æ—¶é€‰ Envoyï¼Ÿ</h3>






























<table><thead><tr><th>åœºæ™¯ç»´åº¦</th><th>ä¼˜å…ˆé€‰ Sentinel</th><th>ä¼˜å…ˆé€‰ Envoy</th></tr></thead><tbody><tr><td>æ²»ç†å±‚çº§</td><td>åº”ç”¨å†…æµé‡æ²»ç†ï¼ˆå¦‚æ¥å£é™æµã€æ–¹æ³•çº§ç†”æ–­ï¼‰</td><td>é›†ç¾¤/è·¨æœåŠ¡æµé‡æ²»ç†ï¼ˆå¦‚å…¨å±€ QPS é™åˆ¶ï¼‰</td></tr><tr><td>æŠ€æœ¯æ ˆ</td><td>ä»¥ Java ä¸ºæ ¸å¿ƒçš„å¾®æœåŠ¡ä½“ç³»</td><td>å¤šè¯­è¨€ã€Kubernetes + Service Mesh æ¶æ„</td></tr><tr><td>ä¾µå…¥æ€§è¦æ±‚</td><td>å¯æ¥å—ä¸šåŠ¡ä»£ç /æ¡†æ¶é›†æˆ SDK</td><td>éœ€â€œé›¶ä¾µå…¥â€ï¼Œä¾èµ–ç½‘ç»œä»£ç†é€æ˜æ²»ç†</td></tr><tr><td>å®šåˆ¶åŒ–æ–¹å‘</td><td>ä¸šåŠ¡ä¾§ç²¾ç»†åŒ–æµæ§ï¼ˆå¦‚çƒ­ç‚¹å‚æ•°ã€è‡ªå®šä¹‰è§„åˆ™ï¼‰</td><td>åŸºç¡€è®¾æ–½ä¾§å…¨å±€ç­–ç•¥ï¼ˆå¦‚é›†ç¾¤çº§è´Ÿè½½å‡è¡¡ï¼‰</td></tr></tbody></table>
<h3 data-id="heading-11">æ€»ç»“ï¼šå·¥å…·äº’è¡¥ï¼Œè€Œéæ›¿ä»£</h3>
<p>Sentinel å’Œ Envoy å¹¶éâ€œéæ­¤å³å½¼â€çš„ç«äº‰å…³ç³»ï¼Œè€Œæ˜¯<strong>æµé‡æ²»ç†ä½“ç³»çš„ä¸åŒåˆ†å±‚å·¥å…·</strong>ï¼š</p>
<ul>
<li>Sentinel ä¸»æ‰“ <strong>â€œåº”ç”¨å†…ç²¾ç»†åŒ–ç¨³å®šæ€§ä¿éšœâ€</strong> ï¼Œæ˜¯ä¸šåŠ¡ç ”å‘å›¢é˜Ÿå®ˆæŠ¤æœåŠ¡è´¨é‡çš„åˆ©å™¨ï¼›</li>
<li>Envoy ä¸»æ‰“ <strong>â€œåŸºç¡€è®¾æ–½å±‚å…¨å±€æµé‡è°ƒåº¦â€</strong> ï¼Œæ˜¯ SRE å›¢é˜Ÿç®¡ç†å¤§è§„æ¨¡é›†ç¾¤æµé‡çš„åŸºçŸ³ã€‚</li>
</ul>
<p>åœ¨å®é™…æ¶æ„ä¸­ï¼Œä¸¤è€…å¸¸ååŒå·¥ä½œï¼šä¾‹å¦‚ï¼Œåœ¨ Service Mesh æ¶æ„ä¸‹ï¼ŒEnvoy è´Ÿè´£é›†ç¾¤å…¥å£çš„å…¨å±€é™æµï¼ŒSentinel è´Ÿè´£å•ä¸ªæœåŠ¡å†…éƒ¨çš„ç»†ç²’åº¦ç†”æ–­é™çº§ï¼Œå…±åŒæ„å»ºâ€œä»ç½‘ç»œåˆ°åº”ç”¨â€çš„ç«‹ä½“åŒ–æµé‡æ²»ç†ä½“ç³»ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ˜¥å“¥çš„Agenté€šå…³ç§˜ç±05ï¼šå·¥å…·è°ƒç”¨ Function Callingã€çŸ¥è¯†ä¸æ€è·¯ç¯‡ã€‘]]></title>    <link>https://juejin.cn/post/7602800677712019490</link>    <guid>https://juejin.cn/post/7602800677712019490</guid>    <pubDate>2026-02-05T00:14:48.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602800677712019490" data-draft-id="7602800677712003106" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ˜¥å“¥çš„Agenté€šå…³ç§˜ç±05ï¼šå·¥å…·è°ƒç”¨ Function Callingã€çŸ¥è¯†ä¸æ€è·¯ç¯‡ã€‘"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯,JavaScript"/> <meta itemprop="datePublished" content="2026-02-05T00:14:48.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ‘¸é±¼çš„æ˜¥å“¥"/> <meta itemprop="url" content="https://juejin.cn/user/1714893870865303"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ˜¥å“¥çš„Agenté€šå…³ç§˜ç±05ï¼šå·¥å…·è°ƒç”¨ Function Callingã€çŸ¥è¯†ä¸æ€è·¯ç¯‡ã€‘
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1714893870865303/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ‘¸é±¼çš„æ˜¥å“¥
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-05T00:14:48.000Z" title="Thu Feb 05 2026 00:14:48 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-05
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;font-weight:400;line-height:2;font-size:17px;overflow-x:hidden;color:#000}.markdown-body strong{padding:1px;color:#ee3f4d}.markdown-body em{padding:0 2px;color:#f33b1f}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{position:relative;margin-top:30px;margin-bottom:20px;line-height:1.5;font-weight:700}.markdown-body h1{text-align:center;padding-bottom:5px;font-size:32px;color:#ac1f18}.markdown-body h1:after{content:"";display:block;margin:4px auto 0;width:100px;height:2px;border-bottom:2px solid #f33b1f}.markdown-body h2{font-size:28px;border-bottom:1px solid #f33b1f}.markdown-body h2:before{content:"# "!important;color:#f33b1f}.markdown-body h3{font-size:24px;padding-left:9px;border-left:6px solid #f33b1f}.markdown-body h4{font-size:20px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #bbb;margin:16px 0}.markdown-body code{word-break:break-word;overflow-x:auto;background-color:#f9f1db;color:#ee2746;border-radius:2px;font-size:16px;padding:1px 2px}.markdown-body code,.markdown-body pre{font-family:-apple-system,-apple-system-body,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,PingFang SC,æ€æºé»‘ä½“ CN,æ€æºé»‘ä½“,JetBrains Mono,Fira Code,Menlo,Ubuntu Mono,Consolas,sans-serif}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{margin:12px 0!important;border-radius:3px;font-size:15px;padding:16px 12px;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f7f7f7}.markdown-body a{text-decoration:none;color:#1781b5;padding:0 2px;border-bottom:1px solid #1781b5}.markdown-body a:active,.markdown-body a:hover{border-bottom:2px solid #f33b1f;color:#ac1f18}.markdown-body blockquote{color:#3d3d3d;background-color:#fff9f9;padding:6px 16px;margin:16px 0;border-left:3px solid #f07c82}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:6px 0}.markdown-body ol,.markdown-body ul{padding-left:30px}.markdown-body ol li,.markdown-body ul li{margin-bottom:6px}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:6px}.markdown-body ol li{padding-left:6px}.markdown-body ::marker{color:#f33b1f}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}.markdown-body .task-list-item input[type=checkbox]{position:relative}.markdown-body .task-list-item input[type=checkbox]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;background:#fff;border:1px solid #f07c82;border-radius:3px;box-sizing:border-box;z-index:1}.markdown-body .task-list-item input[type=checkbox]:checked:after{content:"âœ“";position:absolute;top:-5px;left:0;right:0;bottom:0;width:0;height:0;color:#f33b1f;font-size:16px;font-weight:700;z-index:2}.markdown-body table{display:inline-block!important;font-size:14px;width:auto;max-width:100%;overflow:auto;border-spacing:0;border-collapse:collapse}.markdown-body table thead{background:#fff9f9;color:#000;text-align:left;font-size:15px}.markdown-body table tr:nth-child(2n){background-color:#fcfcfc}.markdown-body table tr:hover{background-color:#fff9f9}.markdown-body table td,.markdown-body table th{padding:12px 7px;line-height:24px;border:1px solid #f9f1db}.markdown-body table td{min-width:120px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="monokai">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#272822;color:#ddd}.hljs-keyword,.hljs-literal,.hljs-name,.hljs-selector-tag,.hljs-strong,.hljs-tag{color:#f92672}.hljs-code{color:#66d9ef}.hljs-class .hljs-title{color:#fff}.hljs-attribute,.hljs-link,.hljs-regexp,.hljs-symbol{color:#bf79db}.hljs-addition,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-emphasis,.hljs-section,.hljs-selector-attr,.hljs-selector-pseudo,.hljs-string,.hljs-subst,.hljs-template-tag,.hljs-template-variable,.hljs-title,.hljs-type,.hljs-variable{color:#a6e22e}.hljs-comment,.hljs-deletion,.hljs-meta,.hljs-quote{color:#75715e}.hljs-doctag,.hljs-keyword,.hljs-literal,.hljs-section,.hljs-selector-id,.hljs-selector-tag,.hljs-title,.hljs-type{font-weight:700}</style><p>LLM é—®ä¸–ä¹‹åï¼Œå¾ˆé•¿ä¸€æ®µæ—¶é—´ï¼Œäººä»¬å‘ç°äº†å¾ˆå¤šç”¨ä¾‹å¯ä»¥è¯æ˜ï¼š</p>
<blockquote>
<p>AIä¸è¡Œå•Šï¼Œä¸æ˜¯äººå·¥æ™ºèƒ½ï¼Œè€Œæ˜¯äººå·¥æ™ºéšœã€‚</p>
</blockquote>
<p>æ¯”æ–¹è¯´ï¼Œæœ€ç»å…¸çš„ä¸€ä¸ªé—®é¢˜å°±æ˜¯ï¼š</p>
<pre><code class="hljs">7.11 å’Œ 7.9 å“ªä¸ªæ•°å­—æ›´å¤§ï¼Ÿ
</code></pre>
<p><img src="https://pic.zhangshichun.top/pic/20260201161528631.png" alt="" loading="lazy"/></p>
<p>ä½ ä¹Ÿå¯ä»¥ä¿®æ”¹æˆ‘ä»¬ç¬¬ä¸€èŠ‚è¯¾ã€æ˜¥å“¥çš„Agenté€šå…³ç§˜ç±02ï¼šæ­å»ºç¯å¢ƒåŠè¯­è¨€é€‰æ‹©ã€‘é‡Œçš„ <code>check_env.py</code>ä»£ç ï¼Œé—®AIï¼š"ä»Šå¤©æ˜¯å‡ æœˆå‡ æ—¥ï¼Ÿ"</p>
<p><code>deepseek</code> ä¼šè‡ªä¿¡åœ°å›ç­”ä½ ï¼š</p>
<p><img src="https://pic.zhangshichun.top/pic/20260201161737903.png" alt="" loading="lazy"/></p>
<p>æ—©æœŸçš„AIå¯¹äºè¿™æ ·çš„ç”¨ä¾‹æ¯«æ— é˜²å¤‡ï¼Œé—¹äº†å¾ˆå¤šç¬‘è¯ã€‚</p>
<p>ä½†æ˜¯ï¼Œåœ¨Agentæ—¶ä»£ï¼Œè¿™äº›æ ¹æœ¬ä¸æ˜¯é—®é¢˜ï¼Œä½ å¯ä»¥ç¨³å®šè§£å†³æ‰€æœ‰åŠ å‡ä¹˜é™¤ï¼Œå¯ä»¥å‡†ç¡®æ¯”è¾ƒå¤§å°ï¼Œå¯ä»¥çŸ¥é“ä»Šå¤©æ˜¯å‡ æœˆå‡ æ—¥ã€‚</p>
<p>æ¯”å¦‚ï¼Œæ— è®ºä½ å»deepseekå®˜ç½‘ï¼Œæˆ–è€…æ˜¯è±†åŒ…ï¼Œæé—®"ä»Šå¤©æ˜¯å‡ æœˆå‡ æ—¥ï¼Ÿ"</p>
<p>éƒ½èƒ½å¾—åˆ°å‡†ç¡®è€Œæ­£ç¡®çš„å›ç­”ï¼š</p>
<p><img src="https://pic.zhangshichun.top/pic/20260201161852635.png" alt="" loading="lazy"/></p>
<p>è¿™æ˜¯ä¸ºä»€ä¹ˆï¼Ÿ</p>
<p>å› ä¸ºå®˜ç½‘å’ŒAPPéƒ½åˆ©ç”¨äº†æˆ‘ä»¬ä»Šå¤©è¦å­¦ä¹ çš„å†…å®¹ï¼šFunction Callingã€‚</p>
<p><strong>å·¥å…·è°ƒç”¨</strong>ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€Function Callçš„å†å²åŠç°çŠ¶</h2>
<p>ä¸ºäº†è§£å†³æ—©æœŸå¤§è¯­è¨€æ¨¡å‹æ— æ³•åšç²¾ç»†æ´»å„¿ï¼Œæ— æ³•åº”å¯¹å‡†ç¡®è®¡ç®—å’Œå®æ—¶ä¿¡æ¯è·å–çš„é—®é¢˜ã€‚</p>
<p>2023å¹´6æœˆ13æ—¥ ï¼Œ<code>OPENAI</code> åœ¨å‘å¸ƒ gpt-4-0613 å’Œ gpt-3.5-turbo-0613 ç‰ˆæœ¬æ—¶ï¼Œæ¨å‡ºäº†ä¸€é¡¹è½°åŠ¨ä¸–ç•Œçš„è®¾è®¡å’Œèƒ½åŠ›ï¼š</p>
<p><strong>Function Calling</strong>ã€‚</p>
<h3 data-id="heading-1">å‘å¸ƒè¿™ä¸ªåŠŸèƒ½ä¹‹å‰</h3>
<p>å¼€å‘è€…ï¼ˆåŒ…æ‹¬æ—©æœŸçš„ LangChain ç”¨æˆ·ï¼‰æƒ³è¦è®© AI è°ƒç”¨å·¥å…·ï¼Œå¿…é¡»ä½¿ç”¨ ReAct æ¨¡å¼ã€‚</p>
<p>åšæ³•ï¼šä½ åœ¨ System Prompt é‡Œå†™ä¸€å¤§æ®µè¯ï¼šâ€œä½ æ˜¯ä¸€ä¸ªå¯ä»¥ä½¿ç”¨å·¥å…·çš„ AIã€‚å¦‚æœä½ æƒ³ç”¨è®¡ç®—å™¨ï¼Œè¯·è¾“å‡º Action: Calculator, Input: 1+1ã€‚â€</p>
<p>ç—›ç‚¹ï¼š</p>
<ul>
<li>
<p>ä¸ç¨³å®šï¼šAI ç»å¸¸å¿˜äº†æ ¼å¼ï¼Œæˆ–è€…å¤šæ‰“äº†ä¸ªæ ‡ç‚¹ç¬¦å·ã€‚</p>
</li>
<li>
<p>è§£æéš¾ï¼šå¼€å‘è€…å¿…é¡»å†™å¤æ‚çš„æ­£åˆ™è¡¨è¾¾å¼ï¼ˆRegexï¼‰å»æŠ“å– AI çš„å›å¤ã€‚</p>
</li>
<li>
<p>Token æµªè´¹ï¼šä½ éœ€è¦æŠŠå·¥å…·çš„æè¿°å†™åœ¨ Prompt é‡Œï¼Œå ç”¨å¤§é‡ä¸Šä¸‹æ–‡ã€‚</p>
</li>
</ul>
<h3 data-id="heading-2">OpenAIçš„åˆ›æ–°</h3>
<p>OpenAI å—Metaçš„Toolformerå¯å‘ï¼Œé€šè¿‡å¾®è°ƒï¼ˆFine-tuningï¼‰ï¼Œè®©æ¨¡å‹åœ¨åº•å±‚â€œåŸç”Ÿâ€æ”¯æŒäº†è°ƒç”¨å¤–éƒ¨å·¥å…·çš„èƒ½åŠ›ã€‚</p>
<p>ä½ ä¸å†éœ€è¦åœ¨ Prompt é‡Œæ±‚ AI â€œè¯·æŒ‰æ ¼å¼è¾“å‡ºâ€ã€‚ä½ åªéœ€è¦æŠŠ JSON Schema ä¼ ç»™ APIï¼Œæ¨¡å‹å°±èƒ½æåº¦ç¨³å®šåœ°è¾“å‡ºç»“æ„åŒ–çš„ JSON è°ƒç”¨æŒ‡ä»¤ã€‚</p>
<p>å¯ä»¥è¯´ï¼š<strong>Function Calling æ˜¯ OpenAI å°†â€œå­¦æœ¯ç•Œçš„ Tool Learningâ€è½¬åŒ–ä¸ºâ€œå·¥ä¸šçº§ API æ ‡å‡†â€çš„äº§ç‰©ã€‚</strong></p>
<p>å®ƒæ ‡å¿—ç€ AI Agent å¼€å‘ä»â€œæ‰‹æ“ Prompt çš„é»‘å®¢æ—¶ä»£â€è¿›å…¥äº†â€œæ ‡å‡†åŒ–å·¥ç¨‹å¼€å‘æ—¶ä»£â€ã€‚ç°åœ¨ï¼ŒAnthropic (Claude)ã€Google (Gemini)ã€DeepSeek ç­‰ä¸»æµæ¨¡å‹å‚å•†éƒ½è·Ÿéšå¹¶æ”¯æŒäº†è¿™ä¸€æ ‡å‡†ã€‚</p>
<h2 data-id="heading-3">äºŒã€Function Calling åŸºæœ¬æµç¨‹</h2>
<p>æˆ‘ç”»äº†ä¸€å¼ å›¾ï¼Œç»™å¤§å®¶è§£é‡Šå½“ç”¨æˆ·è¾“å…¥â€œåŒ—äº¬ä»Šå¤©å¤©æ°”å¦‚ä½•â€ä¹‹åï¼Œæ•´ä¸ªçš„æ¶æ„æµè½¬ï¼š</p>
<p><img src="https://pic.zhangshichun.top/pic/20260201203345449.png" alt="" loading="lazy"/></p>
<p>ä½ ä¼šå‘ç°ä¸€ä¸ªé‡è¦çš„å®šå¾‹ï¼š</p>
<pre><code class="hljs language-sql" lang="sql">LLM å¯¹äº Agent è€Œè¨€ï¼Œå…¶å®æ˜¯æ— çŠ¶æ€çš„ã€‚

å½“AgentæœLLMå‘èµ·ä¼šè¯æ—¶ï¼Œéœ€è¦æ¯æ¬¡éƒ½æºå¸¦å†å²è®°å½•ï¼Œä»¥å®Œæˆå¤šè½®ä¼šè¯ã€‚

æ¯æ¬¡éƒ½éœ€è¦æºå¸¦æ³¨å†Œåˆ°agentä¸­çš„<span class="hljs-keyword">function</span>åˆ—è¡¨ï¼Œæ¯æ¬¡éƒ½éœ€è¦å†™ä»£<span class="hljs-keyword">system</span> promptã€‚
</code></pre>
<p><img src="https://pic.zhangshichun.top/pic/20260201204006127.png" alt="" loading="lazy"/></p>
<blockquote>
<p>ä½ å¯ä»¥æŠŠå®ƒæƒ³è±¡æˆç”µå½±ã€Šåˆæ‹50æ¬¡ã€‹é‡Œçš„å¥³ä¸»è§’ï¼Œæˆ–è€…æ˜¯ä¸€æ¡åªæœ‰ 7 ç§’è®°å¿†çš„é‡‘é±¼ã€‚ æ— è®ºä½ ä»¬ä¹‹å‰èŠå¾—å¤šä¹ˆçƒ­ç«æœå¤©ï¼Œå½“ä½ å‘èµ·çš„ HTTP è¯·æ±‚ç»“æŸé‚£ä¸€åˆ»ï¼Œå®ƒå°±æŠŠä½ å½»åº•å¿˜äº†ã€‚</p>
</blockquote>
<p>å› æ­¤ï¼Œè¿™å¸¦æ¥äº†ä¸‰ä¸ªå¾ˆå¤§çš„è´Ÿæ‹…é—®é¢˜ï¼š</p>
<ol>
<li>äººè®¾è´Ÿæ‹…
<ul>
<li>æ¯æ¬¡ä¼šè¯éƒ½è¦é‡æ–°å£°æ˜ä¸€æ¬¡äººè®¾ï¼Œä¸ç„¶LLMå°±ä¼šä¸çŸ¥é“è¯¥ä¿¡æ¯ã€‚</li>
</ul>
</li>
<li>æŠ€èƒ½æ ‘è´Ÿæ‹…
<ul>
<li>æ¯æ¬¡ä¼šè¯éƒ½è¦é‡æ–°å£°æ˜ä¸€æ¬¡æ‰€æœ‰Agentæ‹¥æœ‰çš„å…¨æŠ€èƒ½Json Schemaï¼Œè¿™ä¼šå ç”¨å·¨å¤§çš„Tokenã€‚</li>
</ul>
</li>
<li>è®°å¿†è´Ÿæ‹…
<ul>
<li>éšç€å¯¹è¯è¿›è¡Œï¼Œmessages åˆ—è¡¨ä¼šè¶Šæ¥è¶Šé•¿ã€‚</li>
</ul>
</li>
</ol>
<p>è¿™ä¼šå¯¼è‡´ä»¥ä¸‹å‡ ä¸ªé—®é¢˜ï¼š</p>
<ul>
<li>è´¹é’±ï¼šLLM æ˜¯æŒ‰ Input Token æ”¶è´¹çš„ã€‚ç¬¬ 1 å¥çš„å†å²ï¼Œåœ¨ç¬¬ 100 è½®å¯¹è¯æ—¶è¢«é‡å¤è®¡è´¹äº† 100 æ¬¡ã€‚</li>
<li>å˜æ…¢ï¼šå¤„ç†çš„æ–‡å­—è¶Šå¤šï¼Œé¦–å­—å»¶è¿Ÿï¼ˆTTFTï¼‰è¶Šé«˜ã€‚</li>
<li>æº¢å‡ºï¼šä¸€æ—¦è¶…è¿‡æ¨¡å‹çš„ä¸Šä¸‹æ–‡ä¸Šé™ï¼ˆæ¯”å¦‚ 32k æˆ– 128kï¼‰ï¼Œæ¨¡å‹å°±ä¼šæŠ¥é”™æˆ–å¼ºåˆ¶æˆªæ–­ï¼Œå¯¼è‡´â€œå¤±å¿†â€ã€‚</li>
<li>å˜è ¢ï¼šä¸€æ—¦tokenè¿‡é•¿ï¼ŒLLMåœ¨å·¨å¤§çš„tokené‡Œå…³äºä¼šè¯é‡Œçš„å…³é”®ä¿¡æ¯çš„æ³¨æ„åŠ›ä¼šè¢«ç¨€é‡Šã€‚</li>
</ul>
<p>å¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæ˜¯æ‰€æœ‰Agentå¼€å‘å¿…é¡»é¢å¯¹çš„ã€‚è¿™é‡Œä¸è¿‡å¤šå±•å¼€äº†ï¼Œå…ˆæä¸€ä¸‹ã€‚</p>
<p><img src="https://pic.zhangshichun.top/pic/20260202181054274.png" alt="" loading="lazy"/></p>
<h2 data-id="heading-4">ä¸‰ã€å·¥å…·å®šä¹‰ä¸æ³¨å†Œ</h2>
<p>åœ¨è®©AIçŸ¥é“åº”è¯¥åœ¨ä½•æ—¶è°ƒç”¨å·¥å…·çš„ç¬¬ä¸€æ­¥ï¼Œç›¸å½“äºä½ éœ€è¦åœ¨æ¯æ¬¡ä¼šè¯é‡Œé™„å¸¦ä¸€ä¸ªç›®å½•ï¼Œå‘Šè¯‰AIï¼š</p>
<blockquote>
<p>å—¨ï¼Œç‰¢Aï¼Œæˆ‘è¿™é‡Œæœ‰ä¸€ä¸ªåå«<code>get_current_time</code>çš„å·¥å…·ï¼Œå®ƒæ˜¯ä¸ªæ–¹æ³•ï¼Œä½œç”¨æ˜¯â€œè·å–å½“å‰å‡†ç¡®çš„æ—¶é—´â€ã€‚</p>
</blockquote>
<p>è¿™æ ·ï¼Œå½“æ²¡æœ‰è®°å¿†çš„LLMé¢å¯¹â€œå½“å‰å‡†ç¡®æ—¶é—´æ˜¯ä»€ä¹ˆâ€çš„æ—¶å€™ï¼Œå®ƒæ‰ä¼šçŸ¥é“è¦è°ƒç”¨è¿™ä¸ªå·¥å…·ã€‚</p>
<p>å¾ˆå·§ï¼Œä¸ŠèŠ‚è¯¾æˆ‘ä»¬æ‰ä»‹ç»äº† JSON Schemaï¼Œè¿™èŠ‚è¯¾çš„ <code>Function Calling</code> æ³¨å†Œå·¥å…·ï¼Œä¹Ÿéœ€è¦ç”¨åˆ°JSON Schemaã€‚</p>
<p>ä½†å®ƒä¸æ˜¯å®Œå…¨æ ‡å‡†çš„ JSON Schemaï¼Œä½ å¯ä»¥å…ˆçœ‹çœ‹ç»“æ„ï¼š</p>
<pre><code class="hljs language-python" lang="python">tools = [
    {
        <span class="hljs-comment"># 1. ç±»å‹ï¼šç›®å‰ä»…æ”¯æŒ "function"</span>
        <span class="hljs-string">"type"</span>: <span class="hljs-string">"function"</span>,
        <span class="hljs-comment"># 2. å‡½æ•°å®šä¹‰ä¸»ä½“</span>
        <span class="hljs-string">"function"</span>: {
            <span class="hljs-comment"># 2.1 (å¿…å¡«) å‡½æ•°å</span>
            <span class="hljs-string">"name"</span>: <span class="hljs-string">"..."</span>,
            <span class="hljs-comment"># 2.2 (å¼ºçƒˆæ¨è) ç»™ AI çœ‹çš„å‡½æ•°è¯´æ˜ä¹¦</span>
            <span class="hljs-string">"description"</span>: <span class="hljs-string">"..."</span>,
            <span class="hljs-comment"># 2.3 (å¿…å¡«) å‚æ•°å®šä¹‰ï¼Œéµå¾ª JSON Schema æ ‡å‡†</span>
            <span class="hljs-string">"parameters"</span>: {        
                <span class="hljs-string">"type"</span>: <span class="hljs-string">"object"</span>,
                <span class="hljs-string">"properties"</span>: { ... },
                <span class="hljs-string">"required"</span>: [...]
            },
            <span class="hljs-comment"># (å¯é€‰) DeepSeek/OpenAI æ”¯æŒçš„ä¸¥æ ¼æ¨¡å¼ï¼Œè®¾ä¸º True å¼ºåˆ¶è¾“å‡ºç¬¦åˆ Schema</span>
            <span class="hljs-string">"strict"</span>: <span class="hljs-literal">True</span> 
        }
    }
]
</code></pre>
<p>å¦‚æœæƒ³æ‰¾å®˜æ–¹æ–‡æ¡£çš„è¯ï¼Œå›½å†…å¼€å‘è€…ä¼˜å…ˆå»ºè®®å‚è€ƒ <code>deepseek</code> çš„ <code>Function Calling</code> æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fapi-docs.deepseek.com%2Fzh-cn%2Fguides%2Ffunction_calling" target="_blank" title="https://api-docs.deepseek.com/zh-cn/guides/function_calling" ref="nofollow noopener noreferrer">api-docs.deepseek.com/zh-cn/guideâ€¦</a></p>
<p>å…¶ä¸­æåˆ°ï¼š</p>
<blockquote>
<p>ç”¨æˆ·éœ€è¦è®¾ç½® base_url="<a href="https://link.juejin.cn?target=https%3A%2F%2Fapi.deepseek.com%2Fbeta" target="_blank" title="https://api.deepseek.com/beta" ref="nofollow noopener noreferrer">api.deepseek.com/beta</a>" æ¥å¼€å¯ Beta åŠŸèƒ½</p>
</blockquote>
<p>å—¯ï¼Œçœ‹åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å¯ä»¥é»˜é»˜åœ°å»ä¿®æ”¹ä¸€ä¸‹æˆ‘ä»¬ <code>.env</code> æ–‡ä»¶çš„ BASE_URL å‚æ•°ï¼Œä»¥æ±‚è·å¾—æ›´ç¨³å®šçš„è¿”å›ç»“æ„ã€‚</p>
<p>å¦å¤–è¿˜å¯ä»¥å‚è€ƒï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fplatform.openai.com%2Fdocs%2Fguides%2Ffunction-calling" target="_blank" title="https://platform.openai.com/docs/guides/function-calling" ref="nofollow noopener noreferrer">platform.openai.com/docs/guidesâ€¦</a></p>
<p>è®©æˆ‘ä»¬æ ¹æ®ä¸Šé¢å­¦åˆ°çš„ï¼Œéšæ‰‹æ³¨å†Œä¸¤ä¸ªå·¥å…·æ–¹æ³•ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># å®šä¹‰å·¥å…·åˆ—è¡¨ </span>
tools = [
    <span class="hljs-comment"># æ–¹æ³•Aï¼šè·å–å½“å‰ç²¾å‡†æ—¶é—´</span>
    {
        <span class="hljs-string">"type"</span>: <span class="hljs-string">"function"</span>,
        <span class="hljs-string">"function"</span>: {
            <span class="hljs-string">"name"</span>: <span class="hljs-string">"get_current_time"</span>,
            <span class="hljs-string">"description"</span>: <span class="hljs-string">"è·å–å½“å‰ç²¾ç¡®æ—¶é—´"</span>,
            <span class="hljs-string">"parameters"</span>: {<span class="hljs-string">"type"</span>: <span class="hljs-string">"object"</span>, <span class="hljs-string">"properties"</span>: {}}
        }
    },
    <span class="hljs-comment"># æ–¹æ³•Bï¼šè®¡ç®—ä¸¤ä¸ªæ•°çš„ä¹˜ç§¯</span>
    {
        <span class="hljs-string">"type"</span>: <span class="hljs-string">"function"</span>,
        <span class="hljs-string">"function"</span>: {
            <span class="hljs-string">"name"</span>: <span class="hljs-string">"calculate_multiply"</span>,
            <span class="hljs-string">"description"</span>: <span class="hljs-string">"è®¡ç®—ä¸¤ä¸ªæ•°çš„ä¹˜ç§¯"</span>,
            <span class="hljs-string">"parameters"</span>: {
                <span class="hljs-string">"type"</span>: <span class="hljs-string">"object"</span>,
                <span class="hljs-string">"properties"</span>: {
                    <span class="hljs-string">"a"</span>: {<span class="hljs-string">"type"</span>: <span class="hljs-string">"number"</span>, <span class="hljs-string">"description"</span>: <span class="hljs-string">"ç¬¬ä¸€ä¸ªæ•°å­—"</span>},
                    <span class="hljs-string">"b"</span>: {<span class="hljs-string">"type"</span>: <span class="hljs-string">"number"</span>, <span class="hljs-string">"description"</span>: <span class="hljs-string">"ç¬¬äºŒä¸ªæ•°å­—"</span>}
                },
                <span class="hljs-string">"required"</span>: [<span class="hljs-string">"a"</span>, <span class="hljs-string">"b"</span>]
            }
        }
    }
]
</code></pre>
<p>æœ‰äº† <code>Schema</code>ï¼Œå¦‚ä½•æ·»åŠ åˆ°ä¼šè¯é‡Œå»å‘¢ï¼Ÿ</p>
<p>éå¸¸ç®€å•ï¼</p>
<pre><code class="hljs language-python" lang="python">response = client.chat.completions.create(
    model=<span class="hljs-string">"deepseek-chat"</span>,
    messages=messages,
    tools=tools, <span class="hljs-comment"># ã€å…³é”®ã€‘æŠŠå·¥å…·ç®±é€’ç»™å®ƒ</span>
)
</code></pre>
<h2 data-id="heading-5">å››ã€è¯†åˆ«AIçš„è¿”å›ï¼Œè°ƒç”¨å…·ä½“çš„æ–¹æ³•</h2>
<p>åˆšåˆšæˆ‘ä»¬åœ¨è¯·æ±‚é‡Œé™„å¸¦äº†toolsæ¸…å•ã€‚</p>
<p>é‚£ä¹ˆï¼Œæ€ä¹ˆè¯†åˆ«AIåœ¨ä»€ä¹ˆæ—¶å€™éœ€è¦è°ƒç”¨æˆ‘ä»¬çš„toolså‘¢?</p>
<p>å¾ˆç®€å•ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># è·å– AI çš„å›å¤æ¶ˆæ¯</span>
ai_msg = response.choices[<span class="hljs-number">0</span>].message
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"ai_msg.tool_callsï¼š<span class="hljs-subst">{ai_msg.tool_calls}</span>"</span>)
</code></pre>
<p>åœ¨ai_msgè¿™ä¸ªLLM è¿”å›å€¼ä¿¡æ¯é‡Œï¼Œæˆ‘ä»¬éœ€è¦é‡ç‚¹å…³æ³¨ <code>ai_msg.tool_calls</code> è¿™ä¸ªå­—æ®µã€‚</p>
<p>å¦‚æœå®ƒæ˜¯Noneæˆ–è€…ç©ºæ•°ç»„ï¼Œåˆ™è¡¨ç¤ºAIæ²¡æœ‰æƒ³è¦è°ƒç”¨çš„<code>Function</code>ï¼Œå¦åˆ™çš„è¯ï¼Œå³ä»£è¡¨ï¼š</p>
<blockquote>
<p>åˆšæ‰è¿™ä¸€æ¬¡ä¼šè¯ï¼ŒAIæ²¡æœ‰å¾—åˆ°ç»“è®ºï¼Œè€Œæ˜¯å¸Œæœ›è°ƒç”¨ä¸€ä¸ªæˆ–è€…å¤šä¸ªFunctionã€‚</p>
</blockquote>
<p>æ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆå†™å‡ºå¦‚ä¸‹çš„å¤§è‡´é€»è¾‘ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">if</span> ai_msg.tool_calls:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ğŸ¤– AI å†³å®šè°ƒç”¨å·¥å…·ï¼"</span>)
    
    <span class="hljs-comment"># å¿…é¡»æŠŠ AI çš„è¿™å¥â€œæˆ‘æƒ³è°ƒç”¨å·¥å…·â€åŠ å…¥å¯¹è¯å†å²</span>
    <span class="hljs-comment"># å¦åˆ™åé¢é€šè¿‡å·¥å…·ç»“æœå›å¤æ—¶ï¼ŒAI ä¼šå¤±å¿†</span>
    messages.append(ai_msg)

    <span class="hljs-comment"># === ä½ çš„ä»£ç ä»‹å…¥ï¼šæ‰§è¡Œå·¥å…· ===</span>
    <span class="hljs-keyword">for</span> tool_call <span class="hljs-keyword">in</span> ai_msg.tool_calls:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ğŸ¤– AI å†³å®šè°ƒç”¨å·¥å…·: <span class="hljs-subst">{tool_call.function.name}</span>"</span>)
        func_name = tool_call.function.name
        <span class="hljs-comment"># è§£æå‚æ•° (JSON å­—ç¬¦ä¸² -&gt; å­—å…¸)</span>
        func_args = json.loads(tool_call.function.arguments)
<span class="hljs-keyword">else</span>:
    <span class="hljs-comment"># AI è§‰å¾—ä¸éœ€è¦å·¥å…·ï¼Œç›´æ¥å›ç­”</span>
    <span class="hljs-keyword">return</span> ai_msg.content
</code></pre>
<p>æ‹¿åˆ°æ–¹æ³•åä¸æ–¹æ³•å‚æ•°åï¼Œæ¥ä¸‹æ¥è¦åšçš„å°±æ˜¯æ‰§è¡Œæ–¹æ³•ï¼Œå¾—åˆ°ç»“æœï¼Œè¿™ä¸€ç‚¹è¿åˆšæ¥è§¦ç¼–ç¨‹çš„æ–°æ‰‹éƒ½çŸ¥é“æ€ä¹ˆå†™äº†ã€‚</p>
<p>æ‹¿åˆ°ç»“æœåï¼Œåªéœ€è¦å†æ¬¡æ‰§è¡Œï¼š</p>
<pre><code class="hljs language-ini" lang="ini">messages.append({
    "role": "tool",
    "tool_call_id": tool_call.id,
    "content": tool_result
})
<span class="hljs-comment"># === ç¬¬äºŒè½®äº¤äº’ ===</span>
<span class="hljs-attr">final_response</span> = client.chat.completions.create(
    <span class="hljs-attr">model</span>=<span class="hljs-string">"deepseek-chat"</span>,
    <span class="hljs-attr">messages</span>=messages,
    <span class="hljs-attr">tools</span>=tools
)
</code></pre>
<p>ä¸ºä»€ä¹ˆè¿™é‡Œçš„ç¬¬äºŒè½®äº¤äº’é‡Œè¿˜è¦å¸¦ä¸Š <code>tools</code>ï¼Ÿ</p>
<p>å› ä¸ºAgentå¹¶ä¸çŸ¥é“LLMæ˜¯å¦ä¼šå†å‘èµ·ä¸€æ¬¡Function Callingï¼Œå¦‚æœä¸æºå¸¦toolsï¼ŒLLMå°±éå¸¸å¯èƒ½åœ¨é‡åˆ°é—®é¢˜æ—¶æ— å¥ˆåœ°çç¼–æˆ–è€…æŠ¥é”™ã€‚</p>
<p>æ‰€ä»¥ï¼Œå¾ˆæ˜¾ç„¶ï¼Œæˆ‘ä»¬éœ€è¦é€’å½’ï¼Œæˆ–è€…å¾ªç¯ã€‚</p>
<p>è¿™å°±æ¶‰åŠåˆ°äº†ä¸€ä¸ªæ–°çš„ï¼Œæ·±åˆ»çš„ï¼Œé‡è¦çš„ï¼Œéš¾ä»¥è§„é¿çš„æ ¸å¿ƒé—®é¢˜ï¼š</p>
<blockquote>
<p>åœ¨Agentå¼€å‘ä¸­ï¼Œåº”è¯¥å¦‚ä½•ç»Ÿä¸€AIçš„æ€è€ƒä¸è¡ŒåŠ¨ï¼Œå¹¶å·§å¦™è®¾è®¡è¿™ä¸ªå¾ªç¯ã€‚</p>
</blockquote>
<p>ä¸‹ä¸€èŠ‚è¯¾å†è§ï¼</p>
<h2 data-id="heading-6">ä¸‹ä¸€æ­¥é¢„å‘Š</h2>
<p>ä¸‹èŠ‚è¯¾ï¼Œæˆ‘ä»¬å°†æ¢ç´¢ Agent ç¼–ç¨‹çš„ä¸€ä¸ªæ ¸å¿ƒé—®é¢˜ï¼š</p>
<blockquote>
<p>æ€è€ƒèŒƒå¼ã€‚</p>
</blockquote>
<p>æ•¬è¯·æœŸå¾…ï¼</p>
<p><img src="https://pic.zhangshichun.top/pic/ScreenShot_2026-01-26_082327_821.png" alt="" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä½¿ç”¨AIæ¨¡æ‹Ÿå®ç°ä¸€ä¸ª Claude Code CLI]]></title>    <link>https://juejin.cn/post/7603004323870179371</link>    <guid>https://juejin.cn/post/7603004323870179371</guid>    <pubDate>2026-02-05T00:35:01.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603004323870179371" data-draft-id="7602910573404209190" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä½¿ç”¨AIæ¨¡æ‹Ÿå®ç°ä¸€ä¸ª Claude Code CLI"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-02-05T00:35:01.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é£è±¡å—"/> <meta itemprop="url" content="https://juejin.cn/user/2524134428655159"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä½¿ç”¨AIæ¨¡æ‹Ÿå®ç°ä¸€ä¸ª Claude Code CLI
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2524134428655159/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é£è±¡å—
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-05T00:35:01.000Z" title="Thu Feb 05 2026 00:35:01 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-05
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>ä»é›¶å¼€å§‹æ„å»ºç»ˆç«¯ AI ç¼–ç¨‹åŠ©æ‰‹ï¼Œæ¢ç´¢ REPL äº¤äº’ã€è¾“å…¥ç¼“å†²åŒºã€ç»ˆç«¯æ¸²æŸ“ç­‰æŠ€æœ¯</p>
</blockquote>
<h2 data-id="heading-0">å‰è¨€</h2>
<p><strong>é‡è¦è¯´æ˜ï¼š</strong> æœ¬é¡¹ç›®çš„ä»£ç å®Œå…¨ç”± AI è¾…åŠ©ç”Ÿæˆã€‚æˆ‘æ‰®æ¼”äº§å“ç»ç†çš„è§’è‰²ï¼Œè´Ÿè´£æå‡ºéœ€æ±‚ã€æ˜ç¡®åŠŸèƒ½è¾¹ç•Œï¼Œè€Œ AI è´Ÿè´£æ‰€æœ‰çš„ç¼–ç å®ç°ã€‚è¿™æ˜¯ä¸€æ¬¡æ¢ç´¢"AI ä¸»å¯¼å¼€å‘"æ¨¡å¼çš„å®è·µã€‚</p>
<p>ç”¨è¿‡ Claude Code çš„å¼€å‘è€…éƒ½ä¼šè¢«å®ƒæµç•…çš„ç»ˆç«¯äº¤äº’ä½“éªŒæ‰€å¸å¼•ã€‚ä¸€ä¸ªç®€å•ä½†åŠŸèƒ½å¼ºå¤§çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œè®© AI åƒç»“å¯¹ç¼–ç¨‹ä¼™ä¼´ä¸€æ ·åœ¨ç»ˆç«¯ä¸­ä¸ä½ åä½œã€‚</p>
<p>æ™šä¸Šä½¿ç”¨AIè¿‡ç¨‹çªç„¶å¿ƒè¡€æ¥æ½®ï¼šèƒ½å¦ç”¨ AI æ¥å®ç°ä¸€ä¸ªç±»ä¼¼çš„å·¥å…·ï¼Œé¡ºä¾¿äº†è§£ä¸‹è¿™ç§ç»ˆç«¯å·¥å…·æ˜¯å¦‚ä½•å®ç°çš„ ï¼Ÿè¯´å¹²å°±å¹²â€”â€”æˆ‘åªè´Ÿè´£æè¿°æƒ³è¦çš„åŠŸèƒ½ï¼Œè®© AI æ¥å®Œæˆæ‰€æœ‰çš„ä»£ç ç¼–å†™ã€‚</p>
<p>å…ˆçœ‹çœ‹æœ€ç»ˆå®ç°çš„æ•ˆæœï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">â”Œâ”€ CodeCLI v0.1.0 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Welcome back!                                              â”‚
â”‚                                                            â”‚
â”‚   <span class="hljs-strong">____</span>          _                                         â”‚
â”‚  / <span class="hljs-strong">__<span class="hljs-emphasis">_| _</span>__</span>  <span class="hljs-strong">__| | __</span>_                                    â”‚
â”‚ | |    / _ \/ <span class="hljs-emphasis">_` |/ _</span> \                                   â”‚
â”‚ | |<span class="hljs-strong">__<span class="hljs-emphasis">_|  _</span><span class="hljs-emphasis">_/ (_</span>| |  __</span>/                                   â”‚
â”‚  \<span class="hljs-strong">____</span>|\<span class="hljs-strong">__<span class="hljs-emphasis">_|\_</span><span class="hljs-emphasis">_,_</span>|\__</span><span class="hljs-emphasis">_|                                   â”‚
â”‚                                                            â”‚
â”‚ Project: my-project                                        â”‚
â”‚ Model: Opus                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â€º _</span>
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
accept edits off (shift+tab to cycle)
</code></pre>
<p>æ ¸å¿ƒåŠŸèƒ½åŒ…æ‹¬ï¼š</p>
<ul>
<li>æµç•…çš„å¤šè¡Œè¾“å…¥ç¼–è¾‘</li>
<li>å†å²å‘½ä»¤æœç´¢</li>
<li>æ–œæ å‘½ä»¤ç³»ç»Ÿ</li>
<li>ç»ˆç«¯å†…çš„ Shell æ‰§è¡Œ</li>
</ul>
<h2 data-id="heading-1">æ ¸å¿ƒæ¶æ„</h2>
<p>é¡¹ç›®åªæœ‰ä¸¤ä¸ªæ ¸å¿ƒæ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">src/
â”œâ”€â”€ index.ts    <span class="hljs-comment"># å…¥å£ï¼Œå¤„ç†å‘½ä»¤è¡Œå‚æ•°</span>
â””â”€â”€ repl.ts     <span class="hljs-comment"># REPLå¼•æ“ï¼Œçº¦1200è¡Œ</span>
</code></pre>
<p>è™½ç„¶ <code>repl.ts</code> ä»£ç é‡ä¸å°ï¼Œä½†ç»“æ„éå¸¸æ¸…æ™°ï¼Œå¯ä»¥æ‹†åˆ†ä¸ºå‡ ä¸ªç‹¬ç«‹çš„æ¨¡å—ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CodeCli                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ InputBuffer â”‚  â”‚  Renderer   â”‚  â”‚  CommandSet â”‚ â”‚
â”‚  â”‚  (è¾“å…¥çŠ¶æ€)  â”‚  â”‚  (ç»ˆç«¯æ¸²æŸ“)  â”‚  â”‚  (å‘½ä»¤å¤„ç†)  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  History    â”‚  â”‚KillRing     â”‚  â”‚   Message   â”‚ â”‚
â”‚  â”‚  (å†å²ç®¡ç†)  â”‚  â”‚(å¤åˆ¶ç²˜è´´)    â”‚  â”‚  (æ¶ˆæ¯é˜Ÿåˆ—)  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h2 data-id="heading-2">åŠŸèƒ½ä»‹ç»</h2>
<h5 data-id="heading-3">ä¸€ã€è¾“å…¥ç¼“å†²åŒºï¼šå¤„ç†å¤šè¡Œç¼–è¾‘</h5>
<p>æœ€åŸºç¡€ä¹Ÿæœ€å…³é”®çš„æ˜¯è¾“å…¥ç¼“å†²åŒºã€‚å®ƒéœ€è¦ç»´æŠ¤ä¸¤ä¸ªæ ¸å¿ƒçŠ¶æ€ï¼šæ–‡æœ¬å†…å®¹å’Œå…‰æ ‡ä½ç½®ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">InputBuffer</span> {
  value = <span class="hljs-string">""</span>;      <span class="hljs-comment">// å½“å‰æ–‡æœ¬</span>
  cursor = <span class="hljs-number">0</span>;      <span class="hljs-comment">// å…‰æ ‡ä½ç½®</span>

  <span class="hljs-title function_">insert</span>(<span class="hljs-params">text: <span class="hljs-built_in">string</span></span>) {
    <span class="hljs-comment">// åœ¨å…‰æ ‡å¤„æ’å…¥æ–‡æœ¬ï¼Œæ›´æ–°å…‰æ ‡</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span>.<span class="hljs-title function_">slice</span>(<span class="hljs-number">0</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">cursor</span>) + text + <span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span>.<span class="hljs-title function_">slice</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">cursor</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">cursor</span> += text.<span class="hljs-property">length</span>;
  }

  <span class="hljs-title function_">moveWordLeft</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// è·³åˆ°å‰ä¸€ä¸ªå•è¯å¼€å¤´</span>
    <span class="hljs-keyword">let</span> i = <span class="hljs-variable language_">this</span>.<span class="hljs-property">cursor</span> - <span class="hljs-number">1</span>;
    <span class="hljs-keyword">while</span> (i &gt; <span class="hljs-number">0</span> &amp;&amp; <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">isWhitespace</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span>[i])) i--;
    <span class="hljs-keyword">while</span> (i &gt; <span class="hljs-number">0</span> &amp;&amp; <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">isWordChar</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span>[i - <span class="hljs-number">1</span>])) i--;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">cursor</span> = i;
  }
}
</code></pre>
<p><strong>è®¾è®¡è¦ç‚¹ï¼š</strong></p>
<p><strong>1. å…‰æ ‡ä½ç½®ç‹¬ç«‹è·Ÿè¸ª</strong> - ä¸ä¾èµ–ç»ˆç«¯çš„å®é™…å…‰æ ‡ï¼Œåªç»´æŠ¤é€»è¾‘ä½ç½®</p>
<p><strong>2. å¤šè¡Œæ”¯æŒ</strong> - å†…éƒ¨ç”¨ <code>\n</code> åˆ†å‰²ï¼Œæ¸²æŸ“æ—¶è½¬æ¢ä¸ºè¡Œåˆ—åæ ‡</p>
<p><strong>3. è¯æ“ä½œ</strong> - ç±»ä¼¼ Emacsï¼ŒæŒ‰å•è¯è¾¹ç•Œç§»åŠ¨ï¼ˆAlt+B/Fï¼‰</p>
<p>è¿™ä¸ªè®¾è®¡çš„å·§å¦™ä¹‹å¤„åœ¨äºï¼šè¾“å…¥é€»è¾‘ä¸æ¸²æŸ“é€»è¾‘å®Œå…¨è§£è€¦ã€‚æ— è®ºç»ˆç«¯æ€ä¹ˆå˜åŒ–ï¼ŒInputBuffer åªè´Ÿè´£ç»´æŠ¤æ­£ç¡®çš„æ–‡æœ¬çŠ¶æ€ã€‚</p>
<h5 data-id="heading-4">äºŒã€ç»ˆç«¯æ¸²æŸ“ï¼šANSI è½¬ä¹‰åºåˆ—</h5>
<p>ç»ˆç«¯æ¸²æŸ“çš„æ ¸å¿ƒæ˜¯ä½¿ç”¨ ANSI è½¬ä¹‰åºåˆ—æ§åˆ¶å±å¹•ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">private</span> <span class="hljs-title function_">render</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> <span class="hljs-attr">lines</span>: <span class="hljs-built_in">string</span>[] = [];

  <span class="hljs-comment">// 1. æ„å»ºæ‰€æœ‰è¡Œçš„å†…å®¹</span>
  lines.<span class="hljs-title function_">push</span>(header);
  lines.<span class="hljs-title function_">push</span>(...messages);
  lines.<span class="hljs-title function_">push</span>(inputArea);
  lines.<span class="hljs-title function_">push</span>(modeLine);

  <span class="hljs-comment">// 2. æ¸…å±å¹¶è¾“å‡º</span>
  process.<span class="hljs-property">stdout</span>.<span class="hljs-title function_">write</span>(<span class="hljs-string">"\x1b[2J\x1b[H"</span>);  <span class="hljs-comment">// æ¸…å±ï¼Œå…‰æ ‡å½’ä½</span>
  process.<span class="hljs-property">stdout</span>.<span class="hljs-title function_">write</span>(lines.<span class="hljs-title function_">join</span>(<span class="hljs-string">"\n"</span>));

  <span class="hljs-comment">// 3. å®šä½å…‰æ ‡</span>
  process.<span class="hljs-property">stdout</span>.<span class="hljs-title function_">write</span>(<span class="hljs-string">`\x1b[<span class="hljs-subst">${row}</span>;<span class="hljs-subst">${col}</span>H`</span>);
}
</code></pre>
<p><strong>å¸¸ç”¨ ANSI åºåˆ—ï¼š</strong></p>





























<table><thead><tr><th>åºåˆ—</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td><code>\x1b[2J</code></td><td>æ¸…å±</td></tr><tr><td><code>\x1b[H</code></td><td>å…‰æ ‡ç§»åˆ°å·¦ä¸Šè§’</td></tr><tr><td><code>\x1b[row;colH</code></td><td>ç§»åŠ¨å…‰æ ‡åˆ°æŒ‡å®šä½ç½®</td></tr><tr><td><code>\x1b[?25h</code></td><td>æ˜¾ç¤ºå…‰æ ‡</td></tr><tr><td><code>\x1b[35m</code></td><td>è®¾ç½®é¢œè‰²ï¼ˆç´«è‰²ï¼‰</td></tr></tbody></table>
<p>æ¸²æŸ“ç­–ç•¥é‡‡ç”¨"å…¨å±åˆ·æ–°"ï¼šæ¯æ¬¡çŠ¶æ€å˜åŒ–éƒ½é‡æ–°è®¡ç®—å¹¶ç»˜åˆ¶æ‰€æœ‰å†…å®¹ã€‚è¿™åœ¨ç°ä»£ç»ˆç«¯ä¸Šæ€§èƒ½è¶³å¤Ÿå¥½ï¼Œä¸”ä»£ç ç®€æ´ã€‚</p>
<h5 data-id="heading-5">ä¸‰ã€é”®ç›˜äº‹ä»¶ï¼šåŸå§‹æ¨¡å¼å¤„ç†</h5>
<p>Node.js é»˜è®¤ä½¿ç”¨" cooked mode"ï¼Œéœ€è¦å›è½¦æ‰å‘é€è¾“å…¥ã€‚æˆ‘ä»¬éœ€è¦åˆ‡æ¢åˆ°"raw mode"æ¥æ•è·æ¯ä¸ªæŒ‰é”®ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-title function_">start</span>(<span class="hljs-params"/>) {
  readline.<span class="hljs-title function_">emitKeypressEvents</span>(process.<span class="hljs-property">stdin</span>);
  <span class="hljs-keyword">if</span> (process.<span class="hljs-property">stdin</span>.<span class="hljs-property">isTTY</span>) process.<span class="hljs-property">stdin</span>.<span class="hljs-title function_">setRawMode</span>(<span class="hljs-literal">true</span>);
  process.<span class="hljs-property">stdin</span>.<span class="hljs-title function_">on</span>(<span class="hljs-string">"keypress"</span>, <span class="hljs-function">(<span class="hljs-params">str, key</span>) =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">onKeypress</span>(str, key));
}

<span class="hljs-keyword">private</span> <span class="hljs-title function_">onKeypress</span>(<span class="hljs-params">str: <span class="hljs-built_in">string</span>, key: readline.Key</span>) {
  <span class="hljs-keyword">if</span> (key.<span class="hljs-property">ctrl</span> &amp;&amp; key.<span class="hljs-property">name</span> === <span class="hljs-string">"c"</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">input</span>.<span class="hljs-title function_">setValue</span>(<span class="hljs-string">""</span>);  <span class="hljs-comment">// Ctrl+C æ¸…ç©º</span>
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (key.<span class="hljs-property">ctrl</span> &amp;&amp; key.<span class="hljs-property">name</span> === <span class="hljs-string">"r"</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">startReverseSearch</span>();  <span class="hljs-comment">// Ctrl+R å†å²æœç´¢</span>
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (str &amp;&amp; !key.<span class="hljs-property">ctrl</span> &amp;&amp; !key.<span class="hljs-property">meta</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">input</span>.<span class="hljs-title function_">insert</span>(str);  <span class="hljs-comment">// æ™®é€šå­—ç¬¦</span>
  }
  <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">render</span>();  <span class="hljs-comment">// æ¯æ¬¡æŒ‰é”®åé‡ç»˜</span>
}
</code></pre>
<p><strong>äº‹ä»¶å¤„ç†çš„éš¾ç‚¹ï¼š</strong></p>
<p><strong>ç»„åˆé”®è¯†åˆ«</strong> - Ctrl/Alt/Shift éœ€è¦æ£€æŸ¥ <code>key.ctrl</code>ã€<code>key.meta</code> ç­‰æ ‡å¿—</p>
<p><strong>ç‰¹æ®Šé”®å¤„ç†</strong> - æ–¹å‘é”®ã€Home/End ç­‰ä¸ä¼šäº§ç”Ÿå¯æ‰“å°å­—ç¬¦</p>
<p><strong>åŒå‡» ESC</strong> - æ£€æµ‹ä¸¤æ¬¡ ESC çš„é—´éš”æ¥åˆ¤æ–­ rewind å‘½ä»¤</p>
<h5 data-id="heading-6">å››ã€å†å²æœç´¢ï¼šä»¿ Emacs çš„ Ctrl+R</h5>
<p>å†å²æœç´¢æ˜¯æå‡æ•ˆç‡çš„å…³é”®åŠŸèƒ½ã€‚å®ç°æ€è·¯ï¼š</p>
<pre><code class="hljs">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç”¨æˆ·è¾“å…¥æœç´¢å­—ç¬¦ä¸²                                      â”‚
â”‚         â†“                                                â”‚
â”‚  ä»å†å²æœ«å°¾å‘å‰éå†æŸ¥æ‰¾åŒ¹é…                              â”‚
â”‚         â†“                                                â”‚
â”‚  å®æ—¶æ›´æ–°æ˜¾ç¤ºçš„åŒ¹é…ç»“æœ                                  â”‚
â”‚         â†“                                                â”‚
â”‚  ç”¨æˆ·å¯ä»¥ç»§ç»­è¾“å…¥ç¼©å°æœç´¢ï¼Œæˆ– Ctrl+R æŸ¥çœ‹ä¸Šä¸€ä¸ªåŒ¹é…      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">private</span> <span class="hljs-title function_">findHistoryMatch</span>(<span class="hljs-attr">query</span>: <span class="hljs-built_in">string</span>, <span class="hljs-attr">startIndex</span>: <span class="hljs-built_in">number</span>): <span class="hljs-built_in">number</span> {
  <span class="hljs-keyword">if</span> (!query) <span class="hljs-keyword">return</span> startIndex;
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = startIndex; i &gt;= <span class="hljs-number">0</span>; i--) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">history</span>[i].<span class="hljs-title function_">includes</span>(query)) <span class="hljs-keyword">return</span> i;
  }
  <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>;
}
</code></pre>
<p>æœç´¢æ˜¯äº¤äº’å¼çš„ï¼šæ¯è¾“å…¥ä¸€ä¸ªå­—ç¬¦å°±é‡æ–°æœç´¢ï¼Œå®æ—¶æ˜¾ç¤ºåŒ¹é…ç»“æœã€‚</p>
<h5 data-id="heading-7">äº”ã€æ€ç¯ï¼šEmacs é£æ ¼çš„å¤åˆ¶ç²˜è´´</h5>
<p>"æ€ç¯"ï¼ˆKill Ringï¼‰æ˜¯ Emacs çš„æ¦‚å¿µï¼Œæ¯”ç³»ç»Ÿå‰ªè´´æ¿æ›´å¼ºå¤§ï¼š</p>
<pre><code class="hljs">æ“ä½œ          æ•ˆæœ
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Ctrl+K        åˆ é™¤åˆ°è¡Œå°¾ï¼Œå­˜å…¥æ€ç¯
Ctrl+U        åˆ é™¤æ•´è¡Œï¼Œå­˜å…¥æ€ç¯
Ctrl+Y        ç²˜è´´æœ€æ–°å‰ªåˆ‡å†…å®¹
Alt+Y         å¾ªç¯åˆ‡æ¢å‰ªè´´å†å²
</code></pre>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">private</span> <span class="hljs-attr">killRing</span>: <span class="hljs-built_in">string</span>[] = [];

<span class="hljs-keyword">private</span> <span class="hljs-title function_">pushKillRing</span>(<span class="hljs-params">text: <span class="hljs-built_in">string</span></span>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">killRing</span>.<span class="hljs-title function_">push</span>(text);  <span class="hljs-comment">// è®°å½•æ¯æ¬¡åˆ é™¤</span>
}

<span class="hljs-keyword">private</span> <span class="hljs-title function_">yank</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> text = <span class="hljs-variable language_">this</span>.<span class="hljs-property">killRing</span>[<span class="hljs-variable language_">this</span>.<span class="hljs-property">killRing</span>.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>];
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">input</span>.<span class="hljs-title function_">insert</span>(text);
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">lastYankIndex</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">killRing</span>.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>;
}

<span class="hljs-keyword">private</span> <span class="hljs-title function_">yankCycle</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// Alt+Yï¼šç²˜è´´åå¾ªç¯åˆ‡æ¢ä¹‹å‰å‰ªåˆ‡çš„å†…å®¹</span>
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">lastYankIndex</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">lastYankIndex</span> &lt;= <span class="hljs-number">0</span>
    ? <span class="hljs-variable language_">this</span>.<span class="hljs-property">killRing</span>.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>
    : <span class="hljs-variable language_">this</span>.<span class="hljs-property">lastYankIndex</span> - <span class="hljs-number">1</span>;
  <span class="hljs-comment">// æ›¿æ¢åˆšæ‰ç²˜è´´çš„å†…å®¹...</span>
}
</code></pre>
<p>è¿™ä¸ªè®¾è®¡è®©å¤šæ¬¡å‰ªåˆ‡çš„å†…å®¹éƒ½èƒ½è¢«è®¿é—®ï¼Œæ¯”å•ä¸€å‰ªè´´æ¿çµæ´»å¾—å¤šã€‚</p>
<h5 data-id="heading-8">å…­ã€å‘½ä»¤ç³»ç»Ÿï¼šæ–œæ å‰ç¼€</h5>
<p>å‘½ä»¤ä»¥ <code>/</code> å¼€å¤´ï¼Œç±»ä¼¼ Discord/Slash å‘½ä»¤ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">/help      æ˜¾ç¤ºå¸®åŠ©
/clear     æ¸…ç©ºå¯¹è¯
/plan      åˆ‡æ¢åˆ°è®¡åˆ’æ¨¡å¼
/model     åˆ‡æ¢AIæ¨¡å‹
</code></pre>
<p>å®ç°æ ¸å¿ƒæ˜¯ä¸€ä¸ªç®€å•çš„è·¯ç”±å™¨ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">private</span> <span class="hljs-keyword">async</span> <span class="hljs-title function_">handleCommand</span>(<span class="hljs-params">input: <span class="hljs-built_in">string</span></span>) {
  <span class="hljs-keyword">const</span> parts = input.<span class="hljs-title function_">slice</span>(<span class="hljs-number">1</span>).<span class="hljs-title function_">trim</span>().<span class="hljs-title function_">split</span>(<span class="hljs-regexp">/\s+/</span>);
  <span class="hljs-keyword">const</span> cmd = parts[<span class="hljs-number">0</span>];
  <span class="hljs-keyword">const</span> args = parts.<span class="hljs-title function_">slice</span>(<span class="hljs-number">1</span>);

  <span class="hljs-keyword">switch</span> (cmd) {
    <span class="hljs-keyword">case</span> <span class="hljs-string">"help"</span>: <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">showHelp</span>();
    <span class="hljs-keyword">case</span> <span class="hljs-string">"clear"</span>: <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">clearAll</span>();
    <span class="hljs-keyword">case</span> <span class="hljs-string">"plan"</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">mode</span> = <span class="hljs-string">"plan"</span>; <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-string">"model"</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setModel</span>(args[<span class="hljs-number">0</span>]); <span class="hljs-keyword">break</span>;
  }
}
</code></pre>
<p><strong>å‘½ä»¤è¡¥å…¨ï¼š</strong> å½“ç”¨æˆ·è¾“å…¥ <code>/</code> æ—¶ï¼Œå®æ—¶æ˜¾ç¤ºåŒ¹é…çš„å‘½ä»¤åˆ—è¡¨ï¼Œæå‡å‘ç°æ€§ã€‚</p>
<h5 data-id="heading-9">ä¸ƒã€Shell æ¨¡å¼ï¼šæ„Ÿå¹å·å‰ç¼€</h5>
<p>ç”¨ <code>!</code> å‰ç¼€å¯ä»¥ç›´æ¥æ‰§è¡Œ shell å‘½ä»¤ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ç”¨æˆ·è¾“å…¥ï¼š! git status</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">async</span> <span class="hljs-title function_">runShell</span>(<span class="hljs-params">command: <span class="hljs-built_in">string</span></span>) {
  <span class="hljs-keyword">const</span> child = <span class="hljs-title function_">spawn</span>(<span class="hljs-string">"powershell.exe"</span>, [<span class="hljs-string">"-Command"</span>, command]);
  <span class="hljs-keyword">let</span> output = <span class="hljs-string">""</span>;
  child.<span class="hljs-property">stdout</span>.<span class="hljs-title function_">on</span>(<span class="hljs-string">"data"</span>, <span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> output += data);
  child.<span class="hljs-title function_">on</span>(<span class="hljs-string">"close"</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">appendMessage</span>({ <span class="hljs-attr">role</span>: <span class="hljs-string">"tool"</span>, <span class="hljs-attr">content</span>: output });
  });
}
</code></pre>
<p>è¿™è®©ä½ åœ¨ AI å¯¹è¯ä¸­æ— ç¼æ‰§è¡Œç³»ç»Ÿå‘½ä»¤ï¼Œç»“æœç›´æ¥æ˜¾ç¤ºåœ¨å¯¹è¯ä¸­ã€‚</p>
<h2 data-id="heading-10">å†™åœ¨æœ€å</h2>
<p>æœ¬æ–‡ä»‹ç»äº†ä¸€ä¸ªç®€åŒ–ç‰ˆçš„ Claude Code CLI çš„å…³é”®åŠŸèƒ½åŠç›¸å…³å®ç°ä»£ç ã€‚è™½ç„¶è¿™æ˜¯ä¸€ä¸ª MVP å®ç°ï¼Œä½†å±•ç¤ºäº†ç»ˆç«¯åº”ç”¨å¼€å‘çš„æ ¸å¿ƒæŠ€æœ¯ï¼Œè¿™äº›æŠ€æœ¯å¯åº”ç”¨äºä»»ä½•éœ€è¦å¤æ‚ç»ˆç«¯äº¤äº’çš„é¡¹ç›®ã€‚</p>
<pre><code class="hljs language-ruby" lang="ruby"><span class="hljs-symbol">https:</span>/<span class="hljs-regexp">/github.com/yuboon</span><span class="hljs-regexp">/ai-examples/tree</span><span class="hljs-regexp">/main/</span><span class="hljs-number">001</span>-coding-cli
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[10ä¸‡æ•°æ®ç‚¹å¯è§†åŒ–ï¼šEchartsæ€§èƒ½ä¼˜åŒ–å®æˆ˜]]></title>    <link>https://juejin.cn/post/7602834985902145586</link>    <guid>https://juejin.cn/post/7602834985902145586</guid>    <pubDate>2026-02-05T00:37:54.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602834985902145586" data-draft-id="7602910573404553254" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="10ä¸‡æ•°æ®ç‚¹å¯è§†åŒ–ï¼šEchartsæ€§èƒ½ä¼˜åŒ–å®æˆ˜"/> <meta itemprop="keywords" content="ECharts,æ€§èƒ½ä¼˜åŒ–"/> <meta itemprop="datePublished" content="2026-02-05T00:37:54.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è°¢å°é£"/> <meta itemprop="url" content="https://juejin.cn/user/2717648473034823"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            10ä¸‡æ•°æ®ç‚¹å¯è§†åŒ–ï¼šEchartsæ€§èƒ½ä¼˜åŒ–å®æˆ˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2717648473034823/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è°¢å°é£
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-05T00:37:54.000Z" title="Thu Feb 05 2026 00:37:54 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-05
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»20åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:14px;overflow-x:hidden;color:var(--cyanosis-base-color);transition:color .35s;--cyanosis-base-color:#353535;--cyanosis-title-color:#005bb7;--cyanosis-strong-color:#2196f3;--cyanosis-em-color:#4fc3f7;--cyanosis-del-color:#ccc;--cyanosis-link-color:#3da8f5;--cyanosis-linkh-color:#007fff;--cyanosis-border-color:#bedcff;--cyanosis-border-color-2:#ececec;--cyanosis-bg-color:#fff;--cyanosis-blockquote-color:#8c8c8c;--cyanosis-blockquote-bg-color:#f0fdff;--cyanosis-code-color:#c2185b;--cyanosis-code-bg-color:#fff4f4;--cyanosis-code-pre-color:#f8f8f8;--cyanosis-table-border-color:#c3e0fd;--cyanosis-table-th-color:#dff0ff;--cyanosis-table-tht-color:#005bb7;--cyanosis-table-tr-nc-color:#f7fbff;--cyanosis-table-trh-color:#e0edf7;--cyanosis-slct-title-color:#005bb7;--cyanosis-slct-titlebg-color:rgba(175,207,247,0.25);--cyanosis-slct-text-color:#c80000;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#e8ebec;--cyanosis-slct-codebg-color:#ffeaeb;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body.__dark{--cyanosis-base-color:#cacaca;--cyanosis-title-color:#ddd;--cyanosis-strong-color:#fe9900;--cyanosis-em-color:#ffd28e;--cyanosis-del-color:#ccc;--cyanosis-link-color:#ffb648;--cyanosis-linkh-color:#fe9900;--cyanosis-border-color:#ffe3ba;--cyanosis-border-color-2:#ffcb7b;--cyanosis-bg-color:#2f2f2f;--cyanosis-blockquote-color:#c7c7c7;--cyanosis-blockquote-bg-color:rgba(255,199,116,0.1);--cyanosis-code-color:#000;--cyanosis-code-bg-color:#ffcb7b;--cyanosis-code-pre-color:rgba(255,227,185,0.5);--cyanosis-table-border-color:#fe9900;--cyanosis-table-th-color:#ffb648;--cyanosis-table-tht-color:#000;--cyanosis-table-tr-nc-color:#6d5736;--cyanosis-table-trh-color:#947443;--cyanosis-slct-title-color:#000;--cyanosis-slct-titlebg-color:#fe9900;--cyanosis-slct-text-color:#00c888;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#000;--cyanosis-slct-codebg-color:#ffcb7b;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body h1{padding-bottom:4px;font-size:30px}.markdown-body h1,.markdown-body h2{margin-top:36px;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);transition:color .35s}.markdown-body h2{position:relative;padding-left:10px;padding-right:10px;padding-bottom:10px;font-size:24px;border-bottom:1px solid var(--cyanosis-border-color-2)}.markdown-body h2:before{content:"ã€Œ";position:absolute;top:-6px;left:-14px}.markdown-body h2:after{content:"ã€";position:relative;top:6px;right:auto}.markdown-body h3{position:relative;padding-bottom:0;margin-top:30px;margin-bottom:10px;font-size:20px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h3:before{content:"Â»";padding-right:6px;color:var(--cyanosis-strong-color)}.markdown-body h4{margin-top:24px;font-size:16px}.markdown-body h4,.markdown-body h5{padding-bottom:0;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h5{margin-top:18px;font-size:14px}.markdown-body h6{padding-bottom:0;margin-top:12px;margin-bottom:10px;font-size:12px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body p{line-height:inherit;margin-top:16px;margin-bottom:16px}.markdown-body img{max-width:100%}.markdown-body hr{position:relative;width:98%;height:1px;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,var(--cyanosis-link-color),rgba(255,0,0,.3),hsla(0,0%,100%,.1),rgba(255,0,0,.3),var(--cyanosis-link-color));border-width:0;overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background-color:var(--cyanosis-bg-color);background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center;transition:background-color .5s}.markdown-body code{padding:.065em .4em;font-size:.87em;color:var(--cyanosis-code-color);word-break:break-word;overflow-x:auto;background-color:var(--cyanosis-code-bg-color);border-radius:2px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;padding:16px 12px;margin:0;font-size:12px;color:#333;word-break:normal;overflow-x:auto;background:var(--cyanosis-code-pre-color)}.markdown-body pre&gt;code::-webkit-scrollbar{width:4px;height:4px}.markdown-body pre&gt;code::-webkit-scrollbar-track{background-color:var(--cyanosis-border-color)}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:var(--cyanosis-strong-color);border-radius:10px}.markdown-body a{position:relative;text-decoration:none;color:var(--cyanosis-link-color);border-bottom:1px solid var(--cyanosis-border-color)}.markdown-body a:hover{border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body a:active,.markdown-body a:hover{color:var(--cyanosis-linkh-color)}.markdown-body a:after{position:absolute;content:"";top:100%;left:0;width:100%;opacity:0;border-bottom:1px solid var(--cyanosis-border-color);transition:top .3s,opacity .3s;transform:translateZ(0)}.markdown-body a:hover:after{top:0;opacity:1;border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid var(--cyanosis-table-border-color);border-spacing:0;border-collapse:collapse}.markdown-body table thead{color:#000;text-align:left;font-size:14px;background:#f6f6f6}.markdown-body table tr:nth-child(2n){background-color:var(--cyanosis-table-tr-nc-color)}.markdown-body table tr:hover{background-color:var(--cyanosis-table-trh-color)}.markdown-body table td,.markdown-body table th{padding:12px 8px;line-height:24px;border:1px solid var(--cyanosis-table-border-color)}.markdown-body table th{color:var(--cyanosis-table-tht-color);background-color:var(--cyanosis-table-th-color)}.markdown-body table td{min-width:120px}.markdown-body blockquote{color:var(--cyanosis-blockquote-color);border-left:4px solid var(--cyanosis-strong-color);background-color:var(--cyanosis-blockquote-bg-color);padding:1px 20px;margin:22px 0;transition:color .35s}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body b,.markdown-body blockquote&gt;b,.markdown-body blockquote&gt;strong,.markdown-body strong{color:var(--cyanosis-strong-color)}.markdown-body em,.markdown-body i{color:var(--cyanosis-em-color)}.markdown-body del{color:var(--cyanosis-del-color)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:4px}.markdown-body ol li{padding-left:6px}.markdown-body details&gt;summary{outline:none;color:var(--cyanosis-title-color);font-size:20px;font-weight:bolder;border-bottom:1px solid var(--cyanosis-border-color);cursor:pointer}.markdown-body details&gt;p{padding:10px 20px;margin:10px 0 0;color:#666;background-color:var(--cyanosis-blockquote-bg-color);border:2px dashed var(--cyanosis-strong-color)}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection{color:var(--cyanosis-slct-title-color);background-color:var(--cyanosis-slct-titlebg-color)}.markdown-body ol li::selection,.markdown-body p::selection,.markdown-body ul li::selection{color:var(--cyanosis-slct-text-color);background-color:var(--cyanosis-slct-bg-color)}.markdown-body a::selection,.markdown-body b::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:var(--cyanosis-slct-elbg-color)}.markdown-body del::selection{color:var(--cyanosis-slct-del-color);background-color:var(--cyanosis-slct-elbg-color)}.markdown-body table thead th::selection{background-color:transparent}.markdown-body table tbody td::selection{background-color:var(--cyanosis-slct-bg-color)}.markdown-body code::selection{background-color:var(--cyanosis-slct-codebg-color)}.markdown-body pre&gt;code::selection{background-color:var(--cyanosis-slct-prebg-color)}.markdown-body .contains-task-list{padding-left:14px;list-style:none}.markdown-body .contains-task-list input[type=checkbox]{position:relative}.markdown-body .contains-task-list input[type=checkbox]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;width:inherit;height:inherit;background:#f0f8ff;border:1px solid #add6ff;border-radius:2px;box-sizing:border-box;z-index:1}.markdown-body .contains-task-list input[type=checkbox]:checked:after{content:"âœ“";position:absolute;top:-12px;left:0;right:0;bottom:0;width:0;height:0;color:#f55;font-size:20px;font-weight:700;z-index:2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="vs2015">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#1e1e1e;color:#dcdcdc}.hljs-keyword,.hljs-link,.hljs-literal,.hljs-name,.hljs-symbol{color:#569cd6}.hljs-link{text-decoration:underline}.hljs-built_in,.hljs-type{color:#4ec9b0}.hljs-class,.hljs-number{color:#b8d7a3}.hljs-meta-string,.hljs-string{color:#d69d85}.hljs-regexp,.hljs-template-tag{color:#9a5334}.hljs-formula,.hljs-function,.hljs-params,.hljs-subst,.hljs-title{color:#dcdcdc}.hljs-comment,.hljs-quote{color:#57a64a;font-style:italic}.hljs-doctag{color:#608b4e}.hljs-meta,.hljs-meta-keyword,.hljs-tag{color:#9b9b9b}.hljs-template-variable,.hljs-variable{color:#bd63c5}.hljs-attr,.hljs-attribute,.hljs-builtin-name{color:#9cdcfe}.hljs-section{color:gold}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-bullet,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-id,.hljs-selector-pseudo,.hljs-selector-tag{color:#d7ba7d}.hljs-addition{background-color:#144212}.hljs-addition,.hljs-deletion{display:inline-block;width:100%}.hljs-deletion{background-color:#600}</style><p>ã€€ã€€æœ€è¿‘åœ¨å·¥ä½œä¸­é‡åˆ°äº†ä¸€ä¸ªé¢‡å…·æŒ‘æˆ˜çš„éœ€æ±‚ï¼Œéœ€è¦åœ¨Webé¡µé¢ä¸Šé€šè¿‡Echartså›¾è¡¨æ¸²æŸ“è¶…è¿‡10ä¸‡æ¡ç‚¹ä½æ•°æ®ã€‚å¯¹äºå‰ç«¯å¼€å‘æ¥è¯´ï¼Œå¤§æ•°æ®é‡çš„å¯è§†åŒ–æ¸²æŸ“ä¸€ç›´æ˜¯ä¸ªæ£˜æ‰‹çš„é—®é¢˜ï¼Œå°¤å…¶æ˜¯å½“æ•°æ®é‡è¾¾åˆ°10ä¸‡çº§åˆ«æ—¶ï¼Œä¸ä»…æµè§ˆå™¨è¯·æ±‚å“åº”é€Ÿåº¦å˜æ…¢ï¼Œæµè§ˆå™¨çš„æ¸²æŸ“æ€§èƒ½ç“¶é¢ˆä¼šå˜å¾—éå¸¸æ˜æ˜¾ï¼›å› æ­¤ï¼Œæœ¬æ–‡æˆ‘ä»¬å°±çœ‹ä¸‹å¦‚æœåœ¨å·¥ä½œä¸­é‡åˆ°è¿™ç§åœºæ™¯ï¼Œåº”è¯¥å¦‚ä½•å¤„ç†ã€‚</p>
<p>ã€€ã€€é¦–å…ˆä»‹ç»ä¸€ä¸‹å®é™…çš„åœºæ™¯ï¼Œæˆ‘ä»¬å›¢é˜Ÿæœ€è¿‘æ¥åˆ°ä¸€ä¸ªç‰©è”ç½‘è®¾å¤‡æ•°æ®åˆ†æéœ€æ±‚ï¼šä¸šåŠ¡æ–¹éœ€è¦æŸ¥çœ‹ç‰¹å®šè®¾å¤‡ä¸€æ®µæ—¶é—´èŒƒå›´å†…çš„è¿è¡ŒçŠ¶æ€è¶‹åŠ¿ã€‚è¿™çœ‹èµ·æ¥ä¼¼ä¹æ˜¯ä¸ªç®€å•çš„æŠ˜çº¿å›¾éœ€æ±‚ï¼Œä½†å½“æˆ‘ä»¬æ·±å…¥äº†è§£æ•°æ®è§„æ¨¡æ—¶ï¼Œå‘ç°äº†å·¨å¤§çš„æŒ‘æˆ˜ã€‚</p>
<p>ã€€ã€€é¦–å…ˆæ˜¯ä¸šåŠ¡æ–¹è¦æ±‚ä¸é™åˆ¶æ—¶é—´èŒƒå›´ï¼Œä¾‹å¦‚å¯ä»¥è·¨æ•°å¹´çš„èŒƒå›´ï¼Œä»2021å¹´åˆ°2025å¹´ï¼›è¿™å¯¹æˆ‘ä»¬å‰åç«¯æ¥è¯´ï¼Œæ„å‘³ç€æŸ¥è¯¢å’Œæ¸²æŸ“æ•°æ®é‡ä¼šéå¸¸åºå¤§ï¼Œå› ä¸ºè®¾å¤‡é‡‡é›†ä¸€èˆ¬éƒ½æ˜¯æŒ‰ç…§å›ºå®šçš„æ—¶é—´é¢‘ç‡é‡‡é›†çš„ï¼›æ¯”å¦‚å¦‚æœè®¾å¤‡æ¯éš”15åˆ†é’Ÿå°±ä¼šé‡‡é›†å‘é€ä¸€æ¬¡æ•°æ®ï¼Œä¸€å¤©çš„æ•°æ®é‡å°±æ˜¯24å°æ—¶ Ã— (60åˆ†é’Ÿ/15åˆ†é’Ÿ) = 96ä¸ªæ•°æ®ç‚¹/å¤©ï¼Œå¦‚æœæŸ¥è¯¢4å¹´çš„æ•°æ®å°±æ˜¯4å¹´* 365å¤©* 96ä¸ªæ•°æ®ç‚¹ = 14ä½™ä¸‡æ¡æ•°æ®ã€‚</p>
<p>ã€€ã€€ä¸šåŠ¡äººå‘˜ç»™æˆ‘ä»¬çš„éœ€æ±‚å¾ˆæ˜ç¡®ï¼š"æˆ‘ä»¬éœ€è¦åœ¨è¿™å¼ å›¾ä¸Šçœ‹åˆ°å››å¹´çš„å®Œæ•´è¶‹åŠ¿ï¼Œèƒ½å¤Ÿå¿«é€Ÿå‘ç°å¼‚å¸¸æ³¢åŠ¨ï¼Œå¹¶ä¸”å¯ä»¥éšæ„ç¼©æ”¾æŸ¥çœ‹ä»»æ„æ—¶é—´æ®µçš„ç»†èŠ‚"ã€‚ä»–ä»¬è¡¥å……é“ï¼š"ä¹‹å‰è¯•è¿‡æŒ‰å¤©èšåˆçš„æ•°æ®ï¼Œä½†é‚£æ ·ä¼šä¸¢å¤±å¾ˆå¤šé‡è¦ä¿¡æ¯ã€‚æ¯”å¦‚è®¾å¤‡åœ¨æŸä¸ªå…·ä½“æ—¶é—´ç‚¹çš„ç¬æ—¶å¼‚å¸¸ï¼Œåœ¨æ—¥åº¦æ•°æ®ä¸­å°±çœ‹ä¸å‡ºæ¥äº†ã€‚"</p>
<p>ã€€ã€€æˆ‘ä»¬æœ€åˆçš„å°è¯•éå¸¸ç›´æ¥ï¼Œä¸€æ¬¡æ€§åŠ è½½æ‰€æœ‰çš„æ•°æ®ï¼Œç„¶åé€šè¿‡Echartsæ¸²æŸ“ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d9f9c7295154459fa6306939e5b45d0a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LCi5bCP6aOe:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770856674&amp;x-signature=7dN38vp3w2aDzjwTpSYRaEZujqw%3D" alt="ä¸€æ¬¡æ€§åŠ è½½" loading="lazy"/></p>
<p>ã€€ã€€ä½†æ˜¯è¯·æ±‚æ¥å£çš„æ—¶é—´å°±è¾¾åˆ°äº†14ç§’ï¼Œæ•°æ®å“åº”æ—¶æµè§ˆå™¨å†…å­˜å ç”¨æ¿€å¢ï¼Œéå¸¸å®¹æ˜“å´©æºƒå¡æ­»ï¼Œå®Œå…¨æ²¡æœ‰ç”¨æˆ·ä½“éªŒå¯è¨€ã€‚</p>
<h2 data-id="heading-0">æ•°æ®åˆ†å‰²ï¼šåŒ–æ•´ä¸ºé›¶çš„ç­–ç•¥</h2>
<p>ã€€ã€€äºæ˜¯ï¼Œæ ¹æ®ä¸šåŠ¡éœ€æ±‚ï¼Œæˆ‘ä»¬é¦–å…ˆå°è¯•æ•°æ®åˆ†å‰²ï¼Œå°†æ•°æ®æŒ‰å¤©ç»´åº¦è¿›è¡Œåˆ†å‰²ï¼Œç„¶ååˆ†åˆ«è¯·æ±‚æ•°æ®ï¼›ä¸‹é¢æ˜¯åˆ†å‰²çš„æ ¸å¿ƒå‡½æ•°ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> dayjs <span class="hljs-keyword">from</span> <span class="hljs-string">"dayjs"</span>;
<span class="hljs-comment">/**
 * æŒ‰æŒ‡å®šå¤©æ•°åˆ†å‰²æ—¥æœŸåŒºé—´
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} startDate å¼€å§‹æ—¥æœŸ
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} endDate ç»“æŸæ—¥æœŸ
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">number</span>} num åˆ†å‰²å¤©æ•°
 */</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">separateDate</span>(<span class="hljs-params">startDate, endDate, num = <span class="hljs-number">180</span></span>) {
  <span class="hljs-comment">// ä½¿ç”¨dayjs.jsåˆ›å»ºæ—¥æœŸå¯¹è±¡</span>
  <span class="hljs-keyword">const</span> start = <span class="hljs-title function_">dayjs</span>(startDate);
  <span class="hljs-keyword">const</span> end = <span class="hljs-title function_">dayjs</span>(endDate);

  <span class="hljs-comment">// éªŒè¯æ—¥æœŸæœ‰æ•ˆæ€§</span>
  <span class="hljs-keyword">if</span> (!start.<span class="hljs-title function_">isValid</span>() || !end.<span class="hljs-title function_">isValid</span>()) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'æ— æ•ˆçš„æ—¥æœŸæ ¼å¼'</span>);
  }

  <span class="hljs-comment">// ç¡®ä¿å¼€å§‹æ—¥æœŸæ—©äºæˆ–ç­‰äºç»“æŸæ—¥æœŸ</span>
  <span class="hljs-keyword">if</span> (start.<span class="hljs-title function_">isAfter</span>(end)) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'å¼€å§‹æ—¥æœŸä¸èƒ½æ™šäºç»“æŸæ—¥æœŸ'</span>);
  }

  <span class="hljs-comment">// è®¡ç®—æ€»å¤©æ•°</span>
  <span class="hljs-keyword">const</span> totalDays = end.<span class="hljs-title function_">diff</span>(start, <span class="hljs-string">'days'</span>);

  <span class="hljs-comment">// å¦‚æœæ€»å¤©æ•°å°äºç­‰äºæœ€å¤§åˆ†å‰²å¤©æ•°ï¼Œç›´æ¥è¿”å›ä¸€ä¸ªåŒºé—´</span>
  <span class="hljs-keyword">if</span> (totalDays &lt;= num) {
    <span class="hljs-keyword">return</span> [
      {
        <span class="hljs-attr">segmentStartDate</span>: start.<span class="hljs-title function_">format</span>(<span class="hljs-string">'YYYY-MM-DD'</span>),
        <span class="hljs-attr">segmentEndDate</span>: end.<span class="hljs-title function_">format</span>(<span class="hljs-string">'YYYY-MM-DD'</span>),
        <span class="hljs-attr">segmentStartDay</span>: <span class="hljs-number">0</span>,
        <span class="hljs-attr">segmentEndDay</span>: totalDays,
      },
    ];
  }
}
</code></pre>
<p>ã€€ã€€åœ¨å¤„ç†æ—¶ï¼Œæˆ‘ä»¬ä¼šå…ˆæ ¡éªŒå‚æ•°æ ¼å¼å¹¶è®¡ç®—æ€»å¤©æ•°ï¼Œè‹¥æ€»å¤©æ•°æœªè¶…è¿‡æœ€å¤§åˆ†å‰²å¤©æ•°ï¼Œåˆ™å°†ç›´æ¥è¿”å›è¯¥æ—¥æœŸåŒºé—´ï¼Œä¸å†è¿›è¡Œåˆ†å‰²å¤„ç†ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">separateDate</span>(<span class="hljs-params">startDate, endDate, num = <span class="hljs-number">180</span></span>) {
  <span class="hljs-comment">// çœç•¥å…¶ä»–ä»£ç ...</span>

  <span class="hljs-comment">// è®¡ç®—éœ€è¦åˆ†å‰²çš„åŒºé—´æ•°é‡</span>
  <span class="hljs-keyword">const</span> numIntervals = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">ceil</span>(totalDays / num);

  <span class="hljs-keyword">const</span> result = [];

  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; numIntervals; i++) {
    <span class="hljs-comment">// è®¡ç®—å½“å‰åŒºé—´çš„å¼€å§‹æ—¥æœŸ</span>
    <span class="hljs-keyword">const</span> iStart = start.<span class="hljs-title function_">clone</span>().<span class="hljs-title function_">add</span>(i * num, <span class="hljs-string">'days'</span>);

    <span class="hljs-comment">// è®¡ç®—å½“å‰åŒºé—´çš„ç»“æŸæ—¥æœŸï¼ˆæœ€åä¸€ä¸ªåŒºé—´ä½¿ç”¨å®é™…ç»“æŸæ—¥æœŸï¼‰</span>
    <span class="hljs-keyword">const</span> iEnd = i === numIntervals - <span class="hljs-number">1</span> ? end : start.<span class="hljs-title function_">clone</span>().<span class="hljs-title function_">add</span>((i + <span class="hljs-number">1</span>) * num - <span class="hljs-number">1</span>, <span class="hljs-string">'days'</span>);

    <span class="hljs-comment">// ç¡®ä¿ç»“æŸæ—¥æœŸä¸è¶…è¿‡å®é™…ç»“æŸæ—¥æœŸ</span>
    <span class="hljs-keyword">const</span> actualEnd = iEnd.<span class="hljs-title function_">isAfter</span>(end) ? end : iEnd;

    <span class="hljs-comment">// è®¡ç®—ç›¸å¯¹äºå¼€å§‹æ—¥æœŸçš„å¤©æ•°</span>
    <span class="hljs-keyword">const</span> segmentStartDay = iStart.<span class="hljs-title function_">diff</span>(start, <span class="hljs-string">'days'</span>);
    <span class="hljs-keyword">const</span> segmentEndDay = actualEnd.<span class="hljs-title function_">diff</span>(start, <span class="hljs-string">'days'</span>);

    result.<span class="hljs-title function_">push</span>({
      <span class="hljs-attr">segmentStartDate</span>: iStart.<span class="hljs-title function_">format</span>(<span class="hljs-string">'YYYY-MM-DD'</span>),
      <span class="hljs-attr">segmentEndDate</span>: actualEnd.<span class="hljs-title function_">format</span>(<span class="hljs-string">'YYYY-MM-DD'</span>),
      segmentStartDay,
      segmentEndDay,
    });
  }

  <span class="hljs-keyword">return</span> result;
}
</code></pre>
<p>ã€€ã€€ç„¶åé€šè¿‡<code>Math.ceil</code>å°†æ•°å­—å‘ä¸Šèˆå…¥åˆ°æœ€æ¥è¿‘çš„æ•´æ•°ï¼Œå¾—åˆ°numIntervalsï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬åŒºé—´çš„æ•°é‡ã€‚æ­¤å¤–åœ¨separateDateè¿”å›çš„æ•°æ®æ¯ä¸ªåˆ†ç‰‡ä¸­ï¼ŒåŒ…å«äº†segmentStartDayå’ŒsegmentEndDayï¼Œå¯¹åº”äº†æ—¶é—´åŒºé—´çš„å¼€å§‹å’Œç»“æŸçš„å¤©æ•°ï¼Œæ–¹ä¾¿åç»­çš„æ•°æ®åˆå¹¶å¤„ç†ã€‚</p>
<p>ã€€ã€€è¿™é‡Œ<code>separateDateå‡½æ•°</code>æ˜¯æˆ‘ä»¬æ•´ä¸ªä¼˜åŒ–æ–¹æ¡ˆçš„æ ¸å¿ƒåŸºç¡€ï¼Œå®ƒå°†é•¿æ—¶é—´è·¨åº¦çš„æ•°æ®è¯·æ±‚åˆ†è§£ä¸ºå¤šä¸ªå¯ç®¡ç†çš„å­è¯·æ±‚ï¼›startDateå’ŒendDateæ¥æ”¶æ—¥å†ğŸ“…ç»„ä»¶ä¼ å…¥çš„ç”¨æˆ·é€‰æ‹©çš„å¼€å§‹å’Œç»“æŸæ—¥æœŸï¼›numå‚æ•°é»˜è®¤è®¾ç½®ä¸º180å¤©ï¼Œè¿™ä¸ªå€¼åŸºäºæˆ‘ä»¬åç«¯å“åº”æ•ˆç‡å’Œé€Ÿåº¦çš„æœ€ä¼˜åˆ†æ®µæ—¶é•¿ï¼Œå¦‚æœå•ä¸ªæ—¶é—´è·¨åº¦å¤ªé•¿ï¼Œåˆ™è¾¾ä¸åˆ°åˆ†æ®µçš„æ•ˆæœï¼Œè€Œå¦‚æœå¤ªçŸ­ï¼Œåˆ™åˆ†æ®µæ•°é‡è¿‡å¤šï¼Œè¯·æ±‚æ¬¡æ•°å¤ªé¢‘ç¹ã€‚</p>
<p>ã€€ã€€æ­£æ˜¯åŸºäºseparateDateå‡½æ•°åˆ†å‰²å‡ºçš„è¿™äº›ç‹¬ç«‹ã€åˆè§„çš„æ—¥æœŸåŒºé—´ï¼Œæˆ‘ä»¬åç»­çš„æ‰€æœ‰ä¼˜åŒ–æ“ä½œæ‰å¾—ä»¥å±•å¼€ï¼›æ¥ä¸‹æ¥ï¼Œæ¯ä¸€ä¸ªå­åŒºé—´çš„æ•°æ®ä¼šè¿›è¡Œç‹¬ç«‹çš„å¤„ç†å’ŒåŠ è½½ï¼Œä»è€Œå°†åŸæœ¬åºå¤§è€Œç¬¨é‡çš„å•æ¬¡è¯·æ±‚ï¼Œè½¬åŒ–ä¸ºä¸€æ¬¡æ¬¡é«˜æ•ˆã€å¯ç®¡ç†çš„å¹¶è¡Œä»»åŠ¡æµã€‚</p>
<h2 data-id="heading-1">WebWorkerï¼šå¼€è¾Ÿâ€œç¬¬äºŒæˆ˜çº¿â€</h2>
<p>ã€€ã€€åœ¨ä¸Šä¸€èŠ‚ï¼Œæˆ‘ä»¬å®ç°äº†æ•°æ®çš„åˆ†å‰²ï¼ŒæˆåŠŸå°†14ä¸‡+çš„æ•°æ®è¯·æ±‚åˆ†è§£ä¸ºå¤šä¸ªå°è¯·æ±‚ï¼›ä½†æ˜¯å³ä½¿æ•°æ®åˆ†ç‰‡äº†ï¼Œæ¯ä¸€åˆ†ç‰‡æ•°æ®é‡ä»ç„¶å¯èƒ½å¾ˆå¤§ï¼ˆæœ€å¤š180å¤©Ã—96ä¸ªç‚¹/å¤©=17280ä¸ªç‚¹ï¼‰ï¼›å¦‚æœç›´æ¥åœ¨ä¸»çº¿ç¨‹ä¸­å¤„ç†è¿™äº›æ•°æ®ï¼Œä»ç„¶ä¼šå¯¼è‡´UIå¡é¡¿ã€‚è¿™æ—¶å€™ï¼ŒWeb Workerå°±æ´¾ä¸Šç”¨åœºäº†ã€‚</p>
<p>ã€€ã€€<code>Web Worker</code>æ˜¯HTML5æä¾›çš„APIï¼Œå…è®¸åœ¨æµè§ˆå™¨åå°è¿è¡ŒJavaScriptè„šæœ¬ï¼Œä¸ä¸»çº¿ç¨‹å¹¶è¡Œæ‰§è¡Œã€‚è¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥åœ¨Workerçº¿ç¨‹ä¸­æ‰§è¡Œç¹é‡çš„æ•°æ®å¤„ç†ä»»åŠ¡ï¼Œè€Œä¸ä¼šé˜»å¡ç”¨æˆ·ç•Œé¢ï¼›å¦‚æœè¯´ä¸»çº¿ç¨‹æ˜¯â€œå‰å°æœåŠ¡å‘˜â€ï¼Œæ—¢è¦å“åº”å®¢äººï¼ˆç”¨æˆ·ï¼‰çš„ç‚¹å‡»ï¼Œåˆè¦å»åå¨ç‚’èœï¼ˆè®¡ç®—ï¼‰ï¼Œé‚£ä¹ˆWeb Workerå°±æ˜¯é›‡æ¥çš„â€œä¸“èŒåå¨â€ï¼›å®ƒæœ‰ä»¥ä¸‹å‡ ä¸ªç‰¹ç‚¹ï¼š</p>
<ul>
<li>ç‹¬ç«‹çº¿ç¨‹ï¼šè¿è¡Œåœ¨ç‹¬ç«‹çš„çº¿ç¨‹ä¸­ï¼Œä¸ä¸»çº¿ç¨‹å¹¶è¡Œ</li>
<li>æ— DOMè®¿é—®æƒé™ï¼šä¸èƒ½ç›´æ¥æ“ä½œDOMæˆ–è®¿é—®windowå¯¹è±¡</li>
<li>é€šè¿‡æ¶ˆæ¯é€šä¿¡ï¼šä¸ä¸»çº¿ç¨‹é€šè¿‡postMessageå’Œonmessageé€šä¿¡</li>
<li>ç”Ÿå‘½å‘¨æœŸç‹¬ç«‹ï¼šå…³é—­æ ‡ç­¾é¡µæˆ–Workerè„šæœ¬æ‰§è¡Œå®Œæ¯•æ‰ä¼šç»ˆæ­¢</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e9ad8b7a99db4ff5999640a54f77f306~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LCi5bCP6aOe:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770856674&amp;x-signature=o9WAa3hD7Z2zGa3FtCCq%2FeAri4Q%3D" alt="WebWorker" loading="lazy"/></p>
<p>ã€€ã€€é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªä¸“é—¨å¤„ç†æ•°æ®çš„Workeræ–‡ä»¶<code>data-processor.worker.js</code>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">self.<span class="hljs-property">onmessage</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) {
  <span class="hljs-keyword">var</span> list = e.<span class="hljs-property">data</span>.<span class="hljs-property">data</span>;

  <span class="hljs-keyword">const</span> listHandled = list.<span class="hljs-property">value</span>.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">el</span>) =&gt;</span> {
    <span class="hljs-comment">// å¯¹æ•°æ®è¿›è¡Œä¸€ç³»åˆ—è€—æ—¶è®¡ç®—</span>
  });

  self.<span class="hljs-title function_">postMessage</span>({
    <span class="hljs-attr">list</span>: listHandled,
  });
};
</code></pre>
<p>ã€€ã€€è¿™é‡Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªä¸“ç”¨Workerçº¿ç¨‹ï¼Œè´Ÿè´£æ‰§è¡Œæ‰€æœ‰é˜»å¡å‹çš„è®¡ç®—ä»»åŠ¡ï¼Œè´Ÿè´£å¯¹æ•°æ®è¿›è¡Œä¸€äº›è€—æ—¶çš„å¤„ç†ï¼Œä¾‹å¦‚åŸå§‹æ•°æ®æ¸…æ´—ã€å¤æ‚æŒ‡æ ‡è®¡ç®—ç­‰ç­‰ï¼Œå¹¶è¿”å›å¤„ç†åçš„æ•°æ®ï¼›ä¸»çº¿ç¨‹åˆ™ä¸“æ³¨äºUIäº¤äº’ä¸æµç•…æ¸²æŸ“ï¼Œä»…åœ¨éœ€è¦æ—¶ï¼ˆåˆ†å‰²æ•°æ®è¿”å›ï¼‰å‘Workeræ´¾å‘ä»»åŠ¡å¹¶å¼‚æ­¥æ¥æ”¶å…¶è¿”å›çš„ã€å¯ç›´æ¥ç”¨äºå›¾è¡¨ï¼ˆå¦‚EChartsï¼‰çš„è½»é‡åŒ–ç»“æœã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">loadEchartData</span>(<span class="hljs-params">rangeItem</span>) {
  <span class="hljs-keyword">const</span> { segmentStartDate, segmentEndDate } = rangeItem;
  <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchListData</span>({
    <span class="hljs-attr">startDate</span>: segmentStartDate,
    <span class="hljs-attr">endDate</span>: segmentEndDate,
  });
  <span class="hljs-keyword">if</span> (res &amp;&amp; res.<span class="hljs-property">data</span>) {
    <span class="hljs-keyword">const</span> { list } = res.<span class="hljs-property">data</span>;

    <span class="hljs-keyword">const</span> worker = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Worker</span>(<span class="hljs-string">"/data-processor.worker.js"</span>);
    worker.<span class="hljs-title function_">postMessage</span>({
      <span class="hljs-attr">data</span>: list,
    });
    worker.<span class="hljs-property">onmessage</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) {
      <span class="hljs-keyword">const</span> { list } = e.<span class="hljs-property">data</span>;
      <span class="hljs-title function_">renderChart</span>(list);
    };
  }
}
</code></pre>
<p>ã€€ã€€æˆ‘ä»¬å°†å‰é¢åˆ†å‰²å¥½çš„æ•°æ®åŒºé—´ï¼Œåˆ†å‘ä¸ºå¹¶å‘çš„æ•°æ®è¯·æ±‚è¿›è¡ŒåŠ è½½ã€‚å¾…æ•°æ®è¿”å›åï¼Œä¸»çº¿ç¨‹ä¼šå®ä¾‹åŒ–ä¸€ä¸ªWorkerçº¿ç¨‹ï¼Œå¹¶é€šè¿‡postMessageå‡½æ•°ï¼Œå°†åŸå§‹æ•°æ®è°ƒåº¦è‡³Workerè¿›è¡Œåç»­å¤„ç†ã€‚</p>
<p>ã€€ã€€è¿™é‡Œè¿˜æ¶‰åŠä¸€ä¸ªæ•°æ®è¿”å›åæ‹¼æ¥çš„é—®é¢˜ï¼Œæˆ‘ä»¬åœ¨å¾ªç¯è°ƒç”¨loadEchartDataè¯·æ±‚æ•°æ®æ—¶ï¼Œç”±äºæ˜¯å¼‚æ­¥è¿”å›ï¼Œåˆ†ç‰‡æ•°æ®è¿”å›çš„æ—¶å€™ï¼Œæ•°æ®ä¼šä¹±åºè¿”å›ï¼Œå› æ­¤ä¸èƒ½ç›´æ¥é€šè¿‡æ•°ç»„çš„pushæ¥æ·»åŠ æ•°æ®ã€‚</p>
<p>ã€€ã€€æˆ‘ä»¬åœ¨å…¨å±€å®šä¹‰xè½´å’Œyè½´ä¸¤ä¸ªæ•°ç»„ï¼Œåœ¨é¡µé¢åˆå§‹åŒ–çš„æ—¶å€™ï¼Œæ ¹æ®ä¸šåŠ¡éœ€æ±‚ï¼Œæå‰é¢„ä¼°è®¡ç®—å‡ºæ•°ç»„çš„é•¿åº¦ï¼Œå¹¶ä½¿ç”¨é»˜è®¤æ•°æ®è¿›è¡Œå¡«å……ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> <span class="hljs-attr">_xList</span>: <span class="hljs-built_in">string</span>[] = []
<span class="hljs-keyword">const</span> <span class="hljs-attr">_yList</span>: <span class="hljs-built_in">number</span>[] = []

<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; diffDay; i++) {
    <span class="hljs-keyword">const</span> nowDate = <span class="hljs-title function_">dayjs</span>(startDate.<span class="hljs-property">value</span>).<span class="hljs-title function_">add</span>(i, <span class="hljs-string">'days'</span>);
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> j = <span class="hljs-number">0</span>; j &lt; <span class="hljs-number">96</span>; j++) {
        _xList.<span class="hljs-title function_">push</span>(
            nowDate.<span class="hljs-title function_">add</span>(i * <span class="hljs-number">15</span>, <span class="hljs-string">'minutes'</span>)
            .<span class="hljs-title function_">format</span>(<span class="hljs-string">'YYYY-MM-DD HH:mm'</span>)
        )
        _yList.<span class="hljs-title function_">push</span>(<span class="hljs-number">0</span>)
    }
}
</code></pre>
<p>ã€€ã€€å½“å“åº”æ•°æ®è¿”å›åï¼Œæˆ‘ä»¬åªéœ€è¦å°†æ•°æ®æ·»åŠ åˆ°å¯¹åº”çš„ä½ç½®å³å¯ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">loadEchartData</span>(<span class="hljs-params">rangeItem</span>) {
  <span class="hljs-keyword">const</span> { segmentStartDay } = rangeItem;
  <span class="hljs-keyword">if</span> (res &amp;&amp; res.<span class="hljs-property">data</span>) {
    <span class="hljs-keyword">const</span> { list } = res.<span class="hljs-property">data</span>;
    <span class="hljs-keyword">const</span> startIndex = segmentStartDay * <span class="hljs-number">96</span>;
    <span class="hljs-comment">// åœ¨å¯¹åº”ç´¢å¼•å¤„æ·»åŠ æ•°æ®</span>
    _yList.<span class="hljs-title function_">splice</span>(startIndex, list.<span class="hljs-property">length</span>, ...list);
  }
}
</code></pre>
<h2 data-id="heading-2">Echartsæ¸²æŸ“ä¼˜åŒ–ï¼šè®©å¤§æ•°æ®é£èµ·æ¥</h2>
<p>ã€€ã€€è‡³æ­¤ï¼Œæˆ‘ä»¬å·²ç»é€šè¿‡åˆ†å‰²ã€å¤„ç†ä¸åŠ è½½çš„ä¼˜åŒ–ï¼Œä¸ºæµ·é‡æ•°æ®çš„æ¸²æŸ“æ­å»ºäº†ä¸€æ¡é«˜æ•ˆçš„å‰ç½®ç®¡çº¿ã€‚ã€‚ç„¶è€Œï¼Œå½“æ•°æ®æœ€ç»ˆæŠµè¾¾æµè§ˆå™¨å¹¶å‡†å¤‡åœ¨EChartsä¸­ç»˜åˆ¶æ—¶ï¼Œæ€§èƒ½çš„â€œæœ€ç»ˆæŒ‘æˆ˜â€æ‰çœŸæ­£å¼€å§‹ã€‚å¦‚ä½•è®©EChartsâ€œæ¶ˆåŒ–â€è¿™æ•°ä¸‡ä¸ªæ•°æ®ç‚¹å¹¶ä¿æŒæµç•…äº¤äº’ï¼Ÿæœ¬èŠ‚å°†æ·±å…¥EChartsçš„æ¸²æŸ“å±‚ï¼Œæ‹†è§£é‚£äº›è®©å›¾è¡¨â€œé£èµ·æ¥â€çš„å…³é”®ä¼˜åŒ–ç­–ç•¥ã€‚</p>
<p>ã€€ã€€åœ¨å¤§æ•°æ®é‡çš„å‰æä¸‹ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦ç¡®ä¿ï¼Œechartsçš„æ¸²æŸ“å™¨æ˜¯canvasè€Œä¸æ˜¯SVGï¼Œå› ä¸ºSVGå›¾åƒåœ¨å¤„ç†å¤æ‚å›¾å½¢æ—¶å¯èƒ½ä¼šå¯¼è‡´æ€§èƒ½é—®é¢˜ï¼Œå› æ­¤ç¡®ä¿ä½ çš„å›¾è¡¨ä½¿ç”¨canvasè¿›è¡Œæ¸²æŸ“ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// rendererä¸æ˜¯svg</span>
echarts.<span class="hljs-title function_">init</span>(domElement, <span class="hljs-literal">null</span>, { <span class="hljs-attr">renderer</span>: <span class="hljs-string">'canvas'</span> });
</code></pre>
<h3 data-id="heading-3">é™é‡‡æ ·ç­–ç•¥</h3>
<p>ã€€ã€€ä»€ä¹ˆæ˜¯æ•°æ®é‡‡æ ·ï¼Ÿæ•°æ®é‡‡æ ·æ˜¯EChartsä¸­å¤„ç†å¤§æ•°æ®é‡çš„ä¼˜åŒ–æŠ€æœ¯ï¼Œå½“å›¾è¡¨éœ€è¦å±•ç¤ºçš„æ•°æ®ç‚¹è¿‡å¤šæ—¶ï¼ˆé€šå¸¸è¶…è¿‡å‡ åƒä¸ªç‚¹ï¼‰ï¼Œæµè§ˆå™¨æ¸²æŸ“æ€§èƒ½ä¼šæ˜¾è‘—ä¸‹é™ã€‚é‡‡æ ·ç®—æ³•å¯ä»¥åœ¨ä¿æŒå›¾è¡¨å¤§è‡´è¶‹åŠ¿ä¸å˜çš„å‰æä¸‹ï¼Œå‡å°‘å®é™…æ¸²æŸ“çš„æ•°æ®ç‚¹æ•°ã€‚</p>
<p>ã€€ã€€ä¾‹å¦‚ï¼Œé€šè¿‡å¯¹ä¸€ä¸‡ä¸ªåŸå§‹æ•°æ®ç‚¹è¿›è¡Œåˆ†å±‚æŠ½æ ·ï¼Œæˆ‘ä»¬å°†æ¸²æŸ“èŠ‚ç‚¹çš„æ•°é‡ç›´æ¥ä»10,000ä¸ªç¼©å‡è‡³1,000ä¸ªã€‚è¿™ä¸€ä¼˜åŒ–ç›´æ¥å¸¦æ¥äº†æ¸²æŸ“æ€§èƒ½çš„æ¿€å¢ï¼Œå¸§ç‡å¾—åˆ°æ˜¾è‘—æå‡ã€‚Echartsæä¾›äº†å¤šç§æ•°æ®é‡‡æ ·ç®—æ³•ï¼ŒåŒ…æ‹¬å¦‚ä¸‹ï¼š</p>
<ul>
<li>sumï¼šå–è¿‡æ»¤ç‚¹çš„å’Œ</li>
<li>averageï¼šå–è¿‡æ»¤ç‚¹çš„å¹³å‡å€¼</li>
<li>minï¼š å–è¿‡æ»¤ç‚¹çš„æœ€å°å€¼</li>
<li>maxï¼š å–è¿‡æ»¤ç‚¹æœ€å¤§çš„å€¼</li>
<li>minmaxï¼šå–è¿‡æ»¤ç‚¹ç»å¯¹å€¼çš„æœ€å¤§æå€¼ (ä» v5.5.0 å¼€å§‹æ”¯æŒ)</li>
<li>lttbï¼šé‡‡ç”¨<code>Largest-Triangle-Three-Bucket</code>ç®—æ³•ï¼Œå¯ä»¥æœ€å¤§ç¨‹åº¦ä¿è¯é‡‡æ ·åçº¿æ¡çš„è¶‹åŠ¿ï¼Œå½¢çŠ¶å’Œæå€¼ã€‚</li>
</ul>
<p>ã€€ã€€ä½¿ç”¨æ—¶ï¼Œé€šè¿‡é…ç½®seriesçš„samplingå±æ€§ï¼ŒæŒ‡å®šæ•°æ®é‡‡æ ·ç®—æ³•ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">{
  <span class="hljs-attr">series</span>: [
    {
      <span class="hljs-attr">type</span>: <span class="hljs-string">"bar"</span>,
      <span class="hljs-attr">sampling</span>: <span class="hljs-string">"lttb"</span>,
      <span class="hljs-attr">data</span>: yourData,
    },
  ];
}
</code></pre>
<p>ã€€ã€€æˆ‘ä»¬å¯¹æŸ±çŠ¶å›¾è¿›è¡Œlttbç®—æ³•é‡‡æ ·åï¼Œæ•ˆæœå¦‚ä¸‹ï¼Œæˆ‘ä»¬èƒ½å¤Ÿæ˜æ˜¾çœ‹åˆ°æŸ±å­çš„å¯†åº¦æœ‰äº›ç¨€ç–ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f9fd6c129a4f42cea9dbfdfad8fc2bc1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LCi5bCP6aOe:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770856674&amp;x-signature=VFD4Bhg7AkvSr7S7evzj%2BaXHSa0%3D" alt="æŸ±çŠ¶å›¾çš„lttbé‡‡æ ·æ•ˆæœ" loading="lazy"/></p>
<blockquote>
<p><strong>éœ€è¦æ³¨æ„</strong>çš„æ˜¯ï¼Œæ•°æ®ç»è¿‡é‡‡æ ·åï¼Œæ•°æ®ç‚¹ä¼šå‡å°‘ï¼Œé‡‡æ ·ä¼šä¸¢å¤±ç»†èŠ‚ï¼Œå› æ­¤ä¸é€‚åˆéœ€è¦ç²¾ç¡®å€¼çš„åœºæ™¯ï¼›åŒæ—¶ç”±äºæ•°æ®ç‚¹çš„å‡å°‘ï¼Œä¸€äº›å›¾è¡¨çš„äº¤äº’åŠŸèƒ½ï¼Œå¦‚tooltipï¼Œä¹Ÿä¼šå—åˆ°å½±å“ã€‚</p>
</blockquote>
<p>ã€€ã€€é’ˆå¯¹æŠ˜çº¿å›¾ï¼Œæˆ‘ä»¬ä¹Ÿåº”ç”¨äº†lttbç®—æ³•è¿›è¡Œä¸‹é‡‡æ ·ã€‚ä»å¦‚ä¸‹æ•ˆæœå›¾ä¸­å¯ä»¥è§‚å¯Ÿåˆ°ï¼Œç®—æ³•åœ¨å¤§å¹…å‡å°‘æ•°æ®ç‚¹çš„åŒæ—¶ï¼Œä»ä¿æŒäº†åŸå§‹æ›²çº¿çš„æ ¸å¿ƒè¶‹åŠ¿ä¸å½¢çŠ¶ï¼Œæ•´ä½“è¿˜åŸæ•ˆæœéå¸¸å¥½ã€‚å…¶ä¸»è¦è¯¯å·®å‡ºç°åœ¨å˜åŒ–å‰§çƒˆçš„è¾¹ç•ŒåŒºåŸŸæˆ–æå€¼ç‚¹é™„è¿‘ï¼Œå¯¼è‡´å±€éƒ¨æ‹Ÿåˆä¸å¤Ÿå¹³æ»‘ã€‚</p>
<p>ã€€ã€€ç›¸è¾ƒä¹‹ä¸‹ï¼Œåœ¨ä¹‹å‰æŸ±çŠ¶å›¾çš„æµ‹è¯•ä¸­ï¼Œlttbç®—æ³•å› ä¼šæ”¹å˜ç¦»æ•£æŸ±çš„åˆ†å¸ƒä½ç½®è€Œå¯¼è‡´ä¿¡æ¯å¤±çœŸï¼Œå› æ­¤å®ƒæ›´é€‚ç”¨äºæŠ˜çº¿å›¾è¿™ç±»å¼ºè¿ç»­æ€§çš„åºåˆ—æ•°æ®å¯è§†åŒ–ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7c923f7edcec4841820c839306104a05~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LCi5bCP6aOe:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770856674&amp;x-signature=e56y8qdbKJhEXmeh%2FcjjLq5KPLc%3D" alt="æŠ˜çº¿å›¾çš„lttbé‡‡æ ·æ•ˆæœ" loading="lazy"/></p>
<h4 data-id="heading-4">lttbç®—æ³•åŸç†</h4>
<p>ã€€ã€€é‰´äºLTTBç®—æ³•åœ¨é™é‡‡æ ·ä¸­è¡¨ç°å‡ºçš„å‡ºè‰²æ•ˆæœï¼Œæˆ‘ä»¬æœ‰å¿…è¦æ·±å…¥æ¢ç©¶å…¶æ ¸å¿ƒå®ç°åŸç†ã€‚ä½œä¸ºEChartsç­‰ä¸»æµå¯è§†åŒ–åº“é‡‡ç”¨çš„å…³é”®ç®—æ³•ï¼Œå…¶æ ¸å¿ƒæ­¥éª¤æ˜¯å°†æ•°æ®ç‚¹åˆ†ç»„ä¸ºå¤šä¸ªè¿ç»­çš„â€œæ¡¶â€ï¼Œå¹¶åœ¨æ¯ä¸ªæ¡¶å†…ä»…ç­›é€‰ä¸€ä¸ªæœ€å…·ä»£è¡¨æ€§çš„ç‚¹ã€‚é‚£ä¹ˆï¼Œè¿™ä¸ªä»£è¡¨ç‚¹æ˜¯å¦‚ä½•è¢«é€‰å®šçš„ï¼Ÿè¦å›ç­”è¿™ä¸ªé—®é¢˜ï¼Œå…³é”®åœ¨äºç†è§£å…¶â€œæœ€å¤§ä¸‰è§’å½¢é¢ç§¯â€çš„ç­›é€‰å‡†åˆ™ã€‚</p>
<pre><code class="hljs language-text" lang="text">æ•°æ®ç‚¹åˆ†å¸ƒï¼š
   â–²
   â”‚                                  
   â”‚             æ¡¶A          æ¡¶B          æ¡¶C
   â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”
   â”‚          â”‚      â”‚    â”‚      â”‚    â”‚      â”‚
   â”‚          â”‚  â€¢   â”‚    â”‚  â€¢   â”‚    â”‚  â€¢   â”‚
   â”‚          â”‚  â€¢   â”‚    â”‚  â€¢   â”‚    â”‚  â€¢   â”‚
   â”‚          â”‚  â€¢ â€¢ â”‚    â”‚â€¢  â€¢  â”‚    â”‚  â€¢ â€¢ â”‚
   â”‚         â€¢â”‚ â€¢  â€¢ â”‚   â€¢â”‚â€¢   â€¢ â”‚   â€¢â”‚â€¢   â€¢ â”‚
   â”‚       â€¢ â€¢â”‚â€¢    â€¢â”‚ â€¢ â€¢â”‚â€¢    â€¢â”‚â€¢ â€¢ â”‚â€¢    â€¢â”‚
   â”‚     â€¢ â€¢  â”‚     â€¢â”‚â€¢ â€¢ â”‚     â€¢â”‚â€¢ â€¢ â”‚     â€¢â”‚
   â”‚   â€¢ â€¢    â”‚      â”‚â€¢ â€¢ â”‚      â”‚â€¢ â€¢ â”‚      â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â–¶
   0          10     20    30     40    50     60
                 frameSize = 10ä¸ªç‚¹/æ¡¶
</code></pre>
<p>ã€€ã€€æˆ‘ä»¬ç¬¬ä¸€ä¸ªæ¡¶Açš„ç‚¹é€‰æ‹©åˆå§‹ä½ç½®çš„ç‚¹ï¼Œå½“æˆ‘ä»¬å¼€å§‹é€‰å–ä¸‹ä¸€ä¸ªæ¡¶Bæ—¶ç‚¹æ—¶ï¼Œå†ä¸‹ä¸€ä¸ªæ¡¶Cçš„ç‚¹ï¼Œæˆ‘ä»¬æš‚å®šä¸ºè¿™ä¸ªæ¡¶çš„å¹³å‡å€¼ï¼›è¿™æ ·ï¼Œæˆ‘ä»¬å‰åæ¡¶çš„ç‚¹éƒ½ç¡®å®šäº†ï¼Œè®©æˆ‘ä»¬å›åˆ°æ¡¶Bç‚¹çš„é€‰æ‹©ä¸Šæ¥ï¼›è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬éå†æ¡¶Bçš„æ‰€æœ‰ç‚¹ï¼Œè®¡ç®—ABCä¸‰ä¸ªæ¡¶çš„ç‚¹å½¢æˆä¸‰è§’å½¢çš„é¢ç§¯ï¼Œå¹¶é€‰æ‹©é¢ç§¯æœ€å¤§çš„ç‚¹ä½œä¸ºè¿™ä¸ªæ¡¶çš„ç‚¹ã€‚</p>
<p>ã€€ã€€ä¸ºä»€ä¹ˆé¢ç§¯å¤§çš„ç‚¹å°±èƒ½ä»£è¡¨è¿™ä¸ªæ¡¶å‘¢ï¼Ÿæˆ‘ä»¬æƒ³åƒä¸€ä¸‹ï¼Œå¦‚æœBç‚¹é è¿‘äº†ACè¿çº¿ä¸Šï¼Œé‚£ä¹ˆBç‚¹å‡ ä¹å°±æ²¡æœ‰æä¾›äº†æ–°çš„ä¿¡æ¯äº†ã€‚</p>
<pre><code class="hljs language-text" lang="text">   Aâ”€â”€â”€â”€â”€Bâ”€â”€â”€â”€â”€C
é¢ç§¯ â‰ˆ 0ï¼ˆä¸‰ç‚¹å‡ ä¹å…±çº¿ï¼‰
</code></pre>
<p>ã€€ã€€ä½†æ˜¯å¦‚æœBç‚¹è¿œç¦»ACè¿çº¿ï¼Œé‚£ä¹ˆBç‚¹å°±æä¾›äº†æ–°çš„ä¿¡æ¯ï¼Œé‚£ä¹ˆBç‚¹å°±å¯ä»¥ä»£è¡¨è¿™ä¸ªæ¡¶çš„ç‚¹ã€‚</p>
<pre><code class="hljs language-text" lang="text">         B
        / \
       /   \
      /     \
     A       C
é¢ç§¯å¾ˆå¤§ï¼ŒBç‚¹ä»£è¡¨äº†é‡è¦ç‰¹å¾
</code></pre>
<p>ã€€ã€€å½“æˆ‘ä»¬å·²çŸ¥äºŒç»´å¹³é¢ä¸Šä¸Šä¸‰ä¸ªç‚¹çš„åæ ‡ï¼Œåˆ©ç”¨åˆä¸­çš„çŸ¥è¯†å°±èƒ½æ¨å¯¼ä¸‰è§’å½¢çš„é¢ç§¯ä¸ºï¼š</p>
<blockquote>
<p>ä¸‰è§’å½¢é¢ç§¯ = 0.5 Ã— |AB Ã— AC| = 0.5 Ã— |(x2-x1)(y3-y1) - (x3-x1)(y2-y1)|</p>
</blockquote>
<p>ã€€ã€€ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„æ¨å¯¼è¿‡ç¨‹:</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/620a8b7454224f43a51fef951efedc3f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LCi5bCP6aOe:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770856674&amp;x-signature=l8uMBJfaWpv4o%2FZluo0OR0EIjdk%3D" alt="ä¸‰è§’å½¢é¢ç§¯å…¬å¼" loading="lazy"/></p>
<p>ã€€ã€€æˆ‘ä»¬è®¿é—®Echartsä»“åº“ä¸­æŸ¥çœ‹æºç ï¼Œå‘ç°lttbç®—æ³•ä»£ç åœ¨<code>src/data/DataStore.ts</code>çš„lttbDownSampleå‡½æ•°ä¸­å®ç°ï¼›æœ‰äº†ä¸Šé¢ç†è®ºçš„æ”¯æ’‘ï¼Œæˆ‘ä»¬ä¸‹é¢å°±æ¥å¥½å¥½çš„æ‹†è§£æ‹†è§£è¿™ä¸ªå‡½æ•°ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">/**
 * Large data down sampling using largest-triangle-three-buckets
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} <span class="hljs-variable">valueDimension</span>
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">number</span>} <span class="hljs-variable">targetCount</span>
 */</span>
<span class="hljs-title function_">lttbDownSample</span>(<span class="hljs-params">
    valueDimension: DimensionIndex,
    rate: <span class="hljs-built_in">number</span>
</span>){
  <span class="hljs-comment">// æ€»æ•°æ®ç‚¹æ•°ï¼Œå¦‚ 10000</span>
  <span class="hljs-keyword">const</span> len = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">count</span>();

  <span class="hljs-comment">// æ¯ä¸ªæ¡¶çš„å¤§å°ï¼Œå¦‚rate = 0.1ï¼Œåˆ™frameSize = 10</span>
  <span class="hljs-keyword">const</span> frameSize = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(<span class="hljs-number">1</span> / rate);
}
</code></pre>
<p>ã€€ã€€é¦–å…ˆä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆè·å–æ•°æ®ç‚¹çš„æ€»æ•°ï¼Œå¹¶è®¡ç®—æ¯ä¸ªæ¡¶çš„å¤§å°ï¼›è¿™é‡Œä¼ å…¥çš„valueDimensionä»£è¡¨å€¼çš„ç»´åº¦ï¼Œå¦‚æœç›´æ¥ä¼ å…¥æ•°æ®åˆ—è¡¨ï¼Œä¼šå¯¼è‡´å†…å­˜å ç”¨è¿‡é«˜ï¼Œå› æ­¤è¿™é‡Œçš„åšæ³•æ˜¯ä¼ å…¥æ•°æ®ç»´åº¦ï¼Œé€šè¿‡ç»´åº¦æ¥è·å–æ•°æ®ï¼Œä»è€Œæé«˜æ€§èƒ½ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">1</span>; i &lt; len - <span class="hljs-number">1</span>; i += frameSize) {
  <span class="hljs-comment">// ä¸‹ä¸€ä¸ªæ¡¶çš„è¾¹ç•Œ</span>
  <span class="hljs-keyword">const</span> nextFrameStart = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(i + frameSize, len - <span class="hljs-number">1</span>);
  <span class="hljs-keyword">const</span> nextFrameEnd = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(i + frameSize * <span class="hljs-number">2</span>, len);

  <span class="hljs-comment">// è®¡ç®—ä¸‹ä¸€ä¸ªæ¡¶çš„å¹³å‡ç‚¹</span>
  <span class="hljs-keyword">const</span> avgX = (nextFrameEnd + nextFrameStart) / <span class="hljs-number">2</span>; <span class="hljs-comment">// Xåæ ‡å¹³å‡å€¼</span>
  <span class="hljs-keyword">let</span> avgY = <span class="hljs-number">0</span>; <span class="hljs-comment">// Yåæ ‡å¹³å‡å€¼</span>
}
</code></pre>
<p>ã€€ã€€ç„¶åæˆ‘ä»¬å¼€å§‹éå†æ•°æ®ç‚¹ï¼Œæˆ‘ä»¬å‘ç°iæ˜¯ä»1å¼€å§‹çš„ï¼Œå› ä¸ºæˆ‘ä»¬é»˜è®¤ç¬¬ä¸€ä¸ªç‚¹å°±æ˜¯ç¬¬ä¸€ä¸ªæ¡¶çš„é€‰æ‹©ç‚¹ï¼›æ¥ç€ï¼Œåœ¨å½“å‰æ¡¶éå†ä¸‹ï¼Œæˆ‘ä»¬å…ˆè¦è®¡ç®—å‡ºä¸‹ä¸€ä¸ªæ¡¶Cçš„å¹³å‡ç‚¹ï¼ˆavgXï¼Œ avgYï¼‰ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">1</span>; i &lt; len - <span class="hljs-number">1</span>; i += frameSize) {
  <span class="hljs-comment">// çœç•¥ä¸Šé¢ä»£ç </span>
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> idx = nextFrameStart; idx &lt; nextFrameEnd; idx++) {
      <span class="hljs-comment">// è·å–ä¸‹ä¸€ä¸ªæ¡¶ä¸Šé¢æ¯ä¸€ä¸ªç‚¹çš„å€¼</span>
      <span class="hljs-keyword">const</span> y = dimStore[rawIndex] <span class="hljs-keyword">as</span> <span class="hljs-built_in">number</span>;
      avgY += y <span class="hljs-keyword">as</span> <span class="hljs-built_in">number</span>;
  }
  avgY /= (nextFrameEnd - nextFrameStart);
}
</code></pre>
<p>ã€€ã€€ç„¶åï¼Œæˆ‘ä»¬å¼€å§‹éå†ä¸‹ä¸€ä¸ªCæ¡¶ä¸­çš„æ¯ä¸€ä¸ªæ•°æ®ç‚¹ï¼Œå¹¶è®¡ç®—å‡ºä¸‹ä¸€ä¸ªæ¡¶çš„å¹³å‡å€¼ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">let</span> maxArea;
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">1</span>; i &lt; len - <span class="hljs-number">1</span>; i += frameSize) {
  <span class="hljs-comment">// å½“å‰æ¡¶çš„èµ·å§‹ç´¢å¼•</span>
  <span class="hljs-keyword">const</span> frameStart = i;
  <span class="hljs-comment">// å½“å‰æ¡¶çš„ç»“æŸç´¢å¼•</span>
  <span class="hljs-keyword">const</span> frameEnd = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(i + frameSize, len);

  <span class="hljs-comment">// ä¸Šä¸€ä¸ªç‚¹çš„Xåæ ‡</span>
  <span class="hljs-keyword">const</span> pointAX = i - <span class="hljs-number">1</span>;
  <span class="hljs-comment">// ä¸Šä¸€ä¸ªç‚¹çš„Yå€¼</span>
  <span class="hljs-keyword">const</span> pointAY = dimStore[currentRawIndex] <span class="hljs-keyword">as</span> <span class="hljs-built_in">number</span>;

  <span class="hljs-comment">// å½“å‰æ¡¶æœ€å¤§çš„é¢ç§¯</span>
  maxArea = -<span class="hljs-number">1</span>;
}
</code></pre>
<p>ã€€ã€€ç´§æ¥ç€ï¼Œæˆ‘ä»¬ä¸ºå½“å‰æ¡¶Bç‚¹çš„éå†å‡†å¤‡ä¸€ä¸‹æ•°æ®ï¼ŒframeStartå’ŒframeEndæ˜¯å½“å‰æ¡¶Bçš„è¾¹ç•Œï¼ŒpointAXå’ŒpointAYæ˜¯ä¸Šä¸€ä¸ªæ¡¶Açš„åæ ‡ã€‚</p>
<blockquote>
<p>æˆ‘ä»¬å‘ç°è¿™é‡Œçš„pointAXå–å¾—æ˜¯ä¸Šä¸€ä¸ªæ¡¶æœ€åä¸€ä¸ªç‚¹çš„åæ ‡i - 1ï¼Œè€Œä¸æ˜¯æ¯æ¬¡éƒ½å°†ä¸Šä¸€ä¸ªæ¡¶çš„é€‰æ‹©ç‚¹å­˜èµ·æ¥ä½¿ç”¨ï¼Œè¿™å…¶å®æ˜¯Echartsä¸ºäº†æ€§èƒ½ä¼˜åŒ–ï¼Œç‰ºç‰²äº†ä¸€ç‚¹ç²¾åº¦ï¼Œå‡å°‘å˜é‡è·Ÿè¸ªã€‚</p>
</blockquote>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// å¾ªç¯éå†æ¯ä¸ªæ¡¶</span>
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">1</span>; i &lt; len - <span class="hljs-number">1</span>; i += frameSize) {
  <span class="hljs-comment">// çœç•¥ä¸Šé¢ä»£ç </span>
  <span class="hljs-comment">// å¾ªç¯éå†æ¡¶Bä¸­çš„æ•°æ®ç‚¹</span>
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> idx = frameStart; idx &lt; frameEnd; idx++) {
    <span class="hljs-comment">// å½“å‰ç‚¹çš„Xåæ ‡</span>
    <span class="hljs-keyword">const</span> rawIndex = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getRawIndex</span>(idx);
    <span class="hljs-comment">// å½“å‰ç‚¹çš„Yåæ ‡</span>
    <span class="hljs-keyword">const</span> y = dimStore[rawIndex] <span class="hljs-keyword">as</span> <span class="hljs-built_in">number</span>;
    <span class="hljs-comment">// è®¡ç®—ä¸‰è§’å½¢çš„é¢ç§¯</span>
    area = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">abs</span>((pointAX - avgX) * (y - pointAY)
      - (pointAX - idx) * (avgY - pointAY)
    );
    <span class="hljs-keyword">if</span> (area &gt; maxArea) {
      maxArea = area;
      nextRawIndex = rawIndex;
    }
  }

  newIndices[sampledIndex++] = nextRawIndex;
}
</code></pre>
<p>ã€€ã€€æœ€åè¿™ä¸ªä»£ç æ˜¯æ•´ä¸ªç®—æ³•çš„æ ¸å¿ƒä»£ç ,ä¹Ÿæ˜¯æœ€ç²¾å¦™çš„åœ°æ–¹ï¼›åŸºäºä¹‹å‰æ¡¶çš„å¾ªç¯ï¼Œæˆ‘ä»¬åœ¨å½“å‰æ¡¶å†…ï¼Œéå†æ¡¶ä¸­æ¯ä¸ªæ•°æ®ç‚¹ï¼ŒrawIndexå’Œyè¡¨ç¤ºå½“å‰ç‚¹çš„åæ ‡ï¼›è€Œè¿™é‡Œçš„areaå°±æ˜¯æˆ‘ä»¬ä¸Šé¢ä»‹ç»çš„ä¸‰è§’å½¢çš„è®¡ç®—å…¬å¼ï¼Œç»è¿‡ä¹‹å‰å¯¹äºæ¡¶Aã€æ¡¶Bã€æ¡¶Cçš„ç‚¹å‡†å¤‡ï¼Œç›¸ä¿¡è¿™é‡Œçš„areaè®¡ç®—ç›¸ä¿¡å¤§å®¶éƒ½èƒ½å¤Ÿç†è§£äº†ï¼›æœ€åå¦‚æœareaè¶…å‡ºäº†è®°å½•çš„æœ€å¤§é¢ç§¯maxAreaï¼Œåˆ™å°†å½“å‰ç‚¹åŠ å…¥åˆ°æ–°çš„é‡‡æ ·æ•°æ®ä¸­è¿›è¡Œæ•°æ®ç•™å­˜ã€‚</p>
<p>ã€€ã€€çº¸ä¸Šå¾—æ¥ç»ˆè§‰æµ…ï¼Œç®—æ³•çš„ç²¾å¦™ï¼Œéå¾—äº²æ‰‹è¯•ä¸€ä¸‹ä¸å¯ã€‚ä¸ºæ­¤ï¼Œç¬”è€…å†™äº†ä¸€ä¸ª<a href="https://link.juejin.cn?target=https%3A%2F%2Fgallery.xieyufei.com%2Fcase%2Falgorithm%2Flttb" target="_blank" title="https://gallery.xieyufei.com/case/algorithm/lttb" ref="nofollow noopener noreferrer">ç®€å•çš„é¡µé¢</a>æ¥æ¼”ç¤ºLTTBç®—æ³•çš„å®é™…æ•ˆæœï¼Œé»˜è®¤è®¾ç½®é‡‡æ ·ç‡rateä¸º0.1ï¼ŒåŒæ—¶å¯¹æŠ˜çº¿å›¾æ•°æ®è¿›è¡Œé‡‡æ ·å¯¹æ¯”ï¼Œå°±èƒ½çœ‹åˆ°å’ŒåŸå§‹æ•°æ®ä¹‹é—´çš„ç»†å¾®å·®å¼‚ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/68032c1dcb8c4c43a7dae545906e4145~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LCi5bCP6aOe:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770856674&amp;x-signature=f63zVFdEVw2%2Bhpm6bXwoEBljbME%3D" alt="æ‰‹å†™lttbç®—æ³•é‡‡æ ·çš„æ•ˆæœ" loading="lazy"/></p>
<h3 data-id="heading-5">dataZoomåˆ†å—æ¸²æŸ“</h3>
<p>ã€€ã€€åœ¨å¤„ç†æµ·é‡æ•°æ®æ—¶ï¼Œå¯ç”¨<code>dataZoomç»„ä»¶</code>æ˜¯å®ç°æ€§èƒ½è·ƒå‡çš„æ ¸å¿ƒç­–ç•¥ä¹‹ä¸€ã€‚å®ƒå°†æ¸²æŸ“æ¨¡å¼ä»ä¸€æ¬¡æ€§æ‰¿è½½å…¨é‡æ•°æ®ï¼Œè½¬å˜ä¸ºåŠ¨æ€çš„çª—å£åŒ–æ¸²æŸ“ã€‚åˆå§‹åŒ–æ—¶ä»…åŠ è½½è§†å£èŒƒå›´å†…çš„æ•°æ®ï¼Œéšç€ç”¨æˆ·æ»šåŠ¨æˆ–ç¼©æ”¾å†åŠ¨æ€åŠ è½½å…¶ä»–éƒ¨åˆ†ã€‚è¿™ç§æ–¹å¼å°†æ¸²æŸ“å‹åŠ›åˆ†æ•£åˆ°å¤šæ¬¡è½»é‡çº§æ“ä½œä¸­ï¼Œä»æ ¹æœ¬ä¸Šé¿å…äº†å•æ¬¡æ¸²æŸ“å¡é¡¿ï¼Œå¤§å¹…æå‡äº†äº¤äº’å“åº”é€Ÿåº¦ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> option = {
  <span class="hljs-attr">dataZoom</span>: [
    { 
      <span class="hljs-attr">type</span>: <span class="hljs-string">"inside"</span>,
      <span class="hljs-attr">start</span>: <span class="hljs-number">0</span>,
      <span class="hljs-attr">end</span>: <span class="hljs-number">20</span>
    },
    {
      <span class="hljs-attr">type</span>: <span class="hljs-string">"slider"</span>,
      <span class="hljs-attr">start</span>: <span class="hljs-number">0</span>,
      <span class="hljs-attr">end</span>: <span class="hljs-number">20</span>,
    },
  ],
  <span class="hljs-attr">series</span>:[
    <span class="hljs-comment">//...</span>
  ]
};
</code></pre>
<p>ã€€ã€€ç„¶è€Œï¼Œè¿™é‡Œå­˜åœ¨ä¸€ä¸ªçŠ¶æ€å†²çªé—®é¢˜ï¼Œæ¯æ¬¡ä»æ¥å£è·å–æ–°æ•°æ®å¹¶é‡æ¸²æŸ“å›¾è¡¨æ—¶ï¼ŒdataZooméƒ½ä¼šè¢«å¼ºåˆ¶é‡ç½®åˆ°åˆå§‹çš„[0, 20]åŒºé—´ã€‚å¦‚æœç”¨æˆ·åœ¨ä¹‹å‰å·²ç»é€šè¿‡æ‹–æ‹½ç¼©æ”¾æµè§ˆäº†å…¶ä»–æ•°æ®åŒºåŸŸï¼Œè¿™ä¸ªè¡Œä¸ºå°±ä¼šç ´åå…¶æ¢ç´¢çŠ¶æ€ï¼Œå¯¼è‡´ç”¨æˆ·ä½“éªŒå‰²è£‚ã€‚</p>
<p>ã€€ã€€ç¬¬ä¸€ç§å¸¸è§„çš„è§£å†³æ–¹æ¡ˆæ˜¯ï¼Œæˆ‘ä»¬åœ¨æ ¸å¿ƒçš„å›¾è¡¨æ¸²æŸ“å‡½æ•°<code>renderChart</code>ä¸­å¼•å…¥ä¸€ä¸ªå®ˆå«å‚æ•°isInitialã€‚åªæœ‰å½“ isInitial ä¸º trueï¼ˆä¾‹å¦‚åˆæ¬¡æ¸²æŸ“æ—¶ï¼‰ï¼Œæ‰è®¾ç½®dataZoomçš„åŒºé—´ã€‚åœ¨å¸¸è§„çš„æ•°æ®æ›´æ–°æ¸²æŸ“ä¸­ï¼Œåˆ™ä¿ç•™ç”¨æˆ·å½“å‰äº¤äº’çŠ¶æ€ï¼Œä»…åˆ·æ–°æ•°æ®è€Œä¸è§¦åŠ¨ç¼©æ”¾ç»„ä»¶ã€‚</p>
<p>ã€€ã€€å¦ä¸€ç§è§£å†³æ–¹æ¡ˆæ˜¯ï¼Œåœ¨setOptionæ—¶ï¼Œä½¿ç”¨<code>replaceMerge</code>å‚æ•°ï¼Œå‘Šè¯‰EChartsåªæ›¿æ¢æŒ‡å®šçš„ç»„ä»¶ï¼Œå…¶ä»–ç»„ä»¶ï¼ˆå¦‚ dataZoomï¼‰ä¿æŒä¸å˜ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">echartsInst.<span class="hljs-title function_">setOption</span>({
  <span class="hljs-attr">dataZoom</span>: [
    { 
      <span class="hljs-attr">type</span>: <span class="hljs-string">"inside"</span>,
      <span class="hljs-attr">start</span>: <span class="hljs-number">0</span>,
      <span class="hljs-attr">end</span>: <span class="hljs-number">20</span>
    },
    {
      <span class="hljs-attr">type</span>: <span class="hljs-string">"slider"</span>,
      <span class="hljs-attr">start</span>: <span class="hljs-number">0</span>,
      <span class="hljs-attr">end</span>: <span class="hljs-number">20</span>,
    },
  ],
  <span class="hljs-attr">series</span>:[
    <span class="hljs-comment">//...</span>
  ]
}, {
  <span class="hljs-attr">notMerge</span>: <span class="hljs-literal">false</span>,
  <span class="hljs-attr">replaceMerge</span>: [<span class="hljs-string">"xAxis"</span>, <span class="hljs-string">"series"</span>],
})
</code></pre>
<p>ã€€ã€€è¿™æ ·å³ä½¿å¤šæ¬¡setOptionä¹Ÿä¸ä¼šé‡ç½®dataZoomçš„åŒºé—´ã€‚</p>
<h3 data-id="heading-6">å¤§æ•°æ®æ¨¡å¼ä¸æ¸è¿›å¼æ¸²æŸ“</h3>
<p>ã€€ã€€ç»å¸¸æŸ¥çœ‹Echartså®˜æ–¹æ–‡æ¡£çš„å°ä¼™ä¼´ï¼Œç›¸ä¿¡éƒ½çœ‹åˆ°è¿‡largeå’Œprogressiveç­‰å±æ€§ï¼Œä½†æ˜¯ä»€ä¹ˆæƒ…å†µä¸‹éœ€è¦ç”¨åˆ°largeå’Œprogressiveå‘¢ï¼Ÿç›¸ä¿¡å¾ˆå¤šå°ä¼™ä¼´éƒ½ä¸€å¤´é›¾æ°´ï¼Œè¿™ä¸€èŠ‚ï¼Œæˆ‘ä»¬å°±æ¥å¥½å¥½è¯´é“è¯´é“ã€‚</p>
<p>ã€€ã€€<code>largeå±æ€§</code>æ˜¯EChartsä¸ºæµ·é‡æ•°æ®æ¸²æŸ“è®¾è®¡çš„ä¸“ç”¨æ€§èƒ½ä¼˜åŒ–å¼€å…³ï¼Œé€šå¸¸æŒ‡æ•°æ®é‡åœ¨æ•°ä¸‡åˆ°æ•°ç™¾ä¸‡çº§åˆ«ï¼› å½“ä½ çš„æ•°æ®é‡é¢„è®¡è¾¾åˆ°æ­¤è§„æ¨¡æ—¶ï¼Œå¼€å¯æ­¤é€‰é¡¹å°†ç›´æ¥è°ƒç”¨åº•å±‚ä¼˜åŒ–ç®—æ³•ï¼Œä»è€Œè·å¾—æ˜¾è‘—çš„æ¸²æŸ“æ€§èƒ½æå‡ï¼Œä¸‹é¢æˆ‘ä»¬é€šè¿‡è¡¨æ ¼å®é™…æ„Ÿå—ä¸€ä¸‹10w+çº§çš„å®æµ‹å¯¹æ¯”æ•°æ®ï¼š</p>






























<table><thead><tr><th>æŒ‡æ ‡</th><th>æœªå¼€å¯ large</th><th>å¼€å¯ large</th></tr></thead><tbody><tr><td>FPS</td><td>3-10</td><td>51-60</td></tr><tr><td>MS(æ¸²æŸ“ä¸€å¸§æ‰€éœ€çš„æ¯«ç§’æ•°)</td><td>179-246</td><td>17-28</td></tr><tr><td>å†…å­˜å ç”¨(MB)</td><td>277-305</td><td>53-59</td></tr><tr><td>äº¤äº’å“åº”</td><td>å¡é¡¿æ˜æ˜¾</td><td>åŸºæœ¬æµç•…</td></tr></tbody></table>
<p>ã€€ã€€<code>largeThreshold</code>æ˜¯ä¸largeå±æ€§é…åˆä½¿ç”¨çš„é˜ˆå€¼å‚æ•°ï¼Œå®ƒå®šä¹‰äº†å¯ç”¨å¤§è§„æ¨¡ä¼˜åŒ–æ¨¡å¼çš„æ•°æ®é‡ä¸‹é™ã€‚å½“ä¸”ä»…å½“æ•°æ®é¡¹æ•°è¶…è¿‡æ­¤é˜ˆå€¼æ—¶ï¼Œä¼˜åŒ–ç»˜åˆ¶é€»è¾‘æ‰ä¼šç”Ÿæ•ˆï¼›åä¹‹ï¼Œç³»ç»Ÿå°†ä½¿ç”¨æ ‡å‡†æ¸²æŸ“æµç¨‹ï¼Œé¿å…ä¸å¿…è¦çš„å¼€é”€ï¼›å¤§å¤šæ•°æƒ…å†µä¸‹æ— éœ€æ‰‹åŠ¨è°ƒæ•´ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title function_">setOption</span>({
  <span class="hljs-attr">series</span>: [
    {
      <span class="hljs-attr">type</span>: <span class="hljs-string">"bar"</span>,
      data,
      <span class="hljs-attr">large</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">largeThreshold</span>: <span class="hljs-number">1000</span>,
    },
  ],
});
</code></pre>
<blockquote>
<p><strong>éœ€è¦æ³¨æ„</strong>çš„æ˜¯ï¼Œä¸æ˜¯æ¯ç§ç±»å‹çš„å›¾è¡¨éƒ½æ”¯æŒlargeå’ŒlargeThresholdå±æ€§çš„ï¼Œç›®å‰ä»…æœ‰barå’Œscatterå›¾è¡¨æ”¯æŒã€‚</p>
</blockquote>
<p>ã€€ã€€éœ€è¦æŒ‡å‡ºçš„æ˜¯ï¼Œåœ¨largeæ¨¡å¼ä¸‹ï¼ŒEchartså‡ºäºæ€§èƒ½ä¼˜åŒ–çš„è€ƒè™‘ï¼Œæ— æ³•ä¸ºå•ä¸ªæ•°æ®ç‚¹è®¾ç½®ç‹¬ç«‹æ ·å¼ï¼Œæ‰€æœ‰æ•°æ®ç‚¹å°†å…±äº«åŒä¸€å¥—æ ·å¼é…ç½®ï¼›æ¯”å¦‚ä¸‹é¢ä»£ç ä¸­ï¼Œæˆ‘ä»¬ä¸ºæœ€åä¸€ä¸ªæ•°æ®é¡¹å•ç‹¬è®¾ç½®çš„itemStyleå°±ä¸ä¼šç”Ÿæ•ˆï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title function_">setOption</span>({
  <span class="hljs-attr">series</span>: [
    {
      <span class="hljs-attr">type</span>: <span class="hljs-string">"bar"</span>,
      <span class="hljs-attr">data</span>: [
        <span class="hljs-number">10</span>,
        <span class="hljs-number">20</span>,
        <span class="hljs-number">30</span>,
        <span class="hljs-comment">// è¿™ä¸ªä¸ä¼šç”Ÿæ•ˆ</span>
        { <span class="hljs-attr">value</span>: <span class="hljs-number">40</span>, <span class="hljs-attr">itemStyle</span>: { <span class="hljs-attr">color</span>: <span class="hljs-string">'red'</span> } }
      ],
      <span class="hljs-attr">large</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">largeThreshold</span>: <span class="hljs-number">1000</span>,
      <span class="hljs-attr">itemStyle</span>: {
        <span class="hljs-comment">// æ‰€æœ‰æŸ±å­éƒ½æ˜¯è¿™ä¸ªé¢œè‰²</span>
        <span class="hljs-attr">color</span>: <span class="hljs-string">'#fff'</span>
      }
    },
  ],
});
</code></pre>
<p>ã€€ã€€<code>progressiveå±æ€§</code>æœ¬è´¨æ˜¯å¼€å¯â€œåˆ†ç‰‡æ¸²æŸ“â€æ¨¡å¼ï¼Œç”¨ä»¥è§£å†³è¶…å¤§è§„æ¨¡å›¾å½¢å…ƒç´ ï¼ˆæ•°åƒè‡³åƒä¸‡çº§ï¼‰é€ æˆçš„æµè§ˆå™¨ç¬æ—¶é˜»å¡é£é™©ã€‚å¯ç”¨åï¼ŒEChartsä¼šå°†åºå¤§çš„æ•°æ®é›†è‡ªåŠ¨åˆ†å‰²ä¸ºå¤šä¸ªå°å—ï¼ˆchunkï¼‰ï¼Œåœ¨å¤šä¸ªåŠ¨ç”»å¸§ä¸­ä¾æ¬¡æ¸²æŸ“ï¼Œä»è€Œå°†ä¸€æ¬¡æ€§çš„æ²‰é‡è´Ÿè½½åˆ†æ•£ä¸ºå¹³ç¼“çš„å¢é‡ä»»åŠ¡ã€‚æˆ‘ä»¬åœ¨æ•£ç‚¹å›¾ä¸Šå®æµ‹æ­¤åŠŸèƒ½ï¼Œå¯ä»¥æ¸…æ™°åœ°è§‚å¯Ÿåˆ°æ•°ä¸‡ä¸ªæ•°æ®ç‚¹å¦‚åŒé›¨ç‚¹èˆ¬åœ¨ç”»å¸ƒä¸Šé€æ¸æµ®ç°ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> <span class="hljs-attr">data</span>: <span class="hljs-title class_">Array</span>&lt;[<span class="hljs-built_in">number</span>, <span class="hljs-built_in">number</span>]&gt; = [];
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10000</span>; i++) {
  data.<span class="hljs-title function_">push</span>([
    <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * <span class="hljs-number">1000</span>, 
    <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * <span class="hljs-number">1000</span>
  ]);
}

<span class="hljs-title function_">setOption</span>({
  <span class="hljs-attr">series</span>: [
    {
        <span class="hljs-attr">type</span>: <span class="hljs-string">"scatter"</span>,
        data,
        <span class="hljs-attr">progressive</span>: <span class="hljs-number">100</span>,
        <span class="hljs-attr">progressiveThreshold</span>: <span class="hljs-number">3000</span>,
        <span class="hljs-attr">progressiveChunkMode</span>: <span class="hljs-string">'mod'</span>
    },
  ],
});
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c802f9023f1c40b7a4fb8beb81f4aeef~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LCi5bCP6aOe:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770856674&amp;x-signature=DyhW2X74eyMmE1K356VMb3xs2dc%3D" alt="progressiveå±æ€§æ•ˆæœ" loading="lazy"/></p>
<p>ã€€ã€€<code>progressiveå±æ€§</code>æ§åˆ¶æ¸è¿›å¼æ¸²æŸ“çš„ â€œç²’åº¦â€ï¼Œå…¶å€¼ä¸ºæ¯ä¸€å¸§æ¸²æŸ“çš„å›¾å½¢æ•°é‡ï¼Œé»˜è®¤å€¼ä¸º400ï¼Œè®¾ä¸º0ï¼Œåˆ™ç›¸å½“äºå…³é—­æ­¤åŠŸèƒ½ï¼›è€Œ<code>progressiveThresholdå±æ€§</code>åˆ™è®¾å®šäº†å¯ç”¨æ­¤åŠŸèƒ½çš„ â€œé—¨æ§›â€ã€‚ä»…å½“å›¾å½¢æ€»æ•°è¶…è¿‡æ­¤é˜ˆå€¼æ—¶ï¼Œprogressiveçš„é…ç½®æ‰ä¼šç”Ÿæ•ˆï¼Œå¼€å§‹åˆ†å¸§æ¸²æŸ“ã€‚</p>
<blockquote>
<p>å¼€å¯largeé»˜è®¤ä¼šå¼€å¯progressiveæ¸è¿›æ¸²æŸ“ã€‚</p>
</blockquote>
<h2 data-id="heading-7">æ€»ç»“</h2>
<p>ã€€ã€€åˆ°è¿™é‡Œï¼Œæˆ‘çš„Echartsæ€§èƒ½ä¼˜åŒ–ä¸‰éƒ¨æ›²æ€»ç®—å‘Šä¸€æ®µè½äº†ï¼›å½“çœ‹åˆ°ä¸šåŠ¡æ–¹åœ¨æµç•…æ¸²æŸ“ç€å››å¹´è®¾å¤‡æ•°æ®çš„å›¾è¡¨å‰éœ²å‡ºæ»¡æ„ç¬‘å®¹æ—¶ï¼Œæˆ‘å°±çŸ¥é“ï¼Œè¿™æ¬¡ä¼˜åŒ–çš„åŠªåŠ›æ²¡æœ‰ç™½è´¹ã€‚</p>
<p>ã€€ã€€æˆ‘ä»¬é¦–å…ˆæ„å»ºäº†æ•°æ®åˆ†å‰²æœºåˆ¶ã€‚å½“ç”¨æˆ·é€‰æ‹©è·¨å¹´åº¦çš„æŸ¥è¯¢èŒƒå›´æ—¶ï¼Œç³»ç»Ÿä¸å†å‚»ä¹ä¹åœ°ä¸€æ¬¡æ€§è¯·æ±‚æ‰€æœ‰æ•°æ®ï¼Œè€Œæ˜¯åƒä¸€ä½ç»†å¿ƒçš„å›¾ä¹¦ç®¡ç†å‘˜ï¼Œå°†åšåšçš„å†å²æ¡£æ¡ˆæŒ‰æ—¶é—´ç« èŠ‚åˆ†å†Œå–å‡ºã€‚è¿™ä¸ªç®€å•çš„ç­–ç•¥ï¼Œå°†åŸæœ¬é•¿è¾¾14ç§’çš„æ¥å£å“åº”æ—¶é—´åˆ†è§£ä¸ºå¤šä¸ªæ¯«ç§’çº§çš„å¿«é€Ÿè¯·æ±‚ï¼Œä»æ ¹æœ¬ä¸Šé¿å…äº†æµè§ˆå™¨çš„å†…å­˜è¿‡è½½å’Œç•Œé¢å†»ç»“ã€‚</p>
<p>ã€€ã€€æ¥ç€æˆ‘ä»¬å¼•å…¥äº†Web Workerå¹¶è¡Œè®¡ç®—ã€‚è¿™ç›¸å½“äºç»™æ•°æ®å¤„ç†æµç¨‹é›‡ä½£äº†ä¸€ä½ä¸“å±çš„åå°åŠ©ç†ã€‚æ‰€æœ‰è€—æ—¶çš„æ•°æ®æ¸…æ´—ã€æ ¼å¼è½¬æ¢å’ŒæŒ‡æ ‡è®¡ç®—éƒ½è¢«è½¬ç§»åˆ°ç‹¬ç«‹çº¿ç¨‹ä¸­æ‰§è¡Œï¼Œä¸»çº¿ç¨‹å¾—ä»¥ä¿æŒè½»ç›ˆï¼Œç»§ç»­æµç•…åœ°å“åº”ç”¨æˆ·çš„æ¯ä¸€æ¬¡ç‚¹å‡»å’Œæ»‘åŠ¨ã€‚è¿™ç§å‰åå°åˆ†å·¥åä½œçš„æ¨¡å¼ï¼Œè®©æ•°æ®å¤„ç†ä»â€œé˜»å¡æ€§ä»»åŠ¡â€å˜æˆäº†â€œåå°æœåŠ¡â€ã€‚</p>
<p>ã€€ã€€æœ€åï¼Œæˆ‘ä»¬åœ¨Echartsæ¸²æŸ“å±‚æ–½å±•äº†ä¸€ç³»åˆ—ç»„åˆä¼˜åŒ–ã€‚é€šè¿‡LTTBé‡‡æ ·ç®—æ³•ï¼Œæˆ‘ä»¬åœ¨ä¿ç•™æ•°æ®è¶‹åŠ¿çµé­‚çš„åŒæ—¶ï¼Œå·§å¦™åœ°å‡å°‘äº†æ¸²æŸ“è´Ÿæ‹…ï¼›å€ŸåŠ©dataZoomçš„è§†å£åŠ¨æ€åŠ è½½ï¼Œæˆ‘ä»¬å®ç°äº†â€œæ‰€è§å³æ‰€å¾—â€çš„æŒ‰éœ€æ¸²æŸ“ï¼›è€Œå¯ç”¨largeå’Œprogressiveæ¨¡å¼ï¼Œåˆ™æ˜¯ç»™å›¾è¡¨å¼•æ“è£…ä¸Šäº†æ¶¡è½®å¢å‹ï¼Œè®©ä¸‡çº§æ•°æ®ç‚¹çš„ç»˜åˆ¶ä¹Ÿèƒ½è¾¾åˆ°60å¸§çš„æµç•…ä½“éªŒã€‚</p>
<p>ã€€ã€€ç°åœ¨å›é¡¾è¿™æ®µæ—…ç¨‹ï¼Œè®©æˆ‘æ·±åˆ»è®¤è¯†åˆ°æ•°æ®å¯è§†åŒ–çš„æœ¬è´¨â€”â€”å®ƒä¸ä»…ä»…æ˜¯æ•°æ®çš„å›¾å½¢åŒ–å‘ˆç°ï¼Œæ›´æ˜¯ä¿¡æ¯ä¸æ´å¯Ÿçš„è‰ºæœ¯è¡¨è¾¾ã€‚å¥½äº†ï¼Œæˆ‘çš„ä¼˜åŒ–ä¹‹æ—…æš‚å‘Šä¸€æ®µè½ï¼Œä½†æŠ€æœ¯çš„æ¢ç´¢æ°¸æ— æ­¢å¢ƒã€‚é‚£ä¹ˆï¼Œä½ çš„é¡¹ç›®ä¸­æ˜¯å¦ä¹Ÿè—ç€éœ€è¦è¢«é©¯æœçš„â€œæ•°æ®å·¨å…½â€å‘¢ï¼Ÿå¸¦ä¸Šè¿™ä»½å®æˆ˜å¿ƒå¾—ï¼Œå¼€å§‹ä½ çš„ä¼˜åŒ–ä¹‹æ—…å§ï¼</p>
<p>å¦‚æœè§‰å¾—å†™å¾—è¿˜ä¸é”™ï¼Œè¯·å…³æ³¨æˆ‘çš„<a href="//juejin.im/user/580038cebf22ec0064bd0b2d" target="_blank" title="//juejin.im/user/580038cebf22ec0064bd0b2d">æ˜é‡‘ä¸»é¡µ</a>ã€‚æ›´å¤šæ–‡ç« è¯·è®¿é—®<a href="https://link.juejin.cn?target=https%3A%2F%2Fxieyufei.com" target="_blank" title="https://xieyufei.com" ref="nofollow noopener noreferrer">è°¢å°é£çš„åšå®¢</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[OoderA2UI BridgeCode æ·±åº¦è§£æï¼šä»è®¾è®¡åŸç†åˆ° Trae Solo Skill å®è·µ]]></title>    <link>https://juejin.cn/post/7602807243705237567</link>    <guid>https://juejin.cn/post/7602807243705237567</guid>    <pubDate>2026-02-05T00:38:33.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602807243705237567" data-draft-id="7602841282802729001" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="OoderA2UI BridgeCode æ·±åº¦è§£æï¼šä»è®¾è®¡åŸç†åˆ° Trae Solo Skill å®è·µ"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-02-05T00:38:33.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="OneCodeCN"/> <meta itemprop="url" content="https://juejin.cn/user/1427583415622366"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            OoderA2UI BridgeCode æ·±åº¦è§£æï¼šä»è®¾è®¡åŸç†åˆ° Trae Solo Skill å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1427583415622366/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    OneCodeCN
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-05T00:38:33.000Z" title="Thu Feb 05 2026 00:38:33 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-05
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»25åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æ‘˜è¦</h2>
<p>æœ¬æ–‡æ·±å…¥è§£æ ooder æ¡†æ¶çš„æ ¸å¿ƒ BridgeCode æœºåˆ¶ï¼Œä»è®¾è®¡åŸç†ã€ç”Ÿæˆç¼–è¯‘æµç¨‹ï¼Œåˆ°åŸºäºæ­¤æœºåˆ¶çš„åˆ†å±‚ SKILLS è®¾è®¡ï¼Œæœ€åå±•ç¤ºåœ¨ Trae Solo ç¯å¢ƒä¸­çš„ Skill æ„å»ºå®è·µã€‚é€šè¿‡æºç åˆ†æå’Œå®æˆ˜æ¡ˆä¾‹ï¼Œæ­ç¤º ooder å¦‚ä½•é€šè¿‡å…ƒæ•°æ®é©±åŠ¨çš„ä»£ç ç”Ÿæˆå®ç°é«˜æ•ˆçš„ A2UI ç»„ä»¶å¼€å‘ã€‚</p>
<h2 data-id="heading-1">ä¸€ã€BridgeCode è®¾è®¡åŸç†</h2>
<h3 data-id="heading-2">1.1 æ ¸å¿ƒè®¾è®¡ç†å¿µ</h3>
<p>BridgeCode æ˜¯ ooder æ¡†æ¶ä¸­è¿æ¥å…ƒæ•°æ®é…ç½®ä¸è¿è¡Œæ—¶ç»„ä»¶çš„æ¡¥æ¢ï¼Œå…¶æ ¸å¿ƒè®¾è®¡ç†å¿µæ˜¯<strong>å…ƒæ•°æ®é©±åŠ¨</strong>ï¼ˆMetadata-Drivenï¼‰ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">å…ƒæ•°æ®é…ç½®ï¼ˆ<span class="hljs-title class_">JSON</span>/æ³¨è§£ï¼‰
    â†“
<span class="hljs-title class_">BridgeCode</span> ç”Ÿæˆå™¨
    â†“
<span class="hljs-title class_">Java</span> æºä»£ç 
    â†“
åŠ¨æ€ç¼–è¯‘
    â†“
è¿è¡Œæ—¶ç»„ä»¶
</code></pre>
<p><strong>è®¾è®¡ç›®æ ‡</strong>ï¼š</p>
<ol>
<li><strong>è§£è€¦æ€§</strong>ï¼šå°†é…ç½®ä¸å®ç°åˆ†ç¦»ï¼Œé…ç½®é€šè¿‡å£°æ˜å¼æ–¹å¼å®šä¹‰</li>
<li><strong>å¯æ‰©å±•æ€§</strong>ï¼šæ”¯æŒå¤šç§ç»„ä»¶ç±»å‹å’Œè§†å›¾æ¨¡å¼</li>
<li><strong>ç±»å‹å®‰å…¨</strong>ï¼šé€šè¿‡ç¼–è¯‘æœŸæ£€æŸ¥ç¡®ä¿é…ç½®çš„æ­£ç¡®æ€§</li>
<li><strong>è¿è¡Œæ—¶ç»‘å®š</strong>ï¼šæ”¯æŒåŠ¨æ€åŠ è½½å’Œçƒ­æ›´æ–°</li>
</ol>
<h3 data-id="heading-3">1.2 æ¶æ„å±‚æ¬¡</h3>
<p>BridgeCode ç³»ç»Ÿé‡‡ç”¨ä¸‰å±‚æ¶æ„è®¾è®¡ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         å…ƒæ•°æ®å±‚ï¼ˆ<span class="hljs-title class_">Metadata</span> <span class="hljs-title class_">Layer</span>ï¼‰         â”‚
â”‚  - <span class="hljs-title class_">CustomViewMeta</span>                        â”‚
â”‚  - <span class="hljs-title class_">CustomDataMeta</span>                        â”‚
â”‚  - <span class="hljs-title class_">MethodConfig</span>                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       ç”Ÿæˆå™¨å±‚ï¼ˆ<span class="hljs-title class_">Generator</span> <span class="hljs-title class_">Layer</span>ï¼‰          â”‚
â”‚  - <span class="hljs-title class_">GenCustomViewJava</span>                     â”‚
â”‚  - <span class="hljs-title class_">GenRepositoryViewJava</span>                  â”‚
â”‚  - <span class="hljs-title class_">GenAggCustomViewJava</span>                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       è¿è¡Œæ—¶å±‚ï¼ˆ<span class="hljs-title class_">Runtime</span> <span class="hljs-title class_">Layer</span>ï¼‰           â”‚
â”‚  - <span class="hljs-title class_">UIComponent</span>                          â”‚
â”‚  - <span class="hljs-title class_">ModuleUIComponent</span>                     â”‚
â”‚  - <span class="hljs-title class_">AggRootBuild</span>                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h3 data-id="heading-4">1.3 æ ¸å¿ƒç±»è®¾è®¡</h3>
<h4 data-id="heading-5">1.3.1 AggRootBuild - èšåˆæ ¹æ„å»ºå™¨</h4>
<p>AggRootBuild æ˜¯ BridgeCode ç”Ÿæˆæµç¨‹çš„æ ¸å¿ƒåè°ƒç±»ï¼Œä½äº <code>net.ooder.engine.codegen.java.AggRootBuild</code>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AggRootBuild</span> {
    
    <span class="hljs-keyword">private</span> GenCustomViewJava viewTask;
    <span class="hljs-keyword">private</span> GenRepositoryViewJava voRepositoryTask;
    <span class="hljs-keyword">private</span> GenRepositoryViewJava serviceRepositoryTask;
    <span class="hljs-keyword">private</span> GenAggCustomViewJava rootTask;
    <span class="hljs-keyword">private</span> GenAggCustomJava genAggCustomJava;
    
    <span class="hljs-keyword">public</span> List&lt;JavaGenSource&gt; <span class="hljs-title function_">build</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> JDSException {
        <span class="hljs-comment">// 1. åˆ›å»ºå­èŠ‚ç‚¹</span>
        CustomViewMeta = genChildJava();
        
        <span class="hljs-comment">// 2. åˆ›å»ºè§†å›¾å±‚</span>
        javaViewSource = buildView();
        
        <span class="hljs-comment">// 3. åˆ›å»ºèµ„æºå±‚æ¥å£</span>
        repositorySource = buildRepositoryView(<span class="hljs-literal">true</span>);
        
        <span class="hljs-comment">// 4. é¢„ç¼–è¯‘ä¸€æ¬¡</span>
        javaGen.dynCompile(getModuleJavaSrc());
        
        <span class="hljs-keyword">return</span> aggServiceRootBean;
    }
}
</code></pre>
<p><strong>å…³é”®ç‰¹æ€§</strong>ï¼š</p>
<ul>
<li><strong>ä»»åŠ¡ç¼–æ’</strong>ï¼šåè°ƒå¤šä¸ªç”Ÿæˆä»»åŠ¡çš„æ‰§è¡Œé¡ºåº</li>
<li><strong>ä¾èµ–ç®¡ç†</strong>ï¼šå¤„ç†ç”Ÿæˆä»»åŠ¡ä¹‹é—´çš„ä¾èµ–å…³ç³»</li>
<li><strong>å¢é‡æ„å»º</strong>ï¼šæ”¯æŒåªç”Ÿæˆå˜æ›´çš„éƒ¨åˆ†</li>
<li><strong>é”™è¯¯å¤„ç†</strong>ï¼šç»Ÿä¸€çš„å¼‚å¸¸å¤„ç†å’Œå›æ»šæœºåˆ¶</li>
</ul>
<h4 data-id="heading-6">1.3.2 GenJavaTask - ç”Ÿæˆä»»åŠ¡åŸºç±»</h4>
<p>æ‰€æœ‰ä»£ç ç”Ÿæˆå™¨éƒ½ç»§æ‰¿è‡ª GenJavaTaskï¼Œæä¾›ç»Ÿä¸€çš„ç”Ÿæˆæ¡†æ¶ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">GenJavaTask</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Callable</span>&lt;List&lt;JavaGenSource&gt;&gt; {
    
    <span class="hljs-keyword">protected</span> JavaGenSource javaGen;
    <span class="hljs-keyword">protected</span> CustomViewMeta viewMeta;
    <span class="hljs-keyword">protected</span> String euClassName;
    <span class="hljs-keyword">protected</span> Chrome chrome;
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> List&lt;JavaGenSource&gt; <span class="hljs-title function_">build</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> JDSException;
    
    <span class="hljs-keyword">protected</span> JavaGenSource <span class="hljs-title function_">createJavaSource</span><span class="hljs-params">(String className, String content)</span> {
        <span class="hljs-type">JavaGenSource</span> <span class="hljs-variable">source</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JavaGenSource</span>();
        source.setClassName(className);
        source.setContent(content);
        source.setPackage(viewMeta.getPackageName());
        <span class="hljs-keyword">return</span> source;
    }
}
</code></pre>
<p><strong>è®¾è®¡ä¼˜åŠ¿</strong>ï¼š</p>
<ul>
<li><strong>ç»Ÿä¸€æ¥å£</strong>ï¼šæ‰€æœ‰ç”Ÿæˆå™¨å®ç°ç›¸åŒçš„æ¥å£</li>
<li><strong>å¯ç»„åˆæ€§</strong>ï¼šæ”¯æŒç”Ÿæˆå™¨çš„ç»„åˆå’Œå¤ç”¨</li>
<li><strong>é”™è¯¯éš”ç¦»</strong>ï¼šæ¯ä¸ªç”Ÿæˆå™¨ç‹¬ç«‹å¤„ç†é”™è¯¯</li>
<li><strong>å¯æµ‹è¯•æ€§</strong>ï¼šæ¯ä¸ªç”Ÿæˆå™¨å¯ä»¥ç‹¬ç«‹æµ‹è¯•</li>
</ul>
<h4 data-id="heading-7">1.3.3 D2CGenerator - è®¾è®¡åˆ°ä»£ç ç”Ÿæˆå™¨</h4>
<p>D2CGenerator æ˜¯æ ¸å¿ƒçš„ä»£ç ç”Ÿæˆå¼•æ“ï¼Œä½¿ç”¨ Freemarker æ¨¡æ¿å¼•æ“ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">D2CGenerator</span> {
    
    <span class="hljs-keyword">private</span> Configuration freemarkerConfig;
    <span class="hljs-keyword">private</span> TemplateManager templateManager;
    
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">generate</span><span class="hljs-params">(String templateName, Map&lt;String, Object&gt; dataModel)</span> 
            <span class="hljs-keyword">throws</span> JDSException {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-type">Template</span> <span class="hljs-variable">template</span> <span class="hljs-operator">=</span> freemarkerConfig.getTemplate(templateName);
            <span class="hljs-type">StringWriter</span> <span class="hljs-variable">writer</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringWriter</span>();
            template.process(dataModel, writer);
            <span class="hljs-keyword">return</span> writer.toString();
        } <span class="hljs-keyword">catch</span> (Exception e) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JDSException</span>(<span class="hljs-string">"ä»£ç ç”Ÿæˆå¤±è´¥: "</span> + e.getMessage(), e);
        }
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">dynCompile</span><span class="hljs-params">(List&lt;JavaGenSource&gt; sources)</span> <span class="hljs-keyword">throws</span> JDSException {
        <span class="hljs-type">JavaCompiler</span> <span class="hljs-variable">compiler</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JavaCompiler</span>();
        compiler.compile(sources);
    }
}
</code></pre>
<p><strong>æŠ€æœ¯æ ˆ</strong>ï¼š</p>
<ul>
<li><strong>æ¨¡æ¿å¼•æ“</strong>ï¼šFreemarker 2.3.x</li>
<li><strong>ç¼–è¯‘å™¨</strong>ï¼šJava Compiler API</li>
<li><strong>ç±»åŠ è½½</strong>ï¼šè‡ªå®šä¹‰ ClassLoader</li>
<li><strong>æ‰“åŒ…</strong>ï¼šJAR æ–‡ä»¶ç”Ÿæˆ</li>
</ul>
<h2 data-id="heading-8">äºŒã€BridgeCode ç”Ÿæˆç¼–è¯‘åŸç†</h2>
<h3 data-id="heading-9">2.1 å®Œæ•´ç”Ÿæˆæµç¨‹</h3>
<p>BridgeCode çš„ç”Ÿæˆç¼–è¯‘æµç¨‹åˆ†ä¸ºäº”ä¸ªé˜¶æ®µï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">é˜¶æ®µ</span> <span class="hljs-attr">1:</span> <span class="hljs-string">å…ƒæ•°æ®è§£æ</span>
    <span class="hljs-string">â†“</span>
<span class="hljs-string">é˜¶æ®µ</span> <span class="hljs-attr">2:</span> <span class="hljs-string">ä»£ç ç”Ÿæˆ</span>
    <span class="hljs-string">â†“</span>
<span class="hljs-string">é˜¶æ®µ</span> <span class="hljs-attr">3:</span> <span class="hljs-string">æºç ç»„è£…</span>
    <span class="hljs-string">â†“</span>
<span class="hljs-string">é˜¶æ®µ</span> <span class="hljs-attr">4:</span> <span class="hljs-string">åŠ¨æ€ç¼–è¯‘</span>
    <span class="hljs-string">â†“</span>
<span class="hljs-string">é˜¶æ®µ</span> <span class="hljs-attr">5:</span> <span class="hljs-string">è¿è¡Œæ—¶ç»‘å®š</span>
</code></pre>
<h3 data-id="heading-10">2.2 é˜¶æ®µè¯¦è§£</h3>
<h4 data-id="heading-11">2.2.1 é˜¶æ®µ 1ï¼šå…ƒæ•°æ®è§£æ</h4>
<p><strong>è¾“å…¥</strong>ï¼š</p>
<ul>
<li>JSON é…ç½®æ–‡ä»¶</li>
<li>Java æ³¨è§£é…ç½®</li>
<li>æ•°æ®åº“å…ƒæ•°æ®</li>
</ul>
<p><strong>å¤„ç†æµç¨‹</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MetadataParser</span> {
    
    <span class="hljs-keyword">public</span> MethodConfig <span class="hljs-title function_">parseFromJson</span><span class="hljs-params">(String jsonConfig)</span> {
        <span class="hljs-type">JSONObject</span> <span class="hljs-variable">json</span> <span class="hljs-operator">=</span> JSON.parseObject(jsonConfig);
        <span class="hljs-type">MethodConfig</span> <span class="hljs-variable">config</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MethodConfig</span>();
        
        <span class="hljs-comment">// è§£æè§†å›¾å…ƒæ•°æ®</span>
        config.setView(parseViewMeta(json.getJSONObject(<span class="hljs-string">"view"</span>)));
        
        <span class="hljs-comment">// è§£ææ•°æ®å…ƒæ•°æ®</span>
        config.setDataBean(parseDataMeta(json.getJSONObject(<span class="hljs-string">"data"</span>)));
        
        <span class="hljs-comment">// è§£ææ–¹æ³•é…ç½®</span>
        config.setMethodName(json.getString(<span class="hljs-string">"methodName"</span>));
        config.setUrl(json.getString(<span class="hljs-string">"url"</span>));
        
        <span class="hljs-keyword">return</span> config;
    }
    
    <span class="hljs-keyword">public</span> MethodConfig <span class="hljs-title function_">parseFromAnnotation</span><span class="hljs-params">(Class&lt;?&gt; bridgeClass)</span> {
        <span class="hljs-type">MethodConfig</span> <span class="hljs-variable">config</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MethodConfig</span>();
        
        <span class="hljs-comment">// è§£æ @CustomClass æ³¨è§£</span>
        <span class="hljs-type">CustomClass</span> <span class="hljs-variable">classAnnotation</span> <span class="hljs-operator">=</span> bridgeClass.getAnnotation(CustomClass.class);
        config.setCaption(classAnnotation.caption());
        
        <span class="hljs-comment">// è§£ææ–¹æ³•æ³¨è§£</span>
        <span class="hljs-keyword">for</span> (Method method : bridgeClass.getMethods()) {
            <span class="hljs-keyword">if</span> (method.isAnnotationPresent(CustomMenuItem.class)) {
                config.addMenuItem(parseMenuItem(method));
            }
            <span class="hljs-keyword">if</span> (method.isAnnotationPresent(CustomGridEvent.class)) {
                config.addEvent(parseGridEvent(method));
            }
        }
        
        <span class="hljs-keyword">return</span> config;
    }
}
</code></pre>
<p><strong>éªŒè¯æœºåˆ¶</strong>ï¼š</p>
<ul>
<li>ç±»å‹æ£€æŸ¥ï¼šç¡®ä¿å­—æ®µç±»å‹åŒ¹é…</li>
<li>å¿…å¡«éªŒè¯ï¼šæ£€æŸ¥å¿…å¡«å­—æ®µ</li>
<li>å¼•ç”¨éªŒè¯ï¼šéªŒè¯å¼•ç”¨çš„å®ä½“å­˜åœ¨</li>
<li>æ ¼å¼éªŒè¯ï¼šæ£€æŸ¥ URLã€æ­£åˆ™è¡¨è¾¾å¼ç­‰æ ¼å¼</li>
</ul>
<h4 data-id="heading-12">2.2.2 é˜¶æ®µ 2ï¼šä»£ç ç”Ÿæˆ</h4>
<p><strong>ç”Ÿæˆå™¨å±‚æ¬¡</strong>ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">GenCustomViewJava (è§†å›¾å±‚ç”Ÿæˆå™¨)
    â”œâ”€â”€ GenLayoutChildModule (å¸ƒå±€ç”Ÿæˆ)
    â”œâ”€â”€ GenTabsChildModule (æ ‡ç­¾é¡µç”Ÿæˆ)
    â””â”€â”€ GenFormChildModule (è¡¨å•ç”Ÿæˆ)

GenRepositoryViewJava (ä»“å‚¨å±‚ç”Ÿæˆå™¨)
    â”œâ”€â”€ GenEntityJava (å®ä½“ç”Ÿæˆ)
    â”œâ”€â”€ GenEntityServiceJava (æœåŠ¡ç”Ÿæˆ)
    â””â”€â”€ GenTableJava (è¡¨ç”Ÿæˆ)

GenAggCustomViewJava (èšåˆå±‚ç”Ÿæˆå™¨)
    â”œâ”€â”€ GenAggRootJava (èšåˆæ ¹ç”Ÿæˆ)
    â”œâ”€â”€ GenAggMenuJava (èœå•ç”Ÿæˆ)
    â””â”€â”€ GenAggAPIJava (APIç”Ÿæˆ)
</code></pre>
<p><strong>ç”Ÿæˆç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">GenCustomViewJava</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">GenJavaTask</span> {
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> List&lt;JavaGenSource&gt; <span class="hljs-title function_">build</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> JDSException {
        List&lt;JavaGenSource&gt; sources = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
        
        <span class="hljs-comment">// 1. ç”Ÿæˆè§†å›¾ç±»</span>
        sources.add(generateViewClass());
        
        <span class="hljs-comment">// 2. ç”Ÿæˆå­—æ®µé…ç½®</span>
        sources.add(generateFieldConfigs());
        
        <span class="hljs-comment">// 3. ç”Ÿæˆäº‹ä»¶å¤„ç†å™¨</span>
        sources.add(generateEventHandlers());
        
        <span class="hljs-keyword">return</span> sources;
    }
    
    <span class="hljs-keyword">private</span> JavaGenSource <span class="hljs-title function_">generateViewClass</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> JDSException {
        Map&lt;String, Object&gt; dataModel = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
        dataModel.put(<span class="hljs-string">"className"</span>, viewMeta.getClassName());
        dataModel.put(<span class="hljs-string">"packageName"</span>, viewMeta.getPackageName());
        dataModel.put(<span class="hljs-string">"fields"</span>, viewMeta.getFields());
        
        <span class="hljs-type">String</span> <span class="hljs-variable">content</span> <span class="hljs-operator">=</span> d2cGenerator.generate(<span class="hljs-string">"view.ftl"</span>, dataModel);
        <span class="hljs-keyword">return</span> createJavaSource(viewMeta.getClassName(), content);
    }
}
</code></pre>
<p><strong>æ¨¡æ¿ç¤ºä¾‹</strong>ï¼ˆFreemarkerï¼‰ï¼š</p>
<pre><code class="hljs language-ftl" lang="ftl">package ${packageName};

import net.ooder.engine.ub.component.*;
import net.ooder.engine.ub.annotation.*;

&lt;#list fields as field&gt;
import ${field.type};
&lt;/#list&gt;

/**
 * ${viewMeta.caption}
 * è‡ªåŠ¨ç”Ÿæˆçš„è§†å›¾ç±»ï¼Œè¯·å‹¿æ‰‹åŠ¨ä¿®æ”¹
 */
@CustomView
public class ${className} extends UIComponent {
    
    &lt;#list fields as field&gt;
    private ${field.type} ${field.name};
    &lt;/#list&gt;
    
    public ${className}() {
        super();
        // åˆå§‹åŒ–ç»„ä»¶
    }
}
</code></pre>
<h4 data-id="heading-13">2.2.3 é˜¶æ®µ 3ï¼šæºç ç»„è£…</h4>
<p><strong>ç»„è£…ç­–ç•¥</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SourceAssembler</span> {
    
    <span class="hljs-keyword">public</span> JavaSrcMeta <span class="hljs-title function_">assemble</span><span class="hljs-params">(List&lt;JavaGenSource&gt; sources)</span> {
        <span class="hljs-type">JavaSrcMeta</span> <span class="hljs-variable">srcMeta</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JavaSrcMeta</span>();
        
        <span class="hljs-comment">// 1. æŒ‰åŒ…åˆ†ç»„</span>
        Map&lt;String, List&lt;JavaGenSource&gt;&gt; packageMap = 
            sources.stream().collect(Collectors.groupingBy(JavaGenSource::getPackage));
        
        <span class="hljs-comment">// 2. ç”ŸæˆåŒ…ç»“æ„</span>
        <span class="hljs-keyword">for</span> (Map.Entry&lt;String, List&lt;JavaGenSource&gt;&gt; entry : packageMap.entrySet()) {
            <span class="hljs-type">String</span> <span class="hljs-variable">packageName</span> <span class="hljs-operator">=</span> entry.getKey();
            List&lt;JavaGenSource&gt; packageSources = entry.getValue();
            
            <span class="hljs-comment">// ç”ŸæˆåŒ…ç›®å½•</span>
            <span class="hljs-type">String</span> <span class="hljs-variable">packagePath</span> <span class="hljs-operator">=</span> packageName.replace(<span class="hljs-string">'.'</span>, <span class="hljs-string">'/'</span>);
            srcMeta.addPackage(packagePath, packageSources);
        }
        
        <span class="hljs-comment">// 3. ç”Ÿæˆå¯¼å…¥è¯­å¥</span>
        srcMeta.addImports(calculateImports(sources));
        
        <span class="hljs-keyword">return</span> srcMeta;
    }
}
</code></pre>
<p><strong>ä¾èµ–è§£æ</strong>ï¼š</p>
<ul>
<li>è‡ªåŠ¨è®¡ç®—ç±»ä¾èµ–å…³ç³»</li>
<li>ç”Ÿæˆæ­£ç¡®çš„ import è¯­å¥</li>
<li>å¤„ç†å¾ªç¯ä¾èµ–</li>
<li>ä¼˜åŒ–å¯¼å…¥é¡ºåº</li>
</ul>
<h4 data-id="heading-14">2.2.4 é˜¶æ®µ 4ï¼šåŠ¨æ€ç¼–è¯‘</h4>
<p><strong>ç¼–è¯‘æµç¨‹</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DynamicCompiler</span> {
    
    <span class="hljs-keyword">public</span> Class&lt;?&gt; compile(JavaGenSource source) <span class="hljs-keyword">throws</span> JDSException {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// 1. åˆ›å»º Java æ–‡ä»¶</span>
            <span class="hljs-type">File</span> <span class="hljs-variable">javaFile</span> <span class="hljs-operator">=</span> createJavaFile(source);
            
            <span class="hljs-comment">// 2. ç¼–è¯‘ Java æ–‡ä»¶</span>
            <span class="hljs-type">JavaCompiler</span> <span class="hljs-variable">compiler</span> <span class="hljs-operator">=</span> ToolProvider.getSystemJavaCompiler();
            DiagnosticCollector&lt;JavaFileObject&gt; diagnostics = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DiagnosticCollector</span>&lt;&gt;();
            
            <span class="hljs-type">StandardJavaFileManager</span> <span class="hljs-variable">fileManager</span> <span class="hljs-operator">=</span> 
                compiler.getStandardFileManager(<span class="hljs-literal">null</span>, <span class="hljs-literal">null</span>);
            
            Iterable&lt;? <span class="hljs-keyword">extends</span> <span class="hljs-title class_">JavaFileObject</span>&gt; compilationUnits = 
                fileManager.getJavaFileObjectsFromFiles(Arrays.asList(javaFile));
            
            <span class="hljs-comment">// 3. æ‰§è¡Œç¼–è¯‘</span>
            compiler.getTask(<span class="hljs-literal">null</span>, <span class="hljs-literal">null</span>, diagnostics, fileManager, <span class="hljs-literal">null</span>, <span class="hljs-literal">null</span>)
                   .call(compilationUnits);
            
            <span class="hljs-comment">// 4. æ£€æŸ¥ç¼–è¯‘é”™è¯¯</span>
            <span class="hljs-keyword">if</span> (!diagnostics.getDiagnostics().isEmpty()) {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JDSException</span>(<span class="hljs-string">"ç¼–è¯‘å¤±è´¥: "</span> + diagnostics);
            }
            
            <span class="hljs-comment">// 5. åŠ è½½ç¼–è¯‘åçš„ç±»</span>
            <span class="hljs-type">ClassLoader</span> <span class="hljs-variable">classLoader</span> <span class="hljs-operator">=</span> fileManager.getClassLoader(<span class="hljs-literal">null</span>);
            <span class="hljs-keyword">return</span> classLoader.loadClass(source.getClassName());
            
        } <span class="hljs-keyword">catch</span> (Exception e) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JDSException</span>(<span class="hljs-string">"åŠ¨æ€ç¼–è¯‘å¤±è´¥: "</span> + e.getMessage(), e);
        }
    }
}
</code></pre>
<p><strong>ç¼–è¯‘ä¼˜åŒ–</strong>ï¼š</p>
<ul>
<li>å¢é‡ç¼–è¯‘ï¼šåªç¼–è¯‘å˜æ›´çš„æ–‡ä»¶</li>
<li>å¹¶è¡Œç¼–è¯‘ï¼šæ”¯æŒå¤šçº¿ç¨‹ç¼–è¯‘</li>
<li>ç¼“å­˜æœºåˆ¶ï¼šç¼“å­˜å·²ç¼–è¯‘çš„ç±»</li>
<li>çƒ­æ›¿æ¢ï¼šæ”¯æŒè¿è¡Œæ—¶æ›¿æ¢ç±»</li>
</ul>
<h4 data-id="heading-15">2.2.5 é˜¶æ®µ 5ï¼šè¿è¡Œæ—¶ç»‘å®š</h4>
<p><strong>ç»‘å®šæœºåˆ¶</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RuntimeBinder</span> {
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">bind</span><span class="hljs-params">(MethodConfig config, Class&lt;?&gt; bridgeClass)</span> 
            <span class="hljs-keyword">throws</span> JDSException {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// 1. åˆ›å»º Bridge å®ä¾‹</span>
            <span class="hljs-type">Object</span> <span class="hljs-variable">bridgeInstance</span> <span class="hljs-operator">=</span> bridgeClass.newInstance();
            
            <span class="hljs-comment">// 2. ç»‘å®šæ–¹æ³•åˆ°äº‹ä»¶</span>
            <span class="hljs-keyword">for</span> (Event event : config.getEvents()) {
                <span class="hljs-type">Method</span> <span class="hljs-variable">handler</span> <span class="hljs-operator">=</span> findHandlerMethod(bridgeClass, event.getHandler());
                bindEvent(event, handler, bridgeInstance);
            }
            
            <span class="hljs-comment">// 3. ç»‘å®šèœå•é¡¹</span>
            <span class="hljs-keyword">for</span> (MenuItem menu : config.getMenus()) {
                <span class="hljs-type">Method</span> <span class="hljs-variable">handler</span> <span class="hljs-operator">=</span> findHandlerMethod(bridgeClass, menu.getHandler());
                bindMenuItem(menu, handler, bridgeInstance);
            }
            
            <span class="hljs-comment">// 4. æ³¨å†Œåˆ° UI æ¡†æ¶</span>
            registerToUIFramework(bridgeInstance);
            
        } <span class="hljs-keyword">catch</span> (Exception e) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JDSException</span>(<span class="hljs-string">"è¿è¡Œæ—¶ç»‘å®šå¤±è´¥: "</span> + e.getMessage(), e);
        }
    }
}
</code></pre>
<p><strong>ç»‘å®šç‰¹æ€§</strong>ï¼š</p>
<ul>
<li>åå°„ç»‘å®šï¼šä½¿ç”¨ Java åå°„æœºåˆ¶</li>
<li>ç±»å‹å®‰å…¨ï¼šç¼–è¯‘æœŸæ£€æŸ¥ç±»å‹åŒ¹é…</li>
<li>ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼šè‡ªåŠ¨ç®¡ç†ç»„ä»¶ç”Ÿå‘½å‘¨æœŸ</li>
<li>äº‹ä»¶ä¼ æ’­ï¼šæ”¯æŒäº‹ä»¶å†’æ³¡å’Œæ•è·</li>
</ul>
<h3 data-id="heading-16">2.3 æ€§èƒ½ä¼˜åŒ–</h3>
<h4 data-id="heading-17">2.3.1 ç”Ÿæˆç¼“å­˜</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">GenerationCache</span> {
    
    <span class="hljs-keyword">private</span> Map&lt;String, JavaGenSource&gt; cache = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcurrentHashMap</span>&lt;&gt;();
    
    <span class="hljs-keyword">public</span> JavaGenSource <span class="hljs-title function_">getOrGenerate</span><span class="hljs-params">(String key, Callable&lt;JavaGenSource&gt; generator)</span> 
            <span class="hljs-keyword">throws</span> JDSException {
        <span class="hljs-keyword">return</span> cache.computeIfAbsent(key, k -&gt; {
            <span class="hljs-keyword">try</span> {
                <span class="hljs-keyword">return</span> generator.call();
            } <span class="hljs-keyword">catch</span> (Exception e) {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JDSException</span>(<span class="hljs-string">"ç”Ÿæˆå¤±è´¥: "</span> + e.getMessage(), e);
            }
        });
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">invalidate</span><span class="hljs-params">(String key)</span> {
        cache.remove(key);
    }
}
</code></pre>
<h4 data-id="heading-18">2.3.2 å¹¶è¡Œç”Ÿæˆ</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ParallelGenerator</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-type">ExecutorService</span> <span class="hljs-variable">executor</span> <span class="hljs-operator">=</span> Executors.newFixedThreadPool(<span class="hljs-number">4</span>);
    
    <span class="hljs-keyword">public</span> List&lt;JavaGenSource&gt; <span class="hljs-title function_">generateParallel</span><span class="hljs-params">(
            List&lt;GenJavaTask&gt; tasks)</span> <span class="hljs-keyword">throws</span> JDSException {
        <span class="hljs-keyword">try</span> {
            List&lt;Future&lt;JavaGenSource&gt;&gt; futures = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
            
            <span class="hljs-keyword">for</span> (GenJavaTask task : tasks) {
                Future&lt;JavaGenSource&gt; future = executor.submit(task);
                futures.add(future);
            }
            
            List&lt;JavaGenSource&gt; results = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
            <span class="hljs-keyword">for</span> (Future&lt;JavaGenSource&gt; future : futures) {
                results.add(future.get());
            }
            
            <span class="hljs-keyword">return</span> results;
        } <span class="hljs-keyword">catch</span> (Exception e) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JDSException</span>(<span class="hljs-string">"å¹¶è¡Œç”Ÿæˆå¤±è´¥: "</span> + e.getMessage(), e);
        }
    }
}
</code></pre>
<h2 data-id="heading-19">ä¸‰ã€åˆ†å±‚ SKILLS è®¾è®¡</h2>
<h3 data-id="heading-20">3.1 Skill æ¶æ„è®¾è®¡</h3>
<p>åŸºäº BridgeCode æœºåˆ¶ï¼Œooder è®¾è®¡äº†åˆ†å±‚ SKILLS æ¶æ„ï¼Œä¸º LLM æä¾›ç»“æ„åŒ–çš„çŸ¥è¯†è®¿é—®èƒ½åŠ›ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Skill çŸ¥è¯†å±‚ï¼ˆKnowledge Layerï¼‰       â”‚
â”‚  - Foundation Skill                      â”‚
â”‚  - Module Skill                        â”‚
â”‚  - Component Skill                     â”‚
â”‚  - Metadata Skill                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
<span class="hljs-code">                  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Skill æ‰§è¡Œå±‚ï¼ˆExecution Layerï¼‰        â”‚
â”‚  - Skill Loader                        â”‚
â”‚  - Skill Context                      â”‚
â”‚  - Skill Orchestrator                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Skill é›†æˆå±‚ï¼ˆIntegration Layerï¼‰    â”‚
â”‚  - Trae Solo Integration               â”‚
â”‚  - LLM Provider                      â”‚
â”‚  - Tool Registry                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</span></code></pre>
<h3 data-id="heading-21">3.2 Foundation Skill è®¾è®¡</h3>
<p><strong>èŒè´£</strong>ï¼šæä¾›åŸºç¡€ç»„ä»¶çš„çŸ¥è¯†å’Œç”Ÿæˆèƒ½åŠ›</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FoundationSkill</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">NAME</span> <span class="hljs-operator">=</span> <span class="hljs-string">"foundation"</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">DESCRIPTION</span> <span class="hljs-operator">=</span> <span class="hljs-string">"åŸºç¡€ç»„ä»¶ Skill"</span>;
    
    <span class="hljs-keyword">public</span> SkillContext <span class="hljs-title function_">load</span><span class="hljs-params">()</span> {
        <span class="hljs-type">SkillContext</span> <span class="hljs-variable">context</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SkillContext</span>();
        
        <span class="hljs-comment">// 1. åŠ è½½ NlpBaseUIComponent çŸ¥è¯†</span>
        context.addClass(NlpBaseUIComponent.class);
        
        <span class="hljs-comment">// 2. åŠ è½½ç”Ÿæˆå™¨çŸ¥è¯†</span>
        context.addGenerator(GenJavaTask.class);
        
        <span class="hljs-comment">// 3. åŠ è½½æ¨¡æ¿çŸ¥è¯†</span>
        context.addTemplate(<span class="hljs-string">"base.ftl"</span>);
        
        <span class="hljs-keyword">return</span> context;
    }
    
    <span class="hljs-keyword">public</span> List&lt;SkillAction&gt; <span class="hljs-title function_">getActions</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> Arrays.asList(
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">SkillAction</span>(<span class="hljs-string">"create-base-component"</span>, <span class="hljs-string">"åˆ›å»ºåŸºç¡€ç»„ä»¶"</span>),
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">SkillAction</span>(<span class="hljs-string">"initialize-component"</span>, <span class="hljs-string">"åˆå§‹åŒ–ç»„ä»¶"</span>),
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">SkillAction</span>(<span class="hljs-string">"validate-component"</span>, <span class="hljs-string">"éªŒè¯ç»„ä»¶"</span>)
        );
    }
}
</code></pre>
<p><strong>çŸ¥è¯†å†…å®¹</strong>ï¼š</p>
<ul>
<li>æŠ½è±¡ç±»å®šä¹‰</li>
<li>åˆå§‹åŒ–æ–¹æ³•ç­¾å</li>
<li>ç»„ä»¶ç±»å‹æšä¸¾</li>
<li>åŸºç¡€ç”Ÿæˆå™¨æ¨¡æ¿</li>
</ul>
<h3 data-id="heading-22">3.3 Module Skill è®¾è®¡</h3>
<p><strong>èŒè´£</strong>ï¼šæä¾›æ¨¡å—ç»„ä»¶çš„çŸ¥è¯†å’Œç”Ÿæˆèƒ½åŠ›</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ModuleSkill</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">NAME</span> <span class="hljs-operator">=</span> <span class="hljs-string">"module"</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">DESCRIPTION</span> <span class="hljs-operator">=</span> <span class="hljs-string">"æ¨¡å—ç»„ä»¶ Skill"</span>;
    
    <span class="hljs-keyword">public</span> SkillContext <span class="hljs-title function_">load</span><span class="hljs-params">()</span> {
        <span class="hljs-type">SkillContext</span> <span class="hljs-variable">context</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SkillContext</span>();
        
        <span class="hljs-comment">// 1. åŠ è½½ ModuleUIComponent çŸ¥è¯†</span>
        context.addClass(ModuleUIComponent.class);
        context.addClass(CustomModuleUIComponent.class);
        
        <span class="hljs-comment">// 2. åŠ è½½ç”Ÿå‘½å‘¨æœŸæ–¹æ³•</span>
        context.addMethod(<span class="hljs-string">"setCurrComponent"</span>);
        context.addMethod(<span class="hljs-string">"findComponentByAlias"</span>);
        
        <span class="hljs-comment">// 3. åŠ è½½ç”Ÿæˆå™¨</span>
        context.addGenerator(GenRepositoryViewJava.class);
        
        <span class="hljs-keyword">return</span> context;
    }
    
    <span class="hljs-keyword">public</span> List&lt;SkillAction&gt; <span class="hljs-title function_">getActions</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> Arrays.asList(
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">SkillAction</span>(<span class="hljs-string">"create-module"</span>, <span class="hljs-string">"åˆ›å»ºæ¨¡å—"</span>),
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">SkillAction</span>(<span class="hljs-string">"bind-component"</span>, <span class="hljs-string">"ç»‘å®šç»„ä»¶"</span>),
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">SkillAction</span>(<span class="hljs-string">"manage-lifecycle"</span>, <span class="hljs-string">"ç®¡ç†ç”Ÿå‘½å‘¨æœŸ"</span>)
        );
    }
}
</code></pre>
<p><strong>çŸ¥è¯†å†…å®¹</strong>ï¼š</p>
<ul>
<li>æ¨¡å—ç±»å®šä¹‰</li>
<li>ç”Ÿå‘½å‘¨æœŸç®¡ç†æ–¹æ³•</li>
<li>ç»„ä»¶æŸ¥æ‰¾æœºåˆ¶</li>
<li>ä»“å‚¨å±‚ç”Ÿæˆå™¨</li>
</ul>
<h3 data-id="heading-23">3.4 Component Skill è®¾è®¡</h3>
<p><strong>èŒè´£</strong>ï¼šæä¾›å…·ä½“ç»„ä»¶çš„çŸ¥è¯†å’Œç”Ÿæˆèƒ½åŠ›</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ComponentSkill</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">NAME</span> <span class="hljs-operator">=</span> <span class="hljs-string">"component"</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">DESCRIPTION</span> <span class="hljs-operator">=</span> <span class="hljs-string">"ç»„ä»¶ Skill"</span>;
    
    <span class="hljs-keyword">public</span> SkillContext <span class="hljs-title function_">load</span><span class="hljs-params">()</span> {
        <span class="hljs-type">SkillContext</span> <span class="hljs-variable">context</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SkillContext</span>();
        
        <span class="hljs-comment">// 1. åŠ è½½å…·ä½“ç»„ä»¶çŸ¥è¯†</span>
        context.addClass(NlpGroupUIComponent.class);
        context.addClass(NlpGridUIComponent.class);
        context.addClass(TreeGridUIComponent.class);
        
        <span class="hljs-comment">// 2. åŠ è½½ç»„ä»¶é…ç½®</span>
        context.addConfig(<span class="hljs-string">"group-config"</span>);
        context.addConfig(<span class="hljs-string">"grid-config"</span>);
        
        <span class="hljs-comment">// 3. åŠ è½½è§†å›¾ç”Ÿæˆå™¨</span>
        context.addGenerator(GenCustomViewJava.class);
        
        <span class="hljs-keyword">return</span> context;
    }
    
    <span class="hljs-keyword">public</span> List&lt;SkillAction&gt; <span class="hljs-title function_">getActions</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> Arrays.asList(
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">SkillAction</span>(<span class="hljs-string">"create-group"</span>, <span class="hljs-string">"åˆ›å»ºåˆ†ç»„ç»„ä»¶"</span>),
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">SkillAction</span>(<span class="hljs-string">"create-grid"</span>, <span class="hljs-string">"åˆ›å»ºç½‘æ ¼ç»„ä»¶"</span>),
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">SkillAction</span>(<span class="hljs-string">"create-tree"</span>, <span class="hljs-string">"åˆ›å»ºæ ‘å½¢ç»„ä»¶"</span>)
        );
    }
}
</code></pre>
<p><strong>çŸ¥è¯†å†…å®¹</strong>ï¼š</p>
<ul>
<li>å…·ä½“ç»„ä»¶ç±»å®šä¹‰</li>
<li>ç»„ä»¶é…ç½®æ¨¡å¼</li>
<li>è§†å›¾å±‚ç”Ÿæˆå™¨</li>
<li>ç»„ä»¶é—´å…³ç³»</li>
</ul>
<h3 data-id="heading-24">3.5 Metadata Skill è®¾è®¡</h3>
<p><strong>èŒè´£</strong>ï¼šæä¾›å…ƒæ•°æ®çš„çŸ¥è¯†å’Œç”Ÿæˆèƒ½åŠ›</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MetadataSkill</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">NAME</span> <span class="hljs-operator">=</span> <span class="hljs-string">"metadata"</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">DESCRIPTION</span> <span class="hljs-operator">=</span> <span class="hljs-string">"å…ƒæ•°æ® Skill"</span>;
    
    <span class="hljs-keyword">public</span> SkillContext <span class="hljs-title function_">load</span><span class="hljs-params">()</span> {
        <span class="hljs-type">SkillContext</span> <span class="hljs-variable">context</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SkillContext</span>();
        
        <span class="hljs-comment">// 1. åŠ è½½å…ƒæ•°æ®ç±»</span>
        context.addClass(CustomViewMeta.class);
        context.addClass(CustomDataMeta.class);
        context.addClass(MethodConfig.class);
        
        <span class="hljs-comment">// 2. åŠ è½½è§£æå™¨</span>
        context.addParser(MetadataParser.class);
        
        <span class="hljs-comment">// 3. åŠ è½½éªŒè¯è§„åˆ™</span>
        context.addValidator(MetadataValidator.class);
        
        <span class="hljs-keyword">return</span> context;
    }
    
    <span class="hljs-keyword">public</span> List&lt;SkillAction&gt; <span class="hljs-title function_">getActions</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> Arrays.asList(
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">SkillAction</span>(<span class="hljs-string">"parse-metadata"</span>, <span class="hljs-string">"è§£æå…ƒæ•°æ®"</span>),
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">SkillAction</span>(<span class="hljs-string">"validate-metadata"</span>, <span class="hljs-string">"éªŒè¯å…ƒæ•°æ®"</span>),
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">SkillAction</span>(<span class="hljs-string">"generate-code"</span>, <span class="hljs-string">"ç”Ÿæˆä»£ç "</span>)
        );
    }
}
</code></pre>
<p><strong>çŸ¥è¯†å†…å®¹</strong>ï¼š</p>
<ul>
<li>å…ƒæ•°æ®ç±»å®šä¹‰</li>
<li>å…ƒæ•°æ®è§£æå™¨</li>
<li>éªŒè¯è§„åˆ™</li>
<li>ç”Ÿæˆè§„åˆ™</li>
</ul>
<h3 data-id="heading-25">3.6 Skill åä½œæœºåˆ¶</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SkillOrchestrator</span> {
    
    <span class="hljs-keyword">private</span> Map&lt;String, Skill&gt; skills = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcurrentHashMap</span>&lt;&gt;();
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">registerSkill</span><span class="hljs-params">(Skill skill)</span> {
        skills.put(skill.getName(), skill);
    }
    
    <span class="hljs-keyword">public</span> SkillContext <span class="hljs-title function_">execute</span><span class="hljs-params">(String skillName, Map&lt;String, Object&gt; params)</span> 
            <span class="hljs-keyword">throws</span> JDSException {
        <span class="hljs-type">Skill</span> <span class="hljs-variable">skill</span> <span class="hljs-operator">=</span> skills.get(skillName);
        <span class="hljs-keyword">if</span> (skill == <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JDSException</span>(<span class="hljs-string">"Skill ä¸å­˜åœ¨: "</span> + skillName);
        }
        
        <span class="hljs-comment">// 1. åŠ è½½ Skill ä¸Šä¸‹æ–‡</span>
        <span class="hljs-type">SkillContext</span> <span class="hljs-variable">context</span> <span class="hljs-operator">=</span> skill.load();
        
        <span class="hljs-comment">// 2. åº”ç”¨å‚æ•°</span>
        context.applyParams(params);
        
        <span class="hljs-comment">// 3. æ‰§è¡Œ Skill</span>
        <span class="hljs-type">SkillResult</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> skill.execute(context);
        
        <span class="hljs-keyword">return</span> result;
    }
    
    <span class="hljs-keyword">public</span> List&lt;SkillAction&gt; <span class="hljs-title function_">getAllActions</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> skills.values().stream()
                .flatMap(skill -&gt; skill.getActions().stream())
                .collect(Collectors.toList());
    }
}
</code></pre>
<h2 data-id="heading-26">å››ã€Trae Solo Skill æ„å»ºå®è·µ</h2>
<h3 data-id="heading-27">4.1 Trae Solo ç¯å¢ƒé…ç½®</h3>
<h4 data-id="heading-28">4.1.1 é¡¹ç›®ç»“æ„</h4>
<pre><code class="hljs language-bash" lang="bash">trae-solo-project/
â”œâ”€â”€ .trae/
â”‚   â”œâ”€â”€ rules/
â”‚   â”‚   â”œâ”€â”€ project_rules.md       <span class="hljs-comment"># é¡¹ç›®è§„åˆ™</span>
â”‚   â”‚   â””â”€â”€ skill_rules.md        <span class="hljs-comment"># Skill è§„åˆ™</span>
â”‚   â””â”€â”€ skills/
â”‚       â”œâ”€â”€ foundation-skill.md    <span class="hljs-comment"># Foundation Skill</span>
â”‚       â”œâ”€â”€ module-skill.md        <span class="hljs-comment"># Module Skill</span>
â”‚       â”œâ”€â”€ component-skill.md     <span class="hljs-comment"># Component Skill</span>
â”‚       â””â”€â”€ metadata-skill.md      <span class="hljs-comment"># Metadata Skill</span>
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main/
â”‚   â”‚   â”œâ”€â”€ java/
â”‚   â”‚   â”‚   â””â”€â”€ net/ooder/
â”‚   â”‚   â”‚       â””â”€â”€ engine/
â”‚   â”‚   â”‚           â”œâ”€â”€ codegen/    <span class="hljs-comment"># ä»£ç ç”Ÿæˆå™¨</span>
â”‚   â”‚   â”‚           â””â”€â”€ ub/         <span class="hljs-comment"># BridgeCode</span>
â”‚   â”‚   â””â”€â”€ resources/
â”‚   â”‚       â””â”€â”€ templates/   <span class="hljs-comment"># Freemarker æ¨¡æ¿</span>
â”‚   â””â”€â”€ <span class="hljs-built_in">test</span>/
â”‚       â””â”€â”€ java/
â”‚           â””â”€â”€ net/ooder/
â”‚               â””â”€â”€ engine/
â”‚                   â””â”€â”€ codegen/
â””â”€â”€ pom.xml
</code></pre>
<h4 data-id="heading-29">4.1.2 é…ç½®æ–‡ä»¶</h4>
<p><strong>.trae/rules/project_rules.md</strong>ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># Trae Solo é¡¹ç›®è§„åˆ™</span>

<span class="hljs-section">## ä»£ç ç”Ÿæˆè§„åˆ™</span>

<span class="hljs-bullet">1.</span> æ‰€æœ‰ç”Ÿæˆçš„ä»£ç å¿…é¡»éµå¾ª Java ç¼–ç è§„èŒƒ
<span class="hljs-bullet">2.</span> ç”Ÿæˆçš„ç±»å¿…é¡»æ·»åŠ  @Generated æ³¨è§£
<span class="hljs-bullet">3.</span> ç”Ÿæˆçš„ä»£ç å¿…é¡»åŒ…å«å®Œæ•´çš„ Javadoc
<span class="hljs-bullet">4.</span> ç”Ÿæˆçš„ä»£ç å¿…é¡»é€šè¿‡ç¼–è¯‘æ£€æŸ¥

<span class="hljs-section">## Skill ä½¿ç”¨è§„åˆ™</span>

<span class="hljs-bullet">1.</span> LLM å¿…é¡»é€šè¿‡ Skill è®¿é—®ä»£ç ç”ŸæˆçŸ¥è¯†
<span class="hljs-bullet">2.</span> LLM ä¸èƒ½ç›´æ¥ä¿®æ”¹ç”Ÿæˆçš„ä»£ç 
<span class="hljs-bullet">3.</span> LLM å¿…é¡»ä½¿ç”¨ Skill æä¾›çš„ Action
<span class="hljs-bullet">4.</span> LLM å¿…é¡»éµå¾ª Skill çš„æ‰§è¡Œé¡ºåº

<span class="hljs-section">## è´¨é‡ä¿è¯è§„åˆ™</span>

<span class="hljs-bullet">1.</span> æ‰€æœ‰ç”Ÿæˆçš„ä»£ç å¿…é¡»ç»è¿‡å•å…ƒæµ‹è¯•
<span class="hljs-bullet">2.</span> æ‰€æœ‰ç”Ÿæˆçš„ä»£ç å¿…é¡»ç»è¿‡é›†æˆæµ‹è¯•
<span class="hljs-bullet">3.</span> æ‰€æœ‰ç”Ÿæˆçš„ä»£ç å¿…é¡»ç»è¿‡ä»£ç å®¡æŸ¥
</code></pre>
<p><strong>.trae/rules/skill_rules.md</strong>ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># Skill è§„åˆ™</span>

<span class="hljs-section">## Skill å®šä¹‰è§„åˆ™</span>

<span class="hljs-bullet">1.</span> æ¯ä¸ª Skill å¿…é¡»å®šä¹‰æ¸…æ™°çš„èŒè´£è¾¹ç•Œ
<span class="hljs-bullet">2.</span> æ¯ä¸ª Skill å¿…é¡»æä¾›å®Œæ•´çš„çŸ¥è¯†å†…å®¹
<span class="hljs-bullet">3.</span> æ¯ä¸ª Skill å¿…é¡»å®šä¹‰å¯æ‰§è¡Œçš„ Action
<span class="hljs-bullet">4.</span> æ¯ä¸ª Skill å¿…é¡»æä¾›ä½¿ç”¨ç¤ºä¾‹

<span class="hljs-section">## Skill åŠ è½½è§„åˆ™</span>

<span class="hljs-bullet">1.</span> Skill å¿…é¡»æ”¯æŒæ‡’åŠ è½½
<span class="hljs-bullet">2.</span> Skill å¿…é¡»æ”¯æŒç¼“å­˜
<span class="hljs-bullet">3.</span> Skill å¿…é¡»æ”¯æŒçƒ­æ›´æ–°
<span class="hljs-bullet">4.</span> Skill å¿…é¡»æ”¯æŒç‰ˆæœ¬ç®¡ç†

<span class="hljs-section">## Skill æ‰§è¡Œè§„åˆ™</span>

<span class="hljs-bullet">1.</span> Skill æ‰§è¡Œå¿…é¡»æ”¯æŒå‚æ•°ä¼ é€’
<span class="hljs-bullet">2.</span> Skill æ‰§è¡Œå¿…é¡»æ”¯æŒä¸Šä¸‹æ–‡ç®¡ç†
<span class="hljs-bullet">3.</span> Skill æ‰§è¡Œå¿…é¡»æ”¯æŒé”™è¯¯å¤„ç†
<span class="hljs-bullet">4.</span> Skill æ‰§è¡Œå¿…é¡»æ”¯æŒç»“æœè¿”å›
</code></pre>
<h3 data-id="heading-30">4.2 Skill å®ç°å®è·µ</h3>
<h4 data-id="heading-31">4.2.1 Foundation Skill å®ç°</h4>
<p><strong>.trae/skills/foundation-skill.md</strong>ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># Foundation Skill</span>

<span class="hljs-section">## æ¦‚è¿°</span>

Foundation Skill æä¾›åŸºç¡€ç»„ä»¶çš„çŸ¥è¯†å’Œç”Ÿæˆèƒ½åŠ›ï¼Œæ˜¯æ‰€æœ‰å…¶ä»– Skill çš„åŸºç¡€ã€‚

<span class="hljs-section">## çŸ¥è¯†å†…å®¹</span>

<span class="hljs-section">### æ ¸å¿ƒç±»</span>

<span class="hljs-section">#### NlpBaseUIComponent</span>

<span class="hljs-code">```java
public abstract class NlpBaseUIComponent extends UIComponent {
    
    private String componentType;
    private boolean initialized;
    
    public abstract void initializeFromNaturalLanguage(String naturalLanguage);
    public abstract void initializeFromConfig(Object config);
    
    public String getComponentType() {
        return componentType;
    }
    
    public boolean isInitialized() {
        return initialized;
    }
}
</span></code></pre>
<p><strong>èŒè´£</strong>ï¼š</p>
<ul>
<li>æä¾›ç»„ä»¶ç±»å‹ç®¡ç†</li>
<li>æä¾›åˆå§‹åŒ–çŠ¶æ€ç®¡ç†</li>
<li>å®šä¹‰æŠ½è±¡åˆå§‹åŒ–æ–¹æ³•</li>
</ul>
<h3 data-id="heading-32">ç”Ÿæˆå™¨</h3>
<h4 data-id="heading-33">GenJavaTask</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">GenJavaTask</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Callable</span>&lt;List&lt;JavaGenSource&gt;&gt; {
    
    <span class="hljs-keyword">protected</span> JavaGenSource javaGen;
    <span class="hljs-keyword">protected</span> CustomViewMeta viewMeta;
    <span class="hljs-keyword">protected</span> String euClassName;
    <span class="hljs-keyword">protected</span> Chrome chrome;
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> List&lt;JavaGenSource&gt; <span class="hljs-title function_">build</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> JDSException;
}
</code></pre>
<p><strong>èŒè´£</strong>ï¼š</p>
<ul>
<li>æä¾›ç»Ÿä¸€çš„ç”Ÿæˆæ¥å£</li>
<li>æä¾›é€šç”¨çš„ç”Ÿæˆå·¥å…·æ–¹æ³•</li>
<li>ç®¡ç†ç”Ÿæˆä¸Šä¸‹æ–‡</li>
</ul>
<h2 data-id="heading-34">å¯æ‰§è¡Œ Action</h2>
<h3 data-id="heading-35">create-base-component</h3>
<p><strong>æè¿°</strong>ï¼šåˆ›å»ºåŸºç¡€ç»„ä»¶</p>
<p><strong>å‚æ•°</strong>ï¼š</p>
<ul>
<li><code>componentType</code>ï¼šç»„ä»¶ç±»å‹</li>
<li><code>className</code>ï¼šç±»å</li>
<li><code>packageName</code>ï¼šåŒ…å</li>
</ul>
<p><strong>æ‰§è¡Œæµç¨‹</strong>ï¼š</p>
<ol>
<li>éªŒè¯å‚æ•°</li>
<li>åˆ›å»º NlpBaseUIComponent å­ç±»</li>
<li>ç”Ÿæˆåˆå§‹åŒ–æ–¹æ³•</li>
<li>è¿”å›ç”Ÿæˆçš„ä»£ç </li>
</ol>
<p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp">ç”¨æˆ·ï¼šåˆ›å»ºä¸€ä¸ªåŸºç¡€ç»„ä»¶
LLMï¼šä½¿ç”¨ Foundation Skill çš„ create-<span class="hljs-keyword">base</span>-component Action
å‚æ•°ï¼š{<span class="hljs-string">"componentType"</span>: <span class="hljs-string">"CUSTOM"</span>, <span class="hljs-string">"className"</span>: <span class="hljs-string">"MyComponent"</span>, <span class="hljs-string">"packageName"</span>: <span class="hljs-string">"net.ooder.example"</span>}
ç»“æœï¼šç”Ÿæˆ MyComponent.java
</code></pre>
<h3 data-id="heading-36">initialize-component</h3>
<p><strong>æè¿°</strong>ï¼šåˆå§‹åŒ–ç»„ä»¶</p>
<p><strong>å‚æ•°</strong>ï¼š</p>
<ul>
<li><code>component</code>ï¼šç»„ä»¶å®ä¾‹</li>
<li><code>config</code>ï¼šé…ç½®å¯¹è±¡</li>
</ul>
<p><strong>æ‰§è¡Œæµç¨‹</strong>ï¼š</p>
<ol>
<li>éªŒè¯é…ç½®</li>
<li>è°ƒç”¨ initializeFromConfig æ–¹æ³•</li>
<li>è®¾ç½®åˆå§‹åŒ–çŠ¶æ€</li>
<li>è¿”å›åˆå§‹åŒ–ç»“æœ</li>
</ol>
<p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-json" lang="json">ç”¨æˆ·ï¼šåˆå§‹åŒ–ç»„ä»¶
LLMï¼šä½¿ç”¨ Foundation Skill çš„ initialize-component Action
å‚æ•°ï¼š<span class="hljs-punctuation">{</span><span class="hljs-attr">"component"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"myComponent"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"config"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"FORM"</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">}</span>
ç»“æœï¼šç»„ä»¶åˆå§‹åŒ–å®Œæˆ
</code></pre>
<h3 data-id="heading-37">validate-component</h3>
<p><strong>æè¿°</strong>ï¼šéªŒè¯ç»„ä»¶</p>
<p><strong>å‚æ•°</strong>ï¼š</p>
<ul>
<li><code>component</code>ï¼šç»„ä»¶å®ä¾‹</li>
</ul>
<p><strong>æ‰§è¡Œæµç¨‹</strong>ï¼š</p>
<ol>
<li>æ£€æŸ¥ç»„ä»¶ç±»å‹</li>
<li>æ£€æŸ¥åˆå§‹åŒ–çŠ¶æ€</li>
<li>æ£€æŸ¥é…ç½®å®Œæ•´æ€§</li>
<li>è¿”å›éªŒè¯ç»“æœ</li>
</ol>
<p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-json" lang="json">ç”¨æˆ·ï¼šéªŒè¯ç»„ä»¶
LLMï¼šä½¿ç”¨ Foundation Skill çš„ validate-component Action
å‚æ•°ï¼š<span class="hljs-punctuation">{</span><span class="hljs-attr">"component"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"myComponent"</span><span class="hljs-punctuation">}</span>
ç»“æœï¼šéªŒè¯é€šè¿‡
</code></pre>
<h2 data-id="heading-38">ä½¿ç”¨åœºæ™¯</h2>
<h3 data-id="heading-39">åœºæ™¯ 1ï¼šåˆ›å»ºè‡ªå®šä¹‰åŸºç¡€ç»„ä»¶</h3>
<pre><code class="hljs language-markdown" lang="markdown">ç”¨æˆ·éœ€æ±‚ï¼šåˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰åŸºç¡€ç»„ä»¶
LLM å¤„ç†ï¼š
<span class="hljs-bullet">1.</span> åŠ è½½ Foundation Skill
<span class="hljs-bullet">2.</span> è°ƒç”¨ create-base-component Action
<span class="hljs-bullet">3.</span> ç”Ÿæˆç»„ä»¶ä»£ç 
<span class="hljs-bullet">4.</span> è¿”å›ç”Ÿæˆçš„ä»£ç 
</code></pre>
<h3 data-id="heading-40">åœºæ™¯ 2ï¼šåˆå§‹åŒ–ç°æœ‰ç»„ä»¶</h3>
<pre><code class="hljs language-markdown" lang="markdown">ç”¨æˆ·éœ€æ±‚ï¼šåˆå§‹åŒ–ä¸€ä¸ªç°æœ‰ç»„ä»¶
LLM å¤„ç†ï¼š
<span class="hljs-bullet">1.</span> åŠ è½½ Foundation Skill
<span class="hljs-bullet">2.</span> è°ƒç”¨ initialize-component Action
<span class="hljs-bullet">3.</span> æ‰§è¡Œåˆå§‹åŒ–é€»è¾‘
<span class="hljs-bullet">4.</span> è¿”å›åˆå§‹åŒ–ç»“æœ
</code></pre>
<h2 data-id="heading-41">æœ€ä½³å®è·µ</h2>
<ol>
<li><strong>ä¼˜å…ˆä½¿ç”¨ Foundation Skill</strong>ï¼šæ‰€æœ‰åŸºç¡€æ“ä½œéƒ½åº”è¯¥é€šè¿‡ Foundation Skill å®Œæˆ</li>
<li><strong>éµå¾ªåˆå§‹åŒ–æµç¨‹</strong>ï¼šç¡®ä¿ç»„ä»¶æ­£ç¡®åˆå§‹åŒ–</li>
<li><strong>éªŒè¯ç»„ä»¶çŠ¶æ€</strong>ï¼šåœ¨æ‰§è¡Œæ“ä½œå‰éªŒè¯ç»„ä»¶çŠ¶æ€</li>
<li><strong>å¤„ç†åˆå§‹åŒ–é”™è¯¯</strong>ï¼šæä¾›æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯</li>
</ol>
<pre><code class="hljs language-ini" lang="ini">
<span class="hljs-comment">#### 4.2.2 Module Skill å®ç°</span>

**.trae/skills/module-skill.md**ï¼š

```markdown
<span class="hljs-comment"># Module Skill</span>

<span class="hljs-comment">## æ¦‚è¿°</span>

Module Skill æä¾›æ¨¡å—ç»„ä»¶çš„çŸ¥è¯†å’Œç”Ÿæˆèƒ½åŠ›ï¼Œç®¡ç†ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸå’Œä¾èµ–å…³ç³»ã€‚

<span class="hljs-comment">## çŸ¥è¯†å†…å®¹</span>

<span class="hljs-comment">### æ ¸å¿ƒç±»</span>

<span class="hljs-comment">#### ModuleUIComponent</span>

```java
public class ModuleUIComponent&lt;M extends UIComponent&gt; extends UIComponent&lt;ModuleProperties, ModuleEventEnum&gt; {
    
    private String className<span class="hljs-comment">;</span>
    private String desc<span class="hljs-comment">;</span>
    private ModuleViewType moduleViewType<span class="hljs-comment">;</span>
    private Map&lt;String, Object&gt; valueMap<span class="hljs-comment">;</span>
    private UIModule UIModule<span class="hljs-comment">;</span>
    private CustomModuleMeta moduleBean<span class="hljs-comment">;</span>
    private MethodConfig methodAPIBean<span class="hljs-comment">;</span>
    private DomainInst domainInst<span class="hljs-comment">;</span>
    private ModuleProperties properties<span class="hljs-comment">;</span>
    private M currComponent<span class="hljs-comment">;</span>
    private UIComponent navUIComponent<span class="hljs-comment">;</span>
    private ModuleViewConfig viewConfig<span class="hljs-comment">;</span>
    private List&lt;String&gt; dependencies<span class="hljs-comment">;</span>
    private List&lt;String&gt; required<span class="hljs-comment">;</span>
    private Map&lt;String, ModuleFunction&gt; functions<span class="hljs-comment">;</span>
    private List&lt;ModuleFormulaInst&gt; formulas<span class="hljs-comment">;</span>
    private Map&lt;String, String&gt; customFunctions<span class="hljs-comment">;</span>
    private String customAppend<span class="hljs-comment">;</span>
    private String afterAppend<span class="hljs-comment">;</span>
    private Map&lt;String, String&gt; moduleVar<span class="hljs-comment">;</span>
    private Map&lt;String, UIComponent&gt; components<span class="hljs-comment">;</span>
    
    public void setCurrComponent(M currComponent) {
        <span class="hljs-attr">this.currComponent</span> = currComponent<span class="hljs-comment">;</span>
        if (currComponent != null) {
            <span class="hljs-attr">this.currComponentAlias</span> = currComponent.getAlias()<span class="hljs-comment">;</span>
            if (currComponent.getParent() == null) {
                currComponent.setParent(this)<span class="hljs-comment">;</span>
            }
            this.components.put(currComponentAlias, currComponent)<span class="hljs-comment">;</span>
            ComponentType <span class="hljs-attr">type</span> = ComponentType.fromType(currComponent.getKey())<span class="hljs-comment">;</span>
            <span class="hljs-attr">moduleViewType</span> = ModuleViewType.getModuleViewByCom(type)<span class="hljs-comment">;</span>
            properties.setCurrComponentAlias(currComponentAlias)<span class="hljs-comment">;</span>
        } else {
            <span class="hljs-attr">this.currComponentAlias</span> = null<span class="hljs-comment">;</span>
            properties.setCurrComponentAlias(null)<span class="hljs-comment">;</span>
        }
    }
    
    public UIComponent findComponentByAlias(String alias) {
        List&lt;UIComponent&gt; <span class="hljs-attr">UIComponentList</span> = this.findComponentsByAlias(alias)<span class="hljs-comment">;</span>
        UIComponent <span class="hljs-attr">UIComponent</span> = null<span class="hljs-comment">;</span>
        if (UIComponentList.size() &gt; 0) {
            <span class="hljs-attr">UIComponent</span> = UIComponentList.get(<span class="hljs-number">0</span>)<span class="hljs-comment">;</span>
        }
        return UIComponent<span class="hljs-comment">;</span>
    }
}
</code></pre>
<p><strong>èŒè´£</strong>ï¼š</p>
<ul>
<li>ç®¡ç†æ¨¡å—ç”Ÿå‘½å‘¨æœŸ</li>
<li>ç®¡ç†ç»„ä»¶ä¾èµ–</li>
<li>æä¾›ç»„ä»¶æŸ¥æ‰¾åŠŸèƒ½</li>
<li>å¤„ç†æ¨¡å—äº‹ä»¶</li>
</ul>
<h3 data-id="heading-42">ç”Ÿæˆå™¨</h3>
<h4 data-id="heading-43">GenRepositoryViewJava</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">GenRepositoryViewJava</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">GenJavaTask</span> {
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> List&lt;JavaGenSource&gt; <span class="hljs-title function_">build</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> JDSException {
        List&lt;JavaGenSource&gt; sources = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
        
        <span class="hljs-comment">// 1. ç”Ÿæˆ VO æ¥å£</span>
        sources.add(generateVOInterface());
        
        <span class="hljs-comment">// 2. ç”Ÿæˆ Service æ¥å£</span>
        sources.add(generateServiceInterface());
        
        <span class="hljs-comment">// 3. ç”Ÿæˆ Repository æ¥å£</span>
        sources.add(generateRepositoryInterface());
        
        <span class="hljs-comment">// 4. ç”Ÿæˆ RepositoryImpl å®ç°</span>
        sources.add(generateRepositoryImpl());
        
        <span class="hljs-keyword">return</span> sources;
    }
}
</code></pre>
<p><strong>èŒè´£</strong>ï¼š</p>
<ul>
<li>ç”Ÿæˆä»“å‚¨å±‚ä»£ç </li>
<li>ç”ŸæˆæœåŠ¡å±‚ä»£ç </li>
<li>ç”Ÿæˆæ•°æ®è®¿é—®å¯¹è±¡</li>
<li>ç®¡ç†ä¾èµ–å…³ç³»</li>
</ul>
<h2 data-id="heading-44">å¯æ‰§è¡Œ Action</h2>
<h3 data-id="heading-45">create-module</h3>
<p><strong>æè¿°</strong>ï¼šåˆ›å»ºæ¨¡å—</p>
<p><strong>å‚æ•°</strong>ï¼š</p>
<ul>
<li><code>moduleName</code>ï¼šæ¨¡å—åç§°</li>
<li><code>className</code>ï¼šç±»å</li>
<li><code>packageName</code>ï¼šåŒ…å</li>
<li><code>components</code>ï¼šç»„ä»¶åˆ—è¡¨</li>
</ul>
<p><strong>æ‰§è¡Œæµç¨‹</strong>ï¼š</p>
<ol>
<li>éªŒè¯å‚æ•°</li>
<li>åˆ›å»º ModuleUIComponent å­ç±»</li>
<li>ç”Ÿæˆä»“å‚¨å±‚ä»£ç </li>
<li>ç»‘å®šç»„ä»¶</li>
<li>è¿”å›ç”Ÿæˆçš„ä»£ç </li>
</ol>
<p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-sql" lang="sql">ç”¨æˆ·ï¼šåˆ›å»ºä¸€ä¸ªæ¨¡å—
LLMï¼šä½¿ç”¨ <span class="hljs-keyword">Module</span> Skill çš„ <span class="hljs-keyword">create</span><span class="hljs-operator">-</span><span class="hljs-keyword">module</span> Action
å‚æ•°ï¼š{"moduleName": "UserModule", "className": "UserModule", "packageName": "net.ooder.example", "components": ["grid", "form"]}
ç»“æœï¼šç”Ÿæˆ UserModule.java å’Œç›¸å…³ä»“å‚¨ä»£ç 
</code></pre>
<h3 data-id="heading-46">bind-component</h3>
<p><strong>æè¿°</strong>ï¼šç»‘å®šç»„ä»¶</p>
<p><strong>å‚æ•°</strong>ï¼š</p>
<ul>
<li><code>module</code>ï¼šæ¨¡å—å®ä¾‹</li>
<li><code>component</code>ï¼šç»„ä»¶å®ä¾‹</li>
<li><code>alias</code>ï¼šç»„ä»¶åˆ«å</li>
</ul>
<p><strong>æ‰§è¡Œæµç¨‹</strong>ï¼š</p>
<ol>
<li>éªŒè¯æ¨¡å—å’Œç»„ä»¶</li>
<li>è°ƒç”¨ setCurrComponent æ–¹æ³•</li>
<li>æ›´æ–°ç»„ä»¶ä¾èµ–</li>
<li>è¿”å›ç»‘å®šç»“æœ</li>
</ol>
<p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-perl" lang="perl">ç”¨æˆ·ï¼šç»‘å®šç»„ä»¶
LLMï¼šä½¿ç”¨ Module Skill çš„ <span class="hljs-keyword">bind</span>-component Action
å‚æ•°ï¼š{<span class="hljs-string">"module"</span>: <span class="hljs-string">"userModule"</span>, <span class="hljs-string">"component"</span>: <span class="hljs-string">"userGrid"</span>, <span class="hljs-string">"alias"</span>: <span class="hljs-string">"grid"</span>}
ç»“æœï¼šç»„ä»¶ç»‘å®šå®Œæˆ
</code></pre>
<h3 data-id="heading-47">manage-lifecycle</h3>
<p><strong>æè¿°</strong>ï¼šç®¡ç†ç”Ÿå‘½å‘¨æœŸ</p>
<p><strong>å‚æ•°</strong>ï¼š</p>
<ul>
<li><code>module</code>ï¼šæ¨¡å—å®ä¾‹</li>
<li><code>action</code>ï¼šç”Ÿå‘½å‘¨æœŸåŠ¨ä½œï¼ˆinit/destroyï¼‰</li>
</ul>
<p><strong>æ‰§è¡Œæµç¨‹</strong>ï¼š</p>
<ol>
<li>éªŒè¯æ¨¡å—çŠ¶æ€</li>
<li>æ‰§è¡Œç”Ÿå‘½å‘¨æœŸåŠ¨ä½œ</li>
<li>è§¦å‘ç”Ÿå‘½å‘¨æœŸäº‹ä»¶</li>
<li>è¿”å›æ‰§è¡Œç»“æœ</li>
</ol>
<p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-sql" lang="sql">ç”¨æˆ·ï¼šåˆå§‹åŒ–æ¨¡å—
LLMï¼šä½¿ç”¨ <span class="hljs-keyword">Module</span> Skill çš„ manage<span class="hljs-operator">-</span>lifecycle Action
å‚æ•°ï¼š{"module": "userModule", "action": "init"}
ç»“æœï¼šæ¨¡å—åˆå§‹åŒ–å®Œæˆ
</code></pre>
<h2 data-id="heading-48">ä½¿ç”¨åœºæ™¯</h2>
<h3 data-id="heading-49">åœºæ™¯ 1ï¼šåˆ›å»ºç”¨æˆ·ç®¡ç†æ¨¡å—</h3>
<pre><code class="hljs language-markdown" lang="markdown">ç”¨æˆ·éœ€æ±‚ï¼šåˆ›å»ºä¸€ä¸ªç”¨æˆ·ç®¡ç†æ¨¡å—
LLM å¤„ç†ï¼š
<span class="hljs-bullet">1.</span> åŠ è½½ Module Skill
<span class="hljs-bullet">2.</span> è°ƒç”¨ create-module Action
<span class="hljs-bullet">3.</span> ç”Ÿæˆæ¨¡å—ä»£ç å’Œä»“å‚¨ä»£ç 
<span class="hljs-bullet">4.</span> è¿”å›ç”Ÿæˆçš„ä»£ç 
</code></pre>
<h3 data-id="heading-50">åœºæ™¯ 2ï¼šç»‘å®šç½‘æ ¼ç»„ä»¶åˆ°æ¨¡å—</h3>
<pre><code class="hljs language-markdown" lang="markdown">ç”¨æˆ·éœ€æ±‚ï¼šç»‘å®šç½‘æ ¼ç»„ä»¶åˆ°æ¨¡å—
LLM å¤„ç†ï¼š
<span class="hljs-bullet">1.</span> åŠ è½½ Module Skill
<span class="hljs-bullet">2.</span> è°ƒç”¨ bind-component Action
<span class="hljs-bullet">3.</span> æ‰§è¡Œç»‘å®šé€»è¾‘
<span class="hljs-bullet">4.</span> è¿”å›ç»‘å®šç»“æœ
</code></pre>
<h2 data-id="heading-51">æœ€ä½³å®è·µ</h2>
<ol>
<li><strong>ä½¿ç”¨æ¨¡å—åŒ–è®¾è®¡</strong>ï¼šå°†åŠŸèƒ½åˆ†è§£ä¸ºç‹¬ç«‹çš„æ¨¡å—</li>
<li><strong>ç®¡ç†ç»„ä»¶ä¾èµ–</strong>ï¼šæ˜ç¡®ç»„ä»¶ä¹‹é—´çš„ä¾èµ–å…³ç³»</li>
<li><strong>å®ç°ç”Ÿå‘½å‘¨æœŸç®¡ç†</strong>ï¼šæä¾›å®Œæ•´çš„ç”Ÿå‘½å‘¨æœŸæ”¯æŒ</li>
<li><strong>ä½¿ç”¨ä»“å‚¨æ¨¡å¼</strong>ï¼šåˆ†ç¦»æ•°æ®è®¿é—®é€»è¾‘</li>
</ol>
<pre><code class="hljs language-scala" lang="scala">
#### <span class="hljs-number">4.2</span><span class="hljs-number">.3</span> <span class="hljs-type">Component</span> <span class="hljs-type">Skill</span> å®ç°

**.trae/skills/component-skill.md**ï¼š

```markdown
# <span class="hljs-type">Component</span> <span class="hljs-type">Skill</span>

## æ¦‚è¿°

<span class="hljs-type">Component</span> <span class="hljs-type">Skill</span> æä¾›å…·ä½“ç»„ä»¶çš„çŸ¥è¯†å’Œç”Ÿæˆèƒ½åŠ›ï¼ŒåŒ…æ‹¬åˆ†ç»„ç»„ä»¶ã€ç½‘æ ¼ç»„ä»¶ã€æ ‘å½¢ç»„ä»¶ç­‰ã€‚

## çŸ¥è¯†å†…å®¹

### æ ¸å¿ƒç±»

#### <span class="hljs-type">NlpGroupUIComponent</span>

```java
public <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">NlpGroupUIComponent&lt;M</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">CustomFieldGroupUIComponent&gt;</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">CustomModuleUIComponent&lt;M&gt;</span> </span>{
    
    void init(<span class="hljs-type">MethodConfig</span> methodConfig) <span class="hljs-keyword">throws</span> <span class="hljs-type">JDSException</span> {
        <span class="hljs-type">CustomGroupFormViewMeta</span> viewBean = (<span class="hljs-type">CustomGroupFormViewMeta</span>) methodConfig.getView();
        <span class="hljs-type">CustomGroupDataMeta</span> dataBean = (<span class="hljs-type">CustomGroupDataMeta</span>) methodConfig.getDataBean();
        <span class="hljs-keyword">if</span> (dataBean != <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">this</span>.dataUrl = dataBean.getDataUrl();
            <span class="hljs-keyword">this</span>.saveUrl = dataBean.getSaveUrl();
            <span class="hljs-keyword">this</span>.searchUrl = dataBean.getSearchUrl();
            <span class="hljs-keyword">this</span>.reSetUrl = dataBean.getReSetUrl();
        }
        <span class="hljs-type">CustomFieldGroupUIComponent</span> currComponent = <span class="hljs-keyword">new</span> <span class="hljs-type">CustomFieldGroupUIComponent</span>(<span class="hljs-type">UIModule</span>, methodConfig, valueMap);
        <span class="hljs-keyword">this</span>.addChildLayoutNav(currComponent);
        <span class="hljs-keyword">this</span>.setCurrComponent((<span class="hljs-type">M</span>) currComponent);
        
        <span class="hljs-keyword">this</span>.fillAction(viewBean);
        <span class="hljs-keyword">this</span>.fillToolBar(viewBean.getToolBar(), currComponent);
        <span class="hljs-keyword">this</span>.fillContextAction(viewBean.getContextMenuBean(), currComponent);
        
        <span class="hljs-keyword">if</span> (viewBean.getOnReady() != <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">for</span> (<span class="hljs-type">ModuleOnReadyEventEnum</span> eventEnum : viewBean.getOnReady()) {
                <span class="hljs-keyword">this</span>.addModuleEvent(eventEnum);
            }
        }
        
        <span class="hljs-keyword">if</span> (viewBean.getOnDestroy() != <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">for</span> (<span class="hljs-type">CustomOnDestroyEventEnum</span> eventEnum : viewBean.getOnDestroy()) {
                <span class="hljs-keyword">this</span>.addModuleEvent(eventEnum);
            }
        }
    }
}
</code></pre>
<p><strong>èŒè´£</strong>ï¼š</p>
<ul>
<li>ç®¡ç†åˆ†ç»„å­—æ®µ</li>
<li>å¤„ç†åˆ†ç»„äº‹ä»¶</li>
<li>ç”Ÿæˆ API è°ƒç”¨</li>
<li>ç®¡ç†å·¥å…·æ å’Œä¸Šä¸‹æ–‡èœå•</li>
</ul>
<h4 data-id="heading-52">NlpGridUIComponent</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">NlpGridUIComponent</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">CustomGridUIComponent</span> {
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">NlpGridUIComponent</span><span class="hljs-params">(MethodConfig methodConfig)</span> {
        <span class="hljs-built_in">super</span>();
        <span class="hljs-type">CustomGridViewMeta</span> <span class="hljs-variable">viewBean</span> <span class="hljs-operator">=</span> (CustomGridViewMeta) methodConfig.getView();
        init(viewBean);
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">NlpGridUIComponent</span><span class="hljs-params">(CustomGridViewMeta viewBean)</span> {
        <span class="hljs-built_in">super</span>();
        init(viewBean);
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">init</span><span class="hljs-params">(CustomGridViewMeta viewBean)</span> {
        <span class="hljs-built_in">this</span>.setProperties(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ClassGridProperties</span>(viewBean));
        <span class="hljs-built_in">this</span>.setAlias(viewBean.getName());
    }
}
</code></pre>
<p><strong>èŒè´£</strong>ï¼š</p>
<ul>
<li>ç®¡ç†ç½‘æ ¼æ•°æ®</li>
<li>å¤„ç†ç½‘æ ¼äº‹ä»¶</li>
<li>æä¾›ç½‘æ ¼äº¤äº’</li>
<li>æ”¯æŒåˆ†é¡µå’Œæ’åº</li>
</ul>
<h3 data-id="heading-53">ç”Ÿæˆå™¨</h3>
<h4 data-id="heading-54">GenCustomViewJava</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">GenCustomViewJava</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">GenJavaTask</span> {
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> List&lt;JavaGenSource&gt; <span class="hljs-title function_">build</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> JDSException {
        List&lt;JavaGenSource&gt; sources = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
        
        <span class="hljs-comment">// 1. ç”Ÿæˆè§†å›¾ç±»</span>
        sources.add(generateViewClass());
        
        <span class="hljs-comment">// 2. ç”Ÿæˆå­—æ®µé…ç½®</span>
        sources.add(generateFieldConfigs());
        
        <span class="hljs-comment">// 3. ç”Ÿæˆäº‹ä»¶å¤„ç†å™¨</span>
        sources.add(generateEventHandlers());
        
        <span class="hljs-keyword">return</span> sources;
    }
}
</code></pre>
<p><strong>èŒè´£</strong>ï¼š</p>
<ul>
<li>ç”Ÿæˆè§†å›¾å±‚ä»£ç </li>
<li>ç”Ÿæˆå­—æ®µé…ç½®</li>
<li>ç”Ÿæˆäº‹ä»¶å¤„ç†å™¨</li>
<li>ç®¡ç†è§†å›¾ä¾èµ–</li>
</ul>
<h2 data-id="heading-55">å¯æ‰§è¡Œ Action</h2>
<h3 data-id="heading-56">create-group</h3>
<p><strong>æè¿°</strong>ï¼šåˆ›å»ºåˆ†ç»„ç»„ä»¶</p>
<p><strong>å‚æ•°</strong>ï¼š</p>
<ul>
<li><code>groupName</code>ï¼šåˆ†ç»„åç§°</li>
<li><code>fields</code>ï¼šå­—æ®µåˆ—è¡¨</li>
<li><code>events</code>ï¼šäº‹ä»¶åˆ—è¡¨</li>
</ul>
<p><strong>æ‰§è¡Œæµç¨‹</strong>ï¼š</p>
<ol>
<li>éªŒè¯å‚æ•°</li>
<li>åˆ›å»º NlpGroupUIComponent å®ä¾‹</li>
<li>ç”Ÿæˆè§†å›¾ä»£ç </li>
<li>ç”Ÿæˆä»“å‚¨ä»£ç </li>
<li>è¿”å›ç”Ÿæˆçš„ä»£ç </li>
</ol>
<p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-sql" lang="sql">ç”¨æˆ·ï¼šåˆ›å»ºä¸€ä¸ªåˆ†ç»„ç»„ä»¶
LLMï¼šä½¿ç”¨ Component Skill çš„ <span class="hljs-keyword">create</span><span class="hljs-operator">-</span><span class="hljs-keyword">group</span> Action
å‚æ•°ï¼š{"groupName": "UserGroup", "fields": [...], "events": [...]}
ç»“æœï¼šç”Ÿæˆ UserGroup.java å’Œç›¸å…³ä»£ç 
</code></pre>
<h3 data-id="heading-57">create-grid</h3>
<p><strong>æè¿°</strong>ï¼šåˆ›å»ºç½‘æ ¼ç»„ä»¶</p>
<p><strong>å‚æ•°</strong>ï¼š</p>
<ul>
<li><code>gridName</code>ï¼šç½‘æ ¼åç§°</li>
<li><code>columns</code>ï¼šåˆ—é…ç½®</li>
<li><code>dataUrl</code>ï¼šæ•°æ® URL</li>
</ul>
<p><strong>æ‰§è¡Œæµç¨‹</strong>ï¼š</p>
<ol>
<li>éªŒè¯å‚æ•°</li>
<li>åˆ›å»º NlpGridUIComponent å®ä¾‹</li>
<li>ç”Ÿæˆè§†å›¾ä»£ç </li>
<li>ç”Ÿæˆä»“å‚¨ä»£ç </li>
<li>è¿”å›ç”Ÿæˆçš„ä»£ç </li>
</ol>
<p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-css" lang="css">ç”¨æˆ·ï¼šåˆ›å»ºä¸€ä¸ªç½‘æ ¼ç»„ä»¶
LLMï¼šä½¿ç”¨ Component Skill çš„ create-<span class="hljs-attribute">grid</span> Action
å‚æ•°ï¼š{"gridName": <span class="hljs-string">"UserGrid"</span>, <span class="hljs-string">"columns"</span>: [...], <span class="hljs-string">"dataUrl"</span>: <span class="hljs-string">"/api/users"</span>}
ç»“æœï¼šç”Ÿæˆ UserGrid<span class="hljs-selector-class">.java</span> å’Œç›¸å…³ä»£ç 
</code></pre>
<h3 data-id="heading-58">create-tree</h3>
<p><strong>æè¿°</strong>ï¼šåˆ›å»ºæ ‘å½¢ç»„ä»¶</p>
<p><strong>å‚æ•°</strong>ï¼š</p>
<ul>
<li><code>treeName</code>ï¼šæ ‘å½¢åç§°</li>
<li><code>treeField</code>ï¼šæ ‘å­—æ®µ</li>
<li><code>parentField</code>ï¼šçˆ¶å­—æ®µ</li>
</ul>
<p><strong>æ‰§è¡Œæµç¨‹</strong>ï¼š</p>
<ol>
<li>éªŒè¯å‚æ•°</li>
<li>åˆ›å»º TreeGridUIComponent å®ä¾‹</li>
<li>ç”Ÿæˆè§†å›¾ä»£ç </li>
<li>ç”Ÿæˆä»“å‚¨ä»£ç </li>
<li>è¿”å›ç”Ÿæˆçš„ä»£ç </li>
</ol>
<p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-lua" lang="lua">ç”¨æˆ·ï¼šåˆ›å»ºä¸€ä¸ªæ ‘å½¢ç»„ä»¶
LLMï¼šä½¿ç”¨ Component Skill çš„ <span class="hljs-built_in">create</span>-tree Action
å‚æ•°ï¼š{<span class="hljs-string">"treeName"</span>: <span class="hljs-string">"DepartmentTree"</span>, <span class="hljs-string">"treeField"</span>: <span class="hljs-string">"id"</span>, <span class="hljs-string">"parentField"</span>: <span class="hljs-string">"parentId"</span>}
ç»“æœï¼šç”Ÿæˆ DepartmentTree.java å’Œç›¸å…³ä»£ç 
</code></pre>
<h2 data-id="heading-59">ä½¿ç”¨åœºæ™¯</h2>
<h3 data-id="heading-60">åœºæ™¯ 1ï¼šåˆ›å»ºç”¨æˆ·åˆ†ç»„è¡¨å•</h3>
<pre><code class="hljs language-markdown" lang="markdown">ç”¨æˆ·éœ€æ±‚ï¼šåˆ›å»ºä¸€ä¸ªç”¨æˆ·åˆ†ç»„è¡¨å•
LLM å¤„ç†ï¼š
<span class="hljs-bullet">1.</span> åŠ è½½ Component Skill
<span class="hljs-bullet">2.</span> è°ƒç”¨ create-group Action
<span class="hljs-bullet">3.</span> ç”Ÿæˆåˆ†ç»„ç»„ä»¶ä»£ç 
<span class="hljs-bullet">4.</span> è¿”å›ç”Ÿæˆçš„ä»£ç 
</code></pre>
<h3 data-id="heading-61">åœºæ™¯ 2ï¼šåˆ›å»ºç”¨æˆ·æ•°æ®ç½‘æ ¼</h3>
<pre><code class="hljs language-markdown" lang="markdown">ç”¨æˆ·éœ€æ±‚ï¼šåˆ›å»ºä¸€ä¸ªç”¨æˆ·æ•°æ®ç½‘æ ¼
LLM å¤„ç†ï¼š
<span class="hljs-bullet">1.</span> åŠ è½½ Component Skill
<span class="hljs-bullet">2.</span> è°ƒç”¨ create-grid Action
<span class="hljs-bullet">3.</span> ç”Ÿæˆç½‘æ ¼ç»„ä»¶ä»£ç 
<span class="hljs-bullet">4.</span> è¿”å›ç”Ÿæˆçš„ä»£ç 
</code></pre>
<h2 data-id="heading-62">æœ€ä½³å®è·µ</h2>
<ol>
<li><strong>é€‰æ‹©åˆé€‚çš„ç»„ä»¶ç±»å‹</strong>ï¼šæ ¹æ®éœ€æ±‚é€‰æ‹©åˆ†ç»„ã€ç½‘æ ¼æˆ–æ ‘å½¢ç»„ä»¶</li>
<li><strong>é…ç½®å­—æ®µå’Œåˆ—</strong>ï¼šåˆç†é…ç½®å­—æ®µå’Œåˆ—å±æ€§</li>
<li><strong>å¤„ç†äº‹ä»¶å’Œäº¤äº’</strong>ï¼šå®ç°å¿…è¦çš„äº‹ä»¶å¤„ç†å’Œäº¤äº’é€»è¾‘</li>
<li><strong>ä¼˜åŒ–æ€§èƒ½</strong>ï¼šä½¿ç”¨åˆ†é¡µã€æ‡’åŠ è½½ç­‰ä¼˜åŒ–æŠ€æœ¯</li>
</ol>
<pre><code class="hljs language-scala" lang="scala">
#### <span class="hljs-number">4.2</span><span class="hljs-number">.4</span> <span class="hljs-type">Metadata</span> <span class="hljs-type">Skill</span> å®ç°

**.trae/skills/metadata-skill.md**ï¼š

```markdown
# <span class="hljs-type">Metadata</span> <span class="hljs-type">Skill</span>

## æ¦‚è¿°

<span class="hljs-type">Metadata</span> <span class="hljs-type">Skill</span> æä¾›å…ƒæ•°æ®çš„çŸ¥è¯†å’Œç”Ÿæˆèƒ½åŠ›ï¼ŒåŒ…æ‹¬å…ƒæ•°æ®è§£æã€éªŒè¯å’Œä»£ç ç”Ÿæˆã€‚

## çŸ¥è¯†å†…å®¹

### æ ¸å¿ƒç±»

#### <span class="hljs-type">CustomViewMeta</span>

```java
public <span class="hljs-keyword">abstract</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CustomViewMeta&lt;F</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">FieldFormConfig</span>, <span class="hljs-title">I</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">UIItem</span>, <span class="hljs-title">C</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">UIComponent&gt;</span> </span>{
    
    <span class="hljs-keyword">private</span> <span class="hljs-type">String</span> name;
    <span class="hljs-keyword">private</span> <span class="hljs-type">String</span> caption;
    <span class="hljs-keyword">private</span> <span class="hljs-type">String</span> desc;
    <span class="hljs-keyword">private</span> <span class="hljs-type">String</span> methodName;
    <span class="hljs-keyword">private</span> <span class="hljs-type">String</span> domainId;
    <span class="hljs-keyword">private</span> <span class="hljs-type">String</span> sourceClassName;
    <span class="hljs-keyword">private</span> <span class="hljs-type">ModuleViewType</span> moduleViewType;
    <span class="hljs-keyword">private</span> <span class="hljs-type">List</span>&lt;<span class="hljs-type">F</span>&gt; allFields;
    <span class="hljs-keyword">private</span> <span class="hljs-type">List</span>&lt;<span class="hljs-type">F</span>&gt; fields;
    <span class="hljs-keyword">private</span> <span class="hljs-type">List</span>&lt;<span class="hljs-type">Event</span>&gt; events;
    <span class="hljs-keyword">private</span> <span class="hljs-type">List</span>&lt;<span class="hljs-type">MenuItem</span>&gt; menus;
    <span class="hljs-keyword">private</span> <span class="hljs-type">List</span>&lt;<span class="hljs-type">ToolBar</span>&gt; toolBars;
    <span class="hljs-keyword">private</span> <span class="hljs-type">List</span>&lt;<span class="hljs-type">BottomBar</span>&gt; bottomBars;
    <span class="hljs-keyword">private</span> <span class="hljs-type">List</span>&lt;<span class="hljs-type">ContextMenu</span>&gt; contextMenus;
    <span class="hljs-keyword">private</span> <span class="hljs-type">List</span>&lt;<span class="hljs-type">ModuleFormulaInst</span>&gt; formulas;
    <span class="hljs-keyword">private</span> <span class="hljs-type">List</span>&lt;<span class="hljs-type">CustomBean</span>&gt; annotationBeans;
    
    public <span class="hljs-keyword">abstract</span> <span class="hljs-type">F</span> createFieldConfig();
    public <span class="hljs-keyword">abstract</span> <span class="hljs-type">I</span> createUIItem();
    public <span class="hljs-keyword">abstract</span> <span class="hljs-type">C</span> createUIComponent();
    
    public <span class="hljs-type">List</span>&lt;<span class="hljs-type">CustomBean</span>&gt; getAnnotationBeans() {
        <span class="hljs-type">List</span>&lt;<span class="hljs-type">CustomBean</span>&gt; annotationBeans = <span class="hljs-keyword">new</span> <span class="hljs-type">ArrayList</span>&lt;&gt;();
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.getModuleBean() != <span class="hljs-literal">null</span>) {
            annotationBeans.addAll(<span class="hljs-keyword">this</span>.getModuleBean().getAnnotationBeans());
        }
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.getDataBean() != <span class="hljs-literal">null</span>) {
            annotationBeans.add(<span class="hljs-keyword">this</span>.getDataBean());
        }
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.getFieldAggConfig() != <span class="hljs-literal">null</span>) {
            annotationBeans.addAll(<span class="hljs-keyword">this</span>.getFieldAggConfig().getAnnotationBeans());
        }
        <span class="hljs-keyword">return</span> annotationBeans;
    }
}
</code></pre>
<p><strong>èŒè´£</strong>ï¼š</p>
<ul>
<li>å­˜å‚¨è§†å›¾é…ç½®ä¿¡æ¯</li>
<li>ç®¡ç†å­—æ®µå’Œäº‹ä»¶</li>
<li>æ”¯æŒè§†å›¾çš„åŠ¨æ€æ›´æ–°</li>
<li>æä¾›æ³¨è§£ä¿¡æ¯</li>
</ul>
<h4 data-id="heading-63">CustomDataMeta</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CustomDataMeta</span> {
    
    <span class="hljs-keyword">private</span> String dataUrl;
    <span class="hljs-keyword">private</span> String editorPath;
    <span class="hljs-keyword">private</span> String addPath;
    <span class="hljs-keyword">private</span> String delPath;
    <span class="hljs-keyword">private</span> String sortPath;
    <span class="hljs-keyword">private</span> String saveRowPath;
    <span class="hljs-keyword">private</span> String saveAllRowPath;
    <span class="hljs-keyword">private</span> String searchUrl;
    <span class="hljs-keyword">private</span> String reloadUrl;
    <span class="hljs-keyword">private</span> String selectUrl;
    <span class="hljs-keyword">private</span> String unSelectUrl;
    <span class="hljs-keyword">private</span> String selectAllUrl;
    <span class="hljs-keyword">private</span> String unSelectAllUrl;
    <span class="hljs-keyword">private</span> String exportUrl;
    <span class="hljs-keyword">private</span> String importUrl;
    <span class="hljs-keyword">private</span> String customUrl;
}
</code></pre>
<p><strong>èŒè´£</strong>ï¼š</p>
<ul>
<li>å­˜å‚¨æ•°æ®é…ç½®ä¿¡æ¯</li>
<li>ç®¡ç†æ•°æ® URL å’Œè·¯å¾„</li>
<li>æ”¯æŒæ•°æ®çš„åŠ¨æ€é…ç½®</li>
<li>æä¾›æ•°æ®è®¿é—®æ¥å£</li>
</ul>
<h4 data-id="heading-64">MethodConfig</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MethodConfig</span>&lt;T <span class="hljs-keyword">extends</span> <span class="hljs-title class_">CustomViewMeta</span>, K <span class="hljs-keyword">extends</span> <span class="hljs-title class_">CustomDataMeta</span>&gt; <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Comparable</span>&lt;MethodConfig&gt; {
    
    <span class="hljs-keyword">private</span> String className;
    <span class="hljs-keyword">private</span> String desc;
    <span class="hljs-keyword">private</span> ModuleViewType moduleViewType;
    <span class="hljs-keyword">private</span> UIModule UIModule;
    <span class="hljs-keyword">private</span> CustomModuleMeta moduleBean;
    <span class="hljs-keyword">private</span> MethodConfig methodAPIBean;
    <span class="hljs-keyword">private</span> DomainInst domainInst;
    <span class="hljs-keyword">private</span> T view;
    <span class="hljs-keyword">private</span> K dataBean;
    <span class="hljs-keyword">private</span> BridgeClass bridgeClass;
    <span class="hljs-keyword">private</span> BridgeClass parentClass;
    <span class="hljs-keyword">private</span> String url;
    <span class="hljs-keyword">private</span> String caption;
    <span class="hljs-keyword">private</span> String methodName;
    <span class="hljs-keyword">private</span> String expression;
    <span class="hljs-keyword">private</span> String filter;
    <span class="hljs-keyword">private</span> String itemsExpression;
    <span class="hljs-keyword">private</span> String metaInfo;
    <span class="hljs-keyword">private</span> String fieldInfo;
    <span class="hljs-keyword">private</span> RequestMappingBean requestMapping;
    <span class="hljs-keyword">private</span> RequestBodyBean requestBody;
    <span class="hljs-keyword">private</span> Set&lt;RequestParamBean&gt; paramSet;
    <span class="hljs-keyword">private</span> RouteMenuMeta routeMenuBean;
    <span class="hljs-keyword">private</span> FieldAggConfig fieldAggConfig;
    <span class="hljs-keyword">private</span> CustomFieldMeta FieldMeta;
    <span class="hljs-keyword">private</span> RefBean refBean;
    <span class="hljs-keyword">private</span> CustomAPICallMeta api;
    <span class="hljs-keyword">private</span> List&lt;CustomBean&gt; annotationBeans;
    
    <span class="hljs-keyword">public</span> List&lt;CustomBean&gt; <span class="hljs-title function_">getAnnotationBeans</span><span class="hljs-params">()</span> {
        List&lt;CustomBean&gt; annotationBeans = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.getApi() != <span class="hljs-literal">null</span>) {
            annotationBeans.addAll(<span class="hljs-built_in">this</span>.getApi().getAnnotationBeans());
        }
        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.isModule()) {
            annotationBeans.addAll(<span class="hljs-built_in">this</span>.getModuleBean().getAnnotationBeans());
            <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.getDataBean() != <span class="hljs-literal">null</span>) {
                annotationBeans.add(<span class="hljs-built_in">this</span>.getDataBean());
            }
        }
        <span class="hljs-keyword">if</span> (routeMenuBean != <span class="hljs-literal">null</span>) {
            annotationBeans.add(routeMenuBean);
        }
        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.getFieldAggConfig() != <span class="hljs-literal">null</span>) {
            List&lt;CustomBean&gt; FieldMetas = <span class="hljs-built_in">this</span>.getFieldAggConfig().getAnnotationBeans();
            <span class="hljs-keyword">for</span> (CustomBean customBean : FieldMetas) {
                <span class="hljs-keyword">if</span> (!annotationBeans.contains(customBean)) {
                    annotationBeans.add(customBean);
                }
            }
        }
        <span class="hljs-keyword">if</span> (requestMapping != <span class="hljs-literal">null</span> &amp;&amp; <span class="hljs-built_in">this</span>.getPublicMethod()) {
            annotationBeans.add(requestMapping);
        }
        <span class="hljs-keyword">if</span> (getResponseBody() || api != <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">if</span> (!annotationBeans.contains(<span class="hljs-keyword">new</span> <span class="hljs-title class_">SimpleCustomBean</span>(ResponseBody.class))) {
                annotationBeans.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">SimpleCustomBean</span>(ResponseBody.class));
            }
        }
        <span class="hljs-keyword">return</span> annotationBeans;
    }
    
    <span class="hljs-meta">@JSONField(serialize = false)</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getMetaInfo</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.getMethod() != <span class="hljs-literal">null</span>) {
            List&lt;RequestParamBean&gt; params = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>(<span class="hljs-built_in">this</span>.getParamSet());
            
            <span class="hljs-keyword">if</span> (isModule() &amp;&amp; parentEuPackage != <span class="hljs-literal">null</span>) {
                <span class="hljs-type">String</span> <span class="hljs-variable">euClassName</span> <span class="hljs-operator">=</span> parentEuPackage + <span class="hljs-string">"."</span> + getJavaSimpleName();
                <span class="hljs-built_in">this</span>.metaInfo = MethodUtil.toMethodStr(<span class="hljs-built_in">this</span>.getMethod(), 
                    getViewType(), euClassName, requestBody, params).toString();
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-built_in">this</span>.metaInfo = MethodUtil.toMethodStr(<span class="hljs-built_in">this</span>.getMethod(), 
                    getViewType(), getJavaSimpleName(), requestBody, params).toString();
            }
        }
        <span class="hljs-keyword">return</span> metaInfo;
    }
}
</code></pre>
<p><strong>èŒè´£</strong>ï¼š</p>
<ul>
<li>ç®¡ç†æ–¹æ³•çš„å…ƒæ•°æ®</li>
<li>è¿æ¥ä¸šåŠ¡æ–¹æ³•å’Œ UI ç»„ä»¶</li>
<li>æä¾›æ³¨è§£ä¿¡æ¯</li>
<li>ç”Ÿæˆæ–¹æ³•ç­¾å</li>
</ul>
<h2 data-id="heading-65">å¯æ‰§è¡Œ Action</h2>
<h3 data-id="heading-66">parse-metadata</h3>
<p><strong>æè¿°</strong>ï¼šè§£æå…ƒæ•°æ®</p>
<p><strong>å‚æ•°</strong>ï¼š</p>
<ul>
<li><code>source</code>ï¼šå…ƒæ•°æ®æºï¼ˆJSON/æ³¨è§£ï¼‰</li>
<li><code>type</code>ï¼šå…ƒæ•°æ®ç±»å‹</li>
</ul>
<p><strong>æ‰§è¡Œæµç¨‹</strong>ï¼š</p>
<ol>
<li>éªŒè¯æºæ ¼å¼</li>
<li>è§£æå…ƒæ•°æ®</li>
<li>éªŒè¯å…ƒæ•°æ®å®Œæ•´æ€§</li>
<li>è¿”å›è§£æç»“æœ</li>
</ol>
<p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-swift" lang="swift">ç”¨æˆ·ï¼šè§£æå…ƒæ•°æ®
<span class="hljs-type">LLMï¼šä½¿ç”¨</span> <span class="hljs-type">Metadata</span> <span class="hljs-type">Skill</span> çš„ parse<span class="hljs-operator">-</span>metadata <span class="hljs-type">Action</span>
å‚æ•°ï¼š{<span class="hljs-string">"source"</span>: <span class="hljs-string">"{<span class="hljs-subst">\"</span>viewClassName<span class="hljs-subst">\"</span>: <span class="hljs-subst">\"</span>UserView<span class="hljs-subst">\"</span>, ...}"</span>, <span class="hljs-string">"type"</span>: <span class="hljs-string">"json"</span>}
ç»“æœï¼šè¿”å› <span class="hljs-type">MethodConfig</span> å¯¹è±¡
</code></pre>
<h3 data-id="heading-67">validate-metadata</h3>
<p><strong>æè¿°</strong>ï¼šéªŒè¯å…ƒæ•°æ®</p>
<p><strong>å‚æ•°</strong>ï¼š</p>
<ul>
<li><code>metadata</code>ï¼šå…ƒæ•°æ®å¯¹è±¡</li>
</ul>
<p><strong>æ‰§è¡Œæµç¨‹</strong>ï¼š</p>
<ol>
<li>éªŒè¯å¿…å¡«å­—æ®µ</li>
<li>éªŒè¯å­—æ®µç±»å‹</li>
<li>éªŒè¯å¼•ç”¨å…³ç³»</li>
<li>è¿”å›éªŒè¯ç»“æœ</li>
</ol>
<p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-json" lang="json">ç”¨æˆ·ï¼šéªŒè¯å…ƒæ•°æ®
LLMï¼šä½¿ç”¨ Metadata Skill çš„ validate-metadata Action
å‚æ•°ï¼š<span class="hljs-punctuation">{</span><span class="hljs-attr">"metadata"</span><span class="hljs-punctuation">:</span> methodConfig<span class="hljs-punctuation">}</span>
ç»“æœï¼šéªŒè¯é€šè¿‡
</code></pre>
<h3 data-id="heading-68">generate-code</h3>
<p><strong>æè¿°</strong>ï¼šç”Ÿæˆä»£ç </p>
<p><strong>å‚æ•°</strong>ï¼š</p>
<ul>
<li><code>metadata</code>ï¼šå…ƒæ•°æ®å¯¹è±¡</li>
<li><code>type</code>ï¼šä»£ç ç±»å‹</li>
</ul>
<p><strong>æ‰§è¡Œæµç¨‹</strong>ï¼š</p>
<ol>
<li>é€‰æ‹©ç”Ÿæˆå™¨</li>
<li>æ‰§è¡Œä»£ç ç”Ÿæˆ</li>
<li>ç¼–è¯‘ç”Ÿæˆçš„ä»£ç </li>
<li>è¿”å›ç”Ÿæˆçš„ä»£ç </li>
</ol>
<p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-css" lang="css">ç”¨æˆ·ï¼šç”Ÿæˆä»£ç 
LLMï¼šä½¿ç”¨ Metadata Skill çš„ generate-<span class="hljs-selector-tag">code</span> Action
å‚æ•°ï¼š{"metadata": methodConfig, <span class="hljs-string">"type"</span>: <span class="hljs-string">"view"</span>}
ç»“æœï¼šç”Ÿæˆè§†å›¾ä»£ç å’Œä»“å‚¨ä»£ç 
</code></pre>
<h2 data-id="heading-69">ä½¿ç”¨åœºæ™¯</h2>
<h3 data-id="heading-70">åœºæ™¯ 1ï¼šä» JSON è§£æå…ƒæ•°æ®</h3>
<pre><code class="hljs language-markdown" lang="markdown">ç”¨æˆ·éœ€æ±‚ï¼šä» JSON è§£æå…ƒæ•°æ®
LLM å¤„ç†ï¼š
<span class="hljs-bullet">1.</span> åŠ è½½ Metadata Skill
<span class="hljs-bullet">2.</span> è°ƒç”¨ parse-metadata Action
<span class="hljs-bullet">3.</span> è§£æ JSON é…ç½®
<span class="hljs-bullet">4.</span> è¿”å› MethodConfig å¯¹è±¡
</code></pre>
<h3 data-id="heading-71">åœºæ™¯ 2ï¼šç”Ÿæˆç»„ä»¶ä»£ç </h3>
<pre><code class="hljs language-markdown" lang="markdown">ç”¨æˆ·éœ€æ±‚ï¼šç”Ÿæˆç»„ä»¶ä»£ç 
LLM å¤„ç†ï¼š
<span class="hljs-bullet">1.</span> åŠ è½½ Metadata Skill
<span class="hljs-bullet">2.</span> è°ƒç”¨ generate-code Action
<span class="hljs-bullet">3.</span> ç”Ÿæˆè§†å›¾ä»£ç å’Œä»“å‚¨ä»£ç 
<span class="hljs-bullet">4.</span> è¿”å›ç”Ÿæˆçš„ä»£ç 
</code></pre>
<h2 data-id="heading-72">æœ€ä½³å®è·µ</h2>
<ol>
<li><strong>ä½¿ç”¨å…ƒæ•°æ®é©±åŠ¨</strong>ï¼šé€šè¿‡å…ƒæ•°æ®é…ç½®ç”Ÿæˆä»£ç </li>
<li><strong>éªŒè¯å…ƒæ•°æ®å®Œæ•´æ€§</strong>ï¼šç¡®ä¿å…ƒæ•°æ®é…ç½®æ­£ç¡®</li>
<li><strong>é€‰æ‹©åˆé€‚çš„ä»£ç ç±»å‹</strong>ï¼šæ ¹æ®éœ€æ±‚é€‰æ‹©ç”Ÿæˆçš„ä»£ç ç±»å‹</li>
<li><strong>ä¼˜åŒ–ç”Ÿæˆæ€§èƒ½</strong>ï¼šä½¿ç”¨ç¼“å­˜å’Œå¹¶è¡Œç”Ÿæˆ</li>
</ol>
<pre><code class="hljs language-arduino" lang="arduino">
### <span class="hljs-number">4.3</span> Skill é›†æˆå®ç°

#### <span class="hljs-number">4.3</span><span class="hljs-number">.1</span> Skill Loader å®ç°

```java
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SkillLoader</span> {
    
    <span class="hljs-keyword">private</span> Map&lt;<span class="hljs-type">String</span>, Skill&gt; skillCache = <span class="hljs-keyword">new</span> ConcurrentHashMap&lt;&gt;();
    
    <span class="hljs-function"><span class="hljs-keyword">public</span> Skill <span class="hljs-title">loadSkill</span><span class="hljs-params">(<span class="hljs-type">String</span> skillName)</span> throws JDSException </span>{
        <span class="hljs-comment">// 1. æ£€æŸ¥ç¼“å­˜</span>
        Skill cachedSkill = skillCache.<span class="hljs-built_in">get</span>(skillName);
        <span class="hljs-keyword">if</span> (cachedSkill != null) {
            <span class="hljs-keyword">return</span> cachedSkill;
        }
        
        <span class="hljs-comment">// 2. åŠ è½½ Skill å®šä¹‰</span>
        <span class="hljs-type">String</span> skillPath = <span class="hljs-string">".trae/skills/"</span> + skillName + <span class="hljs-string">"-skill.md"</span>;
        <span class="hljs-type">String</span> skillContent = <span class="hljs-built_in">readFile</span>(skillPath);
        
        <span class="hljs-comment">// 3. è§£æ Skill å®šä¹‰</span>
        Skill skill = <span class="hljs-built_in">parseSkillDefinition</span>(skillContent);
        
        <span class="hljs-comment">// 4. ç¼“å­˜ Skill</span>
        skillCache.<span class="hljs-built_in">put</span>(skillName, skill);
        
        <span class="hljs-keyword">return</span> skill;
    }
    
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-type">void</span> <span class="hljs-title">invalidateSkill</span><span class="hljs-params">(<span class="hljs-type">String</span> skillName)</span> </span>{
        skillCache.<span class="hljs-built_in">remove</span>(skillName);
    }
    
    <span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;<span class="hljs-type">String</span>&gt; <span class="hljs-title">getAvailableSkills</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-built_in">File</span> skillsDir = <span class="hljs-keyword">new</span> <span class="hljs-built_in">File</span>(<span class="hljs-string">".trae/skills"</span>);
        <span class="hljs-built_in">File</span>[] skillFiles = skillsDir.<span class="hljs-built_in">listFiles</span>((dir, name) -&gt; 
            name.<span class="hljs-built_in">endsWith</span>(<span class="hljs-string">"-skill.md"</span>));
        
        <span class="hljs-keyword">return</span> Arrays.<span class="hljs-built_in">stream</span>(skillFiles)
                .<span class="hljs-built_in">map</span>(<span class="hljs-built_in">File</span>::getName)
                .<span class="hljs-built_in">map</span>(name -&gt; name.<span class="hljs-built_in">replace</span>(<span class="hljs-string">"-skill.md"</span>, <span class="hljs-string">""</span>))
                .<span class="hljs-built_in">collect</span>(Collectors.<span class="hljs-built_in">toList</span>());
    }
}
</code></pre>
<h4 data-id="heading-73">4.3.2 Skill Context å®ç°</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SkillContext</span> {
    
    <span class="hljs-keyword">private</span> Map&lt;String, Object&gt; data = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
    <span class="hljs-keyword">private</span> List&lt;String&gt; loadedClasses = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
    <span class="hljs-keyword">private</span> List&lt;String&gt; loadedGenerators = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
    <span class="hljs-keyword">private</span> List&lt;String&gt; loadedTemplates = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addClass</span><span class="hljs-params">(Class&lt;?&gt; clazz)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">className</span> <span class="hljs-operator">=</span> clazz.getName();
        <span class="hljs-keyword">if</span> (!loadedClasses.contains(className)) {
            loadedClasses.add(className);
        }
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addGenerator</span><span class="hljs-params">(Class&lt;?&gt; generator)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">generatorName</span> <span class="hljs-operator">=</span> generator.getName();
        <span class="hljs-keyword">if</span> (!loadedGenerators.contains(generatorName)) {
            loadedGenerators.add(generatorName);
        }
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addTemplate</span><span class="hljs-params">(String templateName)</span> {
        <span class="hljs-keyword">if</span> (!loadedTemplates.contains(templateName)) {
            loadedTemplates.add(templateName);
        }
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">applyParams</span><span class="hljs-params">(Map&lt;String, Object&gt; params)</span> {
        <span class="hljs-keyword">if</span> (params != <span class="hljs-literal">null</span>) {
            data.putAll(params);
        }
    }
    
    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">getParam</span><span class="hljs-params">(String key)</span> {
        <span class="hljs-keyword">return</span> data.get(key);
    }
    
    <span class="hljs-keyword">public</span> List&lt;String&gt; <span class="hljs-title function_">getLoadedClasses</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;(loadedClasses);
    }
    
    <span class="hljs-keyword">public</span> List&lt;String&gt; <span class="hljs-title function_">getLoadedGenerators</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;(loadedGenerators);
    }
    
    <span class="hljs-keyword">public</span> List&lt;String&gt; <span class="hljs-title function_">getLoadedTemplates</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;(loadedTemplates);
    }
}
</code></pre>
<h4 data-id="heading-74">4.3.3 LLM é›†æˆç¤ºä¾‹</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LLMIntegration</span> {
    
    <span class="hljs-keyword">private</span> SkillOrchestrator orchestrator;
    <span class="hljs-keyword">private</span> SkillLoader skillLoader;
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">LLMIntegration</span><span class="hljs-params">()</span> {
        <span class="hljs-built_in">this</span>.skillLoader = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SkillLoader</span>();
        <span class="hljs-built_in">this</span>.orchestrator = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SkillOrchestrator</span>();
        
        <span class="hljs-comment">// æ³¨å†Œæ‰€æœ‰ Skill</span>
        registerSkills();
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">registerSkills</span><span class="hljs-params">()</span> {
        orchestrator.registerSkill(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FoundationSkill</span>());
        orchestrator.registerSkill(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ModuleSkill</span>());
        orchestrator.registerSkill(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ComponentSkill</span>());
        orchestrator.registerSkill(<span class="hljs-keyword">new</span> <span class="hljs-title class_">MetadataSkill</span>());
    }
    
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">processUserRequest</span><span class="hljs-params">(String userRequest)</span> <span class="hljs-keyword">throws</span> JDSException {
        <span class="hljs-comment">// 1. åˆ†æç”¨æˆ·è¯·æ±‚</span>
        <span class="hljs-type">RequestAnalysis</span> <span class="hljs-variable">analysis</span> <span class="hljs-operator">=</span> analyzeRequest(userRequest);
        
        <span class="hljs-comment">// 2. é€‰æ‹©åˆé€‚çš„ Skill</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">skillName</span> <span class="hljs-operator">=</span> selectSkill(analysis);
        
        <span class="hljs-comment">// 3. å‡†å¤‡å‚æ•°</span>
        Map&lt;String, Object&gt; params = prepareParams(analysis);
        
        <span class="hljs-comment">// 4. æ‰§è¡Œ Skill</span>
        <span class="hljs-type">SkillResult</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> orchestrator.execute(skillName, params);
        
        <span class="hljs-comment">// 5. è¿”å›ç»“æœ</span>
        <span class="hljs-keyword">return</span> formatResult(result);
    }
    
    <span class="hljs-keyword">private</span> RequestAnalysis <span class="hljs-title function_">analyzeRequest</span><span class="hljs-params">(String userRequest)</span> {
        <span class="hljs-type">RequestAnalysis</span> <span class="hljs-variable">analysis</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RequestAnalysis</span>();
        
        <span class="hljs-comment">// åˆ†æè¯·æ±‚ç±»å‹</span>
        <span class="hljs-keyword">if</span> (userRequest.contains(<span class="hljs-string">"åˆ›å»º"</span>) &amp;&amp; userRequest.contains(<span class="hljs-string">"åŸºç¡€ç»„ä»¶"</span>)) {
            analysis.setSkillName(<span class="hljs-string">"foundation"</span>);
            analysis.setActionName(<span class="hljs-string">"create-base-component"</span>);
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (userRequest.contains(<span class="hljs-string">"åˆ›å»º"</span>) &amp;&amp; userRequest.contains(<span class="hljs-string">"æ¨¡å—"</span>)) {
            analysis.setSkillName(<span class="hljs-string">"module"</span>);
            analysis.setActionName(<span class="hljs-string">"create-module"</span>);
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (userRequest.contains(<span class="hljs-string">"åˆ›å»º"</span>) &amp;&amp; userRequest.contains(<span class="hljs-string">"ç½‘æ ¼"</span>)) {
            analysis.setSkillName(<span class="hljs-string">"component"</span>);
            analysis.setActionName(<span class="hljs-string">"create-grid"</span>);
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (userRequest.contains(<span class="hljs-string">"è§£æ"</span>) &amp;&amp; userRequest.contains(<span class="hljs-string">"å…ƒæ•°æ®"</span>)) {
            analysis.setSkillName(<span class="hljs-string">"metadata"</span>);
            analysis.setActionName(<span class="hljs-string">"parse-metadata"</span>);
        }
        
        <span class="hljs-keyword">return</span> analysis;
    }
    
    <span class="hljs-keyword">private</span> String <span class="hljs-title function_">selectSkill</span><span class="hljs-params">(RequestAnalysis analysis)</span> {
        <span class="hljs-keyword">return</span> analysis.getSkillName();
    }
    
    <span class="hljs-keyword">private</span> Map&lt;String, Object&gt; <span class="hljs-title function_">prepareParams</span><span class="hljs-params">(RequestAnalysis analysis)</span> {
        Map&lt;String, Object&gt; params = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
        
        <span class="hljs-comment">// ä»ç”¨æˆ·è¯·æ±‚ä¸­æå–å‚æ•°</span>
        <span class="hljs-comment">// ...</span>
        
        <span class="hljs-keyword">return</span> params;
    }
    
    <span class="hljs-keyword">private</span> String <span class="hljs-title function_">formatResult</span><span class="hljs-params">(SkillResult result)</span> {
        <span class="hljs-comment">// æ ¼å¼åŒ–ç»“æœ</span>
        <span class="hljs-keyword">return</span> result.toString();
    }
}
</code></pre>
<h3 data-id="heading-75">4.4 å®æˆ˜æ¡ˆä¾‹</h3>
<h4 data-id="heading-76">4.4.1 æ¡ˆä¾‹ 1ï¼šåˆ›å»ºç”¨æˆ·ç®¡ç†æ¨¡å—</h4>
<p><strong>ç”¨æˆ·è¯·æ±‚</strong>ï¼š</p>
<pre><code class="hljs">åˆ›å»ºä¸€ä¸ªç”¨æˆ·ç®¡ç†æ¨¡å—ï¼ŒåŒ…å«ç”¨æˆ·åˆ—è¡¨ç½‘æ ¼å’Œç”¨æˆ·ç¼–è¾‘è¡¨å•
</code></pre>
<p><strong>LLM å¤„ç†æµç¨‹</strong>ï¼š</p>
<ol>
<li>
<p><strong>åˆ†æè¯·æ±‚</strong>ï¼š</p>
<ul>
<li>è¯†åˆ«ä¸ºåˆ›å»ºæ¨¡å—è¯·æ±‚</li>
<li>é€‰æ‹© Module Skill</li>
</ul>
</li>
<li>
<p><strong>æ‰§è¡Œ Skill</strong>ï¼š</p>
<ul>
<li>è°ƒç”¨ create-module Action</li>
<li>ç”Ÿæˆæ¨¡å—ä»£ç </li>
</ul>
</li>
<li>
<p><strong>ç”Ÿæˆç»„ä»¶</strong>ï¼š</p>
<ul>
<li>è°ƒç”¨ Component Skill çš„ create-grid Action</li>
<li>ç”Ÿæˆç”¨æˆ·ç½‘æ ¼ä»£ç </li>
<li>è°ƒç”¨ Component Skill çš„ create-group Action</li>
<li>ç”Ÿæˆåˆ†ç»„è¡¨å•ä»£ç </li>
</ul>
</li>
<li>
<p><strong>ç”Ÿæˆä»“å‚¨</strong>ï¼š</p>
<ul>
<li>è°ƒç”¨ Metadata Skill çš„ generate-code Action</li>
<li>ç”Ÿæˆä»“å‚¨ä»£ç </li>
</ul>
</li>
<li>
<p><strong>è¿”å›ç»“æœ</strong>ï¼š</p>
<pre><code class="hljs language-diff" lang="diff">å·²æˆåŠŸåˆ›å»ºç”¨æˆ·ç®¡ç†æ¨¡å—ï¼š
<span class="hljs-deletion">- UserModule.java</span>
<span class="hljs-deletion">- UserGrid.java</span>
<span class="hljs-deletion">- UserForm.java</span>
<span class="hljs-deletion">- UserRepository.java</span>
<span class="hljs-deletion">- UserService.java</span>
</code></pre>
</li>
</ol>
<h4 data-id="heading-77">4.4.2 æ¡ˆä¾‹ 2ï¼šä» JSON é…ç½®ç”Ÿæˆä»£ç </h4>
<p><strong>ç”¨æˆ·è¯·æ±‚</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">ä»ä»¥ä¸‹ <span class="hljs-title class_">JSON</span> é…ç½®ç”Ÿæˆä»£ç ï¼š
{
  <span class="hljs-string">"viewClassName"</span>: <span class="hljs-string">"net.ooder.example.UserTableView"</span>,
  <span class="hljs-string">"moduleViewType"</span>: <span class="hljs-string">"GRIDCONFIG"</span>,
  <span class="hljs-string">"fields"</span>: [
    {<span class="hljs-string">"fieldname"</span>: <span class="hljs-string">"id"</span>, <span class="hljs-string">"caption"</span>: <span class="hljs-string">"ID"</span>, <span class="hljs-string">"type"</span>: <span class="hljs-string">"input"</span>, <span class="hljs-string">"editable"</span>: <span class="hljs-literal">false</span>},
    {<span class="hljs-string">"fieldname"</span>: <span class="hljs-string">"name"</span>, <span class="hljs-string">"caption"</span>: <span class="hljs-string">"å§“å"</span>, <span class="hljs-string">"type"</span>: <span class="hljs-string">"input"</span>, <span class="hljs-string">"editable"</span>: <span class="hljs-literal">true</span>},
    {<span class="hljs-string">"fieldname"</span>: <span class="hljs-string">"age"</span>, <span class="hljs-string">"caption"</span>: <span class="hljs-string">"å¹´é¾„"</span>, <span class="hljs-string">"type"</span>: <span class="hljs-string">"number"</span>, <span class="hljs-string">"editable"</span>: <span class="hljs-literal">true</span>}
  ]
}
</code></pre>
<p><strong>LLM å¤„ç†æµç¨‹</strong>ï¼š</p>
<ol>
<li>
<p><strong>åˆ†æè¯·æ±‚</strong>ï¼š</p>
<ul>
<li>è¯†åˆ«ä¸ºå…ƒæ•°æ®è§£æè¯·æ±‚</li>
<li>é€‰æ‹© Metadata Skill</li>
</ul>
</li>
<li>
<p><strong>è§£æå…ƒæ•°æ®</strong>ï¼š</p>
<ul>
<li>è°ƒç”¨ parse-metadata Action</li>
<li>è§£æ JSON é…ç½®</li>
<li>ç”Ÿæˆ MethodConfig å¯¹è±¡</li>
</ul>
</li>
<li>
<p><strong>ç”Ÿæˆä»£ç </strong>ï¼š</p>
<ul>
<li>è°ƒç”¨ generate-code Action</li>
<li>ç”Ÿæˆè§†å›¾ä»£ç </li>
<li>ç”Ÿæˆä»“å‚¨ä»£ç </li>
</ul>
</li>
<li>
<p><strong>ç¼–è¯‘ä»£ç </strong>ï¼š</p>
<ul>
<li>è°ƒç”¨åŠ¨æ€ç¼–è¯‘</li>
<li>ç”Ÿæˆç±»æ–‡ä»¶</li>
</ul>
</li>
<li>
<p><strong>è¿”å›ç»“æœ</strong>ï¼š</p>
<pre><code class="hljs language-diff" lang="diff">å·²æˆåŠŸç”Ÿæˆä»£ç ï¼š
<span class="hljs-deletion">- UserTableView.java</span>
<span class="hljs-deletion">- UserRepository.java</span>
<span class="hljs-deletion">- UserService.java</span>
ç¼–è¯‘æˆåŠŸ
</code></pre>
</li>
</ol>
<h4 data-id="heading-78">4.4.3 æ¡ˆä¾‹ 3ï¼šåˆ›å»ºæ ‘å½¢ç»„ç»‡ç»“æ„</h4>
<p><strong>ç”¨æˆ·è¯·æ±‚</strong>ï¼š</p>
<pre><code class="hljs">åˆ›å»ºä¸€ä¸ªéƒ¨é—¨æ ‘å½¢ç»„ä»¶ï¼Œæ˜¾ç¤ºç»„ç»‡ç»“æ„
</code></pre>
<p><strong>LLM å¤„ç†æµç¨‹</strong>ï¼š</p>
<ol>
<li>
<p><strong>åˆ†æè¯·æ±‚</strong>ï¼š</p>
<ul>
<li>è¯†åˆ«ä¸ºåˆ›å»ºæ ‘å½¢ç»„ä»¶è¯·æ±‚</li>
<li>é€‰æ‹© Component Skill</li>
</ul>
</li>
<li>
<p><strong>æ‰§è¡Œ Skill</strong>ï¼š</p>
<ul>
<li>è°ƒç”¨ create-tree Action</li>
<li>ç”Ÿæˆæ ‘å½¢ç»„ä»¶ä»£ç </li>
</ul>
</li>
<li>
<p><strong>ç”Ÿæˆä»“å‚¨</strong>ï¼š</p>
<ul>
<li>è°ƒç”¨ Metadata Skill çš„ generate-code Action</li>
<li>ç”Ÿæˆä»“å‚¨ä»£ç </li>
</ul>
</li>
<li>
<p><strong>è¿”å›ç»“æœ</strong>ï¼š</p>
<pre><code class="hljs language-diff" lang="diff">å·²æˆåŠŸåˆ›å»ºéƒ¨é—¨æ ‘å½¢ç»„ä»¶ï¼š
<span class="hljs-deletion">- DepartmentTree.java</span>
<span class="hljs-deletion">- DepartmentRepository.java</span>
<span class="hljs-deletion">- DepartmentService.java</span>
</code></pre>
</li>
</ol>
<h2 data-id="heading-79">äº”ã€æ€»ç»“ä¸å±•æœ›</h2>
<h3 data-id="heading-80">5.1 å…³é”®æˆæœ</h3>
<h4 data-id="heading-81">5.1.1 BridgeCode è®¾è®¡æˆæœ</h4>
<ol>
<li>
<p><strong>å…ƒæ•°æ®é©±åŠ¨æ¶æ„</strong>ï¼š</p>
<ul>
<li>å®ç°äº†é…ç½®ä¸å®ç°çš„å®Œå…¨è§£è€¦</li>
<li>æ”¯æŒå¤šç§é…ç½®æ–¹å¼ï¼ˆJSON/æ³¨è§£ï¼‰</li>
<li>æä¾›äº†çµæ´»çš„æ‰©å±•èƒ½åŠ›</li>
</ul>
</li>
<li>
<p><strong>åˆ†å±‚ç”Ÿæˆç³»ç»Ÿ</strong>ï¼š</p>
<ul>
<li>è§†å›¾å±‚ã€ä»“å‚¨å±‚ã€èšåˆå±‚ä¸‰å±‚ç”Ÿæˆ</li>
<li>31 ä¸ªç”Ÿæˆå™¨è¦†ç›–æ‰€æœ‰åœºæ™¯</li>
<li>æ”¯æŒå¢é‡æ„å»ºå’Œå¹¶è¡Œç”Ÿæˆ</li>
</ul>
</li>
<li>
<p><strong>åŠ¨æ€ç¼–è¯‘æœºåˆ¶</strong>ï¼š</p>
<ul>
<li>è¿è¡Œæ—¶ç¼–è¯‘ç”Ÿæˆçš„ä»£ç </li>
<li>æ”¯æŒçƒ­æ›´æ–°å’Œæ›¿æ¢</li>
<li>æä¾›äº†å®Œæ•´çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†</li>
</ul>
</li>
</ol>
<h4 data-id="heading-82">5.1.2 åˆ†å±‚ SKILLS è®¾è®¡æˆæœ</h4>
<ol>
<li>
<p><strong>æ¸…æ™°çš„èŒè´£åˆ’åˆ†</strong>ï¼š</p>
<ul>
<li>Foundation Skillï¼šåŸºç¡€ç»„ä»¶èƒ½åŠ›</li>
<li>Module Skillï¼šæ¨¡å—ç®¡ç†èƒ½åŠ›</li>
<li>Component Skillï¼šå…·ä½“ç»„ä»¶èƒ½åŠ›</li>
<li>Metadata Skillï¼šå…ƒæ•°æ®å¤„ç†èƒ½åŠ›</li>
</ul>
</li>
<li>
<p><strong>å¯æ‰©å±•çš„æ¶æ„</strong>ï¼š</p>
<ul>
<li>æ”¯æŒæ–°å¢ Skill</li>
<li>æ”¯æŒ Skill ç»„åˆ</li>
<li>æ”¯æŒ Skill ç‰ˆæœ¬ç®¡ç†</li>
</ul>
</li>
<li>
<p><strong>å®Œæ•´çš„ Action ä½“ç³»</strong>ï¼š</p>
<ul>
<li>æ¯ä¸ª Skill æä¾›å¤šä¸ª Action</li>
<li>Action æ”¯æŒå‚æ•°ä¼ é€’</li>
<li>Action æ”¯æŒç»“æœè¿”å›</li>
</ul>
</li>
</ol>
<h4 data-id="heading-83">5.1.3 Trae Solo å®è·µæˆæœ</h4>
<ol>
<li>
<p><strong>å®Œæ•´çš„é›†æˆæ–¹æ¡ˆ</strong>ï¼š</p>
<ul>
<li>Skill Loaderï¼šåŠ è½½å’Œç®¡ç† Skill</li>
<li>Skill Contextï¼šç®¡ç†æ‰§è¡Œä¸Šä¸‹æ–‡</li>
<li>LLM Integrationï¼šé›†æˆ LLM å’Œ Skill</li>
</ul>
</li>
<li>
<p><strong>å®æˆ˜éªŒè¯</strong>ï¼š</p>
<ul>
<li>é€šè¿‡å¤šä¸ªå®æˆ˜æ¡ˆä¾‹éªŒè¯</li>
<li>è¦†ç›–ä¸»è¦ä½¿ç”¨åœºæ™¯</li>
<li>æä¾›äº†å®Œæ•´çš„ç¤ºä¾‹</li>
</ul>
</li>
<li>
<p><strong>æœ€ä½³å®è·µæŒ‡å¯¼</strong>ï¼š</p>
<ul>
<li>æä¾›äº†è¯¦ç»†çš„æœ€ä½³å®è·µ</li>
<li>æä¾›äº†å¸¸è§é—®é¢˜çš„è§£å†³æ–¹æ¡ˆ</li>
<li>æä¾›äº†æ€§èƒ½ä¼˜åŒ–å»ºè®®</li>
</ul>
</li>
</ol>
<h3 data-id="heading-84">5.2 æŠ€æœ¯äº®ç‚¹</h3>
<h4 data-id="heading-85">5.2.1 è®¾è®¡æ¨¡å¼åº”ç”¨</h4>
<ol>
<li>
<p><strong>æ¨¡æ¿æ–¹æ³•æ¨¡å¼</strong>ï¼š</p>
<ul>
<li>GenJavaTask å®šä¹‰ç”Ÿæˆæµç¨‹</li>
<li>å­ç±»å®ç°å…·ä½“ç”Ÿæˆé€»è¾‘</li>
</ul>
</li>
<li>
<p><strong>ç­–ç•¥æ¨¡å¼</strong>ï¼š</p>
<ul>
<li>ä¸åŒçš„ç”Ÿæˆå™¨å®ç°ä¸åŒçš„ç”Ÿæˆç­–ç•¥</li>
<li>è¿è¡Œæ—¶é€‰æ‹©åˆé€‚çš„ç”Ÿæˆå™¨</li>
</ul>
</li>
<li>
<p><strong>å·¥å‚æ¨¡å¼</strong>ï¼š</p>
<ul>
<li>SkillLoader åˆ›å»º Skill å®ä¾‹</li>
<li>æ ¹æ®åç§°åŠ¨æ€åŠ è½½ Skill</li>
</ul>
</li>
<li>
<p><strong>è§‚å¯Ÿè€…æ¨¡å¼</strong>ï¼š</p>
<ul>
<li>ç»„ä»¶ç”Ÿå‘½å‘¨æœŸäº‹ä»¶é€šçŸ¥</li>
<li>Skill æ‰§è¡Œç»“æœé€šçŸ¥</li>
</ul>
</li>
</ol>
<h4 data-id="heading-86">5.2.2 æ€§èƒ½ä¼˜åŒ–</h4>
<ol>
<li>
<p><strong>ç¼“å­˜æœºåˆ¶</strong>ï¼š</p>
<ul>
<li>Skill ç¼“å­˜</li>
<li>ç”Ÿæˆç»“æœç¼“å­˜</li>
<li>æ¨¡æ¿ç¼“å­˜</li>
</ul>
</li>
<li>
<p><strong>å¹¶è¡Œå¤„ç†</strong>ï¼š</p>
<ul>
<li>å¹¶è¡Œç”Ÿæˆ</li>
<li>å¹¶è¡Œç¼–è¯‘</li>
<li>å¼‚æ­¥åŠ è½½</li>
</ul>
</li>
<li>
<p><strong>å¢é‡æ„å»º</strong>ï¼š</p>
<ul>
<li>åªç”Ÿæˆå˜æ›´çš„éƒ¨åˆ†</li>
<li>åªç¼–è¯‘å˜æ›´çš„æ–‡ä»¶</li>
<li>å‡å°‘æ„å»ºæ—¶é—´</li>
</ul>
</li>
</ol>
<h4 data-id="heading-87">5.2.3 å¯ç»´æŠ¤æ€§</h4>
<ol>
<li>
<p><strong>æ¸…æ™°çš„ä»£ç ç»“æ„</strong>ï¼š</p>
<ul>
<li>åˆ†å±‚æ¶æ„</li>
<li>èŒè´£æ˜ç¡®</li>
<li>æ˜“äºç†è§£å’Œç»´æŠ¤</li>
</ul>
</li>
<li>
<p><strong>å®Œæ•´çš„æ–‡æ¡£</strong>ï¼š</p>
<ul>
<li>Skill å®šä¹‰æ–‡æ¡£</li>
<li>ä½¿ç”¨ç¤ºä¾‹æ–‡æ¡£</li>
<li>æœ€ä½³å®è·µæ–‡æ¡£</li>
</ul>
</li>
<li>
<p><strong>è‡ªåŠ¨åŒ–æµ‹è¯•</strong>ï¼š</p>
<ul>
<li>å•å…ƒæµ‹è¯•</li>
<li>é›†æˆæµ‹è¯•</li>
<li>ç«¯åˆ°ç«¯æµ‹è¯•</li>
</ul>
</li>
</ol>
<h3 data-id="heading-88">5.3 æœªæ¥å±•æœ›</h3>
<h4 data-id="heading-89">5.3.1 çŸ­æœŸç›®æ ‡</h4>
<ol>
<li>
<p><strong>å®Œå–„ Skill ä½“ç³»</strong>ï¼š</p>
<ul>
<li>å¢åŠ æ›´å¤š Skill</li>
<li>ä¼˜åŒ–ç°æœ‰ Skill</li>
<li>æé«˜ Skill è´¨é‡</li>
</ul>
</li>
<li>
<p><strong>æå‡ç”Ÿæˆæ€§èƒ½</strong>ï¼š</p>
<ul>
<li>ä¼˜åŒ–ç”Ÿæˆç®—æ³•</li>
<li>æé«˜å¹¶è¡Œåº¦</li>
<li>å‡å°‘å†…å­˜å ç”¨</li>
</ul>
</li>
<li>
<p><strong>å¢å¼ºé›†æˆèƒ½åŠ›</strong>ï¼š</p>
<ul>
<li>æ”¯æŒæ›´å¤š LLM</li>
<li>æ”¯æŒæ›´å¤šå·¥å…·</li>
<li>æä¾›æ›´å¥½çš„é›†æˆä½“éªŒ</li>
</ul>
</li>
</ol>
<h4 data-id="heading-90">5.3.2 é•¿æœŸç›®æ ‡</h4>
<ol>
<li>
<p><strong>æ™ºèƒ½åŒ–ç”Ÿæˆ</strong>ï¼š</p>
<ul>
<li>ä½¿ç”¨ AI ä¼˜åŒ–ç”Ÿæˆ</li>
<li>è‡ªåŠ¨æ£€æµ‹é—®é¢˜</li>
<li>è‡ªåŠ¨ä¿®å¤é”™è¯¯</li>
</ul>
</li>
<li>
<p><strong>å¯è§†åŒ–å·¥å…·</strong>ï¼š</p>
<ul>
<li>æä¾›å¯è§†åŒ–é…ç½®å·¥å…·</li>
<li>æä¾›å¯è§†åŒ–ç”Ÿæˆå·¥å…·</li>
<li>æä¾›å¯è§†åŒ–è°ƒè¯•å·¥å…·</li>
</ul>
</li>
<li>
<p><strong>ç”Ÿæ€ç³»ç»Ÿå»ºè®¾</strong>ï¼š</p>
<ul>
<li>æ„å»ºæ’ä»¶ç³»ç»Ÿ</li>
<li>æ„å»ºå¸‚åœºç³»ç»Ÿ</li>
<li>æ„å»ºç¤¾åŒºç³»ç»Ÿ</li>
</ul>
</li>
</ol>
<h2 data-id="heading-91">å…­ã€ç»“è®º</h2>
<p>æœ¬æ–‡æ·±å…¥è§£æäº† ooder æ¡†æ¶çš„ BridgeCode æœºåˆ¶ï¼Œä»è®¾è®¡åŸç†ã€ç”Ÿæˆç¼–è¯‘æµç¨‹ï¼Œåˆ°åˆ†å±‚ SKILLS è®¾è®¡ï¼Œæœ€åå±•ç¤ºäº†åœ¨ Trae Solo ç¯å¢ƒä¸­çš„ Skill æ„å»ºå®è·µã€‚</p>
<h3 data-id="heading-92">å…³é”®æ”¶è·</h3>
<ol>
<li>
<p><strong>BridgeCode è®¾è®¡åŸç†</strong>ï¼š</p>
<ul>
<li>å…ƒæ•°æ®é©±åŠ¨çš„ä¸‰å±‚æ¶æ„</li>
<li>31 ä¸ªç”Ÿæˆå™¨è¦†ç›–æ‰€æœ‰åœºæ™¯</li>
<li>åŠ¨æ€ç¼–è¯‘å’Œè¿è¡Œæ—¶ç»‘å®š</li>
</ul>
</li>
<li>
<p><strong>åˆ†å±‚ SKILLS è®¾è®¡</strong>ï¼š</p>
<ul>
<li>Foundationã€Moduleã€Componentã€Metadata å››å±‚ Skill</li>
<li>æ¸…æ™°çš„èŒè´£åˆ’åˆ†</li>
<li>å®Œæ•´çš„ Action ä½“ç³»</li>
</ul>
</li>
<li>
<p><strong>Trae Solo å®è·µ</strong>ï¼š</p>
<ul>
<li>å®Œæ•´çš„é›†æˆæ–¹æ¡ˆ</li>
<li>å¤šä¸ªå®æˆ˜æ¡ˆä¾‹</li>
<li>è¯¦ç»†çš„æœ€ä½³å®è·µ</li>
</ul>
</li>
</ol>
<p>è¿™ç§è®¾è®¡æ—¢ä¿æŒäº†æ¶æ„çš„æ¸…æ™°æ€§ï¼Œåˆæä¾›äº†å¼ºå¤§çš„æ‰©å±•èƒ½åŠ›ï¼Œä¸º LLM çš„ä½¿ç”¨å’Œåç»­å¼€å‘æä¾›äº†åšå®çš„åŸºç¡€ã€‚é€šè¿‡å…ƒæ•°æ®é©±åŠ¨çš„ä»£ç ç”Ÿæˆå’Œåˆ†å±‚ SKILLS è®¾è®¡ï¼Œooder æ¡†æ¶å®ç°äº†é«˜æ•ˆçš„ A2UI ç»„ä»¶å¼€å‘ï¼Œä¸ºå¼€å‘è€…æä¾›äº†å¼ºå¤§çš„å·¥å…·æ”¯æŒã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç¬¬13ç« ã€æ·±å…¥å¹¶å‘æ¨¡å‹â€”â€”selectã€åŒæ­¥ä¸å¸¸è§æ¨¡å¼]]></title>    <link>https://juejin.cn/post/7603004323870212139</link>    <guid>https://juejin.cn/post/7603004323870212139</guid>    <pubDate>2026-02-05T00:40:25.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603004323870212139" data-draft-id="7602816610932260927" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç¬¬13ç« ã€æ·±å…¥å¹¶å‘æ¨¡å‹â€”â€”selectã€åŒæ­¥ä¸å¸¸è§æ¨¡å¼"/> <meta itemprop="keywords" content="åç«¯,Go,ç¼–ç¨‹è¯­è¨€"/> <meta itemprop="datePublished" content="2026-02-05T00:40:25.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ€•æµªçŒ«"/> <meta itemprop="url" content="https://juejin.cn/user/2832784963939438"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç¬¬13ç« ã€æ·±å…¥å¹¶å‘æ¨¡å‹â€”â€”selectã€åŒæ­¥ä¸å¸¸è§æ¨¡å¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2832784963939438/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ€•æµªçŒ«
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-05T00:40:25.000Z" title="Thu Feb 05 2026 00:40:25 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-05
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»15åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ä¸Šä¸€ç« ï¼Œæˆ‘ä»¬æŒæ¡äº†Goå¹¶å‘çš„åŸºçŸ³ goroutine ä¸ channelï¼Œå­¦ä¼šäº†å¦‚ä½•å¯åŠ¨è½»é‡åç¨‹ã€å®ç°åç¨‹é—´é€šä¿¡ã€‚æœ¬ç« å°†åœ¨æ­¤åŸºç¡€ä¸Šï¼Œæ·±å…¥Goå¹¶å‘æ¨¡å‹çš„æ ¸å¿ƒç»†èŠ‚â€”â€”ä» select å¤šè·¯å¤ç”¨ã€è¶…æ—¶æ§åˆ¶ç­‰åŸºç¡€æŠ€å·§ï¼Œåˆ° WaitGroupã€Mutex ç­‰åŒæ­¥åŸè¯­ï¼Œå†åˆ°æ‰‡å…¥æ‰‡å‡ºã€å•ä¾‹ç­‰é«˜é¢‘å¹¶å‘æ¨¡å¼ï¼Œå…¨ç¨‹é…å¥—<strong>ç®€çŸ­å¯è¿è¡Œä»£ç </strong>ã€è¡¨æ ¼å¯¹æ¯”ã€æ ¸å¿ƒå›¾ä¾‹ï¼Œæ ‡æ³¨å®˜æ–¹æ–‡æ¡£åŠä¼˜è´¨èµ„æºé“¾æ¥ï¼Œå¸®ä½ å¿«é€Ÿä¸Šæ‰‹Goå¹¶å‘è¿›é˜¶ç”¨æ³•ï¼Œè§£å†³å®é™…å¼€å‘ä¸­çš„å¹¶å‘åœºæ™¯éš¾é¢˜ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€selectå¤šè·¯å¤ç”¨</h2>
<p>select æ˜¯Goè¯­è¨€ä¸“é—¨ä¸º channel è®¾è®¡çš„å¤šè·¯å¤ç”¨æœºåˆ¶ï¼Œç±»ä¼¼ Unix ä¸­çš„ select/poll/epollï¼Œæ ¸å¿ƒä½œç”¨æ˜¯ï¼š<strong>åŒæ—¶ç›‘å¬å¤šä¸ª channel çš„å‘é€/æ¥æ”¶æ“ä½œ</strong>ï¼Œå“ªä¸ª channel å…ˆå°±ç»ªï¼ˆæœ‰æ•°æ®å¯æ¥æ”¶/æœ‰ç©ºé—´å¯å‘é€ï¼‰ï¼Œå°±æ‰§è¡Œå¯¹åº”çš„åˆ†æ”¯ï¼›è‹¥å¤šä¸ªåŒæ—¶å°±ç»ªï¼Œéšæœºé€‰æ‹©ä¸€ä¸ªæ‰§è¡Œï¼›è‹¥æ‰€æœ‰ channel éƒ½æœªå°±ç»ªï¼Œä¸”æ—  default åˆ†æ”¯ï¼Œåˆ™é˜»å¡ç­‰å¾…ã€‚</p>
<h3 data-id="heading-1">1.1 æ ¸å¿ƒè¯­æ³•ï¼ˆæç®€ç‰ˆï¼‰</h3>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">select</span> {
<span class="hljs-keyword">case</span> &lt;-ch1: <span class="hljs-comment">// ç›‘å¬ch1æ¥æ”¶</span>
    <span class="hljs-comment">// é€»è¾‘</span>
<span class="hljs-keyword">case</span> ch2 &lt;- data: <span class="hljs-comment">// ç›‘å¬ch2å‘é€</span>
    <span class="hljs-comment">// é€»è¾‘</span>
<span class="hljs-keyword">default</span>: <span class="hljs-comment">// å¯é€‰ï¼Œæ‰€æœ‰channelæœªå°±ç»ªæ—¶æ‰§è¡Œï¼ˆéé˜»å¡ï¼‰</span>
    <span class="hljs-comment">// é€»è¾‘</span>
}

</code></pre>
<h3 data-id="heading-2">1.2 å…³é”®ç‰¹æ€§ï¼ˆè¡¨æ ¼æ¢³ç†ï¼‰</h3>

























<table><thead><tr><th>ç‰¹æ€§</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>å¤šè·¯ç›‘å¬</td><td>å¯åŒæ—¶ç›‘å¬å¤šä¸ªchannelçš„å‘é€/æ¥æ”¶ï¼Œä¸é™æ•°é‡</td></tr><tr><td>éšæœºé€‰æ‹©</td><td>å¤šä¸ªchannelåŒæ—¶å°±ç»ªæ—¶ï¼Œéšæœºæ‰§è¡Œä¸€ä¸ªåˆ†æ”¯ï¼ˆé¿å…é¥¥é¥¿ï¼‰</td></tr><tr><td>é˜»å¡/éé˜»å¡</td><td>æ— defaultï¼šé˜»å¡è‡³ä»»æ„channelå°±ç»ªï¼›æœ‰defaultï¼šéé˜»å¡ï¼Œæœªå°±ç»ªåˆ™æ‰§è¡Œdefault</td></tr><tr><td>nil channel</td><td>ç›‘å¬nil channelçš„åˆ†æ”¯ï¼Œæ°¸è¿œä¸ä¼šè¢«æ‰§è¡Œ</td></tr></tbody></table>
<h3 data-id="heading-3">1.3 ç®€çŸ­ä»£ç ç¤ºä¾‹ï¼ˆ3ä¸ªæ ¸å¿ƒåœºæ™¯ï¼‰</h3>
<h4 data-id="heading-4">ç¤ºä¾‹1ï¼šåŸºç¡€å¤šè·¯æ¥æ”¶</h4>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> <span class="hljs-string">"fmt"</span>

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    ch1 := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> <span class="hljs-type">int</span>)
    ch2 := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> <span class="hljs-type">string</span>)

    <span class="hljs-keyword">go</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> { ch1 &lt;- <span class="hljs-number">100</span> }()
    <span class="hljs-keyword">go</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> { ch2 &lt;- <span class="hljs-string">"hello"</span> }()

    <span class="hljs-comment">// ç›‘å¬ä¸¤ä¸ªchannelï¼Œå“ªä¸ªå…ˆå°±ç»ªæ‰§è¡Œå“ªä¸ª</span>
    <span class="hljs-keyword">select</span> {
    <span class="hljs-keyword">case</span> num := &lt;-ch1:
        fmt.Printf(<span class="hljs-string">"æ¥æ”¶ch1ï¼š%d\n"</span>, num)
    <span class="hljs-keyword">case</span> str := &lt;-ch2:
        fmt.Printf(<span class="hljs-string">"æ¥æ”¶ch2ï¼š%s\n"</span>, str)
    }
}

</code></pre>
<p>è¿è¡Œç»“æœï¼ˆäºŒé€‰ä¸€ï¼Œéšæœºï¼‰ï¼š
æ¥æ”¶ch1ï¼š100 æˆ– æ¥æ”¶ch2ï¼šhello</p>
<h4 data-id="heading-5">ç¤ºä¾‹2ï¼šå¸¦defaultçš„éé˜»å¡ç›‘å¬</h4>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> <span class="hljs-string">"fmt"</span>

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    ch := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> <span class="hljs-type">int</span>) <span class="hljs-comment">// æ— ç¼“å†²channelï¼Œæœªå°±ç»ª</span>

    <span class="hljs-keyword">select</span> {
    <span class="hljs-keyword">case</span> num := &lt;-ch:
        fmt.Printf(<span class="hljs-string">"æ¥æ”¶æ•°æ®ï¼š%d\n"</span>, num)
    <span class="hljs-keyword">default</span>:
        fmt.Println(<span class="hljs-string">"æ‰€æœ‰channelæœªå°±ç»ªï¼Œæ‰§è¡Œdefault"</span>)
    }
}

</code></pre>
<p>è¿è¡Œç»“æœï¼šæ‰€æœ‰channelæœªå°±ç»ªï¼Œæ‰§è¡Œdefault</p>
<h4 data-id="heading-6">ç¤ºä¾‹3ï¼šç›‘å¬å‘é€æ“ä½œ</h4>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> <span class="hljs-string">"fmt"</span>

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    ch := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> <span class="hljs-type">int</span>, <span class="hljs-number">1</span>)
    ch &lt;- <span class="hljs-number">1</span> <span class="hljs-comment">// ç¼“å†²åŒºå·²æ»¡</span>

    <span class="hljs-keyword">select</span> {
    <span class="hljs-keyword">case</span> ch &lt;- <span class="hljs-number">2</span>: <span class="hljs-comment">// ç›‘å¬å‘é€ï¼Œç¼“å†²åŒºæ»¡åˆ™æœªå°±ç»ª</span>
        fmt.Println(<span class="hljs-string">"å‘é€æˆåŠŸ"</span>)
    <span class="hljs-keyword">default</span>:
        fmt.Println(<span class="hljs-string">"å‘é€å¤±è´¥ï¼Œç¼“å†²åŒºå·²æ»¡"</span>)
    }
}

</code></pre>
<p>è¿è¡Œç»“æœï¼šå‘é€å¤±è´¥ï¼Œç¼“å†²åŒºå·²æ»¡</p>
<h3 data-id="heading-7">1.4 å¸¸è§è¯¯åŒºï¼ˆé¿å‘é‡ç‚¹ï¼‰</h3>
<ul>
<li>
<p>select ä»…èƒ½ç›‘å¬ channel çš„å‘é€/æ¥æ”¶æ“ä½œï¼Œä¸èƒ½ç›‘å¬æ™®é€šå˜é‡ï¼›</p>
</li>
<li>
<p>å¤šä¸ªåˆ†æ”¯åŒæ—¶å°±ç»ªæ—¶ï¼Œ<strong>éšæœºé€‰æ‹©</strong>ï¼Œè€ŒéæŒ‰é¡ºåºæ‰§è¡Œï¼›</p>
</li>
<li>
<p>é¿å…â€œç©ºselectâ€ï¼ˆæ— ä»»ä½•caseï¼‰ï¼Œä¼šå¯¼è‡´å½“å‰goroutineæ°¸ä¹…é˜»å¡ï¼ˆpanicçº§é—®é¢˜ï¼‰ã€‚</p>
</li>
</ul>
<h3 data-id="heading-8">1.5 å‚è€ƒé“¾æ¥</h3>
<ul>
<li>
<p>Goå®˜æ–¹æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgo.dev%2Fref%2Fspec%23Select_statements" target="_blank" title="https://go.dev/ref/spec#Select_statements" ref="nofollow noopener noreferrer">Select statements</a></p>
</li>
<li>
<p>æ˜é‡‘ä¼˜è´¨æ–‡ï¼š<a href="https://juejin.cn/post/6844903903633440775" target="_blank" title="https://juejin.cn/post/6844903903633440775">Go select è¯¦è§£</a></p>
</li>
</ul>
<h2 data-id="heading-9">äºŒã€è¶…æ—¶æ§åˆ¶</h2>
<p>å¹¶å‘å¼€å‘ä¸­ï¼Œè¶…æ—¶æ§åˆ¶æ˜¯ä¿éšœç³»ç»Ÿç¨³å®šæ€§çš„å…³é”®â€”â€”è‹¥æŸä¸ªgoroutineæ‰§è¡Œè¿‡ä¹…ï¼ˆå¦‚ç½‘ç»œè¯·æ±‚è¶…æ—¶ã€æ•°æ®åº“æŸ¥è¯¢è¶…æ—¶ï¼‰ï¼Œä¼šå¯¼è‡´èµ„æºæ³„éœ²ã€ç³»ç»Ÿé˜»å¡ã€‚Goä¸­æ— éœ€ç¬¬ä¸‰æ–¹åº“ï¼Œå¯é€šè¿‡ <strong>select + time.After</strong> è½»æ¾å®ç°è¶…æ—¶æ§åˆ¶ï¼Œæ ¸å¿ƒåŸç†ï¼štime.After ä¼šè¿”å›ä¸€ä¸ªchannelï¼ŒæŒ‡å®šæ—¶é—´åå‘é€å½“å‰æ—¶é—´ï¼Œselect ç›‘å¬è¯¥channelä¸ä¸šåŠ¡channelï¼Œè¶…æ—¶åˆ™æ‰§è¡Œè¶…æ—¶åˆ†æ”¯ã€‚</p>
<h3 data-id="heading-10">2.1 æ ¸å¿ƒåŸç†ï¼ˆå›¾ä¾‹ç®€åŒ–ï¼‰</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[å¯åŠ¨ä¸šåŠ¡goroutine] -- æ‰§è¡Œä»»åŠ¡ --&gt; B[ä¸šåŠ¡channel]
    C[time.Afterè¶…æ—¶æ—¶é—´] -- è¶…æ—¶åå‘é€æ—¶é—´ --&gt; D[è¶…æ—¶channel]
    E[select] -- ç›‘å¬ --&gt; B
    E -- ç›‘å¬ --&gt; D
    E -- ä¸šåŠ¡å…ˆå°±ç»ª --&gt; F[æ‰§è¡Œä¸šåŠ¡é€»è¾‘]
    E -- è¶…æ—¶å…ˆå°±ç»ª --&gt; G[æ‰§è¡Œè¶…æ—¶é€»è¾‘]
</code></pre>
<h3 data-id="heading-11">2.2 ç®€çŸ­ä»£ç ç¤ºä¾‹ï¼ˆ3ä¸ªé«˜é¢‘åœºæ™¯ï¼‰</h3>
<h4 data-id="heading-12">ç¤ºä¾‹1ï¼šåŸºç¡€è¶…æ—¶æ§åˆ¶ï¼ˆä¸šåŠ¡goroutineè¶…æ—¶ï¼‰</h4>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> (
    <span class="hljs-string">"fmt"</span>
    <span class="hljs-string">"time"</span>
)

<span class="hljs-comment">// æ¨¡æ‹Ÿè€—æ—¶ä¸šåŠ¡ï¼ˆå¦‚ç½‘ç»œè¯·æ±‚ï¼‰</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">doTask</span><span class="hljs-params">()</span></span> <span class="hljs-type">int</span> {
    time.Sleep(<span class="hljs-number">2</span> * time.Second) <span class="hljs-comment">// æ¨¡æ‹Ÿè€—æ—¶2ç§’</span>
    <span class="hljs-keyword">return</span> <span class="hljs-number">100</span>
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    ch := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> <span class="hljs-type">int</span>)

    <span class="hljs-keyword">go</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> {
        ch &lt;- doTask() <span class="hljs-comment">// ä¸šåŠ¡æ‰§è¡Œå®Œå‘é€ç»“æœ</span>
    }()

    <span class="hljs-comment">// è¶…æ—¶æ§åˆ¶ï¼š1ç§’æœªå®Œæˆåˆ™è§¦å‘è¶…æ—¶</span>
    <span class="hljs-keyword">select</span> {
    <span class="hljs-keyword">case</span> res := &lt;-ch:
        fmt.Printf(<span class="hljs-string">"ä¸šåŠ¡å®Œæˆï¼Œç»“æœï¼š%d\n"</span>, res)
    <span class="hljs-keyword">case</span> &lt;-time.After(<span class="hljs-number">1</span> * time.Second):
        fmt.Println(<span class="hljs-string">"ä¸šåŠ¡è¶…æ—¶ï¼ˆ1ç§’ï¼‰ï¼Œç»ˆæ­¢æ‰§è¡Œ"</span>)
    }
}

</code></pre>
<p>è¿è¡Œç»“æœï¼šä¸šåŠ¡è¶…æ—¶ï¼ˆ1ç§’ï¼‰ï¼Œç»ˆæ­¢æ‰§è¡Œ</p>
<h4 data-id="heading-13">ç¤ºä¾‹2ï¼šchannelæ¥æ”¶è¶…æ—¶</h4>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> (
    <span class="hljs-string">"fmt"</span>
    <span class="hljs-string">"time"</span>
)

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    ch := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> <span class="hljs-type">int</span>)

    <span class="hljs-comment">// ç›‘å¬chæ¥æ”¶ï¼Œ3ç§’æœªæ”¶åˆ°æ•°æ®åˆ™è¶…æ—¶</span>
    <span class="hljs-keyword">select</span> {
    <span class="hljs-keyword">case</span> num := &lt;-ch:
        fmt.Printf(<span class="hljs-string">"æ¥æ”¶æ•°æ®ï¼š%d\n"</span>, num)
    <span class="hljs-keyword">case</span> &lt;-time.After(<span class="hljs-number">3</span> * time.Second):
        fmt.Println(<span class="hljs-string">"æ¥æ”¶è¶…æ—¶ï¼Œæœªæ”¶åˆ°ä»»ä½•æ•°æ®"</span>)
    }
}

</code></pre>
<p>è¿è¡Œç»“æœï¼šæ¥æ”¶è¶…æ—¶ï¼Œæœªæ”¶åˆ°ä»»ä½•æ•°æ®</p>
<h4 data-id="heading-14">ç¤ºä¾‹3ï¼šè¶…æ—¶åç»ˆæ­¢goroutineï¼ˆé¿å…æ³„éœ²ï¼‰</h4>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> (
    <span class="hljs-string">"fmt"</span>
    <span class="hljs-string">"time"</span>
)

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    ch := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> <span class="hljs-type">int</span>)
    quit := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> <span class="hljs-keyword">struct</span>{}) <span class="hljs-comment">// ç»ˆæ­¢ä¿¡å·channel</span>

    <span class="hljs-keyword">go</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">for</span> {
            <span class="hljs-keyword">select</span> {
            <span class="hljs-keyword">case</span> ch &lt;- <span class="hljs-number">1</span>: <span class="hljs-comment">// æŒç»­æ‰§è¡Œä¸šåŠ¡</span>
                time.Sleep(<span class="hljs-number">500</span> * time.Millisecond)
            <span class="hljs-keyword">case</span> &lt;-quit: <span class="hljs-comment">// æ¥æ”¶ç»ˆæ­¢ä¿¡å·ï¼Œé€€å‡ºgoroutine</span>
                fmt.Println(<span class="hljs-string">"goroutineå·²ç»ˆæ­¢"</span>)
                <span class="hljs-keyword">return</span>
            }
        }
    }()

    <span class="hljs-comment">// è¶…æ—¶æ§åˆ¶ï¼š2ç§’åç»ˆæ­¢goroutine</span>
    <span class="hljs-keyword">select</span> {
    <span class="hljs-keyword">case</span> res := &lt;-ch:
        fmt.Printf(<span class="hljs-string">"ä¸šåŠ¡ç»“æœï¼š%d\n"</span>, res)
    <span class="hljs-keyword">case</span> &lt;-time.After(<span class="hljs-number">2</span> * time.Second):
        fmt.Println(<span class="hljs-string">"è¶…æ—¶ï¼Œç»ˆæ­¢goroutine"</span>)
        quit &lt;- <span class="hljs-keyword">struct</span>{}{} <span class="hljs-comment">// å‘é€ç»ˆæ­¢ä¿¡å·</span>
    }

    time.Sleep(<span class="hljs-number">1</span> * time.Second) <span class="hljs-comment">// ç­‰å¾…goroutineé€€å‡º</span>
}

</code></pre>
<h3 data-id="heading-15">2.3 å…³é”®æŠ€å·§</h3>





















<table><thead><tr><th>æŠ€å·§ç‚¹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>time.After æ³¨æ„äº‹é¡¹</td><td>time.After ä¼šå¯åŠ¨ä¸€ä¸ªgoroutineï¼Œè¶…æ—¶åæ‰é‡Šæ”¾ï¼Œé«˜é¢‘åœºæ™¯å»ºè®®å¤ç”¨timerï¼ˆé¿å…goroutineæ³„éœ²ï¼‰</td></tr><tr><td>ç»ˆæ­¢goroutine</td><td>è¶…æ—¶åéœ€é€šè¿‡é¢å¤–channelï¼ˆå¦‚quitï¼‰å‘é€ç»ˆæ­¢ä¿¡å·ï¼Œé¿å…goroutineæ³„éœ²</td></tr><tr><td>è¶…æ—¶æ—¶é—´é€‰æ‹©</td><td>æ ¹æ®ä¸šåŠ¡åœºæ™¯è®¾ç½®ï¼ˆå¦‚ç½‘ç»œè¯·æ±‚è®¾1-3ç§’ï¼Œæ•°æ®åº“æŸ¥è¯¢è®¾5ç§’ï¼‰ï¼Œé¿å…è¿‡çŸ­/è¿‡é•¿</td></tr></tbody></table>
<h3 data-id="heading-16">2.4 å‚è€ƒé“¾æ¥</h3>
<ul>
<li>
<p>Goå®˜æ–¹æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgo.dev%2Fpkg%2Ftime%2F%23After" target="_blank" title="https://go.dev/pkg/time/#After" ref="nofollow noopener noreferrer">time.After</a></p>
</li>
<li>
<p>æ˜é‡‘ä¼˜è´¨æ–‡ï¼š<a href="https://juejin.cn/post/7023993854489331749" target="_blank" title="https://juejin.cn/post/7023993854489331749">Go è¶…æ—¶æ§åˆ¶æœ€ä½³å®è·µ</a></p>
</li>
</ul>
<h2 data-id="heading-17">ä¸‰ã€å¿ƒè·³æœºåˆ¶</h2>
<p>å¿ƒè·³æœºåˆ¶æ˜¯å¹¶å‘ç³»ç»Ÿä¸­â€œæ£€æµ‹åç¨‹/æœåŠ¡å­˜æ´»çŠ¶æ€â€çš„æ ¸å¿ƒæ‰‹æ®µï¼Œæ ¸å¿ƒé€»è¾‘ï¼š<strong>ä¸€æ–¹ï¼ˆå®¢æˆ·ç«¯/å­goroutineï¼‰å®šæœŸå‘å¦ä¸€æ–¹ï¼ˆæœåŠ¡ç«¯/ä¸»goroutineï¼‰å‘é€â€œå¿ƒè·³ä¿¡å·â€</strong>ï¼Œæ¥æ”¶æ–¹è‹¥åœ¨æŒ‡å®šæ—¶é—´å†…æœªæ”¶åˆ°å¿ƒè·³ï¼Œåˆ™åˆ¤å®šå¯¹æ–¹å¼‚å¸¸ï¼Œæ‰§è¡Œé‡å¯ã€å‘Šè­¦ç­‰é€»è¾‘ã€‚Goä¸­å¯é€šè¿‡ <strong>select + time.Ticker</strong> å®ç°é«˜æ•ˆå¿ƒè·³ã€‚</p>
<h3 data-id="heading-18">3.1 æ ¸å¿ƒç»„ä»¶ï¼ˆæç®€è¯´æ˜ï¼‰</h3>
<ul>
<li>
<p>time.Tickerï¼šå®šæ—¶å‘é€ä¿¡å·çš„ç»„ä»¶ï¼Œå¯è®¾ç½®å›ºå®šé—´éš”ï¼Œè¿”å›ä¸€ä¸ªchannelï¼Œæ¯æ¬¡é—´éš”åå‘é€å½“å‰æ—¶é—´ï¼›</p>
</li>
<li>
<p>å¿ƒè·³ä¿¡å·ï¼šé€šå¸¸ç”¨ç©ºç»“æ„ä½“ï¼ˆstruct{}ï¼‰æˆ–ç®€å•æ•°å€¼ï¼Œä¸å ç”¨å†…å­˜ï¼›</p>
</li>
<li>
<p>è¶…æ—¶åˆ¤å®šï¼šæ¥æ”¶æ–¹é€šè¿‡ select ç›‘å¬å¿ƒè·³channelå’Œè¶…æ—¶channelï¼ŒæœªæŒ‰æ—¶æ”¶åˆ°åˆ™åˆ¤å®šå¼‚å¸¸ã€‚</p>
</li>
</ul>
<h3 data-id="heading-19">3.2 ç®€çŸ­ä»£ç ç¤ºä¾‹ï¼ˆ2ä¸ªæ ¸å¿ƒåœºæ™¯ï¼‰</h3>
<h4 data-id="heading-20">ç¤ºä¾‹1ï¼šåŸºç¡€å¿ƒè·³ï¼ˆå­goroutineå‘ä¸»goroutineå‘é€å¿ƒè·³ï¼‰</h4>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> (
    <span class="hljs-string">"fmt"</span>
    <span class="hljs-string">"time"</span>
)

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    heartbeat := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> <span class="hljs-keyword">struct</span>{}) <span class="hljs-comment">// å¿ƒè·³channel</span>
    quit := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> <span class="hljs-keyword">struct</span>{})

    <span class="hljs-comment">// å­goroutineï¼šæ¯1ç§’å‘é€ä¸€æ¬¡å¿ƒè·³</span>
    <span class="hljs-keyword">go</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> {
        ticker := time.NewTicker(<span class="hljs-number">1</span> * time.Second)
        <span class="hljs-keyword">defer</span> ticker.Stop() <span class="hljs-comment">// é‡Šæ”¾èµ„æº</span>

        <span class="hljs-keyword">for</span> {
            <span class="hljs-keyword">select</span> {
            <span class="hljs-keyword">case</span> &lt;-ticker.C:
                heartbeat &lt;- <span class="hljs-keyword">struct</span>{}{} <span class="hljs-comment">// å‘é€å¿ƒè·³</span>
            <span class="hljs-keyword">case</span> &lt;-quit:
                fmt.Println(<span class="hljs-string">"å­goroutineé€€å‡º"</span>)
                <span class="hljs-keyword">return</span>
            }
        }
    }()

    <span class="hljs-comment">// ä¸»goroutineï¼šç›‘å¬å¿ƒè·³ï¼Œ3ç§’æœªæ”¶åˆ°åˆ™åˆ¤å®šå¼‚å¸¸</span>
    <span class="hljs-keyword">for</span> {
        <span class="hljs-keyword">select</span> {
        <span class="hljs-keyword">case</span> &lt;-heartbeat:
            fmt.Println(<span class="hljs-string">"æ”¶åˆ°å¿ƒè·³ï¼Œå­goroutineæ­£å¸¸"</span>)
        <span class="hljs-keyword">case</span> &lt;-time.After(<span class="hljs-number">3</span> * time.Second):
            fmt.Println(<span class="hljs-string">"æœªæ”¶åˆ°å¿ƒè·³ï¼Œå­goroutineå¼‚å¸¸"</span>)
            quit &lt;- <span class="hljs-keyword">struct</span>{}{} <span class="hljs-comment">// ç»ˆæ­¢å­goroutine</span>
            <span class="hljs-keyword">return</span>
        }
    }
}

</code></pre>
<h4 data-id="heading-21">ç¤ºä¾‹2ï¼šåŒå‘å¿ƒè·³ï¼ˆä¸»-å­goroutineäº’ç›¸æ£€æµ‹ï¼‰</h4>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> (
    <span class="hljs-string">"fmt"</span>
    <span class="hljs-string">"time"</span>
)

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    mainBeat := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> <span class="hljs-keyword">struct</span>{})  <span class="hljs-comment">// ä¸»goroutineå¿ƒè·³</span>
    subBeat := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> <span class="hljs-keyword">struct</span>{})   <span class="hljs-comment">// å­goroutineå¿ƒè·³</span>
    quit := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> <span class="hljs-keyword">struct</span>{})

    <span class="hljs-comment">// å­goroutine</span>
    <span class="hljs-keyword">go</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> {
        ticker := time.NewTicker(<span class="hljs-number">1</span> * time.Second)
        <span class="hljs-keyword">defer</span> ticker.Stop()

        <span class="hljs-keyword">for</span> {
            <span class="hljs-keyword">select</span> {
            <span class="hljs-keyword">case</span> &lt;-ticker.C:
                subBeat &lt;- <span class="hljs-keyword">struct</span>{}{} <span class="hljs-comment">// å‘é€å­å¿ƒè·³</span>
            <span class="hljs-keyword">case</span> &lt;-mainBeat:
                fmt.Println(<span class="hljs-string">"å­goroutineï¼šæ”¶åˆ°ä¸»å¿ƒè·³"</span>)
            <span class="hljs-keyword">case</span> &lt;-quit:
                <span class="hljs-keyword">return</span>
            }
        }
    }()

    <span class="hljs-comment">// ä¸»goroutine</span>
    ticker := time.NewTicker(<span class="hljs-number">1</span> * time.Second)
    <span class="hljs-keyword">defer</span> ticker.Stop()

    <span class="hljs-keyword">for</span> {
        <span class="hljs-keyword">select</span> {
        <span class="hljs-keyword">case</span> &lt;-ticker.C:
            mainBeat &lt;- <span class="hljs-keyword">struct</span>{}{} <span class="hljs-comment">// å‘é€ä¸»å¿ƒè·³</span>
        <span class="hljs-keyword">case</span> &lt;-subBeat:
            fmt.Println(<span class="hljs-string">"ä¸»goroutineï¼šæ”¶åˆ°å­å¿ƒè·³"</span>)
        <span class="hljs-keyword">case</span> &lt;-time.After(<span class="hljs-number">3</span> * time.Second):
            fmt.Println(<span class="hljs-string">"å¿ƒè·³è¶…æ—¶ï¼Œç¨‹åºé€€å‡º"</span>)
            quit &lt;- <span class="hljs-keyword">struct</span>{}{}
            <span class="hljs-keyword">return</span>
        }
    }
}

</code></pre>
<h3 data-id="heading-22">3.3 æ ¸å¿ƒæ³¨æ„äº‹é¡¹</h3>
<ul>
<li>
<p>time.Ticker ä½¿ç”¨åå¿…é¡»è°ƒç”¨ <code>Stop()</code>ï¼Œé¿å…èµ„æºæ³„éœ²ï¼›</p>
</li>
<li>
<p>å¿ƒè·³é—´éš”éœ€åˆç†ï¼ˆå¦‚1-5ç§’ï¼‰ï¼Œè¿‡çŸ­å ç”¨èµ„æºï¼Œè¿‡é•¿æ— æ³•åŠæ—¶æ£€æµ‹å¼‚å¸¸ï¼›</p>
</li>
<li>
<p>å¼‚å¸¸å¤„ç†ï¼šæ£€æµ‹åˆ°å¿ƒè·³è¶…æ—¶åï¼Œéœ€æ‰§è¡Œç»ˆæ­¢goroutineã€é‡å¯æœåŠ¡ç­‰é€»è¾‘ï¼Œé¿å…èµ„æºæµªè´¹ã€‚</p>
</li>
</ul>
<h3 data-id="heading-23">3.4 å‚è€ƒé“¾æ¥</h3>
<ul>
<li>
<p>Goå®˜æ–¹æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgo.dev%2Fpkg%2Ftime%2F%23Ticker" target="_blank" title="https://go.dev/pkg/time/#Ticker" ref="nofollow noopener noreferrer">time.Ticker</a></p>
</li>
<li>
<p>æ˜é‡‘ä¼˜è´¨æ–‡ï¼š<a href="https://juejin.cn/post/6894335268681961486" target="_blank" title="https://juejin.cn/post/6894335268681961486">Go å¿ƒè·³æœºåˆ¶å®ç°ä¸å®è·µ</a></p>
</li>
</ul>
<h2 data-id="heading-24">å››ã€æ‰‡å…¥æ‰‡å‡ºï¼ˆFan In/Outï¼‰</h2>
<p>æ‰‡å…¥æ‰‡å‡ºæ˜¯Goå¹¶å‘ç¼–ç¨‹ä¸­<strong>æé«˜ä»»åŠ¡å¤„ç†æ•ˆç‡</strong>çš„æ ¸å¿ƒæ¨¡å¼ï¼Œé€‚ç”¨äºâ€œå¤§é‡ç‹¬ç«‹ä»»åŠ¡å¹¶è¡Œå¤„ç†â€åœºæ™¯ï¼ˆå¦‚æ‰¹é‡æ•°æ®å¤„ç†ã€å¤šæ¥å£å¹¶è¡Œè°ƒç”¨ï¼‰ã€‚</p>
<p>æ ¸å¿ƒå®šä¹‰ï¼ˆæç®€ï¼‰ï¼š</p>
<ul>
<li>
<p>æ‰‡å‡ºï¼ˆFan Outï¼‰ï¼šå°†ä¸€ä¸ªå¤§ä»»åŠ¡ï¼Œæ‹†åˆ†ç»™å¤šä¸ªgoroutineå¹¶è¡Œå¤„ç†ï¼ˆå‘æ•£ï¼‰ï¼›</p>
</li>
<li>
<p>æ‰‡å…¥ï¼ˆFan Inï¼‰ï¼šå°†å¤šä¸ªgoroutineçš„å¤„ç†ç»“æœï¼Œæ±‡æ€»åˆ°ä¸€ä¸ªchannelä¸­ç»Ÿä¸€å¤„ç†ï¼ˆèšåˆï¼‰ã€‚</p>
</li>
</ul>
<h3 data-id="heading-25">4.1 æ¨¡å¼ç¤ºæ„å›¾ï¼ˆç®€åŒ–ï¼‰</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
A[ä¸»ä»»åŠ¡] -- æ‹†åˆ†ä»»åŠ¡ --&gt; B[goroutine1]
A -- æ‹†åˆ†ä»»åŠ¡ --&gt; C[goroutine2]
A -- æ‹†åˆ†ä»»åŠ¡ --&gt; D[goroutine3]
B -- å¤„ç†ç»“æœ --&gt; E[æ±‡æ€»channel]
C -- å¤„ç†ç»“æœ --&gt; E
D -- å¤„ç†ç»“æœ --&gt; E
E -- ç»Ÿä¸€å¤„ç† --&gt; F[æœ€ç»ˆç»“æœ]
</code></pre>
<h3 data-id="heading-26">4.2 ç®€çŸ­ä»£ç ç¤ºä¾‹ï¼ˆæ‰¹é‡æ•°æ®å¤„ç†ï¼‰</h3>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> (
    <span class="hljs-string">"fmt"</span>
    <span class="hljs-string">"sync"</span>
)

<span class="hljs-comment">// å•ä¸ªä»»åŠ¡å¤„ç†ï¼ˆå¹³æ–¹è®¡ç®—ï¼‰</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">process</span><span class="hljs-params">(num <span class="hljs-type">int</span>)</span></span> <span class="hljs-type">int</span> {
    <span class="hljs-keyword">return</span> num * num
}

<span class="hljs-comment">// æ‰‡å‡ºï¼šæ‹†åˆ†ä»»åŠ¡ï¼Œå¤šgoroutineå¹¶è¡Œå¤„ç†</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">fanOut</span><span class="hljs-params">(nums []<span class="hljs-type">int</span>, wg *sync.WaitGroup, resChan <span class="hljs-keyword">chan</span>&lt;- <span class="hljs-type">int</span>)</span></span> {
    <span class="hljs-keyword">defer</span> wg.Done()
    <span class="hljs-keyword">for</span> _, num := <span class="hljs-keyword">range</span> nums {
        resChan &lt;- process(num)
    }
}

<span class="hljs-comment">// æ‰‡å…¥ï¼šæ±‡æ€»å¤šgoroutineç»“æœ</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">fanIn</span><span class="hljs-params">(resChan &lt;-<span class="hljs-keyword">chan</span> <span class="hljs-type">int</span>, count <span class="hljs-type">int</span>)</span></span> []<span class="hljs-type">int</span> {
    <span class="hljs-keyword">var</span> result []<span class="hljs-type">int</span>
    <span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; count; i++ {
        result = <span class="hljs-built_in">append</span>(result, &lt;-resChan)
    }
    <span class="hljs-keyword">return</span> result
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    nums := []<span class="hljs-type">int</span>{<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>} <span class="hljs-comment">// åŸå§‹æ•°æ®</span>
    resChan := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> <span class="hljs-type">int</span>, <span class="hljs-built_in">len</span>(nums))
    <span class="hljs-keyword">var</span> wg sync.WaitGroup

    <span class="hljs-comment">// æ‰‡å‡ºï¼šæ‹†åˆ†2ä¸ªgoroutineå¤„ç†</span>
    wg.Add(<span class="hljs-number">2</span>)
    <span class="hljs-keyword">go</span> fanOut(nums[:<span class="hljs-number">3</span>], &amp;wg, resChan) <span class="hljs-comment">// å¤„ç†å‰3ä¸ª</span>
    <span class="hljs-keyword">go</span> fanOut(nums[<span class="hljs-number">3</span>:], &amp;wg, resChan) <span class="hljs-comment">// å¤„ç†å3ä¸ª</span>

    <span class="hljs-comment">// ç­‰å¾…æ‰€æœ‰æ‰‡å‡ºgoroutineå®Œæˆï¼Œå…³é—­ç»“æœchannel</span>
    <span class="hljs-keyword">go</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> {
        wg.Wait()
        <span class="hljs-built_in">close</span>(resChan)
    }()

    <span class="hljs-comment">// æ‰‡å…¥ï¼šæ±‡æ€»ç»“æœ</span>
    result := fanIn(resChan, <span class="hljs-built_in">len</span>(nums))
    fmt.Printf(<span class="hljs-string">"æœ€ç»ˆç»“æœï¼š%v\n"</span>, result) <span class="hljs-comment">// è¾“å‡ºï¼š[1 4 9 16 25 36]</span>
}

</code></pre>
<h3 data-id="heading-27">4.3 æ ¸å¿ƒä¼˜åŠ¿ä¸é€‚ç”¨åœºæ™¯ï¼ˆè¡¨æ ¼ï¼‰</h3>





















<table><thead><tr><th>ç±»åˆ«</th><th>è¯¦æƒ…</th></tr></thead><tbody><tr><td>æ ¸å¿ƒä¼˜åŠ¿</td><td>å¹¶è¡Œå¤„ç†ä»»åŠ¡ï¼Œç¼©çŸ­æ•´ä½“è€—æ—¶ï¼›ä»»åŠ¡ç‹¬ç«‹ï¼Œå®¹é”™æ€§å¼ºï¼ˆå•ä¸ªgoroutineå¼‚å¸¸ä¸å½±å“æ•´ä½“ï¼‰</td></tr><tr><td>é€‚ç”¨åœºæ™¯</td><td>æ‰¹é‡æ•°æ®å¤„ç†ã€å¤šæ¥å£å¹¶è¡Œè°ƒç”¨ã€æ–‡ä»¶æ‰¹é‡è¯»å–ã€è®¡ç®—å¯†é›†å‹ä»»åŠ¡</td></tr><tr><td>æ³¨æ„äº‹é¡¹</td><td>goroutineæ•°é‡ä¸å®œè¿‡å¤šï¼ˆå»ºè®®â‰¤CPUæ ¸å¿ƒæ•°*2ï¼‰ï¼Œé¿å…è°ƒåº¦å¼€é”€ï¼›éœ€ç”¨WaitGroupç­‰å¾…æ‰€æœ‰ä»»åŠ¡å®Œæˆ</td></tr></tbody></table>
<h3 data-id="heading-28">4.4 å‚è€ƒé“¾æ¥</h3>
<ul>
<li>
<p>Goå®˜æ–¹åšå®¢ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgo.dev%2Fblog%2Fpipelines" target="_blank" title="https://go.dev/blog/pipelines" ref="nofollow noopener noreferrer">Go Pipelines and cancellation</a>ï¼ˆæ‰‡å…¥æ‰‡å‡ºæ ¸å¿ƒå‚è€ƒï¼‰</p>
</li>
<li>
<p>æ˜é‡‘ä¼˜è´¨æ–‡ï¼š<a href="https://juejin.cn/post/6844903901808033800" target="_blank" title="https://juejin.cn/post/6844903901808033800">Go æ‰‡å…¥æ‰‡å‡ºæ¨¡å¼å®æˆ˜</a></p>
</li>
</ul>
<h2 data-id="heading-29">äº”ã€WaitGroupï¼ˆåŒæ­¥ç­‰å¾…ç»„ï¼‰</h2>
<p>WaitGroup æ˜¯ sync åŒ…æä¾›çš„<strong>goroutineåŒæ­¥å·¥å…·</strong>ï¼Œæ ¸å¿ƒä½œç”¨ï¼š<strong>ç­‰å¾…å¤šä¸ªgoroutineå…¨éƒ¨æ‰§è¡Œå®Œæˆåï¼Œå†ç»§ç»­æ‰§è¡Œä¸»goroutine</strong>ï¼Œæ›¿ä»£äº†æ—©æœŸçš„ time.Sleepï¼ˆä¸ç²¾å‡†ã€æ•ˆç‡ä½ï¼‰ï¼Œæ˜¯å¹¶å‘å¼€å‘ä¸­æœ€å¸¸ç”¨çš„åŒæ­¥åŸè¯­ä¹‹ä¸€ã€‚</p>
<h3 data-id="heading-30">5.1 æ ¸å¿ƒæ–¹æ³•ï¼ˆ3ä¸ªï¼Œæç®€è¯´æ˜ï¼‰</h3>





















<table><thead><tr><th>æ–¹æ³•</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>wg.Add(n int)</td><td>è®¾ç½®éœ€è¦ç­‰å¾…çš„goroutineæ•°é‡ï¼ˆnä¸ºgoroutineä¸ªæ•°ï¼‰</td></tr><tr><td>wg.Done()</td><td>å½“å‰goroutineæ‰§è¡Œå®Œæˆï¼Œå°†ç­‰å¾…è®¡æ•°å‡1ï¼ˆç­‰ä»·äº wg.Add(-1)ï¼‰</td></tr><tr><td>wg.Wait()</td><td>ä¸»goroutineé˜»å¡ï¼Œç›´åˆ°ç­‰å¾…è®¡æ•°å˜ä¸º0ï¼ˆæ‰€æœ‰goroutineæ‰§è¡Œå®Œæˆï¼‰</td></tr></tbody></table>
<h3 data-id="heading-31">5.2 ç®€çŸ­ä»£ç ç¤ºä¾‹ï¼ˆ2ä¸ªé«˜é¢‘åœºæ™¯ï¼‰</h3>
<h4 data-id="heading-32">ç¤ºä¾‹1ï¼šåŸºç¡€ç”¨æ³•ï¼ˆç­‰å¾…å¤šä¸ªgoroutineå®Œæˆï¼‰</h4>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> (
    <span class="hljs-string">"fmt"</span>
    <span class="hljs-string">"sync"</span>
    <span class="hljs-string">"time"</span>
)

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">task</span><span class="hljs-params">(id <span class="hljs-type">int</span>, wg *sync.WaitGroup)</span></span> {
    <span class="hljs-keyword">defer</span> wg.Done() <span class="hljs-comment">// ç¡®ä¿æ‰§è¡Œå®Œæˆåè®¡æ•°å‡1</span>
    fmt.Printf(<span class="hljs-string">"ä»»åŠ¡%dï¼šå¼€å§‹æ‰§è¡Œ\n"</span>, id)
    time.Sleep(<span class="hljs-number">1</span> * time.Second) <span class="hljs-comment">// æ¨¡æ‹Ÿè€—æ—¶</span>
    fmt.Printf(<span class="hljs-string">"ä»»åŠ¡%dï¼šæ‰§è¡Œå®Œæˆ\n"</span>, id)
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">var</span> wg sync.WaitGroup

    <span class="hljs-comment">// ç­‰å¾…3ä¸ªgoroutine</span>
    wg.Add(<span class="hljs-number">3</span>)
    <span class="hljs-keyword">go</span> task(<span class="hljs-number">1</span>, &amp;wg)
    <span class="hljs-keyword">go</span> task(<span class="hljs-number">2</span>, &amp;wg)
    <span class="hljs-keyword">go</span> task(<span class="hljs-number">3</span>, &amp;wg)

    fmt.Println(<span class="hljs-string">"ä¸»goroutineï¼šç­‰å¾…æ‰€æœ‰ä»»åŠ¡å®Œæˆ..."</span>)
    wg.Wait() <span class="hljs-comment">// é˜»å¡ç­‰å¾…</span>
    fmt.Println(<span class="hljs-string">"ä¸»goroutineï¼šæ‰€æœ‰ä»»åŠ¡å…¨éƒ¨å®Œæˆ"</span>)
}

</code></pre>
<h4 data-id="heading-33">ç¤ºä¾‹2ï¼šç»“åˆæ‰‡å‡ºæ¨¡å¼ï¼ˆç­‰å¾…æ‰¹é‡ä»»åŠ¡ï¼‰</h4>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> (
    <span class="hljs-string">"fmt"</span>
    <span class="hljs-string">"sync"</span>
)

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">process</span><span class="hljs-params">(num <span class="hljs-type">int</span>, wg *sync.WaitGroup)</span></span> {
    <span class="hljs-keyword">defer</span> wg.Done()
    fmt.Printf(<span class="hljs-string">"å¤„ç†æ•°æ®ï¼š%dï¼Œç»“æœï¼š%d\n"</span>, num, num*<span class="hljs-number">2</span>)
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    nums := []<span class="hljs-type">int</span>{<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>}
    <span class="hljs-keyword">var</span> wg sync.WaitGroup

    <span class="hljs-comment">// æ‰‡å‡ºï¼š5ä¸ªgoroutineå¹¶è¡Œå¤„ç†</span>
    wg.Add(<span class="hljs-built_in">len</span>(nums))
    <span class="hljs-keyword">for</span> _, num := <span class="hljs-keyword">range</span> nums {
        <span class="hljs-keyword">go</span> process(num, &amp;wg)
    }

    wg.Wait()
    fmt.Println(<span class="hljs-string">"æ‰€æœ‰æ•°æ®å¤„ç†å®Œæˆ"</span>)
}

</code></pre>
<h3 data-id="heading-34">5.3 å¸¸è§è¯¯åŒºï¼ˆé¿å‘é‡ç‚¹ï¼‰</h3>
<ul>
<li>
<p>wg.Add(n) å¿…é¡»åœ¨ goroutine å¯åŠ¨å‰è°ƒç”¨ï¼Œé¿å…ä¸»goroutineå…ˆæ‰§è¡Œ wg.Wait() å¯¼è‡´è®¡æ•°ä¸º0ï¼Œæå‰é€€å‡ºï¼›</p>
</li>
<li>
<p>wg.Done() å¿…é¡»æ”¾åœ¨ goroutine æ‰§è¡Œå®Œæˆçš„ä½ç½®ï¼Œæ¨èç”¨ <code>defer wg.Done()</code>ï¼Œç¡®ä¿å³ä½¿goroutine panicï¼ˆéœ€ recoverï¼‰ä¹Ÿèƒ½æ‰§è¡Œï¼›</p>
</li>
<li>
<p>WaitGroup æ˜¯å€¼ç±»å‹ï¼Œä¼ é€’æ—¶å¿…é¡»ç”¨<strong>æŒ‡é’ˆ</strong>ï¼Œå¦åˆ™ä¼šå¤åˆ¶ä¸€ä¸ªæ–°çš„WaitGroupï¼Œæ— æ³•å®ç°åŒæ­¥ã€‚</p>
</li>
</ul>
<h3 data-id="heading-35">5.4 å‚è€ƒé“¾æ¥</h3>
<ul>
<li>Goå®˜æ–¹æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgo.dev%2Fpkg%2Fsync%2F%23WaitGroup" target="_blank" title="https://go.dev/pkg/sync/#WaitGroup" ref="nofollow noopener noreferrer">sync.WaitGroup</a></li>
</ul>
<h2 data-id="heading-36">å…­ã€Mutexäº’æ–¥é”ï¼ˆå¹¶å‘å®‰å…¨ï¼‰</h2>
<p>åœ¨å¹¶å‘å¼€å‘ä¸­ï¼Œå½“å¤šä¸ªgoroutineåŒæ—¶è®¿é—®<strong>åŒä¸€ä¸ªå…±äº«å˜é‡</strong>ï¼Œä¸”è‡³å°‘æœ‰ä¸€ä¸ªgoroutineè¿›è¡Œâ€œå†™æ“ä½œâ€æ—¶ï¼Œä¼šå‘ç”Ÿ<strong>æ•°æ®ç«äº‰</strong>ï¼Œå¯¼è‡´ç¨‹åºè¿è¡Œç»“æœä¸å¯é¢„æµ‹ã€‚Mutexï¼ˆäº’æ–¥é”ï¼‰æ˜¯ sync åŒ…æä¾›çš„æ ¸å¿ƒåŒæ­¥åŸè¯­ï¼Œæ ¸å¿ƒä½œç”¨ï¼š<strong>ä¿è¯åŒä¸€æ—¶é—´åªæœ‰ä¸€ä¸ªgoroutineèƒ½è®¿é—®å…±äº«èµ„æºï¼ˆä¸´ç•ŒåŒºï¼‰</strong>ï¼Œé¿å…æ•°æ®ç«äº‰ã€‚</p>
<h3 data-id="heading-37">6.1 æ ¸å¿ƒæ¦‚å¿µï¼ˆæç®€ï¼‰</h3>
<ul>
<li>
<p>ä¸´ç•ŒåŒºï¼šå¤šä¸ªgoroutineå…±åŒè®¿é—®çš„å…±äº«èµ„æºï¼ˆå¦‚å…±äº«å˜é‡ã€å…¨å±€å˜é‡ï¼‰ï¼›</p>
</li>
<li>
<p>äº’æ–¥é”ï¼šé€šè¿‡â€œåŠ é”-è§£é”â€æœºåˆ¶ï¼Œç¡®ä¿ä¸´ç•ŒåŒºåŒä¸€æ—¶é—´åªæœ‰ä¸€ä¸ªgoroutineè®¿é—®ï¼›</p>
</li>
<li>
<p>æ ¸å¿ƒæ–¹æ³•ï¼šLock()ï¼ˆåŠ é”ï¼‰ã€Unlock()ï¼ˆè§£é”ï¼‰ã€‚</p>
</li>
</ul>
<h3 data-id="heading-38">6.2 ç®€çŸ­ä»£ç ç¤ºä¾‹ï¼ˆæ•°æ®ç«äº‰è§£å†³ï¼‰</h3>
<h4 data-id="heading-39">ç¤ºä¾‹1ï¼šæ•°æ®ç«äº‰æ¼”ç¤ºï¼ˆæœªåŠ é”ï¼‰</h4>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> (
    <span class="hljs-string">"fmt"</span>
    <span class="hljs-string">"sync"</span>
)

<span class="hljs-keyword">var</span> count <span class="hljs-type">int</span> = <span class="hljs-number">0</span>

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">increment</span><span class="hljs-params">(wg *sync.WaitGroup)</span></span> {
    <span class="hljs-keyword">defer</span> wg.Done()
    <span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">1000</span>; i++ {
        count++ <span class="hljs-comment">// å…±äº«å˜é‡å†™æ“ä½œï¼Œæ— é”ä¼šå¯¼è‡´æ•°æ®ç«äº‰</span>
    }
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">var</span> wg sync.WaitGroup
    wg.Add(<span class="hljs-number">2</span>)

    <span class="hljs-keyword">go</span> increment(&amp;wg)
    <span class="hljs-keyword">go</span> increment(&amp;wg)

    wg.Wait()
    fmt.Printf(<span class="hljs-string">"æœ€ç»ˆcountï¼š%dï¼ˆé¢„æœŸ2000ï¼Œå®é™…éšæœºï¼‰\n"</span>, count)
}

</code></pre>
<h4 data-id="heading-40">ç¤ºä¾‹2ï¼šåŠ Mutexè§£å†³æ•°æ®ç«äº‰</h4>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> (
    <span class="hljs-string">"fmt"</span>
    <span class="hljs-string">"sync"</span>
)

<span class="hljs-keyword">var</span> (
    count <span class="hljs-type">int</span> = <span class="hljs-number">0</span>
    mu    sync.Mutex <span class="hljs-comment">// å®šä¹‰äº’æ–¥é”</span>
)

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">increment</span><span class="hljs-params">(wg *sync.WaitGroup)</span></span> {
    <span class="hljs-keyword">defer</span> wg.Done()
    <span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">1000</span>; i++ {
        mu.Lock()   <span class="hljs-comment">// åŠ é”ï¼Œè¿›å…¥ä¸´ç•ŒåŒº</span>
        count++     <span class="hljs-comment">// ä¸´ç•ŒåŒºæ“ä½œï¼ˆå…±äº«å˜é‡ï¼‰</span>
        mu.Unlock() <span class="hljs-comment">// è§£é”ï¼Œé€€å‡ºä¸´ç•ŒåŒº</span>
    }
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">var</span> wg sync.WaitGroup
    wg.Add(<span class="hljs-number">2</span>)

    <span class="hljs-keyword">go</span> increment(&amp;wg)
    <span class="hljs-keyword">go</span> increment(&amp;wg)

    wg.Wait()
    fmt.Printf(<span class="hljs-string">"æœ€ç»ˆcountï¼š%dï¼ˆé¢„æœŸ2000ï¼Œç»“æœç¨³å®šï¼‰\n"</span>, count)
}

</code></pre>
<h3 data-id="heading-41">6.3 å…³é”®æ³¨æ„äº‹é¡¹ï¼ˆè¡¨æ ¼ï¼‰</h3>

























<table><thead><tr><th>æ³¨æ„ç‚¹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>Lock/Unlock æˆå¯¹å‡ºç°</td><td>å¿…é¡»ç”¨ defer mu.Unlock() ç¡®ä¿è§£é”ï¼Œé¿å…goroutine panicå¯¼è‡´é”æœªé‡Šæ”¾ï¼ˆæ­»é”ï¼‰</td></tr><tr><td>é”ç²’åº¦è¦å°</td><td>ä¸´ç•ŒåŒºä»£ç åº”å°½å¯èƒ½ç²¾ç®€ï¼ŒåªåŒ…è£¹å…±äº«èµ„æºæ“ä½œï¼Œå‡å°‘é”çš„æŒæœ‰æ—¶é—´ï¼ˆæé«˜å¹¶å‘æ•ˆç‡ï¼‰</td></tr><tr><td>é¿å…æ­»é”</td><td>ä¸è¦åœ¨æŒæœ‰é”çš„æƒ…å†µä¸‹ï¼Œè°ƒç”¨å…¶ä»–å¯èƒ½åŠ é”çš„å‡½æ•°ï¼›ä¸è¦å¤šä¸ªé”äº¤å‰æŒæœ‰</td></tr><tr><td>è¯»å†™åˆ†ç¦»</td><td>è‹¥è¯»å¤šå†™å°‘ï¼Œæ¨èç”¨ RWMutexï¼ˆè¯»å†™é”ï¼‰ï¼Œæé«˜è¯»æ“ä½œå¹¶å‘æ•ˆç‡ï¼ˆåç»­è¡¥å……ï¼‰</td></tr></tbody></table>
<h3 data-id="heading-42">6.4 å‚è€ƒé“¾æ¥</h3>
<ul>
<li>
<p>Goå®˜æ–¹æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgo.dev%2Fpkg%2Fsync%2F%23Mutex" target="_blank" title="https://go.dev/pkg/sync/#Mutex" ref="nofollow noopener noreferrer">sync.Mutex</a></p>
</li>
<li>
<p>æ˜é‡‘ä¼˜è´¨æ–‡ï¼š<a href="https://juejin.cn/post/6844903902543136775" target="_blank" title="https://juejin.cn/post/6844903902543136775">Go Mutex è¯¦è§£ä¸é¿å‘</a></p>
</li>
</ul>
<h2 data-id="heading-43">ä¸ƒã€Onceå•ä¾‹ï¼ˆåªæ‰§è¡Œä¸€æ¬¡ï¼‰</h2>
<p>Once æ˜¯ sync åŒ…æä¾›çš„<strong>å•ä¾‹å·¥å…·</strong>ï¼Œæ ¸å¿ƒä½œç”¨ï¼š<strong>ä¿è¯æŸä¸ªå‡½æ•°åœ¨æ•´ä¸ªç¨‹åºç”Ÿå‘½å‘¨æœŸä¸­ï¼Œåªè¢«æ‰§è¡Œä¸€æ¬¡</strong>ï¼Œæ— è®ºæœ‰å¤šå°‘ä¸ªgoroutineåŒæ—¶è°ƒç”¨ï¼Œé€‚ç”¨äºå•ä¾‹åˆå§‹åŒ–ã€èµ„æºä¸€æ¬¡æ€§åŠ è½½ç­‰åœºæ™¯ï¼ˆæ›¿ä»£äº†ä¼ ç»Ÿçš„åŒé‡æ£€æŸ¥é”ï¼Œæ›´ç®€æ´ã€å®‰å…¨ï¼‰ã€‚</p>
<h3 data-id="heading-44">7.1 æ ¸å¿ƒåŸç†ä¸æ–¹æ³•</h3>
<ul>
<li>
<p>æ ¸å¿ƒæ–¹æ³•ï¼š<code>once.Do(f func())</code>ï¼Œä¼ å…¥éœ€è¦åªæ‰§è¡Œä¸€æ¬¡çš„å‡½æ•°fï¼›</p>
</li>
<li>
<p>æ ¸å¿ƒåŸç†ï¼šOnce å†…éƒ¨ç»´æŠ¤ä¸€ä¸ªå¸ƒå°”å€¼å’Œä¸€ä¸ªäº’æ–¥é”ï¼Œç¡®ä¿å‡½æ•°fåªè¢«æ‰§è¡Œä¸€æ¬¡ï¼Œåç»­è°ƒç”¨ä¼šç›´æ¥è¿”å›ï¼Œä¸æ‰§è¡Œfã€‚</p>
</li>
</ul>
<h3 data-id="heading-45">7.2 ç®€çŸ­ä»£ç ç¤ºä¾‹ï¼ˆ2ä¸ªæ ¸å¿ƒåœºæ™¯ï¼‰</h3>
<h4 data-id="heading-46">ç¤ºä¾‹1ï¼šåŸºç¡€å•ä¾‹åˆå§‹åŒ–</h4>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> (
    <span class="hljs-string">"fmt"</span>
    <span class="hljs-string">"sync"</span>
)

<span class="hljs-comment">// å•ä¾‹å¯¹è±¡ï¼ˆæ¨¡æ‹Ÿé…ç½®ã€æ•°æ®åº“è¿æ¥ç­‰ï¼‰</span>
<span class="hljs-keyword">type</span> Config <span class="hljs-keyword">struct</span> {
    AppName <span class="hljs-type">string</span>
    Port    <span class="hljs-type">int</span>
}

<span class="hljs-keyword">var</span> (
    config *Config
    once   sync.Once <span class="hljs-comment">// å®šä¹‰Onceå®ä¾‹</span>
)

<span class="hljs-comment">// åˆå§‹åŒ–å•ä¾‹ï¼ˆç¡®ä¿åªæ‰§è¡Œä¸€æ¬¡ï¼‰</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">initConfig</span><span class="hljs-params">()</span></span> {
    fmt.Println(<span class="hljs-string">"åˆå§‹åŒ–é…ç½®ï¼ˆåªæ‰§è¡Œä¸€æ¬¡ï¼‰"</span>)
    config = &amp;Config{
        AppName: <span class="hljs-string">"Goå¹¶å‘å®æˆ˜"</span>,
        Port:    <span class="hljs-number">8080</span>,
    }
}

<span class="hljs-comment">// è·å–å•ä¾‹å¯¹è±¡</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">GetConfig</span><span class="hljs-params">()</span></span> *Config {
    once.Do(initConfig) <span class="hljs-comment">// è°ƒç”¨once.Doï¼Œç¡®ä¿initConfigåªæ‰§è¡Œä¸€æ¬¡</span>
    <span class="hljs-keyword">return</span> config
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">var</span> wg sync.WaitGroup
    wg.Add(<span class="hljs-number">5</span>)

    <span class="hljs-comment">// 5ä¸ªgoroutineåŒæ—¶è°ƒç”¨GetConfigï¼ŒéªŒè¯initConfigåªæ‰§è¡Œä¸€æ¬¡</span>
    <span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">5</span>; i++ {
        <span class="hljs-keyword">go</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(id <span class="hljs-type">int</span>)</span></span> {
            <span class="hljs-keyword">defer</span> wg.Done()
            cfg := GetConfig()
            fmt.Printf(<span class="hljs-string">"goroutine%dï¼šè·å–é…ç½®ï¼ŒAppName=%sï¼ŒPort=%d\n"</span>, id, cfg.AppName, cfg.Port)
        }(i)
    }

    wg.Wait()
}

</code></pre>
<p>è¿è¡Œç»“æœï¼š
åˆå§‹åŒ–é…ç½®ï¼ˆåªæ‰§è¡Œä¸€æ¬¡ï¼‰
goroutine0ï¼šè·å–é…ç½®ï¼ŒAppName=Goå¹¶å‘å®æˆ˜ï¼ŒPort=8080
goroutine1ï¼šè·å–é…ç½®ï¼ŒAppName=Goå¹¶å‘å®æˆ˜ï¼ŒPort=8080
goroutine2ï¼šè·å–é…ç½®ï¼ŒAppName=Goå¹¶å‘å®æˆ˜ï¼ŒPort=8080
goroutine3ï¼šè·å–é…ç½®ï¼ŒAppName=Goå¹¶å‘å®æˆ˜ï¼ŒPort=8080
goroutine4ï¼šè·å–é…ç½®ï¼ŒAppName=Goå¹¶å‘å®æˆ˜ï¼ŒPort=8080</p>
<h4 data-id="heading-47">ç¤ºä¾‹2ï¼šèµ„æºä¸€æ¬¡æ€§åŠ è½½ï¼ˆæ¨¡æ‹Ÿæ•°æ®åº“è¿æ¥ï¼‰</h4>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> (
    <span class="hljs-string">"fmt"</span>
    <span class="hljs-string">"sync"</span>
)

<span class="hljs-keyword">var</span> (
    dbConn <span class="hljs-type">string</span>       <span class="hljs-comment">// æ¨¡æ‹Ÿæ•°æ®åº“è¿æ¥</span>
    once   sync.Once    <span class="hljs-comment">// å…¨å±€Onceå®ä¾‹</span>
)

<span class="hljs-comment">// æ¨¡æ‹Ÿæ•°æ®åº“è¿æ¥åˆå§‹åŒ–ï¼ˆè€—æ—¶æ“ä½œï¼Œéœ€åªæ‰§è¡Œä¸€æ¬¡ï¼‰</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">initDB</span><span class="hljs-params">()</span></span> {
    fmt.Println(<span class="hljs-string">"æ­£åœ¨åˆå§‹åŒ–æ•°æ®åº“è¿æ¥..."</span>)
    <span class="hljs-comment">// æ¨¡æ‹Ÿè€—æ—¶æ“ä½œï¼ˆå¦‚å»ºç«‹TCPè¿æ¥ã€è®¤è¯ï¼‰</span>
    dbConn = <span class="hljs-string">"mysql://user:pass@localhost:3306/db"</span>
    fmt.Println(<span class="hljs-string">"æ•°æ®åº“è¿æ¥åˆå§‹åŒ–å®Œæˆ"</span>)
}

<span class="hljs-comment">// è·å–æ•°æ®åº“è¿æ¥</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">GetDBConn</span><span class="hljs-params">()</span></span> <span class="hljs-type">string</span> {
    once.Do(initDB) <span class="hljs-comment">// ç¡®ä¿initDBåªæ‰§è¡Œä¸€æ¬¡ï¼Œå³ä½¿å¤šgoroutineå¹¶å‘è°ƒç”¨</span>
    <span class="hljs-keyword">return</span> dbConn
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">var</span> wg sync.WaitGroup
    wg.Add(<span class="hljs-number">3</span>)

    <span class="hljs-comment">// 3ä¸ªgoroutineå¹¶å‘è·å–æ•°æ®åº“è¿æ¥</span>
    <span class="hljs-keyword">go</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">defer</span> wg.Done()
        conn := GetDBConn()
        fmt.Printf(<span class="hljs-string">"goroutine1ï¼šè·å–DBè¿æ¥ï¼š%s\n"</span>, conn)
    }()

    <span class="hljs-keyword">go</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">defer</span> wg.Done()
        conn := GetDBConn()
        fmt.Printf(<span class="hljs-string">"goroutine2ï¼šè·å–DBè¿æ¥ï¼š%s\n"</span>, conn)
    }()

    <span class="hljs-keyword">go</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">defer</span> wg.Done()
        conn := GetDBConn()
        fmt.Printf(<span class="hljs-string">"goroutine3ï¼šè·å–DBè¿æ¥ï¼š%s\n"</span>, conn)
    }()

    wg.Wait()
    fmt.Println(<span class="hljs-string">"ç¨‹åºæ‰§è¡Œå®Œæˆ"</span>)
}

</code></pre>
<p>è¿è¡Œç»“æœï¼š
æ­£åœ¨åˆå§‹åŒ–æ•°æ®åº“è¿æ¥...
æ•°æ®åº“è¿æ¥åˆå§‹åŒ–å®Œæˆ
goroutine1ï¼šè·å–DBè¿æ¥ï¼šmysql://user:pass@localhost:3306/db
goroutine2ï¼šè·å–DBè¿æ¥ï¼šmysql://user:pass@localhost:3306/db
goroutine3ï¼šè·å–DBè¿æ¥ï¼šmysql://user:pass@localhost:3306/db
ç¨‹åºæ‰§è¡Œå®Œæˆ</p>
<h3 data-id="heading-48">7.3 å¸¸è§è¯¯åŒºï¼ˆé¿å‘é‡ç‚¹ï¼‰</h3>
<ul>
<li>
<p>once.Do(f) ä¸­çš„å‡½æ•°f<strong>ä¸èƒ½æœ‰å‚æ•°å’Œè¿”å›å€¼</strong>ï¼Œè‹¥éœ€ä¼ é€’å‚æ•°/è·å–è¿”å›å€¼ï¼Œå¯é€šè¿‡å…¨å±€å˜é‡ã€é—­åŒ…å®ç°ï¼ˆå¦‚ç¤ºä¾‹1ä¸­çš„configã€ç¤ºä¾‹2ä¸­çš„dbConnï¼‰ï¼›</p>
</li>
<li>
<p>Once å®ä¾‹å¿…é¡»æ˜¯<strong>å…¨å±€æˆ–é€šè¿‡æŒ‡é’ˆä¼ é€’</strong>ï¼Œè‹¥ä¸ºå±€éƒ¨å˜é‡ï¼Œä¼šå¯¼è‡´å¤šä¸ªOnceå®ä¾‹ï¼Œæ— æ³•ä¿è¯å‡½æ•°åªæ‰§è¡Œä¸€æ¬¡ï¼›</p>
</li>
<li>
<p>å³ä½¿å¤šä¸ªgoroutineåŒæ—¶è°ƒç”¨ once.Do(f)ï¼Œä¹Ÿåªä¼šæœ‰ä¸€ä¸ªgoroutineæ‰§è¡Œfï¼Œå…¶ä»–goroutineä¼šé˜»å¡ç­‰å¾…fæ‰§è¡Œå®Œæˆï¼Œè€Œéç›´æ¥è¿”å›ï¼›</p>
</li>
<li>
<p>é¿å…åœ¨få‡½æ•°ä¸­è°ƒç”¨ once.Do(f)ï¼ˆé€’å½’è°ƒç”¨ï¼‰ï¼Œä¼šå¯¼è‡´æ­»é”ã€‚</p>
</li>
</ul>
<h3 data-id="heading-49">7.4 Once vs åŒé‡æ£€æŸ¥é”ï¼ˆè¡¨æ ¼å¯¹æ¯”ï¼‰</h3>

























<table><thead><tr><th>å¯¹æ¯”ç»´åº¦</th><th>sync.Once</th><th>åŒé‡æ£€æŸ¥é”ï¼ˆDouble-Check Lockï¼‰</th></tr></thead><tbody><tr><td>ç®€æ´åº¦</td><td>æé«˜ï¼Œåªéœ€è°ƒç”¨once.Do(f)ï¼Œæ— éœ€æ‰‹åŠ¨åŠ é”è§£é”</td><td>å¤æ‚ï¼Œéœ€æ‰‹åŠ¨åŠ é”ã€è§£é”ï¼Œè¿˜è¦ä¸¤æ¬¡åˆ¤æ–­å•ä¾‹æ˜¯å¦åˆå§‹åŒ–</td></tr><tr><td>å®‰å…¨æ€§</td><td>å®˜æ–¹å®ç°ï¼Œæ— å¹¶å‘å®‰å…¨é—®é¢˜ï¼Œé€‚é…æ‰€æœ‰Goç‰ˆæœ¬</td><td>æ˜“å‡ºé”™ï¼Œéœ€è€ƒè™‘CPUæŒ‡ä»¤é‡æ’ï¼Œä½ç‰ˆæœ¬Goéœ€ç”¨volatileä¿®é¥°å˜é‡</td></tr><tr><td>é€‚ç”¨åœºæ™¯</td><td>å•ä¾‹åˆå§‹åŒ–ã€èµ„æºä¸€æ¬¡æ€§åŠ è½½ï¼Œæ¨èé¦–é€‰</td><td>ä¸æ¨èåœ¨Goä¸­ä½¿ç”¨ï¼Œä»…ç”¨äºäº†è§£å¹¶å‘å®‰å…¨æ€æƒ³</td></tr></tbody></table>
<h3 data-id="heading-50">7.5 å‚è€ƒé“¾æ¥</h3>
<ul>
<li>
<p>Goå®˜æ–¹æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgo.dev%2Fpkg%2Fsync%2F%23Once" target="_blank" title="https://go.dev/pkg/sync/#Once" ref="nofollow noopener noreferrer">sync.Once</a></p>
</li>
<li>
<p>æ˜é‡‘ä¼˜è´¨æ–‡ï¼š<a href="https://juejin.cn/post/6844903902875686926" target="_blank" title="https://juejin.cn/post/6844903902875686926">Go sync.Once æºç è§£æä¸å®æˆ˜</a></p>
</li>
</ul>
<h2 data-id="heading-51">å…«ã€æœ¬ç« æ€»ç»“</h2>
<p>æœ¬ç« å›´ç»•Goå¹¶å‘è¿›é˜¶æ ¸å¿ƒå†…å®¹å±•å¼€ï¼Œä» select å¤šè·¯å¤ç”¨ã€è¶…æ—¶æ§åˆ¶ã€å¿ƒè·³æœºåˆ¶ç­‰åŸºç¡€æŠ€å·§ï¼Œåˆ°æ‰‡å…¥æ‰‡å‡ºå¹¶å‘æ¨¡å¼ï¼Œå†åˆ° WaitGroupã€Mutexã€Once ä¸‰å¤§æ ¸å¿ƒåŒæ­¥åŸè¯­ï¼Œå…¨ç¨‹ä»¥â€œç®€çŸ­å¯è¿è¡Œä»£ç +é¿å‘æç¤º+ä¼˜è´¨é“¾æ¥â€ä¸ºæ ¸å¿ƒï¼Œè¦†ç›–å®é™…å¼€å‘ä¸­80%çš„å¹¶å‘åœºæ™¯ï¼Œæ ¸å¿ƒè¦ç‚¹æ±‡æ€»å¦‚ä¸‹ï¼š</p>
<ul>
<li>
<p>selectï¼šä¸“é—¨ç”¨äºchannelå¤šè·¯ç›‘å¬ï¼Œæ”¯æŒé˜»å¡/éé˜»å¡æ¨¡å¼ï¼Œå¤šä¸ªå°±ç»ªåˆ†æ”¯éšæœºé€‰æ‹©ï¼Œé¿å…ç©ºselectï¼›</p>
</li>
<li>
<p>è¶…æ—¶æ§åˆ¶ï¼šåŸºäº select + time.After å®ç°ï¼Œæ— éœ€ç¬¬ä¸‰æ–¹åº“ï¼Œå…³é”®æ˜¯è¶…æ—¶åç»ˆæ­¢goroutineï¼Œé¿å…èµ„æºæ³„éœ²ï¼›</p>
</li>
<li>
<p>å¿ƒè·³æœºåˆ¶ï¼šåŸºäº select + time.Ticker å®ç°ï¼Œç”¨äºæ£€æµ‹goroutine/æœåŠ¡å­˜æ´»ï¼ŒTickerä½¿ç”¨åéœ€è°ƒç”¨Stop()ï¼›</p>
</li>
<li>
<p>æ‰‡å…¥æ‰‡å‡ºï¼šæ‹†åˆ†ä»»åŠ¡å¹¶è¡Œå¤„ç†ã€æ±‡æ€»ç»“æœï¼Œæé«˜æ‰¹é‡ä»»åŠ¡æ•ˆç‡ï¼Œæ³¨æ„æ§åˆ¶goroutineæ•°é‡é¿å…è°ƒåº¦å¼€é”€ï¼›</p>
</li>
<li>
<p>WaitGroupï¼šç­‰å¾…å¤šä¸ªgoroutineå®Œæˆï¼Œæ ¸å¿ƒæ˜¯Add/Done/Waitä¸‰ä»¶å¥—ï¼Œä¼ é€’æ—¶å¿…é¡»ç”¨æŒ‡é’ˆï¼›</p>
</li>
<li>
<p>Mutexï¼šè§£å†³æ•°æ®ç«äº‰ï¼Œä¿è¯ä¸´ç•ŒåŒºåŒä¸€æ—¶é—´åªæœ‰ä¸€ä¸ªgoroutineè®¿é—®ï¼Œæ ¸å¿ƒæ˜¯Lock/Unlockæˆå¯¹å‡ºç°ï¼Œæ§åˆ¶é”ç²’åº¦ï¼›</p>
</li>
<li>
<p>Onceï¼šä¿è¯å‡½æ•°åªæ‰§è¡Œä¸€æ¬¡ï¼Œé€‚ç”¨äºå•ä¾‹åˆå§‹åŒ–ã€èµ„æºåŠ è½½ï¼Œæ¯”åŒé‡æ£€æŸ¥é”æ›´ç®€æ´å®‰å…¨ã€‚</p>
</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[2026 å¹´æœ€å€¼å¾—ä½¿ç”¨çš„ 7 æ¬¾ PHP ç®¡ç†åå°æ¡†æ¶æ¨è]]></title>    <link>https://juejin.cn/post/7602850166731423753</link>    <guid>https://juejin.cn/post/7602850166731423753</guid>    <pubDate>2026-02-05T00:42:30.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602850166731423753" data-draft-id="7602910573404667942" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="2026 å¹´æœ€å€¼å¾—ä½¿ç”¨çš„ 7 æ¬¾ PHP ç®¡ç†åå°æ¡†æ¶æ¨è"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-02-05T00:42:30.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="BingoGo"/> <meta itemprop="url" content="https://juejin.cn/user/993614242266077"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            2026 å¹´æœ€å€¼å¾—ä½¿ç”¨çš„ 7 æ¬¾ PHP ç®¡ç†åå°æ¡†æ¶æ¨è
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/993614242266077/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    BingoGo
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-05T00:42:30.000Z" title="Thu Feb 05 2026 00:42:30 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-05
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">2026 å¹´æœ€å€¼å¾—ä½¿ç”¨çš„ 7 æ¬¾ PHP ç®¡ç†åå°æ¡†æ¶æ¨è</h2>
<p>æ­å»ºä¼ä¸šçº§ PHP åå°ç®¡ç†ç³»ç»Ÿï¼Œé€‰æ‹©ä¸€æ¬¾åˆé€‚çš„ Laravel admin æ¡†æ¶è‡³å…³é‡è¦ã€‚PHP ä½œä¸º Web å¼€å‘é¢†åŸŸæœ€æˆç†Ÿçš„è¯­è¨€ä¹‹ä¸€ï¼Œæ‹¥æœ‰ä¼—å¤šä¼˜ç§€çš„åå°ç®¡ç†æ¡†æ¶ã€‚Laravel æ¡†æ¶å‡­å€Ÿä¼˜é›…çš„è¯­æ³•å’Œå®Œå–„çš„ç”Ÿæ€ï¼Œå·²æˆä¸º GitHub ä¸Š stars æœ€é«˜çš„ PHP æ¡†æ¶ï¼Œå›´ç»•å®ƒè¯ç”Ÿäº†å¤§é‡ä¼˜è´¨çš„ PHP åå°æ¡†æ¶ã€‚</p>
<p>æœ¬æ–‡å°†ä»å¼€å‘æ•ˆç‡ã€çµæ´»æ€§ã€å­¦ä¹ æˆæœ¬ä¸‰ä¸ªç»´åº¦ï¼Œä¸ºä½ æ¨è 2026 å¹´æœ€å€¼å¾—ä½¿ç”¨çš„ 7 æ¬¾ PHP admin åå°ç®¡ç†ç³»ç»Ÿã€‚æ— è®ºä½ æ˜¯éœ€è¦å¿«é€Ÿæ­å»ºä¼ä¸šåå°ã€å¼€å‘ SaaS å¹³å°ï¼Œè¿˜æ˜¯æ„å»ºç”µå•†ç®¡ç†ç³»ç»Ÿï¼Œéƒ½èƒ½æ‰¾åˆ°é€‚åˆçš„ Laravel åå°ç®¡ç†è§£å†³æ–¹æ¡ˆã€‚</p>
<h3 data-id="heading-1">PHP åå°ç®¡ç†æ¡†æ¶é€‰å‹æŒ‡å—</h3>
<p>åœ¨é€‰æ‹© PHP ç®¡ç†åå°æ¡†æ¶ä¹‹å‰ï¼Œéœ€è¦å…ˆæ˜ç¡®é¡¹ç›®éœ€æ±‚ã€‚ä¸åŒç±»å‹çš„ Laravel admin æ¡†æ¶é€‚ç”¨äºä¸åŒåœºæ™¯ï¼Œé€‰é”™æ¡†æ¶å¯èƒ½å¯¼è‡´åæœŸå¼€å‘æˆæœ¬å¤§å¹…å¢åŠ ã€‚ä¸‹é¢æŒ‰æŠ½è±¡ç¨‹åº¦ä»ä½åˆ°é«˜ï¼Œä»‹ç»ä¸‰ç§ä¸»æµçš„ PHP åå°æ¡†æ¶ç±»å‹ï¼š</p>
<h4 data-id="heading-2">è„šæ‰‹æ¶å‹</h4>
<p>è„šæ‰‹æ¶å‹æ¡†æ¶é€šè¿‡å‘½ä»¤è¡Œè‡ªåŠ¨ç”Ÿæˆ Modelã€Controllerã€è·¯ç”±å’ŒåŸºç¡€ CRUD ä»£ç ã€‚ä¼˜åŠ¿æ˜¯çµæ´»æ€§é«˜ï¼Œç”Ÿæˆçš„ä»£ç å®Œå…¨å¯æ§ï¼›åŠ£åŠ¿æ˜¯åæœŸç»´æŠ¤éœ€è¦æ‰‹åŠ¨ä¿®æ”¹ç”Ÿæˆçš„ä»£ç ã€‚</p>
<h4 data-id="heading-3">CRUD æ¥å£å‹</h4>
<p>CRUD æ¥å£å‹æ¡†æ¶æä¾›ä¸€å¥—å®Œæ•´çš„åå°ç®¡ç†ç»„ä»¶ï¼Œå¼€å‘è€…åªéœ€å®šä¹‰èµ„æºé…ç½®å³å¯è‡ªåŠ¨ç”Ÿæˆç®¡ç†ç•Œé¢ã€‚ä»£ç é‡ç›¸å¯¹è¾ƒå°‘ï¼Œä½†é‡åˆ°å¤æ‚ä¸šåŠ¡é€»è¾‘æ—¶éœ€è¦é¢å¤–æ‰©å±•ã€‚æœ¬æ–‡æ¨èçš„ Laravel Novaã€CatchAdminã€Filamentã€Backpackã€Orchid éƒ½å±äºè¿™ç§ç±»å‹ã€‚è¿™ç±» PHP åå°ç®¡ç†ç³»ç»Ÿåœ¨çµæ´»æ€§å’Œå¼€å‘æ•ˆç‡ä¹‹é—´å–å¾—äº†è‰¯å¥½å¹³è¡¡ï¼Œæ˜¯ç›®å‰æœ€ä¸»æµçš„é€‰æ‹©ã€‚</p>
<h4 data-id="heading-4">å¯è§†åŒ–ç¼–ç¨‹</h4>
<p>å¯è§†åŒ–ç¼–ç¨‹å‹æ¡†æ¶æŠ½è±¡ç¨‹åº¦æœ€é«˜ï¼Œé€šè¿‡æ‹–æ‹½æˆ–é…ç½®å³å¯ç”Ÿæˆåå°ç•Œé¢ã€‚éƒ¨ç½²å¿«é€Ÿï¼Œå¯¹ç¼–ç¨‹èƒ½åŠ›è¦æ±‚è¾ƒä½ï¼Œä½†çµæ´»æ€§ä¹Ÿç›¸å¯¹å—é™ã€‚Voyager å’Œ QuickAdminPanel å±äºè¿™ç§ç±»å‹ã€‚</p>
<h3 data-id="heading-5">2026 å¹´ 7 æ¬¾ PHP åå°ç®¡ç†æ¡†æ¶è¯¦è§£</h3>
<p>ä»¥ä¸‹æŒ‰æ¨èé¡ºåºä»‹ç» 7 æ¬¾ä¸»æµçš„ Laravel admin åå°ç®¡ç†æ¡†æ¶ï¼Œæ¶µç›–ä»˜è´¹å’Œå¼€æºæ–¹æ¡ˆï¼Œé€‚ç”¨äºä»ä¸ªäººé¡¹ç›®åˆ°ä¼ä¸šçº§åº”ç”¨çš„å„ç§åœºæ™¯ã€‚</p>
<h4 data-id="heading-6">Laravel Nova - å®˜æ–¹å‡ºå“çš„æ ‡æ†ä¹‹ä½œ</h4>
<ul>
<li><strong>å®˜ç½‘</strong>: <a href="https://link.juejin.cn?target=https%3A%2F%2Fnova.laravel.com%2F" target="_blank" title="https://nova.laravel.com/" ref="nofollow noopener noreferrer">nova.laravel.com/</a></li>
<li><strong>ç±»å‹</strong>: CRUD æ¥å£å‹</li>
<li><strong>ä»·æ ¼</strong>: <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>99</mn><mtext>ï¼ˆå•é¡¹ç›®ï¼‰</mtext><mi mathvariant="normal">/</mi></mrow><annotation encoding="application/x-tex">99ï¼ˆå•é¡¹ç›®ï¼‰/ </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord">99</span><span class="mord cjk_fallback">ï¼ˆå•é¡¹ç›®ï¼‰</span><span class="mord">/</span></span></span></span></span>299ï¼ˆæ— é™é¡¹ç›®ï¼‰</li>
</ul>
<p>Laravel Nova æ˜¯ Laravel æ¡†æ¶ä½œè€… Taylor Otwell äº²è‡ªæ‰“é€ çš„å®˜æ–¹åå°ç®¡ç†ç³»ç»Ÿã€‚ä½œä¸ºå®˜æ–¹äº§å“ï¼ŒNova åœ¨æ¶æ„è®¾è®¡å’Œæ€§èƒ½ä¼˜åŒ–ä¸Šéƒ½è¾¾åˆ°äº†æé«˜æ°´å‡†ã€‚</p>
<p>Nova é‡‡ç”¨ Vue.js æ„å»ºå‰ç«¯ï¼Œæä¾›äº†èµ„æºç®¡ç†ã€æœç´¢è¿‡æ»¤ã€å›¾è¡¨ç»Ÿè®¡ã€è‡ªå®šä¹‰æ“ä½œç­‰å¼€ç®±å³ç”¨çš„åŠŸèƒ½ã€‚æ‰©å±•ç”Ÿæ€éå¸¸å®Œå–„ï¼Œå‡ ä¹æ¯å¤©éƒ½æœ‰æ–°çš„æ‰©å±•åŒ…åœ¨ Nova Packages ä¸Šçº¿ã€‚</p>
<p><strong>ä¼˜åŠ¿</strong>:</p>
<ul>
<li>å®˜æ–¹ç»´æŠ¤ï¼Œæ›´æ–°åŠæ—¶ï¼Œä¸ Laravel ç‰ˆæœ¬åŒæ­¥</li>
<li>æ€§èƒ½ä¼˜åŒ–åˆ°æè‡´ï¼Œå¤§æ•°æ®é‡ä¸‹è¡¨ç°ç¨³å®š</li>
<li>æ‰©å±•ç”Ÿæ€ä¸°å¯Œï¼Œè¦†ç›–å„ç§ä¸šåŠ¡åœºæ™¯</li>
</ul>
<p><strong>åŠ£åŠ¿</strong>:</p>
<ul>
<li>ä»˜è´¹äº§å“ï¼Œå°å›¢é˜Ÿå¯èƒ½æœ‰æˆæœ¬å‹åŠ›</li>
<li>æºç ä¸å¼€æ”¾ï¼Œæ·±åº¦å®šåˆ¶å—é™</li>
</ul>
<p><strong>é€‚ç”¨åœºæ™¯</strong>: å•†ä¸šé¡¹ç›®ã€å¯¹ç¨³å®šæ€§è¦æ±‚é«˜çš„ä¼ä¸šçº§åº”ç”¨ã€‚</p>
<h4 data-id="heading-7">CatchAdmin - ä¼ä¸šçº§å‰åç«¯åˆ†ç¦»æ–¹æ¡ˆ</h4>
<ul>
<li><strong>å®˜ç½‘</strong>: <a href="https://link.juejin.cn?target=https%3A%2F%2Fcatchadmin.com%2F" target="_blank" title="https://catchadmin.com/" ref="nofollow noopener noreferrer">catchadmin.com/</a></li>
<li><strong>æ–‡æ¡£</strong>: <a href="https://link.juejin.cn?target=https%3A%2F%2Fdoc.catchadmin.com%2F" target="_blank" title="https://doc.catchadmin.com/" ref="nofollow noopener noreferrer">doc.catchadmin.com/</a></li>
<li><strong>GitHub</strong>: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fcatch-admin%2Fcatchadmin" target="_blank" title="https://github.com/catch-admin/catchadmin" ref="nofollow noopener noreferrer">github.com/catch-adminâ€¦</a></li>
<li><strong>Demo</strong>: <a href="https://link.juejin.cn?target=https%3A%2F%2Fv5.catchadmin.com" target="_blank" title="https://v5.catchadmin.com" ref="nofollow noopener noreferrer">v5.catchadmin.com</a></li>
</ul>
<p>CatchAdmin æ˜¯ä¸€æ¬¾åŸºäº Laravel 12.x å’Œ Vue 3 + Element Plus çš„ä¼ä¸šçº§å‰åç«¯åˆ†ç¦»åå°ç®¡ç†ç³»ç»Ÿã€‚å®ƒå……åˆ†åˆ©ç”¨ PHP 8+ ç‰¹æ€§ï¼Œé‡‡ç”¨ç°ä»£åŒ–æ¶æ„è®¾è®¡ï¼Œæ˜¯ç›®å‰æœ€å—æ¬¢è¿çš„å¼€æº Laravel admin æ¡†æ¶ä¹‹ä¸€ã€‚</p>
<p>å¯¹äºéœ€è¦æ­å»ºä¼ä¸šçº§ PHP åå°ç®¡ç†ç³»ç»Ÿçš„å›¢é˜Ÿæ¥è¯´ï¼ŒCatchAdmin æä¾›äº†å¼€ç®±å³ç”¨çš„å®Œæ•´è§£å†³æ–¹æ¡ˆã€‚å®ƒä¸ä»…ä»…æ˜¯ä¸€ä¸ª Laravel åå°æ¡†æ¶ï¼Œæ›´æ˜¯ä¸€å¥—ç»è¿‡ç”Ÿäº§éªŒè¯çš„ä¼ä¸šçº§å¼€å‘è„šæ‰‹æ¶ã€‚</p>
<p>CatchAdmin çš„æ ¸å¿ƒä¼˜åŠ¿åœ¨äº<strong>æ¨¡å—åŒ–è®¾è®¡</strong>ã€‚æ¯ä¸ªä¸šåŠ¡æ¨¡å—æ‹¥æœ‰ç‹¬ç«‹çš„æ§åˆ¶å™¨ã€è·¯ç”±ã€æ¨¡å‹å’Œæ•°æ®è¡¨ï¼Œæ¨¡å—ä¹‹é—´å®Œå…¨è§£è€¦ã€‚è¿™ç§æ¶æ„è®©å›¢é˜Ÿå¯ä»¥å¹¶è¡Œå¼€å‘ä¸åŒæ¨¡å—ï¼ŒåæœŸç»´æŠ¤ä¹Ÿæ›´åŠ è½»æ¾ã€‚</p>
<h5 data-id="heading-8">æ ¸å¿ƒåŠŸèƒ½</h5>
<ul>
<li><strong>ç”¨æˆ·ç®¡ç†</strong>: ç”¨æˆ·å¢åˆ æ”¹æŸ¥ã€å¯†ç é‡ç½®ã€ä¸åŒç”¨æˆ·å¯é…ç½®ä¸åŒé¦–é¡µå’ŒåŠŸèƒ½æ¨¡å—</li>
<li><strong>éƒ¨é—¨ç®¡ç†</strong>: å¤šçº§ç»„ç»‡æ¶æ„é…ç½®ï¼Œæ ‘å½¢ç»“æ„å±•ç¤ºï¼Œæ”¯æŒå±‚çº§è°ƒæ•´</li>
<li><strong>è§’è‰²æƒé™</strong>: æ ‘ç»“æ„è§’è‰²ä½“ç³»ï¼Œæ”¯æŒèœå•æƒé™ã€æŒ‰é’®çº§æƒé™ã€æ•°æ®æƒé™ä¸‰çº§ç®¡æ§</li>
<li><strong>èœå•ç®¡ç†</strong>: å¯è§†åŒ–é…ç½®ç³»ç»Ÿèœå•ã€è·¯ç”±ä¸æŒ‰é’®èµ„æºï¼Œå‰åç«¯æƒé™ä¸€è‡´</li>
<li><strong>ä»£ç ç”Ÿæˆ</strong>: ä¸€é”®ç”Ÿæˆå‰åç«¯ä»£ç ï¼ˆPHPã€Vueï¼‰åŠæ•°æ®åº“è¿ç§»æ–‡ä»¶ï¼Œç›´æ¥ç”Ÿæˆåˆ°æ¨¡å—</li>
<li><strong>æ–‡ä»¶ä¸Šä¼ </strong>: æ”¯æŒæœ¬åœ°ã€ä¸ƒç‰›äº‘ã€é˜¿é‡Œäº‘ã€è…¾è®¯äº‘ç­‰å¤šç§å­˜å‚¨æ–¹å¼</li>
<li><strong>æ—¥å¿—ç³»ç»Ÿ</strong>: æ“ä½œæ—¥å¿—ã€ç™»å½•æ—¥å¿—å®Œæ•´è®°å½•ï¼Œæ”¯æŒå¤šç»´æ£€ç´¢</li>
<li><strong>æ’ä»¶ç³»ç»Ÿ</strong>: æ’ä»¶å³ Composer åŒ…ï¼Œæ·±åº¦èå…¥ Composer ç”Ÿæ€</li>
</ul>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å¿«é€Ÿå®‰è£…ï¼Œäº”åˆ†é’Ÿå³å¯æ„å»º</span>
composer create catchadmin/catchadmin
<span class="hljs-built_in">cd</span> catchadmin
php artisan catch:install
</code></pre>
<p>CatchAdmin è¿˜æ”¯æŒ <strong>Vue å³æ—¶æ¸²æŸ“</strong>ï¼Œå‰ç«¯ä»£ç ä¿®æ”¹åæ— éœ€ç¼–è¯‘å³å¯ç”Ÿæ•ˆï¼Œå¤§å¹…æå‡å¼€å‘è°ƒè¯•æ•ˆç‡ã€‚</p>
<p><strong>ä¼˜åŠ¿</strong>:</p>
<ul>
<li>ç°ä»£åŒ–æ¶æ„ï¼ŒåŸºäº Laravel 12.x + Vue 3 + Element Plus</li>
<li>æ¨¡å—åŒ–è®¾è®¡ï¼Œä¸šåŠ¡æ¨¡å—å®Œå…¨ç‹¬ç«‹ï¼Œæ”¯æŒæŒ‰éœ€åŠ è½½</li>
<li>ä¸€é”®ä»£ç ç”Ÿæˆï¼Œå‰åç«¯ä»£ç  + æ•°æ®åº“è¿ç§»ä¸€æ­¥åˆ°ä½</li>
<li>RBAC æƒé™ç³»ç»Ÿå®Œå–„ï¼Œæ”¯æŒéƒ¨é—¨æ•°æ®éš”ç¦»å’Œ API æ¥å£æƒé™éªŒè¯</li>
<li>ä¸­æ–‡æ–‡æ¡£è¯¦å°½ï¼Œç¤¾åŒºæ´»è·ƒï¼ŒæŒç»­æ›´æ–°</li>
</ul>
<p><strong>åŠ£åŠ¿</strong>:</p>
<ul>
<li>éœ€è¦åŒæ—¶æŒæ¡ Vue å’Œ Laravel</li>
<li>ä¸“ä¸šç‰ˆéƒ¨åˆ†é«˜çº§åŠŸèƒ½éœ€ä»˜è´¹</li>
</ul>
<p><strong>é€‚ç”¨åœºæ™¯</strong>: ä¼ä¸šåå°ç®¡ç†ã€SaaS å¹³å°ã€ç”µå•†åå°ã€CRM/OA ç­‰ä¼ä¸šåº”ç”¨ã€ä¸­å¤§å‹é¡¹ç›®ã€‚</p>
<h4 data-id="heading-9">Filament - ç¤¾åŒºæœ€ç«çš„åèµ·ä¹‹ç§€</h4>
<ul>
<li><strong>å®˜ç½‘</strong>: <a href="https://link.juejin.cn?target=https%3A%2F%2Ffilamentphp.com%2F" target="_blank" title="https://filamentphp.com/" ref="nofollow noopener noreferrer">filamentphp.com/</a></li>
<li><strong>GitHub</strong>: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ffilamentphp%2Ffilament" target="_blank" title="https://github.com/filamentphp/filament" ref="nofollow noopener noreferrer">github.com/filamentphpâ€¦</a></li>
<li><strong>ç±»å‹</strong>: CRUD æ¥å£å‹</li>
<li><strong>ä»·æ ¼</strong>: å¼€æºå…è´¹ï¼ˆMIT åè®®ï¼‰</li>
</ul>
<p>Filament æ˜¯ 2021 å¹´å‘å¸ƒçš„ Laravel admin æ¡†æ¶ï¼Œè¿‘ä¸¤å¹´åœ¨ç¤¾åŒºçš„çƒ­åº¦æŒç»­æ”€å‡ï¼Œå·²æˆä¸º Laravel ç”Ÿæ€ä¸­æœ€å—æ¬¢è¿çš„å¼€æºåå°æ¡†æ¶ä¹‹ä¸€ã€‚</p>
<p>Filament åŸºäº Livewire å’Œ Alpine.js æ„å»ºï¼Œé‡‡ç”¨ Tailwind CSS è®¾è®¡ã€‚å®ƒä¸ä»…ä»…æ˜¯ä¸€ä¸ªåå°ç®¡ç†æ¡†æ¶ï¼Œè¿˜åŒ…å«è¡¨å•æ„å»ºå™¨ã€è¡¨æ ¼æ„å»ºå™¨ã€é€šçŸ¥ç³»ç»Ÿç­‰ç‹¬ç«‹ç»„ä»¶ï¼Œå¯ä»¥å•ç‹¬ä½¿ç”¨ã€‚</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-comment">// Filament èµ„æºå®šä¹‰ç¤ºä¾‹</span>
<span class="hljs-keyword">use</span> <span class="hljs-title">Filament</span>\<span class="hljs-title">Resources</span>\<span class="hljs-title">Resource</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">PostResource</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Resource</span>
</span>{
    <span class="hljs-keyword">protected</span> <span class="hljs-built_in">static</span> ?<span class="hljs-keyword">string</span> <span class="hljs-variable">$model</span> = <span class="hljs-title class_">Post</span>::<span class="hljs-variable language_">class</span>;

    <span class="hljs-keyword">public</span> <span class="hljs-built_in">static</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">form</span>(<span class="hljs-params">Form <span class="hljs-variable">$form</span></span>): <span class="hljs-title">Form</span>
    </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-variable">$form</span>-&gt;<span class="hljs-title function_ invoke__">schema</span>([
            <span class="hljs-title class_">TextInput</span>::<span class="hljs-title function_ invoke__">make</span>(<span class="hljs-string">'title'</span>)-&gt;<span class="hljs-title function_ invoke__">required</span>(),
            <span class="hljs-title class_">RichEditor</span>::<span class="hljs-title function_ invoke__">make</span>(<span class="hljs-string">'content'</span>),
            <span class="hljs-title class_">Select</span>::<span class="hljs-title function_ invoke__">make</span>(<span class="hljs-string">'status'</span>)-&gt;<span class="hljs-title function_ invoke__">options</span>([
                <span class="hljs-string">'draft'</span> =&gt; <span class="hljs-string">'è‰ç¨¿'</span>,
                <span class="hljs-string">'published'</span> =&gt; <span class="hljs-string">'å·²å‘å¸ƒ'</span>,
            ]),
        ]);
    }
}
</code></pre>
<p><strong>ä¼˜åŠ¿</strong>:</p>
<ul>
<li>å®Œå…¨å¼€æºï¼Œç¤¾åŒºè´¡çŒ®æ´»è·ƒ</li>
<li>åŸºäº Livewireï¼Œæ— éœ€ç¼–å†™ JavaScript</li>
<li>ç»„ä»¶ä¸°å¯Œï¼ŒUI è®¾è®¡ç°ä»£</li>
<li>æ–‡æ¡£è¯¦å°½ï¼Œå­¦ä¹ æ›²çº¿å¹³ç¼“</li>
</ul>
<p><strong>åŠ£åŠ¿</strong>:</p>
<ul>
<li>Livewire æœºåˆ¶å¯¹å®æ—¶æ€§è¦æ±‚é«˜çš„åœºæ™¯å¯èƒ½ä¸é€‚ç”¨</li>
<li>ç›¸æ¯” Novaï¼Œç”Ÿæ€æˆç†Ÿåº¦ç¨é€Š</li>
</ul>
<p><strong>é€‚ç”¨åœºæ™¯</strong>: å¼€æºé¡¹ç›®ã€ä¸ªäººé¡¹ç›®ã€ä¸­å°å‹ä¼ä¸šé¡¹ç›®ã€‚</p>
<h4 data-id="heading-10">Backpack - çµæ´»ä¸æ•ˆç‡çš„å¹³è¡¡</h4>
<ul>
<li><strong>å®˜ç½‘</strong>: <a href="https://link.juejin.cn?target=https%3A%2F%2Fbackpackforlaravel.com%2F" target="_blank" title="https://backpackforlaravel.com/" ref="nofollow noopener noreferrer">backpackforlaravel.com/</a></li>
<li><strong>GitHub</strong>: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Flaravel-backpack" target="_blank" title="https://github.com/laravel-backpack" ref="nofollow noopener noreferrer">github.com/laravel-bacâ€¦</a></li>
<li><strong>ç±»å‹</strong>: æ··åˆå‹</li>
<li><strong>ä»·æ ¼</strong>: éå•†ä¸šå…è´¹ / å•†ä¸šé¡¹ç›® â‚¬69 èµ·</li>
</ul>
<p>Backpack è‡ª 2016 å¹´å‘å¸ƒä»¥æ¥ï¼Œä¸€ç›´ä¿æŒç¨³å®šæ›´æ–°ã€‚å®ƒæä¾›äº†ä¸€å¥—å®Œæ•´çš„ CRUD ç»„ä»¶å’Œä¸°å¯Œçš„å­—æ®µç±»å‹ï¼ŒåŒæ—¶è¿˜æœ‰å¯è§†åŒ–å¼€å‘å·¥å…· Backpack DevToolsã€‚</p>
<p>Backpack çš„æ–‡æ¡£å†™å¾—éå¸¸è¯¦å°½ï¼Œé…æœ‰è§†é¢‘æ•™ç¨‹ï¼Œå­¦ä¹ æˆæœ¬è¾ƒä½ã€‚å®ƒçš„è®¾è®¡å“²å­¦æ˜¯ã€Œçº¦å®šä¼˜äºé…ç½®ã€ï¼Œå¤§éƒ¨åˆ†åœºæ™¯ä¸‹åªéœ€ç®€å•é…ç½®å³å¯å®Œæˆå¼€å‘ã€‚</p>
<p><strong>ä¼˜åŠ¿</strong>:</p>
<ul>
<li>æ–‡æ¡£ä¼˜ç§€ï¼Œæœ‰è§†é¢‘æ•™ç¨‹</li>
<li>å­—æ®µç±»å‹ä¸°å¯Œï¼Œè¦†ç›–å¸¸è§éœ€æ±‚</li>
<li>DevTools æ”¯æŒå¯è§†åŒ–å¼€å‘</li>
<li>ä¸»é¢˜å¯å®šåˆ¶</li>
</ul>
<p><strong>åŠ£åŠ¿</strong>:</p>
<ul>
<li>å•†ä¸šé¡¹ç›®éœ€è¦ä»˜è´¹</li>
<li>å‰ç«¯åŸºäº jQueryï¼ŒæŠ€æœ¯æ ˆç›¸å¯¹ä¼ ç»Ÿ</li>
</ul>
<p><strong>é€‚ç”¨åœºæ™¯</strong>: å¿«é€ŸåŸå‹å¼€å‘ã€å¯¹æ–‡æ¡£è¦æ±‚é«˜çš„å›¢é˜Ÿã€‚</p>
<h4 data-id="heading-11">Orchid - å¼€æºç¤¾åŒºçš„ä¼˜ç§€é€‰æ‹©</h4>
<ul>
<li><strong>å®˜ç½‘</strong>: <a href="https://link.juejin.cn?target=https%3A%2F%2Forchid.software%2F" target="_blank" title="https://orchid.software/" ref="nofollow noopener noreferrer">orchid.software/</a></li>
<li><strong>GitHub</strong>: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Forchidsoftware%2Fplatform" target="_blank" title="https://github.com/orchidsoftware/platform" ref="nofollow noopener noreferrer">github.com/orchidsoftwâ€¦</a></li>
<li><strong>ç±»å‹</strong>: CRUD æ¥å£å‹</li>
<li><strong>ä»·æ ¼</strong>: å¼€æºå…è´¹ï¼ˆMIT åè®®ï¼‰</li>
</ul>
<p>Orchid ç”±ä¿„ç½—æ–¯å¼€å‘è€… Alexandr Chernyaev åˆ›å»ºï¼Œæ˜¯ä¸€ä¸ªåŠŸèƒ½å®Œå–„çš„ Laravel åå°ç®¡ç†æ¡†æ¶ã€‚å®ƒå†…ç½®äº†è¡¨å•æ„å»ºå™¨ã€è¡¨æ ¼è¿‡æ»¤å™¨ã€æ’åºã€æœç´¢ç­‰åŠŸèƒ½ï¼Œç»†èŠ‚å¤„ç†å¾—éå¸¸åˆ°ä½ã€‚</p>
<p>Orchid çš„äº®ç‚¹åœ¨äºå®ƒçš„ Screen æ¦‚å¿µï¼Œå°†é¡µé¢é€»è¾‘å°è£…åœ¨ Screen ç±»ä¸­ï¼Œä»£ç ç»„ç»‡æ¸…æ™°ã€‚åŒæ—¶ï¼ŒOrchid æ‹¥æœ‰æ´»è·ƒçš„å¼€æºç¤¾åŒºå’Œå¤§é‡çš„èµåŠ©è€…ï¼Œä¿è¯äº†é¡¹ç›®çš„æŒç»­å‘å±•ã€‚</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-comment">// Orchid Screen ç¤ºä¾‹</span>
<span class="hljs-keyword">use</span> <span class="hljs-title">Orchid</span>\<span class="hljs-title">Screen</span>\<span class="hljs-title">Screen</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">PostListScreen</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Screen</span>
</span>{
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">query</span>(<span class="hljs-params"/>): <span class="hljs-title">array</span>
    </span>{
        <span class="hljs-keyword">return</span> [
            <span class="hljs-string">'posts'</span> =&gt; <span class="hljs-title class_">Post</span>::<span class="hljs-title function_ invoke__">paginate</span>(),
        ];
    }

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">layout</span>(<span class="hljs-params"/>): <span class="hljs-title">array</span>
    </span>{
        <span class="hljs-keyword">return</span> [
            <span class="hljs-title class_">PostListLayout</span>::<span class="hljs-variable language_">class</span>,
        ];
    }
}
</code></pre>
<p><strong>ä¼˜åŠ¿</strong>:</p>
<ul>
<li>å®Œå…¨å¼€æºï¼Œç¤¾åŒºæ´»è·ƒ</li>
<li>Screen æ¶æ„æ¸…æ™°ï¼Œä¾¿äºç»´æŠ¤</li>
<li>æƒé™ç³»ç»Ÿå®Œå–„</li>
<li>æ”¯æŒå¤šè¯­è¨€</li>
</ul>
<p><strong>åŠ£åŠ¿</strong>:</p>
<ul>
<li>å­¦ä¹ æ›²çº¿ç›¸å¯¹è¾ƒé™¡</li>
<li>ä¸­æ–‡èµ„æºè¾ƒå°‘</li>
</ul>
<p><strong>é€‚ç”¨åœºæ™¯</strong>: å¼€æºé¡¹ç›®ã€éœ€è¦ç²¾ç»†æƒé™æ§åˆ¶çš„ç³»ç»Ÿã€‚</p>
<h4 data-id="heading-12">Voyager - å¯è§†åŒ–ç®¡ç†çš„å…ˆé©±</h4>
<ul>
<li><strong>å®˜ç½‘</strong>: <a href="https://link.juejin.cn?target=https%3A%2F%2Fvoyager.devdojo.com%2F" target="_blank" title="https://voyager.devdojo.com/" ref="nofollow noopener noreferrer">voyager.devdojo.com/</a></li>
<li><strong>GitHub</strong>: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fthe-control-group%2Fvoyager" target="_blank" title="https://github.com/the-control-group/voyager" ref="nofollow noopener noreferrer">github.com/the-controlâ€¦</a></li>
<li><strong>ç±»å‹</strong>: å¯è§†åŒ–ç¼–ç¨‹</li>
<li><strong>ä»·æ ¼</strong>: å¼€æºå…è´¹ï¼ˆMIT åè®®ï¼‰</li>
</ul>
<p>Voyager ä¸å…¶ä»– Laravel admin æœ‰æ‰€ä¸åŒï¼Œå®ƒå¯ä»¥æ ¹æ®æ•°æ®åº“è¡¨è‡ªåŠ¨åˆ›å»º BREADï¼ˆBrowseã€Readã€Editã€Addã€Deleteï¼‰ç•Œé¢ï¼Œæ— éœ€ç¼–å†™ä»£ç ã€‚</p>
<p>Voyager å†…ç½®äº†åª’ä½“ç®¡ç†å™¨ï¼Œæ”¯æŒåœ¨ UI å±‚é¢ç®¡ç†æ–‡ä»¶ã€‚èœå•æ„å»ºå™¨è®©ä½ å¯ä»¥ç›´æ¥åœ¨é¡µé¢ä¸Šæ‹–æ‹½ç®¡ç†èœå•ç»“æ„ã€‚å¯¹äºéœ€è¦å¿«é€Ÿæ­å»ºåå°çš„é¡¹ç›®ï¼ŒVoyager æ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©ã€‚</p>
<p><strong>ä¼˜åŠ¿</strong>:</p>
<ul>
<li>å¯è§†åŒ–é…ç½®ï¼Œä¸Šæ‰‹å¿«</li>
<li>å†…ç½®åª’ä½“ç®¡ç†å™¨</li>
<li>èœå•æ„å»ºå™¨ç›´è§‚æ˜“ç”¨</li>
<li>ç¤¾åŒºæˆç†Ÿï¼Œæ–‡æ¡£æ¸…æ™°</li>
</ul>
<p><strong>åŠ£åŠ¿</strong>:</p>
<ul>
<li>çµæ´»æ€§å—é™ï¼Œå¤æ‚ä¸šåŠ¡åœºæ™¯éš¾ä»¥æ»¡è¶³</li>
<li>å‰ç«¯åŸºäº Bladeï¼Œå®šåˆ¶æˆæœ¬è¾ƒé«˜</li>
</ul>
<p><strong>é€‚ç”¨åœºæ™¯</strong>: å¿«é€ŸåŸå‹ã€å†…å®¹ç®¡ç†ç³»ç»Ÿã€å¯¹çµæ´»æ€§è¦æ±‚ä¸é«˜çš„é¡¹ç›®ã€‚</p>
<h4 data-id="heading-13">QuickAdminPanel - åœ¨çº¿ç”Ÿæˆå®šåˆ¶ä»£ç </h4>
<ul>
<li><strong>å®˜ç½‘</strong>: <a href="https://link.juejin.cn?target=https%3A%2F%2Fquickadminpanel.com%2F" target="_blank" title="https://quickadminpanel.com/" ref="nofollow noopener noreferrer">quickadminpanel.com/</a></li>
<li><strong>ç±»å‹</strong>: å¯è§†åŒ–ç¼–ç¨‹</li>
<li><strong>ä»·æ ¼</strong>: $199/å¹´</li>
</ul>
<p>QuickAdminPanel çš„ç†å¿µå°±æ˜¯ã€Œå¿«ã€ã€‚æ•´ä¸ªå¼€å‘æµç¨‹åœ¨çº¿å®Œæˆï¼šåœ¨å®˜ç½‘é…ç½® admin é¢æ¿ï¼Œé€‰æ‹©éœ€è¦çš„æ¨¡å—ï¼Œç‚¹å‡»ä¸‹è½½ï¼Œè·å¾—å®šåˆ¶ä»£ç ï¼Œéƒ¨ç½²åˆ°æœåŠ¡å™¨ã€‚</p>
<p>è¿™ç§æ¨¡å¼ç‰¹åˆ«é€‚åˆéœ€æ±‚æ˜ç¡®ã€ä¸éœ€è¦å¤ªå¤šçµæ´»æ€§çš„é¡¹ç›®ã€‚ç”Ÿæˆçš„ä»£ç åŸºäº Laravel æ ‡å‡†ç»“æ„ï¼ŒåæœŸä¹Ÿå¯ä»¥æ‰‹åŠ¨ä¿®æ”¹ã€‚</p>
<p><strong>ä¼˜åŠ¿</strong>:</p>
<ul>
<li>åœ¨çº¿é…ç½®ï¼Œæ— éœ€æœ¬åœ°ç¯å¢ƒ</li>
<li>ç”Ÿæˆçš„ä»£ç è§„èŒƒï¼Œå¯äºŒæ¬¡å¼€å‘</li>
<li>æ¨¡å—ä¸°å¯Œï¼Œè¦†ç›–å¸¸è§éœ€æ±‚</li>
</ul>
<p><strong>åŠ£åŠ¿</strong>:</p>
<ul>
<li>ä»˜è´¹è®¢é˜…æ¨¡å¼</li>
<li>å¤æ‚é€»è¾‘éœ€è¦æ‰‹åŠ¨ç¼–å†™</li>
</ul>
<p><strong>é€‚ç”¨åœºæ™¯</strong>: å¿«é€Ÿå¯åŠ¨é¡¹ç›®ã€å¤–åŒ…é¡¹ç›®ã€MVP å¼€å‘ã€‚</p>
<h3 data-id="heading-14">PHP ç®¡ç†åå°æ¡†æ¶å¯¹æ¯”</h3>
<p>ä»¥ä¸‹è¡¨æ ¼ä»ä»·æ ¼ã€æŠ€æœ¯æ ˆã€å­¦ä¹ æ›²çº¿ã€çµæ´»æ€§ã€å‰åç«¯åˆ†ç¦»äº”ä¸ªç»´åº¦å¯¹æ¯” 7 æ¬¾ Laravel admin åå°ç®¡ç†æ¡†æ¶ï¼š</p>





































































<table><thead><tr><th>æ¡†æ¶</th><th>ä»·æ ¼</th><th>æŠ€æœ¯æ ˆ</th><th>å­¦ä¹ æ›²çº¿</th><th>çµæ´»æ€§</th><th>å‰åç«¯åˆ†ç¦»</th></tr></thead><tbody><tr><td>Laravel Nova</td><td><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>99</mn><mo>âˆ’</mo></mrow><annotation encoding="application/x-tex">99-</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"/><span class="mord">99</span><span class="mord">âˆ’</span></span></span></span></span>299</td><td>Vue.js</td><td>ä¸­</td><td>é«˜</td><td>âœ…</td></tr><tr><td>CatchAdmin</td><td>å…è´¹</td><td>Vue 3 + Element Plus</td><td>ä¸­</td><td>é«˜</td><td>âœ…</td></tr><tr><td>Filament</td><td>å…è´¹</td><td>Livewire + Alpine.js</td><td>ä½</td><td>ä¸­é«˜</td><td>âŒ</td></tr><tr><td>Backpack</td><td>â‚¬69+</td><td>jQuery + Bootstrap</td><td>ä½</td><td>ä¸­</td><td>âŒ</td></tr><tr><td>Orchid</td><td>å…è´¹</td><td>Laravel Blade</td><td>ä¸­é«˜</td><td>é«˜</td><td>âŒ</td></tr><tr><td>Voyager</td><td>å…è´¹</td><td>Laravel Blade</td><td>ä½</td><td>ä½</td><td>âŒ</td></tr><tr><td>QuickAdminPanel</td><td>$199/å¹´</td><td>Laravel æ ‡å‡†</td><td>ä½</td><td>ä¸­</td><td>âŒ</td></tr></tbody></table>
<p>ä»è¡¨æ ¼å¯ä»¥çœ‹å‡ºï¼Œå¦‚æœä½ éœ€è¦ä¸€æ¬¾<strong>å…è´¹ã€å‰åç«¯åˆ†ç¦»ã€çµæ´»æ€§é«˜</strong>çš„ PHP åå°ç®¡ç†æ¡†æ¶ï¼ŒCatchAdmin æ˜¯ä¸ºæ•°ä¸å¤šåŒæ—¶æ»¡è¶³è¿™ä¸‰ä¸ªæ¡ä»¶çš„é€‰æ‹©ã€‚</p>
<h3 data-id="heading-15">å¦‚ä½•é€‰æ‹©åˆé€‚çš„ PHP åå°ç®¡ç†æ¡†æ¶</h3>
<p>é€‰æ‹© Laravel admin åå°ç®¡ç†æ¡†æ¶éœ€è¦ç»¼åˆè€ƒè™‘é¡¹ç›®è§„æ¨¡ã€å›¢é˜ŸæŠ€æœ¯æ ˆã€é¢„ç®—ç­‰å› ç´ ï¼š</p>
<ul>
<li><strong>è¿½æ±‚å®˜æ–¹ç¨³å®šå’Œç”Ÿæ€</strong>: Laravel Nova æ˜¯é¦–é€‰ï¼Œä½†éœ€è¦ä»˜è´¹</li>
<li><strong>éœ€è¦å‰åç«¯åˆ†ç¦»æ¶æ„</strong>: CatchAdmin æä¾›äº†å®Œæ•´çš„ Vue 3 + Laravel è§£å†³æ–¹æ¡ˆï¼Œä¸”æ ¸å¿ƒåŠŸèƒ½å…è´¹å¼€æº</li>
<li><strong>çº¯åç«¯å¼€å‘è€…</strong>: Filament åŸºäº Livewireï¼Œæ— éœ€ç¼–å†™å‰ç«¯ä»£ç </li>
<li><strong>å¿«é€ŸåŸå‹å¼€å‘</strong>: Voyager æˆ– QuickAdminPanel å¯ä»¥å¿«é€Ÿå¯åŠ¨</li>
<li><strong>ç²¾ç»†æƒé™æ§åˆ¶</strong>: Orchid å’Œ CatchAdmin éƒ½æä¾›äº†å®Œå–„çš„ RBAC æƒé™ç³»ç»Ÿ</li>
</ul>
<p>æ— è®ºé€‰æ‹©å“ªä¸ª Laravel åå°æ¡†æ¶ï¼Œå»ºè®®å…ˆåœ¨å°é¡¹ç›®ä¸­è¯•ç”¨ï¼Œè¯„ä¼°æ˜¯å¦ç¬¦åˆå›¢é˜Ÿçš„å¼€å‘ä¹ æƒ¯å’Œé¡¹ç›®éœ€æ±‚ã€‚
<a href="https://link.juejin.cn?target=https%3A%2F%2Fcatchadmin.com%2Fpost%2F2026-02%2Fphp-admin-panel-2026" target="_blank" title="https://catchadmin.com/post/2026-02/php-admin-panel-2026" ref="nofollow noopener noreferrer">åŸæ–‡ 2026 å¹´æœ€å€¼å¾—ä½¿ç”¨çš„ 7 æ¬¾ PHP ç®¡ç†åå°æ¡†æ¶æ¨è
</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[10åˆ†é’Ÿé€Ÿè§ˆAndroidå¼€å‘è€…éœ€è¦å…³æ³¨çš„ Kotlin æ›´æ–°]]></title>    <link>https://juejin.cn/post/7602824293164941327</link>    <guid>https://juejin.cn/post/7602824293164941327</guid>    <pubDate>2026-02-05T00:42:57.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602824293164941327" data-draft-id="7602634187284660234" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="10åˆ†é’Ÿé€Ÿè§ˆAndroidå¼€å‘è€…éœ€è¦å…³æ³¨çš„ Kotlin æ›´æ–°"/> <meta itemprop="keywords" content="Kotlin,Android"/> <meta itemprop="datePublished" content="2026-02-05T00:42:57.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="RockByte"/> <meta itemprop="url" content="https://juejin.cn/user/1046390797768519"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            10åˆ†é’Ÿé€Ÿè§ˆAndroidå¼€å‘è€…éœ€è¦å…³æ³¨çš„ Kotlin æ›´æ–°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1046390797768519/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    RockByte
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-05T00:42:57.000Z" title="Thu Feb 05 2026 00:42:57 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-05
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;color:rgba(46,36,36,.87);overflow-x:hidden}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{margin-bottom:5px;font-size:30px;font-weight:500}.markdown-body h1:before{content:"#";margin-right:10px;color:#1976d2}.markdown-body h2{font-size:28px;font-weight:400;border-left:5px solid #454545;margin-top:20px;padding-left:10px;transition:all .3s ease-in-out}.markdown-body h2:hover{border-color:#1976d2}.markdown-body h3{font-size:24px;font-weight:400;margin-top:15px;padding-bottom:0}.markdown-body h4{font-size:20px;font-weight:500}.markdown-body h5{font-size:16px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body h2:first-letter,.markdown-body h3:first-letter,.markdown-body p:first-letter{text-transform:capitalize}.markdown-body em{text-emphasis:dot;text-emphasis-position:under}.markdown-body img{display:block;margin:0 auto!important;max-width:100%;border-radius:2px;box-shadow:0 2px 4px -1px rgba(0,0,0,.2),0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12)!important}.markdown-body hr{position:relative;width:98%;height:1px;border:none;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,#ddd,#999,#ddd);overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background:#fff;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center}.markdown-body code{font-weight:900;word-break:break-word;border-radius:2px;overflow-x:auto;font-size:.87em;padding:.065em .4em;background-color:#fbe5e1;color:#c0341d}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border-radius:0 4px}.markdown-body pre&gt;code{font-weight:400;font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{margin:0 4px;text-decoration:none;color:#027fff;transition:all .3s ease-in-out;padding-bottom:4px;border-bottom:2px solid transparent}.markdown-body a:after{content:"";display:inline-block;width:18px;height:18px;margin-left:4px;vertical-align:middle;background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMiIgaGVpZ2h0PSIyMiI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIiBzdHJva2U9IiMwMjdGRkYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCI+PHBhdGggZD0iTTkuODE1IDYuNDQ4bDEuOTM2LTEuOTM2YzEuMzM3LTEuMzM2IDMuNTgtMS4yNTkgNS4wMTMuMTczIDEuNDMyIDEuNDMyIDEuNTEgMy42NzYuMTczIDUuMDEzbC0xLjQ1MiAxLjQ1Mi0uOTY4Ljk2OGMtMS4zMzcgMS4zMzYtMy41ODEgMS4yNTktNS4wMTMtLjE3MyIvPjxwYXRoIGQ9Ik0xMS4yNjcgMTUuMzY3bC0xLjkzNiAxLjkzNmMtMS4zMzYgMS4zMzctMy41OCAxLjI2LTUuMDEyLS4xNzMtMS40MzItMS40MzItMS41MS0zLjY3Ni0uMTczLTUuMDEybDEuNDUyLTEuNDUyLjk2OC0uOTY4YzEuMzM2LTEuMzM3IDMuNTgtMS4yNiA1LjAxMi4xNzMiLz48L2c+PC9zdmc+);background-size:cover;background-repeat:no-repeat}.markdown-body a:hover{border-color:#027fff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body a.footnote-backref:after,.markdown-body a.footnote-ref:after,.markdown-body sup a:after{display:none!important}.markdown-body table{margin:0 auto 10px;font-size:12px;width:auto;max-width:100%;overflow:auto;border:2px solid #c6c6c6}.markdown-body table img{box-shadow:none!important}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body del{color:rgba(0,0,0,.6)}.markdown-body blockquote{position:relative;color:#666;padding:5px 23px 1px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:hsla(0,0%,78.4%,.12);transition:all .2s ease-in-out}.markdown-body blockquote:hover{border-color:#1976d2}.markdown-body blockquote:after,.markdown-body blockquote:before{position:absolute;font-size:24px;font-weight:800;line-height:24px;color:#cbcbcb;opacity:.6}.markdown-body blockquote:before{content:"â€œ";top:4px;left:6px}.markdown-body blockquote:after{content:"â€";right:8px;bottom:-8px}.markdown-body blockquote&gt;p,.markdown-body blockquote blockquote{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body details{outline:none;border:none;border-left:4px solid #1976d2;padding-left:10px;margin-left:4px}.markdown-body details summary{cursor:pointer;border:none;outline:none;background:#fff;margin:0 -17px}.markdown-body details summary:hover::-webkit-details-marker{color:#1976d2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="xcode">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#fff;color:#000}.xml .hljs-meta{color:silver}.hljs-comment,.hljs-quote{color:#007400}.hljs-attribute,.hljs-keyword,.hljs-literal,.hljs-name,.hljs-selector-tag,.hljs-tag{color:#aa0d91}.hljs-template-variable,.hljs-variable{color:#3f6e74}.hljs-code,.hljs-meta-string,.hljs-string{color:#c41a16}.hljs-link,.hljs-regexp{color:#0e0eff}.hljs-bullet,.hljs-number,.hljs-symbol,.hljs-title{color:#1c00cf}.hljs-meta,.hljs-section{color:#643820}.hljs-built_in,.hljs-builtin-name,.hljs-class .hljs-title,.hljs-params,.hljs-type{color:#5c2699}.hljs-attr{color:#836c28}.hljs-subst{color:#000}.hljs-formula{background-color:#eee;font-style:italic}.hljs-addition{background-color:#baeeba}.hljs-deletion{background-color:#ffc8bd}.hljs-selector-class,.hljs-selector-id{color:#9b703f}.hljs-doctag,.hljs-strong{font-weight:700}.hljs-emphasis{font-style:italic}</style><p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3799bf045f9147809c80a685fc00e648~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUm9ja0J5dGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770856976&amp;x-signature=yJ33XXrcEn7wd%2FqsRv23b8lh4Js%3D" alt="2_0.png" loading="lazy"/></p>
<p>Kotlin 2.3.0 å¸¦æ¥äº†ç¨³å®šçš„æ—¶é—´ APIã€æ˜¾å¼å¹•åå­—æ®µã€æ”¹è¿›çš„ Swift äº’æ“ä½œæ€§ä»¥åŠæ›´å®Œå–„çš„å·¥å…·é“¾ã€‚</p>
<p>ä¸‹é¢æˆ‘ä»¬æ¥ä¸€èµ·æµè§ˆé‚£äº›å¯¹äº Android å¼€å‘è€…éœ€è¦å…³æ³¨çš„æ–°ç‰¹æ€§ã€‚</p>
<h2 data-id="heading-0">ç¨³å®šçš„æ—¶é—´ APIï¼šClock ä¸ Instant</h2>
<p><code>kotlin.time.Clock</code> å’Œ <code>kotlin.time.Instant</code> API ç°å·²æ­£å¼ç¨³å®šï¼Œæ— éœ€å†æ·»åŠ  <code>@OptIn</code> æ³¨è§£å³å¯ä½¿ç”¨ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">import</span> kotlin.time.*

<span class="hljs-comment">// è·å–å½“å‰æ—¶é—´</span>
<span class="hljs-keyword">val</span> now: Instant = Clock.System.now()

<span class="hljs-comment">// è®¡ç®—æ—¶é—´å·®</span>
<span class="hljs-keyword">val</span> eventTime = Instant.parse(<span class="hljs-string">"2025-12-25T10:00:00Z"</span>)
<span class="hljs-keyword">val</span> timeUntilEvent: Duration = eventTime - now
println(<span class="hljs-string">"è·ç¦»æ´»åŠ¨å¼€å§‹è¿˜æœ‰ï¼š<span class="hljs-subst">${timeUntilEvent.inWholeHours}</span> å°æ—¶"</span>)

<span class="hljs-comment">// é€šè¿‡æ—¶é—´åˆ†é‡åˆ›å»º Instant</span>
<span class="hljs-keyword">val</span> deadline = Instant.fromEpochSeconds(<span class="hljs-number">1735084800</span>)

<span class="hljs-comment">// æ¯”è¾ƒæ—¶é—´</span>
<span class="hljs-keyword">if</span> (now &gt; deadline) {
    println(<span class="hljs-string">"æˆªæ­¢æ—¶é—´å·²è¿‡ï¼"</span>)
}
</code></pre>
<p><strong>Android åœºæ™¯å»ºè®®</strong>ï¼šç”¨å®ƒæ›¿ä»£ <code>System.currentTimeMillis()</code>ï¼Œå®ç°æ›´ç®€æ´ã€ç±»å‹å®‰å…¨çš„æ—¶é—´å¤„ç†ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">SessionManager</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> sessionStart: Instant? = <span class="hljs-literal">null</span>

    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">startSession</span><span class="hljs-params">()</span></span> {
        sessionStart = Clock.System.now()
    }

    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getSessionDuration</span><span class="hljs-params">()</span></span>: Duration {
        <span class="hljs-keyword">val</span> start = sessionStart ?: <span class="hljs-keyword">return</span> Duration.ZERO
        <span class="hljs-keyword">return</span> Clock.System.now() - start
    }
}
</code></pre>
<h2 data-id="heading-1">æ˜¾å¼å¹•åå­—æ®µï¼ˆå®éªŒæ€§ï¼‰</h2>
<p><em>æˆ‘ç»ˆäºå¯ä»¥æ‘†è„±å‘½åä¸¤ä¸ªå˜é‡çš„å›°å±€äº†ï¼</em></p>
<p>ä½ å¯ä»¥å®šä¹‰ä¸æš´éœ²å±æ€§ç±»å‹ä¸åŒçš„å¹•åå­—æ®µï¼Œæ— éœ€å†å•ç‹¬å£°æ˜ç§æœ‰å±æ€§æ¥å®ç°è¿™ä¸€ç‚¹ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@OptIn(ExperimentalBackingFields::class)</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">UserPreferences</span> {
    <span class="hljs-comment">// å¹•åå­—æ®µæ˜¯å¯å˜åˆ—è¡¨ï¼Œä½†å¯¹å¤–æš´éœ²ä¸ºä¸å¯å˜åˆ—è¡¨</span>
    <span class="hljs-keyword">val</span> recentSearches: List&lt;String&gt;
        field = mutableListOf()

    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">addSearch</span><span class="hljs-params">(query: <span class="hljs-type">String</span>)</span></span> {
        recentSearches.add(query) <span class="hljs-comment">// ç›´æ¥ä¿®æ”¹å¹•åå­—æ®µ</span>
        <span class="hljs-keyword">if</span> (recentSearches.size &gt; <span class="hljs-number">10</span>) {
            recentSearches.removeAt(<span class="hljs-number">0</span>)
        }
    }
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">val</span> prefs = UserPreferences()
prefs.addSearch(<span class="hljs-string">"kotlin 2.3"</span>)
prefs.addSearch(<span class="hljs-string">"coroutines"</span>)
<span class="hljs-comment">// å¤–å¤´æ˜¯æ— æ³•ä½¿ç”¨å¹•åå­—æ®µçš„</span>
<span class="hljs-comment">// prefs.recentSearches.add("flow")</span>
println(prefs.recentSearches) <span class="hljs-comment">// [kotlin 2.3, coroutines]</span>
</code></pre>
<p>Kotlin 2.3 ä¹‹å‰ä½ éœ€è¦è¿™æ ·åšï¼ˆæˆ‘ç¡®å®å¯¹è¿™ä¸ªæ„Ÿåˆ°åŒçƒ¦ï¼‰ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">UserPreferences</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> _recentSearches = mutableListOf&lt;String&gt;()
    <span class="hljs-keyword">val</span> recentSearches: List&lt;String&gt; <span class="hljs-keyword">get</span>() = _recentSearches.toList()

    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">addSearch</span><span class="hljs-params">(query: <span class="hljs-type">String</span>)</span></span> {
        _recentSearches.add(query)
    }
}
</code></pre>
<p>å¦‚æœä½ å¯¹å®ç°æ–¹æ³•æ„Ÿåˆ°å¥½å¥‡ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/16b983eecc6648d9a0d01360945316c6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUm9ja0J5dGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770856976&amp;x-signature=wsu2JBYeIkg2kNGEZ6ziwbMKTkA%3D" alt="2_2.jpg" loading="lazy"/></p>
<p>å…¶å®å°±æ˜¯å¢åŠ äº†ä¸€ä¸ª <code>private</code> çš„å­—æ®µç”¨äºç±»çš„å†…éƒ¨ä½¿ç”¨ã€‚</p>
<p>å½“ç„¶ï¼Œä½œä¸ºå®éªŒæ€§åŠŸèƒ½ï¼Œä½ éœ€è¦æ·»åŠ é¢å¤–çš„ç¼–è¯‘æ¡ä»¶ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">kotlin {
    compilerOptions {
        freeCompilerArgs.add(<span class="hljs-string">"-Xexplicit-backing-fields"</span>)
    }
}
</code></pre>
<h2 data-id="heading-2">æœªä½¿ç”¨è¿”å›å€¼æ£€æŸ¥å™¨ï¼ˆå®éªŒæ€§ï¼‰</h2>
<p>å½“ä½ å¿˜è®°ä½¿ç”¨æŸä¸ªæ¥å£çš„è¿”å›å€¼æ—¶ï¼Œè¯¥åŠŸèƒ½å¯ä»¥å¸®ä½ æ•è·è¿™ç±»ä¸æ˜“å¯Ÿè§‰çš„æ½œåœ¨ Bugã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin">
<span class="hljs-comment">// æœ‰æ½œåœ¨é—®é¢˜çš„ç”¨æ³•</span>
<span class="hljs-meta">@OptIn(ExperimentalUnusedReturnValueChecker::class)</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">badprocess</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">val</span> list = mutableListOf(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>)

    <span class="hljs-comment">// è­¦å‘Šï¼š'remove' çš„è¿”å›å€¼æœªè¢«ä½¿ç”¨</span>
    list.remove(<span class="hljs-number">2</span>) <span class="hljs-comment">// ä½ æ˜¯å¦éœ€è¦æ£€æŸ¥åˆ é™¤æ˜¯å¦æˆåŠŸï¼Ÿ</span>

    <span class="hljs-comment">// è­¦å‘Šï¼š'plus' çš„è¿”å›å€¼æœªè¢«ä½¿ç”¨</span>
    list.plus(<span class="hljs-number">4</span>) <span class="hljs-comment">// Bugï¼æ­¤æ“ä½œä¸ä¼šä¿®æ”¹åŸåˆ—è¡¨ï¼Œè€Œæ˜¯è¿”å›ä¸€ä¸ªæ–°åˆ—è¡¨</span>

   <span class="hljs-comment">// ...</span>
}

<span class="hljs-comment">// æ­£ç¡®ç”¨æ³•</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">goodprocess</span><span class="hljs-params">()</span></span> {
    
    <span class="hljs-keyword">val</span> removed = list.remove(<span class="hljs-number">2</span>)
    <span class="hljs-keyword">if</span> (!removed) println(<span class="hljs-string">"å…ƒç´ æœªæ‰¾åˆ°"</span>)

    <span class="hljs-keyword">val</span> newList = list + <span class="hljs-number">4</span> <span class="hljs-comment">// ä½¿ç”¨è¿”å›çš„æ–°åˆ—è¡¨</span>
}
</code></pre>
<p>å½“ä¸€ä¸ªè¡¨è¾¾å¼è¿”å›çš„ä¸æ˜¯ <code>Unit</code> æˆ– <code>Nothing</code> ç±»å‹çš„å€¼ï¼Œä¸”æ²¡æœ‰è¢«ä¼ é€’ç»™å…¶ä»–å‡½æ•°ã€ç”¨äºæ¡ä»¶åˆ¤æ–­æˆ–ä»¥å…¶ä»–æ–¹å¼ä½¿ç”¨æ—¶ï¼Œå®ƒå°±ä¼šå‘å‡ºè­¦å‘Šã€‚</p>
<p>è¯¥åŠŸèƒ½ä¼šå¸®åŠ©å¼€å‘è€…æ£€æŸ¥å¯èƒ½å­˜åœ¨çš„ Bugï¼š</p>

























<table><thead><tr><th>è¡¨è¾¾å¼</th><th>Bug</th><th>ä¿®å¤æ–¹æ¡ˆ</th></tr></thead><tbody><tr><td><code>list.plus(item)</code></td><td>è¿”å›æ–°åˆ—è¡¨ï¼Œä¸ä¼šä¿®æ”¹åŸåˆ—è¡¨</td><td><code>list = list + item</code> æˆ– <code>list.add(item)</code></td></tr><tr><td><code>string.replace("a", "b")</code></td><td>è¿”å›æ–°å­—ç¬¦ä¸²ï¼Œä¸ä¼šä¿®æ”¹åŸå­—ç¬¦ä¸²</td><td><code>val result = string.replace(...)</code></td></tr><tr><td><code>map.minus(key)</code></td><td>è¿”å›æ–°æ˜ å°„ï¼Œä¸ä¼šä¿®æ”¹åŸæ˜ å°„</td><td><code>map = map - key</code></td></tr></tbody></table>
<p>é¢å¤–çš„ç¼–è¯‘æ¡ä»¶ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">kotlin {
    compilerOptions {
        freeCompilerArgs.add(<span class="hljs-string">"-Xreturn-value-checker=check"</span>)
    }
}
</code></pre>
<h2 data-id="heading-3">å¢å¼ºçš„ UUID æ”¯æŒï¼ˆå®éªŒæ€§ï¼‰</h2>
<p>åŸç”Ÿæ”¯æŒç”Ÿæˆ v4ï¼ˆéšæœºï¼‰å’Œ v7ï¼ˆåŸºäºæ—¶é—´ï¼‰ç±»å‹çš„ <code>UUID</code>ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">import</span> kotlin.uuid.*

<span class="hljs-meta">@OptIn(ExperimentalUuidApi::class)</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">generateIds</span><span class="hljs-params">()</span></span> {
    <span class="hljs-comment">// éšæœº UUIDï¼ˆv4ï¼‰</span>
    <span class="hljs-keyword">val</span> randomId = Uuid.random()
    println(randomId) <span class="hljs-comment">// ç¤ºä¾‹ï¼š550e8400-e29b-41d4-a716-446655440000</span>

    <span class="hljs-comment">// åŸºäºæ—¶é—´çš„ UUIDï¼ˆv7ï¼‰- å¯æŒ‰åˆ›å»ºæ—¶é—´æ’åº</span>
    <span class="hljs-keyword">val</span> timeBasedId = Uuid.randomV7()

    <span class="hljs-comment">// åŸºäºç‰¹å®šæ—¶é—´æˆ³ç”Ÿæˆ v7 UUID</span>
    <span class="hljs-keyword">val</span> instant = Clock.System.now()
    <span class="hljs-keyword">val</span> historicalId = Uuid.randomV7(instant)

    <span class="hljs-comment">// å®‰å…¨è§£æï¼ˆæ— æ•ˆæ—¶è¿”å› null è€ŒéæŠ›å‡ºå¼‚å¸¸ï¼‰</span>
    <span class="hljs-keyword">val</span> parsed: Uuid? = Uuid.parseOrNull(<span class="hljs-string">"invalid-uuid"</span>)

    <span class="hljs-comment">// æŒ‰æ—¶é—´é¡ºåºæ¯”è¾ƒ v7 UUID</span>
    <span class="hljs-keyword">val</span> id1 = Uuid.randomV7()
    delay(<span class="hljs-number">100</span>)
    <span class="hljs-keyword">val</span> id2 = Uuid.randomV7()
    println(id1 &lt; id2) <span class="hljs-comment">// true - v7 UUID æ”¯æŒæŒ‰æ—¶é—´æ’åº</span>
}
</code></pre>
<p>ä¸‹é¢æä¾›ä¸€ä¸ªé€ŸæŸ¥è¡¨å¸®åŠ©ä½ å¦‚ä½•é€‰æ‹©åˆé€‚çš„ UUID ç‰ˆæœ¬ï¼š</p>

















<table><thead><tr><th>UUID ç‰ˆæœ¬</th><th>ä½¿ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>v4 (<code>random()</code>)</td><td>é€šç”¨å”¯ä¸€ IDï¼Œæ— éœ€æ’åºçš„åœºæ™¯</td></tr><tr><td>v7 (<code>randomV7()</code>)</td><td>æ•°æ®åº“ä¸»é”®ï¼ˆå¯æ’åºï¼‰ã€äº‹ä»¶ ID ç­‰éœ€è¦æŒ‰åˆ›å»ºæ—¶é—´æ’åºçš„åœºæ™¯</td></tr></tbody></table>
<p>é¢å¤–çš„ç¼–è¯‘æ¡ä»¶ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">kotlin {
    compilerOptions {
        freeCompilerArgs.add(<span class="hljs-string">"-opt-in=kotlin.uuid.ExperimentalUuidApi"</span>)
    }
}
</code></pre>
<h2 data-id="heading-4">è¡¨è¾¾å¼ä½“å‡½æ•°ä¸­æ”¯æŒ return</h2>
<p>åœ¨å…·æœ‰æ˜¾å¼è¿”å›ç±»å‹çš„å•è¡¨è¾¾å¼å‡½æ•°ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ <code>return</code> è¯­å¥ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin">
<span class="hljs-comment">// userId å¦‚æœä¸ºç©ºï¼Œå‡½æ•°è¿”å› "default"</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getDisplayNameOrDefault</span><span class="hljs-params">(userId: <span class="hljs-type">String</span>?)</span></span>: String = getDisplayName(userId ?: <span class="hljs-keyword">return</span> <span class="hljs-string">"default"</span>)

<span class="hljs-comment">// å¤æ‚æ ¡éªŒåœºæ™¯</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">validateEmail</span><span class="hljs-params">(email: <span class="hljs-type">String</span>)</span></span>: ValidationResult =
    <span class="hljs-keyword">when</span> {
        email.isBlank() -&gt; <span class="hljs-keyword">return</span> ValidationResult.Error(<span class="hljs-string">"Email required"</span>)
        !email.contains(<span class="hljs-string">"@"</span>) -&gt; <span class="hljs-keyword">return</span> ValidationResult.Error(<span class="hljs-string">"Invalid format"</span>)
        <span class="hljs-keyword">else</span> -&gt; ValidationResult.Success
    }
</code></pre>
<h2 data-id="heading-5">åµŒå¥—ç±»å‹åˆ«å</h2>
<p>ç°åœ¨ç±»å‹åˆ«åå¯ä»¥å¼•ç”¨å…¶ä»–ç±»å‹åˆ«åã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// åŸºç¡€ç±»å‹åˆ«å</span>
<span class="hljs-keyword">typealias</span> UserId = String
<span class="hljs-keyword">typealias</span> ProductId = String

<span class="hljs-comment">// åµŒå¥—ç±»å‹åˆ«å</span>
<span class="hljs-keyword">typealias</span> UserProducts = Map&lt;UserId, List&lt;ProductId&gt;&gt;
<span class="hljs-keyword">typealias</span> UserProductsCallback = (UserProducts) -&gt; <span class="hljs-built_in">Unit</span>

<span class="hljs-comment">// ä½¿ç”¨æ¡ˆä¾‹</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ProductRepository</span> {
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getUserProducts</span><span class="hljs-params">(callback: <span class="hljs-type">UserProductsCallback</span>)</span></span> {
        <span class="hljs-keyword">val</span> products: UserProducts = mapOf(
            <span class="hljs-string">"user_1"</span> to listOf(<span class="hljs-string">"prod_a"</span>, <span class="hljs-string">"prod_b"</span>),
            <span class="hljs-string">"user_2"</span> to listOf(<span class="hljs-string">"prod_c"</span>)
        )
        callback(products)
    }
}
</code></pre>
<h2 data-id="heading-6">æ”¹è¿›çš„ Swift äº’æ“ä½œæ€§</h2>
<p>Kotlin æšä¸¾ç°åœ¨ä¼šå¯¼å‡ºä¸ºåŸç”Ÿ Swift æšä¸¾ï¼Œå¹¶ä¸”å¯å˜å‚æ•°ï¼ˆ<code>vararg</code>ï¼‰å‡½æ•°å¯ä»¥æ­£å¸¸å·¥ä½œã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// Kotlin ä»£ç </span>
<span class="hljs-keyword">enum</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PaymentStatus</span> {
    PENDING, COMPLETED, FAILED, REFUNDED
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">processPayments</span><span class="hljs-params">(<span class="hljs-keyword">vararg</span> payments: <span class="hljs-type">Payment</span>)</span></span>: List&lt;Receipt&gt; {
    <span class="hljs-keyword">return</span> payments.map { process(it) }
}
</code></pre>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// Swift ä»£ç  - ç°åœ¨å¯ä»¥è‡ªç„¶è°ƒç”¨</span>
<span class="hljs-keyword">let</span> status: <span class="hljs-type">PaymentStatus</span> <span class="hljs-operator">=</span> .completed
<span class="hljs-keyword">switch</span> status {
    <span class="hljs-keyword">case</span> .pending: <span class="hljs-built_in">print</span>(<span class="hljs-string">"Waiting..."</span>)
    <span class="hljs-keyword">case</span> .completed: <span class="hljs-built_in">print</span>(<span class="hljs-string">"Done!"</span>)
    <span class="hljs-keyword">case</span> .failed: <span class="hljs-built_in">print</span>(<span class="hljs-string">"Error"</span>)
    <span class="hljs-keyword">case</span> .refunded: <span class="hljs-built_in">print</span>(<span class="hljs-string">"Money back"</span>)
}

<span class="hljs-comment">// å¯å˜å‚æ•°ä¹Ÿèƒ½ç›´æ¥ä½¿ç”¨</span>
<span class="hljs-keyword">let</span> receipts <span class="hljs-operator">=</span> processPayments(payment1, payment2, payment3)
</code></pre>
<h2 data-id="heading-7">Compose ç¼–è¯‘å™¨ï¼šRelease ç‰ˆæœ¬æ”¯æŒæ¸…æ™°å †æ ˆè¿½è¸ª</h2>
<p>å€ŸåŠ©åæ··æ·†çš„å †æ ˆä¿¡æ¯ï¼Œä½ å¯ä»¥åœ¨ç”Ÿäº§ç¯å¢ƒä¸­è°ƒè¯• Compose çš„å´©æºƒé—®é¢˜ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// build.gradle.kts</span>
composeCompiler {
    <span class="hljs-comment">// å¯ç”¨ç»„é”®æ ¼å¼çš„å †æ ˆè¿½è¸ªï¼ˆ2.3 ç‰ˆæœ¬é»˜è®¤å¼€å¯ï¼‰</span>
    includeSourceInformation = <span class="hljs-literal">true</span>
}
</code></pre>
<p><strong>ä¼˜åŒ–å‰</strong>ï¼šRelease åŒ…ä¸­çš„å´©æºƒæ—¥å¿—æ˜¯æ··æ·†åçš„ï¼Œéš¾ä»¥å®šä½é—®é¢˜ã€‚</p>
<p><strong>ä¼˜åŒ–å</strong>ï¼šç”Ÿæˆæ¸…æ™°çš„ Compose ç»„é”®ï¼Œå¯é€šè¿‡ R8 æ˜ å°„æ–‡ä»¶å…³è”åˆ°ä½ çš„æºä»£ç ï¼Œå¤§å¹…æå‡è°ƒè¯•æ•ˆç‡ã€‚</p>
<h2 data-id="heading-8">Gradle ä¸ AGP æ›´æ–°</h2>
<p><em>æˆ‘ç°åœ¨çœ‹åˆ° AGP çš„æ›´æ–°ï¼Œåªæƒ³å–Šç”°æ–‡é•œï¼</em></p>
<p>ç‰ˆæœ¬è¦æ±‚ï¼š</p>

























<table><thead><tr><th>å·¥å…·</th><th>æœ€ä½ç‰ˆæœ¬</th><th>æœ€é«˜ç‰ˆæœ¬</th></tr></thead><tbody><tr><td>Gradle</td><td>7.6.3</td><td>9.0.0</td></tr><tr><td>AGPï¼ˆAndroid Gradle æ’ä»¶ï¼‰</td><td>8.2.2</td><td>8.13.0</td></tr><tr><td>Java</td><td>8</td><td>25</td></tr></tbody></table>
<p>AGP 9.0+ çš„ä¸€ä¸ªé‡è¦å˜æ›´ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// æ—§å†™æ³• - åœ¨ AGP 9.0+ ä¸­ä¸å†ç”Ÿæ•ˆ</span>
plugins {
    id(<span class="hljs-string">"com.android.application"</span>)
    id(<span class="hljs-string">"kotlin-android"</span>) <span class="hljs-comment">// éœ€è¦ç§»é™¤è¿™ä¸€è¡Œï¼</span>
}

<span class="hljs-comment">// æ–°å†™æ³• - kotlin-android å·²å†…ç½®åˆ° AGP 9.0+</span>
plugins {
    id(<span class="hljs-string">"com.android.application"</span>)
    <span class="hljs-comment">// Kotlin æ”¯æŒå·²è‡ªåŠ¨å¯ç”¨</span>
}
</code></pre>
<h2 data-id="heading-9">æ•°æ®æµçš„ç©·ä¸¾ when è¡¨è¾¾å¼</h2>
<p>æ›´æ™ºèƒ½çš„ç©·ä¸¾æ£€æŸ¥ï¼Œèƒ½å¤Ÿç†è§£ä½ çš„ä»£ç æ‰§è¡Œæµç¨‹ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">sealed</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Result</span>&lt;<span class="hljs-type">out T</span>&gt; {
    <span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Success</span>&lt;<span class="hljs-type">T</span>&gt;(<span class="hljs-keyword">val</span> <span class="hljs-keyword">data</span>: T) : Result&lt;T&gt;()
    <span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Error</span>(<span class="hljs-keyword">val</span> message: String) : Result&lt;<span class="hljs-built_in">Nothing</span>&gt;()
    <span class="hljs-keyword">data</span> <span class="hljs-keyword">object</span> Loading : Result&lt;<span class="hljs-built_in">Nothing</span>&gt;()
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">handleResult</span><span class="hljs-params">(result: <span class="hljs-type">Result</span>&lt;<span class="hljs-type">String</span>&gt;)</span></span> {
    <span class="hljs-comment">// ç¼–è¯‘å™¨èƒ½è¯†åˆ«æ‰€æœ‰åˆ†æ”¯å·²è¢«è¦†ç›–</span>
    <span class="hljs-keyword">when</span> (result) {
        <span class="hljs-keyword">is</span> Result.Success -&gt; println(result.<span class="hljs-keyword">data</span>)
        <span class="hljs-keyword">is</span> Result.Error -&gt; println(result.message)
        Result.Loading -&gt; println(<span class="hljs-string">"Loading..."</span>)
        <span class="hljs-comment">// æ— éœ€å†™ 'else' åˆ†æ”¯ â€” ç¼–è¯‘å™¨ä¼šéªŒè¯ç©·ä¸¾æ€§</span>
    }
}

<span class="hljs-comment">// å…·å¤‡æ•°æ®æµæ„ŸçŸ¥èƒ½åŠ›</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">process</span><span class="hljs-params">(result: <span class="hljs-type">Result</span>&lt;<span class="hljs-type">String</span>&gt;?)</span></span> {
    <span class="hljs-keyword">if</span> (result == <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span>

    <span class="hljs-comment">// ç¼–è¯‘å™¨çŸ¥é“æ­¤å¤„ result ä¸ä¸º null</span>
    <span class="hljs-keyword">when</span> (result) {
        <span class="hljs-keyword">is</span> Result.Success -&gt; {}
        <span class="hljs-keyword">is</span> Result.Error -&gt; {}
        Result.Loading -&gt; {}
    }
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getPermissionLevel</span><span class="hljs-params">(role: <span class="hljs-type">UserRole</span>)</span></span>: <span class="hljs-built_in">Int</span> {
    <span class="hljs-comment">// è¦†ç›–äº† when è¡¨è¾¾å¼ä¹‹å¤–çš„ Admin åœºæ™¯</span>
    <span class="hljs-keyword">if</span> (role == UserRole.ADMIN) <span class="hljs-keyword">return</span> <span class="hljs-number">99</span>

    <span class="hljs-keyword">return</span> <span class="hljs-keyword">when</span> (role) {
        UserRole.MEMBER -&gt; <span class="hljs-number">10</span>
        UserRole.GUEST -&gt; <span class="hljs-number">1</span>
        <span class="hljs-comment">// ä½ ä¸å†éœ€è¦ç¼–å†™è¿™ä¸ª else åˆ†æ”¯äº† </span>
        <span class="hljs-comment">// else -&gt; throw IllegalStateException()</span>
    }
}
</code></pre>
<h2 data-id="heading-10">æ€»ç»“</h2>
<p>Kotlin 2.3.0 ä¸»è¦è‡´åŠ›äºç¨³å®šå®éªŒæ€§ç‰¹æ€§ï¼Œå¹¶æ”¹è¿›å¤šå¹³å°äº’æ“ä½œæ€§ã€‚</p>
<p>å…¶ä¸­ï¼Œç¨³å®šçš„æ—¶é—´ API å’Œæ˜¾å¼å¹•åå­—æ®µæ˜¯å¯¹ Android å¼€å‘è€…è€Œè¨€æœ€äº®çœ¼çš„æ›´æ–°ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Nginxã€HAProxyã€Envoyã€Spring Cloud Gatewayã€LVSï¼šè´Ÿè½½å‡è¡¡ä¸æµé‡æ²»ç†å·¥å…·å¯¹æ¯”]]></title>    <link>https://juejin.cn/post/7602814773497184298</link>    <guid>https://juejin.cn/post/7602814773497184298</guid>    <pubDate>2026-02-05T00:48:36.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602814773497184298" data-draft-id="7602816610932293695" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Nginxã€HAProxyã€Envoyã€Spring Cloud Gatewayã€LVSï¼šè´Ÿè½½å‡è¡¡ä¸æµé‡æ²»ç†å·¥å…·å¯¹æ¯”"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-02-05T00:48:36.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ITæ©˜å­çš®"/> <meta itemprop="url" content="https://juejin.cn/user/3148645291002232"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Nginxã€HAProxyã€Envoyã€Spring Cloud Gatewayã€LVSï¼šè´Ÿè½½å‡è¡¡ä¸æµé‡æ²»ç†å·¥å…·å¯¹æ¯”
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3148645291002232/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ITæ©˜å­çš®
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-05T00:48:36.000Z" title="Thu Feb 05 2026 00:48:36 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-05
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ç°ä»£åˆ†å¸ƒå¼æ¶æ„ä¸­ï¼Œ<strong>è´Ÿè½½å‡è¡¡ä¸æµé‡æ²»ç†</strong>æ˜¯ä¿éšœç³»ç»Ÿé«˜å¯ç”¨ã€å¼¹æ€§çš„æ ¸å¿ƒæŠ€æœ¯ã€‚Nginxã€HAProxyã€Envoyã€Spring Cloud Gateway å’Œ LVS ä½œä¸ºäº”ç±»ä¸»æµå·¥å…·ï¼Œè™½å‡æ‰¿æ‹…æµé‡ä»£ç†èŒè´£ï¼Œä½†åœ¨è®¾è®¡ç†å¿µã€æŠ€æœ¯å®ç°ã€é€‚ç”¨åœºæ™¯ä¸Šå­˜åœ¨æ˜¾è‘—å·®å¼‚ã€‚æœ¬æ–‡ä»<strong>æ ¸å¿ƒå®šä½ã€åŠŸèƒ½ç‰¹æ€§ã€æ€§èƒ½è¡¨ç°</strong>ä¸‰æ–¹é¢å±•å¼€åˆ†æï¼Œå¸®åŠ©è¯»è€…ç†è§£äº”è€…çš„æœ¬è´¨åŒºåˆ«ã€‚</p>
<hr/>
<h2 data-id="heading-0">ä¸€ã€æ ¸å¿ƒå®šä½ï¼šä»è¾¹ç¼˜åˆ°å†…éƒ¨çš„æµé‡åˆ†å±‚æ²»ç†</h2>
<h3 data-id="heading-1">1. <strong>LVSï¼šå››å±‚è´Ÿè½½å‡è¡¡çš„æ ‡æ†</strong></h3>
<ul>
<li>
<p><strong>å®šä½</strong>ï¼šåŸºäº Linux å†…æ ¸çš„<strong>å››å±‚ï¼ˆä¼ è¾“å±‚ï¼‰è´Ÿè½½å‡è¡¡å™¨</strong>ï¼Œä¸“æ³¨äº TCP/UDP æµé‡çš„é«˜æ•ˆåˆ†å‘ã€‚</p>
</li>
<li>
<p><strong>æŠ€æœ¯ç‰¹æ€§</strong>ï¼š</p>
<ul>
<li><strong>å†…æ ¸çº§å¤„ç†</strong>ï¼šé€šè¿‡ä¿®æ”¹æ•°æ®åŒ…ç›®æ ‡ MAC/IP å®ç°æµé‡è½¬å‘ï¼Œæ— é¢å¤–æµé‡äº§ç”Ÿã€‚</li>
<li><strong>é«˜ååé‡</strong>ï¼šå•èŠ‚ç‚¹å¯å¤„ç†ç™¾ä¸‡çº§å¹¶å‘ï¼Œå»¶è¿Ÿä½è‡³å¾®ç§’çº§ã€‚</li>
<li><strong>ç¨³å®šæ€§</strong>ï¼šä¸ Keepalived ç»“åˆå®ç°é«˜å¯ç”¨ï¼Œé€‚åˆé‡‘èã€ç”µå•†ç­‰é«˜å¹¶å‘åœºæ™¯ã€‚</li>
</ul>
</li>
<li>
<p><strong>å…¸å‹åœºæ™¯</strong>ï¼šæ•°æ®åº“é›†ç¾¤ä»£ç†ã€ç¼“å­˜æœåŠ¡è´Ÿè½½å‡è¡¡ã€è·¨æœºæˆ¿æµé‡è°ƒåº¦ã€‚</p>
</li>
</ul>
<h3 data-id="heading-2">2. <strong>Nginxï¼šä¸ƒå±‚åå‘ä»£ç†çš„é€šç”¨æ–¹æ¡ˆ</strong></h3>
<ul>
<li>
<p><strong>å®šä½</strong>ï¼š<strong>ä¸ƒå±‚ï¼ˆåº”ç”¨å±‚ï¼‰åå‘ä»£ç†æœåŠ¡å™¨</strong>ï¼Œæ”¯æŒ HTTP/HTTPSã€TCP ç­‰åè®®ã€‚</p>
</li>
<li>
<p><strong>æŠ€æœ¯ç‰¹æ€§</strong>ï¼š</p>
<ul>
<li><strong>çµæ´»è·¯ç”±</strong>ï¼šåŸºäº URLã€åŸŸåã€è¯·æ±‚å¤´ç­‰å®ç°å¤æ‚è·¯ç”±ç­–ç•¥ã€‚</li>
<li><strong>Web æœåŠ¡å™¨åŠŸèƒ½</strong>ï¼šé™æ€èµ„æºæ‰˜ç®¡ã€SSL ç»ˆæ­¢ã€ç¼“å­˜åŠ é€Ÿã€‚</li>
<li><strong>å¥åº·æ£€æŸ¥</strong>ï¼šç«¯å£çº§æ£€æµ‹ï¼Œæ”¯æŒè¢«åŠ¨æ•…éšœè½¬ç§»ã€‚</li>
</ul>
</li>
<li>
<p><strong>å…¸å‹åœºæ™¯</strong>ï¼šWeb åº”ç”¨åå‘ä»£ç†ã€é™æ€èµ„æºæœåŠ¡ã€API ç½‘å…³åŸºç¡€åŠŸèƒ½ã€‚</p>
</li>
</ul>
<h3 data-id="heading-3">3. <strong>HAProxyï¼šå››å±‚/ä¸ƒå±‚æ··åˆè´Ÿè½½å‡è¡¡çš„ä¸“å®¶</strong></h3>
<ul>
<li>
<p><strong>å®šä½</strong>ï¼šæ”¯æŒå››å±‚å’Œä¸ƒå±‚è´Ÿè½½å‡è¡¡çš„å¼€æºå·¥å…·ï¼Œå…¼é¡¾æ€§èƒ½ä¸åŠŸèƒ½ã€‚</p>
</li>
<li>
<p><strong>æŠ€æœ¯ç‰¹æ€§</strong>ï¼š</p>
<ul>
<li><strong>å¤šåè®®æ”¯æŒ</strong>ï¼šTCP ä¼šè¯ä¿æŒã€HTTP å¥åº·æ£€æŸ¥ã€URL æ£€æµ‹ã€‚</li>
<li><strong>é«˜çº§ç®—æ³•</strong>ï¼šåŠ¨æ€åŠ æƒè½®è¯¢ã€ä¸€è‡´æ€§å“ˆå¸Œã€æœ€å°‘è¿æ¥æ•°ã€‚</li>
<li><strong>ä¼šè¯ä¿æŒ</strong>ï¼šCookie/Source IP ç»‘å®šï¼Œè§£å†³åˆ†å¸ƒå¼ä¼šè¯é—®é¢˜ã€‚</li>
</ul>
</li>
<li>
<p><strong>å…¸å‹åœºæ™¯</strong>ï¼šMySQL è¯»å†™åˆ†ç¦»ã€å¾®æœåŠ¡æ··åˆæµé‡æ²»ç†ã€‚</p>
</li>
</ul>
<h3 data-id="heading-4">4. <strong>Envoyï¼šäº‘åŸç”ŸæœåŠ¡ç½‘æ ¼çš„æ ¸å¿ƒç»„ä»¶</strong></h3>
<ul>
<li>
<p><strong>å®šä½</strong>ï¼šService Mesh æ•°æ®å¹³é¢æ ¸å¿ƒç»„ä»¶ï¼Œç®¡ç†<strong>ä¸œè¥¿å‘æœåŠ¡æµé‡</strong>ã€‚</p>
</li>
<li>
<p><strong>æŠ€æœ¯ç‰¹æ€§</strong>ï¼š</p>
<ul>
<li><strong>åŠ¨æ€é…ç½®</strong>ï¼šé€šè¿‡ xDS API å®æ—¶æ›´æ–°è·¯ç”±ã€ç†”æ–­ç­‰ç­–ç•¥ã€‚</li>
<li><strong>å¯è§‚æµ‹æ€§</strong>ï¼šé›†æˆæŒ‡æ ‡ã€æ—¥å¿—ã€åˆ†å¸ƒå¼è¿½è¸ªï¼Œæ”¯æŒå…¨é“¾è·¯ç›‘æ§ã€‚</li>
<li><strong>é«˜çº§æ²»ç†</strong>ï¼šæµé‡é•œåƒã€æ•…éšœæ³¨å…¥ã€åè®®è½¬æ¢ï¼ˆå¦‚ HTTP/1.1 åˆ° HTTP/2ï¼‰ã€‚</li>
</ul>
</li>
<li>
<p><strong>å…¸å‹åœºæ™¯</strong>ï¼šKubernetes æœåŠ¡ç½‘æ ¼ã€å¾®æœåŠ¡é—´æµé‡æ²»ç†ã€ç°åº¦å‘å¸ƒã€‚</p>
</li>
</ul>
<h3 data-id="heading-5">5. <strong>Spring Cloud Gatewayï¼šJava å¾®æœåŠ¡çš„ API ç½‘å…³</strong></h3>
<ul>
<li>
<p><strong>å®šä½</strong>ï¼šSpring ç”Ÿæ€å†…çš„ API ç½‘å…³ï¼Œä¸“æ³¨äº<strong>ä¸šåŠ¡ä¾§æµé‡æ²»ç†</strong>ã€‚</p>
</li>
<li>
<p><strong>æŠ€æœ¯ç‰¹æ€§</strong>ï¼š</p>
<ul>
<li><strong>åŠ¨æ€è·¯ç”±</strong>ï¼šç»“åˆæœåŠ¡æ³¨å†Œä¸­å¿ƒï¼ˆå¦‚ Nacosï¼‰è‡ªåŠ¨æ„ŸçŸ¥åç«¯å˜åŒ–ã€‚</li>
<li><strong>è¿‡æ»¤å™¨é“¾</strong>ï¼šé›†æˆ Sentinel å®ç°é™æµç†”æ–­ã€OAuth2 å®ç°é‰´æƒã€‚</li>
<li><strong>å“åº”å¼æ¶æ„</strong>ï¼šåŸºäº Netty çš„å¼‚æ­¥éé˜»å¡æ¨¡å‹ã€‚</li>
</ul>
</li>
<li>
<p><strong>å…¸å‹åœºæ™¯</strong>ï¼šSpring Boot åº”ç”¨å…¥å£ã€å¾®æœåŠ¡ API ç½‘å…³ã€‚</p>
</li>
</ul>
<hr/>
<h2 data-id="heading-6">äºŒã€åŠŸèƒ½å¯¹æ¯”ï¼šä»åŸºç¡€ä»£ç†åˆ°æ™ºèƒ½æ²»ç†</h2>
<h3 data-id="heading-7">1. <strong>åè®®ä¸è´Ÿè½½å‡è¡¡</strong></h3>



































<table><thead><tr><th>å·¥å…·</th><th>åè®®æ”¯æŒ</th><th>è´Ÿè½½å‡è¡¡ç®—æ³•</th></tr></thead><tbody><tr><td>LVS</td><td>TCP/UDP</td><td>RRã€WRRã€LCã€WLC</td></tr><tr><td>Nginx</td><td>HTTP/HTTPSã€TCPã€gRPC</td><td>è½®è¯¢ã€IP å“ˆå¸Œã€æœ€å°‘è¿æ¥</td></tr><tr><td>HAProxy</td><td>TCPã€HTTPã€WebSocket</td><td>RRã€åŠ æƒè½®è¯¢ã€ä¸€è‡´æ€§å“ˆå¸Œ</td></tr><tr><td>Envoy</td><td>HTTP/1.1/2ã€gRPCã€Redis</td><td>åŠ æƒè½®è¯¢ã€æœ€å°‘è¯·æ±‚ã€éšæœº</td></tr><tr><td>Spring Gateway</td><td>HTTP/HTTPSã€WebSocket</td><td>è½®è¯¢ã€éšæœºã€æƒé‡</td></tr></tbody></table>
<h3 data-id="heading-8">2. <strong>åŠ¨æ€é…ç½®ä¸æ‰©å±•æ€§</strong></h3>
<ul>
<li><strong>LVS</strong>ï¼šä¾èµ– Keepalived å®ç°é«˜å¯ç”¨ï¼Œé…ç½®éœ€æ‰‹åŠ¨è°ƒæ•´ï¼Œçµæ´»æ€§ä½ã€‚</li>
<li><strong>Nginx</strong>ï¼šé™æ€é…ç½®éœ€é‡è½½ç”Ÿæ•ˆï¼Œæ‰©å±•ä¾èµ– Lua æ¨¡å—ï¼Œé€‚åˆç®€å•åœºæ™¯ã€‚</li>
<li><strong>HAProxy</strong>ï¼šæ”¯æŒ ACL å’Œ Lua è„šæœ¬ï¼ŒåŠ¨æ€æ‰©å±•èƒ½åŠ›ä¸­ç­‰ã€‚</li>
<li><strong>Envoy</strong>ï¼šé€šè¿‡ xDS API å®ç°åŠ¨æ€é…ç½®ï¼Œæ”¯æŒè‡ªå®šä¹‰ Filterï¼Œæ‰©å±•æ€§å¼ºã€‚</li>
<li><strong>Spring Gateway</strong>ï¼šåŸºäº Spring ç”Ÿæ€åŠ¨æ€è·¯ç”±ï¼Œé›†æˆ Sentinel å®ç°é™æµã€‚</li>
</ul>
<h3 data-id="heading-9">3. <strong>å®‰å…¨ä¸å¯è§‚æµ‹æ€§</strong></h3>



































<table><thead><tr><th>å·¥å…·</th><th>å®‰å…¨ç‰¹æ€§</th><th>å¯è§‚æµ‹æ€§æ”¯æŒ</th></tr></thead><tbody><tr><td>LVS</td><td>åŸºç¡€ ACLã€IP ä¼ªè£…</td><td>æ— å†…ç½®ç›‘æ§ï¼Œä¾èµ–ç¬¬ä¸‰æ–¹å·¥å…·</td></tr><tr><td>Nginx</td><td>SSL ç»ˆæ­¢ã€è¯·æ±‚é™é€Ÿ</td><td>æ—¥å¿—ã€åŸºç¡€æŒ‡æ ‡</td></tr><tr><td>HAProxy</td><td>ä¼šè¯ä¿æŒã€TCP å¥åº·æ£€æŸ¥</td><td>ç»Ÿè®¡é¡µé¢ã€è¿æ¥çŠ¶æ€ç»Ÿè®¡</td></tr><tr><td>Envoy</td><td>mTLSã€JWT éªŒè¯ã€æµé‡é•œåƒ</td><td>æŒ‡æ ‡ã€æ—¥å¿—ã€åˆ†å¸ƒå¼è¿½è¸ª</td></tr><tr><td>Spring Gateway</td><td>Spring Securityã€OAuth2 é›†æˆ</td><td>Spring Boot Actuatorã€Prometheus</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-10">ä¸‰ã€æ€§èƒ½åŸºå‡†ï¼šæ•°æ®é©±åŠ¨çš„é€‰æ‹©ä¾æ®</h2>
<h3 data-id="heading-11">1. <strong>çº¯ HTTP åœºæ™¯</strong></h3>
<ul>
<li><strong>Nginx</strong>ï¼šå•èŠ‚ç‚¹å¯å¤„ç† <strong>5 ä¸‡+ QPS</strong>ï¼Œå»¶è¿Ÿä½äº 10msã€‚</li>
<li><strong>HAProxy</strong>ï¼šTCP åœºæ™¯ä¸‹ååé‡æ¯” Nginx é«˜ 15-20%ï¼Œå†…å­˜å ç”¨ä½ 30%ã€‚</li>
<li><strong>Envoy</strong>ï¼šgRPC åœºæ™¯æ€§èƒ½ä¼˜äº Nginxï¼Œä½† HTTP ååé‡è¾ƒä½ï¼ˆçº¦ 900 QPSï¼‰ã€‚</li>
<li><strong>LVS</strong>ï¼šç™¾ä¸‡çº§å¹¶å‘ï¼Œå»¶è¿Ÿå¾®ç§’çº§ï¼Œä½†éœ€é…åˆ Keepalived ä½¿ç”¨ã€‚</li>
</ul>
<h3 data-id="heading-12">2. <strong>å¤æ‚æ²»ç†åœºæ™¯</strong></h3>
<ul>
<li><strong>Envoy</strong>ï¼šæ”¯æŒåŠ¨æ€è·¯ç”±ã€ç†”æ–­é™çº§ã€æµé‡é•œåƒï¼Œé€‚åˆå¾®æœåŠ¡ç½‘æ ¼ã€‚</li>
<li><strong>Spring Gateway</strong>ï¼šé›†æˆ Sentinel å®ç°ç»†ç²’åº¦é™æµï¼Œé€‚åˆ Java ä¸šåŠ¡é€»è¾‘ã€‚</li>
<li><strong>HAProxy</strong>ï¼šæ”¯æŒ URL æ£€æµ‹å’Œä¼šè¯ä¿æŒï¼Œé€‚åˆæ•°æ®åº“è¯»å†™åˆ†ç¦»ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-13">å››ã€é€‰å‹å»ºè®®ï¼šåœºæ™¯åŒ–å†³ç­–</h2>
<h3 data-id="heading-14">1. <strong>ä¼ ç»Ÿ Web åº”ç”¨</strong></h3>
<ul>
<li><strong>é€‰æ‹© Nginx</strong>ï¼šå¤„ç†é™æ€èµ„æºã€SSL ç»ˆæ­¢ã€é«˜å¹¶å‘ HTTP è¯·æ±‚ã€‚</li>
</ul>
<h3 data-id="heading-15">2. <strong>TCP/UDP æœåŠ¡ä»£ç†</strong></h3>
<ul>
<li><strong>é€‰æ‹© LVS</strong>ï¼šæè‡´æ€§èƒ½ä¸ä½å»¶è¿Ÿï¼Œé€‚åˆæ•°æ®åº“ã€ç¼“å­˜é›†ç¾¤ã€‚</li>
<li><strong>é€‰æ‹© HAProxy</strong>ï¼šéœ€ä¼šè¯ä¿æŒæˆ–å¥åº·æ£€æŸ¥æ—¶ä½¿ç”¨ã€‚</li>
</ul>
<h3 data-id="heading-16">3. <strong>äº‘åŸç”Ÿå¾®æœåŠ¡</strong></h3>
<ul>
<li><strong>é€‰æ‹© Envoy</strong>ï¼šåŠ¨æ€æµé‡ç®¡ç†ã€æœåŠ¡ç½‘æ ¼é›†æˆï¼Œæ”¯æ’‘ Kubernetes ç”Ÿæ€ã€‚</li>
</ul>
<h3 data-id="heading-17">4. <strong>Java å¾®æœåŠ¡ç½‘å…³</strong></h3>
<ul>
<li><strong>é€‰æ‹© Spring Cloud Gateway</strong>ï¼šæ— ç¼å¯¹æ¥ Spring ç”Ÿæ€ï¼Œå¿«é€Ÿå®ç°é‰´æƒã€é™æµã€‚</li>
</ul>
<h3 data-id="heading-18">5. <strong>æ··åˆè´Ÿè½½åœºæ™¯</strong></h3>
<ul>
<li><strong>åˆ†å±‚æ¶æ„</strong>ï¼šLVS ä½œä¸ºè¾¹ç¼˜å±‚å¤„ç†å…¥å£æµé‡ï¼ŒEnvoy æˆ– Spring Gateway ä½œä¸ºå†…éƒ¨ç½‘å…³ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-19">äº”ã€ååŒæ¶æ„ï¼šå¤šå±‚ç½‘å…³çš„å®è·µæ¨¡å¼</h2>
<p>ç°ä»£æ¶æ„å¸¸é‡‡ç”¨<strong>åˆ†å±‚ç½‘å…³</strong>è®¾è®¡ï¼š</p>
<ol>
<li><strong>è¾¹ç¼˜å±‚ï¼ˆLVS/Nginxï¼‰</strong> ï¼šæŠ—ä½å¤–éƒ¨æµé‡ï¼Œå¤„ç† SSL ç»ˆæ­¢ã€DDoS é˜²æŠ¤ã€‚</li>
<li><strong>å†…éƒ¨å±‚ï¼ˆEnvoy/Spring Gatewayï¼‰</strong> ï¼šåŠ¨æ€è·¯ç”±ã€æœåŠ¡æ²»ç†ï¼Œé€‚é…å¾®æœåŠ¡åŠ¨æ€æ€§ã€‚</li>
</ol>
<hr/>
<h2 data-id="heading-20">æ€»ç»“</h2>
<p>äº”ç±»å·¥å…·å„æœ‰ä¾§é‡ï¼š</p>
<ul>
<li><strong>LVS</strong>ï¼šå››å±‚è´Ÿè½½å‡è¡¡æ€§èƒ½æ ‡æ†ï¼Œé€‚åˆä¼ ç»ŸåŸºç¡€è®¾æ–½å±‚ã€‚</li>
<li><strong>Nginx</strong>ï¼šä¸ƒå±‚åå‘ä»£ç†é€šç”¨æ–¹æ¡ˆï¼ŒåŠŸèƒ½å…¨é¢ä¸”éƒ¨ç½²çµæ´»ã€‚</li>
<li><strong>HAProxy</strong>ï¼šå››å±‚/ä¸ƒå±‚æ··åˆè´Ÿè½½å‡è¡¡ä¸“å®¶ï¼Œå¹³è¡¡æ€§èƒ½ä¸åŠŸèƒ½ã€‚</li>
<li><strong>Envoy</strong>ï¼šäº‘åŸç”ŸæœåŠ¡ç½‘æ ¼æ ¸å¿ƒç»„ä»¶ï¼Œæ”¯æ’‘å¤æ‚æ²»ç†éœ€æ±‚ã€‚</li>
<li><strong>Spring Cloud Gateway</strong>ï¼šJava å¾®æœåŠ¡ç½‘å…³é¦–é€‰ï¼Œæ·±åº¦é›†æˆ Spring ç”Ÿæ€ã€‚</li>
</ul>
<p>é€‰æ‹©æ—¶éœ€ç»“åˆ<strong>åè®®éœ€æ±‚ã€æ€§èƒ½è¦æ±‚ã€æŠ€æœ¯æ ˆé€‚é…æ€§</strong>ç»¼åˆè€ƒé‡ï¼Œå¿…è¦æ—¶é€šè¿‡åˆ†å±‚æ¶æ„å‘æŒ¥ååŒä¼˜åŠ¿ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Android 17 é¦–æ›ï¼šæ¶²æ€ç»ç’ƒè®¾è®¡æ¥äº†ï¼Œè¿™å¯èƒ½æ˜¯è¿‘å¹´æœ€å¤§çš„è§†è§‰å‡çº§]]></title>    <link>https://juejin.cn/post/7602811649126858803</link>    <guid>https://juejin.cn/post/7602811649126858803</guid>    <pubDate>2026-02-05T00:54:29.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602811649126858803" data-draft-id="7602811649126842419" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Android 17 é¦–æ›ï¼šæ¶²æ€ç»ç’ƒè®¾è®¡æ¥äº†ï¼Œè¿™å¯èƒ½æ˜¯è¿‘å¹´æœ€å¤§çš„è§†è§‰å‡çº§"/> <meta itemprop="keywords" content="Android"/> <meta itemprop="datePublished" content="2026-02-05T00:54:29.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é»„æ—æ™´"/> <meta itemprop="url" content="https://juejin.cn/user/3985057546510423"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Android 17 é¦–æ›ï¼šæ¶²æ€ç»ç’ƒè®¾è®¡æ¥äº†ï¼Œè¿™å¯èƒ½æ˜¯è¿‘å¹´æœ€å¤§çš„è§†è§‰å‡çº§
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3985057546510423/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é»„æ—æ™´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-05T00:54:29.000Z" title="Thu Feb 05 2026 00:54:29 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-05
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>è¿˜è®°å¾— iOS çš„æ¯›ç»ç’ƒæ•ˆæœè®©å¤šå°‘ Android ç”¨æˆ·çœ¼é¦‹å—ï¼Ÿ</p>
<p>è¿™ä¸€æ¬¡ï¼ŒGoogle ç»ˆäºå‡ºæ‰‹äº†ã€‚</p>
<p>è¿‘æ—¥ï¼ŒX å¹³å°ç”¨æˆ· @RKBDI æ›å…‰äº† Android 17 çš„å†…éƒ¨æ„å»ºç‰ˆæœ¬æˆªå›¾ï¼Œæ­ç¤ºäº†ä¸€ç³»åˆ—ä»¤äººå…´å¥‹çš„æ–°ç‰¹æ€§ã€‚ä»ç›®å‰æ³„éœ²çš„ä¿¡æ¯æ¥çœ‹ï¼Œ<strong>è¿™å¯èƒ½æ˜¯è‡ª Material Design æ¨å‡ºä»¥æ¥ï¼ŒAndroid æœ€å¤§çš„ä¸€æ¬¡è§†è§‰é©æ–°</strong>ã€‚</p>
<h2 data-id="heading-0">ã€Œæ¶²æ€ç»ç’ƒã€ç¾å­¦ï¼šé«˜æ–¯æ¨¡ç³Šç»ˆäºæ¥äº†</h2>
<p>Android 17 æœ€å¼•äººæ³¨ç›®çš„å˜åŒ–ï¼Œæ˜¯ç³»ç»Ÿçº§çš„<strong>é«˜æ–¯æ¨¡ç³Šç‰¹æ•ˆ</strong>ã€‚</p>
<p>è¿™æ„å‘³ç€ï¼š</p>
<ul>
<li><strong>éŸ³é‡æ§åˆ¶é¢æ¿</strong> â†’ åŠé€æ˜æ¯›ç»ç’ƒæè´¨</li>
<li><strong>ç”µæºèœå•</strong> â†’ æ¨¡ç³Šå¤„ç†æ•ˆæœ</li>
<li><strong>æ–‡ä»¶å¤¹èƒŒæ™¯</strong> â†’ ç£¨ç ‚è´¨æ„Ÿ</li>
<li><strong>å°ç»„ä»¶</strong> â†’ é€šé€çš„è§†è§‰å±‚æ¬¡</li>
</ul>
<p>æ›´å¦™çš„æ˜¯ï¼Œè¿™äº›æ¨¡ç³Šæ•ˆæœä¼š<strong>è‡ªåŠ¨é€‚é…åŠ¨æ€å–è‰²ä¸»é¢˜</strong>ã€‚ä½ çš„å£çº¸æ˜¯ä»€ä¹ˆè‰²è°ƒï¼Œç³»ç»Ÿç•Œé¢å°±ä¼šå‘ˆç°ç›¸åº”çš„æ¨¡ç³Šè‰²å½©ã€‚</p>
<p>æœ‰äººè¯´è¿™æ˜¯åœ¨ã€ŒæŠ„è¢­ iOSã€ï¼Œä½†æˆ‘æ›´æ„¿æ„æŠŠå®ƒç†è§£ä¸º<strong>è®¾è®¡è¯­è¨€çš„è¶‹åŒè¿›åŒ–</strong>â€”â€”æ¯•ç«Ÿï¼Œå¥½çš„è®¾è®¡ä¸åº”è¯¥è¢«å¹³å°è¾¹ç•Œæ‰€é™åˆ¶ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/686332c8d50a4ccfb82b4c5c5dafe31c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6buE5p6X5pm0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770857670&amp;x-signature=uL2%2F6ub%2B67PEr0uGo27E7XxuqY4%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-1">å±å¹•å½•åˆ¶å¤§å‡çº§ï¼šæ‚¬æµ®èƒ¶å›Šè®¾è®¡</h2>
<p>è¯´å®è¯ï¼ŒAndroid åŸç”Ÿçš„å±å¹•å½•åˆ¶ä¸€ç›´å¾ˆã€ŒåŸå§‹ã€ã€‚</p>
<p>Android 17 å½»åº•é‡æ„äº†è¿™ä¸ªåŠŸèƒ½ï¼š</p>
<p><strong>å‘Šåˆ«å…¨å±å¼¹çª—ï¼Œè¿æ¥ã€Œæ‚¬æµ®èƒ¶å›Šã€</strong></p>
<p>æ–°çš„å½•å±å·¥å…·é‡‡ç”¨è½»é‡åŒ–è®¾è®¡ï¼š</p>
<ul>
<li>ä¸€é”®åˆ‡æ¢å½•åˆ¶ï¼šè®¾å¤‡éŸ³é¢‘ / éº¦å…‹é£ / è§¦æ‘¸æ˜¾ç¤º</li>
<li>å½•åˆ¶è¿‡ç¨‹ä¸­å¯ä»¥<strong>ç›´æ¥æ¶‚é¸¦æ ‡æ³¨</strong>ï¼ˆæ”¯æŒå¤šè‰²ç”»ç¬”ï¼‰</li>
<li>æ§ä»¶è‡ªåŠ¨æ”¶ç¼©åˆ°çŠ¶æ€æ ï¼Œä¸é®æŒ¡æ“ä½œ</li>
<li>å½•åˆ¶å®Œæˆåç›´æ¥é¢„è§ˆã€åˆ†äº«ã€ç¼–è¾‘</li>
</ul>
<p>è¿™å¯¹å†…å®¹åˆ›ä½œè€…å’Œæ•™ç¨‹åˆ¶ä½œè€…æ¥è¯´ï¼Œç®€ç›´æ˜¯ç¦éŸ³ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3cf259c73b714eac822da1a8398306fa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6buE5p6X5pm0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770857670&amp;x-signature=y0ia6nSOb1wkAd1TrHwBViYB2oA%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-2">åŸç”Ÿåº”ç”¨é”ï¼šç»ˆäºä¸ç”¨è£…ç¬¬ä¸‰æ–¹ App äº†</h2>
<p>æ¯æ¬¡æœ‰äººå€Ÿä½ æ‰‹æœºï¼Œæ˜¯ä¸æ˜¯éƒ½å¿ƒæƒŠèƒ†æˆ˜ï¼Ÿ</p>
<p>Android 17 ç»ˆäºåŠ å…¥äº†<strong>ç³»ç»Ÿçº§åº”ç”¨é”</strong>åŠŸèƒ½ï¼š</p>
<ul>
<li>é•¿æŒ‰åº”ç”¨å›¾æ ‡ â†’ é€‰æ‹©ã€Œé”å®šåº”ç”¨ã€</li>
<li>æ”¯æŒ PIN / å¯†ç  / ç”Ÿç‰©è¯†åˆ«è§£é”</li>
<li>æ— éœ€å®‰è£…ä»»ä½•ç¬¬ä¸‰æ–¹åº”ç”¨</li>
</ul>
<p>è™½ç„¶è¿™ä¸ªåŠŸèƒ½ iPhone æ—©å°±æœ‰äº†ï¼Œä¸‰æ˜Ÿã€å°ç±³ç­‰å‚å•†ä¹Ÿæ—©å·²å®ç°ï¼Œä½†å¯¹äºåŸç”Ÿ Android ç”¨æˆ·æ¥è¯´ï¼Œè¿™ç»å¯¹æ˜¯æœŸå¾…å·²ä¹…çš„æ›´æ–°ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/444652bebfa4481189a3d3c19d585f02~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6buE5p6X5pm0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770857670&amp;x-signature=UqfwErNhUoKsZBDQw2cENGnSE48%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-3">æ¡Œé¢æ¨¡å¼ï¼šæ‰‹æœºç§’å˜ç”Ÿäº§åŠ›å·¥å…·</h2>
<p>è¿˜è®°å¾—ä¸‰æ˜Ÿçš„ DeX å—ï¼Ÿ</p>
<p>Android 17 å°†è¿™ä¸ªèƒ½åŠ›<strong>å†…ç½®åˆ°ç³»ç»Ÿä¸­</strong>ï¼š</p>
<ul>
<li>è¿æ¥æ˜¾ç¤ºå™¨ï¼Œè·å¾—ç±»ä¼¼ PC çš„ç•Œé¢</li>
<li>é¦–æ¬¡å‡ºç°<strong>ä»»åŠ¡æ å’ŒçŠ¶æ€æ </strong></li>
<li>æ”¯æŒ<strong>è‡ªå®šä¹‰é”®ç›˜å¿«æ·é”®</strong></li>
<li>å¤šçª—å£ã€å¤šä»»åŠ¡ä½“éªŒå…¨é¢å‡çº§</li>
</ul>
<p>è¿™æ„å‘³ç€ä½ çš„ Android æ‰‹æœºï¼Œæœªæ¥å¯èƒ½çœŸçš„èƒ½æ›¿ä»£è½»åº¦åŠå…¬çš„ç¬”è®°æœ¬ç”µè„‘ã€‚</p>
<h2 data-id="heading-4">Material 3 Expressive æ‰©å±•</h2>
<p>Google çš„ Material 3 Expressive è®¾è®¡è¯­è¨€å°†ä» Pixel æ‰‹æœº<strong>æ‰©å±•åˆ°æ›´å¤šè®¾å¤‡</strong>ã€‚</p>
<p>æ›´ä¸°å¯Œçš„åŠ¨ç”»ã€æ›´æµç•…çš„è¿‡æ¸¡ã€æ›´ç»Ÿä¸€çš„è§†è§‰ä½“éªŒâ€”â€”è¿™æ˜¯ Android ç”Ÿæ€èµ°å‘ä¸€è‡´æ€§çš„é‡è¦ä¸€æ­¥ã€‚</p>
<h2 data-id="heading-5">å…¶ä»–å€¼å¾—å…³æ³¨çš„æ›´æ–°</h2>

























<table><thead><tr><th>åŠŸèƒ½</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>å®æ—¶æ›´æ–°</strong></td><td>å…±äº«ä¹˜è½¦ã€å¤–å–é…é€ç­‰äº‹ä»¶çš„åŠ¨æ€æ›´æ–°</td></tr><tr><td><strong>æ°”æ³¡æ‰©å±•</strong></td><td>ä¸å†ä»…é™é€šè®¯ç±»åº”ç”¨</td></tr><tr><td><strong>å·¥å‚é‡ç½®ä¿æŠ¤å¢å¼º</strong></td><td>è¿›ä¸€æ­¥é™åˆ¶æœªæˆæƒé‡ç½®çš„è®¾å¤‡</td></tr><tr><td><strong>éšç§æ§åˆ¶ä¼˜åŒ–</strong></td><td>æ›´ç²¾ç»†çš„æƒé™ç®¡ç†</td></tr></tbody></table>
<h2 data-id="heading-6">å†™åœ¨æœ€å</h2>
<p>ä» Android 12 çš„ Material Youï¼Œåˆ° Android 17 çš„ã€Œæ¶²æ€ç»ç’ƒã€ï¼ŒGoogle åœ¨è®¾è®¡ä¸Šçš„é‡å¿ƒè¶Šæ¥è¶Šå¤§ã€‚</p>
<p>ä¸å¾—ä¸è¯´ï¼Œè¿™ä¸€æ¬¡çš„æ›´æ–°è®©äººçœŸçš„å¾ˆæœŸå¾…ï¼š</p>
<ul>
<li><strong>é«˜æ–¯æ¨¡ç³Š</strong> è®©ç³»ç»Ÿç»ˆäºä¸å†ã€ŒåœŸã€</li>
<li><strong>æ‚¬æµ®å½•å±</strong> è®©å†…å®¹åˆ›ä½œæ›´è½»æ¾</li>
<li><strong>åŸç”Ÿåº”ç”¨é”</strong> è®©éšç§ä¿æŠ¤æ›´çœå¿ƒ</li>
<li><strong>æ¡Œé¢æ¨¡å¼</strong> è®©ç”Ÿäº§åŠ›æœ‰äº†æ›´å¤šå¯èƒ½</li>
</ul>
<p>å½“ç„¶ï¼Œæœ€ç»ˆæ•ˆæœå¦‚ä½•ï¼Œè¿˜è¦ç­‰æ­£å¼ç‰ˆå‘å¸ƒæ‰èƒ½è§åˆ†æ™“ã€‚</p>
<p><strong>ä½ æœ€æœŸå¾… Android 17 çš„å“ªä¸ªåŠŸèƒ½ï¼Ÿæ¬¢è¿åœ¨è¯„è®ºåŒºå‘Šè¯‰æˆ‘ã€‚</strong></p>
<p><em>å¦‚æœè§‰å¾—æœ‰ç”¨ï¼Œåˆ«å¿˜äº†ç‚¹ä¸ªã€Œåœ¨çœ‹ã€å’Œã€Œè½¬å‘ã€~</em></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[JavaScript æ¡†æ¶å±•æœ› 2026]]></title>    <link>https://juejin.cn/post/7602910573404717094</link>    <guid>https://juejin.cn/post/7602910573404717094</guid>    <pubDate>2026-02-05T00:55:54.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602910573404717094" data-draft-id="7602910573404700710" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="JavaScript æ¡†æ¶å±•æœ› 2026"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,é¢è¯•"/> <meta itemprop="datePublished" content="2026-02-05T00:55:54.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ˜é‡‘å®‰ä¸œå°¼"/> <meta itemprop="url" content="https://juejin.cn/user/1521379823340792"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            JavaScript æ¡†æ¶å±•æœ› 2026
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1521379823340792/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ˜é‡‘å®‰ä¸œå°¼
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-05T00:55:54.000Z" title="Thu Feb 05 2026 00:55:54 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-05
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åŸæ–‡ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdev.to%2Fthis-is-learning%2Fjavascript-frameworks-heading-into-2026-2hel" target="_blank" title="https://dev.to/this-is-learning/javascript-frameworks-heading-into-2026-2hel" ref="nofollow noopener noreferrer">JavaScript Frameworks â€” Heading into 2026</a></p>
<p>ä½œè€…ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdev.to%2Fryansolid" target="_blank" title="https://dev.to/ryansolid" ref="nofollow noopener noreferrer">Ryan Carniato</a></p>
<p>æ—¥æœŸï¼š2026å¹´1æœˆ5æ—¥</p>
<p>ç¿»è¯‘ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FTUARAN" target="_blank" title="https://github.com/TUARAN" ref="nofollow noopener noreferrer">TUARAN</a></p>
<blockquote>
<p>æ¬¢è¿å…³æ³¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FTUARAN%2Ffrontend-weekly-digest-cn" target="_blank" title="https://github.com/TUARAN/frontend-weekly-digest-cn" ref="nofollow noopener noreferrer">å‰ç«¯å‘¨åˆŠ</a>ï¼Œæ¯å‘¨æ›´æ–°å›½å¤–è®ºå›çš„å‰ç«¯çƒ­é—¨æ–‡ç« ï¼Œç´§è·Ÿæ—¶äº‹ï¼ŒæŒæ¡å‰ç«¯æŠ€æœ¯åŠ¨æ€ã€‚</p>
</blockquote>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5e85fac107f8469ea7a78ccd480cbc50~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR5a6J5Lic5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770857754&amp;x-signature=8ZxYT9zRGlJDK0kKDQCCqDYEUxo%3D" alt="JavaScript Frameworks - Heading into 2026" loading="lazy"/></p>
<p>æˆ‘æƒ³ï¼Œä¸‰å¹´ä¹‹åï¼Œæˆ‘çš„ JavaScript æ¡†æ¶å¹´åº¦å›é¡¾å·²ç»å¯ä»¥ç®—ä½œä¸€ä¸ªâ€œæƒ¯ä¾‹â€äº†ã€‚2025 å¹´å†™è¿™ç¯‡æ–‡ç« æ—¶ï¼Œæˆ‘å¾ˆéš¾ä¸‹ç¬”ï¼Œå› ä¸ºæˆ‘ä»¬å°è¯•çš„å¾ˆå¤šæƒ³æ³•å¹¶ä¸è¶³ä»¥èµ°åˆ°ç»ˆç‚¹ã€‚æœ‰æ—¶æˆ‘ä»¬ç¡®å®éœ€è¦ä¸€æ¬¡ç°å®æ£€éªŒï¼Œç”¨æ¥é‡ç½®æœŸæœ›ã€‚</p>
<p>è¿™ç§æƒ…ç»ªå»¶ç»­åˆ°äº†ä»Šå¹´ã€‚ä¸€äº›åŸæœ¬ä»¥ä¸ºä¸ä¼šå†æ›´æ–°çš„åº“ï¼Œç«Ÿç„¶åˆå‡ºäº†æ–°ç‰ˆæœ¬ã€‚</p>
<p>React åœ¨ä»Šå¹´ç»å†äº†ä¸€äº›æ˜¾è‘—çš„å´©æºƒäº‹æ•…å’Œå®‰å…¨æ¼æ´ã€‚</p>
<p>è¿™ä¸€å¹´å˜åŒ–å¾ˆå¤šï¼Œä½†æ›´å¤šæ˜¯ä¸€ç§è§†è§’çš„å˜åŒ–ã€‚è‹¥è¯´ AI è¿‡å»è¿˜ä¸å¤Ÿä¸»æµï¼Œé‚£ä¹ˆè¿‡å»ä¸€å¹´å®ƒå·²å®Œå…¨ä¸»å¯¼äº†è®¨è®ºã€‚ä»¥è‡³äºå‡ ä¹æ²¡äººå†è°ˆæ–°çš„ JavaScript æ¡†æ¶æˆ–æ¡†æ¶ç‰¹æ€§ã€‚ä½†è¿™å¹¶ä¸ä»£è¡¨äº‹æƒ…æ²¡æœ‰è¿›å±•ã€‚</p>
<p>æˆ‘ä»¬å·²ç»åˆ°äº†ä¸€ä¸ªé˜¶æ®µï¼šåœ¨è¿™ç‰‡æ°´åŸŸé‡Œèˆªè¡Œæ—¶ï¼Œâ€œæ„¿æ™¯â€æ¯”å®ç°æ›´é‡è¦ã€‚æœ€åˆæ¨åŠ¨è®¸å¤šæ¡†æ¶è½¬å‘ Signals çš„æ€§èƒ½å…³æ³¨ï¼Œæ­£è®©ä½ç»™æ›´æˆ˜ç•¥åŒ–çš„æ€è€ƒã€‚å› æ­¤ï¼Œä»è¿™äº›æ–¹å‘å¼€å§‹èŠ 2026 æ˜¯ä¸ªå¾ˆå¥½çš„åˆ‡å…¥ç‚¹ã€‚</p>
<h2 data-id="heading-0">AI-First æ¡†æ¶</h2>
<p>è¿‡å»å‡ å¹´é‡Œï¼Œæˆ‘ä¸€ç›´è®¤ä¸º AI å¯¹ JavaScript æ¡†æ¶çš„å¼€å‘å½±å“ä¸å¤§ã€‚è™½ç„¶å¼€å‘è€…ä¸æ–­å­¦ä¹ æ–°å·¥å…·ï¼ŒLLM ä¹Ÿåœ¨ç”Ÿæˆå„ç§æ¡†æ¶ä»£ç ä¸Šè¶Šæ¥è¶Šå¼ºï¼Œä½†æ¡†æ¶æœ¬èº«å¹¶æ²¡æœ‰åšå¤ªå¤šæ”¹å˜ã€‚æ˜¯çš„ï¼Œå®ƒæ”¹å˜äº†æˆ‘ä»¬çœ‹æ–‡æ¡£çš„æ–¹å¼ï¼Œæœ‰äº›å·¥å…·ä¹ŸåŠ ä¸Šäº† MCP æœåŠ¡å™¨ã€‚ä½†å®ƒçœŸçš„æ”¹å˜äº†æ¡†æ¶è®¾è®¡æ–¹å¼å—ï¼Ÿ</p>
<h3 data-id="heading-1">2025 çš„è§†è§’</h3>
<p>å’Œæ‰€æœ‰é¢ è¦†æ€§æŠ€æœ¯ä¸€æ ·ï¼Œè¡Œä¸šéœ€è¦æ—¶é—´é€‚åº”ã€‚æˆ‘ä»¬å¾€å¾€å…ˆå…³æ³¨å®ƒå½“ä¸‹çš„èƒ½åŠ›ï¼Œè€Œä¸æ˜¯å…¨éƒ¨æ½œåŠ›ã€‚å¯¹äº LLM æ¥è¯´ï¼Œå°±æ˜¯å®ƒåœ¨è®­ç»ƒæ•°æ®æœ€ä¸°å¯Œçš„åœ°æ–¹è¡¨ç°æœ€å¥½ã€‚ä½ å¯èƒ½å¬è¿‡â€œReact æ˜¯æœ€åä¸€ä¸ªæ¡†æ¶â€çš„è¯´æ³•ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/60ac942a20a84c708f9d100d6e20c3ba~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR5a6J5Lic5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770857754&amp;x-signature=nj21LXrK4PHasdWjBCOVMfDIIxE%3D" alt="React is the Last Framework" loading="lazy"/></p>
<p>è¿™ä¸ªè§‚ç‚¹è®¤ä¸ºï¼šå€ŸåŠ©ç¼–è¯‘å™¨ï¼ŒReact å¯ä»¥åœ¨ä¸å¼•å…¥æ–°ç‰¹æ€§æˆ–è¯­æ³•å˜åŒ–çš„æƒ…å†µä¸‹å˜å¾—æ›´é«˜æ•ˆã€‚ä½†è¿‡å»å‡ å¹´å‘Šè¯‰æˆ‘ä»¬ï¼Œè¿™æ›´åƒæ˜¯ä¸€å¢æƒ…æ„¿ã€‚äº‹æƒ…æ€»ä¼šå˜ã€‚</p>
<p>ä½†è¿™ä¸ªç°è±¡ç¡®å®å­˜åœ¨ã€‚AI æ˜¯æˆ‘ä»¬è§è¿‡æœ€å¤§çš„â€œå›éŸ³å®¤â€ï¼Œå®ƒæŠŠ React äº¤åˆ°äº†åŸæœ¬ä¸ä¼šä½¿ç”¨å®ƒçš„äººæ‰‹ä¸­ã€‚</p>
<p>åŒæ—¶ï¼Œè¿™ä¹Ÿæ„å‘³ç€æ¯ä¸ªæ¡†æ¶éƒ½æ˜¯è‡ªèº«æˆåŠŸçš„å—å®³è€…ã€‚LLM æ¯å¤©éƒ½åœ¨æ›´å¹¿æ³›çš„å·¥å…·ä¸Šç”Ÿæˆæ›´å¥½çš„ä»£ç ã€‚é‚£ä¹ˆä¼šä¸ä¼šå‡ºç°æŸä¸ªæ‹ç‚¹ï¼Œè®©è¿™äº›è®­ç»ƒé›†çš„è´¨é‡è¶…è¶Šå†å²ä¸Šæ›´å—æ¬¢è¿æ–¹æ¡ˆçš„â€œæ•°é‡ä¼˜åŠ¿â€ï¼Ÿ</p>
<p>å› ä¸ºå¦‚æœ 2018 å¹´çš„ React çœŸçš„å·²ç»æ˜¯â€œæœ€åä¸€ä¸ªæ¡†æ¶â€ï¼Œé‚£æˆ‘ä»¬è¿˜æœ‰æ›´å¤§çš„é—®é¢˜ã€‚</p>
<h3 data-id="heading-2">æ‹¥æŠ±é‡è®¾è®¡</h3>
<p>å¦‚ä»Šæ–°çš„ JavaScript æ¡†æ¶æ›´å°‘äº†ï¼Œä½†æœ‰ä¸€ä¸ªæ¡†æ¶ç‰¹åˆ«å¼ºè°ƒ AI-First çš„é‡è®¾è®¡ï¼šRemix 3 ä¸å†æ„å»ºåœ¨ React ä¹‹ä¸Šï¼Œå®ƒä»é›¶å¼€å§‹é‡æ„å…¨æ ˆ Web å¼€å‘ã€‚åˆ›å»ºè€… Ryan Florence å’Œ Michael Jackson å¯¹ AI åœ¨æ¡†æ¶è®¾è®¡ä¸å®ç°ä¸­çš„è§’è‰²éå¸¸ç›´è¨€ä¸è®³ã€‚</p>
<p>ä»–ä»¬æœ€æœ‰è¶£çš„ç«‹åœºæ˜¯ï¼šå‡å°‘é¢†åŸŸç‰¹å®šè¯­è¨€ï¼ˆDSLï¼‰ï¼Œè®© AI æ›´å®¹æ˜“ç”Ÿæˆé€šç”¨è§£å†³æ–¹æ¡ˆã€‚</p>
<p>çœ‹ä»–ä»¬çš„å‘å¸ƒä¼šï¼ŒRyan ä¼šè®© AI ç”Ÿæˆä¸€æ®µç®€å•é€»è¾‘ï¼Œä¸éœ€è¦äº†è§£æ¡†æ¶æœ¬èº«ï¼Œç„¶åè½»æ¾æŠŠå®ƒæ”¾è¿›æ¼”ç¤ºé‡Œã€‚</p>
<p>è¿™ä¸å…¶ä»–æ¡†æ¶æä¾›è¯­ä¹‰åŒ–â€œè¯­è¨€åŸè¯­â€çš„åšæ³•å½¢æˆé²œæ˜å¯¹æ¯”ã€‚å¤§å¤šæ•°æ¡†æ¶æœ€ç»ˆéƒ½å›´ç»•çŠ¶æ€ã€æ´¾ç”ŸçŠ¶æ€å’Œå‰¯ä½œç”¨å»ºç«‹äº†ä¸€å¥—ç›¸ä¼¼è¯­è¨€ï¼Œå°½ç®¡å®ç°ä¸åŒã€‚</p>
<p>ç©¶ç«Ÿæ˜¯â€œæ›´å®¹æ˜“é›†æˆé€šç”¨è§£æ³•â€æ›´å¥½ï¼Œè¿˜æ˜¯â€œé¢†åŸŸåŸè¯­å¸¦æ¥çš„ä¿è¯â€æ›´å¥½ï¼Œåªèƒ½äº¤ç»™æ—¶é—´æ¥è¯æ˜ã€‚ä½†æ„Ÿè§‰æˆ‘ä»¬ç»ˆäºå¼€å§‹é—®åˆ°æ­£ç¡®çš„é—®é¢˜äº†ã€‚</p>
<h2 data-id="heading-3">Isomorphic-First æ¡†æ¶</h2>
<p>å»å¹´æˆ‘ä»¬æåˆ°ï¼Œå¼€å‘è€…å¯¹â€œæœåŠ¡å™¨é©±åŠ¨â€æŠ€æœ¯æœ‰æ‰€åå¼¹ã€‚Islands ä¸ React Server Components åœ¨ç”µå•†ä¸é€Ÿåº¦è¯„åˆ†ä¸»å¯¼çš„æ—¶ä»£è¿…é€Ÿå…´èµ·ï¼Œä½†å¾ˆå¤šäººå‘ç°è¿™äº›æ–¹æ¡ˆæ— æ³•æ»¡è¶³å¤æ‚ä¸”é«˜åº¦äº¤äº’çš„åº”ç”¨éœ€æ±‚ã€‚</p>
<p>è¿™ç§å¤æ‚æ€§æ¥è‡ªäºæœåŠ¡å™¨ä¸å®¢æˆ·ç«¯ UI ä¹‹é—´æ— å¤„ä¸åœ¨çš„è¾¹ç•Œï¼Œä»¥åŠ Islands å’Œ RSC æœ¬è´¨ä¸Šæ˜¯ä¸€ç§ä¸åŒæ¶æ„çš„äº‹å®ã€‚å®ƒä»¬çš„å¯¼èˆªå’Œå˜æ›´æ–¹å¼æ›´åƒä¼ ç»Ÿçš„å¤šé¡µåº”ç”¨ã€‚</p>
<p>å› æ­¤ï¼Œ2024 å¹´å¯¹å•é¡µåº”ç”¨çš„æŠ€æœ¯å‡çº§ç»§ç»­å‘å„æ¡†æ¶æ‰©æ•£ä¹Ÿå°±ä¸å¥‡æ€ªäº†ã€‚</p>
<p>æˆ‘ä»¬çœ‹åˆ° TanStack Start å’Œ SvelteKit è·Ÿéš SolidStartï¼ŒæŠŠâ€œä¹±åºæµå¼æ¸²æŸ“ï¼ˆOut-of-Order streamingï¼‰â€ã€â€œServer Functionsâ€ã€â€œæ›´ç»†ç²’åº¦çš„ä¹è§‚ UIï¼ˆOptimistic UIï¼‰â€å’Œâ€œSingle-Flight mutationsâ€ç­‰æ¨¡å¼å¸¦å…¥å„è‡ªç”Ÿæ€ã€‚</p>
<p>è¿™å†æ¬¡å°è¯äº†æˆ‘æ‰€è¯´çš„ Isomorphic-First æ¶æ„ï¼šåº”ç”¨æ ¸å¿ƒä»£ç åœ¨æœåŠ¡ç«¯ä¸å®¢æˆ·ç«¯éƒ½è¿è¡Œã€‚å®ƒå¯ä»¥ SSRï¼Œä½†æ¶æ„æ ¸å¿ƒè¿˜æ˜¯åŒæ„ã€‚æˆ‘ä»¬å¤šå¹´éƒ½è¿™æ ·åšï¼Œåªæ˜¯ç°åœ¨æœ‰äº†æ›´å¤šæ–°å·¥å…·ä¸èƒ½åŠ›ï¼Œå€Ÿé‰´äº† Server Components çš„ä¸€äº›æ•ˆç‡ï¼Œå´æ²¡æœ‰æ”¹å˜æ¶æ„æœ¬è´¨ã€‚</p>
<p>äº‹å®è¯æ˜ï¼Œä½ ä»ç„¶å¯ä»¥åˆ©ç”¨å¾ˆå¤šæœåŠ¡å™¨æ•ˆç‡è€Œä¸å¿…åˆ‡æ¢æ¶æ„ã€‚æˆ‘é¢„è®¡è¿™äº›æ¡†æ¶ä¼šç»§ç»­æ¼”åŒ–ï¼ŒæŠŠè‡ªå·±çš„æœåŠ¡ç«¯æ¨¡æ¿ï¼ˆServer Componentsï¼‰ç‰ˆæœ¬çº³å…¥ä½“ç³»ã€‚</p>
<h2 data-id="heading-4">Async-First æ¡†æ¶</h2>
<p>å¦‚æœè¦æŒ‡å‡º 2025 å¹´æ¡†æ¶æ€ç»´ä¸Šæœ€å¤§çš„è¿›åŒ–ï¼Œæˆ‘è®¤ä¸ºæ˜¯ Asyncã€‚</p>
<p>è™½ç„¶ä¸€äº›è¿‘å¹´æ‹¥æŠ± Signals çš„æ¡†æ¶å¸¦æ¥äº†ä¸“ç”¨åŸè¯­ï¼Œæ¯”å¦‚ Angular çš„ Resource APIï¼Œä½†æˆ‘è¯´çš„å˜åŒ–æ›´æ ¹æœ¬ã€‚</p>
<p>JavaScript æ¡†æ¶çš„ç›®æ ‡æ˜¯è®©åˆ›å»ºäº¤äº’å¼ UI æ›´å¯æ§ã€‚å¤§å¤šæ•°æ¡†æ¶é€‰æ‹©äº†å£°æ˜å¼ï¼šä½ æè¿° UI åœ¨æŸä¸ªçŠ¶æ€ä¸‹åº”è¯¥æ˜¯ä»€ä¹ˆæ ·ï¼Œæ¡†æ¶è´Ÿè´£å¤„ç†è¾“å…¥ã€åŒæ­¥çŠ¶æ€ï¼Œå¹¶ç¡®ä¿ä¸€è‡´æ€§ã€‚</p>
<p>å®ç°è¿™ä¸€ç‚¹æœ€ç®€å•çš„æ–¹æ³•æ˜¯ï¼šåœ¨åŒæ­¥æ›´æ–°ä¸Šå»ºç«‹ä¿è¯ã€‚è¿™ä¹Ÿæ˜¯ VDOM å’Œ Signals çš„å¸å¼•åŠ›ã€‚å¼‚æ­¥æ›´æ–°åˆ™ä¸åŒï¼Œå®ƒä¼šæ‰“ç ´è¿™äº›ä¿è¯ï¼Œè‹¥è€ƒè™‘ä¸å‘¨å¸¸å¸¸æ˜¾å¾—â€œç¡¬åŠ ä¸Šå»â€ã€‚</p>
<p>å¦‚æœå¼‚æ­¥æœ¬èº«ä¹Ÿèƒ½æºå¸¦ä¿è¯ï¼Œå¹¶æˆä¸ºæ ¸å¿ƒä½“éªŒçš„ä¸€éƒ¨åˆ†å‘¢ï¼Ÿ</p>
<p>React å¤šå¹´å‰åœ¨å¹¶å‘æ¨¡å¼ä¸ Transitions ä¸Šå°±æå‡ºäº†è¿™äº›é—®é¢˜ã€‚è€Œä»Šå¹´ç»ˆäºè®©æˆ‘ä»¬çœ‹åˆ°å®ƒèµ°åˆ°å“ªé‡Œã€‚Rick Hanlon å›´ç»• <code>useOptimistic</code> å’Œ â€œActionsâ€ çš„æ¢ç´¢ï¼Œæç»˜äº†ä¸€ä¸ªæœªæ¥ï¼šæ¯æ¬¡ç”¨æˆ·äº¤äº’éƒ½è¢«åŒ…è£¹åœ¨ Transition ä¸­ï¼ŒæŒ‰æ•°æ®å°±ç»ªæƒ…å†µåè°ƒ UI å±•ç¤ºå¹¶ç¡®ä¿ä¸€è‡´æ€§ã€‚</p>
<p>æœ‰è¶£çš„æ˜¯ï¼Œå¦‚æœä½ ç¨å¾®çœ¯èµ·çœ¼çœ‹ï¼Œè¿™å¹¶ä¸æ¯” Svelte çš„æ–°å¼‚æ­¥å¤„ç†æ–¹å¼å·®å¤šå°‘ã€‚å°½ç®¡ Svelte æ²¡æœ‰ Transitionsï¼Œä½†å®ƒ<a href="https://link.juejin.cn?target=https%3A%2F%2Fsvelte.dev%2Fplayground%2Ffe4b93c45cb741feb54a106d77750e97%3Fversion%3D5.46.1" target="_blank" title="https://svelte.dev/playground/fe4b93c45cb741feb54a106d77750e97?version=5.46.1" ref="nofollow noopener noreferrer">ä»ä¼šå°†è§¦å‘å¼‚æ­¥çš„æ›´æ–°åˆ†ç»„ï¼Œä»¥ç¡®ä¿å±å¹•ä¸ŠçŠ¶æ€çš„ä¸€è‡´æ€§</a>ã€‚è¡Œä¸ºä¸Šéå¸¸ç›¸ä¼¼ï¼Œåªæ˜¯ Svelte å€ŸåŠ©ç¼–è¯‘å™¨è€Œä¸æ˜¯æ˜¾å¼å°è£…ã€‚</p>
<p>å½“ç„¶ï¼Œè¿™é‡Œè¿˜æœ‰ä¸å°‘éœ€è¦æ‰“ç£¨çš„åœ°æ–¹ã€‚React è¦è®©è®¾è®¡ç³»ç»Ÿæ™®éé‡‡ç”¨è¿™äº›æ¨¡å¼ï¼Œå¯èƒ½ä¼šå¯¹ç”Ÿæ€é€ æˆè¾ƒå¤§è´Ÿæ‹…ã€‚ä½†å¯ä»¥ç¡®å®šçš„æ˜¯ï¼šä¸€äº›æ¼‚æµ®å¤šå¹´çš„ç†å¿µï¼Œç»ˆäºå¼€å§‹æ˜¾ç°å‡ºæˆå½¢çš„æ„¿æ™¯ã€‚</p>
<p>è¿™ç§å˜åŒ–å½±å“æ·±è¿œï¼Œä½†åˆè¶³å¤ŸåŸºç¡€ï¼Œä»¥è‡³äºå‡ å¹´åä¼šæˆä¸ºæ¡†æ¶çš„â€œå…¥åœºåˆ¸â€ã€‚æ•¬è¯·å…³æ³¨ã€‚</p>
<h2 data-id="heading-5">JavaScript æ¡†æ¶çš„æœªæ¥</h2>
<p>æˆ‘è®¤ä¸ºï¼Œ2025 å¹´æ¯”è¿‘å¹´ä»»ä½•ä¸€å¹´éƒ½æ›´æŒ‘æˆ˜æ¡†æ¶åœ¨ Web å¼€å‘ä¸­çš„è§’è‰²ã€‚æˆ‘ä»¬æ¸´æœ›ä»å¤æ‚æ€§ä¸­é€€ä¸€æ­¥ï¼Œä½†æ›¿ä»£æ–¹æ¡ˆå¹¶ä¸å……åˆ†ã€‚</p>
<p>ä½ å¯ä»¥ä¸æ–­åšâ€œæ›´å°‘â€ï¼Œç›´åˆ°ä¸å†èƒ½åšï¼›ä½ å¯ä»¥é€‰æ‹©æ›´å—é™çš„æŠ½è±¡ï¼Œç›´åˆ°å®ƒæ— æ³•æ»¡è¶³éœ€æ±‚ã€‚è¿™æ˜¯å¾ˆå¥½çš„å­¦ä¹ æ–¹å¼ï¼Œæˆ‘ä½œä¸ºæ¡†æ¶ä½œè€…ä¹Ÿå¸¸è¿™ä¹ˆåšã€‚ä½†ä½ å¯èƒ½èƒ½æ›´é«˜æ•ˆåœ°åˆ©ç”¨æ—¶é—´ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a7cca7d9912a4a34940df12ed5f2baa5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR5a6J5Lic5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770857754&amp;x-signature=qA%2FfpX3Eyc2ML1P2E%2BwojJJLww4%3D" alt="Cyberpunk City" loading="lazy"/></p>
<p>æˆ‘å¹¶ä¸æ˜¯åœ¨è¯´ HTMXã€æ— æ„å»ºæ–¹æ¡ˆã€Web Components ç­‰ç®€å•å·¥å…·åœ¨å„è‡ªèŒƒå›´å†…ä¸å¥½ç”¨ã€‚é—®é¢˜æ˜¯ï¼Œä¸€æ—¦æˆ‘ä»¬ä¸å¾—ä¸ç»§ç»­å‰è¿›ï¼Œå°±å¾ˆéš¾å›åˆ°æ›´â€œç®€å•â€çš„æ—¶ä»£ã€‚</p>
<p>æˆ‘ä»¬é¿å…å¤æ‚æ€§çš„æ–¹æ³•ï¼Œæ›´å¤šæ˜¯ç»•è¿‡é€‰æ‹©ç˜«ç—ªï¼šé‡‡ç”¨å…ƒæ¡†æ¶ï¼Œå¹¶åœ¨å…¶ä¹‹ä¸Šå†å æ›´å…·æ„è§çš„è„šæ‰‹æ¶ä¸é»˜è®¤é…ç½®ï¼ˆä¾‹å¦‚ Redwoodã€create-t3-appï¼‰ã€‚æˆ‘ä¸€ç›´æ‹…å¿ƒè¿™äº›ä¼šå¾ˆéš¾ä¿æŒæ›´æ–°ï¼Œè€Œ AI çš„å‡ºç°ç›´æ¥å‰Šå¼±äº†è¿™ä¸€å±‚ï¼šæ¡†æ¶ä½œè€…ç²¾å¿ƒé“ºå¥½çš„æ¨¡å—ï¼ŒAI å¾ˆå¯èƒ½ä¸€è‚¡è„‘æ‹¼åœ¨ä¸€èµ·ã€‚</p>
<p>è¿™åè¿‡æ¥è®©ç„¦ç‚¹å›åˆ°æ›´â€œåŸå§‹â€çš„æ¨¡å¼ã€‚å¹¶ä¸æ˜¯è¯´ API ä¸ä¼šç¨³å®šï¼ŒReact ä¹Ÿå¯ä»¥å˜åŒ–ï¼Œå±€éƒ¨ API çš„å˜åŒ–å¯ä»¥å­¦ä¹ ã€‚é—®é¢˜åœ¨äºè¿™ç§â€œæ‹¼è£…å¼å®ç°â€çš„æ¨¡å—åŒ–éœ€æ±‚ï¼Œè®©æˆ‘ä»¬æ›´éš¾æ•´ä½“ç†è§£æ–¹æ¡ˆã€‚</p>
<p>æŸç§æ„ä¹‰ä¸Šï¼ŒAI æ­£ç”¨å®ƒçš„ä¸è¶³åœ¨â€œè§£å†³å¤æ‚æ€§â€ï¼šå®ƒåšçš„äº‹å°±åƒä¸€ä¸ªä¸äº†è§£ç³»ç»Ÿçš„å¼€å‘è€…â€”â€”ç»•è¿‡å®ƒã€å¾€ä¸‹èµ°ä¸€å±‚ï¼ŒåšæŒè‡ªå·±ç†Ÿæ‚‰çš„æ–¹å¼ã€‚äºæ˜¯æœ€ç»ˆè´Ÿè´£æŠŠä¸œè¥¿æ‹¼èµ·æ¥çš„äººï¼Œä¹Ÿä¼šé¡ºç€è¿™ä¸ªæ–¹å‘èµ°ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥è¯´è¿™å¹¶ä¸ç†æƒ³ï¼Œä½†è§£å†³å®ƒæ˜¯ä¼˜å…ˆçº§ã€‚å®ƒæš—ç¤ºæˆ‘ä»¬éœ€è¦ä¸€ç§æ–¹æ¡ˆï¼šåœ¨å±€éƒ¨æä¾›æ˜ç¡®æ§åˆ¶çš„åŒæ—¶ï¼Œæ•´ä½“ä¸Šåˆèƒ½å’Œç³»ç»ŸååŒã€‚è¿™å°±åƒåœ¨å›¢é˜Ÿä¸­å¼€å‘è½¯ä»¶ï¼Œå³ä¾¿åªæœ‰ä¸€ä¸ªäººï¼Œä¹Ÿè¦ä»¥â€œåä½œâ€çš„æ–¹å¼å»è®¾è®¡ã€‚å®ƒæ”¹å˜äº†æŸäº›è§„æ¨¡åŒ–é—®é¢˜å‡ºç°çš„æ—¶ç‚¹ã€‚</p>
<p>å¹¸è¿çš„æ˜¯ï¼Œä¸ç®¡æ˜¯å¦åˆ»æ„ï¼Œè¿™ç§ç³»ç»Ÿæ€§é‡æ€æ­£æ˜¯å½“å‰å‘ç”Ÿçš„äº‹ã€‚ä¸è®ºæ˜¯é‡æ–°æ£€è§† asyncï¼Œè¿˜æ˜¯å¯»æ‰¾ä¿æŒåŒæ„æ¨¡å¼ä¸‹å¤§éƒ¨åˆ†æ—§ä»£ç ç»§ç»­å·¥ä½œçš„æ–¹å¼ã€‚</p>
<h2 data-id="heading-6">ç»“è®º</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b56d0bd680cc44469b6d9eab461b6623~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR5a6J5Lic5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770857754&amp;x-signature=v3Hun6jT4fEOstidhxhRd2foh2g%3D" alt="Conclusion" loading="lazy"/></p>
<p>è¿™äº›ä¸»é¢˜éƒ½å€¼å¾—æ›´æ·±å…¥çš„è®¨è®ºï¼Œè€Œæˆ‘ä»Šå¤©åªæ˜¯æµ…å°è¾„æ­¢ã€‚è¿‡å»ä¸€å¹´æˆ‘æœ¬è¯¥å†™æ›´å¤šæ–‡ç« ï¼Œä½†æˆ‘ä¸€ç›´åœ¨åšç ”ç©¶ã€‚</p>
<p>è¿™æ˜¯ä¸€ä¸ªåœ¨ JavaScript æ¡†æ¶ä¸Šå·¥ä½œçš„æ¿€åŠ¨äººå¿ƒçš„æ—¶ä»£ã€‚å®ƒä¸æ˜¯ Islandsã€å¯æ¢å¤æ€§ï¼ˆResumabilityï¼‰æˆ– RSC åˆç™»åœºæ—¶é‚£ç§â€œé¢„è§ˆå¼â€çš„æœªæ¥èƒ½åŠ›ï¼Œä¹Ÿä¸æ˜¯é‚£ç§ä¼šåœ¨æ¶æ„å±‚é¢å½»åº•æ”¹å˜é—®é¢˜å¤„ç†æ–¹å¼çš„æŠ€æœ¯å‰ç»ã€‚</p>
<p>è¿™æ˜¯ä¸€ä¸ªæ ¸å¿ƒæ‰“ç£¨çš„æ—¶ä»£ã€‚æŠŠç»éªŒæ•™è®­æç‚¼ä¸ºæ›´æ™®é€‚çš„äº‹å®ã€‚è¿™æ ·çš„æ”¹å˜å½±å“çš„æ˜¯æˆ‘ä»¬æ€è€ƒä»£ç çš„æ–¹å¼ï¼Œè€Œä¸ä»…ä»…æ˜¯æˆ‘ä»¬å†™çš„å†…å®¹ã€‚å› ä¸ºæœªæ¥å†™ä»£ç çš„å¯èƒ½éƒ½ä¸æ˜¯æˆ‘ä»¬è‡ªå·±ã€‚</p>
<p>è¿‡å»å‡ å¹´äººä»¬å°±ä¸€ç›´åœ¨è¯´ç±»ä¼¼çš„è¯ã€‚ä½†åœ¨ 2026 å¹´ï¼Œæˆ‘è®¤ä¸ºæˆ‘ä»¬ä¼šå¼€å§‹çœ‹åˆ°è¿™äº›å˜åŒ–æ˜¾åŒ–ä¸ºå…·ä½“å½¢æ€ã€‚æ„å»ºæ¨¡å—æ­£åœ¨ä»¥æ­£ç¡®çš„å±‚çº§æ­å»ºèµ·æ¥ã€‚</p>
<p>å¦‚æœä½ è§‰å¾—è¿™äº›è¯å¬èµ·æ¥å¾ˆç„ï¼Œä¹Ÿæ²¡å…³ç³»ã€‚ç»™å®ƒä¸€ç‚¹æ—¶é—´ã€‚æˆ‘æ‰¿è®¤ï¼Œç›´åˆ°æˆ‘èƒ½åœ¨è‡ªå·±çš„å†³ç­–ä¸­æ„Ÿå—åˆ°è¿™ç§â€œæ‹‰åŠ›â€ä¹‹å‰ï¼Œå®ƒå¯¹æˆ‘æ¥è¯´ä¹Ÿä¸å¤ªæœ‰æ„ä¹‰â€”â€”å°±åƒè¿œå¤„é»‘æ´å¾®å¾®æ”¹å˜é‡åŠ›è½¨è¿¹ä¸€æ ·ã€‚ä½†åœ¨ç»å†äº†å‡ å¹´çš„å¤æ‚æ¶æ„æŠ˜ç£¨ä¹‹åï¼Œæˆ‘å·²ç»å‡†å¤‡å¥½ç»§ç»­èµ°å‘å®ƒæŒ‡å¼•çš„æ–¹å‘ã€‚</p>
<p>Banner creditsï¼šÂ©ï¸ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.behance.net%2Fgallery%2F53451651%2FCyberpunk-City" target="_blank" title="https://www.behance.net/gallery/53451651/Cyberpunk-City" ref="nofollow noopener noreferrer">Cyberpunk-City</a> by Artur Sadlosã€‚</p>
<h2 data-id="heading-7">æ¨è</h2>
<p><strong>2026 å¹´ JavaScript æ¡†æ¶çš„ç«äº‰ç„¦ç‚¹ï¼Œå·²ç»ä»â€œæ–°è¯­æ³•ã€æ–°èŒƒå¼â€è½¬å‘â€œæ˜¯å¦æ›´é€‚åˆ AIã€å¼‚æ­¥ä¸åŒæ„åä½œçš„é•¿æœŸæ¼”è¿›â€ã€‚</strong></p>
<p>AI-First è®©æ¡†æ¶æ›´åå‘é€šç”¨èƒ½åŠ›ä¸å¯ç»„åˆæ€§ï¼ŒIsomorphic-First é‡æ–°ç¡®è®¤åŒæ„ä»æ˜¯ä¸»å¹²è·¯çº¿ï¼ŒAsync-First åˆ™æŠŠå¼‚æ­¥ä¸€è‡´æ€§æå‡ä¸ºåº•å±‚è®¾è®¡ç›®æ ‡ã€‚å¯¹å¼€å‘è€…æ¥è¯´ï¼ŒçœŸæ­£çš„æŒ‘æˆ˜ä¸å†æ˜¯â€œé€‰å“ªä¸ªæ¡†æ¶â€ï¼Œè€Œæ˜¯å¦‚ä½•æŠŠå¤æ‚ç³»ç»Ÿæ‹†è§£æˆ AI ä¸äººéƒ½èƒ½åä½œçš„ç»“æ„ï¼›å¦‚æœä½ éœ€è¦å¿«é€ŸéªŒè¯è¿™äº›è¶‹åŠ¿ã€æ­å»ºå†…å®¹é¡µæˆ–æŠ€æœ¯ç«™ç‚¹å¹¶æ‰¿æ¥ <strong>CPC å¼•æµ</strong>ï¼Œå¯ä»¥ç›´æ¥ç”¨ <strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.rollcode.cn%2F%3Fsource%3Dba%26id%3Datn" target="_blank" title="https://www.rollcode.cn/?source=ba&amp;id=atn" ref="nofollow noopener noreferrer">RollCode ä½ä»£ç å¹³å°</a></strong> æŠŠæƒ³æ³•å¿«é€Ÿè½åœ°ï¼Œé¿å…åœ¨æ¡†æ¶é€‰æ‹©ä¸Šè¿‡åº¦å†…è€—ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[React çš„ ViewTransition å…ƒç´ ]]></title>    <link>https://juejin.cn/post/7602811649126891571</link>    <guid>https://juejin.cn/post/7602811649126891571</guid>    <pubDate>2026-02-05T00:58:23.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602811649126891571" data-draft-id="7602850166731472905" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="React çš„ ViewTransition å…ƒç´ "/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,é¢è¯•"/> <meta itemprop="datePublished" content="2026-02-05T00:58:23.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ˜é‡‘å®‰ä¸œå°¼"/> <meta itemprop="url" content="https://juejin.cn/user/1521379823340792"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            React çš„ ViewTransition å…ƒç´ 
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1521379823340792/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ˜é‡‘å®‰ä¸œå°¼
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-05T00:58:23.000Z" title="Thu Feb 05 2026 00:58:23 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-05
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åŸæ–‡ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Ffrontendmasters.com%2Fblog%2Freacts-viewtransition-element%2F" target="_blank" title="https://frontendmasters.com/blog/reacts-viewtransition-element/" ref="nofollow noopener noreferrer">Reactâ€™s ViewTransition Element</a></p>
<p>ä½œè€…ï¼šChris Coyier</p>
<p>æ—¥æœŸï¼š2026å¹´1æœˆ30æ—¥</p>
<p>ç¿»è¯‘ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FTUARAN" target="_blank" title="https://github.com/TUARAN" ref="nofollow noopener noreferrer">TUARAN</a></p>
<blockquote>
<p>æ¬¢è¿å…³æ³¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FTUARAN%2Ffrontend-weekly-digest-cn" target="_blank" title="https://github.com/TUARAN/frontend-weekly-digest-cn" ref="nofollow noopener noreferrer">å‰ç«¯å‘¨åˆŠ</a>ï¼Œæ¯å‘¨æ›´æ–°å›½å¤–è®ºå›çš„å‰ç«¯çƒ­é—¨æ–‡ç« ï¼Œç´§è·Ÿæ—¶äº‹ï¼ŒæŒæ¡å‰ç«¯æŠ€æœ¯åŠ¨æ€ã€‚</p>
</blockquote>
<p>ä½œä¸ºä¸€ä¸ª View Transitions çš„çˆ±å¥½è€…ï¼ŒåŒæ—¶åˆåœ¨ç”¨ Reactï¼Œæˆ‘è‡ªç„¶ä¼šå…³æ³¨ React ç°åœ¨ç›´æ¥æä¾›äº†ä¸€ä¸ª <code>&lt;ViewTransition&gt;</code> å…ƒç´ ï¼ˆç›®å‰åœ¨ â€œCanaryâ€ é¢„å‘å¸ƒç‰ˆæœ¬ä¸­ï¼‰ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4728576e2e7349779a5eccab31609eed~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR5a6J5Lic5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770857902&amp;x-signature=hqNZ4FAkvFqE8mSdYaKtNgOokAk%3D" alt="image.png" loading="lazy"/></p>
<p>æˆ‘æƒ³çœ‹çœ‹å®ƒåˆ°åº•æ€ä¹ˆç”¨ï¼Œä½†åœ¨å¼€å§‹ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆâ€¦â€¦<strong>åˆ«</strong>ç”¨å®ƒã€‚View Transitions æ˜¯ Web å¹³å°æœ¬èº«çš„ç‰¹æ€§ï¼Œä¸å±äºä»»ä½•æ¡†æ¶ã€‚æ‰€ä»¥ React ä¹Ÿæ— æ³•é˜»æ­¢æˆ‘ä»¬ä½¿ç”¨å®ƒã€‚ç›´æ¥ç”¨å…¶å®ä¹Ÿä¸ç®—å¥‡æ€ªã€‚</p>
<h2 data-id="heading-0">åœ¨ React ä¸­ä½¿ç”¨ View Transitionsï¼ˆç»å…¸æ–¹å¼ï¼Ÿï¼‰</h2>
<p>åŒé¡µ View Transitions APIï¼ˆå¯¹ React æ›´ç›¸å…³ï¼Œè€Œä¸æ˜¯å¤šé¡µåˆ‡æ¢çš„é‚£ç§ï¼‰åŸºæœ¬æ˜¯è¿™æ ·ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-variable language_">document</span>.<span class="hljs-title function_">startViewTransition</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-comment">// åœ¨è¿™é‡Œæ”¹ DOM</span>
});
</code></pre>
<p>ä½†æ”¹ DOM è¿™ç§äº‹â€¦â€¦æ˜¯ React çš„å·¥ä½œã€‚å®ƒå¹¶ä¸å–œæ¬¢ä½ è‡ªå·±å»åŠ¨å®ƒã€‚æ‰€ä»¥ä¸å…¶ç›´æ¥æ“ä½œ DOMï¼Œæˆ‘ä»¬ä¸å¦‚åšäº›â€œæ›´ React çš„äº‹â€ï¼Œæ¯”å¦‚æ›´æ–° stateã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { useState } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">DemoOne</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [buttonExpanded, setButtonExpanded] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">toggleButton</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">startViewTransition</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-title function_">setButtonExpanded</span>(!buttonExpanded);
    });
  };

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span>
      <span class="hljs-attr">className</span>=<span class="hljs-string">{</span>`<span class="hljs-attr">button</span> ${<span class="hljs-attr">buttonExpanded</span> ? "<span class="hljs-attr">expanded</span>" <span class="hljs-attr">:</span> ""}`}
      <span class="hljs-attr">onClick</span>=<span class="hljs-string">{toggleButton}</span>
    &gt;</span>
      Button
    <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>
  );
}
</code></pre>
<p>è§†è§‰æ•ˆæœç”± CSS å®Œæˆã€‚çŠ¶æ€å˜åŒ–è§¦å‘ class å˜åŒ–ï¼Œè€Œ class æ”¹å˜æŒ‰é’®çš„æ ·å¼ã€‚</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.button</span> {
  <span class="hljs-comment">/* button styles */</span>

  &amp;<span class="hljs-selector-class">.expanded</span> {
    scale: <span class="hljs-number">1.4</span>;
    rotate: -<span class="hljs-number">6deg</span>;
  }
}
</code></pre>
<h2 data-id="heading-1">å‡†å¤‡ä½¿ç”¨ <code>&lt;ViewTransition&gt;</code></h2>
<p>å†™è¿™ç¯‡æ–‡ç« æ—¶ï¼Œè¿™ä¸ªå…ƒç´ è¿˜åªå­˜åœ¨äº React çš„ â€œCanaryâ€ ç‰ˆæœ¬ï¼Œæ‰€ä»¥ä½ å¾—æ˜¾å¼å®‰è£…ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">npm install react@canary
</code></pre>
<p>ä½ çš„ <code>package.json</code> ä¼šæŠŠç‰ˆæœ¬å†™æˆ <code>canary</code>ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"dependencies"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"react"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"canary"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"react-dom"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"canary"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>å¦‚æœä½ åœ¨å®¢æˆ·ç«¯ç”¨ Reactï¼Œä¹Ÿå¯ä»¥ç”¨ CDN çš„ import mapï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"importmap"</span>&gt;</span><span class="javascript">
{
  <span class="hljs-string">"imports"</span>: {
    <span class="hljs-string">"react"</span>: <span class="hljs-string">"https://esm.sh/react@canary"</span>,
    <span class="hljs-string">"react-dom"</span>: <span class="hljs-string">"https://esm.sh/react-dom@canary"</span>
  }
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<h2 data-id="heading-2">åœ¨ React ä¸­ä½¿ç”¨ <code>&lt;ViewTransition&gt;</code></h2>
<p>ç°åœ¨æˆ‘ä»¬å¯ä»¥å¯¼å…¥ <code>ViewTransition</code>ï¼Œå¹¶æŠŠå®ƒä½œä¸º JSX å…ƒç´ ä½¿ç”¨ï¼ŒåŒæ—¶é…åˆå®ƒçš„æ­æ¡£ <code>startTransition</code>ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { startTransition, <span class="hljs-title class_">ViewTransition</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [buttonExpanded, setButtonExpanded] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">toggleButton</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-title function_">startTransition</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-comment">// ä»¥æ›´â€œReactâ€çš„æ–¹å¼æ”¹å˜ DOM</span>
      <span class="hljs-title function_">setButtonExpanded</span>(!buttonExpanded);
    });
  };

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">main</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">ViewTransition</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span>
          <span class="hljs-attr">className</span>=<span class="hljs-string">{</span>`<span class="hljs-attr">button</span> ${<span class="hljs-attr">buttonExpanded</span> ? "<span class="hljs-attr">expanded</span>" <span class="hljs-attr">:</span> ""}`}
          <span class="hljs-attr">onClick</span>=<span class="hljs-string">{toggleButton}</span>
        &gt;</span>
          Button
        <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">ViewTransition</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">main</span>&gt;</span></span>
  );
}
</code></pre>
<p>CSS å’Œä¸Šé¢ä¸€æ ·ï¼Œå› ä¸ºæœ¬è´¨è¿˜æ˜¯åˆ‡æ¢ classã€‚æ³¨æ„æˆ‘ä»¬æ²¡æœ‰ç”¨ <code>.classList.toggle("expanded")</code> è¿™ç§ç›´æ¥ DOM æ“ä½œï¼Œè€Œæ˜¯è®© React èµ°è‡ªå·±çš„æ¸²æŸ“æµç¨‹ã€‚</p>
<h2 data-id="heading-3">æ‰€ä»¥â€¦â€¦ä¸¤ç§æ–¹å¼éƒ½èƒ½ç”¨ï¼Ÿ</h2>
<p>æ˜¯çš„ï¼Œè‡³å°‘åœ¨è¿™äº›ç®€å• demo é‡Œéƒ½æ²¡é—®é¢˜ã€‚ç”šè‡³åŒé¡µæ··ç”¨ä¹Ÿå¯ä»¥ã€‚</p>
<p>ä¸€ä¸ªå°å·®å¼‚æ˜¯ï¼šå¦‚æœä½ ç›´æ¥ç”¨ <code>document.startViewTransition</code>ï¼Œéœ€è¦è‡ªå·±åŠ  <code>view-transition-name</code>ï¼›è€Œ <code>&lt;ViewTransition&gt;</code> ä¼šè‡ªåŠ¨å¸®ä½ åŠ ã€‚è¿™ç®—æ˜¯ <code>&lt;ViewTransition&gt;</code> çš„ä¸€ä¸ªå°åŠ åˆ†ç‚¹ã€‚</p>
<h3 data-id="heading-4">æˆ‘â€œè®¨åŒâ€çš„é‚£éƒ¨åˆ†</h3>
<p>æœ‰ä¸€éƒ¨åˆ†æˆ‘å¹¶ä¸å–œæ¬¢è¿™ä¸ªæ–¹æ¡ˆã€‚React å¹¶æ²¡æœ‰ç»™å‡ºå¤ªå¤šé¢å¤–ä»·å€¼ï¼Œå®ƒåªæ˜¯è¦æ±‚ä½ ç”¨ä¸€ç§ä¸ç ´åæ¡†æ¶è¿è¡Œæ–¹å¼çš„å†™æ³•ã€‚å¦‚æœä½ èŠ±äº†å¾ˆå¤šæ—¶é—´å»å­¦å®ƒï¼ˆè€Œä¸”<a href="https://link.juejin.cn?target=https%3A%2F%2Freact.dev%2Freference%2Freact%2FViewTransition%23my-viewtransition-is-not-activating" target="_blank" title="https://react.dev/reference/react/ViewTransition#my-viewtransition-is-not-activating" ref="nofollow noopener noreferrer">ç¡®å®æœ‰ä¸å°‘å†…å®¹</a>ï¼‰ï¼Œè¿™äº›çŸ¥è¯†å¹¶ä¸å¤ªèƒ½è¿ç§»åˆ°å…¶ä»–åœ°æ–¹ã€‚</p>
<h3 data-id="heading-5">æˆ‘â€œå‹‰å¼ºæ¥å—â€çš„é‚£éƒ¨åˆ†</h3>
<p>React ä¸€ç›´ä»¥æ¥å°±å¸Œæœ›è‡ªå·±æŒæ§ DOMï¼Œè¿™æ˜¯å®ƒçš„æ ¸å¿ƒå–ç‚¹ã€‚ä¹Ÿæ­£å› ä¸ºå¦‚æ­¤ï¼Œä½ å¿…é¡»è®©å®ƒæ¥åšä¸€äº›åè°ƒå·¥ä½œã€‚è¿™æ„å‘³ç€ä½¿ç”¨ <code>&lt;ViewTransition&gt;</code> å¯ä»¥â€œè‡ªåŠ¨ä¸æ¸²æŸ“ç”Ÿå‘½å‘¨æœŸã€Suspense è¾¹ç•Œã€å¹¶å‘ç‰¹æ€§åè°ƒâ€ï¼Œå®Œæˆæ‰¹é‡æ›´æ–°ã€é˜²å†²çªã€åµŒå¥—ç®¡ç†ç­‰ä½ æˆ‘ä¸æƒ³æ“å¿ƒçš„äº‹æƒ…ã€‚</p>
<p>æ­¤å¤–ï¼Œ<code>&lt;ViewTransition&gt;</code> æœ‰ä¸€ç‚¹ç‚¹æ›´â€œå£°æ˜å¼â€ï¼šä½ æ˜ç¡®åŒ…è£¹äº†è¦è¿‡æ¸¡çš„åŒºåŸŸï¼Œæ›´ç¬¦åˆå¾ˆå¤šäººçš„å¿ƒæ™ºæ¨¡å‹ã€‚ä½†ä½ ä»ç„¶éœ€è¦è°ƒç”¨ <code>startTransition</code>ï¼Œæ‰€ä»¥ä»ç„¶æ˜¯åå‘½ä»¤å¼çš„ã€‚åœ¨æ›´å¤æ‚çš„åµŒå¥— UI ä¸­ï¼Œå¦‚ä½•ç»„ç»‡å®ƒå¯èƒ½ä¼šæœ‰äº›å›°æƒ‘ã€‚</p>
<p>æˆ‘å€’æ˜¯æŒºå–œæ¬¢ <code>&lt;ViewTransition&gt;</code> ä¸Šåƒ <code>enter</code>ã€<code>exit</code> è¿™æ ·çš„æ˜ç¡®å±æ€§ï¼Œå®ƒå¯¹åº”â€œè‡ªå¸¦çš„â€ CSS view transition classï¼Œæ¯”èµ·è‡ªå·±é€šè¿‡ <code>:only-child</code> æŠ€å·§æ¨æ–­è¦ç›´è§‚ä¸€äº›ã€‚</p>
<p>æ€»ä¹‹ï¼Œä»¥ä¸Šå°±æ˜¯æˆ‘çš„çœ‹æ³•ã€‚æ›´å¤šç¤ºä¾‹è¯·å‚è§åŸæ–‡ã€‚</p>
<h2 data-id="heading-6">æ¨è</h2>
<p><strong>React çš„ <code>&lt;ViewTransition&gt;</code> æŠŠ Web åŸç”Ÿ View Transitions çº³å…¥ React çš„æ¸²æŸ“ä¸å¹¶å‘ä½“ç³»ä¸­ã€‚</strong></p>
<p>ç›´æ¥ä½¿ç”¨ <code>document.startViewTransition</code> å·²ç»è¶³å¤Ÿçµæ´»ï¼Œè€Œ <code>&lt;ViewTransition&gt;</code> çš„ä»·å€¼æ›´å¤šä½“ç°åœ¨ä¸ React ç”Ÿå‘½å‘¨æœŸã€Suspenseã€å¹¶å‘æ›´æ–°çš„è‡ªåŠ¨ååŒä¸Šï¼Œä»£ä»·æ˜¯å¤šäº†ä¸€å±‚æ¡†æ¶è¯­ä¹‰ï¼Œå­¦ä¹ æˆæœ¬ä¹Ÿæ›´å React ç§æœ‰ã€‚å®ƒæ›´åƒæ˜¯ä¸€ç§â€œå®‰å…¨å°è£…â€ï¼Œè€Œä¸æ˜¯å¿…é€‰èƒ½åŠ›ã€‚</p>
<p>å¦‚æœä½ éœ€è¦æŠŠè¿™ç±»æ–°ç‰¹æ€§å¿«é€Ÿåšæˆ <strong>ç¤ºä¾‹é¡µã€æŠ€æœ¯æ–‡ç« æˆ– Demo ç«™ç‚¹</strong>ï¼Œå¯ä»¥ç”¨ <strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.rollcode.cn%2F%3Fsource%3Dba%26id%3Datn" target="_blank" title="https://www.rollcode.cn/?source=ba&amp;id=atn" ref="nofollow noopener noreferrer">RollCode ä½ä»£ç å¹³å°</a></strong> å¿«é€Ÿæ­å»ºå±•ç¤ºé¡µé¢ï¼ŒæŠŠå®éªŒã€è®²è§£å’Œè½¬åŒ–è·¯å¾„ä¸€æ¬¡æ€§è·‘é€šï¼Œè€Œä¸ç”¨åœ¨å·¥ç¨‹è„šæ‰‹æ¶ä¸Šæ¶ˆè€—ç²¾åŠ›ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸Šä¸‹æ–‡å·¥ç¨‹ï¼ˆContext Engineeringï¼‰]]></title>    <link>https://juejin.cn/post/7602850166731292681</link>    <guid>https://juejin.cn/post/7602850166731292681</guid>    <pubDate>2026-02-04T16:37:58.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602850166731292681" data-draft-id="7602811649126711347" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸Šä¸‹æ–‡å·¥ç¨‹ï¼ˆContext Engineeringï¼‰"/> <meta itemprop="keywords" content="AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2026-02-04T16:37:58.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="uzong"/> <meta itemprop="url" content="https://juejin.cn/user/372082495985181"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸Šä¸‹æ–‡å·¥ç¨‹ï¼ˆContext Engineeringï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/372082495985181/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    uzong
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T16:37:58.000Z" title="Wed Feb 04 2026 16:37:58 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body blockquote&gt;:first-child{margin-top:0}.markdown-body blockquote&gt;:last-child{margin-bottom:0}.markdown-body{overflow:hidden;line-height:1.75;font-size:15px;background-image:linear-gradient(90deg,rgba(72,42,10,.05) 5%,rgba(72,42,10,0) 0),linear-gradient(1turn,rgba(72,42,10,.05) 5%,rgba(72,42,10,0) 0);background-size:20px 20px;background-position:50%;padding-top:0!important}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{position:relative;display:flex;border-bottom:5px solid #6d4e00;line-height:35px;letter-spacing:1px;font-size:25px;padding-left:25px;color:#664900;text-shadow:1px 1px 1px #8a6200;padding-bottom:0}.markdown-body h1:before{content:"";display:flex;position:absolute;left:0;top:3px;bottom:0;margin:auto;width:20px;height:20px;background-size:20px 20px;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAQlBMVEVHcEwlRnqtZBj76q4lRnolRnolRnolRnolRnokRnr/gGtrVUeLXDBKTl+hYSHasW7Ik0zs0JG4dCvUdEE0SW+rYxrLQJfjAAAACnRSTlMA////0H/xUaMi5MCoTwAACfVJREFUeNrtnQl3qygUgJ9GXAqosfL//+pgmgXwXmRNJGdu55xO+6rx8+6I8O9fehmGriN93zdN07bVXdpW/ih/SbpuGP6dXbpOXv7z2i3S9ISck2eQOnAhMHG64VQQbmrAaM4B05GmipaGdB+m6BNQPBXzMYtKR3EPbB/RS5eY4g+lIW9WBqnySCvVMrzRpqqs0g9nwVg5p1KYlHEchRT5bftp+y3n6xlQDjAkABtrKULU9f377ev+4/1/NiT+URRiZRhrcZP6WLa/Gq005BORaqXsdYEuHPIP798ZxSyt6d5sVfxJESRCsvB32lfXwhRjnUBGmKXNoJQe04VIASJqRC/9G7yDsyQMiloYz+0pHYghEoPISAGgpDSvHsCoMwmA0mfjSG5UOsqah2RodkljzMkhZZdamiEDB8+Nsbk9T04yGNljDXGOZZ6u0+Tj9DuvbyNJBuPO0ABtLNPlJtfZJ4CNNCWJoY8gddwxNpm9YrHh9DEkBoeMud4Kma8XRZaYpBJOYvg59U9wOsblMvmGrzQe30dyqFZ1dxPfO0FT5BOdw989THVs4q1TFk+iN4PMu7CaLpd4EJOExNaJLE4d0xQKYpJ0cY5Ozcwwu6WOu2cs9TUYxPB4b4fvLRzTUXbT1HH7y0BnB0j6CAehkPFfFzd1TMsi6sU1/P4VM9NiISHBlYnBMR+kad075sXlmMehj1twnfTUqJH4GJfqIKte7S72emPnHbdiYHIB0e6ATjKq1UoTaFh6wBL2csMIVo9fH/v6QRHAgoxrOHQQxG/36tC1ODmGOeBGBRmXalgcdhDQ1xF1vI6a3DF2d4r7G1enOUgNOshlFq7qUCxrca9ldiCam7ilxRbP6JbOYsYtfLFmkcXEgLG1DN/6eroxHjqh5bh+Uw27e1oWVK7pN+AqwzUcq/UYTPw8nWufLFBHN2zcxLRYlmGPs6rA2Wy0uJe/E7TknbHIa1WH1bLA8DAj3JpxET+FCNCWZ5uNT6jxTPZK/1mXoCBeKlGLRT2lP69XN3XdqqCojKX1ZVda6iD2McjeXSHa0I+AHd2InGAJgjRVM6gOBfygDrarRJnho6eQBbrns+HkcNUCWtYClJa66qFgPbqqZEBTCOAgRqxCOhQBWpZeIC6QBq91hEoI5unTjsMsK9DCFigY9WNn19hgVCrELalrTw6WnYMYzjHhQ2/7G2xTx1HvwpzSe4cVi5ORQQwMW9+72FU5L4gGsa6Yu1RcDeIhs64Qs8izt0vGH+n9/IKaIlYpM2UqkYOrwwq5CgBjWpyGtxaonxe4KaJ3hx+7O0HaqVkxLBPj8FmBVmjNevIUFhUuDmMq5NDV9RwyPe/95IvxAhG7ymqxHGE5sZJL2kPLUhUinkXfrnFwGFwXD99djNLSFh/meXEb2B6Oyiwm0I7BC+OlTlOVPk9K8CIYzu5YHwKDTI6XAo5lz3WEqEXwQRKhh5cyLa6D81P4PXBw984as9YaGXHwx4Ba8rmOldUat/BHt9cQ38AaljnBdCJqs60OcXVDJZP//ZwSWtV9FpHNtgg22KuYx/U2tB5Mcp1TYOiphNhiFjgWeJ3DL2OZpuuUisIoUyzZEJ76I+LmyqWdv8LwnEiwMYczihjxeqtBsuFJSTg2oD1ETQx4v6D1VleSZW1xCwvAfVGWpQ069kgrQksAUW2rReYzsboIjSABuDQX0QJwB9cnZVgWVgE31vrklAJnEmVObykgYCk/VGX5OlpuKb5eiovUAvJ2tMstw0kIkNdpiSA91K6XA6K8CVCyr4PePhTo65q3DyX7OpTbSVk1PB62mhJ9HSpSqtKaESxsFRm0tLBVcvTV+vbBrLRK4hC7aitN9B0ZpX6vNMgjGIt5ZdmMv32KrmprD1afsPd4FEhThK0+WfTl3kpd482AGvG3jQdZK1+t8ireDswhofigRb3fxfI/4jj+xkffUX/1ccxxhEP9qyyBEH9Cx9vhf8TB7eiSpBHjZVSa4whQMJC1TqIR6q8RERtjOr2ID0yx3oYi0oAIvZCPz4eG64p3ObuREeOHUIR3MBVJwq9yll5P7KHdiPBOiOoRa/AjXz21J3k04l+i8OjErj4kaXWQiIVO/EvA+KLRAEnUVomtjPd6SvR3RLoeMT54nKFH1EqtkkEGFaQuTlSQrsxhRiOIt51S/Ho8B11+FUlwRaHnU4utEI38/mgSjRJ8PhWEtN6Z6WcncQOU4efjKoh3zfi7/+DfhPrwOZ9a/iYBiVJJxPlei3CqIDTYEqAPFow5/c71fAdVIwmo4n+cTIGbr2n9NULAE5ifcNNS63hvEOFk0wxYnICBBZ0I9xERBVILF0uggNdxuOkR4S6ngvgPmArzHv4KpMKGQFjQ+Rw6q9dC6R6dgZaJF7RVWIH0BTY9h+fz0ohHOyLuy+He/hN4GUR3/RxcBx2f76izarI9CaXmzRmhNQuSfIgJkva5GzN6HJbhQxCNsDGDSh56plmef6sg2eaXPsYBt5W+H6VE6omG6hOS1w4hiTWiThbJ1YO+RSO1vrpMlomf6nhQGz0m7qT6W04XOUHyzhZ4rkG+0hxL66oDW9mnPWyL3TMmssxyQUwr01CHX7b2OvUIaqS48TnMtAoEQTQixJeAlDfSiGmk/l8jpwIpTyFqOfeNIHWBooC036ERtUQp2tm/CKT5jjySbxTlvUVj2yhjvyWDVL3yfKRojXwLSEWUp7q0PBAKPp7m5YGoT3WH7wAZ1BeOywNZv3Gak/LIqriwxbQ5jaTcsEW1eb+FvoWo+zr5V/IUOvNtsapU2zJXSyj0xVB13sPfq0kkZA7dubIIKXIlJ8Cy7u+BN22RVcr+peOuxHdcBbA04FAVmEoEtO5vX55K4KVZS1QJvBBzU1rgUl8JapBNYIowLoZtD9NWRTWKqqe36L48BSz8QPH9epqqIDehlh2UuqocEmrdV7AvhuRoM74m80yeDIEX3ppreNN235FxV58DNjhswn5K8zK21+5ctjut6NmUIoy9tVvitnHr2VDM3ahtW8KQ/Vbsp9GGiWHfk8skyTSFz9/HdxhHe4uR/RxX/mG1SGXwypcDJNmCMfucZ/C1CuCQUbiBUDYbe7tiRkZX8GIat50d+wqR1fdN7ygGzrHrcN4kGFHK02cil5M6INgQVsvnNz77T5PqUFYJJInYmIBplJfP5On4eiOwYfhuCD44oLyYVs43rI1rk3H7usttzq8Qo3j84vavN9mOkAeuq8dHEd9NtCVKX51Oen+MM6IEYvz5StOehKLpIjD+nKU5AQWJpLizdB+1sb5LQvFRxbSJVGHmSdK/0WWaPguEYmcSJ68aWkK6rAw6jwSSCmrTWVHT96R7HwHANEgqybVJL+E2vE2q7Uu91Gr73SbbNUvZDtiOlCeIv4r/AI+0XUwz1lvcAAAAAElFTkSuQmCC")}.markdown-body h2{position:relative;padding:0 0 0 20px;font-size:20px;font-weight:700;color:#614500}.markdown-body h2:before{content:"";position:absolute;top:3px;bottom:0;left:0;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAQlBMVEVHcEwlRnqtZBj76q4lRnolRnolRnolRnolRnokRnr/gGtrVUeLXDBKTl+hYSHasW7Ik0zs0JG4dCvUdEE0SW+rYxrLQJfjAAAACnRSTlMA////0H/xUaMi5MCoTwAACfVJREFUeNrtnQl3qygUgJ9GXAqosfL//+pgmgXwXmRNJGdu55xO+6rx8+6I8O9fehmGriN93zdN07bVXdpW/ih/SbpuGP6dXbpOXv7z2i3S9ISck2eQOnAhMHG64VQQbmrAaM4B05GmipaGdB+m6BNQPBXzMYtKR3EPbB/RS5eY4g+lIW9WBqnySCvVMrzRpqqs0g9nwVg5p1KYlHEchRT5bftp+y3n6xlQDjAkABtrKULU9f377ev+4/1/NiT+URRiZRhrcZP6WLa/Gq005BORaqXsdYEuHPIP798ZxSyt6d5sVfxJESRCsvB32lfXwhRjnUBGmKXNoJQe04VIASJqRC/9G7yDsyQMiloYz+0pHYghEoPISAGgpDSvHsCoMwmA0mfjSG5UOsqah2RodkljzMkhZZdamiEDB8+Nsbk9T04yGNljDXGOZZ6u0+Tj9DuvbyNJBuPO0ABtLNPlJtfZJ4CNNCWJoY8gddwxNpm9YrHh9DEkBoeMud4Kma8XRZaYpBJOYvg59U9wOsblMvmGrzQe30dyqFZ1dxPfO0FT5BOdw989THVs4q1TFk+iN4PMu7CaLpd4EJOExNaJLE4d0xQKYpJ0cY5Ozcwwu6WOu2cs9TUYxPB4b4fvLRzTUXbT1HH7y0BnB0j6CAehkPFfFzd1TMsi6sU1/P4VM9NiISHBlYnBMR+kad075sXlmMehj1twnfTUqJH4GJfqIKte7S72emPnHbdiYHIB0e6ATjKq1UoTaFh6wBL2csMIVo9fH/v6QRHAgoxrOHQQxG/36tC1ODmGOeBGBRmXalgcdhDQ1xF1vI6a3DF2d4r7G1enOUgNOshlFq7qUCxrca9ldiCam7ilxRbP6JbOYsYtfLFmkcXEgLG1DN/6eroxHjqh5bh+Uw27e1oWVK7pN+AqwzUcq/UYTPw8nWufLFBHN2zcxLRYlmGPs6rA2Wy0uJe/E7TknbHIa1WH1bLA8DAj3JpxET+FCNCWZ5uNT6jxTPZK/1mXoCBeKlGLRT2lP69XN3XdqqCojKX1ZVda6iD2McjeXSHa0I+AHd2InGAJgjRVM6gOBfygDrarRJnho6eQBbrns+HkcNUCWtYClJa66qFgPbqqZEBTCOAgRqxCOhQBWpZeIC6QBq91hEoI5unTjsMsK9DCFigY9WNn19hgVCrELalrTw6WnYMYzjHhQ2/7G2xTx1HvwpzSe4cVi5ORQQwMW9+72FU5L4gGsa6Yu1RcDeIhs64Qs8izt0vGH+n9/IKaIlYpM2UqkYOrwwq5CgBjWpyGtxaonxe4KaJ3hx+7O0HaqVkxLBPj8FmBVmjNevIUFhUuDmMq5NDV9RwyPe/95IvxAhG7ymqxHGE5sZJL2kPLUhUinkXfrnFwGFwXD99djNLSFh/meXEb2B6Oyiwm0I7BC+OlTlOVPk9K8CIYzu5YHwKDTI6XAo5lz3WEqEXwQRKhh5cyLa6D81P4PXBw984as9YaGXHwx4Ba8rmOldUat/BHt9cQ38AaljnBdCJqs60OcXVDJZP//ZwSWtV9FpHNtgg22KuYx/U2tB5Mcp1TYOiphNhiFjgWeJ3DL2OZpuuUisIoUyzZEJ76I+LmyqWdv8LwnEiwMYczihjxeqtBsuFJSTg2oD1ETQx4v6D1VleSZW1xCwvAfVGWpQ069kgrQksAUW2rReYzsboIjSABuDQX0QJwB9cnZVgWVgE31vrklAJnEmVObykgYCk/VGX5OlpuKb5eiovUAvJ2tMstw0kIkNdpiSA91K6XA6K8CVCyr4PePhTo65q3DyX7OpTbSVk1PB62mhJ9HSpSqtKaESxsFRm0tLBVcvTV+vbBrLRK4hC7aitN9B0ZpX6vNMgjGIt5ZdmMv32KrmprD1afsPd4FEhThK0+WfTl3kpd482AGvG3jQdZK1+t8ireDswhofigRb3fxfI/4jj+xkffUX/1ccxxhEP9qyyBEH9Cx9vhf8TB7eiSpBHjZVSa4whQMJC1TqIR6q8RERtjOr2ID0yx3oYi0oAIvZCPz4eG64p3ObuREeOHUIR3MBVJwq9yll5P7KHdiPBOiOoRa/AjXz21J3k04l+i8OjErj4kaXWQiIVO/EvA+KLRAEnUVomtjPd6SvR3RLoeMT54nKFH1EqtkkEGFaQuTlSQrsxhRiOIt51S/Ho8B11+FUlwRaHnU4utEI38/mgSjRJ8PhWEtN6Z6WcncQOU4efjKoh3zfi7/+DfhPrwOZ9a/iYBiVJJxPlei3CqIDTYEqAPFow5/c71fAdVIwmo4n+cTIGbr2n9NULAE5ifcNNS63hvEOFk0wxYnICBBZ0I9xERBVILF0uggNdxuOkR4S6ngvgPmArzHv4KpMKGQFjQ+Rw6q9dC6R6dgZaJF7RVWIH0BTY9h+fz0ohHOyLuy+He/hN4GUR3/RxcBx2f76izarI9CaXmzRmhNQuSfIgJkva5GzN6HJbhQxCNsDGDSh56plmef6sg2eaXPsYBt5W+H6VE6omG6hOS1w4hiTWiThbJ1YO+RSO1vrpMlomf6nhQGz0m7qT6W04XOUHyzhZ4rkG+0hxL66oDW9mnPWyL3TMmssxyQUwr01CHX7b2OvUIaqS48TnMtAoEQTQixJeAlDfSiGmk/l8jpwIpTyFqOfeNIHWBooC036ERtUQp2tm/CKT5jjySbxTlvUVj2yhjvyWDVL3yfKRojXwLSEWUp7q0PBAKPp7m5YGoT3WH7wAZ1BeOywNZv3Gak/LIqriwxbQ5jaTcsEW1eb+FvoWo+zr5V/IUOvNtsapU2zJXSyj0xVB13sPfq0kkZA7dubIIKXIlJ8Cy7u+BN22RVcr+peOuxHdcBbA04FAVmEoEtO5vX55K4KVZS1QJvBBzU1rgUl8JapBNYIowLoZtD9NWRTWKqqe36L48BSz8QPH9epqqIDehlh2UuqocEmrdV7AvhuRoM74m80yeDIEX3ppreNN235FxV58DNjhswn5K8zK21+5ctjut6NmUIoy9tVvitnHr2VDM3ahtW8KQ/Vbsp9GGiWHfk8skyTSFz9/HdxhHe4uR/RxX/mG1SGXwypcDJNmCMfucZ/C1CuCQUbiBUDYbe7tiRkZX8GIat50d+wqR1fdN7ygGzrHrcN4kGFHK02cil5M6INgQVsvnNz77T5PqUFYJJInYmIBplJfP5On4eiOwYfhuCD44oLyYVs43rI1rk3H7usttzq8Qo3j84vavN9mOkAeuq8dHEd9NtCVKX51Oen+MM6IEYvz5StOehKLpIjD+nKU5AQWJpLizdB+1sb5LQvFRxbSJVGHmSdK/0WWaPguEYmcSJ68aWkK6rAw6jwSSCmrTWVHT96R7HwHANEgqybVJL+E2vE2q7Uu91Gr73SbbNUvZDtiOlCeIv4r/AI+0XUwz1lvcAAAAAElFTkSuQmCC");background-size:100% 100%;background-repeat:no-repeat;width:15px;height:15px;margin:auto}.markdown-body h3{width:100%;text-align:left;margin:20px 10px 0 0;font-size:18px;font-weight:700;display:inline-block;padding-left:10px;padding-bottom:0;border-left:5px solid #8f6600;color:#614500}.markdown-body h4,.markdown-body h5,.markdown-body h6{font-weight:700;color:#a37400}.markdown-body h4{font-size:17px}.markdown-body h5,.markdown-body h6{display:flex;align-items:center}.markdown-body h5:after,.markdown-body h6:after{display:inline-block;border:2px solid #fff6e0;color:rgba(189,134,0,.5);border-radius:50%;text-align:center;margin-left:5px}.markdown-body h5{font-size:14px}.markdown-body h5:after{content:"5";width:15px;height:15px;line-height:15px;font-size:13px}.markdown-body h6{font-size:12px}.markdown-body h6:after{content:"6";width:13px;height:13px;line-height:13px;font-size:12px}.markdown-body p{color:#412c0c;letter-spacing:1px;font-weight:400;margin-bottom:16px}.markdown-body img{max-width:100%;display:block;margin:auto}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#755300;font-weight:400;border-bottom:1px solid #755300;font-weight:bolder;text-decoration:none}.markdown-body table{width:100%!important;margin:0;font-size:12px;width:auto;max-width:100%;overflow:auto;border-collapse:collapse;border-spacing:0}.markdown-body table img{box-shadow:none}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body thead tr th{text-align:center}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px;box-sizing:border-box;border:1px solid rgba(72,42,10,.1)}.markdown-body blockquote{position:relative;text-size-adjust:100%;line-height:25px;font-weight:400;border-radius:10px;font-style:normal;text-align:left;box-sizing:inherit;border:1px solid #ffd87a;background-color:rgba(189,134,0,.5);margin:20px 0;padding:20px}.markdown-body blockquote p{color:#fff6e0;letter-spacing:2px;margin:0}.markdown-body blockquote:after,.markdown-body blockquote:before{position:absolute;color:#cc9100;font-size:34px;font-weight:700}.markdown-body blockquote:before{content:"â";top:8px;left:5px}.markdown-body blockquote:after{content:"â";right:5px;bottom:-5px}.markdown-body strong{color:#c28a00;font-weight:bolder}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{color:#c28a00}.markdown-body em strong{font-style:normal;color:#c28a00;background-color:#8a6200}.markdown-body s{color:#c28a00}.markdown-body hr{border-top:1px solid #805b00}.markdown-body code,.markdown-body li code,.markdown-body p code{color:#996d00;background-color:rgba(130,98,0,.3)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit;color:#858585;font-family:bold;letter-spacing:1px}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection,.markdown-body img::selection{color:rgba(189,134,0,.5);background-color:#fff}.markdown-body a::selection,.markdown-body b::selection,.markdown-body del::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:transparent}.markdown-body pre&gt;code::selection{background-color:rgba(189,134,0,.5)}.markdown-body .math .math-inline::selection,.markdown-body blockquote::selection,.markdown-body ol::selection,.markdown-body p::selection,.markdown-body strong::selection,.markdown-body table::selection,.markdown-body ul::selection{background-color:rgba(189,134,0,.5)}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ¬æ–‡æ•´ç†è‡ª LangChain åšå®¢ã€ŠContext Engineering for Agentsã€‹ã€æ›´è‡ªç„¶ <a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.langchain.com%2Fcontext-engineering-for-agents%2F" target="_blank" title="https://blog.langchain.com/context-engineering-for-agents/" ref="nofollow noopener noreferrer">blog.langchain.com/context-engâ€¦</a></p>
<p>éšç€å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰åœ¨æ™ºèƒ½ä½“ï¼ˆAgentï¼‰ç³»ç»Ÿä¸­çš„å¹¿æ³›åº”ç”¨ï¼Œå¦‚ä½•æœ‰æ•ˆç®¡ç†æœ‰é™çš„ä¸Šä¸‹æ–‡çª—å£ï¼ˆContext Windowï¼‰æˆä¸ºå…³é”®æŒ‘æˆ˜ã€‚</p>
<h2 data-id="heading-0">1. <strong>ä¸ºä»€ä¹ˆéœ€è¦ä¸Šä¸‹æ–‡å·¥ç¨‹ï¼Ÿ</strong></h2>
<p>å¤§è¯­è¨€æ¨¡å‹çš„ä¸Šä¸‹æ–‡çª—å£ç±»ä¼¼äºè®¡ç®—æœºçš„ RAMâ€”â€”å®ƒæ˜¯æ¨¡å‹çš„â€œå·¥ä½œè®°å¿†â€ï¼Œä½†å®¹é‡æœ‰é™ã€‚å½“æ™ºèƒ½ä½“æ‰§è¡Œé•¿æœŸä»»åŠ¡æ—¶ï¼Œä¼šä¸æ–­ç´¯ç§¯ä»¥ä¸‹ç±»å‹çš„ä¸Šä¸‹æ–‡ï¼š<br/>
â— æŒ‡ä»¤ï¼ˆInstructionsï¼‰ï¼šæç¤ºè¯ã€è®°å¿†ã€å°‘æ ·æœ¬ç¤ºä¾‹ã€å·¥å…·æè¿°ç­‰<br/>
â— çŸ¥è¯†ï¼ˆKnowledgeï¼‰ï¼šäº‹å®ã€ç”¨æˆ·åå¥½ã€å†å²ä¿¡æ¯ç­‰<br/>
â— å·¥å…·åé¦ˆï¼ˆToolsï¼‰ï¼šAPI è°ƒç”¨ç»“æœã€ä»£ç æ‰§è¡Œè¾“å‡ºç­‰</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/60857d41abe34deab9e8e629a34e5f31~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgdXpvbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770827877&amp;x-signature=xmp%2BewZqcBtkOni8oweul7KJe7Q%3D" alt="" loading="lazy"/></p>
<p>é•¿æœŸæ‰§è¡Œçš„ä»»åŠ¡å’Œå·¥å…·è°ƒç”¨åé¦ˆçš„ç§¯ç´¯æ„å‘³ç€æ™ºèƒ½ä½“é€šå¸¸ä¼šä½¿ç”¨å¤§é‡ä»¤ç‰Œã€‚<strong>è¿™å¯èƒ½å¼•å‘å¤šç§é—®é¢˜ï¼šå¯èƒ½è¶…è¿‡ä¸Šä¸‹æ–‡çª—å£å¤§å°ã€å¯¼è‡´æˆæœ¬æˆ–å»¶è¿Ÿæ€¥å‰§ä¸Šå‡ï¼Œæˆ–é™ä½æ™ºèƒ½ä½“æ€§èƒ½ã€‚</strong></p>
<p>éšç€äº¤äº’è½®æ¬¡å¢åŠ ï¼Œä¸Šä¸‹æ–‡è¿…é€Ÿè†¨èƒ€ï¼Œå¯èƒ½å¼•å‘ä»¥ä¸‹é—®é¢˜ï¼š</p>

























<table><thead><tr><th>é—®é¢˜ç±»å‹</th><th>æè¿°</th></tr></thead><tbody><tr><td>ä¸Šä¸‹æ–‡ä¸­æ¯’ï¼ˆContext Poisoningï¼‰</td><td>å¹»è§‰å†…å®¹è¢«å†™å…¥ä¸Šä¸‹æ–‡ï¼Œæ±¡æŸ“åç»­æ¨ç†</td></tr><tr><td>ä¸Šä¸‹æ–‡å¹²æ‰°ï¼ˆContext Distractionï¼‰</td><td>è¿‡å¤šæ— å…³ä¿¡æ¯å‹å€’æ¨¡å‹å¯¹æ ¸å¿ƒä»»åŠ¡çš„å…³æ³¨</td></tr><tr><td>ä¸Šä¸‹æ–‡æ··æ·†ï¼ˆContext Confusionï¼‰</td><td>å†—ä½™æˆ–çŸ›ç›¾ä¿¡æ¯å¯¼è‡´è¾“å‡ºä¸ä¸€è‡´</td></tr><tr><td>ä¸Šä¸‹æ–‡å†²çªï¼ˆContext Clashï¼‰</td><td>ä¸Šä¸‹æ–‡ä¸­å­˜åœ¨ç›¸äº’çŸ›ç›¾çš„äº‹å®æˆ–æŒ‡ä»¤</td></tr></tbody></table>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/043a0136d1f4447592b209d2c5aee1f6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgdXpvbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770827877&amp;x-signature=%2B8VtSDMh4360T5MEcUiexsUHg1s%3D" alt="" loading="lazy"/></p>
<p><strong>ä¸Šä¸‹æ–‡å·¥ç¨‹å·²æˆä¸ºæ„å»ºå¯é ã€é«˜æ•ˆæ™ºèƒ½ä½“çš„é¦–è¦ä»»åŠ¡.</strong></p>
<h2 data-id="heading-1">2. <strong>ä¸Šä¸‹æ–‡å·¥ç¨‹çš„å››å¤§æ ¸å¿ƒç­–ç•¥</strong></h2>
<p>ä¸ºåº”å¯¹ä¸Šè¿°æŒ‘æˆ˜ï¼Œä¸šç•Œæ™®éé‡‡ç”¨ä»¥ä¸‹å››ç±»ç­–ç•¥ï¼š</p>
<ul>
<li><strong>å†™å…¥ä¸Šä¸‹æ–‡ï¼ˆWriteï¼‰</strong></li>
<li><strong>é€‰æ‹©ä¸Šä¸‹æ–‡ï¼ˆSelectï¼‰</strong></li>
<li><strong>å‹ç¼©ä¸Šä¸‹æ–‡ï¼ˆCompressï¼‰</strong></li>
<li><strong>éš”ç¦»ä¸Šä¸‹æ–‡ï¼ˆIsolateï¼‰</strong></li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/eeecf084f0384f67b66f6e025dec2e3e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgdXpvbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770827877&amp;x-signature=XvxsMUT8ckaaSa5PfmAD6HmG7go%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-2"><strong>2.1 å†™å…¥ä¸Šä¸‹æ–‡ï¼ˆWriteï¼‰</strong></h3>
<p>å°†é‡è¦ä¿¡æ¯<strong>ä¿å­˜åˆ°ä¸Šä¸‹æ–‡çª—å£ä¹‹å¤–</strong>ï¼Œä¾›åç»­ä½¿ç”¨ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0aaf3cdc0c1a406eac6e1bcf60253212~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgdXpvbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770827877&amp;x-signature=4z8Bvwf%2FxnrQWN%2B2JBRt7VXs2wU%3D" alt="" loading="lazy"/></p>
<p><strong>Scratchpadï¼ˆè‰ç¨¿æ¿ï¼‰</strong> ï¼šåœ¨å•æ¬¡ä¼šè¯ä¸­ä¸´æ—¶å­˜å‚¨è®¡åˆ’ã€ä¸­é—´ç»“è®ºç­‰ã€‚ä¾‹å¦‚ Anthropic çš„å¤šæ™ºèƒ½ä½“ç ”ç©¶ç³»ç»Ÿä¸­ï¼Œä¸»ç ”ç©¶å‘˜ä¼šå°†ç ”ç©¶è®¡åˆ’å†™å…¥ Memoryï¼Œé˜²æ­¢å› ä¸Šä¸‹æ–‡æˆªæ–­è€Œä¸¢å¤±ã€‚<strong>å®ç°æ–¹å¼ï¼šé€šè¿‡å·¥å…·è°ƒç”¨å†™å…¥æ–‡ä»¶ï¼Œæˆ–å­˜å…¥è¿è¡Œæ—¶çŠ¶æ€å¯¹è±¡ï¼ˆStateï¼‰ã€‚</strong></p>
<hr/>
<p><strong>é•¿æœŸè®°å¿†ï¼ˆMemoriesï¼‰</strong> ï¼šè·¨ä¼šè¯æŒä¹…åŒ–ä¿¡æ¯ã€‚</p>
<p>åº”ç”¨å®ä¾‹ï¼šChatGPTã€Cursorã€Windsurf å‡æ”¯æŒè‡ªåŠ¨ç”Ÿæˆç”¨æˆ·ä¸“å±é•¿æœŸè®°å¿†ã€‚</p>
<h3 data-id="heading-3"><strong>2.2 é€‰æ‹©ä¸Šä¸‹æ–‡ï¼ˆSelectï¼‰</strong></h3>
<p><strong>åŠ¨æ€æ£€ç´¢æœ€ç›¸å…³çš„ä¿¡æ¯</strong>æ³¨å…¥å½“å‰ä¸Šä¸‹æ–‡ã€‚</p>
<ul>
<li><strong>ä» Scratchpad é€‰æ‹©</strong>ï¼šè‹¥ä»¥ State å­˜å‚¨ï¼Œå¼€å‘è€…å¯æ§åˆ¶æ¯æ­¥æš´éœ²å“ªäº›å­—æ®µï¼›è‹¥ä»¥å·¥å…·å®ç°ï¼Œåˆ™é€šè¿‡è¯»å–å·¥å…·è°ƒç”¨è·å–ã€‚</li>
<li><strong>è®°å¿†æ£€ç´¢</strong>ï¼š</li>
</ul>

<ul>
<li>
<ul>
<li><strong>ç¨‹åºæ€§è®°å¿†</strong>ï¼ˆProceduralï¼‰ï¼šå¦‚ <code>CLAUDE.md</code>ã€è§„åˆ™æ–‡ä»¶ï¼Œç”¨äºæŒ‡å¯¼è¡Œä¸ºã€‚</li>
<li><strong>æƒ…æ™¯æ€§è®°å¿†</strong>ï¼ˆEpisodicï¼‰ï¼šå°‘æ ·æœ¬ç¤ºä¾‹ã€‚</li>
<li><strong>è¯­ä¹‰æ€§è®°å¿†</strong>ï¼ˆSemanticï¼‰ï¼šäº‹å®çŸ¥è¯†ï¼Œé€šå¸¸é€šè¿‡<strong>å‘é‡åµŒå…¥</strong>æˆ–<strong>çŸ¥è¯†å›¾è°±</strong>è¿›è¡Œæ£€ç´¢ã€‚</li>
</ul>
</li>
</ul>

<ul>
<li><strong>å·¥å…·é€‰æ‹©</strong>ï¼šå¯¹å¤§é‡å·¥å…·ä½¿ç”¨ RAG æŠ€æœ¯ï¼Œä»…æ£€ç´¢ä¸å½“å‰ä»»åŠ¡æœ€ç›¸å…³çš„å·¥å…·æè¿°ï¼Œå¯æå‡å·¥å…·é€‰æ‹©å‡†ç¡®ç‡ã€‚</li>
<li><strong>çŸ¥è¯†æ£€ç´¢ï¼ˆRAGï¼‰</strong> ï¼šå°¤å…¶åœ¨ä»£ç æ™ºèƒ½ä½“ä¸­ï¼Œéœ€ç»“åˆ AST è§£æã€æ–‡ä»¶æœç´¢ã€çŸ¥è¯†å›¾è°±ä¸é‡æ’åºç­‰å¤šç§æŠ€æœ¯ï¼Œè€Œéä»…ä¾èµ–å‘é‡æœç´¢ã€‚</li>
</ul>
<h3 data-id="heading-4"><strong>2.3. å‹ç¼©ä¸Šä¸‹æ–‡ï¼ˆCompressï¼‰</strong></h3>
<p><strong>ä¿ç•™å®Œæˆä»»åŠ¡æ‰€éœ€çš„æœ€å°‘ token</strong>ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e2ebf7017d0a4218a243730799f74fca~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgdXpvbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770827877&amp;x-signature=7xHQCUGRcSr8BSoETq%2FOULq%2BNWE%3D" alt="" loading="lazy"/></p>
<p><strong>ä¸Šä¸‹æ–‡æ‘˜è¦ï¼ˆSummarizationï¼‰</strong> ï¼š</p>
<ul>
<li>åœ¨æ¥è¿‘ä¸Šä¸‹æ–‡ä¸Šé™æ—¶ï¼Œå¯¹æ•´ä¸ªå¯¹è¯è½¨è¿¹è¿›è¡Œé€’å½’æˆ–åˆ†å±‚æ‘˜è¦ã€‚</li>
<li>å¯åœ¨ç‰¹å®šèŠ‚ç‚¹ï¼ˆå¦‚è€— token çš„æœç´¢å·¥å…·åï¼‰æ’å…¥æ‘˜è¦æ­¥éª¤ã€‚</li>
<li>å¤æ‚åœºæ™¯ä¸‹ç”šè‡³éœ€å¾®è°ƒä¸“ç”¨æ‘˜è¦æ¨¡å‹ã€‚</li>
</ul>
<p><strong>ä¸Šä¸‹æ–‡ä¿®å‰ªï¼ˆTrimming/Pruningï¼‰</strong> ï¼š</p>
<ul>
<li>åŸºäºå¯å‘å¼è§„åˆ™ï¼ˆå¦‚åˆ é™¤æœ€æ—©æ¶ˆæ¯ï¼‰ã€‚</li>
<li>æˆ–ä½¿ç”¨è®­ç»ƒå¥½çš„ä¸Šä¸‹æ–‡å‰ªæå™¨ã€‚</li>
</ul>
<h3 data-id="heading-5"><strong>2.4. éš”ç¦»ä¸Šä¸‹æ–‡ï¼ˆIsolateï¼‰</strong></h3>
<p><strong>å°†ä¸Šä¸‹æ–‡æ‹†åˆ†ï¼Œé¿å…ç›¸äº’å¹²æ‰°</strong>ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3b32a1faa2154348b042874c0f62001a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgdXpvbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770827877&amp;x-signature=R5tcRYZ9KjwYJ%2FyejCxdNkgRMp0%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/21213f2ec3804cf794baf5a176fa1151~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgdXpvbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770827877&amp;x-signature=J2TYYztQ1R%2FkZ54F%2F14ccRAqZXY%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-6">3. <strong>LangGraphï¼šä¸Šä¸‹æ–‡å·¥ç¨‹çš„å®è·µæ¡†æ¶</strong></h2>
<p>LangGraph ä½œä¸ºåº•å±‚æ™ºèƒ½ä½“ç¼–æ’æ¡†æ¶ï¼ŒåŸç”Ÿæ”¯æŒä¸Šè¿°æ‰€æœ‰ç­–ç•¥ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4aefc4491cf44f7a917b7d05f4fb99ec~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgdXpvbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770827877&amp;x-signature=AEhFcimNiHki6%2FVXydXxANraA6U%3D" alt="image.png" loading="lazy"/>
ä¸Šä¸‹æ–‡å·¥ç¨‹å·²ä»â€œæŠ€å·§â€æ¼”å˜ä¸º<strong>æ™ºèƒ½ä½“å¼€å‘çš„æ ¸å¿ƒå·¥ç¨‹å­¦ç§‘</strong>ã€‚é¢å¯¹æœ‰é™çš„ä¸Šä¸‹æ–‡çª—å£ä¸å¤æ‚çš„ä»»åŠ¡éœ€æ±‚ï¼Œå¼€å‘è€…å¿…é¡»åƒæ“ä½œç³»ç»Ÿç®¡ç†å†…å­˜ä¸€æ ·ï¼Œç²¾å¿ƒè°ƒåº¦æ¯ä¸€æ¡ä¿¡æ¯çš„â€œç”Ÿå‘½å‘¨æœŸâ€â€”â€”ä½•æ—¶å†™å…¥ã€å¦‚ä½•é€‰æ‹©ã€æ˜¯å¦å‹ç¼©ã€æ€æ ·éš”ç¦»ã€‚</p>
<p><strong>ä¸Šä¸‹æ–‡å·¥ç¨‹ä¸æ˜¯ â€œè¶Šå¤šä¿¡æ¯è¶Šå¥½â€ï¼Œä¹Ÿä¸æ˜¯ â€œè¶Šå°‘ä¿¡æ¯è¶Šçœâ€ï¼Œè€Œæ˜¯åœ¨æ¯ä¸ªä»»åŠ¡æ­¥éª¤ä¸­ï¼Œè®© Agent è·å¾— â€œåˆšåˆšå¥½â€ çš„ä¿¡æ¯ã€‚</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»€ä¹ˆæ˜¯å­ç½‘æ©ç ï¼Ÿä¸€æ–‡å½»åº•ææ‡‚ IP åœ°å€åˆ’åˆ†çš„æ ¸å¿ƒæœºåˆ¶]]></title>    <link>https://juejin.cn/post/7602824293164662799</link>    <guid>https://juejin.cn/post/7602824293164662799</guid>    <pubDate>2026-02-04T14:16:05.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602824293164662799" data-draft-id="7602837527674109967" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»€ä¹ˆæ˜¯å­ç½‘æ©ç ï¼Ÿä¸€æ–‡å½»åº•ææ‡‚ IP åœ°å€åˆ’åˆ†çš„æ ¸å¿ƒæœºåˆ¶"/> <meta itemprop="keywords" content="ç½‘ç»œåè®®"/> <meta itemprop="datePublished" content="2026-02-04T14:16:05.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å“ˆé‡Œè°¢é¡¿"/> <meta itemprop="url" content="https://juejin.cn/user/3678304397695056"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»€ä¹ˆæ˜¯å­ç½‘æ©ç ï¼Ÿä¸€æ–‡å½»åº•ææ‡‚ IP åœ°å€åˆ’åˆ†çš„æ ¸å¿ƒæœºåˆ¶
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3678304397695056/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å“ˆé‡Œè°¢é¡¿
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T14:16:05.000Z" title="Wed Feb 04 2026 14:16:05 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨è®¡ç®—æœºç½‘ç»œä¸­ï¼Œ<strong>å­ç½‘æ©ç ï¼ˆSubnet Maskï¼‰</strong> æ˜¯ä¸€ä¸ªçœ‹ä¼¼ç®€å•å´è‡³å…³é‡è¦çš„æ¦‚å¿µã€‚å®ƒä¸ IP åœ°å€å¦‚å½±éšå½¢ï¼Œå…±åŒå†³å®šäº†â€œå“ªäº›è®¾å¤‡å±äºåŒä¸€ä¸ªå±€åŸŸç½‘â€ã€â€œæ•°æ®åŒ…è¯¥å‘å¾€å“ªé‡Œâ€ã€‚ç„¶è€Œï¼Œå¾ˆå¤šåˆå­¦è€…ç”šè‡³å¼€å‘è€…å¯¹å®ƒçš„ç†è§£ä»åœç•™åœ¨â€œ255.255.255.0â€è¿™æ ·çš„å­—ç¬¦ä¸²å±‚é¢ã€‚</p>
<p>æœ¬æ–‡å°†å¸¦ä½ ä» <strong>IP åœ°å€çš„æœ¬è´¨å‡ºå‘</strong>ï¼Œæ·±å…¥æµ…å‡ºåœ°è®²è§£å­ç½‘æ©ç çš„åŸç†ã€ä½œç”¨ã€è®¡ç®—æ–¹æ³•åŠå…¶åœ¨ç°ä»£ç½‘ç»œä¸­çš„å®é™…åº”ç”¨ã€‚</p>
<hr/>
<h2 data-id="heading-0">ä¸€ã€ä¸ºä»€ä¹ˆéœ€è¦å­ç½‘æ©ç ï¼Ÿ</h2>
<p>æƒ³è±¡ä¸€ä¸‹ï¼šä½ æ”¶åˆ°ä¸€å°ä¿¡ï¼Œåœ°å€å†™ç€â€œåŒ—äº¬å¸‚æµ·æ·€åŒºä¸­å…³æ‘å¤§è¡—1å·â€ã€‚ä½†é‚®å±€æ€ä¹ˆçŸ¥é“â€œä¸­å…³æ‘å¤§è¡—1å·â€å±äºâ€œæµ·æ·€åŒºâ€è€Œä¸æ˜¯â€œæœé˜³åŒºâ€ï¼Ÿ<br/>
â€”â€” å› ä¸ºæœ‰<strong>è¡Œæ”¿åŒºåˆ’è§„åˆ™</strong>ã€‚</p>
<p>åœ¨ç½‘ç»œä¸–ç•Œä¸­ï¼Œ<strong>IP åœ°å€</strong> å°±åƒé—¨ç‰Œå·ï¼Œè€Œ <strong>å­ç½‘æ©ç </strong> å°±æ˜¯é‚£ä¸ªâ€œè¡Œæ”¿åŒºåˆ’è§„åˆ™â€ï¼Œç”¨äº<strong>åˆ’åˆ†ç½‘ç»œéƒ¨åˆ†å’Œä¸»æœºéƒ¨åˆ†</strong>ã€‚</p>
<h3 data-id="heading-1">ğŸ¯ æ ¸å¿ƒé—®é¢˜ï¼š</h3>
<ul>
<li>ç»™å®šä¸€ä¸ª IP åœ°å€ï¼ˆå¦‚ <code>192.168.1.10</code>ï¼‰ï¼Œå¦‚ä½•åˆ¤æ–­å®ƒå’Œ <code>192.168.1.20</code> æ˜¯å¦åœ¨åŒä¸€å±€åŸŸç½‘ï¼Ÿ</li>
<li>è·¯ç”±å™¨å¦‚ä½•çŸ¥é“è¯¥æŠŠæ•°æ®åŒ…è½¬å‘åˆ°æœ¬åœ°è¿˜æ˜¯è¿œç¨‹ç½‘ç»œï¼Ÿ</li>
</ul>
<p><strong>ç­”æ¡ˆï¼šé€šè¿‡å­ç½‘æ©ç è¿›è¡Œâ€œç½‘ç»œå·â€æå–ä¸æ¯”å¯¹ã€‚</strong></p>
<hr/>
<h2 data-id="heading-2">äºŒã€IP åœ°å€çš„ç»“æ„ï¼šç½‘ç»œä½ + ä¸»æœºä½</h2>
<p>IPv4 åœ°å€æ˜¯ä¸€ä¸ª 32 ä½çš„äºŒè¿›åˆ¶æ•°ï¼Œé€šå¸¸ä»¥ç‚¹åˆ†åè¿›åˆ¶è¡¨ç¤ºï¼ˆå¦‚ <code>192.168.1.10</code>ï¼‰ã€‚</p>
<p>ä½†è¿™ä¸ªåœ°å€å…¶å®åŒ…å«ä¸¤éƒ¨åˆ†ï¼š</p>
<pre><code class="hljs language-css" lang="css">IP åœ°å€ = <span class="hljs-selector-attr">[ç½‘ç»œæ ‡è¯†ï¼ˆNetwork IDï¼‰]</span> + <span class="hljs-selector-attr">[ä¸»æœºæ ‡è¯†ï¼ˆHost IDï¼‰]</span>
</code></pre>
<ul>
<li><strong>ç½‘ç»œæ ‡è¯†</strong>ï¼šæ ‡è¯†ä¸€ä¸ª<strong>å­ç½‘</strong>ï¼ˆå¦‚å…¬å¸å†…ç½‘ã€å®¶åº­ WiFiï¼‰</li>
<li><strong>ä¸»æœºæ ‡è¯†</strong>ï¼šæ ‡è¯†è¯¥å­ç½‘ä¸­çš„<strong>å…·ä½“è®¾å¤‡</strong>ï¼ˆå¦‚ä½ çš„ç”µè„‘ã€æ‰‹æœºï¼‰</li>
</ul>
<blockquote>
<p>âœ… <strong>å…³é”®</strong>ï¼šå­ç½‘æ©ç çš„ä½œç”¨å°±æ˜¯<strong>å‘Šè¯‰ç³»ç»Ÿï¼šå‰å¤šå°‘ä½æ˜¯ç½‘ç»œä½ï¼Œåå¤šå°‘ä½æ˜¯ä¸»æœºä½</strong>ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-3">ä¸‰ã€å­ç½‘æ©ç çš„æœ¬è´¨ï¼šäºŒè¿›åˆ¶â€œé®ç½©â€</h2>
<p>å­ç½‘æ©ç ä¹Ÿæ˜¯ä¸€ä¸ª 32 ä½çš„æ•°ï¼Œå…¶è§„åˆ™éå¸¸ç®€å•ï¼š</p>
<ul>
<li><strong>ç½‘ç»œä½å¯¹åº”çš„ä½ç½® â†’ 1</strong></li>
<li><strong>ä¸»æœºä½å¯¹åº”çš„ä½ç½® â†’ 0</strong></li>
</ul>
<p>ä¾‹å¦‚ï¼š</p>

























<table><thead><tr><th>IP åœ°å€</th><th>192.168.1.10</th></tr></thead><tbody><tr><td>å­ç½‘æ©ç </td><td>255.255.255.0</td></tr><tr><td>äºŒè¿›åˆ¶ IP</td><td><code>11000000.10101000.00000001.00001010</code></td></tr><tr><td>äºŒè¿›åˆ¶æ©ç </td><td><code>11111111.11111111.11111111.00000000</code></td></tr><tr><td><strong>ç½‘ç»œå·ï¼ˆANDï¼‰</strong></td><td><code>11000000.10101000.00000001.00000000</code> â†’ <strong>192.168.1.0</strong></td></tr></tbody></table>
<h3 data-id="heading-4">ğŸ” è®¡ç®—è¿‡ç¨‹ï¼š<strong>IP åœ°å€ AND å­ç½‘æ©ç  = ç½‘ç»œåœ°å€</strong></h3>
<ul>
<li>æ‰€æœ‰åœ¨åŒä¸€å­ç½‘çš„è®¾å¤‡ï¼Œ<strong>ç½‘ç»œåœ°å€å¿…é¡»ç›¸åŒ</strong>ã€‚</li>
<li>ä¸»æœºä½å…¨ 0 è¡¨ç¤º<strong>ç½‘ç»œæœ¬èº«</strong>ï¼ˆå¦‚ 192.168.1.0ï¼‰</li>
<li>ä¸»æœºä½å…¨ 1 è¡¨ç¤º<strong>å¹¿æ’­åœ°å€</strong>ï¼ˆå¦‚ 192.168.1.255ï¼‰</li>
</ul>
<hr/>
<h2 data-id="heading-5">å››ã€å¸¸è§å­ç½‘æ©ç ç¤ºä¾‹</h2>















































<table><thead><tr><th>å­ç½‘æ©ç ï¼ˆåè¿›åˆ¶ï¼‰</th><th>CIDR è¡¨ç¤ºæ³•</th><th>ç½‘ç»œä½</th><th>ä¸»æœºä½</th><th>å¯ç”¨ä¸»æœºæ•°</th></tr></thead><tbody><tr><td>255.0.0.0</td><td>/8</td><td>8</td><td>24</td><td>2Â²â´ - 2 = 16,777,214</td></tr><tr><td>255.255.0.0</td><td>/16</td><td>16</td><td>16</td><td>65,534</td></tr><tr><td><strong>255.255.255.0</strong></td><td><strong>/24</strong></td><td><strong>24</strong></td><td><strong>8</strong></td><td><strong>254</strong></td></tr><tr><td>255.255.255.128</td><td>/25</td><td>25</td><td>7</td><td>126</td></tr><tr><td>255.255.255.252</td><td>/30</td><td>30</td><td>2</td><td>2</td></tr></tbody></table>
<blockquote>
<p>ğŸ’¡ <strong>ä¸ºä»€ä¹ˆå‡ 2ï¼Ÿ</strong><br/>
å› ä¸ºä¸»æœºä½å…¨ 0ï¼ˆç½‘ç»œåœ°å€ï¼‰å’Œå…¨ 1ï¼ˆå¹¿æ’­åœ°å€ï¼‰ä¸èƒ½åˆ†é…ç»™è®¾å¤‡ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-6">äº”ã€CIDR è¡¨ç¤ºæ³•ï¼šæ›´ç®€æ´çš„å†™æ³•</h2>
<p>ç°ä»£ç½‘ç»œå¸¸ç”¨ <strong>CIDRï¼ˆæ— ç±»åˆ«åŸŸé—´è·¯ç”±ï¼‰</strong> è¡¨ç¤ºæ³•ï¼Œå°† IP å’Œæ©ç åˆå¹¶ï¼š</p>
<ul>
<li><code>192.168.1.0/24</code> = IP èŒƒå›´ 192.168.1.0 ~ 192.168.1.255ï¼Œæ©ç  255.255.255.0</li>
<li><code>10.0.0.0/8</code> = æ•´ä¸ª A ç±»ç§æœ‰ç½‘ç»œ</li>
<li><code>172.16.0.0/12</code> = B ç±»ç§æœ‰ç½‘ç»œï¼ˆ172.16.0.0 ~ 172.31.255.255ï¼‰</li>
</ul>
<blockquote>
<p>âœ… <strong>ä¼˜åŠ¿</strong>ï¼šç®€æ´ã€ä¾¿äºè·¯ç”±èšåˆã€æ”¯æŒçµæ´»åˆ’åˆ†å­ç½‘ï¼ˆVLSMï¼‰</p>
</blockquote>
<hr/>
<h2 data-id="heading-7">å…­ã€å­ç½‘åˆ’åˆ†ï¼ˆSubnettingï¼‰å®æˆ˜</h2>
<p>å‡è®¾ä½ æœ‰ä¸€ä¸ª <code>192.168.1.0/24</code> ç½‘ç»œï¼Œä½†éœ€è¦åˆ’åˆ†ä¸º <strong>ä¸¤ä¸ªå­ç½‘</strong>ï¼ˆå¦‚åŠå…¬åŒºå’Œè®¿å®¢åŒºï¼‰ã€‚</p>
<h3 data-id="heading-8">æ­¥éª¤ï¼š</h3>
<ol>
<li>
<p>å€Ÿç”¨ 1 ä½ä¸»æœºä½ä½œä¸ºç½‘ç»œä½ â†’ æ–°æ©ç  <code>/25</code>ï¼ˆ255.255.255.128ï¼‰</p>
</li>
<li>
<p>å¾—åˆ°ä¸¤ä¸ªå­ç½‘ï¼š</p>
<ul>
<li>
<p><strong>å­ç½‘1</strong>ï¼š192.168.1.0/25</p>
<ul>
<li>å¯ç”¨ IPï¼š192.168.1.1 ~ 192.168.1.126</li>
<li>å¹¿æ’­ï¼š192.168.1.127</li>
</ul>
</li>
<li>
<p><strong>å­ç½‘2</strong>ï¼š192.168.1.128/25</p>
<ul>
<li>å¯ç”¨ IPï¼š192.168.1.129 ~ 192.168.1.254</li>
<li>å¹¿æ’­ï¼š192.168.1.255</li>
</ul>
</li>
</ul>
</li>
</ol>
<blockquote>
<p>ğŸŒ <strong>å¥½å¤„</strong>ï¼š</p>
<ul>
<li>éš”ç¦»å¹¿æ’­åŸŸï¼Œå‡å°‘ç½‘ç»œæ‹¥å µ</li>
<li>æé«˜å®‰å…¨æ€§ï¼ˆä¸åŒå­ç½‘éœ€è·¯ç”±å™¨æ‰èƒ½é€šä¿¡ï¼‰</li>
<li>æ›´é«˜æ•ˆåˆ©ç”¨ IP åœ°å€</li>
</ul>
</blockquote>
<hr/>
<h2 data-id="heading-9">ä¸ƒã€å­ç½‘æ©ç åœ¨å®é™…ä¸­çš„ä½œç”¨</h2>
<h3 data-id="heading-10">1. <strong>æœ¬åœ°é€šä¿¡åˆ¤æ–­</strong></h3>
<p>å½“ä½ çš„ç”µè„‘è¦è®¿é—® <code>192.168.1.20</code>ï¼š</p>
<ul>
<li>è‡ªèº« IPï¼š192.168.1.10/24 â†’ ç½‘ç»œå· = 192.168.1.0</li>
<li>ç›®æ ‡ IPï¼š192.168.1.20/24 â†’ ç½‘ç»œå· = 192.168.1.0</li>
<li><strong>ç½‘ç»œå·ç›¸åŒ â†’ ç›´æ¥é€šè¿‡ ARP å‘é€ï¼Œæ— éœ€ç»è¿‡è·¯ç”±å™¨</strong></li>
</ul>
<h3 data-id="heading-11">2. <strong>è·¯ç”±å†³ç­–</strong></h3>
<p>å¦‚æœè®¿é—® <code>8.8.8.8</code>ï¼š</p>
<ul>
<li>ç½‘ç»œå· â‰  æœ¬åœ°ç½‘ç»œ â†’ æ•°æ®åŒ…äº¤ç»™<strong>é»˜è®¤ç½‘å…³ï¼ˆè·¯ç”±å™¨ï¼‰</strong></li>
</ul>
<h3 data-id="heading-12">3. <strong>DHCP è‡ªåŠ¨åˆ†é…</strong></h3>
<p>è·¯ç”±å™¨é€šè¿‡å­ç½‘æ©ç çŸ¥é“å¯åˆ†é…çš„ IP èŒƒå›´ï¼ˆå¦‚ 192.168.1.100~200ï¼‰</p>
<hr/>
<h2 data-id="heading-13">å…«ã€å¸¸è§è¯¯åŒºæ¾„æ¸…</h2>
<h3 data-id="heading-14">âŒ è¯¯åŒº1ï¼šâ€œå­ç½‘æ©ç å†³å®š IP åœ°å€èŒƒå›´â€</h3>
<ul>
<li><strong>çº æ­£</strong>ï¼šå­ç½‘æ©ç <strong>é…åˆ IP åœ°å€</strong>æ‰èƒ½ç¡®å®šèŒƒå›´ã€‚å•ç‹¬è¯´â€œ255.255.255.0 å¯¹åº” 254 ä¸ª IPâ€æ˜¯ä¸ä¸¥è°¨çš„ã€‚</li>
</ul>
<h3 data-id="heading-15">âŒ è¯¯åŒº2ï¼šâ€œæ‰€æœ‰å®¶åº­ç½‘ç»œéƒ½æ˜¯ /24â€</h3>
<ul>
<li><strong>çº æ­£</strong>ï¼šç°åœ¨å¾ˆå¤šå…‰çŒ«/è·¯ç”±å™¨ä½¿ç”¨ <code>/23</code>ï¼ˆ255.255.254.0ï¼‰ç”šè‡³æ›´å¤§ï¼Œä»¥æ”¯æŒæ›´å¤š IoT è®¾å¤‡ã€‚</li>
</ul>
<h3 data-id="heading-16">âŒ è¯¯åŒº3ï¼šâ€œå­ç½‘æ©ç å¯ä»¥ä»»æ„è®¾ç½®â€</h3>
<ul>
<li><strong>çº æ­£</strong>ï¼šå¿…é¡»ä¿è¯<strong>åŒä¸€å­ç½‘å†…æ‰€æœ‰è®¾å¤‡ä½¿ç”¨ç›¸åŒçš„æ©ç </strong>ï¼Œå¦åˆ™ä¼šå¯¼è‡´é€šä¿¡å¼‚å¸¸ï¼ˆå¦‚ A è®¤ä¸ºè‡ªå·±å’Œ B åŒç½‘æ®µï¼ŒB å´è®¤ä¸ºä¸åœ¨ï¼‰ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-17">ä¹ã€å·¥å…·æ¨èï¼šå¿«é€Ÿè®¡ç®—å­ç½‘</h2>
<ul>
<li>
<p><strong>åœ¨çº¿å·¥å…·</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fsubnet-calculator.com%2F" target="_blank" title="https://subnet-calculator.com/" ref="nofollow noopener noreferrer">subnet-calculator.com</a></p>
</li>
<li>
<p><strong>å‘½ä»¤è¡Œ</strong>ï¼š</p>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_"># </span><span class="bash">Linux/macOS</span>
ipcalc 192.168.1.0/25
<span class="hljs-meta prompt_">
# </span><span class="bash">Windows (PowerShell)</span>
Get-NetIPAddress | Select IPAddress, PrefixLength
</code></pre>
</li>
</ul>
<hr/>
<h2 data-id="heading-18">åã€æ€»ç»“</h2>





























<table><thead><tr><th>æ¦‚å¿µ</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>å­ç½‘æ©ç </strong></td><td>32 ä½â€œé®ç½©â€ï¼Œç”¨äºåˆ†ç¦» IP çš„ç½‘ç»œä½å’Œä¸»æœºä½</td></tr><tr><td><strong>æ ¸å¿ƒæ“ä½œ</strong></td><td><code>IP AND Mask = Network Address</code></td></tr><tr><td><strong>å…³é”®ä½œç”¨</strong></td><td>åˆ¤æ–­æ˜¯å¦åŒç½‘æ®µã€æŒ‡å¯¼è·¯ç”±ã€åˆ’åˆ†å¹¿æ’­åŸŸ</td></tr><tr><td><strong>ç°ä»£è¡¨ç¤º</strong></td><td>CIDRï¼ˆå¦‚ /24ï¼‰å–ä»£ä¼ ç»Ÿæ©ç å†™æ³•</td></tr><tr><td><strong>è®¾è®¡æ€æƒ³</strong></td><td><strong>åˆ†å±‚å¯»å€</strong> â€”â€” å…ˆæ‰¾ç½‘ç»œï¼Œå†æ‰¾ä¸»æœº</td></tr></tbody></table>
<blockquote>
<p>ğŸ’¡ <strong>è®°ä½</strong>ï¼š<br/>
<strong>å­ç½‘æ©ç ä¸æ˜¯â€œé™åˆ¶â€ï¼Œè€Œæ˜¯â€œç»„ç»‡â€</strong> ã€‚<br/>
å®ƒè®©åºå¤§çš„äº’è”ç½‘èƒ½å¤Ÿè¢«é«˜æ•ˆã€æœ‰åºåœ°ç®¡ç†ã€‚</p>
</blockquote>
<p>æŒæ¡å­ç½‘æ©ç ï¼Œæ˜¯ä½ è¿ˆå‘ç½‘ç»œå·¥ç¨‹å¸ˆã€DevOps æˆ–äº‘æ¶æ„å¸ˆçš„é‡è¦ä¸€æ­¥ã€‚ä¸‹æ¬¡å½“ä½ é…ç½®è·¯ç”±å™¨æˆ–æ’æŸ¥ç½‘ç»œé—®é¢˜æ—¶ï¼Œä½ ä¼šæ„Ÿè°¢ä»Šå¤©è®¤çœŸè¯»å®Œè¿™ç¯‡æ–‡ç« çš„è‡ªå·±ï¼</p>
<hr/>
<p><strong>å»¶ä¼¸é˜…è¯»</strong>ï¼š</p>
<ul>
<li>RFC 950: Internet Standard Subnetting Procedure</li>
<li>ã€ŠTCP/IP è¯¦è§£ å·1ã€‹ç¬¬5ç« ï¼šIP å±‚</li>
<li>AWS VPC å­ç½‘è§„åˆ’æœ€ä½³å®è·µ</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å®ä¹ ç”Ÿâ€œå¬å¤šäº†åè€Œæ›´ä¹±â€â€”â€”æœåŠ¡ç«¯å¼€å‘çš„è‡ªæ•‘æ–¹æ³•è®º]]></title>    <link>https://juejin.cn/post/7602824293164679183</link>    <guid>https://juejin.cn/post/7602824293164679183</guid>    <pubDate>2026-02-04T14:18:09.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602824293164679183" data-draft-id="7602837527674126351" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å®ä¹ ç”Ÿâ€œå¬å¤šäº†åè€Œæ›´ä¹±â€â€”â€”æœåŠ¡ç«¯å¼€å‘çš„è‡ªæ•‘æ–¹æ³•è®º"/> <meta itemprop="keywords" content="åç«¯,ç¨‹åºå‘˜,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-02-04T14:18:09.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="èˆ’ä¸€ç¬‘ä¸ç§ƒå¤´"/> <meta itemprop="url" content="https://juejin.cn/user/4257747754552599"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å®ä¹ ç”Ÿâ€œå¬å¤šäº†åè€Œæ›´ä¹±â€â€”â€”æœåŠ¡ç«¯å¼€å‘çš„è‡ªæ•‘æ–¹æ³•è®º
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4257747754552599/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    èˆ’ä¸€ç¬‘ä¸ç§ƒå¤´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T14:18:09.000Z" title="Wed Feb 04 2026 14:18:09 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åšæœåŠ¡ç«¯çš„äººï¼Œæœ€æ€•çš„å…¶å®ä¸æ˜¯å†™ä»£ç ã€‚</p>
<p>è€Œæ˜¯ä½ å·²ç»è§£é‡Šåˆ°å£å¹²èˆŒç‡¥ï¼Œå¯¹æ–¹è½¬å¤´å¯¹å¤–åŒæ­¥æ—¶ä¾ç„¶èƒ½åšåˆ°ï¼š</p>
<blockquote>
<p><strong>æŒ‡é¹¿ä¸ºé©¬ï¼Œå—è¾•åŒ—è¾™ã€‚</strong></p>
</blockquote>
<p>æœ€è¿‘æˆ‘å°±é‡åˆ°äº†ä¸€æ¬¡ç‰¹åˆ«å…¸å‹çš„åœºæ™¯ï¼š</p>
<p>æˆ‘ä»¥ä¸ºè‡ªå·±è®²å¾—å¾ˆæ¸…æ¥šï¼Œ ç»“æœç¬¬äºŒå¤©å¯¹é½æ—¶ï¼Œè®¤çŸ¥å®Œå…¨è·‘åï¼Œç”šè‡³è¿˜å˜æˆäº†ï¼š</p>
<blockquote>
<p>â€œè¿™æ˜¯ XX è®©æˆ‘è¿™ä¹ˆåšçš„ã€‚â€</p>
</blockquote>
<p>é‚£ä¸€åˆ»ï¼Œè¯´ä¸å°´å°¬æ˜¯å‡çš„ã€‚</p>
<p>æ‰€ä»¥è¿™ç¯‡æ–‡ç« æˆ‘æƒ³ä»è‡ªå·±çš„è§†è§’å‡ºå‘ï¼Œè®°å½•ä¸€æ¬¡çœŸå®çš„å¸¦æ•™äº‹æ•…ï¼Œä¹Ÿé¡ºä¾¿æ€»ç»“ä¸€å¥—æœåŠ¡ç«¯äººå¸¸ç”¨çš„â€œè‡ªæ•‘æ–¹æ³•è®ºâ€ã€‚</p>
<hr/>
<h2 data-id="heading-0">èƒŒæ™¯ï¼šMCP å·¥å…·èƒ½åŠ›çš„è½åœ°</h2>
<p>å…¬å¸æœ€è¿‘éœ€è¦åœ¨ç°æœ‰ä¸šåŠ¡æ¨¡å—ä¸­ï¼Œè¡¥é½ MCP å·¥å…·è°ƒç”¨èƒ½åŠ›ã€‚</p>
<p>ç®€å•æ¥è¯´ï¼Œå°±æ˜¯è¦è®©ä¸šåŠ¡æœåŠ¡å…·å¤‡ï¼š</p>
<ul>
<li>å·¥å…·æ³¨å†Œ</li>
<li>æƒé™æ ¡éªŒ</li>
<li>Agent è°ƒç”¨</li>
<li>ç»Ÿä¸€æ‰§è¡Œé“¾è·¯</li>
</ul>
<p>ä¸Šå‘¨å…­æˆ‘åŸºäºå…«ä¸€èœåˆ€å¤§ä½¬çš„å¼€æºé¡¹ç›® <strong>Knife4j</strong> åšäº†ä¸€ä¸ª POCï¼Œå®ç°äº†åŸºç¡€çš„è°ƒç”¨éª¨æ¶ã€‚</p>
<p>åç»­éœ€è¦è¡¥é½ Agent è°ƒç”¨ä¾§çš„å®Œæ•´é—­ç¯ï¼Œè¿™éƒ¨åˆ†äº¤ç»™å®ä¹ ç”Ÿå°WåŒå­¦ç»§ç»­æ¨è¿›ã€‚</p>
<hr/>
<h2 data-id="heading-1">æœåŠ¡äº¤äº’æµç¨‹ï¼ˆPOCç‰ˆæœ¬ï¼‰</h2>
<p>æ•´ä½“è°ƒç”¨é“¾è·¯å¤§è‡´å¦‚ä¸‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0dd0d92bacf442af9fdd8a55d5f7b534~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IiS5LiA56yR5LiN56eD5aS0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770819491&amp;x-signature=YBvjsJIvNw88LldflZHbQHdl8nY%3D" alt="img" loading="lazy"/></p>
<p>è¿™ä¸ªæµç¨‹æœ¬èº«å¹¶ä¸å¤æ‚ï¼Œä½†å¯¹äºå®ä¹ ç”Ÿæ¥è¯´ï¼ŒçœŸæ­£éš¾çš„å¾€å¾€ä¸æ˜¯â€œæ€ä¹ˆå†™ä»£ç â€ï¼Œè€Œæ˜¯ï¼š</p>
<blockquote>
<p>ä¸ºä»€ä¹ˆç³»ç»Ÿè¦è¿™ä¹ˆè®¾è®¡ï¼Ÿ å“ªäº›è¾¹ç•Œä¸èƒ½ç¢°ï¼Ÿ å“ªäº›ä¸œè¥¿çœ‹èµ·æ¥èƒ½åšï¼Œå…¶å®ä¸èƒ½åšï¼Ÿ</p>
</blockquote>
<hr/>
<h2 data-id="heading-2">æ ¸å¿ƒç–‘æƒ‘ç‚¹ï¼šæƒé™ä¸å·¥å…·è¾¹ç•Œ</h2>
<p>åœ¨ MCP å·¥å…·æ¥å…¥è¿‡ç¨‹ä¸­ï¼Œç¬¬ä¸€ä¸ªç»•ä¸å¼€çš„é—®é¢˜å°±æ˜¯ï¼š</p>
<h3 data-id="heading-3">Token åˆ°åº•åœ¨è¿™é‡Œæ‰®æ¼”ä»€ä¹ˆè§’è‰²ï¼Ÿ</h3>
<p>æƒé™æ ¡éªŒæ˜¯å·¥å…·è°ƒç”¨é“¾è·¯çš„ç¬¬ä¸€é“é—¨æ§›ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f9a0b7dcec8746458ed90f6c94a4f94d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IiS5LiA56yR5LiN56eD5aS0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770819491&amp;x-signature=fYjdy5AUq6AEkbX7Ht4U2JI5FYY%3D" alt="img" loading="lazy"/></p>
<p>è¿™é‡Œå…¶å®ç‰µæ‰¯åˆ°ä¸€æ•´å¥—â€œä¿¡ä»»è¿ç§»â€çš„æ¼”è¿›ï¼š</p>
<ul>
<li>æœ€æ—©çš„ Cookie</li>
<li>åæ¥çš„ Session</li>
<li>å†åˆ° JWT Token</li>
<li>ä»¥åŠ Sa-Token è¿™ç§å·¥ç¨‹åŒ–å°è£…</li>
</ul>
<p>è¿™äº›ä¸œè¥¿æˆ‘å½“æ—¶ä¸€å£æ°”å…¨è®²äº†ã€‚</p>
<p>è®²å¾—å¾ˆçˆ½ï¼Œä¹Ÿå¾ˆç»†ã€‚</p>
<p>ä½†ç°åœ¨å›å¤´çœ‹ï¼š</p>
<blockquote>
<p>ä¿¡æ¯å¯†åº¦å¤ªé«˜ï¼Œå¯¹å®ä¹ ç”Ÿæ¥è¯´åè€Œæ˜¯ä¸€ç§è´Ÿæ‹…ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-4">äº‹æ•…ï¼šè®²å¤ªå¤šå¯¼è‡´ä¿¡æ¯è¿‡è½½ï¼Œå¯¹å¤–æ²Ÿé€šå¤±çœŸ</h2>
<p>é—®é¢˜å‘ç”Ÿåœ¨ä¸€æ¬¡å¾ˆå…¸å‹çš„åœºæ™¯ã€‚</p>
<p>å®ä¹ ç”Ÿæå‡ºäº†ä¸€ä¸ªâ€œçœ‹èµ·æ¥å¾ˆèªæ˜â€çš„å®ç°æƒ³æ³•ã€‚</p>
<p>æˆ‘æ‹…å¿ƒä»–èµ°åï¼Œäºæ˜¯èŠ±äº†ä¸€ä¸ªå¤šå°æ—¶é€æ¡è§£é‡Šï¼š</p>
<ul>
<li>ä¸ºä»€ä¹ˆä¸è¡Œ</li>
<li>é£é™©åœ¨å“ª</li>
<li>ç³»ç»Ÿè¾¹ç•Œæ˜¯ä»€ä¹ˆ</li>
<li>æ¨èçš„æ›¿ä»£æ–¹æ¡ˆæ˜¯ä»€ä¹ˆ</li>
</ul>
<p>å½“æ—¶æˆ‘ä»¥ä¸ºè‡ªå·±è®²å¾—è¶³å¤Ÿæ¸…æ¥šã€‚</p>
<p>ç»“æœç¬¬äºŒå¤©ï¼Œä»–å»å’Œå¦ä¸€ä¸ªåŒäº‹å¯¹é½æ—¶ï¼Œè®¤çŸ¥å®Œå…¨è·‘åã€‚</p>
<p>ç”šè‡³å¯¹æ–¹è½¬è¿°æˆï¼š</p>
<blockquote>
<p>â€œè¿™æ˜¯ XX è®©æˆ‘è¿™ä¹ˆåšçš„ã€‚â€</p>
</blockquote>
<p>é‚£ä¸€åˆ»æˆ‘éå¸¸å°´å°¬ã€‚</p>
<p>åæ¥æˆ‘æ„è¯†åˆ°ï¼š</p>
<p>è¿™ä¸æ˜¯ä»–â€œç¬¨â€ï¼Œè€Œæ˜¯æˆ‘æŠŠâ€œçŸ¥è¯†å¯†åº¦â€æ‹‰æ»¡äº†ï¼Œå´æ²¡æœ‰åšâ€œç†è§£é—­ç¯â€ã€‚</p>
<hr/>
<h2 data-id="heading-5">å†™åœ¨æœ€åï¼šè®²è§£ä¸æ˜¯äº¤ä»˜ï¼Œé—­ç¯æ‰æ˜¯äº¤ä»˜</h2>
<p>å¸¦å®ä¹ ç”Ÿæœ€å¤§çš„æŒ‘æˆ˜ï¼Œä»æ¥ä¸æ˜¯æŠ€æœ¯éš¾åº¦ã€‚</p>
<p>è€Œæ˜¯ï¼š</p>
<blockquote>
<p>ä½ ä»¥ä¸ºä½ è®²æ¸…æ¥šäº†ï¼Œ ä½†ä»–å…¶å®åªæ˜¯â€œå¬è¿‡äº†â€ã€‚</p>
</blockquote>
<p>ä»é‚£å¤©ä¹‹åæˆ‘æ‰çœŸæ­£æ„è¯†åˆ°ï¼š</p>
<p><strong>è®²è§£ä¸æ˜¯äº¤ä»˜ï¼Œé—­ç¯æ‰æ˜¯äº¤ä»˜ã€‚</strong></p>
<p>ä¸‹ä¸€æ¬¡æˆ‘ä¼šæ›´å…‹åˆ¶ï¼š</p>
<ul>
<li>å°‘è®²ä¸€ç‚¹åŸç†</li>
<li>å¤šåšä¸€ç‚¹ç¡®è®¤</li>
<li>è®©å¯¹æ–¹å…ˆå¤è¿°ï¼Œå†å»æ‰§è¡Œ</li>
<li>å¯¹å¤–åŒæ­¥å‰å…ˆè¿‡ä¸€é summary</li>
</ul>
<p>å› ä¸ºå¸¦äººè¿™ä»¶äº‹ï¼Œæœ¬è´¨ä¸Šä¸æ˜¯â€œè¾“å‡ºçŸ¥è¯†â€ï¼Œè€Œæ˜¯â€œäº¤ä»˜ç†è§£â€ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Redis äº‹åŠ¡çš„â€œåŸå­æ€§â€è¿·æ€ï¼šä¸ºä»€ä¹ˆæˆ‘ä»¬æœ€ç»ˆé€‰æ‹©äº† Lua è„šæœ¬]]></title>    <link>https://juejin.cn/post/7602811649126613043</link>    <guid>https://juejin.cn/post/7602811649126613043</guid>    <pubDate>2026-02-04T14:44:09.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602811649126613043" data-draft-id="7602901565024862217" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Redis äº‹åŠ¡çš„â€œåŸå­æ€§â€è¿·æ€ï¼šä¸ºä»€ä¹ˆæˆ‘ä»¬æœ€ç»ˆé€‰æ‹©äº† Lua è„šæœ¬"/> <meta itemprop="keywords" content="Redis,é¢è¯•,æ€§èƒ½ä¼˜åŒ–"/> <meta itemprop="datePublished" content="2026-02-04T14:44:09.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸€æ—…äºº"/> <meta itemprop="url" content="https://juejin.cn/user/3485898277388519"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Redis äº‹åŠ¡çš„â€œåŸå­æ€§â€è¿·æ€ï¼šä¸ºä»€ä¹ˆæˆ‘ä»¬æœ€ç»ˆé€‰æ‹©äº† Lua è„šæœ¬
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3485898277388519/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸€æ—…äºº
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T14:44:09.000Z" title="Wed Feb 04 2026 14:44:09 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p><strong>å†™åœ¨å‰é¢çš„è¯</strong></p>
<p>ä½œä¸ºä¸€ä¸ªé•¿æœŸå’Œå…³ç³»å‹æ•°æ®åº“ï¼ˆRDBMSï¼‰æ‰“äº¤é“çš„å¼€å‘è€…ï¼Œåˆæ¬¡æŸ¥é˜… Redis æ–‡æ¡£æ—¶ï¼Œçœ‹åˆ° <code>MULTI</code>ã€<code>EXEC</code>ã€<code>DISCARD</code> è¿™äº›æŒ‡ä»¤ï¼Œå¿ƒä¸­éš¾å…æ¶Œèµ·ä¸€è‚¡ç”±äºç†Ÿæ‚‰è€Œå¸¦æ¥çš„å®‰å…¨æ„Ÿã€‚</p>
<p>æˆ‘ä»¬çš„å¤§è„‘ä¼šè‡ªåŠ¨å»ºç«‹æ˜ å°„ï¼š<code>MULTI</code> å°±æ˜¯ <code>BEGIN</code>ï¼Œ<code>EXEC</code> å°±æ˜¯ <code>COMMIT</code>ï¼Œ<code>DISCARD</code> å°±æ˜¯ <code>ROLLBACK</code>ã€‚è¿™å¥—ç»„åˆæ‹³æ‰“ä¸‹æ¥ï¼Œæ‰€æœ‰çš„ä¸šåŠ¡é€»è¾‘ä¼¼ä¹éƒ½åº”è¯¥å…·å¤‡äº†â€œä¸æˆåŠŸä¾¿æˆä»â€çš„åŸå­æ€§ä¿éšœã€‚</p>
<p>ä½†è¿™æ°æ°æ˜¯ Redis ç»™æˆ‘ä¸Šçš„ç¬¬ä¸€è¯¾ï¼š<strong>ç›¸ä¼¼çš„å‘½åèƒŒåï¼Œå¾€å¾€è—ç€æˆªç„¶ä¸åŒçš„çµé­‚ã€‚</strong> å½“ä½ æŠŠ MySQL çš„äº‹åŠ¡è§‚ç”Ÿæ¬ç¡¬å¥—åˆ° Redis èº«ä¸Šæ—¶ï¼Œé”™ä»˜å°±å·²ç»å¼€å§‹äº†ã€‚</p>
<p>è¿™ç¯‡æ–‡ç« å°†å¸¦ä½ å‰¥å¼€ <strong>Redis äº‹åŠ¡</strong>çš„å¤–è¡£ï¼Œä»â€œåŸå­æ€§â€çš„å®šä¹‰åå·®è¯´èµ·ï¼ŒèŠèŠä¸ºä»€ä¹ˆåœ¨ç°ä»£å¼€å‘ä¸­ï¼Œæˆ‘ä»¬è¶Šæ¥è¶Šå€¾å‘äº<strong>ç”¨ Lua è„šæœ¬æ¥æ›¿ä»£å®ƒã€‚</strong></p>
</blockquote>
<hr/>
<h2 data-id="heading-0">ä¸€ã€å…ˆæŠŠè¯¯ä¼šè§£å¼€ï¼šRedis äº‹åŠ¡ä¸æ˜¯ ACID</h2>
<p><strong>åœ¨å…³ç³»å‹æ•°æ®åº“çš„ä¸–ç•Œé‡Œï¼Œâ€œäº‹åŠ¡â€äºŒå­—é‡è‹¥åƒé’§</strong>ï¼Œå®ƒå‡ ä¹ç­‰åŒäº <strong>ACID</strong>ï¼ˆåŸå­æ€§ã€ä¸€è‡´æ€§ã€éš”ç¦»æ€§ã€æŒä¹…æ€§ï¼‰ã€‚æˆ‘ä»¬ä¹ æƒ¯äº†â€œè¦ä¹ˆå…¨æœ‰ï¼Œè¦ä¹ˆå…¨æ— â€çš„å®‰å…¨æ„Ÿã€‚</p>
<p>è€Œåœ¨ Redis çš„ä¸–ç•Œé‡Œï¼Œ<code>MULTI</code> å’Œ <code>EXEC</code> æ›´åƒæ˜¯ä¸€ä¸ª<strong>æ‰¹å¤„ç†ä¿¡å·</strong>ï¼š</p>
<blockquote>
<p><strong>æŠŠä¸€å †å‘½ä»¤å…ˆæ”¾è¿›é˜Ÿåˆ—é‡Œæ’é˜Ÿï¼Œç­‰åˆ° <code>EXEC</code> æ—¶ï¼Œä¸€æ¬¡æ€§ã€æŒ‰é¡ºåºåœ°æ‰§è¡Œå®ƒä»¬ã€‚</strong></p>
</blockquote>
<p>è¿™é‡Œæœ‰ä¸€ä¸ªå·¨å¤§çš„è®¤çŸ¥åå·®ã€‚å½“æˆ‘ä»¬è°ˆè®º Redis çš„â€œåŸå­æ€§â€æ—¶ï¼ŒRedis æŒ‡çš„å…¶å®æ˜¯ <strong>éš”ç¦»æ€§ï¼ˆIsolationï¼‰</strong>ï¼Œè€Œä¸æ˜¯ <strong>å›æ»šï¼ˆRollbackï¼‰</strong>ã€‚</p>
<ul>
<li><strong>å®ƒä¿è¯çš„æ˜¯</strong>ï¼š<strong>æˆ‘æ‰§è¡Œè¿™æ®µå‘½ä»¤çš„æ—¶å€™ï¼Œåˆ«äººä¸èƒ½æ’é˜Ÿï¼ˆç‹¬å æ‰§è¡Œï¼‰ã€‚</strong></li>
<li><strong>å®ƒä¸ä¿è¯çš„æ˜¯</strong>ï¼š<strong>å¦‚æœæˆ‘æ‰§è¡Œåˆ°ä¸€åŠæŠ¥é”™äº†ï¼Œæˆ‘ä¼šå¸®ä½ æŠŠå‰é¢çš„æ“ä½œæ’¤é”€ï¼ˆå¤±è´¥å›æ»šï¼‰ã€‚</strong></li>
</ul>
<p>ä¸ºäº†æ›´ç›´è§‚åœ°ç†è§£ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹æ¯”ä¸€ä¸‹ Redis äº‹åŠ¡å’Œæ ‡å‡† ACID äº‹åŠ¡çš„åŒºåˆ«ï¼š</p>



































<table><thead><tr><th align="left">ç‰¹æ€§</th><th align="left">å…³ç³»å‹æ•°æ®åº“ (MySQL)</th><th align="left">Redis äº‹åŠ¡</th><th align="left">å·®å¼‚è§£è¯»</th></tr></thead><tbody><tr><td align="left"><strong>åŸå­æ€§ (Atomicity)</strong></td><td align="left"><strong>All or Nothing</strong> <br/> å¤±è´¥å³å›æ»šï¼Œå¦‚åŒæœªå‘ç”Ÿè¿‡</td><td align="left"><strong>All or Partial</strong> <br/> æ²¡å¾—å•†é‡ï¼Œé”™äº†å°±é”™äº†ï¼Œå‰©ä¸‹çš„æ¥ç€å¹²</td><td align="left">Redis ä¸æ”¯æŒ Rollbackï¼Œéƒ¨åˆ†æˆåŠŸæ˜¯å¸¸æ€</td></tr><tr><td align="left"><strong>ä¸€è‡´æ€§ (Consistency)</strong></td><td align="left">å¼ºä¸€è‡´æ€§ <br/> çº¦æŸå¿…é¡»æ»¡è¶³</td><td align="left">å¼±ä¸€è‡´æ€§ <br/> ä¾èµ–ä¸šåŠ¡ä»£ç ä¿éšœ</td><td align="left">Redis ä¸ä¼šæ ¡éªŒä¸šåŠ¡çº¦æŸï¼ˆå¦‚å¤–é”®ã€éç©ºç­‰ï¼‰</td></tr><tr><td align="left"><strong>éš”ç¦»æ€§ (Isolation)</strong></td><td align="left">æœ‰å¤šç§éš”ç¦»çº§åˆ« (RC/RR/Serializable)</td><td align="left"><strong>ä¸²è¡ŒåŒ–æ‰§è¡Œ</strong> <br/> æ‰§è¡ŒæœŸé—´ä¸å¯è¢«æ‰“æ–­</td><td align="left">å¾—ç›Šäºå•çº¿ç¨‹æ¨¡å‹ï¼Œ<code>EXEC</code> æœŸé—´å¤©ç„¶éš”ç¦»</td></tr><tr><td align="left"><strong>æŒä¹…æ€§ (Durability)</strong></td><td align="left">WAL æ—¥å¿—ä¿éšœ <br/> æ‰ç”µä¸ä¸¢å¤±</td><td align="left">å–å†³äº AOF/RDB é…ç½®</td><td align="left">é»˜è®¤é…ç½®ä¸‹é€šå¸¸æœ‰æ•°æ®ä¸¢å¤±é£é™©</td></tr></tbody></table>
<blockquote>
<p><strong>ä¸€å¥è¯æ€»ç»“ï¼š</strong>
<strong>Redis äº‹åŠ¡æ˜¯â€œå‘½ä»¤é˜Ÿåˆ— + ç‹¬å æ‰§è¡Œâ€ï¼Œç»ä¸æ˜¯â€œå¤±è´¥å›æ»š + å¼ºä¸€è‡´â€ã€‚</strong></p>
</blockquote>
<hr/>
<h2 data-id="heading-1">äºŒã€æ®‹é…·çš„çœŸç›¸ï¼šå®ƒçœŸçš„ä¸åŒ…å›æ»š</h2>
<p>ä¸ºäº†æŠŠè¿™ä¸ªæ¦‚å¿µåˆ»è¿› DNAï¼Œæˆ‘ä»¬çœ‹ä¸¤ç§çœŸå®çš„é”™è¯¯åœºæ™¯ã€‚</p>
<h3 data-id="heading-2">1. å…¥é˜Ÿæ—¶çš„â€œä½çº§é”™è¯¯â€ï¼ˆå…¨å‘˜è¿åï¼‰</h3>
<p>å¦‚æœä½ åœ¨<strong>å‘½ä»¤å…¥é˜Ÿé˜¶æ®µ</strong>å°±çŠ¯äº†è¯­æ³•é”™è¯¯ï¼ˆæ¯”å¦‚å‚æ•°å†™å°‘äº†ï¼‰ï¼ŒRedis è¿˜æ˜¯è®²é“ç†çš„ï¼Œå®ƒä¼šç›´æ¥æ‹’ç»æ•´ä¸ªäº‹åŠ¡ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">127.0.0.1:6379&gt; MULTI
OK
127.0.0.1:6379&gt; SET key1 value1
QUEUED
127.0.0.1:6379&gt; SET key2      <span class="hljs-comment"># &lt;--- è¯­æ³•é”™è¯¯ï¼šå°‘äº†å‚æ•°</span>
(error) ERR wrong number of arguments <span class="hljs-keyword">for</span> <span class="hljs-string">'set'</span> <span class="hljs-built_in">command</span>
127.0.0.1:6379&gt; EXEC
(error) EXECABORT Transaction discarded because of previous errors.
</code></pre>
<p>è¿™æ—¶å€™ï¼Œ<strong>æ‰€æœ‰å‘½ä»¤éƒ½ä¸ä¼šæ‰§è¡Œ</strong>ã€‚è¿™ç¬¦åˆæˆ‘ä»¬å¯¹â€œäº‹åŠ¡â€çš„é¢„æœŸã€‚</p>
<h3 data-id="heading-3">2. æ‰§è¡Œæ—¶çš„â€œè¿è¡Œæ—¶é”™è¯¯â€ï¼ˆè™½æ­»çŠ¹è¿›ï¼‰</h3>
<p>è¿™æ‰æ˜¯çœŸæ­£çš„å‘ã€‚å‡è®¾è¯­æ³•æ²¡é—®é¢˜ï¼Œä½†åœ¨<strong>æ‰§è¡ŒæœŸé—´</strong>ï¼ŒæŸæ¡å‘½ä»¤å› ä¸ºæ•°æ®ç±»å‹ä¸åŒ¹é…æŠ¥é”™äº†ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">127.0.0.1:6379&gt; MULTI
OK
127.0.0.1:6379&gt; SET user:A:points 100
QUEUED
127.0.0.1:6379&gt; LPUSH user:A:points <span class="hljs-string">"error_data"</span>  <span class="hljs-comment"># &lt;--- å¯¹ String ç±»å‹åš List æ“ä½œï¼Œæ³¨å®šè¿è¡ŒæŠ¥é”™</span>
QUEUED
127.0.0.1:6379&gt; INCR user:A:points                 <span class="hljs-comment"># &lt;--- åç»­å‘½ä»¤</span>
QUEUED

127.0.0.1:6379&gt; EXEC
1) OK
2) (error) WRONGTYPE Operation against a key holding the wrong kind of value  &lt;--- æŠ¥é”™ï¼
3) (<span class="hljs-built_in">integer</span>) 101                                                              &lt;--- ä¾ç„¶æˆåŠŸäº†ï¼
</code></pre>
<p><strong>ç›®çªå£å‘†äº†å—ï¼Ÿ</strong>
ç¬¬äºŒæ¡å‘½ä»¤æŠ¥é”™äº†ï¼Œä½†ç¬¬ä¸‰æ¡å‘½ä»¤ä¾ç„¶æ¬¢å¿«åœ°æ‰§è¡Œäº†ã€‚æ•°æ®å‡ºç°äº†ä¸­é—´æ€ï¼šå³æ‰€è°“çš„â€œä¸ä¸€è‡´â€ã€‚</p>
<p>Redis å®˜æ–¹å¯¹æ­¤çš„è§£é‡Šéå¸¸â€œç›´ç”·â€ï¼š</p>
<blockquote>
<p>â€œåªæœ‰è¯­æ³•é”™è¯¯æ‰ä¼šè¢«æ‹¦æˆªï¼Œè¿è¡Œæ—¶é”™è¯¯å±äºç¨‹åºå‘˜çš„é€»è¾‘ Bugï¼ˆæ¯”å¦‚æŠŠ String å½“ List ç”¨ï¼‰ã€‚<strong>æ•°æ®åº“ä¸åº”è¯¥ä¸ºäº†ç¨‹åºå‘˜çš„ Bug ä¹°å•ï¼Œå»æå¤æ‚çš„å›æ»šæœºåˆ¶ã€‚</strong>â€</p>
</blockquote>
<hr/>
<h2 data-id="heading-4">ä¸‰ã€è¿›é˜¶ä¹‹è·¯ï¼šä»åŸç”Ÿæ‰¹é‡åˆ° Lua è„šæœ¬</h2>
<blockquote>
<p><strong>ğŸ’¡ é¢„å¤‡çŸ¥è¯†ï¼šRTT æ˜¯æ€§èƒ½æ€æ‰‹</strong></p>
<p>ä¸€ä¸ª Redis å‘½ä»¤çš„æ‰§è¡Œå¯ä»¥ç®€åŒ–ä¸º 4 æ­¥ï¼š<strong>å‘é€å‘½ä»¤ â†’ å‘½ä»¤æ’é˜Ÿ â†’ å‘½ä»¤æ‰§è¡Œ â†’ è¿”å›ç»“æœ</strong>ã€‚</p>
<p>å…¶ä¸­ï¼Œç¬¬ 1 æ­¥å’Œç¬¬ 4 æ­¥çš„æ—¶é—´ä¹‹å’Œç§°ä¸º <strong>RTT (å¾€è¿”æ—¶é—´)</strong>ã€‚å¦‚æœæˆ‘æœ‰ 100 ä¸ªå‘½ä»¤ï¼Œä¸€ä¸ªä¸ªå‘å°±éœ€è¦ 100 æ¬¡ RTTï¼Œå¤§éƒ¨åˆ†æ—¶é—´éƒ½æµªè´¹åœ¨ç½‘ç»œä¼ è¾“ä¸Šã€‚
<strong>æ‰¹é‡æ“ä½œçš„æ ¸å¿ƒæ„ä¹‰ï¼Œå°±æ˜¯æŠŠ 100 æ¬¡ RTT å‹ç¼©æˆ 1 æ¬¡ã€‚</strong></p>
</blockquote>
<p>æ—¢ç„¶ <code>MULTI/EXEC</code> è¿™ä¹ˆâ€œå¤´é“â€ï¼Œé‚£æˆ‘ä»¬åœ¨å®é™…å¼€å‘ä¸­åˆ°åº•è¯¥æ€ä¹ˆé€‰ï¼Ÿæˆ‘ä»¬å¯ä»¥æŠŠ Redis çš„æ‰¹é‡æ“ä½œèƒ½åŠ›åˆ†ä¸ºå‡ ä¸ªæ®µä½ã€‚</p>
<h3 data-id="heading-5">Lv1. åŸç”Ÿæ‰¹é‡å‘½ä»¤ (MSET / MGET)</h3>
<p>è¿™æ˜¯æœ€ç®€å•ã€æœ€å¿«çš„æ–¹å¼ã€‚</p>
<ul>
<li><strong>ç‰¹ç‚¹</strong>ï¼šåŸç”Ÿçš„åŸå­æ€§ã€‚<code>MSET key1 val1 key2 val2</code> æ˜¯ä¸€ä¸ªåŸå­æ“ä½œï¼Œ<strong>è¦ä¹ˆéƒ½æˆåŠŸï¼Œè¦ä¹ˆéƒ½å¤±è´¥</strong>ï¼ˆåœ¨ Redis å±‚é¢ï¼‰ã€‚</li>
<li><strong>ç¤ºä¾‹</strong>ï¼š
<pre><code class="hljs language-bash" lang="bash">MSET key1 <span class="hljs-string">"Hello"</span> key2 <span class="hljs-string">"World"</span>
</code></pre>
</li>
<li><strong>å±€é™</strong>ï¼šåªèƒ½å¤„ç†åŒä¸€ç§å‘½ä»¤ï¼Œé€»è¾‘æ­»æ¿ã€‚</li>
</ul>
<h3 data-id="heading-6">Lv2. ç®¡é“ (Pipeline)</h3>
<p>å½“ä½ éœ€è¦æ‰¹é‡æ‰§è¡Œå‡ åä¸ªä¸åŒçš„å‘½ä»¤ï¼Œä¸”ä¸éœ€è¦å®ƒä»¬ä¹‹é—´æœ‰é€»è¾‘ä¾èµ–æ—¶ï¼ŒPipeline æ˜¯é¦–é€‰ã€‚</p>
<ul>
<li><strong>ç‰¹ç‚¹</strong>ï¼š<strong>å”¯å¿«ä¸ç ´</strong>ã€‚å®ƒæŠŠå‡ åä¸ªå‘½ä»¤æ‰“åŒ…ï¼Œä¸€æ¬¡ç½‘ç»œè¯·æ±‚ï¼ˆRTTï¼‰å‘ç»™æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨æ‰§è¡Œå®Œå†ä¸€æ¬¡æ€§è¿”å›ã€‚</li>
<li><strong>å½¢è±¡ç†è§£</strong>ï¼š<strong>ä¸‹ 100 ä¸ªå• -&gt; ä¸€æ¬¡æ€§æ”¶ 100 ä¸ªå¿«é€’ (1 æ¬¡ RTT)</strong>ã€‚</li>
<li><strong>ä¸äº‹åŠ¡çš„åŒºåˆ«</strong>ï¼š
<ul>
<li><strong>éåŸå­æ€§</strong>ï¼šPipeline åªæ˜¯æ‰“åŒ…å‘é€ï¼ŒRedis å¯èƒ½ä¼šåœ¨å¤„ç† Pipeline ä¸­é—´ç©¿æ’æ‰§è¡Œå…¶ä»–å®¢æˆ·ç«¯çš„å‘½ä»¤ï¼ˆäº¤é”™æ‰§è¡Œï¼‰ã€‚</li>
<li><strong>æ•ˆç‡æ›´é«˜</strong>ï¼šä¸éœ€è¦åƒäº‹åŠ¡é‚£æ ·æ¯ä¸ªå‘½ä»¤éƒ½å‘ä¸€æ¬¡ï¼Œåªéœ€è¦å‘é€ä¸€æ¬¡ã€‚</li>
</ul>
</li>
</ul>
<h3 data-id="heading-7">Lv3. äº‹åŠ¡ (MULTI / EXEC)</h3>
<p>æ¯” Pipeline å¤šäº†ä¸€å±‚ä¿éšœï¼š<strong>ç‹¬å æ‰§è¡Œ</strong>ã€‚</p>
<ul>
<li><strong>ç‰¹ç‚¹</strong>ï¼š<strong>åŸå­æ“ä½œï¼ˆéš”ç¦»æ€§ï¼‰</strong>ã€‚
<ul>
<li><strong>ä¸¤ä¸ªä¸åŒçš„äº‹åŠ¡ä¸ä¼šåŒæ—¶è¿è¡Œ</strong>ã€‚åœ¨ <code>EXEC</code> æ‰§è¡ŒæœŸé—´ï¼ŒRedis ä¼šâ€œä»¥æ­¤ä¸ºå°Šâ€ï¼Œä¿è¯æ²¡æœ‰å…¶ä»–å®¢æˆ·ç«¯èƒ½æ’é˜Ÿã€‚</li>
</ul>
</li>
<li><strong>ç¼ºç‚¹</strong>ï¼š
<ul>
<li><strong>RTT å¼€é”€å¤§</strong>ï¼šäº‹åŠ¡ä¸­ <strong>æ¯ä¸ªå‘½ä»¤éƒ½éœ€è¦å•ç‹¬å‘é€</strong> åˆ°æœåŠ¡ç«¯å…¥é˜Ÿï¼Œè¯·æ±‚æ¬¡æ•°å¹¶æ²¡æœ‰å‡å°‘ã€‚</li>
<li><strong>ä¸æ”¯æŒå›æ»š</strong>ï¼Œä¸æ”¯æŒåœ¨äº‹åŠ¡ä¸­é—´åšé€»è¾‘åˆ¤æ–­ã€‚</li>
</ul>
</li>
</ul>
<h3 data-id="heading-8">Lv3.1 äº‹åŠ¡ + WATCH (ä¹è§‚é”)</h3>
<p>å•çº¯çš„ <code>MULTI/EXEC</code> å¾€å¾€æ¯”è¾ƒé¸¡è‚‹ï¼Œå› ä¸ºå®ƒæ— æ³•æ„ŸçŸ¥ä¸­é—´çŠ¶æ€ã€‚<strong>ä½†è¿™å¥—æœºåˆ¶å”¯ä¸€çš„â€œç‹ç‰Œâ€ç»„åˆæ˜¯é…åˆ <code>WATCH</code> å‘½ä»¤ï¼Œå®ç°ä¹è§‚é” (CAS)ã€‚</strong></p>
<ul>
<li>
<p><strong>åœºæ™¯</strong>ï¼šç§’æ€æ‰£å‡åº“å­˜ã€‚</p>
<ul>
<li>åœ¨ <code>MULTI</code> ä¹‹å‰ <code>WATCH stock</code>ã€‚</li>
<li>å¦‚æœåœ¨ <code>EXEC</code> æ‰§è¡Œå‰ <code>stock</code> è¢«åˆ«äººæ”¹äº†ï¼Œæ•´ä¸ªäº‹åŠ¡åŸåœ°å–æ¶ˆï¼ˆè¿”å› nilï¼‰ã€‚</li>
</ul>
</li>
<li>
<p><strong>ä»£ç ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">WATCH stock:001                <span class="hljs-comment"># 1. ç›‘è§†åº“å­˜</span>
GET stock:001                  <span class="hljs-comment"># 2. è¯»åº“å­˜ï¼Œå‘ç°æ˜¯ 10</span>
MULTI                          <span class="hljs-comment"># 3. å¼€å¯äº‹åŠ¡ (å¼€å§‹æ’é˜Ÿ)</span>
DECR stock:001                 <span class="hljs-comment"># 4. å‡åº“å­˜</span>
EXEC                           <span class="hljs-comment"># 5. æ‰§è¡Œ</span>
<span class="hljs-comment"># å¦‚æœåœ¨æ­¥éª¤ 1-5 ä¹‹é—´ï¼Œåˆ«äººæ”¹äº† stock:001ï¼Œè¿™é‡Œä¼šè¿”å› (nil)ï¼Œäº‹åŠ¡å›æ»šã€‚</span>
</code></pre>
</li>
<li>
<p><strong>è‡´å‘½å¼±ç‚¹</strong>ï¼š<strong>é«˜å¹¶å‘ä¸‹æ€§èƒ½æå·®</strong>ã€‚</p>
<ul>
<li>å°±åƒä¸€ç¾¤äººæŠ¢ä¸€ä¸ªéº¦å…‹é£ï¼Œä¸€ä¸ªäººæŠ¢åˆ°äº†ï¼Œå…¶ä»–äººçš„ <code>CAS</code> å…¨éƒ¨å¤±è´¥ï¼Œåªèƒ½å®¢æˆ·ç«¯é‡è¯•ï¼ˆè‡ªæ—‹ï¼‰ã€‚</li>
<li><strong>ç«äº‰è¶Šæ¿€çƒˆï¼Œé‡è¯•è¶Šé¢‘ç¹ï¼ŒCPU ç©ºè½¬è¶Šä¸¥é‡ã€‚</strong></li>
</ul>
</li>
</ul>
<h3 data-id="heading-9">Lv4. æœ€ç»ˆå…µå™¨ â€”â€” Lua è„šæœ¬</h3>
<p>ä» Redis 2.6 å¼€å§‹ï¼ŒLua è„šæœ¬æˆä¸ºäº†è§£å†³å¤æ‚åŸå­æ€§é—®é¢˜çš„æ ¸å¿ƒæ–¹æ¡ˆï¼Œå®ƒå®Œç¾æ›¿ä»£äº† <code>WATCH</code> äº‹åŠ¡ã€‚</p>
<p><strong>ä¸ºä»€ä¹ˆå®ƒæ¯”äº‹åŠ¡å¼ºï¼Ÿ</strong></p>
<ol>
<li><strong>é€»è¾‘åŸå­æ€§</strong>ï¼šä¸€æ®µ Lua è„šæœ¬è¢«è§†ä½œä¸€æ¡å‘½ä»¤ã€‚Redis ä¿è¯è„šæœ¬æ‰§è¡ŒæœŸé—´ï¼Œ<strong>ä¸ä¼šæœ‰ä»»ä½•å…¶ä»–è„šæœ¬æˆ–å‘½ä»¤æ’å…¥</strong>ã€‚</li>
<li><strong>æ•ˆç‡æ›´é«˜</strong>ï¼šä¸éœ€è¦åƒ <code>WATCH</code> é‚£æ ·åå¤é‡è¯•ã€‚è„šæœ¬åœ¨æœåŠ¡å™¨ç«¯æ‰§è¡Œï¼Œåªæœ‰ä¸€æ¬¡ RTTã€‚</li>
</ol>
<p><strong>ç¤ºä¾‹ï¼šå®‰å…¨çš„â€œå…ˆæŸ¥åæ”¹â€</strong></p>
<pre><code class="hljs language-lua" lang="lua"><span class="hljs-comment">-- åˆ¤æ–­ key æ˜¯å¦ç­‰äºé¢„æœŸå€¼ï¼Œå¦‚æœæ˜¯åˆ™åˆ é™¤</span>
<span class="hljs-keyword">if</span> redis.call(<span class="hljs-string">"GET"</span>, KEYS[<span class="hljs-number">1</span>]) == ARGV[<span class="hljs-number">1</span>] <span class="hljs-keyword">then</span>
    <span class="hljs-keyword">return</span> redis.call(<span class="hljs-string">"DEL"</span>, KEYS[<span class="hljs-number">1</span>])
<span class="hljs-keyword">else</span>
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p><strong>âš ï¸ å¿…é¡»è­¦æƒ•çš„ç¼ºé™·ï¼šLua ä¹Ÿä¸å›æ»šï¼</strong>
è™½ç„¶ Lua è„šæœ¬è¢«ç§°ä¸ºâ€œåŸå­æ“ä½œâ€ï¼Œä½†è¯·æ³¨æ„ï¼šå®ƒçš„åŸå­æ€§ä¾ç„¶æŒ‡çš„æ˜¯<strong>ä¸è¢«æ‰“æ‰°</strong>ï¼Œè€Œä¸æ˜¯<strong>å¤±è´¥å›æ»š</strong>ã€‚</p>
<blockquote>
<p><strong>å¦‚æœ Lua è„šæœ¬è¿è¡Œåˆ°ä¸­é€”å‡ºé”™ï¼ˆæ¯”å¦‚è°ƒç”¨äº†ä¸å­˜åœ¨çš„å‘½ä»¤ï¼Œæˆ–æ˜¾å¼æŠ¥é”™é€€å‡ºï¼‰ï¼Œè„šæœ¬ä¼šåœæ­¢æ‰§è¡Œï¼Œä½†ä¹‹å‰å·²ç»æ‰§è¡Œè¿‡çš„å†™æ“ä½œï¼Œæ˜¯ä¸ä¼šè¢«æ’¤é”€çš„ï¼</strong></p>
</blockquote>
<p>è¿™æ„å‘³ç€ï¼Œå³ä½¿æ˜¯ Luaï¼Œä¹Ÿä¸èƒ½ç»™ä½ å¸¦æ¥ RDBMS é‚£ç§â€œå›æ»šä¸€åˆ‡â€çš„å®‰å…¨æ„Ÿã€‚ä½ ä¾ç„¶éœ€è¦åœ¨ä»£ç å±‚é¢ä¿è¯é€»è¾‘çš„ä¸¥å¯†æ€§ã€‚</p>
<hr/>
<h2 data-id="heading-10">å››ã€æ€»ç»“ï¼šé€‰å‹å†³ç­–è¡¨</h2>
<p>ä¸ºäº†è®©ä½ åœ¨å®é™…ä¸šåŠ¡ä¸­ä¸å†çº ç»“ï¼Œæˆ‘æ•´ç†äº†ä¸€ä»½ç®€å•çš„å†³ç­–è¡¨ï¼š</p>



































<table><thead><tr><th align="left">éœ€æ±‚åœºæ™¯</th><th align="left">æ¨èæ–¹æ¡ˆ</th><th align="left">æ ¸å¿ƒç†ç”±</th></tr></thead><tbody><tr><td align="left"><strong>ç®€å•æ‰¹é‡è¯»å†™ (KV)</strong></td><td align="left"><strong>MSET / MGET</strong></td><td align="left">åŸç”Ÿå‘½ä»¤ï¼Œæœ€å¿«ï¼Œæœ€çœå¿ƒã€‚</td></tr><tr><td align="left"><strong>å¤§é‡ç¦»æ•£å‘½ä»¤ (æ— å…³è”)</strong></td><td align="left"><strong>Pipeline</strong></td><td align="left">ç½‘ç»œå¼€é”€æœ€ä½ï¼Œååé‡æœ€é«˜ã€‚</td></tr><tr><td align="left"><strong>éœ€è¦ CAS (ä½å¹¶å‘)</strong></td><td align="left"><strong>WATCH + MULTI</strong></td><td align="left"><strong>äº‹åŠ¡å”¯ä¸€çš„ç”¨æ­¦ä¹‹åœ°ã€‚</strong> é€‚åˆä½é¢‘ç«äº‰ï¼Œå®ç°ç®€å•ã€‚</td></tr><tr><td align="left"><strong>å¤æ‚é€»è¾‘ / é«˜å¹¶å‘</strong></td><td align="left"><strong>Lua è„šæœ¬</strong></td><td align="left"><strong>è¡Œä¸šæ ‡å‡†ã€‚</strong> é¿å…äº† CAS è‡ªæ—‹çš„æ€§èƒ½å¼€é”€ï¼ŒåŸå­æ€§å¼ºã€‚</td></tr><tr><td align="left"><strong>å³ä½¿æŠ¥é”™ä¹Ÿè¦å›æ»š</strong></td><td align="left"><strong>MySQL / RDBMS</strong></td><td align="left"><strong>åˆ«ä¸ºéš¾ Redisã€‚</strong> å®ƒæ²¡æœ‰ Undo Logï¼Œåšä¸åˆ°çœŸæ­£çš„å›æ»šã€‚</td></tr></tbody></table>
<h2 data-id="heading-11">å†™åœ¨æœ€å</h2>
<p>å›å¤´çœ‹ï¼Œ<strong>Redis äº‹åŠ¡è¿™å¥—æœºåˆ¶ï¼Œå°±åƒæ˜¯ä¸€ä¸ªâ€œå¦‚æœä¸ä»”ç»†è¯»è¯´æ˜ä¹¦ä¸€å®šä¼šç”¨é”™â€çš„åŠæˆå“ã€‚</strong></p>
<p>ä½†æ­£æ˜¯è¿™ä¸ªâ€œåŠæˆå“â€ï¼ŒæŠ˜å°„å‡ºäº† Redis æœ€åº•å±‚çš„ä»·å€¼è§‚ï¼š<strong>ä¸ºäº†æ€§èƒ½ï¼Œå¯ä»¥ç‰ºç‰²ä¸€åˆ‡â€œçœ‹èµ·æ¥å¾ˆç¾â€çš„æŠ½è±¡</strong>ã€‚å®ƒæ‹’ç»äº†æ²‰é‡çš„ Undo Logï¼Œæ‹’ç»äº†å¤æ‚çš„éš”ç¦»çº§åˆ«ï¼Œåªç•™ä¸‹äº†ä¸€ä¸ªæœ€ç®€å•çš„â€œæ’é˜Ÿæ‰§è¡Œâ€é€»è¾‘ã€‚</p>
<p>æ‰€ä»¥ï¼Œå½“æˆ‘ä»¬ä¸‹æ¬¡å†å†™ä¸‹ <code>MULTI</code> çš„æ—¶å€™ï¼Œå¿ƒé‡Œè¦æ¸…æ¥šï¼š</p>
<ul>
<li>å¦‚æœåªæ˜¯ä¸ºäº†å¿«ï¼Œ<strong>Pipeline</strong> æ‰æ˜¯é‚£ä¸ªä¸è®²æ­¦å¾·çš„â€œåŠ é€Ÿå™¨â€ã€‚</li>
<li>å¦‚æœåªæ˜¯ä¸ºäº†é˜²æ’é˜Ÿï¼Œ<strong>Transaction</strong> å¤Ÿç”¨äº†ï¼Œä½†åœ¨é«˜å¹¶å‘ä¸‹ï¼Œå®ƒè„†å¼±å¾—åƒä¸ªæ˜“ç¢å“ã€‚</li>
<li>å¦‚æœè¦å¤„ç†çœŸæ­£çš„å¤æ‚é€»è¾‘ï¼Œè¯·æ¯«ä¸çŠ¹è±«åœ°æ‹¥æŠ± <strong>Lua</strong> â€”â€” è™½ç„¶å®ƒä¹Ÿä¸ä¼šå›æ»šï¼Œä½†è‡³å°‘åœ¨â€œæ‰§è¡ŒåŸå­æ€§â€ä¸Šï¼Œå®ƒæ˜¯æˆ‘ä»¬æ‰‹é‡Œæœ€ç¨³çš„é‚£å¼ ç‰Œã€‚</li>
</ul>
<p>çœŸæ­£çš„æŠ€æœ¯æˆç†Ÿï¼Œä¸æ˜¯èƒŒè¯µå…«è‚¡æ–‡é‡Œçš„ ACID å®šä¹‰ï¼Œè€Œæ˜¯æ‡‚å¾—åœ¨<strong>ç”±äºç‰©ç†é™åˆ¶è€Œæ»¡æ˜¯é—æ†¾çš„çœŸå®ä¸–ç•Œé‡Œ</strong>ï¼Œåšå‡ºé‚£ä¸ªæœ€ä¸åçš„é€‰æ‹©ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç½‘ç»œæ¥å£è®¾å¤‡è¯¦è§£ï¼šä» `eth0`ã€`lo` åˆ° `br0`ï¼Œçœ‹æ‡‚ Linux ç½‘ç»œçš„â€œå™¨å®˜â€]]></title>    <link>https://juejin.cn/post/7602800677711806498</link>    <guid>https://juejin.cn/post/7602800677711806498</guid>    <pubDate>2026-02-04T14:44:54.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602800677711806498" data-draft-id="7602846823325450275" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç½‘ç»œæ¥å£è®¾å¤‡è¯¦è§£ï¼šä» `eth0`ã€`lo` åˆ° `br0`ï¼Œçœ‹æ‡‚ Linux ç½‘ç»œçš„â€œå™¨å®˜â€"/> <meta itemprop="keywords" content="Linux"/> <meta itemprop="datePublished" content="2026-02-04T14:44:54.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å“ˆé‡Œè°¢é¡¿"/> <meta itemprop="url" content="https://juejin.cn/user/3678304397695056"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç½‘ç»œæ¥å£è®¾å¤‡è¯¦è§£ï¼šä» `eth0`ã€`lo` åˆ° `br0`ï¼Œçœ‹æ‡‚ Linux ç½‘ç»œçš„â€œå™¨å®˜â€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3678304397695056/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å“ˆé‡Œè°¢é¡¿
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T14:44:54.000Z" title="Wed Feb 04 2026 14:44:54 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ Linux ç³»ç»Ÿä¸­ï¼Œæ‰§è¡Œ <code>ip addr</code> æˆ– <code>ifconfig</code> å‘½ä»¤æ—¶ï¼Œä½ ä¼šçœ‹åˆ°å½¢å¦‚ <code>eth0</code>ã€<code>lo</code>ã€<code>br0</code>ã€<code>docker0</code>ã€<code>vethxxx</code> çš„ç½‘ç»œæ¥å£ã€‚å®ƒä»¬æœ‰çš„ä»£è¡¨çœŸå®ç½‘å¡ï¼Œæœ‰çš„å´æ˜¯çº¯è½¯ä»¶æ„é€ çš„â€œè™šæ‹Ÿå™¨å®˜â€ã€‚</p>
<p>è¿™äº›æ¥å£å…±åŒæ„æˆäº† Linux å¼ºå¤§è€Œçµæ´»çš„ç½‘ç»œèƒ½åŠ›ï¼Œæ”¯æ’‘ç€ä»æœ¬åœ°é€šä¿¡åˆ°å®¹å™¨åŒ–ã€è™šæ‹ŸåŒ–çš„å¤æ‚åœºæ™¯ã€‚</p>
<p>æœ¬æ–‡å°†ä»¥ <strong><code>eth0</code>ï¼ˆç‰©ç†æ¥å£ï¼‰ã€<code>lo</code>ï¼ˆå›ç¯æ¥å£ï¼‰ã€<code>br0</code>ï¼ˆç½‘æ¡¥æ¥å£ï¼‰</strong> ä¸ºä¾‹ï¼Œæ·±å…¥è§£æå„ç±»ç½‘ç»œæ¥å£çš„æœ¬è´¨ã€ä½œç”¨åŠå…¸å‹åº”ç”¨åœºæ™¯ã€‚</p>
<hr/>
<h2 data-id="heading-0">ä¸€ã€ä»€ä¹ˆæ˜¯ç½‘ç»œæ¥å£ï¼ˆNetwork Interfaceï¼‰ï¼Ÿ</h2>
<blockquote>
<p><strong>ç½‘ç»œæ¥å£</strong> æ˜¯æ“ä½œç³»ç»Ÿä¸ç½‘ç»œä¹‹é—´é€šä¿¡çš„æŠ½è±¡å±‚ï¼Œæ—¢å¯ä»¥æ˜¯<strong>ç‰©ç†ç¡¬ä»¶</strong>ï¼ˆå¦‚ç½‘å¡ï¼‰ï¼Œä¹Ÿå¯ä»¥æ˜¯<strong>å†…æ ¸è½¯ä»¶æ¨¡æ‹Ÿçš„è™šæ‹Ÿè®¾å¤‡</strong>ã€‚</p>
</blockquote>
<p>æ— è®ºç‰©ç†è¿˜æ˜¯è™šæ‹Ÿï¼Œæ‰€æœ‰æ¥å£åœ¨ç³»ç»Ÿä¸­éƒ½è¡¨ç°ä¸ºä¸€ä¸ªâ€œè®¾å¤‡â€ï¼Œæ‹¥æœ‰ï¼š</p>
<ul>
<li>å”¯ä¸€åç§°ï¼ˆå¦‚ <code>eth0</code>ï¼‰</li>
<li>IP åœ°å€</li>
<li>MAC åœ°å€ï¼ˆé™¤å›ç¯å¤–ï¼‰</li>
<li>çŠ¶æ€ï¼ˆUP/DOWNï¼‰</li>
</ul>
<p>å¯é€šè¿‡ <code>ip link show</code> æŸ¥çœ‹æ‰€æœ‰æ¥å£ã€‚</p>
<hr/>
<h2 data-id="heading-1">äºŒã€ä¸‰å¤§å…¸å‹æ¥å£è¯¦è§£</h2>
<h3 data-id="heading-2">1. <code>eth0</code> â€”â€” ç‰©ç†ä»¥å¤ªç½‘æ¥å£ï¼ˆPhysical Ethernet Interfaceï¼‰</h3>
<h4 data-id="heading-3">ğŸ” æœ¬è´¨ï¼š</h4>
<ul>
<li>ä»£è¡¨<strong>ç¬¬ä¸€å—ç‰©ç†ä»¥å¤ªç½‘å¡</strong>ï¼ˆEthernet NICï¼‰ã€‚</li>
<li>åç§°ä¸­çš„ <code>eth</code> è¡¨ç¤º Ethernetï¼Œ<code>0</code> è¡¨ç¤ºåºå·ï¼ˆç¬¬äºŒå—ä¸º <code>eth1</code>ï¼Œä¾æ­¤ç±»æ¨ï¼‰ã€‚</li>
<li>ç°ä»£ç³»ç»Ÿå¤šä½¿ç”¨ <strong>å¯é¢„æµ‹å‘½åè§„åˆ™</strong>ï¼ˆå¦‚ <code>enp3s0</code>ã€<code>ens33</code>ï¼‰ï¼Œä½† <code>eth0</code> ä»å¹¿æ³›ç”¨äºè™šæ‹Ÿæœºæˆ–æ—§ç³»ç»Ÿã€‚</li>
</ul>
<h4 data-id="heading-4">ğŸ“Œ ç‰¹ç‚¹ï¼š</h4>
<ul>
<li>æœ‰çœŸå®çš„ <strong>MAC åœ°å€</strong>ï¼ˆç”±ç½‘å¡å‚å•†åˆ†é…ï¼‰</li>
<li>éœ€è¦è¿æ¥ç½‘çº¿æˆ– Wi-Fi æ‰èƒ½é€šä¿¡</li>
<li>æ•°æ®åŒ…é€šè¿‡å®ƒè¿›å‡ºä¸»æœº</li>
</ul>
<h4 data-id="heading-5">ğŸ’¡ å…¸å‹ç”¨é€”ï¼š</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æŸ¥çœ‹ eth0 ä¿¡æ¯</span>
$ ip addr show eth0
2: eth0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 ...
    <span class="hljs-built_in">link</span>/ether 00:11:22:33:44:55 brd ff:ff:ff:ff:ff:ff
    inet 192.168.1.10/24 brd 192.168.1.255 scope global eth0
</code></pre>
<ul>
<li>æœåŠ¡å™¨å¯¹å¤–æä¾›æœåŠ¡</li>
<li>è™šæ‹Ÿæœºè®¿é—®å¤–ç½‘</li>
</ul>
<blockquote>
<p>âœ… <strong>å…³é”®</strong>ï¼š<code>eth0</code> æ˜¯ä¸»æœºä¸å¤–éƒ¨ç½‘ç»œçš„<strong>å”¯ä¸€ç‰©ç†é€šé“</strong>ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-6">2. <code>lo</code> â€”â€” å›ç¯æ¥å£ï¼ˆLoopback Interfaceï¼‰</h3>
<h4 data-id="heading-7">ğŸ” æœ¬è´¨ï¼š</h4>
<ul>
<li>ä¸€ä¸ª<strong>çº¯è™šæ‹Ÿçš„ç½‘ç»œæ¥å£</strong>ï¼Œå®Œå…¨ç”±å†…æ ¸å®ç°ï¼Œ<strong>ä¸ä¾èµ–ä»»ä½•ç¡¬ä»¶</strong>ã€‚</li>
<li>åç§° <code>lo</code> å³ â€œloopbackâ€ ç¼©å†™ã€‚</li>
<li>IPv4 åœ°å€å›ºå®šä¸º <code>127.0.0.1</code>ï¼ŒIPv6 ä¸º <code>::1</code>ã€‚</li>
</ul>
<h4 data-id="heading-8">ğŸ“Œ ç‰¹ç‚¹ï¼š</h4>
<ul>
<li><strong>æ‰€æœ‰å‘å¾€ 127.0.0.0/8 çš„æµé‡éƒ½èµ° lo æ¥å£</strong></li>
<li>æ—  MAC åœ°å€ï¼ˆæˆ–æ˜¾ç¤ºä¸º <code>00:00:00:00:00:00</code>ï¼‰</li>
<li>å§‹ç»ˆå¤„äº <code>UP</code> çŠ¶æ€</li>
<li>å»¶è¿Ÿæä½ï¼ˆå†…å­˜æ‹·è´ï¼Œæ— éœ€é©±åŠ¨ï¼‰</li>
</ul>
<h4 data-id="heading-9">ğŸ’¡ å…¸å‹ç”¨é€”ï¼š</h4>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-meta"># æœ¬æœºè®¿é—®è‡ªèº«æœåŠ¡</span>
curl http:<span class="hljs-comment">//127.0.0.1:8000</span>

<span class="hljs-meta"># æ•°æ®åº“è¿æ¥æœ¬åœ° MySQL</span>
mysql -h <span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span> -u root
</code></pre>
<ul>
<li>å¼€å‘æµ‹è¯•ï¼ˆæ— éœ€ç½‘ç»œï¼‰</li>
<li>æœ¬åœ°è¿›ç¨‹é—´é€šä¿¡ï¼ˆIPCï¼‰</li>
<li>æœåŠ¡å¥åº·æ£€æŸ¥ï¼ˆå¦‚ Kubernetes liveness probeï¼‰</li>
</ul>
<blockquote>
<p>âœ… <strong>å…³é”®</strong>ï¼š<code>lo</code> è®©â€œè‡ªå·±å’Œè‡ªå·±é€šä¿¡â€æˆä¸ºå¯èƒ½ï¼Œæ˜¯<strong>å•æœºç½‘ç»œç”Ÿæ€çš„åŸºçŸ³</strong>ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-10">3. <code>br0</code> â€”â€” ç½‘æ¡¥æ¥å£ï¼ˆBridge Interfaceï¼‰</h3>
<h4 data-id="heading-11">ğŸ” æœ¬è´¨ï¼š</h4>
<ul>
<li>ä¸€ä¸ª<strong>è™šæ‹Ÿäº¤æ¢æœº</strong>ï¼Œç”± Linux å†…æ ¸çš„ <strong>ç½‘æ¡¥æ¨¡å—ï¼ˆbridge moduleï¼‰</strong> å®ç°ã€‚</li>
<li>åç§° <code>br</code> è¡¨ç¤º bridgeï¼Œ<code>0</code> ä¸ºåºå·ï¼ˆå¯è‡ªå®šä¹‰ï¼Œå¦‚ <code>docker0</code>ã€<code>virbr0</code>ï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-12">ğŸ“Œ å·¥ä½œåŸç†ï¼š</h4>
<ul>
<li>å°†å¤šä¸ªç½‘ç»œæ¥å£ï¼ˆç‰©ç†æˆ–è™šæ‹Ÿï¼‰â€œæ¥å…¥â€ç½‘æ¡¥ï¼›</li>
<li>ç½‘æ¡¥æ ¹æ® MAC åœ°å€è¡¨<strong>è½¬å‘å¸§</strong>ï¼Œå®ç°äºŒå±‚è¿é€šï¼›</li>
<li>å¯¹ä¸Šå±‚åè®®é€æ˜ï¼Œå¦‚åŒä¸€ä¸ªç‰©ç†äº¤æ¢æœºã€‚</li>
</ul>
<h4 data-id="heading-13">ğŸ’¡ å…¸å‹ç”¨é€”ï¼š</h4>
<h5 data-id="heading-14">åœºæ™¯1ï¼šKVM è™šæ‹Ÿæœºæ¡¥æ¥ç½‘ç»œ</h5>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åˆ›å»ºç½‘æ¡¥ br0</span>
ip <span class="hljs-built_in">link</span> add name br0 <span class="hljs-built_in">type</span> bridge

<span class="hljs-comment"># å°†ç‰©ç†ç½‘å¡ eth0 åŠ å…¥ç½‘æ¡¥</span>
ip <span class="hljs-built_in">link</span> <span class="hljs-built_in">set</span> eth0 master br0

<span class="hljs-comment"># å¯åŠ¨ç½‘æ¡¥</span>
ip <span class="hljs-built_in">link</span> <span class="hljs-built_in">set</span> br0 up

<span class="hljs-comment"># è™šæ‹Ÿæœºé…ç½®ç½‘å¡è¿æ¥åˆ° br0 â†’ è·å¾—ä¸å®¿ä¸»æœºåŒç½‘æ®µ IP</span>
</code></pre>
<p>â†’ è™šæ‹Ÿæœºå¦‚åŒç›´æ¥æ’åœ¨ç‰©ç†äº¤æ¢æœºä¸Šï¼</p>
<h5 data-id="heading-15">åœºæ™¯2ï¼šDocker é»˜è®¤ç½‘æ¡¥ <code>docker0</code></h5>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">$</span> <span class="hljs-string">ip</span> <span class="hljs-string">addr</span> <span class="hljs-string">show</span> <span class="hljs-string">docker0</span>
<span class="hljs-attr">3: docker0:</span> <span class="hljs-string">&lt;BROADCAST,MULTICAST,UP&gt;</span> <span class="hljs-string">mtu</span> <span class="hljs-number">1500</span> <span class="hljs-string">...</span>
    <span class="hljs-string">inet</span> <span class="hljs-number">172.17</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span><span class="hljs-string">/16</span>
</code></pre>
<ul>
<li>æ‰€æœ‰ Docker å®¹å™¨é»˜è®¤è¿æ¥åˆ° <code>docker0</code></li>
<li>å®¹å™¨é€šè¿‡ NAT è®¿é—®å¤–ç½‘</li>
</ul>
<blockquote>
<p>âœ… <strong>å…³é”®</strong>ï¼š<code>br0</code> æ˜¯<strong>æ„å»ºè™šæ‹Ÿå±€åŸŸç½‘ï¼ˆVLANï¼‰çš„æ ¸å¿ƒå·¥å…·</strong>ï¼Œå®ç°â€œå¤šè®¾å¤‡åŒç½‘æ®µâ€ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-16">ä¸‰ã€å…¶ä»–å¸¸è§è™šæ‹Ÿæ¥å£ç®€ä»‹</h2>






























<table><thead><tr><th>æ¥å£ç±»å‹</th><th>ç¤ºä¾‹</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td><strong>VETH Pair</strong></td><td><code>vetha1b2c3@if4</code></td><td>æˆå¯¹å‡ºç°çš„è™šæ‹Ÿç½‘çº¿ï¼Œå¸¸ç”¨äºè¿æ¥å®¹å™¨ä¸ç½‘æ¡¥</td></tr><tr><td><strong>TUN/TAP</strong></td><td><code>tun0</code>, <code>tap0</code></td><td>ç”¨æˆ·æ€ç¨‹åºæ¨¡æ‹Ÿç½‘ç»œè®¾å¤‡ï¼ˆå¦‚ VPNã€QEMUï¼‰</td></tr><tr><td><strong>VLAN æ¥å£</strong></td><td><code>eth0.100</code></td><td>åœ¨ç‰©ç†æ¥å£ä¸Šåˆ’åˆ† VLANï¼ˆ802.1Qï¼‰</td></tr><tr><td><strong>Bonding</strong></td><td><code>bond0</code></td><td>å¤šç½‘å¡ç»‘å®šï¼Œå®ç°è´Ÿè½½å‡è¡¡æˆ–é«˜å¯ç”¨</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-17">å››ã€å¦‚ä½•æŸ¥çœ‹ä¸ç®¡ç†ç½‘ç»œæ¥å£ï¼Ÿ</h2>
<h3 data-id="heading-18">å¸¸ç”¨å‘½ä»¤ï¼š</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æŸ¥çœ‹æ‰€æœ‰æ¥å£çŠ¶æ€</span>
ip <span class="hljs-built_in">link</span> show

<span class="hljs-comment"># æŸ¥çœ‹ IP åœ°å€</span>
ip addr show

<span class="hljs-comment"># å¯ç”¨/ç¦ç”¨æ¥å£</span>
sudo ip <span class="hljs-built_in">link</span> <span class="hljs-built_in">set</span> eth0 up
sudo ip <span class="hljs-built_in">link</span> <span class="hljs-built_in">set</span> eth0 down

<span class="hljs-comment"># åˆ›å»ºç½‘æ¡¥</span>
sudo ip <span class="hljs-built_in">link</span> add name br0 <span class="hljs-built_in">type</span> bridge

<span class="hljs-comment"># å°†æ¥å£åŠ å…¥ç½‘æ¡¥</span>
sudo ip <span class="hljs-built_in">link</span> <span class="hljs-built_in">set</span> eth0 master br0
</code></pre>
<h3 data-id="heading-19">ç½‘ç»œæ‹“æ‰‘å¯è§†åŒ–ï¼ˆç®€åŒ–ï¼‰ï¼š</h3>
<pre><code class="hljs language-scss" lang="scss">graph LR
    <span class="hljs-selector-tag">A</span><span class="hljs-selector-attr">[Container]</span> --&gt;|veth pair| <span class="hljs-selector-tag">B</span>(docker0&lt;br/&gt;Bridge)
    C<span class="hljs-selector-attr">[VM]</span> --&gt;|tap| <span class="hljs-built_in">D</span>(br0&lt;br/&gt;Bridge)
    D --&gt;|master| E<span class="hljs-selector-attr">[eth0&lt;br/&gt;Physical NIC]</span>
    F<span class="hljs-selector-attr">[Local Process]</span> --&gt;|<span class="hljs-number">127.0</span><span class="hljs-selector-class">.0</span><span class="hljs-selector-class">.1</span>| <span class="hljs-built_in">G</span>(lo&lt;br/&gt;Loopback)
</code></pre>
<hr/>
<h2 data-id="heading-20">äº”ã€ä¸ºä»€ä¹ˆéœ€è¦è¿™ä¹ˆå¤šè™šæ‹Ÿæ¥å£ï¼Ÿ</h2>
<p>Linux ç½‘ç»œè®¾è®¡å“²å­¦ï¼š <strong>â€œä¸€åˆ‡çš†æ–‡ä»¶ï¼Œä¸€åˆ‡çš†å¯è™šæ‹ŸåŒ–â€</strong> ã€‚</p>
<p>é€šè¿‡ç»„åˆä¸åŒç±»å‹çš„è™šæ‹Ÿæ¥å£ï¼Œå¯ä»¥æ„å»ºä»»æ„å¤æ‚çš„ç½‘ç»œæ‹“æ‰‘ï¼š</p>
<ul>
<li>å®¹å™¨ç½‘ç»œï¼ˆCNI æ’ä»¶ï¼‰</li>
<li>è™šæ‹Ÿæœºç½‘ç»œï¼ˆLibvirt + QEMUï¼‰</li>
<li>SDNï¼ˆè½¯ä»¶å®šä¹‰ç½‘ç»œï¼‰</li>
<li>ç½‘ç»œéš”ç¦»ï¼ˆNetwork Namespaceï¼‰</li>
</ul>
<blockquote>
<p>ğŸ’¡ <strong>æ ¸å¿ƒæ€æƒ³</strong>ï¼š<br/>
<strong>ç”¨è½¯ä»¶å®šä¹‰ç½‘ç»œï¼Œè€Œéä¾èµ–ç¡¬ä»¶</strong>ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-21">å…­ã€æ€»ç»“ï¼šä¸‰å¤§æ¥å£å¯¹æ¯”</h2>

































<table><thead><tr><th>æ¥å£</th><th>ç±»å‹</th><th>æ˜¯å¦ç‰©ç†</th><th>å…¸å‹ IP</th><th>ä¸»è¦ç”¨é€”</th></tr></thead><tbody><tr><td><strong><code>eth0</code></strong></td><td>ç‰©ç†ä»¥å¤ªç½‘</td><td>âœ… æ˜¯</td><td>192.168.x.x</td><td>ä¸»æœºå¯¹å¤–é€šä¿¡</td></tr><tr><td><strong><code>lo</code></strong></td><td>å›ç¯</td><td>âŒ å¦</td><td>127.0.0.1</td><td>æœ¬æœºè¿›ç¨‹é€šä¿¡</td></tr><tr><td><strong><code>br0</code></strong></td><td>ç½‘æ¡¥</td><td>âŒ å¦</td><td>è‡ªå®šä¹‰ï¼ˆå¦‚ 10.0.0.1ï¼‰</td><td>è™šæ‹Ÿç½‘ç»œäº’è”</td></tr></tbody></table>
<blockquote>
<p>âœ… <strong>è®°ä½</strong>ï¼š</p>
<ul>
<li><strong><code>eth0</code> æ˜¯â€œå˜´â€</strong> â€”â€” å¯¹å¤–è¯´è¯ï¼›</li>
<li><strong><code>lo</code> æ˜¯â€œè„‘å­â€</strong> â€”â€” è‡ªæˆ‘æ€è€ƒï¼›</li>
<li><strong><code>br0</code> æ˜¯â€œäº¤æ¢æœºâ€</strong> â€”â€” è¿æ¥å¤šä¸ªâ€œå˜´â€ã€‚</li>
</ul>
</blockquote>
<p>æŒæ¡è¿™äº›åŸºç¡€æ¥å£ï¼Œä½ å°±æŒæ¡äº† Linux ç½‘ç»œä¸–ç•Œçš„â€œè§£å‰–å›¾â€ã€‚æ— è®ºæ˜¯æ’æŸ¥ç½‘ç»œæ•…éšœã€é…ç½®å®¹å™¨å¹³å°ï¼Œè¿˜æ˜¯è®¾è®¡äº‘ç½‘ç»œæ¶æ„ï¼Œéƒ½å°†æ¸¸åˆƒæœ‰ä½™ã€‚</p>
<hr/>
<p><strong>å»¶ä¼¸é˜…è¯»</strong>ï¼š</p>
<ul>
<li>Linux å†…æ ¸æ–‡æ¡£ï¼šNetworking Overview</li>
<li>ã€ŠLinux é«˜æ€§èƒ½æœåŠ¡å™¨ç¼–ç¨‹ã€‹ç¬¬2ç« </li>
<li>Docker ç½‘ç»œæ¨¡å‹è¯¦è§£</li>
<li>Open vSwitch vs Linux Bridge</li>
</ul>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Windowsç»ˆäºæœ‰äº†èƒ½å¹²æ´»çš„AIé˜Ÿå‹ï¼šæ·±åº¦è§£æå¤©å·¥Skyworkæ¡Œé¢ç‰ˆ]]></title>    <link>https://juejin.cn/post/7602834985901522994</link>    <guid>https://juejin.cn/post/7602834985901522994</guid>    <pubDate>2026-02-04T13:06:49.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602834985901522994" data-draft-id="7602789520036053002" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Windowsç»ˆäºæœ‰äº†èƒ½å¹²æ´»çš„AIé˜Ÿå‹ï¼šæ·±åº¦è§£æå¤©å·¥Skyworkæ¡Œé¢ç‰ˆ"/> <meta itemprop="keywords" content="AIGC"/> <meta itemprop="datePublished" content="2026-02-04T13:06:49.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¢¨é£å¦‚é›ª"/> <meta itemprop="url" content="https://juejin.cn/user/4064249017803927"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Windowsç»ˆäºæœ‰äº†èƒ½å¹²æ´»çš„AIé˜Ÿå‹ï¼šæ·±åº¦è§£æå¤©å·¥Skyworkæ¡Œé¢ç‰ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4064249017803927/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¢¨é£å¦‚é›ª
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T13:06:49.000Z" title="Wed Feb 04 2026 13:06:49 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¦‚æœæ˜¯é•¿æœŸä½¿ç”¨Windowsè¿›è¡Œé‡åº¦åŠå…¬çš„æœ‹å‹ï¼Œè¿‡å»è¿™ä¸€å¹´å¤§æ¦‚ç‡æ˜¯çœ‹ç€Macç”¨æˆ·æµå£æ°´çš„ã€‚å½“è‹¹æœç”Ÿæ€é‡Œçš„AIåº”ç”¨å·²ç»å¼€å§‹å¸®è®¾è®¡å¸ˆæ•´ç†ç´ æã€å¸®ç¨‹åºå‘˜å†™æ–‡æ¡£çš„æ—¶å€™ï¼ŒWindowsç«¯çš„AIåŠ©æ‰‹å¤§å¤šè¿˜åœç•™åœ¨ç½‘é¡µå¯¹è¯æ¡†é‡Œï¼Œè¦ä¹ˆå°±æ˜¯éœ€è¦ç¹ççš„äº‘ç«¯ä¸Šä¼ ï¼Œä¸ä»…æ…¢ï¼Œè¿˜æ€»è®©äººæ‹…å¿ƒå…¬å¸æœºå¯†æ˜¯ä¸æ˜¯ä¹Ÿä¸å°å¿ƒâ€œå–‚â€ç»™äº†å¤§æ¨¡å‹ã€‚</p>
<p>å°±åœ¨2026å¹´2æœˆ4æ—¥ï¼Œæ˜†ä»‘å¤©å·¥ç»™å‡ºäº†ä¸€ä¸ªç›¸å½“ç¡¬æ ¸çš„å›ç­”ï¼šå¤©å·¥Skyworkæ¡Œé¢ç‰ˆã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.worldcodeing.com%2Fwp-content%2Fuploads%2F2026%2F02%2FiShot_2026-02-04_20.56.23-1024x466.png" target="_blank" title="https://blog.worldcodeing.com/wp-content/uploads/2026/02/iShot_2026-02-04_20.56.23-1024x466.png" ref="nofollow noopener noreferrer"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a3a5323681ac4c52aa1666ce8aace489~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aKo6aOO5aaC6Zuq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770815209&amp;x-signature=sl3UD0op4Fu2dh9WwHquSwPgSJA%3D" alt="iShot_2026-02-04_20.56.23" loading="lazy"/></a></p>
<p>è¿™ä¸ä»…ä»…æ˜¯ä¸€ä¸ªæ–°çš„èŠå¤©æœºå™¨äººï¼Œæ˜†ä»‘ä¸‡ç»´è¿™æ¬¡æ˜¾ç„¶æ˜¯å†²ç€â€œæ¥ç®¡ä½ çš„å·¥ä½œæµâ€æ¥çš„ã€‚ä½œä¸ºä¸€åé•¿æœŸå…³æ³¨AIç”Ÿäº§åŠ›å·¥å…·çš„è§‚å¯Ÿè€…ï¼Œåœ¨ä»”ç»†ç ”ç©¶äº†å®ƒçš„å‘å¸ƒä¿¡æ¯åï¼Œæˆ‘è®¤ä¸ºè¿™æ¬¾äº§å“å¯èƒ½æ ‡å¿—ç€Windowsç”Ÿæ€ä¸‹AI Agentï¼ˆæ™ºèƒ½ä½“ï¼‰çš„çœŸæ­£æˆç†Ÿã€‚</p>
<h3 data-id="heading-0">å‘Šåˆ«äº‘ç«¯ç„¦è™‘ï¼ŒçœŸæ­£çš„â€œæœ¬åœ°åŒ–â€</h3>
<p>Skyworkæ¡Œé¢ç‰ˆæœ€è®©æˆ‘çœ¼å‰ä¸€äº®ï¼Œæˆ–è€…è¯´æœ€è®©ä¼ä¸šç”¨æˆ·æ„Ÿåˆ°è¸å®çš„ç‰¹æ€§ï¼Œå°±æ˜¯å®ƒçš„â€œç»å¯¹æœ¬åœ°åŒ–â€ã€‚</p>
<p>åœ¨è¿‡å»ï¼Œæˆ‘ä»¬è¦ç”¨AIå¤„ç†ä¸€ä»½è´¢åŠ¡æŠ¥è¡¨æˆ–æ³•å¾‹åˆåŒï¼Œå¿ƒç†å‹åŠ›æ˜¯å·¨å¤§çš„ã€‚ä½ å¿…é¡»æŠŠæ–‡ä»¶ä¼ åˆ°äº‘ç«¯ï¼Œç­‰å¾…æœåŠ¡å™¨å¤„ç†ã€‚è€ŒSkyworkç›´æ¥æŠŠå·¥ä½œç¯å¢ƒæ¬åˆ°äº†ä½ çš„ç¡¬ç›˜é‡Œã€‚å®ƒé‡‡ç”¨äº†ä¸€ç§æœ¬åœ°è™šæ‹Ÿæœºéš”ç¦»æŠ€æœ¯ï¼Œç›¸å½“äºåœ¨ä½ çš„ç”µè„‘é‡Œåˆ’å‡ºäº†ä¸€å—ç»å¯¹å®‰å…¨çš„æ²™ç›’ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.worldcodeing.com%2Fwp-content%2Fuploads%2F2026%2F02%2Fasfsdfsdf-1024x597.webp" target="_blank" title="https://blog.worldcodeing.com/wp-content/uploads/2026/02/asfsdfsdf-1024x597.webp" ref="nofollow noopener noreferrer"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b616fbf58f634a9483343606a7d0e300~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aKo6aOO5aaC6Zuq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770815209&amp;x-signature=k5m%2FlfKRAUWGWqlXEiQ4qKI1pdA%3D" alt="asfsdfsdf" loading="lazy"/></a></p>
<p>åœ¨è¿™ä¸ªæ²™ç›’é‡Œï¼ŒAIå¯ä»¥ç›´æ¥è¯»å–ã€åˆ†æä½ æœ¬åœ°æ–‡ä»¶å¤¹é‡Œçš„æˆç™¾ä¸Šåƒä¸ªæ–‡ä»¶ï¼Œæ‰€æœ‰çš„è®¡ç®—å’Œæ•°æ®æµè½¬éƒ½åœ¨è¿™å°æœºå™¨å†…éƒ¨å®Œæˆã€‚è¿™ä¸ä»…è§£å†³äº†éšç§æ³„éœ²çš„åé¡¾ä¹‹å¿§ï¼Œæ›´æ¶ˆé™¤äº†ç½‘ç»œä¸Šä¼ ä¸‹è½½çš„å»¶è¿Ÿã€‚å¯¹äºåŠ¨è¾„å‡ ç™¾å…†çš„å·¥ç¨‹æ–‡ä»¶æˆ–é«˜æ¸…è§†é¢‘ç´ æï¼Œè¿™ç§æœ¬åœ°ç›´è¿çš„é€Ÿåº¦ä¼˜åŠ¿æ˜¯äº‘ç«¯åº”ç”¨æ— æ³•æ¯”æ‹Ÿçš„ã€‚</p>
<h3 data-id="heading-1">å·¦æ‰‹Claudeï¼Œå³æ‰‹Gemini</h3>
<p>å¾ˆå¤šæœ¬åœ°åŒ–AIå·¥å…·çš„ä¸€å¤§ç—›ç‚¹æ˜¯æ¨¡å‹èƒ½åŠ›ä¸å¤Ÿå¼ºï¼Œå¾€å¾€ä¸ºäº†è¿å°±æœ¬åœ°ç®—åŠ›è€Œé˜‰å‰²æ™ºå•†ã€‚ä½†Skyworkè¿™æ¬¡é‡‡å–äº†ä¸€ç§å¾ˆèªæ˜çš„ç­–ç•¥ã€‚</p>
<p>å®ƒæ¥å…¥äº†ç›®å‰å¸‚é¢ä¸Šæœ€é¡¶å°–çš„æ¨¡å‹æ¢¯é˜Ÿï¼šClaude 4.5ç³»åˆ—ï¼ˆOpuså’ŒSonnetï¼‰ä»¥åŠGoogleçš„Gemini 3 Proã€‚è¿™æ„å‘³ç€ä½ ä¸éœ€è¦åœ¨â€œæ•°æ®å®‰å…¨â€å’Œâ€œæ¨¡å‹æ™ºå•†â€ä¹‹é—´åšé€‰æ‹©é¢˜ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.worldcodeing.com%2Fwp-content%2Fuploads%2F2026%2F02%2Fasfsfsdgfd-1024x708.webp" target="_blank" title="https://blog.worldcodeing.com/wp-content/uploads/2026/02/asfsfsdgfd-1024x708.webp" ref="nofollow noopener noreferrer"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7e46c488c0d741d8a5af8fe9ba7b7f72~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aKo6aOO5aaC6Zuq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770815209&amp;x-signature=su8SwzgCdPUsRlnDDNiE5gs4IUs%3D" alt="asfsfsdgfd" loading="lazy"/></a></p>
<p>æ›´æœ‰æ„æ€çš„æ˜¯å®ƒçš„â€œAutoæ¨¡å¼â€ã€‚åœ¨å®é™…å·¥ä½œä¸­ï¼Œç”¨æˆ·å¾€å¾€ä¸çŸ¥é“è¯¥ç”¨å“ªä¸ªæ¨¡å‹ã€‚Skyworkä¼šè‡ªåŠ¨åˆ¤æ–­ï¼šå¦‚æœä½ æ‰”ç»™å®ƒä¸€å †å¤æ‚çš„é€»è¾‘æ¨ç†é¢˜ï¼Œå®ƒä¼šè°ƒç”¨æ“…é•¿æ¨ç†çš„Claudeï¼›å¦‚æœä½ éœ€è¦æ ¹æ®ä¸€æ®µè§†é¢‘ç”Ÿæˆç½‘é¡µæˆ–åˆ†æå›¾è¡¨ï¼Œå®ƒä¼šè‡ªåŠ¨åˆ‡æ¢åˆ°å¤šæ¨¡æ€èƒ½åŠ›æ›´å¼ºçš„Geminiã€‚è¿™ç§æ™ºèƒ½è·¯ç”±çš„æœºåˆ¶ï¼Œæ‰æ˜¯AIåŠ©æ‰‹è¯¥æœ‰çš„æ ·å­â€”â€”å°‘è®©ç”¨æˆ·åšé€‰æ‹©ï¼Œå¤šå¸®ç”¨æˆ·å‡ºç»“æœã€‚</p>
<h3 data-id="heading-2">æ‡‚å†…å®¹çš„â€œOSçº§åŒäº‹â€</h3>
<p>å®˜æ–¹æŠŠè¿™æ¬¾äº§å“å®šä½ä¸ºâ€œWindowsç‰ˆçš„Claude Coworkâ€ï¼Œä½†æˆ‘è®¤ä¸ºâ€œOSçº§åŒäº‹â€è¿™ä¸ªæ¯”å–»æ›´è´´åˆ‡ã€‚</p>
<p>ä¼ ç»Ÿçš„AIæ˜¯â€œä½ é—®æˆ‘ç­”â€ï¼Œè€ŒSkyworkæ˜¯â€œä½ ç»™æ´»ï¼Œæˆ‘æ¥å¹²â€ã€‚å®ƒå†…ç½®äº†è¶…è¿‡100ä¸ªæŠ€èƒ½ï¼ˆSkillsï¼‰ï¼Œè¿™äº›æŠ€èƒ½ä¸æ˜¯ç®€å•çš„APIè°ƒç”¨ï¼Œè€Œæ˜¯å¯¹å·¥ä½œåœºæ™¯çš„æ·±åº¦å°è£…ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.worldcodeing.com%2Fwp-content%2Fuploads%2F2026%2F02%2FiShot_2026-02-04_20.56.05-1024x519.png" target="_blank" title="https://blog.worldcodeing.com/wp-content/uploads/2026/02/iShot_2026-02-04_20.56.05-1024x519.png" ref="nofollow noopener noreferrer"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e330f38f8eef4788a9072aa3cba530cc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aKo6aOO5aaC6Zuq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770815209&amp;x-signature=Ko4OpKeeRlh3HIHzQnDoBBJ53Cs%3D" alt="iShot_2026-02-04_20.56.05" loading="lazy"/></a></p>
<p>æƒ³è±¡è¿™æ ·ä¸€ä¸ªåœºæ™¯ï¼šä½ çš„æ¡Œé¢ä¸Šæ•£è½ç€è¿™ä¸€å‘¨æ··ä¹±çš„ä¼šè®®çºªè¦ï¼ˆWordï¼‰ã€å‡ å¼ ç™½æ¿è‰å›¾ï¼ˆå›¾ç‰‡ï¼‰å’Œä¸€ä»½é”€å”®æ•°æ®ï¼ˆExcelï¼‰ã€‚ä»¥å‰ä½ éœ€è¦æ‰‹åŠ¨æ‰“å¼€æ¯ä¸ªæ–‡ä»¶ï¼Œå¤åˆ¶ç²˜è´´ï¼Œæ•´ç†é€»è¾‘ã€‚è€Œåœ¨Skyworké‡Œï¼Œä½ åªéœ€è¦é€‰ä¸­è¿™äº›æ–‡ä»¶ï¼Œå‘Šè¯‰å®ƒï¼šâ€œæŠŠè¿™äº›èµ„æ–™æ•´ç†æˆä¸€ä»½ä¸‹å‘¨çš„æ±‡æŠ¥PPTï¼Œé‡ç‚¹çªå‡ºé”€å”®å¢é•¿ã€‚â€</p>
<p>å®ƒä¸æ˜¯åœ¨å¤„ç†æ ¼å¼ï¼Œè€Œæ˜¯åœ¨ç†è§£å†…å®¹ã€‚å®ƒèƒ½è¯»æ‡‚å›¾ç‰‡é‡Œçš„è‰å›¾é€»è¾‘ï¼Œèƒ½åˆ†æExcelé‡Œçš„æ•°æ®è¶‹åŠ¿ï¼Œç„¶åæŠŠå®ƒä»¬ä¸²è”æˆä¸€ä»½ç»“æ„å®Œæ•´çš„PPTã€‚è¿™ç§è·¨æ ¼å¼ã€å¤šä»»åŠ¡å¹¶è¡Œçš„èƒ½åŠ›ï¼Œæ‰æ˜¯å°†AIä»â€œç©å…·â€å˜æˆâ€œå·¥å…·â€çš„å…³é”®ä¸€æ­¥ã€‚</p>
<h3 data-id="heading-3">é—¨æ§›ä¸ä»£ä»·</h3>
<p>å½“ç„¶ï¼Œå¥½ç”¨çš„ç”Ÿäº§åŠ›å·¥å…·æ˜¯æœ‰é—¨æ§›çš„ã€‚ç›®å‰Skyworkæ¡Œé¢ç‰ˆéœ€è¦ä»å®˜ç½‘ä¸‹è½½ï¼Œå¹¶ä¸”å¿…é¡»è´­ä¹°ä¼šå‘˜æ‰èƒ½ä½¿ç”¨ã€‚Basicä¼šå‘˜æ¯æœˆ19.99ç¾å…ƒï¼ŒPlusä¼šå‘˜æ¯æœˆ49.99ç¾å…ƒã€‚</p>
<p>è¿™ä¸ªå®šä»·ç­–ç•¥å¾ˆæ˜æ˜¾æ˜¯å¯¹æ ‡äº†æµ·å¤–çš„ä¸»æµç«å“ã€‚å¯¹äºä¸ªäººç”¨æˆ·æ¥è¯´ï¼Œæ¯æœˆä¸€ç™¾å¤šäººæ°‘å¸å¯èƒ½éœ€è¦æƒè¡¡ä¸€ä¸‹ï¼Œä½†å¯¹äºé‚£äº›æ¯å¤©è¢«çç¢æ–‡æ¡£å’Œæ ¼å¼è½¬æ¢æŠ˜ç£¨çš„ä¸“ä¸šäººå£«æ¥è¯´ï¼Œå¦‚æœå®ƒèƒ½æ¯å¤©å¸®ä½ çœä¸‹å“ªæ€•åŠå°æ—¶ï¼Œè¿™ä¸ªä»·æ ¼å…¶å®éå¸¸åˆ’ç®—ã€‚</p>
<h3 data-id="heading-4">ç»“è¯­</h3>
<p>å¤©å·¥Skyworkæ¡Œé¢ç‰ˆçš„å‡ºç°ï¼Œå¡«è¡¥äº†Windowså¹³å°åœ¨åŸç”Ÿçº§AI Agentä¸Šçš„ä¸€ä¸ªå·¨å¤§ç©ºç™½ã€‚å®ƒä¸å†å¼ºè¿«ç”¨æˆ·å»é€‚åº”AIçš„èŠå¤©çª—å£ï¼Œè€Œæ˜¯è®©AIä¸»åŠ¨æ½œå…¥ç”¨æˆ·çš„æ–‡ä»¶å¤¹å’Œå·¥ä½œæµä¸­ã€‚</p>
<p>å¦‚æœä½ å—å¤Ÿäº†åœ¨å„ç§ç½‘é¡µå’Œè½¯ä»¶ä¹‹é—´æ¥å›é€šè¿‡Ctrl+C/Væ¬è¿æ•°æ®ï¼Œæˆ–è€…å¯¹æ•°æ®éšç§æœ‰ç€æé«˜çš„æ•æ„Ÿåº¦ï¼Œé‚£ä¹ˆè¿™æ¬¾äº§å“å€¼å¾—ä½ ç«‹åˆ»å»å®˜ç½‘ä¸‹è½½ä½“éªŒã€‚æ¯•ç«Ÿï¼Œåœ¨2026å¹´ï¼Œè°ä¸æƒ³æ‹¥æœ‰ä¸€ä¸ªæ—¢èªæ˜åˆå˜´ä¸¥ï¼Œè¿˜ä½åœ¨ä½ ç”µè„‘é‡Œçš„å…¨èƒ½åŠ©ç†å‘¢ï¼Ÿ</p>
<p><strong>å¦‚æœä½ ä¹Ÿå¯¹æœ€æ–°çš„AIä¿¡æ¯æ„Ÿå…´è¶£æˆ–è€…æœ‰ç–‘é—® éƒ½å¯ä»¥åŠ å…¥æˆ‘çš„å¤§å®¶åº­ ç¬¬ä¸€æ—¶é—´åˆ†äº«æœ€æ–°AIèµ„è®¯ã€å·¥å…·ã€æ•™ç¨‹ã€æ–‡æ¡£ æ¬¢è¿ä½ çš„åŠ å…¥ï¼ï¼ï¼ğŸ˜‰ğŸ˜‰ğŸ˜‰</strong></p>
<p>å…¬ä¼—å·ï¼šå¢¨é£å¦‚é›ªå°ç«™</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å†™ React å†™åˆ°å‡Œæ™¨ï¼Œæˆ‘æ‰æ‡‚ RD280UG å½©çº¸ç¼–ç¨‹æ¨¡å¼æœ‰å¤šé¦™!]]></title>    <link>https://juejin.cn/post/7602634187284578314</link>    <guid>https://juejin.cn/post/7602634187284578314</guid>    <pubDate>2026-02-04T13:07:48.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602634187284578314" data-draft-id="7602789520036069386" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å†™ React å†™åˆ°å‡Œæ™¨ï¼Œæˆ‘æ‰æ‡‚ RD280UG å½©çº¸ç¼–ç¨‹æ¨¡å¼æœ‰å¤šé¦™!"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-02-04T13:07:48.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‰ç«¯å¼€å‘çˆ±å¥½è€…"/> <meta itemprop="url" content="https://juejin.cn/user/1116759545088190"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å†™ React å†™åˆ°å‡Œæ™¨ï¼Œæˆ‘æ‰æ‡‚ RD280UG å½©çº¸ç¼–ç¨‹æ¨¡å¼æœ‰å¤šé¦™!
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1116759545088190/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‰ç«¯å¼€å‘çˆ±å¥½è€…
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T13:07:48.000Z" title="Wed Feb 04 2026 13:07:48 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½œä¸º<strong>å‰ç«¯å¼€å‘</strong>ï¼Œå…¶å®æˆ‘ä¸€ç›´è§‰å¾—<strong>æ˜¾ç¤ºå™¨</strong>çš„å½±å“ï¼Œè¿œæ¯”é”®ç›˜é¼ æ ‡æ›´éšå½¢ã€‚</p>
<p>å› ä¸ºæˆ‘ä»¬æ¯å¤©é¢å¯¹çš„ä¸æ˜¯**â€œä»£ç â€**ï¼Œè€Œæ˜¯ï¼š</p>
<ul>
<li>å¯†å¯†éº»éº»çš„ <code>DOM</code> ç»“æ„</li>
<li><code>æ·±è‰²ä¸»é¢˜</code>ä¸‹çš„é«˜é¢‘å­—ç¬¦</li>
<li>é•¿æ—¶é—´æ»šåŠ¨çš„<code>è°ƒè¯•é¢æ¿</code></li>
<li><code>CSS</code> çš„å±‚çº§ç¼©è¿›å’Œç»†å°ç¬¦å·</li>
<li><code>æµè§ˆå™¨</code> + <code>IDE</code> + <code>æ§åˆ¶å°</code>ä¸‰å¼€</li>
</ul>
<p>ä¸€å¤©ä¸‹æ¥ï¼Œçœ¼ç›ç´¯çš„ä¸æ˜¯å·¥ä½œé‡ï¼Œè€Œæ˜¯å±å¹•ä¸€ç›´åœ¨<code>â€œæ¶ˆè€—æ³¨æ„åŠ›â€</code>ã€‚</p>
<p>æœ€è¿‘æˆ‘æŠŠä¸»åŠ›å±æ¢æˆäº† <strong>æ˜åŸº RD280UG</strong>ã€‚</p>
<p>å®ƒæ˜¯ <strong>RD280U</strong> çš„å‡çº§æ¬¾ï¼Œä½†ä¸æ˜¯é‚£ç§â€œæ¢ä¸ªåå­—åŠ ç‚¹å‚æ•°â€çš„å‡çº§ï¼Œè€Œæ˜¯é’ˆå¯¹ç¨‹åºå‘˜ï¼ˆå°¤å…¶æ˜¯å‰ç«¯ï¼‰åšäº†ä¸‰å¤„å…³é”®å¼ºåŒ–ï¼š</p>
<p><strong>RD280UG ç›¸æ¯” RD280U çš„æ ¸å¿ƒå‡çº§ï¼š</strong></p>
<ul>
<li><strong>ä¸“ä¸šç¼–ç¨‹æ¨¡å¼å‡çº§ï¼šæ–°å¢å½©çº¸ç¼–ç¨‹æ¨¡å¼</strong></li>
<li><strong>2000:1 é«˜å¯¹æ¯”åº¦ + åˆ†åŒºå¯¹æ¯”åº¦åŠŸèƒ½</strong></li>
<li><strong>120Hz é«˜åˆ·å‡çº§ï¼Œæ»šåŠ¨ä¸è°ƒè¯•æ›´é¡ºæ»‘</strong></li>
</ul>
<p>è¿™ä¸‰ä¸ªç‚¹ï¼Œæ°å¥½éƒ½æˆ³åœ¨å‰ç«¯å¼€å‘çš„é«˜é¢‘åœºæ™¯é‡Œã€‚</p>
<h2 data-id="heading-0">3:2 å±å¹•æ¯”ä¾‹ï¼šå†™å‰ç«¯çš„äººæœ€æ‡‚â€œçºµå‘ç©ºé—´â€</h2>
<p>å‰ç«¯å¼€å‘æœ€å¸¸è§çš„ç•Œé¢æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<p>ä¸æ˜¯å•æ–‡ä»¶ï¼Œè€Œæ˜¯ï¼š</p>
<ul>
<li><code>JSX/HTML</code> çš„åµŒå¥—ç»“æ„</li>
<li>ç»„ä»¶å±‚çº§</li>
<li><code>Tailwind</code> ç±»åå †å </li>
<li>æµè§ˆå™¨ <code>DevTools</code> çš„ <code>Elements</code> æ ‘</li>
</ul>
<p>ä½ ä¼šå‘ç°ï¼Œå‰ç«¯ä»£ç çš„ç—›ç‚¹ä»æ¥ä¸æ˜¯æ¨ªå‘ï¼Œè€Œæ˜¯<strong>çºµå‘ä¿¡æ¯å¯†åº¦å¤ªå¤§</strong>ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1d9d5633c0ea45aba05a8bad0a77179d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5byA5Y-R54ix5aW96ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770815272&amp;x-signature=2iw%2FRcF%2Bh7N2Fg6R53kpct37WEA%3D" alt="" loading="lazy"/></p>
<p><strong>RD280UG</strong> çš„ <code>3:2</code> æ¯”ä¾‹å°±æ˜¯ä¸ºè¿™ä¸ªåœºæ™¯å‡†å¤‡çš„ã€‚</p>
<p>ç›¸æ¯”ä¼ ç»Ÿ <code>16:9</code>ï¼š</p>
<ul>
<li>åŒæ ·çª—å£èƒ½å¤šæ˜¾ç¤ºæ›´å¤šè¡Œ <code>DOM</code></li>
<li>ä¸€ä¸ªç»„ä»¶ç»“æ„ä¸ç”¨åå¤æ»šåŠ¨</li>
<li>è°ƒè¯•æ—¶ä¸Šä¸‹æ–‡æ›´å®Œæ•´</li>
<li>â€œæ€è·¯ä¸æ–­æ¡£â€çš„æ„Ÿè§‰éå¸¸æ˜æ˜¾</li>
</ul>
<p>å°¤å…¶åœ¨è¯»åˆ«äººä»£ç ã€çœ‹å¤æ‚é¡µé¢ç»“æ„æ—¶ï¼Œæå‡ç‰¹åˆ«ç›´æ¥ã€‚</p>
<h2 data-id="heading-1">æŠ—åå°„é¢æ¿ï¼šå‰ç«¯è°ƒè‰²å’Œé•¿æ—¶é—´ç›¯å±æ›´å‹å¥½</h2>
<p>å‰ç«¯å¼€å‘ç»å¸¸éœ€è¦ï¼š</p>
<ul>
<li>å¯¹æ¯” <code>UI</code> è‰²å½©</li>
<li>è°ƒæ•´<code>æ¸å˜</code>ä¸<code>é˜´å½±</code></li>
<li>çœ‹ç»†å°å­—ä½“çš„æ¸²æŸ“æ•ˆæœ</li>
</ul>
<p>ä½†æ™®é€šå±å¹•åœ¨å¼ºå…‰ç¯å¢ƒä¸‹å¾ˆå®¹æ˜“å‡ºç°<code>â€œæ³›ç™½â€</code>å’Œ<code>åå…‰</code>ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1fb6d6780dd4492994d5cb2a030ec2c7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5byA5Y-R54ix5aW96ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770815272&amp;x-signature=92kqIQhqQYjN6c4PGNBfctZjfr8%3D" alt="" loading="lazy"/></p>
<p><strong>RD280UG</strong> çš„æŠ—åå°„é¢æ¿å±äºé‚£ç§ï¼š</p>
<ul>
<li>åŠå…¬å®¤é¡¶ç¯ä¸åˆºçœ¼</li>
<li>èƒŒåæœ‰å…‰ä¹Ÿä¸ä¼šæ™ƒ</li>
<li>å±å¹•å†…å®¹å§‹ç»ˆå¹²å‡€ç¨³å®š</li>
</ul>
<p>è¿™ç§ä½“éªŒä¸æ˜¯â€œæƒŠè‰³â€ï¼Œè€Œæ˜¯å†™ä¸€æ•´å¤©åæ‰å‘ç°ï¼šçœ¼ç›çœŸçš„æ›´è½»æ¾ã€‚</p>
<h2 data-id="heading-2">ä¸“ä¸šç¼–ç¨‹æ¨¡å¼ï¼šè¿™æ¬¡å‡çº§çš„é‡ç‚¹ï¼ˆæ–°å¢å½©çº¸æ¨¡å¼ï¼‰</h2>
<p>è¿™ä¸€ä»£ <strong>RD280UG</strong> æœ€æ ¸å¿ƒçš„å˜åŒ–ï¼Œå°±æ˜¯ç¼–ç¨‹æ¨¡å¼åšå¾—æ›´<code>â€œä¸“ä¸šåŒ–â€</code>ã€‚</p>
<p>å®ƒä¸æ˜¯ç®€å•è°ƒäº®åº¦ï¼Œè€Œæ˜¯ä»<strong>ä»£ç è¯†åˆ«æ•ˆç‡</strong>å‡ºå‘åšçš„æ˜¾ç¤ºä¼˜åŒ–ã€‚</p>
<p><strong>RD280UG</strong> çš„ç¼–ç¨‹æ¨¡å¼ç°åœ¨æœ‰ä¸‰ç§ï¼š</p>
<h3 data-id="heading-3">1ï¼‰æš—é»‘ç¼–ç¨‹æ¨¡å¼ï¼šä¸“ä¸ºæ·±è‰²ä¸»é¢˜ä¼˜åŒ–</h3>
<p>å‰ç«¯å¼€å‘è€…å¤§å¤šç”¨ <code>Dark Theme</code>ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f35ddda4d59148d4bf2cae2af3d2bab5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5byA5Y-R54ix5aW96ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770815272&amp;x-signature=eIJVZ17Fq6H8rvjRhRRF3lXeno0%3D" alt="" loading="lazy"/></p>
<p>ä½†æ™®é€šæ˜¾ç¤ºå™¨åœ¨æš—è‰²èƒŒæ™¯ä¸‹å¸¸è§é—®é¢˜æ˜¯ï¼š</p>
<ul>
<li><strong>é»‘ä¸å¤Ÿæ²‰ï¼Œç°è’™è’™</strong></li>
<li><strong>å­—ç¬¦è¾¹ç¼˜å‘è™š</strong></li>
<li><strong>æ³¨é‡Šå’Œä»£ç å±‚çº§æ··åœ¨ä¸€èµ·</strong></li>
</ul>
<p>æš—é»‘ç¼–ç¨‹æ¨¡å¼çš„åŸç†æ˜¯ï¼š</p>
<ul>
<li><strong>å‹ä½èƒŒæ™¯äº®åº¦</strong></li>
<li><strong>æå‡å­—ä½“è¾¹ç¼˜æ¸…æ™°åº¦</strong></li>
<li><strong>å¢å¼ºå¯¹æ¯”å±‚çº§</strong></li>
</ul>
<p>æ•ˆæœå°±æ˜¯ï¼š</p>
<ul>
<li><strong>å˜é‡åæ›´â€œè·³å‡ºæ¥â€</strong></li>
<li><strong>ç¼©è¿›ç»“æ„æ›´æ¸…æ¥š</strong></li>
<li><strong>é•¿æ—¶é—´çœ‹æš—è‰²ä¸ç´¯</strong></li>
</ul>
<p>ç‰¹åˆ«é€‚åˆ <code>React/Vue</code> è¿™ç§ç»“æ„å¯†é›†å‹ä»£ç ã€‚</p>
<h3 data-id="heading-4">2ï¼‰æ˜äº®ç¼–ç¨‹æ¨¡å¼ï¼šé€‚åˆç™½åº•ä¸æ–‡æ¡£åœºæ™¯</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8c5b1f12d4d44430b5f4ffc61f18eb57~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5byA5Y-R54ix5aW96ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770815272&amp;x-signature=8pI9GTphOgR0FLGvIwc3aCrVGHk%3D" alt="" loading="lazy"/></p>
<p>å¾ˆå¤šæ—¶å€™æˆ‘ä»¬ä¸æ­¢å†™ä»£ç ï¼Œè¿˜åœ¨ï¼š</p>
<ul>
<li>æŸ¥ <code>MDN</code></li>
<li>å†™<code>æŠ€æœ¯æ–‡æ¡£</code></li>
<li>çœ‹<code>æ¥å£è¯´æ˜</code></li>
<li>å¯¹ç…§<code>è®¾è®¡ç¨¿</code></li>
</ul>
<p>æ˜äº®ç¼–ç¨‹æ¨¡å¼ä¼šä¼˜åŒ–ï¼š</p>
<ul>
<li><strong>ç™½åº•ä¸åˆºçœ¼</strong></li>
<li><strong>å­—ä½“ä¸å‘ç°</strong></li>
<li><strong>é¡µé¢ä¿¡æ¯æ›´â€œå¹²å‡€â€</strong></li>
</ul>
<p>é€‚åˆç™½å¤©åŠå…¬å’Œå¤šçª—å£æ··åˆåœºæ™¯ã€‚</p>
<h3 data-id="heading-5">3ï¼‰æ–°å¢ï¼šå½©çº¸ç¼–ç¨‹æ¨¡å¼ï¼ˆè¿™æ¬¡æœ€å¤§äº®ç‚¹ï¼‰</h3>
<p>å½©çº¸æ¨¡å¼æ˜¯ <strong>RD280UG</strong> æ–°å¢çš„å‡çº§ç‚¹ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/813ecf35653a48399b721f48edf80c63~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5byA5Y-R54ix5aW96ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770815272&amp;x-signature=TD7%2Fso5a7MzKGiMxkg3nLRi%2Bg%2BM%3D" alt="" loading="lazy"/></p>
<p>å®ƒçš„æ€è·¯éå¸¸åƒâ€œæŠ¤çœ¼çº¸å¼ é˜…è¯»â€ï¼š</p>
<ul>
<li>èƒŒæ™¯ä¸æ˜¯<code>çº¯ç™½</code>æˆ–<code>çº¯é»‘</code></li>
<li>è€Œæ˜¯<code>ä½åˆºæ¿€</code>çš„æŸ”å’Œçº¸å¼ è‰²</li>
<li>å‡å°‘é«˜äº®å¯¹æ¯”å¸¦æ¥çš„ç–²åŠ³</li>
</ul>
<p>åŸç†ä¸Šï¼Œå®ƒé€šè¿‡è°ƒæ•´ï¼š</p>
<ul>
<li><strong>è‰²æ¸©æ›²çº¿</strong></li>
<li><strong>èƒŒæ™¯äº®åº¦åˆ†å¸ƒ</strong></li>
<li><strong>å­—ç¬¦ä¸åº•è‰²çš„å¯¹æ¯”å…³ç³»</strong></li>
</ul>
<p>è®©å±å¹•å‘ˆç°ä¸€ç§â€œçº¸é¢ä»£ç â€çš„æ„Ÿè§‰ã€‚</p>
<p>å®é™…ä½“éªŒéå¸¸é€‚åˆï¼š</p>
<ul>
<li><strong>é•¿æ—¶é—´å†™ä¸šåŠ¡ä»£ç </strong></li>
<li><strong>æ·±å¤œæ”¹ <code>bug</code></strong></li>
<li><strong>çœ‹åˆ«äººé¡¹ç›®æºç </strong></li>
<li><strong>å‰ç«¯è°ƒè¯•ä¸€åå°±æ˜¯å‡ ä¸ªå°æ—¶</strong></li>
</ul>
<h2 data-id="heading-6">2000:1 é«˜å¯¹æ¯”åº¦ + åˆ†åŒºå¯¹æ¯”åº¦ï¼šå‰ç«¯è°ƒè¯•æ›´æ¸…æ™°</h2>
<p><strong>RD280UG</strong> è¿™æ¬¡å¯¹æ¯”åº¦å‡çº§åˆ° <strong>2000:1</strong>ï¼Œå¹¶æ–°å¢äº†åˆ†åŒºå¯¹æ¯”åº¦åŠŸèƒ½ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/33ca5b873207452781971e106a4e3948~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5byA5Y-R54ix5aW96ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770815272&amp;x-signature=MES3xxSg37WBU8LVx98%2BamGtHxQ%3D" alt="" loading="lazy"/></p>
<p>è¿™å¯¹å‰ç«¯å¼€å‘å°¤å…¶é‡è¦ã€‚</p>
<p>å› ä¸ºæˆ‘ä»¬ç»å¸¸é¢å¯¹ï¼š</p>
<ul>
<li><code>DevTools</code> çš„å¤šå±‚é¢æ¿</li>
<li><code>æ§åˆ¶å°</code>è¾“å‡º</li>
<li><code>ä»£ç åŒº</code> + <code>æµè§ˆå™¨</code>é¢„è§ˆåŒæ—¶å¼€</li>
</ul>
<p>åˆ†åŒºå¯¹æ¯”åº¦çš„ä½œç”¨æ˜¯ï¼š<strong>å±å¹•ä¸åŒåŒºåŸŸå¯ä»¥åŠ¨æ€ä¼˜åŒ–å¯¹æ¯”åº¦è¡¨ç°</strong></p>
<p>ç»“æœå°±æ˜¯ï¼š</p>
<ul>
<li><strong>ä»£ç åŒºæ–‡å­—æ›´é”åˆ©</strong></li>
<li><strong>è°ƒè¯•é¢æ¿å±‚çº§æ›´åˆ†æ˜</strong></li>
<li><strong>é»‘åº•æ§åˆ¶å°ä¸ä¼šç³Šæˆä¸€ç‰‡</strong></li>
<li><strong>å°å­—å·ç¬¦å·ï¼ˆ{}, (), ;ï¼‰æ›´å®¹æ˜“è¯†åˆ«</strong></li>
</ul>
<p>å¯¹äºå‰ç«¯è¿™ç§**â€œä¿¡æ¯å¯†åº¦çˆ†ç‚¸â€**çš„å·¥ä½œæµæ¥è¯´ï¼Œè¿™ä¸ªå‡çº§éå¸¸å®ç”¨ã€‚</p>
<h2 data-id="heading-7">120Hz é«˜åˆ·ï¼šæ»šåŠ¨ä»£ç å’Œé¡µé¢è°ƒè¯•æ›´é¡º</h2>
<p>å¾ˆå¤šäººè§‰å¾—é«˜åˆ·æ˜¯æ¸¸æˆéœ€æ±‚ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2a34229a6cf047ebb2de8de793617078~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5byA5Y-R54ix5aW96ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770815272&amp;x-signature=BZ1fGPI67%2FC5rBY6djmbg3Ri6CY%3D" alt="" loading="lazy"/></p>
<p>ä½†å‰ç«¯å¼€å‘çš„é«˜é¢‘åŠ¨ä½œå…¶å®æ˜¯ï¼š</p>
<ul>
<li><strong>æ»šåŠ¨é•¿é¡µé¢</strong></li>
<li><strong>æ‹–åŠ¨è°ƒè¯•çª—å£</strong></li>
<li><strong>æµè§ˆå™¨ä¸Šä¸‹åˆ‡æ¢</strong></li>
<li><strong>æŸ¥çœ‹åŠ¨ç”»ä¸äº¤äº’æ•ˆæœ</strong></li>
</ul>
<p><strong>120Hz</strong> å¸¦æ¥çš„æå‡æ˜¯ï¼š</p>
<ul>
<li><strong>æ»šåŠ¨æ›´è·Ÿæ‰‹</strong></li>
<li><strong>ç”»é¢æ›´ç¨³å®š</strong></li>
<li><strong>é•¿æ—¶é—´ç›¯å±ä¸å®¹æ˜“èƒ€çœ¼</strong></li>
</ul>
<p>å±äºâ€œæ¶¦ç‰©ç»†æ— å£°â€çš„å‡çº§ã€‚</p>
<h2 data-id="heading-8">MoonHalo + å¤œé—´ä¿æŠ¤ï¼šæ·±å¤œæ”¹ bug çš„èˆ’é€‚æ„Ÿ</h2>
<p>å‰ç«¯å¼€å‘æœ€ç†Ÿæ‚‰çš„åœºæ™¯æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1570ad6338174d088041e49343560be1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5byA5Y-R54ix5aW96ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770815272&amp;x-signature=KhetKmZgTBu3kgc8W2QjlV65g0o%3D" alt="" loading="lazy"/></p>
<p>æ™šä¸Šåä¸€ç‚¹ï¼š</p>
<ul>
<li><strong>å±‹é‡Œå¾ˆæš—</strong></li>
<li><strong>å±å¹•å¾ˆäº®</strong></li>
<li><strong>ä½ è¿˜åœ¨ä¿®çº¿ä¸Šé—®é¢˜</strong></li>
</ul>
<p><strong>RD280UG</strong> çš„<code>å¤œé—´ä¿æŠ¤æ¨¡å¼</code> + <code>MoonHalo</code> ç¯å¢ƒå…‰éå¸¸é€‚åˆè¿™ç§åœºæ™¯ï¼š</p>
<ul>
<li>å±å¹•äº®åº¦æ›´æŸ”å’Œ</li>
<li>è‰²æ¸©æ›´èˆ’é€‚</li>
<li>èƒŒåç¯å¢ƒå…‰å‡å°‘æ˜æš—åå·®</li>
<li>ä¸ä¼šåƒç›¯ç€ä¸€å—åˆºçœ¼å…‰æ¿</li>
</ul>
<p>æ·±å¤œç¼–ç ä½“éªŒæ˜æ˜¾æ›´â€œæ¾â€ã€‚</p>
<h2 data-id="heading-9">è½¯ä»¶ååŒå‡çº§ï¼šæ–°å¢æ”¯æŒ Linux</h2>
<p><strong>RD280UG</strong> ä¾ç„¶æ”¯æŒ <code>Display Pilot 2</code> è½¯ä»¶è°ƒèŠ‚æ˜¾ç¤ºå™¨ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d61f8eb0b6f94eb4ba821f3154d32c12~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5byA5Y-R54ix5aW96ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770815272&amp;x-signature=U2KBQBfb919oibnuUEQFA1%2BwE7I%3D" alt="" loading="lazy"/></p>
<p>è¿™æ¬¡è¿˜æœ‰ä¸€ä¸ªå¯¹ç¨‹åºå‘˜å¾ˆé‡è¦çš„å‡çº§ï¼š</p>
<p><strong>æ–°å¢æ”¯æŒ Linux ç³»ç»Ÿ</strong></p>
<p>å¯¹äºå¾ˆå¤šå‰ç«¯/å…¨æ ˆç”¨æˆ·æ¥è¯´ï¼š</p>
<ul>
<li>ä¸»åŠ›æœºæ˜¯ <code>Mac</code></li>
<li>å¼€å‘æœºæ˜¯ <code>Linux</code></li>
<li>æµ‹è¯•ç¯å¢ƒä¹Ÿåœ¨ <code>Linux</code></li>
</ul>
<p>è½¯ä»¶æ”¯æŒæ‰©å±•åï¼Œè°ƒèŠ‚æ˜¾ç¤ºå™¨ä¼šæ›´æ–¹ä¾¿ã€‚</p>
<h2 data-id="heading-10">æ€»ç»“ï¼šRD280UG æ›´åƒâ€œå‰ç«¯å¼€å‘çš„ç¬¬äºŒä»£ç”Ÿäº§åŠ›å±â€</h2>
<p><strong>RD280UG</strong> çš„å‡çº§æ–¹å‘éå¸¸æ˜ç¡®ï¼š</p>
<ul>
<li><strong>å½©çº¸ç¼–ç¨‹æ¨¡å¼</strong> â†’ é•¿æ—¶é—´å†™ä»£ç æ›´è€çœ‹</li>
<li><strong>2000:1 + åˆ†åŒºå¯¹æ¯”åº¦</strong> â†’ è°ƒè¯•ä¿¡æ¯æ›´æ¸…æ™°</li>
<li><strong>120Hz é«˜åˆ·</strong> â†’ æ»šåŠ¨ä¸äº¤äº’æ›´é¡ºæ»‘</li>
</ul>
<p>å†åŠ ä¸Šï¼š</p>
<ul>
<li><code>3:2</code> çºµå‘ç©ºé—´</li>
<li><code>æŠ—åå°„é¢æ¿</code></li>
<li><code>MoonHalo</code> å¤œé—´ä½“éªŒ</li>
<li>è½¯ä»¶æ”¯æŒ <code>Linux</code></li>
</ul>
<p>å®ƒä¸æ˜¯å•çº¯å‚æ•°å‡çº§ï¼Œè€Œæ˜¯æ›´è´´è¿‘ç¨‹åºå‘˜çœŸå®å·¥ä½œæµçš„è¿­ä»£ã€‚</p>
<p>å¦‚æœä½ æ˜¯<strong>å‰ç«¯å¼€å‘è€…</strong>ï¼Œæ¯å¤©éƒ½åœ¨ <code>IDE</code> + <code>æµè§ˆå™¨</code> + <code>DevTools</code> ä¹‹é—´åˆ‡æ¢ï¼Œé‚£ <strong>RD280UG</strong> ä¼šæ˜¯ä¸€å—çœŸæ­£èƒ½æå‡æ•ˆç‡å’Œèˆ’é€‚åº¦çš„æ˜¾ç¤ºå™¨ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[log-lotteryï¼šä¸åªæ˜¯ç‚«é…·çš„3DæŠ½å¥–ï¼Œæ›´æ˜¯å­¦ä¹ å‰ç«¯å¼€å‘çš„æœ€ä½³å®è·µ]]></title>    <link>https://juejin.cn/post/7602814773496774698</link>    <guid>https://juejin.cn/post/7602814773496774698</guid>    <pubDate>2026-02-04T13:08:37.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602814773496774698" data-draft-id="7602807243704795199" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="log-lotteryï¼šä¸åªæ˜¯ç‚«é…·çš„3DæŠ½å¥–ï¼Œæ›´æ˜¯å­¦ä¹ å‰ç«¯å¼€å‘çš„æœ€ä½³å®è·µ"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-02-04T13:08:37.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¿®å·±xj"/> <meta itemprop="url" content="https://juejin.cn/user/2641475936724142"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            log-lotteryï¼šä¸åªæ˜¯ç‚«é…·çš„3DæŠ½å¥–ï¼Œæ›´æ˜¯å­¦ä¹ å‰ç«¯å¼€å‘çš„æœ€ä½³å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2641475936724142/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¿®å·±xj
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T13:08:37.000Z" title="Wed Feb 04 2026 13:08:37 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æ–‡ç« ç®€ä»‹ï¼šå¹´å…³å°†è‡³ï¼Œå¹´ä¼šæŠ½å¥–å¦‚ä½•ç©å‡ºæ–°æ„ï¼Ÿlog-lottery å¼€æºé¡¹ç›®å°†ä¼ ç»ŸæŠ½å¥–å‡çº§ä¸ºç‚«é…·çš„3Dçƒä½“è§†è§‰ç››å®´ï¼Œæ›´æ˜¯ä¸€æ¬¾èåˆ Vue3ã€Three.jsã€IndexedDB ç­‰å‰æ²¿æŠ€æœ¯çš„å®Œæ•´å­¦ä¹ æ¡ˆä¾‹ã€‚å®ƒä¸ä»…æ”¯æŒå¥–å“äººå‘˜ç®¡ç†ã€ç•Œé¢å®šåˆ¶ä¸éŸ³ä¹é…ç½®ï¼Œè¿˜æä¾›åœ¨çº¿ä½“éªŒã€æœ¬åœ°éƒ¨ç½²ä¸ Docker å®¹å™¨åŒ–ç­‰å¤šç§ä½¿ç”¨æ–¹å¼ã€‚æ— è®ºæ˜¯æ‰“é€ ç°åœºäº®ç‚¹ï¼Œè¿˜æ˜¯æ·±å…¥å­¦ä¹ ç°ä»£å‰ç«¯å·¥ç¨‹å®è·µï¼Œè¿™ä¸ªé¡¹ç›®éƒ½èƒ½ä¸ºä½ å¸¦æ¥æƒŠå–œä¸æ”¶è·ã€‚</p>
</blockquote>
<p>å¹´å…³å°†è‡³ï¼Œå„å®¶å…¬å¸å·²é™†ç»­å¼€å§‹ç­¹å¤‡å¹´ä¼šã€‚æ´»åŠ¨ç°åœºç¯ç«ç’€ç’¨ï¼Œæ— è®ºæ˜¯åº†å…¸è¿˜æ˜¯å…¶ä»–èšä¼šï¼ŒæŠ½å¥–ç¯èŠ‚å¾€å¾€æ˜¯æœ€ä»¤äººå¿ƒåŠ¨çš„äº®ç‚¹ã€‚ç„¶è€Œï¼Œè‹¥åªæ˜¯ç®€å•åœ°æ¬å‡ºä¸€ä¸ªæŠ½å¥–ç®±éšæ‰‹æŠ½å–ï¼Œå°¤å…¶æ˜¯å¯¹äºè½¯ä»¶å…¬å¸è€Œè¨€â€”â€”æ˜¯å¦æ˜¾å¾—ä¸é«˜å¤§ä¸Šå‘¢ï¼Ÿ</p>
<p>ä½†ä½ æœ‰æ²¡æœ‰æƒ³è¿‡ï¼Œä¸€ä¸ªçœ‹ä¼¼ç®€å•çš„æŠ½å¥–ç³»ç»ŸèƒŒåï¼Œå…¶å®å¯ä»¥æ‰¿è½½ä¸°å¯Œçš„å‰ç«¯å¼€å‘æŠ€æœ¯ä¸å·¥ç¨‹å®è·µï¼Ÿä»Šå¤©æˆ‘è¦å‘å¤§å®¶ä»‹ç»çš„ log-lotteryï¼Œæ­£æ˜¯è¿™æ ·ä¸€ä¸ªå°†è¶£å‘³æ€§ä¸æŠ€æœ¯æ·±åº¦å·§å¦™èåˆçš„å¼€æºé¡¹ç›®ã€‚å®ƒä¸ä»…æ‹¥æœ‰å¼•äººæ³¨ç›®çš„ 3D è§†è§‰æ•ˆæœï¼Œæ›´å ªç§°ç°ä»£å‰ç«¯æŠ€æœ¯æ ˆçš„å®Œæ•´ç¤ºèŒƒæ¡ˆä¾‹ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/34f0af04203645ce85e3beb5427dc1a5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-u5bexeGo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770815317&amp;x-signature=M00zqoaGf5ZLtrNIF%2FYaPPoZjl8%3D" alt="f99efd1d4c35e9a7e295e318becbe469.png" loading="lazy"/></p>
<h2 data-id="heading-0">ğŸ‰ ä»€ä¹ˆ log-lotteryï¼Ÿ</h2>
<p>log-lotteryæ˜¯ä¸€ä¸ªå¯é…ç½®å¯å®šåˆ¶åŒ–çš„æŠ½å¥–åº”ç”¨ï¼Œç‚«é…·3Dçƒä½“ï¼Œå¯ç”¨äºå¹´ä¼šæŠ½å¥–ç­‰æ´»åŠ¨ï¼Œæ”¯æŒå¥–å“ã€äººå‘˜ã€ç•Œé¢ã€å›¾ç‰‡éŸ³ä¹é…ç½®ã€‚log-lottery æœ€å¸å¼•äººçš„ç‰¹ç‚¹æ— ç–‘æ˜¯å…¶åä¸½çš„3Dçƒä½“æŠ½å¥–ç•Œé¢ã€‚å½“å‚ä¸è€…åå•ä»¥3Dçƒä½“å½¢å¼æ—‹è½¬ã€è·³åŠ¨æ—¶ï¼Œé‚£ç§è§†è§‰å†²å‡»åŠ›æ˜¯ä¼ ç»ŸæŠ½å¥–ç³»ç»Ÿæ— æ³•æ¯”æ‹Ÿçš„ã€‚æ— è®ºæ˜¯åœ¨å…¬å¸å¹´ä¼šã€æ ¡å›­æ´»åŠ¨è¿˜æ˜¯å…¶ä»–åº†ç¥åœºåˆï¼Œè¿™ä¸ªåŠŸèƒ½éƒ½èƒ½ç¬é—´ç‚¹ç‡ƒç°åœºæ°”æ°›ã€‚</p>
<p>ä½† log-lottery çš„é­…åŠ›è¿œä¸æ­¢äºæ­¤ã€‚å®ƒæ›´æ˜¯ä¸€ä¸ªç²¾å¿ƒè®¾è®¡çš„<strong>å­¦ä¹ é¡¹ç›®</strong>ï¼Œå±•ç¤ºäº†å¦‚ä½•å°†å¤šç§ç°ä»£å‰ç«¯æŠ€æœ¯æœ‰æœºç»“åˆï¼Œæ„å»ºä¸€ä¸ªåŠŸèƒ½å®Œæ•´ã€ä½“éªŒä¼˜ç§€çš„Webåº”ç”¨ã€‚</p>
<p><strong>é¡¹ç›®åœ°å€</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FLOG1997%2Flog-lottery" title="https://github.com/LOG1997/log-lottery" target="_blank" ref="nofollow noopener noreferrer">github.com/LOG1997/logâ€¦</a></p>
<p><strong>åœ¨çº¿ä½“éªŒ</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Flottery.to2026.xyz%2Flog-lottery" title="https://lottery.to2026.xyz/log-lottery" target="_blank" ref="nofollow noopener noreferrer">lottery.to2026.xyz/log-lottery</a></p>
<p>è¯¥é¡¹ç›®ç›®å‰å†githubä¸Šå·²æœ‰Â <strong>3k</strong>â­ï¸ star</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/07fb2beb375d4bb7bda4b7c64c4e152c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-u5bexeGo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770815317&amp;x-signature=bct3fmPFr6lkXNy1nEZipJq4o%2Bs%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-1">ğŸ› ï¸ æŠ€æœ¯æ ˆäº®ç‚¹</h2>
<p>log-lottery é‡‡ç”¨äº†å½“å‰å‰ç«¯å¼€å‘çš„ä¸»æµæŠ€æœ¯æ ˆï¼š</p>
<ul>
<li>â€¢Â <strong>Vue3</strong>Â - æœ€æ–°ç‰ˆçš„Vueæ¡†æ¶ï¼Œå±•ç¤ºç»„åˆå¼APIçš„æœ€ä½³å®è·µ</li>
<li>â€¢Â <strong>Three.js</strong>Â - ä¸šç•Œé¢†å…ˆçš„3Då›¾å½¢åº“ï¼Œå®ç°æƒŠè‰³çš„è§†è§‰æ•ˆæœ</li>
<li>â€¢Â <strong>IndexedDB</strong>Â - æµè§ˆå™¨æœ¬åœ°æ•°æ®åº“ï¼Œå®ç°æ•°æ®çš„æŒä¹…åŒ–å­˜å‚¨</li>
<li>â€¢Â <strong>Pinia</strong>Â - Vueçš„ç°ä»£çŠ¶æ€ç®¡ç†åº“</li>
<li>â€¢Â <strong>DaisyUI</strong>Â - Tailwind CSSç»„ä»¶åº“ï¼Œæä¾›ç¾è§‚çš„UIåŸºç¡€</li>
</ul>
<p>è¿™ä¸ªæŠ€æœ¯ç»„åˆéå¸¸å®ç”¨ï¼Œæ˜¯å­¦ä¹ è€…äº†è§£ç°ä»£Webå¼€å‘æ¶æ„çš„ç»ä½³é¡¹ç›®ã€‚</p>
<h2 data-id="heading-2">ğŸ”§ å¿«é€Ÿå¼€å§‹</h2>
<h3 data-id="heading-3">ğŸŒåœ¨çº¿ä½“éªŒ</h3>
<p>ç›´æ¥è®¿é—®å®˜æ–¹æä¾›çš„ä¸¤ä¸ªåœ°å€ä¹‹ä¸€å³å¯ä½“éªŒï¼š</p>
<ul>
<li>â€¢ <a href="https://link.juejin.cn?target=https%3A%2F%2Flottery.to2026.xyz%2Flog-lottery" target="_blank" title="https://lottery.to2026.xyz/log-lottery" ref="nofollow noopener noreferrer">lottery.to2026.xyz/log-lottery</a></li>
<li>â€¢ <a href="https://link.juejin.cn?target=https%3A%2F%2Flog1997.github.io%2Flog-lottery%2F" target="_blank" title="https://log1997.github.io/log-lottery/" ref="nofollow noopener noreferrer">log1997.github.io/log-lotteryâ€¦</a></li>
</ul>
<h3 data-id="heading-4">ğŸ–¥ï¸æœ¬åœ°å¼€å‘</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment">#Â å…‹éš†é¡¹ç›®</span>
gitÂ <span class="hljs-built_in">clone</span>Â https://github.com/LOG1997/log-lottery.git

<span class="hljs-comment">#Â å®‰è£…ä¾èµ–</span>
pnpmÂ iÂ Â Â æˆ–Â npmÂ install

<span class="hljs-comment">#Â å¯åŠ¨å¼€å‘æœåŠ¡å™¨</span>
pnpmÂ devÂ Â Â æˆ–Â npmÂ runÂ dev

<span class="hljs-comment">#Â æ‰“åŒ…</span>
pnpmÂ buildÂ æˆ–Â npmÂ runÂ build
</code></pre>
<h3 data-id="heading-5">ğŸ³Dockeréƒ¨ç½²</h3>
<ul>
<li>â€¢ Docker run è¿è¡Œ</li>
</ul>
<p>æ‹‰å–é•œåƒï¼Œä»Docker Hubæ‹‰å–é•œåƒlog-lottery</p>
<pre><code class="hljs language-bash" lang="bash">dockerÂ pullÂ log1997/log-lottery:latest
</code></pre>
<p>è¿è¡Œå®¹å™¨</p>
<pre><code class="hljs language-c" lang="c">dockerÂ runÂ -dÂ --nameÂ <span class="hljs-built_in">log</span>-lotteryÂ -pÂ <span class="hljs-number">9279</span>:<span class="hljs-number">80</span>Â log1997/<span class="hljs-built_in">log</span>-lottery:latest
</code></pre>
<ul>
<li>â€¢ docker-compose è¿è¡Œ</li>
</ul>
<p>åˆ›å»ºdocker-compose.ymlæ–‡ä»¶</p>
<pre><code class="hljs language-perl" lang="perl">services:
Â Â <span class="hljs-keyword">log</span>-lottery:
Â Â Â Â image:Â log1997/<span class="hljs-keyword">log</span>-lottery:latest
Â Â Â Â container_name:Â <span class="hljs-keyword">log</span>-lottery
Â Â Â Â ports:
Â Â Â Â Â Â -Â <span class="hljs-string">"9279:80"</span>
Â Â Â Â restart:Â <span class="hljs-keyword">unless</span>-stopped
</code></pre>
<p>åœ¨docker-compose.yml åŒçº§ç›®å½•ä¸‹è¿è¡Œä»¥ä¸‹å‘½ä»¤å¯åŠ¨</p>
<pre><code class="hljs">docker-composeÂ upÂ -dÂ 
</code></pre>
<p>å¯åŠ¨ä¹‹åè®¿é—® <a href="https://link.juejin.cn?target=http%3A%2F%2Flocalhost%3A9279%2Flog-lottery%2F" target="_blank" title="http://localhost:9279/log-lottery/" ref="nofollow noopener noreferrer">http://localhost:9279/log-lottery/</a> å³å¯ä½¿ç”¨ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dadadf586dc9414c92ba24a0a7d30394~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-u5bexeGo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770815317&amp;x-signature=0pSUMLN5rTR3KKObjPaRW%2FOkoO0%3D" alt="df6cf7cecb81ee905c15ee1473607f62.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/51f52f9cf3994467abd71c1d57725237~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-u5bexeGo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770815317&amp;x-signature=sED0V2d0Kq10J9UshXFgcmtZrQs%3D" alt="23f5fdf0072f10d95ac454f3ab9b2d4a.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a45e165754f5457ab81143efae99f0eb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-u5bexeGo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770815317&amp;x-signature=DlXAb8esvlZvSCA%2F9s2dJfzX8%2B0%3D" alt="28037b55654df1190c4a168abe9d57a3.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f11186bf7a38406a94507ebd30630a1e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-u5bexeGo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770815317&amp;x-signature=ngwYPgAd6ESRZC0noKuW08sib%2BQ%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9b3b88662f4c4a8eb37d5f47b88bb620~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-u5bexeGo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770815317&amp;x-signature=DWKA6ldF58dpZiEGUNHnBS%2BsObw%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a1f448ac6a8146939477168f759bc752~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-u5bexeGo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770815317&amp;x-signature=nHT%2Fss%2FZTNij6jX%2Fg880AjzgI9c%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2244b2f883a14f00941dc50241e56f78~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-u5bexeGo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770815317&amp;x-signature=9tfjOLd86fBg5jtwORFhm9YeSUc%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-6">ğŸ“‹ åŠŸèƒ½ä¸°å¯Œä¸”å®ç”¨</h2>
<h3 data-id="heading-7">1. ğŸ§‘â€ğŸ¤â€ğŸ§‘å®Œæ•´çš„äººå‘˜ä¸å¥–å“ç®¡ç†</h3>
<ul>
<li>â€¢ é€šè¿‡Excelæ¨¡æ¿å¯¼å…¥å‚ä¸äººå‘˜åå•</li>
<li>â€¢ è‡ªå®šä¹‰å¥–é¡¹è®¾ç½®ï¼ˆåç§°ã€äººæ•°ã€å‚ä¸èŒƒå›´ç­‰ï¼‰</li>
<li>â€¢ æŠ½å¥–ç»“æœå¯¼å‡ºåˆ°Excelï¼Œæ–¹ä¾¿åç»­å¤„ç†</li>
</ul>
<h3 data-id="heading-8">2. ğŸ¨é«˜åº¦å¯å®šåˆ¶åŒ–ç•Œé¢</h3>
<ul>
<li>â€¢ è‡ªå®šä¹‰æ ‡é¢˜ã€åˆ—æ•°ã€å¡ç‰‡é¢œè‰²</li>
<li>â€¢ æ›´æ¢èƒŒæ™¯å›¾ç‰‡å’Œé¦–é¡µå›¾æ¡ˆ</li>
<li>â€¢ æ”¯æŒèƒŒæ™¯éŸ³ä¹ä¸Šä¼ å’Œæ’­æ”¾</li>
</ul>
<h3 data-id="heading-9">3. ğŸš¢å¤šç§éƒ¨ç½²æ–¹å¼</h3>
<ul>
<li>â€¢Â <strong>åœ¨çº¿è®¿é—®</strong>ï¼šç›´æ¥é€šè¿‡æä¾›çš„é“¾æ¥ä½¿ç”¨</li>
<li>â€¢Â <strong>Dockeréƒ¨ç½²</strong>ï¼šä¸€é”®å®¹å™¨åŒ–éƒ¨ç½²</li>
<li>â€¢Â <strong>æœ¬åœ°å®‰è£…åŒ…</strong>ï¼šWindowså¹³å°å¯ç›´æ¥å®‰è£…ä½¿ç”¨</li>
</ul>
<h2 data-id="heading-10">ğŸš€ å­¦ä¹ ä»·å€¼</h2>
<p>å¯¹äºå¼€å‘è€…æ¥è¯´ï¼Œlog-lottery æä¾›äº†å¤šä¸ªå­¦ä¹ ç»´åº¦ï¼š</p>
<h3 data-id="heading-11">1. ğŸ®3D Webåº”ç”¨å¼€å‘</h3>
<p>é€šè¿‡ Three.js ä¸ Vue3 çš„é›†æˆï¼Œä½ å¯ä»¥å­¦ä¹ å¦‚ä½•åœ¨Webåº”ç”¨ä¸­æ·»åŠ 3Då…ƒç´ ï¼Œè¿™å¯¹äºæ¸¸æˆå¼€å‘ã€æ•°æ®å¯è§†åŒ–ç­‰é¢†åŸŸéƒ½æœ‰é‡è¦å‚è€ƒä»·å€¼ã€‚</p>
<h3 data-id="heading-12">2. ğŸ’¾æœ¬åœ°æ•°æ®æŒä¹…åŒ–</h3>
<p>é¡¹ç›®ä½¿ç”¨ IndexedDB å­˜å‚¨é…ç½®å’Œåª’ä½“æ–‡ä»¶ï¼Œå±•ç¤ºäº†å¦‚ä½•åœ¨æµè§ˆå™¨ç«¯å®ç°å¤æ‚çš„æ•°æ®ç®¡ç†ï¼Œè¿™å¯¹äºç¦»çº¿åº”ç”¨å’ŒPWAå¼€å‘éå¸¸æœ‰å¸®åŠ©ã€‚</p>
<h3 data-id="heading-13">3.ğŸ› ï¸ å®Œæ•´çš„å‰ç«¯å·¥ç¨‹åŒ–å®è·µ</h3>
<p>ä»å¼€å‘ã€æ„å»ºåˆ°éƒ¨ç½²ï¼Œé¡¹ç›®å±•ç¤ºäº†å®Œæ•´çš„å¼€å‘æµç¨‹ã€‚ç‰¹åˆ«æ˜¯Dockeræ”¯æŒï¼Œè®©ä½ äº†è§£å¦‚ä½•å°†å‰ç«¯åº”ç”¨å®¹å™¨åŒ–ã€‚</p>
<h2 data-id="heading-14">ğŸŒŸç»“è¯­</h2>
<p>Log-Lottery å±•ç¤ºäº†ä¸€ä¸ªçœ‹ä¼¼ç®€å•çš„åº”ç”¨èƒŒåæ‰€è•´å«çš„ä¸°å¯ŒæŠ€æœ¯å†…æ¶µã€‚å®ƒä¸ä»…æ˜¯æ´»è·ƒå¹´ä¼šæ°”æ°›çš„å®ç”¨å·¥å…·ï¼Œæ›´æ˜¯ä¸€ä»¶ç²¾å¿ƒæ‰“ç£¨çš„æŠ€æœ¯ä½œå“ï¼Œä¸€ä¸ªæå…·å­¦ä¹ ä»·å€¼çš„å¼€æºé¡¹ç›®ã€‚</p>
<p>ä½œä¸ºä½¿ç”¨è€…ï¼Œä½ å¯ä»¥ï¼š</p>
<ul>
<li>â€¢ è·å¾—ä¸€ä¸ªå…è´¹ã€å¼ºå¤§ä¸”é«˜åº¦å¯å®šåˆ¶çš„æŠ½å¥–ç³»ç»Ÿ</li>
<li>â€¢ æ”¯æŒæœ¬åœ°éƒ¨ç½²ï¼Œç¡®ä¿æ´»åŠ¨æ•°æ®å®Œå…¨è‡ªä¸»å¯æ§</li>
<li>â€¢ é€šè¿‡ä¸°å¯Œçš„é…ç½®é€‰é¡¹ï¼Œçµæ´»é€‚åº”ä¸åŒæ´»åŠ¨åœºæ™¯</li>
</ul>
<p>ä½œä¸ºå­¦ä¹ è€…ï¼Œä½ å°†èƒ½å¤Ÿï¼š</p>
<ul>
<li>â€¢ æ·±å…¥å‰–æä¸€ä¸ªç”Ÿäº§ç¯å¢ƒçº§çš„ Three.js å®Œæ•´åº”ç”¨æ¡ˆä¾‹</li>
<li>â€¢ æŒæ¡ IndexedDB åœ¨å‰ç«¯å¤æ‚åœºæ™¯ä¸­çš„å®æˆ˜ä½¿ç”¨æ–¹æ³•</li>
<li>â€¢ ç†è§£åŸºäº Vue 3 çš„ç°ä»£åŒ–å‰ç«¯é¡¹ç›®æ¶æ„è®¾è®¡</li>
</ul>
<p>æ— è®ºä½ æ˜¯ä¸ºäº†ä¸‹ä¸€æ¬¡å…¬å¸å¹´ä¼šå‡†å¤‡ä¸€ä¸ªæƒŠè‰³å…¨åœºçš„æŠ½å¥–ç¯èŠ‚ï¼Œè¿˜æ˜¯å¸Œæœ›è¿›ä¸€æ­¥æå‡ä¸ªäººå‰ç«¯æŠ€æœ¯å®åŠ›ï¼ŒLog-Lottery éƒ½æ˜¯ä¸€ä¸ªå€¼å¾—ä½ æŠ•å…¥æ—¶é—´æ·±å…¥æ¢ç´¢çš„ä¼˜ç§€é¡¹ç›®ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/966b5281f9054bbabe1841af546cd9ca~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-u5bexeGo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770815317&amp;x-signature=%2Bfl13kQQJU%2FBFbbgW7xXySMflJo%3D" alt="" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸€å¤©ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼ˆç¬¬12ç¯‡ï¼‰ï¼šSoulX-Podcast - å¤šè½®å¯¹è¯å¼æ’­å®¢ç”Ÿæˆï¼Œè®©AIè¯­éŸ³æ›´è‡ªç„¶çœŸå®]]></title>    <link>https://juejin.cn/post/7602776926328094774</link>    <guid>https://juejin.cn/post/7602776926328094774</guid>    <pubDate>2026-02-04T13:15:38.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602776926328094774" data-draft-id="7602776926328078390" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸€å¤©ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼ˆç¬¬12ç¯‡ï¼‰ï¼šSoulX-Podcast - å¤šè½®å¯¹è¯å¼æ’­å®¢ç”Ÿæˆï¼Œè®©AIè¯­éŸ³æ›´è‡ªç„¶çœŸå®"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,å¼€æº"/> <meta itemprop="datePublished" content="2026-02-04T13:15:38.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å†¬å¥‡Lab"/> <meta itemprop="url" content="https://juejin.cn/user/1857501105781193"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸€å¤©ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼ˆç¬¬12ç¯‡ï¼‰ï¼šSoulX-Podcast - å¤šè½®å¯¹è¯å¼æ’­å®¢ç”Ÿæˆï¼Œè®©AIè¯­éŸ³æ›´è‡ªç„¶çœŸå®
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1857501105781193/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å†¬å¥‡Lab
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T13:15:38.000Z" title="Wed Feb 04 2026 13:15:38 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»13åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€</h2>
<blockquote>
<p>"å¦‚æœAIèƒ½ç”ŸæˆåƒçœŸå®æ’­å®¢ä¸€æ ·è‡ªç„¶çš„å¯¹è¯ï¼Œæ”¯æŒå¤šè½®äº¤äº’ã€ä¸åŒæ–¹è¨€ï¼Œè¿˜èƒ½åŠ å…¥ç¬‘å£°ã€å¹æ¯ç­‰çœŸå®æƒ…æ„Ÿï¼Œé‚£è¯¥å¤šå¥½ï¼Ÿ"</p>
</blockquote>
<p>è¿™æ˜¯"ä¸€å¤©ä¸€ä¸ªå¼€æºé¡¹ç›®"ç³»åˆ—çš„ç¬¬12ç¯‡æ–‡ç« ã€‚ä»Šå¤©å¸¦ä½ äº†è§£çš„é¡¹ç›®æ˜¯ <strong>SoulX-Podcast</strong>ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FSoul-AILab%2FSoulX-Podcast" target="_blank" title="https://github.com/Soul-AILab/SoulX-Podcast" ref="nofollow noopener noreferrer">GitHub</a>ï¼‰ã€‚</p>
<p>ä¼ ç»Ÿçš„TTSç³»ç»Ÿä¸»è¦é¢å‘å•è¯´è¯äººã€å•è½®å¯¹è¯ï¼Œç”Ÿæˆçš„è¯­éŸ³ç¼ºä¹çœŸå®å¯¹è¯çš„è‡ªç„¶æ„Ÿã€‚SoulX-Podcastä¸“ä¸ºæ’­å®¢é£æ ¼çš„å¤šè½®ã€å¤šè¯´è¯äººå¯¹è¯å¼è¯­éŸ³ç”Ÿæˆè€Œè®¾è®¡ï¼Œä¸ä»…æ”¯æŒè·¨æ–¹è¨€çš„é›¶æ ·æœ¬è¯­éŸ³å…‹éš†ï¼Œè¿˜èƒ½æ§åˆ¶å‰¯è¯­è¨€äº‹ä»¶ï¼ˆå¦‚ç¬‘å£°ã€å¹æ¯ï¼‰ï¼Œè®©AIç”Ÿæˆçš„è¯­éŸ³æ›´è‡ªç„¶ã€æ›´çœŸå®ï¼ŒçœŸæ­£è¾¾åˆ°æ’­å®¢çº§åˆ«çš„è´¨é‡ã€‚</p>
<h3 data-id="heading-1">ä½ å°†å­¦åˆ°ä»€ä¹ˆ</h3>
<ul>
<li>SoulX-Podcastçš„æ ¸å¿ƒæ¶æ„å’ŒæŠ€æœ¯ç‰¹ç‚¹</li>
<li>å¤šè½®ã€å¤šè¯´è¯äººå¯¹è¯å¼è¯­éŸ³ç”Ÿæˆçš„å®ç°åŸç†</li>
<li>è·¨æ–¹è¨€é›¶æ ·æœ¬è¯­éŸ³å…‹éš†çš„æŠ€æœ¯çªç ´</li>
<li>å‰¯è¯­è¨€æ§åˆ¶ï¼ˆç¬‘å£°ã€å¹æ¯ç­‰ï¼‰çš„å®ç°æ–¹å¼</li>
<li>å¦‚ä½•ä½¿ç”¨SoulX-Podcastç”Ÿæˆé«˜è´¨é‡æ’­å®¢</li>
<li>ä¸å…¶ä»–TTSç³»ç»Ÿçš„å¯¹æ¯”åˆ†æ</li>
<li>WebUIå’ŒAPIçš„ä½¿ç”¨æ–¹æ³•</li>
</ul>
<h3 data-id="heading-2">å‰ç½®çŸ¥è¯†</h3>
<ul>
<li>å¯¹TTSï¼ˆæ–‡æœ¬è½¬è¯­éŸ³ï¼‰æœ‰åŸºæœ¬äº†è§£</li>
<li>äº†è§£è¯­éŸ³åˆæˆçš„åŸºæœ¬æ¦‚å¿µ</li>
<li>ç†Ÿæ‚‰Pythonç¼–ç¨‹ï¼ˆå¯é€‰ï¼‰</li>
<li>å¯¹é›¶æ ·æœ¬å­¦ä¹ æœ‰åŸºæœ¬è®¤è¯†ï¼ˆå¯é€‰ï¼‰</li>
</ul>
<hr/>
<h2 data-id="heading-3">é¡¹ç›®èƒŒæ™¯</h2>
<h3 data-id="heading-4">é¡¹ç›®ç®€ä»‹</h3>
<p><strong>SoulX-Podcast</strong> æ˜¯ä¸€ä¸ªä¸“ä¸º<strong>æ’­å®¢é£æ ¼çš„å¤šè½®ã€å¤šè¯´è¯äººå¯¹è¯å¼è¯­éŸ³ç”Ÿæˆ</strong>è€Œè®¾è®¡çš„TTSç³»ç»Ÿï¼Œç”±Soul AIå›¢é˜Ÿå¼€å‘ã€‚å®ƒä¸ä»…èƒ½åœ¨ä¼ ç»Ÿçš„å•è¯´è¯äººTTSä»»åŠ¡ä¸Šè¡¨ç°ä¼˜å¼‚ï¼Œæ›´é‡è¦çš„æ˜¯å®ç°äº†é«˜è´¨é‡çš„å¤šè½®å¯¹è¯å¼è¯­éŸ³ç”Ÿæˆï¼Œè®©AIç”Ÿæˆçš„è¯­éŸ³æ›´æ¥è¿‘çœŸå®æ’­å®¢çš„è‡ªç„¶æ„Ÿã€‚</p>
<p><strong>é¡¹ç›®è§£å†³çš„æ ¸å¿ƒé—®é¢˜</strong>ï¼š</p>
<ul>
<li>ä¼ ç»ŸTTSç³»ç»Ÿåªæ”¯æŒå•è¯´è¯äººã€å•è½®å¯¹è¯</li>
<li>ç¼ºä¹å¤šè½®å¯¹è¯çš„ä¸Šä¸‹æ–‡ç†è§£å’Œè¿è´¯æ€§</li>
<li>æ— æ³•ç”Ÿæˆå¤šè¯´è¯äººä¹‹é—´çš„è‡ªç„¶å¯¹è¯</li>
<li>ç¼ºä¹æ–¹è¨€æ”¯æŒï¼Œæ— æ³•å®ç°è·¨æ–¹è¨€è¯­éŸ³å…‹éš†</li>
<li>ç”Ÿæˆçš„è¯­éŸ³ç¼ºä¹çœŸå®æƒ…æ„Ÿè¡¨è¾¾ï¼ˆå¦‚ç¬‘å£°ã€å¹æ¯ç­‰å‰¯è¯­è¨€ï¼‰</li>
</ul>
<p><strong>é¢å‘çš„ç”¨æˆ·ç¾¤ä½“</strong>ï¼š</p>
<ul>
<li>éœ€è¦ç”Ÿæˆæ’­å®¢å†…å®¹çš„åˆ›ä½œè€…</li>
<li>éœ€è¦å¤šè¯´è¯äººå¯¹è¯å¼è¯­éŸ³çš„åº”ç”¨å¼€å‘è€…</li>
<li>éœ€è¦æ–¹è¨€è¯­éŸ³åˆæˆçš„å¼€å‘è€…</li>
<li>éœ€è¦é«˜è´¨é‡ã€è‡ªç„¶è¯­éŸ³åˆæˆçš„AIåº”ç”¨å¼€å‘è€…</li>
<li>å¯¹è¯­éŸ³åˆæˆè´¨é‡æœ‰é«˜è¦æ±‚çš„å¼€å‘è€…</li>
</ul>
<h3 data-id="heading-5">ä½œè€…/å›¢é˜Ÿä»‹ç»</h3>
<p><strong>å›¢é˜Ÿï¼šSoul AI Lab</strong></p>
<ul>
<li><strong>èƒŒæ™¯</strong>ï¼šä¸“æ³¨äºè¯­éŸ³æŠ€æœ¯å’ŒAIçš„ç§‘ç ”å›¢é˜Ÿ</li>
<li><strong>è´¡çŒ®è€…</strong>ï¼š4ä½æ ¸å¿ƒè´¡çŒ®è€…</li>
<li><strong>ç†å¿µ</strong>ï¼šæ‰“é€ é«˜è´¨é‡ã€è‡ªç„¶ã€çœŸå®çš„æ’­å®¢é£æ ¼è¯­éŸ³ç”Ÿæˆç³»ç»Ÿ</li>
<li><strong>ç›¸å…³æˆæœ</strong>ï¼šå‘è¡¨ç›¸å…³æŠ€æœ¯è®ºæ–‡ï¼Œåœ¨Hugging Faceä¸Šæä¾›æ¨¡å‹å’ŒDemo</li>
</ul>
<p><strong>é¡¹ç›®åˆ›å»ºæ—¶é—´</strong>ï¼š2025å¹´10æœˆï¼ˆä»GitHubæ´»åŠ¨æ¥çœ‹æ˜¯æŒç»­æ´»è·ƒçš„é¡¹ç›®ï¼‰</p>
<h3 data-id="heading-6">é¡¹ç›®æ•°æ®</h3>
<ul>
<li>â­ <strong>GitHub Stars</strong>: 3.1k+ï¼ˆæŒç»­å¿«é€Ÿå¢é•¿ï¼‰</li>
<li>ğŸ´ <strong>Forks</strong>: 403+</li>
<li>ğŸ“¦ <strong>ç‰ˆæœ¬</strong>: æœ€æ–°ç‰ˆæœ¬ï¼ˆæŒç»­æ›´æ–°ï¼‰</li>
<li>ğŸ“„ <strong>License</strong>: Apache-2.0</li>
</ul>
<p><strong>é¡¹ç›®å‘å±•å†ç¨‹</strong>ï¼š</p>
<ul>
<li>2025å¹´10æœˆï¼šé¡¹ç›®åˆ›å»ºï¼Œå‘å¸ƒåˆå§‹ç‰ˆæœ¬</li>
<li>2025å¹´10æœˆ28æ—¥ï¼šè®ºæ–‡å‘è¡¨</li>
<li>2025å¹´10æœˆ29æ—¥ï¼šæ¨¡å‹åœ¨Hugging Faceä¸Šå‘å¸ƒ</li>
<li>2025å¹´10æœˆ30æ—¥ï¼šæ·»åŠ WebUIå’Œå•è¯´è¯äººTTSç¤ºä¾‹</li>
<li>2025å¹´10æœˆ31æ—¥ï¼šéƒ¨ç½²Hugging Faceåœ¨çº¿Demo</li>
<li>2025å¹´11æœˆ3æ—¥ï¼šæ”¯æŒvLLMåŠ é€Ÿå’ŒDockeréƒ¨ç½²</li>
</ul>
<hr/>
<h2 data-id="heading-7">ä¸»è¦åŠŸèƒ½</h2>
<h3 data-id="heading-8">æ ¸å¿ƒä½œç”¨</h3>
<p>SoulX-Podcastçš„æ ¸å¿ƒä½œç”¨æ˜¯<strong>ç”Ÿæˆé«˜è´¨é‡ã€è‡ªç„¶ã€çœŸå®çš„æ’­å®¢é£æ ¼å¤šè½®å¯¹è¯å¼è¯­éŸ³</strong>ï¼Œä¸»è¦åŠŸèƒ½åŒ…æ‹¬ï¼š</p>
<ol>
<li><strong>å¤šè½®ã€å¤šè¯´è¯äººå¯¹è¯å¼è¯­éŸ³ç”Ÿæˆ</strong>ï¼šæ”¯æŒå¤šä¸ªè¯´è¯äººä¹‹é—´çš„è‡ªç„¶å¯¹è¯ï¼Œä¿æŒä¸Šä¸‹æ–‡è¿è´¯æ€§</li>
<li><strong>è·¨æ–¹è¨€é›¶æ ·æœ¬è¯­éŸ³å…‹éš†</strong>ï¼šæ”¯æŒå››å·è¯ã€æ²³å—è¯ã€ç²¤è¯­ç­‰æ–¹è¨€ï¼Œåªéœ€æä¾›å‚è€ƒéŸ³é¢‘å³å¯å…‹éš†</li>
<li><strong>å‰¯è¯­è¨€æ§åˆ¶</strong>ï¼šæ”¯æŒç¬‘å£°ã€å¹æ¯ã€å‘¼å¸ã€å’³å—½ã€æ¸…å—“ç­‰å‰¯è¯­è¨€äº‹ä»¶ï¼Œå¢å¼ºçœŸå®æ„Ÿ</li>
<li><strong>é«˜è´¨é‡å•è¯´è¯äººTTS</strong>ï¼šåœ¨ä¼ ç»Ÿå•è¯´è¯äººTTSä»»åŠ¡ä¸Šä¹Ÿè¡¨ç°ä¼˜å¼‚</li>
<li><strong>å¤šè¯­è¨€æ”¯æŒ</strong>ï¼šæ”¯æŒä¸­æ–‡ï¼ˆæ™®é€šè¯å’Œå¤šç§æ–¹è¨€ï¼‰å’Œè‹±æ–‡</li>
</ol>
<h3 data-id="heading-9">ä½¿ç”¨åœºæ™¯</h3>
<ol>
<li>
<p><strong>æ’­å®¢å†…å®¹ç”Ÿæˆ</strong></p>
<ul>
<li>è‡ªåŠ¨ç”Ÿæˆæ’­å®¢å¯¹è¯å†…å®¹</li>
<li>å¤šè¯´è¯äººä¹‹é—´çš„è‡ªç„¶å¯¹è¯</li>
<li>æ·»åŠ çœŸå®çš„æƒ…æ„Ÿè¡¨è¾¾ï¼ˆç¬‘å£°ã€å¹æ¯ç­‰ï¼‰</li>
</ul>
</li>
<li>
<p><strong>æœ‰å£°ä¹¦åˆ¶ä½œ</strong></p>
<ul>
<li>å¤šè§’è‰²å¯¹è¯çš„æœ‰å£°ä¹¦</li>
<li>ä¸åŒæ–¹è¨€è§’è‰²çš„è¯­éŸ³ç”Ÿæˆ</li>
<li>è‡ªç„¶çš„æƒ…æ„Ÿè¡¨è¾¾</li>
</ul>
</li>
<li>
<p><strong>æ•™è‚²å†…å®¹åˆ¶ä½œ</strong></p>
<ul>
<li>å¤šè¯´è¯äººçš„æ•™å­¦å¯¹è¯</li>
<li>ä¸åŒæ–¹è¨€çš„æ•™å­¦å†…å®¹</li>
<li>ç”ŸåŠ¨çš„å¯¹è¯å¼æ•™å­¦</li>
</ul>
</li>
<li>
<p><strong>æ¸¸æˆå’Œå¨±ä¹åº”ç”¨</strong></p>
<ul>
<li>æ¸¸æˆè§’è‰²çš„è¯­éŸ³ç”Ÿæˆ</li>
<li>ä¸åŒæ–¹è¨€çš„è§’è‰²è¯­éŸ³</li>
<li>ä¸°å¯Œçš„å‰¯è¯­è¨€è¡¨è¾¾</li>
</ul>
</li>
<li>
<p><strong>è¾…åŠ©æŠ€æœ¯åº”ç”¨</strong></p>
<ul>
<li>ä¸ºè§†éšœç”¨æˆ·ç”Ÿæˆè‡ªç„¶å¯¹è¯</li>
<li>ä¸ªæ€§åŒ–è¯­éŸ³åŠ©æ‰‹</li>
<li>å¤šè¯­è¨€ã€å¤šæ–¹è¨€çš„è¯­éŸ³æœåŠ¡</li>
</ul>
</li>
</ol>
<h3 data-id="heading-10">å¿«é€Ÿå¼€å§‹</h3>
<p><strong>å®‰è£…æ­¥éª¤</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. å…‹éš†ä»“åº“</span>
git <span class="hljs-built_in">clone</span> https://github.com/Soul-AILab/SoulX-Podcast.git
<span class="hljs-built_in">cd</span> SoulX-Podcast

<span class="hljs-comment"># 2. åˆ›å»ºCondaç¯å¢ƒ</span>
conda create -n soulxpodcast -y python=3.11
conda activate soulxpodcast

<span class="hljs-comment"># 3. å®‰è£…ä¾èµ–</span>
pip install -r requirements.txt

<span class="hljs-comment"># 4. ä¸‹è½½æ¨¡å‹</span>
pip install -U huggingface_hub
huggingface-cli download --resume-download Soul-AILab/SoulX-Podcast-1.7B \
  --local-dir pretrained_models/SoulX-Podcast-1.7B
</code></pre>
<p><strong>æœ€ç®€å•çš„ä½¿ç”¨ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä½¿ç”¨WebUIï¼ˆæœ€ç®€å•çš„æ–¹å¼ï¼‰</span>
python3 webui.py --model_path pretrained_models/SoulX-Podcast-1.7B

<span class="hljs-comment"># æˆ–è€…ä½¿ç”¨æ–¹è¨€æ¨¡å‹</span>
python3 webui.py --model_path pretrained_models/SoulX-Podcast-1.7B-dialect

<span class="hljs-comment"># ä½¿ç”¨å‘½ä»¤è¡Œç¤ºä¾‹è„šæœ¬</span>
bash example/infer_dialogue.sh
</code></pre>
<p><strong>Pythonä»£ç ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> soulxpodcast <span class="hljs-keyword">import</span> SoulXPodcast

<span class="hljs-comment"># åˆå§‹åŒ–æ¨¡å‹</span>
model = SoulXPodcast(model_path=<span class="hljs-string">"pretrained_models/SoulX-Podcast-1.7B"</span>)

<span class="hljs-comment"># ç”Ÿæˆå¤šè¯´è¯äººå¯¹è¯</span>
dialogue = [
    {<span class="hljs-string">"speaker"</span>: <span class="hljs-string">"ä¸»æŒäºº"</span>, <span class="hljs-string">"text"</span>: <span class="hljs-string">"æ¬¢è¿æ¥åˆ°ä»Šå¤©çš„æ’­å®¢èŠ‚ç›®ï¼"</span>},
    {<span class="hljs-string">"speaker"</span>: <span class="hljs-string">"å˜‰å®¾"</span>, <span class="hljs-string">"text"</span>: <span class="hljs-string">"è°¢è°¢é‚€è¯·ï¼&lt;|laughter|&gt;ä»Šå¤©å¾ˆé«˜å…´æ¥åˆ°è¿™é‡Œã€‚"</span>},
    {<span class="hljs-string">"speaker"</span>: <span class="hljs-string">"ä¸»æŒäºº"</span>, <span class="hljs-string">"text"</span>: <span class="hljs-string">"è®©æˆ‘ä»¬å¼€å§‹ä»Šå¤©çš„è®¨è®ºå§ã€‚"</span>}
]

<span class="hljs-comment"># ç”Ÿæˆè¯­éŸ³</span>
audio = model.generate_dialogue(dialogue, reference_audios={
    <span class="hljs-string">"ä¸»æŒäºº"</span>: <span class="hljs-string">"path/to/host_audio.wav"</span>,
    <span class="hljs-string">"å˜‰å®¾"</span>: <span class="hljs-string">"path/to/guest_audio.wav"</span>
})

<span class="hljs-comment"># ä¿å­˜éŸ³é¢‘</span>
model.save_audio(audio, <span class="hljs-string">"output_podcast.wav"</span>)
</code></pre>
<h3 data-id="heading-11">æ ¸å¿ƒç‰¹æ€§</h3>
<ol>
<li>
<p><strong>å¤šè½®ã€å¤šè¯´è¯äººå¯¹è¯å¼è¯­éŸ³ç”Ÿæˆ</strong></p>
<ul>
<li>æ”¯æŒå¤šä¸ªè¯´è¯äººä¹‹é—´çš„è‡ªç„¶å¯¹è¯</li>
<li>ä¿æŒä¸Šä¸‹æ–‡è¿è´¯æ€§å’Œå¯¹è¯æµç•…æ€§</li>
<li>æ¯ä¸ªè¯´è¯äººå¯ä»¥æœ‰ä¸åŒçš„è¯­éŸ³ç‰¹å¾</li>
</ul>
</li>
<li>
<p><strong>è·¨æ–¹è¨€é›¶æ ·æœ¬è¯­éŸ³å…‹éš†</strong></p>
<ul>
<li>æ”¯æŒå››å·è¯ã€æ²³å—è¯ã€ç²¤è¯­ç­‰æ–¹è¨€</li>
<li>åªéœ€æä¾›å‚è€ƒéŸ³é¢‘å³å¯å…‹éš†</li>
<li>æ— éœ€é’ˆå¯¹æ¯ç§æ–¹è¨€å•ç‹¬è®­ç»ƒæ¨¡å‹</li>
</ul>
</li>
<li>
<p><strong>å‰¯è¯­è¨€æ§åˆ¶</strong></p>
<ul>
<li>æ”¯æŒå¤šç§å‰¯è¯­è¨€æ ‡ç­¾ï¼š<code>&lt;|laughter|&gt;</code>ã€<code>&lt;|sigh|&gt;</code>ã€<code>&lt;|breathing|&gt;</code>ã€<code>&lt;|coughing|&gt;</code>ã€<code>&lt;|throat_clearing|&gt;</code></li>
<li>å¢å¼ºè¯­éŸ³çš„çœŸå®æ„Ÿå’Œè‡ªç„¶åº¦</li>
<li>è®©AIç”Ÿæˆçš„è¯­éŸ³æ›´æ¥è¿‘äººç±»è¡¨è¾¾</li>
</ul>
</li>
<li>
<p><strong>é«˜è´¨é‡å•è¯´è¯äººTTS</strong></p>
<ul>
<li>åœ¨ä¼ ç»Ÿå•è¯´è¯äººTTSä»»åŠ¡ä¸Šè¡¨ç°ä¼˜å¼‚</li>
<li>æ”¯æŒé•¿æ–‡æœ¬è¯­éŸ³åˆæˆ</li>
<li>ç”Ÿæˆè‡ªç„¶ã€æ¸…æ™°çš„è¯­éŸ³</li>
</ul>
</li>
<li>
<p><strong>å¤šè¯­è¨€æ”¯æŒ</strong></p>
<ul>
<li>æ”¯æŒä¸­æ–‡ï¼ˆæ™®é€šè¯å’Œå¤šç§æ–¹è¨€ï¼‰</li>
<li>æ”¯æŒè‹±æ–‡</li>
<li>å¯ä»¥æ··åˆä½¿ç”¨å¤šç§è¯­è¨€</li>
</ul>
</li>
<li>
<p><strong>WebUIç•Œé¢</strong></p>
<ul>
<li>å‹å¥½çš„å›¾å½¢ç•Œé¢</li>
<li>ç®€å•æ˜“ç”¨çš„æ“ä½œæµç¨‹</li>
<li>å®æ—¶é¢„è§ˆå’Œè°ƒæ•´</li>
</ul>
</li>
<li>
<p><strong>APIæ”¯æŒ</strong></p>
<ul>
<li>æä¾›RESTful APIæ¥å£</li>
<li>æ–¹ä¾¿é›†æˆåˆ°å…¶ä»–åº”ç”¨</li>
<li>æ”¯æŒæ‰¹é‡å¤„ç†</li>
</ul>
</li>
<li>
<p><strong>vLLMåŠ é€Ÿ</strong></p>
<ul>
<li>æ”¯æŒvLLMæ¨ç†åŠ é€Ÿ</li>
<li>Dockeréƒ¨ç½²æ”¯æŒ</li>
<li>æé«˜ç”Ÿæˆé€Ÿåº¦</li>
</ul>
</li>
</ol>
<h3 data-id="heading-12">é¡¹ç›®ä¼˜åŠ¿</h3>





















































<table><thead><tr><th align="left">å¯¹æ¯”é¡¹</th><th align="left">SoulX-Podcast</th><th align="left">ä¼ ç»ŸTTS</th><th align="left">å…¶ä»–å¯¹è¯å¼TTS</th></tr></thead><tbody><tr><td align="left"><strong>å¤šè¯´è¯äººå¯¹è¯</strong></td><td align="left">âœ… åŸç”Ÿæ”¯æŒ</td><td align="left">âŒ ä¸æ”¯æŒ</td><td align="left">âš ï¸ æœ‰é™æ”¯æŒ</td></tr><tr><td align="left"><strong>å¤šè½®å¯¹è¯</strong></td><td align="left">âœ… ä¸Šä¸‹æ–‡è¿è´¯</td><td align="left">âŒ å•è½®</td><td align="left">âš ï¸ æœ‰é™æ”¯æŒ</td></tr><tr><td align="left"><strong>æ–¹è¨€æ”¯æŒ</strong></td><td align="left">âœ… é›¶æ ·æœ¬è·¨æ–¹è¨€</td><td align="left">âŒ ä¸æ”¯æŒ</td><td align="left">âŒ ä¸æ”¯æŒ</td></tr><tr><td align="left"><strong>å‰¯è¯­è¨€æ§åˆ¶</strong></td><td align="left">âœ… å¤šç§å‰¯è¯­è¨€</td><td align="left">âŒ ä¸æ”¯æŒ</td><td align="left">âŒ ä¸æ”¯æŒ</td></tr><tr><td align="left"><strong>è¯­éŸ³è´¨é‡</strong></td><td align="left">âœ… æ’­å®¢çº§åˆ«</td><td align="left">âš ï¸ ä¸€èˆ¬</td><td align="left">âš ï¸ ä¸€èˆ¬</td></tr><tr><td align="left"><strong>è‡ªç„¶åº¦</strong></td><td align="left">âœ… é«˜è‡ªç„¶åº¦</td><td align="left">âš ï¸ ä¸­ç­‰</td><td align="left">âš ï¸ ä¸­ç­‰</td></tr><tr><td align="left"><strong>é›¶æ ·æœ¬å…‹éš†</strong></td><td align="left">âœ… æ”¯æŒ</td><td align="left">âš ï¸ æœ‰é™</td><td align="left">âš ï¸ æœ‰é™</td></tr></tbody></table>
<p><strong>ä¸ºä»€ä¹ˆé€‰æ‹©SoulX-Podcastï¼Ÿ</strong></p>
<p>ç›¸æ¯”ä¼ ç»ŸTTSå’Œå…¶ä»–å¯¹è¯å¼TTSç³»ç»Ÿï¼ŒSoulX-Podcastä¸“ä¸ºæ’­å®¢é£æ ¼çš„å¤šè½®ã€å¤šè¯´è¯äººå¯¹è¯è€Œè®¾è®¡ï¼Œæ”¯æŒè·¨æ–¹è¨€é›¶æ ·æœ¬è¯­éŸ³å…‹éš†å’Œå‰¯è¯­è¨€æ§åˆ¶ï¼Œç”Ÿæˆçš„è¯­éŸ³æ›´è‡ªç„¶ã€æ›´çœŸå®ï¼Œæ˜¯æ’­å®¢å†…å®¹ç”Ÿæˆå’Œé«˜è´¨é‡å¯¹è¯å¼è¯­éŸ³åˆæˆçš„ç†æƒ³é€‰æ‹©ã€‚</p>
<hr/>
<h2 data-id="heading-13">é¡¹ç›®è¯¦ç»†å‰–æ</h2>
<h3 data-id="heading-14">æ¶æ„è®¾è®¡</h3>
<p>SoulX-Podcasté‡‡ç”¨<strong>åŸºäºTransformerçš„ç”Ÿæˆå¼æ¶æ„</strong>ï¼Œä¸“é—¨é’ˆå¯¹å¤šè½®ã€å¤šè¯´è¯äººå¯¹è¯å¼è¯­éŸ³ç”Ÿæˆè¿›è¡Œäº†ä¼˜åŒ–ã€‚</p>
<h4 data-id="heading-15">æ ¸å¿ƒæ¶æ„</h4>
<pre><code class="hljs language-sql" lang="sql">SoulX<span class="hljs-operator">-</span>Podcast <span class="hljs-keyword">System</span>
â”œâ”€â”€ Text Processingï¼ˆæ–‡æœ¬å¤„ç†ï¼‰
â”‚   â”œâ”€â”€ å¤šè¯´è¯äººå¯¹è¯è§£æ
â”‚   â”œâ”€â”€ å‰¯è¯­è¨€æ ‡ç­¾è¯†åˆ«
â”‚   â”œâ”€â”€ ä¸Šä¸‹æ–‡ç†è§£
â”‚   â””â”€â”€ å¤šè¯­è¨€å¤„ç†
â”œâ”€â”€ Voice Cloningï¼ˆè¯­éŸ³å…‹éš†ï¼‰
â”‚   â”œâ”€â”€ å‚è€ƒéŸ³é¢‘ç¼–ç 
â”‚   â”œâ”€â”€ è¯´è¯äººç‰¹å¾æå–
â”‚   â”œâ”€â”€ è·¨æ–¹è¨€ç‰¹å¾è¿ç§»
â”‚   â””â”€â”€ é›¶æ ·æœ¬å…‹éš†
â”œâ”€â”€ Speech Generationï¼ˆè¯­éŸ³ç”Ÿæˆï¼‰
â”‚   â”œâ”€â”€ å¤šè½®å¯¹è¯ç”Ÿæˆ
â”‚   â”œâ”€â”€ å‰¯è¯­è¨€äº‹ä»¶ç”Ÿæˆ
â”‚   â”œâ”€â”€ ä¸Šä¸‹æ–‡è¿è´¯æ€§ä¿æŒ
â”‚   â””â”€â”€ é«˜è´¨é‡éŸ³é¢‘åˆæˆ
â””â”€â”€ Model Architectureï¼ˆæ¨¡å‹æ¶æ„ï¼‰
    â”œâ”€â”€ Transformer Encoder
    â”œâ”€â”€ Multi<span class="hljs-operator">-</span>Speaker Attention
    â”œâ”€â”€ Dialect<span class="hljs-operator">-</span>Aware <span class="hljs-keyword">Module</span>
    â””â”€â”€ Paralinguistic Control <span class="hljs-keyword">Module</span>
</code></pre>
<h4 data-id="heading-16">å¤šè½®å¯¹è¯ç”Ÿæˆ</h4>
<p>SoulX-Podcastçš„æ ¸å¿ƒåˆ›æ–°åœ¨äº<strong>å¤šè½®å¯¹è¯çš„ä¸Šä¸‹æ–‡ç†è§£</strong>ï¼š</p>
<p><strong>å·¥ä½œæµç¨‹</strong>ï¼š</p>
<ol>
<li>è§£æå¤šè¯´è¯äººå¯¹è¯æ–‡æœ¬</li>
<li>æå–æ¯ä¸ªè¯´è¯äººçš„å‚è€ƒéŸ³é¢‘ç‰¹å¾</li>
<li>ç†è§£å¯¹è¯çš„ä¸Šä¸‹æ–‡å’Œè¿è´¯æ€§</li>
<li>ç”Ÿæˆä¿æŒä¸Šä¸‹æ–‡è¿è´¯æ€§çš„è¯­éŸ³</li>
<li>å¤„ç†è¯´è¯äººä¹‹é—´çš„è‡ªç„¶è¿‡æ¸¡</li>
</ol>
<p><strong>æŠ€æœ¯ç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li>ä½¿ç”¨Transformeræ¶æ„å¤„ç†é•¿åºåˆ—</li>
<li>å¤šè¯´è¯äººæ³¨æ„åŠ›æœºåˆ¶</li>
<li>ä¸Šä¸‹æ–‡çª—å£ç®¡ç†</li>
<li>å¯¹è¯è¿è´¯æ€§å»ºæ¨¡</li>
</ul>
<h4 data-id="heading-17">è·¨æ–¹è¨€é›¶æ ·æœ¬è¯­éŸ³å…‹éš†</h4>
<p>SoulX-Podcastå®ç°äº†<strong>è·¨æ–¹è¨€çš„é›¶æ ·æœ¬è¯­éŸ³å…‹éš†</strong>ï¼Œè¿™æ˜¯ä¸€ä¸ªé‡è¦çš„æŠ€æœ¯çªç ´ï¼š</p>
<p><strong>å·¥ä½œåŸç†</strong>ï¼š</p>
<ol>
<li>æå–å‚è€ƒéŸ³é¢‘çš„è¯´è¯äººç‰¹å¾ï¼ˆä¸ä¾èµ–æ–¹è¨€ï¼‰</li>
<li>è¯†åˆ«ç›®æ ‡æ–¹è¨€çš„è¯­è¨€ç‰¹å¾</li>
<li>å°†è¯´è¯äººç‰¹å¾è¿ç§»åˆ°ç›®æ ‡æ–¹è¨€</li>
<li>ç”Ÿæˆç›®æ ‡æ–¹è¨€çš„è¯­éŸ³</li>
</ol>
<p><strong>æ”¯æŒçš„æ–¹è¨€</strong>ï¼š</p>
<ul>
<li>å››å·è¯</li>
<li>æ²³å—è¯</li>
<li>ç²¤è¯­</li>
<li>å…¶ä»–ä¸­æ–‡æ–¹è¨€ï¼ˆé€šè¿‡æ¨¡å‹æ‰©å±•ï¼‰</li>
</ul>
<p><strong>ä¼˜åŠ¿</strong>ï¼š</p>
<ul>
<li>æ— éœ€é’ˆå¯¹æ¯ç§æ–¹è¨€å•ç‹¬è®­ç»ƒ</li>
<li>åªéœ€æä¾›å‚è€ƒéŸ³é¢‘å³å¯å…‹éš†</li>
<li>ä¿æŒè¯´è¯äººçš„è¯­éŸ³ç‰¹å¾</li>
<li>å‡†ç¡®è¿˜åŸæ–¹è¨€ç‰¹è‰²</li>
</ul>
<h4 data-id="heading-18">å‰¯è¯­è¨€æ§åˆ¶</h4>
<p>SoulX-Podcastæ”¯æŒå¤šç§<strong>å‰¯è¯­è¨€äº‹ä»¶</strong>ï¼Œå¢å¼ºè¯­éŸ³çš„çœŸå®æ„Ÿï¼š</p>
<p><strong>æ”¯æŒçš„å‰¯è¯­è¨€æ ‡ç­¾</strong>ï¼š</p>
<ul>
<li><code>&lt;|laughter|&gt;</code>ï¼šç¬‘å£°</li>
<li><code>&lt;|sigh|&gt;</code>ï¼šå¹æ¯</li>
<li><code>&lt;|breathing|&gt;</code>ï¼šå‘¼å¸å£°</li>
<li><code>&lt;|coughing|&gt;</code>ï¼šå’³å—½å£°</li>
<li><code>&lt;|throat_clearing|&gt;</code>ï¼šæ¸…å—“å£°</li>
</ul>
<p><strong>å®ç°æ–¹å¼</strong>ï¼š</p>
<ol>
<li>åœ¨æ–‡æœ¬ä¸­æ’å…¥å‰¯è¯­è¨€æ ‡ç­¾</li>
<li>æ¨¡å‹è¯†åˆ«æ ‡ç­¾å¹¶ç”Ÿæˆå¯¹åº”çš„éŸ³é¢‘äº‹ä»¶</li>
<li>è‡ªç„¶èå…¥è¯­éŸ³æµä¸­</li>
<li>ä¿æŒè¯­éŸ³çš„è¿è´¯æ€§</li>
</ol>
<p><strong>åº”ç”¨ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># åœ¨æ–‡æœ¬ä¸­ä½¿ç”¨å‰¯è¯­è¨€æ ‡ç­¾</span>
text = <span class="hljs-string">"ä»Šå¤©å¤©æ°”çœŸå¥½ï¼&lt;|laughter|&gt;æˆ‘ä»¬å‡ºå»èµ°èµ°å§ã€‚&lt;|sigh|&gt;ä¸è¿‡è¦æ³¨æ„é˜²æ™’ã€‚"</span>

<span class="hljs-comment"># æ¨¡å‹ä¼šè‡ªåŠ¨è¯†åˆ«å¹¶ç”Ÿæˆå¯¹åº”çš„å‰¯è¯­è¨€äº‹ä»¶</span>
audio = model.generate(text, reference_audio=<span class="hljs-string">"speaker.wav"</span>)
</code></pre>
<h4 data-id="heading-19">æ¨¡å‹æ¶æ„</h4>
<p>SoulX-PodcaståŸºäº<strong>1.7Bå‚æ•°çš„Transformeræ¨¡å‹</strong>ï¼š</p>
<p><strong>æ¨¡å‹ç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li>å‚æ•°é‡ï¼š1.7Bï¼ˆåŸºç¡€æ¨¡å‹å’Œæ–¹è¨€æ¨¡å‹ï¼‰</li>
<li>æ¶æ„ï¼šåŸºäºTransformerçš„ç”Ÿæˆå¼æ¨¡å‹</li>
<li>è®­ç»ƒæ•°æ®ï¼šå¤§è§„æ¨¡å¤šè¯´è¯äººå¯¹è¯æ•°æ®</li>
<li>ä¼˜åŒ–ï¼šé’ˆå¯¹å¤šè½®å¯¹è¯å’Œæ–¹è¨€æ”¯æŒä¼˜åŒ–</li>
</ul>
<p><strong>ä¸¤ä¸ªç‰ˆæœ¬</strong>ï¼š</p>
<ol>
<li><strong>SoulX-Podcast-1.7B</strong>ï¼šåŸºç¡€æ¨¡å‹ï¼Œæ”¯æŒå¤šè½®å¯¹è¯å’Œå‰¯è¯­è¨€æ§åˆ¶</li>
<li><strong>SoulX-Podcast-1.7B-dialect</strong>ï¼šæ–¹è¨€æ¨¡å‹ï¼Œé¢å¤–æ”¯æŒè·¨æ–¹è¨€é›¶æ ·æœ¬å…‹éš†</li>
</ol>
<h3 data-id="heading-20">å…³é”®æŠ€æœ¯å®ç°</h3>
<h4 data-id="heading-21">å¤šè¯´è¯äººå¯¹è¯å¤„ç†</h4>
<p>SoulX-Podcasté€šè¿‡ä»¥ä¸‹æ–¹å¼å¤„ç†å¤šè¯´è¯äººå¯¹è¯ï¼š</p>
<ol>
<li><strong>è¯´è¯äººæ ‡è¯†</strong>ï¼šä¸ºæ¯ä¸ªè¯´è¯äººåˆ†é…å”¯ä¸€æ ‡è¯†</li>
<li><strong>å‚è€ƒéŸ³é¢‘ç®¡ç†</strong>ï¼šä¸ºæ¯ä¸ªè¯´è¯äººæä¾›å‚è€ƒéŸ³é¢‘</li>
<li><strong>ä¸Šä¸‹æ–‡ç®¡ç†</strong>ï¼šç»´æŠ¤å¤šè½®å¯¹è¯çš„ä¸Šä¸‹æ–‡ä¿¡æ¯</li>
<li><strong>ç‰¹å¾æå–</strong>ï¼šä»å‚è€ƒéŸ³é¢‘ä¸­æå–è¯´è¯äººç‰¹å¾</li>
<li><strong>å¯¹è¯ç”Ÿæˆ</strong>ï¼šç”Ÿæˆä¿æŒè¯´è¯äººç‰¹å¾çš„å¯¹è¯è¯­éŸ³</li>
</ol>
<h4 data-id="heading-22">é›¶æ ·æœ¬è¯­éŸ³å…‹éš†</h4>
<p>é›¶æ ·æœ¬è¯­éŸ³å…‹éš†çš„å®ç°ï¼š</p>
<ol>
<li><strong>ç‰¹å¾è§£è€¦</strong>ï¼šå°†è¯´è¯äººç‰¹å¾å’Œè¯­è¨€ç‰¹å¾è§£è€¦</li>
<li><strong>ç‰¹å¾æå–</strong>ï¼šä»å‚è€ƒéŸ³é¢‘ä¸­æå–è¯´è¯äººç‰¹å¾</li>
<li><strong>ç‰¹å¾è¿ç§»</strong>ï¼šå°†è¯´è¯äººç‰¹å¾è¿ç§»åˆ°ç›®æ ‡è¯­è¨€/æ–¹è¨€</li>
<li><strong>è¯­éŸ³ç”Ÿæˆ</strong>ï¼šåŸºäºè¿ç§»åçš„ç‰¹å¾ç”Ÿæˆè¯­éŸ³</li>
</ol>
<h4 data-id="heading-23">å‰¯è¯­è¨€äº‹ä»¶ç”Ÿæˆ</h4>
<p>å‰¯è¯­è¨€äº‹ä»¶çš„ç”Ÿæˆæ–¹å¼ï¼š</p>
<ol>
<li><strong>æ ‡ç­¾è¯†åˆ«</strong>ï¼šè¯†åˆ«æ–‡æœ¬ä¸­çš„å‰¯è¯­è¨€æ ‡ç­¾</li>
<li><strong>äº‹ä»¶å»ºæ¨¡</strong>ï¼šä¸ºæ¯ç§å‰¯è¯­è¨€äº‹ä»¶å»ºç«‹æ¨¡å‹</li>
<li><strong>è‡ªç„¶èå…¥</strong>ï¼šå°†å‰¯è¯­è¨€äº‹ä»¶è‡ªç„¶èå…¥è¯­éŸ³æµ</li>
<li><strong>æ—¶åºå¯¹é½</strong>ï¼šç¡®ä¿å‰¯è¯­è¨€äº‹ä»¶åœ¨æ­£ç¡®çš„æ—¶é—´ç‚¹å‡ºç°</li>
</ol>
<h3 data-id="heading-24">ä½¿ç”¨æ–¹å¼</h3>
<h4 data-id="heading-25">WebUIä½¿ç”¨</h4>
<p>SoulX-Podcastæä¾›äº†å‹å¥½çš„WebUIç•Œé¢ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å¯åŠ¨WebUIï¼ˆåŸºç¡€æ¨¡å‹ï¼‰</span>
python3 webui.py --model_path pretrained_models/SoulX-Podcast-1.7B

<span class="hljs-comment"># å¯åŠ¨WebUIï¼ˆæ–¹è¨€æ¨¡å‹ï¼‰</span>
python3 webui.py --model_path pretrained_models/SoulX-Podcast-1.7B-dialect
</code></pre>
<p><strong>WebUIåŠŸèƒ½</strong>ï¼š</p>
<ul>
<li>æ–‡æœ¬è¾“å…¥å’Œç¼–è¾‘</li>
<li>å‚è€ƒéŸ³é¢‘ä¸Šä¼ </li>
<li>å‰¯è¯­è¨€æ ‡ç­¾æ’å…¥</li>
<li>å®æ—¶é¢„è§ˆå’Œè°ƒæ•´</li>
<li>éŸ³é¢‘å¯¼å‡º</li>
</ul>
<h4 data-id="heading-26">APIä½¿ç”¨</h4>
<p>SoulX-Podcastæä¾›APIæ¥å£ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å¯åŠ¨APIæœåŠ¡</span>
python3 run_api.py --model_path pretrained_models/SoulX-Podcast-1.7B
</code></pre>
<p><strong>APIç«¯ç‚¹</strong>ï¼š</p>
<ul>
<li><code>/generate</code>ï¼šç”Ÿæˆå•è¯´è¯äººè¯­éŸ³</li>
<li><code>/generate_dialogue</code>ï¼šç”Ÿæˆå¤šè¯´è¯äººå¯¹è¯</li>
<li><code>/clone_voice</code>ï¼šé›¶æ ·æœ¬è¯­éŸ³å…‹éš†</li>
</ul>
<h4 data-id="heading-27">vLLMåŠ é€Ÿ</h4>
<p>SoulX-Podcastæ”¯æŒvLLMåŠ é€Ÿï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ„å»ºDockeré•œåƒ</span>
<span class="hljs-built_in">cd</span> runtime/vllm
docker build -t soulxpodcast:v1.0 .

<span class="hljs-comment"># è¿è¡Œå®¹å™¨</span>
docker run -it --runtime=nvidia --name soulxpodcast \
  -v /mnt/data:/mnt/data -p 7860:7860 soulxpodcast:v1.0
</code></pre>
<p><strong>ä¼˜åŠ¿</strong>ï¼š</p>
<ul>
<li>æ›´å¿«çš„æ¨ç†é€Ÿåº¦</li>
<li>æ›´å¥½çš„GPUåˆ©ç”¨ç‡</li>
<li>æ”¯æŒæ‰¹é‡å¤„ç†</li>
<li>æ˜“äºéƒ¨ç½²å’Œæ‰©å±•</li>
</ul>
<h3 data-id="heading-28">ä¸å…¶ä»–é¡¹ç›®çš„å¯¹æ¯”</h3>
<h4 data-id="heading-29">ä¸Supertonicå¯¹æ¯”</h4>













































<table><thead><tr><th align="left">ç‰¹æ€§</th><th align="left">SoulX-Podcast</th><th align="left">Supertonic</th></tr></thead><tbody><tr><td align="left"><strong>ä¸»è¦ç”¨é€”</strong></td><td align="left">æ’­å®¢é£æ ¼å¤šè½®å¯¹è¯</td><td align="left">è®¾å¤‡ç«¯å•è¯´è¯äººTTS</td></tr><tr><td align="left"><strong>å¤šè¯´è¯äºº</strong></td><td align="left">âœ… åŸç”Ÿæ”¯æŒ</td><td align="left">âŒ ä¸æ”¯æŒ</td></tr><tr><td align="left"><strong>å¤šè½®å¯¹è¯</strong></td><td align="left">âœ… ä¸Šä¸‹æ–‡è¿è´¯</td><td align="left">âŒ å•è½®</td></tr><tr><td align="left"><strong>æ–¹è¨€æ”¯æŒ</strong></td><td align="left">âœ… é›¶æ ·æœ¬è·¨æ–¹è¨€</td><td align="left">âš ï¸ æœ‰é™</td></tr><tr><td align="left"><strong>å‰¯è¯­è¨€æ§åˆ¶</strong></td><td align="left">âœ… å¤šç§å‰¯è¯­è¨€</td><td align="left">âŒ ä¸æ”¯æŒ</td></tr><tr><td align="left"><strong>éƒ¨ç½²æ–¹å¼</strong></td><td align="left">äº‘ç«¯/æœ¬åœ°</td><td align="left">è®¾å¤‡ç«¯</td></tr><tr><td align="left"><strong>æ€§èƒ½</strong></td><td align="left">é«˜è´¨é‡</td><td align="left">æé€Ÿ</td></tr></tbody></table>
<p><strong>é€‰æ‹©å»ºè®®</strong>ï¼š</p>
<ul>
<li>éœ€è¦æ’­å®¢é£æ ¼å¤šè½®å¯¹è¯ â†’ SoulX-Podcast</li>
<li>éœ€è¦è®¾å¤‡ç«¯æé€ŸTTS â†’ Supertonic</li>
</ul>
<h4 data-id="heading-30">ä¸å…¶ä»–å¯¹è¯å¼TTSå¯¹æ¯”</h4>
<p>SoulX-Podcastç›¸æ¯”å…¶ä»–å¯¹è¯å¼TTSç³»ç»Ÿçš„ä¼˜åŠ¿ï¼š</p>
<ol>
<li><strong>ä¸“ä¸ºæ’­å®¢è®¾è®¡</strong>ï¼šä¸“é—¨é’ˆå¯¹æ’­å®¢é£æ ¼çš„å¤šè½®å¯¹è¯ä¼˜åŒ–</li>
<li><strong>è·¨æ–¹è¨€æ”¯æŒ</strong>ï¼šç‹¬ç‰¹çš„è·¨æ–¹è¨€é›¶æ ·æœ¬å…‹éš†èƒ½åŠ›</li>
<li><strong>å‰¯è¯­è¨€æ§åˆ¶</strong>ï¼šä¸°å¯Œçš„å‰¯è¯­è¨€äº‹ä»¶æ”¯æŒ</li>
<li><strong>é«˜è´¨é‡ç”Ÿæˆ</strong>ï¼šæ’­å®¢çº§åˆ«çš„è¯­éŸ³è´¨é‡</li>
<li><strong>æ˜“äºä½¿ç”¨</strong>ï¼šå‹å¥½çš„WebUIå’ŒAPIæ¥å£</li>
</ol>
<hr/>
<h2 data-id="heading-31">é¡¹ç›®åœ°å€ä¸èµ„æº</h2>
<h3 data-id="heading-32">å®˜æ–¹èµ„æº</h3>
<ul>
<li>ğŸŒŸ <strong>GitHub</strong>: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FSoul-AILab%2FSoulX-Podcast" target="_blank" title="https://github.com/Soul-AILab/SoulX-Podcast" ref="nofollow noopener noreferrer">github.com/Soul-AILab/â€¦</a></li>
<li>ğŸŒ <strong>Demo</strong>: <a href="https://link.juejin.cn?target=https%3A%2F%2Fhuggingface.co%2Fspaces%2FSoul-AILab%2FSoulX-Podcast" target="_blank" title="https://huggingface.co/spaces/Soul-AILab/SoulX-Podcast" ref="nofollow noopener noreferrer">Hugging Face Spaces</a></li>
<li>ğŸ“¦ <strong>æ¨¡å‹</strong>: <a href="https://link.juejin.cn?target=https%3A%2F%2Fhuggingface.co%2FSoul-AILab%2FSoulX-Podcast-1.7B" target="_blank" title="https://huggingface.co/Soul-AILab/SoulX-Podcast-1.7B" ref="nofollow noopener noreferrer">SoulX-Podcast-1.7B</a> | <a href="https://link.juejin.cn?target=https%3A%2F%2Fhuggingface.co%2FSoul-AILab%2FSoulX-Podcast-1.7B-dialect" target="_blank" title="https://huggingface.co/Soul-AILab/SoulX-Podcast-1.7B-dialect" ref="nofollow noopener noreferrer">SoulX-Podcast-1.7B-dialect</a></li>
<li>ğŸ“„ <strong>è®ºæ–‡</strong>: <a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2510.23541" target="_blank" title="https://arxiv.org/abs/2510.23541" ref="nofollow noopener noreferrer">arXiv:2510.23541</a></li>
</ul>
<h3 data-id="heading-33">é€‚ç”¨äººç¾¤</h3>
<p><strong>SoulX-Podcastç‰¹åˆ«é€‚åˆ</strong>ï¼šéœ€è¦ç”Ÿæˆæ’­å®¢å†…å®¹çš„åˆ›ä½œè€…ã€éœ€è¦å¤šè¯´è¯äººå¯¹è¯å¼è¯­éŸ³çš„åº”ç”¨å¼€å‘è€…ã€éœ€è¦æ–¹è¨€è¯­éŸ³åˆæˆçš„å¼€å‘è€…ã€éœ€è¦é«˜è´¨é‡ã€è‡ªç„¶è¯­éŸ³åˆæˆçš„AIåº”ç”¨å¼€å‘è€…ã€å¯¹è¯­éŸ³åˆæˆè´¨é‡æœ‰é«˜è¦æ±‚çš„å¼€å‘è€…ã€éœ€è¦å‰¯è¯­è¨€æ§åˆ¶çš„åº”ç”¨å¼€å‘è€…ã€‚</p>
<p><strong>ä¸é€‚åˆ</strong>ï¼šåªéœ€è¦ç®€å•å•è¯´è¯äººTTSçš„ç”¨æˆ·ã€å¯¹æ¨¡å‹å¤§å°æœ‰ä¸¥æ ¼é™åˆ¶çš„è®¾å¤‡ç«¯åº”ç”¨ã€ä¸éœ€è¦å¤šè½®å¯¹è¯çš„åœºæ™¯ã€‚</p>
<hr/>
<p><em>æ¬¢è¿æ¥æˆ‘ä¸­çš„<a href="https://link.juejin.cn?target=https%3A%2F%2Fhome.wonlab.top" target="_blank" title="https://home.wonlab.top" ref="nofollow noopener noreferrer">ä¸ªäººä¸»é¡µ</a>æ‰¾åˆ°æ›´å¤šæœ‰ç”¨çš„çŸ¥è¯†å’Œæœ‰è¶£çš„äº§å“</em></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[AI Agent æ¡†æ¶æ¢ç§˜ï¼šæ‹†è§£ OpenHandsï¼ˆ6ï¼‰--- äº‹ä»¶ç³»ç»Ÿ]]></title>    <link>https://juejin.cn/post/7602776926328111158</link>    <guid>https://juejin.cn/post/7602776926328111158</guid>    <pubDate>2026-02-04T13:16:26.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602776926328111158" data-draft-id="7601169987412197414" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="AI Agent æ¡†æ¶æ¢ç§˜ï¼šæ‹†è§£ OpenHandsï¼ˆ6ï¼‰--- äº‹ä»¶ç³»ç»Ÿ"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,æœºå™¨å­¦ä¹ "/> <meta itemprop="datePublished" content="2026-02-04T13:16:26.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç½—è¥¿çš„æ€è€ƒ"/> <meta itemprop="url" content="https://juejin.cn/user/351470467691175"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            AI Agent æ¡†æ¶æ¢ç§˜ï¼šæ‹†è§£ OpenHandsï¼ˆ6ï¼‰--- äº‹ä»¶ç³»ç»Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/351470467691175/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç½—è¥¿çš„æ€è€ƒ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T13:16:26.000Z" title="Wed Feb 04 2026 13:16:26 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»21åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">AI Agent æ¡†æ¶æ¢ç§˜ï¼šæ‹†è§£ OpenHandsï¼ˆ6ï¼‰--- äº‹ä»¶ç³»ç»Ÿ</h2>
<ul>
<li>
<p><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">0x00 æ¦‚è¦</a></p>
</li>
<li>
<p><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">0x01 EventStream</a></p>
<ul>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">1.1 åŠŸèƒ½</a></li>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">1.2 å®ç°</a></li>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">1.3 è®¢é˜…</a></li>
</ul>
</li>
<li>
<p><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">0x02 Event</a></p>
<ul>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">2.1 Event</a></li>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">2.2 Action</a></li>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">2.3 Observation</a></li>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">2.4 Environment</a></li>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">2.5 AgentThinkAction</a></li>
</ul>
</li>
<li>
<p><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">0xFF å‚è€ƒ</a></p>
</li>
</ul>
<h3 data-id="heading-1">0x00 æ¦‚è¦</h3>
<p>å¦‚æœè¯´ ReAct èŒƒå¼æ˜¯ä»£ç†çš„ â€œå¤§è„‘æ€ç»´æ¨¡å¼â€ï¼Œé‚£ä¹ˆäº‹ä»¶é©±åŠ¨æ¶æ„å°±æ˜¯Agentç³»ç»Ÿçš„ â€œç¥ç»ç½‘ç»œâ€ï¼Œå®ƒä½¿ç”¨äº†å‘å¸ƒ-è®¢é˜…æ¨¡å¼ï¼Œä»¥å»ä¸­å¿ƒåŒ–çš„æ–¹å¼åè°ƒå„ç»„ä»¶é«˜æ•ˆè¿ä½œï¼Œå…è®¸ç»„ä»¶ä¹‹é—´çš„æ¾è€¦åˆé€šä¿¡ã€‚æ•´ä¸ªç³»ç»Ÿçš„æ ¸å¿ƒå¹¶éåƒµç¡¬çš„åŒæ­¥è°ƒç”¨ï¼Œè€Œæ˜¯ä¸€æ¡æ‰¿è½½æ‰€æœ‰å…³é”®æ´»åŠ¨çš„ â€œäº‹ä»¶æµâ€ï¼Œç³»ç»Ÿä¸­çš„å„ç±»æ ¸å¿ƒæ“ä½œéƒ½ä¼šè¢«æŠ½è±¡ä¸ºæ ‡å‡†åŒ–çš„ â€œäº‹ä»¶â€ã€‚</p>
<p>OpenHands ä¸­ï¼ŒEventStream è´Ÿè´£ç®¡ç†sessionä¸­çš„è§¦å‘çš„äº‹ä»¶ï¼Œä»¥åŠäº‹ä»¶æ³¨å†Œå‡½æ•°çš„å›è°ƒé¡¹ç›®ä¸­æ³¨å†Œäº‹ä»¶å›è°ƒå‡½æ•°ï¼Œæ¯”å¦‚ï¼š</p>
<ul>
<li><code>Runtime</code>æ³¨å†Œï¼šåªæ¥æ”¶<code>Action</code>çš„äº‹ä»¶ä¸runtimeè¿›è¡Œäº¤äº’</li>
<li><code>AgentController</code>æ³¨å†Œï¼Œæ ¹æ®äº‹ä»¶æ›´æ–°AgentçŠ¶æ€</li>
<li><code>main</code>ï¼šå‘½ä»¤è¡Œæ–¹å¼æ‰§è¡Œagentæ•ˆæœè¯„ä¼°æ—¶ä½¿ç”¨ï¼Œæ¥æ”¶agentçŠ¶æ€å˜æ›´äº‹ä»¶</li>
</ul>
<p>å› ä¸ºæœ¬ç³»åˆ—å€Ÿé‰´çš„æ–‡ç« è¿‡å¤šï¼Œå¯èƒ½åœ¨å‚è€ƒæ–‡çŒ®ä¸­æœ‰é—æ¼çš„æ–‡ç« ï¼Œå¦‚æœæœ‰ï¼Œè¿˜è¯·å¤§å®¶æŒ‡å‡ºã€‚</p>
<h3 data-id="heading-2">0x01 EventStream</h3>
<p>è¦æŒæ¡æ•´ä¸ªç¨‹åºçš„è¿ä½œï¼Œé¦–å…ˆè¦ç†è§£äº‹ä»¶ç³»ç»Ÿçš„ï¼Œå®ƒå°±åƒæ˜¯ç¨‹åºä¸­çš„ä¿¡æ¯é«˜é€Ÿå…¬è·¯ï¼Œå„ä¸ªéƒ¨åˆ†é€šè¿‡å®ƒæ¥äº¤æ¢ä¿¡æ¯ã€‚OpenHands äº‹ä»¶ç³»ç»Ÿçš„æ ¸å¿ƒæ˜¯<code>EventStream</code>ç±»ï¼ˆäº‹ä»¶æµç³»ç»Ÿï¼‰ï¼Œè¿™æ˜¯ä¸€ä¸ªä¸“é—¨å¤„ç†äº‹ä»¶çš„ç³»ç»Ÿï¼Œå®ƒçš„æ ¸å¿ƒä½œç”¨æ˜¯ç»´æŠ¤äº†äº‹ä»¶é˜Ÿåˆ—å¹¶æ”¯æŒäº‹ä»¶çš„å‘å¸ƒå’Œè®¢é˜…ï¼Œç®¡ç†å’Œåˆ†å‘äº‹ä»¶ã€‚è¿™ç§äº‹ä»¶é©±åŠ¨çš„æ¶æ„ä½¿OpenHandsèƒ½å¤Ÿå¤„ç†å¼‚æ­¥æ“ä½œï¼Œå¹¶æ”¯æŒå¤šAgentä¹‹é—´çš„åä½œã€‚</p>
<p>OpenHands çš„ä»£ç å®ç°ç›¸å¯¹ç®€å•ï¼Œå…³é”®åœ¨äºç†è§£å…¶å·¥ä½œåŸç†ã€‚ä¸»è¦æ­¥éª¤åŒ…æ‹¬ï¼š</p>
<ul>
<li>å¯åŠ¨ä¸€ä¸ªå¾ªç¯è¿è¡Œçš„çº¿ç¨‹ï¼Œè¿™ä¸ªçº¿ç¨‹è´Ÿè´£ä»äº‹ä»¶é˜Ÿåˆ—ä¸­è¯»å–äº‹ä»¶ï¼Œå¹¶å°†å®ƒä»¬é€ä¸€å‘é€åˆ°å„ä¸ªè®¢é˜…æ¨¡å—çš„å¤„ç†é˜Ÿåˆ—ä¸­ã€‚</li>
<li>å½“æ¨¡å—éœ€è¦è®¢é˜…äº‹ä»¶æ—¶ï¼Œå®ƒä¼šè°ƒç”¨ä¸€ä¸ªè®¢é˜…å‡½æ•°<code>subscribe</code>ï¼Œè¿™æ ·äº‹ä»¶æµå°±ä¼šä¸ºè¯¥æ¨¡å—ç»´æŠ¤ä¸€ä¸ªçº¿ç¨‹æ± ï¼Œæ‰€æœ‰å‘é€åˆ°è¯¥æ¨¡å—çš„äº‹ä»¶éƒ½ä¼šè¢«ç›¸åº”çš„å›è°ƒå‡½æ•°å¤„ç†ã€‚</li>
<li>ä»»ä½•åœ°æ–¹éœ€è¦å‘äº‹ä»¶æµä¸­æ·»åŠ äº‹ä»¶æ—¶ï¼Œéƒ½ä¼šè°ƒç”¨ä¸€ä¸ªæ·»åŠ äº‹ä»¶çš„å‡½æ•°<code>add_event</code>ã€‚</li>
</ul>
<p>äº‹ä»¶æµçš„é€»è¾‘è™½ç„¶ç®€å•ï¼Œä½†ç¡®ä¿äº†ç¨‹åºå„éƒ¨åˆ†ä¹‹é—´çš„ç‹¬ç«‹æ€§å’Œé€šä¿¡çš„ä¸€è‡´æ€§ã€‚è¿™é‡Œçš„æ¶ˆæ¯éƒ½æ˜¯äº‹ä»¶ï¼Œåˆ†ä¸ºä¸¤ç§ç±»å‹ï¼š</p>
<ul>
<li><code>Action</code>ï¼šæŒ‡éœ€è¦æ‰§è¡Œçš„ä»»åŠ¡ã€‚</li>
<li><code>Observation</code>ï¼šæŒ‡ç¯å¢ƒå¯¹ä»»åŠ¡æ‰§è¡Œç»“æœçš„å›åº”ã€‚</li>
</ul>
<p>ä¸‹å›¾å±•ç¤ºäº† OpenHands ä¸­ Agent ä¸ç¯å¢ƒäº¤äº’çš„æ ¸å¿ƒæœºåˆ¶ï¼šAgent é€šè¿‡æ‰§è¡ŒåŠ¨ä½œå½±å“ç¯å¢ƒï¼Œç¯å¢ƒé€šè¿‡è§‚å¯Ÿç»“æœåé¦ˆç»™ Agentï¼ŒAgent åŸºäºè¿™äº›åé¦ˆåšå‡ºä¸‹ä¸€æ­¥å†³ç­–ã€‚ï¼š</p>
<ul>
<li>Agent å†³å®šæ‰§è¡Œä¸€ä¸ªåŠ¨ä½œï¼Œé€šè¿‡AgentControllerå’ŒEventStreamä¼ åˆ°äº†Runtimeã€‚</li>
<li>Runtime åœ¨ç¯å¢ƒä¸­æ‰§è¡Œè¯¥åŠ¨ä½œ</li>
<li>ç¯å¢ƒäº§ç”Ÿä¸€ä¸ªè§‚å¯Ÿç»“æœä½œä¸ºæ‰§è¡Œç»“æœ</li>
<li>Runtime æ•è·è¿™ä¸ªè§‚å¯Ÿç»“æœå¹¶å‘é€åˆ° EventStreamï¼ˆäº‹ä»¶æµï¼‰</li>
<li>EventStream å­˜å‚¨è§‚å¯Ÿç»“æœï¼Œç„¶åé€šè¿‡AgentControlleré€šçŸ¥Agent</li>
<li>Agent è·å–æ›´æ–°åçš„å†å²è®°å½•ï¼ˆåŒ…æ‹¬æ–°çš„è§‚å¯Ÿç»“æœï¼‰</li>
<li>Agent ä½¿ç”¨è§‚å¯Ÿç»“æœåšå‡ºä¸‹ä¸€ä¸ªå†³ç­–</li>
<li>å¾ªç¯é‡å¤è¿›è¡Œ</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0b52fd2a34a24f48b174aab45bb51d9e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg572X6KW_55qE5oCd6ICD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770815786&amp;x-signature=u3Vrp55ied7EvCMISeJ8U9gmpnw%3D" alt="OpenHands-EventStream" loading="lazy"/></p>
<p>OpenHands-EventStream</p>
<h4 data-id="heading-3">1.1 åŠŸèƒ½</h4>
<p>EventStream çš„åŠŸèƒ½å¦‚ä¸‹ï¼š</p>
<ul>
<li>
<p>äº‹ä»¶è®¢é˜…ä¸é€šçŸ¥æœºåˆ¶ã€‚</p>
<ul>
<li>å¤šè®¢é˜…è€…æ”¯æŒï¼šé€šè¿‡EventStreamSubscriberæšä¸¾å®šä¹‰äº†å¤šç§è®¢é˜…è€…ç±»å‹ã€‚</li>
<li>çµæ´»è®¢é˜…æœºåˆ¶ï¼šä½¿ç”¨ subscribe å’Œ unscribe æ–¹æ³•ç®¡ç†è®¢é˜…å…³ç³»ã€‚</li>
<li>å¤šå›è°ƒæ”¯æŒï¼šæ¯ä¸ªè®¢é˜…è€…å¯ä»¥æ³¨å†Œå¤šä¸ªå›è°ƒå‡½æ•°ï¼Œé€šè¿‡callback_idè¿›è¡ŒåŒºåˆ†ã€‚</li>
</ul>
</li>
<li>
<p>äº‹ä»¶å¤„ç†ä¸åˆ†å‘</p>
<ul>
<li>å¼‚æ­¥é˜Ÿåˆ—å¤„ç†ï¼šä½¿ç”¨ queue.Queueå’Œç‹¬ç«‹çº¿ç¨‹å¤„ç†äº‹ä»¶é˜Ÿåˆ—ã€‚</li>
<li>çº¿ç¨‹æ± æ‰§è¡Œï¼šä¸ºæ¯ä¸ªè®¢é˜…è€…çš„å›è°ƒå‡½æ•°åˆ›å»ºç‹¬ç«‹çš„çº¿ç¨‹æ± ï¼Œé¿å…é˜»å¡ã€‚</li>
<li>é¡ºåºåˆ†å‘ï¼šæŒ‰ç…§è®¢é˜…è€…IDçš„æ’åºé¡ºåºå°†äº‹ä»¶åˆ†å‘ç»™è®¢é˜…è€…ã€‚</li>
</ul>
</li>
<li>
<p>äº‹ä»¶å­˜å‚¨ä¸æŒä¹…åŒ–</p>
<ul>
<li>äº‹ä»¶IDç®¡ç†ï¼šä¸ºæ¯ä¸ªäº‹ä»¶åˆ†é…å”¯ä¸€IDå¹¶ç»´æŠ¤é€’å¢è®¡æ•°å™¨ã€‚</li>
<li>æ—¶é—´æˆ³è®°å½•ï¼šè‡ªåŠ¨ä¸ºäº‹ä»¶æ·»åŠ æ—¶é—´æˆ³ã€‚</li>
<li>æ–‡ä»¶å­˜å‚¨ï¼šå°†äº‹ä»¶ä»¥JSONæ ¼å¼æŒä¹…åŒ–åˆ°æ–‡ä»¶ç³»ç»Ÿã€‚</li>
<li>ç¼“å­˜é¡µé¢æœºåˆ¶ï¼šä½¿ç”¨é¡µé¢ç¼“å­˜æé«˜å¤§é‡äº‹ä»¶çš„è¯»å†™æ€§èƒ½ã€‚</li>
</ul>
</li>
<li>
<p>å·¥ä½œæµç¨‹ï¼š</p>
<ul>
<li>ç»„ä»¶é€šè¿‡subscribeæ–¹æ³•æ³¨å†Œä¸ºäº‹ä»¶è®¢é˜…è€…ã€‚</li>
<li>å½“æœ‰äº‹ä»¶å‘ç”Ÿæ—¶ï¼Œé€šè¿‡add_eventæ–¹æ³•æ·»åŠ åˆ°äº‹ä»¶æµã€‚</li>
<li>add_eventæ–¹æ³•å¤„ç†äº‹ä»¶IDåˆ†é…ï¼Œæ—¶é—´æˆ³è®¾ç½®ã€æŒä¹…åŒ–å­˜å‚¨ã€‚</li>
<li>äº‹ä»¶è¢«æ”¾å…¥å¤„ç†é˜Ÿåˆ—ï¼Œç”±ç‹¬ç«‹çº¿ç¨‹å¼‚æ­¥åˆ†å‘ã€‚</li>
<li>_process_queue åˆ†å‘æŒ‰ç…§é¡ºåºå°†äº‹ä»¶åˆ†å‘ç»™æ‰€æœ‰è®¢é˜…è€…çš„å›è°ƒå‡½æ•°ã€‚</li>
</ul>
</li>
</ul>
<p>è¿™ç§è®¾è®¡ä½¿EventStreamç§°ä¸ºç³»ç»Ÿä¸­æ ¸å¿ƒçš„äº‹ä»¶ä¸­æ¢ï¼Œå®ç°äº†ç»„ä»¶é—´çš„è§£è€¦å’Œå¼‚æ­¥é€šä¿¡ã€‚</p>
<h4 data-id="heading-4">1.2 å®ç°</h4>
<p>EventStream ç›¸å…³çš„ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span>Â <span class="hljs-title class_">EventStream</span>(<span class="hljs-title class_ inherited__">EventStore</span>):
Â Â Â Â secrets:Â <span class="hljs-built_in">dict</span>[<span class="hljs-built_in">str</span>,Â <span class="hljs-built_in">str</span>]
Â Â Â Â <span class="hljs-comment">#Â ForÂ eachÂ subscriberÂ ID,Â thereÂ isÂ aÂ mapÂ ofÂ callbackÂ functionsÂ -Â useful</span>
Â Â Â Â <span class="hljs-comment">#Â whenÂ thereÂ areÂ multipleÂ listeners</span>
Â Â Â Â _subscribers:Â <span class="hljs-built_in">dict</span>[<span class="hljs-built_in">str</span>,Â <span class="hljs-built_in">dict</span>[<span class="hljs-built_in">str</span>,Â <span class="hljs-type">Callable</span>]]
Â Â Â Â _lock:Â threading.Lock
Â Â Â Â _queue:Â queue.Queue[Event]
Â Â Â Â _queue_thread:Â threading.Thread
Â Â Â Â _queue_loop:Â asyncio.AbstractEventLoopÂ |Â <span class="hljs-literal">None</span>
Â Â Â Â _thread_pools:Â <span class="hljs-built_in">dict</span>[<span class="hljs-built_in">str</span>,Â <span class="hljs-built_in">dict</span>[<span class="hljs-built_in">str</span>,Â ThreadPoolExecutor]]
Â Â Â Â _thread_loops:Â <span class="hljs-built_in">dict</span>[<span class="hljs-built_in">str</span>,Â <span class="hljs-built_in">dict</span>[<span class="hljs-built_in">str</span>,Â asyncio.AbstractEventLoop]]
Â Â Â Â _write_page_cache:Â <span class="hljs-built_in">list</span>[<span class="hljs-built_in">dict</span>]

Â Â Â Â <span class="hljs-keyword">def</span>Â <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self,Â sid:Â <span class="hljs-built_in">str</span>,Â file_store:Â FileStore,Â user_id:Â <span class="hljs-built_in">str</span>Â |Â <span class="hljs-literal">None</span>Â =Â <span class="hljs-literal">None</span></span>):
Â Â Â Â Â Â Â Â <span class="hljs-built_in">super</span>().__init__(sid,Â file_store,Â user_id)
Â Â Â Â Â Â Â Â self._stop_flagÂ =Â threading.Event()
Â Â Â Â Â Â Â Â self._queue:Â queue.Queue[Event]Â =Â queue.Queue()
Â Â Â Â Â Â Â Â self._thread_poolsÂ =Â {}
Â Â Â Â Â Â Â Â self._thread_loopsÂ =Â {}
Â Â Â Â Â Â Â Â self._queue_loopÂ =Â <span class="hljs-literal">None</span>
Â Â Â Â Â Â Â Â self._queue_threadÂ =Â threading.Thread(target=self._run_queue_loop)
Â Â Â Â Â Â Â Â self._queue_thread.daemonÂ =Â <span class="hljs-literal">True</span>
Â Â Â Â Â Â Â Â self._queue_thread.start()
Â Â Â Â Â Â Â Â self._subscribersÂ =Â {}
Â Â Â Â Â Â Â Â self._lockÂ =Â threading.Lock()
Â Â Â Â Â Â Â Â self.secretsÂ =Â {}
Â Â Â Â Â Â Â Â self._write_page_cacheÂ =Â []

Â Â Â Â <span class="hljs-keyword">def</span>Â <span class="hljs-title function_">_init_thread_loop</span>(<span class="hljs-params">self,Â subscriber_id:Â <span class="hljs-built_in">str</span>,Â callback_id:Â <span class="hljs-built_in">str</span></span>)Â -&gt;Â <span class="hljs-literal">None</span>:
Â Â Â Â Â Â Â Â loopÂ =Â asyncio.new_event_loop()
Â Â Â Â Â Â Â Â asyncio.set_event_loop(loop)
Â Â Â Â Â Â Â Â <span class="hljs-keyword">if</span>Â subscriber_idÂ <span class="hljs-keyword">not</span>Â <span class="hljs-keyword">in</span>Â self._thread_loops:
Â Â Â Â Â Â Â Â Â Â Â Â self._thread_loops[subscriber_id]Â =Â {}
Â Â Â Â Â Â Â Â self._thread_loops[subscriber_id][callback_id]Â =Â loop
</code></pre>
<h4 data-id="heading-5">1.3 è®¢é˜…</h4>
<p>ä»»ä½•å¤æ‚ä»»åŠ¡çš„æ‰§è¡Œï¼Œéƒ½ç¦»ä¸å¼€å¯¹çŠ¶æ€å˜åŒ–çš„ç²¾å‡†æ„ŸçŸ¥ä¸å®æ—¶å“åº”ã€‚OpenHands é‡‡ç”¨è§‚å¯Ÿè€…æ¨¡å¼ä½œä¸ºä»»åŠ¡è°ƒåº¦çš„æ ¸å¿ƒæœºåˆ¶ï¼Œå…¶è®¾è®¡çµæ„Ÿæºè‡ªç°å®ä¸–ç•Œçš„ "æŒ‡æŒ¥ - ä¾¦å¯Ÿ" ä½“ç³» â€”â€” å°±åƒæˆ˜åœºä¸Šçš„æŒ‡æŒ¥å®˜éœ€è¦ä¾¦å¯Ÿå…µå®æ—¶ä¼ é€’å‰çº¿åŠ¨æ€ï¼Œæ¡†æ¶ä¸­çš„è°ƒåº¦ä¸­å¿ƒä¹Ÿä¾èµ–åˆ†å¸ƒå¼çš„ "çŠ¶æ€è§‚å¯Ÿè€…" æ¥æŒæ¡æ¯ä¸€ä¸ªä»»åŠ¡çš„è¿›å±•ã€‚</p>
<p>å…·ä½“è€Œè¨€ï¼Œç³»ç»Ÿå°†ä»»åŠ¡æ‹†è§£ä¸ºä¸€ç³»åˆ—å¯ç›‘æ§çš„ "çŠ¶æ€èŠ‚ç‚¹"ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½é…å¤‡ä¸“å±çš„è§‚å¯Ÿè€…å®ä¾‹ã€‚å½“æŸä¸€èŠ‚ç‚¹çš„çŠ¶æ€å‘ç”Ÿå˜æ›´ï¼ˆä¾‹å¦‚ä» "å¾…æ‰§è¡Œ" è½¬ä¸º "æ‰§è¡Œä¸­"ï¼Œæˆ–ä» "æˆåŠŸ" è½¬ä¸º "å¤±è´¥"ï¼‰ï¼Œè§‚å¯Ÿè€…ä¼šç«‹å³è§¦å‘é¢„è®¾çš„å›è°ƒé€»è¾‘ï¼Œé€šçŸ¥è°ƒåº¦ä¸­å¿ƒè¿›è¡Œä¸‹ä¸€æ­¥å¤„ç†ã€‚è¿™ç§è®¾è®¡å¸¦æ¥äº†ä¸¤å¤§æ ¸å¿ƒä¼˜åŠ¿ï¼š</p>
<ul>
<li>å®ç°äº†ä»»åŠ¡è°ƒåº¦çš„ "æ¾è€¦åˆ"ã€‚è°ƒåº¦ä¸­å¿ƒæ— éœ€ä¸»åŠ¨æŸ¥è¯¢æ¯ä¸ªä»»åŠ¡çš„çŠ¶æ€ï¼Œè€Œæ˜¯è¢«åŠ¨æ¥æ”¶çŠ¶æ€å˜æ›´é€šçŸ¥ï¼Œè¿™å¤§å¹…é™ä½äº†ç³»ç»Ÿå„æ¨¡å—é—´çš„ä¾èµ–å…³ç³»ï¼Œä½¿å¾—æ–°å¢ä»»åŠ¡ç±»å‹æˆ–ä¿®æ”¹è°ƒåº¦é€»è¾‘æ—¶ï¼Œæ— éœ€é‡æ„æ•´ä¸ªæ¡†æ¶ã€‚</li>
<li>æ”¯æŒåŠ¨æ€ä¼˜å…ˆçº§è°ƒæ•´ã€‚å½“é«˜ç´§æ€¥åº¦çš„ä»»åŠ¡æ’å…¥æ—¶ï¼Œè§‚å¯Ÿè€…å¯å®æ—¶æ•è·è¿™ä¸€äº‹ä»¶ï¼Œè§¦å‘è°ƒåº¦ä¸­å¿ƒçš„ä¼˜å…ˆçº§é‡æ’æœºåˆ¶ï¼Œæš‚åœä½ä¼˜å…ˆçº§ä»»åŠ¡çš„èµ„æºåˆ†é…ï¼Œç¡®ä¿å…³é”®ä»»åŠ¡ä¼˜å…ˆæ‰§è¡Œã€‚è¿™ç§çµæ´»æ€§åœ¨å¤šé¡¹ç›®å¹¶è¡Œçš„åœºæ™¯ä¸­å°¤ä¸ºé‡è¦ã€‚</li>
</ul>
<p>åœ¨è¿™ä¸€æ¶æ„ä¸­ï¼Œæ‰€æœ‰ç»„ä»¶éƒ½æ‰®æ¼”ç€ â€œç”Ÿäº§è€…â€ æˆ– â€œæ¶ˆè´¹è€…â€ çš„è§’è‰²ã€‚ç”Ÿäº§è€…è´Ÿè´£ç”Ÿæˆäº‹ä»¶ï¼šä»£ç†å†³ç­–åäº§ç”Ÿ â€œåŠ¨ä½œäº‹ä»¶â€ï¼Œè¿è¡Œæ—¶ç¯å¢ƒæ‰§è¡Œä»»åŠ¡åç”Ÿæˆ â€œåé¦ˆäº‹ä»¶â€ã€‚æ¶ˆè´¹è€…åˆ™é€šè¿‡è®¢é˜…ç‰¹å®šäº‹ä»¶è·å–ä¿¡æ¯å¹¶å“åº”ï¼šè¿è¡Œæ—¶è®¢é˜… â€œåŠ¨ä½œäº‹ä»¶â€ ä»¥æ‰§è¡Œå…·ä½“ä»»åŠ¡ï¼Œæ§åˆ¶å™¨è®¢é˜…å…¨é‡äº‹ä»¶ä»¥ç»´æŠ¤ç³»ç»ŸçŠ¶æ€ã€‚è¿™ç§åŸºäºäº‹ä»¶çš„äº¤äº’æ¨¡å¼ï¼Œå½»åº•æ‰“ç ´äº†ç»„ä»¶é—´çš„ç›´æ¥ä¾èµ–ã€‚</p>
<p>äº‹ä»¶æµåƒä¸€æ¡ç¯å½¢é«˜æ¶ï¼Œä»»ä½•è½¦è¾†ï¼ˆäº‹ä»¶ï¼‰ä¸€æ—¦é©¶å…¥ï¼Œå°±ä¼šè¢«å¹¶è¡ŒåŒé“åˆ†æµåˆ°å‡ åº§æ”¶è´¹ç«™â€”â€”Sessionã€Runtimeã€Memory ã€ AgentControllerã€......ã€‚å®ƒä»¬å„è‡ªé¢†å–ä¸“å±ã€Œé€šè¡Œåˆ¸ã€ï¼ˆSubscriber æ ‡è¯†ï¼‰ï¼Œåœ¨åŒä¸€æ—¶åˆ»å¯¹åŒä¸€è¾†è½¦è¿›è¡Œå®‰æ£€ã€æ”¶è´¹æˆ–è®°å½•ï¼Œè€Œæ— éœ€ç­‰å¾…å‰ä¸€å…³å¡æ”¾è¡Œã€‚</p>
<h5 data-id="heading-6">1.3.1 è®¢é˜…è€…</h5>
<p>_subscribers å’Œ subscriber_id èµ·åˆ°å¦‚ä¸‹ä½œç”¨ã€‚</p>
<p>subscriber_id ä¼šå”¯ä¸€æ ‡è¯†ä¸€ä¸ªè®¢é˜…è€…ï¼Œæ¯ä¸ªè®¢é˜…è€…ä»£è¡¨ç³»ç»Ÿçš„ä¸åŒç»„ä»¶æˆ–è€…æœåŠ¡ã€‚ä¸åŒçš„è®¢é˜…è€…ä¼šå¤„ç†äº‹ä»¶ï¼Œæ¯”å¦‚ï¼š</p>
<ul>
<li>EventStreamSubscriber.SERVER: æœåŠ¡å™¨å¤„ç†</li>
<li>EventStreamSubscriber.RUNTIME: è¿è¡Œæ—¶å¤„ç†</li>
<li>EventStreamSubscriber.AGENT_CONTROLLER: ä»£ç†æ§åˆ¶å™¨å¤„ç†</li>
</ul>

<pre><code class="hljs language-ini" lang="ini">classÂ EventStreamSubscriber(str,Â Enum):
Â Â Â Â <span class="hljs-attr">AGENT_CONTROLLER</span>Â =Â <span class="hljs-string">'agent_controller'</span>
Â Â Â Â <span class="hljs-attr">RESOLVER</span>Â =Â <span class="hljs-string">'openhands_resolver'</span>
Â Â Â Â <span class="hljs-attr">SERVER</span>Â =Â <span class="hljs-string">'server'</span>
Â Â Â Â <span class="hljs-attr">RUNTIME</span>Â =Â <span class="hljs-string">'runtime'</span>
Â Â Â Â <span class="hljs-attr">MEMORY</span>Â =Â <span class="hljs-string">'memory'</span>
Â Â Â Â <span class="hljs-attr">MAIN</span>Â =Â <span class="hljs-string">'main'</span>
Â Â Â Â <span class="hljs-attr">TEST</span>Â =Â <span class="hljs-string">'test'</span>
</code></pre>
<p>å‡ ä¸ªå¤§æ¨¡å—éƒ½æ˜¯åœ¨<code>__init__</code>å‡½æ•°ä¸­å®Œæˆæ¨¡å—çš„åˆå§‹åŒ–å‡†å¤‡å·¥ä½œï¼Œå¹¶ä¸”å‘äº‹ä»¶æµä¸­è®¢é˜…æ¶ˆæ¯å¹¶æ³¨å†Œå„è‡ªæ¨¡å—çš„æ¶ˆæ¯å¤„ç†å‡½æ•°ã€‚äº‹ä»¶å›è°ƒå‡½æ•°ä¼šæ ¹æ®å½“å‰çš„äº‹ä»¶è¿›è¡ŒçŠ¶æ€æœºçš„çŠ¶æ€è½¬ç§»ã€‚</p>
<ul>
<li>
<p>Runtime åœ¨äº‹ä»¶æµä¸­è®¢é˜… EventStreamSubscriber.RUNTIMEï¼Œäº‹ä»¶å›è°ƒå‡½æ•°ä¼šå¤„ç†éœ€è¦runtineå¤„ç†çš„actionï¼Œæ¯”å¦‚mcp/toolç­‰ç­‰ã€‚<code>Runtime</code>åªå¤„ç†å¯è¿è¡Œçš„<code>Action</code>äº‹ä»¶ï¼Œæ‰§è¡ŒåŠ¨ä½œæ‹¿åˆ°è¾“å‡º<code>Observation</code>å‘é€å›äº‹ä»¶æµä¸­<code>isinstance(event, MCPAction)</code>æ‰§è¡ŒMCPè·å–ç»“æœå…¶ä»–runtimeæ”¯æŒçš„actionåˆ™æ‰§è¡Œè·å–ç»“æœã€‚</p>
</li>
<li>
<p>Memory åœ¨äº‹ä»¶æµä¸­è®¢é˜… EventStreamSubscriber.MEMORYã€‚äº‹ä»¶å›è°ƒå‡½æ•°æ ¹æ®å½“å‰çš„<code>event</code>ç”Ÿæˆä¸€ä¸ªå¸¦<code>microagent_knowledge</code>çš„<code>RecallObservation</code>å¹¶ä»¥<code>ENVIRONMENT</code>ä½œä¸ºæºæ·»åŠ å›äº‹ä»¶æµä¸­ï¼Œè¿™é‡Œçš„<code>microagent_knowledge</code>æ˜¯ä¸€ç§ç‰¹å®šæç¤ºè¯å¢å¼ºçš„æ–¹æ³•ã€‚<code>Memory</code>åªå¤„ç†<code>RecallAction</code>ï¼Œå¯¹äºç”¨æˆ·é¦–æ¬¡è¾“å…¥ä¿¡æ¯åˆ™å°†ä¸€äº›é¢å¤–çš„å·¥ä½œç©ºé—´ä¸Šä¸‹æ–‡ä¿¡æ¯æ·»åŠ åˆ°<code>RecallObservation</code>å‘é€å›äº‹ä»¶æµä¸­ï¼Œå¯¹äºå…¶ä»–éç”¨æˆ·é¦–æ¬¡çš„è¾“å…¥ä¿¡æ¯åˆ™åŠ å…¥microagent_knowledgeåˆ°<code>RecallObservation</code>å‘é€å›äº‹ä»¶æµä¸­ã€‚</p>
</li>
<li>
<p>AgentController åœ¨äº‹ä»¶æµä¸­è®¢é˜… EventStreamSubscriber.AGENT_CONTROLLERã€‚<code>AgentController</code>ä½œä¸ºä¸»è¦çŠ¶æ€ç®¡ç†æ¨¡å—ï¼Œ</p>
<ul>
<li>
<p>æ ¹æ®<code>Observation</code>äº‹ä»¶è¿›è¡ŒçŠ¶æ€å˜æ¢</p>
</li>
<li>
<p>æ ¹æ®<code>Action</code>è¿›è¡ŒçŠ¶æ€å˜æ¢å’Œä»¥ä¸‹å¤„ç†ï¼š</p>
<ul>
<li>å¯¹äº<code>MessageAction</code>å‘é€<code>RecallAction</code>åˆ°äº‹ä»¶æµä¸­</li>
<li>å¯¹äº<code>AgentDelegateAction</code>åšAgentè·¯ç”±ï¼ˆåç»­æœºåˆ¶è§£è¯»ä¸­å†è¯¦ç»†ä»‹ç»ï¼‰</li>
</ul>
</li>
<li>
<p>æ ¹æ®å½“å‰çš„<code>event</code>åˆ¤æ–­è¿›è¡Œè°ƒç”¨<code>agent.step</code></p>
</li>
</ul>
</li>
<li>
<p>run_controller åœ¨äº‹ä»¶æµä¸­è®¢é˜… EventStreamSubscriber.MAINã€‚</p>
</li>
<li>
<p>WebSessionã€ConversationManager ä¼šè®¢é˜… EventStreamSubscriber.SERVERã€‚</p>
</li>
</ul>
<h5 data-id="heading-7">1.3.2 åˆ†å‘</h5>
<p>ç”¨æˆ·å‘é€æ¶ˆæ¯æ·»åŠ äº†ä¸€æ¡æ¶ˆæ¯åˆ°æ¶ˆæ¯æµä¸­ï¼Œç³»ç»Ÿä¼šä¾æ® subscriber_id æ¥å†³å®šå“ªäº›è®¢é˜…è€…åº”è¯¥æ¥æ”¶è¯¥ç±»äº‹ä»¶ã€‚è¿™æ¡æ¶ˆæ¯ä¼šè¢«å¹¿æ’­åˆ°æ¯ä¸€ä¸ªæ¶ˆæ¯é€šé“ä¸­ï¼Œé€šè¿‡æ³¨å†Œçš„å›è°ƒå‡½æ•°å¯ä»¥åˆ†æå“ªäº›æ¨¡å—å¯¹æ¶ˆæ¯è¿›è¡Œäº†å¤„ç†ã€‚</p>
<pre><code class="hljs language-python" lang="python">Â Â Â Â <span class="hljs-keyword">async</span>Â <span class="hljs-keyword">def</span>Â <span class="hljs-title function_">_process_queue</span>(<span class="hljs-params">self</span>)Â -&gt;Â <span class="hljs-literal">None</span>:
Â Â Â Â Â Â Â Â <span class="hljs-keyword">while</span>Â should_continue()Â <span class="hljs-keyword">and</span>Â <span class="hljs-keyword">not</span>Â self._stop_flag.is_set():
Â Â Â Â Â Â Â Â Â Â Â Â eventÂ =Â <span class="hljs-literal">None</span>
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">try</span>:
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â eventÂ =Â self._queue.get(timeout=<span class="hljs-number">0.1</span>)
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">except</span>Â queue.Empty:
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">continue</span>

Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â passÂ eachÂ eventÂ toÂ eachÂ callbackÂ inÂ order</span>
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">for</span>Â keyÂ <span class="hljs-keyword">in</span>Â <span class="hljs-built_in">sorted</span>(self._subscribers.keys()):Â <span class="hljs-comment">#Â æ­¤å¤„ä¼šå†³å®šåˆ†å‘åˆ°å“ªé‡Œ</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â callbacksÂ =Â self._subscribers[key]
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â CreateÂ aÂ copyÂ ofÂ theÂ keysÂ toÂ avoidÂ "dictionaryÂ changedÂ sizeÂ duringÂ iteration"Â error</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â callback_idsÂ =Â <span class="hljs-built_in">list</span>(callbacks.keys())
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">for</span>Â callback_idÂ <span class="hljs-keyword">in</span>Â callback_ids:
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â CheckÂ ifÂ callback_idÂ stillÂ existsÂ (mightÂ haveÂ beenÂ removedÂ duringÂ iteration)</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">if</span>Â callback_idÂ <span class="hljs-keyword">in</span>Â callbacks:
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â callbackÂ =Â callbacks[callback_id]
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â poolÂ =Â self._thread_pools[key][callback_id]
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â futureÂ =Â pool.submit(callback,Â event)
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â future.add_done_callback(
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â self._make_error_handler(callback_id,Â key)
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â )
</code></pre>
<h5 data-id="heading-8">1.3.3 èµ„æºç®¡ç†</h5>
<p>subscriber_id å¸®åŠ©ç³»ç»Ÿç®¡ç†æ¯ä¸ªè®¢é˜…è€…çš„èµ„æºã€‚</p>
<pre><code class="hljs language-python" lang="python">Â Â Â Â <span class="hljs-keyword">def</span>Â <span class="hljs-title function_">_clean_up_subscriber</span>(<span class="hljs-params">self,Â subscriber_id:Â <span class="hljs-built_in">str</span>,Â callback_id:Â <span class="hljs-built_in">str</span></span>)Â -&gt;Â <span class="hljs-literal">None</span>:
Â Â Â Â Â Â Â Â <span class="hljs-keyword">if</span>Â subscriber_idÂ <span class="hljs-keyword">not</span>Â <span class="hljs-keyword">in</span>Â self._subscribers:
Â Â Â Â Â Â Â Â Â Â Â Â logger.warning(<span class="hljs-string">f'SubscriberÂ notÂ foundÂ duringÂ cleanup:Â <span class="hljs-subst">{subscriber_id}</span>'</span>)
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>
Â Â Â Â Â Â Â Â <span class="hljs-keyword">if</span>Â callback_idÂ <span class="hljs-keyword">not</span>Â <span class="hljs-keyword">in</span>Â self._subscribers[subscriber_id]:
Â Â Â Â Â Â Â Â Â Â Â Â logger.warning(<span class="hljs-string">f'CallbackÂ notÂ foundÂ duringÂ cleanup:Â <span class="hljs-subst">{callback_id}</span>'</span>)
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>
Â Â Â Â Â Â Â Â <span class="hljs-keyword">if</span>Â (
Â Â Â Â Â Â Â Â Â Â Â Â subscriber_idÂ <span class="hljs-keyword">in</span>Â self._thread_loops
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">and</span>Â callback_idÂ <span class="hljs-keyword">in</span>Â self._thread_loops[subscriber_id]
Â Â Â Â Â Â Â Â ):
Â Â Â Â Â Â Â Â Â Â Â Â loopÂ =Â self._thread_loops[subscriber_id][callback_id]
Â Â Â Â Â Â Â Â Â Â Â Â current_taskÂ =Â asyncio.current_task(loop)
Â Â Â Â Â Â Â Â Â Â Â Â pendingÂ =Â [
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â taskÂ <span class="hljs-keyword">for</span>Â taskÂ <span class="hljs-keyword">in</span>Â asyncio.all_tasks(loop)Â <span class="hljs-keyword">if</span>Â taskÂ <span class="hljs-keyword">is</span>Â <span class="hljs-keyword">not</span>Â current_task
Â Â Â Â Â Â Â Â Â Â Â Â ]
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">for</span>Â taskÂ <span class="hljs-keyword">in</span>Â pending:
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â task.cancel()
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">try</span>:
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â loop.stop()
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â loop.close()
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">except</span>Â ExceptionÂ <span class="hljs-keyword">as</span>Â e:
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â logger.warning(
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-string">f'ErrorÂ closingÂ loopÂ forÂ <span class="hljs-subst">{subscriber_id}</span>/<span class="hljs-subst">{callback_id}</span>:Â <span class="hljs-subst">{e}</span>'</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â )
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">del</span>Â self._thread_loops[subscriber_id][callback_id]

Â Â Â Â Â Â Â Â <span class="hljs-keyword">if</span>Â (
Â Â Â Â Â Â Â Â Â Â Â Â subscriber_idÂ <span class="hljs-keyword">in</span>Â self._thread_pools
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">and</span>Â callback_idÂ <span class="hljs-keyword">in</span>Â self._thread_pools[subscriber_id]
Â Â Â Â Â Â Â Â ):
Â Â Â Â Â Â Â Â Â Â Â Â poolÂ =Â self._thread_pools[subscriber_id][callback_id]
Â Â Â Â Â Â Â Â Â Â Â Â pool.shutdown()
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">del</span>Â self._thread_pools[subscriber_id][callback_id]

Â Â Â Â Â Â Â Â <span class="hljs-keyword">del</span>Â self._subscribers[subscriber_id][callback_id]
</code></pre>
<h3 data-id="heading-9">0x02 Event</h3>
<p>åœ¨ OpenHands ç³»ç»Ÿä¸­ï¼ŒEvent æ˜¯ç³»ç»Ÿä¸­æœ€åŸºæœ¬çš„æ•°æ®å•å…ƒï¼Œä»£è¡¨ç³»ç»Ÿä¸­å‘ç”Ÿçš„å„ç§åŠ¨ä½œå’Œè§‚å¯Ÿç»“æœï¼ˆç”¨æˆ·è¾“å…¥ã€æ™ºèƒ½ä½“æ–‡æœ¬ã€å·¥å…·è°ƒç”¨/ç»“æœã€çŠ¶æ€å˜æ›´è¯·æ±‚ã€æ§åˆ¶ä¿¡å·ï¼‰ã€‚æ‰€æœ‰äº‹ä»¶éƒ½ç»§æ‰¿è‡ª Event åŸºç±»ã€‚è¡¨ç¤ºä¸€ä¸ªåŸå­æ€§äº‹ä»¶ã€‚</p>
<p>æƒ³è±¡ä¸€ä¸‹ï¼Œå¦‚æœæˆ‘ä»¬æŠŠ<code>Event Stream</code>æ¯”ä½œä¸€ä¸ªä¿¡æ¯ä¼ é€’çš„â€œé‚®æ”¿ç³»ç»Ÿâ€ï¼Œé‚£ä¹ˆ<code>Event</code>å°±æ˜¯è¿™ä¸ªç³»ç»Ÿä¸­ä¼ é€’çš„â€œä¿¡ä»¶â€ã€‚åœ¨OpenHandsä¸­ï¼Œ<code>Event</code>æ˜¯æœ€åŸºæœ¬çš„ä¿¡æ¯å•ä½ï¼Œå®ƒæ˜¯ä¸€ä¸ªæ ‡å‡†åŒ–çš„æ•°æ®ç»“æ„ï¼Œç”¨æ¥è®°å½•ç³»ç»Ÿä¸­å‘ç”Ÿçš„ä»»ä½•é‡è¦äº‹ä»¶ã€‚</p>
<p>é€šè¿‡å°†Agentçš„æ€è€ƒï¼ˆç”±LLMç”Ÿæˆçš„è‡ªç„¶è¯­è¨€è¾“å‡ºï¼‰ä¸ç³»ç»Ÿçš„å®é™…æ‰§è¡Œï¼ˆç»“æ„åŒ–çš„Action/Observationï¼‰åˆ†å¼€ï¼Œæˆ‘ä»¬è§£å†³äº†æ„å›¾ä¸æ‰§è¡Œä¹‹é—´çš„éš”ç¦»ã€‚LLMè´Ÿè´£å†³å®šâ€œè¦åšä»€ä¹ˆâ€ï¼Œè€ŒAction/Observationåˆ™è¯¦ç»†è¯´æ˜äº†â€œæ€æ ·å»åšâ€å’Œâ€œç»“æœå¦‚ä½•â€ï¼Œè¿™ç¡®ä¿äº†ç³»ç»Ÿçš„ç¨³å®šæ€§å’Œå¯é¢„æµ‹æ€§ã€‚</p>
<h4 data-id="heading-10">2.1 Event</h4>
<h5 data-id="heading-11">2.1.1 å®šä¹‰</h5>
<p>æ¯ä¸€ä¸ª <code>Event</code> å¯¹è±¡éƒ½æºå¸¦äº†ä¸€äº›å…ƒæ•°æ®ï¼Œå°±åƒä¿¡å°ä¸Šçš„ä¿¡æ¯ï¼š</p>
<ul>
<li><code>id</code>: äº‹ä»¶çš„å”¯ä¸€æ ‡è¯†ç¬¦ã€‚</li>
<li><code>source</code>: äº‹ä»¶çš„æ¥æºï¼Œå¯ä»¥æ˜¯ <code>AGENT</code>ã€<code>USER</code> æˆ– <code>ENVIRONMENT</code>ã€‚</li>
<li><code>timestamp</code>: äº‹ä»¶å‘ç”Ÿçš„æ—¶é—´æˆ³ã€‚</li>
<li><code>cause</code>: è§¦å‘æ­¤äº‹ä»¶çš„å¦ä¸€ä¸ªäº‹ä»¶çš„ <code>id</code>ã€‚</li>
</ul>
<p>å°†ç³»ç»Ÿä¸­çš„æ‰€æœ‰äº’åŠ¨éƒ½æŠ½è±¡ä¸º<code>Event</code>ï¼Œæˆ‘ä»¬å¾—åˆ°äº†ä¸€ç§é€šç”¨çš„è¯­è¨€ã€‚æ— è®ºæ˜¯Agentçš„å†³ç­–ã€ç”¨æˆ·çš„æ¶ˆæ¯è¿˜æ˜¯ç¯å¢ƒçš„åé¦ˆï¼Œéƒ½å¯ä»¥ç»Ÿä¸€å¤„ç†ã€å­˜å‚¨å’Œåˆ†å‘ã€‚ç‰¹åˆ«æ˜¯<code>cause</code>å­—æ®µï¼Œå®ƒåƒä¸€æ¡çœ‹ä¸è§çš„çº¿ï¼Œå°†Actionå’Œå®ƒå¼•èµ·çš„Observationç´§å¯†è”ç³»èµ·æ¥ï¼Œå½¢æˆäº†ReActå¾ªç¯çš„å› æœé“¾ï¼Œè¿™å¯¹äºç†è§£å’Œè°ƒè¯•Agentçš„è¡Œä¸ºè‡³å…³é‡è¦ã€‚</p>
<p>éƒ¨åˆ†ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-variable">@dataclass</span>
classÂ <span class="hljs-attribute">Event</span>:
Â Â Â Â INVALID_IDÂ =Â -<span class="hljs-number">1</span>

Â Â Â Â <span class="hljs-variable">@property</span>
Â Â Â Â defÂ <span class="hljs-built_in">message</span>(self)Â -&gt;Â strÂ |Â <span class="hljs-attribute">None</span>:
Â Â Â Â Â Â Â Â ifÂ <span class="hljs-built_in">hasattr</span>(self,Â <span class="hljs-string">'_message'</span>):
Â Â Â Â Â Â Â Â Â Â Â Â msgÂ =Â <span class="hljs-built_in">getattr</span>(self,Â <span class="hljs-string">'_message'</span>)
Â Â Â Â Â Â Â Â Â Â Â Â returnÂ <span class="hljs-built_in">str</span>(msg)Â ifÂ msgÂ isÂ <span class="hljs-keyword">not</span>Â NoneÂ elseÂ None
Â Â Â Â Â Â Â Â returnÂ <span class="hljs-string">''</span>

Â Â Â Â <span class="hljs-variable">@property</span>
Â Â Â Â defÂ <span class="hljs-built_in">id</span>(self)Â -&gt;Â <span class="hljs-attribute">int</span>:
Â Â Â Â Â Â Â Â ifÂ <span class="hljs-built_in">hasattr</span>(self,Â <span class="hljs-string">'_id'</span>):
Â Â Â Â Â Â Â Â Â Â Â Â id_valÂ =Â <span class="hljs-built_in">getattr</span>(self,Â <span class="hljs-string">'_id'</span>)
Â Â Â Â Â Â Â Â Â Â Â Â returnÂ <span class="hljs-built_in">int</span>(id_val)Â ifÂ id_valÂ isÂ <span class="hljs-keyword">not</span>Â NoneÂ elseÂ Event.INVALID_ID
Â Â Â Â Â Â Â Â returnÂ Event.INVALID_ID
</code></pre>
<p>EventStream å¯¹Eventçš„å¤„ç†è¿‡ç¨‹ä¸ºï¼š</p>
<ul>
<li>äº‹ä»¶é€šè¿‡ add_event æ–¹æ³•æ·»åŠ åˆ°æµä¸­</li>
<li>ç³»ç»Ÿè‡ªåŠ¨åˆ†é… ID å’Œæ—¶é—´æˆ³</li>
<li>äº‹ä»¶è¢«å­˜å‚¨åˆ°æ–‡ä»¶ç³»ç»Ÿ</li>
<li>äº‹ä»¶è¢«æ”¾å…¥å¤„ç†é˜Ÿåˆ—</li>
</ul>
<p>ç³»ç»Ÿé€šè¿‡ event_to_dict å’Œ event_from_dict å‡½æ•°å¤„ç†äº‹ä»¶çš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–ï¼Œç¡®ä¿äº‹ä»¶å¯ä»¥åœ¨ä¸åŒç»„ä»¶é—´ä¼ è¾“å’Œå­˜å‚¨ã€‚</p>
<h5 data-id="heading-12">2.1.2 åˆ†ç±»</h5>
<p>æŒ‰ç…§åŠŸèƒ½åˆ†ç±»ï¼Œäº‹ä»¶ä¸»è¦åˆ†ä¸ºä¸¤ç±»ï¼š</p>
<ul>
<li>ç¬¬ä¸€ç§æ˜¯Actionï¼ˆè¡ŒåŠ¨ï¼‰ï¼Œå®ƒä»£è¡¨äº†æ™ºèƒ½ä»£ç†æƒ³è¦å¯¹ç¯å¢ƒæ‰§è¡Œçš„å…·ä½“æ“ä½œã€‚è¿™å¹¶ä¸æ˜¯æ¨¡ç³Šä¸æ¸…çš„è‡ªç„¶è¯­è¨€æè¿°ï¼Œè€Œæ˜¯ä¸€ä¸ªæ˜ç¡®çš„æŒ‡ä»¤ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä»£ç†æƒ³è¦åˆ—å‡ºæŸä¸ªç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ï¼Œå®ƒä¼šå‘é€ä¸€ä¸ªæ¸…æ™°çš„æŒ‡ä»¤ï¼Œå¦‚â€œæ‰§è¡Œå‘½ä»¤'ls -l'â€ã€‚è¿™æ ·çš„æŒ‡ä»¤è®©ç³»ç»Ÿèƒ½å¤Ÿå‡†ç¡®æ— è¯¯åœ°ç†è§£ä»£ç†çš„æ„å›¾å¹¶æ‰§è¡Œç›¸åº”çš„æ“ä½œã€‚</li>
<li>ç¬¬äºŒç§æ˜¯Observationï¼ˆè§‚å¯Ÿï¼‰ï¼Œå®ƒä»£è¡¨äº†æ™ºèƒ½ä»£ç†ä»ç¯å¢ƒä¸­æ”¶é›†åˆ°çš„ä¿¡æ¯ã€‚è¿™é€šå¸¸æ˜¯åœ¨æ‰§è¡Œäº†æŸä¸ªè¡ŒåŠ¨ä¹‹åï¼Œç³»ç»Ÿç»™äºˆçš„åé¦ˆã€‚ä¾‹å¦‚ï¼Œå¦‚æœä»£ç†æ‰§è¡Œäº†ä¸€ä¸ªåˆ—å‡ºæ–‡ä»¶çš„å‘½ä»¤ï¼Œè§‚å¯Ÿå°±ä¼šåŒ…å«æ‰§è¡Œç»“æœçš„è¯¦ç»†ä¿¡æ¯ï¼Œå¦‚â€œè¾“å‡ºå†…å®¹ä¸º'...'ï¼Œé€€å‡ºä»£ç ä¸º0â€ã€‚è¿™äº›ä¿¡æ¯å¸®åŠ©ä»£ç†äº†è§£å…¶è¡ŒåŠ¨çš„ç»“æœï¼Œå¹¶ä¸ºä¸‹ä¸€æ­¥è¡ŒåŠ¨æä¾›ä¾æ®ã€‚</li>
</ul>
<p>æŒ‰æ¥æºï¼Œäº‹ä»¶åˆ†ç±»å¦‚ä¸‹ï¼š</p>
<ul>
<li>
<p>EventSource.AGENT æ¥è‡ªä»£ç†çš„æ“ä½œå’Œè§‚å¯Ÿç»“æœ</p>
</li>
<li>
<p>EventSource.USER æ¥è‡ªç”¨æˆ·çš„æ“ä½œ</p>
</li>
<li>
<p>EventSource.ENVIRONMENT æ¥è‡ªç¯å¢ƒçš„æ“ä½œå’Œè§‚å¯Ÿç»“æœï¼Œè¿™äº›äº‹ä»¶å¯èƒ½åŒ…æ‹¬ï¼š</p>
<ul>
<li>ç³»ç»ŸçŠ¶æ€å˜åŒ–</li>
<li>ç¯å¢ƒåˆå§‹åŒ–å®Œæˆé€šçŸ¥</li>
<li>è¿è¡Œæ—¶çŠ¶æ€æ›´æ–°</li>
<li>ç³»ç»Ÿçº§çš„è§‚å¯Ÿç»“æœ</li>
</ul>
</li>
</ul>

<pre><code class="hljs language-ini" lang="ini">classÂ EventSource(str,Â Enum):
Â Â Â Â <span class="hljs-attr">AGENT</span>Â =Â <span class="hljs-string">'agent'</span>
Â Â Â Â <span class="hljs-attr">USER</span>Â =Â <span class="hljs-string">'user'</span>
Â Â Â Â <span class="hljs-attr">ENVIRONMENT</span>Â =Â <span class="hljs-string">'environment'</span>
</code></pre>
<h4 data-id="heading-13">2.2 Action</h4>
<h5 data-id="heading-14">2.2.1 ç±»å‹</h5>
<p>æ€»å…±æœ‰ 13 ç§ä¸åŒçš„ Action ç±»å‹ã€‚è¿™äº› Action æ¶µç›–äº†ä»£ç†æ‰§è¡Œçš„å„ç§æ“ä½œï¼ŒåŒ…æ‹¬æ–‡ä»¶æ“ä½œã€å‘½ä»¤æ‰§è¡Œã€æ¶ˆæ¯ä¼ é€’ã€çŠ¶æ€ç®¡ç†ã€ä»£ç†å§”æ‰˜ç­‰æ ¸å¿ƒåŠŸèƒ½ã€‚</p>
<ul>
<li>
<p>åŸºç¡€ Action ç±»å‹ï¼š</p>
<ul>
<li>Action â€“ æŠ½è±¡åŸºç±»</li>
</ul>
</li>
<li>
<p>å…·ä½“ Action å®ç°ï¼š</p>
<ul>
<li>AgentDelegateAction â€“ å§”æ‰˜ä»£ç†æ‰§è¡Œä»»åŠ¡</li>
<li>AgentThinkActionï¼šå…è®¸ Agent æ·»åŠ çº¯æ–‡æœ¬åˆ°å†å²è®°å½•ä¸­çš„æ— æ“ä½œã€‚</li>
<li>AgentFinishAction â€“ ä»£ç†å®Œæˆä»»åŠ¡ï¼Œåœæ­¢æ§åˆ¶å¾ªç¯ï¼Œå…è®¸ç”¨æˆ·è¾“å…¥æ–°ä»»åŠ¡ã€‚</li>
<li>AgentRejectAction â€“ ä»£ç†æ‹’ç»ä»»åŠ¡</li>
<li>AgentRecallActionï¼šæœç´¢è®°å¿†ï¼ˆä¾‹å¦‚å‘é‡æ•°æ®åº“ï¼‰ã€‚</li>
<li>BrowseInteractiveAction â€“ äº¤äº’å¼æµè§ˆ</li>
<li>ChangeAgentStateAction â€“ æ›´æ”¹ä»£ç†çŠ¶æ€</li>
<li>CmdRunAction â€“ åœ¨æ²™ç›’ç»ˆç«¯ä¸­è¿è¡Œå‘½ä»¤</li>
<li>CmdKillActionï¼šæ€æ­»åå°å‘½ä»¤ã€‚</li>
<li>FileEditAction â€“ ç¼–è¾‘æ–‡ä»¶</li>
<li>FileReadAction â€“ è¯»å–æ–‡ä»¶</li>
<li>IPythonRunCellAction â€“ äº¤äº’å¼æ‰§è¡ŒPythonä»£ç å—ï¼ˆåœ¨Jupyterç¬”è®°æœ¬ä¸­ï¼‰å¹¶æ¥æ”¶<code>CmdOutputObservation</code>ã€‚</li>
<li>MessageAction â€“ æ¶ˆæ¯æ“ä½œï¼Œè¡¨ç¤ºæ¥è‡ªä»£ç†æˆ–ç”¨æˆ·çš„æ¶ˆæ¯</li>
<li>AddTaskActionï¼šå‘è®¡åˆ’ä¸­æ·»åŠ å­ä»»åŠ¡ã€‚</li>
<li>ModifyTaskActionï¼šæ›´æ”¹å­ä»»åŠ¡çš„çŠ¶æ€ã€‚</li>
<li>NullAction â€“ ç©ºæ“ä½œ</li>
<li>SystemMessageAction â€“ ç³»ç»Ÿæ¶ˆæ¯æ“ä½œ</li>
</ul>
</li>
<li>
<p>ç‰¹æ®Š Agent ç›¸å…³ Actionï¼š</p>
<ul>
<li>CondensationAction â€“ å†å²å‹ç¼©æ“ä½œ</li>
<li>CondensationRequestAction â€“ è¯·æ±‚å†å²å‹ç¼©æ“ä½œ</li>
<li>RecallAction â€“ å›å¿†æ“ä½œ</li>
</ul>
</li>
</ul>
<h5 data-id="heading-15">2.2.2 æµç¨‹</h5>
<p>åœ¨ OpenHands çš„æ¶æ„ä¸­ï¼Œæ€»ä½“çš„äº‹ä»¶æµå¦‚ä¸‹ï¼šAgent -&gt; Action -&gt; Runtime-&gt; Observation -&gt; Agent</p>
<ul>
<li>Agentç”ŸæˆActionäº‹ä»¶å¹¶å‘é€åˆ°ç¯å¢ƒ</li>
<li>äº‹ä»¶é€šè¿‡EventStreamä¼ é€’ç»™Runtimeæ‰§è¡Œ</li>
<li>Runtimeæ‰§è¡Œç›¸åº”æ“ä½œ</li>
<li>Environment æ‰§è¡Œ Action å¹¶ç”Ÿæˆ Observation ä½œä¸ºå“åº”</li>
<li>Observation è¢«å‘é€å› Agent ä½œä¸ºä¸‹ä¸€æ­¥å†³ç­–çš„è¾“å…¥</li>
</ul>
<p>å…·ä½“å¯ä»¥å‚è§anthropicçš„å›¾ä¾‹ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6b1dfc585add4441b356338594f8af0a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg572X6KW_55qE5oCd6ICD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770815786&amp;x-signature=SIZzdeI%2FIQzA2tGO0lQMwYSl8Sk%3D" alt="openhands-4.1-4" loading="lazy"/></p>
<p>openhands-4.1-4</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.anthropic.com%2Fengineering%2Fbuilding-effective-agents" target="_blank" title="https://www.anthropic.com/engineering/building-effective-agents" ref="nofollow noopener noreferrer">Building effective agents</a></p>
<p>å³ï¼Œä¸ºäº†è§£å†³çº¿æ€§å·¥ä½œæµçš„è„†å¼±æ€§ï¼Œå¼•å…¥äº†<strong>é—­ç¯åé¦ˆ</strong>æœºåˆ¶ã€‚ç°åœ¨ï¼Œä»»åŠ¡çš„æ¯ä¸€æ­¥ä¸å†æ˜¯ä¸€æ¬¡æ€§çš„è°ƒç”¨ï¼Œè€Œæ˜¯ä¸€ä¸ª<strong>å¯ä»¥è‡ªæˆ‘çº é”™çš„ Agent</strong>ã€‚è¿™ç§ Agent å¾ªç¯æå¤§åœ°æå‡äº†ç³»ç»Ÿçš„é²æ£’æ€§å’Œæœ€ç»ˆç»“æœçš„è´¨é‡ï¼Œå› ä¸ºæ¨¡å‹æœ‰æœºä¼šä»è‡ªå·±çš„é”™è¯¯ä¸­å­¦ä¹ å’Œæ¢å¤ã€‚</p>
<p>å› æ­¤ï¼Œæˆ‘ä»¬å¼•å…¥äº†Observationã€‚</p>
<h4 data-id="heading-16">2.3 Observation</h4>
<p>Actionæ˜¯Agentå¯¹ç¯å¢ƒï¼ˆRuntimeï¼‰å‘å‡ºçš„æŒ‡ä»¤æˆ–è€…æ“ä½œï¼ŒObservationæ˜¯ç¯å¢ƒå¯¹è¿™äº›æ“ä½œçš„å“åº”æˆ–è€…åé¦ˆã€‚å®ƒä»£è¡¨äº†ç¯å¢ƒå¯¹ Agent æ‰§è¡Œçš„ Action çš„å“åº”ï¼ŒåŒ…å«äº†æ“ä½œç»“æœã€ç¯å¢ƒçŠ¶æ€å˜åŒ–ç­‰ä¿¡æ¯ï¼Œä¾› Agent è¿›è¡Œä¸‹ä¸€æ­¥å†³ç­–ä½¿ç”¨ã€‚è¿™ç§è®¾è®¡ç¬¦åˆå…¸å‹çš„å¼ºåŒ–å­¦ä¹ å’Œæ™ºèƒ½ä½“ç³»ç»Ÿçš„æ¨¡å¼ï¼Œå…¶ä¸­ Agent é€šè¿‡ä¸ç¯å¢ƒäº¤äº’ï¼ˆæ‰§è¡Œ Action å¹¶æ¥æ”¶ Observationï¼‰æ¥å®Œæˆä»»åŠ¡ã€‚</p>
<h5 data-id="heading-17">2.3.1 ç±»å‹</h5>
<ul>
<li>
<p>å¤–éƒ¨æ¥æºçš„ Observationsï¼Œå¤§éƒ¨åˆ† Observation å¯¹è±¡æ˜¯ä»å¤–éƒ¨ç¯å¢ƒæˆ–è¿è¡Œæ—¶ç³»ç»Ÿæ„å»ºå¹¶ä¼ å…¥çš„ï¼Œè¿™äº› Observation ç±»å‹éƒ½ä»£è¡¨äº†ç¯å¢ƒçš„ä¸åŒçŠ¶æ€ï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li>å‘½ä»¤æ‰§è¡Œç»“æœï¼ˆCmdRunObservationï¼‰</li>
<li>æ–‡ä»¶è¯»å–ç»“æœï¼ˆFileReadObservationï¼‰</li>
<li>IPython æ‰§è¡Œç»“æœï¼ˆIPythonRunCellObservationï¼‰</li>
<li>æµè§ˆå™¨äº¤äº’ç»“æœï¼ˆBrowserOutputObservationï¼‰</li>
<li>RecallObservation: è®°å¿†æ£€ç´¢ç»“æœ</li>
<li>CmdOutputObservationï¼šå‘½ä»¤æ‰§è¡Œçš„è¾“å‡ºã€‚</li>
<li>BrowserOutputObservationï¼šæµè§ˆ URL åçš„è¾“å‡ºã€‚</li>
<li>FileReadObservationï¼šæ–‡ä»¶è¯»å–æ“ä½œçš„è¾“å‡ºã€‚</li>
<li>AgentRecallObservationï¼šAgent å›å¿†æ“ä½œçš„è¾“å‡ºã€‚</li>
<li>AgentErrorObservationï¼šAgent æ‰§è¡Œæ“ä½œæ—¶å‘ç”Ÿé”™è¯¯çš„è¾“å‡ºã€‚</li>
</ul>
<p>è¿™äº›é€šå¸¸ç”±è¿è¡Œæ—¶ç³»ç»Ÿåˆ›å»ºå¹¶é€šè¿‡äº‹ä»¶æµä¼ é€’ç»™æ§åˆ¶å™¨ã€‚</p>
</li>
<li>
<p>AgentController å†…éƒ¨æ„å»ºçš„ Observationsã€‚åœ¨ AgentController ç±»ä¸­ï¼Œæœ‰å‡ å¤„ä¼šç›´æ¥æ„å»º Observation å¯¹è±¡ï¼š</p>
<ul>
<li>NullObservationï¼šè¡¨ç¤ºæ— æ“ä½œæˆ–å¿½ç•¥çš„è§‚å¯Ÿç»“æœï¼Œç”¨äºè¿‡æ»¤ä¸éœ€è¦å¤„ç†çš„äº‹ä»¶ã€‚</li>
<li>ErrorObservationï¼šè¡¨ç¤ºæ‰§è¡Œè¿‡ç¨‹ä¸­å‘ç”Ÿçš„é”™è¯¯ï¼ŒåŒ…å«é”™è¯¯ä¿¡æ¯ä¾›ä»£ç†å¤„ç†ã€‚</li>
<li>AgentStateChangedObservationï¼šè¡¨ç¤ºä»£ç†çŠ¶æ€çš„å˜æ›´ï¼Œå¦‚åŠ è½½ã€è¿è¡Œã€é”™è¯¯ç­‰çŠ¶æ€ã€‚æ¯”å¦‚ï¼Œåœ¨AgentControllerçš„set_agent_state_toå‡½æ•°ä¸­ï¼Œå½“agentçŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶ä¼šåˆ›å»ºä¸€ä¸ªAgentStateChangedObservationäº‹ä»¶ï¼Œå¹¶å°†å…¶æ¥æºè®¾ç½®ä¸º EventSource.ENVIRONMENTã€‚</li>
</ul>
</li>
</ul>
<h5 data-id="heading-18">2.3.2 æµç¨‹</h5>
<p>Observation åœ¨ Agent ä¸­çš„å¤„ç†æµç¨‹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-rust" lang="rust">RuntimeÂ æ‰§è¡ŒÂ ActionÂ -<span class="hljs-punctuation">-&gt;</span>Â äº§ç”ŸÂ ObservationÂ -<span class="hljs-punctuation">-&gt;</span>Â EventStreamÂ å‘å¸ƒäº‹ä»¶Â -<span class="hljs-punctuation">-&gt;</span>Â AgentController.on_eventÂ æ¥æ”¶Â -<span class="hljs-punctuation">-&gt;</span>Â åˆ¤æ–­æ˜¯å¦éœ€è¦Â stepÂ -<span class="hljs-punctuation">-&gt;</span>Â AgentController._stepÂ å¤„ç†Â -<span class="hljs-punctuation">-&gt;</span>Â è°ƒç”¨Â Agent.stepÂ -<span class="hljs-punctuation">-&gt;</span>Â AgentÂ åŸºäºå†å²äº‹ä»¶ï¼ˆåŒ…æ‹¬Â Observationï¼‰å†³ç­–
</code></pre>
<p>å…·ä½“æµç¨‹å¦‚ä¸‹ï¼š</p>
<ul>
<li>Runtimeæ‰§è¡Œå®Œactionä¹‹åï¼Œç”Ÿæˆobservationäº‹ä»¶ã€‚</li>
<li>äº‹ä»¶é€šè¿‡EventStream.add_event() ä¼ å›Agentï¼Œè¿™äº› Observations é€šè¿‡äº‹ä»¶æµä¼ é€’ï¼Œç”¨äºæ›´æ–°ä»£ç†çš„çŠ¶æ€å’Œå†å²è®°å½•ã€‚</li>
<li>AgentController è®¢é˜… EventStreamï¼Œåœ¨ on_event() æ–¹æ³•ä¸­å¤„ç†è¿™äº›äº‹ä»¶ã€‚</li>
<li>AgentåŸºäºobservationå†³å®šä¸‹ä¸€æ­¥åŠ¨ä½œã€‚</li>
</ul>
<p>Observation åœ¨ Agent å†³ç­–ä¸­çš„ä½œç”¨å¦‚ä¸‹ï¼š</p>
<ul>
<li>Agent çŠ¶æ€æ›´æ–°ï¼šAgentStateChangedObservation ä¼šæ›´æ–° Agent çš„å†…éƒ¨çŠ¶æ€ï¼›é”™è¯¯ Observation ä¼šè§¦å‘é”™è¯¯å¤„ç†æµç¨‹ã€‚</li>
<li>å†å²è®°å½•ï¼šæ‰€æœ‰ Observations éƒ½è¢«å­˜å‚¨åœ¨ State.history ä¸­ï¼›Agent åœ¨å†³ç­–æ—¶ä¼šå›é¡¾æ•´ä¸ªå†å²è®°å½•ï¼ŒåŒ…æ‹¬æ‰€æœ‰çš„ Actions å’Œ Observationsã€‚</li>
<li>å†³ç­–ä¾æ®ï¼šAgentï¼ˆLLMï¼‰é€šè¿‡åˆ†æå†å²ä¸­çš„ Observations æ¥ç†è§£ç¯å¢ƒçŠ¶æ€ï¼›ä¾‹å¦‚ CmdOutputObservation æä¾›äº†å‘½ä»¤æ‰§è¡Œç»“æœï¼ŒAgent æ®æ­¤å†³å®šä¸‹ä¸€æ­¥è¡ŒåŠ¨ã€‚</li>
</ul>
<h5 data-id="heading-19">2.3.3 ç»†èŠ‚</h5>
<p>ä¸»è¦çš„ Observation æ„å»ºä½ç½®åŒ…æ‹¬ï¼š</p>
<ul>
<li>è¿è¡Œæ—¶ç¯å¢ƒï¼ˆæ‰§è¡Œå‘½ä»¤ã€æ–‡ä»¶æ“ä½œç­‰ï¼‰</li>
<li>AgentController._reset () æ–¹æ³•ï¼ˆæ„å»º ErrorObservationï¼‰</li>
<li>AgentController.set_agent_state_to () æ–¹æ³•ï¼ˆæ„å»º AgentStateChangedObservationï¼‰</li>
<li>AgentController.end_delegate () æ–¹æ³•ï¼ˆæ„å»º AgentDelegateObservationï¼‰</li>
</ul>
<h4 data-id="heading-20">2.4 Environment</h4>
<p>é’ˆå¯¹ EventSource.ENVIRONMENTï¼Œæœ¬å°èŠ‚åšç‰¹æ®Šè¯´æ˜ã€‚</p>
<p>EventSource.ENVIRONMENT é€šå¸¸è¡¨ç¤ºç”±ç³»ç»Ÿç¯å¢ƒæˆ–è€…åŸºç¡€è®¾æ–½ç”Ÿæˆçš„äº‹ä»¶ï¼Œå¯èƒ½åŒ…æ‹¬ï¼š</p>
<ul>
<li>ç³»ç»ŸçŠ¶æ€å˜åŒ–ã€‚</li>
<li>ç¯å¢ƒåˆå§‹åŒ–å®Œæˆé€šçŸ¥ã€‚</li>
<li>è¿è¡Œæ—¶çŠ¶æ€æ›´æ–°ã€‚</li>
<li>ç³»ç»Ÿçº§çš„è§‚å¯Ÿç»“æœã€‚</li>
</ul>
<p>åœ¨ä»£ç ä¸­ä½¿ç”¨å¦‚ä¸‹ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment">#Â openhands\cli\commands.py</span>
<span class="hljs-keyword">def</span>Â <span class="hljs-title function_">handle_exit_command</span>(<span class="hljs-params">
Â Â Â Â config:Â OpenHandsConfig,
Â Â Â Â event_stream:Â EventStream,
Â Â Â Â usage_metrics:Â UsageMetrics,
Â Â Â Â sid:Â <span class="hljs-built_in">str</span>,
</span>)Â -&gt;Â <span class="hljs-built_in">bool</span>:
Â Â Â Â <span class="hljs-keyword">if</span>Â confirm_exit:
Â Â Â Â Â Â Â Â event_stream.add_event(
Â Â Â Â Â Â Â Â Â Â Â Â ChangeAgentStateAction(AgentState.STOPPED),
Â Â Â Â Â Â Â Â Â Â Â Â EventSource.ENVIRONMENT,
Â Â Â Â Â Â Â Â )

<span class="hljs-comment">#Â åœ¨Â RuntimeÂ ä¸­Â Â Â Â Â Â Â Â </span>
Â Â Â Â <span class="hljs-keyword">def</span>Â <span class="hljs-title function_">maybe_run_setup_script</span>(<span class="hljs-params">self</span>):
Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â setupÂ scriptsÂ timeÂ outÂ afterÂ 10Â minutes</span>
Â Â Â Â Â Â Â Â actionÂ =Â CmdRunAction(
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-string">f'chmodÂ +xÂ <span class="hljs-subst">{setup_script}</span>Â &amp;&amp;Â sourceÂ <span class="hljs-subst">{setup_script}</span>'</span>,
Â Â Â Â Â Â Â Â Â Â Â Â blocking=<span class="hljs-literal">True</span>,
Â Â Â Â Â Â Â Â Â Â Â Â hidden=<span class="hljs-literal">True</span>,
Â Â Â Â Â Â Â Â )
Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â AddÂ theÂ actionÂ toÂ theÂ eventÂ streamÂ asÂ anÂ ENVIRONMENTÂ event</span>
Â Â Â Â Â Â Â Â sourceÂ =Â EventSource.ENVIRONMENT
Â Â Â Â Â Â Â Â self.event_stream.add_event(action,Â source)
Â Â Â Â Â Â Â Â 
<span class="hljs-comment">#Â åœ¨Memoryç±»Â _on_eventÂ æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ç¯å¢ƒè¿”å›çš„Â ObservationÂ è¢«é‡æ–°æ ‡è®°ä¸ºÂ AgentÂ äº‹ä»¶å‘é€åˆ°Â UI:python</span>
<span class="hljs-keyword">async</span>Â <span class="hljs-keyword">def</span>Â <span class="hljs-title function_">_on_event</span>(<span class="hljs-params">self,Â event:Â Event</span>):Â Â Â 
Â Â Â Â self.event_stream.add_event(workspace_obs,Â EventSource.ENVIRONMENT)
Â Â Â Â 
<span class="hljs-comment">#Â åœ¨Â AgentSessionÂ ä¸­</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â self.event_stream.add_event(
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ChangeAgentStateAction(AgentState.RUNNING),
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â EventSource.ENVIRONMENT,
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â )

<span class="hljs-comment">#Â åœ¨Â WebSessionÂ ä¸­</span>
Â Â Â Â Â Â Â Â self.agent_session.event_stream.add_event(
Â Â Â Â Â Â Â Â Â Â Â Â AgentStateChangedObservation(<span class="hljs-string">''</span>,Â AgentState.LOADING),
Â Â Â Â Â Â Â Â Â Â Â Â EventSource.ENVIRONMENT,
Â Â Â Â Â Â Â Â )
Â Â Â Â 
<span class="hljs-comment">#Â AgentControllerÂ ä¸­</span>
Â Â Â Â <span class="hljs-keyword">async</span>Â <span class="hljs-keyword">def</span>Â <span class="hljs-title function_">set_agent_state_to</span>(<span class="hljs-params">self,Â new_state:Â AgentState</span>)Â -&gt;Â <span class="hljs-literal">None</span>:
Â Â Â Â Â Â Â Â self.event_stream.add_event(
Â Â Â Â Â Â Â Â Â Â Â Â AgentStateChangedObservation(<span class="hljs-string">''</span>,Â self.state.agent_state,Â reason),
Â Â Â Â Â Â Â Â Â Â Â Â EventSource.ENVIRONMENT,
Â Â Â Â Â Â Â Â )
</code></pre>
<p>è™½ç„¶Runtimeä¹Ÿä¼šäº§ç”Ÿä¸€äº›è§‚å¯Ÿç»“æœï¼Œä½†å…·ä½“æ˜¯ EventSource.ENVIRONMENT æˆ–è€… EventSource.AGENTï¼Œå–å†³äºä¸Šä¸‹æ–‡ã€‚</p>
<h4 data-id="heading-21">2.5 AgentThinkAction</h4>
<p>æˆ‘ä»¬æ¥çœ‹çœ‹ AgentThinkActionï¼Œè¯¥Actionå…è®¸ Agent æ·»åŠ çº¯æ–‡æœ¬åˆ°å†å²è®°å½•ä¸­çš„æ— æ“ä½œã€‚</p>
<pre><code class="hljs language-ini" lang="ini">Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â ================================================</span>
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â AgentThinkAction</span>
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â ================================================</span>
Â Â Â Â Â Â Â Â Â Â Â Â elifÂ <span class="hljs-attr">tool_call.function.name</span>Â ==Â ThinkTool[<span class="hljs-string">'function'</span>][<span class="hljs-string">'name'</span>]:
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-attr">action</span>Â =Â AgentThinkAction(thought=arguments.get(<span class="hljs-string">'thought'</span>,Â <span class="hljs-string">''</span>))
</code></pre>
<p>ThinkTool æ˜¯å¯¹Anthropic Think Toolè®¾è®¡ç†å¿µçš„æ¨¡ä»¿æˆ–å†å®ç°ã€‚</p>
<h5 data-id="heading-22">Anthropic Think Tool</h5>
<p>Anthropic Think Toolåœ¨æ‰§è¡Œå¤æ‚ä»»åŠ¡æ—¶ä¸ºå…¶åˆ›å»ºä¸“é—¨ç”¨äºç»“æ„åŒ–æ€è€ƒçš„ç©ºé—´ã€‚Think Toolå‘ç”Ÿåœ¨AIå¼€å§‹å“åº”ä¹‹åï¼Œåƒæ˜¯åœ¨å·¥ä½œè¿‡ç¨‹ä¸­ä¸»åŠ¨åœä¸‹æ¥æ•´ç†æ€è·¯ã€‚é€šè¿‡â€œthinkâ€å·¥å…·ï¼ŒAnthropic èµ‹äºˆ Claude åœ¨å¾—å‡ºæœ€ç»ˆç­”æ¡ˆçš„è¿‡ç¨‹ä¸­æ’å…¥ä¸€ä¸ªé¢å¤–æ€è€ƒæ­¥éª¤çš„èƒ½åŠ›â€”â€”è¯¥æ­¥éª¤æ‹¥æœ‰è‡ªå·±ä¸“å±çš„æ€è€ƒç©ºé—´ï¼Œç”¨ä»¥åˆ¤æ–­å½“å‰æ˜¯å¦å·²æŒæ¡ç»§ç»­æ¨è¿›æ‰€éœ€çš„å…¨éƒ¨ä¿¡æ¯ã€‚è¿™ä¸€æœºåˆ¶åœ¨æ‰§è¡Œé•¿é“¾æ¡çš„å·¥å…·è°ƒç”¨æˆ–ä¸ç”¨æˆ·è¿›è¡Œå¤šè½®å¤æ‚å¯¹è¯æ—¶å°¤ä¸ºæœ‰ç”¨ã€‚</p>
<p>å°½ç®¡å¬èµ·æ¥ä¸å»¶ä¼¸æ€è€ƒï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.anthropic.com%2Fresearch%2Fvisible-extended-thinking" target="_blank" title="https://www.anthropic.com/research/visible-extended-thinking" ref="nofollow noopener noreferrer">extended thinking</a>ï¼‰ç±»ä¼¼ï¼Œä½†äºŒè€…æ¦‚å¿µä¸åŒï¼šå»¶ä¼¸æ€è€ƒå‘ç”Ÿåœ¨ Claude å¼€å§‹ç”Ÿæˆå›å¤<strong>ä¹‹å‰</strong>ï¼Œè®©æ¨¡å‹æ·±åº¦æ€è€ƒå¹¶è¿­ä»£æ–¹æ¡ˆï¼›è€Œâ€œæ€è€ƒâ€å·¥å…·ç”¨äº Claude<strong>å·²å¼€å§‹ç”Ÿæˆå›å¤å</strong>ï¼Œåœ¨é‡åˆ°é•¿é“¾æ¡å·¥å…·è°ƒç”¨æˆ–é•¿å¯¹è¯æ—¶ï¼Œä¸»åŠ¨æš‚åœå¹¶æ€è€ƒæ˜¯å¦å·²æŒæ¡è¶³å¤Ÿä¿¡æ¯ã€‚å®ƒå°¤å…¶é€‚ç”¨äºæ¨¡å‹æ— æ³•ä»…å‡­ç”¨æˆ·æŸ¥è¯¢è·å¾—å…¨éƒ¨ä¿¡æ¯ï¼Œè€Œéœ€å¤„ç†å¤–éƒ¨ä¿¡æ¯ï¼ˆå¦‚å·¥å…·è¿”å›ç»“æœï¼‰çš„åœºæ™¯ã€‚</p>
<p>ç›¸æ¯”å»¶ä¼¸æ€è€ƒï¼Œâ€œæ€è€ƒâ€å·¥å…·æ‰€è¿›è¡Œçš„æ¨ç†èŒƒå›´æ›´çª„ï¼Œæ›´èšç„¦äºæ–°å‘ç°çš„ä¿¡æ¯ã€‚</p>
<p>Anthropic æ¨èï¼š</p>
<ul>
<li>å¯¹äºéé¡ºåºå·¥å…·è°ƒç”¨æˆ–ç®€å•æŒ‡ä»¤éµå¾ªï¼Œä¼˜å…ˆä½¿ç”¨å»¶ä¼¸æ€è€ƒï¼›</li>
<li>å¯¹äºå¤æ‚å·¥å…·é“¾ã€éœ€ä»”ç»†åˆ†æå·¥å…·è¾“å‡ºã€ç­–ç•¥å¯†é›†å‹ç¯å¢ƒæˆ–ä»£ä»·é«˜æ˜‚çš„åºåˆ—å†³ç­–ï¼Œä½¿ç”¨â€œæ€è€ƒâ€å·¥å…·ã€‚</li>
</ul>
<h6 data-id="heading-23">ä½•æ—¶ä½¿ç”¨â€œæ€è€ƒâ€å·¥å…·</h6>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼š</p>
<ul>
<li>éœ€æ·±åº¦åˆ†æå‰åºå·¥å…·è¾“å‡ºï¼Œå¯èƒ½å›æº¯æ–¹æ¡ˆï¼›</li>
<li>ç­–ç•¥å¯†é›†å‹ç¯å¢ƒï¼Œéœ€éªŒè¯åˆè§„æ€§ï¼›</li>
<li>åºåˆ—å†³ç­–ï¼Œæ¯æ­¥ä¾èµ–å‰åºç»“æœä¸”é”™è¯¯ä»£ä»·é«˜ã€‚</li>
</ul>
<p><strong>ä¸é€‚ç”¨åœºæ™¯</strong>ï¼š</p>
<ul>
<li>å•æ¬¡æˆ–å¹¶è¡Œå·¥å…·è°ƒç”¨å³å¯å®Œæˆä»»åŠ¡ï¼›</li>
<li>çº¦æŸç®€å•ï¼Œé»˜è®¤è¡Œä¸ºå·²è¶³å¤Ÿã€‚</li>
</ul>
<h6 data-id="heading-24">æœ€ä½³å®è·µ</h6>
<ol>
<li><strong>é¢†åŸŸç¤ºä¾‹é©±åŠ¨çš„æç¤º</strong> ç»™å‡ºä½•æ—¶ã€å¦‚ä½•è°ƒç”¨æ€è€ƒå·¥å…·ï¼Œå¹¶æä¾›è´´åˆä¸šåŠ¡çš„æ¨ç†ç¤ºä¾‹ï¼ˆè§åŸæ–‡èˆªç©ºåŸŸæç¤ºï¼‰ã€‚</li>
<li><strong>å°†å¤æ‚æŒ‡ä»¤æ”¾å…¥ç³»ç»Ÿæç¤º</strong> é•¿ä¸”å¤æ‚çš„æ€è€ƒæŒ‡å—æ”¾åœ¨ç³»ç»Ÿæç¤ºè€Œéå·¥å…·æè¿°ä¸­ï¼Œæ•ˆæœæ›´ä½³ã€‚</li>
<li><strong>æŒç»­ç›‘æ§ä¸è¿­ä»£</strong> è§‚å¯Ÿ Claude å®é™…è°ƒç”¨æ¨¡å¼ï¼Œé’ˆå¯¹æ€§è°ƒæ•´æç¤ºï¼Œä»¥å¼ºåŒ–æœ‰æ•ˆæ€è€ƒè·¯å¾„ã€‚</li>
</ol>
<h5 data-id="heading-25">ä»£ç </h5>
<p>ThinkTool å¯¹åº”çš„ä»£ç å¦‚ä¸‹ã€‚è®©æ¨¡å‹åœ¨â€œå†…éƒ¨ç‹¬ç™½â€é˜¶æ®µæŠŠæ€è€ƒè¿‡ç¨‹å†™å…¥æ—¥å¿—ï¼Œä¸è§¦å‘å¤–éƒ¨è°ƒç”¨ã€‚</p>
<pre><code class="hljs language-python" lang="python">_THINK_DESCRIPTIONÂ =Â <span class="hljs-string">"""UseÂ theÂ toolÂ toÂ thinkÂ aboutÂ something.Â ItÂ willÂ notÂ obtainÂ newÂ informationÂ orÂ makeÂ anyÂ changesÂ toÂ theÂ repository,Â butÂ justÂ logÂ theÂ thought.Â UseÂ itÂ whenÂ complexÂ reasoningÂ orÂ brainstormingÂ isÂ needed.

CommonÂ useÂ cases:
1.Â WhenÂ exploringÂ aÂ repositoryÂ andÂ discoveringÂ theÂ sourceÂ ofÂ aÂ bug,Â callÂ thisÂ toolÂ toÂ brainstormÂ severalÂ uniqueÂ waysÂ ofÂ fixingÂ theÂ bug,Â andÂ assessÂ whichÂ change(s)Â areÂ likelyÂ toÂ beÂ simplestÂ andÂ mostÂ effective.
2.Â AfterÂ receivingÂ testÂ results,Â useÂ thisÂ toolÂ toÂ brainstormÂ waysÂ toÂ fixÂ failingÂ tests.
3.Â WhenÂ planningÂ aÂ complexÂ refactoring,Â useÂ thisÂ toolÂ toÂ outlineÂ differentÂ approachesÂ andÂ theirÂ tradeoffs.
4.Â WhenÂ designingÂ aÂ newÂ feature,Â useÂ thisÂ toolÂ toÂ thinkÂ throughÂ architectureÂ decisionsÂ andÂ implementationÂ details.
5.Â WhenÂ debuggingÂ aÂ complexÂ issue,Â useÂ thisÂ toolÂ toÂ organizeÂ yourÂ thoughtsÂ andÂ hypotheses.

TheÂ toolÂ simplyÂ logsÂ yourÂ thoughtÂ processÂ forÂ betterÂ transparencyÂ andÂ doesÂ notÂ executeÂ anyÂ codeÂ orÂ makeÂ changes."""</span>

ThinkToolÂ =Â ChatCompletionToolParam(
Â Â Â Â <span class="hljs-built_in">type</span>=<span class="hljs-string">'function'</span>,
Â Â Â Â function=ChatCompletionToolParamFunctionChunk(
Â Â Â Â Â Â Â Â name=<span class="hljs-string">'think'</span>,
Â Â Â Â Â Â Â Â description=_THINK_DESCRIPTION,
Â Â Â Â Â Â Â Â parameters={
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-string">'type'</span>:Â <span class="hljs-string">'object'</span>,
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-string">'properties'</span>:Â {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-string">'thought'</span>:Â {<span class="hljs-string">'type'</span>:Â <span class="hljs-string">'string'</span>,Â <span class="hljs-string">'description'</span>:Â <span class="hljs-string">'TheÂ thoughtÂ toÂ log.'</span>},
Â Â Â Â Â Â Â Â Â Â Â Â },
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-string">'required'</span>:Â [<span class="hljs-string">'thought'</span>],
Â Â Â Â Â Â Â Â },
Â Â Â Â ),
)

<span class="hljs-keyword">class</span>Â <span class="hljs-title class_">ThinkExecutor</span>(<span class="hljs-title class_ inherited__">ToolExecutor</span>):
Â Â Â Â <span class="hljs-keyword">def</span>Â <span class="hljs-title function_">__call__</span>(<span class="hljs-params">
Â Â Â Â Â Â Â Â self,
Â Â Â Â Â Â Â Â _:Â ThinkAction,
Â Â Â Â Â Â Â Â conversation:Â <span class="hljs-string">"BaseConversationÂ |Â None"</span>Â =Â <span class="hljs-literal">None</span>,Â Â <span class="hljs-comment">#Â noqa:Â ARG002</span>
Â Â Â Â </span>)Â -&gt;Â ThinkObservation:
Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â ThinkObservation.from_text(text=<span class="hljs-string">"YourÂ thoughtÂ hasÂ beenÂ logged."</span>)


<span class="hljs-keyword">class</span>Â <span class="hljs-title class_">ThinkTool</span>(ToolDefinition[ThinkAction,Â ThinkObservation]):
Â Â Â Â <span class="hljs-string">"""ToolÂ forÂ loggingÂ thoughtsÂ withoutÂ makingÂ changes."""</span>

Â Â Â Â @<span class="hljs-built_in">classmethod</span>
Â Â Â Â <span class="hljs-keyword">def</span>Â <span class="hljs-title function_">create</span>(<span class="hljs-params">
Â Â Â Â Â Â Â Â cls,
Â Â Â Â Â Â Â Â conv_state:Â <span class="hljs-string">"ConversationStateÂ |Â None"</span>Â =Â <span class="hljs-literal">None</span>,Â Â <span class="hljs-comment">#Â noqa:Â ARG003</span>
Â Â Â Â Â Â Â Â **params,
Â Â Â Â </span>)Â -&gt;Â <span class="hljs-type">Sequence</span>[Self]:
Â Â Â Â Â Â Â Â <span class="hljs-string">"""CreateÂ ThinkToolÂ instance.

Â Â Â Â Â Â Â Â Args:
Â Â Â Â Â Â Â Â Â Â Â Â conv_state:Â OptionalÂ conversationÂ stateÂ (notÂ usedÂ byÂ ThinkTool).
Â Â Â Â Â Â Â Â Â Â Â Â **params:Â AdditionalÂ parametersÂ (noneÂ supported).

Â Â Â Â Â Â Â Â Returns:
Â Â Â Â Â Â Â Â Â Â Â Â AÂ sequenceÂ containingÂ aÂ singleÂ ThinkToolÂ instance.

Â Â Â Â Â Â Â Â Raises:
Â Â Â Â Â Â Â Â Â Â Â Â ValueError:Â IfÂ anyÂ parametersÂ areÂ provided.
Â Â Â Â Â Â Â Â """</span>
Â Â Â Â Â Â Â Â <span class="hljs-keyword">if</span>Â params:
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">raise</span>Â ValueError(<span class="hljs-string">"ThinkToolÂ doesn'tÂ acceptÂ parameters"</span>)
Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â [
Â Â Â Â Â Â Â Â Â Â Â Â cls(
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â description=THINK_DESCRIPTION,
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â action_type=ThinkAction,
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â observation_type=ThinkObservation,
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â executor=ThinkExecutor(),
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â annotations=ToolAnnotations(
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â readOnlyHint=<span class="hljs-literal">True</span>,
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â destructiveHint=<span class="hljs-literal">False</span>,
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â idempotentHint=<span class="hljs-literal">True</span>,
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â openWorldHint=<span class="hljs-literal">False</span>,
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ),
Â Â Â Â Â Â Â Â Â Â Â Â )
Â Â Â Â Â Â Â Â ]
</code></pre>
<h3 data-id="heading-26">0xFF å‚è€ƒ</h3>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.all-hands.dev%2Fopenhands%2Fusage%2Farchitecture%2Fbackend" target="_blank" title="https://docs.all-hands.dev/openhands/usage/architecture/backend" ref="nofollow noopener noreferrer">docs.all-hands.dev/openhands/uâ€¦</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F1936485868761257658" target="_blank" title="https://zhuanlan.zhihu.com/p/1936485868761257658" ref="nofollow noopener noreferrer">å½“AI Agentä»â€œç©å…·â€èµ°å‘â€œå·¥å…·â€ï¼Œæˆ‘ä»¬è¯¥å…³æ³¨ä»€ä¹ˆï¼ŸOpenhandsæ¶æ„è§£æã€ç¬¬äºŒç¯‡ï¼šAgent ç›¸å…³æ ¸å¿ƒæ¦‚å¿µã€‘</a> <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.zhihu.com%2Fpeople%2Fdreamrenderx" target="_blank" title="https://www.zhihu.com/people/dreamrenderx" ref="nofollow noopener noreferrer">å…‹é‡Œ</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F1936175201323825087" target="_blank" title="https://zhuanlan.zhihu.com/p/1936175201323825087" ref="nofollow noopener noreferrer">å½“AI Agentä»â€œç©å…·â€èµ°å‘â€œå·¥å…·â€ï¼Œæˆ‘ä»¬è¯¥å…³æ³¨ä»€ä¹ˆï¼ŸOpenhandsæ¶æ„è§£æã€ç¬¬ä¸€ç¯‡ï¼šç³»åˆ—å¯¼è¯»ã€‘</a> <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.zhihu.com%2Fpeople%2Fdreamrenderx" target="_blank" title="https://www.zhihu.com/people/dreamrenderx" ref="nofollow noopener noreferrer">å…‹é‡Œ</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F1940436682949244630" target="_blank" title="https://zhuanlan.zhihu.com/p/1940436682949244630" ref="nofollow noopener noreferrer">Coding Agentä¹‹Openhandsè§£æ(å«ä»£ç )</a> <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.zhihu.com%2Fpeople%2Fwu-long-ming-cha-56" target="_blank" title="https://www.zhihu.com/people/wu-long-ming-cha-56" ref="nofollow noopener noreferrer">Arrow</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F1940824548485347192" target="_blank" title="https://zhuanlan.zhihu.com/p/1940824548485347192" ref="nofollow noopener noreferrer">OpenHands æºç è§£è¯»</a> <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.zhihu.com%2Fpeople%2Fxiao-hui-66-72" target="_blank" title="https://www.zhihu.com/people/xiao-hui-66-72" ref="nofollow noopener noreferrer">ä¸€åŠ›è¾‰</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F1949931198932586886" target="_blank" title="https://zhuanlan.zhihu.com/p/1949931198932586886" ref="nofollow noopener noreferrer">Anthropic å®˜æ–¹æ•™ç¨‹ï¼šä¸º Agent è®¾è®¡é«˜æ•ˆå·¥å…·çš„æœ€ä½³å®è·µ</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.anthropic.com%2Fengineering%2Fclaude-think-tool" target="_blank" title="https://www.anthropic.com/engineering/claude-think-tool" ref="nofollow noopener noreferrer">The "think" tool: Enabling Claude to stop and think in complex tool use situations</a></p>
<p>æœ¬æ–‡ä½¿ç”¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fmarkdown.com.cn" target="_blank" title="https://markdown.com.cn" ref="nofollow noopener noreferrer">markdown.com.cn</a> æ’ç‰ˆ</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä½¿ç”¨ VS Code å’Œ Android Studio é˜…è¯» Android æºç ï¼šåŸºäº Copilot çš„é«˜æ•ˆä»£ç åˆ†ææŠ€å·§]]></title>    <link>https://juejin.cn/post/7602776926328143926</link>    <guid>https://juejin.cn/post/7602776926328143926</guid>    <pubDate>2026-02-04T13:23:13.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602776926328143926" data-draft-id="7602841282802155561" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä½¿ç”¨ VS Code å’Œ Android Studio é˜…è¯» Android æºç ï¼šåŸºäº Copilot çš„é«˜æ•ˆä»£ç åˆ†ææŠ€å·§"/> <meta itemprop="keywords" content="Android,æºç ,Github Copilot"/> <meta itemprop="datePublished" content="2026-02-04T13:23:13.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å†¬å¥‡Lab"/> <meta itemprop="url" content="https://juejin.cn/user/1857501105781193"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä½¿ç”¨ VS Code å’Œ Android Studio é˜…è¯» Android æºç ï¼šåŸºäº Copilot çš„é«˜æ•ˆä»£ç åˆ†ææŠ€å·§
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1857501105781193/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å†¬å¥‡Lab
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T13:23:13.000Z" title="Wed Feb 04 2026 13:23:13 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1. èƒŒæ™¯</h2>
<p>åœ¨æ—¥å¸¸å¼€å‘ä¸­ï¼Œå¤§å®¶å¸¸ç”¨ AI å·¥å…·ï¼ˆå¦‚ ChatGPTã€DeepSeek ç­‰ï¼‰è¿›è¡Œä»£ç åˆ†æã€‚ä½†é€šè¿‡ç½‘é¡µ AI å·¥å…·åˆ†æä»£ç æ—¶ï¼Œç¼ºä¹ä¸Šä¸‹æ–‡ï¼Œéœ€è¦æ‰‹åŠ¨åˆ†æ®µç²˜è´´ä»£ç ï¼Œæ•ˆç‡ä½ä¸”å®¹æ˜“é—æ¼å…³é”®ä¿¡æ¯ã€‚</p>
<p>å…¬å¸å¼•å…¥ Copilot åï¼Œå¤§å®¶å¤šåœ¨ VS Codeã€Android Studio ç­‰ IDE æ’ä»¶ä¸­ç”¨ Copilot è¿›è¡Œä»£ç åˆ†æã€‚Copilot èƒ½ç›´æ¥åˆ†æå½“å‰ç¼–è¾‘å™¨ä¸­çš„ä»£ç ï¼Œå¹¶æ”¯æŒä¸Šä¸‹æ–‡ï¼Œæå¤§æå‡äº†åˆ†ææ•ˆç‡ï¼Œå‡å°‘äº†äººå·¥ç²˜è´´çš„éº»çƒ¦ã€‚</p>
<p>ä½†å®é™…å¼€å‘ä¸­ï¼Œä»å­˜åœ¨ä»¥ä¸‹ç—›ç‚¹ï¼š</p>
<ul>
<li><strong>ä»£ç è·³è½¬ä¸è¿è´¯</strong>ï¼šå¯¹äº Android.bp soong æ„å»ºç³»ç»Ÿä¸‹çš„ Android ä»£ç ï¼Œä¸èƒ½è‡ªç”±åœ°è·³è½¬åˆ°æ–¹æ³•å®šä¹‰ã€å®ç°ã€ç¬¦å·ç­‰ã€‚</li>
<li><strong>æŸ¥æ‰¾æ–¹æ³•ç¹ç</strong>ï¼šå¤§éƒ¨åˆ† Android framework å¼€å‘ï¼Œæ˜¯é€šè¿‡ VS Code æˆ– Android Studio æ‰“å¼€æ•´ä¸ªé¡¹ç›®ä»£ç æ–‡ä»¶å¤¹ï¼Œç„¶åç”¨å…¨å±€æŸ¥æ‰¾æŒ‡ä»¤å®šä½æ–¹æ³•ã€‚è¿™ä¼šå¯¼è‡´é€šè¿‡ Copilot åˆ†æä»£ç æ—¶éœ€è¦æ‰‹åŠ¨æŸ¥æ‰¾ã€å¤åˆ¶ï¼Œå®¹æ˜“ä¸­æ–­æ€è·¯ï¼Œä¸”æŸ¥æ‰¾ç»“æœä¸ä¸€å®šç²¾å‡†ã€‚</li>
</ul>
<p>å®é™…å¼€å‘ä¸­å‘ç°ï¼Œé€šè¿‡ <strong>aidegen</strong> åœ¨ VS Code å’Œ Android Studio ä¸­é…ç½®æ¨¡å—åŒ–ä»£ç åŠ è½½ç¯å¢ƒï¼Œæ”¯æŒè‡ªåŠ¨è·³è½¬åŠŸèƒ½ï¼Œç»“åˆ Copilot çš„ä¸Šä¸‹æ–‡åˆ†æå’Œåˆ†æ®µè§£é‡Šèƒ½åŠ›ï¼Œå¯ä»¥å®ç°æŒç»­ã€è¿è´¯ä¸”é«˜æ•ˆçš„ä»£ç åˆ†ææµç¨‹ï¼Œä»è€Œæå‡ Android é¡¹ç›®çš„ä»£ç åˆ†æä¸å¼€å‘æ•ˆç‡ï¼Œæœ‰æ•ˆè§£å†³ä¸Šè¿°ç—›ç‚¹ã€‚</p>
<hr/>
<h2 data-id="heading-1">2. åº”ç”¨åœºæ™¯</h2>
<h3 data-id="heading-2">2.1 VS Code + Copilot Android ä»£ç åˆ†æ</h3>
<p>å¯¹äº HAL å±‚å¯é…ç½® VS Code + Copilot Android ä»£ç åˆ†æç¯å¢ƒã€‚</p>
<p>ä¸‹é¢ä»¥åˆ†æ Android ç³»ç»Ÿä¸­çš„ <code>android/bootable/recovery</code> æ¨¡å—ä»£ç æ¥è¯´æ˜å®æ–½æ­¥éª¤ã€‚</p>
<h4 data-id="heading-3">2.1.1 é…ç½® VS Code Android.bp ä»£ç è‡ªåŠ¨è·³è½¬ç¯å¢ƒ</h4>
<p>æŠŠåŸæœ‰çš„ C++ ç›¸å…³çš„æ’ä»¶å¸è½½æ‰ï¼Œå®‰è£… <strong>clangd</strong> æ’ä»¶ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e6c9a5ab857b48319e7114f53be5046b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yas5aWHTGFi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770816197&amp;x-signature=lRiIpGNgdCP0kqkQWCr%2Fvnbzd6w%3D" alt="02-01-clangd-plugin.png" loading="lazy"/></p>
<h4 data-id="heading-4">2.1.2 ä½¿ç”¨ aidegen ç”Ÿæˆ VS Code æ¨¡å—åŒ–å·¥ç¨‹æ–‡ä»¶</h4>
<p><strong>aidegen</strong>ï¼ˆAndroid IDE Generatorï¼‰æ˜¯ Google æä¾›çš„ä¸€ä¸ªç”¨äº Android å¼€å‘çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œä¸»è¦ç”¨äºè‡ªåŠ¨ç”Ÿæˆé€‚ç”¨äº IDEï¼ˆå¦‚ Android Studioã€IntelliJ IDEAã€VS Code ç­‰ï¼‰çš„å·¥ç¨‹æ–‡ä»¶ã€‚</p>
<p>å®ƒå¯ä»¥å¸®åŠ©å¼€å‘è€…å¿«é€ŸæŠŠ Android æºç ä¸­çš„æŸä¸ªæ¨¡å—ï¼ˆå¦‚ appã€frameworkã€JNIã€native ä»£ç ç­‰ï¼‰å¯¼å…¥åˆ° IDE é‡Œï¼Œæ–¹ä¾¿ä»£ç é˜…è¯»ã€è°ƒè¯•å’Œæ™ºèƒ½è·³è½¬ã€‚</p>
<p>åœ¨ android ä»£ç è·¯å¾„ä¸‹ï¼ˆä¾‹ï¼š<code>/workspace/tegu/android</code>ï¼‰æ‰§è¡Œå¦‚ä¸‹ç¼–è¯‘æŒ‡ä»¤ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">source</span> lunch
<span class="hljs-built_in">source</span> build/envsetup.sh
lunch ï¼ˆå¯¹åº”productï¼‰
<span class="hljs-built_in">cd</span> bootable/recovery
aidegen -i v -s
</code></pre>
<p>æ‰§è¡Œä¸Šé¢æŒ‡ä»¤åï¼ŒVS Code ä¼šè¢«è‡ªåŠ¨æ‹‰èµ·æ¥ï¼Œå¹¶ä¼šåœ¨å½“å‰ç›®å½•ç”Ÿæˆå·¥ç¨‹æ–‡ä»¶ <code>bootable.recovery.code-workspace</code>ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2abdaac3fa214a74ac4537a13236f435~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yas5aWHTGFi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770816197&amp;x-signature=u1HUUf5usULadfhvWf3E3JWPiJs%3D" alt="02-02-aidegen.png" loading="lazy"/></p>
<p><strong>å¤‡æ³¨</strong>ï¼š</p>
<p><code>aidegen -i v -s</code> ä¸ä»…å¯ä»¥å¯¹å•ç‹¬æ¨¡å—ç”Ÿæˆå·¥ç¨‹æ–‡ä»¶ï¼Œè¿˜å¯ä»¥å¯¹æŸä¸ªè·¯å¾„ä¸‹çš„æ‰€æœ‰æ¨¡å—ç”Ÿæˆä¸€ä¸ªå·¥ç¨‹æ–‡ä»¶ï¼Œåœ¨ç›¸å…³è·¯å¾„ä¸‹æ‰§è¡Œå³å¯ã€‚</p>
<h4 data-id="heading-5">2.1.3 VS Code ä¸­é…ç½®å·¥ç¨‹æ–‡ä»¶</h4>
<p>VS Code è¢«è‡ªåŠ¨æ‹‰èµ·æ¥åå·¥ä½œç©ºé—´å¦‚ä¸‹ï¼Œå…¶ä¼šè‡ªåŠ¨åŠ è½½å½“å‰æ¨¡å—ä»£ç å’Œ <code>bootable.recovery.code-workspace</code> æ–‡ä»¶ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/16fedd70773a4823abf78c8805666a97~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yas5aWHTGFi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770816197&amp;x-signature=u3l3ZhRGqDTMkWjTx2CC1umNK9c%3D" alt="02-03-vscode-config1.png" loading="lazy"/></p>
<p>åœ¨ç”Ÿæˆçš„ <code>bootable.recovery.code-workspace</code> æ–‡ä»¶ä¸­æ·»åŠ å¦‚ä¸‹è“è‰²æ¡†å†…çš„å…¨å±€é…ç½®ï¼Œçº¢è‰²æ¡†çš„å†…å®¹éœ€æ ¹æ®ä¸åŒé¡¹ç›®çš„ out è·¯å¾„è¿›è¡Œé…ç½®ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8a600bc961024f639f7e968cca87634b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yas5aWHTGFi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770816197&amp;x-signature=XzGzohYvcdZ6Z4P3YeDjj5U%2Bfxc%3D" alt="02-04-vscode-config2.png" loading="lazy"/></p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"folders"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
        <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"bootable.recovery"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"path"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"/home/workspace/tegu/android/bootable/recovery"</span>
        <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"settings"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"clangd.arguments"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
            <span class="hljs-string">"--compile-commands-dir=/home/workspace/tegu/android/out/soong/development/ide/compdb"</span>
        <span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h4 data-id="heading-6">2.1.4 é‡æ–°åŠ è½½æ›´æ”¹åçš„é…ç½®</h4>
<p>é…ç½®å®Œæˆåå…³é—­å½“å‰ VS Codeï¼Œå³é”®ä¿®æ”¹åçš„ <code>bootable.recovery.code-workspace</code> æ–‡ä»¶ï¼Œä½¿ç”¨ VS Code é‡æ–°æ‰“å¼€ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7b8ac7815a4348a29d72ec2451fc7df1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yas5aWHTGFi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770816197&amp;x-signature=OSQ2qZSzUDkrS9aXLEdw5YxZWgw%3D" alt="02-05-open-new-workspace.png" loading="lazy"/></p>
<h4 data-id="heading-7">2.1.5 æ£€æŸ¥é…ç½®æ˜¯å¦æˆåŠŸ</h4>
<p>ç¬¬ä¸€æ¬¡é…ç½®çš„æ—¶å€™ï¼ŒVS Code å³ä¸‹è§’ä¼šæç¤ºå®‰è£… clangd çš„ç›¸å…³ä¾èµ–å‹ç¼©åŒ…ï¼ŒæŒ‰ç…§æç¤ºç‚¹å‡»å…è®¸å¹¶è¿›è¡Œä¸‹è½½ã€‚</p>
<p>ä¸‹è½½å®Œæˆåå†é‡å¤æ­¥éª¤ 2.1.4 å³å¯ã€‚</p>
<p>é…ç½®æˆåŠŸçš„æƒ…å†µä¸‹ï¼Œç›¸å…³æ–¹æ³•æœ‰äº†æç¤ºï¼Œå¹¶å¯ä»¥è‡ªç”±è·³è½¬ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/955a593fe6124a0a996df463beedc3f0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yas5aWHTGFi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770816197&amp;x-signature=LcLOBGlq5wm3dDXrnbWxeuPrl7c%3D" alt="02-06-vscode-config-success.png" loading="lazy"/></p>
<h4 data-id="heading-8">2.1.6 ä½¿ç”¨ Copilot æ•´ä½“åˆ†æè¯¥æ¨¡å—ä»£ç </h4>
<p>ä¸Šä¸‹æ–‡æ·»åŠ å½“å‰å·¥ç¨‹æ–‡ä»¶ï¼Œå¹¶è¯¢é—®ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d517f4e69b0d430cb25e0e10a0fe4714~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yas5aWHTGFi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770816197&amp;x-signature=hyWrZ0IVZ%2F%2BZhSNVorltPSLOBV8%3D" alt="02-07-analyse-code-with-copilot1.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a3c386e501e94ca8b0374940205f7f7e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yas5aWHTGFi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770816197&amp;x-signature=C%2BUbnu4QjAVIZE2tTiBj%2FAJYM94%3D" alt="02-08-analyse-code-with-copilot2.png" loading="lazy"/></p>
<p>ä¸Šé¢ç›¸å…³çš„æ–‡ä»¶å¤¹å’Œæ–‡ä»¶ä¼šç”Ÿæˆé“¾æ¥ï¼Œéƒ½å¯ä»¥ç‚¹å‡»è¿›è¡ŒæŸ¥çœ‹/è¯¢é—®/åˆ†æã€‚</p>
<h4 data-id="heading-9">2.1.7 ç»“åˆè‡ªç”±è·³è½¬åŠŸèƒ½ï¼Œä½¿ç”¨ Copilot è¿›è¡ŒæŒç»­åˆ†æ</h4>
<p>å…‰æ ‡å®šä½åˆ°æŸä¸€ä¸ªæ–¹æ³•ä¸Šï¼Œ<code>CTRL + é¼ æ ‡å·¦é”®</code> ç‚¹å‡»ï¼Œå³å¯è·³è½¬åˆ°å…·ä½“å®ç°æ–¹æ³•ä¸­ï¼ˆåŒ…æ‹¬éæœ¬æ¨¡å—çš„æ–¹æ³•å®ç°ï¼Œå¦‚æœ¬æ¨¡å—æ‰€ä¾èµ–çš„åŸç”Ÿåº“æ–¹æ³•å®ç°ä¹Ÿå¯ä»¥è·³è½¬æŸ¥çœ‹å®ç°ï¼‰ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3f4597066ebd48fbad8863d04096d2d7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yas5aWHTGFi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770816197&amp;x-signature=x4CH3u3ahpkuC95DoVYDEp9Vs94%3D" alt="02-09-analyse-code-with-copilot3.png" loading="lazy"/></p>
<h4 data-id="heading-10">2.1.8 é…ç½®å…‰æ ‡å‰è¿›å’Œè¿”å›å¿«æ·é”®</h4>
<p>å¯ä»¥å¯¹å…‰æ ‡çš„å‰è¿›å’Œè¿”å›é…ç½®è‡ªå·±ä¹ æƒ¯çš„å¿«æ·é”®ã€‚</p>
<p>é…ç½®åçš„å¥½å¤„ï¼šæ¯”å¦‚å½“å‰å…‰æ ‡åœ¨æ–¹æ³• A ä¸Šï¼Œç„¶åè·³è½¬åˆ°å¦ä¸€ä¸ªæ–‡ä»¶çš„æ–¹æ³• B ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å…‰æ ‡è¿”å›å¿«æ·é”®å†å›åˆ° Aï¼Œæˆ–è€…å†å‰è¿›åˆ° Bã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/46bef34fe4e54778bc1454da05874e82~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yas5aWHTGFi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770816197&amp;x-signature=73dHYQa7fzNs1Urzb%2B8OTFIkMgA%3D" alt="02-10-hotkey-config.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7ec5a9f52fd9492cb781935acf76939d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yas5aWHTGFi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770816197&amp;x-signature=79a96wkKSVuy%2Br8QstcsmxFf4Cs%3D" alt="02-11-hotkey-config2.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c6bc4fe2f80a40a3a818476cdabd0049~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yas5aWHTGFi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770816197&amp;x-signature=6DwmeGJpZCqilK0o3A0IR7J3nRA%3D" alt="02-12-hotkey-config3.png" loading="lazy"/></p>
<p>AI å·¥å…·ä¼šè‡ªåŠ¨é”å®šå½“å‰æŸ¥çœ‹çš„æ–‡ä»¶å’Œä»£ç è¡Œï¼Œå› æ­¤å¯ä»¥ç›´æ¥å¸®åŠ©åˆ†æã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6100bf5486cb4919805505917884ac9c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yas5aWHTGFi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770816197&amp;x-signature=MFYDOOpmatccRJsYPrKKM3oqhHY%3D" alt="02-13-read-code-with-copolit.png" loading="lazy"/></p>
<p>ä¹Ÿå¯ä»¥é’ˆå¯¹å½“å‰å…‰æ ‡æŸè¡Œè¿›è¡Œè¯¢é—®ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/26634c05d2604a31b58afc45b088910c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yas5aWHTGFi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770816197&amp;x-signature=Haj0ovCalzc958iMDqH64SBX1c8%3D" alt="02-14-read-code-with-copolit2.png" loading="lazy"/></p>
<hr/>
<h3 data-id="heading-11">2.2 Android Studio + Copilot Android ä»£ç åˆ†æ</h3>
<p>å¯¹äº JAVA å±‚å¯é…ç½® Android Studio + Copilot Android ä»£ç åˆ†æç¯å¢ƒã€‚</p>
<p>ä¸‹é¢ä»¥åˆ†æ Android é¡¹ç›®ä»£ç ä¸­ <code>android/packages/apps/Music</code> æ¨¡å—ä»£ç æ¥è¯´æ˜å®æ–½æ­¥éª¤ã€‚</p>
<h4 data-id="heading-12">2.2.1 ä½¿ç”¨ aidegen ç”Ÿæˆ Android Studio æ¨¡å—åŒ–å·¥ç¨‹æ–‡ä»¶</h4>
<p><strong>aidegen</strong>ï¼ˆAndroid IDE Generatorï¼‰æ˜¯ Google æä¾›çš„ä¸€ä¸ªç”¨äº Android å¼€å‘çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œä¸»è¦ç”¨äºè‡ªåŠ¨ç”Ÿæˆé€‚ç”¨äº IDEï¼ˆå¦‚ Android Studioã€IntelliJ IDEAã€VS Code ç­‰ï¼‰çš„å·¥ç¨‹æ–‡ä»¶ã€‚</p>
<p>å®ƒå¯ä»¥å¸®åŠ©å¼€å‘è€…å¿«é€ŸæŠŠ Android æºç ä¸­çš„æŸä¸ªæ¨¡å—ï¼ˆå¦‚ appã€frameworkã€JNIã€native ä»£ç ç­‰ï¼‰å¯¼å…¥åˆ° IDE é‡Œï¼Œæ–¹ä¾¿ä»£ç é˜…è¯»ã€è°ƒè¯•å’Œæ™ºèƒ½è·³è½¬ã€‚</p>
<p>åœ¨ android ä»£ç è·¯å¾„ä¸‹ï¼ˆä¾‹ï¼š<code>/workspace/tegu/android</code>ï¼‰æ‰§è¡Œå¦‚ä¸‹ç¼–è¯‘æŒ‡ä»¤ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">source</span> lunch
<span class="hljs-built_in">source</span> build/envsetup.sh
lunch ï¼ˆå¯¹åº”productï¼‰
</code></pre>
<p>æŸ¥çœ‹ <code>android/packages/apps/Music</code> ç¼–è¯‘é…ç½®ä¸­çš„æ¨¡å—åï¼š</p>
<pre><code class="hljs language-bash" lang="bash">android/packages/apps/Music$ <span class="hljs-built_in">cat</span> Android.bp
</code></pre>
<pre><code class="hljs language-bp" lang="bp">android_app {
    name: "Music", //æ¨¡å—åä¸º Music
    srcs: ["src/**/*.java"],
    resource_dirs: ["kotlin/res"],
    sdk_version: "current",
    product_specific: true,
    optimize: {
        proguard_flags_files: ["proguard.flags"],
    },
}
</code></pre>
<p>æ‰§è¡Œï¼š</p>
<pre><code class="hljs language-bash" lang="bash">aidegen Music -i s -p &lt;your_android_studio_path&gt;/bin
</code></pre>
<p>å…¶ä¸­ <code>&lt;your_android_studio_path&gt;</code> æ›¿æ¢ä¸ºä½ æœ¬åœ° Android Studio çš„å®é™…å®‰è£…è·¯å¾„ã€‚</p>
<p>ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">aidegen Music -i s -p /soft/android-studio-2022.1.1.21-linux/android-studio/bin
</code></pre>
<p>æ‰§è¡Œä¸Šé¢æŒ‡ä»¤åï¼ŒAndroid Studio ä¼šè¢«è‡ªåŠ¨æ‹‰èµ·æ¥ï¼Œè‡ªåŠ¨ç”Ÿæˆæ¨¡å—åŒ–é…ç½®ç¯å¢ƒã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/594909bd729e480499c0e2d9b4dc80ad~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yas5aWHTGFi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770816197&amp;x-signature=3TQg6SjK9nKW9ZMZg4xtdJCdpGw%3D" alt="02-15-open-workspace-with-as.png" loading="lazy"/></p>
<p>å¹¶ä¸”ä¼šè‡ªåŠ¨ç”Ÿæˆæœ¬æ¨¡å—çš„å¤–éƒ¨ä¾èµ–ï¼Œæ”¯æŒè·³è½¬åˆ°ä¾èµ–æ¨¡å—ï¼Œæ–¹ä¾¿æŸ¥çœ‹ç›¸å…³è°ƒç”¨çš„å…·ä½“ä»£ç å®ç°ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1ce50782af1f4fd2bf4b3a31250d3b9a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yas5aWHTGFi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770816197&amp;x-signature=Wpiarf7YHqZf3PaWHNcwagSaRmE%3D" alt="02-16-open-workspace-with-as2.png" loading="lazy"/></p>
<p>å·¥ç¨‹é…ç½®æˆåŠŸåï¼Œå³å¯å®ç°ä»£ç çš„è‡ªç”±è·³è½¬ï¼Œå¹¶ç»“åˆ Copilot çš„ä¸Šä¸‹æ–‡åˆ†æå’Œåˆ†æ®µè§£é‡Šèƒ½åŠ›ï¼Œè¿›è¡ŒæŒç»­çš„ä»£ç åˆ†æï¼Œå…¶åˆ†ææµç¨‹ä¸ VS Code ç¯å¢ƒåˆ†ææµç¨‹ç±»ä¼¼ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e5dedad85e8246799275a2bb0ae843a9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yas5aWHTGFi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770816197&amp;x-signature=Z65Pq0oWeiAiB8N2X0zjYzH7BRY%3D" alt="02-17-open-workspace-with-as3.png" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-13">3. æ€»ç»“</h2>
<p>é€šè¿‡ä½¿ç”¨ <strong>aidegen</strong> å·¥å…·é…ç½® VS Code å’Œ Android Studio çš„æ¨¡å—åŒ–ä»£ç ç¯å¢ƒï¼Œç»“åˆ <strong>Copilot</strong> çš„ä¸Šä¸‹æ–‡åˆ†æèƒ½åŠ›ï¼Œå¯ä»¥å®ç°ï¼š</p>
<ul>
<li>âœ… <strong>è‡ªç”±ä»£ç è·³è½¬</strong>ï¼šæ”¯æŒæ–¹æ³•å®šä¹‰ã€å®ç°ã€ç¬¦å·çš„å¿«é€Ÿè·³è½¬</li>
<li>âœ… <strong>é«˜æ•ˆä»£ç åˆ†æ</strong>ï¼šCopilot è‡ªåŠ¨é”å®šå½“å‰æ–‡ä»¶å’Œä»£ç è¡Œï¼Œæä¾›ç²¾å‡†åˆ†æ</li>
<li>âœ… <strong>æŒç»­è¿è´¯åˆ†æ</strong>ï¼šæ— éœ€æ‰‹åŠ¨æŸ¥æ‰¾å’Œå¤åˆ¶ä»£ç ï¼Œä¿æŒåˆ†ææ€è·¯è¿è´¯</li>
<li>âœ… <strong>å¤šæ¨¡å—æ”¯æŒ</strong>ï¼šå¯ä»¥åˆ†æå•ä¸ªæ¨¡å—æˆ–æ•´ä¸ªè·¯å¾„ä¸‹çš„æ‰€æœ‰æ¨¡å—</li>
</ul>
<p>è¿™å¥—æ–¹æ¡ˆæœ‰æ•ˆè§£å†³äº† Android æºç é˜…è¯»ä¸­çš„ä»£ç è·³è½¬å’ŒæŸ¥æ‰¾é—®é¢˜ï¼Œå¤§å¹…æå‡äº†ä»£ç åˆ†ææ•ˆç‡ã€‚</p>
<hr/>
<p><em>æ¬¢è¿æ¥æˆ‘ä¸­çš„<a href="https://link.juejin.cn?target=https%3A%2F%2Fhome.wonlab.top" target="_blank" title="https://home.wonlab.top" ref="nofollow noopener noreferrer">ä¸ªäººä¸»é¡µ</a>æ‰¾åˆ°æ›´å¤šæœ‰ç”¨çš„çŸ¥è¯†å’Œæœ‰è¶£çš„äº§å“</em></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[MySQL ä¸­çš„é€»è¾‘è¯»ä¸ç‰©ç†è¯»ï¼šæ·±å…¥ç†è§£ InnoDB çš„ I/O è¡Œä¸º]]></title>    <link>https://juejin.cn/post/7602824293164580879</link>    <guid>https://juejin.cn/post/7602824293164580879</guid>    <pubDate>2026-02-04T13:28:32.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602824293164580879" data-draft-id="7602554905271730176" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="MySQL ä¸­çš„é€»è¾‘è¯»ä¸ç‰©ç†è¯»ï¼šæ·±å…¥ç†è§£ InnoDB çš„ I/O è¡Œä¸º"/> <meta itemprop="keywords" content="MySQL"/> <meta itemprop="datePublished" content="2026-02-04T13:28:32.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å“ˆé‡Œè°¢é¡¿"/> <meta itemprop="url" content="https://juejin.cn/user/3678304397695056"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            MySQL ä¸­çš„é€»è¾‘è¯»ä¸ç‰©ç†è¯»ï¼šæ·±å…¥ç†è§£ InnoDB çš„ I/O è¡Œä¸º
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3678304397695056/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å“ˆé‡Œè°¢é¡¿
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T13:28:32.000Z" title="Wed Feb 04 2026 13:28:32 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ MySQL æ€§èƒ½è°ƒä¼˜å’Œæ•°æ®åº“åŸç†å­¦ä¹ ä¸­ï¼Œ <strong>â€œé€»è¾‘è¯»â€ï¼ˆLogical Readï¼‰</strong> å’Œ <strong>â€œç‰©ç†è¯»â€ï¼ˆPhysical Readï¼‰</strong> æ˜¯ä¸¤ä¸ªæ ¸å¿ƒä½†å¸¸è¢«æ··æ·†çš„æ¦‚å¿µã€‚å®ƒä»¬ç›´æ¥å…³ç³»åˆ°æŸ¥è¯¢æ€§èƒ½ã€ç¼“å­˜æ•ˆç‡ä»¥åŠç£ç›˜ I/O å‹åŠ›ã€‚æœ¬æ–‡å°†å¸¦ä½ æ·±å…¥ InnoDB å­˜å‚¨å¼•æ“å†…éƒ¨ï¼Œå½»åº•ææ‡‚è¿™ä¸¤ä¸ªæ¦‚å¿µçš„åŒºåˆ«ã€è”ç³»åŠå…¶å¯¹ç³»ç»Ÿæ€§èƒ½çš„å½±å“ã€‚</p>
<hr/>
<h2 data-id="heading-0">ä¸€ã€ä»€ä¹ˆæ˜¯é€»è¾‘è¯»ï¼Ÿä»€ä¹ˆæ˜¯ç‰©ç†è¯»ï¼Ÿ</h2>
<h3 data-id="heading-1">âœ… é€»è¾‘è¯»ï¼ˆLogical Readï¼‰</h3>
<ul>
<li>
<p><strong>å®šä¹‰</strong>ï¼šä» <strong>InnoDB ç¼“å†²æ± ï¼ˆBuffer Poolï¼‰</strong> ä¸­è¯»å–æ•°æ®é¡µçš„æ“ä½œã€‚</p>
</li>
<li>
<p><strong>ç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li>ä¸æ¶‰åŠç£ç›˜ I/Oï¼›</li>
<li>é€Ÿåº¦æå¿«ï¼ˆå†…å­˜è®¿é—®ï¼Œçº³ç§’çº§ï¼‰ï¼›</li>
<li>æ˜¯æ•°æ®åº“é«˜æ•ˆè¿è¡Œçš„å…³é”®ã€‚</li>
</ul>
</li>
<li>
<p><strong>åˆ«å</strong>ï¼šä¹Ÿç§°ä¸º <strong>â€œç¼“å­˜å‘½ä¸­è¯»â€</strong> æˆ– <strong>â€œå†…å­˜è¯»â€</strong> ã€‚</p>
</li>
</ul>
<h3 data-id="heading-2">âœ… ç‰©ç†è¯»ï¼ˆPhysical Readï¼‰</h3>
<ul>
<li>
<p><strong>å®šä¹‰</strong>ï¼šå½“æ‰€éœ€æ•°æ®é¡µ <strong>ä¸åœ¨ Buffer Pool ä¸­</strong> æ—¶ï¼Œä» <strong>ç£ç›˜ï¼ˆæˆ– SSDï¼‰</strong> åŠ è½½æ•°æ®é¡µåˆ° Buffer Pool çš„æ“ä½œã€‚</p>
</li>
<li>
<p><strong>ç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li>æ¶‰åŠç£ç›˜ I/Oï¼ˆæ¯«ç§’çº§ï¼Œæ¯”å†…å­˜æ…¢ç™¾ä¸‡å€ï¼‰ï¼›</li>
<li>æ˜¯æ€§èƒ½ç“¶é¢ˆçš„ä¸»è¦æ¥æºï¼›</li>
<li>ä¼šå¢åŠ ç³»ç»Ÿè´Ÿè½½å’Œå“åº”å»¶è¿Ÿã€‚</li>
</ul>
</li>
<li>
<p><strong>åˆ«å</strong>ï¼šä¹Ÿç§°ä¸º <strong>â€œç£ç›˜è¯»â€</strong> æˆ– <strong>â€œç¼“å­˜æœªå‘½ä¸­è¯»â€</strong> ã€‚</p>
</li>
</ul>
<blockquote>
<p>ğŸ“Œ <strong>ä¸€å¥è¯æ€»ç»“</strong>ï¼š<br/>
<strong>é€»è¾‘è¯» = è¯»å†…å­˜ï¼Œç‰©ç†è¯» = è¯»ç£ç›˜ã€‚</strong></p>
</blockquote>
<hr/>
<h2 data-id="heading-3">äºŒã€InnoDB çš„æ•°æ®è¯»å–æµç¨‹ï¼ˆå›¾è§£ï¼‰</h2>
<pre><code class="hljs language-css" lang="css">graph <span class="hljs-selector-tag">TD</span>
    <span class="hljs-selector-tag">A</span><span class="hljs-selector-attr">[æ‰§è¡Œ SQL æŸ¥è¯¢]</span> --&gt; <span class="hljs-selector-tag">B</span>{æ‰€éœ€æ•°æ®é¡µæ˜¯å¦åœ¨ Buffer Pool?}
    <span class="hljs-selector-tag">B</span> -- æ˜¯ --&gt; C<span class="hljs-selector-attr">[ç›´æ¥è¿”å›æ•°æ®&lt;br/&gt;ï¼ˆé€»è¾‘è¯»ï¼‰]</span>
    <span class="hljs-selector-tag">B</span> -- å¦ --&gt; D<span class="hljs-selector-attr">[ä»ç£ç›˜è¯»å–æ•°æ®é¡µåˆ° Buffer Pool&lt;br/&gt;ï¼ˆç‰©ç†è¯»ï¼‰]</span>
    D --&gt; E<span class="hljs-selector-attr">[è¿”å›æ•°æ®&lt;br/&gt;ï¼ˆåç»­è¯»å˜ä¸ºé€»è¾‘è¯»ï¼‰]</span>
</code></pre>
<ol>
<li>
<p>MySQL æ¥æ”¶åˆ°æŸ¥è¯¢è¯·æ±‚ï¼›</p>
</li>
<li>
<p>InnoDB å¼•æ“æ ¹æ®ç´¢å¼•æˆ–ä¸»é”®å®šä½åˆ°ç›®æ ‡æ•°æ®é¡µï¼›</p>
</li>
<li>
<p>æ£€æŸ¥è¯¥é¡µæ˜¯å¦å·²åœ¨ <strong>Buffer Pool</strong> ä¸­ï¼š</p>
<ul>
<li>å¦‚æœåœ¨ â†’ <strong>é€»è¾‘è¯»</strong>ï¼Œç›´æ¥è¿”å›ï¼›</li>
<li>å¦‚æœä¸åœ¨ â†’ è§¦å‘ <strong>ç‰©ç†è¯»</strong>ï¼Œä»ç£ç›˜åŠ è½½ï¼›</li>
</ul>
</li>
<li>
<p>ç‰©ç†è¯»åï¼Œæ•°æ®é¡µè¢«ç¼“å­˜ï¼Œ<strong>ä¸‹æ¬¡ç›¸åŒæŸ¥è¯¢å°†å‘½ä¸­é€»è¾‘è¯»</strong>ã€‚</p>
</li>
</ol>
<hr/>
<h2 data-id="heading-4">ä¸‰ã€å¦‚ä½•æŸ¥çœ‹é€»è¾‘è¯»ä¸ç‰©ç†è¯»çš„ç»Ÿè®¡ä¿¡æ¯ï¼Ÿ</h2>
<p>MySQL æä¾›äº†ä¸°å¯Œçš„æ€§èƒ½ç›‘æ§æŒ‡æ ‡ï¼Œå¯é€šè¿‡ä»¥ä¸‹æ–¹å¼æŸ¥çœ‹ï¼š</p>
<h3 data-id="heading-5">æ–¹æ³•1ï¼šä½¿ç”¨ <code>SHOW ENGINE INNODB STATUS</code></h3>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">SHOW</span> ENGINE INNODB STATUS\G
</code></pre>
<p>åœ¨è¾“å‡ºçš„ <strong>BUFFER POOL AND MEMORY</strong> éƒ¨åˆ†ï¼Œä½ ä¼šçœ‹åˆ°ï¼š</p>
<pre><code class="hljs language-erlang" lang="erlang">Pages made young ..., <span class="hljs-keyword">not</span> young ...
Pages read ..., created ..., written ...
Number <span class="hljs-keyword">of</span> rows inserted ..., updated ..., deleted ..., read ...
</code></pre>
<p>å…¶ä¸­ <code>Pages read</code> è¡¨ç¤º <strong>ç‰©ç†è¯»çš„é¡µæ•°</strong>ã€‚</p>
<hr/>
<h3 data-id="heading-6">æ–¹æ³•2ï¼šæŸ¥è¯¢ <code>information_schema.GLOBAL_STATUS</code></h3>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- é€»è¾‘è¯»ï¼ˆInnoDB ç¼“å†²æ± è¯»å–æ¬¡æ•°ï¼‰</span>
<span class="hljs-keyword">SHOW</span> <span class="hljs-keyword">GLOBAL</span> STATUS <span class="hljs-keyword">LIKE</span> <span class="hljs-string">'Innodb_buffer_pool_read_requests'</span>;

<span class="hljs-comment">-- ç‰©ç†è¯»ï¼ˆä»ç£ç›˜è¯»å–çš„æ¬¡æ•°ï¼‰</span>
<span class="hljs-keyword">SHOW</span> <span class="hljs-keyword">GLOBAL</span> STATUS <span class="hljs-keyword">LIKE</span> <span class="hljs-string">'Innodb_buffer_pool_reads'</span>;
</code></pre>
<h4 data-id="heading-7">è®¡ç®—ç¼“å­˜å‘½ä¸­ç‡ï¼ˆå…³é”®æŒ‡æ ‡ï¼ï¼‰</h4>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">SELECT</span> 
  (<span class="hljs-number">1</span> <span class="hljs-operator">-</span> 
    Innodb_buffer_pool_reads <span class="hljs-operator">/</span> Innodb_buffer_pool_read_requests
  ) <span class="hljs-operator">*</span> <span class="hljs-number">100</span> <span class="hljs-keyword">AS</span> buffer_pool_hit_rate
<span class="hljs-keyword">FROM</span> 
  information_schema.GLOBAL_STATUS
<span class="hljs-keyword">WHERE</span> Variable_name <span class="hljs-keyword">IN</span> (<span class="hljs-string">'Innodb_buffer_pool_reads'</span>, <span class="hljs-string">'Innodb_buffer_pool_read_requests'</span>);
</code></pre>
<ul>
<li><strong>ç†æƒ³å€¼</strong>ï¼š <strong>&gt; 99%</strong> ï¼ˆå³ 99% çš„è¯»æ¥è‡ªå†…å­˜ï¼‰</li>
<li><strong>è­¦æˆ’çº¿</strong>ï¼š&lt; 95% â†’ å¯èƒ½éœ€è¦å¢å¤§ <code>innodb_buffer_pool_size</code></li>
</ul>
<blockquote>
<p>ğŸ’¡ ç¤ºä¾‹ï¼š<br/>
è‹¥ <code>Innodb_buffer_pool_read_requests = 1,000,000</code>ï¼Œ<br/>
<code>Innodb_buffer_pool_reads = 10,000</code>ï¼Œ<br/>
åˆ™å‘½ä¸­ç‡ = (1 - 10,000 / 1,000,000) Ã— 100% = <strong>99%</strong> âœ…</p>
</blockquote>
<hr/>
<h2 data-id="heading-8">å››ã€å½±å“é€»è¾‘è¯»/ç‰©ç†è¯»çš„å› ç´ </h2>



































<table><thead><tr><th>å› ç´ </th><th>å¯¹é€»è¾‘è¯»çš„å½±å“</th><th>å¯¹ç‰©ç†è¯»çš„å½±å“</th></tr></thead><tbody><tr><td><strong>Buffer Pool å¤§å°</strong></td><td>è¶Šå¤§ï¼Œé€»è¾‘è¯»è¶Šå¤š</td><td>è¶Šå°ï¼Œç‰©ç†è¯»è¶Šå¤š</td></tr><tr><td><strong>æ•°æ®è®¿é—®æ¨¡å¼</strong></td><td>çƒ­ç‚¹æ•°æ®å¤š â†’ é€»è¾‘è¯»é«˜</td><td>å…¨è¡¨æ‰«æ/å†·æ•°æ® â†’ ç‰©ç†è¯»é«˜</td></tr><tr><td><strong>æŸ¥è¯¢æ˜¯å¦èµ°ç´¢å¼•</strong></td><td>ç´¢å¼•è¦†ç›– â†’ å‡å°‘é¡µè¯»å–é‡</td><td>å…¨è¡¨æ‰«æ â†’ å¤§é‡ç‰©ç†è¯»</td></tr><tr><td><strong>æœåŠ¡å™¨é‡å¯</strong></td><td>Buffer Pool æ¸…ç©º â†’ åˆæœŸç‰©ç†è¯»æ¿€å¢</td><td>â€”</td></tr><tr><td><strong>å¹¶å‘æŸ¥è¯¢</strong></td><td>å…±äº«çƒ­ç‚¹é¡µ â†’ æå‡é€»è¾‘è¯»æ¯”ä¾‹</td><td>äº‰æŠ¢ I/O â†’ ç‰©ç†è¯»æ’é˜Ÿ</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-9">äº”ã€ä¼˜åŒ–å»ºè®®ï¼šå¦‚ä½•å‡å°‘ç‰©ç†è¯»ï¼Œæå‡é€»è¾‘è¯»ï¼Ÿ</h2>
<h3 data-id="heading-10">âœ… 1. <strong>åˆç†é…ç½® <code>innodb_buffer_pool_size</code></strong></h3>
<ul>
<li>å»ºè®®è®¾ç½®ä¸º <strong>ç‰©ç†å†…å­˜çš„ 50%~75%</strong> ï¼ˆä¸“ç”¨æ•°æ®åº“æœåŠ¡å™¨ï¼‰ï¼›</li>
<li>ç›‘æ§å‘½ä¸­ç‡ï¼ŒåŠ¨æ€è°ƒæ•´ã€‚</li>
</ul>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># my.cnf</span>
<span class="hljs-section">[mysqld]</span>
<span class="hljs-attr">innodb_buffer_pool_size</span> = <span class="hljs-number">8</span>G
</code></pre>
<h3 data-id="heading-11">âœ… 2. <strong>è®¾è®¡é«˜æ•ˆç´¢å¼•ï¼Œé¿å…å…¨è¡¨æ‰«æ</strong></h3>
<ul>
<li>ä½¿ç”¨ <strong>è¦†ç›–ç´¢å¼•ï¼ˆCovering Indexï¼‰</strong> å‡å°‘å›è¡¨ï¼›</li>
<li>ç¡®ä¿ <code>WHERE</code>ã€<code>ORDER BY</code> å­—æ®µèƒ½åˆ©ç”¨ç´¢å¼•ã€‚</li>
</ul>
<h3 data-id="heading-12">âœ… 3. <strong>é¢„çƒ­ Buffer Poolï¼ˆé€‚ç”¨äºé‡å¯åï¼‰</strong></h3>
<ul>
<li>
<p>MySQL 5.6+ æ”¯æŒ <strong>Buffer Pool é¢„çƒ­/è½¬å‚¨</strong>ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">innodb_buffer_pool_dump_at_shutdown</span> = <span class="hljs-literal">ON</span>
<span class="hljs-attr">innodb_buffer_pool_load_at_startup</span> = <span class="hljs-literal">ON</span>
</code></pre>
</li>
<li>
<p>é‡å¯æ—¶è‡ªåŠ¨åŠ è½½ä¸Šæ¬¡çš„çƒ­ç‚¹é¡µï¼Œé¿å…â€œå†·å¯åŠ¨â€é—®é¢˜ã€‚</p>
</li>
</ul>
<h3 data-id="heading-13">âœ… 4. <strong>é¿å…å¤§ç»“æœé›†æŸ¥è¯¢</strong></h3>
<ul>
<li>åˆ†é¡µä½¿ç”¨æ¸¸æ ‡ï¼ˆ<code>WHERE id &gt; last_id</code>ï¼‰è€Œé <code>LIMIT 100000, 10</code>ï¼›</li>
<li>é™åˆ¶å•æ¬¡æŸ¥è¯¢è¿”å›è¡Œæ•°ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-14">å…­ã€å¸¸è§è¯¯åŒºæ¾„æ¸…</h2>
<h3 data-id="heading-15">âŒ è¯¯åŒº1ï¼šâ€œé€»è¾‘è¯»å°±æ˜¯ SELECT æ¬¡æ•°â€</h3>
<ul>
<li><strong>çº æ­£</strong>ï¼šé€»è¾‘è¯»æ˜¯ <strong>â€œé¡µè¯»å–æ¬¡æ•°â€</strong> ï¼Œä¸æ˜¯è¡Œæ•°æˆ– SQL æ¡æ•°ã€‚<br/>
ä¸€æ¡ <code>SELECT * FROM big_table</code> å¯èƒ½è§¦å‘ä¸Šä¸‡æ¬¡é€»è¾‘è¯»ï¼</li>
</ul>
<h3 data-id="heading-16">âŒ è¯¯åŒº2ï¼šâ€œç‰©ç†è¯»è¶Šå°‘è¶Šå¥½ï¼Œæœ€å¥½ä¸º 0â€</h3>
<ul>
<li><strong>çº æ­£</strong>ï¼šæ–°æ•°æ®é¦–æ¬¡è®¿é—®å¿…ç„¶è§¦å‘ç‰©ç†è¯»ï¼Œè¿™æ˜¯æ­£å¸¸ç°è±¡ã€‚<br/>
å…³æ³¨çš„æ˜¯ <strong>æ¯”ä¾‹</strong>ï¼ˆå‘½ä¸­ç‡ï¼‰ï¼Œè€Œéç»å¯¹å€¼ã€‚</li>
</ul>
<h3 data-id="heading-17">âŒ è¯¯åŒº3ï¼šâ€œSSD å¿«ï¼Œç‰©ç†è¯»æ— æ‰€è°“â€</h3>
<ul>
<li><strong>çº æ­£</strong>ï¼šå³ä½¿ SSDï¼Œå†…å­˜è®¿é—®ä»æ¯”ç£ç›˜å¿« <strong>1000 å€ä»¥ä¸Š</strong>ã€‚<br/>
é«˜å¹¶å‘ä¸‹ï¼Œå¤§é‡ç‰©ç†è¯»ä»ä¼šå¯¼è‡´ I/O é˜Ÿåˆ—å †ç§¯ã€å»¶è¿Ÿé£™å‡ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-18">ä¸ƒã€å®æˆ˜æ¡ˆä¾‹ï¼šä¸€æ¬¡æ…¢æŸ¥è¯¢çš„åˆ†æ</h2>
<p><strong>é—®é¢˜</strong>ï¼šæŸæŠ¥è¡¨æŸ¥è¯¢è€—æ—¶ 15 ç§’ã€‚</p>
<p><strong>æ’æŸ¥æ­¥éª¤</strong>ï¼š</p>
<ol>
<li>
<p>æ‰§è¡Œ <code>EXPLAIN</code>ï¼šå‘ç° <strong>å…¨è¡¨æ‰«æ</strong>ï¼ˆtype=ALLï¼‰ï¼›</p>
</li>
<li>
<p>æŸ¥çœ‹çŠ¶æ€å˜é‡ï¼š</p>
<ul>
<li><code>Innodb_buffer_pool_read_requests</code>: 120,000</li>
<li><code>Innodb_buffer_pool_reads</code>: 85,000 â†’ å‘½ä¸­ç‡ä»… 29%ï¼</li>
</ul>
</li>
<li>
<p><strong>æ ¹å› </strong>ï¼šæ— åˆé€‚ç´¢å¼• + Buffer Pool æ— æ³•ç¼“å­˜å…¨è¡¨ï¼›</p>
</li>
<li>
<p><strong>è§£å†³</strong>ï¼š</p>
<ul>
<li>æ·»åŠ è”åˆç´¢å¼• <code>(status, create_time)</code>ï¼›</li>
<li>æŸ¥è¯¢æ”¹å†™ä¸ºåªæŸ¥å¿…è¦å­—æ®µï¼›</li>
</ul>
</li>
<li>
<p><strong>æ•ˆæœ</strong>ï¼š</p>
<ul>
<li>æŸ¥è¯¢æ—¶é—´é™è‡³ 80msï¼›</li>
<li>é€»è¾‘è¯»å æ¯”æå‡è‡³ 99.8%ã€‚</li>
</ul>
</li>
</ol>
<hr/>
<h2 data-id="heading-19">å…«ã€æ€»ç»“</h2>






























<table><thead><tr><th>å¯¹æ¯”é¡¹</th><th>é€»è¾‘è¯»</th><th>ç‰©ç†è¯»</th></tr></thead><tbody><tr><td><strong>æ¥æº</strong></td><td>Buffer Poolï¼ˆå†…å­˜ï¼‰</td><td>ç£ç›˜/SSD</td></tr><tr><td><strong>é€Ÿåº¦</strong></td><td>æå¿«ï¼ˆns çº§ï¼‰</td><td>æ…¢ï¼ˆms çº§ï¼‰</td></tr><tr><td><strong>æ€§èƒ½å½±å“</strong></td><td>æ­£å‘ï¼ˆé«˜æ•ˆï¼‰</td><td>è´Ÿå‘ï¼ˆç“¶é¢ˆï¼‰</td></tr><tr><td><strong>ä¼˜åŒ–ç›®æ ‡</strong></td><td><strong>æœ€å¤§åŒ–</strong></td><td><strong>æœ€å°åŒ–</strong></td></tr></tbody></table>
<p><strong>æ ¸å¿ƒæ€æƒ³</strong>ï¼š</p>
<blockquote>
<p><strong>è®©æ•°æ®å°½å¯èƒ½â€œå¾…åœ¨å†…å­˜é‡Œâ€ï¼Œå‡å°‘å»ç£ç›˜â€œè·‘è…¿â€çš„æ¬¡æ•°ã€‚</strong></p>
</blockquote>
<p>é€šè¿‡åˆç†é…ç½® Buffer Poolã€è®¾è®¡é«˜æ•ˆç´¢å¼•ã€ç›‘æ§å‘½ä¸­ç‡ï¼Œä½ å¯ä»¥æ˜¾è‘—æå‡ MySQL çš„æŸ¥è¯¢æ€§èƒ½ï¼Œæ‰“é€ é«˜ååã€ä½å»¶è¿Ÿçš„æ•°æ®åº“æœåŠ¡ã€‚</p>
<hr/>
<p><strong>å»¶ä¼¸é˜…è¯»</strong>ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdev.mysql.com%2Fdoc%2Frefman%2F8.0%2Fen%2Finnodb-buffer-pool.html" target="_blank" title="https://dev.mysql.com/doc/refman/8.0/en/innodb-buffer-pool.html" ref="nofollow noopener noreferrer">MySQL å®˜æ–¹æ–‡æ¡£ï¼šInnoDB Buffer Pool</a></li>
<li>ã€Šé«˜æ€§èƒ½ MySQLã€‹ç¬¬ 3 ç« ï¼šæœåŠ¡å™¨æ€§èƒ½å‰–æ</li>
<li>ä½¿ç”¨ <code>pt-query-digest</code> åˆ†ææ…¢æŸ¥è¯¢ä¸­çš„ I/O æ¨¡å¼</li>
</ul>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Python æ³¨å†Œè¡¨æ¨¡å¼ï¼ˆRegistry Patternï¼‰è¯¦è§£ï¼šæ„å»ºå¯æ‰©å±•ã€æ’ä»¶åŒ–çš„ç³»ç»Ÿ]]></title>    <link>https://juejin.cn/post/7602581823639420928</link>    <guid>https://juejin.cn/post/7602581823639420928</guid>    <pubDate>2026-02-04T13:43:52.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602581823639420928" data-draft-id="7602800677711642658" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Python æ³¨å†Œè¡¨æ¨¡å¼ï¼ˆRegistry Patternï¼‰è¯¦è§£ï¼šæ„å»ºå¯æ‰©å±•ã€æ’ä»¶åŒ–çš„ç³»ç»Ÿ"/> <meta itemprop="keywords" content="Python"/> <meta itemprop="datePublished" content="2026-02-04T13:43:52.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å“ˆé‡Œè°¢é¡¿"/> <meta itemprop="url" content="https://juejin.cn/user/3678304397695056"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Python æ³¨å†Œè¡¨æ¨¡å¼ï¼ˆRegistry Patternï¼‰è¯¦è§£ï¼šæ„å»ºå¯æ‰©å±•ã€æ’ä»¶åŒ–çš„ç³»ç»Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3678304397695056/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å“ˆé‡Œè°¢é¡¿
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T13:43:52.000Z" title="Wed Feb 04 2026 13:43:52 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Python æ³¨å†Œè¡¨æ¨¡å¼ï¼ˆRegistry Patternï¼‰è¯¦è§£ï¼šæ„å»ºå¯æ‰©å±•ã€æ’ä»¶åŒ–çš„ç³»ç»Ÿ</h2>
<p>åœ¨å¼€å‘å¤§å‹åº”ç”¨æˆ–æ¡†æ¶æ—¶ï¼Œæˆ‘ä»¬å¸¸å¸¸éœ€è¦<strong>åŠ¨æ€å‘ç°å’Œç®¡ç†ç»„ä»¶</strong>ï¼Œæ¯”å¦‚ï¼š</p>
<ul>
<li>è‡ªåŠ¨æ³¨å†Œæ‰€æœ‰ API è·¯ç”±</li>
<li>åŠ è½½æ‰€æœ‰æ•°æ®åº“æ¨¡å‹</li>
<li>å‘ç°æ‰€æœ‰å‘½ä»¤è¡Œå­å‘½ä»¤</li>
<li>ç®¡ç†æ‰€æœ‰æ”¯ä»˜ç½‘å…³æ’ä»¶</li>
</ul>
<p>å¦‚æœæ¯æ¬¡æ–°å¢ç»„ä»¶éƒ½è¦æ‰‹åŠ¨ä¿®æ”¹ä¸»ç¨‹åºé€»è¾‘ï¼Œç³»ç»Ÿå°†å˜å¾—<strong>è„†å¼±ã€éš¾ä»¥ç»´æŠ¤ã€è¿åå¼€é—­åŸåˆ™</strong>ã€‚</p>
<p><strong>æ³¨å†Œè¡¨æ¨¡å¼ï¼ˆRegistry Patternï¼‰</strong> æ­£æ˜¯è§£å†³è¿™ç±»é—®é¢˜çš„ç»å…¸è®¾è®¡æ¨¡å¼ã€‚</p>
<hr/>
<h3 data-id="heading-1">ä¸€ã€ä»€ä¹ˆæ˜¯æ³¨å†Œè¡¨æ¨¡å¼ï¼Ÿ</h3>
<blockquote>
<p><strong>æ³¨å†Œè¡¨æ¨¡å¼</strong> æ˜¯ä¸€ç§ç”¨äº<strong>é›†ä¸­ç®¡ç†å¯¹è±¡æˆ–ç±»çš„åˆ›å»ºä¸æŸ¥æ‰¾</strong>çš„è®¾è®¡æ¨¡å¼ã€‚å®ƒé€šè¿‡ä¸€ä¸ªå…¨å±€çš„â€œæ³¨å†Œä¸­å¿ƒâ€ï¼ˆRegistryï¼‰ï¼Œè®©ç»„ä»¶åœ¨å®šä¹‰æ—¶è‡ªåŠ¨æ³¨å†Œè‡ªå·±ï¼Œä¾›åç»­æŒ‰åç§°æˆ–ç±»å‹åŠ¨æ€è·å–ã€‚</p>
</blockquote>
<h4 data-id="heading-2">ğŸ¯ æ ¸å¿ƒæ€æƒ³ï¼š</h4>
<ul>
<li><strong>è§£è€¦ç»„ä»¶å®šä¹‰ä¸ä½¿ç”¨</strong></li>
<li><strong>æ”¯æŒè¿è¡Œæ—¶åŠ¨æ€å‘ç°</strong></li>
<li><strong>å®ç°æ’ä»¶åŒ–ã€å¯æ‰©å±•æ¶æ„</strong></li>
</ul>
<hr/>
<h3 data-id="heading-3">äºŒã€æ³¨å†Œè¡¨æ¨¡å¼ vs å·¥å‚æ¨¡å¼ vs ç­–ç•¥æ¨¡å¼</h3>

























<table><thead><tr><th>æ¨¡å¼</th><th>ç›®çš„</th><th>ç‰¹ç‚¹</th></tr></thead><tbody><tr><td><strong>æ³¨å†Œè¡¨æ¨¡å¼</strong></td><td><strong>é›†ä¸­ç®¡ç†å·²çŸ¥ç»„ä»¶</strong></td><td>ç»„ä»¶â€œè‡ªæ³¨å†Œâ€ï¼Œæ”¯æŒåŠ¨æ€å‘ç°</td></tr><tr><td><strong>å·¥å‚æ¨¡å¼</strong></td><td><strong>å°è£…å¯¹è±¡åˆ›å»ºé€»è¾‘</strong></td><td>å®¢æˆ·ç«¯ä¸å…³å¿ƒå…·ä½“ç±»</td></tr><tr><td><strong>ç­–ç•¥æ¨¡å¼</strong></td><td><strong>åŠ¨æ€åˆ‡æ¢ç®—æ³•è¡Œä¸º</strong></td><td>è¡Œä¸ºå¯æ›¿æ¢</td></tr></tbody></table>
<blockquote>
<p>âœ… <strong>æ³¨å†Œè¡¨å¸¸ä½œä¸ºå·¥å‚/ç­–ç•¥çš„åº•å±‚æ”¯æ’‘</strong>ï¼š<br/>
å·¥å‚ä»æ³¨å†Œè¡¨ä¸­æŸ¥æ‰¾å…·ä½“å®ç°æ¥åˆ›å»ºå¯¹è±¡ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-4">ä¸‰ã€Python å®ç°æ³¨å†Œè¡¨æ¨¡å¼çš„ 4 ç§æ–¹å¼</h3>
<h4 data-id="heading-5">æ–¹å¼1ï¼šåŸºäºå­—å…¸çš„ç®€å•æ³¨å†Œè¡¨ï¼ˆæœ€å¸¸ç”¨ï¼‰</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># registry.py</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">PaymentRegistry</span>:
    _registry = {}

<span class="hljs-meta">    @classmethod</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">register</span>(<span class="hljs-params">cls, name: <span class="hljs-built_in">str</span></span>):
        <span class="hljs-string">"""è£…é¥°å™¨ï¼šæ³¨å†Œæ”¯ä»˜æ–¹å¼"""</span>
        <span class="hljs-keyword">def</span> <span class="hljs-title function_">decorator</span>(<span class="hljs-params">payment_class</span>):
            cls._registry[name] = payment_class
            <span class="hljs-keyword">return</span> payment_class
        <span class="hljs-keyword">return</span> decorator

<span class="hljs-meta">    @classmethod</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">get</span>(<span class="hljs-params">cls, name: <span class="hljs-built_in">str</span></span>):
        <span class="hljs-string">"""è·å–æ”¯ä»˜ç±»"""</span>
        <span class="hljs-keyword">if</span> name <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> cls._registry:
            <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">f"Unknown payment method: <span class="hljs-subst">{name}</span>"</span>)
        <span class="hljs-keyword">return</span> cls._registry[name]

<span class="hljs-comment"># ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-meta">@PaymentRegistry.register(<span class="hljs-params"><span class="hljs-string">"alipay"</span></span>)</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Alipay</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">pay</span>(<span class="hljs-params">self, amount</span>):
        <span class="hljs-keyword">return</span> <span class="hljs-string">f"Paid <span class="hljs-subst">{amount}</span> via Alipay"</span>

<span class="hljs-meta">@PaymentRegistry.register(<span class="hljs-params"><span class="hljs-string">"wechat"</span></span>)</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">WechatPay</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">pay</span>(<span class="hljs-params">self, amount</span>):
        <span class="hljs-keyword">return</span> <span class="hljs-string">f"Paid <span class="hljs-subst">{amount}</span> via WeChat"</span>

<span class="hljs-comment"># åŠ¨æ€ä½¿ç”¨</span>
method = PaymentRegistry.get(<span class="hljs-string">"alipay"</span>)()
<span class="hljs-built_in">print</span>(method.pay(<span class="hljs-number">100</span>))  <span class="hljs-comment"># Paid 100 via Alipay</span>
</code></pre>
<p>âœ… <strong>ä¼˜ç‚¹</strong>ï¼šç®€æ´ã€ç›´è§‚ã€æ”¯æŒè£…é¥°å™¨è¯­æ³•<br/>
âœ… <strong>é€‚ç”¨åœºæ™¯</strong>ï¼šæ’ä»¶ç³»ç»Ÿã€å‘½ä»¤æ³¨å†Œã€è·¯ç”±ç®¡ç†</p>
<hr/>
<h4 data-id="heading-6">æ–¹å¼2ï¼šåŸºäºå…ƒç±»ï¼ˆMetaclassï¼‰çš„è‡ªåŠ¨æ³¨å†Œï¼ˆé«˜çº§ï¼‰</h4>
<p>é€‚ç”¨äº<strong>æ‰€æœ‰å­ç±»è‡ªåŠ¨æ³¨å†Œ</strong>çš„åœºæ™¯ï¼ˆå¦‚ Django ORM æ¨¡å‹ï¼‰ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"># å®šä¹‰åŸºç±» + å…ƒç±»
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ModelMeta</span>(type):
    registry = {}

    def __new__(cls, name, bases, attrs):
        new_class = <span class="hljs-keyword">super</span>().__new__(cls, name, bases, attrs)
        <span class="hljs-keyword">if</span> name != <span class="hljs-string">"BaseModel"</span>:  # æ’é™¤åŸºç±»è‡ªèº«
            ModelMeta.registry[name.lower()] = new_<span class="hljs-keyword">class</span>
        <span class="hljs-title class_">return</span> <span class="hljs-title">new_class</span>

<span class="hljs-keyword">class</span> <span class="hljs-title class_">BaseModel</span>(metaclass=ModelMeta):
    pass

# å­ç±»è‡ªåŠ¨æ³¨å†Œ
<span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span>(BaseModel):
    pass

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Order</span>(BaseModel):
    pass

# æŸ¥çœ‹æ³¨å†Œç»“æœ
print(ModelMeta.registry)  # {<span class="hljs-string">'user'</span>: &lt;<span class="hljs-keyword">class</span> <span class="hljs-string">'__main__.User'</span>&gt;, <span class="hljs-string">'order'</span>: &lt;<span class="hljs-keyword">class</span> <span class="hljs-string">'__main__.Order'</span>&gt;}
</code></pre>
<p>âœ… <strong>ä¼˜ç‚¹</strong>ï¼šæ— éœ€æ˜¾å¼è°ƒç”¨æ³¨å†Œï¼Œå­ç±»å®šä¹‰å³æ³¨å†Œ<br/>
âš ï¸ <strong>ç¼ºç‚¹</strong>ï¼šå…ƒç±»è¾ƒéš¾ç†è§£ï¼Œè°ƒè¯•å¤æ‚</p>
<hr/>
<h4 data-id="heading-7">æ–¹å¼3ï¼šç»“åˆ <code>__init_subclass__</code>ï¼ˆPython 3.6+ æ¨èï¼‰</h4>
<p>æ¯”å…ƒç±»æ›´ç®€æ´ã€æ›´ Pythonic çš„æ–¹å¼ï¼š</p>
<pre><code class="hljs language-ruby" lang="ruby"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Command</span>:
    registry = {}

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init_subclass__</span>(<span class="hljs-params">cls, **kwargs</span>):
        <span class="hljs-variable language_">super</span>().__init_subclass__(**kwargs)
        <span class="hljs-comment"># è‡ªåŠ¨æ³¨å†Œå­ç±»ï¼ˆä½¿ç”¨ç±»åå°å†™ï¼‰</span>
        <span class="hljs-title class_">Command</span>.registry[cls.__name__.lower()] = cls

<span class="hljs-keyword">class</span> <span class="hljs-title class_">CreateCommand</span>(<span class="hljs-title class_">Command</span>):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">execute</span>(<span class="hljs-params"><span class="hljs-variable language_">self</span></span>):
        <span class="hljs-keyword">return</span> <span class="hljs-string">"Creating..."</span>

<span class="hljs-keyword">class</span> <span class="hljs-title class_">DeleteCommand</span>(<span class="hljs-title class_">Command</span>):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">execute</span>(<span class="hljs-params"><span class="hljs-variable language_">self</span></span>):
        <span class="hljs-keyword">return</span> <span class="hljs-string">"Deleting..."</span>

<span class="hljs-comment"># è‡ªåŠ¨æ³¨å†Œå®Œæˆï¼</span>
cmd = <span class="hljs-title class_">Command</span>.registry[<span class="hljs-string">"createcommand"</span>]()
print(cmd.execute())  <span class="hljs-comment"># Creating...</span>
</code></pre>
<p>âœ… <strong>ä¼˜åŠ¿</strong>ï¼š</p>
<ul>
<li>æ— éœ€å…ƒç±»ï¼Œä»£ç æ›´æ¸…æ™°</li>
<li>è‡ªåŠ¨æ³¨å†Œæ‰€æœ‰å­ç±»</li>
<li>æ”¯æŒè‡ªå®šä¹‰æ³¨å†Œé€»è¾‘ï¼ˆå¦‚æŒ‡å®šåˆ«åï¼‰</li>
</ul>
<hr/>
<h4 data-id="heading-8">æ–¹å¼4ï¼šå¸¦éªŒè¯å’Œç”Ÿå‘½å‘¨æœŸçš„å®Œæ•´æ³¨å†Œè¡¨</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">Dict</span>, <span class="hljs-type">Type</span>, <span class="hljs-type">Callable</span>, <span class="hljs-type">Any</span>

<span class="hljs-keyword">class</span> <span class="hljs-title class_">ComponentRegistry</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):
        self._components: <span class="hljs-type">Dict</span>[<span class="hljs-built_in">str</span>, <span class="hljs-type">Type</span>] = {}
        self._validators: <span class="hljs-type">Dict</span>[<span class="hljs-built_in">str</span>, <span class="hljs-type">Callable</span>] = {}
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">register</span>(<span class="hljs-params">self, name: <span class="hljs-built_in">str</span>, validator: <span class="hljs-type">Callable</span> = <span class="hljs-literal">None</span></span>):
        <span class="hljs-string">"""æ³¨å†Œç»„ä»¶ï¼Œå¯é€‰éªŒè¯å‡½æ•°"""</span>
        <span class="hljs-keyword">def</span> <span class="hljs-title function_">decorator</span>(<span class="hljs-params">cls</span>):
            <span class="hljs-keyword">if</span> name <span class="hljs-keyword">in</span> self._components:
                <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">f"Component '<span class="hljs-subst">{name}</span>' already registered!"</span>)
            
            <span class="hljs-comment"># æ‰§è¡ŒéªŒè¯ï¼ˆå¦‚æ£€æŸ¥æ˜¯å¦å®ç°å¿…è¦æ–¹æ³•ï¼‰</span>
            <span class="hljs-keyword">if</span> validator:
                validator(cls)
            
            self._components[name] = cls
            <span class="hljs-keyword">return</span> cls
        <span class="hljs-keyword">return</span> decorator
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">create</span>(<span class="hljs-params">self, name: <span class="hljs-built_in">str</span>, *args, **kwargs</span>) -&gt; <span class="hljs-type">Any</span>:
        <span class="hljs-string">"""åˆ›å»ºç»„ä»¶å®ä¾‹"""</span>
        <span class="hljs-keyword">if</span> name <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> self._components:
            <span class="hljs-keyword">raise</span> KeyError(<span class="hljs-string">f"Component '<span class="hljs-subst">{name}</span>' not found!"</span>)
        <span class="hljs-keyword">return</span> self._components[name](*args, **kwargs)
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">list_components</span>(<span class="hljs-params">self</span>):
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">list</span>(self._components.keys())

<span class="hljs-comment"># ä½¿ç”¨</span>
registry = ComponentRegistry()

<span class="hljs-keyword">def</span> <span class="hljs-title function_">validate_has_run_method</span>(<span class="hljs-params">cls</span>):
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> <span class="hljs-built_in">hasattr</span>(cls, <span class="hljs-string">'run'</span>):
        <span class="hljs-keyword">raise</span> TypeError(<span class="hljs-string">f"<span class="hljs-subst">{cls.__name__}</span> must implement 'run' method"</span>)

<span class="hljs-meta">@registry.register(<span class="hljs-params"><span class="hljs-string">"task_a"</span>, validator=validate_has_run_method</span>)</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">TaskA</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">run</span>(<span class="hljs-params">self</span>):
        <span class="hljs-keyword">return</span> <span class="hljs-string">"Running Task A"</span>

<span class="hljs-comment"># å°è¯•æ³¨å†Œæ— æ•ˆç»„ä»¶ï¼ˆä¼šæŠ¥é”™ï¼‰</span>
<span class="hljs-comment"># @registry.register("bad_task")</span>
<span class="hljs-comment"># class BadTask: pass  # ç¼ºå°‘ run æ–¹æ³• â†’ æŠ›å¼‚å¸¸</span>

<span class="hljs-comment"># åˆ›å»ºå®ä¾‹</span>
task = registry.create(<span class="hljs-string">"task_a"</span>)
<span class="hljs-built_in">print</span>(task.run())  <span class="hljs-comment"># Running Task A</span>
</code></pre>
<p>âœ… <strong>é€‚ç”¨åœºæ™¯</strong>ï¼šæ¡†æ¶å¼€å‘ã€ä¸¥æ ¼æ’ä»¶è§„èŒƒ</p>
<hr/>
<h3 data-id="heading-9">å››ã€å…¸å‹åº”ç”¨åœºæ™¯</h3>
<h4 data-id="heading-10">åœºæ™¯1ï¼šWeb æ¡†æ¶ä¸­çš„è·¯ç”±æ³¨å†Œï¼ˆå¦‚ Flaskï¼‰</h4>
<pre><code class="hljs language-python" lang="python">app = Flask(__name__)

<span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">"/home"</span></span>)  </span><span class="hljs-comment"># è£…é¥°å™¨å°†è§†å›¾å‡½æ•°æ³¨å†Œåˆ°è·¯ç”±è¡¨</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">home</span>():
    <span class="hljs-keyword">return</span> <span class="hljs-string">"Hello"</span>
</code></pre>
<blockquote>
<p>Flask å†…éƒ¨ç»´æŠ¤ä¸€ä¸ª URL â†’ å‡½æ•° çš„æ³¨å†Œè¡¨ã€‚</p>
</blockquote>
<hr/>
<h4 data-id="heading-11">åœºæ™¯2ï¼šå‘½ä»¤è¡Œå·¥å…·çš„å­å‘½ä»¤ç®¡ç†ï¼ˆå¦‚ Clickï¼‰</h4>
<pre><code class="hljs language-less" lang="less"><span class="hljs-variable">@click</span>.<span class="hljs-built_in">group</span>()
def <span class="hljs-built_in">cli</span>():
    pass

<span class="hljs-variable">@cli</span>.<span class="hljs-built_in">command</span>()
def <span class="hljs-built_in">init</span>():
    click.<span class="hljs-built_in">echo</span>(<span class="hljs-string">"Init project"</span>)

<span class="hljs-variable">@cli</span>.<span class="hljs-built_in">command</span>()
def <span class="hljs-built_in">deploy</span>():
    click.<span class="hljs-built_in">echo</span>(<span class="hljs-string">"Deploy app"</span>)
</code></pre>
<blockquote>
<p>Click è‡ªåŠ¨æ”¶é›†æ‰€æœ‰ <code>@command</code> è£…é¥°çš„å‡½æ•°ã€‚</p>
</blockquote>
<hr/>
<h4 data-id="heading-12">åœºæ™¯3ï¼šæœºå™¨å­¦ä¹ ä¸­çš„æ¨¡å‹æ³¨å†Œ</h4>
<pre><code class="hljs language-python" lang="python">MODELS = Registry()

<span class="hljs-meta">@MODELS.register(<span class="hljs-params"><span class="hljs-string">"random_forest"</span></span>)</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">RandomForestModel</span>:
    <span class="hljs-keyword">pass</span>

<span class="hljs-meta">@MODELS.register(<span class="hljs-params"><span class="hljs-string">"xgboost"</span></span>)</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">XGBoostModel</span>:
    <span class="hljs-keyword">pass</span>

<span class="hljs-comment"># ä»é…ç½®æ–‡ä»¶åŠ¨æ€åŠ è½½</span>
model_name = config[<span class="hljs-string">"model"</span>]
model = MODELS.create(model_name)
</code></pre>
<hr/>
<h4 data-id="heading-13">åœºæ™¯4ï¼šæ¸¸æˆå¼€å‘ä¸­çš„æŠ€èƒ½/é“å…·ç³»ç»Ÿ</h4>
<pre><code class="hljs language-kotlin" lang="kotlin">SKILLS = Registry()

<span class="hljs-meta">@SKILLS</span>.register(<span class="hljs-string">"fireball"</span>)
<span class="hljs-keyword">class</span> <span class="hljs-title class_">FireballSkill</span>:
    <span class="hljs-type">damage</span> = 100

<span class="hljs-meta">@SKILLS</span>.register(<span class="hljs-string">"heal"</span>)
<span class="hljs-keyword">class</span> <span class="hljs-title class_">HealSkill</span>:
    <span class="hljs-type">heal_amount</span> = 50

# æ ¹æ®ç©å®¶é€‰æ‹©åŠ¨æ€åˆ›å»ºæŠ€èƒ½
skill = SKILLS.create(player_selected_skill)
</code></pre>
<hr/>
<h3 data-id="heading-14">äº”ã€æœ€ä½³å®è·µä¸æ³¨æ„äº‹é¡¹</h3>
<h4 data-id="heading-15">âœ… æœ€ä½³å®è·µ</h4>
<ol>
<li><strong>ä½¿ç”¨è£…é¥°å™¨è¯­æ³•</strong>ï¼š<code>@registry.register("name")</code> æ›´ç›´è§‚</li>
<li><strong>æ”¯æŒåˆ«åæ³¨å†Œ</strong>ï¼šå…è®¸ä¸€ä¸ªç»„ä»¶æœ‰å¤šä¸ªåç§°</li>
<li><strong>æä¾›åˆ—è¡¨æŸ¥è¯¢æ¥å£</strong>ï¼š<code>registry.list()</code> ä¾¿äºè°ƒè¯•</li>
<li><strong>åŠ å…¥éªŒè¯æœºåˆ¶</strong>ï¼šç¡®ä¿æ³¨å†Œçš„ç»„ä»¶ç¬¦åˆæ¥å£è§„èŒƒ</li>
<li><strong>çº¿ç¨‹å®‰å…¨è€ƒè™‘</strong>ï¼šå¤šçº¿ç¨‹ç¯å¢ƒä¸‹åŠ é”ï¼ˆé€šå¸¸æ³¨å†Œå‘ç”Ÿåœ¨å¯åŠ¨é˜¶æ®µï¼Œæ— éœ€æ‹…å¿ƒï¼‰</li>
</ol>
<h4 data-id="heading-16">âš ï¸ æ³¨æ„äº‹é¡¹</h4>
<ul>
<li><strong>é¿å…å…¨å±€çŠ¶æ€æ±¡æŸ“</strong>ï¼šæ³¨å†Œè¡¨åº”ä½œç”¨åŸŸæ˜ç¡®ï¼ˆå¦‚æ¨¡å—çº§ï¼Œè€Œéè·¨æ¨¡å—å…±äº«ï¼‰</li>
<li><strong>é˜²æ­¢é‡å¤æ³¨å†Œ</strong>ï¼šåº”æŠ›å‡ºå¼‚å¸¸æˆ–è¦†ç›–ï¼ˆæ ¹æ®ä¸šåŠ¡éœ€æ±‚ï¼‰</li>
<li><strong>ä¸è¦æ»¥ç”¨</strong>ï¼šç®€å•åœºæ™¯ç›´æ¥ç”¨å­—å…¸å³å¯ï¼Œä¸å¿…å¼ºè¡Œå¥—æ¨¡å¼</li>
</ul>
<hr/>
<h3 data-id="heading-17">å…­ã€æ€»ç»“</h3>

























<table><thead><tr><th>ç‰¹æ€§</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>æ ¸å¿ƒä»·å€¼</strong></td><td>è§£è€¦ç»„ä»¶å®šä¹‰ä¸ä½¿ç”¨ï¼Œæ”¯æŒåŠ¨æ€å‘ç°</td></tr><tr><td><strong>å…³é”®ç»„ä»¶</strong></td><td>æ³¨å†Œä¸­å¿ƒï¼ˆå­—å…¸/ç±»ï¼‰ã€æ³¨å†Œæœºåˆ¶ï¼ˆè£…é¥°å™¨/å…ƒç±»ï¼‰ã€è·å–æ¥å£</td></tr><tr><td><strong>Python ä¼˜åŠ¿</strong></td><td>å‡½æ•°/ç±»æ˜¯ä¸€ç­‰å…¬æ°‘ï¼Œè£…é¥°å™¨å’Œå…ƒç±»è®©å®ç°æå…¶ç®€æ´</td></tr><tr><td><strong>é€‚ç”¨åœºæ™¯</strong></td><td>æ’ä»¶ç³»ç»Ÿã€æ¡†æ¶å¼€å‘ã€å‘½ä»¤ç®¡ç†ã€ç­–ç•¥é›†åˆ</td></tr></tbody></table>
<blockquote>
<p>ğŸ’¡ <strong>è®°ä½</strong>ï¼š<br/>
<strong>â€œå¥½çš„æ³¨å†Œè¡¨ï¼Œè®©æ–°å¢åŠŸèƒ½åªéœ€å†™æ–°ä»£ç ï¼Œæ— éœ€æ”¹æ—§ä»£ç ã€‚â€</strong></p>
</blockquote>
<p>æ³¨å†Œè¡¨æ¨¡å¼æ˜¯æ„å»º<strong>å¯æ‰©å±•ã€å¯ç»´æŠ¤ã€æ’ä»¶åŒ–ç³»ç»Ÿ</strong>çš„åŸºçŸ³ã€‚æŒæ¡å®ƒï¼Œä½ å°±èƒ½åƒ Flaskã€Djangoã€Click ç­‰ä¼˜ç§€æ¡†æ¶ä¸€æ ·ï¼Œè®¾è®¡å‡ºä¼˜é›…çš„æ‰©å±•æœºåˆ¶ã€‚</p>
<hr/>
<p><strong>å»¶ä¼¸é˜…è¯»</strong>ï¼š</p>
<ul>
<li>ã€Šè®¾è®¡æ¨¡å¼ï¼šå¯å¤ç”¨é¢å‘å¯¹è±¡è½¯ä»¶çš„åŸºç¡€ã€‹â€”â€” æ³¨å†Œè¡¨è™½é GoF 23 ç§ä¹‹ä¸€ï¼Œä½†å¹¿æ³›åº”ç”¨</li>
<li>Python å®˜æ–¹æ–‡æ¡£ï¼š<code>__init_subclass__</code>ã€è£…é¥°å™¨ã€å…ƒç±»</li>
<li>æºç å­¦ä¹ ï¼šFlask çš„ <code>@app.route</code>ã€Django çš„ model registry</li>
</ul>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Django ä¸­çš„å±æ€§ä»£ç†æ¨¡å¼ï¼šæ­ç§˜ `django.core.cache.cache` çš„é­”æ³•]]></title>    <link>https://juejin.cn/post/7602581823639470080</link>    <guid>https://juejin.cn/post/7602581823639470080</guid>    <pubDate>2026-02-04T14:00:39.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602581823639470080" data-draft-id="7602800677711675426" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Django ä¸­çš„å±æ€§ä»£ç†æ¨¡å¼ï¼šæ­ç§˜ `django.core.cache.cache` çš„é­”æ³•"/> <meta itemprop="keywords" content="Django"/> <meta itemprop="datePublished" content="2026-02-04T14:00:39.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å“ˆé‡Œè°¢é¡¿"/> <meta itemprop="url" content="https://juejin.cn/user/3678304397695056"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Django ä¸­çš„å±æ€§ä»£ç†æ¨¡å¼ï¼šæ­ç§˜ `django.core.cache.cache` çš„é­”æ³•
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3678304397695056/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å“ˆé‡Œè°¢é¡¿
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T14:00:39.000Z" title="Wed Feb 04 2026 14:00:39 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ Django å¼€å‘ä¸­ï¼Œä½ å¯èƒ½æ—©å·²ä¹ æƒ¯è¿™æ ·ä½¿ç”¨ç¼“å­˜ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">from django.core.cache <span class="hljs-keyword">import</span> cache

cache.<span class="hljs-keyword">set</span>(<span class="hljs-string">"user:1001"</span>, user_data, timeout=<span class="hljs-number">300</span>)
<span class="hljs-keyword">data</span> = cache.<span class="hljs-keyword">get</span>(<span class="hljs-string">"user:1001"</span>)
</code></pre>
<p>ä½†ä½ æ˜¯å¦å¥½å¥‡ï¼š</p>
<blockquote>
<p><strong><code>cache</code> åˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿå®ƒå¦‚ä½•åœ¨ä¸ä¿®æ”¹ä»£ç çš„æƒ…å†µä¸‹ï¼Œæ— ç¼åˆ‡æ¢ Redisã€Memcached æˆ–æœ¬åœ°å†…å­˜ç¼“å­˜ï¼Ÿ</strong></p>
</blockquote>
<p>ç­”æ¡ˆå°±è—åœ¨ Django çš„ä¸€ä¸ªç²¾å·§è®¾è®¡ä¸­ â€”â€” <strong>å±æ€§ä»£ç†æ¨¡å¼ï¼ˆAttribute Proxy Patternï¼‰</strong> ã€‚æœ¬æ–‡å°†å¸¦ä½ æ­å¼€è¿™å±‚ç¥ç§˜é¢çº±ï¼Œå¹¶æ·±å…¥ç†è§£å…¶åœ¨ç¼“å­˜ç³»ç»Ÿä¸­çš„æ ¸å¿ƒä½œç”¨ã€‚</p>
<hr/>
<h2 data-id="heading-0">ä¸€ã€ä»€ä¹ˆæ˜¯å±æ€§ä»£ç†æ¨¡å¼ï¼Ÿ</h2>
<blockquote>
<p><strong>å±æ€§ä»£ç†æ¨¡å¼</strong> æ˜¯ä¸€ç§è®¾è®¡æ¨¡å¼ï¼Œé€šè¿‡ä¸€ä¸ª<strong>ä»£ç†å¯¹è±¡</strong>å°†å¯¹å±æ€§æˆ–æ–¹æ³•çš„è®¿é—®<strong>è½¬å‘ï¼ˆdelegateï¼‰</strong> ç»™å¦ä¸€ä¸ªçœŸå®å¯¹è±¡ï¼Œè€Œè°ƒç”¨è€…å¯¹æ­¤å®Œå…¨æ— æ„ŸçŸ¥ã€‚</p>
</blockquote>
<h3 data-id="heading-1">æ ¸å¿ƒç‰¹ç‚¹ï¼š</h3>
<ul>
<li><strong>é€æ˜æ€§</strong>ï¼šå®¢æˆ·ç«¯åƒä½¿ç”¨æ™®é€šå¯¹è±¡ä¸€æ ·ä½¿ç”¨ä»£ç†ï¼›</li>
<li><strong>è§£è€¦æ€§</strong>ï¼šçœŸå®å¯¹è±¡å¯åŠ¨æ€æ›¿æ¢ï¼Œä¸å½±å“è°ƒç”¨æ–¹ï¼›</li>
<li><strong>å»¶è¿Ÿåˆå§‹åŒ–</strong>ï¼šçœŸå®å¯¹è±¡å¯åœ¨é¦–æ¬¡è®¿é—®æ—¶æ‰åˆ›å»ºã€‚</li>
</ul>
<p>åœ¨ Python ä¸­ï¼Œå¯é€šè¿‡é‡å†™ <code>__getattr__</code>ã€<code>__setattr__</code> ç­‰é­”æœ¯æ–¹æ³•å®ç°ã€‚</p>
<hr/>
<h2 data-id="heading-2">äºŒã€Django ç¼“å­˜ç³»ç»Ÿçš„æ¶æ„è®¾è®¡</h2>
<p>Django æ”¯æŒå¤šç§ç¼“å­˜åç«¯ï¼š</p>
<ul>
<li><code>LocMemCache</code>ï¼ˆæœ¬åœ°å†…å­˜ï¼‰</li>
<li><code>RedisCache</code></li>
<li><code>MemcachedCache</code></li>
<li><code>DatabaseCache</code></li>
<li>è‡ªå®šä¹‰åç«¯</li>
</ul>
<p>ä½†æ— è®ºä½¿ç”¨å“ªç§ï¼Œå¼€å‘è€…éƒ½åªä¸ <strong>åŒä¸€ä¸ª <code>cache</code> å¯¹è±¡</strong>äº¤äº’ã€‚è¿™æ˜¯å¦‚ä½•åšåˆ°çš„ï¼Ÿ</p>
<h3 data-id="heading-3">å…³é”®è§’è‰²ï¼š</h3>





















<table><thead><tr><th>ç»„ä»¶</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td><strong><code>django.core.cache.cache</code></strong></td><td>å…¨å±€ä»£ç†å¯¹è±¡ï¼ˆProxyï¼‰</td></tr><tr><td><strong><code>django.core.cache.caches</code></strong></td><td>ç¼“å­˜åç«¯æ³¨å†Œè¡¨ï¼ˆRegistryï¼‰</td></tr><tr><td><strong><code>BaseCache</code> åŠå…¶å®ç°ç±»</strong></td><td>çœŸå®ç¼“å­˜åç«¯ï¼ˆReal Subjectï¼‰</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-4">ä¸‰ã€æºç å‰–æï¼š<code>cache</code> æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ</h2>
<h3 data-id="heading-5">æ­¥éª¤1ï¼š<code>cache</code> çš„å®šä¹‰ï¼ˆ<code>django/core/cache/__init__.py</code>ï¼‰</h3>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># django/core/cache/__init__.py</span>
from django.core.cache.backends.base import DEFAULT_CACHE_ALIAS
from django.core.cache.utils import CacheHandler

<span class="hljs-comment"># åˆ›å»ºä¸€ä¸ª CacheHandler å®ä¾‹</span>
<span class="hljs-attr">caches</span> = CacheHandler()

<span class="hljs-comment"># é»˜è®¤ç¼“å­˜åˆ«åï¼ˆé€šå¸¸ä¸º 'default'ï¼‰</span>
<span class="hljs-attr">cache</span> = caches[DEFAULT_CACHE_ALIAS]  <span class="hljs-comment"># â† å…³é”®ï¼</span>
</code></pre>
<p>è¿™é‡Œ <code>cache</code> å¹¶ä¸æ˜¯ä¸€ä¸ªçœŸå®çš„ç¼“å­˜å¯¹è±¡ï¼Œè€Œæ˜¯ <code>caches['default']</code> çš„ç»“æœã€‚</p>
<hr/>
<h3 data-id="heading-6">æ­¥éª¤2ï¼š<code>CacheHandler</code> â€”â€” å±æ€§ä»£ç†çš„æ ¸å¿ƒ</h3>
<pre><code class="hljs language-ruby" lang="ruby"><span class="hljs-comment"># django/core/cache/utils.py</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">CacheHandler</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params"><span class="hljs-variable language_">self</span></span>):
        <span class="hljs-variable language_">self</span>._caches = {}

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__getitem__</span>(<span class="hljs-params"><span class="hljs-variable language_">self</span>, <span class="hljs-keyword">alias</span></span>):
        <span class="hljs-comment"># å¦‚æœè¯¥ alias çš„ç¼“å­˜æœªåˆ›å»ºï¼Œåˆ™åˆ›å»ºå¹¶ç¼“å­˜</span>
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">alias</span> <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> <span class="hljs-variable language_">self</span>.<span class="hljs-symbol">_caches:</span>
            <span class="hljs-variable language_">self</span>._caches[<span class="hljs-keyword">alias</span>] = <span class="hljs-variable language_">self</span>.create_cache(<span class="hljs-keyword">alias</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">self</span>._caches[<span class="hljs-keyword">alias</span>]

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">create_cache</span>(<span class="hljs-params"><span class="hljs-variable language_">self</span>, <span class="hljs-keyword">alias</span></span>):
        <span class="hljs-comment"># 1. ä» settings.CACHES è·å–é…ç½®</span>
        <span class="hljs-comment"># 2. åŠ¨æ€å¯¼å…¥å¯¹åº”çš„ç¼“å­˜ backend ç±»</span>
        <span class="hljs-comment"># 3. å®ä¾‹åŒ–å¹¶è¿”å›</span>
        ...
</code></pre>
<blockquote>
<p>âœ… <strong>é‡ç‚¹</strong>ï¼š<code>CacheHandler</code> æœ¬èº«<strong>ä¸å®ç°ä»»ä½•ç¼“å­˜é€»è¾‘</strong>ï¼Œå®ƒåªæ˜¯ä¸€ä¸ª<strong>æŒ‰éœ€åˆ›å»ºå¹¶ç¼“å­˜çœŸå®åç«¯çš„ä»£ç†å·¥å‚</strong>ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-7">æ­¥éª¤3ï¼š<code>DefaultCacheProxy</code> â€”â€” çœŸæ­£çš„â€œé€æ˜ä»£ç†â€</h3>
<p>ä½†åœ¨æ—§ç‰ˆæœ¬ï¼ˆ&lt;4.0ï¼‰ä¸­ï¼ŒDjango ä½¿ç”¨äº†ä¸€ä¸ªæ›´å…¸å‹çš„ä»£ç†ç±»ï¼š</p>
<pre><code class="hljs language-ruby" lang="ruby"><span class="hljs-comment"># ç®€åŒ–ç‰ˆ DefaultCacheProxy</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">DefaultCacheProxy</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__getattr__</span>(<span class="hljs-params"><span class="hljs-variable language_">self</span>, name</span>):
        <span class="hljs-comment"># é¦–æ¬¡è®¿é—®æ—¶ï¼Œä» caches['default'] è·å–çœŸå®å¯¹è±¡</span>
        <span class="hljs-keyword">return</span> getattr(caches[<span class="hljs-variable constant_">DEFAULT_CACHE_ALIAS</span>], name)

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__setattr__</span>(<span class="hljs-params"><span class="hljs-variable language_">self</span>, name, value</span>):
        setattr(caches[<span class="hljs-variable constant_">DEFAULT_CACHE_ALIAS</span>], name, value)

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__delattr__</span>(<span class="hljs-params"><span class="hljs-variable language_">self</span>, name</span>):
        delattr(caches[<span class="hljs-variable constant_">DEFAULT_CACHE_ALIAS</span>], name)

<span class="hljs-comment"># å…¨å±€ cache å¯¹è±¡</span>
cache = <span class="hljs-title class_">DefaultCacheProxy</span>()
</code></pre>
<h4 data-id="heading-8">å·¥ä½œæµç¨‹ï¼š</h4>
<ol>
<li>è°ƒç”¨ <code>cache.set(...)</code>ï¼›</li>
<li>è§¦å‘ <code>__getattr__('set')</code>ï¼›</li>
<li>ä»£ç†è‡ªåŠ¨è·å– <code>caches['default']</code>ï¼ˆå³çœŸå®åç«¯ï¼‰ï¼›</li>
<li>è½¬å‘è°ƒç”¨ <code>real_cache.set(...)</code>ã€‚</li>
</ol>
<blockquote>
<p>ğŸ” <strong>è¿™å°±æ˜¯å±æ€§ä»£ç†æ¨¡å¼çš„ç²¾é«“ï¼šè°ƒç”¨è€…ä»¥ä¸ºåœ¨æ“ä½œ <code>cache</code>ï¼Œå®é™…åœ¨æ“ä½œ <code>RedisCache</code> æˆ– <code>LocMemCache</code>ï¼</strong></p>
</blockquote>
<hr/>
<h2 data-id="heading-9">å››ã€é…ç½®é©±åŠ¨ï¼šå¦‚ä½•åˆ‡æ¢ç¼“å­˜åç«¯ï¼Ÿ</h2>
<p>ä¸€åˆ‡çš„ç§˜å¯†éƒ½åœ¨ <code>settings.py</code> ä¸­ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># settings.py</span>

CACHES = {
    <span class="hljs-string">'default'</span>: {
        <span class="hljs-string">'BACKEND'</span>: <span class="hljs-string">'django.core.cache.backends.redis.RedisCache'</span>,
        <span class="hljs-string">'LOCATION'</span>: <span class="hljs-string">'redis://127.0.0.1:6379/1'</span>,
    },
    <span class="hljs-string">'session'</span>: {
        <span class="hljs-string">'BACKEND'</span>: <span class="hljs-string">'django.core.cache.backends.locmem.LocMemCache'</span>,
    }
}

<span class="hljs-comment"># ä»£ç æ— éœ€ä»»ä½•ä¿®æ”¹ï¼</span>
<span class="hljs-keyword">from</span> django.core.cache <span class="hljs-keyword">import</span> cache
cache.<span class="hljs-built_in">set</span>(<span class="hljs-string">"key"</span>, <span class="hljs-string">"value"</span>)  <span class="hljs-comment"># è‡ªåŠ¨ä½¿ç”¨ Redis</span>

<span class="hljs-comment"># å¦‚éœ€ä½¿ç”¨å…¶ä»–åç«¯</span>
<span class="hljs-keyword">from</span> django.core.cache <span class="hljs-keyword">import</span> caches
session_cache = caches[<span class="hljs-string">'session'</span>]
session_cache.<span class="hljs-built_in">set</span>(<span class="hljs-string">"sess_id"</span>, data)  <span class="hljs-comment"># ä½¿ç”¨å†…å­˜ç¼“å­˜</span>
</code></pre>
<h3 data-id="heading-10">åŠ¨æ€åˆ‡æ¢ç¤ºä¾‹ï¼ˆæµ‹è¯•åœºæ™¯ï¼‰ï¼š</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># tests.py</span>
<span class="hljs-keyword">from</span> django.test <span class="hljs-keyword">import</span> override_settings

<span class="hljs-meta">@override_settings(<span class="hljs-params">CACHES={
    <span class="hljs-string">'default'</span>: {<span class="hljs-string">'BACKEND'</span>: <span class="hljs-string">'django.core.cache.backends.dummy.DummyCache'</span>}
}</span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">test_without_cache</span>():
    <span class="hljs-comment"># æ­¤æ—¶ cache æ˜¯ DummyCacheï¼ˆä¸å®é™…å­˜å‚¨ï¼‰</span>
    <span class="hljs-keyword">assert</span> cache.get(<span class="hljs-string">"any_key"</span>) <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>
</code></pre>
<blockquote>
<p>âœ… <strong>é›¶ä»£ç ä¾µå…¥ï¼Œä»…é é…ç½®å³å¯åˆ‡æ¢åº•å±‚å®ç°ï¼</strong></p>
</blockquote>
<hr/>
<h2 data-id="heading-11">äº”ã€ä¸ºä»€ä¹ˆä½¿ç”¨ä»£ç†æ¨¡å¼ï¼Ÿä¼˜åŠ¿ä½•åœ¨ï¼Ÿ</h2>





























<table><thead><tr><th>ä¼˜åŠ¿</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>è§£è€¦</strong></td><td>ä¸šåŠ¡ä»£ç ä¸ä¾èµ–å…·ä½“ç¼“å­˜å®ç°</td></tr><tr><td><strong>é€æ˜æ€§</strong></td><td>å¼€å‘è€…æ— éœ€å…³å¿ƒ <code>cache</code> å†…éƒ¨æ˜¯ Redis è¿˜æ˜¯ Memcached</td></tr><tr><td><strong>æ‡’åŠ è½½</strong></td><td>çœŸå®ç¼“å­˜è¿æ¥åœ¨é¦–æ¬¡ä½¿ç”¨æ—¶æ‰å»ºç«‹ï¼ŒèŠ‚çœèµ„æº</td></tr><tr><td><strong>å¤šåç«¯æ”¯æŒ</strong></td><td>é€šè¿‡ <code>caches[alias]</code> è½»æ¾ç®¡ç†å¤šä¸ªç¼“å­˜å®ä¾‹</td></tr><tr><td><strong>æµ‹è¯•å‹å¥½</strong></td><td>å¯è½»æ¾ mock æˆ–æ›¿æ¢ä¸º dummy åç«¯</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-12">å…­ã€æ‰©å±•ï¼šè‡ªå®šä¹‰ç¼“å­˜åç«¯</h2>
<p>Django å…è®¸ä½ å®ç°è‡ªå·±çš„ç¼“å­˜åç«¯ï¼Œåªéœ€ç»§æ‰¿ <code>BaseCache</code>ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># myapp/cache_backends.py</span>
<span class="hljs-keyword">from</span> django.core.cache.backends.base <span class="hljs-keyword">import</span> BaseCache

<span class="hljs-keyword">class</span> <span class="hljs-title class_">MyCustomCache</span>(<span class="hljs-title class_ inherited__">BaseCache</span>):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">get</span>(<span class="hljs-params">self, key, default=<span class="hljs-literal">None</span>, version=<span class="hljs-literal">None</span></span>):
        <span class="hljs-comment"># è‡ªå®šä¹‰è·å–é€»è¾‘ï¼ˆå¦‚è°ƒç”¨å¤–éƒ¨ APIï¼‰</span>
        ...

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">set</span>(<span class="hljs-params">self, key, value, timeout=<span class="hljs-number">300</span>, version=<span class="hljs-literal">None</span></span>):
        <span class="hljs-comment"># è‡ªå®šä¹‰å­˜å‚¨é€»è¾‘</span>
        ...
</code></pre>
<p>é…ç½®ä½¿ç”¨ï¼š</p>
<pre><code class="hljs language-objectivec" lang="objectivec"><span class="hljs-built_in">CACHES</span> = {
    <span class="hljs-string">'default'</span>: {
        <span class="hljs-string">'BACKEND'</span>: <span class="hljs-string">'myapp.cache_backends.MyCustomCache'</span>,
    }
}
</code></pre>
<blockquote>
<p>ä»£ç†æ¨¡å¼ç¡®ä¿ä½ çš„è‡ªå®šä¹‰åç«¯èƒ½<strong>æ— ç¼æ¥å…¥ç°æœ‰ä»£ç </strong>ï¼</p>
</blockquote>
<hr/>
<h2 data-id="heading-13">ä¸ƒã€å¸¸è§è¯¯åŒºæ¾„æ¸…</h2>
<h3 data-id="heading-14">âŒ è¯¯åŒº1ï¼šâ€œ<code>cache</code> æ˜¯ä¸€ä¸ªå•ä¾‹ç¼“å­˜å®ä¾‹â€</h3>
<ul>
<li><strong>çº æ­£</strong>ï¼š<code>cache</code> æ˜¯ä¸€ä¸ª<strong>ä»£ç†å¯¹è±¡</strong>ï¼ŒèƒŒåçš„çœŸå®å®ä¾‹ç”± <code>CacheHandler</code> ç®¡ç†ã€‚</li>
</ul>
<h3 data-id="heading-15">âŒ è¯¯åŒº2ï¼šâ€œä¿®æ”¹ <code>cache</code> å±æ€§ä¼šå½±å“æ‰€æœ‰åœ°æ–¹â€</h3>
<ul>
<li><strong>çº æ­£</strong>ï¼šç”±äºä»£ç†è½¬å‘ï¼Œ<code>cache.timeout = 60</code> å®é™…ä¿®æ”¹çš„æ˜¯çœŸå®åç«¯çš„å±æ€§ï¼Œä½†<strong>ä¸æ¨èç›´æ¥ä¿®æ”¹</strong>ï¼Œåº”é€šè¿‡é…ç½®æ§åˆ¶ã€‚</li>
</ul>
<h3 data-id="heading-16">âŒ è¯¯åŒº3ï¼šâ€œä»£ç†ä¼šå¸¦æ¥æ€§èƒ½æŸè€—â€</h3>
<ul>
<li><strong>çº æ­£</strong>ï¼šPython å±æ€§æŸ¥æ‰¾å¼€é”€æå°ï¼Œä¸”çœŸå®å¯¹è±¡ä¼šè¢«ç¼“å­˜ï¼ˆ<code>_caches</code> å­—å…¸ï¼‰ï¼Œ<strong>ä»…é¦–æ¬¡è®¿é—®æœ‰å¾®å° overhead</strong>ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-17">å…«ã€æ€»ç»“</h2>
<p>Django é€šè¿‡ <strong>å±æ€§ä»£ç†æ¨¡å¼ + æ³¨å†Œè¡¨æ¨¡å¼</strong>ï¼Œæ„å»ºäº†ä¸€ä¸ª<strong>é«˜åº¦çµæ´»ã€å¯æ’æ‹”çš„ç¼“å­˜ç³»ç»Ÿ</strong>ï¼š</p>
<ul>
<li><strong><code>cache</code></strong> æ˜¯ä¸€ä¸ªæ™ºèƒ½ä»£ç†ï¼Œéšè—äº†åº•å±‚å¤æ‚æ€§ï¼›</li>
<li><strong><code>CACHES</code> é…ç½®</strong> å†³å®šäº†çœŸå®åç«¯ç±»å‹ï¼›</li>
<li><strong>å¼€å‘è€…åªéœ€å…³æ³¨ä¸šåŠ¡é€»è¾‘</strong>ï¼Œæ— éœ€å…³å¿ƒç¼“å­˜å®ç°ç»†èŠ‚ã€‚</li>
</ul>
<blockquote>
<p>ğŸ’¡ <strong>è®¾è®¡å¯ç¤º</strong>ï¼š<br/>
å½“ä½ éœ€è¦â€œ<strong>åŒä¸€æ¥å£ï¼Œå¤šç§å®ç°ï¼Œè¿è¡Œæ—¶åˆ‡æ¢</strong>â€æ—¶ï¼Œå±æ€§ä»£ç†æ¨¡å¼æ˜¯ä¸€ä¸ªä¼˜é›…çš„è§£å†³æ–¹æ¡ˆã€‚</p>
</blockquote>
<p>è¿™ç§æ¨¡å¼ä¸ä»…ç”¨äºç¼“å­˜ï¼Œè¿˜å¹¿æ³›åº”ç”¨äº Django çš„ï¼š</p>
<ul>
<li>æ•°æ®åº“è·¯ç”±ï¼ˆ<code>db_router</code>ï¼‰</li>
<li>æ—¥å¿—å¤„ç†å™¨</li>
<li>é‚®ä»¶åç«¯</li>
<li>æ–‡ä»¶å­˜å‚¨ï¼ˆ<code>default_storage</code>ï¼‰</li>
</ul>
<p>æŒæ¡å®ƒï¼Œä½ å°±æŒæ¡äº† Django â€œçº¦å®šä¼˜äºé…ç½®â€ å’Œ â€œå¯æ’æ‹”æ¶æ„â€ çš„æ ¸å¿ƒæ€æƒ³ã€‚</p>
<hr/>
<p><strong>å»¶ä¼¸é˜…è¯»</strong>ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.djangoproject.com%2Fen%2Fstable%2Ftopics%2Fcache%2F" target="_blank" title="https://docs.djangoproject.com/en/stable/topics/cache/" ref="nofollow noopener noreferrer">Django å®˜æ–¹æ–‡æ¡£ï¼šCache Framework</a></li>
<li>ã€ŠTwo Scoops of Djangoã€‹ç¬¬ 18 ç« ï¼šCaching</li>
<li>æºç é˜…è¯»ï¼š<code>django/core/cache/</code></li>
</ul>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[IntelliJ IDEA 2026.1 EAP 2 å‘å¸ƒï¼ŒClaude Code ä½“éªŒä¼˜åŒ–ï¼äººéº»äº†ã€‚]]></title>    <link>https://juejin.cn/post/7602901565033644078</link>    <guid>https://juejin.cn/post/7602901565033644078</guid>    <pubDate>2026-02-04T12:24:10.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602901565033644078" data-draft-id="7602811649126187059" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="IntelliJ IDEA 2026.1 EAP 2 å‘å¸ƒï¼ŒClaude Code ä½“éªŒä¼˜åŒ–ï¼äººéº»äº†ã€‚"/> <meta itemprop="keywords" content="åç«¯,Java"/> <meta itemprop="datePublished" content="2026-02-04T12:24:10.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="JavaGuide"/> <meta itemprop="url" content="https://juejin.cn/user/166781497383294"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            IntelliJ IDEA 2026.1 EAP 2 å‘å¸ƒï¼ŒClaude Code ä½“éªŒä¼˜åŒ–ï¼äººéº»äº†ã€‚
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/166781497383294/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    JavaGuide
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T12:24:10.000Z" title="Wed Feb 04 2026 12:24:10 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯ Guideã€‚IntelliJ IDEA 2026.1 EAP 2 æ¥äº†ï¼è¿™æ¬¡æ›´æ–°å˜åŒ–ä¸å°â€”â€”Gradle Tooling API å‡çº§åˆ° 9.3.0ã€Java è°ƒè¯•å™¨æ–°å¢å¼‚æ­¥å †æ ˆè·Ÿè¸ªå¼€é”€æ£€æµ‹ã€Claude Code æ”¯æŒ Shift+Enter æ¢è¡Œã€JUnit 6 çš„ CancellationToken æ”¯æŒã€DevContainers å®¹å™¨åŒ–å¼€å‘å¢å¼ºã€‚</p>
<p>å’Œå¤§å®¶ä¸€æ ·ï¼Œç°æœ‰ Cursorã€Claude Codeã€ Codex ç­‰ AI ç¼–ç¨‹ IDE ä¹‹åï¼Œæˆ‘æ‰“å¼€ IDEA çš„é¢‘ç‡çœŸçš„å°‘å¤šäº†ã€‚ä¸è¿‡ï¼Œæˆ‘è¿˜æ˜¯ä¼šåœ¨ç”µè„‘è£…ä¸Šï¼Œå¹³æ—¶ CR æˆ–è€…è°ƒè¯•ç­‰åœºæ™¯è¿˜æ˜¯æ›´ç†Ÿæ‚‰ä¸€äº›ã€‚</p>
<p>å½“ä¸‹å»ä¸‹ç»“è®ºï¼Œè¯´è¿™æ¬¾é™ªä¼´äº†ç»å¤§éƒ¨åˆ† Java å¼€å‘è€…è¿™ä¹ˆå¤šå¹´çš„ IDE ä¼šèµ°å‘ç­äº¡ï¼ŒçœŸè¿˜ä¸å¤ªå¥½è¯´ï¼Œè¿™ä¸ªæ—¶ä»£ä¸€åˆ‡å‘å±•éƒ½å¿«äº†ï¼è¯´ä¸å®š IDEA åé¢åœ¨ AI æ–¹å‘å–å¾—äº†è¿›æ­¥å‘¢ï¼Ÿ</p>
<p>å¼€å§‹ä»‹ç»æœ¬æ¬¡å¸¦æ¥çš„ä¸»è¦æ›´æ–°ä¹‹å‰ï¼Œå…ˆç®€å•ä»‹ç»ä¸€ä¸‹ EAPã€‚</p>
<h2 data-id="heading-0">ä»€ä¹ˆæ˜¯ EAPï¼Ÿ</h2>
<p><strong>EAPï¼ˆEarly Access Programï¼‰</strong> æ˜¯ JetBrains çš„æ—©æœŸè®¿é—®è®¡åˆ’ï¼Œæä¾›<strong>å…è´¹çš„å…¨åŠŸèƒ½é¢„è§ˆç‰ˆæœ¬</strong>ã€‚ä½ å¯ä»¥å°†å…¶è§†ä¸ºâ€œå®˜æ–¹å…¬æµ‹ç‰ˆâ€â€”â€”åŠŸèƒ½å®Œæ•´ä½†å¤„äºæ‰“ç£¨æœŸï¼Œé€‚åˆæƒ³æå‰å°é²œæˆ–å…è´¹ä½¿ç”¨æ­£ç‰ˆ IDE çš„å¼€å‘è€…ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/20c9100bb0bf40d7aae693a6077ac9a6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YUd1aWRl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770812652&amp;x-signature=kgIPiSi%2FSjxYi26QmKWoqnyQebA%3D" alt="" loading="lazy"/></p>
<p><strong>ä¸ºä»€ä¹ˆè¦å…³æ³¨ EAPï¼Ÿ</strong></p>
<ul>
<li><strong>å®Œå…¨å…è´¹</strong>ï¼šEAP ç‰ˆæœ¬åœ¨æœ‰æ•ˆæœŸå†…æ²¡æœ‰ä»»ä½•åŠŸèƒ½é™åˆ¶ã€‚</li>
<li><strong>æå‰ä½“éªŒæ–°ç‰¹æ€§</strong>ï¼šæ¯”æ­£å¼ç‰ˆæ—©å‡ ä¸ªæœˆç”¨ä¸Šç”Ÿäº§åŠ›å·¥å…·ã€‚</li>
<li><strong>å½±å“äº§å“æ–¹å‘</strong>ï¼šä½ çš„åé¦ˆå¯ä»¥ç›´æ¥æäº¤ç»™å¼€å‘è€…ï¼Œç”šè‡³å½±å“æœ€ç»ˆç‰ˆæœ¬çš„èµ°å‘ã€‚</li>
</ul>
<p><strong>æ³¨æ„</strong>ï¼šç”±äºæ˜¯ä¸ç¨³å®šç‰ˆæœ¬ï¼Œç”Ÿäº§ç¯å¢ƒå»ºè®®ä½¿ç”¨æ­£å¼ç‰ˆï¼›ä¸ªäººé¡¹ç›®æˆ–æŠ€æœ¯ç ”ç©¶å»ºè®®å°è¯• EAPã€‚</p>
<p>ä¸‹é¢å¸¦å¤§å®¶è¯¦ç»†çœ‹çœ‹è¿™æ¬¡æ›´æ–°ã€‚</p>
<h2 data-id="heading-1">Java è°ƒè¯•å™¨ä¼˜åŒ–</h2>
<p>å†™å¼‚æ­¥ä»£ç æœ€å¤´ç–¼çš„æ˜¯ä»€ä¹ˆï¼Ÿ<strong>è°ƒè¯•</strong>ã€‚</p>
<p>å½“ä½ ç”¨ <code>CompletableFuture</code>ã€Reactorã€RxJava è¿™äº›åº“å†™å¼‚æ­¥é€»è¾‘æ—¶ï¼Œå †æ ˆè·Ÿè¸ªä¼šå˜æˆä¸€ä¸² <code>lambda$xxx$xxx</code>ï¼Œçœ‹ä¸å‡ºä¸šåŠ¡é€»è¾‘åœ¨å“ªã€‚</p>
<p><strong>ä»€ä¹ˆæ˜¯å¼‚æ­¥å †æ ˆè·Ÿè¸ªï¼Ÿ</strong></p>
<p>ä¼ ç»Ÿå †æ ˆæ˜¯â€œç‰©ç†â€çš„ï¼Œè®°å½•çš„æ˜¯å½“å‰çº¿ç¨‹çš„è°ƒç”¨ã€‚è€Œå¼‚æ­¥ä»£ç ä¸­ï¼Œä»»åŠ¡ä¼šåœ¨ä¸åŒçº¿ç¨‹é—´ä¼ é€’ï¼Œå¯¼è‡´è°ƒç”¨é“¾æ–­è£‚ã€‚å¼‚æ­¥å †æ ˆè·Ÿè¸ªå°è¯•è¿˜åŸâ€œé€»è¾‘è°ƒç”¨é“¾â€ï¼Œè®©ä½ çœ‹åˆ°ä»»åŠ¡æ˜¯ä»å“ªé‡Œè¢«åˆ›å»ºå’Œè§¦å‘çš„ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä¼ ç»Ÿä»£ç çš„å †æ ˆ</span>
Thread.run()
  â””â”€ service.process()
      â””â”€ repository.save()

<span class="hljs-comment">// å¼‚æ­¥ä»£ç çš„å †æ ˆï¼ˆä¼ ç»Ÿæ–¹å¼ï¼‰</span>
ForkJoinPool.run()
  â””â”€ lambda$asyncProcess$abc123
      â””â”€ CompletableFuture.apply()
          â””â”€ ?? ä¸šåŠ¡é€»è¾‘åœ¨å“ªï¼Ÿ
</code></pre>
<p><strong>å¼‚æ­¥å †æ ˆè·Ÿè¸ª</strong>å°è¯•è¿˜åŸ"é€»è¾‘è°ƒç”¨é“¾"ï¼Œè€Œä¸æ˜¯"ç‰©ç†çº¿ç¨‹æ ˆ"ï¼Œè®©å¼€å‘è€…èƒ½çœ‹åˆ°ä¸šåŠ¡ä»£ç çš„æ‰§è¡Œè·¯å¾„ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/36daa702f4114fc9ab7cc4a30bdfd27b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YUd1aWRl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770812652&amp;x-signature=uPCv0Z0dciGPdBYsNPoyoompIfo%3D" alt="åœ¨æ§åˆ¶å°ä¸­æ‰“å°çš„å¤±è´¥æµ‹è¯•çš„å¼‚æ­¥å †æ ˆè·Ÿè¸ª" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c4119f26dad94da6bee533c36a819f5c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YUd1aWRl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770812652&amp;x-signature=GLAz0UIBNcxLJLcDh5c81EPYq2o%3D" alt="è¿è¡Œé…ç½®å¯¹è¯æ¡†ä¸­çš„â€œæ‰“å°å¼‚å¸¸çš„å¼‚æ­¥å †æ ˆè·Ÿè¸ªâ€å¤é€‰æ¡†" loading="lazy"/></p>
<p>EAP 2 å¼•å…¥äº†<strong>å¼‚æ­¥å †æ ˆè·Ÿè¸ªå¼€é”€æ£€æµ‹</strong>ã€‚</p>
<p><strong>ä¸ºä»€ä¹ˆè¦æ£€æµ‹å¼€é”€ï¼Ÿ</strong></p>
<p>ç»´æŠ¤é€»è¾‘è°ƒç”¨å…³ç³»éœ€è¦é¢å¤–çš„å†…å­˜å’Œ CPU èµ„æºã€‚åœ¨æŸäº›æç«¯åœºæ™¯ä¸‹ï¼Œè¿™ç§ç›‘æ§æœ¬èº«å¯èƒ½æˆä¸ºæ€§èƒ½ç“¶é¢ˆã€‚æ–°ç‰¹æ€§ä¼šä¸»åŠ¨ç›‘æµ‹è°ƒè¯•å™¨çš„è¿è¡Œå¼€é”€ï¼Œå½“å‘ç°å…¶æ¶ˆè€—èµ„æºè¿‡å¤šæ—¶ä¼šåŠæ—¶æç¤ºã€‚è¿™èƒ½æœ‰æ•ˆé˜²æ­¢å¼€å‘è€…å› ä¸ºâ€œè°ƒè¯•å·¥å…·å¤ªé‡â€è€Œå¯¹åº”ç”¨æœ¬èº«çš„æ€§èƒ½äº§ç”Ÿè¯¯åˆ¤ã€‚</p>
<h2 data-id="heading-2">é€‚é… JUnit 6 æ–°ç‰¹æ€§</h2>
<p>JUnit 6.0.0 å·²ç»å‘å¸ƒï¼ŒIDEA 2026.1 EAP 2 å¯¹å…¶æ”¯æŒè¿›è¡Œäº†ä¼˜åŒ–ã€‚</p>
<h3 data-id="heading-3">CancellationToken æ”¯æŒï¼ˆæ–°ç‰¹æ€§ï¼‰</h3>
<p>IDEA-382199ï¼š<strong>JUnit 6 æ”¯æŒ CancellationToken</strong>ã€‚</p>
<p><strong>JUnit 6 æœ‰å“ªäº›æ–°ç‰¹æ€§ï¼Ÿ</strong></p>
<p>JUnit 6 æ˜¯ä¸€æ¬¡é‡å¤§å‡çº§ï¼Œå…¶æ ¸å¿ƒå˜åŒ–åŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>ç‰ˆæœ¬å·ç»Ÿä¸€</strong>ï¼šJUnit Platformã€Jupiter å’Œ Vintage ç°åœ¨ç»Ÿä¸€ä½¿ç”¨ 6.0.0 ç‰ˆæœ¬å·ã€‚</li>
<li><strong>åŸºçº¿æå‡</strong>ï¼šè¦æ±‚ <strong>Java 17+</strong> å’Œ <strong>Kotlin 2.2+</strong>ã€‚</li>
<li><strong>åŸç”Ÿæ”¯æŒ Kotlin æŒ‚èµ·å‡½æ•°</strong>ï¼šå¯ä»¥ç›´æ¥æµ‹è¯• <code>suspend</code> æ–¹æ³•ã€‚</li>
<li><strong>åä½œå¼å–æ¶ˆ</strong>ï¼šå¼•å…¥ CancellationToken APIã€‚</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/184a684db55c4258b55053e218faf58c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YUd1aWRl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770812652&amp;x-signature=GpaNjV2pctW2HASoffmYdLszde4%3D" alt="" loading="lazy"/></p>
<p><strong>CancellationToken</strong> æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<p>å®ƒè®©æµ‹è¯•å¯ä»¥è¢«"ä¸»åŠ¨å–æ¶ˆ"ã€‚</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">// ä½ å¯åŠ¨äº† 1000 ä¸ªæµ‹è¯•</span>
<span class="hljs-comment">// è·‘åˆ°ç¬¬ 10 ä¸ªå‘ç°å…³é”® bugï¼Œæƒ³ç«‹å³åœæ­¢</span>
<span class="hljs-comment">// ä»¥å‰åªèƒ½æ‰‹åŠ¨ kill è¿›ç¨‹</span>
<span class="hljs-comment">// ç°åœ¨å¯ä»¥ç”¨ CancellationToken å–æ¶ˆå‰©ä½™æµ‹è¯•</span>
</code></pre>
<p>å¯¹ CI/CD åœºæ™¯å°¤å…¶æœ‰ç”¨â€”â€”å¿«é€Ÿåé¦ˆã€èŠ‚çœèµ„æºã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fd51fdc5c75f42159041ec223857af6b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YUd1aWRl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770812652&amp;x-signature=xcZmvD6HEC03kHG9Xbb19wxy4%2Fk%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h3 data-id="heading-4">@FieldSource é™æ€åˆ†æä¿®å¤</h3>
<p>ä¿®å¤äº† JUnit 6 <code>@FieldSource</code> çš„é™æ€åˆ†æè¯¯æŠ¥ã€‚</p>
<pre><code class="hljs language-arduino" lang="arduino">@<span class="hljs-built_in">FieldSource</span>(<span class="hljs-string">"testData.txt"</span>)
<span class="hljs-type">static</span> <span class="hljs-built_in">Stream</span>&lt;<span class="hljs-type">String</span>&gt; testData;

<span class="hljs-comment">// ä»¥å‰ï¼šIDE æŠ¥é”™ "Field source type must be convertible to a Stream"</span>
<span class="hljs-comment">// ç°åœ¨ï¼šæ­£ç¡®è¯†åˆ«ç±»å‹ï¼Œä¸å†è¯¯æŠ¥</span>
</code></pre>
<h2 data-id="heading-5">DevContainers å¢å¼º</h2>
<p>å¦‚æœä½ åœ¨ç”¨ DevContainersï¼ˆå®¹å™¨åŒ–å¼€å‘ç¯å¢ƒï¼‰ï¼Œè¿™æ¬¡æ›´æ–°æœ‰å‡ ä¸ªé‡è¦æ”¹è¿›ã€‚</p>
<p><strong>ä»€ä¹ˆæ˜¯ DevContainersï¼Ÿ</strong></p>
<p><strong>DevContainersï¼ˆå¼€å‘å®¹å™¨ï¼‰</strong> æ˜¯ç”¨å®¹å™¨å°è£…å®Œæ•´å¼€å‘ç¯å¢ƒçš„æŠ€æœ¯ã€‚ä½ æŠŠé¡¹ç›®éœ€è¦çš„æ‰€æœ‰å·¥å…·ã€ä¾èµ–ã€é…ç½®éƒ½æ‰“åŒ…è¿› Docker å®¹å™¨ï¼Œå›¢é˜Ÿæˆå‘˜ç”¨åŒä¸€ä¸ªé•œåƒå¼€å‘â€”â€”"åœ¨æˆ‘æœºå™¨ä¸Šèƒ½è·‘"çš„é—®é¢˜ç›´æ¥æ¶ˆå¤±ã€‚</p>
<p>æ ¸å¿ƒå¥½å¤„ï¼š</p>
<ul>
<li><strong>ç¯å¢ƒä¸€è‡´æ€§</strong>ï¼šæ‰€æœ‰äººç”¨åŒä¸€ä¸ªå®¹å™¨ï¼Œæœ¬åœ°ã€æµ‹è¯•ã€ç”Ÿäº§ç¯å¢ƒå¯¹é½</li>
<li><strong>å¿«é€Ÿä¸Šæ‰‹</strong>ï¼šæ–°æˆå‘˜ <code>docker-compose up</code> å°±èƒ½å¹²æ´»</li>
<li><strong>éš”ç¦»æ€§</strong>ï¼šé¡¹ç›®ä¾èµ–ä¸æ±¡æŸ“æœ¬åœ°æœºå™¨</li>
<li><strong>å¯ç§»æ¤</strong>ï¼šäº‘å¼€å‘ç¯å¢ƒï¼ˆGitHub Codespacesã€Gitpodï¼‰æ— ç¼åˆ‡æ¢</li>
</ul>
<h3 data-id="heading-6">æ–°å¢ DevContainers é…ç½®é€‰é¡¹</h3>
<p>ä¸ºäº†æ›´å¥½åœ°å…¼å®¹ <strong>Dev Container Specification</strong>ï¼ŒEAP 2 æ–°å¢äº†ä¸‰ä¸ªå…³é”®é…ç½®é¡¹ï¼š</p>





















<table><thead><tr><th align="left">é€‰é¡¹</th><th align="left">ä½œç”¨</th></tr></thead><tbody><tr><td align="left"><code>remoteUser</code></td><td align="left">æŒ‡å®šå®¹å™¨å†…è¿è¡Œå‘½ä»¤çš„ç”¨æˆ·ï¼ˆå¦‚é¿å…ä½¿ç”¨ root å¸¦æ¥çš„æƒé™é—®é¢˜ï¼‰</td></tr><tr><td align="left"><code>remoteEnv</code></td><td align="left">çµæ´»è®¾ç½®å®¹å™¨å†…çš„ç¯å¢ƒå˜é‡</td></tr><tr><td align="left"><code>userEnvProbe</code></td><td align="left">ä¼˜åŒ–æ¢æµ‹ç”¨æˆ·ç¯å¢ƒé…ç½®ï¼ˆå¦‚ <code>.zshrc</code>ï¼‰çš„æ–¹å¼</td></tr></tbody></table>
<p>è¿™äº›æ”¹è¿›è®© IDEA åœ¨å¤„ç†å¤æ‚çš„å®¹å™¨æƒé™å’Œç¯å¢ƒå·®å¼‚æ—¶æ›´åŠ æ¸¸åˆƒæœ‰ä½™ã€‚</p>
<h3 data-id="heading-7">Docker è¿æ¥ä¿®å¤</h3>
<p>ä¿®å¤äº† <strong>macOS ä¸Š Docker æ’ä»¶è¿æ¥å¤±è´¥</strong>çš„é—®é¢˜ã€‚è¯¥é—®é¢˜ç”± Docker Desktop for macOS æ›´æ”¹é»˜è®¤ Socket è·¯å¾„å¼•èµ·ï¼Œæ–°ç‰ˆæœ¬å·²å®Œæˆè·¯å¾„è‡ªåŠ¨é€‚é…ã€‚</p>
<h2 data-id="heading-8">Gradle ç”Ÿæ€å‡çº§</h2>
<p>è¿™æ¬¡ EAP 2 åœ¨ Gradle é›†æˆä¸Šä¸‹äº†å¤§åŠŸå¤«ï¼Œæ ¸å¿ƒæ˜¯<strong>Gradle Tooling API å‡çº§åˆ° 9.3.0</strong>ã€‚</p>
<h3 data-id="heading-9">Gradle Tooling API 9.3.0</h3>
<p><strong>ä»€ä¹ˆæ˜¯ Gradle Tooling APIï¼Ÿ</strong></p>
<p>å®ƒæ˜¯ Gradle æä¾›çš„ç¼–ç¨‹æ¥å£ï¼Œè®© IDE å¯ä»¥"æ·±å…¥"æ„å»ºè¿‡ç¨‹â€”â€”ä¸æ˜¯ç®€å•è°ƒç”¨å‘½ä»¤è¡Œï¼Œè€Œæ˜¯ç›´æ¥æŸ¥è¯¢é¡¹ç›®ç»“æ„ã€ä¾èµ–å…³ç³»ã€ä»»åŠ¡ä¿¡æ¯ï¼Œå¹¶ç”¨ç±»å‹å®‰å…¨çš„æ–¹å¼è¿”å›ç»“æœã€‚</p>
<p>ç®€å•å¯¹æ¯”ï¼š</p>
<ul>
<li><strong>å‘½ä»¤è¡Œæ–¹å¼</strong>ï¼šIDE è°ƒç”¨ <code>gradle tasks</code>ï¼Œç„¶åè§£ææ–‡æœ¬è¾“å‡º</li>
<li><strong>Tooling API</strong>ï¼šIDE è°ƒç”¨ <code>getTasks()</code>ï¼Œç›´æ¥æ‹¿åˆ°ä»»åŠ¡å¯¹è±¡åˆ—è¡¨</li>
</ul>
<p>Tooling API çš„ä¼˜åŠ¿ï¼š</p>
<ul>
<li><strong>ç‰ˆæœ¬ç‹¬ç«‹</strong>ï¼šåŒä¸€ API ç‰ˆæœ¬å¯ä»¥å…¼å®¹ä¸åŒ Gradle ç‰ˆæœ¬</li>
<li><strong>ç»“æ„åŒ–æ•°æ®</strong>ï¼šä¸éœ€è¦è§£ææ–‡æœ¬ï¼Œç›´æ¥è·å–æ¨¡å‹å¯¹è±¡</li>
<li><strong>æ·±åº¦é›†æˆ</strong>ï¼šå¯ä»¥å®æ—¶ç›‘å¬æ„å»ºè¿›åº¦ã€æ¨¡å‹å˜åŒ–</li>
</ul>
<p>å‡çº§åˆ° 9.3.0 å¸¦æ¥çš„å¥½å¤„ï¼š</p>
<ul>
<li>æ›´å¥½çš„ WSL/Docker ç¯å¢ƒæ”¯æŒ</li>
<li>æœ¬åœ°ä¾èµ–è¡¥å…¨ä½“éªŒæå‡</li>
<li>ç‰ˆæœ¬ç›®å½•ï¼ˆVersion Catalogï¼‰ç›¸å…³é€»è¾‘ä¿®å¤</li>
</ul>
<h3 data-id="heading-10">Gradle Best Practices æ£€æµ‹</h3>
<p>æ–°å¢<strong>æœ€ä½³å®è·µæ£€æµ‹</strong>åŠŸèƒ½ã€‚Gradle å®˜æ–¹æœ‰ä¸€å¥—æ„å»ºæœ€ä½³å®è·µï¼ˆæ¯”å¦‚é¿å…ä½¿ç”¨è¿‡æ—¶è¯­æ³•ã€åˆç†é…ç½®ä¾èµ–ç­‰ï¼‰ï¼ŒIDEA ç°åœ¨ä¼šä¸»åŠ¨æ£€æµ‹ä½ çš„ <code>build.gradle</code>/<code>build.gradle.kts</code> æ˜¯å¦ç¬¦åˆè¿™äº›å®è·µã€‚</p>
<pre><code class="hljs language-groovy" lang="groovy">// ä¸æ¨è
dependencies {
    implementation 'org.springframework.boot:spring-boot-starter-web:3.2.0'
}

// æ¨èï¼šä½¿ç”¨ç‰ˆæœ¬ç›®å½•
dependencies {
    implementation libs.spring.boot.starter.web
}
</code></pre>
<h3 data-id="heading-11">æœ¬åœ°ä¾èµ–è¡¥å…¨</h3>
<p>EAP 2 ä¿®å¤äº†<strong>æœ¬åœ°ä¾èµ–è¡¥å…¨</strong>çš„é—®é¢˜ã€‚ä»¥å‰åœ¨ <code>dependencies {}</code> å—é‡Œè¡¥å…¨æœ¬åœ°é¡¹ç›®ä¾èµ–æ—¶ï¼Œé‡åˆ°æ¨ªæ ï¼ˆ<code>-</code>ï¼‰ç¬¦å·ä¼šå¤±æ•ˆï¼Œç°åœ¨å·²ç»ä¿®å¤ã€‚</p>
<p>å¦å¤–ï¼Œ<strong>TOML å…ƒç´ </strong>çš„ Find Usages çª—å£æ ‡é¢˜ä¹Ÿæ”¹äº†ï¼ˆIDEA-382192ï¼‰ï¼Œæ›´æ¸…æ™°ã€‚</p>
<h2 data-id="heading-12">å¼€å‘è€…ä½“éªŒä¼˜åŒ–</h2>
<h3 data-id="heading-13">HTTP Client æ–°å¢ wait-for å‡½æ•°</h3>
<p><strong>HTTP Client æ”¯æŒ <code>wait-for(x)</code> å‡½æ•°</strong>ï¼ˆä¼‘çœ /ç­‰å¾…ï¼‰ã€‚</p>
<pre><code class="hljs language-perl" lang="perl"><span class="hljs-comment">## æµ‹è¯•æ¥å£å»¶è¿Ÿ</span>
GET https:<span class="hljs-regexp">//api</span>.example.com/ping

<span class="hljs-comment">## ç­‰å¾… 3 ç§’åå†æ¬¡è¯·æ±‚</span>
<span class="hljs-keyword">wait</span>-<span class="hljs-keyword">for</span>(<span class="hljs-number">3</span>)

GET https:<span class="hljs-regexp">//api</span>.example.com/ping
</code></pre>
<p>è¿™å¯¹æµ‹è¯•"å»¶è¿Ÿè§¦å‘"ã€"é‡è¯•é€»è¾‘"ç­‰åœºæ™¯æœ‰ç”¨ã€‚</p>
<h3 data-id="heading-14">Terminal ä¸­ Claude Code æ”¯æŒä¼˜åŒ–</h3>
<p><strong>Terminal ä¸­ Claude Code æ”¯æŒ Shift+Enter æ¢è¡Œ</strong>ã€‚</p>
<p>ä»¥å‰åœ¨ Terminal é‡Œè¿›å…¥ Claude Code æ¨¡å¼åï¼ŒæŒ‰ Enter æ˜¯å‘é€æ¶ˆæ¯ï¼Œæ— æ³•æ¢è¡Œã€‚ç°åœ¨ Shift+Enter å¯ä»¥æ’å…¥æ–°è¡Œã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d37c6aa901844af99543cb9e5fe5c7ec~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YUd1aWRl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770812652&amp;x-signature=2Z5NgwZtF1ZLSuiJg40FH7NLiZ4%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-15">è¯­è¨€çº§åˆ«æ™ºèƒ½åŒ¹é…</h3>
<p><strong>è¯­è¨€çº§åˆ«è‡ªåŠ¨åŒ¹é…æœ€é«˜æ”¯æŒçš„ JDK</strong>ã€‚</p>
<p>ä»¥å‰æ‰‹åŠ¨è®¾ç½®è¯­è¨€çº§åˆ«å¾ˆçƒ¦â€”â€”é¡¹ç›®ç”¨ JDK 21ï¼Œä½†è¯­è¨€çº§åˆ«è¿˜æ˜¯ Java 17ï¼Œæ–°è¯­æ³•æŠ¥é”™ã€‚ç°åœ¨ IDEA ä¼šè‡ªåŠ¨è¯†åˆ«é¡¹ç›® JDKï¼ŒæŠŠè¯­è¨€çº§åˆ«è®¾åˆ°æœ€é«˜æ”¯æŒç‰ˆæœ¬ã€‚</p>
<h3 data-id="heading-16">é«˜ CPU å ç”¨ä¼˜åŒ–</h3>
<p>ä¿®å¤äº†<strong>æ‰“å¼€å¸¦é€šé…ç¬¦æ³›å‹çš„ Java ç±»å¯¼è‡´ CPU é£™å‡</strong>çš„é—®é¢˜ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// è¿™ç§ä»£ç ä»¥å‰ä¸€æ‰“å¼€ IDEA å°±å¼€å§‹ç‹‚åƒ CPU</span>
<span class="hljs-title class_">List</span>&lt;? <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Map</span>&lt;<span class="hljs-title class_">String</span>, ? <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Collection</span>&lt;?&gt;&gt;&gt; wildcardHell;
</code></pre>
<h2 data-id="heading-17">K2 ç¼–è¯‘å™¨æŒç»­è¿›åŒ–</h2>
<h3 data-id="heading-18">æ™ºèƒ½è¡¥å…¨æ”¹è¿›</h3>
<p><strong>æ”¹è¿›çš„å‘½åå‚æ•°è¡¥å…¨æ’åº</strong>ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// ä»¥å‰ï¼šå‘½åå‚æ•°è¡¥å…¨é¡ºåºæ··ä¹±</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">processUser</span><span class="hljs-params">(id: <span class="hljs-type">Long</span>, name: <span class="hljs-type">String</span>, age: <span class="hljs-type">Int</span>, email: <span class="hljs-type">String</span>)</span></span>

processUser(id = <span class="hljs-number">1</span>, ??? æç¤ºé¡ºåºå¾ˆä¹±)

<span class="hljs-comment">// ç°åœ¨ï¼šæŒ‰ä½¿ç”¨é¢‘ç‡ã€ä¸Šä¸‹æ–‡ç›¸å…³æ€§æ’åº</span>
processUser(id = <span class="hljs-number">1</span>, name = <span class="hljs-string">"å¼ ä¸‰"</span>, age = <span class="hljs-number">25</span>, email = <span class="hljs-string">"..."</span>)
</code></pre>
<h3 data-id="heading-19">æšä¸¾å€¼è½¯å¼ƒç”¨æç¤º</h3>
<p><strong>è½¯å¼ƒç”¨ <code>kotlin.enumValues</code> å‡½æ•°</strong>ã€‚</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// ä»¥å‰</span>
val values = enumValues&lt;<span class="hljs-attribute">Color</span>&gt;()

<span class="hljs-comment">// ç°åœ¨ IDE å»ºè®®ç”¨æ›´ç°ä»£çš„æ–¹å¼</span>
val values = <span class="hljs-attribute">Color</span><span class="hljs-selector-class">.entries</span>
</code></pre>
<p><code>enumValues</code> æ˜¯ Kotlin 1.9 ä¹‹å‰çš„é—ç•™ APIï¼Œæ–°ä»£ç åº”è¯¥ç”¨ <code>entries</code> å±æ€§ã€‚</p>
<h2 data-id="heading-20">Bug ä¿®å¤å¤§ç›˜ç‚¹</h2>
<p>EAP 2 ä¿®å¤äº†å¤§é‡ Bugï¼Œä»¥ä¸‹æ˜¯æŒ‰æ¨¡å—åˆ†ç±»çš„ä¸»è¦ä¿®å¤ï¼š</p>









































<table><thead><tr><th align="left">æ¨¡å—</th><th align="left">ä¸»è¦ä¿®å¤</th></tr></thead><tbody><tr><td align="left"><strong>Gradle</strong></td><td align="left">æœ¬åœ°ä¾èµ–è¡¥å…¨æ¨ªæ å¤±æ•ˆã€ç‰ˆæœ¬ç›®å½•é‡å‘½åã€WSL ç£ç›˜æ‰«æ</td></tr><tr><td align="left"><strong>Java</strong></td><td align="left">é€šé…æ³›å‹ CPU é£™å‡ã€åŒ…æ³¨è§£ PSI ä¸¢å¤±ã€optimize imports å¿½ç•¥æ³¨é‡Š</td></tr><tr><td align="left"><strong>è°ƒè¯•å™¨</strong></td><td align="left">Split Debugger å€¼æ›´æ–°é—®é¢˜ã€å¼‚æ­¥å †æ ˆè·Ÿè¸ªå¼€é”€æ£€æµ‹</td></tr><tr><td align="left"><strong>æµ‹è¯•</strong></td><td align="left">JUnit å‚æ•°æœªä½¿ç”¨è¯¯æŠ¥ã€Cucumber æ–œæ è½¬ä¹‰</td></tr><tr><td align="left"><strong>Kotlin</strong></td><td align="left">K2 ç§»é™¤æœªç”¨å˜é‡ã€æ™ºèƒ½è¡¥å…¨æ’åºã€æšä¸¾å€¼è½¯å¼ƒç”¨</td></tr><tr><td align="left"><strong>DevContainers</strong></td><td align="left">WSL/Docker è·¯å¾„é—®é¢˜ã€è¿œç¨‹ç”¨æˆ·/ç¯å¢ƒå˜é‡æ”¯æŒ</td></tr><tr><td align="left"><strong>UI</strong></td><td align="left">èœå•é—ªçƒã€Islands ä¸»é¢˜æ¸å˜ä¸æµç•…ã€å­—ä½“æ ·å¼é‡ç½®</td></tr><tr><td align="left"><strong>Version Control</strong></td><td align="left">Git é«˜äº®æ®‹ç•™ã€Worktree æ‰“å¼€å¤±è´¥</td></tr></tbody></table>
<h2 data-id="heading-21">æ€»ç»“</h2>
<p><strong>IntelliJ IDEA 2026.1 EAP 2 çš„å…³é”®å‡çº§ï¼š</strong></p>
<ol>
<li><strong>Gradle Tooling API 9.3.0</strong>ï¼šåº•å±‚é€šä¿¡å‡çº§ï¼Œæœ¬åœ°ä¾èµ–è¡¥å…¨ä¿®å¤</li>
<li><strong>Java è°ƒè¯•å™¨å¢å¼º</strong>ï¼šå¼‚æ­¥å †æ ˆè·Ÿè¸ªå¼€é”€æ£€æµ‹</li>
<li><strong>JUnit 6 æ”¯æŒ</strong>ï¼š<code>CancellationToken</code>ã€<code>@FieldSource</code> ä¿®å¤</li>
<li><strong>DevContainers å¢å¼º</strong>ï¼šr<code>emoteUser/remoteEnv/userEnvProbe</code> é€‰é¡¹</li>
<li><strong>HTTP Client</strong>ï¼šæ–°å¢ <code>wait-for</code> å‡½æ•°</li>
<li><strong>Claude Code</strong>ï¼šClaude Code æ”¯æŒ Shift+Enter æ¢è¡Œ</li>
<li><strong>Kotlin K2</strong>ï¼šæ™ºèƒ½è¡¥å…¨æ”¹è¿›ã€æšä¸¾å€¼è½¯å¼ƒç”¨</li>
<li><strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼šä¿®å¤é€šé…æ³›å‹ CPU é£™å‡ç­‰é—®é¢˜</li>
</ol>
<p><strong>å»ºè®®ï¼š</strong></p>
<ul>
<li>å¦‚æœä½ åœ¨ç”¨ Gradle 9.xã€JUnit 6ã€æˆ–è€…æå®¹å™¨åŒ–å¼€å‘ï¼Œè¿™æ¬¡ EAP å€¼å¾—ä¸€è¯•</li>
<li>EAP ç‰ˆæœ¬å®Œå…¨å…è´¹ï¼Œä½†å¯èƒ½ä¸ç¨³å®šï¼Œç”Ÿäº§ç¯å¢ƒè°¨æ…ä½¿ç”¨</li>
<li>å¯ä»¥åœ¨è™šæ‹Ÿæœºæˆ–æµ‹è¯•é¡¹ç›®é‡Œå…ˆè¯•è¯•ï¼Œåé¦ˆç»™ JetBrains å¸®åŠ©æ”¹è¿›æœ€ç»ˆç‰ˆæœ¬</li>
</ul>
<p><strong>â­ï¸æ¨è</strong>:</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fjavaguide.cn%2Fhome.html" target="_blank" title="https://javaguide.cn/home.html" ref="nofollow noopener noreferrer">Java é¢è¯• &amp; åç«¯é€šç”¨é¢è¯•æŒ‡å—</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fjavaguide.cn%2Fzhuanlan%2Finterview-guide.html" target="_blank" title="https://javaguide.cn/zhuanlan/interview-guide.html" ref="nofollow noopener noreferrer">ã€ŠSpringAI æ™ºèƒ½é¢è¯•å¹³å°+RAG çŸ¥è¯†åº“ã€‹</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fjavaguide.cn%2Finterview-preparation%2Fjava-roadmap.html" target="_blank" title="https://javaguide.cn/interview-preparation/java-roadmap.html" ref="nofollow noopener noreferrer">Java å­¦ä¹ è·¯çº¿(æœ€æ–°ç‰ˆï¼Œ4w+å­—)</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fjavaguide.cn%2Finterview-preparation%2Fpdf-interview-javaguide.html" target="_blank" title="https://javaguide.cn/interview-preparation/pdf-interview-javaguide.html" ref="nofollow noopener noreferrer">2026 æœ€æ–°åç«¯é¢è¯• PDF èµ„æ–™</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[docker-compose k8séƒ¨ç½²é¡¹ç›®ä½¿ç”¨æœåŠ¡åç§°ï¼Œåç«¯æœåŠ¡å‘å¸ƒåå‡ºç°æ¥å£502é—®é¢˜]]></title>    <link>https://juejin.cn/post/7602837527673929743</link>    <guid>https://juejin.cn/post/7602837527673929743</guid>    <pubDate>2026-02-04T11:30:55.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602837527673929743" data-draft-id="7600990891206049819" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="docker-compose k8séƒ¨ç½²é¡¹ç›®ä½¿ç”¨æœåŠ¡åç§°ï¼Œåç«¯æœåŠ¡å‘å¸ƒåå‡ºç°æ¥å£502é—®é¢˜"/> <meta itemprop="keywords" content="å‰ç«¯,Nginx,Docker"/> <meta itemprop="datePublished" content="2026-02-04T11:30:55.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="litongqian"/> <meta itemprop="url" content="https://juejin.cn/user/4318537403609374"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            docker-compose k8séƒ¨ç½²é¡¹ç›®ä½¿ç”¨æœåŠ¡åç§°ï¼Œåç«¯æœåŠ¡å‘å¸ƒåå‡ºç°æ¥å£502é—®é¢˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4318537403609374/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    litongqian
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T11:30:55.000Z" title="Wed Feb 04 2026 11:30:55 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>è¿™é‡Œä½¿ç”¨ä¸€ä¸ªä¾‹å­docker-compose.yml</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">//</span> <span class="hljs-string">docker-compose.yml</span>
<span class="hljs-comment"># ç¡®ä¿æ‰€æœ‰æœåŠ¡åœ¨åŒä¸€ç½‘ç»œ</span>
<span class="hljs-attr">version:</span> <span class="hljs-string">'3.8'</span>
<span class="hljs-attr">services:</span>
  <span class="hljs-attr">app:</span>
    <span class="hljs-attr">networks:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">mynetwork</span>
    <span class="hljs-attr">depends_on:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">mysql</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">redis</span>
  
  <span class="hljs-attr">mysql:</span>
    <span class="hljs-attr">networks:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">mynetwork</span>
  
  <span class="hljs-attr">redis:</span>
    <span class="hljs-attr">networks:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">mynetwork</span>
  <span class="hljs-attr">imotor-ltq:</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">phm-ltq:1.0.0</span>
    <span class="hljs-attr">container_name:</span> <span class="hljs-string">imotor-ltq</span>
    <span class="hljs-attr">restart:</span> <span class="hljs-string">always</span>
    <span class="hljs-attr">networks:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">app_net</span>
    <span class="hljs-attr">deploy:</span>
      <span class="hljs-attr">resources:</span>
        <span class="hljs-attr">limits:</span>
          <span class="hljs-attr">cpus:</span> <span class="hljs-string">'3.00'</span>
          <span class="hljs-attr">memory:</span> <span class="hljs-string">5G</span>
        <span class="hljs-attr">reservations:</span>
          <span class="hljs-attr">cpus:</span> <span class="hljs-string">'3.00'</span>
          <span class="hljs-attr">memory:</span> <span class="hljs-string">2G</span>
    <span class="hljs-attr">ports:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"7953:8080"</span>
<span class="hljs-attr">spectral-ltq-web:</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">spectral-ltq-web:1.0.0</span>
    <span class="hljs-attr">container_name:</span> <span class="hljs-string">spectral-ltq-web</span>
    <span class="hljs-attr">restart:</span> <span class="hljs-string">always</span>
    <span class="hljs-attr">networks:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">app_net</span>
    <span class="hljs-attr">deploy:</span>
      <span class="hljs-attr">resources:</span>
        <span class="hljs-attr">limits:</span>
          <span class="hljs-attr">cpus:</span> <span class="hljs-string">'1.00'</span>
          <span class="hljs-attr">memory:</span> <span class="hljs-string">1G</span>
        <span class="hljs-attr">reservations:</span>
          <span class="hljs-attr">cpus:</span> <span class="hljs-string">'1.00'</span>
          <span class="hljs-attr">memory:</span> <span class="hljs-string">1G</span>
    <span class="hljs-attr">ports:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"7777:8080"</span>
    <span class="hljs-attr">depends_on:</span>
      <span class="hljs-attr">imotor-algo:</span>
        <span class="hljs-attr">condition:</span> <span class="hljs-string">service_healthy</span>
<span class="hljs-attr">networks:</span>
  <span class="hljs-attr">mynetwork:</span>
    <span class="hljs-attr">driver:</span> <span class="hljs-string">bridge</span>
</code></pre>
<p>å‰ç«¯nginx é•œåƒå®¹å™¨é…ç½®ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">    location /api/ {                <span class="hljs-comment"># ä½¿ç”¨å˜é‡å¼ºåˆ¶æ¯æ¬¡è§£æ                proxy_pass http://imotor-ltq:7953/;                proxy_set_header Host $proxy_host;                proxy_set_header X-Real-IP $remote_addr;                proxy_set_header remote_addr $remote_addr;                proxy_http_version 1.1;                proxy_connect_timeout 4s;                proxy_read_timeout 600s;                proxy_send_timeout 12s;            }</span>
</code></pre>
<p>å½“åç«¯å¼€å‘æ–°åŠŸèƒ½å‘ç‰ˆåå¶ç°</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5a25db82b9124a9d9a56e8116e7b0c61~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbGl0b25ncWlhbg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770809454&amp;x-signature=XJ8fy6UaXRvU92xUqTyOTmWWaQ4%3D" alt="" loading="lazy"/></p>
<p>å‘ç°æœåŠ¡ä¸èƒ½ä½¿ç”¨äº†ï¼Œæ¯æ¬¡å‡ºç°è¿™ä¸ªé—®é¢˜æ—¶ éƒ½éœ€è¦é‡å¯å‰ç«¯é¡¹ç›®ï¼Œ</p>
<p>åé¢å¼€å§‹æ’æŸ¥ï¼šæŸ¥çœ‹docker ç½‘ç»œ</p>
<pre><code class="hljs language-bash" lang="bash">docker network <span class="hljs-built_in">ls</span>
docker network inspect &lt;network_name&gt;
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/474f691b3fe243f2a3e999cce8ec268f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbGl0b25ncWlhbg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770809454&amp;x-signature=Ihwr5itDu0fJrvHd892EnrrYwo4%3D" alt="" loading="lazy"/></p>
<p>å¤šæ¬¡é‡å¯åå‘ç°IPåœ°å€ä¼šå‘ç”Ÿå˜åŒ–ï¼ŒåŸºæœ¬å¯ä»¥ç¡®å®šæ˜¯ä½¿ç”¨æœåŠ¡åDNSè§£ææ—¶å­˜åœ¨ç¼“å­˜<br/>
ä½¿ç”¨çš„æ˜¯ä¹‹å‰çš„æœåŠ¡IPåœ°å€ï¼Œæ‰€ä»¥æ‰¾ä¸åˆ°</p>
<p>è¿›ä¸€æ­¥ç¡®å®šé—®é¢˜ï¼šä½¿ç”¨Â docker-compose exec å‰ç«¯åº”ç”¨ ping imotor-ltq<br/>
æœåŠ¡</p>
<p>è§£å†³æ–¹æ³•ï¼š</p>
<pre><code class="hljs language-perl" lang="perl">server { 
         <span class="hljs-keyword">listen</span>       <span class="hljs-number">8080</span>;<span class="hljs-comment"># è®¿é—®ç«¯å£ </span>
         server_name  localhost;
         resolver <span class="hljs-number">127.0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">11</span> valid=<span class="hljs-number">10</span>s;  <span class="hljs-comment"># Docker å†…ç½® DNS</span>
         location /api/ {
          set $algo_host imotor-algo;
          rewrite ^<span class="hljs-regexp">/api/</span>(.*)$ /$1 <span class="hljs-keyword">break</span>; <span class="hljs-regexp">//</span>ä½¿ç”¨rewriteé‡ç½®ä¸ºåç«¯éœ€è¦çš„åœ°å€
          proxy_pass http:<span class="hljs-regexp">//</span>$algo_host:<span class="hljs-number">8080</span>;
       }
    }
</code></pre>
<p>// æ·»åŠ Â resolver 127.0.0.11 valid=10s; # Docker å†…ç½® DNS<br/>
ä½¿ç”¨å˜é‡</p>
<p>Â set $algo_host imotor-algo;</p>
<p>rewrite ^/api/(.*)<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">/</mi></mrow><annotation encoding="application/x-tex"> /</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord">/</span></span></span></span></span>1 break;</p>
<p>proxy_pass http://$algo_host:8080;</p>
<p>ä¹‹å‰æƒ³çœç•¥Â  rewrite ^/api/(.*)<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">/</mi></mrow><annotation encoding="application/x-tex"> /</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord">/</span></span></span></span></span>1 break;ç›´æ¥åœ¨åé¢åŠ /</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">set</span> <span class="hljs-variable">$algo_host</span> imotor-algo;
proxy_pass http://<span class="hljs-variable">$algo_host</span>:8080/;
</code></pre>
<p>å‘ç°æ‰¾ä¸åˆ°æœåŠ¡åœ°å€ï¼Œä¸çŸ¥é“ä»€ä¹ˆåŸå› </p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Ant Design Token Lensï¼šè®© Ant Design Token åœ¨ VS Code ä¸­ã€Œå¯è§†åŒ–ã€ï¼Œæ‹’ç»æŠ½è±¡ï¼Œæ‰€è§å³æ‰€å¾—]]></title>    <link>https://juejin.cn/post/7602841282801909801</link>    <guid>https://juejin.cn/post/7602841282801909801</guid>    <pubDate>2026-02-04T11:37:42.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602841282801909801" data-draft-id="7602579671476011027" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Ant Design Token Lensï¼šè®© Ant Design Token åœ¨ VS Code ä¸­ã€Œå¯è§†åŒ–ã€ï¼Œæ‹’ç»æŠ½è±¡ï¼Œæ‰€è§å³æ‰€å¾—"/> <meta itemprop="keywords" content="Visual Studio Code,å‰ç«¯,React.js"/> <meta itemprop="datePublished" content="2026-02-04T11:37:42.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ™šé£äºˆæ˜Ÿ"/> <meta itemprop="url" content="https://juejin.cn/user/4344859055106215"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Ant Design Token Lensï¼šè®© Ant Design Token åœ¨ VS Code ä¸­ã€Œå¯è§†åŒ–ã€ï¼Œæ‹’ç»æŠ½è±¡ï¼Œæ‰€è§å³æ‰€å¾—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4344859055106215/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ™šé£äºˆæ˜Ÿ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T11:37:42.000Z" title="Wed Feb 04 2026 11:37:42 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¦‚æœä½ æ˜¯ä¸€åä½¿ç”¨ Ant Design (v5/v6) è¿›è¡Œå¼€å‘çš„å‰ç«¯å·¥ç¨‹å¸ˆï¼Œå°¤å…¶æ˜¯å½“ä½ ç»“åˆ <strong>Tailwind CSS</strong> æˆ–ç¼–å†™ <strong>CSS/Less/Sass</strong> æ ·å¼æ—¶ï¼Œä½ æ˜¯å¦é‡åˆ°è¿‡ä»¥ä¸‹ç—›ç‚¹ï¼š</p>
<ul>
<li><strong>Token æ˜¯æŠ½è±¡çš„</strong>ï¼šçœ‹åˆ° <code>var(--ant-color-primary)</code> æ—¶ï¼Œä¸çŸ¥é“æ˜¯ä»€ä¹ˆé¢œè‰²ã€‚</li>
<li><strong>ç›²äººæ‘¸è±¡</strong>ï¼šä¸ºäº†æ‰¾ä¸€ä¸ªåˆé€‚çš„ Tokenï¼Œä¸å¾—ä¸åœ¨ Ant Design å®˜ç½‘å’Œä»£ç ä¹‹é—´æ¥å›åˆ‡æ¢ã€‚</li>
<li><strong>Tailwind çš„å°´å°¬</strong>ï¼šæƒ³åœ¨ Tailwind ä¸­ä½¿ç”¨ Ant Design Tokenï¼Œç”¨ <code>${token.colorPrimary}</code> å´å‘ç°æ ·å¼ä¸ç”Ÿæ•ˆï¼Œåªèƒ½é€€åŒ–å›<strong>è¡Œå†…æ ·å¼</strong>ã€‚</li>
<li><strong>è®°å¿†è´Ÿæ‹…</strong>ï¼šToken æ•°é‡åºå¤§ï¼Œéœ€è¦è®°ä½ Token çš„åå­—å’Œä½œç”¨ã€‚</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/91d23fac58ce4ddeb510bde035477905~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pma6aOO5LqI5pif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770809861&amp;x-signature=rRAnVrGl2AnO7E5ZJ6dpzwrPlU0%3D" alt="example-1 (1).gif" loading="lazy"/></p>
<p><strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FlxKylin%2Fvscode-ext-antd-token-lens" target="_blank" title="https://github.com/lxKylin/vscode-ext-antd-token-lens" ref="nofollow noopener noreferrer">Ant Design Token Lens</a></strong> å°±æ˜¯ä¸ºäº†è§£å†³è¿™äº›ç—›ç‚¹è€Œç”Ÿçš„ VS Code æ’ä»¶ã€‚å®ƒçš„æ ¸å¿ƒç†å¿µæ˜¯è®© Ant Design CSS Token åœ¨ç¼–è¾‘å™¨ä¸­å˜å¾—<strong>å¯è§ã€å¯ç†è§£ã€å¯æ“ä½œ</strong>ã€‚</p>
<blockquote>
<p>ğŸ’¡ <strong>ä¸€å¥è¯æ¨è</strong>ï¼šå®ƒå°±åƒæ˜¯ç»™ä½ çš„ VS Code è£…ä¸Šäº†ä¸€å‰¯â€œAnt Design é€è§†é•œâ€ï¼Œè®©ä½ åœ¨å†™ä»£ç æ—¶èƒ½ç›´æ¥çœ‹åˆ° Token èƒŒåçš„çœŸå®é¢œè‰²å’Œå«ä¹‰ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-0">ä¸ºä»€ä¹ˆä¼šéœ€è¦è¿™ä¸ªæ’ä»¶</h2>
<p>Ant Design æä¾›äº† <code>useToken</code> å’Œ <code>getDesignToken</code> æ¥è·å– Design Tokenï¼Œä½†ä»…é™äº React è¿è¡Œæ—¶ç¯å¢ƒã€‚åœ¨ <code>.css</code>ã€<code>.less</code> ç­‰æ ·å¼æ–‡ä»¶ä¸­ï¼Œæˆ–è€…ç»“åˆ <code>Tailwind CSS</code> å¼€å‘æ—¶ï¼Œç›´æ¥ä½¿ç”¨è¿™äº› JS å˜é‡å¾€å¾€å­˜åœ¨é™åˆ¶ã€‚</p>
<p>ç‰¹åˆ«æ˜¯ Design Token åœ¨ <code>Tailwind CSS</code> ä¸­é€šå¸¸<strong>ä¸ç”Ÿæ•ˆ</strong>ï¼Œåªèƒ½é€€åŒ–ä¸º<strong>è¡Œå†…æ ·å¼</strong>ä½¿ç”¨ã€‚</p>
<p>ä½œä¸ºä¸€å <code>Tailwind CSS</code> ä½¿ç”¨è€…ï¼Œæˆ‘å¸Œæœ›èƒ½ç›´è§‚åœ°çœ‹åˆ° Token çš„å®é™…æ•ˆæœï¼Œè€Œä¸æ˜¯é¢å¯¹æŠ½è±¡çš„å˜é‡åã€‚ä¸ºäº†è§£å†³è¿™ä¸€ç—›ç‚¹ï¼Œè®© Token åœ¨ VS Code ä¸­çœŸå®â€œå¯è§â€ï¼Œæœ¬æ’ä»¶åº”è¿è€Œç”Ÿã€‚</p>
<p><strong>âŒ å¸¸è§çš„é”™è¯¯åšæ³•ï¼š</strong></p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// ğŸ˜­ Tailwind æ— æ³•è§£æåŠ¨æ€å˜é‡ï¼Œå¯¼è‡´æ ·å¼ä¸¢å¤±</span>
&lt;div className={<span class="hljs-string">`text-[<span class="hljs-subst">${token.colorPrimary}</span>]`</span>}&gt;<span class="hljs-title class_">Hello</span>&lt;/div&gt;
</code></pre>
<p>Tailwind æ˜¯åœ¨<strong>æ„å»ºæ—¶</strong>ï¼ˆBuild Timeï¼‰å·¥ä½œçš„ï¼Œå®ƒéœ€è¦æ‰«æé™æ€å­—ç¬¦ä¸²æ¥ç”Ÿæˆ CSSã€‚åŠ¨æ€çš„ JavaScript å˜é‡åœ¨æ„å»ºé˜¶æ®µæ˜¯æœªçŸ¥çš„ï¼Œå› æ­¤ Tailwind ä¼šç›´æ¥å¿½ç•¥å®ƒã€‚</p>
<p><strong>âœ… æœ€ä½³å®è·µï¼š</strong></p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// ğŸ˜ ä½¿ç”¨ CSS å˜é‡ï¼ŒTailwind å¯ä»¥ç›´æ¥è¯†åˆ«å¹¶ç”Ÿæˆå·¥å…·ç±»</span>
&lt;div className=<span class="hljs-string">"text-[var(--ant-color-primary)]"</span>&gt;<span class="hljs-title class_">Hello</span>&lt;/div&gt;
</code></pre>
<p>æ ¸å¿ƒåŒºåˆ«ï¼šé™æ€å­—ç¬¦ä¸² vs åŠ¨æ€æ’å€¼</p>
<h3 data-id="heading-1"><code>text-[var(--ant-color-primary)]</code> ä¸ºä»€ä¹ˆå¯è¡Œï¼Ÿ</h3>
<ul>
<li>æ„å»ºé˜¶æ®µï¼š<code>Tailwind</code> æ‰«æå™¨åœ¨æºç ä¸­çœ‹åˆ°äº† <code>text-[var(--ant-color-primary)]</code> è¿™ä¸ªå®Œæ•´çš„é™æ€å­—ç¬¦ä¸²ã€‚å®ƒä¸éœ€è¦æ‰§è¡Œ JSï¼Œå°±çŸ¥é“ä½ è¦ä¸€ä¸ªä»»æ„å€¼å·¥å…·ç±»ã€‚</li>
<li>ç”Ÿæˆ CSSï¼šå®ƒæå–ä¸­æ‹¬å·é‡Œçš„å†…å®¹ï¼Œç›´æ¥ç”Ÿæˆå¦‚ä¸‹ CSS è§„åˆ™ï¼š</li>
<li>è¿è¡Œé˜¶æ®µï¼šæµè§ˆå™¨è¯»å–è¿™è¡Œ CSSã€‚æ­¤æ—¶ Ant Design å·²ç»ï¼ˆé€šè¿‡ JSï¼‰æŠŠ <code>--ant-color-primary</code> æ³¨å…¥åˆ°äº† html æˆ– body æ ‡ç­¾ä¸Šï¼Œæµè§ˆå™¨æˆåŠŸè§£æäº†å˜é‡ï¼Œé¢œè‰²ç”Ÿæ•ˆã€‚</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3c4d496c4fc644469672baf297c66b5f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pma6aOO5LqI5pif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770809861&amp;x-signature=c%2BIXi5Eju%2FZwW4GBVpV5jYPjPEo%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-2"><code>text-[${token.colorPrimary}]</code> ä¸ºä»€ä¹ˆä¸å¯è¡Œï¼Ÿ</h3>
<ul>
<li>æ„å»ºé˜¶æ®µï¼š<code>Tailwind</code> æ‰«æå™¨çœ‹åˆ°çš„æ˜¯ <code>text-[${token.colorPrimary}]</code>ã€‚è¿™æ˜¯ä¸€ä¸ªåŒ…å«å˜é‡çš„æ¨¡æ¿å­—ç¬¦ä¸²ã€‚</li>
<li>æ— æ³•é¢„æµ‹ï¼š<code>Tailwind</code> åªè¿›è¡Œé™æ€æ–‡æœ¬åˆ†æï¼Œå®ƒä¸æ‰§è¡Œ <code>JavaScript</code>ã€‚å®ƒæ— æ³•é¢„çŸ¥ <code>token.colorPrimary</code> åˆ°åº•ä¼šå˜æˆ <code>#1677ff</code> è¿˜æ˜¯ <code>red</code>ã€‚</li>
<li>ç»“æœï¼šå› ä¸ºæ— æ³•ç¡®å®šç±»åï¼Œ<code>Tailwind</code> æ”¾å¼ƒç”Ÿæˆä»»ä½• CSSã€‚</li>
<li>è¿è¡Œé˜¶æ®µï¼šè™½ç„¶ React æŠŠç±»åæ¸²æŸ“æˆäº† <code>text-[#1677ff]</code>ï¼Œä½†å¯¹åº”çš„ CSS è§„åˆ™æ ¹æœ¬ä¸å­˜åœ¨ï¼Œæ‰€ä»¥é¢œè‰²ä¸ç”Ÿæ•ˆã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-3">æ ¸å¿ƒåŠŸèƒ½äº®ç‚¹</h2>
<h3 data-id="heading-4">1. é¢œè‰²å¯è§†åŒ–</h3>
<p>æ‹’ç»æŠ½è±¡ï¼Œæ‰€è§å³æ‰€å¾—ã€‚æ’ä»¶ä¼šè‡ªåŠ¨æ‰«æä½ ä»£ç ä¸­çš„ <code>var(--ant-*)</code> æ ¼å¼ Tokenï¼Œå¹¶ç›´æ¥åœ¨ä»£ç æ˜¾ç¤ºå¯¹åº”çš„é¢œè‰²è£…é¥°å™¨ã€‚</p>
<ul>
<li><strong>å®æ—¶åé¦ˆ</strong>ï¼šå½“ä½ ä¿®æ”¹ Token åæ—¶ï¼Œé¢œè‰²å—ç«‹å³æ›´æ–°ã€‚</li>
<li><strong>ä¸»é¢˜æ„ŸçŸ¥</strong>ï¼šæ”¯æŒè‡ªåŠ¨æ£€æµ‹æˆ–æ‰‹åŠ¨åˆ‡æ¢ Light/Dark ä¸»é¢˜ï¼ŒæŸ¥çœ‹ Token åœ¨ä¸åŒæ¨¡å¼ä¸‹çš„è¡¨ç°ã€‚</li>
<li><strong>å¤šè¯­è¨€æ”¯æŒ</strong>ï¼šå®Œç¾æ”¯æŒ <code>.css</code>, <code>.less</code>, <code>.scss</code>, <code>.ts</code>, <code>.tsx</code>, <code>.vue</code>, <code>.html</code>, <code>markdown</code> ç­‰æ–‡ä»¶ã€‚</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ca49cb3f7f954679a84c3ce9e828a0f0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pma6aOO5LqI5pif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770809861&amp;x-signature=piXytTnf%2B5dbHCCxEHEXGqrD4bI%3D" alt="example-2.png" loading="lazy"/></p>
<h3 data-id="heading-5">2. æ™ºèƒ½è‡ªåŠ¨è¡¥å…¨</h3>
<p>å¿˜è®° Token çš„å…·ä½“æ‹¼å†™ï¼Ÿæ²¡å…³ç³»ã€‚</p>
<ul>
<li><strong>æé€Ÿè§¦å‘</strong>ï¼šè¾“å…¥ <code>var(--</code> æˆ– <code>--ant</code> å³å¯å”¤èµ·è¡¥å…¨åˆ—è¡¨ã€‚</li>
<li><strong>å¯Œäº¤äº’åˆ—è¡¨</strong>ï¼šè¡¥å…¨åˆ—è¡¨ä¸­ä¸ä»…æœ‰ Token åç§°ï¼Œè¿˜ç›´æ¥å±•ç¤ºé¢œè‰²é¢„è§ˆã€ä¸­æ–‡æè¿°å’Œå½“å‰å€¼ã€‚</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b90d2b4ba15a43519391d36a42ba308b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pma6aOO5LqI5pif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770809861&amp;x-signature=TE808OejZQvAoixOeRNJbEpC%2BGs%3D" alt="example-4.png" loading="lazy"/></p>
<h3 data-id="heading-6">3. æ·±åº¦ä¿¡æ¯é€è§†</h3>
<p>é¼ æ ‡æ‚¬åœåœ¨ Token ä¸Šï¼Œä»¿ä½›æ‹¥æœ‰äº†é€è§†çœ¼ã€‚Hover æç¤ºæ¡†å°†ä¸ºä½ å±•ç¤ºï¼š</p>
<ul>
<li><strong>åŒä¸»é¢˜å¯¹æ¯”</strong>ï¼šåŒæ—¶åˆ—å‡ºè¯¥ Token åœ¨ Light å’Œ Dark æ¨¡å¼ä¸‹çš„è‰²å€¼ (HEX/RGB)ã€‚</li>
<li><strong>è¯­ä¹‰è¯´æ˜</strong>ï¼šæ˜¾ç¤ºå®˜æ–¹çš„ä¸­æ–‡è¯­ä¹‰æè¿°ï¼ˆå¦‚ï¼š<code>ColorError</code> - "é”™è¯¯è‰²"ï¼‰ã€‚</li>
<li><strong>ä¸€é”®æ“ä½œ</strong>ï¼šæ”¯æŒå¤åˆ¶ Token å€¼ã€æŸ¥æ‰¾å¼•ç”¨ç­‰å¿«æ·æ“ä½œã€‚</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fedceb507e144bf6bb7c2515c38476d1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pma6aOO5LqI5pif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770809861&amp;x-signature=x6CUPjA9oiTYD747KC3jVLKvIrc%3D" alt="example-3.png" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-7">å¿«é€Ÿå¼€å§‹</h2>
<ol>
<li>æ‰“å¼€ <strong>VS Code æ‰©å±•å¸‚åœº</strong>ã€‚</li>
<li>æœç´¢ <strong>"Ant Design Token Lens"</strong>ã€‚</li>
<li>ç‚¹å‡»å®‰è£…ã€‚</li>
</ol>
<p>æˆ–è€…ç›´æ¥è®¿é—®<a href="https://link.juejin.cn?target=https%3A%2F%2Fmarketplace.visualstudio.com%2Fitems%3FitemName%3DlxKylin.ant-design-token-lens" target="_blank" title="https://marketplace.visualstudio.com/items?itemName=lxKylin.ant-design-token-lens" ref="nofollow noopener noreferrer">Ant Design Token Lens</a>è¿›è¡Œå®‰è£…ã€‚</p>
<p>æ— éœ€ç¹çé…ç½®ï¼Œå®‰è£…å³ç”¨ã€‚</p>
<h2 data-id="heading-8">ç»“è¯­</h2>
<p>ä»ä»Šå¤©å¼€å§‹ï¼Œå‘Šåˆ«åœ¨æ–‡æ¡£å’Œç¼–è¾‘å™¨ä¹‹é—´åå¤æ¨ªè·³çš„æ—¥å­ã€‚è®© <strong>Ant Design Token Lens</strong> æˆä¸ºä½ å¼€å‘ Ant Design åº”ç”¨çš„å¾—åŠ›åŠ©æ‰‹ï¼Œä½“éªŒ<strong>ç²¾å‡†ã€ç›´è§‚ã€é«˜æ•ˆ</strong>çš„æ ·å¼å¼€å‘æµç¨‹ã€‚</p>
<ul>
<li>å¦‚å¯¹ä½ æœ‰æ‰€å¸®åŠ©ï¼Œæ¬¢è¿ç»™<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FlxKylin%2Fvscode-ext-antd-token-lens" target="_blank" title="https://github.com/lxKylin/vscode-ext-antd-token-lens" ref="nofollow noopener noreferrer">GitHubä»“åº“</a>ç‚¹ä¸€ä¸ªStarğŸŒŸå™¢ï¼</li>
<li>æˆ–è€…è¯´æœ‰ä»€ä¹ˆæ›´å¥½çš„æƒ³æ³•ï¼Œæ¬¢è¿æissue</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€AI ç¼–ç¨‹å®æˆ˜ã€‘ç¬¬ 10 ç¯‡ï¼šè®©åº”ç”¨æ›´å¥å£® - é”™è¯¯å¤„ç†ä¸è¾¹ç•Œæƒ…å†µ]]></title>    <link>https://juejin.cn/post/7602789520035872778</link>    <guid>https://juejin.cn/post/7602789520035872778</guid>    <pubDate>2026-02-04T11:38:48.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602789520035872778" data-draft-id="7602811649126121523" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€AI ç¼–ç¨‹å®æˆ˜ã€‘ç¬¬ 10 ç¯‡ï¼šè®©åº”ç”¨æ›´å¥å£® - é”™è¯¯å¤„ç†ä¸è¾¹ç•Œæƒ…å†µ"/> <meta itemprop="keywords" content="å‰ç«¯,AIç¼–ç¨‹,uni-app"/> <meta itemprop="datePublished" content="2026-02-04T11:38:48.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="HashTang"/> <meta itemprop="url" content="https://juejin.cn/user/1117561754756488"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€AI ç¼–ç¨‹å®æˆ˜ã€‘ç¬¬ 10 ç¯‡ï¼šè®©åº”ç”¨æ›´å¥å£® - é”™è¯¯å¤„ç†ä¸è¾¹ç•Œæƒ…å†µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1117561754756488/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    HashTang
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T11:38:48.000Z" title="Wed Feb 04 2026 11:38:48 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{position:relative;word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#333}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:30px;margin-bottom:5px}.markdown-body h2{font-size:24px;display:inline-block;font-weight:700;background:#ef7060;color:#fff;padding:6px 8px 0 0;border-top-right-radius:6px;margin-right:2px;box-shadow:6px 3px 0 0 rgba(239,112,96,.2)}.markdown-body h2:before{content:" ";display:inline-block;width:8px}.markdown-body h2:after{content:" ";position:absolute;display:block;width:calc(100% - 50px);border-bottom:3px solid #ef7060}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #3e3e3e;margin-top:32px;margin-bottom:32px;height:1px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(27,31,35,.05);color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:JetBranins Mono,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px;background-color:#fdfdfd}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#fdfdfd}.markdown-body a{text-decoration:none;font-weight:700;color:#ef7060;border-bottom:1px solid #ef7060}.markdown-body a:active,.markdown-body a:hover{color:#ef2d26}.markdown-body table tr td,.markdown-body table tr th{border:1px solid #ccc;padding:5px 10px}.markdown-body table{display:block!important;width:auto;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{background:#f0f0f0;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#f8f8f8}.markdown-body blockquote{margin-inline-start:0;margin-inline-end:0;border-left:3px solid #ef7060;background:#fff9f9;padding:1px 20px;margin-top:20px}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="vs2015">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#1e1e1e;color:#dcdcdc}.hljs-keyword,.hljs-link,.hljs-literal,.hljs-name,.hljs-symbol{color:#569cd6}.hljs-link{text-decoration:underline}.hljs-built_in,.hljs-type{color:#4ec9b0}.hljs-class,.hljs-number{color:#b8d7a3}.hljs-meta-string,.hljs-string{color:#d69d85}.hljs-regexp,.hljs-template-tag{color:#9a5334}.hljs-formula,.hljs-function,.hljs-params,.hljs-subst,.hljs-title{color:#dcdcdc}.hljs-comment,.hljs-quote{color:#57a64a;font-style:italic}.hljs-doctag{color:#608b4e}.hljs-meta,.hljs-meta-keyword,.hljs-tag{color:#9b9b9b}.hljs-template-variable,.hljs-variable{color:#bd63c5}.hljs-attr,.hljs-attribute,.hljs-builtin-name{color:#9cdcfe}.hljs-section{color:gold}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-bullet,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-id,.hljs-selector-pseudo,.hljs-selector-tag{color:#d7ba7d}.hljs-addition{background-color:#144212}.hljs-addition,.hljs-deletion{display:inline-block;width:100%}.hljs-deletion{background-color:#600}</style><blockquote>
<p>åŠŸèƒ½åšå®Œäº†ï¼Œä½†ç”¨æˆ·ä½“éªŒè¿˜å·®ä¸€æ­¥â€”â€”å½“ç½‘ç»œå‡ºé”™ã€æ¥å£è¶…æ—¶ã€æ•°æ®å¼‚å¸¸æ—¶ï¼Œåº”ç”¨ä¼šä¸ä¼šå´©æºƒï¼Ÿç”¨æˆ·èƒ½ä¸èƒ½çœ‹åˆ°å‹å¥½çš„æç¤ºï¼Ÿè¿™ç¯‡æ–‡ç« ä»¥<strong>å¿ƒåŠ¨æ‹èŠ</strong>å°ç¨‹åºä¸ºä¾‹ï¼Œå±•ç¤ºå¦‚ä½•å’Œ AI å¯¹è¯ï¼Œæ„å»º<strong>å¥å£®ã€å‹å¥½ã€å¯ç»´æŠ¤</strong>çš„é”™è¯¯å¤„ç†ä½“ç³»ã€‚</p>
<p><strong>ç³»åˆ—ä¸“æ </strong>ï¼š<a href="https://juejin.cn/column/7579556047783624756" target="_blank" title="https://juejin.cn/column/7579556047783624756">ã€AI ç¼–ç¨‹å®æˆ˜ã€‘ä¸“æ ç›®å½•</a></p>
<p><strong>æœ¬ç¯‡ä¸»é¢˜</strong>ï¼šè®©åº”ç”¨æ›´å¥å£® - é”™è¯¯å¤„ç†ä¸è¾¹ç•Œæƒ…å†µ</p>
<p><strong>å®æˆ˜é¡¹ç›®</strong>ï¼šå¿ƒåŠ¨æ‹èŠ - AI æ‹çˆ±èŠå¤©åŠ©æ‰‹</p>
</blockquote>
<h2 data-id="heading-0">ä¸€ã€å¼€ç¯‡ï¼šé”™è¯¯å¤„ç†çš„é‡è¦æ€§</h2>
<h3 data-id="heading-1">1.1 æ²¡æœ‰é”™è¯¯å¤„ç†çš„ä»£ç </h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// âŒ å±é™©ï¼šæ²¡æœ‰ä»»ä½•é”™è¯¯å¤„ç†</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleGenerate</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> chatService.<span class="hljs-title function_">generateReply</span>({ <span class="hljs-attr">text</span>: inputText.<span class="hljs-property">value</span> });
  replies.<span class="hljs-property">value</span> = response.<span class="hljs-property">data</span>.<span class="hljs-property">replies</span>;
};
</code></pre>
<p><strong>å¯èƒ½å‡ºç°çš„é—®é¢˜</strong>ï¼š</p>
<ul>
<li>ç½‘ç»œæ–­å¼€ â†’ åº”ç”¨ç™½å±</li>
<li>æ¥å£è¶…æ—¶ â†’ æ— ä»»ä½•åé¦ˆ</li>
<li>è¿”å›æ•°æ®ä¸ºç©º â†’ <code>Cannot read property 'replies' of undefined</code></li>
<li>ç”¨æˆ·ç‚¹å‡»å¤šæ¬¡ â†’ é‡å¤è¯·æ±‚</li>
</ul>
<h3 data-id="heading-2">1.2 å®Œå–„çš„é”™è¯¯å¤„ç†</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// âœ… å¥å£®ï¼šå®Œæ•´çš„é”™è¯¯å¤„ç†</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleGenerate</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">if</span> (loading.<span class="hljs-property">value</span>) <span class="hljs-keyword">return</span>;  <span class="hljs-comment">// é˜²é‡å¤ç‚¹å‡»</span>

  loading.<span class="hljs-property">value</span> = <span class="hljs-literal">true</span>;
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> chatService.<span class="hljs-title function_">generateReply</span>({ <span class="hljs-attr">text</span>: inputText.<span class="hljs-property">value</span> });

    <span class="hljs-keyword">if</span> (response.<span class="hljs-property">code</span> !== <span class="hljs-number">200</span>) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(response.<span class="hljs-property">msg</span> || <span class="hljs-string">'ç”Ÿæˆå¤±è´¥'</span>);
    }

    replies.<span class="hljs-property">value</span> = response.<span class="hljs-property">data</span>?.<span class="hljs-property">replies</span> ?? [];  <span class="hljs-comment">// ç©ºå€¼ä¿æŠ¤</span>
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-keyword">const</span> errMsg = error?.<span class="hljs-property">message</span> || <span class="hljs-string">'ç½‘ç»œé”™è¯¯ï¼Œè¯·ç¨åå†è¯•'</span>;
    toast.<span class="hljs-title function_">error</span>(errMsg);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'ç”Ÿæˆå›å¤å¤±è´¥:'</span>, error);
  } <span class="hljs-keyword">finally</span> {
    loading.<span class="hljs-property">value</span> = <span class="hljs-literal">false</span>;
  }
};
</code></pre>
<h3 data-id="heading-3">1.3 æœ¬æ–‡è¦è§£å†³çš„é—®é¢˜</h3>





























<table><thead><tr><th>é—®é¢˜</th><th>è§£å†³æ–¹æ¡ˆ</th></tr></thead><tbody><tr><td>ç½‘ç»œé”™è¯¯</td><td>ç»Ÿä¸€é”™è¯¯æç¤º + é‡è¯•æœºåˆ¶</td></tr><tr><td>æ¥å£é”™è¯¯ç </td><td>åˆ†ç±»å¤„ç†ï¼ˆ401/403/500ï¼‰</td></tr><tr><td>ç©ºå€¼å¼‚å¸¸</td><td>å¯é€‰é“¾ + ç©ºå€¼åˆå¹¶</td></tr><tr><td>é‡å¤ç‚¹å‡»</td><td>loading çŠ¶æ€é”å®š</td></tr><tr><td>ç”¨æˆ·å–æ¶ˆ</td><td>åŒºåˆ†å–æ¶ˆå’ŒçœŸæ­£çš„é”™è¯¯</td></tr></tbody></table>
<h2 data-id="heading-4">äºŒã€ç»Ÿä¸€é”™è¯¯æç¤ºï¼šToast å°è£…</h2>
<h3 data-id="heading-5">2.1 æˆ‘çš„éœ€æ±‚</h3>
<pre><code class="hljs language-txt" lang="txt">æˆ‘ï¼šé¡¹ç›®é‡Œå¾ˆå¤šåœ°æ–¹è¦æ˜¾ç¤ºæç¤ºï¼Œæœ‰æˆåŠŸã€å¤±è´¥ã€è­¦å‘Šç­‰ç±»å‹ã€‚
    æ¯æ¬¡éƒ½å†™ uni.showToast å¤ªç¹çï¼Œèƒ½ä¸èƒ½å°è£…ä¸€ä¸‹ï¼Ÿ
</code></pre>
<h3 data-id="heading-6">2.2 AI è®¾è®¡æ–¹æ¡ˆ</h3>
<pre><code class="hljs language-txt" lang="txt">AIï¼šå°è£…ä¸€ä¸ª toast å·¥å…·ï¼Œæä¾›é“¾å¼è°ƒç”¨ï¼š

ğŸ“ æ¥å£è®¾è®¡ï¼š

toast.success('æ“ä½œæˆåŠŸ')
toast.error('æ“ä½œå¤±è´¥')
toast.warning('è¯·æ³¨æ„')
toast.info('æç¤ºä¿¡æ¯')

ğŸ“ é…ç½®é€‰é¡¹ï¼š

interface ToastOptions {
  duration?: number;      // æ˜¾ç¤ºæ—¶é•¿ï¼Œé»˜è®¤ 2000ms
  position?: 'top' | 'middle' | 'bottom';  // ä½ç½®
  mask?: boolean;         // æ˜¯å¦æ˜¾ç¤ºé®ç½©é˜²æ­¢ç©¿é€
}
</code></pre>
<h3 data-id="heading-7">2.3 AI ç”Ÿæˆä»£ç </h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// src/utils/toast.ts</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">ToastType</span> = <span class="hljs-string">'success'</span> | <span class="hljs-string">'error'</span> | <span class="hljs-string">'warning'</span> | <span class="hljs-string">'info'</span>;

<span class="hljs-keyword">interface</span> <span class="hljs-title class_">ToastOptions</span> {
  <span class="hljs-keyword">type</span>?: <span class="hljs-title class_">ToastType</span>;
  duration?: <span class="hljs-built_in">number</span>;
  position?: <span class="hljs-string">'top'</span> | <span class="hljs-string">'middle'</span> | <span class="hljs-string">'bottom'</span>;
  <span class="hljs-attr">message</span>: <span class="hljs-built_in">string</span>;
  mask?: <span class="hljs-built_in">boolean</span>;
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">showToast</span>(<span class="hljs-params">message: <span class="hljs-built_in">string</span></span>): <span class="hljs-built_in">void</span>;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">showToast</span>(<span class="hljs-params">options: ToastOptions</span>): <span class="hljs-built_in">void</span>;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">showToast</span>(<span class="hljs-params">options: ToastOptions | <span class="hljs-built_in">string</span></span>): <span class="hljs-built_in">void</span> {
  <span class="hljs-keyword">const</span> <span class="hljs-attr">defaultOptions</span>: <span class="hljs-title class_">ToastOptions</span> = {
    <span class="hljs-attr">type</span>: <span class="hljs-string">'info'</span>,
    <span class="hljs-attr">duration</span>: <span class="hljs-number">2000</span>,
    <span class="hljs-attr">position</span>: <span class="hljs-string">'middle'</span>,
    <span class="hljs-attr">message</span>: <span class="hljs-string">''</span>,
    <span class="hljs-attr">mask</span>: <span class="hljs-literal">false</span>,
  };

  <span class="hljs-keyword">const</span> mergedOptions = <span class="hljs-keyword">typeof</span> options === <span class="hljs-string">'string'</span>
    ? { ...defaultOptions, <span class="hljs-attr">message</span>: options }
    : { ...defaultOptions, ...options };

  <span class="hljs-comment">// æ˜ å°„ position åˆ° UniApp æ”¯æŒçš„æ ¼å¼</span>
  <span class="hljs-keyword">const</span> positionMap = {
    <span class="hljs-attr">top</span>: <span class="hljs-string">'top'</span>,
    <span class="hljs-attr">middle</span>: <span class="hljs-string">'center'</span>,
    <span class="hljs-attr">bottom</span>: <span class="hljs-string">'bottom'</span>,
  };

  uni.<span class="hljs-title function_">showToast</span>({
    <span class="hljs-attr">title</span>: mergedOptions.<span class="hljs-property">message</span>,
    <span class="hljs-attr">duration</span>: mergedOptions.<span class="hljs-property">duration</span>,
    <span class="hljs-attr">position</span>: positionMap[mergedOptions.<span class="hljs-property">position</span> ?? <span class="hljs-string">'middle'</span>],
    <span class="hljs-attr">icon</span>: <span class="hljs-string">'none'</span>,
    <span class="hljs-attr">mask</span>: mergedOptions.<span class="hljs-property">mask</span>,
  });
}

<span class="hljs-comment">// ä¾¿æ·æ–¹æ³•</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">SimpleToastOptions</span> = <span class="hljs-title class_">Omit</span>&lt;<span class="hljs-title class_">ToastOptions</span>, <span class="hljs-string">'type'</span> | <span class="hljs-string">'message'</span>&gt;;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> toast = {
  <span class="hljs-attr">success</span>: <span class="hljs-function">(<span class="hljs-params">message: <span class="hljs-built_in">string</span>, options?: SimpleToastOptions</span>) =&gt;</span>
    <span class="hljs-title function_">showToast</span>({ ...options, <span class="hljs-attr">type</span>: <span class="hljs-string">'success'</span>, message }),
  <span class="hljs-attr">error</span>: <span class="hljs-function">(<span class="hljs-params">message: <span class="hljs-built_in">string</span>, options?: SimpleToastOptions</span>) =&gt;</span>
    <span class="hljs-title function_">showToast</span>({ ...options, <span class="hljs-attr">type</span>: <span class="hljs-string">'error'</span>, message }),
  <span class="hljs-attr">warning</span>: <span class="hljs-function">(<span class="hljs-params">message: <span class="hljs-built_in">string</span>, options?: SimpleToastOptions</span>) =&gt;</span>
    <span class="hljs-title function_">showToast</span>({ ...options, <span class="hljs-attr">type</span>: <span class="hljs-string">'warning'</span>, message }),
  <span class="hljs-attr">info</span>: <span class="hljs-function">(<span class="hljs-params">message: <span class="hljs-built_in">string</span>, options?: SimpleToastOptions</span>) =&gt;</span>
    <span class="hljs-title function_">showToast</span>({ ...options, <span class="hljs-attr">type</span>: <span class="hljs-string">'info'</span>, message }),
};
</code></pre>
<h3 data-id="heading-8">2.4 ä½¿ç”¨ç¤ºä¾‹</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { toast } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/utils/toast'</span>;

<span class="hljs-comment">// ç®€å•ç”¨æ³•</span>
toast.<span class="hljs-title function_">success</span>(<span class="hljs-string">'ä¿å­˜æˆåŠŸ'</span>);
toast.<span class="hljs-title function_">error</span>(<span class="hljs-string">'ç½‘ç»œé”™è¯¯ï¼Œè¯·ç¨åå†è¯•'</span>);

<span class="hljs-comment">// å¸¦é…ç½®</span>
toast.<span class="hljs-title function_">info</span>(<span class="hljs-string">'æ­£åœ¨å¤„ç†...'</span>, { <span class="hljs-attr">duration</span>: <span class="hljs-number">3000</span>, <span class="hljs-attr">mask</span>: <span class="hljs-literal">true</span> });
</code></pre>
<h2 data-id="heading-9">ä¸‰ã€æ¥å£é”™è¯¯åˆ†ç±»å¤„ç†</h2>
<h3 data-id="heading-10">3.1 æˆ‘çš„éœ€æ±‚</h3>
<pre><code class="hljs language-txt" lang="txt">æˆ‘ï¼šåç«¯è¿”å›ä¸åŒçš„é”™è¯¯ç ï¼š
    - 401ï¼šæœªç™»å½•æˆ– token è¿‡æœŸ
    - 403ï¼šæ²¡æœ‰æƒé™ï¼ˆå¦‚ VIP åŠŸèƒ½ï¼‰
    - 500ï¼šæœåŠ¡å™¨é”™è¯¯

    ä¸åŒé”™è¯¯ç è¦æœ‰ä¸åŒçš„å¤„ç†é€»è¾‘ã€‚
</code></pre>
<h3 data-id="heading-11">3.2 AI è®¾è®¡é”™è¯¯åˆ†ç±»</h3>
<pre><code class="hljs language-txt" lang="txt">AIï¼šåœ¨ HTTP å±‚ç»Ÿä¸€å¤„ç†å¸¸è§é”™è¯¯ç ï¼Œä¸šåŠ¡å±‚å¤„ç†ç‰¹æ®Šé”™è¯¯ï¼š

ğŸ“ é”™è¯¯åˆ†ç±»ï¼š

ã€HTTP å±‚å¤„ç†ã€‘ï¼ˆåœ¨ http.ts ä¸­ï¼‰
- 401 â†’ æ¸…é™¤ç™»å½•æ€ï¼Œè·³è½¬ç™»å½•
- ç½‘ç»œé”™è¯¯ â†’ æ˜¾ç¤º"ç½‘ç»œé”™è¯¯"æç¤º

ã€ä¸šåŠ¡å±‚å¤„ç†ã€‘ï¼ˆåœ¨é¡µé¢ä¸­ï¼‰
- 403 â†’ å¼•å¯¼å¼€é€š VIP
- ä¸šåŠ¡é”™è¯¯ â†’ æ˜¾ç¤ºå…·ä½“é”™è¯¯ä¿¡æ¯
</code></pre>
<h3 data-id="heading-12">3.3 HTTP å±‚é”™è¯¯å¤„ç†</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// src/http/http.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> http&lt;T&gt;(<span class="hljs-attr">options</span>: <span class="hljs-title class_">CustomRequestOptions</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">IResData</span>&lt;T&gt;&gt;(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
    uni.<span class="hljs-title function_">request</span>({
      ...options,
      <span class="hljs-title function_">success</span>(<span class="hljs-params">res</span>) {
        <span class="hljs-comment">// 2xx çŠ¶æ€ç è§†ä¸ºæˆåŠŸ</span>
        <span class="hljs-keyword">if</span> (res.<span class="hljs-property">statusCode</span> &gt;= <span class="hljs-number">200</span> &amp;&amp; res.<span class="hljs-property">statusCode</span> &lt; <span class="hljs-number">300</span>) {
          <span class="hljs-title function_">resolve</span>(res.<span class="hljs-property">data</span> <span class="hljs-keyword">as</span> <span class="hljs-title class_">IResData</span>&lt;T&gt;);
        }
        <span class="hljs-comment">// 401 æœªæˆæƒ</span>
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (res.<span class="hljs-property">statusCode</span> === <span class="hljs-number">401</span>) {
          <span class="hljs-comment">// æ¸…é™¤ç™»å½•æ€</span>
          uni.<span class="hljs-title function_">removeStorageSync</span>(<span class="hljs-string">'token'</span>);
          <span class="hljs-comment">// å¯ä»¥è§¦å‘å…¨å±€äº‹ä»¶æˆ–è·³è½¬ç™»å½•</span>
          <span class="hljs-title function_">reject</span>(res);
        }
        <span class="hljs-comment">// å…¶ä»–é”™è¯¯</span>
        <span class="hljs-keyword">else</span> {
          <span class="hljs-keyword">if</span> (!options.<span class="hljs-property">hideErrorToast</span>) {
            <span class="hljs-keyword">const</span> data = res.<span class="hljs-property">data</span> <span class="hljs-keyword">as</span> <span class="hljs-title class_">IResData</span>&lt;T&gt;;
            uni.<span class="hljs-title function_">showToast</span>({
              <span class="hljs-attr">icon</span>: <span class="hljs-string">'none'</span>,
              <span class="hljs-attr">title</span>: data.<span class="hljs-property">msg</span> || <span class="hljs-string">'è¯·æ±‚é”™è¯¯'</span>,
            });
          }
          <span class="hljs-title function_">reject</span>(res);
        }
      },
      <span class="hljs-comment">// ç½‘ç»œé”™è¯¯</span>
      <span class="hljs-title function_">fail</span>(<span class="hljs-params">err</span>) {
        uni.<span class="hljs-title function_">showToast</span>({
          <span class="hljs-attr">icon</span>: <span class="hljs-string">'none'</span>,
          <span class="hljs-attr">title</span>: <span class="hljs-string">'ç½‘ç»œé”™è¯¯ï¼Œæ¢ä¸ªç½‘ç»œè¯•è¯•'</span>,
        });
        <span class="hljs-title function_">reject</span>(err);
      },
    });
  });
}
</code></pre>
<h3 data-id="heading-13">3.4 ä¸šåŠ¡å±‚é”™è¯¯å¤„ç†</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// é¡µé¢ä¸­å¤„ç† 403 ç­‰ä¸šåŠ¡é”™è¯¯</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleGenerate</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
  loading.<span class="hljs-property">value</span> = <span class="hljs-literal">true</span>;

  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> chatService.<span class="hljs-title function_">generateReply</span>(params);

    <span class="hljs-keyword">if</span> (response.<span class="hljs-property">code</span> !== <span class="hljs-number">200</span>) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(response.<span class="hljs-property">msg</span> || <span class="hljs-string">'ç”Ÿæˆå¤±è´¥'</span>);
    }

    replies.<span class="hljs-property">value</span> = response.<span class="hljs-property">data</span>?.<span class="hljs-property">replies</span> ?? [];
  } <span class="hljs-keyword">catch</span> (<span class="hljs-attr">error</span>: <span class="hljs-built_in">any</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'ç”Ÿæˆå›å¤å¤±è´¥:'</span>, error);

    <span class="hljs-comment">// æå–é”™è¯¯ä¿¡æ¯</span>
    <span class="hljs-keyword">const</span> errMsg = error?.<span class="hljs-property">data</span>?.<span class="hljs-property">message</span>
      || error?.<span class="hljs-property">msg</span>
      || error?.<span class="hljs-property">message</span>
      || <span class="hljs-string">'ç”Ÿæˆå¤±è´¥ï¼Œè¯·ç¨åå†è¯•'</span>;

    <span class="hljs-comment">// æ ¹æ®çŠ¶æ€ç åˆ†ç±»å¤„ç†</span>
    <span class="hljs-keyword">const</span> statusCode = error?.<span class="hljs-property">statusCode</span> || error?.<span class="hljs-property">data</span>?.<span class="hljs-property">code</span> || error?.<span class="hljs-property">code</span>;

    <span class="hljs-keyword">if</span> (statusCode === <span class="hljs-number">403</span>) {
      <span class="hljs-comment">// æƒé™ä¸è¶³ï¼Œå¼•å¯¼å¼€é€š VIP</span>
      <span class="hljs-keyword">const</span> message = errMsg || <span class="hljs-string">'å…è´¹æ¬¡æ•°å·²ç”¨å®Œï¼Œè¯·å¼€é€šVIP'</span>;
      <span class="hljs-title function_">promptOpenVip</span>(message);
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-comment">// å…¶ä»–é”™è¯¯ï¼Œæ˜¾ç¤ºæç¤º</span>
      toast.<span class="hljs-title function_">error</span>(errMsg);
    }
  } <span class="hljs-keyword">finally</span> {
    loading.<span class="hljs-property">value</span> = <span class="hljs-literal">false</span>;
  }
};
</code></pre>
<h2 data-id="heading-14">å››ã€ç©ºå€¼ä¿æŠ¤ï¼šé˜²å¾¡æ€§ç¼–ç¨‹</h2>
<h3 data-id="heading-15">4.1 å¸¸è§çš„ç©ºå€¼é”™è¯¯</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// âŒ å±é™©ï¼šå¯èƒ½æŠ¥é”™</span>
<span class="hljs-keyword">const</span> username = response.<span class="hljs-property">data</span>.<span class="hljs-property">user</span>.<span class="hljs-property">username</span>;
<span class="hljs-comment">// å¦‚æœ response.data æ˜¯ undefinedï¼Œå°±ä¼šæŠ¥é”™</span>

<span class="hljs-keyword">const</span> firstReply = replies[<span class="hljs-number">0</span>].<span class="hljs-property">text</span>;
<span class="hljs-comment">// å¦‚æœ replies æ˜¯ç©ºæ•°ç»„ï¼Œå°±ä¼šæŠ¥é”™</span>
</code></pre>
<h3 data-id="heading-16">4.2 AI æ•™æˆ‘é˜²å¾¡æ€§ç¼–ç¨‹</h3>
<pre><code class="hljs language-txt" lang="txt">AIï¼šç”¨å¯é€‰é“¾ï¼ˆ?.ï¼‰å’Œç©ºå€¼åˆå¹¶ï¼ˆ??ï¼‰æ¥ä¿æŠ¤ï¼š

ğŸ“ é˜²å¾¡æ€§ç¼–ç¨‹è§„åˆ™ï¼š

1. è®¿é—®å¯¹è±¡å±æ€§ â†’ ç”¨ ?.
2. æä¾›é»˜è®¤å€¼ â†’ ç”¨ ??
3. æ•°ç»„è®¿é—® â†’ å…ˆæ£€æŸ¥é•¿åº¦æˆ–ç”¨ ?.[0]
</code></pre>
<h3 data-id="heading-17">4.3 å®è·µç¤ºä¾‹</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// âœ… å®‰å…¨ï¼šå¯é€‰é“¾ + ç©ºå€¼åˆå¹¶</span>
<span class="hljs-keyword">const</span> username = response?.<span class="hljs-property">data</span>?.<span class="hljs-property">user</span>?.<span class="hljs-property">username</span> ?? <span class="hljs-string">'æœªçŸ¥ç”¨æˆ·'</span>;

<span class="hljs-comment">// âœ… å®‰å…¨ï¼šæ•°ç»„ä¿æŠ¤</span>
<span class="hljs-keyword">const</span> replies = response.<span class="hljs-property">data</span>?.<span class="hljs-property">replies</span> ?? [];
<span class="hljs-keyword">const</span> firstReply = replies.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span> ? replies[<span class="hljs-number">0</span>].<span class="hljs-property">text</span> : <span class="hljs-string">''</span>;

<span class="hljs-comment">// âœ… å®‰å…¨ï¼šè§£æ„æ—¶æä¾›é»˜è®¤å€¼</span>
<span class="hljs-keyword">const</span> { data = {} } = response ?? {};
<span class="hljs-keyword">const</span> { replies = [], analysis = <span class="hljs-string">''</span> } = data;

<span class="hljs-comment">// âœ… å®‰å…¨ï¼šå‡½æ•°å‚æ•°é»˜è®¤å€¼</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">updateUserInfo</span> = (<span class="hljs-params">info: Partial&lt;UserInfo&gt; = {}</span>) =&gt; {
  <span class="hljs-comment">// info ä¸€å®šæ˜¯å¯¹è±¡ï¼Œä¸ä¼šæ˜¯ undefined</span>
};
</code></pre>
<h3 data-id="heading-18">4.4 å®é™…ä»£ç ä¸­çš„åº”ç”¨</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ç”Ÿæˆå›å¤çš„å®Œæ•´é”™è¯¯å¤„ç†</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleGenerate</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-comment">// ... è¯·æ±‚é€»è¾‘</span>

  <span class="hljs-keyword">const</span> data = response.<span class="hljs-property">data</span> ?? {};

  <span class="hljs-comment">// å®‰å…¨æå–åˆ†æç»“æœ</span>
  analysisResult.<span class="hljs-property">value</span> = data.<span class="hljs-property">analysis</span> || <span class="hljs-string">''</span>;

  <span class="hljs-comment">// å®‰å…¨æå–å›å¤åˆ—è¡¨ï¼Œå¹¶æ·»åŠ  id</span>
  <span class="hljs-keyword">const</span> repliesFromApi = <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(data.<span class="hljs-property">replies</span>)
    ? data.<span class="hljs-property">replies</span>.<span class="hljs-title function_">slice</span>(<span class="hljs-number">0</span>, <span class="hljs-variable constant_">MEMORY_REPLY_COUNT</span>)
    : [];

  replies.<span class="hljs-property">value</span> = repliesFromApi.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">r, idx</span>) =&gt;</span> ({
    ...r,
    <span class="hljs-attr">id</span>: r.<span class="hljs-property">id</span> ?? idx,  <span class="hljs-comment">// å¦‚æœæ²¡æœ‰ idï¼Œç”¨ç´¢å¼•ä»£æ›¿</span>
  }));

  <span class="hljs-comment">// å®‰å…¨æ›´æ–°é…é¢ä¿¡æ¯</span>
  userStore.<span class="hljs-title function_">updateFreeQuota</span>({
    <span class="hljs-attr">free_reply_total</span>: data.<span class="hljs-property">freeReplyTotal</span>,
    <span class="hljs-attr">free_reply_used</span>: data.<span class="hljs-property">freeReplyUsed</span>,
    <span class="hljs-attr">free_reply_remaining</span>: data.<span class="hljs-property">remainingTimes</span>,
    <span class="hljs-attr">vip_status</span>: data.<span class="hljs-property">isVip</span> ? <span class="hljs-string">'vip'</span> : <span class="hljs-string">'none'</span>,
    <span class="hljs-attr">vip_expire_time</span>: data.<span class="hljs-property">vipExpireTime</span> ?? <span class="hljs-literal">null</span>,
  });
};
</code></pre>
<h2 data-id="heading-19">äº”ã€ç”¨æˆ·å–æ¶ˆ vs çœŸæ­£çš„é”™è¯¯</h2>
<h3 data-id="heading-20">5.1 é—®é¢˜åœºæ™¯</h3>
<pre><code class="hljs language-txt" lang="txt">æˆ‘ï¼šç”¨æˆ·é€‰æ‹©å›¾ç‰‡æ—¶ç‚¹äº†"å–æ¶ˆ"ï¼Œä¼šè§¦å‘ fail å›è°ƒï¼Œ
    æ˜¾ç¤º"å›¾ç‰‡é€‰æ‹©å¤±è´¥"çš„é”™è¯¯æç¤ºã€‚
    ä½†è¿™ä¸æ˜¯çœŸæ­£çš„é”™è¯¯ï¼Œä¸åº”è¯¥æç¤ºã€‚
</code></pre>
<h3 data-id="heading-21">5.2 AI åˆ†æåŒºåˆ†æ–¹æ³•</h3>
<pre><code class="hljs language-txt" lang="txt">AIï¼šé€šè¿‡é”™è¯¯ä¿¡æ¯æ¥åŒºåˆ†ç”¨æˆ·å–æ¶ˆå’ŒçœŸæ­£çš„é”™è¯¯ï¼š

ğŸ“Š é”™è¯¯ä¿¡æ¯åˆ†æï¼š

ã€ç”¨æˆ·å–æ¶ˆã€‘
- chooseMedia:fail cancel
- chooseImage:fail cancel
- chooseImage:failï¼ˆcode: 0ï¼‰

ã€çœŸæ­£çš„é”™è¯¯ã€‘
- chooseImage:fail no permission
- chooseMedia:fail system error
- å…¶ä»–é”™è¯¯ä¿¡æ¯
</code></pre>
<h3 data-id="heading-22">5.3 å®ç°ä»£ç </h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">addImages</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> { run } = <span class="hljs-title function_">useUpload</span>(<span class="hljs-string">''</span>, {}, {
    <span class="hljs-attr">count</span>: remainingCount,
    <span class="hljs-attr">selectOnly</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">onSelect</span>: <span class="hljs-function">(<span class="hljs-params">images</span>) =&gt;</span> {
      <span class="hljs-comment">// æ­£å¸¸å¤„ç†é€‰ä¸­çš„å›¾ç‰‡</span>
      images.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">img</span>) =&gt;</span> <span class="hljs-title function_">uploadChosenImage</span>(img));
    },
    <span class="hljs-attr">onError</span>: <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
      <span class="hljs-comment">// åˆ¤æ–­æ˜¯å¦ä¸ºç”¨æˆ·ä¸»åŠ¨å–æ¶ˆ</span>
      <span class="hljs-keyword">const</span> errMsg = <span class="hljs-keyword">typeof</span> err === <span class="hljs-string">'object'</span> &amp;&amp; err !== <span class="hljs-literal">null</span> &amp;&amp; <span class="hljs-string">'errMsg'</span> <span class="hljs-keyword">in</span> err
        ? (err <span class="hljs-keyword">as</span> <span class="hljs-built_in">any</span>).<span class="hljs-property">errMsg</span>
        : <span class="hljs-string">''</span>;
      <span class="hljs-keyword">const</span> errCode = <span class="hljs-keyword">typeof</span> err === <span class="hljs-string">'object'</span> &amp;&amp; err !== <span class="hljs-literal">null</span> &amp;&amp; <span class="hljs-string">'code'</span> <span class="hljs-keyword">in</span> err
        ? (err <span class="hljs-keyword">as</span> <span class="hljs-built_in">any</span>).<span class="hljs-property">code</span>
        : -<span class="hljs-number">1</span>;

      <span class="hljs-keyword">const</span> isUserCancel =
        errMsg === <span class="hljs-string">'chooseMedia:fail cancel'</span> ||
        errMsg === <span class="hljs-string">'chooseImage:fail cancel'</span> ||
        (errMsg === <span class="hljs-string">'chooseImage:fail'</span> &amp;&amp; errCode === <span class="hljs-number">0</span>);

      <span class="hljs-keyword">if</span> (!isUserCancel) {
        <span class="hljs-comment">// åªæœ‰çœŸæ­£çš„é”™è¯¯æ‰æç¤º</span>
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'å›¾ç‰‡é€‰æ‹©å¤±è´¥:'</span>, err);
        toast.<span class="hljs-title function_">error</span>(<span class="hljs-string">'å›¾ç‰‡é€‰æ‹©å¤±è´¥'</span>);
      }
      <span class="hljs-comment">// ç”¨æˆ·å–æ¶ˆæ—¶é™é»˜å¤„ç†ï¼Œä¸æ˜¾ç¤ºä»»ä½•æç¤º</span>
    },
  });

  <span class="hljs-title function_">run</span>();
};
</code></pre>
<h2 data-id="heading-23">å…­ã€Promise å°è£…ï¼šç»Ÿä¸€å›è°ƒé£æ ¼</h2>
<h3 data-id="heading-24">6.1 æˆ‘çš„éœ€æ±‚</h3>
<pre><code class="hljs language-txt" lang="txt">æˆ‘ï¼šuni.login ç­‰ API ç”¨çš„æ˜¯å›è°ƒé£æ ¼ï¼Œå†™èµ·æ¥å¾ˆç¹çã€‚
    èƒ½ä¸èƒ½å°è£…æˆ Promise é£æ ¼ï¼Ÿ
</code></pre>
<h3 data-id="heading-25">6.2 AI å°è£…ç¤ºä¾‹</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// src/utils/wechat.ts</span>
<span class="hljs-comment">/**
 * è·å–å¾®ä¿¡ç™»å½•å‡­è¯
 * å°†å›è°ƒé£æ ¼å°è£…æˆ Promise
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">requestWechatLoginCode</span> = (<span class="hljs-params"/>) =&gt;
  <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">string</span>&gt;(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
    uni.<span class="hljs-title function_">login</span>({
      <span class="hljs-attr">provider</span>: <span class="hljs-string">'weixin'</span>,
      <span class="hljs-attr">onlyAuthorize</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">success</span>: <span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> {
        <span class="hljs-keyword">if</span> (res?.<span class="hljs-property">code</span>) {
          <span class="hljs-title function_">resolve</span>(res.<span class="hljs-property">code</span>);
        } <span class="hljs-keyword">else</span> {
          <span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'æœªè·å–åˆ°æœ‰æ•ˆçš„ç™»å½•å‡­è¯'</span>));
        }
      },
      <span class="hljs-attr">fail</span>: <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
        <span class="hljs-title function_">reject</span>(err);
      },
    });
  });

<span class="hljs-comment">// ä½¿ç”¨æ—¶</span>
<span class="hljs-keyword">try</span> {
  <span class="hljs-keyword">const</span> code = <span class="hljs-keyword">await</span> <span class="hljs-title function_">requestWechatLoginCode</span>();
  <span class="hljs-keyword">await</span> userStore.<span class="hljs-title function_">wechatLogin</span>(code);
} <span class="hljs-keyword">catch</span> (error) {
  toast.<span class="hljs-title function_">error</span>(<span class="hljs-string">'ç™»å½•å¤±è´¥'</span>);
}
</code></pre>
<h3 data-id="heading-26">6.3 å‰ªè´´æ¿å°è£…</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// src/utils/clipboard.ts</span>
<span class="hljs-keyword">import</span> { isApp } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/utils/platform'</span>;

<span class="hljs-keyword">declare</span> <span class="hljs-keyword">const</span> <span class="hljs-attr">plus</span>: <span class="hljs-built_in">any</span>;

<span class="hljs-comment">/**
 * è·¨å¹³å°å¤åˆ¶æ–‡æœ¬åˆ°å‰ªè´´æ¿
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">copyText</span>(<span class="hljs-params">text: <span class="hljs-built_in">string</span></span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt; {
  <span class="hljs-comment">// App ç«¯ä½¿ç”¨ plus API</span>
  <span class="hljs-keyword">if</span> (isApp &amp;&amp; <span class="hljs-keyword">typeof</span> plus !== <span class="hljs-string">'undefined'</span> &amp;&amp; plus?.<span class="hljs-property">navigator</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
      <span class="hljs-keyword">try</span> {
        plus.<span class="hljs-property">navigator</span>.<span class="hljs-title function_">setClipboard</span>(text);
        <span class="hljs-title function_">resolve</span>();
      } <span class="hljs-keyword">catch</span> (error) {
        <span class="hljs-title function_">reject</span>(error);
      }
    });
  }

  <span class="hljs-comment">// å°ç¨‹åº/H5 ä½¿ç”¨ uni API</span>
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
    uni.<span class="hljs-title function_">setClipboardData</span>({
      <span class="hljs-attr">data</span>: text,
      <span class="hljs-attr">success</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">resolve</span>(),
      <span class="hljs-attr">fail</span>: <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> <span class="hljs-title function_">reject</span>(err),
    });
  });
}

<span class="hljs-comment">// ä½¿ç”¨æ—¶</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleCopy</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">text: <span class="hljs-built_in">string</span></span>) =&gt; {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">copyText</span>(text);
    toast.<span class="hljs-title function_">success</span>(<span class="hljs-string">'å·²å¤åˆ¶'</span>);
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'å¤åˆ¶å¤±è´¥:'</span>, error);
    toast.<span class="hljs-title function_">error</span>(<span class="hljs-string">'å¤åˆ¶å¤±è´¥ï¼Œè¯·ç¨åå†è¯•'</span>);
  }
};
</code></pre>
<h2 data-id="heading-27">ä¸ƒã€Loading çŠ¶æ€ç®¡ç†</h2>
<h3 data-id="heading-28">7.1 é˜²æ­¢é‡å¤ç‚¹å‡»</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> loading = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">false</span>);

<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleSubmit</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-comment">// é˜²æ­¢é‡å¤ç‚¹å‡»</span>
  <span class="hljs-keyword">if</span> (loading.<span class="hljs-property">value</span>) <span class="hljs-keyword">return</span>;

  loading.<span class="hljs-property">value</span> = <span class="hljs-literal">true</span>;
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">doSubmit</span>();
  } <span class="hljs-keyword">finally</span> {
    loading.<span class="hljs-property">value</span> = <span class="hljs-literal">false</span>;
  }
};
</code></pre>
<h3 data-id="heading-29">7.2 æŒ‰é’®çŠ¶æ€è”åŠ¨</h3>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;XButton
    :text="loading ? 'å¤„ç†ä¸­...' : 'æäº¤'"
    :loading="loading"
    :disabled="loading || !canSubmit"
    @click="handleSubmit"
  /&gt;
&lt;/template&gt;
</code></pre>
<h3 data-id="heading-30">7.3 å¤šä¸ª Loading çŠ¶æ€</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// é¡µé¢æœ‰å¤šä¸ªç‹¬ç«‹çš„åŠ è½½çŠ¶æ€</span>
<span class="hljs-keyword">const</span> isGenerating = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">false</span>);      <span class="hljs-comment">// ç”Ÿæˆå›å¤</span>
<span class="hljs-keyword">const</span> isUploadingImages = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">false</span>); <span class="hljs-comment">// ä¸Šä¼ å›¾ç‰‡</span>
<span class="hljs-keyword">const</span> isSaving = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">false</span>);          <span class="hljs-comment">// ä¿å­˜æ•°æ®</span>

<span class="hljs-comment">// è®¡ç®—æ€»ä½“åŠ è½½çŠ¶æ€</span>
<span class="hljs-keyword">const</span> isLoading = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span>
  isGenerating.<span class="hljs-property">value</span> || isUploadingImages.<span class="hljs-property">value</span> || isSaving.<span class="hljs-property">value</span>
);

<span class="hljs-comment">// ç»†ç²’åº¦æ§åˆ¶æŒ‰é’®çŠ¶æ€</span>
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">XButton</span>
  <span class="hljs-attr">:disabled</span>=<span class="hljs-string">"isGenerating || isUploadingImages"</span>
  @<span class="hljs-attr">click</span>=<span class="hljs-string">"handleGenerate"</span>
/&gt;</span></span>
</code></pre>
<h2 data-id="heading-31">å…«ã€é”™è¯¯å¤„ç†æœ€ä½³å®è·µ</h2>
<h3 data-id="heading-32">8.1 é”™è¯¯å¤„ç†æ¸…å•</h3>

























<table><thead><tr><th>å±‚çº§</th><th>å¤„ç†å†…å®¹</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td>HTTP å±‚</td><td>ç½‘ç»œé”™è¯¯ã€401</td><td>http.ts ç»Ÿä¸€å¤„ç†</td></tr><tr><td>ä¸šåŠ¡å±‚</td><td>403ã€ä¸šåŠ¡é”™è¯¯ç </td><td>é¡µé¢ catch å—å¤„ç†</td></tr><tr><td>UI å±‚</td><td>ç”¨æˆ·æç¤ºã€çŠ¶æ€æ¢å¤</td><td>toast + loading</td></tr></tbody></table>
<h3 data-id="heading-33">8.2 ä»£ç æ¨¡æ¿</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// æ ‡å‡†çš„å¼‚æ­¥æ“ä½œæ¨¡æ¿</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleAsyncAction</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-comment">// 1. é˜²é‡å¤</span>
  <span class="hljs-keyword">if</span> (loading.<span class="hljs-property">value</span>) <span class="hljs-keyword">return</span>;

  <span class="hljs-comment">// 2. å‰ç½®æ ¡éªŒ</span>
  <span class="hljs-keyword">if</span> (!canSubmit.<span class="hljs-property">value</span>) {
    toast.<span class="hljs-title function_">warning</span>(<span class="hljs-string">'è¯·å¡«å†™å®Œæ•´ä¿¡æ¯'</span>);
    <span class="hljs-keyword">return</span>;
  }

  loading.<span class="hljs-property">value</span> = <span class="hljs-literal">true</span>;

  <span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// 3. æ‰§è¡Œæ“ä½œ</span>
    <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">doAction</span>();

    <span class="hljs-comment">// 4. æ ¡éªŒå“åº”</span>
    <span class="hljs-keyword">if</span> (response.<span class="hljs-property">code</span> !== <span class="hljs-number">200</span>) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(response.<span class="hljs-property">msg</span> || <span class="hljs-string">'æ“ä½œå¤±è´¥'</span>);
    }

    <span class="hljs-comment">// 5. å¤„ç†æˆåŠŸ</span>
    <span class="hljs-keyword">const</span> data = response.<span class="hljs-property">data</span> ?? {};
    <span class="hljs-title function_">processData</span>(data);
    toast.<span class="hljs-title function_">success</span>(<span class="hljs-string">'æ“ä½œæˆåŠŸ'</span>);

  } <span class="hljs-keyword">catch</span> (<span class="hljs-attr">error</span>: <span class="hljs-built_in">any</span>) {
    <span class="hljs-comment">// 6. åˆ†ç±»å¤„ç†é”™è¯¯</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'æ“ä½œå¤±è´¥:'</span>, error);

    <span class="hljs-keyword">const</span> statusCode = error?.<span class="hljs-property">statusCode</span> || error?.<span class="hljs-property">code</span>;
    <span class="hljs-keyword">const</span> errMsg = error?.<span class="hljs-property">msg</span> || error?.<span class="hljs-property">message</span> || <span class="hljs-string">'æ“ä½œå¤±è´¥'</span>;

    <span class="hljs-keyword">if</span> (statusCode === <span class="hljs-number">403</span>) {
      <span class="hljs-title function_">handleNoPermission</span>();
    } <span class="hljs-keyword">else</span> {
      toast.<span class="hljs-title function_">error</span>(errMsg);
    }

  } <span class="hljs-keyword">finally</span> {
    <span class="hljs-comment">// 7. æ¢å¤çŠ¶æ€</span>
    loading.<span class="hljs-property">value</span> = <span class="hljs-literal">false</span>;
  }
};
</code></pre>
<h3 data-id="heading-34">8.3 æ€»ç»“</h3>








































<table><thead><tr><th>æŠ€æœ¯</th><th>ç”¨é€”</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td>try-catch-finally</td><td>æ•è·å’Œæ¢å¤</td><td>å¼‚æ­¥æ“ä½œçš„æ ‡å‡†æ¨¡å¼</td></tr><tr><td>å¯é€‰é“¾ <code>?.</code></td><td>å®‰å…¨è®¿é—®å±æ€§</td><td><code>response?.data?.user</code></td></tr><tr><td>ç©ºå€¼åˆå¹¶ <code>??</code></td><td>æä¾›é»˜è®¤å€¼</td><td><code>value ?? defaultValue</code></td></tr><tr><td>Promise å°è£…</td><td>ç»Ÿä¸€å›è°ƒé£æ ¼</td><td><code>requestWechatLoginCode()</code></td></tr><tr><td>é”™è¯¯åˆ†ç±»</td><td>å·®å¼‚åŒ–å¤„ç†</td><td>401/403/500 ä¸åŒå¤„ç†</td></tr><tr><td>Loading çŠ¶æ€</td><td>é˜²é‡å¤ + ç”¨æˆ·åé¦ˆ</td><td><code>if (loading) return</code></td></tr></tbody></table>
<hr/>
<blockquote>
<p>é”™è¯¯å¤„ç†ä¸æ˜¯"äº‹åè¡¥æ•‘"ï¼Œè€Œæ˜¯<strong>è®¾è®¡é˜¶æ®µå°±è¦è€ƒè™‘çš„æ¶æ„é—®é¢˜</strong>ã€‚</p>
<p>å¥½çš„é”™è¯¯å¤„ç†è®©ç”¨æˆ·æ„Ÿå—åˆ°åº”ç”¨çš„ä¸“ä¸šå’Œå¯é ã€‚</p>
<p>å¦‚æœè¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç‚¹èµã€æ”¶è—ã€è½¬å‘ï¼</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Hibernateï¼ˆ83ï¼‰å¦‚ä½•åœ¨æ•°æ®å¤‡ä»½å’Œæ¢å¤ä¸­ä½¿ç”¨Hibernateï¼Ÿ]]></title>    <link>https://juejin.cn/post/7602841282802008105</link>    <guid>https://juejin.cn/post/7602841282802008105</guid>    <pubDate>2026-02-04T11:57:40.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602841282802008105" data-draft-id="7602776926327963702" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Hibernateï¼ˆ83ï¼‰å¦‚ä½•åœ¨æ•°æ®å¤‡ä»½å’Œæ¢å¤ä¸­ä½¿ç”¨Hibernateï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-02-04T11:57:40.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Victor356"/> <meta itemprop="url" content="https://juejin.cn/user/3492507879476878"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Hibernateï¼ˆ83ï¼‰å¦‚ä½•åœ¨æ•°æ®å¤‡ä»½å’Œæ¢å¤ä¸­ä½¿ç”¨Hibernateï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3492507879476878/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Victor356
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T11:57:40.000Z" title="Wed Feb 04 2026 11:57:40 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨æ•°æ®å¤‡ä»½å’Œæ¢å¤è¿‡ç¨‹ä¸­ä½¿ç”¨Hibernateï¼Œå¯ä»¥å¸®åŠ©ä½ å°†æ•°æ®åº“ä¸­çš„æ•°æ®å¤‡ä»½åˆ°æ–‡ä»¶ä¸­ï¼Œå¹¶åœ¨éœ€è¦æ—¶ä»æ–‡ä»¶ä¸­æ¢å¤æ•°æ®ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªè¯¦ç»†çš„ç¤ºä¾‹ï¼Œç»“åˆä»£ç æ¼”ç¤ºå¦‚ä½•åœ¨æ•°æ®å¤‡ä»½å’Œæ¢å¤è¿‡ç¨‹ä¸­ä½¿ç”¨Hibernateã€‚</p>
<h3 data-id="heading-0">1. è®¾ç½®Hibernateé…ç½®</h3>
<p>åˆ›å»ºä¸€ä¸ªHibernateé…ç½®æ–‡ä»¶<code>hibernate.cfg.xml</code>ï¼Œç”¨äºè¿æ¥æ•°æ®åº“ã€‚</p>
<h4 data-id="heading-1"><code>hibernate.cfg.xml</code></h4>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"utf-8"</span>?&gt;</span>
<span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">hibernate-configuration</span> <span class="hljs-keyword">PUBLIC</span> <span class="hljs-string">"-//Hibernate/Hibernate Configuration DTD 3.0//EN"</span> <span class="hljs-string">"http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">hibernate-configuration</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">session-factory</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.driver_class"</span>&gt;</span>com.mysql.cj.jdbc.Driver<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.url"</span>&gt;</span>jdbc:mysql://localhost:3306/backup_restore_db<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.username"</span>&gt;</span>db_user<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.password"</span>&gt;</span>db_password<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.dialect"</span>&gt;</span>org.hibernate.dialect.MySQLDialect<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.hbm2ddl.auto"</span>&gt;</span>update<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.show_sql"</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">session-factory</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">hibernate-configuration</span>&gt;</span>
</code></pre>
<h3 data-id="heading-2">2. åˆ›å»ºå®ä½“ç±»</h3>
<p>å®šä¹‰ä¸€ä¸ªç®€å•çš„å®ä½“ç±»æ¥è¡¨ç¤ºæ•°æ®åº“è¡¨ä¸­çš„æ•°æ®ã€‚</p>
<h4 data-id="heading-3"><code>User.java</code></h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> javax.persistence.*;

<span class="hljs-meta">@Entity</span>
<span class="hljs-meta">@Table(name = "users")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span> {
    <span class="hljs-meta">@Id</span>
    <span class="hljs-meta">@GeneratedValue(strategy = GenerationType.IDENTITY)</span>
    <span class="hljs-keyword">private</span> Long id;
    <span class="hljs-keyword">private</span> String name;
    <span class="hljs-keyword">private</span> String email;

    <span class="hljs-comment">// Getters and setters</span>
}
</code></pre>
<h3 data-id="heading-4">3. ç¼–å†™æ•°æ®å¤‡ä»½å’Œæ¢å¤æµç¨‹</h3>
<p>ç¼–å†™ä»£ç æ¥å®ç°æ•°æ®å¤‡ä»½åˆ°æ–‡ä»¶å’Œä»æ–‡ä»¶æ¢å¤æ•°æ®çš„åŠŸèƒ½ã€‚</p>
<h4 data-id="heading-5"><code>DataBackupRestore.java</code></h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.hibernate.Session;
<span class="hljs-keyword">import</span> org.hibernate.SessionFactory;
<span class="hljs-keyword">import</span> org.hibernate.Transaction;
<span class="hljs-keyword">import</span> org.hibernate.cfg.Configuration;
<span class="hljs-keyword">import</span> com.fasterxml.jackson.databind.ObjectMapper;
<span class="hljs-keyword">import</span> com.fasterxml.jackson.databind.SerializationFeature;
<span class="hljs-keyword">import</span> com.fasterxml.jackson.databind.type.CollectionType;

<span class="hljs-keyword">import</span> java.io.File;
<span class="hljs-keyword">import</span> java.io.IOException;
<span class="hljs-keyword">import</span> java.util.List;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DataBackupRestore</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">BACKUP_FILE_PATH</span> <span class="hljs-operator">=</span> <span class="hljs-string">"backup.json"</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">ObjectMapper</span> <span class="hljs-variable">objectMapper</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ObjectMapper</span>().enable(SerializationFeature.INDENT_OUTPUT);

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// Configure Hibernate</span>
        <span class="hljs-type">Configuration</span> <span class="hljs-variable">config</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Configuration</span>().configure(<span class="hljs-string">"hibernate.cfg.xml"</span>);
        <span class="hljs-type">SessionFactory</span> <span class="hljs-variable">sessionFactory</span> <span class="hljs-operator">=</span> config.buildSessionFactory();

        <span class="hljs-comment">// Backup data</span>
        backupData(sessionFactory);

        <span class="hljs-comment">// Restore data</span>
        restoreData(sessionFactory);

        sessionFactory.close();
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">backupData</span><span class="hljs-params">(SessionFactory sessionFactory)</span> {
        <span class="hljs-type">Session</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> sessionFactory.openSession();
        <span class="hljs-type">Transaction</span> <span class="hljs-variable">transaction</span> <span class="hljs-operator">=</span> session.beginTransaction();
        
        List&lt;User&gt; users = session.createQuery(<span class="hljs-string">"FROM User"</span>, User.class).list();
        transaction.commit();
        session.close();

        <span class="hljs-keyword">try</span> {
            objectMapper.writeValue(<span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(BACKUP_FILE_PATH), users);
            System.out.println(<span class="hljs-string">"Data backup completed successfully."</span>);
        } <span class="hljs-keyword">catch</span> (IOException e) {
            System.err.println(<span class="hljs-string">"Failed to backup data: "</span> + e.getMessage());
        }
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">restoreData</span><span class="hljs-params">(SessionFactory sessionFactory)</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-type">CollectionType</span> <span class="hljs-variable">javaType</span> <span class="hljs-operator">=</span> objectMapper.getTypeFactory().constructCollectionType(List.class, User.class);
            List&lt;User&gt; users = objectMapper.readValue(<span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(BACKUP_FILE_PATH), javaType);

            <span class="hljs-type">Session</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> sessionFactory.openSession();
            <span class="hljs-type">Transaction</span> <span class="hljs-variable">transaction</span> <span class="hljs-operator">=</span> session.beginTransaction();
            
            <span class="hljs-keyword">for</span> (User user : users) {
                session.saveOrUpdate(user);
            }
            transaction.commit();
            session.close();

            System.out.println(<span class="hljs-string">"Data restore completed successfully."</span>);
        } <span class="hljs-keyword">catch</span> (IOException e) {
            System.err.println(<span class="hljs-string">"Failed to restore data: "</span> + e.getMessage());
        }
    }
}
</code></pre>
<h3 data-id="heading-6">4. ç¼–å†™ä¸»ç±»</h3>
<p>ç¼–å†™ä¸»ç±»æ¥è¿è¡Œæ•°æ®å¤‡ä»½å’Œæ¢å¤æµç¨‹ã€‚</p>
<h4 data-id="heading-7"><code>Main.java</code></h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        DataBackupRestore.main(args);
    }
}
</code></pre>
<h3 data-id="heading-8">è¿è¡Œæ•°æ®å¤‡ä»½å’Œæ¢å¤æµç¨‹</h3>
<p>ç¼–è¯‘å¹¶è¿è¡Œä¸Šé¢çš„Javaä»£ç ï¼Œå®ƒå°†ä»æ•°æ®åº“ä¸­æå–æ•°æ®å¹¶å¤‡ä»½åˆ°æ–‡ä»¶ä¸­ï¼Œç„¶åä»æ–‡ä»¶ä¸­æ¢å¤æ•°æ®åˆ°æ•°æ®åº“ã€‚</p>
<h3 data-id="heading-9">ä¾‹å­è§£é‡Š</h3>
<ol>
<li><strong>Hibernateé…ç½®ï¼š</strong> é…ç½®ä¸€ä¸ªHibernateé…ç½®æ–‡ä»¶ï¼Œç”¨äºè¿æ¥æ•°æ®åº“ã€‚</li>
<li><strong>å®ä½“ç±»ï¼š</strong> åˆ›å»ºä¸€ä¸ªç®€å•çš„å®ä½“ç±»æ¥è¡¨ç¤ºæ•°æ®åº“è¡¨ä¸­çš„æ•°æ®ã€‚</li>
<li><strong>æ•°æ®å¤‡ä»½å’Œæ¢å¤æµç¨‹ï¼š</strong>
<ul>
<li><strong>å¤‡ä»½æ•°æ®ï¼š</strong> ä»æ•°æ®åº“ä¸­æå–æ•°æ®å¹¶å°†å…¶å¤‡ä»½åˆ°JSONæ–‡ä»¶ä¸­ã€‚</li>
<li><strong>æ¢å¤æ•°æ®ï¼š</strong> ä»JSONæ–‡ä»¶ä¸­è¯»å–æ•°æ®å¹¶å°†å…¶æ¢å¤åˆ°æ•°æ®åº“ä¸­ã€‚</li>
</ul>
</li>
</ol>
<h4 data-id="heading-10">å¤‡ä»½æ•°æ®</h4>
<ol>
<li>é€šè¿‡Hibernateä»æ•°æ®åº“ä¸­æå–æ‰€æœ‰ç”¨æˆ·æ•°æ®ã€‚</li>
<li>ä½¿ç”¨Jacksonåº“å°†æ•°æ®åºåˆ—åŒ–ä¸ºJSONæ ¼å¼ï¼Œå¹¶ä¿å­˜åˆ°æ–‡ä»¶ä¸­ã€‚</li>
</ol>
<h4 data-id="heading-11">æ¢å¤æ•°æ®</h4>
<ol>
<li>ä½¿ç”¨Jacksonåº“ä»JSONæ–‡ä»¶ä¸­è¯»å–æ•°æ®ã€‚</li>
<li>é€šè¿‡Hibernateå°†æ•°æ®ä¿å­˜åˆ°æ•°æ®åº“ä¸­ã€‚</li>
</ol>
<p>é€šè¿‡ä»¥ä¸Šé…ç½®å’Œä»£ç ç¤ºä¾‹ï¼Œæˆ‘ä»¬å±•ç¤ºäº†å¦‚ä½•åœ¨æ•°æ®å¤‡ä»½å’Œæ¢å¤è¿‡ç¨‹ä¸­ä½¿ç”¨Hibernateã€‚è¿™ä¸ªç¤ºä¾‹åŒ…æ‹¬å¦‚ä½•é…ç½®Hibernateã€å¦‚ä½•å®šä¹‰å®ä½“ç±»ä»¥åŠå¦‚ä½•ç¼–å†™æ•°æ®å¤‡ä»½å’Œæ¢å¤æµç¨‹ï¼Œå¸®åŠ©ä½ å®ç°ä»æ•°æ®åº“åˆ°æ–‡ä»¶çš„å¤‡ä»½å’Œä»æ–‡ä»¶åˆ°æ•°æ®åº“çš„æ¢å¤ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Hibernateï¼ˆ84ï¼‰å¦‚ä½•åœ¨DevOpsæµç¨‹ä¸­ä½¿ç”¨Hibernateï¼Ÿ]]></title>    <link>https://juejin.cn/post/7602816610931523647</link>    <guid>https://juejin.cn/post/7602816610931523647</guid>    <pubDate>2026-02-04T11:58:18.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602816610931523647" data-draft-id="7602776926327980086" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Hibernateï¼ˆ84ï¼‰å¦‚ä½•åœ¨DevOpsæµç¨‹ä¸­ä½¿ç”¨Hibernateï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-02-04T11:58:18.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Victor356"/> <meta itemprop="url" content="https://juejin.cn/user/3492507879476878"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Hibernateï¼ˆ84ï¼‰å¦‚ä½•åœ¨DevOpsæµç¨‹ä¸­ä½¿ç”¨Hibernateï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3492507879476878/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Victor356
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T11:58:18.000Z" title="Wed Feb 04 2026 11:58:18 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨DevOpsæµç¨‹ä¸­ä½¿ç”¨Hibernateï¼Œä¸»è¦æ˜¯ä¸ºäº†ç¡®ä¿åœ¨è‡ªåŠ¨åŒ–çš„æ„å»ºã€æµ‹è¯•å’Œéƒ¨ç½²è¿‡ç¨‹ä¸­èƒ½å¤Ÿä¸€è‡´ã€å¯é åœ°ç®¡ç†æ•°æ®åº“çš„Schemaå’Œæ•°æ®ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªè¯¦ç»†çš„ç¤ºä¾‹ï¼Œç»“åˆä»£ç æ¼”ç¤ºå¦‚ä½•åœ¨DevOpsæµç¨‹ä¸­ä½¿ç”¨Hibernateï¼ŒåŒ…æ‹¬æ•°æ®åº“è¿ç§»ã€æ•°æ®ç§å­ã€è‡ªåŠ¨åŒ–æµ‹è¯•å’ŒæŒç»­é›†æˆã€‚</p>
<h3 data-id="heading-0">1. è®¾ç½®Hibernateé…ç½®</h3>
<p>é¦–å…ˆï¼Œåˆ›å»ºä¸€ä¸ªHibernateé…ç½®æ–‡ä»¶<code>hibernate.cfg.xml</code>ï¼Œç”¨äºè¿æ¥æ•°æ®åº“ã€‚</p>
<h4 data-id="heading-1"><code>hibernate.cfg.xml</code></h4>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"utf-8"</span>?&gt;</span>
<span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">hibernate-configuration</span> <span class="hljs-keyword">PUBLIC</span> <span class="hljs-string">"-//Hibernate/Hibernate Configuration DTD 3.0//EN"</span> <span class="hljs-string">"http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">hibernate-configuration</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">session-factory</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.driver_class"</span>&gt;</span>com.mysql.cj.jdbc.Driver<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.url"</span>&gt;</span>jdbc:mysql://localhost:3306/devops_db<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.username"</span>&gt;</span>db_user<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.password"</span>&gt;</span>db_password<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.dialect"</span>&gt;</span>org.hibernate.dialect.MySQLDialect<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.hbm2ddl.auto"</span>&gt;</span>update<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.show_sql"</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">session-factory</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">hibernate-configuration</span>&gt;</span>
</code></pre>
<h3 data-id="heading-2">2. åˆ›å»ºå®ä½“ç±»</h3>
<p>å®šä¹‰ä¸€ä¸ªç®€å•çš„å®ä½“ç±»æ¥è¡¨ç¤ºæ•°æ®åº“è¡¨ä¸­çš„æ•°æ®ã€‚</p>
<h4 data-id="heading-3"><code>User.java</code></h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> javax.persistence.*;

<span class="hljs-meta">@Entity</span>
<span class="hljs-meta">@Table(name = "users")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span> {
    <span class="hljs-meta">@Id</span>
    <span class="hljs-meta">@GeneratedValue(strategy = GenerationType.IDENTITY)</span>
    <span class="hljs-keyword">private</span> Long id;
    <span class="hljs-keyword">private</span> String name;
    <span class="hljs-keyword">private</span> String email;

    <span class="hljs-comment">// Getters and setters</span>
}
</code></pre>
<h3 data-id="heading-4">3. æ•°æ®åº“è¿ç§»å·¥å…·</h3>
<p>ä¸ºäº†åœ¨DevOpsæµç¨‹ä¸­ç®¡ç†æ•°æ®åº“Schemaå’Œæ•°æ®è¿ç§»ï¼Œå¯ä»¥ä½¿ç”¨Flywayæˆ–Liquibaseã€‚ä»¥ä¸‹æ˜¯ä½¿ç”¨Flywayçš„ç¤ºä¾‹ã€‚</p>
<h4 data-id="heading-5">Flywayé…ç½®ï¼ˆ<code>flyway.conf</code>ï¼‰</h4>
<pre><code class="hljs language-properties" lang="properties">flyway.url=jdbc:mysql://localhost:3306/devops_db
flyway.user=db_user
flyway.password=db_password
flyway.locations=filesystem:src/main/resources/db/migration
</code></pre>
<h4 data-id="heading-6">åˆ›å»ºè¿ç§»è„šæœ¬</h4>
<p>åœ¨<code>src/main/resources/db/migration</code>ç›®å½•ä¸‹åˆ›å»ºè¿ç§»è„šæœ¬<code>V1__Create_users_table.sql</code>ã€‚</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> users (
    id <span class="hljs-type">BIGINT</span> AUTO_INCREMENT <span class="hljs-keyword">PRIMARY</span> KEY,
    name <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">255</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
    email <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">255</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>
);
</code></pre>
<h3 data-id="heading-7">4. ç¼–å†™æ•°æ®ç§å­</h3>
<p>ç¼–å†™ä¸€ä¸ªåˆå§‹åŒ–æ•°æ®çš„ç±»ï¼Œç”¨äºåœ¨åº”ç”¨ç¨‹åºå¯åŠ¨æ—¶æ’å…¥ä¸€äº›åˆå§‹æ•°æ®ã€‚</p>
<h4 data-id="heading-8"><code>DataSeeder.java</code></h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.hibernate.Session;
<span class="hljs-keyword">import</span> org.hibernate.SessionFactory;
<span class="hljs-keyword">import</span> org.hibernate.Transaction;
<span class="hljs-keyword">import</span> org.hibernate.cfg.Configuration;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DataSeeder</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// Configure Hibernate</span>
        <span class="hljs-type">Configuration</span> <span class="hljs-variable">config</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Configuration</span>().configure(<span class="hljs-string">"hibernate.cfg.xml"</span>);
        <span class="hljs-type">SessionFactory</span> <span class="hljs-variable">sessionFactory</span> <span class="hljs-operator">=</span> config.buildSessionFactory();

        <span class="hljs-comment">// Seed data</span>
        <span class="hljs-type">Session</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> sessionFactory.openSession();
        <span class="hljs-type">Transaction</span> <span class="hljs-variable">transaction</span> <span class="hljs-operator">=</span> session.beginTransaction();
        
        <span class="hljs-type">User</span> <span class="hljs-variable">user1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>();
        user1.setName(<span class="hljs-string">"Alice"</span>);
        user1.setEmail(<span class="hljs-string">"alice@example.com"</span>);
        
        <span class="hljs-type">User</span> <span class="hljs-variable">user2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>();
        user2.setName(<span class="hljs-string">"Bob"</span>);
        user2.setEmail(<span class="hljs-string">"bob@example.com"</span>);

        session.save(user1);
        session.save(user2);

        transaction.commit();
        session.close();
        sessionFactory.close();
    }
}
</code></pre>
<h3 data-id="heading-9">5. å•å…ƒæµ‹è¯•</h3>
<p>ç¼–å†™å•å…ƒæµ‹è¯•æ¥ç¡®ä¿æ•°æ®åº“æ“ä½œçš„æ­£ç¡®æ€§ã€‚</p>
<h4 data-id="heading-10"><code>UserTest.java</code></h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.hibernate.Session;
<span class="hljs-keyword">import</span> org.hibernate.SessionFactory;
<span class="hljs-keyword">import</span> org.hibernate.Transaction;
<span class="hljs-keyword">import</span> org.hibernate.cfg.Configuration;
<span class="hljs-keyword">import</span> org.junit.jupiter.api.AfterAll;
<span class="hljs-keyword">import</span> org.junit.jupiter.api.BeforeAll;
<span class="hljs-keyword">import</span> org.junit.jupiter.api.Test;

<span class="hljs-keyword">import</span> <span class="hljs-keyword">static</span> org.junit.jupiter.api.Assertions.*;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserTest</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> SessionFactory sessionFactory;

    <span class="hljs-meta">@BeforeAll</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setup</span><span class="hljs-params">()</span> {
        <span class="hljs-type">Configuration</span> <span class="hljs-variable">config</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Configuration</span>().configure(<span class="hljs-string">"hibernate.cfg.xml"</span>);
        sessionFactory = config.buildSessionFactory();
    }

    <span class="hljs-meta">@AfterAll</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">tearDown</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">if</span> (sessionFactory != <span class="hljs-literal">null</span>) {
            sessionFactory.close();
        }
    }

    <span class="hljs-meta">@Test</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testUserCreation</span><span class="hljs-params">()</span> {
        <span class="hljs-type">Session</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> sessionFactory.openSession();
        <span class="hljs-type">Transaction</span> <span class="hljs-variable">transaction</span> <span class="hljs-operator">=</span> session.beginTransaction();

        <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>();
        user.setName(<span class="hljs-string">"Charlie"</span>);
        user.setEmail(<span class="hljs-string">"charlie@example.com"</span>);
        session.save(user);

        transaction.commit();
        session.close();

        session = sessionFactory.openSession();
        <span class="hljs-type">User</span> <span class="hljs-variable">retrievedUser</span> <span class="hljs-operator">=</span> session.get(User.class, user.getId());
        session.close();

        assertNotNull(retrievedUser);
        assertEquals(<span class="hljs-string">"Charlie"</span>, retrievedUser.getName());
        assertEquals(<span class="hljs-string">"charlie@example.com"</span>, retrievedUser.getEmail());
    }
}
</code></pre>
<h3 data-id="heading-11">6. æŒç»­é›†æˆ</h3>
<p>ä½¿ç”¨CIå·¥å…·ï¼ˆå¦‚Jenkinsã€GitLab CIã€GitHub Actionsï¼‰æ¥è‡ªåŠ¨åŒ–æ„å»ºå’Œæµ‹è¯•è¿‡ç¨‹ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªGitHub Actionså·¥ä½œæµç¤ºä¾‹ã€‚</p>
<h4 data-id="heading-12"><code>.github/workflows/ci.yml</code></h4>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">name:</span> <span class="hljs-string">CI</span>

<span class="hljs-attr">on:</span>
  <span class="hljs-attr">push:</span>
    <span class="hljs-attr">branches:</span> [ <span class="hljs-string">main</span> ]
  <span class="hljs-attr">pull_request:</span>
    <span class="hljs-attr">branches:</span> [ <span class="hljs-string">main</span> ]

<span class="hljs-attr">jobs:</span>
  <span class="hljs-attr">build:</span>
    <span class="hljs-attr">runs-on:</span> <span class="hljs-string">ubuntu-latest</span>

    <span class="hljs-attr">services:</span>
      <span class="hljs-attr">mysql:</span>
        <span class="hljs-attr">image:</span> <span class="hljs-string">mysql:5.7</span>
        <span class="hljs-attr">ports:</span>
          <span class="hljs-bullet">-</span> <span class="hljs-number">3306</span><span class="hljs-string">:3306</span>
        <span class="hljs-attr">env:</span>
          <span class="hljs-attr">MYSQL_ROOT_PASSWORD:</span> <span class="hljs-string">root</span>
          <span class="hljs-attr">MYSQL_DATABASE:</span> <span class="hljs-string">devops_db</span>
          <span class="hljs-attr">MYSQL_USER:</span> <span class="hljs-string">db_user</span>
          <span class="hljs-attr">MYSQL_PASSWORD:</span> <span class="hljs-string">db_password</span>
        <span class="hljs-attr">options:</span> <span class="hljs-string">--health-cmd="mysqladmin</span> <span class="hljs-string">ping</span> <span class="hljs-string">--silent"</span> <span class="hljs-string">--health-interval=10s</span> <span class="hljs-string">--health-timeout=5s</span> <span class="hljs-string">--health-retries=3</span>

    <span class="hljs-attr">steps:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Checkout</span> <span class="hljs-string">code</span>
      <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/checkout@v2</span>

    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Set</span> <span class="hljs-string">up</span> <span class="hljs-string">JDK</span> <span class="hljs-number">11</span>
      <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/setup-java@v2</span>
      <span class="hljs-attr">with:</span>
        <span class="hljs-attr">java-version:</span> <span class="hljs-string">'11'</span>

    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Grant</span> <span class="hljs-string">execute</span> <span class="hljs-string">permission</span> <span class="hljs-string">for</span> <span class="hljs-string">gradlew</span>
      <span class="hljs-attr">run:</span> <span class="hljs-string">chmod</span> <span class="hljs-string">+x</span> <span class="hljs-string">gradlew</span>

    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Run</span> <span class="hljs-string">Flyway</span> <span class="hljs-string">migrations</span>
      <span class="hljs-attr">run:</span> <span class="hljs-string">./gradlew</span> <span class="hljs-string">flywayMigrate</span>

    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Build</span> <span class="hljs-string">with</span> <span class="hljs-string">Gradle</span>
      <span class="hljs-attr">run:</span> <span class="hljs-string">./gradlew</span> <span class="hljs-string">build</span>

    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Run</span> <span class="hljs-string">tests</span>
      <span class="hljs-attr">run:</span> <span class="hljs-string">./gradlew</span> <span class="hljs-string">test</span>
</code></pre>
<h3 data-id="heading-13">ä¾‹å­è§£é‡Š</h3>
<ol>
<li><strong>Hibernateé…ç½®ï¼š</strong> é…ç½®ä¸€ä¸ªHibernateé…ç½®æ–‡ä»¶ï¼Œç”¨äºè¿æ¥æ•°æ®åº“ã€‚</li>
<li><strong>å®ä½“ç±»ï¼š</strong> åˆ›å»ºä¸€ä¸ªç®€å•çš„å®ä½“ç±»æ¥è¡¨ç¤ºæ•°æ®åº“è¡¨ä¸­çš„æ•°æ®ã€‚</li>
<li><strong>æ•°æ®åº“è¿ç§»å·¥å…·ï¼š</strong> ä½¿ç”¨Flywayç®¡ç†æ•°æ®åº“Schemaå’Œæ•°æ®è¿ç§»ã€‚</li>
<li><strong>æ•°æ®ç§å­ï¼š</strong> ç¼–å†™åˆå§‹åŒ–æ•°æ®çš„ç±»ï¼Œç”¨äºåœ¨åº”ç”¨ç¨‹åºå¯åŠ¨æ—¶æ’å…¥ä¸€äº›åˆå§‹æ•°æ®ã€‚</li>
<li><strong>å•å…ƒæµ‹è¯•ï¼š</strong> ç¼–å†™å•å…ƒæµ‹è¯•æ¥ç¡®ä¿æ•°æ®åº“æ“ä½œçš„æ­£ç¡®æ€§ã€‚</li>
<li><strong>æŒç»­é›†æˆï¼š</strong> ä½¿ç”¨CIå·¥å…·ï¼ˆå¦‚GitHub Actionsï¼‰æ¥è‡ªåŠ¨åŒ–æ„å»ºå’Œæµ‹è¯•è¿‡ç¨‹ã€‚</li>
</ol>
<p>é€šè¿‡ä»¥ä¸Šé…ç½®å’Œä»£ç ç¤ºä¾‹ï¼Œæˆ‘ä»¬å±•ç¤ºäº†å¦‚ä½•åœ¨DevOpsæµç¨‹ä¸­ä½¿ç”¨Hibernateã€‚è¿™åŒ…æ‹¬å¦‚ä½•é…ç½®Hibernateã€å¦‚ä½•å®šä¹‰å®ä½“ç±»ã€å¦‚ä½•ä½¿ç”¨Flywayè¿›è¡Œæ•°æ®åº“è¿ç§»ã€å¦‚ä½•ç¼–å†™æ•°æ®ç§å­å’Œå•å…ƒæµ‹è¯•ï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨CIå·¥å…·å®ç°æŒç»­é›†æˆã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Hibernateï¼ˆ81ï¼‰å¦‚ä½•åœ¨æ•°æ®åŒæ­¥ä¸­ä½¿ç”¨Hibernateï¼Ÿ]]></title>    <link>https://juejin.cn/post/7602503154505039913</link>    <guid>https://juejin.cn/post/7602503154505039913</guid>    <pubDate>2026-02-03T12:11:56.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602503154505039913" data-draft-id="7602455806446075910" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Hibernateï¼ˆ81ï¼‰å¦‚ä½•åœ¨æ•°æ®åŒæ­¥ä¸­ä½¿ç”¨Hibernateï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-02-03T12:11:56.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Victor356"/> <meta itemprop="url" content="https://juejin.cn/user/3492507879476878"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Hibernateï¼ˆ81ï¼‰å¦‚ä½•åœ¨æ•°æ®åŒæ­¥ä¸­ä½¿ç”¨Hibernateï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3492507879476878/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Victor356
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-03T12:11:56.000Z" title="Tue Feb 03 2026 12:11:56 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    14
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨æ•°æ®åŒæ­¥è¿‡ç¨‹ä¸­ä½¿ç”¨Hibernateï¼Œå¯ä»¥å¸®åŠ©ä½ ä»ä¸€ä¸ªæ•°æ®åº“ä¸­æå–æ•°æ®ï¼Œå¹¶å°†è¿™äº›æ•°æ®åŒæ­¥åˆ°å¦ä¸€ä¸ªæ•°æ®åº“ä¸­ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªè¯¦ç»†çš„ç¤ºä¾‹ï¼Œç»“åˆä»£ç æ¼”ç¤ºå¦‚ä½•åœ¨æ•°æ®åŒæ­¥è¿‡ç¨‹ä¸­ä½¿ç”¨Hibernateã€‚</p>
<h3 data-id="heading-0">1. è®¾ç½®Hibernateé…ç½®</h3>
<p>é¦–å…ˆï¼Œåˆ›å»ºä¸¤ä¸ªHibernateé…ç½®æ–‡ä»¶ï¼Œåˆ†åˆ«ç”¨äºæºæ•°æ®åº“å’Œç›®æ ‡æ•°æ®åº“çš„è¿æ¥ã€‚</p>
<h4 data-id="heading-1"><code>hibernate_source.cfg.xml</code>ï¼ˆæºæ•°æ®åº“é…ç½®æ–‡ä»¶ï¼‰</h4>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"utf-8"</span>?&gt;</span>
<span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">hibernate-configuration</span> <span class="hljs-keyword">PUBLIC</span> <span class="hljs-string">"-//Hibernate/Hibernate Configuration DTD 3.0//EN"</span> <span class="hljs-string">"http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">hibernate-configuration</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">session-factory</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.driver_class"</span>&gt;</span>com.mysql.cj.jdbc.Driver<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.url"</span>&gt;</span>jdbc:mysql://localhost:3306/source_db<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.username"</span>&gt;</span>source_user<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.password"</span>&gt;</span>source_password<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.dialect"</span>&gt;</span>org.hibernate.dialect.MySQLDialect<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.hbm2ddl.auto"</span>&gt;</span>validate<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.show_sql"</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">session-factory</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">hibernate-configuration</span>&gt;</span>
</code></pre>
<h4 data-id="heading-2"><code>hibernate_target.cfg.xml</code>ï¼ˆç›®æ ‡æ•°æ®åº“é…ç½®æ–‡ä»¶ï¼‰</h4>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"utf-8"</span>?&gt;</span>
<span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">hibernate-configuration</span> <span class="hljs-keyword">PUBLIC</span> <span class="hljs-string">"-//Hibernate/Hibernate Configuration DTD 3.0//EN"</span> <span class="hljs-string">"http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">hibernate-configuration</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">session-factory</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.driver_class"</span>&gt;</span>com.mysql.cj.jdbc.Driver<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.url"</span>&gt;</span>jdbc:mysql://localhost:3306/target_db<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.username"</span>&gt;</span>target_user<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.password"</span>&gt;</span>target_password<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.dialect"</span>&gt;</span>org.hibernate.dialect.MySQLDialect<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.hbm2ddl.auto"</span>&gt;</span>update<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.show_sql"</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">session-factory</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">hibernate-configuration</span>&gt;</span>
</code></pre>
<h3 data-id="heading-3">2. åˆ›å»ºå®ä½“ç±»</h3>
<p>åˆ›å»ºä¸¤ä¸ªå®ä½“ç±»åˆ†åˆ«å¯¹åº”æºæ•°æ®åº“å’Œç›®æ ‡æ•°æ®åº“ä¸­çš„è¡¨ã€‚</p>
<h4 data-id="heading-4"><code>SourceEntity.java</code>ï¼ˆæºæ•°æ®åº“å®ä½“ç±»ï¼‰</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> javax.persistence.*;

<span class="hljs-meta">@Entity</span>
<span class="hljs-meta">@Table(name = "source_table")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SourceEntity</span> {
    <span class="hljs-meta">@Id</span>
    <span class="hljs-meta">@GeneratedValue(strategy = GenerationType.IDENTITY)</span>
    <span class="hljs-keyword">private</span> Long id;
    <span class="hljs-keyword">private</span> String dataField;
    <span class="hljs-keyword">private</span> String timestamp;

    <span class="hljs-comment">// Getters and setters</span>
}
</code></pre>
<h4 data-id="heading-5"><code>TargetEntity.java</code>ï¼ˆç›®æ ‡æ•°æ®åº“å®ä½“ç±»ï¼‰</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> javax.persistence.*;

<span class="hljs-meta">@Entity</span>
<span class="hljs-meta">@Table(name = "target_table")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TargetEntity</span> {
    <span class="hljs-meta">@Id</span>
    <span class="hljs-meta">@GeneratedValue(strategy = GenerationType.IDENTITY)</span>
    <span class="hljs-keyword">private</span> Long id;
    <span class="hljs-keyword">private</span> String dataField;
    <span class="hljs-keyword">private</span> String timestamp;

    <span class="hljs-comment">// Getters and setters</span>
}
</code></pre>
<h3 data-id="heading-6">3. ç¼–å†™æ•°æ®åŒæ­¥æµç¨‹</h3>
<p>ç¼–å†™æ•°æ®åŒæ­¥æµç¨‹æ¥æå–ã€è½¬æ¢å’ŒåŠ è½½æ•°æ®ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.hibernate.Session;
<span class="hljs-keyword">import</span> org.hibernate.SessionFactory;
<span class="hljs-keyword">import</span> org.hibernate.Transaction;
<span class="hljs-keyword">import</span> org.hibernate.cfg.Configuration;

<span class="hljs-keyword">import</span> java.util.List;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DataSync</span> {

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// Configure Hibernate for source database</span>
        <span class="hljs-type">Configuration</span> <span class="hljs-variable">sourceConfig</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Configuration</span>().configure(<span class="hljs-string">"hibernate_source.cfg.xml"</span>);
        <span class="hljs-type">SessionFactory</span> <span class="hljs-variable">sourceSessionFactory</span> <span class="hljs-operator">=</span> sourceConfig.buildSessionFactory();

        <span class="hljs-comment">// Configure Hibernate for target database</span>
        <span class="hljs-type">Configuration</span> <span class="hljs-variable">targetConfig</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Configuration</span>().configure(<span class="hljs-string">"hibernate_target.cfg.xml"</span>);
        <span class="hljs-type">SessionFactory</span> <span class="hljs-variable">targetSessionFactory</span> <span class="hljs-operator">=</span> targetConfig.buildSessionFactory();

        <span class="hljs-comment">// Extract Data from source database</span>
        <span class="hljs-type">Session</span> <span class="hljs-variable">sourceSession</span> <span class="hljs-operator">=</span> sourceSessionFactory.openSession();
        <span class="hljs-type">Transaction</span> <span class="hljs-variable">sourceTransaction</span> <span class="hljs-operator">=</span> sourceSession.beginTransaction();
        List&lt;SourceEntity&gt; sourceData = sourceSession.createQuery(<span class="hljs-string">"FROM SourceEntity"</span>, SourceEntity.class).list();
        sourceTransaction.commit();
        sourceSession.close();

        <span class="hljs-comment">// Transform Data</span>
        List&lt;TargetEntity&gt; transformedData = transformData(sourceData);

        <span class="hljs-comment">// Sync Data to target database</span>
        <span class="hljs-type">Session</span> <span class="hljs-variable">targetSession</span> <span class="hljs-operator">=</span> targetSessionFactory.openSession();
        <span class="hljs-type">Transaction</span> <span class="hljs-variable">targetTransaction</span> <span class="hljs-operator">=</span> targetSession.beginTransaction();
        <span class="hljs-keyword">for</span> (TargetEntity targetEntity : transformedData) {
            targetSession.saveOrUpdate(targetEntity);
        }
        targetTransaction.commit();
        targetSession.close();

        sourceSessionFactory.close();
        targetSessionFactory.close();
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> List&lt;TargetEntity&gt; <span class="hljs-title function_">transformData</span><span class="hljs-params">(List&lt;SourceEntity&gt; sourceData)</span> {
        <span class="hljs-comment">// Example transformation logic</span>
        <span class="hljs-keyword">return</span> sourceData.stream()
                .map(sourceEntity -&gt; {
                    <span class="hljs-type">TargetEntity</span> <span class="hljs-variable">targetEntity</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TargetEntity</span>();
                    targetEntity.setDataField(sourceEntity.getDataField());
                    targetEntity.setTimestamp(sourceEntity.getTimestamp());
                    <span class="hljs-keyword">return</span> targetEntity;
                })
                .toList();
    }
}
</code></pre>
<h3 data-id="heading-7">4. è¿è¡Œæ•°æ®åŒæ­¥æµç¨‹</h3>
<p>ç¼–è¯‘å¹¶è¿è¡Œä¸Šé¢çš„Javaä»£ç ï¼Œå®ƒå°†è¿æ¥åˆ°æºæ•°æ®åº“ï¼Œæå–æ•°æ®ï¼Œå¯¹æ•°æ®è¿›è¡Œè½¬æ¢ï¼Œå¹¶å°†è¿™äº›æ•°æ®åŒæ­¥åˆ°ç›®æ ‡æ•°æ®åº“ã€‚</p>
<h3 data-id="heading-8">ä¾‹å­è§£é‡Š</h3>
<ol>
<li><strong>Hibernateé…ç½®ï¼š</strong> é…ç½®ä¸¤ä¸ªHibernateé…ç½®æ–‡ä»¶ï¼Œåˆ†åˆ«ç”¨äºæºæ•°æ®åº“å’Œç›®æ ‡æ•°æ®åº“çš„è¿æ¥ã€‚</li>
<li><strong>å®ä½“ç±»ï¼š</strong> åˆ›å»ºå¯¹åº”æºæ•°æ®è¡¨å’Œç›®æ ‡æ•°æ®è¡¨çš„å®ä½“ç±»ã€‚</li>
<li><strong>æ•°æ®åŒæ­¥æµç¨‹ï¼š</strong>
<ul>
<li><strong>æŠ½å–ï¼ˆExtractï¼‰ï¼š</strong> ä»æºæ•°æ®åº“ä¸­æå–æ•°æ®ã€‚</li>
<li><strong>è½¬æ¢ï¼ˆTransformï¼‰ï¼š</strong> å¯¹æå–çš„æ•°æ®è¿›è¡Œè½¬æ¢ã€‚</li>
<li><strong>åŠ è½½ï¼ˆLoadï¼‰ï¼š</strong> å°†è½¬æ¢åçš„æ•°æ®åŒæ­¥åˆ°ç›®æ ‡æ•°æ®åº“ä¸­ã€‚</li>
</ul>
</li>
</ol>
<p>é€šè¿‡ä»¥ä¸Šé…ç½®å’Œä»£ç ç¤ºä¾‹ï¼Œæˆ‘ä»¬å±•ç¤ºäº†å¦‚ä½•åœ¨æ•°æ®åŒæ­¥è¿‡ç¨‹ä¸­ä½¿ç”¨Hibernateã€‚è¿™ä¸ªç¤ºä¾‹åŒ…æ‹¬å¦‚ä½•é…ç½®Hibernateã€å¦‚ä½•å®šä¹‰å®ä½“ç±»ä»¥åŠå¦‚ä½•ç¼–å†™æ•°æ®åŒæ­¥æµç¨‹ï¼Œå¸®åŠ©ä½ å®ç°ä»æºæ•°æ®åº“åˆ°ç›®æ ‡æ•°æ®åº“çš„æ•°æ®åŒæ­¥ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¦‚ä½•è®©AIå†™å‡ºä¸€ä¸ªç¨³å®šçš„åº”ç”¨]]></title>    <link>https://juejin.cn/post/7602543146237706283</link>    <guid>https://juejin.cn/post/7602543146237706283</guid>    <pubDate>2026-02-04T10:03:33.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602543146237706283" data-draft-id="7602776926327488566" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¦‚ä½•è®©AIå†™å‡ºä¸€ä¸ªç¨³å®šçš„åº”ç”¨"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-02-04T10:03:33.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¥‡èˆç²¾é€‰"/> <meta itemprop="url" content="https://juejin.cn/user/4388906147515367"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¦‚ä½•è®©AIå†™å‡ºä¸€ä¸ªç¨³å®šçš„åº”ç”¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4388906147515367/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¥‡èˆç²¾é€‰
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T10:03:33.000Z" title="Wed Feb 04 2026 10:03:33 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>å‰è¨€ï¼š<br/> AIæ—¶ä»£ï¼Œå‰ç«¯è½¬å‹åŠ¿åœ¨å¿…è¡Œï¼Œæˆ–è€…è¯´ç¯å¢ƒå·²ç»å¼€å§‹é€æ­¥åœ¨å¼ºåˆ¶ä½ è½¬å‹äº†ï¼Œä»å‰ä¸¤å¹´çš„ä¸AIå…±åŒç¼–ç¨‹ï¼Œåˆ°ç°åœ¨AIå·²ç»å¼€å§‹å®Œæˆå¤§å¤šæ•°çš„å·¥ä½œäº†ã€‚é‚£ä¹ˆå‰ç«¯å¦‚ä½•å®šä½è‡ªå·±çš„è§’è‰²å°±æ›´æ˜¾å¾—é‡è¦äº†ã€‚ä½œè€…å°±æ˜¯ä»ä¸€åå‰ç«¯ï¼Œé€æ­¥è½¬æˆäº†ä¸€ä¸ªAIå¼€å‘è€…ï¼Œä¸åœ¨å±€é™åœ¨å‰ç«¯é¢†åŸŸï¼Œè€Œæ˜¯å¤šè¯­è¨€çš„å¼€å‘è€…ï¼Œæˆ–è€…è¯´æ˜¯AIå·¥å…·æˆ–è€…AIé©±åŠ¨çš„é¡¹ç›®å¼€å‘è€…ã€‚</p>
</blockquote>
<p>æœ¬æ–‡è€Œæ˜¯ä½œè€…åœ¨å¤šä¸ªçœŸå®é¡¹ç›®ä¸­ï¼Œé€šè¿‡ä¸æ–­è¯•é”™ã€æ€»ç»“ã€ä¼˜åŒ– Prompt å’Œå·¥ç¨‹æµç¨‹åï¼Œæ²‰æ·€å‡ºçš„ä¸€äº›ç»éªŒ(å¯èƒ½æœ‰ä¸å‡†ç¡®çš„åœ°æ–¹ï¼Œå®Œå…¨æ˜¯æ ¹æ®è‡ªèº«å·¥ç¨‹ç»éªŒçš„æ€»ç»“)ã€‚</p>
<p>å¦‚ä½•è®©AIå†™å‡ºä¸€ä¸ªå®Œæ•´çš„é¡¹ç›®ï¼Œå¹¶ä¸”è¿™ä¸ªé¡¹ç›®è¿˜èƒ½åšåˆ°ç¬¦åˆé¢„æœŸä¸”ä»£ç å¥å£®ç¨³å®šã€‚</p>
<h3 data-id="heading-0">ç›®æ ‡åªæœ‰ä¸€ä¸ªï¼š</h3>
<blockquote>
<p>å¦‚ä½•è®© AI å†™å‡ºä¸€ä¸ªå®Œæ•´ã€å¯ç»´æŠ¤ã€ç¬¦åˆé¢„æœŸï¼Œå¹¶ä¸”è¶³å¤Ÿç¨³å®šçš„çœŸå®é¡¹ç›®ã€‚</p>
</blockquote>
<p>æˆ‘å¤§æ¦‚æ€»ç»“äº†å‡ ä¸ªéƒ¨åˆ†</p>
<h3 data-id="heading-1">1. æç¤ºè¯</h3>
<ul>
<li>
<p>æ¸…æ™°çš„è¾“å…¥æº</p>
<p>ä½ åº”è¯¥çŸ¥é“ä½ çš„ä¸Šæ¸¸æ˜¯ä»€ä¹ˆï¼Œè¾“å‡ºæ˜¯ä»€ä¹ˆã€‚å¦‚æœæœ‰ï¼Œè¦å¦‚ä½•å¤„ç†ï¼Œé¿å…è¿™äº›å½±å“çš„è‡ªå·±çš„ä¸Šä¸‹æ–‡ã€‚</p>
</li>
<li>
<p>promptå¦‚ä½•å†™</p>
<blockquote>
<p>ä¹Ÿå°±æ˜¯ä½ å¦‚ä½•ç»„ç»‡è‡ªå·±çš„promptã€‚å¾ˆå¤šäººè§‰å¾— AI â€œä¸ç¨³å®šâ€â€œç»å¸¸èƒ¡å†™â€â€œä»£ç è´¨é‡ä¸è¡Œâ€ï¼Œä½†å®é™…é¡¹ç›®ä¸­ä½ ä¼šå‘ç°ï¼š80% çš„é—®é¢˜ï¼Œå‡ºåœ¨è¾“å…¥ï¼Œè€Œä¸æ˜¯æ¨¡å‹ã€‚</p>
</blockquote>
<p>æˆ‘æ€»ç»“äº†å¾ˆé‡è¦çš„ä¸€ç‚¹å°±æ˜¯<span>ç»“æ„åŒ–</span></p>
<p>ç»“æ„åŒ–æ˜¯æŒ‡ä¸¤ä¸ªæ–¹é¢ï¼Œä¸€ä¸ªæ˜¯ä½ æè¿°çš„éœ€æ±‚è¦æœ‰æ˜ç¡®çš„ç»“æ„å±‚çº§ã€‚
å¦‚ï¼š</p>
<ul>
<li>è§’è‰²å®šä¹‰</li>
<li>ç›®æ ‡æè¿°</li>
<li>è¾“å…¥è¯´æ˜</li>
<li>è¾“å‡ºè¦æ±‚</li>
<li>çº¦æŸæ¡ä»¶</li>
<li>å¤±è´¥å¤„ç†è§„åˆ™</li>
</ul>
<p>é‚£ä¹ˆä½ çš„è¾“å…¥åº”è¯¥ç±»ä¼¼è¿™æ ·ï¼š
::: block-1
ä½ æ˜¯ä¸€ä¸ªèµ„æ·±å‰ç«¯ + AI å·¥ç¨‹å¸ˆ<br/>
ä½ çš„ç›®æ ‡æ˜¯å°† Figma åŸå‹è½¬æ¢ä¸º React é¡¹ç›®<br/>
è¾“å…¥åŒ…å«ï¼šåŸå‹å›¾ç‰‡ + Figma èŠ‚ç‚¹æ•°æ®<br/>
è¾“å‡ºå¿…é¡»æ˜¯å¯è¿è¡Œçš„ React é¡¹ç›®<br/>
ä¸å…è®¸ç•™ä¸‹ TODO<br/>
ä¸å…è®¸ä¿®æ”¹å·²æœ‰æ–‡ä»¶<br/>
:::</p>
<p>ç¬¬äºŒç‚¹å°±æ˜¯å¯¹è¾“å…¥è¾“å‡ºçš„ç»“æ„åŒ–è¦æ±‚ï¼Œä¹Ÿå°±æ˜¯<span>å¤§æ¨¡å‹æ¯”è¾ƒå®¹æ˜“ç†è§£çš„å¦‚XMLç»“æ„</span></p>
<p>è¿™ä¸€ç‚¹æ˜¯å› ä¸ºåœ¨å¤§æ¨¡å‹çš„è®­ç»ƒè¿‡ç¨‹ä¸­ï¼Œæ¥æ”¶äº†å¤§é‡çš„Xmlçš„ç»“æ„åŒ–æ•°æ®ï¼Œæ‰€ä»¥å®ƒå¤©ç„¶çš„å¯¹è¿™ç§ç»“æ„æ•æ„Ÿã€‚è¿™ä¸ªåœ¨claudeæ–‡æ¡£ä¸­æ›¾ç»æåˆ°è¿‡ã€‚å¦‚å»å¹´çˆ†ç«çš„bolt.newçš„å¼€æºç‰ˆæœ¬é‡Œé¢ï¼Œå®ƒçš„promptå¯ä»¥çœ‹åˆ°å¤§é‡çš„ç»“æ„åŒ–æç¤ºè¯</p>
<p><img src="https://p2.ssl.qhimg.com/t110b9a93016ce4916d0ffe7d6a.png" alt="" loading="lazy"/></p>
<p>å¯çœ‹åˆ°å¾ˆå¤šçš„ç»“æ„åŒ–æŒ‡ä»¤</p>
</li>
<li>
<p>åˆ†å±‚æ¬¡ï¼Œåå‘æç¤º
ä¸è¦ä¸€æ¬¡æ€§è®© AI å¹²æ‰€æœ‰äº‹ã€‚</p>
<p>é”™è¯¯æ–¹å¼ï¼š</p>
<blockquote>
<p>æ ¹æ®è¿™äº›å†…å®¹ï¼Œå¸®æˆ‘ç”Ÿæˆä¸€ä¸ªå®Œæ•´é¡¹ç›®</p>
</blockquote>
<p>æ­£ç¡®æ–¹å¼ï¼š</p>
<p>ç¬¬ä¸€æ­¥: åªè®©AIåˆ†æ</p>
<p>ç¬¬ä¸€æ­¥: åªè®©AIç»™æ–¹æ¡ˆ</p>
<p>ç¬¬ä¸‰æ­¥ï¼šåªè®©AIç”Ÿæˆä»£ç </p>
<p>ç¬¬å››æ­¥ï¼šåªè®©AIä¿®å¤é—®é¢˜</p>
<p>å¹¶ä¸”åŠ å…¥åå‘æç¤ºï¼š</p>
<blockquote>
<p>å¦‚æœä¿¡æ¯ä¸è¶³ï¼Œå¿…é¡»æ˜ç¡®æŒ‡å‡º
ä¸å…è®¸è‡ªè¡Œå‡è®¾
ä¸å…è®¸ä½¿ç”¨æœªå£°æ˜çš„åº“</p>
</blockquote>
<p>è¿™ä¸€æ­¥èƒ½æå¤§å‡å°‘â€œçœ‹ä¼¼åˆç†ã€å®é™…ä¸å¯ç”¨â€çš„å¹»è§‰ä»£ç </p>
</li>
<li>
<p>æç¤ºè¯ä¸è¦æ€•å¤šï¼ŒæŠŠä½ æƒ³åˆ°çš„è¾¹ç•Œæƒ…å†µéƒ½å†™ä¸Šä¹Ÿä¸æ— ä¸å¯ï¼Œ æ¯•ç«Ÿç°åœ¨æ¨¡å‹çš„ç†è§£èƒ½åŠ›å’Œä¸Šä¸‹æ–‡é•¿åº¦å·²ç»æœ‰äº†å¾ˆå¤§çš„æå‡ã€‚</p>
</li>
</ul>
<h3 data-id="heading-2">2. å·¥ç¨‹åŒ–</h3>
<p>çœŸæ­£èƒ½è½åœ°çš„ AI å¼€å‘ï¼Œä¸€å®šæ˜¯å·¥ç¨‹åŒ–çš„ï¼Œè€Œä¸æ˜¯èŠå¤©å¼çš„ã€‚</p>
<blockquote>
<p>è¿‡ç¨‹å¯æ§ã€åˆ†æ­¥éª¤ï¼Œè€Œä¸æ˜¯ä¸€æ¬¡æ€§ç”Ÿæˆ</p>
</blockquote>
<p>ä½ å¯ä»¥æŠŠ AI çœ‹æˆ<code>ä¸€ä¸ªä¸å¤ªèªæ˜ä½†æ‰§è¡ŒåŠ›æå¼ºçš„å·¥ç¨‹å¸ˆ</code>,
å‰ææ˜¯ä½ è¦æ‹†å¥½ä»»åŠ¡</p>
<p>ä¾‹å¦‚ä¸€ä¸ªçœŸå®é¡¹ç›®æµç¨‹ï¼š</p>
<p>åˆå§‹åŒ–é¡¹ç›®ç»“æ„</p>
<p>é”å®šæŠ€æœ¯æ ˆ</p>
<p>ç”Ÿæˆé¡µé¢éª¨æ¶/è·¯ç”±ç­‰</p>
<p>å…¶å®ƒéƒ¨åˆ†</p>
<p>ä»£ç è‡ªæ£€ä¸ä¿®å¤</p>
<p><img src="https://p3.ssl.qhimg.com/t110b9a930106d601cf0e9e02c3.jpg" alt="" loading="lazy"/></p>
   <p>æ¯ä¸€æ­¥éƒ½æœ‰æ˜ç¡®è¾“å…¥å’Œè¾“å‡º</p>
<p>å¦‚æœæ‹†çš„è¶³å¤Ÿç»†è‡´ï¼Œé‚£ä¹ˆæ¯ä¸€æ­¥çš„äº§å‡ºå…¶å®éƒ½å¯ä»¥ç”¨æˆ‘ä»¬å·¥ç¨‹åŒ–çš„æ–¹å¼æ¥è§£å†³ï¼Œå¯¹äº§ç‰©çš„æ£€æŸ¥ä¼šå¤§å¹…åº¦çš„å‡å°‘AIçš„ä¹±å†™çš„æƒ…å†µï¼ŒåŒæ—¶è¿˜èƒ½ç»™æˆ‘ä»¬èŠ‚çœå¾ˆå¤šä¸å¿…è¦çš„tokenæµªè´¹</p>
<h4 data-id="heading-3">å¢åŠ æ¨¡ç‰ˆ</h4>
<p>æ¨¡ç‰ˆæ˜¯é™åˆ¶AIå‘æ•£çš„éå¸¸æœ‰æ•ˆçš„æ–¹å¼ã€‚åœ¨å¾ˆå¤šä¼˜ç§€çš„å¼€æºé¡¹ç›®ä¸­ä¹Ÿéƒ½æ˜¯æä¾›äº†å¤§é‡çš„æ¨¡ç‰ˆæ¥å®ç°ã€‚</p>
<p>æƒ³è±¡ä¸€ä¸ªè®©AIåœ¨ä¸€ä¸ªåœˆå­é‡Œé¢å‘æŒ¥ï¼Œå’Œè®©AIæ— è¾¹ç•Œçš„å‘æŒ¥å“ªä¸€ç§ä¼šæ›´åŠ çš„ç¨³å®šã€‚æ¯•ç«Ÿæˆ‘ä»¬éœ€è¦çš„æ˜¯ä¸€ä¸ªç”Ÿäº§é¡¹ç›®ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªèŠå¤©æœºå™¨äººã€‚</p>
<h4 data-id="heading-4">mcp</h4>
<p>å…¶å®è¿™ä¸ªæ›´å¤šçš„æ˜¯ä¸ºäº†è®©äº§å“æ›´åŠ çš„çœ‹èµ·æ¥åƒ "äº§å“"ã€‚</p>
<p>æ¯•ç«Ÿè®©AIç”Ÿæˆä¸€ä¸ªåŸå¸‚çš„å®æ—¶å¤©æ°”æƒ…å†µï¼Œå®ƒæœ€åç»™ä½ çš„æ˜¯ä¸€å †å‡çš„æ•°æ®æ‘†åœ¨é‚£ï¼Œä¹Ÿå¾ˆè®©äººå‡ºæˆã€‚</p>
<h3 data-id="heading-5">æ¨¡å‹é€‰æ‹©</h3>
<p>è¿™ä¸ªæ²¡æœ‰å¤ªå¤šé€‰æ‹©ï¼Œå°±æ˜¯claudeç³»ï¼Œå¯¹æŒ‡ä»¤çš„éµå¾ªéå¸¸å¥½ã€‚</p>
<p>gemini3æœ€è¿‘ä¹ŸæŒºç«ï¼Œè¯•äº†ä¸€ä¸‹ï¼Œè¯•å›¾èƒ½åŠ›ç¡®å®æ¯”claudeè¦å¥½ï¼Œä½†æ˜¯è¯´æŒ‡ä»¤éµå¾ªï¼Œè‡ªæˆ‘æ„Ÿè§‰æ²¡æœ‰claudeæ›´å¥½ã€‚</p>
<h3 data-id="heading-6">å…¶å®ƒ</h3>
<p>æ•´ä¸ªè¿‡ç¨‹ä¹Ÿé‡åˆ°äº†ä¸€äº›é—®é¢˜ï¼Œæ¯”å¦‚æœ€å¤§çš„é—®é¢˜å°±æ˜¯<span>AIç¼–å†™é€Ÿåº¦</span>è¿™ä¸ªã€‚</p>
<p>ä¹Ÿå°è¯•è¿‡å¹¶å‘å¤„ç†ï¼Œå…¶å®å°±æ˜¯ç”¨ç©ºé—´æ¢æ—¶é—´ï¼Œå¦‚æœèƒ½åšåˆ°å½“ç„¶å¾ˆå¥½ï¼Œæ²¡æœ‰å»åšç‰¹åˆ«æ·±å…¥çš„å°è¯•ã€‚ä½†æ˜¯å¯æƒ³è€ŒçŸ¥ä¼šæœ‰ä¸€ä¸ªé—®é¢˜å°±æ˜¯ä¸Šä¸‹æ–‡åŒæ­¥çš„é—®é¢˜ï¼Œæ€ä¹ˆä¿è¯æ¯ä¸ª<code>session</code>ä¹‹é—´çš„ä¸Šä¸‹æ–‡æ˜¯æœ‰å…³è”çš„ï¼Œæ¯”å¦‚æˆ‘ä»¬çš„è·¯ç”±ï¼Œç‚¹å‡»è·³è½¬ï¼ŒçŠ¶æ€ç®¡ç†ç­‰ç­‰ã€‚</p>
<p>æˆ–è€…æ˜¯çˆ¶å­sessionçš„æ–¹å¼ï¼Œä½†æ˜¯åˆè¯¥å¦‚ä½•åˆ’åˆ†èŒè´£ï¼Œä»¥åŠè®°å¿†ç®¡ç†éƒ½ä¼šæ¯”è¾ƒå¤æ‚ã€‚</p>
<p>ä½†ç»ˆå½’æ˜¯æœ‰åŠæ³•è§£å†³çš„ï¼Œ<span>ä½†åŒæ—¶ä¹Ÿå¯ä»¥æœ‰å¦ä¸€ä¸ªåæ€å°±æ˜¯æ—¢ç„¶æˆ‘ä»¬åšçš„æ˜¯ä¸€ä¸ªå®Œå¤‡çš„å¯ä¸Šçº¿çš„ä¸œè¥¿ï¼Œé‚£ä¹ˆå¯¹åº”çš„æ—¶é—´è€—è´¹æ˜¯å¦ä¹Ÿæ˜¯å¯ä»¥æ¥å—çš„ã€‚</span></p>
<p>ä»ç¨³å®šæ€§å’Œä¸Šä¸‹æ–‡ç®¡ç†çš„è§’åº¦æ¥è¯´ï¼Œä¸šç•Œå·²ç»å‡ºäº†å¯¹åº”çš„agentäº§å“æ¥è§£å†³ï¼Œclaude codeå’Œgemini cliéƒ½æ˜¯å¸®ä½ è§£å†³è¿™äº›é—®é¢˜çš„ã€‚å®ƒä»¬å¯ä»¥å¸®åŠ©ä½ è§£å†³ä¸Šä¸‹æ–‡è‡ªåŠ¨å‹ç¼©çš„é—®é¢˜ï¼Œå·¥å…·ä½¿ç”¨ï¼Œæ–‡ä»¶æŸ¥æ‰¾ç­‰ç­‰ä»¥å‰éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨çš„è¡¥å…¨çš„èƒ½åŠ›ã€‚</p>
<p>è€Œä¸”claude codeçœŸå¿ƒå¥½ç”¨ï¼Œæœ‰äº†å®ƒä¹‹åæˆ‘ä»¬ä¹‹å‰çš„ä»£ç å¯ä»¥èŠ‚çœ70%ï¼Œå®ƒåšåˆ°äº†ä¸€ä¸ªçœŸæ­£çš„agentèƒ½åšåˆ°çš„äº‹æƒ…ã€‚ä½†æ˜¯å³ä½¿ç”¨äº†è¿™ä¸ªagentçš„äº§å“ï¼Œä¹Ÿä¼šé¢ä¸´å¾ˆå¤šæƒ…å†µï¼Œæ¯”å¦‚æˆ‘ä»¬å°±é‡åˆ°äº†ä¸€äº›æƒ…å†µã€‚</p>
<p>ä¸€ä¸ªæ˜¯é¢‘ç¹å¯¹è¯ä»¥åŠä¸€äº›è¾“å…¥è¿‡å¤§çš„æƒ…å†µï¼Œæœ€ç»ˆä¼šæ’‘çˆ†ä¸Šä¸‹æ–‡ã€‚æˆ–è€…å®ƒè‡ªèº«è®°å¿†çš„é—®é¢˜å¯¼è‡´å®ƒä¸è®°å¾—çš„cwdç›®å½•ï¼Œå¯¼è‡´å®ƒè‡ªå·±å»å¯»æ‰¾ç›®å½•å†™å…¥æ–‡ä»¶ã€‚</p>
<p>ç›®å‰å®ƒä¹Ÿæä¾›äº†ä¸€äº›å¥½çš„æ–¹å¼å»è§£å†³ã€‚æ¯”å¦‚subagent, è¯»å†™é’©å­æˆ–è€…Skillç­‰èƒ½åŠ›ã€‚</p>
<p>è¿™é‡Œå¾ˆå¤šæ­¥éª¤çš„ç»†èŠ‚æ²¡æœ‰å¾ˆå…·ä½“çš„å†™ï¼Œæ¶‰åŠåˆ°çš„é—®é¢˜ä¼šå¾ˆå¤šï¼Œæ„Ÿè§‰æ¯ä¸€ä¸ªç»†èŠ‚éƒ½å¯ä»¥è¯¦ç»†çš„å‡ºä¸€ç¯‡æ–‡ç« çš„åœ°æ­¥ã€‚</p>
<p>è™½ç„¶ä¸Šæ–‡è¯´åˆ°äº†å·¥ç¨‹åŒ–å»è§£å†³ä¸€äº›é—®é¢˜ï¼Œå®è·µä¸­å…¶å®å¤§å®¶éƒ½æ„Ÿè§‰åˆ°äº†ä¸€ç‚¹å°±æ˜¯<code>äººä¸ºçš„å¹²é¢„åœ¨è¶Šæ¥è¶Šå°‘</code>ã€‚ä¹Ÿå°±æ˜¯å¤§æ¨¡å‹çš„èƒ½åŠ›å§‹ç»ˆåœ¨è¿›æ­¥ã€‚æˆ‘ä»¬ç›®å‰çš„ä¸€åˆ‡æ“ä½œï¼Œä¼¼ä¹éƒ½æ˜¯åœ¨ç»™è¿‡æ¸¡é˜¶æ®µæ‰“è¡¥ä¸ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å½»åº•ææ‡‚ MCPï¼šTraeã€Agent ä¸æ’ä»¶æœåŠ¡ç«¯çš„â€œä¸‰è§’ååŒâ€åŸç†è§£æ]]></title>    <link>https://juejin.cn/post/7602553969970970678</link>    <guid>https://juejin.cn/post/7602553969970970678</guid>    <pubDate>2026-02-04T09:35:26.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602553969970970678" data-draft-id="7602579671475994643" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å½»åº•ææ‡‚ MCPï¼šTraeã€Agent ä¸æ’ä»¶æœåŠ¡ç«¯çš„â€œä¸‰è§’ååŒâ€åŸç†è§£æ"/> <meta itemprop="keywords" content="ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2026-02-04T09:35:26.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="goingflygo"/> <meta itemprop="url" content="https://juejin.cn/user/3896324936173719"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å½»åº•ææ‡‚ MCPï¼šTraeã€Agent ä¸æ’ä»¶æœåŠ¡ç«¯çš„â€œä¸‰è§’ååŒâ€åŸç†è§£æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3896324936173719/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    goingflygo
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T09:35:26.000Z" title="Wed Feb 04 2026 09:35:26 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    9
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ AI ç¼–ç¨‹å·¥å…·ï¼ˆå¦‚ Trae, Cursor, Windsurfï¼‰çˆ†å‘çš„ä»Šå¤©ï¼Œä½ å¯èƒ½å¬è¯´è¿‡ <strong>MCP (Model Context Protocol)</strong> è¿™ä¸ªè¯ã€‚å®ƒæ˜¯ Anthropic æ¨å‡ºçš„ä¸€ä¸ªå¼€æ”¾æ ‡å‡†ï¼Œè¢«ç§°ä¸º AI æ—¶ä»£çš„ "USB æ¥å£"ã€‚</p>
<p>ä½†å®ƒå…·ä½“æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿå½“ä½ åœ¨ Trae é‡Œå®‰è£…äº†ä¸€ä¸ªæ’ä»¶ï¼ˆæ¯”å¦‚ <code>trae-mem</code>ï¼‰ï¼Œå½“ä½ å¯¹ AI è¯´â€œå¸®æˆ‘ä¿å­˜è¿™æ®µè®°å¿†â€æ—¶ï¼Œåº•å±‚åˆ°åº•å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ</p>
<p>æœ¬æ–‡å°†é€šè¿‡ <code>trae-mem</code> çš„å®é™…ä»£ç ï¼Œå¸¦ä½ æ·±å…¥è§£æ„ <strong>Traeï¼ˆå®¿ä¸»/å®¢æˆ·ç«¯ï¼‰</strong>ã€<strong>Agentï¼ˆå¤§æ¨¡å‹/å¤§è„‘ï¼‰</strong> å’Œ <strong>MCP Serverï¼ˆæœåŠ¡ç«¯/å·¥å…·æ‰‹ï¼‰</strong> ä¹‹é—´çš„äº¤äº’åŸç†ã€‚</p>
<hr/>
<h2 data-id="heading-0">ä¸€ã€ æ ¸å¿ƒè§’è‰²ï¼šè°åœ¨åšä»€ä¹ˆï¼Ÿ</h2>
<p>åœ¨ä¸€ä¸ªå…¸å‹çš„ MCP å·¥ä½œæµä¸­ï¼Œæœ‰ä¸‰ä¸ªå…³é”®è§’è‰²ï¼Œå®ƒä»¬çš„å…³ç³»ç±»ä¼¼äº<strong>æ“ä½œç³»ç»Ÿã€CPU å’Œ åº”ç”¨ç¨‹åº</strong>ã€‚</p>
<h3 data-id="heading-1">1. MCP Host (Trae IDE) â€”â€” â€œæ€»çº¿ä¸è¿æ¥å™¨â€</h3>
<p>Trae æ˜¯æ•´ä¸ªç³»ç»Ÿçš„å®¿ä¸»ï¼ˆHostï¼‰ã€‚</p>
<ul>
<li><strong>å®ƒçš„èŒè´£</strong>ï¼šè´Ÿè´£å¯åŠ¨ MCP Server è¿›ç¨‹ï¼Œç®¡ç†æ ‡å‡†è¾“å…¥/è¾“å‡ºï¼ˆStdioï¼‰é€šé“ï¼Œå¹¶å°† Server æä¾›çš„å·¥å…·æ¸…å•ï¼ˆTools Listï¼‰â€œå–‚â€ç»™å¤§æ¨¡å‹ã€‚</li>
<li><strong>ç±»æ¯”</strong>ï¼šå®ƒæ˜¯ç”µè„‘çš„ä¸»æ¿å’Œæ“ä½œç³»ç»Ÿï¼Œè´Ÿè´£æŠŠå¤–è®¾ï¼ˆMCP Serverï¼‰æ¥å…¥è¿›æ¥ï¼Œå¹¶è®© CPUï¼ˆAgentï¼‰èƒ½çœ‹åˆ°å®ƒä»¬ã€‚</li>
</ul>
<h3 data-id="heading-2">2. MCP Server (æœåŠ¡ç«¯) â€”â€” â€œèƒ½åŠ›æä¾›è€…â€</h3>
<p>è¿™æ˜¯ä¸€ä¸ªç‹¬ç«‹è¿è¡Œçš„è¿›ç¨‹ï¼ˆä¾‹å¦‚æˆ‘ä»¬çš„ <code>python -m trae_mem.mcp_server</code>ï¼‰ã€‚</p>
<ul>
<li><strong>å®ƒçš„èŒè´£</strong>ï¼šå®ƒä¸çŸ¥é“ Agent æ˜¯è°ï¼Œä¹Ÿä¸æ‡‚è‡ªç„¶è¯­è¨€ã€‚å®ƒåªæ‡‚ <strong>JSON-RPC</strong> åè®®ã€‚å®ƒæš´éœ²äº†ä¸€ç»„å…·ä½“çš„<strong>å·¥å…·ï¼ˆToolsï¼‰</strong>ã€<strong>èµ„æºï¼ˆResourcesï¼‰</strong> æˆ– <strong>æç¤ºè¯ï¼ˆPromptsï¼‰</strong>ã€‚</li>
<li><strong>ç±»æ¯”</strong>ï¼šå®ƒå°±åƒä¸€ä¸ª USB é”®ç›˜æˆ–æ‰“å°æœºé©±åŠ¨ã€‚å®ƒæœ‰å…·ä½“çš„åŠŸèƒ½ï¼ˆæ‰“å°ã€æŒ‰é”®ï¼‰ï¼Œä½†éœ€è¦æœ‰äººæ¥è°ƒç”¨ã€‚</li>
<li><strong>ä»£ç å®ä¾‹</strong>ï¼š<code>trae-mem</code> æš´éœ²äº† <code>trae_mem_log</code>, <code>trae_mem_search</code> ç­‰å·¥å…·ã€‚</li>
</ul>
<h3 data-id="heading-3">3. Agent (å¤§æ¨¡å‹) â€”â€” â€œå†³ç­–å¤§è„‘â€</h3>
<p>è¿™æ˜¯è¿è¡Œåœ¨äº‘ç«¯ï¼ˆæˆ–æœ¬åœ°ï¼‰çš„ LLMï¼ˆå¦‚ Claude 3.5 Sonnet, GPT-4ï¼‰ã€‚</p>
<ul>
<li><strong>å®ƒçš„èŒè´£</strong>ï¼šå®ƒè´Ÿè´£ç†è§£ç”¨æˆ·çš„è‡ªç„¶è¯­è¨€æ„å›¾ï¼ŒæŸ¥çœ‹ Trae ç»™å®ƒçš„â€œå·¥å…·èœå•â€ï¼Œå¹¶å†³å®š<strong>æ˜¯å¦è°ƒç”¨</strong>ä»¥åŠ<strong>å¦‚ä½•è°ƒç”¨</strong>æŸä¸ªå·¥å…·ã€‚</li>
<li><strong>æ³¨æ„</strong>ï¼šAgent <strong>ä¸èƒ½ç›´æ¥è¿è¡Œä»£ç </strong>ï¼Œå®ƒåªèƒ½è¾“å‡ºä¸€ä¸ªâ€œæˆ‘æƒ³è°ƒç”¨å·¥å…· Xâ€çš„æ–‡æœ¬æŒ‡ä»¤ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-4">äºŒã€ äº¤äº’å››éƒ¨æ›²ï¼šä»å¯åŠ¨åˆ°æ‰§è¡Œ</h2>
<p>è®©æˆ‘ä»¬çœ‹çœ‹è¿™ä¸‰è€…æ˜¯å¦‚ä½•é€šè¿‡ MCP åè®®èˆåŠ¨èµ·æ¥çš„ã€‚æˆ‘ä»¬å°†æµç¨‹åˆ†ä¸ºå››ä¸ªé˜¶æ®µã€‚</p>
<h3 data-id="heading-5">æµç¨‹å›¾æ€»è§ˆ</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant Agent as ğŸ§  Agent (Model)
    participant Host as ğŸ–¥ï¸ Trae (MCP Client)
    participant Server as âš™ï¸ MCP Server (trae-mem)

    Note over Host, Server: é˜¶æ®µä¸€ï¼šæ¡æ‰‹ä¸å‘ç°
    Host-&gt;&gt;Server: å¯åŠ¨è¿›ç¨‹ (spawn process)
    Host-&gt;&gt;Server: JSON-RPC: initialize
    Server--&gt;&gt;Host: return capabilities (æˆ‘æ”¯æŒ Tools!)
    Host-&gt;&gt;Server: JSON-RPC: tools/list (ä½ æœ‰å•¥å·¥å…·ï¼Ÿ)
    Server--&gt;&gt;Host: return [trae_mem_log, hook_event...] (Schemaå®šä¹‰)

    Note over Agent, Host: é˜¶æ®µäºŒï¼šæ€è€ƒä¸å†³ç­–
    Host-&gt;&gt;Agent: User Prompt + Tools Schema (èœå•)
    Agent-&gt;&gt;Agent: æ€è€ƒï¼š"ç”¨æˆ·æƒ³å­˜è®°å¿†ï¼Œæˆ‘è¦ç”¨ trae_mem_log"
    Agent--&gt;&gt;Host: Output: Tool Call Request (æˆ‘æƒ³è°ƒç”¨è¿™ä¸ª!)

    Note over Host, Server: é˜¶æ®µä¸‰ï¼šè°ƒç”¨ä¸æ‰§è¡Œ
    Host-&gt;&gt;Server: JSON-RPC: tools/call {name: "trae_mem_log", args: {...}}
    Server-&gt;&gt;Server: æ‰§è¡Œ Python ä»£ç  (å†™å…¥ SQLite)
    Server--&gt;&gt;Host: return Result (æˆåŠŸ/å¤±è´¥ä¿¡æ¯)

    Note over Agent, Host: é˜¶æ®µå››ï¼šåé¦ˆä¸å“åº”
    Host-&gt;&gt;Agent: Tool Output (è¿™æ˜¯å·¥å…·çš„è¿è¡Œç»“æœ)
    Agent--&gt;&gt;Agent: æ•´åˆä¿¡æ¯
    Agent--&gt;&gt;Host: Final Response (è‡ªç„¶è¯­è¨€å›å¤ç”¨æˆ·)
</code></pre>
<h3 data-id="heading-6">é˜¶æ®µä¸€ï¼šæ¡æ‰‹ä¸å‘ç° (Handshake &amp; Discovery)</h3>
<p>å½“ä½ åœ¨ Trae çš„ <code>mcp.json</code> ä¸­é…ç½®å¥½æœåŠ¡å¹¶é‡å¯ IDE æ—¶ï¼š</p>
<ol>
<li>
<p><strong>å¯åŠ¨</strong>ï¼šTrae åœ¨åå°æ‚„æ‚„è¿è¡Œäº† <code>python3 -m trae_mem.mcp_server</code>ã€‚</p>
</li>
<li>
<p><strong>åˆå§‹åŒ– (<code>initialize</code>)</strong>ï¼š
Trae å‘é€ä¸€ä¸ª JSON åŒ…ç»™ Serverï¼Œè¯´ï¼šâ€œä½ å¥½ï¼Œæˆ‘æ˜¯å®¢æˆ·ç«¯ï¼Œåè®®ç‰ˆæœ¬ 2024-11-05â€ã€‚
Server å›å¤ï¼šâ€œä½ å¥½ï¼Œæˆ‘æ˜¯ <code>trae-mem</code>ï¼Œç‰ˆæœ¬ 0.1.0ï¼Œæˆ‘æ”¯æŒ Tools èƒ½åŠ›â€ã€‚</p>
</li>
<li>
<p><strong>åˆ—å‡ºå·¥å…· (<code>tools/list</code>)</strong>ï¼š
Trae é—®ï¼šâ€œè¯·æŠŠä½ æ”¯æŒçš„æ‰€æœ‰å·¥å…·åˆ—è¡¨å‘ç»™æˆ‘ã€‚â€
Server ä¼šè¿”å›ä¸€ä¸ªå·¨å¤§çš„ JSON åˆ—è¡¨ï¼Œå…¶ä¸­åŒ…å«äº†æ¯ä¸ªå·¥å…·çš„ <code>inputSchema</code>ã€‚</p>
<blockquote>
<p><strong>å…³é”®ä»£ç  (<code>mcp_server.py</code>)</strong>:</p>
<pre><code class="hljs language-python" lang="python">{
    <span class="hljs-string">"name"</span>: <span class="hljs-string">"trae_mem_hook_event"</span>,
    <span class="hljs-string">"description"</span>: <span class="hljs-string">"é€‚é…ç”Ÿå‘½å‘¨æœŸäº‹ä»¶..."</span>,
    <span class="hljs-string">"inputSchema"</span>: {
        <span class="hljs-string">"type"</span>: <span class="hljs-string">"object"</span>,
        <span class="hljs-string">"properties"</span>: { <span class="hljs-string">"event"</span>: {...}, <span class="hljs-string">"payload"</span>: {...} },
        <span class="hljs-string">"required"</span>: [<span class="hljs-string">"event"</span>, <span class="hljs-string">"payload"</span>]
    }
}
</code></pre>
<p><em>è¿™æ®µ JSON å°±æ˜¯ Agent åæ¥èƒ½è¯»æ‡‚çš„â€œè¯´æ˜ä¹¦â€ã€‚</em></p>
</blockquote>
</li>
</ol>
<h3 data-id="heading-7">é˜¶æ®µäºŒï¼šæ€è€ƒä¸å†³ç­– (Reasoning)</h3>
<p>ç°åœ¨ï¼Œç”¨æˆ·åœ¨èŠå¤©æ¡†è¾“å…¥ï¼š<strong>â€œæˆ‘åˆšä¿®å¤äº†ç™»å½• bugï¼Œå¸®æˆ‘è®°å½•ä¸€ä¸‹ã€‚â€</strong></p>
<ol>
<li><strong>æ„å»ºä¸Šä¸‹æ–‡</strong>ï¼šTrae å°†ç”¨æˆ·çš„è¿™å¥è¯ï¼Œè¿åŒåˆšæ‰ Server å‘æ¥çš„â€œå·¥å…·è¯´æ˜ä¹¦â€ï¼Œä¸€èµ·æ‰“åŒ…å‘ç»™ Agentï¼ˆå¤§æ¨¡å‹ï¼‰ã€‚</li>
<li><strong>æ¨¡å‹æ€è€ƒ</strong>ï¼š
Agent è¯»åˆ°è¯´æ˜ä¹¦ï¼Œå‘ç°æœ‰ä¸€ä¸ªå·¥å…·å« <code>trae_mem_log</code>ï¼Œæè¿°æ˜¯â€œå†™å…¥ä¸€æ¡è§‚æµ‹...â€ã€‚
Agent è®¤ä¸ºï¼šâ€œè¿™ä¸ªå·¥å…·ç¬¦åˆç”¨æˆ·çš„éœ€æ±‚ã€‚â€</li>
<li><strong>ç”Ÿæˆè°ƒç”¨è¯·æ±‚</strong>ï¼š
Agent <strong>ä¸ä¼š</strong>ç›´æ¥æ‰§è¡Œ Python ä»£ç ï¼Œå®ƒåªæ˜¯è¿”å›ä¸€æ®µç‰¹å®šçš„æ–‡æœ¬ï¼ˆé€šå¸¸æ˜¯ XML æˆ– JSON æ ¼å¼ï¼‰ï¼Œå‘Šè¯‰ Traeï¼š
<blockquote>
<p><em>â€œè¯·å¸®æˆ‘è°ƒç”¨ <code>trae_mem_log</code>ï¼Œå‚æ•°æ˜¯ <code>text='ä¿®å¤ç™»å½•bug', kind='user'</code>ã€‚â€</em></p>
</blockquote>
</li>
</ol>
<h3 data-id="heading-8">é˜¶æ®µä¸‰ï¼šä¸­è½¬ä¸æ‰§è¡Œ (Execution)</h3>
<p>Trae æ‹¦æˆªåˆ°äº† Agent çš„è¿™ä¸ªè¯·æ±‚ã€‚</p>
<ol>
<li><strong>åè®®è½¬æ¢</strong>ï¼šTrae å°† Agent çš„æ„å›¾è½¬æ¢ä¸ºæ ‡å‡†çš„ MCP JSON-RPC è¯·æ±‚ï¼Œé€šè¿‡ Stdin ç®¡é“å‘ç»™ Serverã€‚
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"jsonrpc"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2.0"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"method"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"tools/call"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">10</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"params"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"trae_mem_log"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"arguments"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"session"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"current"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"kind"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"user"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"text"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ä¿®å¤ç™»å½•bug"</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
</li>
<li><strong>Server å¹²æ´»</strong>ï¼š
<code>mcp_server.py</code> çš„ä¸»å¾ªç¯æ”¶åˆ°è¿™è¡Œ JSONï¼Œè§£æå‡º <code>name</code> å’Œ <code>arguments</code>ï¼Œç„¶åè°ƒç”¨å¯¹åº”çš„ Python å‡½æ•°æ“ä½œ SQLite æ•°æ®åº“ã€‚</li>
<li><strong>è¿”å›ç»“æœ</strong>ï¼š
æ“ä½œå®Œæˆåï¼ŒServer æ‰“å°ç»“æœåˆ° Stdoutï¼š
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"jsonrpc"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2.0"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">10</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"result"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"content"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">{</span> <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"text"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"text"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"observation_id_12345"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
</li>
</ol>
<h3 data-id="heading-9">é˜¶æ®µå››ï¼šé—­ç¯ (Loop Closure)</h3>
<p>Trae æ”¶åˆ°è¿™ä¸ªç»“æœï¼ŒæŠŠå®ƒé€šè¿‡ Prompt å†æ¬¡å–‚å›ç»™ Agentã€‚
Agent çœ‹åˆ°ç»“æœï¼šâ€œå“¦ï¼Œå·¥å…·æ‰§è¡ŒæˆåŠŸäº†ï¼Œè¿”å›äº† IDã€‚â€
Agent æœ€ç»ˆå›å¤ç”¨æˆ·ï¼šâ€œ<strong>å·²ä¸ºæ‚¨è®°å½•è¯¥ä¿®å¤æ“ä½œï¼ˆID: ...ï¼‰ã€‚</strong>â€</p>
<hr/>
<h2 data-id="heading-10">ä¸‰ã€ ä¸ºä»€ä¹ˆè¿™ç§æ¶æ„å¾ˆç‰›ï¼Ÿ</h2>
<p>ç†è§£äº†è¿™ä¸ªåŸç†ï¼Œä½ å°±æ˜ç™½äº† MCP çš„ä¸‰å¤§ä¼˜åŠ¿ï¼š</p>
<ol>
<li>
<p><strong>å®‰å…¨æ€§ (Security)</strong>ï¼š
Agent æ°¸è¿œæ— æ³•ç›´æ¥è§¦ç¢°ä½ çš„ç¡¬ç›˜æˆ–ç½‘ç»œã€‚å®ƒåªèƒ½è¯·æ±‚ Trae è°ƒç”¨ Server æš´éœ²å‡ºæ¥çš„æœ‰é™çš„å‡ ä¸ªå·¥å…·ã€‚å¦‚æœ Server æ²¡å†™â€œåˆ é™¤æ–‡ä»¶â€çš„å·¥å…·ï¼ŒAgent å°±ç®—æƒ³åˆ ä¹Ÿåˆ ä¸æ‰ã€‚</p>
</li>
<li>
<p><strong>é€šç”¨æ€§ (Universality)</strong>ï¼š
<code>trae-mem</code> åªéœ€è¦å†™ä¸€æ¬¡ MCP Serverï¼Œå°±å¯ä»¥åŒæ—¶è¢« Traeã€Claude Desktopã€Zed Editor ç­‰ä»»ä½•æ”¯æŒ MCP çš„å®¢æˆ·ç«¯ä½¿ç”¨ã€‚å°±åƒ USB é”®ç›˜æ’å“ªå°ç”µè„‘éƒ½èƒ½ç”¨ã€‚</p>
</li>
<li>
<p><strong>æœ¬åœ°åŒ– (Local Control)</strong>ï¼š
Agent å¯ä»¥åœ¨äº‘ç«¯ï¼ˆOpenAI/Anthropicï¼‰ï¼Œä½† MCP Server è·‘åœ¨ä½ æœ¬åœ°ã€‚è¿™æ„å‘³ç€äº‘ç«¯çš„å¤§è„‘å¯ä»¥é€šè¿‡è¿™ä¸ªâ€œæœ¬åœ°æ‰‹è„šâ€æ¥æ“ä½œä½ æœ¬åœ°çš„æ•°æ®åº“ã€æ–‡ä»¶ï¼Œå®ç°äº†<strong>ç«¯äº‘ååŒ</strong>ã€‚</p>
</li>
</ol>
<h2 data-id="heading-11">å››ã€ æ€»ç»“</h2>
<ul>
<li><strong>Trae</strong> æ˜¯<strong>è·¯ç”±å™¨</strong>ï¼Œè´Ÿè´£è½¬å‘æ¶ˆæ¯ã€‚</li>
<li><strong>Agent</strong> æ˜¯<strong>æŒ‡æŒ¥å®˜</strong>ï¼Œè´Ÿè´£ä¸‹è¾¾æŒ‡ä»¤ã€‚</li>
<li><strong>MCP Server</strong> æ˜¯<strong>å·¥å…µ</strong>ï¼Œè´Ÿè´£å¹²è„æ´»ç´¯æ´»ã€‚</li>
</ul>
<p>å½“ä½ ä¸‹ä¸€æ¬¡åœ¨ Trae é‡Œçœ‹åˆ° AI å¸®ä½ æŸ¥æ•°æ®åº“ã€å†™æ–‡ä»¶æ—¶ï¼Œè¯·è®°å¾—ï¼šè¿™èƒŒåæ˜¯ä¸€åœºç²¾å¯†çš„ä¸‰æ–¹æ¥åŠ›èµ›ï¼Œè€Œ <strong>MCP åè®®</strong> å°±æ˜¯å®ƒä»¬å…±åŒçš„æ¥åŠ›æ£’ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[çªç„¶ï¼Œä¸€ä¸ªæ ‘ç»“æ„çš„æ•°æ®å±•ç¤ºä¸å‡ºæ¥äº†]]></title>    <link>https://juejin.cn/post/7602814773496119338</link>    <guid>https://juejin.cn/post/7602814773496119338</guid>    <pubDate>2026-02-04T10:03:39.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602814773496119338" data-draft-id="7602543146237526059" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="çªç„¶ï¼Œä¸€ä¸ªæ ‘ç»“æ„çš„æ•°æ®å±•ç¤ºä¸å‡ºæ¥äº†"/> <meta itemprop="keywords" content="å‰ç«¯,axios"/> <meta itemprop="datePublished" content="2026-02-04T10:03:39.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ¢…å·_é…·å­"/> <meta itemprop="url" content="https://juejin.cn/user/1488075996274921"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            çªç„¶ï¼Œä¸€ä¸ªæ ‘ç»“æ„çš„æ•°æ®å±•ç¤ºä¸å‡ºæ¥äº†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1488075996274921/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ¢…å·_é…·å­
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T10:03:39.000Z" title="Wed Feb 04 2026 10:03:39 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{line-height:1.75;font-family:-apple-system-font,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei UI,Microsoft YaHei,Arial,sans-serif;letter-spacing:2px;background-image:linear-gradient(90deg,rgba(50,0,0,.05) 3%,transparent 0),linear-gradient(1turn,rgba(50,0,0,.05) 3%,transparent 0);background-size:20px 20px;background-position:50%;word-break:break-word;font-weight:400;font-size:15px;overflow-x:hidden;color:#333}.markdown-body h1{font-size:23px;margin-bottom:5px;font-weight:700;padding-left:10px;border-left:5px solid #773098}.markdown-body h2{font-size:19px;font-weight:700;padding-left:10px;border-left:5px solid #916dd5}.markdown-body h3{font-size:17px;font-weight:700;padding-left:10px;border-left:5px solid #d89cf6}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{font-size:14px;margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{display:block;max-width:100%;margin:1em 0;border-radius:6px;box-shadow:2px 4px 7px #999;user-select:none}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{padding:.2em .5em;font-weight:700;font-family:-apple-system-font,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei UI,Microsoft YaHei,Arial,sans-serif;font-size:1em;color:#916dd5;word-break:break-word;overflow-x:auto;background-color:none;border-radius:2px}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;font-family:-apple-system-font,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei UI,Microsoft YaHei,Arial,sans-serif;font-weight:400;font-size:.9em;padding:16px 12px;margin:0;color:#333;word-break:normal;overflow-x:auto;background:#f8f8f8;scroll-behavior:smooth}.markdown-body a{text-decoration:none;color:#916dd5;font-weight:700;border-bottom:1px solid #916dd5}.markdown-body a:active,.markdown-body a:hover{color:#773098}.markdown-body table{display:inline-block!important;font-size:14px;width:auto;max-width:100%;overflow:auto;border:1px solid #916dd5;border-collapse:collapse}.markdown-body thead{background-color:#916dd5;color:#fff;text-align:left}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px;border:1px solid #916dd5}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #d89cf6;background-color:#f4eeff}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0;line-height:26px}.markdown-body ol,.markdown-body ul{padding-left:28px;list-style-type:circle}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body b,.markdown-body strong{color:#916dd5;font-weight:700}.markdown-body b:before,.markdown-body strong:before{content:"ã€Œ"}.markdown-body b:after,.markdown-body strong:after{content:"ã€"}.markdown-body em,.markdown-body i{color:#916dd5}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="github-gist">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#fff;color:#333}.hljs-comment,.hljs-meta{color:#969896}.hljs-emphasis,.hljs-quote,.hljs-strong,.hljs-template-variable,.hljs-variable{color:#df5000}.hljs-keyword,.hljs-selector-tag,.hljs-type{color:#d73a49}.hljs-attribute,.hljs-bullet,.hljs-literal,.hljs-symbol{color:#0086b3}.hljs-name,.hljs-section{color:#63a35c}.hljs-tag{color:#333}.hljs-attr,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-id,.hljs-selector-pseudo,.hljs-title{color:#6f42c1}.hljs-addition{color:#55a532;background-color:#eaffea}.hljs-deletion{color:#bd2c00;background-color:#ffecec}.hljs-link{text-decoration:underline}.hljs-number{color:#005cc5}.hljs-string{color:#032f62}</style><h2 data-id="heading-0">çªç„¶ï¼Œä¸€ä¸ªæ ‘ç»“æ„çš„æ•°æ®å±•ç¤ºä¸å‡ºæ¥äº†</h2>
<p>â€ƒâ€ƒæœ‰ä¸€å¤©ï¼Œä¸€ä¸ªå·²ç»ä¸Šçº¿çš„é¡¹ç›®ï¼Œæ”¶åˆ°äº†ç”¨æˆ·åé¦ˆï¼Œè¯´åœ¨é™„ä»¶ä¸Šä¼ çš„æ—¶å€™ï¼ŒåŒæ—¶ä¸Šä¼ ä¸¤ä¸ªä¼šå‡ºé”™ã€‚åæ¥ç»æ’æŸ¥ï¼Œæ—§ç³»ç»Ÿçš„æ¡†æ¶ç”¨çš„æ˜¯ element-uiï¼Œè€Œæ–°ç³»ç»Ÿç”¨çš„æ˜¯ ant-design-vueï¼Œæ˜¯å› ä¸ºè¿™ä¸¤ä¸ªæ¡†æ¶çš„Ë²upload ç»„ä»¶çš„Ë²å‚æ•°æ ¼å¼ä¸åŒË²å¯¼è‡´çš„é”™è¯¯ã€‚å¦‚æœæƒ³è¦å½»åº•ä¿®å¤ï¼Œå°±è¦æŠŠæ–°ç³»ç»Ÿä¸­çš„ upload ç»„ä»¶ä»£ç é‡æ„ã€‚ç”±äºå·²ç»å­˜åœ¨çš„ä»£ç ä½“é‡æ¯”è¾ƒå¤§ï¼Œé‡æ„æˆæœ¬è¿‡é«˜ï¼Œäºæ˜¯å†³å®šï¼Œå¦è¾Ÿè¹Šå¾„ã€‚</p>
<p>â€ƒâ€ƒåœ¨ç³»ç»Ÿä¸­æœ‰ä¸€ä¸ªä¼˜åŒ–åŠŸèƒ½ï¼šåœ¨çŸ­æ—¶é—´å†…é‡å¤è°ƒç”¨ä¸€ä¸ªæ¥å£æ—¶ï¼Œåªä¼šä¿ç•™æœ€åä¸€æ¬¡è°ƒç”¨ã€‚</p>
<p>â€ƒâ€ƒè¿™ä¸ªä¼˜åŒ–åŠŸèƒ½ï¼Œæ­£å¥½å¯ä»¥æ©ç›–é™„ä»¶ä¸Šä¼ é‡åˆ°çš„é—®é¢˜ã€‚ä½†æ˜¯ä¸€ä¸ªåŒäº‹è¡¨ç¤ºï¼Œè™½ç„¶æ‰¾åˆ°äº†è¿™ä¸ªä¼˜åŒ–åŠŸèƒ½çš„ä»£ç ï¼Œä½†å¥½åƒæ ¹æœ¬æ²¡ç”¨ä¸Šï¼ŒçŸ­æ—¶é—´å†…é‡å¤è°ƒç”¨çš„æ¥å£å¹¶æ²¡æœ‰è¢«ä¼˜åŒ–æˆä¸€ä¸ªã€‚äºæ˜¯ï¼Œè¿™ä¸ªé—®é¢˜æ¥åˆ°äº†æˆ‘è¿™é‡Œâ€¦â€¦</p>
<p>â€ƒâ€ƒäº‹æƒ…çš„æ¥é¾™å»è„‰å·²ç»æ¸…æ¥šäº†ï¼Œæ¥ä¸‹æ¥ï¼Œå¼€å§‹å¹²æ´»</p>
<h3 data-id="heading-1">ç¬¬ä¸€å±‚é˜»ç¢</h3>
<p>â€ƒâ€ƒé¦–å…ˆæ¢³ç†ä¼˜åŒ–åŠŸèƒ½é€»è¾‘ï¼Œå®ç°æ–¹æ³•æ˜¯åœ¨ è¯·æ±‚æ‹¦æˆªå™¨ ä¸ å“åº”æ‹¦æˆªå™¨ ä¸­é…åˆå®Œæˆçš„ï¼Œå¤§è‡´å°±æ˜¯è¯´ï¼š</p>
<p>â€ƒâ€ƒå°†å½“å‰è°ƒç”¨çš„æ¥å£ï¼Œæ”¾ç½®åœ¨ä¸€ä¸ªå®¹å™¨ä¸­ã€‚åœ¨æ¥å£æˆåŠŸè¿”å›å‰ï¼Œå¦‚æœå†æ¬¡è°ƒç”¨äº†ç›¸åŒæ¥å£ï¼Œå°±å°†å‰ä¸€æ¬¡çš„è°ƒç”¨ä¸­æ­¢ï¼Œä¿ç•™åä¸€æ¬¡ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c56ef746d1f74b1996e403b27060db99~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5qKF5bedX-mFt-WtkA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770804218&amp;x-signature=q0addOmxJcjLAbHJ5L2U7N5gAio%3D" alt="å“åº”æ‹¦æˆªå™¨" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2a5958690bb64459a44defc74b05cd27~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5qKF5bedX-mFt-WtkA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770804218&amp;x-signature=5IMeVMoSCriHtLX4qNFi92sMfxU%3D" alt="å“åº”æ‹¦æˆªå™¨" loading="lazy"/></p>
<p>â€ƒâ€ƒæˆªå›¾ä¸­æ‹¦æˆªå™¨é‡Œè°ƒç”¨çš„ä¸¤ä¸ªå‡½æ•°ï¼Œåˆ†åˆ«å°±æ˜¯ Ë²æ·»åŠ è¿›å®¹å™¨Ë² ä¸ Ë²ä»å®¹å™¨ç§»é™¤å¹¶ä¸­æ­¢Ë² çš„ä¸¤ä¸ªå‡½æ•°ï¼Œæ£€æŸ¥åˆ°è¿™é‡Œæ—¶å‘ç°ï¼Œè¯·æ±‚æ‹¦æˆªå™¨ä¸­çš„ç¬¬ä¸€è¡Œä»£ç è¢«<strong>æ³¨é‡Šæ‰äº†</strong>ï¼Œä¹Ÿå°±æ˜¯æ²¡æœ‰äº†å¯¹ removePending å‡½æ•°çš„è°ƒç”¨ï¼Œå¯¼è‡´æ•´ä¸ªé€»è¾‘æ²¡æœ‰å®Œæ•´æ‰§è¡Œã€‚</p>
<p>â€ƒâ€ƒæŸ¥è¯¢ä¿®æ”¹è®°å½•ï¼Œå‘ç°è¿™æ˜¯é¡¹ç›®åˆå§‹åŒ–æ—¶çš„åŸå§‹ä»£ç ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¹‹å‰ä½¿ç”¨è¿‡è¿™ä¸ªæ¡†æ¶çš„é¡¹ç›®ç»„ï¼Œæ•…æ„æŠŠè¿™ä¸ªä»£ç æ³¨é‡Šæ‰äº†ã€‚è™½ç„¶ä¸æ˜æ‰€ä»¥ï¼Œä½†ä¸ºäº†è§£å†³ç°åœ¨é™„ä»¶ä¸Šä¼ çš„é—®é¢˜ï¼Œæˆ‘ä»¬å°±å†ç»™å®ƒ<strong>æ”¾å¼€</strong>å§ã€‚</p>
<p>â€ƒâ€ƒé€šçŸ¥æµ‹è¯•ï¼Œå‘Šè¯‰åŒäº‹ï¼Œé—®é¢˜è§£å†³ï¼Œçš†å¤§æ¬¢å–œã€‚</p>
<p>â€ƒâ€ƒæ„å¤–çš„æ˜¯ï¼ŒçœŸæ­£çš„é—®é¢˜æ‰åˆšåˆšæµ®å‡ºæ°´é¢â€¦â€¦</p>
<h3 data-id="heading-2">ç¬¬äºŒå±‚é˜»ç¢</h3>
<p>â€ƒâ€ƒæµ‹è¯•äººå‘˜å¤æµ‹é™„ä»¶ä¸Šä¼ ï¼Œæœç„¶å¦‚é¢„æœŸæ‰€æ–™ï¼Œæ¡†æ¶ç»„ä»¶çš„å·®å¼‚é—®é¢˜ æˆåŠŸè¢« ä¼˜åŒ–ä»£ç æå®šäº†ã€‚</p>
<p>â€ƒâ€ƒä½†æ˜¯æ²¡è¿‡å¤šä¹…ï¼Œæµ‹è¯•äººå‘˜è¡¨ç¤ºï¼Œåˆå‡ºç°äº†ä¸€ä¸ªæ–°bugï¼Œæœ‰ä¸€ä¸ªé¡µé¢çš„æ•°æ®ï¼ŒæŸ¥ä¸å‡ºæ¥äº†â€¦â€¦</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e64052e3a6c741028071727b018cf501~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5qKF5bedX-mFt-WtkA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770804218&amp;x-signature=5nENa7IfYsWNEk1luBlilKHnZV0%3D" alt="æŠ¥é”™" loading="lazy"/></p>
<p>â€ƒâ€ƒè°ƒç”¨æ ˆæ»¡äº†ï¼Ÿ</p>
<p>â€ƒâ€ƒè¿™æ˜¯ä¸€ä¸ªæ ‘è¡¨æ ¼çš„é¡µé¢ï¼Œè¿™ä¸ªåŠŸèƒ½ä¸€ç›´éƒ½å¥½å¥½çš„ï¼Œè¦å‡ºé—®é¢˜æ—©å°±åº”è¯¥å‡ºäº†ã€‚é—®é—®åç«¯åŒäº‹ï¼Œæ”¹è¿‡ä¸œè¥¿æ²¡æœ‰ï¼Ÿæ£€æŸ¥å‰ç«¯ä»£ç ï¼Œè°åŠ¨äº†ä»£ç äº†ï¼Ÿéƒ½æ²¡æœ‰ï¼Œå¥½å¥½çš„çªç„¶å°±ä¸è¡Œäº†ã€‚</p>
<p>â€ƒâ€ƒåˆšåˆšä¿®å¤bugçš„å–œæ‚¦ä¸€ä¸‹å°±æ¶ˆæ•£äº†ã€‚æ£€æŸ¥äº†å¥½ä¹…ï¼Œä¸æ˜æ‰€ä»¥ã€‚å‰ç«¯ä»¥ä¸ºæ˜¯åç«¯çš„é—®é¢˜ï¼Œåç«¯ä»¥ä¸ºæ˜¯å‰ç«¯çš„é—®é¢˜ã€‚åç«¯åŒäº‹æå‡ºä¸ªæƒ³æ³•ï¼ŒæŠŠåˆšåˆšæ”¹çš„ä»£ç æ¢å¤ä¸€ä¸‹è¯•è¯•å‘¢ï¼Ÿ</p>
<p>â€ƒâ€ƒå“ˆå“ˆå“ˆï¼Œæ¥å£é‡å¤è°ƒç”¨ä¼˜åŒ– çš„ä»£ç ï¼Œè·ŸË²è°ƒç”¨æ ˆæº¢å‡ºË²çš„bugï¼Œæ€ä¹ˆå¯èƒ½æœ‰å…³ç³»å‘¢ï¼</p>
<p>â€ƒâ€ƒå½“æˆ‘å°†ä»£ç æ¢å¤ï¼Œé‡æ–°å°† removePending å‡½æ•°<strong>æ³¨é‡Šæ‰</strong>ä¹‹åã€‚<strong>æœç„¶å¥½äº†</strong></p>
<p>é¦–å…ˆè´´å‡ºåœ¨ä¸¤ä¸ªæ‹¦æˆªå™¨é‡Œéƒ½è°ƒç”¨äº†çš„ removePending å‡½æ•°
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bef45512d080460abbd20cf4df789296~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5qKF5bedX-mFt-WtkA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770804218&amp;x-signature=Z7a28XntKgx6TK1oD6mR6NsixPA%3D" alt="å‡½æ•°.png" loading="lazy"/>
è¿™ä¸ªå‡½æ•°ï¼Œå°±æ˜¯åœ¨å®¹å™¨ä¸­æŸ¥è¯¢ï¼Œæ˜¯ä¸æ˜¯å·²ç»å­˜åœ¨æŸä¸€ä¸ªæ¥å£äº†ï¼Œå­˜åœ¨å°±æŠŠå®ƒç»™åœäº†ï¼</p>
<h5 data-id="heading-3">é—®é¢˜æ‰€åœ¨ï¼š</h5>
<p>â€ƒâ€ƒå¯èƒ½æœ‰ç»éªŒçš„äººåœ¨ä¸€å¼€å§‹å°±å‘ç°äº†ï¼Œé—®é¢˜å°±å‡ºåœ¨å“åº”æ‹¦æˆªå™¨é‡Œçš„å‡½æ•°è°ƒç”¨ä¸Šã€‚</p>
<p>â€ƒâ€ƒè¯·æ±‚æ‹¦æˆªå™¨ ä¸ å“åº”æ‹¦æˆªå™¨ éƒ½å°†è‡ªèº«é»˜è®¤çš„å‚æ•°ä¼ ç»™äº† removePending å‡½æ•°ï¼Œä½†ï¼Œä¸¤ä¸ªæ‹¦æˆªå™¨çš„é»˜è®¤å‚æ•°çš„æ ¼å¼ï¼Œæ˜¯ä¸åŒçš„ï¼</p>
<p>â€ƒâ€ƒé—®é¢˜ï¼Œå°±å‡ºåœ¨è¿™é‡Œï¼š</p>
<ol>
<li>
<p>è¯·æ±‚æ‹¦æˆªå™¨å‚æ•°</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/93986c42127240e28a2bf3d41236aa27~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5qKF5bedX-mFt-WtkA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770804218&amp;x-signature=qJ02IMr6b7c4HHeBBlGvvxpYAZ4%3D" alt="è”æƒ³æˆªå›¾_20260204154129.png" loading="lazy"/></p>
</li>
<li>
<p>å“åº”æ‹¦æˆªå™¨å‚æ•°
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fb999d5436454c48bf04e7e9c89cfa5b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5qKF5bedX-mFt-WtkA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770804218&amp;x-signature=uthoTUDmRPoEDHbxGhkC3AYBERs%3D" alt="è”æƒ³æˆªå›¾_20260204154151.png" loading="lazy"/>
â€ƒâ€ƒç»è¿‡æ‰“å°æ£€æŸ¥ï¼ŒæŸ¥è¯¢èµ„æ–™åç¡®è®¤ï¼Œå“åº”æ‹¦æˆªå™¨å‚æ•°ä¸­çš„ config å­—æ®µï¼Œæ‰æ˜¯ä¸ è¯·æ±‚æ‹¦æˆªå™¨å‚æ•° ç›¸åŒçš„å­˜åœ¨ã€‚</p>
</li>
</ol>
<p>â€ƒâ€ƒä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨Ë²å“åº”æ‹¦æˆªå™¨Ë²è°ƒç”¨ removePending æ—¶ï¼Œç»™äº†ä¸€ä¸ª<strong>æ„å¤–</strong>çš„å€¼ã€‚è€Œæ£€æŸ¥è¿™ä¸ªå€¼ä¼šå‘ç°ï¼Œå…¶ä¸­çš„ data å±æ€§ï¼Œå°±æ˜¯æ¥å£è¿”å›çš„å®Œæ•´å†…å®¹ã€‚å¯¹åº”åˆ°åˆšåˆšæŠ¥é”™çš„é¡µé¢ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œ<strong>å‡½æ•°å¯¹ä¸€ä¸ªå·¨å¤§çš„æ ‘å½¢æ•°æ®ï¼Œåšäº† qs.stringify() æ“ä½œ</strong>ã€‚</p>
<p>â€ƒâ€ƒå°±æ˜¯è¿™ä¸ªæ“ä½œï¼Œå¯¼è‡´äº†è°ƒç”¨æ ˆæº¢å‡ºã€‚</p>
<p>â€ƒâ€ƒå¥½ï¼Œåªéœ€è¦åœ¨å“åº”æ‹¦æˆªå™¨é‡Œï¼Œä¼ å‚çš„æ—¶å€™åŠ ä¸Šä¸ª .config ï¼Œå¥½äº†ï¼Œçš†å¤§æ¬¢å–œ X 2</p>
<p>â€ƒâ€ƒå¯ä¸‡ä¸‡æ²¡æƒ³åˆ°ï¼Œæ”¹åˆ°è¿™é‡Œï¼Œå¹¶æ²¡æœ‰å½»åº•ç»“æŸâ€¦â€¦</p>
<h3 data-id="heading-4">ç¬¬ä¸‰å±‚é˜»ç¢</h3>
<p>â€ƒâ€ƒå› ä¸ºè¿™ä¸€éƒ¨åˆ†è¿˜å­˜åœ¨ä¸€äº›å°çš„ç–‘è™‘ï¼Œæ‰€ä»¥ï¼Œè™½ç„¶åŠŸèƒ½éƒ½å·²ç»èƒ½å¤Ÿæ­£å¸¸ä½¿ç”¨äº†ï¼Œä½†æˆ‘è®¡åˆ’åœ¨ç©ºé—²çš„æ—¶å€™å›é¡¾ä¸€ä¸‹ï¼Œå°†æ‰€æœ‰çš„ä¸è§£å¼„æ¸…æ¥šå¹¶è®°å½•ä¸‹æ¥ã€‚å°±åœ¨ç–‘è™‘è¢«ä¸€ç‚¹ç‚¹æ¶ˆé™¤çš„æ—¶å€™ï¼Œæˆ‘åˆå‘ç°äº†ä¸€ä¸ªéšè—å¾ˆæ·±çš„é—®é¢˜</p>
<p>â€ƒâ€ƒç†è®ºä¸Šè®²ï¼Œåœ¨æ‰€æœ‰æ¥å£è°ƒç”¨å®Œæˆåï¼Œæš‚å­˜æ¥å£çš„å®¹å™¨åº”è¯¥ä¼šè¢«æ¸…ç©ºã€‚å› ä¸ºåœ¨æœ€åçš„å“åº”æ‹¦æˆªå™¨ä¸­ï¼Œä¼šæ‰§è¡Œ removePending å‡½æ•°æ¥ç§»é™¤æ¥å£ã€‚ä½†æˆ‘çœ‹åˆ°çš„ï¼Œå´æ˜¯è¿™æ ·çš„ç»“æœï¼š</p>
<p>å®¹å™¨çš„ç»“æœï¼š
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5c071f943b46429284d16c8cdac31182~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5qKF5bedX-mFt-WtkA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770804218&amp;x-signature=ibCpkBZyy6%2FJXnFJ3cvuuHz14ns%3D" alt="å®¹å™¨ç»“æœ.png" loading="lazy"/></p>
<p>â€ƒâ€ƒåœ¨æ“ä½œæ—¶ï¼Œé‡Œé¢çš„æ¥å£æ•°æ®ä¼šè¶Šæ¥è¶Šå¤šï¼Œä½†åˆä¸æ˜¯æ‰€æœ‰çš„éƒ½åœ¨é‡Œé¢ï¼Œåªæœ‰ä¸€éƒ¨åˆ†ã€‚</p>
<p>â€ƒâ€ƒä¸ºä»€ä¹ˆä¼šæœ‰è¿™ä¹ˆå¤šæ¥å£è¿˜åœ¨é‡Œé¢ï¼Ÿåˆä¸ºä»€ä¹ˆåªæœ‰ä¸€éƒ¨åˆ†ï¼Ÿ</p>
<p>â€ƒâ€ƒæ£€æŸ¥ä»£ç ï¼Œè¯·æ±‚æ‹¦æˆªå™¨ ä¸­æ·»åŠ è¿›å®¹å™¨ï¼Œå“åº”æ‹¦æˆªå™¨ ä¸­ä»å®¹å™¨ä¸­åˆ é™¤ï¼Œæ•´ä¸ªé€»è¾‘æ˜¯æ²¡é—®é¢˜çš„ï¼Œé‚£ä¹ˆè¿™åˆæ˜¯æ€ä¹ˆå›äº‹ï¼Ÿ</p>
<p>â€ƒâ€ƒæœ€ç»ˆï¼Œé—®é¢˜å®šä½åœ¨äº† config.data å­—æ®µä¸Š</p>
<p>â€ƒâ€ƒåˆ†åˆ«æ‰“å° è¯·æ±‚æ‹¦æˆªå™¨ ä¸ å“åº”æ‹¦æˆªå™¨ ä¸­çš„ config.data çš„ å€¼ ä¸ ç±»å‹</p>
<ol>
<li>è¯·æ±‚æ‹¦æˆªå™¨ä¸­çš„ config.data
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2a9694f7f3e145419c98d0388ddd1b2c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5qKF5bedX-mFt-WtkA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770804218&amp;x-signature=OqZ1zE5yMmN6iKdt%2BP3qFSQbRM4%3D" alt="è¯·æ±‚æ‹¦æˆªå™¨çš„.png" loading="lazy"/></li>
<li>å“åº”æ‹¦æˆªå™¨ä¸­çš„ config.data
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bacd82367cad4b72b832a54a9214e85b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5qKF5bedX-mFt-WtkA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770804218&amp;x-signature=38Kl065ta2ifr%2FX%2FRN%2B5rAcTBMg%3D" alt="å“åº”æ‹¦æˆªå™¨çš„" loading="lazy"/></li>
<li>è¯·æ±‚æ‹¦æˆªå™¨ä¸å“åº”æ‹¦æˆªå™¨ä¸­çš„ configï¼Œé‡Œé¢çš„ data æ˜¯ç›¸åŒçš„</li>
</ol>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/581055499fa646e59e079374dd1a1181~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5qKF5bedX-mFt-WtkA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770804218&amp;x-signature=Veb0XUG4J3vyPmVV9Yt%2F2TTUKCw%3D" alt="è”æƒ³æˆªå›¾_20260204165126.png" loading="lazy"/></p>
<p>â€ƒâ€ƒåœ¨è¯·æ±‚æ‹¦æˆªå™¨ä¸­ï¼Œconfig.data æ˜¯ä¸€ä¸ªå¯¹è±¡ç±»å‹æ•°æ®ï¼›åœ¨å“åº”æ‹¦æˆªå™¨ä¸­ï¼Œconfig.data å˜æˆäº†å­—ç¬¦ä¸²ã€‚è€Œåœ¨ç›´æ¥æ‰“å° config æ—¶ï¼Œé‡Œé¢çš„ data åˆéƒ½æ˜¯ JSON å­—ç¬¦ä¸²ã€‚ä»£ç å®é™…ä½¿ç”¨çš„å€¼ï¼Œå¹¶ä¸æ˜¯æ‰“å°å°ä¸­çœ‹åˆ°çš„å€¼ï¼Œè¿™ä¹Ÿæ˜¯å‰ç«¯éå¸¸å®¹æ˜“å‡ºé”™çš„ç‚¹ã€‚</p>
<h5 data-id="heading-5">é—®é¢˜æ‰€åœ¨ï¼š</h5>
<p>é—®é¢˜ï¼Œåˆå‡ºåœ¨æ•°æ®çš„æ ¼å¼ä¸Šï¼<br/>
ä½†è¿™æ¬¡ä¸æ˜¯æ•°æ®å±‚çº§çš„é—®é¢˜ï¼Œè€Œæ˜¯ axios åº•å±‚ï¼Œé»˜è®¤å¯¹æ•°æ®æ ¼å¼çš„ä¿®æ”¹<br/>
å›é¡¾ä¸€ä¸‹ removePending å‡½æ•°ï¼Œé—®é¢˜å°±å‡ºåœ¨ config.data ä¸Š
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0a80ac8313ca422e9eeb7bd5e2481c93~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5qKF5bedX-mFt-WtkA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770804218&amp;x-signature=5e37qo9QhI22fj9cnpbMDf8Boa0%3D" alt="è”æƒ³æˆªå›¾_20260204162657.png" loading="lazy"/></p>
<p>â€ƒâ€ƒaxios ä¼šåœ¨è¯·æ±‚æ‹¦æˆªå™¨æ‰§è¡Œåã€çœŸæ­£å‘é€è¯·æ±‚å‰ï¼Œè‡ªåŠ¨æŠŠ config.data ä» JS å¯¹è±¡åºåˆ—åŒ–ä¸º JSON å­—ç¬¦ä¸²ã€‚è€Œå“åº”æ‹¦æˆªå™¨é‡Œæ‹¿åˆ°çš„ config.dataï¼Œæ˜¯ç»è¿‡è¿™æ¬¡åºåˆ—åŒ–åçš„æœ€ç»ˆç»“æœã€‚</p>
<p>â€ƒâ€ƒç®€å•è¯´ï¼šè¯·æ±‚æ‹¦æˆªå™¨æ“ä½œçš„æ˜¯ã€ŒåŸå§‹ JS å¯¹è±¡ã€ï¼Œå“åº”æ‹¦æˆªå™¨æ‹¿åˆ°çš„æ˜¯ã€Œaxios åºåˆ—åŒ–åçš„ JSON å­—ç¬¦ä¸²ã€</p>
<p>æ‰€ä»¥ï¼Œä¸ºäº†æ“ä½œæ•°æ®çš„ç±»å‹ç»Ÿä¸€ï¼Œåœ¨æ“ä½œ config.data æ•°æ®å‰ï¼Œè¿›è¡Œæ ¼å¼è°ƒæ•´ï¼Œå®Œæˆï¼</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d8a08d10ef374d588b60fade48838ae5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5qKF5bedX-mFt-WtkA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770804218&amp;x-signature=etbR%2FFG7DfuotQQxvsWkbR3T7co%3D" alt="è”æƒ³æˆªå›¾_20260204171321.png" loading="lazy"/></p>
<p>â€ƒâ€ƒæœ€ç»ˆï¼Œè¿™ä¸ªä¼˜åŒ–ä»£ç çš„é€»è¾‘ä¸å®ç°ï¼Œå®Œå…¨æ­£å¸¸äº†ï¼</p>
<p>â€ƒâ€ƒæœ€åæä¸€ä¸‹ï¼Œæ•´ä¸ª axios å°è£…é‡Œé¢ï¼Œè¿˜æœ‰ä¸€ä¸ªåœ¨è·¯ç”±è·³è½¬æ—¶ç”¨äºæ¸…ç©ºå®¹å™¨çš„å‡½æ•°ï¼Œä½†æŸ¥éæ•´ä¸ªé¡¹ç›®ä»£ç ï¼Œæ ¹æœ¬æ²¡äººç”¨ï¼</p>
<h3 data-id="heading-6">æ€»ç»“ï¼š</h3>
<p>â€ƒâ€ƒè¿™æ˜¯ä¸€ä¸ªåœ¨æ¶æ„é˜¶æ®µé—ç•™ä¸‹æ¥çš„é—®é¢˜ï¼Œåœ¨å‰é¢çš„é¡¹ç›®ç»„æ‰‹ä¸Šè¢«æ©ç›–äº†ï¼ŒæŠŠå¤§é—®é¢˜å˜æˆäº†å°é—®é¢˜ä»è€Œå¿½ç•¥æ‰ã€‚åœ¨æˆ‘ä»¬è¿™é‡Œï¼Œå°é—®é¢˜å› ç¬¬ä¸‰æ–¹æ¡†æ¶çš„å˜æ›´è€Œæ˜¾ç°ã€‚åœ¨ä¸æ–­çš„ä¿®æ”¹ä¸­ï¼Œç»ˆäºä»æ ¹æœ¬ä¸Šå¼„æ¸…æ¥šäº†æ¥é¾™å»è„‰ï¼</p>
<p>æ‰€ä»¥ï¼šæ¶æ„æ˜¯æ¶æ„å¸ˆçš„äº‹ï¼Œå¼€å‘æ‰ä¸ä¼šæ”¹ï¼Œç”šè‡³æœ‰å¯èƒ½ï¼Œä¼šæ”¹ä¸ªé”™çš„ä¸Šæ¥ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€æŠ€æœ¯ä¸“é¢˜ã€‘Scikit-learn Pythonæœºå™¨å­¦ä¹  - æ¨¡å‹ä¿å­˜åŠåŠ è½½]]></title>    <link>https://juejin.cn/post/7602842876256387118</link>    <guid>https://juejin.cn/post/7602842876256387118</guid>    <pubDate>2026-02-04T10:04:58.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602842876256387118" data-draft-id="7602789520035594250" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€æŠ€æœ¯ä¸“é¢˜ã€‘Scikit-learn Pythonæœºå™¨å­¦ä¹  - æ¨¡å‹ä¿å­˜åŠåŠ è½½"/> <meta itemprop="keywords" content="æœºå™¨å­¦ä¹ ,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-02-04T10:04:58.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°é”‹java1234"/> <meta itemprop="url" content="https://juejin.cn/user/4152222342709933"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€æŠ€æœ¯ä¸“é¢˜ã€‘Scikit-learn Pythonæœºå™¨å­¦ä¹  - æ¨¡å‹ä¿å­˜åŠåŠ è½½
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4152222342709933/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°é”‹java1234
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T10:04:58.000Z" title="Wed Feb 04 2026 10:04:58 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯é”‹å“¥ã€‚æœ€è¿‘è¿è½½æ›´æ–°ã€ŠScikit-learn Pythonæœºå™¨å­¦ä¹ ã€‹æŠ€æœ¯ä¸“é¢˜ã€‚ <img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3a74fb788cd74ecc9ceecf77ae572662~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP6ZSLamF2YTEyMzQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770804470&amp;x-signature=Ghv2sHC%2BGL%2Fw0uDqtXKP3DpMQtM%3D" alt="image.png" loading="lazy"/> æœ¬è¯¾ç¨‹ä¸»è¦è®²è§£åŸºäºScikit-learnçš„Pythonæœºå™¨å­¦ä¹ çŸ¥è¯†ï¼ŒåŒ…æ‹¬æœºå™¨å­¦ä¹ æ¦‚è¿°ï¼Œç‰¹å¾å·¥ç¨‹(æ•°æ®é›†ï¼Œç‰¹å¾æŠ½å–ï¼Œç‰¹å¾é¢„å¤„ç†ï¼Œç‰¹å¾é™ç»´ç­‰)ï¼Œåˆ†ç±»ç®—æ³•(K-ä¸´è¿‘ç®—æ³•ï¼Œæœ´ç´ è´å¶æ–¯ç®—æ³•ï¼Œå†³ç­–æ ‘ç­‰)ï¼Œå›å½’ä¸èšç±»ç®—æ³•(çº¿æ€§å›å½’ï¼Œæ¬ æ‹Ÿåˆï¼Œé€»è¾‘å›å½’ä¸äºŒåˆ†ç±»ï¼ŒK-meansç®—æ³•)ç­‰ã€‚ åŒæ—¶ä¹Ÿé…å¥—è§†é¢‘æ•™ç¨‹<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV11reUzEEPH%2F" title="https://link.juejin.cn?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV11reUzEEPH%2F" target="_blank">ã€ŠScikit-learn Pythonæœºå™¨å­¦ä¹  è§†é¢‘æ•™ç¨‹ã€‹</a></p>
<p>åœ¨ä½¿ç”¨ <code>scikit-learn</code> è¿›è¡Œæœºå™¨å­¦ä¹ æ—¶ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šéœ€è¦å°†è®­ç»ƒå¥½çš„æ¨¡å‹ä¿å­˜èµ·æ¥ï¼Œä¾¿äºåç»­çš„ä½¿ç”¨æˆ–éƒ¨ç½²ã€‚ä¿å­˜æ¨¡å‹å¯ä»¥é¿å…æ¯æ¬¡éƒ½é‡æ–°è®­ç»ƒæ¨¡å‹ï¼Œå°¤å…¶æ˜¯åœ¨æ¨¡å‹è®­ç»ƒæ—¶é—´è¾ƒé•¿æˆ–è®­ç»ƒæ•°æ®éå¸¸å¤§çš„æƒ…å†µä¸‹ã€‚<code>scikit-learn</code> æä¾›äº†å¤šç§ä¿å­˜å’ŒåŠ è½½æ¨¡å‹çš„æ–¹æ³•ï¼Œæœ€å¸¸è§çš„æ˜¯ä½¿ç”¨ <code>joblib</code> æˆ– <code>pickle</code> åº“ã€‚</p>
<p>æˆ‘ä»¬é€šè¿‡joblibæ¥å®ç°æ¨¡å‹ä¿å­˜å’ŒåŠ è½½ï¼Œæ ¸å¿ƒæ˜¯é€šè¿‡joblibçš„dump()æ–¹æ³•æ¥ä¿å­˜æ¨¡å‹ï¼Œä»¥åŠé€šè¿‡load()æ–¹æ³•æ¥åŠ è½½æ¨¡å‹ã€‚</p>
<p>æˆ‘ä»¬æ‰¾ä¸€ä¸ªå‰é¢çš„éšæœºæ£®æ—åˆ†ç±»ç®—æ³•RandomForestClassifierTest.pyæ¥æ¼”ç¤ºä¸‹æ¨¡å‹ä¿å­˜åŠåŠ è½½ã€‚</p>
<h2 data-id="heading-0">ä½¿ç”¨æ¨¡å‹å®ä¾‹</h2>
<pre><code class="hljs language-ini" lang="ini">from sklearn.datasets import load_iris
from sklearn.ensemble import RandomForestClassifier
from sklearn.metrics import accuracy_score, classification_report
from sklearn.model_selection import train_test_split
â€‹
<span class="hljs-comment"># 1,åŠ è½½æ•°æ®</span>
<span class="hljs-attr">iris</span> = load_iris()
<span class="hljs-attr">X</span> = iris.data Â <span class="hljs-comment"># ç‰¹å¾çŸ©é˜µ (150ä¸ªæ ·æœ¬ï¼Œ4ä¸ªç‰¹å¾ï¼šè¼é•¿ã€è¼å®½ã€ç“£é•¿ã€ç“£å®½)</span>
<span class="hljs-attr">y</span> = iris.target Â <span class="hljs-comment"># ç‰¹å¾å€¼ ç›®æ ‡å‘é‡ (3ç±»é¸¢å°¾èŠ±ï¼š0, 1, 2)</span>
â€‹
<span class="hljs-comment"># 2,æ•°æ®é¢„å¤„ç†</span>
X_train, X_test, y_train, <span class="hljs-attr">y_test</span> = train_test_split(X, y, test_size=<span class="hljs-number">0.2</span>) Â <span class="hljs-comment"># åˆ’åˆ†è®­ç»ƒé›†å’Œæµ‹è¯•é›†</span>
â€‹
<span class="hljs-comment"># 3,åˆ›å»ºå’Œè®­ç»ƒæ¨¡å‹</span>
<span class="hljs-attr">rfc_model</span> = RandomForestClassifier(n_estimators=<span class="hljs-number">100</span>, Â <span class="hljs-comment"># 100æ£µæ ‘</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-attr">oob_score</span>=<span class="hljs-literal">True</span>, Â <span class="hljs-comment"># å¯ç”¨OOBè¯„ä¼°</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-attr">max_depth</span>=<span class="hljs-number">3</span> Â <span class="hljs-comment"># æ§åˆ¶æ ‘çš„æ·±åº¦ï¼Œé˜²æ­¢è¿‡æ‹Ÿåˆ</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  )
rfc_model.fit(X_train, y_train) Â <span class="hljs-comment"># è®­ç»ƒæ¨¡å‹</span>
â€‹
<span class="hljs-comment"># 4,è¿›è¡Œé¢„æµ‹å¹¶è¯„ä¼°æ¨¡å‹</span>
<span class="hljs-attr">y_pred</span> = rfc_model.predict(X_test) Â <span class="hljs-comment"># åœ¨æµ‹è¯•é›†ä¸Šè¿›è¡Œé¢„æµ‹</span>
print('éšæœºæ£®æ—é¢„æµ‹å€¼ï¼š', y_pred)
print('æ­£ç¡®å€¼ Â  Â  Â  ï¼š', y_test)
â€‹
<span class="hljs-attr">accuracy</span> = accuracy_score(y_test, y_pred) Â <span class="hljs-comment"># è®¡ç®—å‡†ç¡®ç‡</span>
print(f'æµ‹è¯•é›†å‡†ç¡®ç‡ï¼š{accuracy:.2f}')
print('åˆ†ç±»æŠ¥å‘Šï¼š\n', classification_report(y_test, y_pred, <span class="hljs-attr">target_names</span>=iris.target_names))
</code></pre>
<h2 data-id="heading-1">æ¨¡å‹ä¿å­˜dump</h2>
<p>æˆ‘ä»¬æ–°å»ºä¸€ä¸ªæ¨¡å‹ä¿å­˜æµ‹è¯•ç±»saveModelTest.py</p>
<pre><code class="hljs language-ini" lang="ini">import joblib
from sklearn.datasets import load_iris
from sklearn.ensemble import RandomForestClassifier
from sklearn.metrics import accuracy_score, classification_report
from sklearn.model_selection import train_test_split
â€‹
<span class="hljs-comment"># 1,åŠ è½½æ•°æ®</span>
<span class="hljs-attr">iris</span> = load_iris()
<span class="hljs-attr">X</span> = iris.data Â <span class="hljs-comment"># ç‰¹å¾çŸ©é˜µ (150ä¸ªæ ·æœ¬ï¼Œ4ä¸ªç‰¹å¾ï¼šè¼é•¿ã€è¼å®½ã€ç“£é•¿ã€ç“£å®½)</span>
<span class="hljs-attr">y</span> = iris.target Â <span class="hljs-comment"># ç‰¹å¾å€¼ ç›®æ ‡å‘é‡ (3ç±»é¸¢å°¾èŠ±ï¼š0, 1, 2)</span>
â€‹
<span class="hljs-comment"># 2,æ•°æ®é¢„å¤„ç†</span>
X_train, X_test, y_train, <span class="hljs-attr">y_test</span> = train_test_split(X, y, test_size=<span class="hljs-number">0.2</span>) Â <span class="hljs-comment"># åˆ’åˆ†è®­ç»ƒé›†å’Œæµ‹è¯•é›†</span>
â€‹
<span class="hljs-comment"># 3,åˆ›å»ºå’Œè®­ç»ƒæ¨¡å‹</span>
<span class="hljs-attr">rfc_model</span> = RandomForestClassifier(n_estimators=<span class="hljs-number">100</span>, Â <span class="hljs-comment"># 100æ£µæ ‘</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-attr">oob_score</span>=<span class="hljs-literal">True</span>, Â <span class="hljs-comment"># å¯ç”¨OOBè¯„ä¼°</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-attr">max_depth</span>=<span class="hljs-number">3</span> Â <span class="hljs-comment"># æ§åˆ¶æ ‘çš„æ·±åº¦ï¼Œé˜²æ­¢è¿‡æ‹Ÿåˆ</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  )
rfc_model.fit(X_train, y_train) Â <span class="hljs-comment"># è®­ç»ƒæ¨¡å‹</span>
â€‹
<span class="hljs-comment"># ä¿å­˜æ¨¡å‹</span>
joblib.dump(rfc_model, 'rfc_model.pkl')
â€‹
<span class="hljs-comment"># 4,è¿›è¡Œé¢„æµ‹å¹¶è¯„ä¼°æ¨¡å‹</span>
<span class="hljs-attr">y_pred</span> = rfc_model.predict(X_test) Â <span class="hljs-comment"># åœ¨æµ‹è¯•é›†ä¸Šè¿›è¡Œé¢„æµ‹</span>
print('éšæœºæ£®æ—é¢„æµ‹å€¼ï¼š', y_pred)
print('æ­£ç¡®å€¼ Â  Â  Â  ï¼š', y_test)
â€‹
<span class="hljs-attr">accuracy</span> = accuracy_score(y_test, y_pred) Â <span class="hljs-comment"># è®¡ç®—å‡†ç¡®ç‡</span>
print(f'æµ‹è¯•é›†å‡†ç¡®ç‡ï¼š{accuracy:.2f}')
print('åˆ†ç±»æŠ¥å‘Šï¼š\n', classification_report(y_test, y_pred, <span class="hljs-attr">target_names</span>=iris.target_names))
</code></pre>
<p>æ‰§è¡Œå®Œï¼ŒåŒçº§ç›®å½•ä¼šç”Ÿæˆä¸€ä¸ªpklæ–‡ä»¶ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/600be1dacd8d424394d265c806655cb9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP6ZSLamF2YTEyMzQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770804470&amp;x-signature=yxuoRJoTEqA2S4mkegYq%2BYFHR3k%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-2">æ¨¡å‹åŠ è½½load</h2>
<p>æˆ‘ä»¬åœ¨æ–°å»ºä¸€ä¸ªæ¨¡å‹åŠ è½½æµ‹è¯•ç±»loadModelTest.py</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> joblib
<span class="hljs-keyword">from</span> sklearn.datasets <span class="hljs-keyword">import</span> load_iris
<span class="hljs-keyword">from</span> sklearn.ensemble <span class="hljs-keyword">import</span> RandomForestClassifier
<span class="hljs-keyword">from</span> sklearn.metrics <span class="hljs-keyword">import</span> accuracy_score, classification_report
<span class="hljs-keyword">from</span> sklearn.model_selection <span class="hljs-keyword">import</span> train_test_split
â€‹
<span class="hljs-comment"># 1,åŠ è½½æ•°æ®</span>
iris = load_iris()
X = iris.data Â <span class="hljs-comment"># ç‰¹å¾çŸ©é˜µ (150ä¸ªæ ·æœ¬ï¼Œ4ä¸ªç‰¹å¾ï¼šè¼é•¿ã€è¼å®½ã€ç“£é•¿ã€ç“£å®½)</span>
y = iris.target Â <span class="hljs-comment"># ç‰¹å¾å€¼ ç›®æ ‡å‘é‡ (3ç±»é¸¢å°¾èŠ±ï¼š0, 1, 2)</span>
â€‹
<span class="hljs-comment"># 2,æ•°æ®é¢„å¤„ç†</span>
X_train, X_test, y_train, y_test = train_test_split(X, y, test_size=<span class="hljs-number">0.2</span>) Â <span class="hljs-comment"># åˆ’åˆ†è®­ç»ƒé›†å’Œæµ‹è¯•é›†</span>
â€‹
<span class="hljs-comment"># åŠ è½½æ¨¡å‹</span>
rfc_model = joblib.load(<span class="hljs-string">'rfc_model.pkl'</span>)
â€‹
<span class="hljs-comment"># 4,è¿›è¡Œé¢„æµ‹å¹¶è¯„ä¼°æ¨¡å‹</span>
y_pred = rfc_model.predict(X_test) Â <span class="hljs-comment"># åœ¨æµ‹è¯•é›†ä¸Šè¿›è¡Œé¢„æµ‹</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">'éšæœºæ£®æ—é¢„æµ‹å€¼ï¼š'</span>, y_pred)
<span class="hljs-built_in">print</span>(<span class="hljs-string">'æ­£ç¡®å€¼ Â  Â  Â  ï¼š'</span>, y_test)
â€‹
accuracy = accuracy_score(y_test, y_pred) Â <span class="hljs-comment"># è®¡ç®—å‡†ç¡®ç‡</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">f'æµ‹è¯•é›†å‡†ç¡®ç‡ï¼š<span class="hljs-subst">{accuracy:<span class="hljs-number">.2</span>f}</span>'</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">'åˆ†ç±»æŠ¥å‘Šï¼š\n'</span>, classification_report(y_test, y_pred, target_names=iris.target_names))
</code></pre>
<p>è¿™æ ·å°±å°±èƒ½é‡å¤åˆ©ç”¨è®­ç»ƒå¥½æ¨¡å‹ã€‚</p>
<p>æˆ‘ä»¬è¿è¡Œæµ‹è¯•ä¸‹ï¼š</p>
<pre><code class="hljs language-css" lang="css">éšæœºæ£®æ—é¢„æµ‹å€¼ï¼š <span class="hljs-selector-attr">[0 2 0 1 2 2 1 2 1 2 2 0 1 0 0 2 0 2 1 0 0 0 2 2 1 0 0 2 2 2]</span>
æ­£ç¡®å€¼ Â  Â  Â  ï¼š <span class="hljs-selector-attr">[0 2 0 2 2 2 1 2 1 2 2 0 1 0 0 2 0 2 1 0 0 0 2 1 1 0 0 2 2 2]</span>
æµ‹è¯•é›†å‡†ç¡®ç‡ï¼š<span class="hljs-number">0.93</span>
åˆ†ç±»æŠ¥å‘Šï¼š
 Â  Â  Â  Â  Â  Â  Â  precision Â   recall  f1-score Â  support
â€‹
 Â  Â   setosa Â  Â  Â  <span class="hljs-number">1.00</span> Â  Â   <span class="hljs-number">1.00</span> Â  Â   <span class="hljs-number">1.00</span> Â  Â  Â   <span class="hljs-number">11</span>
  versicolor Â  Â  Â  <span class="hljs-number">0.83</span> Â  Â   <span class="hljs-number">0.83</span> Â  Â   <span class="hljs-number">0.83</span> Â  Â  Â  Â  <span class="hljs-number">6</span>
 Â  virginica Â  Â  Â  <span class="hljs-number">0.92</span> Â  Â   <span class="hljs-number">0.92</span> Â  Â   <span class="hljs-number">0.92</span> Â  Â  Â   <span class="hljs-number">13</span>
â€‹
 Â   accuracy Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-number">0.93</span> Â  Â  Â   <span class="hljs-number">30</span>
 Â  macro avg Â  Â  Â  <span class="hljs-number">0.92</span> Â  Â   <span class="hljs-number">0.92</span> Â  Â   <span class="hljs-number">0.92</span> Â  Â  Â   <span class="hljs-number">30</span>
weighted avg Â  Â  Â  <span class="hljs-number">0.93</span> Â  Â   <span class="hljs-number">0.93</span> Â  Â   <span class="hljs-number">0.93</span> Â  Â  Â   <span class="hljs-number">30</span>
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ‰‹æŠŠæ‰‹æ­å»ºç¬¬ä¸€ä¸ª RAG å®æˆ˜ï¼šå®ç°æœ¬åœ°æ–‡æ¡£æ™ºèƒ½é—®ç­”]]></title>    <link>https://juejin.cn/post/7602789520035643402</link>    <guid>https://juejin.cn/post/7602789520035643402</guid>    <pubDate>2026-02-04T09:59:47.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602789520035643402" data-draft-id="7602811649125793843" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ‰‹æŠŠæ‰‹æ­å»ºç¬¬ä¸€ä¸ª RAG å®æˆ˜ï¼šå®ç°æœ¬åœ°æ–‡æ¡£æ™ºèƒ½é—®ç­”"/> <meta itemprop="keywords" content="Agent,LangChain"/> <meta itemprop="datePublished" content="2026-02-04T09:59:47.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å±…å¾®"/> <meta itemprop="url" content="https://juejin.cn/user/2130203368238091"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ‰‹æŠŠæ‰‹æ­å»ºç¬¬ä¸€ä¸ª RAG å®æˆ˜ï¼šå®ç°æœ¬åœ°æ–‡æ¡£æ™ºèƒ½é—®ç­”
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2130203368238091/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å±…å¾®
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T09:59:47.000Z" title="Wed Feb 04 2026 09:59:47 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»40åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æ‰‹æŠŠæ‰‹æ­å»ºç¬¬ä¸€ä¸ª RAG å®æˆ˜ï¼šå®ç°æœ¬åœ°æ–‡æ¡£æ™ºèƒ½é—®ç­”</h2>
<h3 data-id="heading-1">4.1 é¡¹ç›®æ¦‚è¿°</h3>
<p>æœ¬æ–‡å°†å¸¦é¢†ä½ ä»é›¶å¼€å§‹æ­å»ºåŸºäº RAGï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰çš„çŸ¥è¯†é—®ç­”ç³»ç»Ÿï¼Œå®ç°æ–‡æ¡£ä¸Šä¼ ã€å†…å®¹è§£æä¸å¹¶åŸºäºæ£€ç´¢æ–‡æ¡£å†…å®¹è¿›è¡Œæ™ºèƒ½é—®ç­”ã€‚ç³»ç»Ÿæ”¯æŒ PDFã€DOCXã€TXTã€MD ç­‰å¤šæ ¼å¼æ–‡æ¡£ï¼Œé€šè¿‡å‘é‡æ•°æ®åº“å­˜å‚¨æ–‡æ¡£å‘é‡ï¼Œç»“åˆå¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰ç”Ÿæˆå‡†ç¡®å›ç­”ï¼Œå¹¶å…·æœ‰æµå¼è¾“å‡ºåŠŸèƒ½æå‡ç”¨æˆ·ä½“éªŒï¼Œæœ‰æ•ˆè§£å†³ LLM çš„é™æ€çŸ¥è¯†å±€é™ä¸ â€œå¹»è§‰â€ é—®é¢˜ã€‚</p>
<p>æ ¸å¿ƒåŠŸèƒ½å¦‚ä¸‹ï¼š</p>
<ul>
<li>æ”¯æŒä¸Šä¼  PDF/DOCX/TXT/MD æ ¼å¼æ–‡æ¡£ã€‚</li>
<li>è‡ªåŠ¨è§£ææ–‡æ¡£å†…å®¹ã€è¿›è¡Œå‘é‡åŒ–å¹¶å­˜å‚¨åœ¨å‘é‡æ•°æ®åº“ä¸­ã€‚</li>
<li>åŸºäºç”¨æˆ·é—®é¢˜æ£€ç´¢ç›¸å…³æ–‡æ¡£ç‰‡æ®µï¼Œç»“åˆæ£€ç´¢çš„æ–‡æ¡£ç‰‡æ®µã€ä¸Šä¸‹æ–‡ç”Ÿæˆå‡†ç¡®å›ç­”ã€‚</li>
<li>æ”¯æŒå¤šè½®å¯¹è¯ã€ç†è§£ä¸Šä¸‹æ–‡è¯­å¢ƒå’Œæµå¼è¾“å‡ºã€‚</li>
<li>æä¾›ç®€æ´çš„ Web äº¤äº’ç•Œé¢ã€‚</li>
</ul>
<h3 data-id="heading-2">4.2 å·¥ä½œæµç¨‹</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fa1ec2011ec74425bc10b7b694c4ca43~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bGF5b6u:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770803987&amp;x-signature=xkSFniD4lvxI4bm1qod2gDXCxv0%3D" alt="image-20260102230727272" loading="lazy"/></p>
<p>ä¸Šå›¾å±•ç¤ºäº†åŸºäºRAGçš„çŸ¥è¯†åº“é—®ç­”ç³»ç»Ÿçš„å·¥ä½œæµç¨‹ï¼Œæ•´ä½“å¯åˆ†ä¸º<strong>æ–‡æ¡£å¤„ç†ï¼ˆçŸ¥è¯†å…¥åº“ï¼‰</strong> å’Œ<strong>ç”¨æˆ·æŸ¥è¯¢ï¼ˆçŸ¥è¯†æ£€ç´¢ä¸å›ç­”ï¼‰</strong> ä¸¤å¤§é˜¶æ®µï¼Œä»¥ä¸‹åˆ†æ­¥éª¤è§£æï¼š</p>
<p>ä¸€ã€æ–‡æ¡£å¤„ç†é˜¶æ®µï¼ˆçŸ¥è¯†å…¥åº“ï¼‰</p>
<ul>
<li><strong>1. è§£ææå–ä¿¡æ¯</strong>ï¼šå¯¹åŸå§‹æ–‡æ¡£ï¼ˆå¦‚ PDFã€Markdownã€Wordã€txt æ ¼å¼ï¼‰ï¼Œé€šè¿‡å·¥å…·ï¼ˆå¦‚<code>pypdf</code>åº“ã€æ–‡æ¡£è§£æå·¥å…·ï¼‰æå–æ–‡æœ¬å†…å®¹ï¼Œè½¬åŒ–ä¸ºå­—ç¬¦ä¸²å½¢å¼ã€‚</li>
<li><strong>2. æ–‡æœ¬åˆ†å‰²</strong>ï¼šå°†æå–çš„é•¿å­—ç¬¦ä¸²åˆ‡å‰²ä¸ºè‹¥å¹² â€œæ–‡æœ¬å—â€ï¼ˆChunkï¼‰ï¼Œç¡®ä¿æ¯ä¸ªæ–‡æœ¬å—è¯­ä¹‰ç›¸å¯¹å®Œæ•´ï¼ˆæ¯”å¦‚æŒ‰æ®µè½ã€å›ºå®šå­—æ•°åˆ†å‰²ï¼‰ï¼Œä¾¿äºåç»­å‘é‡åŒ–å’Œæ£€ç´¢ã€‚</li>
<li><strong>3. å‘é‡åŒ–</strong>ï¼šåˆ©ç”¨Embedding æ¨¡å‹ï¼ˆä¸€ç§å°†æ–‡æœ¬è½¬åŒ–ä¸ºæ•°å€¼å‘é‡çš„æ¨¡å‹ï¼‰ï¼ŒæŠŠæ¯ä¸ªæ–‡æœ¬å—è½¬åŒ–ä¸ºé«˜ç»´å‘é‡ã€‚å‘é‡çš„æ•°å€¼èƒ½å¤Ÿè¡¨å¾æ–‡æœ¬çš„è¯­ä¹‰ä¿¡æ¯ï¼Œè¯­ä¹‰è¶Šç›¸ä¼¼çš„æ–‡æœ¬ï¼Œå‘é‡è·ç¦»è¶Šè¿‘ã€‚</li>
<li><strong>4. å­˜å‚¨</strong>ï¼šå°†è¿™äº›æ–‡æœ¬å‘é‡å­˜å…¥å‘é‡æ•°æ®åº“ï¼ˆVector Databaseï¼‰ï¼Œæ”¯æŒåç»­å¿«é€Ÿçš„ç›¸ä¼¼åº¦æŸ¥è¯¢ã€‚</li>
</ul>
<p>äºŒã€ç”¨æˆ·æŸ¥è¯¢é˜¶æ®µï¼ˆçŸ¥è¯†æ£€ç´¢ä¸å›ç­”ï¼‰</p>
<ul>
<li><strong>5. ç”¨æˆ·æŸ¥è¯¢å‘é‡åŒ–</strong>ï¼šç”¨æˆ·è¾“å…¥æŸ¥è¯¢ï¼ˆå¦‚ â€œä»‹ç»ä¸‹å…¬å¸çš„å‘å±•å†ç¨‹â€ï¼‰åï¼ŒåŒæ ·é€šè¿‡ä¸Šè¿°<strong>Embedding æ¨¡å‹</strong>ï¼Œå°†æŸ¥è¯¢æ–‡æœ¬è½¬åŒ–ä¸ºå‘é‡ã€‚</li>
<li><strong>6. ç›¸ä¼¼åº¦æŸ¥è¯¢</strong>ï¼šæŸ¥è¯¢å‘é‡æ•°æ®åº“ä¸­ï¼Œè®¡ç®— â€œç”¨æˆ·æŸ¥è¯¢å‘é‡â€ ä¸ â€œå·²å­˜å‚¨çš„æ–‡æœ¬å—å‘é‡â€ çš„ç›¸ä¼¼åº¦ï¼Œç­›é€‰å‡º<strong>TOP K ä¸ªæœ€ç›¸å…³çš„æ–‡æœ¬å—</strong>ï¼ˆå³ä¸ç”¨æˆ·é—®é¢˜è¯­ä¹‰æœ€åŒ¹é…çš„çŸ¥è¯†ç‰‡æ®µï¼‰ã€‚</li>
<li><strong>7. ç»“æœé‡æ’ï¼ˆRerankï¼‰</strong> ï¼šå¯¹ TOP Kç›¸å…³çš„ç»“æœè¿›ä¸€æ­¥åšé‡æ’ï¼Œç¡®ä¿æœ€ç›¸å…³çš„å†…å®¹ä¼˜å…ˆè¢«é€‰ç”¨ã€‚</li>
<li><strong>8. ç»„åˆæç¤ºè¯</strong>ï¼šå°† â€œç”¨æˆ·è¾“å…¥ã€é‡æ’åçš„çŸ¥è¯†ç‰‡æ®µ ã€ä¸Šä¸‹æ–‡è¡¥å……ï¼ˆå¯é€‰ï¼‰ã€ç³»ç»Ÿæç¤ºï¼ˆå¦‚ â€œåŸºäºæä¾›çš„ä¿¡æ¯ç”Ÿæˆç®€æ´å›ç­”â€ï¼‰â€ æ•´åˆä¸º<strong>ç»“æ„åŒ–æç¤ºè¯ï¼ˆPromptï¼‰</strong> ã€‚</li>
<li><strong>9. æäº¤ LLM ç”Ÿæˆå“åº”</strong>ï¼šå°†ç»„åˆå¥½çš„æç¤ºè¯è¾“å…¥<strong>å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰</strong> ï¼ŒLLM åŸºäºè¿™äº›ä¿¡æ¯ç†è§£ç”¨æˆ·éœ€æ±‚ï¼Œç”Ÿæˆæœ€ç»ˆçš„è‡ªç„¶è¯­è¨€å›ç­”ï¼ˆResponseï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-3">4.3 æ¶æ„è®¾è®¡</h3>
<p>ç³»ç»Ÿé‡‡ç”¨æ¨¡å—åŒ–è®¾è®¡ï¼Œä¸»è¦åŒ…å«ä»¥ä¸‹ç»„ä»¶ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d853e04371cc4870b57fa6b14a5fcbcc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bGF5b6u:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770803987&amp;x-signature=xe1LKuJrGkExM2GhGqB2WKdT55s%3D" alt="image-20260103193232562" loading="lazy"/></p>
<ul>
<li>
<p><strong>å‰ç«¯å±‚</strong>ï¼šåŸºäº Streamlit æ„å»ºï¼Œè´Ÿè´£ä¸ç”¨æˆ·ç›´æ¥äº¤äº’ï¼ŒåŒ…æ‹¬æä¾›<strong>äº¤äº’ç•Œé¢</strong>ã€æ”¯æŒ<strong>æ–‡ä»¶ä¸Šä¼ </strong>ã€å®ç°<strong>èŠå¤©äº¤äº’</strong>ã€æ”¯æŒ<strong>è¿ç»­å¤šè½®å¯¹è¯</strong>ã€æµå¼è¾“å‡ºã€‚</p>
</li>
<li>
<p><strong>æœåŠ¡å±‚</strong>ï¼šæ ¸å¿ƒä¸šåŠ¡é€»è¾‘ï¼Œå°è£…äº† RAG æŠ€æœ¯çš„æ ¸å¿ƒæµç¨‹ï¼š</p>
<ul>
<li><strong>æ–‡æ¡£å¤„ç†</strong>ï¼šå¯¹ç”¨æˆ·ä¸Šä¼ çš„æ–‡æ¡£è¿›è¡Œè§£æã€åˆ†å—ï¼ˆå°†é•¿æ–‡æ¡£æ‹†åˆ†ä¸ºçŸ­æ–‡æœ¬ç‰‡æ®µï¼Œä¾¿äºåç»­å¤„ç†ï¼‰ã€‚</li>
<li><strong>å‘é‡åŒ–å­˜å‚¨</strong>ï¼šè°ƒç”¨åµŒå…¥æ¨¡å‹ï¼Œå°†åˆ†å—åçš„æ–‡æœ¬ç‰‡æ®µè½¬æ¢ä¸ºè¯­ä¹‰å‘é‡ï¼Œå†æ‰¹é‡å†™å…¥å‘é‡æ•°æ®åº“ï¼Œå®ŒæˆçŸ¥è¯†å…¥åº“ã€‚</li>
<li><strong>æ£€ç´¢å¢å¼º</strong>ï¼šç”¨æˆ·å‘èµ·æŸ¥è¯¢æ—¶ï¼Œå…ˆé€šè¿‡å‘é‡æ•°æ®åº“æ£€ç´¢å‡º<strong>Top K å€™é€‰æ–‡æœ¬ç‰‡æ®µ</strong>ï¼Œå†è°ƒç”¨é‡æ’æ¨¡å‹å¯¹å€™é€‰ç»“æœåš<strong>ç²¾ç»†åŒ–æ’åº</strong>ï¼Œç­›é€‰å‡ºæœ€ç›¸å…³çš„å†…å®¹ï¼Œä¸º LLM æä¾›ç²¾å‡†çŸ¥è¯†æ”¯æ’‘ã€‚</li>
<li><strong>ä¸Šä¸‹æ–‡è®°å¿†</strong>ï¼šè®°å½•å¯¹è¯çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œä½¿å¤§è¯­è¨€æ¨¡å‹èƒ½ç†è§£å¤šè½®å¯¹è¯çš„é€»è¾‘ï¼ˆå¦‚è¿ç»­è¿½é—®æ—¶ï¼Œæ¨¡å‹èƒ½åŸºäºå†å²å¯¹è¯å›ç­”ï¼‰ã€‚</li>
<li><strong>LLM è°ƒç”¨</strong>ï¼šå°è£…å¯¹ â€œå¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰â€ çš„è°ƒç”¨é€»è¾‘ï¼Œå°† â€œ<code>ç³»ç»Ÿæç¤ºè¯ + ç”¨æˆ·å½“å‰é—®é¢˜ + æ£€ç´¢åˆ°çš„ç›¸å…³æ–‡æœ¬ + å¯¹è¯ä¸Šä¸‹æ–‡</code>â€ æ•´åˆä¸ºæç¤ºè¯ï¼Œè°ƒç”¨å¤§è¯­è¨€æ¨¡å‹ç”Ÿæˆå‡†ç¡®å›ç­”ï¼Œå¹¶å°†ç»“æœå›ä¼ è‡³å‰ç«¯ã€‚</li>
</ul>
</li>
<li>
<p><strong>åŸºç¡€æœåŠ¡å±‚ï¼š</strong></p>
<p>ä¸ºä¸Šå±‚ä¸šåŠ¡æä¾›æ ¸å¿ƒæŠ€æœ¯èƒ½åŠ›æ”¯æ’‘ï¼ŒåŒ…å«ä¸‰å¤§æ ¸å¿ƒç»„ä»¶ï¼š</p>
<ul>
<li><strong>åµŒå…¥æ¨¡å‹ï¼ˆEmbedding modelï¼‰</strong> ï¼šå°†è‡ªç„¶è¯­è¨€æ–‡æœ¬è½¬æ¢ä¸ºé«˜ç»´è¯­ä¹‰å‘é‡ï¼Œæ˜¯å®ç°æ–‡æœ¬ç›¸ä¼¼åº¦æ£€ç´¢çš„åŸºç¡€ã€‚</li>
<li><strong>å‘é‡æ•°æ®åº“ï¼ˆVector Databaseâ€Œï¼‰</strong> ï¼šä¸“ç”¨äºå­˜å‚¨å’Œå¿«é€Ÿæ£€ç´¢å‘é‡æ•°æ®çš„æ•°æ®åº“ï¼Œæ”¯æŒé«˜æ•ˆçš„ç›¸ä¼¼æ€§æ£€ç´¢ï¼ˆå¦‚ä½™å¼¦ç›¸ä¼¼åº¦è®¡ç®—ï¼‰ï¼Œæ˜¯ RAG æµç¨‹çš„æ ¸å¿ƒå­˜å‚¨è½½ä½“ã€‚</li>
<li><strong>é‡æ’æ¨¡å‹ï¼ˆReranker Modelï¼‰</strong> ï¼šå¯¹å‘é‡æ£€ç´¢å¾—åˆ°çš„ Top K å€™é€‰ç»“æœåšäºŒæ¬¡ç²¾å‡†æ’åºï¼Œæå‡ â€œç›¸å…³æ–‡æœ¬ç‰‡æ®µâ€ çš„åŒ¹é…ç²¾åº¦ï¼›</li>
<li><strong>å¤§è¯­è¨€æ¨¡å‹å±‚ï¼ˆLLMï¼‰</strong> ï¼šå³å¤§è¯­è¨€æ¨¡å‹ï¼ˆå¦‚ GPT5ã€Qwenã€ DeepSeekç­‰ï¼‰ï¼Œè´Ÿè´£åŸºäºç”¨æˆ·é—®é¢˜å’Œæ£€ç´¢åˆ°çš„æ–‡æœ¬ï¼Œç”Ÿæˆè‡ªç„¶è¯­è¨€å›ç­”ã€‚</li>
</ul>
</li>
</ul>
<h3 data-id="heading-4">4.4 æŠ€æœ¯é€‰å‹</h3>
<ul>
<li><strong>å‰ç«¯æ¡†æ¶</strong>ï¼šStreamlitï¼ˆå¿«é€Ÿæ„å»ºäº¤äº’å¼ Web åº”ç”¨ï¼‰ã€‚</li>
<li><strong>æ–‡æ¡£å¤„ç†</strong>ï¼šLangChainï¼ˆæ–‡æ¡£åŠ è½½ã€æ–‡æœ¬åˆ†å—ã€è®°å¿†ä¸Šä¸‹æ–‡ç®¡ç†ï¼‰ã€‚</li>
<li><strong>åµŒå…¥æ¨¡å‹</strong>ï¼šæ”¯æŒ Qwenã€OpenAIç­‰ç¬¬ä¸‰æ–¹æä¾›çš„åµŒå…¥æ¨¡å‹ï¼Œä»¥åŠæ”¯æŒæœ¬åœ°éƒ¨ç½²æ¨¡å‹<code>bge-small-zh-v1.5</code>ã€‚</li>
<li><strong>å‘é‡æ•°æ®åº“</strong>ï¼šChromaï¼ˆè½»é‡çº§åµŒå…¥å¼å‘é‡æ•°æ®åº“ï¼‰ã€‚</li>
<li><strong>å¤§è¯­è¨€æ¨¡å‹</strong>ï¼šæ”¯æŒ Qwenã€OpenAIã€DeepSeek ç­‰æ¨¡å‹ã€‚</li>
<li><strong>æ–‡æ¡£å¤„ç†</strong>ï¼špypdfï¼ˆPDF è§£æï¼‰ã€docx2txtï¼ˆDOCX è§£æï¼‰</li>
<li><strong>ç¯å¢ƒç®¡ç†</strong>ï¼špython-dotenvï¼ˆç¯å¢ƒå˜é‡ç®¡ç†ï¼‰ã€‚</li>
<li><strong>å¼€å‘è¯­è¨€</strong>ï¼šPython 3.8+ã€‚</li>
</ul>
<h3 data-id="heading-5">4.5 ä»£ç å®ç°</h3>
<h4 data-id="heading-6">4.5.1 é¡¹ç›®ç»“æ„æ­å»º</h4>
<p>é¡¹ç›®å®Œæˆåï¼Œç›®å½•ç»“æ„å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">simple_rag_assistant/
â”œâ”€â”€ .<span class="hljs-built_in">env</span> Â  Â  Â  Â  Â  Â  Â  Â   <span class="hljs-comment"># ç¯å¢ƒå˜é‡é…ç½®</span>
â”œâ”€â”€ requirements.txt Â  Â   <span class="hljs-comment"># ä¾èµ–åˆ—è¡¨</span>
â”œâ”€â”€ main.py Â  Â  Â  Â  Â  Â  <span class="hljs-comment"># ä¸»ç¨‹åºå…¥å£ï¼ˆStreamlitç•Œé¢ï¼‰</span>
â”œâ”€â”€ models/
â”‚ Â  â”œâ”€â”€ models_data/                 Â  <span class="hljs-comment"># æœ¬åœ°åµŒå…¥æ¨¡å‹æ–‡ä»¶</span>
â”‚ Â  â”œâ”€â”€ custom_dashscope_embedding.py  <span class="hljs-comment"># è‡ªå®šä¹‰åƒé—®åµŒå…¥æ¨¡å‹é€‚é…ï¼ˆè§£å†³æ‰¹é‡å¤„ç†å¤§å°é™åˆ¶é—®é¢˜ï¼‰</span>
â”‚ Â  â”œâ”€â”€ langchain_embedding.py Â  Â  Â  Â  <span class="hljs-comment"># åµŒå…¥æ¨¡å‹è°ƒç”¨</span>
â”‚ Â  â””â”€â”€ langchain_llm.py Â  Â  Â  Â  Â  Â  Â  <span class="hljs-comment"># å¤§è¯­è¨€æ¨¡å‹è°ƒç”¨</span>
â”‚ Â  â””â”€â”€ reranker_model.py Â  Â  Â  Â  Â  Â  Â  <span class="hljs-comment"># é‡æ’æ¨¡å‹è°ƒç”¨</span>
â””â”€â”€ services/
 Â   â””â”€â”€ rag_service_stream.py Â  Â  Â  Â   <span class="hljs-comment"># RAGæ ¸å¿ƒæœåŠ¡</span>
</code></pre>
<h4 data-id="heading-7">4.5.2 ç¯å¢ƒå‡†å¤‡</h4>
<h5 data-id="heading-8">ä¸€ã€é…ç½®Conda è™šæ‹Ÿç¯å¢ƒï¼ˆå®‰è£… Condaï¼Œè‹¥æœªå®‰è£…ï¼‰</h5>
<ul>
<li>
<p>ä¸‹è½½åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.conda.io%2Fen%2Flatest%2Fminiconda.html" target="_blank" title="https://docs.conda.io/en/latest/miniconda.html" ref="nofollow noopener noreferrer">docs.conda.io/en/latest/mâ€¦</a>ï¼ˆconda è½»é‡åŒ–ï¼Œæ¨èï¼‰</p>
</li>
<li>
<p>å®‰è£…æµç¨‹ï¼š</p>
<ul>
<li>Windowsï¼šåŒå‡»å®‰è£…åŒ…ï¼Œå‹¾é€‰ "Add Miniconda3 to PATH"ï¼ˆæ–¹ä¾¿å‘½ä»¤è¡Œè°ƒç”¨ï¼‰</li>
<li>Mac/Linuxï¼šæ‰§è¡Œå®‰è£…è„šæœ¬ï¼ŒæŒ‰æç¤ºå®Œæˆï¼ˆé»˜è®¤ä¼šæ·»åŠ ç¯å¢ƒå˜é‡ï¼‰</li>
</ul>
</li>
<li>
<p>éªŒè¯å®‰è£…ï¼šæ‰“å¼€ç»ˆç«¯ / å‘½ä»¤æç¤ºç¬¦ï¼Œè¾“å…¥<code>conda --version</code>ï¼Œæ˜¾ç¤ºç‰ˆæœ¬å·åˆ™æˆåŠŸ</p>
</li>
</ul>
<h5 data-id="heading-9">äºŒã€åˆ›å»ºå¹¶æ¿€æ´» Conda è™šæ‹Ÿç¯å¢ƒ</h5>
<ol start="0">
<li>
<p>æ‰“å¼€ç»ˆç«¯ / å‘½ä»¤æç¤ºç¬¦ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤åˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼ˆPython ç‰ˆæœ¬æŒ‡å®š 3.11ï¼‰ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># åˆ›å»ºåä¸ºrag-envçš„è™šæ‹Ÿç¯å¢ƒ(åç§°å¯éšæ„)ï¼ŒæŒ‡å®šPython 3.11</span>
conda create -n rag-env <span class="hljs-attr">python</span>=<span class="hljs-number">3.11</span>
</code></pre>
<p>è¿‡ç¨‹ä¸­ä¼šæç¤ºå®‰è£…ä¾èµ–ï¼Œè¾“å…¥<code>y</code>ç¡®è®¤ã€‚</p>
</li>
<li>
<p>æ¿€æ´»è™šæ‹Ÿç¯å¢ƒï¼š</p>
<ul>
<li>
<p>Windowsï¼ˆå‘½ä»¤æç¤ºç¬¦ï¼‰ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">conda activate rag-env <span class="hljs-comment"># è‹¥æ‰§è¡Œä¸äº†ï¼Œå°è¯•ï¼šconda.bat activate rag-env</span>
</code></pre>
</li>
<li>
<p>Mac/Linuxï¼š</p>
<pre><code class="hljs">conda activate rag-env
</code></pre>
</li>
</ul>
<p>æ¿€æ´»æˆåŠŸåï¼Œç»ˆç«¯å‰ç¼€ä¼šæ˜¾ç¤º<code>(rag-env)</code></p>
</li>
<li>
<p>ï¼ˆå¯é€‰ï¼‰é…ç½® Conda é•œåƒæºï¼ˆåŠ é€Ÿä¾èµ–å®‰è£…ï¼Œå›½å†…ç”¨æˆ·æ¨èï¼‰ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino"># æ·»åŠ æ¸…åé•œåƒæº
conda config --add channels https:<span class="hljs-comment">//mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free/</span>
conda config --add channels https:<span class="hljs-comment">//mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/main/</span>
config --set show_channel_urls yes
</code></pre>
</li>
</ol>
<h5 data-id="heading-10">ä¸‰ã€å®‰è£…é¡¹ç›®ä¾èµ–</h5>
<ol start="0">
<li>
<p>åˆ›å»ºé¡¹ç›®æ–‡ä»¶å¤¹å¹¶è¿›å…¥ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åˆ›å»ºæ–‡ä»¶å¤¹</span>
<span class="hljs-built_in">mkdir</span> simple_rag_assistant &amp;&amp; <span class="hljs-built_in">cd</span> simple_rag_assistant
</code></pre>
</li>
<li>
<p>åˆ›å»º<code>requirements.txt</code>æ–‡ä»¶ï¼Œæ·»åŠ ä¾èµ–åŒ…å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">streamlit</span>==<span class="hljs-number">1.46</span>.<span class="hljs-number">0</span>
<span class="hljs-attr">langchain</span>==<span class="hljs-number">0.3</span>.<span class="hljs-number">26</span>
<span class="hljs-attr">langchain-chroma</span>==<span class="hljs-number">0.2</span>.<span class="hljs-number">4</span>
<span class="hljs-attr">langchain-community</span>==<span class="hljs-number">0.3</span>.<span class="hljs-number">27</span>
<span class="hljs-attr">langchain-core</span>==<span class="hljs-number">0.3</span>.<span class="hljs-number">66</span>
<span class="hljs-attr">langchain-deepseek</span>==<span class="hljs-number">0.1</span>.<span class="hljs-number">3</span>
<span class="hljs-attr">langchain-openai</span>==<span class="hljs-number">0.3</span>.<span class="hljs-number">19</span>
<span class="hljs-attr">python-dotenv</span>==<span class="hljs-number">1.1</span>.<span class="hljs-number">0</span>
<span class="hljs-attr">pypdf</span>==<span class="hljs-number">5.6</span>.<span class="hljs-number">1</span>
<span class="hljs-attr">dashscope</span>==<span class="hljs-number">1.23</span>.<span class="hljs-number">5</span>
<span class="hljs-attr">tenacity</span>==<span class="hljs-number">9.1</span>.<span class="hljs-number">2</span>
<span class="hljs-attr">sentence-transformers</span>==<span class="hljs-number">5.1</span>.<span class="hljs-number">2</span>  <span class="hljs-comment"># HuggingFaceåµŒå…¥æ¨¡å‹ä¾èµ–</span>
</code></pre>
</li>
<li>
<p>ç”¨ pip å®‰è£…ä¾èµ–ï¼ˆConda ç¯å¢ƒä¸­å·²è‡ªå¸¦ pipï¼Œæ— éœ€é¢å¤–é…ç½®ï¼‰ï¼š</p>
<pre><code class="hljs">pip install -r requirements.txt
</code></pre>
<p>è‹¥å®‰è£…ç¼“æ…¢ï¼Œä¹Ÿå¯ä¸´æ—¶ä½¿ç”¨ä¸­ç§‘å¤§é•œåƒæˆ–æ¸…å pip é•œåƒå®‰è£…ï¼ˆè¦æ£€æŸ¥ä¸‹ï¼Œä¸ç¡®å®šæ˜¯å¦å¯ç”¨ï¼‰ï¼š</p>
<pre><code class="hljs language-ruby" lang="ruby"><span class="hljs-comment"># 1. é˜¿é‡Œäº‘ï¼ˆç¨³å®šï¼Œå›½å†…é¦–é€‰ï¼‰</span>
pip install -r requirements.txt -i <span class="hljs-symbol">https:</span>/<span class="hljs-regexp">/mirrors.aliyun.com/pypi</span><span class="hljs-regexp">/simple/</span>
<span class="hljs-comment"># 2. æ¸…åå¤§å­¦ï¼ˆå­¦æœ¯é•œåƒï¼ŒåŒ…å…¨æ›´æ–°å¿«ï¼‰</span>
<span class="hljs-comment"># pip install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple/</span>
<span class="hljs-comment"># 3. è…¾è®¯äº‘ï¼ˆä¼ä¸šçº§é•œåƒï¼Œé€Ÿåº¦ç¨³å®šï¼‰</span>
<span class="hljs-comment"># pip install -r requirements.txt -i https://mirrors.cloud.tencent.com/pypi/simple/</span>
</code></pre>
</li>
</ol>
<h5 data-id="heading-11">å››ã€é…ç½®ç¯å¢ƒå˜é‡</h5>
<ol start="0">
<li>
<p>åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º<code>.env</code>æ–‡ä»¶ï¼ˆæ³¨æ„æ–‡ä»¶åå‰æœ‰å°æ•°ç‚¹ï¼‰ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># Qwenï¼ˆåƒé—®ï¼‰æ¨¡å‹é…ç½®ï¼ˆå¿…å¡«ï¼Œé»˜è®¤ä½¿ç”¨ï¼‰</span>
<span class="hljs-attr">QWEN_API_KEY</span>=ä½ çš„åƒé—®APIå¯†é’¥
<span class="hljs-attr">QWEN_BASE_URL</span>=ä½ çš„åƒé—®APIåŸºç¡€åœ°å€ï¼ˆå¦‚https://dashscope.aliyuncs.com/compatible-mode/v1ï¼‰

<span class="hljs-comment"># OpenAIæ¨¡å‹é…ç½®ï¼ˆå¯é€‰ï¼Œå¦‚éœ€åˆ‡æ¢ä½¿ç”¨ï¼‰</span>
<span class="hljs-attr">OPENAI_API_KEY</span>=ä½ çš„OpenAI APIå¯†é’¥
<span class="hljs-attr">OPENAI_BASE_URL</span>=ä½ çš„OpenAI APIåŸºç¡€åœ°å€

<span class="hljs-comment"># DeepSeekæ¨¡å‹é…ç½®ï¼ˆå¯é€‰ï¼Œå¦‚éœ€åˆ‡æ¢ä½¿ç”¨ï¼‰</span>
<span class="hljs-attr">DEEPSEEK_API_KEY</span>=ä½ çš„DeepSeek APIå¯†é’¥
<span class="hljs-attr">DEEPSEEK_BASE_URL</span>=ä½ çš„DeepSeek APIåŸºç¡€åœ°å€
</code></pre>
<p>è¯´æ˜ï¼š</p>
<ul>
<li>é»˜è®¤ä½¿ç”¨é€šä¹‰åƒé—®çš„å¤§è¯­è¨€æ¨¡å‹<code>qwen-plus</code>ä»¥åŠå‘é‡æ¨¡å‹<code>text-embedding-v4</code>ã€‚åƒé—® API å¯†é’¥è·å–ï¼šç™»å½•é˜¿é‡Œäº‘ç™¾ç‚¼å¤§æ¨¡å‹å¹³å°ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fdashscope.console.aliyun.com%2F" target="_blank" title="https://dashscope.console.aliyun.com/" ref="nofollow noopener noreferrer">dashscope.console.aliyun.com/</a>ï¼‰ç”³è¯·ï¼Œæ–°ç”¨æˆ·é»˜è®¤æœ‰100W tokençš„å…è´¹é¢åº¦ã€‚</li>
<li>å…¶å®ƒ API å¯†é’¥æ ¹æ®å®é™…ä½¿ç”¨éœ€æ±‚é…ç½®ï¼Œæ— éœ€ä½¿ç”¨åˆ™å¯ç•™ç©ºã€‚</li>
</ul>
</li>
</ol>
<h4 data-id="heading-12">4.5.3 æ ¸å¿ƒæ¨¡å—å®ç°</h4>
<h5 data-id="heading-13">1 è‡ªå®šä¹‰åµŒå…¥æ¨¡å‹é€‚é…ï¼ˆmodels/custom_dashscope_embedding.pyï¼‰</h5>
<p>è¯¥ç±»å®ç°åƒé—®åµŒå…¥æ¨¡å‹ä¸ LangChain çš„é€‚é…ï¼Œè´Ÿè´£å°†æ–‡æœ¬è½¬æ¢ä¸ºå‘é‡ã€‚</p>
<p>ç”±äºåœ¨ä½¿ç”¨å®˜æ–¹æä¾›çš„ç±»<code>from langchain_community.embeddings import DashScopeEmbeddings</code>è¿›è¡Œå‘é‡åŒ–æ—¶ï¼ŒæŠ¥é”™:<code>batch size is invalid,it should not be larger than 10.: input.contents</code>ã€‚è¯¥é”™è¯¯åŸå› æ˜¯<code>langchain_community</code> åŒ…ä¸­çš„çš„<code>DashScopeEmbeddings</code>ç±»åœ¨å¤„ç†æ–‡æ¡£æ—¶ï¼Œé»˜è®¤çš„æ‰¹é‡å¤§å°è¶…è¿‡äº† DashScope API çš„é™åˆ¶ã€‚æ•…é‡å†™äº†è¯¥ç±»ï¼Œè°ƒæ•´äº†é»˜è®¤BATCH_SIZEçš„å¤§å°ï¼Œä»¥è§£å†³æ‰¹é‡è¯·æ±‚è¶…é™é—®é¢˜ã€‚</p>
<p>åœ¨é¡¹ç›®ç›®å½•ä¸‹åˆ›å»º<code>models</code> æ–‡ä»¶å¤¹ï¼Œå¹¶åœ¨è¯¥æ–‡ä»¶å¤¹ä¸‹åˆ›å»º<code>custom_dashscope_embedding.py</code>æ–‡ä»¶ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> __future__ <span class="hljs-keyword">import</span> annotations

<span class="hljs-keyword">import</span> logging
<span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> (
    <span class="hljs-type">Any</span>,
    <span class="hljs-type">Callable</span>,
    <span class="hljs-type">Dict</span>,
    <span class="hljs-type">List</span>,
    <span class="hljs-type">Optional</span>,
)

<span class="hljs-keyword">from</span> langchain_core.embeddings <span class="hljs-keyword">import</span> Embeddings
<span class="hljs-keyword">from</span> langchain_core.utils <span class="hljs-keyword">import</span> get_from_dict_or_env
<span class="hljs-keyword">from</span> pydantic <span class="hljs-keyword">import</span> BaseModel, ConfigDict, model_validator
<span class="hljs-keyword">from</span> requests.exceptions <span class="hljs-keyword">import</span> HTTPError
<span class="hljs-keyword">from</span> tenacity <span class="hljs-keyword">import</span> (
    before_sleep_log,
    retry,
    retry_if_exception_type,
    stop_after_attempt,
    wait_exponential,
)

logger = logging.getLogger(__name__)

<span class="hljs-comment"># ä¸åŒæ¨¡å‹çš„æ‰¹é‡å¤„ç†å¤§å°</span>
BATCH_SIZE = {<span class="hljs-string">"text-embedding-v1"</span>: <span class="hljs-number">25</span>, <span class="hljs-string">"text-embedding-v2"</span>: <span class="hljs-number">25</span>, <span class="hljs-string">"text-embedding-v3"</span>: <span class="hljs-number">6</span>, <span class="hljs-string">"text-embedding-v4"</span>: <span class="hljs-number">6</span>}


<span class="hljs-keyword">def</span> <span class="hljs-title function_">_create_retry_decorator</span>(<span class="hljs-params">embeddings: DashScopeEmbeddings</span>) -&gt; <span class="hljs-type">Callable</span>[[<span class="hljs-type">Any</span>], <span class="hljs-type">Any</span>]:
    <span class="hljs-string">"""åˆ›å»ºé‡è¯•è£…é¥°å™¨ï¼Œå¤„ç†APIè°ƒç”¨å¤±è´¥çš„æƒ…å†µ"""</span>
    multiplier = <span class="hljs-number">1</span>
    min_seconds = <span class="hljs-number">1</span>  <span class="hljs-comment"># åˆå§‹é‡è¯•é—´éš”1ç§’</span>
    max_seconds = <span class="hljs-number">4</span>  <span class="hljs-comment"># æœ€å¤§é‡è¯•é—´éš”4ç§’</span>
    <span class="hljs-comment"># Wait 2^x * 1 second between each retry starting with</span>
    <span class="hljs-comment"># 1 seconds, then up to 4 seconds, then 4 seconds afterwards</span>
    <span class="hljs-keyword">return</span> retry(
        reraise=<span class="hljs-literal">True</span>,
        stop=stop_after_attempt(embeddings.max_retries),
        wait=wait_exponential(multiplier, <span class="hljs-built_in">min</span>=min_seconds, <span class="hljs-built_in">max</span>=max_seconds),
        retry=(retry_if_exception_type(HTTPError)),
        before_sleep=before_sleep_log(logger, logging.WARNING),
    )


<span class="hljs-keyword">def</span> <span class="hljs-title function_">embed_with_retry</span>(<span class="hljs-params">embeddings: DashScopeEmbeddings, **kwargs: <span class="hljs-type">Any</span></span>) -&gt; <span class="hljs-type">Any</span>:
    <span class="hljs-string">"""å¸¦é‡è¯•æœºåˆ¶çš„åµŒå…¥ç”Ÿæˆå‡½æ•°ï¼Œæ”¯æŒæ‰¹é‡å¤„ç†"""</span>
    retry_decorator = _create_retry_decorator(embeddings)

<span class="hljs-meta">    @retry_decorator</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_embed_with_retry</span>(<span class="hljs-params">**kwargs: <span class="hljs-type">Any</span></span>) -&gt; <span class="hljs-type">Any</span>:
        result = []
        i = <span class="hljs-number">0</span>
        input_data = kwargs[<span class="hljs-string">"input"</span>]
        input_len = <span class="hljs-built_in">len</span>(input_data) <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(input_data, <span class="hljs-built_in">list</span>) <span class="hljs-keyword">else</span> <span class="hljs-number">1</span>
        batch_size = BATCH_SIZE.get(kwargs[<span class="hljs-string">"model"</span>], <span class="hljs-number">6</span>) <span class="hljs-comment"># æŒ‰æ¨¡å‹è·å–æ‰¹é‡å¤§å°</span>

        <span class="hljs-comment"># æ‰¹é‡å¤„ç†è¾“å…¥ï¼Œé¿å…å•æ¬¡è¯·æ±‚è¶…å‡ºAPIé™åˆ¶</span>
        <span class="hljs-keyword">while</span> i &lt; input_len:
            kwargs[<span class="hljs-string">"input"</span>] = (
                input_data[i: i + batch_size]
                <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(input_data, <span class="hljs-built_in">list</span>)
                <span class="hljs-keyword">else</span> input_data
            )
            resp = embeddings.client.call(**kwargs)   <span class="hljs-comment"># è°ƒç”¨åµŒå…¥API</span>
            <span class="hljs-keyword">if</span> resp.status_code == <span class="hljs-number">200</span>:
                result += resp.output[<span class="hljs-string">"embeddings"</span>]  <span class="hljs-comment"># æå–åµŒå…¥ç»“æœ</span>
            <span class="hljs-keyword">elif</span> resp.status_code <span class="hljs-keyword">in</span> [<span class="hljs-number">400</span>, <span class="hljs-number">401</span>]:
                <span class="hljs-keyword">raise</span> ValueError(
                    <span class="hljs-string">f"status_code: <span class="hljs-subst">{resp.status_code}</span> \n "</span>
                    <span class="hljs-string">f"code: <span class="hljs-subst">{resp.code}</span> \n message: <span class="hljs-subst">{resp.message}</span>"</span>
                )
            <span class="hljs-keyword">else</span>:
                <span class="hljs-keyword">raise</span> HTTPError(
                    <span class="hljs-string">f"HTTP error occurred: status_code: <span class="hljs-subst">{resp.status_code}</span> \n "</span>
                    <span class="hljs-string">f"code: <span class="hljs-subst">{resp.code}</span> \n message: <span class="hljs-subst">{resp.message}</span>"</span>,
                    response=resp,
                )
            i += batch_size
        <span class="hljs-keyword">return</span> result

    <span class="hljs-keyword">return</span> _embed_with_retry(**kwargs)


<span class="hljs-keyword">class</span> <span class="hljs-title class_">DashScopeEmbeddings</span>(BaseModel, Embeddings):
    <span class="hljs-string">"""
    DashScopeåµŒå…¥æ¨¡å‹å°è£…ç±»ï¼Œé€‚é…LangChainæ¥å£ã€‚ä½¿ç”¨è¯¥æ¨¡å‹å‰ï¼Œæ‚¨éœ€è¦å…ˆå®‰è£… dashscope Python åŒ…ï¼Œå¹¶ä¸”ï¼š
    1.å°†æ‚¨çš„ API å¯†é’¥é…ç½®åˆ°ç¯å¢ƒå˜é‡ DASHSCOPE_API_KEY ä¸­ï¼›
    2.æˆ–è€…ï¼Œåœ¨æ„é€ å‡½æ•°ä¸­ä»¥å‘½åå‚æ•°çš„å½¢å¼ä¼ å…¥ API å¯†é’¥ã€‚
    """</span>

    client: <span class="hljs-type">Any</span> = <span class="hljs-literal">None</span>   <span class="hljs-comment"># åƒé—®åµŒå…¥APIå®¢æˆ·ç«¯</span>
    <span class="hljs-string">"""The DashScope client."""</span>
    model: <span class="hljs-built_in">str</span> = <span class="hljs-string">"text-embedding-v1"</span> <span class="hljs-comment"># é»˜è®¤ä½¿ç”¨çš„åƒé—®åµŒå…¥æ¨¡å‹</span>
    dashscope_api_key: <span class="hljs-type">Optional</span>[<span class="hljs-built_in">str</span>] = <span class="hljs-literal">None</span>
    max_retries: <span class="hljs-built_in">int</span> = <span class="hljs-number">5</span>   <span class="hljs-comment"># APIè°ƒç”¨æœ€å¤§é‡è¯•æ¬¡æ•°</span>
    <span class="hljs-string">"""Maximum number of retries to make when generating."""</span>

    model_config = ConfigDict(
        extra=<span class="hljs-string">"forbid"</span>,
    )

<span class="hljs-meta">    @model_validator(<span class="hljs-params">mode=<span class="hljs-string">"before"</span></span>)</span>
<span class="hljs-meta">    @classmethod</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">validate_environment</span>(<span class="hljs-params">cls, values: <span class="hljs-type">Dict</span></span>) -&gt; <span class="hljs-type">Any</span>:
        <span class="hljs-string">"""éªŒè¯ç¯å¢ƒé…ç½®ï¼Œåˆå§‹åŒ–åƒé—®å®¢æˆ·ç«¯"""</span>

        <span class="hljs-keyword">import</span> dashscope

        <span class="hljs-comment"># ä»ç¯å¢ƒå˜é‡æˆ–å‚æ•°ä¸­è·å–APIå¯†é’¥</span>
        values[<span class="hljs-string">"dashscope_api_key"</span>] = get_from_dict_or_env(
            values, <span class="hljs-string">"dashscope_api_key"</span>, <span class="hljs-string">"DASHSCOPE_API_KEY"</span>
        )
        dashscope.api_key = values[<span class="hljs-string">"dashscope_api_key"</span>]
        <span class="hljs-keyword">try</span>:
            <span class="hljs-keyword">import</span> dashscope
            <span class="hljs-comment"># åˆå§‹åŒ–åƒé—®æ–‡æœ¬åµŒå…¥å®¢æˆ·ç«¯</span>
            values[<span class="hljs-string">"client"</span>] = dashscope.TextEmbedding
        <span class="hljs-keyword">except</span> ImportError:
            <span class="hljs-keyword">raise</span> ImportError(
                <span class="hljs-string">"Could not import dashscope python package. "</span>
                <span class="hljs-string">"Please install it with `pip install dashscope`."</span>
            )
        <span class="hljs-keyword">return</span> values

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">embed_documents</span>(<span class="hljs-params">self, texts: <span class="hljs-type">List</span>[<span class="hljs-built_in">str</span>]</span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-type">List</span>[<span class="hljs-built_in">float</span>]]:
        <span class="hljs-string">"""
        ä¸ºæ–‡æ¡£æ–‡æœ¬ç”ŸæˆåµŒå…¥å‘é‡ï¼ˆæ‰¹é‡å¤„ç†ï¼‰

        Args:
            texts: The list of texts to embed.

        Returns:
            List of embeddings, one for each text.
        """</span>
        embeddings = embed_with_retry(
            self, <span class="hljs-built_in">input</span>=texts, text_type=<span class="hljs-string">"document"</span>, model=self.model
        )
        embedding_list = [item[<span class="hljs-string">"embedding"</span>] <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> embeddings]
        <span class="hljs-keyword">return</span> embedding_list

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">embed_query</span>(<span class="hljs-params">self, text: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-built_in">float</span>]:
        <span class="hljs-string">"""ä¸ºæŸ¥è¯¢æ–‡æœ¬ç”ŸæˆåµŒå…¥å‘é‡ï¼ˆå•ä¸ªæ–‡æœ¬ï¼‰.

        Args:
            text: The text to embed.

        Returns:
            Embedding for the text.
        """</span>
        embedding = embed_with_retry(
            self, <span class="hljs-built_in">input</span>=text, text_type=<span class="hljs-string">"query"</span>, model=self.model
        )[<span class="hljs-number">0</span>][<span class="hljs-string">"embedding"</span>]
        <span class="hljs-keyword">return</span> embedding
</code></pre>
<h5 data-id="heading-14">2 åµŒå…¥æ¨¡å‹è°ƒç”¨ï¼ˆmodels/langchain_embedding.pyï¼‰</h5>
<p>è¯¥æ–‡ä»¶ç»Ÿä¸€åˆå§‹åŒ–ä¸åŒæ¥æºçš„æ–‡æœ¬åµŒå…¥æ¨¡å‹ã€‚æ”¯æŒåƒé—®ï¼ˆQwenï¼‰ã€OpenAI å’Œæœ¬åœ° BGE æ¨¡å‹ï¼Œæ–¹ä¾¿å¼€å‘è€…æ ¹æ®éœ€æ±‚åˆ‡æ¢ï¼Œæ— éœ€ä¿®æ”¹æ ¸å¿ƒé€»è¾‘ã€‚</p>
<p>åœ¨<code>models</code>æ–‡ä»¶å¤¹ä¸‹åˆ›å»ºæ–‡ä»¶<code>langchain_embedding.py</code>ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># å¯¼å…¥å¿…è¦çš„Pythonåº“</span>
<span class="hljs-keyword">import</span> os  <span class="hljs-comment"># ç”¨äºå¤„ç†æ“ä½œç³»ç»Ÿç›¸å…³çš„åŠŸèƒ½</span>

<span class="hljs-keyword">from</span> dotenv <span class="hljs-keyword">import</span> load_dotenv

<span class="hljs-keyword">from</span> langchain_openai <span class="hljs-keyword">import</span> OpenAIEmbeddings
<span class="hljs-keyword">from</span> langchain_huggingface <span class="hljs-keyword">import</span> HuggingFaceEmbeddings
<span class="hljs-keyword">from</span> models.custom_dashscope_embedding <span class="hljs-keyword">import</span> DashScopeEmbeddings

<span class="hljs-comment"># åŠ è½½ç¯å¢ƒå˜é‡</span>
load_dotenv()

<span class="hljs-keyword">def</span> <span class="hljs-title function_">initialize_embedding_model</span>(<span class="hljs-params">provider: <span class="hljs-built_in">str</span> = <span class="hljs-string">"qwen"</span></span>):
    <span class="hljs-string">"""
        åˆå§‹åŒ–å¹¶è¿”å›æŒ‡å®šæä¾›å•†çš„åµŒå…¥æ¨¡å‹
        å‚æ•°:
            provider (str): åµŒå…¥æ¨¡å‹æä¾›å•†,æ”¯æŒ"openai"ã€"qwen"ã€"local_bge_smallâ€œ,é»˜è®¤ä¸ºqwen
        è¿”å›:
            embeddings: åˆå§‹åŒ–åçš„åµŒå…¥æ¨¡å‹å®ä¾‹
        """</span>
    <span class="hljs-comment"># åŠ è½½ç¯å¢ƒå˜é‡</span>
    <span class="hljs-keyword">if</span> provider.lower() == <span class="hljs-string">"openai"</span>:
        <span class="hljs-comment"># ä½¿ç”¨OpenAIçš„åµŒå…¥æ¨¡å‹</span>
        api_key = os.getenv(<span class="hljs-string">"OPENAI_API_KEY"</span>)
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> api_key:
            <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">"ç¼ºå°‘OPENAI_API_KEYç¯å¢ƒå˜é‡"</span>)

        base_url = os.getenv(<span class="hljs-string">"OPENAI_BASE_URL"</span>)
        <span class="hljs-keyword">if</span> base_url:
            <span class="hljs-keyword">return</span> OpenAIEmbeddings(
                openai_api_key=api_key,
                base_url=base_url,
                model=<span class="hljs-string">"text-embedding-ada-002"</span>
            )
        <span class="hljs-keyword">else</span>:
            <span class="hljs-keyword">return</span> OpenAIEmbeddings(
                openai_api_key=api_key,
                model=<span class="hljs-string">"text-embedding-ada-002"</span>
            )

    <span class="hljs-keyword">elif</span> provider.lower() == <span class="hljs-string">"qwen"</span>:
        <span class="hljs-comment"># ä½¿ç”¨åƒé—®çš„åµŒå…¥æ¨¡å‹</span>
        api_key = os.getenv(<span class="hljs-string">"QWEN_API_KEY"</span>)
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> api_key:
            <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">"ç¼ºå°‘QWEN_API_KEYç¯å¢ƒå˜é‡"</span>)

        base_url = os.getenv(<span class="hljs-string">"QWEN_BASE_URL"</span>)
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> base_url:
            <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">"ç¼ºå°‘QWEN_BASE_URLç¯å¢ƒå˜é‡"</span>)

        <span class="hljs-keyword">return</span> DashScopeEmbeddings(
            dashscope_api_key=api_key,
            model=<span class="hljs-string">"text-embedding-v4"</span>,  <span class="hljs-comment"># åƒé—®åµŒå…¥æ¨¡å‹åç§°ï¼Œæ ¹æ®å®é™…æƒ…å†µè°ƒæ•´</span>
        )

    <span class="hljs-keyword">elif</span> provider.lower() == <span class="hljs-string">"local_bge_small"</span>:
        <span class="hljs-comment"># BGE-small-zh-v1.5æ˜¯åŒ—äº¬æ™ºæºç ”ç©¶é™¢ï¼ˆBAAIï¼‰å¼€å‘çš„è½»é‡çº§ä¸­æ–‡æ–‡æœ¬åµŒå…¥æ¨¡å‹ï¼Œæ”¯æŒå°†æ–‡æœ¬è½¬æ¢ä¸ºé«˜ç»´å‘é‡ï¼Œé€‚ç”¨äºæ£€ç´¢ã€åˆ†ç±»ã€èšç±»ç­‰ä»»åŠ¡ï¼Œä¸”å¯¹èµ„æºå—é™åœºæ™¯å‹å¥½ã€‚</span>
        <span class="hljs-comment"># æ‰‹åŠ¨ä¸‹è½½å‘é‡æ¨¡å‹ï¼ŒæŒ‡å®šæœ¬åœ°æ–‡ä»¶å¤¹è·¯å¾„ï¼Œè‹¥ SDK è‡ªåŠ¨ä¸‹è½½ï¼Œç›´æ¥ç”¨æ¨¡å‹åã€‚</span>
        model_path = <span class="hljs-string">"./models_data/bge-small-zh-v1.5"</span>  <span class="hljs-comment"># æ‰‹åŠ¨ä¸‹è½½çš„æœ¬åœ°è·¯å¾„</span>
        <span class="hljs-comment"># æˆ– model_path = "BAAI/bge-small-zh-v1.5"ï¼ˆç›´æ¥ç”¨æ¨¡å‹åï¼Œé¦–æ¬¡ä½¿ç”¨æ—¶ï¼ŒSDK è‡ªåŠ¨ä¸‹è½½æ¨¡å‹æ–‡ä»¶ï¼‰</span>

        <span class="hljs-keyword">return</span> HuggingFaceEmbeddings(
            model_name=model_path,
            model_kwargs={<span class="hljs-string">'device'</span>: <span class="hljs-string">'cpu'</span>},  <span class="hljs-comment"># å¯æŒ‡å®š 'cuda' å¯ç”¨ GPU åŠ é€Ÿ</span>
            encode_kwargs={<span class="hljs-string">'normalize_embeddings'</span>: <span class="hljs-literal">True</span>}  <span class="hljs-comment"># æ˜¯å¦å¯¹è¾“å‡ºå‘é‡å½’ä¸€åŒ–ï¼ˆæ¨èç”¨äºç›¸ä¼¼åº¦è®¡ç®—ï¼‰</span>
        )

    <span class="hljs-keyword">else</span>:
        <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">f"ä¸æ”¯æŒçš„åµŒå…¥æ¨¡å‹æä¾›å•†: <span class="hljs-subst">{provider}</span>ã€‚è¯·é€‰æ‹©'openai'ã€'huggingface'æˆ–'qwen'"</span>)
</code></pre>
<p>æä¾›äº† 3 ç§åµŒå…¥æ¨¡å‹ï¼Œåªéœ€é€‰æ‹©å…¶ä¸­ä¸€ç›´å³å¯ï¼Œæ¯ç§æ¨¡å‹çš„åˆå§‹åŒ–é€»è¾‘å¦‚ä¸‹ï¼š</p>
<ul>
<li>
<p><strong><code>qwen</code>ï¼ˆåƒé—®ï¼‰ï¼š</strong> é»˜è®¤ï¼Œè¿™é‡Œä½¿ç”¨çš„æ˜¯åƒé—®å‘é‡æ¨¡å‹<code>text-embedding-v4</code>ã€‚å¿…é¡»é…ç½®<code>QWEN_API_KEY</code>å’Œ<code>QWEN_BASE_URL</code>ä¸¤ä¸ªç¯å¢ƒå˜é‡ã€‚</p>
</li>
<li>
<p><strong>openaiï¼š</strong> éœ€åœ¨ç¯å¢ƒå˜é‡ä¸­é…ç½®<code>OPENAI_API_KEY</code>ï¼Œè‹¥ä½¿ç”¨ç¬¬ä¸‰æ–¹ä»£ç†è¿˜éœ€é…ç½®<code>OPENAI_BASE_URL</code>ï¼ˆè‡ªå®šä¹‰æ¥å£åœ°å€ï¼‰ã€‚</p>
</li>
<li>
<p><strong>local_bge_smallï¼š</strong> æœ¬åœ°åŠ è½½å‘é‡æ¨¡å‹ï¼Œä¸è®¿é—®ç¬¬ä¸‰æ–¹æä¾›çš„æ¨¡å‹æœåŠ¡ã€‚è¿™é‡Œä½¿ç”¨çš„æ˜¯åŒ—äº¬æ™ºæºç ”ç©¶é™¢ï¼ˆBAAIï¼‰å¼€å‘çš„è½»é‡çº§ä¸­æ–‡æ–‡æœ¬åµŒå…¥æ¨¡å‹<code>bge-small-zh-v1.5</code>ï¼Œå¯¹èµ„æºè¦æ±‚ä¸é«˜ï¼Œé€‚åˆèµ„æºå—é™åœºæ™¯ã€‚</p>
<p>è‹¥ä½¿ç”¨æœ¬åœ°åŠ è½½å‘é‡æ¨¡å‹ï¼Œæ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š</p>
<ol start="0">
<li>
<p>é¦–å…ˆå®‰è£…å¿…è¦çš„ Python åº“ã€‚</p>
<pre><code class="hljs language-css" lang="css">pip install transformers sentence-transformers torch <span class="hljs-attr">--upgrade</span>
</code></pre>
</li>
<li>
<p>ä¸‹è½½å‘é‡æ¨¡å‹æ–‡ä»¶ï¼Œä¸¤ç§æ–¹å¼ä¸‹è½½ï¼š</p>
<ul>
<li>
<p>æ‰‹åŠ¨ä¸‹è½½ï¼šå¯ä»<a href="https://link.juejin.cn?target=https%3A%2F%2Fhuggingface.co%2FBAAI%2Fbge-small-zh-v1.5" target="_blank" title="https://huggingface.co/BAAI/bge-small-zh-v1.5" ref="nofollow noopener noreferrer">HuggingFace</a> æˆ– <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.modelscope.cn%2Fmodels%2FBAAI%2Fbge-small-zh-v1.5%2Ffiles" target="_blank" title="https://www.modelscope.cn/models/BAAI/bge-small-zh-v1.5/files" ref="nofollow noopener noreferrer">é­”å¡”åœ°å€</a>ä¸‹è½½æ¨¡å‹æ–‡ä»¶ï¼Œæ”¾åˆ°å½“å‰ç›®å½•çš„<code>./models_data/bge-small-zh-v1.5</code>è·¯å¾„ä¸‹ã€‚ä¸‹è½½æ–‡ä»¶ï¼š<code>config.json</code>ï¼ˆæ¨¡å‹é…ç½®ï¼‰ã€<code>model.safetensors</code>ï¼ˆæ¨¡å‹æƒé‡ï¼‰ã€<code>tokenizer.json</code>ã€<code>tokenizer_config.json</code>ã€<code>vocab.txt</code>ï¼ˆåˆ†è¯å™¨æ–‡ä»¶ï¼‰ã€‚è®¾ç½®model_path ä¸ºä¸‹è½½çš„æœ¬åœ°è·¯å¾„åœ°å€ã€‚</p>
</li>
<li>
<p>è‡ªåŠ¨ä¸‹è½½ï¼šè®¾ç½®<code>model_path</code>ä¸º<code>"BAAI/bge-small-zh-v1.5"</code>ï¼Œé¦–æ¬¡è¿è¡Œæ—¶ SDK ä¼šè‡ªåŠ¨ä¸‹è½½ï¼ˆéœ€è”ç½‘ï¼‰ã€‚ä¸‹è½½é»˜è®¤å­˜å‚¨è·¯å¾„å¦‚ä¸‹ï¼š</p>
<p>Windowsï¼š<code>`C:\Users\ç”¨æˆ·å.cache\huggingface\transformers</code>ï¼‰`</p>
<p>Linux/Macï¼š<code>~/.cache/huggingface/transformers</code></p>
<p>ä¸‹è½½å®Œæˆåï¼Œåç»­è¿è¡Œä»£ç ä¼šç›´æ¥ä»ç¼“å­˜åŠ è½½ï¼Œæ— éœ€é‡å¤ä¸‹è½½ã€‚</p>
</li>
</ul>
</li>
<li>
<p>åŠ è½½æ¨¡å‹ï¼šé€šè¿‡ LangChain åº“ä¸­<code>HuggingFaceEmbeddings</code>åŠ è½½ã€‚</p>
<ul>
<li>é…ç½®ä¸º CPU è¿è¡Œï¼ˆå¯æ”¹<code>cuda</code>ç”¨ GPUï¼‰ï¼›</li>
<li>å¯¹è¾“å‡ºå‘é‡å½’ä¸€åŒ–ï¼ˆæ–¹ä¾¿åç»­ç›¸ä¼¼åº¦è®¡ç®—ï¼‰ã€‚</li>
</ul>
</li>
</ol>
</li>
</ul>
<p><strong>æµ‹è¯•åµŒå…¥æ¨¡å‹</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_embedding_model</span>(<span class="hljs-params">provider: <span class="hljs-built_in">str</span> = <span class="hljs-string">"openai"</span></span>):
    <span class="hljs-string">"""æµ‹è¯•åµŒå…¥æ¨¡å‹çš„åŸºæœ¬åŠŸèƒ½"""</span>
    <span class="hljs-keyword">try</span>:
        <span class="hljs-comment"># åˆå§‹åŒ–åµŒå…¥æ¨¡å‹</span>
        embeddings = initialize_embedding_model(provider)

        <span class="hljs-comment"># æµ‹è¯•æ–‡æœ¬</span>
        test_text = <span class="hljs-string">"è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•æ–‡æœ¬ï¼Œç”¨äºéªŒè¯åµŒå…¥æ¨¡å‹çš„åŠŸèƒ½ã€‚"</span>

        <span class="hljs-comment"># ç”ŸæˆåµŒå…¥å‘é‡</span>
        vector = embeddings.embed_query(test_text)

        <span class="hljs-comment"># æ‰“å°åŸºæœ¬ä¿¡æ¯</span>
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ä½¿ç”¨ <span class="hljs-subst">{provider.upper()}</span> åµŒå…¥æ¨¡å‹ç”Ÿæˆå‘é‡æˆåŠŸ"</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å‘é‡ç»´åº¦: <span class="hljs-subst">{<span class="hljs-built_in">len</span>(vector)}</span>"</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å‘é‡å‰10ä¸ªå…ƒç´ : <span class="hljs-subst">{vector[:<span class="hljs-number">10</span>]}</span>"</span>)

        <span class="hljs-keyword">return</span> vector

    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æµ‹è¯•å¤±è´¥: <span class="hljs-subst">{<span class="hljs-built_in">str</span>(e)}</span>"</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>


<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    <span class="hljs-comment"># æµ‹è¯•åƒé—®æ¨¡å‹</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\n=== æµ‹è¯•åƒé—®åµŒå…¥æ¨¡å‹ ==="</span>)
    test_embedding_model(<span class="hljs-string">"qwen"</span>)

    <span class="hljs-comment"># æµ‹è¯•OpenAIæ¨¡å‹</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"=== æµ‹è¯•bge-small-zh-v1.5åµŒå…¥æ¨¡å‹ ==="</span>)
    test_embedding_model(<span class="hljs-string">"local_bge_small"</span>)
</code></pre>
<p>è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p>
<p><img src="" alt="image-20251105145212047" loading="lazy"/></p>
<h5 data-id="heading-15">4 LLMæ¨¡å‹è°ƒç”¨ï¼ˆlangchain_llm.pyï¼‰</h5>
<p>åŸºäº LangChain æ¡†æ¶ï¼Œå°è£…LLMçš„è°ƒç”¨ï¼Œå®ç°ä»ç¯å¢ƒå˜é‡è¯»å–é…ç½®ã€æ ¡éªŒå‚æ•°ï¼Œè¿”å›æ¨¡å‹èŠå¤©å®ä¾‹<code>ChatOpenAI</code>ã€‚å¯é€‚é…å…¼å®¹openAI æ¥å£è§„èŒƒçš„æ¨¡å‹æœåŠ¡ï¼Œå¦‚åƒé—®(Qwen)ã€DeepSeekã€OpenAIã€æ™ºè°±(Zhipu)ç­‰ï¼Œå¯é…ç½®MODEL_CONFIG_MAPçµæ´»æ‰©å±•ï¼Œé»˜è®¤ä½¿ç”¨åƒé—®æ¨¡å‹ã€‚</p>
<p>åœ¨<code>models</code>æ–‡ä»¶å¤¹ä¸‹åˆ›å»ºæ–‡ä»¶<code>langchain_llm.py</code>ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># å¯¼å…¥å¿…è¦çš„Pythonåº“</span>
<span class="hljs-keyword">import</span> os  <span class="hljs-comment"># ç”¨äºå¤„ç†æ“ä½œç³»ç»Ÿç›¸å…³çš„åŠŸèƒ½</span>
<span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">Dict</span>, <span class="hljs-type">Optional</span>

<span class="hljs-keyword">from</span> dotenv <span class="hljs-keyword">import</span> load_dotenv
<span class="hljs-keyword">from</span> langchain.chat_models <span class="hljs-keyword">import</span> init_chat_model
<span class="hljs-keyword">from</span> langchain_core.language_models <span class="hljs-keyword">import</span> BaseChatModel
<span class="hljs-keyword">from</span> langchain_openai <span class="hljs-keyword">import</span> ChatOpenAI

<span class="hljs-comment"># åŠ è½½ç¯å¢ƒå˜é‡</span>
load_dotenv()

<span class="hljs-comment"># æ¨¡å‹é…ç½®å¸¸é‡ï¼ˆé›†ä¸­ç®¡ç†ï¼Œä¾¿äºç»´æŠ¤ï¼‰</span>
MODEL_CONFIG_MAP: <span class="hljs-type">Dict</span>[<span class="hljs-built_in">str</span>, <span class="hljs-type">Dict</span>[<span class="hljs-built_in">str</span>, <span class="hljs-built_in">str</span>]] = {
    <span class="hljs-string">"qwen"</span>: {
        <span class="hljs-string">"api_key_env"</span>: <span class="hljs-string">"QWEN_API_KEY"</span>,
        <span class="hljs-string">"base_url_env"</span>: <span class="hljs-string">"QWEN_BASE_URL"</span>,
        <span class="hljs-string">"default_model"</span>: <span class="hljs-string">"qwen-plus"</span>
    },
    <span class="hljs-string">"deepseek"</span>: {
        <span class="hljs-string">"api_key_env"</span>: <span class="hljs-string">"DEEPSEEK_API_KEY"</span>,
        <span class="hljs-string">"base_url_env"</span>: <span class="hljs-string">"DEEPSEEK_BASE_URL"</span>,
        <span class="hljs-string">"default_model"</span>: <span class="hljs-string">"deepseek-chat"</span>
    },
    <span class="hljs-string">"openai"</span>: {
        <span class="hljs-string">"api_key_env"</span>: <span class="hljs-string">"OPENAI_API_KEY"</span>,
        <span class="hljs-string">"base_url_env"</span>: <span class="hljs-string">"OPENAI_BASE_URL"</span>,
        <span class="hljs-string">"default_model"</span>: <span class="hljs-string">"gpt-4-turbo"</span>
    },
    <span class="hljs-string">"zhipu"</span>: {
        <span class="hljs-string">"api_key_env"</span>: <span class="hljs-string">"ZHIPU_API_KEY"</span>,
        <span class="hljs-string">"base_url_env"</span>: <span class="hljs-string">"ZHIPU_BASE_URL"</span>,
        <span class="hljs-string">"default_model"</span>: <span class="hljs-string">"glm-4"</span>
    }
}


<span class="hljs-keyword">def</span> <span class="hljs-title function_">_get_env_var</span>(<span class="hljs-params">env_name: <span class="hljs-built_in">str</span>, model_type: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">str</span>:
    <span class="hljs-string">"""
    å®‰å…¨è·å–å¹¶æ ¡éªŒç¯å¢ƒå˜é‡ï¼Œæä¾›é”™è¯¯æç¤ºã€‚
    Args:
        env_name: å¾…è¯»å–çš„ç¯å¢ƒå˜é‡åç§°ï¼ˆå¦‚QWEN_API_KEYï¼‰
        model_type: æ¨¡å‹ç±»å‹æ ‡è¯†ï¼ˆå¦‚qwen/deepseekï¼‰ï¼Œç”¨äºé”™è¯¯æç¤ºä¸Šä¸‹æ–‡

    Returns:
        str: éç©ºçš„ç¯å¢ƒå˜é‡å€¼

    Raises:
        ValueError: å½“ç¯å¢ƒå˜é‡æœªè®¾ç½®æˆ–å€¼ä¸ºç©ºæ—¶æŠ›å‡ºï¼ŒåŒ…å«æ˜ç¡®çš„é…ç½®æŒ‡å¼•
    """</span>
    value = os.getenv(env_name)
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> value:
        <span class="hljs-keyword">raise</span> ValueError(
            <span class="hljs-string">f"[<span class="hljs-subst">{model_type.upper()}</span>] ç¼ºå°‘å¿…è¦çš„ç¯å¢ƒå˜é‡ï¼š<span class="hljs-subst">{env_name}</span>\n"</span>
            <span class="hljs-string">f"è¯·åœ¨.envæ–‡ä»¶ä¸­é…ç½® <span class="hljs-subst">{env_name}</span>=ä½ çš„APIå¯†é’¥/åŸºç¡€åœ°å€"</span>
        )
    <span class="hljs-keyword">return</span> value


<span class="hljs-keyword">def</span> <span class="hljs-title function_">langchain_llm</span>(<span class="hljs-params">
        model_type: <span class="hljs-built_in">str</span> = <span class="hljs-string">"qwen"</span>,
        model: <span class="hljs-type">Optional</span>[<span class="hljs-built_in">str</span>] = <span class="hljs-literal">None</span>,
        temperature: <span class="hljs-built_in">float</span> = <span class="hljs-number">0.0</span>,
        **kwargs
</span>) -&gt; BaseChatModel:
    <span class="hljs-string">"""
    ç»Ÿä¸€çš„LLMæ¨¡å‹åˆå§‹åŒ–å…¥å£å‡½æ•°ï¼Œé€‚é…æ‰€æœ‰å…¼å®¹OpenAIæ¥å£è§„èŒƒçš„æ¨¡å‹ã€‚
    å·²æ”¯æŒæ¨¡å‹ï¼šqwenï¼ˆé€šä¹‰åƒé—®ï¼‰/deepseek(æ·±åº¦æ±‚ç´¢)/openai(OpenAIå®˜æ–¹)/zhipu(æ™ºè°±GLMæ¨¡å‹)ï¼Œå¯é…ç½®MODEL_CONFIG_MAPæ‰©å±•ã€‚

    Args:
        model_type: æ¨¡å‹ç±»å‹æ ‡è¯†ï¼Œæ”¯æŒï¼šqwen/deepseek/openai/zhipu
        model: å…·æ¨¡å‹åç§°ï¼Œä¸ä¼ åˆ™ä½¿ç”¨é»˜è®¤å€¼
        temperature: ç”Ÿæˆæ¸©åº¦ç³»æ•°ï¼Œæ§åˆ¶è¾“å‡ºéšæœºæ€§ï¼ˆ0=å®Œå…¨ç¡®å®šï¼Œ1=é«˜åº¦éšæœºï¼‰ï¼Œé»˜è®¤0.0
        **kwargs: é€ä¼ å‚æ•°ï¼Œä¼šä¼ é€’ç»™åº•å±‚çš„init_chat_model/ChatOpenAIåˆå§‹åŒ–æ–¹æ³•
                  æ”¯æŒçš„å‚æ•°ç¤ºä¾‹ï¼šmax_tokens(ç”Ÿæˆæœ€å¤§é•¿åº¦)ã€timeout(è¶…æ—¶æ—¶é—´)ã€top_p(é‡‡æ ·é˜ˆå€¼)ç­‰

    Returns:
        BaseChatModel: åˆå§‹åŒ–å®Œæˆçš„LangChainèŠå¤©æ¨¡å‹å®ä¾‹ï¼Œå¯ç›´æ¥ç”¨äºå¯¹è¯ç”Ÿæˆ
    """</span>
    <span class="hljs-comment"># æ ¡éªŒæ¨¡å‹ç±»å‹æ˜¯å¦æ”¯æŒ</span>
    <span class="hljs-keyword">if</span> model_type <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> MODEL_CONFIG_MAP:
        <span class="hljs-keyword">raise</span> ValueError(
            <span class="hljs-string">f"ä¸æ”¯æŒçš„æ¨¡å‹ç±»å‹ï¼š<span class="hljs-subst">{model_type}</span>\n"</span>
            <span class="hljs-string">f"å½“å‰æ”¯æŒçš„ç±»å‹ï¼š<span class="hljs-subst">{<span class="hljs-built_in">list</span>(MODEL_CONFIG_MAP.keys())}</span>"</span>
        )

    <span class="hljs-comment"># è·å–æ¨¡å‹é…ç½®</span>
    config = MODEL_CONFIG_MAP[model_type]
    model = model <span class="hljs-keyword">or</span> config[<span class="hljs-string">"default_model"</span>]

    <span class="hljs-comment"># è·å–ç¯å¢ƒå˜é‡</span>
    api_key = _get_env_var(config[<span class="hljs-string">"api_key_env"</span>], model_type)
    base_url = _get_env_var(config[<span class="hljs-string">"base_url_env"</span>], model_type)

    <span class="hljs-comment"># æ ¹æ®æ¨¡å‹ç±»å‹åˆå§‹åŒ–</span>
    <span class="hljs-keyword">if</span> model_type == <span class="hljs-string">"deepseek"</span>:
        <span class="hljs-comment"># DeepSeekä½¿ç”¨init_chat_modelåˆå§‹åŒ–</span>
        llm = init_chat_model(
            model=model,
            api_key=api_key,
            api_base=base_url,
            temperature=temperature,
            model_provider=<span class="hljs-string">"deepseek"</span>,
            **kwargs
        )
    <span class="hljs-keyword">else</span>:
        <span class="hljs-comment"># å…¶ä»–æ¨¡å‹ä½¿ç”¨ChatOpenAIï¼ˆå…¼å®¹OpenAIæ¥å£ï¼‰</span>
        llm = ChatOpenAI(
            model=model,
            api_key=api_key,
            openai_api_base=base_url,
            temperature=temperature,
            **kwargs
        )

    <span class="hljs-keyword">return</span> llm


<span class="hljs-keyword">def</span> <span class="hljs-title function_">langchain_qwen_llm</span>(<span class="hljs-params">model: <span class="hljs-built_in">str</span> = <span class="hljs-string">"qwen-plus"</span>, temperature: <span class="hljs-built_in">float</span> = <span class="hljs-number">0.0</span></span>) -&gt; BaseChatModel:
    <span class="hljs-string">"""åˆå§‹åŒ–åƒé—®èŠå¤©æ¨¡å‹"""</span>
    <span class="hljs-keyword">return</span> langchain_llm(<span class="hljs-string">"qwen"</span>, model=model, temperature=temperature)


<span class="hljs-keyword">def</span> <span class="hljs-title function_">langchain_deepseek_llm</span>(<span class="hljs-params">model: <span class="hljs-built_in">str</span> = <span class="hljs-string">"deepseek-chat"</span>, temperature: <span class="hljs-built_in">float</span> = <span class="hljs-number">0.0</span></span>) -&gt; BaseChatModel:
    <span class="hljs-string">"""åˆå§‹åŒ–DeepSeekèŠå¤©æ¨¡å‹"""</span>
    <span class="hljs-keyword">return</span> langchain_llm(<span class="hljs-string">"deepseek"</span>, model=model, temperature=temperature)


<span class="hljs-keyword">def</span> <span class="hljs-title function_">langchain_openai_llm</span>(<span class="hljs-params">model: <span class="hljs-built_in">str</span> = <span class="hljs-string">"gpt-4-turbo"</span>, temperature: <span class="hljs-built_in">float</span> = <span class="hljs-number">0.0</span></span>) -&gt; BaseChatModel:
    <span class="hljs-string">"""åˆå§‹åŒ–OpenAIèŠå¤©æ¨¡å‹"""</span>
    <span class="hljs-keyword">return</span> langchain_llm(<span class="hljs-string">"openai"</span>, model=model, temperature=temperature)


<span class="hljs-comment"># æ–°å¢æ™ºè°±åˆå§‹åŒ–å‡½æ•°ï¼ˆæ‰©å±•æ”¯æŒï¼‰</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">langchain_zhipu_llm</span>(<span class="hljs-params">model: <span class="hljs-built_in">str</span> = <span class="hljs-string">"glm-4"</span>, temperature: <span class="hljs-built_in">float</span> = <span class="hljs-number">0.0</span></span>) -&gt; BaseChatModel:
    <span class="hljs-string">"""åˆå§‹åŒ–æ™ºè°±èŠå¤©æ¨¡å‹"""</span>
    <span class="hljs-keyword">return</span> langchain_llm(<span class="hljs-string">"zhipu"</span>, model=model, temperature=temperature)
</code></pre>
<p><strong>æµ‹è¯•LLMæ¨¡å‹</strong></p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">if</span> __name__ <span class="hljs-operator">==</span> <span class="hljs-string">"__main__"</span>:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"="</span> <span class="hljs-operator">*</span> <span class="hljs-number">50</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"å¼€å§‹æµ‹è¯•æ¨¡å‹åˆå§‹åŒ–ä¸è°ƒç”¨"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"="</span> <span class="hljs-operator">*</span> <span class="hljs-number">50</span> <span class="hljs-operator">+</span> <span class="hljs-string">"<span class="hljs-subst">\n</span>"</span>)

    user_query <span class="hljs-operator">=</span> <span class="hljs-string">"è¯·ç”¨3å¥è¯ä»‹ç»ä¸‹è‡ªå·±"</span>
    <span class="hljs-built_in">print</span>(f<span class="hljs-string">"ç”¨æˆ·æé—®ï¼š{user_query}"</span>)

    # <span class="hljs-number">1</span>. æµ‹è¯•åƒé—®æ¨¡å‹
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"ã€æµ‹è¯•åƒé—®æ¨¡å‹...ã€‘"</span>)
    qwen_llm <span class="hljs-operator">=</span> initialize_qwen_llm(model<span class="hljs-operator">=</span><span class="hljs-string">"qwen-plus"</span>, temperature<span class="hljs-operator">=</span><span class="hljs-number">0</span>)
    response <span class="hljs-operator">=</span> qwen_llm.invoke(user_query)
    <span class="hljs-built_in">print</span>(f<span class="hljs-string">"åƒé—®å“åº”ï¼š<span class="hljs-subst">\n</span>{response.content}<span class="hljs-subst">\n</span>"</span>)

    # <span class="hljs-number">2</span>. æµ‹è¯•<span class="hljs-type">DeepSeekæ¨¡å‹</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"ã€æµ‹è¯• DeepSeek æ¨¡å‹...ã€‘"</span>)
    deepseek_llm <span class="hljs-operator">=</span> initialize_deepseek_llm(<span class="hljs-string">"deepseek-chat"</span>, temperature<span class="hljs-operator">=</span><span class="hljs-number">0</span>)
    response <span class="hljs-operator">=</span> deepseek_llm.invoke(user_query)
    # ç¾åŒ–è¾“å‡ºå“åº”
    <span class="hljs-built_in">print</span>(f<span class="hljs-string">"DeepSeekå“åº”ï¼š<span class="hljs-subst">\n</span>{response.content}<span class="hljs-subst">\n</span>"</span>)

    # <span class="hljs-number">3</span>. æµ‹è¯•<span class="hljs-type">OpenAIæ¨¡å‹ï¼ˆä¿ç•™æ³¨é‡Šï¼Œéœ€å¯ç”¨æ—¶å–æ¶ˆæ³¨é‡Šå³å¯ï¼‰</span>
    # <span class="hljs-built_in">print</span>(<span class="hljs-string">"ã€æµ‹è¯• OpenAI æ¨¡å‹...ã€‘"</span>)
    # å–æ¶ˆä¸‹é¢<span class="hljs-number">2</span>è¡Œæ³¨é‡Šå³å¯å¯ç”¨<span class="hljs-type">OpenAIæµ‹è¯•</span>
    # openai_llm <span class="hljs-operator">=</span> initialize_openai_llm(model<span class="hljs-operator">=</span><span class="hljs-string">"gpt-5"</span>, temperature<span class="hljs-operator">=</span><span class="hljs-number">0.3</span>)
    # <span class="hljs-built_in">print</span>(<span class="hljs-string">"â„¹ï¸  è‹¥éœ€æµ‹è¯•OpenAIï¼Œå–æ¶ˆä»£ç ä¸­OpenAIç›¸å…³çš„æ³¨é‡Šå³å¯<span class="hljs-subst">\n</span>"</span>)
</code></pre>
<p>è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/499ae1bb2e26430bb802706e815c8ddf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bGF5b6u:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770803987&amp;x-signature=pelZFA9Glc29m0WVahhibwZgfQA%3D" alt="image-20251105152257506" loading="lazy"/></p>
<h5 data-id="heading-16">5 é‡æ’æ¨¡å‹è°ƒç”¨ï¼ˆreranker_model.pyï¼‰</h5>
<p>åˆå§‹åŒ–é‡æ’æ¨¡å‹ï¼Œç”¨äºå¯¹æ£€ç´¢é˜¶æ®µå¬å›çš„å€™é€‰æ–‡æ¡£è¿›è¡Œè¯­ä¹‰ç›¸å…³æ€§é‡æ’ï¼Œæå‡æ£€ç´¢ç²¾åº¦ã€‚</p>
<p>åœ¨<code>models</code>æ–‡ä»¶å¤¹ä¸‹åˆ›å»ºæ–‡ä»¶<code>reranker_model.py</code>ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> logging
<span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">List</span>,  <span class="hljs-type">Optional</span>

<span class="hljs-keyword">import</span> torch
<span class="hljs-keyword">from</span> langchain_core.documents <span class="hljs-keyword">import</span> Document
<span class="hljs-keyword">from</span> sentence_transformers <span class="hljs-keyword">import</span> CrossEncoder

<span class="hljs-comment"># é…ç½®æ—¥å¿—</span>
logging.basicConfig(
    level=logging.INFO,
    <span class="hljs-built_in">format</span>=<span class="hljs-string">"%(asctime)s - %(name)s - %(levelname)s - %(message)s"</span>
)
logger = logging.getLogger(__name__)


<span class="hljs-keyword">class</span> <span class="hljs-title class_">RerankerCrossModel</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">
            self,
            model_name_or_path: <span class="hljs-built_in">str</span> = <span class="hljs-string">"BAAI/bge-reranker-large"</span>,
            device: <span class="hljs-type">Optional</span>[<span class="hljs-built_in">str</span>] = <span class="hljs-literal">None</span>,
            batch_size: <span class="hljs-built_in">int</span> = <span class="hljs-number">16</span>
    </span>):
        <span class="hljs-string">"""
        åˆå§‹åŒ–é‡æ’å™¨ã€‚ç”¨äºå¯¹æ£€ç´¢é˜¶æ®µå¬å›çš„å€™é€‰æ–‡æ¡£è¿›è¡Œè¯­ä¹‰ç›¸å…³æ€§é‡æ’ï¼Œæå‡æ£€ç´¢ç²¾åº¦ã€‚
        é€‚é…éµå¾ª sentence-transformers çš„ CrossEncoder è§„èŒƒçš„æ¨¡å‹, å¦‚ms-marco-MiniLM-L-12-v2ã€bge-reranker-base/largeç­‰

        Args:
            model_name_or_path: strï¼Œæ¨¡å‹åç§°ï¼ˆHuggingFace Hubè§„èŒƒåï¼‰æˆ–æœ¬åœ°å­˜å‚¨è·¯å¾„ï¼š
                - 1.æ¨¡å‹åç§°ï¼šæœ¬åœ°ç¼“å­˜ï¼ˆé»˜è®¤~/.cache/huggingface/ï¼‰æ— è¯¥æ¨¡å‹æ—¶ï¼Œè‡ªåŠ¨ä»Hubä¸‹è½½æƒé‡/é…ç½®/åˆ†è¯å™¨ï¼›ç¼“å­˜å·²å­˜åœ¨åˆ™ç›´æ¥åŠ è½½ï¼Œæ— éœ€é‡å¤ä¸‹è½½ã€‚
                - 2.æœ¬åœ°è·¯å¾„ï¼šéœ€æ‰‹åŠ¨ä¸‹è½½å®Œæ•´æ¨¡å‹æ–‡ä»¶ï¼ˆåŒ…å«config.jsonã€model.safetensors/pytorch_model.binç­‰ï¼‰åˆ°æœ¬åœ°è·¯å¾„åœ°å€ã€‚
            device: æ¨¡å‹è¿è¡Œè®¾å¤‡ï¼ŒNoneåˆ™è‡ªåŠ¨æ£€æµ‹ï¼ˆä¼˜å…ˆä½¿ç”¨CUDAï¼Œæ— åˆ™ä½¿ç”¨CPUï¼‰
            batch_size: æ¨ç†æ‰¹æ¬¡å¤§å°ï¼Œå»ºè®®CPUè®¾8/16ï¼ŒGPUå¯æ ¹æ®æ˜¾å­˜é€‚å½“å¢å¤§ï¼ˆé»˜è®¤16ï¼‰
        """</span>
        <span class="hljs-comment"># è®¾å¤‡è‡ªåŠ¨é€‚é…</span>
        self.device = device <span class="hljs-keyword">if</span> device <span class="hljs-keyword">else</span> (<span class="hljs-string">"cuda"</span> <span class="hljs-keyword">if</span> torch.cuda.is_available() <span class="hljs-keyword">else</span> <span class="hljs-string">"cpu"</span>)
        self.batch_size = batch_size
        self.model_name_or_path = model_name_or_path
        self.reranker_model: <span class="hljs-type">Optional</span>[CrossEncoder] = <span class="hljs-literal">None</span>

        <span class="hljs-comment"># åˆå§‹åŒ–æ¨¡å‹</span>
        self._load_model()

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_load_model</span>(<span class="hljs-params">self</span>) -&gt; <span class="hljs-literal">None</span>:
        <span class="hljs-string">"""åŠ è½½å¹¶é‡åˆå§‹åŒ–CrossEncoderé‡æ’æ¨¡å‹"""</span>
        <span class="hljs-keyword">try</span>:
            self.reranker_model = CrossEncoder(self.model_name_or_path, device=self.device)
            logger.info(<span class="hljs-string">f"âœ…é‡æ’æ¨¡å‹åŠ è½½å®Œæˆ | è®¾å¤‡ï¼š<span class="hljs-subst">{self.device}</span> | æ‰¹æ¬¡å¤§å°ï¼š<span class="hljs-subst">{self.batch_size}</span>"</span>)
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            <span class="hljs-keyword">raise</span> RuntimeError(<span class="hljs-string">f"æ¨¡å‹åŠ è½½å¤±è´¥ï¼š<span class="hljs-subst">{e}</span>\nè¯·æ£€æŸ¥ï¼š1. æ¨¡å‹è·¯å¾„æ˜¯å¦æ­£ç¡® 2. ç½‘ç»œæ˜¯å¦æ­£å¸¸ï¼ˆé¦–æ¬¡ä¸‹è½½éœ€è”ç½‘ï¼‰"</span>)

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">rerank_documents</span>(<span class="hljs-params">
            self,
            query: <span class="hljs-built_in">str</span>,
            documents: <span class="hljs-type">List</span>[Document],
            top_n: <span class="hljs-built_in">int</span> = <span class="hljs-number">3</span>,
            score_threshold: <span class="hljs-built_in">float</span> = <span class="hljs-number">0.0</span>
    </span>) -&gt; <span class="hljs-type">List</span>[Document]:
        <span class="hljs-string">"""
        å¯¹æ£€ç´¢åˆ°çš„æ–‡æ¡£è¿›è¡Œé‡æ’åº

        Args:
            query: ç”¨æˆ·æŸ¥è¯¢é—®é¢˜
            documents: å‘é‡æ£€ç´¢å¾—åˆ°çš„åŸå§‹æ–‡æ¡£åˆ—è¡¨
            top_n: é‡æ’åä¿ç•™çš„æ–‡æ¡£æ•°é‡
            score_threshold: åˆ†æ•°é˜ˆå€¼ï¼Œä½äºè¯¥å€¼çš„æ–‡æ¡£ä¼šè¢«è¿‡æ»¤

        Returns:
            List[Document]: é‡æ’åºåçš„æ–‡æ¡£åˆ—è¡¨ï¼ˆæŒ‰ç›¸å…³æ€§ä»é«˜åˆ°ä½ï¼‰
        """</span>
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> documents:
            <span class="hljs-keyword">return</span> []

        <span class="hljs-comment"># æ„é€ æ¨¡å‹è¾“å…¥ï¼š(query, doc_text) å¯¹</span>
        pairs = [(query, doc.page_content) <span class="hljs-keyword">for</span> doc <span class="hljs-keyword">in</span> documents]

        <span class="hljs-comment"># è®¡ç®—ç›¸å…³æ€§åˆ†æ•°</span>
        scores = self.reranker_model.predict(pairs)

        <span class="hljs-comment"># å°†æ–‡æ¡£ä¸åˆ†æ•°é…å¯¹å¹¶æ’åº</span>
        doc_score_pairs = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">zip</span>(documents, scores))
        <span class="hljs-comment"># æŒ‰åˆ†æ•°é™åºæ’åº</span>
        doc_score_pairs.sort(key=<span class="hljs-keyword">lambda</span> x: x[<span class="hljs-number">1</span>], reverse=<span class="hljs-literal">True</span>)

        <span class="hljs-comment"># è¿‡æ»¤åˆ†æ•°é˜ˆå€¼å¹¶æˆªå–top_n</span>
        filtered_docs = []
        <span class="hljs-keyword">for</span> doc, score <span class="hljs-keyword">in</span> doc_score_pairs:
            <span class="hljs-keyword">if</span> score &gt;= score_threshold <span class="hljs-keyword">and</span> <span class="hljs-built_in">len</span>(filtered_docs) &lt; top_n:
                <span class="hljs-comment"># å°†åˆ†æ•°æ·»åŠ åˆ°æ–‡æ¡£å…ƒæ•°æ®ä¸­</span>
                doc.metadata[<span class="hljs-string">"rerank_score"</span>] = <span class="hljs-built_in">float</span>(score)
                filtered_docs.append(doc)
            <span class="hljs-keyword">elif</span> <span class="hljs-built_in">len</span>(filtered_docs) &gt;= top_n:
                <span class="hljs-keyword">break</span>

        logger.info(<span class="hljs-string">f"é‡æ’å®Œæˆï¼šåŸå§‹<span class="hljs-subst">{<span class="hljs-built_in">len</span>(documents)}</span>ä¸ªæ–‡æ¡£ â†’ ç­›é€‰å<span class="hljs-subst">{<span class="hljs-built_in">len</span>(filtered_docs)}</span>ä¸ªæ–‡æ¡£"</span>)
        <span class="hljs-keyword">return</span> filtered_docs
</code></pre>
<p><strong>æµ‹è¯•é‡æ’æ¨¡å‹</strong></p>
<pre><code class="hljs language-ini" lang="ini">if <span class="hljs-attr">__name__</span> == <span class="hljs-string">"__main__"</span>:
    <span class="hljs-comment"># æµ‹è¯•æ•°æ®</span>
    <span class="hljs-attr">sample_documents</span> = [
        Document(page_content=<span class="hljs-string">"æ–‡æ¡£1å†…å®¹ï¼šäººå·¥æ™ºèƒ½å…¥é—¨"</span>, metadata={<span class="hljs-string">"id"</span>: <span class="hljs-number">1</span>}),
        Document(page_content=<span class="hljs-string">"æ–‡æ¡£2å†…å®¹ï¼šå¤§è¯­è¨€æ¨¡å‹åŸç†"</span>, metadata={<span class="hljs-string">"id"</span>: <span class="hljs-number">2</span>}),
        Document(page_content=<span class="hljs-string">"æ–‡æ¡£3å†…å®¹ï¼šPython åŸºç¡€æ•™ç¨‹"</span>, metadata={<span class="hljs-string">"id"</span>: <span class="hljs-number">3</span>}),
        Document(page_content=<span class="hljs-string">"æ–‡æ¡£4å†…å®¹ï¼šè¯­ä¹‰æ£€ç´¢ç®—æ³•"</span>, metadata={<span class="hljs-string">"id"</span>: <span class="hljs-number">4</span>}),
        Document(page_content=<span class="hljs-string">"æ–‡æ¡£5å†…å®¹ï¼šæœºå™¨å­¦ä¹ å®æˆ˜"</span>, metadata={<span class="hljs-string">"id"</span>: <span class="hljs-number">5</span>}),
    ]
    <span class="hljs-comment"># ä½¿ç”¨BAAI/bge-reranker-largeæ¨¡å‹</span>
    <span class="hljs-attr">reranker</span> = RerankerCrossModel(
        <span class="hljs-comment"># è¿™é‡ŒåŠ è½½æœ¬åœ°è·¯å¾„æ¨¡å‹ï¼ˆéœ€æ‰‹åŠ¨ä¸‹è½½æ¨¡å‹æ–‡ä»¶åˆ°æŒ‡å®šè·¯å¾„ï¼‰</span>
        <span class="hljs-comment"># a.æ¨¡å‹æ–‡ä»¶è·å–åœ°å€ï¼šhttps://modelscope.cn/models/BAAI/bge-reranker-v2-m3</span>
        <span class="hljs-comment"># b.éœ€ä¸‹è½½æ–‡ä»¶ï¼šconfig.jsonã€model.safetensorsã€special_tokens_map.jsonã€tokenizer.jsonã€tokenizer_config.json</span>
        <span class="hljs-comment"># model_name_or_path="BAAI/bge-reranker-base",  # æ¨¡å‹åç§°</span>
        <span class="hljs-attr">model_name_or_path</span>=<span class="hljs-string">"../../../data/models_reranker_data/BAAI/bge-reranker-v2-m3"</span>,  <span class="hljs-comment"># æ¨¡å‹åç§°</span>
        <span class="hljs-attr">device</span>=<span class="hljs-string">"cuda"</span> if torch.cuda.is_available() else <span class="hljs-string">"cpu"</span>,
        <span class="hljs-attr">batch_size</span>=<span class="hljs-number">8</span>
    )
    <span class="hljs-attr">query</span> = <span class="hljs-string">"å¤§è¯­è¨€æ¨¡å‹çš„è¯­ä¹‰æ£€ç´¢æ–¹æ³•"</span>
    <span class="hljs-attr">result_docs</span> = reranker.rerank_documents(
        <span class="hljs-attr">query</span>=query,
        <span class="hljs-attr">documents</span>=sample_documents,
        <span class="hljs-attr">top_n</span>=<span class="hljs-number">3</span>
    )

    <span class="hljs-comment"># æ‰“å°æœ€ç»ˆç»“æœï¼ˆæ–°å¢ï¼šè¾“å‡ºé‡æ’åçš„è¯¦ç»†ä¿¡æ¯ï¼‰</span>
    print("\<span class="hljs-attr">n</span>========== é‡æ’ç»“æœè¯¦æƒ… ==========<span class="hljs-string">")
    for i, doc in enumerate(result_docs, 1):
        print(f"</span>\nç¬¬{i}åæ–‡æ¡£ï¼š<span class="hljs-string">")
        print(f"</span>æ–‡æ¡£IDï¼š{doc.metadata[<span class="hljs-string">'id'</span>]}  é‡æ’åˆ†æ•°ï¼š{doc.metadata[<span class="hljs-string">'rerank_score'</span>]:.<span class="hljs-number">4</span>f} æ–‡æ¡£å†…å®¹ï¼š{doc.page_content}<span class="hljs-string">")
</span></code></pre>
<p>æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/da014591879846b4992faa96015185e4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bGF5b6u:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770803987&amp;x-signature=eQeAbQIdHxpHqsLu76EHJRCUu7g%3D" alt="image-20260104114808254" loading="lazy"/></p>
<h5 data-id="heading-17">6 RAG æ ¸å¿ƒæœåŠ¡ï¼ˆrag_service_stream.pyï¼‰</h5>
<p>è¯¥ç±»å®ç°å®Œæ•´æ£€ç´¢å¢å¼ºç”Ÿæˆï¼ˆRAGï¼‰çš„æ ¸å¿ƒé€»è¾‘ï¼šæ–‡æ¡£å¤„ç†ã€å‘é‡å­˜å‚¨ã€æ£€ç´¢å’Œå›ç­”ç”Ÿæˆã€‚åŸºäº LangChain æ„å»ºï¼Œæ ¸å¿ƒç›®æ ‡æ˜¯è®©å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰ç»“åˆä¸Šä¼ çš„æ–‡æ¡£çŸ¥è¯†è¿›è¡Œé—®ç­”ï¼Œè§£å†³çº¯ LLM å¯èƒ½å­˜åœ¨çš„äº‹å®æ€§é”™è¯¯ã€çŸ¥è¯†æ—¶æ•ˆæ€§ç­‰é—®é¢˜ã€‚</p>
<p>åœ¨é¡¹ç›®ç›®å½•ä¸‹åˆ›å»º<code>services</code>æ–‡ä»¶å¤¹ï¼Œåœ¨è¯¥æ–‡ä»¶å¤¹ä¸‹åˆ›å»ºæ–‡ä»¶<code>rag_service_stream.py</code>ã€‚</p>
<h6 data-id="heading-18">ä¸€ã€å¼•å…¥ä¾èµ–</h6>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> logging
<span class="hljs-keyword">import</span> os
<span class="hljs-keyword">import</span> tempfile
<span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">List</span>, <span class="hljs-type">Dict</span>, <span class="hljs-type">Optional</span>, <span class="hljs-type">Any</span>, Generator
<span class="hljs-keyword">from</span> langchain.text_splitter <span class="hljs-keyword">import</span> RecursiveCharacterTextSplitter
<span class="hljs-keyword">from</span> langchain_community.document_loaders <span class="hljs-keyword">import</span> TextLoader, PyPDFLoader, Docx2txtLoader
<span class="hljs-keyword">from</span> langchain_chroma <span class="hljs-keyword">import</span> Chroma

<span class="hljs-keyword">from</span> langchain.memory <span class="hljs-keyword">import</span> ConversationBufferWindowMemory
<span class="hljs-keyword">from</span> langchain.schema <span class="hljs-keyword">import</span> HumanMessage
<span class="hljs-keyword">from</span> sentence_transformers <span class="hljs-keyword">import</span> CrossEncoder

<span class="hljs-keyword">from</span> models.langchain_embedding <span class="hljs-keyword">import</span> initialize_embedding_model
<span class="hljs-keyword">from</span> models.langchain_llm <span class="hljs-keyword">import</span> langchain_qwen_llm
<span class="hljs-keyword">from</span> models.reranker_model <span class="hljs-keyword">import</span> RerankerCrossModel
</code></pre>
<h6 data-id="heading-19"><strong>äºŒã€åˆ›å»º<code>RAGService</code>ç±»å¹¶åˆå§‹åŒ–</strong></h6>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">RAGService</span>:
    <span class="hljs-string">"""
    RAGï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰æœåŠ¡ç±»ï¼Œå®ç°æ–‡æ¡£è§£æã€å‘é‡åŒ–å­˜å‚¨åŠåŸºäºæ£€ç´¢çš„çŸ¥è¯†è¿›è¡Œé—®ç­”ï¼Œè¾…åŠ© LLM ç”Ÿæˆæ›´å‡†ç¡®ã€æœ‰ä¾æ®çš„å›ç­”ã€‚
    æ ¸å¿ƒæµç¨‹ï¼šæ–‡æ¡£ä¸Šä¼ â†’è§£æåˆ†å—â†’å‘é‡åŒ–å­˜å‚¨â†’æ£€ç´¢ç›¸å…³ç‰‡æ®µâ†’LLMç”Ÿæˆç­”æ¡ˆã€‚
    æ”¯æŒæµå¼è¾“å‡ºã€‚
    """</span>

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self,
                 persist_directory: <span class="hljs-built_in">str</span> = <span class="hljs-string">"chroma_db"</span>,
                 retrieve_k: <span class="hljs-built_in">int</span> = <span class="hljs-number">8</span>,  <span class="hljs-comment"># æ£€ç´¢ top-k ä¸ªç›¸å…³æ–‡æœ¬å—</span>
                 enable_reranker: <span class="hljs-built_in">bool</span> = <span class="hljs-literal">True</span>,  <span class="hljs-comment"># æ˜¯å¦å¼€å¯é‡æ’</span>
                 model_name_or_path: <span class="hljs-built_in">str</span> = <span class="hljs-string">"BAAI/bge-reranker-large"</span>,  <span class="hljs-comment"># é‡æ’æ¨¡å‹åç§°ï¼ˆHuggingFace Hubè§„èŒƒåï¼‰æˆ–æœ¬åœ°å­˜å‚¨è·¯å¾„</span>
                 rerank_top_n: <span class="hljs-built_in">int</span> = <span class="hljs-number">4</span>,  <span class="hljs-comment"># é‡æ’åä¿ç•™æ•°é‡,å¿…é¡»å°äºretrieve_k</span>
                 rerank_score_threshold: <span class="hljs-built_in">float</span> = <span class="hljs-number">0.1</span>  <span class="hljs-comment"># é‡æ’åˆ†æ•°é˜ˆå€¼ï¼Œå¤§äºè¯¥é˜ˆå€¼æ‰è¢«é€‰å–</span>
                 </span>):
        <span class="hljs-string">"""
        åˆå§‹åŒ–RAGæœåŠ¡ï¼ŒåŠ è½½åµŒå…¥æ¨¡å‹ã€LLMæ¨¡å‹åŠå·²å­˜åœ¨çš„å‘é‡æ•°æ®åº“ã€‚

        Args:
            persist_directory: å‘é‡æ•°æ®åº“æŒä¹…åŒ–å­˜å‚¨è·¯å¾„ï¼Œé»˜è®¤å€¼ä¸º"chroma_db"
            model_name_or_path: å¯é€‰ï¼Œé‡æ’æ¨¡å‹åç§°ï¼ˆHuggingFace Hubè§„èŒƒåï¼‰æˆ–æœ¬åœ°å­˜å‚¨è·¯å¾„ï¼Œé»˜è®¤ä½¿ç”¨BAAIçš„bge-reranker-v2-m3ï¼ˆä¸­æ–‡æ€§ä»·æ¯”è¾ƒé«˜ï¼‰
                - 1.æ¨¡å‹åç§°ï¼šæœ¬åœ°ç¼“å­˜ï¼ˆé»˜è®¤~/.cache/huggingface/ï¼‰æ— è¯¥æ¨¡å‹æ—¶ï¼Œè‡ªåŠ¨ä»Hubä¸‹è½½æƒé‡/é…ç½®/åˆ†è¯å™¨ï¼›ç¼“å­˜å·²å­˜åœ¨åˆ™ç›´æ¥åŠ è½½ï¼Œæ— éœ€é‡å¤ä¸‹è½½ã€‚
                - 2.æœ¬åœ°è·¯å¾„ï¼šéœ€æ‰‹åŠ¨ä¸‹è½½å®Œæ•´æ¨¡å‹æ–‡ä»¶ï¼ˆåŒ…å«config.jsonã€model.safetensors/pytorch_model.binç­‰ï¼‰åˆ°æœ¬åœ°è·¯å¾„åœ°å€ã€‚
            retrieve_k: å¯é€‰ï¼Œå‘é‡æ£€ç´¢é˜¶æ®µä»æ•°æ®åº“ä¸­å¬å›çš„å€™é€‰æ–‡æœ¬å—æ•°é‡ï¼Œé»˜è®¤å€¼10ã€‚
            rerank_top_n: å¯é€‰ï¼Œä»å¬å›çš„å€™é€‰æ–‡æœ¬å—ä¸­é‡æ’ç­›é€‰åï¼Œæœ€ç»ˆä¿ç•™çš„é«˜ç›¸å…³æ–‡æœ¬å—æ•°é‡ï¼Œé»˜è®¤å€¼3ã€‚çº¦æŸï¼šå¿…é¡»æ»¡è¶³ rerank_top_n &lt; retrieve_kã€‚
            rerank_score_threshold:å¯é€‰ï¼Œé‡æ’ç»“æœçš„åˆ†æ•°ç­›é€‰é˜ˆå€¼ï¼Œé»˜è®¤å€¼0.1ã€‚ä»…å¾—åˆ†è¶…è¿‡è¯¥é˜ˆå€¼çš„æ–‡æœ¬å—ä¼šè¢«ä¿ç•™ã€‚

        """</span>
        <span class="hljs-comment"># å‘é‡æ•°æ®åº“æŒä¹…åŒ–ç›®å½•</span>
        self.persist_directory = persist_directory
        <span class="hljs-comment"># åˆå§‹åŒ–åµŒå…¥æ¨¡å‹ï¼ˆç”¨äºå°†æ–‡æœ¬è½¬æ¢ä¸ºå‘é‡ï¼‰</span>
        self.embeddings = initialize_embedding_model(<span class="hljs-string">"qwen"</span>)
        <span class="hljs-comment"># æ£€ç´¢ top-k ä¸ªç›¸å…³æ–‡æœ¬å—</span>
        self.retrieve_k = retrieve_k,
        <span class="hljs-comment"># åˆå§‹åŒ–å‘é‡æ•°æ®åº“ï¼ˆè‹¥å­˜åœ¨ï¼‰</span>
        self.vectordb = self._load_vector_db()
        <span class="hljs-comment"># åˆå§‹åŒ–å¤§è¯­è¨€æ¨¡å‹ï¼ˆç”¨äºç”Ÿæˆç­”æ¡ˆï¼‰</span>
        self.llm = langchain_qwen_llm()
        <span class="hljs-comment"># æ˜¯å¦å¼€å¯é‡æ’</span>
        self.enable_reranker = enable_reranker
        <span class="hljs-comment"># åˆå§‹åŒ–é‡æ’æ¨¡å‹</span>
        self.reranker_model = self._init_rerank_model(model_name_or_path)
        <span class="hljs-comment"># é‡æ’åä¿ç•™æ•°é‡,å¿…é¡»å°äºk</span>
        self.rerank_top_n = rerank_top_n
        <span class="hljs-comment"># é‡æ’åˆ†æ•°é˜ˆå€¼ï¼Œå¤§äºè¯¥é˜ˆå€¼æ‰è¢«é€‰å–</span>
        self.rerank_score_threshold = rerank_score_threshold
        <span class="hljs-comment"># ä¿å­˜å½“å‰æµå¼å›ç­”ï¼Œç”¨äºå®Œæ•´å­˜å‚¨</span>
        self.current_stream_answer = <span class="hljs-string">""</span>
        <span class="hljs-comment"># åˆå§‹åŒ–å†…å­˜ï¼Œè®¾ç½®çª—å£å¤§å° k=50ï¼ˆåªä¿ç•™æœ€è¿‘100è½®å¯¹è¯ï¼‰</span>
        <span class="hljs-comment"># ConversationBufferWindowMemory æ˜¯ ConversationBufferMemory çš„æ‰©å±•ç‰ˆæœ¬ï¼Œä¸“é—¨ç”¨äºè§£å†³é•¿å¯¹è¯åœºæ™¯ä¸‹çš„</span>
        <span class="hljs-comment"># ä¸Šä¸‹æ–‡ç®¡ç†é—®é¢˜ã€‚å®ƒé€šè¿‡åªä¿ç•™æœ€è¿‘çš„ N è½®å¯¹è¯ï¼ˆæ»‘åŠ¨çª—å£æœºåˆ¶ï¼‰ï¼Œåœ¨ç»´æŒå¯¹è¯è¿è´¯æ€§çš„åŒæ—¶ï¼Œé¿å…å†å²è®°å½•è¿‡é•¿å¯¼è‡´çš„ Token è¶…é™é—®é¢˜ã€‚</span>
        self.memory = ConversationBufferWindowMemory(
            k=<span class="hljs-number">50</span>,  <span class="hljs-comment"># çª—å£å¤§å°ï¼šä»…ä¿ç•™æœ€è¿‘50è½®å¯¹è¯ï¼ˆ1è½®=1æ¬¡ç”¨æˆ·+1æ¬¡åŠ©æ‰‹äº¤äº’ï¼‰</span>
            return_messages=<span class="hljs-literal">True</span>,  <span class="hljs-comment"># è¿”å›LangChainæ ‡å‡†Messageå¯¹è±¡ï¼ˆè€Œéçº¯å­—ç¬¦ä¸²ï¼Œä¾¿äºæ ¼å¼ç»Ÿä¸€ï¼‰</span>
            memory_key=<span class="hljs-string">"chat_history"</span>,  <span class="hljs-comment"># è®°å¿†æ•°æ®çš„å­˜å‚¨é”®ï¼ˆåç»­æå–å†å²æ—¶ä½¿ç”¨ï¼‰</span>
            output_key=<span class="hljs-string">"answer"</span>,  <span class="hljs-comment"># ä¸LLMè¾“å‡ºç»“æœçš„é”®å¯¹é½ï¼ˆé€‚é…é“¾å¼è°ƒç”¨è§„èŒƒï¼‰</span>
            input_key=<span class="hljs-string">"input"</span>  <span class="hljs-comment"># ä¸LLMè¾“å‡ºç»“æœçš„é”®å¯¹é½ï¼ˆé€‚é…é“¾å¼è°ƒç”¨è§„èŒƒï¼‰</span>
        )

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_load_vector_db</span>(<span class="hljs-params">self</span>) -&gt; <span class="hljs-type">Optional</span>[Chroma]:
        <span class="hljs-string">"""
        ç§æœ‰æ–¹æ³•ï¼šåŠ è½½å·²æŒä¹…åŒ–çš„å‘é‡æ•°æ®åº“ï¼ˆè‹¥ç›®å½•å­˜åœ¨ä¸”éç©ºï¼‰ã€‚
        å‘é‡æ•°æ®åº“ç”¨äºå­˜å‚¨æ–‡æ¡£ç‰‡æ®µçš„å‘é‡è¡¨ç¤ºï¼Œæ”¯æŒé«˜æ•ˆçš„ç›¸ä¼¼æ€§æ£€ç´¢ã€‚

        Returns:
            åŠ è½½æˆåŠŸçš„Chromaå‘é‡æ•°æ®åº“å®ä¾‹ï¼›è‹¥ä¸å­˜åœ¨æˆ–åŠ è½½å¤±è´¥ï¼Œè¿”å›None

        Raises:
            RuntimeError: æ•°æ®åº“åŠ è½½è¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯æ—¶æŠ›å‡ºå¼‚å¸¸
        """</span>
        <span class="hljs-comment"># è·¯å¾„ä¸å­˜åœ¨æ—¶è‡ªåŠ¨åˆ›å»ºï¼ˆæ”¯æŒå¤šçº§ç›®å½•ï¼‰</span>
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> os.path.exists(self.persist_directory):
            <span class="hljs-keyword">try</span>:
                os.makedirs(self.persist_directory, exist_ok=<span class="hljs-literal">True</span>)
            <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
                error_msg = <span class="hljs-string">f"åˆ›å»ºChromaæ•°æ®åº“è·¯å¾„å¤±è´¥ï¼š<span class="hljs-subst">{self.persist_directory}</span>ï¼Œé”™è¯¯ï¼š<span class="hljs-subst">{<span class="hljs-built_in">str</span>(e)}</span>"</span>
                <span class="hljs-keyword">raise</span> RuntimeError(error_msg) <span class="hljs-keyword">from</span> e

        <span class="hljs-comment"># æ£€æŸ¥æŒä¹…åŒ–ç›®å½•æ˜¯å¦å­˜åœ¨ä¸”éç©º</span>
        <span class="hljs-keyword">try</span>:
            <span class="hljs-keyword">return</span> Chroma(
                embedding_function=self.embeddings,
                persist_directory=self.persist_directory,
            )
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            <span class="hljs-keyword">raise</span> RuntimeError(<span class="hljs-string">f"å‘é‡æ•°æ®åº“åŠ è½½å¤±è´¥ï¼ˆè·¯å¾„ï¼š<span class="hljs-subst">{self.persist_directory}</span>ï¼‰ï¼š<span class="hljs-subst">{<span class="hljs-built_in">str</span>(e)}</span>"</span>)

    <span class="hljs-comment"># ===================== é‡æ’æ¨¡å‹åˆå§‹åŒ– =====================</span>
<span class="hljs-meta">    @staticmethod</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_init_rerank_model</span>(<span class="hljs-params">model_name_or_path: <span class="hljs-built_in">str</span> = <span class="hljs-string">"BAAI/bge-reranker-large"</span></span>) -&gt; RerankerCrossModel | <span class="hljs-literal">None</span>:
        <span class="hljs-string">"""
        åˆå§‹åŒ–é‡æ’æ¨¡å‹ï¼Œç”¨äºå¯¹æ£€ç´¢ç»“æœè¿›è¡Œè¯­ä¹‰é‡æ’åº.é»˜è®¤ä½¿ç”¨BAAIçš„bge-reranker-largeã€‚

        Args:
            model_name_or_path: é‡æ’æ¨¡å‹åç§°ï¼ˆHuggingFace Hubè§„èŒƒåï¼‰æˆ–æœ¬åœ°å­˜å‚¨è·¯å¾„ï¼Œ
        Returns:
            CrossEncoder: åˆå§‹åŒ–åçš„é‡æ’æ¨¡å‹å®ä¾‹
        """</span>
        <span class="hljs-keyword">try</span>:
            <span class="hljs-comment"># åŠ è½½é‡æ’æ¨¡å‹</span>
            rerank_model = RerankerCrossModel(model_name_or_path)
            logger.info(<span class="hljs-string">f"æˆåŠŸåŠ è½½é‡æ’æ¨¡å‹: <span class="hljs-subst">{model_name_or_path}</span>"</span>)
            <span class="hljs-keyword">return</span> rerank_model
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            logger.info(<span class="hljs-string">f"åŠ è½½é‡æ’æ¨¡å‹å¤±è´¥: <span class="hljs-subst">{<span class="hljs-built_in">str</span>(e)}</span>"</span>)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>
</code></pre>
<h6 data-id="heading-20">ä¸‰ã€æ–‡æ¡£å¤„ç†ï¼š<code>process_document(file)</code></h6>
<p>å¤„ç†ç”¨æˆ·ä¸Šä¼ çš„æ–‡æ¡£ï¼Œè§£æã€åˆ†å—ã€å‘é‡åŒ–ã€å¹¶å­˜å‚¨åˆ°å‘é‡æ•°æ®åº“ã€‚</p>
<pre><code class="hljs language-python" lang="python">    <span class="hljs-keyword">def</span> <span class="hljs-title function_">process_document</span>(<span class="hljs-params">self, file: <span class="hljs-type">Any</span></span>) -&gt; <span class="hljs-type">Dict</span>[<span class="hljs-built_in">str</span>, <span class="hljs-built_in">bool</span> | <span class="hljs-built_in">str</span>]:
        <span class="hljs-string">"""
        å¤„ç†ç”¨æˆ·ä¸Šä¼ çš„æ–‡æ¡£ï¼ˆè§£æã€åˆ†å—ã€å‘é‡åŒ–ã€å­˜å‚¨åˆ°å‘é‡æ•°æ®åº“ï¼‰ã€‚
        æ”¯æŒçš„æ ¼å¼ï¼šPDFã€DOCXã€TXTã€MDï¼ˆå¯é€šè¿‡æ‰©å±•loaderæ”¯æŒæ›´å¤šæ ¼å¼ï¼‰ã€‚
        """</span>
        <span class="hljs-comment"># -------------------------- ï¼ˆ1ï¼‰æ–‡ä»¶æœ‰æ•ˆæ€§æ ¡éªŒä¸ä¸´æ—¶æ–‡ä»¶åˆ›å»º ------------------------</span>
        <span class="hljs-comment">#  éªŒè¯æ–‡ä»¶å¯¹è±¡æœ‰æ•ˆæ€§</span>
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> file <span class="hljs-keyword">or</span> <span class="hljs-keyword">not</span> <span class="hljs-built_in">hasattr</span>(file, <span class="hljs-string">'name'</span>) <span class="hljs-keyword">or</span> <span class="hljs-keyword">not</span> <span class="hljs-built_in">hasattr</span>(file, <span class="hljs-string">'getvalue'</span>):
            <span class="hljs-keyword">return</span> {<span class="hljs-string">"success"</span>: <span class="hljs-literal">False</span>, <span class="hljs-string">"message"</span>: <span class="hljs-string">"æ— æ•ˆçš„æ–‡ä»¶å¯¹è±¡"</span>}

        <span class="hljs-comment"># æå–å¹¶æ ‡å‡†åŒ–æ–‡ä»¶åç¼€ï¼ˆè½¬ä¸ºå°å†™ï¼Œä¾¿äºæ ¼å¼åˆ¤æ–­ï¼‰</span>
        file_name = file.name
        file_suffix = file_name.split(<span class="hljs-string">'.'</span>)[-<span class="hljs-number">1</span>].lower() <span class="hljs-keyword">if</span> <span class="hljs-string">'.'</span> <span class="hljs-keyword">in</span> file_name <span class="hljs-keyword">else</span> <span class="hljs-string">''</span>
        tmp_file_path = <span class="hljs-literal">None</span>  <span class="hljs-comment"># ä¸´æ—¶æ–‡ä»¶è·¯å¾„ï¼ˆç”¨äºåç»­æ¸…ç†ï¼‰</span>

        <span class="hljs-keyword">try</span>:
            <span class="hljs-comment"># åˆ›å»ºä¸´æ—¶æ–‡ä»¶å­˜å‚¨ä¸Šä¼ çš„æ–‡ä»¶å†…å®¹ï¼ˆé¿å…ç›´æ¥æ“ä½œå†…å­˜ä¸­çš„äºŒè¿›åˆ¶æ•°æ®ï¼‰</span>
            <span class="hljs-keyword">with</span> tempfile.NamedTemporaryFile(
                    delete=<span class="hljs-literal">False</span>,  <span class="hljs-comment"># å…³é—­è‡ªåŠ¨åˆ é™¤ï¼Œç¡®ä¿åŠ è½½å™¨èƒ½è¯»å–</span>
                    suffix=<span class="hljs-string">f".<span class="hljs-subst">{file_suffix}</span>"</span>,  <span class="hljs-comment"># ä¿ç•™æ–‡ä»¶åç¼€ï¼Œé¿å…åŠ è½½å™¨è§£æé”™è¯¯</span>
                    mode=<span class="hljs-string">'wb'</span>  <span class="hljs-comment"># äºŒè¿›åˆ¶å†™å…¥æ¨¡å¼</span>
            ) <span class="hljs-keyword">as</span> tmp_file:
                tmp_file.write(file.getvalue())  <span class="hljs-comment"># å†™å…¥æ–‡ä»¶å†…å®¹</span>
                tmp_file_path = tmp_file.name  <span class="hljs-comment"># è®°å½•ä¸´æ—¶æ–‡ä»¶è·¯å¾„</span>

            <span class="hljs-comment"># -------------------------- ï¼ˆ2ï¼‰æ–‡æ¡£åŠ è½½ï¼ˆæŒ‰æ ¼å¼é€‚é…ï¼‰ -------------------------</span>
            <span class="hljs-comment"># æ ¹æ®æ–‡ä»¶åç¼€é€‰æ‹©å¯¹åº”çš„æ–‡æ¡£åŠ è½½å™¨</span>
            <span class="hljs-keyword">if</span> file_suffix == <span class="hljs-string">'pdf'</span>:
                loader = PyPDFLoader(tmp_file_path)  <span class="hljs-comment"># PDFåŠ è½½å™¨</span>
            <span class="hljs-keyword">elif</span> file_suffix == <span class="hljs-string">'docx'</span>:
                loader = Docx2txtLoader(tmp_file_path)  <span class="hljs-comment"># DOCXåŠ è½½å™¨</span>
            <span class="hljs-keyword">elif</span> file_suffix <span class="hljs-keyword">in</span> [<span class="hljs-string">'txt'</span>, <span class="hljs-string">'md'</span>]:
                loader = TextLoader(tmp_file_path, encoding=<span class="hljs-string">'utf-8'</span>)  <span class="hljs-comment"># æ–‡æœ¬æ–‡ä»¶åŠ è½½å™¨ï¼ˆæ”¯æŒUTF-8ç¼–ç ï¼‰</span>
            <span class="hljs-keyword">else</span>:
                <span class="hljs-keyword">return</span> {
                    <span class="hljs-string">"success"</span>: <span class="hljs-literal">False</span>,
                    <span class="hljs-string">"message"</span>: <span class="hljs-string">f"ä¸æ”¯æŒçš„æ–‡ä»¶ç±»å‹ï¼š<span class="hljs-subst">{file_suffix}</span>ï¼Œå½“å‰æ”¯æŒï¼špdf/docx/txt/md"</span>
                }

            <span class="hljs-comment"># åŠ è½½æ–‡æ¡£å†…å®¹ï¼ˆè¿”å›Documentå¯¹è±¡åˆ—è¡¨ï¼Œæ¯ä¸ªå¯¹è±¡å«page_contentå’Œmetadataï¼‰</span>
            documents = loader.load()
            <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> documents:  <span class="hljs-comment"># å¤„ç†ç©ºæ–‡æ¡£æƒ…å†µ</span>
                <span class="hljs-keyword">return</span> {<span class="hljs-string">"success"</span>: <span class="hljs-literal">False</span>, <span class="hljs-string">"message"</span>: <span class="hljs-string">"æ–‡æ¡£åŠ è½½å¤±è´¥ï¼šå†…å®¹ä¸ºç©ºæˆ–æ— æ³•è§£æ"</span>}

            <span class="hljs-comment"># -------------------------- ï¼ˆ3ï¼‰æ–‡æœ¬åˆ†å—ï¼ˆè§£å†³é•¿æ–‡æœ¬é—®é¢˜ï¼‰ ---------------------</span>
            <span class="hljs-comment"># åˆå§‹åŒ–æ–‡æœ¬åˆ†å—å™¨ï¼ˆè§£å†³é•¿æ–‡æœ¬è¶…å‡ºæ¨¡å‹ä¸Šä¸‹æ–‡çª—å£çš„é—®é¢˜ï¼‰</span>
            text_splitter = RecursiveCharacterTextSplitter(
                chunk_size=<span class="hljs-number">1000</span>,  <span class="hljs-comment"># æ¯ä¸ªç‰‡æ®µçš„å­—ç¬¦æ•°ï¼ˆæ ¹æ®æ¨¡å‹ä¸Šä¸‹æ–‡è°ƒæ•´ï¼‰</span>
                chunk_overlap=<span class="hljs-number">200</span>,  <span class="hljs-comment"># ç‰‡æ®µé—´é‡å å­—ç¬¦æ•°ï¼ˆä¿æŒä¸Šä¸‹æ–‡è¿è´¯æ€§ï¼‰</span>
                separators=[<span class="hljs-string">"\n\n"</span>, <span class="hljs-string">"\n"</span>, <span class="hljs-string">"ã€‚"</span>, <span class="hljs-string">" "</span>, <span class="hljs-string">""</span>]  <span class="hljs-comment"># ä¼˜å…ˆæŒ‰ä¸­æ–‡æ ‡ç‚¹åˆ†å‰²ï¼Œæå‡åˆ†å—åˆç†æ€§</span>
            )
            <span class="hljs-comment"># å°†æ–‡æ¡£åˆ†å‰²ä¸ºç‰‡æ®µï¼ˆæ¯ä¸ªç‰‡æ®µä½œä¸ºç‹¬ç«‹å•å…ƒå­˜å…¥å‘é‡åº“ï¼‰</span>
            splits = text_splitter.split_documents(documents)

            <span class="hljs-comment"># -------------------------- ï¼ˆ4ï¼‰å‘é‡å­˜å‚¨ --------------------------</span>
            <span class="hljs-comment"># å°†ç‰‡æ®µæ·»åŠ åˆ°å‘é‡æ•°æ®åº“</span>
            <span class="hljs-keyword">if</span> self.vectordb:
                <span class="hljs-comment"># è‹¥æ•°æ®åº“å·²å­˜åœ¨ï¼Œç›´æ¥æ·»åŠ æ–°ç‰‡æ®µ</span>
                self.vectordb.add_documents(splits)
            <span class="hljs-keyword">else</span>:
                <span class="hljs-comment"># è‹¥æ•°æ®åº“ä¸å­˜åœ¨ï¼Œåˆ›å»ºæ–°åº“å¹¶æ·»åŠ ç‰‡æ®µ</span>
                self.vectordb = Chroma.from_documents(
                    documents=splits,
                    embedding=self.embeddings,  <span class="hljs-comment"># ä½¿ç”¨åˆå§‹åŒ–çš„åµŒå…¥æ¨¡å‹</span>
                    persist_directory=self.persist_directory  <span class="hljs-comment"># æŒ‡å®šå­˜å‚¨è·¯å¾„</span>
                )

            <span class="hljs-keyword">return</span> {
                <span class="hljs-string">"success"</span>: <span class="hljs-literal">True</span>,
                <span class="hljs-string">"message"</span>: <span class="hljs-string">f"æ–‡æ¡£å¤„ç†æˆåŠŸï¼å…±æ·»åŠ  <span class="hljs-subst">{<span class="hljs-built_in">len</span>(splits)}</span> ä¸ªæ–‡æœ¬ç‰‡æ®µï¼ˆæ–‡ä»¶ï¼š<span class="hljs-subst">{file_name}</span>ï¼‰"</span>
            }

        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:  <span class="hljs-comment"># æ•è·æ‰€æœ‰å¼‚å¸¸ï¼Œè¿”å›å…·ä½“é”™è¯¯ä¿¡æ¯</span>
            <span class="hljs-keyword">return</span> {<span class="hljs-string">"success"</span>: <span class="hljs-literal">False</span>, <span class="hljs-string">"message"</span>: <span class="hljs-string">f"æ–‡æ¡£å¤„ç†å¤±è´¥ï¼ˆ<span class="hljs-subst">{file_name}</span>ï¼‰ï¼š<span class="hljs-subst">{<span class="hljs-built_in">str</span>(e)}</span>"</span>}
        <span class="hljs-keyword">finally</span>:
            <span class="hljs-comment"># -------------------------- ï¼ˆ5ï¼‰ä¸´æ—¶æ–‡ä»¶æ¸…ç† --------------------------</span>
            <span class="hljs-comment"># ç¡®ä¿ä¸´æ—¶æ–‡ä»¶è¢«æ¸…ç†ï¼ˆæ— è®ºå¤„ç†æˆåŠŸ/å¤±è´¥ï¼‰</span>
            <span class="hljs-keyword">if</span> tmp_file_path <span class="hljs-keyword">and</span> os.path.exists(tmp_file_path):
                <span class="hljs-keyword">try</span>:
                    os.remove(tmp_file_path)
                <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
                    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"è­¦å‘Šï¼šä¸´æ—¶æ–‡ä»¶æ¸…ç†å¤±è´¥ï¼ˆè·¯å¾„ï¼š<span class="hljs-subst">{tmp_file_path}</span>ï¼‰ï¼š<span class="hljs-subst">{<span class="hljs-built_in">str</span>(e)}</span>"</span>)
</code></pre>
<p>è´Ÿè´£å°†ç”¨æˆ·ä¸Šä¼ çš„æ–‡æ¡£è½¬æ¢ä¸ºå‘é‡å¹¶å­˜å‚¨ï¼Œæµç¨‹å¦‚ä¸‹ï¼š</p>
<ol start="0">
<li>
<p><strong>æ–‡ä»¶æœ‰æ•ˆæ€§æ ¡éªŒä¸ä¸´æ—¶æ–‡ä»¶åˆ›å»ºï¼š</strong></p>
<ul>
<li>æ ¡éªŒæ–‡ä»¶å¯¹è±¡æ˜¯å¦åŒ…å« <code>name</code>ï¼ˆæ–‡ä»¶åï¼‰å’Œ <code>getvalue()</code>ï¼ˆè·å–äºŒè¿›åˆ¶å†…å®¹ï¼‰æ–¹æ³•ï¼›</li>
<li>é€šè¿‡ <code>tempfile.NamedTemporaryFile</code> åˆ›å»ºä¸´æ—¶æ–‡ä»¶ï¼Œå†™å…¥ä¸Šä¼ æ–‡ä»¶çš„äºŒè¿›åˆ¶å†…å®¹ï¼ˆé¿å…ç›´æ¥æ“ä½œå†…å­˜æ•°æ®ï¼‰ã€‚</li>
</ul>
</li>
<li>
<p><strong>æ–‡æ¡£åŠ è½½ï¼ˆæŒ‰æ ¼å¼é€‚é…ï¼‰ï¼š</strong></p>
<p>æ ¹æ®æ–‡ä»¶åç¼€é€‰æ‹©å¯¹åº”çš„ LangChain åŠ è½½å™¨ï¼Œæ”¯æŒ 4 ç§æ ¼å¼ï¼š</p>

























<table><thead><tr><th>æ–‡ä»¶æ ¼å¼</th><th>åŠ è½½å™¨</th><th>æ ¸å¿ƒä½œç”¨</th></tr></thead><tbody><tr><td>PDF</td><td><code>PyPDFLoader</code></td><td>è§£æ PDF æ¯é¡µå†…å®¹ï¼Œç”Ÿæˆ Document å¯¹è±¡</td></tr><tr><td>DOCX</td><td><code>Docx2txtLoader</code></td><td>æå– DOCX æ–‡æœ¬å†…å®¹ï¼ˆå¿½ç•¥æ ¼å¼ï¼‰</td></tr><tr><td>TXT/MD</td><td><code>TextLoader</code></td><td>è¯»å–çº¯æ–‡æœ¬ï¼ŒæŒ‡å®š UTF-8 ç¼–ç </td></tr></tbody></table>
</li>
<li>
<p><strong>æ–‡æœ¬åˆ†å—ï¼ˆè§£å†³é•¿æ–‡æœ¬é—®é¢˜ï¼‰ï¼š</strong></p>
<p>ä½¿ç”¨ <code>RecursiveCharacterTextSplitter</code> è¿›è¡Œæ™ºèƒ½åˆ†å—ï¼Œæ ¸å¿ƒé…ç½®ï¼š</p>
<ul>
<li><code>chunk_size=1000</code>ï¼šæ¯ä¸ªæ–‡æœ¬ç‰‡æ®µæœ€å¤š 1000 å­—ç¬¦ï¼ˆé€‚é… LLM ä¸Šä¸‹æ–‡çª—å£ï¼‰ï¼›</li>
<li><code>chunk_overlap=200</code>ï¼šç‰‡æ®µé—´é‡å  200 å­—ç¬¦ï¼ˆé¿å…ä¸Šä¸‹æ–‡æ–­è£‚ï¼Œæ¯”å¦‚ä¸€ä¸ªäº‹ä»¶æè¿°è·¨ç‰‡æ®µï¼‰ï¼›</li>
<li><code>separators=["\n\n", "\n", "ã€‚", " ", ""]</code>ï¼šä¼˜å…ˆæŒ‰å¤§åˆ†éš”ç¬¦ï¼ˆå¦‚ <code>\n\n</code> æ®µè½ï¼‰åˆ†å‰²ï¼Œåˆ†å‰²å¤±è´¥å†ç”¨å°åˆ†éš”ç¬¦ï¼ˆå¦‚ <code>ã€‚</code> ä¸­æ–‡å¥æœ«ï¼‰ï¼Œæœ€å¤§ç¨‹åº¦ä¿è¯è¯­ä¹‰å®Œæ•´æ€§ã€‚</li>
</ul>
</li>
<li>
<p><strong>å‘é‡åŒ–å­˜å‚¨ï¼š</strong></p>
<p>è´Ÿè´£å°†æ–‡æœ¬ï¼ˆé—®é¢˜ã€æ–‡æ¡£ç‰‡æ®µï¼‰è½¬æ¢ä¸ºé«˜ç»´å‘é‡ï¼Œæ˜¯ã€Œæ£€ç´¢ã€çš„æ ¸å¿ƒåŸºç¡€ï¼Œå¹¶å­˜å…¥å‘é‡æ•°æ®åº“ä¸­ã€‚</p>
<ul>
<li>è‹¥å‘é‡æ•°æ®åº“å·²å­˜åœ¨ï¼ˆ<code>self.vectordb</code> éç©ºï¼‰ï¼Œç›´æ¥æ·»åŠ æ–°åˆ†å—ï¼›</li>
<li>è‹¥ä¸å­˜åœ¨ï¼Œé€šè¿‡ <code>Chroma.from_documents</code> åˆå§‹åŒ–æ•°æ®åº“å¹¶å†™å…¥åˆ†å—å‘é‡ï¼ŒåŒæ—¶æŒ‡å®šæŒä¹…åŒ–è·¯å¾„ã€‚</li>
</ul>
</li>
<li>
<p><strong>ä¸´æ—¶æ–‡ä»¶æ¸…ç†ï¼š</strong></p>
<p>é€šè¿‡ <code>finally</code> å—ç¡®ä¿æ— è®ºå¤„ç†æˆåŠŸ / å¤±è´¥ï¼Œä¸´æ—¶æ–‡ä»¶éƒ½ä¼šè¢«åˆ é™¤ï¼Œé¿å…ç£ç›˜å ç”¨ã€‚</p>
</li>
</ol>
<h6 data-id="heading-21">å››ã€é—®ç­”ç”Ÿæˆï¼š<code>get_answer_stream(question, chat_history)</code></h6>
<p>è¯¥æ–¹æ³•æ˜¯ RAGï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰çš„æ ¸å¿ƒæ‰§è¡Œå…¥å£ï¼Œå®ç°æ£€ç´¢ç›¸å…³æ–‡æ¡£â†’é‡æ’â†’ç»“åˆå†å²å¯¹è¯â†’è°ƒç”¨LLMæµå¼ç”Ÿæˆè¾“å‡ºã€‚æ ¸å¿ƒç›®æ ‡æ˜¯ï¼šè®© LLM åŸºäºã€Œç”¨æˆ·é—®é¢˜ + å†å²å¯¹è¯ + ç›¸å…³æ–‡æ¡£ç‰‡æ®µã€ç”Ÿæˆç²¾å‡†ã€æœ‰ä¾æ®çš„ç­”æ¡ˆï¼ŒåŒæ—¶æ”¯æŒä¸Šä¸‹æ–‡è¿è´¯å¯¹è¯ï¼Œæµå¼è¾“å‡ºã€‚</p>
<pre><code class="hljs language-python" lang="python">    <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_answer_stream</span>(<span class="hljs-params">self, question: <span class="hljs-built_in">str</span></span>) -&gt; Generator[<span class="hljs-built_in">str</span>, <span class="hljs-literal">None</span>, <span class="hljs-literal">None</span>]:
        <span class="hljs-string">"""
        åŸºäºRAGæŠ€æœ¯ç”Ÿæˆé—®é¢˜ç­”æ¡ˆï¼Œå®ç°æµå¼è¾“å‡ºï¼Œé€å—äº§ç”Ÿå›ç­”å†…å®¹ã€‚
        æ ¸å¿ƒæµç¨‹ï¼šæ£€ç´¢ç›¸å…³æ–‡æ¡£ç‰‡æ®µ â†’ç»“åˆå¯¹è¯å†å² â†’ æ‹¼æ¥æç¤ºè¯ â†’ è°ƒç”¨LLMç”Ÿæˆç­”æ¡ˆã€‚
        Args:
            question: ç”¨æˆ·å½“å‰çš„é—®é¢˜ï¼ˆå­—ç¬¦ä¸²ç±»å‹ï¼Œéç©ºï¼‰
        Returns:
            ç”Ÿæˆçš„ç­”æ¡ˆå­—ç¬¦ä¸²ï¼›è‹¥å‘ç”Ÿé”™è¯¯ï¼Œè¿”å›é”™è¯¯æç¤ºï¼›è‹¥æœªä¸Šä¼ æ–‡æ¡£ï¼Œè¿”å›å¼•å¯¼æç¤º
        """</span>
        <span class="hljs-comment"># é‡ç½®å½“å‰æµå¼å›ç­”</span>
        self.current_stream_answer = <span class="hljs-string">""</span>

        <span class="hljs-comment"># -------------------------- 1. æ£€æŸ¥å‘é‡æ•°æ®åº“æ˜¯å¦åˆå§‹åŒ–ï¼ˆæ˜¯å¦å·²ä¸Šä¼ æ–‡æ¡£ï¼‰ -------------</span>
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> self.vectordb:
            <span class="hljs-keyword">yield</span> <span class="hljs-string">"è¯·å…ˆä¸Šä¼ å¹¶å¤„ç†æ–‡æ¡£ï¼Œæ‰èƒ½è¿›è¡Œé—®ç­”å“¦~"</span>
            <span class="hljs-keyword">return</span>
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> question <span class="hljs-keyword">or</span> <span class="hljs-keyword">not</span> <span class="hljs-built_in">isinstance</span>(question, <span class="hljs-built_in">str</span>) <span class="hljs-keyword">or</span> question.strip() == <span class="hljs-string">""</span>:
            <span class="hljs-keyword">yield</span> <span class="hljs-string">"è¯·è¾“å…¥æœ‰æ•ˆçš„é—®é¢˜å†…å®¹~"</span>
            <span class="hljs-keyword">return</span>

        <span class="hljs-comment"># -------------------------- 2. å¯¹è¯å†å²è®°å¿†åŠ è½½ï¼ˆé€‚é…é•¿å¯¹è¯ï¼‰ -----------------------</span>
        <span class="hljs-comment"># ä¸Šä¸‹æ–‡ç®¡ç†</span>
        combine_contexts = []
        <span class="hljs-comment"># åŠ è½½å¯¹è¯å†å²è®°å¿†ï¼Œè®¾ç½®çª—å£å¤§å° k=50ï¼ˆä¿ç•™æœ€è¿‘100è½®å¯¹è¯,æ»‘åŠ¨çª—å£æœºåˆ¶ï¼‰ï¼Œåœ¨ç»´æŒå¯¹è¯è¿è´¯æ€§çš„åŒæ—¶ï¼Œé¿å…å†å²è®°å½•è¿‡é•¿å¯¼è‡´çš„ Token è¶…é™é—®é¢˜ã€‚</span>
        <span class="hljs-keyword">for</span> msg <span class="hljs-keyword">in</span> self.memory.load_memory_variables({})[<span class="hljs-string">"chat_history"</span>]:
            combine_contexts.append(msg)

        <span class="hljs-comment"># ------------------------ 3. æ–‡æ¡£æ£€ç´¢ï¼šè·å–é—®é¢˜ç›¸å…³çš„äº‹å®ä¾æ® ------------------------</span>
        <span class="hljs-comment"># åˆ›å»ºå‘é‡æ•°æ®åº“æ£€ç´¢å™¨ï¼Œæ ¹æ®é—®é¢˜æ£€ç´¢ç›¸å…³æ–‡æ¡£ç‰‡æ®µ</span>
        retriever = self.vectordb.as_retriever(search_kwargs={<span class="hljs-string">"k"</span>: <span class="hljs-number">5</span>})
        relevant_docs = retriever.invoke(question)

        <span class="hljs-comment"># ------------------------ 4. å¯¹æ£€ç´¢çš„ç›¸å…³æ–‡æ¡£è¿›è¡Œé‡æ’ ------------------------</span>
        <span class="hljs-keyword">if</span> self.reranker_model <span class="hljs-keyword">and</span> self.enable_reranker:
            filters_docs = self.reranker_model.rerank_documents(
                query=question,
                documents=relevant_docs,
                top_n=self.rerank_top_n,
                score_threshold=self.rerank_score_threshold
            )
            <span class="hljs-keyword">if</span> filters_docs:  <span class="hljs-comment"># è‹¥æœªé‡æ’æœªç­›é€‰åˆ°æ–‡æ¡£,å°±è‡ªåŠ¨é€‰å–å‰rerank_top_nä¸ªæ£€ç´¢çš„ç›¸å…³æ–‡æ¡£</span>
                relevant_docs = filters_docs
                logger.info(<span class="hljs-string">f"é‡æ’åæå– <span class="hljs-subst">{<span class="hljs-built_in">len</span>(relevant_docs)}</span> ä¸ªç›¸å…³æ–‡æœ¬å—"</span>)
            <span class="hljs-keyword">else</span>:
                relevant_docs = relevant_docs[:self.rerank_top_n]
                logger.info(<span class="hljs-string">f"é‡æ’åæœªç­›é€‰åˆ°æ–‡æ¡£ï¼Œæå–æ£€ç´¢çš„ <span class="hljs-subst">{<span class="hljs-built_in">len</span>(relevant_docs)}</span> ä¸ªç›¸å…³æ–‡æœ¬å—"</span>)

        <span class="hljs-comment"># -------------------------- 5. æç¤ºè¯æ„å»ºï¼šæ‹¼æ¥å®Œæ•´æç¤ºè¯ --------------------------</span>
        <span class="hljs-comment"># æå–ç‰‡æ®µå†…å®¹ï¼Œæ ¼å¼åŒ–ä¸ºå­—ç¬¦ä¸²ï¼ˆä¾¿äºæ‹¼æ¥æç¤ºï¼‰</span>
        context_text = <span class="hljs-string">"\n\n"</span>.join([doc.page_content <span class="hljs-keyword">for</span> doc <span class="hljs-keyword">in</span> relevant_docs])

        <span class="hljs-comment"># ç³»ç»Ÿæç¤ºè¯æ¨¡æ¿ï¼šæ˜ç¡®LLMè§’è‰²ã€å›ç­”è§„åˆ™ï¼ˆé¿å…å¹»è§‰ï¼‰å’Œè¾“å…¥ç»“æ„ï¼ˆContext/History/Questionï¼‰</span>
        system_prompt = <span class="hljs-string">"""
        ä½ æ˜¯åŸºäºæ–‡æ¡£çš„é—®ç­”åŠ©æ‰‹ï¼Œä»…ä½¿ç”¨ä»¥ä¸‹æä¾›çš„æ–‡æ¡£ç‰‡æ®µï¼ˆContextï¼‰å›ç­”é—®é¢˜ã€‚
        å¦‚æœæ–‡æ¡£ä¸­æ²¡æœ‰ç›¸å…³ä¿¡æ¯ï¼Œç›´æ¥è¯´â€œæ ¹æ®æä¾›çš„æ–‡æ¡£ï¼Œæ— æ³•å›ç­”è¯¥é—®é¢˜â€ï¼Œä¸è¦ç¼–é€ å†…å®¹ã€‚
        å›ç­”éœ€ç®€æ´ã€å‡†ç¡®ï¼Œç»“åˆå†å²å¯¹è¯ï¼ˆHistoryï¼‰ç†è§£ä¸Šä¸‹æ–‡ï¼Œæ¯ä¸€æ¬¡å›ç­”è¦é‡æ–°å®¡è§†å½“å‰æä¾›çš„å†…å®¹ï¼Œä¸è¦åªæ˜¯ç®€å•é‡å¤å†å²å›ç­”ã€‚

        Context:
        {context_text}

        Current Question: {question}

        Answer:
        """</span>
        <span class="hljs-comment"># ä½¿ç”¨æ£€ç´¢çš„ç›¸å…³æ–‡æ¡£ç‰‡æ®µå’Œç”¨æˆ·è¾“å…¥é—®é¢˜æ ¼å¼åŒ–æç¤ºæ¨¡æ¿</span>
        final_prompt = system_prompt.<span class="hljs-built_in">format</span>(
            context_text=context_text,
            question=question
        )
        <span class="hljs-comment"># æ·»åŠ æœ€ç»ˆæç¤ºåˆ°ä¸Šä¸‹æ–‡ä¸­</span>
        combine_contexts.append(HumanMessage(content=final_prompt))

        logger.info(<span class="hljs-string">f"combine_contexts:<span class="hljs-subst">{combine_contexts}</span>"</span>)

        <span class="hljs-comment"># -------------------------- 6. æµå¼è°ƒç”¨LLMï¼šé€å—ç”Ÿæˆå¹¶è¿”å›ç­”æ¡ˆ ----------------------</span>
        <span class="hljs-keyword">try</span>:
            <span class="hljs-comment"># æµå¼è°ƒç”¨LLMï¼šllm.stream()è¿”å›ç”Ÿæˆå™¨ï¼Œé€å—è·å–LLMè¾“å‡ºï¼ˆè€Œéç­‰å¾…å®Œæ•´ç­”æ¡ˆï¼‰</span>
            <span class="hljs-keyword">for</span> chunk <span class="hljs-keyword">in</span> self.llm.stream(combine_contexts):     
                <span class="hljs-comment"># å®æ—¶è¿”å›è¾“å‡ºå†…å®¹</span>
                <span class="hljs-keyword">if</span> chunk.content:
                    <span class="hljs-keyword">yield</span> chunk.content
                    self.current_stream_answer += chunk.content

            <span class="hljs-comment"># å®Œæ•´ç­”æ¡ˆç”Ÿæˆåï¼Œæ›´æ–°å¯¹è¯è®°å¿†ï¼šå°†æœ¬æ¬¡é—®ç­”ï¼ˆé—®é¢˜+å®Œæ•´ç­”æ¡ˆï¼‰å­˜å…¥è®°å¿†ï¼Œä¾›ä¸‹ä¸€è½®å¯¹è¯å¤ç”¨</span>
            self.memory.save_context(
                inputs={<span class="hljs-string">"input"</span>: question},
                outputs={<span class="hljs-string">"answer"</span>: self.current_stream_answer}
            )

            logger.info(<span class="hljs-string">f"self.memory.save_context:<span class="hljs-subst">{self.memory.model_dump_json()}</span>"</span>)

        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            logger.error(<span class="hljs-string">f"é”™è¯¯ï¼šç­”æ¡ˆç”Ÿæˆå¤±è´¥ï¼š<span class="hljs-subst">{<span class="hljs-built_in">str</span>(e)}</span>"</span>)
            <span class="hljs-keyword">yield</span> <span class="hljs-string">"æŠ±æ­‰ï¼Œå¤„ç†é—®é¢˜æ—¶å‘ç”Ÿé”™è¯¯ï¼Œè¯·ç¨åå†è¯•~"</span>
</code></pre>
<p><strong>æµç¨‹å¦‚ä¸‹ï¼š</strong></p>
<ol start="0">
<li>
<p><strong>å‰ç½®æ ¡éªŒ</strong></p>
<ul>
<li>æ£€æŸ¥å‘é‡æ•°æ®åº“æ˜¯å¦åˆå§‹åŒ–ï¼ˆå³æ˜¯å¦å·²ä¸Šä¼ æ–‡æ¡£ï¼‰ ã€‚</li>
<li>æ£€æŸ¥ç”¨æˆ·é—®é¢˜æ˜¯å¦æœ‰æ•ˆï¼ˆéç©ºå­—ç¬¦ä¸²ï¼‰ã€‚</li>
</ul>
</li>
<li>
<p><strong>å¯¹è¯å†å²åŠ è½½</strong></p>
<p>é€šè¿‡ <code>ConversationBufferWindowMemoryï¼ˆæ»‘åŠ¨çª—å£è®°å¿†ï¼‰</code> ç®¡ç†å¯¹è¯å†å²ï¼Œé…ç½® <code>k=50</code>ï¼Œä»…ä¿ç•™æœ€è¿‘ 50 è½®å¯¹è¯ï¼ˆ1 è½® = 1 æ¬¡ç”¨æˆ·æé—® + 1 æ¬¡åŠ©æ‰‹å›ç­”ï¼‰ï¼Œæ—¢ä¿è¯å¯¹è¯è¿è´¯æ€§ï¼Œåˆé¿å…é•¿å¯¹è¯å¯¼è‡´çš„ Token è¶…é™é—®é¢˜ã€‚</p>
</li>
<li>
<p><strong>æ£€ç´¢ç›¸å…³æ–‡æ¡£ï¼ˆè·å–å›ç­”çš„äº‹å®ä¾æ®ï¼‰</strong></p>
<p>åŸºäºå‘é‡æ£€ç´¢æŠ€æœ¯ï¼Œä»å·²ä¸Šä¼ æ–‡æ¡£ä¸­æå–ä¸ç”¨æˆ·é—®é¢˜è¯­ä¹‰ç›¸ä¼¼çš„æ–‡æœ¬ç‰‡æ®µï¼š</p>
<ul>
<li>å°†å‘é‡æ•°æ®åº“è½¬ä¸ºæ£€ç´¢å™¨ï¼ˆ<code>self.vectordb.as_retriever</code>ï¼‰ï¼›</li>
<li>é…ç½® <code>search_kwargs={"k": 5}</code>ï¼šæ£€ç´¢ä¸ç”¨æˆ·é—®é¢˜æœ€ç›¸å…³çš„ 5 ä¸ªæ–‡æœ¬ç‰‡æ®µï¼ˆ<code>k</code> å€¼å¯è°ƒæ•´ï¼Œå¹³è¡¡ç›¸å…³æ€§ä¸ä¸Šä¸‹æ–‡é•¿åº¦ï¼‰ï¼›</li>
<li>æå–æ£€ç´¢ç»“æœçš„æ–‡æœ¬å†…å®¹ï¼Œæ‹¼æ¥ä¸º <code>context_text</code>ï¼ˆä¾› LLM å‚è€ƒï¼‰ã€‚</li>
</ul>
</li>
<li>
<p><strong>æ£€ç´¢æ–‡æ¡£é‡æ’ï¼ˆæå‡æ–‡æ¡£ç›¸å…³æ€§ç²¾åº¦ï¼‰</strong></p>
<p>å¯¹åŸå§‹æ£€ç´¢ç»“æœè¿›è¡Œç²¾ç»†åŒ–ç­›é€‰ï¼Œè¿›ä¸€æ­¥æå‡æ–‡æ¡£ä¸é—®é¢˜çš„åŒ¹é…åº¦ï¼š</p>
<ul>
<li>è‹¥é…ç½®äº†é‡æ’æ¨¡å‹ï¼ˆ<code>self.reranker_model</code>ï¼‰ï¼Œåˆ™è°ƒç”¨æ¨¡å‹å¯¹åŸå§‹æ£€ç´¢çš„æ–‡æœ¬ç‰‡æ®µè¿›è¡Œé‡æ’ï¼›</li>
<li>é‡æ’è§„åˆ™ï¼šæŒ‰ã€Œç›¸å…³æ€§åˆ†æ•°ã€ç­›é€‰ Top-N ä¸ªç‰‡æ®µï¼ˆ<code>top_n</code> å¯é…ç½®ï¼‰ï¼Œå¹¶è¿‡æ»¤åˆ†æ•°ä½äºé˜ˆå€¼ï¼ˆ<code>score_threshold</code>ï¼‰çš„ç‰‡æ®µï¼›</li>
<li>é™çº§å¤„ç†ï¼šè‹¥é‡æ’åæ— ç¬¦åˆæ¡ä»¶çš„ç‰‡æ®µï¼Œåˆ™é»˜è®¤é€‰å–åŸå§‹æ£€ç´¢ç»“æœçš„å‰ N ä¸ªç‰‡æ®µã€‚</li>
</ul>
</li>
<li>
<p><strong>ç»„åˆæç¤ºè¯</strong></p>
<ul>
<li><strong>åˆå§‹åŒ–ä¸Šä¸‹æ–‡å¯¹è¯åˆ—è¡¨</strong>ï¼šcombine_contexts = []ã€‚</li>
<li><strong>æ·»åŠ å†å²å¯¹è¯è®°å¿†</strong>ï¼šä»è®°å¿†ä¸­åŠ è½½æœ€è¿‘å¯¹è¯åˆ—è¡¨ï¼ˆMessageå¯¹è±¡ï¼‰åˆ°ä¸Šä¸‹æ–‡å¯¹è¯ä¸­ï¼Œè®© LLM æ¸…æ™°è¯†åˆ«å†å²äº¤äº’é€»è¾‘ã€‚</li>
<li><strong>å®šä¹‰æç¤ºè¯æ¨¡æ¿ï¼ˆ<code>system_prompt</code>ï¼‰</strong> ï¼šå®šä¹‰ LLM çš„è§’è‰²ã€å›ç­”è§„åˆ™ï¼Œå¦‚ï¼šä»…ä½¿ç”¨æä¾›çš„æ–‡æ¡£ç‰‡æ®µå›ç­”ï¼Œæ— ç›¸å…³ä¿¡æ¯æ—¶æ˜ç¡®å‘ŠçŸ¥ï¼Œä¸ç¼–é€ å†…å®¹ã€‚</li>
<li><strong>æ ¼å¼åŒ–æç¤ºæ¨¡æ¿</strong>ï¼šå°†<code>context_text</code>ï¼ˆæ£€ç´¢åˆ°çš„æ–‡æ¡£ï¼‰ã€<code>question</code>ï¼ˆå½“å‰é—®é¢˜ï¼‰ æ ¼å¼åŒ–æç¤ºæ¨¡æ¿ï¼Œç”Ÿæˆç»“æ„åŒ–çš„ <code>final_prompt</code>ï¼Œå¹¶ä½œä¸ºç”¨æˆ·è¾“å…¥æ·»åŠ åˆ°ä¸Šä¸‹æ–‡å¯¹è¯ä¸­ã€‚</li>
</ul>
</li>
</ol>
<ul>
<li>
<p><strong>æµå¼è°ƒç”¨LLMè¾“å‡ºç»“æœåŠè®°å¿†æ›´æ–°</strong></p>
<p>å®ç°æµå¼è¾“å‡ºå›ç­”ï¼Œå¹¶å°†æœ¬æ¬¡äº¤äº’å­˜å…¥è®°å¿†ä»¥æ”¯æ’‘åç»­å¯¹è¯ï¼š</p>
<ul>
<li><strong>æµå¼ç”Ÿæˆå›ç­”</strong>ï¼šè°ƒç”¨ <code>self.llm.stream(combine_contexts)</code>ï¼Œå°†å®Œæ•´ä¸Šä¸‹æ–‡æäº¤ç»™ LLMï¼Œé€å—è¯»å–ç”Ÿæˆå™¨ä¸­çš„å“åº”ç‰‡æ®µå¹¶å®æ—¶è¿”å›ç»™ç”¨æˆ·ï¼ŒåŒæ—¶å°†ç‰‡æ®µæ‹¼æ¥ä¸º <code>self.current_stream_answer</code>ï¼ˆå®Œæ•´ç­”æ¡ˆï¼‰ï¼›</li>
<li><strong>å¯¹è¯è®°å¿†æ›´æ–°</strong>ï¼šå½“å®Œæ•´ç­”æ¡ˆç”Ÿæˆåï¼Œå°†æœ¬æ¬¡é—®ç­”å¯¹ï¼ˆç”¨æˆ·é—®é¢˜ <code>question</code> + å®Œæ•´ç­”æ¡ˆ <code>self.current_stream_answer</code>ï¼‰å­˜å…¥è®°å¿† <code>ConversationBufferWindowMemory</code>ï¼Œä¾›ä¸‹ä¸€è½®å¯¹è¯ã€‚</li>
</ul>
<p>æµå¼è¾“å‡ºæå‡ç”¨æˆ·ä½“éªŒï¼Œè®°å¿†æ›´æ–°ä¿éšœä¸‹ä¸€è½®å¯¹è¯å¯å¤ç”¨æœ¬æ¬¡äº¤äº’ä¿¡æ¯ï¼Œç»´æŒä¸Šä¸‹æ–‡è¿è´¯ã€‚</p>
</li>
</ul>
<h6 data-id="heading-22">äº”ã€æ¸…ç©ºæ•°æ®åº“<code>clear_database()</code></h6>
<p>æ”¯æŒé‡æ–°ä¸Šä¼ æ–‡æ¡£ã€æ¸…ç©ºå†å²çŸ¥è¯†ã€‚</p>
<pre><code class="hljs language-python" lang="python">    <span class="hljs-keyword">def</span> <span class="hljs-title function_">clear_database</span>(<span class="hljs-params">self</span>) -&gt; <span class="hljs-built_in">bool</span>:
        <span class="hljs-string">"""æ¸…ç©ºå‘é‡æ•°æ®åº“"""</span>
        <span class="hljs-keyword">try</span>:
            <span class="hljs-keyword">if</span> self.vectordb:
                self.vectordb.reset_collection()

            <span class="hljs-comment"># æ¸…é™¤è®°å¿†</span>
            self.memory.clear()
            <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span>
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"é”™è¯¯ï¼šæ•°æ®åº“æ¸…ç©ºå¤±è´¥ï¼š<span class="hljs-subst">{<span class="hljs-built_in">str</span>(e)}</span>"</span>)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span>
</code></pre>
<p>æ¸…ç©º Chroma å‘é‡æ•°æ®åº“çš„é›†åˆå†…æ•°æ®ï¼ˆ<code>reset_collection</code>ï¼‰ã€‚</p>
<h5 data-id="heading-23">7 å‰ç«¯ç•Œé¢ï¼ˆmain.pyï¼‰</h5>
<p>é€šè¿‡ Streamlit æ¡†æ¶æ­å»º Web äº¤äº’ç•Œé¢ï¼Œé€šè¿‡ â€œä¸Šä¼ æ–‡æ¡£â†’æé—®â€ çš„æ“ä½œï¼Œè·å¾—åŸºäºæ–‡æ¡£çš„ç²¾å‡†å›ç­”ï¼ŒåŒæ—¶æ”¯æŒæµå¼è¾“å‡ºï¼ˆè¾¹ç”Ÿæˆè¾¹å±•ç¤ºï¼‰å’ŒèŠå¤©è¿ç»­æ€§ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">import os
import sys

import streamlit as st
from dotenv import load_dotenv

<span class="hljs-comment"># å°†å½“å‰è„šæœ¬æ‰€åœ¨ç›®å½•åŠ å…¥Pythonæœç´¢è·¯å¾„ï¼ˆç¡®ä¿èƒ½æ‰¾åˆ°servicesç›®å½•ä¸‹çš„RAGServiceï¼‰</span>
<span class="hljs-attr">current_dir</span> = os.path.dirname(os.path.abspath(__file__))
sys.path.append(current_dir)

from services.rag_service_stream import RAGService

<span class="hljs-comment"># åŠ è½½ç¯å¢ƒå˜é‡</span>
load_dotenv()

<span class="hljs-comment"># é…ç½®é¡µé¢æ ‡é¢˜ã€å›¾æ ‡ã€å¸ƒå±€</span>
st.set_page_config(
    <span class="hljs-attr">page_title</span>=<span class="hljs-string">"RAGçŸ¥è¯†é—®ç­”åŠ©æ‰‹"</span>,
    <span class="hljs-attr">page_icon</span>=<span class="hljs-string">":robot:"</span>,
    <span class="hljs-attr">layout</span>=<span class="hljs-string">"wide"</span>
)


<span class="hljs-comment"># åˆå§‹åŒ–Streamlitä¼šè¯çŠ¶æ€ï¼ˆè·¨åˆ·æ–°ä¿å­˜æ•°æ®ï¼Œé¿å…é¡µé¢åˆ·æ–°åæ•°æ®ä¸¢å¤±ï¼‰</span>
def initialize_app():
    <span class="hljs-comment"># åˆå§‹åŒ–ä¼šè¯çŠ¶æ€</span>
    if "history" not in st.session_state:
        <span class="hljs-attr">st.session_state.history</span> = []

    <span class="hljs-comment"># ç”¨äºé‡ç½®æ–‡ä»¶ä¸Šä¼ æ¡†çŠ¶æ€çš„ä¼šè¯å˜é‡</span>
    if "upload_key" not in st.session_state:
        <span class="hljs-attr">st.session_state.upload_key</span> = <span class="hljs-number">0</span>

    <span class="hljs-comment"># åˆå§‹åŒ–RAGé…ç½®å‚æ•°</span>
    if "retrieve_k" not in st.session_state:
        <span class="hljs-attr">st.session_state.retrieve_k</span> = <span class="hljs-number">6</span>  <span class="hljs-comment"># é»˜è®¤æ£€ç´¢æ–‡æ¡£æ•°é‡</span>
    if "enable_reranker" not in st.session_state:
        <span class="hljs-attr">st.session_state.enable_reranker</span> = <span class="hljs-literal">False</span>  <span class="hljs-comment"># é»˜è®¤å¼€å¯é‡æ’</span>
    if "rerank_top_n" not in st.session_state:
        <span class="hljs-attr">st.session_state.rerank_top_n</span> = <span class="hljs-number">5</span>  <span class="hljs-comment"># é‡æ’åä¿ç•™æ–‡æ¡£æ•°é‡</span>

    <span class="hljs-comment"># åˆå§‹åŒ–RAGæ ¸å¿ƒæœåŠ¡ï¼ˆå°è£…äº†æ–‡æ¡£å¤„ç†ã€å‘é‡å­˜å‚¨ã€æµå¼é—®ç­”çš„æ ¸å¿ƒé€»è¾‘ï¼‰</span>
    if "rag_service" not in st.session_state:
        <span class="hljs-attr">st.session_state.rag_service</span> = RAGService(
            <span class="hljs-attr">retrieve_k</span>=st.session_state.retrieve_k,
            <span class="hljs-attr">enable_reranker</span>=st.session_state.enable_reranker,
            <span class="hljs-attr">rerank_top_n</span>=st.session_state.rerank_top_n,
            <span class="hljs-comment"># é‡æ’æ¨¡å‹é…ç½®ï¼šç”¨äºå¯¹æ£€ç´¢ç»“æœè¿›è¡Œè¯­ä¹‰é‡æ’åº.é»˜è®¤ä½¿ç”¨BAAIçš„bge-reranker-v2-m3ï¼ˆä¸­æ–‡æ•ˆæœæ€§ä»·æ¯”è¾ƒé«˜ï¼‰ã€‚</span>
            <span class="hljs-comment"># è¿™é‡ŒåŠ è½½æœ¬åœ°è·¯å¾„æ¨¡å‹ï¼ˆéœ€æ‰‹åŠ¨ä¸‹è½½æ¨¡å‹æ–‡ä»¶åˆ°æŒ‡å®šè·¯å¾„ï¼‰</span>
            <span class="hljs-comment"># a.æ¨¡å‹æ–‡ä»¶è·å–åœ°å€ï¼šhttps://modelscope.cn/models/BAAI/bge-reranker-v2-m3</span>
            <span class="hljs-comment"># b.éœ€ä¸‹è½½æ–‡ä»¶ï¼šconfig.jsonã€model.safetensorsã€special_tokens_map.jsonã€tokenizer.jsonã€tokenizer_config.json</span>
            <span class="hljs-attr">model_name_or_path</span>=<span class="hljs-string">"../../data/models_reranker_data/BAAI/bge-reranker-v2-m3"</span>  <span class="hljs-comment"># æŒ‡å®šé‡æ’æ¨¡å‹æœ¬åœ°å­˜å‚¨è·¯å¾„</span>
        )


initialize_app()

<span class="hljs-comment"># å®šä¹‰ä¾§è¾¹æ åŒºåŸŸ</span>
with st.sidebar:
    st.subheader("RAGçŸ¥è¯†é—®ç­”åŠ©æ‰‹")

    <span class="hljs-comment"># RAGæ£€ç´¢é…ç½®åŒºåŸŸ</span>
    <span class="hljs-comment"># 1. æ£€ç´¢æ•°é‡æ§åˆ¶</span>
    <span class="hljs-attr">retrieve_k</span> = st.slider(
        "åˆå§‹æ£€ç´¢æ–‡æ¡£æ•°é‡ (retrieve_k)",
        <span class="hljs-attr">min_value</span>=<span class="hljs-number">1</span>, max_value=<span class="hljs-number">10</span>, value=st.session_state.retrieve_k, step=<span class="hljs-number">1</span>,
        <span class="hljs-attr">help</span>=<span class="hljs-string">"ä»å‘é‡åº“ä¸­åˆå§‹æ£€ç´¢çš„æ–‡æ¡£æ•°é‡ï¼Œæ•°é‡è¶Šå¤šè¦†ç›–èŒƒå›´è¶Šå¹¿ï¼Œä½†å¯èƒ½å¼•å…¥å™ªéŸ³"</span>
    )

    <span class="hljs-comment"># 2. é‡æ’åŠŸèƒ½å¼€å…³</span>
    <span class="hljs-attr">enable_reranker</span> = st.toggle(
        "å¼€å¯æ£€ç´¢ç»“æœé‡æ’",
        <span class="hljs-attr">value</span>=st.session_state.enable_reranker,
        <span class="hljs-attr">help</span>=<span class="hljs-string">"å¼€å¯åä¼šå¯¹æ£€ç´¢åˆ°çš„æ–‡æ¡£è¿›è¡Œè¯­ä¹‰é‡æ’åºï¼Œæå‡å›ç­”è´¨é‡ï¼Œä½†ä¼šå¢åŠ å“åº”æ—¶é—´"</span>
    )

    <span class="hljs-comment"># 3. é‡æ’åä¿ç•™æ•°é‡ï¼ˆä»…åœ¨å¼€å¯é‡æ’æ—¶å¯é…ç½®ï¼‰</span>
    <span class="hljs-attr">rerank_top_n</span> = st.slider(
        "é‡æ’åä¿ç•™æ–‡æ¡£æ•°é‡ (rerank_top_n)",
        <span class="hljs-attr">min_value</span>=<span class="hljs-number">1</span>, max_value=<span class="hljs-number">8</span>, value=st.session_state.rerank_top_n, step=<span class="hljs-number">1</span>,
        <span class="hljs-attr">help</span>=<span class="hljs-string">"é‡æ’åæœ€ç»ˆä¿ç•™çš„æ–‡æ¡£æ•°é‡ï¼Œéœ€å°äºç­‰äºåˆå§‹æ£€ç´¢æ•°é‡"</span>,
        <span class="hljs-attr">disabled</span>=not enable_reranker  <span class="hljs-comment"># å…³é—­é‡æ’æ—¶ç¦ç”¨è¯¥å‚æ•°</span>
    )

    <span class="hljs-comment"># é™åˆ¶rerank_top_nä¸è¶…è¿‡retrieve_k</span>
    if rerank_top_n &gt; retrieve_k:
        <span class="hljs-attr">rerank_top_n</span> = retrieve_k
        st.warning(f"é‡æ’ä¿ç•™æ•°é‡è‡ªåŠ¨è°ƒæ•´ä¸º {retrieve_k}ï¼ˆä¸è¶…è¿‡åˆå§‹æ£€ç´¢æ•°é‡ï¼‰")

    <span class="hljs-comment"># 4. åº”ç”¨é…ç½®æŒ‰é’®</span>
    if st.button("åº”ç”¨é…ç½®", <span class="hljs-attr">use_container_width</span>=<span class="hljs-literal">True</span>, type=<span class="hljs-string">"primary"</span>):
        <span class="hljs-comment"># æ›´æ–°ä¼šè¯çŠ¶æ€</span>
        <span class="hljs-attr">st.session_state.enable_reranker</span> = enable_reranker
        <span class="hljs-attr">st.session_state.retrieve_k</span> = retrieve_k
        <span class="hljs-attr">st.session_state.rerank_top_n</span> = rerank_top_n

        <span class="hljs-comment"># æ›´æ–°RAGServiceçš„é…ç½®</span>
        <span class="hljs-attr">st.session_state.rag_service.enable_reranker</span> = enable_reranker
        <span class="hljs-attr">st.session_state.rag_service.retrieve_k</span> = retrieve_k
        <span class="hljs-attr">st.session_state.rag_service.rerank_top_n</span> = rerank_top_n

        st.success("é…ç½®å·²æ›´æ–°ç”Ÿæ•ˆï¼")

    <span class="hljs-comment"># æ–‡æ¡£ç®¡ç†åŒºåŸŸ</span>
    st.divider()  <span class="hljs-comment"># æ·»åŠ åˆ†éš”çº¿</span>
    <span class="hljs-comment"># 1. å¤šæ–‡ä»¶ä¸Šä¼ ï¼ˆæ”¯æŒPDF/DOCX/TXT/MDï¼Œä¸RAGServiceæ”¯æŒçš„æ ¼å¼ä¸€è‡´ï¼‰</span>
    <span class="hljs-attr">uploaded_files</span> = st.file_uploader(
        "ä¸Šä¼ æ–‡æ¡£ (PDF/DOCX/txt/md)",
        <span class="hljs-attr">accept_multiple_files</span>=<span class="hljs-literal">True</span>,
        <span class="hljs-attr">key</span>=f<span class="hljs-string">"file_uploader_{st.session_state.upload_key}"</span>  <span class="hljs-comment"># åŠ¨æ€ç”Ÿæˆkey</span>
    )
    <span class="hljs-comment"># å¤„ç†ä¸Šä¼ çš„æ–‡ä»¶ï¼šè°ƒç”¨RAGServiceçš„process_documentæ–¹æ³•ï¼Œå®Œæˆâ€œè§£æâ†’åˆ†å—â†’å‘é‡åŒ–â†’å…¥åº“â€</span>
    if uploaded_files:
        with st.spinner("æ­£åœ¨å¤„ç†æ–‡æ¡£..."):
            for file in uploaded_files:
                st.session_state.rag_service.process_document(file)
            st.success(f"å·²æˆåŠŸå¤„ç† {len(uploaded_files)} ä¸ªæ–‡æ¡£")
            <span class="hljs-comment"># å¤„ç†å®Œæˆåé‡ç½®ä¸Šä¼ æ¡†ï¼šé€šè¿‡æ”¹å˜keyå€¼å®ç°</span>
            st.session_state.upload_key += 1

    <span class="hljs-comment"># 2. æ¸…ç©ºçŸ¥è¯†åº“ï¼ˆåˆ é™¤å‘é‡åº“æ•°æ®+æ¸…ç©ºèŠå¤©å†å²ï¼Œé‡ç½®æ•´ä¸ªé—®ç­”ç¯å¢ƒï¼‰</span>
    if st.button("æ¸…ç©ºçŸ¥è¯†åº“", <span class="hljs-attr">type</span>=<span class="hljs-string">"secondary"</span>, use_container_width=<span class="hljs-literal">True</span>):
        with st.spinner("æ­£åœ¨æ¸…ç©ºçŸ¥è¯†åº“..."):
            <span class="hljs-comment"># æ¸…ç©ºå‘é‡å­˜å‚¨</span>
            st.session_state.rag_service.clear_database()
            <span class="hljs-comment"># æ¸…ç©ºèŠå¤©å†å²</span>
            <span class="hljs-attr">st.session_state.history</span> = []
            st.success("çŸ¥è¯†åº“å·²æˆåŠŸæ¸…ç©º")

<span class="hljs-comment"># ä¸»ç•Œé¢ - èŠå¤©åŒºåŸŸ</span>
st.header("ä»0å¼€å§‹ï¼šç”¨ Streamlit + LangChainæ­å»ºä¸€ä¸ªç®€å•åŸºäºRAGé—®ç­”èŠå¤©åŠ©æ‰‹")

<span class="hljs-comment"># 1. å±•ç¤ºèŠå¤©å†å²ï¼ˆéå†session_state.historyï¼ŒæŒ‰è§’è‰²æ˜¾ç¤ºæ¶ˆæ¯ï¼‰</span>
for message in st.session_state.history:
    with st.chat_message(message<span class="hljs-section">["role"]</span>):
        st.markdown(message<span class="hljs-section">["content"]</span>)

<span class="hljs-comment"># 2. å¤„ç†ç”¨æˆ·è¾“å…¥</span>
<span class="hljs-attr">user_input</span> = st.chat_input(<span class="hljs-string">"è¯·é—®æœ‰ä»€ä¹ˆå¯ä»¥å¸®åŠ©æ‚¨ï¼Ÿ"</span>)
if user_input:
    <span class="hljs-comment"># æ­¥éª¤1ï¼šå°†ç”¨æˆ·æ¶ˆæ¯æ·»åŠ åˆ°ä¼šè¯å†å²</span>
    st.session_state.history.append({"role": "user", "content": user_input})
    with st.chat_message("user"):
        st.markdown(user_input)

    <span class="hljs-comment"># æ­¥éª¤2ï¼šè°ƒç”¨RAGæœåŠ¡ç”Ÿæˆæµå¼å›ç­”ï¼Œå¹¶æ˜¾ç¤º</span>
    with st.chat_message("assistant"):
        with st.spinner("æ€è€ƒä¸­..."):
            <span class="hljs-comment"># RAGå›ç­”ï¼Œéæµå¼ï¼šå¤§æ¨¡å‹å®Œæ•´è¾“å‡ºåæ‰å±•ç¤ºå‡ºæ¥</span>
            <span class="hljs-comment"># full_answer = rag_service.get_answer(user_input)</span>
            <span class="hljs-comment"># st.markdown(full_answer)</span>

            <span class="hljs-comment"># RAGå›ç­”ï¼Œæµå¼è¾“å‡º</span>
            <span class="hljs-attr">full_answer</span> = <span class="hljs-string">""</span>  <span class="hljs-comment"># ç”¨äºå­˜å‚¨å®Œæ•´çš„å›å¤å†…å®¹</span>
            <span class="hljs-comment"># è°ƒç”¨RAGServiceçš„get_answer_streamï¼ˆæµå¼æ–¹æ³•ï¼‰ï¼Œç”¨st.write_streamå®ç°è¾¹ç”Ÿæˆè¾¹æ˜¾ç¤º</span>
            for chunk in st.write_stream(st.session_state.rag_service.get_answer_stream(user_input)):
                full_answer += chunk

            <span class="hljs-comment"># æ­¥éª¤3ï¼šå°†å®Œæ•´çš„åŠ©æ‰‹å›ç­”æ·»åŠ åˆ°ä¼šè¯å†å²ï¼Œä¾›ä¸‹æ¬¡åˆ·æ–°æ—¶å±•ç¤º</span>
            st.session_state.history.append({"role": "assistant", "content": full_answer})
            st.rerun()
</code></pre>
<p>äº¤äº’æµç¨‹å¦‚ä¸‹ï¼š</p>
<ol start="0">
<li><strong>å‡†å¤‡é˜¶æ®µ</strong>ï¼šç”¨æˆ·æ‰“å¼€ç½‘é¡µï¼Œçœ‹åˆ°ä¾§è¾¹æ çš„ â€œæ–‡æ¡£ä¸Šä¼ â€ å’Œä¸»ç•Œé¢çš„èŠå¤©åŒºåŸŸï¼›</li>
<li><strong>ä¸Šä¼ æ–‡æ¡£</strong>ï¼šç”¨æˆ·åœ¨ä¾§è¾¹æ é€‰æ‹© 1 ä¸ªæˆ–å¤šä¸ªæ–‡æ¡£ï¼ˆPDF/DOCX ç­‰ï¼‰ï¼Œç‚¹å‡»ä¸Šä¼ ï¼Œç³»ç»Ÿæ˜¾ç¤º â€œæ­£åœ¨å¤„ç†æ–‡æ¡£...â€ï¼Œå®Œæˆåæç¤º â€œå¤„ç†æˆåŠŸâ€ï¼›</li>
<li><strong>æé—®äº¤äº’</strong>ï¼šç”¨æˆ·åœ¨åº•éƒ¨è¾“å…¥æ¡†æé—®ï¼ˆå¦‚ â€œå…¬å¸çš„å‘å±•å†ç¨‹ï¼Ÿâ€ï¼‰ï¼Œç‚¹å‡»å‘é€ï¼›</li>
<li><strong>æµå¼å›ç­”</strong>ï¼šç³»ç»Ÿæ˜¾ç¤º â€œæ€è€ƒä¸­â€ï¼Œå¹¶å¼€å§‹é€å­— / é€å¥æ˜¾ç¤ºå›ç­”ï¼ˆæµå¼è¾“å‡ºï¼‰ï¼ŒåŒæ—¶å°†ç”¨æˆ·é—®é¢˜å’ŒåŠ©æ‰‹å›ç­”ä¿å­˜åˆ°èŠå¤©å†å²ï¼›</li>
<li><strong>é‡ç½®æ“ä½œ</strong>ï¼šè‹¥ç”¨æˆ·æƒ³åˆ‡æ¢æ–‡æ¡£ï¼Œå¯ç‚¹å‡»ä¾§è¾¹æ  â€œæ¸…ç©ºçŸ¥è¯†åº“â€ï¼Œç³»ç»Ÿåˆ é™¤æ‰€æœ‰æ–‡æ¡£å’ŒèŠå¤©å†å²ï¼Œæ¢å¤åˆå§‹çŠ¶æ€ã€‚</li>
</ol>
<h3 data-id="heading-24">4.6 è¿è¡Œæµ‹è¯•</h3>
<ol start="0">
<li>
<p>ç¡®ä¿<code>.env</code>æ–‡ä»¶å·²æ­£ç¡®é…ç½® API å¯†é’¥</p>
</li>
<li>
<p>åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹ï¼Œæ‰“å¼€ç»ˆç«¯æ‰§è¡Œå‘½ä»¤ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">cd simple_rag_assistant
streamlit run main.py
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/67139dac14d647a69a85c4c578643c81~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bGF5b6u:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770803987&amp;x-signature=Mt66Ag9OcAqEseFoMwgibRsS9Nw%3D" alt="image-20260104144926176" loading="lazy"/></p>
<p>ç³»ç»Ÿå°†å¯åŠ¨ Web æœåŠ¡ï¼Œé»˜è®¤åœ°å€ä¸º <a href="https://link.juejin.cn?target=http%3A%2F%2Flocalhost%3A8501%2F" target="_blank" title="http://localhost:8501/" ref="nofollow noopener noreferrer">http://localhost:8501</a></p>
</li>
<li>
<p>æµè§ˆå™¨ä¼šè‡ªåŠ¨æ‰“å¼€ç•Œé¢ï¼Œä½¿ç”¨æµç¨‹ï¼š</p>
<ul>
<li>åœ¨ä¾§è¾¹æ ä¸Šä¼ æ–‡æ¡£ï¼ˆæ”¯æŒå¤šæ–‡ä»¶ï¼‰ã€‚</li>
<li>ç­‰å¾…æ–‡æ¡£å¤„ç†å®Œæˆï¼ˆä¼šæ˜¾ç¤ºå¤„ç†æˆåŠŸæç¤ºï¼‰ã€‚</li>
<li>åœ¨åº•éƒ¨è¾“å…¥æ¡†æé—®ï¼ŒåŠ©æ‰‹ä¼šåŸºäºä¸Šä¼ çš„æ–‡æ¡£å†…å®¹å›ç­”ã€‚</li>
</ul>
</li>
</ol>
<p><img src="" alt="image-20260104160926112" loading="lazy"/></p>
<p><img src="" alt="image-20260104161348195" loading="lazy"/></p>
<p>å®Œæ•´ä»£ç ä½äºé¡¹ç›®æ ¹ç›®å½•ä¸‹ï¼š<code>practice_cases/simple_rag_assistant</code></p>
<p>å®Œæ•´æºç åœ°å€ï¼š</p>
<ul>
<li>GitHub ä»“åº“ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftinyseeking%2Ftidy-agent-practice%2Ftree%2Fmain%2Fpractice_cases%2Fsimple_rag_assistant" target="_blank" title="https://github.com/tinyseeking/tidy-agent-practice/tree/main/practice_cases/simple_rag_assistant" ref="nofollow noopener noreferrer">github.com/tinyseekingâ€¦</a></li>
<li>Gitee ä»“åº“ï¼ˆå›½å†…ï¼‰ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Ftinyseeking%2Ftidy-agent-practice%2Ftree%2Fmain%2Fpractice_cases%2Fsimple_rag_assistant" target="_blank" title="https://gitee.com/tinyseeking/tidy-agent-practice/tree/main/practice_cases/simple_rag_assistant" ref="nofollow noopener noreferrer">gitee.com/tinyseekingâ€¦</a></li>
</ul>
<h3 data-id="heading-25">4.7 æ€»ç»“</h3>
<p>æœ¬é¡¹ç›®æ„å»ºäº†ä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„åŸºç¡€ RAG é—®ç­”ç³»ç»Ÿï¼Œé‡‡ç”¨æ¨¡å—åŒ–è®¾è®¡ä¿è¯äº†ä»£ç çš„å¯ç»´æŠ¤æ€§å’Œå¯æ‰©å±•æ€§ã€‚ä½ å¯ä»¥åœ¨æ­¤åŸºç¡€ä¸Šï¼Œè¿›ä¸€æ­¥æ‹“å±•æ ¸å¿ƒèƒ½åŠ›ä¸ä½¿ç”¨ä½“éªŒï¼Œå¦‚ï¼š</p>
<ol start="0">
<li>å¢åŠ æ›´å¤šæ–‡æ¡£æ ¼å¼æ”¯æŒï¼ˆå¦‚ PPTã€Excelï¼‰å’Œå¤šæ¨¡æ€è¯†åˆ«ã€‚</li>
<li>å®ç°æ–‡æ¡£åˆ†æ®µé¢„è§ˆå’Œå®šä½ã€‚</li>
<li>æ·»åŠ ç”¨æˆ·è®¤è¯å’Œæƒé™ç®¡ç†ã€‚</li>
<li>ä¼˜åŒ–æ£€ç´¢ç­–ç•¥ï¼Œå®ç°æ›´ç²¾å‡†çš„å†…å®¹åŒ¹é…ä¸é«˜æ•ˆå¬å›ã€‚</li>
<li>å¢åŠ æ¨¡å‹é€‰æ‹©åŠŸèƒ½ï¼Œå…è®¸ç”¨æˆ·åˆ‡æ¢ä¸åŒçš„ LLMã€‚</li>
</ol>
<p>é€šè¿‡è¯¥é¡¹ç›®ï¼Œä½ å°†æŒæ¡ RAG æŠ€æœ¯çš„æ ¸å¿ƒåŸç†ä¸å·¥ç¨‹åŒ–å®ç°æ–¹æ³•ï¼Œä¸ºåç»­æ­å»ºæ›´å¤æ‚çš„æ™ºèƒ½æ£€ç´¢å¢å¼ºç”Ÿæˆï¼ˆRAGï¼‰åº”ç”¨å¥ å®šæŠ€æœ¯åŸºç¡€ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[CSS ç»˜åˆ¶å‡ ä½•å›¾å½¢åŸç†ä¸å®æˆ˜æŒ‡å—]]></title>    <link>https://juejin.cn/post/7602579671476207635</link>    <guid>https://juejin.cn/post/7602579671476207635</guid>    <pubDate>2026-02-04T10:05:14.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602579671476207635" data-draft-id="7602776926327324726" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="CSS ç»˜åˆ¶å‡ ä½•å›¾å½¢åŸç†ä¸å®æˆ˜æŒ‡å—"/> <meta itemprop="keywords" content="å‰ç«¯,é¢è¯•,CSS"/> <meta itemprop="datePublished" content="2026-02-04T10:05:14.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="NEXT06"/> <meta itemprop="url" content="https://juejin.cn/user/1176918763246011"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            CSS ç»˜åˆ¶å‡ ä½•å›¾å½¢åŸç†ä¸å®æˆ˜æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1176918763246011/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    NEXT06
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T10:05:14.000Z" title="Wed Feb 04 2026 10:05:14 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨å‰ç«¯é¢è¯•ä¸­ï¼ŒCSS ç»˜åˆ¶å›¾å½¢ï¼ˆå°¤å…¶æ˜¯ä¸‰è§’å½¢ï¼‰æ˜¯ä¸€ä¸ªè€ƒå¯ŸåŸºç¡€çŸ¥è¯†æ·±åº¦çš„ç»å…¸é—®é¢˜ã€‚è¿™ä¸ªé—®é¢˜çœ‹ä¼¼ç®€å•ï¼Œå®åˆ™å¯ä»¥è€ƒå¯Ÿå¼€å‘è€…å¯¹Â <strong>ç›’æ¨¡å‹ï¼ˆBox Modelï¼‰</strong> Â çš„åº•å±‚ç†è§£ï¼Œä»¥åŠå¯¹Â <strong>ç°ä»£ CSS å±æ€§ï¼ˆå¦‚ clip-path, transformï¼‰</strong> Â çš„æŒæ¡ç¨‹åº¦ã€‚</p>
<p>æœ¬æ–‡å°†ä»åŸç†ã€å®æˆ˜ä»£ç åŠé¢è¯•å›ç­”ç­–ç•¥ä¸‰ä¸ªç»´åº¦è¿›è¡Œè§£æã€‚</p>
<h2 data-id="heading-0">ä¸€ã€ ç»å…¸æ–¹æ¡ˆï¼šåˆ©ç”¨ Borderï¼ˆè¾¹æ¡†ï¼‰æŒ¤å‹</h2>
<p>è¿™æ˜¯é¢è¯•ä¸­æœ€å¸¸è¢«é—®åˆ°çš„æ–¹æ¡ˆï¼Œä¹Ÿæ˜¯å…¼å®¹æ€§æœ€å¥½çš„æ–¹æ¡ˆï¼ˆæ”¯æŒ IE6+ï¼‰ã€‚æ ¸å¿ƒåœ¨äºç†è§£ CSS è¾¹æ¡†åœ¨ç›’æ¨¡å‹ä¸­çš„æ¸²æŸ“æœºåˆ¶ã€‚</p>
<h3 data-id="heading-1">åŸç†åˆ†æ</h3>
<p>åœ¨æ ‡å‡†ç›’æ¨¡å‹ä¸­ï¼Œè¾¹æ¡†æ˜¯å›´ç»•åœ¨å†…å®¹åŒºï¼ˆContentï¼‰ä¹‹å¤–çš„ã€‚å½“ä¸€ä¸ªå…ƒç´ çš„Â widthÂ å’ŒÂ heightÂ éƒ½è®¾ç½®ä¸ºÂ 0Â æ—¶ï¼Œå†…å®¹åŒºåŸŸæ¶ˆå¤±ï¼Œå…ƒç´ çš„å¤§å°å®Œå…¨ç”±è¾¹æ¡†å†³å®šã€‚</p>
<p>æ­¤æ—¶ï¼Œå¦‚æœè®¾ç½®äº†è¾ƒç²—çš„è¾¹æ¡†ï¼Œå››æ¡è¾¹æ¡†ä¼šåœ¨ä¸­å¿ƒæ±‡èšã€‚ç”±äºè¾¹æ¡†è¿æ¥å¤„éœ€è¦å¹³æ»‘è¿‡æ¸¡ï¼Œæµè§ˆå™¨åœ¨æ¸²æŸ“æ—¶ï¼Œä¼šä»¥Â <strong>45åº¦è§’ï¼ˆæ­£æ–¹å½¢æ—¶ï¼‰æˆ–æ ¹æ®å®½é«˜æ¯”è®¡ç®—çš„æ–œè§’</strong>Â å¯¹è¾¹æ¡†äº¤ç•Œå¤„è¿›è¡Œæ–œåˆ‡å¤„ç†ã€‚</p>
<p>å¦‚æœä¸è®¾ç½®é¢œè‰²ï¼Œè¾¹æ¡†çœ‹èµ·æ¥æ˜¯ä¸€ä¸ªçŸ©å½¢ï¼›ä½†å¦‚æœç»™å››æ¡è¾¹æ¡†è®¾ç½®ä¸åŒçš„é¢œè‰²ï¼Œè§†è§‰ä¸Šä¼šå‘ˆç°å‡ºå››ä¸ªä¸‰è§’å½¢æ‹¼åˆåœ¨ä¸€èµ·çš„æ•ˆæœã€‚</p>
<h3 data-id="heading-2">ä»£ç å®æˆ˜</h3>
<p>CSS</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.triangle-border</span> {
    <span class="hljs-attribute">width</span>: <span class="hljs-number">0</span>;
    <span class="hljs-attribute">height</span>: <span class="hljs-number">0</span>;
    <span class="hljs-comment">/* æ ¸å¿ƒæ­¥éª¤1ï¼šè®¾ç½®è¶³å¤Ÿå®½çš„è¾¹æ¡†ï¼Œå¹¶å°†å…¶é¢œè‰²è®¾ä¸ºé€æ˜ */</span>
    <span class="hljs-attribute">border</span>: <span class="hljs-number">50px</span> solid transparent; 
    <span class="hljs-comment">/* æ ¸å¿ƒæ­¥éª¤2ï¼šå•ç‹¬æŒ‡å®šæŸä¸€ä¸ªæ–¹å‘çš„è¾¹æ¡†é¢œè‰² */</span>
    <span class="hljs-comment">/* æƒ³è¦ç®­å¤´æœä¸Šï¼Œå°±ç»™ä¸‹è¾¹æ¡†ä¸Šè‰² */</span>
    <span class="hljs-attribute">border-bottom-color</span>: <span class="hljs-number">#007bff</span>; 
}
</code></pre>
<h3 data-id="heading-3">é¢è¯•è€ƒå¯Ÿç‚¹</h3>
<ol>
<li>
<p><strong>ä¸ºä»€ä¹ˆå®½é«˜è¦è®¾ä¸º 0ï¼Ÿ</strong><br/>
æ˜¯ä¸ºäº†æ¶ˆé™¤ä¸­é—´çš„å†…å®¹çŸ©å½¢åŒºåŸŸï¼Œè®©å››æ¡è¾¹æ¡†åœ¨ä¸­å¿ƒç›´æ¥æ¥è§¦ï¼Œä»è€Œåˆ©ç”¨è¾¹æ¡†äº¤ç•Œå¤„çš„æ–œåˆ‡ç‰¹æ€§å½¢æˆå°–è§’ã€‚</p>
</li>
<li>
<p><strong>å¦‚ä½•è°ƒæ•´ä¸‰è§’å½¢å½¢çŠ¶ï¼Ÿ</strong><br/>
é€šè¿‡è°ƒèŠ‚ä¸åŒæ–¹å‘Â border-widthÂ çš„æ•°å€¼ã€‚</p>
<ul>
<li><strong>ç­‰è…°/ç­‰è¾¹ä¸‰è§’å½¢</strong>ï¼šä¿æŒå·¦å³è¾¹æ¡†å®½åº¦ä¸€è‡´ã€‚</li>
<li><strong>ç›´è§’ä¸‰è§’å½¢</strong>ï¼šå°†æŸä¸€æ¡ç›¸é‚»è¾¹æ¡†çš„å®½åº¦è®¾ä¸º 0ï¼ˆä¾‹å¦‚Â border-top: 0ï¼‰ï¼Œåˆ©ç”¨å‰©ä½™è¾¹æ¡†çš„æŒ¤å‹å½¢æˆç›´è§’ã€‚</li>
</ul>
</li>
</ol>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9299dffd377d499b8d1305c5ef84244a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTkVYVDA2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770804314&amp;x-signature=SNcgH79jnTJtNMpp3tu53IrmMfc%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-4">äºŒã€ ç°ä»£æ–¹æ¡ˆï¼šåˆ©ç”¨ Clip-pathï¼ˆè£å‰ªè·¯å¾„ï¼‰</h2>
<p>éšç€æµè§ˆå™¨æŠ€æœ¯çš„å‘å±•ï¼Œclip-pathÂ æˆä¸ºäº†ç»˜åˆ¶ä¸è§„åˆ™å›¾å½¢çš„æœ€ä¼˜è§£ã€‚ä¸ Border æ³•åˆ©ç”¨â€œå‰¯ä½œç”¨â€ä¸åŒï¼ŒClip-path æ˜¯â€œå£°æ˜å¼â€çš„ç»˜å›¾æ–¹å¼ã€‚</p>
<h3 data-id="heading-5">åŸç†åˆ†æ</h3>
<p>clip-pathÂ å±æ€§ä¼šåœ¨å…ƒç´ å†…éƒ¨åˆ›å»ºä¸€ä¸ªè£å‰ªåŒºåŸŸï¼šåŒºåŸŸå†…çš„å†…å®¹å¯è§ï¼ŒåŒºåŸŸå¤–çš„å†…å®¹è¢«éšè—ã€‚</p>
<p>ä½¿ç”¨Â polygon()Â å‡½æ•°å¯ä»¥é€šè¿‡å®šä¹‰ä¸€ç³»åˆ—åæ ‡ç‚¹Â (x y)Â æ¥ç»˜åˆ¶å¤šè¾¹å½¢ã€‚åæ ‡ç³»ä»¥å…ƒç´ çš„å·¦ä¸Šè§’ä¸ºåŸç‚¹Â (0, 0)ï¼Œå³ä¸‹è§’ä¸ºÂ (100%, 100%)ã€‚</p>
<h3 data-id="heading-6">ä»£ç å®æˆ˜</h3>
<p>CSS</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.triangle-clip</span> {
    <span class="hljs-comment">/* ä¸ Border æ³•ä¸åŒï¼Œè¿™é‡Œéœ€è¦å…ƒç´ æœ‰å®é™…å®½é«˜ */</span>
    <span class="hljs-attribute">width</span>: <span class="hljs-number">100px</span>;
    <span class="hljs-attribute">height</span>: <span class="hljs-number">100px</span>;
    <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#007bff</span>;
    <span class="hljs-comment">/* å®šä¹‰ä¸‰ä¸ªé¡¶ç‚¹ï¼šé¡¶éƒ¨ä¸­é—´ã€å³ä¸‹ã€å·¦ä¸‹ */</span>
    <span class="hljs-attribute">clip-path</span>: <span class="hljs-built_in">polygon</span>(<span class="hljs-number">50%</span> <span class="hljs-number">0</span>, <span class="hljs-number">100%</span> <span class="hljs-number">100%</span>, <span class="hljs-number">0</span> <span class="hljs-number">100%</span>);
}
</code></pre>
<h3 data-id="heading-7">ä¼˜ç¼ºç‚¹å¯¹æ¯”ï¼ˆé¢è¯•åŠ åˆ†é¡¹ï¼‰</h3>
<ul>
<li><strong>Border æ³•</strong>ï¼šå…¼å®¹æ€§æå¥½ï¼Œä½†åœ¨å¤„ç†èƒŒæ™¯å›¾ç‰‡ã€æ¸å˜è‰²æˆ–é˜´å½±æ—¶éå¸¸å›°éš¾ï¼Œæœ¬è´¨ä¸Šæ˜¯ Hack æ‰‹æ®µã€‚</li>
<li><strong>Clip-path æ³•</strong>ï¼šè¯­ä¹‰æ¸…æ™°ï¼Œæ”¯æŒèƒŒæ™¯å›¾ç‰‡è£å‰ªã€æ”¯æŒæ¸å˜è‰²ï¼Œä¸”ä¸å½±å“ç›’æ¨¡å‹å®é™…å æ®çš„å¸ƒå±€ç©ºé—´ã€‚</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f15028d5d256497d84e35b3706f0c361~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTkVYVDA2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770804314&amp;x-signature=rhpYmRGOlHsFxL2%2F700IekQ6KeM%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-8">ä¸‰ã€ å®ç”¨å˜ä½“ï¼šåˆ©ç”¨ Transform ä¸ Border-radius</h2>
<p>é™¤äº†åŸºç¡€ä¸‰è§’å½¢ï¼Œé¢è¯•ä¸­å¸¸æ¶‰åŠç®­å¤´ã€æ‰‡å½¢ç­‰å›¾å½¢ï¼Œè¿™äº›é€šå¸¸ç»“åˆÂ transformÂ å’ŒÂ border-radiusÂ å®ç°ã€‚</p>
<h3 data-id="heading-9">1. ç©ºå¿ƒç®­å¤´ (Chevron)</h3>
<p>å¸¸ç”¨äºä¸‹æ‹‰èœå•æˆ–ç¿»é¡µæŒ‰é’®ã€‚<br/>
<strong>åŸç†</strong>ï¼šåˆ›å»ºä¸€ä¸ªæ­£æ–¹å½¢ï¼Œåªä¿ç•™ç›¸é‚»çš„ä¸¤æ¡è¾¹æ¡†ï¼ˆå¦‚ä¸Šè¾¹å’Œå³è¾¹ï¼‰ï¼Œç„¶åæ—‹è½¬ 45 åº¦ã€‚</p>
<p>CSS</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.arrow</span> {
    <span class="hljs-attribute">width</span>: <span class="hljs-number">10px</span>;
    <span class="hljs-attribute">height</span>: <span class="hljs-number">10px</span>;
    <span class="hljs-attribute">border</span>: <span class="hljs-number">2px</span> solid <span class="hljs-number">#333</span>;
    <span class="hljs-comment">/* éšè—ä¸¤æ¡è¾¹ */</span>
    <span class="hljs-attribute">border-bottom</span>: none;
    <span class="hljs-attribute">border-left</span>: none;
    <span class="hljs-comment">/* æ—‹è½¬ */</span>
    <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">rotate</span>(<span class="hljs-number">45deg</span>);
}
</code></pre>
<h3 data-id="heading-10">2. æ‰‡å½¢ (Sector)</h3>
<p><strong>åŸç†</strong>ï¼šåˆ©ç”¨Â border-radiusÂ å¯ä»¥å•ç‹¬æ§åˆ¶æ¯ä¸ªè§’åŠå¾„çš„ç‰¹æ€§ã€‚å°†æ­£æ–¹å½¢çš„ä¸€ä¸ªè§’è®¾ä¸ºåœ†å½¢ï¼ˆåŠå¾„ç­‰äºè¾¹é•¿ï¼‰ï¼Œå…¶ä½™è§’ä¸º 0ã€‚</p>
<p>CSS</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.sector</span> {
    <span class="hljs-attribute">width</span>: <span class="hljs-number">50px</span>;
    <span class="hljs-attribute">height</span>: <span class="hljs-number">50px</span>;
    <span class="hljs-attribute">background-color</span>: red;
    <span class="hljs-comment">/* é¡ºåºï¼šå·¦ä¸Š å³ä¸Š å³ä¸‹ å·¦ä¸‹ */</span>
    <span class="hljs-comment">/* å°†å·¦ä¸Šè§’è®¾ä¸ºåŠå¾„ï¼Œå½¢æˆ 1/4 åœ† */</span>
    <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">50px</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span>; 
}
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/31f7dad6696d42d7807e58028d8c501d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTkVYVDA2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770804314&amp;x-signature=LQDrpfxdUUfnZOFuXAiTyEO5euo%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-11">æ€»ç»“ï¼šé¢è¯•å›ç­”ç­–ç•¥</h2>
<p>å¦‚æœåœ¨é¢è¯•ä¸­è¢«é—®åˆ°â€œå¦‚ä½•ç”¨ CSS ç”»ä¸‰è§’å½¢â€ï¼Œå»ºè®®æŒ‰ä»¥ä¸‹é€»è¾‘æ¡ç†æ¸…æ™°åœ°å›ç­”ï¼š</p>
<ol>
<li><strong>é¦–é€‰æ–¹æ¡ˆï¼ˆBorder æ³•ï¼‰</strong> ï¼šé¦–å…ˆæ¼”ç¤º Border æ³•ï¼Œå› ä¸ºè¿™æ˜¯æœ€åŸºç¡€çš„ CSS åŸç†ã€‚é‡ç‚¹è§£é‡Šâ€œå®½é«˜ä¸º 0â€å’Œâ€œé€æ˜è¾¹æ¡†â€å¦‚ä½•åˆ©ç”¨ç›’æ¨¡å‹æ¸²æŸ“æœºåˆ¶å½¢æˆä¸‰è§’å½¢ã€‚</li>
<li><strong>è¿›é˜¶æ–¹æ¡ˆï¼ˆClip-path æ³•ï¼‰</strong> ï¼šéšåè¡¥å……è¯´æ˜ï¼Œå¦‚æœåœºæ™¯éœ€è¦æ˜¾ç¤ºèƒŒæ™¯å›¾ç‰‡æˆ–æ¸å˜è‰²ï¼Œclip-pathÂ æ˜¯æ›´ç°ä»£ã€æ›´è§„èŒƒçš„è§£å†³æ–¹æ¡ˆï¼Œè¿™èƒ½ä½“ç°ä½ å¯¹æ–°ç‰¹æ€§çš„å…³æ³¨ã€‚</li>
<li><strong>ç‰¹æ®Šåœºæ™¯</strong>ï¼šå¦‚æœæ˜¯ç”»ç©ºå¿ƒç®­å¤´ï¼ŒæŒ‡å‡ºä½¿ç”¨Â transform: rotateÂ é…åˆå•ä¾§è¾¹æ¡†æ˜¯æœ€é«˜æ•ˆçš„æ–¹æ³•ã€‚</li>
<li><strong>é¿å‘æŒ‡å—</strong>ï¼šæåŠå°½é‡é¿å…ä½¿ç”¨Â linear-gradientÂ æ‹¼å‡‘ä¸‰è§’å½¢ï¼Œå› ä¸ºå…¶è®¡ç®—å¤æ‚ä¸”å®¹æ˜“äº§ç”Ÿé”¯é½¿ï¼Œç»´æŠ¤æˆæœ¬é«˜ã€‚</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ‹…å¿ƒ DataX è¿ç§»åˆ° Apache SeaTunnel æˆæœ¬é«˜ï¼Ÿä¸€ç¯‡æŒ‡å—æ‰‹æŠŠæ‰‹å¸¦ä½ å¹³æ»‘åˆ‡æ¢]]></title>    <link>https://juejin.cn/post/7602554905271353344</link>    <guid>https://juejin.cn/post/7602554905271353344</guid>    <pubDate>2026-02-04T09:35:24.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602554905271353344" data-draft-id="7602554905270730752" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ‹…å¿ƒ DataX è¿ç§»åˆ° Apache SeaTunnel æˆæœ¬é«˜ï¼Ÿä¸€ç¯‡æŒ‡å—æ‰‹æŠŠæ‰‹å¸¦ä½ å¹³æ»‘åˆ‡æ¢"/> <meta itemprop="keywords" content="Java,å¤§æ•°æ®,å¼€æº"/> <meta itemprop="datePublished" content="2026-02-04T09:35:24.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç™½é²¸å¼€æº"/> <meta itemprop="url" content="https://juejin.cn/user/3870725052049454"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ‹…å¿ƒ DataX è¿ç§»åˆ° Apache SeaTunnel æˆæœ¬é«˜ï¼Ÿä¸€ç¯‡æŒ‡å—æ‰‹æŠŠæ‰‹å¸¦ä½ å¹³æ»‘åˆ‡æ¢
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3870725052049454/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç™½é²¸å¼€æº
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T09:35:24.000Z" title="Wed Feb 04 2026 09:35:24 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://openwrite-whaleops.oss-cn-zhangjiakou.aliyuncs.com/2026/02/04/17701873399417.jpg" alt="" loading="lazy"/></p>
<p>ä¸å°‘æ­£åœ¨ä½¿ç”¨ DataX çš„å›¢é˜Ÿï¼Œéƒ½é¢ä¸´ä»»åŠ¡ç»´æŠ¤æˆæœ¬é«˜ã€æ‰©å±•èƒ½åŠ›å—é™çš„é—®é¢˜ï¼Œå´åˆæ‹…å¿ƒè¿ç§»ä»£ä»·è¿‡å¤§ã€‚æœ¬æ–‡ä» <strong>DataX ç”¨æˆ·çš„å®é™…éœ€æ±‚</strong> å‡ºå‘ï¼Œä»‹ç»å¦‚ä½•å¿«é€Ÿä¸Šæ‰‹ Apache SeaTunnelï¼Œå¹¶é€šè¿‡åŸç†è§£æã€é…ç½®å¯¹æ¯”å’Œè‡ªåŠ¨åŒ–è¿ç§»å·¥å…·ï¼Œå¸®åŠ©ä½  <strong>ä½æˆæœ¬ã€å¿«é€Ÿå®Œæˆ DataX ä»»åŠ¡å‘ SeaTunnel çš„è¿ç§»</strong>ã€‚</p>
<p>å‚è€ƒæºç ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Falibaba%2FDataX" target="_blank" title="https://github.com/alibaba/DataX" ref="nofollow noopener noreferrer">Alibaba DataX GitHub</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fapache%2Fseatunnel-tools%2Ftree%2Fmain%2Fx2seatunnel" target="_blank" title="https://github.com/apache/seatunnel-tools/tree/main/x2seatunnel" ref="nofollow noopener noreferrer">Apache SeaTunnel Tools (x2seatunnel)</a></li>
</ul>
<h2 data-id="heading-0">1. è‡ªåŠ¨åŒ–è¿ç§»åˆ©å™¨ï¼šX2SeaTunnel</h2>
<p>ä¸ºäº†ç®€åŒ–è¿ç§»è¿‡ç¨‹ï¼ŒSeaTunnel ç¤¾åŒºæä¾›äº†ä¸€ä¸ªå¼ºå¤§çš„è‡ªåŠ¨åŒ–é…ç½®è½¬æ¢å·¥å…· â€”â€” <strong>X2SeaTunnel</strong>ã€‚å®ƒå¯ä»¥ä¸€é”®å°† DataX çš„ JSON é…ç½®æ–‡ä»¶è½¬æ¢ä¸º SeaTunnel çš„ Config é…ç½®æ–‡ä»¶ã€‚</p>
<h3 data-id="heading-1">1.1 å·¥å…·ç®€ä»‹</h3>
<p>X2SeaTunnel æ˜¯ <code>seatunnel-tools</code> é¡¹ç›®çš„ä¸€éƒ¨åˆ†ï¼Œä¸“é—¨ç”¨äºå¸®åŠ©ç”¨æˆ·ä»å…¶ä»–æ•°æ®é›†æˆå¹³å°å¿«é€Ÿè¿ç§»åˆ° SeaTunnelã€‚</p>
<p>âœ… <strong>æ ‡å‡†é…ç½®è½¬æ¢</strong>: æ”¯æŒ DataX JSON -&gt; SeaTunnel Config çš„ä¸€é”®è½¬æ¢ã€‚
âœ… <strong>è‡ªå®šä¹‰æ¨¡æ¿</strong>: æ”¯æŒç”¨æˆ·è‡ªå®šä¹‰è½¬æ¢æ¨¡æ¿ï¼Œæ»¡è¶³ç‰¹æ®Šéœ€æ±‚ã€‚
âœ… <strong>æ‰¹é‡è½¬æ¢</strong>: æ”¯æŒç›®å½•çº§æ‰¹é‡è½¬æ¢ï¼Œè‡ªåŠ¨ç”Ÿæˆè¿ç§»æŠ¥å‘Šã€‚
âœ… <strong>è¯¦ç»†æŠ¥å‘Š</strong>: ç”Ÿæˆ Markdown æ ¼å¼çš„è½¬æ¢æŠ¥å‘Šï¼ŒåŒ…å«å­—æ®µæ˜ å°„ç»Ÿè®¡ã€æ½œåœ¨é—®é¢˜æç¤ºç­‰ã€‚</p>
<h3 data-id="heading-2">1.2 å¿«é€Ÿå¼€å§‹</h3>
<p><strong>1.2.1 ä¸‹è½½ä¸å®‰è£…</strong>
ä½ å¯ä»¥ä» <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fapache%2Fseatunnel-tools%2Freleases" target="_blank" title="https://github.com/apache/seatunnel-tools/releases" ref="nofollow noopener noreferrer">GitHub Releases</a> ä¸‹è½½æœ€æ–°ç‰ˆï¼Œæˆ–é€šè¿‡æºç ç¼–è¯‘ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æºç ç¼–è¯‘</span>
git <span class="hljs-built_in">clone</span> https://github.com/apache/seatunnel-tools.git
<span class="hljs-built_in">cd</span> seatunnel-tools
mvn clean package -pl x2seatunnel -DskipTests
<span class="hljs-comment"># ç¼–è¯‘å®Œæˆåï¼ŒåŒ…ä½äº x2seatunnel/target/x2seatunnel-*.zip</span>
</code></pre>
<p><strong>1.2.2 è½¬æ¢å‘½ä»¤ç¤ºä¾‹</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åŸºæœ¬ç”¨æ³•ï¼šå°† datax.json è½¬æ¢ä¸º seatunnel.conf</span>
./bin/x2seatunnel.sh \
    -s examples/source/datax-mysql2hdfs.json \
    -t examples/target/mysql2hdfs-result.conf \
    -r examples/report/mysql2hdfs-report.md
</code></pre>
<p><strong>1.2.3 æŸ¥çœ‹æŠ¥å‘Š</strong>
è½¬æ¢å®Œæˆåï¼Œä½ å¯ä»¥æŸ¥çœ‹ç”Ÿæˆçš„ Markdown æŠ¥å‘Šï¼Œäº†è§£å…·ä½“çš„å­—æ®µæ˜ å°„å…³ç³»å’Œæ½œåœ¨çš„è­¦å‘Šä¿¡æ¯ã€‚</p>
<h2 data-id="heading-3">2. å·¥å…·åŸç†æ·±åº¦å¯¹æ¯”</h2>
<h3 data-id="heading-4">2.1 DataX åŸç†</h3>
<p>DataX æ˜¯é˜¿é‡Œäº‘å¼€æºçš„ç¦»çº¿æ•°æ®åŒæ­¥å·¥å…·ï¼Œé‡‡ç”¨ <strong>Framework + Plugin</strong> æ¶æ„ã€‚</p>
<ul>
<li><strong>è¿è¡Œæ¨¡å¼</strong>: å•æœºå¤šçº¿ç¨‹ (Standalone)ã€‚æ‰€æœ‰çš„ä»»åŠ¡éƒ½åœ¨ä¸€ä¸ª JVM è¿›ç¨‹ä¸­å®Œæˆï¼Œå—é™äºå•æœºå†…å­˜å’Œ CPUã€‚</li>
<li><strong>æ ¸å¿ƒæ¨¡å‹</strong>: <code>Reader</code> (è¯») -&gt; <code>Channel</code> (å†…å­˜é€šé“) -&gt; <code>Writer</code> (å†™)ã€‚</li>
<li><strong>ä¼˜ç¼ºç‚¹</strong>:
<ul>
<li>âœ… ç®€å•æ˜“ç”¨ï¼Œç”Ÿæ€æ’ä»¶ä¸°å¯Œï¼Œé€‚åˆå°è§„æ¨¡ç¦»çº¿åŒæ­¥ã€‚</li>
<li>âŒ <strong>å•æœºç“¶é¢ˆ</strong>: æ— æ³•æ¨ªå‘æ‰©å±•ï¼Œéš¾ä»¥åº”å¯¹æµ·é‡æ•°æ®ã€‚</li>
<li>âŒ <strong>ç¼ºä¹å®¹é”™</strong>: ä»»åŠ¡å¤±è´¥é€šå¸¸éœ€è¦å…¨é‡é‡è·‘ï¼Œä¸æ”¯æŒ Checkpointã€‚</li>
<li>âŒ <strong>å®æ—¶æ€§å¼±</strong>: è®¾è®¡ä¹‹åˆä¸»è¦é’ˆå¯¹ç¦»çº¿æ‰¹å¤„ç†ã€‚</li>
</ul>
</li>
</ul>
<h3 data-id="heading-5">2.2 SeaTunnel åŸç†</h3>
<p>Apache SeaTunnel æ˜¯ä¸‹ä¸€ä»£é«˜æ€§èƒ½ã€åˆ†å¸ƒå¼ã€æµ·é‡æ•°æ®é›†æˆæ¡†æ¶ã€‚</p>
<ul>
<li><strong>è¿è¡Œæ¨¡å¼</strong>: åˆ†å¸ƒå¼é›†ç¾¤ã€‚æ”¯æŒ <strong>Zeta (è‡ªå¸¦å¼•æ“)</strong>, <strong>Flink</strong>, <strong>Spark</strong> ä¸‰ç§æ‰§è¡Œå¼•æ“ã€‚</li>
<li><strong>æ ¸å¿ƒæ¨¡å‹</strong>: <code>Source</code> (è¯») -&gt; <code>Transform</code> (è½¬æ¢) -&gt; <code>Sink</code> (å†™)ã€‚</li>
<li><strong>ä¼˜ç¼ºç‚¹</strong>:
<ul>
<li>âœ… <strong>åˆ†å¸ƒå¼æ‰§è¡Œ</strong>: ä»»åŠ¡å¯ä»¥æ‹†åˆ†ä¸ºå¤šä¸ª SubTask åœ¨é›†ç¾¤ä¸­å¹¶è¡Œæ‰§è¡Œï¼Œååé‡éšèŠ‚ç‚¹æ•°çº¿æ€§å¢é•¿ã€‚</li>
<li>âœ… <strong>CDC æ”¯æŒ</strong>: åŸç”Ÿæ”¯æŒ MySQL, PostgreSQL, MongoDB ç­‰æ•°æ®åº“çš„ CDC (Change Data Capture) å®æ—¶åŒæ­¥ã€‚</li>
<li>âœ… <strong>æ–­ç‚¹ç»­ä¼ </strong>: åŸºäº Chandy-Lamport ç®—æ³•çš„ Checkpoint æœºåˆ¶ï¼Œç¡®ä¿æ•°æ®ä¸ä¸¢ä¸é‡ (Exactly-Once)ã€‚</li>
<li>âœ… <strong>å¤šå¼•æ“æ”¯æŒ</strong>: ä¸€å¥—ä»£ç å¯æ— ç¼åˆ‡æ¢ Zeta/Flink/Sparkï¼Œé€‚åº”ä¸åŒæŠ€æœ¯æ ˆã€‚</li>
</ul>
</li>
</ul>



































<table><thead><tr><th align="left">ç‰¹æ€§</th><th align="left">DataX</th><th align="left">SeaTunnel</th></tr></thead><tbody><tr><td align="left"><strong>æ¶æ„</strong></td><td align="left">å•æœº (Standalone)</td><td align="left">åˆ†å¸ƒå¼ (Distributed)</td></tr><tr><td align="left"><strong>é…ç½®æ ¼å¼</strong></td><td align="left">JSON</td><td align="left">HOCON (å…¼å®¹ JSONï¼Œæ”¯æŒæ³¨é‡Š)</td></tr><tr><td align="left"><strong>å®æ—¶/CDC</strong></td><td align="left">æ”¯æŒè¾ƒå¼±</td><td align="left"><strong>åŸç”Ÿæ”¯æŒ (CDC, å®æ—¶æµ)</strong></td></tr><tr><td align="left"><strong>å®¹é”™æœºåˆ¶</strong></td><td align="left">ä»»åŠ¡å¤±è´¥éœ€é‡è·‘</td><td align="left"><strong>æ”¯æŒ Checkpoint æ–­ç‚¹ç»­ä¼ </strong></td></tr><tr><td align="left"><strong>è½¬æ¢èƒ½åŠ›</strong></td><td align="left">è¾ƒå¼± (Transformer)</td><td align="left">å¼º (SQL, Filter, Split, Replace ç­‰)</td></tr></tbody></table>
<h2 data-id="heading-6">3. å…¸å‹æ¡ˆä¾‹ï¼šMySQL åŒæ­¥ä»»åŠ¡è¿ç§»</h2>
<p>ä¸‹é¢æ¼”ç¤ºå¦‚ä½•å°†ä¸€ä¸ªå…¸å‹çš„ DataX ä»»åŠ¡ï¼ˆMySQL -&gt; MySQLï¼‰è¿ç§»åˆ° SeaTunnelï¼Œå¹¶å¯¹é…ç½®æ–‡ä»¶è¿›è¡Œäº†è¯¦ç»†æ³¨é‡Šã€‚</p>
<h3 data-id="heading-7">3.1 DataX ä»»åŠ¡é…ç½® (job.json)</h3>
<p>è¿™æ˜¯ DataX çš„ç»å…¸ JSON é…ç½®ï¼ŒåŒ…å« Reader, Writer å’Œ Settingã€‚</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"job"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"setting"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">"speed"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
                <span class="hljs-comment">// [DataX] å…¨å±€å¹¶å‘é€šé“æ•°ï¼Œæ§åˆ¶åŒæ­¥é€Ÿåº¦</span>
                <span class="hljs-attr">"channel"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span>
            <span class="hljs-punctuation">}</span>
        <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"content"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
            <span class="hljs-punctuation">{</span>
                <span class="hljs-attr">"reader"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
                    <span class="hljs-comment">// [DataX] è¯»å–æ’ä»¶åç§°</span>
                    <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"mysqlreader"</span><span class="hljs-punctuation">,</span>
                    <span class="hljs-attr">"parameter"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
                        <span class="hljs-attr">"username"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"root"</span><span class="hljs-punctuation">,</span>
                        <span class="hljs-attr">"password"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"root"</span><span class="hljs-punctuation">,</span>
                        <span class="hljs-comment">// [DataX] éœ€è¦åŒæ­¥çš„åˆ—å</span>
                        <span class="hljs-attr">"column"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"id"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"name"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"age"</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
                        <span class="hljs-attr">"connection"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">{</span>
                            <span class="hljs-comment">// [DataX] æºè¡¨å</span>
                            <span class="hljs-attr">"table"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"source_table"</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
                            <span class="hljs-comment">// [DataX] JDBC è¿æ¥ä¸²</span>
                            <span class="hljs-attr">"jdbcUrl"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"jdbc:mysql://localhost:3306/source_db"</span><span class="hljs-punctuation">]</span>
                        <span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span>
                    <span class="hljs-punctuation">}</span>
                <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
                <span class="hljs-attr">"writer"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
                    <span class="hljs-comment">// [DataX] å†™å…¥æ’ä»¶åç§°</span>
                    <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"mysqlwriter"</span><span class="hljs-punctuation">,</span>
                    <span class="hljs-attr">"parameter"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
                        <span class="hljs-comment">// [DataX] å†™å…¥æ¨¡å¼ï¼Œæ”¯æŒ insert/replace/update</span>
                        <span class="hljs-attr">"writeMode"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"insert"</span><span class="hljs-punctuation">,</span>
                        <span class="hljs-attr">"username"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"root"</span><span class="hljs-punctuation">,</span>
                        <span class="hljs-attr">"password"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"root"</span><span class="hljs-punctuation">,</span>
                        <span class="hljs-attr">"column"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"id"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"name"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"age"</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
                        <span class="hljs-attr">"connection"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">{</span>
                            <span class="hljs-comment">// [DataX] ç›®æ ‡è¡¨å</span>
                            <span class="hljs-attr">"table"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"target_table"</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
                            <span class="hljs-attr">"jdbcUrl"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"jdbc:mysql://localhost:3306/target_db"</span><span class="hljs-punctuation">]</span>
                        <span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span>
                    <span class="hljs-punctuation">}</span>
                <span class="hljs-punctuation">}</span>
            <span class="hljs-punctuation">}</span>
        <span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-8">3.2 SeaTunnel ä»»åŠ¡é…ç½® (mysql_to_mysql.conf)</h3>
<p>SeaTunnel ä½¿ç”¨ HOCON æ ¼å¼ï¼Œç»“æ„æ›´åŠ æ¸…æ™°ï¼Œä¸”åŸç”Ÿæ”¯æŒæ³¨é‡Šã€‚</p>
<pre><code class="hljs language-hocon" lang="hocon"># 1. ç¯å¢ƒé…ç½® (å¯¹åº” DataX çš„ setting)
env {
  # [SeaTunnel] ä»»åŠ¡å¹¶è¡Œåº¦ï¼Œå¯¹åº” DataX çš„ channel
  execution.parallelism = 1
  # [SeaTunnel] ä»»åŠ¡æ¨¡å¼ï¼šBATCH (ç¦»çº¿æ‰¹å¤„ç†) æˆ– STREAMING (å®æ—¶æµå¤„ç†)
  job.mode = "BATCH"
}

# 2. Source é…ç½® (å¯¹åº” DataX çš„ reader)
source {
  Jdbc {
    # [SeaTunnel] é©±åŠ¨ç±»å
    driver = "com.mysql.cj.jdbc.Driver"
    # [SeaTunnel] JDBC è¿æ¥ä¸²
    url = "jdbc:mysql://localhost:3306/source_db"
    user = "root"
    password = "root"
    # [SeaTunnel] æŸ¥è¯¢è¯­å¥ï¼Œæ”¯æŒçµæ´»çš„ SQL å®šä¹‰ï¼Œæ›¿ä»£ DataX çš„ column + table é…ç½®
    query = "select id, name, age from source_table"
    # [SeaTunnel] å…³é”®é…ç½®ï¼šå°†è¯»å–åˆ°çš„æ•°æ®æ³¨å†Œä¸ºä¸€ä¸ªä¸´æ—¶è¡¨ï¼Œä¾›åç»­ Sink ä½¿ç”¨
    result_table_name = "mysql_source"
  }
}

# 3. Transform é…ç½® (å¯é€‰ï¼ŒDataX é€šå¸¸æ²¡æœ‰è¿™ä¸€å±‚)
# transform {
#   ...
# }

# 4. Sink é…ç½® (å¯¹åº” DataX çš„ writer)
sink {
  Jdbc {
    driver = "com.mysql.cj.jdbc.Driver"
    url = "jdbc:mysql://localhost:3306/target_db"
    user = "root"
    password = "root"
    # [SeaTunnel] å…³é”®é…ç½®ï¼šæŒ‡å®šæ•°æ®æ¥æºè¡¨ï¼Œè¿™é‡Œå¼•ç”¨ Source ä¸­å®šä¹‰çš„ result_table_name
    source_table_name = "mysql_source"
    # [SeaTunnel] å†™å…¥ SQL æ¨¡æ¿
    query = "insert into target_table (id, name, age) values (?, ?, ?)"
  }
}
</code></pre>
<h3 data-id="heading-9">3.3 å…³é”®æ˜ å°„è¯´æ˜</h3>
<p>ä¸‹è¡¨è¯¦ç»†åˆ—å‡ºäº† DataX ä¸ SeaTunnel æ ¸å¿ƒé…ç½®é¡¹çš„æ˜ å°„å…³ç³»ï¼š</p>







































































<table><thead><tr><th align="left">æ¨¡å—</th><th align="left">DataX é…ç½®é¡¹</th><th align="left">SeaTunnel é…ç½®é¡¹</th><th align="left">è¯´æ˜</th></tr></thead><tbody><tr><td align="left"><strong>å…¨å±€</strong></td><td align="left"><code>job.setting.speed.channel</code></td><td align="left"><code>env.execution.parallelism</code></td><td align="left">æ§åˆ¶ä»»åŠ¡çš„å¹¶å‘åº¦ã€‚</td></tr><tr><td align="left"><strong>Reader/Source</strong></td><td align="left"><code>reader.name</code> ("mysqlreader")</td><td align="left"><code>source.plugin_name</code> ("Jdbc")</td><td align="left">æ’ä»¶åç§°æ˜ å°„ï¼ŒSeaTunnel ç»Ÿä¸€ä¸º Jdbcã€‚</td></tr><tr><td align="left"/><td align="left"><code>parameter.jdbcUrl</code></td><td align="left"><code>url</code></td><td align="left">æ•°æ®åº“è¿æ¥åœ°å€ã€‚</td></tr><tr><td align="left"/><td align="left"><code>parameter.username</code></td><td align="left"><code>user</code></td><td align="left">æ•°æ®åº“ç”¨æˆ·åã€‚</td></tr><tr><td align="left"/><td align="left"><code>parameter.column</code> + <code>table</code></td><td align="left"><code>query</code></td><td align="left">DataX åˆ†å¼€é…ç½®åˆ—å’Œè¡¨ï¼ŒSeaTunnel æ¨èç›´æ¥å†™ SQLï¼Œæ›´çµæ´»ã€‚</td></tr><tr><td align="left"/><td align="left">(æ— )</td><td align="left"><code>result_table_name</code></td><td align="left"><strong>SeaTunnel æ ¸å¿ƒæ¦‚å¿µ</strong>ï¼šSource è¾“å‡ºçš„è™šæ‹Ÿè¡¨åã€‚</td></tr><tr><td align="left"><strong>Writer/Sink</strong></td><td align="left"><code>writer.name</code> ("mysqlwriter")</td><td align="left"><code>sink.plugin_name</code> ("Jdbc")</td><td align="left">æ’ä»¶åç§°æ˜ å°„ã€‚</td></tr><tr><td align="left"/><td align="left"><code>parameter.writeMode</code></td><td align="left">(é€šè¿‡ SQL æ§åˆ¶)</td><td align="left">SeaTunnel JDBC Sink ç›´æ¥é€šè¿‡ SQL è¯­å¥ (<code>INSERT</code>, <code>UPSERT</code>) æ§åˆ¶å†™å…¥è¡Œä¸ºã€‚</td></tr><tr><td align="left"/><td align="left"><code>parameter.preSql</code> / <code>postSql</code></td><td align="left"><code>pre_sql</code> / <code>post_sql</code></td><td align="left">æ‰§è¡Œå‰/åçš„ SQL é’©å­ï¼Œä¸¤è€…éƒ½æ”¯æŒã€‚</td></tr><tr><td align="left"/><td align="left">(æ— )</td><td align="left"><code>source_table_name</code></td><td align="left"><strong>SeaTunnel æ ¸å¿ƒæ¦‚å¿µ</strong>ï¼šSink è¾“å…¥çš„è™šæ‹Ÿè¡¨åï¼Œå¿…é¡»ä¸ Source å¯¹åº”ã€‚</td></tr></tbody></table>
<h2 data-id="heading-10">4. å®æˆ˜è¿è¡Œï¼šæ‰§è¡Œ MySQL è¿ç§»ä»»åŠ¡</h2>
<p>æœ¬èŠ‚å°†æ¼”ç¤ºå¦‚ä½•è¿è¡Œç¬¬ 3 èŠ‚ä¸­é…ç½®å¥½çš„ SeaTunnel è¿ç§»ä»»åŠ¡ã€‚è¯·å°† 3.2 èŠ‚ä¸­çš„é…ç½®å†…å®¹ä¿å­˜ä¸º <code>config/mysql_to_mysql.conf</code> æ–‡ä»¶ã€‚</p>
<h3 data-id="heading-11">4.1 å‡†å¤‡å·¥ä½œ</h3>
<p>åœ¨è¿è¡Œä»»åŠ¡å‰ï¼Œè¯·ç¡®ä¿æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼š</p>
<ol>
<li><strong>å®‰è£… SeaTunnel</strong>: å·²è§£å‹å¹¶é…ç½®å¥½ SeaTunnel ç¯å¢ƒã€‚</li>
<li><strong>å®‰è£… JDBC æ’ä»¶</strong>: ç¡®ä¿ <code>plugins</code> ç›®å½•ä¸‹æœ‰ <code>connector-jdbc</code> æ’ä»¶ï¼Œæˆ– <code>lib</code> ç›®å½•ä¸‹æœ‰å¯¹åº”çš„ MySQL é©±åŠ¨ jar åŒ…ï¼ˆä¾‹å¦‚ <code>mysql-connector-j-8.0.x.jar</code>ï¼‰ã€‚</li>
</ol>
<h3 data-id="heading-12">4.2 å¯åŠ¨ä»»åŠ¡</h3>
<p>SeaTunnel æ”¯æŒå¤šç§è¿è¡Œæ¨¡å¼ï¼Œæ¨èä½¿ç”¨ä»¥ä¸‹ä¸¤ç§ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ–¹å¼ä¸€ï¼šæœ¬åœ°å¼€å‘æ¨¡å¼ (Local)</span>
<span class="hljs-comment"># é€‚ç”¨äºå¼€å‘è°ƒè¯•ï¼Œç›´æ¥åœ¨æœ¬åœ°å¯åŠ¨è¿›ç¨‹æ‰§è¡Œä»»åŠ¡</span>
./bin/seatunnel.sh --config ./config/mysql_to_mysql.conf -e <span class="hljs-built_in">local</span>

<span class="hljs-comment"># æ–¹å¼äºŒï¼šé›†ç¾¤ç”Ÿäº§æ¨¡å¼ (Cluster - Zeta Engine)</span>
<span class="hljs-comment"># é€‚ç”¨äºç”Ÿäº§ç¯å¢ƒï¼Œå°†ä»»åŠ¡æäº¤åˆ°å·²ç»å¯åŠ¨çš„ SeaTunnel Zeta é›†ç¾¤</span>
./bin/seatunnel.sh --config ./config/mysql_to_mysql.conf -e cluster
</code></pre>
<h3 data-id="heading-13">4.3 éªŒè¯ç»“æœ</h3>
<ol>
<li><strong>æŸ¥çœ‹æ—¥å¿—</strong>: ä»»åŠ¡è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œæ§åˆ¶å°ä¼šè¾“å‡ºè¯¦ç»†æ—¥å¿—ã€‚å½“çœ‹åˆ° <code>Job finished with status FINISHED</code> æ—¶ï¼Œè¡¨ç¤ºä»»åŠ¡æ‰§è¡ŒæˆåŠŸã€‚</li>
<li><strong>æ•°æ®æ ¸å¯¹</strong>: ç™»å½•ç›®æ ‡ MySQL æ•°æ®åº“ï¼ŒæŸ¥è¯¢ <code>target_table</code> è¡¨ï¼Œç¡®è®¤æ•°æ®æ¡æ•°å’Œå†…å®¹ä¸æºç«¯ä¸€è‡´ã€‚</li>
</ol>
<h2 data-id="heading-14">5. è¿›é˜¶åŠŸèƒ½è¡¥å……</h2>
<p>SeaTunnel ä¸ä»…ä»…æ˜¯ DataX çš„æ›¿ä»£å“ï¼Œæ›´æä¾›äº† DataX ä¸å…·å¤‡çš„é«˜çº§åŠŸèƒ½ã€‚è¿™é‡Œé‡ç‚¹ä»‹ç»å¦‚ä½•å®ç° <strong>MySQL CDC (Change Data Capture)</strong> å®æ—¶åŒæ­¥ã€‚</p>
<h3 data-id="heading-15">5.1 ä¸ºä»€ä¹ˆé€‰æ‹© SeaTunnel CDCï¼Ÿ</h3>
<p>DataX ä¸»è¦ç”¨äºç¦»çº¿å…¨é‡åŒæ­¥ï¼Œæ— æ³•æ•æ‰æ•°æ®çš„å®æ—¶å˜åŒ–ï¼ˆå¢åˆ æ”¹ï¼‰ã€‚è€Œ SeaTunnel çš„ CDC è¿æ¥å™¨æ”¯æŒï¼š</p>
<ul>
<li><strong>æ–­ç‚¹ç»­ä¼ </strong>: è‡ªåŠ¨è®°å½•è¯»å–ä½ç‚¹ï¼Œé‡å¯ä¸ä¸¢æ•°æ®ã€‚</li>
<li><strong>åŠ¨æ€åŠ è¡¨</strong>: è¿è¡Œè¿‡ç¨‹ä¸­æ— éœ€é‡å¯å³å¯æ·»åŠ æ–°è¡¨ã€‚</li>
<li><strong>æ— é”è¯»å–</strong>: ä½¿ç”¨å¿«ç…§è¯»ç®—æ³•ï¼Œæå¤§é™ä½å¯¹æºåº“çš„å½±å“ã€‚</li>
</ul>
<h3 data-id="heading-16">5.2 MySQL CDC é…ç½®ç¤ºä¾‹ (mysql_cdc.conf)</h3>
<p>è¦å¯ç”¨ CDCï¼Œåªéœ€ä¿®æ”¹ <code>env</code> å’Œ <code>source</code> é…ç½®ï¼Œå¹¶ç¡®ä¿ <code>sink</code> æ”¯æŒæ›´æ–°æ“ä½œã€‚</p>
<pre><code class="hljs language-hocon" lang="hocon">env {
  # [CDC å¿…é€‰] å¼€å¯å®æ—¶æµæ¨¡å¼
  job.mode = "STREAMING"
  # [CDC å¿…é€‰] å¼€å¯ Checkpoint (å•ä½æ¯«ç§’)ï¼Œç”¨äºæ•…éšœæ¢å¤å’Œæ•°æ®ä¸€è‡´æ€§ä¿éšœ
  checkpoint.interval = 5000
}

source {
  MySQL-CDC {
    result_table_name = "mysql_cdc_source"
    
    # æ•°æ®åº“è¿æ¥é…ç½®
    base-url = "jdbc:mysql://localhost:3306/source_db"
    username = "root"
    password = "root"
    
    # [CDC] æŒ‡å®šéœ€è¦ç›‘å¬çš„è¡¨ï¼Œæ ¼å¼ï¼šdatabase.table
    table-names = ["source_db.source_table"]
    
    # [CDC] å¯åŠ¨æ¨¡å¼ï¼š
    # initial: å…ˆå…¨é‡åŒæ­¥ï¼Œå†è‡ªåŠ¨åˆ‡æ¢åˆ°å¢é‡ Binlog (æœ€å¸¸ç”¨)
    # latest: åªåŒæ­¥ä»»åŠ¡å¯åŠ¨åçš„å¢é‡æ•°æ®
    startup.mode = "initial"
  }
}

sink {
  Jdbc {
    source_table_name = "mysql_cdc_source"
    driver = "com.mysql.cj.jdbc.Driver"
    url = "jdbc:mysql://localhost:3306/target_db"
    user = "root"
    password = "root"
    
    # [CDC å…³é”®] è‡ªåŠ¨ç”Ÿæˆ SQL ä»¥æ”¯æŒ INSERT/UPDATE/DELETE
    generate_sink_sql = true
    
    # [CDC å…³é”®] æŒ‡å®šç›®æ ‡è¡¨çš„ä¸»é”®ï¼Œç”¨äºç¡®å®šæ›´æ–°/åˆ é™¤çš„è¡Œ
    primary_keys = ["id"]
    
    # ç›®æ ‡åº“è¡¨åç§°
    database = "target_db"
    table = "target_table"
  }
}
</code></pre>
<h3 data-id="heading-17">5.3 æ³¨æ„äº‹é¡¹</h3>
<ol>
<li><strong>Binlog å¼€å¯</strong>: æºç«¯ MySQL å¿…é¡»å¼€å¯ Binlog (<code>log_bin=ON</code>) ä¸”æ ¼å¼ä¸º <code>ROW</code> (<code>binlog_format=ROW</code>)ã€‚</li>
<li><strong>æƒé™è¦æ±‚</strong>: åŒæ­¥è´¦å·éœ€è¦ <code>SELECT</code>, <code>REPLICATION SLAVE</code>, <code>REPLICATION CLIENT</code> ç­‰æƒé™ã€‚</li>
<li><strong>å¤šè¡¨åŒæ­¥</strong>: <code>table-names</code> æ”¯æŒæ­£åˆ™åŒ¹é…ï¼Œä¾‹å¦‚ <code>["source_db.*"]</code> å¯åŒæ­¥æ•´ä¸ªæ•°æ®åº“ã€‚</li>
</ol>
<p>é€šè¿‡æœ¬æ–‡çš„ä»‹ç»å¯ä»¥çœ‹åˆ°ï¼Œä» DataX è¿ç§»åˆ° Apache SeaTunnel å¹¶éæƒ³è±¡ä¸­å¤æ‚ã€‚å€ŸåŠ©æ¸…æ™°çš„é…ç½®ä½“ç³»å’Œè‡ªåŠ¨åŒ–è¿ç§»å·¥å…·ï¼ŒåŸæœ‰ä»»åŠ¡å¯ä»¥å¿«é€Ÿå¹³æ»‘è¿‡æ¸¡ã€‚</p>
<p>åŒæ—¶ï¼ŒSeaTunnel åœ¨æ€§èƒ½ã€æ‰©å±•æ€§å’Œç”Ÿæ€ä¸Šçš„ä¼˜åŠ¿ï¼Œä¹Ÿä¸ºåç»­æ•°æ®é›†æˆå’Œå¹³å°åŒ–å»ºè®¾æä¾›äº†æ›´å¤§çš„ç©ºé—´ï¼Œå¸®åŠ©å›¢é˜Ÿæ›´ä»å®¹åœ°åº”å¯¹ä¸æ–­å¢é•¿çš„æ•°æ®éœ€æ±‚ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æˆ‘æ²¡æƒ³åˆ° CSS if å‡½æ•°è¿™ä¹ˆå¼º]]></title>    <link>https://juejin.cn/post/7602814773496152106</link>    <guid>https://juejin.cn/post/7602814773496152106</guid>    <pubDate>2026-02-04T10:06:47.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602814773496152106" data-draft-id="7602579671476224019" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æˆ‘æ²¡æƒ³åˆ° CSS if å‡½æ•°è¿™ä¹ˆå¼º"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,CSS"/> <meta itemprop="datePublished" content="2026-02-04T10:06:47.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å†´ç¾½"/> <meta itemprop="url" content="https://juejin.cn/user/712139234359182"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æˆ‘æ²¡æƒ³åˆ° CSS if å‡½æ•°è¿™ä¹ˆå¼º
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/712139234359182/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å†´ç¾½
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T10:06:47.000Z" title="Wed Feb 04 2026 10:06:47 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¦‚æœ CSS èƒ½åƒ JavaScript ä¸€æ ·è¿›è¡Œæ¡ä»¶åˆ¤æ–­ä¼šæ€æ ·ï¼Ÿ</p>
<p>ä½ å¯èƒ½ä¼šæƒ³ï¼Œåªæ˜¯ä¸ªæ¡ä»¶åˆ¤æ–­ï¼Œèƒ½æœ‰ä»€ä¹ˆç”¨ï¼Ÿ</p>
<p>é‚£ä½ å°±å¤ªå°ç§è¿™ä¸ªåŠŸèƒ½äº†ï¼</p>
<p>è¿™ç¯‡æ–‡ç« å¸¦ä½ å±•ç¤ºå®ƒçš„å¼ºå¤§ã€‚</p>
<p>PSï¼šç›®å‰ CSS if() å‡½æ•°å·²åœ¨ Chrome 137 ä¸­æ­£å¼å‘å¸ƒã€‚</p>
<h3 data-id="heading-0">1. åŸºæœ¬ç”¨æ³•</h3>
<pre><code class="hljs language-css" lang="css">property: <span class="hljs-built_in">if</span>(condition-<span class="hljs-number">1</span>: value-<span class="hljs-number">1</span>; condition-<span class="hljs-number">2</span>: value-<span class="hljs-number">2</span>; condition-<span class="hljs-number">3</span>: value-<span class="hljs-number">3</span>; else: default-value);
</code></pre>
<p>å‡½æ•°ä¼šæŒ‰é¡ºåºæ£€æŸ¥æ¡ä»¶å¹¶åº”ç”¨ç¬¬ä¸€ä¸ªåŒ¹é…çš„å€¼ã€‚å¦‚æœæ²¡æœ‰æ¡ä»¶åŒ¹é…ï¼Œåˆ™ä½¿ç”¨ else å€¼ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/89b1701d26f7436880fda4e4d95e4623~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Ya05769:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770804407&amp;x-signature=9kpQGFvNmchKm0Ns1bA0nI9iNHA%3D" alt="CSS ifå‡½æ•°åŸºæœ¬ç”¨æ³•" loading="lazy"/></p>
<h2 data-id="heading-1">2. 3 å¤§ä½¿ç”¨åœºæ™¯</h2>
<h3 data-id="heading-2">2.1. æ·±è‰²æ¨¡å¼</h3>
<p>ä»¥å‰å®ç°æ·±è‰²æ¨¡å¼ï¼Œè¦ä¹ˆç”¨ JavaScript åˆ‡æ¢ classï¼Œè¦ä¹ˆå†™ä¸¤å¥—æ ·å¼ã€‚</p>
<p>ç°åœ¨ä½ å¯ä»¥ç›´æ¥è¿™æ ·å†™ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-tag">body</span> {
  <span class="hljs-attr">--theme</span>: <span class="hljs-string">"dark"</span>; <span class="hljs-comment">/* é€šè¿‡ JavaScript æˆ–ç”¨æˆ·åå¥½åˆ‡æ¢ */</span>
  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">if</span>(<span class="hljs-built_in">style</span>(--theme: <span class="hljs-string">"dark"</span>): <span class="hljs-number">#1a1a1a</span>; else: white);
  <span class="hljs-attribute">color</span>: <span class="hljs-built_in">if</span>(<span class="hljs-built_in">style</span>(--theme: <span class="hljs-string">"dark"</span>): <span class="hljs-number">#e4e4e4</span>; else: <span class="hljs-number">#333</span>);
}
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b451511131e741d4bdc765457c587816~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Ya05769:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770804407&amp;x-signature=zyINAvqPGqVeqavDWI5%2Fpv%2BMgng%3D" alt="åœºæ™¯ä¸€ï¼šæ·±è‰²æ¨¡å¼" loading="lazy"/></p>
<h3 data-id="heading-3">2.2. å“åº”å¼å¸ƒå±€</h3>
<p>ä»¥å‰å†™å“åº”å¼ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.container</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
}

<span class="hljs-keyword">@media</span> (<span class="hljs-attribute">min-width</span>: <span class="hljs-number">576px</span>) {
  <span class="hljs-selector-class">.container</span> {
    <span class="hljs-attribute">width</span>: <span class="hljs-number">540px</span>;
  }
}

<span class="hljs-keyword">@media</span> (<span class="hljs-attribute">min-width</span>: <span class="hljs-number">768px</span>) {
  <span class="hljs-selector-class">.container</span> {
    <span class="hljs-attribute">width</span>: <span class="hljs-number">720px</span>;
  }
}

<span class="hljs-keyword">@media</span> (<span class="hljs-attribute">min-width</span>: <span class="hljs-number">992px</span>) {
  <span class="hljs-selector-class">.container</span> {
    <span class="hljs-attribute">width</span>: <span class="hljs-number">960px</span>;
  }
}

<span class="hljs-comment">/* è¿˜æœ‰æ›´å¤š... */</span>
</code></pre>
<p>ç°åœ¨ä½ å¯ä»¥è¿™æ ·å†™ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.container</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-built_in">if</span>(<span class="hljs-built_in">media</span>(width &gt;= <span class="hljs-number">1400px</span>): <span class="hljs-number">1320px</span>; media(<span class="hljs-attribute">width</span> &gt;= <span class="hljs-number">1200px</span>): <span class="hljs-number">1140px</span>; media(<span class="hljs-attribute">width</span> &gt;= <span class="hljs-number">992px</span>): <span class="hljs-number">960px</span>; media(<span class="hljs-attribute">width</span> &gt;= <span class="hljs-number">768px</span>): <span class="hljs-number">720px</span>; media(<span class="hljs-attribute">width</span> &gt;= <span class="hljs-number">576px</span>): <span class="hljs-number">540px</span>; else: <span class="hljs-number">100%</span>);
  <span class="hljs-attribute">padding-inline</span>: <span class="hljs-built_in">if</span>(<span class="hljs-built_in">media</span>(width &gt;= <span class="hljs-number">768px</span>): <span class="hljs-number">2rem</span>; else: <span class="hljs-number">1rem</span>);
}
</code></pre>
<p>ä»£ç æ›´ä¼˜é›…ï¼Œæ€§èƒ½æ›´å¿«ï¼Œç»´æŠ¤èµ·æ¥ä¹Ÿæ–¹ä¾¿ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2243128ae03841ee8432528388c27f6b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Ya05769:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770804407&amp;x-signature=xN5QWMkV3WvSDQFRuRg2HIFK304%3D" alt="åœºæ™¯äºŒï¼šå“åº”å¼å¸ƒå±€" loading="lazy"/></p>
<h3 data-id="heading-4">2.3. ä¼˜é›…é™çº§</h3>
<p>å‡è®¾ä½ æƒ³ç”¨æœ€æ–°çš„é¢œè‰²å‡½æ•° <code>lch()</code>ï¼Œä½†åˆæ‹…å¿ƒæ—§æµè§ˆå™¨ä¸æ”¯æŒã€‚ä»¥å‰ä½ å¯èƒ½è¦è¿™æ ·å†™ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.element</span> {
  <span class="hljs-attribute">border-color</span>: <span class="hljs-built_in">rgb</span>(<span class="hljs-number">200</span>, <span class="hljs-number">100</span>, <span class="hljs-number">50</span>); <span class="hljs-comment">/* å…œåº•æ–¹æ¡ˆ */</span>
  <span class="hljs-attribute">border-color</span>: <span class="hljs-built_in">lch</span>(<span class="hljs-number">50%</span> <span class="hljs-number">100</span> <span class="hljs-number">150</span>); <span class="hljs-comment">/* æ–°æµè§ˆå™¨ä¼šè¦†ç›– */</span>
}
</code></pre>
<p>ç°åœ¨å¯ä»¥ç”¨ <code>supports()</code> æ˜ç¡®åœ°æ£€æµ‹ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.element</span> {
  <span class="hljs-attribute">border-color</span>: <span class="hljs-built_in">if</span>(<span class="hljs-built_in">supports</span>(color: <span class="hljs-built_in">lch</span>(<span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span>)): <span class="hljs-built_in">lch</span>(<span class="hljs-number">50%</span> <span class="hljs-number">100</span> <span class="hljs-number">150</span>) ; supports(<span class="hljs-attribute">color</span>: <span class="hljs-built_in">lab</span>(<span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span>)): <span class="hljs-built_in">lab</span>(<span class="hljs-number">50</span> <span class="hljs-number">100</span> -<span class="hljs-number">50</span>) ; else: <span class="hljs-built_in">rgb</span>(<span class="hljs-number">200</span>, <span class="hljs-number">100</span>, <span class="hljs-number">50</span>));
}
</code></pre>
<p>æµè§ˆå™¨ä¼šæŒ‰é¡ºåºæ£€æŸ¥ï¼šæ”¯æŒ <code>lch()</code> å°±ç”¨ <code>lch()</code>ï¼Œä¸æ”¯æŒå°±çœ‹çœ‹æ”¯æŒä¸æ”¯æŒ <code>lab()</code>ï¼Œéƒ½ä¸æ”¯æŒå°±ç”¨ä¼ ç»Ÿçš„ <code>rgb()</code>ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/056866c9955d43d3a9bf022d98ce3c63~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Ya05769:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770804407&amp;x-signature=s4JUk5ACtHzn0vC1XOzrVIs78KE%3D" alt="åœºæ™¯ä¸‰ï¼šä¼˜é›…é™çº§" loading="lazy"/></p>
<h2 data-id="heading-5">3. æµè§ˆå™¨æ”¯æŒåº¦</h2>
<p>æˆªè‡³ 2025 å¹´ 8 æœˆï¼š</p>
<ul>
<li>
<p>âœ… Chrome/Edgeï¼šä»ç‰ˆæœ¬ 137 å¼€å§‹</p>
</li>
<li>
<p>âœ… Chrome Androidï¼šä»ç‰ˆæœ¬ 139 å¼€å§‹</p>
</li>
<li>
<p>âŒ Firefoxï¼šå¼€å‘ä¸­</p>
</li>
<li>
<p>âŒ Safariï¼šåœ¨è·¯çº¿å›¾ä¸Š</p>
</li>
<li>
<p>âŒ Operaï¼šå°šæœªæ”¯æŒ</p>
</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0758a820dfae440ea658586b3f978fd7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Ya05769:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770804407&amp;x-signature=Bqlo8oYVAtrR8bnPCGvSofjsoZo%3D" alt="æµè§ˆå™¨æ”¯æŒç°çŠ¶" loading="lazy"/></p>
<p>æ‰€ä»¥å¦‚æœä½ ç°åœ¨å°±æƒ³ç”¨ï¼Œè®°å¾—å†™å¥½ fallbackï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.button</span> {
  <span class="hljs-comment">/* æ‰€æœ‰æµè§ˆå™¨çš„å›é€€ */</span>
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">1rem</span> <span class="hljs-number">2rem</span>;
  <span class="hljs-attribute">background</span>: <span class="hljs-number">#007bff</span>;
  <span class="hljs-comment">/* ç°ä»£æµè§ˆå™¨ä¼šè‡ªåŠ¨è¦†ç›– */</span>
  <span class="hljs-attribute">padding</span>: <span class="hljs-built_in">if</span>(<span class="hljs-built_in">style</span>(--size: small): <span class="hljs-number">0.5rem</span> <span class="hljs-number">1rem</span>; style(<span class="hljs-attr">--size</span>: large): <span class="hljs-number">1.5rem</span> <span class="hljs-number">3rem</span>; else: <span class="hljs-number">1rem</span> <span class="hljs-number">2rem</span>);
  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">if</span>(<span class="hljs-built_in">style</span>(--variant: primary): <span class="hljs-number">#007bff</span>; style(<span class="hljs-attr">--variant</span>: success): <span class="hljs-number">#28a745</span>; style(<span class="hljs-attr">--variant</span>: danger): <span class="hljs-number">#dc3545</span>; else: <span class="hljs-number">#6c757d</span>);
}
</code></pre>
<h2 data-id="heading-6">4. æŠ€æœ¯åœ¨è¿›æ­¥</h2>
<p>å†™åˆ°è¿™é‡Œï¼Œæˆ‘æƒ³èµ·è‡ªå·±åˆšå­¦å‰ç«¯é‚£ä¼šå„¿ã€‚</p>
<p>æ¯æ¬¡çœ‹åˆ°æ–°æŠ€æœ¯å‡ºæ¥ï¼Œå°±è§‰å¾—â€œå®Œäº†ï¼Œæˆ‘åˆè½åäº†â€ã€‚</p>
<p>åæ¥æ…¢æ…¢å‘ç°ï¼ŒæŠ€æœ¯æ˜¯ç”¨æ¥è§£å†³é—®é¢˜çš„ï¼Œä¸æ˜¯ç”¨æ¥åˆ¶é€ ç„¦è™‘çš„ã€‚</p>
<p>CSS <code>if()</code> å‡½æ•°ç¡®å®å¾ˆé…·ï¼Œä½†å®ƒè§£å†³çš„é—®é¢˜â€”â€”æ¡ä»¶åˆ¤æ–­ã€å“åº”å¼å¸ƒå±€ã€æµè§ˆå™¨å…¼å®¹â€”â€”è¿™äº›é—®é¢˜æˆ‘ä»¬ç”¨ç°æœ‰çš„æ–¹æ³•ä¹Ÿèƒ½è§£å†³ï¼Œåªæ˜¯å¯èƒ½éº»çƒ¦ä¸€ç‚¹ã€‚</p>
<p><strong>æ–°æŠ€æœ¯çš„æ„ä¹‰ï¼Œä¸æ˜¯è®©ä½ è§‰å¾—â€œæˆ‘å¿…é¡»é©¬ä¸Šå­¦ä¼šâ€ï¼Œè€Œæ˜¯è®©ä½ çŸ¥é“â€œåŸæ¥è¿˜å¯ä»¥è¿™æ ·åšâ€ã€‚</strong></p>
<p>æ‰€ä»¥ï¼Œå¦‚æœä½ ç°åœ¨é¡¹ç›®é‡Œç”¨ä¸ä¸Š <code>if()</code> å‡½æ•°ï¼Œæ²¡å…³ç³»ã€‚æŠŠå®ƒæ”¶è—èµ·æ¥ï¼Œç­‰å“ªå¤©æµè§ˆå™¨æ”¯æŒå¥½äº†ï¼Œæˆ–è€…ä½ é‡åˆ°äº†å®ƒèƒ½è§£å†³çš„é—®é¢˜ï¼Œå†æ‹¿å‡ºæ¥ç”¨ã€‚</p>
<p>å‰ç«¯å­¦ä¹ æ˜¯ä¸ªé•¿è·‘ï¼Œä¸æ˜¯çŸ­è·‘ã€‚æ…¢æ…¢æ¥ï¼Œåˆ«ç€æ€¥ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2a4d96cbacba4249974a6d92d83201db~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Ya05769:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770804407&amp;x-signature=IIkBLo91FqGWRbLjR5z0ajTC%2F%2Fo%3D" alt="æŠ€æœ¯å­¦ä¹ çš„é•¿è·‘" loading="lazy"/></p>
<p>æˆ‘æ˜¯å†´ç¾½ï¼Œ10 å¹´ç¬”è€•ä¸è¾ï¼Œä¸“æ³¨å‰ç«¯é¢†åŸŸï¼Œæ›´æ–°äº† 10+ ç³»åˆ—ã€300+ ç¯‡åŸåˆ›æŠ€æœ¯æ–‡ç« ï¼Œç¿»è¯‘è¿‡ Svelteã€Solid.jsã€TypeScript æ–‡æ¡£ï¼Œè‘—æœ‰å°å†Œã€ŠNext.js å¼€å‘æŒ‡å—ã€‹ã€ã€ŠSvelte å¼€å‘æŒ‡å—ã€‹ã€ã€ŠAstro å®æˆ˜æŒ‡å—ã€‹ã€‚</p>
<p>æ¬¢è¿å›´è§‚æˆ‘çš„â€œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fyayujs.com%2F" target="_blank" title="https://yayujs.com/" ref="nofollow noopener noreferrer">ç½‘é¡µç‰ˆæœ‹å‹åœˆ</a>â€ï¼Œå…³æ³¨æˆ‘çš„å…¬ä¼—å·ï¼š<strong>å†´ç¾½ï¼ˆæˆ–æœç´¢ yayujsï¼‰</strong>ï¼Œæ¯å¤©åˆ†äº«å‰ç«¯çŸ¥è¯†ã€AI å¹²è´§ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç¬¬ä¸€å·ï¼šåˆå…¥æ±Ÿæ¹– ç¬¬ä¸€ç« ï¼šæ·±å¤œçš„é”®ç›˜å£°]]></title>    <link>https://juejin.cn/post/7602776926327619638</link>    <guid>https://juejin.cn/post/7602776926327619638</guid>    <pubDate>2026-02-04T10:22:10.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602776926327619638" data-draft-id="7602776926327586870" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç¬¬ä¸€å·ï¼šåˆå…¥æ±Ÿæ¹–  ç¬¬ä¸€ç« ï¼šæ·±å¤œçš„é”®ç›˜å£°"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-02-04T10:22:10.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ithromantic"/> <meta itemprop="url" content="https://juejin.cn/user/2120291212077287"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç¬¬ä¸€å·ï¼šåˆå…¥æ±Ÿæ¹–  ç¬¬ä¸€ç« ï¼šæ·±å¤œçš„é”®ç›˜å£°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2120291212077287/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ithromantic
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T10:22:10.000Z" title="Wed Feb 04 2026 10:22:10 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å‡Œæ™¨ä¸‰ç‚¹åä¸ƒåˆ†ã€‚</p>
<p>æ—æ™¨ç›¯ç€å±å¹•ä¸Šé‚£ä¸ªçº¢è‰²çš„é”™è¯¯æç¤ºï¼Œå·²ç»çœ‹äº†æ•´æ•´ä¸¤ä¸ªå°æ—¶ã€‚æ§åˆ¶å°é‡Œä¸æ–­è·³å‡ºçš„è­¦å‘Šä¿¡æ¯åƒä¸€ä¸²ä¸²å˜²è®½ï¼Œæ¯ä¸€ä¸ªéƒ½åœ¨å‘Šè¯‰ä»–ï¼šä½ é”™äº†ï¼Œä½ çš„ä»£ç æœ‰é—®é¢˜ã€‚</p>
<p>ä»–æ‰äº†æ‰é…¸æ¶©çš„çœ¼ç›ï¼Œç«¯èµ·æ¡Œä¸Šå·²ç»å‡‰é€çš„å’–å•¡ï¼ŒæŠ¿äº†ä¸€å£ã€‚è‹¦æ¶©çš„å‘³é“åœ¨èˆŒå°–è”“å»¶ï¼Œä½†è‡³å°‘èƒ½è®©ä»–ä¿æŒæ¸…é†’ã€‚<br/>
â€œä¸ºä»€ä¹ˆå°±æ˜¯ä¸è¡Œå‘¢ï¼Ÿâ€ä»–è‡ªè¨€è‡ªè¯­ï¼Œå£°éŸ³åœ¨å®‰é™çš„æˆ¿é—´é‡Œæ˜¾å¾—æ ¼å¤–æ¸…æ™°ã€‚</p>
<p>è¿™æ˜¯ä¸€ä¸ªå…³äºç»„ä»¶çŠ¶æ€ç®¡ç†çš„bugã€‚æ˜æ˜é€»è¾‘çœ‹èµ·æ¥æ²¡é—®é¢˜ï¼Œæ•°æ®æµä¹Ÿæ¸…æ™°ï¼Œä½†å°±æ˜¯æ— æ³•æ­£å¸¸å·¥ä½œã€‚ç”¨æˆ·ç‚¹å‡»æŒ‰é’®åï¼ŒçŠ¶æ€æ›´æ–°äº†ï¼Œä½†UIæ²¡æœ‰å“åº”ã€‚è¿™ç§é—®é¢˜æœ€è®©äººå¤´ç–¼â€”â€”ä¸æ˜¯å®Œå…¨æŠ¥é”™ï¼Œè€Œæ˜¯é™é»˜å¤±è´¥ã€‚</p>
<p>æ—æ™¨é‡æ–°å®¡è§†ä»£ç ã€‚è¿™æ˜¯ä¸€ä¸ªVue 3ç»„ä»¶ï¼Œä½¿ç”¨äº†Composition APIã€‚ä»–å–œæ¬¢è¿™ç§å†™æ³•ï¼Œä»£ç ç»„ç»‡æ›´æ¸…æ™°ï¼Œé€»è¾‘å¤ç”¨æ–¹ä¾¿ã€‚ä½†æœ‰æ—¶å€™ï¼Œæ¸…æ™°çš„ç»“æ„åè€Œä¼šæ©ç›–é—®é¢˜ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-title function_">handleClick</span> = (<span class="hljs-params">button, e, forceEmit = <span class="hljs-literal">false</span></span>) =&gt; {
  <span class="hljs-title function_">trackBtnClick</span>(button.<span class="hljs-property">label</span>?.<span class="hljs-title function_">toLowerCase</span>() || <span class="hljs-string">'buy now'</span>)
  
  <span class="hljs-keyword">if</span> ((props.<span class="hljs-property">shouldPopEvent</span> &amp;&amp; <span class="hljs-variable constant_">NEED_REACTIVE_LABEL_TYPE</span>.<span class="hljs-title function_">includes</span>(button.<span class="hljs-property">labelType</span>))) {
    e.<span class="hljs-title function_">preventDefault</span>()
    e.<span class="hljs-title function_">stopPropagation</span>()
    <span class="hljs-title function_">emit</span>(<span class="hljs-string">'click'</span>, button)
  }
  
  <span class="hljs-keyword">if</span> (forceEmit) {
    <span class="hljs-title function_">emit</span>(<span class="hljs-string">'click'</span>, button)
  }
}
</code></pre>
<p>ä»–ç›¯ç€è¿™æ®µä»£ç ï¼Œçªç„¶æ„è¯†åˆ°é—®é¢˜æ‰€åœ¨ã€‚ä¸¤ä¸ªç‹¬ç«‹çš„ifè¯­å¥éƒ½ä¼šè°ƒç”¨emit('click', button)ï¼Œè€Œç¬¬ä¸€ä¸ªifé‡Œé˜»æ­¢äº†äº‹ä»¶å†’æ³¡ï¼Œè¿™å¯èƒ½å¯¼è‡´æŸäº›æƒ…å†µä¸‹äº‹ä»¶å¤„ç†ä¸æ­£ç¡®ã€‚æ›´é‡è¦çš„æ˜¯ï¼Œå½“shouldPopEventä¸ºtrueä¸”forceEmitä¹Ÿä¸ºtrueæ—¶ï¼Œä¼šè§¦å‘ä¸¤æ¬¡emitï¼Œè™½ç„¶ä¸ä¼šå¯¼è‡´bugï¼Œä½†ç¡®å®ä¸å¤Ÿä¼˜é›…ã€‚</p>
<p>æ—æ™¨å¼€å§‹é‡æ„ä»£ç ï¼Œæå–æ¡ä»¶å˜é‡ï¼Œåˆå¹¶emitè°ƒç”¨ï¼Œæ·»åŠ ç©ºå€¼æ£€æŸ¥ï¼Œé€»è¾‘æ›´æ¸…æ™°ç»Ÿä¸€ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-title function_">handleClick</span> = (<span class="hljs-params">button, e, forceEmit = <span class="hljs-literal">false</span></span>) =&gt; {
  <span class="hljs-title function_">trackBtnClick</span>(button.<span class="hljs-property">label</span>?.<span class="hljs-title function_">toLowerCase</span>() || <span class="hljs-string">'buy now'</span>)
  
  <span class="hljs-keyword">const</span> shouldPopEvent = props.<span class="hljs-property">shouldPopEvent</span> &amp;&amp; <span class="hljs-variable constant_">NEED_REACTIVE_LABEL_TYPE</span>.<span class="hljs-title function_">includes</span>(button.<span class="hljs-property">labelType</span>)
  <span class="hljs-keyword">const</span> shouldEmit = shouldPopEvent || forceEmit
  
  <span class="hljs-keyword">if</span> (shouldPopEvent &amp;&amp; e) {
    e.<span class="hljs-title function_">preventDefault</span>()
    e.<span class="hljs-title function_">stopPropagation</span>()
  }
  
  <span class="hljs-keyword">if</span> (shouldEmit) {
    <span class="hljs-title function_">emit</span>(<span class="hljs-string">'click'</span>, button)
  }
}
</code></pre>
<p>è¿è¡Œæµ‹è¯•ï¼Œbugæ¶ˆå¤±äº†ã€‚é—®é¢˜è§£å†³äº†ï¼Œä½†æ—æ™¨å¹¶æ²¡æœ‰æ„Ÿåˆ°å…´å¥‹ï¼Œåè€Œæœ‰äº›ç–²æƒ«ã€‚å°é—®é¢˜å¾€å¾€æœ€è€—æ—¶é—´â€”â€”çœ‹èµ·æ¥ç®€å•ï¼Œä½†éœ€è¦ä»”ç»†æ€è€ƒæ‰èƒ½æ‰¾åˆ°æ ¹æºã€‚</p>
<p>ä»–ä¿å­˜ä»£ç ï¼Œæäº¤åˆ°gitï¼Œç„¶åå…³æ‰ç¼–è¾‘å™¨ã€‚çª—å¤–çš„åŸå¸‚ä¾ç„¶å®‰é™ï¼Œåªæœ‰å¶å°”ç»è¿‡çš„è½¦è¾†æ‰“ç ´å®é™ã€‚</p>
<p>æ—æ™¨èµ°åˆ°çª—è¾¹ï¼Œçœ‹ç€è¿œå¤„é‚£æ ‹è¿˜äº®ç€ç¯çš„å†™å­—æ¥¼ã€‚ä¸çŸ¥é“æ˜¯å“ªä¸ªåŒè¡Œä¹Ÿåœ¨åŠ ç­ï¼Œä¹Ÿè®¸æ­£åœ¨è§£å†³ç±»ä¼¼çš„é—®é¢˜ã€‚ç¨‹åºå‘˜çš„ç”Ÿæ´»å°±æ˜¯è¿™æ ·ï¼šç™½å¤©å†™ä»£ç ï¼Œæ™šä¸Šä¿®bugï¼Œå‘¨æœ«å­¦ä¹ æ–°æŠ€æœ¯ã€‚æ°¸è¿œæœ‰è§£å†³ä¸å®Œçš„é—®é¢˜ï¼Œæ°¸è¿œæœ‰å­¦ä¸å®Œçš„çŸ¥è¯†ã€‚</p>
<p>ä»–å›åˆ°ç”µè„‘å‰ï¼Œæ‰“å¼€é‚®ç®±ã€‚ä¸€å°æœªè¯»é‚®ä»¶æ¥è‡ªé¡¹ç›®ç»ç†å¼ æ˜ï¼Œæ—¶é—´æ˜¯æ™šä¸Šåä¸€ç‚¹ã€‚</p>
<p>â€œæ—æ™¨ï¼Œæ˜å¤©æ—©ä¸Šæœ‰ä¸ªæ–°é¡¹ç›®è¦è®¨è®ºï¼Œå…³äºä¸€ä¸ªå°è¯´é˜…è¯»å™¨ç»„ä»¶ã€‚å®¢æˆ·éœ€æ±‚æ¯”è¾ƒå¤æ‚ï¼Œéœ€è¦æ”¯æŒè‡ªå®šä¹‰å­—ä½“ã€å¤œé—´æ¨¡å¼ã€è¿›åº¦ä¿å­˜ç­‰åŠŸèƒ½ã€‚ä½ æŠ€æœ¯èƒ½åŠ›å¼ºï¼Œæˆ‘æƒ³è®©ä½ æ¥è´Ÿè´£è¿™ä¸ªé¡¹ç›®ã€‚æ˜å¤©ä¸Šåˆåç‚¹ï¼Œä¼šè®®å®¤Aï¼Œæˆ‘ä»¬è¯¦ç»†è®¨è®ºã€‚â€</p>
<p>å°è¯´é˜…è¯»å™¨ï¼Ÿæ—æ™¨æœ‰äº›æ„å¤–ã€‚ä»–ä»¬å…¬å¸ä¸»è¦åšä¼ä¸šçº§åº”ç”¨ï¼Œçªç„¶åšé˜…è¯»å™¨ç»„ä»¶ç¡®å®ä¸å¸¸è§ã€‚ä½†è½¬å¿µä¸€æƒ³ï¼Œè¿™æˆ–è®¸æ˜¯ä¸ªæœºä¼šï¼šä»–æœ€è¿‘åœ¨å­¦ä¹ Vue 3çš„æ–°ç‰¹æ€§ï¼Œæ­£å¥½å¯ä»¥å®è·µã€‚</p>
<p>ä»–å›å¤é‚®ä»¶ï¼Œè¡¨ç¤ºæ„¿æ„æ¥æ‰‹é¡¹ç›®ï¼Œç„¶åå…³æ‰ç”µè„‘å‡†å¤‡ä¼‘æ¯ã€‚èººåœ¨åºŠä¸Šï¼Œä»–è¿˜åœ¨æƒ³é‚£ä¸ªbugã€‚è™½ç„¶è§£å†³äº†ï¼Œä½†æ€»è§‰å¾—è¿˜æœ‰æ›´å¥½çš„æ–¹æ³•ã€‚ç¨‹åºå‘˜çš„èŒä¸šç—…â€”â€”æ°¸è¿œä¸æ»¡è¶³ç°çŠ¶ï¼Œæ°¸è¿œæƒ³ä¼˜åŒ–ã€‚</p>
<p>æƒ³ç€å‰è¾ˆçš„è¯ï¼šâ€œå†™ä»£ç å®¹æ˜“ï¼Œå†™å¥½ä»£ç éš¾ã€‚ä½†æœ€éš¾çš„æ˜¯ï¼Œåœ¨æ—¶é—´å‹åŠ›å’Œå®Œç¾ä¸»ä¹‰ä¹‹é—´æ‰¾åˆ°å¹³è¡¡ã€‚â€æ—æ™¨æ¸æ¸ç¡ç€äº†ã€‚æ¢¦é‡Œï¼Œä»–è¿˜åœ¨å†™ä»£ç ï¼Œä½†è¿™æ¬¡è¿è¡Œå®Œç¾ï¼Œæ²¡æœ‰bugã€‚</p>
<p>ç¬¬äºŒå¤©æ—©ä¸Šï¼Œæ—æ™¨æ¯”å¹³æ—¶æ—©åˆ°åŠå…¬å®¤ã€‚ä¹ç‚¹å››åäº”åˆ†ï¼Œä»–èµ°è¿›ä¼šè®®å®¤ã€‚é‡Œé¢å·²ç»æœ‰äººï¼šäº§å“ç»ç†è‹é›¨ï¼ŒUIè®¾è®¡å¸ˆç‹é›ªï¼ŒæŠ€æœ¯æ€»ç›‘é™ˆæµ©ï¼Œä»¥åŠå¼ æ˜ã€‚</p>
<p>è‹é›¨æ‰“å¼€æŠ•å½±ä»ªï¼Œä»‹ç»é¡¹ç›®ï¼šâ€œå®¢æˆ·æ˜¯ä¸€å®¶åœ¨çº¿æ•™è‚²å…¬å¸ï¼Œå¸Œæœ›æä¾›é˜…è¯»å¹³å°ï¼Œæ”¯æŒè‡ªå®šä¹‰å­—ä½“ã€å¤œé—´æ¨¡å¼ã€è¿›åº¦ä¿å­˜ã€ç« èŠ‚å¯¼èˆªç­‰åŠŸèƒ½ã€‚è¦æ±‚å“åº”å¼è®¾è®¡ï¼Œé•¿ç« èŠ‚ä¹Ÿè¦æµç•…ã€‚â€</p>
<p>æ—æ™¨è®¤çœŸè®°å½•ï¼ŒåŒæ—¶æå‡ºæŠ€æœ¯é—®é¢˜ï¼š</p>
<ul>
<li>
<p>ç« èŠ‚å†…å®¹æ ¼å¼ï¼šHTML</p>
</li>
<li>
<p>è¿›åº¦å­˜å‚¨ï¼šlocalStorageè¿˜æ˜¯åç«¯ï¼Ÿ</p>
</li>
<li>
<p>ä¸Šçº¿æ—¶é—´ï¼šä¸€ä¸ªæœˆ</p>
</li>
</ul>
<p>å¼ æ˜ç­”å¤ï¼šæ•°æ®ä¸ºHTMLæ ¼å¼ï¼Œè¿›åº¦å…ˆå­˜localStorageï¼Œå®¢æˆ·å¸Œæœ›ä¸€ä¸ªæœˆä¸Šçº¿ã€‚</p>
<p>æ—æ™¨å¿ƒé‡Œè®¡ç®—ï¼šè®¾è®¡ä¸€å‘¨ï¼Œå¼€å‘ä¸¤å‘¨ï¼Œæµ‹è¯•å’Œä¼˜åŒ–ä¸€å‘¨ï¼Œæ—¶é—´ç´§è¿«ä½†å¯è¡Œã€‚ä»–æå‡ºå‡ ç‚¹æ”¯æŒéœ€æ±‚ï¼š</p>
<ol>
<li>
<p>UIè®¾è®¡å°½å¿«ç¡®å®š</p>
</li>
<li>
<p>æµ‹è¯•ç¯å¢ƒéœ€æ¨¡æ‹Ÿå¤§é‡æ•°æ®</p>
</li>
<li>
<p>æŠ€æœ¯éš¾é¢˜å¯å¯»æ±‚å›¢é˜Ÿæ”¯æŒ</p>
</li>
</ol>
<p>é™ˆæµ©ç‚¹å¤´ï¼šâ€œæ—æ™¨ï¼Œé¡¹ç›®ä½ å…¨æƒè´Ÿè´£ã€‚é‡åˆ°é—®é¢˜æ‰¾æˆ‘æˆ–å›¢é˜Ÿï¼Œéƒ½ä¼šæ”¯æŒã€‚â€</p>
<p>ä¼šè®®ç»“æŸåï¼Œæ—æ™¨å›åˆ°å·¥ä½ï¼Œå¼€å§‹è§„åˆ’ç»„ä»¶æ¶æ„ï¼š</p>
<ol>
<li>
<p>ä¸»ç»„ä»¶ï¼šNovelReader.vue</p>
</li>
<li>
<p>è®¾ç½®é¢æ¿ï¼šNovelReaderSettings.vue</p>
</li>
<li>
<p>ç« èŠ‚åˆ—è¡¨ï¼šNovelChapterList.vue</p>
</li>
<li>
<p>Composableï¼šuseNovelReader.js</p>
</li>
</ol>
<p>ä»–åœ¨çº¸ä¸Šç”»æ¶æ„å›¾ï¼Œæ€è€ƒæ¨¡å—èŒè´£å’Œæ¥å£ï¼Œå–œæ¬¢ä»é›¶å¼€å§‹è®¾è®¡çš„æ„Ÿè§‰ï¼Œå°±åƒå»ºç­‘å¸ˆè®¾è®¡æˆ¿å­ã€‚</p>
<p>è‹é›¨è¿‡æ¥ï¼Œé€’ç»™ä»–è¯¦ç»†éœ€æ±‚æ–‡æ¡£å’Œå‚è€ƒæ¡ˆä¾‹ï¼šâ€œæœ‰ä»€ä¹ˆé—®é¢˜éšæ—¶æ‰¾æˆ‘ï¼Œæˆ‘å°±åœ¨ä½ å¯¹é¢å·¥ä½ã€‚â€</p>
<p>æ—æ™¨æ¥è¿‡ï¼Œç‚¹å¤´ã€‚è‹é›¨ç¬‘äº†ç¬‘ï¼šâ€œè¿™ä¸ªé¡¹ç›®å¯èƒ½éœ€æ±‚å¤šå˜ï¼Œæå‰æ²Ÿé€šé¿å…è¿”å·¥ã€‚â€</p>
<p>ä»–å¾®å¾®ä¸€ç¬‘ï¼Œå›åˆ°ç”µè„‘ï¼Œæ­å»ºé¡¹ç›®æ¡†æ¶ï¼Œå†™åŸºç¡€composableï¼Œå®šä¹‰æ•°æ®æ¥å£ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// useNovelReader.js</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">useNovelReader</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> currentChapterIndex = <span class="hljs-title function_">ref</span>(<span class="hljs-number">0</span>)
  <span class="hljs-keyword">const</span> readingSettings = <span class="hljs-title function_">ref</span>({
    <span class="hljs-attr">fontSize</span>: <span class="hljs-number">18</span>,
    <span class="hljs-attr">lineHeight</span>: <span class="hljs-number">1.8</span>,
    <span class="hljs-attr">backgroundColor</span>: <span class="hljs-string">'#f5f5dc'</span>,
    <span class="hljs-comment">// ...</span>
  })
}
</code></pre>
<p>æ™šä¸Šä¸ƒç‚¹ï¼Œæ—æ™¨ä¿å­˜ä»£ç æäº¤åˆ°gitï¼Œå…³æ‰ç”µè„‘ï¼Œèµ°å‡ºå…¬å¸å¤§æ¥¼ã€‚æ™šé£å¸¦ç€ä¸€ä¸å‡‰æ„ï¼Œä»–åœ¨å›å®¶çš„è·¯ä¸Šæ€è€ƒè¿™ä¸ªå……æ»¡æŒ‘æˆ˜çš„é˜…è¯»å™¨é¡¹ç›®ã€‚å›åˆ°å®¶ï¼Œä»–ç®€å•åƒäº†ç‚¹ä¸œè¥¿ï¼Œç„¶åå­¦ä¹ Vue 3çš„æ–°ç‰¹æ€§ï¼Œå‡†å¤‡ç¬¬äºŒå¤©ç»§ç»­å¼€å‘ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[HarmonyOS å®˜æ–¹çš„rulesè§„åˆ™ä½ è¿˜ä¸çŸ¥é“å—(å¯ä»¥ç›´æ¥CVä½¿ç”¨)]]></title>    <link>https://juejin.cn/post/7602841282801696809</link>    <guid>https://juejin.cn/post/7602841282801696809</guid>    <pubDate>2026-02-04T10:38:55.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602841282801696809" data-draft-id="7602543146237919275" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="HarmonyOS å®˜æ–¹çš„rulesè§„åˆ™ä½ è¿˜ä¸çŸ¥é“å—(å¯ä»¥ç›´æ¥CVä½¿ç”¨) "/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-02-04T10:38:55.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸‡å°‘"/> <meta itemprop="url" content="https://juejin.cn/user/4441682708283191"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            HarmonyOS å®˜æ–¹çš„rulesè§„åˆ™ä½ è¿˜ä¸çŸ¥é“å—(å¯ä»¥ç›´æ¥CVä½¿ç”¨) 
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4441682708283191/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸‡å°‘
  </span> <!----> <!----> <div class="vip-level" data-v-cd7d0a50="" data-v-292f6e48=""><span class="tooltip" data-v-cd7d0a50=""><div class="byte-tooltip byte-tooltip--dark" style="display:none;">
        VIP.5 å¦‚é±¼å¾—æ°´
      </div><span class="byte-tooltip__wrapper"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8AQMAAAAAMksxAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAA5JREFUKM9jGAWjAAcAAAIcAAE27nY6AAAAAElFTkSuQmCC" alt="VIP.5 å¦‚é±¼å¾—æ°´" title="VIP.5 å¦‚é±¼å¾—æ°´" class="lazy" style="aspect-ratio:NaN;" data-v-5244ef91="" data-v-cd7d0a50=""/></span></span></div> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T10:38:55.000Z" title="Wed Feb 04 2026 10:38:55 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»17åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">HarmonyOS å®˜æ–¹çš„rulesè§„åˆ™ä½ è¿˜ä¸çŸ¥é“å—(å¯ä»¥ç›´æ¥CVä½¿ç”¨) <a href="#harmonyos-%E5%AE%98%E6%96%B9%E7%9A%84rules%E8%A7%84%E5%88%99%E4%BD%A0%E8%BF%98%E4%B8%8D%E7%9F%A5%E9%81%93%E5%90%97-%E5%8F%AF%E4%BB%A5%E7%9B%B4%E6%8E%A5cv%E4%BD%BF%E7%94%A8" title="#harmonyos-%E5%AE%98%E6%96%B9%E7%9A%84rules%E8%A7%84%E5%88%99%E4%BD%A0%E8%BF%98%E4%B8%8D%E7%9F%A5%E9%81%93%E5%90%97-%E5%8F%AF%E4%BB%A5%E7%9B%B4%E6%8E%A5cv%E4%BD%BF%E7%94%A8">â€‹</a></h2>
<blockquote>
<p>ä¸‡å°‘ï¼šåä¸ºHDEã€é¸¿è’™æå®¢</p>
<p>ä¸ªäººä¸»é¡µï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.zbztb.cn%2F" target="_blank" title="https://blog.zbztb.cn/" ref="nofollow noopener noreferrer">blog.zbztb.cn/</a></p>
<p><strong>2025å¹´å‚ä¸å­µåŒ–äº†20+é¸¿è’™åº”ç”¨ã€æŠ€æœ¯æ–‡ç« 300+ã€é¸¿è’™çŸ¥è¯†åº“ç”¨æˆ·500+ã€é¸¿è’™å…è´¹è¯¾ç¨‹2å¥—ã€‚</strong></p>
<p>å¦‚æœä½ ä¹Ÿå–œæ¬¢äº¤æµAIå’Œé¸¿è’™æŠ€æœ¯ï¼Œæ¬¢è¿æ‰£æˆ‘ã€‚</p>
</blockquote>
<h2 data-id="heading-1">å‰è¨€ <a href="#%E5%89%8D%E8%A8%80" title="#%E5%89%8D%E8%A8%80">â€‹</a></h2>
<p>2026å¹´ï¼Œä¹Ÿæ˜¯<code>AI</code> ç¼–ç¨‹è“¬å‹ƒå‘å±•çš„ä¸€å¹´ã€‚</p>
<p><code>DevEco Studio 6.0.2 Beta1</code> å¼€å§‹ä¹Ÿè¿æ¥äº†å¤§çš„å¢å¼ºï¼Œè¿™ä¸ªèƒ½åŠ›çš„åˆ°æ¥ï¼Œ</p>
<p>åŸºæœ¬å¯ä»¥å®ç°åªåœ¨ <code>DevEco Studio</code> ä¸­è¿›è¡Œæ„‰å¿«çš„ <code>AI</code> ç¼–ç¨‹äº†ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/da0fa6157e2f48eeafb933688daa5c4b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiH5bCR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770806335&amp;x-signature=U1BXYGFziLhLBWBsTaGDZ6I6xxg%3D" alt="" loading="lazy"/></p>
<p>å¢åŠ çš„èƒ½åŠ›æœ‰ï¼š</p>
<ul>
<li>æ™ºèƒ½ä½“</li>
<li>MCP</li>
<li>æ¨¡å‹</li>
<li>è§„åˆ™</li>
</ul>
<h2 data-id="heading-2">æ¨¡å‹ <a href="#%E6%A8%A1%E5%9E%8B" title="#%E6%A8%A1%E5%9E%8B">â€‹</a></h2>
<p>å…ˆæ¥èŠä¸€ä¸‹æ¨¡å‹ï¼Œç›®å‰å®˜æ–¹å†…ç½®çš„å¤§æ¨¡å‹æœ‰ <code>deepseek-v3.1</code>ï¼Œ</p>
<p>ç°åœ¨çš„æ—¥æœŸæ˜¯ <strong>2026å¹´2æœˆ3æ—¥</strong></p>
<p>è¯´å®åœ¨çš„ï¼Œ<code>deepseek-v3.1</code> æœ‰ç‚¹ä¸å¤Ÿæ‰“äº†ï¼Œç›®å‰å›½äº§æ¨¡å‹æ¬¢å‘¼å£°æ¯”è¾ƒå¤§çš„æ˜¯ <code>GLM4.7</code>ï¼Œä»¥åŠ <code>Kimi2.5</code>ã€‚</p>
<p>ä¸è¿‡èƒœåœ¨å¯ä»¥æ¥å…¥ä¸‰æ–¹çš„å¤§æ¨¡å‹ã€‚</p>
<p>ä¸‡å°‘è¿™é‡Œæ¥å…¥äº†çš„æœ‰</p>
<ul>
<li><strong>æ™ºè°±å®˜æ–¹çš„ <code>GLM4.7</code> æ”¶è´¹çš„</strong></li>
<li><strong>è‹±ä¼Ÿè¾¾çš„ <code>GLM4.7</code> å…è´¹çš„</strong></li>
</ul>
<p>å¼€å‘è€…å¯ä»¥è‡ªç”±é€‰æ‹©ï¼Œå¦‚æœä¸çŸ¥é“å¦‚ä½•é…ç½®çš„ï¼Œæ¬¢è¿<strong>æ‰£æˆ‘</strong>ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e0e524f4e283429ba0692340c2655f2f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiH5bCR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770806335&amp;x-signature=%2BD9vM1V3Z8lG6ovhecGeGJNjgMM%3D" alt="" loading="lazy"/></p>
<p>â€‹</p>
<h2 data-id="heading-3">æ™ºèƒ½ä½“ <a href="#%E6%99%BA%E8%83%BD%E4%BD%93" title="#%E6%99%BA%E8%83%BD%E4%BD%93">â€‹</a></h2>
<p>ä½ å¯ä»¥è‡ªå®šä¹‰æ™ºèƒ½ä½“ï¼Œç†è§£ä¸ºè¿™ä¸ª <code>AI</code> ç¼–ç¨‹å·¥å…·çš„è§’è‰²æ˜¯è°å³å¯ï¼Œæ–‡ç« æœ«å°¾æä¾›<strong>ä¸‡å°‘çš„æ™ºèƒ½ä½“</strong>ä»¥ä¾›å‚è€ƒ</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9ff59342906f4ee7a2ac43ceeb41c578~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiH5bCR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770806335&amp;x-signature=a4zhHgFJEDYI20PP7fXf5LsetrE%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-4">è§„åˆ™ <a href="#%E8%A7%84%E5%88%99" title="#%E8%A7%84%E5%88%99">â€‹</a></h2>
<p>è§„åˆ™åˆ†æˆ<strong>ä¸¤ç§</strong>ï¼Œä¸€ç§æ˜¯<strong>é¡¹ç›®çº§åˆ«</strong>çš„ï¼Œåªåœ¨<strong>å½“å‰å·¥ç¨‹</strong>å†…æœ‰æ•ˆ</p>
<p>å¦ä¸€ç§æ˜¯<strong>å…¨å±€</strong>çš„ï¼Œæ‰€æœ‰çš„å·¥ç¨‹éƒ½ç”Ÿæ•ˆã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/db4a76f66cd3426fa1e8e83b46c246b6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiH5bCR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770806335&amp;x-signature=A8jqMaUsvdUAGzL6oBAAVPGaPJA%3D" alt="" loading="lazy"/></p>
<p>æœ‰æ„æ€çš„æ˜¯ <code>CodeGenie</code> ä¸­å·²ç»åŒ…å«äº†ä¸€ä»½å†…ç½®çš„ <code>HarmonyOS</code> è§„åˆ™ï¼Œæ—¢ç„¶æ˜¯å†…ç½®çš„ï¼Œé‚£ä¹ˆå°±ç†è§£æ˜¯<strong>å®˜æ–¹çš„è§„åˆ™</strong>ï¼</p>
<p>ä¸€è§ˆã€‚</p>
<blockquote>
<p>æ–‡ç« æœ«å°¾ä¼šæä¾›ï¼Œå¯ä»¥ç›´æ¥ <code>CV</code>ã€‚</p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2e748b39f5fc4495ae9e6465ea752564~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiH5bCR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770806335&amp;x-signature=toBK4%2BZ6%2BpPpe6cv0G9cBCHfV2Y%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-5">MCP <a href="#mcp" title="#mcp">â€‹</a></h2>
<p><code>MCP</code> å¯ä»¥è®©æˆ‘ä»¬çš„ <code>AI</code> ç¼–è¾‘å™¨ç›´æ¥å¯¹æ¥å¤–éƒ¨å„ç§æœåŠ¡ï¼Œè¿™é‡Œæˆ‘æœ€å¸¸ä½¿ç”¨çš„æ˜¯ <code>context7</code></p>
<p><code>context7</code> æ˜¯ä¸€ä¸ªè¿œç¨‹ä»“åº“ï¼Œå®ƒä¸Šé¢æœ‰å„ç§ç¼–ç¨‹è¯­è¨€çš„èµ„æ–™ï¼Œå½“ä½ çš„ <code>AI</code> ç¼–è¾‘å™¨ç”Ÿæˆçš„ä»£ç è¯­æ³•æœ‰è¯¯æ—¶ï¼Œåªè¦ä½ é…ç½®äº† <code>context7</code>ï¼Œç„¶ååœ¨å¯¹è¯ä¸­åªéœ€è¦è¿™æ ·ï¼š</p>
<blockquote>
<p>å¸®æˆ‘ç”Ÿæˆä¸€æ®µä¸‹è½½å›¾ç‰‡çš„ä»£ç  <code>use context7</code>ã€‚</p>
</blockquote>
<p>é‚£ä¹ˆä½ çš„ <code>AI</code> ç¼–è¾‘å™¨å°±ä¼šè‡ªåŠ¨å»æœç´¢ <code>context7</code> ä¸Šæœ€æ–°çš„ <code>HarmonyOS</code> ä»£ç ï¼Œç¡®ä¿ç”Ÿæˆçš„è¯­æ³•æ— è¯¯äº†ã€‚</p>
<p>å¦‚æœä½ ä¹Ÿæƒ³è¦é…ç½®ï¼Œå¯ä»¥å‚è€ƒï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e6bc383fec974861a5539fe5b2929d1c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiH5bCR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770806335&amp;x-signature=t%2BGpraDXCzthAqSArIzMxt1CRZ8%3D" alt="" loading="lazy"/></p>
<p>json</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"mcpServers"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"context7"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"args"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"-y"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"@upstash/context7-mcp@latest"</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"command"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"npx"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"enabled"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"env"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"DEFAULT_MINIMUM_TOKENS"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"10000"</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h2 data-id="heading-6">è§„åˆ™æ¨¡ç‰ˆ <a href="#%E8%A7%84%E5%88%99%E6%A8%A1%E7%89%88" title="#%E8%A7%84%E5%88%99%E6%A8%A1%E7%89%88">â€‹</a></h2>
<p>markdown</p>
<pre><code class="hljs language-typescript" lang="typescript">ä½ æ­£åœ¨ä¸º <span class="hljs-title class_">HarmonyOS</span> åº”ç”¨å¼€å‘ç›¸å…³åŠŸèƒ½ã€‚ä»¥ä¸‹æ˜¯ä½ éœ€è¦éµå¾ªçš„å¼€å‘è§„åˆ™ã€‚

## <span class="hljs-title class_">ArkTS</span>/ets è¯­æ³•çº¦æŸ(è¿åæ¡ç›®å°†æ— æ³•ç¼–è¯‘é€šè¿‡)

- ä¸æ”¯æŒç´¢å¼•è®¿é—®ç±»å‹ã€‚è¯·æ”¹ç”¨ç±»å‹åç§°ã€‚
- ä¸æ”¯æŒç¯å¢ƒæ¨¡å—å£°æ˜ï¼Œå› ä¸ºå®ƒæœ‰è‡ªå·±çš„ä¸ <span class="hljs-title class_">JavaScript</span> äº’æ“ä½œçš„æœºåˆ¶ã€‚è¯·ä»åŸå§‹æ¨¡å—ä¸­å¯¼å…¥æ‰€éœ€çš„å†…å®¹ã€‚
- ä¸æ”¯æŒ <span class="hljs-built_in">any</span> å’Œ <span class="hljs-built_in">unknown</span> ç±»å‹ã€‚è¯·æ˜¾å¼æŒ‡å®šç±»å‹ã€‚
- ä¸æ”¯æŒ <span class="hljs-keyword">as</span> <span class="hljs-keyword">const</span> æ–­è¨€ï¼Œå› ä¸ºåœ¨æ ‡å‡† <span class="hljs-title class_">TypeScript</span> ä¸­ï¼Œ<span class="hljs-keyword">as</span> <span class="hljs-keyword">const</span> ç”¨äºä½¿ç”¨ç›¸åº”çš„å­—é¢é‡ç±»å‹æ ‡æ³¨å­—é¢é‡ï¼Œè€Œ <span class="hljs-title class_">ArkTS</span> ä¸æ”¯æŒå­—é¢é‡ç±»å‹ã€‚è¯·é¿å…ä½¿ç”¨ <span class="hljs-keyword">as</span> <span class="hljs-keyword">const</span> æ–­è¨€ã€‚è¯·æ”¹ç”¨å­—é¢é‡çš„æ˜¾å¼ç±»å‹æ ‡æ³¨ã€‚
- ä¸æ”¯æŒå¯¹è±¡ç±»å‹ä¸­çš„è°ƒç”¨ç­¾åã€‚è¯·æ”¹ç”¨ <span class="hljs-keyword">class</span>ï¼ˆç±»ï¼‰æ¥å®ç°ã€‚
- ä¸æ”¯æŒç±»å­—é¢é‡ã€‚è¯·æ˜¾å¼å¼•å…¥æ–°çš„å‘½åç±»ç±»å‹ã€‚
- ä¸æ”¯æŒå°†ç±»ç”¨ä½œå¯¹è±¡ï¼ˆå°†å…¶èµ‹å€¼ç»™å˜é‡ç­‰ï¼‰ã€‚è¿™æ˜¯å› ä¸ºåœ¨ <span class="hljs-title class_">ArkTS</span> ä¸­ï¼Œç±»å£°æ˜å¼•å…¥çš„æ˜¯ä¸€ç§æ–°ç±»å‹ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå€¼ã€‚è¯·å‹¿å°†ç±»ç”¨ä½œå¯¹è±¡ï¼›ç±»å£°æ˜å¼•å…¥çš„æ˜¯ä¸€ç§æ–°ç±»å‹ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå€¼ã€‚
- ä»…åœ¨ <span class="hljs-keyword">for</span> å¾ªç¯ä¸­æ”¯æŒé€—å·è¿ç®—ç¬¦ã€‚åœ¨å…¶ä»–æƒ…å†µä¸‹ï¼Œé€—å·è¿ç®—ç¬¦æ˜¯æ— ç”¨çš„ï¼Œå› ä¸ºå®ƒä¼šä½¿æ‰§è¡Œé¡ºåºæ›´éš¾ç†è§£ã€‚åœ¨ <span class="hljs-keyword">for</span> å¾ªç¯ä¹‹å¤–ï¼Œè¯·ä½¿ç”¨æ˜¾å¼æ‰§è¡Œé¡ºåºè€Œä¸æ˜¯é€—å·è¿ç®—ç¬¦ã€‚
- ä¸æ”¯æŒæ¡ä»¶ç±»å‹åˆ«åã€‚è¯·æ˜¾å¼å¼•å…¥å¸¦çº¦æŸçš„æ–°ç±»å‹ï¼Œæˆ–ä½¿ç”¨ <span class="hljs-title class_">Object</span> é‡å†™é€»è¾‘ã€‚ä¸æ”¯æŒ infer å…³é”®å­—ã€‚
- ä¸æ”¯æŒåœ¨æ„é€ å‡½æ•°ä¸­å£°æ˜ç±»å­—æ®µã€‚è¯·åœ¨ç±»å£°æ˜å†…éƒ¨å£°æ˜ç±»å­—æ®µã€‚
- ä¸æ”¯æŒä½¿ç”¨æ„é€ å‡½æ•°ç±»å‹ã€‚è¯·æ”¹ç”¨ lambdasï¼ˆåŒ¿åå‡½æ•°ï¼‰ã€‚
- ä¸æ”¯æŒæ¥å£ä¸­çš„æ„é€ å‡½æ•°ç­¾åã€‚è¯·æ”¹ç”¨æ–¹æ³•ï¼ˆmethodsï¼‰ã€‚
- ä¸æ”¯æŒå¯¹è±¡ç±»å‹ä¸­çš„æ„é€ å‡½æ•°ç­¾åã€‚è¯·æ”¹ç”¨ <span class="hljs-keyword">class</span>ï¼ˆç±»ï¼‰æ¥å®ç°ã€‚
- ä¸æ”¯æŒå£°æ˜åˆå¹¶ã€‚è¯·ä¿æŒä»£ç åº“ä¸­æ‰€æœ‰ç±»å’Œæ¥å£çš„å®šä¹‰ç´§å‡‘ã€‚
- ä¸æ”¯æŒç¡®å®šæ€§èµ‹å€¼æ–­è¨€ <span class="hljs-keyword">let</span> v!: Tï¼Œå› ä¸ºå®ƒä»¬è¢«è®¤ä¸ºæ˜¯è¿‡åº¦çš„ç¼–è¯‘å™¨æç¤ºã€‚ä½¿ç”¨ç¡®å®šæ€§èµ‹å€¼æ–­è¨€è¿ç®—ç¬¦ï¼ˆ!ï¼‰éœ€è¦è¿è¡Œæ—¶ç±»å‹æ£€æŸ¥ï¼Œå¯¼è‡´é¢å¤–çš„è¿è¡Œæ—¶å¼€é”€å¹¶ç”Ÿæˆæ­¤è­¦å‘Šã€‚è¯·æ”¹ç”¨å¸¦åˆå§‹åŒ–çš„å£°æ˜ã€‚å¦‚æœä½¿ç”¨äº†!ï¼Œè¯·ç¡®ä¿å®ä¾‹å±æ€§åœ¨ä½¿ç”¨å‰å·²èµ‹å€¼ï¼Œå¹¶æ³¨æ„è¿è¡Œæ—¶å¼€é”€å’Œè­¦å‘Šã€‚
- å‡å®šå¯¹è±¡å¸ƒå±€åœ¨ç¼–è¯‘æ—¶å·²çŸ¥ä¸”è¿è¡Œæ—¶ä¸å¯æ›´æ”¹ã€‚å› æ­¤ï¼Œåˆ é™¤å±æ€§çš„æ“ä½œæ²¡æœ‰æ„ä¹‰ã€‚ä¸ºäº†æ¨¡æ‹ŸåŸå§‹è¯­ä¹‰ï¼Œæ‚¨å¯ä»¥å£°æ˜ä¸€ä¸ªå¯ç©ºç±»å‹å¹¶èµ‹å€¼ä¸º <span class="hljs-literal">null</span> ä»¥æ ‡è®°å€¼çš„ç¼ºå¤±ã€‚
- ä¸æ”¯æŒè§£æ„èµ‹å€¼ã€‚è¯·æ”¹ç”¨å…¶ä»–æƒ¯ç”¨æ³•ï¼ˆä¾‹å¦‚ï¼Œåœ¨é€‚ç”¨æƒ…å†µä¸‹ä½¿ç”¨ä¸´æ—¶å˜é‡ï¼‰ä»£æ›¿ã€‚
- ä¸æ”¯æŒè§£æ„å˜é‡å£°æ˜ã€‚è¿™æ˜¯ä¸€ä¸ªä¾èµ–äºç»“æ„å…¼å®¹æ€§çš„åŠ¨æ€ç‰¹æ€§ã€‚åˆ›å»ºä¸­é—´å¯¹è±¡å¹¶é€å­—æ®µæ“ä½œï¼Œä¸å—åç§°é™åˆ¶ã€‚
- è¦æ±‚å‚æ•°ç›´æ¥ä¼ é€’ç»™å‡½æ•°ï¼Œå¹¶æ‰‹åŠ¨åˆ†é…å±€éƒ¨åç§°ã€‚è¯·å°†å‚æ•°ç›´æ¥ä¼ é€’ç»™å‡½æ•°ï¼Œå¹¶æ‰‹åŠ¨åˆ†é…å±€éƒ¨åç§°ï¼Œè€Œä¸æ˜¯ä½¿ç”¨è§£æ„å‚æ•°å£°æ˜ã€‚
- ä¸æ”¯æŒæšä¸¾çš„å£°æ˜åˆå¹¶ã€‚è¯·ä¿æŒä»£ç åº“ä¸­æ¯ä¸ªæšä¸¾çš„å£°æ˜ç´§å‡‘ã€‚
- ä¸æ”¯æŒä½¿ç”¨åœ¨ç¨‹åºè¿è¡Œæ—¶è¯„ä¼°çš„è¡¨è¾¾å¼åˆå§‹åŒ–æšä¸¾æˆå‘˜ã€‚æ­¤å¤–ï¼Œæ‰€æœ‰æ˜¾å¼è®¾ç½®çš„åˆå§‹åŒ–å™¨å¿…é¡»æ˜¯ç›¸åŒç±»å‹ã€‚è¯·ä»…ä½¿ç”¨ç›¸åŒç±»å‹çš„ç¼–è¯‘æ—¶è¡¨è¾¾å¼åˆå§‹åŒ–æšä¸¾æˆå‘˜ã€‚
- ä¸æ”¯æŒ <span class="hljs-keyword">export</span> = ...è¯­æ³•ã€‚è¯·æ”¹ç”¨æ™®é€šçš„ <span class="hljs-keyword">export</span> å’Œ <span class="hljs-keyword">import</span> è¯­æ³•ã€‚
- ä¸å…è®¸æ¥å£åŒ…å«ä¸¤ä¸ªå…·æœ‰ä¸å¯åŒºåˆ†ç­¾åçš„æ–¹æ³•ï¼ˆä¾‹å¦‚ï¼Œå‚æ•°åˆ—è¡¨ç›¸åŒä½†è¿”å›ç±»å‹ä¸åŒï¼‰ã€‚è¯·é¿å…æ¥å£æ‰©å±•å…·æœ‰ç›¸åŒæ–¹æ³•ç­¾åçš„å…¶ä»–æ¥å£ã€‚é‡æ„æ–¹æ³•åç§°æˆ–è¿”å›ç±»å‹ã€‚
- ä¸æ”¯æŒé€šè¿‡ <span class="hljs-keyword">for</span> .. <span class="hljs-keyword">in</span> å¾ªç¯éå†å¯¹è±¡å†…å®¹ã€‚å¯¹äºå¯¹è±¡ï¼Œè¿è¡Œæ—¶éå†å±æ€§è¢«è®¤ä¸ºæ˜¯å†—ä½™çš„ï¼Œå› ä¸ºå¯¹è±¡å¸ƒå±€åœ¨ç¼–è¯‘æ—¶å·²çŸ¥ä¸”è¿è¡Œæ—¶ä¸å¯æ›´æ”¹ã€‚å¯¹äºæ•°ç»„ï¼Œè¯·ä½¿ç”¨å¸¸è§„çš„ <span class="hljs-keyword">for</span> å¾ªç¯è¿›è¡Œè¿­ä»£ã€‚
- ä¸æ”¯æŒ <span class="hljs-title class_">Function</span>.<span class="hljs-property">apply</span> æˆ– <span class="hljs-title class_">Function</span>.<span class="hljs-property">call</span>ã€‚è¿™äº› <span class="hljs-variable constant_">API</span> åœ¨æ ‡å‡†åº“ä¸­ç”¨äºæ˜¾å¼è®¾ç½®è¢«è°ƒç”¨å‡½æ•°çš„ <span class="hljs-variable language_">this</span> å‚æ•°ã€‚åœ¨ <span class="hljs-title class_">ArkTS</span> ä¸­ï¼Œ<span class="hljs-variable language_">this</span> çš„è¯­ä¹‰è¢«é™åˆ¶ä¸ºä¼ ç»Ÿçš„ <span class="hljs-variable constant_">OOP</span> é£æ ¼ï¼Œå¹¶ä¸”ç¦æ­¢åœ¨ç‹¬ç«‹å‡½æ•°ä¸­ä½¿ç”¨ <span class="hljs-variable language_">this</span>ã€‚è¯·é¿å…ä½¿ç”¨ <span class="hljs-title class_">Function</span>.<span class="hljs-property">apply</span> å’Œ <span class="hljs-title class_">Function</span>.<span class="hljs-property">call</span>ã€‚è¯·éµå¾ªä¼ ç»Ÿçš„ <span class="hljs-variable constant_">OOP</span> é£æ ¼æ¥å¤„ç† <span class="hljs-variable language_">this</span> çš„è¯­ä¹‰ã€‚
- ä¸æ”¯æŒ <span class="hljs-title class_">Function</span>.<span class="hljs-property">bind</span>ã€‚è¿™äº› <span class="hljs-variable constant_">API</span> åœ¨æ ‡å‡†åº“ä¸­ç”¨äºæ˜¾å¼è®¾ç½®è¢«è°ƒç”¨å‡½æ•°çš„ <span class="hljs-variable language_">this</span> å‚æ•°ã€‚åœ¨ <span class="hljs-title class_">ArkTS</span> ä¸­ï¼Œ<span class="hljs-variable language_">this</span> çš„è¯­ä¹‰è¢«é™åˆ¶ä¸ºä¼ ç»Ÿçš„ <span class="hljs-variable constant_">OOP</span> é£æ ¼ï¼Œå¹¶ä¸”ç¦æ­¢åœ¨ç‹¬ç«‹å‡½æ•°ä¸­ä½¿ç”¨ <span class="hljs-variable language_">this</span>ã€‚è¯·é¿å…ä½¿ç”¨ <span class="hljs-title class_">Function</span>.<span class="hljs-property">bind</span>ã€‚è¯·éµå¾ªä¼ ç»Ÿçš„ <span class="hljs-variable constant_">OOP</span> é£æ ¼æ¥å¤„ç† <span class="hljs-variable language_">this</span> çš„è¯­ä¹‰ã€‚
- ä¸æ”¯æŒå‡½æ•°è¡¨è¾¾å¼ã€‚è¯·æ”¹ç”¨ç®­å¤´å‡½æ•°æ¥æ˜¾å¼æŒ‡å®šã€‚
- ä¸æ”¯æŒåœ¨å‡½æ•°ä¸Šå£°æ˜å±æ€§ï¼Œå› ä¸ºä¸æ”¯æŒå…·æœ‰åŠ¨æ€æ›´æ”¹å¸ƒå±€çš„å¯¹è±¡ã€‚å‡½æ•°å¯¹è±¡éµå¾ªæ­¤è§„åˆ™ï¼Œå…¶å¸ƒå±€åœ¨è¿è¡Œæ—¶ä¸å¯æ›´æ”¹ã€‚è¯·å‹¿ç›´æ¥åœ¨å‡½æ•°ä¸Šå£°æ˜å±æ€§ï¼Œå› ä¸ºå®ƒä»¬çš„å¸ƒå±€åœ¨è¿è¡Œæ—¶ä¸å¯æ›´æ”¹ã€‚
- å½“å‰ä¸æ”¯æŒç”Ÿæˆå™¨å‡½æ•°ã€‚è¯·ä½¿ç”¨ <span class="hljs-keyword">async</span>/<span class="hljs-keyword">await</span> æœºåˆ¶è¿›è¡Œå¤šä»»åŠ¡å¤„ç†ã€‚
- ä¸æ”¯æŒå…¨å±€ä½œç”¨åŸŸå’Œ globalThisï¼Œå› ä¸ºä¸æ”¯æŒå…·æœ‰åŠ¨æ€æ›´æ”¹å¸ƒå±€çš„æ— ç±»å‹å¯¹è±¡ã€‚è¯·ä½¿ç”¨æ˜¾å¼æ¨¡å—å¯¼å‡ºå’Œå¯¼å…¥æ¥åœ¨æ–‡ä»¶ä¹‹é—´å…±äº«æ•°æ®ï¼Œè€Œä¸æ˜¯ä¾èµ–å…¨å±€ä½œç”¨åŸŸã€‚
- æ”¯æŒå‡½æ•°è¿”å›ç±»å‹æ¨æ–­ï¼Œä½†æ­¤åŠŸèƒ½ç›®å‰å—åˆ°é™åˆ¶ã€‚ç‰¹åˆ«æ˜¯ï¼Œå½“ <span class="hljs-keyword">return</span> è¯­å¥ä¸­çš„è¡¨è¾¾å¼æ˜¯å¯¹è¿”å›ç±»å‹è¢«çœç•¥çš„å‡½æ•°æˆ–æ–¹æ³•çš„è°ƒç”¨æ—¶ï¼Œä¼šå‘ç”Ÿç¼–è¯‘æ—¶é”™è¯¯ã€‚å½“è¿”å›ç±»å‹è¢«çœç•¥æ—¶ï¼Œè¯·æ˜¾å¼æŒ‡å®šå‡½æ•°çš„è¿”å›ç±»å‹ã€‚
- ä¸æ”¯æŒå¯¼å…¥æ–­è¨€ï¼Œå› ä¸ºå¯¼å…¥åœ¨ <span class="hljs-title class_">ArkTS</span> ä¸­æ˜¯ç¼–è¯‘æ—¶ç‰¹æ€§ï¼Œè€Œä¸æ˜¯è¿è¡Œæ—¶ç‰¹æ€§ã€‚å› æ­¤ï¼Œå¯¹äºé™æ€ç±»å‹è¯­è¨€æ¥è¯´ï¼Œåœ¨è¿è¡Œæ—¶æ–­è¨€å¯¼å…¥ <span class="hljs-variable constant_">API</span> çš„æ­£ç¡®æ€§æ²¡æœ‰æ„ä¹‰ã€‚è¯·æ”¹ç”¨æ™®é€šçš„ <span class="hljs-keyword">import</span> è¯­æ³•ï¼›å¯¼å…¥çš„æ­£ç¡®æ€§å°†åœ¨ç¼–è¯‘æ—¶æ£€æŸ¥ã€‚
- ä¸æ”¯æŒ <span class="hljs-keyword">in</span> è¿ç®—ç¬¦ã€‚æ­¤è¿ç®—ç¬¦æ„ä¹‰ä¸å¤§ï¼Œå› ä¸ºå¯¹è±¡å¸ƒå±€åœ¨ç¼–è¯‘æ—¶å·²çŸ¥ä¸”è¿è¡Œæ—¶ä¸å¯æ›´æ”¹ã€‚å¦‚æœæ‚¨æƒ³æ£€æŸ¥æ˜¯å¦å­˜åœ¨æŸäº›ç±»æˆå‘˜ï¼Œè¯·ä½¿ç”¨ <span class="hljs-keyword">instanceof</span> ä½œä¸ºæ›¿ä»£æ–¹æ¡ˆã€‚
- ä¸å…è®¸ç´¢å¼•ç­¾åã€‚è¯·æ”¹ç”¨æ•°ç»„ï¼ˆarraysï¼‰ã€‚
- å…è®¸åœ¨å‡½æ•°è°ƒç”¨æ—¶çœç•¥æ³›å‹ç±»å‹å‚æ•°ï¼ˆå¦‚æœå¯ä»¥ä»ä¼ é€’ç»™å‡½æ•°çš„å‚æ•°ä¸­æ¨æ–­å‡ºå…·ä½“ç±»å‹ï¼‰ï¼Œå¦åˆ™ä¼šå‘ç”Ÿç¼–è¯‘æ—¶é”™è¯¯ã€‚ç‰¹åˆ«åœ°ï¼Œä»…åŸºäºå‡½æ•°è¿”å›ç±»å‹æ¨æ–­æ³›å‹ç±»å‹å‚æ•°æ˜¯è¢«ç¦æ­¢çš„ã€‚å½“æ¨æ–­å—é™æ—¶ï¼ˆç‰¹åˆ«æ˜¯ä»…åŸºäºå‡½æ•°è¿”å›ç±»å‹æ—¶ï¼‰ï¼Œè¯·æ˜¾å¼æŒ‡å®šè¿”å›ç±»å‹ã€‚
- å½“å‰ä¸æ”¯æŒäº¤å‰ç±»å‹ã€‚è¯·ä½¿ç”¨ç»§æ‰¿ï¼ˆinheritanceï¼‰ä½œä¸ºæ›¿ä»£æ–¹æ¡ˆã€‚
- ä¸æ”¯æŒ is è¿ç®—ç¬¦ï¼Œå¿…é¡»å°†å…¶æ›¿æ¢ä¸º <span class="hljs-keyword">instanceof</span> è¿ç®—ç¬¦ã€‚è¯·æ³¨æ„ï¼Œåœ¨ä½¿ç”¨å¯¹è±¡å­—æ®µä¹‹å‰ï¼Œå¿…é¡»ä½¿ç”¨ <span class="hljs-keyword">as</span> è¿ç®—ç¬¦å°†å…¶è½¬æ¢ä¸ºé€‚å½“çš„ç±»å‹ã€‚è¯·å°† is è¿ç®—ç¬¦æ›¿æ¢ä¸º <span class="hljs-keyword">instanceof</span>ã€‚åœ¨ä½¿ç”¨å¯¹è±¡å­—æ®µä¹‹å‰ï¼Œè¯·ä½¿ç”¨ <span class="hljs-keyword">as</span> è¿ç®—ç¬¦å°†å…¶è½¬æ¢ä¸ºé€‚å½“çš„ç±»å‹ã€‚
- ä¸æ”¯æŒ <span class="hljs-variable constant_">JSX</span> è¡¨è¾¾å¼ã€‚è¯·å‹¿ä½¿ç”¨ <span class="hljs-variable constant_">JSX</span>ï¼Œå› ä¸ºæ²¡æœ‰æä¾›æ›¿ä»£æ–¹æ¡ˆæ¥é‡å†™å®ƒã€‚
- ä¸æ”¯æŒæ˜ å°„ç±»å‹ã€‚è¯·ä½¿ç”¨å…¶ä»–è¯­è¨€æƒ¯ç”¨æ³•å’Œå¸¸è§„ç±»æ¥å®ç°ç›¸åŒçš„è¡Œä¸ºã€‚
- ä¸æ”¯æŒé‡æ–°åˆ†é…å¯¹è±¡æ–¹æ³•ã€‚åœ¨é™æ€ç±»å‹è¯­è¨€ä¸­ï¼Œå¯¹è±¡çš„å¸ƒå±€æ˜¯å›ºå®šçš„ï¼ŒåŒä¸€å¯¹è±¡çš„æ‰€æœ‰å®ä¾‹å¿…é¡»å…±äº«æ¯ä¸ªæ–¹æ³•çš„ç›¸åŒä»£ç ã€‚å¦‚æœéœ€è¦ä¸ºç‰¹å®šå¯¹è±¡æ·»åŠ ç‰¹å®šè¡Œä¸ºï¼Œå¯ä»¥åˆ›å»ºå•ç‹¬çš„åŒ…è£…å‡½æ•°æˆ–ä½¿ç”¨ç»§æ‰¿ã€‚
- æ‰€æœ‰ <span class="hljs-keyword">import</span> è¯­å¥éƒ½åº”è¯¥åœ¨ç¨‹åºä¸­çš„æ‰€æœ‰å…¶ä»–è¯­å¥ä¹‹å‰ã€‚è¯·å°†æ‰€æœ‰ <span class="hljs-keyword">import</span> è¯­å¥æ”¾åœ¨ç¨‹åºçš„å¼€å¤´ï¼Œåœ¨ä»»ä½•å…¶ä»–è¯­å¥ä¹‹å‰ã€‚
- ä¸æ”¯æŒæ¨¡å—åç§°ä¸­çš„é€šé…ç¬¦ï¼Œå› ä¸º <span class="hljs-keyword">import</span> åœ¨ <span class="hljs-title class_">ArkTS</span> ä¸­æ˜¯ç¼–è¯‘æ—¶ç‰¹æ€§ï¼Œè€Œä¸æ˜¯è¿è¡Œæ—¶ç‰¹æ€§ã€‚è¯·æ”¹ç”¨æ™®é€šçš„ <span class="hljs-keyword">export</span> è¯­æ³•ã€‚
- ä¸å…è®¸ç±»åˆå§‹åŒ–å­˜åœ¨å¤šä¸ªé™æ€ä»£ç å—ã€‚å°†æ‰€æœ‰é™æ€ä»£ç å—è¯­å¥åˆå¹¶åˆ°ä¸€ä¸ªé™æ€ä»£ç å—ä¸­ã€‚
- ä¸æ”¯æŒåµŒå¥—å‡½æ•°ã€‚è¯·æ”¹ç”¨ lambdasï¼ˆåŒ¿åå‡½æ•°ï¼‰ã€‚
- ä¸æ”¯æŒ <span class="hljs-keyword">new</span>.<span class="hljs-property">target</span>ï¼Œå› ä¸ºè¯­è¨€ä¸­æ²¡æœ‰è¿è¡Œæ—¶åŸå‹ç»§æ‰¿çš„æ¦‚å¿µã€‚æ­¤åŠŸèƒ½è¢«è®¤ä¸ºä¸é€‚ç”¨äºé™æ€ç±»å‹ã€‚æ­¤åŠŸèƒ½ä¸é€‚ç”¨äºé™æ€ç±»å‹å’Œè¿è¡Œæ—¶åŸå‹ç»§æ‰¿ï¼Œå› æ­¤ä¸å—æ”¯æŒã€‚æ²¡æœ‰æä¾›ç›´æ¥çš„æ›¿ä»£æ–¹æ¡ˆï¼Œå› ä¸ºå®ƒæ˜¯ä¸€ä¸ªæ ¹æœ¬æ€§çš„å·®å¼‚ã€‚
- å¦‚æœæ•°ç»„å­—é¢é‡ä¸­è‡³å°‘æœ‰ä¸€ä¸ªå…ƒç´ å…·æœ‰ä¸å¯æ¨æ–­çš„ç±»å‹ï¼ˆä¾‹å¦‚ï¼Œæ— ç±»å‹å¯¹è±¡å­—é¢é‡ï¼‰ï¼Œåˆ™ä¼šå‘ç”Ÿç¼–è¯‘æ—¶é”™è¯¯ã€‚è¯·ç¡®ä¿æ•°ç»„å­—é¢é‡ä¸­çš„æ‰€æœ‰å…ƒç´ éƒ½å…·æœ‰å¯æ¨æ–­çš„ç±»å‹ï¼Œæˆ–å°†å…ƒç´ æ˜¾å¼è½¬æ¢ä¸ºå·²å®šä¹‰çš„ç±»å‹ã€‚
- ä¸æ”¯æŒå°†å‘½åç©ºé—´ç”¨ä½œå¯¹è±¡ã€‚è¯·å°†ç±»æˆ–æ¨¡å—è§£é‡Šä¸ºå‘½åç©ºé—´çš„ç±»ä¼¼ç‰©ã€‚
- ä¸æ”¯æŒå‘½åç©ºé—´ä¸­çš„è¯­å¥ã€‚è¯·ä½¿ç”¨å‡½æ•°æ¥æ‰§è¡Œè¯­å¥ã€‚
- ä¸æ”¯æŒå°†å¯¹è±¡å­—é¢é‡ç›´æ¥ç”¨ä½œç±»å‹å£°æ˜ã€‚è¯·æ˜¾å¼å£°æ˜ç±»å’Œæ¥å£ã€‚
- åªå…è®¸ä¸€å…ƒè¿ç®—ç¬¦+ã€-å’Œ~ä½œç”¨äºæ•°å­—ç±»å‹ã€‚å¦‚æœè¿™äº›è¿ç®—ç¬¦åº”ç”¨äºéæ•°å­—ç±»å‹ï¼Œåˆ™ä¼šå‘ç”Ÿç¼–è¯‘æ—¶é”™è¯¯ã€‚ä¸ <span class="hljs-title class_">TypeScript</span> ä¸åŒï¼Œæ­¤ä¸Šä¸‹æ–‡ä¸­ä¸æ”¯æŒå­—ç¬¦ä¸²çš„éšå¼ç±»å‹è½¬æ¢ï¼Œå¿…é¡»æ˜¾å¼è¿›è¡Œç±»å‹è½¬æ¢ã€‚è¯·ç¡®ä¿ä¸€å…ƒè¿ç®—ç¬¦+ã€-å’Œ~ä»…åº”ç”¨äºæ•°å­—ç±»å‹ã€‚å¦‚æœ‰å¿…è¦ï¼Œè¯·æ‰§è¡Œæ˜¾å¼ç±»å‹è½¬æ¢ã€‚
- ä¸æ”¯æŒä»¥#ç¬¦å·å¼€å¤´çš„ç§æœ‰æ ‡è¯†ç¬¦ã€‚è¯·æ”¹ç”¨ <span class="hljs-keyword">private</span> å…³é”®å­—ã€‚
- ä¸æ”¯æŒåŠ¨æ€å­—æ®µå£°æ˜å’Œè®¿é—®ï¼Œä¹Ÿä¸æ”¯æŒé€šè¿‡ç´¢å¼•è®¿é—®å¯¹è±¡å­—æ®µï¼ˆobj[<span class="hljs-string">"field"</span>]ï¼‰ã€‚è¯·åœ¨ç±»ä¸­ç«‹å³å£°æ˜æ‰€æœ‰å¯¹è±¡å­—æ®µï¼Œå¹¶ä½¿ç”¨ obj.<span class="hljs-property">field</span> è¯­æ³•è®¿é—®å­—æ®µã€‚æ ‡å‡†åº“ä¸­çš„æ‰€æœ‰ç±»å‹åŒ–æ•°ç»„ï¼ˆå¦‚ <span class="hljs-title class_">Int32Array</span>ï¼‰æ˜¯ä¾‹å¤–ï¼Œå®ƒä»¬æ”¯æŒé€šè¿‡ container[index]è¯­æ³•è®¿é—®å…ƒç´ ã€‚
- ä¸æ”¯æŒåŸå‹èµ‹å€¼ï¼Œå› ä¸ºè¯­è¨€ä¸­æ²¡æœ‰è¿è¡Œæ—¶åŸå‹ç»§æ‰¿çš„æ¦‚å¿µã€‚æ­¤åŠŸèƒ½è¢«è®¤ä¸ºä¸é€‚ç”¨äºé™æ€ç±»å‹ã€‚è¯·æ”¹ç”¨ç±»å’Œ/æˆ–æ¥å£æ¥é™æ€åœ°å°†æ–¹æ³•ä¸æ•°æ®â€œç»„åˆâ€åœ¨ä¸€èµ·ã€‚
- ä¸æ”¯æŒé€šè¿‡ <span class="hljs-built_in">require</span> å¯¼å…¥ã€‚å®ƒä¹Ÿä¸æ”¯æŒ <span class="hljs-keyword">import</span> èµ‹å€¼ã€‚è¯·æ”¹ç”¨å¸¸è§„çš„ <span class="hljs-keyword">import</span> è¯­æ³•ã€‚
- å±•å¼€è¿ç®—ç¬¦å”¯ä¸€æ”¯æŒçš„åœºæ™¯æ˜¯å°†æ•°ç»„æˆ–æ´¾ç”Ÿè‡ªæ•°ç»„çš„ç±»å±•å¼€åˆ° rest å‚æ•°æˆ–æ•°ç»„å­—é¢é‡ä¸­ã€‚å¦åˆ™ï¼Œå¿…è¦æ—¶æ‰‹åŠ¨ä»æ•°ç»„å’Œå¯¹è±¡ä¸­â€œè§£åŒ…â€æ•°æ®ã€‚å±•å¼€è¿ç®—ç¬¦ä»…ç”¨äºå°†æ•°ç»„æˆ–æ´¾ç”Ÿè‡ªæ•°ç»„çš„ç±»å±•å¼€åˆ° rest å‚æ•°æˆ–æ•°ç»„å­—é¢é‡ä¸­ã€‚å¯¹äºå…¶ä»–æƒ…å†µï¼Œè¯·æ‰‹åŠ¨ä»æ•°ç»„å’Œå¯¹è±¡ä¸­è§£åŒ…æ•°æ®ã€‚
- ä¸æ”¯æŒåœ¨ç‹¬ç«‹å‡½æ•°å’Œé™æ€æ–¹æ³•ä¸­ä½¿ç”¨ <span class="hljs-variable language_">this</span>ã€‚<span class="hljs-variable language_">this</span> åªèƒ½åœ¨å®ä¾‹æ–¹æ³•ä¸­ä½¿ç”¨ã€‚
- å½“å‰ä¸æ”¯æŒç»“æ„åŒ–ç±»å‹ã€‚è¿™æ„å‘³ç€ç¼–è¯‘å™¨æ— æ³•æ¯”è¾ƒä¸¤ç§ç±»å‹çš„å…¬å…± <span class="hljs-variable constant_">API</span> å¹¶åˆ¤æ–­å®ƒä»¬æ˜¯å¦ç›¸åŒã€‚è¯·æ”¹ç”¨å…¶ä»–æœºåˆ¶ï¼ˆç»§æ‰¿ã€æ¥å£æˆ–ç±»å‹åˆ«åï¼‰ã€‚
- ä¸æ”¯æŒ <span class="hljs-title class_">Symbol</span>() <span class="hljs-variable constant_">API</span>ï¼Œå› ä¸ºå…¶æœ€å¸¸è§çš„ç”¨ä¾‹åœ¨é™æ€ç±»å‹ç¯å¢ƒä¸­æ²¡æœ‰æ„ä¹‰ï¼Œå¯¹è±¡çš„å¸ƒå±€åœ¨ç¼–è¯‘æ—¶å®šä¹‰ä¸”è¿è¡Œæ—¶ä¸å¯æ›´æ”¹ã€‚é™¤ <span class="hljs-title class_">Symbol</span>.<span class="hljs-property">iterator</span> å¤–ï¼Œé¿å…ä½¿ç”¨ <span class="hljs-title class_">Symbol</span>() <span class="hljs-variable constant_">API</span>ã€‚
- ç›®å‰ï¼Œç”¨æ ‡å‡† <span class="hljs-title class_">TypeScript</span> è¯­è¨€å®ç°çš„ codebase ä¸å¾—é€šè¿‡å¯¼å…¥ <span class="hljs-title class_">ArkTS</span> codebase æ¥ä¾èµ– <span class="hljs-title class_">ArkTS</span>ã€‚è¯·é¿å… <span class="hljs-title class_">TypeScript</span> ä»£ç åº“ä¾èµ– <span class="hljs-title class_">ArkTS</span> ä»£ç åº“ã€‚åå‘å¯¼å…¥ï¼ˆ<span class="hljs-title class_">ArkTS</span> å¯¼å…¥ <span class="hljs-variable constant_">TS</span>ï¼‰æ˜¯æ”¯æŒçš„ã€‚
- ä»…åœ¨è¡¨è¾¾å¼ä¸Šä¸‹æ–‡ä¸­æ”¯æŒ <span class="hljs-keyword">typeof</span> è¿ç®—ç¬¦ã€‚ä¸æ”¯æŒä½¿ç”¨ <span class="hljs-keyword">typeof</span> æŒ‡å®šç±»å‹æ ‡æ³¨ã€‚è¯·æ”¹ç”¨æ˜¾å¼ç±»å‹å£°æ˜è€Œä¸æ˜¯ <span class="hljs-keyword">typeof</span> è¿›è¡Œç±»å‹æ ‡æ³¨ã€‚
- åœ¨ <span class="hljs-title class_">TypeScript</span> ä¸­ï¼Œ<span class="hljs-keyword">catch</span> å­å¥å˜é‡ç±»å‹æ ‡æ³¨å¿…é¡»æ˜¯ <span class="hljs-built_in">any</span> æˆ– <span class="hljs-built_in">unknown</span>ï¼ˆå¦‚æœæŒ‡å®šï¼‰ã€‚ç”±äº <span class="hljs-title class_">ArkTS</span> ä¸æ”¯æŒè¿™äº›ç±»å‹ï¼Œå› æ­¤è¯·çœç•¥ç±»å‹æ ‡æ³¨ã€‚è¯·çœç•¥ <span class="hljs-keyword">catch</span> å­å¥ä¸­çš„ç±»å‹æ ‡æ³¨ã€‚
- ä¸æ”¯æŒä½¿ç”¨ <span class="hljs-variable language_">this</span> å…³é”®å­—è¿›è¡Œç±»å‹æ ‡æ³¨ã€‚è¯·æ”¹ç”¨æ˜¾å¼ç±»å‹ã€‚
- ä¸æ”¯æŒé€šç”¨æ¨¡å—å®šä¹‰ï¼ˆ<span class="hljs-variable constant_">UMD</span>ï¼‰ï¼Œå› ä¸ºå®ƒæ²¡æœ‰â€œè„šæœ¬â€çš„æ¦‚å¿µï¼ˆä¸â€œæ¨¡å—â€ç›¸å¯¹ï¼‰ã€‚æ­¤å¤–ï¼Œ<span class="hljs-keyword">import</span> åœ¨ <span class="hljs-title class_">ArkTS</span> ä¸­æ˜¯ç¼–è¯‘æ—¶ç‰¹æ€§ï¼Œè€Œä¸æ˜¯è¿è¡Œæ—¶ç‰¹æ€§ã€‚è¯·æ”¹ç”¨æ™®é€šçš„ <span class="hljs-keyword">export</span> å’Œ <span class="hljs-keyword">import</span> è¯­æ³•ã€‚
- æ”¯æŒå¯¹è±¡å­—é¢é‡ï¼Œå‰ææ˜¯ç¼–è¯‘å™¨å¯ä»¥æ¨æ–­å‡ºè¿™äº›å­—é¢é‡æ‰€å¯¹åº”çš„ç±»æˆ–æ¥å£ã€‚å¦åˆ™ï¼Œä¼šå‘ç”Ÿç¼–è¯‘æ—¶é”™è¯¯ã€‚åœ¨ä»¥ä¸‹ä¸Šä¸‹æ–‡ä¸­ï¼Œä¸æ”¯æŒä½¿ç”¨å­—é¢é‡åˆå§‹åŒ–ç±»å’Œæ¥å£ï¼šåˆå§‹åŒ– <span class="hljs-built_in">any</span>ã€<span class="hljs-title class_">Object</span> æˆ– <span class="hljs-built_in">object</span> ç±»å‹ï¼›åˆå§‹åŒ–å¸¦æœ‰æ–¹æ³•çš„ç±»æˆ–æ¥å£ï¼›åˆå§‹åŒ–å£°æ˜å¸¦å‚æ•°æ„é€ å‡½æ•°çš„ç±»ï¼›åˆå§‹åŒ–å¸¦æœ‰ <span class="hljs-keyword">readonly</span> å­—æ®µçš„ç±»ã€‚è¯·ç¡®ä¿å¯¹è±¡å­—é¢é‡å¯¹åº”äºæ˜¾å¼å£°æ˜çš„ç±»æˆ–æ¥å£ã€‚é¿å…å°†å®ƒä»¬ç”¨äº <span class="hljs-built_in">any</span>ã€<span class="hljs-title class_">Object</span>ã€<span class="hljs-built_in">object</span> ç±»å‹ï¼Œæˆ–ç”¨äºåˆå§‹åŒ–å¸¦æœ‰æ–¹æ³•ã€å‚æ•°åŒ–æ„é€ å‡½æ•°æˆ–åªè¯»å­—æ®µçš„ç±»ã€‚
- ç›®å‰ä¸æ”¯æŒ <span class="hljs-title class_">TypeScript</span> æ‰©å±•æ ‡å‡†åº“ä¸­çš„å®ç”¨ç±»å‹ã€‚<span class="hljs-title class_">Partial</span>ã€<span class="hljs-title class_">Required</span>ã€<span class="hljs-title class_">Readonly</span> å’Œ <span class="hljs-title class_">Record</span> æ˜¯ä¾‹å¤–ã€‚å¯¹äº <span class="hljs-title class_">Record</span>&lt;K, V&gt;ç±»å‹ï¼Œç´¢å¼•è¡¨è¾¾å¼ rec[index]çš„ç±»å‹ä¸º V | <span class="hljs-literal">undefined</span>ã€‚è¯·é¿å…ä½¿ç”¨ä¸æ”¯æŒçš„ <span class="hljs-title class_">TypeScript</span> å®ç”¨ç±»å‹ã€‚<span class="hljs-title class_">Partial</span>ã€<span class="hljs-title class_">Required</span>ã€<span class="hljs-title class_">Readonly</span> å’Œ <span class="hljs-title class_">Record</span> å¯ç”¨äºå…¶ç‰¹å®šç›®çš„ã€‚
- ä¸æ”¯æŒ <span class="hljs-keyword">var</span> å…³é”®å­—ã€‚è¯·æ”¹ç”¨ <span class="hljs-keyword">let</span> å…³é”®å­—ã€‚
- ä¸æ”¯æŒ <span class="hljs-keyword">with</span> è¯­å¥ã€‚è¯·ä½¿ç”¨å…¶ä»–è¯­è¨€æƒ¯ç”¨æ³•æ¥å®ç°ç›¸åŒçš„è¡Œä¸ºã€‚

## <span class="hljs-title class_">HarmonyOS</span> <span class="hljs-variable constant_">API</span> ä½¿ç”¨è§„èŒƒ(å¿…è¯»æ¡ç›®)

- ä¼˜å…ˆä½¿ç”¨ <span class="hljs-title class_">HarmonyOS</span> å®˜æ–¹æä¾›çš„ <span class="hljs-variable constant_">API</span>ã€<span class="hljs-variable constant_">UI</span> ç»„ä»¶ã€åŠ¨ç”»ã€ä»£ç æ¨¡æ¿
- <span class="hljs-variable constant_">API</span> è°ƒç”¨å‰è¯·ç¡®è®¤éµå¾ªå®˜æ–¹æ–‡æ¡£å…¥å‚ã€è¿”å›å€¼åŠå¯¹åº” <span class="hljs-variable constant_">API</span> <span class="hljs-title class_">Level</span> å’Œè®¾å¤‡æ”¯æŒæƒ…å†µ
- å¯¹äºä»»ä½•ä¸è‚¯å®šçš„è¯­æ³•å’Œ <span class="hljs-variable constant_">API</span> ä½¿ç”¨ï¼Œä¸è¦çŒœæµ‹æˆ–è‡ªè¡Œæ„é€  <span class="hljs-variable constant_">API</span>ï¼Œè¯·å°è¯•ä½¿ç”¨æœç´¢å·¥å…·è·å–åä¸ºå¼€å‘è€…å®˜æ–¹æ–‡æ¡£å¹¶è¿›è¡Œç¡®è®¤
- ä½¿ç”¨ <span class="hljs-variable constant_">API</span> å‰è¯·ç¡®è®¤æ˜¯å¦éœ€è¦åœ¨æ–‡ä»¶å¤´æ·»åŠ  <span class="hljs-keyword">import</span> è¯­å¥
- è°ƒç”¨ <span class="hljs-variable constant_">API</span> å‰è¯·ç¡®è®¤æ˜¯å¦éœ€è¦å¯¹åº”æƒé™ï¼Œåœ¨å¯¹åº”æ¨¡å—çš„<span class="hljs-string">`module.json5`</span>ä¸­ç¡®è®¤æƒé™é…ç½®
- å¦‚éœ€ä½¿ç”¨ä¾èµ–åº“ï¼Œè¯·ç¡®è®¤ä¾èµ–åº“çš„å­˜åœ¨å’ŒåŒ¹é…ç‰ˆæœ¬ï¼Œå¹¶åœ¨å¯¹åº”æ¨¡å—çš„<span class="hljs-string">`oh-package.json5`</span>ä¸­æ·»åŠ ä¾èµ–é…ç½®
- ä½¿ç”¨<span class="hljs-string">`@Component`</span>å’Œ<span class="hljs-string">`@ComponentV2`</span>æ—¶éœ€è¦åŒºåˆ†å…¼å®¹æ€§ï¼Œå°½é‡ä¸å·²æœ‰å·¥ç¨‹ä»£ç ä¿æŒä¸€è‡´
- <span class="hljs-variable constant_">UI</span> ç•Œé¢å±•ç¤ºå¼•ç”¨çš„å¸¸é‡éœ€è¦å®šä¹‰ resources èµ„æºå€¼ï¼Œå¹¶ä½¿ç”¨<span class="hljs-string">`$r`</span>å¼•ç”¨, ä¸€èˆ¬ä¸ç›´æ¥ä½¿ç”¨å­—é¢å€¼
- æ–°å¢å›½é™…åŒ–èµ„æºå­—ç¬¦ä¸²æ—¶åœ¨å¯¹åº”çš„å›½é™…åŒ–æ¯ç§è¯­è¨€ä¸‹æ·»åŠ å€¼ï¼Œé¿å…é—æ¼
- æ–°å¢é¢œè‰²ç­‰èµ„æºè¯·ç¡®è®¤æ˜¯å¦éœ€è¦æ·»åŠ é»‘è‰²ä¸»é¢˜æ”¯æŒ(å‚è€ƒå†å²å·¥ç¨‹)ï¼Œæ–°å·¥ç¨‹å»ºè®®é»˜è®¤æ”¯æŒé»‘è‰²åŠç™½è‰²ä¸»é¢˜


## <span class="hljs-title class_">ArkUI</span> åŠ¨ç”»è§„èŒƒ(<span class="hljs-string">`animateTo`</span>,<span class="hljs-string">`transform`</span>,<span class="hljs-string">`renderGroup`</span>,<span class="hljs-string">`opacity`</span>)

- ä¼˜å…ˆä½¿ç”¨ <span class="hljs-title class_">HarmonyOS</span> æä¾›çš„åŸç”ŸåŠ¨ç”» <span class="hljs-variable constant_">API</span> å’Œé«˜çº§æ¨¡æ¿
- ä¼˜å…ˆä½¿ç”¨ <span class="hljs-title class_">HarmonyOS</span> çš„å£°æ˜å¼ <span class="hljs-variable constant_">UI</span> å’Œ <span class="hljs-string">`@State`</span> é©±åŠ¨åŠ¨ç”»ï¼Œé€šè¿‡æ”¹å˜çŠ¶æ€å˜é‡è§¦å‘åŠ¨ç”»
- å¯¹äºåŒ…å«å¤æ‚å­ç»„ä»¶çš„åŠ¨ç”»ï¼Œå°†å…¶è®¾ç½®ä¸º <span class="hljs-string">`renderGroup(true)`</span>ï¼Œå‡å°‘æ¸²æŸ“æ‰¹æ¬¡
- ä¸å¯ä»¥åœ¨åŠ¨ç”»è¿‡ç¨‹ä¸­é¢‘ç¹æ”¹å˜ç»„ä»¶çš„ <span class="hljs-string">`width`</span>ã€<span class="hljs-string">`height`</span>ã€<span class="hljs-string">`padding`</span>ã€<span class="hljs-string">`margin`</span> ç­‰å¸ƒå±€å±æ€§ï¼Œä¸¥é‡å½±å“æ€§èƒ½
</code></pre>
<h2 data-id="heading-7">æ™ºèƒ½ä½“æ¨¡æ¿ <a href="#%E6%99%BA%E8%83%BD%E4%BD%93%E6%A8%A1%E6%9D%BF" title="#%E6%99%BA%E8%83%BD%E4%BD%93%E6%A8%A1%E6%9D%BF">â€‹</a></h2>
<p>markdown</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># è§’è‰²ï¼šHarmonyOS åº”ç”¨å¼€å‘ä¸“å®¶</span>

<span class="hljs-section">## è§’è‰²æ¦‚è¿°</span>

ä½ æ˜¯ä¸€ä½ç²¾é€š HarmonyOS åº”ç”¨å¼€å‘çš„èµ„æ·±ä¸“å®¶ï¼Œä¸“æ³¨äºä½¿ç”¨ ArkTS å’Œ ArkUI æ„å»ºé«˜è´¨é‡çš„é¸¿è’™åŸç”Ÿåº”ç”¨ã€‚ä½ å¯¹ HarmonyOS çš„ç³»ç»Ÿç»„ä»¶ã€API ä»¥åŠåº•å±‚æœºåˆ¶æœ‰æ·±å…¥çš„ç†è§£ï¼Œå¹¶å§‹ç»ˆè‡´åŠ›äºåº”ç”¨è¡Œä¸šæœ€ä½³å®è·µã€‚

<span class="hljs-section">## æ ¸å¿ƒæŠ€æœ¯æ ˆä¸çº¦æŸï¼ˆä¸¥æ ¼æ‰§è¡Œï¼‰</span>

åœ¨æ‰€æœ‰ä»£ç ç”Ÿæˆã€é—®é¢˜è§£ç­”å’ŒæŠ€æœ¯å»ºè®®ä¸­ï¼Œå¿…é¡»ä¸¥æ ¼éµå®ˆä»¥ä¸‹æŠ€æœ¯é€‰å‹ï¼Œ<span class="hljs-strong">**ç»ä¸å¦¥å**</span>ï¼š

<span class="hljs-bullet">1.</span>  <span class="hljs-strong">**çŠ¶æ€ç®¡ç†ï¼šä»…é™ V2 (ArkUI State Management V2)**</span>

<span class="hljs-bullet">    -</span> <span class="hljs-strong">**å¿…é¡»ä½¿ç”¨**</span>ï¼š<span class="hljs-code">`@ComponentV2`</span>ã€<span class="hljs-code">`@Local`</span>ã€<span class="hljs-code">`@Param`</span>ã€<span class="hljs-code">`@Event`</span>ã€<span class="hljs-code">`@Provider`</span>ã€<span class="hljs-code">`@Consumer`</span>ã€<span class="hljs-code">`@Monitor`</span>ã€<span class="hljs-code">`@Computed`</span>ã€‚
<span class="hljs-bullet">    -</span> <span class="hljs-strong">**ä¸¥ç¦ä½¿ç”¨**</span>ï¼šV1 ç‰ˆæœ¬çš„è£…é¥°å™¨ï¼ˆå¦‚ <span class="hljs-code">`@State`</span>ã€<span class="hljs-code">`@Prop`</span>ã€<span class="hljs-code">`@Link`</span>ã€<span class="hljs-code">`@ObjectLink`</span>ã€<span class="hljs-code">`@Observed`</span>ã€<span class="hljs-code">`@Provide`</span>ã€<span class="hljs-code">`@Consume`</span>ã€<span class="hljs-code">`@Watch`</span> ç­‰ï¼‰ã€‚

<span class="hljs-bullet">2.</span>  <span class="hljs-strong">**è·¯ç”±æ–¹æ¡ˆï¼šä»…é™ Navigation**</span>
<span class="hljs-bullet">    -</span> <span class="hljs-strong">**å¿…é¡»ä½¿ç”¨**</span>ï¼šåŸºäº <span class="hljs-code">`Navigation`</span> ç»„ä»¶å’Œ <span class="hljs-code">`NavPathStack`</span> çš„è·¯ç”±ç®¡ç†æ–¹æ¡ˆï¼›ä½¿ç”¨ <span class="hljs-code">`NavDestination`</span> ä½œä¸ºå­é¡µé¢çš„æ ¹å®¹å™¨ã€‚
<span class="hljs-bullet">    -</span> <span class="hljs-strong">**ä¸¥ç¦ä½¿ç”¨**</span>ï¼šä¼ ç»Ÿçš„ <span class="hljs-code">`router`</span> æ¨¡å—ï¼ˆ<span class="hljs-code">`@ohos.router`</span>ï¼‰è¿›è¡Œé¡µé¢è·³è½¬ã€‚

<span class="hljs-section">## ä¸“ä¸šèƒ½åŠ›</span>

<span class="hljs-bullet">-</span> <span class="hljs-strong">**ç²¾é€š ArkTS &amp; ArkUI**</span>ï¼šèƒ½å¤Ÿç¼–å†™ä¼˜é›…ã€é«˜æ•ˆã€ç±»å‹å®‰å…¨çš„å£°æ˜å¼ UI ä»£ç ï¼Œæ·±åˆ»ç†è§£ V2 çŠ¶æ€ç®¡ç†çš„è§‚æµ‹æœºåˆ¶å’Œ UI æ›´æ–°é€»è¾‘ã€‚
<span class="hljs-bullet">-</span> <span class="hljs-strong">**å…¨æ ˆç»„ä»¶ä¸ API æŒæ¡**</span>ï¼šç†Ÿç»ƒè¿ç”¨å„ç±» UI ç»„ä»¶ï¼ˆList, Grid, Swiper, Tabs ç­‰ï¼‰åŠç³»ç»Ÿ APIï¼ˆç½‘ç»œã€åª’ä½“ã€æ–‡ä»¶ã€é¦–é€‰é¡¹ç­‰ï¼‰ï¼Œèƒ½å¤Ÿå¿«é€Ÿå®ç°å¤æ‚çš„ä¸šåŠ¡éœ€æ±‚ã€‚
<span class="hljs-bullet">-</span> <span class="hljs-strong">**æœ€ä½³å®è·µè½åœ°**</span>ï¼š
<span class="hljs-bullet">  -</span> <span class="hljs-strong">**æ¶æ„è®¾è®¡**</span>ï¼šé‡‡ç”¨æ¨¡å—åŒ–ã€åˆ†å±‚æ¶æ„ï¼Œç¡®ä¿ä»£ç çš„é«˜å†…èšä½è€¦åˆã€‚
<span class="hljs-bullet">  -</span> <span class="hljs-strong">**æ€§èƒ½ä¼˜åŒ–**</span>ï¼šæ“…é•¿ä½¿ç”¨ <span class="hljs-code">`LazyForEach`</span>ã€ç»„ä»¶å¤ç”¨ã€è€—æ—¶ä»»åŠ¡å¼‚æ­¥å¤„ç†ç­‰æ‰‹æ®µä¼˜åŒ–åº”ç”¨æ€§èƒ½ã€‚
<span class="hljs-bullet">  -</span> <span class="hljs-strong">**ä»£ç è§„èŒƒ**</span>ï¼šä»£ç é£æ ¼ç»Ÿä¸€ï¼Œé€»è¾‘ä¸¥å¯†ï¼Œæ³¨é‡Šæ¸…æ™°ï¼Œç¬¦åˆ HarmonyOS å®˜æ–¹å¼€å‘è§„èŒƒã€‚

<span class="hljs-section">## è¡Œä¸ºå‡†åˆ™</span>

<span class="hljs-bullet">-</span> <span class="hljs-strong">**ä¸»åŠ¨é‡æ„**</span>ï¼šå¦‚æœç”¨æˆ·æä¾›çš„ä»£ç åŒ…å« V1 çŠ¶æ€ç®¡ç†æˆ– <span class="hljs-code">`router`</span> è·¯ç”±ï¼Œè¯·ä¸»åŠ¨æŒ‡å‡ºå¹¶å°†å…¶é‡æ„ä¸º V2 + Navigation çš„ç°ä»£åŒ–å®ç°ã€‚
<span class="hljs-bullet">-</span> <span class="hljs-strong">**æ–¹æ¡ˆè§£é‡Š**</span>ï¼šåœ¨æä¾›ä»£ç è§£å†³æ–¹æ¡ˆæ—¶ï¼Œç®€è¦è¯´æ˜ä¸ºä»€ä¹ˆè¿™æ ·åšæ˜¯â€œæœ€ä½³å®è·µâ€ï¼ˆä¾‹å¦‚ï¼šè§£é‡Š <span class="hljs-code">`@ComponentV2`</span> ç›¸æ¯” V1 çš„æ€§èƒ½ä¼˜åŠ¿ï¼‰ã€‚
<span class="hljs-bullet">-</span> <span class="hljs-strong">**ä¸¥è°¨æ€§**</span>ï¼šç¡®ä¿æä¾›çš„ä»£ç ç‰‡æ®µæ˜¯å®Œæ•´çš„ã€å¯è¿è¡Œçš„ï¼Œå¹¶ä¸”å¤„ç†äº†å¸¸è§çš„è¾¹ç•Œæƒ…å†µï¼ˆå¦‚ç©ºæ•°æ®ã€åŠ è½½çŠ¶æ€ã€é”™è¯¯å¤„ç†ï¼‰ã€‚
</code></pre>
<h2 data-id="heading-8">å‚è€ƒé“¾æ¥ <a href="#%E5%8F%82%E8%80%83%E9%93%BE%E6%8E%A5" title="#%E5%8F%82%E8%80%83%E9%93%BE%E6%8E%A5">â€‹</a></h2>
<ol>
<li>æ–°å¢å’Œå¢å¼ºç‰¹æ€§ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.huawei.com%2Fconsumer%2Fcn%2Fdoc%2Fharmonyos-releases%2Fdeveco-studio-new-features-602" target="_blank" title="https://developer.huawei.com/consumer/cn/doc/harmonyos-releases/deveco-studio-new-features-602" ref="nofollow noopener noreferrer">developer.huawei.com/consumer/cnâ€¦</a></li>
<li>AIæ™ºèƒ½ç¼–ç¨‹è¾…åŠ©ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.huawei.com%2Fconsumer%2Fcn%2Fdoc%2Fharmonyos-guides%2Fide-codegenie-releasenote" target="_blank" title="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-codegenie-releasenote" ref="nofollow noopener noreferrer">developer.huawei.com/consumer/cnâ€¦</a></li>
</ol>
<h2 data-id="heading-9">å…³äºæˆ‘ <a href="#%E5%85%B3%E4%BA%8E%E6%88%91" title="#%E5%85%B3%E4%BA%8E%E6%88%91"/><a href="#%E5%85%B3%E4%BA%8E%E6%88%91" title="#%E5%85%B3%E4%BA%8E%E6%88%91">â€‹</a></h2></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ·±å…¥è§£æRebaseTokenï¼šåŸºäºAmpleforthæœºåˆ¶çš„é€šç¼©å‹ä»£å¸è®¾è®¡ä¸å®ç°]]></title>    <link>https://juejin.cn/post/7602834985901260850</link>    <guid>https://juejin.cn/post/7602834985901260850</guid>    <pubDate>2026-02-04T10:56:08.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602834985901260850" data-draft-id="7602634187284299786" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content=" æ·±å…¥è§£æRebaseTokenï¼šåŸºäºAmpleforthæœºåˆ¶çš„é€šç¼©å‹ä»£å¸è®¾è®¡ä¸å®ç°"/> <meta itemprop="keywords" content="åç«¯,ç®—æ³•"/> <meta itemprop="datePublished" content="2026-02-04T10:56:08.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="cipher"/> <meta itemprop="url" content="https://juejin.cn/user/2242659448524872"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
             æ·±å…¥è§£æRebaseTokenï¼šåŸºäºAmpleforthæœºåˆ¶çš„é€šç¼©å‹ä»£å¸è®¾è®¡ä¸å®ç°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2242659448524872/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    cipher
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T10:56:08.000Z" title="Wed Feb 04 2026 10:56:08 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»13åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€å‰è¨€</h2>
<p>åœ¨åŒºå—é“¾æŠ€æœ¯è¿…çŒ›å‘å±•çš„ä»Šå¤©ï¼Œä»£å¸ç»æµå­¦ä½œä¸ºDeFiç”Ÿæ€çš„æ ¸å¿ƒç»„æˆéƒ¨åˆ†ï¼Œæ­£åœ¨ä¸æ–­æ¼”è¿›ä¸åˆ›æ–°ã€‚ä¼ ç»Ÿä»£å¸å¾€å¾€é¢ä¸´ä¾›åº”é‡å›ºå®šå¸¦æ¥çš„æµåŠ¨æ€§é—®é¢˜ï¼Œæˆ–è€…é€šèƒ€æ¨¡å‹å¸¦æ¥çš„ä»·å€¼ç¨€é‡Šé£é™©ã€‚ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜ï¼Œä¸€ç±»åˆ›æ–°çš„ä»£å¸æœºåˆ¶â€”â€”Rebase Tokenåº”è¿è€Œç”Ÿã€‚é€šç¼©å‹Rebase Tokenä½œä¸ºå…¶ä¸­çš„ç‹¬ç‰¹åˆ†æ”¯ï¼Œé€šè¿‡ç‹¬ç‰¹çš„æ•°å­¦æœºåˆ¶å®ç°äº†æŒ‰æ¯”ä¾‹å‰Šå‡ä¾›åº”é‡çš„æ–°å‹ä»£å¸æ¨¡å¼ã€‚</p>
<p>æœ¬æ–‡å°†æ·±å…¥åˆ†æRebaseTokenåˆçº¦çš„è®¾è®¡åŸç†å’Œå®ç°ç»†èŠ‚ï¼Œæ¢è®¨åŸºäºAmpleforthå˜ç§æœºåˆ¶çš„é€šç¼©å‹ä»£å¸ç³»ç»Ÿã€‚é€šè¿‡é€è¡Œè§£æåˆçº¦ä»£ç ã€è¯¦è§£æ•°å­¦æ¨¡å‹æ ¸å¿ƒä»¥åŠå®é™…æ¡ˆä¾‹æ¼”ç¤ºï¼Œå¸®åŠ©è¯»è€…å…¨é¢ç†è§£é€šç¼©å‹rebaseæœºåˆ¶çš„å®ç°åŸç†ã€æŠ€æœ¯æŒ‘æˆ˜ä»¥åŠå®é™…åº”ç”¨åœºæ™¯ã€‚</p>
<h2 data-id="heading-1">äºŒã€Rebase Token åŸºç¡€æ¦‚å¿µ</h2>
<h3 data-id="heading-2">2.1 Rebaseæœºåˆ¶çš„æ ¸å¿ƒæ€æƒ³</h3>
<p>Rebase Tokenï¼ˆæœ‰æ—¶ç§°ä¸º'rebasing ä»£å¸'ï¼‰æ˜¯ä¸€ç±»ç‰¹æ®Šçš„ERC-20ä»£å¸ï¼Œå…¶æ€»ä¾›åº”é‡å’ŒTokenæŒæœ‰è€…çš„ä½™é¢å¯ä»¥åœ¨æ²¡æœ‰å®é™…çš„è½¬ç§»ã€é“¸é€ æˆ–é”€æ¯çš„æƒ…å†µä¸‹è¿›è¡Œæ›´æ”¹ã€‚è¿™ç§æœºåˆ¶å…è®¸ä»£å¸ç³»ç»Ÿæ ¹æ®é¢„è®¾è§„åˆ™åŠ¨æ€è°ƒæ•´æ‰€æœ‰æŒæœ‰è€…çš„ä½™é¢ï¼Œä¿æŒå…¶åœ¨æ€»ä¾›åº”é‡ä¸­çš„æ¯”ä¾‹ä¸å˜ã€‚</p>
<p>ä»¥Ampleforthï¼ˆAMPLï¼‰ä¸ºä»£è¡¨çš„ç»å…¸rebaseæœºåˆ¶ï¼Œæ—¨åœ¨é€šè¿‡å‘ä¸Šrebaseé€ æˆé€šèƒ€ã€å‘ä¸‹rebaseå¢åŠ ç¨€ç¼ºæ€§æ¥å®ç°ä»·æ ¼ç¨³å®šã€‚è€Œæˆ‘ä»¬å³å°†ä»‹ç»çš„é€šç¼©å‹rebaseæœºåˆ¶åˆ™æœ‰æ‰€ä¸åŒâ€”â€”å®ƒæ¯å¹´ä¸»åŠ¨å‡å°‘æ€»ä¾›åº”é‡1%ï¼Œå®ç°ä¸»åŠ¨é€šç¼©ã€‚</p>
<h3 data-id="heading-3">2.2 Shareç³»ç»Ÿä¸åŒå±‚è®°è´¦æœºåˆ¶</h3>
<p>Rebase Tokené‡‡ç”¨äº†ä¸€ç§å·§å¦™çš„"ä»½é¢ï¼ˆshareï¼‰ç³»ç»Ÿ"æ¥è¿½è¸ªæ‰€æœ‰æƒæ¯”ä¾‹ã€‚åœ¨æ•°å­¦æ¨¡å‹ä¸­ï¼Œç”¨æˆ·ä½™é¢çš„è®¡ç®—å…¬å¼å¯ä»¥è¡¨ç¤ºä¸ºï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">balanceOf</span>(account) = _shareBalance<span class="hljs-selector-attr">[account]</span> * <span class="hljs-selector-tag">address</span>(this)<span class="hljs-selector-class">.balance</span> / _totalShares
</code></pre>
<p>è¿™ç§è®¾è®¡å…è®¸ç³»ç»Ÿåœ¨ä¸å®é™…è½¬ç§»ä»£å¸çš„æƒ…å†µä¸‹ï¼Œé€šè¿‡è°ƒæ•´ç¼©æ”¾ç³»æ•°æ¥æ”¹å˜æ‰€æœ‰ç”¨æˆ·çš„ä½™é¢ã€‚Lidoçš„stETH Tokenæ˜¯shareç³»ç»Ÿçš„ä¸€ä¸ªè®¾è®¡å‚è€ƒï¼Œè€ŒAmpleforthå’ŒOlympusDaoçš„sOHM Tokenåˆ™æ˜¯rebasingæœºåˆ¶çš„å…¸å‹æ¡ˆä¾‹ã€‚</p>
<h2 data-id="heading-4">ä¸‰ã€RebaseTokenåˆçº¦æ ¸å¿ƒæœºåˆ¶è§£æ</h2>
<h3 data-id="heading-5">3.1 åŒå±‚è´¦æˆ·ä½“ç³»æ¦‚è¿°</h3>
<p>RebaseTokenåˆçº¦é‡‡ç”¨äº†ç»å…¸çš„Gonsä¸FragmentsåŒå±‚è®°è´¦ç³»ç»Ÿï¼Œå…¶æ ¸å¿ƒæ€è·¯åœ¨äºå°†ç”¨æˆ·çš„"æƒç›Š"å’Œ"è¡¨ç°"åˆ†ç¦»ã€‚è¿™ç§è®¾è®¡çš„æ ¸å¿ƒåœ¨äºï¼šç”¨æˆ·çœ‹åˆ°çš„ä½™é¢ï¼ˆFragmentsï¼‰å¯ä»¥åŠ¨æ€å˜åŒ–ï¼Œä½†å…¶åœ¨æ€»ä¾›åº”é‡ä¸­çš„æƒç›Šå æ¯”ï¼ˆGonsï¼‰ä¿æŒæ’å®šã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥æŠŠRebaseTokenæƒ³è±¡ä¸ºä¸€ä¸ªæ€»ä»·å€¼ä¸å˜ä½†æ€»ä»½æ•°å‡å°‘çš„è›‹ç³•ï¼š</p>
<ul>
<li><code>_totalSupply</code>ï¼ˆæ€»ä¾›åº”é‡ï¼‰ï¼šè›‹ç³•çš„æ€»ä»½æ•°ï¼Œèµ·å§‹1äº¿æšï¼Œæ¯å¹´å‡å°‘1%</li>
<li>æƒç›Šå æ¯”ï¼šç”±<code>_gonBalances</code>è¿™ä¸ªåº•å±‚"æƒç›Šå•ä½"è®°å½•ï¼Œå§‹ç»ˆä¿æŒä¸å˜</li>
<li>ä½™é¢ï¼ˆbalanceOfï¼‰ï¼šç”¨æˆ·å½“å‰åˆ†åˆ°çš„è›‹ç³•ä»½æ•°ï¼Œæ¯æ¬¡"Rebase"åä»½æ•°å˜å°‘ï¼Œä½†<strong>æŒæœ‰è€…çš„ä»½é¢æ¯”ä¾‹ä¸å˜</strong></li>
<li><code>_gonsPerFragment</code>ï¼šè¡¡é‡ä¸€ä»½è›‹ç³•çš„"æœ€å°å•ä½"ï¼Œæ€»ä¾›åº”é‡å‡å°‘æ—¶ï¼Œæ¯ä»½ä»£è¡¨çš„Gonså°±å˜å¤š</li>
</ul>
<p>å…³é”®ç‚¹åœ¨äºï¼šå½“Rebaseé€šç¼©æœºåˆ¶è§¦å‘æ—¶ï¼Œç”¨æˆ·çœ‹åˆ°çš„ä½™é¢ï¼ˆè›‹ç³•ä»½æ•°ï¼‰ä¼šå‡å°‘ï¼Œä½†å…¶æŒæœ‰çš„**åº•å±‚æƒç›Šï¼ˆGonsï¼‰**æ•°é‡ä¸å˜ï¼Œå› æ­¤å æ€»ä»·å€¼çš„æ¯”ä¾‹æ’å®šã€‚</p>
<p>ä»¥ä¸‹å›¾è¡¨å±•ç¤ºäº†Gonsä¸FragmentsåŒå±‚è®°è´¦ç³»ç»Ÿçš„ç»“æ„ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TB
    subgraph "åº•å±‚æƒç›Šå±‚ (Gons)"
        A["Gon A: æŒæœ‰X Gons"]
        B["Gon B: æŒæœ‰Y Gons"]
        C["Gon C: æŒæœ‰Z Gons"]
    end

    subgraph "ç”¨æˆ·å¯è§å±‚ (Fragments)"
        D["Fragment A: X/_gonsPerFragment"]
        E["Fragment B: Y/_gonsPerFragment"]
        F["Fragment C: Z/_gonsPerFragment"]
    end

    subgraph "åŠ¨æ€ç¼©æ”¾ç³»æ•°"
        G["_gonsPerFragment: åŠ¨æ€è°ƒæ•´"]
    end

    A --&gt; D
    B --&gt; E
    C --&gt; F
    G -.-&gt; D
    G -.-&gt; E
    G -.-&gt; F

    style A fill:#d3f9d8
    style B fill:#d3f9d8
    style C fill:#d3f9d8
    style D fill:#ffe3e3
    style E fill:#ffe3e3
    style F fill:#ffe3e3
    style G fill:#e5dbff
</code></pre>
<h3 data-id="heading-6">3.2 æ ¸å¿ƒå˜é‡è®¾è®¡</h3>
<p>è®©æˆ‘ä»¬å…ˆçœ‹çœ‹åˆçº¦ä¸­æœ€é‡è¦çš„å‡ ä¸ªå˜é‡åŠå…¶ä½œç”¨ï¼š</p>
<pre><code class="hljs language-solidity" lang="solidity">// æ ¸å¿ƒæ˜ å°„
mapping(address =&gt; uint256) private _gonBalances;                    // æ¯ä¸ªåœ°å€çš„åº•å±‚æƒç›Šå•ä½
mapping(address =&gt; mapping(address =&gt; uint256)) private _allowances; // æ ‡å‡†ERC-20æˆæƒ

// æ€»é‡å’Œç¼©æ”¾ç³»æ•°
uint256 private _totalSupply;                                        // ç”¨æˆ·å¯è§çš„æ€»ä¾›åº”é‡
uint256 private _gonsPerFragment;                                    // åŠ¨æ€ç¼©æ”¾ç³»æ•°

// rebaseç›¸å…³å‚æ•°
uint256 public lastRebaseTime;                                       // ä¸Šæ¬¡rebaseæ—¶é—´
uint256 public rebaseCount;                                          // rebaseæ¬¡æ•°è®¡æ•°
address public owner;                                                // åˆçº¦æ‰€æœ‰è€…

// é€šç¼©å‚æ•°
uint256 private constant DEFLATION_RATE = 99;                       // é€šç¼©ç‡ï¼š99/100 = æ¯å¹´å‡å°‘1%
uint256 private constant RATE_DENOMINATOR = 100;                    // åˆ†æ¯ï¼šç”¨äºè®¡ç®—ç™¾åˆ†æ¯”
uint256 private constant REBASE_INTERVAL = 365 days;                // rebaseé—´éš”ï¼šä¸€å¹´
</code></pre>
<ul>
<li><strong><code>_gonBalances</code></strong>ï¼šè®°å½•æ¯ä¸ªåœ°å€åº•å±‚çš„ã€æ°¸ä¸æ”¹å˜çš„"æƒç›Šå•ä½"ï¼ˆGonsï¼‰æ•°é‡ï¼Œè¿™æ˜¯å®ç°æ¯”ä¾‹ä¸å˜çš„å…³é”®ã€‚</li>
<li><strong><code>_gonsPerFragment</code></strong>ï¼šä¸€ä¸ª<strong>åŠ¨æ€ç¼©æ”¾ç³»æ•°</strong>ï¼Œå®ƒå®šä¹‰äº†æ¯1ä¸ª"ç”¨æˆ·å¯è§ä»£å¸"å¯¹åº”å¤šå°‘åº•å±‚Gonsã€‚<strong>å½“æ€»ä¾›åº”é‡å‡å°‘æ—¶ï¼Œè¿™ä¸ªç³»æ•°ä¼šå¢å¤§</strong>ã€‚</li>
<li><strong><code>_totalSupply</code></strong>ï¼šç”¨æˆ·å¯è§çš„ä»£å¸æ€»ä¾›åº”é‡ï¼Œæ¯å¹´é€šç¼©1%ã€‚</li>
</ul>
<h3 data-id="heading-7">3.3 TOTAL_GONSæ•°å­¦åŸç†è¯¦è§£</h3>
<p>åœ¨RebaseTokenåˆçº¦ä¸­æœ€ä¸ºå…³é”®çš„ä¸€ä¸ªè®¾è®¡æ˜¯TOTAL_GONSçš„å®šä¹‰ï¼š</p>
<pre><code class="hljs language-solidity" lang="solidity">uint256 private constant MAX_UINT256 = ~uint256(0);                 // uint256æœ€å¤§å€¼ï¼š2^256 - 1
uint256 private constant INITIAL_FRAGMENTS_SUPPLY = 100_000_000 * 10**18; // åˆå§‹ä¾›åº”é‡
uint256 private constant TOTAL_GONS = MAX_UINT256 - (MAX_UINT256 % INITIAL_FRAGMENTS_SUPPLY); // æ€»gonæ•°
</code></pre>
<p>è¿™è¡Œä»£ç æ˜¯Ampleforthé£æ ¼rebaseä»£å¸å®ç°ä¸­æœ€ç»å…¸ä¸”æœ€é‡è¦çš„å¸¸é‡åˆå§‹åŒ–ä¹‹ä¸€ã€‚å…¶æ ¸å¿ƒç›®çš„æ˜¯ï¼š</p>
<p><strong>åˆ›å»ºä¸€ä¸ªæ¥è¿‘ 2^256 çš„å·¨å¤§æ•´æ•° TOTAL_GONSï¼Œä½œä¸ºæ‰€æœ‰"gon"ï¼ˆå†…éƒ¨è®°è´¦å•ä½ï¼‰çš„æ€»é‡</strong>ï¼ŒåŒæ—¶ä¿è¯ TOTAL_GONS èƒ½è¢« INITIAL_FRAGMENTS_SUPPLY æ•´é™¤ï¼Œä»è€Œè®©åˆå§‹çš„ <code>_gonsPerFragment</code> æ˜¯ä¸€ä¸ªæ•´æ•°ï¼Œé¿å…ç²¾åº¦ä¸¢å¤±ã€‚</p>
<p>è®©æˆ‘ä»¬é€éƒ¨åˆ†æ‹†è§£è¿™ä¸ªå…¬å¼ï¼š</p>
<ol>
<li>
<p><code>MAX_UINT256 = 2Â²âµâ¶ - 1</code>ï¼šè¿™æ˜¯Solidityä¸­uint256çš„æœ€å¤§å€¼ï¼Œçº¦1.157920892373162 Ã— 10â·â·ï¼ˆä¸€ä¸ªè¶…çº§å¤§çš„æ•°ï¼‰</p>
</li>
<li>
<p><code>MAX_UINT256 % INITIAL_FRAGMENTS_SUPPLY</code>ï¼š</p>
<ul>
<li>INITIAL_FRAGMENTS_SUPPLY = 100_000_000 Ã— 10Â¹â¸ = 10Â²â¶</li>
<li>è¿™è¡Œè®¡ç®—æŠŠMAX_UINT256é™¤ä»¥10Â²â¶åçš„<strong>ä½™æ•°</strong>ï¼Œå³MAX_UINT256èƒ½è¢«10Â²â¶æ•´é™¤å¤šå°‘æ¬¡åè¿˜å‰©ä¸‹çš„éƒ¨åˆ†</li>
</ul>
</li>
<li>
<p><code>MAX_UINT256 - (MAX_UINT256 % INITIAL_FRAGMENTS_SUPPLY)</code>ï¼š</p>
<ul>
<li>è¿™ä¸€æ­¥ç›´æ¥æŠŠä½™æ•°"æŠ¹æ‰"ï¼Œå¾—åˆ°ä¸€ä¸ª<strong>æœ€æ¥è¿‘MAX_UINT256ä¸”èƒ½è¢«INITIAL_FRAGMENTS_SUPPLYæ•´é™¤</strong>çš„æ•°ã€‚</li>
<li>æ•°å­¦ä¸Šç­‰ä»·äºï¼š<code>TOTAL_GONS = floor(MAX_UINT256 / INITIAL_FRAGMENTS_SUPPLY) Ã— INITIAL_FRAGMENTS_SUPPLY</code></li>
</ul>
</li>
</ol>
<p>è¿™æ ·è®¾è®¡çš„å·§å¦™ä¹‹å¤„åœ¨äºï¼Œå®ƒç¡®ä¿äº†åˆå§‹çš„<code>_gonsPerFragment</code>æ˜¯ä¸€ä¸ªç²¾ç¡®çš„æ•´æ•°ï¼Œé¿å…åç»­ä¹˜é™¤è¿ç®—ä¸­çš„ç²¾åº¦è¯¯å·®ç´¯ç§¯ã€‚å¦‚æœç›´æ¥ä½¿ç”¨MAX_UINT256ï¼Œåç»­è®¡ç®—ä¼šäº§ç”Ÿå°æ•°è¯¯å·®ï¼Œé•¿æœŸrebaseåä¼šç´¯ç§¯åå·®ã€‚</p>
<h2 data-id="heading-8">å››ã€RebaseTokenåˆçº¦å®ç°ä¸åˆ†æ</h2>
<h3 data-id="heading-9">4.1 å…¨åˆçº¦ä»£ç </h3>
<p>ä»¥ä¸‹æ˜¯RebaseTokenåˆçº¦çš„å®Œæ•´ä»£ç ï¼š</p>
<pre><code class="hljs language-solidity" lang="solidity">// SPDX-License-Identifier: MIT
pragma solidity ^0.8.19;

/**
 * @title RebaseToken
 * @dev é€šç¼©å‹ Rebase Token å®ç°
 * èµ·å§‹å‘è¡Œé‡ä¸º 1 äº¿ï¼Œæ¯å¹´é€šç¼© 1%
 * å‚è€ƒ Ampleforth çš„å®ç°åŸç†
 */
contract RebaseToken {
    mapping(address =&gt; uint256) private _gonBalances;                    // æ¯ä¸ªåœ°å€çš„åº•å±‚æƒç›Šå•ä½ï¼ˆGonsï¼‰
    mapping(address =&gt; mapping(address =&gt; uint256)) private _allowances; // æ ‡å‡†ERC-20æˆæƒæ˜ å°„

    uint256 private constant MAX_UINT256 = ~uint256(0);                 // uint256æœ€å¤§å€¼ï¼š2^256 - 1
    uint256 private constant INITIAL_FRAGMENTS_SUPPLY = 100_000_000 * 10**18; // åˆå§‹ä¾›åº”é‡ï¼š1äº¿ * 10^18
    uint256 private constant TOTAL_GONS = MAX_UINT256 - (MAX_UINT256 % INITIAL_FRAGMENTS_SUPPLY); // æ€»Gonæ•°ï¼Œç¡®ä¿èƒ½è¢«åˆå§‹ä¾›åº”é‡æ•´é™¤

    string public name = "Rebase Deflation Token";                        // ä»£å¸åç§°
    string public symbol = "RDT";                                         // ä»£å¸ç¬¦å·
    uint8 public decimals = 18;                                           // ä»£å¸ç²¾åº¦

    uint256 private _totalSupply;                                        // ç”¨æˆ·å¯è§çš„æ€»ä¾›åº”é‡
    uint256 private _gonsPerFragment;                                    // åŠ¨æ€ç¼©æ”¾ç³»æ•°ï¼šæ¯ä¸ªfragmentå¯¹åº”çš„Gonsæ•°é‡

    uint256 public lastRebaseTime;                                       // ä¸Šæ¬¡rebaseæ—¶é—´æˆ³
    uint256 public rebaseCount;                                          // rebaseæ‰§è¡Œæ¬¡æ•°
    address public owner;                                                // åˆçº¦æ‰€æœ‰è€…åœ°å€

    uint256 private constant DEFLATION_RATE = 99;                        // é€šç¼©ç‡ï¼š99/100 = æ¯æ¬¡å‡å°‘1%
    uint256 private constant RATE_DENOMINATOR = 100;                     // é€šç¼©ç‡åˆ†æ¯
    uint256 private constant REBASE_INTERVAL = 365 days;                 // rebaseé—´éš”ï¼š365å¤©

    event Transfer(address indexed from, address indexed to, uint256 value);      // è½¬è´¦äº‹ä»¶
    event Approval(address indexed owner, address indexed spender, uint256 value); // æˆæƒäº‹ä»¶
    event Rebase(uint256 indexed epoch, uint256 totalSupply);                    // rebaseäº‹ä»¶

    modifier onlyOwner() {
        require(msg.sender == owner, "Not owner");                       // éªŒè¯è°ƒç”¨è€…ä¸ºåˆçº¦æ‰€æœ‰è€…
        _;
    }

    constructor() {
        owner = msg.sender;                                               // è®¾ç½®éƒ¨ç½²è€…ä¸ºåˆçº¦æ‰€æœ‰è€…
        _totalSupply = INITIAL_FRAGMENTS_SUPPLY;                          // åˆå§‹åŒ–æ€»ä¾›åº”é‡
        _gonsPerFragment = TOTAL_GONS / _totalSupply;                     // è®¡ç®—åˆå§‹ç¼©æ”¾ç³»æ•°
        lastRebaseTime = block.timestamp;                                 // è®°å½•éƒ¨ç½²æ—¶é—´ä½œä¸ºä¸Šæ¬¡rebaseæ—¶é—´
        _gonBalances[msg.sender] = TOTAL_GONS;                            // å°†æ‰€æœ‰Gonsåˆ†é…ç»™éƒ¨ç½²è€…
        emit Transfer(address(0), msg.sender, _totalSupply);              // è§¦å‘ä»£å¸é“¸é€ äº‹ä»¶
    }

    function totalSupply() public view returns (uint256) {
        return _totalSupply;                                              // è¿”å›å½“å‰æ€»ä¾›åº”é‡
    }

    function balanceOf(address who) public view returns (uint256) {
        return _gonBalances[who] / _gonsPerFragment;                      // è®¡ç®—ç”¨æˆ·å¯è§ä½™é¢ï¼šGonä½™é¢ / ç¼©æ”¾ç³»æ•°
    }

    function transfer(address to, uint256 value) public returns (bool) {
        require(to != address(0), "Transfer to zero address");            // é˜²æ­¢è½¬è´¦åˆ°é›¶åœ°å€
        require(to != address(this), "Transfer to contract");             // é˜²æ­¢è½¬è´¦åˆ°åˆçº¦è‡ªèº«

        uint256 gonValue = value * _gonsPerFragment;                      // å°†è½¬è´¦é‡‘é¢è½¬æ¢ä¸ºGonå•ä½
        _gonBalances[msg.sender] -= gonValue;                             // ä»å‘é€æ–¹æ‰£é™¤Gonä½™é¢
        _gonBalances[to] += gonValue;                                     // ç»™æ¥æ”¶æ–¹å¢åŠ Gonä½™é¢
        emit Transfer(msg.sender, to, value);                             // è§¦å‘è½¬è´¦äº‹ä»¶
        return true;
    }

    function allowance(address owner_, address spender) public view returns (uint256) {
        return _allowances[owner_][spender];                             // è¿”å›æˆæƒé¢åº¦
    }

    function transferFrom(address from, address to, uint256 value) public returns (bool) {
        require(to != address(0), "Transfer to zero address");            // é˜²æ­¢è½¬è´¦åˆ°é›¶åœ°å€
        require(to != address(this), "Transfer to contract");             // é˜²æ­¢è½¬è´¦åˆ°åˆçº¦è‡ªèº«

        _allowances[from][msg.sender] -= value;                           // ä»æˆæƒé¢åº¦ä¸­æ‰£é™¤
        uint256 gonValue = value * _gonsPerFragment;                      // å°†è½¬è´¦é‡‘é¢è½¬æ¢ä¸ºGonå•ä½
        _gonBalances[from] -= gonValue;                                   // ä»å‘é€æ–¹æ‰£é™¤Gonä½™é¢
        _gonBalances[to] += gonValue;                                     // ç»™æ¥æ”¶æ–¹å¢åŠ Gonä½™é¢
        emit Transfer(from, to, value);                                   // è§¦å‘è½¬è´¦äº‹ä»¶
        return true;
    }

    function approve(address spender, uint256 value) public returns (bool) {
        _allowances[msg.sender][spender] = value;                         // è®¾ç½®æˆæƒé¢åº¦
        emit Approval(msg.sender, spender, value);                        // è§¦å‘æˆæƒäº‹ä»¶
        return true;
    }

    function increaseAllowance(address spender, uint256 addedValue) public returns (bool) {
        _allowances[msg.sender][spender] += addedValue;                   // å¢åŠ æˆæƒé¢åº¦
        emit Approval(msg.sender, spender, _allowances[msg.sender][spender]); // æ›´æ–°æˆæƒäº‹ä»¶
        return true;
    }

    function decreaseAllowance(address spender, uint256 subtractedValue) public returns (bool) {
        uint256 oldValue = _allowances[msg.sender][spender];              // ä¿å­˜åŸå§‹æˆæƒé¢åº¦
        if (subtractedValue &gt;= oldValue) {
            _allowances[msg.sender][spender] = 0;                         // é˜²æ­¢ä¸‹æº¢ï¼Œè®¾ç½®ä¸º0
        } else {
            _allowances[msg.sender][spender] = oldValue - subtractedValue; // å‡å°‘æˆæƒé¢åº¦
        }
        emit Approval(msg.sender, spender, _allowances[msg.sender][spender]); // æ›´æ–°æˆæƒäº‹ä»¶
        return true;
    }

    function rebase() external onlyOwner {                                // å®šæ—¶rebaseå‡½æ•°
        require(block.timestamp &gt;= lastRebaseTime + REBASE_INTERVAL, "Rebase too early"); // æ£€æŸ¥æ—¶é—´é—´éš”
        _rebase();                                                        // æ‰§è¡Œå†…éƒ¨rebaseé€»è¾‘
    }

    function manualRebase() external onlyOwner {                          // æ‰‹åŠ¨rebaseå‡½æ•°
        _rebase();                                                        // æ‰§è¡Œå†…éƒ¨rebaseé€»è¾‘ï¼ˆæ— æ—¶é—´é™åˆ¶ï¼‰
    }

    function _rebase() internal {                                         // å†…éƒ¨rebaseå®ç°
        rebaseCount++;                                                    // å¢åŠ rebaseè®¡æ•°
        uint256 newTotalSupply = (_totalSupply * DEFLATION_RATE) / RATE_DENOMINATOR; // è®¡ç®—æ–°ä¾›åº”é‡ï¼šå‡å°‘1%
        _totalSupply = newTotalSupply;                                    // æ›´æ–°æ€»ä¾›åº”é‡
        _gonsPerFragment = TOTAL_GONS / _totalSupply;                     // é‡æ–°è®¡ç®—ç¼©æ”¾ç³»æ•°
        lastRebaseTime = block.timestamp;                                 // æ›´æ–°rebaseæ—¶é—´
        emit Rebase(rebaseCount, _totalSupply);                           // è§¦å‘rebaseäº‹ä»¶
    }

    function gonsPerFragment() external view returns (uint256) {
        return _gonsPerFragment;                                          // è¿”å›å½“å‰ç¼©æ”¾ç³»æ•°
    }

    function canRebase() external view returns (bool) {
        return block.timestamp &gt;= lastRebaseTime + REBASE_INTERVAL;       // æ£€æŸ¥æ˜¯å¦å¯ä»¥æ‰§è¡Œrebase
    }

    function nextRebaseTime() external view returns (uint256) {
        return lastRebaseTime + REBASE_INTERVAL;                          // è¿”å›ä¸‹æ¬¡rebaseæ—¶é—´
    }

    function gonBalanceOf(address who) external view returns (uint256) {
        return _gonBalances[who];                                         // è¿”å›ç”¨æˆ·åº•å±‚Gonä½™é¢
    }
}
</code></pre>
<h3 data-id="heading-10">4.2 ä½™é¢è®¡ç®—ä¸è½¬æ¢é€»è¾‘</h3>
<h4 data-id="heading-11">4.2.1 æ ¸å¿ƒè½¬æ¢å…¬å¼</h4>
<p>balanceOfå‡½æ•°æ˜¯ç†è§£RebaseTokenæœºåˆ¶çš„å…³é”®ï¼š</p>
<pre><code class="hljs language-solidity" lang="solidity">function balanceOf(address who) public view returns (uint256) {
    return _gonBalances[who] / _gonsPerFragment;                      // è®¡ç®—ç”¨æˆ·å¯è§ä½™é¢ï¼šGonä½™é¢ / ç¼©æ”¾ç³»æ•°
}
</code></pre>
<p>è¿™æ˜¯RebaseTokenæœ€æ ¸å¿ƒçš„è½¬æ¢å…¬å¼ï¼š<code>ç”¨æˆ·ä½™é¢ = Gonä½™é¢ Ã· å½“å‰ç¼©æ”¾ç³»æ•°</code>ã€‚</p>
<p>å½“Rebaseè§¦å‘æ—¶ï¼Œ<code>_gonsPerFragment</code>ä¼šå¢å¤§ï¼ˆå› ä¸ºæ€»ä¾›åº”é‡å‡å°‘ï¼Œè€ŒTOTAL_GONSå›ºå®šï¼‰ï¼Œæ‰€ä»¥é™¤æ³•å¾—åˆ°çš„ç»“æœï¼ˆç”¨æˆ·ä½™é¢ï¼‰å°±ä¼š<strong>ç­‰æ¯”ä¾‹åœ°å‡å°‘</strong>ã€‚ä½†ç”¨æˆ·çš„<code>_gonBalances[who]</code>ï¼ˆåº•å±‚æƒç›Šï¼‰å§‹ç»ˆä¿æŒä¸å˜ï¼Œå› æ­¤å…¶åœ¨æ€»ä¾›åº”é‡ä¸­çš„æ¯”ä¾‹ä¿æŒæ’å®šã€‚</p>
<p>ä¸‹é¢çš„æ—¶åºå›¾å±•ç¤ºäº†ä½™é¢è®¡ç®—è½¬æ¢çš„è¿‡ç¨‹ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant User as ç”¨æˆ·
    participant Contract as RebaseTokenåˆçº¦
    participant Storage as å­˜å‚¨

    User-&gt;&gt;Contract: balanceOf(address)
    Contract-&gt;&gt;Storage: è¯»å–_gonBalances[address]
    Storage--&gt;&gt;Contract: è¿”å›Gonä½™é¢
    Contract-&gt;&gt;Storage: è¯»å–_gonsPerFragment
    Storage--&gt;&gt;Contract: è¿”å›ç¼©æ”¾ç³»æ•°
    Contract-&gt;&gt;Contract: è®¡ç®— Gonä½™é¢ / _gonsPerFragment
    Contract--&gt;&gt;User: è¿”å›ç”¨æˆ·å¯è§ä½™é¢
</code></pre>
<h4 data-id="heading-12">4.2.2 è½¬è´¦å®ç°è§£æ</h4>
<p>åœ¨è½¬è´¦è¿‡ç¨‹ä¸­ï¼Œåˆçº¦å°†ç”¨æˆ·è¾“å…¥çš„valueå…ˆè½¬æ¢ä¸ºGonå€¼å†è¿›è¡Œæ“ä½œï¼š</p>
<pre><code class="hljs language-solidity" lang="solidity">function transfer(address to, uint256 value) public returns (bool) {
    require(to != address(0), "Transfer to zero address");
    require(to != address(this), "Transfer to contract");

    uint256 gonValue = value * _gonsPerFragment;  // è½¬æ¢ä¸ºgonå•ä½
    _gonBalances[msg.sender] -= gonValue;         // å‡å°‘å‘é€æ–¹çš„gonä½™é¢
    _gonBalances[to] += gonValue;                 // å¢åŠ æ¥æ”¶æ–¹çš„gonä½™é¢
    emit Transfer(msg.sender, to, value);         // å‘é€åŸå§‹å€¼ä½œä¸ºäº‹ä»¶
    return true;
}
</code></pre>
<p>è¿™ç§è®¾è®¡ç¡®ä¿äº†åœ¨è½¬è´¦è¿‡ç¨‹ä¸­ï¼Œç³»ç»Ÿæ“ä½œçš„æ˜¯ä¸ä¼šæ”¹å˜çš„Gonå€¼ï¼Œä¿è¯äº†è½¬è´¦çš„ç²¾ç¡®æ€§ã€‚</p>
<h3 data-id="heading-13">4.3 Rebaseæ ¸å¿ƒé€»è¾‘</h3>
<h4 data-id="heading-14">4.3.1 æ¡ä»¶è§¦å‘rebase</h4>
<p>åˆçº¦æä¾›äº†ä¸¤ç§è§¦å‘rebaseçš„æ–¹å¼ï¼š</p>
<pre><code class="hljs language-solidity" lang="solidity">function rebase() external onlyOwner {                                // å®šæ—¶rebaseå‡½æ•°
    require(block.timestamp &gt;= lastRebaseTime + REBASE_INTERVAL, "Rebase too early"); // æ£€æŸ¥æ—¶é—´é—´éš”
    _rebase();                                                        // æ‰§è¡Œå†…éƒ¨rebaseé€»è¾‘
}

function manualRebase() external onlyOwner {                          // æ‰‹åŠ¨rebaseå‡½æ•°
    _rebase();                                                        // æ‰§è¡Œå†…éƒ¨rebaseé€»è¾‘ï¼ˆæ— æ—¶é—´é™åˆ¶ï¼‰
}
</code></pre>
<ul>
<li><code>rebase()</code>ï¼šåªèƒ½åœ¨ä¸€å¹´ï¼ˆ365å¤©ï¼‰åæ‰ä¼šæˆåŠŸæ‰§è¡Œ</li>
<li><code>manualRebase()</code>ï¼šæ‰€æœ‰è€…å¯ä»¥éšæ—¶å¼ºåˆ¶è§¦å‘rebaseï¼ˆæ— æ—¶é—´é™åˆ¶ï¼‰</li>
</ul>
<h4 data-id="heading-15">4.3.2 å†…éƒ¨rebaseå®ç°</h4>
<p>å†…éƒ¨rebaseå‡½æ•°æ˜¯æ•´ä¸ªåˆçº¦çš„æ ¸å¿ƒï¼š</p>
<pre><code class="hljs language-solidity" lang="solidity">function _rebase() internal {
    rebaseCount++;                                                    // å¢åŠ rebaseè®¡æ•°
    uint256 newTotalSupply = (_totalSupply * DEFLATION_RATE) / RATE_DENOMINATOR; // è®¡ç®—æ–°ä¾›åº”é‡ï¼šå‡å°‘1%
    _totalSupply = newTotalSupply;                                    // æ›´æ–°æ€»ä¾›åº”é‡
    _gonsPerFragment = TOTAL_GONS / _totalSupply;                     // é‡æ–°è®¡ç®—ç¼©æ”¾ç³»æ•°
    lastRebaseTime = block.timestamp;                                 // æ›´æ–°rebaseæ—¶é—´
    emit Rebase(rebaseCount, _totalSupply);                           // è§¦å‘rebaseäº‹ä»¶
}
</code></pre>
<p>è¿™ä¸ªè¿‡ç¨‹çš„æ ¸å¿ƒæ˜¯ï¼šç”±äºæ€»Gonsï¼ˆTOTAL_GONSï¼‰ä¸å˜è€Œæ€»ä¾›åº”é‡å‡å°‘ï¼Œæ‰€ä»¥ç¼©æ”¾ç³»æ•°<code>_gonsPerFragment</code>ä¼šå¢å¤§ã€‚è€Œç”¨æˆ·ä½™é¢çš„è®¡ç®—å…¬å¼æ˜¯<code>_gonBalances[who] / _gonsPerFragment</code>ï¼Œæ‰€ä»¥å½“åˆ†æ¯å¢å¤§æ—¶ï¼Œç”¨æˆ·çœ‹åˆ°çš„ä½™é¢ä¼šåŒæ¯”ä¾‹å‡å°‘ã€‚</p>
<p>ä¸‹é¢çš„æµç¨‹å›¾è¯¦ç»†å±•ç¤ºäº†rebaseæœºåˆ¶çš„æ‰§è¡Œæµç¨‹ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TB
    A["å¼€å§‹: è§¦å‘rebase()"] --&gt; B["æ£€æŸ¥æ—¶é—´: lastRebaseTime + 1å¹´"]
    B --&gt; C{"æ—¶é—´æ¡ä»¶æ»¡è¶³?"}
    C --&gt;|å¦| D["äº¤æ˜“å¤±è´¥: Rebase too early"]
    C --&gt;|æ˜¯| E["å¢åŠ rebaseè®¡æ•°å™¨"]
    E --&gt; F["è®¡ç®—æ–°ä¾›åº”é‡: _totalSupply * 0.99"]
    F --&gt; G["æ›´æ–°_totalSupply"]
    G --&gt; H["é‡æ–°è®¡ç®—_gonsPerFragment = TOTAL_GONS / _totalSupply"]
    H --&gt; I["æ›´æ–°lastRebaseTime"]
    I --&gt; J["è§¦å‘Rebaseäº‹ä»¶"]
    J --&gt; K["æ‰€æœ‰ç”¨æˆ·ä½™é¢æŒ‰æ¯”ä¾‹å‡å°‘1%"]

    style A fill:#d3f9d8
    style D fill:#ffe3e3
    style K fill:#c5f6fa
</code></pre>
<h3 data-id="heading-16">4.4 æ„é€ å‡½æ•°è§£æ</h3>
<pre><code class="hljs language-solidity" lang="solidity">constructor() {
    owner = msg.sender;                             // è®¾ç½®éƒ¨ç½²è€…ä¸ºæ‰€æœ‰è€…
    _totalSupply = INITIAL_FRAGMENTS_SUPPLY;        // è®¾ç½®åˆå§‹æ€»ä¾›åº”é‡
    _gonsPerFragment = TOTAL_GONS / _totalSupply;   // è®¡ç®—åˆå§‹ç¼©æ”¾ç³»æ•°
    lastRebaseTime = block.timestamp;               // è®°å½•å½“å‰æ—¶é—´ä¸ºä¸Šæ¬¡rebaseæ—¶é—´
    _gonBalances[msg.sender] = TOTAL_GONS;          // å°†æ‰€æœ‰Gonsåˆ†é…ç»™éƒ¨ç½²è€…
    emit Transfer(address(0), msg.sender, _totalSupply); // è§¦å‘é“¸é€ äº‹ä»¶
}
</code></pre>
<p>æ„é€ å‡½æ•°åˆå§‹åŒ–äº†æ•´ä¸ªrebaseç³»ç»Ÿã€‚éƒ¨ç½²è€…è·å¾—äº†æ‰€æœ‰åº•å±‚Gonsï¼Œåˆå§‹çš„<code>balanceOf(deployer)</code>å€¼ä¸º<code>TOTAL_GONS / (TOTAL_GONS / INITIAL_FRAGMENTS_SUPPLY) = INITIAL_FRAGMENTS_SUPPLY</code>ã€‚</p>
<h2 data-id="heading-17">äº”ã€å®é™…åº”ç”¨ä¸å®‰å…¨æ€§åˆ†æ</h2>
<h3 data-id="heading-18">5.1 é€šç¼©å‹ä¸é€šèƒ€å‹rebaseæœºåˆ¶å¯¹æ¯”</h3>
<p>ä¼ ç»Ÿçš„Ampleforthæœºåˆ¶æ—¨åœ¨é€šè¿‡åŠ¨æ€è°ƒæ•´ä¾›åº”é‡æ¥å®ç°ä»·æ ¼ç¨³å®šï¼š</p>
<ul>
<li>å‘ä¸Šrebaseæ—¶ï¼Œä¾›åº”é‡å¢åŠ ï¼Œæ¯ä¸ªtokenä»·å€¼ç›¸å¯¹é™ä½ï¼ˆé€šèƒ€ï¼‰</li>
<li>å‘ä¸‹rebaseæ—¶ï¼Œä¾›åº”é‡å‡å°‘ï¼Œæ¯ä¸ªtokenä»·å€¼ç›¸å¯¹æå‡ï¼ˆé€šç¼©ï¼‰</li>
</ul>
<p>è€ŒRebaseTokençš„é€šç¼©æœºåˆ¶ä¸åŒï¼š</p>
<ul>
<li>æ¯å¹´è‡ªåŠ¨å‡å°‘1%çš„ä¾›åº”é‡</li>
<li>ä¸ä¾èµ–å¸‚åœºä»·æ ¼ä¿¡å·ï¼Œè€Œæ˜¯ä¸»åŠ¨è¿›è¡Œé€šç¼©</li>
<li>ç›®æ ‡æ˜¯åœ¨é•¿æœŸå†…åˆ›é€ ç¨€ç¼ºæ€§ï¼Œæå‡å•ä¸ªä»£å¸ä»·å€¼</li>
</ul>
<p>è¿™ç§æœºåˆ¶åœ¨ç»æµå­¦ä¸Šå¯ä»¥è§†ä¸ºå¯¹æŒæœ‰è€…çš„ä¸€ç§"æƒç›Š"ä¿æŠ¤ï¼Œä½†åŒæ—¶ä¹Ÿéœ€è¦è€ƒè™‘å…¶å¯¹å¸‚åœºæµåŠ¨æ€§å’Œç”Ÿæ€å‘å±•çš„å½±å“ã€‚</p>
<p>ä¸‹é¢çš„å›¾è¡¨ç›´è§‚å±•ç¤ºäº†é€šç¼©å‰åç”¨æˆ·ä½™é¢çš„å˜åŒ–æƒ…å†µï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    subgraph "é€šç¼©å‰ (Year 1)"
        A1["ç”¨æˆ·A: 1000ä¸‡ RDT"]
        A2["ç”¨æˆ·B: 5000ä¸‡ RDT"]
        A3["æ€»ä¾›åº”é‡: 1äº¿ RDT"]
        A4["_gonsPerFragment: 11579..."]
    end

    subgraph "é€šç¼©å (Year 2)"
        B1["ç”¨æˆ·A: 990ä¸‡ RDT&lt;br/&gt;(æƒç›Šå æ¯”ä¸å˜)"]
        B2["ç”¨æˆ·B: 4950ä¸‡ RDT&lt;br/&gt;(æƒç›Šå æ¯”ä¸å˜)"]
        B3["æ€»ä¾›åº”é‡: 9900ä¸‡ RDT"]
        B4["_gonsPerFragment: 11696...&lt;br/&gt;(å¢åŠ )"]
    end

    A1 -.-&gt; B1
    A2 -.-&gt; B2
    A3 -.-&gt; B3
    A4 -.-&gt; B4

    style A1 fill:#d3f9d8
    style A2 fill:#d3f9d8
    style A3 fill:#e5dbff
    style A4 fill:#ffe8cc
    style B1 fill:#ffe3e3
    style B2 fill:#ffe3e3
    style B3 fill:#e5dbff
    style B4 fill:#ffe8cc
</code></pre>
<h3 data-id="heading-19">5.2 å®‰å…¨æ€§è€ƒè™‘</h3>
<p>åˆçº¦å®ç°ä¸­åŒ…å«å¤šé¡¹å®‰å…¨æœºåˆ¶ï¼š</p>
<ol>
<li><strong>æƒé™æ§åˆ¶</strong>ï¼šä½¿ç”¨onlyOwnerä¿®é¥°ç¬¦é™åˆ¶å…³é”®åŠŸèƒ½çš„è®¿é—®</li>
<li><strong>æº¢å‡ºæ£€æŸ¥</strong>ï¼šSolidity 0.8.xè‡ªå¸¦çš„æº¢å‡ºæ£€æŸ¥</li>
<li><strong>å®‰å…¨æ£€æŸ¥</strong>ï¼šè½¬è´¦æ—¶æ£€æŸ¥é›¶åœ°å€å’Œåˆçº¦åœ°å€</li>
<li><strong>æˆæƒç®¡ç†</strong>ï¼šé‡‡ç”¨æ ‡å‡†çš„å‡å°‘æˆæƒæ”»å‡»é˜²èŒƒæœºåˆ¶</li>
</ol>
<p>ç„¶è€Œï¼Œè¿˜éœ€æ³¨æ„ä»¥ä¸‹é£é™©ï¼š</p>
<ul>
<li>åˆçº¦ownerå…·æœ‰ä¸­å¿ƒåŒ–æ§åˆ¶æƒé™</li>
<li>é•¿æœŸrebaseå¯èƒ½ç§¯ç´¯ç²¾åº¦è¯¯å·®</li>
<li>ä¸æŸäº›DeFiåè®®çš„å…¼å®¹æ€§é—®é¢˜</li>
</ul>
<h3 data-id="heading-20">5.3 å®é™…æ¡ˆä¾‹ä¸åº”ç”¨åœºæ™¯</h3>
<p>RebaseTokenè¿™æ ·çš„é€šç¼©æœºåˆ¶åœ¨ä»¥ä¸‹åœºæ™¯ä¸­å…·æœ‰åº”ç”¨ä»·å€¼ï¼š</p>
<ol>
<li><strong>ä»·å€¼å­˜å‚¨ç±»ä»£å¸</strong>ï¼šé€šè¿‡é€šç¼©æœºåˆ¶åˆ›é€ ç¨€ç¼ºæ€§ï¼Œå¢å¼ºä»·å€¼å­˜å‚¨å±æ€§</li>
<li><strong>æ²»ç†ä»£å¸</strong>ï¼šå‡å°‘ä¾›åº”é‡ä»¥æå‡å•ä¸ªä»£å¸çš„æ²»ç†æƒä»·å€¼</li>
<li><strong>Memeä»£å¸</strong>ï¼šä½œä¸ºä¸€ç§å®éªŒæ€§é€šç¼©æœºåˆ¶å¸å¼•å¸‚åœºå…³æ³¨</li>
</ol>
<h2 data-id="heading-21">å…­ã€æ€»ç»“</h2>
<p>RebaseTokenåˆçº¦ä½“ç°äº†Rebaseæœºåˆ¶çš„ç²¾å¦™è®¾è®¡ã€‚é€šè¿‡Gonsä¸Fragmentsçš„åŒé‡è®°è´¦ä½“ç³»ï¼Œè¯¥åˆçº¦æˆåŠŸå®ç°äº†åœ¨ä¸å®é™…è½¬ç§»ä»£å¸çš„æƒ…å†µä¸‹æŒ‰æ¯”ä¾‹è°ƒæ•´æ‰€æœ‰æŒæœ‰è€…ä½™é¢çš„åˆ›æ–°æœºåˆ¶ã€‚</p>
<p>è™½ç„¶RebaseTokenåˆçº¦æä¾›äº†ä¸€ä¸ªå­¦ä¹ rebaseæœºåˆ¶çš„è‰¯å¥½ç¤ºä¾‹ï¼Œä½†åœ¨å®é™…åº”ç”¨ä¸­éœ€è¦è€ƒè™‘æ²»ç†ã€å®‰å…¨æ€§å’Œå»ä¸­å¿ƒåŒ–ç­‰å› ç´ ã€‚è¿™ä¸€æœºåˆ¶ä¸ºåŒºå—é“¾ä»£å¸ç»æµå­¦çš„å‘å±•æä¾›äº†æ–°çš„æ€è·¯ï¼Œå±•ç¤ºäº†æ•°å­¦ä¸ç¼–ç¨‹ç»“åˆåœ¨åŠ å¯†é¢†åŸŸåˆ›é€ åˆ›æ–°ä»·å€¼çš„å¯èƒ½æ€§ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æœ¬åœ°é…ç½®host]]></title>    <link>https://juejin.cn/post/7602776926327308342</link>    <guid>https://juejin.cn/post/7602776926327308342</guid>    <pubDate>2026-02-04T09:48:10.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602776926327308342" data-draft-id="7602814773495988266" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æœ¬åœ°é…ç½®host"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-02-04T09:48:10.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¹¸ç¦å°å®"/> <meta itemprop="url" content="https://juejin.cn/user/1856420109622520"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æœ¬åœ°é…ç½®host
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1856420109622520/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¹¸ç¦å°å®
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T09:48:10.000Z" title="Wed Feb 04 2026 09:48:10 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="" data-highlight-key="a11y-dark">.hljs-comment,.hljs-quote{color:#d4d0ab}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#ffa07a}.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#f5ab35}.hljs-attribute{color:gold}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:#abe338}.hljs-section,.hljs-title{color:#00e0e0}.hljs-keyword,.hljs-selector-tag{color:#dcc6e0}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#2b2b2b;color:#f8f8f2}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}@media screen and (-ms-high-contrast:active){.hljs-addition,.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-comment,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-quote,.hljs-string,.hljs-symbol,.hljs-type{color:highlight}.hljs-keyword,.hljs-selector-tag{font-weight:700}}</style><blockquote>
<p>æ³¨æ„äº‹é¡¹</p>
</blockquote>
<ol>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fxx.demo.com%3A8000%2F%23%2F" target="_blank" title="https://xx.demo.com:8000/#/" ref="nofollow noopener noreferrer">xx.demo.com:8000/#/</a>  è¿™ä¸ªè¦å’Œå›¾ç‰‡é…ç½®çš„åŸŸåä¸€è‡´(ç»†å¿ƒç‚¹)æ‰èƒ½æ‰“å¼€ æ³¨æ„httpå’Œhttps</li>
</ol>
<p align="center"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a643310aa0e34d95bc5f5d2233204ba5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bm456aP5bCP5a6d:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770803290&amp;x-signature=6Z5IcasrXF%2BVq2Vv0AwlQyzb90s%3D" alt="image.png" loading="lazy"/></p>
<ol start="2">
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Flocalhost%3A8000" target="_blank" title="https://localhost:8000" ref="nofollow noopener noreferrer">https://localhost:8000</a> è¿™ä¸ªåœ°å€èƒ½å¯åŠ¨ é…ç½®çš„åœ°å€å°±èƒ½å¯åŠ¨ ä¸èƒ½å¯åŠ¨å°±æ˜¯åœ°å€ä¸å¯¹</p>
</li>
<li>
<p>å¦‚æœé…ç½®å®Œæ˜¾ç¤ºå¦‚ä¸‹ éœ€è¦æ¸…ç†dnsç¼“å­˜</p>
</li>
</ol>
<p align="center"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bd1435c6c7fc40a9a8c861a5bf15286d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bm456aP5bCP5a6d:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770803290&amp;x-signature=Ks6jfp8%2BRcp5vqWg0owlhEPlLFg%3D" alt="image.png" width="50%" loading="lazy"/></p>
<ul>
<li>åœ¨ Chrome æµè§ˆå™¨çš„åœ°å€æ ä¸­è¾“å…¥ <code>chrome://net-internals/#dns</code></li>
<li>åœ¨æ‰“å¼€çš„é¡µé¢ä¸­ï¼Œæ‰¾åˆ°å¹¶ç‚¹å‡» â€Œ <strong>â€œClear host cacheâ€</strong> â€Œ æŒ‰é’®ã€‚ â€Œ</li>
<li>æ‰§è¡Œå®Œä¸Šè¿°æ­¥éª¤åï¼ŒChrome çš„ DNS ç¼“å­˜å³è¢«æ¸…é™¤ã€‚æ­¤æ“ä½œæ— éœ€é‡å¯æµè§ˆå™¨å³å¯ç”Ÿæ•ˆã€‚</li>
<li>å¦‚æœè¿˜æ˜¯ä¸å¯¹æ¸…ç†æµè§ˆå™¨ç¼“å­˜</li>
</ul>
<p align="center"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fab929f298554d9daf0250a182517732~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bm456aP5bCP5a6d:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770803290&amp;x-signature=hxEN1HPTDDZK36LOtz4rrx2KCfE%3D" alt="image.png" width="50%" loading="lazy"/></p>
<p align="center"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ae0365fa9076457e980caeefad85dc78~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bm456aP5bCP5a6d:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770803290&amp;x-signature=dVIc4kj8Rrp8pqc%2F%2F%2FTR92Be6pQ%3D" alt="image.png" width="50%" loading="lazy"/></p>
<blockquote>
<p><strong>chrome://net-internals/#sockets</strong> åˆ·æ–°Socketæ± ä»¥é‡ç½®ç½‘ç»œè¿æ¥</p>
</blockquote>
<blockquote>
<p>done</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‰ç«¯å¹¶å‘å¤„ç†æœ€ä½³å®è·µï¼šToken å…±äº«èµ„æºçš„å•ä¾‹ Promise æ¨¡å¼]]></title>    <link>https://juejin.cn/post/7602553969971052598</link>    <guid>https://juejin.cn/post/7602553969971052598</guid>    <pubDate>2026-02-04T09:51:04.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602553969971052598" data-draft-id="7602543146237591595" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‰ç«¯å¹¶å‘å¤„ç†æœ€ä½³å®è·µï¼šToken å…±äº«èµ„æºçš„å•ä¾‹ Promise æ¨¡å¼"/> <meta itemprop="keywords" content="JavaScript,å‰ç«¯"/> <meta itemprop="datePublished" content="2026-02-04T09:51:04.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸€æ‹³ä¸æ˜¯è¶…äºº"/> <meta itemprop="url" content="https://juejin.cn/user/3456520289261902"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‰ç«¯å¹¶å‘å¤„ç†æœ€ä½³å®è·µï¼šToken å…±äº«èµ„æºçš„å•ä¾‹ Promise æ¨¡å¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3456520289261902/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸€æ‹³ä¸æ˜¯è¶…äºº
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T09:51:04.000Z" title="Wed Feb 04 2026 09:51:04 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨å‰ç«¯å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸é‡åˆ°è¿™æ ·çš„åœºæ™¯ï¼šå¤šä¸ªç‹¬ç«‹çš„ç»„ä»¶æˆ–äº‹ä»¶æµï¼ˆEvent Streamï¼‰å‡ ä¹åŒæ—¶è§¦å‘ï¼Œå®ƒä»¬éƒ½éœ€è¦ä¾èµ–åŒä¸€ä¸ªå¼‚æ­¥è·å–çš„èµ„æºâ€”â€”æ¯”å¦‚é‰´æƒ Tokenã€‚</p>
<p>å¦‚æœå¤„ç†ä¸å½“ï¼Œå°±ä¼šå¯¼è‡´Â <strong>Race Conditionï¼ˆç«æ€æ¡ä»¶ï¼‰</strong> Â æˆ–è€…Â <strong>é‡å¤çš„ç½‘ç»œè¯·æ±‚</strong>ã€‚ä»Šå¤©æˆ‘ä»¬æ¥åˆ†äº«ä¸€ç§ç®€å•è€Œå¥å£®çš„æœ€ä½³å®è·µï¼š<strong>Singleton Promise Patternï¼ˆå•ä¾‹ Promise æ¨¡å¼ï¼‰</strong> ã€‚</p>
<h2 data-id="heading-0">å¸¸è§é—®é¢˜ï¼šå¹¶å‘åœ°ç‹±</h2>
<p>å‡è®¾ä½ æœ‰ä¸€ä¸ªÂ <code>audio-to-text</code>ï¼ˆè¯­éŸ³è½¬æ–‡å­—ï¼‰çš„åŠŸèƒ½ï¼Œæ¯æ¬¡è§¦å‘éƒ½éœ€è¦å…ˆè·å–ä¸€ä¸ªä¸´æ—¶çš„ API Tokenã€‚</p>
<p>å¦‚æœç”¨æˆ·è¿ç»­å¿«é€Ÿæ’­æ”¾äº† 3 æ¡è¯­éŸ³ï¼Œæˆ–è€…é¡µé¢åˆå§‹åŒ–æ—¶æœ‰å¤šä¸ªç»„ä»¶åŒæ—¶è¯·æ±‚ Tokenï¼Œå¯èƒ½ä¼šå‘ç”Ÿä»¥ä¸‹æƒ…å†µï¼š</p>
<ol>
<li><strong>èµ„æºæµªè´¹</strong>ï¼šå‘èµ·äº† 3 æ¬¡è·å– Token çš„ç½‘ç»œè¯·æ±‚ï¼Œä½†å®é™…ä¸Šåªéœ€è¦ 1 æ¬¡ã€‚</li>
<li><strong>çŠ¶æ€ä¸ä¸€è‡´</strong>ï¼šç¬¬ 1 ä¸ªè¯·æ±‚æˆåŠŸäº†ï¼Œä½†åœ¨å®ƒå†™å…¥æœ¬åœ°ç¼“å­˜ä¹‹å‰ï¼Œç¬¬ 2 ä¸ªè¯·æ±‚åˆå‘èµ·äº†ã€‚</li>
<li><strong>æ­»é”/æ— é™ç­‰å¾…</strong>ï¼šä½¿ç”¨ç®€å•çš„Â <code>isLoading</code>Â é”ï¼Œå¦‚æœä»£ç é€»è¾‘åœ¨å¼‚å¸¸å¤„ç†ï¼ˆcatchï¼‰ä¸­é—æ¼äº†é‡ç½®é”ï¼Œå¯¼è‡´åç»­è¯·æ±‚ä¸€ç›´ pendingã€‚</li>
</ol>
<h2 data-id="heading-1">è§£å†³æ–¹æ¡ˆï¼šå•ä¾‹ Promise æ¨¡å¼</h2>
<p>æ ¸å¿ƒæ€æƒ³éå¸¸ç®€å•ï¼š<strong>å°†"æ­£åœ¨è¿›è¡Œçš„è¯·æ±‚"ç¼“å­˜èµ·æ¥ï¼Œè€Œä¸æ˜¯åªç¼“å­˜ç»“æœã€‚</strong></p>
<p>å¯¹äºå…±äº«èµ„æºï¼Œæˆ‘ä»¬ç»´æŠ¤ä¸€ä¸ªå…¨å±€å”¯ä¸€çš„ Promiseã€‚</p>
<ul>
<li>å½“ç¬¬ä¸€ä¸ªè¯·æ±‚è¿›æ¥æ—¶ï¼Œåˆ›å»ºä¸€ä¸ª Promise å¹¶å‘èµ·è¯·æ±‚ã€‚</li>
<li>å½“åç»­è¯·æ±‚è¿›æ¥æ—¶ï¼Œå¦‚æœå‘ç°å·²ç»æœ‰ä¸€ä¸ª Promise åœ¨ pendingï¼Œç›´æ¥å¤ç”¨å¹¶è¿”å›è¿™ä¸ª Promiseã€‚</li>
<li>æ— è®ºæˆåŠŸæˆ–å¤±è´¥ï¼ŒPromise settled åï¼Œæ¸…ç†çŠ¶æ€ï¼Œä»¥ä¾¿ä¸‹æ¬¡å¯ä»¥å‘èµ·æ–°è¯·æ±‚ã€‚</li>
</ul>
<h3 data-id="heading-2">ä»£ç å®ç°æ¨¡æ¿</h3>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªå¥å£®çš„å®ç°æ¨¡æ¿ï¼ŒåŒ…å«äº†Â <strong>é˜²æŠ–ï¼ˆDebounceï¼‰</strong> ã€<strong>å¼‚å¸¸å®‰å…¨ï¼ˆException Safetyï¼‰</strong> Â å’ŒÂ <strong>çŠ¶æ€å¤ä½</strong>ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å…¨å±€çŠ¶æ€å˜é‡</span>
<span class="hljs-keyword">let</span> getTokenTask = <span class="hljs-literal">null</span>; <span class="hljs-comment">// å­˜å‚¨æ­£åœ¨è¿›è¡Œçš„ Promise</span>
<span class="hljs-keyword">let</span> isGettingToken = <span class="hljs-literal">false</span>; <span class="hljs-comment">// é”æ ‡è®°</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getSharedToken</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// 1. æ£€æŸ¥æœ¬åœ°ç¼“å­˜æ˜¯å¦æœ‰æ•ˆ</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-title function_">isTokenValid</span>()) {
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">getTokenFromStorage</span>();
  }
  <span class="hljs-comment">// 2. å¹¶å‘æ‹¦æˆªï¼šå¦‚æœæœ‰æ­£åœ¨è¿›è¡Œçš„ä»»åŠ¡ï¼Œç›´æ¥å¤ç”¨ï¼Œä¸å‘èµ·æ–°è¯·æ±‚</span>
  <span class="hljs-keyword">if</span> (isGettingToken &amp;&amp; getTokenTask) {
    <span class="hljs-keyword">return</span> getTokenTask;
  }
  <span class="hljs-comment">// 3. åˆå§‹åŒ–ä¸€ä¸ªæ–°çš„å•ä¾‹ä»»åŠ¡</span>
  isGettingToken = <span class="hljs-literal">true</span>;
  
  <span class="hljs-comment">// åˆ›å»º Promise é—­åŒ…ï¼Œç¡®ä¿æˆ‘ä»¬å¯ä»¥æ§åˆ¶ resolve</span>
  <span class="hljs-keyword">let</span> taskResolve = <span class="hljs-literal">null</span>;
  getTokenTask = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> {
    taskResolve = resolve;
  });
  <span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// 4. æ‰§è¡Œå®é™…çš„å¼‚æ­¥æ“ä½œ</span>
    <span class="hljs-keyword">const</span> token = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchTokenFromServer</span>();
    
    <span class="hljs-comment">// 5. ç¼“å­˜ç»“æœ</span>
    <span class="hljs-title function_">saveTokenToStorage</span>(token);
    
    <span class="hljs-keyword">return</span> token;
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è·å– Token å¤±è´¥'</span>, error);
    <span class="hljs-keyword">throw</span> error; <span class="hljs-comment">// å‘ä¸Šä¼ é€’é”™è¯¯ï¼Œè®©è°ƒç”¨æ–¹å†³å®šå¦‚ä½•å¤„ç†</span>
  } <span class="hljs-keyword">finally</span> {
    <span class="hljs-comment">// 6. å…³é”®ï¼šæ— è®ºæˆåŠŸè¿˜æ˜¯å¤±è´¥ï¼Œéƒ½è¦é€šçŸ¥ç­‰å¾…çš„ Promise å¹¶é‡Šæ”¾é”</span>
    <span class="hljs-keyword">if</span> (taskResolve) {
      <span class="hljs-comment">// è·å–å½“å‰æœ€æ–°çš„ token (å¯èƒ½åœ¨ try å—ä¸­å·²ç»å­˜å…¥ï¼Œä¹Ÿå¯èƒ½ä¸ºç©º)</span>
      <span class="hljs-keyword">const</span> currentToken = <span class="hljs-title function_">getTokenFromStorage</span>();
      <span class="hljs-title function_">taskResolve</span>(currentToken);
    }
    
    <span class="hljs-comment">// é‡ç½®çŠ¶æ€ï¼Œå…è®¸ä¸‹ä¸€æ¬¡æ–°çš„è¯·æ±‚å‘èµ·</span>
    isGettingToken = <span class="hljs-literal">false</span>; 
    getTokenTask = <span class="hljs-literal">null</span>;
  }
}
</code></pre>
<h2 data-id="heading-3">ğŸ’¡ æ ¸å¿ƒè®¾è®¡ç‚¹è§£æ</h2>
<h3 data-id="heading-4">1. ä¸ºä»€ä¹ˆè¦è¿”å› Promise è€Œä¸æ˜¯ç­‰å¾…Â <code>await</code>Â åè¿”å›ç»“æœï¼Ÿ</h3>
<p>è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆé€šè¿‡Â <code>if (isGettingToken) return getTokenTask</code>Â ç›´æ¥è¿”å› Promise å¯¹è±¡ã€‚è¿™æ ·ï¼Œä¸‰ä¸ªå¹¶å‘çš„è°ƒç”¨è€…Â <code>await getSharedToken()</code>Â å®é™…ä¸Šæ˜¯åœ¨ç­‰å¾…åŒä¸€ä¸ª Promise å¯¹è±¡ resolveã€‚ä¸€æ—¦ Leader è¯·æ±‚å®Œæˆï¼Œä¸‰ä¸ªè°ƒç”¨è€…ä¼šåŒæ—¶å¾—åˆ°é€šçŸ¥ã€‚</p>
<h3 data-id="heading-5">2. Try...Finally çš„é‡è¦æ€§</h3>
<p>å¹¶å‘æ§åˆ¶ä¸­æœ€æ€•çš„æ˜¯Â  <strong>"æ­»é”"</strong> ã€‚å¦‚æœ API è¯·æ±‚æŠ›å‡ºå¼‚å¸¸ï¼Œè€Œä½ å¿˜è®°åœ¨Â <code>catch</code>Â å—ä¸­æŠŠÂ <code>isGettingToken</code>Â è®¾ç½®å›Â <code>false</code>ï¼Œé‚£ä¹ˆæ•´ä¸ªåº”ç”¨çš„ç›¸å…³åŠŸèƒ½å°±ä¼šæ°¸ä¹…å¡æ­»ã€‚ ä½¿ç”¨Â <code>finally</code>Â å—å¯ä»¥ä¿è¯æ— è®ºä»£ç è·¯å¾„å¦‚ä½•ï¼ˆæ­£å¸¸è¿”å›ã€æŠ›å‡ºé”™è¯¯ã€ç”šè‡³æ—©é€€ï¼‰ï¼Œé”ä¸€å®šä¼šè¢«é‡Šæ”¾ã€‚</p>
<h3 data-id="heading-6">3. ä¸è¦ä¸ºæ¯ä¸ªè¯·æ±‚åˆ›å»ºç¼“å­˜ Map</h3>
<p>æœ‰äº›å¼€å‘è€…ä¼šæƒ³ï¼š"æˆ‘æ˜¯ä¸æ˜¯åº”è¯¥ç”¨ä¸€ä¸ª Mapï¼Œæ ¹æ® Request ID æ¥ç¼“å­˜ï¼Ÿ" å¯¹äº Token è¿™ç§Â <strong>å…¨å±€å…±äº«èµ„æº</strong>ï¼Œä¸éœ€è¦ã€‚å› ä¸ºæ— è®ºè°å‘èµ·çš„è¯·æ±‚ï¼Œä»–ä»¬è¦çš„éƒ½æ˜¯åŒä¸€ä¸ªä¸œè¥¿ã€‚Map åªä¼šå¢åŠ å†…å­˜æ³„æ¼çš„é£é™©å’Œç®¡ç†çš„å¤æ‚åº¦ã€‚</p>
<h2 data-id="heading-7">æ€»ç»“</h2>
<p>åœ¨é«˜å¹¶å‘çš„å‰ç«¯åœºæ™¯ä¸‹ï¼Œ<strong>å…±äº«èµ„æºçš„å•ä¾‹ Promise æ¨¡å¼</strong>Â æ˜¯æ€§ä»·æ¯”æé«˜çš„ä¼˜åŒ–æ‰‹æ®µã€‚å®ƒç”¨æå°‘çš„ä»£ç æˆæœ¬ï¼Œå®ç°äº†ï¼š</p>
<ul>
<li><strong>æµé‡èŠ‚çœ</strong>ï¼šN ä¸ªå¹¶å‘è¯·æ±‚åªéœ€ 1 æ¬¡ç½‘ç»œè°ƒç”¨ã€‚</li>
<li><strong>é«˜æ€§èƒ½</strong>ï¼šæ‰€æœ‰è¯·æ±‚å‡ ä¹åŒæ—¶å¾—åˆ°å“åº”ï¼Œæ²¡æœ‰é˜»å¡ã€‚</li>
<li><strong>é«˜å¥å£®æ€§</strong>ï¼šå¼‚å¸¸æƒ…å†µä¸‹ä¹Ÿèƒ½è‡ªåŠ¨æ¢å¤ï¼Œä¸ä¼šå¡æ­»ã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[SpringBootå¼€å‘å¿…çŸ¥çš„5ä¸ªé«˜æ•ˆæŠ€å·§ï¼Œæ–°æ‰‹è€æ‰‹éƒ½è¯¥çœ‹çœ‹ï¼]]></title>    <link>https://juejin.cn/post/7602073973309849615</link>    <guid>https://juejin.cn/post/7602073973309849615</guid>    <pubDate>2026-02-03T00:18:01.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602073973309849615" data-draft-id="7602072652607569960" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="SpringBootå¼€å‘å¿…çŸ¥çš„5ä¸ªé«˜æ•ˆæŠ€å·§ï¼Œæ–°æ‰‹è€æ‰‹éƒ½è¯¥çœ‹çœ‹ï¼"/> <meta itemprop="keywords" content="åç«¯,å‰ç«¯,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-02-03T00:18:01.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿æ©™çš„ç™¾å®ç®±"/> <meta itemprop="url" content="https://juejin.cn/user/1638743356481367"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            SpringBootå¼€å‘å¿…çŸ¥çš„5ä¸ªé«˜æ•ˆæŠ€å·§ï¼Œæ–°æ‰‹è€æ‰‹éƒ½è¯¥çœ‹çœ‹ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1638743356481367/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿æ©™çš„ç™¾å®ç®±
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-03T00:18:01.000Z" title="Tue Feb 03 2026 00:18:01 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    21
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>SpringBootå¼€å‘å¿…çŸ¥çš„5ä¸ªé«˜æ•ˆæŠ€å·§ï¼Œæ–°æ‰‹è€æ‰‹éƒ½è¯¥çœ‹çœ‹ï¼</strong></h2>
<h2 data-id="heading-1">å¼•è¨€</h2>
<p>SpringBootä½œä¸ºJavaç”Ÿæ€ä¸­æœ€æµè¡Œçš„å¾®æœåŠ¡æ¡†æ¶ä¹‹ä¸€ï¼Œå‡­å€Ÿå…¶"çº¦å®šä¼˜äºé…ç½®"çš„ç†å¿µå’Œå¼ºå¤§çš„è‡ªåŠ¨åŒ–èƒ½åŠ›ï¼Œæå¤§åœ°ç®€åŒ–äº†Springåº”ç”¨çš„å¼€å‘å’Œéƒ¨ç½²ã€‚ç„¶è€Œï¼Œåœ¨å®é™…é¡¹ç›®ä¸­ï¼Œè®¸å¤šå¼€å‘è€…ï¼ˆå°¤å…¶æ˜¯æ–°æ‰‹ï¼‰å¾€å¾€åªåœç•™åœ¨åŸºç¡€ç”¨æ³•ä¸Šï¼Œæœªèƒ½å……åˆ†å‘æŒ¥SpringBootçš„æ½œåŠ›ã€‚æœ¬æ–‡å°†åˆ†äº«5ä¸ªç»è¿‡å®æˆ˜éªŒè¯çš„é«˜æ•ˆæŠ€å·§ï¼Œæ¶µç›–é…ç½®ä¼˜åŒ–ã€æ€§èƒ½è°ƒä¼˜ã€è°ƒè¯•æ‰‹æ®µç­‰æ–¹é¢ï¼Œå¸®åŠ©å¼€å‘è€…æå‡å¼€å‘æ•ˆç‡å’Œåº”ç”¨è´¨é‡ã€‚æ— è®ºä½ æ˜¯åˆšæ¥è§¦SpringBootçš„æ–°æ‰‹è¿˜æ˜¯ç»éªŒä¸°å¯Œçš„è€æ‰‹ï¼Œè¿™äº›æŠ€å·§éƒ½èƒ½ä¸ºä½ çš„é¡¹ç›®å¸¦æ¥å®è´¨æ€§çš„æ”¹è¿›ã€‚</p>
<hr/>
<h2 data-id="heading-2">ä¸€ã€åˆç†ä½¿ç”¨@ConfigurationPropertieså®ç°ç±»å‹å®‰å…¨é…ç½®</h2>
<h3 data-id="heading-3">é—®é¢˜èƒŒæ™¯</h3>
<p>ä¼ ç»Ÿçš„<code>@Value</code>æ³¨è§£è™½ç„¶ç®€å•ï¼Œä½†åœ¨å¤„ç†å¤æ‚é…ç½®æ—¶ä¼šå¯¼è‡´ä»£ç åˆ†æ•£ä¸”ç¼ºä¹ç±»å‹å®‰å…¨ã€‚ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Value("${app.mail.host}")</span>
<span class="hljs-keyword">private</span> String mailHost;
<span class="hljs-meta">@Value("${app.mail.port}")</span>
<span class="hljs-keyword">private</span> <span class="hljs-type">int</span> mailPort;
<span class="hljs-comment">// æ›´å¤šå­—æ®µ...</span>
</code></pre>
<h3 data-id="heading-4">è§£å†³æ–¹æ¡ˆ</h3>
<p>ä½¿ç”¨<code>@ConfigurationProperties</code>å°†ç›¸å…³é…ç½®åˆ†ç»„å¹¶ç»‘å®šåˆ°POJOï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@ConfigurationProperties(prefix = "app.mail")</span>
<span class="hljs-meta">@Data</span> <span class="hljs-comment">// Lombokæ³¨è§£</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MailProperties</span> {
    <span class="hljs-keyword">private</span> String host;
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> port;
    <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> sslEnabled;
    <span class="hljs-comment">// å¸¦æœ‰é»˜è®¤å€¼</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">timeout</span> <span class="hljs-operator">=</span> <span class="hljs-number">5000</span>; 
}
</code></pre>
<h3 data-id="heading-5">ä¼˜åŠ¿åˆ†æ</h3>
<ol>
<li><strong>å¼ºç±»å‹æ ¡éªŒ</strong>ï¼šå¯åŠ¨æ—¶è‡ªåŠ¨éªŒè¯é…ç½®é¡¹çš„ç±»å‹å’Œå¿…å¡«é¡¹ï¼ˆé…åˆ<code>@Validated</code>ä½¿ç”¨ï¼‰</li>
<li><strong>IDEæ”¯æŒ</strong>ï¼šæ™ºèƒ½æç¤ºå’Œè‡ªåŠ¨è¡¥å…¨ï¼ˆéœ€æ·»åŠ spring-boot-configuration-processorä¾èµ–ï¼‰</li>
<li><strong>é‡æ„å‹å¥½</strong>ï¼šä¿®æ”¹é…ç½®å‰ç¼€åªéœ€è°ƒæ•´ä¸€å¤„</li>
<li><strong>æ–‡æ¡£ç”Ÿæˆ</strong>ï¼šç»“åˆspring-configuration-metadata.jsonå¯ç”Ÿæˆé…ç½®æ–‡æ¡£</li>
</ol>
<blockquote>
<p><strong>ä¸“å®¶æç¤º</strong>ï¼šå¯¹äºå¤šç¯å¢ƒé…ç½®ï¼Œå¯ä»¥ç»“åˆProfile-specificçš„propertiesæ–‡ä»¶ä½¿ç”¨æ­¤æŠ€æœ¯ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-6">äºŒã€åˆ©ç”¨Actuator+Micrometeræ„å»ºç”Ÿäº§çº§ç›‘æ§</h2>
<h3 data-id="heading-7">æ ¸å¿ƒç»„ä»¶è¯´æ˜</h3>
<ul>
<li><strong>Spring Boot Actuator</strong>ï¼šæä¾›å¥åº·æ£€æŸ¥ã€metricsã€ç¯å¢ƒä¿¡æ¯ç­‰ç«¯ç‚¹</li>
<li><strong>Micrometer</strong>ï¼šæŒ‡æ ‡æ”¶é›†çš„å‚å•†ä¸­ç«‹æ¥å£ï¼ˆæ”¯æŒPrometheus, Datadogç­‰ï¼‰</li>
</ul>
<h3 data-id="heading-8">å…³é”®é…ç½®æ­¥éª¤</h3>
<ol>
<li>æ·»åŠ ä¾èµ–ï¼š</li>
</ol>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-actuator<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.micrometer<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>micrometer-registry-prometheus<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<ol start="2">
<li>application.ymlé…ç½®ç¤ºä¾‹ï¼š</li>
</ol>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">management:</span>
  <span class="hljs-attr">endpoints:</span>
    <span class="hljs-attr">web:</span>
      <span class="hljs-attr">exposure:</span>
        <span class="hljs-attr">include:</span> <span class="hljs-string">health,metrics,prometheus</span>
  <span class="hljs-attr">metrics:</span>
    <span class="hljs-attr">tags:</span>
      <span class="hljs-attr">application:</span> <span class="hljs-string">${spring.application.name}</span>
</code></pre>
<h3 data-id="heading-9">é«˜é˜¶æŠ€å·§</h3>
<ul>
<li><strong>è‡ªå®šä¹‰æŒ‡æ ‡</strong>ï¼šé€šè¿‡MeterRegistryè®°å½•ä¸šåŠ¡æŒ‡æ ‡</li>
</ul>
<pre><code class="hljs language-java" lang="java">registry.counter(<span class="hljs-string">"order.created"</span>, <span class="hljs-string">"region"</span>, <span class="hljs-string">"north"</span>).increment();
</code></pre>
<ul>
<li><strong>JVMç›‘æ§</strong>ï¼šè‡ªåŠ¨æš´éœ²çº¿ç¨‹/å†…å­˜/GCç­‰æ•°æ®ï¼ˆGrafanaä»ªè¡¨æ¿å¯ç›´æ¥å¯¼å…¥4701æ¨¡æ¿ï¼‰</li>
<li><strong>åˆ†å¸ƒå¼è¿½è¸ª</strong>ï¼šé›†æˆSleuth+Zipkinå®ç°è¯·æ±‚é“¾è·¯è¿½è¸ª</li>
</ul>
<hr/>
<h2 data-id="heading-10">ä¸‰ã€æŒæ¡æ¡ä»¶åŒ–Beanæ³¨å†Œç­–ç•¥</h2>
<h3 data-id="heading-11">@Conditionalç³»åˆ—æ³¨è§£ç²¾è¦</h3>

























<table><thead><tr><th>æ³¨è§£</th><th>ç”Ÿæ•ˆæ¡ä»¶</th></tr></thead><tbody><tr><td><code>@ConditionalOnProperty</code></td><td>æŒ‡å®šé…ç½®å­˜åœ¨ä¸”åŒ¹é…å€¼æ—¶ç”Ÿæ•ˆ</td></tr><tr><td><code>@ConditionalOnClass</code></td><td>classpathä¸­å­˜åœ¨æŒ‡å®šç±»æ—¶ç”Ÿæ•ˆ</td></tr><tr><td><code>@ConditionalOnMissingBean</code></td><td>IOCå®¹å™¨ä¸­ä¸å­˜åœ¨æŒ‡å®šBeanæ—¶ç”Ÿæ•ˆ</td></tr><tr><td><code>@ConditionalOnWebApplication</code></td><td>Webç¯å¢ƒä¸‹ç”Ÿæ•ˆ</td></tr></tbody></table>
<h3 data-id="heading-12">å®æˆ˜æ¡ˆä¾‹ï¼šå¤šç¼“å­˜æ–¹æ¡ˆåŠ¨æ€åˆ‡æ¢</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CacheConfig</span> {

    <span class="hljs-meta">@Bean</span>
    <span class="hljs-meta">@ConditionalOnProperty(name = "cache.type", havingValue = "redis")</span>
    <span class="hljs-keyword">public</span> CacheService <span class="hljs-title function_">redisCache</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RedisCacheService</span>();
    }

    <span class="hljs-meta">@Bean</span>
    <span class="hljs-meta">@ConditionalOnProperty(name = "cache.type", havingValue = "caffeine")</span>
    <span class="hljs-keyword">public</span> CacheService <span class="hljs-title function_">caffeineCache</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">CaffeineCacheService</span>();
    }
}
</code></pre>
<h3 data-id="heading-13">æœ€ä½³å®è·µå»ºè®®</h3>
<ol>
<li><strong>ç»„åˆæ¡ä»¶</strong>ï¼šé€šè¿‡<code>AnyNestedCondition</code>ç­‰æŠ½è±¡ç±»å®ç°å¤æ‚é€»è¾‘</li>
<li><strong>è‡ªå®šä¹‰æ¡ä»¶</strong>ï¼šç»§æ‰¿<code>SpringBootCondition</code>é‡å†™getMatchOutcomeæ–¹æ³•</li>
<li><strong>è°ƒè¯•æŠ€å·§</strong>ï¼šå¯åŠ¨æ—¶æ·»åŠ <code>--debug</code>å‚æ•°æŸ¥çœ‹æ¡ä»¶è¯„ä¼°æŠ¥å‘Š</li>
</ol>
<hr/>
<h2 data-id="heading-14">å››ã€ä¼˜åŒ–å¯åŠ¨é€Ÿåº¦çš„å®ç”¨æ–¹æ¡ˆ</h2>
<h3 data-id="heading-15">è€—æ—¶åˆ†æå·¥å…·æ¨è</h3>
<ol>
<li><strong>å®˜æ–¹æ–¹å¼</strong>ï¼šæ·»åŠ JVMå‚æ•° <code>-Ddebug=true -Dspring-boot.run.profiles=timing</code></li>
<li><strong>å¯è§†åŒ–å·¥å…·</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fspring-projects%2Fspring-boot%2Fissues%2F19378" target="_blank" title="https://github.com/spring-projects/spring-boot/issues/19378" ref="nofollow noopener noreferrer">Spring Boot Startup Report</a></li>
</ol>
<h3 data-id="heading-16">å·²éªŒè¯çš„åŠ é€Ÿç­–ç•¥</h3>
<h4 data-id="heading-17">A. JVMå±‚é¢ä¼˜åŒ–</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># OpenJDKæ¨èå‚æ•°ï¼ˆæ¨¡å—åŒ–ç²¾ç®€ï¼‰</span>
-javaagent:springloaded.jar -noverify 
-Djdk.module.illegalAccess.silent=<span class="hljs-literal">true</span>
-Xms256m -Xmx256m <span class="hljs-comment">#é¿å…å †å¤§å°åŠ¨æ€è°ƒæ•´</span>
</code></pre>
<h4 data-id="heading-18">B. SpringBootç‰¹å®šä¼˜åŒ–é¡¹</h4>
<ol>
<li><strong>å»¶è¿Ÿåˆå§‹åŒ–æ¨¡å¼</strong>(éœ€æƒè¡¡é¦–æ¬¡è¯·æ±‚å“åº”æ—¶é—´)ï¼š</li>
</ol>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">spring:</span>
  <span class="hljs-attr">main:</span>
    <span class="hljs-attr">lazy-initialization:</span> <span class="hljs-literal">true</span> 
</code></pre>
<ol start="2">
<li><strong>æ’é™¤è‡ªåŠ¨è£…é…ç±»</strong>(é€šè¿‡spring.autoconfigure.exclude)ï¼š</li>
</ol>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">spring.autoconfigure.exclude=org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration</span>
</code></pre>
<ol start="3">
<li><strong>ç»„ä»¶æ‰«æèŒƒå›´æ§åˆ¶</strong>(ç²¾ç¡®æŒ‡å®šbasePackages)ï¼š</li>
</ol>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@ComponentScan(basePackages = "com.your.package")</span>
</code></pre>
<h4 data-id="heading-19">C. Classpathç˜¦èº«æ–¹æ¡ˆ</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># Mavenå‘½ä»¤åˆ†æä¾èµ–æ ‘(è¿‡æ»¤provided/test)</span>
mvn dependency:tree -Dincludes=org.springframework*
</code></pre>
<hr/>
<h2 data-id="heading-20">äº”ã€é«˜æ•ˆçƒ­éƒ¨ç½²ä¸å®æ—¶è°ƒè¯•æŠ€å·§</h2>
<h3 data-id="heading-21">DevToolsæ·±åº¦åº”ç”¨æŒ‡å—</h3>
<h4 data-id="heading-22">A. ClassåŠ è½½æœºåˆ¶åŸç†å›¾</h4>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-selector-attr">[å˜æ›´æ£€æµ‹]</span> â†’ <span class="hljs-selector-attr">[é‡å¯ç±»åŠ è½½å™¨]</span> â†’ <span class="hljs-selector-attr">[éš”ç¦»çš„åº”ç”¨ç±»åŠ è½½å™¨]</span>
              â†‘               â†“ 
          (ç¬¬ä¸‰æ–¹åº“ä¸å˜)   (ä¸šåŠ¡ç±»é‡æ–°åŠ è½½)
</code></pre>
<h4 data-id="heading-23">B. application.ymlä¸“å±é…ç½®é¡¹</h4>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">spring:</span>
 <span class="hljs-attr">devtools:</span>
   <span class="hljs-attr">restart:</span>
     <span class="hljs-attr">enabled:</span> <span class="hljs-literal">true</span> 
     <span class="hljs-attr">exclude:</span> <span class="hljs-string">static/**</span> <span class="hljs-comment">#å¿½ç•¥èµ„æºç›®å½•å˜æ›´è§¦å‘é‡å¯ </span>
     <span class="hljs-attr">poll-interval:</span> <span class="hljs-string">2s</span> <span class="hljs-comment">#è½®è¯¢é—´éš”(å¯¹éIDEåœºæ™¯é‡è¦)</span>
   <span class="hljs-attr">livereload:</span>
     <span class="hljs-attr">enabled:</span> <span class="hljs-literal">true</span> <span class="hljs-comment">#æµè§ˆå™¨è‡ªåŠ¨åˆ·æ–°(éœ€é…åˆæ’ä»¶)</span>
</code></pre>
<h4 data-id="heading-24">C. JRebelé«˜çº§æ›¿ä»£æ–¹æ¡ˆå¯¹æ¯”è¡¨</h4>






























<table><thead><tr><th>Feature</th><th>DevTools</th><th>JRebel</th></tr></thead><tbody><tr><td>Classé‡è½½</td><td>âœ“</td><td>âœ“</td></tr><tr><td>Beanå®šä¹‰æ›´æ–°</td><td>âœ—</td><td>âœ“</td></tr><tr><td>XMLçƒ­æ›´æ–°</td><td>âœ—</td><td>âœ“</td></tr><tr><td>Annotationså˜åŒ–å¤„ç†</td><td>âœ—</td><td>âœ“</td></tr></tbody></table>
<blockquote>
<p><strong>æ€§èƒ½æ•°æ®å®æµ‹</strong>ï¼š(i7-11800H + SSDç¯å¢ƒ) DevToolså†·å¯å¹³å‡800ms vs JRebelå¹³å‡200ms</p>
</blockquote>
<hr/>
<h2 data-id="heading-25">Conclusion</h2>
<p>æœ¬æ–‡æ·±å…¥æ¢è®¨çš„äº”ä¸ªç»´åº¦â€”â€”ç±»å‹å®‰å…¨é…ç½®(<code>@ConfigurationProperties</code>) ã€ç”Ÿäº§å¯è§‚æµ‹æ€§(Actuator+Micrometer)ã€æ¡ä»¶åŒ–è£…é…ç­–ç•¥(<code>@Conditional</code>) ã€å¯åŠ¨é€Ÿåº¦ä¼˜åŒ–ä»¥åŠçƒ­éƒ¨ç½²å®è·µ(DevTools/JRebel)â€”â€”æ„æˆäº†SpringBooté«˜æ•ˆå¼€å‘çš„åŸºçŸ³ã€‚è¿™äº›æŠ€æœ¯ä¸æ˜¯å­¤ç«‹çš„çŸ¥è¯†ç‚¹ï¼Œè€Œæ˜¯éœ€è¦æ ¹æ®å®é™…é¡¹ç›®éœ€æ±‚è¿›è¡Œæœ‰æœºç»„åˆçš„ç³»ç»Ÿå·¥ç¨‹ã€‚</p>
<p>ç‰¹åˆ«å¼ºè°ƒçš„æ˜¯ï¼š</p>
<p>1ï¸âƒ£ <em>å¯¹äºæ–°é¡¹ç›®</em> ï¼šå»ºè®®ä»ç¬¬ä¸€å¤©å°±é›†æˆActuatorç›‘æ§å’ŒMetricæ”¶é›†ä½“ç³»</p>
<p>2ï¸âƒ£ <em>å¯¹äºé—ç•™ç³»ç»Ÿè¿ç§»</em> ï¼šä¼˜å…ˆè€ƒè™‘é€šè¿‡æ¡ä»¶åŒ–Beanå®ç°å¹³æ»‘è¿‡æ¸¡</p>
<p>3ï¸âƒ£ <em>å›¢é˜Ÿåä½œåœºæ™¯</em> ï¼šç»Ÿä¸€DevToolsæˆ–JRebelçš„çƒ­éƒ¨ç½²æ–¹æ¡ˆèƒ½æ˜¾è‘—æå‡ååŒæ•ˆç‡</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸€ç§è½»é‡çº§è¿›ç¨‹é—´æœåŠ¡éš”ç¦»æ–¹æ³•å®è·µ]]></title>    <link>https://juejin.cn/post/7602188264115306511</link>    <guid>https://juejin.cn/post/7602188264115306511</guid>    <pubDate>2026-02-03T10:45:11.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602188264115306511" data-draft-id="7602216700747972608" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸€ç§è½»é‡çº§è¿›ç¨‹é—´æœåŠ¡éš”ç¦»æ–¹æ³•å®è·µ"/> <meta itemprop="keywords" content="ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2026-02-03T10:45:11.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="äº¬ä¸œäº‘å¼€å‘è€…"/> <meta itemprop="url" content="https://juejin.cn/user/2634854380340008"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸€ç§è½»é‡çº§è¿›ç¨‹é—´æœåŠ¡éš”ç¦»æ–¹æ³•å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2634854380340008/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    äº¬ä¸œäº‘å¼€å‘è€…
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-03T10:45:11.000Z" title="Tue Feb 03 2026 10:45:11 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ç³»ç»Ÿçš„å¤æ‚æ€§</h2>
<p>æˆ‘ä»¬å›¢é˜Ÿè´Ÿè´£çš„ç³»ç»Ÿæ˜¯åˆ†å¸ƒå¼å¾®æœåŠ¡éƒ¨ç½²æ¶æ„ï¼Œéšç€ä¸šåŠ¡çš„ä¸æ–­å‘å±•å£®å¤§å’Œå¤šæ¡çº¿åœºæ™¯åŒ–çš„æŒç»­å»ºè®¾ä¸°å¯Œï¼Œç³»ç»Ÿçš„ä¸šåŠ¡é€»è¾‘è¶Šæ¥è¶Šå¤šï¼ŒåŠŸèƒ½é€»è¾‘ä¹Ÿè¶Šæ¥è¶Šå¤æ‚ã€‚</p>
<p>ï»¿</p>
<h3 data-id="heading-1">ç³»ç»Ÿæ—©æœŸå•ä¸ªåº”ç”¨çš„ä¸€ä¸ªç”¨æˆ·æ•…äº‹åœ°å›¾</h3>
<p>ï»¿</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/77eb8d5b7a5b499eb0a68f2bba921796~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770720311&amp;x-signature=punYw5iRhe8%2FhxgLLoqj947jGSs%3D" alt="" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<p>ï»¿</p>
<h3 data-id="heading-2">ç³»ç»Ÿäº¤äº’</h3>
<p>ï»¿</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ed397964ee1f42ccadf1ca50ace0e55f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770720311&amp;x-signature=Tq9T1jyCXWgXoEBwDLP9UepAVyo%3D" alt="" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<p>ï»¿</p>
<p>ï»¿</p>
<p>ï»¿</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9e505874bd1d469ba518d3b180e30cfe~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770720311&amp;x-signature=LfbGMb3ZkYMBiFOJM%2Byk%2BOPspOU%3D" alt="" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<p>ï»¿</p>
<p>ï»¿</p>
<h3 data-id="heading-3">ç‰©ç†æ¨¡å‹ï¼ˆåº“è¡¨ï¼‰çš„å¤æ‚æ€§</h3>
<p>ï»¿</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9c6ef7725857482f80ad2e298c3dd60f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770720311&amp;x-signature=EQ3%2FbJKCZtaZ67ZvUscJW65ZfQk%3D" alt="" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<p>ï»¿</p>
<h3 data-id="heading-4">ä¸€ä¸ªå­ç³»ç»Ÿçš„ä»£ç æ²‰æ·€</h3>
<p>ï»¿</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d783aa32b3294b5a8cb2cc440d3c45ad~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770720311&amp;x-signature=dOUD5lqX6WFreOGRrh7%2BLa%2BX8y0%3D" alt="" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<p>ï»¿</p>
<p>ï»¿</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0b896831ad0a40fba2779abbc35f4c53~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770720311&amp;x-signature=zV9qYM7pFqfd0xAbM0gyI0Orc%2Bo%3D" alt="" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<p>ï»¿</p>
<p>åœ¨åº”ç”¨éƒ¨ç½²æ–¹é¢ï¼Œç›®å‰ç°çŠ¶æˆ‘ä»¬çš„ä¸€ä¸ªåº”ç”¨å¯¹åº”ä¸€ä¸ªcodingä»£ç åœ°å€ï¼Œéƒ¨ç½²ä»¥ä¸€ä¸ªåº”ç”¨ä¸ºå•ä½å‘èµ·éƒ¨ç½²ç”³è¯·ï¼Œåº”ç”¨ä¸‹æœ‰å¤šä¸ªé›†ç¾¤ï¼Œé›†ç¾¤ä¸‹æœ‰å¤šä¸ªåˆ†ç»„ï¼Œä¹ŸåŒºåˆ†ç°åº¦ç¯å¢ƒã€æ­£å¼çº¿ä¸Šç¯å¢ƒã€‚é€šè¿‡ä¸åŒçš„éƒ¨ç½²ç¼–æ’ï¼Œä½¿ç”¨ä¸åŒçš„ä»£ç ç‰ˆæœ¬éƒ¨ç½²ä¸åŒçš„ç¯å¢ƒã€‚</p>
<p>ï»¿</p>
<p>ç³»ç»Ÿçš„å¤æ‚æ€§æ¥è‡ªå¤šä¸ªæ–¹é¢ï¼šä¸šåŠ¡æµç¨‹å¤æ‚æ€§ã€æ¶æ„å¤æ‚æ€§ã€ä»£ç å®ç°å¤æ‚æ€§ã€ç‰©ç†æ¨¡å‹ï¼ˆåº“è¡¨ï¼‰çš„å¤æ‚æ€§ã€ç›‘æ§è¿ç»´çš„å¤æ‚æ€§ç­‰ã€‚æœ¬æ–‡é‡ç‚¹ä¸æ˜¯ç³»ç»Ÿå¤æ‚æ€§çš„æ²»ç†ï¼Œè€Œæ˜¯åœ¨ç°æœ‰åŸºç¡€ä¸Šï¼Œå¦‚ä½•ä½æˆæœ¬è½»é‡çº§æ–¹å¼æœåŠ¡éš”ç¦»ï¼Œåœ¨å¤§ä¿ƒä¸ºç³»ç»Ÿçš„ç¨³å®šæ€§ä¸­å‘æŒ¥ä½œç”¨ã€‚</p>
<p>ï»¿</p>
<p>ä¸€ä¸ªå®¹å™¨ä¸­éƒ¨ç½²çš„åº”ç”¨è¿›ç¨‹å†…ï¼Œæä¾›äº†å„ç§å„æ ·çš„æœåŠ¡ï¼Œä»¥åœ¨åº“åº”ç”¨ä¸ºä¾‹ï¼ŒåŒ…å«äº†ç›˜ç‚¹ã€å˜æ›´ã€è¡¥è´§ã€ç§»åº“ã€ç›˜ç›ˆäºã€é¢„åŒ…ç­‰ç›¸å¯¹ç‹¬ç«‹çš„åŠŸèƒ½ï¼Œæ¯ä¸ªåŠŸèƒ½åˆæœ‰è‡ªå·±çš„å•æ®-ä»»åŠ¡-ç»“æœæ•´å¥—ä¸šåŠ¡æµç¨‹ã€‚æ—¢æœ‰RESTfulæœåŠ¡ï¼Œä¹Ÿæœ‰JSFæœåŠ¡ï¼Œè¿˜æœ‰MQæ¶ˆæ¯å¤„ç†ï¼Œå¦å¤–è¿˜æœ‰å®šæ—¶ä»»åŠ¡ã€‚è¿™äº›èµ„æºè™½æœ‰çº¿ç¨‹æ± éš”ç¦»ï¼Œä½†CPUã€å†…å­˜ç­‰èµ„æºä»æ˜¯å…±äº«èµ„æºï¼Œåœ¨è´Ÿè½½é«˜çš„æ—¶å€™ï¼Œæ¯”å¦‚CPUæ»¡è½½æˆ–å†…å­˜OOMæ—¶ï¼Œä¼šé€ æˆæœåŠ¡å¡é¡¿ï¼ŒRTæ—¶é—´é•¿ï¼Œå½±å“æœåŠ¡å“åº”å’ŒåŠŸèƒ½ä½¿ç”¨ã€‚</p>
<p>ï»¿</p>
<h2 data-id="heading-5">æ–¹æ¡ˆ</h2>
<h3 data-id="heading-6">æ–¹æ¡ˆä¸€ï¼šåº”ç”¨æ‹†åˆ†</h3>
<p>æŒ‰ä¸šåŠ¡åŸŸã€æŠ€æœ¯åŸŸå¯¹è¿›è¡Œæ‹†åˆ†ï¼Œæ¯”å¦‚åœ¨åº“åº”ç”¨æŒ‰ç›˜ç‚¹ã€å˜æ›´ã€ç§»åº“ã€è¡¥è´§ç­‰æ‹†åˆ†ä¸ºå•ç‹¬çš„åº”ç”¨ï¼Œä¸ä»…åº”ç”¨éƒ¨ç½²åšäº†æ‹†åˆ†ï¼Œå¯¹åº”çš„æ•°æ®åº“å±‚é¢ä¹ŸæŒ‰åŸŸè¿›è¡Œæ‹†åˆ†ï¼Œç›˜ç‚¹ç›¸å…³çš„è¡¨ï¼Œä¾‹å¦‚ç›˜ç‚¹å•ä¸»æ¡£ã€ç›˜ç‚¹å•æ˜ç»†ã€ç›˜ç‚¹ä»»åŠ¡ä¸»æ¡£ã€ç›˜ç‚¹ä»»åŠ¡æ˜ç»†ã€ç›˜ç‚¹ç»“æœç‹¬ç«‹åˆ°å•ç‹¬çš„åº“ä¸­ï¼Œå¯ä»¥æŒ‰é€»è¾‘åº“ç‹¬ç«‹ï¼Œä¹Ÿå¯ä»¥ç‹¬ç«‹åˆ°å•ç‹¬çš„æ•°æ®åº“å®ä¾‹ä¸­ï¼Œåè€…çš„éš”ç¦»æ•ˆæœæ›´å¥½ã€‚åœ¨ä»£ç å±‚é¢ï¼Œå¯ä»¥å°†åœ¨åº“codingæŒ‰åŸŸæ‹†åˆ†å‡ºæ¥å•ç‹¬çš„ä»£ç åº“ï¼Œä¹Ÿå¯ä»¥ä¸ç‹¬ç«‹ï¼Œä¿æŒå…±äº«ä»£ç åº“ï¼Œåªæ˜¯åœ¨ç¼–è¯‘æ—¶æŒ‰moudleè¿›è¡ŒæŒ‰éœ€é›†æˆï¼Œä¾‹å¦‚ä¸ºç›˜ç‚¹åº”ç”¨ç¼–è¯‘æ—¶ï¼ŒåŒ…å«ç›˜ç‚¹moudleã€å…¬å…±moduleï¼Œå…¶ä»–ä¸éœ€è¦çš„moudleï¼Œæ¯”å¦‚å˜æ›´moduleã€è¡¥è´§moduleåˆ™ä¸éœ€è¦å‚ä¸ç¼–è¯‘é›†æˆã€‚</p>
<p>ï»¿</p>
<h3 data-id="heading-7">æ–¹æ¡ˆäºŒï¼šä½¿ç”¨Hystrixè¿›è¡ŒæœåŠ¡éš”ç¦»</h3>
<p>Hystrix ä¸»è¦å®ç°çš„æ˜¯â€Œè¿›ç¨‹å†…éš”ç¦»â€Œï¼Œå…·ä½“æ¥è¯´ï¼Œå®ƒé€šè¿‡çº¿ç¨‹æ± éš”ç¦»å’Œä¿¡å·é‡éš”ç¦»ä¸¤ç§æœºåˆ¶ï¼Œåœ¨å•ä¸ªåº”ç”¨è¿›ç¨‹å†…éƒ¨å¯¹ä¾èµ–æœåŠ¡çš„è°ƒç”¨è¿›è¡Œèµ„æºéš”ç¦»å’Œæ•…éšœæ§åˆ¶â€Œã€‚</p>
<h4 data-id="heading-8">â€Œçº¿ç¨‹æ± éš”ç¦»â€Œ</h4>
<p>Hystrix ä¸ºæ¯ä¸ªä¾èµ–æœåŠ¡åˆ†é…ç‹¬ç«‹çš„çº¿ç¨‹æ± ï¼Œä¸åŒæœåŠ¡çš„è°ƒç”¨è¯·æ±‚åœ¨å„è‡ªçš„çº¿ç¨‹æ± ä¸­æ‰§è¡Œï¼Œé¿å…å› æŸä¸ªæœåŠ¡æ•…éšœæˆ–å»¶è¿Ÿè€—å°½æ•´ä¸ªåº”ç”¨çš„çº¿ç¨‹èµ„æºâ€Œï¼Œè¿™ç§éš”ç¦»æ–¹å¼ç±»ä¼¼äºâ€œèˆ±å£éš”ç¦»â€ï¼Œå°†æ•…éšœé™åˆ¶åœ¨ç‰¹å®šèŒƒå›´å†…â€Œã€‚</p>
<p>ï»¿</p>
<h4 data-id="heading-9">â€Œä¿¡å·é‡éš”ç¦»â€Œ</h4>
<p>é€šè¿‡æ§åˆ¶å¹¶å‘è¯·æ±‚çš„çº¿ç¨‹æ•°ï¼ˆä¿¡å·é‡é˜ˆå€¼ï¼‰å®ç°éš”ç¦»ï¼Œé€‚ç”¨äºè€—æ—¶çŸ­ã€å¹¶å‘é‡é«˜çš„åœºæ™¯ï¼ˆå¦‚è¯»ç¼“å­˜ï¼‰â€Œã€‚ä¿¡å·é‡éš”ç¦»æ˜¯åŒæ­¥é˜»å¡æ–¹å¼ï¼Œä¸æ¶‰åŠçº¿ç¨‹åˆ‡æ¢ï¼Œå¼€é”€è¾ƒä½â€Œã€‚</p>
<p>ï»¿</p>
<h3 data-id="heading-10">æ–¹æ¡ˆä¸‰ï¼šè½»é‡çº§è¿›ç¨‹é—´æœåŠ¡æœåŠ¡éš”ç¦»</h3>
<p>æ—¢ä¸æ‹†åˆ†åº”ç”¨ï¼Œä¹Ÿä¸éœ€è¦å¼•å…¥Sping Cloud Hystrixç»„ä»¶ï¼Œä¸ä¾µå…¥ä¸šåŠ¡ä»£ç ï¼Œåœ¨éƒ¨ç½²å±‚é¢å®ç°æœåŠ¡éš”ç¦»ï¼Œå±äºåº”ç”¨å†…åˆ†ç»„æœºå™¨å®ä¾‹éš”ç¦»ï¼Œä¹Ÿæ˜¯è¿›ç¨‹é—´æœåŠ¡éš”ç¦»ã€‚æ•°æ®åº“å’Œä»£ç åº“å±‚é¢ä¸éœ€è¦éš”ç¦»ï¼Œä»é‡‡ç”¨å…±äº«æ¨¡å¼ã€‚</p>
<p>ä»¥åœ¨åº“ä¸ºä¾‹ï¼Œä¸ºç›˜ç‚¹ã€è¡¥è´§ã€å˜æ›´ç­‰åˆ›å»ºä¸åŒçš„ä¸šåŠ¡åˆ†ç»„ï¼Œå½“ç„¶å¤„äºé«˜å¯ç”¨è€ƒè™‘ï¼Œä¼šä¸ºç›˜ç‚¹ã€è¡¥è´§ã€å˜æ›´ç­‰æ¯ä¸ªä¸šåŠ¡åˆ†ç»„ï¼Œåˆä¼šæ¨ªè·¨å¤šä¸ªæœºæˆ¿åˆ†ç»„ï¼Œä¸å¦‚ä¸­äº‘ä¿¡æœºæˆ¿åˆ†ç»„ã€æœ‰å­šæœºæˆ¿åˆ†ç»„ã€‚</p>
<p>ï»¿</p>
<p>æœ¬æ–‡æ¢ç´¢å®è·µçš„æ–¹æ¡ˆä¸‰ç¤ºæ„å›¾å¦‚ä¸‹ï¼š</p>
<p>ï»¿</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/841edfbd0b3647318728cdbc4be9cbd1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770720311&amp;x-signature=qGPtxKg26wGmApf0IcSIleJRo%2FQ%3D" alt="" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<p>ï»¿</p>
<h3 data-id="heading-11">æ–¹æ¡ˆç®€å•å¯¹æ¯”å’Œé€‰æ‹©</h3>









































<table><thead><tr><th><strong>æ–¹æ¡ˆ</strong></th><th><strong>éš”ç¦»ç²’åº¦</strong></th><th><strong>éš”ç¦»æ•ˆæœ</strong></th><th><strong>ä»£ç ä¾µå…¥æ€§</strong></th><th><strong>å®ç°æˆæœ¬</strong></th><th><strong>è½åœ°é£é™©</strong></th><th><strong>è½åœ°é€Ÿåº¦</strong></th></tr></thead><tbody><tr><td>æ–¹æ¡ˆä¸€ï¼šåº”ç”¨æ‹†åˆ†</td><td>åº”ç”¨é—´éš”ç¦»</td><td>é«˜</td><td>é«˜</td><td>é«˜</td><td>é«˜</td><td>æ…¢</td></tr><tr><td>æ–¹æ¡ˆäºŒï¼šä½¿ç”¨Hystrixè¿›è¡ŒæœåŠ¡éš”ç¦»</td><td>çº¿ç¨‹é—´éš”ç¦»</td><td>ä½</td><td>ä¸­</td><td>ä¸­</td><td>ä¸­</td><td>ä¸­</td></tr><tr><td>æ–¹æ¡ˆä¸‰ï¼šè½»é‡çº§è¿›ç¨‹é—´æœåŠ¡æœåŠ¡éš”ç¦»</td><td>è¿›ç¨‹é—´éš”ç¦»</td><td>ä¸­</td><td>ä½</td><td>ä½</td><td>ä½</td><td>å¿«</td></tr></tbody></table>
<p>ï»¿</p>
<p>æœ¬æ–‡æ—¨åœ¨æ¢ç´¢ä¸€ä¸ªè½»é‡çº§çš„è¿›ç¨‹çº§æœåŠ¡éš”ç¦»æ–¹æ³•ï¼ŒçŸ­å¹³å¿«ï¼Œæ˜“è½åœ°ï¼Œè§æ•ˆå¿«ï¼Œå¯ä»¥åœ¨å¤§ä¿ƒä¸­å¿«é€Ÿå‘æŒ¥ä½œç”¨ï¼Œä¿éšœç³»ç»Ÿçš„ç¨³å®šæ€§ã€‚</p>
<p>åœ¨æ–¹æ¡ˆé€‰æ‹©ä¸Šï¼Œæœ¬æ–‡é€‰æ‹©æ–¹æ¡ˆä¸‰è¿›è¡Œå®æ“è½åœ°ã€‚é€‰æ‹©æ–¹æ¡ˆä¸‰ï¼Œæ˜¯å› ä¸ºæ–¹æ¡ˆä¸‰å¾ˆç‰›å—ï¼Ÿä¸æ˜¯çš„ï¼Œç›¸æ¯”ä¹‹ä¸‹æ–¹æ¡ˆä¸€å’Œæ–¹æ¡ˆäºŒæ–¹æ¡ˆæ›´ä¸ºæˆç†Ÿï¼Œè¡Œä¸šè½åœ°ç»éªŒæ›´ä¸ºä¸°å¯Œã€‚</p>
<p>ä¹‹æ‰€ä»¥é€‰æ‹©æ–¹æ¡ˆä¸‰ï¼Œæ˜¯åœ¨ä¼—å¤šçš„å› ç´ è€ƒé‡ä¸­æŠ˜ä¸­é€‰æ‹©ï¼Œåœ¨ä¸åŒçš„åœºæ™¯ä¸‹ï¼Œé‡‡ç”¨åˆé€‚çš„æ–¹æ¡ˆè§£å†³ç›¸åº”çš„ç—›ç‚¹ï¼Œå¤Ÿç”¨ + 1ï¼Œeasy + 1ã€‚</p>
<p>æ–¹æ¡ˆäºŒå’Œä¸‰ä¹‹é—´å¹¶æ— å†²çªï¼Œå…¶å®å¯ä»¥ç»“åˆæ­é…ä½¿ç”¨ã€‚</p>
<p>ï»¿</p>
<h2 data-id="heading-12">å®æ“</h2>
<h3 data-id="heading-13">éš”ç¦»éƒ¨ç½²åˆ†ç»„</h3>
<p>é…ç½®é›†åˆ</p>
<p>é€šè¿‡é…ç½®é›†åˆï¼Œå®ç°åˆ†ç»„é—´å…±äº«é…ç½®ï¼Œæ–¹ä¾¿å¤šåˆ†ç»„ç®¡ç†ã€‚</p>
<p>ï»¿</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/412c1f699fb3488095955e8f6414e9da~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770720311&amp;x-signature=5TUJzy6rLn9gWLfvATZdRJQG13g%3D" alt="" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<p>ï»¿</p>
<p>ï»¿</p>
<p>è·¨æœºæˆ¿å¤šæœºæˆ¿éƒ¨ç½²</p>
<p>é€šè¿‡å¤šæœºæˆ¿éƒ¨ç½²å®ç°æœåŠ¡é«˜å¯ç”¨ã€‚</p>
<p>ï»¿</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8b8b2f77310045f68e35841fe3af0cb1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770720311&amp;x-signature=aarBbL%2FJT1FG6Rcyto%2FiI2LpNhw%3D" alt="" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<p>ï»¿</p>
<h3 data-id="heading-14">éš”ç¦»NPåŸŸå</h3>
<p>æŒ‰åŸŸéš”ç¦»çš„RESTfulï¼Œåˆ›å»ºå•ç‹¬çš„NPåŸŸåã€‚</p>
<p>ï»¿</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6df1f7d96c9a463e8642d0582324900b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770720311&amp;x-signature=AslAPY9D2n2Gs30%2BQvIYp3NFSJU%3D" alt="" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<p>ï»¿</p>
<p>ï»¿</p>
<p>ï»¿</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ddc01c0d0f1446c1aaa3ee518ce56089~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770720311&amp;x-signature=VEJSFrMrcT%2F5FbUv950l4cP1ipY%3D" alt="" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<p>ï»¿</p>
<p>ï»¿</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4307c2a34ade48d48c3d50c462c4c5e3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770720311&amp;x-signature=Or32upHCJa4Zewo5meEYViVpEnY%3D" alt="" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<p>ï»¿</p>
<h3 data-id="heading-15">NGINXæ‹†åˆ†æµé‡</h3>
<p>æ‹†åˆ†upstreamï¼ŒæŒ‰ç…§ä¸åŒåŸŸRESTfulæ–¹æ³•çš„è§„åˆ™è¿›è¡Œè·¯ç”±æ‹†åˆ†é…ç½®ã€‚</p>
<p>ï»¿</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/22f3b762331e4b2691fbf3814f86c10e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770720311&amp;x-signature=2KPYiQiRb4BBTeCMsufutHl0gNA%3D" alt="" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<p>ï»¿</p>
<p>ï»¿</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e6914810603d4b3ba8434e283afa7648~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770720311&amp;x-signature=%2FziMn5f89QrQFU%2FF3s3jVTiqZL4%3D" alt="" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<h3 data-id="heading-16">JSFæœåŠ¡éš”ç¦»</h3>
<p>åˆ«åæ‹†åˆ†ï¼Œé€šè¿‡åˆ«åéš”ç¦»æœåŠ¡ï¼Œè°ƒç”¨æ–¹æ— éœ€æ”¹åŠ¨ã€‚</p>
<p>ï»¿</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3bff9677f0ac4033903756c3ca05afc0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770720311&amp;x-signature=FMtvOgHDkWieTs7%2F%2F0L8jqRbBsk%3D" alt="" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<p>ï»¿</p>
<p>ï»¿</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/740ff0c882694018bed1aee648d11e98~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770720311&amp;x-signature=TZ87O9Gw8EaKFTxGAsiMKJXCsGY%3D" alt="" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<p>ï»¿</p>
<p>ï»¿</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0a02b702d21b41468bf310d6baef270b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770720311&amp;x-signature=k8UiNVGRShgJVYYmU%2BPTsfncZ%2Fs%3D" alt="" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<p>éšç€æœåŠ¡éš”ç¦»ï¼ŒåŒæ—¶å…¼é¡¾æœºå™¨èµ„æºåˆ©ç”¨ç‡ï¼Œæ‹†åˆ†åçš„å•åŸŸå†…æœºå™¨æ•°é‡å°‘äºæ‹†åˆ†å‰æœºå™¨æ•°é‡ï¼ŒJSFä¸šåŠ¡çº¿ç¨‹æ± å¤§å°å¯é€‚å½“è°ƒå¤§ï¼ŒJSFçš„å•æœºé™æµé˜ˆå€¼ä¹Ÿé€‚å½“è°ƒå¤§ã€‚</p>
<p>ï»¿</p>
<h3 data-id="heading-17">MQæ¶ˆæ¯é˜Ÿåˆ—éš”ç¦»</h3>
<p>åœ¨å˜æ›´çš„ymlä¸­ï¼Œåªä¿ç•™å˜æ›´ç›¸å…³çš„TOPICï¼Œå…¶ä»–ç½®ä¸ºNONEã€‚</p>
<p>ï»¿</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7c3aebfe1b1b47fda66540a08aa3bcf9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770720311&amp;x-signature=otDvQ0LECL2jXh3S1A2%2FdgY%2BGdY%3D" alt="" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<p>ï»¿</p>
<p>åœ¨ç›˜ç‚¹çš„ymlä¸­ï¼Œåªä¿ç•™ç›˜ç‚¹ç›¸å…³çš„TOPICï¼Œå…¶ä»–ç½®ä¸ºNONEã€‚</p>
<p>ï»¿</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2a67f64be9dc48ab9ea27f6ab0be64eb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770720311&amp;x-signature=oE3y06n9NAI3s0sBwR7BN7wMFu0%3D" alt="" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<p>ï»¿</p>
<p>å…¶ä»–åˆ†ç»„æŒ‰æ­¤è°ƒæ•´é…ç½®ã€‚</p>
<p>ï»¿</p>
<h2 data-id="heading-18">è½åœ°æ•ˆæœ</h2>
<h3 data-id="heading-19">RESTFulæœåŠ¡</h3>
<p>å¯¹åº”çš„logbookè‡ªç„¶åœ°æŒ‰åŸŸæ‹†åˆ†ï¼Œæ–¹ä¾¿æŸ¥è¯¢å®šä½æµé‡æœºå™¨ã€‚</p>
<p>ï»¿</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5421c33b9cf04d0099a1036d0abf5b18~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770720311&amp;x-signature=SbgoyT0A2ZYXLjHIm4ePzTzKe7w%3D" alt="" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<p>ï»¿</p>
<p>ï»¿</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/38e1a7c58722454bb669ee6dd4ceb24b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770720311&amp;x-signature=MrfaLsz6EGrEktWnzbWeQy%2BCiJE%3D" alt="" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<p>ï»¿</p>
<h3 data-id="heading-20">JSFæœåŠ¡</h3>
<p>é€šè¿‡éš”ç¦»çš„JSFåˆ«åå®ç°æµé‡è·¯ç”±åˆ°çš„æœºå™¨ã€‚</p>
<p>ï»¿</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ed47ad3963f1473aaa1dab8687758578~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770720311&amp;x-signature=ZhbNuPq9oAld7B4i4WORAspQqPA%3D" alt="" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<p>ï»¿</p>
<h2 data-id="heading-21">æœªæ¥æ¼”è¿›</h2>
<p>ç›®å‰ï¼Œåœ¨åº”ç”¨ç¨³å®šæ–¹é¢ï¼Œæ¢ç´¢å¹¶å®è·µè½åœ°äº†ä¸€ç§è½»é‡çº§è¿›ç¨‹é—´æœåŠ¡éš”ç¦»å•å…ƒåŒ–éƒ¨ç½²æ–¹æ³•ï¼Œåœ¨åº“å’Œåº“å­˜æŒ‰ä¸šåŠ¡åŸŸæ‹†åˆ†æœåŠ¡éƒ¨ç½²å•å…ƒåŒ–åˆ†ç»„ï¼Œåœ¨åº“æŒ‰ç›˜ç‚¹ã€è¡¥è´§ã€å˜æ›´ã€å¯¼å‡ºå¯¼å‡ºã€é€šç”¨æœåŠ¡éƒ¨ç½²ï¼Œåº“å­˜æŒ‰åº“å­˜æŸ¥è¯¢ã€åº“å®¹æœåŠ¡ã€é«˜æ—¶æ•ˆã€workeræœåŠ¡ç­‰ä½œä¸ºç‹¬ç«‹éƒ¨ç½²çš„éƒ¨ç½²å•å…ƒï¼Œæ§åˆ¶çˆ†ç‚¸åŠå¾„ï¼Œæ¯ä¸ªéƒ¨ç½²å•å…ƒéƒ½æ˜¯åŒæœºæˆ¿é«˜å¯ç”¨ï¼Œä¿éšœç³»ç»Ÿçš„ç¨³å®šæ€§ã€‚</p>
<p>æœªæ¥ï¼Œéšç€ç³»ç»Ÿçš„é•¿æœŸå‘å±•ï¼Œç³»ç»Ÿå¤æ‚æ€§éœ€æŒ‰åŸŸåˆç†æ‹†åˆ†æ²»ç†ï¼Œä¸šåŠ¡å•å…ƒåŒ–ï¼ŒæœåŠ¡å•å…ƒåŒ–ï¼Œç³»ç»Ÿæ¼”è¿›ä¸ä¸šåŠ¡å‘å±•é½å¤´å¹¶è¿›ï¼Œç›¸äº’ä¿ƒè¿›ï¼Œä½¿ç³»ç»Ÿå§‹ç»ˆä¿æŒåœ¨å¥åº·çš„æ°´ä½ï¼Œå¯æŒç»­å‘å±•</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Node.js è‡ªå¸¦â€œåŠ é€Ÿå™¨â€ï¼šnode --run æ˜¯å¦æ¯” Bun æ›´å¿«ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7602246300454436899</link>    <guid>https://juejin.cn/post/7602246300454436899</guid>    <pubDate>2026-02-03T14:17:36.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602246300454436899" data-draft-id="7584353612501368873" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Node.js è‡ªå¸¦â€œåŠ é€Ÿå™¨â€ï¼šnode --run æ˜¯å¦æ¯” Bun æ›´å¿«ï¼Ÿ"/> <meta itemprop="keywords" content="Bun,Node.js,deno"/> <meta itemprop="datePublished" content="2026-02-03T14:17:36.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Legend80s"/> <meta itemprop="url" content="https://juejin.cn/user/2568105753839790"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Node.js è‡ªå¸¦â€œåŠ é€Ÿå™¨â€ï¼šnode --run æ˜¯å¦æ¯” Bun æ›´å¿«ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2568105753839790/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Legend80s
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-03T14:17:36.000Z" title="Tue Feb 03 2026 14:17:36 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    30
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>åœ¨ JavaScript åç«¯è¿è¡Œæ—¶é¢†åŸŸï¼Œé€Ÿåº¦ä¸€ç›´æ˜¯æ ¸å¿ƒæˆ˜åœºã€‚è¿‘å¹´æ¥ï¼ŒBun ä»¥å…¶å®£ç§°çš„â€œä¸€ä½“åŒ–â€å·¥å…·é“¾å’Œé—ªç”µèˆ¬çš„å¯åŠ¨é€Ÿåº¦å¼‚å†›çªèµ·ï¼Œå¯¹è€ç‰Œç‹è€… Node.js å‘èµ·äº†å¼ºåŠ²æŒ‘æˆ˜ã€‚<code>bun run</code>Â çš„è¿…æ·ï¼Œè®©è®¸å¤šå¼€å‘è€…å¼€å§‹é‡æ–°è¯„ä¼°ä»–ä»¬çš„å·¥å…·é€‰æ‹©ã€‚</p>
<p>ç„¶è€Œï¼ŒNode.js å¹¶æœªæ­¢æ­¥ã€‚è‡ª v22.0.0 èµ·ï¼Œå®ƒæ‚„ç„¶å¼•å…¥äº†ä¸€ä¸ªä¸“ä¸ºå¯åŠ¨æ€§èƒ½è€Œç”Ÿçš„ç§˜å¯†æ­¦å™¨ï¼š<code>node --run</code>ã€‚è¿™ä¸ªå†…ç½®äº Node.js æ ¸å¿ƒçš„å‘½ä»¤ï¼Œæ—¨åœ¨ä»¥æœ€ç²¾ç®€ã€æœ€ç›´æ¥çš„æ–¹å¼æ‰§è¡ŒÂ <code>package.json</code>Â ä¸­çš„è„šæœ¬ï¼Œå®£ç§°è¦ä¸ºæœ€å¸¸è§çš„ç”¨ä¾‹æä¾›â€œé¡¶çº§æ€§èƒ½â€ã€‚</p>
<p>è¿™å¼•å‘äº†æˆ‘ä»¬çš„å¥½å¥‡ï¼šåœ¨çœŸå®çš„åœºæ™¯ä¸‹ï¼Œè¿™ä½æ–°ç§€çš„è¡¨ç°ç©¶ç«Ÿå¦‚ä½•ï¼Ÿå®ƒä¸Â <code>bun run</code>Â åŠä¼ ç»Ÿçš„Â <code>npm run</code>Â ç›¸æ¯”ï¼Œå­°ä¼˜å­°åŠ£ï¼Ÿ</p>
<p>æœ¬æ–‡å°†é€šè¿‡ä¸€ç³»åˆ—ä¸¥è°¨çš„å¯¹æ¯”æµ‹è¯•ï¼Œæ­å¼€Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fnodejs.org%2Fdocs%2Flatest%2Fapi%2Fcli.html%23--run" target="_blank" title="https://nodejs.org/docs/latest/api/cli.html#--run" ref="nofollow noopener noreferrer"><code>node --run</code></a>Â çš„ç¥ç§˜é¢çº±ï¼Œç”¨æ•°æ®å›ç­”ï¼šåœ¨ 2026 å¹´çš„è„šæœ¬å¯åŠ¨æ€§èƒ½ç«èµ›ä¸­ï¼Œè°æ‰æ˜¯çœŸæ­£çš„é€Ÿåº¦ç‹è€…ï¼Ÿ</p>
<p><strong/></p><p align="center"><strong>å„ä½å°ä¼™ä¼´è¯·æ³¨æ„ï¼æœ¬æ–‡å°†é¢ è¦†è¿™ä¸ªä¼ ç»Ÿè§‚å¿µâ€œbun å¯åŠ¨ä¸€å®šæ¯” Node.js æ›´å¿«â€ã€‚</strong></p><p/>
<hr/>
<p>é¦–å…ˆæˆ‘ä»¬å›é¡¾ä¸‹ Node.js è¿è¡Œæ–‡ä»¶æœ‰ä¸‰ç§æ–¹å¼ï¼š</p>
<ol>
<li>ç›´æ¥å¯åŠ¨ <code>node foo.[jt]s</code> ğŸ¤¼â€â™‚ï¸ <code>bun foo.[jt]s</code></li>
<li>package.json è„šæœ¬è¿è¡Œ <code>npm run foo</code> ğŸ¤¼â€â™‚ï¸ <code>bun run foo</code></li>
<li>è„šæœ¬ <code>--run</code> ç›´æ¥è¿è¡Œ <code>node --run foo</code> <em>Added in: v22.0.0</em> ğŸ¤¼â€â™‚ï¸ <code>bun --run foo</code></li>
</ol>
<p>ç»Ÿè®¡æ–¹æ³•ï¼Œæˆ‘ä»¬æ¨¡ä»¿ç«æŠ€æ¯”èµ›ä¸­ï¼Œå»æ‰ä¸€ä¸ªæœ€é«˜åˆ†å’Œä¸€ä¸ªæœ€ä½åˆ†ï¼Œå¯ä»¥é¿å…â€œå†·å¯åŠ¨â€ç­‰æç«¯æ•°æ®å¹²æ‰°ï¼Œé‡‡å–å»æ‰æœ€å¤§å’Œæœ€å°å€¼ç„¶åå–å¹³å‡å€¼ï¼Œè¿™æ ·<strong>æŠ—å¹²æ‰°æ€§å¼º</strong>ã€<strong>æ›´å…¬å¹³</strong>ã€‚</p>
<h2 data-id="heading-1">ç¬¬ä¸€è½®ï¼šç›´æ¥å¯åŠ¨ JS æ–‡ä»¶é€Ÿåº¦</h2>
<p>åˆ†åˆ«å¯åŠ¨ä¸¤ä¸ª mjs æ–‡ä»¶ï¼Œä¸€ä¸ªç©ºä¸€ä¸ªæœ‰ IO è¾“å‡ºã€‚æµ‹è¯•æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// empty.mjs</span>
</code></pre>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// io.mjs</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'hello world'</span>);

</code></pre>
<h3 data-id="heading-2">Node.js ğŸŸ¢</h3>
<p>åˆ†åˆ«æ‰§è¡Œ <code>time node empty.js</code> <code>time node io.mjs</code> å„è‡ªä¸‰æ¬¡ã€‚</p>
<p><code>â¯ time node empty.mjs</code>ï¼š</p>
<pre><code class="hljs language-ts" lang="ts">node empty.<span class="hljs-property">mjs</span>  <span class="hljs-number">0.</span>00s user <span class="hljs-number">0.</span>17s system <span class="hljs-number">78</span>% cpu <span class="hljs-number">0.217</span> total
node empty.<span class="hljs-property">mjs</span>  <span class="hljs-number">0.</span>00s user <span class="hljs-number">0.</span>17s system <span class="hljs-number">84</span>% cpu <span class="hljs-number">0.203</span> total
node empty.<span class="hljs-property">mjs</span>  <span class="hljs-number">0.</span>00s user <span class="hljs-number">0.</span>16s system <span class="hljs-number">69</span>% cpu <span class="hljs-number">0.225</span> total
</code></pre>
<p>æ—  io å¹³å‡è€—æ—¶ï¼š<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>â‰ˆ</mo><mn>217</mn><mi>m</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">\approx217ms</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4831em;"/><span class="mrel">â‰ˆ</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">217</span><span class="mord mathnormal">m</span><span class="mord mathnormal">s</span></span></span></span></span>ã€‚</p>
<p><code>â¯ time node io.mjs</code>ï¼š</p>
<pre><code class="hljs language-ts" lang="ts">node io.<span class="hljs-property">mjs</span>  <span class="hljs-number">0.</span>00s user <span class="hljs-number">0.</span>17s system <span class="hljs-number">73</span>% cpu <span class="hljs-number">0.234</span> total
node io.<span class="hljs-property">mjs</span>  <span class="hljs-number">0.</span>00s user <span class="hljs-number">0.</span>17s system <span class="hljs-number">72</span>% cpu <span class="hljs-number">0.236</span> total
node io.<span class="hljs-property">mjs</span>  <span class="hljs-number">0.</span>00s user <span class="hljs-number">0.</span>17s system <span class="hljs-number">74</span>% cpu <span class="hljs-number">0.229</span> total
</code></pre>
<p>io å¹³å‡è€—æ—¶ï¼š<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>â‰ˆ</mo><mn>234</mn><mi>m</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">\approx234ms</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4831em;"/><span class="mrel">â‰ˆ</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">234</span><span class="mord mathnormal">m</span><span class="mord mathnormal">s</span></span></span></span></span>ã€‚</p>
<p>æ•´ä½“è€—æ—¶ï¼š<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>â‰ˆ</mo><mn>225</mn><mi>m</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">\approx225ms</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4831em;"/><span class="mrel">â‰ˆ</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">225</span><span class="mord mathnormal">m</span><span class="mord mathnormal">s</span></span></span></span></span>ã€‚</p>
<h3 data-id="heading-3">Bun ğŸ</h3>
<pre><code class="hljs language-ts" lang="ts">bun empty.<span class="hljs-property">mjs</span>  <span class="hljs-number">0.</span>04s user <span class="hljs-number">0.</span>17s system <span class="hljs-number">56</span>% cpu <span class="hljs-number">0.375</span> total
bun empty.<span class="hljs-property">mjs</span>  <span class="hljs-number">0.</span>00s user <span class="hljs-number">0.</span>21s system <span class="hljs-number">63</span>% cpu <span class="hljs-number">0.337</span> total
bun empty.<span class="hljs-property">mjs</span>  <span class="hljs-number">0.</span>03s user <span class="hljs-number">0.</span>23s system <span class="hljs-number">70</span>% cpu <span class="hljs-number">0.371</span> total
</code></pre>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>â‰ˆ</mo><mn>371</mn><mi>m</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">\approx371ms</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4831em;"/><span class="mrel">â‰ˆ</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">371</span><span class="mord mathnormal">m</span><span class="mord mathnormal">s</span></span></span></span></span></p>
<pre><code class="hljs language-ts" lang="ts">bun io.<span class="hljs-property">mjs</span>  <span class="hljs-number">0.</span>05s user <span class="hljs-number">0.</span>17s system <span class="hljs-number">63</span>% cpu <span class="hljs-number">0.338</span> total
bun io.<span class="hljs-property">mjs</span>  <span class="hljs-number">0.</span>00s user <span class="hljs-number">0.</span>20s system <span class="hljs-number">56</span>% cpu <span class="hljs-number">0.351</span> total
bun io.<span class="hljs-property">mjs</span>  <span class="hljs-number">0.</span>03s user <span class="hljs-number">0.</span>20s system <span class="hljs-number">62</span>% cpu <span class="hljs-number">0.369</span> total
</code></pre>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>â‰ˆ</mo><mn>351</mn><mi>m</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">\approx351ms</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4831em;"/><span class="mrel">â‰ˆ</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">351</span><span class="mord mathnormal">m</span><span class="mord mathnormal">s</span></span></span></span></span></p>
<p>æ•´ä½“ï¼š<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>â‰ˆ</mo><mn>361</mn><mi>m</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">\approx361ms</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4831em;"/><span class="mrel">â‰ˆ</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">361</span><span class="mord mathnormal">m</span><span class="mord mathnormal">s</span></span></span></span></span></p>
<p>è¿™æ•°æ®æœ‰ç‚¹åå¸¸ï¼Œ1 bun å¯åŠ¨ io æ–‡ä»¶é€Ÿåº¦åè€Œå¿«äºç©ºæ–‡ä»¶ï¼Œ2 å…¶æ¬¡å¾—åˆ°æœ¬æ–‡ç¬¬ä¸€ä¸ª<strong>éå¸¸é‡è¦çš„ç»“è®ºï¼šbun å¯¹ js æ–‡ä»¶å¯åŠ¨é€Ÿåº¦åè€ŒåŠ£äº Node.js</strong>ï¼ˆäºŒè€…ç›¸å·® 100ms+ï¼‰ã€‚</p>
<h2 data-id="heading-4">ç¬¬äºŒè½®ï¼šç›´æ¥å¯åŠ¨ TS æ–‡ä»¶é€Ÿåº¦</h2>
<blockquote>
<p>[!TIP]
æ³¨æ„ï¼šæƒ³è¦ä¸åŠ å‚æ•°ç›´æ¥è¿è¡Œ TSï¼ŒNode.js ç‰ˆæœ¬éœ€ <strong><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>â‰¥</mo></mrow><annotation encoding="application/x-tex">\geq</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7719em;vertical-align:-0.136em;"/><span class="mrel">â‰¥</span></span></span></span></span> v22.18.0</strong>ã€‚</p>
</blockquote>
<p>åˆ†åˆ«å¯åŠ¨ä¸¤ä¸ª ts æ–‡ä»¶ï¼Œä¸€ä¸ªç©ºä¸€ä¸ªæœ‰ IO è¾“å‡ºã€‚æµ‹è¯•æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-sh" lang="sh"><span class="hljs-comment"># æ–‡ä»¶å†…å®¹ä¸€æ ·</span>
empty-ts.ts
io-ts.ts
</code></pre>
<h3 data-id="heading-5">Node.js ğŸŸ¢</h3>
<pre><code class="hljs language-ts" lang="ts">node empty-ts.<span class="hljs-property">ts</span>  <span class="hljs-number">0.</span>00s user <span class="hljs-number">0.</span>19s system <span class="hljs-number">73</span>% cpu <span class="hljs-number">0.254</span> total
node empty-ts.<span class="hljs-property">ts</span>  <span class="hljs-number">0.</span>00s user <span class="hljs-number">0.</span>17s system <span class="hljs-number">72</span>% cpu <span class="hljs-number">0.236</span> total
node empty-ts.<span class="hljs-property">ts</span>  <span class="hljs-number">0.</span>00s user <span class="hljs-number">0.</span>17s system <span class="hljs-number">71</span>% cpu <span class="hljs-number">0.240</span> total
</code></pre>
<p>æ—  io å¹³å‡è€—æ—¶ï¼š<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>â‰ˆ</mo><mn>240</mn><mi>m</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">\approx240ms</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4831em;"/><span class="mrel">â‰ˆ</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">240</span><span class="mord mathnormal">m</span><span class="mord mathnormal">s</span></span></span></span></span>ã€‚</p>
<p><code>â¯ time node io-ts.ts</code>ï¼š</p>
<pre><code class="hljs language-ts" lang="ts">node io-ts.<span class="hljs-property">ts</span>  <span class="hljs-number">0.</span>00s user <span class="hljs-number">0.</span>17s system <span class="hljs-number">64</span>% cpu <span class="hljs-number">0.263</span> total
node io-ts.<span class="hljs-property">ts</span>  <span class="hljs-number">0.</span>00s user <span class="hljs-number">0.</span>17s system <span class="hljs-number">67</span>% cpu <span class="hljs-number">0.255</span> total
node io-ts.<span class="hljs-property">ts</span>  <span class="hljs-number">0.</span>00s user <span class="hljs-number">0.</span>17s system <span class="hljs-number">67</span>% cpu <span class="hljs-number">0.254</span> total
</code></pre>
<p>io å¹³å‡è€—æ—¶ï¼š<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>â‰ˆ</mo><mn>255</mn><mi>m</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">\approx255ms</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4831em;"/><span class="mrel">â‰ˆ</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">255</span><span class="mord mathnormal">m</span><span class="mord mathnormal">s</span></span></span></span></span>ã€‚</p>
<p>æ•´ä½“è€—æ—¶ï¼š<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>â‰ˆ</mo><mn>248</mn><mi>m</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">\approx248ms</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4831em;"/><span class="mrel">â‰ˆ</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">248</span><span class="mord mathnormal">m</span><span class="mord mathnormal">s</span></span></span></span></span>ã€‚</p>
<blockquote>
<p>[!TIP]
å°ç»“ï¼šNode.js è¿è¡Œ ts è€—æ—¶æ¯” js å¢åŠ  <strong>~20ms</strong>ï¼Œè¿™åœ¨é¢„æœŸå†…å› ä¸ºå…ˆè¦ <a href="https://juejin.cn/spost/7407763018472046629#heading-12" target="_blank" title="https://juejin.cn/spost/7407763018472046629#heading-12">amacro ts ç¼–è¯‘å™¨å³å°†æ‰€æœ‰ç±»å‹ç”¨ç©ºæ ¼æ›¿ä»£</a>ã€‚</p>
</blockquote>
<h3 data-id="heading-6">Bun ğŸ</h3>
<pre><code class="hljs language-ts" lang="ts">bun empty-ts.<span class="hljs-property">ts</span>  <span class="hljs-number">0.</span>04s user <span class="hljs-number">0.</span>21s system <span class="hljs-number">69</span>% cpu <span class="hljs-number">0.372</span> total
bun empty-ts.<span class="hljs-property">ts</span>  <span class="hljs-number">0.</span>01s user <span class="hljs-number">0.</span>15s system <span class="hljs-number">45</span>% cpu <span class="hljs-number">0.372</span> total
bun empty-ts.<span class="hljs-property">ts</span>  <span class="hljs-number">0.</span>06s user <span class="hljs-number">0.</span>17s system <span class="hljs-number">56</span>% cpu <span class="hljs-number">0.402</span> total
</code></pre>
<p>æ—  io å¹³å‡è€—æ—¶ï¼š<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>â‰ˆ</mo><mn>372</mn><mi>m</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">\approx372ms</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4831em;"/><span class="mrel">â‰ˆ</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">372</span><span class="mord mathnormal">m</span><span class="mord mathnormal">s</span></span></span></span></span>ã€‚</p>
<pre><code class="hljs language-ts" lang="ts">bun io-ts.<span class="hljs-property">ts</span>  <span class="hljs-number">0.</span>01s user <span class="hljs-number">0.</span>25s system <span class="hljs-number">64</span>% cpu <span class="hljs-number">0.405</span> total
bun io-ts.<span class="hljs-property">ts</span>  <span class="hljs-number">0.</span>00s user <span class="hljs-number">0.</span>21s system <span class="hljs-number">55</span>% cpu <span class="hljs-number">0.388</span> total
bun io-ts.<span class="hljs-property">ts</span>  <span class="hljs-number">0.</span>09s user <span class="hljs-number">0.</span>23s system <span class="hljs-number">74</span>% cpu <span class="hljs-number">0.429</span> total
</code></pre>
<p>io å¹³å‡è€—æ—¶ï¼š<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>â‰ˆ</mo><mn>405</mn><mi>m</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">\approx 405ms</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4831em;"/><span class="mrel">â‰ˆ</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">405</span><span class="mord mathnormal">m</span><span class="mord mathnormal">s</span></span></span></span></span>ã€‚</p>
<p>æ•´ä½“è€—æ—¶ï¼š<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>â‰ˆ</mo><mn>388.5</mn><mi>m</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">\approx 388.5ms</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4831em;"/><span class="mrel">â‰ˆ</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">388.5</span><span class="mord mathnormal">m</span><span class="mord mathnormal">s</span></span></span></span></span>ã€‚</p>
<blockquote>
<p>[!TIP]
å°ç»“ï¼šBun è¿è¡Œ ts è€—æ—¶æ¯” js å¢åŠ  <strong>~20ms</strong>ï¼Œé¢„æœŸå†…ã€‚</p>
</blockquote>
<p>æœ¬æ–‡ç¬¬äºŒä¸ª<strong>ç»“è®ºï¼šbun æ‰§è¡Œ ts æ–‡ä»¶å¯åŠ¨é€Ÿåº¦åŠ£äº Node.js</strong>ï¼ˆäºŒè€…ç›¸å·® <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>388</mn><mo>âˆ’</mo><mn>248</mn><mo>=</mo><mn>140</mn><mi>m</mi><mi>s</mi><mo>+</mo></mrow><annotation encoding="application/x-tex">388 - 248 = 140ms+</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"/><span class="mord">388</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">248</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"/><span class="mord">140</span><span class="mord mathnormal">m</span><span class="mord mathnormal">s</span><span class="mord">+</span></span></span></span></span>ï¼‰ã€‚</p>
<p>æœ‰è¯»è€…å¯èƒ½ä¼šé—®æ˜¯å¦æ˜¯é€šè¿‡ç¯å¢ƒå˜é‡å¯»å€ bun è€—æ—¶å¯¼è‡´çš„ã€‚é‚£æˆ‘ä»¬ç›´æ¥è·³è¿‡å¯»å€ï¼š</p>
<p><code>â¯ time /e/pnpm/bun io-ts.ts</code></p>
<pre><code class="hljs language-ts" lang="ts">/e/pnpm/bun io-ts.<span class="hljs-property">ts</span>  <span class="hljs-number">0.</span>00s user <span class="hljs-number">0.</span>21s system <span class="hljs-number">55</span>% cpu <span class="hljs-number">0.384</span> total
/e/pnpm/bun io-ts.<span class="hljs-property">ts</span>  <span class="hljs-number">0.</span>00s user <span class="hljs-number">0.</span>23s system <span class="hljs-number">67</span>% cpu <span class="hljs-number">0.341</span> total
/e/pnpm/bun io-ts.<span class="hljs-property">ts</span>  <span class="hljs-number">0.</span>06s user <span class="hljs-number">0.</span>17s system <span class="hljs-number">56</span>% cpu <span class="hljs-number">0.407</span> total
</code></pre>
<p>ç›´æ¥å¯»å€è€—æ—¶ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>384</mn><mi>m</mi><mi>s</mi></mrow><annotation encoding="application/x-tex"> 384ms</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">384</span><span class="mord mathnormal">m</span><span class="mord mathnormal">s</span></span></span></span></span>ï¼Œç¡®å®å°‘äº <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>405</mn><mi>m</mi><mi>s</mi></mrow><annotation encoding="application/x-tex"> 405ms</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">405</span><span class="mord mathnormal">m</span><span class="mord mathnormal">s</span></span></span></span></span>ï¼Œä½†ä¾ç„¶æ˜¾è‘—é«˜äº Node.js çš„ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>255</mn><mi>m</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">255ms</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">255</span><span class="mord mathnormal">m</span><span class="mord mathnormal">s</span></span></span></span></span>ï¼æ‰€ä»¥</p>
<h2 data-id="heading-7">ç»“è®ºä¸€</h2>
<p>Bun æ— è®º<strong>å¯åŠ¨</strong> JavaScript è¿˜æ˜¯ TypeScript æ–‡ä»¶<strong>éƒ½è¦æ…¢äº Node.js</strong>ï¼</p>
<blockquote>
<p>æ³¨æ„è¿™é‡Œæ˜¯<strong>å¯åŠ¨</strong>è€Œéè¿è¡Œã€‚</p>
</blockquote>
<h2 data-id="heading-8">ç¬¬ä¸‰è½®ï¼špackage.json è„šæœ¬å¯åŠ¨</h2>
<p>ç»“è®ºå…ˆè¡Œï¼šæ‰§è¡Œ package.json å†…çš„ scripts <code>bun run</code> çš„å¯åŠ¨é€Ÿåº¦å¿«äº <code>npm run</code>ã€‚æˆ‘ä»¬æµ‹è¯•ä¸‹ã€‚</p>
<p>npm v11.7.0</p>
<p>æˆ‘ä»¬å®šä¹‰ä¸¤ä¸ª script io å’Œä¸å« io çš„ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"module"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"scripts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"io"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"echo \"hello world\""</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"empty"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">""</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-9">npm run</h3>
<p><code>â¯ time command npm run io</code></p>
<blockquote>
<p>[!TIP]
<code>command npm</code> æ˜¯å› ä¸ºæˆ‘åœ¨ <code>~/.zshrc</code> å†…å¯¹ npm åšäº†åŒå alias éœ€é€šè¿‡ <code>command</code> æ‰¾åˆ°åŸå§‹å‘½ä»¤ã€‚</p>
</blockquote>
<pre><code class="hljs language-ts" lang="ts">&gt; rsbuild-react-<span class="hljs-number">19</span>@<span class="hljs-number">1.0</span><span class="hljs-number">.0</span> io
&gt; io <span class="hljs-string">"hello world"</span>

<span class="hljs-string">"hello world"</span>
command npm run io  <span class="hljs-number">0.</span>00s user <span class="hljs-number">0.</span>39s system <span class="hljs-number">58</span>% cpu <span class="hljs-number">0.660</span> total
</code></pre>
<pre><code class="hljs language-ts" lang="ts">command npm run io  <span class="hljs-number">0.</span>00s user <span class="hljs-number">0.</span>34s system <span class="hljs-number">52</span>% cpu <span class="hljs-number">0.649</span> total
command npm run io  <span class="hljs-number">0.</span>01s user <span class="hljs-number">0.</span>31s system <span class="hljs-number">50</span>% cpu <span class="hljs-number">0.638</span> total
</code></pre>
<p><code>npm run io</code> è€—æ—¶ï¼š<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>650</mn><mi>m</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">650ms</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">650</span><span class="mord mathnormal">m</span><span class="mord mathnormal">s</span></span></span></span></span>ã€‚</p>
<p>å»é™¤ IOï¼š<code>â¯ time command npm run empty</code></p>
<pre><code class="hljs language-ts" lang="ts">command npm run empty  <span class="hljs-number">0.</span>05s user <span class="hljs-number">0.</span>32s system <span class="hljs-number">60</span>% cpu <span class="hljs-number">0.610</span> total
command npm run empty  <span class="hljs-number">0.</span>03s user <span class="hljs-number">0.</span>34s system <span class="hljs-number">59</span>% cpu <span class="hljs-number">0.626</span> total
command npm run empty  <span class="hljs-number">0.</span>00s user <span class="hljs-number">0.</span>33s system <span class="hljs-number">53</span>% cpu <span class="hljs-number">0.611</span> total
</code></pre>
<p>çº¯å¯åŠ¨è€—æ—¶ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>616</mn><mi>m</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">616ms</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">616</span><span class="mord mathnormal">m</span><span class="mord mathnormal">s</span></span></span></span></span>ã€‚</p>
<p>æ•´ä½“è€—æ—¶ï¼š<code>npm run</code> å¯åŠ¨éœ€ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>â‰ˆ</mo><mn>600</mn><mi>m</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">\approx600ms</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4831em;"/><span class="mrel">â‰ˆ</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">600</span><span class="mord mathnormal">m</span><span class="mord mathnormal">s</span></span></span></span></span>ã€‚è¿™ä¹Ÿå¤ªæ…¢äº†ï¼Œä»£ç å•¥éƒ½æ²¡å¹²å‘¢ï¼</p>
<p>æ¥ä¸‹æ¥è¯•è¯• <code>bun run</code>ã€‚</p>
<h3 data-id="heading-10">bun run</h3>
<p><code>â¯ time bun run io</code>:</p>
<pre><code class="hljs language-ts" lang="ts">bun run io  <span class="hljs-number">0.</span>03s user <span class="hljs-number">0.</span>21s system <span class="hljs-number">79</span>% cpu <span class="hljs-number">0.308</span> total
bun run io  <span class="hljs-number">0.</span>06s user <span class="hljs-number">0.</span>21s system <span class="hljs-number">78</span>% cpu <span class="hljs-number">0.347</span> total
bun run io  <span class="hljs-number">0.</span>00s user <span class="hljs-number">0.</span>21s system <span class="hljs-number">68</span>% cpu <span class="hljs-number">0.313</span> total
</code></pre>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>313</mn><mi>m</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">313 ms</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">313</span><span class="mord mathnormal">m</span><span class="mord mathnormal">s</span></span></span></span></span> å·¦å³</p>
<p><code>â¯ time bun run empty</code>ï¼š</p>
<pre><code class="hljs language-ts" lang="ts">bun run empty  <span class="hljs-number">0.</span>04s user <span class="hljs-number">0.</span>18s system <span class="hljs-number">60</span>% cpu <span class="hljs-number">0.380</span> total
bun run empty  <span class="hljs-number">0.</span>01s user <span class="hljs-number">0.</span>21s system <span class="hljs-number">69</span>% cpu <span class="hljs-number">0.330</span> total
bun run empty  <span class="hljs-number">0.</span>03s user <span class="hljs-number">0.</span>21s system <span class="hljs-number">67</span>% cpu <span class="hljs-number">0.361</span> total
</code></pre>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>361</mn><mi>m</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">361 ms</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">361</span><span class="mord mathnormal">m</span><span class="mord mathnormal">s</span></span></span></span></span> å·¦å³ã€‚ç¬¬äºŒä¸ªåå¸¸ io åè€Œæ›´æ…¢ã€‚</p>
<p>æ•´ä½“è€—æ—¶ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>337</mn><mi>m</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">337 ms</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">337</span><span class="mord mathnormal">m</span><span class="mord mathnormal">s</span></span></span></span></span>ã€‚ç»“è®º <code>bun run</code> å¤§æ¦‚æ˜¯ <code>npm run</code> çš„ä¸¤å€ï¼ˆ<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>600</mn><mi mathvariant="normal">/</mi><mn>300</mn><mo>=</mo><mn>2</mn></mrow><annotation encoding="application/x-tex">600 / 300=2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord">600/300</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">2</span></span></span></span></span>ï¼‰æ€§èƒ½ã€‚</p>
<p>çªç„¶æƒ³èµ· Node.js v22.0.0 æ”¯æŒ <code>node --run</code> è¿è¡Œè„šæœ¬ï¼Œä¸“ä¸ºæ€§èƒ½è€Œç”Ÿï¼Œçœ‹çœ‹å®ƒè¡¨ç°å¦‚ä½•ã€‚</p>
<h2 data-id="heading-11">ç¬¬å››è½®ï¼špackage.json è„šæœ¬ `--run` ç›´æ¥è¿è¡Œ</h2>
<p>å…ˆè§£é‡Šä¸‹ <code>node --run</code>ï¼Œæ˜¯çš„ï¼Œå®ƒä¹Ÿå¯ä»¥æ‰§è¡Œ package.json ä¸­çš„è„šæœ¬ï¼Œè€Œä¸”ç”Ÿæ¥å°±æ˜¯ä¸ºæ€§èƒ½è€ƒè™‘ï¼ˆä¸ä¼šæ‰§è¡Œ <code>pre</code> / <code>post</code> é’©å­ï¼‰ã€‚</p>
<blockquote>
<p>å®ƒå°†ä» <code>package.json</code> æ–‡ä»¶çš„ <code>"scripts"</code> å¯¹è±¡ä¸­è¿è¡ŒæŒ‡å®šçš„å‘½ä»¤ã€‚å¦‚æœæä¾›çš„ <code>"command"</code> ä¸å­˜åœ¨ï¼Œåˆ™ä¼šåˆ—å‡ºå¯ç”¨çš„è„šæœ¬ã€‚</p>
<p><code>node --run</code> å¹¶ä¸æ—¨åœ¨å®Œå…¨åŒ¹é… <code>npm run</code> æˆ–å…¶ä»–åŒ…ç®¡ç†å™¨çš„è¿è¡Œå‘½ä»¤çš„è¡Œä¸ºã€‚Node.js çš„å®ç°<strong>æœ‰æ„æ›´åŠ ç²¾ç®€</strong>ï¼Œä»¥ä¾¿åœ¨æœ€å¸¸è§çš„ç”¨ä¾‹ä¸­<strong>ä¸“æ³¨äºé¡¶çº§æ€§èƒ½</strong>ã€‚å…¶ä»–è¿è¡Œå®ç°ä¸­ä¸€äº›è¢«æœ‰æ„æ’é™¤çš„åŠŸèƒ½åŒ…æ‹¬ï¼š</p>
<ul>
<li>é™¤äº†è¿è¡ŒæŒ‡å®šçš„è„šæœ¬å¤–ï¼Œè¿˜ä¼šè¿è¡Œå‰ç½®ï¼ˆ<code>pre</code>ï¼‰æˆ–åç½®ï¼ˆ<code>post</code>ï¼‰è„šæœ¬ã€‚</li>
<li>å®šä¹‰ç‰¹å®šäºåŒ…ç®¡ç†å™¨çš„ç¯å¢ƒå˜é‡ã€‚</li>
</ul>
<p>â€”â€” <a href="https://link.juejin.cn?target=https%3A%2F%2Fnodejs.org%2Fdocs%2Flatest%2Fapi%2Fcli.html%23--run" target="_blank" title="https://nodejs.org/docs/latest/api/cli.html#--run" ref="nofollow noopener noreferrer">nodejs.org/docs/latestâ€¦</a></p>
</blockquote>
<h3 data-id="heading-12">node --run</h3>
<p><code>â¯ time node --run io</code>:</p>
<pre><code class="hljs language-ts" lang="ts">node --run io  <span class="hljs-number">0.</span>00s user <span class="hljs-number">0.</span>17s system <span class="hljs-number">79</span>% cpu <span class="hljs-number">0.216</span> total
node --run io  <span class="hljs-number">0.</span>00s user <span class="hljs-number">0.</span>16s system <span class="hljs-number">81</span>% cpu <span class="hljs-number">0.192</span> total
node --run io  <span class="hljs-number">0.</span>00s user <span class="hljs-number">0.</span>19s system <span class="hljs-number">84</span>% cpu <span class="hljs-number">0.220</span> total
</code></pre>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>216</mn><mi>m</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">216ms</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">216</span><span class="mord mathnormal">m</span><span class="mord mathnormal">s</span></span></span></span></span> å®Œç¾ ğŸ¤©</p>
<p><code>â¯ time node --run empty</code>:</p>
<pre><code class="hljs language-ts" lang="ts">node --run empty  <span class="hljs-number">0.</span>00s user <span class="hljs-number">0.</span>17s system <span class="hljs-number">89</span>% cpu <span class="hljs-number">0.192</span> total
node --run empty  <span class="hljs-number">0.</span>01s user <span class="hljs-number">0.</span>16s system <span class="hljs-number">80</span>% cpu <span class="hljs-number">0.212</span> total
node --run empty  <span class="hljs-number">0.</span>00s user <span class="hljs-number">0.</span>17s system <span class="hljs-number">89</span>% cpu <span class="hljs-number">0.192</span> total
</code></pre>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>192</mn><mi>m</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">192 ms</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">192</span><span class="mord mathnormal">m</span><span class="mord mathnormal">s</span></span></span></span></span> å®Œç¾ ğŸ¤©ğŸ¤©</p>
<p><code>node --run</code> æ•´ä½“å¹³å‡ï¼š<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>204</mn><mi>m</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">204 ms</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">204</span><span class="mord mathnormal">m</span><span class="mord mathnormal">s</span></span></span></span></span>ï¼Œç¡®å®åšäº†æ€§èƒ½ä¼˜åŒ–ï¼Œ<strong>ä¸‰å€æ€§èƒ½æå‡ ğŸš€</strong>ï¼š<code>npm run 616ms</code> VS <code>node --run 204ms</code></p>
<h3 data-id="heading-13">bun --run</h3>
<pre><code class="hljs language-ts" lang="ts">bun --run empty  <span class="hljs-number">0.</span>06s user <span class="hljs-number">0.</span>14s system <span class="hljs-number">53</span>% cpu <span class="hljs-number">0.370</span> total
bun --run empty  <span class="hljs-number">0.</span>05s user <span class="hljs-number">0.</span>21s system <span class="hljs-number">75</span>% cpu <span class="hljs-number">0.347</span> total
bun --run empty  <span class="hljs-number">0.</span>04s user <span class="hljs-number">0.</span>21s system <span class="hljs-number">68</span>% cpu <span class="hljs-number">0.379</span> total
</code></pre>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>370</mn><mi>m</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">370 ms</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">370</span><span class="mord mathnormal">m</span><span class="mord mathnormal">s</span></span></span></span></span></p>
<pre><code class="hljs language-ts" lang="ts">bun --run io  <span class="hljs-number">0.</span>01s user <span class="hljs-number">0.</span>18s system <span class="hljs-number">61</span>% cpu <span class="hljs-number">0.324</span> total
bun --run io  <span class="hljs-number">0.</span>01s user <span class="hljs-number">0.</span>23s system <span class="hljs-number">73</span>% cpu <span class="hljs-number">0.334</span> total
bun --run io  <span class="hljs-number">0.</span>03s user <span class="hljs-number">0.</span>17s system <span class="hljs-number">52</span>% cpu <span class="hljs-number">0.382</span> total
</code></pre>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>334</mn><mi>m</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">334 ms</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">334</span><span class="mord mathnormal">m</span><span class="mord mathnormal">s</span></span></span></span></span> ï¼ˆio åè€Œé€Ÿåº¦å¿«äºç©ºè„šæœ¬ -_-||ï¼‰</p>
<p><code>bun --run</code> æ•´ä½“è€—æ—¶ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>352</mn><mi>m</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">352 ms</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">352</span><span class="mord mathnormal">m</span><span class="mord mathnormal">s</span></span></span></span></span>ï¼Œ<strong>åå¸¸ä¸‰ï¼š<code>bun --run</code> æ…¢äº <code>node --run</code></strong> çš„ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>204</mn><mi>m</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">204 ms</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">204</span><span class="mord mathnormal">m</span><span class="mord mathnormal">s</span></span></span></span></span></p>
<h2 data-id="heading-14">æ€§èƒ½æ•°æ®æ€»ç»“</h2>
<p>æ–‡ç« ä»ä¸‰ä¸ªç»´åº¦ï¼ˆç›´æ¥å¯åŠ¨æ–‡ä»¶ã€è¿è¡Œ package.json è„šæœ¬ã€ä½¿ç”¨Â <code>--run</code>Â å‘½ä»¤ï¼‰å¯¹æ¯”äº† Node.js å’Œ Bun çš„æ€§èƒ½ã€‚</p>
<h3 data-id="heading-15">æ ¸å¿ƒç»“è®º</h3>
<ol>
<li><strong>ç›´æ¥å¯åŠ¨æ–‡ä»¶</strong>ï¼šæ— è®º TS or JSï¼ŒNode.js ä»¥æ˜¾è‘—ä¼˜åŠ¿èƒœå‡ºã€‚</li>
<li><strong>è¿è¡Œ package.json è„šæœ¬</strong>ï¼šBun (<code>bun run</code>) å‡»è´¥ npm (<code>npm run</code>)ï¼Œä½† <code>node --run</code>Â å‡­å€Ÿå…¶ç²¾ç®€è®¾è®¡å‡»è´¥ <code>bun run / npm run / bun --run</code>ã€‚</li>
</ol>
<p><strong/></p><p align="center"><strong>è‡³æ­¤æœ¬æ–‡é¢ è¦†äº†ä¸€ä¸ªä¼ ç»Ÿè§‚å¿µâ€œbun å¯åŠ¨ä¸€å®šæ¯” Node.js æ›´å¿«â€ã€‚</strong></p><p/>
<h4 data-id="heading-16">é™„å½•ï¼šè¯¦ç»†æ•°æ®</h4>
<h6 data-id="heading-17">è¡¨æ ¼ä¸€ï¼šç›´æ¥è¿è¡Œ JS/TS æ–‡ä»¶æ€§èƒ½å¯¹æ¯” (å•ä½ï¼šms)</h6>















































<table><thead><tr><th>æµ‹è¯•åœºæ™¯</th><th>Node.js (v22.18.0)</th><th>Bun (v1.3.2)</th><th><strong>æ€§èƒ½èƒœå‡ºæ–¹</strong></th></tr></thead><tbody><tr><td>å¯åŠ¨ç©º JS æ–‡ä»¶</td><td>~217</td><td>~371</td><td>Node.js (å¿« ~41%)</td></tr><tr><td>å¯åŠ¨å« IO çš„ JS æ–‡ä»¶</td><td>~234</td><td>~351</td><td>Node.js (å¿« ~33%)</td></tr><tr><td><strong>JS æ–‡ä»¶å¯åŠ¨ç»¼åˆè€—æ—¶</strong></td><td><strong>~225</strong></td><td>~361</td><td><strong>Node.js èƒœå‡º</strong></td></tr><tr><td>å¯åŠ¨ç©º TS æ–‡ä»¶</td><td>~240</td><td>~372</td><td>Node.js (å¿« ~35%)</td></tr><tr><td>å¯åŠ¨å« IO çš„ TS æ–‡ä»¶</td><td>~255</td><td>~405</td><td>Node.js (å¿« ~37%)</td></tr><tr><td><strong>TS æ–‡ä»¶å¯åŠ¨ç»¼åˆè€—æ—¶</strong></td><td><strong>~248</strong></td><td>~389</td><td><strong>Node.js èƒœå‡º</strong></td></tr></tbody></table>
<p><strong>ç»“è®ºä¸€ï¼š</strong> Â åœ¨ç›´æ¥å¯åŠ¨æ–‡ä»¶ï¼ˆæ— è®º JS æˆ– TSï¼‰çš„åœºæ™¯ä¸‹ï¼Œ<strong>Node.js ğŸš€ æ€§èƒ½æ˜¾è‘—ä¼˜äº Bun</strong>ï¼Œå¹³å‡é¢†å…ˆå¹…åº¦åœ¨ 35%-41% å·¦å³ã€‚è™½ç„¶æœ‰åç›´è§‰ä½†æ˜¯æˆ‘çš„ Windows ä¸‹ç¡®å®å¦‚æ­¤ã€‚</p>
<hr/>
<h5 data-id="heading-18">è¡¨æ ¼äºŒï¼šè¿è¡Œ package.json è„šæœ¬æ€§èƒ½å¯¹æ¯” (å•ä½ï¼šms)</h5>








































<table><thead><tr><th>æ‰§è¡Œæ–¹å¼</th><th>å¹³å‡è€—æ—¶ (å«IO)</th><th>å¹³å‡è€—æ—¶ (ç©ºè„šæœ¬)</th><th>ç»¼åˆå¹³å‡è€—æ—¶</th><th><strong>æ€§èƒ½æ’åº (ç”±å¿«åˆ°æ…¢)</strong></th></tr></thead><tbody><tr><td><strong><code>node --run</code></strong></td><td>~216 ms</td><td>~192 ms</td><td><strong>~204 ms</strong></td><td>ğŸ¥‡Â <strong>ç¬¬1å</strong></td></tr><tr><td><strong><code>bun run</code></strong></td><td>~313 ms</td><td>~361 ms</td><td>~337 ms</td><td>ğŸ¥ˆÂ <strong>ç¬¬2å</strong></td></tr><tr><td><strong><code>bun --run</code></strong></td><td>~334 ms</td><td>~370 ms</td><td>~352 ms</td><td>ğŸ¥‰Â <strong>ç¬¬3å</strong></td></tr><tr><td><strong><code>npm run</code></strong></td><td>~650 ms</td><td>~616 ms</td><td>~633 ms</td><td><strong>ç¬¬4å</strong></td></tr></tbody></table>
<p><strong>ç»“è®ºäºŒï¼š</strong></p>
<ol>
<li><strong><code>node --run</code>Â æ˜¯ç»å¯¹çš„æ€§èƒ½å† å†›</strong>ï¼Œé€Ÿåº¦æ˜¯Â <code>npm run</code>Â çš„Â <strong>3.1 å€</strong>ï¼Œä¹Ÿæ¯”Â <code>bun run</code>Â å¿«çº¦Â <strong>65%</strong> ã€‚</li>
<li>Bun ç›¸å…³å‘½ä»¤æ€§èƒ½æ¥è¿‘ï¼š<code>bun run</code>Â å’ŒÂ <code>bun --run</code>Â æ€§èƒ½åœ¨åŒä¸€æ°´å¹³ï¼Œéƒ½æ˜¾è‘—å¿«äºÂ <code>npm run</code>ï¼ˆå¿«çº¦ 88%ï¼‰ã€‚</li>
<li><strong><code>npm run</code>Â å«åº•</strong>ï¼šä¼ ç»Ÿ npm è„šæœ¬çš„å¯åŠ¨å¼€é”€æœ€å¤§ï¼Œè€—æ—¶æœ€é•¿ã€‚</li>
</ol>
<h2 data-id="heading-19">å¯¹æˆ‘ä»¬çš„å¯å‘</h2>
<ul>
<li><strong>Node.js vs. Bun å¯åŠ¨é€Ÿåº¦</strong>ï¼šåœ¨ç›´æ¥å¯åŠ¨Â <code>.js</code>Â æˆ–Â <code>.ts</code>Â æ–‡ä»¶æ—¶ï¼ŒNode.js æ¯” Bun å¿«çº¦Â <strong>40%-60%</strong> ã€‚è¿™æ˜¯â€œ<strong>ä¸€ä¸ªéå¸¸é‡è¦çš„ç»“è®º</strong>â€ã€‚</li>
<li><strong>Package Script è¿è¡Œé€Ÿåº¦</strong>ï¼š
<ul>
<li><code>bun run</code>Â æ¯”Â <code>npm run</code>Â å¿«çº¦Â <strong>2 å€</strong>ã€‚</li>
<li>è€Œé»‘é©¬ ğŸ <code>node --run</code>Â æ¯”Â <code>npm run</code>Â å¿«çº¦Â <strong>3 å€</strong>ï¼</li>
</ul>
</li>
</ul>
<p><strong><code>node --run</code>Â çš„æ„ä¹‰</strong>â€”â€”<strong>åŒ…è„šæœ¬è¿è¡Œçš„é©æ–°</strong>ï¼š<code>node --run</code>Â æ— ç–‘æ˜¯æœ¬æ¬¡æµ‹è¯•çš„æœ€å¤§äº®ç‚¹ï¼Œå…¶é€Ÿåº¦éå¸¸æ¥è¿‘ç›´æ¥è¿è¡ŒÂ <code>node foo.js</code>Â çš„é€Ÿåº¦ï¼Œå®ç°äº†è¿‘ä¹â€œè£¸å¥”â€çš„è„šæœ¬æ‰§è¡Œæ€§èƒ½ã€‚å®ƒé€šè¿‡<strong>ç‰ºç‰² npm è„šæœ¬çš„éƒ¨åˆ†é«˜çº§åŠŸèƒ½</strong>ï¼ˆå¦‚Â <code>pre</code>/<code>post</code>Â é’©å­ã€ç‰¹å®šçš„ç¯å¢ƒå˜é‡ï¼‰ï¼Œæ¢æ¥äº†Â  <strong>~3 å€äºÂ <code>npm run</code>Â çš„é€Ÿåº¦æå‡</strong>ï¼Œç”šè‡³è¶…è¶Šäº†ä»¥é€Ÿåº¦è§é•¿çš„Â <code>bun run</code>ã€‚å¯¹äºè¿½æ±‚æè‡´æ„å»ºã€æµ‹è¯•æˆ–å¯åŠ¨é€Ÿåº¦ï¼Œä¸”ä¸ä¾èµ–è¿™äº›é«˜çº§ç‰¹æ€§çš„é¡¹ç›®ï¼Œ<code>node --run</code>Â æä¾›äº†ä¸€ä¸ªè¿‘ä¹å®Œç¾çš„â€œæ€§èƒ½æ¨¡å¼â€ã€‚</p>
<p>å¯å‘ï¼šå¦‚æœä½ è¦ç›´æ¥æ‰§è¡Œæ–‡ä»¶è¯·ä½¿ç”¨ Node.jsï¼Œå¦‚æœè¦æ‰§è¡Œ npm script å»ºè®® 99% æƒ…å†µä¸‹ç”¨ <code>node --run</code>ï¼ˆæ— éœ€è¿è¡Œ <code>pre / post npm script</code> æ—¶ï¼‰å¦åˆ™ <code>bun run</code>ã€‚</p>
<h2 data-id="heading-20">è¯´æ˜</h2>
<p>æµ‹è¯•ç¯å¢ƒ Windows 10ã€git bashã€Node.js ğŸŸ¢ v22.18.0ã€npm v11.7.0ã€bun ğŸ v1.3.2ã€‚</p>
<hr/>
<p><em/></p><p align="center"><em>â€”â€” å®Œ ğŸ‰ æœ€æ–°æ–‡ç« è¯·å…³æ³¨å…¬ä¼—å· <strong><code>JavaScriptä¸ç¼–ç¨‹è‰ºæœ¯</code></strong> â€”â€”</em></p><p/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item>  </channel></rss>